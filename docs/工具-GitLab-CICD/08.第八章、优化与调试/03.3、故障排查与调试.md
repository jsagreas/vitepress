---
title: 3ã€æ•…éšœæ’æŸ¥ä¸è°ƒè¯•
---
## ğŸ“š ç›®å½•

1. [æ•…éšœæ’æŸ¥åŸºç¡€æ¦‚å¿µ](#1-æ•…éšœæ’æŸ¥åŸºç¡€æ¦‚å¿µ)
2. [Jobæ—¥å¿—æŸ¥çœ‹ä¸åˆ†æ](#2-Jobæ—¥å¿—æŸ¥çœ‹ä¸åˆ†æ)
3. [è°ƒè¯•æ¨¡å¼å¼€å¯](#3-è°ƒè¯•æ¨¡å¼å¼€å¯)
4. [å¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ](#4-å¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ)
5. [Runnerè¿æ¥é—®é¢˜æ’æŸ¥](#5-Runnerè¿æ¥é—®é¢˜æ’æŸ¥)
6. [æ„å»ºå¤±è´¥æ’æŸ¥](#6-æ„å»ºå¤±è´¥æ’æŸ¥)
7. [éƒ¨ç½²å¤±è´¥å¤„ç†](#7-éƒ¨ç½²å¤±è´¥å¤„ç†)
8. [é…ç½®é—®é¢˜è¯Šæ–­](#8-é…ç½®é—®é¢˜è¯Šæ–­)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” æ•…éšœæ’æŸ¥åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯CI/CDæ•…éšœæ’æŸ¥


**ğŸ¯ ç®€å•ç†è§£**ï¼šå°±åƒåŒ»ç”Ÿç»™ç—…äººçœ‹ç—…ä¸€æ ·ï¼Œå½“ä½ çš„CI/CDæµæ°´çº¿å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°é—®é¢˜çš„æ ¹æºå¹¶è§£å†³å®ƒã€‚

```
ç°å®ç±»æ¯”ï¼š
æ±½è½¦æŠ›é”šäº† â†’ æ£€æŸ¥å¼•æ“ã€æ²¹ç®±ã€è½®èƒ â†’ æ‰¾åˆ°é—®é¢˜ â†’ ä¿®ç†

CI/CDå‡ºé”™äº† â†’ æŸ¥çœ‹æ—¥å¿—ã€æ£€æŸ¥é…ç½®ã€æµ‹è¯•è¿æ¥ â†’ æ‰¾åˆ°é—®é¢˜ â†’ ä¿®å¤
```

**ğŸ“‹ æ•…éšœæ’æŸ¥çš„æœ¬è´¨**
- **é—®é¢˜å®šä½**ï¼šå¿«é€Ÿæ‰¾åˆ°å‡ºé”™çš„å…·ä½“ç¯èŠ‚
- **åŸå› åˆ†æ**ï¼šç†è§£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜  
- **è§£å†³æ–¹æ¡ˆ**ï¼šé‡‡å–æ­£ç¡®çš„ä¿®å¤æªæ–½
- **é¢„é˜²æœºåˆ¶**ï¼šé¿å…åŒç±»é—®é¢˜å†æ¬¡å‘ç”Ÿ

### 1.2 CI/CDæ•…éšœçš„å¸¸è§ç±»å‹


**ğŸ”¸ æŒ‰é˜¶æ®µåˆ†ç±»**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æºç é˜¶æ®µ      â”‚ â†’  â”‚   æ„å»ºé˜¶æ®µ      â”‚ â†’  â”‚   éƒ¨ç½²é˜¶æ®µ      â”‚
â”‚ â€¢ ä»£ç è¯­æ³•é”™è¯¯   â”‚    â”‚ â€¢ ä¾èµ–ä¸‹è½½å¤±è´¥   â”‚    â”‚ â€¢ æœåŠ¡å™¨è¿æ¥å¤±è´¥  â”‚
â”‚ â€¢ é…ç½®æ–‡ä»¶é”™è¯¯   â”‚    â”‚ â€¢ ç¼–è¯‘å¤±è´¥      â”‚    â”‚ â€¢ æƒé™ä¸è¶³      â”‚
â”‚ â€¢ ç‰ˆæœ¬å†²çª      â”‚    â”‚ â€¢ æµ‹è¯•ç”¨ä¾‹å¤±è´¥   â”‚    â”‚ â€¢ ç¯å¢ƒå˜é‡é”™è¯¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ æŒ‰å½±å“èŒƒå›´åˆ†ç±»**

| æ•…éšœç±»å‹ | **å½±å“èŒƒå›´** | **å…¸å‹ç—‡çŠ¶** | **ç´§æ€¥ç¨‹åº¦** |
|---------|-------------|-------------|-------------|
| ğŸ”´ **å…¨å±€æ•…éšœ** | `æ•´ä¸ªPipelineå¤±è´¥` | `æ‰€æœ‰Jobéƒ½æ— æ³•è¿è¡Œ` | `ğŸš¨ ç´§æ€¥` |
| ğŸŸ¡ **é˜¶æ®µæ•…éšœ** | `æŸä¸ªStageå¤±è´¥` | `ç‰¹å®šé˜¶æ®µçš„Jobå¤±è´¥` | `âš ï¸ é‡è¦` |
| ğŸŸ¢ **Jobæ•…éšœ** | `å•ä¸ªJobå¤±è´¥` | `ä¸ªåˆ«ä»»åŠ¡æ‰§è¡Œå¤±è´¥` | `ğŸ’¡ ä¸€èˆ¬` |

### 1.3 æ•…éšœæ’æŸ¥çš„åŸºæœ¬æ€è·¯


**ğŸ§  ç³»ç»ŸåŒ–æ€ç»´æ¡†æ¶**
```
ç¬¬1æ­¥ï¼šè§‚å¯Ÿç°è±¡
â”œâ”€ ä»€ä¹ˆæ—¶å€™å¼€å§‹å‡ºé”™çš„ï¼Ÿ
â”œâ”€ é”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿ
â”œâ”€ å½±å“èŒƒå›´æœ‰å¤šå¤§ï¼Ÿ
â””â”€ ä¹‹å‰æœ‰æ²¡æœ‰ç±»ä¼¼é—®é¢˜ï¼Ÿ

ç¬¬2æ­¥ï¼šæ”¶é›†ä¿¡æ¯  
â”œâ”€ æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
â”œâ”€ æ£€æŸ¥ç›¸å…³é…ç½®
â”œâ”€ å¯¹æ¯”æ­£å¸¸çŠ¶æ€
â””â”€ æµ‹è¯•å„ä¸ªç»„ä»¶

ç¬¬3æ­¥ï¼šåˆ†æåŸå› 
â”œâ”€ æ ¹æ®æ—¥å¿—å®šä½é—®é¢˜ç‚¹
â”œâ”€ åˆ†æå¯èƒ½çš„åŸå› 
â”œâ”€ æ’é™¤æ— å…³å› ç´ 
â””â”€ ç¡®å®šæ ¹æœ¬åŸå› 

ç¬¬4æ­¥ï¼šè§£å†³é—®é¢˜
â”œâ”€ åˆ¶å®šè§£å†³æ–¹æ¡ˆ
â”œâ”€ å®æ–½ä¿®å¤æªæ–½
â”œâ”€ éªŒè¯ä¿®å¤æ•ˆæœ
â””â”€ è®°å½•è§£å†³è¿‡ç¨‹
```

---

## 2. ğŸ“Š Jobæ—¥å¿—æŸ¥çœ‹ä¸åˆ†æ


### 2.1 æ—¥å¿—æŸ¥çœ‹çš„åŸºæœ¬æ–¹æ³•


**ğŸ” åœ¨GitLabç•Œé¢æŸ¥çœ‹æ—¥å¿—**

```
è®¿é—®è·¯å¾„ï¼š
é¡¹ç›®é¦–é¡µ â†’ CI/CD â†’ Pipelines â†’ ç‚¹å‡»å…·ä½“Pipeline â†’ ç‚¹å‡»å¤±è´¥çš„Job

ç•Œé¢å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Job: build-app                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âŒ Failed                       â”‚
â”‚ Duration: 2m 35s                        â”‚
â”‚ Runner: gitlab-runner-001               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ—¥å¿—å†…å®¹åŒºåŸŸ]                           â”‚
â”‚ Running with gitlab-runner...           â”‚
â”‚ Executing "step_script" stage...        â”‚
â”‚ + npm install                           â”‚
â”‚ npm ERR! network request failed         â”‚
â”‚ ERROR: Job failed: exit code 1          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šJobæ—¥å¿—å°±åƒç¨‹åºè¿è¡Œæ—¶çš„"å½•åƒ"ï¼Œè®°å½•äº†æ¯ä¸€æ­¥æ‰§è¡Œçš„è¿‡ç¨‹å’Œç»“æœã€‚

### 2.2 æ—¥å¿—ä¿¡æ¯çš„ç»“æ„è§£è¯»


**ğŸ“‹ æ—¥å¿—çš„ç»„æˆéƒ¨åˆ†**

```
å…¸å‹Jobæ—¥å¿—ç»“æ„ï¼š

ğŸ”¸ Runnerä¿¡æ¯éƒ¨åˆ†
Running with gitlab-runner 14.10.1
Running on gitlab-runner-001

ğŸ”¸ Gitæ“ä½œéƒ¨åˆ†  
Cloning repository...
Checking out commit abc123...

ğŸ”¸ ç¯å¢ƒå‡†å¤‡éƒ¨åˆ†
Preparing the "docker" executor
Using Docker image node:16-alpine

ğŸ”¸ è„šæœ¬æ‰§è¡Œéƒ¨åˆ†
Executing "step_script" stage of the job script
+ echo "å¼€å§‹æ„å»º..."
+ npm install
+ npm run build

ğŸ”¸ ç»“æœåé¦ˆéƒ¨åˆ†
Job succeeded / Job failed: exit code 1
```

**ğŸ¯ é‡è¦ä¿¡æ¯è¯†åˆ«**

```
âœ… æˆåŠŸæ ‡è¯†ï¼š
- "Job succeeded"
- "âœ“ æˆåŠŸå®Œæˆxxxæ­¥éª¤"
- ç»¿è‰²çš„çŠ¶æ€æç¤º

âŒ é”™è¯¯æ ‡è¯†ï¼š
- "Job failed"
- "ERROR:"
- "FATAL:"
- çº¢è‰²çš„çŠ¶æ€æç¤º

âš ï¸ è­¦å‘Šæ ‡è¯†ï¼š
- "WARNING:"
- "WARN:"
- é»„è‰²çš„çŠ¶æ€æç¤º
```

### 2.3 æ—¥å¿—åˆ†æçš„å®ç”¨æŠ€å·§


**ğŸ” å¿«é€Ÿå®šä½é”™è¯¯çš„æ–¹æ³•**

> ğŸ“Œ **å®ç”¨æŠ€å·§**ï¼šå°±åƒæ‰¾ä¹¦ä¸­çš„é‡ç‚¹å†…å®¹ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…³é”®è¯å¿«é€Ÿæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚

**å…³é”®è¯æœç´¢ç­–ç•¥**
```
æœç´¢ä¼˜å…ˆçº§ï¼š
1ï¸âƒ£ "failed" / "error" / "é”™è¯¯"
2ï¸âƒ£ "permission denied" / "æƒé™æ‹’ç»"  
3ï¸âƒ£ "not found" / "æ‰¾ä¸åˆ°"
4ï¸âƒ£ "timeout" / "è¶…æ—¶"
5ï¸âƒ£ "connection" / "è¿æ¥"
```

**ğŸ“ˆ é”™è¯¯ä¸¥é‡ç¨‹åº¦åˆ¤æ–­**
```
ğŸ”´ è‡´å‘½é”™è¯¯ï¼ˆFatalï¼‰ï¼š
- ç«‹å³åœæ­¢æ‰§è¡Œ
- ç¤ºä¾‹ï¼šé…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯

ğŸŸ¡ é˜»å¡é”™è¯¯ï¼ˆErrorï¼‰ï¼š
- å½“å‰æ­¥éª¤å¤±è´¥ï¼Œå½±å“åç»­
- ç¤ºä¾‹ï¼šç¼–è¯‘å¤±è´¥ã€æµ‹è¯•å¤±è´¥

ğŸŸ¢ è­¦å‘Šä¿¡æ¯ï¼ˆWarningï¼‰ï¼š
- ä¸å½±å“æ‰§è¡Œï¼Œä½†éœ€è¦æ³¨æ„
- ç¤ºä¾‹ï¼šä¾èµ–ç‰ˆæœ¬è¿‡æ—§æé†’
```

---

## 3. ğŸ› ï¸ è°ƒè¯•æ¨¡å¼å¼€å¯


### 3.1 ä»€ä¹ˆæ˜¯è°ƒè¯•æ¨¡å¼


**ğŸ¯ é€šä¿—ç†è§£**ï¼šè°ƒè¯•æ¨¡å¼å°±åƒç»™æ±½è½¦è£…ä¸Š"è¡Œè½¦è®°å½•ä»ª"ï¼Œè®©æˆ‘ä»¬èƒ½çœ‹åˆ°æ›´å¤šçš„è¿è¡Œç»†èŠ‚ã€‚

```
æ™®é€šæ¨¡å¼ vs è°ƒè¯•æ¨¡å¼ï¼š

æ™®é€šæ¨¡å¼ï¼š                    è°ƒè¯•æ¨¡å¼ï¼š
åªçœ‹ç»“æœ âœ“ æˆåŠŸ/âŒ å¤±è´¥     çœ‹è¿‡ç¨‹ ğŸ“ è¯¦ç»†çš„æ¯ä¸€æ­¥
ç²¾ç®€æ—¥å¿—                     è¯¦ç»†æ—¥å¿—
å¿«é€Ÿæ‰§è¡Œ                     å¯ä»¥æš‚åœã€æ£€æŸ¥
```

### 3.2 å¼€å¯GitLab CIè°ƒè¯•æ¨¡å¼


**ğŸ”§ æ–¹æ³•ä¸€ï¼šä½¿ç”¨CI_DEBUG_TRACEå˜é‡**

åœ¨`.gitlab-ci.yml`ä¸­æ·»åŠ ï¼š
```yaml
variables:
  CI_DEBUG_TRACE: "true"

build-job:
  script:
    - echo "è¿™æ˜¯è°ƒè¯•æ¨¡å¼ä¸‹çš„æ„å»º"
    - npm install
```

**ğŸ”§ æ–¹æ³•äºŒï¼šä¸´æ—¶å¼€å¯è°ƒè¯•**

é€šè¿‡GitLabç•Œé¢æ‰‹åŠ¨è¿è¡Œï¼š
```
æ­¥éª¤ï¼š
1. è¿›å…¥Pipelineé¡µé¢
2. ç‚¹å‡»"Run Pipeline"æŒ‰é’®  
3. åœ¨Variableséƒ¨åˆ†æ·»åŠ ï¼š
   Key: CI_DEBUG_TRACE
   Value: true
4. ç‚¹å‡»"Run Pipeline"
```

### 3.3 è°ƒè¯•æ¨¡å¼çš„è¾“å‡ºè§£è¯»


**ğŸ“Š è°ƒè¯•ä¿¡æ¯çš„ç±»å‹**

```
ğŸ”¸ Shellå‘½ä»¤è¿½è¸ª
+ echo "å¼€å§‹æ‰§è¡Œè„šæœ¬"
+ cd /builds/project
+ ls -la
total 156
drwxr-xr-x  3 gitlab-runner gitlab-runner 4096 Sep 21 10:30 .

ğŸ”¸ ç¯å¢ƒå˜é‡æ˜¾ç¤º
export CI_PROJECT_NAME="my-project"
export CI_COMMIT_SHA="abc123def456"
export NODE_ENV="production"

ğŸ”¸ æ–‡ä»¶ç³»ç»ŸçŠ¶æ€
++ pwd
/builds/group/project
++ whoami
gitlab-runner
```

> âš ï¸ **å®‰å…¨æé†’**ï¼šè°ƒè¯•æ¨¡å¼ä¼šæ˜¾ç¤ºæ•æ„Ÿä¿¡æ¯ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶è¦æ ¼å¤–å°å¿ƒã€‚

---

## 4. ğŸš¨ å¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ


### 4.1 æƒé™ç›¸å…³é”™è¯¯


**âŒ é—®é¢˜ç—‡çŠ¶**
```
é”™è¯¯ä¿¡æ¯ç¤ºä¾‹ï¼š
permission denied: cannot access /var/www/
fatal: could not read Username for 'https://gitlab.com'
docker: permission denied while trying to connect
```

**ğŸ’¡ è§£å†³æ€è·¯**ï¼šæƒé™é—®é¢˜å°±åƒé—¨é”ä¸€æ ·ï¼Œæ²¡æœ‰é’¥åŒ™å°±è¿›ä¸å»ã€‚

**ğŸ”§ è§£å†³æ–¹æ¡ˆ**

```yaml
# è§£å†³æ–¹æ¡ˆ1ï¼šè°ƒæ•´æ–‡ä»¶æƒé™
before_script:
  - chmod +x ./deploy.sh
  - sudo chown -R gitlab-runner:gitlab-runner /var/www/

# è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨sudo
script:
  - sudo docker build -t myapp .
  - sudo systemctl restart nginx

# è§£å†³æ–¹æ¡ˆ3ï¼šé…ç½®SSHå¯†é’¥
before_script:
  - eval $(ssh-agent -s)
  - ssh-add <(echo "$SSH_PRIVATE_KEY")
```

### 4.2 ä¾èµ–å®‰è£…å¤±è´¥


**âŒ é—®é¢˜ç—‡çŠ¶**
```
å¸¸è§é”™è¯¯ä¿¡æ¯ï¼š
npm ERR! network request to https://registry.npmjs.org/ failed
Package 'python3-pip' has no installation candidate
pip: command not found
```

**ğŸ”§ è§£å†³æ–¹æ¡ˆ**

```yaml
# Node.jsé¡¹ç›®ä¾èµ–é—®é¢˜
install-deps:
  image: node:16-alpine
  before_script:
    # ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
    - npm config set registry https://registry.npmmirror.com
    # å¢åŠ è¶…æ—¶æ—¶é—´
    - npm config set timeout 300000
  script:
    - npm install --verbose

# Pythoné¡¹ç›®ä¾èµ–é—®é¢˜  
install-python-deps:
  image: python:3.9
  before_script:
    # æ›´æ–°åŒ…ç®¡ç†å™¨
    - apt-get update
    - apt-get install -y python3-pip
    # ä½¿ç”¨æ¸…åé•œåƒæº
    - pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
  script:
    - pip install -r requirements.txt
```

### 4.3 ç½‘ç»œè¿æ¥é—®é¢˜


**âŒ é—®é¢˜ç—‡çŠ¶**
```
ç½‘ç»œç›¸å…³é”™è¯¯ï¼š
curl: (7) Failed to connect to api.example.com port 443
wget: unable to resolve host address
ssh: connect to host server.com port 22: Connection timed out
```

**ğŸ”§ è§£å†³æ–¹æ¡ˆç­–ç•¥**

```yaml
# ç½‘ç»œè¿æ¥æµ‹è¯•å’Œé‡è¯•æœºåˆ¶
deploy-with-retry:
  script:
    # æµ‹è¯•ç½‘ç»œè¿é€šæ€§
    - ping -c 3 api.example.com || echo "ç½‘ç»œå¯èƒ½æœ‰é—®é¢˜"
    
    # ä½¿ç”¨é‡è¯•æœºåˆ¶
    - |
      for i in {1..3}; do
        echo "å°è¯•è¿æ¥ï¼Œç¬¬ $i æ¬¡"
        if curl -f https://api.example.com/health; then
          echo "è¿æ¥æˆåŠŸ"
          break
        else
          echo "è¿æ¥å¤±è´¥ï¼Œç­‰å¾…é‡è¯•..."
          sleep 10
        fi
      done
```

---

## 5. ğŸ”— Runnerè¿æ¥é—®é¢˜æ’æŸ¥


### 5.1 Runnerè¿æ¥é—®é¢˜çš„å…¸å‹è¡¨ç°


**ğŸ¯ ç®€å•ç†è§£**ï¼šRunnerå°±åƒæ˜¯å¹²æ´»çš„å·¥äººï¼Œå¦‚æœå·¥äººè”ç³»ä¸ä¸Šæˆ–è€…ç½¢å·¥äº†ï¼Œæ´»å°±å¹²ä¸äº†ã€‚

**âŒ å¸¸è§è¿æ¥é—®é¢˜**
```
ç—‡çŠ¶è¡¨ç°ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JobçŠ¶æ€ï¼špendingï¼ˆä¸€ç›´ç­‰å¾…ï¼‰         â”‚
â”‚ é”™è¯¯ä¿¡æ¯ï¼šNo runner available        â”‚
â”‚ æŒç»­æ—¶é—´ï¼šè¶…è¿‡æ­£å¸¸ç­‰å¾…æ—¶é—´           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JobçŠ¶æ€ï¼šfailed                     â”‚
â”‚ é”™è¯¯ä¿¡æ¯ï¼šrunner system failure      â”‚  
â”‚ è¯¦ç»†ï¼šconnection refused            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 RunnerçŠ¶æ€æ£€æŸ¥æ–¹æ³•


**ğŸ” æ£€æŸ¥Runnerå¯ç”¨æ€§**

```
åœ¨GitLabç•Œé¢æ£€æŸ¥ï¼š
è®¾ç½® â†’ CI/CD â†’ Runners

RunnerçŠ¶æ€æŒ‡ç¤ºï¼š
ğŸŸ¢ ç»¿è‰²åœ†ç‚¹ï¼šRunneråœ¨çº¿ä¸”å¯ç”¨
ğŸ”´ çº¢è‰²åœ†ç‚¹ï¼šRunnerç¦»çº¿æˆ–ä¸å¯ç”¨
ğŸŸ¡ é»„è‰²åœ†ç‚¹ï¼šRunnerå¿™ç¢Œä¸­

è¯¦ç»†ä¿¡æ¯æ˜¾ç¤ºï¼š
â”œâ”€ Runneråç§°ï¼šgitlab-runner-001
â”œâ”€ æœ€åè”ç³»ï¼š2åˆ†é’Ÿå‰
â”œâ”€ ç‰ˆæœ¬ï¼š14.10.1
â”œâ”€ å¹³å°ï¼šlinux/amd64
â””â”€ æ ‡ç­¾ï¼šdocker, linux, production
```

**ğŸ› ï¸ å‘½ä»¤è¡Œæ£€æŸ¥æ–¹æ³•**

```bash
# åœ¨RunneræœåŠ¡å™¨ä¸Šæ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status gitlab-runner

# æ£€æŸ¥Runneræ³¨å†ŒçŠ¶æ€
sudo gitlab-runner list

# æ£€æŸ¥Runneræ—¥å¿—
sudo journalctl -u gitlab-runner -f
```

### 5.3 Runnerè¿æ¥é—®é¢˜è§£å†³


**ğŸ”§ é‡å¯RunneræœåŠ¡**
```bash
# é‡å¯GitLab RunneræœåŠ¡
sudo systemctl restart gitlab-runner

# éªŒè¯é‡å¯æˆåŠŸ
sudo systemctl status gitlab-runner
```

**ğŸ”§ é‡æ–°æ³¨å†ŒRunner**
```bash
# æ³¨é”€ç°æœ‰Runner
sudo gitlab-runner unregister --name "æ—§çš„Runneråç§°"

# é‡æ–°æ³¨å†ŒRunner
sudo gitlab-runner register \
  --url "https://gitlab.com" \
  --registration-token "ä½ çš„æ³¨å†Œä»¤ç‰Œ" \
  --executor "docker" \
  --docker-image "ubuntu:20.04"
```

---

## 6. ğŸ—ï¸ æ„å»ºå¤±è´¥æ’æŸ¥


### 6.1 æ„å»ºå¤±è´¥çš„å¸¸è§åŸå› 


**ğŸ¯ ç†è§£æ„å»ºè¿‡ç¨‹**ï¼šæ„å»ºå°±åƒåšèœï¼Œéœ€è¦å‡†å¤‡é£Ÿæã€æŒ‰æ­¥éª¤åˆ¶ä½œï¼Œä»»ä½•ä¸€æ­¥å‡ºé”™éƒ½ä¼šå¯¼è‡´å¤±è´¥ã€‚

```
æ„å»ºè¿‡ç¨‹åˆ†è§£ï¼š
é£Ÿæå‡†å¤‡ï¼ˆç¯å¢ƒå‡†å¤‡ï¼‰ â†’ æ¸…æ´—åŠ å·¥ï¼ˆä»£ç å¤„ç†ï¼‰ â†’ çƒ¹é¥ªåˆ¶ä½œï¼ˆç¼–è¯‘æ„å»ºï¼‰ â†’ è£…ç›˜ä¸Šèœï¼ˆæ‰“åŒ…è¾“å‡ºï¼‰
     â†“                    â†“                    â†“                    â†“
ç¯å¢ƒé•œåƒæ‹‰å–é”™è¯¯         ä»£ç ä¸‹è½½å¤±è´¥           ç¼–è¯‘å™¨æŠ¥é”™            æ–‡ä»¶æƒé™é—®é¢˜
ä¾èµ–å®‰è£…å¤±è´¥           è¯­æ³•æ£€æŸ¥ä¸é€šè¿‡          å†…å­˜ä¸è¶³             ç£ç›˜ç©ºé—´ä¸å¤Ÿ
```

### 6.2 æŒ‰æ„å»ºé˜¶æ®µæ’æŸ¥é—®é¢˜


**ğŸ”¸ ç¯å¢ƒå‡†å¤‡é˜¶æ®µé—®é¢˜**

```yaml
# å¸¸è§é—®é¢˜ï¼šé•œåƒæ‹‰å–å¤±è´¥
build-app:
  image: node:16-alpine
  script:
    - npm install

# é”™è¯¯ä¿¡æ¯ï¼š
# ERROR: Cannot pull Docker image node:16-alpine
# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥é•œåƒåç§°ï¼Œä½¿ç”¨å¤‡ç”¨é•œåƒ
build-app-fixed:
  image: node:latest  # ä½¿ç”¨æ›´ç¨³å®šçš„æ ‡ç­¾
  # æˆ–ä½¿ç”¨ç§æœ‰é•œåƒä»“åº“
  # image: registry.company.com/node:16-alpine
```

**ğŸ”¸ ä¾èµ–å®‰è£…é˜¶æ®µé—®é¢˜**

```yaml
# å¸¸è§é—®é¢˜ï¼šä¾èµ–ä¸‹è½½è¶…æ—¶
install-deps:
  script:
    - npm install --timeout=300000  # å¢åŠ è¶…æ—¶æ—¶é—´
    - npm cache clean --force        # æ¸…ç†ç¼“å­˜
  cache:
    paths:
      - node_modules/                # ä½¿ç”¨ç¼“å­˜åŠ é€Ÿ
  retry:
    max: 2                          # å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
    when: runner_system_failure
```

**ğŸ”¸ ç¼–è¯‘æ„å»ºé˜¶æ®µé—®é¢˜**

```yaml
# å¸¸è§é—®é¢˜ï¼šå†…å­˜ä¸è¶³
build-project:
  variables:
    NODE_OPTIONS: "--max-old-space-size=4096"  # å¢åŠ Node.jså†…å­˜é™åˆ¶
  script:
    - npm run build
  # ä½¿ç”¨æ›´å¤§å†…å­˜çš„Runner
  tags:
    - large-memory
```

### 6.3 æ„å»ºå¤±è´¥çš„ç³»ç»ŸåŒ–æ’æŸ¥


**ğŸ“Š æ’æŸ¥æ£€æŸ¥æ¸…å•**

```
ç¯å¢ƒæ£€æŸ¥ï¼š
â–¡ é•œåƒæ˜¯å¦å¯ç”¨ï¼Ÿ
â–¡ Runnerèµ„æºæ˜¯å¦å……è¶³ï¼Ÿ
â–¡ ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼Ÿ

ä»£ç æ£€æŸ¥ï¼š  
â–¡ ä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Ÿ
â–¡ ä¾èµ–ç‰ˆæœ¬æ˜¯å¦å…¼å®¹ï¼Ÿ
â–¡ é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼Ÿ

èµ„æºæ£€æŸ¥ï¼š
â–¡ ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ï¼Ÿ
â–¡ å†…å­˜ä½¿ç”¨æ˜¯å¦è¶…é™ï¼Ÿ
â–¡ CPUè´Ÿè½½æ˜¯å¦è¿‡é«˜ï¼Ÿ
```

---

## 7. ğŸš€ éƒ¨ç½²å¤±è´¥å¤„ç†


### 7.1 éƒ¨ç½²å¤±è´¥çš„å¸¸è§åœºæ™¯


**ğŸ¯ éƒ¨ç½²è¿‡ç¨‹ç†è§£**ï¼šéƒ¨ç½²å°±åƒæ¬å®¶ï¼Œéœ€è¦æŠŠæ‰“åŒ…å¥½çš„ä¸œè¥¿æ¬åˆ°æ–°åœ°æ–¹ï¼Œå¹¶ä¸”ç¡®ä¿åœ¨æ–°ç¯å¢ƒä¸­èƒ½æ­£å¸¸å·¥ä½œã€‚

```
éƒ¨ç½²å¤±è´¥çš„å…¸å‹æµç¨‹ï¼š
æ„å»ºæˆåŠŸ â†’ è¿æ¥ç›®æ ‡æœåŠ¡å™¨ â†’ ä¸Šä¼ æ–‡ä»¶ â†’ é…ç½®ç¯å¢ƒ â†’ å¯åŠ¨æœåŠ¡
   âœ…           âŒ              âŒ         âŒ         âŒ
              è¿æ¥å¤±è´¥        æƒé™ä¸è¶³    é…ç½®é”™è¯¯   æœåŠ¡å¯åŠ¨å¤±è´¥
```

### 7.2 æœåŠ¡å™¨è¿æ¥é—®é¢˜


**âŒ è¿æ¥å¤±è´¥çš„è¡¨ç°**
```
å…¸å‹é”™è¯¯ä¿¡æ¯ï¼š
ssh: connect to host server.com port 22: Connection refused
Could not resolve hostname server.com: Name or service not known
Permission denied (publickey)
```

**ğŸ”§ è¿æ¥é—®é¢˜è§£å†³æ–¹æ¡ˆ**

```yaml
# SSHè¿æ¥é…ç½®ç¤ºä¾‹
deploy-to-server:
  stage: deploy
  before_script:
    # è®¾ç½®SSHç¯å¢ƒ
    - eval $(ssh-agent -s)
    - echo "$SSH_PRIVATE_KEY" | tr -d '\r' | ssh-add -
    - mkdir -p ~/.ssh && chmod 700 ~/.ssh
    - echo "$SSH_KNOWN_HOSTS" > ~/.ssh/known_hosts
    
    # æµ‹è¯•è¿æ¥
    - ssh -o ConnectTimeout=10 user@server.com "echo 'è¿æ¥æµ‹è¯•æˆåŠŸ'"
    
  script:
    # å®é™…éƒ¨ç½²æ“ä½œ
    - rsync -avz --delete ./dist/ user@server.com:/var/www/html/
    - ssh user@server.com "sudo systemctl restart nginx"
```

### 7.3 éƒ¨ç½²ç¯å¢ƒé—®é¢˜


**ğŸ”§ ç¯å¢ƒä¸€è‡´æ€§æ£€æŸ¥**

```yaml
# éƒ¨ç½²å‰ç¯å¢ƒéªŒè¯
verify-environment:
  stage: deploy
  script:
    # æ£€æŸ¥ç›®æ ‡æœåŠ¡å™¨ç¯å¢ƒ
    - ssh user@server.com "node --version"
    - ssh user@server.com "npm --version"  
    - ssh user@server.com "docker --version"
    
    # æ£€æŸ¥ç£ç›˜ç©ºé—´
    - ssh user@server.com "df -h"
    
    # æ£€æŸ¥å¿…è¦çš„ç›®å½•æƒé™
    - ssh user@server.com "test -w /var/www/html && echo 'ç›®å½•å¯å†™' || echo 'æƒé™ä¸è¶³'"

# éƒ¨ç½²åæœåŠ¡éªŒè¯
verify-deployment:
  stage: verify
  script:
    # ç­‰å¾…æœåŠ¡å¯åŠ¨
    - sleep 30
    
    # å¥åº·æ£€æŸ¥
    - curl -f http://server.com/health || exit 1
    - echo "éƒ¨ç½²éªŒè¯æˆåŠŸ"
```

### 7.4 å›æ»šæœºåˆ¶å®ç°


**ğŸ”„ è‡ªåŠ¨å›æ»šç­–ç•¥**

```yaml
# å¸¦å›æ»šåŠŸèƒ½çš„éƒ¨ç½²
deploy-with-rollback:
  stage: deploy
  script:
    # å¤‡ä»½å½“å‰ç‰ˆæœ¬
    - ssh user@server.com "cp -r /var/www/html /var/www/html.backup"
    
    # éƒ¨ç½²æ–°ç‰ˆæœ¬
    - rsync -avz ./dist/ user@server.com:/var/www/html/
    - ssh user@server.com "sudo systemctl restart nginx"
    
    # å¥åº·æ£€æŸ¥
    - sleep 10
    - |
      if ! curl -f http://server.com/health; then
        echo "å¥åº·æ£€æŸ¥å¤±è´¥ï¼Œå¼€å§‹å›æ»š"
        ssh user@server.com "rm -rf /var/www/html"
        ssh user@server.com "mv /var/www/html.backup /var/www/html"
        ssh user@server.com "sudo systemctl restart nginx"
        echo "å›æ»šå®Œæˆ"
        exit 1
      fi
    
    # æ¸…ç†å¤‡ä»½
    - ssh user@server.com "rm -rf /var/www/html.backup"
    - echo "éƒ¨ç½²æˆåŠŸ"
```

---

## 8. âš™ï¸ é…ç½®é—®é¢˜è¯Šæ–­


### 8.1 .gitlab-ci.ymlé…ç½®é—®é¢˜


**ğŸ¯ é…ç½®æ–‡ä»¶ç†è§£**ï¼š`.gitlab-ci.yml`å°±åƒæ˜¯ç»™æœºå™¨äººçš„å·¥ä½œæŒ‡ä»¤ä¹¦ï¼ŒæŒ‡ä»¤å†™é”™äº†ï¼Œæœºå™¨äººå°±ä¸çŸ¥é“è¯¥æ€ä¹ˆå·¥ä½œã€‚

**âŒ å¸¸è§é…ç½®é”™è¯¯**

```yaml
# é”™è¯¯ç¤ºä¾‹1ï¼šç¼©è¿›é—®é¢˜ï¼ˆYAMLå¯¹ç¼©è¿›å¾ˆæ•æ„Ÿï¼‰
build:
script:  # ç¼ºå°‘ç¼©è¿›ï¼Œåº”è¯¥æ˜¯ "  script:"
  - npm install

# é”™è¯¯ç¤ºä¾‹2ï¼šè¯­æ³•é”™è¯¯
build:
  script
    - npm install  # ç¼ºå°‘å†’å·ï¼Œåº”è¯¥æ˜¯ "script:"

# é”™è¯¯ç¤ºä¾‹3ï¼šé˜¶æ®µä¾èµ–é”™è¯¯
test:
  stage: test
  needs: [build]    # å¦‚æœbuildä¸å­˜åœ¨ä¼šæŠ¥é”™

deploy:
  stage: deploy  
  dependencies: [missing-job]  # å¼•ç”¨ä¸å­˜åœ¨çš„Job
```

**âœ… æ­£ç¡®çš„é…ç½®ç¤ºä¾‹**

```yaml
# å®Œæ•´çš„é…ç½®ç»“æ„
stages:
  - build
  - test  
  - deploy

variables:
  NODE_VERSION: "16"

build-job:
  stage: build
  image: node:${NODE_VERSION}
  script:
    - npm install
    - npm run build
  artifacts:
    paths:
      - dist/
    expire_in: 1 hour

test-job:
  stage: test
  needs: [build-job]
  script:
    - npm test

deploy-job:
  stage: deploy
  dependencies: [build-job]
  script:
    - echo "éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"
```

### 8.2 é…ç½®éªŒè¯å·¥å…·


**ğŸ” GitLab CI Lintå·¥å…·**

```
ä½¿ç”¨æ­¥éª¤ï¼š
1. è¿›å…¥é¡¹ç›®é¡µé¢
2. ç‚¹å‡» CI/CD â†’ Pipelines  
3. ç‚¹å‡» "CI Lint" æŒ‰é’®
4. ç²˜è´´ä½ çš„.gitlab-ci.ymlå†…å®¹
5. ç‚¹å‡» "Validate" éªŒè¯

éªŒè¯ç»“æœï¼š
âœ… "Your .gitlab-ci.yml is valid"
âŒ "syntax error: line 15, column 3"
```

**ğŸ› ï¸ æœ¬åœ°éªŒè¯æ–¹æ³•**

```bash
# å®‰è£…gitlab-ci-localå·¥å…·
npm install -g gitlab-ci-local

# åœ¨é¡¹ç›®ç›®å½•ä¸­éªŒè¯é…ç½®
gitlab-ci-local --list-all

# æœ¬åœ°è¿è¡Œç‰¹å®šJob
gitlab-ci-local build-job
```

### 8.3 ç¯å¢ƒå˜é‡é…ç½®é—®é¢˜


**ğŸ”§ ç¯å¢ƒå˜é‡é—®é¢˜æ’æŸ¥**

```yaml
# è°ƒè¯•ç¯å¢ƒå˜é‡
debug-variables:
  script:
    # æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ˆè°ƒè¯•ç”¨ï¼‰
    - env | grep CI_
    
    # æ£€æŸ¥ç‰¹å®šå˜é‡æ˜¯å¦å­˜åœ¨
    - echo "é¡¹ç›®åç§°: $CI_PROJECT_NAME"
    - echo "æäº¤SHA: $CI_COMMIT_SHA"
    
    # æ£€æŸ¥è‡ªå®šä¹‰å˜é‡
    - echo "APIå¯†é’¥: ${API_KEY:-(æœªè®¾ç½®)}"
    - echo "æ•°æ®åº“URL: ${DATABASE_URL:-(æœªè®¾ç½®)}"
```

**ğŸ“‹ ç¯å¢ƒå˜é‡è®¾ç½®ä½ç½®æ£€æŸ¥**

```
ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
1ï¸âƒ£ Jobçº§åˆ«çš„variables  
2ï¸âƒ£ å…¨å±€variables
3ï¸âƒ£ é¡¹ç›®è®¾ç½®ä¸­çš„Variables
4ï¸âƒ£ ç»„è®¾ç½®ä¸­çš„Variables  
5ï¸âƒ£ GitLabå®ä¾‹çš„Variables

æ£€æŸ¥æ–¹æ³•ï¼š
é¡¹ç›®é¦–é¡µ â†’ è®¾ç½® â†’ CI/CD â†’ Variables
æŸ¥çœ‹æ˜¯å¦æœ‰æ•æ„Ÿå˜é‡è¢«æ„å¤–è¦†ç›–
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æŠ€èƒ½


```
ğŸ”¸ æ—¥å¿—æŸ¥çœ‹ï¼šèƒ½å¿«é€Ÿå®šä½é”™è¯¯ä¿¡æ¯ï¼Œç†è§£æ—¥å¿—ç»“æ„
ğŸ”¸ è°ƒè¯•æ¨¡å¼ï¼šä¼šå¼€å¯å’Œä½¿ç”¨è°ƒè¯•åŠŸèƒ½ï¼Œè·å–è¯¦ç»†ä¿¡æ¯  
ğŸ”¸ é”™è¯¯åˆ†ç±»ï¼šèƒ½è¯†åˆ«ä¸åŒç±»å‹çš„é”™è¯¯ï¼Œé‡‡ç”¨å¯¹åº”è§£å†³æ–¹æ¡ˆ
ğŸ”¸ ç³»ç»Ÿæ’æŸ¥ï¼šå…·å¤‡ç³»ç»ŸåŒ–çš„é—®é¢˜æ’æŸ¥æ€è·¯å’Œæ–¹æ³•
ğŸ”¸ é…ç½®éªŒè¯ï¼šèƒ½æ£€æŸ¥å’Œä¿®å¤é…ç½®æ–‡ä»¶é—®é¢˜
```

### 9.2 å…³é”®æ’æŸ¥æ€è·¯


**ğŸ”¹ æ•…éšœæ’æŸ¥çš„ä¸‡èƒ½å…¬å¼**
```
è§‚å¯Ÿç°è±¡ â†’ æ”¶é›†ä¿¡æ¯ â†’ åˆ†æåŸå›  â†’ è§£å†³é—®é¢˜ â†’ éªŒè¯æ•ˆæœ â†’ è®°å½•ç»éªŒ

å…·ä½“æ­¥éª¤ï¼š
1. çœ‹é”™è¯¯ä¿¡æ¯ï¼ˆæ—¥å¿—ä¸­çš„å…³é”®è¯ï¼‰
2. æ‰¾å‡ºé”™ä½ç½®ï¼ˆå“ªä¸ªé˜¶æ®µã€å“ªä¸ªæ­¥éª¤ï¼‰
3. åˆ†æé”™è¯¯åŸå› ï¼ˆæƒé™ã€ç½‘ç»œã€é…ç½®ã€ä»£ç ï¼‰
4. é€‰æ‹©è§£å†³æ–¹æ¡ˆï¼ˆä¿®å¤é…ç½®ã€è°ƒæ•´æƒé™ã€é‡è¯•ç­‰ï¼‰
5. æµ‹è¯•ä¿®å¤æ•ˆæœï¼ˆé‡æ–°è¿è¡ŒPipelineï¼‰
6. æ€»ç»“é¢„é˜²æªæ–½ï¼ˆé¿å…ç±»ä¼¼é—®é¢˜ï¼‰
```

**ğŸ”¹ å¸¸è§é—®é¢˜çš„å¿«é€Ÿåˆ¤æ–­**
```
çœ‹åˆ°"permission denied" â†’ æƒé™é—®é¢˜ â†’ æ£€æŸ¥æ–‡ä»¶æƒé™ã€SSHå¯†é’¥
çœ‹åˆ°"not found" â†’ è·¯å¾„æˆ–ä¾èµ–é—®é¢˜ â†’ æ£€æŸ¥æ–‡ä»¶è·¯å¾„ã€åŒ…åç§°
çœ‹åˆ°"timeout" â†’ ç½‘ç»œæˆ–æ€§èƒ½é—®é¢˜ â†’ æ£€æŸ¥ç½‘ç»œè¿æ¥ã€å¢åŠ è¶…æ—¶æ—¶é—´
çœ‹åˆ°"syntax error" â†’ é…ç½®è¯­æ³•é—®é¢˜ â†’ ä½¿ç”¨CI Lintå·¥å…·éªŒè¯
```

### 9.3 å®ç”¨å·¥å…·å’ŒæŠ€å·§


**ğŸ› ï¸ å¿…å¤‡æ’æŸ¥å·¥å…·**
- **GitLab CI Lint**ï¼šé…ç½®æ–‡ä»¶è¯­æ³•éªŒè¯
- **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**ï¼šç½‘ç»œè¯·æ±‚åˆ†æ
- **CI_DEBUG_TRACE**ï¼šè¯¦ç»†æ‰§è¡Œæ—¥å¿—
- **gitlab-ci-local**ï¼šæœ¬åœ°æµ‹è¯•CIé…ç½®

**ğŸ’¡ æé«˜æ•ˆç‡çš„æŠ€å·§**
- **ä½¿ç”¨é‡è¯•æœºåˆ¶**ï¼š`retry: 2` è‡ªåŠ¨é‡è¯•å¤±è´¥çš„Job
- **åˆç†ä½¿ç”¨ç¼“å­˜**ï¼š`cache` åŠ é€Ÿä¾èµ–å®‰è£…  
- **è®¾ç½®è¶…æ—¶æ—¶é—´**ï¼š`timeout: 30m` é¿å…é•¿æ—¶é—´ç­‰å¾…
- **åˆ†é˜¶æ®µéªŒè¯**ï¼šæ¯ä¸ªé˜¶æ®µéƒ½æœ‰éªŒè¯æ­¥éª¤

### 9.4 é¢„é˜²ä¸ºä¸»çš„æœ€ä½³å®è·µ


**ğŸš€ å‡å°‘æ•…éšœçš„å¥½ä¹ æƒ¯**
```
å¼€å‘é˜¶æ®µï¼š
â–¡ æœ¬åœ°æµ‹è¯•CIé…ç½®åå†æäº¤
â–¡ ä½¿ç”¨CI LintéªŒè¯é…ç½®è¯­æ³•  
â–¡ æ·»åŠ è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
â–¡ è®¾ç½®åˆç†çš„è¶…æ—¶å’Œé‡è¯•

è¿ç»´é˜¶æ®µï¼š
â–¡ å®šæœŸæ£€æŸ¥RunnerçŠ¶æ€
â–¡ ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µ
â–¡ å¤‡ä»½é‡è¦çš„é…ç½®å’Œå¯†é’¥
â–¡ å»ºç«‹é—®é¢˜å¤„ç†æ–‡æ¡£

å›¢é˜Ÿåä½œï¼š
â–¡ ç»Ÿä¸€CI/CDé…ç½®æ ‡å‡†
â–¡ åˆ†äº«æ•…éšœæ’æŸ¥ç»éªŒ
â–¡ å»ºç«‹é—®é¢˜åé¦ˆæœºåˆ¶
â–¡ å®šæœŸå›é¡¾å’Œä¼˜åŒ–æµç¨‹
```

### 9.5 æ•…éšœå“åº”æµç¨‹


**âš¡ ç´§æ€¥æ•…éšœå¤„ç†æ­¥éª¤**
```
ğŸš¨ å‘ç°é—®é¢˜ï¼ˆ5åˆ†é’Ÿå†…ï¼‰
â”œâ”€ ç¡®è®¤å½±å“èŒƒå›´
â”œâ”€ è¯„ä¼°ç´§æ€¥ç¨‹åº¦  
â””â”€ å†³å®šå¤„ç†ä¼˜å…ˆçº§

ğŸ” å¿«é€Ÿè¯Šæ–­ï¼ˆ15åˆ†é’Ÿå†…ï¼‰
â”œâ”€ æŸ¥çœ‹æœ€æ–°çš„é”™è¯¯æ—¥å¿—
â”œâ”€ å¯¹æ¯”ä¸Šæ¬¡æˆåŠŸçš„Pipeline
â”œâ”€ æ£€æŸ¥æœ€è¿‘çš„ä»£ç å˜æ›´
â””â”€ ç¡®å®šå¯èƒ½çš„é—®é¢˜åŸå› 

ğŸ› ï¸ åº”æ€¥å¤„ç†ï¼ˆ30åˆ†é’Ÿå†…ï¼‰
â”œâ”€ å®æ–½ä¸´æ—¶è§£å†³æ–¹æ¡ˆ
â”œâ”€ å›æ»šåˆ°ç¨³å®šç‰ˆæœ¬
â”œâ”€ æ¢å¤å…³é”®åŠŸèƒ½
â””â”€ é€šçŸ¥ç›¸å…³äººå‘˜

ğŸ“ æ ¹æœ¬è§£å†³ï¼ˆ2å°æ—¶å†…ï¼‰
â”œâ”€ æ·±å…¥åˆ†ææ ¹æœ¬åŸå› 
â”œâ”€ å®æ–½æ°¸ä¹…æ€§ä¿®å¤
â”œâ”€ éªŒè¯è§£å†³æ•ˆæœ
â””â”€ æ›´æ–°æ–‡æ¡£å’Œæµç¨‹
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- é‡åˆ°é—®é¢˜ä¸æ…Œå¼ ï¼Œæ—¥å¿—é”™è¯¯å…ˆè¦çœ‹
- æƒé™ç½‘ç»œå’Œé…ç½®ï¼Œä¸‰å¤§ç±»åˆ«è¦è®°ç‰¢  
- è°ƒè¯•æ¨¡å¼å¸®åŠ©å¤§ï¼Œè¯¦ç»†ä¿¡æ¯å…¨æ˜¾ç¤º
- ç³»ç»Ÿæ’æŸ¥æœ‰æ­¥éª¤ï¼Œè§‚å¯Ÿåˆ†æå†è§£å†³