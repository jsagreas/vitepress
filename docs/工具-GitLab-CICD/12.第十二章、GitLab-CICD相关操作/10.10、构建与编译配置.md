---
title: 10ã€æ„å»ºä¸ç¼–è¯‘é…ç½®
---
## ğŸ“š ç›®å½•

1. [æ„å»ºåŸºç¡€æ¦‚å¿µä¸å‡†å¤‡](#1-æ„å»ºåŸºç¡€æ¦‚å¿µä¸å‡†å¤‡)
2. [ç¼–è¯‘ç¯å¢ƒå‡†å¤‡](#2-ç¼–è¯‘ç¯å¢ƒå‡†å¤‡)
3. [ä¾èµ–é¡¹å®‰è£…é…ç½®](#3-ä¾èµ–é¡¹å®‰è£…é…ç½®)
4. [æ„å»ºè„šæœ¬ç¼–å†™](#4-æ„å»ºè„šæœ¬ç¼–å†™)
5. [æ„å»ºäº§ç‰©ç®¡ç†](#5-æ„å»ºäº§ç‰©ç®¡ç†)
6. [å¤šç¯å¢ƒæ„å»ºé…ç½®](#6-å¤šç¯å¢ƒæ„å»ºé…ç½®)
7. [æ„å»ºç¼“å­˜ä¼˜åŒ–](#7-æ„å»ºç¼“å­˜ä¼˜åŒ–)
8. [æ„å»ºå¤±è´¥è°ƒè¯•](#8-æ„å»ºå¤±è´¥è°ƒè¯•)
9. [æ„å»ºæ—¶é—´ä¼˜åŒ–](#9-æ„å»ºæ—¶é—´ä¼˜åŒ–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ æ„å»ºåŸºç¡€æ¦‚å¿µä¸å‡†å¤‡


### 1.1 ä»€ä¹ˆæ˜¯æ„å»ºä¸ç¼–è¯‘


**æ„å»ºï¼ˆBuildï¼‰**ï¼šæŠŠä½ å†™çš„æºä»£ç è½¬æ¢æˆå¯ä»¥è¿è¡Œçš„ç¨‹åºçš„è¿‡ç¨‹

```
ç®€å•ç†è§£ï¼š
æºä»£ç ï¼ˆä½ å†™çš„ï¼‰â†’ æ„å»ºå¤„ç† â†’ å¯æ‰§è¡Œç¨‹åºï¼ˆç”¨æˆ·ç”¨çš„ï¼‰

ä¸¾ä¸ªä¾‹å­ï¼š
ä½ å†™äº†ä¸€ä¸ªç½‘ç«™ â†’ GitLabå¸®ä½ æ‰“åŒ… â†’ ç”Ÿæˆç½‘ç«™æ–‡ä»¶ç»™ç”¨æˆ·è®¿é—®
```

**ç¼–è¯‘ï¼ˆCompileï¼‰**ï¼šæŠŠé«˜çº§è¯­è¨€ä»£ç ç¿»è¯‘æˆè®¡ç®—æœºèƒ½ç†è§£çš„è¯­è¨€

```
ç”Ÿæ´»ç±»æ¯”ï¼š
ç¼–è¯‘ â‰ˆ ç¿»è¯‘å®˜
æŠŠä¸­æ–‡ï¼ˆæºä»£ç ï¼‰ç¿»è¯‘æˆè‹±æ–‡ï¼ˆæœºå™¨ç ï¼‰è®©å¤–å›½äººï¼ˆè®¡ç®—æœºï¼‰ç†è§£
```

### 1.2 GitLab CI/CDä¸­çš„æ„å»ºè§’è‰²


**CI/CDæ„å»ºæµç¨‹å›¾ç¤ºï¼š**
```
ä»£ç æäº¤ â†’ è‡ªåŠ¨è§¦å‘ â†’ æ„å»ºå¤„ç† â†’ ç”Ÿæˆäº§ç‰© â†’ éƒ¨ç½²ä¸Šçº¿
    â†“         â†“         â†“         â†“         â†“
  å¼€å‘å†™ç    GitLabæ£€æµ‹  ç¼–è¯‘æ‰“åŒ…   äº§å‡ºæ–‡ä»¶   ç”¨æˆ·è®¿é—®
```

**æ„å»ºåœ¨CI/CDä¸­çš„ä½ç½®ï¼š**
- **CIé˜¶æ®µ**ï¼šæ£€æŸ¥ä»£ç è´¨é‡ã€ç¼–è¯‘æ„å»ºã€è¿è¡Œæµ‹è¯•
- **CDé˜¶æ®µ**ï¼šæ‰“åŒ…éƒ¨ç½²ã€å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ

### 1.3 æ„å»ºé…ç½®çš„æ ¸å¿ƒæ–‡ä»¶


**`.gitlab-ci.yml` æ–‡ä»¶ç»“æ„ï¼š**
```yaml
# è¿™æ˜¯GitLab CI/CDçš„é…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰GitLabå¦‚ä½•æ„å»ºä½ çš„é¡¹ç›®

stages:          # å®šä¹‰æ„å»ºçš„å‡ ä¸ªé˜¶æ®µ
  - build        # æ„å»ºé˜¶æ®µ
  - test         # æµ‹è¯•é˜¶æ®µ
  - deploy       # éƒ¨ç½²é˜¶æ®µ

build_job:       # å…·ä½“çš„æ„å»ºä»»åŠ¡
  stage: build   # å±äºbuildé˜¶æ®µ
  script:        # æ„å»ºè¦æ‰§è¡Œçš„å‘½ä»¤
    - echo "å¼€å§‹æ„å»ºé¡¹ç›®"
```

---

## 2. âš™ï¸ ç¼–è¯‘ç¯å¢ƒå‡†å¤‡


### 2.1 ä»€ä¹ˆæ˜¯ç¼–è¯‘ç¯å¢ƒ


**ç¼–è¯‘ç¯å¢ƒ**ï¼šå°±åƒå¨æˆ¿ä¸€æ ·ï¼Œæ˜¯å‡†å¤‡å¥½æ‰€æœ‰å·¥å…·å’Œææ–™çš„åœ°æ–¹

```
ç±»æ¯”ç†è§£ï¼š
åšèœéœ€è¦ï¼šå¨æˆ¿ + ç‚‰å­ + é”…å…· + è°ƒæ–™
ç¼–è¯‘éœ€è¦ï¼šç³»ç»Ÿ + ç¼–è¯‘å™¨ + å·¥å…· + ä¾èµ–åº“

æ²¡æœ‰åˆé€‚çš„ç¯å¢ƒ = æ²¡æœ‰å¨æˆ¿åšä¸äº†èœ
æ²¡æœ‰ç¼–è¯‘ç¯å¢ƒ = ä»£ç æ— æ³•å˜æˆç¨‹åº
```

### 2.2 é€‰æ‹©åˆé€‚çš„Dockeré•œåƒ


**Dockeré•œåƒ**ï¼šé¢„è£…å¥½ç¼–è¯‘å·¥å…·çš„"å®¹å™¨å¨æˆ¿"

| è¯­è¨€ç±»å‹ | **æ¨èé•œåƒ** | **ç‰¹ç‚¹** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|---------|-------------|
| ğŸ **Python** | `python:3.9` | `é¢„è£…Pythonç¯å¢ƒ` | `Webåº”ç”¨ã€æ•°æ®åˆ†æ` |
| â˜• **Java** | `openjdk:11` | `é¢„è£…JDKç¯å¢ƒ` | `ä¼ä¸šåº”ç”¨ã€å¾®æœåŠ¡` |
| ğŸŸ¢ **Node.js** | `node:16` | `é¢„è£…Nodeç¯å¢ƒ` | `å‰ç«¯åº”ç”¨ã€APIæœåŠ¡` |
| ğŸ”µ **Go** | `golang:1.18` | `é¢„è£…Goç¯å¢ƒ` | `é«˜æ€§èƒ½æœåŠ¡ã€CLIå·¥å…·` |

**ç¯å¢ƒé…ç½®ç¤ºä¾‹ï¼š**
```yaml
# Pythoné¡¹ç›®çš„ç¯å¢ƒé…ç½®
build_python:
  image: python:3.9          # ä½¿ç”¨Python 3.9ç¯å¢ƒ
  stage: build
  before_script:
    - python --version       # æ£€æŸ¥Pythonç‰ˆæœ¬
    - pip --version         # æ£€æŸ¥åŒ…ç®¡ç†å™¨
  script:
    - pip install -r requirements.txt  # å®‰è£…ä¾èµ–
    - python setup.py build           # æ„å»ºé¡¹ç›®
```

### 2.3 è‡ªå®šä¹‰ç¼–è¯‘ç¯å¢ƒ


**ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ç¯å¢ƒï¼Ÿ**
- ğŸ”¸ æ ‡å‡†é•œåƒç¼ºå°‘ç‰¹æ®Šå·¥å…·
- ğŸ”¸ éœ€è¦ç‰¹å®šç‰ˆæœ¬çš„è½¯ä»¶
- ğŸ”¸ é¡¹ç›®æœ‰ç‰¹æ®Šçš„ç³»ç»Ÿä¾èµ–

**è‡ªå®šä¹‰ç¯å¢ƒé…ç½®ï¼š**
```yaml
build_custom:
  image: ubuntu:20.04        # åŸºç¡€ç³»ç»Ÿé•œåƒ
  before_script:
    # å®‰è£…ç¼–è¯‘å·¥å…·
    - apt-get update
    - apt-get install -y build-essential
    - apt-get install -y curl git
    
    # å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„å·¥å…·
    - curl -o- https://nodejs.org/dist/v16.14.0/node-v16.14.0-linux-x64.tar.gz
  script:
    - make build              # ä½¿ç”¨makeå‘½ä»¤æ„å»º
```

---

## 3. ğŸ“¦ ä¾èµ–é¡¹å®‰è£…é…ç½®


### 3.1 ä»€ä¹ˆæ˜¯ä¾èµ–é¡¹


**ä¾èµ–é¡¹**ï¼šä½ çš„é¡¹ç›®éœ€è¦ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹ä»£ç åº“ï¼Œå°±åƒåšèœéœ€è¦çš„è°ƒæ–™

```
ç”Ÿæ´»ç±»æ¯”ï¼š
åšè›‹ç‚’é¥­éœ€è¦ï¼šé¸¡è›‹ï¼ˆè‡ªå·±å‡†å¤‡ï¼‰+ ç±³é¥­ï¼ˆè‡ªå·±åšï¼‰+ é…±æ²¹ï¼ˆä¹°ç°æˆçš„ï¼‰
         â†“
å†™ç¨‹åºéœ€è¦ï¼šæ ¸å¿ƒä»£ç ï¼ˆè‡ªå·±å†™ï¼‰+ ç¬¬ä¸‰æ–¹åº“ï¼ˆä¸‹è½½ç°æˆçš„ï¼‰

é…±æ²¹ = ä¾èµ–é¡¹ï¼Œä¸ç”¨è‡ªå·±åšï¼Œç›´æ¥ä¹°æ¥ç”¨
```

### 3.2 ä¸åŒè¯­è¨€çš„ä¾èµ–ç®¡ç†


**ğŸ“‹ å„è¯­è¨€ä¾èµ–ç®¡ç†å¯¹ç…§è¡¨ï¼š**

| è¯­è¨€ | **ä¾èµ–æ–‡ä»¶** | **å®‰è£…å‘½ä»¤** | **è¯´æ˜** |
|-----|------------|------------|---------|
| ğŸ Python | `requirements.txt` | `pip install -r requirements.txt` | `åˆ—å‡ºæ‰€éœ€çš„PythonåŒ…` |
| â˜• Java | `pom.xml` / `build.gradle` | `mvn install` / `gradle build` | `Mavenæˆ–Gradleç®¡ç†` |
| ğŸŸ¢ Node.js | `package.json` | `npm install` / `yarn install` | `npmæˆ–yarnç®¡ç†` |
| ğŸ”µ Go | `go.mod` | `go mod download` | `Go modulesç®¡ç†` |

### 3.3 ä¾èµ–å®‰è£…æœ€ä½³å®è·µ


**Pythoné¡¹ç›®ä¾èµ–å®‰è£…ï¼š**
```yaml
install_python_deps:
  image: python:3.9
  stage: build
  before_script:
    # å‡çº§pipåˆ°æœ€æ–°ç‰ˆæœ¬
    - pip install --upgrade pip
    
    # å®‰è£…é¡¹ç›®ä¾èµ–
    - pip install -r requirements.txt
    
    # éªŒè¯é‡è¦ä¾èµ–æ˜¯å¦å®‰è£…æˆåŠŸ
    - python -c "import django; print('Djangoå®‰è£…æˆåŠŸ')"
  
  # ç¼“å­˜ä¾èµ–ï¼Œé¿å…é‡å¤ä¸‹è½½
  cache:
    paths:
      - ~/.cache/pip/
```

**Node.jsé¡¹ç›®ä¾èµ–å®‰è£…ï¼š**
```yaml
install_node_deps:
  image: node:16
  stage: build
  before_script:
    # è®¾ç½®npmé•œåƒæºï¼ˆå›½å†…åŠ é€Ÿï¼‰
    - npm config set registry https://registry.npmmirror.com
    
    # å®‰è£…ä¾èµ–
    - npm ci  # æ¯”npm installæ›´é€‚åˆCIç¯å¢ƒ
  
  cache:
    paths:
      - node_modules/
      - ~/.npm/
```

### 3.4 ä¾èµ–å®‰è£…å¸¸è§é—®é¢˜è§£å†³


**ğŸš¨ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼š**

| é—®é¢˜ | **åŸå› ** | **è§£å†³æ–¹æ¡ˆ** |
|-----|----------|-------------|
| âŒ `ä¾èµ–ä¸‹è½½å¤±è´¥` | `ç½‘ç»œé—®é¢˜æˆ–æºä¸å¯ç”¨` | `æ›´æ¢é•œåƒæºï¼Œè®¾ç½®ä»£ç†` |
| âŒ `ç‰ˆæœ¬å†²çª` | `ä¾èµ–ç‰ˆæœ¬ä¸å…¼å®¹` | `é”å®šç‰ˆæœ¬å·ï¼Œä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ` |
| âŒ `æƒé™ä¸è¶³` | `éœ€è¦ç®¡ç†å‘˜æƒé™å®‰è£…` | `ä½¿ç”¨ç”¨æˆ·çº§å®‰è£…æˆ–Docker` |

**è§£å†³ä¸‹è½½æ…¢çš„é—®é¢˜ï¼š**
```yaml
# ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
before_script:
  # Pythonä½¿ç”¨æ¸…åæº
  - pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
  
  # Node.jsä½¿ç”¨æ·˜å®æº
  - npm config set registry https://registry.npmmirror.com
  
  # è®¾ç½®è¶…æ—¶æ—¶é—´é¿å…å¡æ­»
  - pip config set global.timeout 60
```

---

## 4. ğŸ“ æ„å»ºè„šæœ¬ç¼–å†™


### 4.1 ä»€ä¹ˆæ˜¯æ„å»ºè„šæœ¬


**æ„å»ºè„šæœ¬**ï¼šå‘Šè¯‰è®¡ç®—æœºæŒ‰æ­¥éª¤å®Œæˆæ„å»ºä»»åŠ¡çš„"æ“ä½œæ‰‹å†Œ"

```
ç”Ÿæ´»ç±»æ¯”ï¼š
èœè°±ï¼šç¬¬ä¸€æ­¥æ´—èœ â†’ ç¬¬äºŒæ­¥åˆ‡èœ â†’ ç¬¬ä¸‰æ­¥ä¸‹é”…ç‚’
æ„å»ºè„šæœ¬ï¼šç¬¬ä¸€æ­¥å®‰è£…ä¾èµ– â†’ ç¬¬äºŒæ­¥ç¼–è¯‘ä»£ç  â†’ ç¬¬ä¸‰æ­¥æ‰“åŒ…æ–‡ä»¶

è·Ÿç€èœè°±åšèœ = æŒ‰ç…§è„šæœ¬æ„å»ºé¡¹ç›®
```

### 4.2 åŸºç¡€æ„å»ºè„šæœ¬ç»“æ„


**æ„å»ºè„šæœ¬çš„ç»„æˆéƒ¨åˆ†ï¼š**
```
ğŸ”¸ å‡†å¤‡é˜¶æ®µï¼šå®‰è£…å·¥å…·ã€è®¾ç½®ç¯å¢ƒ
ğŸ”¸ æ„å»ºé˜¶æ®µï¼šç¼–è¯‘ä»£ç ã€å¤„ç†èµ„æº
ğŸ”¸ æ£€æŸ¥é˜¶æ®µï¼šéªŒè¯æ„å»ºç»“æœ
ğŸ”¸ æ¸…ç†é˜¶æ®µï¼šåˆ é™¤ä¸´æ—¶æ–‡ä»¶
```

**åŸºç¡€è„šæœ¬ç¤ºä¾‹ï¼š**
```yaml
build_project:
  stage: build
  script:
    # ===== å‡†å¤‡é˜¶æ®µ =====
    - echo "ğŸš€ å¼€å§‹æ„å»ºé¡¹ç›®"
    - whoami                    # æŸ¥çœ‹å½“å‰ç”¨æˆ·
    - pwd                       # æŸ¥çœ‹å½“å‰ç›®å½•
    
    # ===== æ„å»ºé˜¶æ®µ =====
    - echo "ğŸ“¦ å®‰è£…ä¾èµ–..."
    - npm install
    
    - echo "ğŸ”¨ ç¼–è¯‘é¡¹ç›®..."
    - npm run build
    
    # ===== æ£€æŸ¥é˜¶æ®µ =====
    - echo "âœ… æ£€æŸ¥æ„å»ºç»“æœ..."
    - ls -la dist/              # æŸ¥çœ‹è¾“å‡ºç›®å½•
    - du -sh dist/              # æŸ¥çœ‹æ–‡ä»¶å¤§å°
    
    - echo "ğŸ‰ æ„å»ºå®Œæˆï¼"
```

### 4.3 ä¸åŒé¡¹ç›®ç±»å‹çš„æ„å»ºè„šæœ¬


**å‰ç«¯Reacté¡¹ç›®æ„å»ºï¼š**
```yaml
build_react:
  image: node:16
  stage: build
  script:
    # å®‰è£…ä¾èµ–
    - npm ci
    
    # ä»£ç è´¨é‡æ£€æŸ¥
    - npm run lint              # æ£€æŸ¥ä»£ç è§„èŒƒ
    
    # è¿è¡Œæµ‹è¯•
    - npm run test:ci           # è·‘å•å…ƒæµ‹è¯•
    
    # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
    - npm run build             # ç”Ÿæˆdistç›®å½•
    
    # éªŒè¯æ„å»ºç»“æœ
    - test -d dist && echo "âœ… æ„å»ºç›®å½•å­˜åœ¨" || exit 1
    - test -f dist/index.html && echo "âœ… ä¸»é¡µæ–‡ä»¶å­˜åœ¨" || exit 1
  
  artifacts:                    # ä¿å­˜æ„å»ºäº§ç‰©
    paths:
      - dist/
    expire_in: 1 week
```

**åç«¯Javaé¡¹ç›®æ„å»ºï¼š**
```yaml
build_java:
  image: openjdk:11
  stage: build
  script:
    # æ£€æŸ¥Javaç¯å¢ƒ
    - java -version
    - ./mvnw --version
    
    # æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
    - ./mvnw clean
    
    # ç¼–è¯‘é¡¹ç›®
    - ./mvnw compile             # ç¼–è¯‘æºä»£ç 
    
    # è¿è¡Œæµ‹è¯•
    - ./mvnw test               # è¿è¡Œå•å…ƒæµ‹è¯•
    
    # æ‰“åŒ…åº”ç”¨
    - ./mvnw package            # ç”Ÿæˆjaræ–‡ä»¶
    
    # éªŒè¯jaræ–‡ä»¶
    - ls -la target/*.jar
    - java -jar target/*.jar --version || true
  
  artifacts:
    paths:
      - target/*.jar
```

### 4.4 æ„å»ºè„šæœ¬æœ€ä½³å®è·µ


**ğŸ’¡ ç¼–å†™æŠ€å·§ï¼š**

â‘ . **ä½¿ç”¨æœ‰æ„ä¹‰çš„è¾“å‡ºä¿¡æ¯**
```yaml
script:
  - echo "ğŸ” æ£€æŸ¥ç¯å¢ƒ..."
  - node --version
  - echo "ğŸ“¦ å®‰è£…ä¾èµ–åŒ…..."
  - npm install
  - echo "ğŸ”¨ å¼€å§‹æ„å»º..."
  - npm run build
```

â‘¡. **é”™è¯¯å¤„ç†å’ŒéªŒè¯**
```yaml
script:
  # æ£€æŸ¥å¿…è¦æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  - test -f package.json || (echo "âŒ ç¼ºå°‘package.jsonæ–‡ä»¶" && exit 1)
  
  # æ„å»ºåéªŒè¯ç»“æœ
  - npm run build
  - test -d dist || (echo "âŒ æ„å»ºå¤±è´¥ï¼Œç¼ºå°‘distç›®å½•" && exit 1)
  
  # æ£€æŸ¥å…³é”®æ–‡ä»¶
  - find dist -name "*.js" | head -5 | xargs ls -la
```

â‘¢. **è®¾ç½®æ„å»ºè¶…æ—¶**
```yaml
build_with_timeout:
  stage: build
  timeout: 30m                 # 30åˆ†é’Ÿè¶…æ—¶
  script:
    - npm run build
```

---

## 5. ğŸ“ æ„å»ºäº§ç‰©ç®¡ç†


### 5.1 ä»€ä¹ˆæ˜¯æ„å»ºäº§ç‰©


**æ„å»ºäº§ç‰©**ï¼šæ„å»ºè¿‡ç¨‹ç”Ÿæˆçš„æœ€ç»ˆæ–‡ä»¶ï¼Œå°±åƒå·¥å‚ç”Ÿäº§å‡ºçš„æˆå“

```
ç”Ÿæ´»ç±»æ¯”ï¼š
é¢åŒ…å·¥å‚ï¼šé¢ç²‰ï¼ˆåŸæ–™ï¼‰â†’ å’Œé¢çƒ˜çƒ¤ï¼ˆæ„å»ºï¼‰â†’ é¢åŒ…ï¼ˆäº§ç‰©ï¼‰
è½¯ä»¶å¼€å‘ï¼šæºä»£ç ï¼ˆåŸæ–™ï¼‰â†’ ç¼–è¯‘æ‰“åŒ…ï¼ˆæ„å»ºï¼‰â†’ ç¨‹åºæ–‡ä»¶ï¼ˆäº§ç‰©ï¼‰

æ„å»ºäº§ç‰© = å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ–éƒ¨ç½²çš„æ–‡ä»¶
```

**å¸¸è§æ„å»ºäº§ç‰©ç±»å‹ï¼š**
- ğŸŒ **å‰ç«¯é¡¹ç›®**ï¼šHTMLã€CSSã€JSæ–‡ä»¶æ‰“åŒ…
- â˜• **Javaé¡¹ç›®**ï¼šJARåŒ…ã€WARåŒ…
- ğŸ **Pythoné¡¹ç›®**ï¼šwheelåŒ…ã€å¯æ‰§è¡Œæ–‡ä»¶
- ğŸ“± **ç§»åŠ¨åº”ç”¨**ï¼šAPKã€IPAå®‰è£…åŒ…

### 5.2 GitLab Artifactsé…ç½®


**Artifacts**ï¼šGitLabçš„æ„å»ºäº§ç‰©å­˜å‚¨åŠŸèƒ½

**åŸºç¡€é…ç½®ï¼š**
```yaml
build_with_artifacts:
  stage: build
  script:
    - npm run build             # æ„å»ºé¡¹ç›®
    - ls -la dist/              # æŸ¥çœ‹äº§ç‰©
  
  artifacts:
    paths:
      - dist/                   # ä¿å­˜distç›®å½•
      - logs/                   # ä¿å­˜æ—¥å¿—æ–‡ä»¶
    expire_in: 1 week           # ä¿å­˜1å‘¨åè‡ªåŠ¨åˆ é™¤
    name: "build-$CI_COMMIT_SHORT_SHA"  # è‡ªå®šä¹‰æ–‡ä»¶å
```

**é«˜çº§é…ç½®é€‰é¡¹ï¼š**
```yaml
advanced_artifacts:
  stage: build
  script:
    - make build
  
  artifacts:
    # æŒ‡å®šè¦ä¿å­˜çš„æ–‡ä»¶
    paths:
      - dist/
      - build/assets/
      - "*.log"                 # æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
    
    # æ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶
    exclude:
      - "*.tmp"                 # æ’é™¤ä¸´æ—¶æ–‡ä»¶
      - "node_modules/"         # æ’é™¤ä¾èµ–ç›®å½•
    
    # ä¿å­˜æ—¶é—´è®¾ç½®
    expire_in: 30 days          # ä¿å­˜30å¤©
    
    # ä½•æ—¶ä¿å­˜ï¼ˆé»˜è®¤jobæˆåŠŸæ—¶ä¿å­˜ï¼‰
    when: always                # æ€»æ˜¯ä¿å­˜ï¼ˆæˆåŠŸæˆ–å¤±è´¥éƒ½ä¿å­˜ï¼‰
    
    # äº§ç‰©æŠ¥å‘Šï¼ˆç”¨äºGitLabç•Œé¢å±•ç¤ºï¼‰
    reports:
      junit: test-results.xml   # æµ‹è¯•æŠ¥å‘Š
      coverage_report:
        coverage_format: cobertura
        path: coverage.xml
```

### 5.3 æ„å»ºäº§ç‰©çš„ä¸‹è½½ä¸ä½¿ç”¨


**ğŸ’¾ ä¸‹è½½æ„å»ºäº§ç‰©ï¼š**

â‘ . **é€šè¿‡GitLabç•Œé¢ä¸‹è½½**
```
GitLabé¡¹ç›®é¡µé¢ â†’ Pipeline â†’ ç‚¹å‡»å…·ä½“Job â†’ å³ä¾§ä¸‹è½½æŒ‰é’®
```

â‘¡. **é€šè¿‡APIä¸‹è½½**
```bash
# ä½¿ç”¨curlä¸‹è½½æœ€æ–°çš„æ„å»ºäº§ç‰©
curl --header "PRIVATE-TOKEN: your-token" \
     "https://gitlab.com/api/v4/projects/PROJECT_ID/jobs/artifacts/main/download?job=build_job"
```

â‘¢. **åœ¨åç»­Jobä¸­ä½¿ç”¨**
```yaml
deploy_job:
  stage: deploy
  dependencies:
    - build_job                 # ä¾èµ–build_jobçš„äº§ç‰©
  script:
    - ls -la dist/              # å¯ä»¥ç›´æ¥ä½¿ç”¨distç›®å½•
    - cp -r dist/* /var/www/html/
```

### 5.4 æ„å»ºäº§ç‰©ä¼˜åŒ–ç­–ç•¥


**ğŸ¯ ä¼˜åŒ–è¦ç‚¹ï¼š**

| ä¼˜åŒ–æ–¹é¢ | **é—®é¢˜** | **è§£å†³æ–¹æ¡ˆ** |
|---------|----------|-------------|
| ğŸ“¦ **æ–‡ä»¶å¤§å°** | `äº§ç‰©è¿‡å¤§å½±å“ä¼ è¾“` | `å‹ç¼©æ–‡ä»¶ã€ç§»é™¤è°ƒè¯•ä¿¡æ¯` |
| â° **ä¿å­˜æ—¶é—´** | `å ç”¨å­˜å‚¨ç©ºé—´` | `åˆç†è®¾ç½®expire_in` |
| ğŸ” **æ–‡ä»¶ç­›é€‰** | `ä¿å­˜ä¸å¿…è¦æ–‡ä»¶` | `ç²¾ç¡®æŒ‡å®špathså’Œexclude` |

**æ–‡ä»¶å‹ç¼©ç¤ºä¾‹ï¼š**
```yaml
build_optimized:
  stage: build
  script:
    - npm run build
    
    # å‹ç¼©æ„å»ºäº§ç‰©
    - tar -czf dist.tar.gz dist/
    - echo "ğŸ“¦ å‹ç¼©å®Œæˆï¼Œæ–‡ä»¶å¤§å°ï¼š"
    - du -sh dist.tar.gz
  
  artifacts:
    paths:
      - dist.tar.gz             # åªä¿å­˜å‹ç¼©æ–‡ä»¶
    expire_in: 2 weeks
```

---

## 6. ğŸŒ å¤šç¯å¢ƒæ„å»ºé…ç½®


### 6.1 ä»€ä¹ˆæ˜¯å¤šç¯å¢ƒæ„å»º


**å¤šç¯å¢ƒ**ï¼šé’ˆå¯¹ä¸åŒä½¿ç”¨åœºæ™¯å‡†å¤‡çš„ä¸åŒç‰ˆæœ¬ï¼Œå°±åƒåšèœæœ‰ä¸åŒå£å‘³

```
ç”Ÿæ´»ç±»æ¯”ï¼š
å·èœå¨å¸ˆåšèœï¼š
- ç»™å››å·äººåš â†’ æ­£å¸¸è¾£åº¦ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- ç»™å¤–åœ°äººåš â†’ å¾®è¾£ç‰ˆæœ¬ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰  
- ç»™å¤–å›½äººåš â†’ ä¸è¾£ç‰ˆæœ¬ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

è½¯ä»¶å¼€å‘ï¼š
- å¼€å‘ç¯å¢ƒï¼šå¼€å‘è€…è°ƒè¯•ç”¨ï¼ŒåŠŸèƒ½å¯èƒ½ä¸å®Œæ•´
- æµ‹è¯•ç¯å¢ƒï¼šæµ‹è¯•å›¢é˜ŸéªŒè¯ï¼Œæ¥è¿‘çœŸå®ç¯å¢ƒ
- ç”Ÿäº§ç¯å¢ƒï¼šç”¨æˆ·å®é™…ä½¿ç”¨ï¼Œè¦æ±‚æœ€ç¨³å®š
```

### 6.2 ç¯å¢ƒå˜é‡é…ç½®


**ç¯å¢ƒå˜é‡**ï¼šæ ¹æ®ä¸åŒç¯å¢ƒè®¾ç½®ä¸åŒçš„é…ç½®å€¼

**GitLabç¯å¢ƒå˜é‡è®¾ç½®ï¼š**
```
é¡¹ç›®è®¾ç½® â†’ Settings â†’ CI/CD â†’ Variables
```

**ç¯å¢ƒå˜é‡åˆ†ç±»ï¼š**
```yaml
# ä¸åŒç¯å¢ƒçš„å˜é‡é…ç½®
variables:
  # å¼€å‘ç¯å¢ƒ
  DEV_API_URL: "https://dev-api.example.com"
  DEV_DATABASE_URL: "mongodb://dev-db:27017"
  
  # æµ‹è¯•ç¯å¢ƒ  
  TEST_API_URL: "https://test-api.example.com"
  TEST_DATABASE_URL: "mongodb://test-db:27017"
  
  # ç”Ÿäº§ç¯å¢ƒ
  PROD_API_URL: "https://api.example.com"
  PROD_DATABASE_URL: "mongodb://prod-db:27017"
```

### 6.3 åˆ†ç¯å¢ƒæ„å»ºé…ç½®


**æŒ‰åˆ†æ”¯åŒºåˆ†ç¯å¢ƒï¼š**
```yaml
# å¼€å‘ç¯å¢ƒæ„å»ºï¼ˆdevelopåˆ†æ”¯ï¼‰
build_dev:
  stage: build
  image: node:16
  variables:
    NODE_ENV: development
    API_URL: $DEV_API_URL
  script:
    - npm ci
    - npm run build:dev         # å¼€å‘ç¯å¢ƒæ„å»ºå‘½ä»¤
  artifacts:
    paths:
      - dist-dev/
  only:
    - develop                   # åªåœ¨developåˆ†æ”¯è¿è¡Œ

# æµ‹è¯•ç¯å¢ƒæ„å»ºï¼ˆteståˆ†æ”¯ï¼‰
build_test:
  stage: build
  image: node:16
  variables:
    NODE_ENV: testing
    API_URL: $TEST_API_URL
  script:
    - npm ci
    - npm run build:test
  artifacts:
    paths:
      - dist-test/
  only:
    - test

# ç”Ÿäº§ç¯å¢ƒæ„å»ºï¼ˆmainåˆ†æ”¯ï¼‰
build_prod:
  stage: build
  image: node:16
  variables:
    NODE_ENV: production
    API_URL: $PROD_API_URL
  script:
    - npm ci
    - npm run build:prod        # ç”Ÿäº§ç¯å¢ƒæ„å»ºï¼Œä¼šå‹ç¼©ä¼˜åŒ–
  artifacts:
    paths:
      - dist-prod/
  only:
    - main                      # åªåœ¨mainåˆ†æ”¯è¿è¡Œ
```

### 6.4 æ„å»ºé…ç½®å·®å¼‚åŒ–å¤„ç†


**ä¸åŒç¯å¢ƒçš„æ„å»ºå·®å¼‚ï¼š**

â‘ . **å¼€å‘ç¯å¢ƒï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰**
```yaml
build_dev:
  script:
    - npm run build:dev
    # å¼€å‘ç¯å¢ƒç‰¹ç‚¹ï¼š
    # - ä¸å‹ç¼©ä»£ç ï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰
    # - åŒ…å«sourcemapï¼ˆé”™è¯¯å®šä½ï¼‰
    # - çƒ­æ›´æ–°åŠŸèƒ½ï¼ˆå®æ—¶é¢„è§ˆï¼‰
```

â‘¡. **ç”Ÿäº§ç¯å¢ƒï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰**
```yaml
build_prod:
  script:
    - npm run build:prod
    # ç”Ÿäº§ç¯å¢ƒç‰¹ç‚¹ï¼š
    # - ä»£ç å‹ç¼©æ··æ·†ï¼ˆå‡å°ä½“ç§¯ï¼‰
    # - ç§»é™¤è°ƒè¯•ä¿¡æ¯ï¼ˆå®‰å…¨æ€§ï¼‰
    # - å¯ç”¨ç¼“å­˜ä¼˜åŒ–ï¼ˆåŠ è½½é€Ÿåº¦ï¼‰
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆpackage.jsonï¼‰ï¼š**
```json
{
  "scripts": {
    "build:dev": "webpack --mode development --devtool source-map",
    "build:test": "webpack --mode production --devtool cheap-source-map", 
    "build:prod": "webpack --mode production --devtool none"
  }
}
```

---

## 7. âš¡ æ„å»ºç¼“å­˜ä¼˜åŒ–


### 7.1 ä»€ä¹ˆæ˜¯æ„å»ºç¼“å­˜


**æ„å»ºç¼“å­˜**ï¼šæŠŠä¹‹å‰ä¸‹è½½æˆ–å¤„ç†çš„ä¸œè¥¿ä¿å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æ¥ç”¨ï¼Œå°±åƒæŠŠå¸¸ç”¨è°ƒæ–™æ”¾å¨æˆ¿

```
ç”Ÿæ´»ç±»æ¯”ï¼š
åšèœæ—¶çš„ä¼˜åŒ–ï¼š
- æ¯æ¬¡ä¹°èœå¾ˆéº»çƒ¦ â†’ ä¸€æ¬¡ä¹°å¤Ÿæ”¾å†°ç®±ï¼ˆç¼“å­˜é£Ÿæï¼‰
- æ¯æ¬¡æ´—é”…å¾ˆè´¹æ—¶ â†’ å‡†å¤‡å¤šä¸ªé”…å…·ï¼ˆç¼“å­˜å·¥å…·ï¼‰

æ„å»ºæ—¶çš„ä¼˜åŒ–ï¼š
- æ¯æ¬¡ä¸‹è½½ä¾èµ–å¾ˆæ…¢ â†’ ä¿å­˜ä¾èµ–åŒ…ï¼ˆç¼“å­˜ä¾èµ–ï¼‰
- æ¯æ¬¡ç¼–è¯‘å¾ˆè´¹æ—¶ â†’ ä¿å­˜ç¼–è¯‘ç»“æœï¼ˆç¼“å­˜æ„å»ºï¼‰
```

### 7.2 GitLab Cacheé…ç½®


**åŸºç¡€ç¼“å­˜é…ç½®ï¼š**
```yaml
build_with_cache:
  stage: build
  image: node:16
  
  # ç¼“å­˜é…ç½®
  cache:
    key: "$CI_COMMIT_REF_SLUG"   # ç¼“å­˜keyï¼ˆæŒ‰åˆ†æ”¯åŒºåˆ†ï¼‰
    paths:
      - node_modules/            # ç¼“å­˜ä¾èµ–ç›®å½•
      - .npm/                    # ç¼“å­˜npmç¼“å­˜
    policy: pull-push            # æ‹‰å–å¹¶æ›´æ–°ç¼“å­˜
  
  script:
    - npm ci                     # å®‰è£…ä¾èµ–ï¼ˆä¼šä½¿ç”¨ç¼“å­˜ï¼‰
    - npm run build
```

**é«˜çº§ç¼“å­˜ç­–ç•¥ï¼š**
```yaml
# åˆ†å±‚ç¼“å­˜é…ç½®
.cache_template: &cache_config
  cache:
    # å…¨å±€ä¾èµ–ç¼“å­˜
    - key: "deps-$CI_COMMIT_REF_SLUG"
      paths:
        - node_modules/
        - ~/.npm/
      policy: pull-push
    
    # æ„å»ºç»“æœç¼“å­˜
    - key: "build-$CI_COMMIT_SHA"
      paths:
        - dist/
        - .cache/
      policy: push

build_job:
  <<: *cache_config              # ä½¿ç”¨ç¼“å­˜æ¨¡æ¿
  script:
    - npm ci
    - npm run build
```

### 7.3 ä¸åŒç±»å‹é¡¹ç›®çš„ç¼“å­˜ç­–ç•¥


**ğŸ“‹ å„è¯­è¨€ç¼“å­˜é…ç½®å¯¹ç…§ï¼š**

| è¯­è¨€ | **ç¼“å­˜ç›®å½•** | **è¯´æ˜** |
|-----|------------|---------|
| ğŸŸ¢ **Node.js** | `node_modules/`, `~/.npm/` | `ç¼“å­˜å·²å®‰è£…çš„npmåŒ…` |
| ğŸ **Python** | `~/.cache/pip/`, `__pycache__/` | `ç¼“å­˜pipä¸‹è½½å’Œç¼–è¯‘ç»“æœ` |
| â˜• **Java** | `~/.m2/repository/`, `target/` | `ç¼“å­˜Mavenä¾èµ–å’Œæ„å»ºç»“æœ` |
| ğŸ”µ **Go** | `~/go/pkg/mod/`, `~/.cache/go-build/` | `ç¼“å­˜Goæ¨¡å—å’Œæ„å»ºç¼“å­˜` |

**Pythoné¡¹ç›®ç¼“å­˜ç¤ºä¾‹ï¼š**
```yaml
build_python:
  image: python:3.9
  cache:
    key: "python-$CI_COMMIT_REF_SLUG"
    paths:
      - ~/.cache/pip/            # pipç¼“å­˜ç›®å½•
      - venv/                    # è™šæ‹Ÿç¯å¢ƒç›®å½•
  script:
    - python -m venv venv        # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
    - source venv/bin/activate   # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
    - pip install -r requirements.txt
    - python setup.py build
```

### 7.4 ç¼“å­˜æ•ˆæœç›‘æ§


**ç¼“å­˜å‘½ä¸­æƒ…å†µæŸ¥çœ‹ï¼š**
```yaml
build_with_cache_monitor:
  before_script:
    # æ£€æŸ¥ç¼“å­˜çŠ¶æ€
    - echo "ğŸ“Š æ£€æŸ¥ç¼“å­˜çŠ¶æ€..."
    - ls -la node_modules/ 2>/dev/null && echo "âœ… å‘ç°ç¼“å­˜çš„ä¾èµ–" || echo "âŒ æœªå‘ç°ä¾èµ–ç¼“å­˜"
    - du -sh node_modules/ 2>/dev/null || echo "ä¾èµ–ç›®å½•å¤§å°ï¼š0"
  
  script:
    # è®°å½•å®‰è£…æ—¶é—´
    - start_time=$(date +%s)
    - npm ci
    - end_time=$(date +%s)
    - echo "â±ï¸ ä¾èµ–å®‰è£…è€—æ—¶ï¼š$((end_time - start_time))ç§’"
    
    - npm run build
```

**ğŸ¯ ç¼“å­˜ä¼˜åŒ–æ•ˆæœï¼š**
- **é¦–æ¬¡æ„å»º**ï¼šä¸‹è½½æ‰€æœ‰ä¾èµ–ï¼Œè€—æ—¶3-5åˆ†é’Ÿ
- **ç¼“å­˜å‘½ä¸­**ï¼šè·³è¿‡ä¸‹è½½ï¼Œè€—æ—¶30ç§’-1åˆ†é’Ÿ
- **èŠ‚çœæ—¶é—´**ï¼š70-80%çš„æ—¶é—´èŠ‚çœ

---

## 8. ğŸ” æ„å»ºå¤±è´¥è°ƒè¯•


### 8.1 æ„å»ºå¤±è´¥çš„å¸¸è§åŸå› 


**æ„å»ºå¤±è´¥**ï¼šå°±åƒåšèœå¤±è´¥ä¸€æ ·ï¼Œå¯èƒ½æ˜¯ææ–™ã€å·¥å…·æˆ–æ­¥éª¤çš„é—®é¢˜

```
åšèœå¤±è´¥çš„åŸå› åˆ†æï¼š
ğŸ”¸ ææ–™é—®é¢˜ï¼šé£Ÿæè¿‡æœŸã€è°ƒæ–™ä¸å¤Ÿ
ğŸ”¸ å·¥å…·é—®é¢˜ï¼šé”…åäº†ã€ç«åŠ›ä¸å¤Ÿ  
ğŸ”¸ æ­¥éª¤é—®é¢˜ï¼šé¡ºåºé”™è¯¯ã€æ—¶é—´æ§åˆ¶

æ„å»ºå¤±è´¥çš„åŸå› åˆ†æï¼š
ğŸ”¸ ç¯å¢ƒé—®é¢˜ï¼šå·¥å…·ç‰ˆæœ¬ä¸å¯¹ã€ç³»ç»Ÿä¸å…¼å®¹
ğŸ”¸ ä¾èµ–é—®é¢˜ï¼šåŒ…ç¼ºå¤±ã€ç‰ˆæœ¬å†²çª
ğŸ”¸ ä»£ç é—®é¢˜ï¼šè¯­æ³•é”™è¯¯ã€é…ç½®é”™è¯¯
```

### 8.2 å¸¸è§é”™è¯¯ç±»å‹ä¸è§£å†³


**ğŸ’¥ é”™è¯¯åˆ†ç±»ä¸è¯Šæ–­ï¼š**

| é”™è¯¯ç±»å‹ | **å…¸å‹ç—‡çŠ¶** | **è§£å†³æ€è·¯** |
|---------|------------|-------------|
| ğŸš« **ç¯å¢ƒé”™è¯¯** | `command not found`, `ç‰ˆæœ¬ä¸å…¼å®¹` | `æ£€æŸ¥å·¥å…·å®‰è£…ï¼Œæ›´æ–°é•œåƒç‰ˆæœ¬` |
| ğŸ“¦ **ä¾èµ–é”™è¯¯** | `æ¨¡å—æœªæ‰¾åˆ°`, `ç‰ˆæœ¬å†²çª` | `æ£€æŸ¥ä¾èµ–æ–‡ä»¶ï¼Œæ¸…ç†ç¼“å­˜é‡è£…` |
| ğŸ’» **ä»£ç é”™è¯¯** | `è¯­æ³•é”™è¯¯`, `ç¼–è¯‘å¤±è´¥` | `æœ¬åœ°æµ‹è¯•ï¼Œæ£€æŸ¥ä»£ç è¯­æ³•` |
| ğŸ”§ **é…ç½®é”™è¯¯** | `è·¯å¾„ä¸å­˜åœ¨`, `æƒé™ä¸è¶³` | `æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œç¡®è®¤è·¯å¾„æƒé™` |

### 8.3 è°ƒè¯•æŠ€å·§å’Œæ–¹æ³•


**ğŸ” è°ƒè¯•æ­¥éª¤ï¼š**

â‘ . **æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—**
```yaml
build_debug:
  stage: build
  script:
    # å¼€å¯è¯¦ç»†è¾“å‡ºæ¨¡å¼
    - set -x                    # æ˜¾ç¤ºæ‰§è¡Œçš„æ¯ä¸ªå‘½ä»¤
    - npm install --verbose     # è¯¦ç»†æ¨¡å¼å®‰è£…
    - npm run build 2>&1 | tee build.log  # ä¿å­˜æ—¥å¿—åˆ°æ–‡ä»¶
  
  # å¤±è´¥æ—¶ä¹Ÿä¿å­˜æ—¥å¿—
  artifacts:
    when: on_failure
    paths:
      - build.log
      - npm-debug.log
    expire_in: 1 week
```

â‘¡. **ç¯å¢ƒä¿¡æ¯æ”¶é›†**
```yaml
debug_environment:
  before_script:
    - echo "=== ç³»ç»Ÿä¿¡æ¯ ==="
    - uname -a                  # ç³»ç»Ÿç‰ˆæœ¬
    - cat /etc/os-release       # å‘è¡Œç‰ˆä¿¡æ¯
    
    - echo "=== å·¥å…·ç‰ˆæœ¬ ==="
    - node --version            # Node.jsç‰ˆæœ¬
    - npm --version             # npmç‰ˆæœ¬
    - python --version          # Pythonç‰ˆæœ¬
    
    - echo "=== ç¯å¢ƒå˜é‡ ==="
    - env | sort                # æ‰€æœ‰ç¯å¢ƒå˜é‡
    
    - echo "=== ç£ç›˜ç©ºé—´ ==="
    - df -h                     # ç£ç›˜ä½¿ç”¨æƒ…å†µ
    - du -sh ./*                # ç›®å½•å¤§å°
```

â‘¢. **åˆ†æ­¥éª¤æµ‹è¯•**
```yaml
step_by_step_debug:
  stage: build
  script:
    # ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æ–‡ä»¶
    - echo "ğŸ“ æ£€æŸ¥é¡¹ç›®æ–‡ä»¶..."
    - ls -la
    - test -f package.json && echo "âœ… package.jsonå­˜åœ¨" || echo "âŒ package.jsonç¼ºå¤±"
    
    # ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ä¾èµ–
    - echo "ğŸ“¦ æ£€æŸ¥ä¾èµ–é…ç½®..."
    - cat package.json | grep -A 10 "dependencies"
    
    # ç¬¬ä¸‰æ­¥ï¼šå°è¯•å®‰è£…
    - echo "â¬‡ï¸ å°è¯•å®‰è£…ä¾èµ–..."
    - npm install --dry-run     # æ¨¡æ‹Ÿå®‰è£…ï¼Œä¸å®é™…å®‰è£…
    
    # ç¬¬å››æ­¥ï¼šå®é™…å®‰è£…
    - echo "ğŸ“¥ æ­£å¼å®‰è£…ä¾èµ–..."
    - npm install
    
    # ç¬¬äº”æ­¥ï¼šå°è¯•æ„å»º
    - echo "ğŸ”¨ å°è¯•æ„å»º..."
    - npm run build
```

### 8.4 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ


**ğŸ› ï¸ å®ç”¨è§£å†³æ–¹æ¡ˆï¼š**

â‘ . **ä¾èµ–å®‰è£…å¤±è´¥**
```yaml
fix_dependency_issues:
  script:
    # æ¸…ç†ç¼“å­˜
    - npm cache clean --force
    - rm -rf node_modules package-lock.json
    
    # ä½¿ç”¨è¾ƒè€çš„npmç‰ˆæœ¬
    - npm install -g npm@8
    
    # é€ä¸ªå®‰è£…ä¾èµ–
    - npm install --prefer-offline --no-audit
```

â‘¡. **å†…å­˜ä¸è¶³é”™è¯¯**
```yaml
fix_memory_issues:
  variables:
    NODE_OPTIONS: "--max-old-space-size=4096"  # å¢åŠ å†…å­˜é™åˆ¶
  script:
    - npm run build
```

â‘¢. **æƒé™é—®é¢˜**
```yaml
fix_permission_issues:
  before_script:
    # ä¿®å¤æƒé™
    - chmod +x scripts/build.sh
    - chown -R $(whoami) .
  script:
    - ./scripts/build.sh
```

---

## 9. â±ï¸ æ„å»ºæ—¶é—´ä¼˜åŒ–


### 9.1 æ„å»ºæ—¶é—´åˆ†æ


**ä¸ºä»€ä¹ˆè¦ä¼˜åŒ–æ„å»ºæ—¶é—´ï¼Ÿ**

```
ç±»æ¯”ç†è§£ï¼š
é¤å…æ•ˆç‡ä¼˜åŒ–ï¼š
- å®¢æˆ·ç­‰å¾…æ—¶é—´çŸ­ â†’ ä½“éªŒå¥½ï¼Œå›å¤´å®¢å¤š
- å‡ºèœé€Ÿåº¦å¿« â†’ ç¿»å°ç‡é«˜ï¼Œæ”¶å…¥å¢åŠ 

CI/CDæ•ˆç‡ä¼˜åŒ–ï¼š
- æ„å»ºæ—¶é—´çŸ­ â†’ å¼€å‘åé¦ˆå¿«ï¼Œæ•ˆç‡é«˜
- èµ„æºæ¶ˆè€—å°‘ â†’ æˆæœ¬é™ä½ï¼Œå®¹é‡å¢åŠ 
```

**æ„å»ºæ—¶é—´ç»„æˆåˆ†æï¼š**
```
æ€»æ„å»ºæ—¶é—´ = ç¯å¢ƒå‡†å¤‡ + ä¾èµ–å®‰è£… + ä»£ç ç¼–è¯‘ + æµ‹è¯•è¿è¡Œ + äº§ç‰©ç”Ÿæˆ

å…¸å‹æ—¶é—´åˆ†å¸ƒï¼š
ç¯å¢ƒå‡†å¤‡ï¼š30ç§’ - 1åˆ†é’Ÿ
ä¾èµ–å®‰è£…ï¼š2åˆ†é’Ÿ - 5åˆ†é’Ÿ    â† ä¼˜åŒ–é‡ç‚¹
ä»£ç ç¼–è¯‘ï¼š1åˆ†é’Ÿ - 3åˆ†é’Ÿ    â† ä¼˜åŒ–é‡ç‚¹  
æµ‹è¯•è¿è¡Œï¼š30ç§’ - 2åˆ†é’Ÿ
äº§ç‰©ç”Ÿæˆï¼š30ç§’ - 1åˆ†é’Ÿ
```

### 9.2 å¹¶è¡ŒåŒ–æ„å»ºç­–ç•¥


**å¹¶è¡Œæ„å»º**ï¼šå¤šä¸ªä»»åŠ¡åŒæ—¶è¿›è¡Œï¼Œå°±åƒå¤šä¸ªå¨å¸ˆä¸€èµ·åšèœ

**åŸºç¡€å¹¶è¡Œé…ç½®ï¼š**
```yaml
# å¹¶è¡Œè¿è¡Œçš„æ„å»ºä»»åŠ¡
stages:
  - build
  - test
  - package

# å‰ç«¯èµ„æºæ„å»º
build_frontend:
  stage: build
  script:
    - npm run build:frontend
  artifacts:
    paths:
      - dist/frontend/

# åç«¯APIæ„å»º  
build_backend:
  stage: build
  script:
    - mvn compile
  artifacts:
    paths:
      - target/classes/

# è¿™ä¸¤ä¸ªä»»åŠ¡ä¼šåŒæ—¶è¿è¡Œï¼
```

**åˆ†ç»„å¹¶è¡Œæ„å»ºï¼š**
```yaml
# æŒ‰åŠŸèƒ½æ¨¡å—å¹¶è¡Œæ„å»º
build_user_module:
  stage: build
  script:
    - cd modules/user && npm run build
  artifacts:
    paths:
      - modules/user/dist/

build_order_module:
  stage: build  
  script:
    - cd modules/order && npm run build
  artifacts:
    paths:
      - modules/order/dist/

build_payment_module:
  stage: build
  script:
    - cd modules/payment && npm run build
  artifacts:
    paths:
      - modules/payment/dist/

# ä¸‰ä¸ªæ¨¡å—åŒæ—¶æ„å»ºï¼Œæ—¶é—´ç¼©çŸ­3å€ï¼
```

### 9.3 æ„å»ºä¼˜åŒ–æŠ€å·§


**ğŸš€ å®ç”¨ä¼˜åŒ–æ–¹æ³•ï¼š**

â‘ . **ä½¿ç”¨è½»é‡çº§é•œåƒ**
```yaml
# ä¼˜åŒ–å‰ï¼šä½¿ç”¨å®Œæ•´é•œåƒ
build_slow:
  image: ubuntu:20.04           # 700MB+
  before_script:
    - apt-get update
    - apt-get install -y nodejs npm

# ä¼˜åŒ–åï¼šä½¿ç”¨ä¸“ç”¨é•œåƒ  
build_fast:
  image: node:16-alpine         # 40MBï¼Œå¯åŠ¨å¿«10å€
  script:
    - npm run build
```

â‘¡. **ä¼˜åŒ–ä¾èµ–å®‰è£…**
```yaml
build_optimized:
  cache:
    paths:
      - node_modules/
      - .npm/
  script:
    # ä½¿ç”¨npm ciè€Œä¸æ˜¯npm installï¼ˆå¿«30%ï¼‰
    - npm ci --prefer-offline
    
    # è·³è¿‡ä¸å¿…è¦çš„æ­¥éª¤
    - npm run build --silent    # å‡å°‘æ—¥å¿—è¾“å‡º
```

â‘¢. **å¢é‡æ„å»º**
```yaml
incremental_build:
  script:
    # åªæ„å»ºæ”¹å˜çš„æ–‡ä»¶
    - npm run build:incremental
    
    # ä½¿ç”¨webpackç¼“å­˜
    - npm run build -- --cache-type filesystem
```

### 9.4 æ€§èƒ½ç›‘æ§ä¸åˆ†æ


**æ„å»ºæ€§èƒ½ç»Ÿè®¡ï¼š**
```yaml
build_with_timing:
  before_script:
    - start_total=$(date +%s)
    
  script:
    # ä¾èµ–å®‰è£…è®¡æ—¶
    - start_deps=$(date +%s)
    - npm ci
    - end_deps=$(date +%s)
    - echo "ğŸ“¦ ä¾èµ–å®‰è£…è€—æ—¶ï¼š$((end_deps - start_deps))ç§’"
    
    # æ„å»ºè®¡æ—¶
    - start_build=$(date +%s)
    - npm run build
    - end_build=$(date +%s)
    - echo "ğŸ”¨ ä»£ç æ„å»ºè€—æ—¶ï¼š$((end_build - start_build))ç§’"
    
  after_script:
    - end_total=$(date +%s)
    - echo "â±ï¸ æ€»è®¡è€—æ—¶ï¼š$((end_total - start_total))ç§’"
    
    # ä¿å­˜æ€§èƒ½æ•°æ®
    - echo "$((end_total - start_total))" > build_time.txt
  
  artifacts:
    reports:
      junit: build_time.txt
```

**ğŸ¯ ä¼˜åŒ–ç›®æ ‡è®¾å®šï¼š**
- **å°å‹é¡¹ç›®**ï¼šæ€»æ„å»ºæ—¶é—´ < 2åˆ†é’Ÿ
- **ä¸­å‹é¡¹ç›®**ï¼šæ€»æ„å»ºæ—¶é—´ < 5åˆ†é’Ÿ  
- **å¤§å‹é¡¹ç›®**ï¼šæ€»æ„å»ºæ—¶é—´ < 10åˆ†é’Ÿ

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ„å»ºåŸºç¡€ï¼šæ„å»ºæ˜¯æŠŠæºä»£ç å˜æˆå¯ç”¨ç¨‹åºçš„è¿‡ç¨‹
ğŸ”¸ ç¯å¢ƒå‡†å¤‡ï¼šé€‰æ‹©åˆé€‚çš„Dockeré•œåƒï¼Œå®‰è£…å¿…è¦å·¥å…·
ğŸ”¸ ä¾èµ–ç®¡ç†ï¼šæ­£ç¡®å®‰è£…å’Œç¼“å­˜é¡¹ç›®ä¾èµ–åŒ…
ğŸ”¸ è„šæœ¬ç¼–å†™ï¼šæŒ‰æ­¥éª¤ç¼–å†™æ„å»ºå‘½ä»¤ï¼ŒåŒ…å«é”™è¯¯å¤„ç†
ğŸ”¸ äº§ç‰©ç®¡ç†ï¼šä¿å­˜æ„å»ºç»“æœï¼Œè®¾ç½®åˆç†çš„ä¿å­˜æœŸé™
ğŸ”¸ å¤šç¯å¢ƒé…ç½®ï¼šé’ˆå¯¹å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒçš„å·®å¼‚åŒ–æ„å»º
ğŸ”¸ ç¼“å­˜ä¼˜åŒ–ï¼šç¼“å­˜ä¾èµ–å’Œæ„å»ºç»“æœï¼Œå¤§å¹…æå‡æ„å»ºé€Ÿåº¦
ğŸ”¸ é—®é¢˜è°ƒè¯•ï¼šå¿«é€Ÿå®šä½æ„å»ºå¤±è´¥åŸå› ï¼ŒæŒæ¡è°ƒè¯•æŠ€å·§
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ„å»ºé…ç½®çš„æ€ç»´æ–¹å¼**
```
æŠŠæ„å»ºæƒ³è±¡æˆå·¥å‚ç”Ÿäº§æµç¨‹ï¼š
1. å‡†å¤‡è½¦é—´ï¼ˆç¯å¢ƒå‡†å¤‡ï¼‰
2. å‡†å¤‡åŸæ–™ï¼ˆä¾èµ–å®‰è£…ï¼‰  
3. æŒ‰å·¥è‰ºç”Ÿäº§ï¼ˆæ‰§è¡Œæ„å»ºï¼‰
4. è´¨é‡æ£€æŸ¥ï¼ˆéªŒè¯ç»“æœï¼‰
5. åŒ…è£…å‡ºåº“ï¼ˆä¿å­˜äº§ç‰©ï¼‰

æ¯ä¸ªç¯èŠ‚éƒ½è¦è€ƒè™‘æ•ˆç‡å’Œè´¨é‡å¹³è¡¡
```

**ğŸ”¹ ä¸åŒç¯å¢ƒçš„å·®å¼‚å¤„ç†**
```
å¼€å‘ç¯å¢ƒï¼šå¿«é€Ÿåé¦ˆï¼ŒåŒ…å«è°ƒè¯•ä¿¡æ¯
æµ‹è¯•ç¯å¢ƒï¼šæ¥è¿‘ç”Ÿäº§ï¼Œä½†å¯ä»¥æœ‰æ›´å¤šæ—¥å¿—
ç”Ÿäº§ç¯å¢ƒï¼šæ€§èƒ½æœ€ä¼˜ï¼Œå®‰å…¨æ€§æœ€é«˜

å°±åƒç»™ä¸åŒçš„äººåšèœï¼Œè¦æ ¹æ®éœ€æ±‚è°ƒæ•´
```

**ğŸ”¹ ä¼˜åŒ–ç­–ç•¥çš„é€‰æ‹©**
```
ä¼˜åŒ–ä¼˜å…ˆçº§ï¼š
1. ç¼“å­˜ç­–ç•¥ï¼ˆå½±å“æœ€å¤§ï¼Œå®ç°ç®€å•ï¼‰
2. å¹¶è¡Œæ„å»ºï¼ˆé€‚åˆå¤æ‚é¡¹ç›®ï¼‰ 
3. ç¯å¢ƒä¼˜åŒ–ï¼ˆåŸºç¡€ä¼˜åŒ–ï¼‰
4. å¢é‡æ„å»ºï¼ˆé«˜çº§æŠ€å·§ï¼‰

å…ˆåšå½±å“å¤§ã€å®¹æ˜“å®ç°çš„ä¼˜åŒ–
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ é¡¹ç›®åº”ç”¨åœºæ™¯ï¼š**
- **ä¸ªäººé¡¹ç›®**ï¼šç†è§£åŸºç¡€æ„å»ºæµç¨‹ï¼ŒæŒæ¡ç®€å•é…ç½®
- **å›¢é˜Ÿåä½œ**ï¼šç»Ÿä¸€æ„å»ºç¯å¢ƒï¼Œé¿å…"åœ¨æˆ‘æœºå™¨ä¸Šå¯ä»¥è¿è¡Œ"é—®é¢˜  
- **ä¼ä¸šåº”ç”¨**ï¼šå¤šç¯å¢ƒç®¡ç†ï¼Œè‡ªåŠ¨åŒ–è´¨é‡ä¿è¯
- **å¤§å‹ç³»ç»Ÿ**ï¼šæ€§èƒ½ä¼˜åŒ–ï¼Œæå‡å›¢é˜Ÿå¼€å‘æ•ˆç‡

**ğŸ”§ èƒ½åŠ›æå‡è·¯å¾„ï¼š**
- **æ–°æ‰‹é˜¶æ®µ**ï¼šæŒæ¡åŸºç¡€é…ç½®ï¼Œèƒ½æˆåŠŸæ„å»ºç®€å•é¡¹ç›®
- **è¿›é˜¶é˜¶æ®µ**ï¼šç†è§£å¤šç¯å¢ƒå·®å¼‚ï¼Œä¼šä¼˜åŒ–æ„å»ºæ€§èƒ½
- **é«˜çº§é˜¶æ®µ**ï¼šè®¾è®¡å¤æ‚æ„å»ºæµç¨‹ï¼Œè§£å†³å„ç§æ„å»ºé—®é¢˜

### 10.4 æœ€ä½³å®è·µæ€»ç»“


**ğŸ“ é…ç½®åŸåˆ™ï¼š**
- âœ… **æ¸è¿›å¼é…ç½®**ï¼šä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚åº¦
- âœ… **ç¯å¢ƒä¸€è‡´æ€§**ï¼šå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒå°½å¯èƒ½æ¥è¿‘
- âœ… **é”™è¯¯å¤„ç†**ï¼šé¢„æœŸå¯èƒ½çš„å¤±è´¥ï¼Œæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
- âœ… **æ€§èƒ½ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥æ„å»ºæ—¶é—´ï¼ŒæŒç»­ä¼˜åŒ–

**ğŸš¨ å¸¸è§é™·é˜±é¿å…ï¼š**
- âŒ **è¿‡åº¦ä¼˜åŒ–**ï¼šä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œç‰ºç‰²ç¨³å®šæ€§
- âŒ **å¿½ç•¥ç¼“å­˜**ï¼šç¼“å­˜æ˜¯æœ€æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µ
- âŒ **ç¯å¢ƒå·®å¼‚**ï¼šç¡®ä¿æ‰€æœ‰ç¯å¢ƒä½¿ç”¨ç›¸åŒçš„æ„å»ºé…ç½®
- âŒ **æ—¥å¿—ç¼ºå¤±**ï¼šæ„å»ºå¤±è´¥æ—¶è¦æœ‰è¶³å¤Ÿçš„è°ƒè¯•ä¿¡æ¯

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç¯å¢ƒå…ˆå‡†å¤‡ï¼Œä¾èµ–è£…æ•´é½
- è„šæœ¬å†™æ¸…æ¥šï¼Œäº§ç‰©è¦ä¿å­˜  
- å¤šç¯å¢ƒé…ç½®ï¼Œç¼“å­˜ææ•ˆç‡
- é—®é¢˜ä¼šè°ƒè¯•ï¼Œä¼˜åŒ–é™æ—¶é—´

**æœ€ç»ˆç›®æ ‡**ï¼šè®©æ„å»ºè¿‡ç¨‹ç¨³å®šã€å¿«é€Ÿã€å¯é ï¼Œæˆä¸ºå¼€å‘å›¢é˜Ÿçš„æ•ˆç‡åŠ©æ‰‹è€Œä¸æ˜¯è´Ÿæ‹…ï¼