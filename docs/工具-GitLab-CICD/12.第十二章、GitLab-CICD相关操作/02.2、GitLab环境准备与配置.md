---
title: 2、GitLab环境准备与配置
---
## 📚 目录

1. [GitLab实例访问与登录](#1-gitlab实例访问与登录)
2. [项目创建与权限设置](#2-项目创建与权限设置)
3. [SSH密钥配置与管理](#3-ssh密钥配置与管理)
4. [Personal Access Token创建](#4-personal-access-token创建)
5. [项目成员角色权限](#5-项目成员角色权限)
6. [仓库克隆与推送验证](#6-仓库克隆与推送验证)
7. [GitLab界面基础导航](#7-gitlab界面基础导航)
8. [项目设置基础配置](#8-项目设置基础配置)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🌐 GitLab实例访问与登录


### 1.1 什么是GitLab实例


**通俗理解**：GitLab实例就像是你的代码仓库"大楼"，每个公司或组织都可以有自己的"大楼"。

```
想象一下：
🏢 GitLab.com → 官方提供的公共"大楼"（免费使用）
🏢 公司内部GitLab → 公司自建的私有"大楼"（更安全）
🏢 学校GitLab → 学校提供的教育"大楼"（学习专用）
```

### 1.2 常见GitLab实例类型


| 类型 | **地址示例** | **特点** | **适用场景** |
|------|-------------|---------|-------------|
| 🌍 **官方实例** | `https://gitlab.com` | `免费、公开、功能完整` | `个人学习、开源项目` |
| 🏢 **企业私有** | `https://gitlab.company.com` | `内网访问、安全性高` | `公司项目、商业代码` |
| 🎓 **教育机构** | `https://gitlab.school.edu` | `学习环境、老师管理` | `课程作业、学习项目` |

### 1.3 登录前的准备工作


**🔸 第一步：确认访问地址**
- 问清楚你要用的是哪个GitLab地址
- 确保网络能正常访问（有些公司内网需要VPN）

**🔸 第二步：准备登录凭据**
```
账号密码登录：
✅ 用户名或邮箱
✅ 密码

第三方登录（如果支持）：
✅ Google账号
✅ GitHub账号
✅ LDAP企业账号
```

### 1.4 登录操作步骤


**Step 1. 打开浏览器访问GitLab**
```
在浏览器地址栏输入：https://gitlab.com
（或你公司提供的GitLab地址）
```

**Step 2. 点击登录按钮**
- 页面右上角找到 **Sign in** 按钮
- 如果是新用户，点击 **Register** 注册

**Step 3. 输入登录信息**
```
📧 邮箱/用户名：your.email@example.com
🔐 密码：你设置的密码
```

> 💡 **新手提示**  
> 如果忘记密码，点击"Forgot your password?"重置密码，邮箱会收到重置链接

**Step 4. 验证登录**
- 有些实例会要求二次验证（2FA）
- 输入手机短信验证码或验证器APP的代码

---

## 2. 📁 项目创建与权限设置


### 2.1 什么是GitLab项目


**简单理解**：GitLab项目就像是你的**代码文件夹**，里面存放你的代码、文档和配置文件。

```
现实中的文件夹：              GitLab项目：
📁 我的网站项目                🗂️ my-website-project
├── 📄 index.html             ├── 📄 index.html  
├── 📄 style.css              ├── 📄 style.css
├── 📁 images/                ├── 📁 images/
└── 📄 README.md              └── 📄 README.md

区别：GitLab项目有版本控制、团队协作、自动化部署等功能
```

### 2.2 创建新项目的步骤


**🔸 方法一：从头创建空项目**

1. **点击新建项目**
   - 登录后点击右上角的 ➕ 号
   - 选择 **New project**

2. **选择创建方式**
   - 选择 **Create blank project**（创建空白项目）

3. **填写项目信息**
   ```
   📝 项目名称：my-first-project（英文，用连字符）
   📝 项目描述：我的第一个GitLab项目（可选）
   👁️ 可见性：Private（私有，只有你能看到）
   ```

4. **初始化选项**
   - ✅ **Initialize repository with a README**（建议勾选）
   - 这样项目创建后就有一个说明文件

**🔸 方法二：从模板创建**

```
适合场景：
🎯 Vue项目 → 选择Vue模板
🎯 React项目 → 选择React模板  
🎯 静态网站 → 选择Static Site模板
```

### 2.3 项目可见性权限详解


| 权限类型 | **图标** | **含义** | **谁能看到** |
|---------|---------|---------|-------------|
| 🔒 **Private** | `私有` | `完全保密` | `只有项目成员` |
| 👥 **Internal** | `内部` | `组织内可见` | `同公司/组织的人` |
| 🌍 **Public** | `公开` | `全世界可见` | `任何人都能看到` |

> ⚠️ **新手注意**  
> 刚开始学习建议选择 **Private**，避免代码被外人看到。等熟练后再考虑公开项目。

### 2.4 项目权限的实际意义


**🔸 Private项目适合：**
- 🏢 公司商业项目
- 🎓 学习练习项目
- 🔐 包含敏感信息的项目

**🔸 Public项目适合：**
- 📚 开源学习项目
- 🎯 展示作品集
- 🤝 希望别人贡献代码的项目

---

## 3. 🔑 SSH密钥配置与管理


### 3.1 什么是SSH密钥


**通俗比喻**：SSH密钥就像是你家的**钥匙**，有了它你就能安全地进出GitLab"仓库"，而不需要每次都输入密码。

```
传统密码验证：              SSH密钥验证：
你：我是张三，密码是123456     你：这是我的专属钥匙🔑
GitLab：验证密码...正确!     GitLab：验证钥匙...是张三的!

优势对比：
密码 ❌ 容易被盗、需要记忆    SSH ✅ 更安全、自动验证
```

### 3.2 SSH密钥的工作原理


**🔸 密钥对概念**
```
SSH密钥 = 公钥 + 私钥

🔐 私钥（Private Key）：
- 存在你的电脑上
- 绝对不能给别人
- 就像你口袋里的钥匙

🔓 公钥（Public Key）：  
- 上传到GitLab
- 可以公开分享
- 就像你家门上的锁
```

### 3.3 生成SSH密钥步骤


**🔸 检查是否已有SSH密钥**

打开终端（Windows用Git Bash），输入：
```bash
ls -la ~/.ssh
```

如果看到类似这样的文件，说明已经有密钥了：
```
id_rsa          # 私钥文件
id_rsa.pub      # 公钥文件
```

**🔸 生成新的SSH密钥**

如果没有密钥，运行下面命令生成：
```bash
ssh-keygen -t rsa -b 4096 -C "your.email@example.com"
```

解释各部分含义：
- `ssh-keygen`：生成密钥的命令
- `-t rsa`：使用RSA加密算法
- `-b 4096`：密钥长度4096位（更安全）
- `-C "邮箱"`：添加邮箱标识

**🔸 生成过程中的选择**
```
Enter file in which to save the key: 
直接按回车（使用默认路径）

Enter passphrase: 
可以设置密码，也可以直接回车（空密码）
```

### 3.4 将SSH公钥添加到GitLab


**Step 1. 复制公钥内容**
```bash
cat ~/.ssh/id_rsa.pub
```
复制输出的全部内容（从ssh-rsa开始到邮箱结束）

**Step 2. 在GitLab中添加**
1. 登录GitLab → 点击右上角头像
2. 选择 **Preferences**（首选项）  
3. 左侧菜单点击 **SSH Keys**
4. 将复制的公钥粘贴到 **Key** 框中
5. **Title** 可以写：`我的电脑` 或 `MacBook Pro`
6. 点击 **Add key** 添加

### 3.5 验证SSH配置是否成功


```bash
ssh -T git@gitlab.com
```

成功的话会显示：
```
Welcome to GitLab, @your-username!
```

> 💡 **常见问题解决**  
> 如果提示 `Permission denied`，检查：
> - 公钥是否正确复制
> - GitLab中是否成功添加
> - 邮箱是否匹配

---

## 4. 🎟️ Personal Access Token创建


### 4.1 什么是Personal Access Token


**通俗理解**：Personal Access Token（个人访问令牌）就像是给程序用的**临时通行证**，当你的程序需要访问GitLab时，用这个令牌代替密码。

```
使用场景对比：

人工操作：                    程序自动化：
👤 浏览器登录用密码           🤖 CI/CD脚本用Token
👤 Git命令行用SSH密钥         🤖 API调用用Token
👤 手动下载代码              🤖 自动部署用Token
```

### 4.2 Token vs 密码的区别


| 特点 | **密码** | **Token** |
|------|---------|----------|
| 🔐 **安全性** | `泄露风险高` | `可设置权限范围` |
| ⏰ **有效期** | `永久有效` | `可设置过期时间` |
| 🔄 **更换** | `影响所有应用` | `单独撤销，不影响其他` |
| 👀 **可见性** | `不能查看` | `可以管理多个Token` |

### 4.3 创建Personal Access Token步骤


**Step 1. 进入Token管理页面**
1. 登录GitLab → 点击右上角头像
2. 选择 **Preferences**（首选项）
3. 左侧菜单点击 **Access Tokens**

**Step 2. 填写Token信息**
```
📝 Token名称：CI_CD_Pipeline
📅 过期时间：2024-12-31（建议设置过期时间）
🔐 权限范围：根据用途选择
```

### 4.4 Token权限范围详解


**🔸 常用权限说明**

- ✅ **read_repository**：读取代码仓库
  - *用途*：下载代码、查看提交历史
  - *适合*：只需要获取代码的场景

- ✅ **write_repository**：写入代码仓库  
  - *用途*：推送代码、创建分支
  - *适合*：自动化提交、版本发布

- ✅ **read_api**：读取API
  - *用途*：获取项目信息、查看Issues
  - *适合*：监控脚本、数据统计

- ✅ **api**：完整API权限
  - *用途*：创建项目、管理用户、全功能操作
  - *适合*：管理员脚本、完整自动化

> ⚠️ **权限最小化原则**  
> 只给Token真正需要的权限，降低安全风险

**Step 3. 生成并保存Token**
1. 点击 **Create personal access token**
2. ⚠️ **立即复制Token值**（只显示一次！）
3. 保存到安全的地方（密码管理器或笔记）

### 4.5 Token的使用方法


**🔸 在Git命令中使用**
```bash
# 克隆项目时使用Token
git clone https://oauth2:your-token@gitlab.com/username/project.git

# 或者设置为环境变量
export GITLAB_TOKEN="your-token-here"
```

**🔸 在CI/CD中使用**
- 将Token设置为项目的环境变量
- 脚本中引用 `$GITLAB_TOKEN`

---

## 5. 👥 项目成员角色权限


### 5.1 为什么需要角色权限


**现实生活类比**：
```
公司项目团队：              GitLab项目角色：
👑 项目经理 → 决策权         🔧 Owner → 完全控制权
👔 技术主管 → 技术决策        🛠️ Maintainer → 维护权限  
💻 程序员 → 写代码           📝 Developer → 开发权限
👀 测试员 → 测试代码         👁️ Reporter → 查看权限
🎓 实习生 → 学习观摩         👤 Guest → 基础访问
```

### 5.2 GitLab角色权限详解


| 角色 | **能做什么** | **不能做什么** | **适合人群** |
|------|-------------|---------------|-------------|
| 🔧 **Owner** | `一切操作，包括删除项目` | `无限制` | `项目负责人、管理员` |
| 🛠️ **Maintainer** | `管理分支、合并请求、发布` | `删除项目` | `技术负责人、Team Lead` |
| 📝 **Developer** | `推送代码、创建分支` | `删除分支、修改设置` | `程序员、开发者` |
| 👁️ **Reporter** | `查看代码、下载项目` | `修改任何内容` | `测试员、产品经理` |
| 👤 **Guest** | `查看公开内容、评论` | `查看代码` | `外部用户、临时访问` |

### 5.3 添加项目成员步骤


**Step 1. 进入项目设置**
1. 打开项目页面
2. 左侧菜单点击 **Settings**
3. 选择 **Members**（成员管理）

**Step 2. 邀请新成员**
```
👤 用户名/邮箱：输入同事的GitLab用户名或邮箱
🎭 角色选择：根据职责选择合适角色
📅 过期时间：可选，临时访问可设置过期
```

**Step 3. 发送邀请**
- 点击 **Invite** 发送邀请
- 被邀请人会收到邮件通知
- 接受邀请后即可访问项目

### 5.4 权限管理最佳实践


**🔸 新手指导原则**
```
刚入职：先给 Reporter 权限，熟悉项目
开始开发：升级到 Developer 权限
技术成熟：考虑 Maintainer 权限
项目负责：设置为 Owner
```

**🔸 权限安全建议**
- ✅ 定期检查成员列表，移除离职人员
- ✅ 临时访问设置过期时间
- ✅ 敏感项目限制Guest权限
- ✅ 记录权限变更原因

---

## 6. 📥 仓库克隆与推送验证


### 6.1 什么是仓库克隆


**通俗理解**：克隆就像是把GitLab上的项目**复制一份**到你的电脑上，这样你就能在本地修改代码了。

```
GitLab服务器：              你的电脑：
🏢 项目仓库                📱 本地副本
├── 📄 代码文件      克隆    ├── 📄 代码文件
├── 📁 文件夹        →     ├── 📁 文件夹  
└── 📚 提交历史            └── 📚 提交历史

同步关系：你改了本地代码后，可以"推送"回GitLab
```

### 6.2 克隆方法选择


**🔸 HTTPS克隆（简单，适合新手）**
```bash
git clone https://gitlab.com/username/project.git
```
- ✅ 配置简单，不需要SSH密钥
- ❌ 每次推送需要输入用户名密码

**🔸 SSH克隆（推荐，更安全）**
```bash
git clone git@gitlab.com:username/project.git
```
- ✅ 配置SSH密钥后无需每次输入密码
- ✅ 更安全，不会泄露密码
- ❌ 初始配置相对复杂

### 6.3 克隆操作详细步骤


**Step 1. 获取克隆地址**
1. 打开GitLab项目页面
2. 点击蓝色的 **Clone** 按钮
3. 复制 **Clone with SSH** 或 **Clone with HTTPS** 地址

**Step 2. 选择本地存储位置**
```bash
# 进入你想存放项目的文件夹
cd /Users/yourname/Documents/Projects

# 或者Windows系统
cd C:\Users\yourname\Documents\Projects
```

**Step 3. 执行克隆命令**
```bash
git clone git@gitlab.com:username/my-project.git
```

**Step 4. 进入项目文件夹**
```bash
cd my-project
ls -la  # 查看项目文件
```

### 6.4 推送验证测试


**🔸 创建测试文件**
```bash
# 创建一个测试文件
echo "这是我的第一次提交" > test.txt
```

**🔸 提交到本地仓库**
```bash
# 添加文件到暂存区
git add test.txt

# 提交到本地仓库
git commit -m "添加测试文件"
```

**🔸 推送到GitLab**
```bash
# 推送到远程仓库
git push origin main
```

> 💡 **成功标志**  
> 如果推送成功，你会在GitLab项目页面看到新的test.txt文件

### 6.5 常见问题与解决


**🔸 问题：权限被拒绝**
```
错误信息：Permission denied (publickey)
解决方法：检查SSH密钥配置是否正确
```

**🔸 问题：找不到仓库**
```
错误信息：Repository not found
解决方法：
1. 检查项目地址是否正确
2. 确认你有项目访问权限
3. 检查项目是否为Private
```

**🔸 问题：用户名密码错误**
```
解决方法：
1. 检查GitLab用户名和密码
2. 考虑使用SSH方式
3. 或者使用Personal Access Token
```

---

## 7. 🧭 GitLab界面基础导航


### 7.1 GitLab主要界面布局


**🔸 顶部导航栏**
```
GitLab界面结构：
┌─────────────────────────────────────────────────────────┐
│ 🏠首页  📁项目  👥群组  🔍搜索  ➕新建  👤用户菜单        │
├─────────────────────────────────────────────────────────┤
│                    主要内容区域                         │
│  ┌─────────────┐  ┌─────────────────────────────────┐  │
│  │    左侧     │  │           中央内容              │  │
│  │   菜单栏    │  │          显示区域               │  │
│  │            │  │                                │  │
│  └─────────────┘  └─────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

### 7.2 项目页面核心功能区


**🔸 项目主页关键元素**

- 📊 **项目概览**：项目名称、描述、统计信息
- 🌿 **分支切换**：查看不同分支的代码
- 📁 **文件浏览器**：查看项目文件结构
- 📝 **README显示**：项目说明文档

**🔸 左侧菜单详解**

| 菜单项 | **图标** | **用途** | **适合新手程度** |
|--------|---------|---------|-----------------|
| 📊 **Project overview** | `概览` | `查看项目基本信息` | ⭐⭐⭐ 必须掌握 |
| 📁 **Repository** | `仓库` | `浏览代码、提交历史` | ⭐⭐⭐ 必须掌握 |
| 🔀 **Merge requests** | `合并请求` | `代码审查、团队协作` | ⭐⭐ 逐步学习 |
| 🚀 **CI/CD** | `流水线` | `自动化构建部署` | ⭐⭐ 重点关注 |
| 📝 **Issues** | `问题` | `Bug跟踪、任务管理` | ⭐⭐ 实用功能 |
| ⚙️ **Settings** | `设置` | `项目配置管理` | ⭐ 管理员功能 |

### 7.3 新手必掌握的界面操作


**🔸 查看项目代码**
1. 点击左侧 **Repository** → **Files**
2. 点击文件名可以查看文件内容
3. 点击文件夹可以进入子目录

**🔸 查看提交历史**  
1. 点击左侧 **Repository** → **Commits**
2. 可以看到所有代码提交记录
3. 点击提交可以查看具体改动

**🔸 切换分支**
1. 项目页面顶部有分支下拉菜单
2. 默认显示 `main` 或 `master` 分支
3. 点击可以切换到其他分支查看

---

## 8. ⚙️ 项目设置基础配置


### 8.1 项目设置入口与权限


**🔸 如何进入项目设置**
1. 打开项目页面
2. 左侧菜单最下方点击 **Settings**
3. 需要 **Maintainer** 或以上权限才能修改

> ⚠️ **权限提醒**  
> 如果你看不到Settings菜单，说明你的权限不够。联系项目管理员提升权限。

### 8.2 基础信息设置


**🔸 项目基本信息配置**

**项目名称与描述**
```
📝 项目名称：my-awesome-website
📝 项目路径：/username/my-awesome-website（自动生成）
📝 项目描述：这是我的第一个网站项目
🏷️ 项目标签：website, learning, vue
```

**可见性级别调整**
- 🔒 **Private**：只有团队成员可见
- 👥 **Internal**：组织内部可见  
- 🌍 **Public**：所有人可见

> 💡 **何时调整可见性**  
> - 学习项目：建议保持Private
> - 开源贡献：可以设为Public
> - 公司项目：通常设为Private或Internal

### 8.3 仓库设置配置


**🔸 默认分支设置**
```
主分支选择：
✅ main（推荐，现代标准）
✅ master（传统命名）
✅ develop（开发主分支）
```

**🔸 保护分支规则**
- 🛡️ **推送规则**：谁可以直接推送到主分支
- 🔍 **合并要求**：是否需要代码审查
- 🚫 **删除保护**：防止意外删除重要分支

### 8.4 CI/CD设置基础


**🔸 Runners配置**
- **Shared Runners**：GitLab提供的公共运行器
- **Specific Runners**：项目专用的运行器
- **Group Runners**：组织共享的运行器

**🔸 环境变量设置**
```
常用环境变量示例：
🔐 DATABASE_URL：数据库连接地址
🔑 API_SECRET_KEY：API密钥
🌍 NODE_ENV：运行环境（development/production）
```

> 🔒 **安全提示**  
> 敏感信息（密码、密钥）记得勾选 "Masked" 选项，避免在日志中显示

### 8.5 通知与集成设置


**🔸 通知设置**
- 📧 **邮件通知**：推送、合并请求、Issues更新
- 🔔 **Webhook**：与外部系统集成
- 💬 **Slack集成**：团队消息推送

**🔸 集成服务配置**
- 🐛 **Jira**：问题跟踪系统
- 📊 **Monitoring**：性能监控
- 🧪 **External Testing**：外部测试服务

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的基础操作


```
🔸 GitLab环境准备五步法：
1️⃣ 登录GitLab实例
2️⃣ 创建项目并设置权限  
3️⃣ 配置SSH密钥或Token
4️⃣ 克隆项目到本地
5️⃣ 验证推送功能正常
```

### 9.2 关键配置检查清单


**✅ 安全配置**
- [ ] SSH密钥配置完成
- [ ] Personal Access Token创建（如需要）
- [ ] 项目可见性设置合理
- [ ] 环境变量安全设置

**✅ 权限配置**  
- [ ] 团队成员角色分配合理
- [ ] 保护分支规则设置
- [ ] CI/CD权限配置

**✅ 基础功能验证**
- [ ] 能够成功克隆项目
- [ ] 能够推送代码到仓库
- [ ] 界面导航熟悉
- [ ] 基础设置已配置

### 9.3 新手常犯错误与避免方法


**🚫 权限错误**
```
错误：给团队成员过高权限
正确：按职责分配合适权限，从低到高逐步提升
```

**🚫 安全隐患**
```
错误：在代码中硬编码密码、密钥
正确：使用环境变量或GitLab Secret Variables
```

**🚫 配置混乱**
```
错误：SSH和HTTPS混用导致认证问题
正确：选择一种方式并保持一致使用
```

### 9.4 下一步学习方向


**📚 基础巩固**
- 🔧 深入学习Git基础命令
- 📝 练习分支管理和合并操作
- 🤝 了解团队协作流程

**🚀 进阶学习**
- 🔄 GitLab CI/CD流水线配置
- 🐳 Docker容器化部署
- 📊 项目监控和日志分析

**核心记忆口诀**：
- 安全第一配密钥，权限合理不乱给
- 项目设置要仔细，团队协作更轻松
- 基础操作要熟练，为了后续CI/CD铺好路