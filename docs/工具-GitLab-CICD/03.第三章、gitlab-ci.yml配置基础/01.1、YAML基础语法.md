---
title: 1ã€YAMLåŸºç¡€è¯­æ³•
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯YAMLæ–‡ä»¶](#1-ä»€ä¹ˆæ˜¯YAMLæ–‡ä»¶)
2. [YAMLåŸºæœ¬è§„åˆ™](#2-YAMLåŸºæœ¬è§„åˆ™)
3. [ç¼©è¿›ä¸æ ¼å¼è¦æ±‚](#3-ç¼©è¿›ä¸æ ¼å¼è¦æ±‚)
4. [é”®å€¼å¯¹ä¸æ•°ç»„è¯­æ³•](#4-é”®å€¼å¯¹ä¸æ•°ç»„è¯­æ³•)
5. [æ³¨é‡Šä¸å¼•ç”¨è¯­æ³•](#5-æ³¨é‡Šä¸å¼•ç”¨è¯­æ³•)
6. [YAML anchorsé”šç‚¹æœºåˆ¶](#6-YAML-anchorsé”šç‚¹æœºåˆ¶)
7. [å¸¸è§è¯­æ³•é”™è¯¯é¿å‘æŒ‡å—](#7-å¸¸è§è¯­æ³•é”™è¯¯é¿å‘æŒ‡å—)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä»€ä¹ˆæ˜¯YAMLæ–‡ä»¶


### 1.1 YAMLçš„æœ¬è´¨å«ä¹‰


**ğŸ’¡ é€šä¿—ç†è§£**ï¼šYAMLå°±åƒæ˜¯ä¸€ç§**äººç±»å‹å¥½çš„é…ç½®æ¸…å•**

```
æƒ³è±¡ä½ åœ¨å†™è´­ç‰©æ¸…å•ï¼š
- è‹¹æœ
- é¦™è•‰
- ç‰›å¥¶

è¿™å°±æ˜¯YAMLçš„åŸºæœ¬æ€æƒ³ï¼šç®€å•ã€ç›´è§‚ã€æ˜“è¯»
```

**ğŸ“ æ­£å¼å®šä¹‰**ï¼š
- **å…¨ç§°**ï¼šYAML Ain't Markup Languageï¼ˆYAMLä¸æ˜¯æ ‡è®°è¯­è¨€ï¼‰
- **ä½œç”¨**ï¼šç”¨æ¥å†™é…ç½®æ–‡ä»¶çš„ä¸€ç§æ ¼å¼
- **ç‰¹ç‚¹**ï¼šæ¯”XMLç®€å•ï¼Œæ¯”JSONæ˜“è¯»
- **ç”¨é€”**ï¼šGitLab CI/CDç”¨å®ƒæ¥å®šä¹‰è‡ªåŠ¨åŒ–æµç¨‹

### 1.2 ä¸ºä»€ä¹ˆGitLabé€‰æ‹©YAML


```
å¯¹æ¯”å…¶ä»–æ ¼å¼ï¼š

JSONæ ¼å¼ï¼ˆæœºå™¨å‹å¥½ï¼Œäººç±»ä¸å‹å¥½ï¼‰ï¼š
{
  "stages": ["build", "test", "deploy"],
  "build_job": {
    "stage": "build",
    "script": ["echo hello"]
  }
}

YAMLæ ¼å¼ï¼ˆäººç±»å‹å¥½ï¼‰ï¼š
stages:
  - build
  - test
  - deploy

build_job:
  stage: build
  script:
    - echo hello
```

> ğŸ’¡ **å­¦ä¹ æç¤º**
> YAMLå°±åƒå†™å¤§çº²ä¸€æ ·ï¼Œç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œæ¯”JSONæ›´å®¹æ˜“é˜…è¯»å’Œç¼–å†™

---

## 2. ğŸ“‹ YAMLåŸºæœ¬è§„åˆ™


### 2.1 æ ¸å¿ƒè§„åˆ™ä¸€è§ˆ


ğŸ”¸ **åŒºåˆ†å¤§å°å†™**ï¼š`Stage`å’Œ`stage`æ˜¯ä¸åŒçš„
ğŸ”¸ **ç¼©è¿›æ•æ„Ÿ**ï¼šç”¨ç©ºæ ¼ç¼©è¿›è¡¨ç¤ºå±‚çº§ï¼Œ**ä¸èƒ½ç”¨Tab**
ğŸ”¸ **å†’å·åè¦ç©ºæ ¼**ï¼š`key: value`ï¼Œå†’å·åå¿…é¡»æœ‰ç©ºæ ¼
ğŸ”¸ **ç ´æŠ˜å·åè¦ç©ºæ ¼**ï¼š`- item`ï¼Œç ´æŠ˜å·åå¿…é¡»æœ‰ç©ºæ ¼

### 2.2 åŸºæœ¬ç»“æ„è§„å¾‹


```yaml
# YAMLæ–‡ä»¶çš„åŸºæœ¬ç»“æ„å°±åƒè¿™æ ·ï¼š
çˆ¶çº§é…ç½®:           # ç¬¬ä¸€å±‚
  å­çº§é…ç½®: å€¼       # ç¬¬äºŒå±‚ï¼ˆç¼©è¿›2ä¸ªç©ºæ ¼ï¼‰
  å¦ä¸€ä¸ªå­çº§:       # ç¬¬äºŒå±‚
    å­™çº§é…ç½®: å€¼     # ç¬¬ä¸‰å±‚ï¼ˆç¼©è¿›4ä¸ªç©ºæ ¼ï¼‰
```

**ğŸ¯ å®é™…GitLabä¾‹å­**ï¼š
```yaml
stages:              # å®šä¹‰æµæ°´çº¿é˜¶æ®µ
  - build            # æ„å»ºé˜¶æ®µ
  - test             # æµ‹è¯•é˜¶æ®µ
  - deploy           # éƒ¨ç½²é˜¶æ®µ

build_job:           # å®šä¹‰ä¸€ä¸ªä»»åŠ¡
  stage: build       # æŒ‡å®šå±äºbuildé˜¶æ®µ
  script:            # è¦æ‰§è¡Œçš„è„šæœ¬
    - npm install    # å®‰è£…ä¾èµ–
    - npm run build  # æ‰§è¡Œæ„å»º
```

---

## 3. ğŸ“ ç¼©è¿›ä¸æ ¼å¼è¦æ±‚


### 3.1 ç¼©è¿›è§„åˆ™è¯¦è§£


**ğŸ”‘ æ ¸å¿ƒåŸåˆ™**ï¼šåŒä¸€å±‚çº§çš„å†…å®¹å¿…é¡»ä¿æŒç›¸åŒçš„ç¼©è¿›

```yaml
# âœ… æ­£ç¡®çš„ç¼©è¿›ç¤ºä¾‹
variables:
  NODE_VERSION: "16"     # ç¼©è¿›2ä¸ªç©ºæ ¼
  ENV: "production"      # ç¼©è¿›2ä¸ªç©ºæ ¼

cache:
  paths:
    - node_modules/      # ç¼©è¿›4ä¸ªç©ºæ ¼
    - dist/              # ç¼©è¿›4ä¸ªç©ºæ ¼
```

```yaml
# âŒ é”™è¯¯çš„ç¼©è¿›ç¤ºä¾‹
variables:
  NODE_VERSION: "16"     # 2ä¸ªç©ºæ ¼
   ENV: "production"     # 3ä¸ªç©ºæ ¼ï¼ˆä¸ä¸€è‡´ï¼ï¼‰

cache:
  paths:
    - node_modules/      # 4ä¸ªç©ºæ ¼
     - dist/             # 5ä¸ªç©ºæ ¼ï¼ˆä¸ä¸€è‡´ï¼ï¼‰
```

### 3.2 ç©ºæ ¼ vs Tabçš„é‡è¦æ€§


```
Tabå­—ç¬¦é—®é¢˜æ¼”ç¤ºï¼š

çœ‹èµ·æ¥ä¸€æ ·ï¼š
  key: value
  key: value

å®é™…ä¸Šï¼š
Â·Â·key: value          # 2ä¸ªç©ºæ ¼
â†’ key: value          # 1ä¸ªTabå­—ç¬¦

YAMLè§£æå™¨ä¼šæŠ¥é”™ï¼
```

> âš ï¸ **é‡è¦æé†’**
> æ°¸è¿œä½¿ç”¨ç©ºæ ¼ï¼Œä¸è¦ä½¿ç”¨Tabï¼å¤§å¤šæ•°ç¼–è¾‘å™¨å¯ä»¥è®¾ç½®"æ˜¾ç¤ºç©ºç™½å­—ç¬¦"æ¥æ£€æŸ¥

### 3.3 æ¨èçš„ç¼©è¿›æ ‡å‡†


| å±‚çº§ | ç¼©è¿›ç©ºæ ¼æ•° | ç¤ºä¾‹ç”¨é€” |
|------|-----------|----------|
| **ç¬¬1å±‚** | `0ä¸ªç©ºæ ¼` | é¡¶çº§é…ç½®ï¼ˆstages, variablesï¼‰ |
| **ç¬¬2å±‚** | `2ä¸ªç©ºæ ¼` | ä»»åŠ¡é…ç½®ï¼ˆscript, stageï¼‰ |
| **ç¬¬3å±‚** | `4ä¸ªç©ºæ ¼` | æ•°ç»„é¡¹ã€åµŒå¥—é…ç½® |
| **ç¬¬4å±‚** | `6ä¸ªç©ºæ ¼` | æ·±å±‚åµŒå¥—ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ |

---

## 4. ğŸ”— é”®å€¼å¯¹ä¸æ•°ç»„è¯­æ³•


### 4.1 é”®å€¼å¯¹è¯­æ³•


**ğŸ’¡ ç†è§£è¦ç‚¹**ï¼šé”®å€¼å¯¹å°±åƒæ˜¯"æ ‡ç­¾ï¼šå†…å®¹"çš„å…³ç³»

```yaml
# åŸºæœ¬é”®å€¼å¯¹æ ¼å¼ï¼šé”®: å€¼
job_name: my_build_job        # å­—ç¬¦ä¸²å€¼
timeout: 30                   # æ•°å­—å€¼
allow_failure: true           # å¸ƒå°”å€¼
image: node:16                # å­—ç¬¦ä¸²å€¼
```

**ğŸ”¸ å¤šç§å€¼ç±»å‹æ¼”ç¤º**ï¼š
```yaml
# å­—ç¬¦ä¸²ï¼ˆå¯ä»¥ä¸åŠ å¼•å·ï¼‰
project_name: my-awesome-app

# å¸¦ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼ˆå»ºè®®åŠ å¼•å·ï¼‰
commit_message: "feat: add new feature"

# æ•°å­—
port: 3000
timeout: 60

# å¸ƒå°”å€¼
debug: true
production: false

# ç©ºå€¼
description: null
# æˆ–è€…
description: ~
```

### 4.2 æ•°ç»„è¯­æ³•è¯¦è§£


**ğŸ¯ ä¸¤ç§æ•°ç»„å†™æ³•**ï¼š

**æ–¹å¼ä¸€ï¼šç ´æŠ˜å·å†™æ³•ï¼ˆæ¨èï¼‰**
```yaml
scripts:
  - echo "å¼€å§‹æ„å»º"
  - npm install
  - npm run build
  - echo "æ„å»ºå®Œæˆ"
```

**æ–¹å¼äºŒï¼šæ–¹æ‹¬å·å†™æ³•**
```yaml
scripts: ["echo 'å¼€å§‹æ„å»º'", "npm install", "npm run build"]
```

**ğŸ” å¤æ‚æ•°ç»„ç¤ºä¾‹**ï¼š
```yaml
# å¤šä¸ªä»»åŠ¡çš„æ•°ç»„
stages:
  - prepare    # å‡†å¤‡é˜¶æ®µ
  - build      # æ„å»ºé˜¶æ®µ
  - test       # æµ‹è¯•é˜¶æ®µ
  - deploy     # éƒ¨ç½²é˜¶æ®µ

# ç¼“å­˜è·¯å¾„çš„æ•°ç»„
cache:
  paths:
    - node_modules/
    - .npm/
    - dist/
```

### 4.3 å¯¹è±¡æ•°ç»„è¯­æ³•


```yaml
# æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯å¯¹è±¡
environments:
  - name: staging           # ç¬¬ä¸€ä¸ªç¯å¢ƒå¯¹è±¡
    url: https://staging.example.com
    variables:
      ENV: staging
  
  - name: production        # ç¬¬äºŒä¸ªç¯å¢ƒå¯¹è±¡
    url: https://example.com
    variables:
      ENV: production
```

---

## 5. ğŸ’¬ æ³¨é‡Šä¸å¼•ç”¨è¯­æ³•


### 5.1 æ³¨é‡Šè¯­æ³•


**ğŸ“ åŸºæœ¬æ³¨é‡Šè§„åˆ™**ï¼š

```yaml
# è¿™æ˜¯å•è¡Œæ³¨é‡Šï¼Œäº•å·åé¢çš„å†…å®¹ä¼šè¢«å¿½ç•¥

stages:
  - build    # æ„å»ºé˜¶æ®µçš„æ³¨é‡Š
  - test     # æµ‹è¯•é˜¶æ®µçš„æ³¨é‡Š

# å¤šè¡Œæ³¨é‡Šç¤ºä¾‹ï¼š
# è¿™ä¸ªä»»åŠ¡è´Ÿè´£æ„å»ºå‰ç«¯åº”ç”¨
# ä½¿ç”¨Node.js 16ç‰ˆæœ¬
# è¾“å‡ºåˆ°distç›®å½•
build_frontend:
  stage: build
  image: node:16
```

**ğŸ¯ æ³¨é‡Šæœ€ä½³å®è·µ**ï¼š
```yaml
# =================================
# å…¨å±€é…ç½®åŒºåŸŸ
# =================================
variables:
  NODE_VERSION: "16"        # Node.jsç‰ˆæœ¬
  CACHE_KEY: "v1"          # ç¼“å­˜ç‰ˆæœ¬æ ‡è¯†

# =================================
# æ„å»ºç›¸å…³ä»»åŠ¡
# =================================
build:
  stage: build
  script:
    - echo "å¼€å§‹æ„å»º..."   # æç¤ºä¿¡æ¯
    - npm ci              # æ¸…æ´å®‰è£…ä¾èµ–
    - npm run build       # æ‰§è¡Œæ„å»ºå‘½ä»¤
```

### 5.2 å¼•ç”¨è¯­æ³•ï¼ˆå˜é‡æ›¿æ¢ï¼‰


**ğŸ’¡ ç†è§£è¦ç‚¹**ï¼šå¼•ç”¨å°±åƒæ˜¯ç»™é…ç½®èµ·ä¸ª"ä»£å·"ï¼Œåé¢å¯ä»¥é‡å¤ä½¿ç”¨

```yaml
# å®šä¹‰å˜é‡
variables:
  NODE_IMAGE: "node:16"
  BUILD_DIR: "dist"

# ä½¿ç”¨å˜é‡ï¼ˆç”¨$ç¬¦å·å¼•ç”¨ï¼‰
build:
  image: $NODE_IMAGE           # å¼•ç”¨å˜é‡
  script:
    - npm run build
    - ls -la $BUILD_DIR        # åœ¨è„šæœ¬ä¸­å¼•ç”¨
```

**ğŸ”§ æ›´å¤æ‚çš„å¼•ç”¨ç¤ºä¾‹**ï¼š
```yaml
variables:
  # åŸºç¡€é…ç½®
  PROJECT_NAME: "my-app"
  VERSION: "1.0.0"
  
  # ç»„åˆå˜é‡
  IMAGE_NAME: "$PROJECT_NAME:$VERSION"
  DEPLOY_URL: "https://$PROJECT_NAME.example.com"

deploy:
  script:
    - docker build -t $IMAGE_NAME .
    - echo "éƒ¨ç½²åˆ° $DEPLOY_URL"
```

---

## 6. âš“ YAML anchorsé”šç‚¹æœºåˆ¶


### 6.1 é”šç‚¹çš„é€šä¿—ç†è§£


**ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**ï¼šé”šç‚¹å°±åƒæ˜¯"å¤åˆ¶ç²˜è´´"çš„é«˜çº§ç‰ˆæœ¬

```
æƒ³è±¡ä½ åœ¨å†™å¤šä»½ç›¸ä¼¼çš„è¡¨æ ¼ï¼š
æ¯æ¬¡éƒ½è¦é‡å¤å†™ç›¸åŒçš„å†…å®¹å¾ˆéº»çƒ¦

é”šç‚¹çš„ä½œç”¨ï¼š
1. å…ˆå®šä¹‰ä¸€ä¸ªæ¨¡æ¿ï¼ˆé”šç‚¹ï¼‰
2. éœ€è¦æ—¶å¼•ç”¨è¿™ä¸ªæ¨¡æ¿
3. å¯ä»¥åœ¨å¼•ç”¨æ—¶åšä¸€äº›ä¿®æ”¹
```

### 6.2 é”šç‚¹åŸºæœ¬è¯­æ³•


**ğŸ”¸ å®šä¹‰é”šç‚¹**ï¼šç”¨`&åç§°`
**ğŸ”¸ å¼•ç”¨é”šç‚¹**ï¼šç”¨`*åç§°`  
**ğŸ”¸ åˆå¹¶é”šç‚¹**ï¼šç”¨`<<: *åç§°`

```yaml
# å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„è„šæœ¬æ¨¡æ¿
.base_script: &base_commands     # &base_commands æ˜¯é”šç‚¹åç§°
  - echo "å¼€å§‹æ‰§è¡Œä»»åŠ¡"
  - export NODE_ENV=production
  - npm ci

# åœ¨ä¸åŒä»»åŠ¡ä¸­å¼•ç”¨
build:
  script:
    - *base_commands             # å¼•ç”¨é”šç‚¹
    - npm run build

test:
  script:
    - *base_commands             # å¼•ç”¨ç›¸åŒçš„é”šç‚¹
    - npm run test
```

### 6.3 é”šç‚¹é«˜çº§ç”¨æ³•


**ğŸ¯ å¯¹è±¡é”šç‚¹ç¤ºä¾‹**ï¼š
```yaml
# å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ä»»åŠ¡é…ç½®æ¨¡æ¿
.common_job: &common_config
  image: node:16
  cache:
    paths:
      - node_modules/
  before_script:
    - npm ci
  tags:
    - docker

# ä½¿ç”¨æ¨¡æ¿å¹¶æ·»åŠ ç‰¹å®šé…ç½®
build:
  <<: *common_config           # åˆå¹¶é€šç”¨é…ç½®
  stage: build                 # æ·»åŠ ç‰¹å®šé…ç½®
  script:
    - npm run build

test:
  <<: *common_config           # å¤ç”¨ç›¸åŒçš„åŸºç¡€é…ç½®
  stage: test
  script:
    - npm run test
```

**ğŸ” å¤æ‚é”šç‚¹ç»„åˆ**ï¼š
```yaml
# å®šä¹‰å¤šä¸ªé”šç‚¹
.docker_config: &docker
  image: node:16
  services:
    - docker:dind

.cache_config: &cache
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
      - node_modules/

# ç»„åˆä½¿ç”¨å¤šä¸ªé”šç‚¹
production_build:
  <<: [*docker, *cache]        # åŒæ—¶å¼•ç”¨å¤šä¸ªé”šç‚¹
  stage: build
  script:
    - docker build -t app .
```

### 6.4 é”šç‚¹çš„å®é™…ä»·å€¼


```
ä½¿ç”¨é”šç‚¹å‰ï¼ˆé‡å¤é…ç½®ï¼‰ï¼š
build:
  image: node:16
  cache:
    paths:
      - node_modules/
  before_script:
    - npm ci
  script:
    - npm run build

test:
  image: node:16               # é‡å¤ï¼
  cache:                       # é‡å¤ï¼
    paths:
      - node_modules/
  before_script:               # é‡å¤ï¼
    - npm ci
  script:
    - npm run test

ä½¿ç”¨é”šç‚¹åï¼ˆé…ç½®å¤ç”¨ï¼‰ï¼š
.base: &base
  image: node:16
  cache:
    paths:
      - node_modules/
  before_script:
    - npm ci

build:
  <<: *base
  script:
    - npm run build

test:
  <<: *base
  script:
    - npm run test
```

> ğŸš€ **è¿›é˜¶æŠ€å·§**
> é”šç‚¹ç‰¹åˆ«é€‚åˆå¤šç¯å¢ƒéƒ¨ç½²ï¼Œå¯ä»¥å®šä¹‰é€šç”¨çš„éƒ¨ç½²é€»è¾‘ï¼Œç„¶ååœ¨ä¸åŒç¯å¢ƒä¸­å¤ç”¨

---

## 7. ğŸš¨ å¸¸è§è¯­æ³•é”™è¯¯é¿å‘æŒ‡å—


### 7.1 ç¼©è¿›ç›¸å…³é”™è¯¯


**âŒ é”™è¯¯ç¤ºä¾‹ 1ï¼šç¼©è¿›ä¸ä¸€è‡´**
```yaml
stages:
  - build
   - test     # ç¼©è¿›é”™è¯¯ï¼š3ä¸ªç©ºæ ¼è€Œä¸æ˜¯2ä¸ª
  - deploy
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```yaml
stages:
  - build
  - test      # æ­£ç¡®ï¼š2ä¸ªç©ºæ ¼ç¼©è¿›
  - deploy
```

**âŒ é”™è¯¯ç¤ºä¾‹ 2ï¼šæ··ç”¨Tabå’Œç©ºæ ¼**
```yaml
build:
  script:
â†’   - npm install    # Tabå­—ç¬¦ï¼ˆçœ‹ä¸è§ä½†ä¼šæŠ¥é”™ï¼‰
    - npm run build  # ç©ºæ ¼å­—ç¬¦
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```yaml
build:
  script:
    - npm install    # å…¨éƒ¨ä½¿ç”¨ç©ºæ ¼
    - npm run build
```

### 7.2 å†’å·å’Œç ´æŠ˜å·é”™è¯¯


**âŒ é”™è¯¯ç¤ºä¾‹ï¼šç¼ºå°‘ç©ºæ ¼**
```yaml
stage:build          # ç¼ºå°‘ç©ºæ ¼
scripts:
  -npm install       # ç¼ºå°‘ç©ºæ ¼
  -npm run build
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```yaml
stage: build         # å†’å·åæœ‰ç©ºæ ¼
script:
  - npm install      # ç ´æŠ˜å·åæœ‰ç©ºæ ¼
  - npm run build
```

### 7.3 å¼•å·ä½¿ç”¨é”™è¯¯


**ğŸ”¸ ä½•æ—¶éœ€è¦å¼•å·**ï¼š
```yaml
# æ™®é€šå­—ç¬¦ä¸²ä¸éœ€è¦å¼•å·
name: my-project

# åŒ…å«ç‰¹æ®Šå­—ç¬¦æ—¶éœ€è¦å¼•å·
message: "ç‰ˆæœ¬: v1.0.0"
command: "echo 'Hello World'"

# æ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²éœ€è¦å¼•å·
version: "1.2.3"

# å¸ƒå°”å€¼å…³é”®å­—ä½œä¸ºå­—ç¬¦ä¸²æ—¶éœ€è¦å¼•å·
debug_mode: "true"    # å­—ç¬¦ä¸²"true"
production: true      # å¸ƒå°”å€¼true
```

### 7.4 å˜é‡å¼•ç”¨é”™è¯¯


**âŒ é”™è¯¯çš„å˜é‡ä½¿ç”¨**ï¼š
```yaml
variables:
  APP_NAME: myapp

script:
  - echo APP_NAME           # é”™è¯¯ï¼šæ²¡æœ‰$ç¬¦å·
  - echo ${APP_NAME         # é”™è¯¯ï¼šç¼ºå°‘å³æ‹¬å·
  - echo "$APP_NAME"        # æ­£ç¡®ä½†åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æœ‰é—®é¢˜
```

**âœ… æ­£ç¡®çš„å˜é‡ä½¿ç”¨**ï¼š
```yaml
variables:
  APP_NAME: myapp

script:
  - echo $APP_NAME          # ç®€å•å¼•ç”¨
  - echo ${APP_NAME}        # æ˜ç¡®è¾¹ç•Œ
  - echo "åº”ç”¨åç§°ï¼š$APP_NAME"  # åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨
```

### 7.5 é”šç‚¹å¼•ç”¨é”™è¯¯


**âŒ å¸¸è§é”šç‚¹é”™è¯¯**ï¼š
```yaml
.base: &config
  image: node:16

build:
  <<: config           # é”™è¯¯ï¼šç¼ºå°‘*ç¬¦å·
  script:
    - npm run build

test:
  <<: *base_config     # é”™è¯¯ï¼šé”šç‚¹åç§°ä¸åŒ¹é…
  script:
    - npm run test
```

**âœ… æ­£ç¡®çš„é”šç‚¹ä½¿ç”¨**ï¼š
```yaml
.base: &config         # å®šä¹‰é”šç‚¹
  image: node:16

build:
  <<: *config          # æ­£ç¡®å¼•ç”¨
  script:
    - npm run build
```

### 7.6 è¯­æ³•æ£€æŸ¥å·¥å…·æ¨è


```
åœ¨çº¿YAMLéªŒè¯å™¨ï¼š
â€¢ yamllint.com
â€¢ codebeautify.org/yaml-validator

ç¼–è¾‘å™¨æ’ä»¶ï¼š
â€¢ VS Code: YAML extension
â€¢ IntelliJ: YAML/Ansible support

GitLabè‡ªå¸¦éªŒè¯ï¼š
â€¢ CI/CD â†’ Pipelines â†’ "CI Lint"å·¥å…·
```

> ğŸ’¡ **è°ƒè¯•æŠ€å·§**
> é‡åˆ°YAMLé”™è¯¯æ—¶ï¼Œå…ˆæ£€æŸ¥ç¼©è¿›ï¼Œå†æ£€æŸ¥å†’å·å’Œç ´æŠ˜å·åçš„ç©ºæ ¼ï¼Œæœ€åæ£€æŸ¥å¼•å·å’Œå˜é‡è¯­æ³•

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ YAMLæœ¬è´¨ï¼šäººç±»å‹å¥½çš„é…ç½®æ–‡ä»¶æ ¼å¼
ğŸ”¸ æ ¸å¿ƒè§„åˆ™ï¼šç¼©è¿›æ•æ„Ÿã€ç©ºæ ¼åˆ†éš”ã€å¤§å°å†™æ•æ„Ÿ
ğŸ”¸ åŸºæœ¬è¯­æ³•ï¼šé”®å€¼å¯¹ã€æ•°ç»„ã€æ³¨é‡Šã€å˜é‡å¼•ç”¨
ğŸ”¸ é«˜çº§ç‰¹æ€§ï¼šé”šç‚¹å¤ç”¨ã€å¯¹è±¡åˆå¹¶
ğŸ”¸ å¸¸è§é”™è¯¯ï¼šç¼©è¿›ã€ç©ºæ ¼ã€å¼•å·ã€å˜é‡è¯­æ³•
```

### 8.2 GitLab CI/CDä¸­çš„åº”ç”¨ä»·å€¼


| è¯­æ³•ç‰¹æ€§ | **åœ¨GitLabä¸­çš„ä½œç”¨** | **å®é™…ä»·å€¼** |
|---------|-------------------|------------|
| **é”®å€¼å¯¹** | `å®šä¹‰ä»»åŠ¡é…ç½®` | `æ¸…æ™°çš„ä»»åŠ¡å±æ€§è®¾ç½®` |
| **æ•°ç»„è¯­æ³•** | `å®šä¹‰è„šæœ¬æ­¥éª¤ã€é˜¶æ®µåˆ—è¡¨` | `æœ‰åºçš„æ‰§è¡Œæµç¨‹` |
| **å˜é‡å¼•ç”¨** | `å¤ç”¨é…ç½®å€¼` | `é¿å…ç¡¬ç¼–ç ï¼Œä¾¿äºç»´æŠ¤` |
| **é”šç‚¹æœºåˆ¶** | `å¤ç”¨é€šç”¨é…ç½®` | `å‡å°‘é‡å¤ï¼Œæé«˜ä¸€è‡´æ€§` |
| **æ³¨é‡Š** | `è¯´æ˜é…ç½®ç”¨é€”` | `æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§` |

### 8.3 å­¦ä¹ è¿›é˜¶è·¯å¾„


```
ğŸ“š å­¦ä¹ è·¯çº¿ï¼š
ç¬¬1æ­¥ï¼šæŒæ¡åŸºæœ¬è¯­æ³• â†’ èƒ½å†™ç®€å•çš„YAMLæ–‡ä»¶
ç¬¬2æ­¥ï¼šç†è§£å˜é‡å¼•ç”¨ â†’ èƒ½å¤ç”¨é…ç½®å‡å°‘é‡å¤
ç¬¬3æ­¥ï¼šç†Ÿç»ƒä½¿ç”¨é”šç‚¹ â†’ èƒ½æ„å»ºå¤æ‚çš„é…ç½®æ¨¡æ¿
ç¬¬4æ­¥ï¼šé”™è¯¯è°ƒè¯•èƒ½åŠ› â†’ èƒ½å¿«é€Ÿå®šä½å’Œä¿®å¤è¯­æ³•é—®é¢˜

â±ï¸ å­¦ä¹ å»ºè®®ï¼š
â€¢ å¤šå†™å¤šç»ƒï¼šä»ç®€å•é…ç½®å¼€å§‹
â€¢ ä½¿ç”¨å·¥å…·ï¼šYAMLéªŒè¯å™¨æ£€æŸ¥è¯­æ³•
â€¢ å‚è€ƒç¤ºä¾‹ï¼šå­¦ä¹ GitLabå®˜æ–¹ä¾‹å­
â€¢ é€æ­¥ä¼˜åŒ–ï¼šé‡æ„é‡å¤é…ç½®ä½¿ç”¨é”šç‚¹
```

### 8.4 å®ç”¨è®°å¿†å£è¯€


ğŸ§  **YAMLè¯­æ³•è®°å¿†æ³•**ï¼š
```
"å†’å·ç©ºæ ¼ä¸èƒ½å¿˜ï¼Œç ´æŠ˜å·åä¹Ÿè¦è®©"
"ç¼©è¿›æ•´é½ç”¨ç©ºæ ¼ï¼ŒTabå­—ç¬¦è¦é¿å¼€"
"é”šç‚¹å¤ç”¨å‡é‡å¤ï¼Œå˜é‡å¼•ç”¨åŠ ç¾å…ƒ"
"æ³¨é‡Šè¯´æ˜è¦æ¸…æ¥šï¼Œè¯­æ³•æ£€æŸ¥å°‘å‡ºé”™"
```

ğŸ”‘ **å…³é”®è¦ç‚¹**ï¼š
- `è¯­æ³•ç®€æ´` - æ¯”JSONæ›´æ˜“è¯»æ˜“å†™
- `ç¼©è¿›ä¸¥æ ¼` - ç©ºæ ¼æ•°é‡å†³å®šå±‚çº§å…³ç³»  
- `å¤ç”¨æœºåˆ¶` - é”šç‚¹å’Œå˜é‡é¿å…é‡å¤
- `å·¥å…·è¾…åŠ©` - éªŒè¯å™¨å¸®åŠ©å‘ç°é”™è¯¯

**ğŸ¯ ä¸‹ä¸€æ­¥å­¦ä¹ **ï¼šæŒæ¡äº†YAMLåŸºç¡€è¯­æ³•åï¼Œå°±å¯ä»¥å¼€å§‹å­¦ä¹ GitLab CI/CDçš„å…·ä½“é…ç½®é¡¹ï¼Œå¦‚stagesã€jobsã€scriptsç­‰æ ¸å¿ƒæ¦‚å¿µäº†ã€‚

---

> ğŸ“– **å»¶ä¼¸é˜…è¯»**
> - [GitLab CI/CD YAMLè¯­æ³•å‚è€ƒ](https://docs.gitlab.com/ee/ci/yaml/)
> - [YAMLå®˜æ–¹è§„èŒƒæ–‡æ¡£](https://yaml.org/spec/)
> - [GitLab CI Lintå·¥å…·ä½¿ç”¨æŒ‡å—](https://docs.gitlab.com/ee/ci/lint.html)