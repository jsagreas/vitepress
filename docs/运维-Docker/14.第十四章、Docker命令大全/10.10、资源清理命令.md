---
title: 10ã€èµ„æºæ¸…ç†å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [èµ„æºæ¸…ç†æ¦‚è¿°](#1-èµ„æºæ¸…ç†æ¦‚è¿°)
2. [ç³»ç»Ÿçº§æ¸…ç†å‘½ä»¤](#2-ç³»ç»Ÿçº§æ¸…ç†å‘½ä»¤)
3. [é•œåƒæ¸…ç†æ“ä½œ](#3-é•œåƒæ¸…ç†æ“ä½œ)
4. [å®¹å™¨æ¸…ç†æ“ä½œ](#4-å®¹å™¨æ¸…ç†æ“ä½œ)
5. [å­˜å‚¨å·æ¸…ç†æ“ä½œ](#5-å­˜å‚¨å·æ¸…ç†æ“ä½œ)
6. [ç½‘ç»œæ¸…ç†æ“ä½œ](#6-ç½‘ç»œæ¸…ç†æ“ä½œ)
7. [æ„å»ºç¼“å­˜æ¸…ç†](#7-æ„å»ºç¼“å­˜æ¸…ç†)
8. [æ¸…ç†ç­–ç•¥ä¸æœ€ä½³å®è·µ](#8-æ¸…ç†ç­–ç•¥ä¸æœ€ä½³å®è·µ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ§¹ èµ„æºæ¸…ç†æ¦‚è¿°


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦æ¸…ç†Dockerèµ„æº


**ğŸ’¾ å­˜å‚¨ç©ºé—´é—®é¢˜**
```
Dockerä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿå¤§é‡èµ„æºï¼š
â€¢ åœæ­¢çš„å®¹å™¨ä»å ç”¨ç£ç›˜ç©ºé—´
â€¢ æœªä½¿ç”¨çš„é•œåƒä¼šè¶Šç§¯è¶Šå¤š  
â€¢ æ„å»ºè¿‡ç¨‹äº§ç”Ÿçš„ä¸­é—´å±‚å’Œç¼“å­˜
â€¢ åºŸå¼ƒçš„æ•°æ®å·å’Œç½‘ç»œé…ç½®
```

**ğŸ¯ æ¸…ç†çš„å¿…è¦æ€§**
- **èŠ‚çœç£ç›˜ç©ºé—´** - Dockerèµ„æºå¯èƒ½å ç”¨æ•°GBç”šè‡³æ•°TBç©ºé—´
- **æå‡ç³»ç»Ÿæ€§èƒ½** - å‡å°‘èµ„æºå ç”¨ï¼Œæé«˜ç³»ç»Ÿå“åº”é€Ÿåº¦
- **ç®€åŒ–ç®¡ç†** - æ¸…ç†æ— ç”¨èµ„æºï¼Œä¾¿äºç®¡ç†æœ‰æ•ˆèµ„æº
- **é¿å…å†²çª** - æ¸…ç†åºŸå¼ƒé…ç½®ï¼Œé¿å…åç§°å’Œç«¯å£å†²çª

### 1.2 Dockerèµ„æºç±»å‹åˆ†ç±»


```
Dockerä¸»è¦èµ„æºç±»å‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é•œåƒ(Images)   â”‚ â† åº”ç”¨ç¨‹åºæ¨¡æ¿
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®¹å™¨(Containers)â”‚ â† è¿è¡Œå®ä¾‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å·(Volumes)    â”‚ â† æ•°æ®æŒä¹…åŒ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç½‘ç»œ(Networks)  â”‚ â† ç½‘ç»œé…ç½®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ„å»ºç¼“å­˜(Cache)  â”‚ â† æ„å»ºä¸­é—´äº§ç‰©
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æ¸…ç†å‘½ä»¤åˆ†ç±»


| å‘½ä»¤ç±»å‹ | **ä¸»è¦ç”¨é€”** | **å½±å“èŒƒå›´** | **é£é™©ç­‰çº§** |
|---------|------------|-------------|-------------|
| ğŸ§¹ **system prune** | `ä¸€é”®æ¸…ç†å¤šç§èµ„æº` | `å…¨ç³»ç»Ÿ` | `ğŸŸ¡ä¸­ç­‰` |
| ğŸ“¦ **image prune** | `æ¸…ç†æœªä½¿ç”¨é•œåƒ` | `é•œåƒå±‚é¢` | `ğŸŸ¢è¾ƒä½` |
| ğŸ”„ **container prune** | `æ¸…ç†åœæ­¢å®¹å™¨` | `å®¹å™¨å±‚é¢` | `ğŸŸ¢è¾ƒä½` |
| ğŸ’¾ **volume prune** | `æ¸…ç†æœªä½¿ç”¨å·` | `æ•°æ®å±‚é¢` | `ğŸ”´è¾ƒé«˜` |
| ğŸŒ **network prune** | `æ¸…ç†æœªä½¿ç”¨ç½‘ç»œ` | `ç½‘ç»œå±‚é¢` | `ğŸŸ¢è¾ƒä½` |

---

## 2. ğŸ”§ ç³»ç»Ÿçº§æ¸…ç†å‘½ä»¤


### 2.1 docker system prune - ä¸€é”®ç³»ç»Ÿæ¸…ç†


**ğŸ¯ åŸºç¡€ç³»ç»Ÿæ¸…ç†**
```bash
# æ¸…ç†åœæ­¢çš„å®¹å™¨ã€æœªä½¿ç”¨çš„ç½‘ç»œã€æ‚¬ç©ºé•œåƒã€æ„å»ºç¼“å­˜
docker system prune

# ç¤ºä¾‹è¾“å‡ºï¼š
WARNING! This will remove:
  - all stopped containers
  - all networks not used by at least one container  
  - all dangling images
  - all dangling build cache
Are you sure you want to continue? [y/N]
```

**âš¡ å¼ºåŠ›æ¸…ç†æ¨¡å¼**
```bash
# æ·»åŠ  --all å‚æ•°ï¼Œé¢å¤–æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ
docker system prune --all

# è‡ªåŠ¨ç¡®è®¤ï¼Œä¸éœ€è¦ç”¨æˆ·äº¤äº’
docker system prune --force
# æˆ–ç®€å†™
docker system prune -f
```

**ğŸ“Š æ¸…ç†æ•ˆæœæŸ¥çœ‹**
```bash
# æŸ¥çœ‹æ¸…ç†å‰åçš„ç©ºé—´ä½¿ç”¨æƒ…å†µ
docker system df

# ç¤ºä¾‹è¾“å‡ºï¼š
TYPE            TOTAL    ACTIVE   SIZE      RECLAIMABLE
Images          15       5        2.1GB     1.2GB (57%)
Containers      8        3        45.2MB    32.1MB (71%)
Local Volumes   4        2        1.5GB     800MB (53%)
Build Cache     25       0        1.8GB     1.8GB (100%)
```

### 2.2 å®šæ—¶æ¸…ç†ç­–ç•¥


**ğŸ’¡ è‡ªåŠ¨åŒ–æ¸…ç†è„šæœ¬**
```bash
#!/bin/bash
# docker-cleanup.sh

echo "å¼€å§‹æ¸…ç†Dockerèµ„æº..."
echo "æ¸…ç†å‰ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š"
docker system df

echo "æ‰§è¡Œæ¸…ç†æ“ä½œ..."
docker system prune -f --volumes

echo "æ¸…ç†åç£ç›˜ä½¿ç”¨æƒ…å†µï¼š"
docker system df
```

**â° ä½¿ç”¨cronå®šæ—¶æ‰§è¡Œ**
```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹æ¸…ç†ï¼‰
0 2 * * 0 /path/to/docker-cleanup.sh
```

---

## 3. ğŸ–¼ï¸ é•œåƒæ¸…ç†æ“ä½œ


### 3.1 ç†è§£é•œåƒç±»å‹


**ğŸ“‹ é•œåƒçŠ¶æ€åˆ†ç±»**
- **ğŸ”— æ ‡è®°é•œåƒ** - æœ‰repository:tagæ ‡è¯†çš„é•œåƒ
- **ğŸ’« æ‚¬ç©ºé•œåƒ** - æ²¡æœ‰æ ‡ç­¾çš„ä¸­é—´å±‚é•œåƒï¼ˆdanglingï¼‰
- **ğŸš« æœªä½¿ç”¨é•œåƒ** - æ²¡æœ‰å®¹å™¨åœ¨ä½¿ç”¨çš„é•œåƒ

### 3.2 docker image prune - é•œåƒæ¸…ç†


**ğŸ§¹ æ¸…ç†æ‚¬ç©ºé•œåƒ**
```bash
# æ¸…ç†æ‚¬ç©ºé•œåƒï¼ˆ<none>æ ‡ç­¾çš„é•œåƒï¼‰
docker image prune

# å¼ºåˆ¶æ¸…ç†ï¼Œä¸éœ€è¦ç¡®è®¤
docker image prune -f
```

**ğŸ’ª æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨é•œåƒ**
```bash
# æ¸…ç†æ‰€æœ‰æœªè¢«å®¹å™¨ä½¿ç”¨çš„é•œåƒ
docker image prune --all

# æ ¹æ®æ—¶é—´è¿‡æ»¤æ¸…ç†ï¼ˆæ¸…ç†24å°æ—¶å‰åˆ›å»ºçš„æœªä½¿ç”¨é•œåƒï¼‰
docker image prune --all --filter "until=24h"
```

### 3.3 docker rmi - åˆ é™¤æŒ‡å®šé•œåƒ


**ğŸ¯ åŸºæœ¬åˆ é™¤æ“ä½œ**
```bash
# åˆ é™¤å•ä¸ªé•œåƒ
docker rmi nginx:latest

# åˆ é™¤å¤šä¸ªé•œåƒ
docker rmi nginx:latest redis:alpine mysql:8.0

# é€šè¿‡é•œåƒIDåˆ é™¤
docker rmi fed8e5d42e1f
```

**âš¡ æ‰¹é‡åˆ é™¤æŠ€å·§**
```bash
# åˆ é™¤æ‰€æœ‰æ‚¬ç©ºé•œåƒ
docker rmi $(docker images -f "dangling=true" -q)

# åˆ é™¤åŒ…å«ç‰¹å®šå…³é”®å­—çš„é•œåƒ
docker rmi $(docker images | grep "test" | awk '{print $3}')

# åˆ é™¤æ‰€æœ‰é•œåƒï¼ˆå±é™©æ“ä½œï¼ï¼‰
docker rmi $(docker images -q) --force
```

### 3.4 é•œåƒæ¸…ç†æœ€ä½³å®è·µ


**âœ… å®‰å…¨æ¸…ç†æµç¨‹**
```bash
# 1. æŸ¥çœ‹å½“å‰é•œåƒä½¿ç”¨æƒ…å†µ
docker images
docker ps -a

# 2. è¯†åˆ«å¯ä»¥æ¸…ç†çš„é•œåƒ
docker images --filter "dangling=true"

# 3. å°å¿ƒæ¸…ç†ï¼Œå…ˆä¸åŠ --forceæŸ¥çœ‹å½±å“
docker image prune

# 4. ç¡®è®¤æ— è¯¯åæ‰§è¡Œæ¸…ç†
docker image prune -f
```

---

## 4. ğŸ“¦ å®¹å™¨æ¸…ç†æ“ä½œ


### 4.1 å®¹å™¨çŠ¶æ€ç†è§£


**ğŸ”„ å®¹å™¨ç”Ÿå‘½å‘¨æœŸçŠ¶æ€**
```
å®¹å™¨çŠ¶æ€æµè½¬ï¼š
Created â†’ Running â†’ Paused â†’ Stopped â†’ Removed

æ¸…ç†ç›®æ ‡ï¼š
â€¢ Stoppedï¼ˆå·²åœæ­¢ï¼‰å®¹å™¨
â€¢ Exitedï¼ˆå·²é€€å‡ºï¼‰å®¹å™¨  
â€¢ Deadï¼ˆæ­»äº¡ï¼‰å®¹å™¨
```

### 4.2 docker container prune - å®¹å™¨æ¸…ç†


**ğŸ§¹ æ¸…ç†åœæ­¢çš„å®¹å™¨**
```bash
# æ¸…ç†æ‰€æœ‰åœæ­¢çŠ¶æ€çš„å®¹å™¨
docker container prune

# ç¤ºä¾‹è¾“å‡ºï¼š
WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y
Deleted Containers:
3f2e4b8c1a7f
9d8e7c6b2a5f
Total reclaimed space: 125.4MB
```

**âš¡ é«˜çº§æ¸…ç†é€‰é¡¹**
```bash
# å¼ºåˆ¶æ¸…ç†ï¼Œæ— éœ€ç¡®è®¤
docker container prune -f

# æ ¹æ®æ ‡ç­¾è¿‡æ»¤æ¸…ç†
docker container prune --filter "label=environment=test"

# æ ¹æ®æ—¶é—´è¿‡æ»¤ï¼ˆæ¸…ç†24å°æ—¶å‰åœæ­¢çš„å®¹å™¨ï¼‰
docker container prune --filter "until=24h"
```

### 4.3 docker rm - åˆ é™¤æŒ‡å®šå®¹å™¨


**ğŸ¯ åŸºæœ¬åˆ é™¤æ“ä½œ**
```bash
# åˆ é™¤å•ä¸ªåœæ­¢çš„å®¹å™¨
docker rm my_container

# åˆ é™¤å¤šä¸ªå®¹å™¨
docker rm container1 container2 container3

# å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨
docker rm -f running_container
```

**ğŸ’ª æ‰¹é‡åˆ é™¤æŠ€å·§**
```bash
# åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨
docker rm $(docker ps -a -q --filter "status=exited")

# åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬è¿è¡Œä¸­çš„ï¼‰
docker rm -f $(docker ps -a -q)

# åˆ é™¤ç‰¹å®šé•œåƒåˆ›å»ºçš„æ‰€æœ‰å®¹å™¨
docker rm $(docker ps -a -q --filter "ancestor=nginx")
```

### 4.4 å®¹å™¨æ¸…ç†æ³¨æ„äº‹é¡¹


**âš ï¸ é‡è¦æé†’**
- **æ•°æ®ä¸¢å¤±é£é™©** - æ¸…ç†å®¹å™¨ä¼šä¸¢å¤±å®¹å™¨å†…æœªæŒä¹…åŒ–çš„æ•°æ®
- **æœåŠ¡ä¸­æ–­** - åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨ä¼šå¯¼è‡´æœåŠ¡ä¸­æ–­
- **ä¾èµ–å…³ç³»** - æ³¨æ„å®¹å™¨é—´çš„ä¾èµ–å…³ç³»

**ğŸ’¡ å®‰å…¨æ¸…ç†å»ºè®®**
```bash
# 1. å…ˆæŸ¥çœ‹è¦æ¸…ç†çš„å®¹å™¨
docker ps -a --filter "status=exited"

# 2. å¤‡ä»½é‡è¦æ•°æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰
docker cp container_name:/path/to/data ./backup/

# 3. ç¡®è®¤æ— é‡è¦æ•°æ®åæ¸…ç†
docker container prune -f
```

---

## 5. ğŸ’¾ å­˜å‚¨å·æ¸…ç†æ“ä½œ


### 5.1 æ•°æ®å·ç±»å‹ç†è§£


**ğŸ“Š æ•°æ®å·åˆ†ç±»**
```
Dockerå­˜å‚¨ç±»å‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘½åå·         â”‚ â† docker volume createåˆ›å»º
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚  åŒ¿åå·         â”‚ â† è‡ªåŠ¨ç”Ÿæˆçš„å·
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»‘å®šæŒ‚è½½       â”‚ â† ä¸»æœºç›®å½•æŒ‚è½½
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¸…ç†èŒƒå›´ï¼šä¸»è¦æ˜¯å‘½åå·å’ŒåŒ¿åå·
```

### 5.2 docker volume prune - å·æ¸…ç†


**ğŸš¨ é«˜é£é™©æ“ä½œè­¦å‘Š**
```bash
# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„æ•°æ®å·
docker volume prune

# è­¦å‘Šä¿¡æ¯ï¼š
WARNING! This will remove all local volumes not used by at least one container.
Are you sure you want to continue? [y/N]
```

**âš¡ æ¸…ç†é€‰é¡¹**
```bash
# å¼ºåˆ¶æ¸…ç†
docker volume prune -f

# æ ¹æ®æ ‡ç­¾è¿‡æ»¤
docker volume prune --filter "label=environment=test"

# æŸ¥çœ‹ä¼šè¢«æ¸…ç†çš„å·
docker volume ls --filter "dangling=true"
```

### 5.3 æ‰‹åŠ¨å·ç®¡ç†


**ğŸ” æŸ¥çœ‹å’Œåˆ†æ**
```bash
# åˆ—å‡ºæ‰€æœ‰æ•°æ®å·
docker volume ls

# æŸ¥çœ‹å·è¯¦ç»†ä¿¡æ¯
docker volume inspect volume_name

# æŸ¥çœ‹å·ä½¿ç”¨æƒ…å†µ
docker system df -v
```

**ğŸ—‘ï¸ æ‰‹åŠ¨åˆ é™¤æ•°æ®å·**
```bash
# åˆ é™¤æŒ‡å®šæ•°æ®å·
docker volume rm volume_name

# åˆ é™¤å¤šä¸ªæ•°æ®å·
docker volume rm volume1 volume2

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å·
docker volume rm $(docker volume ls -q --filter "dangling=true")
```

### 5.4 æ•°æ®å·æ¸…ç†å®‰å…¨å»ºè®®


**âœ… å®‰å…¨æ¸…ç†æ­¥éª¤**
1. **ğŸ” è¯†åˆ«é‡è¦æ•°æ®** - ç¡®è®¤å“ªäº›å·åŒ…å«é‡è¦æ•°æ®
2. **ğŸ’¾ å¤‡ä»½æ•°æ®** - å¯¹é‡è¦æ•°æ®è¿›è¡Œå¤‡ä»½
3. **ğŸ§ª æµ‹è¯•ç¯å¢ƒéªŒè¯** - åœ¨æµ‹è¯•ç¯å¢ƒå…ˆæ‰§è¡Œæ¸…ç†
4. **ğŸ“‹ è®°å½•æ¸…ç†æ—¥å¿—** - è®°å½•æ¸…ç†æ“ä½œå’Œç»“æœ

**ğŸ’¡ å¤‡ä»½æ•°æ®å·ç¤ºä¾‹**
```bash
# åˆ›å»ºä¸´æ—¶å®¹å™¨å¤‡ä»½å·æ•°æ®
docker run --rm -v volume_name:/data -v $(pwd):/backup alpine \
  tar czf /backup/volume_backup.tar.gz /data

# æ¢å¤æ•°æ®å·
docker run --rm -v volume_name:/data -v $(pwd):/backup alpine \
  tar xzf /backup/volume_backup.tar.gz -C /
```

---

## 6. ğŸŒ ç½‘ç»œæ¸…ç†æ“ä½œ


### 6.1 Dockerç½‘ç»œç±»å‹


**ğŸ”— ç½‘ç»œé©±åŠ¨ç±»å‹**
```
Dockerç½‘ç»œé©±åŠ¨ï¼š
â€¢ bridge  - é»˜è®¤ç½‘ç»œæ¨¡å¼
â€¢ host    - ä¸»æœºç½‘ç»œæ¨¡å¼  
â€¢ none    - æ— ç½‘ç»œæ¨¡å¼
â€¢ overlay - è·¨ä¸»æœºç½‘ç»œ
â€¢ macvlan - MACåœ°å€ç½‘ç»œ
```

### 6.2 docker network prune - ç½‘ç»œæ¸…ç†


**ğŸ§¹ æ¸…ç†æœªä½¿ç”¨ç½‘ç»œ**
```bash
# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ
docker network prune

# ç¤ºä¾‹è¾“å‡ºï¼š
WARNING! This will remove all custom networks not used by at least one container.
Are you sure you want to continue? [y/N] y
Deleted Networks:
my_custom_network
test_network
```

**âš¡ ç½‘ç»œæ¸…ç†é€‰é¡¹**
```bash
# å¼ºåˆ¶æ¸…ç†
docker network prune -f

# æ ¹æ®æ ‡ç­¾è¿‡æ»¤
docker network prune --filter "label=environment=test"
```

### 6.3 ç½‘ç»œç®¡ç†å‘½ä»¤


**ğŸ” ç½‘ç»œæŸ¥çœ‹å’Œåˆ†æ**
```bash
# åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ
docker network ls

# æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯
docker network inspect network_name

# æŸ¥çœ‹æœªä½¿ç”¨çš„ç½‘ç»œ
docker network ls --filter "dangling=true"
```

**ğŸ—‘ï¸ æ‰‹åŠ¨åˆ é™¤ç½‘ç»œ**
```bash
# åˆ é™¤æŒ‡å®šç½‘ç»œ
docker network rm network_name

# æ‰¹é‡åˆ é™¤æœªä½¿ç”¨ç½‘ç»œ
docker network rm $(docker network ls -q --filter "dangling=true")
```

---

## 7. ğŸ—ï¸ æ„å»ºç¼“å­˜æ¸…ç†


### 7.1 æ„å»ºç¼“å­˜æœºåˆ¶


**ğŸ’¡ ç¼“å­˜äº§ç”ŸåŸå› **
```
Dockeræ„å»ºè¿‡ç¨‹ä¸­çš„ç¼“å­˜ï¼š
â€¢ æ¯ä¸ªDockerfileæŒ‡ä»¤éƒ½ä¼šäº§ç”Ÿä¸­é—´å±‚
â€¢ æ„å»ºç¼“å­˜ç”¨äºåŠ é€Ÿåç»­æ„å»º  
â€¢ ç¼“å­˜ä¼šå ç”¨å¤§é‡ç£ç›˜ç©ºé—´
â€¢ è¿‡æœŸç¼“å­˜éœ€è¦å®šæœŸæ¸…ç†
```

### 7.2 docker builder prune - æ„å»ºç¼“å­˜æ¸…ç†


**ğŸ§¹ æ¸…ç†æ„å»ºç¼“å­˜**
```bash
# æ¸…ç†æ„å»ºç¼“å­˜
docker builder prune

# æ¸…ç†æ‰€æœ‰æ„å»ºç¼“å­˜ï¼ˆåŒ…æ‹¬æ­£åœ¨ä½¿ç”¨çš„ï¼‰
docker builder prune --all

# å¼ºåˆ¶æ¸…ç†
docker builder prune -f
```

**ğŸ“Š æŸ¥çœ‹æ„å»ºç¼“å­˜ä½¿ç”¨**
```bash
# æŸ¥çœ‹æ„å»ºç¼“å­˜å ç”¨
docker system df

# è¯¦ç»†æŸ¥çœ‹æ„å»ºç¼“å­˜
docker builder du
```

### 7.3 BuildKitç¼“å­˜ç®¡ç†


**ğŸ”§ é«˜çº§ç¼“å­˜ç®¡ç†**
```bash
# æŸ¥çœ‹æ„å»ºå†å²
docker buildx du

# æ¸…ç†ç‰¹å®šæ„å»ºå™¨çš„ç¼“å­˜
docker buildx prune --builder builder_name

# æ ¹æ®æ—¶é—´æ¸…ç†ç¼“å­˜
docker builder prune --filter "until=24h"
```

---

## 8. ğŸ“‹ æ¸…ç†ç­–ç•¥ä¸æœ€ä½³å®è·µ


### 8.1 æ¸…ç†ä¼˜å…ˆçº§ç­–ç•¥


**ğŸ¯ æ¨èæ¸…ç†é¡ºåº**
```
æ¸…ç†ä¼˜å…ˆçº§ï¼ˆç”±ä½åˆ°é«˜é£é™©ï¼‰ï¼š
1ï¸âƒ£ æ„å»ºç¼“å­˜æ¸…ç†     - æœ€å®‰å…¨
2ï¸âƒ£ åœæ­¢å®¹å™¨æ¸…ç†     - è¾ƒå®‰å…¨
3ï¸âƒ£ æ‚¬ç©ºé•œåƒæ¸…ç†     - è¾ƒå®‰å…¨  
4ï¸âƒ£ æœªä½¿ç”¨ç½‘ç»œæ¸…ç†   - è¾ƒå®‰å…¨
5ï¸âƒ£ æœªä½¿ç”¨é•œåƒæ¸…ç†   - éœ€è°¨æ…
6ï¸âƒ£ æœªä½¿ç”¨æ•°æ®å·æ¸…ç† - é«˜é£é™©
```

### 8.2 å®‰å…¨æ¸…ç†æ£€æŸ¥æ¸…å•


**âœ… æ¸…ç†å‰æ£€æŸ¥æ¸…å•**
- [ ] **å¤‡ä»½é‡è¦æ•°æ®** - ç¡®ä¿é‡è¦æ•°æ®å·²å¤‡ä»½
- [ ] **åœæ­¢ç›¸å…³æœåŠ¡** - åœæ­¢å¯èƒ½å—å½±å“çš„æœåŠ¡
- [ ] **æŸ¥çœ‹ä¾èµ–å…³ç³»** - ç¡®è®¤èµ„æºé—´ä¾èµ–å…³ç³»
- [ ] **æµ‹è¯•ç¯å¢ƒéªŒè¯** - å…ˆåœ¨æµ‹è¯•ç¯å¢ƒæ‰§è¡Œ
- [ ] **è®°å½•æ¸…ç†æ“ä½œ** - è®°å½•æ¸…ç†å‘½ä»¤å’Œæ—¶é—´

**âš ï¸ æ¸…ç†æ³¨æ„äº‹é¡¹**
```bash
# æ¸…ç†å‰å…ˆæŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ
docker system df

# ä½¿ç”¨--dry-runæŸ¥çœ‹æ¸…ç†å½±å“ï¼ˆéƒ¨åˆ†å‘½ä»¤æ”¯æŒï¼‰
docker image prune --dry-run

# æ¸…ç†æ—¶é¿å…ä½¿ç”¨--forceï¼Œå…ˆç¡®è®¤å½±å“
docker system prune
# ç¡®è®¤åå†æ‰§è¡Œ
docker system prune -f
```

### 8.3 è‡ªåŠ¨åŒ–æ¸…ç†è„šæœ¬


**ğŸ¤– æ™ºèƒ½æ¸…ç†è„šæœ¬**
```bash
#!/bin/bash
# smart-docker-cleanup.sh

echo "=== Dockeræ™ºèƒ½æ¸…ç†è„šæœ¬ ==="

# æ˜¾ç¤ºæ¸…ç†å‰çŠ¶æ€
echo "æ¸…ç†å‰èµ„æºä½¿ç”¨æƒ…å†µï¼š"
docker system df

# 1. æ¸…ç†æ„å»ºç¼“å­˜ï¼ˆæœ€å®‰å…¨ï¼‰
echo "æ¸…ç†æ„å»ºç¼“å­˜..."
docker builder prune -f

# 2. æ¸…ç†åœæ­¢çš„å®¹å™¨
echo "æ¸…ç†åœæ­¢çš„å®¹å™¨..."
docker container prune -f

# 3. æ¸…ç†æ‚¬ç©ºé•œåƒ
echo "æ¸…ç†æ‚¬ç©ºé•œåƒ..."
docker image prune -f

# 4. æ¸…ç†æœªä½¿ç”¨ç½‘ç»œ
echo "æ¸…ç†æœªä½¿ç”¨ç½‘ç»œ..."
docker network prune -f

# æ˜¾ç¤ºæ¸…ç†åçŠ¶æ€
echo "æ¸…ç†åèµ„æºä½¿ç”¨æƒ…å†µï¼š"
docker system df

echo "=== æ¸…ç†å®Œæˆ ==="
```

### 8.4 ç›‘æ§å’Œå‘Šè­¦


**ğŸ“Š èµ„æºç›‘æ§**
```bash
# åˆ›å»ºèµ„æºç›‘æ§è„šæœ¬
#!/bin/bash
# docker-monitor.sh

THRESHOLD=80  # ç£ç›˜ä½¿ç”¨ç‡é˜ˆå€¼

# æ£€æŸ¥Dockeræ ¹ç›®å½•ç£ç›˜ä½¿ç”¨ç‡
USAGE=$(df /var/lib/docker | tail -1 | awk '{print $5}' | sed 's/%//')

if [ $USAGE -gt $THRESHOLD ]; then
    echo "è­¦å‘Šï¼šDockerç£ç›˜ä½¿ç”¨ç‡è¾¾åˆ° ${USAGE}%"
    echo "å»ºè®®æ‰§è¡Œæ¸…ç†æ“ä½œ"
    docker system df
fi
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ¸…ç†å‘½ä»¤


```
ğŸ”¸ ç³»ç»Ÿæ¸…ç†ï¼šdocker system prune - ä¸€é”®æ¸…ç†å¤šç§èµ„æº
ğŸ”¸ é•œåƒæ¸…ç†ï¼šdocker image prune - æ¸…ç†æœªä½¿ç”¨é•œåƒ  
ğŸ”¸ å®¹å™¨æ¸…ç†ï¼šdocker container prune - æ¸…ç†åœæ­¢å®¹å™¨
ğŸ”¸ æ•°æ®å·æ¸…ç†ï¼šdocker volume prune - æ¸…ç†æœªä½¿ç”¨å·ï¼ˆé«˜é£é™©ï¼‰
ğŸ”¸ ç½‘ç»œæ¸…ç†ï¼šdocker network prune - æ¸…ç†æœªä½¿ç”¨ç½‘ç»œ
ğŸ”¸ ç¼“å­˜æ¸…ç†ï¼šdocker builder prune - æ¸…ç†æ„å»ºç¼“å­˜
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ¸…ç†çš„æœ¬è´¨ç†è§£**
```
ä¸ºä»€ä¹ˆéœ€è¦æ¸…ç†ï¼š
- Dockerèµ„æºä¼šä¸æ–­ç´¯ç§¯å ç”¨ç£ç›˜ç©ºé—´
- åœæ­¢çš„å®¹å™¨å’Œæœªä½¿ç”¨çš„é•œåƒä¸ä¼šè‡ªåŠ¨åˆ é™¤
- æ„å»ºç¼“å­˜ä¼šè¶Šæ¥è¶Šå¤šå½±å“æ€§èƒ½
- å®šæœŸæ¸…ç†æ˜¯Dockerä½¿ç”¨çš„å¿…è¦ç»´æŠ¤å·¥ä½œ
```

**ğŸ”¹ é£é™©ç­‰çº§è®¤çŸ¥**
```
ä½é£é™©æ“ä½œï¼š
âœ… æ¸…ç†æ„å»ºç¼“å­˜ - åªå½±å“æ„å»ºé€Ÿåº¦
âœ… æ¸…ç†åœæ­¢å®¹å™¨ - ä¸å½±å“è¿è¡ŒæœåŠ¡
âœ… æ¸…ç†æ‚¬ç©ºé•œåƒ - æ¸…ç†æ— ç”¨ä¸­é—´å±‚

é«˜é£é™©æ“ä½œï¼š  
âš ï¸ æ¸…ç†æ•°æ®å· - å¯èƒ½ä¸¢å¤±é‡è¦æ•°æ®
âš ï¸ æ¸…ç†æ‰€æœ‰é•œåƒ - å¯èƒ½å½±å“åº”ç”¨éƒ¨ç½²
```

**ğŸ”¹ æ¸…ç†ç­–ç•¥åˆ¶å®š**
```
æ—¥å¸¸ç»´æŠ¤ï¼š
- æ¯å‘¨æ‰§è¡Œ docker system prune -f
- å®šæœŸæ¸…ç†æ„å»ºç¼“å­˜å’Œåœæ­¢å®¹å™¨
- è°¨æ…æ¸…ç†æ•°æ®å·å’Œæœªä½¿ç”¨é•œåƒ

ç´§æ€¥æ¸…ç†ï¼š
- ç£ç›˜ç©ºé—´ä¸è¶³æ—¶ä¼˜å…ˆæ¸…ç†ç¼“å­˜
- æŒ‰é£é™©ç­‰çº§é€æ­¥æ¸…ç†èµ„æº  
- æ¸…ç†å‰å¿…é¡»å¤‡ä»½é‡è¦æ•°æ®
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è¿ç»´å®è·µ**
- **èŠ‚çœæˆæœ¬** - æ¸…ç†æ— ç”¨èµ„æºï¼Œå‡å°‘å­˜å‚¨æˆæœ¬
- **æå‡æ€§èƒ½** - å‡å°‘èµ„æºå ç”¨ï¼Œæé«˜ç³»ç»Ÿå“åº”
- **ç®€åŒ–ç®¡ç†** - ä¿æŒç¯å¢ƒæ•´æ´ï¼Œä¾¿äºèµ„æºç®¡ç†
- **æ•…éšœé¢„é˜²** - é¿å…ç£ç›˜æ»¡å¯¼è‡´çš„æœåŠ¡æ•…éšœ

**ğŸ”§ æ¸…ç†æŠ€å·§**
- **æ‰¹é‡æ“ä½œ** - ä½¿ç”¨è„šæœ¬è‡ªåŠ¨åŒ–æ¸…ç†æµç¨‹
- **è¿‡æ»¤æ¸…ç†** - ä½¿ç”¨filterå‚æ•°ç²¾ç¡®æ¸…ç†
- **å®šæ—¶æ¸…ç†** - é…åˆcronå®ç°å®šæ—¶è‡ªåŠ¨æ¸…ç†
- **ç›‘æ§å‘Šè­¦** - ç›‘æ§èµ„æºä½¿ç”¨ç‡ï¼ŒåŠæ—¶æ¸…ç†

**æ ¸å¿ƒè®°å¿†**ï¼š
- Dockerèµ„æºæ¸…ç†æ˜¯è¿ç»´å¿…å¤‡æŠ€èƒ½
- æ¸…ç†å‰åŠ¡å¿…äº†è§£æ“ä½œé£é™©å’Œå½±å“èŒƒå›´
- éµå¾ª"å…ˆæŸ¥çœ‹ã€å†å¤‡ä»½ã€åæ¸…ç†"çš„å®‰å…¨åŸåˆ™
- å®šæœŸæ¸…ç†é…åˆç›‘æ§ï¼Œä¿æŒDockerç¯å¢ƒå¥åº·é«˜æ•ˆ