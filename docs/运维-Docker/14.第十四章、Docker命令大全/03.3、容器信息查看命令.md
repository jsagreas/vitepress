---
title: 3、容器信息查看命令
---
## 📚 目录

1. [容器状态查看](#1-容器状态查看)
2. [容器日志查看](#2-容器日志查看)
3. [容器详细信息](#3-容器详细信息)
4. [资源使用监控](#4-资源使用监控)
5. [进程和端口查看](#5-进程和端口查看)
6. [文件变更追踪](#6-文件变更追踪)
7. [系统信息查看](#7-系统信息查看)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🔍 容器状态查看


### 1.1 docker ps - 查看运行中的容器


**🔸 基本概念**
```
docker ps 是最常用的容器查看命令
作用：显示当前正在运行的容器列表
默认只显示运行状态的容器
```

**💻 基础用法**
```bash
# 查看正在运行的容器
docker ps

# 输出示例
CONTAINER ID   IMAGE     COMMAND                  CREATED        STATUS        PORTS                    NAMES
a1b2c3d4e5f6   nginx     "/docker-entrypoint.…"   2 hours ago    Up 2 hours    0.0.0.0:8080->80/tcp    my-nginx
```

**🔧 常用参数选项**

| 参数 | 含义 | 示例 |
|------|------|------|
| `-a, --all` | 显示所有容器（包括停止的） | `docker ps -a` |
| `-q, --quiet` | 只显示容器ID | `docker ps -q` |
| `-s, --size` | 显示容器文件大小 | `docker ps -s` |
| `-l, --latest` | 显示最新创建的容器 | `docker ps -l` |
| `--format` | 自定义输出格式 | `docker ps --format "table {{.Names}}\t{{.Status}}"` |

### 1.2 docker ps -a - 查看所有容器


**🔸 核心作用**
- 显示**所有容器**：运行中 + 已停止 + 已退出
- 帮助管理历史容器，清理不需要的容器
- 查看容器的完整生命周期状态

**📊 容器状态说明**
```
Up X minutes/hours     → 正在运行
Exited (0) X ago      → 正常退出
Exited (1) X ago      → 异常退出  
Created               → 已创建未启动
Restarting            → 重启中
Paused                → 已暂停
```

**💡 实用示例**
```bash
# 查看所有容器的名称和状态
docker ps -a --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

# 查看最近5个容器
docker ps -a -n 5

# 只显示退出的容器
docker ps -a --filter "status=exited"
```

### 1.3 容器列表字段解读


**📋 输出字段含义**

```
字段解释：
CONTAINER ID  → 容器唯一标识符（短格式）
IMAGE        → 创建容器使用的镜像
COMMAND      → 容器启动时执行的命令
CREATED      → 容器创建时间
STATUS       → 当前运行状态
PORTS        → 端口映射情况
NAMES        → 容器名称（可自定义）
```

---

## 2. 📋 容器日志查看


### 2.1 docker logs - 基础日志查看


**🔸 核心概念**
```
docker logs 用于查看容器的输出日志
获取容器内应用程序的标准输出和错误输出
是排查问题和监控应用的重要工具
```

**💻 基本用法**
```bash
# 查看容器日志（容器名或ID都可以）
docker logs my-nginx
docker logs a1b2c3d4e5f6

# 实时跟踪日志（类似tail -f）
docker logs -f my-nginx
```

### 2.2 日志查看参数详解


**🔧 重要参数**

| 参数 | 作用 | 使用示例 |
|------|------|----------|
| `-f, --follow` | 实时跟踪日志 | `docker logs -f nginx` |
| `-t, --timestamps` | 显示时间戳 | `docker logs -t nginx` |
| `--tail N` | 显示最后N行 | `docker logs --tail 50 nginx` |
| `--since` | 显示指定时间后的日志 | `docker logs --since "2024-01-20" nginx` |
| `--until` | 显示指定时间前的日志 | `docker logs --until "2024-01-21" nginx` |

**💡 实用组合示例**
```bash
# 查看最近100行日志并实时跟踪
docker logs -f --tail 100 my-app

# 查看今天的日志
docker logs --since "$(date '+%Y-%m-%d')" my-app

# 查看带时间戳的最近日志
docker logs -t --tail 50 my-app
```

### 2.3 日志管理最佳实践


**📌 注意事项**
- 容器日志会**占用磁盘空间**，需要定期清理
- 默认情况下，日志会一直累积，直到容器删除
- 生产环境建议配置**日志轮转**策略

**🔧 日志配置示例**
```bash
# 启动容器时限制日志大小和文件数量
docker run -d \
  --log-driver json-file \
  --log-opt max-size=10m \
  --log-opt max-file=3 \
  nginx
```

---

## 3. 🔎 容器详细信息


### 3.1 docker inspect - 获取完整容器信息


**🔸 核心作用**
```
docker inspect 返回容器的完整配置信息
以JSON格式输出，包含所有配置细节
是调试和分析容器配置的利器
```

**💻 基础使用**
```bash
# 查看容器完整信息
docker inspect my-nginx

# 格式化输出（更易读）
docker inspect my-nginx | jq
```

### 3.2 inspect信息分类解读


**📊 主要信息类别**

```
核心信息包含：
🔸 基本信息：ID、名称、创建时间、状态
🔸 网络配置：IP地址、端口映射、网络模式
🔸 存储配置：挂载点、数据卷信息
🔸 环境配置：环境变量、工作目录
🔸 资源限制：内存、CPU配置
🔸 重启策略：重启政策配置
```

**💡 提取特定信息**
```bash
# 获取容器IP地址
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' my-nginx

# 获取容器状态
docker inspect -f '{{.State.Status}}' my-nginx

# 获取端口映射
docker inspect -f '{{.NetworkSettings.Ports}}' my-nginx

# 获取挂载信息
docker inspect -f '{{.Mounts}}' my-nginx
```

### 3.3 常用信息查询


**🎯 实用查询示例**

| 查询目标 | 命令示例 |
|----------|----------|
| **容器IP** | `docker inspect -f '{{.NetworkSettings.IPAddress}}' container` |
| **端口映射** | `docker inspect -f '{{.NetworkSettings.Ports}}' container` |
| **挂载点** | `docker inspect -f '{{.Mounts}}' container` |
| **环境变量** | `docker inspect -f '{{.Config.Env}}' container` |
| **启动命令** | `docker inspect -f '{{.Config.Cmd}}' container` |

---

## 4. 📊 资源使用监控


### 4.1 docker stats - 实时资源监控


**🔸 核心功能**
```
docker stats 实时显示容器资源使用情况
类似于系统的 top 命令
帮助监控容器性能和资源消耗
```

**💻 基本使用**
```bash
# 实时监控所有运行容器
docker stats

# 监控特定容器
docker stats my-nginx my-redis

# 只显示一次数据（不持续刷新）
docker stats --no-stream
```

### 4.2 stats输出信息解读


**📋 输出字段说明**
```
CONTAINER ID  → 容器ID
NAME         → 容器名称
CPU %        → CPU使用百分比
MEM USAGE    → 内存使用量 / 内存限制
MEM %        → 内存使用百分比
NET I/O      → 网络输入/输出
BLOCK I/O    → 磁盘读写
PIDS         → 进程数量
```

**💡 实用技巧**
```bash
# 自定义显示格式
docker stats --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}"

# 显示指定容器的资源使用
docker stats $(docker ps --format {{.Names}} | grep web)
```

### 4.3 资源监控最佳实践


**📌 性能分析要点**
- **CPU使用率持续很高**：可能需要优化应用或增加资源
- **内存使用接近限制**：考虑增加内存限制或优化应用
- **网络I/O异常**：检查网络配置或应用逻辑
- **磁盘I/O频繁**：考虑使用数据卷或优化存储

---

## 5. 🔧 进程和端口查看


### 5.1 docker top - 查看容器进程


**🔸 作用说明**
```
docker top 显示容器内运行的进程
类似于Linux的 ps 命令
帮助了解容器内的进程状态
```

**💻 使用示例**
```bash
# 查看容器进程
docker top my-nginx

# 输出示例
UID    PID    PPID   C   STIME   TTY   TIME       CMD
root   1234   1223   0   10:30   ?     00:00:01   nginx: master process
www    1235   1234   0   10:30   ?     00:00:00   nginx: worker process
```

### 5.2 docker port - 查看端口映射


**🔸 端口映射查看**
```
docker port 显示容器的端口映射关系
查看容器端口与主机端口的对应关系
网络连接问题排查的重要工具
```

**💻 实用命令**
```bash
# 查看所有端口映射
docker port my-nginx

# 查看特定端口映射
docker port my-nginx 80

# 输出示例
80/tcp -> 0.0.0.0:8080
443/tcp -> 0.0.0.0:8443
```

### 5.3 网络连接验证


**🎯 端口连通性测试**
```bash
# 测试容器端口是否可访问
curl http://localhost:8080

# 查看主机监听的端口
netstat -tlnp | grep 8080

# 查看容器内部端口监听
docker exec my-nginx netstat -tlnp
```

---

## 6. 📁 文件变更追踪


### 6.1 docker diff - 查看文件系统变更


**🔸 核心概念**
```
docker diff 显示容器文件系统相对于基础镜像的变更
帮助了解容器运行时产生的文件变化
调试和分析容器行为的有用工具
```

**💻 基本用法**
```bash
# 查看容器文件变更
docker diff my-nginx

# 输出示例（变更类型标记）
A /var/log/nginx/access.log    # A = Added (新增)
C /etc/nginx/nginx.conf        # C = Changed (修改)  
D /tmp/old_file               # D = Deleted (删除)
```

### 6.2 变更类型说明


**📋 变更标记含义**

| 标记 | 含义 | 说明 |
|------|------|------|
| `A` | **Added** | 新增的文件或目录 |
| `C` | **Changed** | 修改的文件或目录 |
| `D` | **Deleted** | 删除的文件或目录 |

**💡 实际应用场景**
- **调试应用**：查看应用运行时创建了哪些文件
- **优化镜像**：分析哪些文件变更应该包含在新镜像中
- **故障排查**：检查配置文件是否被意外修改

---

## 7. 🌐 系统信息查看


### 7.1 docker events - 实时事件监控


**🔸 事件流监控**
```
docker events 实时显示Docker daemon的事件流
监控容器、镜像、网络等的状态变化
系统级别的操作监控和审计工具
```

**💻 基本使用**
```bash
# 实时监控所有事件
docker events

# 监控特定容器的事件
docker events --filter container=my-nginx

# 监控特定时间段的事件
docker events --since "2024-01-20T10:00:00" --until "2024-01-20T11:00:00"
```

### 7.2 docker version - 版本信息


**🔸 版本查看**
```bash
# 查看Docker版本信息
docker version

# 简洁版本显示
docker --version
```

**📊 版本信息包含**
- **Client版本**：Docker客户端版本
- **Server版本**：Docker引擎版本
- **API版本**：Docker API版本
- **构建信息**：编译时间、Go版本等

### 7.3 docker info - 系统详细信息


**🔸 系统状态概览**
```
docker info 显示Docker系统的详细信息
包含存储、网络、插件等完整配置
系统诊断和故障排查的重要工具
```

**💻 查看系统信息**
```bash
# 查看完整系统信息
docker info

# 格式化输出特定信息
docker info --format '{{.ServerVersion}}'
```

**📋 主要信息类别**
- **容器统计**：运行中、暂停、停止的容器数量
- **镜像统计**：本地镜像数量和存储大小
- **存储驱动**：存储后端配置信息
- **网络配置**：网络驱动和插件信息
- **系统资源**：CPU、内存、存储空间使用情况

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的基本命令


```
🔸 docker ps / docker ps -a：容器状态查看的基础
🔸 docker logs：日志查看和问题排查的核心工具
🔸 docker inspect：获取容器完整配置信息
🔸 docker stats：实时资源监控和性能分析
🔸 docker info：系统状态和配置信息总览
```

### 8.2 命令使用场景对应


**🎯 日常运维场景**

| 场景需求 | 推荐命令 | 关键参数 |
|----------|----------|----------|
| **检查容器运行状态** | `docker ps -a` | `-a` 查看所有容器 |
| **排查应用问题** | `docker logs -f` | `-f` 实时跟踪日志 |
| **监控资源使用** | `docker stats` | `--no-stream` 单次查看 |
| **查看网络配置** | `docker inspect` | `-f` 格式化输出特定信息 |
| **分析文件变更** | `docker diff` | 无特殊参数 |

### 8.3 实用技巧总结


**💡 效率提升技巧**
```
🔹 组合使用：docker ps -q | xargs docker logs
🔹 格式化输出：使用--format自定义显示内容
🔹 过滤查询：使用--filter筛选特定条件
🔹 时间范围：--since和--until限定时间范围
🔹 实时监控：-f参数实现实时跟踪效果
```

**🔧 常见问题解决**
- **容器无法访问**：用`docker port`检查端口映射
- **应用异常退出**：用`docker logs`查看错误信息  
- **资源消耗异常**：用`docker stats`监控资源使用
- **配置问题排查**：用`docker inspect`查看完整配置
- **文件丢失问题**：用`docker diff`检查文件变更

### 8.4 学习记忆要点


**🧠 记忆口诀**
```
ps看状态，logs查日志
inspect详情，stats监控
top看进程，port查端口  
diff看变更，info看系统
events追事件，version看版本
```

**核心理解**：
- 这些命令是Docker日常运维的**基础工具包**
- 掌握参数组合使用能大幅提升**排查效率**
- 实际工作中往往需要**多个命令配合**使用
- 熟练使用这些命令是成为Docker专家的**必经之路**