---
title: 3ã€Composeå‘½ä»¤æ“ä½œ
---
## ğŸ“š ç›®å½•

1. [Docker ComposeåŸºç¡€æ¦‚å¿µ](#1-docker-composeåŸºç¡€æ¦‚å¿µ)
2. [æ ¸å¿ƒå¯åŠ¨åœæ­¢å‘½ä»¤](#2-æ ¸å¿ƒå¯åŠ¨åœæ­¢å‘½ä»¤)
3. [çŠ¶æ€ç›‘æ§ä¸æ—¥å¿—æŸ¥çœ‹](#3-çŠ¶æ€ç›‘æ§ä¸æ—¥å¿—æŸ¥çœ‹)
4. [å®¹å™¨äº¤äº’ä¸æ‰§è¡Œå‘½ä»¤](#4-å®¹å™¨äº¤äº’ä¸æ‰§è¡Œå‘½ä»¤)
5. [é•œåƒæ„å»ºä¸æ‹‰å–](#5-é•œåƒæ„å»ºä¸æ‹‰å–)
6. [é«˜çº§ç®¡ç†å‘½ä»¤](#6-é«˜çº§ç®¡ç†å‘½ä»¤)
7. [å®æˆ˜åº”ç”¨åœºæ™¯](#7-å®æˆ˜åº”ç”¨åœºæ™¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ³ Docker ComposeåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Docker Compose


**ç®€å•ç†è§£**ï¼šDocker Composeå°±åƒæ˜¯ä¸€ä¸ª"æŒ‡æŒ¥å®¶"ï¼Œå¯ä»¥åŒæ—¶ç®¡ç†å¤šä¸ªDockerå®¹å™¨çš„å¯åŠ¨ã€åœæ­¢ã€é…ç½®ç­‰æ“ä½œã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆéº»çƒ¦ï¼‰ï¼š
docker run nginx...
docker run mysql...  
docker run redis...
ä¸€ä¸ªä¸ªæ‰‹åŠ¨å¯åŠ¨ï¼Œå®¹æ˜“å‡ºé”™

Composeæ–¹å¼ï¼ˆç®€å•ï¼‰ï¼š
docker-compose up
ä¸€æ¡å‘½ä»¤å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼
```

**ğŸ” æ ¸å¿ƒä»·å€¼**
- **æ‰¹é‡ç®¡ç†**ï¼šä¸€æ¬¡æ€§æ“ä½œå¤šä¸ªå®¹å™¨
- **é…ç½®ç»Ÿä¸€**ï¼šç”¨YAMLæ–‡ä»¶ç»Ÿä¸€ç®¡ç†é…ç½®
- **ç¯å¢ƒä¸€è‡´**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¿æŒä¸€è‡´
- **ä¾èµ–ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†å®¹å™¨é—´çš„å¯åŠ¨é¡ºåº

### 1.2 Composeæ–‡ä»¶ç»“æ„


**ğŸ“‹ åŸºæœ¬ç»“æ„**ï¼šæ¯ä¸ªComposeé¡¹ç›®éƒ½æœ‰ä¸€ä¸ª`docker-compose.yml`æ–‡ä»¶

```yaml
# æœ€ç®€å•çš„ä¾‹å­
version: '3.8'
services:
  web:
    image: nginx
    ports:
      - "80:80"
  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: password
```

**ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**
> å°±åƒä¸€ä¸ªé¤å…çš„èœå•ï¼Œåˆ—å‡ºäº†æ‰€æœ‰è¦å‡†å¤‡çš„èœå“ï¼ˆæœåŠ¡ï¼‰ï¼Œæ¯é“èœçš„åšæ³•ï¼ˆé…ç½®ï¼‰ï¼Œä»¥åŠä¸Šèœé¡ºåºï¼ˆä¾èµ–å…³ç³»ï¼‰

---

## 2. ğŸš€ æ ¸å¿ƒå¯åŠ¨åœæ­¢å‘½ä»¤


### 2.1 docker-compose up - å¯åŠ¨æœåŠ¡


**ğŸ”¸ åŸºæœ¬ç”¨æ³•**
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå‰å°è¿è¡Œï¼‰
docker-compose up

# åå°è¿è¡Œï¼ˆæœ€å¸¸ç”¨ï¼‰
docker-compose up -d

# å¯åŠ¨æŒ‡å®šæœåŠ¡
docker-compose up web
```

**ğŸ“Š å¸¸ç”¨å‚æ•°å¯¹æ¯”**

| å‚æ•° | ä½œç”¨ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `-d` | **åå°è¿è¡Œ** | ç”Ÿäº§ç¯å¢ƒï¼Œä¸å ç”¨ç»ˆç«¯ |
| `--build` | **å¼ºåˆ¶é‡æ–°æ„å»º** | ä»£ç æ›´æ–°åé‡å¯ |
| `--force-recreate` | **å¼ºåˆ¶é‡å»ºå®¹å™¨** | é…ç½®æ”¹å˜ååº”ç”¨ |
| `--scale` | **æ‰©å®¹æœåŠ¡** | æ€§èƒ½è°ƒä¼˜ |

**ğŸ¯ å®é™…åº”ç”¨ç¤ºä¾‹**
```bash
# å¼€å‘ç¯å¢ƒï¼šå‰å°è¿è¡Œï¼Œæ–¹ä¾¿æŸ¥çœ‹æ—¥å¿—
docker-compose up

# ç”Ÿäº§ç¯å¢ƒï¼šåå°è¿è¡Œ
docker-compose up -d

# ä»£ç æ›´æ–°åï¼šé‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up --build -d

# æ‰©å®¹webæœåŠ¡åˆ°3ä¸ªå®ä¾‹
docker-compose up --scale web=3 -d
```

### 2.2 docker-compose down - åœæ­¢æœåŠ¡


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**ï¼š`down`å‘½ä»¤ä¼šåœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼Œä½†ä¿ç•™æ•°æ®å·å’Œé•œåƒ

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆå±é™©æ“ä½œï¼ï¼‰
docker-compose down -v

# åœæ­¢å¹¶åˆ é™¤é•œåƒ
docker-compose down --rmi all
```

**âš ï¸ é‡è¦æé†’**
> ä½¿ç”¨`-v`å‚æ•°ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼åœ¨ç”Ÿäº§ç¯å¢ƒè¦ç‰¹åˆ«å°å¿ƒ

**ğŸ”„ å¯åŠ¨åœæ­¢æµç¨‹å›¾**
```
å¯åŠ¨æµç¨‹ï¼š
æ£€æŸ¥composeæ–‡ä»¶ â†’ æ‹‰å–é•œåƒ â†’ åˆ›å»ºç½‘ç»œ â†’ å¯åŠ¨å®¹å™¨

åœæ­¢æµç¨‹ï¼š  
åœæ­¢å®¹å™¨ â†’ åˆ é™¤å®¹å™¨ â†’ åˆ é™¤ç½‘ç»œ â†’ (å¯é€‰)åˆ é™¤æ•°æ®å·
```

---

## 3. ğŸ‘€ çŠ¶æ€ç›‘æ§ä¸æ—¥å¿—æŸ¥çœ‹


### 3.1 docker-compose ps - æŸ¥çœ‹çŠ¶æ€


**ğŸ”¸ æŸ¥çœ‹è¿è¡ŒçŠ¶æ€**ï¼šäº†è§£å“ªäº›æœåŠ¡åœ¨è¿è¡Œï¼Œå“ªäº›æœ‰é—®é¢˜

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æŒ‡å®šæœåŠ¡çŠ¶æ€  
docker-compose ps web
```

**ğŸ“‹ çŠ¶æ€ä¿¡æ¯è§£è¯»**
```
Name              Command               State           Ports
----------------------------------------------------------------
myapp_web_1      nginx -g daemon off;      Up      0.0.0.0:80->80/tcp
myapp_db_1       docker-entrypoint.sh      Up      3306/tcp
```

**ğŸ” çŠ¶æ€è¯´æ˜**ï¼š
- **Up**ï¼šğŸŸ¢ æ­£å¸¸è¿è¡Œ
- **Exit 0**ï¼šğŸŸ¡ æ­£å¸¸é€€å‡º
- **Exit 1**ï¼šğŸ”´ å¼‚å¸¸é€€å‡ºï¼Œéœ€è¦æ£€æŸ¥

### 3.2 docker-compose logs - æ—¥å¿—æŸ¥çœ‹


**ğŸ”¸ åŸºæœ¬ç”¨æ³•**ï¼šæ’æŸ¥é—®é¢˜çš„é‡è¦å·¥å…·

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# å®æ—¶è·Ÿè¸ªæ—¥å¿—ï¼ˆç±»ä¼¼tail -fï¼‰
docker-compose logs -f

# æŸ¥çœ‹æŒ‡å®šæœåŠ¡æ—¥å¿—
docker-compose logs web

# åªæ˜¾ç¤ºæœ€è¿‘50è¡Œæ—¥å¿—
docker-compose logs --tail=50 web
```

**ğŸ’¡ æ—¥å¿—æŸ¥çœ‹æŠ€å·§**
```bash
# å¼€å‘è°ƒè¯•ï¼šå®æ—¶æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f --tail=100 web

# é—®é¢˜æ’æŸ¥ï¼šæŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker-compose logs db | grep ERROR

# æ€§èƒ½åˆ†æï¼šæŸ¥çœ‹è®¿é—®æ—¥å¿—
docker-compose logs web | grep "GET"
```

**ğŸ”§ æ—¥å¿—ç®¡ç†æœ€ä½³å®è·µ**
- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨`-f`å‚æ•°å®æ—¶æŸ¥çœ‹
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šé…ç½®æ—¥å¿—è½®è½¬ï¼Œé¿å…æ—¥å¿—æ–‡ä»¶è¿‡å¤§
- **é—®é¢˜æ’æŸ¥**ï¼šç»“åˆ`grep`ç­‰å·¥å…·ç­›é€‰å…³é”®ä¿¡æ¯

---

## 4. ğŸ’» å®¹å™¨äº¤äº’ä¸æ‰§è¡Œå‘½ä»¤


### 4.1 docker-compose exec - æ‰§è¡Œå‘½ä»¤


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**ï¼šåœ¨è¿è¡Œä¸­çš„å®¹å™¨é‡Œæ‰§è¡Œå‘½ä»¤ï¼Œå°±åƒ"è¿œç¨‹ç™»å½•"åˆ°å®¹å™¨å†…éƒ¨

```bash
# åœ¨webå®¹å™¨ä¸­æ‰§è¡Œbashå‘½ä»¤
docker-compose exec web bash

# åœ¨dbå®¹å™¨ä¸­æ‰§è¡Œmysqlå‘½ä»¤
docker-compose exec db mysql -uroot -p

# æ‰§è¡Œå•ä¸ªå‘½ä»¤
docker-compose exec web ls -la
```

**ğŸ¯ å¸¸ç”¨æ“ä½œåœºæ™¯**

| åœºæ™¯ | å‘½ä»¤ç¤ºä¾‹ | è¯´æ˜ |
|------|----------|------|
| **è¿›å…¥å®¹å™¨è°ƒè¯•** | `docker-compose exec web bash` | åƒSSHç™»å½•ä¸€æ · |
| **æ•°æ®åº“æ“ä½œ** | `docker-compose exec db mysql -uroot -p` | ç›´æ¥æ“ä½œæ•°æ®åº“ |
| **æŸ¥çœ‹æ–‡ä»¶** | `docker-compose exec web cat /var/log/nginx/error.log` | æŸ¥çœ‹å®¹å™¨å†…æ–‡ä»¶ |
| **é‡å¯æœåŠ¡** | `docker-compose exec web nginx -s reload` | é‡æ–°åŠ è½½é…ç½® |

**ğŸ’¡ å®ç”¨å°æŠ€å·§**
```bash
# ä¸€é”®è¿›å…¥å¼€å‘ç¯å¢ƒ
docker-compose exec web bash

# å¿«é€ŸæŸ¥çœ‹é…ç½®æ–‡ä»¶
docker-compose exec web cat /etc/nginx/nginx.conf

# å®æ—¶ç›‘æ§è¿›ç¨‹
docker-compose exec web top

# æŸ¥çœ‹ç«¯å£ç›‘å¬æƒ…å†µ
docker-compose exec web netstat -tulpn
```

### 4.2 ä¸docker runçš„åŒºåˆ«


**ğŸ” ç†è§£å·®å¼‚**ï¼š
- **docker run**ï¼šåˆ›å»ºæ–°å®¹å™¨æ‰§è¡Œå‘½ä»¤
- **docker-compose exec**ï¼šåœ¨å·²è¿è¡Œå®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤

```bash
# é”™è¯¯æ–¹å¼ï¼šä¼šåˆ›å»ºæ–°å®¹å™¨
docker run myapp_web ls

# æ­£ç¡®æ–¹å¼ï¼šåœ¨ç°æœ‰å®¹å™¨ä¸­æ‰§è¡Œ
docker-compose exec web ls
```

---

## 5. ğŸ”¨ é•œåƒæ„å»ºä¸æ‹‰å–


### 5.1 docker-compose build - æ„å»ºé•œåƒ


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**ï¼šå½“ä½ çš„æœåŠ¡ä½¿ç”¨Dockerfileæ—¶ï¼Œéœ€è¦æ„å»ºè‡ªå®šä¹‰é•œåƒ

**ğŸ“‹ æ„å»ºç›¸å…³é…ç½®**
```yaml
version: '3.8'
services:
  web:
    build: .  # ä½¿ç”¨å½“å‰ç›®å½•çš„Dockerfile
    ports:
      - "80:80"
  
  api:
    build:
      context: ./api      # æŒ‡å®šæ„å»ºä¸Šä¸‹æ–‡
      dockerfile: Dockerfile.dev  # æŒ‡å®šDockerfile
```

**ğŸš€ æ„å»ºå‘½ä»¤**
```bash
# æ„å»ºæ‰€æœ‰éœ€è¦æ„å»ºçš„æœåŠ¡
docker-compose build

# æ„å»ºæŒ‡å®šæœåŠ¡
docker-compose build web

# å¼ºåˆ¶é‡æ–°æ„å»ºï¼ˆå¿½ç•¥ç¼“å­˜ï¼‰
docker-compose build --no-cache

# å¹¶è¡Œæ„å»ºå¤šä¸ªæœåŠ¡
docker-compose build --parallel
```

### 5.2 docker-compose pull - æ‹‰å–é•œåƒ


**ğŸ”¸ åŸºæœ¬ç”¨æ³•**ï¼šæ›´æ–°æœåŠ¡ä½¿ç”¨çš„é•œåƒ

```bash
# æ‹‰å–æ‰€æœ‰æœåŠ¡çš„æœ€æ–°é•œåƒ
docker-compose pull

# æ‹‰å–æŒ‡å®šæœåŠ¡çš„é•œåƒ
docker-compose pull db

# é™é»˜æ‹‰å–ï¼ˆä¸æ˜¾ç¤ºè¿›åº¦ï¼‰
docker-compose pull -q
```

**ğŸ”„ æ›´æ–°æµç¨‹å›¾**
```
ä»£ç æ›´æ–°æµç¨‹ï¼š
ä¿®æ”¹ä»£ç  â†’ buildæ„å»º â†’ upé‡å¯ â†’ æœåŠ¡æ›´æ–°

é•œåƒæ›´æ–°æµç¨‹ï¼š
pullæ‹‰å– â†’ downåœæ­¢ â†’ upå¯åŠ¨ â†’ æœåŠ¡æ›´æ–°
```

**ğŸ’¡ å®é™…å¼€å‘åœºæ™¯**
```bash
# å¼€å‘æµç¨‹ï¼šä»£ç æ”¹åŠ¨å
docker-compose build web
docker-compose up -d web

# ç”Ÿäº§éƒ¨ç½²ï¼šé•œåƒæ›´æ–°å
docker-compose pull
docker-compose up -d
```

---

## 6. âš™ï¸ é«˜çº§ç®¡ç†å‘½ä»¤


### 6.1 æœåŠ¡æ‰©ç¼©å®¹


**ğŸ”¸ docker-compose scale**ï¼ˆæ—§ç‰ˆæœ¬ï¼‰
```bash
# æ‰©å®¹webæœåŠ¡åˆ°3ä¸ªå®ä¾‹
docker-compose scale web=3

# ç¼©å®¹åˆ°1ä¸ªå®ä¾‹
docker-compose scale web=1
```

**ğŸ”¸ æ–°ç‰ˆæœ¬æ¨èæ–¹å¼**
```bash
# ä½¿ç”¨upå‘½ä»¤çš„--scaleå‚æ•°
docker-compose up --scale web=3 -d
```

### 6.2 é…ç½®éªŒè¯


**ğŸ”¸ éªŒè¯composeæ–‡ä»¶**
```bash
# éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•
docker-compose config

# æŸ¥çœ‹æœ€ç»ˆé…ç½®ï¼ˆåˆå¹¶æ‰€æœ‰æ–‡ä»¶åï¼‰
docker-compose config --services

# éªŒè¯ç‰¹å®šæ–‡ä»¶
docker-compose -f docker-compose.prod.yml config
```

### 6.3 èµ„æºæ¸…ç†


**ğŸ§¹ æ¸…ç†å‘½ä»¤ç»„åˆ**
```bash
# åœæ­¢å¹¶æ¸…ç†æ‰€æœ‰èµ„æº
docker-compose down -v --rmi all --remove-orphans

# ä»…æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune

# æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨
docker container prune
```

**ğŸ“Š èµ„æºæ¸…ç†å¯¹æ¯”è¡¨**

| å‘½ä»¤ | æ¸…ç†å†…å®¹ | é£é™©ç­‰çº§ |
|------|----------|----------|
| `docker-compose down` | å®¹å™¨ã€ç½‘ç»œ | ğŸŸ¢ å®‰å…¨ |
| `docker-compose down -v` | å®¹å™¨ã€ç½‘ç»œã€**æ•°æ®å·** | ğŸ”´ å±é™© |
| `docker-compose down --rmi all` | å®¹å™¨ã€ç½‘ç»œã€**é•œåƒ** | ğŸŸ¡ ä¸­ç­‰ |

---

## 7. ğŸ¯ å®æˆ˜åº”ç”¨åœºæ™¯


### 7.1 å¼€å‘ç¯å¢ƒæ­å»º


**ğŸ—ï¸ å…¸å‹çš„Webå¼€å‘æ ˆ**
```yaml
version: '3.8'
services:
  # å‰ç«¯å¼€å‘æœåŠ¡å™¨
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
    
  # åç«¯APIæœåŠ¡
  backend:
    build: ./backend
    ports:
      - "8080:8080"
    depends_on:
      - db
    environment:
      - DB_HOST=db
    
  # æ•°æ®åº“
  db:
    image: postgres:13
    environment:
      POSTGRES_PASSWORD: dev123
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

**ğŸš€ å¼€å‘å·¥ä½œæµ**
```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose up -d

# 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 3. æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f backend

# 4. è¿›å…¥åç«¯è°ƒè¯•
docker-compose exec backend bash

# 5. é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend

# 6. åœæ­¢ç¯å¢ƒ
docker-compose down
```

### 7.2 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²


**ğŸ”’ ç”Ÿäº§ç¯å¢ƒé…ç½®è¦ç‚¹**
```yaml
version: '3.8'
services:
  web:
    image: nginx:alpine
    restart: always  # è‡ªåŠ¨é‡å¯
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    
  app:
    image: myapp:latest
    restart: always
    environment:
      - NODE_ENV=production
    depends_on:
      - db
    
  db:
    image: postgres:13
    restart: always
    environment:
      POSTGRES_PASSWORD_FILE: /run/secrets/db_password
    secrets:
      - db_password
    volumes:
      - postgres_data:/var/lib/postgresql/data

secrets:
  db_password:
    file: ./db_password.txt

volumes:
  postgres_data:
```

**ğŸ”„ ç”Ÿäº§éƒ¨ç½²æµç¨‹**
```bash
# 1. æ‹‰å–æœ€æ–°é•œåƒ
docker-compose pull

# 2. ä¼˜é›…é‡å¯æœåŠ¡
docker-compose up -d --no-deps app

# 3. å¥åº·æ£€æŸ¥
docker-compose ps
docker-compose logs --tail=50 app

# 4. å¦‚æœ‰é—®é¢˜ï¼Œå¿«é€Ÿå›æ»š
docker-compose down
docker-compose up -d
```

### 7.3 é—®é¢˜æ’æŸ¥åœºæ™¯


**ğŸ” å¸¸è§é—®é¢˜è¯Šæ–­**

**é—®é¢˜1ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥**
```bash
# 1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker-compose logs <service_name>

# 3. æ£€æŸ¥é…ç½®
docker-compose config

# 4. è¿›å…¥å®¹å™¨è°ƒè¯•
docker-compose exec <service_name> bash
```

**é—®é¢˜2ï¼šæœåŠ¡é—´æ— æ³•é€šä¿¡**
```bash
# 1. æ£€æŸ¥ç½‘ç»œ
docker-compose exec web ping db

# 2. æ£€æŸ¥ç«¯å£ç›‘å¬
docker-compose exec db netstat -tulpn

# 3. æŸ¥çœ‹ç¯å¢ƒå˜é‡
docker-compose exec web env
```

**é—®é¢˜3ï¼šæ•°æ®ä¸¢å¤±**
```bash
# 1. æ£€æŸ¥æ•°æ®å·
docker volume ls

# 2. æŸ¥çœ‹æ•°æ®å·æŒ‚è½½
docker-compose exec db mount | grep /var/lib

# 3. å¤‡ä»½æ•°æ®
docker-compose exec db pg_dump -U postgres mydb > backup.sql
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå‘½ä»¤


```
ğŸ”¸ åŸºç¡€æ“ä½œï¼š
â€¢ docker-compose up -d     â†’ åå°å¯åŠ¨æ‰€æœ‰æœåŠ¡
â€¢ docker-compose down      â†’ åœæ­¢å¹¶åˆ é™¤å®¹å™¨
â€¢ docker-compose ps        â†’ æŸ¥çœ‹æœåŠ¡çŠ¶æ€
â€¢ docker-compose logs -f   â†’ å®æ—¶æŸ¥çœ‹æ—¥å¿—

ğŸ”¸ äº¤äº’æ“ä½œï¼š
â€¢ docker-compose exec <service> bash  â†’ è¿›å…¥å®¹å™¨
â€¢ docker-compose restart <service>    â†’ é‡å¯æœåŠ¡
â€¢ docker-compose build               â†’ æ„å»ºé•œåƒ
â€¢ docker-compose pull                â†’ æ‹‰å–é•œåƒ
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Compose vs å•å®¹å™¨**
- **å•å®¹å™¨**ï¼šé€‚åˆç®€å•åº”ç”¨ï¼Œä¸€ä¸ªæœåŠ¡ä¸€ä¸ªå®¹å™¨
- **Compose**ï¼šé€‚åˆå¤æ‚åº”ç”¨ï¼Œå¤šä¸ªç›¸å…³æœåŠ¡ç»„åˆ

**ğŸ”¹ å¼€å‘vsç”Ÿäº§ç¯å¢ƒ**
- **å¼€å‘ç¯å¢ƒ**ï¼šé‡å¯å¿«ï¼Œæ—¥å¿—è¯¦ç»†ï¼Œæ–¹ä¾¿è°ƒè¯•
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šç¨³å®šæ€§ä¼˜å…ˆï¼Œè‡ªåŠ¨é‡å¯ï¼Œå®‰å…¨é…ç½®

**ğŸ”¹ æ•°æ®æŒä¹…åŒ–**
- **ä¸´æ—¶æ•°æ®**ï¼šå­˜å‚¨åœ¨å®¹å™¨å†…ï¼Œå®¹å™¨åˆ é™¤æ•°æ®ä¸¢å¤±
- **æŒä¹…æ•°æ®**ï¼šä½¿ç”¨æ•°æ®å·(volumes)ï¼Œæ•°æ®ç‹¬ç«‹äºå®¹å™¨ç”Ÿå‘½å‘¨æœŸ

### 8.3 æœ€ä½³å®è·µæŒ‡å—


**ğŸ“ å­¦ä¹ æ£€æŸ¥ç‚¹**
- [ ] ç†è§£Composeçš„ä½œç”¨å’Œä¼˜åŠ¿
- [ ] æŒæ¡åŸºæœ¬çš„å¯åŠ¨åœæ­¢å‘½ä»¤
- [ ] ä¼šæŸ¥çœ‹æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—
- [ ] èƒ½è¿›å…¥å®¹å™¨è¿›è¡Œè°ƒè¯•
- [ ] äº†è§£é•œåƒæ„å»ºå’Œæ›´æ–°æµç¨‹

**ğŸ¯ è®°å¿†å£è¯€**
> upå¯downåœpsçœ‹çŠ¶æ€ï¼Œlogsæ—¥å¿—execè¿›å®¹å™¨ï¼Œbuildæ„å»ºpullæ‹‰é•œåƒ

**âš¡ æ€§èƒ½å…³é”®ç‚¹**
- ä½¿ç”¨`-d`å‚æ•°åå°è¿è¡Œï¼Œé‡Šæ”¾ç»ˆç«¯
- å¼€å‘æ—¶ä½¿ç”¨`logs -f`å®æ—¶æŸ¥çœ‹æ—¥å¿—
- ç”Ÿäº§ç¯å¢ƒé…ç½®`restart: always`è‡ªåŠ¨é‡å¯
- å®šæœŸæ¸…ç†æ— ç”¨é•œåƒå’Œå®¹å™¨é‡Šæ”¾ç©ºé—´

**ğŸš¨ æ³¨æ„äº‹é¡¹**
- `docker-compose down -v` ä¼šåˆ é™¤æ•°æ®ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨
- ä¿®æ”¹composeæ–‡ä»¶åéœ€è¦é‡æ–°upæ‰èƒ½ç”Ÿæ•ˆ
- æœåŠ¡ååœ¨composeæ–‡ä»¶ä¸­å°±æ˜¯å®¹å™¨çš„ç½‘ç»œåœ°å€
- ç«¯å£æ˜ å°„æ ¼å¼ï¼š"ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£"

### 8.4 å®é™…åº”ç”¨ä»·å€¼


**ğŸª å¼€å‘æ•ˆç‡æå‡**
- **ä¸€é”®å¯åŠ¨**ï¼šå¤æ‚çš„å¤šæœåŠ¡ç¯å¢ƒä¸€æ¡å‘½ä»¤æå®š
- **ç¯å¢ƒä¸€è‡´**ï¼šå›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„å¼€å‘ç¯å¢ƒ
- **å¿«é€Ÿè°ƒè¯•**ï¼šæ—¥å¿—æŸ¥çœ‹ã€å®¹å™¨è¿›å…¥éƒ½å¾ˆæ–¹ä¾¿

**ğŸ”§ è¿ç»´ç®¡ç†ç®€åŒ–**
- **æ‰¹é‡æ“ä½œ**ï¼šåŒæ—¶ç®¡ç†å¤šä¸ªç›¸å…³æœåŠ¡
- **é…ç½®ç®¡ç†**ï¼šYAMLæ–‡ä»¶ç»Ÿä¸€ç®¡ç†æ‰€æœ‰é…ç½®
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šé…ç½®æ–‡ä»¶å¯ä»¥ç‰ˆæœ¬åŒ–ç®¡ç†

**ğŸ’¡ å…³é”®æ´å¯Ÿ**
> Docker Composeä¸åªæ˜¯å¯åŠ¨å®¹å™¨çš„å·¥å…·ï¼Œæ›´æ˜¯ç°ä»£åº”ç”¨éƒ¨ç½²å’Œç®¡ç†çš„æ ‡å‡†æ–¹å¼ã€‚æŒæ¡å®ƒç­‰äºæŒæ¡äº†å®¹å™¨ç¼–æ’çš„åŸºç¡€ï¼Œä¸ºåç»­å­¦ä¹ Kubernetesç­‰é«˜çº§ç¼–æ’å·¥å…·æ‰“ä¸‹åŸºç¡€ã€‚

**æ ¸å¿ƒè®°å¿†**ï¼š
- Composeè®©å¤šå®¹å™¨ç®¡ç†å˜å¾—ç®€å•
- ä¸€ä¸ªYAMLæ–‡ä»¶æè¿°æ•´ä¸ªåº”ç”¨æ ˆ
- å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®åˆ†ç¦»
- å‘½ä»¤ç®€å•ä½†åŠŸèƒ½å¼ºå¤§ï¼Œæ˜¯Dockerç”Ÿæ€çš„é‡è¦ç»„æˆéƒ¨åˆ†