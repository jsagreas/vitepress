---
title: 5ã€å¾®æœåŠ¡æ¶æ„å®è·µ
---
## ğŸ“š ç›®å½•

1. [å¾®æœåŠ¡æ¶æ„åŸºç¡€æ¦‚å¿µ](#1-å¾®æœåŠ¡æ¶æ„åŸºç¡€æ¦‚å¿µ)
2. [Dockerå®¹å™¨åŒ–å¾®æœåŠ¡](#2-Dockerå®¹å™¨åŒ–å¾®æœåŠ¡)
3. [æœåŠ¡æ³¨å†Œä¸å‘ç°](#3-æœåŠ¡æ³¨å†Œä¸å‘ç°)
4. [APIç½‘å…³éƒ¨ç½²å®è·µ](#4-APIç½‘å…³éƒ¨ç½²å®è·µ)
5. [é…ç½®ä¸­å¿ƒç®¡ç†](#5-é…ç½®ä¸­å¿ƒç®¡ç†)
6. [æœåŠ¡é—´é€šä¿¡](#6-æœåŠ¡é—´é€šä¿¡)
7. [åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ](#7-åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ)
8. [æœåŠ¡æ²»ç†ç­–ç•¥](#8-æœåŠ¡æ²»ç†ç­–ç•¥)
9. [å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º](#9-å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„


**ğŸ’­ æ€è€ƒä¸€ä¸‹**ï¼šä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡ä¸€ä¸ªåº”ç”¨åŠŸèƒ½ç‰¹åˆ«å¤šï¼Œæ”¹ä¸€ä¸ªå°åŠŸèƒ½æ•´ä¸ªç³»ç»Ÿéƒ½è¦é‡æ–°å‘å¸ƒçš„æƒ…å†µï¼Ÿ

**ğŸ” æ·±å…¥ç†è§£**ï¼šå¾®æœåŠ¡æ¶æ„å°±æ˜¯æŠŠä¸€ä¸ªå¤§åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªå°çš„ã€ç‹¬ç«‹çš„æœåŠ¡

```
ä¼ ç»Ÿå•ä½“æ¶æ„ vs å¾®æœåŠ¡æ¶æ„ï¼š

å•ä½“æ¶æ„ï¼ˆä¸€ä¸ªå¤§ç›’å­ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ç”µå•†åº”ç”¨ç³»ç»Ÿ              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ç”¨æˆ· â”‚ â”‚å•†å“ â”‚ â”‚è®¢å• â”‚       â”‚
â”‚  â”‚ç®¡ç† â”‚ â”‚ç®¡ç† â”‚ â”‚ç®¡ç† â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         å…±äº«æ•°æ®åº“               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¾®æœåŠ¡æ¶æ„ï¼ˆå¤šä¸ªå°ç›’å­ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç”¨æˆ·æœåŠ¡  â”‚  â”‚å•†å“æœåŠ¡  â”‚  â”‚è®¢å•æœåŠ¡  â”‚
â”‚         â”‚  â”‚         â”‚  â”‚         â”‚
â”‚ç‹¬ç«‹æ•°æ®åº“â”‚  â”‚ç‹¬ç«‹æ•°æ®åº“â”‚  â”‚ç‹¬ç«‹æ•°æ®åº“â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              APIç½‘å…³
```

### 1.2 å¾®æœåŠ¡çš„æ ¸å¿ƒç‰¹ç‚¹


**ğŸ·ï¸ ä¸“ä¸šæœ¯è¯­è§£é‡Š**ï¼š
- **`æœåŠ¡è‡ªæ²»`** = æ¯ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€è¿è¡Œ
- **`å»ä¸­å¿ƒåŒ–`** = æ²¡æœ‰ç»Ÿä¸€çš„ä¸­å¤®æ§åˆ¶ï¼Œå„æœåŠ¡è‡ªå·±ç®¡è‡ªå·±
- **`æŠ€æœ¯æ ˆæ— å…³`** = ä¸åŒæœåŠ¡å¯ä»¥ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å’Œæ•°æ®åº“

**âœ… ä¼˜åŠ¿è¯´æ˜**ï¼š
```
ğŸ¯ ç‹¬ç«‹éƒ¨ç½²ï¼šæ”¹ç”¨æˆ·æœåŠ¡ä¸å½±å“è®¢å•æœåŠ¡
ğŸ”„ æŠ€æœ¯çµæ´»ï¼šç”¨æˆ·æœåŠ¡ç”¨Javaï¼Œå•†å“æœåŠ¡ç”¨Python
ğŸ“ˆ æ‰©å±•æ€§å¼ºï¼šè®¿é—®é‡å¤§çš„æœåŠ¡å¯ä»¥å¤šéƒ¨ç½²å‡ ä¸ªå®ä¾‹
ğŸ‘¥ å›¢é˜Ÿåä½œï¼šä¸åŒå›¢é˜Ÿè´Ÿè´£ä¸åŒæœåŠ¡ï¼Œå‡å°‘å†²çª
```

**âŒ æŒ‘æˆ˜æé†’**ï¼š
```
ğŸ”— æœåŠ¡é€šä¿¡ï¼šæœåŠ¡ä¹‹é—´å¦‚ä½•è°ƒç”¨ï¼Ÿ
ğŸ” ç›‘æ§å¤æ‚ï¼šå¤šä¸ªæœåŠ¡æ€ä¹ˆç»Ÿä¸€ç›‘æ§ï¼Ÿ
ğŸ¯ æ•°æ®ä¸€è‡´ï¼šè·¨æœåŠ¡çš„æ•°æ®å¦‚ä½•ä¿è¯ä¸€è‡´ï¼Ÿ
ğŸ› ï¸ è¿ç»´å¤æ‚ï¼šéƒ¨ç½²å’Œç®¡ç†çš„æœåŠ¡å˜å¤šäº†
```

---

## 2. ğŸ“¦ Dockerå®¹å™¨åŒ–å¾®æœåŠ¡


### 2.1 ä¸ºä»€ä¹ˆç”¨Dockeréƒ¨ç½²å¾®æœåŠ¡


**ğŸ¤” ä¸ºä»€ä¹ˆè¿™æ ·**ï¼šDockerå’Œå¾®æœåŠ¡å°±åƒé‡èº«å®šåšçš„æ­é…

```
å¾®æœåŠ¡çš„éœ€æ±‚          Dockerçš„èƒ½åŠ›
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç‹¬ç«‹è¿è¡Œç¯å¢ƒ  â”‚ â†â†’ â”‚å®¹å™¨éš”ç¦»     â”‚
â”‚å¿«é€Ÿéƒ¨ç½²     â”‚ â†â†’ â”‚é•œåƒæ‰“åŒ…     â”‚
â”‚ç¯å¢ƒä¸€è‡´æ€§   â”‚ â†â†’ â”‚ä¸€æ¬¡æ„å»ºåˆ°å¤„è¿è¡Œâ”‚
â”‚èµ„æºéš”ç¦»     â”‚ â†â†’ â”‚èµ„æºé™åˆ¶     â”‚
â”‚å¼¹æ€§æ‰©å±•     â”‚ â†â†’ â”‚å¿«é€Ÿå¯åœ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å¾®æœåŠ¡å®¹å™¨åŒ–æœ€ä½³å®è·µ


**ğŸ¯ æœ€ä½³å®è·µ**ï¼š

**æ¯ä¸ªæœåŠ¡ä¸€ä¸ªå®¹å™¨**
```dockerfile
# ç”¨æˆ·æœåŠ¡çš„Dockerfile
FROM openjdk:11-jre-slim
WORKDIR /app
COPY user-service.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

**ğŸ”‘ å…³é”®è¯æå–**ï¼š
- **å•ä¸€èŒè´£**ï¼šä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªæœåŠ¡
- **è½»é‡çº§é•œåƒ**ï¼šä½¿ç”¨slimæˆ–alpineåŸºç¡€é•œåƒ
- **érootç”¨æˆ·**ï¼šæé«˜å®‰å…¨æ€§

**ğŸ“‹ æœåŠ¡å®¹å™¨åŒ–æ¸…å•**ï¼š
```
âœ… é…ç½®å¤–éƒ¨åŒ–ï¼ˆç¯å¢ƒå˜é‡ï¼‰
âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹
âœ… ä¼˜é›…å…³é—­å¤„ç†
âœ… æ—¥å¿—è¾“å‡ºåˆ°stdout
âœ… æ—¶åŒºè®¾ç½®
âœ… èµ„æºé™åˆ¶è®¾ç½®
```

### 2.3 å¤šæœåŠ¡ç¼–æ’å®ä¾‹


**ğŸ—ï¸ çŸ¥è¯†æ¶æ„**ï¼šä½¿ç”¨Docker Composeç»„ç»‡å¤šä¸ªå¾®æœåŠ¡

```yaml
# docker-compose.yml - å¾®æœåŠ¡é›†ç¾¤
version: '3.8'
services:
  # ç”¨æˆ·æœåŠ¡
  user-service:
    build: ./user-service
    ports:
      - "8001:8080"
    environment:
      - DB_HOST=user-db
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      - user-db
    networks:
      - microservices
      
  # å•†å“æœåŠ¡  
  product-service:
    build: ./product-service
    ports:
      - "8002:8080"
    environment:
      - DB_HOST=product-db
    depends_on:
      - product-db
    networks:
      - microservices

  # è®¢å•æœåŠ¡
  order-service:
    build: ./order-service
    ports:
      - "8003:8080"
    environment:
      - DB_HOST=order-db
      - USER_SERVICE_URL=http://user-service:8080
      - PRODUCT_SERVICE_URL=http://product-service:8080
    depends_on:
      - order-db
    networks:
      - microservices

networks:
  microservices:
    driver: bridge
```

---

## 3. ğŸ” æœåŠ¡æ³¨å†Œä¸å‘ç°


### 3.1 ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°


**ğŸŒ° ä¸¾ä¸ªä¾‹å­**ï¼šå°±åƒç”µè¯ç°¿ä¸€æ ·ï¼Œä½ è¦æ‰¾æŸä¸ªæœåŠ¡å°±å»"ç”µè¯ç°¿"é‡ŒæŸ¥

```
æ²¡æœ‰æœåŠ¡å‘ç°çš„é—®é¢˜ï¼š
è®¢å•æœåŠ¡æƒ³è°ƒç”¨ç”¨æˆ·æœåŠ¡
ä½†æ˜¯ç”¨æˆ·æœåŠ¡çš„IPåœ°å€æ˜¯ 192.168.1.100:8080
å¦‚æœç”¨æˆ·æœåŠ¡é‡å¯äº†ï¼ŒIPå˜æˆäº† 192.168.1.101:8080
è®¢å•æœåŠ¡å°±æ‰¾ä¸åˆ°ç”¨æˆ·æœåŠ¡äº†ï¼

æœ‰äº†æœåŠ¡å‘ç°ï¼š
è®¢å•æœåŠ¡ï¼šæˆ‘è¦æ‰¾"user-service"
æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šuser-serviceåœ¨192.168.1.101:8080
è®¢å•æœåŠ¡ï¼šè°¢è°¢ï¼å»è°ƒç”¨
```

### 3.2 ConsulæœåŠ¡æ³¨å†Œå‘ç°å®è·µ


**ğŸ”§ è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨Consulä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒ

```yaml
# æ·»åŠ Consulåˆ°docker-compose.yml
consul:
  image: consul:1.15
  ports:
    - "8500:8500"
  environment:
    - CONSUL_BIND_INTERFACE=eth0
  command: ["consul", "agent", "-dev", "-client=0.0.0.0", "-ui"]
  networks:
    - microservices
```

**æœåŠ¡æ³¨å†Œé…ç½®ç¤ºä¾‹**ï¼š
```java
// Spring BootæœåŠ¡æ³¨å†Œé…ç½®
@SpringBootApplication
@EnableDiscoveryClient
public class UserServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }
}
```

```yaml
# application.yml
spring:
  application:
    name: user-service
  cloud:
    consul:
      host: consul
      port: 8500
      discovery:
        service-name: ${spring.application.name}
        health-check-path: /actuator/health
        health-check-interval: 10s
```

### 3.3 æœåŠ¡å‘ç°çš„å·¥ä½œæµç¨‹


**ğŸ“‹ çŸ¥è¯†æ¸…å•**ï¼šæœåŠ¡æ³¨å†Œå‘ç°çš„å®Œæ•´æµç¨‹

```
æœåŠ¡å¯åŠ¨æµç¨‹ï¼š
ç”¨æˆ·æœåŠ¡å¯åŠ¨
    â†“
å‘Consulæ³¨å†Œè‡ªå·±çš„ä¿¡æ¯
- æœåŠ¡åï¼šuser-service  
- IPåœ°å€ï¼š192.168.1.100
- ç«¯å£ï¼š8080
- å¥åº·æ£€æŸ¥URLï¼š/health
    â†“
å®šæœŸå‘é€å¿ƒè·³ç»™Consul
    â†“
å¦‚æœå¿ƒè·³åœæ­¢ï¼ŒConsulæ ‡è®°æœåŠ¡ä¸å¯ç”¨

æœåŠ¡è°ƒç”¨æµç¨‹ï¼š
è®¢å•æœåŠ¡éœ€è¦è°ƒç”¨ç”¨æˆ·æœåŠ¡
    â†“
å‘ConsulæŸ¥è¯¢"user-service"
    â†“
Consulè¿”å›å¯ç”¨çš„ç”¨æˆ·æœåŠ¡å®ä¾‹åˆ—è¡¨
    â†“
è®¢å•æœåŠ¡é€‰æ‹©ä¸€ä¸ªå®ä¾‹è¿›è¡Œè°ƒç”¨
    â†“
è°ƒç”¨å®Œæˆ
```

---

## 4. ğŸšª APIç½‘å…³éƒ¨ç½²å®è·µ


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦APIç½‘å…³


**ğŸ’­ æ€è€ƒä¸€ä¸‹**ï¼šå¦‚æœå®¢æˆ·ç«¯è¦è°ƒç”¨5ä¸ªä¸åŒçš„å¾®æœåŠ¡ï¼Œéš¾é“è¦è®°ä½5ä¸ªä¸åŒçš„åœ°å€å—ï¼Ÿ

**ğŸ”„ æ¢å¥è¯è¯´**ï¼šAPIç½‘å…³å°±åƒä¸€ä¸ª"æ€»å‰å°"ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å…ˆåˆ°è¿™é‡Œï¼Œå†è½¬å‘åˆ°å…·ä½“æœåŠ¡

```
æ²¡æœ‰APIç½‘å…³ï¼š
æ‰‹æœºApp â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç”¨æˆ·æœåŠ¡:8001
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å•†å“æœåŠ¡:8002  
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ è®¢å•æœåŠ¡:8003
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ”¯ä»˜æœåŠ¡:8004

æœ‰äº†APIç½‘å…³ï¼š
æ‰‹æœºApp â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ APIç½‘å…³:80 â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç”¨æˆ·æœåŠ¡:8001
                      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å•†å“æœåŠ¡:8002
                      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ è®¢å•æœåŠ¡:8003  
                      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ”¯ä»˜æœåŠ¡:8004
                      â”‚
            ç»Ÿä¸€å¤„ç†ï¼šè®¤è¯ã€é™æµã€ç›‘æ§ã€è·¯ç”±
```

### 4.2 ä½¿ç”¨Nginxä½œä¸ºAPIç½‘å…³


**ğŸ› ï¸ å·¥å…·æ¨è**ï¼šNginx + Consul Templateå®ç°åŠ¨æ€è·¯ç”±

```nginx
# nginx.conf
upstream user-service {
    server user-service:8080;
}

upstream product-service {
    server product-service:8080;
}

upstream order-service {
    server order-service:8080;
}

server {
    listen 80;
    
    # ç”¨æˆ·ç›¸å…³API
    location /api/users/ {
        proxy_pass http://user-service/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # å•†å“ç›¸å…³API
    location /api/products/ {
        proxy_pass http://product-service/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # è®¢å•ç›¸å…³API
    location /api/orders/ {
        proxy_pass http://order-service/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 4.3 Kong APIç½‘å…³å®è·µ


**ğŸ“ˆ è¿›é˜¶è·¯å¾„**ï¼šä½¿ç”¨ä¸“ä¸šçš„APIç½‘å…³Kong

```yaml
# Kongç½‘å…³é…ç½®
kong:
  image: kong:3.4
  environment:
    - KONG_DATABASE=off
    - KONG_DECLARATIVE_CONFIG=/kong/declarative/kong.yml
    - KONG_PROXY_ACCESS_LOG=/dev/stdout
    - KONG_ADMIN_ACCESS_LOG=/dev/stdout
    - KONG_PROXY_ERROR_LOG=/dev/stderr
    - KONG_ADMIN_ERROR_LOG=/dev/stderr
    - KONG_ADMIN_LISTEN=0.0.0.0:8001
  ports:
    - "8000:8000"  # ä»£ç†ç«¯å£
    - "8001:8001"  # ç®¡ç†ç«¯å£
  volumes:
    - ./kong.yml:/kong/declarative/kong.yml
  networks:
    - microservices
```

```yaml
# kong.yml - å£°æ˜å¼é…ç½®
_format_version: "3.0"
_transform: true

services:
  - name: user-service
    url: http://user-service:8080
    routes:
      - name: user-route
        paths:
          - /api/users
        
  - name: product-service  
    url: http://product-service:8080
    routes:
      - name: product-route
        paths:
          - /api/products

plugins:
  - name: rate-limiting
    config:
      minute: 100
  - name: cors
    config:
      origins:
        - "*"
```

---

## 5. âš™ï¸ é…ç½®ä¸­å¿ƒç®¡ç†


### 5.1 é…ç½®ä¸­å¿ƒçš„å¿…è¦æ€§


**ğŸš¨ é‡è¦æé†’**ï¼šå¾®æœåŠ¡å¤šäº†ä»¥åï¼Œé…ç½®ç®¡ç†æ˜¯ä¸ªå¤§é—®é¢˜

```
é—®é¢˜åœºæ™¯ï¼š
10ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶
æ•°æ®åº“è¿æ¥ä¿¡æ¯æ”¹äº†ï¼Œè¦æ”¹10ä¸ªåœ°æ–¹
æŸä¸ªç¬¬ä¸‰æ–¹æœåŠ¡åœ°å€å˜äº†ï¼Œåˆè¦æ”¹Nä¸ªåœ°æ–¹
ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰é…ç½®ä¸åŒ
```

**ğŸ¯ è§£å†³ç›®æ ‡**ï¼š
- **é›†ä¸­ç®¡ç†**ï¼šæ‰€æœ‰é…ç½®æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹
- **åŠ¨æ€æ›´æ–°**ï¼šä¸é‡å¯æœåŠ¡å°±èƒ½æ›´æ–°é…ç½®
- **ç¯å¢ƒåŒºåˆ†**ï¼šä¸åŒç¯å¢ƒç”¨ä¸åŒé…ç½®
- **æƒé™æ§åˆ¶**ï¼šæ•æ„Ÿé…ç½®åªæœ‰æˆæƒäººå‘˜èƒ½çœ‹

### 5.2 Spring Cloud Configå®è·µ


**ğŸ”§ è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨Spring Cloud Configä½œä¸ºé…ç½®ä¸­å¿ƒ

```yaml
# é…ç½®ä¸­å¿ƒæœåŠ¡
config-server:
  image: springcloud/config-server
  ports:
    - "8888:8888"
  environment:
    - SPRING_CLOUD_CONFIG_SERVER_GIT_URI=https://github.com/your-org/config-repo
    - SPRING_CLOUD_CONFIG_SERVER_GIT_DEFAULT_LABEL=main
  networks:
    - microservices
```

**é…ç½®ä»“åº“ç»“æ„**ï¼š
```
config-repo/
â”œâ”€â”€ user-service-dev.yml      # ç”¨æˆ·æœåŠ¡å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ user-service-prod.yml     # ç”¨æˆ·æœåŠ¡ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ product-service-dev.yml   # å•†å“æœåŠ¡å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ product-service-prod.yml  # å•†å“æœåŠ¡ç”Ÿäº§ç¯å¢ƒé…ç½®
â””â”€â”€ application.yml           # å…¬å…±é…ç½®
```

**æœåŠ¡é…ç½®æ¶ˆè´¹**ï¼š
```yaml
# user-serviceçš„bootstrap.yml
spring:
  application:
    name: user-service
  profiles:
    active: dev
  cloud:
    config:
      uri: http://config-server:8888
```

### 5.3 Consul KVé…ç½®å®è·µ


**ğŸ”„ å¦ä¸€ç§æ–¹æ¡ˆ**ï¼šç›´æ¥ä½¿ç”¨Consulçš„KVå­˜å‚¨

```bash
# é€šè¿‡Consul APIè®¾ç½®é…ç½®
curl -X PUT http://consul:8500/v1/kv/config/user-service/database/url \
  -d "jdbc:mysql://user-db:3306/userdb"

curl -X PUT http://consul:8500/v1/kv/config/user-service/database/username \
  -d "root"
```

**ğŸ“Š é…ç½®ä¸­å¿ƒæ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | **ä¼˜åŠ¿** | **åŠ£åŠ¿** | **é€‚ç”¨åœºæ™¯** |
|------|----------|----------|------------|
| **Spring Cloud Config** | `Gitç‰ˆæœ¬æ§åˆ¶`<br>`Springç”Ÿæ€é›†æˆå¥½` | `éœ€è¦é¢å¤–æœåŠ¡`<br>`ä¾èµ–Gitä»“åº“` | `Springå¾®æœåŠ¡æ¶æ„` |
| **Consul KV** | `è½»é‡çº§`<br>`ä¸æœåŠ¡å‘ç°é›†æˆ` | `åŠŸèƒ½ç›¸å¯¹ç®€å•`<br>`æ— ç‰ˆæœ¬æ§åˆ¶` | `ç®€å•é…ç½®ç®¡ç†` |
| **Apollo** | `åŠŸèƒ½å¼ºå¤§`<br>`å¯è§†åŒ–ç•Œé¢` | `ç›¸å¯¹é‡å‹`<br>`å­¦ä¹ æˆæœ¬é«˜` | `å¤§å‹ä¼ä¸šåº”ç”¨` |

---

## 6. ğŸ”— æœåŠ¡é—´é€šä¿¡


### 6.1 æœåŠ¡é—´é€šä¿¡æ–¹å¼


**ğŸ·ï¸ ä¸“ä¸šæœ¯è¯­**ï¼š
- **`åŒæ­¥é€šä¿¡`** = æœåŠ¡Aè°ƒç”¨æœåŠ¡Bï¼Œç­‰å¾…å“åº”æ‰ç»§ç»­
- **`å¼‚æ­¥é€šä¿¡`** = æœåŠ¡Aå‘æ¶ˆæ¯ç»™æœåŠ¡Bï¼Œä¸ç­‰å“åº”ç›´æ¥ç»§ç»­
- **`äº‹ä»¶é©±åŠ¨`** = é€šè¿‡äº‹ä»¶æ¶ˆæ¯æ¥è§¦å‘å…¶ä»–æœåŠ¡çš„æ“ä½œ

```
åŒæ­¥é€šä¿¡æµç¨‹ï¼š
è®¢å•æœåŠ¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç”¨æˆ·æœåŠ¡ï¼ˆæ£€æŸ¥ç”¨æˆ·ï¼‰
   â†“                      â”‚
ç­‰å¾…å“åº” â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
ç»§ç»­å¤„ç†è®¢å•

å¼‚æ­¥é€šä¿¡æµç¨‹ï¼š
è®¢å•æœåŠ¡ â”€â”€â”€ å‘æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ— â”€â”€â”€ åº“å­˜æœåŠ¡è®¢é˜…æ¶ˆæ¯
   â†“
ç›´æ¥è¿”å›ç»“æœç»™å®¢æˆ·ç«¯
```

### 6.2 HTTP RESTé€šä¿¡å®è·µ


**ğŸŒ° ä¸¾ä¸ªä¾‹å­**ï¼šè®¢å•æœåŠ¡è°ƒç”¨ç”¨æˆ·æœåŠ¡éªŒè¯ç”¨æˆ·ä¿¡æ¯

```java
// è®¢å•æœåŠ¡ä¸­è°ƒç”¨ç”¨æˆ·æœåŠ¡
@Service
public class OrderService {
    
    @Autowired
    private RestTemplate restTemplate;
    
    @Value("${user.service.url}")
    private String userServiceUrl;
    
    public void createOrder(CreateOrderRequest request) {
        // è°ƒç”¨ç”¨æˆ·æœåŠ¡éªŒè¯ç”¨æˆ·
        String url = userServiceUrl + "/users/" + request.getUserId();
        try {
            UserInfo user = restTemplate.getForObject(url, UserInfo.class);
            if (user == null) {
                throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨");
            }
            // åˆ›å»ºè®¢å•é€»è¾‘...
        } catch (Exception e) {
            // å¤„ç†æœåŠ¡è°ƒç”¨å¼‚å¸¸
            throw new ServiceCallException("è°ƒç”¨ç”¨æˆ·æœåŠ¡å¤±è´¥", e);
        }
    }
}
```

**âš¡ å¿«é€Ÿå›é¡¾**ï¼šHTTPé€šä¿¡çš„å…³é”®ç‚¹
- ä½¿ç”¨æœåŠ¡åè€Œä¸æ˜¯IPåœ°å€
- æ·»åŠ è¶…æ—¶é…ç½®
- å®ç°é‡è¯•æœºåˆ¶
- å¤„ç†å¼‚å¸¸æƒ…å†µ

### 6.3 æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥é€šä¿¡


**ğŸ”§ è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨RabbitMQå®ç°å¼‚æ­¥é€šä¿¡

```yaml
# RabbitMQæ¶ˆæ¯é˜Ÿåˆ—
rabbitmq:
  image: rabbitmq:3.12-management
  ports:
    - "5672:5672"
    - "15672:15672"  # ç®¡ç†ç•Œé¢
  environment:
    - RABBITMQ_DEFAULT_USER=admin
    - RABBITMQ_DEFAULT_PASS=admin
  networks:
    - microservices
```

**æ¶ˆæ¯å‘å¸ƒå®ä¾‹**ï¼š
```java
// è®¢å•æœåŠ¡å‘å¸ƒè®¢å•åˆ›å»ºäº‹ä»¶
@Component
public class OrderEventPublisher {
    
    @Autowired
    private RabbitTemplate rabbitTemplate;
    
    public void publishOrderCreated(OrderCreatedEvent event) {
        rabbitTemplate.convertAndSend(
            "order.exchange",      // äº¤æ¢æœº
            "order.created",       // è·¯ç”±é”®
            event                  // æ¶ˆæ¯ä½“
        );
    }
}
```

**æ¶ˆæ¯æ¶ˆè´¹å®ä¾‹**ï¼š
```java
// åº“å­˜æœåŠ¡ç›‘å¬è®¢å•åˆ›å»ºäº‹ä»¶
@Component
public class InventoryService {
    
    @RabbitListener(queues = "inventory.order.queue")
    public void handleOrderCreated(OrderCreatedEvent event) {
        // å‡å°‘åº“å­˜é€»è¾‘
        reduceInventory(event.getProductId(), event.getQuantity());
    }
}
```

---

## 7. ğŸ“Š åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼è¿½è¸ª


**ğŸ’¥ å®¹æ˜“å‡ºé”™**ï¼šå¾®æœåŠ¡è°ƒç”¨é“¾è·¯å¤æ‚ï¼Œå‡ºé—®é¢˜å¾ˆéš¾æ’æŸ¥

```
ç”¨æˆ·ä¸‹å•çš„è°ƒç”¨é“¾è·¯ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ APIç½‘å…³ â†’ è®¢å•æœåŠ¡ â†’ ç”¨æˆ·æœåŠ¡ â†’ æ•°æ®åº“
                      â†“
                   å•†å“æœåŠ¡ â†’ æ•°æ®åº“
                      â†“  
                   åº“å­˜æœåŠ¡ â†’ æ•°æ®åº“
                      â†“
                   æ”¯ä»˜æœåŠ¡ â†’ ç¬¬ä¸‰æ–¹æ”¯ä»˜

å¦‚æœæŸä¸ªç¯èŠ‚æ…¢äº†ï¼Œæˆ–è€…å‡ºé”™äº†ï¼Œæ€ä¹ˆå¿«é€Ÿå®šä½ï¼Ÿ
```

### 7.2 Jaegeråˆ†å¸ƒå¼è¿½è¸ªå®è·µ


**ğŸ› ï¸ å·¥å…·æ¨è**ï¼šJaegeræ˜¯ç›®å‰æœ€æµè¡Œçš„åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ

```yaml
# Jaegerè¿½è¸ªç³»ç»Ÿ
jaeger:
  image: jaegertracing/all-in-one:1.50
  ports:
    - "16686:16686"  # UIç•Œé¢
    - "14268:14268"  # æ¥æ”¶è¿½è¸ªæ•°æ®
  environment:
    - COLLECTOR_OTLP_ENABLED=true
  networks:
    - microservices
```

**åº”ç”¨é›†æˆè¿½è¸ª**ï¼š
```java
// Spring Bootåº”ç”¨é›†æˆJaeger
@Configuration
public class JaegerConfig {
    
    @Bean
    public JaegerTracer jaegerTracer() {
        return Configuration.fromEnv("user-service")
            .getTracer();
    }
    
    @Bean
    public RestTemplate restTemplate() {
        RestTemplate restTemplate = new RestTemplate();
        // æ·»åŠ è¿½è¸ªæ‹¦æˆªå™¨
        restTemplate.getInterceptors().add(new TracingClientHttpRequestInterceptor());
        return restTemplate;
    }
}
```

### 7.3 è¿½è¸ªæ•°æ®è§£è¯»


**ğŸ“ˆ æ•°æ®è¯´è¯**ï¼šé€šè¿‡è¿½è¸ªæ•°æ®åˆ†ææ€§èƒ½ç“¶é¢ˆ

```
è¿½è¸ªä¿¡æ¯ç¤ºä¾‹ï¼š
Trace ID: abc123def456
æ€»è€—æ—¶: 1.2ç§’

Spanè¯¦æƒ…:
â”œâ”€â”€ APIç½‘å…³å¤„ç†         20ms
â”œâ”€â”€ è®¢å•æœåŠ¡å¤„ç†        800ms
â”‚   â”œâ”€â”€ è°ƒç”¨ç”¨æˆ·æœåŠ¡     100ms
â”‚   â”œâ”€â”€ è°ƒç”¨å•†å“æœåŠ¡     150ms  
â”‚   â”œâ”€â”€ è°ƒç”¨åº“å­˜æœåŠ¡     200ms
â”‚   â””â”€â”€ æ•°æ®åº“æ“ä½œ      300ms (ç“¶é¢ˆ!)
â””â”€â”€ å“åº”è¿”å›           50ms

ç»“è®ºï¼šè®¢å•æœåŠ¡çš„æ•°æ®åº“æ“ä½œæ˜¯æ€§èƒ½ç“¶é¢ˆ
```

**ğŸ¯ æ€§èƒ½ä¼˜åŒ–æ€è·¯**ï¼š
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- æ·»åŠ ç¼“å­˜å±‚
- å¼‚æ­¥å¤„ç†éå…³é”®ä¸šåŠ¡

---

## 8. ğŸ›¡ï¸ æœåŠ¡æ²»ç†ç­–ç•¥


### 8.1 æœåŠ¡å¥åº·æ£€æŸ¥


**ğŸš¨ é‡è¦æé†’**ï¼šå¿…é¡»çŸ¥é“æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

```dockerfile
# Dockerfileä¸­æ·»åŠ å¥åº·æ£€æŸ¥
FROM openjdk:11-jre-slim
WORKDIR /app
COPY user-service.jar app.jar
EXPOSE 8080

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=40s --retries=3 \
  CMD curl -f http://localhost:8080/actuator/health || exit 1

ENTRYPOINT ["java", "-jar", "app.jar"]
```

**Spring Bootå¥åº·æ£€æŸ¥ç«¯ç‚¹**ï¼š
```java
// è‡ªå®šä¹‰å¥åº·æ£€æŸ¥
@Component
public class DatabaseHealthIndicator implements HealthIndicator {
    
    @Autowired
    private DataSource dataSource;
    
    @Override
    public Health health() {
        try {
            Connection connection = dataSource.getConnection();
            connection.close();
            return Health.up()
                .withDetail("database", "Available")
                .build();
        } catch (Exception e) {
            return Health.down()
                .withDetail("database", "Unavailable")
                .withException(e)
                .build();
        }
    }
}
```

### 8.2 ç†”æ–­å™¨æ¨¡å¼


**ğŸ”„ æ¢å¥è¯è¯´**ï¼šç†”æ–­å™¨å°±åƒå®¶é‡Œçš„ä¿é™©ä¸ï¼Œé˜²æ­¢æ•…éšœæ‰©æ•£

```java
// ä½¿ç”¨Hystrixå®ç°ç†”æ–­å™¨
@Service
public class OrderService {
    
    @HystrixCommand(
        fallbackMethod = "getUserInfoFallback",
        commandProperties = {
            @HystrixProperty(name = "execution.isolation.thread.timeoutInMilliseconds", value = "3000"),
            @HystrixProperty(name = "circuitBreaker.requestVolumeThreshold", value = "10"),
            @HystrixProperty(name = "circuitBreaker.errorThresholdPercentage", value = "50")
        }
    )
    public UserInfo getUserInfo(Long userId) {
        return restTemplate.getForObject("/users/" + userId, UserInfo.class);
    }
    
    // é™çº§æ–¹æ³•
    public UserInfo getUserInfoFallback(Long userId) {
        return new UserInfo(userId, "é»˜è®¤ç”¨æˆ·", "default@email.com");
    }
}
```

### 8.3 é™æµç­–ç•¥


**âš¡ å¿«é€Ÿå›é¡¾**ï¼šé˜²æ­¢æœåŠ¡è¢«å¤§é‡è¯·æ±‚å‹å®

**ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°**ï¼š
```java
// ä½¿ç”¨Guava RateLimiterå®ç°é™æµ
@Component
public class RateLimiterService {
    
    // æ¯ç§’å…è®¸10ä¸ªè¯·æ±‚
    private final RateLimiter rateLimiter = RateLimiter.create(10.0);
    
    public boolean tryAcquire() {
        return rateLimiter.tryAcquire(1, TimeUnit.SECONDS);
    }
}

@RestController
public class UserController {
    
    @Autowired
    private RateLimiterService rateLimiterService;
    
    @GetMapping("/users/{id}")
    public ResponseEntity<?> getUser(@PathVariable Long id) {
        if (!rateLimiterService.tryAcquire()) {
            return ResponseEntity.status(429).body("è¯·æ±‚å¤ªé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•");
        }
        // æ­£å¸¸å¤„ç†é€»è¾‘
        return ResponseEntity.ok(userService.getUser(id));
    }
}
```

---

## 9. ğŸ® å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º


### 9.1 å®Œæ•´çš„ç”µå•†å¾®æœåŠ¡æ¶æ„


**ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾**ï¼š
```
                    [è´Ÿè½½å‡è¡¡å™¨]
                         â”‚
                    [APIç½‘å…³]
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
   [ç”¨æˆ·æœåŠ¡]        [å•†å“æœåŠ¡]       [è®¢å•æœåŠ¡]
        â”‚                â”‚                â”‚
   [ç”¨æˆ·æ•°æ®åº“]      [å•†å“æ•°æ®åº“]     [è®¢å•æ•°æ®åº“]
        â”‚                â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                   [æ¶ˆæ¯é˜Ÿåˆ—]
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
           [åº“å­˜æœåŠ¡]         [æ”¯ä»˜æœåŠ¡]
                â”‚                 â”‚
           [åº“å­˜æ•°æ®åº“]       [æ”¯ä»˜æ•°æ®åº“]
```

### 9.2 å®Œæ•´çš„docker-composeé…ç½®


```yaml
version: '3.8'

services:
  # æœåŠ¡å‘ç°
  consul:
    image: consul:1.15
    ports:
      - "8500:8500"
    environment:
      - CONSUL_BIND_INTERFACE=eth0
    command: ["consul", "agent", "-dev", "-client=0.0.0.0", "-ui"]
    networks:
      - microservices

  # APIç½‘å…³
  kong:
    image: kong:3.4
    environment:
      - KONG_DATABASE=off
      - KONG_DECLARATIVE_CONFIG=/kong/declarative/kong.yml
      - KONG_ADMIN_LISTEN=0.0.0.0:8001
    ports:
      - "8000:8000"
      - "8001:8001"
    volumes:
      - ./kong.yml:/kong/declarative/kong.yml
    networks:
      - microservices

  # æ¶ˆæ¯é˜Ÿåˆ—
  rabbitmq:
    image: rabbitmq:3.12-management
    ports:
      - "5672:5672"
      - "15672:15672"
    environment:
      - RABBITMQ_DEFAULT_USER=admin
      - RABBITMQ_DEFAULT_PASS=admin
    networks:
      - microservices

  # åˆ†å¸ƒå¼è¿½è¸ª
  jaeger:
    image: jaegertracing/all-in-one:1.50
    ports:
      - "16686:16686"
      - "14268:14268"
    networks:
      - microservices

  # ç”¨æˆ·æœåŠ¡
  user-service:
    build: ./user-service
    ports:
      - "8001:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - CONSUL_HOST=consul
      - JAEGER_ENDPOINT=http://jaeger:14268/api/traces
    depends_on:
      - consul
      - user-db
    networks:
      - microservices

  user-db:
    image: mysql:8.0
    environment:
      - MYSQL_ROOT_PASSWORD=root123
      - MYSQL_DATABASE=userdb
    volumes:
      - user_data:/var/lib/mysql
    networks:
      - microservices

  # å•†å“æœåŠ¡
  product-service:
    build: ./product-service
    ports:
      - "8002:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - CONSUL_HOST=consul
      - JAEGER_ENDPOINT=http://jaeger:14268/api/traces
    depends_on:
      - consul
      - product-db
    networks:
      - microservices

  product-db:
    image: mysql:8.0
    environment:
      - MYSQL_ROOT_PASSWORD=root123
      - MYSQL_DATABASE=productdb
    volumes:
      - product_data:/var/lib/mysql
    networks:
      - microservices

  # è®¢å•æœåŠ¡
  order-service:
    build: ./order-service
    ports:
      - "8003:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - CONSUL_HOST=consul
      - RABBITMQ_HOST=rabbitmq
      - JAEGER_ENDPOINT=http://jaeger:14268/api/traces
    depends_on:
      - consul
      - rabbitmq
      - order-db
    networks:
      - microservices

  order-db:
    image: mysql:8.0
    environment:
      - MYSQL_ROOT_PASSWORD=root123
      - MYSQL_DATABASE=orderdb
    volumes:
      - order_data:/var/lib/mysql
    networks:
      - microservices

volumes:
  user_data:
  product_data:
  order_data:

networks:
  microservices:
    driver: bridge
```

### 9.3 éƒ¨ç½²å’Œæµ‹è¯•


**ğŸš€ éƒ¨ç½²æ­¥éª¤**ï¼š
```bash
# 1. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 3. æŸ¥çœ‹æœåŠ¡æ³¨å†Œæƒ…å†µ
curl http://localhost:8500/v1/catalog/services

# 4. æµ‹è¯•APIç½‘å…³
curl http://localhost:8000/api/users/1
curl http://localhost:8000/api/products/1
curl http://localhost:8000/api/orders
```

**ğŸ“Š ç›‘æ§æ£€æŸ¥**ï¼š
- **Consul UI**: http://localhost:8500 - æŸ¥çœ‹æœåŠ¡æ³¨å†ŒçŠ¶æ€
- **RabbitMQç®¡ç†ç•Œé¢**: http://localhost:15672 - æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—çŠ¶æ€  
- **Jaeger UI**: http://localhost:16686 - æŸ¥çœ‹åˆ†å¸ƒå¼è¿½è¸ª
- **Kong Admin**: http://localhost:8001 - æŸ¥çœ‹APIç½‘å…³é…ç½®

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¾®æœåŠ¡æ¶æ„ï¼šå°†å¤§åº”ç”¨æ‹†åˆ†æˆå°çš„ç‹¬ç«‹æœåŠ¡
ğŸ”¸ å®¹å™¨åŒ–éƒ¨ç½²ï¼šæ¯ä¸ªæœåŠ¡æ‰“åŒ…æˆç‹¬ç«‹çš„Dockerå®¹å™¨
ğŸ”¸ æœåŠ¡å‘ç°ï¼šé€šè¿‡æ³¨å†Œä¸­å¿ƒåŠ¨æ€å‘ç°æœåŠ¡ä½ç½®
ğŸ”¸ APIç½‘å…³ï¼šç»Ÿä¸€å…¥å£ï¼Œè´Ÿè´£è·¯ç”±ã€è®¤è¯ã€é™æµ
ğŸ”¸ é…ç½®ä¸­å¿ƒï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰æœåŠ¡çš„é…ç½®ä¿¡æ¯
ğŸ”¸ æœåŠ¡é€šä¿¡ï¼šåŒæ­¥HTTPè°ƒç”¨å’Œå¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—
ğŸ”¸ åˆ†å¸ƒå¼è¿½è¸ªï¼šç›‘æ§è·¨æœåŠ¡çš„è°ƒç”¨é“¾è·¯æ€§èƒ½
ğŸ”¸ æœåŠ¡æ²»ç†ï¼šå¥åº·æ£€æŸ¥ã€ç†”æ–­å™¨ã€é™æµä¿æŠ¤
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¾®æœåŠ¡ä¸æ˜¯é“¶å¼¹**
```
å¾®æœåŠ¡è§£å†³çš„é—®é¢˜ï¼š
âœ… ç‹¬ç«‹å¼€å‘éƒ¨ç½²
âœ… æŠ€æœ¯æ ˆçµæ´»é€‰æ‹©  
âœ… å›¢é˜Ÿåä½œæ•ˆç‡
âœ… ç³»ç»Ÿå¼¹æ€§æ‰©å±•

å¾®æœåŠ¡å¸¦æ¥çš„å¤æ‚æ€§ï¼š
âŒ ç½‘ç»œé€šä¿¡å¼€é”€
âŒ æ•°æ®ä¸€è‡´æ€§æŒ‘æˆ˜
âŒ åˆ†å¸ƒå¼ç³»ç»Ÿå¤æ‚æ€§
âŒ è¿ç»´ç®¡ç†æˆæœ¬å¢åŠ 
```

**ğŸ”¹ Dockerä¸å¾®æœåŠ¡çš„å®Œç¾ç»“åˆ**
```
ä¸ºä»€ä¹ˆDockeré€‚åˆå¾®æœåŠ¡ï¼š
ğŸ¯ è½»é‡çº§ï¼šå¿«é€Ÿå¯åŠ¨åœæ­¢
ğŸ”’ éš”ç¦»æ€§ï¼šæœåŠ¡é—´ç¯å¢ƒéš”ç¦»
ğŸ“¦ å¯ç§»æ¤ï¼šä¸€æ¬¡æ„å»ºåˆ°å¤„è¿è¡Œ
ğŸ”„ å¯ç¼–æ’ï¼šDocker Composeç®¡ç†å¤šæœåŠ¡
```

**ğŸ”¹ æœåŠ¡æ²»ç†çš„é‡è¦æ€§**
```
æ²¡æœ‰æ²»ç†çš„å¾®æœåŠ¡æ˜¯ç¾éš¾ï¼š
â€¢ æœåŠ¡é›ªå´©ï¼šä¸€ä¸ªæœåŠ¡æ•…éšœå½±å“å…¨ç³»ç»Ÿ
â€¢ è°ƒç”¨è¶…æ—¶ï¼šæœåŠ¡é—´è°ƒç”¨æ²¡æœ‰è¶…æ—¶æ§åˆ¶
â€¢ èµ„æºäº‰æŠ¢ï¼šæ²¡æœ‰é™æµå¯¼è‡´æœåŠ¡è¿‡è½½
â€¢ é—®é¢˜æ’æŸ¥ï¼šæ²¡æœ‰ç›‘æ§å¾ˆéš¾å®šä½é—®é¢˜
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†å¹³å°**ï¼šç”¨æˆ·ã€å•†å“ã€è®¢å•ã€æ”¯ä»˜å„è‡ªç‹¬ç«‹æœåŠ¡
- **å†…å®¹ç®¡ç†**ï¼šæ–‡ç« ã€è¯„è®ºã€ç”¨æˆ·ã€æœç´¢åˆ†ç¦»éƒ¨ç½²
- **é‡‘èç³»ç»Ÿ**ï¼šè´¦æˆ·ã€äº¤æ˜“ã€é£æ§ã€æŠ¥è¡¨ç‹¬ç«‹è¿è¡Œ
- **IoTå¹³å°**ï¼šè®¾å¤‡ç®¡ç†ã€æ•°æ®é‡‡é›†ã€æ•°æ®åˆ†æåˆ†å¼€

**ğŸ”§ æŠ€æœ¯é€‰å‹æŒ‡å¯¼**
- **å°å›¢é˜Ÿ**ï¼šå•ä½“åº”ç”¨ + Dockerå®¹å™¨åŒ–éƒ¨ç½²
- **ä¸­å‹å›¢é˜Ÿ**ï¼šå¾®æœåŠ¡ + Spring Cloud + Docker
- **å¤§å‹å›¢é˜Ÿ**ï¼šå¾®æœåŠ¡ + Kubernetes + Service Mesh
- **è¶…å¤§è§„æ¨¡**ï¼šè‡ªç ”æ¡†æ¶ + äº‘åŸç”Ÿæ¶æ„

### 10.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š è¿›é˜¶è·¯å¾„**
```
åŸºç¡€é˜¶æ®µï¼š
â”œâ”€â”€ Dockerå®¹å™¨åŸºç¡€
â”œâ”€â”€ Spring Bootå¾®æœåŠ¡å¼€å‘  
â”œâ”€â”€ HTTP APIè®¾è®¡
â””â”€â”€ æ•°æ®åº“åŸºç¡€

è¿›é˜¶é˜¶æ®µï¼š
â”œâ”€â”€ æœåŠ¡æ³¨å†Œå‘ç°(Consul/Eureka)
â”œâ”€â”€ APIç½‘å…³(Kong/Zuul)
â”œâ”€â”€ æ¶ˆæ¯é˜Ÿåˆ—(RabbitMQ/Kafka)  
â””â”€â”€ é…ç½®ä¸­å¿ƒ(Spring Cloud Config)

é«˜çº§é˜¶æ®µï¼š
â”œâ”€â”€ åˆ†å¸ƒå¼è¿½è¸ª(Jaeger/Zipkin)
â”œâ”€â”€ æœåŠ¡ç½‘æ ¼(Istio)
â”œâ”€â”€ å®¹å™¨ç¼–æ’(Kubernetes)
â””â”€â”€ DevOpsè‡ªåŠ¨åŒ–
```

**ğŸª è®°å¿†æŠ€å·§**ï¼š
- **æ³¨å†Œå‘ç°**ï¼šåƒç”µè¯ç°¿ä¸€æ ·æ‰¾æœåŠ¡
- **APIç½‘å…³**ï¼šåƒå‰å°æ¥å¾…ç»Ÿä¸€å…¥å£
- **é…ç½®ä¸­å¿ƒ**ï¼šåƒæ€»éƒ¨ç»Ÿä¸€ç®¡ç†åˆ†åº—è§„åˆ™
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šåƒé‚®å±€å¼‚æ­¥ä¼ é€’æ¶ˆæ¯
- **åˆ†å¸ƒå¼è¿½è¸ª**ï¼šåƒç‰©æµè·Ÿè¸ªçœ‹åŒ…è£¹æµè½¬
- **ç†”æ–­å™¨**ï¼šåƒä¿é™©ä¸é˜²æ­¢ç”µè·¯çƒ§æ¯

**æ ¸å¿ƒè®°å¿†**ï¼š
- å¾®æœåŠ¡æ¶æ„æé«˜å¼€å‘æ•ˆç‡ä½†å¢åŠ è¿ç»´å¤æ‚åº¦
- Dockerå®¹å™¨åŒ–æ˜¯å¾®æœåŠ¡éƒ¨ç½²çš„æœ€ä½³å®è·µ
- æœåŠ¡æ²»ç†æ˜¯å¾®æœåŠ¡æ¶æ„æˆåŠŸçš„å…³é”®
- ç›‘æ§å’Œè¿½è¸ªå¯¹å¾®æœåŠ¡è¿ç»´è‡³å…³é‡è¦
- å¾ªåºæ¸è¿›ï¼Œä¸è¦ä¸€å¼€å§‹å°±æå¤æ‚æ¶æ„