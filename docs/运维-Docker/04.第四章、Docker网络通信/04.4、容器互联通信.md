---
title: 4ã€å®¹å™¨äº’è”é€šä¿¡
---
## ğŸ“š ç›®å½•

1. [å®¹å™¨äº’è”åŸºç¡€æ¦‚å¿µ](#1-å®¹å™¨äº’è”åŸºç¡€æ¦‚å¿µ)
2. [å®¹å™¨é—´è¿æ¥æœºåˆ¶](#2-å®¹å™¨é—´è¿æ¥æœºåˆ¶)
3. [ç¯å¢ƒå˜é‡ä¼ é€’](#3-ç¯å¢ƒå˜é‡ä¼ é€’)
4. [æœåŠ¡å‘ç°æœºåˆ¶](#4-æœåŠ¡å‘ç°æœºåˆ¶)
5. [ç½‘ç»œéš”ç¦»é…ç½®](#5-ç½‘ç»œéš”ç¦»é…ç½®)
6. [è·¨ä¸»æœºç½‘ç»œé€šä¿¡](#6-è·¨ä¸»æœºç½‘ç»œé€šä¿¡)
7. [è´Ÿè½½å‡è¡¡é…ç½®](#7-è´Ÿè½½å‡è¡¡é…ç½®)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ å®¹å™¨äº’è”åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å®¹å™¨äº’è”


**ç®€å•ç†è§£**ï¼šå®¹å™¨äº’è”å°±æ˜¯è®©ä¸åŒçš„Dockerå®¹å™¨ä¹‹é—´èƒ½å¤Ÿç›¸äº’"è¯´è¯"ï¼Œå°±åƒä¸åŒçš„æˆ¿é—´é‡Œçš„äººèƒ½å¤Ÿé€šè¯ä¸€æ ·ã€‚

```
ç°å®åœºæ™¯ç±»æ¯”ï¼š
åŠå…¬æ¥¼é‡Œçš„é€šä¿¡        Dockerå®¹å™¨é€šä¿¡
      â†“                    â†“
å„ä¸ªæˆ¿é—´(å®¹å™¨)       å„ä¸ªå®¹å™¨åº”ç”¨
å†…çº¿ç”µè¯(ç½‘ç»œ)       Dockerç½‘ç»œ
åˆ†æœºå·ç (ç«¯å£)       å®¹å™¨ç«¯å£
```

**ä¸ºä»€ä¹ˆéœ€è¦å®¹å™¨äº’è”**ï¼š
- ğŸ”¸ **åº”ç”¨åˆ†ç¦»**ï¼šæ•°æ®åº“ã€åç«¯ã€å‰ç«¯åˆ†åˆ«åœ¨ä¸åŒå®¹å™¨
- ğŸ”¸ **æœåŠ¡åä½œ**ï¼šå®¹å™¨ä¹‹é—´éœ€è¦æ•°æ®äº¤æ¢å’ŒæœåŠ¡è°ƒç”¨
- ğŸ”¸ **å¾®æœåŠ¡æ¶æ„**ï¼šæ¯ä¸ªæœåŠ¡ç‹¬ç«‹å®¹å™¨ï¼Œéœ€è¦ç›¸äº’é€šä¿¡

### 1.2 Dockerç½‘ç»œåŸºç¡€


**Dockerç½‘ç»œçš„æœ¬è´¨**ï¼šDockerä¸ºå®¹å™¨åˆ›å»ºè™šæ‹Ÿç½‘ç»œç¯å¢ƒï¼Œè®©å®¹å™¨èƒ½å¤Ÿå®‰å…¨åœ°ç›¸äº’é€šä¿¡ã€‚

```
Dockerç½‘ç»œæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            å®¿ä¸»æœºç³»ç»Ÿ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Dockerç½‘ç»œå±‚(è™šæ‹Ÿç½‘ç»œäº¤æ¢æœº)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Container1  Container2  Container3  â”‚
â”‚    App1        App2        App3     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç½‘ç»œé©±åŠ¨ç±»å‹**ï¼š

| ç½‘ç»œç±»å‹ | **ä½œç”¨èŒƒå›´** | **ä½¿ç”¨åœºæ™¯** | **ç‰¹ç‚¹** |
|---------|-------------|-------------|---------|
| **bridge** | `å•ä¸»æœºå†…` | `é»˜è®¤ç½‘ç»œ` | `å®¹å™¨é—´å¯äº’è®¿` |
| **host** | `ä¸å®¿ä¸»æœºå…±äº«` | `é«˜æ€§èƒ½éœ€æ±‚` | `ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ` |
| **none** | `æ— ç½‘ç»œ` | `å®‰å…¨éš”ç¦»` | `å®Œå…¨éš”ç¦»ç½‘ç»œ` |
| **overlay** | `è·¨ä¸»æœº` | `é›†ç¾¤ç¯å¢ƒ` | `å¤šä¸»æœºå®¹å™¨é€šä¿¡` |

---

## 2. ğŸ”— å®¹å™¨é—´è¿æ¥æœºåˆ¶


### 2.1 é»˜è®¤bridgeç½‘ç»œé€šä¿¡


**å·¥ä½œåŸç†**ï¼šDockeråˆ›å»ºé»˜è®¤çš„bridgeç½‘ç»œï¼Œæ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ª"è™šæ‹Ÿäº¤æ¢æœº"ä¸Šã€‚

```bash
# æŸ¥çœ‹Dockerç½‘ç»œåˆ—è¡¨
docker network ls

# è¾“å‡ºç¤ºä¾‹ï¼š
NETWORK ID     NAME      DRIVER    SCOPE
b5f2c8d3e1a2   bridge    bridge    local
f8e9a7b6c4d1   host      host      local
a3c7f2e8b5d9   none      null      local
```

**åˆ›å»ºæµ‹è¯•å®¹å™¨**ï¼š
```bash
# å¯åŠ¨ç¬¬ä¸€ä¸ªå®¹å™¨(webæœåŠ¡)
docker run -d --name web-server nginx

# å¯åŠ¨ç¬¬äºŒä¸ªå®¹å™¨(æ•°æ®åº“)
docker run -d --name database mysql:8.0

# æŸ¥çœ‹å®¹å™¨IPåœ°å€
docker inspect web-server | grep IPAddress
docker inspect database | grep IPAddress
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ç½‘ç»œå†…çš„å®¹å™¨å¯ä»¥é€šè¿‡IPåœ°å€äº’ç›¸è®¿é—®ï¼Œä½†IPåœ°å€æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œä¸å¤Ÿç¨³å®šã€‚

### 2.2 è‡ªå®šä¹‰ç½‘ç»œåˆ›å»º


**ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ç½‘ç»œ**ï¼š
- **DNSè§£æ**ï¼šå®¹å™¨å¯ä»¥é€šè¿‡åç§°äº’ç›¸è®¿é—®
- **ç½‘ç»œéš”ç¦»**ï¼šä¸åŒé¡¹ç›®çš„å®¹å™¨åˆ†å¼€ç®¡ç†
- **æ›´å¥½æ§åˆ¶**ï¼šè‡ªå®šä¹‰ç½‘ç»œé…ç½®

```bash
# åˆ›å»ºè‡ªå®šä¹‰æ¡¥æ¥ç½‘ç»œ
docker network create --driver bridge my-app-network

# æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯
docker network inspect my-app-network

# åœ¨æŒ‡å®šç½‘ç»œä¸­å¯åŠ¨å®¹å™¨
docker run -d --name web --network my-app-network nginx
docker run -d --name db --network my-app-network mysql:8.0
```

**ç½‘ç»œé€šä¿¡æµ‹è¯•**ï¼š
```bash
# è¿›å…¥webå®¹å™¨æµ‹è¯•è¿æ¥
docker exec -it web bash

# åœ¨å®¹å™¨å†…æµ‹è¯•(å¯ä»¥ç›´æ¥ç”¨å®¹å™¨å)
ping db           # é€šè¿‡å®¹å™¨åè®¿é—®
curl http://db:80  # HTTPè¯·æ±‚æµ‹è¯•
```

### 2.3 å®¹å™¨ç½‘ç»œè¿æ¥æ–¹å¼å¯¹æ¯”


```
è¿æ¥æ–¹å¼å¯¹æ¯”ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            é»˜è®¤bridgeç½‘ç»œ                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    IPè®¿é—®    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Containerâ”‚ â†----------â†’ â”‚Containerâ”‚   â”‚
â”‚  â”‚    A    â”‚  172.17.0.2  â”‚    B    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            è‡ªå®šä¹‰ç½‘ç»œ                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   åç§°è®¿é—®   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Containerâ”‚ â†----------â†’ â”‚Containerâ”‚   â”‚
â”‚  â”‚    A    â”‚   é€šè¿‡åç§°    â”‚    B    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ğŸ”§ ç¯å¢ƒå˜é‡ä¼ é€’


### 3.1 ç¯å¢ƒå˜é‡ä¼ é€’æœºåˆ¶


**ç¯å¢ƒå˜é‡çš„ä½œç”¨**ï¼šåœ¨å®¹å™¨å¯åŠ¨æ—¶ä¼ é€’é…ç½®ä¿¡æ¯ï¼Œè®©ä¸åŒå®¹å™¨çŸ¥é“å½¼æ­¤çš„è¿æ¥ä¿¡æ¯ã€‚

```bash
# æ–¹å¼1ï¼šå¯åŠ¨æ—¶ç›´æ¥è®¾ç½®ç¯å¢ƒå˜é‡
docker run -d \
  --name web-app \
  --network my-network \
  -e DATABASE_HOST=mysql-db \
  -e DATABASE_PORT=3306 \
  -e DATABASE_NAME=myapp \
  my-web-app

# æ–¹å¼2ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æ–‡ä»¶
echo "DATABASE_HOST=mysql-db" > app.env
echo "DATABASE_PORT=3306" >> app.env
echo "DATABASE_NAME=myapp" >> app.env

docker run -d \
  --name web-app \
  --env-file app.env \
  my-web-app
```

### 3.2 å®é™…åº”ç”¨ç¤ºä¾‹


**åœºæ™¯**ï¼šWordPressç½‘ç«™ + MySQLæ•°æ®åº“

```bash
# 1. åˆ›å»ºä¸“ç”¨ç½‘ç»œ
docker network create wordpress-net

# 2. å¯åŠ¨MySQLæ•°æ®åº“
docker run -d \
  --name mysql-db \
  --network wordpress-net \
  -e MYSQL_ROOT_PASSWORD=rootpass \
  -e MYSQL_DATABASE=wordpress \
  -e MYSQL_USER=wpuser \
  -e MYSQL_PASSWORD=wppass \
  mysql:8.0

# 3. å¯åŠ¨WordPressåº”ç”¨
docker run -d \
  --name wordpress-app \
  --network wordpress-net \
  -p 8080:80 \
  -e WORDPRESS_DB_HOST=mysql-db:3306 \
  -e WORDPRESS_DB_NAME=wordpress \
  -e WORDPRESS_DB_USER=wpuser \
  -e WORDPRESS_DB_PASSWORD=wppass \
  wordpress:latest
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼šç¯å¢ƒå˜é‡ä¸­çš„æ•æ„Ÿä¿¡æ¯(å¦‚å¯†ç )åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥ä½¿ç”¨æ›´å®‰å…¨çš„æ–¹å¼ç®¡ç†ï¼Œæ¯”å¦‚Docker Secretsã€‚

### 3.3 ç¯å¢ƒå˜é‡æœ€ä½³å®è·µ


**é…ç½®ç®¡ç†ç­–ç•¥**ï¼š

```
å¼€å‘ç¯å¢ƒé…ç½®ï¼š
DATABASE_HOST=localhost
DEBUG_MODE=true
LOG_LEVEL=debug

ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼š
DATABASE_HOST=prod-db.company.com
DEBUG_MODE=false  
LOG_LEVEL=error
```

**ç¯å¢ƒå˜é‡æ£€æŸ¥**ï¼š
```bash
# æŸ¥çœ‹å®¹å™¨çš„ç¯å¢ƒå˜é‡
docker exec container-name printenv

# æŸ¥çœ‹ç‰¹å®šç¯å¢ƒå˜é‡
docker exec container-name echo $DATABASE_HOST
```

---

## 4. ğŸ” æœåŠ¡å‘ç°æœºåˆ¶


### 4.1 DNSæœåŠ¡å‘ç°


**DNSæœåŠ¡å‘ç°åŸç†**ï¼šDockerå†…ç½®DNSæœåŠ¡å™¨ï¼Œè‡ªåŠ¨ä¸ºå®¹å™¨åˆ†é…åŸŸåè§£æã€‚

```
DNSè§£æå·¥ä½œæµç¨‹ï¼š
å®¹å™¨Aæƒ³è®¿é—®å®¹å™¨B
       â†“
è¯·æ±‚ "container-b"
       â†“
Dockerå†…ç½®DNSè§£æ
       â†“
è¿”å›å®¹å™¨Bçš„IPåœ°å€
       â†“
å»ºç«‹ç½‘ç»œè¿æ¥
```

**å®é™…æµ‹è¯•**ï¼š
```bash
# å¯åŠ¨ä¸¤ä¸ªå®¹å™¨
docker run -d --name service-a --network app-net alpine sleep 3600
docker run -d --name service-b --network app-net alpine sleep 3600

# åœ¨service-aä¸­æµ‹è¯•DNSè§£æ
docker exec service-a nslookup service-b
# è¾“å‡ºï¼šservice-bè§£æåˆ°å…·ä½“IPåœ°å€

docker exec service-a ping service-b
# æˆåŠŸpingé€šservice-b
```

### 4.2 æœåŠ¡å‘ç°å®é™…åº”ç”¨


**å¾®æœåŠ¡æ¶æ„ç¤ºä¾‹**ï¼š

```bash
# åˆ›å»ºå¾®æœåŠ¡ç½‘ç»œ
docker network create microservice-net

# ç”¨æˆ·æœåŠ¡
docker run -d \
  --name user-service \
  --network microservice-net \
  -p 8001:8080 \
  my-user-service

# è®¢å•æœåŠ¡  
docker run -d \
  --name order-service \
  --network microservice-net \
  -p 8002:8080 \
  -e USER_SERVICE_URL=http://user-service:8080 \
  my-order-service

# APIç½‘å…³
docker run -d \
  --name api-gateway \
  --network microservice-net \
  -p 8080:80 \
  -e USER_SERVICE=http://user-service:8080 \
  -e ORDER_SERVICE=http://order-service:8080 \
  nginx
```

> ğŸ’¡ **æ ¸å¿ƒä¼˜åŠ¿**ï¼šé€šè¿‡æœåŠ¡åè®¿é—®ï¼Œå³ä½¿å®¹å™¨é‡å¯IPå˜åŒ–ï¼ŒæœåŠ¡é—´é€šä¿¡ä¾ç„¶ç¨³å®šã€‚

### 4.3 å¤–éƒ¨æœåŠ¡å‘ç°


**åœºæ™¯**ï¼šå®¹å™¨éœ€è¦è®¿é—®å¤–éƒ¨æœåŠ¡æˆ–æ•°æ®åº“

```bash
# å®¹å™¨è®¿é—®å¤–éƒ¨æ•°æ®åº“
docker run -d \
  --name web-app \
  -p 8080:8080 \
  -e DATABASE_HOST=external-db.company.com \
  -e DATABASE_PORT=5432 \
  my-web-app

# ä½¿ç”¨--add-hostæ·»åŠ è‡ªå®šä¹‰åŸŸåè§£æ
docker run -d \
  --name web-app \
  --add-host database:192.168.1.100 \
  my-web-app
```

---

## 5. ğŸ›¡ï¸ ç½‘ç»œéš”ç¦»é…ç½®


### 5.1 ç½‘ç»œéš”ç¦»åŸç†


**éš”ç¦»çš„å¿…è¦æ€§**ï¼šä¸åŒé¡¹ç›®æˆ–ç¯å¢ƒçš„å®¹å™¨åº”è¯¥ç›¸äº’éš”ç¦»ï¼Œé¿å…æ„å¤–è®¿é—®å’Œå®‰å…¨é£é™©ã€‚

```
ç½‘ç»œéš”ç¦»ç¤ºæ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é¡¹ç›®Aç½‘ç»œ      â”‚  â”‚   é¡¹ç›®Bç½‘ç»œ      â”‚
â”‚  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”   â”‚  â”‚  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”   â”‚
â”‚  â”‚Webâ”‚  â”‚DB â”‚   â”‚  â”‚  â”‚APIâ”‚  â”‚DB â”‚   â”‚
â”‚  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜   â”‚  â”‚  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜   â”‚
â”‚      â†•          â”‚  â”‚      â†•          â”‚
â”‚   å¯ä»¥é€šä¿¡       â”‚  â”‚   å¯ä»¥é€šä¿¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†•                     â†•
      å®Œå…¨éš”ç¦»ï¼Œæ— æ³•äº’ç›¸è®¿é—®
```

### 5.2 åˆ›å»ºéš”ç¦»ç½‘ç»œ


**å®é™…æ“ä½œ**ï¼š
```bash
# åˆ›å»ºå¼€å‘ç¯å¢ƒç½‘ç»œ
docker network create --driver bridge dev-network

# åˆ›å»ºç”Ÿäº§ç¯å¢ƒç½‘ç»œ  
docker network create --driver bridge prod-network

# å¼€å‘ç¯å¢ƒå®¹å™¨
docker run -d --name dev-web --network dev-network nginx
docker run -d --name dev-db --network dev-network mysql:8.0

# ç”Ÿäº§ç¯å¢ƒå®¹å™¨
docker run -d --name prod-web --network prod-network nginx  
docker run -d --name prod-db --network prod-network mysql:8.0
```

**éªŒè¯éš”ç¦»æ•ˆæœ**ï¼š
```bash
# ä»dev-webè®¿é—®dev-db (æˆåŠŸ)
docker exec dev-web ping dev-db

# ä»dev-webè®¿é—®prod-db (å¤±è´¥)
docker exec dev-web ping prod-db
# ping: prod-db: Name or service not known
```

### 5.3 é˜²ç«å¢™å’Œå®‰å…¨è§„åˆ™


**ç«¯å£æš´éœ²æ§åˆ¶**ï¼š
```bash
# åªæš´éœ²å¿…è¦ç«¯å£ç»™å®¿ä¸»æœº
docker run -d \
  --name secure-app \
  --network isolated-net \
  -p 127.0.0.1:8080:80 \  # åªå…è®¸æœ¬æœºè®¿é—®
  my-secure-app

# å®Œå…¨å†…éƒ¨é€šä¿¡ï¼Œä¸æš´éœ²ç«¯å£
docker run -d \
  --name internal-service \
  --network internal-net \
  my-internal-service  # æ²¡æœ‰-på‚æ•°
```

---

## 6. ğŸŒ è·¨ä¸»æœºç½‘ç»œé€šä¿¡


### 6.1 è·¨ä¸»æœºé€šä¿¡éœ€æ±‚


**åº”ç”¨åœºæ™¯**ï¼šå½“åº”ç”¨è§„æ¨¡å¢é•¿ï¼Œéœ€è¦å°†å®¹å™¨éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šæ—¶ï¼Œå°±éœ€è¦è·¨ä¸»æœºç½‘ç»œé€šä¿¡ã€‚

```
è·¨ä¸»æœºæ¶æ„ï¼š
ä¸»æœºA (192.168.1.10)        ä¸»æœºB (192.168.1.11)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Webå®¹å™¨   â”‚  â”‚ <-----> â”‚  â”‚ DBå®¹å™¨    â”‚  â”‚
â”‚  â”‚Container1 â”‚  â”‚  ç½‘ç»œ   â”‚  â”‚Container2 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  éš§é“   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Overlayç½‘ç»œå®ç°


**Overlayç½‘ç»œåŸç†**ï¼šåˆ›å»ºè¦†ç›–åœ¨ç‰©ç†ç½‘ç»œä¹‹ä¸Šçš„è™šæ‹Ÿç½‘ç»œï¼Œè®©ä¸åŒä¸»æœºä¸Šçš„å®¹å™¨æ„Ÿè§‰åœ¨åŒä¸€ç½‘ç»œä¸­ã€‚

**åˆå§‹åŒ–Swarmé›†ç¾¤**ï¼š
```bash
# åœ¨ä¸»èŠ‚ç‚¹åˆå§‹åŒ–é›†ç¾¤
docker swarm init --advertise-addr 192.168.1.10

# åœ¨å…¶ä»–èŠ‚ç‚¹åŠ å…¥é›†ç¾¤(ä½¿ç”¨ä¸Šé¢å‘½ä»¤è¾“å‡ºçš„join token)
docker swarm join --token SWMTKN-xxx 192.168.1.10:2377

# åˆ›å»ºoverlayç½‘ç»œ
docker network create --driver overlay --attachable my-overlay-net
```

**è·¨ä¸»æœºå®¹å™¨éƒ¨ç½²**ï¼š
```bash
# åœ¨ä¸»æœºAä¸Šå¯åŠ¨webæœåŠ¡
docker run -d \
  --name web-service \
  --network my-overlay-net \
  nginx

# åœ¨ä¸»æœºBä¸Šå¯åŠ¨æ•°æ®åº“æœåŠ¡
docker run -d \
  --name db-service \
  --network my-overlay-net \
  mysql:8.0

# ä¸¤ä¸ªå®¹å™¨å¯ä»¥é€šè¿‡å®¹å™¨åç›´æ¥é€šä¿¡
docker exec web-service ping db-service
```

### 6.3 ç¬¬ä¸‰æ–¹ç½‘ç»œè§£å†³æ–¹æ¡ˆ


**Calicoç½‘ç»œ**ï¼š
```bash
# å®‰è£…Calicoç½‘ç»œæ’ä»¶ (ç®€åŒ–ç¤ºä¾‹)
curl -O https://docs.projectcalico.org/manifests/calico.yaml
kubectl apply -f calico.yaml

# åˆ›å»ºè·¨ä¸»æœºç½‘ç»œç­–ç•¥
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-web-to-db
spec:
  selector: app == 'web'
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: database
```

---

## 7. âš–ï¸ è´Ÿè½½å‡è¡¡é…ç½®


### 7.1 å®¹å™¨çº§è´Ÿè½½å‡è¡¡


**è´Ÿè½½å‡è¡¡çš„ä½œç”¨**ï¼šå½“æœ‰å¤šä¸ªç›¸åŒæœåŠ¡çš„å®¹å™¨æ—¶ï¼Œå°†è¯·æ±‚åˆ†æ•£åˆ°ä¸åŒå®¹å™¨ä¸Šï¼Œæé«˜æ€§èƒ½å’Œå¯é æ€§ã€‚

```
è´Ÿè½½å‡è¡¡æ¶æ„ï¼š
        ç”¨æˆ·è¯·æ±‚
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è´Ÿè½½å‡è¡¡å™¨   â”‚
    â”‚   (nginx)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“  â†“  â†“
    â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”
    â”‚Web1â”‚â”‚Web2â”‚â”‚Web3â”‚
    â”‚å®¹å™¨â”‚â”‚å®¹å™¨â”‚â”‚å®¹å™¨â”‚
    â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜
```

### 7.2 ä½¿ç”¨Nginxå®ç°è´Ÿè½½å‡è¡¡


**é…ç½®nginxè´Ÿè½½å‡è¡¡**ï¼š

é¦–å…ˆåˆ›å»ºåç«¯æœåŠ¡å®¹å™¨ï¼š
```bash
# åˆ›å»ºç½‘ç»œ
docker network create web-tier

# å¯åŠ¨å¤šä¸ªwebæœåŠ¡å®ä¾‹
docker run -d --name web1 --network web-tier my-web-app
docker run -d --name web2 --network web-tier my-web-app  
docker run -d --name web3 --network web-tier my-web-app
```

åˆ›å»ºnginxé…ç½®æ–‡ä»¶ï¼š
```nginx
upstream backend {
    server web1:8080;
    server web2:8080;
    server web3:8080;
}

server {
    listen 80;
    location / {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

å¯åŠ¨nginxè´Ÿè½½å‡è¡¡å™¨ï¼š
```bash
# å°†é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°nginxå®¹å™¨
docker run -d \
  --name nginx-lb \
  --network web-tier \
  -p 80:80 \
  -v $(pwd)/nginx.conf:/etc/nginx/nginx.conf \
  nginx
```

### 7.3 Docker Composeè´Ÿè½½å‡è¡¡


**ä½¿ç”¨docker-compose.ymlé…ç½®**ï¼š
```yaml
version: '3.8'
services:
  web:
    image: my-web-app
    deploy:
      replicas: 3
    networks:
      - web-tier
      
  nginx:
    image: nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    networks:
      - web-tier
    depends_on:
      - web

networks:
  web-tier:
    driver: bridge
```

**æ‰©å®¹å’Œç¼©å®¹**ï¼š
```bash
# æ‰©å®¹webæœåŠ¡åˆ°5ä¸ªå®ä¾‹
docker-compose up --scale web=5 -d

# ç¼©å®¹webæœåŠ¡åˆ°2ä¸ªå®ä¾‹  
docker-compose up --scale web=2 -d
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å®¹å™¨ç½‘ç»œé€šä¿¡è¦ç‚¹


```
ğŸ”¸ ç½‘ç»œåŸºç¡€ï¼šDockeræä¾›å¤šç§ç½‘ç»œé©±åŠ¨ï¼Œbridgeæ˜¯é»˜è®¤é€‰æ‹©
ğŸ”¸ å®¹å™¨è¿æ¥ï¼šè‡ªå®šä¹‰ç½‘ç»œæ”¯æŒDNSè§£æï¼Œå¯é€šè¿‡å®¹å™¨åè®¿é—®
ğŸ”¸ ç¯å¢ƒä¼ é€’ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ é€’é…ç½®ä¿¡æ¯ï¼Œæ”¯æŒæ–‡ä»¶æ–¹å¼
ğŸ”¸ æœåŠ¡å‘ç°ï¼šDockerå†…ç½®DNSæœåŠ¡å™¨è‡ªåŠ¨è§£æå®¹å™¨å
ğŸ”¸ ç½‘ç»œéš”ç¦»ï¼šä¸åŒç½‘ç»œé—´å®Œå…¨éš”ç¦»ï¼Œæé«˜å®‰å…¨æ€§
ğŸ”¸ è·¨ä¸»æœºé€šä¿¡ï¼šä½¿ç”¨overlayç½‘ç»œæˆ–ç¬¬ä¸‰æ–¹æ’ä»¶
ğŸ”¸ è´Ÿè½½å‡è¡¡ï¼šç»“åˆnginxç­‰å·¥å…·å®ç°æµé‡åˆ†å‘
```

### 8.2 å®é™…åº”ç”¨å»ºè®®


**ğŸ”¹ å¼€å‘ç¯å¢ƒæœ€ä½³å®è·µ**ï¼š
- ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºç‹¬ç«‹ç½‘ç»œ
- ä½¿ç”¨å®¹å™¨åè¿›è¡ŒæœåŠ¡é—´é€šä¿¡
- ç¯å¢ƒå˜é‡ç»Ÿä¸€ç®¡ç†é…ç½®ä¿¡æ¯
- æœ¬åœ°å¼€å‘ä½¿ç”¨bridgeç½‘ç»œå³å¯

**ğŸ”¹ ç”Ÿäº§ç¯å¢ƒè€ƒè™‘**ï¼š
- ä½¿ç”¨overlayç½‘ç»œæ”¯æŒå¤šä¸»æœºéƒ¨ç½²
- é…ç½®ç½‘ç»œéš”ç¦»å’Œå®‰å…¨è§„åˆ™
- å®æ–½è´Ÿè½½å‡è¡¡æé«˜å¯ç”¨æ€§
- ç›‘æ§ç½‘ç»œæ€§èƒ½å’Œè¿æ¥çŠ¶æ€

**ğŸ”¹ å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š
```bash
# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
docker exec container-name ping target-container

# æŸ¥çœ‹ç½‘ç»œé…ç½®
docker network inspect network-name

# æ£€æŸ¥ç«¯å£ç›‘å¬
docker exec container-name netstat -tlnp

# æŸ¥çœ‹DNSè§£æ
docker exec container-name nslookup service-name
```

### 8.3 è¿›é˜¶å­¦ä¹ æ–¹å‘


**å®¹å™¨ç¼–æ’å·¥å…·**ï¼š
- **Docker Compose**ï¼šå•æœºå¤šå®¹å™¨ç®¡ç†
- **Docker Swarm**ï¼šåŸç”Ÿé›†ç¾¤æ–¹æ¡ˆ
- **Kubernetes**ï¼šä¼ä¸šçº§å®¹å™¨ç¼–æ’å¹³å°

**ç½‘ç»œæ€§èƒ½ä¼˜åŒ–**ï¼š
- é€‰æ‹©åˆé€‚çš„ç½‘ç»œé©±åŠ¨
- ä¼˜åŒ–å®¹å™¨é—´é€šä¿¡è·¯å¾„
- ç›‘æ§ç½‘ç»œå»¶è¿Ÿå’Œååé‡

**å®‰å…¨åŠ å›º**ï¼š
- ç½‘ç»œç­–ç•¥é…ç½®
- å®¹å™¨é—´è®¿é—®æ§åˆ¶
- æ•æ„Ÿä¿¡æ¯ç®¡ç†

> ğŸ§  **è®°å¿†è¦ç‚¹**ï¼š
> - **ç½‘ç»œè¿é€šé åç§°ï¼Œç¯å¢ƒå˜é‡ä¼ ä¿¡æ¯**
> - **éš”ç¦»ç½‘ç»œä¿å®‰å…¨ï¼Œè´Ÿè½½å‡è¡¡ææ€§èƒ½**
> - **è·¨ä¸»æœºç”¨overlayï¼Œç”Ÿäº§ç¯å¢ƒè¦è§„åˆ’**

**å®è·µå»ºè®®**ï¼šä»ç®€å•çš„ä¸¤å®¹å™¨é€šä¿¡å¼€å§‹ï¼Œé€æ­¥ç»ƒä¹ å¤æ‚çš„ç½‘ç»œé…ç½®å’Œè´Ÿè½½å‡è¡¡ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨æ‰€å­¦çŸ¥è¯†ã€‚