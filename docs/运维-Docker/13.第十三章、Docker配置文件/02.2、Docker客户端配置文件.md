---
title: 2ã€Dockerå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶
---
## ðŸ“š ç›®å½•

1. [Dockerå®¢æˆ·ç«¯é…ç½®æ¦‚è¿°](#1-Dockerå®¢æˆ·ç«¯é…ç½®æ¦‚è¿°)
2. [config.jsonæ–‡ä»¶ç»“æž„](#2-configjsonæ–‡ä»¶ç»“æž„)
3. [è®¤è¯ä¿¡æ¯ç®¡ç†](#3-è®¤è¯ä¿¡æ¯ç®¡ç†)
4. [å‡­è¯å­˜å‚¨é…ç½®](#4-å‡­è¯å­˜å‚¨é…ç½®)
5. [ç½‘ç»œä»£ç†è®¾ç½®](#5-ç½‘ç»œä»£ç†è®¾ç½®)
6. [æ“ä½œä½“éªŒé…ç½®](#6-æ“ä½œä½“éªŒé…ç½®)
7. [ä¸Šä¸‹æ–‡ç®¡ç†](#7-ä¸Šä¸‹æ–‡ç®¡ç†)
8. [æ’ä»¶ä¸Žæ‰©å±•åŠŸèƒ½](#8-æ’ä»¶ä¸Žæ‰©å±•åŠŸèƒ½)
9. [å®žç”¨é…ç½®æŠ€å·§](#9-å®žç”¨é…ç½®æŠ€å·§)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ³ Dockerå®¢æˆ·ç«¯é…ç½®æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Dockerå®¢æˆ·ç«¯é…ç½®


**é€šä¿—ç†è§£**ï¼šå°±åƒä½ æ‰‹æœºä¸Šçš„"è®¾ç½®"åº”ç”¨ä¸€æ ·ï¼

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„æ‰‹æœºæœ‰ä¸ª"è®¾ç½®"ç•Œé¢ï¼Œé‡Œé¢å¯ä»¥é…ç½®WIFIå¯†ç ã€ä¸»é¢˜é¢œè‰²ã€å¿«æ·é”®ç­‰ç­‰ã€‚Dockerå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å°±æ˜¯è¿™æ ·çš„ä½œç”¨ - å®ƒå‘Šè¯‰Dockerå‘½ä»¤è¡Œå·¥å…·è¯¥æ€Žä¹ˆå·¥ä½œã€‚

```
ðŸ  é…ç½®æ–‡ä»¶ä½ç½®ï¼š
Linux/Mac: ~/.docker/config.json
Windows: %USERPROFILE%\.docker\config.json

ðŸ“‹ ä¸»è¦ä½œç”¨ï¼š
âœ… ä¿å­˜ç™»å½•ä¿¡æ¯ - ä¸ç”¨æ¯æ¬¡è¾“å…¥å¯†ç 
âœ… è®¾ç½®ä»£ç†æœåŠ¡å™¨ - å…¬å¸ç½‘ç»œå¿…å¤‡
âœ… é…ç½®å¿«æ·æ“ä½œ - è®©å‘½ä»¤æ›´å¥½ç”¨
âœ… ç®¡ç†å¤šçŽ¯å¢ƒ - å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§åˆ‡æ¢
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å®¢æˆ·ç«¯é…ç½®


**è§£å†³çš„å®žé™…é—®é¢˜**ï¼š

```
âŒ æ²¡æœ‰é…ç½®æ–‡ä»¶çš„ç—›è‹¦ï¼š
â€¢ æ¯æ¬¡ docker pull éƒ½è¦è¾“å…¥ç”¨æˆ·åå¯†ç 
â€¢ å…¬å¸ç½‘ç»œçŽ¯å¢ƒæ— æ³•è¿žæŽ¥Docker Hub
â€¢ å‘½ä»¤å¤ªé•¿ï¼Œå®¹æ˜“è¾“é”™
â€¢ å¼€å‘å’Œç”Ÿäº§çŽ¯å¢ƒåˆ‡æ¢éº»çƒ¦

âœ… æœ‰äº†é…ç½®æ–‡ä»¶çš„ä¾¿åˆ©ï¼š
â€¢ è‡ªåŠ¨ç™»å½•ï¼Œæ— éœ€é‡å¤è¾“å…¥å¯†ç 
â€¢ ä»£ç†è®¾ç½®ï¼Œè½»æ¾è®¿é—®å¤–ç½‘ä»“åº“
â€¢ å‘½ä»¤åˆ«åï¼Œå¤æ‚æ“ä½œä¸€é”®å®Œæˆ
â€¢ ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¤šçŽ¯å¢ƒç®¡ç†è½»æ¾
```

### 1.3 é…ç½®æ–‡ä»¶çš„å·¥ä½œåŽŸç†


**å·¥ä½œæµç¨‹å›¾ç¤º**ï¼š
```
ç”¨æˆ·æ‰§è¡ŒDockerå‘½ä»¤
         â†“
Dockerå®¢æˆ·ç«¯å¯åŠ¨
         â†“
è¯»å– ~/.docker/config.json
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥è®¤è¯ä¿¡æ¯            â”‚
â”‚ åº”ç”¨ä»£ç†è®¾ç½®            â”‚
â”‚ åŠ è½½æ’ä»¶é…ç½®            â”‚
â”‚ è®¾ç½®æ“ä½œåå¥½            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
è¿žæŽ¥DockeræœåŠ¡å™¨æ‰§è¡Œæ“ä½œ
```

---

## 2. ðŸ“„ config.jsonæ–‡ä»¶ç»“æž„


### 2.1 é…ç½®æ–‡ä»¶æ•´ä½“ç»“æž„


**æ–‡ä»¶ç»“æž„ä¸€è§ˆ**ï¼š
è¿™ä¸ªJSONæ–‡ä»¶å°±åƒä¸€ä¸ª"è®¾ç½®èœå•"ï¼Œæ¯ä¸ªéƒ¨åˆ†è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ï¼š

```json
{
  "auths": {
    "å­˜æ”¾ç™»å½•ä¿¡æ¯": "å„ç§ä»“åº“çš„ç”¨æˆ·åå¯†ç "
  },
  "credStore": "å‡­è¯å­˜å‚¨æ–¹å¼",
  "credHelpers": {
    "ä¸åŒä»“åº“": "ä½¿ç”¨ä¸åŒçš„å‡­è¯åŠ©æ‰‹"
  },
  "proxies": {
    "ä»£ç†è®¾ç½®": "HTTP/HTTPSä»£ç†é…ç½®"
  },
  "detachKeys": "å¿«æ·é”®è®¾ç½®",
  "currentContext": "å½“å‰ä½¿ç”¨çš„çŽ¯å¢ƒ",
  "contexts": {
    "çŽ¯å¢ƒé…ç½®": "å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§çŽ¯å¢ƒ"
  },
  "plugins": {
    "æ’ä»¶é…ç½®": "æ‰©å±•åŠŸèƒ½è®¾ç½®"
  }
}
```

### 2.2 æ–‡ä»¶ä½ç½®ä¸Žåˆ›å»º


**å¦‚ä½•æ‰¾åˆ°å’Œåˆ›å»ºé…ç½®æ–‡ä»¶**ï¼š

```bash
# æŸ¥çœ‹é…ç½®æ–‡ä»¶ä½ç½®
echo $HOME/.docker/config.json

# å¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒDockerä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•
mkdir -p ~/.docker

# æ‰‹åŠ¨åˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶
cat > ~/.docker/config.json << EOF
{
  "auths": {},
  "credsStore": "",
  "currentContext": "default"
}
EOF
```

**ðŸ“ ç›®å½•ç»“æž„è¯´æ˜Ž**ï¼š
```
~/.docker/
â”œâ”€â”€ config.json          â† ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ contexts/            â† ä¸Šä¸‹æ–‡é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ default/
â”‚   â””â”€â”€ production/
â””â”€â”€ plugins/             â† æ’ä»¶ç›®å½•
    â””â”€â”€ docker-buildx/
```

### 2.3 é…ç½®æ–‡ä»¶çš„è¯»å–ä¼˜å…ˆçº§


**é…ç½®åŠ è½½é¡ºåº**ï¼š
```
ä¼˜å…ˆçº§ä»Žé«˜åˆ°ä½Žï¼š
1. çŽ¯å¢ƒå˜é‡          â† ä¸´æ—¶è¦†ç›–
2. å‘½ä»¤è¡Œå‚æ•°        â† å•æ¬¡æ“ä½œ
3. config.jsonæ–‡ä»¶   â† æŒä¹…é…ç½®
4. ç³»ç»Ÿé»˜è®¤å€¼        â† å…œåº•è®¾ç½®

å®žé™…ä¾‹å­ï¼š
DOCKER_HOST=tcp://192.168.1.100:2376 docker ps
â†‘ è¿™ä¼šä¸´æ—¶è¦†ç›–config.jsonä¸­çš„è®¾ç½®
```

---

## 3. ðŸ” è®¤è¯ä¿¡æ¯ç®¡ç†


### 3.1 authså­—æ®µè¯¦è§£


**ä»€ä¹ˆæ˜¯authsï¼Ÿ**
ç®€å•è¯´å°±æ˜¯"è®°ä½å¯†ç "åŠŸèƒ½ã€‚å½“ä½ ç™»å½•Docker Hubæˆ–å…¶ä»–å®¹å™¨ä»“åº“åŽï¼Œè®¤è¯ä¿¡æ¯å°±å­˜åœ¨è¿™é‡Œã€‚

```json
{
  "auths": {
    "https://index.docker.io/v1/": {
      "auth": "dXNlcm5hbWU6cGFzc3dvcmQ="
    },
    "my-registry.com": {
      "auth": "bXlfdXNlcjpteV9wYXNzd29yZA==",
      "email": "user@example.com"
    },
    "harbor.company.com": {
      "username": "developer",
      "password": "secret123",
      "email": "dev@company.com"
    }
  }
}
```

**ðŸ” å­—æ®µå«ä¹‰è§£é‡Š**ï¼š
```
authå­—æ®µï¼š
â€¢ æ˜¯ç”¨æˆ·å:å¯†ç çš„Base64ç¼–ç 
â€¢ Base64ä¸æ˜¯åŠ å¯†ï¼åªæ˜¯ç¼–ç ï¼Œä»»ä½•äººéƒ½èƒ½è§£ç 
â€¢ ä¾‹å¦‚ï¼šusername:password â†’ dXNlcm5hbWU6cGFzc3dvcmQ=

å­˜å‚¨æ–¹å¼å¯¹æ¯”ï¼š
æ–¹å¼1ï¼šauthå­—æ®µï¼ˆç¼–ç å­˜å‚¨ï¼‰
"auth": "dXNlcm5hbWU6cGFzc3dvcmQ="

æ–¹å¼2ï¼šæ˜Žæ–‡å­˜å‚¨ï¼ˆä¸æŽ¨èï¼‰
"username": "myuser",
"password": "mypass"
```

### 3.2 ç™»å½•æ“ä½œä¸Žè®¤è¯å­˜å‚¨


**å®žé™…ç™»å½•æµç¨‹**ï¼š

```bash
# ç™»å½•Docker Hub
docker login

# ç™»å½•ç§æœ‰ä»“åº“
docker login my-registry.com -u myuser -p mypass

# ç™»å½•åŽæ£€æŸ¥é…ç½®æ–‡ä»¶
cat ~/.docker/config.json
```

**ç™»å½•ä¿¡æ¯çš„è‡ªåŠ¨å­˜å‚¨**ï¼š
```
ç™»å½•æµç¨‹ï¼š
ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç 
         â†“
Dockerå®¢æˆ·ç«¯éªŒè¯ç™»å½•
         â†“
ç™»å½•æˆåŠŸåŽè‡ªåŠ¨å†™å…¥config.json
         â†“
ä¸‹æ¬¡ä½¿ç”¨è‡ªåŠ¨è¯»å–ï¼Œæ— éœ€é‡å¤ç™»å½•

æ³¨æ„äº‹é¡¹ï¼š
âš ï¸ å¯†ç æ˜¯Base64ç¼–ç å­˜å‚¨ï¼Œä¸æ˜¯åŠ å¯†ï¼
âš ï¸ ä»»ä½•èƒ½è®¿é—®è¿™ä¸ªæ–‡ä»¶çš„äººéƒ½èƒ½çœ‹åˆ°å¯†ç 
âš ï¸ æœåŠ¡å™¨çŽ¯å¢ƒè¦æ³¨æ„æ–‡ä»¶æƒé™è®¾ç½®
```

### 3.3 è®¤è¯å®‰å…¨æœ€ä½³å®žè·µ


**å®‰å…¨é…ç½®å»ºè®®**ï¼š

```bash
# è®¾ç½®é…ç½®æ–‡ä»¶æƒé™ï¼ˆé‡è¦ï¼ï¼‰
chmod 600 ~/.docker/config.json

# åªæœ‰æ–‡ä»¶æ‰€æœ‰è€…èƒ½è¯»å†™
ls -la ~/.docker/config.json
# è¾“å‡ºåº”è¯¥æ˜¯ï¼š-rw------- 1 user user

# å¦‚æžœæ˜¯å¤šç”¨æˆ·ç³»ç»Ÿï¼Œæ›´è¦æ³¨æ„
sudo chown $USER:$USER ~/.docker/config.json
```

**ðŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹**ï¼š
```
é«˜é£Žé™©è¡Œä¸ºï¼š
âŒ åœ¨å…±äº«æœåŠ¡å™¨ä¸Šæ˜Žæ–‡å­˜å‚¨å¯†ç 
âŒ æŠŠconfig.jsonæäº¤åˆ°ä»£ç ä»“åº“
âŒ åœ¨æ—¥å¿—ä¸­æ‰“å°é…ç½®æ–‡ä»¶å†…å®¹
âŒ ä½¿ç”¨rootæƒé™è¿è¡ŒDockeræ—¶å¿½ç•¥æƒé™

å®‰å…¨å®žè·µï¼š
âœ… ä½¿ç”¨è®¿é—®ä»¤ç‰Œä»£æ›¿å¯†ç 
âœ… å®šæœŸæ›´æ¢å¯†ç å’Œä»¤ç‰Œ
âœ… ä½¿ç”¨credStoreå¤–éƒ¨å­˜å‚¨
âœ… é™åˆ¶é…ç½®æ–‡ä»¶è®¿é—®æƒé™
```

---

## 4. ðŸ’¾ å‡­è¯å­˜å‚¨é…ç½®


### 4.1 credStoreå’ŒcredHelpersæ¦‚å¿µ


**ä¸ºä»€ä¹ˆéœ€è¦æ›´å®‰å…¨çš„å‡­è¯å­˜å‚¨ï¼Ÿ**
æƒ³è±¡ä½ çš„é“¶è¡Œå¡å¯†ç ï¼Œä½ è‚¯å®šä¸ä¼šå†™åœ¨çº¸æ¡ä¸Šåˆ°å¤„è´´ç€ã€‚Dockerçš„å¯†ç ä¹Ÿä¸€æ ·ï¼Œéœ€è¦æ›´å®‰å…¨çš„ä¿å­˜æ–¹å¼ã€‚

```
ðŸ¦ ä¼ ç»Ÿæ–¹å¼ï¼šå¯†ç å†™åœ¨config.jsoné‡Œ
â€¢ å°±åƒæŠŠé“¶è¡Œå¡å¯†ç å†™åœ¨é’±åŒ…é‡Œ
â€¢ ä»»ä½•äººæ‹¿åˆ°æ–‡ä»¶å°±èƒ½çœ‹åˆ°å¯†ç 
â€¢ å®‰å…¨æ€§è¾ƒä½Ž

ðŸ” credStoreæ–¹å¼ï¼šä½¿ç”¨ç³»ç»Ÿå¯†ç ç®¡ç†å™¨
â€¢ å°±åƒä½¿ç”¨é“¶è¡Œçš„å®‰å…¨ä¿é™©ç®±
â€¢ å¯†ç å­˜å‚¨åœ¨ç³»ç»ŸåŠ å¯†å­˜å‚¨ä¸­
â€¢ åªæœ‰æŽˆæƒç”¨æˆ·èƒ½è®¿é—®
```

### 4.2 credStoreé…ç½®


**ä»€ä¹ˆæ˜¯credStoreï¼Ÿ**
å®ƒå‘Šè¯‰Dockerä½¿ç”¨ç³»ç»Ÿçš„å¯†ç ç®¡ç†å™¨æ¥å­˜å‚¨è®¤è¯ä¿¡æ¯ã€‚

```json
{
  "credsStore": "osxkeychain"  // macOSç³»ç»Ÿ
}

// æˆ–è€…
{
  "credsStore": "wincred"      // Windowsç³»ç»Ÿ
}

// æˆ–è€…
{
  "credsStore": "secretservice" // Linuxç³»ç»Ÿ
}
```

**ðŸ“± ä¸åŒç³»ç»Ÿçš„å‡­è¯å­˜å‚¨**ï¼š
```
macOSç³»ç»Ÿï¼š
â€¢ ä½¿ç”¨ç³»ç»Ÿé’¥åŒ™ä¸²ï¼ˆKeychainï¼‰
â€¢ é…ç½®ï¼š{"credsStore": "osxkeychain"}
â€¢ éœ€è¦å®‰è£…ï¼šdocker-credential-osxkeychain

Windowsç³»ç»Ÿï¼š
â€¢ ä½¿ç”¨Windowså‡­æ®ç®¡ç†å™¨
â€¢ é…ç½®ï¼š{"credsStore": "wincred"}
â€¢ éœ€è¦å®‰è£…ï¼šdocker-credential-wincred

Linuxç³»ç»Ÿï¼š
â€¢ ä½¿ç”¨Secret Service API
â€¢ é…ç½®ï¼š{"credsStore": "secretservice"}
â€¢ éœ€è¦å®‰è£…ï¼šdocker-credential-secretservice
```

### 4.3 credHelpersé«˜çº§é…ç½®


**ä»€ä¹ˆæ˜¯credHelpersï¼Ÿ**
å¦‚æžœä½ è¦è¿žæŽ¥å¤šä¸ªä¸åŒçš„ä»“åº“ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªä»“åº“æŒ‡å®šä¸åŒçš„å‡­è¯åŠ©æ‰‹ã€‚å°±åƒä¸ºä¸åŒçš„é“¶è¡Œè´¦æˆ·ä½¿ç”¨ä¸åŒçš„å®‰å…¨æŽªæ–½ã€‚

```json
{
  "credHelpers": {
    "gcr.io": "gcr",              // Googleå®¹å™¨ä»“åº“ç”¨gcråŠ©æ‰‹
    "*.amazonaws.com": "ecr-login", // AWSç”¨ecråŠ©æ‰‹
    "harbor.company.com": "pass"    // å…¬å¸ä»“åº“ç”¨passå·¥å…·
  }
}
```

**ðŸŽ¯ å®žé™…åº”ç”¨åœºæ™¯**ï¼š
```
å¤šäº‘çŽ¯å¢ƒé…ç½®ï¼š
{
  "auths": {},
  "credsStore": "osxkeychain",    // é»˜è®¤ç”¨ç³»ç»Ÿé’¥åŒ™ä¸²
  "credHelpers": {
    "gcr.io": "gcr",              // Google Cloud
    "123456789.dkr.ecr.us-west-2.amazonaws.com": "ecr-login", // AWS
    "myregistry.azurecr.io": "acr" // Azure
  }
}

å·¥ä½œæµç¨‹ï¼š
1. æ‹‰å–gcr.ioçš„é•œåƒ â†’ ä½¿ç”¨gcråŠ©æ‰‹
2. æ‹‰å–AWS ECRé•œåƒ â†’ ä½¿ç”¨ecr-loginåŠ©æ‰‹  
3. æ‹‰å–å…¶ä»–é•œåƒ â†’ ä½¿ç”¨é»˜è®¤osxkeychain
```

### 4.4 å‡­è¯åŠ©æ‰‹å®‰è£…ä¸Žé…ç½®


**å®žé™…å®‰è£…æ­¥éª¤**ï¼š

```bash
# macOSå®‰è£…å‡­è¯åŠ©æ‰‹
brew install docker-credential-helper

# Linuxå®‰è£…ï¼ˆUbuntu/Debianï¼‰
sudo apt install golang-docker-credential-helpers

# æ‰‹åŠ¨å®‰è£…ç‰¹å®šåŠ©æ‰‹
go install github.com/docker/docker-credential-helpers/credentials@latest

# éªŒè¯åŠ©æ‰‹æ˜¯å¦å¯ç”¨
docker-credential-osxkeychain version
```

**é…ç½®éªŒè¯æ–¹æ³•**ï¼š
```bash
# æµ‹è¯•å‡­è¯åŠ©æ‰‹æ˜¯å¦å·¥ä½œ
echo '{"ServerURL":"https://index.docker.io/v1/"}' | docker-credential-osxkeychain get

# å¦‚æžœé…ç½®æ­£ç¡®ï¼Œåº”è¯¥è¿”å›žå­˜å‚¨çš„å‡­è¯ä¿¡æ¯
{
  "Username": "youruser",
  "Secret": "yourtoken"
}
```

---

## 5. ðŸŒ ç½‘ç»œä»£ç†è®¾ç½®


### 5.1 ä»£ç†é…ç½®çš„å¿…è¦æ€§


**ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦é…ç½®ä»£ç†ï¼Ÿ**
åœ¨å¾ˆå¤šå…¬å¸æˆ–å­¦æ ¡ç½‘ç»œçŽ¯å¢ƒä¸­ï¼Œä¸èƒ½ç›´æŽ¥è®¿é—®å¤–ç½‘ï¼Œå°±åƒä½åœ¨å°åŒºé‡Œè¦é€šè¿‡é—¨å«æ‰èƒ½å‡ºåŽ»ä¸€æ ·ã€‚

```
ðŸ¢ å¸¸è§éœ€è¦ä»£ç†çš„åœºæ™¯ï¼š
â€¢ å…¬å¸å†…ç½‘çŽ¯å¢ƒï¼Œéœ€è¦é€šè¿‡ä»£ç†è®¿é—®Docker Hub
â€¢ å­¦æ ¡ç½‘ç»œï¼Œéœ€è¦ä»£ç†ä¸‹è½½é•œåƒ
â€¢ æŸäº›åœ°åŒºç½‘ç»œé™åˆ¶ï¼Œéœ€è¦ä»£ç†è®¿é—®
â€¢ æé«˜ä¸‹è½½é€Ÿåº¦ï¼Œä½¿ç”¨åŠ é€Ÿä»£ç†

ðŸš« ä¸é…ç½®ä»£ç†çš„åŽæžœï¼š
â€¢ docker pull å‘½ä»¤è¶…æ—¶å¤±è´¥
â€¢ æ— æ³•ä»ŽDocker Hubä¸‹è½½é•œåƒ
â€¢ æž„å»ºè¿‡ç¨‹ä¸­æ— æ³•ä¸‹è½½ä¾èµ–åŒ…
â€¢ æŽ¨é€é•œåƒåˆ°è¿œç¨‹ä»“åº“å¤±è´¥
```

### 5.2 proxieså­—æ®µé…ç½®


**ä»£ç†é…ç½®çš„åŸºæœ¬ç»“æž„**ï¼š

```json
{
  "proxies": {
    "default": {
      "httpProxy": "http://proxy.company.com:8080",
      "httpsProxy": "http://proxy.company.com:8080",
      "noProxy": "localhost,127.0.0.1,*.company.com"
    }
  }
}
```

**ðŸ”§ é…ç½®å­—æ®µè¯¦è§£**ï¼š
```
httpProxyï¼šHTTPåè®®ä»£ç†
â€¢ æ ¼å¼ï¼šhttp://ä»£ç†æœåŠ¡å™¨:ç«¯å£
â€¢ ä¾‹å¦‚ï¼šhttp://proxy.company.com:8080
â€¢ ç”¨äºŽè®¿é—®æ™®é€šHTTPç½‘ç«™

httpsProxyï¼šHTTPSåè®®ä»£ç†  
â€¢ æ ¼å¼ï¼šhttp://ä»£ç†æœåŠ¡å™¨:ç«¯å£
â€¢ æ³¨æ„ï¼šä»£ç†æœåŠ¡å™¨æœ¬èº«ç”¨HTTPï¼Œä½†ä»£ç†HTTPSæµé‡
â€¢ ç”¨äºŽè®¿é—®åŠ å¯†HTTPSç½‘ç«™ï¼ˆå¦‚Docker Hubï¼‰

noProxyï¼šä¸ä½¿ç”¨ä»£ç†çš„åœ°å€
â€¢ ç”¨é€—å·åˆ†éš”å¤šä¸ªåœ°å€
â€¢ æ”¯æŒé€šé…ç¬¦ *.company.com
â€¢ å¸¸è§å€¼ï¼šlocalhost,127.0.0.1,10.*
```

### 5.3 ä¸åŒçŽ¯å¢ƒçš„ä»£ç†é…ç½®


**ä¼ä¸šçŽ¯å¢ƒä»£ç†é…ç½®**ï¼š
```json
{
  "proxies": {
    "default": {
      "httpProxy": "http://proxy.company.com:8080",
      "httpsProxy": "http://proxy.company.com:8080",
      "noProxy": "localhost,127.0.0.1,*.company.com,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"
    }
  }
}
```

**éœ€è¦è®¤è¯çš„ä»£ç†**ï¼š
```json
{
  "proxies": {
    "default": {
      "httpProxy": "http://username:password@proxy.company.com:8080",
      "httpsProxy": "http://username:password@proxy.company.com:8080",
      "noProxy": "localhost,127.0.0.1"
    }
  }
}
```

**ðŸ’¡ ä»£ç†é…ç½®æŠ€å·§**ï¼š
```
å¸¸è§å†…ç½‘åœ°å€æ®µï¼ˆæ·»åŠ åˆ°noProxyï¼‰ï¼š
â€¢ 10.0.0.0/8        (10.x.x.x)
â€¢ 172.16.0.0/12     (172.16.x.x - 172.31.x.x)  
â€¢ 192.168.0.0/16    (192.168.x.x)
â€¢ localhost, 127.0.0.1

æµ‹è¯•ä»£ç†æ˜¯å¦ç”Ÿæ•ˆï¼š
curl --proxy http://proxy.company.com:8080 https://registry-1.docker.io/v2/

ä»£ç†è®¤è¯å¯†ç åŒ…å«ç‰¹æ®Šå­—ç¬¦æ—¶éœ€è¦ç¼–ç ï¼š
@ â†’ %40
: â†’ %3A  
/ â†’ %2F
```

### 5.4 ä»£ç†æ•…éšœæŽ’é™¤


**å¸¸è§ä»£ç†é—®é¢˜**ï¼š
```bash
# æµ‹è¯•ä»£ç†è¿žé€šæ€§
curl --proxy http://proxy.company.com:8080 https://www.google.com

# æ£€æŸ¥Dockeræ˜¯å¦ä½¿ç”¨äº†ä»£ç†é…ç½®
docker info | grep -i proxy

# ä¸´æ—¶æµ‹è¯•ä¸ä½¿ç”¨ä»£ç†
unset HTTP_PROXY HTTPS_PROXY
docker pull hello-world
```

**ðŸ” æ•…éšœæŽ’é™¤æ­¥éª¤**ï¼š
```
é—®é¢˜è¯Šæ–­æµç¨‹ï¼š
1. ç¡®è®¤ä»£ç†æœåŠ¡å™¨åœ°å€ç«¯å£æ­£ç¡®
2. æµ‹è¯•ä»£ç†æœåŠ¡å™¨æ˜¯å¦å¯è¾¾
3. æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®  
4. ç¡®è®¤noProxyé…ç½®æ˜¯å¦åˆç†
5. é‡å¯DockeræœåŠ¡åŠ è½½æ–°é…ç½®

å¸¸è§é”™è¯¯ä¿¡æ¯ï¼š
"dial tcp: lookup registry-1.docker.io: no such host"
â†’ DNSè§£æžé—®é¢˜ï¼Œæ£€æŸ¥ä»£ç†DNSè®¾ç½®

"proxyconnect tcp: dial tcp: connect: connection refused"  
â†’ ä»£ç†æœåŠ¡å™¨æ‹’ç»è¿žæŽ¥ï¼Œæ£€æŸ¥ä»£ç†åœ°å€å’Œç«¯å£

"407 Proxy Authentication Required"
â†’ ä»£ç†éœ€è¦è®¤è¯ï¼Œæ£€æŸ¥ç”¨æˆ·åå¯†ç 
```

---

## 6. âŒ¨ï¸ æ“ä½œä½“éªŒé…ç½®


### 6.1 detachKeysåˆ†ç¦»é”®é…ç½®


**ä»€ä¹ˆæ˜¯åˆ†ç¦»é”®ï¼Ÿ**
å½“ä½ è¿è¡Œ `docker run -it` è¿›å…¥å®¹å™¨åŽï¼Œæƒ³è¦é€€å‡ºä½†ä¸åœæ­¢å®¹å™¨ï¼Œå°±éœ€è¦ç”¨åˆ°åˆ†ç¦»é”®ã€‚å°±åƒç”µæ¢¯çš„ç´§æ€¥æŒ‰é’®ä¸€æ ·ã€‚

```
é»˜è®¤åˆ†ç¦»é”®åºåˆ—ï¼šCtrl+P, Ctrl+Q
æ“ä½œæ­¥éª¤ï¼š
1. åœ¨å®¹å™¨å†…æŒ‰ Ctrl+P
2. æ¾å¼€åŽç«‹å³æŒ‰ Ctrl+Q  
3. å®¹å™¨ç»§ç»­è¿è¡Œï¼Œä½†ä½ å›žåˆ°äº†ä¸»æœº

å¦‚æžœé»˜è®¤é”®ä¸å¥½ç”¨ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š
```

```json
{
  "detachKeys": "ctrl-\\,ctrl-\\"
}
```

**ðŸŽ¯ è‡ªå®šä¹‰åˆ†ç¦»é”®çš„åŽŸå› **ï¼š
```
ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ï¼Ÿ
â€¢ é»˜è®¤Ctrl+På¯èƒ½ä¸Žå…¶ä»–è½¯ä»¶å†²çª
â€¢ æŸäº›ç»ˆç«¯çŽ¯å¢ƒä¸‹é»˜è®¤é”®ä¸å“åº”
â€¢ ä¸ªäººä½¿ç”¨ä¹ æƒ¯ä¸åŒ
â€¢ é˜²æ­¢è¯¯æ“ä½œé€€å‡ºå®¹å™¨

å¸¸ç”¨çš„æ›¿ä»£ç»„åˆï¼š
â€¢ "ctrl-\\,ctrl-\\"     (Ctrl+\, Ctrl+\)
â€¢ "ctrl-a,ctrl-d"       (ç±»ä¼¼screen/tmux)
â€¢ "ctrl-z,ctrl-z"       (åŒå‡»Ctrl+Z)
â€¢ "alt-q,alt-q"         (åŒå‡»Alt+Q)
```

### 6.2 stackOrchestratorç¼–æŽ’å™¨é…ç½®


**ç¼–æŽ’å™¨æ˜¯ä»€ä¹ˆï¼Ÿ**
å°±åƒä¹é˜ŸæŒ‡æŒ¥ä¸€æ ·ï¼Œç¼–æŽ’å™¨è´Ÿè´£åè°ƒç®¡ç†å¤šä¸ªå®¹å™¨çš„è¿è¡Œã€‚

```json
{
  "stackOrchestrator": "swarm"
}

// æˆ–è€…
{
  "stackOrchestrator": "kubernetes"  
}
```

**ðŸ“š ç¼–æŽ’å™¨å¯¹æ¯”**ï¼š
```
Docker Swarmï¼š
âœ… DockeråŽŸç”Ÿï¼Œé…ç½®ç®€å•
âœ… å­¦ä¹ æˆæœ¬ä½Ž
âŒ åŠŸèƒ½ç›¸å¯¹ç®€å•
âŒ ç¤¾åŒºç”Ÿæ€è¾ƒå°

Kubernetesï¼š
âœ… åŠŸèƒ½å¼ºå¤§ï¼Œç”Ÿæ€ä¸°å¯Œ
âœ… è¡Œä¸šæ ‡å‡†
âŒ å­¦ä¹ æˆæœ¬é«˜  
âŒ é…ç½®å¤æ‚

é€‰æ‹©å»ºè®®ï¼š
â€¢ å°åž‹é¡¹ç›®ã€å­¦ä¹ é˜¶æ®µ â†’ Swarm
â€¢ ç”Ÿäº§çŽ¯å¢ƒã€å¤§åž‹é¡¹ç›® â†’ Kubernetes
```

### 6.3 experimentalå®žéªŒæ€§åŠŸèƒ½


**ä»€ä¹ˆæ˜¯å®žéªŒæ€§åŠŸèƒ½ï¼Ÿ**
å°±åƒæ‰‹æœºçš„"å¼€å‘è€…é€‰é¡¹"ï¼ŒåŒ…å«ä¸€äº›æ­£åœ¨æµ‹è¯•çš„æ–°åŠŸèƒ½ã€‚

```json
{
  "experimental": "enabled"
}
```

**âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹**ï¼š
```
å®žéªŒæ€§åŠŸèƒ½ç‰¹ç‚¹ï¼š
â€¢ åŠŸèƒ½å¯èƒ½ä¸ç¨³å®š
â€¢ APIå¯èƒ½ä¼šå˜åŒ–  
â€¢ ä¸å»ºè®®åœ¨ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨
â€¢ å¯èƒ½åœ¨æœªæ¥ç‰ˆæœ¬ä¸­è¢«ç§»é™¤

å¸¸è§å®žéªŒæ€§åŠŸèƒ½ï¼š
â€¢ buildkitæž„å»ºå™¨å¢žå¼º
â€¢ å¤šæž¶æž„é•œåƒæ”¯æŒ
â€¢ æ–°çš„ç½‘ç»œåŠŸèƒ½
â€¢ å®‰å…¨æ€§å¢žå¼ºç‰¹æ€§

å¯ç”¨æ–¹æ³•ï¼š
æ–¹æ³•1ï¼šé…ç½®æ–‡ä»¶è®¾ç½®
{"experimental": "enabled"}

æ–¹æ³•2ï¼šçŽ¯å¢ƒå˜é‡
export DOCKER_CLI_EXPERIMENTAL=enabled

æ–¹æ³•3ï¼šå‘½ä»¤è¡Œå‚æ•°  
docker --experimental build
```

---

## 7. ðŸ—ï¸ ä¸Šä¸‹æ–‡ç®¡ç†


### 7.1 ä»€ä¹ˆæ˜¯Dockerä¸Šä¸‹æ–‡


**ä¸Šä¸‹æ–‡çš„é€šä¿—ç†è§£**ï¼š
æƒ³è±¡ä½ æœ‰å¤šä¸ªåŠžå…¬å®¤ï¼ˆå¼€å‘çŽ¯å¢ƒã€æµ‹è¯•çŽ¯å¢ƒã€ç”Ÿäº§çŽ¯å¢ƒï¼‰ï¼Œæ¯æ¬¡å·¥ä½œéœ€è¦åˆ‡æ¢åˆ°ä¸åŒçš„åŠžå…¬å®¤ã€‚Dockerä¸Šä¸‹æ–‡å°±æ˜¯å¸®ä½ å¿«é€Ÿåˆ‡æ¢"åŠžå…¬å®¤"çš„å·¥å…·ã€‚

```
ðŸ“ ä¸Šä¸‹æ–‡åŒ…å«çš„ä¿¡æ¯ï¼š
â€¢ DockeræœåŠ¡å™¨åœ°å€ï¼ˆå“ªå°æœºå™¨ï¼‰
â€¢ è®¤è¯ä¿¡æ¯ï¼ˆæ€Žä¹ˆç™»å½•ï¼‰  
â€¢ TLSè¯ä¹¦ï¼ˆå®‰å…¨è¿žæŽ¥ï¼‰
â€¢ çŽ¯å¢ƒæ ‡è¯†ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰

ðŸ”„ ä½¿ç”¨åœºæ™¯ï¼š
â€¢ æœ¬åœ°å¼€å‘ â†’ è¿œç¨‹æµ‹è¯•æœåŠ¡å™¨
â€¢ æµ‹è¯•çŽ¯å¢ƒ â†’ ç”Ÿäº§çŽ¯å¢ƒ
â€¢ ä¸åŒçš„é¡¹ç›®çŽ¯å¢ƒ
â€¢ ä¸åŒçš„äº‘æœåŠ¡å•†
```

### 7.2 currentContextå’Œcontextsé…ç½®


**åŸºæœ¬é…ç½®ç»“æž„**ï¼š
```json
{
  "currentContext": "production",
  "contexts": {
    "default": {
      "description": "æœ¬åœ°å¼€å‘çŽ¯å¢ƒ",
      "docker": {
        "host": "unix:///var/run/docker.sock"
      }
    },
    "testing": {
      "description": "æµ‹è¯•æœåŠ¡å™¨",  
      "docker": {
        "host": "tcp://test-server:2376",
        "tlsVerify": true,
        "tlsCertDir": "/home/user/.docker/test-certs"
      }
    },
    "production": {
      "description": "ç”Ÿäº§çŽ¯å¢ƒ",
      "docker": {
        "host": "tcp://prod-server:2376", 
        "tlsVerify": true,
        "tlsCertDir": "/home/user/.docker/prod-certs"
      }
    }
  }
}
```

**ðŸ”§ ä¸Šä¸‹æ–‡æ“ä½œå‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰ä¸Šä¸‹æ–‡
docker context ls

# æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡
docker context show

# åˆ‡æ¢ä¸Šä¸‹æ–‡
docker context use production

# åˆ›å»ºæ–°ä¸Šä¸‹æ–‡
docker context create myserver \
  --docker "host=tcp://myserver:2376,ca=/path/to/ca.pem,cert=/path/to/cert.pem,key=/path/to/key.pem"

# åˆ é™¤ä¸Šä¸‹æ–‡
docker context rm myserver
```

### 7.3 å®žé™…åº”ç”¨åœºæ™¯


**å¼€å‘å›¢é˜Ÿçš„çŽ¯å¢ƒç®¡ç†**ï¼š
```bash
# å¼€å‘äººå‘˜çš„å…¸åž‹é…ç½®
# ä¸Šåˆåœ¨æœ¬åœ°å¼€å‘
docker context use default
docker build -t myapp:dev .

# ä¸‹åˆéƒ¨ç½²åˆ°æµ‹è¯•çŽ¯å¢ƒ
docker context use testing  
docker push test-registry.com/myapp:dev

# æ™šä¸Šå‘å¸ƒåˆ°ç”Ÿäº§çŽ¯å¢ƒ
docker context use production
docker pull test-registry.com/myapp:dev
docker tag test-registry.com/myapp:dev prod-registry.com/myapp:v1.0
docker push prod-registry.com/myapp:v1.0
```

**ðŸ’¼ ä¼ä¸šçº§æœ€ä½³å®žè·µ**ï¼š
```
çŽ¯å¢ƒå‘½åè§„èŒƒï¼š
â€¢ local-dev      (æœ¬åœ°å¼€å‘)
â€¢ team-dev       (å›¢é˜Ÿå¼€å‘çŽ¯å¢ƒ)
â€¢ staging        (é¢„å‘å¸ƒçŽ¯å¢ƒ)
â€¢ production     (ç”Ÿäº§çŽ¯å¢ƒ)
â€¢ dr-backup      (ç¾å¤‡çŽ¯å¢ƒ)

å®‰å…¨é…ç½®ï¼š
âœ… ç”Ÿäº§çŽ¯å¢ƒå¿…é¡»ä½¿ç”¨TLSåŠ å¯†
âœ… ä¸åŒçŽ¯å¢ƒä½¿ç”¨ä¸åŒçš„è¯ä¹¦
âœ… é™åˆ¶ç”Ÿäº§çŽ¯å¢ƒè®¿é—®æƒé™  
âœ… å®šæœŸæ›´æ¢è¯ä¹¦å’Œå¯†é’¥

æ“ä½œè§„èŒƒï¼š
â€¢ æ˜Žç¡®æ ‡è¯†å½“å‰ä¸Šä¸‹æ–‡
â€¢ ç”Ÿäº§æ“ä½œéœ€è¦ç¡®è®¤
â€¢ è®°å½•çŽ¯å¢ƒåˆ‡æ¢æ—¥å¿—
â€¢ å»ºç«‹çŽ¯å¢ƒè®¿é—®å®¡æ‰¹æµç¨‹
```

---

## 8. ðŸ”Œ æ’ä»¶ä¸Žæ‰©å±•åŠŸèƒ½


### 8.1 pluginsæ’ä»¶é…ç½®æ¦‚è¿°


**æ’ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ**
å°±åƒæ‰‹æœºAppä¸€æ ·ï¼ŒDockeræ’ä»¶æ˜¯ä¸ºDockeræ·»åŠ æ–°åŠŸèƒ½çš„æ‰©å±•ç¨‹åºã€‚

```json
{
  "plugins": {
    "buildx": {
      "path": "/usr/local/lib/docker/cli-plugins/docker-buildx"
    },
    "compose": {
      "path": "/usr/local/lib/docker/cli-plugins/docker-compose"  
    }
  }
}
```

**ðŸ”§ å¸¸ç”¨æ’ä»¶ç±»åž‹**ï¼š
```
å®˜æ–¹æ’ä»¶ï¼š
â€¢ buildxï¼šå¢žå¼ºçš„æž„å»ºåŠŸèƒ½
â€¢ composeï¼šå¤šå®¹å™¨åº”ç”¨ç¼–æŽ’
â€¢ scanï¼šé•œåƒå®‰å…¨æ‰«æ

ç¬¬ä¸‰æ–¹æ’ä»¶ï¼š
â€¢ diveï¼šé•œåƒå±‚åˆ†æž
â€¢ ctopï¼šå®¹å™¨ç›‘æŽ§
â€¢ portainerï¼šWebç®¡ç†ç•Œé¢

è‡ªå®šä¹‰æ’ä»¶ï¼š
â€¢ ä¼ä¸šå†…éƒ¨å·¥å…·é›†æˆ
â€¢ ç‰¹å®šå·¥ä½œæµè‡ªåŠ¨åŒ–
â€¢ ç›‘æŽ§å’Œæ—¥å¿—æ”¶é›†
```

### 8.2 aliaseså‘½ä»¤åˆ«å


**ä¸ºä»€ä¹ˆéœ€è¦å‘½ä»¤åˆ«åï¼Ÿ**
å°±åƒç»™é•¿é•¿çš„ç”µè¯å·ç è®¾ç½®å¿«æ·é”®ä¸€æ ·ï¼ŒæŠŠå¤æ‚çš„Dockerå‘½ä»¤è®¾ç½®æˆç®€å•çš„åˆ«åã€‚

```json
{
  "aliases": {
    "ps": "container ls",
    "images": "image ls", 
    "rmi": "image rm",
    "logs": "container logs --follow",
    "exec": "container exec -it",
    "build": "buildx build --platform linux/amd64,linux/arm64"
  }
}
```

**ðŸ“ å®žç”¨åˆ«åç¤ºä¾‹**ï¼š
```json
{
  "aliases": {
    "cleanup": "system prune -af --volumes",
    "stats": "stats --format 'table {{.Container}}\\t{{.CPUPerc}}\\t{{.MemUsage}}'",
    "logs": "logs --timestamps --follow --tail=100",
    "sh": "exec -it",
    "bash": "exec -it bash",
    "inspect": "inspect --format '{{json .}}' | jq"
  }
}
```

**ðŸŽ¯ åˆ«åè®¾è®¡æŠ€å·§**ï¼š
```
è®¾è®¡åŽŸåˆ™ï¼š
â€¢ ç®€çŸ­æ˜“è®°ï¼špsæ¯”container lsæ›´ç®€å•
â€¢ ç¬¦åˆä¹ æƒ¯ï¼šå€Ÿé‰´Linuxå‘½ä»¤ä¹ æƒ¯
â€¢ åŠŸèƒ½æ˜Žç¡®ï¼šä¸€ä¸ªåˆ«ååšä¸€ä»¶äº‹
â€¢ é¿å…å†²çªï¼šä¸è¦è¦†ç›–é‡è¦çš„ç³»ç»Ÿå‘½ä»¤

ä½¿ç”¨å»ºè®®ï¼š
âœ… ä¸ºå¸¸ç”¨æ“ä½œåˆ›å»ºåˆ«å
âœ… ä¸ºå¤æ‚å‚æ•°åˆ›å»ºåˆ«å
âœ… å›¢é˜Ÿå†…ç»Ÿä¸€åˆ«åè§„èŒƒ  
âœ… å®šæœŸæ¸…ç†ä¸ç”¨çš„åˆ«å

æ³¨æ„äº‹é¡¹ï¼š
âš ï¸ åˆ«åè¿‡å¤šä¼šå¢žåŠ å­¦ä¹ æˆæœ¬
âš ï¸ åˆ«ååœ¨ä¸åŒçŽ¯å¢ƒé—´ä¸é€šç”¨
âš ï¸ å¤æ‚åˆ«åå»ºè®®å†™æˆè„šæœ¬
```

---

## 9. ðŸ› ï¸ å®žç”¨é…ç½®æŠ€å·§


### 9.1 é…ç½®æ–‡ä»¶æ¨¡æ¿


**æ–°æ‰‹æŽ¨èçš„åŸºç¡€é…ç½®**ï¼š
```json
{
  "auths": {},
  "credsStore": "osxkeychain",
  "detachKeys": "ctrl-\\,ctrl-\\",
  "currentContext": "default",
  "proxies": {
    "default": {
      "noProxy": "localhost,127.0.0.1,*.local"
    }
  },
  "aliases": {
    "ps": "container ls",
    "cleanup": "system prune -f"
  }
}
```

**ä¼ä¸šçŽ¯å¢ƒæŽ¨èé…ç½®**ï¼š
```json
{
  "auths": {},
  "credsStore": "secretservice", 
  "currentContext": "development",
  "contexts": {
    "development": {
      "description": "å¼€å‘çŽ¯å¢ƒ",
      "docker": {
        "host": "unix:///var/run/docker.sock"
      }
    },
    "staging": {
      "description": "æµ‹è¯•çŽ¯å¢ƒ", 
      "docker": {
        "host": "tcp://staging-docker:2376",
        "tlsVerify": true
      }
    }
  },
  "proxies": {
    "default": {
      "httpProxy": "http://proxy.company.com:8080",
      "httpsProxy": "http://proxy.company.com:8080", 
      "noProxy": "localhost,127.0.0.1,*.company.com,10.0.0.0/8"
    }
  },
  "aliases": {
    "ps": "container ls --format 'table {{.Names}}\\t{{.Image}}\\t{{.Status}}'",
    "logs": "logs --timestamps --tail=100",
    "cleanup": "system prune -af"
  }
}
```

### 9.2 é…ç½®éªŒè¯å’Œæµ‹è¯•


**éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®**ï¼š
```bash
# éªŒè¯JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
python3 -m json.tool ~/.docker/config.json

# æˆ–ä½¿ç”¨jqå·¥å…·  
jq . ~/.docker/config.json

# æµ‹è¯•è®¤è¯é…ç½®
docker login --username=test --password-stdin < /dev/null

# æµ‹è¯•ä»£ç†é…ç½®
docker pull hello-world

# æµ‹è¯•ä¸Šä¸‹æ–‡åˆ‡æ¢
docker context ls
docker context use default
docker info
```

**ðŸ” å¸¸è§é…ç½®é”™è¯¯**ï¼š
```
JSONæ ¼å¼é”™è¯¯ï¼š
â€¢ ç¼ºå°‘é€—å·æˆ–å¤šä½™é€—å·
â€¢ å¼•å·ä¸åŒ¹é…
â€¢ æ‹¬å·ä¸åŒ¹é…

é…ç½®å€¼é”™è¯¯ï¼š
â€¢ ä»£ç†åœ°å€æ ¼å¼é”™è¯¯
â€¢ æ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨
â€¢ æƒé™è®¾ç½®ä¸å½“

è§£å†³æ–¹æ³•ï¼š
1. ä½¿ç”¨JSONéªŒè¯å·¥å…·æ£€æŸ¥æ ¼å¼
2. é€é¡¹æµ‹è¯•å„ä¸ªé…ç½®åŠŸèƒ½
3. æŸ¥çœ‹Dockeræ—¥å¿—å®šä½é—®é¢˜
4. å¤‡ä»½é…ç½®æ–‡ä»¶é˜²æ­¢ä¸¢å¤±
```

### 9.3 å¤šçŽ¯å¢ƒé…ç½®ç®¡ç†


**é…ç½®æ–‡ä»¶ç‰ˆæœ¬ç®¡ç†ç­–ç•¥**ï¼š
```bash
# ä¸ºä¸åŒçŽ¯å¢ƒå‡†å¤‡é…ç½®æ¨¡æ¿
mkdir -p ~/.docker/configs
cp ~/.docker/config.json ~/.docker/configs/config-dev.json
cp ~/.docker/config.json ~/.docker/configs/config-prod.json

# å¿«é€Ÿåˆ‡æ¢é…ç½®
function switch-docker-config() {
  local env=$1
  if [ -f ~/.docker/configs/config-${env}.json ]; then
    cp ~/.docker/configs/config-${env}.json ~/.docker/config.json
    echo "Switched to ${env} environment"
    docker context show
  else
    echo "Config for ${env} not found"
  fi
}

# ä½¿ç”¨æ–¹æ³•
switch-docker-config dev
switch-docker-config prod
```

**ðŸ“‹ çŽ¯å¢ƒé…ç½®æ£€æŸ¥æ¸…å•**ï¼š
```
å¼€å‘çŽ¯å¢ƒé…ç½®ï¼š
â–¡ åŸºæœ¬è®¤è¯ä¿¡æ¯è®¾ç½®
â–¡ æœ¬åœ°Docker socketè¿žæŽ¥
â–¡ å¼€å‘ä»£ç†é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
â–¡ å®žç”¨åˆ«åé…ç½®

æµ‹è¯•çŽ¯å¢ƒé…ç½®ï¼š  
â–¡ æµ‹è¯•æœåŠ¡å™¨è¿žæŽ¥ä¿¡æ¯
â–¡ TLSè¯ä¹¦é…ç½®
â–¡ æµ‹è¯•ä»“åº“è®¤è¯
â–¡ çŽ¯å¢ƒæ ‡è¯†æ˜Žç¡®

ç”Ÿäº§çŽ¯å¢ƒé…ç½®ï¼š
â–¡ ç”Ÿäº§æœåŠ¡å™¨å®‰å…¨è¿žæŽ¥
â–¡ ä¸¥æ ¼çš„TLSéªŒè¯
â–¡ ç”Ÿäº§ä»“åº“æƒé™
â–¡ æ“ä½œå®¡è®¡é…ç½®
â–¡ ç´§æ€¥æ¢å¤ç¨‹åº
```

---

## 10. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŽŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ðŸ”¸ config.jsonæ–‡ä»¶ï¼šDockerå®¢æˆ·ç«¯çš„"è®¾ç½®ä¸­å¿ƒ"
ðŸ”¸ authså­—æ®µï¼šå­˜å‚¨ç™»å½•è®¤è¯ä¿¡æ¯ï¼Œç±»ä¼¼"è®°ä½å¯†ç "
ðŸ”¸ credStoreï¼šä½¿ç”¨ç³»ç»Ÿå®‰å…¨å­˜å‚¨ï¼Œæ¯”æ˜Žæ–‡å¯†ç æ›´å®‰å…¨
ðŸ”¸ proxiesï¼šç½‘ç»œä»£ç†é…ç½®ï¼Œä¼ä¸šçŽ¯å¢ƒå¿…å¤‡
ðŸ”¸ contextsï¼šçŽ¯å¢ƒä¸Šä¸‹æ–‡ç®¡ç†ï¼Œå¤šçŽ¯å¢ƒåˆ‡æ¢åˆ©å™¨
ðŸ”¸ aliasesï¼šå‘½ä»¤åˆ«åï¼Œæé«˜æ“ä½œæ•ˆçŽ‡
ðŸ”¸ detachKeysï¼šå®¹å™¨åˆ†ç¦»å¿«æ·é”®ï¼Œé¿å…è¯¯æ“ä½œ
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦å®¢æˆ·ç«¯é…ç½®**ï¼š
```
è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š
â€¢ é¿å…é‡å¤è¾“å…¥è®¤è¯ä¿¡æ¯
â€¢ é€‚åº”ä¸åŒç½‘ç»œçŽ¯å¢ƒï¼ˆä»£ç†ï¼‰
â€¢ ç®¡ç†å¤šä¸ªDockerçŽ¯å¢ƒ
â€¢ æé«˜æ—¥å¸¸æ“ä½œæ•ˆçŽ‡
â€¢ ç»Ÿä¸€å›¢é˜Ÿå·¥ä½œçŽ¯å¢ƒ

é…ç½®çš„æœ¬è´¨ï¼š
è®©Dockerå‘½ä»¤è¡Œå·¥å…·æ›´å¥½ç”¨ã€æ›´å®‰å…¨ã€æ›´é€‚åˆä½ çš„å·¥ä½œçŽ¯å¢ƒ
```

**ðŸ”¹ å®‰å…¨æ€§çš„é‡è¦è€ƒè™‘**ï¼š
```
å®‰å…¨é£Žé™©ç‚¹ï¼š
â€¢ æ˜Žæ–‡å­˜å‚¨çš„å¯†ç å¯èƒ½æ³„éœ²
â€¢ é…ç½®æ–‡ä»¶æƒé™è®¾ç½®ä¸å½“
â€¢ ä»£ç†é…ç½®åŒ…å«è®¤è¯ä¿¡æ¯
â€¢ å¤šçŽ¯å¢ƒé…ç½®æ··æ·†

å®‰å…¨æœ€ä½³å®žè·µï¼š
â€¢ ä½¿ç”¨credStoreè€Œéžæ˜Žæ–‡å­˜å‚¨
â€¢ è®¾ç½®åˆé€‚çš„æ–‡ä»¶æƒé™ï¼ˆ600ï¼‰
â€¢ å®šæœŸæ›´æ¢å¯†ç å’Œä»¤ç‰Œ
â€¢ è°¨æ…Žå¤„ç†ç”Ÿäº§çŽ¯å¢ƒé…ç½®
```

**ðŸ”¹ é…ç½®ç®¡ç†çš„ç­–ç•¥**ï¼š
```
ç‰ˆæœ¬æŽ§åˆ¶ï¼š
â€¢ é…ç½®æ–‡ä»¶æ¨¡æ¿åŒ–
â€¢ æ•æ„Ÿä¿¡æ¯å¤–éƒ¨å­˜å‚¨
â€¢ çŽ¯å¢ƒå·®å¼‚æ ‡å‡†åŒ–
â€¢ å˜æ›´è®°å½•å’Œå›žæ»š

å›¢é˜Ÿåä½œï¼š
â€¢ ç»Ÿä¸€é…ç½®æ ‡å‡†
â€¢ å…±äº«éžæ•æ„Ÿé…ç½®
â€¢ çŽ¯å¢ƒè®¿é—®æƒé™ç®¡ç†
â€¢ æ“ä½œè§„èŒƒåŸ¹è®­
```

### 10.3 å®žé™…åº”ç”¨æŒ‡å¯¼


**ðŸ’¼ ä¸åŒè§’è‰²çš„é…ç½®é‡ç‚¹**ï¼š
```
å¼€å‘äººå‘˜ï¼š
â€¢ é‡ç‚¹é…ç½®è®¤è¯å’Œä»£ç†
â€¢ è®¾ç½®å®žç”¨çš„å‘½ä»¤åˆ«å
â€¢ é…ç½®æœ¬åœ°å’Œæµ‹è¯•çŽ¯å¢ƒä¸Šä¸‹æ–‡
â€¢ å¯ç”¨å¼€å‘ä¾¿åˆ©åŠŸèƒ½

è¿ç»´äººå‘˜ï¼š
â€¢ é‡ç‚¹é…ç½®å¤šçŽ¯å¢ƒä¸Šä¸‹æ–‡
â€¢ ä¸¥æ ¼çš„ç”Ÿäº§çŽ¯å¢ƒå®‰å…¨è®¾ç½®
â€¢ è¯¦ç»†çš„æ“ä½œå®¡è®¡é…ç½®
â€¢ åº”æ€¥æ¢å¤é…ç½®

å›¢é˜Ÿé¢†å¯¼ï¼š
â€¢ åˆ¶å®šé…ç½®æ ‡å‡†å’Œè§„èŒƒ
â€¢ å»ºç«‹çŽ¯å¢ƒç®¡ç†æµç¨‹
â€¢ ç¡®ä¿å®‰å…¨ç­–ç•¥æ‰§è¡Œ
â€¢ å·¥å…·å’ŒåŸ¹è®­è§„åˆ’
```

**ðŸŽ¯ é…ç½®ä¼˜åŒ–å»ºè®®**ï¼š
```
æ€§èƒ½ä¼˜åŒ–ï¼š
â€¢ ä½¿ç”¨æœ¬åœ°DNSç¼“å­˜
â€¢ é…ç½®åˆé€‚çš„ä»£ç†ç­–ç•¥
â€¢ ä¼˜åŒ–ç½‘ç»œè¿žæŽ¥å‚æ•°
â€¢ å¯ç”¨é•œåƒç¼“å­˜

æ•ˆçŽ‡æå‡ï¼š
â€¢ åˆ›å»ºå¸¸ç”¨æ“ä½œåˆ«å
â€¢ é…ç½®å¿«é€ŸçŽ¯å¢ƒåˆ‡æ¢
â€¢ è‡ªåŠ¨åŒ–é‡å¤ä»»åŠ¡
â€¢ é›†æˆå¼€å‘å·¥å…·é“¾

å®‰å…¨å¼ºåŒ–ï¼š
â€¢ å¯ç”¨TLSéªŒè¯
â€¢ ä½¿ç”¨å®‰å…¨å‡­è¯å­˜å‚¨
â€¢ é™åˆ¶ç½‘ç»œè®¿é—®èŒƒå›´
â€¢ å®šæœŸå®‰å…¨å®¡è®¡
```

### 10.4 æ•…éšœæŽ’é™¤æŒ‡å—


**ðŸ”§ å¸¸è§é—®é¢˜è¯Šæ–­**ï¼š
```
è®¤è¯é—®é¢˜ï¼š
ç—‡çŠ¶ï¼šdocker pullå¤±è´¥ï¼Œæç¤ºè®¤è¯é”™è¯¯
æŽ’æŸ¥ï¼šæ£€æŸ¥authsé…ç½®ã€credStoreè®¾ç½®ã€ç™»å½•çŠ¶æ€

ç½‘ç»œé—®é¢˜ï¼š
ç—‡çŠ¶ï¼šè¿žæŽ¥è¶…æ—¶ï¼Œæ— æ³•ä¸‹è½½é•œåƒ
æŽ’æŸ¥ï¼šæ£€æŸ¥ä»£ç†é…ç½®ã€DNSè®¾ç½®ã€é˜²ç«å¢™è§„åˆ™

ä¸Šä¸‹æ–‡é—®é¢˜ï¼š
ç—‡çŠ¶ï¼šè¿žæŽ¥é”™è¯¯çš„DockeræœåŠ¡å™¨
æŽ’æŸ¥ï¼šæ£€æŸ¥currentContextã€contextsé…ç½®ã€TLSè¯ä¹¦

é…ç½®é—®é¢˜ï¼š
ç—‡çŠ¶ï¼šDockerå‘½ä»¤è¡Œè¡Œä¸ºå¼‚å¸¸
æŽ’æŸ¥ï¼šéªŒè¯JSONæ ¼å¼ã€æ£€æŸ¥é…ç½®æƒé™ã€æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```

**ðŸš¨ åº”æ€¥å¤„ç†æ–¹æ³•**ï¼š
```
é…ç½®ä¸¢å¤±ï¼š
1. æ£€æŸ¥å¤‡ä»½æ–‡ä»¶
2. é‡æ–°ç”ŸæˆåŸºç¡€é…ç½®  
3. é‡æ–°è®¾ç½®è®¤è¯ä¿¡æ¯
4. æµ‹è¯•å„é¡¹åŠŸèƒ½

é…ç½®æŸåï¼š
1. éªŒè¯JSONæ ¼å¼
2. å¯¹æ¯”æ­£ç¡®çš„é…ç½®æ¨¡æ¿
3. é€é¡¹ä¿®å¤é…ç½®é¡¹
4. é‡å¯DockeræœåŠ¡

æƒé™é—®é¢˜ï¼š
1. æ£€æŸ¥æ–‡ä»¶æ‰€æœ‰è€…
2. è®¾ç½®æ­£ç¡®æƒé™ï¼ˆ600ï¼‰
3. ç¡®è®¤ç”¨æˆ·ç»„è®¾ç½®
4. éªŒè¯sudoæƒé™
```

### 10.5 å­¦ä¹ å»ºè®®


**ðŸ“š å­¦ä¹ è·¯å¾„**ï¼š
```
åŸºç¡€é˜¶æ®µï¼š
â€¢ ç†è§£é…ç½®æ–‡ä»¶çš„ä½œç”¨å’Œä½ç½®
â€¢ æŽŒæ¡åŸºæœ¬çš„è®¤è¯é…ç½®
â€¢ å­¦ä¼šè®¾ç½®ç½‘ç»œä»£ç†
â€¢ ç†Ÿæ‚‰å¸¸ç”¨é…ç½®é€‰é¡¹

è¿›é˜¶é˜¶æ®µï¼š
â€¢ æŽŒæ¡ä¸Šä¸‹æ–‡ç®¡ç†
â€¢ é…ç½®å®‰å…¨å‡­è¯å­˜å‚¨  
â€¢ è‡ªå®šä¹‰å‘½ä»¤åˆ«å
â€¢ å¤šçŽ¯å¢ƒé…ç½®ç®¡ç†

é«˜çº§é˜¶æ®µï¼š
â€¢ ä¼ä¸šçº§å®‰å…¨é…ç½®
â€¢ è‡ªåŠ¨åŒ–é…ç½®éƒ¨ç½²
â€¢ æ’ä»¶å¼€å‘å’Œé›†æˆ
â€¢ æ€§èƒ½ä¼˜åŒ–è°ƒè¯•
```

**ðŸ§  è®°å¿†è¦ç‚¹**ï¼š
- é…ç½®æ–‡ä»¶æ˜¯Dockerå®¢æˆ·ç«¯çš„"å¤§è„‘ä¸­æž¢"
- å®‰å…¨å­˜å‚¨å‡­è¯æ¯”æ˜Žæ–‡å¯†ç æ›´å¯é   
- ä»£ç†é…ç½®æ˜¯ä¼ä¸šçŽ¯å¢ƒçš„å¿…å¤‡æŠ€èƒ½
- ä¸Šä¸‹æ–‡ç®¡ç†è®©å¤šçŽ¯å¢ƒåˆ‡æ¢å˜ç®€å•
- åˆç†é…ç½®è®©Dockerä½¿ç”¨æ›´é«˜æ•ˆæ›´å®‰å…¨

**æ ¸å¿ƒç†å¿µ**ï¼šå¥½çš„é…ç½®è®©Dockerä½¿ç”¨å¦‚è™Žæ·»ç¿¼ï¼Œå·®çš„é…ç½®è®©æ—¥å¸¸å·¥ä½œæ­¥å±¥ç»´è‰°ã€‚æŠ•å…¥æ—¶é—´å­¦ä¹ å’Œä¼˜åŒ–é…ç½®ï¼Œå°†åœ¨æ—¥åŽçš„å·¥ä½œä¸­èŽ·å¾—æ•°å€å›žæŠ¥ï¼