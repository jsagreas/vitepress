---
title: 4、容器信息查看
---
## 📚 目录

1. [容器信息查看概述](#1-容器信息查看概述)
2. [docker ps - 查看容器列表](#2-docker-ps---查看容器列表)
3. [docker logs - 查看容器日志](#3-docker-logs---查看容器日志)
4. [docker inspect - 查看详细信息](#4-docker-inspect---查看详细信息)
5. [docker stats - 资源统计监控](#5-docker-stats---资源统计监控)
6. [docker top - 进程查看](#6-docker-top---进程查看)
7. [容器状态监控综合实践](#7-容器状态监控综合实践)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🔍 容器信息查看概述


### 1.1 为什么需要查看容器信息


在实际使用Docker时，我们经常需要了解容器的运行状况，就像管理服务器一样需要监控各种指标。想象一下，你开了一家餐厅，你需要知道：
- 哪些厨师正在工作（哪些容器在运行）
- 厨房的温度和用电情况（资源使用情况） 
- 厨师们在做什么菜（容器内进程）
- 今天的营业记录（日志信息）

Docker容器信息查看就是帮我们了解这些"餐厅运营状况"的工具。

### 1.2 容器信息查看工具全景


```
容器信息查看工具图谱：
                    
    ┌─────────────────┐
    │   Docker容器    │
    │   信息查看      │
    └─────────────────┘
            │
    ┌───────┴────────┐
    │                │
    ▼                ▼
┌─────────┐    ┌─────────────┐
│基础信息  │    │  详细监控   │
│查看工具  │    │   工具      │
└─────────┘    └─────────────┘
    │                │
┌───┴────┐      ┌────┴─────┐
│docker  │      │docker    │
│ps      │      │stats     │
└────────┘      └──────────┘
    │                │
┌───┴────┐      ┌────┴─────┐
│docker  │      │docker    │
│logs    │      │inspect   │
└────────┘      └──────────┘
                     │
                ┌────┴─────┐
                │docker    │
                │top       │
                └──────────┘
```

### 1.3 信息查看的层次分类


| **类型** | **工具** | **主要用途** | **信息详细度** |
|---------|---------|-------------|---------------|
| 🔍 **概览信息** | `docker ps` | 快速了解容器状态 | ⭐⭐ |
| 📜 **日志信息** | `docker logs` | 排查问题，查看输出 | ⭐⭐⭐ |
| 🔬 **详细信息** | `docker inspect` | 深入了解配置 | ⭐⭐⭐⭐⭐ |
| 📊 **性能监控** | `docker stats` | 实时资源监控 | ⭐⭐⭐⭐ |
| ⚙️ **进程信息** | `docker top` | 查看容器内进程 | ⭐⭐⭐ |

---

## 2. 📋 docker ps - 查看容器列表


### 2.1 docker ps 基本概念


`docker ps` 是查看容器状态的基础命令，就像Linux系统中的 `ps` 命令查看进程一样。它能让我们快速了解当前有哪些容器在运行。

**💡 核心作用：**
- 显示正在运行的容器
- 显示容器的基本信息
- 快速判断容器状态

### 2.2 基础使用方法


**查看正在运行的容器：**
```bash
docker ps
```

**查看所有容器（包括已停止的）：**
```bash
docker ps -a
```

### 2.3 输出信息详解


```
执行 docker ps 后的输出示例：

CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                    NAMES
f1e2d3c4b5a6   nginx     "/docker-entrypoint…"   2 hours ago      Up 2 hours      0.0.0.0:8080->80/tcp    my-nginx
a9b8c7d6e5f4   mysql     "docker-entrypoint.s…"  1 day ago        Up 24 hours     0.0.0.0:3306->3306/tcp  my-database
```

**各列含义解释：**

| **列名** | **含义** | **说明** |
|---------|---------|---------|
| `CONTAINER ID` | 容器ID | 容器的唯一标识符（短版本） |
| `IMAGE` | 镜像名称 | 容器基于的镜像 |
| `COMMAND` | 启动命令 | 容器启动时执行的命令 |
| `CREATED` | 创建时间 | 容器被创建的时间 |
| `STATUS` | 运行状态 | Up（运行中）、Exited（已退出） |
| `PORTS` | 端口映射 | 容器端口与主机端口的映射关系 |
| `NAMES` | 容器名称 | 容器的友好名称 |

### 2.4 常用参数详解


**🔸 查看所有容器状态**
```bash
# 查看所有容器（运行中 + 已停止）
docker ps -a

# 简化输出，只显示容器ID
docker ps -q

# 查看最近创建的3个容器
docker ps -n 3
```

**🔸 过滤特定容器**
```bash
# 根据状态过滤
docker ps --filter "status=running"
docker ps --filter "status=exited"

# 根据镜像过滤
docker ps --filter "ancestor=nginx"

# 根据名称过滤
docker ps --filter "name=my-nginx"
```

**🔸 自定义输出格式**
```bash
# 只显示容器ID和名称
docker ps --format "table {{.ID}}\t{{.Names}}"

# 显示容器名称和状态
docker ps --format "{{.Names}}: {{.Status}}"
```

### 2.5 实际应用场景


**场景1：快速检查服务状态**
```bash
# 检查web服务是否正在运行
docker ps --filter "name=web-server"

# 如果返回结果为空，说明容器没有运行
```

**场景2：清理已停止的容器**
```bash
# 查看所有已停止的容器
docker ps --filter "status=exited"

# 删除所有已停止的容器
docker rm $(docker ps -aq --filter "status=exited")
```

---

## 3. 📜 docker logs - 查看容器日志


### 3.1 为什么需要查看日志


日志就像是容器的"日记本"，记录了容器运行过程中的所有重要信息。当应用出现问题时，日志是我们排查问题的重要线索。

**日志的重要作用：**
- 🔍 **问题排查**：发现错误信息和异常
- 📊 **性能分析**：了解应用运行情况
- 🔒 **安全审计**：记录访问和操作日志
- 📈 **业务分析**：统计用户行为

### 3.2 基础日志查看


**查看容器日志：**
```bash
# 查看指定容器的日志
docker logs 容器名称或ID

# 实际示例
docker logs my-nginx
```

**查看日志的最后几行：**
```bash
# 查看最后20行日志
docker logs --tail 20 my-nginx

# 查看最后5行日志
docker logs -n 5 my-nginx
```

### 3.3 实时日志跟踪


**实时跟踪日志输出：**
```bash
# 实时跟踪日志（类似tail -f）
docker logs -f my-nginx

# 从某个时间点开始跟踪
docker logs --since "2024-01-01" -f my-nginx

# 跟踪最近1小时的日志
docker logs --since "1h" -f my-nginx
```

**💡 实时跟踪使用技巧：**
- 使用 `Ctrl + C` 停止跟踪
- 适合调试和监控场景
- 可以同时在多个终端跟踪不同容器

### 3.4 日志时间和过滤


**按时间查看日志：**
```bash
# 查看指定时间段的日志
docker logs --since "2024-09-19T10:00:00" --until "2024-09-19T12:00:00" my-nginx

# 查看最近2小时的日志
docker logs --since "2h" my-nginx

# 查看昨天的日志
docker logs --since "24h" --until "1h" my-nginx
```

**时间格式说明：**
- `2024-09-19T10:30:00` - 具体时间点
- `1h` - 1小时前
- `30m` - 30分钟前
- `2024-09-19` - 具体日期

### 3.5 日志输出格式化


```bash
# 显示时间戳
docker logs -t my-nginx

# 组合使用：显示时间戳 + 实时跟踪 + 最后50行
docker logs -t -f --tail 50 my-nginx
```

### 3.6 实际应用场景


**场景1：排查应用启动失败**
```bash
# 应用启动失败，查看错误信息
docker logs my-app

# 如果日志太多，先看最后的错误
docker logs --tail 20 my-app
```

**场景2：监控Web服务访问**
```bash
# 实时监控nginx访问日志
docker logs -f my-nginx

# 查看最近访问记录
docker logs --since "10m" my-nginx
```

**场景3：调试应用问题**
```bash
# 开启一个终端实时跟踪日志
docker logs -f my-app

# 在另一个终端操作应用，观察日志变化
# 这样可以实时看到操作对应的日志输出
```

---

## 4. 🔬 docker inspect - 查看详细信息


### 4.1 什么是docker inspect


`docker inspect` 就像是给容器做"全身体检"，它能提供容器的所有详细信息，包括配置、网络、存储等各个方面的详细数据。

**核心特点：**
- 📊 **信息最全面**：包含容器的所有配置信息
- 🔍 **格式为JSON**：结构化数据，便于程序处理
- 🎯 **精确定位**：可以查询特定字段信息

### 4.2 基础使用方法


**查看容器完整信息：**
```bash
docker inspect 容器名称或ID
```

**查看指定字段信息：**
```bash
# 查看容器IP地址
docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' my-nginx

# 查看容器状态
docker inspect --format='{{.State.Status}}' my-nginx
```

### 4.3 主要信息分类


Docker inspect返回的信息可以分为几个主要类别：

```
容器信息结构：

{
  "Id": "容器完整ID",
  "Created": "创建时间",
  "Path": "启动命令路径", 
  "Args": ["命令参数"],
  "State": {
    "Status": "运行状态",
    "Running": true/false,
    "Pid": "进程ID",
    "StartedAt": "启动时间"
  },
  "Image": "镜像ID",
  "Config": {
    "Env": ["环境变量"],
    "Cmd": ["默认命令"],
    "ExposedPorts": {"端口配置"}
  },
  "NetworkSettings": {
    "Networks": {"网络配置"}
  },
  "Mounts": [卷挂载信息]
}
```

### 4.4 常用信息查询


**🔸 查看网络信息**
```bash
# 查看容器IP地址
docker inspect --format='{{.NetworkSettings.IPAddress}}' my-nginx

# 查看所有网络接口
docker inspect --format='{{json .NetworkSettings.Networks}}' my-nginx
```

**🔸 查看端口映射**
```bash
# 查看端口绑定
docker inspect --format='{{json .NetworkSettings.Ports}}' my-nginx

# 查看容器暴露的端口
docker inspect --format='{{json .Config.ExposedPorts}}' my-nginx
```

**🔸 查看环境变量**
```bash
# 查看所有环境变量
docker inspect --format='{{json .Config.Env}}' my-nginx

# 查看挂载信息
docker inspect --format='{{json .Mounts}}' my-nginx
```

### 4.5 实际应用场景


**场景1：网络问题排查**
```bash
# 检查容器网络配置
docker inspect --format='{{.NetworkSettings.IPAddress}}' problematic-container

# 检查端口映射是否正确
docker inspect --format='{{json .NetworkSettings.Ports}}' web-server
```

**场景2：容器配置验证**
```bash
# 验证环境变量是否正确设置
docker inspect --format='{{range .Config.Env}}{{println .}}{{end}}' my-app

# 检查挂载的数据卷
docker inspect --format='{{range .Mounts}}{{.Source}} -> {{.Destination}}{{println}}{{end}}' my-app
```

---

## 5. 📊 docker stats - 资源统计监控


### 5.1 什么是资源监控


`docker stats` 就像是给容器装了一个"仪表盘"，实时显示容器的资源使用情况，包括CPU、内存、网络、磁盘IO等指标。

**为什么需要监控资源：**
- 🚀 **性能优化**：识别资源瓶颈
- ⚠️ **预警机制**：避免资源耗尽
- 💰 **成本控制**：合理分配资源
- 🔍 **问题排查**：定位性能问题

### 5.2 基础使用方法


**实时查看所有容器资源使用：**
```bash
docker stats
```

**查看指定容器：**
```bash
docker stats 容器名称或ID
```

**一次性查看（不持续更新）：**
```bash
docker stats --no-stream
```

### 5.3 输出信息详解


```
docker stats 输出示例：

CONTAINER ID   NAME        CPU %     MEM USAGE / LIMIT     MEM %     NET I/O           BLOCK I/O         PIDS
f1e2d3c4b5a6   my-nginx    0.15%     25.6MiB / 1.944GiB   1.29%     1.2kB / 876B     0B / 0B           3
a9b8c7d6e5f4   my-mysql    2.50%     180.2MiB / 1.944GiB  9.07%     15.2kB / 8.1kB   45.1MB / 12.3MB   27
```

**各列含义说明：**

| **字段** | **含义** | **说明** |
|---------|---------|---------|
| `CONTAINER ID` | 容器ID | 容器的短ID |
| `NAME` | 容器名称 | 友好的容器名称 |
| `CPU %` | CPU使用率 | 容器占用的CPU百分比 |
| `MEM USAGE / LIMIT` | 内存使用情况 | 已使用内存/内存限制 |
| `MEM %` | 内存使用率 | 内存使用百分比 |
| `NET I/O` | 网络IO | 网络输入/输出流量 |
| `BLOCK I/O` | 磁盘IO | 磁盘读写流量 |
| `PIDS` | 进程数量 | 容器内运行的进程数 |

### 5.4 格式化输出


**自定义显示格式：**
```bash
# 只显示容器名称和CPU使用率
docker stats --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}"

# JSON格式输出
docker stats --format "{{json .}}" --no-stream
```

### 5.5 实际应用场景


**场景1：性能监控**
```bash
# 持续监控关键服务
docker stats web-server database-server

# 监控时发现问题的判断标准：
# CPU > 80%：可能需要扩容
# 内存使用接近限制：可能发生OOM
# 磁盘IO过高：可能存储瓶颈
```

**场景2：资源规划**
```bash
# 记录一天的资源使用情况
docker stats --no-stream > daily-stats.txt

# 分析peak时间的资源需求
# 为生产环境容器分配合适资源
```

**场景3：问题排查**
```bash
# 应用响应慢时，检查资源使用
docker stats problematic-app

# 如果CPU或内存使用异常高，说明可能存在：
# - 内存泄漏
# - 死循环
# - 数据库查询效率问题
```

---

## 6. ⚙️ docker top - 进程查看


### 6.1 什么是容器进程查看


`docker top` 让我们能够看到容器内部正在运行的进程，就像在Linux系统中使用 `ps` 命令查看系统进程一样。

**核心作用：**
- 🔍 **了解容器内部**：查看容器内运行的具体程序
- 🐛 **调试问题**：分析进程状态和资源占用
- 📊 **进程管理**：了解进程层级关系

### 6.2 基础使用方法


**查看容器内进程：**
```bash
docker top 容器名称或ID
```

**使用ps选项：**
```bash
# 显示更详细的进程信息
docker top 容器名称 aux
```

### 6.3 输出信息解读


```
docker top my-nginx 输出示例：

UID     PID     PPID    C    STIME   TTY     TIME        CMD
root    15234   15210   0    10:30   ?       00:00:00    nginx: master process nginx -g daemon off;
101     15267   15234   0    10:30   ?       00:00:00    nginx: worker process
```

**各列含义：**

| **列名** | **含义** | **说明** |
|---------|---------|---------|
| `UID` | 用户ID | 进程所属用户 |
| `PID` | 进程ID | 主机上的进程ID |
| `PPID` | 父进程ID | 父进程的ID |
| `C` | CPU使用率 | CPU占用百分比 |
| `STIME` | 启动时间 | 进程启动时间 |
| `TTY` | 终端 | 关联的终端 |
| `TIME` | 运行时间 | 累计CPU时间 |
| `CMD` | 命令 | 进程执行的命令 |

### 6.4 实际应用场景


**场景1：验证服务启动**
```bash
# 检查nginx是否正常启动
docker top my-nginx

# 正常情况应该看到：
# - master进程（主进程）
# - worker进程（工作进程）
```

**场景2：调试应用问题**
```bash
# 检查应用进程状态
docker top my-app aux

# 分析是否有：
# - 僵尸进程
# - 过多的进程数量
# - 异常的CPU占用
```

**场景3：多进程容器分析**
```bash
# 对于运行多个服务的容器
docker top complex-app

# 可以看到所有相关进程
# 便于理解服务架构
```

---

## 7. 🔧 容器状态监控综合实践


### 7.1 监控脚本示例


创建一个综合监控脚本，结合多个命令：

```bash
#!/bin/bash
# 容器健康检查脚本

CONTAINER_NAME="my-web-app"

echo "=== 容器基本信息 ==="
docker ps --filter "name=$CONTAINER_NAME" --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

echo -e "\n=== 资源使用情况 ==="
docker stats --no-stream --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.MemPerc}}" $CONTAINER_NAME

echo -e "\n=== 最近日志 ==="
docker logs --tail 10 $CONTAINER_NAME

echo -e "\n=== 进程信息 ==="
docker top $CONTAINER_NAME

echo -e "\n=== 网络配置 ==="
docker inspect --format='容器IP: {{.NetworkSettings.IPAddress}}' $CONTAINER_NAME
docker inspect --format='端口映射: {{json .NetworkSettings.Ports}}' $CONTAINER_NAME
```

### 7.2 问题排查流程


**当容器出现问题时的排查步骤：**

```
问题排查流程：

1. 📋 检查容器状态
   docker ps -a --filter "name=问题容器"
   ↓
2. 📜 查看最近日志  
   docker logs --tail 50 问题容器
   ↓
3. 📊 检查资源使用
   docker stats --no-stream 问题容器
   ↓  
4. ⚙️ 查看进程状态
   docker top 问题容器
   ↓
5. 🔍 检查详细配置
   docker inspect 问题容器
```

### 7.3 监控告警设置


**基于资源使用率的简单告警：**

```bash
#!/bin/bash
# 简单的资源告警脚本

CONTAINER="my-app"
CPU_THRESHOLD=80
MEM_THRESHOLD=80

# 获取CPU使用率
CPU_USAGE=$(docker stats --no-stream --format "{{.CPUPerc}}" $CONTAINER | sed 's/%//')
MEM_USAGE=$(docker stats --no-stream --format "{{.MemPerc}}" $CONTAINER | sed 's/%//')

if (( $(echo "$CPU_USAGE > $CPU_THRESHOLD" | bc -l) )); then
    echo "警告：CPU使用率过高 ($CPU_USAGE%)"
    # 这里可以发送邮件或消息通知
fi

if (( $(echo "$MEM_USAGE > $MEM_THRESHOLD" | bc -l) )); then
    echo "警告：内存使用率过高 ($MEM_USAGE%)"
    # 这里可以发送邮件或消息通知
fi
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心命令


```
🔍 容器信息查看核心命令：

docker ps        → 查看容器列表和状态
docker logs      → 查看容器日志输出  
docker inspect   → 查看容器详细配置
docker stats     → 监控容器资源使用
docker top       → 查看容器内进程
```

### 8.2 关键理解要点


**🔹 各命令的适用场景**
```
快速检查：     docker ps (了解整体状态)
问题排查：     docker logs (查看错误信息)  
深入分析：     docker inspect (详细配置)
性能监控：     docker stats (资源使用)
进程调试：     docker top (内部进程)
```

**🔹 信息查看的层次性**
```
第1层：概览信息 (docker ps)
第2层：运行日志 (docker logs) 
第3层：资源状态 (docker stats)
第4层：进程细节 (docker top)
第5层：完整配置 (docker inspect)
```

### 8.3 实际应用建议


**日常运维检查清单：**
- ✅ 定期使用 `docker ps` 检查容器状态
- ✅ 遇到问题优先查看 `docker logs`
- ✅ 使用 `docker stats` 监控资源使用
- ✅ 必要时用 `docker inspect` 深入分析
- ✅ 编写监控脚本自动化检查

**性能监控要点：**
- 📊 CPU使用率持续超过80%需要关注
- 💾 内存使用接近限制可能导致OOM
- 🌐 网络IO异常可能表示网络问题
- 💿 磁盘IO过高可能影响性能

### 8.4 故障排查思路


```
容器问题排查思维导图：

          容器出现问题
               ↓
        docker ps 检查状态
         ↓         ↓
     正在运行    已停止/异常
         ↓         ↓
   docker logs   docker logs
   查看运行日志   查看错误日志
         ↓         ↓
   docker stats  重启容器再观察
   检查资源使用     ↓
         ↓      问题依旧存在
   docker top      ↓
   检查进程状态   docker inspect
         ↓      检查配置问题
   问题定位完成
```

**核心记忆口诀：**
- 容器问题先看状态，docker ps来帮忙
- 日志信息最重要，docker logs排故障  
- 资源监控用stats，性能问题早发现
- 进程细节top命令，内部运行全掌握
- 配置详情inspect查，深入分析有依据