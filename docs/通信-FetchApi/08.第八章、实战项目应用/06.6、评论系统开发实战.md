---
title: 6ã€è¯„è®ºç³»ç»Ÿå¼€å‘å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°ä¸å‡†å¤‡](#1-é¡¹ç›®æ¦‚è¿°ä¸å‡†å¤‡)
2. [åç«¯æ¥å£æ¨¡æ‹Ÿè®¾è®¡](#2-åç«¯æ¥å£æ¨¡æ‹Ÿè®¾è®¡)
3. [è¯„è®ºåˆ—è¡¨åŠ è½½å®ç°](#3-è¯„è®ºåˆ—è¡¨åŠ è½½å®ç°)
4. [è¯„è®ºæäº¤åŠŸèƒ½å®ç°](#4-è¯„è®ºæäº¤åŠŸèƒ½å®ç°)
5. [é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ](#5-é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ)
6. [å®Œæ•´ä»£ç æ•´åˆ](#6-å®Œæ•´ä»£ç æ•´åˆ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ é¡¹ç›®æ¦‚è¿°ä¸å‡†å¤‡


### 1.1 ä»€ä¹ˆæ˜¯è¯„è®ºç³»ç»Ÿ


**é€šä¿—ç†è§£**ï¼š
è¯„è®ºç³»ç»Ÿå°±åƒå¾®åšä¸‹é¢çš„ç•™è¨€åŒºï¼Œç”¨æˆ·å¯ä»¥ï¼š
- **çœ‹åˆ°åˆ«äººçš„è¯„è®º**ï¼ˆè¯»å–æ•°æ®ï¼‰
- **å‘è¡¨è‡ªå·±çš„è¯„è®º**ï¼ˆæäº¤æ•°æ®ï¼‰
- **çœ‹åˆ°æœ€æ–°çš„è¯„è®º**ï¼ˆæ•°æ®æ›´æ–°ï¼‰

### 1.2 æˆ‘ä»¬è¦å®ç°ä»€ä¹ˆåŠŸèƒ½


```
åŠŸèƒ½æ¸…å•ï¼š
ğŸ“– åŠ è½½è¯„è®ºåˆ—è¡¨ â†’ ç”¨ GET è¯·æ±‚è·å–æ‰€æœ‰è¯„è®º
âœï¸ å‘è¡¨æ–°è¯„è®º â†’ ç”¨ POST è¯·æ±‚æäº¤è¯„è®ºå†…å®¹
ğŸ”„ å®æ—¶æ›´æ–° â†’ å‘è¡¨åç«‹å³åˆ·æ–°è¯„è®ºåˆ—è¡¨
âš ï¸ é”™è¯¯æç¤º â†’ ç½‘ç»œå¤±è´¥æ—¶ç»™ç”¨æˆ·å‹å¥½æç¤º
ğŸ§¹ çŠ¶æ€é‡ç½® â†’ æˆåŠŸåæ¸…ç©ºè¾“å…¥æ¡†
```

### 1.3 éœ€è¦çš„åŸºç¡€çŸ¥è¯†


> ğŸ’¡ **å‰ç½®è¦æ±‚**ï¼šä½ éœ€è¦äº†è§£åŸºæœ¬çš„ HTMLã€CSS å’Œ JavaScript

**æ¶‰åŠæŠ€æœ¯ç‚¹**ï¼š
- â­ **Fetch API**ï¼šå‘é€ç½‘ç»œè¯·æ±‚çš„ç°ä»£æ–¹å¼
- â­ **DOM æ“ä½œ**ï¼šåŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹
- â­ **JSON æ•°æ®**ï¼šå‰åç«¯æ•°æ®äº¤æ¢æ ¼å¼
- â­ **å¼‚æ­¥ç¼–ç¨‹**ï¼šå¤„ç†ç½‘ç»œè¯·æ±‚çš„ç­‰å¾…æ—¶é—´

---

## 2. ğŸ—ï¸ åç«¯æ¥å£æ¨¡æ‹Ÿè®¾è®¡


### 2.1 ä»€ä¹ˆæ˜¯æ¥å£


**ç®€å•ç†è§£**ï¼š
æ¥å£å°±åƒé¤å…çš„èœå•ï¼Œå‘Šè¯‰ä½ ï¼š
- è¦ä»€ä¹ˆæ•°æ®ï¼ˆè¯·æ±‚ï¼‰
- ç»™ä½ ä»€ä¹ˆæ•°æ®ï¼ˆå“åº”ï¼‰
- æ€ä¹ˆè¦æ•°æ®ï¼ˆæ–¹æ³•ï¼‰

### 2.2 è¯„è®ºæ¥å£è®¾è®¡


**ğŸ“¥ è·å–è¯„è®ºåˆ—è¡¨æ¥å£**
```
è¯·æ±‚æ–¹å¼ï¼šGET
è¯·æ±‚åœ°å€ï¼š/api/comments
è¿”å›æ•°æ®ï¼šè¯„è®ºæ•°ç»„

å“åº”ç¤ºä¾‹ï¼š
{
  "success": true,
  "data": [
    {
      "id": 1,
      "author": "å¼ ä¸‰",
      "content": "è¿™ç¯‡æ–‡ç« å†™å¾—çœŸå¥½ï¼",
      "time": "2025-01-15 10:30:00"
    }
  ]
}
```

**ğŸ“¤ æäº¤è¯„è®ºæ¥å£**
```
è¯·æ±‚æ–¹å¼ï¼šPOST  
è¯·æ±‚åœ°å€ï¼š/api/comments
å‘é€æ•°æ®ï¼šä½œè€…å’Œå†…å®¹

è¯·æ±‚ç¤ºä¾‹ï¼š
{
  "author": "æå››",
  "content": "æˆ‘ä¹Ÿè§‰å¾—å¾ˆæ£’"
}

å“åº”ç¤ºä¾‹ï¼š
{
  "success": true,
  "message": "è¯„è®ºå‘è¡¨æˆåŠŸ",
  "data": {
    "id": 2,
    "author": "æå››", 
    "content": "æˆ‘ä¹Ÿè§‰å¾—å¾ˆæ£’",
    "time": "2025-01-15 10:35:00"
  }
}
```

### 2.3 æ¨¡æ‹Ÿåç«¯æ•°æ®


> ğŸ’¡ **è¯´æ˜**ï¼šçœŸå®é¡¹ç›®ä¸­åç«¯ä¼šæä¾›æ¥å£ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨æ¨¡æ‹Ÿæ•°æ®æ¥å­¦ä¹ 

```javascript
// æ¨¡æ‹Ÿè¯„è®ºæ•°æ®åº“
let mockComments = [
  {
    id: 1,
    author: "å¼ ä¸‰",
    content: "è¿™æ˜¯ç¬¬ä¸€æ¡è¯„è®ºï¼",
    time: "2025-01-15 09:00:00"
  },
  {
    id: 2, 
    author: "æå››",
    content: "å­¦ä¹ Fetch APIå¾ˆæœ‰ç”¨",
    time: "2025-01-15 10:15:00"
  }
];
```

---

## 3. ğŸ“– è¯„è®ºåˆ—è¡¨åŠ è½½å®ç°


### 3.1 GETè¯·æ±‚çš„ä½œç”¨


**é€šä¿—è§£é‡Š**ï¼š
GETè¯·æ±‚å°±åƒ"æŸ¥çœ‹"æ“ä½œï¼Œä½ å»å›¾ä¹¦é¦†æŸ¥ä¹¦ï¼Œä¸ä¼šæ”¹å˜ä¹¦çš„å†…å®¹ï¼Œåªæ˜¯è·å–ä¿¡æ¯ã€‚

### 3.2 åŸºç¡€HTMLç»“æ„


```html
<!DOCTYPE html>
<html>
<head>
    <title>è¯„è®ºç³»ç»Ÿ</title>
    <style>
        .comment-item {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>è¯„è®ºç³»ç»Ÿç¤ºä¾‹</h1>
    
    <!-- è¯„è®ºåˆ—è¡¨åŒºåŸŸ -->
    <div id="comments-container">
        <div class="loading">æ­£åœ¨åŠ è½½è¯„è®º...</div>
    </div>
</body>
</html>
```

### 3.3 åŠ è½½è¯„è®ºçš„æ ¸å¿ƒé€»è¾‘


**ç¬¬ä¸€æ­¥ï¼šå‘é€GETè¯·æ±‚**
```javascript
async function loadComments() {
    try {
        // å‘é€GETè¯·æ±‚è·å–è¯„è®ºåˆ—è¡¨
        const response = await fetch('/api/comments');
        
        // æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ
        if (!response.ok) {
            throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
        }
        
        // è§£æJSONæ•°æ®
        const result = await response.json();
        
        // æ¸²æŸ“è¯„è®ºåˆ°é¡µé¢
        renderComments(result.data);
        
    } catch (error) {
        console.error('åŠ è½½è¯„è®ºå¤±è´¥:', error);
        showError('åŠ è½½è¯„è®ºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
    }
}
```

> ğŸ’¡ **ä»£ç è¯´æ˜**ï¼š
> - `fetch('/api/comments')` â†’ å‘æœåŠ¡å™¨è¦è¯„è®ºæ•°æ®
> - `response.json()` â†’ æŠŠæœåŠ¡å™¨è¿”å›çš„æ•°æ®è½¬æˆJavaScriptå¯¹è±¡
> - `renderComments()` â†’ æŠŠæ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š

### 3.4 æ¸²æŸ“è¯„è®ºåˆ°é¡µé¢


**ç¬¬äºŒæ­¥ï¼šæŠŠæ•°æ®å˜æˆHTML**
```javascript
function renderComments(comments) {
    const container = document.getElementById('comments-container');
    
    // å¦‚æœæ²¡æœ‰è¯„è®º
    if (comments.length === 0) {
        container.innerHTML = '<p>æš‚æ— è¯„è®ºï¼Œå¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡å§ï¼</p>';
        return;
    }
    
    // ç”Ÿæˆè¯„è®ºHTML
    const commentsHTML = comments.map(comment => `
        <div class="comment-item">
            <strong>${comment.author}</strong>
            <span style="color: #666;">${comment.time}</span>
            <p>${comment.content}</p>
        </div>
    `).join('');
    
    // æ›´æ–°é¡µé¢å†…å®¹
    container.innerHTML = commentsHTML;
}
```

> ğŸ” **é€»è¾‘è§£æ**ï¼š
> 1. æ‰¾åˆ°è¦æ˜¾ç¤ºè¯„è®ºçš„å®¹å™¨
> 2. å¦‚æœæ²¡æœ‰è¯„è®ºå°±æ˜¾ç¤ºæç¤º
> 3. å¦‚æœæœ‰è¯„è®ºå°±å¾ªç¯ç”ŸæˆHTML
> 4. æŠŠç”Ÿæˆçš„HTMLæ”¾åˆ°é¡µé¢ä¸Š

---

## 4. âœï¸ è¯„è®ºæäº¤åŠŸèƒ½å®ç°


### 4.1 POSTè¯·æ±‚çš„ä½œç”¨


**é€šä¿—è§£é‡Š**ï¼š
POSTè¯·æ±‚å°±åƒ"æäº¤"æ“ä½œï¼Œä½ å¡«å†™è¡¨å•åç‚¹å‡»æäº¤ï¼Œä¼šæŠŠæ•°æ®å‘é€ç»™æœåŠ¡å™¨ä¿å­˜ã€‚

### 4.2 è¯„è®ºè¡¨å•HTML


```html
<!-- åœ¨è¯„è®ºåˆ—è¡¨ä¸Šæ–¹æ·»åŠ è¡¨å• -->
<div id="comment-form">
    <h3>å‘è¡¨è¯„è®º</h3>
    <input type="text" id="author-input" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" required>
    <textarea id="content-input" placeholder="è¯·è¾“å…¥è¯„è®ºå†…å®¹" rows="3" required></textarea>
    <button onclick="submitComment()" id="submit-btn">å‘è¡¨è¯„è®º</button>
    <div id="message" style="margin-top: 10px;"></div>
</div>
```

### 4.3 æäº¤è¯„è®ºçš„æ ¸å¿ƒé€»è¾‘


**ç¬¬ä¸€æ­¥ï¼šæ”¶é›†è¡¨å•æ•°æ®**
```javascript
async function submitComment() {
    // è·å–è¾“å…¥æ¡†çš„å€¼
    const author = document.getElementById('author-input').value.trim();
    const content = document.getElementById('content-input').value.trim();
    
    // æ£€æŸ¥æ˜¯å¦å¡«å†™å®Œæ•´
    if (!author || !content) {
        showMessage('è¯·å¡«å†™æ˜µç§°å’Œè¯„è®ºå†…å®¹', 'error');
        return;
    }
    
    // å‡†å¤‡è¦å‘é€çš„æ•°æ®
    const commentData = {
        author: author,
        content: content
    };
    
    // å‘é€POSTè¯·æ±‚
    await sendComment(commentData);
}
```

**ç¬¬äºŒæ­¥ï¼šå‘é€POSTè¯·æ±‚**
```javascript
async function sendComment(commentData) {
    try {
        // æ˜¾ç¤ºæäº¤ä¸­çŠ¶æ€
        setSubmitLoading(true);
        
        const response = await fetch('/api/comments', {
            method: 'POST',                          // æŒ‡å®šè¯·æ±‚æ–¹å¼
            headers: {
                'Content-Type': 'application/json'   // å‘Šè¯‰æœåŠ¡å™¨å‘é€çš„æ˜¯JSONæ•°æ®
            },
            body: JSON.stringify(commentData)        // æŠŠæ•°æ®è½¬æˆJSONå­—ç¬¦ä¸²
        });
        
        if (!response.ok) {
            throw new Error('æäº¤å¤±è´¥');
        }
        
        const result = await response.json();
        
        // æäº¤æˆåŠŸåçš„å¤„ç†
        handleSubmitSuccess(result);
        
    } catch (error) {
        console.error('æäº¤è¯„è®ºå¤±è´¥:', error);
        showMessage('æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
    } finally {
        setSubmitLoading(false);
    }
}
```

> ğŸ’¡ **POSTè¯·æ±‚å…³é”®ç‚¹**ï¼š
> - `method: 'POST'` â†’ å‘Šè¯‰æœåŠ¡å™¨è¿™æ˜¯æäº¤æ•°æ®
> - `Content-Type: 'application/json'` â†’ è¯´æ˜å‘é€çš„æ•°æ®æ ¼å¼
> - `JSON.stringify()` â†’ æŠŠJavaScriptå¯¹è±¡è½¬æˆJSONå­—ç¬¦ä¸²

### 4.4 æˆåŠŸåçš„å¤„ç†


```javascript
function handleSubmitSuccess(result) {
    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
    showMessage('è¯„è®ºå‘è¡¨æˆåŠŸï¼', 'success');
    
    // æ¸…ç©ºè¾“å…¥æ¡†
    document.getElementById('author-input').value = '';
    document.getElementById('content-input').value = '';
    
    // é‡æ–°åŠ è½½è¯„è®ºåˆ—è¡¨ï¼ˆæ˜¾ç¤ºæœ€æ–°è¯„è®ºï¼‰
    loadComments();
}
```

---

## 5. âš ï¸ é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦é”™è¯¯å¤„ç†


**ç°å®æƒ…å†µ**ï¼š
- ğŸŒ **ç½‘ç»œå¯èƒ½æ–­å¼€** â†’ è¯·æ±‚å‘ä¸å‡ºå»
- ğŸ–¥ï¸ **æœåŠ¡å™¨å¯èƒ½å‡ºé”™** â†’ è¿”å›é”™è¯¯ä¿¡æ¯  
- ğŸ“± **ç”¨æˆ·æ“ä½œæœ‰è¯¯** â†’ è¾“å…¥ä¸åˆæ³•æ•°æ®

### 5.2 å‹å¥½çš„é”™è¯¯æç¤º


```javascript
function showMessage(text, type = 'info') {
    const messageDiv = document.getElementById('message');
    
    // æ ¹æ®ç±»å‹è®¾ç½®ä¸åŒæ ·å¼
    const colors = {
        success: '#4CAF50',
        error: '#f44336', 
        info: '#2196F3'
    };
    
    messageDiv.innerHTML = `
        <div style="
            padding: 10px; 
            border-radius: 4px; 
            background-color: ${colors[type]}20;
            border-left: 4px solid ${colors[type]};
            color: ${colors[type]};
        ">
            ${text}
        </div>
    `;
    
    // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
    setTimeout(() => {
        messageDiv.innerHTML = '';
    }, 3000);
}
```

### 5.3 åŠ è½½çŠ¶æ€ç®¡ç†


```javascript
function setSubmitLoading(isLoading) {
    const submitBtn = document.getElementById('submit-btn');
    const authorInput = document.getElementById('author-input');
    const contentInput = document.getElementById('content-input');
    
    if (isLoading) {
        submitBtn.textContent = 'æäº¤ä¸­...';
        submitBtn.disabled = true;
        authorInput.disabled = true;
        contentInput.disabled = true;
    } else {
        submitBtn.textContent = 'å‘è¡¨è¯„è®º';
        submitBtn.disabled = false;
        authorInput.disabled = false;
        contentInput.disabled = false;
    }
}
```

> ğŸ’¡ **ç”¨æˆ·ä½“éªŒè¦ç‚¹**ï¼š
> - ğŸ“ æäº¤æ—¶ç¦ç”¨æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
> - â³ æ˜¾ç¤º"æäº¤ä¸­"çŠ¶æ€ï¼Œè®©ç”¨æˆ·çŸ¥é“åœ¨å¤„ç†
> - âœ… æˆåŠŸåç»™äºˆæ˜ç¡®åé¦ˆ
> - âŒ å¤±è´¥æ—¶ç»™å‡ºå…·ä½“é”™è¯¯åŸå› 

---

## 6. ğŸ”§ å®Œæ•´ä»£ç æ•´åˆ


### 6.1 å®Œæ•´HTMLé¡µé¢


```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯„è®ºç³»ç»Ÿ - Fetch APIå®æˆ˜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        #comment-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        #comment-form input, #comment-form textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        #comment-form button {
            background: #007cba;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        #comment-form button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .comment-item {
            background: white;
            border: 1px solid #eee;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .comment-meta {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ è¯„è®ºç³»ç»Ÿç¤ºä¾‹</h1>
    
    <!-- è¯„è®ºå‘è¡¨è¡¨å• -->
    <div id="comment-form">
        <h3>ğŸ’¬ å‘è¡¨è¯„è®º</h3>
        <input type="text" id="author-input" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" required>
        <textarea id="content-input" placeholder="è¯·è¾“å…¥è¯„è®ºå†…å®¹" rows="4" required></textarea>
        <button onclick="submitComment()" id="submit-btn">å‘è¡¨è¯„è®º</button>
        <div id="message"></div>
    </div>
    
    <!-- è¯„è®ºåˆ—è¡¨æ˜¾ç¤ºåŒºåŸŸ -->
    <div id="comments-section">
        <h3>ğŸ’­ è¯„è®ºåˆ—è¡¨</h3>
        <div id="comments-container">
            <div class="loading">æ­£åœ¨åŠ è½½è¯„è®º...</div>
        </div>
    </div>

    <script src="comment-system.js"></script>
</body>
</html>
```

### 6.2 å®Œæ•´JavaScripté€»è¾‘


```javascript
// comment-system.js

// æ¨¡æ‹Ÿåç«¯æ•°æ®ï¼ˆå®é™…é¡¹ç›®ä¸­ç”±åç«¯æä¾›ï¼‰
let mockComments = [
    {
        id: 1,
        author: "å¼ ä¸‰",
        content: "è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„Fetch APIå­¦ä¹ ç¤ºä¾‹ï¼",
        time: "2025-01-15 09:30:00"
    },
    {
        id: 2,
        author: "æå››", 
        content: "å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨Fetchè¿›è¡ŒGETå’ŒPOSTè¯·æ±‚",
        time: "2025-01-15 10:15:00"
    }
];

// é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨åŠ è½½è¯„è®º
document.addEventListener('DOMContentLoaded', function() {
    loadComments();
});

// ğŸ“– åŠ è½½è¯„è®ºåˆ—è¡¨
async function loadComments() {
    try {
        // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼ˆå®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºçœŸå®APIï¼‰
        const result = await mockFetchComments();
        
        renderComments(result.data);
        
    } catch (error) {
        console.error('åŠ è½½è¯„è®ºå¤±è´¥:', error);
        showError('åŠ è½½è¯„è®ºå¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
    }
}

// ğŸ¨ æ¸²æŸ“è¯„è®ºåˆ°é¡µé¢
function renderComments(comments) {
    const container = document.getElementById('comments-container');
    
    if (comments.length === 0) {
        container.innerHTML = '<p class="loading">æš‚æ— è¯„è®ºï¼Œå¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼</p>';
        return;
    }
    
    const commentsHTML = comments
        .sort((a, b) => new Date(b.time) - new Date(a.time)) // æœ€æ–°çš„åœ¨å‰
        .map(comment => `
            <div class="comment-item">
                <div class="comment-meta">
                    <strong>${escapeHtml(comment.author)}</strong> 
                    <span>å‘è¡¨äº ${comment.time}</span>
                </div>
                <p>${escapeHtml(comment.content)}</p>
            </div>
        `).join('');
    
    container.innerHTML = commentsHTML;
}

// âœï¸ æäº¤è¯„è®º
async function submitComment() {
    const author = document.getElementById('author-input').value.trim();
    const content = document.getElementById('content-input').value.trim();
    
    // éªŒè¯è¾“å…¥
    if (!author) {
        showMessage('è¯·è¾“å…¥æ‚¨çš„æ˜µç§°', 'error');
        return;
    }
    
    if (!content) {
        showMessage('è¯·è¾“å…¥è¯„è®ºå†…å®¹', 'error');
        return;
    }
    
    if (content.length > 500) {
        showMessage('è¯„è®ºå†…å®¹ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦', 'error');
        return;
    }
    
    const commentData = { author, content };
    
    try {
        setSubmitLoading(true);
        
        // æ¨¡æ‹Ÿæäº¤è¯·æ±‚ï¼ˆå®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºçœŸå®APIï¼‰
        const result = await mockSubmitComment(commentData);
        
        if (result.success) {
            showMessage('è¯„è®ºå‘è¡¨æˆåŠŸï¼', 'success');
            clearForm();
            loadComments(); // é‡æ–°åŠ è½½è¯„è®ºåˆ—è¡¨
        } else {
            showMessage(result.message || 'æäº¤å¤±è´¥', 'error');
        }
        
    } catch (error) {
        console.error('æäº¤è¯„è®ºå¤±è´¥:', error);
        showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•', 'error');
    } finally {
        setSubmitLoading(false);
    }
}

// ğŸ”„ è®¾ç½®æäº¤çŠ¶æ€
function setSubmitLoading(isLoading) {
    const submitBtn = document.getElementById('submit-btn');
    const authorInput = document.getElementById('author-input');
    const contentInput = document.getElementById('content-input');
    
    submitBtn.disabled = isLoading;
    authorInput.disabled = isLoading;
    contentInput.disabled = isLoading;
    
    submitBtn.textContent = isLoading ? 'æäº¤ä¸­...' : 'å‘è¡¨è¯„è®º';
}

// ğŸ§¹ æ¸…ç©ºè¡¨å•
function clearForm() {
    document.getElementById('author-input').value = '';
    document.getElementById('content-input').value = '';
}

// ğŸ’¬ æ˜¾ç¤ºæ¶ˆæ¯æç¤º
function showMessage(text, type = 'info') {
    const messageDiv = document.getElementById('message');
    
    const colors = {
        success: '#4CAF50',
        error: '#f44336',
        info: '#2196F3'
    };
    
    messageDiv.innerHTML = `
        <div style="
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            background-color: ${colors[type]}15;
            border-left: 4px solid ${colors[type]};
            color: ${colors[type]};
        ">
            ${text}
        </div>
    `;
    
    setTimeout(() => {
        messageDiv.innerHTML = '';
    }, 3000);
}

// ğŸ›¡ï¸ HTMLè½¬ä¹‰ï¼ˆé˜²æ­¢XSSæ”»å‡»ï¼‰
function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

// ğŸ”§ æ¨¡æ‹ŸAPIå‡½æ•°ï¼ˆå®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºçœŸå®çš„fetchè¯·æ±‚ï¼‰

// æ¨¡æ‹Ÿè·å–è¯„è®ºåˆ—è¡¨
async function mockFetchComments() {
    // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    await new Promise(resolve => setTimeout(resolve, 500));
    
    return {
        success: true,
        data: [...mockComments]
    };
}

// æ¨¡æ‹Ÿæäº¤è¯„è®º
async function mockSubmitComment(commentData) {
    // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    await new Promise(resolve => setTimeout(resolve, 800));
    
    // æ¨¡æ‹Ÿ90%çš„æˆåŠŸç‡
    if (Math.random() < 0.9) {
        const newComment = {
            id: Date.now(),
            author: commentData.author,
            content: commentData.content,
            time: new Date().toLocaleString('zh-CN')
        };
        
        mockComments.push(newComment);
        
        return {
            success: true,
            message: 'è¯„è®ºå‘è¡¨æˆåŠŸ',
            data: newComment
        };
    } else {
        throw new Error('æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯');
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ GETè¯·æ±‚ï¼šè·å–æ•°æ®ï¼Œå°±åƒ"æŸ¥çœ‹"æ“ä½œ
ğŸ”¸ POSTè¯·æ±‚ï¼šæäº¤æ•°æ®ï¼Œå°±åƒ"å‘é€"æ“ä½œ  
ğŸ”¸ å¼‚æ­¥å¤„ç†ï¼šç”¨async/awaitå¤„ç†ç½‘ç»œè¯·æ±‚çš„ç­‰å¾…æ—¶é—´
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šç”¨try/catchæ•è·ç½‘ç»œé”™è¯¯å¹¶ç»™ç”¨æˆ·å‹å¥½æç¤º
ğŸ”¸ DOMæ“ä½œï¼šç”¨JavaScriptåŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹
ğŸ”¸ æ•°æ®æµï¼šè¯·æ±‚â†’å“åº”â†’è§£æâ†’æ¸²æŸ“â†’äº¤äº’çš„å®Œæ•´é“¾è·¯
```

### 7.2 å®æˆ˜å¼€å‘æµç¨‹


**ğŸ“‹ æ ‡å‡†å¼€å‘æ­¥éª¤**ï¼š
```
â‘  è®¾è®¡æ¥å£è§„èŒƒ â†’ ç¡®å®šè¯·æ±‚å’Œå“åº”æ ¼å¼
â‘¡ æ­å»ºé¡µé¢ç»“æ„ â†’ HTMLè¡¨å•å’Œæ˜¾ç¤ºåŒºåŸŸ
â‘¢ å®ç°æ•°æ®è·å– â†’ GETè¯·æ±‚åŠ è½½åˆ—è¡¨
â‘£ å®ç°æ•°æ®æäº¤ â†’ POSTè¯·æ±‚å‘é€æ•°æ®
â‘¤ å®Œå–„é”™è¯¯å¤„ç† â†’ ç½‘ç»œå¼‚å¸¸å’Œç”¨æˆ·ä½“éªŒ
â‘¥ æµ‹è¯•å’Œä¼˜åŒ– â†’ å„ç§æƒ…å†µä¸‹çš„è¡¨ç°
```

### 7.3 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆç”¨Fetchè€Œä¸æ˜¯å…¶ä»–æ–¹å¼**ï¼š
```
ä¼˜åŠ¿å¯¹æ¯”ï¼š
âœ… åŸºäºPromiseï¼Œæ”¯æŒasync/await
âœ… è¯­æ³•ç®€æ´ï¼Œæ˜“äºç†è§£
âœ… ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒ
âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶

vs XMLHttpRequestï¼š
âŒ XMLHttpRequestè¯­æ³•å¤æ‚
âŒ å›è°ƒåœ°ç‹±é—®é¢˜
âŒ é”™è¯¯å¤„ç†ç¹ç
```

**ğŸ”¹ å‰åç«¯æ•°æ®äº¤äº’æœ¬è´¨**ï¼š
```
å‰ç«¯çš„è§’è‰²ï¼š
ğŸ“± ç”¨æˆ·ç•Œé¢ â†’ æ”¶é›†ç”¨æˆ·è¾“å…¥
ğŸŒ ç½‘ç»œè¯·æ±‚ â†’ ä¸æœåŠ¡å™¨é€šä¿¡  
ğŸ¨ æ•°æ®æ¸²æŸ“ â†’ å°†æ•°æ®å±•ç¤ºç»™ç”¨æˆ·

åç«¯çš„è§’è‰²ï¼š
ğŸ’¾ æ•°æ®å­˜å‚¨ â†’ ä¿å­˜å’Œç®¡ç†æ•°æ®
ğŸ”’ ä¸šåŠ¡é€»è¾‘ â†’ å¤„ç†æ•°æ®éªŒè¯å’Œæ“ä½œ
ğŸ“¡ æ¥å£æœåŠ¡ â†’ å“åº”å‰ç«¯è¯·æ±‚
```

### 7.4 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ è¿™å¥—æŠ€èƒ½å¯ä»¥åšä»€ä¹ˆ**ï¼š
- ğŸ“ **åšå®¢è¯„è®ºç³»ç»Ÿ** â†’ æ–‡ç« ä¸‹æ–¹çš„äº’åŠ¨åŠŸèƒ½
- ğŸ›’ **è´­ç‰©è½¦æ“ä½œ** â†’ æ·»åŠ å•†å“ã€æ›´æ–°æ•°é‡
- ğŸ‘¤ **ç”¨æˆ·æ³¨å†Œç™»å½•** â†’ è¡¨å•æäº¤å’ŒéªŒè¯
- ğŸ“Š **æ•°æ®æŠ¥è¡¨** â†’ åŠ¨æ€åŠ è½½å›¾è¡¨æ•°æ®
- ğŸ’¬ **åœ¨çº¿å®¢æœ** â†’ å®æ—¶æ¶ˆæ¯æ”¶å‘
- ğŸ” **æœç´¢åŠŸèƒ½** â†’ è¾“å…¥å…³é”®è¯è·å–ç»“æœ

### 7.5 æœ€ä½³å®è·µå»ºè®®


**âœ… å¥½çš„åšæ³•**ï¼š
```
ç”¨æˆ·ä½“éªŒï¼š
- æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œè®©ç”¨æˆ·çŸ¥é“åœ¨å¤„ç†
- æä¾›æ˜ç¡®çš„æˆåŠŸå’Œå¤±è´¥åé¦ˆ
- é˜²æ­¢é‡å¤æäº¤ï¼Œé¿å…æ•°æ®é‡å¤

ä»£ç è´¨é‡ï¼š
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- åˆç†çš„ä»£ç ç»„ç»‡å’Œæ³¨é‡Š
- è¾“å…¥éªŒè¯å’Œå®‰å…¨é˜²æŠ¤

æ€§èƒ½ä¼˜åŒ–ï¼š
- é¿å…ä¸å¿…è¦çš„è¯·æ±‚
- åˆç†ä½¿ç”¨ç¼“å­˜æœºåˆ¶
- æ§åˆ¶è¯·æ±‚é¢‘ç‡
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- ğŸ“¡ **Fetchè´Ÿè´£é€šä¿¡** â†’ å‰ç«¯å’Œåç«¯çš„æ¡¥æ¢
- ğŸ¨ **DOMè´Ÿè´£å±•ç¤º** â†’ æŠŠæ•°æ®å˜æˆç”¨æˆ·çœ‹å¾—è§çš„ç•Œé¢  
- âš ï¸ **é”™è¯¯å¤„ç†è´Ÿè´£ä½“éªŒ** â†’ è®©ç”¨æˆ·çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ
- ğŸ”„ **çŠ¶æ€ç®¡ç†è´Ÿè´£æµç¨‹** â†’ æ§åˆ¶æ•´ä¸ªæ“ä½œçš„å„ä¸ªç¯èŠ‚