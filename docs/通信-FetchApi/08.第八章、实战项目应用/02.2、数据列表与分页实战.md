---
title: 2ã€æ•°æ®åˆ—è¡¨ä¸åˆ†é¡µå®æˆ˜
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯æ•°æ®åˆ—è¡¨è·å–](#1-ä»€ä¹ˆæ˜¯æ•°æ®åˆ—è¡¨è·å–)
2. [Fetchè·å–æ•°æ®åˆ—è¡¨åŸºç¡€](#2-Fetchè·å–æ•°æ®åˆ—è¡¨åŸºç¡€)
3. [JSONæ•°æ®è½¬HTMLæ¸²æŸ“](#3-JSONæ•°æ®è½¬HTMLæ¸²æŸ“)
4. [åˆ†é¡µå‚æ•°å¤„ç†](#4-åˆ†é¡µå‚æ•°å¤„ç†)
5. [æ— é™æ»šåŠ¨åŠ è½½](#5-æ— é™æ»šåŠ¨åŠ è½½)
6. [åŠ è½½çŠ¶æ€ç®¡ç†](#6-åŠ è½½çŠ¶æ€ç®¡ç†)
7. [é”™è¯¯å¤„ç†ä¸ç©ºæ•°æ®](#7-é”™è¯¯å¤„ç†ä¸ç©ºæ•°æ®)
8. [æ€§èƒ½ä¼˜åŒ–æŠ€å·§](#8-æ€§èƒ½ä¼˜åŒ–æŠ€å·§)
9. [å®Œæ•´å®æˆ˜æ¡ˆä¾‹](#9-å®Œæ•´å®æˆ˜æ¡ˆä¾‹)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯æ•°æ®åˆ—è¡¨è·å–


### 1.1 æ¦‚å¿µç†è§£


**æ•°æ®åˆ—è¡¨è·å–**å°±æ˜¯ä»æœåŠ¡å™¨è·å–ä¸€å †æ•°æ®ï¼Œç„¶ååœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼Œå°±åƒä½ åˆ·å¾®åšçœ‹åˆ°çš„ä¸€æ¡æ¡åŠ¨æ€ï¼Œæˆ–è€…è´­ç‰©ç½‘ç«™ä¸Šçš„å•†å“åˆ—è¡¨ã€‚

```
ç®€å•ç†è§£ï¼š
ç½‘é¡µå‘æœåŠ¡å™¨è¯´ï¼š"ç»™æˆ‘ä¸€äº›æ•°æ®"
æœåŠ¡å™¨å›å¤ï¼š"å¥½çš„ï¼Œè¿™é‡Œæœ‰20æ¡å•†å“ä¿¡æ¯"
ç½‘é¡µæ¥æ”¶åï¼š"æˆ‘æŠŠè¿™äº›ä¿¡æ¯å˜æˆæ¼‚äº®çš„å¡ç‰‡æ˜¾ç¤ºç»™ç”¨æˆ·çœ‹"
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€è·å–æ•°æ®


**é™æ€ç½‘é¡µçš„é—®é¢˜**ï¼š
- æ•°æ®å†™æ­»åœ¨HTMLé‡Œï¼Œæ— æ³•æ›´æ–°
- ç”¨æˆ·çœ‹åˆ°çš„æ°¸è¿œæ˜¯è€æ•°æ®
- æ–°å¢å•†å“éœ€è¦é‡æ–°å‘å¸ƒç½‘é¡µ

**åŠ¨æ€è·å–çš„å¥½å¤„**ï¼š
- æ•°æ®å®æ—¶æ›´æ–°ï¼Œç”¨æˆ·çœ‹åˆ°æœ€æ–°å†…å®¹
- å¯ä»¥æ ¹æ®ç”¨æˆ·éœ€æ±‚åŠ è½½ä¸åŒæ•°æ®
- æœåŠ¡å™¨æ›´æ–°æ•°æ®ï¼Œç½‘é¡µè‡ªåŠ¨æ˜¾ç¤ºæ–°å†…å®¹

```
ç°å®åœºæ™¯å¯¹æ¯”ï¼š
é™æ€æ–¹å¼ï¼šåƒå°åˆ·çš„æŠ¥çº¸ï¼Œå†…å®¹å›ºå®šä¸å˜
åŠ¨æ€æ–¹å¼ï¼šåƒæ‰‹æœºæ–°é—»APPï¼Œéšæ—¶è·å–æœ€æ–°èµ„è®¯
```

### 1.3 å¸¸è§çš„æ•°æ®åˆ—è¡¨åœºæ™¯


| åœºæ™¯ | è¯´æ˜ | å…¸å‹ä¾‹å­ |
|------|------|----------|
| **å•†å“åˆ—è¡¨** | æ˜¾ç¤ºå•†å“ä¿¡æ¯ | æ·˜å®å•†å“æœç´¢ç»“æœ |
| **æ–°é—»åˆ—è¡¨** | æ˜¾ç¤ºæ–‡ç« æ ‡é¢˜ | ä»Šæ—¥å¤´æ¡é¦–é¡µ |
| **ç”¨æˆ·åˆ—è¡¨** | æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ | å¾®ä¿¡å¥½å‹åˆ—è¡¨ |
| **è¯„è®ºåˆ—è¡¨** | æ˜¾ç¤ºç”¨æˆ·è¯„è®º | çŸ¥ä¹æ–‡ç« è¯„è®ºåŒº |

---

## 2. ğŸ”„ Fetchè·å–æ•°æ®åˆ—è¡¨åŸºç¡€


### 2.1 æœ€ç®€å•çš„GETè¯·æ±‚


**GETè¯·æ±‚**å°±æ˜¯å‘æœåŠ¡å™¨"è¦"æ•°æ®ï¼Œå°±åƒä½ å‘æœåŠ¡å‘˜ç‚¹èœä¸€æ ·ã€‚

```javascript
// æœ€åŸºç¡€çš„è·å–æ•°æ®
fetch('https://api.example.com/products')
  .then(response => response.json())
  .then(data => {
    console.log('è·å–åˆ°çš„æ•°æ®ï¼š', data);
  });
```

### 2.2 ç†è§£å“åº”æ•°æ®ç»“æ„


æœåŠ¡å™¨è¿”å›çš„æ•°æ®é€šå¸¸æ˜¯è¿™æ ·çš„æ ¼å¼ï¼š

```javascript
// å…¸å‹çš„åˆ—è¡¨æ•°æ®æ ¼å¼
{
  "code": 200,           // çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ
  "message": "è·å–æˆåŠŸ",   // æç¤ºä¿¡æ¯
  "data": {
    "list": [            // å®é™…çš„æ•°æ®åˆ—è¡¨
      {
        "id": 1,
        "name": "iPhone 15",
        "price": 5999
      },
      {
        "id": 2, 
        "name": "åä¸ºP60",
        "price": 4999
      }
    ],
    "total": 100,        // æ€»æ•°æ®æ¡æ•°
    "page": 1,           // å½“å‰é¡µç 
    "pageSize": 10       // æ¯é¡µæ˜¾ç¤ºæ•°é‡
  }
}
```

### 2.3 å®Œæ•´çš„æ•°æ®è·å–å‡½æ•°


```javascript
// ğŸ“‹ è·å–å•†å“åˆ—è¡¨çš„å®Œæ•´å‡½æ•°
async function getProductList() {
  try {
    // ğŸ”„ å‘é€è¯·æ±‚
    const response = await fetch('https://api.example.com/products');
    
    // âœ… æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ
    if (!response.ok) {
      throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
    }
    
    // ğŸ“¦ è§£æJSONæ•°æ®
    const result = await response.json();
    
    // ğŸ¯ è¿”å›å®é™…çš„åˆ—è¡¨æ•°æ®
    return result.data.list;
    
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥ï¼š', error);
    return []; // å¤±è´¥æ—¶è¿”å›ç©ºæ•°ç»„
  }
}
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼šasync/awaitè®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œæ›´å®¹æ˜“ç†è§£

---

## 3. ğŸ¨ JSONæ•°æ®è½¬HTMLæ¸²æŸ“


### 3.1 ä»€ä¹ˆæ˜¯æ•°æ®æ¸²æŸ“


**æ•°æ®æ¸²æŸ“**å°±æ˜¯æŠŠä»æœåŠ¡å™¨è·å–çš„JSONæ•°æ®å˜æˆç”¨æˆ·èƒ½çœ‹åˆ°çš„HTMLå…ƒç´ ï¼Œå°±åƒæŠŠé£Ÿæåšæˆèœä¸€æ ·ã€‚

```
æ•°æ®æ¸²æŸ“è¿‡ç¨‹ï¼š
JSONæ•°æ®ï¼ˆåŸæ–™ï¼‰ â†’ JavaScriptå¤„ç†ï¼ˆçƒ¹é¥ªï¼‰ â†’ HTMLæ˜¾ç¤ºï¼ˆæˆå“èœï¼‰
```

### 3.2 å•ä¸ªæ•°æ®é¡¹çš„æ¸²æŸ“


```javascript
// ğŸ“‹ å°†å•ä¸ªå•†å“æ•°æ®è½¬æ¢ä¸ºHTML
function createProductCard(product) {
  return `
    <div class="product-card">
      <h3>${product.name}</h3>
      <p class="price">ï¿¥${product.price}</p>
      <button onclick="buyProduct(${product.id})">è´­ä¹°</button>
    </div>
  `;
}

// ä½¿ç”¨ç¤ºä¾‹
const product = { id: 1, name: "iPhone 15", price: 5999 };
const html = createProductCard(product);
console.log(html); // ç”Ÿæˆçš„HTMLå­—ç¬¦ä¸²
```

### 3.3 æ‰¹é‡æ¸²æŸ“æ•°æ®åˆ—è¡¨


```javascript
// ğŸ¨ æ¸²æŸ“æ•´ä¸ªå•†å“åˆ—è¡¨
function renderProductList(products) {
  // è·å–å®¹å™¨å…ƒç´ 
  const container = document.getElementById('product-list');
  
  // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
  container.innerHTML = '';
  
  // å¾ªç¯ç”Ÿæˆæ¯ä¸ªå•†å“çš„HTML
  products.forEach(product => {
    const cardHTML = createProductCard(product);
    container.innerHTML += cardHTML;
  });
}

// å®Œæ•´çš„è·å–å¹¶æ¸²æŸ“æµç¨‹
async function loadAndShowProducts() {
  // ğŸ”„ è·å–æ•°æ®
  const products = await getProductList();
  
  // ğŸ¨ æ¸²æŸ“åˆ°é¡µé¢
  renderProductList(products);
}
```

### 3.4 æ›´é«˜æ•ˆçš„æ¸²æŸ“æ–¹æ³•


```javascript
// âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨æ–‡æ¡£ç‰‡æ®µ
function renderProductListOptimized(products) {
  const container = document.getElementById('product-list');
  const fragment = document.createDocumentFragment();
  
  products.forEach(product => {
    // åˆ›å»ºDOMå…ƒç´ è€ŒéHTMLå­—ç¬¦ä¸²
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <h3>${product.name}</h3>
      <p class="price">ï¿¥${product.price}</p>
    `;
    fragment.appendChild(card);
  });
  
  // ä¸€æ¬¡æ€§æ·»åŠ æ‰€æœ‰å…ƒç´ 
  container.appendChild(fragment);
}
```

> âš¡ **æ€§èƒ½æç¤º**ï¼šä½¿ç”¨æ–‡æ¡£ç‰‡æ®µæ¯”é€ä¸ªæ·»åŠ HTMLå­—ç¬¦ä¸²æ•ˆç‡æ›´é«˜

---

## 4. ğŸ“„ åˆ†é¡µå‚æ•°å¤„ç†


### 4.1 ä»€ä¹ˆæ˜¯åˆ†é¡µ


**åˆ†é¡µ**å°±åƒçœ‹ä¹¦ä¸€æ ·ï¼Œä¸å¯èƒ½æŠŠæ•´æœ¬ä¹¦çš„å†…å®¹ä¸€æ¬¡æ€§å…¨æ˜¾ç¤ºï¼Œéœ€è¦ä¸€é¡µä¸€é¡µåœ°çœ‹ã€‚

```
åˆ†é¡µçš„å¿…è¦æ€§ï¼š
- æ•°æ®å¤ªå¤šä¸€æ¬¡åŠ è½½æ…¢
- é¡µé¢æ˜¾ç¤ºä¸ä¸‹è¿™ä¹ˆå¤šå†…å®¹  
- ç”¨æˆ·ä½“éªŒæ›´å¥½ï¼ˆæŒ‰éœ€æŸ¥çœ‹ï¼‰
```

### 4.2 åˆ†é¡µå‚æ•°çš„å«ä¹‰


```javascript
// ğŸ“Š å…¸å‹çš„åˆ†é¡µå‚æ•°
const pageParams = {
  page: 1,        // å½“å‰é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
  pageSize: 10,   // æ¯é¡µæ˜¾ç¤ºæ•°é‡
  total: 100      // æ€»æ•°æ®æ¡æ•°
};

// ğŸ“ è®¡ç®—ç›¸å…³ä¿¡æ¯
const totalPages = Math.ceil(pageParams.total / pageParams.pageSize); // æ€»é¡µæ•°ï¼š10é¡µ
const startIndex = (pageParams.page - 1) * pageParams.pageSize;       // èµ·å§‹ç´¢å¼•ï¼š0
const endIndex = startIndex + pageParams.pageSize;                    // ç»“æŸç´¢å¼•ï¼š10
```

### 4.3 æ„å»ºåˆ†é¡µè¯·æ±‚


```javascript
// ğŸ”„ å¸¦åˆ†é¡µå‚æ•°çš„æ•°æ®è·å–
async function getProductListWithPage(page = 1, pageSize = 10) {
  // æ„å»ºè¯·æ±‚URLï¼ŒæŠŠåˆ†é¡µå‚æ•°åŠ åˆ°URLåé¢
  const url = `https://api.example.com/products?page=${page}&pageSize=${pageSize}`;
  
  try {
    const response = await fetch(url);
    const result = await response.json();
    
    return {
      list: result.data.list,     // å½“å‰é¡µæ•°æ®
      total: result.data.total,   // æ€»æ•°æ®æ•°
      page: result.data.page,     // å½“å‰é¡µç 
      totalPages: Math.ceil(result.data.total / pageSize) // æ€»é¡µæ•°
    };
  } catch (error) {
    console.error('è·å–åˆ†é¡µæ•°æ®å¤±è´¥ï¼š', error);
    return { list: [], total: 0, page: 1, totalPages: 0 };
  }
}
```

### 4.4 åˆ†é¡µæ§åˆ¶å™¨å®ç°


```javascript
// ğŸ“± åˆ†é¡µæ§åˆ¶å™¨
class PaginationController {
  constructor() {
    this.currentPage = 1;
    this.pageSize = 10;
    this.total = 0;
  }
  
  // ğŸ¯ åŠ è½½æŒ‡å®šé¡µé¢
  async loadPage(page) {
    this.currentPage = page;
    const data = await getProductListWithPage(page, this.pageSize);
    
    this.total = data.total;
    renderProductList(data.list);
    this.updatePaginationUI(data.totalPages);
  }
  
  // ğŸ¨ æ›´æ–°åˆ†é¡µUI
  updatePaginationUI(totalPages) {
    const paginationHTML = `
      <button ${this.currentPage <= 1 ? 'disabled' : ''} 
              onclick="pagination.loadPage(${this.currentPage - 1})">
        ä¸Šä¸€é¡µ
      </button>
      <span>ç¬¬ ${this.currentPage} é¡µ / å…± ${totalPages} é¡µ</span>
      <button ${this.currentPage >= totalPages ? 'disabled' : ''} 
              onclick="pagination.loadPage(${this.currentPage + 1})">
        ä¸‹ä¸€é¡µ
      </button>
    `;
    document.getElementById('pagination').innerHTML = paginationHTML;
  }
}

// ä½¿ç”¨åˆ†é¡µæ§åˆ¶å™¨
const pagination = new PaginationController();
pagination.loadPage(1); // åŠ è½½ç¬¬ä¸€é¡µ
```

---

## 5. â™¾ï¸ æ— é™æ»šåŠ¨åŠ è½½


### 5.1 ä»€ä¹ˆæ˜¯æ— é™æ»šåŠ¨


**æ— é™æ»šåŠ¨**å°±åƒåˆ·æŠ–éŸ³ä¸€æ ·ï¼Œå½“ä½ æ»‘åˆ°åº•éƒ¨æ—¶ï¼Œè‡ªåŠ¨åŠ è½½æ›´å¤šå†…å®¹ï¼Œç”¨æˆ·æ„Ÿè§‰å†…å®¹"æ— ç©·æ— å°½"ã€‚

```
ç”¨æˆ·ä½“éªŒå¯¹æ¯”ï¼š
ä¼ ç»Ÿåˆ†é¡µï¼šç”¨æˆ·ç‚¹å‡»"ä¸‹ä¸€é¡µ"æŒ‰é’®
æ— é™æ»šåŠ¨ï¼šç”¨æˆ·æ»‘åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤š
```

### 5.2 æ£€æµ‹æ»šåŠ¨åˆ°åº•éƒ¨


```javascript
// ğŸ“ æ£€æµ‹æ˜¯å¦æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨
function isScrolledToBottom() {
  const scrollTop = window.pageYOffset;           // å·²æ»šåŠ¨è·ç¦»
  const windowHeight = window.innerHeight;        // çª—å£é«˜åº¦
  const documentHeight = document.body.scrollHeight; // æ–‡æ¡£æ€»é«˜åº¦
  
  // è·ç¦»åº•éƒ¨è¿˜æœ‰50pxæ—¶å°±å¼€å§‹åŠ è½½ï¼ˆæå‰åŠ è½½ï¼‰
  return scrollTop + windowHeight >= documentHeight - 50;
}
```

### 5.3 æ— é™æ»šåŠ¨å®ç°


```javascript
// â™¾ï¸ æ— é™æ»šåŠ¨åŠ è½½å™¨
class InfiniteScroll {
  constructor() {
    this.currentPage = 1;
    this.pageSize = 10;
    this.loading = false;     // æ˜¯å¦æ­£åœ¨åŠ è½½
    this.hasMore = true;      // æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®
    this.allData = [];        // å­˜å‚¨æ‰€æœ‰å·²åŠ è½½æ•°æ®
    
    this.initScrollListener();
  }
  
  // ğŸ§ åˆå§‹åŒ–æ»šåŠ¨ç›‘å¬
  initScrollListener() {
    window.addEventListener('scroll', () => {
      if (this.shouldLoadMore()) {
        this.loadMore();
      }
    });
  }
  
  // ğŸ¯ åˆ¤æ–­æ˜¯å¦åº”è¯¥åŠ è½½æ›´å¤š
  shouldLoadMore() {
    return !this.loading && this.hasMore && isScrolledToBottom();
  }
  
  // ğŸ”„ åŠ è½½æ›´å¤šæ•°æ®
  async loadMore() {
    if (this.loading || !this.hasMore) return;
    
    this.loading = true;
    this.showLoadingIndicator();
    
    try {
      const data = await getProductListWithPage(this.currentPage, this.pageSize);
      
      // è¿½åŠ æ–°æ•°æ®åˆ°ç°æœ‰æ•°æ®
      this.allData.push(...data.list);
      
      // æ¸²æŸ“æ–°æ•°æ®ï¼ˆè¿½åŠ æ¨¡å¼ï¼‰
      this.appendNewData(data.list);
      
      // æ›´æ–°çŠ¶æ€
      this.currentPage++;
      this.hasMore = this.allData.length < data.total;
      
    } catch (error) {
      console.error('åŠ è½½æ›´å¤šæ•°æ®å¤±è´¥ï¼š', error);
    } finally {
      this.loading = false;
      this.hideLoadingIndicator();
    }
  }
  
  // ğŸ¨ è¿½åŠ æ–°æ•°æ®åˆ°é¡µé¢ï¼ˆä¸æ¸…ç©ºä¹‹å‰çš„æ•°æ®ï¼‰
  appendNewData(newProducts) {
    const container = document.getElementById('product-list');
    newProducts.forEach(product => {
      const cardHTML = createProductCard(product);
      container.innerHTML += cardHTML;
    });
  }
  
  // ğŸ’« æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
  showLoadingIndicator() {
    document.getElementById('loading').style.display = 'block';
  }
  
  // ğŸ«¥ éšè—åŠ è½½æŒ‡ç¤ºå™¨
  hideLoadingIndicator() {
    document.getElementById('loading').style.display = 'none';
  }
}

// ä½¿ç”¨æ— é™æ»šåŠ¨
const infiniteScroll = new InfiniteScroll();
infiniteScroll.loadMore(); // åŠ è½½ç¬¬ä¸€é¡µæ•°æ®
```

### 5.4 æ»šåŠ¨æ€§èƒ½ä¼˜åŒ–


```javascript
// âš¡ é˜²æŠ–ä¼˜åŒ–ï¼šé¿å…æ»šåŠ¨äº‹ä»¶è§¦å‘å¤ªé¢‘ç¹
function debounce(func, wait) {
  let timeout;
  return function() {
    clearTimeout(timeout);
    timeout = setTimeout(() => func.apply(this, arguments), wait);
  };
}

// ä¼˜åŒ–åçš„æ»šåŠ¨ç›‘å¬
window.addEventListener('scroll', debounce(() => {
  if (infiniteScroll.shouldLoadMore()) {
    infiniteScroll.loadMore();
  }
}, 100)); // 100mså†…æœ€å¤šè§¦å‘ä¸€æ¬¡
```

---

## 6. â³ åŠ è½½çŠ¶æ€ç®¡ç†


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦åŠ è½½çŠ¶æ€


**åŠ è½½çŠ¶æ€**è®©ç”¨æˆ·çŸ¥é“"ç¨‹åºæ²¡æœ‰å¡æ­»ï¼Œæ­£åœ¨åŠªåŠ›åŠ è½½ä¸­"ï¼Œå°±åƒç”µæ¢¯é‡Œçš„æ¥¼å±‚æŒ‡ç¤ºå™¨ã€‚

```
æ²¡æœ‰åŠ è½½çŠ¶æ€ï¼šç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ²¡ååº”ï¼Œä»¥ä¸ºåäº†
æœ‰åŠ è½½çŠ¶æ€ï¼šæ˜¾ç¤º"åŠ è½½ä¸­..."ï¼Œç”¨æˆ·çŸ¥é“è¦ç­‰ä¸€ä¸‹
```

### 6.2 å¸¸è§çš„åŠ è½½çŠ¶æ€ç±»å‹


```javascript
// ğŸ“Š åŠ è½½çŠ¶æ€æšä¸¾
const LoadingState = {
  IDLE: 'idle',         // ç©ºé—²çŠ¶æ€
  LOADING: 'loading',   // åŠ è½½ä¸­
  SUCCESS: 'success',   // åŠ è½½æˆåŠŸ
  ERROR: 'error'        // åŠ è½½å¤±è´¥
};
```

### 6.3 åŠ è½½çŠ¶æ€ç®¡ç†å™¨


```javascript
// â³ åŠ è½½çŠ¶æ€ç®¡ç†å™¨
class LoadingManager {
  constructor() {
    this.state = LoadingState.IDLE;
    this.message = '';
  }
  
  // ğŸŸ¡ å¼€å§‹åŠ è½½
  startLoading(message = 'åŠ è½½ä¸­...') {
    this.state = LoadingState.LOADING;
    this.message = message;
    this.updateUI();
  }
  
  // ğŸŸ¢ åŠ è½½æˆåŠŸ
  loadSuccess(message = 'åŠ è½½å®Œæˆ') {
    this.state = LoadingState.SUCCESS;
    this.message = message;
    this.updateUI();
    
    // 2ç§’åè‡ªåŠ¨æ¸…é™¤æˆåŠŸçŠ¶æ€
    setTimeout(() => {
      this.reset();
    }, 2000);
  }
  
  // ğŸ”´ åŠ è½½å¤±è´¥
  loadError(message = 'åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•') {
    this.state = LoadingState.ERROR;
    this.message = message;
    this.updateUI();
  }
  
  // ğŸ”„ é‡ç½®çŠ¶æ€
  reset() {
    this.state = LoadingState.IDLE;
    this.message = '';
    this.updateUI();
  }
  
  // ğŸ¨ æ›´æ–°UIæ˜¾ç¤º
  updateUI() {
    const loadingEl = document.getElementById('loading-status');
    
    switch (this.state) {
      case LoadingState.LOADING:
        loadingEl.innerHTML = `
          <div class="loading">
            <span class="spinner">â³</span>
            ${this.message}
          </div>
        `;
        break;
        
      case LoadingState.SUCCESS:
        loadingEl.innerHTML = `
          <div class="success">
            <span>âœ…</span>
            ${this.message}
          </div>
        `;
        break;
        
      case LoadingState.ERROR:
        loadingEl.innerHTML = `
          <div class="error">
            <span>âŒ</span>
            ${this.message}
            <button onclick="retryLoad()">é‡è¯•</button>
          </div>
        `;
        break;
        
      default:
        loadingEl.innerHTML = '';
    }
  }
}
```

### 6.4 åœ¨æ•°æ®åŠ è½½ä¸­ä½¿ç”¨çŠ¶æ€ç®¡ç†


```javascript
// ğŸ”„ æ”¹è¿›çš„æ•°æ®åŠ è½½å‡½æ•°
async function loadProductsWithStatus() {
  const loadingManager = new LoadingManager();
  
  try {
    // ğŸŸ¡ å¼€å§‹åŠ è½½
    loadingManager.startLoading('æ­£åœ¨è·å–å•†å“åˆ—è¡¨...');
    
    const products = await getProductList();
    
    if (products.length > 0) {
      // ğŸŸ¢ åŠ è½½æˆåŠŸ
      renderProductList(products);
      loadingManager.loadSuccess(`æˆåŠŸåŠ è½½ ${products.length} ä¸ªå•†å“`);
    } else {
      // ğŸŸ  ç©ºæ•°æ®
      showEmptyState();
      loadingManager.loadSuccess('æš‚æ— æ•°æ®');
    }
    
  } catch (error) {
    // ğŸ”´ åŠ è½½å¤±è´¥
    loadingManager.loadError('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥åé‡è¯•');
    console.error('åŠ è½½å¤±è´¥ï¼š', error);
  }
}
```

---

## 7. ğŸš« é”™è¯¯å¤„ç†ä¸ç©ºæ•°æ®


### 7.1 å¸¸è§çš„é”™è¯¯ç±»å‹


```javascript
// ğŸš¨ ç½‘ç»œè¯·æ±‚å¯èƒ½é‡åˆ°çš„é”™è¯¯
const ErrorTypes = {
  NETWORK_ERROR: 'ç½‘ç»œè¿æ¥å¤±è´¥',      // æ–­ç½‘ã€æœåŠ¡å™¨æ— å“åº”
  TIMEOUT_ERROR: 'è¯·æ±‚è¶…æ—¶',         // è¯·æ±‚æ—¶é—´è¿‡é•¿
  SERVER_ERROR: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯',     // 500é”™è¯¯
  NOT_FOUND: 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨',      // 404é”™è¯¯
  UNAUTHORIZED: 'æ²¡æœ‰è®¿é—®æƒé™',       // 401é”™è¯¯
  DATA_FORMAT_ERROR: 'æ•°æ®æ ¼å¼é”™è¯¯'   // JSONè§£æå¤±è´¥
};
```

### 7.2 å®Œå–„çš„é”™è¯¯å¤„ç†


```javascript
// ğŸ›¡ï¸ å¥å£®çš„æ•°æ®è·å–å‡½æ•°
async function getProductListRobust() {
  try {
    const response = await fetch('https://api.example.com/products', {
      method: 'GET',
      timeout: 10000, // 10ç§’è¶…æ—¶
      headers: {
        'Content-Type': 'application/json'
      }
    });
    
    // æ£€æŸ¥HTTPçŠ¶æ€ç 
    if (!response.ok) {
      switch (response.status) {
        case 404:
          throw new Error(ErrorTypes.NOT_FOUND);
        case 401:
          throw new Error(ErrorTypes.UNAUTHORIZED);
        case 500:
          throw new Error(ErrorTypes.SERVER_ERROR);
        default:
          throw new Error(`HTTP ${response.status}: è¯·æ±‚å¤±è´¥`);
      }
    }
    
    const data = await response.json();
    
    // æ£€æŸ¥æ•°æ®æ ¼å¼
    if (!data || !Array.isArray(data.data?.list)) {
      throw new Error(ErrorTypes.DATA_FORMAT_ERROR);
    }
    
    return data.data.list;
    
  } catch (error) {
    // æ ¹æ®é”™è¯¯ç±»å‹æä¾›ä¸åŒçš„å¤„ç†
    if (error.name === 'TypeError') {
      throw new Error(ErrorTypes.NETWORK_ERROR);
    } else if (error.name === 'SyntaxError') {
      throw new Error(ErrorTypes.DATA_FORMAT_ERROR);
    } else {
      throw error; // é‡æ–°æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯
    }
  }
}
```

### 7.3 ç©ºæ•°æ®çŠ¶æ€å¤„ç†


```javascript
// ğŸˆ³ ç©ºæ•°æ®çŠ¶æ€æ˜¾ç¤º
function showEmptyState() {
  const container = document.getElementById('product-list');
  container.innerHTML = `
    <div class="empty-state">
      <div class="empty-icon">ğŸ“¦</div>
      <h3>æš‚æ— å•†å“</h3>
      <p>ç›®å‰æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å•†å“ï¼Œè¯·ç¨åå†è¯•</p>
      <button onclick="retryLoad()" class="retry-btn">
        åˆ·æ–°é‡è¯•
      </button>
    </div>
  `;
}

// ğŸ”„ é‡è¯•åŠ è½½åŠŸèƒ½
async function retryLoad() {
  console.log('ç”¨æˆ·ç‚¹å‡»é‡è¯•ï¼Œé‡æ–°åŠ è½½æ•°æ®...');
  await loadProductsWithStatus();
}
```

### 7.4 ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º


```javascript
// ğŸ¨ æ ¹æ®é”™è¯¯ç±»å‹æ˜¾ç¤ºä¸åŒçš„æç¤º
function showErrorState(errorMessage) {
  const container = document.getElementById('product-list');
  
  let errorIcon = 'âŒ';
  let actionButton = '';
  
  // æ ¹æ®é”™è¯¯ç±»å‹è‡ªå®šä¹‰æ˜¾ç¤º
  if (errorMessage.includes('ç½‘ç»œ')) {
    errorIcon = 'ğŸŒ';
    actionButton = '<button onclick="retryLoad()">æ£€æŸ¥ç½‘ç»œåé‡è¯•</button>';
  } else if (errorMessage.includes('è¶…æ—¶')) {
    errorIcon = 'â°';
    actionButton = '<button onclick="retryLoad()">é‡æ–°åŠ è½½</button>';
  } else if (errorMessage.includes('æƒé™')) {
    errorIcon = 'ğŸ”’';
    actionButton = '<button onclick="goToLogin()">ç™»å½•åé‡è¯•</button>';
  }
  
  container.innerHTML = `
    <div class="error-state">
      <div class="error-icon">${errorIcon}</div>
      <h3>åŠ è½½å¤±è´¥</h3>
      <p>${errorMessage}</p>
      ${actionButton}
    </div>
  `;
}
```

---

## 8. âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§


### 8.1 å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚


```javascript
// ğŸ¯ è¯·æ±‚ç¼“å­˜ï¼šé¿å…é‡å¤è¯·æ±‚ç›¸åŒæ•°æ®
class DataCache {
  constructor() {
    this.cache = new Map();
    this.cacheTime = 5 * 60 * 1000; // ç¼“å­˜5åˆ†é’Ÿ
  }
  
  // ğŸ“¦ è·å–ç¼“å­˜çš„æ•°æ®
  get(key) {
    const cached = this.cache.get(key);
    if (!cached) return null;
    
    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
    if (Date.now() - cached.timestamp > this.cacheTime) {
      this.cache.delete(key);
      return null;
    }
    
    return cached.data;
  }
  
  // ğŸ’¾ è®¾ç½®ç¼“å­˜æ•°æ®
  set(key, data) {
    this.cache.set(key, {
      data: data,
      timestamp: Date.now()
    });
  }
  
  // ğŸ—‘ï¸ æ¸…ç©ºç¼“å­˜
  clear() {
    this.cache.clear();
  }
}

// ä½¿ç”¨ç¼“å­˜çš„æ•°æ®è·å–
const dataCache = new DataCache();

async function getProductListCached(page = 1) {
  const cacheKey = `products_page_${page}`;
  
  // å…ˆæ£€æŸ¥ç¼“å­˜
  const cached = dataCache.get(cacheKey);
  if (cached) {
    console.log('ä½¿ç”¨ç¼“å­˜æ•°æ®');
    return cached;
  }
  
  // ç¼“å­˜æ²¡æœ‰ï¼Œå‘é€è¯·æ±‚
  console.log('å‘é€æ–°è¯·æ±‚');
  const data = await getProductListWithPage(page);
  
  // ç¼“å­˜ç»“æœ
  dataCache.set(cacheKey, data);
  
  return data;
}
```

### 8.2 DOMæ“ä½œä¼˜åŒ–


```javascript
// âš¡ è™šæ‹Ÿæ»šåŠ¨ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸçš„å…ƒç´ 
class VirtualList {
  constructor(container, itemHeight = 100) {
    this.container = container;
    this.itemHeight = itemHeight;
    this.visibleCount = Math.ceil(container.clientHeight / itemHeight) + 2;
    this.startIndex = 0;
    this.data = [];
    
    this.setupContainer();
    this.bindScrollEvent();
  }
  
  // ğŸ¨ è®¾ç½®å®¹å™¨
  setupContainer() {
    this.container.style.overflow = 'auto';
    this.container.innerHTML = `
      <div class="virtual-list-content"></div>
    `;
    this.content = this.container.querySelector('.virtual-list-content');
  }
  
  // ğŸ“Š è®¾ç½®æ•°æ®
  setData(data) {
    this.data = data;
    this.render();
  }
  
  // ğŸ¯ æ¸²æŸ“å¯è§åŒºåŸŸ
  render() {
    const endIndex = Math.min(this.startIndex + this.visibleCount, this.data.length);
    const visibleData = this.data.slice(this.startIndex, endIndex);
    
    // è®¾ç½®å®¹å™¨æ€»é«˜åº¦
    this.content.style.height = `${this.data.length * this.itemHeight}px`;
    
    // è®¾ç½®å¯è§å†…å®¹çš„ä½ç½®
    this.content.style.paddingTop = `${this.startIndex * this.itemHeight}px`;
    
    // æ¸²æŸ“å¯è§é¡¹ç›®
    this.content.innerHTML = visibleData.map((item, index) => `
      <div class="virtual-item" style="height: ${this.itemHeight}px">
        ${createProductCard(item)}
      </div>
    `).join('');
  }
  
  // ğŸ§ ç»‘å®šæ»šåŠ¨äº‹ä»¶
  bindScrollEvent() {
    this.container.addEventListener('scroll', () => {
      const scrollTop = this.container.scrollTop;
      const newStartIndex = Math.floor(scrollTop / this.itemHeight);
      
      if (newStartIndex !== this.startIndex) {
        this.startIndex = newStartIndex;
        this.render();
      }
    });
  }
}
```

### 8.3 å›¾ç‰‡æ‡’åŠ è½½


```javascript
// ğŸ–¼ï¸ å›¾ç‰‡æ‡’åŠ è½½ï¼šåªåŠ è½½å¯è§åŒºåŸŸçš„å›¾ç‰‡
class LazyImageLoader {
  constructor() {
    this.observer = null;
    this.init();
  }
  
  // ğŸ¯ åˆå§‹åŒ–è§‚å¯Ÿå™¨
  init() {
    // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒIntersectionObserver
    if ('IntersectionObserver' in window) {
      this.observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            this.loadImage(entry.target);
          }
        });
      });
    }
  }
  
  // ğŸ“¸ åŠ è½½å›¾ç‰‡
  loadImage(img) {
    const src = img.dataset.src;
    if (src) {
      img.src = src;
      img.removeAttribute('data-src');
      
      // åœæ­¢è§‚å¯Ÿè¿™ä¸ªå›¾ç‰‡
      if (this.observer) {
        this.observer.unobserve(img);
      }
    }
  }
  
  // ğŸ‘€ è§‚å¯Ÿå›¾ç‰‡å…ƒç´ 
  observe(img) {
    if (this.observer) {
      this.observer.observe(img);
    } else {
      // ä¸æ”¯æŒIntersectionObserverçš„é™çº§æ–¹æ¡ˆ
      this.loadImage(img);
    }
  }
}

// åœ¨åˆ›å»ºå•†å“å¡ç‰‡æ—¶ä½¿ç”¨æ‡’åŠ è½½
function createProductCardWithLazyImage(product) {
  return `
    <div class="product-card">
      <img data-src="${product.image}" 
           src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect width='100%25' height='100%25' fill='%23ddd'/%3E%3C/svg%3E"
           alt="${product.name}"
           class="lazy-image">
      <h3>${product.name}</h3>
      <p class="price">ï¿¥${product.price}</p>
    </div>
  `;
}
```

---

## 9. ğŸ¯ å®Œæ•´å®æˆ˜æ¡ˆä¾‹


### 9.1 å•†å“åˆ—è¡¨é¡µé¢å®Œæ•´å®ç°


```javascript
// ğŸª å®Œæ•´çš„å•†å“åˆ—è¡¨åº”ç”¨
class ProductListApp {
  constructor() {
    this.loadingManager = new LoadingManager();
    this.dataCache = new DataCache();
    this.lazyLoader = new LazyImageLoader();
    
    this.currentPage = 1;
    this.pageSize = 20;
    this.products = [];
    this.loading = false;
    this.hasMore = true;
    
    this.init();
  }
  
  // ğŸ¯ åˆå§‹åŒ–åº”ç”¨
  async init() {
    this.setupEventListeners();
    await this.loadFirstPage();
  }
  
  // ğŸ§ è®¾ç½®äº‹ä»¶ç›‘å¬
  setupEventListeners() {
    // æ— é™æ»šåŠ¨
    window.addEventListener('scroll', debounce(() => {
      if (this.shouldLoadMore()) {
        this.loadMore();
      }
    }, 200));
    
    // åˆ·æ–°æŒ‰é’®
    document.getElementById('refresh-btn')?.addEventListener('click', () => {
      this.refresh();
    });
    
    // æœç´¢åŠŸèƒ½
    document.getElementById('search-input')?.addEventListener('input', 
      debounce((e) => {
        this.search(e.target.value);
      }, 500)
    );
  }
  
  // ğŸ”„ åŠ è½½ç¬¬ä¸€é¡µæ•°æ®
  async loadFirstPage() {
    this.loadingManager.startLoading('æ­£åœ¨åŠ è½½å•†å“...');
    
    try {
      const data = await this.fetchProducts(1);
      this.products = data.list;
      this.hasMore = this.products.length < data.total;
      this.currentPage = 1;
      
      this.renderProducts();
      this.loadingManager.loadSuccess(`åŠ è½½äº† ${this.products.length} ä¸ªå•†å“`);
      
    } catch (error) {
      this.handleError(error);
    }
  }
  
  // â™¾ï¸ åŠ è½½æ›´å¤šæ•°æ®
  async loadMore() {
    if (this.loading || !this.hasMore) return;
    
    this.loading = true;
    this.showLoadMoreIndicator();
    
    try {
      const data = await this.fetchProducts(this.currentPage + 1);
      
      // è¿½åŠ æ–°æ•°æ®
      this.products.push(...data.list);
      this.currentPage++;
      this.hasMore = this.products.length < data.total;
      
      // åªæ¸²æŸ“æ–°æ·»åŠ çš„å•†å“
      this.renderNewProducts(data.list);
      
    } catch (error) {
      this.handleError(error);
    } finally {
      this.loading = false;
      this.hideLoadMoreIndicator();
    }
  }
  
  // ğŸ“¡ è·å–å•†å“æ•°æ®
  async fetchProducts(page) {
    const cacheKey = `products_${page}_${this.pageSize}`;
    
    // æ£€æŸ¥ç¼“å­˜
    const cached = this.dataCache.get(cacheKey);
    if (cached) return cached;
    
    // å‘é€è¯·æ±‚
    const response = await fetch(`/api/products?page=${page}&pageSize=${this.pageSize}`);
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const data = await response.json();
    
    // ç¼“å­˜æ•°æ®
    this.dataCache.set(cacheKey, data.data);
    
    return data.data;
  }
  
  // ğŸ¨ æ¸²æŸ“æ‰€æœ‰å•†å“
  renderProducts() {
    const container = document.getElementById('product-list');
    
    if (this.products.length === 0) {
      this.showEmptyState();
      return;
    }
    
    container.innerHTML = this.products.map(product => 
      this.createProductHTML(product)
    ).join('');
    
    // å¯ç”¨å›¾ç‰‡æ‡’åŠ è½½
    this.setupLazyImages();
  }
  
  // ğŸ¨ æ¸²æŸ“æ–°å•†å“ï¼ˆè¿½åŠ æ¨¡å¼ï¼‰
  renderNewProducts(newProducts) {
    const container = document.getElementById('product-list');
    const newHTML = newProducts.map(product => 
      this.createProductHTML(product)
    ).join('');
    
    container.insertAdjacentHTML('beforeend', newHTML);
    
    // ä¸ºæ–°å›¾ç‰‡å¯ç”¨æ‡’åŠ è½½
    this.setupLazyImages();
  }
  
  // ğŸ·ï¸ åˆ›å»ºå•†å“HTML
  createProductHTML(product) {
    return `
      <div class="product-card" data-id="${product.id}">
        <div class="product-image">
          <img data-src="${product.image}" 
               src="/placeholder.svg" 
               alt="${product.name}"
               class="lazy-image">
        </div>
        <div class="product-info">
          <h3 class="product-name">${product.name}</h3>
          <p class="product-description">${product.description}</p>
          <div class="product-price">
            <span class="price">ï¿¥${product.price}</span>
            ${product.originalPrice ? `<span class="original-price">ï¿¥${product.originalPrice}</span>` : ''}
          </div>
          <button class="add-to-cart-btn" onclick="addToCart(${product.id})">
            åŠ å…¥è´­ç‰©è½¦
          </button>
        </div>
      </div>
    `;
  }
  
  // ğŸ–¼ï¸ è®¾ç½®å›¾ç‰‡æ‡’åŠ è½½
  setupLazyImages() {
    const lazyImages = document.querySelectorAll('.lazy-image:not([src*="http"])');
    lazyImages.forEach(img => {
      this.lazyLoader.observe(img);
    });
  }
  
  // ğŸ” æœç´¢åŠŸèƒ½
  async search(keyword) {
    if (!keyword.trim()) {
      await this.loadFirstPage();
      return;
    }
    
    this.loadingManager.startLoading('æœç´¢ä¸­...');
    
    try {
      const response = await fetch(`/api/products/search?q=${encodeURIComponent(keyword)}`);
      const data = await response.json();
      
      this.products = data.data.list;
      this.hasMore = false; // æœç´¢ç»“æœä¸æ”¯æŒåˆ†é¡µ
      this.renderProducts();
      
      this.loadingManager.loadSuccess(`æ‰¾åˆ° ${this.products.length} ä¸ªç›¸å…³å•†å“`);
      
    } catch (error) {
      this.handleError(error);
    }
  }
  
  // ğŸ”„ åˆ·æ–°æ•°æ®
  async refresh() {
    this.dataCache.clear(); // æ¸…é™¤ç¼“å­˜
    this.currentPage = 1;
    this.hasMore = true;
    await this.loadFirstPage();
  }
  
  // ğŸš¨ é”™è¯¯å¤„ç†
  handleError(error) {
    console.error('åŠ è½½å¤±è´¥ï¼š', error);
    this.loadingManager.loadError(error.message);
    
    if (this.products.length === 0) {
      this.showErrorState(error.message);
    }
  }
  
  // ğŸˆ³ æ˜¾ç¤ºç©ºçŠ¶æ€
  showEmptyState() {
    document.getElementById('product-list').innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">ğŸ›ï¸</div>
        <h3>æš‚æ— å•†å“</h3>
        <p>å½“å‰æ²¡æœ‰æ‰¾åˆ°å•†å“ï¼Œè¯·ç¨åå†è¯•</p>
        <button onclick="app.refresh()" class="retry-btn">åˆ·æ–°é‡è¯•</button>
      </div>
    `;
  }
  
  // ğŸš¨ æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
  showErrorState(errorMessage) {
    document.getElementById('product-list').innerHTML = `
      <div class="error-state">
        <div class="error-icon">âŒ</div>
        <h3>åŠ è½½å¤±è´¥</h3>
        <p>${errorMessage}</p>
        <button onclick="app.refresh()" class="retry-btn">é‡æ–°åŠ è½½</button>
      </div>
    `;
  }
  
  // ğŸ’« æ˜¾ç¤º"åŠ è½½æ›´å¤š"æŒ‡ç¤ºå™¨
  showLoadMoreIndicator() {
    const indicator = document.getElementById('load-more-indicator');
    if (indicator) indicator.style.display = 'block';
  }
  
  // ğŸ«¥ éšè—"åŠ è½½æ›´å¤š"æŒ‡ç¤ºå™¨
  hideLoadMoreIndicator() {
    const indicator = document.getElementById('load-more-indicator');
    if (indicator) indicator.style.display = 'none';
  }
  
  // ğŸ¯ åˆ¤æ–­æ˜¯å¦åº”è¯¥åŠ è½½æ›´å¤š
  shouldLoadMore() {
    return !this.loading && 
           this.hasMore && 
           isScrolledToBottom();
  }
}

// ğŸš€ å¯åŠ¨åº”ç”¨
const app = new ProductListApp();
```

### 9.2 é…å¥—HTMLç»“æ„


```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“åˆ—è¡¨ - Fetch APIå®æˆ˜</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ğŸ” æœç´¢åŒºåŸŸ -->
    <header class="search-header">
        <div class="search-container">
            <input type="text" id="search-input" placeholder="æœç´¢å•†å“..." class="search-input">
            <button id="refresh-btn" class="refresh-btn">ğŸ”„ åˆ·æ–°</button>
        </div>
    </header>

    <!-- â³ åŠ è½½çŠ¶æ€æ˜¾ç¤º -->
    <div id="loading-status" class="loading-status"></div>

    <!-- ğŸ›ï¸ å•†å“åˆ—è¡¨å®¹å™¨ -->
    <main class="main-content">
        <div id="product-list" class="product-grid"></div>
        
        <!-- ğŸ’« åŠ è½½æ›´å¤šæŒ‡ç¤ºå™¨ -->
        <div id="load-more-indicator" class="load-more-indicator" style="display: none;">
            <div class="spinner">â³</div>
            <span>åŠ è½½æ›´å¤šå•†å“...</span>
        </div>
    </main>

    <script src="app.js"></script>
</body>
</html>
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®åˆ—è¡¨è·å–ï¼šç”¨Fetch APIä»æœåŠ¡å™¨è·å–JSONæ•°æ®æ•°ç»„
ğŸ”¸ æ•°æ®æ¸²æŸ“ï¼šå°†JSONæ•°æ®è½¬æ¢ä¸ºç”¨æˆ·å¯è§çš„HTMLå…ƒç´ 
ğŸ”¸ åˆ†é¡µå¤„ç†ï¼šé€šè¿‡pageå’ŒpageSizeå‚æ•°æ§åˆ¶æ•°æ®åŠ è½½
ğŸ”¸ æ— é™æ»šåŠ¨ï¼šç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œåˆ°åº•éƒ¨æ—¶è‡ªåŠ¨åŠ è½½æ›´å¤šæ•°æ®
ğŸ”¸ çŠ¶æ€ç®¡ç†ï¼šç®¡ç†åŠ è½½ä¸­ã€æˆåŠŸã€å¤±è´¥ç­‰ä¸åŒçŠ¶æ€
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šå¤„ç†ç½‘ç»œé”™è¯¯ã€ç©ºæ•°æ®ç­‰å¼‚å¸¸æƒ…å†µ
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šç¼“å­˜ã€æ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ç­‰æŠ€æœ¯
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ•°æ®æµè½¬è¿‡ç¨‹**
```
1. å‘é€è¯·æ±‚ â†’ 2. è·å–JSON â†’ 3. è§£ææ•°æ® â†’ 4. æ¸²æŸ“HTML â†’ 5. æ˜¾ç¤ºç»™ç”¨æˆ·
   (Fetch)     (response.json) (å¤„ç†æ•°ç»„)   (åˆ›å»ºDOM)    (ç”¨æˆ·çœ‹åˆ°)
```

**ğŸ”¹ åˆ†é¡µvsæ— é™æ»šåŠ¨çš„åŒºåˆ«**
```
åˆ†é¡µæ–¹å¼ï¼šç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»"ä¸‹ä¸€é¡µ"ï¼Œæ¯æ¬¡æ›¿æ¢å½“å‰é¡µé¢å†…å®¹
æ— é™æ»šåŠ¨ï¼šç”¨æˆ·æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œè‡ªåŠ¨è¿½åŠ æ–°å†…å®¹åˆ°ç°æœ‰åˆ—è¡¨æœ«å°¾
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–çš„æœ¬è´¨**
```
å‡å°‘è¯·æ±‚ï¼šé€šè¿‡ç¼“å­˜é¿å…é‡å¤è·å–ç›¸åŒæ•°æ®
å‡å°‘æ¸²æŸ“ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸï¼Œå›¾ç‰‡æ‡’åŠ è½½
å‡å°‘è®¡ç®—ï¼šé˜²æŠ–ä¼˜åŒ–ï¼Œé¿å…é¢‘ç¹è§¦å‘äº‹ä»¶
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


- **ç”µå•†ç½‘ç«™**ï¼šå•†å“åˆ—è¡¨å±•ç¤ºï¼Œæ”¯æŒæœç´¢å’Œç­›é€‰
- **ç¤¾äº¤åª’ä½“**ï¼šåŠ¨æ€åˆ—è¡¨ï¼Œæ— é™æ»šåŠ¨æŸ¥çœ‹æ›´å¤šå†…å®¹  
- **æ–°é—»ç½‘ç«™**ï¼šæ–‡ç« åˆ—è¡¨ï¼Œåˆ†é¡µæˆ–æ— é™æ»šåŠ¨åŠ è½½
- **ç®¡ç†åå°**ï¼šæ•°æ®è¡¨æ ¼ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢åŠŸèƒ½

### 10.4 æœ€ä½³å®è·µæ€»ç»“


```
ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜å…ˆï¼š
- æä¾›æ¸…æ™°çš„åŠ è½½çŠ¶æ€æç¤º
- é”™è¯¯æ—¶ç»™å‡ºå…·ä½“çš„è§£å†³å»ºè®®
- ç©ºæ•°æ®æ—¶æ˜¾ç¤ºå‹å¥½çš„æç¤ºä¿¡æ¯

âš¡ æ€§èƒ½è€ƒè™‘ï¼š
- åˆç†ä½¿ç”¨ç¼“å­˜å‡å°‘è¯·æ±‚
- å¤§åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨æˆ–åˆ†é¡µ
- å›¾ç‰‡ä½¿ç”¨æ‡’åŠ è½½æŠ€æœ¯

ğŸ›¡ï¸ é”™è¯¯å¤„ç†ï¼š
- ç½‘ç»œé”™è¯¯è¦æœ‰é‡è¯•æœºåˆ¶
- åŒºåˆ†ä¸åŒç±»å‹çš„é”™è¯¯
- é™çº§æ–¹æ¡ˆä¿è¯åŸºæœ¬åŠŸèƒ½å¯ç”¨

ğŸ“± å“åº”å¼è®¾è®¡ï¼š
- ç§»åŠ¨ç«¯é€‚é…æ— é™æ»šåŠ¨ä½“éªŒ
- æ¡Œé¢ç«¯å¯è€ƒè™‘åˆ†é¡µæ–¹å¼
- æ ¹æ®è®¾å¤‡æ€§èƒ½é€‰æ‹©ä¼˜åŒ–ç­–ç•¥
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- Fetchè·å–æ•°æ®ï¼ŒJSONè§£ææˆæ•°ç»„
- å¾ªç¯éå†åˆ›å»ºHTMLï¼Œæ’å…¥å®¹å™¨æ˜¾ç¤º
- åˆ†é¡µä¼ å‚pageå’ŒpageSizeæ§åˆ¶
- æ»šåŠ¨ç›‘å¬å®ç°æ— é™åŠ è½½æ›´å¤š
- çŠ¶æ€ç®¡ç†æå‡ç”¨æˆ·ä½“éªŒæ„ŸçŸ¥
- é”™è¯¯å¤„ç†ä¿è¯åº”ç”¨å¥å£®ç¨³å®š