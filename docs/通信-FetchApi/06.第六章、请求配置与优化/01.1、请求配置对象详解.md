---
title: 1、请求配置对象详解
---
## 📚 目录

1. [请求配置对象概述](#1-请求配置对象概述)
2. [method请求方法配置](#2-method请求方法配置)
3. [headers请求头配置](#3-headers请求头配置)
4. [body请求体配置](#4-body请求体配置)
5. [mode请求模式配置](#5-mode请求模式配置)
6. [credentials凭证模式配置](#6-credentials凭证模式配置)
7. [cache缓存模式配置](#7-cache缓存模式配置)
8. [redirect重定向处理配置](#8-redirect重定向处理配置)
9. [常用配置组合模式](#9-常用配置组合模式)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 🎯 请求配置对象概述


### 1.1 什么是请求配置对象


**简单理解**：就像网购时填写订单信息一样，请求配置对象就是告诉浏览器"怎么发请求"的详细说明书。

```javascript
// 基本格式
fetch('网址', {
  // 这个大括号里的就是配置对象
  method: 'POST',        // 用什么方式发请求
  headers: {...},        // 发什么额外信息
  body: '数据内容'       // 发什么数据
})
```

### 1.2 为什么需要配置对象


**生活类比**：
```
发快递的场景：
├─ 收件地址 (URL)          ← fetch第一个参数
└─ 寄件要求 (配置对象)      ← fetch第二个参数
   ├─ 寄送方式 (method)     ← 普通/加急/特快
   ├─ 包装要求 (headers)    ← 易碎品/保价
   ├─ 包裹内容 (body)       ← 实际物品
   └─ 其他要求...
```

### 1.3 配置对象的基本结构


```javascript
const requestConfig = {
  method: 'GET',           // 请求方式
  headers: {},             // 请求头信息
  body: null,              // 请求数据
  mode: 'cors',            // 跨域模式
  credentials: 'same-origin', // 凭证模式
  cache: 'default',        // 缓存策略
  redirect: 'follow'       // 重定向处理
}
```

---

## 2. 🚀 method请求方法配置


### 2.1 method是什么


**通俗解释**：method就是告诉服务器"我要做什么操作"，就像去银行办业务要说清楚是存钱、取钱还是查余额。

### 2.2 常用method类型


| method类型 | **作用** | **生活类比** | **使用场景** |
|-----------|---------|-------------|-------------|
| `GET` | 获取数据 | 📖 看书、查资料 | 获取商品列表、用户信息 |
| `POST` | 提交数据 | 📝 填表单、投稿 | 用户注册、发表评论 |
| `PUT` | 更新数据 | ✏️ 修改整篇文章 | 更新用户完整信息 |
| `DELETE` | 删除数据 | 🗑️ 扔掉不要的东西 | 删除商品、注销账户 |
| `PATCH` | 部分更新 | ✂️ 只改文章标题 | 只修改用户头像 |

### 2.3 method配置示例


```javascript
// GET请求 - 查看商品
fetch('/api/products', {
  method: 'GET'  // 可以省略，GET是默认值
})

// POST请求 - 添加商品
fetch('/api/products', {
  method: 'POST',
  body: JSON.stringify({name: '苹果', price: 5})
})

// DELETE请求 - 删除商品
fetch('/api/products/123', {
  method: 'DELETE'
})
```

---

## 3. 📋 headers请求头配置


### 3.1 headers是什么


**通俗解释**：headers就像信封上的各种标记，告诉邮递员和收件人一些重要信息。

```
信件类比：
┌─────────────────────────────────┐
│ 收件人：张三                     │ ← 相当于URL
│ 寄件人：李四                     │ ← 相当于User-Agent
│ 内容类型：重要文件               │ ← 相当于Content-Type
│ 处理方式：加急                   │ ← 相当于其他headers
│                                 │
│ 实际信件内容...                  │ ← 相当于body
└─────────────────────────────────┘
```

### 3.2 常用headers配置


**Content-Type（内容类型）**：
```javascript
// 发送JSON数据
headers: {
  'Content-Type': 'application/json'
}

// 发送表单数据
headers: {
  'Content-Type': 'application/x-www-form-urlencoded'
}

// 上传文件
headers: {
  'Content-Type': 'multipart/form-data'
}
```

**Authorization（身份认证）**：
```javascript
// 携带用户令牌
headers: {
  'Authorization': 'Bearer your-token-here'
}
```

### 3.3 headers配置示例


```javascript
// 完整的headers配置
fetch('/api/user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',    // 告诉服务器发送的是JSON
    'Authorization': 'Bearer abc123',      // 证明用户身份
    'Accept': 'application/json'           // 希望收到JSON回复
  },
  body: JSON.stringify({name: '张三'})
})
```

---

## 4. 📦 body请求体配置


### 4.1 body是什么


**通俗解释**：body就是快递包裹里的实际物品，是你真正要发送给服务器的数据内容。

```
快递包裹类比：
┌─────────────────┐
│ 快递单信息       │ ← headers（包装上的标签）
├─────────────────┤
│                 │
│   实际商品       │ ← body（真正的货物）
│                 │
└─────────────────┘
```

### 4.2 常见body数据类型


**JSON字符串**（最常用）：
```javascript
const userData = {name: '张三', age: 25}

fetch('/api/users', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify(userData)  // 把对象转成JSON字符串
})
```

**表单数据**：
```javascript
const formData = new FormData()
formData.append('username', '张三')
formData.append('avatar', fileInput.files[0])  // 上传文件

fetch('/api/upload', {
  method: 'POST',
  body: formData  // FormData不需要设置Content-Type
})
```

**简单字符串**：
```javascript
fetch('/api/note', {
  method: 'POST',
  headers: {'Content-Type': 'text/plain'},
  body: '这是一条笔记内容'
})
```

### 4.3 body使用注意事项


> **💡 重要提醒**
> - GET和DELETE请求通常不使用body
> - JSON数据必须用`JSON.stringify()`转换
> - FormData会自动设置正确的Content-Type

---

## 5. 🌐 mode请求模式配置


### 5.1 mode是什么


**通俗解释**：mode就像设定"能不能跨省寄快递"的规则，决定了请求能不能跨域访问其他网站。

### 5.2 mode选项说明


| mode值 | **含义** | **生活类比** | **使用场景** |
|--------|---------|-------------|-------------|
| `cors` | 允许跨域 | 📮 可以往外省寄快递 | 调用其他网站API |
| `same-origin` | 同域限制 | 🏠 只能在本市内寄件 | 只调用自己网站API |
| `no-cors` | 简单跨域 | 📝 寄明信片，不要回执 | 发送简单请求，不关心响应 |

### 5.3 mode配置示例


```javascript
// 跨域请求其他网站API
fetch('https://api.github.com/users/octocat', {
  mode: 'cors'  // 允许跨域
})

// 只允许同域请求
fetch('/api/secret-data', {
  mode: 'same-origin'  // 必须是同一个网站
})
```

---

## 6. 🔐 credentials凭证模式配置


### 6.1 credentials是什么


**通俗解释**：credentials决定了要不要携带"身份证"（Cookie）去其他网站，就像去银行办业务要不要带身份证。

### 6.2 credentials选项详解


```
银行办业务类比：
┌────────────────────────────────────┐
│ include     → 去哪都带身份证       │ ← 总是携带Cookie
│ same-origin → 只在本地银行带身份证  │ ← 同域才携带Cookie  
│ omit        → 从不带身份证         │ ← 从不携带Cookie
└────────────────────────────────────┘
```

### 6.3 credentials配置示例


```javascript
// 跨域时也要携带Cookie（用于保持登录状态）
fetch('https://api.example.com/profile', {
  credentials: 'include'
})

// 只在同域时携带Cookie（默认行为）
fetch('/api/user-info', {
  credentials: 'same-origin'
})

// 从不携带Cookie（即使有也不发送）
fetch('/api/public-data', {
  credentials: 'omit'
})
```

---

## 7. 💾 cache缓存模式配置


### 7.1 cache是什么


**通俗解释**：cache就像决定要不要用"快递柜"，是直接取之前存的数据，还是重新从服务器获取。

### 7.2 cache选项说明


| cache值 | **行为** | **生活类比** |
|---------|---------|-------------|
| `default` | 浏览器决定 | 🤖 让快递员自己判断 |
| `no-cache` | 先验证再用 | ☑️ 检查保质期再吃 |
| `reload` | 强制重新获取 | 🔄 一定要新鲜的 |
| `force-cache` | 优先用缓存 | 📦 能用存货就用存货 |

### 7.3 cache配置示例


```javascript
// 获取最新数据（不用缓存）
fetch('/api/real-time-price', {
  cache: 'no-cache'
})

// 可以使用缓存数据
fetch('/api/product-list', {
  cache: 'default'
})
```

---

## 8. 🔄 redirect重定向处理配置


### 8.1 redirect是什么


**通俗解释**：redirect决定当网址"搬家"时怎么办，是自动跟过去，还是停在原地报错。

### 8.2 redirect选项说明


```
网址搬家类比：
┌─────────────────────────────────────┐
│ follow → 自动跟到新地址（默认）      │
│ error  → 搬家就报错，不跟过去        │  
│ manual → 告诉我搬到哪了，我自己决定   │
└─────────────────────────────────────┘
```

### 8.3 redirect配置示例


```javascript
// 自动跟随重定向（默认行为）
fetch('/api/data', {
  redirect: 'follow'
})

// 不允许重定向，有重定向就报错
fetch('/api/direct-only', {
  redirect: 'error'
})
```

---

## 9. 🛠️ 常用配置组合模式


### 9.1 GET请求配置


```javascript
// 简单GET请求
const getConfig = {
  method: 'GET',
  headers: {
    'Accept': 'application/json'
  },
  cache: 'default'
}

fetch('/api/products', getConfig)
```

### 9.2 POST提交数据配置


```javascript
// JSON数据提交
const postConfig = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer token123'
  },
  body: JSON.stringify({
    name: '商品名称',
    price: 99.99
  })
}

fetch('/api/products', postConfig)
```

### 9.3 文件上传配置


```javascript
// 文件上传配置
const uploadConfig = {
  method: 'POST',
  body: formData,  // FormData对象
  credentials: 'include'  // 需要登录状态
}

fetch('/api/upload', uploadConfig)
```

### 9.4 跨域API调用配置


```javascript
// 跨域API调用
const corsConfig = {
  method: 'GET',
  mode: 'cors',
  credentials: 'include',
  headers: {
    'Accept': 'application/json'
  }
}

fetch('https://api.example.com/data', corsConfig)
```

### 9.5 完整配置示例


```javascript
// 功能完整的请求配置
const completeConfig = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your-token',
    'Accept': 'application/json'
  },
  body: JSON.stringify({data: 'example'}),
  mode: 'cors',
  credentials: 'include', 
  cache: 'no-cache',
  redirect: 'follow'
}

fetch('/api/endpoint', completeConfig)
  .then(response => response.json())
  .then(data => console.log(data))
```

---

## 10. 📋 核心要点总结


### 10.1 必须掌握的配置项


```
🔸 method：告诉服务器要做什么操作（GET/POST/PUT/DELETE）
🔸 headers：发送额外信息，特别是Content-Type和Authorization
🔸 body：实际要发送的数据内容（POST/PUT时使用）
🔸 mode：控制跨域行为（cors/same-origin）
🔸 credentials：控制Cookie携带（include/same-origin/omit）
```

### 10.2 实用配置组合


**🎯 日常开发最常用**：
```javascript
// 90%的情况下这样配置就够了
{
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify(data)
}
```

**🔒 需要身份验证**：
```javascript
// 登录用户的请求
{
  method: 'GET',
  headers: {'Authorization': 'Bearer token'},
  credentials: 'include'
}
```

**📁 文件上传**：
```javascript
// 上传文件时
{
  method: 'POST',
  body: formData  // 不要设置Content-Type
}
```

### 10.3 关键理解要点


**🔹 配置对象的作用**：
- 就像填写快递单，告诉浏览器怎么发请求
- 不同的业务需求需要不同的配置组合
- 大部分配置都有合理的默认值

**🔹 常见使用模式**：
- GET请求：主要配置headers和cache
- POST请求：重点配置method、headers、body
- 跨域请求：注意mode和credentials设置
- 文件上传：使用FormData，不设置Content-Type

**🔹 配置优先级**：
1. 先保证请求能发出去（method、headers）
2. 再考虑数据传输（body、Content-Type） 
3. 最后优化体验（cache、credentials）

**核心记忆**：
- 配置对象是fetch的"说明书"
- method说做什么，headers说怎么做，body说发什么
- 常用组合模式要熟记，特殊需求再查文档