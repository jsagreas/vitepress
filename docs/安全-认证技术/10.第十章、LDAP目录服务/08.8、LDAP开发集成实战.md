---
title: 8ã€LDAPå¼€å‘é›†æˆå®æˆ˜
---
## ğŸ“š ç›®å½•


1. [LDAPé›†æˆæ¦‚è¿°](#1-LDAPé›†æˆæ¦‚è¿°)
2. [Webåº”ç”¨å¯¹æ¥å®æˆ˜](#2-Webåº”ç”¨å¯¹æ¥å®æˆ˜)
3. [Spring Security LDAPé›†æˆ](#3-Spring-Security-LDAPé›†æˆ)
4. [å¸¸è§ä¸­é—´ä»¶é›†æˆ](#4-å¸¸è§ä¸­é—´ä»¶é›†æˆ)
5. [LDAPç»Ÿä¸€è®¤è¯æº(SSO)](#5-LDAPç»Ÿä¸€è®¤è¯æºSSO)
6. [é›†æˆè°ƒè¯•ä¸é—®é¢˜æ’æŸ¥](#6-é›†æˆè°ƒè¯•ä¸é—®é¢˜æ’æŸ¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ LDAPé›†æˆæ¦‚è¿°



### 1.1 ä»€ä¹ˆæ˜¯LDAPé›†æˆ



**ğŸ”¸ ç®€å•ç†è§£**
LDAPé›†æˆå°±æ˜¯è®©ä½ çš„åº”ç”¨ç³»ç»Ÿ"è¿æ¥"åˆ°LDAPç›®å½•æœåŠ¡ï¼Œä»è€Œå®ç°ï¼š
- **ç»Ÿä¸€ç”¨æˆ·ç®¡ç†**ï¼šæ‰€æœ‰ç³»ç»Ÿå…±ç”¨ä¸€å¥—ç”¨æˆ·è´¦å·
- **å•ç‚¹ç™»å½•**ï¼šç™»å½•ä¸€æ¬¡ï¼Œå¤„å¤„é€šè¡Œ
- **æƒé™é›†ä¸­æ§åˆ¶**ï¼šç»Ÿä¸€ç®¡ç†ç”¨æˆ·æƒé™

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆå„è‡ªä¸ºæ”¿ï¼‰ï¼š
åº”ç”¨A â”€â”€â”€ ç”¨æˆ·æ•°æ®åº“A
åº”ç”¨B â”€â”€â”€ ç”¨æˆ·æ•°æ®åº“B  
åº”ç”¨C â”€â”€â”€ ç”¨æˆ·æ•°æ®åº“C

LDAPé›†æˆæ–¹å¼ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰ï¼š
åº”ç”¨A â”
åº”ç”¨B â”œâ”€â”€ LDAPç›®å½•æœåŠ¡ â”€â”€â”€ ç»Ÿä¸€ç”¨æˆ·æ•°æ®
åº”ç”¨C â”˜
```

### 1.2 LDAPé›†æˆçš„æ ¸å¿ƒä»·å€¼



**ğŸ’¡ ä¸ºä»€ä¹ˆè¦åšLDAPé›†æˆï¼Ÿ**

| **ä¼ ç»Ÿé—®é¢˜** | **LDAPè§£å†³æ–¹æ¡ˆ** | **å®é™…æ•ˆæœ** |
|-------------|-----------------|-------------|
| ğŸ”´ **å¤šå¥—è´¦å·** | `ç»Ÿä¸€ç”¨æˆ·ç›®å½•` | `ä¸€ä¸ªè´¦å·èµ°å¤©ä¸‹` |
| ğŸ”´ **é‡å¤ç™»å½•** | `å•ç‚¹ç™»å½•(SSO)` | `ç™»å½•ä¸€æ¬¡ï¼Œå¤„å¤„å¯ç”¨` |
| ğŸ”´ **æƒé™æ··ä¹±** | `é›†ä¸­æƒé™ç®¡ç†` | `ç»Ÿä¸€æ§åˆ¶ï¼Œäº•ç„¶æœ‰åº` |
| ğŸ”´ **ç»´æŠ¤å›°éš¾** | `ä¸€å¤„ä¿®æ”¹ï¼Œå…¨å±€ç”Ÿæ•ˆ` | `è¿ç»´æˆæœ¬å¤§å¹…é™ä½` |

### 1.3 LDAPé›†æˆæ¶æ„æ¨¡å¼



**ğŸ—ï¸ å…¸å‹é›†æˆæ¶æ„**

```
ç”¨æˆ·æµè§ˆå™¨
    â”‚
    â”œâ”€â”€â”€ Webåº”ç”¨A â”€â”€â”€â”€â”
    â”œâ”€â”€â”€ Webåº”ç”¨B â”€â”€â”€â”€â”¤
    â””â”€â”€â”€ Webåº”ç”¨C â”€â”€â”€â”€â”¼â”€â”€â”€â”€ LDAPæœåŠ¡å™¨
                     â”œâ”€â”€â”€â”€ (ç”¨æˆ·è®¤è¯)
SSOè®¤è¯æœåŠ¡å™¨ â”€â”€â”€â”€â”€â”€â”€â”¤
(CAS/OAuth) â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ é›†æˆå±‚æ¬¡**
- **è®¤è¯å±‚é›†æˆ**ï¼šéªŒè¯ç”¨æˆ·èº«ä»½
- **æˆæƒå±‚é›†æˆ**ï¼šè·å–ç”¨æˆ·æƒé™  
- **ç”¨æˆ·ä¿¡æ¯é›†æˆ**ï¼šåŒæ­¥ç”¨æˆ·èµ„æ–™

---

## 2. ğŸ’» Webåº”ç”¨å¯¹æ¥å®æˆ˜



### 2.1 Java Webåº”ç”¨é›†æˆ



**ğŸ”¸ æ ¸å¿ƒæ€è·¯**
Javaåº”ç”¨é€šè¿‡JNDIï¼ˆJavaå‘½åç›®å½•æ¥å£ï¼‰è¿æ¥LDAPï¼Œå®ç°ç”¨æˆ·è®¤è¯å’Œä¿¡æ¯è·å–ã€‚

**ğŸ“‹ åŸºç¡€ä»£ç ç¤ºä¾‹**

```java
// LDAPè¿æ¥é…ç½®ç±»
@Configuration
public class LdapConfig {
    
    @Value("${ldap.url}")
    private String ldapUrl;
    
    @Value("${ldap.base}")
    private String ldapBase;
    
    @Bean
    public LdapTemplate ldapTemplate() {
        LdapContextSource source = new LdapContextSource();
        source.setUrl(ldapUrl);
        source.setBase(ldapBase);
        source.setUserDn("cn=admin,dc=company,dc=com");
        source.setPassword("admin123");
        source.afterPropertiesSet();
        
        return new LdapTemplate(source);
    }
}
```

```java
// ç”¨æˆ·è®¤è¯æœåŠ¡
@Service
public class LdapAuthService {
    
    @Autowired
    private LdapTemplate ldapTemplate;
    
    // éªŒè¯ç”¨æˆ·ç™»å½•
    public boolean authenticate(String username, String password) {
        try {
            // æ„é€ ç”¨æˆ·DN
            String userDn = "uid=" + username + ",ou=people,dc=company,dc=com";
            
            // å°è¯•ç»‘å®šè®¤è¯
            ldapTemplate.authenticate("", "uid=" + username, password);
            return true;
        } catch (Exception e) {
            return false;
        }
    }
    
    // è·å–ç”¨æˆ·ä¿¡æ¯
    public UserInfo getUserInfo(String username) {
        return ldapTemplate.search(
            "ou=people", 
            "uid=" + username,
            (Attributes attrs) -> {
                UserInfo user = new UserInfo();
                user.setUsername(getAttr(attrs, "uid"));
                user.setEmail(getAttr(attrs, "mail"));
                user.setName(getAttr(attrs, "cn"));
                return user;
            }
        ).stream().findFirst().orElse(null);
    }
    
    private String getAttr(Attributes attrs, String name) {
        try {
            return attrs.get(name).get().toString();
        } catch (Exception e) {
            return "";
        }
    }
}
```

**ğŸ”§ é…ç½®æ–‡ä»¶**
```properties
# application.properties

ldap.url=ldap://192.168.1.100:389
ldap.base=dc=company,dc=com
ldap.user-search-base=ou=people
ldap.user-search-filter=uid={0}
```

### 2.2 PHP Webåº”ç”¨é›†æˆ



**ğŸ”¸ PHPè¿æ¥LDAP**
PHPé€šè¿‡å†…ç½®çš„LDAPæ‰©å±•è¿æ¥ç›®å½•æœåŠ¡ã€‚

```php
<?php
class LdapAuth {
    private $ldapServer = "192.168.1.100";
    private $ldapPort = 389;
    private $baseDn = "dc=company,dc=com";
    
    // ç”¨æˆ·è®¤è¯
    public function authenticate($username, $password) {
        // è¿æ¥LDAPæœåŠ¡å™¨
        $connection = ldap_connect($this->ldapServer, $this->ldapPort);
        if (!$connection) {
            return false;
        }
        
        // è®¾ç½®LDAPé€‰é¡¹
        ldap_set_option($connection, LDAP_OPT_PROTOCOL_VERSION, 3);
        
        try {
            // æ„é€ ç”¨æˆ·DN
            $userDn = "uid=" . $username . ",ou=people," . $this->baseDn;
            
            // å°è¯•ç»‘å®šè®¤è¯
            $bind = ldap_bind($connection, $userDn, $password);
            
            ldap_close($connection);
            return $bind;
        } catch (Exception $e) {
            ldap_close($connection);
            return false;
        }
    }
    
    // è·å–ç”¨æˆ·ä¿¡æ¯
    public function getUserInfo($username) {
        $connection = ldap_connect($this->ldapServer, $this->ldapPort);
        ldap_set_option($connection, LDAP_OPT_PROTOCOL_VERSION, 3);
        
        // ç®¡ç†å‘˜ç»‘å®š
        $adminDn = "cn=admin," . $this->baseDn;
        ldap_bind($connection, $adminDn, "admin123");
        
        // æœç´¢ç”¨æˆ·
        $searchBase = "ou=people," . $this->baseDn;
        $filter = "uid=" . $username;
        $result = ldap_search($connection, $searchBase, $filter);
        $entries = ldap_get_entries($connection, $result);
        
        ldap_close($connection);
        
        if ($entries["count"] > 0) {
            return [
                'username' => $entries[0]['uid'][0],
                'email' => $entries[0]['mail'][0] ?? '',
                'name' => $entries[0]['cn'][0] ?? ''
            ];
        }
        
        return null;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
$ldapAuth = new LdapAuth();
if ($ldapAuth->authenticate($_POST['username'], $_POST['password'])) {
    $userInfo = $ldapAuth->getUserInfo($_POST['username']);
    // ç™»å½•æˆåŠŸï¼Œè®¾ç½®ä¼šè¯
    session_start();
    $_SESSION['user'] = $userInfo;
    header("Location: dashboard.php");
} else {
    echo "ç™»å½•å¤±è´¥";
}
?>
```

### 2.3 Python Webåº”ç”¨é›†æˆ



**ğŸ”¸ ä½¿ç”¨python-ldapåº“**

```python
import ldap
from django.contrib.auth.backends import BaseBackend
from django.contrib.auth.models import User

class LdapBackend(BaseBackend):
    def __init__(self):
        self.ldap_server = "ldap://192.168.1.100:389"
        self.base_dn = "dc=company,dc=com"
        self.admin_dn = "cn=admin,dc=company,dc=com"
        self.admin_password = "admin123"
    
    def authenticate(self, request, username=None, password=None):
        if not username or not password:
            return None
        
        try:
#            # è¿æ¥LDAP
            conn = ldap.initialize(self.ldap_server)
            conn.protocol_version = ldap.VERSION3
            
#            # æ„é€ ç”¨æˆ·DN
            user_dn = f"uid={username},ou=people,{self.base_dn}"
            
#            # å°è¯•ç»‘å®šè®¤è¯
            conn.simple_bind_s(user_dn, password)
            
#            # è®¤è¯æˆåŠŸï¼Œè·å–ç”¨æˆ·ä¿¡æ¯
            user_info = self.get_user_info(username)
            
#            # åˆ›å»ºæˆ–æ›´æ–°Djangoç”¨æˆ·
            user, created = User.objects.get_or_create(
                username=username,
                defaults={
                    'email': user_info.get('email', ''),
                    'first_name': user_info.get('name', ''),
                }
            )
            
            conn.unbind_s()
            return user
            
        except ldap.INVALID_CREDENTIALS:
            return None
        except Exception as e:
            print(f"LDAPè®¤è¯é”™è¯¯: {e}")
            return None
    
    def get_user_info(self, username):
        try:
            conn = ldap.initialize(self.ldap_server)
            conn.protocol_version = ldap.VERSION3
            conn.simple_bind_s(self.admin_dn, self.admin_password)
            
#            # æœç´¢ç”¨æˆ·ä¿¡æ¯
            search_base = f"ou=people,{self.base_dn}"
            search_filter = f"uid={username}"
            
            result = conn.search_s(
                search_base, 
                ldap.SCOPE_SUBTREE, 
                search_filter,
                ['uid', 'mail', 'cn']
            )
            
            if result:
                attrs = result[0][1]
                return {
                    'username': attrs.get('uid', [b''])[0].decode('utf-8'),
                    'email': attrs.get('mail', [b''])[0].decode('utf-8'),
                    'name': attrs.get('cn', [b''])[0].decode('utf-8'),
                }
            
            conn.unbind_s()
            return {}
            
        except Exception as e:
            print(f"è·å–ç”¨æˆ·ä¿¡æ¯é”™è¯¯: {e}")
            return {}
```

---

## 3. ğŸ” Spring Security LDAPé›†æˆ



### 3.1 Spring Security LDAPæ ¸å¿ƒæ¦‚å¿µ



**ğŸ”¸ ä»€ä¹ˆæ˜¯Spring Security LDAPï¼Ÿ**
Spring Security LDAPæ˜¯Springæ¡†æ¶æä¾›çš„ä¸€å¥—å®Œæ•´çš„LDAPè®¤è¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒè®©Javaåº”ç”¨è½»æ¾æ¥å…¥LDAPç›®å½•æœåŠ¡ã€‚

**ğŸ’¡ æ ¸å¿ƒç»„ä»¶**
- **LdapAuthenticationProvider**ï¼šLDAPè®¤è¯æä¾›è€…
- **LdapUserDetailsService**ï¼šç”¨æˆ·è¯¦æƒ…æœåŠ¡
- **LdapTemplate**ï¼šLDAPæ“ä½œæ¨¡æ¿

### 3.2 Spring Security LDAPé…ç½®å®æˆ˜



**ğŸ“‹ Mavenä¾èµ–**
```xml
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-security</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.ldap</groupId>
        <artifactId>spring-ldap-core</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-ldap</artifactId>
    </dependency>
</dependencies>
```

**ğŸ”§ Securityé…ç½®ç±»**
```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth
            .ldapAuthentication()
                // LDAPæœåŠ¡å™¨åœ°å€
                .url("ldap://192.168.1.100:389/dc=company,dc=com")
                // ç®¡ç†å‘˜è´¦å·ï¼ˆç”¨äºæœç´¢ç”¨æˆ·ï¼‰
                .managerDn("cn=admin,dc=company,dc=com")
                .managerPassword("admin123")
                // ç”¨æˆ·æœç´¢é…ç½®
                .userSearchBase("ou=people")
                .userSearchFilter("uid={0}")
                // ç”¨æˆ·è¯¦æƒ…æ˜ å°„
                .userDnPatterns("uid={0},ou=people")
                // ç»„æœç´¢é…ç½®ï¼ˆæƒé™ï¼‰
                .groupSearchBase("ou=groups")
                .groupSearchFilter("member={0}")
                .groupRoleAttribute("cn");
    }
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(authz -> authz
                .requestMatchers("/login", "/public/**").permitAll()
                .requestMatchers("/admin/**").hasRole("ADMIN")
                .anyRequest().authenticated()
            )
            .formLogin(form -> form
                .loginPage("/login")
                .defaultSuccessUrl("/dashboard")
                .permitAll()
            )
            .logout(logout -> logout
                .logoutSuccessUrl("/login?logout")
                .permitAll()
            );
        
        return http.build();
    }
}
```

### 3.3 è‡ªå®šä¹‰ç”¨æˆ·è¯¦æƒ…æœåŠ¡



**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ï¼Ÿ**
é»˜è®¤çš„LDAPç”¨æˆ·è¯¦æƒ…å¯èƒ½ä¸èƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œæ¯”å¦‚éœ€è¦é¢å¤–çš„ç”¨æˆ·å±æ€§ã€æƒé™æ˜ å°„ç­‰ã€‚

```java
@Component
public class CustomLdapUserDetailsService implements LdapUserDetailsService {
    
    @Autowired
    private LdapTemplate ldapTemplate;
    
    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        
        // ä»LDAPè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
        LdapUserDetails ldapUser = searchUser(username);
        if (ldapUser == null) {
            throw new UsernameNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨: " + username);
        }
        
        // è·å–ç”¨æˆ·æƒé™
        Collection<GrantedAuthority> authorities = getUserAuthorities(username);
        
        // æ„å»ºè‡ªå®šä¹‰ç”¨æˆ·å¯¹è±¡
        return User.builder()
            .username(username)
            .password(ldapUser.getPassword())
            .authorities(authorities)
            .accountExpired(false)
            .accountLocked(false)
            .credentialsExpired(false)
            .disabled(false)
            .build();
    }
    
    private LdapUserDetails searchUser(String username) {
        return ldapTemplate.search(
            "ou=people",
            "uid=" + username,
            (Attributes attrs) -> {
                // æ„å»ºç”¨æˆ·å¯¹è±¡
                return new CustomLdapUserDetails(attrs);
            }
        ).stream().findFirst().orElse(null);
    }
    
    private Collection<GrantedAuthority> getUserAuthorities(String username) {
        // ä»LDAPç»„è·å–æƒé™
        return ldapTemplate.search(
            "ou=groups",
            "member=uid=" + username + ",ou=people,dc=company,dc=com",
            (Attributes attrs) -> {
                String groupName = attrs.get("cn").get().toString();
                return new SimpleGrantedAuthority("ROLE_" + groupName.toUpperCase());
            }
        );
    }
}
```

### 3.4 LDAPç”¨æˆ·ä¿¡æ¯æ˜ å°„



**ğŸ”¸ è‡ªå®šä¹‰ç”¨æˆ·å±æ€§æ˜ å°„**

```java
public class CustomLdapUserDetails implements LdapUserDetails {
    private String username;
    private String email;
    private String fullName;
    private String department;
    private Collection<GrantedAuthority> authorities;
    
    public CustomLdapUserDetails(Attributes attrs) throws NamingException {
        this.username = getAttributeValue(attrs, "uid");
        this.email = getAttributeValue(attrs, "mail");
        this.fullName = getAttributeValue(attrs, "cn");
        this.department = getAttributeValue(attrs, "ou");
    }
    
    private String getAttributeValue(Attributes attrs, String name) {
        try {
            Attribute attr = attrs.get(name);
            return attr != null ? attr.get().toString() : "";
        } catch (NamingException e) {
            return "";
        }
    }
    
    // å®ç°UserDetailsæ¥å£çš„æ–¹æ³•...
    @Override
    public String getUsername() { return username; }
    
    @Override
    public String getPassword() { return ""; } // LDAPè®¤è¯ä¸éœ€è¦å¯†ç 
    
    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        return authorities;
    }
    
    // å…¶ä»–æ–¹æ³•è¿”å›trueï¼ˆè´¦å·æœªè¿‡æœŸã€æœªé”å®šç­‰ï¼‰
    @Override
    public boolean isAccountNonExpired() { return true; }
    
    @Override
    public boolean isAccountNonLocked() { return true; }
    
    @Override
    public boolean isCredentialsNonExpired() { return true; }
    
    @Override
    public boolean isEnabled() { return true; }
    
    // è‡ªå®šä¹‰getteræ–¹æ³•
    public String getEmail() { return email; }
    public String getFullName() { return fullName; }
    public String getDepartment() { return department; }
}
```

---

## 4. ğŸ”§ å¸¸è§ä¸­é—´ä»¶é›†æˆ



### 4.1 Jenkins LDAPé›†æˆ



**ğŸ”¸ ä»€ä¹ˆæ˜¯Jenkins LDAPé›†æˆï¼Ÿ**
Jenkinsé€šè¿‡LDAPæ’ä»¶å®ç°ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†ï¼Œè®©ä¼ä¸šå¯ä»¥ç”¨ç»Ÿä¸€çš„è´¦å·ç³»ç»Ÿç®¡ç†CI/CDè®¿é—®ã€‚

**ğŸ“‹ Jenkins LDAPé…ç½®æ­¥éª¤**

**ç¬¬ä¸€æ­¥ï¼šå®‰è£…LDAPæ’ä»¶**
```
Jenkinsç®¡ç† â†’ æ’ä»¶ç®¡ç† â†’ å¯é€‰æ’ä»¶ â†’ æœç´¢"LDAP" â†’ å®‰è£…
```

**ç¬¬äºŒæ­¥ï¼šé…ç½®LDAPè®¤è¯**
```
Jenkinsç®¡ç† â†’ å…¨å±€å®‰å…¨é…ç½® â†’ å®‰å…¨åŸŸ â†’ LDAP
```

**ğŸ”§ å…³é”®é…ç½®å‚æ•°**
```yaml
# LDAPæœåŠ¡å™¨é…ç½®

æœåŠ¡å™¨: ldap://192.168.1.100:389
æ ¹DN: dc=company,dc=com
ç”¨æˆ·æœç´¢åŸºç¡€: ou=people
ç”¨æˆ·æœç´¢è¿‡æ»¤å™¨: uid={0}

# ç®¡ç†å‘˜é…ç½®  

ç®¡ç†å‘˜DN: cn=admin,dc=company,dc=com
ç®¡ç†å‘˜å¯†ç : admin123

# é«˜çº§é…ç½®

æ˜¾ç¤ºåç§°LDAPå±æ€§: cn
é‚®ç®±åœ°å€LDAPå±æ€§: mail
```

**ğŸ’¡ æƒé™æ˜ å°„ç­–ç•¥**
```
LDAPç»„ â†’ Jenkinsæƒé™æ˜ å°„ï¼š

cn=jenkins-admin,ou=groups,dc=company,dc=com â†’ ç®¡ç†å‘˜æƒé™
cn=jenkins-user,ou=groups,dc=company,dc=com â†’ æ™®é€šç”¨æˆ·æƒé™
cn=dev-team,ou=groups,dc=company,dc=com â†’ å¼€å‘ç»„æƒé™
```

### 4.2 GitLab LDAPé›†æˆ



**ğŸ”¸ GitLab LDAPé›†æˆä»·å€¼**
è®©å¼€å‘å›¢é˜Ÿç”¨å…¬å¸ç»Ÿä¸€è´¦å·ç™»å½•GitLabï¼Œç®€åŒ–ä»£ç ä»“åº“çš„ç”¨æˆ·ç®¡ç†ã€‚

**ğŸ“‹ GitLabé…ç½®æ–‡ä»¶ä¿®æ”¹**

```ruby
# /etc/gitlab/gitlab.rb

gitlab_rails['ldap_enabled'] = true
gitlab_rails['prevent_ldap_sign_in'] = false

gitlab_rails['ldap_servers'] = YAML.load <<-'EOS'
  main:
    label: 'Company LDAP'
    host: '192.168.1.100'
    port: 389
    uid: 'uid'
    bind_dn: 'cn=admin,dc=company,dc=com'
    password: 'admin123'
    encryption: 'plain'
    verify_certificates: false
    smartcard_auth: false
    active_directory: false
    allow_username_or_email_login: false
    lowercase_usernames: false
    block_auto_created_users: false
    base: 'dc=company,dc=com'
    user_filter: ''
#    ## EE only
    group_base: 'ou=groups,dc=company,dc=com'
    admin_group: 'gitlab-admin'
    sync_ssh_keys: false
EOS
```

**ğŸ”„ åº”ç”¨é…ç½®**
```bash
# é‡æ–°é…ç½®GitLab

sudo gitlab-ctl reconfigure

# é‡å¯GitLabæœåŠ¡

sudo gitlab-ctl restart
```

**ğŸ’¡ ç”¨æˆ·ç»„æƒé™æ˜ å°„**
```yaml
LDAPç»„æƒé™è®¾è®¡ï¼š
- gitlab-admin: GitLabç®¡ç†å‘˜æƒé™
- gitlab-developer: å¼€å‘è€…æƒé™  
- gitlab-reporter: åªè¯»æƒé™
```

### 4.3 Confluence LDAPé›†æˆ



**ğŸ”¸ ConfluenceçŸ¥è¯†åº“ç»Ÿä¸€è®¤è¯**
è®©ä¼ä¸šwikiç³»ç»Ÿæ¥å…¥LDAPï¼Œå®ç°çŸ¥è¯†ç®¡ç†çš„ç»Ÿä¸€èº«ä»½è®¤è¯ã€‚

**ğŸ“‹ é…ç½®æ­¥éª¤**
```
ç®¡ç† â†’ ç”¨æˆ·ç›®å½• â†’ æ·»åŠ ç›®å½• â†’ LDAP
```

**ğŸ”§ å…³é”®é…ç½®**
```yaml
ç›®å½•ç±»å‹: Generic Directory Server
ä¸»æœºå: 192.168.1.100
ç«¯å£: 389
ç”¨æˆ·å: cn=admin,dc=company,dc=com
å¯†ç : admin123

# ç”¨æˆ·æ¶æ„è®¾ç½®

åŸºç¡€DN: dc=company,dc=com  
ç”¨æˆ·DN: ou=people
ç”¨æˆ·å¯¹è±¡ç±»: inetOrgPerson
ç”¨æˆ·å¯¹è±¡è¿‡æ»¤å™¨: (&(objectClass=inetOrgPerson)(uid=*))
ç”¨æˆ·åå±æ€§: uid

# ç»„æ¶æ„è®¾ç½®

ç»„DN: ou=groups
ç»„å¯¹è±¡ç±»: groupOfNames
ç»„å¯¹è±¡è¿‡æ»¤å™¨: (objectClass=groupOfNames)
```

**ğŸ’¡ æƒé™ç»„è®¾è®¡**
```
confluence-admin â†’ Confluenceç®¡ç†å‘˜
confluence-user â†’ æ™®é€šç”¨æˆ·
confluence-space-admin â†’ ç©ºé—´ç®¡ç†å‘˜
```

### 4.4 Zabbix LDAPé›†æˆ



**ğŸ”¸ ç›‘æ§ç³»ç»Ÿç»Ÿä¸€è®¤è¯**
Zabbixé€šè¿‡LDAPé›†æˆå®ç°è¿ç»´ç›‘æ§ç³»ç»Ÿçš„ç»Ÿä¸€ç”¨æˆ·ç®¡ç†ã€‚

**ğŸ“‹ Zabbix Webé…ç½®**
```
ç®¡ç† â†’ è®¤è¯ â†’ LDAPè®¾ç½®
```

**ğŸ”§ é…ç½®å‚æ•°**
```yaml
# LDAPæœåŠ¡å™¨

LDAPæœåŠ¡å™¨: 192.168.1.100
ç«¯å£: 389
åŸºç¡€DN: dc=company,dc=com
æœç´¢å±æ€§: uid
ç»‘å®šDN: cn=admin,dc=company,dc=com
ç»‘å®šå¯†ç : admin123

# ç”¨æˆ·è®¾ç½®

ç™»å½•å±æ€§: uid
ç”¨æˆ·åå±æ€§: uid  
ç”¨æˆ·å…¨åå±æ€§: cn
ç”¨æˆ·é‚®ç®±å±æ€§: mail
```

**ğŸ’¡ ç”¨æˆ·æƒé™æ˜ å°„**
```php
<?php
// Zabbix LDAPç”¨æˆ·ç»„æ˜ å°„é…ç½®
$ldap_groups = array(
    'zabbix-admin' => array(
        'usrgrpid' => '7',  // Zabbixç®¡ç†å‘˜ç»„ID
        'gui_access' => '0' // å†…éƒ¨è®¤è¯
    ),
    'zabbix-operator' => array(
        'usrgrpid' => '8',  // æ“ä½œå‘˜ç»„ID  
        'gui_access' => '0'
    )
);
?>
```

---

## 5. ğŸ”‘ LDAPç»Ÿä¸€è®¤è¯æº(SSO)



### 5.1 ä»€ä¹ˆæ˜¯LDAPç»Ÿä¸€è®¤è¯æºï¼Ÿ



**ğŸ”¸ ç»Ÿä¸€è®¤è¯æºæ¦‚å¿µ**
LDAPä½œä¸ºç»Ÿä¸€è®¤è¯æºï¼Œå°±æ˜¯è®©æ‰€æœ‰ä¼ä¸šåº”ç”¨ç³»ç»Ÿéƒ½"è®¤"LDAPè¿™ä¸€ä¸ª"èº«ä»½è¯ä¸­å¿ƒ"ï¼Œç”¨æˆ·åªéœ€è¦ä¸€å¥—è´¦å·å¯†ç å°±èƒ½è®¿é—®æ‰€æœ‰ç³»ç»Ÿã€‚

```
ä¼ ç»Ÿè®¤è¯ï¼ˆå„è‡ªä¸ºæ”¿ï¼‰ï¼š
ç”¨æˆ· â†’ åº”ç”¨A â†’ ç‹¬ç«‹ç”¨æˆ·åº“A
ç”¨æˆ· â†’ åº”ç”¨B â†’ ç‹¬ç«‹ç”¨æˆ·åº“B  
ç”¨æˆ· â†’ åº”ç”¨C â†’ ç‹¬ç«‹ç”¨æˆ·åº“C

LDAPç»Ÿä¸€è®¤è¯ï¼ˆä¸­å¤®é›†æƒï¼‰ï¼š
ç”¨æˆ· â†’ åº”ç”¨A â”
ç”¨æˆ· â†’ åº”ç”¨B â”œâ†’ LDAPè®¤è¯ä¸­å¿ƒ â†’ ç»Ÿä¸€ç”¨æˆ·ç›®å½•
ç”¨æˆ· â†’ åº”ç”¨C â”˜
```

### 5.2 LDAP + CASå•ç‚¹ç™»å½•æ¶æ„



**ğŸ”¸ CASï¼ˆä¸­å¤®è®¤è¯æœåŠ¡ï¼‰é›†æˆLDAP**
CASä½œä¸ºSSOæœåŠ¡å™¨ï¼ŒLDAPä½œä¸ºç”¨æˆ·å­˜å‚¨ï¼Œå®ç°çœŸæ­£çš„å•ç‚¹ç™»å½•ã€‚

**ğŸ—ï¸ æ¶æ„ç¤ºæ„å›¾**
```
ç”¨æˆ·æµè§ˆå™¨
     â”‚
     â”œâ”€ è®¿é—®åº”ç”¨A â”€â”
     â”œâ”€ è®¿é—®åº”ç”¨B â”€â”¤
     â””â”€ è®¿é—®åº”ç”¨C â”€â”¼â”€â†’ CASè®¤è¯æœåŠ¡å™¨ â”€â†’ LDAPç”¨æˆ·ç›®å½•
                  â”‚    (æ£€æŸ¥ç™»å½•çŠ¶æ€)     (éªŒè¯ç”¨æˆ·å‡­æ®)
                  â”‚         â”‚                â”‚
                  â””â”€ å·²ç™»å½• â†â”˜                â”‚
                     â”œâ”€ ç”Ÿæˆç¥¨æ® â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€ è¿”å›ç¥¨æ®åˆ°åº”ç”¨
```

**ğŸ“‹ CAS + LDAPé…ç½®å®ä¾‹**

**cas.propertiesé…ç½®**
```properties
# LDAPè®¤è¯é…ç½®

cas.authn.ldap[0].type=AUTHENTICATED
cas.authn.ldap[0].ldapUrl=ldap://192.168.1.100:389
cas.authn.ldap[0].baseDn=dc=company,dc=com
cas.authn.ldap[0].searchFilter=uid={user}
cas.authn.ldap[0].bindDn=cn=admin,dc=company,dc=com
cas.authn.ldap[0].bindCredential=admin123

# ç”¨æˆ·å±æ€§æ˜ å°„

cas.authn.ldap[0].principalAttributeList=cn,mail,ou
cas.authn.attributeRepository.ldap[0].attributes.cn=fullName
cas.authn.attributeRepository.ldap[0].attributes.mail=email
cas.authn.attributeRepository.ldap[0].attributes.ou=department
```

### 5.3 åº”ç”¨ç³»ç»Ÿæ¥å…¥SSO



**ğŸ”¸ Webåº”ç”¨æ¥å…¥CASè®¤è¯**

**Javaåº”ç”¨æ¥å…¥ï¼ˆSpring Bootï¼‰**
```java
@Configuration
public class CasConfig {
    
    @Value("${cas.server.url}")
    private String casServerUrl;
    
    @Value("${cas.client.url}")
    private String casClientUrl;
    
    @Bean
    public CasAuthenticationFilter casAuthenticationFilter() {
        CasAuthenticationFilter filter = new CasAuthenticationFilter();
        filter.setAuthenticationManager(authenticationManager());
        return filter;
    }
    
    @Bean
    public CasAuthenticationEntryPoint casAuthenticationEntryPoint() {
        CasAuthenticationEntryPoint entryPoint = new CasAuthenticationEntryPoint();
        entryPoint.setLoginUrl(casServerUrl + "/login");
        entryPoint.setServiceProperties(serviceProperties());
        return entryPoint;
    }
    
    @Bean
    public ServiceProperties serviceProperties() {
        ServiceProperties properties = new ServiceProperties();
        properties.setService(casClientUrl + "/login/cas");
        properties.setSendRenew(false);
        return properties;
    }
}
```

**PHPåº”ç”¨æ¥å…¥ï¼ˆphpCASï¼‰**
```php
<?php
require_once 'CAS.php';

// CASæœåŠ¡å™¨é…ç½®
phpCAS::client(CAS_VERSION_2_0, '192.168.1.100', 8443, '/cas');
phpCAS::setNoCasServerValidation();

// å¼ºåˆ¶è®¤è¯
phpCAS::forceAuthentication();

// è·å–ç”¨æˆ·ä¿¡æ¯
$username = phpCAS::getUser();
$attributes = phpCAS::getAttributes();

echo "æ¬¢è¿ï¼š" . $username;
echo "é‚®ç®±ï¼š" . $attributes['email'];
echo "éƒ¨é—¨ï¼š" . $attributes['department'];
?>
```

### 5.4 OAuth 2.0 + LDAPé›†æˆ



**ğŸ”¸ ç°ä»£SSOæ–¹æ¡ˆ**
ä½¿ç”¨OAuth 2.0åè®®ï¼ŒLDAPä½œä¸ºç”¨æˆ·å­˜å‚¨ï¼Œå®ç°æ›´ç°ä»£åŒ–çš„å•ç‚¹ç™»å½•ã€‚

**ğŸ“‹ OAuth 2.0æœåŠ¡å™¨é…ç½®ï¼ˆSpring Authorization Serverï¼‰**

```java
@Configuration
public class AuthorizationServerConfig {
    
    @Autowired
    private LdapUserDetailsService ldapUserDetailsService;
    
    @Bean
    public AuthorizationServerSettings authorizationServerSettings() {
        return AuthorizationServerSettings.builder()
                .issuer("http://auth.company.com")
                .build();
    }
    
    @Bean
    public UserDetailsService userDetailsService() {
        return ldapUserDetailsService;
    }
    
    @Bean
    public RegisteredClientRepository registeredClientRepository() {
        RegisteredClient webApp = RegisteredClient.withId("web-app")
                .clientId("web-app-client")
                .clientSecret("{noop}web-app-secret")
                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)
                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)
                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)
                .redirectUri("http://app.company.com/oauth2/callback")
                .scope("read")
                .scope("write")
                .build();
        
        return new InMemoryRegisteredClientRepository(webApp);
    }
}
```

---

## 6. ğŸ› é›†æˆè°ƒè¯•ä¸é—®é¢˜æ’æŸ¥



### 6.1 å¸¸è§LDAPé›†æˆé—®é¢˜



**ğŸ”¸ è¿æ¥é—®é¢˜æ’æŸ¥**

| **é—®é¢˜ç°è±¡** | **å¯èƒ½åŸå› ** | **æ’æŸ¥æ–¹æ³•** | **è§£å†³æ–¹æ¡ˆ** |
|-------------|-------------|-------------|-------------|
| `è¿æ¥è¶…æ—¶` | `ç½‘ç»œä¸é€š/ç«¯å£æœªå¼€` | `telnet ldap-server 389` | `æ£€æŸ¥é˜²ç«å¢™/ç½‘ç»œé…ç½®` |
| `è®¤è¯å¤±è´¥` | `ç”¨æˆ·DNé”™è¯¯/å¯†ç é”™è¯¯` | `ldapsearchæµ‹è¯•` | `ç¡®è®¤ç”¨æˆ·DNæ ¼å¼` |
| `æ‰¾ä¸åˆ°ç”¨æˆ·` | `æœç´¢base/filteré”™è¯¯` | `æ£€æŸ¥æœç´¢é…ç½®` | `è°ƒæ•´æœç´¢å‚æ•°` |
| `æƒé™ä¸è¶³` | `ç»‘å®šç”¨æˆ·æƒé™ä¸å¤Ÿ` | `æ£€æŸ¥ç»‘å®šç”¨æˆ·æƒé™` | `ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç»‘å®š` |

### 6.2 LDAPè¿æ¥è°ƒè¯•å·¥å…·



**ğŸ”§ å‘½ä»¤è¡Œè°ƒè¯•å·¥å…·**

```bash
# æµ‹è¯•LDAPè¿æ¥

ldapsearch -x -H ldap://192.168.1.100:389 \
  -D "cn=admin,dc=company,dc=com" \
  -W -b "dc=company,dc=com" \
  "objectClass=*"

# æµ‹è¯•ç”¨æˆ·è®¤è¯  

ldapsearch -x -H ldap://192.168.1.100:389 \
  -D "uid=zhangsan,ou=people,dc=company,dc=com" \
  -W -b "ou=people,dc=company,dc=com" \
  "uid=zhangsan"

# æµ‹è¯•ç»„æœç´¢

ldapsearch -x -H ldap://192.168.1.100:389 \
  -D "cn=admin,dc=company,dc=com" \
  -W -b "ou=groups,dc=company,dc=com" \
  "member=uid=zhangsan,ou=people,dc=company,dc=com"
```

**ğŸ’¡ Javaè°ƒè¯•ä»£ç **
```java
@Component
public class LdapDebugTool {
    
    // æµ‹è¯•LDAPè¿æ¥
    public boolean testConnection(String url, String bindDn, String password) {
        try {
            LdapContextSource source = new LdapContextSource();
            source.setUrl(url);
            source.setUserDn(bindDn);
            source.setPassword(password);
            source.afterPropertiesSet();
            
            LdapTemplate template = new LdapTemplate(source);
            template.search("", "objectClass=*", new AbstractContextMapper() {
                @Override
                protected Object doMapFromContext(DirContextOperations ctx) {
                    return ctx.getDn();
                }
            });
            
            System.out.println("LDAPè¿æ¥æˆåŠŸ");
            return true;
        } catch (Exception e) {
            System.err.println("LDAPè¿æ¥å¤±è´¥: " + e.getMessage());
            return false;
        }
    }
    
    // æµ‹è¯•ç”¨æˆ·æœç´¢
    public void testUserSearch(String username) {
        try {
            LdapTemplate template = getLdapTemplate();
            
            List<String> results = template.search(
                "ou=people",
                "uid=" + username,
                (Attributes attrs) -> {
                    StringBuilder sb = new StringBuilder();
                    NamingEnumeration<? extends Attribute> all = attrs.getAll();
                    while (all.hasMore()) {
                        Attribute attr = all.next();
                        sb.append(attr.getID()).append(": ").append(attr.get()).append("\n");
                    }
                    return sb.toString();
                }
            );
            
            if (results.isEmpty()) {
                System.out.println("æœªæ‰¾åˆ°ç”¨æˆ·: " + username);
            } else {
                System.out.println("ç”¨æˆ·ä¿¡æ¯:");
                results.forEach(System.out::println);
            }
            
        } catch (Exception e) {
            System.err.println("æœç´¢ç”¨æˆ·å¤±è´¥: " + e.getMessage());
        }
    }
}
```

### 6.3 Spring Security LDAPè°ƒè¯•



**ğŸ”¸ å¼€å¯è°ƒè¯•æ—¥å¿—**
```properties
# application.properties

logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.ldap=DEBUG
logging.level.org.springframework.security.ldap=DEBUG
```

**ğŸ“‹ å¸¸è§Spring Security LDAPé—®é¢˜**

**é—®é¢˜1ï¼šç”¨æˆ·æœç´¢å¤±è´¥**
```java
// é”™è¯¯é…ç½®
.userSearchBase("people")  // ç¼ºå°‘ou=
.userSearchFilter("uid={0}")

// æ­£ç¡®é…ç½®  
.userSearchBase("ou=people")
.userSearchFilter("uid={0}")
```

**é—®é¢˜2ï¼šæƒé™æ˜ å°„é”™è¯¯**
```java
// è°ƒè¯•æƒé™æ˜ å°„
@Component
public class LdapAuthenticationEventListener {
    
    @EventListener
    public void handleAuthenticationSuccess(AuthenticationSuccessEvent event) {
        Authentication auth = event.getAuthentication();
        UserDetails user = (UserDetails) auth.getPrincipal();
        
        System.out.println("ç”¨æˆ·ç™»å½•æˆåŠŸ: " + user.getUsername());
        System.out.println("ç”¨æˆ·æƒé™: " + user.getAuthorities());
    }
    
    @EventListener
    public void handleAuthenticationFailure(AbstractAuthenticationFailureEvent event) {
        System.out.println("ç”¨æˆ·ç™»å½•å¤±è´¥: " + event.getException().getMessage());
    }
}
```

### 6.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®



**ğŸš€ LDAPé›†æˆæ€§èƒ½ä¼˜åŒ–**

**è¿æ¥æ± é…ç½®**
```java
@Bean
public LdapContextSource contextSource() {
    LdapContextSource source = new LdapContextSource();
    source.setUrl("ldap://192.168.1.100:389");
    source.setBase("dc=company,dc=com");
    
    // è¿æ¥æ± é…ç½®
    source.setPooled(true);
    Map<String, Object> baseEnvironment = new HashMap<>();
    baseEnvironment.put("com.sun.jndi.ldap.connect.pool", "true");
    baseEnvironment.put("com.sun.jndi.ldap.connect.pool.maxsize", "10");
    baseEnvironment.put("com.sun.jndi.ldap.connect.pool.prefsize", "5");
    baseEnvironment.put("com.sun.jndi.ldap.connect.pool.timeout", "300000");
    source.setBaseEnvironmentProperties(baseEnvironment);
    
    return source;
}
```

**ç¼“å­˜ç”¨æˆ·ä¿¡æ¯**
```java
@Service
@Cacheable("userCache")
public class CachedLdapUserService {
    
    @Autowired
    private LdapTemplate ldapTemplate;
    
    @Cacheable(value = "users", key = "#username")
    public UserInfo getUserInfo(String username) {
        // LDAPæŸ¥è¯¢é€»è¾‘
        return ldapTemplate.search(
            "ou=people",
            "uid=" + username,
            userAttributeMapper
        ).stream().findFirst().orElse(null);
    }
    
    @CacheEvict(value = "users", key = "#username") 
    public void evictUser(String username) {
        // æ¸…é™¤ç¼“å­˜
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ LDAPé›†æˆæœ¬è´¨ï¼šè®©åº”ç”¨ç³»ç»Ÿè¿æ¥LDAPå®ç°ç»Ÿä¸€è®¤è¯
ğŸ”¸ Webåº”ç”¨å¯¹æ¥ï¼šJava/PHP/Pythoné€šè¿‡ç›¸åº”åº“è¿æ¥LDAP  
ğŸ”¸ Spring Securityï¼šä¼ä¸šçº§Javaåº”ç”¨çš„LDAPé›†æˆæ ‡å‡†æ–¹æ¡ˆ
ğŸ”¸ ä¸­é—´ä»¶é›†æˆï¼šJenkins/GitLab/Confluenceç­‰å·¥å…·çš„LDAPé…ç½®
ğŸ”¸ ç»Ÿä¸€è®¤è¯æºï¼šLDAPä½œä¸ºSSOçš„ç”¨æˆ·å­˜å‚¨ä¸­å¿ƒ
ğŸ”¸ é—®é¢˜æ’æŸ¥ï¼šæŒæ¡å¸¸è§é—®é¢˜çš„è°ƒè¯•å’Œè§£å†³æ–¹æ³•
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ LDAPé›†æˆçš„ä»·å€¼**
```
ç»Ÿä¸€ç®¡ç†ï¼šä¸€ä¸ªè´¦å·èµ°éä¼ä¸šæ‰€æœ‰ç³»ç»Ÿ
é™æœ¬å¢æ•ˆï¼šå‡å°‘è¿ç»´æˆæœ¬ï¼Œæé«˜ç®¡ç†æ•ˆç‡
å®‰å…¨æ§åˆ¶ï¼šé›†ä¸­ç®¡ç†æƒé™ï¼Œé™ä½å®‰å…¨é£é™©
ç”¨æˆ·ä½“éªŒï¼šå•ç‚¹ç™»å½•ï¼Œæ— éœ€é‡å¤è®¤è¯
```

**ğŸ”¹ æŠ€æœ¯é€‰å‹åŸåˆ™**
```
Javaåº”ç”¨ï¼šé¦–é€‰Spring Security LDAP
PHPåº”ç”¨ï¼šä½¿ç”¨php-ldapæ‰©å±•
Pythonåº”ç”¨ï¼špython-ldapåº“
ç°ä»£åŒ–æ¶æ„ï¼šOAuth 2.0 + LDAP
ä¼ ç»Ÿæ¶æ„ï¼šCAS + LDAP
```

**ğŸ”¹ é›†æˆéš¾ç‚¹çªç ´**
```
ç”¨æˆ·DNæ„é€ ï¼šç†è§£LDAPçš„DNæ ¼å¼è§„åˆ™
æƒé™æ˜ å°„ï¼šLDAPç»„åˆ°åº”ç”¨æƒé™çš„è½¬æ¢
æ€§èƒ½ä¼˜åŒ–ï¼šè¿æ¥æ± å’Œç¼“å­˜çš„åˆç†ä½¿ç”¨
é—®é¢˜æ’æŸ¥ï¼šæŒæ¡è°ƒè¯•å·¥å…·å’Œæ–¹æ³•
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼



**ğŸ’¼ ä¼ä¸šåº”ç”¨åœºæ™¯**
- **ç»Ÿä¸€é—¨æˆ·**ï¼šä¼ä¸šå†…éƒ¨ç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£
- **å¼€å‘å·¥å…·é“¾**ï¼šGitã€CI/CDã€ç›‘æ§ç³»ç»Ÿçš„ç»Ÿä¸€è®¤è¯
- **åŠå…¬ç³»ç»Ÿ**ï¼šOAã€é‚®ç®±ã€æ–‡æ¡£ç³»ç»Ÿçš„å•ç‚¹ç™»å½•
- **ä¸šåŠ¡ç³»ç»Ÿ**ï¼šCRMã€ERPç­‰æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿé›†æˆ

**ğŸ¯ æŠ€æœ¯æ”¶ç›Š**
- **å¼€å‘æ•ˆç‡**ï¼šæ ‡å‡†åŒ–çš„è®¤è¯é›†æˆæ–¹æ¡ˆ
- **è¿ç»´ç®€åŒ–**ï¼šé›†ä¸­å¼ç”¨æˆ·å’Œæƒé™ç®¡ç†
- **å®‰å…¨æ€§**ï¼šç»Ÿä¸€çš„èº«ä»½è®¤è¯å’Œè®¿é—®æ§åˆ¶
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ— ç¼çš„è·¨ç³»ç»Ÿè®¿é—®ä½“éªŒ

### 7.4 æœ€ä½³å®è·µå»ºè®®



**ğŸ”§ è®¾è®¡åŸåˆ™**
```
åˆ†å±‚è®¾è®¡ï¼šè®¤è¯å±‚ã€æˆæƒå±‚ã€ç”¨æˆ·ä¿¡æ¯å±‚åˆ†ç¦»
æ ‡å‡†åè®®ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„è®¤è¯åè®®(OAuth 2.0ã€SAML)
ç¼“å­˜ç­–ç•¥ï¼šåˆç†ä½¿ç”¨ç¼“å­˜æå‡æ€§èƒ½
é”™è¯¯å¤„ç†ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé™çº§æœºåˆ¶
```

**ğŸ“Š è¿ç»´å»ºè®®**
```
ç›‘æ§å‘Šè­¦ï¼šLDAPæœåŠ¡å’Œé›†æˆåº”ç”¨çš„å¥åº·ç›‘æ§
æ—¥å¿—å®¡è®¡ï¼šå®Œæ•´çš„è®¤è¯å’Œæˆæƒæ—¥å¿—è®°å½•
å¤‡ä»½ç­–ç•¥ï¼šLDAPæ•°æ®çš„å¤‡ä»½å’Œæ¢å¤è®¡åˆ’
å®‰å…¨åŠ å›ºï¼šSSL/TLSåŠ å¯†ã€è®¿é—®æ§åˆ¶ç­‰å®‰å…¨æªæ–½
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
LDAPé›†æˆç»Ÿä¸€é—¨ï¼Œåº”ç”¨è®¤è¯ä¸å†åˆ†
Spring Securityæ˜¯é¦–é€‰ï¼Œä¸­é—´ä»¶é…ç½®è¦è§„èŒƒ
é—®é¢˜æ’æŸ¥æœ‰å·¥å…·ï¼Œæ€§èƒ½ä¼˜åŒ–ç”¨ç¼“å­˜
ç»Ÿä¸€è®¤è¯ææ•ˆç‡ï¼Œä¼ä¸šç®¡ç†æ›´å®‰å…¨
```