---
title: 14ã€æ¨é€é€šçŸ¥è®¤è¯ç³»ç»Ÿ
---
## ğŸ“š ç›®å½•

1. [æ¨é€é€šçŸ¥è®¤è¯åŸºç¡€æ¦‚å¿µ](#1-æ¨é€é€šçŸ¥è®¤è¯åŸºç¡€æ¦‚å¿µ)
2. [ç§»åŠ¨ç«¯æ¨é€æœåŠ¡é›†æˆ](#2-ç§»åŠ¨ç«¯æ¨é€æœåŠ¡é›†æˆ)
3. [æ¨é€æ¶ˆæ¯è®¾è®¡](#3-æ¨é€æ¶ˆæ¯è®¾è®¡)
4. [ç”¨æˆ·ç¡®è®¤æœºåˆ¶](#4-ç”¨æˆ·ç¡®è®¤æœºåˆ¶)
5. [ç¦»çº¿åœºæ™¯å¤„ç†](#5-ç¦»çº¿åœºæ™¯å¤„ç†)
6. [è®¾å¤‡ç®¡ç†å’Œç»‘å®š](#6-è®¾å¤‡ç®¡ç†å’Œç»‘å®š)
7. [è·¨å¹³å°å…¼å®¹æ€§](#7-è·¨å¹³å°å…¼å®¹æ€§)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”” æ¨é€é€šçŸ¥è®¤è¯åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ¨é€é€šçŸ¥è®¤è¯


**ç®€å•ç†è§£**ï¼šå°±æ˜¯é€šè¿‡æ‰‹æœºæ¨é€æ¶ˆæ¯æ¥éªŒè¯ç”¨æˆ·èº«ä»½çš„è®¤è¯æ–¹å¼ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼šè¾“å…¥ç”¨æˆ·åå¯†ç 
æ¨é€è®¤è¯ï¼šæ‰‹æœºæ”¶åˆ°æ¨é€ â†’ ç‚¹å‡»ç¡®è®¤ â†’ å®Œæˆç™»å½•

ç”Ÿæ´»åœºæ™¯ï¼š
å°±åƒé“¶è¡Œè½¬è´¦æ—¶ï¼Œæ‰‹æœºæ”¶åˆ°éªŒè¯çŸ­ä¿¡
ä½†æ¨é€è®¤è¯æ›´æ–¹ä¾¿ï¼Œä¸éœ€è¦è¾“å…¥éªŒè¯ç 
åªéœ€è¦åœ¨æ‰‹æœºä¸Šç‚¹å‡»"åŒæ„"æˆ–"æ‹’ç»"
```

**ğŸ”¸ æ¨é€è®¤è¯çš„æ ¸å¿ƒä¼˜åŠ¿**
- **ä¾¿æ·æ€§**ï¼šæ— éœ€è®°å¿†å¯†ç ï¼Œä¸€é”®ç¡®è®¤
- **å®‰å…¨æ€§**ï¼šåŸºäºè®¾å¤‡ç»‘å®šï¼Œéš¾ä»¥ä¼ªé€ 
- **å®æ—¶æ€§**ï¼šå³æ—¶æ¨é€ï¼Œå¿«é€Ÿå“åº”
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ“ä½œç®€å•ï¼Œå‡å°‘è¾“å…¥

### 1.2 å·¥ä½œåŸç†ç®€è¿°


**åŸºæœ¬æµç¨‹å›¾**ï¼š
```
ç”¨æˆ·æ“ä½œ             æœåŠ¡ç«¯                 ç§»åŠ¨è®¾å¤‡
   |                    |                      |
   |--[1]ç™»å½•è¯·æ±‚------->|                      |
   |                    |--[2]å‘é€æ¨é€é€šçŸ¥---->|
   |                    |                      |--[3]ç”¨æˆ·æŸ¥çœ‹é€šçŸ¥
   |                    |                      |--[4]ç‚¹å‡»ç¡®è®¤/æ‹’ç»
   |                    |<-[5]è¿”å›ç¡®è®¤ç»“æœ-----|
   |<--[6]ç™»å½•æˆåŠŸ-------|                      |
```

**ğŸ”¸ å…³é”®ç¯èŠ‚è¯´æ˜**
1. **ç”¨æˆ·å‘èµ·ç™»å½•** - åœ¨ç½‘é¡µæˆ–åº”ç”¨ä¸Šç‚¹å‡»ç™»å½•
2. **æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·** - æ ¹æ®ç”¨æˆ·åæ‰¾åˆ°ç»‘å®šçš„è®¾å¤‡
3. **æ¨é€è®¤è¯è¯·æ±‚** - å‘ç”¨æˆ·æ‰‹æœºå‘é€æ¨é€é€šçŸ¥
4. **ç”¨æˆ·ç¡®è®¤æ“ä½œ** - åœ¨æ‰‹æœºä¸Šç¡®è®¤æ˜¯å¦æ˜¯æœ¬äººæ“ä½œ
5. **å®Œæˆè®¤è¯** - æ ¹æ®ç”¨æˆ·é€‰æ‹©å®Œæˆæˆ–æ‹’ç»ç™»å½•

### 1.3 é€‚ç”¨åœºæ™¯åˆ†æ


**ğŸ¯ æœ€é€‚åˆçš„åœºæ™¯**
```
ä¼ä¸šå†…éƒ¨ç³»ç»Ÿï¼š
- å‘˜å·¥ä½¿ç”¨å…¬å¸è®¾å¤‡
- å®‰å…¨è¦æ±‚è¾ƒé«˜
- ç”¨æˆ·ç›¸å¯¹å›ºå®š

é‡‘èç±»åº”ç”¨ï¼š
- é“¶è¡ŒAPPç™»å½•
- æ”¯ä»˜ç¡®è®¤
- è´¦æˆ·å˜æ›´ç¡®è®¤

é«˜ä»·å€¼æ“ä½œï¼š
- é‡è¦æ•°æ®è®¿é—®
- æƒé™å˜æ›´
- èµ„é‡‘æ“ä½œç¡®è®¤
```

**âŒ ä¸é€‚åˆçš„åœºæ™¯**
- ç”¨æˆ·è®¾å¤‡æ›´æ¢é¢‘ç¹
- ç½‘ç»œç¯å¢ƒä¸ç¨³å®š
- ç”¨æˆ·å¯¹éšç§æåº¦æ•æ„Ÿ

---

## 2. ğŸ“± ç§»åŠ¨ç«¯æ¨é€æœåŠ¡é›†æˆ


### 2.1 æ¨é€æœåŠ¡é€‰æ‹©


**ä¸»æµæ¨é€å¹³å°å¯¹æ¯”**

| å¹³å°ç±»å‹ | **ä¼˜åŠ¿** | **åŠ£åŠ¿** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| ğŸ **APNs**(è‹¹æœ) | `å®˜æ–¹æœåŠ¡ï¼Œç¨³å®šå¯é ` | `ä»…æ”¯æŒiOSï¼Œé…ç½®å¤æ‚` | `iOSåº”ç”¨å¿…é€‰` |
| ğŸ¤– **FCM**(è°·æ­Œ) | `å…è´¹ï¼ŒåŠŸèƒ½ä¸°å¯Œ` | `å›½å†…è®¿é—®å—é™` | `æµ·å¤–Androidåº”ç”¨` |
| ğŸ‡¨ğŸ‡³ **æå…‰æ¨é€** | `å›½å†…ç½‘ç»œå‹å¥½ï¼Œæ–‡æ¡£å®Œå–„` | `å…è´¹ç‰ˆæœ‰é™åˆ¶` | `å›½å†…åº”ç”¨é¦–é€‰` |
| ğŸ“¨ **ä¸ªæ¨** | `åˆ°è¾¾ç‡é«˜ï¼Œå®šåˆ¶åŒ–å¼º` | `æˆæœ¬ç›¸å¯¹è¾ƒé«˜` | `ä¼ä¸šçº§åº”ç”¨` |

### 2.2 æ¨é€æœåŠ¡é›†æˆæ­¥éª¤


**ğŸ”§ ä»¥æå…‰æ¨é€ä¸ºä¾‹çš„é›†æˆæµç¨‹**

```javascript
// 1. åˆå§‹åŒ–æ¨é€æœåŠ¡
const jpush = require('jpush-sdk');
const client = jpush.buildClient('your-app-key', 'your-master-secret');

// 2. è®¾å¤‡æ³¨å†Œç®¡ç†
class PushDeviceManager {
    // æ³¨å†Œè®¾å¤‡
    async registerDevice(userId, deviceToken, platform) {
        const deviceInfo = {
            userId: userId,
            token: deviceToken,
            platform: platform, // ios/android
            registerTime: new Date(),
            isActive: true
        };
        
        // ä¿å­˜åˆ°æ•°æ®åº“
        await this.saveDeviceInfo(deviceInfo);
        
        // è®¾ç½®åˆ«åï¼Œæ–¹ä¾¿åç»­æ¨é€
        await this.setAlias(deviceToken, userId);
    }
    
    // è®¾å¤‡æ³¨é”€
    async unregisterDevice(userId, deviceToken) {
        await this.updateDeviceStatus(deviceToken, false);
    }
}
```

**ğŸ”¸ é›†æˆå…³é”®ç‚¹è¯´æ˜**
- **è¯ä¹¦é…ç½®**ï¼šiOSéœ€è¦é…ç½®æ¨é€è¯ä¹¦ï¼ŒAndroidéœ€è¦é…ç½®åŒ…å
- **æƒé™ç”³è¯·**ï¼šåº”ç”¨å¯åŠ¨æ—¶ç”³è¯·æ¨é€æƒé™
- **è®¾å¤‡æ ‡è¯†**ï¼šæ¯ä¸ªè®¾å¤‡æœ‰å”¯ä¸€çš„æ¨é€Token
- **åˆ«åè®¾ç½®**ï¼šç”¨ç”¨æˆ·IDä½œä¸ºåˆ«åï¼Œæ–¹ä¾¿å®šå‘æ¨é€

### 2.3 æ¨é€æœåŠ¡æ¶æ„è®¾è®¡


**ç³»ç»Ÿæ¶æ„å›¾**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Webç«¯     â”‚    â”‚   è®¤è¯æœåŠ¡   â”‚    â”‚  æ¨é€æœåŠ¡   â”‚
â”‚             â”‚â”€â”€â”€â–¶â”‚              â”‚â”€â”€â”€â–¶â”‚             â”‚
â”‚ ç”¨æˆ·ç™»å½•    â”‚    â”‚ éªŒè¯&è½¬å‘    â”‚    â”‚ æ¶ˆæ¯æ¨é€    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                     â”‚
                           â–¼                     â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   æ•°æ®åº“     â”‚    â”‚  ç§»åŠ¨è®¾å¤‡   â”‚
                   â”‚ è®¾å¤‡&ç”¨æˆ·ä¿¡æ¯â”‚    â”‚ APPæ¥æ”¶å¤„ç† â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç»„ä»¶è¯´æ˜**ï¼š
- **è®¤è¯æœåŠ¡**ï¼šå¤„ç†ç™»å½•è¯·æ±‚ï¼Œè§¦å‘æ¨é€
- **æ¨é€æœåŠ¡**ï¼šè´Ÿè´£ä¸ç¬¬ä¸‰æ–¹æ¨é€å¹³å°é€šä¿¡
- **è®¾å¤‡ç®¡ç†**ï¼šç»´æŠ¤ç”¨æˆ·è®¾å¤‡ç»‘å®šå…³ç³»
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šå¤„ç†æ¨é€æ¶ˆæ¯çš„å¯é ä¼ é€’

---

## 3. ğŸ“ æ¨é€æ¶ˆæ¯è®¾è®¡


### 3.1 æ¶ˆæ¯å†…å®¹è®¾è®¡åŸåˆ™


**ğŸ¯ æ¶ˆæ¯è®¾è®¡çš„æ ¸å¿ƒè¦ç´ **

```json
{
  "title": "ç™»å½•ç¡®è®¤",
  "body": "æœ‰äººæ­£åœ¨å°è¯•ç™»å½•æ‚¨çš„è´¦æˆ·",
  "data": {
    "type": "auth_request",
    "requestId": "auth_20241212_001",
    "deviceInfo": "Windows Chrome",
    "location": "åŒ—äº¬å¸‚æµ·æ·€åŒº",
    "timestamp": "2024-12-12 14:30:00"
  },
  "actions": [
    {"id": "approve", "title": "ç¡®è®¤ç™»å½•", "style": "positive"},
    {"id": "deny", "title": "æ‹’ç»ç™»å½•", "style": "destructive"}
  ]
}
```

**ğŸ”¸ æ¶ˆæ¯å†…å®¹è¦ç‚¹**
- **æ ‡é¢˜ç®€æ´**ï¼šç›´æ¥è¯´æ˜æ˜¯ä»€ä¹ˆæ“ä½œ
- **æè¿°æ¸…æ™°**ï¼šç”¨æˆ·èƒ½ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆ
- **å…³é”®ä¿¡æ¯**ï¼šæ—¶é—´ã€åœ°ç‚¹ã€è®¾å¤‡ä¿¡æ¯
- **æ“ä½œæŒ‰é’®**ï¼šæ˜ç¡®çš„ç¡®è®¤å’Œæ‹’ç»é€‰é¡¹

### 3.2 ä¸åŒè®¤è¯åœºæ™¯çš„æ¶ˆæ¯æ¨¡æ¿


**ğŸ” ç™»å½•è®¤è¯æ¶ˆæ¯**
```javascript
const loginAuthMessage = {
    title: "è´¦æˆ·ç™»å½•ç¡®è®¤",
    body: `æ£€æµ‹åˆ°ä» ${deviceInfo} ç™»å½•æ‚¨çš„è´¦æˆ·`,
    data: {
        type: "login_auth",
        location: location,
        time: new Date().toLocaleString(),
        riskLevel: "normal" // low/normal/high
    }
};
```

**ğŸ’° æ”¯ä»˜è®¤è¯æ¶ˆæ¯**
```javascript
const paymentAuthMessage = {
    title: "æ”¯ä»˜ç¡®è®¤",
    body: `å³å°†æ”¯ä»˜ Â¥${amount} ç»™ ${merchant}`,
    data: {
        type: "payment_auth",
        amount: amount,
        merchant: merchant,
        orderId: orderId,
        riskLevel: "high"
    }
};
```

**âš™ï¸ æƒé™å˜æ›´æ¶ˆæ¯**
```javascript
const permissionAuthMessage = {
    title: "æƒé™å˜æ›´ç¡®è®¤",
    body: `æ­£åœ¨å°è¯•${operation}æ‚¨çš„${resource}æƒé™`,
    data: {
        type: "permission_auth",
        operation: operation, // æ·»åŠ /åˆ é™¤/ä¿®æ”¹
        resource: resource,   // å…·ä½“èµ„æº
        riskLevel: "medium"
    }
};
```

### 3.3 æ¶ˆæ¯ä¸ªæ€§åŒ–å’Œæœ¬åœ°åŒ–


**ğŸŒ å¤šè¯­è¨€æ”¯æŒ**
```javascript
class MessageLocalizer {
    getLocalizedMessage(messageType, locale, params) {
        const templates = {
            'zh-CN': {
                login_auth: `æ£€æµ‹åˆ°ä» {device} ç™»å½•æ‚¨çš„è´¦æˆ·`,
                payment_auth: `å³å°†æ”¯ä»˜ Â¥{amount} ç»™ {merchant}`
            },
            'en-US': {
                login_auth: `Login attempt detected from {device}`,
                payment_auth: `About to pay ${amount} to {merchant}`
            }
        };
        
        return this.formatMessage(templates[locale][messageType], params);
    }
}
```

**ğŸ¨ é£é™©ç­‰çº§æ˜¾ç¤º**
```javascript
// æ ¹æ®é£é™©ç­‰çº§è°ƒæ•´æ¶ˆæ¯æ ·å¼
const getRiskStyle = (riskLevel) => {
    const styles = {
        low: { color: 'green', icon: 'âœ…' },
        normal: { color: 'blue', icon: 'â„¹ï¸' },
        high: { color: 'red', icon: 'âš ï¸' }
    };
    return styles[riskLevel] || styles.normal;
};
```

---

## 4. âœ… ç”¨æˆ·ç¡®è®¤æœºåˆ¶


### 4.1 ç¡®è®¤æµç¨‹è®¾è®¡


**æ ‡å‡†ç¡®è®¤æµç¨‹**ï¼š
```
æ¨é€åˆ°è¾¾ â†’ ç”¨æˆ·æŸ¥çœ‹ â†’ æ“ä½œé€‰æ‹© â†’ ç»“æœåé¦ˆ â†’ è®¤è¯å®Œæˆ

è¯¦ç»†æ­¥éª¤ï¼š
1. ğŸ“± ç”¨æˆ·æ”¶åˆ°æ¨é€é€šçŸ¥
2. ğŸ‘€ ç‚¹å‡»é€šçŸ¥æŸ¥çœ‹è¯¦æƒ…
3. ğŸ¤” é˜…è¯»è®¤è¯è¯·æ±‚ä¿¡æ¯
4. âœ… é€‰æ‹©"ç¡®è®¤"æˆ–"æ‹’ç»"
5. ğŸ“¤ ç»“æœå‘é€å›æœåŠ¡å™¨
6. ğŸ”“ ç™»å½•æˆåŠŸæˆ–å¤±è´¥
```

### 4.2 ç¡®è®¤æ“ä½œçš„å®ç°


**ç§»åŠ¨ç«¯ç¡®è®¤ä»£ç ç¤ºä¾‹**ï¼š
```javascript
// React Native æ¨é€å¤„ç†
class PushAuthHandler {
    // å¤„ç†æ¨é€é€šçŸ¥
    handlePushNotification(notification) {
        if (notification.data.type === 'auth_request') {
            this.showAuthDialog(notification.data);
        }
    }
    
    // æ˜¾ç¤ºè®¤è¯å¯¹è¯æ¡†
    showAuthDialog(authData) {
        Alert.alert(
            "ç™»å½•ç¡®è®¤",
            `æ¥è‡ª ${authData.location} çš„ç™»å½•è¯·æ±‚\nè®¾å¤‡ï¼š${authData.deviceInfo}\næ—¶é—´ï¼š${authData.timestamp}`,
            [
                {
                    text: "æ‹’ç»",
                    style: "destructive",
                    onPress: () => this.handleAuthResponse(authData.requestId, false)
                },
                {
                    text: "ç¡®è®¤ç™»å½•",
                    style: "default",
                    onPress: () => this.handleAuthResponse(authData.requestId, true)
                }
            ]
        );
    }
    
    // å‘é€ç¡®è®¤ç»“æœ
    async handleAuthResponse(requestId, approved) {
        try {
            await fetch('/api/auth/push/confirm', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    requestId: requestId,
                    approved: approved,
                    timestamp: new Date().toISOString()
                })
            });
        } catch (error) {
            console.error('å‘é€ç¡®è®¤å¤±è´¥:', error);
        }
    }
}
```

### 4.3 ç¡®è®¤å®‰å…¨å¢å¼º


**ğŸ”’ ç”Ÿç‰©è¯†åˆ«éªŒè¯**
```javascript
// æ·»åŠ ç”Ÿç‰©è¯†åˆ«ç¡®è®¤
class BiometricAuthHandler {
    async confirmWithBiometric(requestId) {
        try {
            // æ£€æŸ¥ç”Ÿç‰©è¯†åˆ«å¯ç”¨æ€§
            const available = await TouchID.isSupported();
            if (!available) {
                return this.fallbackToPassword();
            }
            
            // æ‰§è¡Œç”Ÿç‰©è¯†åˆ«
            await TouchID.authenticate('ç¡®è®¤ç™»å½•æ“ä½œ');
            
            // å‘é€ç¡®è®¤ç»“æœ
            return this.sendConfirmation(requestId, true);
        } catch (error) {
            // ç”Ÿç‰©è¯†åˆ«å¤±è´¥ï¼Œæ‹’ç»æ“ä½œ
            return this.sendConfirmation(requestId, false);
        }
    }
}
```

**â±ï¸ ç¡®è®¤æ—¶æ•ˆæ§åˆ¶**
```javascript
class AuthTimeoutManager {
    constructor() {
        this.timeoutDuration = 5 * 60 * 1000; // 5åˆ†é’Ÿè¶…æ—¶
        this.activeRequests = new Map();
    }
    
    // åˆ›å»ºè®¤è¯è¯·æ±‚
    createAuthRequest(requestId) {
        // è®¾ç½®è¶…æ—¶
        const timeout = setTimeout(() => {
            this.expireRequest(requestId);
        }, this.timeoutDuration);
        
        this.activeRequests.set(requestId, {
            timeout: timeout,
            startTime: Date.now()
        });
    }
    
    // è¯·æ±‚è¿‡æœŸå¤„ç†
    expireRequest(requestId) {
        console.log(`è®¤è¯è¯·æ±‚ ${requestId} å·²è¶…æ—¶`);
        this.activeRequests.delete(requestId);
        // é€šçŸ¥å‰ç«¯è®¤è¯å¤±è´¥
        this.notifyAuthFailure(requestId, 'timeout');
    }
}
```

---

## 5. ğŸ”Œ ç¦»çº¿åœºæ™¯å¤„ç†


### 5.1 ç¦»çº¿é—®é¢˜åˆ†æ


**å¸¸è§ç¦»çº¿åœºæ™¯**ï¼š
```
ğŸ“µ è®¾å¤‡ç¦»çº¿æƒ…å†µï¼š
- æ‰‹æœºå…³æœº
- ç½‘ç»œæ–­å¼€
- åº”ç”¨è¢«å…³é—­
- ç³»ç»Ÿçœç”µæ¨¡å¼

ğŸ”„ ç¦»çº¿å½±å“ï¼š
- æ¨é€æ— æ³•åŠæ—¶åˆ°è¾¾
- ç”¨æˆ·æ— æ³•åŠæ—¶ç¡®è®¤
- è®¤è¯æµç¨‹ä¸­æ–­
- ç”¨æˆ·ä½“éªŒä¸‹é™
```

### 5.2 ç¦»çº¿æ£€æµ‹æœºåˆ¶


**è®¾å¤‡åœ¨çº¿çŠ¶æ€ç›‘æ§**ï¼š
```javascript
class DeviceStatusMonitor {
    constructor() {
        this.deviceStatus = new Map(); // å­˜å‚¨è®¾å¤‡åœ¨çº¿çŠ¶æ€
        this.heartbeatInterval = 30000; // 30ç§’å¿ƒè·³
    }
    
    // è®¾å¤‡å¿ƒè·³ä¸ŠæŠ¥
    updateHeartbeat(userId, deviceToken) {
        this.deviceStatus.set(deviceToken, {
            userId: userId,
            lastSeen: new Date(),
            isOnline: true
        });
    }
    
    // æ£€æŸ¥è®¾å¤‡æ˜¯å¦åœ¨çº¿
    isDeviceOnline(deviceToken) {
        const device = this.deviceStatus.get(deviceToken);
        if (!device) return false;
        
        const now = new Date();
        const timeDiff = now - device.lastSeen;
        return timeDiff < this.heartbeatInterval * 2; // 1åˆ†é’Ÿå†…ç®—åœ¨çº¿
    }
    
    // è·å–ç”¨æˆ·æ‰€æœ‰åœ¨çº¿è®¾å¤‡
    getUserOnlineDevices(userId) {
        const onlineDevices = [];
        for (let [token, device] of this.deviceStatus.entries()) {
            if (device.userId === userId && this.isDeviceOnline(token)) {
                onlineDevices.push(token);
            }
        }
        return onlineDevices;
    }
}
```

### 5.3 ç¦»çº¿å¤„ç†ç­–ç•¥


**ğŸ”„ å¤šè®¾å¤‡å¤‡ç”¨æ–¹æ¡ˆ**
```javascript
class OfflineHandler {
    async handleOfflineDevice(userId, primaryDevice) {
        // 1. æ£€æŸ¥ä¸»è®¾å¤‡æ˜¯å¦åœ¨çº¿
        if (!this.deviceMonitor.isDeviceOnline(primaryDevice)) {
            
            // 2. æŸ¥æ‰¾å¤‡ç”¨è®¾å¤‡
            const backupDevices = this.deviceMonitor.getUserOnlineDevices(userId);
            
            if (backupDevices.length > 0) {
                // å‘å¤‡ç”¨è®¾å¤‡æ¨é€
                return await this.sendToBackupDevices(backupDevices, authRequest);
            }
            
            // 3. æ‰€æœ‰è®¾å¤‡éƒ½ç¦»çº¿ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ
            return await this.useFallbackAuth(userId, authRequest);
        }
    }
    
    // é™çº§è®¤è¯æ–¹æ¡ˆ
    async useFallbackAuth(userId, authRequest) {
        const fallbackMethods = [
            'sms_code',      // çŸ­ä¿¡éªŒè¯ç 
            'email_link',    // é‚®ä»¶é“¾æ¥ç¡®è®¤
            'security_questions' // å®‰å…¨é—®é¢˜
        ];
        
        // æ ¹æ®ç”¨æˆ·é…ç½®é€‰æ‹©é™çº§æ–¹æ¡ˆ
        const method = this.getUserFallbackMethod(userId);
        return await this.executeFallbackAuth(method, userId, authRequest);
    }
}
```

**ğŸ“± æ¨é€æ¶ˆæ¯æŒä¹…åŒ–**
```javascript
class PushPersistence {
    // ä¿å­˜ç¦»çº¿æ¶ˆæ¯
    async storeOfflineMessage(userId, message) {
        const offlineMessage = {
            id: this.generateId(),
            userId: userId,
            message: message,
            createdAt: new Date(),
            delivered: false,
            retryCount: 0
        };
        
        await this.database.storeOfflineMessage(offlineMessage);
        return offlineMessage.id;
    }
    
    // è®¾å¤‡ä¸Šçº¿æ—¶æ¨é€ç¦»çº¿æ¶ˆæ¯
    async deliverOfflineMessages(userId, deviceToken) {
        const messages = await this.database.getUndeliveredMessages(userId);
        
        for (let message of messages) {
            try {
                await this.pushService.send(deviceToken, message.message);
                await this.markAsDelivered(message.id);
            } catch (error) {
                await this.incrementRetryCount(message.id);
            }
        }
    }
}
```

### 5.4 è¶…æ—¶å’Œé‡è¯•æœºåˆ¶


**â° æ™ºèƒ½é‡è¯•ç­–ç•¥**
```javascript
class SmartRetryManager {
    constructor() {
        this.retryIntervals = [30, 60, 120, 300]; // 30ç§’, 1åˆ†é’Ÿ, 2åˆ†é’Ÿ, 5åˆ†é’Ÿ
        this.maxRetries = 4;
    }
    
    async retryPushWithBackoff(userId, message, retryCount = 0) {
        if (retryCount >= this.maxRetries) {
            // è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ
            return await this.fallbackAuth(userId, message);
        }
        
        // ç­‰å¾…é‡è¯•é—´éš”
        const delay = this.retryIntervals[retryCount] * 1000;
        await this.sleep(delay);
        
        try {
            // æ£€æŸ¥è®¾å¤‡æ˜¯å¦å·²ç»ä¸Šçº¿
            const onlineDevices = this.deviceMonitor.getUserOnlineDevices(userId);
            
            if (onlineDevices.length > 0) {
                return await this.sendPush(onlineDevices[0], message);
            } else {
                // è®¾å¤‡ä»ç„¶ç¦»çº¿ï¼Œç»§ç»­é‡è¯•
                return await this.retryPushWithBackoff(userId, message, retryCount + 1);
            }
        } catch (error) {
            return await this.retryPushWithBackoff(userId, message, retryCount + 1);
        }
    }
}
```

---

## 6. ğŸ“± è®¾å¤‡ç®¡ç†å’Œç»‘å®š


### 6.1 è®¾å¤‡ç»‘å®šæµç¨‹


**è®¾å¤‡ç»‘å®šçš„å®Œæ•´æµç¨‹**ï¼š
```
ç”¨æˆ·é¦–æ¬¡ç™»å½• â†’ è®¾å¤‡æ³¨å†Œ â†’ éªŒè¯ç»‘å®š â†’ æ¿€æ´»æ¨é€ â†’ å®Œæˆç»‘å®š

è¯¦ç»†æ­¥éª¤ï¼š
1. ğŸ“± ç”¨æˆ·åœ¨æ–°è®¾å¤‡ä¸Šå®‰è£…APP
2. ğŸ”‘ ä½¿ç”¨ç”¨æˆ·åå¯†ç é¦–æ¬¡ç™»å½•
3. ğŸ“‹ ç³»ç»Ÿè®°å½•è®¾å¤‡ä¿¡æ¯ï¼ˆè®¾å¤‡IDã€æ¨é€Tokenç­‰ï¼‰
4. ğŸ“§ å‘é€ç»‘å®šç¡®è®¤ï¼ˆé‚®ä»¶æˆ–çŸ­ä¿¡ï¼‰
5. âœ… ç”¨æˆ·ç¡®è®¤è®¾å¤‡ç»‘å®š
6. ğŸ”” æ¿€æ´»è¯¥è®¾å¤‡çš„æ¨é€è®¤è¯åŠŸèƒ½
```

**è®¾å¤‡ç»‘å®šä»£ç å®ç°**ï¼š
```javascript
class DeviceBindingManager {
    // è®¾å¤‡ç»‘å®šè¯·æ±‚
    async requestDeviceBinding(userId, deviceInfo) {
        const bindingRequest = {
            id: this.generateId(),
            userId: userId,
            deviceToken: deviceInfo.token,
            deviceName: deviceInfo.name,
            platform: deviceInfo.platform,
            appVersion: deviceInfo.appVersion,
            status: 'pending', // pending/approved/rejected
            createdAt: new Date(),
            expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000) // 24å°æ—¶è¿‡æœŸ
        };
        
        // ä¿å­˜ç»‘å®šè¯·æ±‚
        await this.database.saveBindingRequest(bindingRequest);
        
        // å‘é€ç¡®è®¤é€šçŸ¥ï¼ˆé‚®ä»¶/çŸ­ä¿¡ï¼‰
        await this.sendBindingConfirmation(userId, bindingRequest);
        
        return bindingRequest.id;
    }
    
    // ç¡®è®¤è®¾å¤‡ç»‘å®š
    async confirmDeviceBinding(requestId, approved) {
        const request = await this.database.getBindingRequest(requestId);
        
        if (!request || request.expiresAt < new Date()) {
            throw new Error('ç»‘å®šè¯·æ±‚æ— æ•ˆæˆ–å·²è¿‡æœŸ');
        }
        
        if (approved) {
            // åˆ›å»ºè®¾å¤‡è®°å½•
            const device = {
                userId: request.userId,
                token: request.deviceToken,
                name: request.deviceName,
                platform: request.platform,
                isActive: true,
                bindingTime: new Date()
            };
            
            await this.database.createDevice(device);
            
            // æ›´æ–°è¯·æ±‚çŠ¶æ€
            await this.database.updateBindingStatus(requestId, 'approved');
            
            return { success: true, message: 'è®¾å¤‡ç»‘å®šæˆåŠŸ' };
        } else {
            await this.database.updateBindingStatus(requestId, 'rejected');
            return { success: false, message: 'è®¾å¤‡ç»‘å®šè¢«æ‹’ç»' };
        }
    }
}
```

### 6.2 è®¾å¤‡ä¿¡æ¯æ”¶é›†


**ğŸ“Š æ”¶é›†çš„è®¾å¤‡ä¿¡æ¯**
```javascript
// ç§»åŠ¨ç«¯è®¾å¤‡ä¿¡æ¯æ”¶é›†
import DeviceInfo from 'react-native-device-info';

class DeviceInfoCollector {
    async collectDeviceInfo() {
        return {
            // åŸºç¡€ä¿¡æ¯
            deviceId: await DeviceInfo.getUniqueId(),
            deviceName: await DeviceInfo.getDeviceName(),
            platform: Platform.OS, // ios/android
            systemVersion: DeviceInfo.getSystemVersion(),
            appVersion: DeviceInfo.getVersion(),
            
            // æ¨é€ç›¸å…³
            pushToken: await this.getPushToken(),
            
            // å®‰å…¨ç›¸å…³
            isRooted: await DeviceInfo.isEmulator(),
            hasNotchOrDynamicIsland: DeviceInfo.hasNotch(),
            
            // ç½‘ç»œä¿¡æ¯
            ipAddress: await DeviceInfo.getIpAddress(),
            carrier: await DeviceInfo.getCarrier(),
            
            // æ—¶é—´æˆ³
            registeredAt: new Date().toISOString()
        };
    }
    
    // è·å–æ¨é€Token
    async getPushToken() {
        if (Platform.OS === 'ios') {
            return await messaging().getAPNSToken();
        } else {
            return await messaging().getToken();
        }
    }
}
```

### 6.3 è®¾å¤‡ç®¡ç†åŠŸèƒ½


**ğŸ”§ è®¾å¤‡åˆ—è¡¨ç®¡ç†**
```javascript
class UserDeviceManager {
    // è·å–ç”¨æˆ·æ‰€æœ‰è®¾å¤‡
    async getUserDevices(userId) {
        const devices = await this.database.getUserDevices(userId);
        
        return devices.map(device => ({
            id: device.id,
            name: device.name,
            platform: device.platform,
            lastSeen: device.lastSeen,
            isActive: this.deviceMonitor.isDeviceOnline(device.token),
            isCurrent: device.token === this.currentDeviceToken,
            location: device.lastKnownLocation
        }));
    }
    
    // è®¾å¤‡é‡å‘½å
    async renameDevice(userId, deviceId, newName) {
        await this.database.updateDeviceName(deviceId, newName);
        return { success: true, message: 'è®¾å¤‡åç§°æ›´æ–°æˆåŠŸ' };
    }
    
    // ç§»é™¤è®¾å¤‡
    async removeDevice(userId, deviceId) {
        // æ£€æŸ¥æƒé™
        const device = await this.database.getDevice(deviceId);
        if (device.userId !== userId) {
            throw new Error('æ— æƒé™æ“ä½œæ­¤è®¾å¤‡');
        }
        
        // è½¯åˆ é™¤è®¾å¤‡
        await this.database.deactivateDevice(deviceId);
        
        // æ’¤é”€è¯¥è®¾å¤‡çš„æ¨é€æƒé™
        await this.pushService.revokeDevice(device.token);
        
        return { success: true, message: 'è®¾å¤‡ç§»é™¤æˆåŠŸ' };
    }
    
    // è®¾å¤‡ä¿¡ä»»ç®¡ç†
    async setDeviceTrust(userId, deviceId, trusted) {
        await this.database.updateDeviceTrust(deviceId, trusted);
        
        if (trusted) {
            // å—ä¿¡ä»»è®¾å¤‡å¯ä»¥è·³è¿‡æŸäº›éªŒè¯æ­¥éª¤
            await this.grantTrustedDevicePrivileges(deviceId);
        }
        
        return { success: true };
    }
}
```

### 6.4 è®¾å¤‡å®‰å…¨æ£€æŸ¥


**ğŸ”’ è®¾å¤‡å®‰å…¨éªŒè¯**
```javascript
class DeviceSecurityChecker {
    // è®¾å¤‡å®‰å…¨æ£€æŸ¥
    async checkDeviceSecurity(deviceInfo) {
        const checks = {
            isRooted: await this.checkRootStatus(deviceInfo),
            hasValidCertificate: await this.checkAppCertificate(deviceInfo),
            isEmulator: await this.checkEmulator(deviceInfo),
            hasSecureStorage: await this.checkSecureStorage(deviceInfo)
        };
        
        // è®¡ç®—å®‰å…¨è¯„åˆ†
        const securityScore = this.calculateSecurityScore(checks);
        
        return {
            passed: securityScore >= 70, // 70åˆ†ä»¥ä¸Šç®—å®‰å…¨
            score: securityScore,
            details: checks
        };
    }
    
    // å¼‚å¸¸è®¾å¤‡æ£€æµ‹
    async detectAnomalousDevice(deviceInfo, userId) {
        const userDevices = await this.database.getUserDevices(userId);
        
        // æ£€æŸ¥è®¾å¤‡æ˜¯å¦å¼‚å¸¸
        const anomalies = [];
        
        // æ£€æŸ¥åœ°ç†ä½ç½®å¼‚å¸¸
        if (await this.isLocationAnomalous(deviceInfo, userDevices)) {
            anomalies.push('unusual_location');
        }
        
        // æ£€æŸ¥è®¾å¤‡å‹å·å¼‚å¸¸
        if (await this.isDeviceModelAnomalous(deviceInfo, userDevices)) {
            anomalies.push('unusual_device_model');
        }
        
        return anomalies;
    }
}
```

---

## 7. ğŸŒ è·¨å¹³å°å…¼å®¹æ€§


### 7.1 å¹³å°å·®å¼‚å¤„ç†


**ä¸»è¦å¹³å°æ¨é€å·®å¼‚**ï¼š

| å¹³å°ç‰¹æ€§ | **iOS (APNs)** | **Android (FCM)** | **å¤„ç†ç­–ç•¥** |
|---------|---------------|-------------------|-------------|
| ğŸ”” **æ¨é€æ–¹å¼** | `ç³»ç»Ÿçº§æ¨é€ï¼Œå¯é æ€§é«˜` | `ä¾èµ–GoogleæœåŠ¡ï¼Œå›½å†…å—é™` | `ä½¿ç”¨ç»Ÿä¸€æ¨é€æ¥å£` |
| ğŸ“± **æƒé™ç”³è¯·** | `é¦–æ¬¡å¯åŠ¨æ—¶ç”³è¯·` | `è‡ªåŠ¨è·å¾—æƒé™` | `ç»Ÿä¸€æƒé™æ£€æŸ¥æµç¨‹` |
| ğŸ¨ **æ¶ˆæ¯æ ·å¼** | `ç³»ç»ŸåŸç”Ÿæ ·å¼` | `è‡ªå®šä¹‰æ ·å¼ä¸°å¯Œ` | `è®¾è®¡é€šç”¨æ¶ˆæ¯æ ¼å¼` |
| âš™ï¸ **èƒŒæ™¯å¤„ç†** | `ä¸¥æ ¼é™åˆ¶` | `ç›¸å¯¹å®½æ¾` | `ä¼˜åŒ–åå°å¤„ç†é€»è¾‘` |

### 7.2 ç»Ÿä¸€æ¨é€æ¥å£è®¾è®¡


**ğŸ”§ è·¨å¹³å°æ¨é€ç»Ÿä¸€æ¥å£**
```javascript
class UniversalPushService {
    constructor() {
        this.apnsClient = new APNsClient(config.apns);
        this.fcmClient = new FCMClient(config.fcm);
        this.jpushClient = new JPushClient(config.jpush); // å›½å†…Androidå¤‡ç”¨
    }
    
    // ç»Ÿä¸€æ¨é€æ¥å£
    async sendPush(deviceInfo, message) {
        try {
            switch (deviceInfo.platform) {
                case 'ios':
                    return await this.sendAPNsPush(deviceInfo, message);
                case 'android':
                    // å›½å†…ä¼˜å…ˆä½¿ç”¨æå…‰æ¨é€
                    if (this.isChineseDevice(deviceInfo)) {
                        return await this.sendJPushMessage(deviceInfo, message);
                    } else {
                        return await this.sendFCMPush(deviceInfo, message);
                    }
                default:
                    throw new Error(`ä¸æ”¯æŒçš„å¹³å°: ${deviceInfo.platform}`);
            }
        } catch (error) {
            // æ¨é€å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ¡ˆ
            return await this.sendFallbackPush(deviceInfo, message);
        }
    }
    
    // iOSæ¨é€å®ç°
    async sendAPNsPush(deviceInfo, message) {
        const notification = {
            deviceToken: deviceInfo.token,
            payload: {
                aps: {
                    alert: {
                        title: message.title,
                        body: message.body
                    },
                    badge: 1,
                    sound: 'default'
                },
                customData: message.data
            }
        };
        
        return await this.apnsClient.send(notification);
    }
    
    // Android FCMæ¨é€å®ç°
    async sendFCMPush(deviceInfo, message) {
        const notification = {
            token: deviceInfo.token,
            notification: {
                title: message.title,
                body: message.body
            },
            data: message.data,
            android: {
                notification: {
                    clickAction: 'AUTH_ACTION',
                    channelId: 'auth_channel'
                }
            }
        };
        
        return await this.fcmClient.send(notification);
    }
}
```

### 7.3 æ¶ˆæ¯æ ¼å¼é€‚é…


**ğŸ“‹ è·¨å¹³å°æ¶ˆæ¯æ ¼å¼è½¬æ¢**
```javascript
class MessageAdapter {
    // å°†é€šç”¨æ¶ˆæ¯æ ¼å¼è½¬æ¢ä¸ºå¹³å°ç‰¹å®šæ ¼å¼
    adaptMessage(universalMessage, platform) {
        const baseMessage = {
            title: universalMessage.title,
            body: universalMessage.body,
            data: universalMessage.data
        };
        
        switch (platform) {
            case 'ios':
                return this.adaptForIOS(baseMessage);
            case 'android':
                return this.adaptForAndroid(baseMessage);
            default:
                return baseMessage;
        }
    }
    
    // iOSæ¶ˆæ¯é€‚é…
    adaptForIOS(message) {
        return {
            aps: {
                alert: {
                    title: message.title,
                    body: message.body
                },
                badge: 1,
                sound: 'default',
                category: 'AUTH_CATEGORY', // æ”¯æŒå¿«æ·æ“ä½œ
                'mutable-content': 1
            },
            customData: message.data
        };
    }
    
    // Androidæ¶ˆæ¯é€‚é…
    adaptForAndroid(message) {
        return {
            notification: {
                title: message.title,
                body: message.body,
                icon: 'ic_auth_notification',
                color: '#0066cc'
            },
            data: {
                ...message.data,
                click_action: 'AUTH_ACTION'
            },
            android: {
                priority: 'high',
                notification: {
                    channelId: 'auth_channel',
                    defaultSound: true,
                    defaultVibrateTimings: true
                }
            }
        };
    }
}
```

### 7.4 å¹³å°ç‰¹æ€§ä¼˜åŒ–


**ğŸ¯ iOSç‰¹æ€§ä¼˜åŒ–**
```javascript
class IOSOptimizer {
    // iOSæ¨é€ç±»åˆ«è®¾ç½®ï¼ˆæ”¯æŒå¿«æ·æ“ä½œï¼‰
    setupPushCategories() {
        const authCategory = {
            identifier: 'AUTH_CATEGORY',
            actions: [
                {
                    identifier: 'APPROVE_ACTION',
                    title: 'ç¡®è®¤ç™»å½•',
                    options: ['foreground'] // ç‚¹å‡»åæ‰“å¼€åº”ç”¨
                },
                {
                    identifier: 'DENY_ACTION',
                    title: 'æ‹’ç»',
                    options: ['destructive'] // çº¢è‰²æ˜¾ç¤º
                }
            ],
            intentIdentifiers: [],
            options: []
        };
        
        return [authCategory];
    }
    
    // å¤„ç†iOSæ¨é€æ“ä½œ
    handlePushAction(actionIdentifier, userInfo) {
        const requestId = userInfo.customData.requestId;
        
        switch (actionIdentifier) {
            case 'APPROVE_ACTION':
                return this.approveAuth(requestId);
            case 'DENY_ACTION':
                return this.denyAuth(requestId);
            default:
                // é»˜è®¤æ‰“å¼€åº”ç”¨
                return this.openApp(userInfo);
        }
    }
}
```

**ğŸ¤– Androidç‰¹æ€§ä¼˜åŒ–**
```javascript
class AndroidOptimizer {
    // Androidé€šçŸ¥æ¸ é“è®¾ç½®
    createNotificationChannels() {
        const channels = [
            {
                id: 'auth_channel',
                name: 'èº«ä»½è®¤è¯',
                description: 'ç™»å½•å’Œæ”¯ä»˜ç¡®è®¤é€šçŸ¥',
                importance: 'HIGH',
                enableVibration: true,
                enableLights: true,
                lightColor: '#0066cc'
            },
            {
                id: 'security_channel',
                name: 'å®‰å…¨è­¦å‘Š',
                description: 'å®‰å…¨ç›¸å…³çš„é‡è¦é€šçŸ¥',
                importance: 'MAX',
                enableVibration: true,
                vibrationPattern: [0, 250, 250, 250]
            }
        ];
        
        return channels;
    }
    
    // è‡ªå®šä¹‰é€šçŸ¥å¸ƒå±€
    createCustomNotificationLayout(message) {
        return {
            smallIcon: 'ic_security',
            largeIcon: 'ic_auth_large',
            color: '#0066cc',
            style: {
                type: 'BigTextStyle',
                bigText: message.body,
                summaryText: 'å®‰å…¨è®¤è¯'
            },
            actions: [
                {
                    title: 'ç¡®è®¤',
                    icon: 'ic_check',
                    pendingIntent: 'approve_action'
                },
                {
                    title: 'æ‹’ç»',
                    icon: 'ic_close',
                    pendingIntent: 'deny_action'
                }
            ]
        };
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ æ¨é€è®¤è¯æœ¬è´¨ï¼šé€šè¿‡æ‰‹æœºæ¨é€æ¶ˆæ¯éªŒè¯ç”¨æˆ·èº«ä»½çš„ä¾¿æ·æ–¹å¼
ğŸ”¸ å·¥ä½œåŸç†ï¼šç™»å½•è¯·æ±‚ â†’ æ¨é€é€šçŸ¥ â†’ ç”¨æˆ·ç¡®è®¤ â†’ è®¤è¯å®Œæˆ
ğŸ”¸ æ ¸å¿ƒä¼˜åŠ¿ï¼šä¾¿æ·å®‰å…¨ã€å®æ—¶å“åº”ã€ç”¨æˆ·ä½“éªŒä½³
ğŸ”¸ å…³é”®ç»„ä»¶ï¼šæ¨é€æœåŠ¡ã€æ¶ˆæ¯è®¾è®¡ã€ç¡®è®¤æœºåˆ¶ã€è®¾å¤‡ç®¡ç†
ğŸ”¸ å¹³å°å·®å¼‚ï¼šiOS/Androidæ¨é€æœºåˆ¶ä¸åŒï¼Œéœ€è¦é€‚é…å¤„ç†
```

### 8.2 å…³é”®å®ç°è¦ç‚¹


**ğŸ”¹ æ¨é€æœåŠ¡é›†æˆ**
```
æŠ€æœ¯é€‰æ‹©ï¼š
- iOS: APNså®˜æ–¹æœåŠ¡
- Androidæµ·å¤–: FCMè°·æ­ŒæœåŠ¡  
- Androidå›½å†…: æå…‰æ¨é€ç­‰ç¬¬ä¸‰æ–¹
- ç»Ÿä¸€æ¥å£: å°è£…å¹³å°å·®å¼‚

é›†æˆè¦ç‚¹ï¼š
- è¯ä¹¦é…ç½®æ­£ç¡®
- æƒé™ç”³è¯·å¤„ç†
- è®¾å¤‡Tokenç®¡ç†
- æ¶ˆæ¯æ ¼å¼é€‚é…
```

**ğŸ”¹ å®‰å…¨æ€§ä¿éšœ**
```
å¤šå±‚å®‰å…¨éªŒè¯ï¼š
- è®¾å¤‡ç»‘å®šéªŒè¯
- ç”Ÿç‰©è¯†åˆ«å¢å¼º
- æ¶ˆæ¯æ—¶æ•ˆæ§åˆ¶
- è®¾å¤‡å®‰å…¨æ£€æŸ¥

ç¦»çº¿åœºæ™¯å¤„ç†ï¼š
- è®¾å¤‡åœ¨çº¿æ£€æµ‹
- å¤šè®¾å¤‡å¤‡ç”¨æ–¹æ¡ˆ
- æ¶ˆæ¯æŒä¹…åŒ–å­˜å‚¨
- æ™ºèƒ½é‡è¯•æœºåˆ¶
```

**ğŸ”¹ ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
```
æ¶ˆæ¯è®¾è®¡åŸåˆ™ï¼š
- å†…å®¹ç®€æ´æ˜ç¡®
- å…³é”®ä¿¡æ¯çªå‡º
- æ“ä½œé€‰æ‹©æ¸…æ™°
- å¤šè¯­è¨€é€‚é…

ç¡®è®¤æœºåˆ¶ä¼˜åŒ–ï¼š
- ä¸€é”®å¼æ“ä½œ
- å¿«æ·å›å¤æ”¯æŒ
- è¶…æ—¶è‡ªåŠ¨å¤„ç†
- ç»“æœåŠæ—¶åé¦ˆ
```

### 8.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ é€‚ç”¨åœºæ™¯**
- **ä¼ä¸šå†…éƒ¨ç³»ç»Ÿ**ï¼šå‘˜å·¥ç™»å½•è®¤è¯ï¼Œå®‰å…¨å¯é 
- **é‡‘èåº”ç”¨**ï¼šæ”¯ä»˜ç¡®è®¤ï¼Œè½¬è´¦éªŒè¯
- **é«˜ä»·å€¼æ“ä½œ**ï¼šé‡è¦æ•°æ®è®¿é—®ï¼Œæƒé™å˜æ›´
- **å¤šè®¾å¤‡ç®¡ç†**ï¼šç»Ÿä¸€èº«ä»½è®¤è¯ï¼Œè®¾å¤‡ä¿¡ä»»ç®¡ç†

**ğŸ”§ æŠ€æœ¯é€‰å‹å»ºè®®**
- **å°å‹åº”ç”¨**ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨é€æœåŠ¡ï¼Œå¿«é€Ÿé›†æˆ
- **ä¼ä¸šçº§åº”ç”¨**ï¼šè€ƒè™‘è‡ªå»ºæ¨é€æœåŠ¡ï¼Œæ›´å¥½æ§åˆ¶
- **å›½é™…åŒ–åº”ç”¨**ï¼šå¤šæ¨é€å¹³å°æ”¯æŒï¼Œä¿è¯è¦†ç›–ç‡
- **å®‰å…¨æ•æ„Ÿåº”ç”¨**ï¼šå¢åŠ ç”Ÿç‰©è¯†åˆ«ï¼Œæé«˜å®‰å…¨ç­‰çº§

**æ ¸å¿ƒè®°å¿†**ï¼š
- æ¨é€è®¤è¯è®©ç™»å½•æ›´ä¾¿æ·å®‰å…¨
- å¹³å°å·®å¼‚éœ€è¦ç»Ÿä¸€é€‚é…å¤„ç†  
- ç¦»çº¿åœºæ™¯å¿…é¡»æœ‰å¤‡ç”¨é™çº§æ–¹æ¡ˆ
- ç”¨æˆ·ä½“éªŒå’Œå®‰å…¨æ€§éœ€è¦å¹³è¡¡è€ƒè™‘