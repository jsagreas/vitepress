---
title: 14ã€å¯è§‚æµ‹æ€§ä¸å®¡è®¡å®è·µ
---
## ğŸ“š ç›®å½•

1. [å¯è§‚æµ‹æ€§åŸºç¡€æ¦‚å¿µ](#1-å¯è§‚æµ‹æ€§åŸºç¡€æ¦‚å¿µ)
2. [å…³è”IDä¼ é€’æœºåˆ¶](#2-å…³è”IDä¼ é€’æœºåˆ¶)
3. [å…³é”®äº‹ä»¶æ—¥å¿—è®¾è®¡](#3-å…³é”®äº‹ä»¶æ—¥å¿—è®¾è®¡)
4. [æ ¸å¿ƒç›‘æ§æŒ‡æ ‡](#4-æ ¸å¿ƒç›‘æ§æŒ‡æ ‡)
5. [å‘Šè­¦æœºåˆ¶è®¾è®¡](#5-å‘Šè­¦æœºåˆ¶è®¾è®¡)
6. [éšç§ä¸åˆè§„æ—¥å¿—](#6-éšç§ä¸åˆè§„æ—¥å¿—)
7. [è®¤è¯é“¾è·¯å¯è§‚æµ‹æ€§](#7-è®¤è¯é“¾è·¯å¯è§‚æµ‹æ€§)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” å¯è§‚æµ‹æ€§åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¯è§‚æµ‹æ€§

**ç®€å•ç†è§£**ï¼šå¯è§‚æµ‹æ€§å°±åƒç»™ä½ çš„è®¤è¯ç³»ç»Ÿè£…ä¸Š"ç›‘æ§æ‘„åƒå¤´"ï¼Œè®©ä½ èƒ½éšæ—¶çŸ¥é“ç³»ç»Ÿå†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆã€‚

```
ä¼ ç»Ÿç›‘æ§ï¼šåªèƒ½çœ‹åˆ°"ç³»ç»Ÿå®•æœºäº†"
å¯è§‚æµ‹æ€§ï¼šèƒ½çœ‹åˆ°"ä¸ºä»€ä¹ˆå®•æœºã€å“ªé‡Œå‡ºé—®é¢˜ã€ç”¨æˆ·å—åˆ°ä»€ä¹ˆå½±å“"

å°±åƒçœ‹ç—…ï¼š
ä¼ ç»Ÿæ–¹å¼ï¼šåªçŸ¥é“ä½ å‘çƒ§äº†
å¯è§‚æµ‹æ€§ï¼šçŸ¥é“ä¸ºä»€ä¹ˆå‘çƒ§ã€ä»ä½•æ—¶å¼€å§‹ã€å½±å“äº†å“ªäº›å™¨å®˜
```

### 1.2 è®¤è¯ç³»ç»Ÿçš„å¯è§‚æµ‹æ€§æŒ‘æˆ˜

**ä¸ºä»€ä¹ˆè®¤è¯ç³»ç»Ÿç‰¹åˆ«éœ€è¦å¯è§‚æµ‹æ€§**ï¼š

ğŸ”¸ **å®‰å…¨æ•æ„Ÿæ€§**ï¼š
- ä»»ä½•å¼‚å¸¸éƒ½å¯èƒ½æ˜¯æ”»å‡»ä¿¡å·
- éœ€è¦å¿«é€Ÿå‘ç°å’Œå“åº”å®‰å…¨å¨èƒ
- ç”¨æˆ·ç™»å½•å¤±è´¥å¯èƒ½å½±å“ä¸šåŠ¡æ”¶å…¥

ğŸ”¸ **åˆ†å¸ƒå¼å¤æ‚æ€§**ï¼š
- è®¤è¯æµç¨‹è·¨è¶Šå¤šä¸ªæœåŠ¡
- éš¾ä»¥è¿½è¸ªå•æ¬¡è®¤è¯çš„å®Œæ•´é“¾è·¯
- æœåŠ¡é—´è°ƒç”¨å…³ç³»å¤æ‚

ğŸ”¸ **ç”¨æˆ·ä½“éªŒå½±å“**ï¼š
- è®¤è¯é—®é¢˜ç›´æ¥å½±å“ç”¨æˆ·ä½¿ç”¨
- éœ€è¦å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜

### 1.3 å¯è§‚æµ‹æ€§ä¸‰å¤§æ”¯æŸ±


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ—¥å¿— ğŸ“    â”‚  â”‚   æŒ‡æ ‡ ğŸ“Š    â”‚  â”‚   é“¾è·¯ ğŸ”—    â”‚
â”‚   Logs      â”‚  â”‚  Metrics    â”‚  â”‚  Traces     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚è®°å½•å‘ç”Ÿä»€ä¹ˆ  â”‚  â”‚æµ‹é‡ç³»ç»ŸçŠ¶æ€  â”‚  â”‚è¿½è¸ªè¯·æ±‚è·¯å¾„  â”‚
â”‚è¯¦ç»†äº‹ä»¶ä¿¡æ¯  â”‚  â”‚æ€§èƒ½å’Œè®¡æ•°å™¨  â”‚  â”‚æœåŠ¡é—´è°ƒç”¨    â”‚
â”‚ä¾¿äºé—®é¢˜å®šä½  â”‚  â”‚å®æ—¶ç›‘æ§å‘Šè­¦  â”‚  â”‚å»¶è¿Ÿåˆ†æ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ”— å…³è”IDä¼ é€’æœºåˆ¶


### 2.1 TraceID çš„ä½œç”¨

**é€šä¿—è§£é‡Š**ï¼šTraceIDå°±åƒå¿«é€’å•å·ï¼Œèƒ½è®©ä½ è¿½è¸ªä¸€ä¸ªè®¤è¯è¯·æ±‚åœ¨æ‰€æœ‰æœåŠ¡ä¸­çš„å®Œæ•´æ—…ç¨‹ã€‚

```
ç”¨æˆ·ç™»å½•è¯·æ±‚çš„TraceIDä¼ é€’ï¼š
ç”¨æˆ·æµè§ˆå™¨ â†’ ç½‘å…³ â†’ è®¤è¯æœåŠ¡ â†’ ç”¨æˆ·æœåŠ¡ â†’ æ•°æ®åº“
     â†“         â†“       â†“         â†“         â†“
TraceID: abc123-def456-ghi789ï¼ˆåŒä¸€ä¸ªIDè´¯ç©¿æ•´ä¸ªé“¾è·¯ï¼‰
```

### 2.2 SpanID çš„å«ä¹‰

**SpanID**ï¼šè¡¨ç¤ºæ•´ä¸ªè¯·æ±‚é“¾è·¯ä¸­çš„ä¸€ä¸ªå…·ä½“ç¯èŠ‚ï¼Œå°±åƒå¿«é€’è¿è¾“è¿‡ç¨‹ä¸­çš„æ¯ä¸ªä¸­è½¬ç«™ã€‚

```
ä¸€æ¬¡ç™»å½•è¯·æ±‚çš„Spanç»“æ„ï¼š

TraceID: abc123
â”œâ”€â”€ SpanID: span001 (ç½‘å…³æ¥æ”¶è¯·æ±‚)
â”œâ”€â”€ SpanID: span002 (è°ƒç”¨è®¤è¯æœåŠ¡)
â”‚   â”œâ”€â”€ SpanID: span003 (éªŒè¯ç”¨æˆ·åå¯†ç )
â”‚   â””â”€â”€ SpanID: span004 (ç”ŸæˆJWT token)
â””â”€â”€ SpanID: span005 (è¿”å›å“åº”ç»™ç”¨æˆ·)
```

### 2.3 ç”¨æˆ·ä¸Šä¸‹æ–‡ç»‘å®š

**å…³é”®ä¿¡æ¯ç»‘å®š**ï¼š

ğŸ”¸ **ç”¨æˆ·æ ‡è¯†ç»‘å®š**ï¼š
```javascript
// è¯·æ±‚å¤´ä¸­æºå¸¦å…³è”ä¿¡æ¯
{
  "X-Trace-ID": "abc123-def456",
  "X-User-ID": "user_12345",
  "X-Tenant-ID": "tenant_001",
  "X-Session-ID": "session_xyz789"
}
```

ğŸ”¸ **ä¸Šä¸‹æ–‡ä¼ é€’ç¤ºä¾‹**ï¼š
```javascript
// åœ¨æ¯ä¸ªæœåŠ¡ä¸­ä¼ é€’ä¸Šä¸‹æ–‡
class AuthContext {
  constructor(traceId, userId, tenantId) {
    this.traceId = traceId;
    this.userId = userId;
    this.tenantId = tenantId;
    this.timestamp = Date.now();
  }
  
  // ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæœåŠ¡
  toHeaders() {
    return {
      'X-Trace-ID': this.traceId,
      'X-User-ID': this.userId,
      'X-Tenant-ID': this.tenantId
    };
  }
}
```

### 2.4 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ é—®é¢˜å®šä½åœºæ™¯**ï¼š
```
ç”¨æˆ·åé¦ˆï¼šæˆ‘åˆšæ‰ç™»å½•å¤±è´¥äº†
è¿ç»´äººå‘˜ï¼šè¯·æä¾›å¤§æ¦‚æ—¶é—´
ç”¨æˆ·ï¼šä¸‹åˆ2:30å·¦å³

é€šè¿‡TraceIDæŸ¥è¯¢ï¼š
1. æ‰¾åˆ°è¯¥æ—¶é—´æ®µè¯¥ç”¨æˆ·çš„æ‰€æœ‰TraceID
2. å®šä½åˆ°å¤±è´¥çš„é‚£æ¬¡ç™»å½•è¯·æ±‚
3. è¿½è¸ªæ•´ä¸ªè®¤è¯é“¾è·¯
4. å¿«é€Ÿå®šä½é—®é¢˜åŸå› 
```

---

## 3. ğŸ“ å…³é”®äº‹ä»¶æ—¥å¿—è®¾è®¡


### 3.1 å¿…é¡»è®°å½•çš„å…³é”®äº‹ä»¶

**æ ¸å¿ƒäº‹ä»¶ç±»å‹**ï¼š

ğŸ”¸ **ç™»å½•äº‹ä»¶**ï¼š
```json
{
  "event": "user_login",
  "traceId": "abc123-def456",
  "timestamp": "2025-01-12T10:30:00Z",
  "userId": "user_12345",
  "username": "john.doe",
  "clientIP": "192.168.1.100",
  "userAgent": "Chrome/96.0",
  "result": "success",
  "loginMethod": "username_password"
}
```

ğŸ”¸ **ä»¤ç‰Œåˆ·æ–°äº‹ä»¶**ï¼š
```json
{
  "event": "token_refresh",
  "traceId": "def456-ghi789",
  "timestamp": "2025-01-12T11:00:00Z",
  "userId": "user_12345",
  "oldTokenId": "token_old_123",
  "newTokenId": "token_new_456",
  "result": "success"
}
```

### 3.2 å¤±è´¥äº‹ä»¶è¯¦ç»†è®°å½•


ğŸ”¸ **ç™»å½•å¤±è´¥**ï¼š
```json
{
  "event": "login_failed",
  "traceId": "ghi789-jkl012",
  "timestamp": "2025-01-12T10:35:00Z",
  "username": "john.doe",
  "clientIP": "192.168.1.100",
  "failureReason": "invalid_password",
  "attemptCount": 3,
  "isAccountLocked": false
}
```

ğŸ”¸ **ç­–ç•¥å‘½ä¸­äº‹ä»¶**ï¼š
```json
{
  "event": "security_policy_triggered",
  "traceId": "jkl012-mno345",
  "timestamp": "2025-01-12T10:40:00Z",
  "userId": "user_12345",
  "policyType": "rate_limit",
  "action": "temporary_block",
  "duration": "300s",
  "reason": "too_many_failed_attempts"
}
```

### 3.3 è®¿é—®æ‹’ç»äº‹ä»¶


ğŸ”¸ **æˆæƒæ‹’ç»**ï¼š
```json
{
  "event": "access_denied",
  "traceId": "mno345-pqr678",
  "timestamp": "2025-01-12T11:15:00Z",
  "userId": "user_12345",
  "resource": "/api/admin/users",
  "requiredPermission": "admin:users:read",
  "userRoles": ["user", "editor"],
  "denialReason": "insufficient_permissions"
}
```

### 3.4 æ—¥å¿—ç»“æ„åŒ–è®¾è®¡


**ğŸ—ï¸ ç»Ÿä¸€æ—¥å¿—æ ¼å¼**ï¼š
```json
{
  // åŸºç¡€ä¿¡æ¯
  "timestamp": "ISO8601æ ¼å¼æ—¶é—´",
  "level": "INFO|WARN|ERROR",
  "service": "auth-service",
  
  // å…³è”ä¿¡æ¯
  "traceId": "é“¾è·¯è¿½è¸ªID",
  "spanId": "å½“å‰æ“ä½œID",
  "userId": "ç”¨æˆ·IDï¼ˆå¦‚æœ‰ï¼‰",
  "sessionId": "ä¼šè¯IDï¼ˆå¦‚æœ‰ï¼‰",
  
  // äº‹ä»¶ä¿¡æ¯
  "event": "äº‹ä»¶ç±»å‹",
  "action": "å…·ä½“æ“ä½œ",
  "result": "success|failed|error",
  "message": "äººç±»å¯è¯»çš„æè¿°",
  
  // ä¸Šä¸‹æ–‡ä¿¡æ¯
  "clientIP": "å®¢æˆ·ç«¯IP",
  "userAgent": "ç”¨æˆ·ä»£ç†",
  "resource": "è®¿é—®èµ„æº",
  
  // æ‰©å±•ä¿¡æ¯
  "extra": {
    // äº‹ä»¶ç‰¹æœ‰çš„é¢å¤–ä¿¡æ¯
  }
}
```

---

## 4. ğŸ“Š æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


### 4.1 ç™»å½•æˆåŠŸç‡æŒ‡æ ‡


**ğŸ¯ æŒ‡æ ‡å®šä¹‰**ï¼š
```
ç™»å½•æˆåŠŸç‡ = æˆåŠŸç™»å½•æ¬¡æ•° / æ€»ç™»å½•å°è¯•æ¬¡æ•° Ã— 100%

æ­£å¸¸èŒƒå›´ï¼š> 95%
è­¦å‘Šé˜ˆå€¼ï¼š< 90%
ä¸¥é‡é˜ˆå€¼ï¼š< 80%
```

**ç›‘æ§ç»´åº¦**ï¼š
- **æŒ‰æ—¶é—´ç»´åº¦**ï¼šåˆ†é’Ÿçº§ã€å°æ—¶çº§ã€å¤©çº§ç»Ÿè®¡
- **æŒ‰ç”¨æˆ·ç»´åº¦**ï¼šæ–°ç”¨æˆ· vs è€ç”¨æˆ·æˆåŠŸç‡
- **æŒ‰ç™»å½•æ–¹å¼**ï¼šå¯†ç ç™»å½•ã€ç¤¾äº¤ç™»å½•ã€SSOç™»å½•
- **æŒ‰åœ°åŒºç»´åº¦**ï¼šä¸åŒåœ°åŒºçš„æˆåŠŸç‡å·®å¼‚

### 4.2 å»¶è¿Ÿç›¸å…³æŒ‡æ ‡


**ğŸš€ è®¤è¯å»¶è¿ŸæŒ‡æ ‡**ï¼š

| æŒ‡æ ‡åç§° | è®¡ç®—æ–¹å¼ | æ­£å¸¸èŒƒå›´ | å‘Šè­¦é˜ˆå€¼ |
|---------|---------|---------|---------|
| **ç™»å½•å“åº”æ—¶é—´** | ä»è¯·æ±‚åˆ°è¿”å›tokençš„æ—¶é—´ | < 200ms | > 1000ms |
| **ä»¤ç‰Œæ ¡éªŒæ—¶é—´** | JWTéªŒè¯çš„å¹³å‡è€—æ—¶ | < 50ms | > 200ms |
| **æƒé™æ£€æŸ¥æ—¶é—´** | RBACæƒé™éªŒè¯è€—æ—¶ | < 100ms | > 500ms |

**ğŸ“ˆ å»¶è¿Ÿåˆ†ä½æ•°ç›‘æ§**ï¼š
```
P50 å»¶è¿Ÿï¼š50%çš„è¯·æ±‚åœ¨è¿™ä¸ªæ—¶é—´å†…å®Œæˆ
P90 å»¶è¿Ÿï¼š90%çš„è¯·æ±‚åœ¨è¿™ä¸ªæ—¶é—´å†…å®Œæˆ  
P99 å»¶è¿Ÿï¼š99%çš„è¯·æ±‚åœ¨è¿™ä¸ªæ—¶é—´å†…å®Œæˆ

ç¤ºä¾‹ï¼š
ç™»å½•æ¥å£ P50: 150ms, P90: 300ms, P99: 800ms
```

### 4.3 ä»¤ç‰Œç›¸å…³æŒ‡æ ‡


ğŸ”¸ **ä»¤ç‰Œæ ¡éªŒå¤±è´¥ç‡**ï¼š
```
å¤±è´¥ç±»å‹ç»Ÿè®¡ï¼š
- è¿‡æœŸä»¤ç‰Œï¼š60%
- ç­¾åæ— æ•ˆï¼š25%  
- æ ¼å¼é”™è¯¯ï¼š10%
- å…¶ä»–é”™è¯¯ï¼š5%

æ€»å¤±è´¥ç‡ = å¤±è´¥éªŒè¯æ¬¡æ•° / æ€»éªŒè¯æ¬¡æ•°
```

ğŸ”¸ **ä»¤ç‰Œç”Ÿå‘½å‘¨æœŸæŒ‡æ ‡**ï¼š
```javascript
// ä»¤ç‰Œä½¿ç”¨æƒ…å†µç»Ÿè®¡
{
  "activeTokens": 15000,      // æ´»è·ƒä»¤ç‰Œæ•°
  "expiredTokens": 2000,      // è¿‡æœŸä»¤ç‰Œæ•°  
  "revokedTokens": 100,       // è¢«æ’¤é”€ä»¤ç‰Œæ•°
  "averageTokenAge": "45min", // å¹³å‡ä½¿ç”¨æ—¶é•¿
  "refreshRate": "80%"        // ä»¤ç‰Œåˆ·æ–°ç‡
}
```

### 4.4 ç½‘å…³è®¤è¯æŒ‡æ ‡


ğŸ”¸ **HTTPçŠ¶æ€ç åˆ†å¸ƒ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŠ¶æ€ç      â”‚     å«ä¹‰      â”‚   æ­£å¸¸æ¯”ä¾‹   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    200      â”‚   è®¤è¯æˆåŠŸ    â”‚    > 85%     â”‚
â”‚    401      â”‚   è®¤è¯å¤±è´¥    â”‚    < 10%     â”‚  
â”‚    403      â”‚   æƒé™ä¸è¶³    â”‚    < 3%      â”‚
â”‚    429      â”‚   è¯·æ±‚é™æµ    â”‚    < 1%      â”‚
â”‚    500      â”‚   æœåŠ¡é”™è¯¯    â”‚    < 1%      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ğŸš¨ å‘Šè­¦æœºåˆ¶è®¾è®¡


### 5.1 å¼‚å¸¸å¤±è´¥å³°å€¼å‘Šè­¦


**ğŸ”¥ å‘Šè­¦è§„åˆ™å®šä¹‰**ï¼š
```yaml
# ç™»å½•å¤±è´¥ç‡å‘Šè­¦
- name: "high_login_failure_rate"
  condition: "login_failure_rate > 20% for 5 minutes"
  severity: "critical"
  description: "ç™»å½•å¤±è´¥ç‡å¼‚å¸¸ï¼Œå¯èƒ½å­˜åœ¨æ”»å‡»"
  
- name: "login_failure_spike"  
  condition: "login_failures increase by 300% in 2 minutes"
  severity: "warning"
  description: "ç™»å½•å¤±è´¥æ•°é‡æ¿€å¢"
```

**ğŸ“Š å‘Šè­¦åˆ†çº§**ï¼š

| çº§åˆ« | å¤±è´¥ç‡é˜ˆå€¼ | å“åº”æ—¶é—´ | å¤„ç†æ–¹å¼ |
|------|-----------|---------|---------|
| **ğŸŸ¢ æ­£å¸¸** | < 5% | - | æ­£å¸¸ç›‘æ§ |
| **ğŸŸ¡ è­¦å‘Š** | 5-15% | 30åˆ†é’Ÿå†… | äººå·¥æ£€æŸ¥ |
| **ğŸŸ  ä¸¥é‡** | 15-30% | 10åˆ†é’Ÿå†… | ç«‹å³å¤„ç† |
| **ğŸ”´ ç´§æ€¥** | > 30% | 5åˆ†é’Ÿå†… | ç´§æ€¥å“åº” |

### 5.2 ç­¾åéªŒè¯é”™è¯¯å‘Šè­¦


ğŸ”¸ **JWTç­¾åå¼‚å¸¸**ï¼š
```javascript
// å‘Šè­¦è§¦å‘æ¡ä»¶
const alertConditions = {
  // ç­¾åéªŒè¯å¤±è´¥ç‡è¿‡é«˜
  signatureFailureRate: {
    threshold: "5%",
    window: "10 minutes",
    action: "immediate_alert"
  },
  
  // ä½¿ç”¨æœªçŸ¥å¯†é’¥ç­¾å
  unknownKeyUsage: {
    threshold: "1 occurrence", 
    window: "1 minute",
    action: "security_team_notify"
  }
};
```

### 5.3 JWKæ‹‰å–å¤±è´¥å‘Šè­¦


ğŸ”¸ **å¯†é’¥è·å–å¼‚å¸¸**ï¼š
```yaml
alerts:
  - name: "jwk_fetch_failure"
    condition: "jwk_fetch_success_rate < 95%"
    duration: "2 minutes"
    severity: "critical"
    message: "æ— æ³•è·å–JWTéªŒè¯å¯†é’¥ï¼Œè®¤è¯æœåŠ¡å—å½±å“"
    
  - name: "jwk_cache_miss_high"
    condition: "jwk_cache_miss_rate > 10%"  
    duration: "5 minutes"
    severity: "warning"
    message: "JWKç¼“å­˜å‘½ä¸­ç‡ä½ï¼Œæ€§èƒ½å—å½±å“"
```

### 5.4 å‘Šè­¦å¤„ç†æµç¨‹


**ğŸ”„ è‡ªåŠ¨åŒ–å“åº”æµç¨‹**ï¼š
```
å‘Šè­¦è§¦å‘
    â†“
è‡ªåŠ¨æ£€æŸ¥ â†’ æ˜¯å¦è¯¯æŠ¥ï¼Ÿ â†’ Yes â†’ è°ƒæ•´é˜ˆå€¼
    â†“              â†“ No
å‘é€é€šçŸ¥        ä¸¥é‡ç¨‹åº¦è¯„ä¼°
    â†“              â†“
è®°å½•äº‹ä»¶        è‡ªåŠ¨ä¿®å¤å°è¯•
    â†“              â†“
è·Ÿè¸ªå¤„ç†        äººå·¥ä»‹å…¥å¤„ç†
```

---

## 6. ğŸ”’ éšç§ä¸åˆè§„æ—¥å¿—


### 6.1 æœ€å°‘å¿…è¦åŸåˆ™


**ğŸ¯ ä»€ä¹ˆæ˜¯æœ€å°‘å¿…è¦**ï¼šåªè®°å½•è§£å†³é—®é¢˜å¿…é¡»çš„ä¿¡æ¯ï¼Œä¸è®°å½•å¤šä½™çš„æ•æ„Ÿæ•°æ®ã€‚

```
âŒ é”™è¯¯åšæ³•ï¼šè®°å½•è¿‡å¤šä¿¡æ¯
{
  "event": "login_attempt",
  "username": "john.doe", 
  "password": "123456",           // ç»ä¸è®°å½•å¯†ç 
  "email": "john@company.com",    // ä¸å¿…è¦çš„æ•æ„Ÿä¿¡æ¯
  "phone": "13800138000",         // ä¸å¿…è¦çš„ä¸ªäººä¿¡æ¯
  "idCard": "110101199001010001"  // ç»ä¸è®°å½•èº«ä»½è¯
}

âœ… æ­£ç¡®åšæ³•ï¼šè®°å½•å¿…è¦ä¿¡æ¯
{
  "event": "login_attempt",
  "userIdHash": "hash_of_user_id",  // ç”¨æˆ·IDå“ˆå¸Œ
  "usernamePrefix": "joh***",       // ç”¨æˆ·åå‰ç¼€
  "result": "failed",
  "failureReason": "invalid_password"
}
```

### 6.2 æ•°æ®è„±æ•ç­–ç•¥


ğŸ”¸ **å¸¸è§è„±æ•æ–¹æ³•**ï¼š

| æ•°æ®ç±»å‹ | è„±æ•æ–¹å¼ | ç¤ºä¾‹ |
|---------|---------|------|
| **é‚®ç®±** | ä¿ç•™å‰åï¼Œä¸­é—´æ˜Ÿå· | `j***@company.com` |
| **æ‰‹æœºå·** | ä¿ç•™å‰3å4ï¼Œä¸­é—´æ˜Ÿå· | `138****8000` |
| **IPåœ°å€** | ä¿ç•™å‰ä¸¤æ®µ | `192.168.*.*` |
| **ç”¨æˆ·ID** | ä½¿ç”¨å“ˆå¸Œå€¼ | `hash_abc123` |

ğŸ”¸ **è„±æ•å®ç°ç¤ºä¾‹**ï¼š
```javascript
class DataMasker {
  // é‚®ç®±è„±æ•
  static maskEmail(email) {
    const [name, domain] = email.split('@');
    const maskedName = name.charAt(0) + '***' + name.slice(-1);
    return `${maskedName}@${domain}`;
  }
  
  // ç”¨æˆ·IDå“ˆå¸Œ
  static hashUserId(userId) {
    return 'user_' + crypto.createHash('md5')
      .update(userId).digest('hex').substring(0, 8);
  }
}
```

### 6.3 æ—¥å¿—ä¿ç•™å‘¨æœŸ


**ğŸ“… ä¸åŒç±»å‹æ—¥å¿—çš„ä¿ç•™ç­–ç•¥**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ—¥å¿—ç±»å‹    â”‚   ä¿ç•™æœŸé™    â”‚    å­˜å‚¨ä½ç½®   â”‚   è®¿é—®æƒé™   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç™»å½•æˆåŠŸæ—¥å¿—  â”‚     90å¤©     â”‚   çƒ­å­˜å‚¨     â”‚   è¿ç»´å›¢é˜Ÿ   â”‚
â”‚  ç™»å½•å¤±è´¥æ—¥å¿—  â”‚    180å¤©     â”‚   çƒ­å­˜å‚¨     â”‚  å®‰å…¨å›¢é˜Ÿ    â”‚
â”‚  å®‰å…¨äº‹ä»¶æ—¥å¿—  â”‚     1å¹´      â”‚   å†·å­˜å‚¨     â”‚  å®‰å…¨ä¸“å‘˜    â”‚
â”‚  å®¡è®¡æ—¥å¿—     â”‚     7å¹´      â”‚  å½’æ¡£å­˜å‚¨    â”‚   åˆè§„å›¢é˜Ÿ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 åˆè§„è¦æ±‚å¤„ç†


ğŸ”¸ **GDPRåˆè§„è¦æ±‚**ï¼š
```javascript
// ç”¨æˆ·æ•°æ®åˆ é™¤è¯·æ±‚å¤„ç†
class GDPRCompliance {
  async deleteUserData(userId) {
    // 1. åˆ é™¤å¯è¯†åˆ«çš„ç”¨æˆ·ä¿¡æ¯
    await this.anonymizeUserLogs(userId);
    
    // 2. ä¿ç•™å¿…è¦çš„ç»Ÿè®¡ä¿¡æ¯  
    await this.retainAggregateData(userId);
    
    // 3. è®°å½•åˆ é™¤æ“ä½œ
    await this.logDataDeletion(userId);
  }
  
  async anonymizeUserLogs(userId) {
    // å°†ç”¨æˆ·ç›¸å…³æ—¥å¿—ä¸­çš„ä¸ªäººæ ‡è¯†æ›¿æ¢ä¸ºåŒ¿åID
    const anonymousId = this.generateAnonymousId();
    await logService.updateUserReferences(userId, anonymousId);
  }
}
```

---

## 7. ğŸ“ˆ è®¤è¯é“¾è·¯å¯è§‚æµ‹æ€§


### 7.1 å®Œæ•´é“¾è·¯è¿½è¸ª


**ğŸ”— è®¤è¯è¯·æ±‚çš„å®Œæ•´é“¾è·¯**ï¼š
```
ç”¨æˆ·è¯·æ±‚è®¤è¯é“¾è·¯ï¼š

å®¢æˆ·ç«¯åº”ç”¨ â†’ APIç½‘å…³ â†’ è®¤è¯æœåŠ¡ â†’ ç”¨æˆ·å­˜å‚¨ â†’ æƒé™æœåŠ¡
     â†“         â†“        â†“         â†“         â†“
   å‘èµ·è¯·æ±‚   è·¯ç”±è½¬å‘   éªŒè¯å‡­æ®   æŸ¥è¯¢ç”¨æˆ·   æ£€æŸ¥æƒé™
     â†“         â†“        â†“         â†“         â†“ 
   è®°å½•è¯·æ±‚   è®°å½•è·¯ç”±   è®°å½•éªŒè¯   è®°å½•æŸ¥è¯¢   è®°å½•æ£€æŸ¥
```

### 7.2 é“¾è·¯æ€§èƒ½ç›‘æ§


ğŸ”¸ **å„ç¯èŠ‚è€—æ—¶ç»Ÿè®¡**ï¼š
```javascript
// é“¾è·¯æ€§èƒ½åˆ†è§£
const authPerformanceBreakdown = {
  "totalTime": "450ms",
  "breakdown": {
    "network": "50ms",      // ç½‘ç»œä¼ è¾“
    "gateway": "30ms",      // ç½‘å…³å¤„ç†  
    "auth": "200ms",        // è®¤è¯éªŒè¯
    "database": "120ms",    // æ•°æ®åº“æŸ¥è¯¢
    "permission": "50ms"    // æƒé™æ£€æŸ¥
  },
  "bottleneck": "database" // æ€§èƒ½ç“¶é¢ˆè¯†åˆ«
};
```

### 7.3 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡


ğŸ”¸ **ä»ç”¨æˆ·è§’åº¦çš„æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡åç§° | å®šä¹‰ | ç›®æ ‡å€¼ | ä¸šåŠ¡å½±å“ |
|---------|-----|--------|---------|
| **é¦–æ¬¡ç™»å½•æ—¶é—´** | ç”¨æˆ·è¾“å…¥åˆ°ç™»å½•æˆåŠŸ | < 2ç§’ | ç”¨æˆ·ç•™å­˜ç‡ |
| **ä»¤ç‰Œåˆ·æ–°å»¶è¿Ÿ** | æ— æ„ŸçŸ¥ä»¤ç‰Œæ›´æ–°æ—¶é—´ | < 500ms | ç”¨æˆ·ä½“éªŒ |
| **ç™»å½•å¤±è´¥æ¢å¤** | å¤±è´¥åé‡è¯•æˆåŠŸæ—¶é—´ | < 10ç§’ | ç”¨æˆ·æ»¡æ„åº¦ |

### 7.4 å¼‚å¸¸æƒ…å†µå¯è§‚æµ‹


ğŸ”¸ **å¼‚å¸¸æ£€æµ‹ä¸å®šä½**ï¼š
```javascript
// å¼‚å¸¸æƒ…å†µç›‘æ§
const anomalyDetection = {
  // çªå‘çš„è®¤è¯å¤±è´¥
  authFailureSpike: {
    pattern: "normal: 100/min â†’ abnormal: 1000/min",
    possibleCauses: ["DDoSæ”»å‡»", "æœåŠ¡å¼‚å¸¸", "å¯†ç ç­–ç•¥å˜æ›´"],
    alertAction: "ç«‹å³é€šçŸ¥å®‰å…¨å›¢é˜Ÿ"
  },
  
  // è®¤è¯å»¶è¿Ÿå¼‚å¸¸
  authLatencySpike: {
    pattern: "normal: 200ms â†’ abnormal: 2000ms", 
    possibleCauses: ["æ•°æ®åº“æ…¢æŸ¥è¯¢", "ç½‘ç»œæ‹¥å¡", "æœåŠ¡è¿‡è½½"],
    alertAction: "è‡ªåŠ¨æ‰©å®¹å¹¶é€šçŸ¥è¿ç»´"
  }
};
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¯è§‚æµ‹æ€§æœ¬è´¨ï¼šè®©è®¤è¯ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€"é€æ˜å¯è§"
ğŸ”¸ TraceID/SpanIDï¼šè¿½è¸ªè®¤è¯è¯·æ±‚çš„å®Œæ•´é“¾è·¯
ğŸ”¸ å…³é”®äº‹ä»¶æ—¥å¿—ï¼šè®°å½•ç™»å½•ã€å¤±è´¥ã€æƒé™ç­‰é‡è¦æ“ä½œ  
ğŸ”¸ æ ¸å¿ƒæŒ‡æ ‡ç›‘æ§ï¼šæˆåŠŸç‡ã€å»¶è¿Ÿã€å¤±è´¥ç‡ç­‰å…³é”®æ•°æ®
ğŸ”¸ æ™ºèƒ½å‘Šè­¦ï¼šå¼‚å¸¸æƒ…å†µçš„åŠæ—¶å‘ç°å’Œå“åº”
ğŸ”¸ éšç§åˆè§„ï¼šåœ¨å¯è§‚æµ‹æ€§å’Œéšç§ä¿æŠ¤é—´æ‰¾åˆ°å¹³è¡¡
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦å¯è§‚æµ‹æ€§**ï¼š
```
ä¸šåŠ¡ä»·å€¼ï¼š
- å¿«é€Ÿå‘ç°å’Œè§£å†³è®¤è¯é—®é¢˜
- æå‡ç”¨æˆ·ç™»å½•ä½“éªŒ
- åŠæ—¶å‘ç°å®‰å…¨å¨èƒ
- æ»¡è¶³åˆè§„å®¡è®¡è¦æ±‚

æŠ€æœ¯ä»·å€¼ï¼š
- å‡†ç¡®å®šä½ç³»ç»Ÿç“¶é¢ˆ
- ä¼˜åŒ–è®¤è¯é“¾è·¯æ€§èƒ½
- é¢„é˜²æ•…éšœå‘ç”Ÿ
- æ”¯æŒå®¹é‡è§„åˆ’
```

**ğŸ”¹ æ—¥å¿—è®°å½•çš„å¹³è¡¡è‰ºæœ¯**ï¼š
```
è®°å½•å¤ªå°‘ï¼šé—®é¢˜éš¾ä»¥å®šä½ï¼Œå®‰å…¨å¨èƒå‘ç°ä¸åŠæ—¶
è®°å½•å¤ªå¤šï¼šå­˜å‚¨æˆæœ¬é«˜ï¼Œéšç§é£é™©å¤§ï¼Œæ€§èƒ½å½±å“

æœ€ä½³å®è·µï¼š
âœ… è®°å½•å…³é”®äº‹ä»¶å’Œå¼‚å¸¸æƒ…å†µ
âœ… å¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡Œè„±æ•å¤„ç†
âœ… æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®ä¿ç•™æœŸé™
âœ… å®æ–½åˆ†çº§è®¿é—®æ§åˆ¶
```

**ğŸ”¹ æŒ‡æ ‡è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™**ï¼š
```
SMARTåŸåˆ™ï¼š
- Specificï¼šå…·ä½“æ˜ç¡®çš„æŒ‡æ ‡å®šä¹‰
- Measurableï¼šå¯é‡åŒ–çš„æ•°å€¼
- Achievableï¼šå¯å®ç°çš„ç›®æ ‡å€¼
- Relevantï¼šä¸ä¸šåŠ¡ç›®æ ‡ç›¸å…³
- Time-boundï¼šæœ‰æ—¶é—´ç»´åº¦çš„ç›‘æ§
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è¿ç»´å®è·µä»·å€¼**ï¼š
- **æ•…éšœå®šä½**ï¼šé€šè¿‡TraceIDå¿«é€Ÿå®šä½é—®é¢˜æ ¹å› 
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåŸºäºæŒ‡æ ‡æ•°æ®ä¼˜åŒ–è®¤è¯æµç¨‹
- **å®¹é‡è§„åˆ’**ï¼šæ ¹æ®è¶‹åŠ¿æ•°æ®é¢„æµ‹èµ„æºéœ€æ±‚
- **å®‰å…¨é˜²æŠ¤**ï¼šåŠæ—¶å‘ç°å’Œå“åº”å®‰å…¨å¨èƒ

**ğŸ”§ å¼€å‘å®è·µä»·å€¼**ï¼š
- **é—®é¢˜æ’æŸ¥**ï¼šç»“æ„åŒ–æ—¥å¿—ä¾¿äºé—®é¢˜å®šä½
- **æ€§èƒ½è°ƒä¼˜**ï¼šç»†ç²’åº¦æŒ‡æ ‡æ”¯æŒæ€§èƒ½åˆ†æ
- **åŠŸèƒ½éªŒè¯**ï¼šé€šè¿‡æŒ‡æ ‡éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§
- **ç”¨æˆ·ä½“éªŒ**ï¼šä»ç”¨æˆ·è§’åº¦ç›‘æ§æœåŠ¡è´¨é‡

### 8.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ“Š ç›‘æ§ç­–ç•¥**ï¼š
```
åˆ†å±‚ç›‘æ§ï¼š
1. åŸºç¡€å±‚ï¼šæœåŠ¡å¯ç”¨æ€§ã€å“åº”æ—¶é—´
2. ä¸šåŠ¡å±‚ï¼šç™»å½•æˆåŠŸç‡ã€ç”¨æˆ·ä½“éªŒæŒ‡æ ‡  
3. å®‰å…¨å±‚ï¼šå¼‚å¸¸è¡Œä¸ºã€æ”»å‡»æ£€æµ‹

æ¸è¿›å¼å®æ–½ï¼š
1. å…ˆå»ºç«‹æ ¸å¿ƒæŒ‡æ ‡ç›‘æ§
2. å†å®Œå–„æ—¥å¿—å’Œé“¾è·¯è¿½è¸ª
3. æœ€åä¼˜åŒ–å‘Šè­¦å’Œè‡ªåŠ¨åŒ–
```

**ğŸ”’ å®‰å…¨ä¸åˆè§„**ï¼š
```
éšç§ä¿æŠ¤ï¼š
- æœ€å°åŒ–ä¸ªäººä¿¡æ¯æ”¶é›†
- å®æ–½æ•°æ®è„±æ•å’ŒåŠ å¯†
- å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®
- ä¸¥æ ¼æ§åˆ¶è®¿é—®æƒé™

åˆè§„ç®¡ç†ï¼š
- äº†è§£é€‚ç”¨çš„æ³•è§„è¦æ±‚
- å»ºç«‹åˆè§„æ£€æŸ¥æµç¨‹
- å®šæœŸè¿›è¡Œåˆè§„å®¡è®¡
- ä¿ç•™å¿…è¦çš„å®¡è®¡è¯æ®
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å¯è§‚æµ‹æ€§è®©è®¤è¯ç³»ç»Ÿè¿è¡Œé€æ˜åŒ–
- TraceIDè¿½è¸ªã€å…³é”®äº‹ä»¶è®°å½•ã€æ ¸å¿ƒæŒ‡æ ‡ç›‘æ§
- å¹³è¡¡å®‰å…¨éœ€æ±‚ä¸éšç§ä¿æŠ¤
- å‘Šè­¦æœºåˆ¶ç¡®ä¿åŠæ—¶å“åº”å¼‚å¸¸æƒ…å†µ