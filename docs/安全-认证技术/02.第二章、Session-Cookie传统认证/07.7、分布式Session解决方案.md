---
title: 7ã€åˆ†å¸ƒå¼Sessionè§£å†³æ–¹æ¡ˆ
---
## ğŸ“š ç›®å½•

1. [å•æœºSessionçš„å±€é™æ€§](#1-å•æœºsessionçš„å±€é™æ€§)
2. [åˆ†å¸ƒå¼Sessionæ ¸å¿ƒé—®é¢˜](#2-åˆ†å¸ƒå¼sessionæ ¸å¿ƒé—®é¢˜)
3. [ä¸»æµè§£å†³æ–¹æ¡ˆè¯¦è§£](#3-ä¸»æµè§£å†³æ–¹æ¡ˆè¯¦è§£)
4. [Rediså…±äº«Sessionå®ç°](#4-rediså…±äº«sessionå®ç°)
5. [è·¨åŸŸSessionå¤„ç†](#5-è·¨åŸŸsessionå¤„ç†)
6. [Sessioné«˜å¯ç”¨è®¾è®¡](#6-sessioné«˜å¯ç”¨è®¾è®¡)
7. [å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#7-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ  å•æœºSessionçš„å±€é™æ€§


### 1.1 ä»€ä¹ˆæ˜¯å•æœºSessionå­˜å‚¨


> ğŸ’¡ **é€šä¿—ç†è§£**: å°±åƒä½ åªåœ¨ä¸€ä¸ªæŸœå­é‡Œæ”¾ä¸œè¥¿ï¼Œå…¶ä»–åœ°æ–¹çš„æŸœå­éƒ½æ‰¾ä¸åˆ°

**å•æœºSession**å°±æ˜¯æŠŠç”¨æˆ·çš„ç™»å½•ä¿¡æ¯åªå­˜åœ¨ä¸€å°æœåŠ¡å™¨çš„å†…å­˜é‡Œï¼š

```
ç”¨æˆ·ç™»å½• â†’ æœåŠ¡å™¨A â†’ Sessionå­˜åœ¨Açš„å†…å­˜ä¸­
ä¸‹æ¬¡è¯·æ±‚ â†’ å¿…é¡»è®¿é—®æœåŠ¡å™¨A â†’ æ‰èƒ½æ‰¾åˆ°Session
```

### 1.2 å•æœºæ¨¡å¼çš„é—®é¢˜


**ğŸ”¸ æ ¸å¿ƒé—®é¢˜å±•ç¤º**

```
å•å°æœåŠ¡å™¨æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPè¯·æ±‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·æµè§ˆå™¨  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚   WebæœåŠ¡å™¨   â”‚
â”‚   (Cookie)   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  (Session)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    å“åº”       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†æ˜¯...
```

**âŒ å®é™…ç”Ÿäº§ç¯å¢ƒçš„é—®é¢˜**ï¼š

```
ğŸ”¸ æœåŠ¡å™¨å®•æœº â†’ Sessionå…¨éƒ¨ä¸¢å¤± â†’ æ‰€æœ‰ç”¨æˆ·æ‰çº¿
ğŸ”¸ æ€§èƒ½ç“¶é¢ˆ â†’ å•å°æœåŠ¡å™¨æ‰¿è½½æœ‰é™
ğŸ”¸ æ‰©å±•å›°éš¾ â†’ ä¸èƒ½æ°´å¹³æ‰©å±•
ğŸ”¸ ç»´æŠ¤é£é™© â†’ é‡å¯æœåŠ¡ = å…¨å‘˜æ‰çº¿
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦é›†ç¾¤


**ç°å®éœ€æ±‚**ï¼š
- ğŸ“ˆ **ç”¨æˆ·å¢é•¿**ï¼šå•å°æœåŠ¡å™¨å¤„ç†ä¸äº†
- ğŸ›¡ï¸ **é«˜å¯ç”¨**ï¼šä¸€å°æŒ‚äº†ï¼Œå…¶ä»–è¿˜èƒ½å·¥ä½œ  
- âš¡ **æ€§èƒ½æå‡**ï¼šå¤šå°æœåŠ¡å™¨åˆ†æ‹…å‹åŠ›
- ğŸ”„ **æ— æ„Ÿå‡çº§**ï¼šæ»šåŠ¨æ›´æ–°ä¸å½±å“ç”¨æˆ·

---

## 2. âš ï¸ åˆ†å¸ƒå¼Sessionæ ¸å¿ƒé—®é¢˜


### 2.1 Sessionä¸¢å¤±é—®é¢˜


**ğŸ”¸ é—®é¢˜åœºæ™¯è¿˜åŸ**

```
é›†ç¾¤ç¯å¢ƒä¸‹çš„å°´å°¬æƒ…å†µï¼š

ç¬¬1æ¬¡è¯·æ±‚ï¼š
ç”¨æˆ· â†’ è´Ÿè½½å‡è¡¡å™¨ â†’ æœåŠ¡å™¨A â†’ åˆ›å»ºSession â†’ å­˜åœ¨Açš„å†…å­˜

ç¬¬2æ¬¡è¯·æ±‚ï¼š  
ç”¨æˆ· â†’ è´Ÿè½½å‡è¡¡å™¨ â†’ æœåŠ¡å™¨B â†’ æ‰¾ä¸åˆ°Session â†’ è¦æ±‚é‡æ–°ç™»å½•ï¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·    â”‚    â”‚  è´Ÿè½½å‡è¡¡å™¨   â”‚    â”‚ æœåŠ¡å™¨A â”‚
â”‚ (æµè§ˆå™¨) â”‚â—„â”€â”€â–ºâ”‚   (éšæœºåˆ†å‘)  â”‚â—„â”€â”€â–ºâ”‚Sessionå­˜åœ¨â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ æœåŠ¡å™¨B â”‚
                                    â”‚Sessionæ— â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»“æœï¼šç”¨æˆ·æ˜æ˜åˆšç™»å½•ï¼Œå´è¢«è¦æ±‚é‡æ–°ç™»å½•ï¼
```

### 2.2 æ•°æ®ä¸€è‡´æ€§é—®é¢˜


**ğŸ”¸ Sessionä¸åŒæ­¥çš„åæœ**

```
åœºæ™¯ï¼šç”¨æˆ·è´­ç‰©è½¦
æœåŠ¡å™¨Aï¼šè´­ç‰©è½¦æœ‰3ä»¶å•†å“
æœåŠ¡å™¨Bï¼šè´­ç‰©è½¦æ˜¯ç©ºçš„
æœåŠ¡å™¨Cï¼šè´­ç‰©è½¦æœ‰1ä»¶å•†å“

ç”¨æˆ·ä½“éªŒï¼š
- åˆ·æ–°é¡µé¢ â†’ è´­ç‰©è½¦å•†å“å¿½å¤šå¿½å°‘
- ç»“ç®—æ—¶ â†’ å•†å“çªç„¶æ¶ˆå¤±
- ç”¨æˆ·æŠ•è¯‰ â†’ ç³»ç»Ÿä¸ç¨³å®š
```

### 2.3 è´Ÿè½½å‡è¡¡çš„çŸ›ç›¾


```
è´Ÿè½½å‡è¡¡çš„ç›®æ ‡ vs Sessionçš„éœ€æ±‚ï¼š

è´Ÿè½½å‡è¡¡ï¼šè¯·æ±‚å¹³å‡åˆ†å‘ï¼Œå……åˆ†åˆ©ç”¨æœåŠ¡å™¨
Sessionéœ€æ±‚ï¼šåŒä¸€ç”¨æˆ·çš„è¯·æ±‚è¦è®¿é—®åŒä¸€å°æœåŠ¡å™¨

è¿™å°±æ˜¯çŸ›ç›¾æ‰€åœ¨ï¼
```

---

## 3. ğŸ› ï¸ ä¸»æµè§£å†³æ–¹æ¡ˆè¯¦è§£


### 3.1 æ–¹æ¡ˆå¯¹æ¯”æ€»è§ˆ


| è§£å†³æ–¹æ¡ˆ | **å®ç°éš¾åº¦** | **æ€§èƒ½å½±å“** | **å¯é æ€§** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|------------|-----------|-------------|
| ğŸ”„ **ç²˜æ€§ä¼šè¯** | `ç®€å•` | `æ— å½±å“` | `è¾ƒä½` | `å°å‹åº”ç”¨` |
| ğŸ”„ **Sessionå¤åˆ¶** | `ä¸­ç­‰` | `å½±å“å¤§` | `ä¸­ç­‰` | `å°‘é‡æœåŠ¡å™¨` |
| ğŸ’¾ **é›†ä¸­å­˜å‚¨** | `ç®€å•` | `ç•¥æœ‰å½±å“` | `é«˜` | `å¤§å‹åº”ç”¨` |
| ğŸš« **æ— çŠ¶æ€åŒ–** | `å¤æ‚` | `æœ€ä½³` | `æœ€é«˜` | `å¾®æœåŠ¡æ¶æ„` |

### 3.2 ç²˜æ€§ä¼šè¯ (Sticky Session)


**ğŸ”¸ æ ¸å¿ƒæ€è·¯**ï¼šè®©åŒä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚æ€»æ˜¯è®¿é—®åŒä¸€å°æœåŠ¡å™¨

```
å®ç°æ–¹å¼ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·A   â”‚    â”‚  è´Ÿè½½å‡è¡¡å™¨   â”‚    â”‚ æœåŠ¡å™¨1 â”‚
â”‚ JSESSION â”‚â”€â”€â”€â–ºâ”‚  (è®°ä½æ˜ å°„)  â”‚â”€â”€â”€â–ºâ”‚Session-Aâ”‚
â”‚ ID=ABC   â”‚    â”‚ ABCâ†’æœåŠ¡å™¨1  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ DEFâ†’æœåŠ¡å™¨2  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ GHIâ†’æœåŠ¡å™¨3  â”‚    â”‚ æœåŠ¡å™¨2 â”‚
â”‚  ç”¨æˆ·B   â”‚    â”‚             â”‚â”€â”€â”€â–ºâ”‚Session-Bâ”‚
â”‚ JSESSION â”‚â”€â”€â”€â–ºâ”‚             â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ID=DEF   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚ æœåŠ¡å™¨3 â”‚
                                   â”‚Session-Câ”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âœ… ä¼˜ç‚¹**ï¼š
- å®ç°ç®€å•ï¼Œæ— éœ€ä¿®æ”¹åº”ç”¨ä»£ç 
- æ€§èƒ½å½±å“æœ€å°
- åŸæœ‰Sessionæœºåˆ¶å®Œå…¨ä¿ç•™

**âŒ ç¼ºç‚¹**ï¼š
- æœåŠ¡å™¨å®•æœº â†’ å¯¹åº”ç”¨æˆ·å…¨éƒ¨æ‰çº¿
- è´Ÿè½½å¯èƒ½ä¸å‡è¡¡
- æ‰©ç¼©å®¹å›°éš¾

### 3.3 Sessionå¤åˆ¶åŒæ­¥


**ğŸ”¸ æ ¸å¿ƒæ€è·¯**ï¼šæ¯å°æœåŠ¡å™¨éƒ½ä¿å­˜æ‰€æœ‰ç”¨æˆ·çš„Session

```
SessionåŒæ­¥æœºåˆ¶ï¼š

æœåŠ¡å™¨Aåˆ›å»ºSession â†’ åŒæ­¥åˆ°Bã€C
æœåŠ¡å™¨Bä¿®æ”¹Session â†’ åŒæ­¥åˆ°Aã€C  
æœåŠ¡å™¨Cåˆ é™¤Session â†’ åŒæ­¥åˆ°Aã€B

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœåŠ¡å™¨A  â”‚â—„â”€â”€â–ºâ”‚ æœåŠ¡å™¨B  â”‚â—„â”€â”€â–ºâ”‚ æœåŠ¡å™¨C  â”‚
â”‚Session-1â”‚    â”‚Session-1â”‚    â”‚Session-1â”‚
â”‚Session-2â”‚    â”‚Session-2â”‚    â”‚Session-2â”‚
â”‚Session-3â”‚    â”‚Session-3â”‚    â”‚Session-3â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä»»ä½•ä¸€å°æœåŠ¡å™¨éƒ½èƒ½å¤„ç†ä»»ä½•ç”¨æˆ·è¯·æ±‚
```

**âœ… ä¼˜ç‚¹**ï¼š
- é«˜å¯ç”¨æ€§ï¼Œä»»ä¸€æœåŠ¡å™¨å®•æœºä¸å½±å“
- è´Ÿè½½å‡è¡¡æ•ˆæœå¥½
- å¯¹åº”ç”¨é€æ˜

**âŒ ç¼ºç‚¹**ï¼š
- ç½‘ç»œå¼€é”€å·¨å¤§
- å†…å­˜æ¶ˆè€—æˆå€å¢é•¿
- åŒæ­¥å»¶è¿Ÿé—®é¢˜

### 3.4 é›†ä¸­å­˜å‚¨æ–¹æ¡ˆ


**ğŸ”¸ æ ¸å¿ƒæ€è·¯**ï¼šæŠŠSessionä»æœåŠ¡å™¨å†…å­˜ä¸­æ‹¿å‡ºæ¥ï¼Œæ”¾åˆ°ä¸“é—¨çš„å­˜å‚¨ç³»ç»Ÿ

```
é›†ä¸­å­˜å‚¨æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœåŠ¡å™¨A  â”‚    â”‚ æœåŠ¡å™¨B  â”‚    â”‚ æœåŠ¡å™¨C  â”‚
â”‚ æ— Sessionâ”‚    â”‚ æ— Sessionâ”‚    â”‚ æ— Sessionâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
              â”‚   Redis   â”‚ â† é›†ä¸­å­˜å‚¨æ‰€æœ‰Session
              â”‚ Session-1 â”‚
              â”‚ Session-2 â”‚
              â”‚ Session-3 â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰€æœ‰æœåŠ¡å™¨å…±äº«åŒä¸€ä¸ªSessionå­˜å‚¨
```

**å¸¸ç”¨å­˜å‚¨æ–¹æ¡ˆ**ï¼š
- ğŸ”¥ **Redis**ï¼šæ€§èƒ½æœ€å¥½ï¼Œæ”¯æŒè¿‡æœŸ
- ğŸ—„ï¸ **æ•°æ®åº“**ï¼šå¯é æ€§é«˜ï¼Œä½†æ€§èƒ½ä¸€èˆ¬
- ğŸ“ **åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ**ï¼šå¤§å®¹é‡ï¼Œä½†å¤æ‚

---

## 4. ğŸ’¾ Rediså…±äº«Sessionå®ç°


### 4.1 ä¸ºä»€ä¹ˆé€‰æ‹©Redis


**ğŸ”¸ Redisçš„ä¼˜åŠ¿**

```
å†…å­˜å­˜å‚¨ â†’ è¯»å†™é€Ÿåº¦å¿«
æ”¯æŒè¿‡æœŸ â†’ è‡ªåŠ¨æ¸…ç†Session  
æŒä¹…åŒ– â†’ é‡å¯ä¸ä¸¢æ•°æ®
é›†ç¾¤æ¨¡å¼ â†’ é«˜å¯ç”¨æ”¯æŒ
ä¸°å¯Œæ•°æ®ç»“æ„ â†’ çµæ´»å­˜å‚¨
```

### 4.2 Spring Booté›†æˆRedis Session


**ğŸ”§ åŸºç¡€é…ç½®**

```xml
<!-- 1. æ·»åŠ ä¾èµ– -->
<dependency>
    <groupId>org.springframework.session</groupId>
    <artifactId>spring-session-data-redis</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

```yaml
# 2. é…ç½®Redisè¿æ¥
spring:
  redis:
    host: localhost
    port: 6379
    password: yourpassword
    database: 0
    timeout: 2000ms
  session:
    store-type: redis
    timeout: 30m  # Sessionè¶…æ—¶æ—¶é—´
```

```java
// 3. å¯ç”¨Redis Session
@EnableRedisHttpSession(maxInactiveIntervalInSeconds = 1800)
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

### 4.3 Sessionæ•°æ®åºåˆ—åŒ–


**ğŸ”¸ é»˜è®¤åºåˆ—åŒ–é—®é¢˜**

```java
// é—®é¢˜ï¼šé»˜è®¤ä½¿ç”¨JDKåºåˆ—åŒ–ï¼Œå¯è¯»æ€§å·®
// Redisä¸­çœ‹åˆ°çš„æ˜¯è¿™æ ·ï¼š
\xac\xed\x00\x05sr\x00\x11java.lang.Integer\x12\xe2\xa0\xa4\xf7\x81\x87\x38\x02...

// è§£å†³ï¼šè‡ªå®šä¹‰åºåˆ—åŒ–
@Configuration
public class RedisConfig {
    
    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(factory);
        
        // ä½¿ç”¨JSONåºåˆ—åŒ–
        Jackson2JsonRedisSerializer<Object> serializer = 
            new Jackson2JsonRedisSerializer<>(Object.class);
        
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(serializer);
        template.setHashKeySerializer(new StringRedisSerializer());
        template.setHashValueSerializer(serializer);
        
        return template;
    }
}
```

### 4.4 Sessionå­˜å‚¨ç»“æ„


**ğŸ”¸ Redisä¸­çš„Sessionæ•°æ®ç»“æ„**

```
Redis Keyå‘½åè§„åˆ™ï¼š
spring:session:sessions:{sessionId}
spring:session:expirations:{timestamp}
spring:session:index:principal:{username}

Sessionæ•°æ®ç¤ºä¾‹ï¼š
Key: spring:session:sessions:a1b2c3d4-e5f6-7890-abcd-ef1234567890
Value: {
  "creationTime": 1633024800000,
  "lastAccessedTime": 1633028400000,
  "maxInactiveInterval": 1800,
  "attributes": {
    "user": {
      "id": 123,
      "username": "john",
      "role": "admin"
    },
    "cart": ["item1", "item2"]
  }
}
```

### 4.5 å®é™…ä½¿ç”¨ç¤ºä¾‹


```java
@Controller
public class UserController {
    
    // ç™»å½• - Sessionä¼šè‡ªåŠ¨å­˜å‚¨åˆ°Redis
    @PostMapping("/login")
    public String login(@RequestParam String username,
                       @RequestParam String password,
                       HttpServletRequest request) {
        
        // éªŒè¯ç”¨æˆ·
        User user = userService.authenticate(username, password);
        if (user != null) {
            // å­˜å‚¨åˆ°Sessionï¼ˆå®é™…å­˜å‚¨åˆ°Redisï¼‰
            HttpSession session = request.getSession();
            session.setAttribute("user", user);
            session.setAttribute("loginTime", new Date());
            
            return "redirect:/dashboard";
        }
        return "login";
    }
    
    // è·å–ç”¨æˆ·ä¿¡æ¯ - ä»Redisä¸­è¯»å–
    @GetMapping("/profile")
    public String profile(HttpServletRequest request, Model model) {
        HttpSession session = request.getSession();
        User user = (User) session.getAttribute("user");
        
        if (user != null) {
            model.addAttribute("user", user);
            return "profile";
        }
        return "redirect:/login";
    }
    
    // ç™»å‡º - ä»Redisä¸­åˆ é™¤
    @PostMapping("/logout")
    public String logout(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        if (session != null) {
            session.invalidate(); // Redisä¸­å¯¹åº”æ•°æ®è¢«åˆ é™¤
        }
        return "redirect:/login";
    }
}
```

---

## 5. ğŸŒ è·¨åŸŸSessionå¤„ç†


### 5.1 è·¨åŸŸé—®é¢˜çš„æœ¬è´¨


**ğŸ”¸ ä»€ä¹ˆæ˜¯è·¨åŸŸSessioné—®é¢˜**

> ğŸ’¡ **é€šä¿—ç†è§£**: å°±åƒä½ çš„ä¼šå‘˜å¡åœ¨Aå•†åœºèƒ½ç”¨ï¼Œä½†åœ¨Bå•†åœºä¸è®¤

```
åœºæ™¯ç¤ºä¾‹ï¼š
ä¸»ç«™ï¼šwww.example.com     (ç”¨æˆ·åœ¨è¿™é‡Œç™»å½•)
APIç«™ï¼šapi.example.com    (å‰ç«¯è¦è°ƒç”¨è¿™é‡Œçš„æ¥å£)
ç§»åŠ¨ç«™ï¼šm.example.com     (æ‰‹æœºç‰ˆç½‘ç«™)

é—®é¢˜ï¼šç”¨æˆ·åœ¨ä¸»ç«™ç™»å½•åï¼Œè®¿é—®å…¶ä»–å­åŸŸåæ—¶Sessionä¸¢å¤±
```

### 5.2 CookieåŸŸè®¾ç½®


**ğŸ”¸ è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®CookieåŸŸ**

```java
@Configuration
public class SessionConfig {
    
    @Bean
    public CookieSerializer cookieSerializer() {
        DefaultCookieSerializer serializer = new DefaultCookieSerializer();
        
        // è®¾ç½®CookieåŸŸï¼Œæ”¯æŒå­åŸŸåå…±äº«
        serializer.setDomainName(".example.com");
        
        // è®¾ç½®Cookieè·¯å¾„
        serializer.setCookiePath("/");
        
        // è®¾ç½®Cookieåç§°
        serializer.setCookieName("JSESSIONID");
        
        // HTTPSç¯å¢ƒä¸‹è®¾ç½®
        serializer.setUseSecureCookie(true);
        
        // é˜²æ­¢XSSæ”»å‡»
        serializer.setUseHttpOnlyCookie(true);
        
        // SameSiteè®¾ç½®
        serializer.setSameSite("Lax");
        
        return serializer;
    }
}
```

### 5.3 è·¨åŸŸè¯·æ±‚å¤„ç†


**ğŸ”¸ å‰ç«¯è·¨åŸŸè¯·æ±‚é…ç½®**

```javascript
// AJAXè¯·æ±‚æ—¶æºå¸¦Cookie
$.ajaxSetup({
    xhrFields: {
        withCredentials: true  // é‡è¦ï¼šæºå¸¦Cookie
    }
});

// æˆ–è€…åœ¨å…·ä½“è¯·æ±‚ä¸­è®¾ç½®
fetch('https://api.example.com/user/info', {
    method: 'GET',
    credentials: 'include',  // æºå¸¦Cookie
    headers: {
        'Content-Type': 'application/json'
    }
});
```

**ğŸ”¸ åç«¯CORSé…ç½®**

```java
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOriginPatterns("https://*.example.com")
                .allowedMethods("GET", "POST", "PUT", "DELETE")
                .allowedHeaders("*")
                .allowCredentials(true);  // é‡è¦ï¼šå…è®¸æºå¸¦Cookie
    }
}
```

### 5.4 å•ç‚¹ç™»å½•å®ç°


**ğŸ”¸ ç®€å•çš„åŸŸå†…SSO**

```java
@Component
public class SSOService {
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    // ç”ŸæˆSSO Token
    public String createSSOToken(User user) {
        String token = UUID.randomUUID().toString();
        String key = "sso:token:" + token;
        
        // å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œè®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´
        redisTemplate.opsForValue().set(key, user, 5, TimeUnit.MINUTES);
        
        return token;
    }
    
    // éªŒè¯SSO Tokenå¹¶åˆ›å»ºSession
    public User validateSSOToken(String token) {
        String key = "sso:token:" + token;
        User user = (User) redisTemplate.opsForValue().get(key);
        
        if (user != null) {
            // åˆ é™¤ä¸€æ¬¡æ€§Token
            redisTemplate.delete(key);
        }
        
        return user;
    }
}

// SSOç™»å½•æ§åˆ¶å™¨
@Controller
public class SSOController {
    
    @Autowired
    private SSOService ssoService;
    
    // ä¸»ç«™ç™»å½•åè·³è½¬
    @GetMapping("/sso/login")
    public String ssoLogin(HttpSession session, 
                          @RequestParam String redirectUrl) {
        User user = (User) session.getAttribute("user");
        if (user != null) {
            String token = ssoService.createSSOToken(user);
            return "redirect:" + redirectUrl + "?sso_token=" + token;
        }
        return "redirect:/login";
    }
    
    // å­ç«™æ¥æ”¶SSO Token
    @GetMapping("/sso/callback")
    public String ssoCallback(@RequestParam String sso_token,
                             HttpSession session) {
        User user = ssoService.validateSSOToken(sso_token);
        if (user != null) {
            session.setAttribute("user", user);
            return "redirect:/dashboard";
        }
        return "redirect:/login";
    }
}
```

---

## 6. ğŸ—ï¸ Sessioné«˜å¯ç”¨è®¾è®¡


### 6.1 Redisé›†ç¾¤é…ç½®


**ğŸ”¸ ä¸»ä»å¤åˆ¶æ¨¡å¼**

```yaml
# ä¸»ä»é…ç½®ç¤ºä¾‹
spring:
  redis:
    cluster:
      nodes:
        - 192.168.1.100:6379  # ä¸»èŠ‚ç‚¹
        - 192.168.1.101:6379  # ä»èŠ‚ç‚¹1
        - 192.168.1.102:6379  # ä»èŠ‚ç‚¹2
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5
```

**ğŸ”¸ å“¨å…µæ¨¡å¼é…ç½®**

```yaml
spring:
  redis:
    sentinel:
      master: mymaster
      nodes:
        - 192.168.1.100:26379
        - 192.168.1.101:26379  
        - 192.168.1.102:26379
    timeout: 2000ms
```

### 6.2 Sessionæ•°æ®å¤‡ä»½ç­–ç•¥


**ğŸ”¸ å¤šçº§ç¼“å­˜è®¾è®¡**

```java
@Service
public class SessionService {
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    @Autowired
    private RedisTemplate<String, Object> backupRedisTemplate;
    
    // å†™å…¥Sessionæ—¶åŒæ—¶å¤‡ä»½
    public void saveSession(String sessionId, SessionData data) {
        String key = "session:" + sessionId;
        
        try {
            // ä¸»å­˜å‚¨
            redisTemplate.opsForValue().set(key, data, 30, TimeUnit.MINUTES);
            
            // å¤‡ä»½å­˜å‚¨ï¼ˆå¼‚æ­¥ï¼‰
            CompletableFuture.runAsync(() -> {
                try {
                    backupRedisTemplate.opsForValue().set(key, data, 30, TimeUnit.MINUTES);
                } catch (Exception e) {
                    log.warn("Session backup failed for: " + sessionId, e);
                }
            });
            
        } catch (Exception e) {
            log.error("Session save failed: " + sessionId, e);
            throw new SessionException("Sessionä¿å­˜å¤±è´¥");
        }
    }
    
    // è¯»å–Sessionæ—¶çš„å®¹é”™æœºåˆ¶
    public SessionData getSession(String sessionId) {
        String key = "session:" + sessionId;
        
        try {
            // ä»ä¸»å­˜å‚¨è¯»å–
            SessionData data = (SessionData) redisTemplate.opsForValue().get(key);
            if (data != null) {
                return data;
            }
            
            // ä¸»å­˜å‚¨å¤±è´¥ï¼Œå°è¯•å¤‡ä»½å­˜å‚¨
            log.warn("Main session storage miss, trying backup for: " + sessionId);
            return (SessionData) backupRedisTemplate.opsForValue().get(key);
            
        } catch (Exception e) {
            log.error("Session read failed: " + sessionId, e);
            return null;
        }
    }
}
```

### 6.3 Sessionè¿‡æœŸæ¸…ç†æœºåˆ¶


**ğŸ”¸ è‡ªåŠ¨è¿‡æœŸé…ç½®**

```java
@Configuration
public class SessionCleanupConfig {
    
    @Bean
    @ConditionalOnProperty(name = "session.cleanup.enabled", havingValue = "true")
    public TaskScheduler sessionCleanupScheduler() {
        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();
        scheduler.setPoolSize(2);
        scheduler.setThreadNamePrefix("session-cleanup-");
        scheduler.initialize();
        return scheduler;
    }
    
    // å®šæœŸæ¸…ç†è¿‡æœŸSession
    @Scheduled(fixedRate = 300000) // 5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    public void cleanupExpiredSessions() {
        try {
            String pattern = "spring:session:sessions:*";
            Set<String> keys = redisTemplate.keys(pattern);
            
            if (keys != null && !keys.isEmpty()) {
                List<String> expiredKeys = new ArrayList<>();
                
                for (String key : keys) {
                    Long ttl = redisTemplate.getExpire(key);
                    if (ttl != null && ttl <= 0) {
                        expiredKeys.add(key);
                    }
                }
                
                if (!expiredKeys.isEmpty()) {
                    redisTemplate.delete(expiredKeys);
                    log.info("Cleaned up {} expired sessions", expiredKeys.size());
                }
            }
            
        } catch (Exception e) {
            log.error("Session cleanup failed", e);
        }
    }
}
```

### 6.4 è´Ÿè½½å‡è¡¡ä¸ç²˜æ€§ä¼šè¯ç»“åˆ


**ğŸ”¸ æ™ºèƒ½è´Ÿè½½å‡è¡¡**

```nginx
# Nginxé…ç½®ç¤ºä¾‹
upstream backend {
    ip_hash;  # åŸºäºIPçš„ç²˜æ€§ä¼šè¯
    
    server 192.168.1.100:8080 weight=3 max_fails=2 fail_timeout=30s;
    server 192.168.1.101:8080 weight=3 max_fails=2 fail_timeout=30s;
    server 192.168.1.102:8080 weight=2 max_fails=2 fail_timeout=30s backup;
}

server {
    listen 80;
    server_name example.com;
    
    location / {
        proxy_pass http://backend;
        
        # Sessionç›¸å…³Header
        proxy_set_header Cookie $http_cookie;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        
        # è¿æ¥ä¿æŒ
        proxy_connect_timeout 5s;
        proxy_send_timeout 10s;
        proxy_read_timeout 10s;
    }
}
```

---

## 7. â— å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


### 7.1 ç™»å½•æ€å¤±æ•ˆé—®é¢˜


**ğŸ”¸ é—®é¢˜è¡¨ç°**

```
ç”¨æˆ·åé¦ˆï¼š
"æˆ‘åˆšç™»å½•äº†ï¼Œæ€ä¹ˆåˆè¦æˆ‘é‡æ–°ç™»å½•ï¼Ÿ"
"è´­ç‰©è½¦é‡Œçš„å•†å“æ€ä¹ˆæ²¡äº†ï¼Ÿ"
"æˆ‘çš„æ“ä½œè¿›åº¦ä¸¢å¤±äº†ï¼"
```

**ğŸ”¸ å¸¸è§åŸå› åˆ†æ**

| åŸå›  | **è¡¨ç°** | **è§£å†³æ–¹æ¡ˆ** |
|------|---------|-------------|
| ğŸ• **Sessionè¶…æ—¶** | `30åˆ†é’Ÿåè‡ªåŠ¨å¤±æ•ˆ` | `å»¶é•¿è¶…æ—¶æ—¶é—´æˆ–æ´»åŠ¨æ£€æµ‹` |
| ğŸ”„ **æœåŠ¡å™¨é‡å¯** | `çªç„¶æ‰çº¿` | `ä½¿ç”¨Rediså­˜å‚¨` |
| ğŸŒ **è·¨åŸŸé—®é¢˜** | `å­åŸŸåæ— æ³•è®¿é—®` | `è®¾ç½®CookieåŸŸ` |
| âš–ï¸ **è´Ÿè½½å‡è¡¡** | `éšæœºæ‰çº¿` | `ä½¿ç”¨å…±äº«å­˜å‚¨` |
| ğŸ”’ **Cookieè®¾ç½®** | `æ— æ³•ä¿å­˜çŠ¶æ€` | `æ£€æŸ¥Cookieé…ç½®` |

**ğŸ”¸ è¯Šæ–­å·¥å…·**

```java
@RestController
public class SessionDiagnosticController {
    
    @GetMapping("/session/info")
    public Map<String, Object> getSessionInfo(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        Map<String, Object> info = new HashMap<>();
        
        if (session != null) {
            info.put("sessionId", session.getId());
            info.put("creationTime", new Date(session.getCreationTime()));
            info.put("lastAccessTime", new Date(session.getLastAccessedTime()));
            info.put("maxInactiveInterval", session.getMaxInactiveInterval());
            info.put("isNew", session.isNew());
            
            // åˆ—å‡ºæ‰€æœ‰å±æ€§
            Enumeration<String> attributeNames = session.getAttributeNames();
            Map<String, Object> attributes = new HashMap<>();
            while (attributeNames.hasMoreElements()) {
                String name = attributeNames.nextElement();
                attributes.put(name, session.getAttribute(name));
            }
            info.put("attributes", attributes);
        } else {
            info.put("error", "No session found");
        }
        
        return info;
    }
}
```

### 7.2 Sessionæ•°æ®ä¸¢å¤±


**ğŸ”¸ æ•°æ®åºåˆ—åŒ–é—®é¢˜**

```java
// é”™è¯¯ï¼šå­˜å‚¨ä¸å¯åºåˆ—åŒ–å¯¹è±¡
session.setAttribute("connection", new DatabaseConnection()); // âŒ

// æ­£ç¡®ï¼šå­˜å‚¨å¯åºåˆ—åŒ–çš„æ•°æ®
session.setAttribute("userId", user.getId()); // âœ…
session.setAttribute("userInfo", new UserDTO(user)); // âœ…
```

**ğŸ”¸ Redisè¿æ¥è¶…æ—¶**

```yaml
# ä¼˜åŒ–Redisè¿æ¥é…ç½®
spring:
  redis:
    timeout: 3000ms
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5
        max-wait: 3000ms
    # è¿æ¥è¶…æ—¶é‡è¯•
    connect-timeout: 3000ms
```

### 7.3 æ€§èƒ½ä¼˜åŒ–


**ğŸ”¸ Sessionæ•°æ®æœ€å°åŒ–**

```java
// ä¸å¥½çš„åšæ³•ï¼šå­˜å‚¨å¤§é‡æ•°æ®
session.setAttribute("fullUserObject", complexUserObject); // âŒ
session.setAttribute("userHistory", largeHistoryList); // âŒ

// å¥½çš„åšæ³•ï¼šåªå­˜å‚¨å¿…è¦ä¿¡æ¯
session.setAttribute("userId", user.getId()); // âœ…
session.setAttribute("username", user.getUsername()); // âœ…
session.setAttribute("role", user.getRole()); // âœ…

// éœ€è¦æ—¶å†ä»æ•°æ®åº“åŠ è½½è¯¦ç»†ä¿¡æ¯
public User getCurrentUser(HttpSession session) {
    Long userId = (Long) session.getAttribute("userId");
    return userId != null ? userService.findById(userId) : null;
}
```

**ğŸ”¸ Redisè¿æ¥æ± ä¼˜åŒ–**

```java
@Configuration
public class RedisPerformanceConfig {
    
    @Bean
    public LettuceConnectionFactory redisConnectionFactory() {
        // è¿æ¥æ± é…ç½®
        GenericObjectPoolConfig<StatefulRedisConnection<String, String>> poolConfig = 
            new GenericObjectPoolConfig<>();
        poolConfig.setMaxTotal(50);          // æœ€å¤§è¿æ¥æ•°
        poolConfig.setMaxIdle(20);           // æœ€å¤§ç©ºé—²è¿æ¥
        poolConfig.setMinIdle(10);           // æœ€å°ç©ºé—²è¿æ¥
        poolConfig.setTestOnBorrow(true);    // è·å–è¿æ¥æ—¶æµ‹è¯•
        poolConfig.setTestWhileIdle(true);   // ç©ºé—²æ—¶æµ‹è¯•è¿æ¥
        
        // Lettuceè¿æ¥é…ç½®
        LettuceClientConfiguration clientConfig = LettuceClientConfiguration.builder()
                .poolConfig(poolConfig)
                .commandTimeout(Duration.ofSeconds(2))
                .build();
        
        // Redisè¿æ¥é…ç½®
        RedisStandaloneConfiguration serverConfig = new RedisStandaloneConfiguration();
        serverConfig.setHostName("localhost");
        serverConfig.setPort(6379);
        serverConfig.setDatabase(0);
        
        return new LettuceConnectionFactory(serverConfig, clientConfig);
    }
}
```

### 7.4 ç›‘æ§ä¸å‘Šè­¦


**ğŸ”¸ SessionçŠ¶æ€ç›‘æ§**

```java
@Component
public class SessionMonitor {
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    @Autowired
    private MeterRegistry meterRegistry;
    
    // ç›‘æ§Sessionæ•°é‡
    @Scheduled(fixedRate = 60000) // æ¯åˆ†é’Ÿæ‰§è¡Œ
    public void monitorSessionCount() {
        try {
            Set<String> sessionKeys = redisTemplate.keys("spring:session:sessions:*");
            int activeSessionCount = sessionKeys != null ? sessionKeys.size() : 0;
            
            // è®°å½•æŒ‡æ ‡
            Gauge.builder("session.active.count")
                 .description("Active session count")
                 .register(meterRegistry, activeSessionCount);
            
            // å‘Šè­¦é€»è¾‘
            if (activeSessionCount > 10000) {
                log.warn("High session count detected: {}", activeSessionCount);
                // å‘é€å‘Šè­¦é€šçŸ¥
                alertService.sendAlert("Session count exceeds threshold: " + activeSessionCount);
            }
            
        } catch (Exception e) {
            log.error("Session monitoring failed", e);
        }
    }
    
    // ç›‘æ§Sessionè¿‡æœŸæƒ…å†µ
    @EventListener
    public void handleSessionExpired(SessionExpiredEvent event) {
        log.info("Session expired: {}", event.getSessionId());
        
        // è®°å½•è¿‡æœŸæŒ‡æ ‡
        Counter.builder("session.expired.count")
               .description("Expired session count")
               .register(meterRegistry)
               .increment();
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ åˆ†å¸ƒå¼Sessioné—®é¢˜ï¼šé›†ç¾¤ç¯å¢ƒä¸‹Sessionä¸å…±äº«
ğŸ”¸ è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼šç²˜æ€§ä¼šè¯ã€å¤åˆ¶åŒæ­¥ã€é›†ä¸­å­˜å‚¨ã€æ— çŠ¶æ€åŒ–
ğŸ”¸ Rediså…±äº«å­˜å‚¨ï¼šæ€§èƒ½æœ€ä¼˜çš„ä¸»æµè§£å†³æ–¹æ¡ˆ
ğŸ”¸ è·¨åŸŸSessionï¼šCookieåŸŸè®¾ç½®å’ŒCORSé…ç½®
ğŸ”¸ é«˜å¯ç”¨è®¾è®¡ï¼šé›†ç¾¤ã€å¤‡ä»½ã€ç›‘æ§
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆRedisæ˜¯æœ€ä½³é€‰æ‹©**
```
æ€§èƒ½ä¼˜åŠ¿ï¼š
â€¢ å†…å­˜å­˜å‚¨ï¼Œè¯»å†™é€Ÿåº¦å¿«
â€¢ æ”¯æŒæ•°æ®ç»“æ„ï¼Œçµæ´»å­˜å‚¨
â€¢ åŸç”Ÿè¿‡æœŸæœºåˆ¶ï¼Œè‡ªåŠ¨æ¸…ç†

å¯é æ€§ä¿è¯ï¼š
â€¢ æŒä¹…åŒ–å­˜å‚¨ï¼Œé‡å¯ä¸ä¸¢æ•°æ®
â€¢ ä¸»ä»å¤åˆ¶ï¼Œæ•…éšœè‡ªåŠ¨åˆ‡æ¢
â€¢ é›†ç¾¤æ¨¡å¼ï¼Œæ°´å¹³æ‰©å±•

ç”Ÿæ€æˆç†Ÿï¼š
â€¢ Spring Sessionå®Œç¾é›†æˆ
â€¢ ç›‘æ§å·¥å…·ä¸°å¯Œ
â€¢ ç¤¾åŒºæ”¯æŒå®Œå–„
```

**ğŸ”¹ è·¨åŸŸSessionçš„æ ¸å¿ƒ**
```
ç†è§£è¦ç‚¹ï¼š
â€¢ CookieåŸŸè®¾ç½®æ˜¯å…³é”®
â€¢ CORSé…ç½®è¦å…è®¸å‡­è¯
â€¢ å‰ç«¯è¯·æ±‚å¿…é¡»æºå¸¦Cookie
â€¢ å®‰å…¨è®¾ç½®è¦æ°å½“å¹³è¡¡
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
```
æ•°æ®å±‚é¢ï¼š
â€¢ Sessionæ•°æ®æœ€å°åŒ–
â€¢ é¿å…å­˜å‚¨å¤§å¯¹è±¡
â€¢ åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´

è¿æ¥å±‚é¢ï¼š
â€¢ è¿æ¥æ± å‚æ•°è°ƒä¼˜
â€¢ è¶…æ—¶æ—¶é—´è®¾ç½®
â€¢ é‡è¯•æœºåˆ¶é…ç½®

ç›‘æ§å±‚é¢ï¼š
â€¢ å®æ—¶ç›‘æ§Sessionæ•°é‡
â€¢ æ€§èƒ½æŒ‡æ ‡æ”¶é›†
â€¢ å¼‚å¸¸æƒ…å†µå‘Šè­¦
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†ç³»ç»Ÿ**ï¼šè´­ç‰©è½¦çŠ¶æ€ã€ç”¨æˆ·ç™»å½•ä¿æŒ
- **ä¼ä¸šåº”ç”¨**ï¼šå‘˜å·¥æƒé™ã€æ“ä½œè®°å½•ä¿æŒ
- **åœ¨çº¿æ•™è‚²**ï¼šå­¦ä¹ è¿›åº¦ã€è€ƒè¯•çŠ¶æ€ä¿æŒ
- **é‡‘èç³»ç»Ÿ**ï¼šäº¤æ˜“ä¼šè¯ã€é£æ§çŠ¶æ€ç®¡ç†

**ğŸ”§ æŠ€æœ¯å®è·µ**
- **æ¶æ„é€‰æ‹©**ï¼šæ ¹æ®ä¸šåŠ¡è§„æ¨¡é€‰æ‹©åˆé€‚æ–¹æ¡ˆ
- **æ€§èƒ½è°ƒä¼˜**ï¼šåŸºäºç›‘æ§æ•°æ®ä¼˜åŒ–é…ç½®
- **æ•…éšœå¤„ç†**ï¼šå»ºç«‹å®Œå–„çš„å®¹é”™å’Œæ¢å¤æœºåˆ¶
- **å®‰å…¨é˜²æŠ¤**ï¼šé˜²æ­¢SessionåŠ«æŒå’Œä¼ªé€ 

**æ ¸å¿ƒè®°å¿†**ï¼š
- åˆ†å¸ƒå¼ç¯å¢ƒSessionå…±äº«æ˜¯åˆšéœ€
- Redisé›†ä¸­å­˜å‚¨æ˜¯ä¸»æµæœ€ä½³å®è·µ
- è·¨åŸŸé—®é¢˜é€šè¿‡CookieåŸŸè®¾ç½®è§£å†³
- é«˜å¯ç”¨éœ€è¦å®Œå–„çš„ç›‘æ§å’Œå®¹é”™æœºåˆ¶
- æ€§èƒ½ä¼˜åŒ–è¦ä»æ•°æ®ã€è¿æ¥ã€ç›‘æ§å¤šç»´åº¦è€ƒè™‘