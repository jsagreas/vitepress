---
title: 10ã€ä¸»æµIdPæä¾›å•†å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [IdPæä¾›å•†åŸºæœ¬æ¦‚å¿µ](#1-IdPæä¾›å•†åŸºæœ¬æ¦‚å¿µ)
2. [Google Identity Platformå®æˆ˜](#2-Google-Identity-Platformå®æˆ˜)
3. [Microsoft Identity Platformå®æˆ˜](#3-Microsoft-Identity-Platformå®æˆ˜)
4. [Auth0å•†ä¸šå¹³å°é…ç½®](#4-Auth0å•†ä¸šå¹³å°é…ç½®)
5. [Keycloakå¼€æºæ–¹æ¡ˆ](#5-Keycloakå¼€æºæ–¹æ¡ˆ)
6. [Oktaä¼ä¸šçº§é›†æˆ](#6-Oktaä¼ä¸šçº§é›†æˆ)
7. [å„å¹³å°å·®å¼‚å¯¹æ¯”](#7-å„å¹³å°å·®å¼‚å¯¹æ¯”)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¢ IdPæä¾›å•†åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯IdPæä¾›å•†


**ğŸ’¡ é€šä¿—ç†è§£**ï¼šIdPï¼ˆIdentity Providerï¼‰å°±æ˜¯"èº«ä»½è¯æ˜æœºæ„"
```
ç°å®ä¸–ç•Œç±»æ¯”ï¼š
å…¬å®‰å±€ = IdPæä¾›å•†  
èº«ä»½è¯ = èº«ä»½ä»¤ç‰Œ
å„ç§åŠäº‹å¤§å… = åº”ç”¨ç³»ç»Ÿ

ä½ æ‹¿ç€èº«ä»½è¯å»é“¶è¡Œå¼€æˆ·ï¼Œé“¶è¡Œç›¸ä¿¡å…¬å®‰å±€å¼€çš„èº«ä»½è¯
ä½ çš„åº”ç”¨ä¿¡ä»»Google/å¾®è½¯ç­‰å¤§å‚å¼€å…·çš„èº«ä»½è¯æ˜
```

**ğŸ”‘ æ ¸å¿ƒä½œç”¨**
- **èº«ä»½éªŒè¯**ï¼šç¡®è®¤"ä½ æ˜¯è°"
- **ä¿¡æ¯æä¾›**ï¼šå‘Šè¯‰åº”ç”¨"ä½ çš„åŸºæœ¬ä¿¡æ¯"
- **æˆæƒç®¡ç†**ï¼šå†³å®š"ä½ èƒ½åšä»€ä¹ˆ"

### 1.2 ä¸»æµIdPæä¾›å•†åˆ†ç±»


```
ğŸ“Š æŒ‰ç±»å‹åˆ†ç±»ï¼š

ğŸŒ äº’è”ç½‘å·¨å¤´å‹ï¼š
â€¢ Google Identity Platform
â€¢ Microsoft Identity Platform  
â€¢ Facebook Login
â€¢ Apple Sign In

ğŸ¢ ä¼ä¸šæœåŠ¡å‹ï¼š
â€¢ Auth0 (å•†ä¸š)
â€¢ Okta (ä¼ä¸šçº§)
â€¢ AWS Cognito

ğŸ› ï¸ å¼€æºè‡ªå»ºå‹ï¼š
â€¢ Keycloak
â€¢ IdentityServer
â€¢ Ory
```

### 1.3 é€‰æ‹©IdPçš„è€ƒè™‘å› ç´ 


| å› ç´  | **è¯´æ˜** | **å½±å“** |
|------|---------|----------|
| ğŸ¯ **ç”¨æˆ·ç¾¤ä½“** | `ç›®æ ‡ç”¨æˆ·ä¸»è¦ä½¿ç”¨ä»€ä¹ˆè´¦å·` | `Googleé€‚åˆä¸ªäººç”¨æˆ·ï¼ŒAzureé€‚åˆä¼ä¸šç”¨æˆ·` |
| ğŸ’° **æˆæœ¬è€ƒè™‘** | `å…è´¹é¢åº¦å’Œæ”¶è´¹æ ‡å‡†` | `å¼€æºæ–¹æ¡ˆvså•†ä¸šæ–¹æ¡ˆçš„æˆæœ¬å¯¹æ¯”` |
| ğŸ”’ **å®‰å…¨ç­‰çº§** | `ä¼ä¸šå®‰å…¨è¦æ±‚å’Œåˆè§„éœ€æ±‚` | `é‡‘èè¡Œä¸šéœ€è¦æ›´ä¸¥æ ¼çš„å®‰å…¨æ ‡å‡†` |
| ğŸ› ï¸ **æŠ€æœ¯éš¾åº¦** | `å¼€å‘å’Œç»´æŠ¤çš„å¤æ‚åº¦` | `è‡ªå»ºæ–¹æ¡ˆéœ€è¦æ›´å¤šæŠ€æœ¯æŠ•å…¥` |

---

## 2. ğŸŒ Google Identity Platformå®æˆ˜


### 2.1 Google Cloud Consoleé…ç½®


**ğŸ“‹ é…ç½®æ­¥éª¤**
1. **åˆ›å»ºé¡¹ç›®**
   ```
   ç™»å½• console.cloud.google.com
   â†’ æ–°å»ºé¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
   â†’ è®°å½•é¡¹ç›®ID
   ```

2. **å¯ç”¨API**
   ```
   å¯¼èˆªæ  â†’ APIs & Services â†’ Library
   â†’ æœç´¢ "Google+ API" æˆ– "People API"
   â†’ ç‚¹å‡»å¯ç”¨
   ```

3. **åˆ›å»ºOAuthå®¢æˆ·ç«¯**
   ```
   APIs & Services â†’ Credentials
   â†’ Create Credentials â†’ OAuth client ID
   â†’ é€‰æ‹©åº”ç”¨ç±»å‹ï¼ˆWeb applicationï¼‰
   â†’ é…ç½®é‡å®šå‘URI
   ```

**âš ï¸ é‡è¦é…ç½®é¡¹**
```javascript
// åŸºæœ¬é…ç½®ç¤ºä¾‹
const googleConfig = {
  clientId: "your-client-id.googleusercontent.com",
  clientSecret: "your-client-secret",
  redirectUri: "https://yourapp.com/callback/google",
  scope: "openid email profile"
}
```

### 2.2 Gmailç”¨æˆ·ä¿¡æ¯è·å–


**ğŸ“§ è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯**
```javascript
// è·å–ç”¨æˆ·ä¿¡æ¯çš„ç®€å•ç¤ºä¾‹
async function getGoogleUserInfo(accessToken) {
  const response = await fetch('https://www.googleapis.com/oauth2/v2/userinfo', {
    headers: {
      'Authorization': `Bearer ${accessToken}`
    }
  });
  
  const userInfo = await response.json();
  console.log('ç”¨æˆ·ä¿¡æ¯:', userInfo);
  // è¿”å›: { id, email, name, picture, verified_email }
}
```

**ğŸ’¡ è·å–åˆ°çš„ä¿¡æ¯åŒ…å«**
- `id`: Googleç”¨æˆ·å”¯ä¸€æ ‡è¯†
- `email`: ç”¨æˆ·é‚®ç®±ï¼ˆå·²éªŒè¯ï¼‰
- `name`: ç”¨æˆ·æ˜¾ç¤ºåç§°
- `picture`: å¤´åƒURL
- `verified_email`: é‚®ç®±æ˜¯å¦å·²éªŒè¯

### 2.3 Googleç‰¹æœ‰çš„scopeå’Œclaims


**ğŸ¯ å¸¸ç”¨scopeæƒé™**
```javascript
const googleScopes = {
  // åŸºç¡€èº«ä»½ä¿¡æ¯
  'openid': 'è·å–OpenID Connectèº«ä»½ä»¤ç‰Œ',
  'email': 'è·å–ç”¨æˆ·é‚®ç®±åœ°å€',
  'profile': 'è·å–åŸºæœ¬æ¡£æ¡ˆä¿¡æ¯',
  
  // æ‰©å±•æƒé™
  'https://www.googleapis.com/auth/userinfo.email': 'è¯»å–é‚®ç®±',
  'https://www.googleapis.com/auth/userinfo.profile': 'è¯»å–æ¡£æ¡ˆ',
  'https://www.googleapis.com/auth/calendar': 'è®¿é—®æ—¥å†'
}
```

**ğŸ“‹ JWT Claimsè§£æ**
```javascript
// Googleè¿”å›çš„ID Tokenå…¸å‹ç»“æ„
const googleIdToken = {
  "iss": "https://accounts.google.com",        // ç­¾å‘è€…
  "sub": "110169484474386276334",              // ç”¨æˆ·å”¯ä¸€ID
  "aud": "your-client-id.googleusercontent.com", // åº”ç”¨ID
  "email": "user@gmail.com",                   // ç”¨æˆ·é‚®ç®±
  "email_verified": true,                      // é‚®ç®±å·²éªŒè¯
  "name": "å¼ ä¸‰",                             // ç”¨æˆ·å§“å
  "picture": "https://photo.url",              // å¤´åƒURL
  "given_name": "ä¸‰",                         // åå­—
  "family_name": "å¼ ",                        // å§“æ°
  "locale": "zh-CN"                           // è¯­è¨€ç¯å¢ƒ
}
```

---

## 3. ğŸ¢ Microsoft Identity Platformå®æˆ˜


### 3.1 Azure ADåº”ç”¨æ³¨å†Œ


**ğŸ“ æ³¨å†Œæ­¥éª¤**
1. **ç™»å½•Azureé—¨æˆ·**
   ```
   è®¿é—® portal.azure.com
   â†’ Azure Active Directory
   â†’ App registrations
   â†’ New registration
   ```

2. **é…ç½®åº”ç”¨åŸºæœ¬ä¿¡æ¯**
   ```
   åº”ç”¨åç§°: å¡«å†™åº”ç”¨åç§°
   æ”¯æŒçš„è´¦æˆ·ç±»å‹: 
   â€¢ ä»…æ­¤ç»„ç»‡ç›®å½•ä¸­çš„è´¦æˆ·ï¼ˆä¼ä¸šå†…éƒ¨ï¼‰
   â€¢ ä»»ä½•ç»„ç»‡ç›®å½•ä¸­çš„è´¦æˆ·ï¼ˆä¼ä¸šé—´ï¼‰  
   â€¢ ä»»ä½•ç»„ç»‡ç›®å½•ä¸­çš„è´¦æˆ·å’Œä¸ªäººMicrosoftè´¦æˆ·ï¼ˆæœ€å¹¿æ³›ï¼‰
   ```

3. **é…ç½®é‡å®šå‘URI**
   ```
   å¹³å°: Web
   é‡å®šå‘URI: https://yourapp.com/callback/microsoft
   ```

**ğŸ”‘ è·å–å…³é”®ä¿¡æ¯**
```javascript
const microsoftConfig = {
  clientId: "application-id",           // åº”ç”¨ç¨‹åºID
  clientSecret: "client-secret",        // å®¢æˆ·ç«¯å¯†é’¥
  tenantId: "tenant-id",               // ç§Ÿæˆ·ID
  redirectUri: "https://yourapp.com/callback/microsoft"
}
```

### 3.2 å·¥ä½œ/å­¦æ ¡è´¦æˆ·é›†æˆ


**ğŸ« ä¼ä¸šè´¦æˆ·ç‰¹ç‚¹**
```
ä¸ªäººMicrosoftè´¦æˆ· vs å·¥ä½œ/å­¦æ ¡è´¦æˆ·:

ä¸ªäººè´¦æˆ·(@outlook.com, @hotmail.com):
â€¢ ä¸ªäººæ³¨å†Œçš„Microsoftè´¦æˆ·
â€¢ æƒé™ç›¸å¯¹ç®€å•
â€¢ ä¸»è¦ç”¨äºä¸ªäººæœåŠ¡

å·¥ä½œ/å­¦æ ¡è´¦æˆ·(@company.com):  
â€¢ ä¼ä¸šAzure ADç®¡ç†çš„è´¦æˆ·
â€¢ æƒé™ç”±ITç®¡ç†å‘˜æ§åˆ¶
â€¢ å¯ä»¥è®¿é—®ä¼ä¸šèµ„æº
```

**ğŸ’¼ ä¼ä¸šé›†æˆé…ç½®**
```javascript
// é’ˆå¯¹ä¼ä¸šè´¦æˆ·çš„ç‰¹æ®Šé…ç½®
const enterpriseConfig = {
  authority: `https://login.microsoftonline.com/${tenantId}`,
  clientId: "your-client-id",
  scopes: [
    "openid",
    "profile", 
    "email",
    "User.Read",           // è¯»å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
    "Group.Read.All"       // è¯»å–ç”¨æˆ·ç»„ä¿¡æ¯ï¼ˆéœ€è¦ç®¡ç†å‘˜åŒæ„ï¼‰
  ]
}
```

**ğŸ“Š è·å–ä¼ä¸šç”¨æˆ·ä¿¡æ¯**
```javascript
// ä¼ä¸šç”¨æˆ·ä¿¡æ¯é€šå¸¸åŒ…å«æ›´å¤šå­—æ®µ
const enterpriseUserInfo = {
  "displayName": "å¼ ä¸‰",
  "userPrincipalName": "zhangsan@company.com",
  "mail": "zhangsan@company.com", 
  "jobTitle": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
  "department": "æŠ€æœ¯éƒ¨",
  "companyName": "æŸæŸå…¬å¸",
  "groups": ["å¼€å‘ç»„", "é¡¹ç›®Aç»„"]    // ç”¨æˆ·æ‰€å±ç»„
}
```

---

## 4. ğŸ› ï¸ Auth0å•†ä¸šå¹³å°é…ç½®


### 4.1 ç§Ÿæˆ·é…ç½®å’Œå®šåˆ¶


**ğŸ¢ ä»€ä¹ˆæ˜¯Auth0ç§Ÿæˆ·**
```
é€šä¿—ç†è§£ï¼š
ç§Ÿæˆ· = ä½ çš„èº«ä»½è®¤è¯"å°åŒº"
æ¯ä¸ªç§Ÿæˆ·æœ‰ç‹¬ç«‹çš„ï¼š
â€¢ ç”¨æˆ·æ•°æ®åº“
â€¢ é…ç½®è®¾ç½®  
â€¢ åŸŸååœ°å€
â€¢ è®¡è´¹è´¦å•
```

**âš™ï¸ åŸºç¡€ç§Ÿæˆ·é…ç½®**
1. **åˆ›å»ºAuth0è´¦å·**
   ```
   è®¿é—® auth0.com â†’ æ³¨å†Œè´¦å·
   é€‰æ‹©åŒºåŸŸï¼šUS/EU/AUï¼ˆå½±å“æ•°æ®å­˜å‚¨ä½ç½®ï¼‰
   ç§Ÿæˆ·åŸŸåï¼šyour-tenant.auth0.com
   ```

2. **åˆ›å»ºApplication**
   ```
   Dashboard â†’ Applications â†’ Create Application
   é€‰æ‹©ç±»å‹ï¼š
   â€¢ Single Page Web Applications (SPA)
   â€¢ Regular Web Applications  
   â€¢ Machine to Machine Applications
   ```

**ğŸ¨ ç•Œé¢å®šåˆ¶é…ç½®**
```javascript
// Auth0å¯ä»¥æ·±åº¦å®šåˆ¶ç™»å½•ç•Œé¢
const auth0Config = {
  domain: 'your-tenant.auth0.com',
  clientId: 'your-client-id',
  
  // è‡ªå®šä¹‰ä¸»é¢˜
  theme: {
    logo: 'https://yoursite.com/logo.png',
    primaryColor: '#0074D9',
    backgroundColor: '#ffffff'
  },
  
  // è‡ªå®šä¹‰æ–‡æœ¬
  languageDictionary: {
    title: "ç™»å½•åˆ°æˆ‘ä»¬çš„åº”ç”¨",
    loginLabel: "ç”¨æˆ·åæˆ–é‚®ç®±",
    passwordInputPlaceholder: "è¯·è¾“å…¥å¯†ç "
  }
}
```

### 4.2 ç¤¾äº¤ç™»å½•æä¾›å•†é›†æˆ


**ğŸ”— æ”¯æŒçš„ç¤¾äº¤ç™»å½•**
```
å¸¸è§ç¤¾äº¤ç™»å½•æä¾›å•†ï¼š
âœ… Google
âœ… Facebook  
âœ… GitHub
âœ… LinkedIn
âœ… Twitter
âœ… å¾®ä¿¡
âœ… QQ
âœ… å¾®åš
```

**âš™ï¸ é…ç½®ç¤¾äº¤ç™»å½•**
1. **åœ¨Auth0æ§åˆ¶å°é…ç½®**
   ```
   Authentication â†’ Social â†’ é€‰æ‹©æä¾›å•†
   è¾“å…¥å¯¹åº”çš„Client IDå’ŒClient Secret
   é…ç½®æƒé™èŒƒå›´(Scopes)
   ```

2. **å‰ç«¯é›†æˆç¤ºä¾‹**
   ```javascript
   // Auth0æä¾›çš„ç®€åŒ–API
   const auth0 = new Auth0Lock(clientId, domain, {
     socialButtonStyle: 'big',
     allowedConnections: ['google-oauth2', 'github', 'facebook'],
     languageDictionary: {
       title: "é€‰æ‹©ç™»å½•æ–¹å¼"
     }
   });
   
   // æ˜¾ç¤ºç™»å½•æ¡†
   auth0.show();
   ```

**ğŸ’¡ ç¤¾äº¤ç™»å½•çš„ä¼˜åŠ¿**
- **ç”¨æˆ·ä½“éªŒå¥½**ï¼šæ— éœ€æ³¨å†Œæ–°è´¦å·
- **ä¿¡æ¯è·å–å…¨**ï¼šå¯ä»¥è·å–ç¤¾äº¤å¹³å°çš„ç”¨æˆ·ä¿¡æ¯  
- **ç»´æŠ¤æˆæœ¬ä½**ï¼šAuth0å¤„ç†å„å¹³å°å·®å¼‚

---

## 5. ğŸ› ï¸ Keycloakå¼€æºæ–¹æ¡ˆ


### 5.1 KeycloakåŸºæœ¬æ¦‚å¿µ


**ğŸ’¡ ä»€ä¹ˆæ˜¯Keycloak**
```
Keycloak = å¼€æºçš„èº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆ
ç›¸å½“äºè‡ªå·±æ­å»ºä¸€ä¸ª"å¾®ä¿¡ç™»å½•ç³»ç»Ÿ"

ç‰¹ç‚¹ï¼š
â€¢ å®Œå…¨å…è´¹å¼€æº
â€¢ åŠŸèƒ½éå¸¸å…¨é¢
â€¢ æ”¯æŒå„ç§è®¤è¯åè®®
â€¢ å¯ä»¥å®Œå…¨è‡ªä¸»æ§åˆ¶
```

**ğŸ—ï¸ Keycloakæ¶æ„æ¦‚å¿µ**
```
æ ¸å¿ƒæ¦‚å¿µå±‚æ¬¡ï¼š
Realmï¼ˆé¢†åŸŸï¼‰
  â””â”€â”€ Clientï¼ˆå®¢æˆ·ç«¯åº”ç”¨ï¼‰
      â””â”€â”€ Userï¼ˆç”¨æˆ·ï¼‰
          â””â”€â”€ Roleï¼ˆè§’è‰²ï¼‰
              â””â”€â”€ Permissionï¼ˆæƒé™ï¼‰

é€šä¿—ç†è§£ï¼š
Realm = å…¬å¸
Client = å…¬å¸é‡Œçš„ä¸åŒç³»ç»Ÿï¼ˆHRç³»ç»Ÿã€è´¢åŠ¡ç³»ç»Ÿï¼‰  
User = å‘˜å·¥
Role = èŒä½ï¼ˆç»ç†ã€å‘˜å·¥ï¼‰
Permission = å…·ä½“æƒé™ï¼ˆæŸ¥çœ‹å·¥èµ„ã€å®¡æ‰¹è¯·å‡ï¼‰
```

### 5.2 Dockerå¿«é€Ÿéƒ¨ç½²


**ğŸ³ å¿«é€Ÿå¯åŠ¨Keycloak**
```bash
# æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼
docker run -p 8080:8080 \
  -e KEYCLOAK_ADMIN=admin \
  -e KEYCLOAK_ADMIN_PASSWORD=password \
  quay.io/keycloak/keycloak:latest start-dev

# è®¿é—®ç®¡ç†æ§åˆ¶å°
# http://localhost:8080
# ç”¨æˆ·åï¼šadmin  å¯†ç ï¼špassword
```

**âš™ï¸ ç”Ÿäº§ç¯å¢ƒé…ç½®**
```yaml
# docker-compose.yml
version: '3.8'
services:
  keycloak:
    image: quay.io/keycloak/keycloak:latest
    environment:
      KC_DB: postgres
      KC_DB_URL: jdbc:postgresql://postgres:5432/keycloak
      KC_DB_USERNAME: keycloak
      KC_DB_PASSWORD: password
      KEYCLOAK_ADMIN: admin
      KEYCLOAK_ADMIN_PASSWORD: strong-password
    ports:
      - "8080:8080"
    depends_on:
      - postgres
    
  postgres:
    image: postgres:13
    environment:
      POSTGRES_DB: keycloak
      POSTGRES_USER: keycloak
      POSTGRES_PASSWORD: password
```

### 5.3 åŸºæœ¬é…ç½®æµç¨‹


**ğŸ“‹ åˆæ¬¡é…ç½®æ­¥éª¤**
1. **åˆ›å»ºRealm**
   ```
   ç®¡ç†æ§åˆ¶å° â†’ å·¦ä¸Šè§’ä¸‹æ‹‰èœå• â†’ Add realm
   è¾“å…¥Realmåç§°ï¼šmy-company
   ```

2. **åˆ›å»ºClient**
   ```
   Clients â†’ Create
   Client ID: my-web-app
   Client Protocol: openid-connect
   Access Type: confidentialï¼ˆéœ€è¦client secretï¼‰
   ```

3. **é…ç½®é‡å®šå‘URL**
   ```
   Valid Redirect URIs: https://yourapp.com/callback/*
   Base URL: https://yourapp.com
   ```

**ğŸ”‘ è·å–è¿æ¥ä¿¡æ¯**
```javascript
const keycloakConfig = {
  url: 'http://localhost:8080/',
  realm: 'my-company',
  clientId: 'my-web-app',
  
  // ä»Clients â†’ my-web-app â†’ Credentialsè·å–
  clientSecret: 'generated-secret'  
}
```

---

## 6. ğŸ¢ Oktaä¼ä¸šçº§é›†æˆ


### 6.1 Oktaå¹³å°ç‰¹ç‚¹


**ğŸ’¼ Oktaçš„å®šä½**
```
Okta = ä¼ä¸šçº§èº«ä»½äº‘æœåŠ¡
ä¸»è¦æœåŠ¡ä¼ä¸šå®¢æˆ·ï¼Œç‰¹åˆ«æ˜¯å¤§ä¸­å‹ä¼ä¸š

ä¼˜åŠ¿ï¼š
â€¢ ä¼ä¸šçº§å®‰å…¨æ ‡å‡†
â€¢ ä¸°å¯Œçš„ä¼ä¸šåº”ç”¨é›†æˆ
â€¢ å¼ºå¤§çš„ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†
â€¢ è¯¦ç»†çš„å®¡è®¡æ—¥å¿—

åŠ£åŠ¿ï¼š
â€¢ ä»·æ ¼ç›¸å¯¹è¾ƒé«˜
â€¢ é…ç½®ç›¸å¯¹å¤æ‚
â€¢ ä¸»è¦é¢å‘ä¼ä¸šç”¨æˆ·
```

### 6.2 Oktaåº”ç”¨é…ç½®


**âš™ï¸ åˆ›å»ºOktaåº”ç”¨**
1. **ç™»å½•Oktaå¼€å‘è€…æ§åˆ¶å°**
   ```
   è®¿é—® developer.okta.com
   æ³¨å†Œå¼€å‘è€…è´¦å·ï¼ˆå…è´¹ï¼‰
   åˆ›å»ºç»„ç»‡ï¼šyour-org.oktapreview.com
   ```

2. **åˆ›å»ºåº”ç”¨é›†æˆ**
   ```
   Applications â†’ Add Application
   é€‰æ‹©ç±»å‹ï¼šWeb
   é…ç½®è®¾ç½®ï¼š
   â€¢ Name: åº”ç”¨åç§°
   â€¢ Base URIs: https://yourapp.com
   â€¢ Login redirect URIs: https://yourapp.com/callback
   ```

**ğŸ”§ é«˜çº§é…ç½®**
```javascript
const oktaConfig = {
  issuer: 'https://your-org.oktapreview.com/oauth2/default',
  clientId: 'your-client-id',
  clientSecret: 'your-client-secret',
  redirectUri: 'https://yourapp.com/callback',
  
  // ä¼ä¸šçº§ç‰¹æ€§
  scopes: [
    'openid', 
    'profile', 
    'email',
    'groups'    // è·å–ç”¨æˆ·ç»„ä¿¡æ¯
  ]
}
```

### 6.3 ä¼ä¸šç‰¹æœ‰åŠŸèƒ½


**ğŸ‘¥ ç”¨æˆ·ç»„ç®¡ç†**
```javascript
// Oktaçš„ç”¨æˆ·ä¿¡æ¯åŒ…å«ä¼ä¸šç»„ç»‡æ¶æ„
const oktaUserProfile = {
  "sub": "user-id",
  "name": "å¼ ä¸‰",
  "email": "zhangsan@company.com",
  "groups": [
    "å¼€å‘éƒ¨",
    "é¡¹ç›®Aç»„", 
    "é«˜çº§å·¥ç¨‹å¸ˆ"
  ],
  "department": "æŠ€æœ¯éƒ¨",
  "title": "é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆ",
  "manager": "manager-user-id"
}
```

**ğŸ”’ é«˜çº§å®‰å…¨ç­–ç•¥**
```
Oktaä¼ä¸šå®‰å…¨åŠŸèƒ½ï¼š
â€¢ å¤šå› ç´ è®¤è¯(MFA)å¼ºåˆ¶è¦æ±‚
â€¢ è®¾å¤‡ä¿¡ä»»ç®¡ç†
â€¢ ç½‘ç»œè®¿é—®ç­–ç•¥ï¼ˆIPç™½åå•ï¼‰
â€¢ å•ç‚¹ç™»å½•(SSO)ä¼šè¯ç®¡ç†
â€¢ è¯¦ç»†çš„è®¿é—®å®¡è®¡æ—¥å¿—
```

---

## 7. âš–ï¸ å„å¹³å°å·®å¼‚å¯¹æ¯”


### 7.1 åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”


| å¹³å° | **ç”¨æˆ·ç¾¤ä½“** | **å…è´¹é¢åº¦** | **ä¼ä¸šç‰¹æ€§** | **æŠ€æœ¯éš¾åº¦** | **é€‚ç”¨åœºæ™¯** |
|------|-------------|-------------|-------------|-------------|-------------|
| ğŸŒ **Google** | `ä¸ªäººç”¨æˆ·ä¸ºä¸»` | `æ— é™åˆ¶` | `åŸºç¡€` | `â­â­` | `Cç«¯åº”ç”¨ï¼Œä¸ªäººé¡¹ç›®` |
| ğŸ¢ **Microsoft** | `ä¼ä¸š+ä¸ªäºº` | `æœ‰é™åˆ¶` | `ä¸°å¯Œ` | `â­â­â­` | `ä¼ä¸šåº”ç”¨ï¼ŒOfficeé›†æˆ` |
| ğŸ› ï¸ **Auth0** | `å¼€å‘è€…å‹å¥½` | `7000ç”¨æˆ·/æœˆ` | `ä¸­ç­‰` | `â­â­` | `å¿«é€Ÿå¼€å‘ï¼ŒåŸå‹éªŒè¯` |
| ğŸ”“ **Keycloak** | `æŠ€æœ¯å›¢é˜Ÿ` | `å®Œå…¨å…è´¹` | `éå¸¸ä¸°å¯Œ` | `â­â­â­â­` | `è‡ªä¸»æ§åˆ¶ï¼Œå®šåˆ¶éœ€æ±‚` |
| ğŸ¢ **Okta** | `ä¼ä¸šå®¢æˆ·` | `100ç”¨æˆ·/æœˆ` | `æœ€ä¸°å¯Œ` | `â­â­â­` | `å¤§å‹ä¼ä¸šï¼Œåˆè§„è¦æ±‚` |

### 7.2 é…ç½®å¤æ‚åº¦å¯¹æ¯”


**ğŸ¯ ä»æ˜“åˆ°éš¾æ’åº**
```
1ï¸âƒ£ Auth0 (æœ€ç®€å•)
   â€¢ ç•Œé¢å‹å¥½ï¼Œå‘å¯¼å¼é…ç½®
   â€¢ ç¤¾äº¤ç™»å½•ä¸€é”®å¯ç”¨
   â€¢ æ–‡æ¡£æ¸…æ™°æ˜“æ‡‚

2ï¸âƒ£ Google Identity
   â€¢ Google Consoleç•Œé¢ç®€æ´
   â€¢ é…ç½®é¡¹ç›¸å¯¹è¾ƒå°‘
   â€¢ æ–‡æ¡£å®Œæ•´

3ï¸âƒ£ Microsoft Identity  
   â€¢ Azureé—¨æˆ·åŠŸèƒ½ä¸°å¯Œä½†å¤æ‚
   â€¢ ä¼ä¸šç‰ˆé…ç½®é¡¹å¤š
   â€¢ æƒé™æ¨¡å‹å¤æ‚

4ï¸âƒ£ Okta
   â€¢ ä¼ä¸šçº§åŠŸèƒ½ä¸°å¯Œ
   â€¢ é…ç½®é€‰é¡¹å¾ˆå¤š
   â€¢ éœ€è¦ç†è§£ä¼ä¸šå®‰å…¨æ¦‚å¿µ

5ï¸âƒ£ Keycloak (æœ€å¤æ‚)
   â€¢ éœ€è¦è‡ªå·±éƒ¨ç½²å’Œç»´æŠ¤
   â€¢ é…ç½®é¡¹æœ€å¤šæœ€çµæ´»
   â€¢ éœ€è¦æ·±å…¥ç†è§£è®¤è¯åŸç†
```

### 7.3 æˆæœ¬å¯¹æ¯”åˆ†æ


**ğŸ’° æˆæœ¬ç»“æ„åˆ†æ**
```
ğŸ†“ å®Œå…¨å…è´¹ï¼š
â€¢ Google Identity Platform
â€¢ Keycloak (è‡ªå»º)

ğŸ’µ æœ‰å…è´¹é¢åº¦ï¼š
â€¢ Auth0: 7000æ´»è·ƒç”¨æˆ·/æœˆ
â€¢ Microsoft: æœ‰é™åˆ¶çš„å…è´¹å±‚
â€¢ Okta: 100ç”¨æˆ·/æœˆ

ğŸ’¸ ä»˜è´¹è€ƒè™‘ï¼š
â€¢ ç”¨æˆ·æ•°é‡å¢é•¿
â€¢ ä¼ä¸šçº§åŠŸèƒ½éœ€æ±‚
â€¢ æŠ€æœ¯æ”¯æŒéœ€æ±‚
â€¢ SLAä¿è¯éœ€æ±‚
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ IdPé€‰æ‹©æ ‡å‡†ï¼šç”¨æˆ·ç¾¤ä½“ã€æˆæœ¬ã€å®‰å…¨ã€æŠ€æœ¯éš¾åº¦
ğŸ”¸ Googleå¹³å°ï¼šä¸ªäººç”¨æˆ·å‹å¥½ï¼ŒGmailä¿¡æ¯è·å–ï¼Œscopeæƒé™
ğŸ”¸ Microsoftå¹³å°ï¼šä¼ä¸šè´¦æˆ·é›†æˆï¼ŒAzure ADé…ç½®ï¼Œå·¥ä½œè´¦æˆ·
ğŸ”¸ Auth0ç‰¹ç‚¹ï¼šå¼€å‘å‹å¥½ï¼Œç•Œé¢å®šåˆ¶ï¼Œç¤¾äº¤ç™»å½•é›†æˆ  
ğŸ”¸ Keycloakä¼˜åŠ¿ï¼šå®Œå…¨å¼€æºï¼ŒåŠŸèƒ½å…¨é¢ï¼Œè‡ªä¸»æ§åˆ¶
ğŸ”¸ Oktaå®šä½ï¼šä¼ä¸šçº§æœåŠ¡ï¼Œå®‰å…¨æ ‡å‡†é«˜ï¼Œç”¨æˆ·ç®¡ç†å¼º
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¹³å°é€‰æ‹©æ€è·¯**
```
ä¸ªäººé¡¹ç›®/Cç«¯åº”ç”¨ï¼š
â†’ Google Identityï¼ˆç”¨æˆ·åŸºæ•°å¤§ï¼Œä½“éªŒå¥½ï¼‰

ä¼ä¸šå†…éƒ¨ç³»ç»Ÿï¼š  
â†’ Microsoft Identityï¼ˆOfficeé›†æˆï¼Œä¼ä¸šè´¦æˆ·ï¼‰

å¿«é€ŸåŸå‹å¼€å‘ï¼š
â†’ Auth0ï¼ˆé…ç½®ç®€å•ï¼ŒåŠŸèƒ½å…¨é¢ï¼‰

å¤§å‹ä¼ä¸š/é«˜å®‰å…¨è¦æ±‚ï¼š
â†’ Oktaï¼ˆä¼ä¸šçº§åŠŸèƒ½ï¼Œåˆè§„æ€§å¼ºï¼‰

è‡ªä¸»æ§åˆ¶/å®šåˆ¶éœ€æ±‚ï¼š
â†’ Keycloakï¼ˆå¼€æºå…è´¹ï¼Œå®Œå…¨å¯æ§ï¼‰
```

**ğŸ”¹ é›†æˆå…³é”®è¦ç‚¹**
```
é…ç½®æ ¸å¿ƒä¸‰è¦ç´ ï¼š
â€¢ Client ID/Client Secret (åº”ç”¨å‡­è¯)
â€¢ Redirect URI (å›è°ƒåœ°å€)  
â€¢ Scope (æƒé™èŒƒå›´)

å®‰å…¨æ³¨æ„äº‹é¡¹ï¼š
â€¢ Client Secret ä¿å¯†å­˜å‚¨
â€¢ HTTPS å¼ºåˆ¶ä½¿ç”¨
â€¢ State å‚æ•°é˜²CSRF
â€¢ Token å®‰å…¨å­˜å‚¨
```

### 8.3 å®æˆ˜å»ºè®®


**ğŸ¯ æ–°æ‰‹å­¦ä¹ è·¯å¾„**
```
ç¬¬1æ­¥ï¼šç†è§£OAuth2/OpenID ConnectåŸºæœ¬æµç¨‹
ç¬¬2æ­¥ï¼šé€‰æ‹©ä¸€ä¸ªå¹³å°ï¼ˆæ¨èAuth0å…¥é—¨ï¼‰
ç¬¬3æ­¥ï¼šå®ŒæˆåŸºæœ¬çš„ç™»å½•é›†æˆ
ç¬¬4æ­¥ï¼šç†è§£Tokençš„è·å–å’ŒéªŒè¯
ç¬¬5æ­¥ï¼šå°è¯•è·å–ç”¨æˆ·ä¿¡æ¯
ç¬¬6æ­¥ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©å…¶ä»–å¹³å°
```

**âš ï¸ å¸¸è§å‘ç‚¹æé†’**
- **é‡å®šå‘URIé…ç½®**ï¼šå¿…é¡»å®Œå…¨åŒ¹é…ï¼ŒåŒ…æ‹¬åè®®å’Œç«¯å£
- **Scopeæƒé™**ï¼šä¸è¦ç”³è¯·ä¸å¿…è¦çš„æƒé™ï¼Œå½±å“ç”¨æˆ·ä¿¡ä»»
- **Tokenå­˜å‚¨**ï¼šå‰ç«¯ä¸è¦å­˜å‚¨æ•æ„Ÿtokenï¼Œç”¨HttpOnly Cookie
- **é”™è¯¯å¤„ç†**ï¼šè®¤è¯å¤±è´¥æ—¶è¦æœ‰å‹å¥½çš„é”™è¯¯æç¤º
- **ç”¨æˆ·æ³¨é”€**ï¼šè¦æ­£ç¡®å¤„ç†IdPå’Œåº”ç”¨çš„åŒé‡æ³¨é”€

**ğŸš€ ç”Ÿäº§ç¯å¢ƒå»ºè®®**
- ä½¿ç”¨HTTPSåŠ å¯†ä¼ è¾“
- å®æ–½é€‚å½“çš„Rate Limiting
- ç›‘æ§è®¤è¯æˆåŠŸç‡å’Œé”™è¯¯ç‡
- å‡†å¤‡å¤šIdPçš„æ•…éšœåˆ‡æ¢æ–¹æ¡ˆ
- å®šæœŸæ›´æ–°Client Secretç­‰å‡­è¯

**æ ¸å¿ƒè®°å¿†**ï¼š
- IdPé€‰æ‹©çœ‹éœ€æ±‚ï¼šä¸ªäººé€‰Googleï¼Œä¼ä¸šé€‰å¾®è½¯ï¼Œå¿«é€Ÿé€‰Auth0ï¼Œå®‰å…¨é€‰Oktaï¼Œè‡ªå»ºé€‰Keycloak  
- é…ç½®ä¸‰æ ¸å¿ƒï¼šClientå‡­è¯ã€å›è°ƒåœ°å€ã€æƒé™èŒƒå›´
- å®‰å…¨ç¬¬ä¸€ä½ï¼šHTTPSä¼ è¾“ã€å¯†é’¥ä¿æŠ¤ã€Tokenå®‰å…¨