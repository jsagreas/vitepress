---
title: 8ã€å¸¸è§é—®é¢˜ä¸è°ƒè¯•
---
## ğŸ“š ç›®å½•

1. [å›è°ƒåœ°å€å¸¸è§é—®é¢˜](#1-å›è°ƒåœ°å€å¸¸è§é—®é¢˜)
2. [Tokenç›¸å…³é—®é¢˜å¤„ç†](#2-Tokenç›¸å…³é—®é¢˜å¤„ç†)
3. [ç”¨æˆ·æˆæƒå¼‚å¸¸å¤„ç†](#3-ç”¨æˆ·æˆæƒå¼‚å¸¸å¤„ç†)
4. [å¤šç¯å¢ƒè°ƒè¯•ç­–ç•¥](#4-å¤šç¯å¢ƒè°ƒè¯•ç­–ç•¥)
5. [æ€§èƒ½ä¼˜åŒ–å»ºè®®](#5-æ€§èƒ½ä¼˜åŒ–å»ºè®®)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ å›è°ƒåœ°å€å¸¸è§é—®é¢˜


### 1.1 ä»€ä¹ˆæ˜¯å›è°ƒåœ°å€


**ç®€å•ç†è§£**ï¼šå›è°ƒåœ°å€å°±åƒä½ çš„"æ”¶è´§åœ°å€"
```
ç”¨æˆ·æˆæƒæµç¨‹ï¼š
ç”¨æˆ· â†’ ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¾®ä¿¡/QQï¼‰ â†’ åŒæ„æˆæƒ â†’ è·³å›ä½ çš„ç½‘ç«™
                                        â†‘
                                   è¿™å°±æ˜¯å›è°ƒåœ°å€
```

> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šç”¨æˆ·åœ¨å¾®ä¿¡ä¸Šç‚¹äº†"åŒæ„æˆæƒ"åï¼Œå¾®ä¿¡éœ€è¦çŸ¥é“æŠŠç”¨æˆ·"é€å›"åˆ°ä½ ç½‘ç«™çš„å“ªä¸ªé¡µé¢ï¼Œè¿™ä¸ªé¡µé¢åœ°å€å°±æ˜¯å›è°ƒåœ°å€ã€‚

### 1.2 å›è°ƒåœ°å€ä¸åŒ¹é…æ’æŸ¥


**ğŸ” å¸¸è§é”™è¯¯ç°è±¡**
```
é”™è¯¯æç¤ºï¼š
"redirect_uriå‚æ•°é”™è¯¯"
"å›è°ƒåœ°å€ä¸åœ¨ç™½åå•ä¸­"
"åŸŸåä¸åŒ¹é…"
```

**ğŸ“‹ æ’æŸ¥æ­¥éª¤**
```
æ­¥éª¤1ï¸âƒ£ï¼šæ£€æŸ¥å¹³å°é…ç½®
â”Œâ”€ ç™»å½•å¼€å‘è€…åå°
â”œâ”€ æ‰¾åˆ°å›è°ƒURLé…ç½®
â”œâ”€ ç¡®è®¤é…ç½®çš„åŸŸå
â””â”€ æ£€æŸ¥æ˜¯å¦å¯ç”¨HTTPS

æ­¥éª¤2ï¸âƒ£ï¼šæ£€æŸ¥ä»£ç ä¸­çš„URL
â”Œâ”€ æŸ¥çœ‹æˆæƒè·³è½¬ä»£ç 
â”œâ”€ ç¡®è®¤redirect_uriå‚æ•°
â”œâ”€ æ£€æŸ¥åŸŸåæ‹¼å†™
â””â”€ ç¡®è®¤è·¯å¾„æ˜¯å¦æ­£ç¡®

æ­¥éª¤3ï¸âƒ£ï¼šURLç¼–ç é—®é¢˜
â”Œâ”€ ç‰¹æ®Šå­—ç¬¦éœ€è¦ç¼–ç 
â”œâ”€ ä½¿ç”¨encodeURIComponent()
â””â”€ é¿å…é‡å¤ç¼–ç 
```

**ğŸ’» ä»£ç ç¤ºä¾‹**
```javascript
// âŒ é”™è¯¯é…ç½®
const redirectUri = "http://localhost:3000/auth/callback?type=wechat";

// âœ… æ­£ç¡®é…ç½®
const redirectUri = encodeURIComponent("https://yourdomain.com/auth/callback");

// æ„å»ºæˆæƒURL
const authUrl = `https://open.weixin.qq.com/connect/oauth2/authorize?` +
  `appid=${appId}&` +
  `redirect_uri=${redirectUri}&` +
  `response_type=code&` +
  `scope=snsapi_userinfo`;
```

### 1.3 æœ¬åœ°å¼€å‘ç¯å¢ƒè°ƒè¯•æ–¹æ¡ˆ


**ğŸ  æœ¬åœ°è°ƒè¯•çš„éš¾é¢˜**
- ç¬¬ä¸‰æ–¹å¹³å°åªæ¥å—å…¬ç½‘åŸŸå
- localhostæ— æ³•è¢«ç¬¬ä¸‰æ–¹å¹³å°è®¿é—®
- å¼€å‘æ—¶éœ€è¦çœŸå®çš„ç½‘ç»œç¯å¢ƒæµ‹è¯•

**ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ**

**æ–¹æ¡ˆ1ï¼šä½¿ç”¨å†…ç½‘ç©¿é€å·¥å…·**
```bash
# ä½¿ç”¨ngrokï¼ˆå…è´¹å·¥å…·ï¼‰
npm install -g ngrok
ngrok http 3000

# ä¼šç”Ÿæˆç±»ä¼¼è¿™æ ·çš„å…¬ç½‘åœ°å€
https://abc123.ngrok.io â†’ http://localhost:3000
```

**æ–¹æ¡ˆ2ï¼šé…ç½®æµ‹è¯•åŸŸå**
```javascript
// ç¯å¢ƒé…ç½®
const config = {
  development: {
    baseUrl: 'https://abc123.ngrok.io',
    redirectUri: 'https://abc123.ngrok.io/auth/callback'
  },
  production: {
    baseUrl: 'https://yourdomain.com',
    redirectUri: 'https://yourdomain.com/auth/callback'
  }
};
```

**æ–¹æ¡ˆ3ï¼šä½¿ç”¨ä»£ç†æœåŠ¡å™¨**
```
æœ¬åœ°å¼€å‘æµç¨‹ï¼š
å¼€å‘æœº(localhost:3000) â†’ ä»£ç†æœåŠ¡å™¨(å…¬ç½‘) â†’ ç¬¬ä¸‰æ–¹å¹³å°
                      â†‘                    â†“
                    å†…ç½‘ç©¿é€           å›è°ƒåˆ°ä»£ç†æœåŠ¡å™¨
```

### 1.4 åŸŸåé…ç½®æ³¨æ„äº‹é¡¹


**ğŸŒ åŸŸåé…ç½®è¦ç‚¹**
```
âœ… æ­£ç¡®é…ç½®ï¼š
- ä½¿ç”¨HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ï¼‰
- ç¡®ä¿åŸŸåå·²å¤‡æ¡ˆï¼ˆä¸­å›½å¤§é™†ï¼‰
- é…ç½®æ­£ç¡®çš„å­åŸŸå

âŒ å¸¸è§é”™è¯¯ï¼š
- æ··ç”¨HTTPå’ŒHTTPS
- å¿˜è®°é…ç½®wwwå­åŸŸå
- ä½¿ç”¨ä¸´æ—¶åŸŸåæµ‹è¯•
```

**ğŸ“ é…ç½®æ£€æŸ¥æ¸…å•**
```
â–¡ åŸŸåæ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®
â–¡ HTTPSè¯ä¹¦æ˜¯å¦æœ‰æ•ˆ
â–¡ å›è°ƒåœ°å€æ˜¯å¦è¿”å›200çŠ¶æ€ç 
â–¡ è·¨åŸŸé…ç½®æ˜¯å¦æ­£ç¡®
â–¡ é˜²ç«å¢™æ˜¯å¦å…è®¸è®¿é—®
```

---

## 2. ğŸ« Tokenç›¸å…³é—®é¢˜å¤„ç†


### 2.1 ä»€ä¹ˆæ˜¯Token


**ğŸ”‘ Tokençš„é€šä¿—ç†è§£**
- **Access Token**ï¼šåƒæ˜¯"ä¸´æ—¶é€šè¡Œè¯"ï¼Œç”¨æ¥è®¿é—®ç”¨æˆ·æ•°æ®
- **Refresh Token**ï¼šåƒæ˜¯"ç»­ç­¾è¯æ˜"ï¼Œç”¨æ¥æ›´æ–°é€šè¡Œè¯

```
Tokenä½¿ç”¨æµç¨‹ï¼š
ç”¨æˆ·æˆæƒ â†’ è·å–Token â†’ ä½¿ç”¨Tokenè®¿é—®API â†’ Tokenè¿‡æœŸ â†’ ç”¨Refresh Tokenæ›´æ–°
```

> ğŸ’¡ **ç”Ÿæ´»æ¯”å–»**ï¼šTokenå°±åƒç”µå½±ç¥¨ï¼Œæœ‰äº†ç¥¨æ‰èƒ½è¿›ç”µå½±é™¢çœ‹ç”µå½±ã€‚ä½†ç¥¨æœ‰æœ‰æ•ˆæœŸï¼Œè¿‡æœŸäº†å°±å¾—é‡æ–°ä¹°ç¥¨ï¼ˆåˆ·æ–°Tokenï¼‰ã€‚

### 2.2 Tokenè·å–å¤±è´¥æ’æŸ¥


**ğŸš¨ å¸¸è§è·å–å¤±è´¥åŸå› **
```
åŸå› åˆ†æï¼š
â”Œâ”€ æˆæƒç (code)è¿‡æœŸæˆ–æ— æ•ˆ
â”œâ”€ App IDæˆ–App Secreté”™è¯¯
â”œâ”€ ç½‘ç»œè¿æ¥è¶…æ—¶
â”œâ”€ ç¬¬ä¸‰æ–¹å¹³å°æœåŠ¡å¼‚å¸¸
â””â”€ è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯
```

**ğŸ” æ’æŸ¥æ–¹æ³•**
```javascript
// æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
async function getAccessToken(code) {
  try {
    const response = await fetch('https://api.weixin.qq.com/sns/oauth2/access_token', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        appid: process.env.WECHAT_APP_ID,
        secret: process.env.WECHAT_APP_SECRET,
        code: code,
        grant_type: 'authorization_code'
      })
    });

    const data = await response.json();
    
    // ğŸ” è¯¦ç»†é”™è¯¯æ—¥å¿—
    if (data.errcode) {
      console.error('Tokenè·å–å¤±è´¥:', {
        é”™è¯¯ç : data.errcode,
        é”™è¯¯ä¿¡æ¯: data.errmsg,
        è¯·æ±‚å‚æ•°: { code, appid: process.env.WECHAT_APP_ID }
      });
      throw new Error(`Tokenè·å–å¤±è´¥: ${data.errmsg}`);
    }

    return data.access_token;
  } catch (error) {
    console.error('ç½‘ç»œè¯·æ±‚å¤±è´¥:', error);
    throw error;
  }
}
```

**ğŸ“Š å¸¸è§é”™è¯¯ç å¯¹ç…§**
| é”™è¯¯ç  | å«ä¹‰ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| `40013` | AppIDæ— æ•ˆ | æ£€æŸ¥AppIDé…ç½® |
| `40125` | App Secretæ— æ•ˆ | æ£€æŸ¥å¯†é’¥é…ç½® |
| `40029` | codeæ— æ•ˆ | codeåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ£€æŸ¥æ˜¯å¦é‡å¤ä½¿ç”¨ |
| `40163` | codeå·²è¿‡æœŸ | codeæœ‰æ•ˆæœŸ5åˆ†é’Ÿï¼Œéœ€é‡æ–°è·å– |

### 2.3 Tokenè¿‡æœŸå¤„ç†æœºåˆ¶


**â° Tokenè¿‡æœŸçš„ç°è±¡**
```
ç”¨æˆ·ä½“éªŒï¼š
ç”¨æˆ·æ­£åœ¨ä½¿ç”¨APP â†’ çªç„¶æç¤º"ç™»å½•å·²è¿‡æœŸ" â†’ éœ€è¦é‡æ–°ç™»å½•
```

**ğŸ”„ è‡ªåŠ¨åˆ·æ–°æœºåˆ¶**
```javascript
class TokenManager {
  constructor() {
    this.accessToken = null;
    this.refreshToken = null;
    this.tokenExpiry = null;
  }

  // æ£€æŸ¥Tokenæ˜¯å¦å³å°†è¿‡æœŸ
  isTokenExpiring() {
    if (!this.tokenExpiry) return true;
    
    // æå‰5åˆ†é’Ÿåˆ·æ–°Token
    const fiveMinutesFromNow = Date.now() + (5 * 60 * 1000);
    return this.tokenExpiry < fiveMinutesFromNow;
  }

  // è‡ªåŠ¨åˆ·æ–°Token
  async ensureValidToken() {
    if (this.isTokenExpiring()) {
      console.log('Tokenå³å°†è¿‡æœŸï¼Œå¼€å§‹åˆ·æ–°...');
      await this.refreshAccessToken();
    }
    return this.accessToken;
  }

  // åˆ·æ–°è®¿é—®ä»¤ç‰Œ
  async refreshAccessToken() {
    try {
      const response = await fetch('/api/refresh-token', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${this.refreshToken}` }
      });

      const data = await response.json();
      
      this.accessToken = data.access_token;
      this.tokenExpiry = Date.now() + (data.expires_in * 1000);
      
      console.log('Tokenåˆ·æ–°æˆåŠŸ');
    } catch (error) {
      console.error('Tokenåˆ·æ–°å¤±è´¥ï¼Œéœ€è¦é‡æ–°ç™»å½•');
      this.redirectToLogin();
    }
  }
}
```

### 2.4 å¹¶å‘è®¿é—®å®‰å…¨é—®é¢˜


**âš ï¸ å¹¶å‘é—®é¢˜çš„åœºæ™¯**
```
åœºæ™¯æè¿°ï¼š
åŒä¸€ç”¨æˆ·åœ¨å¤šä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µ â†’ åŒæ—¶ä½¿ç”¨åº”ç”¨ â†’ å¤šä¸ªè¯·æ±‚åŒæ—¶åˆ·æ–°Token
                                            â†“
                                      å¯èƒ½å¯¼è‡´Tokenå†²çª
```

**ğŸ›¡ï¸ è§£å†³æ–¹æ¡ˆï¼šTokené”æœºåˆ¶**
```javascript
class SafeTokenManager {
  constructor() {
    this.refreshPromise = null; // é˜²æ­¢é‡å¤åˆ·æ–°
  }

  async getValidToken() {
    // å¦‚æœæ­£åœ¨åˆ·æ–°ï¼Œç­‰å¾…åˆ·æ–°å®Œæˆ
    if (this.refreshPromise) {
      console.log('ç­‰å¾…å…¶ä»–è¯·æ±‚å®ŒæˆTokenåˆ·æ–°...');
      await this.refreshPromise;
      return this.accessToken;
    }

    // æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ·æ–°
    if (this.isTokenExpiring()) {
      this.refreshPromise = this.doRefreshToken();
      
      try {
        await this.refreshPromise;
      } finally {
        this.refreshPromise = null; // æ¸…é™¤é”å®šçŠ¶æ€
      }
    }

    return this.accessToken;
  }

  async doRefreshToken() {
    // å®é™…çš„åˆ·æ–°é€»è¾‘
    console.log('å¼€å§‹åˆ·æ–°Token...');
    // ... åˆ·æ–°ä»£ç 
  }
}
```

---

## 3. ğŸ‘¤ ç”¨æˆ·æˆæƒå¼‚å¸¸å¤„ç†


### 3.1 ç”¨æˆ·å–æ¶ˆæˆæƒå¤„ç†


**ğŸ˜” ç”¨æˆ·ä¸ºä»€ä¹ˆä¼šå–æ¶ˆæˆæƒ**
- æ‹…å¿ƒéšç§æ³„éœ²
- ä¸ä¿¡ä»»åº”ç”¨
- è¯¯æ“ä½œ
- æƒé™è¦æ±‚è¿‡å¤š

**ğŸ¯ ç”¨æˆ·å–æ¶ˆæˆæƒçš„å¤„ç†æµç¨‹**
```
ç”¨æˆ·è¡Œä¸ºæµç¨‹ï¼š
ç‚¹å‡»ç™»å½• â†’ è·³è½¬åˆ°å¾®ä¿¡ â†’ çœ‹åˆ°æƒé™ç”³è¯· â†’ ç‚¹å‡»"å–æ¶ˆ" â†’ è¿”å›åº”ç”¨
                                                    â†“
                                             å¦‚ä½•ä¼˜é›…å¤„ç†ï¼Ÿ
```

**ğŸ’» å¤„ç†ä»£ç ç¤ºä¾‹**
```javascript
// å›è°ƒé¡µé¢å¤„ç†
app.get('/auth/callback', (req, res) => {
  const { code, error, error_description } = req.query;

  // ç”¨æˆ·å–æ¶ˆæˆæƒ
  if (error === 'access_denied') {
    console.log('ç”¨æˆ·å–æ¶ˆäº†æˆæƒ');
    
    // å‹å¥½çš„é”™è¯¯é¡µé¢
    return res.render('auth-cancelled', {
      title: 'ç™»å½•å·²å–æ¶ˆ',
      message: 'æ‚¨å–æ¶ˆäº†æˆæƒç™»å½•ï¼Œå¦‚éœ€ä½¿ç”¨å®Œæ•´åŠŸèƒ½è¯·é‡æ–°ç™»å½•',
      showRetryButton: true
    });
  }

  // å…¶ä»–é”™è¯¯
  if (error) {
    console.error('æˆæƒé”™è¯¯:', error_description);
    return res.render('auth-error', {
      title: 'ç™»å½•å¤±è´¥',
      message: 'ç™»å½•è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•'
    });
  }

  // æ­£å¸¸æˆæƒæµç¨‹
  if (code) {
    // å¤„ç†æˆæƒç ...
  }
});
```

**ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
```html
<!-- æˆæƒå–æ¶ˆé¡µé¢ç¤ºä¾‹ -->
<div class="auth-result">
  <div class="icon">ğŸ˜”</div>
  <h2>ç™»å½•å·²å–æ¶ˆ</h2>
  <p>æ²¡å…³ç³»ï¼Œæ‚¨å¯ä»¥ï¼š</p>
  <ul>
    <li>ğŸ”„ é‡æ–°å°è¯•ç™»å½•</li>
    <li>ğŸ“ ä½¿ç”¨é‚®ç®±æ³¨å†Œ</li>
    <li>ğŸ‘¤ æ¸¸å®¢æ¨¡å¼æµè§ˆ</li>
  </ul>
  <button onclick="retryLogin()">é‡æ–°ç™»å½•</button>
</div>
```

### 3.2 Scopeæƒé™ä¸è¶³é—®é¢˜


**ğŸ”’ ä»€ä¹ˆæ˜¯Scope**
- Scopeå°±æ˜¯"æƒé™èŒƒå›´"ï¼Œå†³å®šåº”ç”¨èƒ½è·å–ç”¨æˆ·å“ªäº›ä¿¡æ¯
- ä¸åŒå¹³å°çš„Scopeå®šä¹‰ä¸åŒ

```
å¾®ä¿¡Scopeç¤ºä¾‹ï¼š
snsapi_base  â†’ åªèƒ½è·å–ç”¨æˆ·openidï¼ˆæœ€åŸºç¡€ï¼‰
snsapi_userinfo â†’ å¯ä»¥è·å–ç”¨æˆ·æ˜µç§°ã€å¤´åƒç­‰ï¼ˆéœ€ç”¨æˆ·åŒæ„ï¼‰
```

**ğŸ“‹ æƒé™ä¸è¶³çš„å¸¸è§é—®é¢˜**
```
é—®é¢˜åœºæ™¯ï¼š
åº”ç”¨ç”³è¯·äº† snsapi_userinfo â†’ ä½†ç”¨æˆ·åªæˆæƒäº† snsapi_base
                            â†“
                      æ— æ³•è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
```

**ğŸ› ï¸ åŠ¨æ€æƒé™å¤„ç†**
```javascript
class AuthService {
  async handleUserInfo(accessToken, openid, scope) {
    // æ ¹æ®å®é™…æƒé™å†³å®šè·å–ä»€ä¹ˆä¿¡æ¯
    if (scope.includes('snsapi_userinfo')) {
      // æœ‰æƒé™è·å–è¯¦ç»†ä¿¡æ¯
      return await this.getUserDetailInfo(accessToken, openid);
    } else {
      // åªæœ‰åŸºç¡€æƒé™ï¼Œåˆ›å»ºç®€åŒ–ç”¨æˆ·ä¿¡æ¯
      return {
        openid: openid,
        nickname: 'å¾®ä¿¡ç”¨æˆ·', // é»˜è®¤æ˜µç§°
        avatar: '/default-avatar.png', // é»˜è®¤å¤´åƒ
        scope: 'basic' // æ ‡è®°æƒé™çº§åˆ«
      };
    }
  }

  async getUserDetailInfo(accessToken, openid) {
    try {
      const response = await fetch(
        `https://api.weixin.qq.com/sns/userinfo?access_token=${accessToken}&openid=${openid}`
      );
      return await response.json();
    } catch (error) {
      console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
      // é™çº§å¤„ç†
      return { openid, nickname: 'å¾®ä¿¡ç”¨æˆ·' };
    }
  }
}
```

### 3.3 å¹³å°APIè°ƒç”¨é™åˆ¶


**ğŸ“Š å¸¸è§çš„APIé™åˆ¶**
```
é™åˆ¶ç±»å‹ï¼š
â”Œâ”€ é¢‘ç‡é™åˆ¶ï¼šæ¯åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚
â”œâ”€ é…é¢é™åˆ¶ï¼šæ¯å¤©æœ€å¤š10000æ¬¡è¯·æ±‚  
â”œâ”€ å¹¶å‘é™åˆ¶ï¼šåŒæ—¶æœ€å¤š10ä¸ªè¯·æ±‚
â””â”€ IPé™åˆ¶ï¼šå•IPé™åˆ¶è®¿é—®é¢‘ç‡
```

**ğŸš¦ é™æµå¤„ç†ç­–ç•¥**
```javascript
class RateLimitedClient {
  constructor() {
    this.requestQueue = [];
    this.isProcessing = false;
    this.lastRequestTime = 0;
    this.minInterval = 1000; // æœ€å°é—´éš”1ç§’
  }

  async makeRequest(url, options) {
    return new Promise((resolve, reject) => {
      // æ·»åŠ åˆ°é˜Ÿåˆ—
      this.requestQueue.push({ url, options, resolve, reject });
      this.processQueue();
    });
  }

  async processQueue() {
    if (this.isProcessing || this.requestQueue.length === 0) return;
    
    this.isProcessing = true;
    
    while (this.requestQueue.length > 0) {
      // æ§åˆ¶è¯·æ±‚é—´éš”
      const now = Date.now();
      const timeSinceLastRequest = now - this.lastRequestTime;
      
      if (timeSinceLastRequest < this.minInterval) {
        await this.sleep(this.minInterval - timeSinceLastRequest);
      }

      const { url, options, resolve, reject } = this.requestQueue.shift();
      
      try {
        const response = await fetch(url, options);
        
        // æ£€æŸ¥æ˜¯å¦è¢«é™æµ
        if (response.status === 429) {
          console.log('é‡åˆ°é™æµï¼Œç­‰å¾…é‡è¯•...');
          await this.sleep(5000); // ç­‰å¾…5ç§’
          this.requestQueue.unshift({ url, options, resolve, reject }); // é‡æ–°åŠ å…¥é˜Ÿåˆ—
          continue;
        }
        
        resolve(response);
        this.lastRequestTime = Date.now();
        
      } catch (error) {
        reject(error);
      }
    }
    
    this.isProcessing = false;
  }

  sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}
```

---

## 4. ğŸŒ å¤šç¯å¢ƒè°ƒè¯•ç­–ç•¥


### 4.1 å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢


**ğŸ—ï¸ ç¯å¢ƒé…ç½®ç®¡ç†**
```
ç¯å¢ƒç±»å‹ï¼š
å¼€å‘ç¯å¢ƒ(dev)   â†’ æœ¬åœ°å¼€å‘ï¼Œä½¿ç”¨æµ‹è¯•æ•°æ®
æµ‹è¯•ç¯å¢ƒ(test)  â†’ åŠŸèƒ½æµ‹è¯•ï¼Œæ¨¡æ‹ŸçœŸå®ç¯å¢ƒ  
ç”Ÿäº§ç¯å¢ƒ(prod)  â†’ çº¿ä¸Šè¿è¡Œï¼ŒçœŸå®ç”¨æˆ·ä½¿ç”¨
```

**ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„**
```javascript
// config/environments.js
const environments = {
  development: {
    // å¼€å‘ç¯å¢ƒé…ç½®
    api: {
      baseUrl: 'https://dev-api.yourdomain.com',
      timeout: 30000
    },
    oauth: {
      wechat: {
        appId: 'dev_wechat_app_id',
        appSecret: 'dev_wechat_secret',
        redirectUri: 'https://dev.yourdomain.com/auth/wechat/callback'
      },
      qq: {
        appId: 'dev_qq_app_id',
        appSecret: 'dev_qq_secret',
        redirectUri: 'https://dev.yourdomain.com/auth/qq/callback'
      }
    },
    debug: true,
    logLevel: 'debug'
  },
  
  production: {
    // ç”Ÿäº§ç¯å¢ƒé…ç½®
    api: {
      baseUrl: 'https://api.yourdomain.com',
      timeout: 10000
    },
    oauth: {
      wechat: {
        appId: process.env.WECHAT_APP_ID,
        appSecret: process.env.WECHAT_APP_SECRET,
        redirectUri: 'https://yourdomain.com/auth/wechat/callback'
      }
    },
    debug: false,
    logLevel: 'error'
  }
};

// æ ¹æ®ç¯å¢ƒå˜é‡é€‰æ‹©é…ç½®
const currentEnv = process.env.NODE_ENV || 'development';
module.exports = environments[currentEnv];
```

**ğŸ”„ ç¯å¢ƒåˆ‡æ¢å·¥å…·**
```bash
# package.json
{
  "scripts": {
    "dev": "NODE_ENV=development npm start",
    "test": "NODE_ENV=testing npm start", 
    "prod": "NODE_ENV=production npm start"
  }
}

# ä½¿ç”¨ä¸åŒç¯å¢ƒ
npm run dev   # å¼€å‘ç¯å¢ƒ
npm run test  # æµ‹è¯•ç¯å¢ƒ
npm run prod  # ç”Ÿäº§ç¯å¢ƒ
```

### 4.2 è°ƒè¯•å·¥å…·ä½¿ç”¨æŠ€å·§


**ğŸ” æµè§ˆå™¨è°ƒè¯•æŠ€å·§**
```
å¼€å‘è€…å·¥å…·ä½¿ç”¨ï¼š
â”Œâ”€ Networké¢æ¿ï¼šæŸ¥çœ‹OAuthè¯·æ±‚å“åº”
â”œâ”€ Consoleé¢æ¿ï¼šæŸ¥çœ‹é”™è¯¯æ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯
â”œâ”€ Applicationé¢æ¿ï¼šæ£€æŸ¥Tokenå­˜å‚¨
â””â”€ Sourcesé¢æ¿ï¼šè®¾ç½®æ–­ç‚¹è°ƒè¯•
```

**ğŸ’» ä»£ç è°ƒè¯•å·¥å…·**
```javascript
// è°ƒè¯•å·¥å…·ç±»
class OAuthDebugger {
  constructor(enabled = false) {
    this.enabled = enabled;
  }

  log(type, message, data = null) {
    if (!this.enabled) return;
    
    const timestamp = new Date().toISOString();
    const prefix = `[OAuth-${type}] ${timestamp}:`;
    
    if (data) {
      console.group(prefix, message);
      console.table(data);
      console.groupEnd();
    } else {
      console.log(prefix, message);
    }
  }

  logRequest(url, params) {
    this.log('REQUEST', `å‘èµ·OAuthè¯·æ±‚: ${url}`, params);
  }

  logResponse(status, data) {
    this.log('RESPONSE', `æ”¶åˆ°å“åº”: ${status}`, data);
  }

  logError(error, context) {
    this.log('ERROR', `å‘ç”Ÿé”™è¯¯: ${error.message}`, { 
      error: error.stack,
      context 
    });
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const debugger = new OAuthDebugger(process.env.NODE_ENV === 'development');

async function handleOAuthCallback(code) {
  debugger.logRequest('Token Exchange', { code });
  
  try {
    const token = await exchangeCodeForToken(code);
    debugger.logResponse('200', { token: token.substring(0, 10) + '...' });
    return token;
  } catch (error) {
    debugger.logError(error, { code });
    throw error;
  }
}
```

### 4.3 æ—¥å¿—è®°å½•ä¸åˆ†æ


**ğŸ“ ç»“æ„åŒ–æ—¥å¿—è®¾è®¡**
```javascript
// æ—¥å¿—å·¥å…·
class AuthLogger {
  constructor() {
    this.logs = [];
  }

  logAuthStart(provider, userId = null) {
    this.addLog('AUTH_START', {
      provider,
      userId,
      userAgent: navigator.userAgent,
      timestamp: Date.now()
    });
  }

  logAuthSuccess(provider, userId, userInfo) {
    this.addLog('AUTH_SUCCESS', {
      provider,
      userId,
      userName: userInfo.nickname,
      duration: this.getAuthDuration()
    });
  }

  logAuthError(provider, error, step) {
    this.addLog('AUTH_ERROR', {
      provider,
      error: error.message,
      step, // åœ¨å“ªä¸ªæ­¥éª¤å‡ºé”™
      errorCode: error.code
    });
  }

  addLog(type, data) {
    const logEntry = {
      type,
      timestamp: new Date().toISOString(),
      sessionId: this.getSessionId(),
      ...data
    };
    
    this.logs.push(logEntry);
    
    // å‘é€åˆ°æœåŠ¡å™¨ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
    if (process.env.NODE_ENV === 'production') {
      this.sendToServer(logEntry);
    }
  }

  // å¯¼å‡ºæ—¥å¿—ç”¨äºè°ƒè¯•
  exportLogs() {
    return {
      session: this.getSessionId(),
      userAgent: navigator.userAgent,
      logs: this.logs,
      summary: this.generateSummary()
    };
  }
}
```

---

## 5. ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®


### 5.1 APIè°ƒç”¨å¤±è´¥é‡è¯•æœºåˆ¶


**ğŸ”„ æ™ºèƒ½é‡è¯•ç­–ç•¥**
```
é‡è¯•åœºæ™¯ï¼š
ç½‘ç»œè¶…æ—¶ â†’ ç«‹å³é‡è¯•1æ¬¡
æœåŠ¡å™¨é”™è¯¯(5xx) â†’ æŒ‡æ•°é€€é¿é‡è¯•
é™æµé”™è¯¯(429) â†’ ç­‰å¾…åé‡è¯•
å®¢æˆ·ç«¯é”™è¯¯(4xx) â†’ ä¸é‡è¯•ï¼ˆé…ç½®é—®é¢˜ï¼‰
```

**âš¡ é‡è¯•å®ç°**
```javascript
class SmartRetrier {
  constructor(options = {}) {
    this.maxRetries = options.maxRetries || 3;
    this.baseDelay = options.baseDelay || 1000;
    this.maxDelay = options.maxDelay || 10000;
  }

  async executeWithRetry(asyncFn, context = '') {
    let lastError;
    
    for (let attempt = 0; attempt <= this.maxRetries; attempt++) {
      try {
        const result = await asyncFn();
        
        // æˆåŠŸäº†ï¼Œè®°å½•æ¢å¤æ—¥å¿—
        if (attempt > 0) {
          console.log(`âœ… ${context} åœ¨ç¬¬${attempt + 1}æ¬¡å°è¯•åæˆåŠŸ`);
        }
        
        return result;
        
      } catch (error) {
        lastError = error;
        
        // æ£€æŸ¥æ˜¯å¦åº”è¯¥é‡è¯•
        if (!this.shouldRetry(error, attempt)) {
          console.error(`âŒ ${context} å¤±è´¥ï¼Œä¸å†é‡è¯•:`, error.message);
          throw error;
        }
        
        // è®¡ç®—å»¶è¿Ÿæ—¶é—´ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
        const delay = Math.min(
          this.baseDelay * Math.pow(2, attempt),
          this.maxDelay
        );
        
        console.warn(`âš ï¸ ${context} ç¬¬${attempt + 1}æ¬¡å°è¯•å¤±è´¥ï¼Œ${delay}msåé‡è¯•:`, error.message);
        
        // ç­‰å¾…åé‡è¯•
        await this.sleep(delay);
      }
    }
    
    throw lastError;
  }

  shouldRetry(error, attempt) {
    // å·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°
    if (attempt >= this.maxRetries) return false;
    
    // ç½‘ç»œé”™è¯¯ï¼Œå¯ä»¥é‡è¯•
    if (error.code === 'NETWORK_ERROR') return true;
    
    // HTTPçŠ¶æ€ç åˆ¤æ–­
    if (error.status) {
      // æœåŠ¡å™¨é”™è¯¯ï¼Œå¯ä»¥é‡è¯•
      if (error.status >= 500) return true;
      
      // é™æµé”™è¯¯ï¼Œå¯ä»¥é‡è¯•
      if (error.status === 429) return true;
      
      // å®¢æˆ·ç«¯é”™è¯¯ï¼Œä¸é‡è¯•
      if (error.status >= 400 && error.status < 500) return false;
    }
    
    return true; // å…¶ä»–æƒ…å†µé»˜è®¤é‡è¯•
  }

  sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const retrier = new SmartRetrier({ maxRetries: 3, baseDelay: 1000 });

async function getAccessToken(code) {
  return retrier.executeWithRetry(async () => {
    const response = await fetch('/api/oauth/token', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ code })
    });
    
    if (!response.ok) {
      const error = new Error(`HTTP ${response.status}`);
      error.status = response.status;
      throw error;
    }
    
    return response.json();
  }, 'Tokenè·å–');
}
```

### 5.2 Tokenç¼“å­˜å‡å°‘APIè°ƒç”¨


**ğŸ’¾ ç¼“å­˜ç­–ç•¥è®¾è®¡**
```
ç¼“å­˜å±‚çº§ï¼š
å†…å­˜ç¼“å­˜(æœ€å¿«) â†’ æœ¬åœ°å­˜å‚¨ â†’ æœåŠ¡å™¨ç¼“å­˜
    â†“              â†“           â†“
   ç«‹å³å“åº”      è¾ƒå¿«å“åº”     éœ€è¦ç½‘ç»œè¯·æ±‚
```

**ğŸª å¤šçº§ç¼“å­˜å®ç°**
```javascript
class TokenCache {
  constructor() {
    this.memoryCache = new Map(); // å†…å­˜ç¼“å­˜
    this.storage = localStorage;   // æµè§ˆå™¨å­˜å‚¨
  }

  // è·å–Tokenï¼ˆå¤šçº§ç¼“å­˜ï¼‰
  async getToken(key) {
    // 1. å…ˆæŸ¥å†…å­˜ç¼“å­˜
    const memoryToken = this.memoryCache.get(key);
    if (memoryToken && !this.isExpired(memoryToken)) {
      console.log('ğŸš€ ä»å†…å­˜ç¼“å­˜è·å–Token');
      return memoryToken.value;
    }

    // 2. æŸ¥æœ¬åœ°å­˜å‚¨
    const storedToken = this.getFromStorage(key);
    if (storedToken && !this.isExpired(storedToken)) {
      console.log('ğŸ’¾ ä»æœ¬åœ°å­˜å‚¨è·å–Token');
      // åŒæ­¥åˆ°å†…å­˜ç¼“å­˜
      this.memoryCache.set(key, storedToken);
      return storedToken.value;
    }

    // 3. ä»æœåŠ¡å™¨è·å–
    console.log('ğŸŒ ä»æœåŠ¡å™¨è·å–Token');
    const newToken = await this.fetchFromServer(key);
    
    // ç¼“å­˜åˆ°å„ä¸ªå±‚çº§
    this.setToken(key, newToken.value, newToken.expiresIn);
    
    return newToken.value;
  }

  // è®¾ç½®Tokenåˆ°æ‰€æœ‰ç¼“å­˜å±‚
  setToken(key, value, expiresIn) {
    const expireTime = Date.now() + (expiresIn * 1000);
    const tokenData = { value, expireTime };

    // å­˜å‚¨åˆ°å†…å­˜ç¼“å­˜
    this.memoryCache.set(key, tokenData);

    // å­˜å‚¨åˆ°æœ¬åœ°å­˜å‚¨
    this.storage.setItem(key, JSON.stringify(tokenData));
  }

  // æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼ˆæå‰5åˆ†é’Ÿï¼‰
  isExpired(tokenData) {
    const fiveMinutes = 5 * 60 * 1000;
    return Date.now() + fiveMinutes >= tokenData.expireTime;
  }

  getFromStorage(key) {
    try {
      const stored = this.storage.getItem(key);
      return stored ? JSON.parse(stored) : null;
    } catch (error) {
      console.warn('æœ¬åœ°å­˜å‚¨è¯»å–å¤±è´¥:', error);
      return null;
    }
  }

  // æ¸…é™¤è¿‡æœŸç¼“å­˜
  clearExpired() {
    // æ¸…ç†å†…å­˜ç¼“å­˜
    for (const [key, tokenData] of this.memoryCache.entries()) {
      if (this.isExpired(tokenData)) {
        this.memoryCache.delete(key);
      }
    }

    // æ¸…ç†æœ¬åœ°å­˜å‚¨
    for (let i = 0; i < this.storage.length; i++) {
      const key = this.storage.key(i);
      const tokenData = this.getFromStorage(key);
      if (tokenData && this.isExpired(tokenData)) {
        this.storage.removeItem(key);
      }
    }
  }
}
```

### 5.3 ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆæ— æ„Ÿåˆ·æ–°ï¼‰


**âœ¨ æ— æ„Ÿåˆ·æ–°çš„ç”¨æˆ·ä½“éªŒ**
```
ä¼ ç»Ÿä½“éªŒï¼š
ç”¨æˆ·æ“ä½œ â†’ Tokenè¿‡æœŸ â†’ å¼¹å‡ºç™»å½•æ¡† â†’ ç”¨æˆ·é‡æ–°ç™»å½• â†’ ç»§ç»­æ“ä½œ
                      â†‘
                  ä½“éªŒä¸­æ–­

æ— æ„Ÿåˆ·æ–°ï¼š
ç”¨æˆ·æ“ä½œ â†’ Tokenè¿‡æœŸ â†’ åå°è‡ªåŠ¨åˆ·æ–° â†’ ç»§ç»­æ“ä½œ
                      â†‘
                  ç”¨æˆ·æ— æ„ŸçŸ¥
```

**ğŸ”„ æ— æ„Ÿåˆ·æ–°å®ç°**
```javascript
class SeamlessAuthManager {
  constructor() {
    this.refreshPromise = null;
    this.requestQueue = [];
  }

  // å¸¦è‡ªåŠ¨åˆ·æ–°çš„APIè¯·æ±‚
  async authenticatedRequest(url, options = {}) {
    try {
      // ç¡®ä¿æœ‰æœ‰æ•ˆToken
      const token = await this.ensureValidToken();
      
      // æ·»åŠ è®¤è¯å¤´
      const authOptions = {
        ...options,
        headers: {
          ...options.headers,
          'Authorization': `Bearer ${token}`
        }
      };

      const response = await fetch(url, authOptions);

      // å¦‚æœTokenè¿‡æœŸäº†
      if (response.status === 401) {
        console.log('Tokenå·²è¿‡æœŸï¼Œå°è¯•åˆ·æ–°...');
        
        // åˆ·æ–°Tokenå¹¶é‡è¯•
        const newToken = await this.forceRefreshToken();
        authOptions.headers['Authorization'] = `Bearer ${newToken}`;
        
        return fetch(url, authOptions);
      }

      return response;

    } catch (error) {
      console.error('è®¤è¯è¯·æ±‚å¤±è´¥:', error);
      throw error;
    }
  }

  async ensureValidToken() {
    const currentToken = this.getCurrentToken();
    
    // æ£€æŸ¥Tokenæ˜¯å¦å¿«è¿‡æœŸ
    if (this.isTokenExpiringSoon(currentToken)) {
      return this.forceRefreshToken();
    }
    
    return currentToken;
  }

  async forceRefreshToken() {
    // é˜²æ­¢å¹¶å‘åˆ·æ–°
    if (this.refreshPromise) {
      console.log('ç­‰å¾…å…¶ä»–è¯·æ±‚å®Œæˆåˆ·æ–°...');
      return this.refreshPromise;
    }

    this.refreshPromise = this.doRefreshToken();
    
    try {
      const newToken = await this.refreshPromise;
      return newToken;
    } finally {
      this.refreshPromise = null;
    }
  }

  async doRefreshToken() {
    try {
      const refreshToken = this.getRefreshToken();
      
      const response = await fetch('/api/auth/refresh', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ refreshToken })
      });

      if (!response.ok) {
        throw new Error('åˆ·æ–°å¤±è´¥ï¼Œéœ€è¦é‡æ–°ç™»å½•');
      }

      const data = await response.json();
      
      // ä¿å­˜æ–°Token
      this.saveTokens(data.accessToken, data.refreshToken);
      
      console.log('âœ… Tokenåˆ·æ–°æˆåŠŸ');
      return data.accessToken;

    } catch (error) {
      console.error('âŒ Tokenåˆ·æ–°å¤±è´¥:', error);
      
      // åˆ·æ–°å¤±è´¥ï¼Œå¼•å¯¼ç”¨æˆ·é‡æ–°ç™»å½•
      this.redirectToLogin();
      throw error;
    }
  }

  isTokenExpiringSoon(token) {
    if (!token) return true;
    
    try {
      // è§£æJWT Tokençš„è¿‡æœŸæ—¶é—´
      const payload = JSON.parse(atob(token.split('.')[1]));
      const expTime = payload.exp * 1000;
      const fiveMinutesFromNow = Date.now() + (5 * 60 * 1000);
      
      return expTime < fiveMinutesFromNow;
    } catch (error) {
      return true; // è§£æå¤±è´¥ï¼Œè®¤ä¸ºè¿‡æœŸ
    }
  }
}

// å…¨å±€ä½¿ç”¨
const authManager = new SeamlessAuthManager();

// æ‰€æœ‰APIè°ƒç”¨éƒ½é€šè¿‡è®¤è¯ç®¡ç†å™¨
async function getUserProfile() {
  const response = await authManager.authenticatedRequest('/api/user/profile');
  return response.json();
}

async function updateUserInfo(data) {
  const response = await authManager.authenticatedRequest('/api/user/update', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
  return response.json();
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„é—®é¢˜å¤„ç†æ€è·¯


```
ğŸ”¸ å›è°ƒåœ°å€é—®é¢˜ï¼šé…ç½®è¦å‡†ç¡®ï¼Œç¯å¢ƒè¦ä¸€è‡´ï¼Œè°ƒè¯•æœ‰æ–¹æ³•
ğŸ”¸ Tokenç®¡ç†ï¼šè·å–è¦ç¨³å®šï¼Œè¿‡æœŸè¦è‡ªåŠ¨å¤„ç†ï¼Œå¹¶å‘è¦å®‰å…¨
ğŸ”¸ ç”¨æˆ·ä½“éªŒï¼šå–æ¶ˆæœ‰å¼•å¯¼ï¼Œæƒé™é™çº§å¤„ç†ï¼Œé”™è¯¯å‹å¥½æç¤º
ğŸ”¸ å¤šç¯å¢ƒè°ƒè¯•ï¼šé…ç½®è¦åˆ†ç¦»ï¼Œå·¥å…·è¦ç†Ÿæ‚‰ï¼Œæ—¥å¿—è¦è¯¦ç»†
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šé‡è¯•è¦æ™ºèƒ½ï¼Œç¼“å­˜è¦å¤šçº§ï¼Œåˆ·æ–°è¦æ— æ„Ÿ
```

### 6.2 æ•…éšœæ’æŸ¥çš„æ ¸å¿ƒæ–¹æ³•


**ğŸ” é—®é¢˜å®šä½æµç¨‹**
```
å‘ç°é—®é¢˜ â†’ æŸ¥çœ‹æ—¥å¿— â†’ åˆ†æé”™è¯¯ â†’ å®šä½åŸå›  â†’ è§£å†³é—®é¢˜ â†’ éªŒè¯ä¿®å¤
    â†“         â†“         â†“         â†“         â†“         â†“
  ç”¨æˆ·åé¦ˆ   é”™è¯¯ç      ç½‘ç»œ/é…ç½®   ä»£ç é€»è¾‘   ä¿®æ”¹ä»£ç    æµ‹è¯•éªŒè¯
```

**ğŸ“Š å¸¸ç”¨è°ƒè¯•æ£€æŸ¥æ¸…å•**
```
â–¡ ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
â–¡ é…ç½®å‚æ•°æ˜¯å¦æ­£ç¡®
â–¡ Tokenæ˜¯å¦æœ‰æ•ˆ/è¿‡æœŸ
â–¡ æƒé™èŒƒå›´æ˜¯å¦è¶³å¤Ÿ
â–¡ é”™è¯¯æ—¥å¿—æ˜¯å¦å®Œæ•´
â–¡ ç”¨æˆ·æ“ä½œæ˜¯å¦æ­£ç¡®
â–¡ ç¯å¢ƒé…ç½®æ˜¯å¦åŒ¹é…
â–¡ ç¬¬ä¸‰æ–¹æœåŠ¡æ˜¯å¦å¯ç”¨
```

### 6.3 æœ€ä½³å®è·µå»ºè®®


**âœ… å¼€å‘å»ºè®®**
- **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šå‡è®¾æ‰€æœ‰å¤–éƒ¨è°ƒç”¨éƒ½å¯èƒ½å¤±è´¥
- **ç”¨æˆ·å‹å¥½**ï¼šé”™è¯¯æç¤ºè¦äººæ€§åŒ–ï¼Œä¸è¦æš´éœ²æŠ€æœ¯ç»†èŠ‚
- **ç¯å¢ƒéš”ç¦»**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¸¥æ ¼åˆ†ç¦»
- **ç›‘æ§å®Œå–„**ï¼šå…³é”®èŠ‚ç‚¹éƒ½è¦æœ‰æ—¥å¿—è®°å½•
- **ç¼“å­˜åˆç†**ï¼šå¹³è¡¡æ€§èƒ½ä¸æ•°æ®ä¸€è‡´æ€§

**ğŸš¨ å¸¸è§é™·é˜±**
- **å›è°ƒåœ°å€å†™æ­»**ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
- **Tokenæ˜æ–‡å­˜å‚¨**ï¼šæ•æ„Ÿä¿¡æ¯è¦åŠ å¯†ä¿å­˜
- **é”™è¯¯å¤„ç†ç¼ºå¤±**ï¼šä»»ä½•APIè°ƒç”¨éƒ½è¦æœ‰é”™è¯¯å¤„ç†
- **å¹¶å‘é—®é¢˜å¿½è§†**ï¼šå¤šç”¨æˆ·åŒæ—¶æ“ä½œè¦è€ƒè™‘å¹¶å‘å®‰å…¨
- **ç”¨æˆ·ä½“éªŒå¿½ç•¥**ï¼šæŠ€æœ¯å®ç°è¦è€ƒè™‘ç”¨æˆ·æ„Ÿå—

> ğŸ’¡ **æ€»ç»“**ï¼šç¬¬ä¸‰æ–¹ç™»å½•é›†æˆçœ‹ä¼¼ç®€å•ï¼Œä½†å®é™…å¼€å‘ä¸­ä¼šé‡åˆ°å„ç§é—®é¢˜ã€‚å…³é”®æ˜¯è¦æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€å‹å¥½çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼Œä»¥åŠå¯é çš„è°ƒè¯•å’Œç›‘æ§æ‰‹æ®µã€‚è®°ä½ï¼š**ç”¨æˆ·ä¸å…³å¿ƒæŠ€æœ¯ç»†èŠ‚ï¼Œåªå…³å¿ƒèƒ½ä¸èƒ½é¡ºåˆ©ç™»å½•ä½¿ç”¨**ã€‚