---
title: 14ã€æƒé™ç®¡ç†ç³»ç»Ÿè®¾è®¡
---
## ğŸ“š ç›®å½•

1. [æƒé™ç®¡ç†ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ](#1-æƒé™ç®¡ç†ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ)
2. [ç”¨æˆ·è§’è‰²æƒé™æ¨¡å‹è®¾è®¡](#2-ç”¨æˆ·è§’è‰²æƒé™æ¨¡å‹è®¾è®¡)
3. [è§’è‰²å·¥ç¨‹ä½“ç³»](#3-è§’è‰²å·¥ç¨‹ä½“ç³»)
4. [åŠ¨æ€æƒé™æ§åˆ¶](#4-åŠ¨æ€æƒé™æ§åˆ¶)
5. [ç™»å½•æ¨¡å—æ¶æ„è®¾è®¡](#5-ç™»å½•æ¨¡å—æ¶æ„è®¾è®¡)
6. [Tokenæœºåˆ¶è¯¦è§£](#6-Tokenæœºåˆ¶è¯¦è§£)
7. [æ¥å£æƒé™æ§åˆ¶](#7-æ¥å£æƒé™æ§åˆ¶)
8. [å‰åç«¯è”è°ƒæµç¨‹](#8-å‰åç«¯è”è°ƒæµç¨‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” æƒé™ç®¡ç†ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†ç³»ç»Ÿ


**ğŸ¯ é€šä¿—ç†è§£**
æƒé™ç®¡ç†ç³»ç»Ÿå°±åƒå…¬å¸çš„é—¨ç¦å¡ç³»ç»Ÿï¼š
- æ¯ä¸ªå‘˜å·¥æœ‰è‡ªå·±çš„å·¥å¡ï¼ˆç”¨æˆ·è´¦å·ï¼‰
- ä¸åŒå²—ä½çš„äººèƒ½è¿›å…¥ä¸åŒåŒºåŸŸï¼ˆè§’è‰²æƒé™ï¼‰
- HRèƒ½è¿›äººäº‹éƒ¨ï¼Œè´¢åŠ¡èƒ½è¿›è´¢åŠ¡éƒ¨ï¼ˆæƒé™æ§åˆ¶ï¼‰
- æ€»ç»ç†å“ªé‡Œéƒ½èƒ½è¿›ï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰

```
ç°å®åœºæ™¯å¯¹æ¯”ï¼š
å…¬å¸é—¨ç¦ â†â†’ ç³»ç»Ÿæƒé™
å‘˜å·¥å·¥å¡ â†â†’ ç”¨æˆ·è´¦å·
èŒä½ç­‰çº§ â†â†’ ç”¨æˆ·è§’è‰²
é—¨ç¦æƒé™ â†â†’ ç³»ç»Ÿæƒé™
åˆ·å¡è®°å½• â†â†’ æ“ä½œæ—¥å¿—
```

### 1.2 æƒé™ç®¡ç†çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜


**ğŸ”¸ ä½ æ˜¯è°ï¼Ÿï¼ˆAuthentication - è®¤è¯ï¼‰**
```
é—®é¢˜ï¼šç³»ç»Ÿå¦‚ä½•ç¡®è®¤ç”¨æˆ·èº«ä»½ï¼Ÿ
è§£å†³ï¼šç”¨æˆ·åå¯†ç ã€æ‰‹æœºéªŒè¯ç ã€æŒ‡çº¹è¯†åˆ«ç­‰
ç›®çš„ï¼šç¡®ä¿ç”¨æˆ·æ˜¯æœ¬äººï¼Œä¸æ˜¯å†’å……çš„
```

**ğŸ”¸ ä½ èƒ½åšä»€ä¹ˆï¼Ÿï¼ˆAuthorization - æˆæƒï¼‰**
```
é—®é¢˜ï¼šç¡®è®¤èº«ä»½åï¼Œç”¨æˆ·èƒ½æ‰§è¡Œå“ªäº›æ“ä½œï¼Ÿ
è§£å†³ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²åˆ†é…å¯¹åº”æƒé™
ç›®çš„ï¼šç¡®ä¿ç”¨æˆ·åªèƒ½åšè¢«å…è®¸çš„äº‹æƒ…
```

**ğŸ”¸ ä½ åšäº†ä»€ä¹ˆï¼Ÿï¼ˆAudit - å®¡è®¡ï¼‰**
```
é—®é¢˜ï¼šç”¨æˆ·æ‰§è¡Œäº†å“ªäº›æ“ä½œï¼Ÿ
è§£å†³ï¼šè®°å½•ç”¨æˆ·çš„æ‰€æœ‰å…³é”®æ“ä½œ
ç›®çš„ï¼šè¿½è¸ªé—®é¢˜ï¼Œåˆ†æè¡Œä¸ºï¼Œåˆè§„è¦æ±‚
```

### 1.3 æƒé™ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒä»·å€¼


**ğŸ’¡ å®‰å…¨é˜²æŠ¤**
- é˜²æ­¢æœªæˆæƒè®¿é—®ï¼šåªæœ‰åˆæ³•ç”¨æˆ·æ‰èƒ½ç™»å½•
- é˜²æ­¢è¶Šæƒæ“ä½œï¼šæ™®é€šå‘˜å·¥ä¸èƒ½åˆ é™¤é‡è¦æ•°æ®
- æ•°æ®å®‰å…¨ä¿éšœï¼šæ•æ„Ÿä¿¡æ¯åªæœ‰ç›¸å…³äººå‘˜èƒ½çœ‹åˆ°

**ğŸ¯ ä¸šåŠ¡æ”¯æ’‘**
- å·¥ä½œæµç¨‹ç®¡æ§ï¼šä¸åŒå²—ä½çš„äººå¤„ç†ä¸åŒç¯èŠ‚
- è´£ä»»æ˜ç¡®ï¼šæ¯ä¸ªæ“ä½œéƒ½èƒ½è¿½è¸ªåˆ°å…·ä½“äººå‘˜
- æ•ˆç‡æå‡ï¼šæ ¹æ®èŒè´£å¿«é€Ÿåˆ†é…å¯¹åº”æƒé™

---

## 2. ğŸ‘¥ ç”¨æˆ·è§’è‰²æƒé™æ¨¡å‹è®¾è®¡


### 2.1 ç»å…¸çš„RBACæ¨¡å‹


**ğŸ”¸ RBACæ˜¯ä»€ä¹ˆï¼Ÿ**
RBACï¼ˆRole-Based Access Controlï¼‰= åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
ç®€å•è¯´ï¼š**ç»™è§’è‰²åˆ†é…æƒé™ï¼Œç»™ç”¨æˆ·åˆ†é…è§’è‰²**

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆéš¾ç®¡ç†ï¼‰ï¼š
ç”¨æˆ·A â†’ æƒé™1ã€æƒé™2ã€æƒé™3ã€æƒé™4...
ç”¨æˆ·B â†’ æƒé™1ã€æƒé™2ã€æƒé™5ã€æƒé™6...
ç”¨æˆ·C â†’ æƒé™1ã€æƒé™3ã€æƒé™7ã€æƒé™8...

RBACæ–¹å¼ï¼ˆå¥½ç®¡ç†ï¼‰ï¼š
ç®¡ç†å‘˜è§’è‰² â†’ æ‰€æœ‰æƒé™
ç¼–è¾‘è§’è‰² â†’ å†…å®¹ç›¸å…³æƒé™
æŸ¥çœ‹è€…è§’è‰² â†’ åªè¯»æƒé™

ç”¨æˆ·A â†’ ç®¡ç†å‘˜è§’è‰²
ç”¨æˆ·B â†’ ç¼–è¾‘è§’è‰²  
ç”¨æˆ·C â†’ æŸ¥çœ‹è€…è§’è‰²
```

### 2.2 æ ¸å¿ƒä¸‰è¦ç´ æ¨¡å‹


**ğŸ“Š ç”¨æˆ·-è§’è‰²-æƒé™å…³ç³»å›¾**
```
ç”¨æˆ·(User)     è§’è‰²(Role)        æƒé™(Permission)
    |             |                    |
å¼ ä¸‰å‘˜å·¥ â€”â€”â€”â€”â€”â€”â†’ é”€å”®ç»ç† â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â†’ æŸ¥çœ‹å®¢æˆ·ä¿¡æ¯
æå››å‘˜å·¥ â€”â€”â€”â€”â€”â€”â†’ è´¢åŠ¡ä¸“å‘˜ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â†’ å¤„ç†è´¢åŠ¡æŠ¥è¡¨  
ç‹äº”å‘˜å·¥ â€”â€”â€”â€”â€”â€”â†’ ç³»ç»Ÿç®¡ç†å‘˜ â€”â€”â€”â€”â€”â€”â€”â€”â†’ ç®¡ç†ç”¨æˆ·è´¦å·
    |             |                    |
   å¤šå¯¹å¤š         å¤šå¯¹å¤š              å…·ä½“åŠŸèƒ½ç‚¹
```

**ğŸ”¸ ç”¨æˆ·ï¼ˆUserï¼‰**
```javascript
// ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
const user = {
    id: 1001,
    username: "zhangsan",
    email: "zhangsan@company.com",
    phone: "13800138000",
    status: "active",        // è´¦å·çŠ¶æ€ï¼šæ¿€æ´»ã€ç¦ç”¨
    createTime: "2024-01-15",
    lastLoginTime: "2024-01-20"
};
```

**ğŸ”¸ è§’è‰²ï¼ˆRoleï¼‰**
```javascript
// è§’è‰²å®šä¹‰
const role = {
    id: 2001,
    name: "sales_manager",
    displayName: "é”€å”®ç»ç†",
    description: "è´Ÿè´£é”€å”®å›¢é˜Ÿç®¡ç†å’Œå®¢æˆ·ç»´æŠ¤",
    status: "active",
    permissions: [3001, 3002, 3003]  // å…³è”çš„æƒé™IDåˆ—è¡¨
};
```

**ğŸ”¸ æƒé™ï¼ˆPermissionï¼‰**
```javascript
// æƒé™å®šä¹‰  
const permission = {
    id: 3001,
    name: "customer_view",
    displayName: "æŸ¥çœ‹å®¢æˆ·ä¿¡æ¯",
    resource: "customer",     // èµ„æºç±»å‹
    action: "view",          // æ“ä½œç±»å‹
    description: "å…è®¸æŸ¥çœ‹å®¢æˆ·çš„åŸºæœ¬ä¿¡æ¯å’Œè”ç³»æ–¹å¼"
};
```

### 2.3 æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡


**ğŸ“‹ æ ¸å¿ƒè¡¨è®¾è®¡**
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE sys_user (
    id BIGINT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,    -- åŠ å¯†å­˜å‚¨
    email VARCHAR(100),
    phone VARCHAR(20),
    status TINYINT DEFAULT 1,          -- 1:å¯ç”¨ 0:ç¦ç”¨
    create_time DATETIME,
    update_time DATETIME
);

-- è§’è‰²è¡¨
CREATE TABLE sys_role (
    id BIGINT PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL,
    display_name VARCHAR(100),
    description TEXT,
    status TINYINT DEFAULT 1,
    create_time DATETIME,
    update_time DATETIME
);

-- æƒé™è¡¨
CREATE TABLE sys_permission (
    id BIGINT PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,
    display_name VARCHAR(100),
    resource VARCHAR(50),              -- èµ„æºåç§°
    action VARCHAR(50),                -- æ“ä½œåç§°
    description TEXT,
    create_time DATETIME
);

-- ç”¨æˆ·è§’è‰²å…³è”è¡¨ï¼ˆå¤šå¯¹å¤šï¼‰
CREATE TABLE sys_user_role (
    user_id BIGINT,
    role_id BIGINT,
    assign_time DATETIME,
    PRIMARY KEY (user_id, role_id)
);

-- è§’è‰²æƒé™å…³è”è¡¨ï¼ˆå¤šå¯¹å¤šï¼‰
CREATE TABLE sys_role_permission (
    role_id BIGINT,
    permission_id BIGINT,
    assign_time DATETIME,
    PRIMARY KEY (role_id, permission_id)
);
```

---

## 3. ğŸ­ è§’è‰²å·¥ç¨‹ä½“ç³»


### 3.1 è§’è‰²è¯†åˆ« - å¦‚ä½•è®¾è®¡è§’è‰²


**ğŸ”¸ åŸºäºä¸šåŠ¡èŒèƒ½åˆ’åˆ†**
```
ç”µå•†ç³»ç»Ÿè§’è‰²è®¾è®¡ï¼š
â”Œâ”€ è¶…çº§ç®¡ç†å‘˜ â”€ ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œç®¡ç†ä¸€åˆ‡
â”œâ”€ è¿è¥ç®¡ç†å‘˜ â”€ å•†å“ç®¡ç†ã€è®¢å•å¤„ç†ã€ä¿ƒé”€æ´»åŠ¨
â”œâ”€ å®¢æœä¸“å‘˜   â”€ ç”¨æˆ·å’¨è¯¢ã€å”®åå¤„ç†ã€è®¢å•æŸ¥è¯¢
â”œâ”€ è´¢åŠ¡äººå‘˜   â”€ è´¢åŠ¡æŠ¥è¡¨ã€æ”¶æ”¯ç®¡ç†ã€å¯¹è´¦æ“ä½œ
â””â”€ æ™®é€šç”¨æˆ·   â”€ æµè§ˆå•†å“ã€ä¸‹å•è´­ä¹°ã€æŸ¥çœ‹è®¢å•
```

**ğŸ’¡ è§’è‰²è®¾è®¡åŸåˆ™**
- **æœ€å°æƒé™åŸåˆ™**ï¼šç»™è§’è‰²åˆ†é…å®Œæˆå·¥ä½œæ‰€éœ€çš„æœ€å°‘æƒé™
- **èŒè´£åˆ†ç¦»åŸåˆ™**ï¼šé‡è¦æ“ä½œéœ€è¦å¤šä¸ªè§’è‰²åä½œå®Œæˆ
- **è§’è‰²äº’æ–¥åŸåˆ™**ï¼šæŸäº›è§’è‰²ä¸èƒ½åŒæ—¶åˆ†é…ç»™åŒä¸€ç”¨æˆ·

### 3.2 æƒé™åˆ†é… - å¦‚ä½•ç»™è§’è‰²åˆ†é…æƒé™


**ğŸ”§ æƒé™åˆ†é…å®ä¾‹**
```javascript
// é”€å”®ç»ç†è§’è‰²çš„æƒé™åˆ†é…
const salesManagerPermissions = [
    // å®¢æˆ·ç®¡ç†æƒé™
    "customer_view",      // æŸ¥çœ‹å®¢æˆ·ä¿¡æ¯
    "customer_edit",      // ç¼–è¾‘å®¢æˆ·ä¿¡æ¯  
    "customer_create",    // åˆ›å»ºæ–°å®¢æˆ·
    
    // è®¢å•ç®¡ç†æƒé™
    "order_view",         // æŸ¥çœ‹è®¢å•
    "order_status_edit",  // ä¿®æ”¹è®¢å•çŠ¶æ€
    
    // æŠ¥è¡¨æƒé™
    "sales_report_view",  // æŸ¥çœ‹é”€å”®æŠ¥è¡¨
    
    // æ³¨æ„ï¼šæ²¡æœ‰åˆ é™¤å®¢æˆ·ã€è´¢åŠ¡æ•°æ®ç­‰æ•æ„Ÿæƒé™
];

// å®¢æœä¸“å‘˜è§’è‰²çš„æƒé™åˆ†é…
const customerServicePermissions = [
    "customer_view",      // æŸ¥çœ‹å®¢æˆ·ä¿¡æ¯ï¼ˆåªè¯»ï¼‰
    "order_view",         // æŸ¥çœ‹è®¢å•ä¿¡æ¯
    "ticket_manage",      // å¤„ç†å®¢æœå·¥å•
    "refund_process",     // å¤„ç†é€€æ¬¾ç”³è¯·
    
    // æ³¨æ„ï¼šä¸èƒ½ä¿®æ”¹å®¢æˆ·ä¿¡æ¯ã€ä¸èƒ½æŸ¥çœ‹è´¢åŠ¡æ•°æ®
];
```

### 3.3 è§’è‰²ç»´æŠ¤ - å¦‚ä½•ç®¡ç†è§’è‰²ç”Ÿå‘½å‘¨æœŸ


**ğŸ”„ è§’è‰²ç”Ÿå‘½å‘¨æœŸç®¡ç†**
```
è§’è‰²åˆ›å»º â†’ æƒé™åˆ†é… â†’ ç”¨æˆ·åˆ†é… â†’ æƒé™è°ƒæ•´ â†’ è§’è‰²åºŸå¼ƒ
    â†“         â†“         â†“         â†“         â†“
  å®šä¹‰èŒè´£   é…ç½®æƒé™   åˆ†é…ç”¨æˆ·   åŠ¨æ€è°ƒæ•´   å®‰å…¨å›æ”¶
```

**ğŸ“‹ è§’è‰²ç»´æŠ¤æ“ä½œ**
```javascript
// è§’è‰²ç»´æŠ¤APIè®¾è®¡
class RoleManagementService {
    
    // åˆ›å»ºæ–°è§’è‰²
    createRole(roleData) {
        // 1. éªŒè¯è§’è‰²åç§°å”¯ä¸€æ€§
        // 2. åˆ›å»ºè§’è‰²åŸºæœ¬ä¿¡æ¯
        // 3. è®°å½•æ“ä½œæ—¥å¿—
    }
    
    // åˆ†é…æƒé™ç»™è§’è‰²
    assignPermissions(roleId, permissionIds) {
        // 1. éªŒè¯è§’è‰²å’Œæƒé™çš„æœ‰æ•ˆæ€§
        // 2. æ‰¹é‡æ’å…¥è§’è‰²æƒé™å…³è”
        // 3. æ¸…ç†æ—§çš„æƒé™ç¼“å­˜
    }
    
    // åˆ†é…è§’è‰²ç»™ç”¨æˆ·
    assignRoleToUser(userId, roleId) {
        // 1. æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
        // 2. æ£€æŸ¥è§’è‰²å†²çª
        // 3. åˆ›å»ºç”¨æˆ·è§’è‰²å…³è”
    }
}
```

---

## 4. âš¡ åŠ¨æ€æƒé™æ§åˆ¶


### 4.1 ä»€ä¹ˆæ˜¯åŠ¨æ€æƒé™ï¼Ÿ


**ğŸ¯ ç†è§£åŠ¨æ€æƒé™**
é™æ€æƒé™ï¼šå¼ ä¸‰æœ‰"æŸ¥çœ‹è®¢å•"æƒé™ âœ“
åŠ¨æ€æƒé™ï¼šå¼ ä¸‰åœ¨å·¥ä½œæ—¶é—´ã€åœ¨åŠå…¬å®¤ç½‘ç»œç¯å¢ƒä¸‹ï¼Œæ‰èƒ½æŸ¥çœ‹æœ¬éƒ¨é—¨çš„è®¢å• âœ“

**ä¸‰ç§åŠ¨æ€æƒé™ç±»å‹ï¼š**

### 4.2 ä¸Šä¸‹æ–‡ç›¸å…³æƒé™


**ğŸ”¸ æ•°æ®èŒƒå›´æƒé™**
```javascript
// æ•°æ®æƒé™ç¤ºä¾‹ï¼šé”€å”®åªèƒ½çœ‹è‡ªå·±çš„å®¢æˆ·
const dataPermission = {
    userId: 1001,
    permission: "customer_view",
    dataScope: "own",           // æ•°æ®èŒƒå›´ï¼šownè‡ªå·±ã€deptéƒ¨é—¨ã€allå…¨éƒ¨
    deptId: 2001,              // æ‰€å±éƒ¨é—¨ID
    conditions: {
        "customer.sales_id": 1001    // åªèƒ½æŸ¥çœ‹sales_id=è‡ªå·±çš„å®¢æˆ·
    }
};

// éƒ¨é—¨ç»ç†èƒ½çœ‹æ•´ä¸ªéƒ¨é—¨çš„æ•°æ®
const managerDataPermission = {
    userId: 1002,
    permission: "customer_view", 
    dataScope: "dept",
    deptId: 2001,
    conditions: {
        "customer.dept_id": 2001     // èƒ½æŸ¥çœ‹dept_id=æœ¬éƒ¨é—¨çš„å®¢æˆ·
    }
};
```

### 4.3 æ—¶é—´ç›¸å…³æƒé™


**ğŸ”¸ æ—¶é—´çª—å£æ§åˆ¶**
```javascript
// æ—¶é—´æƒé™é…ç½®
const timeBasedPermission = {
    permission: "financial_report_view",
    timeRules: [
        {
            type: "workdays",           // å·¥ä½œæ—¥
            startTime: "09:00",         // ä¸Šåˆ9ç‚¹
            endTime: "18:00",           // ä¸‹åˆ6ç‚¹
            timezone: "Asia/Shanghai"
        },
        {
            type: "month_end",          // æœˆæœ«ç‰¹æ®Šæ—¶é—´
            days: [28, 29, 30, 31],     // æœˆæœ«å‡ å¤©
            startTime: "08:00",         // å¯ä»¥æ—©ç‚¹å¼€å§‹
            endTime: "22:00"            // å¯ä»¥æ™šç‚¹ç»“æŸ
        }
    ]
};

// æ—¶é—´æƒé™æ£€æŸ¥
function checkTimePermission(permission, currentTime) {
    const now = new Date(currentTime);
    const hour = now.getHours();
    const day = now.getDay(); // 0=å‘¨æ—¥ï¼Œ1=å‘¨ä¸€...
    
    // æ£€æŸ¥æ˜¯å¦åœ¨å·¥ä½œæ—¶é—´
    if (day >= 1 && day <= 5) { // å‘¨ä¸€åˆ°å‘¨äº”
        return hour >= 9 && hour < 18;
    }
    
    return false; // å‘¨æœ«ä¸å…è®¸è®¿é—®
}
```

### 4.4 ä½ç½®ç›¸å…³æƒé™


**ğŸ”¸ ç½‘ç»œä½ç½®æ§åˆ¶**
```javascript
// ç½‘ç»œä½ç½®æƒé™
const locationPermission = {
    permission: "sensitive_data_access",
    locationRules: [
        {
            type: "ip_whitelist",
            ips: [
                "192.168.1.0/24",      // åŠå…¬å®¤ç½‘æ®µ
                "10.0.0.0/16"          // VPNç½‘æ®µ  
            ]
        },
        {
            type: "geo_location",
            allowedCities: ["åŒ—äº¬", "ä¸Šæµ·", "æ·±åœ³"],
            allowedCountries: ["ä¸­å›½"]
        }
    ]
};

// IPæƒé™æ£€æŸ¥
function checkIPPermission(userIP, allowedIPs) {
    // æ£€æŸ¥ç”¨æˆ·IPæ˜¯å¦åœ¨å…è®¸çš„IPèŒƒå›´å†…
    return allowedIPs.some(allowedIP => {
        return isIPInRange(userIP, allowedIP);
    });
}
```

---

## 5. ğŸšª ç™»å½•æ¨¡å—æ¶æ„è®¾è®¡


### 5.1 ç™»å½•æµç¨‹æ•´ä½“è®¾è®¡


**ğŸ”„ ç™»å½•æµç¨‹å›¾**
```
ç”¨æˆ·è¾“å…¥ â†’ å‰ç«¯éªŒè¯ â†’ åç«¯è®¤è¯ â†’ ç”ŸæˆToken â†’ è¿”å›ç»“æœ
   â†“          â†“          â†“          â†“          â†“
è´¦å·å¯†ç     æ ¼å¼æ ¡éªŒ    æ•°æ®åº“éªŒè¯   JWTç”Ÿæˆ    ç™»å½•æˆåŠŸ
```

**ğŸ“‹ è¯¦ç»†ç™»å½•æ­¥éª¤**
```
1. ç”¨æˆ·æäº¤ç™»å½•ä¿¡æ¯ï¼ˆç”¨æˆ·å+å¯†ç ï¼‰
2. å‰ç«¯åŸºç¡€éªŒè¯ï¼ˆéç©ºã€æ ¼å¼ç­‰ï¼‰
3. å‘é€åˆ°åç«¯ç™»å½•æ¥å£
4. åç«¯éªŒè¯ç”¨æˆ·åå¯†ç 
5. æ£€æŸ¥ç”¨æˆ·è´¦å·çŠ¶æ€ï¼ˆæ˜¯å¦ç¦ç”¨ï¼‰
6. ç”Ÿæˆè®¿é—®Tokenå’Œåˆ·æ–°Token
7. è®°å½•ç™»å½•æ—¥å¿—
8. è¿”å›ç”¨æˆ·ä¿¡æ¯å’ŒTokenç»™å‰ç«¯
9. å‰ç«¯å­˜å‚¨Tokenï¼Œè·³è½¬åˆ°ä¸»é¡µé¢
```

### 5.2 ç™»å½•æ¥å£è®¾è®¡


**ğŸ”§ ç™»å½•APIå®ç°**
```javascript
// ç™»å½•æ¥å£
async function login(username, password) {
    try {
        // 1. åŸºç¡€å‚æ•°éªŒè¯
        if (!username || !password) {
            return { code: 400, message: "ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º" };
        }
        
        // 2. æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
        const user = await findUserByUsername(username);
        if (!user) {
            return { code: 401, message: "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯" };
        }
        
        // 3. éªŒè¯å¯†ç ï¼ˆä½¿ç”¨åŠ å¯†åçš„å¯†ç æ¯”è¾ƒï¼‰
        const isValidPassword = await bcrypt.compare(password, user.password);
        if (!isValidPassword) {
            return { code: 401, message: "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯" };
        }
        
        // 4. æ£€æŸ¥è´¦å·çŠ¶æ€
        if (user.status !== 'active') {
            return { code: 403, message: "è´¦å·å·²è¢«ç¦ç”¨" };
        }
        
        // 5. ç”ŸæˆToken
        const token = generateJWT({
            userId: user.id,
            username: user.username,
            roles: user.roles
        });
        
        // 6. è®°å½•ç™»å½•æ—¥å¿—
        await logUserLogin(user.id, request.ip);
        
        // 7. è¿”å›ç™»å½•ç»“æœ
        return {
            code: 200,
            message: "ç™»å½•æˆåŠŸ",
            data: {
                user: {
                    id: user.id,
                    username: user.username,
                    email: user.email,
                    roles: user.roles
                },
                token: token,
                expiresIn: 7200 // 2å°æ—¶è¿‡æœŸ
            }
        };
        
    } catch (error) {
        return { code: 500, message: "ç³»ç»Ÿé”™è¯¯" };
    }
}
```

### 5.3 ç™»å½•å®‰å…¨æªæ–½


**ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤ç­–ç•¥**
```javascript
// ç™»å½•å®‰å…¨é…ç½®
const loginSecurity = {
    // å¯†ç ç­–ç•¥
    passwordPolicy: {
        minLength: 8,                    // æœ€å°‘8ä½
        requireUppercase: true,          // éœ€è¦å¤§å†™å­—æ¯
        requireNumber: true,             // éœ€è¦æ•°å­—
        requireSpecialChar: true         // éœ€è¦ç‰¹æ®Šå­—ç¬¦
    },
    
    // ç™»å½•é™åˆ¶
    loginLimit: {
        maxFailAttempts: 5,              // æœ€å¤šå¤±è´¥5æ¬¡
        lockoutTime: 30 * 60 * 1000,     // é”å®š30åˆ†é’Ÿ
        cooldownTime: 5 * 60 * 1000      // å†·å´æ—¶é—´5åˆ†é’Ÿ
    },
    
    // ä¼šè¯ç®¡ç†
    session: {
        maxConcurrentLogins: 3,          // æœ€å¤š3ä¸ªå¹¶å‘ç™»å½•
        tokenExpiry: 2 * 60 * 60,        // Token 2å°æ—¶è¿‡æœŸ
        refreshTokenExpiry: 7 * 24 * 60 * 60 // åˆ·æ–°Token 7å¤©è¿‡æœŸ
    }
};
```

---

## 6. ğŸ« Tokenæœºåˆ¶è¯¦è§£


### 6.1 ä»€ä¹ˆæ˜¯Tokenï¼Ÿ


**ğŸ¯ Tokené€šä¿—ç†è§£**
Tokenå°±åƒæ¸¸ä¹å›­çš„æ‰‹ç¯ï¼š
- ä¹°ç¥¨åå·¥ä½œäººå‘˜ç»™ä½ æˆ´æ‰‹ç¯ï¼ˆç™»å½•åè·å¾—Tokenï¼‰
- å‡­æ‰‹ç¯å¯ä»¥ç©å„ç§é¡¹ç›®ï¼ˆå‡­Tokenè®¿é—®å„ä¸ªæ¥å£ï¼‰
- æ‰‹ç¯æœ‰æœ‰æ•ˆæœŸï¼Œè¿‡æœŸéœ€è¦é‡æ–°è´­ç¥¨ï¼ˆTokenè¿‡æœŸéœ€è¦é‡æ–°ç™»å½•ï¼‰
- ä¸åŒç¥¨ä»·çš„æ‰‹ç¯èƒ½ç©ä¸åŒé¡¹ç›®ï¼ˆä¸åŒæƒé™çš„Tokenè®¿é—®ä¸åŒæ¥å£ï¼‰

### 6.2 JWT Tokenç»“æ„


**ğŸ”¸ JWT = JSON Web Token**
```
JWT Token ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š
Header.Payload.Signature
å¤´éƒ¨ä¿¡æ¯.è½½è·æ•°æ®.æ•°å­—ç­¾å
```

**ğŸ“‹ JWTç»“æ„è¯¦è§£**
```javascript
// 1. Header (å¤´éƒ¨) - è¯´æ˜Tokenç±»å‹å’Œç­¾åç®—æ³•
const header = {
    "alg": "HS256",      // ç­¾åç®—æ³•
    "typ": "JWT"         // Tokenç±»å‹
};

// 2. Payload (è½½è·) - å­˜å‚¨ç”¨æˆ·ä¿¡æ¯å’Œæƒé™
const payload = {
    "userId": 1001,
    "username": "zhangsan", 
    "roles": ["sales_manager"],
    "permissions": ["customer_view", "order_view"],
    "iat": 1640995200,   // ç­¾å‘æ—¶é—´
    "exp": 1641001200    // è¿‡æœŸæ—¶é—´ (2å°æ—¶å)
};

// 3. Signature (ç­¾å) - é˜²æ­¢Tokenè¢«ç¯¡æ”¹
const signature = HMACSHA256(
    base64UrlEncode(header) + "." + base64UrlEncode(payload),
    "your-secret-key"  // æœåŠ¡å™¨å¯†é’¥
);

// æœ€ç»ˆçš„JWT Token
const jwtToken = base64UrlEncode(header) + "." + 
                 base64UrlEncode(payload) + "." + 
                 base64UrlEncode(signature);
```

### 6.3 Tokenç”Ÿæˆä¸éªŒè¯


**ğŸ”§ Tokenç”Ÿæˆå®ç°**
```javascript
const jwt = require('jsonwebtoken');

// Tokenç”Ÿæˆå‡½æ•°
function generateJWT(userInfo) {
    const payload = {
        userId: userInfo.id,
        username: userInfo.username,
        roles: userInfo.roles,
        iat: Math.floor(Date.now() / 1000),           // å½“å‰æ—¶é—´
        exp: Math.floor(Date.now() / 1000) + 7200     // 2å°æ—¶åè¿‡æœŸ
    };
    
    const secretKey = process.env.JWT_SECRET_KEY;     // ä»ç¯å¢ƒå˜é‡è·å–å¯†é’¥
    
    return jwt.sign(payload, secretKey, {
        algorithm: 'HS256'
    });
}

// TokenéªŒè¯å‡½æ•°
function verifyJWT(token) {
    try {
        const secretKey = process.env.JWT_SECRET_KEY;
        const decoded = jwt.verify(token, secretKey);
        
        // æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸ
        if (decoded.exp < Math.floor(Date.now() / 1000)) {
            return { valid: false, error: 'Tokenå·²è¿‡æœŸ' };
        }
        
        return { valid: true, payload: decoded };
        
    } catch (error) {
        return { valid: false, error: 'Tokenæ— æ•ˆ' };
    }
}
```

### 6.4 Tokenåˆ·æ–°æœºåˆ¶


**ğŸ”„ åˆ·æ–°Tokenè®¾è®¡**
```javascript
// åŒTokenæœºåˆ¶ï¼šè®¿é—®Token + åˆ·æ–°Token
const tokenPair = {
    accessToken: {
        content: "çŸ­æœŸæœ‰æ•ˆçš„è®¿é—®å‡­è¯",
        expiry: "2å°æ—¶",
        usage: "APIæ¥å£è°ƒç”¨"
    },
    refreshToken: {
        content: "é•¿æœŸæœ‰æ•ˆçš„åˆ·æ–°å‡­è¯", 
        expiry: "7å¤©",
        usage: "è·å–æ–°çš„è®¿é—®Token"
    }
};

// Tokenåˆ·æ–°æ¥å£
async function refreshAccessToken(refreshToken) {
    try {
        // 1. éªŒè¯åˆ·æ–°Token
        const decoded = jwt.verify(refreshToken, REFRESH_SECRET_KEY);
        
        // 2. æ£€æŸ¥ç”¨æˆ·çŠ¶æ€æ˜¯å¦æ­£å¸¸
        const user = await findUserById(decoded.userId);
        if (!user || user.status !== 'active') {
            return { code: 401, message: "ç”¨æˆ·çŠ¶æ€å¼‚å¸¸" };
        }
        
        // 3. ç”Ÿæˆæ–°çš„è®¿é—®Token
        const newAccessToken = generateJWT({
            id: user.id,
            username: user.username,
            roles: user.roles
        });
        
        return {
            code: 200,
            data: {
                accessToken: newAccessToken,
                expiresIn: 7200
            }
        };
        
    } catch (error) {
        return { code: 401, message: "åˆ·æ–°Tokenæ— æ•ˆ" };
    }
}
```

---

## 7. ğŸ”’ æ¥å£æƒé™æ§åˆ¶


### 7.1 æ¥å£æƒé™æ§åˆ¶åŸç†


**ğŸ¯ æƒé™æ§åˆ¶æµç¨‹**
```
è¯·æ±‚æ¥å£ â†’ æå–Token â†’ éªŒè¯Token â†’ æ£€æŸ¥æƒé™ â†’ å…è®¸/æ‹’ç»è®¿é—®
    â†“         â†“         â†“         â†“         â†“
ç”¨æˆ·æ“ä½œ   è·å–å‡­è¯   èº«ä»½ç¡®è®¤   æƒé™éªŒè¯   æ‰§è¡Œç»“æœ
```

### 7.2 æƒé™ä¸­é—´ä»¶å®ç°


**ğŸ”§ æƒé™éªŒè¯ä¸­é—´ä»¶**
```javascript
// æƒé™éªŒè¯ä¸­é—´ä»¶
function authMiddleware(requiredPermission) {
    return async (req, res, next) => {
        try {
            // 1. æå–Token
            const token = req.headers.authorization?.replace('Bearer ', '');
            if (!token) {
                return res.status(401).json({ message: "ç¼ºå°‘è®¿é—®Token" });
            }
            
            // 2. éªŒè¯Token
            const { valid, payload, error } = verifyJWT(token);
            if (!valid) {
                return res.status(401).json({ message: error });
            }
            
            // 3. è·å–ç”¨æˆ·æƒé™
            const userPermissions = await getUserPermissions(payload.userId);
            
            // 4. æ£€æŸ¥æ˜¯å¦æœ‰æ‰€éœ€æƒé™
            if (!userPermissions.includes(requiredPermission)) {
                return res.status(403).json({ 
                    message: "æ²¡æœ‰è®¿é—®æƒé™",
                    required: requiredPermission
                });
            }
            
            // 5. å°†ç”¨æˆ·ä¿¡æ¯æ·»åŠ åˆ°è¯·æ±‚å¯¹è±¡ä¸­
            req.user = payload;
            next();
            
        } catch (error) {
            return res.status(500).json({ message: "æƒé™éªŒè¯å¤±è´¥" });
        }
    };
}

// æ¥å£ä½¿ç”¨æƒé™æ§åˆ¶
app.get('/api/customers', 
    authMiddleware('customer_view'),    // éœ€è¦å®¢æˆ·æŸ¥çœ‹æƒé™
    async (req, res) => {
        // è¿™é‡Œçš„ä»£ç åªæœ‰æœ‰æƒé™çš„ç”¨æˆ·æ‰èƒ½æ‰§è¡Œ
        const customers = await getCustomers();
        res.json(customers);
    }
);

app.delete('/api/customers/:id',
    authMiddleware('customer_delete'),  // éœ€è¦å®¢æˆ·åˆ é™¤æƒé™
    async (req, res) => {
        const customerId = req.params.id;
        await deleteCustomer(customerId);
        res.json({ message: "åˆ é™¤æˆåŠŸ" });
    }
);
```

### 7.3 åŠ¨æ€æƒé™æ£€æŸ¥


**âš¡ æ•°æ®çº§æƒé™æ§åˆ¶**
```javascript
// æ•°æ®æƒé™æ£€æŸ¥å‡½æ•°
async function checkDataPermission(userId, resource, action, resourceId) {
    // 1. è·å–ç”¨æˆ·çš„æ•°æ®æƒé™é…ç½®
    const dataPermission = await getUserDataPermission(userId, resource);
    
    if (dataPermission.scope === 'all') {
        return true;  // æœ‰å…¨éƒ¨æ•°æ®æƒé™
    }
    
    if (dataPermission.scope === 'own') {
        // åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
        const resourceOwner = await getResourceOwner(resource, resourceId);
        return resourceOwner === userId;
    }
    
    if (dataPermission.scope === 'dept') {
        // åªèƒ½è®¿é—®æœ¬éƒ¨é—¨çš„æ•°æ®
        const userDept = await getUserDepartment(userId);
        const resourceDept = await getResourceDepartment(resource, resourceId);
        return userDept === resourceDept;
    }
    
    return false;
}

// å¸¦æ•°æ®æƒé™çš„æ¥å£ç¤ºä¾‹
app.get('/api/customers/:id',
    authMiddleware('customer_view'),
    async (req, res) => {
        const customerId = req.params.id;
        const userId = req.user.userId;
        
        // æ£€æŸ¥æ•°æ®æƒé™
        const hasPermission = await checkDataPermission(
            userId, 'customer', 'view', customerId
        );
        
        if (!hasPermission) {
            return res.status(403).json({ message: "æ— æƒé™è®¿é—®è¯¥å®¢æˆ·æ•°æ®" });
        }
        
        const customer = await getCustomerById(customerId);
        res.json(customer);
    }
);
```

---

## 8. ğŸ”„ å‰åç«¯è”è°ƒæµç¨‹


### 8.1 å‰åç«¯åä½œæµç¨‹


**ğŸ”„ å®Œæ•´äº¤äº’æµç¨‹**
```
å‰ç«¯ç™»å½• â†’ åç«¯éªŒè¯ â†’ è¿”å›Token â†’ å‰ç«¯å­˜å‚¨ â†’ æºå¸¦Tokenè¯·æ±‚ â†’ åç«¯éªŒè¯ â†’ è¿”å›æ•°æ®
    â†“         â†“         â†“         â†“         â†“         â†“         â†“
ç”¨æˆ·è¾“å…¥   æ•°æ®åº“æŸ¥è¯¢  ç”Ÿæˆå‡­è¯   æœ¬åœ°ç¼“å­˜   æ·»åŠ è¯·æ±‚å¤´  æƒé™æ£€æŸ¥   ä¸šåŠ¡å¤„ç†
```

### 8.2 å‰ç«¯Tokenç®¡ç†


**ğŸ”§ å‰ç«¯Tokenå¤„ç†**
```javascript
// Tokenå­˜å‚¨ç®¡ç†
class TokenManager {
    
    // ä¿å­˜Tokenåˆ°æœ¬åœ°å­˜å‚¨
    saveTokens(accessToken, refreshToken) {
        localStorage.setItem('accessToken', accessToken);
        localStorage.setItem('refreshToken', refreshToken);
    }
    
    // è·å–è®¿é—®Token
    getAccessToken() {
        return localStorage.getItem('accessToken');
    }
    
    // æ¸…é™¤æ‰€æœ‰Token
    clearTokens() {
        localStorage.removeItem('accessToken');
        localStorage.removeItem('refreshToken');
    }
    
    // æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸ
    isTokenExpired(token) {
        if (!token) return true;
        
        try {
            const payload = JSON.parse(atob(token.split('.')[1]));
            return payload.exp * 1000 < Date.now();
        } catch {
            return true;
        }
    }
}

// HTTPè¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨æ·»åŠ Token
axios.interceptors.request.use(config => {
    const token = tokenManager.getAccessToken();
    if (token && !tokenManager.isTokenExpired(token)) {
        config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
});

// HTTPå“åº”æ‹¦æˆªå™¨ - è‡ªåŠ¨å¤„ç†Tokenè¿‡æœŸ
axios.interceptors.response.use(
    response => response,
    async error => {
        if (error.response?.status === 401) {
            // Tokenè¿‡æœŸï¼Œå°è¯•åˆ·æ–°
            const refreshToken = localStorage.getItem('refreshToken');
            if (refreshToken) {
                try {
                    const newToken = await refreshAccessToken(refreshToken);
                    tokenManager.saveTokens(newToken, refreshToken);
                    
                    // é‡æ–°å‘é€åŸè¯·æ±‚
                    error.config.headers.Authorization = `Bearer ${newToken}`;
                    return axios.request(error.config);
                } catch {
                    // åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
                    tokenManager.clearTokens();
                    window.location.href = '/login';
                }
            }
        }
        return Promise.reject(error);
    }
);
```

### 8.3 å‰ç«¯æƒé™æ§åˆ¶


**ğŸ¯ å‰ç«¯æƒé™æ˜¾ç¤ºæ§åˆ¶**
```javascript
// æƒé™æ£€æŸ¥ç»„ä»¶
import { useState, useEffect } from 'react';

function usePermissions() {
    const [permissions, setPermissions] = useState([]);
    
    useEffect(() => {
        // ä»Tokenä¸­è§£ææƒé™ä¿¡æ¯
        const token = tokenManager.getAccessToken();
        if (token) {
            const payload = JSON.parse(atob(token.split('.')[1]));
            setPermissions(payload.permissions || []);
        }
    }, []);
    
    const hasPermission = (permission) => {
        return permissions.includes(permission);
    };
    
    return { permissions, hasPermission };
}

// æƒé™æ§åˆ¶ç»„ä»¶
function PermissionGuard({ permission, children, fallback = null }) {
    const { hasPermission } = usePermissions();
    
    if (hasPermission(permission)) {
        return children;
    }
    
    return fallback;
}

// ä½¿ç”¨ç¤ºä¾‹
function CustomerPage() {
    return (
        <div>
            <h1>å®¢æˆ·ç®¡ç†</h1>
            
            {/* æœ‰æŸ¥çœ‹æƒé™æ‰æ˜¾ç¤ºå®¢æˆ·åˆ—è¡¨ */}
            <PermissionGuard permission="customer_view">
                <CustomerList />
            </PermissionGuard>
            
            {/* æœ‰åˆ›å»ºæƒé™æ‰æ˜¾ç¤ºæ·»åŠ æŒ‰é’® */}
            <PermissionGuard permission="customer_create">
                <button onClick={handleAddCustomer}>æ·»åŠ å®¢æˆ·</button>
            </PermissionGuard>
            
            {/* æœ‰åˆ é™¤æƒé™æ‰æ˜¾ç¤ºåˆ é™¤æŒ‰é’® */}
            <PermissionGuard 
                permission="customer_delete"
                fallback={<span>æ— åˆ é™¤æƒé™</span>}
            >
                <button onClick={handleDelete}>åˆ é™¤</button>
            </PermissionGuard>
        </div>
    );
}
```

### 8.4 é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ


**âš ï¸ ç»Ÿä¸€é”™è¯¯å¤„ç†**
```javascript
// æƒé™é”™è¯¯å¤„ç†
const handlePermissionError = (error) => {
    const { status, data } = error.response;
    
    switch (status) {
        case 401:
            message.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
            tokenManager.clearTokens();
            window.location.href = '/login';
            break;
            
        case 403:
            message.error(`æƒé™ä¸è¶³ï¼š${data.message}`);
            // å¯ä»¥è·³è½¬åˆ°æƒé™ç”³è¯·é¡µé¢
            break;
            
        case 404:
            message.error('è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨');
            break;
            
        default:
            message.error('ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
    }
};

// å…¨å±€é”™è¯¯å¤„ç†
window.addEventListener('unhandledrejection', event => {
    if (event.reason?.response) {
        handlePermissionError(event.reason);
        event.preventDefault();
    }
});
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 æƒé™ç®¡ç†æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼šè®¤è¯(ä½ æ˜¯è°)ã€æˆæƒ(ä½ èƒ½åšä»€ä¹ˆ)ã€å®¡è®¡(ä½ åšäº†ä»€ä¹ˆ)
ğŸ”¸ RBACæ¨¡å‹ï¼šç”¨æˆ·-è§’è‰²-æƒé™çš„ä¸‰å±‚æ¶æ„ï¼Œç®€åŒ–æƒé™ç®¡ç†
ğŸ”¸ åŠ¨æ€æƒé™ï¼šåŸºäºä¸Šä¸‹æ–‡ã€æ—¶é—´ã€ä½ç½®çš„çµæ´»æƒé™æ§åˆ¶
ğŸ”¸ Tokenæœºåˆ¶ï¼šJWTä½œä¸ºè®¿é—®å‡­è¯ï¼ŒåŒ…å«ç”¨æˆ·èº«ä»½å’Œæƒé™ä¿¡æ¯
```

### 9.2 ç³»ç»Ÿè®¾è®¡è¦ç‚¹


**ğŸ”¹ æ•°æ®æ¨¡å‹è®¾è®¡**
- ç”¨æˆ·è¡¨ï¼šå­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’ŒçŠ¶æ€
- è§’è‰²è¡¨ï¼šå®šä¹‰ä¸åŒçš„èŒèƒ½è§’è‰²
- æƒé™è¡¨ï¼šå…·ä½“çš„åŠŸèƒ½æƒé™ç‚¹
- å…³è”è¡¨ï¼šç”¨æˆ·è§’è‰²ã€è§’è‰²æƒé™çš„å¤šå¯¹å¤šå…³ç³»

**ğŸ”¹ å®‰å…¨æœºåˆ¶è®¾è®¡**
- å¯†ç åŠ å¯†å­˜å‚¨ï¼Œæ°¸ä¸æ˜æ–‡ä¿å­˜
- Tokenæœ‰æ•ˆæœŸæ§åˆ¶ï¼Œå®šæœŸè‡ªåŠ¨åˆ·æ–°
- ç™»å½•å¤±è´¥é™åˆ¶ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£
- æ“ä½œæ—¥å¿—è®°å½•ï¼Œä¾¿äºå®¡è®¡è¿½è¸ª

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–è€ƒè™‘**
- æƒé™ä¿¡æ¯ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
- Tokenæœ¬åœ°å­˜å‚¨ï¼Œé¿å…é¢‘ç¹ç½‘ç»œè¯·æ±‚
- æ‰¹é‡æƒé™æ£€æŸ¥ï¼Œæé«˜æ¥å£å“åº”é€Ÿåº¦
- å¼‚æ­¥æ—¥å¿—è®°å½•ï¼Œä¸å½±å“ä¸šåŠ¡å¤„ç†

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ“Š é€‚ç”¨åœºæ™¯**
- âœ… **ä¼ä¸šç®¡ç†ç³»ç»Ÿ**ï¼šOAã€CRMã€ERPç­‰å†…éƒ¨ç³»ç»Ÿ
- âœ… **ç”µå•†å¹³å°**ï¼šå•†å®¶ã€è¿è¥ã€å®¢æœç­‰å¤šè§’è‰²åä½œ
- âœ… **å†…å®¹ç®¡ç†**ï¼šç¼–è¾‘ã€å®¡æ ¸ã€å‘å¸ƒç­‰å·¥ä½œæµç¨‹
- âœ… **é‡‘èç³»ç»Ÿ**ï¼šä¸¥æ ¼çš„æƒé™æ§åˆ¶å’Œå®¡è®¡è¦æ±‚

**ğŸ”§ å®æ–½å»ºè®®**
- **æ¸è¿›å¼å®æ–½**ï¼šä»åŸºç¡€RBACå¼€å§‹ï¼Œé€æ­¥å¼•å…¥åŠ¨æ€æƒé™
- **æƒé™æœ€å°åŒ–**ï¼šç»™ç”¨æˆ·åˆ†é…å®Œæˆå·¥ä½œæ‰€éœ€çš„æœ€å°‘æƒé™
- **å®šæœŸå®¡æŸ¥**ï¼šå®šæœŸæ£€æŸ¥å’Œæ¸…ç†ä¸å¿…è¦çš„æƒé™åˆ†é…
- **ç”¨æˆ·åŸ¹è®­**ï¼šè®©ç”¨æˆ·ç†è§£æƒé™ç³»ç»Ÿçš„ä½œç”¨å’Œä½¿ç”¨æ–¹æ³•

**âš ï¸ å¸¸è§é™·é˜±**
- æƒé™è¿‡äºå¤æ‚ï¼Œç”¨æˆ·éš¾ä»¥ç†è§£å’Œä½¿ç”¨
- æƒé™åˆ†é…è¿‡ç»†ï¼Œç®¡ç†æˆæœ¬è¿‡é«˜
- ç¼ºä¹æƒé™å›æ”¶æœºåˆ¶ï¼Œç¦»èŒå‘˜å·¥æƒé™æ®‹ç•™
- å¿½è§†æ•°æ®æƒé™ï¼Œåªæ§åˆ¶åŠŸèƒ½æƒé™

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- æƒé™ç®¡ç†ä¸‰è¦ç´ ï¼Œè®¤è¯æˆæƒåŠ å®¡è®¡
- ç”¨æˆ·è§’è‰²æƒé™æ¨¡å‹ï¼ŒRBACæ¶æ„æœ€ç»å…¸  
- Tokenæœºåˆ¶åšå‡­è¯ï¼ŒJWTæ ‡å‡†è¦ç‰¢è®°
- å‰åç«¯æƒé™è¦è”è°ƒï¼Œç”¨æˆ·ä½“éªŒä¸èƒ½å¿˜