---
title: 2、页面布局与模板复用
---
## 📚 目录

1. [页面布局核心概念](#1-页面布局核心概念)
2. [布局策略与设计思路](#2-布局策略与设计思路)
3. [公共头部设计](#3-公共头部设计)
4. [公共底部设计](#4-公共底部设计)
5. [导航菜单片段](#5-导航菜单片段)
6. [侧边栏片段设计](#6-侧边栏片段设计)
7. [内容区域布局](#7-内容区域布局)
8. [响应式布局支持](#8-响应式布局支持)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🎯 页面布局核心概念


### 1.1 什么是页面布局


**通俗理解**：页面布局就像是搭积木，把网页拆分成一块一块的"组件"，然后像拼图一样组合起来。

```
想象一下建房子：
🏠 房子 = 完整网页
🧱 砖块 = 页面片段（头部、底部、菜单等）
📐 设计图 = 布局模板

好处：
- 砖块做好了可以到处用
- 修改一块砖，所有用到的地方都会更新
- 不用每次都重新造轮子
```

### 1.2 为什么需要页面布局


**现实问题**：
```
❌ 没有布局设计的网站：
网站有100个页面，每个页面都写一遍头部导航
→ 要改个Logo，得改100次！
→ 代码重复，维护困难
→ 容易出错，遗漏修改

✅ 有布局设计的网站：
把头部写成一个片段，100个页面共用
→ 改Logo只需改1次！
→ 代码复用，维护简单
→ 统一风格，不会出错
```

### 1.3 Thymeleaf布局的核心思想


**三大核心理念**：

🔸 **片段化（Fragment）**
```
把页面拆分成独立的小片段
就像乐高积木，每个积木块独立存在
```

🔸 **复用性（Reusable）**
```
一次编写，到处使用
就像印章，刻好了可以盖无数次
```

🔸 **可维护性（Maintainable）**
```
修改一处，全局生效
就像更新软件，一键升级所有功能
```

---

## 2. 📐 布局策略与设计思路


### 2.1 常见的页面布局结构


**典型网页布局**：
```
┌─────────────────────────────────────┐
│            页面头部 Header          │ ← 放Logo、导航菜单、搜索框
├─────────────────────────────────────┤
│  侧边栏  │      主要内容区域        │ ← 左边菜单，右边内容
│ Sidebar │      Main Content       │
│         │                         │
├─────────────────────────────────────┤
│            页面底部 Footer          │ ← 放版权、链接、联系方式
└─────────────────────────────────────┘
```

### 2.2 布局设计的三种策略


#### 🏗️ 策略一：基础模板布局


**什么是基础模板**：就是创建一个"模板母版"，其他页面继承它。

```
比喻：
基础模板 = 毛坯房（已经有墙、门窗、水电）
具体页面 = 精装修（在毛坯房基础上装饰）

结构：
layout.html（基础模板）
├── header.html（头部片段）
├── footer.html（底部片段）
└── content（内容占位符，由子页面填充）
```

**优势对比**：

| 特点 | **基础模板布局** | **传统复制粘贴** |
|------|----------------|-----------------|
| 🔄 代码复用 | `高，写一次用到处` | `低，每页都写` |
| 🛠️ 维护成本 | `低，改一处全更新` | `高，改N次` |
| 🎨 风格统一 | `完全统一` | `容易不一致` |
| ⚡ 开发效率 | `高，专注内容` | `低，重复劳动` |

#### 🧩 策略二：片段组装布局


**什么是片段组装**：像搭积木一样，把各个小片段组合成完整页面。

```
原理图：
页面A.html = header片段 + 导航片段 + 内容A + footer片段
页面B.html = header片段 + 导航片段 + 内容B + footer片段

就像：
🍔 汉堡 = 面包 + 肉饼 + 生菜 + 酱料
🌮 卷饼 = 饼皮 + 肉饼 + 生菜 + 酱料
      （相同的食材，不同的组合）
```

**使用场景**：
- ✅ 页面结构差异较大
- ✅ 需要灵活组合不同片段
- ✅ 某些页面不需要侧边栏

#### 🎨 策略三：混合布局模式


**混合模式**：结合基础模板和片段组装的优点。

```
实际项目中的做法：

1. 创建基础模板（大框架）
   layout.html - 定义整体结构

2. 准备通用片段（小组件）
   header.html、footer.html、nav.html

3. 具体页面继承+组装
   index.html - 继承layout + 插入片段
```

### 2.3 布局设计实践建议


**🔸 规划先行**

```
开发前先思考：
1. 哪些部分是固定的？（头部、底部）
2. 哪些部分会变化？（内容区）
3. 哪些部分可以复用？（菜单、侧边栏）

画个草图：
┌──────────┐
│  固定头部  │ → 做成片段
├──────────┤
│  变化内容  │ → 留空占位
├──────────┤
│  固定底部  │ → 做成片段
└──────────┘
```

**🔸 命名规范**

```java
// 建议的文件命名方式
templates/
├── fragments/          // 片段文件夹
│   ├── header.html    // 头部片段
│   ├── footer.html    // 底部片段
│   ├── nav.html       // 导航片段
│   └── sidebar.html   // 侧边栏片段
│
├── layouts/           // 布局模板文件夹
│   └── base.html      // 基础布局
│
└── pages/             // 具体页面文件夹
    ├── index.html
    └── about.html
```

---

## 3. 📌 公共头部设计


### 3.1 头部的作用与内容


**头部通常包含什么**：

```
网站头部典型内容：
┌─────────────────────────────────────┐
│ [Logo] 网站名称    首页 关于 产品 ▼ │
│                          🔍 [登录]  │
└─────────────────────────────────────┘

组成部分：
🏷️ Logo/品牌标识
📝 网站标题
🧭 导航菜单
🔍 搜索框
👤 用户登录/注册
```

### 3.2 创建头部片段


**步骤①：创建header.html文件**

```html
<!-- fragments/header.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>

<!-- th:fragment 定义片段名称 -->
<header th:fragment="header">
    <div class="header-container">
        <!-- Logo区域 -->
        <div class="logo">
            <img th:src="@{/images/logo.png}" alt="网站Logo">
            <span>我的网站</span>
        </div>
        
        <!-- 导航菜单 -->
        <nav class="main-nav">
            <a th:href="@{/}">首页</a>
            <a th:href="@{/about}">关于我们</a>
            <a th:href="@{/products}">产品中心</a>
            <a th:href="@{/contact}">联系我们</a>
        </nav>
        
        <!-- 用户操作区 -->
        <div class="user-actions">
            <a th:href="@{/login}">登录</a>
            <a th:href="@{/register}">注册</a>
        </div>
    </div>
</header>

</body>
</html>
```

**代码解释**：

| 代码 | **含义** | **作用** |
|------|---------|---------|
| `th:fragment="header"` | `定义片段名称` | `给这段代码起个名字，方便别的页面调用` |
| `th:src="@{/images/logo.png}"` | `Thymeleaf路径写法` | `自动处理项目路径，不用写死绝对路径` |
| `th:href="@{/about}"` | `链接路径` | `点击跳转到/about页面` |

**步骤②：在页面中引用头部**

```html
<!-- pages/index.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>首页</title>
</head>
<body>

<!-- 引入头部片段 -->
<div th:replace="~{fragments/header :: header}"></div>

<main>
    <h1>欢迎来到首页</h1>
    <p>这是主要内容区域</p>
</main>

</body>
</html>
```

**引用语法解析**：

```
th:replace="~{fragments/header :: header}"
           └─┬─┘ └──────┬──────┘ └─┬─┘
             │           │          └─ 片段名称
             │           └─ 文件路径（相对于templates目录）
             └─ 波浪号~表示模板引用
```

### 3.3 动态头部内容


**根据登录状态显示不同内容**：

```html
<!-- 升级版header.html -->
<header th:fragment="header">
    <div class="header-container">
        <div class="logo">
            <img th:src="@{/images/logo.png}" alt="Logo">
            <span>我的网站</span>
        </div>
        
        <nav class="main-nav">
            <a th:href="@{/}">首页</a>
            <a th:href="@{/about}">关于</a>
            <!-- 只有管理员能看到 -->
            <a th:if="${isAdmin}" th:href="@{/admin}">管理后台</a>
        </nav>
        
        <!-- 根据登录状态显示不同内容 -->
        <div class="user-actions">
            <!-- 未登录显示 -->
            <div th:if="${session.user == null}">
                <a th:href="@{/login}">登录</a>
                <a th:href="@{/register}">注册</a>
            </div>
            
            <!-- 已登录显示 -->
            <div th:if="${session.user != null}">
                <span>欢迎，<span th:text="${session.user.name}"></span></span>
                <a th:href="@{/logout}">退出</a>
            </div>
        </div>
    </div>
</header>
```

**理解条件显示**：

```
th:if="${session.user == null}"
      └────────┬────────┘
               └─ 判断条件（session中user是否为空）

原理：
- 如果session.user是空的 → 显示登录/注册按钮
- 如果session.user有值 → 显示用户名和退出按钮

就像：
if (用户已登录) {
    显示"欢迎XX，退出"
} else {
    显示"登录 | 注册"
}
```

---

## 4. 📌 公共底部设计


### 4.1 底部的作用与内容


**网站底部通常放什么**：

```
典型底部内容：
┌─────────────────────────────────────┐
│  关于我们 | 联系方式 | 隐私政策      │
│  © 2025 我的网站 版权所有             │
│  备案号：京ICP备xxxxxx号              │
└─────────────────────────────────────┘

常见模块：
📋 友情链接
📧 联系方式
📜 法律声明
©️ 版权信息
🔗 社交媒体图标
```

### 4.2 创建底部片段


**基础底部设计**：

```html
<!-- fragments/footer.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<footer th:fragment="footer" class="site-footer">
    <!-- 链接区域 -->
    <div class="footer-links">
        <a th:href="@{/about}">关于我们</a>
        <span>|</span>
        <a th:href="@{/contact}">联系方式</a>
        <span>|</span>
        <a th:href="@{/privacy}">隐私政策</a>
        <span>|</span>
        <a th:href="@{/terms}">服务条款</a>
    </div>
    
    <!-- 版权信息 -->
    <div class="copyright">
        <p>© <span th:text="${#dates.year(#dates.createNow())}"></span> 
           我的网站 版权所有</p>
        <p>备案号：京ICP备12345678号</p>
    </div>
    
    <!-- 社交媒体 -->
    <div class="social-media">
        <a th:href="@{#}">
            <img th:src="@{/images/wechat.png}" alt="微信">
        </a>
        <a th:href="@{#}">
            <img th:src="@{/images/weibo.png}" alt="微博">
        </a>
    </div>
</footer>

</body>
</html>
```

**特殊功能解释**：

```
${#dates.year(#dates.createNow())}
  └──┬──┘ └───────┬──────────┘
     │            └─ 获取当前日期
     └─ Thymeleaf工具类，处理日期

作用：自动显示当前年份
2024年显示：© 2024
2025年显示：© 2025
不用每年手动改！
```

### 4.3 多列布局底部


**更复杂的底部设计**：

```html
<!-- 三列布局底部 -->
<footer th:fragment="footer-advanced" class="footer-advanced">
    <div class="footer-columns">
        <!-- 第一列：公司信息 -->
        <div class="footer-col">
            <h4>关于我们</h4>
            <p>我们是一家专注于...</p>
            <p>地址：北京市...</p>
            <p>电话：010-12345678</p>
        </div>
        
        <!-- 第二列：快捷链接 -->
        <div class="footer-col">
            <h4>快捷导航</h4>
            <ul>
                <li><a th:href="@{/products}">产品中心</a></li>
                <li><a th:href="@{/solutions}">解决方案</a></li>
                <li><a th:href="@{/support}">技术支持</a></li>
                <li><a th:href="@{/download}">资料下载</a></li>
            </ul>
        </div>
        
        <!-- 第三列：关注我们 -->
        <div class="footer-col">
            <h4>关注我们</h4>
            <img th:src="@{/images/qrcode.png}" alt="二维码">
            <p>扫码关注公众号</p>
        </div>
    </div>
    
    <!-- 底部版权栏 -->
    <div class="footer-bottom">
        <p>© <span th:text="${#dates.year(#dates.createNow())}"></span> 
           公司名称 版权所有 | 
           <a th:href="@{/sitemap}">网站地图</a></p>
    </div>
</footer>
```

**布局结构**：

```
┌──────────────────────────────────────┐
│  关于我们    │  快捷导航  │  关注我们  │
│  公司简介    │  产品中心  │  [二维码]  │
│  联系方式    │  解决方案  │  扫码关注  │
├──────────────────────────────────────┤
│       © 2025 版权所有 | 网站地图       │
└──────────────────────────────────────┘
```

---

## 5. 🧭 导航菜单片段


### 5.1 导航菜单的重要性


**导航就像路标**：

```
🗺️ 导航菜单 = 网站的地图
- 帮用户知道自己在哪
- 帮用户快速到想去的地方
- 清晰的导航让用户不迷路
```

### 5.2 基础导航菜单


**简单水平导航**：

```html
<!-- fragments/nav.html -->
<nav th:fragment="main-nav" class="main-navigation">
    <ul>
        <li><a th:href="@{/}" th:class="${activePage == 'home'} ? 'active' : ''">
            首页
        </a></li>
        <li><a th:href="@{/products}" th:class="${activePage == 'products'} ? 'active' : ''">
            产品
        </a></li>
        <li><a th:href="@{/about}" th:class="${activePage == 'about'} ? 'active' : ''">
            关于
        </a></li>
        <li><a th:href="@{/contact}" th:class="${activePage == 'contact'} ? 'active' : ''">
            联系
        </a></li>
    </ul>
</nav>
```

**高亮当前页原理**：

```
th:class="${activePage == 'home'} ? 'active' : ''"
         └──────────┬──────────┘   └──┬──┘  └┬┘
                    │                 │      └─ 否则不加class
                    │                 └─ 相等就加active class
                    └─ 判断当前页是否是home

使用方法：
Controller中设置：
model.addAttribute("activePage", "home");

效果：
首页链接会有 class="active"，CSS可以高亮显示
```

### 5.3 下拉菜单设计


**带子菜单的导航**：

```html
<!-- 下拉导航菜单 -->
<nav th:fragment="dropdown-nav">
    <ul class="nav-menu">
        <!-- 普通菜单项 -->
        <li><a th:href="@{/}">首页</a></li>
        
        <!-- 带下拉的菜单项 -->
        <li class="has-dropdown">
            <a th:href="@{/products}">产品 ▼</a>
            <!-- 子菜单 -->
            <ul class="dropdown-menu">
                <li><a th:href="@{/products/software}">软件产品</a></li>
                <li><a th:href="@{/products/hardware}">硬件产品</a></li>
                <li><a th:href="@{/products/service}">服务产品</a></li>
            </ul>
        </li>
        
        <li><a th:href="@{/about}">关于</a></li>
        <li><a th:href="@{/contact}">联系</a></li>
    </ul>
</nav>
```

**视觉效果**：

```
正常状态：
[首页]  [产品 ▼]  [关于]  [联系]

鼠标悬停产品：
[首页]  [产品 ▼]  [关于]  [联系]
         └─┬─┘
           ├─ 软件产品
           ├─ 硬件产品
           └─ 服务产品
```

### 5.4 动态菜单数据


**从数据库读取菜单**：

```html
<!-- 动态菜单 -->
<nav th:fragment="dynamic-nav">
    <ul>
        <!-- 循环遍历菜单数据 -->
        <li th:each="menu : ${menuList}">
            <a th:href="@{${menu.url}}" th:text="${menu.name}"></a>
            
            <!-- 如果有子菜单 -->
            <ul th:if="${menu.children != null and !menu.children.isEmpty()}">
                <li th:each="sub : ${menu.children}">
                    <a th:href="@{${sub.url}}" th:text="${sub.name}"></a>
                </li>
            </ul>
        </li>
    </ul>
</nav>
```

**对应的Java数据结构**：

```java
// Controller中准备数据
public String index(Model model) {
    List<Menu> menuList = new ArrayList<>();
    
    // 创建产品菜单（带子菜单）
    Menu products = new Menu("产品", "/products");
    products.addChild(new Menu("软件", "/products/software"));
    products.addChild(new Menu("硬件", "/products/hardware"));
    menuList.add(products);
    
    // 创建普通菜单
    menuList.add(new Menu("关于", "/about"));
    menuList.add(new Menu("联系", "/contact"));
    
    model.addAttribute("menuList", menuList);
    return "index";
}
```

**理解循环遍历**：

```
th:each="menu : ${menuList}"
        └─┬─┘   └────┬────┘
          │          └─ 数据源（菜单列表）
          └─ 循环变量（当前菜单项）

就像for循环：
for (Menu menu : menuList) {
    // 生成一个<li>
}
```

---

## 6. 📂 侧边栏片段设计


### 6.1 侧边栏的使用场景


**什么时候需要侧边栏**：

```
典型应用场景：
📰 博客网站 → 右侧显示热门文章、分类、标签
🏪 电商网站 → 左侧显示商品分类筛选
📚 文档网站 → 左侧显示目录导航
👤 个人中心 → 左侧显示功能菜单

布局示意：
┌──────┬────────────┐
│ 侧边栏 │  主要内容   │
│ 菜单1  │  ........  │
│ 菜单2  │  ........  │
│ 菜单3  │  ........  │
└──────┴────────────┘
```

### 6.2 基础侧边栏设计


**简单的侧边栏**：

```html
<!-- fragments/sidebar.html -->
<aside th:fragment="sidebar" class="sidebar">
    <!-- 分类模块 -->
    <div class="sidebar-widget">
        <h3>文章分类</h3>
        <ul>
            <li><a th:href="@{/category/tech}">技术文章 (25)</a></li>
            <li><a th:href="@{/category/life}">生活随笔 (18)</a></li>
            <li><a th:href="@{/category/travel}">旅行游记 (12)</a></li>
        </ul>
    </div>
    
    <!-- 热门文章 -->
    <div class="sidebar-widget">
        <h3>热门文章</h3>
        <ul>
            <li><a th:href="@{/post/1}">如何学习Java</a></li>
            <li><a th:href="@{/post/2}">Spring Boot入门</a></li>
            <li><a th:href="@{/post/3}">Thymeleaf实战</a></li>
        </ul>
    </div>
    
    <!-- 标签云 -->
    <div class="sidebar-widget">
        <h3>标签</h3>
        <div class="tag-cloud">
            <a th:href="@{/tag/java}" class="tag">Java</a>
            <a th:href="@{/tag/spring}" class="tag">Spring</a>
            <a th:href="@{/tag/database}" class="tag">数据库</a>
        </div>
    </div>
</aside>
```

**组件化思维**：

```
侧边栏 = 多个小组件堆叠

┌──────────────┐
│ 文章分类组件  │ ← 可独立复用
├──────────────┤
│ 热门文章组件  │ ← 可独立复用
├──────────────┤
│ 标签云组件    │ ← 可独立复用
└──────────────┘
```

### 6.3 带数据的侧边栏


**动态数据侧边栏**：

```html
<!-- 动态侧边栏 -->
<aside th:fragment="dynamic-sidebar">
    <!-- 分类（从数据库读取） -->
    <div class="sidebar-widget">
        <h3>文章分类</h3>
        <ul>
            <li th:each="cat : ${categories}">
                <a th:href="@{/category/{id}(id=${cat.id})}" 
                   th:text="${cat.name} + ' (' + ${cat.count} + ')'">
                </a>
            </li>
        </ul>
    </div>
    
    <!-- 最新文章 -->
    <div class="sidebar-widget">
        <h3>最新文章</h3>
        <ul>
            <li th:each="post, iterStat : ${recentPosts}" 
                th:if="${iterStat.index < 5}">
                <a th:href="@{/post/{id}(id=${post.id})}" 
                   th:text="${post.title}"></a>
                <span class="post-date" 
                      th:text="${#dates.format(post.createTime, 'MM-dd')}">
                </span>
            </li>
        </ul>
    </div>
</aside>
```

**代码关键点**：

```
th:href="@{/category/{id}(id=${cat.id})}"
                    └┬┘     └──┬──┘
                     │         └─ 参数值
                     └─ 路径变量占位符

效果：
如果cat.id = 3，生成：/category/3

iterStat.index < 5
└──────┬──────┘
       └─ 循环状态变量，获取当前索引
       
作用：只显示前5条数据
```

### 6.4 可折叠侧边栏


**支持展开/收起的侧边栏**：

```html
<!-- 可折叠侧边栏 -->
<aside th:fragment="collapsible-sidebar">
    <!-- 分类区块（默认展开） -->
    <div class="sidebar-section">
        <h3 class="section-title" onclick="toggleSection(this)">
            <span>📁 文章分类</span>
            <span class="toggle-icon">▼</span>
        </h3>
        <div class="section-content">
            <ul>
                <li th:each="cat : ${categories}">
                    <a th:href="@{/category/{id}(id=${cat.id})}" 
                       th:text="${cat.name}"></a>
                </li>
            </ul>
        </div>
    </div>
    
    <!-- 归档区块（默认折叠） -->
    <div class="sidebar-section collapsed">
        <h3 class="section-title" onclick="toggleSection(this)">
            <span>📅 文章归档</span>
            <span class="toggle-icon">▶</span>
        </h3>
        <div class="section-content" style="display:none;">
            <ul>
                <li><a th:href="@{/archive/2025}">2025年 (45)</a></li>
                <li><a th:href="@{/archive/2024}">2024年 (120)</a></li>
            </ul>
        </div>
    </div>
</aside>

<script>
function toggleSection(element) {
    const section = element.parentElement;
    const content = section.querySelector('.section-content');
    const icon = section.querySelector('.toggle-icon');
    
    if (section.classList.contains('collapsed')) {
        section.classList.remove('collapsed');
        content.style.display = 'block';
        icon.textContent = '▼';
    } else {
        section.classList.add('collapsed');
        content.style.display = 'none';
        icon.textContent = '▶';
    }
}
</script>
```

---

## 7. 📄 内容区域布局


### 7.1 内容区的结构设计


**内容区域的典型结构**：

```
┌─────────────────────────────┐
│         面包屑导航           │ ← 首页 > 产品 > 详情
├─────────────────────────────┤
│         页面标题             │ ← <h1>产品详情</h1>
├─────────────────────────────┤
│                             │
│         主要内容             │ ← 实际内容区域
│                             │
├─────────────────────────────┤
│         相关推荐             │ ← 可选的额外内容
└─────────────────────────────┘
```

### 7.2 面包屑导航


**什么是面包屑导航**：就像路径指示，告诉用户当前在网站的哪个位置。

```html
<!-- fragments/breadcrumb.html -->
<nav th:fragment="breadcrumb" class="breadcrumb">
    <!-- 首页始终存在 -->
    <a th:href="@{/}">首页</a>
    <span class="separator">></span>
    
    <!-- 动态面包屑 -->
    <span th:each="crumb, iterStat : ${breadcrumbs}">
        <!-- 不是最后一项，显示链接 -->
        <a th:if="${!iterStat.last}" 
           th:href="@{${crumb.url}}" 
           th:text="${crumb.name}"></a>
        
        <!-- 最后一项，只显示文本 -->
        <span th:if="${iterStat.last}" 
              class="current" 
              th:text="${crumb.name}"></span>
        
        <!-- 分隔符（最后一项不显示） -->
        <span th:if="${!iterStat.last}" class="separator">></span>
    </span>
</nav>
```

**Controller中设置面包屑**：

```java
@GetMapping("/products/detail/{id}")
public String productDetail(@PathVariable Long id, Model model) {
    // 创建面包屑
    List<Breadcrumb> breadcrumbs = new ArrayList<>();
    breadcrumbs.add(new Breadcrumb("产品中心", "/products"));
    breadcrumbs.add(new Breadcrumb("产品分类", "/products/category"));
    breadcrumbs.add(new Breadcrumb("产品详情", null)); // 最后一项不需要链接
    
    model.addAttribute("breadcrumbs", breadcrumbs);
    return "product-detail";
}
```

**最终效果**：

```
首页 > 产品中心 > 产品分类 > 产品详情
  ↑      ↑          ↑          ↑
 链接   链接       链接      纯文本
```

### 7.3 内容区布局片段


**基础内容布局**：

```html
<!-- fragments/content-layout.html -->
<div th:fragment="content-wrapper">
    <!-- 面包屑导航 -->
    <div th:replace="~{fragments/breadcrumb :: breadcrumb}"></div>
    
    <!-- 页面头部 -->
    <div class="page-header">
        <h1 th:text="${pageTitle}">页面标题</h1>
        <p class="page-subtitle" th:text="${pageSubtitle}"></p>
    </div>
    
    <!-- 主要内容区（插槽） -->
    <div class="main-content">
        <div th:insert="~{${contentTemplate}}"></div>
    </div>
    
    <!-- 底部操作区 -->
    <div class="page-actions" th:if="${showActions}">
        <button class="btn-primary">提交</button>
        <button class="btn-secondary">取消</button>
    </div>
</div>
```

**使用内容布局**：

```html
<!-- pages/product-list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>产品列表</title>
</head>
<body>

<!-- 使用布局，传入参数 -->
<div th:replace="~{fragments/content-layout :: content-wrapper(
    pageTitle='产品列表',
    pageSubtitle='共找到120个产品',
    contentTemplate='fragments/product-grid',
    showActions=false
)}"></div>

</body>
</html>
```

### 7.4 卡片式内容布局


**卡片网格布局**：

```html
<!-- fragments/card-grid.html -->
<div th:fragment="card-grid" class="card-grid">
    <!-- 循环生成卡片 -->
    <div th:each="item : ${items}" class="card">
        <!-- 卡片图片 -->
        <div class="card-image">
            <img th:src="@{${item.imageUrl}}" th:alt="${item.title}">
        </div>
        
        <!-- 卡片内容 -->
        <div class="card-body">
            <h3 th:text="${item.title}">标题</h3>
            <p th:text="${#strings.abbreviate(item.description, 100)}">
                描述内容...
            </p>
        </div>
        
        <!-- 卡片底部 -->
        <div class="card-footer">
            <span class="price" th:text="'¥' + ${item.price}">¥99</span>
            <a th:href="@{/product/{id}(id=${item.id})}" 
               class="btn-detail">查看详情</a>
        </div>
    </div>
</div>
```

**视觉效果**：

```
┌──────┐ ┌──────┐ ┌──────┐
│ 图片  │ │ 图片  │ │ 图片  │
│ 标题  │ │ 标题  │ │ 标题  │
│ 描述  │ │ 描述  │ │ 描述  │
│¥99 详情│ │¥88 详情│ │¥77 详情│
└──────┘ └──────┘ └──────┘
```

**字符串工具函数**：

```
${#strings.abbreviate(item.description, 100)}
  └───┬───┘          └──────┬──────┘  └┬┘
      │                     │          └─ 最大长度
      │                     └─ 要处理的文本
      └─ Thymeleaf字符串工具

作用：
原文："这是一段很长很长很长...的描述"
结果："这是一段很长很长..."（超过100字符会截断并加省略号）
```

---

## 8. 📱 响应式布局支持


### 8.1 什么是响应式布局


**通俗理解**：

```
响应式 = 网页能"自动适应"不同屏幕大小

🖥️ 电脑屏幕（1920px）：显示3列卡片
💻 平板屏幕（768px）：显示2列卡片
📱 手机屏幕（375px）：显示1列卡片

就像：
- 水能根据容器形状自动调整
- 网页能根据屏幕大小自动调整
```

### 8.2 响应式CSS基础


**媒体查询示例**：

```html
<!-- fragments/responsive-layout.html -->
<style>
/* 电脑端布局（默认） */
.container {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3列 */
    gap: 20px;
}

/* 平板端布局（屏幕宽度 <= 1024px） */
@media (max-width: 1024px) {
    .container {
        grid-template-columns: repeat(2, 1fr); /* 2列 */
    }
    
    .sidebar {
        width: 200px; /* 缩小侧边栏 */
    }
}

/* 手机端布局（屏幕宽度 <= 768px） */
@media (max-width: 768px) {
    .container {
        grid-template-columns: 1fr; /* 1列 */
    }
    
    .sidebar {
        display: none; /* 隐藏侧边栏 */
    }
    
    .header .logo {
        font-size: 18px; /* 缩小Logo */
    }
}
</style>
```

**理解媒体查询**：

```
@media (max-width: 768px) { ... }
       └───────┬───────┘
               └─ 条件：屏幕宽度小于等于768px时

就像if语句：
if (屏幕宽度 <= 768px) {
    // 应用这些样式
}
```

### 8.3 响应式导航菜单


**电脑端横向，手机端汉堡菜单**：

```html
<!-- fragments/responsive-nav.html -->
<nav th:fragment="responsive-nav" class="responsive-nav">
    <!-- 汉堡按钮（仅手机端显示） -->
    <button class="menu-toggle" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <!-- 菜单列表 -->
    <ul class="nav-menu" id="navMenu">
        <li><a th:href="@{/}">首页</a></li>
        <li><a th:href="@{/products}">产品</a></li>
        <li><a th:href="@{/about}">关于</a></li>
        <li><a th:href="@{/contact}">联系</a></li>
    </ul>
</nav>

<style>
/* 电脑端：横向排列 */
.nav-menu {
    display: flex;
    list-style: none;
}
.nav-menu li {
    margin: 0 15px;
}
.menu-toggle {
    display: none; /* 隐藏汉堡按钮 */
}

/* 手机端：竖向排列 */
@media (max-width: 768px) {
    .nav-menu {
        display: none; /* 默认隐藏 */
        flex-direction: column;
        position: absolute;
        top: 60px;
        left: 0;
        width: 100%;
        background: white;
    }
    
    .nav-menu.active {
        display: flex; /* 点击后显示 */
    }
    
    .menu-toggle {
        display: block; /* 显示汉堡按钮 */
    }
}
</style>

<script>
function toggleMenu() {
    document.getElementById('navMenu').classList.toggle('active');
}
</script>
```

**效果对比**：

```
电脑端：
[Logo] [首页] [产品] [关于] [联系]

手机端（菜单关闭）：
[Logo]         [≡]

手机端（菜单打开）：
[Logo]         [≡]
┌────────────────┐
│     首页       │
│     产品       │
│     关于       │
│     联系       │
└────────────────┘
```

### 8.4 响应式侧边栏


**电脑显示，手机隐藏或底部显示**：

```html
<!-- 响应式布局容器 -->
<div class="layout-container">
    <!-- 侧边栏 -->
    <aside class="sidebar">
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>
    </aside>
    
    <!-- 主内容 -->
    <main class="main-content">
        <h1>主要内容</h1>
        <p>这里是页面的主要内容...</p>
    </main>
</div>

<style>
/* 电脑端：侧边栏+内容并排 */
.layout-container {
    display: flex;
}
.sidebar {
    width: 250px;
    flex-shrink: 0;
}
.main-content {
    flex: 1;
}

/* 平板端：缩小侧边栏 */
@media (max-width: 1024px) {
    .sidebar {
        width: 200px;
    }
}

/* 手机端：侧边栏移到底部或隐藏 */
@media (max-width: 768px) {
    .layout-container {
        flex-direction: column; /* 改为竖向 */
    }
    .sidebar {
        width: 100%;
        order: 2; /* 移到底部 */
    }
    .main-content {
        order: 1;
    }
}
</style>
```

### 8.5 响应式图片


**根据屏幕提供不同尺寸图片**：

```html
<!-- 响应式图片 -->
<picture>
    <!-- 手机端：小图 -->
    <source media="(max-width: 768px)" 
            th:srcset="@{/images/product-small.jpg}">
    
    <!-- 平板端：中图 -->
    <source media="(max-width: 1024px)" 
            th:srcset="@{/images/product-medium.jpg}">
    
    <!-- 电脑端：大图（默认） -->
    <img th:src="@{/images/product-large.jpg}" 
         alt="产品图片">
</picture>
```

**为什么要响应式图片**：

```
❌ 不使用响应式：
手机端加载2MB的大图 → 浪费流量，加载慢

✅ 使用响应式：
手机端加载200KB的小图 → 节省流量，加载快
电脑端加载2MB的大图 → 保证清晰度

原理：
- 手机屏幕小，不需要超大图
- 电脑屏幕大，需要高清图
- 各取所需，性能最优
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 页面布局本质：将网页拆分成可复用的片段，像搭积木一样组合
🔸 片段定义：th:fragment="名称" 定义片段
🔸 片段引用：th:replace 或 th:insert 引用片段
🔸 三大布局策略：基础模板、片段组装、混合模式
🔸 响应式设计：用@media查询适配不同屏幕
```

### 9.2 关键理解要点


**🔹 布局设计思维**

```
规划优先：
1. 先分析哪些部分固定（头部、底部）
2. 哪些部分变化（内容区）
3. 哪些部分可复用（菜单、侧边栏）

命名规范：
fragments/  → 存放片段
layouts/    → 存放布局模板
pages/      → 存放具体页面
```

**🔹 片段引用的两种方式**

| 方式 | **语法** | **效果** | **使用场景** |
|------|---------|---------|-------------|
| `th:replace` | `完全替换` | `用片段替换整个标签` | `常用，直接替换` |
| `th:insert` | `插入内容` | `保留外层标签，插入片段` | `需要保留外层div时` |

**🔹 动态内容的处理**

```
静态片段：写死的HTML，适合固定内容
动态片段：结合th:each、th:if，适合变化内容

选择原则：
- 内容不变 → 静态片段
- 内容会变 → 动态片段 + 数据传递
```

### 9.3 实际应用建议


**🎯 项目结构建议**

```
src/main/resources/templates/
├── fragments/              # 公共片段
│   ├── header.html        # 头部
│   ├── footer.html        # 底部
│   ├── nav.html           # 导航
│   └── sidebar.html       # 侧边栏
│
├── layouts/               # 布局模板
│   ├── base.html          # 基础布局
│   └── admin.html         # 后台布局
│
└── pages/                 # 具体页面
    ├── index.html
    ├── about.html
    └── product/
        ├── list.html
        └── detail.html
```

**🔧 性能优化要点**

```
✅ 片段缓存：
- 静态片段可以缓存，减少渲染时间

✅ 按需加载：
- 手机端不需要的组件不加载
- 用th:if或CSS隐藏

✅ 图片优化：
- 使用响应式图片
- 懒加载非首屏图片

✅ CSS优化：
- 关键CSS内联
- 非关键CSS异步加载
```

**🚨 常见问题及解决**

```
问题1：片段找不到
→ 检查路径是否正确（相对于templates目录）
→ 检查片段名称拼写

问题2：样式冲突
→ 给片段加独特的class前缀
→ 使用CSS模块化方案

问题3：数据传递失败
→ 检查Model中是否添加了数据
→ 检查变量名是否一致

问题4：响应式失效
→ 检查meta viewport标签是否存在
→ 检查CSS媒体查询顺序
```

### 9.4 学习路径建议


**📈 循序渐进的学习步骤**

```
第一步：理解片段概念
→ 创建简单的header、footer片段
→ 在页面中引用片段

第二步：掌握布局策略
→ 创建基础布局模板
→ 让具体页面继承布局

第三步：动态数据处理
→ 从Controller传递数据
→ 在片段中循环、判断显示

第四步：响应式设计
→ 添加媒体查询
→ 适配手机、平板、电脑

第五步：项目实战
→ 搭建完整的布局系统
→ 应用到真实项目中
```

**核心记忆口诀**：
```
页面拆分成片段，复用提高效率高
定义片段用fragment，引用片段replace好
头部底部做通用，导航侧栏灵活调
响应布局适配好，电脑手机都能瞧
```