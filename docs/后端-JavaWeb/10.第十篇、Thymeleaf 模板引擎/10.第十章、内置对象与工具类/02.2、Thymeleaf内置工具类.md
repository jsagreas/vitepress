---
title: 2、Thymeleaf内置工具类
---
## 📚 目录

1. [工具类对象概述](#1-工具类对象概述)
2. [strings字符串工具](#2-strings字符串工具)
3. [numbers数字工具](#3-numbers数字工具)
4. [dates日期工具](#4-dates日期工具)
5. [calendars日历工具](#5-calendars日历工具)
6. [arrays数组工具](#6-arrays数组工具)
7. [lists列表工具](#7-lists列表工具)
8. [sets集合工具](#8-sets集合工具)
9. [maps映射工具](#9-maps映射工具)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 🛠️ 工具类对象概述


### 1.1 什么是工具类对象


**通俗理解**：就像工具箱里的各种工具，Thymeleaf提供了一套现成的"帮手"，让你在模板里处理数据更方便。

```
生活中的类比：
你要做木工活 → 工具箱里有：锤子、锯子、螺丝刀
你要处理数据 → Thymeleaf提供：字符串工具、日期工具、数字工具...

核心作用：
✅ 不用自己写复杂代码
✅ 直接在模板里调用
✅ 处理常见的数据格式化需求
```

### 1.2 为什么需要工具类


**实际场景问题**：
```html
<!-- 后端传来的数据：userName = "john doe" -->

❌ 没有工具类的做法：
在Controller里先处理 → 转大写 → 再传给模板
代码分散，不方便

✅ 有工具类的做法：
直接在模板里：${#strings.capitalize(userName)}
输出："John Doe"
方便快捷！
```

### 1.3 使用方式说明


**基本语法格式**：
```
${#工具类名.方法名(参数)}

示例：
${#strings.toUpperCase('hello')}  → "HELLO"
${#numbers.formatDecimal(price,2,2)} → "99.00"
${#dates.format(today,'yyyy-MM-dd')} → "2025-09-23"
```

> 📌 **记住**：所有工具类都以`#`开头，这是Thymeleaf的约定

---

## 2. 📝 strings字符串工具


### 2.1 基础字符串操作


**大小写转换**：
```html
<!-- 假设：message = "hello world" -->

转大写：
<p th:text="${#strings.toUpperCase(message)}"></p>
<!-- 输出：HELLO WORLD -->

转小写：
<p th:text="${#strings.toLowerCase(message)}"></p>  
<!-- 输出：hello world -->

首字母大写：
<p th:text="${#strings.capitalize(message)}"></p>
<!-- 输出：Hello World -->
```

**实际应用场景**：
```
用户输入的名字可能格式不统一：
"JOHN" "john" "John" 

统一处理：
${#strings.capitalize(userName)} 
都变成：John
```

### 2.2 字符串判断检查


**判空和长度检查**：
```html
<!-- 检查是否为空 -->
<div th:if="${#strings.isEmpty(title)}">
    请输入标题
</div>

<!-- 检查长度 -->
<p>标题长度：<span th:text="${#strings.length(title)}"></span></p>

<!-- 实用组合 -->
<div th:if="${!#strings.isEmpty(content) and #strings.length(content) > 100}">
    内容太长了，请精简
</div>
```

**包含判断**：
```html
<!-- 判断是否包含某个子串 -->
<span th:if="${#strings.contains(email, '@gmail.com')}">
    Gmail用户
</span>

<!-- 判断开头 -->
<span th:if="${#strings.startsWith(phone, '138')}">
    移动号码
</span>

<!-- 判断结尾 -->
<span th:if="${#strings.endsWith(filename, '.jpg')}">
    这是图片文件
</span>
```

### 2.3 字符串截取和拼接


**substring截取**：
```html
<!-- 文章摘要：只显示前50个字 -->
<p th:text="${#strings.substring(article, 0, 50)} + '...'"></p>

<!-- 显示用户名前3个字 -->
<span th:text="${#strings.substring(userName, 0, 3)}"></span>
```

**replace替换**：
```html
<!-- 把所有空格替换为下划线 -->
<p th:text="${#strings.replace(text, ' ', '_')}"></p>

<!-- 敏感词过滤 -->
<p th:text="${#strings.replace(comment, '敏感词', '***')}"></p>
```

### 2.4 常用方法速查表


| 方法 | **作用** | **示例** | **结果** |
|------|---------|---------|---------|
| `toUpperCase(str)` | `转大写` | `#strings.toUpperCase('abc')` | `ABC` |
| `toLowerCase(str)` | `转小写` | `#strings.toLowerCase('ABC')` | `abc` |
| `capitalize(str)` | `首字母大写` | `#strings.capitalize('hello')` | `Hello` |
| `isEmpty(str)` | `判断为空` | `#strings.isEmpty('')` | `true` |
| `length(str)` | `获取长度` | `#strings.length('abc')` | `3` |
| `substring(str,start,end)` | `截取字符串` | `#strings.substring('hello',0,2)` | `he` |
| `contains(str,sub)` | `包含判断` | `#strings.contains('abc','b')` | `true` |
| `replace(str,old,new)` | `替换内容` | `#strings.replace('a-b','-','_')` | `a_b` |

---

## 3. 🔢 numbers数字工具


### 3.1 数字格式化


**小数位数控制**：
```html
<!-- 价格显示：保留2位小数 -->
<!-- 假设：price = 99.5 -->
<p>价格：¥<span th:text="${#numbers.formatDecimal(price, 1, 2)}"></span></p>
<!-- 输出：¥99.50 -->

格式说明：
formatDecimal(数值, 整数位最少, 小数位)
- 整数位最少：不足会补0
- 小数位：固定显示的位数
```

**百分比显示**：
```html
<!-- 进度百分比 -->
<!-- 假设：progress = 0.856 -->
<p>完成度：<span th:text="${#numbers.formatPercent(progress, 1, 2)}"></span></p>
<!-- 输出：85.60% -->
```

### 3.2 货币格式化


**金额显示**：
```html
<!-- 订单金额 -->
<p th:text="${#numbers.formatCurrency(amount)}"></p>
<!-- 根据系统语言自动显示：¥1,234.56 或 $1,234.56 -->

<!-- 指定货币符号 -->
<p th:text="'¥' + ${#numbers.formatDecimal(amount, 1, 2)}"></p>
```

### 3.3 数字序列生成


**生成连续数字**：
```html
<!-- 分页按钮：1 2 3 4 5 -->
<span th:each="num : ${#numbers.sequence(1, 5)}">
    <a th:text="${num}" th:href="'?page=' + ${num}"></a>
</span>

<!-- 年份选择器：2020-2025 -->
<select>
    <option th:each="year : ${#numbers.sequence(2020, 2025)}" 
            th:value="${year}" 
            th:text="${year}"></option>
</select>
```

**指定步长**：
```html
<!-- 每隔10递增：10, 20, 30, 40, 50 -->
<div th:each="num : ${#numbers.sequence(10, 50, 10)}">
    <span th:text="${num}"></span>
</div>
```

### 3.4 实际应用示例


**商品价格展示**：
```html
<!-- 完整的价格展示 -->
<div class="product-price">
    <!-- 原价：划线显示 -->
    <del th:text="'¥' + ${#numbers.formatDecimal(originalPrice, 1, 2)}"></del>
    
    <!-- 现价：红色大字 -->
    <span class="current-price" 
          th:text="'¥' + ${#numbers.formatDecimal(currentPrice, 1, 2)}"></span>
    
    <!-- 折扣：百分比 -->
    <span class="discount" 
          th:text="${#numbers.formatPercent(discount, 1, 0)} + ' OFF'"></span>
</div>

<!-- 效果示例：
¥199.00  ¥149.00  25% OFF
-->
```

---

## 4. 📅 dates日期工具


### 4.1 日期格式化


**基本格式化**：
```html
<!-- 假设：today = 2025-09-23 15:30:45 -->

标准日期：
<p th:text="${#dates.format(today, 'yyyy-MM-dd')}"></p>
<!-- 输出：2025-09-23 -->

完整时间：
<p th:text="${#dates.format(today, 'yyyy-MM-dd HH:mm:ss')}"></p>
<!-- 输出：2025-09-23 15:30:45 -->

中文日期：
<p th:text="${#dates.format(today, 'yyyy年MM月dd日')}"></p>
<!-- 输出：2025年09月23日 -->
```

**格式符号说明**：
```
常用日期格式符号：
yyyy  → 四位年份（2025）
MM    → 两位月份（09）
dd    → 两位日期（23）
HH    → 24小时制小时（15）
hh    → 12小时制小时（03）
mm    → 分钟（30）
ss    → 秒（45）
E     → 星期（星期二）
```

### 4.2 提取日期部分


**获取年月日时分秒**：
```html
<!-- 单独提取各部分 -->
<p>年份：<span th:text="${#dates.year(today)}"></span></p>
<!-- 输出：2025 -->

<p>月份：<span th:text="${#dates.month(today)}"></span></p>
<!-- 输出：9（注意：月份从0开始，这里实际是9月） -->

<p>日期：<span th:text="${#dates.day(today)}"></span></p>
<!-- 输出：23 -->

<p>星期：<span th:text="${#dates.dayOfWeek(today)}"></span></p>
<!-- 输出：3（1=周日，7=周六） -->
```

### 4.3 实际应用场景


**文章发布时间**：
```html
<div class="article-meta">
    <!-- 发布日期 -->
    <span th:text="'发布于：' + ${#dates.format(publishTime, 'yyyy-MM-dd')}"></span>
    
    <!-- 显示星期 -->
    <span th:text="'星期' + ${#dates.dayOfWeekName(publishTime)}"></span>
    
    <!-- 显示时分 -->
    <span th:text="${#dates.format(publishTime, 'HH:mm')}"></span>
</div>

<!-- 效果：发布于：2025-09-23 星期二 15:30 -->
```

**日期对比显示**：
```html
<!-- 判断是否是今天 -->
<span th:if="${#dates.day(articleDate) == #dates.day(#dates.createNow())}">
    今天发布
</span>

<!-- 判断是否过期 -->
<span th:if="${articleDate.before(#dates.createNow())}" 
      class="expired">
    已过期
</span>
```

---

## 5. 📆 calendars日历工具


### 5.1 Calendar对象处理


**基本说明**：
```
#calendars 和 #dates 的区别：

#dates：处理 java.util.Date 对象
#calendars：处理 java.util.Calendar 对象

用法基本一致，方法名相同
```

**常用方法**：
```html
<!-- Calendar对象的格式化 -->
<p th:text="${#calendars.format(calendarObj, 'yyyy-MM-dd')}"></p>

<!-- 提取部分 -->
<p th:text="${#calendars.year(calendarObj)}"></p>
<p th:text="${#calendars.month(calendarObj)}"></p>
<p th:text="${#calendars.day(calendarObj)}"></p>
```

### 5.2 实际使用建议


> 💡 **新手提示**：  
> 现代Java开发更推荐使用`LocalDate`和`LocalDateTime`，它们比`Date`和`Calendar`更好用。  
> Thymeleaf对新API的支持需要引入额外的扩展包。

**最佳实践**：
```java
// 后端Controller建议做法
@GetMapping("/article")
public String article(Model model) {
    // 方式1：转为Date对象
    Date date = Date.from(LocalDateTime.now()
                    .atZone(ZoneId.systemDefault())
                    .toInstant());
    model.addAttribute("publishDate", date);
    
    // 方式2：格式化为字符串
    String dateStr = LocalDateTime.now()
                    .format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
    model.addAttribute("publishDateStr", dateStr);
    
    return "article";
}
```

---

## 6. 📊 arrays数组工具


### 6.1 数组基本操作


**长度和判空**：
```html
<!-- 假设：tags = ["Java", "Spring", "MySQL"] -->

数组长度：
<p>标签数量：<span th:text="${#arrays.length(tags)}"></span></p>
<!-- 输出：3 -->

判断为空：
<div th:if="${#arrays.isEmpty(tags)}">
    暂无标签
</div>
```

### 6.2 数组包含判断


**contains检查**：
```html
<!-- 检查是否包含某个元素 -->
<span th:if="${#arrays.contains(tags, 'Java')}">
    Java开发者
</span>

<!-- 检查是否包含任意一个 -->
<span th:if="${#arrays.containsAny(tags, new String[]{'Java','Python'})}">
    编程语言标签存在
</span>

<!-- 检查是否包含全部 -->
<span th:if="${#arrays.containsAll(tags, new String[]{'Java','Spring'})}">
    Spring开发技术栈
</span>
```

### 6.3 实际应用示例


**标签展示**：
```html
<div class="tag-list">
    <!-- 遍历数组显示标签 -->
    <span th:each="tag : ${tags}" 
          class="tag" 
          th:text="${tag}"></span>
    
    <!-- 显示标签总数 -->
    <span class="tag-count" 
          th:text="'共' + ${#arrays.length(tags)} + '个标签'"></span>
</div>

<!-- 效果：
Java  Spring  MySQL  共3个标签
-->
```

---

## 7. 📋 lists列表工具


### 7.1 List基本操作


**大小和判空**：
```html
<!-- 假设：userList = [user1, user2, user3] -->

列表大小：
<p>用户数：<span th:text="${#lists.size(userList)}"></span></p>
<!-- 输出：3 -->

判断为空：
<div th:if="${#lists.isEmpty(userList)}">
    暂无用户
</div>

判断不为空：
<div th:if="${!#lists.isEmpty(userList)}">
    <p>当前有 <span th:text="${#lists.size(userList)}"></span> 位用户</p>
</div>
```

### 7.2 列表排序


**sort排序**：
```html
<!-- 数字列表排序 -->
<!-- 假设：scores = [85, 92, 78, 95] -->
<ul>
    <li th:each="score : ${#lists.sort(scores)}" 
        th:text="${score}"></li>
</ul>
<!-- 输出：78, 85, 92, 95（升序） -->

<!-- 对象列表排序（需要实现Comparable接口） -->
<ul>
    <li th:each="user : ${#lists.sort(userList)}" 
        th:text="${user.name}"></li>
</ul>
```

### 7.3 列表包含判断


**contains检查**：
```html
<!-- 检查列表是否包含某个元素 -->
<span th:if="${#lists.contains(userList, currentUser)}">
    你在用户列表中
</span>

<!-- 检查是否包含任意一个 -->
<span th:if="${#lists.containsAny(roles, adminRoles)}">
    管理员权限
</span>
```

### 7.4 实际应用场景


**用户列表展示**：
```html
<div class="user-panel">
    <!-- 显示用户总数 -->
    <h3>在线用户（<span th:text="${#lists.size(onlineUsers)}"></span>）</h3>
    
    <!-- 判断是否有用户 -->
    <div th:if="${#lists.isEmpty(onlineUsers)}">
        当前没有在线用户
    </div>
    
    <!-- 显示用户列表 -->
    <ul th:unless="${#lists.isEmpty(onlineUsers)}">
        <li th:each="user : ${onlineUsers}">
            <span th:text="${user.name}"></span>
            <!-- 高亮当前用户 -->
            <span th:if="${#lists.contains(vipUsers, user)}" 
                  class="vip-badge">VIP</span>
        </li>
    </ul>
</div>
```

---

## 8. 🎯 sets集合工具


### 8.1 Set基本操作


**大小和判空**：
```html
<!-- Set和List的工具方法基本一致 -->
<!-- 假设：uniqueTags = Set{"Java", "Spring", "MySQL"} -->

集合大小：
<p>唯一标签数：<span th:text="${#sets.size(uniqueTags)}"></span></p>

判断为空：
<div th:if="${#sets.isEmpty(uniqueTags)}">
    暂无标签
</div>
```

### 8.2 Set包含判断


**contains检查**：
```html
<!-- 检查是否包含某个元素 -->
<span th:if="${#sets.contains(uniqueTags, 'Java')}">
    包含Java标签
</span>

<!-- Set的特点：自动去重 -->
<p>实际标签数（去重后）：<span th:text="${#sets.size(uniqueTags)}"></span></p>
```

### 8.3 实际应用说明


**去重场景**：
```html
<!-- Set常用于需要去重的场景 -->
<div class="unique-visitors">
    <h4>今日独立访客：<span th:text="${#sets.size(todayVisitors)}"></span></h4>
    
    <!-- 显示访客列表 -->
    <ul>
        <li th:each="visitor : ${todayVisitors}" 
            th:text="${visitor.name}"></li>
    </ul>
</div>
```

> 📌 **Set vs List 的选择**：  
> - List：有序、可重复，适合显示列表  
> - Set：无序、不重复，适合去重统计

---

## 9. 🗺️ maps映射工具


### 9.1 Map基本操作


**大小和判空**：
```html
<!-- 假设：userMap = {"admin": user1, "guest": user2} -->

Map大小：
<p>用户映射数：<span th:text="${#maps.size(userMap)}"></span></p>

判断为空：
<div th:if="${#maps.isEmpty(userMap)}">
    暂无映射关系
</div>
```

### 9.2 Map键值判断


**containsKey/containsValue**：
```html
<!-- 检查是否包含某个键 -->
<span th:if="${#maps.containsKey(userMap, 'admin')}">
    管理员存在
</span>

<!-- 检查是否包含某个值 -->
<span th:if="${#maps.containsValue(userMap, currentUser)}">
    当前用户在映射中
</span>
```

### 9.3 Map遍历


**遍历键值对**：
```html
<!-- 方式1：遍历键 -->
<ul>
    <li th:each="key : ${userMap.keySet()}">
        角色：<span th:text="${key}"></span>
        用户：<span th:text="${userMap.get(key).name}"></span>
    </li>
</ul>

<!-- 方式2：遍历Entry -->
<ul>
    <li th:each="entry : ${userMap}">
        <span th:text="${entry.key} + ': ' + ${entry.value.name}"></span>
    </li>
</ul>
```

### 9.4 实际应用示例


**配置信息展示**：
```html
<div class="config-panel">
    <h3>系统配置（<span th:text="${#maps.size(configMap)}"></span>项）</h3>
    
    <table>
        <tr th:each="config : ${configMap}">
            <td th:text="${config.key}"></td>
            <td th:text="${config.value}"></td>
        </tr>
    </table>
    
    <!-- 检查特定配置 -->
    <div th:if="${#maps.containsKey(configMap, 'debug')}">
        调试模式：<span th:text="${configMap.get('debug')}"></span>
    </div>
</div>
```

**统计信息展示**：
```html
<!-- 统计数据Map：{"今日访问": 1000, "本周访问": 5000, "本月访问": 20000} -->
<div class="statistics">
    <div th:each="stat : ${statisticsMap}" class="stat-item">
        <span class="label" th:text="${stat.key}"></span>
        <span class="value" th:text="${#numbers.formatInteger(stat.value, 1, 'COMMA')}"></span>
    </div>
</div>

<!-- 效果：
今日访问  1,000
本周访问  5,000
本月访问  20,000
-->
```

---

## 10. 📋 核心要点总结


### 10.1 工具类使用原则


```
🎯 选择合适的工具类：
字符串处理 → #strings
数字格式化 → #numbers
日期时间 → #dates / #calendars
数组操作 → #arrays
列表操作 → #lists
集合操作 → #sets
映射操作 → #maps
```

### 10.2 常见应用场景


| 场景 | **工具类** | **典型用法** |
|------|-----------|-------------|
| 用户名显示 | `#strings` | `capitalize(userName)` |
| 价格展示 | `#numbers` | `formatDecimal(price, 1, 2)` |
| 发布时间 | `#dates` | `format(time, 'yyyy-MM-dd')` |
| 标签列表 | `#lists` | `size(tags), isEmpty(tags)` |
| 权限检查 | `#sets` | `contains(roles, 'admin')` |
| 配置信息 | `#maps` | `containsKey(config, 'debug')` |

### 10.3 实用技巧


**组合使用**：
```html
<!-- 字符串+数字组合 -->
<p th:text="${#strings.toUpperCase(category)} + 
            ' (' + ${#numbers.formatInteger(count, 1, 'COMMA')} + ')'">
</p>
<!-- 效果：JAVA (1,234) -->

<!-- 日期+字符串组合 -->
<p th:text="'发布于' + ${#dates.format(publishTime, 'yyyy年MM月dd日')} + 
            ' by ' + ${#strings.capitalize(author)}">
</p>
<!-- 效果：发布于2025年09月23日 by John -->
```

**条件判断组合**：
```html
<div th:if="${!#strings.isEmpty(title) and #strings.length(title) < 100}">
    <h2 th:text="${#strings.capitalize(title)}"></h2>
</div>

<div th:if="${!#lists.isEmpty(items) and #lists.size(items) > 0}">
    <p>共有 <span th:text="${#lists.size(items)}"></span> 项内容</p>
</div>
```

### 10.4 学习检验清单


✅ **自检清单**：
- [ ] 能使用#strings处理用户输入的文本
- [ ] 会用#numbers格式化价格和数字
- [ ] 掌握#dates格式化日期的常用格式
- [ ] 理解#lists和#arrays的判空和遍历
- [ ] 能组合使用多个工具类

### 10.5 常见问题解答


**Q1：为什么工具类要用#开头？**
```
A：这是Thymeleaf的语法规定
   # 表示这是内置工具类
   $ 表示这是变量表达式
   * 表示这是选择变量表达式
```

**Q2：工具类方法调用失败怎么办？**
```
常见原因：
1. 对象为null → 先判空
2. 参数类型不对 → 检查数据类型
3. 方法名拼写错误 → 对照文档确认

解决方法：
<div th:if="${title != null}">
    <p th:text="${#strings.toUpperCase(title)}"></p>
</div>
```

**Q3：怎么选择#dates还是#calendars？**
```
建议：
- 后端传Date对象 → 用#dates
- 后端传Calendar对象 → 用#calendars
- 新项目建议后端直接格式化为字符串传递
```

### 10.6 最佳实践建议


> 💡 **新手建议**：  
> 1. 先从最常用的#strings和#numbers开始练习  
> 2. 日期处理建议后端格式化好再传给前端  
> 3. 复杂逻辑不要全在模板里处理，Controller分担一些  
> 4. 善用组合，但不要过度复杂化  

**核心记忆口诀**：
```
字符串用strings，数字用numbers
日期用dates，列表用lists
判空先检查，格式化后展示
工具类好帮手，模板更简洁
```