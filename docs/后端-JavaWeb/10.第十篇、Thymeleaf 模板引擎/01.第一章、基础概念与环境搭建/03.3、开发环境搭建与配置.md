---
title: 3ã€å¼€å‘ç¯å¢ƒæ­å»ºä¸é…ç½®
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦æ­å»ºç¯å¢ƒ](#1-ä¸ºä»€ä¹ˆéœ€è¦æ­å»ºç¯å¢ƒ)
2. [Spring Booté›†æˆæ–¹å¼](#2-Spring-Booté›†æˆæ–¹å¼)
3. [Mavené¡¹ç›®é…ç½®](#3-Mavené¡¹ç›®é…ç½®)
4. [Gradleé¡¹ç›®é…ç½®](#4-Gradleé¡¹ç›®é…ç½®)
5. [æ¨¡æ¿è·¯å¾„ä¸é…ç½®](#5-æ¨¡æ¿è·¯å¾„ä¸é…ç½®)
6. [è‡ªåŠ¨é…ç½®åŸç†è§£æ](#6-è‡ªåŠ¨é…ç½®åŸç†è§£æ)
7. [å¼€å‘æ•ˆç‡æå‡é…ç½®](#7-å¼€å‘æ•ˆç‡æå‡é…ç½®)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦æ­å»ºç¯å¢ƒ


### 1.1 å¼€å‘ç¯å¢ƒçš„ä½œç”¨


æƒ³è±¡ä¸€ä¸‹ï¼ŒThymeleafå°±åƒä¸€ä¸ª**é«˜çº§ç¿»è¯‘å®˜**ï¼Œå®ƒèƒ½æŠŠæˆ‘ä»¬å†™çš„æ¨¡æ¿è¯­è¨€ç¿»è¯‘æˆæµè§ˆå™¨èƒ½ç†è§£çš„HTMLã€‚ä½†è¿™ä½ç¿»è¯‘å®˜éœ€è¦ä¸€ä¸ª"å·¥ä½œç¯å¢ƒ"æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

**ğŸ  ç¯å¢ƒæ­å»ºå°±æ˜¯ç»™Thymeleafå‡†å¤‡ä¸€ä¸ªèˆ’é€‚çš„å·¥ä½œåœºæ‰€**

```
æ²¡æœ‰ç¯å¢ƒ âŒ                      æœ‰äº†ç¯å¢ƒ âœ…
ä½ å†™çš„æ¨¡æ¿                       ä½ å†™çš„æ¨¡æ¿
   â†“                               â†“
  ???                          Thymeleafå¼•æ“
   â†“                               â†“
æµè§ˆå™¨çœ‹ä¸æ‡‚                    æµè§ˆå™¨æ­£å¸¸æ˜¾ç¤º
```

### 1.2 éœ€è¦å‡†å¤‡ä»€ä¹ˆ


| å·¥å…·/æ¡†æ¶ | ä½œç”¨ | å¿…éœ€ç¨‹åº¦ |
|----------|------|---------|
| ğŸ”§ **JDK 8+** | Javaè¿è¡Œç¯å¢ƒ | `ğŸ”´ å¿…éœ€` |
| ğŸŒ± **Spring Boot** | å¿«é€Ÿå¼€å‘æ¡†æ¶ | `ğŸŸ¢ å¼ºçƒˆæ¨è` |
| ğŸ“¦ **Maven/Gradle** | é¡¹ç›®ç®¡ç†å·¥å…· | `ğŸŸ¡ äºŒé€‰ä¸€` |
| ğŸ’» **IDEå·¥å…·** | ä»£ç ç¼–è¾‘å™¨ | `ğŸŸ¢ æ¨èIDEA/Eclipse` |

> ğŸ’¡ **æ–°æ‰‹æç¤º**
> 
> å¦‚æœä½ å®Œå…¨æ²¡æ¥è§¦è¿‡è¿™äº›å·¥å…·ï¼Œå»ºè®®å…ˆèŠ±1-2å¤©äº†è§£Spring BootåŸºç¡€ã€‚Thymeleafçš„å­¦ä¹ ä¼šå»ºç«‹åœ¨Spring Bootä¹‹ä¸Šï¼Œè¿™æ ·å­¦ä¹ æ›²çº¿ä¼šæ›´å¹³ç¼“ã€‚

---

## 2. ğŸŒ± Spring Booté›†æˆæ–¹å¼


### 2.1 ä¸ºä»€ä¹ˆé€‰æ‹©Spring Boot


**ä¼ ç»Ÿæ–¹å¼ vs Spring Bootæ–¹å¼å¯¹æ¯”**

```
ä¼ ç»ŸSSMæ¡†æ¶é›†æˆ ğŸ˜°                 Spring Bootæ–¹å¼ ğŸ˜Š
â”œâ”€ ä¸‹è½½jaråŒ…                      â”œâ”€ æ·»åŠ ä¸€ä¸ªä¾èµ–
â”œâ”€ é…ç½®web.xml                    â”œâ”€ å†™å‡ è¡Œé…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€ é…ç½®Springé…ç½®æ–‡ä»¶              â””â”€ ç›´æ¥å¼€å§‹å†™ä»£ç  âœ…
â”œâ”€ é…ç½®ViewResolver
â”œâ”€ å¤„ç†ç¼–ç é—®é¢˜
â””â”€ è°ƒè¯•å„ç§bug...
```

> ğŸ”¥ **æ ¸å¿ƒç†è§£**
> 
> Spring Bootçš„è®¾è®¡å“²å­¦æ˜¯"**çº¦å®šä¼˜äºé…ç½®**"ã€‚å®ƒå·²ç»å¸®ä½ åšå¥½äº†90%çš„é…ç½®å·¥ä½œï¼Œä½ åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ã€‚

### 2.2 Spring Boot StarteråŸç†


**Starteræ˜¯ä»€ä¹ˆï¼Ÿ** 

æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª"**å…¨å®¶æ¡¶å¥—é¤**"ï¼š

```
ğŸ” Spring Boot Starter Thymeleaf
  â”‚
  â”œâ”€ğŸ“¦ thymeleaf-spring5.jar          (æ ¸å¿ƒå¼•æ“)
  â”œâ”€ğŸ“¦ thymeleaf.jar                  (Thymeleafæœ¬ä½“)
  â”œâ”€ğŸ“¦ thymeleaf-extras-java8time.jar (Java8æ—¶é—´æ”¯æŒ)
  â””â”€ğŸ“¦ å…¶ä»–å¿…éœ€ä¾èµ–...
  
  âœ… ä¸€æ¬¡å¼•å…¥ï¼Œå…¨éƒ¨æå®šï¼
```

**å·¥ä½œæµç¨‹å›¾ç¤º**

```
é¡¹ç›®å¯åŠ¨
   â†“
Spring Bootæ‰«æåˆ°Starterä¾èµ–
   â†“
è‡ªåŠ¨é…ç½®ThymeleafAutoConfiguration
   â†“
åˆ›å»ºæ¨¡æ¿å¼•æ“Bean
   â†“
é…ç½®è§†å›¾è§£æå™¨
   â†“
å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥ä½¿ç”¨ âœ…
```

---

## 3. ğŸ“¦ Mavené¡¹ç›®é…ç½®


### 3.1 åŸºç¡€ä¾èµ–é…ç½®


**æ­¥éª¤ä¸€ï¼šåˆ›å»ºSpring Booté¡¹ç›®**

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºï¼š
- ğŸŒ è®¿é—® https://start.spring.io/ ï¼ˆæ¨èæ–°æ‰‹ï¼‰
- ğŸ’» ä½¿ç”¨IDEAçš„Spring Initializr
- âŒ¨ï¸ ä½¿ç”¨Spring Boot CLI

**æ­¥éª¤äºŒï¼šæ·»åŠ Thymeleafä¾èµ–**

åœ¨`pom.xml`æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```xml
<!-- Spring Bootçˆ¶é¡¹ç›®ï¼Œç®¡ç†ç‰ˆæœ¬ -->
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.7.18</version>
</parent>

<dependencies>
    <!-- Thymeleafæ ¸å¿ƒä¾èµ– -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-thymeleaf</artifactId>
    </dependency>
    
    <!-- Webæ”¯æŒï¼ˆé€šå¸¸å·²åŒ…å«ï¼‰ -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
</dependencies>
```

> âš ï¸ **æ–°æ‰‹å¸¸è§ç–‘é—®**
> 
> **Qï¼šä¸ºä»€ä¹ˆçœ‹ä¸åˆ°ç‰ˆæœ¬å·ï¼Ÿ**  
> Aï¼šå› ä¸º`spring-boot-starter-parent`å·²ç»å®šä¹‰å¥½äº†æ‰€æœ‰ä¾èµ–çš„ç‰ˆæœ¬ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚

### 3.2 ä¾èµ–ç‰ˆæœ¬å¯¹åº”å…³ç³»


| Spring Bootç‰ˆæœ¬ | Thymeleafç‰ˆæœ¬ | Javaç‰ˆæœ¬ | æ¨èåœºæ™¯ |
|----------------|--------------|---------|---------|
| 2.7.x | 3.0.x | Java 8+ | `ğŸŸ¢ ç”Ÿäº§ç¯å¢ƒæ¨è` |
| 3.0.x | 3.1.x | Java 17+ | `ğŸ”µ æ–°é¡¹ç›®æ¨è` |
| 2.5.x | 3.0.x | Java 8+ | `ğŸŸ¡ ç»´æŠ¤è€é¡¹ç›®` |

**ç‰ˆæœ¬é€‰æ‹©å»ºè®®**

```
æ–°æ‰‹å­¦ä¹  â†’ Spring Boot 2.7.x âœ…
         (ç¨³å®šï¼Œæ•™ç¨‹å¤šï¼Œå…¼å®¹æ€§å¥½)

ä¼ä¸šæ–°é¡¹ç›® â†’ Spring Boot 3.0.x 
          (é•¿æœŸæ”¯æŒï¼Œæ€§èƒ½æ›´å¥½)

è€é¡¹ç›®ç»´æŠ¤ â†’ ä¿æŒåŸæœ‰ç‰ˆæœ¬
          (é¿å…ä¸å¿…è¦çš„å‡çº§é£é™©)
```

### 3.3 å®Œæ•´çš„pom.xmlç¤ºä¾‹


```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0">
    <modelVersion>4.0.0</modelVersion>
    
    <!-- é¡¹ç›®ä¿¡æ¯ -->
    <groupId>com.example</groupId>
    <artifactId>thymeleaf-demo</artifactId>
    <version>1.0.0</version>
    <name>Thymeleafå­¦ä¹ é¡¹ç›®</name>
    
    <!-- ç»§æ‰¿Spring Boot -->
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.7.18</version>
    </parent>
    
    <!-- é¡¹ç›®å±æ€§ -->
    <properties>
        <java.version>1.8</java.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    
    <!-- ä¾èµ–ç®¡ç† -->
    <dependencies>
        <!-- Thymeleaf -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>
        
        <!-- Web -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        
        <!-- å¼€å‘å·¥å…·ï¼ˆå¯é€‰ä½†æ¨èï¼‰ -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-devtools</artifactId>
            <scope>runtime</scope>
            <optional>true</optional>
        </dependency>
    </dependencies>
    
    <!-- æ„å»ºé…ç½® -->
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>
```

---

## 4. ğŸ˜ Gradleé¡¹ç›®é…ç½®


### 4.1 Gradle vs Mavenå¯¹æ¯”


```
ç‰¹æ€§å¯¹æ¯”
                Maven                 Gradle
æ„å»ºé€Ÿåº¦        â­â­â­                â­â­â­â­â­
çµæ´»æ€§          â­â­â­                â­â­â­â­â­  
å­¦ä¹ æ›²çº¿        â­â­â­â­              â­â­â­
ç”Ÿæ€æˆç†Ÿåº¦      â­â­â­â­â­            â­â­â­â­
ä¼ä¸šæ™®åŠåº¦      ğŸŸ¢ éå¸¸é«˜             ğŸ”µ é€æ¸å¢é•¿
```

> ğŸ’¡ **é€‰æ‹©å»ºè®®**
> 
> - **æ–°æ‰‹** â†’ å»ºè®®ç”¨Mavenï¼Œæ•™ç¨‹æ›´å¤š
> - **è¿½æ±‚æ€§èƒ½** â†’ é€‰æ‹©Gradleï¼Œæ„å»ºæ›´å¿«
> - **ä¼ä¸šé¡¹ç›®** â†’ çœ‹å›¢é˜Ÿä¹ æƒ¯å†³å®š

### 4.2 Gradleé…ç½®æ–‡ä»¶


**build.gradle (Groovyè¯­æ³•)**

```groovy
plugins {
    id 'org.springframework.boot' version '2.7.18'
    id 'io.spring.dependency-management' version '1.1.0'
    id 'java'
}

group = 'com.example'
version = '1.0.0'
sourceCompatibility = '1.8'

repositories {
    mavenCentral()
}

dependencies {
    // Thymeleafæ ¸å¿ƒ
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    
    // Webæ”¯æŒ
    implementation 'org.springframework.boot:spring-boot-starter-web'
    
    // å¼€å‘å·¥å…·
    developmentOnly 'org.springframework.boot:spring-boot-devtools'
}
```

**build.gradle.kts (Kotlin DSLè¯­æ³•)**

```kotlin
plugins {
    id("org.springframework.boot") version "2.7.18"
    id("io.spring.dependency-management") version "1.1.0"
    kotlin("jvm") version "1.8.0"
}

group = "com.example"
version = "1.0.0"

dependencies {
    implementation("org.springframework.boot:spring-boot-starter-thymeleaf")
    implementation("org.springframework.boot:spring-boot-starter-web")
    developmentOnly("org.springframework.boot:spring-boot-devtools")
}
```

---

## 5. ğŸ“‚ æ¨¡æ¿è·¯å¾„ä¸é…ç½®


### 5.1 é»˜è®¤çº¦å®šè§„åˆ™


Spring Bootä¸ºThymeleafè®¾å®šäº†ä¸€å¥—"**æ½œè§„åˆ™**"ï¼Œéµå¾ªè¿™äº›è§„åˆ™å¯ä»¥é›¶é…ç½®ä½¿ç”¨ï¼š

**ğŸ“ é»˜è®¤ç›®å½•ç»“æ„**

```
é¡¹ç›®æ ¹ç›®å½•
â””â”€â”€ src
    â””â”€â”€ main
        â”œâ”€â”€ java                          (Javaä»£ç )
        â”‚   â””â”€â”€ com.example.demo
        â”‚       â””â”€â”€ controller
        â”‚           â””â”€â”€ HomeController.java
        â””â”€â”€ resources
            â”œâ”€â”€ static                     (é™æ€èµ„æº)
            â”‚   â”œâ”€â”€ css
            â”‚   â”œâ”€â”€ js
            â”‚   â””â”€â”€ images
            â”œâ”€â”€ templates                  (ğŸ¯ Thymeleafæ¨¡æ¿)
            â”‚   â”œâ”€â”€ index.html
            â”‚   â”œâ”€â”€ user
            â”‚   â”‚   â”œâ”€â”€ list.html
            â”‚   â”‚   â””â”€â”€ detail.html
            â”‚   â””â”€â”€ error
            â”‚       â””â”€â”€ 404.html
            â””â”€â”€ application.properties     (é…ç½®æ–‡ä»¶)
```

**ğŸ“‹ é»˜è®¤é…ç½®è¯´æ˜**

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-------|--------|------|
| æ¨¡æ¿ä½ç½® | `classpath:/templates/` | æ¨¡æ¿æ–‡ä»¶å­˜æ”¾ç›®å½• |
| æ–‡ä»¶åç¼€ | `.html` | æ¨¡æ¿æ–‡ä»¶æ‰©å±•å |
| ç¼–ç æ ¼å¼ | `UTF-8` | æ–‡ä»¶å­—ç¬¦ç¼–ç  |
| æ¨¡æ¿æ¨¡å¼ | `HTML` | æ¨¡æ¿è§£ææ¨¡å¼ |
| ç¼“å­˜å¼€å…³ | `true`(ç”Ÿäº§) / `false`(å¼€å‘) | æ¨¡æ¿ç¼“å­˜ |

> ğŸ¯ **è·¯å¾„æ˜ å°„è§„åˆ™**
> 
> ```
> Controllerè¿”å› "user/list" 
>        â†“
> å®é™…æ–‡ä»¶è·¯å¾„: templates/user/list.html
> 
> Controllerè¿”å› "index"
>        â†“  
> å®é™…æ–‡ä»¶è·¯å¾„: templates/index.html
> ```

### 5.2 è‡ªå®šä¹‰é…ç½®æ–¹å¼


**æ–¹å¼ä¸€ï¼šapplication.propertiesé…ç½®**

```properties
# Thymeleafæ¨¡æ¿é…ç½®
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8

# å¼€å‘ç¯å¢ƒï¼šå…³é—­ç¼“å­˜ï¼Œå®æ—¶çœ‹åˆ°ä¿®æ”¹æ•ˆæœ
spring.thymeleaf.cache=false

# ç”Ÿäº§ç¯å¢ƒï¼šå¼€å¯ç¼“å­˜ï¼Œæå‡æ€§èƒ½
# spring.thymeleaf.cache=true
```

**æ–¹å¼äºŒï¼šapplication.ymlé…ç½®**

```yaml
spring:
  thymeleaf:
    prefix: classpath:/templates/     # æ¨¡æ¿è·¯å¾„
    suffix: .html                     # æ–‡ä»¶åç¼€
    mode: HTML                        # æ¨¡æ¿æ¨¡å¼
    encoding: UTF-8                   # ç¼–ç æ ¼å¼
    cache: false                      # ç¼“å­˜å¼€å…³
    servlet:
      content-type: text/html         # å“åº”ç±»å‹
```

**é…ç½®ä¼˜å…ˆçº§**

```
é«˜ä¼˜å…ˆçº§ â†‘
â”œâ”€ Javaé…ç½®ç±» (@Configuration)
â”œâ”€ application.yml / application.properties  
â””â”€ Spring Booté»˜è®¤é…ç½®
ä½ä¼˜å…ˆçº§ â†“
```

### 5.3 å¤šç¯å¢ƒé…ç½®å®æˆ˜


**åœºæ™¯ï¼š** å¼€å‘ç¯å¢ƒéœ€è¦çƒ­åŠ è½½ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ç¼“å­˜

```
é¡¹ç›®ç»“æ„
â””â”€â”€ src/main/resources
    â”œâ”€â”€ application.yml              (ä¸»é…ç½®)
    â”œâ”€â”€ application-dev.yml          (å¼€å‘ç¯å¢ƒ)
    â””â”€â”€ application-prod.yml         (ç”Ÿäº§ç¯å¢ƒ)
```

**application.yml (ä¸»é…ç½®)**
```yaml
spring:
  profiles:
    active: dev  # æ¿€æ´»å¼€å‘ç¯å¢ƒé…ç½®
```

**application-dev.yml (å¼€å‘é…ç½®)**
```yaml
spring:
  thymeleaf:
    cache: false       # å…³é—­ç¼“å­˜
    prefix: classpath:/templates/
    suffix: .html
```

**application-prod.yml (ç”Ÿäº§é…ç½®)**
```yaml
spring:
  thymeleaf:
    cache: true        # å¼€å¯ç¼“å­˜
    prefix: classpath:/templates/
    suffix: .html
```

**ç¯å¢ƒåˆ‡æ¢**

```bash
# å¼€å‘ç¯å¢ƒå¯åŠ¨
java -jar app.jar --spring.profiles.active=dev

# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨  
java -jar app.jar --spring.profiles.active=prod
```

---

## 6. ğŸ” è‡ªåŠ¨é…ç½®åŸç†è§£æ


### 6.1 Spring Bootè‡ªåŠ¨é…ç½®é­”æ³•


**è‡ªåŠ¨é…ç½®ä¸‰æ­¥æ›²**

```
ç¬¬1æ­¥ï¼šæ£€æµ‹ä¾èµ–
     â†“
æœ‰æ²¡æœ‰ spring-boot-starter-thymeleafï¼Ÿ
     â†“ æœ‰
     
ç¬¬2æ­¥ï¼šåŠ è½½é…ç½®ç±»
     â†“  
ThymeleafAutoConfiguration å¯åŠ¨
     â†“
     
ç¬¬3æ­¥ï¼šåˆ›å»ºBean
     â†“
â”œâ”€ SpringTemplateEngine (æ¨¡æ¿å¼•æ“)
â”œâ”€ ThymeleafViewResolver (è§†å›¾è§£æå™¨)  
â””â”€ TemplateResolver (æ¨¡æ¿è§£æå™¨)
```

### 6.2 æ ¸å¿ƒè‡ªåŠ¨é…ç½®ç±»


**ThymeleafAutoConfigurationæºç ç®€åŒ–ç‰ˆ**

```java
@Configuration
@ConditionalOnClass({TemplateMode.class, SpringTemplateEngine.class})
@EnableConfigurationProperties(ThymeleafProperties.class)
public class ThymeleafAutoConfiguration {
    
    // é…ç½®å±æ€§æ³¨å…¥
    @Autowired
    private ThymeleafProperties properties;
    
    // åˆ›å»ºæ¨¡æ¿å¼•æ“
    @Bean
    public SpringTemplateEngine templateEngine() {
        SpringTemplateEngine engine = new SpringTemplateEngine();
        engine.setTemplateResolver(templateResolver());
        return engine;
    }
    
    // åˆ›å»ºè§†å›¾è§£æå™¨
    @Bean
    public ThymeleafViewResolver viewResolver() {
        ThymeleafViewResolver resolver = new ThymeleafViewResolver();
        resolver.setTemplateEngine(templateEngine());
        resolver.setCharacterEncoding("UTF-8");
        return resolver;
    }
    
    // åˆ›å»ºæ¨¡æ¿è§£æå™¨
    private ITemplateResolver templateResolver() {
        SpringResourceTemplateResolver resolver = 
            new SpringResourceTemplateResolver();
        resolver.setPrefix(properties.getPrefix());  // "classpath:/templates/"
        resolver.setSuffix(properties.getSuffix());  // ".html"
        return resolver;
    }
}
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**
> 
> `@ConditionalOnClass` æ³¨è§£çš„ä½œç”¨ï¼š
> - åªæœ‰å½“classpathä¸­å­˜åœ¨`SpringTemplateEngine`ç±»æ—¶
> - è¿™ä¸ªé…ç½®ç±»æ‰ä¼šç”Ÿæ•ˆ
> - è¿™å°±æ˜¯"è‡ªåŠ¨é…ç½®"çš„ç§˜å¯†ï¼

### 6.3 é…ç½®ç”Ÿæ•ˆæµç¨‹å›¾


```
åº”ç”¨å¯åŠ¨
   â†“
Spring BootåŠ è½½æ‰€æœ‰AutoConfiguration
   â†“
æ£€æŸ¥æ¡ä»¶æ³¨è§£ @ConditionalOnClass
   â†“
classpathä¸­æœ‰Thymeleafï¼Ÿ
   â†“ YES
åˆ›å»ºThymeleafProperties Bean
   â†“
è¯»å–application.propertiesé…ç½®
   â†“
åˆ›å»ºTemplateEngine Bean  
   â†“
åˆ›å»ºViewResolver Bean
   â†“
æ³¨å†Œåˆ°Springå®¹å™¨
   â†“
é…ç½®å®Œæˆ âœ…
```

**ä½ å¯ä»¥éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ**

```java
@SpringBootApplication
public class Application implements CommandLineRunner {
    
    @Autowired
    private SpringTemplateEngine templateEngine;
    
    @Autowired  
    private ThymeleafViewResolver viewResolver;
    
    @Override
    public void run(String... args) {
        System.out.println("æ¨¡æ¿å¼•æ“: " + templateEngine.getClass().getName());
        System.out.println("è§†å›¾è§£æå™¨: " + viewResolver.getClass().getName());
        // è¾“å‡ºè¯æ˜é…ç½®æˆåŠŸ
    }
}
```

---

## 7. âš¡ å¼€å‘æ•ˆç‡æå‡é…ç½®


### 7.1 çƒ­éƒ¨ç½²é…ç½®ï¼ˆé‡è¦ï¼ï¼‰


**ä»€ä¹ˆæ˜¯çƒ­éƒ¨ç½²ï¼Ÿ**

```
æ²¡æœ‰çƒ­éƒ¨ç½² ğŸ˜°                    æœ‰äº†çƒ­éƒ¨ç½² ğŸ˜Š
ä¿®æ”¹ä»£ç                          ä¿®æ”¹ä»£ç 
   â†“                               â†“
æ‰‹åŠ¨åœæ­¢æœåŠ¡å™¨                    ä¿å­˜æ–‡ä»¶
   â†“                               â†“
é‡æ–°å¯åŠ¨                          è‡ªåŠ¨é‡å¯ï¼ˆ2-3ç§’ï¼‰
   â†“                               â†“
ç­‰å¾…30ç§’å¯åŠ¨                      ç«‹å³çœ‹åˆ°æ•ˆæœ âœ…
   â†“
åˆ·æ–°æµè§ˆå™¨çœ‹æ•ˆæœ
```

**é…ç½®æ­¥éª¤**

**æ­¥éª¤1ï¼šæ·»åŠ DevToolsä¾èµ–**

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <scope>runtime</scope>
    <optional>true</optional>
</dependency>
```

**æ­¥éª¤2ï¼šIDEAé…ç½®è‡ªåŠ¨ç¼–è¯‘**

```
File â†’ Settings â†’ Build, Execution, Deployment â†’ Compiler
  â”œâ”€ âœ… Build project automatically
  â””â”€ âœ… Compile independent modules in parallel
  
é«˜çº§è®¾ç½®ï¼ˆIDEA 2021.2+ï¼‰ï¼š
Advanced Settings â†’ Compiler
  â””â”€ âœ… Allow auto-make to start even if developed application is currently running
```

**æ­¥éª¤3ï¼šé…ç½®Thymeleafä¸ç¼“å­˜**

```properties
# å¼€å‘ç¯å¢ƒé…ç½®
spring.thymeleaf.cache=false
spring.devtools.restart.enabled=true
```

> ğŸ”¥ **æ•ˆç‡æå‡å¯¹æ¯”**
> 
> | æ“ä½œ | ä¼ ç»Ÿæ–¹å¼ | çƒ­éƒ¨ç½²æ–¹å¼ | æ•ˆç‡æå‡ |
> |------|---------|-----------|---------|
> | ä¿®æ”¹Javaä»£ç  | ~30ç§’ | ~3ç§’ | `10å€â¬†ï¸` |
> | ä¿®æ”¹HTMLæ¨¡æ¿ | ~30ç§’ | ~1ç§’ | `30å€â¬†ï¸` |
> | ä¿®æ”¹é…ç½®æ–‡ä»¶ | ~30ç§’ | ~3ç§’ | `10å€â¬†ï¸` |

### 7.2 æ¨¡æ¿ç¼“å­˜è¯¦è§£


**ç¼“å­˜æœºåˆ¶å·¥ä½œåŸç†**

```
ç¬¬ä¸€æ¬¡è¯·æ±‚ /user/list
   â†“
è§£æ user/list.html æ¨¡æ¿ (è€—æ—¶æ“ä½œ)
   â†“
å­˜å…¥ç¼“å­˜ (key: "user/list")
   â†“
è¿”å›æ¸²æŸ“ç»“æœ
   â†“
ç¬¬äºŒæ¬¡è¯·æ±‚ /user/list  
   â†“
ç›´æ¥ä»ç¼“å­˜è·å– (æ¯«ç§’çº§) âœ…
   â†“
è¿”å›ç»“æœ
```

**ç¼“å­˜é…ç½®ç­–ç•¥**

| ç¯å¢ƒ | cacheè®¾ç½® | åŸå›  | å½±å“ |
|------|----------|------|------|
| ğŸ”§ å¼€å‘ç¯å¢ƒ | `false` | éœ€è¦å®æ—¶çœ‹åˆ°ä¿®æ”¹ | æ€§èƒ½ç•¥é™ï¼Œä½“éªŒå¥½ |
| ğŸš€ ç”Ÿäº§ç¯å¢ƒ | `true` | è¿½æ±‚æ€§èƒ½ | æ€§èƒ½æœ€ä¼˜ |
| ğŸ§ª æµ‹è¯•ç¯å¢ƒ | `false` | æ–¹ä¾¿è°ƒè¯• | ä¾¿äºé—®é¢˜å®šä½ |

**æ¸…é™¤ç¼“å­˜æ–¹å¼**

```java
@RestController
public class CacheController {
    
    @Autowired
    private SpringTemplateEngine templateEngine;
    
    // æ‰‹åŠ¨æ¸…é™¤æ‰€æœ‰æ¨¡æ¿ç¼“å­˜
    @GetMapping("/admin/clearCache")
    public String clearCache() {
        templateEngine.clearTemplateCache();
        return "ç¼“å­˜å·²æ¸…é™¤";
    }
}
```

### 7.3 å­—ç¬¦ç¼–ç è®¾ç½®


**ä¸ºä»€ä¹ˆè¦é…ç½®ç¼–ç ï¼Ÿ**

```
âŒ æ²¡é…ç½®ç¼–ç                   âœ… é…ç½®äº†UTF-8
ä½ å¥½ä¸–ç•Œ                      ä½ å¥½ä¸–ç•Œ  
   â†“                            â†“
æµè§ˆå™¨æ˜¾ç¤ºï¼š                   æµè§ˆå™¨æ˜¾ç¤ºï¼š
æµ£çŠ²ã‚½æ¶“æ «æ™« (ä¹±ç )            ä½ å¥½ä¸–ç•Œ (æ­£å¸¸)
```

**å®Œæ•´ç¼–ç é…ç½®**

```properties
# 1. é¡¹ç›®ç¼–ç 
project.build.sourceEncoding=UTF-8
project.reporting.outputEncoding=UTF-8

# 2. Thymeleafç¼–ç 
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.servlet.content-type=text/html;charset=UTF-8

# 3. HTTPç¼–ç   
spring.http.encoding.enabled=true
spring.http.encoding.charset=UTF-8
spring.http.encoding.force=true

# 4. æ¶ˆæ¯ç¼–ç 
spring.messages.encoding=UTF-8
```

**IDEAç¼–ç è®¾ç½®**

```
File â†’ Settings â†’ Editor â†’ File Encodings
  â”œâ”€ Global Encoding: UTF-8
  â”œâ”€ Project Encoding: UTF-8  
  â””â”€ Default encoding for properties files: UTF-8
      â””â”€ âœ… Transparent native-to-ascii conversion
```

### 7.4 æ¨¡æ¿æ–‡ä»¶ç›‘å¬é…ç½®


**å®ç°æ¨¡æ¿ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ**

```properties
# ç›‘å¬æ¨¡æ¿å˜åŒ–
spring.thymeleaf.cache=false
spring.devtools.restart.enabled=true

# æ’é™¤é™æ€èµ„æºé‡å¯
spring.devtools.restart.exclude=static/**,public/**

# ç›‘å¬é¢å¤–è·¯å¾„
spring.devtools.restart.additional-paths=src/main/resources/templates
```

**æ•ˆæœæ¼”ç¤º**

```
ä¿®æ”¹ templates/index.html
   â†“
ä¿å­˜æ–‡ä»¶ (Ctrl+S)
   â†“
DevToolsæ£€æµ‹åˆ°å˜åŒ–
   â†“
è§¦å‘åº”ç”¨é‡å¯ (2-3ç§’)
   â†“
åˆ·æ–°æµè§ˆå™¨
   â†“  
çœ‹åˆ°æœ€æ–°æ•ˆæœ âœ…
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„é…ç½®


**ğŸ¯ æ–°æ‰‹å¿…å¤‡æ¸…å•**

- [x] **æ·»åŠ ä¾èµ–** - spring-boot-starter-thymeleaf
- [x] **æ¨¡æ¿è·¯å¾„** - templatesç›®å½•ä¸‹åˆ›å»º.htmlæ–‡ä»¶
- [x] **å…³é—­ç¼“å­˜** - å¼€å‘æ—¶è®¾ç½®cache=false  
- [x] **çƒ­éƒ¨ç½²** - æ·»åŠ devtoolsæå‡æ•ˆç‡
- [x] **UTF-8ç¼–ç ** - é¿å…ä¸­æ–‡ä¹±ç 

### 8.2 é…ç½®æ–‡ä»¶é€ŸæŸ¥


**âš¡ å¼€å‘ç¯å¢ƒæ¨èé…ç½®**

```properties
# Thymeleafé…ç½®
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false

# çƒ­éƒ¨ç½²é…ç½®
spring.devtools.restart.enabled=true
spring.devtools.restart.additional-paths=src/main/resources/templates

# ç¼–ç é…ç½®
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
```

### 8.3 å¸¸è§é—®é¢˜é€ŸæŸ¥è¡¨


| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| ğŸ”´ æ¨¡æ¿æ‰¾ä¸åˆ° | è·¯å¾„é”™è¯¯ | æ£€æŸ¥templatesç›®å½•å’Œæ–‡ä»¶å |
| ğŸ”´ ä¸­æ–‡ä¹±ç  | ç¼–ç é—®é¢˜ | è®¾ç½®UTF-8ç¼–ç  |
| ğŸ”´ ä¿®æ”¹ä¸ç”Ÿæ•ˆ | ç¼“å­˜æœªå…³é—­ | è®¾ç½®cache=false |
| ğŸ”´ çƒ­éƒ¨ç½²ä¸å·¥ä½œ | DevToolsæœªé…ç½® | æ£€æŸ¥ä¾èµ–å’ŒIDEAè®¾ç½® |

### 8.4 ä¸‹ä¸€æ­¥å­¦ä¹ è·¯å¾„


```
ç¯å¢ƒæ­å»ºå®Œæˆ âœ…
   â†“
åŸºç¡€è¯­æ³•å­¦ä¹ 
   â”œâ”€ è¡¨è¾¾å¼è¯­æ³•
   â”œâ”€ æ ‡å‡†æ–¹è¨€  
   â””â”€ å¸¸ç”¨æ ‡ç­¾
   â†“
è¿›é˜¶ç‰¹æ€§
   â”œâ”€ å¸ƒå±€ç®¡ç†
   â”œâ”€ å›½é™…åŒ–
   â””â”€ è¡¨å•å¤„ç†
   â†“
å®æˆ˜é¡¹ç›®
   â””â”€ å®Œæ•´Webåº”ç”¨å¼€å‘
```

> ğŸ¯ **å­¦ä¹ å»ºè®®**
> 
> 1. **å…ˆè·‘èµ·æ¥** - æŒ‰ç…§æœ¬æ–‡é…ç½®ï¼Œå…ˆè®©é¡¹ç›®è¿è¡Œèµ·æ¥
> 2. **åŠ¨æ‰‹å®è·µ** - æ¯ä¸ªé…ç½®éƒ½äº²è‡ªè¯•ä¸€é  
> 3. **é‡åˆ°é—®é¢˜** - æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œ99%çš„é—®é¢˜éƒ½æœ‰æç¤º
> 4. **å¾ªåºæ¸è¿›** - ä¸è¦æ€¥äºæ±‚æˆï¼Œä¸€æ­¥æ­¥æ¥

---

**æ ¸å¿ƒè®°å¿†å£è¯€** ğŸµ

```
Spring Booté›†æˆçœŸç®€å•ï¼Œ
ä¸€ä¸ªä¾èµ–å…¨æå®šã€‚
Templatesç›®å½•æ”¾æ¨¡æ¿ï¼Œ
å…³é—­ç¼“å­˜å¥½è°ƒè¯•ã€‚
DevToolsçƒ­éƒ¨ç½²ï¼Œ
UTF-8é˜²ä¹±ç ã€‚
é…ç½®è™½å¤šä¸ç”¨æ€•ï¼Œ
é»˜è®¤çº¦å®šæœ€çœäº‹ï¼
```