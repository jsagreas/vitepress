---
title: 2、企业级应用开发实战
---
## 📚 目录

1. [后台管理系统开发](#1-后台管理系统开发)
2. [电商平台开发](#2-电商平台开发)
3. [内容管理系统](#3-内容管理系统)
4. [工作流系统](#4-工作流系统)
5. [报表系统开发](#5-报表系统开发)
6. [多租户系统](#6-多租户系统)
7. [微服务架构集成](#7-微服务架构集成)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎛️ 后台管理系统开发


### 1.1 什么是后台管理系统


> 💡 **通俗理解**  
> 后台管理系统就像是网站的"控制室"，管理员在这里管理用户、查看数据、修改设置等。就像商场的经理办公室，可以看到销售数据、管理员工、调整商品价格。

**核心特点**：
- 🔐 **权限控制严格**：不同角色看到不同内容
- 📊 **数据展示丰富**：表格、图表、统计数据
- 🔄 **操作频繁**：增删改查是主要功能
- 📱 **响应式布局**：支持电脑、平板访问

### 1.2 通用后台页面结构


**经典布局**：
```
┌─────────────────────────────────────┐
│  顶部导航栏（Logo、用户信息、退出）    │
├──────┬──────────────────────────────┤
│      │                              │
│ 侧边 │       主内容区域              │
│ 菜单 │   （表格、表单、图表等）        │
│      │                              │
│      │                              │
└──────┴──────────────────────────────┘
```

**Thymeleaf实现思路**：
```html
<!-- layout.html - 主布局模板 -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${pageTitle}">后台管理</title>
</head>
<body>
    <!-- 顶部导航 -->
    <div th:replace="~{fragments/header :: header}"></div>
    
    <div class="main-container">
        <!-- 侧边菜单 -->
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>
        
        <!-- 主内容区 -->
        <main th:insert="~{${contentPage}}"></main>
    </div>
</body>
</html>
```

> 📖 **术语解释**  
> - `th:replace`：完全替换当前标签
> - `th:insert`：在标签内部插入内容
> - `fragments`：页面片段，可复用的小模块

### 1.3 用户权限控制实战


**实际场景**：
```
管理员(ADMIN)：可以看到所有菜单
普通用户(USER)：只能看到部分菜单
访客(GUEST)：只能看到公开内容
```

**Thymeleaf实现**：
```html
<!-- sidebar.html - 侧边菜单 -->
<nav class="sidebar">
    <ul>
        <!-- 所有人都能看到 -->
        <li><a th:href="@{/dashboard}">首页</a></li>
        
        <!-- 只有管理员能看到 -->
        <li th:if="${#authorization.hasRole('ADMIN')}">
            <a th:href="@{/admin/users}">用户管理</a>
        </li>
        
        <!-- 管理员和普通用户都能看到 -->
        <li th:if="${#authorization.hasAnyRole('ADMIN','USER')}">
            <a th:href="@{/profile}">个人中心</a>
        </li>
    </ul>
</nav>
```

> ⚠️ **重要提示**  
> 前端控制只是隐藏菜单，后端必须再次验证权限，防止用户直接访问URL

### 1.4 数据表格展示


**常见需求**：
- 分页显示数据
- 搜索过滤
- 排序功能
- 批量操作

```html
<!-- user-list.html - 用户列表 -->
<div class="table-container">
    <!-- 搜索框 -->
    <form th:action="@{/admin/users}" method="get">
        <input type="text" name="keyword" th:value="${keyword}" 
               placeholder="搜索用户名或邮箱">
        <button type="submit">搜索</button>
    </form>
    
    <!-- 数据表格 -->
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>用户名</th>
                <th>邮箱</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="user : ${userList}">
                <td th:text="${user.id}">1</td>
                <td th:text="${user.username}">张三</td>
                <td th:text="${user.email}">zhang@example.com</td>
                <td>
                    <span th:text="${user.active ? '正常' : '禁用'}"
                          th:class="${user.active ? 'badge-success' : 'badge-danger'}">
                        正常
                    </span>
                </td>
                <td>
                    <a th:href="@{/admin/users/edit/{id}(id=${user.id})}">编辑</a>
                    <a th:href="@{/admin/users/delete/{id}(id=${user.id})}"
                       onclick="return confirm('确认删除？')">删除</a>
                </td>
            </tr>
        </tbody>
    </table>
    
    <!-- 分页 -->
    <div th:replace="~{fragments/pagination :: pagination}"></div>
</div>
```

> 🔍 **知识点解析**  
> - `th:each`：循环遍历列表，类似Java的for循环
> - `th:class`：动态设置CSS类，根据条件显示不同样式
> - `@{}`：URL表达式，自动处理上下文路径

---

## 2. 🛒 电商平台开发


### 2.1 电商系统核心页面


**主要页面类型**：
```
前台系统：
├── 商品列表页（展示商品）
├── 商品详情页（查看详情、加购物车）
├── 购物车页面（管理购物车）
└── 订单页面（下单、支付）

后台系统：
├── 商品管理（上架、下架、编辑）
├── 订单管理（查看、发货、退款）
└── 库存管理（进货、出货）
```

### 2.2 商品列表页开发


**业务需求**：
- 商品分类筛选
- 价格区间筛选
- 排序（价格、销量、评价）
- 商品卡片展示

```html
<!-- product-list.html -->
<div class="product-list">
    <!-- 筛选条件 -->
    <div class="filter-bar">
        <form th:action="@{/products}" method="get">
            <!-- 分类选择 -->
            <select name="category">
                <option value="">全部分类</option>
                <option th:each="cat : ${categories}" 
                        th:value="${cat.id}"
                        th:text="${cat.name}"
                        th:selected="${category == cat.id}">
                    电子产品
                </option>
            </select>
            
            <!-- 价格区间 -->
            <input type="number" name="minPrice" th:value="${minPrice}" 
                   placeholder="最低价">
            <input type="number" name="maxPrice" th:value="${maxPrice}" 
                   placeholder="最高价">
            
            <!-- 排序方式 -->
            <select name="sort">
                <option value="default">默认排序</option>
                <option value="price_asc" th:selected="${sort == 'price_asc'}">
                    价格从低到高
                </option>
                <option value="sales_desc" th:selected="${sort == 'sales_desc'}">
                    销量从高到低
                </option>
            </select>
            
            <button type="submit">筛选</button>
        </form>
    </div>
    
    <!-- 商品网格 -->
    <div class="product-grid">
        <div class="product-card" th:each="product : ${products}">
            <!-- 商品图片 -->
            <img th:src="@{${product.imageUrl}}" 
                 th:alt="${product.name}">
            
            <!-- 商品信息 -->
            <h3 th:text="${product.name}">商品名称</h3>
            <p class="price">
                <span th:text="'¥' + ${#numbers.formatDecimal(product.price, 1, 2)}">
                    ¥99.99
                </span>
            </p>
            
            <!-- 销量和评价 -->
            <div class="meta">
                <span th:text="'销量: ' + ${product.sales}">销量: 1000</span>
                <span th:text="'评分: ' + ${product.rating}">评分: 4.5</span>
            </div>
            
            <!-- 操作按钮 -->
            <a th:href="@{/products/{id}(id=${product.id})}" 
               class="btn-detail">查看详情</a>
        </div>
    </div>
</div>
```

> 📖 **术语解释**  
> - `#numbers.formatDecimal`：格式化数字，保留小数位
> - `th:selected`：设置选中状态
> - `th:alt`：设置图片的替代文字

### 2.3 购物车功能实现


**购物车特点**：
- 显示商品列表
- 数量增减
- 实时计算总价
- 删除商品

```html
<!-- cart.html -->
<div class="cart-container">
    <h2>购物车 (<span th:text="${#lists.size(cartItems)}">0</span>件商品)</h2>
    
    <div th:if="${#lists.isEmpty(cartItems)}" class="empty-cart">
        <p>购物车是空的，快去选购商品吧！</p>
        <a th:href="@{/products}" class="btn">去购物</a>
    </div>
    
    <div th:unless="${#lists.isEmpty(cartItems)}">
        <table class="cart-table">
            <thead>
                <tr>
                    <th>商品</th>
                    <th>单价</th>
                    <th>数量</th>
                    <th>小计</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item : ${cartItems}">
                    <td>
                        <img th:src="@{${item.product.thumbnail}}" class="thumb">
                        <span th:text="${item.product.name}">商品名</span>
                    </td>
                    <td th:text="'¥' + ${item.product.price}">¥99</td>
                    <td>
                        <input type="number" th:value="${item.quantity}" 
                               min="1" th:max="${item.product.stock}">
                    </td>
                    <td class="subtotal" 
                        th:text="'¥' + ${item.product.price * item.quantity}">
                        ¥198
                    </td>
                    <td>
                        <a th:href="@{/cart/remove/{id}(id=${item.id})}">删除</a>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <!-- 总价 -->
        <div class="cart-summary">
            <p>商品总价：
                <span th:text="'¥' + ${totalPrice}">¥0</span>
            </p>
            <a th:href="@{/checkout}" class="btn-checkout">去结算</a>
        </div>
    </div>
</div>
```

> 💡 **实用技巧**  
> - `#lists.size()`：获取列表大小
> - `#lists.isEmpty()`：判断列表是否为空
> - `th:unless`：相当于`th:if`的反向条件

---

## 3. 📝 内容管理系统（CMS）


### 3.1 CMS系统是什么


> 💡 **通俗理解**  
> CMS就像一个"文章发布平台"，作者可以写文章、上传图片，管理员可以审核发布。就像微信公众号的后台编辑器。

**典型功能**：
- 📄 文章管理（写作、编辑、发布）
- 🏷️ 分类标签管理
- 👥 作者权限控制
- 💬 评论审核

### 3.2 富文本编辑器集成


**编辑器选择**：
```
常用富文本编辑器：
- TinyMCE（功能强大）
- CKEditor（界面友好）
- Quill（轻量简洁）
- Markdown编辑器（程序员友好）
```

**Thymeleaf集成示例**：
```html
<!-- article-edit.html -->
<div class="editor-container">
    <form th:action="@{/articles/save}" th:object="${article}" method="post">
        <!-- 文章标题 -->
        <input type="text" th:field="*{title}" 
               placeholder="请输入文章标题" required>
        
        <!-- 分类选择 -->
        <select th:field="*{categoryId}">
            <option value="">选择分类</option>
            <option th:each="cat : ${categories}" 
                    th:value="${cat.id}" 
                    th:text="${cat.name}">
                技术文章
            </option>
        </select>
        
        <!-- 标签输入 -->
        <input type="text" th:field="*{tags}" 
               placeholder="标签用逗号分隔">
        
        <!-- 富文本编辑器 -->
        <textarea th:field="*{content}" id="editor"></textarea>
        
        <!-- 发布选项 -->
        <div class="publish-options">
            <label>
                <input type="radio" th:field="*{status}" value="draft">
                保存草稿
            </label>
            <label>
                <input type="radio" th:field="*{status}" value="published">
                立即发布
            </label>
        </div>
        
        <button type="submit">提交</button>
    </form>
</div>

<script th:inline="javascript">
    // 初始化编辑器
    var content = /*[[${article.content}]]*/ '';
    initEditor('editor', content);
</script>
```

> 📖 **术语解释**  
> - `th:field`：自动绑定表单字段到对象属性
> - `*{}`：选择表达式，从`th:object`指定的对象中取值
> - `th:inline="javascript"`：在JS中使用Thymeleaf表达式

### 3.3 文章列表与搜索


**功能需求**：
- 多条件搜索
- 状态筛选
- 作者筛选
- 日期范围

```html
<!-- article-list.html -->
<div class="article-management">
    <!-- 搜索面板 -->
    <div class="search-panel">
        <form th:action="@{/articles}" method="get">
            <input type="text" name="keyword" th:value="${keyword}" 
                   placeholder="搜索标题或内容">
            
            <select name="status">
                <option value="">全部状态</option>
                <option value="draft" th:selected="${status == 'draft'}">
                    草稿
                </option>
                <option value="published" th:selected="${status == 'published'}">
                    已发布
                </option>
            </select>
            
            <select name="authorId">
                <option value="">全部作者</option>
                <option th:each="author : ${authors}" 
                        th:value="${author.id}"
                        th:text="${author.name}"
                        th:selected="${authorId == author.id}">
                </option>
            </select>
            
            <button type="submit">搜索</button>
        </form>
    </div>
    
    <!-- 文章列表 -->
    <table class="article-table">
        <thead>
            <tr>
                <th>标题</th>
                <th>作者</th>
                <th>分类</th>
                <th>状态</th>
                <th>发布时间</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="article : ${articles}">
                <td>
                    <a th:href="@{/articles/{id}(id=${article.id})}" 
                       th:text="${article.title}">
                        文章标题
                    </a>
                </td>
                <td th:text="${article.author.name}">作者</td>
                <td th:text="${article.category.name}">分类</td>
                <td>
                    <span th:text="${article.status == 'published' ? '已发布' : '草稿'}"
                          th:class="${article.status == 'published' ? 'status-published' : 'status-draft'}">
                    </span>
                </td>
                <td th:text="${#dates.format(article.publishTime, 'yyyy-MM-dd')}">
                    2025-01-01
                </td>
                <td>
                    <a th:href="@{/articles/edit/{id}(id=${article.id})}">编辑</a>
                    <a th:if="${article.status == 'draft'}"
                       th:href="@{/articles/publish/{id}(id=${article.id})}">
                        发布
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
</div>
```

> 🔍 **知识点解析**  
> - `#dates.format()`：格式化日期
> - 三元表达式：`条件 ? 值1 : 值2`
> - 嵌套对象访问：`article.author.name`

---

## 4. 🔄 工作流系统


### 4.1 工作流概念理解


> 💡 **通俗理解**  
> 工作流就像"请假流程"：员工申请 → 部门主管审批 → 人事审批 → 完成。每个步骤都有固定的处理人和规则。

**工作流核心要素**：
```
流程定义：
├── 发起人（谁可以发起）
├── 审批节点（谁来审批）
├── 流转条件（什么情况下流转）
└── 完结条件（什么时候结束）
```

### 4.2 请假流程实现


**流程状态**：
| 状态 | 说明 | 可执行操作 |
|------|------|-----------|
| `DRAFT` | 草稿 | 编辑、提交 |
| `PENDING` | 待审批 | 审批、驳回 |
| `APPROVED` | 已通过 | 查看 |
| `REJECTED` | 已驳回 | 重新编辑 |

```html
<!-- leave-form.html - 请假申请 -->
<div class="leave-form">
    <form th:action="@{/leave/submit}" th:object="${leaveRequest}" method="post">
        <h3>请假申请</h3>
        
        <!-- 请假类型 -->
        <select th:field="*{leaveType}">
            <option value="sick">病假</option>
            <option value="personal">事假</option>
            <option value="annual">年假</option>
        </select>
        
        <!-- 请假时间 -->
        <input type="date" th:field="*{startDate}" required>
        <input type="date" th:field="*{endDate}" required>
        
        <!-- 请假天数（自动计算） -->
        <p>请假天数: <span th:text="${days}">0</span> 天</p>
        
        <!-- 请假原因 -->
        <textarea th:field="*{reason}" placeholder="请输入请假原因" required></textarea>
        
        <!-- 提交按钮 -->
        <button type="submit">提交申请</button>
    </form>
</div>
```

### 4.3 审批流程展示


```html
<!-- leave-detail.html - 查看请假详情 -->
<div class="leave-detail">
    <div class="info-section">
        <h3>请假信息</h3>
        <p>申请人: <span th:text="${leave.applicant.name}">张三</span></p>
        <p>请假类型: <span th:text="${leave.leaveTypeName}">病假</span></p>
        <p>请假时间: 
            <span th:text="${#dates.format(leave.startDate, 'yyyy-MM-dd')}"></span>
            至
            <span th:text="${#dates.format(leave.endDate, 'yyyy-MM-dd')}"></span>
        </p>
        <p>请假原因: <span th:text="${leave.reason}">身体不适</span></p>
    </div>
    
    <!-- 审批流程 -->
    <div class="approval-process">
        <h3>审批流程</h3>
        <div class="timeline">
            <div class="step" th:each="step, stat : ${approvalSteps}"
                 th:classappend="${step.status == 'approved' ? 'completed' : 
                                 (step.status == 'pending' ? 'current' : '')}">
                
                <div class="step-number" th:text="${stat.count}">1</div>
                <div class="step-content">
                    <p class="step-title" th:text="${step.approverName}">审批人</p>
                    <p class="step-status">
                        <span th:if="${step.status == 'approved'}" class="success">
                            ✓ 已通过
                        </span>
                        <span th:if="${step.status == 'pending'}" class="warning">
                            ⏳ 待审批
                        </span>
                        <span th:if="${step.status == 'rejected'}" class="danger">
                            ✗ 已驳回
                        </span>
                    </p>
                    <p th:if="${step.comment}" class="comment">
                        意见: <span th:text="${step.comment}">同意</span>
                    </p>
                    <p th:if="${step.approveTime}" class="time">
                        <span th:text="${#dates.format(step.approveTime, 'yyyy-MM-dd HH:mm')}"></span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 审批操作（只有当前审批人能看到） -->
    <div th:if="${canApprove}" class="approval-actions">
        <form th:action="@{/leave/approve/{id}(id=${leave.id})}" method="post">
            <textarea name="comment" placeholder="审批意见（可选）"></textarea>
            <button type="submit" name="action" value="approve" class="btn-success">
                通过
            </button>
            <button type="submit" name="action" value="reject" class="btn-danger">
                驳回
            </button>
        </form>
    </div>
</div>
```

> 📖 **术语解释**  
> - `stat`：迭代状态对象，包含`count`（序号）、`index`等
> - `th:classappend`：追加CSS类，不覆盖原有类
> - 三元嵌套：实现多条件判断

---

## 5. 📊 报表系统开发


### 5.1 报表系统是什么


> 💡 **通俗理解**  
> 报表就是把数据用图表、表格展示出来，帮助管理者看清业务情况。就像学校的成绩单，一目了然地看到各科分数。

**报表类型**：
```
常见报表：
├── 数据报表（表格形式）
├── 统计图表（柱状图、饼图、折线图）
├── 实时看板（大屏展示）
└── 导出报表（PDF、Excel）
```

### 5.2 销售报表实现


```html
<!-- sales-report.html -->
<div class="report-container">
    <h2>销售报表</h2>
    
    <!-- 筛选条件 -->
    <form th:action="@{/reports/sales}" method="get" class="filter-form">
        <select name="period">
            <option value="today" th:selected="${period == 'today'}">今日</option>
            <option value="week" th:selected="${period == 'week'}">本周</option>
            <option value="month" th:selected="${period == 'month'}">本月</option>
            <option value="custom" th:selected="${period == 'custom'}">自定义</option>
        </select>
        
        <input type="date" name="startDate" th:value="${startDate}">
        <input type="date" name="endDate" th:value="${endDate}">
        
        <button type="submit">查询</button>
        <a th:href="@{/reports/sales/export(period=${period})}" class="btn-export">
            导出Excel
        </a>
    </form>
    
    <!-- 汇总数据 -->
    <div class="summary-cards">
        <div class="card">
            <h4>总销售额</h4>
            <p class="amount" th:text="'¥' + ${#numbers.formatDecimal(totalAmount, 1, 2)}">
                ¥0.00
            </p>
        </div>
        <div class="card">
            <h4>订单数量</h4>
            <p class="count" th:text="${orderCount}">0</p>
        </div>
        <div class="card">
            <h4>客单价</h4>
            <p class="avg" th:text="'¥' + ${#numbers.formatDecimal(avgAmount, 1, 2)}">
                ¥0.00
            </p>
        </div>
    </div>
    
    <!-- 销售趋势图 -->
    <div class="chart-section">
        <h3>销售趋势</h3>
        <canvas id="salesChart"></canvas>
    </div>
    
    <!-- 明细表格 -->
    <div class="detail-table">
        <h3>销售明细</h3>
        <table>
            <thead>
                <tr>
                    <th>日期</th>
                    <th>订单数</th>
                    <th>销售额</th>
                    <th>环比增长</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item : ${salesData}">
                    <td th:text="${#dates.format(item.date, 'MM-dd')}">01-01</td>
                    <td th:text="${item.orderCount}">10</td>
                    <td th:text="'¥' + ${item.amount}">¥1000</td>
                    <td>
                        <span th:text="${item.growth + '%'}"
                              th:class="${item.growth >= 0 ? 'growth-up' : 'growth-down'}">
                            +5%
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 图表数据传递 -->
<script th:inline="javascript">
    var chartData = {
        labels: /*[[${chartLabels}]]*/ [],
        data: /*[[${chartData}]]*/ []
    };
    renderChart('salesChart', chartData);
</script>
```

> 🔍 **知识点解析**  
> - 汇总卡片：用小卡片展示关键指标
> - 趋势图：使用Chart.js等库绘制
> - 环比增长：用颜色区分正负增长

### 5.3 导出Excel功能


**Controller层处理**：
```java
@GetMapping("/reports/sales/export")
public void exportSalesReport(HttpServletResponse response) {
    // 设置响应头
    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition", 
        "attachment; filename=sales-report.xlsx");
    
    // 生成Excel（使用POI或EasyExcel）
    // ...
}
```

**Thymeleaf模板支持**：
```html
<!-- 导出按钮提示 -->
<div class="export-section">
    <a th:href="@{/reports/sales/export(
                    period=${period},
                    startDate=${startDate},
                    endDate=${endDate}
                )}" 
       class="btn-export"
       download>
        <i class="icon-download"></i>
        导出Excel报表
    </a>
    
    <p class="tip">支持导出当前筛选条件下的所有数据</p>
</div>
```

---

## 6. 🏢 多租户系统


### 6.1 多租户概念理解


> 💡 **通俗理解**  
> 多租户就像一栋写字楼，多家公司共用一栋楼，但各自的办公区域是独立的，互不干扰。每个公司（租户）有自己的数据和配置。

**多租户特点**：
```
数据隔离：
├── 租户A只能看到自己的数据
├── 租户B只能看到自己的数据
└── 租户间完全隔离

个性化配置：
├── 不同Logo和品牌
├── 不同功能模块
└── 不同权限设置
```

### 6.2 租户切换实现


**实现方式**：
```
方式一：子域名
- tenant-a.example.com
- tenant-b.example.com

方式二：路径
- example.com/tenant-a/...
- example.com/tenant-b/...

方式三：参数
- example.com?tenant=a
```

```html
<!-- 租户选择器 -->
<div class="tenant-selector" th:if="${#lists.size(userTenants) > 1}">
    <select id="tenantSelect" onchange="switchTenant(this.value)">
        <option th:each="tenant : ${userTenants}"
                th:value="${tenant.id}"
                th:text="${tenant.name}"
                th:selected="${tenant.id == currentTenant.id}">
            租户A
        </option>
    </select>
</div>

<script th:inline="javascript">
    function switchTenant(tenantId) {
        var currentUrl = window.location.pathname;
        window.location.href = /*[[@{/switch-tenant}]]*/ + 
                               '?tenantId=' + tenantId + 
                               '&returnUrl=' + encodeURIComponent(currentUrl);
    }
</script>
```

### 6.3 租户个性化配置


```html
<!-- layout.html - 租户定制化布局 -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- 租户定制标题 -->
    <title th:text="${tenant.name + ' - ' + pageTitle}">系统</title>
    
    <!-- 租户定制Logo -->
    <link rel="icon" th:href="@{${tenant.favicon}}">
    
    <!-- 租户定制主题色 -->
    <style th:inline="text">
        :root {
            --primary-color: [[${tenant.primaryColor}]];
            --secondary-color: [[${tenant.secondaryColor}]];
        }
    </style>
</head>
<body>
    <header>
        <!-- 租户Logo -->
        <img th:src="@{${tenant.logoUrl}}" 
             th:alt="${tenant.name}" 
             class="tenant-logo">
        
        <!-- 租户名称 -->
        <h1 th:text="${tenant.name}">租户名称</h1>
    </header>
    
    <main>
        <div th:insert="~{${contentPage}}"></div>
    </main>
    
    <footer>
        <p th:text="${tenant.copyrightText}">版权信息</p>
    </footer>
</body>
</html>
```

> 📖 **术语解释**  
> - `:root`：CSS根元素，定义全局变量
> - `--primary-color`：CSS变量，可在整个页面复用
> - `th:inline="text"`：在CSS中使用Thymeleaf表达式

---

## 7. ☁️ 微服务架构集成


### 7.1 微服务架构理解


> 💡 **通俗理解**  
> 微服务就像把一个大商场拆分成多个独立小店：服装店、餐饮店、电子产品店。每个店独立运营，但共同组成商场。

**微服务架构**：
```
传统单体应用：
┌─────────────────┐
│  用户+订单+商品  │
│   (一个系统)    │
└─────────────────┘

微服务架构：
┌───────┐  ┌───────┐  ┌───────┐
│用户服务│  │订单服务│  │商品服务│
└───────┘  └───────┘  └───────┘
    ↓          ↓          ↓
   各自独立部署和维护
```

### 7.2 服务间数据聚合


**场景**：订单页面需要显示用户信息和商品信息

```html
<!-- order-detail.html -->
<div class="order-detail">
    <h2>订单详情</h2>
    
    <!-- 订单基本信息（来自订单服务） -->
    <div class="order-info">
        <p>订单号: <span th:text="${order.orderNo}">202501010001</span></p>
        <p>下单时间: <span th:text="${#dates.format(order.createTime, 'yyyy-MM-dd HH:mm')}"></span></p>
        <p>订单状态: <span th:text="${order.statusText}">待支付</span></p>
    </div>
    
    <!-- 用户信息（来自用户服务） -->
    <div class="user-info">
        <h3>收货信息</h3>
        <p>收货人: <span th:text="${userInfo.name}">张三</span></p>
        <p>联系电话: <span th:text="${userInfo.phone}">138****1234</span></p>
        <p>收货地址: <span th:text="${userInfo.address}">北京市朝阳区...</span></p>
    </div>
    
    <!-- 商品信息（来自商品服务） -->
    <div class="product-list">
        <h3>商品清单</h3>
        <table>
            <thead>
                <tr>
                    <th>商品</th>
                    <th>单价</th>
                    <th>数量</th>
                    <th>小计</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item : ${orderItems}">
                    <td>
                        <!-- 商品信息来自商品服务 -->
                        <span th:text="${item.productName}">商品名</span>
                    </td>
                    <td th:text="'¥' + ${item.price}">¥99</td>
                    <td th:text="${item.quantity}">1</td>
                    <td th:text="'¥' + ${item.subtotal}">¥99</td>
                </tr>
            </tbody>
        </table>
        
        <p class="total">
            总价: <span th:text="'¥' + ${order.totalAmount}">¥0</span>
        </p>
    </div>
</div>
```

**后端数据聚合（Controller）**：
```java
@GetMapping("/orders/{id}")
public String getOrderDetail(@PathVariable Long id, Model model) {
    // 1. 从订单服务获取订单信息
    Order order = orderService.getOrder(id);
    
    // 2. 从用户服务获取用户信息（远程调用）
    UserInfo userInfo = userClient.getUserInfo(order.getUserId());
    
    // 3. 从商品服务获取商品信息（远程调用）
    List<OrderItem> items = order.getItems();
    for (OrderItem item : items) {
        Product product = productClient.getProduct(item.getProductId());
        item.setProductName(product.getName());
    }
    
    // 4. 组装数据传给模板
    model.addAttribute("order", order);
    model.addAttribute("userInfo", userInfo);
    model.addAttribute("orderItems", items);
    
    return "order-detail";
}
```

> ⚠️ **重要提示**  
> 微服务间调用可能失败，需要做好异常处理和降级方案

### 7.3 服务降级展示


**当某个服务不可用时的优雅降级**：
```html
<!-- order-detail.html - 带降级处理 -->
<div class="user-info">
    <h3>收货信息</h3>
    
    <!-- 正常情况 -->
    <div th:if="${userInfo != null}">
        <p>收货人: <span th:text="${userInfo.name}">张三</span></p>
        <p>联系电话: <span th:text="${userInfo.phone}">138****1234</span></p>
        <p>收货地址: <span th:text="${userInfo.address}">北京市...</span></p>
    </div>
    
    <!-- 服务降级 -->
    <div th:if="${userInfo == null}" class="service-unavailable">
        <p>⚠️ 用户信息暂时无法获取，请稍后刷新</p>
        <button onclick="location.reload()">重新加载</button>
    </div>
</div>
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


> 🎯 **关键知识点回顾**

**后台管理系统**：
- 权限控制用`th:if`配合角色判断
- 数据表格用`th:each`遍历显示
- 搜索筛选用表单参数传递

**电商平台**：
- 商品展示用网格布局+循环
- 购物车用条件判断显示空状态
- 价格计算用表达式运算

**CMS系统**：
- 富文本编辑器用`th:field`绑定
- 文章状态用条件渲染不同样式
- 日期格式化用`#dates.format()`

**工作流系统**：
- 审批流程用迭代状态`stat`显示步骤
- 流程状态用`th:classappend`添加样式
- 权限判断控制操作按钮显示

**报表系统**：
- 数据汇总用卡片展示关键指标
- 图表数据用`th:inline="javascript"`传递
- 导出功能用链接带参数

**多租户系统**：
- 租户切换用下拉选择+JS跳转
- 个性化配置用CSS变量
- 数据隔离在后端实现

**微服务集成**：
- 数据聚合在Controller层完成
- 服务降级用条件判断显示备用内容
- 远程调用要处理异常

### 8.2 实战开发建议


> 💡 **最佳实践**

**1. 页面复用**：
```
善用模板片段：
- header、footer、sidebar提取为fragments
- 分页组件、表单组件封装复用
- 减少重复代码
```

**2. 性能优化**：
```
注意事项：
- 避免在循环中嵌套过多判断
- 大数据量用分页，不要一次全加载
- 静态资源用CDN加速
```

**3. 用户体验**：
```
优化要点：
- 加载中状态提示
- 操作成功/失败反馈
- 表单验证友好提示
- 空状态友好展示
```

**4. 安全考虑**：
```
安全要点：
- 前端权限控制+后端验证
- 防止XSS攻击（转义输出）
- CSRF防护（添加token）
- 敏感信息脱敏显示
```

### 8.3 学习路线建议


**新手学习顺序**：
```
第1步：掌握基础语法
├── th:text、th:if、th:each
└── URL表达式、变量表达式

第2步：实战简单页面
├── 用户列表
└── 表单提交

第3步：进阶功能
├── 布局模板
├── 片段复用
└── 条件渲染

第4步：企业级应用
├── 后台管理
├── 电商平台
└── 工作流系统
```

**🔖 核心记忆口诀**：
```
Thymeleaf企业开发记心间
权限控制判断角色权
数据展示循环配条件
表单绑定field最方便
服务调用聚合显示前
降级处理用户体验全
```