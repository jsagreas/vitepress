---
title: 3ã€Thymeleafé«˜çº§é…ç½®ä¸è°ƒä¼˜
---
## ğŸ“š ç›®å½•

1. [æ¨¡æ¿è§£æå™¨é…ç½®](#1-æ¨¡æ¿è§£æå™¨é…ç½®)
2. [æ¨¡æ¿æ¨¡å¼è®¾ç½®](#2-æ¨¡æ¿æ¨¡å¼è®¾ç½®)
3. [å­—ç¬¦ç¼–ç é…ç½®](#3-å­—ç¬¦ç¼–ç é…ç½®)
4. [ç¼“å­˜å¤§å°è®¾ç½®](#4-ç¼“å­˜å¤§å°è®¾ç½®)
5. [çº¿ç¨‹å®‰å…¨é…ç½®](#5-çº¿ç¨‹å®‰å…¨é…ç½®)
6. [å¼‚å¸¸å¤„ç†é…ç½®](#6-å¼‚å¸¸å¤„ç†é…ç½®)
7. [è°ƒè¯•æ¨¡å¼é…ç½®](#7-è°ƒè¯•æ¨¡å¼é…ç½®)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ æ¨¡æ¿è§£æå™¨é…ç½®


### 1.1 ä»€ä¹ˆæ˜¯æ¨¡æ¿è§£æå™¨


**é€šä¿—ç†è§£**ï¼šæ¨¡æ¿è§£æå™¨å°±åƒæ˜¯Thymeleafçš„"é˜…è¯»å™¨"ï¼Œå®ƒè´Ÿè´£æ‰¾åˆ°å¹¶è¯»å–ä½ çš„HTMLæ¨¡æ¿æ–‡ä»¶ã€‚

```
ç®€å•ç±»æ¯”ï¼š
ä½ å†™äº†ä¸€å°ä¿¡ï¼ˆHTMLæ¨¡æ¿ï¼‰ â†’ éœ€è¦æœ‰äººå»è¯»è¿™å°ä¿¡ï¼ˆè§£æå™¨ï¼‰ â†’ æ‰èƒ½çŸ¥é“ä¿¡çš„å†…å®¹

æ¨¡æ¿è§£æå™¨çš„å·¥ä½œï¼š
1. æ‰¾åˆ°æ¨¡æ¿æ–‡ä»¶åœ¨å“ªé‡Œï¼ˆä½ç½®ï¼‰
2. ç”¨ä»€ä¹ˆæ–¹å¼è¯»å–ï¼ˆç¼–ç ï¼‰
3. è¯»å–åå¦‚ä½•å¤„ç†ï¼ˆç¼“å­˜ï¼‰
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ”¸ **å®šä½æ¨¡æ¿**ï¼šå‘Šè¯‰Thymeleafå»å“ªé‡Œæ‰¾æ¨¡æ¿æ–‡ä»¶
- ğŸ”¸ **è¯»å–æ¨¡æ¿**ï¼šè§„å®šç”¨ä»€ä¹ˆæ–¹å¼è¯»å–æ–‡ä»¶å†…å®¹
- ğŸ”¸ **å¤„ç†æ¨¡æ¿**ï¼šå†³å®šè¯»å–åå¦‚ä½•ä¼˜åŒ–å’Œå­˜å‚¨

### 1.2 è§£æå™¨ç±»å‹è¯¦è§£


**ä¸‰å¤§å¸¸ç”¨è§£æå™¨**ï¼š

| è§£æå™¨ç±»å‹ | **ç”¨é€”è¯´æ˜** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|------------|
| **ClassLoaderTemplateResolver** | ä»ç±»è·¯å¾„è¯»å–æ¨¡æ¿ï¼ˆresourcesæ–‡ä»¶å¤¹ï¼‰ | SpringBooté¡¹ç›®ï¼Œæ¨¡æ¿åœ¨`resources/templates`ä¸‹ |
| **FileTemplateResolver** | ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–æ¨¡æ¿ï¼ˆç¡¬ç›˜è·¯å¾„ï¼‰ | æ¨¡æ¿æ–‡ä»¶åœ¨é¡¹ç›®å¤–éƒ¨ï¼Œéœ€è¦åŠ¨æ€åŠ è½½ |
| **StringTemplateResolver** | ä»å­—ç¬¦ä¸²è¯»å–æ¨¡æ¿å†…å®¹ | æ¨¡æ¿å†…å®¹å­˜åœ¨æ•°æ®åº“æˆ–åŠ¨æ€ç”Ÿæˆ |

### 1.3 SpringBootä¸­çš„è§£æå™¨é…ç½®


**é…ç½®æ–‡ä»¶æ–¹å¼**ï¼ˆapplication.ymlï¼‰ï¼š

```yaml
spring:
  thymeleaf:
    # æ¨¡æ¿æ–‡ä»¶å‰ç¼€ï¼ˆæ¨¡æ¿æ”¾åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ï¼‰
    prefix: classpath:/templates/
    # æ¨¡æ¿æ–‡ä»¶åç¼€ï¼ˆä»€ä¹ˆæ ¼å¼çš„æ–‡ä»¶ï¼‰
    suffix: .html
    # æ¨¡æ¿æ¨¡å¼ï¼ˆç”¨ä»€ä¹ˆæ–¹å¼è§£æï¼‰
    mode: HTML
    # å­—ç¬¦ç¼–ç 
    encoding: UTF-8
    # æ˜¯å¦å¯ç”¨ç¼“å­˜ï¼ˆå¼€å‘æ—¶å…³é—­ï¼Œç”Ÿäº§ç¯å¢ƒå¼€å¯ï¼‰
    cache: false
```

**å…³é”®å‚æ•°è§£é‡Š**ï¼š

ğŸ”¹ **prefixï¼ˆå‰ç¼€ï¼‰**
```
å«ä¹‰ï¼šæ¨¡æ¿æ–‡ä»¶å­˜æ”¾çš„æ ¹ç›®å½•
é»˜è®¤å€¼ï¼šclasspath:/templates/
ä¸¾ä¾‹ï¼šprefixè®¾ä¸ºclasspath:/templates/ï¼Œè®¿é—®index.htmlæ—¶
     â†’ å®é™…æ‰¾çš„æ˜¯ resources/templates/index.html
```

ğŸ”¹ **suffixï¼ˆåç¼€ï¼‰**
```
å«ä¹‰ï¼šæ¨¡æ¿æ–‡ä»¶çš„æ‰©å±•å
é»˜è®¤å€¼ï¼š.html
ä½œç”¨ï¼šæ§åˆ¶å™¨è¿”å›"index" â†’ è‡ªåŠ¨è¡¥å…¨ä¸º"index.html"
```

ğŸ”¹ **cacheï¼ˆç¼“å­˜ï¼‰**
```
å«ä¹‰ï¼šæ˜¯å¦ç¼“å­˜è§£æåçš„æ¨¡æ¿
å¼€å‘ç¯å¢ƒï¼šè®¾ä¸ºfalseï¼Œä¿®æ”¹æ¨¡æ¿ç«‹å³ç”Ÿæ•ˆ
ç”Ÿäº§ç¯å¢ƒï¼šè®¾ä¸ºtrueï¼Œæå‡æ€§èƒ½
```

### 1.4 ä»£ç æ–¹å¼è‡ªå®šä¹‰è§£æå™¨


**åœºæ™¯**ï¼šéœ€è¦æ›´çµæ´»çš„é…ç½®ï¼Œæ¯”å¦‚å¤šä¸ªæ¨¡æ¿è·¯å¾„

```java
@Configuration
public class ThymeleafConfig {
    
    @Bean
    public SpringResourceTemplateResolver templateResolver() {
        SpringResourceTemplateResolver resolver = new SpringResourceTemplateResolver();
        
        // è®¾ç½®æ¨¡æ¿ä½ç½®ï¼ˆå¤šä¸ªä½ç½®ç”¨é€—å·åˆ†éš”ï¼‰
        resolver.setPrefix("classpath:/templates/");
        resolver.setSuffix(".html");
        
        // è®¾ç½®æ¨¡æ¿æ¨¡å¼
        resolver.setTemplateMode(TemplateMode.HTML);
        
        // è®¾ç½®å­—ç¬¦ç¼–ç 
        resolver.setCharacterEncoding("UTF-8");
        
        // è®¾ç½®ç¼“å­˜ç­–ç•¥ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®trueï¼‰
        resolver.setCacheable(false);
        
        // è®¾ç½®è§£æå™¨é¡ºåºï¼ˆå¤šä¸ªè§£æå™¨æ—¶æœ‰ç”¨ï¼‰
        resolver.setOrder(1);
        
        return resolver;
    }
}
```

**é…ç½®è¯´æ˜**ï¼š
- `setPrefix()`ï¼šæ¨¡æ¿æ–‡ä»¶å¤¹ä½ç½®
- `setSuffix()`ï¼šæ¨¡æ¿æ–‡ä»¶æ‰©å±•å
- `setTemplateMode()`ï¼šè§£ææ¨¡å¼ï¼ˆHTML/XML/TEXTç­‰ï¼‰
- `setCacheable()`ï¼šæ˜¯å¦ç¼“å­˜ï¼Œfalseè¡¨ç¤ºæ¯æ¬¡éƒ½é‡æ–°è¯»å–
- `setOrder()`ï¼šå¤šä¸ªè§£æå™¨æ—¶çš„ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜

---

## 2. ğŸ“‹ æ¨¡æ¿æ¨¡å¼è®¾ç½®


### 2.1 æ¨¡æ¿æ¨¡å¼æ˜¯ä»€ä¹ˆ


**é€šä¿—è§£é‡Š**ï¼šæ¨¡æ¿æ¨¡å¼å°±æ˜¯å‘Šè¯‰Thymeleaf"ä½ è¦å¤„ç†çš„æ˜¯ä»€ä¹ˆç±»å‹çš„æ–‡ä»¶"ã€‚

```
ç±»æ¯”ç†è§£ï¼š
ä½ çœ‹ä¹¦ â†’ è¦çŸ¥é“æ˜¯å°è¯´è¿˜æ˜¯æ•™æï¼ˆä¸åŒçš„é˜…è¯»æ–¹å¼ï¼‰
Thymeleafå¤„ç†æ¨¡æ¿ â†’ è¦çŸ¥é“æ˜¯HTMLè¿˜æ˜¯çº¯æ–‡æœ¬ï¼ˆä¸åŒçš„è§£ææ–¹å¼ï¼‰
```

### 2.2 äº”ç§æ¨¡æ¿æ¨¡å¼å¯¹æ¯”


| æ¨¡å¼ | **è¯´æ˜** | **ç”¨é€”åœºæ™¯** | **ç‰¹ç‚¹** |
|------|---------|------------|---------|
| **HTML** | æ ‡å‡†HTML5æ ¼å¼ | ç½‘é¡µæ¨¡æ¿ï¼ˆæœ€å¸¸ç”¨ï¼‰ | å…è®¸ä¸è§„èŒƒçš„HTMLï¼Œè‡ªåŠ¨ä¿®å¤ |
| **XML** | ä¸¥æ ¼XMLæ ¼å¼ | XMLé…ç½®æ–‡ä»¶ã€RSSè®¢é˜… | å¿…é¡»ç¬¦åˆXMLè§„èŒƒï¼Œæ ‡ç­¾å¿…é¡»é—­åˆ |
| **TEXT** | çº¯æ–‡æœ¬æ ¼å¼ | é‚®ä»¶å†…å®¹ã€æ–‡æœ¬æ–‡ä»¶ | ä¸è§£æHTMLæ ‡ç­¾ï¼ŒåŸæ ·è¾“å‡º |
| **JAVASCRIPT** | JavaScriptä»£ç  | åŠ¨æ€ç”ŸæˆJSä»£ç  | æ”¯æŒåœ¨JSä¸­ä½¿ç”¨Thymeleafè¯­æ³• |
| **CSS** | CSSæ ·å¼ä»£ç  | åŠ¨æ€ç”Ÿæˆæ ·å¼ | æ”¯æŒåœ¨CSSä¸­ä½¿ç”¨Thymeleafè¯­æ³• |

### 2.3 å„æ¨¡å¼è¯¦ç»†è¯´æ˜


**HTMLæ¨¡å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰**ï¼š

```yaml
spring:
  thymeleaf:
    mode: HTML  # é»˜è®¤æ¨¡å¼
```

ğŸ”¸ **ç‰¹ç‚¹**ï¼š
- å®¹é”™æ€§å¼ºï¼Œå…è®¸ä¸è§„èŒƒçš„HTMLå†™æ³•
- è‡ªåŠ¨è¡¥å…¨æœªé—­åˆçš„æ ‡ç­¾
- é€‚åˆWebé¡µé¢å¼€å‘

**ç¤ºä¾‹å¯¹æ¯”**ï¼š
```html
<!-- HTMLæ¨¡å¼ï¼šå…è®¸è¿™æ ·å†™ -->
<div th:text="${message}">
<p th:text="${name}">

<!-- Thymeleafä¼šè‡ªåŠ¨è¡¥å…¨ä¸º -->
<div th:text="${message}"></div>
<p th:text="${name}"></p>
```

---

**XMLæ¨¡å¼**ï¼š

```java
resolver.setTemplateMode(TemplateMode.XML);
```

ğŸ”¸ **ç‰¹ç‚¹**ï¼š
- ä¸¥æ ¼éµå®ˆXMLè§„èŒƒ
- æ‰€æœ‰æ ‡ç­¾å¿…é¡»æ­£ç¡®é—­åˆ
- é€‚åˆå¤„ç†é…ç½®æ–‡ä»¶

**ç¤ºä¾‹**ï¼š
```xml
<!-- XMLæ¨¡å¼å¿…é¡»è¿™æ ·å†™ -->
<config>
    <item th:text="${value}"></item>
    <self-closing th:attr="data-id=${id}" />
</config>
```

---

**TEXTæ¨¡å¼ï¼ˆçº¯æ–‡æœ¬ï¼‰**ï¼š

```java
resolver.setTemplateMode(TemplateMode.TEXT);
```

ğŸ”¸ **ç‰¹ç‚¹**ï¼š
- ä¸è§£æHTMLæ ‡ç­¾
- é€‚åˆé‚®ä»¶ã€çº¯æ–‡æœ¬æ–‡ä»¶
- ä½¿ç”¨`[[ ]]`è¯­æ³•

**é‚®ä»¶æ¨¡æ¿ç¤ºä¾‹**ï¼š
```text
å°Šæ•¬çš„ [[${userName}]]ï¼š

æ‚¨çš„è®¢å• [[${orderId}]] å·²å‘è´§ã€‚
é¢„è®¡ [[${deliveryDate}]] é€è¾¾ã€‚

æ„Ÿè°¢æ‚¨çš„è´­ä¹°ï¼
```

---

**JAVASCRIPTæ¨¡å¼**ï¼š

```java
resolver.setTemplateMode(TemplateMode.JAVASCRIPT);
```

ğŸ”¸ **ç”¨é€”**ï¼šåœ¨JavaScriptä»£ç ä¸­ä½¿ç”¨Thymeleaf

**ç¤ºä¾‹**ï¼š
```javascript
// dynamic.js æ¨¡æ¿
var userName = /*[[${user.name}]]*/ 'defaultName';
var userId = /*[[${user.id}]]*/ 0;

console.log('User: ' + userName);
```

---

**CSSæ¨¡å¼**ï¼š

```java
resolver.setTemplateMode(TemplateMode.CSS);
```

ğŸ”¸ **ç”¨é€”**ï¼šåŠ¨æ€ç”ŸæˆCSSæ ·å¼

**ç¤ºä¾‹**ï¼š
```css
/* dynamic.css æ¨¡æ¿ */
.user-card {
    background-color: [(${themeColor})];
    border: 1px solid [(${borderColor})];
}
```

### 2.4 æ¨¡å¼é€‰æ‹©å»ºè®®


```
é€‰æ‹©åŸåˆ™ï¼š

ç½‘é¡µæ¨¡æ¿ â†’ HTMLæ¨¡å¼
  â”œâ”€ æœ€å¸¸ç”¨ï¼Œå®¹é”™æ€§å¥½
  â””â”€ SpringBooté»˜è®¤å°±æ˜¯è¿™ä¸ª

é…ç½®æ–‡ä»¶ â†’ XMLæ¨¡å¼
  â”œâ”€ ä¸¥æ ¼è§„èŒƒï¼Œé€‚åˆç»“æ„åŒ–æ•°æ®
  â””â”€ éœ€è¦æ ‡ç­¾é—­åˆ

é‚®ä»¶å†…å®¹ â†’ TEXTæ¨¡å¼
  â”œâ”€ ä¸è§£æHTML
  â””â”€ çº¯æ–‡æœ¬è¾“å‡º

åŠ¨æ€è„šæœ¬ â†’ JAVASCRIPT/CSSæ¨¡å¼
  â”œâ”€ åœ¨ä»£ç ä¸­åµŒå…¥å˜é‡
  â””â”€ ç‰¹æ®Šåœºæ™¯ä½¿ç”¨
```

---

## 3. ğŸŒ å­—ç¬¦ç¼–ç é…ç½®


### 3.1 ä¸ºä»€ä¹ˆè¦é…ç½®ç¼–ç 


**é€šä¿—ç†è§£**ï¼šå­—ç¬¦ç¼–ç å°±åƒ"ç¿»è¯‘è§„åˆ™"ï¼Œå†³å®šäº†ä¸­æ–‡ç­‰ç‰¹æ®Šå­—ç¬¦å¦‚ä½•æ­£ç¡®æ˜¾ç¤ºã€‚

```
é—®é¢˜åœºæ™¯ï¼š
æ²¡é…ç½®ç¼–ç  â†’ ç½‘é¡µæ˜¾ç¤º"Ã¤Â½ Ã¥Â¥Â½" ï¼ˆä¹±ç ï¼‰
é…ç½®UTF-8  â†’ ç½‘é¡µæ˜¾ç¤º"ä½ å¥½" ï¼ˆæ­£ç¡®ï¼‰

ç¼–ç çš„ä½œç”¨ï¼š
å‘Šè¯‰è®¡ç®—æœºç”¨ä»€ä¹ˆè§„åˆ™è¯»å–å’Œæ˜¾ç¤ºæ–‡å­—
```

### 3.2 ç¼–ç é…ç½®æ–¹å¼


**é…ç½®æ–‡ä»¶æ–¹å¼**ï¼š

```yaml
spring:
  thymeleaf:
    # æ¨¡æ¿æ–‡ä»¶ç¼–ç 
    encoding: UTF-8
    
# HTTPå“åº”ç¼–ç 
server:
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true
```

**é…ç½®è¯´æ˜**ï¼š
- `thymeleaf.encoding`ï¼šæ¨¡æ¿æ–‡ä»¶ç”¨ä»€ä¹ˆç¼–ç è¯»å–
- `server.servlet.encoding.charset`ï¼šç½‘é¡µè¾“å‡ºç”¨ä»€ä¹ˆç¼–ç 
- `force: true`ï¼šå¼ºåˆ¶ä½¿ç”¨æŒ‡å®šç¼–ç 

### 3.3 å¸¸è§ç¼–ç é—®é¢˜è§£å†³


**é—®é¢˜1ï¼šä¸­æ–‡ä¹±ç **

```
åŸå› ï¼šæ¨¡æ¿æ–‡ä»¶ä¿å­˜ç¼–ç ä¸è¯»å–ç¼–ç ä¸ä¸€è‡´
è§£å†³ï¼š
1. IDEä¸­è®¾ç½®æ–‡ä»¶ç¼–ç ä¸ºUTF-8
2. application.ymlé…ç½®encoding: UTF-8
3. HTMLæ–‡ä»¶æ·»åŠ <meta charset="UTF-8">
```

**é—®é¢˜2ï¼šç‰¹æ®Šå­—ç¬¦æ— æ³•æ˜¾ç¤º**

```
åŸå› ï¼šç¼–ç ä¸æ”¯æŒè¯¥å­—ç¬¦
è§£å†³ï¼šç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç ï¼ˆæ”¯æŒå…¨çƒæ‰€æœ‰è¯­è¨€ï¼‰
```

**å®Œæ•´é…ç½®ç¤ºä¾‹**ï¼š

```yaml
spring:
  thymeleaf:
    encoding: UTF-8
    mode: HTML
  
server:
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true
```

HTMLæ–‡ä»¶å¤´éƒ¨ï¼š
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ç¤ºä¾‹é¡µé¢</title>
</head>
```

---

## 4. ğŸ’¾ ç¼“å­˜å¤§å°è®¾ç½®


### 4.1 ä»€ä¹ˆæ˜¯æ¨¡æ¿ç¼“å­˜


**é€šä¿—ç†è§£**ï¼šç¼“å­˜å°±åƒ"è®°å¿†"ï¼Œç¬¬ä¸€æ¬¡è¯»å–æ¨¡æ¿åè®°ä½å†…å®¹ï¼Œä¸‹æ¬¡ç›´æ¥ç”¨è®°å¿†ï¼Œä¸ç”¨å†è¯»æ–‡ä»¶ã€‚

```
ç±»æ¯”ï¼š
ç¬¬ä¸€æ¬¡çœ‹ä¹¦ â†’ è®¤çœŸé˜…è¯»ï¼Œè®°ä½å†…å®¹ï¼ˆè¯»å–å¹¶ç¼“å­˜ï¼‰
ç¬¬äºŒæ¬¡çœ‹ä¹¦ â†’ ç›´æ¥å›å¿†å†…å®¹ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰

å¥½å¤„ï¼šé€Ÿåº¦å¿«ï¼Œä¸ç”¨æ¯æ¬¡éƒ½è¯»æ–‡ä»¶
ç¼ºç‚¹ï¼šä¿®æ”¹æ–‡ä»¶åä¸ä¼šç«‹å³ç”Ÿæ•ˆ
```

### 4.2 ç¼“å­˜é…ç½®è¯¦è§£


**åŸºç¡€é…ç½®**ï¼š

```yaml
spring:
  thymeleaf:
    # æ˜¯å¦å¯ç”¨ç¼“å­˜
    cache: true
    
    # ç¼“å­˜çš„æœ€å¤§æ¡ç›®æ•°ï¼ˆå¯ç¼“å­˜å¤šå°‘ä¸ªæ¨¡æ¿ï¼‰
    # SpringBoot 2.x åéœ€è¦é€šè¿‡ä»£ç é…ç½®
```

**ä»£ç é…ç½®ç¼“å­˜å¤§å°**ï¼š

```java
@Configuration
public class ThymeleafConfig {
    
    @Bean
    public SpringResourceTemplateResolver templateResolver() {
        SpringResourceTemplateResolver resolver = new SpringResourceTemplateResolver();
        
        // åŸºç¡€é…ç½®
        resolver.setPrefix("classpath:/templates/");
        resolver.setSuffix(".html");
        
        // ç¼“å­˜é…ç½®
        resolver.setCacheable(true);  // å¯ç”¨ç¼“å­˜
        
        // è®¾ç½®ç¼“å­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
        resolver.setCacheTTLMs(3600000L); // 1å°æ—¶ = 3600000æ¯«ç§’
        
        return resolver;
    }
    
    @Bean
    public SpringTemplateEngine templateEngine(ITemplateResolver resolver) {
        SpringTemplateEngine engine = new SpringTemplateEngine();
        engine.setTemplateResolver(resolver);
        
        // è®¾ç½®ç¼“å­˜å¤§å°ï¼ˆå¯ç¼“å­˜200ä¸ªæ¨¡æ¿ï¼‰
        engine.setCacheManager(new StandardCacheManager());
        
        return engine;
    }
}
```

**å‚æ•°è¯´æ˜**ï¼š

ğŸ”¹ **setCacheable(boolean)**
```
trueï¼šå¯ç”¨ç¼“å­˜ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
falseï¼šç¦ç”¨ç¼“å­˜ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

å½±å“ï¼š
å¯ç”¨åä¿®æ”¹æ¨¡æ¿ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œéœ€è¦é‡å¯
ç¦ç”¨åæ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°è¯»å–ï¼Œæ€§èƒ½é™ä½
```

ğŸ”¹ **setCacheTTLMs(Long)**
```
å«ä¹‰ï¼šç¼“å­˜å­˜æ´»æ—¶é—´ï¼ˆTime To Liveï¼‰
å•ä½ï¼šæ¯«ç§’
ç¤ºä¾‹ï¼š
  3600000L = 1å°æ—¶
  null = æ°¸ä¹…ç¼“å­˜

ä½œç”¨ï¼šè¶…è¿‡æ—¶é—´è‡ªåŠ¨æ¸…é™¤ç¼“å­˜
```

### 4.3 ä¸åŒç¯å¢ƒçš„ç¼“å­˜ç­–ç•¥


**å¼€å‘ç¯å¢ƒé…ç½®**ï¼š

```yaml
# application-dev.yml
spring:
  thymeleaf:
    cache: false  # å…³é—­ç¼“å­˜ï¼Œä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ
```

**ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼š

```yaml
# application-prod.yml
spring:
  thymeleaf:
    cache: true  # å¼€å¯ç¼“å­˜ï¼Œæå‡æ€§èƒ½
```

**é…ç½®å»ºè®®**ï¼š

```
ç¯å¢ƒ         ç¼“å­˜ç­–ç•¥              åŸå› 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¼€å‘ç¯å¢ƒ     cache: false        æ–¹ä¾¿è°ƒè¯•ï¼Œä¿®æ”¹ç«‹å³çœ‹åˆ°æ•ˆæœ
æµ‹è¯•ç¯å¢ƒ     cache: false        æµ‹è¯•éœ€è¦é¢‘ç¹ä¿®æ”¹
ç”Ÿäº§ç¯å¢ƒ     cache: true         æ€§èƒ½ä¼˜å…ˆï¼Œæ¨¡æ¿ç¨³å®šä¸å¸¸æ”¹
```

### 4.4 æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜


**åœºæ™¯**ï¼šç”Ÿäº§ç¯å¢ƒéœ€è¦æ›´æ–°æ¨¡æ¿ï¼Œä½†ä¸æƒ³é‡å¯æœåŠ¡

```java
@RestController
public class CacheController {
    
    @Autowired
    private SpringTemplateEngine templateEngine;
    
    // æ¸…é™¤æ‰€æœ‰æ¨¡æ¿ç¼“å­˜
    @GetMapping("/admin/clear-cache")
    public String clearCache() {
        templateEngine.clearTemplateCache();
        return "ç¼“å­˜å·²æ¸…é™¤";
    }
    
    // æ¸…é™¤æŒ‡å®šæ¨¡æ¿ç¼“å­˜
    @GetMapping("/admin/clear-template/{name}")
    public String clearTemplate(@PathVariable String name) {
        templateEngine.clearTemplateCacheFor(name);
        return "æ¨¡æ¿ " + name + " ç¼“å­˜å·²æ¸…é™¤";
    }
}
```

---

## 5. ğŸ”’ çº¿ç¨‹å®‰å…¨é…ç½®


### 5.1 ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨


**é€šä¿—ç†è§£**ï¼šçº¿ç¨‹å®‰å…¨å°±æ˜¯ä¿è¯å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®æ—¶ï¼Œä¸ä¼šå‡ºç°æ•°æ®æ··ä¹±ã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
é“¶è¡Œå–é’± â†’ ä¸¤ä¸ªäººåŒæ—¶å–ï¼Œè¦ä¿è¯ä½™é¢æ­£ç¡®ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
ç½‘ç«™è®¿é—® â†’ å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®ï¼Œè¦ä¿è¯æ•°æ®ä¸ä¸²ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰

Thymeleafçš„çº¿ç¨‹å®‰å…¨ï¼š
100ä¸ªç”¨æˆ·åŒæ—¶è®¿é—® â†’ æ¯ä¸ªäººçœ‹åˆ°è‡ªå·±çš„æ•°æ®
ä¸ä¼šå‡ºç°å¼ ä¸‰çœ‹åˆ°æå››çš„è®¢å•ï¼ˆæ•°æ®éš”ç¦»ï¼‰
```

### 5.2 Thymeleafçš„çº¿ç¨‹å®‰å…¨æœºåˆ¶


**æ ¸å¿ƒåŸåˆ™**ï¼šThymeleafå¼•æ“æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å…±äº«

```
æ¶æ„è®¾è®¡ï¼š

TemplateEngineï¼ˆæ¨¡æ¿å¼•æ“ï¼‰
  â”œâ”€ çº¿ç¨‹å®‰å…¨ï¼Œå…¨å±€å•ä¾‹
  â”œâ”€ å¯è¢«å¤šä¸ªè¯·æ±‚å…±äº«
  â””â”€ ä¸å­˜å‚¨è¯·æ±‚ç›¸å…³æ•°æ®

Contextï¼ˆä¸Šä¸‹æ–‡å¯¹è±¡ï¼‰  
  â”œâ”€ æ¯ä¸ªè¯·æ±‚ç‹¬ç«‹åˆ›å»º
  â”œâ”€ å­˜å‚¨å½“å‰è¯·æ±‚çš„æ•°æ®
  â””â”€ è¯·æ±‚ç»“æŸåé”€æ¯

WebContextï¼ˆWebä¸Šä¸‹æ–‡ï¼‰
  â”œâ”€ ç»§æ‰¿Context
  â”œâ”€ åŒ…å«requestã€responseç­‰
  â””â”€ æ¯ä¸ªHTTPè¯·æ±‚ç‹¬ç«‹
```

### 5.3 çº¿ç¨‹å®‰å…¨çš„æ­£ç¡®ç”¨æ³•


**âœ… æ­£ç¡®åšæ³•**ï¼šæ¯ä¸ªè¯·æ±‚ç‹¬ç«‹çš„Context

```java
@Controller
public class SafeController {
    
    @Autowired
    private SpringTemplateEngine templateEngine;
    
    @GetMapping("/user/{id}")
    public String userInfo(@PathVariable Long id, Model model) {
        // Modelä¼šè‡ªåŠ¨è½¬ä¸ºç‹¬ç«‹çš„Context
        // æ¯ä¸ªè¯·æ±‚æœ‰è‡ªå·±çš„modelï¼Œçº¿ç¨‹å®‰å…¨
        model.addAttribute("userId", id);
        model.addAttribute("userName", "å¼ ä¸‰");
        
        return "user-info";
    }
}
```

**âŒ é”™è¯¯åšæ³•**ï¼šå…±äº«å˜é‡

```java
@Controller
public class UnsafeController {
    
    // âŒ é”™è¯¯ï¼šç±»æˆå‘˜å˜é‡è¢«æ‰€æœ‰è¯·æ±‚å…±äº«
    private String currentUser;
    
    @GetMapping("/login/{name}")
    public String login(@PathVariable String name, Model model) {
        // âŒ å±é™©ï¼šå¤šä¸ªè¯·æ±‚ä¼šäº’ç›¸è¦†ç›–
        this.currentUser = name;
        
        model.addAttribute("user", currentUser);
        return "welcome";
    }
}
```

**é—®é¢˜è¯´æ˜**ï¼š
```
åœºæ™¯ï¼š
ç”¨æˆ·Aè®¿é—® /login/å¼ ä¸‰ â†’ currentUser = "å¼ ä¸‰"
åŒæ—¶ç”¨æˆ·Bè®¿é—® /login/æå›› â†’ currentUser = "æå››"
æ­¤æ—¶ç”¨æˆ·Açš„é¡µé¢å¯èƒ½æ˜¾ç¤º"æå››"ï¼ˆæ•°æ®ä¸²äº†ï¼‰
```

### 5.4 çº¿ç¨‹å®‰å…¨é…ç½®å»ºè®®


**é…ç½®æ–¹å¼**ï¼š

```java
@Configuration
public class ThymeleafConfig {
    
    @Bean
    public SpringTemplateEngine templateEngine() {
        SpringTemplateEngine engine = new SpringTemplateEngine();
        
        // TemplateEngineçº¿ç¨‹å®‰å…¨ï¼Œå•ä¾‹å³å¯
        engine.setEnableSpringELCompiler(true);
        
        return engine;
    }
}
```

**ä½¿ç”¨è§„èŒƒ**ï¼š

```
âœ… æ¨èåšæ³•ï¼š
1. TemplateEngineé…ç½®ä¸ºå•ä¾‹Bean
2. ä½¿ç”¨SpringMVCçš„Modelä¼ é€’æ•°æ®
3. ä¸åœ¨Controllerä¸­ä½¿ç”¨å…±äº«å˜é‡
4. æ¨¡æ¿ä¸­ä½¿ç”¨ç‹¬ç«‹çš„Context

âŒ é¿å…åšæ³•ï¼š
1. ä¸è¦åœ¨Controllerä¸­å®šä¹‰æˆå‘˜å˜é‡å­˜å‚¨è¯·æ±‚æ•°æ®
2. ä¸è¦æ‰‹åŠ¨åˆ›å»ºå…±äº«çš„Contextå¯¹è±¡
3. ä¸è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨é™æ€å˜é‡
```

---

## 6. âš ï¸ å¼‚å¸¸å¤„ç†é…ç½®


### 6.1 æ¨¡æ¿å¼‚å¸¸çš„ç±»å‹


**Thymeleafå¸¸è§å¼‚å¸¸**ï¼š

```
TemplateInputException
  â”œâ”€ å«ä¹‰ï¼šæ¨¡æ¿æ–‡ä»¶æ‰¾ä¸åˆ°æˆ–æ— æ³•è¯»å–
  â””â”€ åŸå› ï¼šè·¯å¾„é”™è¯¯ã€æ–‡ä»¶ä¸å­˜åœ¨

TemplateProcessingException
  â”œâ”€ å«ä¹‰ï¼šæ¨¡æ¿å¤„ç†è¿‡ç¨‹å‡ºé”™
  â””â”€ åŸå› ï¼šè¯­æ³•é”™è¯¯ã€å˜é‡ä¸å­˜åœ¨

ParseException
  â”œâ”€ å«ä¹‰ï¼šæ¨¡æ¿è§£æå¤±è´¥
  â””â”€ åŸå› ï¼šHTMLæ ¼å¼é”™è¯¯ã€æ ‡ç­¾ä¸åŒ¹é…
```

### 6.2 å¼‚å¸¸å¤„ç†ç­–ç•¥é…ç½®


**æ–¹å¼ä¸€ï¼šå…¨å±€å¼‚å¸¸å¤„ç†**

```java
@ControllerAdvice
public class ThymeleafExceptionHandler {
    
    // å¤„ç†æ¨¡æ¿æ‰¾ä¸åˆ°å¼‚å¸¸
    @ExceptionHandler(TemplateInputException.class)
    public String handleTemplateNotFound(TemplateInputException e, Model model) {
        model.addAttribute("error", "æ¨¡æ¿æ–‡ä»¶ä¸å­˜åœ¨: " + e.getTemplateName());
        return "error/404";  // è¿”å›å‹å¥½çš„404é¡µé¢
    }
    
    // å¤„ç†æ¨¡æ¿å¤„ç†å¼‚å¸¸
    @ExceptionHandler(TemplateProcessingException.class)
    public String handleTemplateError(TemplateProcessingException e, Model model) {
        model.addAttribute("error", "æ¨¡æ¿å¤„ç†é”™è¯¯: " + e.getMessage());
        return "error/500";  // è¿”å›é”™è¯¯é¡µé¢
    }
}
```

**æ–¹å¼äºŒï¼šé…ç½®æ–‡ä»¶æ§åˆ¶**

```yaml
spring:
  thymeleaf:
    # é‡åˆ°é”™è¯¯æ—¶çš„å¤„ç†æ–¹å¼
    # false: æŠ›å‡ºå¼‚å¸¸ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒå®šä½é—®é¢˜
    # true: é™é»˜å¤„ç†ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
    check-template: true
    
    # æ¨¡æ¿ä¸å­˜åœ¨æ—¶çš„å¤„ç†
    check-template-location: true
```

### 6.3 å¼€å‘ç¯å¢ƒå‹å¥½çš„å¼‚å¸¸é…ç½®


**å¼€å‘ç¯å¢ƒé…ç½®**ï¼ˆè¯¦ç»†æŠ¥é”™ï¼‰ï¼š

```yaml
# application-dev.yml
spring:
  thymeleaf:
    cache: false
    # å¼€å¯è¯¦ç»†å¼‚å¸¸ä¿¡æ¯
    check-template: true
    check-template-location: true

# æ˜¾ç¤ºå®Œæ•´é”™è¯¯å †æ ˆ
server:
  error:
    include-exception: true
    include-stacktrace: always
    include-message: always
```

**ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼ˆå‹å¥½æç¤ºï¼‰ï¼š

```yaml
# application-prod.yml
spring:
  thymeleaf:
    cache: true
    check-template: false  # ä¸æš´éœ²è¯¦ç»†é”™è¯¯
    
server:
  error:
    include-exception: false
    include-stacktrace: never  # ä¸æ˜¾ç¤ºå †æ ˆ
    include-message: never
```

### 6.4 è‡ªå®šä¹‰é”™è¯¯é¡µé¢


**åˆ›å»ºå‹å¥½çš„é”™è¯¯é¡µé¢**ï¼š

```html
<!-- templates/error/500.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ç³»ç»Ÿé”™è¯¯</title>
</head>
<body>
    <h1>ğŸ˜” æŠ±æ­‰ï¼Œç³»ç»Ÿå‡ºç°é—®é¢˜</h1>
    <p th:text="${error}">é”™è¯¯ä¿¡æ¯</p>
    <a href="/">è¿”å›é¦–é¡µ</a>
</body>
</html>
```

**é”™è¯¯å¤„ç†æµç¨‹**ï¼š

```
è¯·æ±‚å¤„ç†æµç¨‹ï¼š

æ­£å¸¸æµç¨‹ï¼š
è¯·æ±‚ â†’ Controller â†’ å¤„ç†æ•°æ® â†’ æ¸²æŸ“æ¨¡æ¿ â†’ è¿”å›é¡µé¢

å¼‚å¸¸æµç¨‹ï¼š
è¯·æ±‚ â†’ Controller â†’ å‘ç”Ÿå¼‚å¸¸ 
     â†“
  å¼‚å¸¸æ•è·å™¨(ControllerAdvice)
     â†“
  è¿”å›å‹å¥½é”™è¯¯é¡µé¢
```

---

## 7. ğŸ› è°ƒè¯•æ¨¡å¼é…ç½®


### 7.1 ä»€ä¹ˆæ˜¯è°ƒè¯•æ¨¡å¼


**é€šä¿—ç†è§£**ï¼šè°ƒè¯•æ¨¡å¼å°±åƒ"é€è§†é•œ"ï¼Œè®©ä½ çœ‹åˆ°Thymeleafå†…éƒ¨çš„è¿è¡Œè¿‡ç¨‹ã€‚

```
å…³é—­è°ƒè¯•ï¼š
  â”œâ”€ æ¨¡æ¿æ¸²æŸ“å¿«é€Ÿ
  â”œâ”€ çœ‹ä¸åˆ°å¤„ç†ç»†èŠ‚
  â””â”€ å‡ºé”™éš¾ä»¥å®šä½

å¼€å¯è°ƒè¯•ï¼š
  â”œâ”€ æ˜¾ç¤ºè¯¦ç»†å¤„ç†æ—¥å¿—
  â”œâ”€ çœ‹åˆ°å˜é‡è§£æè¿‡ç¨‹
  â””â”€ æ–¹ä¾¿æ‰¾å‡ºé—®é¢˜æ ¹æº
```

### 7.2 è°ƒè¯•æ¨¡å¼é…ç½®


**é…ç½®æ–‡ä»¶æ–¹å¼**ï¼š

```yaml
# application-dev.ymlï¼ˆå¼€å‘ç¯å¢ƒï¼‰
logging:
  level:
    # Thymeleafæ ¸å¿ƒæ—¥å¿—
    org.thymeleaf: DEBUG
    # æ¨¡æ¿ç¼“å­˜æ—¥å¿—
    org.thymeleaf.TemplateEngine.CONFIG: DEBUG
    # æ¨¡æ¿è§£ææ—¥å¿—
    org.thymeleaf.TemplateEngine.TIMER: DEBUG
    # Springæ•´åˆæ—¥å¿—
    org.thymeleaf.spring5: DEBUG

spring:
  thymeleaf:
    cache: false  # è°ƒè¯•æ—¶å…³é—­ç¼“å­˜
```

**æ—¥å¿—çº§åˆ«è¯´æ˜**ï¼š

```
æ—¥å¿—çº§åˆ«ï¼ˆä»å°‘åˆ°å¤šï¼‰ï¼š

ERROR â†’ åªæ˜¾ç¤ºé”™è¯¯
WARN  â†’ æ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯  
INFO  â†’ æ˜¾ç¤ºä¸€èˆ¬ä¿¡æ¯
DEBUG â†’ æ˜¾ç¤ºè°ƒè¯•è¯¦æƒ…ï¼ˆæ¨èå¼€å‘ç¯å¢ƒï¼‰
TRACE â†’ æ˜¾ç¤ºæ‰€æœ‰ç»†èŠ‚ï¼ˆè¿‡äºè¯¦ç»†ï¼‰
```

### 7.3 è°ƒè¯•ä¿¡æ¯è§£è¯»


**å¯ç”¨è°ƒè¯•åçš„æ—¥å¿—ç¤ºä¾‹**ï¼š

```
[DEBUG] [THYMELEAF] - Template Mode: HTML
[DEBUG] [THYMELEAF] - Processing template "user-info"
[DEBUG] [THYMELEAF] - Resolving expression: ${user.name}
[DEBUG] [THYMELEAF] - Variable 'user' resolved to: User(id=1, name=å¼ ä¸‰)
[DEBUG] [THYMELEAF] - Template processed in 15ms
```

**æ—¥å¿—è§£è¯»**ï¼š
- `Template Mode: HTML`ï¼šä½¿ç”¨HTMLæ¨¡å¼è§£æ
- `Processing template "user-info"`ï¼šæ­£åœ¨å¤„ç†user-infoæ¨¡æ¿
- `Resolving expression: ${user.name}`ï¼šæ­£åœ¨è§£æå˜é‡è¡¨è¾¾å¼
- `Variable 'user' resolved to`ï¼šå˜é‡è§£æç»“æœ
- `Template processed in 15ms`ï¼šæ¨¡æ¿å¤„ç†è€—æ—¶

### 7.4 å®ç”¨è°ƒè¯•æŠ€å·§


**æŠ€å·§1ï¼šæ¨¡æ¿ä¸­è¾“å‡ºè°ƒè¯•ä¿¡æ¯**

```html
<!-- å¼€å‘æ—¶æŸ¥çœ‹å˜é‡å€¼ -->
<div th:text="'Debug: ' + ${user}">è°ƒè¯•ä¿¡æ¯</div>

<!-- è¾“å‡ºæ‰€æœ‰å˜é‡ -->
<div th:text="${#vars}">æ‰€æœ‰å˜é‡</div>

<!-- æ£€æŸ¥å˜é‡æ˜¯å¦å­˜åœ¨ -->
<div th:if="${user != null}" th:text="'ç”¨æˆ·å­˜åœ¨'"></div>
<div th:unless="${user != null}" th:text="'ç”¨æˆ·ä¸ºç©º'"></div>
```

**æŠ€å·§2ï¼šä½¿ç”¨th:blockè°ƒè¯•**

```html
<!-- th:blockä¸ä¼šåœ¨é¡µé¢æ˜¾ç¤ºï¼Œåªç”¨äºè°ƒè¯• -->
<th:block th:text="'å½“å‰ç”¨æˆ·ID: ' + ${userId}"></th:block>
<th:block th:text="'å¾ªç¯æ¬¡æ•°: ' + ${userStat.count}"></th:block>
```

**æŠ€å·§3ï¼šæ¡ä»¶è°ƒè¯•è¾“å‡º**

```html
<!-- åªåœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º -->
<div th:if="${@environment.getActiveProfiles()[0] == 'dev'}">
    <p>è°ƒè¯•ä¿¡æ¯ï¼š</p>
    <p th:text="${user}"></p>
</div>
```

### 7.5 æ€§èƒ½è°ƒè¯•é…ç½®


**ç›‘æ§æ¨¡æ¿æ¸²æŸ“æ€§èƒ½**ï¼š

```yaml
logging:
  level:
    # å¼€å¯æ€§èƒ½è®¡æ—¶æ—¥å¿—
    org.thymeleaf.TemplateEngine.TIMER: DEBUG
```

**æ€§èƒ½æ—¥å¿—ç¤ºä¾‹**ï¼š

```
[DEBUG] [TIMER] - Template "index" processed in 156ms
[DEBUG] [TIMER] - Fragment "header" processed in 23ms
[DEBUG] [TIMER] - Expression "${products}" resolved in 45ms
```

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š

```
æ ¹æ®æ—¥å¿—å®šä½æ…¢æ¨¡æ¿ï¼š

æ¸²æŸ“æ—¶é—´ < 50ms  â†’ æ€§èƒ½è‰¯å¥½ âœ…
æ¸²æŸ“æ—¶é—´ 50-200ms â†’ å¯æ¥å— âš ï¸
æ¸²æŸ“æ—¶é—´ > 200ms â†’ éœ€ä¼˜åŒ– âŒ

ä¼˜åŒ–æ–¹å‘ï¼š
1. å‡å°‘å¾ªç¯æ¬¡æ•°
2. ç®€åŒ–è¡¨è¾¾å¼
3. å¯ç”¨ç¼“å­˜
4. å‡å°‘ç‰‡æ®µåµŒå¥—
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 é…ç½®è¦ç‚¹é€ŸæŸ¥


| é…ç½®é¡¹ | **å¼€å‘ç¯å¢ƒ** | **ç”Ÿäº§ç¯å¢ƒ** | **ä½œç”¨** |
|-------|------------|------------|---------|
| **ç¼“å­˜** | `cache: false` | `cache: true` | å¼€å‘ä¾¿äºè°ƒè¯•ï¼Œç”Ÿäº§æå‡æ€§èƒ½ |
| **æ¨¡æ¿æ¨¡å¼** | `HTML` | `HTML` | æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹© |
| **å­—ç¬¦ç¼–ç ** | `UTF-8` | `UTF-8` | ç»Ÿä¸€ä½¿ç”¨UTF-8é¿å…ä¹±ç  |
| **å¼‚å¸¸å¤„ç†** | æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ | å‹å¥½æç¤ºé¡µé¢ | å¼€å‘å®šä½é—®é¢˜ï¼Œç”Ÿäº§ä¿æŠ¤ä¿¡æ¯ |
| **æ—¥å¿—çº§åˆ«** | `DEBUG` | `WARN/ERROR` | å¼€å‘çœ‹è¯¦æƒ…ï¼Œç”Ÿäº§çœ‹é”™è¯¯ |

### 8.2 é…ç½®æœ€ä½³å®è·µ


**ğŸ”¸ å¤šç¯å¢ƒé…ç½®ç­–ç•¥**

```yaml
# application.ymlï¼ˆé€šç”¨é…ç½®ï¼‰
spring:
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    encoding: UTF-8
    mode: HTML

---
# application-dev.ymlï¼ˆå¼€å‘ç¯å¢ƒï¼‰
spring:
  thymeleaf:
    cache: false
    
logging:
  level:
    org.thymeleaf: DEBUG

---
# application-prod.ymlï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
spring:
  thymeleaf:
    cache: true
    
logging:
  level:
    org.thymeleaf: WARN
```

**ğŸ”¸ å…³é”®é…ç½®æ£€æŸ¥æ¸…å•**

```
ä¸Šçº¿å‰æ£€æŸ¥ï¼š

âœ… ç¼“å­˜å·²å¯ç”¨ï¼ˆcache: trueï¼‰
âœ… ç¼–ç ç»Ÿä¸€UTF-8
âœ… å¼‚å¸¸å¤„ç†é…ç½®å®Œå–„
âœ… æ—¥å¿—çº§åˆ«è°ƒæ•´ä¸ºWARN
âœ… è°ƒè¯•ä¿¡æ¯å·²ç§»é™¤
âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡ï¼ˆæ¸²æŸ“<200msï¼‰
```

### 8.3 å¸¸è§é—®é¢˜ä¸è§£å†³


**é—®é¢˜1ï¼šä¿®æ”¹æ¨¡æ¿ä¸ç”Ÿæ•ˆ**
```
åŸå› ï¼šç¼“å­˜æœªå…³é—­
è§£å†³ï¼šå¼€å‘ç¯å¢ƒè®¾ç½® cache: false
```

**é—®é¢˜2ï¼šä¸­æ–‡ä¹±ç **
```
åŸå› ï¼šç¼–ç é…ç½®ä¸ä¸€è‡´
è§£å†³ï¼šç»Ÿä¸€è®¾ç½® encoding: UTF-8
```

**é—®é¢˜3ï¼šæ‰¾ä¸åˆ°æ¨¡æ¿**
```
åŸå› ï¼šè·¯å¾„é…ç½®é”™è¯¯
è§£å†³ï¼šæ£€æŸ¥ prefix å’Œ suffix é…ç½®
```

**é—®é¢˜4ï¼šæ€§èƒ½æ…¢**
```
åŸå› ï¼šç¼“å­˜æœªå¼€å¯æˆ–æ¨¡æ¿å¤æ‚
è§£å†³ï¼š
1. ç”Ÿäº§ç¯å¢ƒå¼€å¯ç¼“å­˜
2. ä¼˜åŒ–æ¨¡æ¿é€»è¾‘
3. å‡å°‘è¡¨è¾¾å¼å¤æ‚åº¦
```

### 8.4 æ ¸å¿ƒè®°å¿†


```
ğŸ“Œ é…ç½®ä¸‰åŸåˆ™ï¼š
1. å¼€å‘æ±‚ä¾¿åˆ©ï¼Œå…³ç¼“å­˜å¼€è°ƒè¯•
2. ç”Ÿäº§æ±‚æ€§èƒ½ï¼Œå¼€ç¼“å­˜å°‘æ—¥å¿—
3. ç¼–ç ç»Ÿä¸€UTF-8ï¼Œå¼‚å¸¸å¤„ç†è¦å®Œå–„

ğŸ“Œ çº¿ç¨‹å®‰å…¨ï¼š
å¼•æ“å•ä¾‹å¯å…±äº«ï¼ŒContextç‹¬ç«‹æ¯è¯·æ±‚

ğŸ“Œ æ€§èƒ½ä¼˜åŒ–ï¼š
ç¼“å­˜æ˜¯å…³é”®ï¼Œæ¨¡æ¿è¦ç®€æ´ï¼Œæ—¥å¿—è¦é€‚åº¦

ğŸ“Œ è°ƒè¯•æŠ€å·§ï¼š
æ—¥å¿—çœ‹æµç¨‹ï¼Œå˜é‡è¾“å‡ºæŸ¥å€¼ï¼Œè®¡æ—¶æ‰¾ç“¶é¢ˆ
```

---

**ğŸ¯ å­¦ä¹ å»ºè®®**ï¼š

1. **å…ˆæœ¬åœ°å®è·µ**ï¼šåœ¨å¼€å‘ç¯å¢ƒå°è¯•å„ç§é…ç½®ï¼Œè§‚å¯Ÿæ•ˆæœ
2. **å¯¹æ¯”æµ‹è¯•**ï¼šå¼€å…³ç¼“å­˜å¯¹æ¯”æ€§èƒ½å·®å¼‚
3. **æ¨¡æ‹Ÿå¼‚å¸¸**ï¼šæ•…æ„åˆ¶é€ é”™è¯¯ï¼Œæµ‹è¯•å¼‚å¸¸å¤„ç†
4. **æ€§èƒ½ç›‘æ§**ï¼šä½¿ç”¨è°ƒè¯•æ¨¡å¼æ‰¾å‡ºæ…¢æ¨¡æ¿
5. **æ¸è¿›ä¼˜åŒ–**ï¼šä»åŸºç¡€é…ç½®å¼€å§‹ï¼Œé€æ­¥æ·»åŠ é«˜çº§ç‰¹æ€§

æŒæ¡è¿™äº›é…ç½®ï¼Œå°±èƒ½è®©Thymeleafåœ¨å„ç§ç¯å¢ƒä¸‹ç¨³å®šé«˜æ•ˆè¿è¡Œï¼ğŸš€