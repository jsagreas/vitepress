---
title: 2ã€äº‹åŠ¡æäº¤ä¸å›æ»š
---
## ğŸ“š ç›®å½•

1. [äº‹åŠ¡åŸºæœ¬æ¦‚å¿µ](#1-äº‹åŠ¡åŸºæœ¬æ¦‚å¿µ)
2. [JDBCä¸­çš„äº‹åŠ¡æ§åˆ¶](#2-JDBCä¸­çš„äº‹åŠ¡æ§åˆ¶)
3. [äº‹åŠ¡æäº¤æ“ä½œè¯¦è§£](#3-äº‹åŠ¡æäº¤æ“ä½œè¯¦è§£)
4. [äº‹åŠ¡å›æ»šæœºåˆ¶](#4-äº‹åŠ¡å›æ»šæœºåˆ¶)
5. [å¼‚å¸¸å¤„ç†ä¸äº‹åŠ¡ç®¡ç†](#5-å¼‚å¸¸å¤„ç†ä¸äº‹åŠ¡ç®¡ç†)
6. [äº‹åŠ¡ç®¡ç†æœ€ä½³å®è·µ](#6-äº‹åŠ¡ç®¡ç†æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ äº‹åŠ¡åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“äº‹åŠ¡


**äº‹åŠ¡ç®€å•ç†è§£**ï¼šäº‹åŠ¡å°±åƒæ˜¯å»é“¶è¡ŒåŠç†ä¸šåŠ¡æ—¶çš„"ä¸€å¥—å®Œæ•´æµç¨‹"

```
ç°å®ç”Ÿæ´»ä¸­çš„è½¬è´¦ä¾‹å­ï¼š
å°æ˜è¦ç»™å°çº¢è½¬è´¦1000å…ƒ

å®Œæ•´çš„è½¬è´¦æµç¨‹ï¼š
1. ä»å°æ˜è´¦æˆ·æ‰£é™¤1000å…ƒ
2. å‘å°çº¢è´¦æˆ·å¢åŠ 1000å…ƒ

è¿™ä¸¤æ­¥å¿…é¡»å…¨éƒ¨æˆåŠŸï¼Œæˆ–è€…å…¨éƒ¨å¤±è´¥ï¼
ä¸èƒ½å‡ºç°ï¼šå°æ˜æ‰£äº†é’±ï¼Œå°çº¢å´æ²¡æ”¶åˆ°çš„æƒ…å†µ
```

**ğŸ“‹ äº‹åŠ¡çš„æ ¸å¿ƒç‰¹å¾ï¼ˆACIDï¼‰**
```
ğŸ”¸ åŸå­æ€§ï¼ˆAtomicityï¼‰
å«ä¹‰ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“
æ¯”å–»ï¼šå°±åƒåŸå­ä¸€æ ·ï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸åš

ğŸ”¸ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰  
å«ä¹‰ï¼šæ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€
æ¯”å–»ï¼šè½¬è´¦å‰åï¼Œæ€»é‡‘é¢ä¸å˜

ğŸ”¸ éš”ç¦»æ€§ï¼ˆIsolationï¼‰
å«ä¹‰ï¼šå¤šä¸ªäº‹åŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
æ¯”å–»ï¼šæ¯ä¸ªäººçš„è½¬è´¦æ“ä½œéƒ½æ˜¯ç‹¬ç«‹è¿›è¡Œçš„

ğŸ”¸ æŒä¹…æ€§ï¼ˆDurabilityï¼‰
å«ä¹‰ï¼šäº‹åŠ¡æäº¤åï¼Œæ•°æ®æ°¸ä¹…ä¿å­˜
æ¯”å–»ï¼šè½¬è´¦æˆåŠŸåï¼Œå³ä½¿ç³»ç»Ÿé‡å¯ï¼Œè®°å½•ä»ç„¶å­˜åœ¨
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ç®¡ç†


**ğŸ’¡ æ²¡æœ‰äº‹åŠ¡ç®¡ç†çš„é—®é¢˜**
```
å‡è®¾è½¬è´¦æ“ä½œæ²¡æœ‰äº‹åŠ¡ä¿æŠ¤ï¼š

æ­¥éª¤1ï¼šå°æ˜è´¦æˆ· -1000å…ƒ âœ… æˆåŠŸ
æ­¥éª¤2ï¼šå°çº¢è´¦æˆ· +1000å…ƒ âŒ çªç„¶åœç”µå¤±è´¥

ç»“æœï¼šå°æ˜çš„é’±æ²¡äº†ï¼Œå°çº¢ä¹Ÿæ²¡æ”¶åˆ°é’±ï¼
è¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ç®¡ç†çš„åŸå› 
```

**âœ… æœ‰äº‹åŠ¡ç®¡ç†çš„ä¿æŠ¤**
```
ä½¿ç”¨äº‹åŠ¡ç®¡ç†çš„è½¬è´¦ï¼š

å¼€å§‹äº‹åŠ¡
æ­¥éª¤1ï¼šå°æ˜è´¦æˆ· -1000å…ƒ
æ­¥éª¤2ï¼šå°çº¢è´¦æˆ· +1000å…ƒ

å¦‚æœä¸¤æ­¥éƒ½æˆåŠŸ â†’ æäº¤äº‹åŠ¡ï¼ˆç¡®è®¤æ“ä½œï¼‰
å¦‚æœä»»ä½•ä¸€æ­¥å¤±è´¥ â†’ å›æ»šäº‹åŠ¡ï¼ˆæ’¤é”€æ‰€æœ‰æ“ä½œï¼‰
```

### 1.3 äº‹åŠ¡åœ¨JavaWebä¸­çš„é‡è¦æ€§


**ğŸŒ Webåº”ç”¨ä¸­çš„å…¸å‹äº‹åŠ¡åœºæ™¯**
- **ç”¨æˆ·æ³¨å†Œ**ï¼šåˆ›å»ºç”¨æˆ·ä¿¡æ¯ + åˆå§‹åŒ–ç”¨æˆ·é…ç½® + å‘é€æ¬¢è¿é‚®ä»¶
- **è®¢å•å¤„ç†**ï¼šå‡å°‘åº“å­˜ + åˆ›å»ºè®¢å• + ç”Ÿæˆæ”¯ä»˜è®°å½•  
- **ç§¯åˆ†å…‘æ¢**ï¼šæ‰£é™¤ç§¯åˆ† + å¢åŠ å•†å“ + è®°å½•å…‘æ¢å†å²
- **æ•°æ®å¯¼å…¥**ï¼šæ‰¹é‡æ’å…¥æ•°æ®ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»š

---

## 2. ğŸ”§ JDBCä¸­çš„äº‹åŠ¡æ§åˆ¶


### 2.1 JDBCäº‹åŠ¡æ§åˆ¶åŸºç¡€


**ğŸ”¸ JDBCé»˜è®¤çš„äº‹åŠ¡è¡Œä¸º**
```java
// JDBCé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¡SQLè¯­å¥éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡
// è¿™å«åš"è‡ªåŠ¨æäº¤æ¨¡å¼"ï¼ˆAuto Commit Modeï¼‰

Connection conn = DriverManager.getConnection(url, user, password);
// é»˜è®¤ï¼šconn.setAutoCommit(true);  è‡ªåŠ¨æäº¤å¼€å¯

PreparedStatement stmt = conn.prepareStatement("UPDATE account SET balance = balance - 1000 WHERE id = 1");
stmt.executeUpdate(); // è¿™æ¡è¯­å¥æ‰§è¡Œå®Œç«‹å³æäº¤ï¼Œæ— æ³•å›æ»š
```

**âš™ï¸ æ‰‹åŠ¨äº‹åŠ¡æ§åˆ¶çš„æ ¸å¿ƒæ–¹æ³•**

| æ–¹æ³•å | **ä½œç”¨** | **è¯´æ˜** |
|--------|----------|----------|
| `setAutoCommit(false)` | `å…³é—­è‡ªåŠ¨æäº¤` | `å¼€å¯æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†` |
| `commit()` | `æäº¤äº‹åŠ¡` | `ç¡®è®¤æ‰€æœ‰æ“ä½œï¼Œä½¿å…¶ç”Ÿæ•ˆ` |  
| `rollback()` | `å›æ»šäº‹åŠ¡` | `æ’¤é”€æ‰€æœ‰æ“ä½œï¼Œæ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰` |
| `setAutoCommit(true)` | `æ¢å¤è‡ªåŠ¨æäº¤` | `è¿”å›åˆ°é»˜è®¤æ¨¡å¼` |

### 2.2 äº‹åŠ¡æ§åˆ¶çš„åŸºæœ¬æµç¨‹


**ğŸ“Š äº‹åŠ¡æ‰§è¡Œæµç¨‹å›¾**
```
å¼€å§‹
  â†“
conn.setAutoCommit(false)  â† å…³é—­è‡ªåŠ¨æäº¤
  â†“
æ‰§è¡ŒSQLæ“ä½œ1
  â†“
æ‰§è¡ŒSQLæ“ä½œ2  
  â†“
æ‰§è¡ŒSQLæ“ä½œN
  â†“
æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸï¼Ÿ
  â†“         â†“
 æ˜¯          å¦
  â†“         â†“
commit()   rollback()  â† æäº¤äº‹åŠ¡    å›æ»šäº‹åŠ¡
  â†“         â†“
è®¾ç½®è‡ªåŠ¨æäº¤ä¸ºtrueï¼ˆå¯é€‰ï¼‰
  â†“
ç»“æŸ
```

### 2.3 ç®€å•çš„äº‹åŠ¡æ§åˆ¶ç¤ºä¾‹


```java
public boolean transferMoney(int fromAccount, int toAccount, double amount) {
    Connection conn = null;
    try {
        // è·å–æ•°æ®åº“è¿æ¥
        conn = DBUtil.getConnection();
        
        // ğŸ”¥ å…³é”®æ­¥éª¤1ï¼šå…³é—­è‡ªåŠ¨æäº¤ï¼Œå¼€å¯äº‹åŠ¡ç®¡ç†
        conn.setAutoCommit(false);
        
        // ğŸ”¥ å…³é”®æ­¥éª¤2ï¼šæ‰§è¡Œä¸šåŠ¡æ“ä½œ
        // ä»è½¬å‡ºè´¦æˆ·æ‰£é’±
        String sql1 = "UPDATE account SET balance = balance - ? WHERE id = ?";
        PreparedStatement stmt1 = conn.prepareStatement(sql1);
        stmt1.setDouble(1, amount);
        stmt1.setInt(2, fromAccount);
        stmt1.executeUpdate();
        
        // å‘è½¬å…¥è´¦æˆ·åŠ é’±
        String sql2 = "UPDATE account SET balance = balance + ? WHERE id = ?";
        PreparedStatement stmt2 = conn.prepareStatement(sql2);
        stmt2.setDouble(1, amount);
        stmt2.setInt(2, toAccount);
        stmt2.executeUpdate();
        
        // ğŸ”¥ å…³é”®æ­¥éª¤3ï¼šå¦‚æœæ‰§è¡Œåˆ°è¿™é‡Œï¼Œè¯´æ˜æ‰€æœ‰æ“ä½œæˆåŠŸ
        conn.commit(); // æäº¤äº‹åŠ¡
        return true;
        
    } catch (Exception e) {
        // ğŸ”¥ å…³é”®æ­¥éª¤4ï¼šå‡ºç°å¼‚å¸¸æ—¶å›æ»šäº‹åŠ¡
        if (conn != null) {
            try {
                conn.rollback(); // å›æ»šäº‹åŠ¡
            } catch (SQLException rollbackEx) {
                rollbackEx.printStackTrace();
            }
        }
        e.printStackTrace();
        return false;
    } finally {
        // ğŸ”¥ å…³é”®æ­¥éª¤5ï¼šæ¸…ç†èµ„æº
        if (conn != null) {
            try {
                conn.setAutoCommit(true); // æ¢å¤è‡ªåŠ¨æäº¤
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
```

---

## 3. âœ… äº‹åŠ¡æäº¤æ“ä½œè¯¦è§£


### 3.1 commit()æ–¹æ³•çš„å·¥ä½œåŸç†


**ğŸ”¸ æäº¤äº‹åŠ¡çš„å«ä¹‰**
```
æäº¤äº‹åŠ¡å°±æ˜¯å‘Šè¯‰æ•°æ®åº“ï¼š
"æˆ‘ç¡®è®¤è¿™äº›æ“ä½œéƒ½æ˜¯æ­£ç¡®çš„ï¼Œè¯·æŠŠå®ƒä»¬æ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ä¸­"

æäº¤å‰ï¼šæ‰€æœ‰æ“ä½œéƒ½æ˜¯"ä¸´æ—¶"çš„ï¼Œè¿˜æ²¡æœ‰çœŸæ­£å½±å“æ•°æ®åº“
æäº¤åï¼šæ‰€æœ‰æ“ä½œéƒ½å˜æˆ"æ°¸ä¹…"çš„ï¼Œå…¶ä»–ç¨‹åºå¯ä»¥çœ‹åˆ°è¿™äº›å˜åŒ–
```

**âš¡ commit()æ‰§è¡Œæ—¶å‘ç”Ÿäº†ä»€ä¹ˆ**
```
1. æ•°æ®åº“æ£€æŸ¥æ‰€æœ‰æ“ä½œæ˜¯å¦ç¬¦åˆçº¦æŸæ¡ä»¶
2. å¦‚æœæ£€æŸ¥é€šè¿‡ï¼Œå°†æ‰€æœ‰ä¸´æ—¶æ›´æ”¹å†™å…¥ç£ç›˜
3. é‡Šæ”¾äº‹åŠ¡æœŸé—´æŒæœ‰çš„é”èµ„æº
4. å‘å…¶ä»–äº‹åŠ¡å…¬å¼€è¿™äº›æ›´æ”¹
5. äº‹åŠ¡ç»“æŸï¼Œè¿”å›åˆ°è‡ªåŠ¨æäº¤æ¨¡å¼ï¼ˆå¦‚æœè®¾ç½®çš„è¯ï¼‰
```

### 3.2 ä½•æ—¶è°ƒç”¨commit()


**âœ… åº”è¯¥æäº¤äº‹åŠ¡çš„æƒ…å†µ**
- æ‰€æœ‰ç›¸å…³çš„SQLæ“ä½œéƒ½æ‰§è¡ŒæˆåŠŸ
- ä¸šåŠ¡é€»è¾‘éªŒè¯é€šè¿‡
- æ²¡æœ‰æŠ›å‡ºä»»ä½•å¼‚å¸¸
- æ•°æ®ä¸€è‡´æ€§å¾—åˆ°ä¿è¯

**ğŸ“ æäº¤äº‹åŠ¡çš„æœ€ä½³æ—¶æœº**
```java
public void processOrder(Order order) throws SQLException {
    Connection conn = null;
    try {
        conn = getConnection();
        conn.setAutoCommit(false);
        
        // ä¸šåŠ¡æ“ä½œ1ï¼šå‡å°‘åº“å­˜
        reduceInventory(conn, order.getProductId(), order.getQuantity());
        
        // ä¸šåŠ¡æ“ä½œ2ï¼šåˆ›å»ºè®¢å•è®°å½•  
        createOrderRecord(conn, order);
        
        // ä¸šåŠ¡æ“ä½œ3ï¼šæ›´æ–°ç”¨æˆ·ç§¯åˆ†
        updateUserPoints(conn, order.getUserId(), order.getPoints());
        
        // ğŸ¯ åªæœ‰æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸï¼Œæ‰æäº¤äº‹åŠ¡
        conn.commit();
        System.out.println("è®¢å•å¤„ç†æˆåŠŸï¼Œäº‹åŠ¡å·²æäº¤");
        
    } catch (Exception e) {
        if (conn != null) {
            conn.rollback();
        }
        throw e;
    } finally {
        if (conn != null) {
            conn.setAutoCommit(true);
            conn.close();
        }
    }
}
```

### 3.3 æäº¤äº‹åŠ¡çš„æ³¨æ„äº‹é¡¹


**âš ï¸ æäº¤äº‹åŠ¡æ—¶çš„å¸¸è§è¯¯åŒº**

```java
// âŒ é”™è¯¯åšæ³•ï¼šè¿‡æ—©æäº¤
try {
    conn.setAutoCommit(false);
    
    // æ‰§è¡Œç¬¬ä¸€ä¸ªæ“ä½œ
    stmt1.executeUpdate();
    conn.commit(); // âŒ ä¸åº”è¯¥åœ¨è¿™é‡Œæäº¤
    
    // æ‰§è¡Œç¬¬äºŒä¸ªæ“ä½œ  
    stmt2.executeUpdate();
    conn.commit(); // âŒ è¿™æ ·å°±ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡äº†
    
} catch (Exception e) {
    conn.rollback(); // âŒ æ— æ³•å›æ»šå·²ç»æäº¤çš„æ“ä½œ
}

// âœ… æ­£ç¡®åšæ³•ï¼šç»Ÿä¸€æäº¤
try {
    conn.setAutoCommit(false);
    
    // æ‰§è¡Œæ‰€æœ‰ç›¸å…³æ“ä½œ
    stmt1.executeUpdate();
    stmt2.executeUpdate();
    stmt3.executeUpdate();
    
    // æ‰€æœ‰æ“ä½œæˆåŠŸåï¼Œç»Ÿä¸€æäº¤
    conn.commit();
    
} catch (Exception e) {
    conn.rollback(); // âœ… å¯ä»¥å›æ»šæ‰€æœ‰æ“ä½œ
}
```

**ğŸ” æäº¤åçš„æ•°æ®ç‰¹ç‚¹**
- **æŒä¹…æ€§**ï¼šæ•°æ®å·²æ°¸ä¹…ä¿å­˜ï¼Œç³»ç»Ÿé‡å¯ä¹Ÿä¸ä¼šä¸¢å¤±
- **å¯è§æ€§**ï¼šå…¶ä»–äº‹åŠ¡å¯ä»¥è¯»å–åˆ°è¿™äº›æ›´æ”¹
- **ä¸å¯å›æ»š**ï¼šä¸€æ—¦æäº¤ï¼Œæ— æ³•é€šè¿‡rollback()æ’¤é”€

---

## 4. ğŸ”™ äº‹åŠ¡å›æ»šæœºåˆ¶


### 4.1 rollback()æ–¹æ³•çš„ä½œç”¨


**ğŸ”¸ å›æ»šäº‹åŠ¡çš„å«ä¹‰**
```
å›æ»šäº‹åŠ¡å°±æ˜¯å‘Šè¯‰æ•°æ®åº“ï¼š
"è¿™äº›æ“ä½œæœ‰é—®é¢˜ï¼Œè¯·æŠŠæ‰€æœ‰æ›´æ”¹éƒ½æ’¤é”€ï¼Œ
æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€"

å°±åƒæ¸¸æˆä¸­çš„"è¯»æ¡£"åŠŸèƒ½ï¼Œå›åˆ°ä¹‹å‰çš„å­˜æ¡£ç‚¹
```

**ğŸ¯ å›æ»šçš„å·¥ä½œåŸç†**
```
æ•°æ®åº“å†…éƒ¨æœºåˆ¶ï¼š

1. äº‹åŠ¡å¼€å§‹æ—¶ï¼Œæ•°æ®åº“ä¼šè®°å½•åŸå§‹æ•°æ®çŠ¶æ€
2. æ‰§è¡Œæ“ä½œæ—¶ï¼Œå…ˆä¿å­˜åœ¨ä¸´æ—¶åŒºåŸŸ
3. è°ƒç”¨rollback()æ—¶ï¼Œä¸¢å¼ƒä¸´æ—¶æ•°æ®
4. æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€
5. é‡Šæ”¾æ‰€æœ‰é”èµ„æº
```

### 4.2 è§¦å‘å›æ»šçš„åœºæ™¯


**ğŸš¨ éœ€è¦å›æ»šçš„å…¸å‹æƒ…å†µ**
```
ä¸šåŠ¡å¼‚å¸¸ï¼š
- ä½™é¢ä¸è¶³ï¼ˆè½¬è´¦å¤±è´¥ï¼‰
- åº“å­˜ä¸å¤Ÿï¼ˆä¸‹å•å¤±è´¥ï¼‰  
- æ•°æ®éªŒè¯å¤±è´¥
- ä¸šåŠ¡è§„åˆ™å†²çª

æŠ€æœ¯å¼‚å¸¸ï¼š
- SQLè¯­æ³•é”™è¯¯
- æ•°æ®åº“è¿æ¥ä¸­æ–­
- çº¦æŸè¿åï¼ˆä¸»é”®å†²çªã€å¤–é”®çº¦æŸç­‰ï¼‰
- ç½‘ç»œå¼‚å¸¸
```

### 4.3 å›æ»šæ“ä½œç¤ºä¾‹


```java
public void batchInsertUsers(List<User> users) {
    Connection conn = null;
    try {
        conn = getConnection();
        conn.setAutoCommit(false);
        
        String sql = "INSERT INTO users (name, email, age) VALUES (?, ?, ?)";
        PreparedStatement stmt = conn.prepareStatement(sql);
        
        for (User user : users) {
            // ğŸ’¡ ä¸šåŠ¡éªŒè¯ï¼šæ£€æŸ¥é‚®ç®±æ ¼å¼
            if (!isValidEmail(user.getEmail())) {
                throw new IllegalArgumentException("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼š" + user.getEmail());
            }
            
            // ğŸ’¡ ä¸šåŠ¡éªŒè¯ï¼šæ£€æŸ¥å¹´é¾„èŒƒå›´
            if (user.getAge() < 0 || user.getAge() > 120) {
                throw new IllegalArgumentException("å¹´é¾„ä¸åˆç†ï¼š" + user.getAge());
            }
            
            stmt.setString(1, user.getName());
            stmt.setString(2, user.getEmail());
            stmt.setInt(3, user.getAge());
            stmt.addBatch();
        }
        
        // æ‰¹é‡æ‰§è¡Œ
        stmt.executeBatch();
        
        // ğŸ¯ æ‰€æœ‰ç”¨æˆ·æ•°æ®éƒ½éªŒè¯é€šè¿‡å¹¶æ’å…¥æˆåŠŸï¼Œæäº¤äº‹åŠ¡
        conn.commit();
        System.out.println("æˆåŠŸæ’å…¥ " + users.size() + " ä¸ªç”¨æˆ·");
        
    } catch (Exception e) {
        // ğŸ”¥ ä»»ä½•å¼‚å¸¸éƒ½ä¼šè§¦å‘å›æ»š
        if (conn != null) {
            try {
                conn.rollback();
                System.out.println("æ’å…¥å¤±è´¥ï¼Œå·²å›æ»šæ‰€æœ‰æ“ä½œï¼š" + e.getMessage());
            } catch (SQLException rollbackEx) {
                System.err.println("å›æ»šå¤±è´¥ï¼š" + rollbackEx.getMessage());
            }
        }
        e.printStackTrace();
    } finally {
        // æ¸…ç†èµ„æº
        if (conn != null) {
            try {
                conn.setAutoCommit(true);
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
```

### 4.4 éƒ¨åˆ†å›æ»šï¼šä¿å­˜ç‚¹ï¼ˆSavepointï¼‰


**ğŸ”– ä¿å­˜ç‚¹çš„æ¦‚å¿µ**
```
ä¿å­˜ç‚¹å°±åƒæ¸¸æˆä¸­çš„"ä¸´æ—¶å­˜æ¡£"ï¼š
- å¯ä»¥åœ¨äº‹åŠ¡ä¸­è®¾ç½®å¤šä¸ªä¿å­˜ç‚¹
- å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥å›æ»šåˆ°æŒ‡å®šçš„ä¿å­˜ç‚¹
- è€Œä¸æ˜¯å›æ»šæ•´ä¸ªäº‹åŠ¡
```

```java
public void complexBusinessOperation() {
    Connection conn = null;
    Savepoint savepoint1 = null;
    Savepoint savepoint2 = null;
    
    try {
        conn = getConnection();
        conn.setAutoCommit(false);
        
        // æ­¥éª¤1ï¼šåŸºç¡€æ“ä½œ
        executeBasicOperations(conn);
        savepoint1 = conn.setSavepoint("åŸºç¡€æ“ä½œå®Œæˆ"); // è®¾ç½®ä¿å­˜ç‚¹1
        
        // æ­¥éª¤2ï¼šå¤æ‚æ“ä½œ
        executeComplexOperations(conn);
        savepoint2 = conn.setSavepoint("å¤æ‚æ“ä½œå®Œæˆ"); // è®¾ç½®ä¿å­˜ç‚¹2
        
        // æ­¥éª¤3ï¼šæœ€ç»ˆæ“ä½œ
        executeFinalOperations(conn);
        
        // å…¨éƒ¨æˆåŠŸï¼Œæäº¤äº‹åŠ¡
        conn.commit();
        
    } catch (Exception e) {
        try {
            if (savepoint2 != null) {
                // å›æ»šåˆ°ä¿å­˜ç‚¹2ï¼Œåªæ’¤é”€æœ€ç»ˆæ“ä½œ
                conn.rollback(savepoint2);
                System.out.println("å·²å›æ»šåˆ°å¤æ‚æ“ä½œå®ŒæˆçŠ¶æ€");
            } else if (savepoint1 != null) {
                // å›æ»šåˆ°ä¿å­˜ç‚¹1ï¼Œæ’¤é”€å¤æ‚æ“ä½œå’Œæœ€ç»ˆæ“ä½œ
                conn.rollback(savepoint1);
                System.out.println("å·²å›æ»šåˆ°åŸºç¡€æ“ä½œå®ŒæˆçŠ¶æ€");
            } else {
                // å›æ»šæ•´ä¸ªäº‹åŠ¡
                conn.rollback();
                System.out.println("å·²å›æ»šæ•´ä¸ªäº‹åŠ¡");
            }
        } catch (SQLException rollbackEx) {
            rollbackEx.printStackTrace();
        }
    } finally {
        if (conn != null) {
            try {
                conn.setAutoCommit(true);
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
```

---

## 5. ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†ä¸äº‹åŠ¡ç®¡ç†


### 5.1 å¼‚å¸¸å¤„ç†çš„é‡è¦æ€§


**ğŸ’¥ æ²¡æœ‰æ­£ç¡®å¼‚å¸¸å¤„ç†çš„åæœ**
```
å¸¸è§é—®é¢˜ï¼š
1. äº‹åŠ¡æ²¡æœ‰å›æ»šï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´
2. è¿æ¥æ²¡æœ‰å…³é—­ï¼Œå¯¼è‡´è¿æ¥æ± è€—å°½  
3. è‡ªåŠ¨æäº¤æ²¡æœ‰æ¢å¤ï¼Œå½±å“åç»­æ“ä½œ
4. å¼‚å¸¸ä¿¡æ¯ä¸¢å¤±ï¼Œæ— æ³•æ’æŸ¥é—®é¢˜
```

### 5.2 æ ‡å‡†çš„å¼‚å¸¸å¤„ç†æ¨¡å¼


**ğŸ”¥ try-catch-finallyæ¨¡å¼**
```java
public void standardTransactionPattern() {
    Connection conn = null;
    PreparedStatement stmt = null;
    
    try {
        // ğŸ”¸ æ­¥éª¤1ï¼šè·å–èµ„æº
        conn = getConnection();
        conn.setAutoCommit(false);
        
        // ğŸ”¸ æ­¥éª¤2ï¼šæ‰§è¡Œä¸šåŠ¡é€»è¾‘
        stmt = conn.prepareStatement("UPDATE ...");
        // ... æ‰§è¡Œå„ç§æ•°æ®åº“æ“ä½œ
        
        // ğŸ”¸ æ­¥éª¤3ï¼šæäº¤äº‹åŠ¡
        conn.commit();
        
    } catch (SQLException e) {
        // ğŸ”¸ æ­¥éª¤4ï¼šå¤„ç†SQLå¼‚å¸¸
        handleSQLException(conn, e);
    } catch (BusinessException e) {
        // ğŸ”¸ æ­¥éª¤5ï¼šå¤„ç†ä¸šåŠ¡å¼‚å¸¸
        handleBusinessException(conn, e);
    } catch (Exception e) {
        // ğŸ”¸ æ­¥éª¤6ï¼šå¤„ç†å…¶ä»–å¼‚å¸¸
        handleGeneralException(conn, e);
    } finally {
        // ğŸ”¸ æ­¥éª¤7ï¼šæ¸…ç†èµ„æºï¼ˆæ— è®ºæ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œï¼‰
        cleanupResources(conn, stmt);
    }
}

private void handleSQLException(Connection conn, SQLException e) {
    System.err.println("æ•°æ®åº“æ“ä½œå¤±è´¥ï¼š" + e.getMessage());
    if (conn != null) {
        try {
            conn.rollback();
            System.out.println("å·²å›æ»šäº‹åŠ¡");
        } catch (SQLException rollbackEx) {
            System.err.println("å›æ»šå¤±è´¥ï¼š" + rollbackEx.getMessage());
        }
    }
}

private void cleanupResources(Connection conn, PreparedStatement stmt) {
    if (stmt != null) {
        try {
            stmt.close();
        } catch (SQLException e) {
            System.err.println("å…³é—­Statementå¤±è´¥ï¼š" + e.getMessage());
        }
    }
    
    if (conn != null) {
        try {
            conn.setAutoCommit(true); // æ¢å¤è‡ªåŠ¨æäº¤
            conn.close();
        } catch (SQLException e) {
            System.err.println("å…³é—­Connectionå¤±è´¥ï¼š" + e.getMessage());
        }
    }
}
```

### 5.3 å¼‚å¸¸åˆ†ç±»å¤„ç†ç­–ç•¥


**ğŸ“Š ä¸åŒå¼‚å¸¸çš„å¤„ç†ç­–ç•¥**

| å¼‚å¸¸ç±»å‹ | **å¤„ç†ç­–ç•¥** | **æ˜¯å¦å›æ»š** | **ç¤ºä¾‹** |
|----------|-------------|-------------|----------|
| `SQLException` | `è®°å½•é”™è¯¯ï¼Œå›æ»šäº‹åŠ¡` | `æ˜¯` | `çº¦æŸè¿åã€è¿æ¥æ–­å¼€` |
| `BusinessException` | `è®°å½•ä¸šåŠ¡é”™è¯¯ï¼Œå›æ»š` | `æ˜¯` | `ä½™é¢ä¸è¶³ã€æƒé™ä¸å¤Ÿ` |
| `RuntimeException` | `è®°å½•ç³»ç»Ÿé”™è¯¯ï¼Œå›æ»š` | `æ˜¯` | `ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œ` |
| `IOException` | `è®°å½•IOé”™è¯¯ï¼Œå›æ»š` | `æ˜¯` | `æ–‡ä»¶è¯»å†™å¤±è´¥` |

### 5.4 äº‹åŠ¡å®Œæ•´æ€§ä¿è¯æœºåˆ¶


**ğŸ›¡ï¸ ç¡®ä¿äº‹åŠ¡å®Œæ•´æ€§çš„æ£€æŸ¥ç‚¹**
```java
public class TransactionManager {
    
    public void executeWithTransaction(TransactionCallback callback) {
        Connection conn = null;
        boolean originalAutoCommit = true;
        
        try {
            // ğŸ” æ£€æŸ¥ç‚¹1ï¼šè·å–è¿æ¥
            conn = getConnection();
            if (conn == null) {
                throw new SQLException("æ— æ³•è·å–æ•°æ®åº“è¿æ¥");
            }
            
            // ğŸ” æ£€æŸ¥ç‚¹2ï¼šä¿å­˜åŸå§‹çŠ¶æ€
            originalAutoCommit = conn.getAutoCommit();
            conn.setAutoCommit(false);
            
            // ğŸ” æ£€æŸ¥ç‚¹3ï¼šæ‰§è¡Œä¸šåŠ¡é€»è¾‘
            TransactionResult result = callback.doInTransaction(conn);
            
            // ğŸ” æ£€æŸ¥ç‚¹4ï¼šéªŒè¯ç»“æœ
            if (result.isSuccess()) {
                conn.commit();
                System.out.println("äº‹åŠ¡æäº¤æˆåŠŸ");
            } else {
                conn.rollback();
                System.out.println("ä¸šåŠ¡éªŒè¯å¤±è´¥ï¼Œäº‹åŠ¡å·²å›æ»šï¼š" + result.getErrorMessage());
            }
            
        } catch (Exception e) {
            // ğŸ” æ£€æŸ¥ç‚¹5ï¼šå¼‚å¸¸å¤„ç†
            rollbackSafely(conn);
            throw new TransactionException("äº‹åŠ¡æ‰§è¡Œå¤±è´¥", e);
        } finally {
            // ğŸ” æ£€æŸ¥ç‚¹6ï¼šèµ„æºæ¸…ç†
            restoreConnectionState(conn, originalAutoCommit);
        }
    }
    
    private void rollbackSafely(Connection conn) {
        if (conn != null) {
            try {
                if (!conn.isClosed()) {
                    conn.rollback();
                }
            } catch (SQLException e) {
                System.err.println("äº‹åŠ¡å›æ»šå¤±è´¥ï¼š" + e.getMessage());
            }
        }
    }
    
    private void restoreConnectionState(Connection conn, boolean originalAutoCommit) {
        if (conn != null) {
            try {
                if (!conn.isClosed()) {
                    conn.setAutoCommit(originalAutoCommit);
                    conn.close();
                }
            } catch (SQLException e) {
                System.err.println("æ¢å¤è¿æ¥çŠ¶æ€å¤±è´¥ï¼š" + e.getMessage());
            }
        }
    }
}

// ä¸šåŠ¡å›è°ƒæ¥å£
interface TransactionCallback {
    TransactionResult doInTransaction(Connection conn) throws Exception;
}

// äº‹åŠ¡ç»“æœå°è£…
class TransactionResult {
    private boolean success;
    private String errorMessage;
    
    // æ„é€ æ–¹æ³•ã€getterã€setter...
}
```

---

## 6. ğŸ† äº‹åŠ¡ç®¡ç†æœ€ä½³å®è·µ


### 6.1 äº‹åŠ¡è¾¹ç•Œè®¾è®¡åŸåˆ™


**ğŸ¯ åˆç†çš„äº‹åŠ¡èŒƒå›´**
```
âœ… å¥½çš„äº‹åŠ¡è®¾è®¡ï¼š
- äº‹åŠ¡èŒƒå›´å°½å¯èƒ½å°
- åŒ…å«å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘
- é¿å…é•¿æ—¶é—´æŒæœ‰é”
- å‡å°‘ç½‘ç»œè°ƒç”¨

âŒ ä¸å¥½çš„äº‹åŠ¡è®¾è®¡ï¼š
- äº‹åŠ¡èŒƒå›´è¿‡å¤§ï¼Œå½±å“æ€§èƒ½
- äº‹åŠ¡ä¸­åŒ…å«éæ•°æ®åº“æ“ä½œ
- äº‹åŠ¡åµŒå¥—è¿‡æ·±
- é•¿æ—¶é—´ä¸æäº¤æˆ–å›æ»š
```

### 6.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**âš¡ äº‹åŠ¡æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**

```java
public class TransactionOptimization {
    
    // âœ… ä¼˜åŒ–ç­–ç•¥1ï¼šæ‰¹é‡æ“ä½œ
    public void batchOperation(List<Product> products) {
        Connection conn = null;
        try {
            conn = getConnection();
            conn.setAutoCommit(false);
            
            // ä½¿ç”¨æ‰¹é‡æ“ä½œæé«˜æ€§èƒ½
            String sql = "INSERT INTO products (name, price) VALUES (?, ?)";
            PreparedStatement stmt = conn.prepareStatement(sql);
            
            for (Product product : products) {
                stmt.setString(1, product.getName());
                stmt.setBigDecimal(2, product.getPrice());
                stmt.addBatch(); // æ·»åŠ åˆ°æ‰¹æ¬¡ä¸­
            }
            
            stmt.executeBatch(); // ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰æ“ä½œ
            conn.commit();
            
        } catch (Exception e) {
            rollback(conn);
        } finally {
            cleanup(conn);
        }
    }
    
    // âœ… ä¼˜åŒ–ç­–ç•¥2ï¼šé¢„ç¼–è¯‘è¯­å¥é‡ç”¨
    public void efficientUpdate(List<Order> orders) {
        Connection conn = null;
        PreparedStatement stmt = null;
        
        try {
            conn = getConnection();
            conn.setAutoCommit(false);
            
            // é‡ç”¨PreparedStatement
            String sql = "UPDATE orders SET status = ? WHERE id = ?";
            stmt = conn.prepareStatement(sql);
            
            for (Order order : orders) {
                stmt.setString(1, order.getStatus());
                stmt.setLong(2, order.getId());
                stmt.executeUpdate();
            }
            
            conn.commit();
            
        } catch (Exception e) {
            rollback(conn);
        } finally {
            closeStatement(stmt);
            cleanup(conn);
        }
    }
    
    // âœ… ä¼˜åŒ–ç­–ç•¥3ï¼šé€‚å½“çš„éš”ç¦»çº§åˆ«
    public void setAppropriateIsolationLevel(Connection conn, int level) throws SQLException {
        // æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®åˆé€‚çš„éš”ç¦»çº§åˆ«
        switch (level) {
            case Connection.TRANSACTION_READ_UNCOMMITTED:
                // è¯»æœªæäº¤ï¼šæ€§èƒ½æœ€é«˜ï¼Œä½†å¯èƒ½è„è¯»
                break;
            case Connection.TRANSACTION_READ_COMMITTED:
                // è¯»å·²æäº¤ï¼šé¿å…è„è¯»ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯
                break;
            case Connection.TRANSACTION_REPEATABLE_READ:
                // å¯é‡å¤è¯»ï¼šé¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»
                break;
            case Connection.TRANSACTION_SERIALIZABLE:
                // ä¸²è¡ŒåŒ–ï¼šæœ€é«˜ä¸€è‡´æ€§ï¼Œä½†æ€§èƒ½æœ€ä½
                break;
        }
        conn.setTransactionIsolation(level);
    }
}
```

### 6.3 äº‹åŠ¡ç›‘æ§ä¸æ—¥å¿—


**ğŸ“Š äº‹åŠ¡æ‰§è¡Œç›‘æ§**
```java
public class TransactionMonitor {
    
    public void executeWithMonitoring(String operationName, Runnable operation) {
        long startTime = System.currentTimeMillis();
        boolean success = false;
        
        try {
            System.out.println("ğŸ”„ å¼€å§‹æ‰§è¡Œäº‹åŠ¡ï¼š" + operationName);
            
            operation.run();
            success = true;
            
            long duration = System.currentTimeMillis() - startTime;
            System.out.println("âœ… äº‹åŠ¡æ‰§è¡ŒæˆåŠŸï¼š" + operationName + 
                             "ï¼Œè€—æ—¶ï¼š" + duration + "ms");
            
        } catch (Exception e) {
            long duration = System.currentTimeMillis() - startTime;
            System.err.println("âŒ äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼š" + operationName + 
                             "ï¼Œè€—æ—¶ï¼š" + duration + "msï¼Œé”™è¯¯ï¼š" + e.getMessage());
            throw e;
        }
    }
    
    // äº‹åŠ¡ç»Ÿè®¡ä¿¡æ¯
    public void logTransactionStats() {
        System.out.println("ğŸ“ˆ äº‹åŠ¡ç»Ÿè®¡ä¿¡æ¯ï¼š");
        System.out.println("- æ€»äº‹åŠ¡æ•°ï¼š" + getTotalTransactions());
        System.out.println("- æˆåŠŸäº‹åŠ¡ï¼š" + getSuccessfulTransactions());
        System.out.println("- å¤±è´¥äº‹åŠ¡ï¼š" + getFailedTransactions());
        System.out.println("- å¹³å‡æ‰§è¡Œæ—¶é—´ï¼š" + getAverageExecutionTime() + "ms");
    }
}
```

### 6.4 å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ


**âš ï¸ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•**

```java
public class TransactionPitfalls {
    
    // âŒ é™·é˜±1ï¼šå¿˜è®°å…³é—­è‡ªåŠ¨æäº¤
    public void badExample1() {
        Connection conn = getConnection();
        // conn.setAutoCommit(false); // å¿˜è®°è®¾ç½®
        
        // æ‰§è¡Œå¤šä¸ªæ“ä½œ...
        // æ¯ä¸ªæ“ä½œéƒ½ä¼šè‡ªåŠ¨æäº¤ï¼Œæ— æ³•å›æ»šï¼
    }
    
    // âœ… æ­£ç¡®åšæ³•
    public void goodExample1() {
        Connection conn = null;
        try {
            conn = getConnection();
            conn.setAutoCommit(false); // âœ… å¿…é¡»è®¾ç½®
            
            // æ‰§è¡Œæ“ä½œ...
            conn.commit();
        } catch (Exception e) {
            rollback(conn);
        } finally {
            cleanup(conn);
        }
    }
    
    // âŒ é™·é˜±2ï¼šåœ¨finallyä¸­æŠ›å‡ºå¼‚å¸¸
    public void badExample2() {
        Connection conn = null;
        try {
            // ä¸šåŠ¡æ“ä½œ...
        } catch (Exception e) {
            // å¤„ç†å¼‚å¸¸...
        } finally {
            conn.close(); // âŒ å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œæ©ç›–åŸå§‹å¼‚å¸¸
        }
    }
    
    // âœ… æ­£ç¡®åšæ³•
    public void goodExample2() {
        Connection conn = null;
        try {
            // ä¸šåŠ¡æ“ä½œ...
        } catch (Exception e) {
            // å¤„ç†å¼‚å¸¸...
        } finally {
            if (conn != null) {
                try {
                    conn.close(); // âœ… æ­£ç¡®å¤„ç†å…³é—­å¼‚å¸¸
                } catch (SQLException closeEx) {
                    System.err.println("å…³é—­è¿æ¥å¤±è´¥ï¼š" + closeEx.getMessage());
                    // ä¸é‡æ–°æŠ›å‡ºå¼‚å¸¸
                }
            }
        }
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ äº‹åŠ¡ACIDç‰¹æ€§ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§
ğŸ”¸ JDBCäº‹åŠ¡æ§åˆ¶ï¼šsetAutoCommit(false)ã€commit()ã€rollback()
ğŸ”¸ å¼‚å¸¸å¤„ç†æ¨¡å¼ï¼štry-catch-finallyæ ‡å‡†æ¨¡å¼
ğŸ”¸ äº‹åŠ¡è¾¹ç•Œè®¾è®¡ï¼šåˆç†çš„äº‹åŠ¡èŒƒå›´å’Œæ€§èƒ½ä¼˜åŒ–
ğŸ”¸ èµ„æºç®¡ç†ï¼šè¿æ¥çŠ¶æ€æ¢å¤å’Œèµ„æºæ¸…ç†
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ äº‹åŠ¡çš„æœ¬è´¨ç†è§£**
```
äº‹åŠ¡å°±æ˜¯æ•°æ®åº“æ“ä½œçš„"å®‰å…¨ä¿æŠ¤ä¼"ï¼š
- è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼ˆcommitï¼‰
- è¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼ˆrollbackï¼‰  
- ç»ä¸å…è®¸éƒ¨åˆ†æˆåŠŸã€éƒ¨åˆ†å¤±è´¥çš„æƒ…å†µ
```

**ğŸ”¹ å¼‚å¸¸å¤„ç†çš„é‡è¦æ€§**
```
æ²¡æœ‰æ­£ç¡®çš„å¼‚å¸¸å¤„ç† = æ²¡æœ‰äº‹åŠ¡ä¿æŠ¤
å¼‚å¸¸å¤„ç†ä¸æ˜¯å¯é€‰çš„ï¼Œè€Œæ˜¯å¿…é¡»çš„
æ¯ä¸ªå¯èƒ½å‡ºé”™çš„åœ°æ–¹éƒ½è¦è€ƒè™‘åˆ°
```

**ğŸ”¹ æ€§èƒ½ä¸ä¸€è‡´æ€§çš„å¹³è¡¡**
```
äº‹åŠ¡æä¾›äº†æ•°æ®ä¸€è‡´æ€§ä¿è¯
ä½†ä¹Ÿå¸¦æ¥äº†æ€§èƒ½å¼€é”€
éœ€è¦åœ¨ä¸šåŠ¡éœ€æ±‚å’Œæ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡
```

### 7.3 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ“ äº‹åŠ¡ä½¿ç”¨æ£€æŸ¥æ¸…å•**
- [ ] æ˜¯å¦æ­£ç¡®å…³é—­äº†è‡ªåŠ¨æäº¤ï¼Ÿ
- [ ] æ˜¯å¦åœ¨æ‰€æœ‰æ“ä½œå®Œæˆåæ‰æäº¤ï¼Ÿ
- [ ] æ˜¯å¦åœ¨catchå—ä¸­è¿›è¡Œäº†å›æ»šï¼Ÿ
- [ ] æ˜¯å¦åœ¨finallyå—ä¸­æ¸…ç†äº†èµ„æºï¼Ÿ
- [ ] æ˜¯å¦æ¢å¤äº†è¿æ¥çš„è‡ªåŠ¨æäº¤çŠ¶æ€ï¼Ÿ
- [ ] æ˜¯å¦æ·»åŠ äº†é€‚å½“çš„æ—¥å¿—è®°å½•ï¼Ÿ

**ğŸ¯ æœ€ä½³å®è·µæ€»ç»“**
1. **äº‹åŠ¡èŒƒå›´æœ€å°åŒ–**ï¼šåªåŒ…å«å¿…è¦çš„æ•°æ®åº“æ“ä½œ
2. **å¼‚å¸¸å¤„ç†å®Œæ•´**ï¼šè€ƒè™‘æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸æƒ…å†µ
3. **èµ„æºç®¡ç†ä¸¥æ ¼**ï¼šç¡®ä¿è¿æ¥å’Œè¯­å¥å¯¹è±¡æ­£ç¡®å…³é—­
4. **ç›‘æ§æ—¥å¿—å®Œå–„**ï¼šè®°å½•äº‹åŠ¡æ‰§è¡Œæƒ…å†µï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
5. **æ€§èƒ½ä¼˜åŒ–é€‚å½“**ï¼šä½¿ç”¨æ‰¹é‡æ“ä½œã€åˆé€‚çš„éš”ç¦»çº§åˆ«

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- äº‹åŠ¡ç®¡ç†æ˜¯æ•°æ®ä¸€è‡´æ€§çš„åŸºçŸ³
- commit()ç¡®è®¤æ“ä½œï¼Œrollback()æ’¤é”€æ“ä½œ
- å¼‚å¸¸å¤„ç†å†³å®šäº†äº‹åŠ¡ç®¡ç†çš„å¯é æ€§
- try-catch-finallyæ˜¯æ ‡å‡†çš„äº‹åŠ¡å¤„ç†æ¨¡å¼
- æ€§èƒ½ä¼˜åŒ–è¦åœ¨ä¿è¯ä¸€è‡´æ€§çš„å‰æä¸‹è¿›è¡Œ