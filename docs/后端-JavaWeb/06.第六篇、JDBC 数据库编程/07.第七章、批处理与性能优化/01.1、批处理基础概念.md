---
title: 1ã€æ‰¹å¤„ç†åŸºç¡€æ¦‚å¿µ
---
## ğŸ“š ç›®å½•

1. [æ‰¹å¤„ç†åŸºç¡€æ¦‚å¿µ](#1-æ‰¹å¤„ç†åŸºç¡€æ¦‚å¿µ)
2. [æ‰¹å¤„ç†æ€§èƒ½ä¼˜åŠ¿åˆ†æ](#2-æ‰¹å¤„ç†æ€§èƒ½ä¼˜åŠ¿åˆ†æ)
3. [æ‰¹å¤„ç†æ ¸å¿ƒæ–¹æ³•è¯¦è§£](#3-æ‰¹å¤„ç†æ ¸å¿ƒæ–¹æ³•è¯¦è§£)
4. [æ‰¹å¤„ç†å®ç°æ­¥éª¤](#4-æ‰¹å¤„ç†å®ç°æ­¥éª¤)
5. [æ‰¹å¤„ç†æœ€ä½³å®è·µ](#5-æ‰¹å¤„ç†æœ€ä½³å®è·µ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ‰¹å¤„ç†åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ‰¹å¤„ç†


**ç”Ÿæ´»ä¸­çš„æ‰¹å¤„ç†**ï¼š
æƒ³è±¡ä½ è¦å¯„100å°ä¿¡ï¼Œä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼š
- **æ™®é€šæ–¹å¼**ï¼šå†™ä¸€å°ä¿¡å°±è·‘ä¸€è¶Ÿé‚®å±€ï¼Œæ¥å›100æ¬¡
- **æ‰¹å¤„ç†æ–¹å¼**ï¼šå†™å®Œ100å°ä¿¡ä¸€èµ·æ‹¿åˆ°é‚®å±€ï¼Œåªè·‘ä¸€è¶Ÿ

JDBCæ‰¹å¤„ç†å°±æ˜¯è¿™ä¸ªé“ç†ï¼

```
ğŸ”¸ æ‰¹å¤„ç†å®šä¹‰ï¼š
å°†å¤šä¸ªSQLè¯­å¥æ‰“åŒ…æˆä¸€æ‰¹ï¼Œä¸€æ¬¡æ€§å‘é€ç»™æ•°æ®åº“æ‰§è¡Œ
è€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡åœ°å•ç‹¬æ‰§è¡Œ

ğŸ”¸ æ ¸å¿ƒæ€æƒ³ï¼š
å‡å°‘ç½‘ç»œé€šä¿¡æ¬¡æ•° = æå‡æ‰§è¡Œæ•ˆç‡
```

### 1.2 æ‰¹å¤„ç† vs æ™®é€šæ‰§è¡Œ


**ğŸ“Š æ‰§è¡Œæ–¹å¼å¯¹æ¯”**ï¼š

```
æ™®é€šæ‰§è¡Œï¼ˆé€æ¡æ‰§è¡Œï¼‰ï¼š
Javaç¨‹åº              æ•°æ®åº“æœåŠ¡å™¨
   |                      |
   |--SQL1--------------->|
   |<--ç»“æœ1---------------|
   |--SQL2--------------->|
   |<--ç»“æœ2---------------|
   |--SQL3--------------->|
   |<--ç»“æœ3---------------|

ç½‘ç»œé€šä¿¡ï¼š3æ¬¡å¾€è¿”
æ‰§è¡Œæ—¶é—´ï¼šé•¿

æ‰¹å¤„ç†æ‰§è¡Œï¼š
Javaç¨‹åº              æ•°æ®åº“æœåŠ¡å™¨
   |                      |
   |--[SQL1,SQL2,SQL3]--->|
   |<--[ç»“æœ1,2,3]---------|

ç½‘ç»œé€šä¿¡ï¼š1æ¬¡å¾€è¿”  
æ‰§è¡Œæ—¶é—´ï¼šçŸ­
```

### 1.3 æ‰¹å¤„ç†çš„é€‚ç”¨åœºæ™¯


**âœ… ä»€ä¹ˆæ—¶å€™ç”¨æ‰¹å¤„ç†**ï¼š
```
1. æ’å…¥å¤§é‡æ•°æ®
   â€¢ å¯¼å…¥Excelæ•°æ®åˆ°æ•°æ®åº“
   â€¢ æ‰¹é‡æ³¨å†Œç”¨æˆ·ä¿¡æ¯
   â€¢ æ—¥å¿—æ•°æ®æ‰¹é‡å…¥åº“

2. æ‰¹é‡æ›´æ–°æ“ä½œ
   â€¢ æ‰¹é‡ä¿®æ”¹ç”¨æˆ·çŠ¶æ€
   â€¢ æ‰¹é‡è°ƒæ•´å•†å“ä»·æ ¼
   â€¢ æ‰¹é‡æ›´æ–°è®¢å•ä¿¡æ¯

3. æ‰¹é‡åˆ é™¤æ“ä½œ  
   â€¢ æ¸…ç†è¿‡æœŸæ•°æ®
   â€¢ æ‰¹é‡åˆ é™¤åƒåœ¾ä¿¡æ¯
   â€¢ å®šæœŸæ•°æ®æ¸…ç†
```

**âŒ ä»€ä¹ˆæ—¶å€™ä¸ç”¨æ‰¹å¤„ç†**ï¼š
```
1. å•æ¡è®°å½•æ“ä½œ
   â€¢ ç”¨æˆ·ç™»å½•éªŒè¯
   â€¢ æŸ¥è¯¢ä¸ªäººä¿¡æ¯
   â€¢ å•ä¸ªå•†å“æŸ¥è¯¢

2. éœ€è¦ç«‹å³çœ‹åˆ°ç»“æœçš„æ“ä½œ
   â€¢ è½¬è´¦æ“ä½œï¼ˆéœ€è¦ç«‹å³ç¡®è®¤ï¼‰
   â€¢ å®æ—¶æ•°æ®æ›´æ–°
   â€¢ äº¤äº’å¼æŸ¥è¯¢

3. å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
   â€¢ éœ€è¦æ ¹æ®æ¯æ¡è®°å½•çš„ç»“æœå†³å®šä¸‹ä¸€æ­¥
   â€¢ æœ‰å¤æ‚çš„æ¡ä»¶åˆ¤æ–­
   â€¢ éœ€è¦äº‹åŠ¡å›æ»šæ§åˆ¶
```

---

## 2. âš¡ æ‰¹å¤„ç†æ€§èƒ½ä¼˜åŠ¿åˆ†æ


### 2.1 æ€§èƒ½æå‡åŸç†


**ğŸš€ ä¸ºä»€ä¹ˆæ‰¹å¤„ç†æ›´å¿«ï¼Ÿ**

æƒ³è±¡ä¸€ä¸‹å¿«é€’é…é€ï¼š
- **å•ä»¶é…é€**ï¼šæ¯ä»¶åŒ…è£¹å•ç‹¬é€ä¸€æ¬¡ï¼Œå¸æœºè¦è·‘å¾ˆå¤šè¶Ÿ
- **æ‰¹é‡é…é€**ï¼šæŠŠåŒä¸€ç‰‡åŒºçš„åŒ…è£¹è£…æ»¡è½¦ä¸€èµ·é€ï¼Œå¸æœºåªè·‘ä¸€è¶Ÿ

```
æ€§èƒ½æå‡çš„æ ¹æœ¬åŸå› ï¼š
1. ğŸŒ ç½‘ç»œå¼€é”€å‡å°‘
   â€¢ å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°
   â€¢ é™ä½ç½‘ç»œå»¶è¿Ÿå½±å“
   â€¢ æé«˜ç½‘ç»œåˆ©ç”¨ç‡

2. ğŸ’¾ æ•°æ®åº“å¤„ç†æ•ˆç‡æå‡
   â€¢ å‡å°‘SQLè§£ææ¬¡æ•°
   â€¢ ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’å¤ç”¨
   â€¢ å‡å°‘é”ç«äº‰

3. ğŸ”„ ç³»ç»Ÿèµ„æºèŠ‚çœ
   â€¢ å‡å°‘ç³»ç»Ÿè°ƒç”¨
   â€¢ é™ä½CPUä¸Šä¸‹æ–‡åˆ‡æ¢
   â€¢ æé«˜å†…å­˜ä½¿ç”¨æ•ˆç‡
```

### 2.2 æ€§èƒ½å¯¹æ¯”å®ä¾‹


**ğŸ“ˆ å®é™…æ€§èƒ½æ•°æ®**ï¼š

```
åœºæ™¯ï¼šæ’å…¥1000æ¡ç”¨æˆ·è®°å½•

æ™®é€šæ–¹å¼ï¼ˆé€æ¡æ’å…¥ï¼‰ï¼š
æ‰§è¡Œæ—¶é—´ï¼šçº¦ 10-15 ç§’
ç½‘ç»œå¾€è¿”ï¼š1000 æ¬¡
æ•°æ®åº“è¿æ¥å ç”¨ï¼šæŒç»­ 10-15 ç§’

æ‰¹å¤„ç†æ–¹å¼ï¼š
æ‰§è¡Œæ—¶é—´ï¼šçº¦ 1-2 ç§’
ç½‘ç»œå¾€è¿”ï¼š1 æ¬¡
æ•°æ®åº“è¿æ¥å ç”¨ï¼š1-2 ç§’

æ€§èƒ½æå‡ï¼š5-10å€ ğŸš€
```

### 2.3 ç½‘ç»œé€šä¿¡åˆ†æ


**ğŸ” ç½‘ç»œå¼€é”€è¯¦è§£**ï¼š

```
ç½‘ç»œå»¶è¿Ÿå½±å“ï¼š
å‡è®¾ç½‘ç»œå»¶è¿Ÿ 50msï¼ˆæ¯«ç§’ï¼‰

æ™®é€šæ–¹å¼æ‰§è¡Œ1000æ¡SQLï¼š
â€¢ æ¯æ¡SQLç­‰å¾…æ—¶é—´ï¼š50ms
â€¢ æ€»ç­‰å¾…æ—¶é—´ï¼š50ms Ã— 1000 = 50ç§’
â€¢ å®é™…æ‰§è¡Œæ—¶é—´å¯èƒ½åªéœ€è¦å‡ ç§’
â€¢ å¤§éƒ¨åˆ†æ—¶é—´æµªè´¹åœ¨ç½‘ç»œç­‰å¾…ä¸Šï¼

æ‰¹å¤„ç†æ–¹å¼ï¼š
â€¢ ç½‘ç»œç­‰å¾…æ—¶é—´ï¼š50ms Ã— 1 = 50ms
â€¢ èŠ‚çœæ—¶é—´ï¼š49.95ç§’ âš¡
```

**ğŸ’¡ å…³é”®ç†è§£**ï¼š
ç½‘ç»œå»¶è¿Ÿæ˜¯æ‰¹å¤„ç†æ€§èƒ½æå‡çš„ä¸»è¦åŸå› ã€‚å³ä½¿æ•°æ®åº“åœ¨æœ¬åœ°ï¼Œæ‰¹å¤„ç†ä»ç„¶æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºå‡å°‘äº†ç³»ç»Ÿè°ƒç”¨å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚

---

## 3. ğŸ› ï¸ æ‰¹å¤„ç†æ ¸å¿ƒæ–¹æ³•è¯¦è§£


### 3.1 addBatch() æ·»åŠ æ–¹æ³•


**ğŸ“ addBatch() æ˜¯ä»€ä¹ˆï¼Ÿ**
æƒ³è±¡ä½ åœ¨æ•´ç†è¦å¯„çš„ä¿¡ä»¶ï¼ŒaddBatch()å°±æ˜¯æŠŠæ¯å°ä¿¡æ”¾åˆ°é‚®åŒ…é‡Œçš„åŠ¨ä½œã€‚

```java
// åŸºæœ¬ä½¿ç”¨è¯­æ³•
PreparedStatement pstmt = conn.prepareStatement("INSERT INTO users(name, age) VALUES(?, ?)");

// æ·»åŠ ç¬¬ä¸€æ‰¹æ•°æ®åˆ°"é‚®åŒ…"
pstmt.setString(1, "å¼ ä¸‰");
pstmt.setInt(2, 25);
pstmt.addBatch();  // ğŸ“¦ æŠŠè¿™æ¡è®°å½•åŠ å…¥æ‰¹å¤„ç†

// æ·»åŠ ç¬¬äºŒæ‰¹æ•°æ®
pstmt.setString(1, "æå››");
pstmt.setInt(2, 30);
pstmt.addBatch();  // ğŸ“¦ å†åŠ ä¸€æ¡

// å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤š...
```

**ğŸ”‘ addBatch() æ ¸å¿ƒç‰¹ç‚¹**ï¼š
```
1. ğŸ“¦ æš‚å­˜åŠŸèƒ½
   â€¢ SQLè¯­å¥ä¸ä¼šç«‹å³æ‰§è¡Œ
   â€¢ è€Œæ˜¯å­˜å‚¨åœ¨å†…å­˜çš„"æ‰¹å¤„ç†é˜Ÿåˆ—"ä¸­
   â€¢ ç­‰å¾…ä¸€èµ·æ‰§è¡Œ

2. ğŸ”„ å¯é‡å¤è°ƒç”¨
   â€¢ å¯ä»¥å¤šæ¬¡è°ƒç”¨addBatch()
   â€¢ æ¯æ¬¡è°ƒç”¨æ·»åŠ ä¸€æ¡è®°å½•åˆ°æ‰¹å¤„ç†é˜Ÿåˆ—
   â€¢ æ²¡æœ‰æ•°é‡é™åˆ¶ï¼ˆä½†è¦æ³¨æ„å†…å­˜ï¼‰

3. ğŸ¯ å‚æ•°ç»‘å®š
   â€¢ æ¯æ¬¡addBatch()å‰è¦å…ˆè®¾ç½®å‚æ•°
   â€¢ setString(), setInt()ç­‰è®¾ç½®å®Œæ•´å‚æ•°
   â€¢ ç„¶åè°ƒç”¨addBatch()ä¿å­˜è¿™ç»„å‚æ•°
```

### 3.2 executeBatch() æ‰§è¡Œæ–¹æ³•


**ğŸš€ executeBatch() æ˜¯ä»€ä¹ˆï¼Ÿ**
ç»§ç»­é‚®å¯„çš„æ¯”å–»ï¼ŒexecuteBatch()å°±æ˜¯æŠŠæ•´åŒ…ä¿¡ä»¶ä¸€æ¬¡æ€§é€åˆ°é‚®å±€çš„åŠ¨ä½œã€‚

```java
// æ‰§è¡Œæ‰€æœ‰æ‰¹å¤„ç†ä¸­çš„SQL
int[] results = pstmt.executeBatch();

// resultsæ•°ç»„åŒ…å«æ¯æ¡SQLçš„æ‰§è¡Œç»“æœ
// results[0] = ç¬¬ä¸€æ¡SQLå½±å“çš„è¡Œæ•°
// results[1] = ç¬¬äºŒæ¡SQLå½±å“çš„è¡Œæ•°  
// ...
```

**âš¡ executeBatch() å…³é”®ç‰¹ç‚¹**ï¼š
```
1. ğŸ¯ ä¸€æ¬¡æ€§æ‰§è¡Œ
   â€¢ æŠŠæ‰¹å¤„ç†é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰SQLä¸€èµ·å‘é€ç»™æ•°æ®åº“
   â€¢ æ•°æ®åº“ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰è¯­å¥
   â€¢ è¿”å›æ¯æ¡è¯­å¥çš„æ‰§è¡Œç»“æœ

2. ğŸ“Š è¿”å›ç»“æœæ•°ç»„
   â€¢ è¿”å›int[]æ•°ç»„
   â€¢ æ•°ç»„é•¿åº¦ = æ‰¹å¤„ç†ä¸­SQLçš„æ•°é‡  
   â€¢ æ¯ä¸ªå…ƒç´  = å¯¹åº”SQLå½±å“çš„è¡Œæ•°

3. ğŸ§¹ è‡ªåŠ¨æ¸…ç©ºé˜Ÿåˆ—
   â€¢ æ‰§è¡Œå®Œæ¯•åè‡ªåŠ¨è°ƒç”¨clearBatch()
   â€¢ æ‰¹å¤„ç†é˜Ÿåˆ—è¢«æ¸…ç©º
   â€¢ å¯ä»¥å¼€å§‹ä¸‹ä¸€è½®æ‰¹å¤„ç†
```

### 3.3 clearBatch() æ¸…ç†æ–¹æ³•


**ğŸ§¹ clearBatch() æ˜¯ä»€ä¹ˆï¼Ÿ**
å°±åƒæ¸…ç©ºé‚®åŒ…ï¼Œå‡†å¤‡è£…æ–°çš„ä¿¡ä»¶ã€‚

```java
// æ¸…ç©ºå½“å‰æ‰¹å¤„ç†é˜Ÿåˆ—
pstmt.clearBatch();

// ä½¿ç”¨åœºæ™¯ç¤ºä¾‹
try {
    pstmt.setString(1, "å¼ ä¸‰");
    pstmt.setInt(2, 25);
    pstmt.addBatch();
    
    pstmt.setString(1, "æå››");  
    pstmt.setInt(2, 30);
    pstmt.addBatch();
    
    // æ‰§è¡Œæ‰¹å¤„ç†
    int[] results = pstmt.executeBatch();
    
} catch (SQLException e) {
    // å‡ºé”™æ—¶æ¸…ç©ºæ‰¹å¤„ç†é˜Ÿåˆ—
    pstmt.clearBatch();  // ğŸ§¹ æ¸…ç†ç°åœº
    throw e;
}
```

**ğŸ”‘ clearBatch() ä½¿ç”¨åœºæ™¯**ï¼š
```
1. ğŸš¨ å¼‚å¸¸å¤„ç†
   â€¢ æ‰¹å¤„ç†æ‰§è¡Œå¤±è´¥æ—¶æ¸…ç©ºé˜Ÿåˆ—
   â€¢ é¿å…ä¸‹æ¬¡æ‰§è¡ŒåŒ…å«é”™è¯¯æ•°æ®
   â€¢ ä¿æŒæ‰¹å¤„ç†é˜Ÿåˆ—çš„å¹²å‡€çŠ¶æ€

2. ğŸ”„ æ‰‹åŠ¨æ§åˆ¶
   â€¢ æƒ³è¦å–æ¶ˆå½“å‰æ‰¹å¤„ç†
   â€¢ é‡æ–°å¼€å§‹ç»„ç»‡æ‰¹å¤„ç†
   â€¢ æ¡ä»¶æ€§åœ°å†³å®šæ˜¯å¦æ‰§è¡Œ

3. ğŸ’¾ å†…å­˜ç®¡ç†
   â€¢ æ‰¹å¤„ç†é˜Ÿåˆ—å ç”¨å†…å­˜
   â€¢ é•¿æ—¶é—´ä¸æ‰§è¡Œæ—¶æ¸…ç©ºé‡Šæ”¾å†…å­˜
   â€¢ é¿å…å†…å­˜æ³„æ¼
```

---

## 4. ğŸ“‹ æ‰¹å¤„ç†å®ç°æ­¥éª¤


### 4.1 æ ‡å‡†å®ç°æµç¨‹


**ğŸ”„ æ‰¹å¤„ç†æ‰§è¡Œçš„æ ‡å‡†æ­¥éª¤**ï¼š

```
ç¬¬1æ­¥ï¼šå‡†å¤‡PreparedStatement
   â†“
ç¬¬2æ­¥ï¼šå¾ªç¯æ·»åŠ æ•°æ®åˆ°æ‰¹å¤„ç†
   â”œâ”€â”€ è®¾ç½®å‚æ•° (setXxx)
   â””â”€â”€ æ·»åŠ åˆ°æ‰¹å¤„ç† (addBatch)
   â†“
ç¬¬3æ­¥ï¼šæ‰§è¡Œæ‰¹å¤„ç† (executeBatch)  
   â†“
ç¬¬4æ­¥ï¼šå¤„ç†æ‰§è¡Œç»“æœ
   â†“
ç¬¬5æ­¥ï¼šæ¸…ç†èµ„æº
```

### 4.2 å®Œæ•´ä»£ç ç¤ºä¾‹


**ğŸ’» æ‰¹é‡æ’å…¥ç”¨æˆ·æ•°æ®**ï¼š

```java
public void batchInsertUsers(List<User> users) {
    String sql = "INSERT INTO users(name, age, email) VALUES(?, ?, ?)";
    
    try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        // ğŸ”„ å¾ªç¯æ·»åŠ æ¯ä¸ªç”¨æˆ·åˆ°æ‰¹å¤„ç†
        for (User user : users) {
            // è®¾ç½®å‚æ•°
            pstmt.setString(1, user.getName());
            pstmt.setInt(2, user.getAge()); 
            pstmt.setString(3, user.getEmail());
            
            // ğŸ“¦ æ·»åŠ åˆ°æ‰¹å¤„ç†é˜Ÿåˆ—
            pstmt.addBatch();
        }
        
        // ğŸš€ ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰æ’å…¥
        int[] results = pstmt.executeBatch();
        
        // ğŸ“Š æ£€æŸ¥æ‰§è¡Œç»“æœ
        System.out.println("æ‰¹å¤„ç†å®Œæˆï¼ŒæˆåŠŸæ’å…¥ " + results.length + " æ¡è®°å½•");
        
    } catch (SQLException e) {
        System.err.println("æ‰¹å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
        throw new RuntimeException(e);
    }
}
```

### 4.3 åˆ†æ‰¹å¤„ç†ç­–ç•¥


**ä¸ºä»€ä¹ˆè¦åˆ†æ‰¹ï¼Ÿ**
æƒ³è±¡ä½ è¦æ¬å®¶ï¼Œä¸€æ¬¡æ¬å®Œæ‰€æœ‰ä¸œè¥¿ä¼šç´¯æ­»ï¼Œåˆ†å‡ æ¬¡æ¬æ¯”è¾ƒåˆç†ã€‚

```java
public void batchInsertWithPaging(List<User> users) {
    String sql = "INSERT INTO users(name, age, email) VALUES(?, ?, ?)";
    int batchSize = 1000;  // æ¯æ‰¹å¤„ç†1000æ¡
    
    try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        for (int i = 0; i < users.size(); i++) {
            User user = users.get(i);
            
            // è®¾ç½®å‚æ•°å¹¶æ·»åŠ åˆ°æ‰¹å¤„ç†
            pstmt.setString(1, user.getName());
            pstmt.setInt(2, user.getAge());
            pstmt.setString(3, user.getEmail());
            pstmt.addBatch();
            
            // ğŸ¯ æ¯1000æ¡æ‰§è¡Œä¸€æ¬¡æ‰¹å¤„ç†
            if ((i + 1) % batchSize == 0) {
                int[] results = pstmt.executeBatch();
                System.out.println("å·²å¤„ç† " + (i + 1) + " æ¡è®°å½•");
            }
        }
        
        // ğŸ”š å¤„ç†å‰©ä½™çš„è®°å½•ï¼ˆä¸è¶³1000æ¡çš„éƒ¨åˆ†ï¼‰
        int[] results = pstmt.executeBatch();
        System.out.println("æ‰¹å¤„ç†å…¨éƒ¨å®Œæˆ");
        
    } catch (SQLException e) {
        System.err.println("æ‰¹å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

**ğŸ¯ åˆ†æ‰¹å¤„ç†çš„å¥½å¤„**ï¼š
```
1. ğŸ’¾ æ§åˆ¶å†…å­˜ä½¿ç”¨
   â€¢ é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤ªå¤šæ•°æ®åˆ°å†…å­˜
   â€¢ é˜²æ­¢å†…å­˜æº¢å‡ºï¼ˆOutOfMemoryErrorï¼‰
   â€¢ ä¿æŒç¨‹åºç¨³å®šè¿è¡Œ

2. ğŸ”„ æä¾›è¿›åº¦åé¦ˆ
   â€¢ å¯ä»¥å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦
   â€¢ ç”¨æˆ·ä½“éªŒæ›´å¥½
   â€¢ ä¾¿äºç›‘æ§å’Œè°ƒè¯•

3. ğŸ›¡ï¸ é™ä½å¤±è´¥é£é™©  
   â€¢ å³ä½¿æŸä¸€æ‰¹å¤±è´¥ï¼Œå…¶ä»–æ‰¹æ¬¡å¯èƒ½æˆåŠŸ
   â€¢ ä¾¿äºé”™è¯¯å®šä½å’Œæ¢å¤
   â€¢ å‡å°‘é‡æ–°å¤„ç†çš„æ•°æ®é‡
```

---

## 5. ğŸ¯ æ‰¹å¤„ç†æœ€ä½³å®è·µ


### 5.1 æ‰¹æ¬¡å¤§å°é€‰æ‹©


**â“ æ¯æ‰¹å¤„ç†å¤šå°‘æ¡è®°å½•æœ€å¥½ï¼Ÿ**

```
ğŸ”¸ å¸¸ç”¨æ‰¹æ¬¡å¤§å°ï¼š
â€¢ å°æ‰¹æ¬¡ï¼š100-500æ¡
  é€‚åˆï¼šç½‘ç»œä¸ç¨³å®šã€å†…å­˜å—é™
  
â€¢ ä¸­æ‰¹æ¬¡ï¼š1000-5000æ¡  
  é€‚åˆï¼šä¸€èˆ¬ä¸šåŠ¡åœºæ™¯ï¼ˆæ¨èï¼‰
  
â€¢ å¤§æ‰¹æ¬¡ï¼š10000+æ¡
  é€‚åˆï¼šå†…ç½‘ç¯å¢ƒã€å¤§é‡æ•°æ®å¤„ç†

ğŸ”¸ å½±å“å› ç´ ï¼š
1. ç½‘ç»œç¯å¢ƒï¼šç½‘ç»œæ…¢ç”¨å°æ‰¹æ¬¡
2. å†…å­˜å¤§å°ï¼šå†…å­˜å°ç”¨å°æ‰¹æ¬¡  
3. æ•°æ®åº“æ€§èƒ½ï¼šæ•°æ®åº“æ…¢ç”¨å°æ‰¹æ¬¡
4. ä¸šåŠ¡éœ€æ±‚ï¼šå®æ—¶æ€§è¦æ±‚é«˜ç”¨å°æ‰¹æ¬¡
```

### 5.2 äº‹åŠ¡æ§åˆ¶ç­–ç•¥


**ğŸ”’ æ‰¹å¤„ç†ä¸äº‹åŠ¡çš„å…³ç³»**ï¼š

```java
public void batchInsertWithTransaction(List<User> users) {
    try {
        // ğŸ”’ å¼€å¯äº‹åŠ¡
        conn.setAutoCommit(false);
        
        String sql = "INSERT INTO users(name, age, email) VALUES(?, ?, ?)";
        try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
            
            for (User user : users) {
                pstmt.setString(1, user.getName());
                pstmt.setInt(2, user.getAge());
                pstmt.setString(3, user.getEmail());
                pstmt.addBatch();
            }
            
            // æ‰§è¡Œæ‰¹å¤„ç†
            int[] results = pstmt.executeBatch();
            
            // âœ… å…¨éƒ¨æˆåŠŸæ‰æäº¤
            conn.commit();
            System.out.println("æ‰¹å¤„ç†æˆåŠŸï¼Œå·²æäº¤äº‹åŠ¡");
            
        } catch (SQLException e) {
            // ğŸ”„ å‡ºé”™æ—¶å›æ»š
            conn.rollback();
            System.err.println("æ‰¹å¤„ç†å¤±è´¥ï¼Œå·²å›æ»šäº‹åŠ¡");
            throw e;
        }
        
    } catch (SQLException e) {
        throw new RuntimeException(e);
    } finally {
        try {
            // ğŸ”§ æ¢å¤è‡ªåŠ¨æäº¤æ¨¡å¼
            conn.setAutoCommit(true);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```

### 5.3 å¼‚å¸¸å¤„ç†ç­–ç•¥


**ğŸš¨ æ‰¹å¤„ç†å¼‚å¸¸å¤„ç†**ï¼š

```java
public BatchResult batchInsertWithErrorHandling(List<User> users) {
    List<User> successList = new ArrayList<>();
    List<User> failList = new ArrayList<>();
    
    String sql = "INSERT INTO users(name, age, email) VALUES(?, ?, ?)";
    
    try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        for (int i = 0; i < users.size(); i++) {
            try {
                User user = users.get(i);
                pstmt.setString(1, user.getName());
                pstmt.setInt(2, user.getAge());
                pstmt.setString(3, user.getEmail());
                pstmt.addBatch();
                
            } catch (SQLException e) {
                // ğŸš¨ å•æ¡è®°å½•é”™è¯¯ï¼Œè®°å½•å¤±è´¥ä¿¡æ¯
                failList.add(users.get(i));
                System.err.println("ç”¨æˆ· " + users.get(i).getName() + " æ•°æ®å¼‚å¸¸ï¼š" + e.getMessage());
            }
        }
        
        try {
            // æ‰§è¡Œæ‰¹å¤„ç†
            int[] results = pstmt.executeBatch();
            
            // è®°å½•æˆåŠŸçš„æ•°æ®
            for (int i = 0; i < results.length; i++) {
                if (results[i] > 0) {
                    successList.add(users.get(i));
                }
            }
            
        } catch (BatchUpdateException e) {
            // ğŸ” æ‰¹å¤„ç†éƒ¨åˆ†å¤±è´¥çš„æƒ…å†µ
            int[] updateCounts = e.getUpdateCounts();
            
            for (int i = 0; i < updateCounts.length; i++) {
                if (updateCounts[i] >= 0) {
                    successList.add(users.get(i));
                } else {
                    failList.add(users.get(i));
                }
            }
        }
        
    } catch (SQLException e) {
        throw new RuntimeException("æ‰¹å¤„ç†æ‰§è¡Œå¤±è´¥", e);
    }
    
    return new BatchResult(successList, failList);
}
```

### 5.4 æ€§èƒ½ç›‘æ§


**ğŸ“Š æ‰¹å¤„ç†æ€§èƒ½ç›‘æ§**ï¼š

```java
public void batchInsertWithMonitoring(List<User> users) {
    long startTime = System.currentTimeMillis();
    
    String sql = "INSERT INTO users(name, age, email) VALUES(?, ?, ?)";
    
    try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        // ğŸ“¦ å‡†å¤‡æ‰¹å¤„ç†
        long prepareStart = System.currentTimeMillis();
        for (User user : users) {
            pstmt.setString(1, user.getName());
            pstmt.setInt(2, user.getAge());
            pstmt.setString(3, user.getEmail());
            pstmt.addBatch();
        }
        long prepareTime = System.currentTimeMillis() - prepareStart;
        
        // ğŸš€ æ‰§è¡Œæ‰¹å¤„ç†
        long executeStart = System.currentTimeMillis();
        int[] results = pstmt.executeBatch();
        long executeTime = System.currentTimeMillis() - executeStart;
        
        long totalTime = System.currentTimeMillis() - startTime;
        
        // ğŸ“ˆ è¾“å‡ºæ€§èƒ½ç»Ÿè®¡
        System.out.println("=== æ‰¹å¤„ç†æ€§èƒ½æŠ¥å‘Š ===");
        System.out.println("æ€»è®°å½•æ•°: " + users.size());
        System.out.println("å‡†å¤‡æ—¶é—´: " + prepareTime + "ms");
        System.out.println("æ‰§è¡Œæ—¶é—´: " + executeTime + "ms");
        System.out.println("æ€»ç”¨æ—¶: " + totalTime + "ms");
        System.out.println("å¹³å‡é€Ÿåº¦: " + (users.size() * 1000 / totalTime) + " æ¡/ç§’");
        
    } catch (SQLException e) {
        System.err.println("æ‰¹å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ æ‰¹å¤„ç†æœ¬è´¨ï¼šæŠŠå¤šæ¡SQLè¯­å¥æ‰“åŒ…ä¸€èµ·æ‰§è¡Œï¼Œå‡å°‘ç½‘ç»œé€šä¿¡
ğŸ”¸ æ€§èƒ½ä¼˜åŠ¿ï¼š5-10å€æ€§èƒ½æå‡ï¼Œä¸»è¦å› ä¸ºå‡å°‘äº†ç½‘ç»œå¾€è¿”æ¬¡æ•°  
ğŸ”¸ æ ¸å¿ƒæ–¹æ³•ï¼šaddBatch()æ·»åŠ ã€executeBatch()æ‰§è¡Œã€clearBatch()æ¸…ç†
ğŸ”¸ é€‚ç”¨åœºæ™¯ï¼šå¤§é‡æ•°æ®æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œ
ğŸ”¸ äº‹åŠ¡é…åˆï¼šæ‰¹å¤„ç†é€šå¸¸ä¸äº‹åŠ¡ä¸€èµ·ä½¿ç”¨ä¿è¯æ•°æ®ä¸€è‡´æ€§
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ‰¹å¤„ç†çš„å·¥ä½œåŸç†**ï¼š
```
å†…å­˜é˜¶æ®µï¼š
â€¢ addBatch()æŠŠSQLå­˜å‚¨åœ¨å†…å­˜é˜Ÿåˆ—ä¸­
â€¢ æ­¤æ—¶SQLå¹¶æœªå‘é€ç»™æ•°æ®åº“
â€¢ å¯ä»¥æ·»åŠ ä»»æ„æ•°é‡çš„SQLåˆ°é˜Ÿåˆ—

æ‰§è¡Œé˜¶æ®µï¼š  
â€¢ executeBatch()ä¸€æ¬¡æ€§å‘é€æ‰€æœ‰SQL
â€¢ æ•°æ®åº“æ‰¹é‡å¤„ç†è¿™äº›SQLè¯­å¥
â€¢ è¿”å›æ¯æ¡SQLçš„æ‰§è¡Œç»“æœæ•°ç»„
```

**ğŸ”¹ ä¸ºä»€ä¹ˆæ‰¹å¤„ç†æ€§èƒ½æ›´å¥½**ï¼š
```
ç½‘ç»œå±‚é¢ï¼š
â€¢ æ™®é€šæ‰§è¡Œï¼šSQLæ•°é‡ Ã— ç½‘ç»œå»¶è¿Ÿ
â€¢ æ‰¹å¤„ç†ï¼š1 Ã— ç½‘ç»œå»¶è¿Ÿ
â€¢ ç½‘ç»œå»¶è¿Ÿå‡å°‘æ˜¯ä¸»è¦æ€§èƒ½æå‡æ¥æº

æ•°æ®åº“å±‚é¢ï¼š
â€¢ å‡å°‘SQLè§£ææ¬¡æ•°
â€¢ ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’å¤ç”¨
â€¢ å‡å°‘é”ç«äº‰å’Œèµ„æºåˆ‡æ¢
```

**ğŸ”¹ æ‰¹å¤„ç†çš„æ³¨æ„äº‹é¡¹**ï¼š
```
å†…å­˜ç®¡ç†ï¼š
â€¢ æ‰¹å¤„ç†é˜Ÿåˆ—å ç”¨å†…å­˜
â€¢ æ•°æ®é‡å¤ªå¤§å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡º
â€¢ å»ºè®®åˆ†æ‰¹å¤„ç†ï¼Œæ¯æ‰¹1000-5000æ¡

å¼‚å¸¸å¤„ç†ï¼š
â€¢ æ‰¹å¤„ç†å¯èƒ½éƒ¨åˆ†æˆåŠŸéƒ¨åˆ†å¤±è´¥
â€¢ éœ€è¦æ£€æŸ¥æ‰§è¡Œç»“æœæ•°ç»„
â€¢ é…åˆäº‹åŠ¡ä½¿ç”¨ä¿è¯æ•°æ®ä¸€è‡´æ€§
```

### 6.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ‰¹å¤„ç†**ï¼š
```
âœ… æ¨èä½¿ç”¨ï¼š
â€¢ æ•°æ®å¯¼å…¥å¯¼å‡ºï¼ˆExcelå¯¼å…¥æ•°æ®åº“ï¼‰
â€¢ æ‰¹é‡ç”¨æˆ·æ³¨å†Œ
â€¢ å®šæ—¶ä»»åŠ¡æ•°æ®å¤„ç†
â€¢ æ—¥å¿—æ‰¹é‡å…¥åº“
â€¢ æ‰¹é‡çŠ¶æ€æ›´æ–°

âŒ ä¸æ¨èä½¿ç”¨ï¼š
â€¢ å•æ¡è®°å½•æ“ä½œ
â€¢ éœ€è¦ç«‹å³çœ‹åˆ°ç»“æœçš„æ“ä½œ
â€¢ å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆéœ€è¦æ ¹æ®ç»“æœåšåˆ¤æ–­ï¼‰
â€¢ å®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„æ“ä½œ
```

**ğŸ› ï¸ å¼€å‘æœ€ä½³å®è·µ**ï¼š
```
ä»£ç è§„èŒƒï¼š
â€¢ ä½¿ç”¨try-with-resourcesç®¡ç†èµ„æº
â€¢ åˆç†è®¾ç½®æ‰¹å¤„ç†å¤§å°ï¼ˆ1000-5000ï¼‰
â€¢ é…åˆäº‹åŠ¡ä½¿ç”¨ä¿è¯æ•°æ®ä¸€è‡´æ€§
â€¢ æ·»åŠ æ€§èƒ½ç›‘æ§å’Œå¼‚å¸¸å¤„ç†

æ€§èƒ½ä¼˜åŒ–ï¼š
â€¢ åˆ†æ‰¹å¤„ç†é¿å…å†…å­˜é—®é¢˜
â€¢ å…³é—­è‡ªåŠ¨æäº¤æå‡æ€§èƒ½
â€¢ ä½¿ç”¨PreparedStatementé‡ç”¨SQL
â€¢ ç›‘æ§æ‰§è¡Œæ—¶é—´ä¼˜åŒ–æ‰¹æ¬¡å¤§å°
```

**ğŸ¯ å­¦ä¹ å»ºè®®**ï¼š
```
ç†è®ºç†è§£ï¼š
â€¢ æŒæ¡æ‰¹å¤„ç†çš„å·¥ä½œåŸç†
â€¢ ç†è§£æ€§èƒ½æå‡çš„æ ¹æœ¬åŸå› 
â€¢ äº†è§£é€‚ç”¨åœºæ™¯å’Œé™åˆ¶æ¡ä»¶

å®è·µç»ƒä¹ ï¼š
â€¢ ç¼–å†™ç®€å•çš„æ‰¹å¤„ç†æ’å…¥ç¨‹åº
â€¢ å¯¹æ¯”æ‰¹å¤„ç†å’Œæ™®é€šæ‰§è¡Œçš„æ€§èƒ½
â€¢ ç»ƒä¹ å¼‚å¸¸å¤„ç†å’Œäº‹åŠ¡æ§åˆ¶
â€¢ å°è¯•ä¸åŒçš„æ‰¹æ¬¡å¤§å°ä¼˜åŒ–
```

### 6.4 å¸¸è§é—®é¢˜è§£ç­”


**â“ æ‰¹å¤„ç†ä¸€å®šæ¯”æ™®é€šæ‰§è¡Œå¿«å—ï¼Ÿ**
```
ç­”ï¼šä¸ä¸€å®šï¼Œå–å†³äºå…·ä½“åœºæ™¯ï¼š
â€¢ å¤§é‡æ•°æ®ï¼ˆ100+æ¡ï¼‰ï¼šæ‰¹å¤„ç†æ˜æ˜¾æ›´å¿«
â€¢ å°‘é‡æ•°æ®ï¼ˆ<10æ¡ï¼‰ï¼šå·®åˆ«ä¸å¤§
â€¢ ç½‘ç»œå»¶è¿Ÿé«˜ï¼šæ‰¹å¤„ç†ä¼˜åŠ¿æ˜æ˜¾
â€¢ æœ¬åœ°æ•°æ®åº“ï¼šæ‰¹å¤„ç†ä»æœ‰ä¼˜åŠ¿ä½†ä¸æ˜æ˜¾
```

**â“ æ‰¹å¤„ç†é˜Ÿåˆ—æœ‰å¤§å°é™åˆ¶å—ï¼Ÿ**
```
ç­”ï¼šæ²¡æœ‰ç¡¬æ€§é™åˆ¶ï¼Œä½†å—å†…å­˜åˆ¶çº¦ï¼š
â€¢ ç†è®ºä¸Šå¯ä»¥æ— é™æ·»åŠ addBatch()
â€¢ å®é™…å—JVMå †å†…å­˜é™åˆ¶
â€¢ å»ºè®®æ¯æ‰¹1000-5000æ¡ï¼Œé¿å…å†…å­˜é—®é¢˜
â€¢ æ•°æ®é‡å¤§æ—¶ä½¿ç”¨åˆ†æ‰¹ç­–ç•¥
```

**â“ æ‰¹å¤„ç†å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ**
```
ç­”ï¼šæœ‰å‡ ç§å¤„ç†ç­–ç•¥ï¼š
â€¢ å…¨éƒ¨å›æ»šï¼šä½¿ç”¨äº‹åŠ¡ï¼Œå¤±è´¥æ—¶rollback
â€¢ éƒ¨åˆ†é‡è¯•ï¼šè®°å½•å¤±è´¥çš„æ•°æ®ï¼Œå•ç‹¬å¤„ç†
â€¢ å¿½ç•¥é”™è¯¯ï¼šè®°å½•æ—¥å¿—ï¼Œç»§ç»­å¤„ç†å…¶ä»–æ•°æ®
â€¢ å…·ä½“é€‰æ‹©çœ‹ä¸šåŠ¡éœ€æ±‚
```

**ğŸ§  è®°å¿†å£è¯€**ï¼š
- æ‰¹å¤„ç†åƒå¯„ä¿¡ï¼Œæ”’å¤Ÿä¸€æ‰¹å†å¯„é€
- addBatchè£…ä¿¡ä»¶ï¼ŒexecuteBatchå»é‚®å±€  
- æ€§èƒ½æå‡é å‡å°‘ç½‘ç»œè·‘è…¿æ•°
- å¤§é‡æ•°æ®ç”¨æ‰¹å¤„ç†ï¼Œå•æ¡è®°å½•æ™®é€šæ‰§è¡Œ

**æ ¸å¿ƒç†å¿µ**ï¼šæ‰¹å¤„ç†çš„æ ¸å¿ƒä»·å€¼åœ¨äº"æ‰¹é‡"ï¼Œé€šè¿‡å‡å°‘ç½‘ç»œé€šä¿¡æ¬¡æ•°æ˜¾è‘—æå‡æ•°æ®æ“ä½œæ€§èƒ½ã€‚æŒæ¡äº†æ‰¹å¤„ç†ï¼Œä½ å°±æŒæ¡äº†Java Webå¼€å‘ä¸­å¤„ç†å¤§é‡æ•°æ®çš„å…³é”®æŠ€æœ¯ï¼