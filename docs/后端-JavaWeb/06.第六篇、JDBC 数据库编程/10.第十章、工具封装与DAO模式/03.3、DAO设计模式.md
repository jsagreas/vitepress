---
title: 3ã€DAOè®¾è®¡æ¨¡å¼
---
## ğŸ“š ç›®å½•


1. [ä»€ä¹ˆæ˜¯DAOè®¾è®¡æ¨¡å¼](#1-ä»€ä¹ˆæ˜¯daoè®¾è®¡æ¨¡å¼)
2. [ä¸ºä»€ä¹ˆéœ€è¦DAOæ¨¡å¼](#2-ä¸ºä»€ä¹ˆéœ€è¦daoæ¨¡å¼)
3. [DAOæ¨¡å¼çš„æ ¸å¿ƒç»„æˆ](#3-daoæ¨¡å¼çš„æ ¸å¿ƒç»„æˆ)
4. [å®ä½“ç±»Entityè®¾è®¡](#4-å®ä½“ç±»entityè®¾è®¡)
5. [DAOæ¥å£è®¾è®¡è§„èŒƒ](#5-daoæ¥å£è®¾è®¡è§„èŒƒ)
6. [DAOæ¥å£å®ç°ç±»](#6-daoæ¥å£å®ç°ç±»)
7. [åˆ†å±‚æ¶æ„ä¸èŒè´£åˆ’åˆ†](#7-åˆ†å±‚æ¶æ„ä¸èŒè´£åˆ’åˆ†)
8. [DAOæ¨¡å¼çš„æµ‹è¯•ç­–ç•¥](#8-daoæ¨¡å¼çš„æµ‹è¯•ç­–ç•¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

# 1. ğŸ¯ ä»€ä¹ˆæ˜¯DAOè®¾è®¡æ¨¡å¼



## 1.1 DAOæ¨¡å¼çš„é€šä¿—ç†è§£



**DAO = Data Access Objectï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰**

> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**  
> æŠŠDAOæƒ³è±¡æˆä¸€ä¸ª"ä¸“ä¸šçš„å›¾ä¹¦ç®¡ç†å‘˜"ï¼š
> - ä½ æƒ³å€Ÿä¹¦æ—¶ï¼Œä¸éœ€è¦çŸ¥é“ä¹¦åœ¨å“ªä¸ªä¹¦æ¶ã€å“ªä¸ªä½ç½®
> - åªéœ€è¦å‘Šè¯‰ç®¡ç†å‘˜ä¹¦åï¼Œä»–å¸®ä½ æ‰¾åˆ°å¹¶å–å‡ºæ¥
> - ä½ è¿˜ä¹¦æ—¶ï¼Œä¹Ÿæ˜¯äº¤ç»™ç®¡ç†å‘˜ï¼Œä»–çŸ¥é“æ”¾å›å“ªé‡Œ
> - ç®¡ç†å‘˜å°±æ˜¯"DAO"ï¼Œè´Ÿè´£æ‰€æœ‰ä¸ä¹¦åº“çš„äº¤äº’

## 1.2 DAOçš„æ ¸å¿ƒæ¦‚å¿µ



**ç®€å•æ¥è¯´**ï¼šDAOå°±æ˜¯ä¸€ä¸ªä¸“é—¨è´Ÿè´£ä¸æ•°æ®åº“æ‰“äº¤é“çš„"ä¸­ä»‹"

```
æ²¡æœ‰DAOæ—¶ï¼š
ä¸šåŠ¡ä»£ç  â†â†’ æ•°æ®åº“
â€¢ ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œæ··åœ¨ä¸€èµ·
â€¢ ä»£ç é‡å¤ï¼Œéš¾ä»¥ç»´æŠ¤

æœ‰äº†DAOåï¼š
ä¸šåŠ¡ä»£ç  â†â†’ DAO â†â†’ æ•°æ®åº“
â€¢ ä¸šåŠ¡é€»è¾‘ä¸“æ³¨ä¸šåŠ¡å¤„ç†
â€¢ DAOä¸“æ³¨æ•°æ®æ“ä½œ
â€¢ èŒè´£åˆ†ç¦»ï¼Œä»£ç æ¸…æ™°
```

## 1.3 DAOçš„ä½œç”¨



**ğŸ”¸ èŒè´£åˆ†ç¦»**ï¼šæŠŠæ•°æ®åº“æ“ä½œä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥
**ğŸ”¸ ä»£ç å¤ç”¨**ï¼šåŒæ ·çš„æ•°æ®åº“æ“ä½œå¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨  
**ğŸ”¸ æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹æ•°æ®åº“æ“ä½œåªéœ€è¦æ”¹DAOå±‚
**ğŸ”¸ æ˜“äºæµ‹è¯•**ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•æ•°æ®åº“æ“ä½œ

---

# 2. âš¡ ä¸ºä»€ä¹ˆéœ€è¦DAOæ¨¡å¼



## 2.1 æ²¡æœ‰DAOæ¨¡å¼çš„é—®é¢˜



**é—®é¢˜åœºæ™¯**ï¼šå‡è®¾ä½ è¦å¼€å‘ä¸€ä¸ªå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ

```java
// ç³Ÿç³•çš„åšæ³•ï¼šä¸šåŠ¡ä»£ç ä¸­ç›´æ¥å†™æ•°æ®åº“æ“ä½œ
public class StudentService {
    public void addStudent(String name, int age) {
        // ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œæ··åœ¨ä¸€èµ·
        Connection conn = null;
        try {
            conn = DriverManager.getConnection("jdbc:mysql://...");
            String sql = "INSERT INTO student(name, age) VALUES(?, ?)";
            PreparedStatement ps = conn.prepareStatement(sql);
            ps.setString(1, name);
            ps.setInt(2, age);
            ps.executeUpdate();
            // ... ä¸€å †æ•°æ®åº“ä»£ç 
        } catch(SQLException e) {
            // ... å¼‚å¸¸å¤„ç†
        } finally {
            // ... èµ„æºé‡Šæ”¾
        }
    }
    
    public void deleteStudent(int id) {
        // åˆè¦é‡å¤å†™ä¸€éæ•°æ®åº“è¿æ¥ä»£ç ...
        Connection conn = null;
        // ... é‡å¤çš„ä»£ç 
    }
}
```

**å­˜åœ¨çš„é—®é¢˜**ï¼š
- **ä»£ç é‡å¤**ï¼šæ¯ä¸ªæ–¹æ³•éƒ½è¦å†™è¿æ¥ã€å¼‚å¸¸å¤„ç†ã€èµ„æºé‡Šæ”¾
- **èŒè´£æ··ä¹±**ï¼šä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“æ“ä½œæ··åœ¨ä¸€èµ·
- **éš¾ä»¥ç»´æŠ¤**ï¼šä¿®æ”¹æ•°æ®åº“ç»“æ„éœ€è¦æ”¹å¾ˆå¤šåœ°æ–¹
- **éš¾ä»¥æµ‹è¯•**ï¼šæ— æ³•å•ç‹¬æµ‹è¯•æ•°æ®åº“æ“ä½œ

## 2.2 ä½¿ç”¨DAOæ¨¡å¼çš„å¥½å¤„



**å¥½å¤„å¯¹æ¯”è¡¨**ï¼š

| **æ–¹é¢** | **ä¸ç”¨DAO** | **ä½¿ç”¨DAO** |
|---------|------------|-----------|
| ğŸ”§ **ä»£ç å¤ç”¨** | é‡å¤å†™æ•°æ®åº“è¿æ¥ä»£ç  | ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£ |
| ğŸ“ **èŒè´£åˆ†ç¦»** | ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®æ··åˆ | å„å±‚èŒè´£æ¸…æ™° |
| ğŸ› ï¸ **ç»´æŠ¤æ€§** | ä¿®æ”¹ä¸€å¤„å½±å“å¤šå¤„ | ä¿®æ”¹DAOå³å¯ |
| ğŸ§ª **å¯æµ‹è¯•æ€§** | éš¾ä»¥å•ç‹¬æµ‹è¯• | å¯ä»¥ç‹¬ç«‹æµ‹è¯•æ¯ä¸€å±‚ |
| ğŸ”„ **å¯æ‰©å±•æ€§** | æ·»åŠ æ–°åŠŸèƒ½å¤æ‚ | æŒ‰æ¥å£æ‰©å±•ç®€å• |

---

# 3. ğŸ—ï¸ DAOæ¨¡å¼çš„æ ¸å¿ƒç»„æˆ



## 3.1 DAOæ¨¡å¼çš„ç»„æˆéƒ¨åˆ†



```
DAOæ¨¡å¼ç»„æˆç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸šåŠ¡å±‚        â”‚ â† Serviceå±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘
â”‚   (Service)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DAOæ¥å£       â”‚ â† å®šä¹‰æ•°æ®è®¿é—®æ–¹æ³•
â”‚   (Interface)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DAOå®ç°ç±»     â”‚ â† å…·ä½“çš„æ•°æ®åº“æ“ä½œå®ç°
â”‚   (Implement)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®ä½“ç±»        â”‚ â† å¯¹åº”æ•°æ®åº“è¡¨çš„Javaå¯¹è±¡
â”‚   (Entity)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3.2 å„ç»„ä»¶çš„ä½œç”¨



**ğŸ”¸ å®ä½“ç±»(Entity)**ï¼š
- å¯¹åº”æ•°æ®åº“ä¸­çš„è¡¨
- åŒ…å«å±æ€§ã€æ„é€ æ–¹æ³•ã€getter/setter
- ä¹Ÿå«POJO(Plain Old Java Object)

**ğŸ”¸ DAOæ¥å£(Interface)**ï¼š
- å®šä¹‰å¯¹æ•°æ®çš„æ“ä½œæ–¹æ³•
- ä¸åŒ…å«å…·ä½“å®ç°
- æ–¹ä¾¿åç»­æ›´æ¢å®ç°æ–¹å¼

**ğŸ”¸ DAOå®ç°ç±»(Implementation)**ï¼š
- å®ç°DAOæ¥å£
- åŒ…å«å…·ä½“çš„æ•°æ®åº“æ“ä½œä»£ç 
- ä½¿ç”¨JDBCè¿›è¡Œæ•°æ®åº“è®¿é—®

**ğŸ”¸ ä¸šåŠ¡å±‚(Service)**ï¼š
- è°ƒç”¨DAOè¿›è¡Œæ•°æ®æ“ä½œ
- å¤„ç†ä¸šåŠ¡é€»è¾‘
- ä¸ç›´æ¥æ“ä½œæ•°æ®åº“

---

# 4. ğŸ“‹ å®ä½“ç±»Entityè®¾è®¡



## 4.1 ä»€ä¹ˆæ˜¯å®ä½“ç±»



**å®ä½“ç±»**ï¼šå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œç”¨æ¥è¡¨ç¤ºæ•°æ®åº“ä¸­çš„ä¸€è¡Œè®°å½•

> ğŸ’¡ **é€šä¿—ç†è§£**  
> å¦‚æœæ•°æ®åº“è¡¨æ˜¯ä¸€ä¸ªExcelè¡¨æ ¼ï¼Œé‚£ä¹ˆï¼š
> - è¡¨æ ¼çš„åˆ—å = å®ä½“ç±»çš„å±æ€§å
> - è¡¨æ ¼çš„ä¸€è¡Œæ•°æ® = å®ä½“ç±»çš„ä¸€ä¸ªå¯¹è±¡
> - è¡¨æ ¼ä¸­çš„æ•°æ®ç±»å‹ = å®ä½“ç±»å±æ€§çš„æ•°æ®ç±»å‹

## 4.2 å®ä½“ç±»è®¾è®¡è§„èŒƒ



**ä»¥Studentè¡¨ä¸ºä¾‹**ï¼š

```sql
-- æ•°æ®åº“è¡¨ç»“æ„
CREATE TABLE student (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    age INT,
    email VARCHAR(100)
);
```

**å¯¹åº”çš„å®ä½“ç±»**ï¼š

```java
public class Student {
    // å±æ€§å¯¹åº”æ•°æ®åº“å­—æ®µ
    private int id;
    private String name;
    private int age;
    private String email;
    
    // æ— å‚æ„é€ æ–¹æ³•ï¼ˆå¿…é¡»æœ‰ï¼‰
    public Student() {}
    
    // æœ‰å‚æ„é€ æ–¹æ³•ï¼ˆæ–¹ä¾¿åˆ›å»ºå¯¹è±¡ï¼‰
    public Student(String name, int age, String email) {
        this.name = name;
        this.age = age;
        this.email = email;
    }
    
    // å…¨å‚æ„é€ æ–¹æ³•
    public Student(int id, String name, int age, String email) {
        this.id = id;
        this.name = name;
        this.age = age;
        this.email = email;
    }
    
    // getterå’Œsetteræ–¹æ³•ï¼ˆå¿…é¡»æœ‰ï¼‰
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }
    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public int getAge() { return age; }
    public void setAge(int age) { this.age = age; }
    
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
    
    // toStringæ–¹æ³•ï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰
    @Override
    public String toString() {
        return "Student{id=" + id + ", name='" + name + "', age=" + age + ", email='" + email + "'}";
    }
}
```

## 4.3 å®ä½“ç±»è®¾è®¡è¦ç‚¹



**ğŸ¯ å‘½åè§„èŒƒ**ï¼š
- ç±»åä½¿ç”¨**å¤§é©¼å³°**å‘½åï¼š`Student`ã€`UserInfo`
- å±æ€§åä½¿ç”¨**å°é©¼å³°**å‘½åï¼š`userId`ã€`userName`
- ç±»åé€šå¸¸ä¸è¡¨åå¯¹åº”

**ğŸ”§ å¿…é¡»åŒ…å«çš„å†…å®¹**ï¼š
- **æ— å‚æ„é€ æ–¹æ³•**ï¼šæ¡†æ¶åˆ›å»ºå¯¹è±¡æ—¶éœ€è¦
- **getter/setteræ–¹æ³•**ï¼šç”¨äºå±æ€§è®¿é—®
- **toStringæ–¹æ³•**ï¼šæ–¹ä¾¿è°ƒè¯•å’Œæ—¥å¿—è¾“å‡º

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> - å±æ€§é€šå¸¸è®¾ä¸ºprivateï¼Œé€šè¿‡getter/setterè®¿é—®
> - ä¸»é”®å­—æ®µ(å¦‚id)çš„setterå¯ä»¥ä¸å¯¹å¤–æä¾›
> - æ—¥æœŸç±»å‹å»ºè®®ä½¿ç”¨`java.util.Date`æˆ–`LocalDateTime`

---

# 5. ğŸ¨ DAOæ¥å£è®¾è®¡è§„èŒƒ



## 5.1 ä¸ºä»€ä¹ˆè¦å®šä¹‰æ¥å£



**æ¥å£çš„ä½œç”¨**ï¼š

> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**  
> æ¥å£å°±åƒ"åˆåŒ"ï¼š
> - åˆåŒè§„å®šäº†è¦åšä»€ä¹ˆäº‹æƒ…ï¼ˆæ–¹æ³•åï¼‰
> - ä½†ä¸è§„å®šå…·ä½“æ€ä¹ˆåšï¼ˆå®ç°æ–¹å¼ï¼‰
> - ä¸ç®¡æ˜¯å¼ ä¸‰è¿˜æ˜¯æå››æ¥å®ç°ï¼Œéƒ½è¦æŒ‰åˆåŒæ‰§è¡Œ
> - è¿™æ ·å°±å¯ä»¥éšæ—¶æ›´æ¢ä¸åŒçš„å®ç°æ–¹å¼

## 5.2 CRUDåŸºæœ¬æ“ä½œå®šä¹‰



**CRUD = Create(å¢) + Read(æŸ¥) + Update(æ”¹) + Delete(åˆ )**

```java
public interface StudentDAO {
    // ========== å¢åŠ æ“ä½œ ==========
    
    /**
     * æ·»åŠ å­¦ç”Ÿ
     * @param student å­¦ç”Ÿå¯¹è±¡
     * @return å½±å“çš„è¡Œæ•°ï¼ŒæˆåŠŸè¿”å›1ï¼Œå¤±è´¥è¿”å›0
     */
    int addStudent(Student student);
    
    // ========== åˆ é™¤æ“ä½œ ==========
    
    /**
     * æ ¹æ®IDåˆ é™¤å­¦ç”Ÿ
     * @param id å­¦ç”ŸID
     * @return å½±å“çš„è¡Œæ•°
     */
    int deleteStudentById(int id);
    
    /**
     * æ ¹æ®å§“ååˆ é™¤å­¦ç”Ÿ
     * @param name å­¦ç”Ÿå§“å
     * @return å½±å“çš„è¡Œæ•°
     */
    int deleteStudentByName(String name);
    
    // ========== ä¿®æ”¹æ“ä½œ ==========
    
    /**
     * æ›´æ–°å­¦ç”Ÿä¿¡æ¯
     * @param student åŒ…å«æ–°ä¿¡æ¯çš„å­¦ç”Ÿå¯¹è±¡
     * @return å½±å“çš„è¡Œæ•°
     */
    int updateStudent(Student student);
    
    // ========== æŸ¥è¯¢æ“ä½œ ==========
    
    /**
     * æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿ
     * @param id å­¦ç”ŸID
     * @return å­¦ç”Ÿå¯¹è±¡ï¼Œæ‰¾ä¸åˆ°è¿”å›null
     */
    Student findStudentById(int id);
    
    /**
     * æ ¹æ®å§“åæŸ¥è¯¢å­¦ç”Ÿ
     * @param name å­¦ç”Ÿå§“å
     * @return å­¦ç”Ÿå¯¹è±¡ï¼Œæ‰¾ä¸åˆ°è¿”å›null
     */
    Student findStudentByName(String name);
    
    /**
     * æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿ
     * @return å­¦ç”Ÿåˆ—è¡¨ï¼Œæ²¡æœ‰æ•°æ®è¿”å›ç©ºåˆ—è¡¨
     */
    List<Student> findAllStudents();
    
    /**
     * æ ¹æ®å¹´é¾„èŒƒå›´æŸ¥è¯¢å­¦ç”Ÿ
     * @param minAge æœ€å°å¹´é¾„
     * @param maxAge æœ€å¤§å¹´é¾„
     * @return ç¬¦åˆæ¡ä»¶çš„å­¦ç”Ÿåˆ—è¡¨
     */
    List<Student> findStudentsByAgeRange(int minAge, int maxAge);
}
```

## 5.3 DAOæ¥å£å‘½åè§„èŒƒ



**æ–¹æ³•å‘½åè§„èŒƒè¡¨**ï¼š

| **æ“ä½œç±»å‹** | **å‘½åæ¨¡å¼** | **ç¤ºä¾‹** | **è¿”å›ç±»å‹** |
|------------|------------|----------|------------|
| ğŸ†• **å¢åŠ ** | `add...()` | `addStudent()` | `int`(å½±å“è¡Œæ•°) |
| ğŸ—‘ï¸ **åˆ é™¤** | `delete...By...()` | `deleteStudentById()` | `int`(å½±å“è¡Œæ•°) |
| âœï¸ **ä¿®æ”¹** | `update...()` | `updateStudent()` | `int`(å½±å“è¡Œæ•°) |
| ğŸ” **æŸ¥è¯¢å•ä¸ª** | `find...By...()` | `findStudentById()` | `Entity`å¯¹è±¡ |
| ğŸ“‹ **æŸ¥è¯¢å¤šä¸ª** | `find...()` | `findAllStudents()` | `List<Entity>` |
| ğŸ”¢ **ç»Ÿè®¡** | `count...()` | `countStudents()` | `int` |

**ğŸ¯ å‘½åè¦ç‚¹**ï¼š
- **åŠ¨è¯åœ¨å‰**ï¼š`add`ã€`delete`ã€`update`ã€`find`
- **å¯¹è±¡åç§°**ï¼š`Student`ã€`User`ã€`Order`
- **æ¡ä»¶è¯´æ˜**ï¼š`ById`ã€`ByName`ã€`ByAgeRange`

---

# 6. ğŸ”§ DAOæ¥å£å®ç°ç±»



## 6.1 å®ç°ç±»çš„åŸºæœ¬ç»“æ„



```java
public class StudentDAOImpl implements StudentDAO {
    
    // æ•°æ®åº“è¿æ¥ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥ä½¿ç”¨è¿æ¥æ± ï¼‰
    private Connection getConnection() throws SQLException {
        return DriverManager.getConnection(
            "jdbc:mysql://localhost:3306/school", 
            "username", 
            "password"
        );
    }
    
    // é‡Šæ”¾èµ„æºçš„å·¥å…·æ–¹æ³•
    private void closeResources(Connection conn, PreparedStatement ps, ResultSet rs) {
        try {
            if (rs != null) rs.close();
            if (ps != null) ps.close();
            if (conn != null) conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    
    // å…·ä½“çš„CRUDå®ç°æ–¹æ³•...
}
```

## 6.2 å¢åŠ æ“ä½œå®ç°



```java
@Override
public int addStudent(Student student) {
    Connection conn = null;
    PreparedStatement ps = null;
    
    try {
        conn = getConnection();
        String sql = "INSERT INTO student(name, age, email) VALUES(?, ?, ?)";
        ps = conn.prepareStatement(sql);
        
        // è®¾ç½®å‚æ•°
        ps.setString(1, student.getName());
        ps.setInt(2, student.getAge());
        ps.setString(3, student.getEmail());
        
        // æ‰§è¡Œå¹¶è¿”å›å½±å“è¡Œæ•°
        return ps.executeUpdate();
        
    } catch (SQLException e) {
        e.printStackTrace();
        return 0; // æ“ä½œå¤±è´¥
    } finally {
        closeResources(conn, ps, null);
    }
}
```

## 6.3 æŸ¥è¯¢æ“ä½œå®ç°



```java
@Override
public Student findStudentById(int id) {
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    
    try {
        conn = getConnection();
        String sql = "SELECT id, name, age, email FROM student WHERE id = ?";
        ps = conn.prepareStatement(sql);
        ps.setInt(1, id);
        
        rs = ps.executeQuery();
        
        // å¦‚æœæ‰¾åˆ°è®°å½•ï¼Œåˆ›å»ºStudentå¯¹è±¡
        if (rs.next()) {
            Student student = new Student();
            student.setId(rs.getInt("id"));
            student.setName(rs.getString("name"));
            student.setAge(rs.getInt("age"));
            student.setEmail(rs.getString("email"));
            return student;
        }
        
        return null; // æœªæ‰¾åˆ°
        
    } catch (SQLException e) {
        e.printStackTrace();
        return null;
    } finally {
        closeResources(conn, ps, rs);
    }
}

@Override
public List<Student> findAllStudents() {
    List<Student> students = new ArrayList<>();
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    
    try {
        conn = getConnection();
        String sql = "SELECT id, name, age, email FROM student";
        ps = conn.prepareStatement(sql);
        rs = ps.executeQuery();
        
        // éå†ç»“æœé›†ï¼Œåˆ›å»ºStudentå¯¹è±¡
        while (rs.next()) {
            Student student = new Student();
            student.setId(rs.getInt("id"));
            student.setName(rs.getString("name"));
            student.setAge(rs.getInt("age"));
            student.setEmail(rs.getString("email"));
            students.add(student);
        }
        
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        closeResources(conn, ps, rs);
    }
    
    return students;
}
```

## 6.4 æ›´æ–°å’Œåˆ é™¤æ“ä½œå®ç°



```java
@Override
public int updateStudent(Student student) {
    Connection conn = null;
    PreparedStatement ps = null;
    
    try {
        conn = getConnection();
        String sql = "UPDATE student SET name=?, age=?, email=? WHERE id=?";
        ps = conn.prepareStatement(sql);
        
        ps.setString(1, student.getName());
        ps.setInt(2, student.getAge());
        ps.setString(3, student.getEmail());
        ps.setInt(4, student.getId());
        
        return ps.executeUpdate();
        
    } catch (SQLException e) {
        e.printStackTrace();
        return 0;
    } finally {
        closeResources(conn, ps, null);
    }
}

@Override
public int deleteStudentById(int id) {
    Connection conn = null;
    PreparedStatement ps = null;
    
    try {
        conn = getConnection();
        String sql = "DELETE FROM student WHERE id = ?";
        ps = conn.prepareStatement(sql);
        ps.setInt(1, id);
        
        return ps.executeUpdate();
        
    } catch (SQLException e) {
        e.printStackTrace();
        return 0;
    } finally {
        closeResources(conn, ps, null);
    }
}
```

---

# 7. ğŸ›ï¸ åˆ†å±‚æ¶æ„ä¸èŒè´£åˆ’åˆ†



## 7.1 ä¸‰å±‚æ¶æ„æ¦‚è¿°



```
JavaWebä¸‰å±‚æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    è¡¨ç°å±‚(Webå±‚)      â”‚ â† Servletã€JSPï¼Œå¤„ç†HTTPè¯·æ±‚
â”‚    Controller        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸šåŠ¡å±‚(é€»è¾‘å±‚)     â”‚ â† Serviceï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘
â”‚    Service           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ•°æ®å±‚(æŒä¹…å±‚)     â”‚ â† DAOï¼Œå¤„ç†æ•°æ®åº“æ“ä½œ
â”‚    DAO               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ•°æ®åº“            â”‚ â† MySQLã€Oracleç­‰
â”‚    Database          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7.2 å„å±‚èŒè´£è¯¦è§£



**ğŸ¯ è¡¨ç°å±‚(Controllerå±‚)**ï¼š
```java
// Servletç¤ºä¾‹
public class StudentServlet extends HttpServlet {
    private StudentService studentService = new StudentServiceImpl();
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        String action = request.getParameter("action");
        
        if ("list".equals(action)) {
            // åªè´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œè°ƒç”¨ä¸šåŠ¡å±‚ï¼Œè¿”å›ç»“æœ
            List<Student> students = studentService.getAllStudents();
            request.setAttribute("students", students);
            request.getRequestDispatcher("/student_list.jsp").forward(request, response);
        }
        // ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç›´æ¥æ“ä½œæ•°æ®åº“
    }
}
```

**ğŸ”§ ä¸šåŠ¡å±‚(Serviceå±‚)**ï¼š
```java
public class StudentServiceImpl implements StudentService {
    private StudentDAO studentDAO = new StudentDAOImpl();
    
    @Override
    public boolean addStudent(String name, int age, String email) {
        // ä¸šåŠ¡é€»è¾‘ï¼šæ•°æ®éªŒè¯
        if (name == null || name.trim().isEmpty()) {
            return false; // å§“åä¸èƒ½ä¸ºç©º
        }
        if (age < 0 || age > 150) {
            return false; // å¹´é¾„ä¸åˆç†
        }
        
        // ä¸šåŠ¡é€»è¾‘ï¼šåˆ›å»ºå­¦ç”Ÿå¯¹è±¡
        Student student = new Student(name, age, email);
        
        // è°ƒç”¨DAOæ‰§è¡Œæ•°æ®æ“ä½œ
        return studentDAO.addStudent(student) > 0;
    }
}
```

**ğŸ’¾ æ•°æ®å±‚(DAOå±‚)**ï¼š
```java
public class StudentDAOImpl implements StudentDAO {
    @Override
    public int addStudent(Student student) {
        // åªè´Ÿè´£æ•°æ®åº“æ“ä½œï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
        // å…·ä½“çš„SQLæ‰§è¡Œä»£ç ...
    }
}
```

## 7.3 åˆ†å±‚çš„å¥½å¤„



**ğŸ“Š åˆ†å±‚ä¼˜åŠ¿å¯¹æ¯”**ï¼š

| **æ–¹é¢** | **ä¸åˆ†å±‚** | **åˆ†å±‚æ¶æ„** |
|---------|-----------|------------|
| ğŸ”„ **ä»£ç å¤ç”¨** | é‡å¤ä»£ç å¤š | å„å±‚å¯ç‹¬ç«‹å¤ç”¨ |
| ğŸ› ï¸ **ç»´æŠ¤æ€§** | ç‰µä¸€å‘åŠ¨å…¨èº« | ä¿®æ”¹å½±å“èŒƒå›´å° |
| ğŸ‘¥ **å›¢é˜Ÿåä½œ** | å®¹æ˜“å†²çª | å¯å¹¶è¡Œå¼€å‘ |
| ğŸ§ª **å¯æµ‹è¯•æ€§** | éš¾ä»¥å•å…ƒæµ‹è¯• | æ¯å±‚å¯ç‹¬ç«‹æµ‹è¯• |
| ğŸ“ˆ **æ‰©å±•æ€§** | æ‰©å±•å›°éš¾ | æ˜“äºæ‰©å±•åŠŸèƒ½ |

> ğŸ’¡ **è®°å¿†å£è¯€**  
> - Controllerï¼š**æ¥æ”¶è¯·æ±‚ï¼Œåˆ†å‘ä»»åŠ¡**
> - Serviceï¼š**å¤„ç†ä¸šåŠ¡ï¼Œåè°ƒèµ„æº**  
> - DAOï¼š**ä¸“å¿ƒæ•°æ®ï¼Œä¸é—®å…¶ä»–**

---

# 8. ğŸ§ª DAOæ¨¡å¼çš„æµ‹è¯•ç­–ç•¥



## 8.1 ä¸ºä»€ä¹ˆè¦æµ‹è¯•DAO



**æµ‹è¯•çš„é‡è¦æ€§**ï¼š
- **éªŒè¯åŠŸèƒ½**ï¼šç¡®ä¿æ•°æ®åº“æ“ä½œæ­£ç¡®
- **å‘ç°bug**ï¼šæå‰å‘ç°é—®é¢˜
- **æ–‡æ¡£ä½œç”¨**ï¼šæµ‹è¯•ä»£ç å°±æ˜¯ä½¿ç”¨è¯´æ˜
- **é‡æ„ä¿¡å¿ƒ**ï¼šä¿®æ”¹ä»£ç æ—¶æœ‰æµ‹è¯•ä¿éšœ

## 8.2 DAOå±‚æµ‹è¯•ç¤ºä¾‹



```java
public class StudentDAOTest {
    private StudentDAO studentDAO;
    
    @Before
    public void setUp() {
        studentDAO = new StudentDAOImpl();
        // å¯ä»¥å‡†å¤‡æµ‹è¯•æ•°æ®
    }
    
    @Test
    public void testAddStudent() {
        // å‡†å¤‡æµ‹è¯•æ•°æ®
        Student student = new Student("å¼ ä¸‰", 20, "zhangsan@test.com");
        
        // æ‰§è¡Œæµ‹è¯•
        int result = studentDAO.addStudent(student);
        
        // éªŒè¯ç»“æœ
        assertEquals(1, result); // åº”è¯¥è¿”å›1ï¼ˆå½±å“1è¡Œï¼‰
        
        // éªŒè¯æ•°æ®æ˜¯å¦çœŸçš„æ’å…¥äº†
        List<Student> students = studentDAO.findAllStudents();
        assertTrue(students.size() > 0);
    }
    
    @Test
    public void testFindStudentById() {
        // å…ˆæ’å…¥æµ‹è¯•æ•°æ®
        Student student = new Student("æå››", 22, "lisi@test.com");
        studentDAO.addStudent(student);
        
        // æŸ¥è¯¢æµ‹è¯•
        Student found = studentDAO.findStudentById(1);
        
        // éªŒè¯ç»“æœ
        assertNotNull(found);
        assertEquals("æå››", found.getName());
        assertEquals(22, found.getAge());
    }
}
```

## 8.3 æµ‹è¯•çš„æœ€ä½³å®è·µ



**ğŸ¯ æµ‹è¯•åŸåˆ™**ï¼š
- **ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªæµ‹è¯•ä¹‹é—´ä¸ç›¸äº’å½±å“
- **å¯é‡å¤**ï¼šå¤šæ¬¡è¿è¡Œç»“æœä¸€è‡´
- **æ¸…æ™°æ€§**ï¼šæµ‹è¯•ä»£ç è¦ç®€å•æ˜“æ‡‚
- **å®Œæ•´æ€§**ï¼šè¦†ç›–æ­£å¸¸å’Œå¼‚å¸¸æƒ…å†µ

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> - ä½¿ç”¨æµ‹è¯•æ•°æ®åº“ï¼Œä¸è¦ç”¨ç”Ÿäº§æ•°æ®åº“
> - æ¯æ¬¡æµ‹è¯•åæ¸…ç†æµ‹è¯•æ•°æ®
> - æµ‹è¯•å¼‚å¸¸æƒ…å†µï¼Œå¦‚SQLé”™è¯¯ã€ç½‘ç»œæ–­å¼€ç­‰

---

# 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



## 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ DAOæ¨¡å¼ï¼šä¸“é—¨è´Ÿè´£æ•°æ®è®¿é—®çš„è®¾è®¡æ¨¡å¼
ğŸ”¸ å®ä½“ç±»ï¼šå¯¹åº”æ•°æ®åº“è¡¨çš„Javaå¯¹è±¡ï¼ŒåŒ…å«å±æ€§å’Œæ–¹æ³•
ğŸ”¸ DAOæ¥å£ï¼šå®šä¹‰æ•°æ®æ“ä½œæ–¹æ³•ï¼Œä¸å«å…·ä½“å®ç°
ğŸ”¸ DAOå®ç°ç±»ï¼šå®ç°æ¥å£ï¼ŒåŒ…å«å…·ä½“çš„æ•°æ®åº“æ“ä½œä»£ç 
ğŸ”¸ åˆ†å±‚æ¶æ„ï¼šController â†’ Service â†’ DAO â†’ Database
```

## 9.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ DAOçš„æœ¬è´¨ä½œç”¨**
```
èŒè´£åˆ†ç¦»ï¼š
- è®©ä¸šåŠ¡ä»£ç ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
- è®©æ•°æ®ä»£ç ä¸“æ³¨æ•°æ®æ“ä½œ
- å„å¸å…¶èŒï¼Œé™ä½è€¦åˆ

ä»£ç å¤ç”¨ï¼š
- åŒä¸€ä¸ªDAOæ–¹æ³•å¯ä»¥è¢«å¤šä¸ªServiceè°ƒç”¨
- é¿å…é‡å¤çš„æ•°æ®åº“æ“ä½œä»£ç 

æ˜“äºç»´æŠ¤ï¼š
- ä¿®æ”¹æ•°æ®åº“ç»“æ„åªéœ€è¦æ”¹DAOå±‚
- æ›´æ¢æ•°æ®åº“åªéœ€è¦æ›´æ¢DAOå®ç°
```

**ğŸ”¹ æ¥å£è®¾è®¡çš„é‡è¦æ€§**
```
é¢å‘æ¥å£ç¼–ç¨‹ï¼š
- Serviceå±‚è°ƒç”¨DAOæ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°
- å¯ä»¥éšæ—¶æ›´æ¢ä¸åŒçš„DAOå®ç°
- ä¾¿äºå•å…ƒæµ‹è¯•å’ŒMock

ç»Ÿä¸€è§„èŒƒï¼š
- å›¢é˜Ÿå¼€å‘æ—¶æœ‰ç»Ÿä¸€çš„æ–¹æ³•å‘½åè§„èŒƒ
- æ–°äººå®¹æ˜“ç†è§£å’Œä½¿ç”¨
```

## 9.3 å®é™…åº”ç”¨æŒ‡å¯¼



**ğŸ¯ ä½¿ç”¨åœºæ™¯**ï¼š
- **å°å‹é¡¹ç›®**ï¼šæ‰‹å†™DAOï¼Œçµæ´»æ§åˆ¶
- **ä¸­å‹é¡¹ç›®**ï¼šç»“åˆæ•°æ®åº“è¿æ¥æ± ä½¿ç”¨
- **å¤§å‹é¡¹ç›®**ï¼šé…åˆMyBatisã€Hibernateç­‰ORMæ¡†æ¶

**ğŸ”§ å¼€å‘æ­¥éª¤**ï¼š
1. **è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„**
2. **åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»**
3. **å®šä¹‰DAOæ¥å£**ï¼ˆå…ˆå®šä¹‰éœ€è¦ä»€ä¹ˆæ–¹æ³•ï¼‰
4. **å®ç°DAOæ¥å£**ï¼ˆå…·ä½“çš„æ•°æ®åº“æ“ä½œï¼‰
5. **ç¼–å†™Serviceå±‚**ï¼ˆè°ƒç”¨DAOï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼‰
6. **ç¼–å†™æµ‹è¯•ä»£ç **ï¼ˆéªŒè¯DAOåŠŸèƒ½ï¼‰

**ğŸ’¡ æœ€ä½³å®è·µ**ï¼š
- **å‘½åè§„èŒƒ**ï¼šä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•å‘½åè§„åˆ™
- **å¼‚å¸¸å¤„ç†**ï¼šå¦¥å–„å¤„ç†SQLå¼‚å¸¸
- **èµ„æºç®¡ç†**ï¼šåŠæ—¶é‡Šæ”¾æ•°æ®åº“è¿æ¥
- **äº‹åŠ¡ç®¡ç†**ï¼šåœ¨Serviceå±‚å¤„ç†äº‹åŠ¡
- **å‚æ•°éªŒè¯**ï¼šåœ¨Serviceå±‚éªŒè¯ä¸šåŠ¡å‚æ•°

## 9.4 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ



**â“ å®ä½“ç±»å±æ€§åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ**
```java
// åœ¨ResultSetæ˜ å°„æ—¶ä½¿ç”¨å­—æ®µåˆ«å
String sql = "SELECT user_name AS userName FROM user WHERE id = ?";
```

**â“ å¦‚ä½•å¤„ç†å¤§é‡æ•°æ®çš„æŸ¥è¯¢ï¼Ÿ**
```java
// ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢
public List<Student> findStudentsByPage(int page, int size) {
    String sql = "SELECT * FROM student LIMIT ?, ?";
    // è®¾ç½®å‚æ•°ï¼šps.setInt(1, (page-1)*size); ps.setInt(2, size);
}
```

**â“ å¦‚ä½•å¤„ç†å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ï¼Ÿ**
```java
// åŠ¨æ€æ„å»ºSQLè¯­å¥
public List<Student> findStudentsByCondition(String name, Integer minAge, Integer maxAge) {
    StringBuilder sql = new StringBuilder("SELECT * FROM student WHERE 1=1");
    if (name != null) sql.append(" AND name LIKE ?");
    if (minAge != null) sql.append(" AND age >= ?");
    if (maxAge != null) sql.append(" AND age <= ?");
    // æ ¹æ®æ¡ä»¶è®¾ç½®å‚æ•°...
}
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- **DAO = æ•°æ®è®¿é—®çš„ä¸“ä¸šç®¡å®¶**
- **æ¥å£å®šä¹‰è§„èŒƒï¼Œå®ç°ç±»å¤„ç†ç»†èŠ‚**
- **åˆ†å±‚æ¶æ„å„å¸å…¶èŒï¼ŒèŒè´£æ¸…æ™°æ˜“ç»´æŠ¤**
- **æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œä¿è¯ä»£ç è´¨é‡**