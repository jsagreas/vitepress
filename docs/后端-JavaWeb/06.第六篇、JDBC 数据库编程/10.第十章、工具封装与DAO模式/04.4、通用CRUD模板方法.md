---
title: 4ã€é€šç”¨CRUDæ¨¡æ¿æ–¹æ³•
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯é€šç”¨CRUDæ¨¡æ¿æ–¹æ³•](#1-ä»€ä¹ˆæ˜¯é€šç”¨CRUDæ¨¡æ¿æ–¹æ³•)
2. [ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿æ–¹æ³•](#2-ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿æ–¹æ³•)
3. [æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ ¸å¿ƒæ€æƒ³](#3-æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ ¸å¿ƒæ€æƒ³)
4. [RowMapperè¡Œæ˜ å°„å™¨è¯¦è§£](#4-RowMapperè¡Œæ˜ å°„å™¨è¯¦è§£)
5. [é€šç”¨CRUDæ¨¡æ¿å®ç°](#5-é€šç”¨CRUDæ¨¡æ¿å®ç°)
6. [å®é™…åº”ç”¨æ¡ˆä¾‹](#6-å®é™…åº”ç”¨æ¡ˆä¾‹)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯é€šç”¨CRUDæ¨¡æ¿æ–¹æ³•


### 1.1 æ¦‚å¿µç†è§£


> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šæƒ³è±¡ä½ æ¯å¤©åšé¥­ï¼Œè™½ç„¶èœå“ä¸åŒï¼Œä½†æ­¥éª¤éƒ½æ˜¯ï¼šå¤‡æ–™â†’ä¸‹é”…â†’è°ƒå‘³â†’å‡ºé”…ã€‚CRUDæ¨¡æ¿æ–¹æ³•å°±æ˜¯æŠŠæ•°æ®åº“æ“ä½œçš„"åšé¥­æ­¥éª¤"å›ºå®šä¸‹æ¥ï¼Œåªéœ€è¦æ¢ä¸åŒçš„"èœå“"ï¼ˆå…·ä½“SQLå’Œæ•°æ®å¤„ç†ï¼‰ã€‚

**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
CRUDæ¨¡æ¿æ–¹æ³• = å›ºå®šçš„æ•°æ®åº“æ“ä½œæµç¨‹ + å¯å˜çš„å…·ä½“ä¸šåŠ¡é€»è¾‘

å°±åƒç”Ÿäº§çº¿ï¼š
ğŸ­ å›ºå®šæµç¨‹ï¼šè¿æ¥â†’æ‰§è¡Œâ†’å¤„ç†ç»“æœâ†’å…³é—­
ğŸ”§ å¯å˜éƒ¨åˆ†ï¼šå…·ä½“SQLã€å‚æ•°ã€ç»“æœå¤„ç†æ–¹å¼
```

**ğŸ”¸ è§£å†³çš„é—®é¢˜**
- **ä»£ç é‡å¤**ï¼šæ¯ä¸ªDAOéƒ½å†™ç›¸ä¼¼çš„è¿æ¥ã€å…³é—­ä»£ç 
- **å®¹æ˜“å‡ºé”™**ï¼šæ‰‹åŠ¨ç®¡ç†èµ„æºå®¹æ˜“å¿˜è®°å…³é—­è¿æ¥
- **ç»´æŠ¤å›°éš¾**ï¼šä¿®æ”¹æ•°æ®åº“é…ç½®éœ€è¦æ”¹å¾ˆå¤šåœ°æ–¹

### 1.2 å®é™…æ•ˆæœå¯¹æ¯”


**ä¼ ç»Ÿæ–¹å¼ vs æ¨¡æ¿æ–¹æ³•ï¼š**

```
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªæ–¹æ³•éƒ½è¦å†™
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è·å–è¿æ¥                 â”‚
â”‚ 2. åˆ›å»ºPreparedStatement    â”‚  
â”‚ 3. è®¾ç½®å‚æ•°                 â”‚
â”‚ 4. æ‰§è¡ŒSQL                  â”‚ â† åªæœ‰è¿™éƒ¨åˆ†ä¸åŒ
â”‚ 5. å¤„ç†ç»“æœ                 â”‚ â† åªæœ‰è¿™éƒ¨åˆ†ä¸åŒ  
â”‚ 6. å…³é—­èµ„æº                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¨¡æ¿æ–¹æ³•ï¼šåªéœ€è¦å†™å˜åŒ–çš„éƒ¨åˆ†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡æ¿è´Ÿè´£ï¼š1,2,6æ­¥éª¤         â”‚
â”‚ ä½ åªå†™ï¼š3,4,5æ­¥éª¤           â”‚ â† ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿æ–¹æ³•


### 2.1 ä¼ ç»ŸJDBCä»£ç çš„ç—›ç‚¹


**ğŸ”¸ ä»£ç é‡å¤ä¸¥é‡**
```java
// æ¯ä¸ªæŸ¥è¯¢æ–¹æ³•éƒ½è¦å†™è¿™äº›é‡å¤ä»£ç 
public User findById(int id) {
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    try {
        conn = getConnection();  // é‡å¤
        ps = conn.prepareStatement("SELECT * FROM user WHERE id = ?");
        ps.setInt(1, id);
        rs = ps.executeQuery();
        // ... å¤„ç†ç»“æœ
    } catch (SQLException e) {   // é‡å¤
        e.printStackTrace();
    } finally {
        // å…³é—­èµ„æºçš„é‡å¤ä»£ç      // é‡å¤
        if (rs != null) try { rs.close(); } catch (SQLException e) {}
        if (ps != null) try { ps.close(); } catch (SQLException e) {}  
        if (conn != null) try { conn.close(); } catch (SQLException e) {}
    }
}
```

**ğŸ”¸ èµ„æºç®¡ç†å®¹æ˜“å‡ºé”™**
> âš ï¸ **å¸¸è§é—®é¢˜**ï¼šå¿˜è®°å…³é—­è¿æ¥å¯¼è‡´è¿æ¥æ± è€—å°½ï¼Œç¨‹åºå´©æºƒ

**ğŸ”¸ å¼‚å¸¸å¤„ç†å¤æ‚**
```
æ¯ä¸ªæ–¹æ³•éƒ½è¦å¤„ç†ï¼š
â€¢ SQLException - æ•°æ®åº“å¼‚å¸¸  
â€¢ ç©ºæŒ‡é’ˆå¼‚å¸¸
â€¢ èµ„æºå…³é—­å¼‚å¸¸
```

### 2.2 æ¨¡æ¿æ–¹æ³•å¸¦æ¥çš„å¥½å¤„


**âœ… ä¼˜åŠ¿å¯¹æ¯”è¡¨**

| æ–¹é¢ | **ä¼ ç»Ÿæ–¹å¼** | **æ¨¡æ¿æ–¹æ³•** |
|------|-------------|-------------|
| ğŸ”„ **ä»£ç é‡ç”¨** | `æ¯ä¸ªæ–¹æ³•é‡å†™è¿æ¥é€»è¾‘` | `ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ä½¿ç”¨` |
| ğŸ›¡ï¸ **èµ„æºç®¡ç†** | `æ‰‹åŠ¨ç®¡ç†ï¼Œå®¹æ˜“å‡ºé”™` | `è‡ªåŠ¨ç®¡ç†ï¼Œå®‰å…¨å¯é ` |
| ğŸ› **å¼‚å¸¸å¤„ç†** | `æ¯å¤„éƒ½è¦å†™try-catch` | `ç»Ÿä¸€å¤„ç†ï¼Œç®€åŒ–ä»£ç ` |
| ğŸ”§ **ç»´æŠ¤æ€§** | `ä¿®æ”¹éœ€è¦æ”¹å¤šä¸ªåœ°æ–¹` | `ä¿®æ”¹æ¨¡æ¿å³å¯` |
| ğŸ“š **å¯è¯»æ€§** | `ä¸šåŠ¡é€»è¾‘è¢«é‡å¤ä»£ç æ©ç›–` | `ä¸“æ³¨ä¸šåŠ¡é€»è¾‘` |

---

## 3. ğŸ—ï¸ æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ ¸å¿ƒæ€æƒ³


### 3.1 è®¾è®¡æ¨¡å¼ç†è§£


> ğŸ’­ **ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒéº¦å½“åŠ³çš„åˆ¶ä½œæµç¨‹ï¼Œä¸ç®¡æ˜¯å·¨æ— éœ¸è¿˜æ˜¯é¸¡è…¿å ¡ï¼Œåˆ¶ä½œæ­¥éª¤éƒ½æ˜¯ï¼šå‡†å¤‡é¢åŒ…â†’æ”¾è‚‰â†’åŠ èœâ†’åŒ…è£…ã€‚åªæ˜¯å…·ä½“çš„è‚‰å’Œèœä¸åŒã€‚

**ğŸ”¸ æ¨¡å¼ç»“æ„**
```
æŠ½è±¡æ¨¡æ¿ç±» (AbstractTemplate)
â”œâ”€â”€ templateMethod()    â† å®šä¹‰ç®—æ³•éª¨æ¶ï¼ˆå›ºå®šæµç¨‹ï¼‰
â”œâ”€â”€ step1()            â† å…·ä½“å®ç°
â”œâ”€â”€ step2()            â† æŠ½è±¡æ–¹æ³•ï¼ˆå­ç±»å®ç°ï¼‰
â””â”€â”€ step3()            â† å…·ä½“å®ç°

å…·ä½“å®ç°ç±» (ConcreteClass)  
â””â”€â”€ step2()            â† å®ç°æŠ½è±¡æ–¹æ³•
```

### 3.2 JDBCæ¨¡æ¿æ–¹æ³•è®¾è®¡


**ğŸ”¸ æ ¸å¿ƒæ€è·¯**
```
JDBCæ“ä½œçš„å›ºå®šæµç¨‹ï¼š
1ï¸âƒ£ è·å–æ•°æ®åº“è¿æ¥     â† æ¨¡æ¿è´Ÿè´£
2ï¸âƒ£ åˆ›å»ºSQLè¯­å¥        â† æ¨¡æ¿è´Ÿè´£  
3ï¸âƒ£ è®¾ç½®SQLå‚æ•°        â† å›è°ƒæ¥å£å®ç°
4ï¸âƒ£ æ‰§è¡ŒSQL           â† æ¨¡æ¿è´Ÿè´£
5ï¸âƒ£ å¤„ç†æŸ¥è¯¢ç»“æœ       â† å›è°ƒæ¥å£å®ç°
6ï¸âƒ£ å…³é—­æ•°æ®åº“èµ„æº     â† æ¨¡æ¿è´Ÿè´£
```

**ğŸ”¸ å›è°ƒæ¥å£è®¾è®¡**
```java
// å‚æ•°è®¾ç½®å›è°ƒ
public interface PreparedStatementSetter {
    void setValues(PreparedStatement ps) throws SQLException;
}

// ç»“æœå¤„ç†å›è°ƒ  
public interface ResultSetExtractor<T> {
    T extractData(ResultSet rs) throws SQLException;
}
```

### 3.3 æ ¸å¿ƒä¼˜åŠ¿


**ğŸ¯ å…³é”®ç†è§£**
- **æ§åˆ¶åè½¬**ï¼šä¸æ˜¯ä½ è°ƒç”¨æ¡†æ¶ï¼Œè€Œæ˜¯æ¡†æ¶è°ƒç”¨ä½ çš„ä»£ç 
- **èŒè´£åˆ†ç¦»**ï¼šæ¨¡æ¿ç®¡åŸºç¡€è®¾æ–½ï¼Œå›è°ƒç®¡ä¸šåŠ¡é€»è¾‘  
- **ä»£ç å¤ç”¨**ï¼šä¸€ä¸ªæ¨¡æ¿æ”¯æŒæ‰€æœ‰CRUDæ“ä½œ

---

## 4. ğŸ”„ RowMapperè¡Œæ˜ å°„å™¨è¯¦è§£


### 4.1 ä»€ä¹ˆæ˜¯RowMapper


> ğŸ’¡ **é€šä¿—ç†è§£**ï¼šæ•°æ®åº“æŸ¥è¯¢ç»“æœå°±åƒExcelè¡¨æ ¼ï¼ŒRowMapperå°±æ˜¯å‘Šè¯‰ç¨‹åº"æ€ä¹ˆæŠŠè¡¨æ ¼çš„ä¸€è¡Œæ•°æ®è½¬æ¢æˆJavaå¯¹è±¡"çš„ç¿»è¯‘å™¨ã€‚

**ğŸ”¸ æ ¸å¿ƒä½œç”¨**
```
æ•°æ®åº“ç»“æœ â”€â”€â”€â”€â”€â”€â†’ Javaå¯¹è±¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  | name  â”‚    â”‚ Userå¯¹è±¡     â”‚
â”‚ 1   | å¼ ä¸‰  â”‚ â•â•â†’â”‚ id = 1      â”‚  
â”‚ 2   | æå››  â”‚    â”‚ name = "å¼ ä¸‰"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     ResultSet         Java Bean
```

### 4.2 RowMapperæ¥å£è®¾è®¡


```java
@FunctionalInterface
public interface RowMapper<T> {
    /**
     * å°†ResultSetçš„å½“å‰è¡Œæ˜ å°„ä¸ºå¯¹è±¡
     * @param rs ResultSetå¯¹è±¡ï¼ˆå·²ç»å®šä½åˆ°æŸä¸€è¡Œï¼‰
     * @param rowNum å½“å‰è¡Œå·ï¼ˆä»0å¼€å§‹ï¼‰
     * @return æ˜ å°„åçš„å¯¹è±¡
     */
    T mapRow(ResultSet rs, int rowNum) throws SQLException;
}
```

**ğŸ”¸ ä½¿ç”¨æ–¹å¼**
```java
// Lambdaè¡¨è¾¾å¼æ–¹å¼ï¼ˆæ¨èï¼‰
RowMapper<User> userMapper = (rs, rowNum) -> {
    User user = new User();
    user.setId(rs.getInt("id"));
    user.setName(rs.getString("name"));
    user.setEmail(rs.getString("email"));
    return user;
};

// åŒ¿åå†…éƒ¨ç±»æ–¹å¼
RowMapper<User> userMapper = new RowMapper<User>() {
    @Override
    public User mapRow(ResultSet rs, int rowNum) throws SQLException {
        User user = new User();
        user.setId(rs.getInt("id"));
        user.setName(rs.getString("name"));
        return user;
    }
};
```

### 4.3 å¸¸ç”¨æ˜ å°„æ¨¡å¼


**ğŸ”¸ åŸºç¡€æ•°æ®ç±»å‹æ˜ å°„**
```java
// æŸ¥è¯¢å•ä¸ªæ•°å€¼
RowMapper<Integer> countMapper = (rs, rowNum) -> rs.getInt(1);

// æŸ¥è¯¢å­—ç¬¦ä¸²
RowMapper<String> nameMapper = (rs, rowNum) -> rs.getString("name");
```

**ğŸ”¸ å¤æ‚å¯¹è±¡æ˜ å°„**
```java
RowMapper<User> userMapper = (rs, rowNum) -> {
    User user = new User();
    user.setId(rs.getInt("id"));
    user.setName(rs.getString("name"));
    user.setEmail(rs.getString("email"));
    // å¤„ç†æ—¶é—´å­—æ®µ
    user.setCreateTime(rs.getTimestamp("create_time"));
    // å¤„ç†å¯èƒ½ä¸ºç©ºçš„å­—æ®µ
    user.setAge(rs.getObject("age", Integer.class));
    return user;
};
```

**ğŸ”¸ æ˜ å°„æœ€ä½³å®è·µ**
> âœ… **æ¨èåšæ³•**ï¼š
> - ä½¿ç”¨å…·ä½“çš„å­—æ®µåè€Œä¸æ˜¯ç´¢å¼•
> - å¤„ç†nullå€¼æƒ…å†µ
> - å¯¹æ—¥æœŸæ—¶é—´å­—æ®µä½¿ç”¨åˆé€‚çš„ç±»å‹

---

## 5. ğŸ› ï¸ é€šç”¨CRUDæ¨¡æ¿å®ç°


### 5.1 æ ¸å¿ƒæ¨¡æ¿ç±»è®¾è®¡


```java
/**
 * JDBCæ¨¡æ¿å·¥å…·ç±» - æä¾›é€šç”¨çš„æ•°æ®åº“æ“ä½œæ–¹æ³•
 */
public class JdbcTemplate {
    
    /**
     * æŸ¥è¯¢å•ä¸ªå¯¹è±¡
     */
    public <T> T queryForObject(String sql, RowMapper<T> rowMapper, Object... params) {
        List<T> results = query(sql, rowMapper, params);
        if (results.isEmpty()) {
            return null;
        }
        if (results.size() > 1) {
            throw new RuntimeException("æœŸæœ›æŸ¥è¯¢1ä¸ªç»“æœï¼Œä½†å®é™…æŸ¥è¯¢åˆ°" + results.size() + "ä¸ª");
        }
        return results.get(0);
    }
    
    /**
     * æŸ¥è¯¢å¯¹è±¡åˆ—è¡¨
     */
    public <T> List<T> query(String sql, RowMapper<T> rowMapper, Object... params) {
        return execute(sql, ps -> {
            setParameters(ps, params);
            ResultSet rs = ps.executeQuery();
            
            List<T> results = new ArrayList<>();
            int rowNum = 0;
            while (rs.next()) {
                results.add(rowMapper.mapRow(rs, rowNum++));
            }
            return results;
        });
    }
    
    /**
     * æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆINSERT, UPDATE, DELETEï¼‰
     */
    public int update(String sql, Object... params) {
        return execute(sql, ps -> {
            setParameters(ps, params);
            return ps.executeUpdate();
        });
    }
}
```

### 5.2 æ ¸å¿ƒæ‰§è¡Œæ¨¡æ¿


```java
/**
 * æ ¸å¿ƒæ¨¡æ¿æ–¹æ³• - ç»Ÿä¸€å¤„ç†è¿æ¥ã€å¼‚å¸¸ã€èµ„æºå…³é—­
 */
private <T> T execute(String sql, PreparedStatementCallback<T> action) {
    Connection conn = null;
    PreparedStatement ps = null;
    
    try {
        // 1. è·å–è¿æ¥
        conn = getConnection();
        
        // 2. åˆ›å»ºPreparedStatement
        ps = conn.prepareStatement(sql);
        
        // 3. æ‰§è¡Œå›è°ƒæ“ä½œï¼ˆå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼‰
        return action.doInPreparedStatement(ps);
        
    } catch (SQLException e) {
        throw new RuntimeException("æ•°æ®åº“æ“ä½œå¤±è´¥: " + sql, e);
    } finally {
        // 4. ç¡®ä¿èµ„æºè¢«æ­£ç¡®å…³é—­
        closeResources(ps, conn);
    }
}

/**
 * å›è°ƒæ¥å£ - å®šä¹‰å…·ä½“çš„SQLæ“ä½œ
 */
@FunctionalInterface
private interface PreparedStatementCallback<T> {
    T doInPreparedStatement(PreparedStatement ps) throws SQLException;
}
```

### 5.3 å‚æ•°è®¾ç½®å·¥å…·æ–¹æ³•


```java
/**
 * è®¾ç½®SQLå‚æ•°çš„é€šç”¨æ–¹æ³•
 */
private void setParameters(PreparedStatement ps, Object... params) throws SQLException {
    if (params != null) {
        for (int i = 0; i < params.length; i++) {
            Object param = params[i];
            if (param == null) {
                ps.setNull(i + 1, Types.NULL);
            } else if (param instanceof String) {
                ps.setString(i + 1, (String) param);
            } else if (param instanceof Integer) {
                ps.setInt(i + 1, (Integer) param);
            } else if (param instanceof Long) {
                ps.setLong(i + 1, (Long) param);
            } else if (param instanceof Date) {
                ps.setTimestamp(i + 1, new Timestamp(((Date) param).getTime()));
            } else {
                ps.setObject(i + 1, param);
            }
        }
    }
}
```

**ğŸ”¸ å‚æ•°è®¾ç½®è¯´æ˜**
> ğŸ’¡ **å…³é”®ç†è§£**ï¼šè¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ®å‚æ•°çš„å®é™…ç±»å‹ï¼Œè°ƒç”¨PreparedStatementç›¸åº”çš„setXxxæ–¹æ³•ï¼Œé¿å…äº†æ‰‹åŠ¨åˆ¤æ–­ç±»å‹çš„ç¹çå·¥ä½œã€‚

---

## 6. ğŸ® å®é™…åº”ç”¨æ¡ˆä¾‹


### 6.1 ç”¨æˆ·DAOå®ç°


```java
public class UserDao {
    private JdbcTemplate jdbcTemplate = new JdbcTemplate();
    
    // ç”¨æˆ·æ˜ å°„å™¨ï¼ˆå¯ä»¥å¤ç”¨ï¼‰
    private static final RowMapper<User> USER_MAPPER = (rs, rowNum) -> {
        User user = new User();
        user.setId(rs.getInt("id"));
        user.setName(rs.getString("name"));
        user.setEmail(rs.getString("email"));
        user.setCreateTime(rs.getTimestamp("create_time"));
        return user;
    };
    
    /**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
     */
    public User findById(Integer id) {
        String sql = "SELECT * FROM user WHERE id = ?";
        return jdbcTemplate.queryForObject(sql, USER_MAPPER, id);
    }
    
    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
     */
    public List<User> findAll() {
        String sql = "SELECT * FROM user ORDER BY create_time DESC";
        return jdbcTemplate.query(sql, USER_MAPPER);
    }
    
    /**
     * æ ¹æ®åç§°æ¨¡ç³ŠæŸ¥è¯¢
     */
    public List<User> findByNameLike(String name) {
        String sql = "SELECT * FROM user WHERE name LIKE ? ORDER BY name";
        return jdbcTemplate.query(sql, USER_MAPPER, "%" + name + "%");
    }
    
    /**
     * ä¿å­˜ç”¨æˆ·
     */
    public int save(User user) {
        String sql = "INSERT INTO user(name, email, create_time) VALUES(?, ?, ?)";
        return jdbcTemplate.update(sql, user.getName(), user.getEmail(), new Date());
    }
    
    /**
     * æ›´æ–°ç”¨æˆ·
     */
    public int update(User user) {
        String sql = "UPDATE user SET name = ?, email = ? WHERE id = ?";
        return jdbcTemplate.update(sql, user.getName(), user.getEmail(), user.getId());
    }
    
    /**
     * åˆ é™¤ç”¨æˆ·
     */
    public int deleteById(Integer id) {
        String sql = "DELETE FROM user WHERE id = ?";
        return jdbcTemplate.update(sql, id);
    }
    
    /**
     * ç»Ÿè®¡ç”¨æˆ·æ•°é‡
     */
    public Integer count() {
        String sql = "SELECT COUNT(*) FROM user";
        return jdbcTemplate.queryForObject(sql, (rs, rowNum) -> rs.getInt(1));
    }
}
```

### 6.2 ä½¿ç”¨ç¤ºä¾‹


```java
public class UserService {
    private UserDao userDao = new UserDao();
    
    public void demo() {
        // æŸ¥è¯¢å•ä¸ªç”¨æˆ·
        User user = userDao.findById(1);
        System.out.println("ç”¨æˆ·ä¿¡æ¯ï¼š" + user.getName());
        
        // æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
        List<User> users = userDao.findAll();
        System.out.println("ç”¨æˆ·æ€»æ•°ï¼š" + users.size());
        
        // æ¨¡ç³ŠæŸ¥è¯¢
        List<User> searchResults = userDao.findByNameLike("å¼ ");
        System.out.println("å§“å¼ çš„ç”¨æˆ·ï¼š" + searchResults.size() + "ä¸ª");
        
        // æ–°å¢ç”¨æˆ·
        User newUser = new User();
        newUser.setName("æ–°ç”¨æˆ·");
        newUser.setEmail("new@example.com");
        int rows = userDao.save(newUser);
        System.out.println("æ–°å¢äº†" + rows + "ä¸ªç”¨æˆ·");
        
        // ç»Ÿè®¡æ•°é‡
        Integer totalCount = userDao.count();
        System.out.println("æ•°æ®åº“ä¸­å…±æœ‰" + totalCount + "ä¸ªç”¨æˆ·");
    }
}
```

### 6.3 ä»£ç å¯¹æ¯”æ•ˆæœ


**ğŸ”¸ ä»£ç é‡å¯¹æ¯”**
```
ä¼ ç»ŸJDBCæ–¹å¼ï¼š
â€¢ æ¯ä¸ªæ–¹æ³•å¹³å‡20-30è¡Œä»£ç 
â€¢ å¤§é‡é‡å¤çš„è¿æ¥ç®¡ç†ä»£ç 
â€¢ å¤æ‚çš„å¼‚å¸¸å¤„ç†é€»è¾‘

æ¨¡æ¿æ–¹æ³•æ–¹å¼ï¼š  
â€¢ æ¯ä¸ªæ–¹æ³•å¹³å‡3-5è¡Œä»£ç      â† å‡å°‘80%ä»£ç é‡
â€¢ ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
â€¢ ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†
```

**ğŸ”¸ å®‰å…¨æ€§æå‡**
> âœ… **è‡ªåŠ¨èµ„æºç®¡ç†**ï¼šæ°¸è¿œä¸ä¼šå¿˜è®°å…³é—­è¿æ¥
> âœ… **ç»Ÿä¸€å¼‚å¸¸å¤„ç†**ï¼šæ‰€æœ‰æ•°æ®åº“å¼‚å¸¸éƒ½è¢«æ­£ç¡®å¤„ç†  
> âœ… **å‚æ•°åŒ–æŸ¥è¯¢**ï¼šé˜²æ­¢SQLæ³¨å…¥æ”»å‡»

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ é€šç”¨CRUDæ¨¡æ¿æ–¹æ³• = è®¾è®¡æ¨¡å¼ + å›è°ƒæœºåˆ¶ + èµ„æºç®¡ç†

ğŸ”¸ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šå›ºå®šæµç¨‹ + å¯å˜å®ç°
ğŸ”¸ RowMapperæœºåˆ¶ï¼šResultSet â†’ Javaå¯¹è±¡çš„è½¬æ¢å™¨  
ğŸ”¸ å›è°ƒæ¥å£è®¾è®¡ï¼šæ§åˆ¶åè½¬ï¼Œè®©æ¡†æ¶è°ƒç”¨ä¸šåŠ¡ä»£ç 
ğŸ”¸ å‚æ•°åŒ–æŸ¥è¯¢ï¼šè‡ªåŠ¨å¤„ç†ä¸åŒç±»å‹å‚æ•°çš„è®¾ç½®
ğŸ”¸ èµ„æºè‡ªåŠ¨ç®¡ç†ï¼šç»Ÿä¸€çš„è¿æ¥è·å–å’Œé‡Šæ”¾
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆä½¿ç”¨æ¨¡æ¿æ–¹æ³•**
```
è§£å†³ç—›ç‚¹ï¼š
â€¢ ä»£ç é‡å¤ â†’ ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ä½¿ç”¨
â€¢ èµ„æºæ³„æ¼ â†’ è‡ªåŠ¨ç®¡ç†ï¼Œå®‰å…¨å¯é   
â€¢ å¼‚å¸¸å¤æ‚ â†’ ç»Ÿä¸€å¤„ç†ï¼Œç®€åŒ–ä»£ç 
â€¢ ç»´æŠ¤å›°éš¾ â†’ ä¿®æ”¹æ¨¡æ¿å³å¯
```

**ğŸ”¹ RowMapperçš„æœ¬è´¨**
```
æ ¸å¿ƒç†è§£ï¼š
â€¢ ä¸æ˜¯å¤æ‚çš„æŠ€æœ¯ï¼Œå°±æ˜¯ä¸€ä¸ª"ç¿»è¯‘å™¨"
â€¢ å‘Šè¯‰ç¨‹åºæ€ä¹ˆæŠŠæ•°æ®åº“çš„ä¸€è¡Œè½¬æ¢æˆå¯¹è±¡
â€¢ å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼ç®€åŒ–ç¼–å†™
â€¢ ä¸€ä¸ªMapperå¯ä»¥åœ¨å¤šä¸ªæ–¹æ³•ä¸­å¤ç”¨
```

**ğŸ”¹ å›è°ƒæœºåˆ¶çš„ç²¾é«“**
```
è®¾è®¡æ€æƒ³ï¼š
â€¢ æ¡†æ¶è´Ÿè´£"æ€ä¹ˆåš"ï¼ˆè¿æ¥ã€æ‰§è¡Œã€å…³é—­ï¼‰
â€¢ åº”ç”¨è´Ÿè´£"åšä»€ä¹ˆ"ï¼ˆå…·ä½“SQLå’Œæ•°æ®å¤„ç†ï¼‰
â€¢ èŒè´£åˆ†ç¦»ï¼Œå„å¸å…¶èŒ
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ å¼€å‘æ•ˆç‡æå‡**
- **ç¼–ç é€Ÿåº¦**ï¼šå†™DAOæ–¹æ³•ä»30è¡Œä»£ç å˜æˆ3è¡Œ
- **ç»´æŠ¤æˆæœ¬**ï¼šä¿®æ”¹æ•°æ®åº“é…ç½®åªéœ€æ”¹ä¸€å¤„
- **æµ‹è¯•æ–¹ä¾¿**ï¼šæ¨¡æ¿æ–¹æ³•ç»è¿‡å……åˆ†æµ‹è¯•ï¼Œä¸šåŠ¡ä»£ç æ›´å¯é 

**ğŸ›¡ï¸ ç³»ç»Ÿç¨³å®šæ€§**
- **èµ„æºå®‰å…¨**ï¼šè‡ªåŠ¨ç®¡ç†è¿æ¥ï¼Œé¿å…è¿æ¥æ³„æ¼
- **å¼‚å¸¸ç»Ÿä¸€**ï¼šæ‰€æœ‰æ•°æ®åº“å¼‚å¸¸éƒ½è¢«å¦¥å–„å¤„ç†
- **é˜²æ³¨å…¥æ”»å‡»**ï¼šå‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥

**ğŸ“š ä»£ç è´¨é‡**
- **å¯è¯»æ€§å¼º**ï¼šä¸šåŠ¡é€»è¾‘æ¸…æ™°ï¼Œæ²¡æœ‰é‡å¤ä»£ç å¹²æ‰°
- **å¤ç”¨æ€§é«˜**ï¼šä¸€ä¸ªæ¨¡æ¿æ”¯æŒæ‰€æœ‰è¡¨çš„CRUDæ“ä½œ
- **æ‰©å±•æ€§å¥½**ï¼šæ–°å¢RowMapperå°±èƒ½æ”¯æŒæ–°çš„å¯¹è±¡æ˜ å°„

### 7.4 å­¦ä¹ å»ºè®®


**ğŸ¯ å­¦ä¹ é‡ç‚¹**
1. **ç†è§£è®¾è®¡æ€æƒ³**ï¼šä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜
2. **æŒæ¡æ ¸å¿ƒAPI**ï¼šJdbcTemplateçš„ä¸»è¦æ–¹æ³•å’ŒRowMapperçš„ä½¿ç”¨
3. **åŠ¨æ‰‹å®è·µ**ï¼šä¸ºè‡ªå·±çš„é¡¹ç›®åˆ›å»ºé€šç”¨çš„CRUDæ¨¡æ¿
4. **å¯¹æ¯”æ„Ÿå—**ï¼šä½“éªŒä¼ ç»Ÿæ–¹å¼å’Œæ¨¡æ¿æ–¹å¼çš„å·®å¼‚

**ğŸ”§ å®è·µå»ºè®®**
- ä»ç®€å•çš„å•è¡¨CRUDå¼€å§‹
- é€æ­¥æ‰©å±•æ”¯æŒæ›´å¤šæ•°æ®ç±»å‹
- å°è¯•ä¼˜åŒ–RowMapperçš„ç¼–å†™æ–¹å¼
- è€ƒè™‘æ·»åŠ åˆ†é¡µã€æ’åºç­‰é«˜çº§åŠŸèƒ½

**ğŸš€ è¿›é˜¶æ–¹å‘**
- å­¦ä¹ Spring JDBC Templateï¼ˆå·¥ä¸šçº§å®ç°ï¼‰
- äº†è§£MyBatisç­‰ORMæ¡†æ¶çš„è®¾è®¡æ€æƒ³
- ç ”ç©¶è¿æ¥æ± å’Œäº‹åŠ¡ç®¡ç†çš„é›†æˆ

### 7.5 ä¸€å¥è¯æ€»ç»“


> ğŸ”‘ **æ ¸å¿ƒè®°å¿†**ï¼šé€šç”¨CRUDæ¨¡æ¿æ–¹æ³•å°±æ˜¯æŠŠæ•°æ®åº“æ“ä½œçš„"å¥—è·¯"å›ºåŒ–æˆæ¨¡æ¿ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œæ—¢æé«˜äº†æ•ˆç‡åˆä¿è¯äº†è´¨é‡ï¼Œæ˜¯ä»"æ‰‹å·¥ä½œåŠ"å‘"å·¥ä¸šåŒ–ç”Ÿäº§"çš„é‡è¦è¿›æ­¥ã€‚

**è®°å¿†å£è¯€**ï¼š
```
æ¨¡æ¿å®šæµç¨‹ï¼Œå›è°ƒå†™ä¸šåŠ¡
å‚æ•°è‡ªåŠ¨è®¾ï¼Œèµ„æºè‡ªåŠ¨å…³
ä¸€æ¬¡å†™æ¨¡æ¿ï¼Œå¤„å¤„äº«ä¾¿åˆ©
ä»£ç æ›´ç®€æ´ï¼Œè´¨é‡æ›´å¯é 
```