---
title: 3ã€CallableStatementå­˜å‚¨è¿‡ç¨‹
---
## ğŸ“š ç›®å½•

1. [CallableStatementåŸºç¡€æ¦‚å¿µ](#1-CallableStatementåŸºç¡€æ¦‚å¿µ)
2. [å­˜å‚¨è¿‡ç¨‹è¯­æ³•è¯¦è§£](#2-å­˜å‚¨è¿‡ç¨‹è¯­æ³•è¯¦è§£)
3. [å‚æ•°ç±»å‹è¯¦è§£](#3-å‚æ•°ç±»å‹è¯¦è§£)
4. [CallableStatementæ ¸å¿ƒæ–¹æ³•](#4-CallableStatementæ ¸å¿ƒæ–¹æ³•)
5. [å­˜å‚¨è¿‡ç¨‹è°ƒç”¨å®æˆ˜](#5-å­˜å‚¨è¿‡ç¨‹è°ƒç”¨å®æˆ˜)
6. [å­˜å‚¨å‡½æ•°è°ƒç”¨](#6-å­˜å‚¨å‡½æ•°è°ƒç”¨)
7. [æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹](#7-æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ CallableStatementåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯CallableStatement


**ğŸ”¸ ç®€å•ç†è§£**
```
æƒ³è±¡ä¸€ä¸‹ï¼š
ä½ æœ‰ä¸€ä¸ªå¾ˆå¤æ‚çš„æ•°å­¦è®¡ç®—ï¼Œéœ€è¦å¤šä¸ªæ­¥éª¤
ä¸å…¶æ¯æ¬¡éƒ½é‡å¤å†™è¿™äº›æ­¥éª¤ï¼Œä¸å¦‚æŠŠå®ƒä»¬åŒ…è£…æˆä¸€ä¸ª"è®¡ç®—å™¨åŠŸèƒ½"
å­˜å‚¨è¿‡ç¨‹å°±åƒè¿™ä¸ª"è®¡ç®—å™¨åŠŸèƒ½"ï¼Œå­˜åœ¨æ•°æ®åº“é‡Œ
CallableStatementå°±æ˜¯è°ƒç”¨è¿™ä¸ª"åŠŸèƒ½"çš„é¥æ§å™¨
```

**ğŸ”¸ æ­£å¼å®šä¹‰**
- **CallableStatement**ï¼šJDBCä¸­ä¸“é—¨ç”¨æ¥è°ƒç”¨æ•°æ®åº“å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°çš„æ¥å£
- **å­˜å‚¨è¿‡ç¨‹**ï¼šé¢„å…ˆç¼–è¯‘å¥½å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„SQLè¯­å¥é›†åˆ
- **ä½œç”¨**ï¼šæ‰§è¡Œå¤æ‚çš„æ•°æ®åº“æ“ä½œï¼Œæé«˜æ€§èƒ½å’Œå®‰å…¨æ€§

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å­˜å‚¨è¿‡ç¨‹


**ğŸ’¡ ç”Ÿæ´»ä¾‹å­ç†è§£**
```
æ™®é€šSQLå°±åƒï¼šæ¯æ¬¡åšèœéƒ½è¦é‡æ–°å‡†å¤‡é£Ÿæã€è°ƒæ–™ã€æŒ‰æ­¥éª¤ç‚’èœ
å­˜å‚¨è¿‡ç¨‹å°±åƒï¼šæå‰å‡†å¤‡å¥½çš„æ–™ç†åŒ…ï¼Œç›´æ¥ä¸‹é”…å°±èƒ½åšå‡ºç¾å‘³

ä¼˜åŠ¿å¯¹æ¯”ï¼š
âœ… æ€§èƒ½æ›´å¥½ï¼šé¢„ç¼–è¯‘ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«
âœ… å®‰å…¨æ€§é«˜ï¼šé¿å…SQLæ³¨å…¥æ”»å‡»  
âœ… ä»£ç å¤ç”¨ï¼šä¸€æ¬¡ç¼–å†™ï¼Œå¤šæ¬¡è°ƒç”¨
âœ… å‡å°‘ç½‘ç»œä¼ è¾“ï¼šåªä¼ å‚æ•°ï¼Œä¸ä¼ æ•´ä¸ªSQL
```

### 1.3 CallableStatementåœ¨JDBCä¸­çš„ä½ç½®


```
JDBCæ‰§è¡ŒSQLçš„ä¸‰å…„å¼Ÿï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Statementå®¶æ—                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Statement        - åŸºç¡€æ¬¾ï¼Œç›´æ¥æ‰§è¡ŒSQL    â”‚
â”‚  PreparedStatement - å‡çº§æ¬¾ï¼Œé¢„ç¼–è¯‘SQL    â”‚  
â”‚  CallableStatement - ä¸“ä¸šæ¬¾ï¼Œè°ƒç”¨å­˜å‚¨è¿‡ç¨‹  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»§æ‰¿å…³ç³»ï¼š
Statement 
    â†‘
PreparedStatement
    â†‘  
CallableStatement
```

---

## 2. ğŸ“ å­˜å‚¨è¿‡ç¨‹è¯­æ³•è¯¦è§£


### 2.1 å­˜å‚¨è¿‡ç¨‹çš„åŸºæœ¬ç»“æ„


**ğŸ”¸ MySQLå­˜å‚¨è¿‡ç¨‹è¯­æ³•**
```sql
DELIMITER $$

CREATE PROCEDURE è¿‡ç¨‹å(
    å‚æ•°ç±»å‹ å‚æ•°å æ•°æ®ç±»å‹,
    å‚æ•°ç±»å‹ å‚æ•°å æ•°æ®ç±»å‹
)
BEGIN
    -- å­˜å‚¨è¿‡ç¨‹çš„å…·ä½“é€»è¾‘
    SQLè¯­å¥1;
    SQLè¯­å¥2;
    -- ...
END$$

DELIMITER ;
```

**ğŸ”¸ è¯­æ³•è¦ç´ è§£é‡Š**
- `DELIMITER $$`ï¼šæ”¹å˜è¯­å¥åˆ†éš”ç¬¦ï¼Œé¿å…åˆ†å·å†²çª
- `CREATE PROCEDURE`ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹çš„å…³é”®å­—
- `å‚æ•°åˆ—è¡¨`ï¼šå®šä¹‰è¾“å…¥è¾“å‡ºå‚æ•°
- `BEGIN...END`ï¼šå­˜å‚¨è¿‡ç¨‹çš„ä¸»ä½“éƒ¨åˆ†

### 2.2 ç®€å•å­˜å‚¨è¿‡ç¨‹ç¤ºä¾‹


**ğŸ’» åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„å­˜å‚¨è¿‡ç¨‹**
```sql
-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼šæ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
DELIMITER $$

CREATE PROCEDURE getUserById(
    IN userId INT
)
BEGIN
    SELECT id, username, email, create_time 
    FROM users 
    WHERE id = userId;
END$$

DELIMITER ;
```

**ğŸ”¸ è¿™ä¸ªä¾‹å­åšäº†ä»€ä¹ˆ**
- å®šä¹‰äº†ä¸€ä¸ªå«`getUserById`çš„å­˜å‚¨è¿‡ç¨‹
- æ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•°`userId`ï¼ˆç±»å‹æ˜¯æ•´æ•°ï¼‰
- æ ¹æ®è¿™ä¸ªIDæŸ¥è¯¢ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯

### 2.3 å¸¦è¾“å‡ºå‚æ•°çš„å­˜å‚¨è¿‡ç¨‹


**ğŸ’» ç»Ÿè®¡ç”¨æˆ·æ€»æ•°çš„å­˜å‚¨è¿‡ç¨‹**
```sql
DELIMITER $$

CREATE PROCEDURE getUserCount(
    OUT totalCount INT
)
BEGIN
    SELECT COUNT(*) INTO totalCount 
    FROM users;
END$$

DELIMITER ;
```

**ğŸ”¸ å…³é”®ç†è§£**
- `OUT totalCount INT`ï¼šå®šä¹‰ä¸€ä¸ªè¾“å‡ºå‚æ•°
- `SELECT COUNT(*) INTO totalCount`ï¼šå°†æŸ¥è¯¢ç»“æœèµ‹å€¼ç»™è¾“å‡ºå‚æ•°
- è°ƒç”¨åå¯ä»¥è·å–è¿™ä¸ª`totalCount`çš„å€¼

---

## 3. ğŸ¯ å‚æ•°ç±»å‹è¯¦è§£


### 3.1 ä¸‰ç§å‚æ•°ç±»å‹


| å‚æ•°ç±»å‹ | **å«ä¹‰** | **æ•°æ®æµå‘** | **Javaä¸­çš„å¤„ç†** |
|---------|---------|------------|----------------|
| **IN** | `è¾“å…¥å‚æ•°` | `Java â†’ æ•°æ®åº“` | `setXxx()æ–¹æ³•è®¾ç½®å€¼` |
| **OUT** | `è¾“å‡ºå‚æ•°` | `æ•°æ®åº“ â†’ Java` | `registerOutParameter()æ³¨å†Œ` |
| **INOUT** | `è¾“å…¥è¾“å‡ºå‚æ•°` | `åŒå‘ä¼ é€’` | `æ—¢è¦è®¾ç½®å€¼åˆè¦æ³¨å†Œ` |

### 3.2 å‚æ•°ç±»å‹è¯¦ç»†è¯´æ˜


**ğŸ”¸ INå‚æ•° - è¾“å…¥å‚æ•°**
```
ç†è§£æ–¹å¼ï¼šä½ å‘Šè¯‰å­˜å‚¨è¿‡ç¨‹ä¸€äº›ä¿¡æ¯

ç°å®ä¾‹å­ï¼š
ä½ å»é“¶è¡Œå–é’±ï¼Œéœ€è¦å‘Šè¯‰æŸœå‘˜ä½ çš„è´¦å·å’Œå–æ¬¾é‡‘é¢
è´¦å·å’Œé‡‘é¢å°±æ˜¯INå‚æ•°

Javaä»£ç ä¸­ï¼š
callableStatement.setInt(1, 1001);      // è®¾ç½®ç¬¬1ä¸ªå‚æ•°
callableStatement.setString(2, "å¼ ä¸‰");   // è®¾ç½®ç¬¬2ä¸ªå‚æ•°
```

**ğŸ”¸ OUTå‚æ•° - è¾“å‡ºå‚æ•°**
```
ç†è§£æ–¹å¼ï¼šå­˜å‚¨è¿‡ç¨‹è¿”å›ç»™ä½ ä¸€äº›ç»“æœ

ç°å®ä¾‹å­ï¼š
ä½ æŸ¥è¯¢è´¦æˆ·ä½™é¢ï¼Œé“¶è¡Œç³»ç»Ÿå‘Šè¯‰ä½ è¿˜å‰©å¤šå°‘é’±
ä½™é¢å°±æ˜¯OUTå‚æ•°

Javaä»£ç ä¸­ï¼š
callableStatement.registerOutParameter(1, Types.INTEGER);
int result = callableStatement.getInt(1);  // è·å–ç»“æœ
```

**ğŸ”¸ INOUTå‚æ•° - è¾“å…¥è¾“å‡ºå‚æ•°**
```
ç†è§£æ–¹å¼ï¼šæ—¢è¦ç»™å­˜å‚¨è¿‡ç¨‹æä¾›ä¿¡æ¯ï¼Œåˆè¦æ¥æ”¶å¤„ç†ç»“æœ

ç°å®ä¾‹å­ï¼š
ä½ ç»™æœ‹å‹1000å…ƒï¼Œæœ‹å‹å¸®ä½ ä¹°ä¸œè¥¿åï¼Œè¿”å›å‰©ä½™çš„é’±
è¿™ä¸ªé’±çš„æ•°é‡æ—¢æ˜¯è¾“å…¥ï¼ˆ1000å…ƒï¼‰ï¼Œåˆæ˜¯è¾“å‡ºï¼ˆå‰©ä½™é‡‘é¢ï¼‰

Javaä»£ç ä¸­ï¼š
callableStatement.setInt(1, 1000);                    // è®¾ç½®è¾“å…¥å€¼
callableStatement.registerOutParameter(1, Types.INTEGER); // æ³¨å†Œè¾“å‡º
int remaining = callableStatement.getInt(1);           // è·å–ç»“æœ
```

### 3.3 å®Œæ•´å‚æ•°ç¤ºä¾‹


**ğŸ’» ç”¨æˆ·è½¬è´¦å­˜å‚¨è¿‡ç¨‹**
```sql
DELIMITER $$

CREATE PROCEDURE transferMoney(
    IN fromAccount INT,      -- è½¬å‡ºè´¦æˆ·(è¾“å…¥)
    IN toAccount INT,        -- è½¬å…¥è´¦æˆ·(è¾“å…¥)  
    INOUT amount DECIMAL(10,2), -- è½¬è´¦é‡‘é¢(è¾“å…¥è¾“å‡º)
    OUT resultMsg VARCHAR(100)   -- ç»“æœä¿¡æ¯(è¾“å‡º)
)
BEGIN
    DECLARE fromBalance DECIMAL(10,2);
    
    -- æŸ¥è¯¢è½¬å‡ºè´¦æˆ·ä½™é¢
    SELECT balance INTO fromBalance 
    FROM accounts 
    WHERE account_id = fromAccount;
    
    -- åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ
    IF fromBalance >= amount THEN
        -- æ‰§è¡Œè½¬è´¦
        UPDATE accounts SET balance = balance - amount 
        WHERE account_id = fromAccount;
        
        UPDATE accounts SET balance = balance + amount 
        WHERE account_id = toAccount;
        
        SET resultMsg = 'è½¬è´¦æˆåŠŸ';
        SET amount = fromBalance - amount; -- è¿”å›å‰©ä½™ä½™é¢
    ELSE
        SET resultMsg = 'ä½™é¢ä¸è¶³';
        SET amount = fromBalance; -- è¿”å›å½“å‰ä½™é¢
    END IF;
END$$

DELIMITER ;
```

---

## 4. âš™ï¸ CallableStatementæ ¸å¿ƒæ–¹æ³•


### 4.1 åˆ›å»ºCallableStatementå¯¹è±¡


**ğŸ”¸ åŸºæœ¬è¯­æ³•**
```java
// å‡†å¤‡è°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„SQLè¯­å¥
String sql = "{call å­˜å‚¨è¿‡ç¨‹å(?, ?, ?)}";

// åˆ›å»ºCallableStatementå¯¹è±¡
CallableStatement callableStatement = connection.prepareCall(sql);
```

**ğŸ”¸ è°ƒç”¨è¯­æ³•æ ¼å¼**
```
æ— å‚æ•°å­˜å‚¨è¿‡ç¨‹ï¼š    {call è¿‡ç¨‹å()}
æœ‰å‚æ•°å­˜å‚¨è¿‡ç¨‹ï¼š    {call è¿‡ç¨‹å(?, ?, ?)}
è°ƒç”¨å­˜å‚¨å‡½æ•°ï¼š      {? = call å‡½æ•°å(?, ?)}

æ³¨æ„ï¼šå¤§æ‹¬å·{}æ˜¯å¿…é¡»çš„ï¼
```

### 4.2 è®¾ç½®è¾“å…¥å‚æ•°


**ğŸ”¸ å¸¸ç”¨çš„setXxx()æ–¹æ³•**
```java
// è®¾ç½®ä¸åŒç±»å‹çš„è¾“å…¥å‚æ•°
callableStatement.setInt(1, 100);           // è®¾ç½®æ•´æ•°
callableStatement.setString(2, "å¼ ä¸‰");       // è®¾ç½®å­—ç¬¦ä¸²  
callableStatement.setDouble(3, 1500.50);    // è®¾ç½®å°æ•°
callableStatement.setDate(4, new java.sql.Date(System.currentTimeMillis())); // è®¾ç½®æ—¥æœŸ
```

**ğŸ’¡ å‚æ•°ç´¢å¼•è¯´æ˜**
```
å­˜å‚¨è¿‡ç¨‹ï¼šgetUserInfo(?, ?, ?)
å‚æ•°ç´¢å¼•ï¼š     1  2  3

è®°ä½ï¼šç´¢å¼•ä»1å¼€å§‹ï¼Œä¸æ˜¯0ï¼
```

### 4.3 æ³¨å†Œè¾“å‡ºå‚æ•°


**ğŸ”¸ registerOutParameter()æ–¹æ³•**
```java
// æ³¨å†Œè¾“å‡ºå‚æ•°ï¼Œå‘Šè¯‰JDBCè¿™ä¸ªä½ç½®ä¼šè¿”å›ä»€ä¹ˆç±»å‹çš„æ•°æ®
callableStatement.registerOutParameter(1, Types.INTEGER);   // æ•´æ•°ç±»å‹
callableStatement.registerOutParameter(2, Types.VARCHAR);   // å­—ç¬¦ä¸²ç±»å‹
callableStatement.registerOutParameter(3, Types.DECIMAL);   // å°æ•°ç±»å‹
```

**ğŸ”¸ å¸¸ç”¨çš„æ•°æ®ç±»å‹å¸¸é‡**
```
Types.INTEGER    - æ•´æ•°
Types.VARCHAR    - å­—ç¬¦ä¸²
Types.DECIMAL    - å°æ•°
Types.DATE       - æ—¥æœŸ
Types.BOOLEAN    - å¸ƒå°”å€¼
Types.TIMESTAMP  - æ—¶é—´æˆ³
```

### 4.4 æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹


**ğŸ”¸ execute()æ–¹æ³•**
```java
// æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹
boolean hasResultSet = callableStatement.execute();

if (hasResultSet) {
    // å¦‚æœæœ‰ç»“æœé›†ï¼Œå¯ä»¥åƒå¤„ç†PreparedStatementä¸€æ ·å¤„ç†
    ResultSet rs = callableStatement.getResultSet();
    // å¤„ç†ç»“æœé›†...
}
```

### 4.5 è·å–è¾“å‡ºå‚æ•°å€¼


**ğŸ”¸ getXxx()æ–¹æ³•è·å–è¾“å‡ºå€¼**
```java
// æ‰§è¡Œå®Œå­˜å‚¨è¿‡ç¨‹åï¼Œè·å–è¾“å‡ºå‚æ•°çš„å€¼
int count = callableStatement.getInt(1);      // è·å–æ•´æ•°ç»“æœ
String message = callableStatement.getString(2); // è·å–å­—ç¬¦ä¸²ç»“æœ
double amount = callableStatement.getDouble(3);  // è·å–å°æ•°ç»“æœ
```

---

## 5. ğŸš€ å­˜å‚¨è¿‡ç¨‹è°ƒç”¨å®æˆ˜


### 5.1 è°ƒç”¨æŸ¥è¯¢ç±»å­˜å‚¨è¿‡ç¨‹


**ğŸ’» å®Œæ•´ç¤ºä¾‹ï¼šæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯**

**æ­¥éª¤1ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹**
```sql
DELIMITER $$

CREATE PROCEDURE getUserInfo(
    IN userId INT,
    OUT userName VARCHAR(50),
    OUT userEmail VARCHAR(100)
)
BEGIN
    SELECT username, email 
    INTO userName, userEmail
    FROM users 
    WHERE id = userId;
END$$

DELIMITER ;
```

**æ­¥éª¤2ï¼šJavaè°ƒç”¨ä»£ç **
```java
public void getUserInfo(int userId) {
    String sql = "{call getUserInfo(?, ?, ?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        // 1. è®¾ç½®è¾“å…¥å‚æ•°
        callableStatement.setInt(1, userId);
        
        // 2. æ³¨å†Œè¾“å‡ºå‚æ•°
        callableStatement.registerOutParameter(2, Types.VARCHAR);
        callableStatement.registerOutParameter(3, Types.VARCHAR);
        
        // 3. æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹
        callableStatement.execute();
        
        // 4. è·å–è¾“å‡ºç»“æœ
        String userName = callableStatement.getString(2);
        String userEmail = callableStatement.getString(3);
        
        System.out.println("ç”¨æˆ·åï¼š" + userName);
        System.out.println("é‚®ç®±ï¼š" + userEmail);
        
    } catch (SQLException e) {
        System.out.println("è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

### 5.2 è°ƒç”¨æ›´æ–°ç±»å­˜å‚¨è¿‡ç¨‹


**ğŸ’» å®Œæ•´ç¤ºä¾‹ï¼šç”¨æˆ·è½¬è´¦æ“ä½œ**

**æ­¥éª¤1ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹**
```sql
DELIMITER $$

CREATE PROCEDURE transferMoney(
    IN fromAccountId INT,
    IN toAccountId INT,
    IN transferAmount DECIMAL(10,2),
    OUT isSuccess BOOLEAN,
    OUT resultMessage VARCHAR(200)
)
BEGIN
    DECLARE fromBalance DECIMAL(10,2) DEFAULT 0;
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        SET isSuccess = FALSE;
        SET resultMessage = 'è½¬è´¦å¤±è´¥ï¼Œå‘ç”Ÿå¼‚å¸¸';
    END;
    
    START TRANSACTION;
    
    -- æŸ¥è¯¢è½¬å‡ºè´¦æˆ·ä½™é¢
    SELECT balance INTO fromBalance 
    FROM accounts 
    WHERE account_id = fromAccountId;
    
    IF fromBalance >= transferAmount THEN
        -- ä½™é¢å……è¶³ï¼Œæ‰§è¡Œè½¬è´¦
        UPDATE accounts 
        SET balance = balance - transferAmount 
        WHERE account_id = fromAccountId;
        
        UPDATE accounts 
        SET balance = balance + transferAmount 
        WHERE account_id = toAccountId;
        
        COMMIT;
        SET isSuccess = TRUE;
        SET resultMessage = 'è½¬è´¦æˆåŠŸ';
    ELSE
        -- ä½™é¢ä¸è¶³
        ROLLBACK;
        SET isSuccess = FALSE;
        SET resultMessage = 'ä½™é¢ä¸è¶³ï¼Œè½¬è´¦å¤±è´¥';
    END IF;
END$$

DELIMITER ;
```

**æ­¥éª¤2ï¼šJavaè°ƒç”¨ä»£ç **
```java
public void transferMoney(int fromAccountId, int toAccountId, double amount) {
    String sql = "{call transferMoney(?, ?, ?, ?, ?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        // 1. è®¾ç½®è¾“å…¥å‚æ•°
        callableStatement.setInt(1, fromAccountId);
        callableStatement.setInt(2, toAccountId);
        callableStatement.setDouble(3, amount);
        
        // 2. æ³¨å†Œè¾“å‡ºå‚æ•°
        callableStatement.registerOutParameter(4, Types.BOOLEAN);
        callableStatement.registerOutParameter(5, Types.VARCHAR);
        
        // 3. æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹
        callableStatement.execute();
        
        // 4. è·å–æ‰§è¡Œç»“æœ
        boolean isSuccess = callableStatement.getBoolean(4);
        String message = callableStatement.getString(5);
        
        if (isSuccess) {
            System.out.println("âœ… " + message);
        } else {
            System.out.println("âŒ " + message);
        }
        
    } catch (SQLException e) {
        System.out.println("è°ƒç”¨è½¬è´¦å­˜å‚¨è¿‡ç¨‹å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

### 5.3 å¤„ç†INOUTå‚æ•°çš„å­˜å‚¨è¿‡ç¨‹


**ğŸ’» å®Œæ•´ç¤ºä¾‹ï¼šè®¡ç®—å•†å“æŠ˜æ‰£**

**æ­¥éª¤1ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹**
```sql
DELIMITER $$

CREATE PROCEDURE calculateDiscount(
    IN customerId INT,
    INOUT price DECIMAL(10,2),
    OUT discountRate DECIMAL(3,2)
)
BEGIN
    DECLARE customerLevel INT DEFAULT 1;
    
    -- æ ¹æ®å®¢æˆ·IDæŸ¥è¯¢å®¢æˆ·ç­‰çº§
    SELECT level INTO customerLevel 
    FROM customers 
    WHERE id = customerId;
    
    -- æ ¹æ®ç­‰çº§è®¡ç®—æŠ˜æ‰£ç‡å’Œæœ€ç»ˆä»·æ ¼
    CASE customerLevel
        WHEN 1 THEN 
            SET discountRate = 0.95;  -- 5%æŠ˜æ‰£
        WHEN 2 THEN 
            SET discountRate = 0.90;  -- 10%æŠ˜æ‰£
        WHEN 3 THEN 
            SET discountRate = 0.85;  -- 15%æŠ˜æ‰£
        ELSE 
            SET discountRate = 1.00;  -- æ— æŠ˜æ‰£
    END CASE;
    
    -- è®¡ç®—æŠ˜åä»·æ ¼
    SET price = price * discountRate;
END$$

DELIMITER ;
```

**æ­¥éª¤2ï¼šJavaè°ƒç”¨ä»£ç **
```java
public void calculateDiscount(int customerId, double originalPrice) {
    String sql = "{call calculateDiscount(?, ?, ?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        // 1. è®¾ç½®è¾“å…¥å‚æ•°
        callableStatement.setInt(1, customerId);
        callableStatement.setDouble(2, originalPrice);
        
        // 2. æ³¨å†ŒINOUTå‚æ•°ï¼ˆæ—¢æ˜¯è¾“å…¥åˆæ˜¯è¾“å‡ºï¼‰
        callableStatement.registerOutParameter(2, Types.DECIMAL);
        
        // 3. æ³¨å†Œçº¯è¾“å‡ºå‚æ•°
        callableStatement.registerOutParameter(3, Types.DECIMAL);
        
        // 4. æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹
        callableStatement.execute();
        
        // 5. è·å–ç»“æœ
        double finalPrice = callableStatement.getDouble(2);    // INOUTå‚æ•°çš„è¾“å‡ºå€¼
        double discountRate = callableStatement.getDouble(3);  // OUTå‚æ•°çš„å€¼
        
        System.out.println("åŸä»·ï¼šï¿¥" + originalPrice);
        System.out.println("æŠ˜æ‰£ç‡ï¼š" + (discountRate * 100) + "%");
        System.out.println("æœ€ç»ˆä»·æ ¼ï¼šï¿¥" + finalPrice);
        System.out.println("èŠ‚çœï¼šï¿¥" + (originalPrice - finalPrice));
        
    } catch (SQLException e) {
        System.out.println("è®¡ç®—æŠ˜æ‰£å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

---

## 6. ğŸ¯ å­˜å‚¨å‡½æ•°è°ƒç”¨


### 6.1 å­˜å‚¨å‡½æ•°ä¸å­˜å‚¨è¿‡ç¨‹çš„åŒºåˆ«


**ğŸ”¸ æ¦‚å¿µå¯¹æ¯”**
```
å­˜å‚¨è¿‡ç¨‹ï¼šåƒæ˜¯ä¸€ä¸ª"å·¥ä½œæµç¨‹"
- å¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºå‚æ•°
- å¯ä»¥è¿”å›ç»“æœé›†
- ä¸»è¦ç”¨äºæ‰§è¡Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘

å­˜å‚¨å‡½æ•°ï¼šåƒæ˜¯ä¸€ä¸ª"è®¡ç®—å™¨å‡½æ•°"  
- åªæœ‰ä¸€ä¸ªè¿”å›å€¼
- ä¸èƒ½è¿”å›ç»“æœé›†
- ä¸»è¦ç”¨äºè®¡ç®—å’Œè½¬æ¢æ•°æ®
```

**ğŸ”¸ è¯­æ³•å¯¹æ¯”**
```sql
-- å­˜å‚¨è¿‡ç¨‹è°ƒç”¨
{call å­˜å‚¨è¿‡ç¨‹å(?, ?)}

-- å­˜å‚¨å‡½æ•°è°ƒç”¨  
{? = call å­˜å‚¨å‡½æ•°å(?, ?)}
æ³¨æ„ï¼šç¬¬ä¸€ä¸ª?æ˜¯æ¥æ”¶è¿”å›å€¼çš„
```

### 6.2 åˆ›å»ºå’Œè°ƒç”¨å­˜å‚¨å‡½æ•°


**ğŸ’» å®Œæ•´ç¤ºä¾‹ï¼šè®¡ç®—ç”¨æˆ·ç§¯åˆ†ç­‰çº§**

**æ­¥éª¤1ï¼šåˆ›å»ºå­˜å‚¨å‡½æ•°**
```sql
DELIMITER $$

CREATE FUNCTION getUserLevel(points INT) 
RETURNS VARCHAR(20)
READS SQL DATA
BEGIN
    DECLARE userLevel VARCHAR(20);
    
    IF points >= 10000 THEN
        SET userLevel = 'VIP';
    ELSEIF points >= 5000 THEN
        SET userLevel = 'é‡‘ç‰Œä¼šå‘˜';
    ELSEIF points >= 1000 THEN
        SET userLevel = 'é“¶ç‰Œä¼šå‘˜';
    ELSE
        SET userLevel = 'æ™®é€šä¼šå‘˜';
    END IF;
    
    RETURN userLevel;
END$$

DELIMITER ;
```

**æ­¥éª¤2ï¼šJavaè°ƒç”¨ä»£ç **
```java
public void getUserLevel(int userId, int userPoints) {
    // æ³¨æ„ï¼šè°ƒç”¨å‡½æ•°æ—¶ç¬¬ä¸€ä¸ª?æ˜¯ç”¨æ¥æ¥æ”¶è¿”å›å€¼çš„
    String sql = "{? = call getUserLevel(?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        // 1. æ³¨å†Œè¿”å›å€¼å‚æ•°ï¼ˆç¬¬1ä¸ªå‚æ•°ï¼‰
        callableStatement.registerOutParameter(1, Types.VARCHAR);
        
        // 2. è®¾ç½®è¾“å…¥å‚æ•°ï¼ˆç¬¬2ä¸ªå‚æ•°ï¼‰
        callableStatement.setInt(2, userPoints);
        
        // 3. æ‰§è¡Œå­˜å‚¨å‡½æ•°
        callableStatement.execute();
        
        // 4. è·å–è¿”å›å€¼
        String userLevel = callableStatement.getString(1);
        
        System.out.println("ç”¨æˆ·IDï¼š" + userId);
        System.out.println("ç”¨æˆ·ç§¯åˆ†ï¼š" + userPoints);
        System.out.println("ä¼šå‘˜ç­‰çº§ï¼š" + userLevel);
        
    } catch (SQLException e) {
        System.out.println("è°ƒç”¨å­˜å‚¨å‡½æ•°å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

### 6.3 å¤æ‚å­˜å‚¨å‡½æ•°ç¤ºä¾‹


**ğŸ’» è®¡ç®—è®¢å•æ€»é‡‘é¢çš„å­˜å‚¨å‡½æ•°**

**æ­¥éª¤1ï¼šåˆ›å»ºå­˜å‚¨å‡½æ•°**
```sql
DELIMITER $$

CREATE FUNCTION calculateOrderTotal(orderId INT) 
RETURNS DECIMAL(10,2)
READS SQL DATA
BEGIN
    DECLARE totalAmount DECIMAL(10,2) DEFAULT 0;
    DECLARE discountRate DECIMAL(3,2) DEFAULT 1.0;
    DECLARE customerLevel INT DEFAULT 1;
    
    -- è®¡ç®—è®¢å•å•†å“æ€»é¢
    SELECT SUM(quantity * price) INTO totalAmount
    FROM order_items 
    WHERE order_id = orderId;
    
    -- è·å–å®¢æˆ·ç­‰çº§
    SELECT c.level INTO customerLevel
    FROM orders o
    JOIN customers c ON o.customer_id = c.id
    WHERE o.id = orderId;
    
    -- æ ¹æ®å®¢æˆ·ç­‰çº§åº”ç”¨æŠ˜æ‰£
    CASE customerLevel
        WHEN 3 THEN SET discountRate = 0.85;  -- VIPå®¢æˆ·15%æŠ˜æ‰£
        WHEN 2 THEN SET discountRate = 0.92;  -- é‡‘ç‰Œå®¢æˆ·8%æŠ˜æ‰£
        WHEN 1 THEN SET discountRate = 0.97;  -- é“¶ç‰Œå®¢æˆ·3%æŠ˜æ‰£
        ELSE SET discountRate = 1.0;          -- æ™®é€šå®¢æˆ·æ— æŠ˜æ‰£
    END CASE;
    
    RETURN totalAmount * discountRate;
END$$

DELIMITER ;
```

**æ­¥éª¤2ï¼šJavaè°ƒç”¨ä»£ç **
```java
public void calculateOrderTotal(int orderId) {
    String sql = "{? = call calculateOrderTotal(?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        // 1. æ³¨å†Œè¿”å›å€¼
        callableStatement.registerOutParameter(1, Types.DECIMAL);
        
        // 2. è®¾ç½®è®¢å•IDå‚æ•°
        callableStatement.setInt(2, orderId);
        
        // 3. æ‰§è¡Œå­˜å‚¨å‡½æ•°
        callableStatement.execute();
        
        // 4. è·å–è®¡ç®—ç»“æœ
        double totalAmount = callableStatement.getDouble(1);
        
        System.out.println("è®¢å•IDï¼š" + orderId);
        System.out.println("è®¢å•æ€»é‡‘é¢ï¼šï¿¥" + String.format("%.2f", totalAmount));
        
    } catch (SQLException e) {
        System.out.println("è®¡ç®—è®¢å•æ€»é¢å¤±è´¥ï¼š" + e.getMessage());
    }
}
```

---

## 7. âš ï¸ æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹


### 7.1 èµ„æºç®¡ç†æœ€ä½³å®è·µ


**ğŸ”¸ ä½¿ç”¨try-with-resources**
```java
// âœ… æ¨èå†™æ³•ï¼šè‡ªåŠ¨å…³é—­èµ„æº
public void callProcedure() {
    String sql = "{call getUserInfo(?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        // è®¾ç½®å‚æ•°å’Œæ‰§è¡Œæ“ä½œ...
    } catch (SQLException e) {
        // å¼‚å¸¸å¤„ç†...
    }
    // callableStatementä¼šè‡ªåŠ¨å…³é—­
}

// âŒ ä¸æ¨èï¼šæ‰‹åŠ¨ç®¡ç†èµ„æº
public void callProcedureBad() {
    CallableStatement callableStatement = null;
    try {
        callableStatement = connection.prepareCall("{call getUserInfo(?)}");
        // æ“ä½œ...
    } catch (SQLException e) {
        // å¤„ç†...
    } finally {
        if (callableStatement != null) {
            try {
                callableStatement.close();
            } catch (SQLException e) {
                // å¤„ç†å…³é—­å¼‚å¸¸...
            }
        }
    }
}
```

### 7.2 å‚æ•°è®¾ç½®æ³¨æ„äº‹é¡¹


**ğŸ”¸ å‚æ•°ç´¢å¼•è§„åˆ™**
```java
// è°ƒç”¨å­˜å‚¨è¿‡ç¨‹: {call transfer(?, ?, ?, ?)}
//                     å‚æ•°ç´¢å¼•: 1  2  3  4

// âœ… æ­£ç¡®çš„å‚æ•°è®¾ç½®
callableStatement.setInt(1, fromAccount);        // ç¬¬1ä¸ªå‚æ•°
callableStatement.setInt(2, toAccount);          // ç¬¬2ä¸ªå‚æ•°
callableStatement.setDouble(3, amount);          // ç¬¬3ä¸ªå‚æ•°
callableStatement.registerOutParameter(4, Types.VARCHAR); // ç¬¬4ä¸ªå‚æ•°

// âŒ å¸¸è§é”™è¯¯ï¼šç´¢å¼•ä»0å¼€å§‹
callableStatement.setInt(0, fromAccount);  // é”™è¯¯ï¼ç´¢å¼•åº”è¯¥ä»1å¼€å§‹
```

**ğŸ”¸ å‚æ•°ç±»å‹åŒ¹é…**
```java
// å­˜å‚¨è¿‡ç¨‹å®šä¹‰ï¼šIN amount DECIMAL(10,2)
// âœ… æ­£ç¡®çš„ç±»å‹è®¾ç½®
callableStatement.setDouble(1, 1500.50);     // ä½¿ç”¨doubleå¯¹åº”DECIMAL
callableStatement.setBigDecimal(1, new BigDecimal("1500.50")); // æ›´ç²¾ç¡®çš„æ–¹å¼

// âŒ ç±»å‹ä¸åŒ¹é…å¯èƒ½å¯¼è‡´ç²¾åº¦ä¸¢å¤±
callableStatement.setInt(1, 1500);  // å¯èƒ½ä¸¢å¤±å°æ•°éƒ¨åˆ†
```

### 7.3 å¼‚å¸¸å¤„ç†ç­–ç•¥


**ğŸ”¸ åˆ†ç±»å¤„ç†å¼‚å¸¸**
```java
public boolean transferMoney(int fromAccount, int toAccount, double amount) {
    String sql = "{call transferMoney(?, ?, ?, ?)}";
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        callableStatement.setInt(1, fromAccount);
        callableStatement.setInt(2, toAccount);
        callableStatement.setDouble(3, amount);
        callableStatement.registerOutParameter(4, Types.VARCHAR);
        
        callableStatement.execute();
        
        String result = callableStatement.getString(4);
        return "SUCCESS".equals(result);
        
    } catch (SQLTimeoutException e) {
        System.out.println("âŒ æ“ä½œè¶…æ—¶ï¼š" + e.getMessage());
        return false;
    } catch (SQLSyntaxErrorException e) {
        System.out.println("âŒ SQLè¯­æ³•é”™è¯¯ï¼š" + e.getMessage());
        return false;
    } catch (SQLException e) {
        System.out.println("âŒ æ•°æ®åº“æ“ä½œå¤±è´¥ï¼š" + e.getMessage());
        return false;
    }
}
```

### 7.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**ğŸ”¸ é‡ç”¨CallableStatement**
```java
public class UserService {
    private CallableStatement getUserStmt;
    private Connection connection;
    
    public UserService(Connection connection) throws SQLException {
        this.connection = connection;
        // é¢„ç¼–è¯‘å­˜å‚¨è¿‡ç¨‹è°ƒç”¨è¯­å¥
        this.getUserStmt = connection.prepareCall("{call getUserInfo(?, ?, ?)}");
        this.getUserStmt.registerOutParameter(2, Types.VARCHAR);
        this.getUserStmt.registerOutParameter(3, Types.VARCHAR);
    }
    
    public User getUserById(int userId) throws SQLException {
        // é‡ç”¨é¢„ç¼–è¯‘çš„è¯­å¥ï¼Œåªéœ€è¦è®¾ç½®å‚æ•°
        getUserStmt.setInt(1, userId);
        getUserStmt.execute();
        
        String name = getUserStmt.getString(2);
        String email = getUserStmt.getString(3);
        
        return new User(userId, name, email);
    }
    
    public void close() throws SQLException {
        if (getUserStmt != null) {
            getUserStmt.close();
        }
    }
}
```

### 7.5 è°ƒè¯•æŠ€å·§


**ğŸ”¸ æ‰“å°è°ƒç”¨ä¿¡æ¯**
```java
public void debugCallableStatement(int userId) {
    String sql = "{call getUserInfo(?, ?, ?)}";
    System.out.println("ğŸ” è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š" + sql);
    System.out.println("ğŸ“¥ è¾“å…¥å‚æ•°ï¼šuserId=" + userId);
    
    try (CallableStatement callableStatement = connection.prepareCall(sql)) {
        callableStatement.setInt(1, userId);
        callableStatement.registerOutParameter(2, Types.VARCHAR);
        callableStatement.registerOutParameter(3, Types.VARCHAR);
        
        long startTime = System.currentTimeMillis();
        callableStatement.execute();
        long endTime = System.currentTimeMillis();
        
        String name = callableStatement.getString(2);
        String email = callableStatement.getString(3);
        
        System.out.println("ğŸ“¤ è¾“å‡ºç»“æœï¼šname=" + name + ", email=" + email);
        System.out.println("â±ï¸ æ‰§è¡Œè€—æ—¶ï¼š" + (endTime - startTime) + "ms");
        
    } catch (SQLException e) {
        System.out.println("âŒ æ‰§è¡Œå¤±è´¥ï¼š" + e.getMessage());
        e.printStackTrace();
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ CallableStatementï¼šä¸“é—¨è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°çš„JDBCæ¥å£
ğŸ”¸ å­˜å‚¨è¿‡ç¨‹ï¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„é¢„ç¼–è¯‘SQLè¯­å¥é›†åˆ
ğŸ”¸ å‚æ•°ç±»å‹ï¼šIN(è¾“å…¥)ã€OUT(è¾“å‡º)ã€INOUT(è¾“å…¥è¾“å‡º)ä¸‰ç§
ğŸ”¸ è°ƒç”¨è¯­æ³•ï¼š{call è¿‡ç¨‹å(?, ?)} å’Œ {? = call å‡½æ•°å(?)}
ğŸ”¸ æ ¸å¿ƒæ–¹æ³•ï¼šprepareCall()ã€setXxx()ã€registerOutParameter()ã€execute()ã€getXxx()
```

### 8.2 å…³é”®æ“ä½œæµç¨‹


**ğŸ”¹ è°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„æ ‡å‡†æ­¥éª¤**
```
1ï¸âƒ£ å‡†å¤‡è°ƒç”¨è¯­å¥ï¼š{call è¿‡ç¨‹å(?, ?, ?)}
2ï¸âƒ£ åˆ›å»ºCallableStatementå¯¹è±¡
3ï¸âƒ£ è®¾ç½®è¾“å…¥å‚æ•°ï¼šsetXxx()æ–¹æ³•
4ï¸âƒ£ æ³¨å†Œè¾“å‡ºå‚æ•°ï¼šregisterOutParameter()æ–¹æ³•
5ï¸âƒ£ æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼šexecute()æ–¹æ³•
6ï¸âƒ£ è·å–è¾“å‡ºç»“æœï¼šgetXxx()æ–¹æ³•
7ï¸âƒ£ å…³é—­èµ„æºï¼šä½¿ç”¨try-with-resources
```

**ğŸ”¹ å‚æ•°å¤„ç†è¦ç‚¹**
```
è¾“å…¥å‚æ•°å¤„ç†ï¼š
- ä½¿ç”¨setXxx()æ–¹æ³•è®¾ç½®å€¼
- å‚æ•°ç´¢å¼•ä»1å¼€å§‹
- æ•°æ®ç±»å‹è¦åŒ¹é…

è¾“å‡ºå‚æ•°å¤„ç†ï¼š
- ä½¿ç”¨registerOutParameter()æ³¨å†Œ
- æŒ‡å®šæ­£ç¡®çš„SQLæ•°æ®ç±»å‹
- æ‰§è¡Œåç”¨getXxx()è·å–å€¼

INOUTå‚æ•°å¤„ç†ï¼š
- æ—¢è¦è®¾ç½®å€¼åˆè¦æ³¨å†Œ
- å…ˆsetå†register
- æ‰§è¡Œåè·å–æ–°å€¼
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä½•æ—¶ä½¿ç”¨CallableStatement**
```
âœ… é€‚ç”¨åœºæ™¯ï¼š
- å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚è½¬è´¦ã€åº“å­˜ç®¡ç†ï¼‰
- éœ€è¦äº‹åŠ¡æ§åˆ¶çš„æ“ä½œ
- è®¡ç®—å¯†é›†å‹æ“ä½œ
- éœ€è¦å¤ç”¨çš„æ•°æ®åº“æ“ä½œ
- æé«˜å®‰å…¨æ€§ï¼ˆé¿å…SQLæ³¨å…¥ï¼‰

âŒ ä¸é€‚ç”¨åœºæ™¯ï¼š
- ç®€å•çš„å¢åˆ æ”¹æŸ¥æ“ä½œ
- éœ€è¦åŠ¨æ€SQLçš„åœºæ™¯
- è·¨æ•°æ®åº“å¹³å°çš„åº”ç”¨
```

**ğŸ”§ æœ€ä½³å®è·µè¦ç‚¹**
```
èµ„æºç®¡ç†ï¼š
- ä½¿ç”¨try-with-resourcesè‡ªåŠ¨å…³é—­
- é•¿æœŸä½¿ç”¨å¯ä»¥è€ƒè™‘è¿æ¥æ± 

å‚æ•°å¤„ç†ï¼š
- ä¸¥æ ¼æŒ‰ç…§å­˜å‚¨è¿‡ç¨‹å®šä¹‰è®¾ç½®å‚æ•°
- æ³¨æ„æ•°æ®ç±»å‹åŒ¹é…
- ç´¢å¼•ä»1å¼€å§‹ï¼Œä¸æ˜¯0

å¼‚å¸¸å¤„ç†ï¼š
- åˆ†ç±»å¤„ç†ä¸åŒç±»å‹çš„SQLException
- æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯
- è®°å½•è°ƒè¯•ä¿¡æ¯ä¾¿äºé—®é¢˜æ’æŸ¥

æ€§èƒ½ä¼˜åŒ–ï¼š
- å¯¹äºé¢‘ç¹è°ƒç”¨çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå¯ä»¥é‡ç”¨CallableStatement
- åˆç†è®¾è®¡å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å’Œé€»è¾‘
- ç›‘æ§æ‰§è¡Œæ—¶é—´ï¼Œä¼˜åŒ–æ…¢æŸ¥è¯¢
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
CallableStatementè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œ
ä¸‰ç§å‚æ•°INã€OUTã€INOUTè¦æ¸…æ¥šï¼Œ
è®¾ç½®è¾“å…¥æ³¨å†Œè¾“å‡ºä¸èƒ½å°‘ï¼Œ
æ‰§è¡Œè·å–ç»“æœæŒ‰æ­¥éª¤ï¼Œ
èµ„æºå…³é—­å¼‚å¸¸å¤„ç†è¦åšå¥½ï¼
```