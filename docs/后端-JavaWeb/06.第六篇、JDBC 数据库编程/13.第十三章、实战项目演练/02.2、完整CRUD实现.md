---
title: 2ã€å®Œæ•´CRUDå®ç°
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯CRUD](#1-ä»€ä¹ˆæ˜¯CRUD)
2. [ç”¨æˆ·ç®¡ç†CRUDå®æˆ˜](#2-ç”¨æˆ·ç®¡ç†CRUDå®æˆ˜)
3. [è®¢å•ä¸šåŠ¡é€»è¾‘å¼€å‘](#3-è®¢å•ä¸šåŠ¡é€»è¾‘å¼€å‘)
4. [åˆ†é¡µæŸ¥è¯¢å®ç°è¯¦è§£](#4-åˆ†é¡µæŸ¥è¯¢å®ç°è¯¦è§£)
5. [æ¡ä»¶æŸ¥è¯¢ç»„åˆæŠ€å·§](#5-æ¡ä»¶æŸ¥è¯¢ç»„åˆæŠ€å·§)
6. [æ•°æ®éªŒè¯æœºåˆ¶](#6-æ•°æ®éªŒè¯æœºåˆ¶)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯CRUD


### 1.1 CRUDåŸºæœ¬æ¦‚å¿µ


**ğŸ’¡ é€šä¿—ç†è§£**
```
CRUDå°±åƒç®¡ç†ä½ çš„æ‰‹æœºé€šè®¯å½•ï¼š
ğŸ“± æ·»åŠ è”ç³»äºº â†’ Createï¼ˆåˆ›å»ºï¼‰
ğŸ“– æŸ¥çœ‹è”ç³»äºº â†’ Readï¼ˆè¯»å–ï¼‰  
âœï¸ ä¿®æ”¹è”ç³»äºº â†’ Updateï¼ˆæ›´æ–°ï¼‰
ğŸ—‘ï¸ åˆ é™¤è”ç³»äºº â†’ Deleteï¼ˆåˆ é™¤ï¼‰

è¿™å°±æ˜¯æ•°æ®æ“ä½œçš„å››ä¸ªåŸºæœ¬åŠ¨ä½œï¼
```

**ğŸ”¸ CRUDå››å¤§æ“ä½œ**
- **Createï¼ˆå¢ï¼‰**ï¼šå‘æ•°æ®åº“æ’å…¥æ–°æ•°æ®
- **Readï¼ˆæŸ¥ï¼‰**ï¼šä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®  
- **Updateï¼ˆæ”¹ï¼‰**ï¼šä¿®æ”¹æ•°æ®åº“ä¸­å·²æœ‰æ•°æ®
- **Deleteï¼ˆåˆ ï¼‰**ï¼šä»æ•°æ®åº“åˆ é™¤æ•°æ®

### 1.2 CRUDåœ¨Webå¼€å‘ä¸­çš„ä½œç”¨


**ğŸŒ Webåº”ç”¨ä¸­çš„CRUDåœºæ™¯**
```
ç”¨æˆ·æ³¨å†Œç³»ç»Ÿï¼š
æ³¨å†Œ â†’ Createæ–°ç”¨æˆ·
ç™»å½• â†’ Readç”¨æˆ·ä¿¡æ¯éªŒè¯
ä¿®æ”¹èµ„æ–™ â†’ Updateç”¨æˆ·ä¿¡æ¯
æ³¨é”€è´¦æˆ· â†’ Deleteç”¨æˆ·è®°å½•

ç”µå•†è´­ç‰©è½¦ï¼š
æ·»åŠ å•†å“ â†’ Createè´­ç‰©é¡¹
æŸ¥çœ‹è´­ç‰©è½¦ â†’ Readæ‰€æœ‰å•†å“
ä¿®æ”¹æ•°é‡ â†’ Updateå•†å“æ•°é‡
ç§»é™¤å•†å“ â†’ Deleteè´­ç‰©é¡¹
```

> ğŸ’¡ **å­¦ä¹ æç¤º**  
> CRUDæ˜¯æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿçš„åŸºç¡€ï¼ŒæŒæ¡äº†CRUDå°±æŒæ¡äº†æ•°æ®æ“ä½œçš„æ ¸å¿ƒï¼

---

## 2. ğŸ‘¥ ç”¨æˆ·ç®¡ç†CRUDå®æˆ˜


### 2.1 ç”¨æˆ·è¡¨è®¾è®¡


**ğŸ“‹ æ•°æ®åº“è¡¨ç»“æ„**
```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20),
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**ğŸ” å­—æ®µå«ä¹‰è§£é‡Š**
- `id`ï¼šç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œè‡ªåŠ¨é€’å¢
- `username`ï¼šç”¨æˆ·åï¼Œä¸èƒ½é‡å¤
- `password`ï¼šå¯†ç ï¼ˆå®é™…åº”ç”¨ä¸­éœ€è¦åŠ å¯†ï¼‰
- `email`ï¼šé‚®ç®±åœ°å€
- `phone`ï¼šæ‰‹æœºå·ç 
- `create_time`ï¼šåˆ›å»ºæ—¶é—´ï¼Œè‡ªåŠ¨è®¾ç½®
- `update_time`ï¼šæ›´æ–°æ—¶é—´ï¼Œä¿®æ”¹æ—¶è‡ªåŠ¨æ›´æ–°

### 2.2 Userå®ä½“ç±»è®¾è®¡


```java
public class User {
    private int id;
    private String username;
    private String password;
    private String email;
    private String phone;
    private Date createTime;
    private Date updateTime;
    
    // æ„é€ æ–¹æ³•
    public User() {}
    
    public User(String username, String password, String email, String phone) {
        this.username = username;
        this.password = password;
        this.email = email;
        this.phone = phone;
    }
    
    // getterå’Œsetteræ–¹æ³•...
    // toStringæ–¹æ³•...
}
```

### 2.3 ç”¨æˆ·ç®¡ç†DAOå±‚å®ç°


**ğŸ”§ Createæ“ä½œ - æ·»åŠ ç”¨æˆ·**
```java
public class UserDao {
    
    // æ·»åŠ æ–°ç”¨æˆ·
    public boolean addUser(User user) {
        String sql = "INSERT INTO users (username, password, email, phone) VALUES (?, ?, ?, ?)";
        
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(sql)) {
            
            pstmt.setString(1, user.getUsername());
            pstmt.setString(2, user.getPassword());
            pstmt.setString(3, user.getEmail());
            pstmt.setString(4, user.getPhone());
            
            return pstmt.executeUpdate() > 0;
            
        } catch (SQLException e) {
            System.err.println("æ·»åŠ ç”¨æˆ·å¤±è´¥ï¼š" + e.getMessage());
            return false;
        }
    }
}
```

**ğŸ“– Readæ“ä½œ - æŸ¥è¯¢ç”¨æˆ·**
```java
// æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
public User getUserById(int id) {
    String sql = "SELECT * FROM users WHERE id = ?";
    
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        pstmt.setInt(1, id);
        ResultSet rs = pstmt.executeQuery();
        
        if (rs.next()) {
            User user = new User();
            user.setId(rs.getInt("id"));
            user.setUsername(rs.getString("username"));
            user.setEmail(rs.getString("email"));
            user.setPhone(rs.getString("phone"));
            user.setCreateTime(rs.getTimestamp("create_time"));
            return user;
        }
        
    } catch (SQLException e) {
        System.err.println("æŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼š" + e.getMessage());
    }
    
    return null;
}
```

**âœï¸ Updateæ“ä½œ - æ›´æ–°ç”¨æˆ·**
```java
// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
public boolean updateUser(User user) {
    String sql = "UPDATE users SET username=?, email=?, phone=? WHERE id=?";
    
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        pstmt.setString(1, user.getUsername());
        pstmt.setString(2, user.getEmail());
        pstmt.setString(3, user.getPhone());
        pstmt.setInt(4, user.getId());
        
        return pstmt.executeUpdate() > 0;
        
    } catch (SQLException e) {
        System.err.println("æ›´æ–°ç”¨æˆ·å¤±è´¥ï¼š" + e.getMessage());
        return false;
    }
}
```

**ğŸ—‘ï¸ Deleteæ“ä½œ - åˆ é™¤ç”¨æˆ·**
```java
// åˆ é™¤ç”¨æˆ·
public boolean deleteUser(int id) {
    String sql = "DELETE FROM users WHERE id = ?";
    
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        pstmt.setInt(1, id);
        return pstmt.executeUpdate() > 0;
        
    } catch (SQLException e) {
        System.err.println("åˆ é™¤ç”¨æˆ·å¤±è´¥ï¼š" + e.getMessage());
        return false;
    }
}
```

### 2.4 Serviceä¸šåŠ¡é€»è¾‘å±‚


```java
public class UserService {
    private UserDao userDao = new UserDao();
    
    // ç”¨æˆ·æ³¨å†Œä¸šåŠ¡
    public String registerUser(User user) {
        // 1. éªŒè¯ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        if (userDao.getUserByUsername(user.getUsername()) != null) {
            return "ç”¨æˆ·åå·²å­˜åœ¨";
        }
        
        // 2. å¯†ç åŠ å¯†å¤„ç†ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
        user.setPassword(MD5Util.encrypt(user.getPassword()));
        
        // 3. æ·»åŠ ç”¨æˆ·
        if (userDao.addUser(user)) {
            return "æ³¨å†ŒæˆåŠŸ";
        } else {
            return "æ³¨å†Œå¤±è´¥";
        }
    }
    
    // ç”¨æˆ·ç™»å½•ä¸šåŠ¡
    public User loginUser(String username, String password) {
        User user = userDao.getUserByUsername(username);
        
        if (user != null && user.getPassword().equals(MD5Util.encrypt(password))) {
            return user;
        }
        
        return null;
    }
}
```

---

## 3. ğŸ›ï¸ è®¢å•ä¸šåŠ¡é€»è¾‘å¼€å‘


### 3.1 è®¢å•æ•°æ®æ¨¡å‹è®¾è®¡


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯ç†è§£**
```
ç”µå•†è®¢å•ç³»ç»ŸåŒ…å«ï¼š
ğŸ‘¤ å®¢æˆ·ä¿¡æ¯ â†’ è°ä¹°çš„
ğŸ›’ å•†å“æ¸…å• â†’ ä¹°äº†ä»€ä¹ˆ
ğŸ’° ä»·æ ¼è®¡ç®— â†’ èŠ±äº†å¤šå°‘é’±
ğŸ“¦ è®¢å•çŠ¶æ€ â†’ å¤„ç†è¿›åº¦
```

**ğŸ“Š è®¢å•è¡¨ç»“æ„**
```sql
-- è®¢å•ä¸»è¡¨
CREATE TABLE orders (
    order_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    total_amount DECIMAL(10,2) NOT NULL,
    order_status VARCHAR(20) DEFAULT 'PENDING',
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- è®¢å•æ˜ç»†è¡¨
CREATE TABLE order_items (
    item_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    product_name VARCHAR(100),
    quantity INT NOT NULL,
    unit_price DECIMAL(10,2) NOT NULL,
    subtotal DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
```

### 3.2 è®¢å•å®ä½“ç±»


```java
public class Order {
    private int orderId;
    private int userId;
    private BigDecimal totalAmount;
    private String orderStatus;
    private Date createTime;
    private List<OrderItem> orderItems; // è®¢å•æ˜ç»†åˆ—è¡¨
    
    // æ„é€ æ–¹æ³•å’Œgetter/setter...
}

public class OrderItem {
    private int itemId;
    private int orderId;
    private int productId;
    private String productName;
    private int quantity;
    private BigDecimal unitPrice;
    private BigDecimal subtotal;
    
    // æ„é€ æ–¹æ³•å’Œgetter/setter...
}
```

### 3.3 è®¢å•ä¸šåŠ¡æ“ä½œ


**ğŸ“ åˆ›å»ºè®¢å•**
```java
public class OrderService {
    private OrderDao orderDao = new OrderDao();
    private OrderItemDao orderItemDao = new OrderItemDao();
    
    // åˆ›å»ºè®¢å•ï¼ˆäº‹åŠ¡å¤„ç†ï¼‰
    public boolean createOrder(Order order) {
        Connection conn = null;
        try {
            conn = DBUtil.getConnection();
            conn.setAutoCommit(false); // å¼€å¯äº‹åŠ¡
            
            // 1. æ’å…¥è®¢å•ä¸»è®°å½•
            int orderId = orderDao.insertOrder(conn, order);
            order.setOrderId(orderId);
            
            // 2. æ’å…¥è®¢å•æ˜ç»†
            for (OrderItem item : order.getOrderItems()) {
                item.setOrderId(orderId);
                orderItemDao.insertOrderItem(conn, item);
            }
            
            conn.commit(); // æäº¤äº‹åŠ¡
            return true;
            
        } catch (SQLException e) {
            try {
                if (conn != null) conn.rollback(); // å›æ»šäº‹åŠ¡
            } catch (SQLException ex) {
                ex.printStackTrace();
            }
            System.err.println("åˆ›å»ºè®¢å•å¤±è´¥ï¼š" + e.getMessage());
            return false;
        } finally {
            try {
                if (conn != null) {
                    conn.setAutoCommit(true);
                    conn.close();
                }
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
```

**ğŸ” è®¢å•çŠ¶æ€ç®¡ç†**
```java
// è®¢å•çŠ¶æ€æšä¸¾
public enum OrderStatus {
    PENDING("å¾…å¤„ç†"),
    PAID("å·²æ”¯ä»˜"),
    SHIPPING("é…é€ä¸­"),
    DELIVERED("å·²é€è¾¾"),
    CANCELLED("å·²å–æ¶ˆ");
    
    private String description;
    
    OrderStatus(String description) {
        this.description = description;
    }
    
    public String getDescription() {
        return description;
    }
}

// æ›´æ–°è®¢å•çŠ¶æ€
public boolean updateOrderStatus(int orderId, OrderStatus status) {
    String sql = "UPDATE orders SET order_status = ? WHERE order_id = ?";
    
    try (Connection conn = DBUtil.getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {
        
        pstmt.setString(1, status.name());
        pstmt.setInt(2, orderId);
        
        return pstmt.executeUpdate() > 0;
        
    } catch (SQLException e) {
        System.err.println("æ›´æ–°è®¢å•çŠ¶æ€å¤±è´¥ï¼š" + e.getMessage());
        return false;
    }
}
```

---

## 4. ğŸ“„ åˆ†é¡µæŸ¥è¯¢å®ç°è¯¦è§£


### 4.1 åˆ†é¡µåŸç†ç†è§£


**ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ**
```
æƒ³è±¡ä¸€ä¸‹å›¾ä¹¦é¦†ï¼š
ğŸ“š å¦‚æœæŠŠæ‰€æœ‰ä¹¦éƒ½æ¬åˆ°æ¡Œå­ä¸Š â†’ æ¡Œå­æ”¾ä¸ä¸‹ï¼ŒæŸ¥æ‰¾å›°éš¾
ğŸ“– æ¯æ¬¡åªæ‹¿éœ€è¦çš„å‡ æœ¬ä¹¦ â†’ èŠ‚çœç©ºé—´ï¼ŒæŸ¥æ‰¾é«˜æ•ˆ

æ•°æ®åº“åˆ†é¡µåŒç†ï¼š
âŒ ä¸€æ¬¡æŸ¥è¯¢10ä¸‡æ¡è®°å½• â†’ å†…å­˜å ç”¨å¤§ï¼Œå“åº”æ…¢
âœ… æ¯æ¬¡åªæŸ¥è¯¢20æ¡è®°å½• â†’ å†…å­˜å‹å¥½ï¼Œå“åº”å¿«
```

**ğŸ“Š åˆ†é¡µå‚æ•°è¯´æ˜**
- **å½“å‰é¡µç ï¼ˆcurrentPageï¼‰**ï¼šç”¨æˆ·æƒ³çœ‹ç¬¬å‡ é¡µ
- **æ¯é¡µæ¡æ•°ï¼ˆpageSizeï¼‰**ï¼šæ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡è®°å½•  
- **æ€»è®°å½•æ•°ï¼ˆtotalRecordsï¼‰**ï¼šæ•°æ®åº“ä¸­æ€»å…±æœ‰å¤šå°‘æ¡
- **æ€»é¡µæ•°ï¼ˆtotalPagesï¼‰**ï¼šä¸€å…±åˆ†æˆå¤šå°‘é¡µ

### 4.2 MySQLåˆ†é¡µè¯­æ³•


**ğŸ”¸ LIMITè¯­æ³•**
```sql
-- åŸºæœ¬è¯­æ³•ï¼šLIMIT offset, count
-- offsetï¼šè·³è¿‡å¤šå°‘æ¡è®°å½•
-- countï¼šå–å¤šå°‘æ¡è®°å½•

-- æŸ¥è¯¢ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡
SELECT * FROM users LIMIT 0, 10;

-- æŸ¥è¯¢ç¬¬2é¡µï¼Œæ¯é¡µ10æ¡  
SELECT * FROM users LIMIT 10, 10;

-- æŸ¥è¯¢ç¬¬3é¡µï¼Œæ¯é¡µ10æ¡
SELECT * FROM users LIMIT 20, 10;
```

**ğŸ’¡ åˆ†é¡µè®¡ç®—å…¬å¼**
```
å‡è®¾ï¼šå½“å‰é¡µç ä¸º currentPageï¼Œæ¯é¡µæ˜¾ç¤º pageSize æ¡

offset = (currentPage - 1) Ã— pageSize

ç¤ºä¾‹ï¼š
ç¬¬1é¡µï¼šoffset = (1-1) Ã— 10 = 0
ç¬¬2é¡µï¼šoffset = (2-1) Ã— 10 = 10  
ç¬¬3é¡µï¼šoffset = (3-1) Ã— 10 = 20
```

### 4.3 åˆ†é¡µå·¥å…·ç±»è®¾è®¡


```java
public class PageInfo<T> {
    private int currentPage;      // å½“å‰é¡µç 
    private int pageSize;         // æ¯é¡µæ¡æ•°
    private int totalRecords;     // æ€»è®°å½•æ•°
    private int totalPages;       // æ€»é¡µæ•°
    private List<T> records;      // å½“å‰é¡µæ•°æ®
    
    public PageInfo(int currentPage, int pageSize) {
        this.currentPage = currentPage;
        this.pageSize = pageSize;
    }
    
    // è®¡ç®—æ€»é¡µæ•°
    public void calculateTotalPages() {
        this.totalPages = (totalRecords + pageSize - 1) / pageSize;
    }
    
    // è®¡ç®—LIMITçš„offsetå€¼
    public int getOffset() {
        return (currentPage - 1) * pageSize;
    }
    
    // æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
    public boolean hasPrevious() {
        return currentPage > 1;
    }
    
    // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
    public boolean hasNext() {
        return currentPage < totalPages;
    }
    
    // getterå’Œsetteræ–¹æ³•...
}
```

### 4.4 åˆ†é¡µæŸ¥è¯¢DAOå®ç°


```java
public class UserDao {
    
    // åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
    public PageInfo<User> getUsersByPage(int currentPage, int pageSize) {
        PageInfo<User> pageInfo = new PageInfo<>(currentPage, pageSize);
        
        // 1. æŸ¥è¯¢æ€»è®°å½•æ•°
        String countSql = "SELECT COUNT(*) FROM users";
        try (Connection conn = DBUtil.getConnection();
             Statement stmt = conn.createStatement()) {
            
            ResultSet rs = stmt.executeQuery(countSql);
            if (rs.next()) {
                pageInfo.setTotalRecords(rs.getInt(1));
                pageInfo.calculateTotalPages();
            }
            
        } catch (SQLException e) {
            System.err.println("æŸ¥è¯¢æ€»è®°å½•æ•°å¤±è´¥ï¼š" + e.getMessage());
            return pageInfo;
        }
        
        // 2. æŸ¥è¯¢å½“å‰é¡µæ•°æ®
        String dataSql = "SELECT * FROM users LIMIT ?, ?";
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(dataSql)) {
            
            pstmt.setInt(1, pageInfo.getOffset());
            pstmt.setInt(2, pageSize);
            
            ResultSet rs = pstmt.executeQuery();
            List<User> users = new ArrayList<>();
            
            while (rs.next()) {
                User user = new User();
                user.setId(rs.getInt("id"));
                user.setUsername(rs.getString("username"));
                user.setEmail(rs.getString("email"));
                user.setPhone(rs.getString("phone"));
                user.setCreateTime(rs.getTimestamp("create_time"));
                users.add(user);
            }
            
            pageInfo.setRecords(users);
            
        } catch (SQLException e) {
            System.err.println("æŸ¥è¯¢åˆ†é¡µæ•°æ®å¤±è´¥ï¼š" + e.getMessage());
        }
        
        return pageInfo;
    }
}
```

---

## 5. ğŸ” æ¡ä»¶æŸ¥è¯¢ç»„åˆæŠ€å·§


### 5.1 æ¡ä»¶æŸ¥è¯¢çš„ä¸šåŠ¡åœºæ™¯


**ğŸ¯ å®é™…åº”ç”¨åœºæ™¯**
```
ç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„æœç´¢éœ€æ±‚ï¼š
ğŸ“ æŒ‰ç”¨æˆ·åæ¨¡ç³Šæœç´¢
ğŸ“§ æŒ‰é‚®ç®±ç²¾ç¡®åŒ¹é…
ğŸ“± æŒ‰æ‰‹æœºå·æŸ¥æ‰¾
ğŸ“… æŒ‰æ³¨å†Œæ—¶é—´èŒƒå›´ç­›é€‰
ğŸ”„ å¤šæ¡ä»¶ç»„åˆæœç´¢
```

### 5.2 åŠ¨æ€SQLæ„å»º


**ğŸ”§ æŸ¥è¯¢æ¡ä»¶ç±»è®¾è®¡**
```java
public class UserQueryCondition {
    private String username;        // ç”¨æˆ·åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰
    private String email;          // é‚®ç®±ï¼ˆç²¾ç¡®æŸ¥è¯¢ï¼‰  
    private String phone;          // æ‰‹æœºå·ï¼ˆç²¾ç¡®æŸ¥è¯¢ï¼‰
    private Date startDate;        // æ³¨å†Œå¼€å§‹æ—¶é—´
    private Date endDate;          // æ³¨å†Œç»“æŸæ—¶é—´
    private int currentPage = 1;   // å½“å‰é¡µç 
    private int pageSize = 10;     // æ¯é¡µæ¡æ•°
    
    // æ£€æŸ¥æ˜¯å¦æœ‰æŸ¥è¯¢æ¡ä»¶
    public boolean hasConditions() {
        return username != null || email != null || phone != null || 
               startDate != null || endDate != null;
    }
    
    // getterå’Œsetteræ–¹æ³•...
}
```

**ğŸ“ åŠ¨æ€SQLæ„å»ºæ–¹æ³•**
```java
public class UserDao {
    
    // æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·
    public PageInfo<User> searchUsers(UserQueryCondition condition) {
        PageInfo<User> pageInfo = new PageInfo<>(condition.getCurrentPage(), condition.getPageSize());
        
        // 1. æ„å»ºWHEREå­å¥
        StringBuilder whereClause = new StringBuilder();
        List<Object> params = new ArrayList<>();
        
        buildWhereClause(condition, whereClause, params);
        
        // 2. æŸ¥è¯¢æ€»è®°å½•æ•°
        String countSql = "SELECT COUNT(*) FROM users" + whereClause.toString();
        pageInfo.setTotalRecords(executeCountQuery(countSql, params));
        pageInfo.calculateTotalPages();
        
        // 3. æŸ¥è¯¢åˆ†é¡µæ•°æ®
        String dataSql = "SELECT * FROM users" + whereClause.toString() + 
                        " ORDER BY create_time DESC LIMIT ?, ?";
        params.add(pageInfo.getOffset());
        params.add(condition.getPageSize());
        
        List<User> users = executeDataQuery(dataSql, params);
        pageInfo.setRecords(users);
        
        return pageInfo;
    }
    
    // æ„å»ºWHEREå­å¥
    private void buildWhereClause(UserQueryCondition condition, 
                                 StringBuilder whereClause, 
                                 List<Object> params) {
        List<String> conditions = new ArrayList<>();
        
        // ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢
        if (condition.getUsername() != null && !condition.getUsername().trim().isEmpty()) {
            conditions.add("username LIKE ?");
            params.add("%" + condition.getUsername().trim() + "%");
        }
        
        // é‚®ç®±ç²¾ç¡®åŒ¹é…
        if (condition.getEmail() != null && !condition.getEmail().trim().isEmpty()) {
            conditions.add("email = ?");
            params.add(condition.getEmail().trim());
        }
        
        // æ‰‹æœºå·ç²¾ç¡®åŒ¹é…  
        if (condition.getPhone() != null && !condition.getPhone().trim().isEmpty()) {
            conditions.add("phone = ?");
            params.add(condition.getPhone().trim());
        }
        
        // æ³¨å†Œæ—¶é—´èŒƒå›´
        if (condition.getStartDate() != null) {
            conditions.add("create_time >= ?");
            params.add(condition.getStartDate());
        }
        
        if (condition.getEndDate() != null) {
            conditions.add("create_time <= ?");
            params.add(condition.getEndDate());
        }
        
        // æ‹¼æ¥WHEREå­å¥
        if (!conditions.isEmpty()) {
            whereClause.append(" WHERE ");
            whereClause.append(String.join(" AND ", conditions));
        }
    }
}
```

### 5.3 æ¡ä»¶æŸ¥è¯¢æœ€ä½³å®è·µ


> âš¡ **æ€§èƒ½æç¤º**  
> åœ¨ç»å¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥å¤§å¤§æå‡æŸ¥è¯¢é€Ÿåº¦

```sql
-- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
CREATE INDEX idx_username ON users(username);
CREATE INDEX idx_email ON users(email);  
CREATE INDEX idx_create_time ON users(create_time);
```

**ğŸ” æŸ¥è¯¢ä¼˜åŒ–å»ºè®®**
- **æ¨¡ç³ŠæŸ¥è¯¢ä¼˜åŒ–**ï¼šé¿å…ä»¥é€šé…ç¬¦å¼€å¤´çš„LIKEæŸ¥è¯¢
- **æ—¶é—´èŒƒå›´æŸ¥è¯¢**ï¼šä½¿ç”¨ç´¢å¼•å‹å¥½çš„æ—¶é—´æ¯”è¾ƒ
- **åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–**ï¼šé¿å…å¤§OFFSETå€¼çš„æŸ¥è¯¢

---

## 6. âœ… æ•°æ®éªŒè¯æœºåˆ¶


### 6.1 æ•°æ®éªŒè¯çš„é‡è¦æ€§


**âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®éªŒè¯ï¼Ÿ**
```
æ²¡æœ‰éªŒè¯çš„åæœï¼š
ğŸ’¥ SQLæ³¨å…¥æ”»å‡»
ğŸ’£ æ•°æ®åº“çº¦æŸé”™è¯¯
ğŸ› ä¸šåŠ¡é€»è¾‘é”™è¯¯
ğŸ˜± ç³»ç»Ÿå´©æºƒé£é™©

æœ‰äº†éªŒè¯çš„å¥½å¤„ï¼š
ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤
âœ¨ æ•°æ®è´¨é‡ä¿è¯
ğŸ¯ ç”¨æˆ·ä½“éªŒå‹å¥½
ğŸ“ˆ ç³»ç»Ÿç¨³å®šå¯é 
```

### 6.2 å‰ç«¯éªŒè¯


**ğŸ“± JavaScriptè¡¨å•éªŒè¯**
```html
<form id="userForm" onsubmit="return validateForm()">
    <input type="text" id="username" placeholder="ç”¨æˆ·å" required>
    <input type="email" id="email" placeholder="é‚®ç®±" required>
    <input type="tel" id="phone" placeholder="æ‰‹æœºå·" required>
    <input type="password" id="password" placeholder="å¯†ç " required>
    <button type="submit">æäº¤</button>
</form>

<script>
function validateForm() {
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const password = document.getElementById('password').value;
    
    // ç”¨æˆ·åéªŒè¯
    if (username.length < 3 || username.length > 20) {
        alert('ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´');
        return false;
    }
    
    // æ‰‹æœºå·éªŒè¯
    if (!/^1[3-9]\d{9}$/.test(phone)) {
        alert('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ');
        return false;
    }
    
    // å¯†ç å¼ºåº¦éªŒè¯
    if (password.length < 6) {
        alert('å¯†ç é•¿åº¦è‡³å°‘6ä½');
        return false;
    }
    
    return true;
}
</script>
```

### 6.3 åç«¯éªŒè¯å·¥å…·ç±»


```java
public class ValidationUtil {
    
    // éªŒè¯ç”¨æˆ·å¯¹è±¡
    public static List<String> validateUser(User user) {
        List<String> errors = new ArrayList<>();
        
        // ç”¨æˆ·åéªŒè¯
        if (user.getUsername() == null || user.getUsername().trim().isEmpty()) {
            errors.add("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        } else if (user.getUsername().length() < 3 || user.getUsername().length() > 20) {
            errors.add("ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´");
        } else if (!user.getUsername().matches("^[a-zA-Z0-9_]+$")) {
            errors.add("ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿");
        }
        
        // é‚®ç®±éªŒè¯
        if (user.getEmail() != null && !user.getEmail().trim().isEmpty()) {
            if (!isValidEmail(user.getEmail())) {
                errors.add("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
            }
        }
        
        // æ‰‹æœºå·éªŒè¯
        if (user.getPhone() != null && !user.getPhone().trim().isEmpty()) {
            if (!isValidPhone(user.getPhone())) {
                errors.add("æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®");
            }
        }
        
        // å¯†ç éªŒè¯
        if (user.getPassword() == null || user.getPassword().length() < 6) {
            errors.add("å¯†ç é•¿åº¦è‡³å°‘6ä½");
        }
        
        return errors;
    }
    
    // é‚®ç®±æ ¼å¼éªŒè¯
    private static boolean isValidEmail(String email) {
        String emailRegex = "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$";
        return email.matches(emailRegex);
    }
    
    // æ‰‹æœºå·æ ¼å¼éªŒè¯
    private static boolean isValidPhone(String phone) {
        String phoneRegex = "^1[3-9]\\d{9}$";
        return phone.matches(phoneRegex);
    }
}
```

### 6.4 Serviceå±‚éªŒè¯é›†æˆ


```java
public class UserService {
    private UserDao userDao = new UserDao();
    
    public String addUser(User user) {
        // 1. æ•°æ®éªŒè¯
        List<String> errors = ValidationUtil.validateUser(user);
        if (!errors.isEmpty()) {
            return "éªŒè¯å¤±è´¥ï¼š" + String.join(", ", errors);
        }
        
        // 2. ä¸šåŠ¡è§„åˆ™éªŒè¯
        if (userDao.isUsernameExists(user.getUsername())) {
            return "ç”¨æˆ·åå·²å­˜åœ¨";
        }
        
        if (user.getEmail() != null && userDao.isEmailExists(user.getEmail())) {
            return "é‚®ç®±å·²è¢«æ³¨å†Œ";
        }
        
        // 3. å¯†ç åŠ å¯†
        user.setPassword(MD5Util.encrypt(user.getPassword()));
        
        // 4. æ‰§è¡Œæ·»åŠ æ“ä½œ
        if (userDao.addUser(user)) {
            return "æ·»åŠ æˆåŠŸ";
        } else {
            return "æ·»åŠ å¤±è´¥";
        }
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ CRUDå››å¤§æ“ä½œï¼šCreateã€Readã€Updateã€Deleteæ˜¯æ•°æ®æ“ä½œåŸºç¡€
ğŸ”¸ å®ä½“ç±»è®¾è®¡ï¼šåˆç†çš„JavaBeanè®¾è®¡æ˜¯æ•°æ®æ“ä½œçš„åŸºç¡€
ğŸ”¸ DAOæ¨¡å¼ï¼šæ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼Œåˆ†ç¦»æ•°æ®è®¿é—®é€»è¾‘
ğŸ”¸ åˆ†é¡µæŸ¥è¯¢ï¼šå¤§æ•°æ®é‡åœºæ™¯ä¸‹çš„å¿…å¤‡æŠ€æœ¯
ğŸ”¸ æ¡ä»¶æŸ¥è¯¢ï¼šåŠ¨æ€SQLæ„å»ºï¼Œæ»¡è¶³å¤æ‚æŸ¥è¯¢éœ€æ±‚
ğŸ”¸ æ•°æ®éªŒè¯ï¼šå‰åç«¯åŒé‡éªŒè¯ï¼Œä¿è¯æ•°æ®è´¨é‡å’Œå®‰å…¨
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ CRUDæ“ä½œçš„æœ¬è´¨**
```
æ•°æ®åº“æ“ä½œçš„å››ä¸ªåŸºæœ¬åŠ¨ä½œï¼š
å¢åˆ æ”¹æŸ¥ = æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®æ“ä½œåŸºç¡€
æŒæ¡äº†CRUD = æŒæ¡äº†æ•°æ®æ“ä½œçš„æ ¸å¿ƒæŠ€èƒ½
```

**ğŸ”¹ åˆ†é¡µæŸ¥è¯¢çš„ä»·å€¼**
```
è§£å†³å¤§æ•°æ®é‡é—®é¢˜ï¼š
â€¢ æå‡é¡µé¢å“åº”é€Ÿåº¦
â€¢ å‡å°‘å†…å­˜å ç”¨
â€¢ æ”¹å–„ç”¨æˆ·ä½“éªŒ
â€¢ é™ä½æ•°æ®åº“å‹åŠ›
```

**ğŸ”¹ æ•°æ®éªŒè¯çš„é‡è¦æ€§**
```
å®‰å…¨ç¬¬ä¸€ï¼š
â€¢ é˜²æ­¢æ¶æ„æ”»å‡»
â€¢ ä¿è¯æ•°æ®è´¨é‡  
â€¢ æå‡ç”¨æˆ·ä½“éªŒ
â€¢ ç»´æŠ¤ç³»ç»Ÿç¨³å®š
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¼ä¸šå¼€å‘å®è·µ**
- **ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ**ï¼šæ³¨å†Œã€ç™»å½•ã€èµ„æ–™ç®¡ç†
- **ç”µå•†è®¢å•ç³»ç»Ÿ**ï¼šä¸‹å•ã€æ”¯ä»˜ã€ç‰©æµè·Ÿè¸ª
- **å†…å®¹ç®¡ç†ç³»ç»Ÿ**ï¼šæ–‡ç« å‘å¸ƒã€ç¼–è¾‘ã€åˆ é™¤
- **åº“å­˜ç®¡ç†ç³»ç»Ÿ**ï¼šå•†å“å¢åˆ æ”¹æŸ¥ã€åº“å­˜ç»Ÿè®¡

**ğŸš€ æŠ€èƒ½æå‡è·¯å¾„**
```
ğŸ“š å­¦ä¹ è·¯çº¿ï¼š
åŸºç¡€é˜¶æ®µï¼šæŒæ¡CRUDåŸºæœ¬æ“ä½œ
è¿›é˜¶é˜¶æ®µï¼šåˆ†é¡µæŸ¥è¯¢ã€æ¡ä»¶æŸ¥è¯¢
é«˜çº§é˜¶æ®µï¼šäº‹åŠ¡ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–
ä¸“å®¶é˜¶æ®µï¼šæ¶æ„è®¾è®¡ã€å®‰å…¨é˜²æŠ¤
```

**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
CRUDå››æ“ä½œï¼Œå¢åˆ æ”¹æŸ¥è¦è®°ç‰¢
åˆ†é¡µæ¡ä»¶æŸ¥ï¼Œç”¨æˆ·ä½“éªŒä¸èƒ½å°‘  
æ•°æ®è¦éªŒè¯ï¼Œå®‰å…¨è´¨é‡éƒ½é‡è¦
å®æˆ˜å¤šç»ƒä¹ ï¼ŒæŠ€èƒ½æ°´å¹³æ­¥æ­¥é«˜
```

> ğŸ’¡ **å­¦ä¹ å»ºè®®**  
> CRUDæ˜¯JavaWebå¼€å‘çš„åŸºç¡€ï¼Œå»ºè®®å¤šåšå®æˆ˜ç»ƒä¹ ï¼Œä»ç®€å•çš„ç”¨æˆ·ç®¡ç†å¼€å§‹ï¼Œé€æ­¥æ‰©å±•åˆ°å¤æ‚çš„ä¸šåŠ¡ç³»ç»Ÿã€‚è®°ä½ï¼šç†è®º+å®è·µ=çœŸæ­£çš„æŠ€èƒ½æŒæ¡ï¼