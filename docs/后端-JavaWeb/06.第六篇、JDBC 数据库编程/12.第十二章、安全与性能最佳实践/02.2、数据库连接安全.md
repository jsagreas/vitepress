---
title: 2ã€æ•°æ®åº“è¿æ¥å®‰å…¨
---
## ğŸ“š ç›®å½•


1. [æ•°æ®åº“å®‰å…¨æ¦‚è¿°](#1-æ•°æ®åº“å®‰å…¨æ¦‚è¿°)
2. [æœ€å°æƒé™åŸåˆ™](#2-æœ€å°æƒé™åŸåˆ™)
3. [è´¦å·æƒé™æ§åˆ¶](#3-è´¦å·æƒé™æ§åˆ¶)
4. [SSLåŠ å¯†ä¼ è¾“](#4-sslåŠ å¯†ä¼ è¾“)
5. [è¯ä¹¦éªŒè¯æœºåˆ¶](#5-è¯ä¹¦éªŒè¯æœºåˆ¶)
6. [ç½‘ç»œéš”ç¦»ç­–ç•¥](#6-ç½‘ç»œéš”ç¦»ç­–ç•¥)
7. [å®‰å…¨é…ç½®æœ€ä½³å®è·µ](#7-å®‰å…¨é…ç½®æœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

# 1. ğŸ”’ æ•°æ®åº“å®‰å…¨æ¦‚è¿°



## 1.1 ä¸ºä»€ä¹ˆæ•°æ®åº“å®‰å…¨å¦‚æ­¤é‡è¦ï¼Ÿ



**ğŸ’¡ ç®€å•ç†è§£**ï¼šæ•°æ®åº“å°±åƒä½ å®¶çš„ä¿é™©æŸœï¼Œé‡Œé¢å­˜æ”¾ç€æœ€é‡è¦çš„è´¢äº§ï¼ˆç”¨æˆ·æ•°æ®ã€ä¸šåŠ¡ä¿¡æ¯ï¼‰ã€‚å¦‚æœä¿é™©æŸœçš„é’¥åŒ™è¢«åäººæ‹¿åˆ°ï¼Œåæœä¸å ªè®¾æƒ³ã€‚

**ğŸ¯ ä¸»è¦å®‰å…¨å¨èƒ**ï¼š
- **æ•°æ®æ³„éœ²**ï¼šæ•æ„Ÿä¿¡æ¯è¢«æ¶æ„è·å–
- **æ•°æ®ç¯¡æ”¹**ï¼šé‡è¦æ•°æ®è¢«æ¶æ„ä¿®æ”¹
- **æƒé™æ»¥ç”¨**ï¼šè¶…å‡ºæƒé™èŒƒå›´çš„éæ³•æ“ä½œ
- **ç½‘ç»œçªƒå¬**ï¼šæ•°æ®ä¼ è¾“è¿‡ç¨‹è¢«æˆªè·

**ğŸ“Š å®‰å…¨é˜²æŠ¤å±‚æ¬¡å›¾**ï¼š
```
åº”ç”¨å±‚å®‰å…¨
    â†“
ç½‘ç»œä¼ è¾“å®‰å…¨ (SSL/TLS)
    â†“
æ•°æ®åº“è®¿é—®æ§åˆ¶ (è´¦å·æƒé™)
    â†“
ç½‘ç»œéš”ç¦» (é˜²ç«å¢™/VPN)
    â†“
ç‰©ç†å®‰å…¨ (æœºæˆ¿å®‰å…¨)
```

## 1.2 JavaWebä¸­çš„æ•°æ®åº“å®‰å…¨æŒ‘æˆ˜



**ğŸ”¸ å¸¸è§å®‰å…¨é—®é¢˜**ï¼š
- æ•°æ®åº“å¯†ç æ˜æ–‡å­˜å‚¨
- ä½¿ç”¨è¿‡é«˜æƒé™çš„æ•°æ®åº“è´¦å·
- æ•°æ®ä¼ è¾“æœªåŠ å¯†
- ç¼ºå°‘æœ‰æ•ˆçš„è®¿é—®æ§åˆ¶
- ç½‘ç»œè¾¹ç•Œé˜²æŠ¤ä¸è¶³

**âš ï¸ å®‰å…¨äº‹æ•…çš„å…¸å‹åæœ**ï¼š
- ç”¨æˆ·éšç§æ³„éœ²
- ä¼ä¸šå•†ä¸šæœºå¯†å¤–æ³„
- æ³•å¾‹è´£ä»»å’Œå·¨é¢ç½šæ¬¾
- ä¼ä¸šå£°èª‰ä¸¥é‡å—æŸ

---

# 2. âš¡ æœ€å°æƒé™åŸåˆ™



## 2.1 ä»€ä¹ˆæ˜¯æœ€å°æƒé™åŸåˆ™ï¼Ÿ



**ğŸ¯ æ ¸å¿ƒç†å¿µ**ï¼šç»™æ¯ä¸ªç”¨æˆ·å’Œåº”ç”¨ç¨‹åºåˆ†é…**åˆšå¥½å¤Ÿç”¨**çš„æƒé™ï¼Œå¤šä¸€åˆ†éƒ½ä¸ç»™ã€‚

> **ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**
> å°±åƒå…¬å¸ç»™å‘˜å·¥å‘é—¨å¡ä¸€æ ·ï¼š
> - æ™®é€šå‘˜å·¥ï¼šåªèƒ½è¿›åŠå…¬åŒº
> - è´¢åŠ¡äººå‘˜ï¼šå¯ä»¥è¿›è´¢åŠ¡å®¤
> - ç®¡ç†å‘˜ï¼šå¯ä»¥è¿›æ‰€æœ‰åŒºåŸŸ
> 
> ç»ä¸ä¼šç»™æ™®é€šå‘˜å·¥ç®¡ç†å‘˜æƒé™ï¼

## 2.2 æ•°æ®åº“æƒé™åˆ†çº§



**ğŸ“‹ æƒé™ç­‰çº§åˆ’åˆ†**ï¼š

| æƒé™çº§åˆ« | **æƒé™å†…å®¹** | **é€‚ç”¨åœºæ™¯** | **é£é™©çº§åˆ«** |
|---------|------------|-------------|-------------|
| ğŸŸ¢ **æŸ¥è¯¢æƒé™** | `SELECT` | æŠ¥è¡¨æŸ¥è¯¢ã€æ•°æ®å±•ç¤º | `ä½é£é™©` |
| ğŸŸ¡ **æ•°æ®æ“ä½œ** | `SELECT, INSERT, UPDATE` | ä¸šåŠ¡åº”ç”¨ | `ä¸­é£é™©` |
| ğŸŸ  **ç»“æ„æ“ä½œ** | ä¸Šè¿° + `CREATE, ALTER` | å¼€å‘æµ‹è¯• | `é«˜é£é™©` |
| ğŸ”´ **è¶…çº§æƒé™** | `ALL PRIVILEGES` | DBAç®¡ç† | `æé«˜é£é™©` |

## 2.3 å®é™…åº”ç”¨ç­–ç•¥



**ğŸ”§ æƒé™é…ç½®ç¤ºä¾‹**ï¼š

**æ­¥éª¤1ï¼šåˆ›å»ºä¸“ç”¨æ•°æ®åº“è´¦å·**
```sql
-- åˆ›å»ºåº”ç”¨ä¸“ç”¨è´¦å·ï¼ˆä¸è¦ä½¿ç”¨rootï¼ï¼‰
CREATE USER 'webapp_user'@'%' IDENTIFIED BY 'StrongPassword123!';

-- åˆ›å»ºåªè¯»è´¦å·ï¼ˆç”¨äºæŠ¥è¡¨æŸ¥è¯¢ï¼‰
CREATE USER 'readonly_user'@'%' IDENTIFIED BY 'ReadOnlyPass456!';
```

**æ­¥éª¤2ï¼šç²¾ç¡®åˆ†é…æƒé™**
```sql
-- åº”ç”¨è´¦å·ï¼šåªç»™ä¸šåŠ¡å¿…éœ€çš„æƒé™
GRANT SELECT, INSERT, UPDATE ON myapp.users TO 'webapp_user'@'%';
GRANT SELECT, INSERT, UPDATE ON myapp.orders TO 'webapp_user'@'%';

-- åªè¯»è´¦å·ï¼šä»…æŸ¥è¯¢æƒé™
GRANT SELECT ON myapp.* TO 'readonly_user'@'%';

-- åˆ·æ–°æƒé™
FLUSH PRIVILEGES;
```

**ğŸ¯ Javaè¿æ¥é…ç½®**ï¼š
```java
// å¥½çš„åšæ³•ï¼šä½¿ç”¨ä¸“ç”¨è´¦å·
String url = "jdbc:mysql://localhost:3306/myapp";
String username = "webapp_user";  // ä¸“ç”¨è´¦å·
String password = "StrongPassword123!";

// âŒ é”™è¯¯åšæ³•ï¼šä½¿ç”¨rootè´¦å·
// String username = "root";  // é£é™©æé«˜ï¼
```

---

# 3. ğŸ‘¤ è´¦å·æƒé™æ§åˆ¶



## 3.1 è´¦å·ç®¡ç†ç­–ç•¥



**ğŸ“‹ è´¦å·åˆ†ç±»ç®¡ç†**ï¼š

**ğŸ”¸ åº”ç”¨æœåŠ¡è´¦å·**
```sql
-- ç”¨é€”ï¼šJavaWebåº”ç”¨è¿æ¥æ•°æ®åº“
-- æƒé™ï¼šç²¾ç¡®åˆ°è¡¨çº§åˆ«çš„å¢åˆ æ”¹æŸ¥
-- ç‰¹ç‚¹ï¼šå¯†ç å¤æ‚ã€å®šæœŸè½®æ¢
CREATE USER 'app_service'@'192.168.1.%' IDENTIFIED BY 'ComplexPass2024!';
GRANT SELECT, INSERT, UPDATE, DELETE ON webapp.* TO 'app_service'@'192.168.1.%';
```

**ğŸ”¸ åªè¯»æŸ¥è¯¢è´¦å·**
```sql
-- ç”¨é€”ï¼šæ•°æ®åˆ†æã€æŠ¥è¡¨ç”Ÿæˆ
-- æƒé™ï¼šä»…æŸ¥è¯¢æƒé™
-- ç‰¹ç‚¹ï¼šæ— æ³•ä¿®æ”¹ä»»ä½•æ•°æ®
CREATE USER 'analytics_read'@'%' IDENTIFIED BY 'ReadAnalytics2024!';
GRANT SELECT ON webapp.users, webapp.orders TO 'analytics_read'@'%';
```

**ğŸ”¸ è¿ç»´ç®¡ç†è´¦å·**
```sql
-- ç”¨é€”ï¼šæ•°æ®åº“ç»´æŠ¤ã€å¤‡ä»½æ¢å¤
-- æƒé™ï¼šå®Œæ•´çš„ç®¡ç†æƒé™
-- ç‰¹ç‚¹ï¼šä¸¥æ ¼æ§åˆ¶ä½¿ç”¨ï¼Œè®°å½•æ‰€æœ‰æ“ä½œ
CREATE USER 'dba_admin'@'localhost' IDENTIFIED BY 'SuperSecureDBAPwd!';
GRANT ALL PRIVILEGES ON *.* TO 'dba_admin'@'localhost' WITH GRANT OPTION;
```

## 3.2 æƒé™éªŒè¯æœºåˆ¶



**ğŸ” æƒé™æ£€æŸ¥æµç¨‹**ï¼š
```
ç”¨æˆ·è¿æ¥è¯·æ±‚
    â†“
èº«ä»½è®¤è¯ (ç”¨æˆ·å+å¯†ç )
    â†“
æƒé™éªŒè¯ (æ£€æŸ¥æ“ä½œæƒé™)
    â†“
IPåœ°å€éªŒè¯ (æ£€æŸ¥æ¥æºIP)
    â†“
æ‰§è¡Œæ•°æ®åº“æ“ä½œ
```

**ğŸ’» Javaä¸­çš„æƒé™éªŒè¯**ï¼š
```java
public class DatabaseSecurityUtil {
    // éªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æ“ä½œæƒé™
    public static boolean checkPermission(Connection conn, String operation) {
        try {
            // æŸ¥è¯¢å½“å‰ç”¨æˆ·æƒé™
            String sql = "SHOW GRANTS FOR CURRENT_USER()";
            PreparedStatement pstmt = conn.prepareStatement(sql);
            ResultSet rs = pstmt.executeQuery();
            
            while (rs.next()) {
                String grant = rs.getString(1);
                if (grant.contains(operation.toUpperCase())) {
                    return true;
                }
            }
            return false;
        } catch (SQLException e) {
            logger.error("æƒé™æ£€æŸ¥å¤±è´¥: " + e.getMessage());
            return false;
        }
    }
}
```

---

# 4. ğŸ” SSLåŠ å¯†ä¼ è¾“



## 4.1 ä¸ºä»€ä¹ˆéœ€è¦SSLåŠ å¯†ï¼Ÿ



**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šæ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“æ—¶ï¼Œå°±åƒåœ¨å¤§è¡—ä¸Šå–Šè¯ï¼Œä»»ä½•äººéƒ½å¯èƒ½å·å¬ã€‚

> **ğŸ’¡ å½¢è±¡æ¯”å–»**
> æ²¡æœ‰SSLï¼šå°±åƒå¯„æ˜ä¿¡ç‰‡ï¼Œé‚®é€’å‘˜å’Œè·¯äººéƒ½èƒ½çœ‹åˆ°å†…å®¹
> ä½¿ç”¨SSLï¼šå°±åƒå¯„ä¿å¯†ä¿¡ä»¶ï¼Œåªæœ‰æ”¶ä¿¡äººèƒ½æ‰“å¼€çœ‹åˆ°å†…å®¹

**ğŸ”¸ SSLåŠ å¯†çš„ä½œç”¨**ï¼š
- **æ•°æ®åŠ å¯†**ï¼šä¼ è¾“å†…å®¹æ— æ³•è¢«çªƒå¬
- **èº«ä»½éªŒè¯**ï¼šç¡®è®¤æœåŠ¡å™¨èº«ä»½çœŸå®æ€§
- **å®Œæ•´æ€§ä¿æŠ¤**ï¼šæ•°æ®æœªè¢«ç¯¡æ”¹

## 4.2 SSLé…ç½®æ­¥éª¤



**æ­¥éª¤1ï¼šæ•°æ®åº“æœåŠ¡ç«¯SSLé…ç½®**

**MySQL SSLå¯ç”¨**ï¼š
```sql
-- æ£€æŸ¥SSLæ˜¯å¦å¯ç”¨
SHOW VARIABLES LIKE 'have_ssl';

-- æŸ¥çœ‹SSLç›¸å…³é…ç½®
SHOW VARIABLES LIKE '%ssl%';
```

**æ­¥éª¤2ï¼šJavaå®¢æˆ·ç«¯SSLé…ç½®**

**ğŸ”§ åŸºç¡€SSLè¿æ¥**ï¼š
```java
// SSLè¿æ¥URLé…ç½®
String url = "jdbc:mysql://localhost:3306/myapp" +
    "?useSSL=true" +                    // å¯ç”¨SSL
    "&requireSSL=true" +                // å¼ºåˆ¶ä½¿ç”¨SSL
    "&verifyServerCertificate=true";    // éªŒè¯æœåŠ¡å™¨è¯ä¹¦

Properties props = new Properties();
props.setProperty("user", "webapp_user");
props.setProperty("password", "StrongPassword123!");

// å»ºç«‹å®‰å…¨è¿æ¥
Connection conn = DriverManager.getConnection(url, props);
```

**ğŸ”§ é«˜çº§SSLé…ç½®**ï¼š
```java
public class SecureDatabaseConnection {
    public static Connection getSecureConnection() throws SQLException {
        String url = "jdbc:mysql://localhost:3306/myapp" +
            "?useSSL=true" +
            "&requireSSL=true" +
            "&verifyServerCertificate=true" +
            "&trustCertificateKeyStoreUrl=file:///path/to/truststore.jks" +
            "&trustCertificateKeyStorePassword=truststorePassword";
        
        Properties props = new Properties();
        props.setProperty("user", "webapp_user");
        props.setProperty("password", System.getenv("DB_PASSWORD")); // ä»ç¯å¢ƒå˜é‡è·å–
        
        return DriverManager.getConnection(url, props);
    }
}
```

## 4.3 SSLæ€§èƒ½è€ƒè™‘



**âš–ï¸ æ€§èƒ½å½±å“åˆ†æ**ï¼š

| æ–¹é¢ | **æ— SSL** | **å¯ç”¨SSL** | **å½±å“ç¨‹åº¦** |
|------|----------|------------|-------------|
| è¿æ¥å»ºç«‹ | `å¿«é€Ÿ` | `è¾ƒæ…¢` | `åˆå§‹è¿æ¥å¢åŠ 10-20ms` |
| æ•°æ®ä¼ è¾“ | `å¿«é€Ÿ` | `ç•¥æ…¢` | `CPUä½¿ç”¨ç‡å¢åŠ 5-10%` |
| ååé‡ | `é«˜` | `ä¸­ç­‰` | `æ•´ä½“æ€§èƒ½å½±å“<5%` |

**ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
- ä½¿ç”¨è¿æ¥æ± å¤ç”¨SSLè¿æ¥
- é€‰æ‹©é«˜æ•ˆçš„åŠ å¯†ç®—æ³•
- åˆç†é…ç½®SSLä¼šè¯å¤ç”¨

---

# 5. ğŸ“œ è¯ä¹¦éªŒè¯æœºåˆ¶



## 5.1 æ•°å­—è¯ä¹¦çš„ä½œç”¨



**ğŸ¯ è¯ä¹¦çš„æœ¬è´¨**ï¼šå°±åƒèº«ä»½è¯ä¸€æ ·ï¼Œè¯æ˜æœåŠ¡å™¨çš„çœŸå®èº«ä»½ã€‚

**ğŸ”¸ è¯ä¹¦éªŒè¯æµç¨‹**ï¼š
```
å®¢æˆ·ç«¯å‘èµ·è¿æ¥
    â†“
æœåŠ¡å™¨è¿”å›æ•°å­—è¯ä¹¦
    â†“
å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§
    â†“
è¯ä¹¦æœ‰æ•ˆ â†’ å»ºç«‹åŠ å¯†è¿æ¥
è¯ä¹¦æ— æ•ˆ â†’ æ‹’ç»è¿æ¥
```

## 5.2 è¯ä¹¦ç±»å‹ä¸é€‰æ‹©



**ğŸ“‹ è¯ä¹¦åˆ†ç±»**ï¼š

**ğŸ”¸ è‡ªç­¾åè¯ä¹¦**
```java
// é€‚ç”¨åœºæ™¯ï¼šå¼€å‘æµ‹è¯•ç¯å¢ƒ
String url = "jdbc:mysql://localhost:3306/myapp" +
    "?useSSL=true" +
    "&trustServerCertificate=true";  // ä¿¡ä»»è‡ªç­¾åè¯ä¹¦ï¼ˆä»…æµ‹è¯•ç”¨ï¼ï¼‰
```

**ä¼˜ç‚¹**ï¼šå…è´¹ã€å¿«é€Ÿéƒ¨ç½²
**ç¼ºç‚¹**ï¼šæµè§ˆå™¨ä¼šè­¦å‘Šã€å®‰å…¨æ€§è¾ƒä½

**ğŸ”¸ CAç­¾å‘è¯ä¹¦**
```java
// é€‚ç”¨åœºæ™¯ï¼šç”Ÿäº§ç¯å¢ƒ
String url = "jdbc:mysql://db.company.com:3306/myapp" +
    "?useSSL=true" +
    "&verifyServerCertificate=true";  // éªŒè¯CAè¯ä¹¦
```

**ä¼˜ç‚¹**ï¼šæƒå¨è®¤è¯ã€å®‰å…¨æ€§é«˜
**ç¼ºç‚¹**ï¼šéœ€è¦è´­ä¹°ã€é…ç½®å¤æ‚

## 5.3 è¯ä¹¦éªŒè¯é…ç½®



**ğŸ”§ ä¿¡ä»»å­˜å‚¨åº“é…ç½®**ï¼š
```java
public class CertificateManager {
    public static void configureSSLTrust() {
        // è®¾ç½®ä¿¡ä»»å­˜å‚¨åº“
        System.setProperty("javax.net.ssl.trustStore", 
            "/path/to/truststore.jks");
        System.setProperty("javax.net.ssl.trustStorePassword", 
            "truststorePassword");
        
        // è®¾ç½®å¯†é’¥å­˜å‚¨åº“ï¼ˆåŒå‘è®¤è¯æ—¶ä½¿ç”¨ï¼‰
        System.setProperty("javax.net.ssl.keyStore", 
            "/path/to/keystore.jks");
        System.setProperty("javax.net.ssl.keyStorePassword", 
            "keystorePassword");
    }
}
```

**â“ å¸¸è§ç–‘é—®ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦è¯ä¹¦éªŒè¯ï¼Ÿ**

| ç¯å¢ƒ | **æ˜¯å¦éœ€è¦** | **åŸå› ** |
|------|-------------|---------|
| å¼€å‘ç¯å¢ƒ | `å¯é€‰` | ä¸»è¦å…³æ³¨åŠŸèƒ½å®ç° |
| æµ‹è¯•ç¯å¢ƒ | `å»ºè®®` | æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒé…ç½® |
| ç”Ÿäº§ç¯å¢ƒ | `å¿…é¡»` | ç¡®ä¿æ•°æ®ä¼ è¾“å®‰å…¨ |

---

# 6. ğŸ›¡ï¸ ç½‘ç»œéš”ç¦»ç­–ç•¥



## 6.1 ç½‘ç»œå®‰å…¨è¾¹ç•Œ



**ğŸ¯ æ ¸å¿ƒæ€æƒ³**ï¼šè®©æ•°æ®åº“æœåŠ¡å™¨å¤„åœ¨å¤šå±‚é˜²æŠ¤ä¹‹ä¸­ï¼Œå°±åƒå¤ä»£åŸå ¡çš„å¤šé‡åŸå¢™ã€‚

**ğŸ° ç½‘ç»œé˜²æŠ¤æ¶æ„å›¾**ï¼š
```
äº’è”ç½‘
    â†“
Webé˜²ç«å¢™ (WAF)
    â†“
è´Ÿè½½å‡è¡¡å™¨
    â†“
WebæœåŠ¡å™¨ (DMZåŒº)
    â†“
å†…ç½‘é˜²ç«å¢™
    â†“
åº”ç”¨æœåŠ¡å™¨ (å†…ç½‘)
    â†“
æ•°æ®åº“é˜²ç«å¢™
    â†“
æ•°æ®åº“æœåŠ¡å™¨ (æ ¸å¿ƒç½‘ç»œ)
```

## 6.2 IPåœ°å€è®¿é—®æ§åˆ¶



**ğŸ”§ æ•°æ®åº“å±‚IPé™åˆ¶**ï¼š
```sql
-- åªå…è®¸åº”ç”¨æœåŠ¡å™¨è®¿é—®
CREATE USER 'webapp_user'@'192.168.1.100' IDENTIFIED BY 'Password123!';
CREATE USER 'webapp_user'@'192.168.1.101' IDENTIFIED BY 'Password123!';

-- å…è®¸ç‰¹å®šç½‘æ®µè®¿é—®
CREATE USER 'backup_user'@'192.168.1.%' IDENTIFIED BY 'BackupPass456!';

-- ç¦æ­¢ä»ä»»æ„åœ°å€è®¿é—®
-- âŒ CREATE USER 'webapp_user'@'%'  -- é£é™©å¤ªé«˜ï¼
```

**ğŸ”§ é˜²ç«å¢™é…ç½®ç¤ºä¾‹**ï¼š
```bash
# åªå…è®¸åº”ç”¨æœåŠ¡å™¨è®¿é—®3306ç«¯å£

iptables -A INPUT -p tcp -s 192.168.1.100 --dport 3306 -j ACCEPT
iptables -A INPUT -p tcp -s 192.168.1.101 --dport 3306 -j ACCEPT

# æ‹’ç»å…¶ä»–æ‰€æœ‰è®¿é—®

iptables -A INPUT -p tcp --dport 3306 -j DROP
```

## 6.3 VPNå’Œä¸“çº¿è¿æ¥



**ğŸ”¸ VPNéš§é“æ–¹æ¡ˆ**ï¼š
```java
// é€šè¿‡VPNè¿æ¥æ•°æ®åº“
public class VPNDatabaseConnection {
    public static Connection getVPNConnection() throws SQLException {
        // VPNå†…ç½‘åœ°å€
        String url = "jdbc:mysql://10.0.1.50:3306/myapp";
        
        // ç¡®ä¿VPNè¿æ¥å·²å»ºç«‹
        if (!isVPNConnected()) {
            throw new SQLException("VPNè¿æ¥æœªå»ºç«‹");
        }
        
        return DriverManager.getConnection(url, username, password);
    }
    
    private static boolean isVPNConnected() {
        // æ£€æŸ¥VPNè¿æ¥çŠ¶æ€çš„é€»è¾‘
        return true;
    }
}
```

**ğŸ”¸ ä¸“çº¿è¿æ¥ä¼˜åŠ¿**ï¼š
- ç‰©ç†éš”ç¦»ï¼Œå®‰å…¨æ€§æé«˜
- å¸¦å®½ç¨³å®šï¼Œå»¶è¿Ÿå¯æ§
- ä¸ç»è¿‡å…¬å…±ç½‘ç»œ

---

# 7. âš™ï¸ å®‰å…¨é…ç½®æœ€ä½³å®è·µ



## 7.1 è¿æ¥å‚æ•°å®‰å…¨é…ç½®



**ğŸ”§ å®‰å…¨è¿æ¥URLé…ç½®**ï¼š
```java
public class SecureConnectionConfig {
    public static String buildSecureURL(String host, String database) {
        return "jdbc:mysql://" + host + ":3306/" + database + 
            "?useSSL=true" +                          // å¯ç”¨SSL
            "&requireSSL=true" +                      // å¼ºåˆ¶SSL
            "&verifyServerCertificate=true" +         // éªŒè¯è¯ä¹¦
            "&allowPublicKeyRetrieval=false" +        // ç¦æ­¢å…¬é’¥æ£€ç´¢
            "&autoReconnect=false" +                  // ç¦æ­¢è‡ªåŠ¨é‡è¿
            "&connectTimeout=10000" +                 // è¿æ¥è¶…æ—¶10ç§’
            "&socketTimeout=60000" +                  // è¯»å–è¶…æ—¶60ç§’
            "&useUnicode=true" +                      // ä½¿ç”¨Unicode
            "&characterEncoding=UTF-8";               // UTF-8ç¼–ç 
    }
}
```

## 7.2 å¯†ç å®‰å…¨ç®¡ç†



**ğŸ” å¯†ç å­˜å‚¨æœ€ä½³å®è·µ**ï¼š

**æ–¹æ³•1ï¼šç¯å¢ƒå˜é‡**
```java
public class PasswordManager {
    public static String getDatabasePassword() {
        String password = System.getenv("DB_PASSWORD");
        if (password == null || password.isEmpty()) {
            throw new RuntimeException("æ•°æ®åº“å¯†ç æœªé…ç½®");
        }
        return password;
    }
}

// ä½¿ç”¨æ–¹å¼
String password = PasswordManager.getDatabasePassword();
```

**æ–¹æ³•2ï¼šé…ç½®æ–‡ä»¶åŠ å¯†**
```java
public class EncryptedConfig {
    private static final String ENCRYPTION_KEY = "MySecretKey2024!";
    
    public static String decryptPassword(String encryptedPassword) {
        // è¿™é‡Œæ˜¯è§£å¯†é€»è¾‘çš„ç®€åŒ–ç‰ˆæœ¬
        // å®é™…åº”ç”¨ä¸­ä½¿ç”¨AESç­‰æ ‡å‡†åŠ å¯†ç®—æ³•
        return decrypt(encryptedPassword, ENCRYPTION_KEY);
    }
}
```

**æ–¹æ³•3ï¼šå¯†é’¥ç®¡ç†æœåŠ¡**
```java
public class KeyManagementService {
    public static String getPasswordFromKMS(String keyId) {
        // ä»å¯†é’¥ç®¡ç†æœåŠ¡è·å–å¯†ç 
        // æ¯”å¦‚AWS KMS, HashiCorp Vaultç­‰
        return kmsClient.decrypt(keyId);
    }
}
```

## 7.3 è¿æ¥æ± å®‰å…¨é…ç½®



**ğŸ”§ HikariCPå®‰å…¨é…ç½®**ï¼š
```java
public class SecureConnectionPool {
    public static DataSource createSecureDataSource() {
        HikariConfig config = new HikariConfig();
        
        // åŸºæœ¬è¿æ¥é…ç½®
        config.setJdbcUrl(buildSecureURL());
        config.setUsername("webapp_user");
        config.setPassword(getPasswordFromEnv());
        
        // å®‰å…¨ç›¸å…³é…ç½®
        config.setMaximumPoolSize(10);              // é™åˆ¶æœ€å¤§è¿æ¥æ•°
        config.setMinimumIdle(2);                   // æœ€å°ç©ºé—²è¿æ¥
        config.setConnectionTimeout(10000);         // è¿æ¥è¶…æ—¶10ç§’
        config.setIdleTimeout(300000);              // ç©ºé—²è¶…æ—¶5åˆ†é’Ÿ
        config.setMaxLifetime(1800000);             // è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ30åˆ†é’Ÿ
        
        // è¿æ¥æµ‹è¯•
        config.setConnectionTestQuery("SELECT 1");  // è¿æ¥æµ‹è¯•æŸ¥è¯¢
        
        return new HikariDataSource(config);
    }
}
```

## 7.4 æ—¥å¿—å®¡è®¡é…ç½®



**ğŸ“ å®‰å…¨äº‹ä»¶è®°å½•**ï¼š
```java
public class DatabaseSecurityLogger {
    private static final Logger securityLogger = LoggerFactory.getLogger("SECURITY");
    
    public static void logSecurityEvent(String event, String user, String details) {
        securityLogger.info("å®‰å…¨äº‹ä»¶: {} | ç”¨æˆ·: {} | è¯¦æƒ…: {} | æ—¶é—´: {}", 
            event, user, details, System.currentTimeMillis());
    }
    
    public static void logFailedConnection(String user, String ip) {
        securityLogger.warn("è¿æ¥å¤±è´¥: ç”¨æˆ·={} IP={} æ—¶é—´={}", 
            user, ip, System.currentTimeMillis());
    }
}
```

---

# 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



## 8.1 å¿…é¡»æŒæ¡çš„å®‰å…¨åŸåˆ™



**ğŸ¯ äº”å¤§å®‰å…¨åŸåˆ™**ï¼š
```
ğŸ”¸ æœ€å°æƒé™ï¼šåªç»™å¿…éœ€çš„æƒé™ï¼Œå¤šä¸€åˆ†éƒ½ä¸ç»™
ğŸ”¸ æ·±åº¦é˜²å¾¡ï¼šå¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œä¸èƒ½ä¾èµ–å•ä¸€æ‰‹æ®µ  
ğŸ”¸ å®šæœŸå®¡æŸ¥ï¼šæƒé™å’Œé…ç½®è¦å®šæœŸæ£€æŸ¥æ›´æ–°
ğŸ”¸ ç›‘æ§å‘Šè­¦ï¼šå¼‚å¸¸è¡Œä¸ºè¦åŠæ—¶å‘ç°å’Œå¤„ç†
ğŸ”¸ åº”æ€¥å“åº”ï¼šå®‰å…¨äº‹ä»¶è¦æœ‰å®Œå–„çš„å¤„ç½®æµç¨‹
```

## 8.2 å…³é”®é…ç½®æ£€æŸ¥æ¸…å•



**âœ… ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ£€æŸ¥**ï¼š

**è´¦å·æƒé™æ£€æŸ¥**ï¼š
- [ ] ç¦ç”¨æˆ–åˆ é™¤é»˜è®¤è´¦å·ï¼ˆå¦‚rootè¿œç¨‹è®¿é—®ï¼‰
- [ ] åº”ç”¨ä½¿ç”¨ä¸“ç”¨è´¦å·ï¼Œæƒé™ç²¾ç¡®åˆ°è¡¨çº§åˆ«
- [ ] ç®¡ç†è´¦å·å’Œåº”ç”¨è´¦å·ä¸¥æ ¼åˆ†ç¦»
- [ ] å®šæœŸè½®æ¢æ•°æ®åº“å¯†ç 

**ç½‘ç»œå®‰å…¨æ£€æŸ¥**ï¼š
- [ ] å¯ç”¨SSL/TLSåŠ å¯†ä¼ è¾“
- [ ] é…ç½®IPåœ°å€ç™½åå•
- [ ] å…³é—­ä¸å¿…è¦çš„ç½‘ç»œç«¯å£
- [ ] ä½¿ç”¨VPNæˆ–ä¸“çº¿è¿æ¥

**é…ç½®å®‰å…¨æ£€æŸ¥**ï¼š
- [ ] å¯†ç ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
- [ ] è¿æ¥è¶…æ—¶å’Œç”Ÿå‘½å‘¨æœŸåˆç†é…ç½®
- [ ] å¼€å¯è¯¦ç»†çš„å®‰å…¨å®¡è®¡æ—¥å¿—
- [ ] å®šæœŸå¤‡ä»½å’Œæ¢å¤æµ‹è¯•

## 8.3 å¸¸è§å®‰å…¨è¯¯åŒº



**âŒ é”™è¯¯åšæ³• vs âœ… æ­£ç¡®åšæ³•**ï¼š

| **å¸¸è§é”™è¯¯** | **æ­£ç¡®åšæ³•** | **é£é™©è¯´æ˜** |
|-------------|-------------|-------------|
| ä½¿ç”¨rootè´¦å·è¿æ¥ | åˆ›å»ºä¸“ç”¨åº”ç”¨è´¦å· | rootæƒé™è¿‡å¤§ï¼Œé£é™©æé«˜ |
| å¯†ç å†™åœ¨ä»£ç é‡Œ | ä½¿ç”¨ç¯å¢ƒå˜é‡ | ä»£ç æ³„éœ²ä¼šæš´éœ²å¯†ç  |
| ä¸ä½¿ç”¨SSLåŠ å¯† | å¼ºåˆ¶å¯ç”¨SSL | æ•°æ®ä¼ è¾“å¯èƒ½è¢«çªƒå¬ |
| å…è®¸ä»»æ„IPè®¿é—® | é…ç½®IPç™½åå• | å¢åŠ è¢«æ”»å‡»çš„é£é™©é¢ |

## 8.4 å®é™…åº”ç”¨ä»·å€¼



**ğŸ”§ å¼€å‘å®è·µæŒ‡å¯¼**ï¼š
- **é¡¹ç›®åˆæœŸ**ï¼šå°±è¦è€ƒè™‘å®‰å…¨æ¶æ„è®¾è®¡ï¼Œè€Œä¸æ˜¯åæœŸè¡¥æ•‘
- **ä»£ç Review**ï¼šé‡ç‚¹æ£€æŸ¥æ•°æ®åº“è¿æ¥çš„å®‰å…¨é…ç½®
- **éƒ¨ç½²ä¸Šçº¿**ï¼šä¸¥æ ¼æŒ‰ç…§å®‰å…¨æ¸…å•æ‰§è¡Œæ£€æŸ¥
- **è¿ç»´ç›‘æ§**ï¼šæŒç»­ç›‘æ§å¼‚å¸¸è®¿é—®å’Œæƒé™æ»¥ç”¨

**ğŸ“Š æˆæœ¬æ•ˆç›Šåˆ†æ**ï¼š
- **æŠ•å…¥æˆæœ¬**ï¼šé…ç½®å¤æ‚åº¦å¢åŠ ã€å¼€å‘æ—¶é—´å»¶é•¿
- **æ”¶ç›Šä»·å€¼**ï¼šé¿å…æ•°æ®æ³„éœ²æŸå¤±ã€æå‡ç”¨æˆ·ä¿¡ä»»åº¦
- **é•¿è¿œä»·å€¼**ï¼šç¬¦åˆæ³•è§„è¦æ±‚ã€é™ä½æ³•å¾‹é£é™©

> **ğŸ’¡ æ ¸å¿ƒè®°å¿†å£è¯€**
> 
> æƒé™æœ€å°å¤Ÿç”¨å³å¯ï¼ŒåŠ å¯†ä¼ è¾“ä¸å¯ç¼ºå°‘
> ç½‘ç»œéš”ç¦»å±‚å±‚è®¾é˜²ï¼Œæ—¥å¿—å®¡è®¡æ—¶æ—¶ç›‘æ§
> å®‰å…¨é…ç½®ä¸¥æ ¼æ£€æŸ¥ï¼Œåº”æ€¥é¢„æ¡ˆæå‰å‡†å¤‡

**ğŸ¯ å­¦ä¹ å»ºè®®**ï¼š
1. **ç†è®ºå­¦ä¹ **ï¼šç†è§£æ¯ä¸ªå®‰å…¨æªæ–½çš„åŸç†å’Œä½œç”¨
2. **å®è·µæ“ä½œ**ï¼šåœ¨æµ‹è¯•ç¯å¢ƒä¸­é…ç½®å’ŒéªŒè¯å®‰å…¨è®¾ç½®
3. **æ¡ˆä¾‹åˆ†æ**ï¼šç ”ç©¶çœŸå®çš„æ•°æ®åº“å®‰å…¨äº‹ä»¶æ¡ˆä¾‹
4. **æŒç»­å…³æ³¨**ï¼šè·Ÿè¸ªæœ€æ–°çš„æ•°æ®åº“å®‰å…¨å¨èƒå’Œé˜²æŠ¤æŠ€æœ¯