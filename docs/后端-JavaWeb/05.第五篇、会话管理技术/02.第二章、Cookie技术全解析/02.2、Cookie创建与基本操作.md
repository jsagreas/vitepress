---
title: 2ã€Cookieåˆ›å»ºä¸åŸºæœ¬æ“ä½œ
---
## ğŸ“š ç›®å½•

1. [CookieåŸºæœ¬æ¦‚å¿µ](#1-CookieåŸºæœ¬æ¦‚å¿µ)
2. [Cookieæ„é€ æ–¹æ³•è¯¦è§£](#2-Cookieæ„é€ æ–¹æ³•è¯¦è§£)
3. [å‘é€Cookieåˆ°å®¢æˆ·ç«¯](#3-å‘é€Cookieåˆ°å®¢æˆ·ç«¯)
4. [ä»è¯·æ±‚ä¸­è·å–Cookie](#4-ä»è¯·æ±‚ä¸­è·å–Cookie)
5. [Cookieéå†ä¸æŸ¥æ‰¾](#5-Cookieéå†ä¸æŸ¥æ‰¾)
6. [ä¸­æ–‡ç¼–ç å¤„ç†](#6-ä¸­æ–‡ç¼–ç å¤„ç†)
7. [å®æˆ˜æ¼”ç»ƒæ¡ˆä¾‹](#7-å®æˆ˜æ¼”ç»ƒæ¡ˆä¾‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸª CookieåŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Cookie


**ğŸ“‹ é€šä¿—ç†è§£**
```
Cookieå°±åƒæ˜¯æœåŠ¡å™¨ç»™æµè§ˆå™¨å‘çš„"å°çº¸æ¡"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœåŠ¡å™¨ï¼š"è®°ä½ç”¨æˆ·åæ˜¯ admin"        â”‚
â”‚  æµè§ˆå™¨ï¼š"å¥½çš„ï¼Œæˆ‘è®°ä½äº†"            â”‚
â”‚  ä¸‹æ¬¡è®¿é—®æ—¶                          â”‚
â”‚  æµè§ˆå™¨ï¼š"æˆ‘æ˜¯ adminï¼Œä½ ä¹‹å‰è®¤è¯†æˆ‘"   â”‚
â”‚  æœåŠ¡å™¨ï¼š"å“¦å¯¹ï¼Œæ¬¢è¿å›æ¥ï¼"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ æ ¸å¿ƒç‰¹ç‚¹**
- **å­˜å‚¨ä½ç½®**ï¼šä¿å­˜åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­çš„å°æ–‡ä»¶
- **è‡ªåŠ¨æºå¸¦**ï¼šæµè§ˆå™¨è®¿é—®ç½‘ç«™æ—¶ä¼šè‡ªåŠ¨å¸¦ä¸Šç›¸å…³Cookie
- **é”®å€¼å¯¹å½¢å¼**ï¼šä»¥ `name=value` çš„å½¢å¼å­˜å‚¨æ•°æ®
- **æœ‰é™å®¹é‡**ï¼šå•ä¸ªCookieæœ€å¤§4KBï¼Œæ¯ä¸ªåŸŸåæœ€å¤š300ä¸ªCookie

### 1.2 Cookieçš„ç”Ÿå‘½å‘¨æœŸ


```
Cookieåˆ›å»ºæµç¨‹ï¼š
æœåŠ¡å™¨ç«¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æµè§ˆå™¨ç«¯
   â”‚                      â”‚
   â”œâ”€ åˆ›å»ºCookie           â”œâ”€ æ¥æ”¶å¹¶ä¿å­˜
   â”œâ”€ è®¾ç½®å±æ€§             â”œâ”€ ä¸‹æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦
   â””â”€ å‘é€å“åº”             â””â”€ ç›´åˆ°è¿‡æœŸæˆ–åˆ é™¤
```

---

## 2. ğŸ”§ Cookieæ„é€ æ–¹æ³•è¯¦è§£


### 2.1 Cookieæ„é€ å™¨è¯­æ³•


**ğŸ“ åŸºæœ¬è¯­æ³•**
```java
Cookie cookie = new Cookie(String name, String value);
```

**ğŸ”¸ å‚æ•°è¯´æ˜**
- **name**ï¼šCookieçš„åç§°ï¼ˆé”®ï¼‰ï¼Œä¸èƒ½åŒ…å«ç©ºæ ¼ã€é€—å·ã€åˆ†å·ç­‰ç‰¹æ®Šå­—ç¬¦
- **value**ï¼šCookieçš„å€¼ï¼Œå­˜å‚¨çš„å…·ä½“æ•°æ®

### 2.2 æ„é€ æ–¹æ³•ç¤ºä¾‹


```java
// âœ… æ­£ç¡®çš„Cookieåˆ›å»ºæ–¹å¼
Cookie usernameCookie = new Cookie("username", "admin");
Cookie ageCookie = new Cookie("userAge", "25");
Cookie emailCookie = new Cookie("email", "user@example.com");
```

**âš ï¸ æ³¨æ„äº‹é¡¹**
```
å¸¸è§é”™è¯¯ç¤ºä¾‹ï¼š
âŒ new Cookie("user name", "admin");     // åç§°ä¸èƒ½æœ‰ç©ºæ ¼
âŒ new Cookie("user,info", "data");      // åç§°ä¸èƒ½æœ‰é€—å·
âŒ new Cookie("", "value");              // åç§°ä¸èƒ½ä¸ºç©º

âœ… æ­£ç¡®å†™æ³•ï¼š
new Cookie("userName", "admin");         // ä½¿ç”¨é©¼å³°å‘½å
new Cookie("userInfo", "data");          // é¿å…ç‰¹æ®Šå­—ç¬¦
```

---

## 3. ğŸ“¤ å‘é€Cookieåˆ°å®¢æˆ·ç«¯


### 3.1 addCookie()æ–¹æ³•è¯¦è§£


**ğŸ”¸ æ–¹æ³•ä½œç”¨**
`response.addCookie(cookie)` å°†Cookieæ·»åŠ åˆ°HTTPå“åº”å¤´ä¸­ï¼Œå‘é€ç»™æµè§ˆå™¨

**ğŸ“Š å·¥ä½œåŸç†å›¾**
```
Javaä»£ç                 HTTPå“åº”å¤´              æµè§ˆå™¨
    â”‚                      â”‚                    â”‚
    â”œâ”€ åˆ›å»ºCookie           â”‚                    â”‚
    â”œâ”€ response.addCookie() â”œâ”€ Set-Cookie: name=value â”‚
    â””â”€ å‘é€å“åº”            â””â”€ å…¶ä»–å“åº”å¤´...      â”œâ”€ è§£æå¹¶ä¿å­˜Cookie
                                               â””â”€ å­˜å‚¨åˆ°æœ¬åœ°
```

### 3.2 å‘é€Cookieçš„å®Œæ•´ç¤ºä¾‹


```java
@WebServlet("/setCookie")
public class SetCookieServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) {
        
        // 1. åˆ›å»ºCookieå¯¹è±¡
        Cookie userCookie = new Cookie("currentUser", "zhangsan");
        Cookie themeCookie = new Cookie("theme", "dark");
        
        // 2. å‘é€Cookieåˆ°æµè§ˆå™¨
        response.addCookie(userCookie);
        response.addCookie(themeCookie);
        
        // 3. è®¾ç½®å“åº”å†…å®¹
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        out.println("<h2>Cookieå·²æˆåŠŸè®¾ç½®ï¼</h2>");
        out.println("<p>ç”¨æˆ·åCookieï¼šcurrentUser = zhangsan</p>");
        out.println("<p>ä¸»é¢˜Cookieï¼štheme = dark</p>");
    }
}
```

**ğŸ’¡ å‘é€å¤šä¸ªCookie**
- å¯ä»¥è°ƒç”¨å¤šæ¬¡ `addCookie()` å‘é€ä¸åŒçš„Cookie
- æ¯ä¸ªCookieåœ¨HTTPå¤´ä¸­ä¼šç”Ÿæˆä¸€è¡Œ `Set-Cookie`
- æµè§ˆå™¨ä¼šåˆ†åˆ«ä¿å­˜æ¯ä¸ªCookie

---

## 4. ğŸ“¥ ä»è¯·æ±‚ä¸­è·å–Cookie


### 4.1 getCookies()æ–¹æ³•è¯¦è§£


**ğŸ”¸ æ–¹æ³•ç­¾å**
```java
Cookie[] cookies = request.getCookies();
```

**ğŸ”¸ è¿”å›å€¼è¯´æ˜**
- **è¿”å›ç±»å‹**ï¼š`Cookie[]` æ•°ç»„
- **å¯èƒ½ä¸ºnull**ï¼šå¦‚æœæ²¡æœ‰Cookieï¼Œè¿”å›nullè€Œä¸æ˜¯ç©ºæ•°ç»„
- **åŒ…å«æ‰€æœ‰**ï¼šè¿”å›å®¢æˆ·ç«¯å‘é€çš„æ‰€æœ‰Cookie

### 4.2 è·å–Cookieçš„å®‰å…¨å†™æ³•


```java
@WebServlet("/getCookie")
public class GetCookieServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) {
        
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        
        // è·å–æ‰€æœ‰Cookie
        Cookie[] cookies = request.getCookies();
        
        // âš ï¸ é‡è¦ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºnull
        if (cookies == null || cookies.length == 0) {
            out.println("<h3>æ²¡æœ‰æ‰¾åˆ°ä»»ä½•Cookie</h3>");
            return;
        }
        
        out.println("<h2>è·å–åˆ°çš„Cookieåˆ—è¡¨ï¼š</h2>");
        out.println("<ul>");
        
        for (Cookie cookie : cookies) {
            out.println("<li>" + cookie.getName() + " = " + 
                       cookie.getValue() + "</li>");
        }
        
        out.println("</ul>");
    }
}
```

**ğŸš¨ å¸¸è§é”™è¯¯**
```java
// âŒ å±é™©å†™æ³• - å¯èƒ½å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸
Cookie[] cookies = request.getCookies();
for (Cookie cookie : cookies) {  // å¦‚æœcookiesä¸ºnullä¼šæŠ¥é”™
    // å¤„ç†é€»è¾‘
}

// âœ… å®‰å…¨å†™æ³• - å…ˆæ£€æŸ¥null
Cookie[] cookies = request.getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        // å®‰å…¨çš„å¤„ç†é€»è¾‘
    }
}
```

---

## 5. ğŸ” Cookieéå†ä¸æŸ¥æ‰¾


### 5.1 éå†æ‰€æœ‰Cookie


**ğŸ“Š éå†æ¨¡å¼å¯¹æ¯”**

| éå†æ–¹å¼ | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|---------|------------|---------|---------|
| `å¢å¼ºforå¾ªç¯` | `æ˜¾ç¤ºæ‰€æœ‰Cookie` | `ä»£ç ç®€æ´` | `æ— æ³•è·å–ç´¢å¼•` |
| `ä¼ ç»Ÿforå¾ªç¯` | `éœ€è¦ç´¢å¼•æ“ä½œ` | `çµæ´»æ§åˆ¶` | `ä»£ç ç¨é•¿` |
| `Streamæµ` | `å¤æ‚è¿‡æ»¤æ“ä½œ` | `åŠŸèƒ½å¼ºå¤§` | `æ€§èƒ½ç•¥å·®` |

**ğŸ”¸ å¢å¼ºforå¾ªç¯ï¼ˆæ¨èï¼‰**
```java
Cookie[] cookies = request.getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        String name = cookie.getName();
        String value = cookie.getValue();
        out.println(name + " = " + value);
    }
}
```

### 5.2 æŸ¥æ‰¾ç‰¹å®šCookie


**ğŸ¯ æŒ‰åç§°æŸ¥æ‰¾Cookie**
```java
public String getCookieValue(HttpServletRequest request, String cookieName) {
    Cookie[] cookies = request.getCookies();
    
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if (cookieName.equals(cookie.getName())) {
                return cookie.getValue();  // æ‰¾åˆ°å°±è¿”å›å€¼
            }
        }
    }
    
    return null;  // æ²¡æ‰¾åˆ°è¿”å›null
}

// ä½¿ç”¨ç¤ºä¾‹
String username = getCookieValue(request, "currentUser");
if (username != null) {
    out.println("å½“å‰ç”¨æˆ·ï¼š" + username);
} else {
    out.println("ç”¨æˆ·æœªç™»å½•");
}
```

**ğŸ’¡ å®ç”¨çš„CookieæŸ¥æ‰¾å·¥å…·æ–¹æ³•**
```java
/**
 * æŸ¥æ‰¾æŒ‡å®šåç§°çš„Cookie
 * @param request HTTPè¯·æ±‚å¯¹è±¡
 * @param name Cookieåç§°
 * @return Cookieå¯¹è±¡ï¼Œæ‰¾ä¸åˆ°è¿”å›null
 */
public static Cookie findCookie(HttpServletRequest request, String name) {
    Cookie[] cookies = request.getCookies();
    
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if (name.equals(cookie.getName())) {
                return cookie;
            }
        }
    }
    
    return null;
}
```

---

## 6. ğŸŒ ä¸­æ–‡ç¼–ç å¤„ç†


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼–ç å¤„ç†


**ğŸ”¸ é—®é¢˜åŸå› **
```
Cookieè§„èŒƒé—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTPåè®®è§„å®šï¼š                      â”‚
â”‚  Cookieå€¼åªèƒ½åŒ…å«ASCIIå­—ç¬¦           â”‚
â”‚  ä¸­æ–‡å±äºUnicodeå­—ç¬¦                 â”‚
â”‚  ç›´æ¥å­˜å‚¨ä¼šå‡ºç°ä¹±ç æˆ–é”™è¯¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âš ï¸ é”™è¯¯ç¤ºä¾‹**
```java
// âŒ ç›´æ¥å­˜å‚¨ä¸­æ–‡ - ä¼šå‡ºç°é—®é¢˜
Cookie cookie = new Cookie("userName", "å¼ ä¸‰");
response.addCookie(cookie);  // å¯èƒ½å¯¼è‡´ä¹±ç æˆ–å¼‚å¸¸
```

### 6.2 URLEncoderå’ŒURLDecoderä½¿ç”¨


**ğŸ”§ ç¼–ç å­˜å‚¨**
```java
import java.net.URLEncoder;
import java.net.URLDecoder;

// å­˜å‚¨ä¸­æ–‡Cookieæ—¶è¿›è¡Œç¼–ç 
String chineseName = "å¼ ä¸‰";
String encodedName = URLEncoder.encode(chineseName, "UTF-8");
Cookie cookie = new Cookie("userName", encodedName);
response.addCookie(cookie);
```

**ğŸ”§ è§£ç è¯»å–**
```java
// è¯»å–ä¸­æ–‡Cookieæ—¶è¿›è¡Œè§£ç 
Cookie[] cookies = request.getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        if ("userName".equals(cookie.getName())) {
            String encodedValue = cookie.getValue();
            String decodedValue = URLDecoder.decode(encodedValue, "UTF-8");
            out.println("ç”¨æˆ·åï¼š" + decodedValue);  // è¾“å‡ºï¼šç”¨æˆ·åï¼šå¼ ä¸‰
        }
    }
}
```

### 6.3 ç¼–ç å¤„ç†çš„å®Œæ•´æ¡ˆä¾‹


```java
@WebServlet("/chineseCookie")
public class ChineseCookieServlet extends HttpServlet {
    
    // è®¾ç½®ä¸­æ–‡Cookie
    protected void doPost(HttpServletRequest request, 
                         HttpServletResponse response) throws IOException {
        
        request.setCharacterEncoding("UTF-8");
        String userName = request.getParameter("userName");  // è·å–ä¸­æ–‡ç”¨æˆ·å
        
        if (userName != null && !userName.trim().isEmpty()) {
            // å¯¹ä¸­æ–‡è¿›è¡ŒURLç¼–ç 
            String encodedName = URLEncoder.encode(userName, "UTF-8");
            Cookie cookie = new Cookie("userName", encodedName);
            response.addCookie(cookie);
        }
        
        response.sendRedirect("showCookie.jsp");
    }
    
    // è¯»å–ä¸­æ–‡Cookie
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) throws IOException {
        
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        
        String userName = getCookieValue(request, "userName");
        if (userName != null) {
            // å¯¹ç¼–ç åçš„å€¼è¿›è¡Œè§£ç 
            String decodedName = URLDecoder.decode(userName, "UTF-8");
            out.println("<h3>æ¬¢è¿å›æ¥ï¼Œ" + decodedName + "ï¼</h3>");
        } else {
            out.println("<h3>è¯·å…ˆç™»å½•</h3>");
        }
    }
    
    // å·¥å…·æ–¹æ³•ï¼šè·å–Cookieå€¼
    private String getCookieValue(HttpServletRequest request, String name) {
        Cookie[] cookies = request.getCookies();
        if (cookies != null) {
            for (Cookie cookie : cookies) {
                if (name.equals(cookie.getName())) {
                    return cookie.getValue();
                }
            }
        }
        return null;
    }
}
```

**ğŸ’¡ ç¼–ç å¤„ç†æœ€ä½³å®è·µ**
```
å­˜å‚¨è§„åˆ™ï¼š
âœ… ä¸­æ–‡å†…å®¹ â†’ URLEncoder.encode() â†’ å­˜å‚¨åˆ°Cookie
âœ… å–å‡ºæ—¶ â†’ Cookie.getValue() â†’ URLDecoder.decode() â†’ æ˜¾ç¤º

è®°å¿†å£è¯€ï¼š
å­˜çš„æ—¶å€™ç¼–ç (encode)ï¼Œå–çš„æ—¶å€™è§£ç (decode)
```

---

## 7. ğŸ› ï¸ å®æˆ˜æ¼”ç»ƒæ¡ˆä¾‹


### 7.1 ç”¨æˆ·ç™»å½•çŠ¶æ€è®°å½•


**ğŸ¯ éœ€æ±‚åˆ†æ**
ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œå°†ç”¨æˆ·åä¿å­˜åœ¨Cookieä¸­ï¼Œä¸‹æ¬¡è®¿é—®æ—¶è‡ªåŠ¨æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯

```java
// ç™»å½•å¤„ç†Servlet
@WebServlet("/login")
public class LoginServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, 
                         HttpServletResponse response) throws IOException {
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        
        // ç®€å•çš„ç™»å½•éªŒè¯
        if ("admin".equals(username) && "123456".equals(password)) {
            // ç™»å½•æˆåŠŸï¼Œåˆ›å»ºCookieä¿å­˜ç”¨æˆ·å
            Cookie userCookie = new Cookie("loginUser", username);
            response.addCookie(userCookie);
            
            response.sendRedirect("welcome.jsp");
        } else {
            response.sendRedirect("login.jsp?error=1");
        }
    }
}

// æ¬¢è¿é¡µé¢Servlet
@WebServlet("/welcome")
public class WelcomeServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) throws IOException {
        
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        
        // æŸ¥æ‰¾ç™»å½•ç”¨æˆ·Cookie
        String loginUser = findCookieValue(request, "loginUser");
        
        if (loginUser != null) {
            out.println("<h2>æ¬¢è¿å›æ¥ï¼Œ" + loginUser + "ï¼</h2>");
            out.println("<p>æ‚¨å·²æˆåŠŸç™»å½•ç³»ç»Ÿ</p>");
        } else {
            out.println("<h2>è¯·å…ˆç™»å½•</h2>");
            out.println("<a href='login.jsp'>ç‚¹å‡»ç™»å½•</a>");
        }
    }
    
    private String findCookieValue(HttpServletRequest request, String name) {
        Cookie[] cookies = request.getCookies();
        if (cookies != null) {
            for (Cookie cookie : cookies) {
                if (name.equals(cookie.getName())) {
                    return cookie.getValue();
                }
            }
        }
        return null;
    }
}
```

### 7.2 ç½‘ç«™ä¸»é¢˜è®¾ç½®


**ğŸ¨ åŠŸèƒ½è¯´æ˜**
ç”¨æˆ·å¯ä»¥é€‰æ‹©ç½‘ç«™ä¸»é¢˜ï¼ˆäº®è‰²/æš—è‰²ï¼‰ï¼Œé€‰æ‹©åä¿å­˜åœ¨Cookieä¸­ï¼Œä¸‹æ¬¡è®¿é—®è‡ªåŠ¨åº”ç”¨

```java
@WebServlet("/setTheme")
public class ThemeServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) throws IOException {
        
        String theme = request.getParameter("theme");
        
        // éªŒè¯ä¸»é¢˜å‚æ•°
        if ("light".equals(theme) || "dark".equals(theme)) {
            Cookie themeCookie = new Cookie("siteTheme", theme);
            response.addCookie(themeCookie);
        }
        
        // é‡å®šå‘å›åŸé¡µé¢
        String referer = request.getHeader("Referer");
        if (referer != null) {
            response.sendRedirect(referer);
        } else {
            response.sendRedirect("index.jsp");
        }
    }
}
```

**ğŸ” JSPä¸­è¯»å–ä¸»é¢˜Cookie**
```jsp
<%
    // è·å–ä¸»é¢˜è®¾ç½®
    String currentTheme = "light";  // é»˜è®¤äº®è‰²ä¸»é¢˜
    Cookie[] cookies = request.getCookies();
    
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if ("siteTheme".equals(cookie.getName())) {
                currentTheme = cookie.getValue();
                break;
            }
        }
    }
%>

<body class="<%= currentTheme %>-theme">
    <h1>å½“å‰ä¸»é¢˜ï¼š<%= currentTheme %></h1>
    
    <div class="theme-selector">
        <a href="setTheme?theme=light">åˆ‡æ¢åˆ°äº®è‰²ä¸»é¢˜</a>
        <a href="setTheme?theme=dark">åˆ‡æ¢åˆ°æš—è‰²ä¸»é¢˜</a>
    </div>
</body>
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ“ä½œ


```
ğŸ”¸ Cookieåˆ›å»ºï¼šnew Cookie(name, value)
ğŸ”¸ Cookieå‘é€ï¼šresponse.addCookie(cookie)
ğŸ”¸ Cookieè·å–ï¼šrequest.getCookies()
ğŸ”¸ Cookieéå†ï¼šå¢å¼ºforå¾ªç¯ + nullæ£€æŸ¥
ğŸ”¸ ä¸­æ–‡å¤„ç†ï¼šURLEncoder.encode() å’Œ URLDecoder.decode()
```

### 8.2 å…³é”®æ³¨æ„äº‹é¡¹


**âš ï¸ ç©ºå€¼æ£€æŸ¥**
```java
// æ°¸è¿œè®°ä½æ£€æŸ¥null
Cookie[] cookies = request.getCookies();
if (cookies != null) {  // å¿…é¡»æ£€æŸ¥ï¼
    // å®‰å…¨å¤„ç†Cookie
}
```

**ğŸŒ ä¸­æ–‡ç¼–ç **
```java
// å­˜å‚¨æ—¶ç¼–ç 
String encoded = URLEncoder.encode("ä¸­æ–‡", "UTF-8");
Cookie cookie = new Cookie("name", encoded);

// è¯»å–æ—¶è§£ç 
String decoded = URLDecoder.decode(cookie.getValue(), "UTF-8");
```

**ğŸ” CookieæŸ¥æ‰¾æ¨¡å¼**
```java
// æ ‡å‡†çš„CookieæŸ¥æ‰¾æ–¹æ³•
public static String getCookieValue(HttpServletRequest request, String name) {
    Cookie[] cookies = request.getCookies();
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if (name.equals(cookie.getName())) {
                return cookie.getValue();
            }
        }
    }
    return null;
}
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å¸¸è§åº”ç”¨åœºæ™¯**
- **ç”¨æˆ·ç™»å½•çŠ¶æ€**ï¼šè®°ä½ç”¨æˆ·ç™»å½•ä¿¡æ¯
- **ä¸ªäººåå¥½è®¾ç½®**ï¼šä¸»é¢˜ã€è¯­è¨€ã€å¸ƒå±€ç­‰
- **è´­ç‰©è½¦å†…å®¹**ï¼šä¸´æ—¶ä¿å­˜å•†å“ä¿¡æ¯
- **æµè§ˆå†å²**ï¼šè®°å½•ç”¨æˆ·è®¿é—®è®°å½•

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**
- Cookieåç§°ä½¿ç”¨è‹±æ–‡ï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦
- ä¸­æ–‡å†…å®¹å¿…é¡»è¿›è¡ŒURLç¼–ç 
- è·å–Cookieå‰å¿…é¡»æ£€æŸ¥null
- æ•æ„Ÿä¿¡æ¯ä¸è¦å­˜å‚¨åœ¨Cookieä¸­
- é€‚å½“è®¾ç½®Cookieçš„è¿‡æœŸæ—¶é—´å’Œä½œç”¨åŸŸ

**ğŸ§  è®°å¿†å£è¯€**
```
Cookieæ“ä½œä¸‰æ­¥èµ°ï¼š
åˆ›å»ºCookieç”¨æ„é€ ï¼Œ
å‘é€Cookieç”¨addCookieï¼Œ
è·å–Cookieå…ˆåˆ¤ç©ºã€‚

ä¸­æ–‡å¤„ç†è¦è®°ç‰¢ï¼š
å­˜æ—¶ç¼–ç encodeï¼Œ
å–æ—¶è§£ç decodeã€‚
```