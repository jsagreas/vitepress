---
title: 3ã€Cookieå±æ€§ä¸ç”Ÿå‘½å‘¨æœŸ
---
## ğŸ“š ç›®å½•

1. [Cookieç”Ÿå‘½å‘¨æœŸç®¡ç†](#1-Cookieç”Ÿå‘½å‘¨æœŸç®¡ç†)
2. [setMaxAgeè¿‡æœŸæ—¶é—´æ§åˆ¶](#2-setMaxAgeè¿‡æœŸæ—¶é—´æ§åˆ¶)
3. [setPathä½œç”¨è·¯å¾„è¯¦è§£](#3-setPathä½œç”¨è·¯å¾„è¯¦è§£)
4. [setDomainä½œç”¨åŸŸåé…ç½®](#4-setDomainä½œç”¨åŸŸåé…ç½®)
5. [ä¸´æ—¶Cookieä¸æŒä¹…Cookie](#5-ä¸´æ—¶Cookieä¸æŒä¹…Cookie)
6. [Cookieå±æ€§ç»¼åˆåº”ç”¨](#6-Cookieå±æ€§ç»¼åˆåº”ç”¨)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ• Cookieç”Ÿå‘½å‘¨æœŸç®¡ç†


### 1.1 ä»€ä¹ˆæ˜¯Cookieçš„ç”Ÿå‘½å‘¨æœŸ


**é€šä¿—è§£é‡Š**ï¼šCookieçš„ç”Ÿå‘½å‘¨æœŸå°±åƒæ˜¯ç»™æ¯ä¸ªCookieè®¾å®šä¸€ä¸ª"æœ‰æ•ˆæœŸ"ï¼Œå°±åƒé£Ÿå“çš„ä¿è´¨æœŸä¸€æ ·ã€‚

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
è¶…å¸‚è´­ç‰©å¡ â†’ æœ‰æ•ˆæœŸ1å¹´ï¼Œè¿‡æœŸå°±ä¸èƒ½ç”¨äº†
ä¼˜æƒ åˆ¸     â†’ é™æ—¶7å¤©ï¼Œè¶…è¿‡æ—¶é—´è‡ªåŠ¨ä½œåºŸ
ä¼šå‘˜å¡     â†’ æ°¸ä¹…æœ‰æ•ˆï¼Œé™¤éä¸»åŠ¨æ³¨é”€

Cookieä¹Ÿæ˜¯è¿™æ ·ï¼š
ä¸´æ—¶Cookie â†’ æµè§ˆå™¨å…³é—­å°±æ¶ˆå¤±
æŒä¹…Cookie â†’ è®¾å®šæ—¶é—´åè¿‡æœŸ
åˆ é™¤Cookie â†’ ç«‹å³å¤±æ•ˆ
```

### 1.2 ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ç§çŠ¶æ€


**ğŸ”¸ åˆ›å»ºé˜¶æ®µï¼ˆBirthï¼‰**
```java
// åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºCookie
Cookie userCookie = new Cookie("username", "å¼ ä¸‰");
```

**ğŸ”¸ å­˜æ´»é˜¶æ®µï¼ˆLifeï¼‰**
- Cookieå­˜å‚¨åœ¨æµè§ˆå™¨ä¸­
- æ¯æ¬¡è¯·æ±‚æ—¶è‡ªåŠ¨æºå¸¦
- åœ¨æœ‰æ•ˆæœŸå†…æŒç»­å¯ç”¨

**ğŸ”¸ é”€æ¯é˜¶æ®µï¼ˆDeathï¼‰**
- è¾¾åˆ°è¿‡æœŸæ—¶é—´è‡ªåŠ¨åˆ é™¤
- æµè§ˆå™¨ä¸»åŠ¨æ¸…ç†
- æœåŠ¡å™¨è®¾ç½®åˆ é™¤æŒ‡ä»¤

### 1.3 ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆè¦ç®¡ç†Cookieç”Ÿå‘½å‘¨æœŸï¼Ÿ**

| åœºæ™¯ | **ç®¡ç†æ–¹å¼** | **ç”¨æˆ·ä½“éªŒ** |
|------|-------------|-------------|
| ğŸ” **ç™»å½•çŠ¶æ€** | `è®¾ç½®åˆç†è¿‡æœŸæ—¶é—´` | `ä¸ç”¨é¢‘ç¹ç™»å½•ï¼Œä½†ä¿è¯å®‰å…¨` |
| ğŸ›’ **è´­ç‰©è½¦** | `è¾ƒé•¿æœ‰æ•ˆæœŸ` | `å•†å“ä¸ä¼šè«åæ¶ˆå¤±` |
| ğŸ¯ **ä¸ªæ€§åŒ–è®¾ç½®** | `æ°¸ä¹…ä¿å­˜` | `æ¯æ¬¡è®¿é—®éƒ½æ˜¯ç†Ÿæ‚‰çš„ç•Œé¢` |
| ğŸ”’ **æ•æ„Ÿæ“ä½œ** | `çŸ­æš‚æœ‰æ•ˆæœŸ` | `å®‰å…¨æ€§æ›´é«˜` |

---

## 2. â° setMaxAgeè¿‡æœŸæ—¶é—´æ§åˆ¶


### 2.1 setMaxAgeæ–¹æ³•è¯¦è§£


**åŸºæœ¬è¯­æ³•**ï¼š`cookie.setMaxAge(int seconds)`

**å‚æ•°å«ä¹‰**ï¼š
```
æ­£æ•°ï¼šCookieå­˜æ´»çš„ç§’æ•°ï¼ˆå¦‚3600è¡¨ç¤º1å°æ—¶ï¼‰
é›¶å€¼ï¼šç«‹å³åˆ é™¤Cookie
è´Ÿæ•°ï¼šä¸´æ—¶Cookieï¼Œæµè§ˆå™¨å…³é—­å³åˆ é™¤ï¼ˆé»˜è®¤å€¼-1ï¼‰
```

### 2.2 å¸¸ç”¨æ—¶é—´è®¾ç½®


**ğŸ”¸ æ—¶é—´è®¡ç®—åŠ©æ‰‹**
```java
public class CookieTimeHelper {
    // å¸¸ç”¨æ—¶é—´å¸¸é‡
    public static final int MINUTE = 60;                    // 1åˆ†é’Ÿ
    public static final int HOUR = 60 * MINUTE;             // 1å°æ—¶
    public static final int DAY = 24 * HOUR;                // 1å¤©
    public static final int WEEK = 7 * DAY;                 // 1å‘¨
    public static final int MONTH = 30 * DAY;               // 1ä¸ªæœˆ
    public static final int YEAR = 365 * DAY;               // 1å¹´
}
```

### 2.3 å®é™…åº”ç”¨ç¤ºä¾‹


**åœºæ™¯ä¸€ï¼šè®°ä½ç™»å½•çŠ¶æ€ï¼ˆ7å¤©ï¼‰**
```java
// åˆ›å»ºç”¨æˆ·ç™»å½•Cookie
Cookie loginCookie = new Cookie("userLogin", "true");
loginCookie.setMaxAge(7 * 24 * 60 * 60); // 7å¤©
response.addCookie(loginCookie);

// ç”¨æˆ·ä½“éªŒï¼šä¸€å‘¨å†…ä¸ç”¨é‡å¤ç™»å½•
```

**åœºæ™¯äºŒï¼šè´­ç‰©è½¦ä¸´æ—¶ä¿å­˜ï¼ˆ2å°æ—¶ï¼‰**
```java
// åˆ›å»ºè´­ç‰©è½¦Cookie
Cookie cartCookie = new Cookie("shoppingCart", "å•†å“IDåˆ—è¡¨");
cartCookie.setMaxAge(2 * 60 * 60); // 2å°æ—¶
response.addCookie(cartCookie);

// ç”¨æˆ·ä½“éªŒï¼šçŸ­æœŸè´­ç‰©ä¸ä¸¢å¤±ï¼Œä½†ä¸ä¼šé•¿æœŸå ç”¨ç©ºé—´
```

**åœºæ™¯ä¸‰ï¼šç«‹å³åˆ é™¤Cookie**
```java
// ç”¨æˆ·é€€å‡ºç™»å½•æ—¶åˆ é™¤Cookie
Cookie deleteCookie = new Cookie("userLogin", "");
deleteCookie.setMaxAge(0); // ç«‹å³åˆ é™¤
response.addCookie(deleteCookie);
```

### 2.4 è¿‡æœŸæ—¶é—´çš„æœ€ä½³å®è·µ


**ğŸ¯ è®¾ç½®åŸåˆ™**

| åº”ç”¨ç±»å‹ | **æ¨èæ—¶é•¿** | **ç†ç”±** |
|---------|-------------|---------|
| ğŸ” **ç™»å½•çŠ¶æ€** | `7-30å¤©` | `ç”¨æˆ·ä¾¿åˆ©æ€§ä¸å®‰å…¨æ€§å¹³è¡¡` |
| ğŸ›ï¸ **è´­ç‰©åå¥½** | `30-90å¤©` | `ä¿æŒç”¨æˆ·è´­ç‰©ä¹ æƒ¯` |
| ğŸ“Š **ç»Ÿè®¡åˆ†æ** | `1å¹´` | `é•¿æœŸæ•°æ®åˆ†æéœ€è¦` |
| ğŸ”’ **æ•æ„Ÿæ“ä½œ** | `15-30åˆ†é’Ÿ` | `é«˜å®‰å…¨æ€§è¦æ±‚` |

> **ğŸ’¡ å°è´´å£«**ï¼šæ—¶é—´è®¾ç½®è¦è€ƒè™‘ç”¨æˆ·ä¹ æƒ¯ï¼Œå¤ªçŸ­å½±å“ä½“éªŒï¼Œå¤ªé•¿å¯èƒ½æœ‰å®‰å…¨é£é™©

---

## 3. ğŸ“ setPathä½œç”¨è·¯å¾„è¯¦è§£


### 3.1 ä»€ä¹ˆæ˜¯Cookieçš„è·¯å¾„


**é€šä¿—ç†è§£**ï¼šCookieçš„è·¯å¾„å°±åƒæ˜¯ç»™Cookieåˆ’å®šä¸€ä¸ª"æ´»åŠ¨èŒƒå›´"ï¼Œåªæœ‰åœ¨æŒ‡å®šè·¯å¾„ä¸‹Cookieæ‰ä¼šç”Ÿæ•ˆã€‚

```
ç½‘ç«™ç›®å½•ç»“æ„ç±»æ¯”ï¼š
ç½‘ç«™æ ¹ç›®å½• /
â”œâ”€â”€ ç”¨æˆ·ä¸­å¿ƒ /user/
â”‚   â”œâ”€â”€ ä¸ªäººä¿¡æ¯ /user/profile/
â”‚   â””â”€â”€ è®¢å•ç®¡ç† /user/orders/
â”œâ”€â”€ å•†å“ä¸­å¿ƒ /product/
â””â”€â”€ ç®¡ç†åå° /admin/

Cookieè·¯å¾„è®¾ç½®ï¼š
/          â†’ æ•´ä¸ªç½‘ç«™éƒ½èƒ½è®¿é—®
/user/     â†’ åªåœ¨ç”¨æˆ·ä¸­å¿ƒç”Ÿæ•ˆ
/admin/    â†’ åªåœ¨ç®¡ç†åå°ç”Ÿæ•ˆ
```

### 2.2 setPathæ–¹æ³•ä½¿ç”¨


**åŸºæœ¬è¯­æ³•**ï¼š`cookie.setPath(String path)`

**è·¯å¾„è§„åˆ™**ï¼š
- ä»¥ `/` å¼€å¤´çš„ç»å¯¹è·¯å¾„
- Cookieåªåœ¨æŒ‡å®šè·¯å¾„åŠå…¶å­è·¯å¾„ä¸‹å‘é€
- é»˜è®¤è·¯å¾„æ˜¯å½“å‰è¯·æ±‚çš„è·¯å¾„

### 3.3 è·¯å¾„åŒ¹é…è§„åˆ™æ¼”ç¤º


```
å‡è®¾ç½‘ç«™ç»“æ„ï¼š
https://www.example.com/
â”œâ”€â”€ /shop/          (å•†åŸé¦–é¡µ)
â”œâ”€â”€ /shop/product/  (å•†å“é¡µé¢)  
â”œâ”€â”€ /shop/cart/     (è´­ç‰©è½¦)
â”œâ”€â”€ /user/          (ç”¨æˆ·ä¸­å¿ƒ)
â””â”€â”€ /admin/         (ç®¡ç†åå°)

Cookieè·¯å¾„è®¾ç½®æ•ˆæœï¼š
```

| Cookieè·¯å¾„ | **ç”Ÿæ•ˆèŒƒå›´** | **å®é™…åº”ç”¨** |
|-----------|-------------|-------------|
| `/` | `æ‰€æœ‰é¡µé¢` | `ç”¨æˆ·ç™»å½•çŠ¶æ€ã€ç½‘ç«™ä¸»é¢˜è®¾ç½®` |
| `/shop/` | `å•†åŸç›¸å…³é¡µé¢` | `è´­ç‰©åå¥½ã€å•†å“æµè§ˆå†å²` |
| `/shop/cart/` | `è´­ç‰©è½¦é¡µé¢` | `ä¸´æ—¶è´­ç‰©è½¦æ•°æ®` |
| `/user/` | `ç”¨æˆ·ä¸­å¿ƒé¡µé¢` | `ä¸ªäººè®¾ç½®ã€è´¦æˆ·ä¿¡æ¯` |
| `/admin/` | `ç®¡ç†åå°` | `ç®¡ç†å‘˜æƒé™ã€åå°é…ç½®` |

### 3.4 å®ç”¨ç¤ºä¾‹


**åœºæ™¯ä¸€ï¼šå…¨ç«™é€šç”¨è®¾ç½®**
```java
// ç½‘ç«™ä¸»é¢˜è®¾ç½®ï¼ˆå…¨ç«™ç”Ÿæ•ˆï¼‰
Cookie themeCookie = new Cookie("theme", "dark");
themeCookie.setPath("/");  // æ ¹è·¯å¾„ï¼Œå…¨ç«™å¯ç”¨
response.addCookie(themeCookie);
```

**åœºæ™¯äºŒï¼šæ¨¡å—ä¸“ç”¨Cookie**
```java
// è´­ç‰©è½¦ä¸“ç”¨Cookieï¼ˆåªåœ¨å•†åŸç”Ÿæ•ˆï¼‰
Cookie cartCookie = new Cookie("cartItems", "å•†å“åˆ—è¡¨");
cartCookie.setPath("/shop/");  // åªåœ¨å•†åŸæ¨¡å—ç”Ÿæ•ˆ
response.addCookie(cartCookie);

// ç®¡ç†åå°Cookieï¼ˆåªåœ¨åå°ç”Ÿæ•ˆï¼‰
Cookie adminCookie = new Cookie("adminToken", "ç®¡ç†å‘˜ä»¤ç‰Œ");
adminCookie.setPath("/admin/"); // åªåœ¨ç®¡ç†åå°ç”Ÿæ•ˆ
response.addCookie(adminCookie);
```

### 3.5 è·¯å¾„è®¾ç½®çš„æ³¨æ„äº‹é¡¹


**âš ï¸ å¸¸è§é—®é¢˜**ï¼š
- è·¯å¾„å¿…é¡»ä»¥ `/` å¼€å¤´
- è·¯å¾„åŒºåˆ†å¤§å°å†™
- å­è·¯å¾„ä¼šç»§æ‰¿çˆ¶è·¯å¾„çš„Cookie

```
è·¯å¾„ç»§æ‰¿ç¤ºä¾‹ï¼š
è®¾ç½®Cookieè·¯å¾„ä¸º /user/
åˆ™ä»¥ä¸‹è·¯å¾„éƒ½èƒ½è®¿é—®è¯¥Cookieï¼š
âœ… /user/
âœ… /user/profile/
âœ… /user/orders/detail/

ä½†ä»¥ä¸‹è·¯å¾„æ— æ³•è®¿é—®ï¼š
âŒ /
âŒ /shop/
âŒ /admin/
```

---

## 4. ğŸŒ setDomainä½œç”¨åŸŸåé…ç½®


### 4.1 åŸŸåä½œç”¨èŒƒå›´æ¦‚å¿µ


**ç”Ÿæ´»åŒ–ç†è§£**ï¼šåŸŸåå°±åƒæ˜¯Cookieçš„"æˆ·ç±åœ°å€"ï¼Œå†³å®šäº†Cookieèƒ½åœ¨å“ªäº›ç½‘ç«™ä¹‹é—´å…±äº«ã€‚

```
å…¬å¸ç»„ç»‡æ¶æ„ç±»æ¯”ï¼š
æ€»å…¬å¸: example.com
â”œâ”€â”€ å­å…¬å¸A: shop.example.com (å•†åŸ)
â”œâ”€â”€ å­å…¬å¸B: user.example.com (ç”¨æˆ·ä¸­å¿ƒ)  
â”œâ”€â”€ å­å…¬å¸C: api.example.com (æ¥å£æœåŠ¡)
â””â”€â”€ åˆ†å…¬å¸: blog.example.org (åšå®¢ï¼Œä¸åŒåŸŸå)

CookieåŸŸåè®¾ç½®ï¼š
example.com     â†’ æ€»å…¬å¸åŠæ‰€æœ‰å­å…¬å¸éƒ½èƒ½ç”¨
shop.example.com â†’ åªæœ‰å•†åŸå­å…¬å¸èƒ½ç”¨
```

### 4.2 setDomainæ–¹æ³•è¯¦è§£


**åŸºæœ¬è¯­æ³•**ï¼š`cookie.setDomain(String domain)`

**åŸŸåè§„åˆ™**ï¼š
```
å®Œæ•´åŸŸå: shop.example.com  â†’ åªåœ¨è¯¥åŸŸåç”Ÿæ•ˆ
é¡¶çº§åŸŸå: .example.com     â†’ åœ¨è¯¥åŸŸååŠæ‰€æœ‰å­åŸŸåç”Ÿæ•ˆ
é»˜è®¤æƒ…å†µ: å½“å‰åŸŸå         â†’ åªåœ¨å½“å‰åŸŸåç”Ÿæ•ˆ
```

### 4.3 åŸŸåå…±äº«åœºæ™¯


**ğŸ”¸ å•åŸŸåç½‘ç«™ï¼ˆæœ€å¸¸è§ï¼‰**
```java
// ä¸è®¾ç½®domainï¼Œé»˜è®¤å½“å‰åŸŸå
Cookie simpleCookie = new Cookie("user", "å¼ ä¸‰");
// åªåœ¨å½“å‰åŸŸåç”Ÿæ•ˆï¼Œå¦‚ï¼šwww.shop.com
response.addCookie(simpleCookie);
```

**ğŸ”¸ å¤šå­åŸŸåç½‘ç«™ï¼ˆä¸»æµç”µå•†æ¨¡å¼ï¼‰**
```java
// è®¾ç½®é¡¶çº§åŸŸåï¼Œå®ç°è·¨å­åŸŸå…±äº«
Cookie sharedCookie = new Cookie("userID", "12345");
sharedCookie.setDomain(".example.com");  // æ³¨æ„å‰é¢çš„ç‚¹
response.addCookie(sharedCookie);

// ç”Ÿæ•ˆèŒƒå›´ï¼š
// âœ… www.example.com
// âœ… shop.example.com  
// âœ… user.example.com
// âœ… api.example.com
```

### 4.4 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯ä¸€ï¼šç»Ÿä¸€ç”¨æˆ·ç³»ç»Ÿ**
```java
// ç”¨æˆ·åœ¨ä»»ä½•å­ç³»ç»Ÿç™»å½•åï¼Œå…¶ä»–å­ç³»ç»Ÿä¹Ÿè®¤è¯†è¯¥ç”¨æˆ·
Cookie userLoginCookie = new Cookie("globalUserID", "user123");
userLoginCookie.setDomain(".company.com");
userLoginCookie.setPath("/");
userLoginCookie.setMaxAge(7 * 24 * 60 * 60); // 7å¤©
response.addCookie(userLoginCookie);

// ç”¨æˆ·ä½“éªŒï¼š
// åœ¨ shop.company.com ç™»å½•å
// è®¿é—® user.company.com æ— éœ€å†æ¬¡ç™»å½•
```

**åœºæ™¯äºŒï¼šè´­ç‰©è½¦è·¨åŸŸåŒæ­¥**
```java
// è´­ç‰©è½¦åœ¨å•†åŸå’Œç”¨æˆ·ä¸­å¿ƒä¹‹é—´åŒæ­¥
Cookie cartSyncCookie = new Cookie("cartSync", "å•†å“æ•°æ®");
cartSyncCookie.setDomain(".ecommerce.com");
cartSyncCookie.setPath("/");
response.addCookie(cartSyncCookie);
```

### 4.5 åŸŸåå®‰å…¨æ³¨æ„äº‹é¡¹


**ğŸ”’ å®‰å…¨è€ƒè™‘**

| è®¾ç½®æ–¹å¼ | **å®‰å…¨æ€§** | **é€‚ç”¨åœºæ™¯** |
|---------|-----------|-------------|
| `ä¸è®¾ç½®åŸŸå` | `ğŸ”’ æœ€å®‰å…¨` | `å•åŸŸåç½‘ç«™` |
| `è®¾ç½®å­åŸŸå` | `ğŸ” è¾ƒå®‰å…¨` | `ç‰¹å®šå­ç³»ç»Ÿ` |
| `è®¾ç½®é¡¶çº§åŸŸå` | `âš ï¸ éœ€æ³¨æ„` | `å¤šå­åŸŸåç³»ç»Ÿ` |

> **âš ï¸ å®‰å…¨æé†’**ï¼šè®¾ç½®é¡¶çº§åŸŸåæ—¶ï¼Œè¯¥åŸŸåä¸‹çš„æ‰€æœ‰å­åŸŸåéƒ½èƒ½è®¿é—®Cookieï¼Œè¯·ç¡®ä¿æ‰€æœ‰å­åŸŸåéƒ½åœ¨ä½ çš„æ§åˆ¶ä¸‹ã€‚

---

## 5. ğŸ”„ ä¸´æ—¶Cookieä¸æŒä¹…Cookie


### 5.1 ä¸¤ç§Cookieç±»å‹å¯¹æ¯”


**é€šä¿—ç†è§£**ï¼šä¸´æ—¶Cookieåƒæ˜¯"ä¸´æ—¶å·¥"ï¼Œæµè§ˆå™¨å…³é—­å°±èµ°äººï¼›æŒä¹…Cookieåƒæ˜¯"æ­£å¼å‘˜å·¥"ï¼Œæœ‰å›ºå®šåˆåŒæœŸã€‚

```
ç”Ÿæ´»ä¸­çš„å¯¹æ¯”ï¼š
ä¸´æ—¶ä¾¿ç­¾ vs é‡è¦æ–‡ä»¶
â”œâ”€â”€ ä¸´æ—¶ä¾¿ç­¾: ç”¨å®Œå°±æ‰”ï¼Œæµè§ˆå™¨å…³é—­å³åˆ é™¤
â””â”€â”€ é‡è¦æ–‡ä»¶: é•¿æœŸä¿å­˜ï¼Œè®¾å®šè¿‡æœŸæ—¶é—´

é…’åº—ä½å®¿ vs ç§Ÿæˆ¿åˆåŒ  
â”œâ”€â”€ é…’åº—ä½å®¿: ä¸´æ—¶å±…ä½ï¼Œé€€æˆ¿å³ç»“æŸ
â””â”€â”€ ç§Ÿæˆ¿åˆåŒ: é•¿æœŸå±…ä½ï¼ŒåˆåŒåˆ°æœŸæ‰ç»“æŸ
```

### 5.2 è¯¦ç»†å¯¹æ¯”åˆ†æ


| ç‰¹å¾ | **ä¸´æ—¶Cookie (ä¼šè¯Cookie)** | **æŒä¹…Cookie** |
|------|---------------------------|----------------|
| ğŸ• **ç”Ÿå­˜æ—¶é—´** | `æµè§ˆå™¨å…³é—­å³åˆ é™¤` | `è®¾å®šæ—¶é—´åè¿‡æœŸ` |
| ğŸ’¾ **å­˜å‚¨ä½ç½®** | `å†…å­˜ä¸­` | `ç¡¬ç›˜æ–‡ä»¶ä¸­` |
| âš™ï¸ **è®¾ç½®æ–¹å¼** | `ä¸è®¾ç½®MaxAgeæˆ–è®¾ä¸º-1` | `è®¾ç½®æ­£æ•°MaxAge` |
| ğŸ¯ **é€‚ç”¨åœºæ™¯** | `ä¸´æ—¶çŠ¶æ€ã€æ•æ„Ÿä¿¡æ¯` | `ç”¨æˆ·åå¥½ã€é•¿æœŸè®¾ç½®` |
| ğŸ”’ **å®‰å…¨æ€§** | `ç›¸å¯¹è¾ƒé«˜` | `éœ€è¦é¢å¤–ä¿æŠ¤` |

### 5.3 ä¸´æ—¶Cookieåº”ç”¨å®ä¾‹


**ğŸ”¸ ä¼šè¯çŠ¶æ€ç®¡ç†**
```java
// ä¸´æ—¶ç™»å½•çŠ¶æ€ï¼ˆæµè§ˆå™¨å…³é—­å³é€€å‡ºç™»å½•ï¼‰
Cookie sessionCookie = new Cookie("sessionID", "temp_123456");
// ä¸è°ƒç”¨setMaxAge()ï¼Œé»˜è®¤ä¸º-1ï¼Œå³ä¸´æ—¶Cookie
response.addCookie(sessionCookie);

// ç‰¹ç‚¹ï¼šå…³é—­æµè§ˆå™¨åéœ€è¦é‡æ–°ç™»å½•ï¼Œå®‰å…¨æ€§æ›´é«˜
```

**ğŸ”¸ ä¸´æ—¶è´­ç‰©è½¦**
```java
// æ¸¸å®¢è´­ç‰©è½¦ï¼ˆä¸æ³¨å†Œç”¨æˆ·çš„ä¸´æ—¶è´­ç‰©è½¦ï¼‰
Cookie tempCartCookie = new Cookie("guestCart", "ä¸´æ—¶å•†å“åˆ—è¡¨");
sessionCookie.setMaxAge(-1); // æ˜ç¡®è®¾ç½®ä¸ºä¸´æ—¶Cookie
response.addCookie(tempCartCookie);
```

### 5.4 æŒä¹…Cookieåº”ç”¨å®ä¾‹


**ğŸ”¸ ç”¨æˆ·åå¥½è®¾ç½®**
```java
// ç½‘ç«™ä¸»é¢˜è®¾ç½®ï¼ˆé•¿æœŸä¿å­˜ï¼‰
Cookie themeCookie = new Cookie("userTheme", "dark");
themeCookie.setMaxAge(365 * 24 * 60 * 60); // 1å¹´æœ‰æ•ˆæœŸ
response.addCookie(themeCookie);
```

**ğŸ”¸ "è®°ä½æˆ‘"åŠŸèƒ½**
```java
// ç”¨æˆ·é€‰æ‹©"è®°ä½æˆ‘"æ—¶çš„ç™»å½•çŠ¶æ€
Cookie rememberCookie = new Cookie("rememberUser", "user123");
rememberCookie.setMaxAge(30 * 24 * 60 * 60); // 30å¤©æœ‰æ•ˆæœŸ
response.addCookie(rememberCookie);
```

### 5.5 é€‰æ‹©å»ºè®®


**ğŸ¯ ä½¿ç”¨åœºæ™¯é€‰æ‹©æŒ‡å—**

```
é€‰æ‹©ä¸´æ—¶Cookieçš„æƒ…å†µï¼š
âœ… æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ”¯ä»˜çŠ¶æ€ï¼‰
âœ… ä¸´æ—¶ä¼šè¯æ•°æ®
âœ… é«˜å®‰å…¨è¦æ±‚çš„åœºæ™¯
âœ… ä¸å¸Œæœ›é•¿æœŸå­˜å‚¨çš„æ•°æ®

é€‰æ‹©æŒä¹…Cookieçš„æƒ…å†µï¼š  
âœ… ç”¨æˆ·ä¸ªæ€§åŒ–è®¾ç½®
âœ… "è®°ä½æˆ‘"åŠŸèƒ½
âœ… è´­ç‰©åå¥½è®°å½•
âœ… ç½‘ç«™ä½¿ç”¨ä¹ æƒ¯
```

---

## 6. ğŸ”§ Cookieå±æ€§ç»¼åˆåº”ç”¨


### 6.1 å®Œæ•´çš„Cookieåˆ›å»ºæ¨¡æ¿


```java
/**
 * åˆ›å»ºä¸€ä¸ªå®Œæ•´é…ç½®çš„Cookie
 * @param name Cookieåç§°
 * @param value Cookieå€¼
 * @param maxAge è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
 * @param path ä½œç”¨è·¯å¾„
 * @param domain ä½œç”¨åŸŸå
 * @return é…ç½®å®Œæ•´çš„Cookie
 */
public Cookie createFullCookie(String name, String value, 
                              int maxAge, String path, String domain) {
    Cookie cookie = new Cookie(name, value);
    cookie.setMaxAge(maxAge);   // è®¾ç½®è¿‡æœŸæ—¶é—´
    cookie.setPath(path);       // è®¾ç½®ä½œç”¨è·¯å¾„
    cookie.setDomain(domain);   // è®¾ç½®ä½œç”¨åŸŸå
    cookie.setHttpOnly(true);   // é˜²XSSæ”»å‡»ï¼ˆå¯é€‰ï¼‰
    cookie.setSecure(false);    // HTTPSä¸“ç”¨ï¼ˆå¯é€‰ï¼‰
    return cookie;
}
```

### 6.2 å®é™…ä¸šåŠ¡åœºæ™¯åº”ç”¨


**ğŸ”¸ åœºæ™¯ä¸€ï¼šç”¨æˆ·ç™»å½•ç³»ç»Ÿ**

```java
// ç”¨æˆ·ç™»å½•æˆåŠŸåçš„Cookieè®¾ç½®
public void handleUserLogin(String username, boolean rememberMe, 
                           HttpServletResponse response) {
    
    if (rememberMe) {
        // é•¿æœŸç™»å½•Cookieï¼ˆ30å¤©ï¼‰
        Cookie loginCookie = createFullCookie(
            "userLogin", username,
            30 * 24 * 60 * 60,  // 30å¤©
            "/",                // å…¨ç«™å¯ç”¨
            ".website.com"      // å­åŸŸåå…±äº«
        );
        response.addCookie(loginCookie);
        
    } else {
        // ä¸´æ—¶ç™»å½•Cookieï¼ˆæµè§ˆå™¨å…³é—­å³åˆ é™¤ï¼‰
        Cookie sessionCookie = new Cookie("sessionUser", username);
        sessionCookie.setPath("/");
        // ä¸è®¾ç½®MaxAgeï¼Œé»˜è®¤ä¸ºä¸´æ—¶Cookie
        response.addCookie(sessionCookie);
    }
}
```

**ğŸ”¸ åœºæ™¯äºŒï¼šç”µå•†è´­ç‰©è½¦**

```java
// è´­ç‰©è½¦Cookieé…ç½®
public void updateShoppingCart(String cartData, String userType,
                              HttpServletResponse response) {
    
    Cookie cartCookie = new Cookie("shoppingCart", cartData);
    cartCookie.setPath("/shop/");  // åªåœ¨å•†åŸæ¨¡å—ç”Ÿæ•ˆ
    
    if ("registered".equals(userType)) {
        // æ³¨å†Œç”¨æˆ·ï¼š7å¤©æœ‰æ•ˆæœŸ
        cartCookie.setMaxAge(7 * 24 * 60 * 60);
        cartCookie.setDomain(".shop.com");
    } else {
        // æ¸¸å®¢ç”¨æˆ·ï¼š2å°æ—¶æœ‰æ•ˆæœŸ
        cartCookie.setMaxAge(2 * 60 * 60);
    }
    
    response.addCookie(cartCookie);
}
```

### 6.3 Cookieå±æ€§ç»„åˆç­–ç•¥


**ğŸ¯ å¸¸è§ç»„åˆæ¨¡å¼**

| åº”ç”¨åœºæ™¯ | **MaxAge** | **Path** | **Domain** | **è¯´æ˜** |
|---------|-----------|----------|-----------|---------|
| ğŸ” **å…¨ç«™ç™»å½•** | `30å¤©` | `/` | `.site.com` | `é•¿æœŸ+å…¨ç«™+å­åŸŸå…±äº«` |
| ğŸ›’ **è´­ç‰©è½¦** | `7å¤©` | `/shop/` | `å½“å‰åŸŸå` | `ä¸­æœŸ+æ¨¡å—ä¸“ç”¨` |
| ğŸ¨ **ä¸»é¢˜è®¾ç½®** | `1å¹´` | `/` | `å½“å‰åŸŸå` | `é•¿æœŸ+å…¨ç«™ä¸“ç”¨` |
| ğŸ”’ **æ”¯ä»˜ä¼šè¯** | `ä¸´æ—¶` | `/pay/` | `å½“å‰åŸŸå` | `ä¼šè¯+æ”¯ä»˜æ¨¡å—ä¸“ç”¨` |
| ğŸ“Š **ç»Ÿè®¡åˆ†æ** | `90å¤©` | `/` | `.analytics.com` | `é•¿æœŸ+å…¨ç«™+åˆ†æåŸŸå` |

### 6.4 Cookieç®¡ç†å·¥å…·ç±»


```java
public class CookieManager {
    
    // åˆ›å»ºç™»å½•Cookie
    public static Cookie createLoginCookie(String username, boolean longTerm) {
        Cookie cookie = new Cookie("user_login", username);
        cookie.setPath("/");
        cookie.setMaxAge(longTerm ? 30 * 24 * 60 * 60 : -1);
        return cookie;
    }
    
    // åˆ›å»ºè´­ç‰©è½¦Cookie  
    public static Cookie createCartCookie(String cartData, int hours) {
        Cookie cookie = new Cookie("shopping_cart", cartData);
        cookie.setPath("/shop/");
        cookie.setMaxAge(hours * 60 * 60);
        return cookie;
    }
    
    // åˆ é™¤æŒ‡å®šCookie
    public static Cookie deleteCookie(String cookieName, String path) {
        Cookie cookie = new Cookie(cookieName, "");
        cookie.setPath(path);
        cookie.setMaxAge(0);
        return cookie;
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸï¼šCookieä»åˆ›å»ºåˆ°é”€æ¯çš„å®Œæ•´è¿‡ç¨‹
ğŸ”¸ setMaxAgeï¼šæ§åˆ¶Cookieçš„å­˜æ´»æ—¶é—´ï¼ˆç§’ä¸ºå•ä½ï¼‰
ğŸ”¸ setPathï¼šé™å®šCookieçš„ä½œç”¨è·¯å¾„èŒƒå›´  
ğŸ”¸ setDomainï¼šæ§åˆ¶Cookieçš„åŸŸåä½œç”¨èŒƒå›´
ğŸ”¸ ä¸´æ—¶vsæŒä¹…ï¼šä¼šè¯Cookie vs æŒä¹…åŒ–Cookieçš„åŒºåˆ«
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ—¶é—´ç®¡ç†çš„é‡è¦æ€§**
```
åˆç†çš„è¿‡æœŸæ—¶é—´è®¾ç½®ï¼š
- ç”¨æˆ·ä½“éªŒï¼šä¸ç”¨é¢‘ç¹é‡æ–°è®¾ç½®
- å®‰å…¨è€ƒè™‘ï¼šé¿å…é•¿æœŸæš´éœ²é£é™©
- å­˜å‚¨ä¼˜åŒ–ï¼šè‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®
```

**ğŸ”¹ è·¯å¾„æ§åˆ¶çš„ä½œç”¨**
```
ç²¾ç¡®çš„è·¯å¾„è®¾ç½®ï¼š
- åŠŸèƒ½éš”ç¦»ï¼šä¸åŒæ¨¡å—äº’ä¸å¹²æ‰°
- å®‰å…¨é˜²æŠ¤ï¼šæ•æ„ŸCookieé™åˆ¶èŒƒå›´
- æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘æ— å…³Cookieä¼ è¾“
```

**ğŸ”¹ åŸŸåå…±äº«çš„åº”ç”¨**
```
åŸŸåè®¾ç½®ç­–ç•¥ï¼š
- å•åŸŸåï¼šé»˜è®¤è®¾ç½®ï¼Œæœ€å®‰å…¨
- å­åŸŸåï¼šå®ç°ç³»ç»Ÿé—´æ•°æ®å…±äº«
- å®‰å…¨è¾¹ç•Œï¼šç¡®ä¿åŸŸåæ§åˆ¶æƒ
```

### 7.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ¯ æ–°æ‰‹å®è·µå»ºè®®**

```
ç¬¬ä¸€æ­¥ï¼šæŒæ¡åŸºç¡€è®¾ç½®
- å…ˆå­¦ä¼šè®¾ç½®åŸºæœ¬çš„nameå’Œvalue
- ç†è§£MaxAgeçš„æ­£è´Ÿæ•°å«ä¹‰
- ç»ƒä¹ åˆ›å»ºä¸´æ—¶å’ŒæŒä¹…Cookie

ç¬¬äºŒæ­¥ï¼šç†Ÿç»ƒè·¯å¾„é…ç½®
- åœ¨æœ¬åœ°é¡¹ç›®ä¸­æµ‹è¯•ä¸åŒè·¯å¾„æ•ˆæœ
- è§‚å¯ŸCookieåœ¨ä¸åŒé¡µé¢çš„è¡¨ç°
- ç†è§£è·¯å¾„ç»§æ‰¿å…³ç³»

ç¬¬ä¸‰æ­¥ï¼šå°è¯•åŸŸåé…ç½®
- åœ¨å¤šå­åŸŸåç¯å¢ƒä¸­å®è·µ
- æµ‹è¯•è·¨å­åŸŸåçš„Cookieå…±äº«
- æ³¨æ„åŸŸåå®‰å…¨è®¾ç½®

ç¬¬å››æ­¥ï¼šç»¼åˆåº”ç”¨å®æˆ˜
- å¼€å‘å®Œæ•´çš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
- å®ç°è´­ç‰©è½¦åŠŸèƒ½
- åˆ¶ä½œä¸ªæ€§åŒ–è®¾ç½®åŠŸèƒ½
```

**ğŸ”§ å¼€å‘æœ€ä½³å®è·µ**
- ä¸ºCookieè®¾ç½®åˆç†çš„ç”Ÿå‘½å‘¨æœŸ
- ä½¿ç”¨è·¯å¾„é™åˆ¶Cookieä½œç”¨èŒƒå›´
- è°¨æ…è®¾ç½®è·¨åŸŸåCookie
- å»ºç«‹Cookieç®¡ç†å·¥å…·ç±»
- å®šæœŸæ¸…ç†æ— ç”¨Cookie

**ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•**
- â˜ èƒ½è§£é‡ŠCookieç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ
- â˜ ä¼šä½¿ç”¨setMaxAgeè®¾ç½®ä¸åŒè¿‡æœŸæ—¶é—´
- â˜ ç†è§£setPathçš„ä½œç”¨å’ŒåŒ¹é…è§„åˆ™
- â˜ æŒæ¡setDomainçš„åŸŸåæ§åˆ¶æœºåˆ¶
- â˜ èƒ½åŒºåˆ†ä¸´æ—¶Cookieå’ŒæŒä¹…Cookie
- â˜ ä¼šç»¼åˆè¿ç”¨å¤šä¸ªå±æ€§åˆ›å»ºCookie

**æ ¸å¿ƒè®°å¿†**ï¼š
- Cookieå±æ€§å†³å®šç”Ÿå­˜è§„åˆ™ï¼Œæ—¶é—´è·¯å¾„åŸŸåè¦è®¾æ¸…
- ä¸´æ—¶æŒä¹…æŒ‰éœ€é€‰æ‹©ï¼Œå®‰å…¨ä¾¿åˆ©è¦å¹³è¡¡
- ç»¼åˆåº”ç”¨é‡å®è·µï¼Œç”¨æˆ·ä½“éªŒæ˜¯ç›®æ ‡