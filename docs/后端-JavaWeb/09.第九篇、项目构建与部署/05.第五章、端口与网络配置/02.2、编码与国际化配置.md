---
title: 2ã€ç¼–ç ä¸å›½é™…åŒ–é…ç½®
---
## ğŸ“š ç›®å½•

1. [ç¼–ç é—®é¢˜çš„æœ¬è´¨](#1-ç¼–ç é—®é¢˜çš„æœ¬è´¨)
2. [TomcatæœåŠ¡å™¨ç¼–ç é…ç½®](#2-tomcatæœåŠ¡å™¨ç¼–ç é…ç½®)
3. [è¯·æ±‚å“åº”ç¼–ç å¤„ç†](#3-è¯·æ±‚å“åº”ç¼–ç å¤„ç†)
4. [ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ](#4-ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ)
5. [å›½é™…åŒ–èµ„æºé…ç½®](#5-å›½é™…åŒ–èµ„æºé…ç½®)
6. [ç¼–ç ç»Ÿä¸€åŒ–æœ€ä½³å®è·µ](#6-ç¼–ç ç»Ÿä¸€åŒ–æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ç¼–ç é—®é¢˜çš„æœ¬è´¨


### 1.1 ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç 


**ğŸ’¡ é€šä¿—è§£é‡Š**ï¼šå­—ç¬¦ç¼–ç å°±åƒæ˜¯ä¸åŒè¯­è¨€ä¹‹é—´çš„"ç¿»è¯‘è§„åˆ™"

```
ç°å®æ¯”å–»ï¼š
ä½ è¯´ä¸­æ–‡ â†’ éœ€è¦ç¿»è¯‘æˆè‹±æ–‡ â†’ å¤–å›½äººæ‰èƒ½ç†è§£
ä½ å†™æ±‰å­— â†’ éœ€è¦ç¼–ç æˆæ•°å­— â†’ è®¡ç®—æœºæ‰èƒ½å­˜å‚¨

ç¼–ç è¿‡ç¨‹ï¼š
"ä½ å¥½" â†’ UTF-8ç¼–ç  â†’ å­˜å‚¨ä¸ºï¼šE4 BD A0 E5 A5 BD
è®¡ç®—æœºè¯»å–ï¼šE4 BD A0 E5 A5 BD â†’ UTF-8è§£ç  â†’ æ˜¾ç¤º"ä½ å¥½"
```

**ğŸ” æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **ç¼–ç **ï¼šæŠŠæ–‡å­—è½¬æ¢æˆè®¡ç®—æœºèƒ½ç†è§£çš„æ•°å­—
- **è§£ç **ï¼šæŠŠæ•°å­—è½¬æ¢å›äººèƒ½çœ‹æ‡‚çš„æ–‡å­—
- **å­—ç¬¦é›†**ï¼šè§„å®šäº†å“ªäº›æ–‡å­—ç”¨å“ªäº›æ•°å­—è¡¨ç¤º

### 1.2 å¸¸è§å­—ç¬¦ç¼–ç ç±»å‹


| ç¼–ç ç±»å‹ | **ç‰¹ç‚¹** | **ä¸­æ–‡æ”¯æŒ** | **ä½¿ç”¨åœºæ™¯** |
|---------|---------|------------|-------------|
| ğŸ”¤ **ASCII** | `åªæ”¯æŒè‹±æ–‡ï¼Œ1å­—èŠ‚` | `âŒ ä¸æ”¯æŒ` | `åŸºç¡€è‹±æ–‡ç¯å¢ƒ` |
| ğŸ”¤ **ISO-8859-1** | `è¥¿æ¬§å­—ç¬¦ï¼Œ1å­—èŠ‚` | `âŒ ä¸æ”¯æŒ` | `æ—©æœŸWebåº”ç”¨` |
| ğŸŒ **GBK** | `ä¸­æ–‡ç¼–ç ï¼Œ2å­—èŠ‚` | `âœ… æ”¯æŒç®€ä½“ä¸­æ–‡` | `å›½å†…ç³»ç»Ÿ` |
| ğŸŒ **UTF-8** | `ä¸‡å›½ç ï¼Œå˜é•¿ç¼–ç ` | `âœ… æ”¯æŒæ‰€æœ‰è¯­è¨€` | `ğŸ¯ ç°ä»£Webæ ‡å‡†` |

### 1.3 ä¹±ç äº§ç”Ÿçš„æ ¹æœ¬åŸå› 


**ä¹±ç å½¢æˆè¿‡ç¨‹å›¾ç¤º**ï¼š
```
æ­£ç¡®æµç¨‹ï¼š
æ–‡å­— â†’ [UTF-8ç¼–ç ] â†’ ä¼ è¾“ â†’ [UTF-8è§£ç ] â†’ æ­£ç¡®æ˜¾ç¤º

ä¹±ç æµç¨‹ï¼š
æ–‡å­— â†’ [UTF-8ç¼–ç ] â†’ ä¼ è¾“ â†’ [GBKè§£ç ] â†’ ä¹±ç æ˜¾ç¤ºï¼

å…·ä½“ä¾‹å­ï¼š
"ä½ å¥½" â†’ UTF-8ç¼–ç  â†’ E4 BD A0 E5 A5 BD
      â†’ GBKè§£ç  â†’ æ˜¾ç¤ºæˆä¹±ç å­—ç¬¦
```

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šä¹±ç çš„æœ¬è´¨å°±æ˜¯"ç”¨é”™äº†ç¿»è¯‘è§„åˆ™"
> 
> å°±åƒä½ ç”¨è‹±æ–‡è¯å…¸å»ç¿»è¯‘ä¸­æ–‡ï¼Œè‚¯å®šç¿»è¯‘ä¸å¯¹ï¼

---

## 2. ğŸ”§ TomcatæœåŠ¡å™¨ç¼–ç é…ç½®


### 2.1 URIEncodingé…ç½®è¯¦è§£


**ğŸ¯ é…ç½®ä½ç½®**ï¼š`conf/server.xml` æ–‡ä»¶

```xml
<!-- Tomcat 8.5+ æ¨èé…ç½® -->
<Connector port="8080" 
           protocol="HTTP/1.1"
           URIEncoding="UTF-8"
           useBodyEncodingForURI="true"
           connectionTimeout="20000"
           redirectPort="8443" />
```

**ğŸ“‹ å‚æ•°å«ä¹‰è§£é‡Š**ï¼š

**URIEncoding="UTF-8"**
- **ä½œç”¨**ï¼šè®¾ç½®URLåœ°å€çš„ç¼–ç æ ¼å¼
- **è§£å†³é—®é¢˜**ï¼šGETè¯·æ±‚å‚æ•°ä¸­æ–‡ä¹±ç 
- **é€šä¿—ç†è§£**ï¼šå‘Šè¯‰Tomcatç”¨UTF-8æ¥ç†è§£ç½‘å€ä¸­çš„ä¸­æ–‡

**useBodyEncodingForURI="true"**
- **ä½œç”¨**ï¼šè®©URIä½¿ç”¨è¯·æ±‚ä½“çš„ç¼–ç 
- **å¥½å¤„**ï¼šGETå’ŒPOSTç»Ÿä¸€ç¼–ç å¤„ç†
- **é€šä¿—ç†è§£**ï¼šè®©ç½‘å€ç¼–ç å’Œå†…å®¹ç¼–ç ä¿æŒä¸€è‡´

### 2.2 é…ç½®ç”Ÿæ•ˆéªŒè¯


**æµ‹è¯•æ–¹æ³•**ï¼š
```java
// åˆ›å»ºæµ‹è¯•Servlet
@WebServlet("/testEncoding")
public class EncodingTestServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // è·å–URLå‚æ•°
        String name = request.getParameter("name");
        
        // è¾“å‡ºåˆ°æ§åˆ¶å°æŸ¥çœ‹
        System.out.println("æ¥æ”¶åˆ°çš„å‚æ•°ï¼š" + name);
        
        // è¿”å›ç»™æµè§ˆå™¨
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        out.println("<h2>æ‚¨è¾“å…¥çš„å§“åï¼š" + name + "</h2>");
    }
}
```

**è®¿é—®æµ‹è¯•**ï¼š
```
æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080/é¡¹ç›®å/testEncoding?name=å¼ ä¸‰
æ­£ç¡®æ˜¾ç¤ºï¼šæ‚¨è¾“å…¥çš„å§“åï¼šå¼ ä¸‰
```

### 2.3 Tomcatç‰ˆæœ¬å·®å¼‚


**ğŸ”„ ä¸åŒç‰ˆæœ¬é»˜è®¤è®¾ç½®**ï¼š

```
Tomcat 7.x åŠä»¥å‰ï¼š
- é»˜è®¤URIEncodingï¼šISO-8859-1
- éœ€è¦æ‰‹åŠ¨é…ç½®UTF-8
- ä¸­æ–‡å‚æ•°å¿…å®šä¹±ç 

Tomcat 8.xï¼š
- é»˜è®¤URIEncodingï¼šUTF-8
- ä¸€èˆ¬ä¸éœ€è¦é¢å¤–é…ç½®
- å»ºè®®æ˜¾å¼å£°æ˜ç¡®ä¿å…¼å®¹

Tomcat 9.x+ï¼š
- ä¸¥æ ¼UTF-8æ ‡å‡†
- è‡ªåŠ¨å¤„ç†ç¼–ç é—®é¢˜
- æœ€ä½³å…¼å®¹æ€§
```

---

## 3. ğŸ“¨ è¯·æ±‚å“åº”ç¼–ç å¤„ç†


### 3.1 è¯·æ±‚ç¼–ç è®¾ç½®


**ğŸ”¸ request.setCharacterEncoding() è¯¦è§£**

```java
@WebServlet("/userRegister")
public class UserRegisterServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) {
        try {
            // â­ ç¬¬ä¸€æ­¥ï¼šè®¾ç½®è¯·æ±‚ç¼–ç ï¼ˆå¿…é¡»åœ¨è·å–å‚æ•°å‰ï¼‰
            request.setCharacterEncoding("UTF-8");
            
            // â­ ç¬¬äºŒæ­¥ï¼šè·å–è¡¨å•å‚æ•°
            String username = request.getParameter("username");
            String realName = request.getParameter("realName");
            
            // â­ ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å“åº”ç¼–ç 
            response.setContentType("text/html;charset=UTF-8");
            
            // æ­£å¸¸å¤„ç†ä¸šåŠ¡é€»è¾‘
            PrintWriter out = response.getWriter();
            out.println("<h3>æ³¨å†ŒæˆåŠŸï¼</h3>");
            out.println("<p>ç”¨æˆ·åï¼š" + username + "</p>");
            out.println("<p>çœŸå®å§“åï¼š" + realName + "</p>");
            
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

**âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹**ï¼š
- **æ—¶æœºå¾ˆé‡è¦**ï¼šå¿…é¡»åœ¨`getParameter()`ä¹‹å‰è°ƒç”¨
- **åªå½±å“POST**ï¼šGETè¯·æ±‚å‚æ•°éœ€è¦Tomcaté…ç½®è§£å†³
- **ä¸€æ¬¡è®¾ç½®**ï¼šæ•´ä¸ªè¯·æ±‚æœŸé—´æœ‰æ•ˆ

### 3.2 å“åº”ç¼–ç è®¾ç½®


**ğŸ”¸ response.setContentType() è¯¦è§£**

```java
// æ–¹å¼1ï¼šå®Œæ•´è®¾ç½®ï¼ˆæ¨èï¼‰
response.setContentType("text/html;charset=UTF-8");

// æ–¹å¼2ï¼šåˆ†åˆ«è®¾ç½®
response.setCharacterEncoding("UTF-8");
response.setContentType("text/html");

// æ–¹å¼3ï¼šåªè®¾ç½®ç¼–ç 
response.setCharacterEncoding("UTF-8");
```

**ğŸ“Š ä¸åŒæ–¹å¼å¯¹æ¯”**ï¼š

| è®¾ç½®æ–¹å¼ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **æ¨èåº¦** |
|---------|---------|---------|-----------|
| `setContentType("text/html;charset=UTF-8")` | `ä¸€æ­¥åˆ°ä½ï¼Œç®€æ´æ˜äº†` | `æ— ` | `â­â­â­` |
| `setCharacterEncoding("UTF-8")` | `åªè®¾ç½®ç¼–ç ï¼Œçµæ´»` | `éœ€è¦å•ç‹¬è®¾ç½®content-type` | `â­â­` |
| `ä¸è®¾ç½®` | `æ— ` | `ä½¿ç”¨æœåŠ¡å™¨é»˜è®¤ï¼Œå¯èƒ½ä¹±ç ` | `âŒ` |

### 3.3 å¸¸è§å†…å®¹ç±»å‹è®¾ç½®


```java
// HTMLé¡µé¢
response.setContentType("text/html;charset=UTF-8");

// JSONæ•°æ®
response.setContentType("application/json;charset=UTF-8");

// çº¯æ–‡æœ¬
response.setContentType("text/plain;charset=UTF-8");

// XMLæ•°æ®
response.setContentType("text/xml;charset=UTF-8");

// JavaScriptæ–‡ä»¶
response.setContentType("application/javascript;charset=UTF-8");
```

---

## 4. ğŸ› ï¸ ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ


### 4.1 ä¹±ç é—®é¢˜åˆ†ç±»è¯Šæ–­


**ğŸ” ä¹±ç ç±»å‹è¯†åˆ«è¡¨**ï¼š

| ä¹±ç è¡¨ç° | **åŸå› ** | **è§£å†³æ–¹æ¡ˆ** | **ä¼˜å…ˆçº§** |
|---------|---------|-------------|-----------|
| `???` | `ä¸æ”¯æŒä¸­æ–‡çš„ç¼–ç ` | `ç»Ÿä¸€ä½¿ç”¨UTF-8` | `ğŸ”¥ é«˜` |
| `é”Ÿæ–¤æ‹·` | `UTF-8â†’GBKé”™è¯¯è½¬æ¢` | `æ£€æŸ¥ç¼–ç é“¾è·¯` | `ğŸ”¥ é«˜` |
| `Ã¦Â±â€°Ã¥Â­â€”` | `UTF-8è¢«å½“ä½œISOè§£ç ` | `è®¾ç½®æ­£ç¡®ContentType` | `âš¡ ä¸­` |
| `ä¸­æ–‡æ­£å¸¸ï¼Œç‰¹æ®Šå­—ç¬¦ä¹±ç ` | `å­—ç¬¦é›†ä¸å®Œæ•´` | `ç¡®ä¿ä½¿ç”¨UTF-8` | `ğŸ’¡ ä½` |

### 4.2 GETè¯·æ±‚ä¹±ç è§£å†³


**âŒ é”™è¯¯åšæ³•**ï¼š
```java
// è¿™æ ·åšæ— æ•ˆï¼GETè¯·æ±‚å‚æ•°ä¸èƒ½ç”¨setCharacterEncoding
request.setCharacterEncoding("UTF-8"); 
String name = request.getParameter("name"); // ä»ç„¶ä¹±ç 
```

**âœ… æ­£ç¡®è§£å†³æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆ1ï¼šTomcaté…ç½®ï¼ˆæ¨èï¼‰**
```xml
<!-- server.xml ä¸­é…ç½® -->
<Connector port="8080" 
           URIEncoding="UTF-8"
           useBodyEncodingForURI="true" />
```

**æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨è½¬ç ï¼ˆä¸æ¨èï¼Œäº†è§£å³å¯ï¼‰**
```java
// è·å–ä¹±ç å‚æ•°
String name = request.getParameter("name");

// æ‰‹åŠ¨é‡æ–°ç¼–ç 
if (name != null) {
    name = new String(name.getBytes("ISO-8859-1"), "UTF-8");
}
```

### 4.3 POSTè¯·æ±‚ä¹±ç è§£å†³


**âœ… æ ‡å‡†è§£å†³æµç¨‹**ï¼š

```java
@WebServlet("/postTest")
public class PostTestServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // ğŸ¯ æ ¸å¿ƒæ­¥éª¤1ï¼šè®¾ç½®è¯·æ±‚ç¼–ç 
        request.setCharacterEncoding("UTF-8");
        
        // ğŸ¯ æ ¸å¿ƒæ­¥éª¤2ï¼šè®¾ç½®å“åº”ç¼–ç 
        response.setContentType("text/html;charset=UTF-8");
        
        // ğŸ¯ æ ¸å¿ƒæ­¥éª¤3ï¼šè·å–å‚æ•°å¹¶å¤„ç†
        String message = request.getParameter("message");
        String author = request.getParameter("author");
        
        // è¾“å‡ºå¤„ç†ç»“æœ
        PrintWriter out = response.getWriter();
        out.println("<!DOCTYPE html>");
        out.println("<html><head><meta charset='UTF-8'></head><body>");
        out.println("<h3>ç•™è¨€å†…å®¹ï¼š" + message + "</h3>");
        out.println("<p>ä½œè€…ï¼š" + author + "</p>");
        out.println("</body></html>");
    }
}
```

### 4.4 å‰ç«¯é¡µé¢ç¼–ç é…ç½®


**HTMLé¡µé¢è®¾ç½®**ï¼š
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- ğŸ¯ å…³é”®ï¼šå£°æ˜é¡µé¢ç¼–ç  -->
    <meta charset="UTF-8">
    <title>ç”¨æˆ·æ³¨å†Œ</title>
</head>
<body>
    <!-- è¡¨å•æäº¤åˆ°åç«¯ -->
    <form action="register" method="post">
        <label>ç”¨æˆ·åï¼š</label>
        <input type="text" name="username" required>
        <br><br>
        <label>çœŸå®å§“åï¼š</label>
        <input type="text" name="realName" required>
        <br><br>
        <button type="submit">æ³¨å†Œ</button>
    </form>
</body>
</html>
```

**JSPé¡µé¢è®¾ç½®**ï¼š
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ç”¨æˆ·ä¿¡æ¯</title>
</head>
<body>
    <h2>æ¬¢è¿ï¼Œ${user.name}ï¼</h2>
</body>
</html>
```

---

## 5. ğŸŒ å›½é™…åŒ–èµ„æºé…ç½®


### 5.1 å›½é™…åŒ–åŸºæœ¬æ¦‚å¿µ


**ğŸ’¡ å›½é™…åŒ–ï¼ˆi18nï¼‰æ˜¯ä»€ä¹ˆ**ï¼š
- **å…¨ç§°**ï¼šInternationalizationï¼ˆ18ä¸ªå­—æ¯ç®€å†™ä¸ºi18nï¼‰
- **ç›®çš„**ï¼šè®©ä¸€ä¸ªåº”ç”¨æ”¯æŒå¤šç§è¯­è¨€
- **æ ¸å¿ƒæ€æƒ³**ï¼šæŠŠæ–‡å­—å†…å®¹ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥

**ğŸ¯ å®ç°åŸç†å›¾ç¤º**ï¼š
```
ç”¨æˆ·é€‰æ‹©è¯­è¨€
        â†“
    ç¨‹åºåˆ¤æ–­è¯­è¨€ç±»å‹
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ä¸­æ–‡èµ„æºåŒ…â”‚è‹±æ–‡èµ„æºåŒ…â”‚æ—¥æ–‡èµ„æºåŒ…â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    æ˜¾ç¤ºå¯¹åº”è¯­è¨€å†…å®¹
```

### 5.2 èµ„æºæ–‡ä»¶åˆ›å»º


**ğŸ“ èµ„æºæ–‡ä»¶å‘½åè§„åˆ™**ï¼š
```
åŸºç¡€æ–‡ä»¶ï¼šmessages.properties          ï¼ˆé»˜è®¤è¯­è¨€ï¼‰
ä¸­æ–‡æ–‡ä»¶ï¼šmessages_zh_CN.properties    ï¼ˆç®€ä½“ä¸­æ–‡ï¼‰
è‹±æ–‡æ–‡ä»¶ï¼šmessages_en_US.properties    ï¼ˆç¾å¼è‹±è¯­ï¼‰
æ—¥æ–‡æ–‡ä»¶ï¼šmessages_ja_JP.properties    ï¼ˆæ—¥è¯­ï¼‰
```

**ğŸ“ èµ„æºæ–‡ä»¶å†…å®¹ç¤ºä¾‹**ï¼š

**messages_zh_CN.propertiesï¼ˆä¸­æ–‡ï¼‰**ï¼š
```properties
# ç”¨æˆ·ç•Œé¢æ–‡æœ¬
welcome.message=æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿ
user.login=ç”¨æˆ·ç™»å½•
user.register=ç”¨æˆ·æ³¨å†Œ
user.name=ç”¨æˆ·å
user.password=å¯†ç 
button.submit=æäº¤
button.reset=é‡ç½®
error.username.required=ç”¨æˆ·åä¸èƒ½ä¸ºç©º
error.password.required=å¯†ç ä¸èƒ½ä¸ºç©º
```

**messages_en_US.propertiesï¼ˆè‹±æ–‡ï¼‰**ï¼š
```properties
# User interface text
welcome.message=Welcome to our system
user.login=User Login
user.register=User Register
user.name=Username
user.password=Password
button.submit=Submit
button.reset=Reset
error.username.required=Username is required
error.password.required=Password is required
```

### 5.3 Javaä»£ç ä¸­ä½¿ç”¨å›½é™…åŒ–


**ğŸ“– ResourceBundleä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
@WebServlet("/i18nDemo")
public class I18nDemoServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è®¾ç½®å“åº”ç¼–ç 
        response.setContentType("text/html;charset=UTF-8");
        
        // ğŸ¯ è·å–ç”¨æˆ·è¯­è¨€åå¥½
        String language = request.getParameter("lang");
        Locale locale;
        
        if ("en".equals(language)) {
            locale = Locale.US;
        } else {
            locale = Locale.CHINA; // é»˜è®¤ä¸­æ–‡
        }
        
        // ğŸ¯ åŠ è½½å¯¹åº”è¯­è¨€çš„èµ„æºåŒ…
        ResourceBundle bundle = ResourceBundle.getBundle("messages", locale);
        
        // ğŸ¯ è·å–æœ¬åœ°åŒ–æ–‡æœ¬
        String welcomeMsg = bundle.getString("welcome.message");
        String loginText = bundle.getString("user.login");
        String usernameText = bundle.getString("user.name");
        
        // è¾“å‡ºé¡µé¢
        PrintWriter out = response.getWriter();
        out.println("<!DOCTYPE html>");
        out.println("<html><head><meta charset='UTF-8'></head><body>");
        out.println("<h1>" + welcomeMsg + "</h1>");
        out.println("<h3>" + loginText + "</h3>");
        out.println("<label>" + usernameText + ":</label>");
        out.println("<input type='text' name='username'>");
        
        // è¯­è¨€åˆ‡æ¢é“¾æ¥
        out.println("<br><br>");
        out.println("<a href='?lang=zh'>ä¸­æ–‡</a> | ");
        out.println("<a href='?lang=en'>English</a>");
        out.println("</body></html>");
    }
}
```

### 5.4 JSPä¸­çš„å›½é™…åŒ–


**JSTL fmtæ ‡ç­¾åº“ä½¿ç”¨**ï¼š

```jsp
<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!-- è®¾ç½®è¯­è¨€ç¯å¢ƒ -->
<fmt:setLocale value="${param.lang != null ? param.lang : 'zh_CN'}" />

<!-- è®¾ç½®èµ„æºåŒ… -->
<fmt:setBundle basename="messages" />

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title><fmt:message key="user.login" /></title>
</head>
<body>
    <h1><fmt:message key="welcome.message" /></h1>
    
    <form>
        <label><fmt:message key="user.name" />:</label>
        <input type="text" name="username">
        <br><br>
        <label><fmt:message key="user.password" />:</label>
        <input type="password" name="password">
        <br><br>
        <button type="submit">
            <fmt:message key="button.submit" />
        </button>
    </form>
    
    <!-- è¯­è¨€åˆ‡æ¢ -->
    <div style="margin-top: 20px;">
        <a href="?lang=zh_CN">ä¸­æ–‡</a> | 
        <a href="?lang=en_US">English</a>
    </div>
</body>
</html>
```

---

## 6. ğŸ¯ ç¼–ç ç»Ÿä¸€åŒ–æœ€ä½³å®è·µ


### 6.1 å…¨é“¾è·¯ç¼–ç ç»Ÿä¸€


**ğŸ”— å®Œæ•´ç¼–ç é“¾è·¯å›¾ç¤º**ï¼š
```
æµè§ˆå™¨ â†’ ç½‘ç»œä¼ è¾“ â†’ Tomcat â†’ Servlet â†’ æ•°æ®åº“ â†’ å“åº”è¿”å›

æ¯ä¸€ç¯èŠ‚éƒ½å¿…é¡»ä½¿ç”¨UTF-8ç¼–ç ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚æµè§ˆå™¨        â”‚    â”‚TomcatæœåŠ¡å™¨  â”‚    â”‚æ•°æ®åº“        â”‚
â”‚<meta charset â”‚    â”‚URIEncoding  â”‚    â”‚charset=utf8 â”‚
â”‚="UTF-8">    â”‚    â”‚="UTF-8">    â”‚    â”‚mb4          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†‘                   â†‘                   â†‘
   HTMLé¡µé¢è®¾ç½®        server.xmlé…ç½®      å»ºè¡¨æ—¶æŒ‡å®š
```

### 6.2 ç¼–ç è¿‡æ»¤å™¨å®ç°


**ğŸ›¡ï¸ ç»Ÿä¸€ç¼–ç è¿‡æ»¤å™¨**ï¼š

```java
@WebFilter("/*")  // æ‹¦æˆªæ‰€æœ‰è¯·æ±‚
public class EncodingFilter implements Filter {
    
    private String encoding = "UTF-8";
    
    @Override
    public void init(FilterConfig config) {
        // ä»é…ç½®ä¸­è·å–ç¼–ç è®¾ç½®ï¼ˆå¯é€‰ï¼‰
        String initEncoding = config.getInitParameter("encoding");
        if (initEncoding != null && !initEncoding.trim().isEmpty()) {
            encoding = initEncoding;
        }
    }
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        // ğŸ¯ ç»Ÿä¸€è®¾ç½®è¯·æ±‚å’Œå“åº”ç¼–ç 
        request.setCharacterEncoding(encoding);
        response.setCharacterEncoding(encoding);
        response.setContentType("text/html;charset=" + encoding);
        
        // ç»§ç»­æ‰§è¡Œåç»­è¿‡æ»¤å™¨å’ŒServlet
        chain.doFilter(request, response);
    }
    
    @Override
    public void destroy() {
        // æ¸…ç†èµ„æº
    }
}
```

**web.xmlé…ç½®æ–¹å¼**ï¼š
```xml
<filter>
    <filter-name>EncodingFilter</filter-name>
    <filter-class>com.example.filter.EncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

### 6.3 æ•°æ®åº“ç¼–ç é…ç½®


**ğŸ“Š MySQLæ•°æ®åº“ç¼–ç è®¾ç½®**ï¼š

```sql
-- åˆ›å»ºæ•°æ®åº“æ—¶æŒ‡å®šç¼–ç 
CREATE DATABASE myapp 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºè¡¨æ—¶æŒ‡å®šç¼–ç 
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL,
    real_name VARCHAR(100) NOT NULL,
    email VARCHAR(100)
) ENGINE=InnoDB 
  DEFAULT CHARSET=utf8mb4 
  COLLATE=utf8mb4_unicode_ci;
```

**JDBCè¿æ¥å­—ç¬¦ä¸²**ï¼š
```java
// æ•°æ®åº“è¿æ¥URLå¿…é¡»æŒ‡å®šç¼–ç 
String url = "jdbc:mysql://localhost:3306/myapp" +
             "?useUnicode=true" +
             "&characterEncoding=utf8" +
             "&useSSL=false" +
             "&serverTimezone=UTC";
```

### 6.4 ç¼–ç é—®é¢˜æ’æŸ¥æ¸…å•


**âœ… ç³»ç»Ÿæ€§æ£€æŸ¥åˆ—è¡¨**ï¼š

**ğŸ” æœåŠ¡å™¨å±‚é¢**ï¼š
- [ ] Tomcat `server.xml` è®¾ç½®äº† `URIEncoding="UTF-8"`
- [ ] é¡¹ç›®çš„ `web.xml` é…ç½®äº†ç¼–ç è¿‡æ»¤å™¨
- [ ] IDEçš„é¡¹ç›®ç¼–ç è®¾ç½®ä¸ºUTF-8

**ğŸ” å‰ç«¯é¡µé¢**ï¼š
- [ ] HTMLé¡µé¢æœ‰ `<meta charset="UTF-8">`
- [ ] JSPé¡µé¢æœ‰ `<%@ page pageEncoding="UTF-8" %>`
- [ ] CSS/JSæ–‡ä»¶ä¿å­˜ä¸ºUTF-8æ ¼å¼

**ğŸ” åç«¯ä»£ç **ï¼š
- [ ] `request.setCharacterEncoding("UTF-8")` åœ¨è·å–å‚æ•°å‰
- [ ] `response.setContentType("text/html;charset=UTF-8")`
- [ ] æ‰€æœ‰Javaæºæ–‡ä»¶ä¿å­˜ä¸ºUTF-8ç¼–ç 

**ğŸ” æ•°æ®åº“å±‚é¢**ï¼š
- [ ] æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ä¸ºutf8mb4
- [ ] JDBCè¿æ¥å­—ç¬¦ä¸²åŒ…å«ç¼–ç å‚æ•°
- [ ] æ•°æ®åº“æœåŠ¡å™¨ç³»ç»Ÿç¼–ç ä¸ºUTF-8

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å­—ç¬¦ç¼–ç æœ¬è´¨ï¼šæ–‡å­—å’Œæ•°å­—ä¹‹é—´çš„ç¿»è¯‘è§„åˆ™
ğŸ”¸ ä¹±ç æ ¹æœ¬åŸå› ï¼šç¼–ç å’Œè§£ç ä½¿ç”¨äº†ä¸åŒè§„åˆ™
ğŸ”¸ UTF-8æ ‡å‡†ï¼šç°ä»£Webå¼€å‘çš„ç»Ÿä¸€ç¼–ç æ ‡å‡†
ğŸ”¸ å…¨é“¾è·¯ç»Ÿä¸€ï¼šä»å‰ç«¯åˆ°æ•°æ®åº“éƒ½è¦ä½¿ç”¨ç›¸åŒç¼–ç 
ğŸ”¸ æ—¶æœºé‡è¦æ€§ï¼šç¼–ç è®¾ç½®å¿…é¡»åœ¨æ•°æ®å¤„ç†å‰å®Œæˆ
```

### 7.2 å…³é”®é…ç½®è¦ç‚¹


**ğŸ”¹ TomcatæœåŠ¡å™¨é…ç½®**ï¼š
```xml
<Connector URIEncoding="UTF-8" useBodyEncodingForURI="true" />
```

**ğŸ”¹ Servletç¼–ç å¤„ç†**ï¼š
```java
request.setCharacterEncoding("UTF-8");           // POSTå‚æ•°
response.setContentType("text/html;charset=UTF-8"); // å“åº”å†…å®¹
```

**ğŸ”¹ å‰ç«¯é¡µé¢è®¾ç½®**ï¼š
```html
<meta charset="UTF-8">  <!-- HTMLé¡µé¢ -->
<%@ page pageEncoding="UTF-8" %>  <!-- JSPé¡µé¢ -->
```

**ğŸ”¹ æ•°æ®åº“è¿æ¥é…ç½®**ï¼š
```java
jdbc:mysql://localhost:3306/db?useUnicode=true&characterEncoding=utf8
```

### 7.3 é—®é¢˜è§£å†³æ€è·¯


**ğŸ”§ ä¹±ç æ’æŸ¥æ­¥éª¤**ï¼š
1. **ç¡®è®¤ç°è±¡**ï¼šæ˜¯ä»€ä¹ˆç±»å‹çš„ä¹±ç è¡¨ç°
2. **å®šä½ç¯èŠ‚**ï¼šåœ¨ç¼–ç é“¾è·¯çš„å“ªä¸ªç¯èŠ‚å‡ºé—®é¢˜
3. **ç»Ÿä¸€æ ‡å‡†**ï¼šç¡®ä¿è¯¥ç¯èŠ‚ä½¿ç”¨UTF-8ç¼–ç 
4. **éªŒè¯ä¿®å¤**ï¼šæµ‹è¯•ä¸­æ–‡å†…å®¹æ˜¯å¦æ­£å¸¸æ˜¾ç¤º

**âš ï¸ å¸¸è§é”™è¯¯é¿å…**ï¼š
- **ä¸è¦æ··ç”¨ç¼–ç **ï¼šå…¨é¡¹ç›®ç»Ÿä¸€UTF-8ï¼Œä¸è¦éƒ¨åˆ†GBKéƒ¨åˆ†UTF-8
- **æ³¨æ„è®¾ç½®æ—¶æœº**ï¼šç¼–ç è®¾ç½®è¦åœ¨æ•°æ®æ“ä½œä¹‹å‰
- **ä¸è¦å¿½è§†æ•°æ®åº“**ï¼šæ•°æ®åº“ç¼–ç é—®é¢˜ä¹Ÿä¼šå¯¼è‡´ä¹±ç 
- **æµ‹è¯•è¦å…¨é¢**ï¼šGETã€POSTã€æ•°æ®åº“è¯»å†™éƒ½è¦æµ‹è¯•

### 7.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ å¼€å‘ä¹ æƒ¯**ï¼š
- **ä»ä¸€å¼€å§‹å°±ç»Ÿä¸€ç¼–ç **ï¼šæ–°é¡¹ç›®ç¬¬ä¸€æ­¥å°±é…ç½®UTF-8
- **ä½¿ç”¨ç¼–ç è¿‡æ»¤å™¨**ï¼šé¿å…æ¯ä¸ªServleté‡å¤è®¾ç½®
- **ä¿å­˜æ–‡ä»¶æ³¨æ„ç¼–ç **ï¼šIDEä¸­æ‰€æœ‰æ–‡ä»¶éƒ½ä¿å­˜ä¸ºUTF-8
- **æµ‹è¯•ç”¨ä¸­æ–‡æ•°æ®**ï¼šå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ç”¨ä¸­æ–‡æµ‹è¯•

**ğŸ”§ ç»´æŠ¤å»ºè®®**ï¼š
- **æ–‡æ¡£åŒ–ç¼–ç æ ‡å‡†**ï¼šé¡¹ç›®æ–‡æ¡£ä¸­æ˜ç¡®ç¼–ç è§„èŒƒ
- **ä»£ç å®¡æŸ¥å…³æ³¨ç‚¹**ï¼šä»£ç å®¡æŸ¥æ—¶æ£€æŸ¥ç¼–ç è®¾ç½®
- **ç¯å¢ƒä¸€è‡´æ€§**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒç¼–ç é…ç½®ä¸€è‡´

**æ ¸å¿ƒè®°å¿†**ï¼š
- UTF-8æ˜¯ç°ä»£Webçš„æ ‡å‡†ç¼–ç ï¼Œå…¨é“¾è·¯ç»Ÿä¸€ä½¿ç”¨
- ä¹±ç é—®é¢˜æœ¬è´¨æ˜¯ç¼–ç è§£ç è§„åˆ™ä¸åŒ¹é…
- ç¼–ç è®¾ç½®çš„æ—¶æœºå¾ˆå…³é”®ï¼Œå¿…é¡»åœ¨æ•°æ®å¤„ç†å‰
- é—®é¢˜æ’æŸ¥è¦ç³»ç»Ÿæ€§ï¼Œä»å‰ç«¯åˆ°æ•°æ®åº“é€å±‚æ£€æŸ¥