---
title: 3ã€æ„å»ºä¸æ‰“åŒ…å®è·µ
---
## ğŸ“š ç›®å½•

1. [æ„å»ºæ‰“åŒ…åŸºç¡€æ¦‚å¿µ](#1-æ„å»ºæ‰“åŒ…åŸºç¡€æ¦‚å¿µ)
2. [WARæ–‡ä»¶æ·±åº¦è§£æ](#2-WARæ–‡ä»¶æ·±åº¦è§£æ)
3. [Mavenæ‰“åŒ…å‘½ä»¤è¯¦è§£](#3-Mavenæ‰“åŒ…å‘½ä»¤è¯¦è§£)
4. [æ„å»ºé…ç½®æ–‡ä»¶ç®¡ç†](#4-æ„å»ºé…ç½®æ–‡ä»¶ç®¡ç†)
5. [ä¾èµ–å†²çªè§£å†³æ–¹æ¡ˆ](#5-ä¾èµ–å†²çªè§£å†³æ–¹æ¡ˆ)
6. [å¤šç¯å¢ƒæ‰“åŒ…ç­–ç•¥](#6-å¤šç¯å¢ƒæ‰“åŒ…ç­–ç•¥)
7. [ç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µ](#7-ç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µ)
8. [å®æˆ˜æ¼”ç»ƒä¸æ€»ç»“](#8-å®æˆ˜æ¼”ç»ƒä¸æ€»ç»“)

---

## 1. ğŸ—ï¸ æ„å»ºæ‰“åŒ…åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ„å»ºå’Œæ‰“åŒ…ï¼Ÿ


> ğŸ’¡ **é€šä¿—ç†è§£**
> 
> æ„å»ºå°±åƒç›–æˆ¿å­ï¼Œæ‰“åŒ…å°±åƒæ¬å®¶ã€‚æˆ‘ä»¬å†™å¥½äº†ä»£ç ï¼ˆå‡†å¤‡å¥½äº†ææ–™ï¼‰ï¼Œéœ€è¦æ„å»ºï¼ˆç›–æˆ¿å­ï¼‰æŠŠæ‰€æœ‰ä¸œè¥¿ç»„è£…èµ·æ¥ï¼Œç„¶åæ‰“åŒ…ï¼ˆæ¬å®¶ï¼‰æŠŠæ•´ä¸ªé¡¹ç›®è£…è¿›ä¸€ä¸ª"ç®±å­"é‡Œï¼Œæ–¹ä¾¿è¿è¾“åˆ°æœåŠ¡å™¨ä¸Šã€‚

**ğŸ”¸ æ„å»ºï¼ˆBuildï¼‰çš„æœ¬è´¨**
```
åŸå§‹çŠ¶æ€ï¼š
â”œâ”€â”€ ğŸ“ src/main/java/     â† Javaæºä»£ç æ–‡ä»¶
â”œâ”€â”€ ğŸ“ src/main/resources/ â† é…ç½®æ–‡ä»¶ã€é™æ€èµ„æº
â””â”€â”€ ğŸ“ src/main/webapp/   â† å‰ç«¯é¡µé¢æ–‡ä»¶

æ„å»ºè¿‡ç¨‹ï¼š
ç¼–è¯‘ â†’ æµ‹è¯• â†’ èµ„æºå¤„ç† â†’ æ–‡ä»¶æ•´åˆ

æœ€ç»ˆäº§ç‰©ï¼š
â””â”€â”€ ğŸ“ target/
    â”œâ”€â”€ classes/          â† ç¼–è¯‘åçš„.classæ–‡ä»¶
    â”œâ”€â”€ test-classes/     â† æµ‹è¯•ç±»
    â””â”€â”€ my-web-app.war    â† æœ€ç»ˆå¯éƒ¨ç½²æ–‡ä»¶
```

**ğŸ”¸ æ‰“åŒ…ï¼ˆPackageï¼‰çš„æ„ä¹‰**

| æ‰“åŒ…å‰çŠ¶æ€ | æ‰“åŒ…åçŠ¶æ€ | å¥½å¤„ |
|------------|------------|------|
| ğŸ“ æ•£ä¹±çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ | ğŸ“¦ å•ä¸ªWARæ–‡ä»¶ | `ä¾¿äºä¼ è¾“` |
| ğŸ”§ éœ€è¦æ‰‹åŠ¨é…ç½®è·¯å¾„ | âš¡ è‡ªåŠ¨è¯†åˆ«ç»“æ„ | `ç®€åŒ–éƒ¨ç½²` |
| â“ ä¸çŸ¥é“ç¼ºå°‘ä»€ä¹ˆä¾èµ– | âœ… åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶ | `å‡å°‘é”™è¯¯` |

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ„å»ºå·¥å…·ï¼Ÿ


**ğŸ¤” æ²¡æœ‰æ„å»ºå·¥å…·çš„ç—›è‹¦**
```
æ‰‹åŠ¨æ“ä½œæµç¨‹ï¼š
1ï¸âƒ£ æ‰‹åŠ¨ç¼–è¯‘æ¯ä¸ªJavaæ–‡ä»¶  â†’ javac *.java
2ï¸âƒ£ æ‰‹åŠ¨å¤åˆ¶é…ç½®æ–‡ä»¶      â†’ cp config/* target/
3ï¸âƒ£ æ‰‹åŠ¨ä¸‹è½½jaråŒ…        â†’ åˆ°å¤„æ‰¾ä¾èµ–åº“
4ï¸âƒ£ æ‰‹åŠ¨è®¾ç½®CLASSPATH    â†’ é…ç½®ä¸€å¤§ä¸²è·¯å¾„
5ï¸âƒ£ æ‰‹åŠ¨æ‰“åŒ…            â†’ jar cvf app.war *

é—®é¢˜ï¼š
âŒ æ­¥éª¤ç¹çï¼Œå®¹æ˜“å‡ºé”™
âŒ å›¢é˜Ÿåä½œå›°éš¾
âŒ ç‰ˆæœ¬ç®¡ç†æ··ä¹±
âŒ é‡å¤åŠ³åŠ¨ï¼Œæ•ˆç‡ä½ä¸‹
```

**âœ¨ ä½¿ç”¨æ„å»ºå·¥å…·çš„ä¼˜åŠ¿**

| åŠŸèƒ½é¢†åŸŸ | **Mavenè§£å†³æ–¹æ¡ˆ** | **å®é™…æ”¶ç›Š** |
|---------|------------------|-------------|
| ğŸ—ï¸ **è‡ªåŠ¨åŒ–æ„å»º** | `ä¸€æ¡å‘½ä»¤å®Œæˆæ‰€æœ‰æ­¥éª¤` | `èŠ‚çœ90%æ—¶é—´` |
| ğŸ“¦ **ä¾èµ–ç®¡ç†** | `è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†jaråŒ…` | `å‘Šåˆ«jaråŒ…åœ°ç‹±` |
| ğŸ”„ **æ ‡å‡†åŒ–æµç¨‹** | `ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„` | `å›¢é˜Ÿåä½œæ— éšœç¢` |
| ğŸ¯ **å¤šç¯å¢ƒæ”¯æŒ** | `ä¸€å¥—ä»£ç ï¼Œå¤šç§é…ç½®` | `éƒ¨ç½²æ›´çµæ´»` |

---

## 2. ğŸ“¦ WARæ–‡ä»¶æ·±åº¦è§£æ


### 2.1 WARæ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ


> ğŸ§  **è®°å¿†å£è¯€**
> 
> *"WARæ–‡ä»¶åƒå¿«é€’ç®±ï¼ŒWebåº”ç”¨å…¨è£…ä¸Šï¼›è§£å‹å°±èƒ½ç›´æ¥ç”¨ï¼ŒTomcatæ”¶è´§ç¬‘å“ˆå“ˆ"*

**WAR = Web Application aRchive**

```
WARæ–‡ä»¶æœ¬è´¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šæ ¼å¼çš„ZIPå‹ç¼©åŒ…    â”‚
â”‚  â””â”€ åŒ…å«å®Œæ•´çš„Webåº”ç”¨ç¨‹åº       â”‚
â”‚     â””â”€ æŒ‰ç…§Java EEæ ‡å‡†ç»„ç»‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 WARæ–‡ä»¶å†…éƒ¨ç»“æ„è¯¦è§£


```
my-web-app.war (è§£å‹åç›®å½•ç»“æ„)
â”‚
â”œâ”€â”€ ğŸ“ META-INF/                    â† å…ƒæ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ MANIFEST.MF             â† æ¸…å•æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ maven/                  â† Mavenç›¸å…³ä¿¡æ¯
â”‚
â”œâ”€â”€ ğŸ“ WEB-INF/                    â† Webåº”ç”¨ç§æœ‰åŒºåŸŸ
â”‚   â”œâ”€â”€ ğŸ“„ web.xml                 â† Webåº”ç”¨é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ classes/                â† ç¼–è¯‘åçš„Javaç±»
â”‚   â”‚   â”œâ”€â”€ com/example/servlet/
â”‚   â”‚   â””â”€â”€ application.properties
â”‚   â””â”€â”€ ğŸ“ lib/                    â† ä¾èµ–çš„jaråŒ…
â”‚       â”œâ”€â”€ spring-core-5.3.jar
â”‚       â””â”€â”€ mysql-connector.jar
â”‚
â”œâ”€â”€ ğŸ“ static/                     â† é™æ€èµ„æº(å¯ç›´æ¥è®¿é—®)
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ images/
â”‚
â”œâ”€â”€ ğŸ“„ index.jsp                   â† é¦–é¡µæ–‡ä»¶
â””â”€â”€ ğŸ“„ error.html                  â† é”™è¯¯é¡µé¢
```

**ğŸ” å…³é”®ç›®å½•è§£æ**

<kbd>WEB-INF</kbd> **ç›®å½•ç‰¹æ®Šæ€§**
> âš ï¸ **é‡è¦æé†’**
> 
> WEB-INFç›®å½•ä¸‹çš„å†…å®¹æ— æ³•é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®ï¼è¿™æ˜¯Java Webçš„å®‰å…¨æœºåˆ¶ã€‚

```
ç”¨æˆ·æ— æ³•è®¿é—®ï¼š
âŒ http://localhost:8080/myapp/WEB-INF/classes/User.class
âŒ http://localhost:8080/myapp/WEB-INF/web.xml

ç”¨æˆ·å¯ä»¥è®¿é—®ï¼š
âœ… http://localhost:8080/myapp/static/style.css
âœ… http://localhost:8080/myapp/index.jsp
```

### 2.3 WAR vs JAR vs EAR å¯¹æ¯”


| æ–‡ä»¶ç±»å‹ | **å…¨ç§°** | **ç”¨é€”** | **åŒ…å«å†…å®¹** | **éƒ¨ç½²ä½ç½®** |
|---------|----------|----------|-------------|-------------|
| ğŸ—‚ï¸ **JAR** | `Java Archive` | `æ™®é€šJavaåº”ç”¨/åº“` | `Javaç±» + èµ„æºæ–‡ä»¶` | `ä»»ä½•Javaç¯å¢ƒ` |
| ğŸŒ **WAR** | `Web Archive` | `Webåº”ç”¨ç¨‹åº` | `Servlet + JSP + é™æ€æ–‡ä»¶` | `WebæœåŠ¡å™¨(Tomcatç­‰)` |
| ğŸ¢ **EAR** | `Enterprise Archive` | `ä¼ä¸šçº§åº”ç”¨` | `å¤šä¸ªWAR + JAR + é…ç½®` | `åº”ç”¨æœåŠ¡å™¨(WebLogicç­‰)` |

---

## 3. âš™ï¸ Mavenæ‰“åŒ…å‘½ä»¤è¯¦è§£


### 3.1 åŸºç¡€æ‰“åŒ…å‘½ä»¤


**ğŸ”¸ æœ€ç®€å•çš„æ‰“åŒ…å‘½ä»¤**
```bash
mvn package
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**
> 
> è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨æ‰§è¡Œï¼šç¼–è¯‘â†’æµ‹è¯•â†’æ‰“åŒ… ä¸‰ä¸ªæ­¥éª¤ã€‚å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œæ‰“åŒ…ä¼šåœæ­¢ã€‚

**ğŸ”¸ å¸¸ç”¨æ‰“åŒ…å‘½ä»¤ç»„åˆ**

| å‘½ä»¤ | **ä½œç”¨** | **ä½¿ç”¨åœºæ™¯** | **æ‰§è¡Œæ—¶é—´** |
|------|---------|-------------|-------------|
| `mvn clean package` | `æ¸…ç†æ—§æ–‡ä»¶ + é‡æ–°æ‰“åŒ…` | `ğŸ’¯ æ¨èæ—¥å¸¸ä½¿ç”¨` | `â±ï¸ ä¸­ç­‰` |
| `mvn package -DskipTests` | `è·³è¿‡æµ‹è¯•ç›´æ¥æ‰“åŒ…` | `ğŸš€ å¿«é€ŸéªŒè¯æ‰“åŒ…` | `â±ï¸ è¾ƒå¿«` |
| `mvn clean package -DskipTests` | `å®Œå…¨æ¸…ç† + å¿«é€Ÿæ‰“åŒ…` | `ğŸ”§ è°ƒè¯•æ‰“åŒ…é—®é¢˜` | `â±ï¸ å¿«é€Ÿ` |
| `mvn clean compile package` | `å¼ºåˆ¶é‡æ–°ç¼–è¯‘æ‰“åŒ…` | `ğŸ› è§£å†³ç¼–è¯‘ç¼“å­˜é—®é¢˜` | `â±ï¸ è¾ƒæ…¢` |

### 3.2 Mavenç”Ÿå‘½å‘¨æœŸè¯¦è§£


```
Mavenæ„å»ºç”Ÿå‘½å‘¨æœŸï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  validate â†’ compile â†’ test â†’ package â†’ verify â†’ install     â”‚
â”‚     â†“         â†“        â†“       â†“        â†“        â†“         â”‚
â”‚   æ£€æŸ¥é¡¹ç›®   ç¼–è¯‘ä»£ç    è¿è¡Œæµ‹è¯•  æ‰“åŒ…æ–‡ä»¶   éªŒè¯åŒ…   å®‰è£…åˆ°æœ¬åœ° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰§è¡Œä»»æ„é˜¶æ®µï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œå‰é¢æ‰€æœ‰é˜¶æ®µï¼
```

**ğŸ¯ å®é™…æ“ä½œç¤ºä¾‹**
```bash
# ğŸ“Œ æ­¥éª¤1ï¼šæ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
mvn clean
è¾“å‡º: [INFO] Deleting target directory

# ğŸ“Œ æ­¥éª¤2ï¼šåªç¼–è¯‘ï¼Œä¸æ‰“åŒ…
mvn compile  
è¾“å‡º: [INFO] Compiling 15 source files to target/classes

# ğŸ“Œ æ­¥éª¤3ï¼šè¿è¡Œæµ‹è¯•
mvn test
è¾“å‡º: [INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0

# ğŸ“Œ æ­¥éª¤4ï¼šæ‰§è¡Œæ‰“åŒ…
mvn package
è¾“å‡º: [INFO] Building war: target/my-web-app-1.0.war
```

### 3.3 æ‰“åŒ…è¿‡ç¨‹é—®é¢˜è¯Šæ–­


**ğŸš¨ å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ**

<details>
<summary>ğŸ” ç¼–è¯‘é”™è¯¯å¤„ç†</summary>

```
é”™è¯¯ä¿¡æ¯ï¼š
[ERROR] Compilation failure: æ‰¾ä¸åˆ°ç¬¦å·

ğŸ”§ è§£å†³æ­¥éª¤ï¼š
1ï¸âƒ£ æ£€æŸ¥Javaç‰ˆæœ¬æ˜¯å¦åŒ¹é…
   mvn -version  # æŸ¥çœ‹Mavenä½¿ç”¨çš„Javaç‰ˆæœ¬

2ï¸âƒ£ æ£€æŸ¥pom.xmlä¸­çš„Javaç‰ˆæœ¬é…ç½®
   <maven.compiler.source>8</maven.compiler.source>
   <maven.compiler.target>8</maven.compiler.target>

3ï¸âƒ£ å¼ºåˆ¶é‡æ–°ç¼–è¯‘
   mvn clean compile -X  # -Xå‚æ•°æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
```
</details>

<details>
<summary>ğŸ” æµ‹è¯•å¤±è´¥å¤„ç†</summary>

```
é”™è¯¯ä¿¡æ¯ï¼š
[ERROR] Tests run: 3, Failures: 1, Errors: 0

ğŸ”§ è§£å†³é€‰æ‹©ï¼š
æ–¹æ¡ˆA (æ¨è)ï¼šä¿®å¤æµ‹è¯•
1ï¸âƒ£ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼štarget/surefire-reports/
2ï¸âƒ£ ä¿®å¤å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹
3ï¸âƒ£ é‡æ–°æ‰§è¡Œï¼šmvn test

æ–¹æ¡ˆB (ä¸´æ—¶)ï¼šè·³è¿‡æµ‹è¯•
mvn package -DskipTests
âš ï¸ æ³¨æ„ï¼šåªåœ¨å¼€å‘è°ƒè¯•æ—¶ä½¿ç”¨ï¼
```
</details>

---

## 4. ğŸ“‹ æ„å»ºé…ç½®æ–‡ä»¶ç®¡ç†


### 4.1 pom.xml æ ¸å¿ƒé…ç½®è§£æ


> ğŸ“ **æ–°æ‰‹å‹å¥½è§£é‡Š**
> 
> pom.xmlå°±åƒé¡¹ç›®çš„"èº«ä»½è¯"ï¼Œè®°å½•äº†é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ã€ä¾èµ–å…³ç³»å’Œæ„å»ºè§„åˆ™ã€‚

**ğŸ”¸ åŸºç¡€ä¿¡æ¯é…ç½®**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0">
    
    <!-- é¡¹ç›®åŸºæœ¬ä¿¡æ¯ -->
    <groupId>com.example</groupId>          <!-- å…¬å¸åŸŸåå€’å†™ -->
    <artifactId>my-web-app</artifactId>     <!-- é¡¹ç›®åç§° -->
    <version>1.0-SNAPSHOT</version>         <!-- ç‰ˆæœ¬å· -->
    <packaging>war</packaging>              <!-- æ‰“åŒ…æ ¼å¼ï¼šwarè¡¨ç¤ºWebåº”ç”¨ -->
    
    <!-- é¡¹ç›®æè¿°ä¿¡æ¯ -->
    <name>æˆ‘çš„ç¬¬ä¸€ä¸ªWebåº”ç”¨</name>
    <description>è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ JavaWebçš„ç¤ºä¾‹é¡¹ç›®</description>
    
</project>
```

**ğŸ”¸ å…³é”®æ„å»ºé…ç½®**

| é…ç½®é¡¹ | **ä½œç”¨è¯´æ˜** | **å¸¸ç”¨å€¼** | **æ–°æ‰‹å»ºè®®** |
|--------|-------------|-----------|-------------|
| `<packaging>` | `å†³å®šæ‰“åŒ…æ ¼å¼` | `jar/war/pom` | `Webé¡¹ç›®ç”¨war` |
| `<maven.compiler.source>` | `æºç Javaç‰ˆæœ¬` | `8/11/17` | `ä¸å¼€å‘ç¯å¢ƒä¸€è‡´` |
| `<maven.compiler.target>` | `ç¼–è¯‘ç›®æ ‡ç‰ˆæœ¬` | `8/11/17` | `ä¸sourceç›¸åŒ` |
| `<project.build.sourceEncoding>` | `æºç ç¼–ç ` | `UTF-8` | `å¿…é¡»è®¾ç½®UTF-8` |

### 4.2 Webåº”ç”¨ç‰¹æ®Šé…ç½®


**ğŸ”¸ Maven War Plugin é…ç½®**
```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>3.2.3</version>
            <configuration>
                <!-- æŒ‡å®šweb.xmlä½ç½® -->
                <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
                
                <!-- æˆ–è€…å¯ç”¨æ— web.xmlæ¨¡å¼(Spring Bootå¸¸ç”¨) -->
                <failOnMissingWebXml>false</failOnMissingWebXml>
                
                <!-- æ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶ -->
                <packagingExcludes>WEB-INF/lib/junit-*.jar</packagingExcludes>
                
                <!-- è‡ªå®šä¹‰WARæ–‡ä»¶å -->
                <warName>my-awesome-app</warName>
            </configuration>
        </plugin>
    </plugins>
</build>
```

**ğŸ”¸ èµ„æºæ–‡ä»¶å¤„ç†é…ç½®**
```xml
<build>
    <resources>
        <!-- å¤„ç†æ ‡å‡†èµ„æºç›®å½• -->
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>  <!-- å¯ç”¨å±æ€§æ›¿æ¢ -->
        </resource>
        
        <!-- å¤„ç†é¢å¤–çš„é…ç½®æ–‡ä»¶ -->
        <resource>
            <directory>src/main/config</directory>
            <targetPath>WEB-INF/classes</targetPath>
        </resource>
    </resources>
</build>
```

### 4.3 æ„å»ºè¿‡ç¨‹è‡ªå®šä¹‰


**ğŸ”¸ è‡ªå®šä¹‰æ„å»ºæ­¥éª¤**
```xml
<build>
    <plugins>
        <!-- å‰ç«¯èµ„æºæ„å»ºæ’ä»¶ -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>3.1.0</version>
            <executions>
                <execution>
                    <id>npm-install</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <executable>npm</executable>
                        <arguments>
                            <argument>install</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

---

## 5. ğŸ› ï¸ ä¾èµ–å†²çªè§£å†³æ–¹æ¡ˆ


### 5.1 ä»€ä¹ˆæ˜¯ä¾èµ–å†²çªï¼Ÿ


> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**
> 
> æƒ³è±¡ä½ è¦åšä¸€é“èœï¼Œéœ€è¦ç”¨ç›ã€‚ä½ ä»æœ‹å‹Aé‚£é‡Œå€Ÿäº†ä¸€åŒ…ç»†ç›ï¼Œä»æœ‹å‹Bé‚£é‡Œå€Ÿäº†ä¸€åŒ…ç²—ç›ã€‚ç°åœ¨å¨æˆ¿é‡Œæœ‰ä¸¤åŒ…ä¸åŒçš„ç›ï¼Œä½ ä¸çŸ¥é“è¯¥ç”¨å“ªä¸ªï¼Œè¿™å°±æ˜¯"ä¾èµ–å†²çª"ã€‚

**ğŸ”¸ å†²çªäº§ç”Ÿçš„åŸå› **
```
é¡¹ç›®ä¾èµ–å…³ç³»å›¾ï¼š
æˆ‘çš„é¡¹ç›®
â”œâ”€â”€ Spring Framework 5.3.0
â”‚   â””â”€â”€ commons-logging 1.2.0
â””â”€â”€ Apache HttpClient 4.5.13  
    â””â”€â”€ commons-logging 1.1.3

å†²çªï¼šåŒä¸€ä¸ªåº“çš„ä¸åŒç‰ˆæœ¬ï¼
commons-logging: 1.2.0 vs 1.1.3 â“è¯¥ç”¨å“ªä¸ªï¼Ÿ
```

### 5.2 å†²çªæ£€æµ‹æ–¹æ³•


**ğŸ”¸ ä½¿ç”¨Mavenå‘½ä»¤åˆ†æ**
```bash
# ğŸ“Š æŸ¥çœ‹å®Œæ•´ä¾èµ–æ ‘
mvn dependency:tree

# ğŸ” æŸ¥æ‰¾ç‰¹å®šåº“çš„å†²çª
mvn dependency:tree -Dincludes=commons-logging

# ğŸ’¡ åˆ†æä¾èµ–å†²çª
mvn dependency:analyze-duplicate
```

**ğŸ”¸ ä¾èµ–æ ‘è¾“å‡ºç¤ºä¾‹**
```
[INFO] com.example:my-web-app:war:1.0-SNAPSHOT
[INFO] +- org.springframework:spring-core:jar:5.3.0:compile
[INFO] |  \- commons-logging:commons-logging:jar:1.2.0:compile
[INFO] \- org.apache.httpcomponents:httpclient:jar:4.5.13:compile
[INFO]    \- commons-logging:commons-logging:jar:1.1.3:compile

âš ï¸ å‘ç°å†²çªï¼šcommons-loggingå‡ºç°äº†ä¸¤ä¸ªç‰ˆæœ¬ï¼
```

### 5.3 å†²çªè§£å†³ç­–ç•¥


**ğŸ¯ ç­–ç•¥ä¸€ï¼šä½¿ç”¨exclusionsæ’é™¤å†²çª**

```xml
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.5.13</version>
    
    <!-- æ’é™¤å†²çªçš„ä¾èµ– -->
    <exclusions>
        <exclusion>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
        </exclusion>
    </exclusions>
</dependency>
```

**ğŸ¯ ç­–ç•¥äºŒï¼šæ˜¾å¼å£°æ˜ç‰ˆæœ¬ï¼ˆæ¨èï¼‰**

```xml
<!-- åœ¨æœ€å‰é¢æ˜ç¡®å£°æ˜è¦ä½¿ç”¨çš„ç‰ˆæœ¬ -->
<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.2.0</version>  <!-- Mavenä¼šä¼˜å…ˆä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬ -->
</dependency>

<!-- å…¶ä»–ä¾èµ–ç…§å¸¸å£°æ˜ -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>5.3.0</version>
</dependency>
```

**ğŸ¯ ç­–ç•¥ä¸‰ï¼šä½¿ç”¨dependencyManagement**

```xml
<dependencyManagement>
    <dependencies>
        <!-- åœ¨è¿™é‡Œç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬ï¼Œå­æ¨¡å—ä¼šç»§æ‰¿ -->
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.2.0</version>
        </dependency>
    </dependencies>
</dependencyManagement>
```

### 5.4 å¸¸è§å†²çªæ¡ˆä¾‹


**ğŸ“š Spring + Logging å†²çªè§£å†³**

```xml
<!-- é—®é¢˜ï¼šSpringä½¿ç”¨commons-loggingï¼Œä½†æˆ‘ä»¬æƒ³ç”¨logback -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>5.3.0</version>
    <exclusions>
        <!-- æ’é™¤Springè‡ªå¸¦çš„æ—¥å¿— -->
        <exclusion>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<!-- ä½¿ç”¨SLF4Jæ¡¥æ¥ -->
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jcl-over-slf4j</artifactId>
    <version>1.7.32</version>
</dependency>

<!-- ä½¿ç”¨logbackä½œä¸ºå®é™…çš„æ—¥å¿—å®ç° -->
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>1.2.6</version>
</dependency>
```

---

## 6. ğŸŒ å¤šç¯å¢ƒæ‰“åŒ…ç­–ç•¥


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šç¯å¢ƒï¼Ÿ


> ğŸ­ **åœºæ™¯æƒ³è±¡**
> 
> ä½ å¼€å‘äº†ä¸€ä¸ªç½‘ç«™ï¼š
> - å¼€å‘æ—¶ï¼šè¿æ¥æœ¬åœ°æ•°æ®åº“ (localhost:3306)
> - æµ‹è¯•æ—¶ï¼šè¿æ¥æµ‹è¯•æ•°æ®åº“ (test.company.com:3306)  
> - ç”Ÿäº§æ—¶ï¼šè¿æ¥æ­£å¼æ•°æ®åº“ (prod.company.com:3306)
> 
> åŒæ ·çš„ä»£ç ï¼Œä¸åŒçš„é…ç½®ï¼Œè¿™å°±éœ€è¦å¤šç¯å¢ƒæ”¯æŒï¼

**ğŸ”¸ ç¯å¢ƒå·®å¼‚å¯¹æ¯”**

| ç¯å¢ƒç±»å‹ | **æ•°æ®åº“åœ°å€** | **æ—¥å¿—çº§åˆ«** | **ç¼“å­˜é…ç½®** | **ç‰¹ç‚¹** |
|---------|---------------|-------------|-------------|---------|
| ğŸ› ï¸ **å¼€å‘(dev)** | `localhost:3306` | `DEBUG` | `å…³é—­` | `ä¾¿äºè°ƒè¯•` |
| ğŸ§ª **æµ‹è¯•(test)** | `test-db:3306` | `INFO` | `å¼€å¯` | `æ¥è¿‘ç”Ÿäº§` |
| ğŸš€ **ç”Ÿäº§(prod)** | `prod-db:3306` | `WARN` | `å¼€å¯` | `æ€§èƒ½ä¼˜å…ˆ` |

### 6.2 Maven Profile é…ç½®


**ğŸ”¸ åœ¨pom.xmlä¸­å®šä¹‰å¤šç¯å¢ƒ**

```xml
<profiles>
    <!-- å¼€å‘ç¯å¢ƒ -->
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>  <!-- é»˜è®¤æ¿€æ´» -->
        </activation>
        <properties>
            <db.host>localhost</db.host>
            <db.port>3306</db.port>
            <log.level>DEBUG</log.level>
            <redis.enabled>false</redis.enabled>
        </properties>
    </profile>
    
    <!-- æµ‹è¯•ç¯å¢ƒ -->
    <profile>
        <id>test</id>
        <properties>
            <db.host>test-mysql.company.com</db.host>
            <db.port>3306</db.port>
            <log.level>INFO</log.level>
            <redis.enabled>true</redis.enabled>
        </properties>
    </profile>
    
    <!-- ç”Ÿäº§ç¯å¢ƒ -->
    <profile>
        <id>prod</id>
        <properties>
            <db.host>prod-mysql.company.com</db.host>
            <db.port>3306</db.port>
            <log.level>WARN</log.level>
            <redis.enabled>true</redis.enabled>
        </properties>
    </profile>
</profiles>
```

**ğŸ”¸ é…ç½®æ–‡ä»¶æ¨¡æ¿åŒ–**

åœ¨ `src/main/resources/application.properties` ä¸­ï¼š
```properties
# æ•°æ®åº“é…ç½®ï¼ˆä½¿ç”¨å ä½ç¬¦ï¼‰
spring.datasource.url=jdbc:mysql://${db.host}:${db.port}/myapp
spring.datasource.username=root
spring.datasource.password=123456

# æ—¥å¿—é…ç½®
logging.level.com.example=${log.level}

# Redisé…ç½®
spring.redis.enabled=${redis.enabled}
```

### 6.3 å¤šç¯å¢ƒæ‰“åŒ…å®è·µ


**ğŸ”¸ ä¸åŒç¯å¢ƒçš„æ‰“åŒ…å‘½ä»¤**

```bash
# ğŸ› ï¸ æ‰“åŒ…å¼€å‘ç¯å¢ƒ(é»˜è®¤)
mvn clean package

# ğŸ§ª æ‰“åŒ…æµ‹è¯•ç¯å¢ƒ
mvn clean package -Ptest

# ğŸš€ æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒ  
mvn clean package -Pprod

# ğŸ“¦ åŒæ—¶æ¿€æ´»å¤šä¸ªprofile
mvn clean package -Ptest,docker
```

**ğŸ”¸ æ‰“åŒ…éªŒè¯**

```bash
# æ‰“åŒ…å®ŒæˆåéªŒè¯é…ç½®
unzip -q target/my-web-app.war -d temp/
cat temp/WEB-INF/classes/application.properties

# æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„é…ç½®å€¼
grep "jdbc:mysql://prod-mysql" temp/WEB-INF/classes/application.properties
```

### 6.4 é«˜çº§å¤šç¯å¢ƒç­–ç•¥


**ğŸ”¸ ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒèµ„æºæ–‡ä»¶**

```
src/main/resources/
â”œâ”€â”€ application.properties              â† é€šç”¨é…ç½®
â”œâ”€â”€ profiles/
â”‚   â”œâ”€â”€ application-dev.properties      â† å¼€å‘ç¯å¢ƒä¸“ç”¨
â”‚   â”œâ”€â”€ application-test.properties     â† æµ‹è¯•ç¯å¢ƒä¸“ç”¨
â”‚   â””â”€â”€ application-prod.properties     â† ç”Ÿäº§ç¯å¢ƒä¸“ç”¨
â””â”€â”€ static/
```

**ğŸ”¸ Profileä¸­æŒ‡å®šèµ„æºæ–‡ä»¶**

```xml
<profile>
    <id>prod</id>
    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <excludes>
                    <exclude>profiles/application-dev.properties</exclude>
                    <exclude>profiles/application-test.properties</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/resources/profiles</directory>
                <includes>
                    <include>application-prod.properties</include>
                </includes>
                <targetPath>.</targetPath>
            </resource>
        </resources>
    </build>
</profile>
```

---

## 7. ğŸ·ï¸ ç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µ


### 7.1 ç‰ˆæœ¬å·å‘½åè§„èŒƒ


> ğŸ“‹ **ç‰ˆæœ¬å·å°±åƒäº§å“çš„èº«ä»½è¯å·ç **
> 
> é€šè¿‡ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬èƒ½çŸ¥é“è¿™æ˜¯ç¬¬å‡ ä»£äº§å“ï¼Œæœ‰ä»€ä¹ˆæ–°åŠŸèƒ½ï¼Œæ˜¯å¦ç¨³å®šã€‚

**ğŸ”¸ è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer)**

```
ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·[-é¢„å‘å¸ƒæ ‡è¯†]
ç¤ºä¾‹ï¼š    1.2.3-SNAPSHOT

ç‰ˆæœ¬å·å«ä¹‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸»ç‰ˆæœ¬å· â”‚ æ¬¡ç‰ˆæœ¬å· â”‚ ä¿®è®¢å·   â”‚ é¢„å‘å¸ƒæ ‡è¯†    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    1    â”‚    2    â”‚    3    â”‚  -SNAPSHOT   â”‚
â”‚  é‡å¤§æ›´æ–° â”‚  åŠŸèƒ½æ›´æ–° â”‚  bugä¿®å¤ â”‚   å¼€å‘ç‰ˆæœ¬   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ ç‰ˆæœ¬å·å‡çº§è§„åˆ™**

| å˜æ›´ç±»å‹ | **ç‰ˆæœ¬å·å˜åŒ–** | **ç¤ºä¾‹** | **è¯´æ˜** |
|---------|---------------|---------|---------|
| ğŸ”§ **Bugä¿®å¤** | `ä¿®è®¢å·+1` | `1.2.3 â†’ 1.2.4` | `ä¸å½±å“API` |
| â­ **æ–°å¢åŠŸèƒ½** | `æ¬¡ç‰ˆæœ¬å·+1` | `1.2.3 â†’ 1.3.0` | `å‘ä¸‹å…¼å®¹` |
| ğŸ’¥ **é‡å¤§æ”¹å˜** | `ä¸»ç‰ˆæœ¬å·+1` | `1.2.3 â†’ 2.0.0` | `å¯èƒ½ä¸å…¼å®¹` |
| ğŸš§ **å¼€å‘ç‰ˆæœ¬** | `åŠ -SNAPSHOT` | `1.2.3-SNAPSHOT` | `ä¸ç¨³å®šç‰ˆæœ¬` |

### 7.2 Mavenç‰ˆæœ¬ç®¡ç†


**ğŸ”¸ SNAPSHOT vs RELEASE ç‰ˆæœ¬**

```
SNAPSHOTç‰ˆæœ¬ç‰¹ç‚¹ï¼š
âœ… å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨
âœ… æ¯æ¬¡æ„å»ºéƒ½å¯èƒ½ä¸åŒ
âœ… Mavenä¼šè‡ªåŠ¨æ£€æŸ¥æ›´æ–°
âŒ ä¸èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒ

RELEASEç‰ˆæœ¬ç‰¹ç‚¹ï¼š
âœ… æ­£å¼å‘å¸ƒçš„ç¨³å®šç‰ˆæœ¬
âœ… å†…å®¹ä¸ä¼šå†æ”¹å˜
âœ… å¯ä»¥å®‰å…¨ç”¨äºç”Ÿäº§
âœ… ä¾¿äºé—®é¢˜è¿½æº¯
```

**ğŸ”¸ ç‰ˆæœ¬å‘å¸ƒæµç¨‹**

```bash
# ğŸ“‹ æ­¥éª¤1ï¼šå¼€å‘é˜¶æ®µ - ä½¿ç”¨SNAPSHOTç‰ˆæœ¬
<version>1.2.0-SNAPSHOT</version>

# ğŸ“‹ æ­¥éª¤2ï¼šå‡†å¤‡å‘å¸ƒ - å»é™¤SNAPSHOT
<version>1.2.0</version>
mvn clean package  # æ„å»ºæ­£å¼ç‰ˆæœ¬

# ğŸ“‹ æ­¥éª¤3ï¼šå‘å¸ƒå - å‡çº§åˆ°ä¸‹ä¸€ä¸ªSNAPSHOTç‰ˆæœ¬
<version>1.2.1-SNAPSHOT</version>  # æˆ–è€… 1.3.0-SNAPSHOT
```

### 7.3 è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†


**ğŸ”¸ ä½¿ç”¨Maven Release Plugin**

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>3.0.0-M4</version>
    <configuration>
        <tagNameFormat>v@{project.version}</tagNameFormat>
        <autoVersionSubmodules>true</autoVersionSubmodules>
    </configuration>
</plugin>
```

**ğŸ”¸ è‡ªåŠ¨åŒ–å‘å¸ƒå‘½ä»¤**

```bash
# ğŸš€ ä¸€é”®å‘å¸ƒæµç¨‹
mvn release:prepare    # å‡†å¤‡å‘å¸ƒï¼šä¿®æ”¹ç‰ˆæœ¬å·ã€æ‰“æ ‡ç­¾
mvn release:perform    # æ‰§è¡Œå‘å¸ƒï¼šæ„å»ºã€éƒ¨ç½²

# ğŸ”„ å‘å¸ƒè¿‡ç¨‹è¯¦è§£
1ï¸âƒ£ æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰æœªæäº¤çš„ä¿®æ”¹
2ï¸âƒ£ å°†SNAPSHOTç‰ˆæœ¬æ”¹ä¸ºæ­£å¼ç‰ˆæœ¬
3ï¸âƒ£ æ„å»ºå’Œæµ‹è¯•é¡¹ç›®
4ï¸âƒ£ æäº¤ç‰ˆæœ¬æ›´æ”¹å¹¶æ‰“æ ‡ç­¾
5ï¸âƒ£ å‡çº§åˆ°ä¸‹ä¸€ä¸ªSNAPSHOTç‰ˆæœ¬
6ï¸âƒ£ æ¨é€åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
```

### 7.4 ç‰ˆæœ¬å†²çªå¤„ç†


**ğŸ”¸ ä¾èµ–ç‰ˆæœ¬é”å®š**

```xml
<dependencyManagement>
    <dependencies>
        <!-- é”å®šSpringç‰ˆæœ¬ï¼Œé¿å…å­æ¨¡å—å†²çª -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-bom</artifactId>
            <version>5.3.0</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

**ğŸ”¸ ç‰ˆæœ¬å±æ€§ç®¡ç†**

```xml
<properties>
    <!-- ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å· -->
    <spring.version>5.3.0</spring.version>
    <junit.version>5.8.2</junit.version>
    <mysql.version>8.0.26</mysql.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>  <!-- ä½¿ç”¨å±æ€§å¼•ç”¨ -->
    </dependency>
</dependencies>
```

---

## 8. ğŸ¯ å®æˆ˜æ¼”ç»ƒä¸æ€»ç»“


### 8.1 å®Œæ•´é¡¹ç›®æ‰“åŒ…å®æˆ˜


**ğŸ”¸ é¡¹ç›®åœºæ™¯è®¾å®š**
```
é¡¹ç›®ï¼šåœ¨çº¿ä¹¦åº—ç®¡ç†ç³»ç»Ÿ
æŠ€æœ¯æ ˆï¼šSpring + MyBatis + MySQL
éƒ¨ç½²ç¯å¢ƒï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ä¸‰å¥—ç¯å¢ƒ
```

**ğŸ”¸ å®Œæ•´çš„pom.xmlé…ç½®**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0">
    
    <!-- é¡¹ç›®åŸºæœ¬ä¿¡æ¯ -->
    <groupId>com.bookstore</groupId>
    <artifactId>online-bookstore</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>war</packaging>
    
    <!-- ç‰ˆæœ¬å±æ€§ç»Ÿä¸€ç®¡ç† -->
    <properties>
        <maven.compiler.source>8</maven.compiler.source>
        <maven.compiler.target>8</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        
        <spring.version>5.3.21</spring.version>
        <mysql.version>8.0.30</mysql.version>
        <junit.version>5.8.2</junit.version>
    </properties>
    
    <!-- å¤šç¯å¢ƒé…ç½® -->
    <profiles>
        <profile>
            <id>dev</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <db.host>localhost</db.host>
                <db.name>bookstore_dev</db.name>
                <log.level>DEBUG</log.level>
            </properties>
        </profile>
        
        <profile>
            <id>prod</id>
            <properties>
                <db.host>prod-db.bookstore.com</db.host>
                <db.name>bookstore</db.name>
                <log.level>WARN</log.level>
            </properties>
        </profile>
    </profiles>
    
    <!-- ä¾èµ–ç®¡ç† -->
    <dependencies>
        <!-- Springæ¡†æ¶ -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        
        <!-- æ•°æ®åº“ç›¸å…³ -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>${mysql.version}</version>
        </dependency>
    </dependencies>
    
    <!-- æ„å»ºé…ç½® -->
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>3.2.3</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
        </plugins>
    </build>
    
</project>
```

### 8.2 æ‰“åŒ…éƒ¨ç½²å®Œæ•´æµç¨‹


**ğŸ”¸ å¼€å‘ç¯å¢ƒæ‰“åŒ…éƒ¨ç½²**

```bash
# ğŸ“ æ­¥éª¤1ï¼šä»£ç å¼€å‘å®Œæˆï¼Œå‡†å¤‡æ‰“åŒ…
mvn clean compile    # å…ˆç¼–è¯‘æ£€æŸ¥è¯­æ³•é”™è¯¯

# ğŸ“ æ­¥éª¤2ï¼šè¿è¡Œæµ‹è¯•ç¡®ä¿ä»£ç è´¨é‡
mvn test             # è¿è¡Œå•å…ƒæµ‹è¯•

# ğŸ“ æ­¥éª¤3ï¼šæ‰“åŒ…åº”ç”¨
mvn clean package    # æ¸…ç†å¹¶æ‰“åŒ…

# ğŸ“ æ­¥éª¤4ï¼šéªŒè¯æ‰“åŒ…ç»“æœ
ls -la target/       # æŸ¥çœ‹ç”Ÿæˆçš„WARæ–‡ä»¶
unzip -l target/online-bookstore-1.0.0-SNAPSHOT.war | head -20

# ğŸ“ æ­¥éª¤5ï¼šéƒ¨ç½²åˆ°Tomcat
cp target/online-bookstore-1.0.0-SNAPSHOT.war $TOMCAT_HOME/webapps/
```

**ğŸ”¸ ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…éƒ¨ç½²**

```bash
# ğŸš€ ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…
mvn clean package -Pprod -DskipTests

# ğŸ” éªŒè¯ç”Ÿäº§é…ç½®
unzip -q target/online-bookstore-1.0.0-SNAPSHOT.war -d temp/
grep "prod-db.bookstore.com" temp/WEB-INF/classes/application.properties
```

### 8.3 å¸¸è§é—®é¢˜æ•…éšœæ’é™¤


**ğŸš¨ é—®é¢˜1ï¼šæ‰“åŒ…æ—¶æç¤ºæ‰¾ä¸åˆ°web.xml**

```
é”™è¯¯ä¿¡æ¯ï¼š
[ERROR] Error assembling WAR: webxml attribute is required

ğŸ”§ è§£å†³æ–¹æ¡ˆï¼š
æ–¹æ¡ˆAï¼šåœ¨pom.xmlä¸­ç¦ç”¨web.xmlæ£€æŸ¥
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
        <failOnMissingWebXml>false</failOnMissingWebXml>
    </configuration>
</plugin>

æ–¹æ¡ˆBï¼šåˆ›å»ºæœ€å°çš„web.xmlæ–‡ä»¶
åœ¨src/main/webapp/WEB-INF/ç›®å½•ä¸‹åˆ›å»ºweb.xmlï¼š
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.1">
    <display-name>Online Bookstore</display-name>
</web-app>
```

**ğŸš¨ é—®é¢˜2ï¼šä¾èµ–ä¸‹è½½å¤±è´¥**

```
é”™è¯¯ä¿¡æ¯ï¼š
[ERROR] Could not resolve dependencies for project

ğŸ”§ è§£å†³æ–¹æ¡ˆï¼š
1ï¸âƒ£ æ£€æŸ¥ç½‘ç»œè¿æ¥
   ping repo1.maven.org

2ï¸âƒ£ æ¸…ç†æœ¬åœ°ä»“åº“
   rm -rf ~/.m2/repository/com/example  # åˆ é™¤æœ‰é—®é¢˜çš„ä¾èµ–
   mvn clean package                    # é‡æ–°ä¸‹è½½

3ï¸âƒ£ ä½¿ç”¨å›½å†…é•œåƒï¼ˆæ¨èï¼‰
   åœ¨settings.xmlä¸­é…ç½®é˜¿é‡Œäº‘é•œåƒï¼š
   <mirror>
       <id>aliyunmaven</id>
       <name>é˜¿é‡Œäº‘å…¬å…±ä»“åº“</name>
       <url>https://maven.aliyun.com/repository/public</url>
       <mirrorOf>*</mirrorOf>
   </mirror>
```

### 8.4 æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“


**ğŸ¯ å¿…é¡»æŒæ¡çš„æ¦‚å¿µ**

```
ğŸ”¸ WARæ–‡ä»¶ï¼šWebåº”ç”¨çš„æ ‡å‡†æ‰“åŒ…æ ¼å¼
ğŸ”¸ Mavenç”Ÿå‘½å‘¨æœŸï¼švalidateâ†’compileâ†’testâ†’packageâ†’install
ğŸ”¸ ä¾èµ–å†²çªï¼šåŒä¸€ä¸ªåº“çš„ä¸åŒç‰ˆæœ¬å…±å­˜é—®é¢˜
ğŸ”¸ å¤šç¯å¢ƒæ‰“åŒ…ï¼šä½¿ç”¨Profileæ”¯æŒä¸åŒéƒ¨ç½²ç¯å¢ƒ
ğŸ”¸ ç‰ˆæœ¬ç®¡ç†ï¼šè¯­ä¹‰åŒ–ç‰ˆæœ¬å· + SNAPSHOT/RELEASEæœºåˆ¶
```

**ğŸ”§ å®ç”¨æŠ€èƒ½æ¸…å•**

- [x] èƒ½å¤Ÿä½¿ç”¨ `mvn clean package` è¿›è¡ŒåŸºç¡€æ‰“åŒ…
- [x] èƒ½å¤Ÿè§£è¯»WARæ–‡ä»¶å†…éƒ¨ç»“æ„
- [x] èƒ½å¤Ÿé…ç½®pom.xmlå®ç°å¤šç¯å¢ƒæ‰“åŒ…
- [x] èƒ½å¤Ÿæ’æŸ¥å’Œè§£å†³å¸¸è§çš„ä¾èµ–å†²çª
- [x] èƒ½å¤Ÿè®¾ç½®åˆç†çš„ç‰ˆæœ¬å·ç®¡ç†ç­–ç•¥
- [x] èƒ½å¤Ÿå¤„ç†æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å¸¸è§é”™è¯¯

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**

> ğŸ§  **å­¦ä¹ å£è¯€**
> 
> *"clean packageå¸¸ç”¨å‘½ä»¤ï¼ŒWARæ–‡ä»¶ç»“æ„è¦æ¸…æ™°ï¼›*
> *ä¾èµ–å†²çªç”¨exclusionï¼Œå¤šç¯å¢ƒé profileåˆ†ï¼›*
> *ç‰ˆæœ¬ç®¡ç†è¦è§„èŒƒï¼ŒSNAPSHOTå¼€å‘RELEASEäº§"*

### 8.5 è¿›é˜¶å­¦ä¹ è·¯å¾„


**ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®**

```
åŸºç¡€å·©å›º (å½“å‰é˜¶æ®µ)ï¼š
â”œâ”€â”€ âœ… ç†Ÿç»ƒä½¿ç”¨MavenåŸºç¡€å‘½ä»¤
â”œâ”€â”€ âœ… ç†è§£WARæ–‡ä»¶ç»“æ„
â””â”€â”€ âœ… æŒæ¡å¤šç¯å¢ƒæ‰“åŒ…

è¿›é˜¶æŠ€èƒ½ï¼š
â”œâ”€â”€ ğŸ”„ æŒç»­é›†æˆ/æŒç»­éƒ¨ç½² (CI/CD)
â”œâ”€â”€ ğŸ³ Dockerå®¹å™¨åŒ–æ‰“åŒ…éƒ¨ç½²  
â”œâ”€â”€ â˜ï¸ äº‘å¹³å°è‡ªåŠ¨åŒ–éƒ¨ç½²
â””â”€â”€ ğŸ”§ å¾®æœåŠ¡æ¶æ„ä¸‹çš„æ‰“åŒ…ç­–ç•¥

ä¸“ä¸šæŠ€èƒ½ï¼š
â”œâ”€â”€ ğŸ“Š æ„å»ºæ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ ğŸ›¡ï¸ å®‰å…¨æ‰«æé›†æˆ
â””â”€â”€ ğŸ“ˆ æ„å»ºè¿‡ç¨‹ç›‘æ§
```

---

**ğŸ‰ æ­å–œï¼** ä½ å·²ç»æŒæ¡äº†JavaWebé¡¹ç›®æ„å»ºä¸æ‰“åŒ…çš„æ ¸å¿ƒçŸ¥è¯†ã€‚è®°ä½ï¼Œå®è·µæ˜¯æœ€å¥½çš„è€å¸ˆï¼Œå¤šåŠ¨æ‰‹æ“ä½œæ‰èƒ½çœŸæ­£æŒæ¡è¿™äº›æŠ€èƒ½ï¼

> ğŸ’ª **åŠ æ²¹ï¼** 
> 
> æ¯ä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜éƒ½æ˜¯ä»è¿™äº›åŸºç¡€æŠ€èƒ½å¼€å§‹çš„ã€‚åšæŒç»ƒä¹ ï¼Œä½ ä¸€å®šèƒ½æˆä¸ºJavaWebå¼€å‘é«˜æ‰‹ï¼