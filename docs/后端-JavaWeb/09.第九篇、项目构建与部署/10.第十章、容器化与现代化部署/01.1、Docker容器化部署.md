---
title: 1ã€Dockerå®¹å™¨åŒ–éƒ¨ç½²
---
## ğŸ“š ç›®å½•

1. [DockeråŸºç¡€æ¦‚å¿µç†è§£](#1-DockeråŸºç¡€æ¦‚å¿µç†è§£)
2. [JavaWebé¡¹ç›®å®¹å™¨åŒ–å‡†å¤‡](#2-JavaWebé¡¹ç›®å®¹å™¨åŒ–å‡†å¤‡)
3. [Dockerfileç¼–å†™è¯¦è§£](#3-Dockerfileç¼–å†™è¯¦è§£)
4. [é•œåƒæ„å»ºä¸ä¼˜åŒ–](#4-é•œåƒæ„å»ºä¸ä¼˜åŒ–)
5. [å®¹å™¨è¿è¡Œé…ç½®](#5-å®¹å™¨è¿è¡Œé…ç½®)
6. [æ•°æ®æŒä¹…åŒ–ç®¡ç†](#6-æ•°æ®æŒä¹…åŒ–ç®¡ç†)
7. [å®æˆ˜éƒ¨ç½²æ¡ˆä¾‹](#7-å®æˆ˜éƒ¨ç½²æ¡ˆä¾‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ³ DockeråŸºç¡€æ¦‚å¿µç†è§£


### 1.1 ä»€ä¹ˆæ˜¯Dockerï¼Ÿç”¨äººè¯è¯´å°±æ˜¯...


**ğŸ”¸ ç®€å•ç†è§£Docker**
æƒ³è±¡ä¸€ä¸‹æ¬å®¶çš„åœºæ™¯ï¼šä¼ ç»Ÿæ–¹å¼å°±åƒæŠŠæ‰€æœ‰å®¶å…·ä¸€ä»¶ä»¶æ¬è¿ï¼Œå®¹æ˜“ä¸¢å¤±æŸåï¼›è€ŒDockerå°±åƒé›†è£…ç®±ï¼ŒæŠŠæ‰€æœ‰ä¸œè¥¿æ‰“åŒ…å¥½ï¼Œåˆ°å“ªéƒ½èƒ½å®Œæ•´è¿è¡Œã€‚

```
ä¼ ç»Ÿéƒ¨ç½²ï¼š
å¼€å‘ç¯å¢ƒ â‰  æµ‹è¯•ç¯å¢ƒ â‰  ç”Ÿäº§ç¯å¢ƒ
"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘" ğŸ˜…

Dockeréƒ¨ç½²ï¼š
å¼€å‘ç¯å¢ƒ = æµ‹è¯•ç¯å¢ƒ = ç”Ÿäº§ç¯å¢ƒ  
"åœ¨å®¹å™¨é‡Œéƒ½èƒ½è·‘" ğŸ˜
```

### 1.2 Dockeræ ¸å¿ƒæ¦‚å¿µ


**ğŸ  å®¹å™¨ vs è™šæ‹Ÿæœºå¯¹æ¯”**

```
è™šæ‹Ÿæœºæ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨ç¨‹åºA      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å®Œæ•´æ“ä½œç³»ç»Ÿ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è™šæ‹ŸåŒ–å±‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å®¿ä¸»æ“ä½œç³»ç»Ÿ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç‰¹ç‚¹ï¼šèµ„æºæ¶ˆè€—å¤§ï¼Œå¯åŠ¨æ…¢

Dockerå®¹å™¨æ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨ç¨‹åºA      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Dockerå¼•æ“     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å®¿ä¸»æ“ä½œç³»ç»Ÿ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç‰¹ç‚¹ï¼šè½»é‡çº§ï¼Œå¯åŠ¨å¿«
```

**ğŸ“¦ ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ**

| æ¦‚å¿µ | **é€šä¿—ç†è§£** | **å®é™…ä½œç”¨** | **ç”Ÿæ´»ç±»æ¯”** |
|------|-------------|-------------|-------------|
| **é•œåƒ(Image)** | `è½¯ä»¶å®‰è£…åŒ…` | `åº”ç”¨ç¨‹åºçš„æ¨¡æ¿` | `èœè°±ï¼šæœ‰äº†èœè°±å°±èƒ½åšèœ` |
| **å®¹å™¨(Container)** | `è¿è¡Œä¸­çš„ç¨‹åº` | `é•œåƒçš„è¿è¡Œå®ä¾‹` | `åšå¥½çš„èœï¼šæŒ‰èœè°±åšå‡ºæ¥çš„å®é™…èœå“` |
| **ä»“åº“(Registry)** | `è½¯ä»¶å•†åº—` | `å­˜å‚¨å’Œåˆ†äº«é•œåƒçš„åœ°æ–¹` | `èœè°±ä¹¦åº—ï¼šæ”¶é›†å„ç§èœè°±çš„åœ°æ–¹` |

### 1.3 ä¸ºä»€ä¹ˆJavaWebé¡¹ç›®éœ€è¦Dockerï¼Ÿ


**â“ è§£å†³çš„å®é™…é—®é¢˜**

```
ğŸ”¸ ç¯å¢ƒä¸€è‡´æ€§é—®é¢˜
å¼€å‘ï¼šWindows + JDK8 + Tomcat9
æµ‹è¯•ï¼šLinux + JDK11 + Tomcat10  
ç”Ÿäº§ï¼šCentOS + JDK8 + Tomcat9
ç»“æœï¼šå„ç§å¥‡æ€ªé—®é¢˜ ğŸ˜µ

Dockerè§£å†³ï¼š
æ‰€æœ‰ç¯å¢ƒï¼šDockerå®¹å™¨ + ç›¸åŒé•œåƒ
ç»“æœï¼šå®Œå…¨ä¸€è‡´è¿è¡Œ ğŸ˜Š

ğŸ”¸ éƒ¨ç½²å¤æ‚åº¦é—®é¢˜
ä¼ ç»Ÿæ–¹å¼ï¼š
1. å®‰è£…JDK â†’ é…ç½®ç¯å¢ƒå˜é‡
2. å®‰è£…Tomcat â†’ é…ç½®ç«¯å£
3. å®‰è£…æ•°æ®åº“ â†’ åˆ›å»ºç”¨æˆ·
4. éƒ¨ç½²åº”ç”¨ â†’ å„ç§è°ƒè¯•
...ï¼ˆ10å¤šä¸ªæ­¥éª¤ï¼‰

Dockeræ–¹å¼ï¼š
1. docker run your-app
å®Œæˆï¼ğŸ‰
```

---

## 2. ğŸš€ JavaWebé¡¹ç›®å®¹å™¨åŒ–å‡†å¤‡


### 2.1 é¡¹ç›®ç»“æ„æ£€æŸ¥


**ğŸ“ æ ‡å‡†JavaWebé¡¹ç›®ç»“æ„**
```
my-javaweb-app/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/          # Javaæºç 
â”‚       â”œâ”€â”€ resources/     # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ webapp/        # Webèµ„æº
â”œâ”€â”€ target/                # ç¼–è¯‘è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ my-app.war         # æ‰“åŒ…åçš„WARæ–‡ä»¶
â”œâ”€â”€ pom.xml               # Mavené…ç½®æ–‡ä»¶
â””â”€â”€ Dockerfile            # Dockeræ„å»ºæ–‡ä»¶ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºçš„ï¼‰
```

### 2.2 æ„å»ºå·¥å…·é€‰æ‹©


**ğŸ”§ Maven vs Gradle**

```
ğŸ“Š é€‰æ‹©å»ºè®®ï¼š
Maven: â­â­â­â­â­ 
â€¢ å­¦ä¹ æˆæœ¬ä½ï¼Œæ–‡æ¡£ä¸°å¯Œ
â€¢ Spring Bootå®˜æ–¹æ¨è
â€¢ ç¤¾åŒºæ”¯æŒå¥½

Gradle: â­â­â­
â€¢ æ„å»ºé€Ÿåº¦å¿«  
â€¢ é…ç½®çµæ´»
â€¢ å­¦ä¹ æ›²çº¿é™¡å³­
```

**ğŸ’¡ Mavenæ‰“åŒ…å‘½ä»¤**
```bash
# æ¸…ç†å¹¶æ‰“åŒ…é¡¹ç›®
mvn clean package

# è·³è¿‡æµ‹è¯•æ‰“åŒ…ï¼ˆå¼€å‘é˜¶æ®µå¸¸ç”¨ï¼‰
mvn clean package -DskipTests
```

### 2.3 åŸºç¡€é•œåƒé€‰æ‹©ç­–ç•¥


**ğŸ¯ Javaåº”ç”¨é•œåƒé€‰æ‹©æŒ‡å—**

| é•œåƒç±»å‹ | **å¤§å°** | **å¯åŠ¨é€Ÿåº¦** | **é€‚ç”¨åœºæ™¯** | **æ¨èåº¦** |
|---------|---------|-------------|-------------|-----------|
| `openjdk:8-jdk` | `å¤§(500MB+)` | `æ…¢` | `å¼€å‘è°ƒè¯•` | â­â­ |
| `openjdk:8-jre` | `ä¸­(200MB+)` | `ä¸­` | `ç”Ÿäº§ç¯å¢ƒ` | â­â­â­â­ |
| `openjdk:8-jre-alpine` | `å°(80MB+)` | `å¿«` | `èµ„æºå—é™ç¯å¢ƒ` | â­â­â­â­â­ |
| `amazoncorretto:8` | `ä¸­(180MB+)` | `ä¸­` | `AWSç¯å¢ƒ` | â­â­â­â­ |

**ğŸ”¸ Alpine Linuxçš„ä¼˜åŠ¿**
```
æ™®é€šLinuxé•œåƒï¼šåŸºäºUbuntu/CentOSï¼Œä½“ç§¯å¤§
Alpine Linuxï¼šä¸“ä¸ºå®¹å™¨è®¾è®¡ï¼Œä½“ç§¯å°ï¼Œå®‰å…¨æ€§é«˜

ä½“ç§¯å¯¹æ¯”ï¼š
ubuntu:18.04     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 64MB
alpine:3.15      â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 5MB
```

---

## 3. ğŸ“ Dockerfileç¼–å†™è¯¦è§£


### 3.1 DockerfileåŸºæœ¬ç»“æ„


**ğŸ—ï¸ Dockerfileå°±åƒè£…ä¿®å›¾çº¸**
```dockerfile
# 1. é€‰æ‹©åŸºç¡€ç¯å¢ƒï¼ˆé€‰æˆ¿å­ï¼‰
FROM openjdk:8-jre-alpine

# 2. è®¾ç½®å·¥ä½œç›®å½•ï¼ˆè§„åˆ’ç©ºé—´ï¼‰
WORKDIR /app

# 3. å¤åˆ¶æ–‡ä»¶ï¼ˆæ¬å®¶å…·ï¼‰
COPY target/my-app.war app.war

# 4. æš´éœ²ç«¯å£ï¼ˆå¼€é—¨ï¼‰
EXPOSE 8080

# 5. å¯åŠ¨åº”ç”¨ï¼ˆå…¥ä½ï¼‰
CMD ["java", "-jar", "app.war"]
```

### 3.2 å¸¸ç”¨æŒ‡ä»¤è¯¦è§£


**ğŸ“‹ æ ¸å¿ƒæŒ‡ä»¤è¯´æ˜**

**ğŸ”¸ FROM - é€‰æ‹©åŸºç¡€é•œåƒ**
```dockerfile
# åŸºæœ¬ç”¨æ³•
FROM openjdk:8-jre-alpine

# æŒ‡å®šæ ‡ç­¾ï¼ˆæ¨èï¼‰
FROM openjdk:8-jre-alpine AS builder

# å¤šé˜¶æ®µæ„å»ºä¸­çš„å¼•ç”¨
FROM builder
```

**ğŸ”¸ WORKDIR - è®¾ç½®å·¥ä½œç›®å½•**
```dockerfile
# è®¾ç½®å·¥ä½œç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰
WORKDIR /app

# ç›¸å½“äºæ‰§è¡Œäº†
# mkdir -p /app
# cd /app
```

**ğŸ”¸ COPY vs ADD - æ–‡ä»¶å¤åˆ¶**
```dockerfile
# COPYï¼šç®€å•æ–‡ä»¶å¤åˆ¶ï¼ˆæ¨èï¼‰
COPY target/app.war /app/app.war
COPY config/ /app/config/

# ADDï¼šåŠŸèƒ½æ›´å¼ºä½†å®¹æ˜“å‡ºé—®é¢˜ï¼ˆä¸æ¨èï¼‰
ADD target/app.war /app/app.war    # å¯ä»¥ä½†æ²¡å¿…è¦
ADD http://example.com/file.tar.gz /app/  # ä¼šè‡ªåŠ¨ä¸‹è½½è§£å‹
```

ğŸ’¡ **è®°å¿†æŠ€å·§**ï¼š90%çš„æƒ…å†µç”¨COPYå°±å¤Ÿäº†ï¼ŒADDå®¹æ˜“è¸©å‘

**ğŸ”¸ RUN - æ‰§è¡Œå‘½ä»¤**
```dockerfile
# å•æ¡å‘½ä»¤
RUN echo "Hello Docker"

# å¤šæ¡å‘½ä»¤åˆå¹¶ï¼ˆå‡å°‘å±‚æ•°ï¼Œæ¨èï¼‰
RUN apk add --no-cache curl \
    && rm -rf /var/cache/apk/*

# æ¢è¡Œå†™æ³•ï¼ˆä¾¿äºé˜…è¯»ï¼‰
RUN apk add --no-cache \
        curl \
        wget \
    && rm -rf /var/cache/apk/*
```

### 3.3 JavaWebé¡¹ç›®å®é™…Dockerfileæ¡ˆä¾‹


**ğŸ¯ Spring Booté¡¹ç›®Dockerfile**
```dockerfile
# é€‰æ‹©è½»é‡çº§JREåŸºç¡€é•œåƒ
FROM openjdk:8-jre-alpine

# é•œåƒå…ƒä¿¡æ¯ï¼ˆå¯é€‰ä½†æ¨èï¼‰
LABEL maintainer="your-email@example.com"
LABEL description="My JavaWeb Application"

# åˆ›å»ºåº”ç”¨ç”¨æˆ·ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
RUN addgroup -g 1000 appgroup && \
    adduser -D -s /bin/sh -u 1000 -G appgroup appuser

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶JARæ–‡ä»¶
COPY target/my-spring-boot-app.jar app.jar

# æ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…
RUN chown appuser:appgroup app.jar

# åˆ‡æ¢åˆ°érootç”¨æˆ·
USER appuser

# æš´éœ²ç«¯å£
EXPOSE 8080

# è®¾ç½®JVMå‚æ•°å’Œå¯åŠ¨åº”ç”¨
CMD ["java", "-Xmx512m", "-Xms256m", "-jar", "app.jar"]
```

**ğŸ¯ ä¼ ç»ŸWaråŒ…éƒ¨ç½²Dockerfile**
```dockerfile
# ä½¿ç”¨TomcatåŸºç¡€é•œåƒ
FROM tomcat:9-jre8-alpine

# ç§»é™¤é»˜è®¤åº”ç”¨
RUN rm -rf /usr/local/tomcat/webapps/*

# å¤åˆ¶waråŒ…åˆ°webappsç›®å½•
COPY target/my-web-app.war /usr/local/tomcat/webapps/ROOT.war

# å¤åˆ¶é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰
COPY config/server.xml /usr/local/tomcat/conf/server.xml

# æš´éœ²ç«¯å£
EXPOSE 8080

# å¯åŠ¨Tomcat
CMD ["catalina.sh", "run"]
```

### 3.4 å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–


**ğŸš€ ä»€ä¹ˆæ˜¯å¤šé˜¶æ®µæ„å»ºï¼Ÿ**
```
ä¼ ç»Ÿæ–¹å¼é—®é¢˜ï¼š
æœ€ç»ˆé•œåƒåŒ…å«ï¼šæºä»£ç  + ç¼–è¯‘å·¥å…· + è¿è¡Œç¯å¢ƒ
ç»“æœï¼šé•œåƒå¾ˆå¤§ï¼Œä¸å®‰å…¨

å¤šé˜¶æ®µæ„å»ºï¼š
é˜¶æ®µ1ï¼šç¼–è¯‘é˜¶æ®µï¼ˆåŒ…å«æºç ã€Mavenç­‰ï¼‰
é˜¶æ®µ2ï¼šè¿è¡Œé˜¶æ®µï¼ˆåªåŒ…å«JARæ–‡ä»¶å’ŒJREï¼‰
ç»“æœï¼šé•œåƒå°ï¼Œæ›´å®‰å…¨
```

**ğŸ”§ å¤šé˜¶æ®µæ„å»ºç¤ºä¾‹**
```dockerfile
# ============= ç¼–è¯‘é˜¶æ®µ =============
FROM maven:3.8-openjdk-8-alpine AS builder

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å…ˆå¤åˆ¶pom.xmlï¼ˆåˆ©ç”¨Dockerç¼“å­˜ï¼‰
COPY pom.xml .

# ä¸‹è½½ä¾èµ–ï¼ˆè¿™ä¸€å±‚ä¼šè¢«ç¼“å­˜ï¼‰
RUN mvn dependency:go-offline -B

# å¤åˆ¶æºä»£ç 
COPY src ./src

# ç¼–è¯‘æ‰“åŒ…
RUN mvn clean package -DskipTests

# ============= è¿è¡Œé˜¶æ®µ =============
FROM openjdk:8-jre-alpine

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# ä»ç¼–è¯‘é˜¶æ®µå¤åˆ¶JARæ–‡ä»¶
COPY --from=builder /app/target/my-app.jar app.jar

# æš´éœ²ç«¯å£
EXPOSE 8080

# å¯åŠ¨åº”ç”¨
CMD ["java", "-jar", "app.jar"]
```

**âœ¨ å¤šé˜¶æ®µæ„å»ºçš„å¥½å¤„**
```
é•œåƒå¤§å°å¯¹æ¯”ï¼š
å•é˜¶æ®µæ„å»ºï¼š600MBï¼ˆåŒ…å«Mavenã€æºç ç­‰ï¼‰
å¤šé˜¶æ®µæ„å»ºï¼š120MBï¼ˆåªåŒ…å«JREå’ŒJARï¼‰

å®‰å…¨æ€§æå‡ï¼š
â€¢ ç”Ÿäº§é•œåƒä¸åŒ…å«æºä»£ç 
â€¢ ä¸åŒ…å«æ„å»ºå·¥å…·
â€¢ æ”»å‡»é¢æ›´å°
```

---

## 4. ğŸ› ï¸ é•œåƒæ„å»ºä¸ä¼˜åŒ–


### 4.1 åŸºæœ¬æ„å»ºå‘½ä»¤


**ğŸ”¨ é•œåƒæ„å»ºæ­¥éª¤**
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/your-project

# 2. åŸºæœ¬æ„å»ºå‘½ä»¤
docker build -t my-javaweb-app .

# 3. æŒ‡å®šæ ‡ç­¾ç‰ˆæœ¬
docker build -t my-javaweb-app:1.0.0 .

# 4. æŒ‡å®šDockerfileè·¯å¾„
docker build -f docker/Dockerfile -t my-app .
```

**ğŸ“Š æ„å»ºè¿‡ç¨‹è§£è¯»**
```
Step 1/6 : FROM openjdk:8-jre-alpine
 ---> ä¸‹è½½åŸºç¡€é•œåƒ
Step 2/6 : WORKDIR /app  
 ---> åˆ›å»ºå·¥ä½œç›®å½•
Step 3/6 : COPY target/app.jar app.jar
 ---> å¤åˆ¶åº”ç”¨æ–‡ä»¶
Step 4/6 : EXPOSE 8080
 ---> å£°æ˜ç«¯å£
Step 5/6 : CMD ["java", "-jar", "app.jar"]
 ---> è®¾ç½®å¯åŠ¨å‘½ä»¤
Successfully built abc123def456
Successfully tagged my-javaweb-app:latest
```

### 4.2 æ„å»ºä¼˜åŒ–æŠ€å·§


**âš¡ åˆ©ç”¨æ„å»ºç¼“å­˜**

Dockeræ„å»ºæ—¶ä¼šé€å±‚æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜ï¼Œå¦‚æœè¯¥å±‚æ²¡æœ‰å˜åŒ–å°±ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚

```dockerfile
# âŒ ä½æ•ˆå†™æ³•ï¼šä¾èµ–å˜åŒ–ä¼šé‡æ–°ä¸‹è½½
COPY . /app
RUN mvn clean package

# âœ… é«˜æ•ˆå†™æ³•ï¼šä¼˜å…ˆå¤åˆ¶ä¾èµ–é…ç½®
COPY pom.xml /app/
RUN mvn dependency:go-offline
COPY src /app/src
RUN mvn clean package -DskipTests
```

**ğŸ“ˆ ä¼˜åŒ–åŸç†å›¾è§£**
```
ä½æ•ˆæ„å»ºæµç¨‹ï¼š
ä»£ç å˜æ›´ â†’ é‡æ–°COPY â†’ é‡æ–°ä¸‹è½½ä¾èµ– â†’ é‡æ–°ç¼–è¯‘
è€—æ—¶ï¼š5-10åˆ†é’Ÿ â°

é«˜æ•ˆæ„å»ºæµç¨‹ï¼š
ä»£ç å˜æ›´ â†’ ä½¿ç”¨ä¾èµ–ç¼“å­˜ â†’ åªé‡æ–°ç¼–è¯‘
è€—æ—¶ï¼š1-2åˆ†é’Ÿ âš¡
```

**ğŸ”§ .dockerignoreæ–‡ä»¶ä¼˜åŒ–**
```dockerignore
# æ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼ŒåŠ é€Ÿæ„å»º
.git/
.gitignore
README.md
Dockerfile
.dockerignore

# æ’é™¤æ„å»ºäº§ç‰©
target/
node_modules/
*.log

# æ’é™¤IDEæ–‡ä»¶
.idea/
.vscode/
*.iml
```

### 4.3 é•œåƒä½“ç§¯ä¼˜åŒ–


**ğŸ“¦ ä½“ç§¯ä¼˜åŒ–ç­–ç•¥å¯¹æ¯”**

| ä¼˜åŒ–æ–¹æ³• | **æ•ˆæœ** | **éš¾åº¦** | **è¯´æ˜** |
|---------|---------|---------|----------|
| `ä½¿ç”¨Alpineé•œåƒ` | â­â­â­â­â­ | â­ | `æœ€ç®€å•æœ‰æ•ˆ` |
| `å¤šé˜¶æ®µæ„å»º` | â­â­â­â­ | â­â­ | `å‡å°‘æ„å»ºå·¥å…·` |
| `ç²¾ç®€ä¾èµ–` | â­â­â­ | â­â­â­ | `éœ€è¦ä»”ç»†åˆ†æ` |
| `å‹ç¼©å±‚æ•°` | â­â­ | â­ | `åˆå¹¶RUNæŒ‡ä»¤` |

**ğŸ¯ å®é™…ä¼˜åŒ–æ¡ˆä¾‹**
```dockerfile
# âŒ ä½“ç§¯å¤§çš„å†™æ³•
FROM openjdk:8-jdk
COPY target/app.jar app.jar
RUN apt-get update
RUN apt-get install -y curl
RUN apt-get install -y wget
CMD ["java", "-jar", "app.jar"]

# âœ… ä½“ç§¯å°çš„å†™æ³•  
FROM openjdk:8-jre-alpine
RUN apk add --no-cache curl wget && \
    rm -rf /var/cache/apk/*
COPY target/app.jar app.jar
CMD ["java", "-jar", "app.jar"]
```

**ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”**
```
ä¼˜åŒ–å‰é•œåƒå¤§å°ï¼š
openjdk:8-jdk        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 540MB
+ åº”ç”¨æ–‡ä»¶          â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 50MB
+ ç³»ç»Ÿå·¥å…·          â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30MB
æ€»è®¡ï¼š620MB

ä¼˜åŒ–åé•œåƒå¤§å°ï¼š
openjdk:8-jre-alpine â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 80MB
+ åº”ç”¨æ–‡ä»¶          â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 50MB
+ å¿…è¦å·¥å…·          â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 10MB
æ€»è®¡ï¼š140MB

ä¼˜åŒ–æ•ˆæœï¼šä½“ç§¯å‡å°‘77% ğŸ‰
```

---

## 5. ğŸƒ å®¹å™¨è¿è¡Œé…ç½®


### 5.1 åŸºæœ¬è¿è¡Œå‘½ä»¤


**ğŸš€ å¯åŠ¨ä½ çš„ç¬¬ä¸€ä¸ªå®¹å™¨**
```bash
# æœ€ç®€å•çš„å¯åŠ¨æ–¹å¼
docker run my-javaweb-app

# åå°è¿è¡Œï¼ˆæ¨èï¼‰
docker run -d my-javaweb-app

# æŒ‡å®šå®¹å™¨åç§°
docker run -d --name my-app my-javaweb-app

# ç«¯å£æ˜ å°„ï¼ˆé‡è¦ï¼ï¼‰
docker run -d -p 8080:8080 --name my-app my-javaweb-app
```

**ğŸ” è¿è¡ŒçŠ¶æ€æ£€æŸ¥**
```bash
# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps

# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰
docker ps -a

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs my-app

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker logs -f my-app
```

### 5.2 ç«¯å£æ˜ å°„è¯¦è§£


**ğŸŒ ç«¯å£æ˜ å°„åŸç†å›¾**
```
å¤–éƒ¨è®¿é—®æµç¨‹ï¼š
æµè§ˆå™¨:8080 â†’ Dockerä¸»æœº:8080 â†’ å®¹å™¨å†…éƒ¨:8080 â†’ JavaWebåº”ç”¨

æ˜ å°„å…³ç³»ï¼š
docker run -p [ä¸»æœºç«¯å£]:[å®¹å™¨ç«¯å£] image

ç¤ºä¾‹åœºæ™¯ï¼š
docker run -p 8080:8080    # æ ‡å‡†æ˜ å°„
docker run -p 80:8080      # ä¸»æœº80ç«¯å£æ˜ å°„åˆ°å®¹å™¨8080
docker run -p 9090:8080    # é¿å…ç«¯å£å†²çª
```

**ğŸ”§ å¤šç«¯å£æ˜ å°„ç¤ºä¾‹**
```bash
# Webåº”ç”¨ + æ•°æ®åº“
docker run -d \
  -p 8080:8080 \
  -p 3306:3306 \
  --name full-stack-app \
  my-javaweb-app

# å¤šä¸ªWebåº”ç”¨
docker run -d -p 8080:8080 --name app1 my-app:v1
docker run -d -p 8081:8080 --name app2 my-app:v2
docker run -d -p 8082:8080 --name app3 my-app:v3
```

### 5.3 ç¯å¢ƒå˜é‡é…ç½®


**ğŸ”§ é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®åº”ç”¨**

JavaWebåº”ç”¨ç»å¸¸éœ€è¦æ ¹æ®ç¯å¢ƒè°ƒæ•´é…ç½®ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡æ˜¯æœ€ä½³å®è·µï¼š

```bash
# è®¾ç½®å•ä¸ªç¯å¢ƒå˜é‡
docker run -d \
  -e DATABASE_URL=jdbc:mysql://localhost:3306/mydb \
  -p 8080:8080 \
  my-javaweb-app

# è®¾ç½®å¤šä¸ªç¯å¢ƒå˜é‡
docker run -d \
  -e DATABASE_URL=jdbc:mysql://db:3306/mydb \
  -e DATABASE_USERNAME=root \
  -e DATABASE_PASSWORD=secret123 \
  -e SPRING_PROFILES_ACTIVE=production \
  -p 8080:8080 \
  my-javaweb-app
```

**ğŸ“ ç¯å¢ƒå˜é‡æ–‡ä»¶ç®¡ç†**
```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
echo "DATABASE_URL=jdbc:mysql://db:3306/mydb
DATABASE_USERNAME=root  
DATABASE_PASSWORD=secret123
SPRING_PROFILES_ACTIVE=production" > app.env

# ä½¿ç”¨ç¯å¢ƒå˜é‡æ–‡ä»¶
docker run -d --env-file app.env -p 8080:8080 my-javaweb-app
```

### 5.4 èµ„æºé™åˆ¶è®¾ç½®


**âš¡ å†…å­˜å’ŒCPUé™åˆ¶**
```bash
# é™åˆ¶å†…å­˜ä½¿ç”¨
docker run -d \
  --memory="512m" \
  -p 8080:8080 \
  my-javaweb-app

# é™åˆ¶CPUä½¿ç”¨
docker run -d \
  --cpus="0.5" \
  --memory="512m" \
  -p 8080:8080 \
  my-javaweb-app

# ç»„åˆé™åˆ¶ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
docker run -d \
  --name my-app \
  --memory="1g" \
  --cpus="1.0" \
  --restart=unless-stopped \
  -p 8080:8080 \
  my-javaweb-app
```

**ğŸ’¡ èµ„æºé™åˆ¶å»ºè®®**
```
å¼€å‘ç¯å¢ƒï¼š
å†…å­˜ï¼š256MB-512MB
CPUï¼š0.5æ ¸å¿ƒ

æµ‹è¯•ç¯å¢ƒï¼š  
å†…å­˜ï¼š512MB-1GB
CPUï¼š1æ ¸å¿ƒ

ç”Ÿäº§ç¯å¢ƒï¼š
å†…å­˜ï¼š1GB-2GB  
CPUï¼š1-2æ ¸å¿ƒ
```

---

## 6. ğŸ’¾ æ•°æ®æŒä¹…åŒ–ç®¡ç†


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®æŒä¹…åŒ–ï¼Ÿ


**â“ å®¹å™¨æ•°æ®çš„é—®é¢˜**
```
å®¹å™¨ç‰¹ç‚¹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    åº”ç”¨æ•°æ®      â”‚  â† å®¹å™¨åˆ é™¤åä¸¢å¤±ï¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    åº”ç”¨ç¨‹åº      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    åŸºç¡€ç³»ç»Ÿ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®é™…åœºæ™¯ï¼š
ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ â†’ å­˜å‚¨åœ¨å®¹å™¨å†…
å®¹å™¨é‡å¯/æ›´æ–° â†’ æ–‡ä»¶ä¸¢å¤± ğŸ˜±
æ•°æ®åº“æ•°æ® â†’ å­˜å‚¨åœ¨å®¹å™¨å†…  
å®¹å™¨åˆ é™¤ â†’ æ•°æ®å…¨éƒ¨ä¸¢å¤± ğŸ˜±
```

### 6.2 æ•°æ®å·(Volume)ç®¡ç†


**ğŸ“¦ Dockeræ•°æ®å·ç±»å‹**

```
æ•°æ®å·ç±»å‹å¯¹æ¯”ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åŒ¿åå·ï¼šDockerè‡ªåŠ¨ç®¡ç†        â”‚
â”‚    ä¼˜ç‚¹ï¼šç®€å•  ç¼ºç‚¹ï¼šéš¾ä»¥ç®¡ç†     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ 2. å‘½åå·ï¼šç”¨æˆ·æŒ‡å®šåç§°          â”‚
â”‚    ä¼˜ç‚¹ï¼šæ˜“ç®¡ç†  ç¼ºç‚¹ï¼šä½ç½®å›ºå®š   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. ç»‘å®šæŒ‚è½½ï¼šæŒ‚è½½ä¸»æœºç›®å½•        â”‚
â”‚    ä¼˜ç‚¹ï¼šçµæ´»  ç¼ºç‚¹ï¼šè·¯å¾„ä¾èµ–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ å‘½åå·ä½¿ç”¨ç¤ºä¾‹**
```bash
# 1. åˆ›å»ºæ•°æ®å·
docker volume create app-data

# 2. æŸ¥çœ‹æ•°æ®å·
docker volume ls

# 3. ä½¿ç”¨æ•°æ®å·å¯åŠ¨å®¹å™¨
docker run -d \
  -v app-data:/app/data \
  -p 8080:8080 \
  my-javaweb-app

# 4. æŸ¥çœ‹æ•°æ®å·è¯¦ç»†ä¿¡æ¯
docker volume inspect app-data
```

### 6.3 ç»‘å®šæŒ‚è½½å®æˆ˜


**ğŸ—‚ï¸ JavaWebå¸¸è§æŒ‚è½½åœºæ™¯**

**æ–‡ä»¶ä¸Šä¼ ç›®å½•æŒ‚è½½**
```bash
# åˆ›å»ºä¸»æœºç›®å½•
mkdir -p /data/uploads

# æŒ‚è½½ä¸Šä¼ ç›®å½•
docker run -d \
  -v /data/uploads:/app/uploads \
  -p 8080:8080 \
  my-javaweb-app
```

**é…ç½®æ–‡ä»¶æŒ‚è½½**
```bash
# æŒ‚è½½é…ç½®æ–‡ä»¶
docker run -d \
  -v /path/to/config/application.yml:/app/config/application.yml \
  -v /data/logs:/app/logs \
  -p 8080:8080 \
  my-javaweb-app
```

**æ•°æ®åº“æ•°æ®æŒ‚è½½**
```bash
# MySQLæ•°æ®ç›®å½•æŒ‚è½½
docker run -d \
  --name mysql-db \
  -v /data/mysql:/var/lib/mysql \
  -e MYSQL_ROOT_PASSWORD=root123 \
  -p 3306:3306 \
  mysql:8.0
```

### 6.4 æ•°æ®å¤‡ä»½ä¸æ¢å¤


**ğŸ’¾ æ•°æ®å·å¤‡ä»½ç­–ç•¥**
```bash
# 1. åˆ›å»ºå¤‡ä»½å®¹å™¨
docker run --rm \
  -v app-data:/data \
  -v $(pwd):/backup \
  alpine \
  tar czf /backup/app-data-backup-$(date +%Y%m%d).tar.gz -C /data .

# 2. æ¢å¤æ•°æ®
docker run --rm \
  -v app-data:/data \
  -v $(pwd):/backup \
  alpine \
  tar xzf /backup/app-data-backup-20231215.tar.gz -C /data
```

**ğŸ”„ å®Œæ•´å¤‡ä»½è„šæœ¬ç¤ºä¾‹**
```bash
#!/bin/bash
# backup-app-data.sh

# è®¾ç½®å˜é‡
BACKUP_DIR="/backup/docker-volumes"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½åº”ç”¨æ•°æ®å·
docker run --rm \
  -v app-data:/data:ro \
  -v $BACKUP_DIR:/backup \
  alpine \
  tar czf /backup/app-data-$DATE.tar.gz -C /data .

echo "å¤‡ä»½å®Œæˆ: app-data-$DATE.tar.gz"
```

---

## 7. ğŸ¯ å®æˆ˜éƒ¨ç½²æ¡ˆä¾‹


### 7.1 Spring Bootåº”ç”¨å®Œæ•´éƒ¨ç½²


**ğŸ“± é¡¹ç›®åœºæ™¯ï¼šä¸ªäººåšå®¢ç³»ç»Ÿ**
- Spring Boot 2.7.x
- MySQL 8.0æ•°æ®åº“
- æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- æ—¥å¿—è®°å½•

**ğŸ—ï¸ é¡¹ç›®ç›®å½•ç»“æ„**
```
blog-system/
â”œâ”€â”€ src/                    # æºä»£ç 
â”œâ”€â”€ target/
â”‚   â””â”€â”€ blog-system.jar   # æ„å»ºäº§ç‰©
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile         # åº”ç”¨é•œåƒ
â”‚   â””â”€â”€ docker-compose.yml # å®Œæ•´éƒ¨ç½²é…ç½®
â”œâ”€â”€ config/
â”‚   â””â”€â”€ application-prod.yml # ç”Ÿäº§é…ç½®
â””â”€â”€ data/                  # æ•°æ®ç›®å½•
    â”œâ”€â”€ uploads/           # æ–‡ä»¶ä¸Šä¼ 
    â”œâ”€â”€ logs/             # æ—¥å¿—æ–‡ä»¶
    â””â”€â”€ mysql/            # æ•°æ®åº“æ•°æ®
```

**ğŸ³ Dockerfileç¼–å†™**
```dockerfile
# å¤šé˜¶æ®µæ„å»º
FROM maven:3.8-openjdk-8-alpine AS builder
WORKDIR /app
COPY pom.xml .
RUN mvn dependency:go-offline -B
COPY src ./src  
RUN mvn clean package -DskipTests

FROM openjdk:8-jre-alpine
WORKDIR /app

# å®‰è£…å¿…è¦å·¥å…·
RUN apk add --no-cache tzdata && \
    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \
    echo "Asia/Shanghai" > /etc/timezone

# åˆ›å»ºåº”ç”¨ç”¨æˆ·
RUN addgroup -g 1000 appgroup && \
    adduser -D -s /bin/sh -u 1000 -G appgroup appuser

# å¤åˆ¶åº”ç”¨æ–‡ä»¶
COPY --from=builder /app/target/blog-system.jar app.jar
COPY config/application-prod.yml /app/config/

# åˆ›å»ºæ•°æ®ç›®å½•
RUN mkdir -p /app/uploads /app/logs && \
    chown -R appuser:appgroup /app

USER appuser

EXPOSE 8080

# å¯åŠ¨é…ç½®
ENV JAVA_OPTS="-Xmx512m -Xms256m"
ENV SPRING_PROFILES_ACTIVE=prod

CMD java $JAVA_OPTS -jar app.jar
```

**ğŸš€ docker-compose.ymlé…ç½®**
```yaml
version: '3.8'

services:
  # æ•°æ®åº“æœåŠ¡
  mysql:
    image: mysql:8.0
    container_name: blog-mysql
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: blog_db
      MYSQL_USER: blog_user
      MYSQL_PASSWORD: blog_pass
    volumes:
      - ./data/mysql:/var/lib/mysql
    ports:
      - "3306:3306"
    restart: unless-stopped

  # Webåº”ç”¨æœåŠ¡
  web:
    build: .
    container_name: blog-web
    environment:
      DATABASE_URL: jdbc:mysql://mysql:3306/blog_db
      DATABASE_USERNAME: blog_user
      DATABASE_PASSWORD: blog_pass
    volumes:
      - ./data/uploads:/app/uploads
      - ./data/logs:/app/logs
    ports:
      - "8080:8080"
    depends_on:
      - mysql
    restart: unless-stopped
```

### 7.2 éƒ¨ç½²æ‰§è¡Œæ­¥éª¤


**ğŸ“ å®Œæ•´éƒ¨ç½²æµç¨‹**

**ç¬¬1æ­¥ï¼šå‡†å¤‡é¡¹ç›®**
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd blog-system

# 2. ç¼–è¯‘é¡¹ç›®
mvn clean package -DskipTests

# 3. åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p data/{mysql,uploads,logs}
chmod 755 data/*
```

**ç¬¬2æ­¥ï¼šæ„å»ºé•œåƒ**
```bash
# æ„å»ºåº”ç”¨é•œåƒ
docker build -t blog-system:1.0.0 .

# éªŒè¯é•œåƒæ„å»ºæˆåŠŸ
docker images | grep blog-system
```

**ç¬¬3æ­¥ï¼šå¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨å®Œæ•´æœåŠ¡æ ˆ
docker-compose up -d

# æŸ¥çœ‹å¯åŠ¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f web
```

**ç¬¬4æ­¥ï¼šéªŒè¯éƒ¨ç½²**
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8080/health

# æŸ¥çœ‹æ•°æ®åº“è¿æ¥
docker-compose exec web curl http://localhost:8080/actuator/health
```

### 7.3 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¼˜åŒ–


**ğŸ”’ å®‰å…¨é…ç½®ä¼˜åŒ–**
```yaml
# docker-compose.prod.yml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    # ä¸æš´éœ²åˆ°å¤–éƒ¨ç½‘ç»œ
    expose:
      - "3306"
    environment:
      MYSQL_ROOT_PASSWORD_FILE: /run/secrets/mysql_root_password
    secrets:
      - mysql_root_password
    networks:
      - backend

  web:
    build: .
    ports:
      - "8080:8080"
    networks:
      - backend
      - frontend

networks:
  backend:
    driver: bridge
    internal: true  # å†…éƒ¨ç½‘ç»œï¼Œä¸èƒ½è®¿é—®å¤–ç½‘
  frontend:
    driver: bridge

secrets:
  mysql_root_password:
    file: ./secrets/mysql_root_password.txt
```

**ğŸ“Š ç›‘æ§é…ç½®**
```yaml
# æ·»åŠ ç›‘æ§æœåŠ¡
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml

  grafana:
    image: grafana/grafana
    ports:
      - "3000:3000"
    environment:
      GF_SECURITY_ADMIN_PASSWORD: admin123
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Dockeræœ¬è´¨ï¼šè½»é‡çº§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè§£å†³ç¯å¢ƒä¸€è‡´æ€§é—®é¢˜
ğŸ”¸ ä¸‰å¤§æ¦‚å¿µï¼šé•œåƒ(æ¨¡æ¿) â†’ å®¹å™¨(å®ä¾‹) â†’ ä»“åº“(å­˜å‚¨)
ğŸ”¸ Dockerfileï¼šé•œåƒæ„å»ºè“å›¾ï¼Œæè¿°å¦‚ä½•åˆ›å»ºé•œåƒ
ğŸ”¸ æ•°æ®æŒä¹…åŒ–ï¼šé€šè¿‡æ•°æ®å·ä¿è¯æ•°æ®ä¸ä¸¢å¤±
ğŸ”¸ ç«¯å£æ˜ å°„ï¼šè®©å¤–éƒ¨è®¿é—®å®¹å™¨å†…æœåŠ¡çš„å…³é”®
```

### 8.2 å®ç”¨æ“ä½œè®°å¿†


**ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥**
```bash
# æ„å»ºé•œåƒ
docker build -t app-name:tag .

# è¿è¡Œå®¹å™¨
docker run -d -p host-port:container-port --name container-name image-name

# æŸ¥çœ‹çŠ¶æ€
docker ps              # è¿è¡Œä¸­çš„å®¹å™¨
docker logs container  # æŸ¥çœ‹æ—¥å¿—
docker exec -it container bash  # è¿›å…¥å®¹å™¨

# æ•°æ®å·æ“ä½œ
docker volume create volume-name
docker run -v volume-name:/path container

# æ¸…ç†æ“ä½œ
docker system prune -a  # æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
```

### 8.3 æœ€ä½³å®è·µæ€»ç»“


**âœ… Dockerfileç¼–å†™è§„èŒƒ**
```
1. é€‰æ‹©åˆé€‚åŸºç¡€é•œåƒï¼šAlpineä¼˜å…ˆï¼Œä½“ç§¯å°
2. åˆå¹¶RUNæŒ‡ä»¤ï¼šå‡å°‘é•œåƒå±‚æ•°
3. åˆ©ç”¨æ„å»ºç¼“å­˜ï¼šä¾èµ–é…ç½®ä¼˜å…ˆå¤åˆ¶
4. å¤šé˜¶æ®µæ„å»ºï¼šå‡å°‘æœ€ç»ˆé•œåƒå¤§å°
5. érootç”¨æˆ·è¿è¡Œï¼šæé«˜å®‰å…¨æ€§
```

**âœ… å®¹å™¨è¿è¡Œè§„èŒƒ**
```
1. è®¾ç½®èµ„æºé™åˆ¶ï¼šé˜²æ­¢å•å®¹å™¨å ç”¨è¿‡å¤šèµ„æº
2. ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼šé…ç½®å¤–éƒ¨åŒ–ï¼Œä¾¿äºä¸åŒç¯å¢ƒéƒ¨ç½²
3. æ•°æ®å·æŒ‚è½½ï¼šé‡è¦æ•°æ®å¿…é¡»æŒä¹…åŒ–
4. å¥åº·æ£€æŸ¥ï¼šåŠæ—¶å‘ç°åº”ç”¨é—®é¢˜
5. é‡å¯ç­–ç•¥ï¼šä¿è¯æœåŠ¡é«˜å¯ç”¨
```

**âœ… ç”Ÿäº§éƒ¨ç½²å»ºè®®**
```
1. ä½¿ç”¨docker-composeï¼šç®¡ç†å¤šæœåŠ¡éƒ¨ç½²
2. é•œåƒç‰ˆæœ¬ç®¡ç†ï¼šé¿å…ä½¿ç”¨latestæ ‡ç­¾
3. æ—¥å¿—æ”¶é›†ï¼šæŒ‚è½½æ—¥å¿—ç›®å½•ä¾¿äºæ’æŸ¥é—®é¢˜
4. ç›‘æ§å‘Šè­¦ï¼šé›†æˆPrometheusç­‰ç›‘æ§ç³»ç»Ÿ
5. å¤‡ä»½ç­–ç•¥ï¼šå®šæœŸå¤‡ä»½é‡è¦æ•°æ®
```

### 8.4 å­¦ä¹ è·¯å¾„å»ºè®®


```
ğŸ“š å­¦ä¹ é˜¶æ®µè§„åˆ’ï¼š

ç¬¬1å‘¨ï¼šåŸºç¡€æ¦‚å¿µç†è§£
â€¢ Dockeræ˜¯ä»€ä¹ˆï¼Œè§£å†³ä»€ä¹ˆé—®é¢˜
â€¢ é•œåƒã€å®¹å™¨ã€ä»“åº“æ¦‚å¿µ
â€¢ åŸºæœ¬å‘½ä»¤æ“ä½œ

ç¬¬2å‘¨ï¼šDockerfileå®è·µ
â€¢ ç¼–å†™ç®€å•Dockerfile
â€¢ ç†è§£æ„å»ºè¿‡ç¨‹
â€¢ åŸºç¡€ä¼˜åŒ–æŠ€å·§

ç¬¬3å‘¨ï¼šå®¹å™¨è¿è¡Œç®¡ç†  
â€¢ ç«¯å£æ˜ å°„é…ç½®
â€¢ ç¯å¢ƒå˜é‡ä½¿ç”¨
â€¢ æ•°æ®å·æŒ‚è½½

ç¬¬4å‘¨ï¼šå®æˆ˜é¡¹ç›®éƒ¨ç½²
â€¢ å®Œæ•´JavaWebé¡¹ç›®å®¹å™¨åŒ–
â€¢ docker-composeä½¿ç”¨
â€¢ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```

### 8.5 å¸¸è§é—®é¢˜è§£å†³


**â“ æ–°æ‰‹å¸¸è§é—®é¢˜**

| é—®é¢˜ | **ç—‡çŠ¶** | **è§£å†³æ–¹æ¡ˆ** |
|------|---------|-------------|
| `ç«¯å£è®¿é—®ä¸äº†` | `æµè§ˆå™¨æ‰“ä¸å¼€åº”ç”¨` | `æ£€æŸ¥ç«¯å£æ˜ å°„ -p 8080:8080` |
| `å®¹å™¨å¯åŠ¨å¤±è´¥` | `docker psçœ‹ä¸åˆ°å®¹å™¨` | `æŸ¥çœ‹æ—¥å¿— docker logs container-name` |
| `æ•°æ®ä¸¢å¤±` | `å®¹å™¨é‡å¯æ•°æ®æ²¡äº†` | `ä½¿ç”¨æ•°æ®å· -v /data:/app/data` |
| `é•œåƒå¤ªå¤§` | `ä¸Šä¼ ä¸‹è½½å¾ˆæ…¢` | `ä½¿ç”¨Alpineé•œåƒï¼Œå¤šé˜¶æ®µæ„å»º` |
| `æ„å»ºå¾ˆæ…¢` | `æ¯æ¬¡æ„å»ºç­‰å¾ˆä¹…` | `ä¼˜åŒ–Dockerfileï¼Œåˆ©ç”¨ç¼“å­˜` |

**æ ¸å¿ƒè®°å¿†**ï¼š
- Dockerè®©éƒ¨ç½²åƒæ¬ç§¯æœ¨ï¼Œæ‰“åŒ…ä¸€æ¬¡åˆ°å¤„è¿è¡Œ
- Dockerfileæ˜¯æ­å»ºè¯´æ˜ä¹¦ï¼Œä¸€æ­¥æ­¥å‘Šè¯‰Dockeræ€ä¹ˆåš
- å®¹å™¨æ˜¯ä¸´æ—¶çš„ï¼Œæ•°æ®è¦æ”¾åœ¨æ•°æ®å·é‡Œæ‰å®‰å…¨
- ç«¯å£æ˜ å°„æ˜¯æ¡¥æ¢ï¼Œè¿æ¥å¤–éƒ¨ä¸–ç•Œå’Œå®¹å™¨å†…éƒ¨
- å¤šç»ƒä¹ å¤šå®è·µï¼ŒDockerå¹¶ä¸éš¾ï¼Œå…³é”®æ˜¯ç†è§£æ¦‚å¿µ