---
title: 1、常见错误与调试技巧
---
## 📚 目录

1. [常见依赖问题及解决方案](#1-常见依赖问题及解决方案)
2. [EL表达式失效原因分析](#2-EL表达式失效原因分析)
3. [作用域取值错误处理](#3-作用域取值错误处理)
4. [空指针异常预防与处理](#4-空指针异常预防与处理)
5. [JSTL标签未识别问题](#5-JSTL标签未识别问题)
6. [实用调试方法技巧](#6-实用调试方法技巧)
7. [错误排查标准步骤](#7-错误排查标准步骤)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 📦 常见依赖问题及解决方案


### 1.1 什么是依赖问题


在JavaWeb开发中，**依赖问题**就像做菜时缺少调料一样 - 没有必要的jar包，EL表达式和JSTL标签就无法正常工作。

**简单理解**：
```
就像手机需要安装APP才能用某些功能
JavaWeb项目需要导入jar包才能使用EL和JSTL
```

### 1.2 核心依赖清单


**必备jar包一览**：

```
JSTL核心依赖（二选一）：
方案一：jstl-1.2.jar（老版本，稳定）
方案二：jakarta.servlet.jsp.jstl-api-2.0.0.jar + jakarta.servlet.jsp.jstl-impl-2.0.0.jar（新版本）

EL表达式（通常已内置）：
Tomcat 8.5+ 自带EL支持
如果版本较低可能需要：el-api.jar
```

> 💡 **新手提示**：就像装软件要选对版本一样，jar包版本也要和你的Tomcat版本匹配

### 1.3 依赖缺失的典型症状


**症状一：页面直接显示EL表达式文本**
```jsp
<!-- 错误现象：页面显示 ${user.name} 而不是实际值 -->
<h1>欢迎 ${user.name}</h1>
```

**症状二：JSTL标签报错**
```
HTTP Status 500 - The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved
```

**症状三：标签不生效**
```jsp
<!-- 循环标签不工作，页面空白或显示标签本身 -->
<c:forEach items="${userList}" var="user">
    ${user.name}
</c:forEach>
```

### 1.4 依赖问题解决步骤


**步骤 ① 检查项目结构**
```
你的项目
├── src/
├── WebContent/ (或 webapp/)
│   └── WEB-INF/
│       └── lib/          ← jar包应该放这里
│           ├── jstl-1.2.jar
│           └── standard-1.1.2.jar
└── ...
```

**步骤 ② Maven项目配置**
```xml
<dependencies>
    <!-- JSTL标签库 -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    
    <!-- 如果EL表达式不工作 -->
    <dependency>
        <groupId>javax.el</groupId>
        <artifactId>javax.el-api</artifactId>
        <version>3.0.0</version>
        <scope>provided</scope>
    </dependency>
</dependencies>
```

**步骤 ③ 验证依赖是否生效**
```jsp
<%-- 创建测试页面 test.jsp --%>
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<body>
    <c:set var="test" value="依赖配置成功!" />
    <h1>${test}</h1>
</body>
</html>
```

---

## 2. 🚫 EL表达式失效原因分析


### 2.1 EL表达式被禁用


**最常见原因**：web.xml中禁用了EL表达式

```xml
<!-- 错误配置：这样会禁用EL表达式 -->
<web-app version="2.3">
    <jsp-config>
        <jsp-property-group>
            <url-pattern>*.jsp</url-pattern>
            <el-ignored>true</el-ignored>  ← 这里禁用了EL
        </jsp-property-group>
    </jsp-config>
</web-app>
```

**正确配置**：
```xml
<!-- 正确配置：启用EL表达式 -->
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee">
    <jsp-config>
        <jsp-property-group>
            <url-pattern>*.jsp</url-pattern>
            <el-ignored>false</el-ignored>  ← 明确启用EL
        </jsp-property-group>
    </jsp-config>
</web-app>
```

> 📝 **记住这个**：`el-ignored="false"` 就是告诉服务器"我要使用EL表达式"

### 2.2 JSP页面指令问题


**错误的页面指令**：
```jsp
<%-- 错误：禁用了EL表达式 --%>
<%@ page isELIgnored="true" %>

<%-- 错误：版本太低，不支持EL --%>
<%@ page version="1.2" %>
```

**正确的页面指令**：
```jsp
<%-- 正确：明确启用EL表达式 --%>
<%@ page language="java" contentType="text/html; charset=UTF-8" 
         pageEncoding="UTF-8" isELIgnored="false" %>
```

### 2.3 Servlet版本过低


**版本兼容性说明**：
```
Servlet 2.3 及以下 → 不支持EL表达式
Servlet 2.4 → 开始支持EL表达式
Servlet 3.0+ → 完全支持EL表达式（推荐）
```

**升级解决方案**：
```xml
<!-- 在web.xml中使用新版本 -->
<web-app version="3.1" 
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/web-app_3_1.xsd">
</web-app>
```

---

## 3. 🎯 作用域取值错误处理


### 3.1 理解四大作用域


**作用域就像不同大小的盒子**：
```
┌─────────────────────────────────────┐
│ Application作用域 (整个应用)          │
│  ┌─────────────────────────────┐    │
│  │ Session作用域 (用户会话)      │    │
│  │  ┌─────────────────────┐    │    │
│  │  │ Request作用域 (请求) │    │    │
│  │  │  ┌─────────────┐    │    │    │
│  │  │  │ Page作用域   │    │    │    │
│  │  │  │   (当前页面) │    │    │    │
│  │  │  └─────────────┘    │    │    │
│  │  └─────────────────────┘    │    │
│  └─────────────────────────────┘    │
└─────────────────────────────────────┘
```

### 3.2 常见取值错误


**错误类型 ① 搞错作用域**
```java
// Servlet中存储数据
request.setAttribute("userName", "张三");

// 在另一个请求的JSP中尝试获取
${userName}  // 获取不到！因为是不同的request
```

**正确做法**：
```java
// 如果要跨请求使用，存到session中
session.setAttribute("userName", "张三");

// JSP中获取
${sessionScope.userName}  // 明确指定作用域
```

**错误类型 ② 属性名不一致**
```java
// Servlet中存储
request.setAttribute("user_name", "张三");

// JSP中错误获取
${userName}      // 错误：属性名不匹配
${user.name}     // 错误：以为是对象属性
```

**正确做法**：
```java
// 保持属性名一致
request.setAttribute("userName", "张三");
// 或者
request.setAttribute("user_name", "张三");

// JSP中对应获取
${userName}
// 或者
${user_name}
```

### 3.3 作用域查找顺序


**EL表达式的查找规律**：
```
${userName} 的查找顺序：
①  pageScope.userName     (页面作用域)
②  requestScope.userName  (请求作用域) 
③  sessionScope.userName  (会话作用域)
④  applicationScope.userName (应用作用域)

找到第一个就停止，找不到返回空字符串
```

> 🔍 **调试技巧**：如果取不到值，试试明确指定作用域：`${requestScope.userName}`

### 3.4 作用域调试代码


**创建调试页面查看所有作用域数据**：
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<body>
<h2>🔍 作用域调试信息</h2>

<h3>Page作用域：</h3>
<c:forEach items="${pageScope}" var="item">
    <p>${item.key} = ${item.value}</p>
</c:forEach>

<h3>Request作用域：</h3>
<c:forEach items="${requestScope}" var="item">
    <p>${item.key} = ${item.value}</p>
</c:forEach>

<h3>Session作用域：</h3>
<c:forEach items="${sessionScope}" var="item">
    <p>${item.key} = ${item.value}</p>
</c:forEach>

<h3>Application作用域：</h3>
<c:forEach items="${applicationScope}" var="item">
    <p>${item.key} = ${item.value}</p>
</c:forEach>
</body>
</html>
```

---

## 4. ⚡ 空指针异常预防与处理


### 4.1 理解空指针异常


**什么是空指针异常？**
```
简单理解：就像你要打开一个不存在的盒子
程序尝试访问一个值为null的对象的属性或方法
结果：程序崩溃，页面报错
```

### 4.2 EL表达式中的空指针场景


**场景一：对象本身为null**
```java
// Servlet中
User user = null;
request.setAttribute("user", user);
```

```jsp
<!-- JSP中 - 这样会出错 -->
${user.name}  <!-- 空指针异常！ -->
```

**安全的写法**：
```jsp
<!-- EL表达式自动处理null，返回空字符串 -->
${user.name}  <!-- 如果user为null，显示空字符串，不会报错 -->

<!-- 更安全的写法：先判断 -->
<c:if test="${user != null}">
    ${user.name}
</c:if>

<!-- 或者使用三元运算符 -->
${user != null ? user.name : '未登录'}
```

### 4.3 常见空指针情况及解决


**情况 ① List集合为空**
```java
// Servlet中
List<User> userList = null;  // 或者 new ArrayList<>()
request.setAttribute("userList", userList);
```

**安全处理**：
```jsp
<!-- 检查集合是否存在且不为空 -->
<c:if test="${not empty userList}">
    <c:forEach items="${userList}" var="user">
        <p>${user.name}</p>
    </c:forEach>
</c:if>
<c:if test="${empty userList}">
    <p>暂无用户数据</p>
</c:if>
```

**情况 ② 嵌套对象为空**
```java
// 假设User对象中的address为null
User user = new User();
user.setName("张三");
user.setAddress(null);  // 地址为空
```

**安全处理**：
```jsp
<!-- 逐级判断 -->
<c:choose>
    <c:when test="${user != null and user.address != null}">
        地址：${user.address.city}
    </c:when>
    <c:otherwise>
        地址：暂未填写
    </c:otherwise>
</c:choose>

<!-- 或者使用empty判断 -->
地址：${empty user.address ? '暂未填写' : user.address.city}
```

### 4.4 预防空指针的最佳实践


**① 在Servlet中做好初始化**
```java
// 好习惯：确保不传递null值
List<User> userList = userService.getAllUsers();
if (userList == null) {
    userList = new ArrayList<>();  // 传递空集合而不是null
}
request.setAttribute("userList", userList);
```

**② 使用EL表达式的empty运算符**
```jsp
<!-- empty运算符：检查null、空字符串、空集合、空数组 -->
<c:if test="${not empty userName}">
    欢迎，${userName}
</c:if>

<c:if test="${empty userList}">
    <p class="no-data">暂无数据</p>
</c:if>
```

**③ 设置默认值**
```jsp
<!-- 使用三元运算符设置默认值 -->
<h1>欢迎，${empty user.name ? '游客' : user.name}</h1>
<p>年龄：${empty user.age ? '未知' : user.age}岁</p>
```

---

## 5. 🏷️ JSTL标签未识别问题


### 5.1 标签未识别的表现


**典型错误信息**：
```
The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved
```

**页面表现**：
- 标签直接显示在页面上，如 `<c:if>` 
- 或者页面报500错误
- 标签功能完全不工作

### 5.2 未识别问题的根本原因


**原因分析图**：
```
JSTL标签不识别
├── jar包问题 (70%的情况)
│   ├── 缺少jstl.jar
│   ├── 缺少standard.jar  
│   └── jar包版本不匹配
├── taglib声明问题 (20%的情况)
│   ├── URI路径错误
│   ├── 前缀重复
│   └── 忘记声明taglib
└── 服务器配置问题 (10%的情况)
    ├── Tomcat版本过低
    └── web.xml配置错误
```

### 5.3 按步骤排查解决


**步骤 ① 检查taglib声明**

**错误的声明**：
```jsp
<%-- 错误：URI路径错误 --%>
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>

<%-- 错误：忘记声明就直接使用 --%>
<c:if test="...">  <!-- 没有import就使用 -->
```

**正确的声明**：
```jsp
<%-- 正确的核心标签库声明 --%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<%-- 格式化标签库 --%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<%-- 函数标签库 --%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
```

**步骤 ② 验证jar包**

**快速检查方法**：
```jsp
<%-- 创建测试页面 jstl-test.jsp --%>
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<body>
    <c:set var="message" value="JSTL工作正常!" />
    <h1 style="color: green;">${message}</h1>
    
    <%-- 如果看到绿色的"JSTL工作正常!"说明配置成功 --%>
    <%-- 如果看到标签本身或报错，说明配置有问题 --%>
</body>
</html>
```

### 5.4 不同开发环境的解决方案


**Maven项目解决方案**：
```xml
<!-- 在pom.xml中添加 -->
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>

<!-- 如果还不行，添加这个 -->
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>
```

**Eclipse Dynamic Web项目解决方案**：
```
① 下载jar包
   - jstl-1.2.jar
   - standard-1.1.2.jar

② 复制到项目
   WebContent/WEB-INF/lib/ 目录下

③ 刷新项目
   右键项目 → Refresh

④ 清理重启
   Project → Clean → 选择项目 → Clean
```

**IDEA解决方案**：
```
① 添加jar包到lib目录
   src/main/webapp/WEB-INF/lib/

② 添加为Library
   File → Project Structure → Libraries → + → Java → 选择jar包

③ 重启Tomcat服务器
```

---

## 6. 🔧 实用调试方法技巧


### 6.1 开启调试信息


**在JSP页面中显示调试信息**：
```jsp
<%-- 开启JSP页面的详细错误信息 --%>
<%@ page errorPage="error.jsp" %>
<%@ page import="java.io.*" %>

<%-- 创建error.jsp用于显示详细错误 --%>
<%@ page isErrorPage="true" %>
<html>
<body>
    <h2>🚨 调试信息</h2>
    <p><strong>错误类型：</strong>${pageContext.exception.class.name}</p>
    <p><strong>错误信息：</strong>${pageContext.exception.message}</p>
    
    <h3>详细堆栈信息：</h3>
    <pre style="background: #f5f5f5; padding: 10px;">
    <%
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        exception.printStackTrace(pw);
        out.print(sw.toString());
    %>
    </pre>
</body>
</html>
```

### 6.2 数据存在性检查


**创建通用的调试页面**：
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<body>
<style>
    .debug-box { 
        border: 1px solid #ccc; 
        margin: 10px 0; 
        padding: 10px; 
        background: #f9f9f9; 
    }
    .empty { color: red; }
    .exists { color: green; }
</style>

<div class="debug-box">
    <h2>🔍 数据调试面板</h2>
    
    <h3>常用对象检查：</h3>
    <p>Request中的user对象：
        <span class="${empty requestScope.user ? 'empty' : 'exists'}">
            ${empty requestScope.user ? '❌ 不存在' : '✅ 存在'}
        </span>
    </p>
    
    <p>Session中的用户信息：
        <span class="${empty sessionScope.loginUser ? 'empty' : 'exists'}">
            ${empty sessionScope.loginUser ? '❌ 未登录' : '✅ 已登录'}
        </span>
    </p>
    
    <p>参数username：
        <span class="${empty param.username ? 'empty' : 'exists'}">
            ${empty param.username ? '❌ 无参数' : param.username}
        </span>
    </p>
</div>

<div class="debug-box">
    <h3>所有请求参数：</h3>
    <c:forEach items="${paramValues}" var="p">
        <p><strong>${p.key}:</strong> ${p.value[0]}</p>
    </c:forEach>
</div>
</body>
</html>
```

### 6.3 浏览器调试技巧


**使用浏览器开发者工具**：

**① 查看网络请求**
```
F12 → Network标签
- 查看请求是否发送成功
- 检查请求参数是否正确
- 查看响应状态码
```

**② 查看页面源码**
```
右键 → 查看页面源代码
- 确认EL表达式是否被解析
- 查看JSTL标签是否被转换为HTML
- 检查是否有JavaScript错误
```

**③ 控制台调试**
```javascript
// 在浏览器控制台中执行
console.log('页面加载完成');

// 检查表单数据
document.querySelectorAll('input').forEach(input => {
    console.log(input.name + ': ' + input.value);
});
```

### 6.4 后端调试技巧


**在Servlet中添加调试日志**：
```java
public class UserServlet extends HttpServlet {
    
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // 调试：打印接收到的参数
        System.out.println("=== 调试信息 ===");
        System.out.println("接收到的用户名：" + request.getParameter("username"));
        System.out.println("Session ID：" + request.getSession().getId());
        
        // 调试：检查对象是否为null
        User user = getUserFromDatabase();
        if (user == null) {
            System.out.println("❌ 警告：用户对象为null！");
        } else {
            System.out.println("✅ 用户对象正常：" + user.getName());
        }
        
        // 存储数据前确认
        request.setAttribute("user", user);
        System.out.println("已将user对象存储到request作用域");
        
        // 转发到JSP
        request.getRequestDispatcher("/user.jsp").forward(request, response);
    }
}
```

---

## 7. 📋 错误排查标准步骤


### 7.1 系统性排查流程


**标准排查步骤（按顺序执行）**：

```
第一步：基础环境检查
├── ✅ 检查Tomcat版本（推荐8.5+）
├── ✅ 检查JDK版本（推荐8+）  
├── ✅ 检查项目编码（UTF-8）
└── ✅ 检查服务器启动是否正常

第二步：依赖配置检查  
├── ✅ 检查jar包是否存在
├── ✅ 检查web.xml配置
├── ✅ 检查JSP页面指令
└── ✅ 检查taglib声明

第三步：代码逻辑检查
├── ✅ 检查Servlet数据存储
├── ✅ 检查作用域使用
├── ✅ 检查EL表达式语法
└── ✅ 检查JSTL标签语法

第四步：运行时检查
├── ✅ 查看浏览器控制台错误
├── ✅ 查看Tomcat日志
├── ✅ 查看页面源代码
└── ✅ 测试简化版本代码
```

### 7.2 快速问题定位法


**5分钟快速定位问题**：

**① 第1分钟：创建最简测试页面**
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html><body>
<c:set var="test" value="OK" />
EL测试：${test}
</body></html>
```
- ✅ 显示"EL测试：OK" → EL和JSTL都正常
- ❌ 显示"EL测试：${test}" → EL表达式被禁用
- ❌ 报错 → JSTL配置问题

**② 第2-3分钟：检查基础配置**
```xml
<!-- 检查web.xml头部 -->
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee">
  <!-- 确保version不低于2.4 -->
</web-app>
```

**③ 第4-5分钟：验证jar包**
- 查看WEB-INF/lib目录
- 确认jstl相关jar包存在
- 重启Tomcat服务器

### 7.3 常见问题对照表


| **现象** | **可能原因** | **解决方案** | **验证方法** |
|----------|-------------|-------------|-------------|
| EL表达式显示原文 | `el-ignored="true"` | 设置为`false`或删除此行 | 创建简单EL表达式测试 |
| JSTL标签显示原文 | 缺少jar包或taglib声明错误 | 添加jar包，检查URI | 使用`<c:set>`测试 |
| 取不到Request中的值 | 作用域错误或属性名不匹配 | 检查setAttribute和EL中的名称 | 用`${requestScope}`明确指定 |
| 空指针异常 | 对象为null | 添加null检查 | 使用`${empty}`判断 |
| 中文乱码 | 编码设置问题 | 统一设置UTF-8 | 检查页面和服务器编码 |

### 7.4 建立问题记录习惯


**创建问题记录模板**：
```
问题记录：[日期]
================
问题描述：
[详细描述遇到的问题]

错误信息：
[复制完整的错误信息]

解决步骤：
1. [尝试的第一个方法]
2. [尝试的第二个方法]  
3. [最终解决的方法]

根本原因：
[分析问题的根本原因]

预防措施：
[如何避免类似问题]
================
```

> 💡 **经验提示**：建立问题记录可以帮你快速解决重复出现的问题，也能帮助团队其他成员

---

## 8. 📝 核心要点总结


### 8.1 必须掌握的调试技能


```
🎯 核心调试能力：
├── 📦 依赖问题快速诊断
├── 🚫 EL表达式失效原因分析  
├── 🎯 作用域数据准确定位
├── ⚡ 空指针异常预防处理
├── 🏷️ JSTL标签识别问题解决
└── 🔧 系统性错误排查方法
```

### 8.2 关键理解要点


**🔹 依赖配置的重要性**
```
理解要点：
- jar包就像手机的APP，缺少就无法使用功能
- 版本匹配很重要，新旧版本API可能不同
- Maven项目和普通项目的配置方式不同
```

**🔹 作用域的查找机制**
```
记忆要点：
- EL表达式按page→request→session→application顺序查找
- 明确指定作用域可以避免查找错误：${requestScope.user}
- empty运算符是检查null和空值的最佳选择
```

**🔹 调试的系统性思维**
```
调试思路：
- 从简单到复杂：先测试基础功能再测试复杂逻辑
- 从外到内：先检查环境配置再检查代码逻辑  
- 做好记录：重复问题不应该重复解决
```

### 8.3 实践应用指导


**💼 开发中的最佳实践**：

**① 预防性配置**
- 项目开始就配置好基础环境
- 使用Maven管理依赖，避免手动添加jar包
- 统一团队的开发环境和配置

**② 防御性编程**
- 存储数据到作用域前检查是否为null
- JSP中使用`${empty}`检查数据存在性
- 为重要的EL表达式设置默认值

**③ 高效调试**
- 准备调试页面模板，需要时快速复制使用
- 在开发环境开启详细的错误信息显示
- 学会使用浏览器开发者工具

### 8.4 故障处理优先级


**🔥 高优先级（影响功能）**
```
P0 - 立即处理：
- 页面完全无法访问（500错误）
- EL表达式完全不工作
- 核心业务数据获取失败

P1 - 当天处理：
- 部分JSTL标签不识别
- 特定作用域数据获取异常
- 空指针导致的页面显示问题
```

**📋 中等优先级（影响体验）**
```
P2 - 本周处理：
- 中文显示乱码
- 页面样式显示异常
- 非关键数据的显示问题
```

### 8.5 团队协作建议


**📚 知识共享**：
- 整理常见问题解决方案文档
- 定期分享调试技巧和经验
- 建立团队代码审查机制

**🔧 工具规范**：
- 统一开发环境配置（IDE、JDK、Tomcat版本）
- 使用版本控制管理配置文件
- 建立自动化测试检查基础功能

**核心记忆口诀**：
- 问题排查有步骤，基础环境先检查
- 依赖配置是关键，jar包版本要匹配  
- EL作用域要分清，empty判断防空指针
- 调试信息多利用，问题记录成习惯