---
title: 3ã€ç”µå•†è´­ç‰©è½¦å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [é¡¹ç›®èƒŒæ™¯ä¸éœ€æ±‚åˆ†æ](#1-é¡¹ç›®èƒŒæ™¯ä¸éœ€æ±‚åˆ†æ)
2. [è´­ç‰©è½¦æ ¸å¿ƒåŠŸèƒ½è®¾è®¡](#2-è´­ç‰©è½¦æ ¸å¿ƒåŠŸèƒ½è®¾è®¡)
3. [å•†å“åˆ—è¡¨å±•ç¤ºå®ç°](#3-å•†å“åˆ—è¡¨å±•ç¤ºå®ç°)
4. [è´­ç‰©è½¦æ•°æ®ç®¡ç†](#4-è´­ç‰©è½¦æ•°æ®ç®¡ç†)
5. [ä»·æ ¼è®¡ç®—ä¸é‡‘é¢å¤„ç†](#5-ä»·æ ¼è®¡ç®—ä¸é‡‘é¢å¤„ç†)
6. [æ•°é‡ä¿®æ”¹ä¸åŠ¨æ€æ›´æ–°](#6-æ•°é‡ä¿®æ”¹ä¸åŠ¨æ€æ›´æ–°)
7. [ä¼˜æƒ åˆ¸ç³»ç»Ÿé›†æˆ](#7-ä¼˜æƒ åˆ¸ç³»ç»Ÿé›†æˆ)
8. [æ¸…ç©ºä¸ç»“ç®—åŠŸèƒ½](#8-æ¸…ç©ºä¸ç»“ç®—åŠŸèƒ½)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›’ é¡¹ç›®èƒŒæ™¯ä¸éœ€æ±‚åˆ†æ


### 1.1 ç”µå•†è´­ç‰©è½¦æ˜¯ä»€ä¹ˆï¼Ÿ


**ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**ï¼š
è´­ç‰©è½¦å°±åƒæˆ‘ä»¬å»è¶…å¸‚è´­ç‰©æ—¶æ¨çš„å°æ¨è½¦ï¼Œå¯ä»¥æŠŠæƒ³ä¹°çš„å•†å“å…ˆæ”¾è¿›å»ï¼Œæœ€åä¸€èµ·ç»“è´¦ã€‚ç½‘ä¸Šè´­ç‰©è½¦ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼

**ğŸ¯ æ ¸å¿ƒä½œç”¨**ï¼š
```
ç°å®è´­ç‰©æµç¨‹ï¼šé€‰å•†å“ â†’ æ”¾å…¥è´­ç‰©è½¦ â†’ ä¿®æ”¹æ•°é‡ â†’ ç»“è´¦ä»˜æ¬¾
ç½‘ç»œè´­ç‰©æµç¨‹ï¼šæµè§ˆå•†å“ â†’ åŠ å…¥è´­ç‰©è½¦ â†’ ç®¡ç†è´­ç‰©è½¦ â†’ æäº¤è®¢å•
```

### 1.2 è´­ç‰©è½¦è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ


**ğŸ”¸ ç”¨æˆ·éœ€æ±‚åˆ†æ**ï¼š
- **ä¸´æ—¶å­˜å‚¨**ï¼šç”¨æˆ·å¯èƒ½ä¸ä¼šç«‹å³è´­ä¹°ï¼Œéœ€è¦æš‚æ—¶ä¿å­˜é€‰æ‹©
- **æ‰¹é‡ç®¡ç†**ï¼šä¸€æ¬¡æ€§è´­ä¹°å¤šç§å•†å“ï¼Œç»Ÿä¸€ç®¡ç†æ›´æ–¹ä¾¿
- **ä»·æ ¼è®¡ç®—**ï¼šè‡ªåŠ¨è®¡ç®—æ€»ä»·ï¼Œç”¨æˆ·ä¸ç”¨è‡ªå·±ç®—
- **çµæ´»è°ƒæ•´**ï¼šéšæ—¶ä¿®æ”¹æ•°é‡æˆ–åˆ é™¤ä¸éœ€è¦çš„å•†å“

> ğŸ’¡ **æ–°æ‰‹æç¤º**  
> è´­ç‰©è½¦æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª"å•†å“ä¸´æ—¶å­˜æ”¾åŒº"ï¼Œå°±åƒä½ çš„æ”¶è—å¤¹ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒè¿˜èƒ½å¸®ä½ ç®—é’±ï¼

### 1.3 æœ¬æ¡ˆä¾‹æ¶µç›–çš„æ ¸å¿ƒæŠ€æœ¯


**ğŸ› ï¸ æŠ€æœ¯æ ˆç»„åˆ**ï¼š
- **å‰ç«¯å±•ç¤º**ï¼šJSPé¡µé¢ + JSTLæ ‡ç­¾ + ELè¡¨è¾¾å¼
- **åç«¯é€»è¾‘**ï¼šServletå¤„ç† + JavaBeanæ•°æ®å°è£…
- **æ•°æ®ç®¡ç†**ï¼šSessionä¼šè¯ç®¡ç†ï¼ˆè´­ç‰©è½¦æ•°æ®æš‚å­˜ï¼‰
- **æ ·å¼ç¾åŒ–**ï¼šåŸºç¡€CSS + Bootstrapæ¡†æ¶

---

## 2. ğŸ“‹ è´­ç‰©è½¦æ ¸å¿ƒåŠŸèƒ½è®¾è®¡


### 2.1 åŠŸèƒ½æ¨¡å—åˆ’åˆ†


**ğŸ¯ ä¸»è¦åŠŸèƒ½æ¨¡å—**ï¼š

```
å•†å“å±•ç¤ºæ¨¡å—
â”œâ”€â”€ å•†å“åˆ—è¡¨æ˜¾ç¤º
â”œâ”€â”€ å•†å“è¯¦æƒ…æŸ¥çœ‹
â””â”€â”€ æ·»åŠ åˆ°è´­ç‰©è½¦

è´­ç‰©è½¦ç®¡ç†æ¨¡å—  
â”œâ”€â”€ æŸ¥çœ‹è´­ç‰©è½¦å†…å®¹
â”œâ”€â”€ ä¿®æ”¹å•†å“æ•°é‡
â”œâ”€â”€ åˆ é™¤å•ä¸ªå•†å“
â”œâ”€â”€ æ¸…ç©ºæ•´ä¸ªè´­ç‰©è½¦
â””â”€â”€ ä»·æ ¼è‡ªåŠ¨è®¡ç®—

ç»“ç®—åŠŸèƒ½æ¨¡å—
â”œâ”€â”€ ä¼˜æƒ åˆ¸é€‰æ‹©åº”ç”¨
â”œâ”€â”€ è¿è´¹è®¡ç®—æ˜¾ç¤º  
â”œâ”€â”€ æ€»é‡‘é¢ç¡®è®¤
â””â”€â”€ æäº¤è®¢å•
```

### 2.2 æ•°æ®ç»“æ„è®¾è®¡


**ğŸ“Š è´­ç‰©è½¦æ•°æ®æ¨¡å‹**ï¼š

```java
// å•†å“ä¿¡æ¯ç±» - å°±åƒå•†å“çš„èº«ä»½è¯
public class Product {
    private int id;           // å•†å“ç¼–å·
    private String name;      // å•†å“åç§°  
    private double price;     // å•†å“ä»·æ ¼
    private String image;     // å•†å“å›¾ç‰‡
    private String description; // å•†å“æè¿°
    
    // çœç•¥getter/setteræ–¹æ³•...
}

// è´­ç‰©è½¦é¡¹ç›®ç±» - è´­ç‰©è½¦é‡Œçš„æ¯ä¸€è¡Œè®°å½•
public class CartItem {
    private Product product;  // å•†å“å¯¹è±¡
    private int quantity;     // è´­ä¹°æ•°é‡
    private double subtotal;  // å°è®¡é‡‘é¢
    
    // è‡ªåŠ¨è®¡ç®—å°è®¡çš„æ–¹æ³•
    public double getSubtotal() {
        return product.getPrice() * quantity;
    }
}

// è´­ç‰©è½¦ç±» - å°±æ˜¯é‚£ä¸ªè£…å•†å“çš„å®¹å™¨
public class ShoppingCart {
    private List<CartItem> items;    // è´­ç‰©è½¦å•†å“åˆ—è¡¨
    private double totalAmount;      // æ€»é‡‘é¢
    private double discount;         // ä¼˜æƒ é‡‘é¢
    private double finalAmount;      // æœ€ç»ˆé‡‘é¢
}
```

> ğŸ§  **è®°å¿†æŠ€å·§**ï¼šæŠŠæ•°æ®ç»“æ„æƒ³è±¡æˆå¥—å¨ƒ  
> Productï¼ˆå•†å“ï¼‰â†’ CartItemï¼ˆè´­ç‰©è½¦æ¡ç›®ï¼‰â†’ ShoppingCartï¼ˆæ•´ä¸ªè´­ç‰©è½¦ï¼‰

---

## 3. ğŸª å•†å“åˆ—è¡¨å±•ç¤ºå®ç°


### 3.1 å•†å“æ•°æ®å‡†å¤‡


**ğŸ’¾ å•†å“æ•°æ®æ¨¡æ‹Ÿ**ï¼š

```java
// ProductService.java - å•†å“æœåŠ¡ç±»
public class ProductService {
    // æ¨¡æ‹Ÿå•†å“æ•°æ®ï¼ˆå®é™…é¡¹ç›®ä¸­ä»æ•°æ®åº“è·å–ï¼‰
    public List<Product> getAllProducts() {
        List<Product> products = new ArrayList<>();
        
        products.add(new Product(1, "è‹¹æœæ‰‹æœº", 5999.00, "iphone.jpg", "æœ€æ–°æ¬¾æ™ºèƒ½æ‰‹æœº"));
        products.add(new Product(2, "åä¸ºå¹³æ¿", 2999.00, "tablet.jpg", "é«˜æ€§èƒ½å¹³æ¿ç”µè„‘"));
        products.add(new Product(3, "å°ç±³è€³æœº", 199.00, "headphone.jpg", "æ— çº¿è“ç‰™è€³æœº"));
        
        return products;
    }
}
```

### 3.2 å•†å“åˆ—è¡¨é¡µé¢è®¾è®¡


**ğŸ¨ JSPé¡µé¢å®ç°**ï¼š

```jsp
<%-- productList.jsp - å•†å“åˆ—è¡¨é¡µé¢ --%>
<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<!DOCTYPE html>
<html>
<head>
    <title>å•†å“åˆ—è¡¨ - æˆ‘çš„å•†åŸ</title>
    <style>
        .product-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .product-card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; }
        .price { color: #e74c3c; font-size: 18px; font-weight: bold; }
        .add-btn { background: #27ae60; color: white; padding: 8px 16px; border: none; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ“± çƒ­é—¨å•†å“æ¨è</h2>
        
        <!-- è´­ç‰©è½¦çŠ¶æ€æ˜¾ç¤º -->
        <div class="cart-status">
            ğŸ›’ è´­ç‰©è½¦å•†å“æ•°é‡: <span class="badge">${sessionScope.cart.itemCount}</span>
            ğŸ’° å½“å‰æ€»é‡‘é¢: Â¥<fmt:formatNumber value="${sessionScope.cart.totalAmount}" pattern="#,##0.00"/>
        </div>
        
        <!-- å•†å“ç½‘æ ¼å¸ƒå±€ -->
        <div class="product-grid">
            <c:forEach items="${productList}" var="product">
                <div class="product-card">
                    <img src="images/${product.image}" alt="${product.name}" width="200">
                    <h3>${product.name}</h3>
                    <p class="description">${product.description}</p>
                    <p class="price">Â¥<fmt:formatNumber value="${product.price}" pattern="#,##0.00"/></p>
                    
                    <!-- æ·»åŠ åˆ°è´­ç‰©è½¦è¡¨å• -->
                    <form action="cart" method="post" style="display:inline;">
                        <input type="hidden" name="action" value="add">
                        <input type="hidden" name="productId" value="${product.id}">
                        <input type="number" name="quantity" value="1" min="1" max="99" style="width:60px;">
                        <button type="submit" class="add-btn">ğŸ›’ åŠ å…¥è´­ç‰©è½¦</button>
                    </form>
                </div>
            </c:forEach>
        </div>
        
        <!-- æŸ¥çœ‹è´­ç‰©è½¦é“¾æ¥ -->
        <div class="cart-link">
            <a href="cart.jsp" class="view-cart-btn">ğŸ›’ æŸ¥çœ‹è´­ç‰©è½¦ (${sessionScope.cart.itemCount}ä»¶å•†å“)</a>
        </div>
    </div>
</body>
</html>
```

### 3.3 å•†å“å±•ç¤ºçš„å…³é”®æŠ€æœ¯ç‚¹


**ğŸ” æŠ€æœ¯è§£æ**ï¼š

| **æŠ€æœ¯è¦ç‚¹** | **ä½œç”¨è¯´æ˜** | **æ–°æ‰‹ç†è§£** |
|------------|------------|------------|
| **JSTLå¾ªç¯** | `<c:forEach>` éå†å•†å“åˆ—è¡¨ | å°±åƒforå¾ªç¯ï¼Œä¸€ä¸ªä¸ªæ˜¾ç¤ºå•†å“ |
| **ELè¡¨è¾¾å¼** | `${product.name}` è·å–å•†å“å±æ€§ | ç›´æ¥ä»å¯¹è±¡é‡Œå–æ•°æ®æ˜¾ç¤º |
| **æ ¼å¼åŒ–æ ‡ç­¾** | `<fmt:formatNumber>` æ ¼å¼åŒ–ä»·æ ¼ | æŠŠæ•°å­—å˜æˆè´§å¸æ ¼å¼æ˜¾ç¤º |
| **è¡¨å•æäº¤** | æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦çš„äº¤äº’ | ç‚¹å‡»æŒ‰é’®å°±å‘é€æ•°æ®åˆ°åç«¯ |

> ğŸ’¡ **æ–°æ‰‹æç¤º**  
> å•†å“åˆ—è¡¨é¡µé¢å°±åƒå•†åº—çš„è´§æ¶ï¼Œæ¯ä¸ªå•†å“éƒ½æœ‰è‡ªå·±çš„"å°å¡ç‰‡"ï¼Œæ˜¾ç¤ºå›¾ç‰‡ã€åå­—ã€ä»·æ ¼ï¼Œè¿˜æœ‰"åŠ å…¥è´­ç‰©è½¦"æŒ‰é’®

---

## 4. ğŸ’¾ è´­ç‰©è½¦æ•°æ®ç®¡ç†


### 4.1 Sessionä¼šè¯ç®¡ç†åŸç†


**ğŸ”„ ä¼šè¯ç®¡ç†æœºåˆ¶**ï¼š

```
ç”¨æˆ·è®¿é—®ç½‘ç«™ â†’ æœåŠ¡å™¨åˆ›å»ºSession â†’ åˆ†é…SessionID â†’ å­˜å‚¨åœ¨Cookieä¸­

Sessionå°±åƒï¼š
ç°å®: æœåŠ¡å‘˜è®¤è¯†ä½ ï¼Œè®°ä½ä½ ç‚¹çš„èœ
ç½‘ç»œ: æœåŠ¡å™¨è®¤è¯†ä½ ï¼Œè®°ä½ä½ çš„è´­ç‰©è½¦
```

**ğŸ“‹ Sessionå­˜å‚¨è´­ç‰©è½¦çš„ä¼˜åŠ¿**ï¼š
- âœ… **ä¸´æ—¶æ€§**ï¼šæµè§ˆå™¨å…³é—­åæ•°æ®è‡ªåŠ¨æ¸…é™¤
- âœ… **å®‰å…¨æ€§**ï¼šæ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥ä¿®æ”¹
- âœ… **ä¾¿æ·æ€§**ï¼šä¸éœ€è¦ç”¨æˆ·ç™»å½•å°±èƒ½ä½¿ç”¨è´­ç‰©è½¦åŠŸèƒ½

### 4.2 è´­ç‰©è½¦ç®¡ç†æ ¸å¿ƒä»£ç 


**ğŸ¯ CartServletæ ¸å¿ƒé€»è¾‘**ï¼š

```java
@WebServlet("/cart")
public class CartServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String action = request.getParameter("action");
        
        // ä»Sessionä¸­è·å–è´­ç‰©è½¦ï¼ˆå¦‚æœæ²¡æœ‰å°±åˆ›å»ºæ–°çš„ï¼‰
        ShoppingCart cart = (ShoppingCart) request.getSession().getAttribute("cart");
        if (cart == null) {
            cart = new ShoppingCart();
            request.getSession().setAttribute("cart", cart);
        }
        
        // æ ¹æ®æ“ä½œç±»å‹å¤„ç†ä¸åŒé€»è¾‘
        switch (action) {
            case "add":
                addToCart(request, cart);
                break;
            case "update":
                updateQuantity(request, cart);
                break;
            case "remove":
                removeFromCart(request, cart);
                break;
            case "clear":
                clearCart(cart);
                break;
        }
        
        // é‡å®šå‘å›è´­ç‰©è½¦é¡µé¢
        response.sendRedirect("cart.jsp");
    }
    
    // æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
    private void addToCart(HttpServletRequest request, ShoppingCart cart) {
        int productId = Integer.parseInt(request.getParameter("productId"));
        int quantity = Integer.parseInt(request.getParameter("quantity"));
        
        // è·å–å•†å“ä¿¡æ¯
        ProductService productService = new ProductService();
        Product product = productService.getProductById(productId);
        
        // æ£€æŸ¥è´­ç‰©è½¦ä¸­æ˜¯å¦å·²æœ‰è¯¥å•†å“
        CartItem existingItem = cart.findItemByProductId(productId);
        
        if (existingItem != null) {
            // å¦‚æœå·²å­˜åœ¨ï¼Œå¢åŠ æ•°é‡
            existingItem.setQuantity(existingItem.getQuantity() + quantity);
        } else {
            // å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„è´­ç‰©è½¦é¡¹ç›®
            CartItem newItem = new CartItem(product, quantity);
            cart.addItem(newItem);
        }
        
        // é‡æ–°è®¡ç®—æ€»é‡‘é¢
        cart.calculateTotal();
    }
}
```

### 4.3 è´­ç‰©è½¦ä¸šåŠ¡é€»è¾‘ç±»


**ğŸ—ï¸ ShoppingCartç±»è¯¦ç»†å®ç°**ï¼š

```java
public class ShoppingCart {
    private List<CartItem> items = new ArrayList<>();
    private double totalAmount = 0.0;
    private double discountAmount = 0.0;
    
    // æ·»åŠ å•†å“é¡¹ç›®
    public void addItem(CartItem item) {
        items.add(item);
        calculateTotal();
    }
    
    // æ ¹æ®å•†å“IDæŸ¥æ‰¾è´­ç‰©è½¦é¡¹ç›®
    public CartItem findItemByProductId(int productId) {
        for (CartItem item : items) {
            if (item.getProduct().getId() == productId) {
                return item;
            }
        }
        return null;
    }
    
    // ç§»é™¤å•†å“
    public void removeItem(int productId) {
        items.removeIf(item -> item.getProduct().getId() == productId);
        calculateTotal();
    }
    
    // æ¸…ç©ºè´­ç‰©è½¦
    public void clear() {
        items.clear();
        totalAmount = 0.0;
        discountAmount = 0.0;
    }
    
    // è®¡ç®—æ€»é‡‘é¢
    public void calculateTotal() {
        totalAmount = items.stream()
                          .mapToDouble(CartItem::getSubtotal)
                          .sum();
    }
    
    // è·å–å•†å“æ€»æ•°é‡
    public int getItemCount() {
        return items.stream()
                   .mapToInt(CartItem::getQuantity)
                   .sum();
    }
    
    // è·å–æœ€ç»ˆé‡‘é¢ï¼ˆæ‰£é™¤ä¼˜æƒ ï¼‰
    public double getFinalAmount() {
        return totalAmount - discountAmount;
    }
}
```

---

## 5. ğŸ’° ä»·æ ¼è®¡ç®—ä¸é‡‘é¢å¤„ç†


### 5.1 é‡‘é¢è®¡ç®—çš„æ ¸å¿ƒé€»è¾‘


**ğŸ§® ä»·æ ¼è®¡ç®—å±‚æ¬¡**ï¼š

```
å•ä»· Ã— æ•°é‡ = å°è®¡é‡‘é¢
æ‰€æœ‰å°è®¡ç›¸åŠ  = å•†å“æ€»é‡‘é¢  
å•†å“æ€»é‡‘é¢ - ä¼˜æƒ é‡‘é¢ = æœ€ç»ˆé‡‘é¢
æœ€ç»ˆé‡‘é¢ + è¿è´¹ = åº”ä»˜é‡‘é¢
```

> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒè¶…å¸‚å°ç¥¨ä¸€æ ·  
> ç‰›å¥¶ 3.5å…ƒ Ã— 2ç›’ = 7.0å…ƒ  
> é¢åŒ… 6.0å…ƒ Ã— 1ä¸ª = 6.0å…ƒ  
> å°è®¡: 13.0å…ƒ, ä¼˜æƒ åˆ¸: -2.0å…ƒ, åˆè®¡: 11.0å…ƒ

### 5.2 é‡‘é¢æ ¼å¼åŒ–æ˜¾ç¤º


**ğŸ¨ è´­ç‰©è½¦é¡µé¢å±•ç¤º**ï¼š

```jsp
<%-- cart.jsp - è´­ç‰©è½¦é¡µé¢ --%>
<div class="cart-container">
    <h2>ğŸ›’ æˆ‘çš„è´­ç‰©è½¦</h2>
    
    <c:choose>
        <c:when test="${empty sessionScope.cart.items}">
            <div class="empty-cart">
                <p>ğŸ˜Š æ‚¨çš„è´­ç‰©è½¦è¿˜æ˜¯ç©ºçš„ï¼Œå»é€‰è´­ä¸€äº›å•†å“å§ï¼</p>
                <a href="products" class="continue-shopping">ç»§ç»­è´­ç‰©</a>
            </div>
        </c:when>
        <c:otherwise>
            <!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨ -->
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>å•†å“ä¿¡æ¯</th>
                        <th>å•ä»·</th>
                        <th>æ•°é‡</th>
                        <th>å°è®¡</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach items="${sessionScope.cart.items}" var="item" varStatus="status">
                        <tr>
                            <td class="product-info">
                                <img src="images/${item.product.image}" alt="${item.product.name}" width="60">
                                <div class="product-details">
                                    <h4>${item.product.name}</h4>
                                    <p class="description">${item.product.description}</p>
                                </div>
                            </td>
                            <td class="price">
                                Â¥<fmt:formatNumber value="${item.product.price}" pattern="#,##0.00"/>
                            </td>
                            <td class="quantity">
                                <form action="cart" method="post" class="quantity-form">
                                    <input type="hidden" name="action" value="update">
                                    <input type="hidden" name="productId" value="${item.product.id}">
                                    <input type="number" name="quantity" value="${item.quantity}" 
                                           min="1" max="99" class="qty-input">
                                    <button type="submit" class="update-btn">æ›´æ–°</button>
                                </form>
                            </td>
                            <td class="subtotal">
                                Â¥<fmt:formatNumber value="${item.subtotal}" pattern="#,##0.00"/>
                            </td>
                            <td class="actions">
                                <form action="cart" method="post" style="display:inline;">
                                    <input type="hidden" name="action" value="remove">
                                    <input type="hidden" name="productId" value="${item.product.id}">
                                    <button type="submit" class="remove-btn" 
                                            onclick="return confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ')">ğŸ—‘ï¸ åˆ é™¤</button>
                                </form>
                            </td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
            
            <!-- ä»·æ ¼æ±‡æ€»åŒºåŸŸ -->
            <div class="cart-summary">
                <div class="summary-row">
                    <span>å•†å“æ€»æ•°é‡ï¼š</span>
                    <span class="highlight">${sessionScope.cart.itemCount} ä»¶</span>
                </div>
                <div class="summary-row">
                    <span>å•†å“æ€»é‡‘é¢ï¼š</span>
                    <span>Â¥<fmt:formatNumber value="${sessionScope.cart.totalAmount}" pattern="#,##0.00"/></span>
                </div>
                <c:if test="${sessionScope.cart.discountAmount > 0}">
                    <div class="summary-row discount">
                        <span>ä¼˜æƒ é‡‘é¢ï¼š</span>
                        <span>-Â¥<fmt:formatNumber value="${sessionScope.cart.discountAmount}" pattern="#,##0.00"/></span>
                    </div>
                </c:if>
                <div class="summary-row total">
                    <span>åº”ä»˜é‡‘é¢ï¼š</span>
                    <span class="final-amount">Â¥<fmt:formatNumber value="${sessionScope.cart.finalAmount}" pattern="#,##0.00"/></span>
                </div>
            </div>
        </c:otherwise>
    </c:choose>
</div>
```

### 5.3 æ•°å­—æ ¼å¼åŒ–æœ€ä½³å®è·µ


**ğŸ“Š æ ¼å¼åŒ–æŠ€æœ¯å¯¹æ¯”**ï¼š

| **æ–¹æ³•** | **ç”¨é€”** | **ç¤ºä¾‹** | **æ¨èåº¦** |
|----------|----------|----------|------------|
| `fmt:formatNumber` | é¡µé¢æ˜¾ç¤ºæ ¼å¼åŒ– | `Â¥1,234.56` | â­â­â­â­â­ |
| `DecimalFormat` | Javaä»£ç æ ¼å¼åŒ– | `new DecimalFormat("#,##0.00")` | â­â­â­â­ |
| `String.format` | ç®€å•æ ¼å¼åŒ– | `String.format("%.2f", price)` | â­â­â­ |

> ğŸ¯ **æœ€ä½³å®è·µ**ï¼šé¡µé¢æ˜¾ç¤ºç”¨JSTLæ ¼å¼åŒ–æ ‡ç­¾ï¼Œåç«¯è®¡ç®—ç”¨BigDecimalé¿å…ç²¾åº¦é—®é¢˜

---

## 6. ğŸ”„ æ•°é‡ä¿®æ”¹ä¸åŠ¨æ€æ›´æ–°


### 6.1 æ•°é‡ä¿®æ”¹çš„ç”¨æˆ·ä½“éªŒè®¾è®¡


**ğŸ¨ äº¤äº’è®¾è®¡æ€è·¯**ï¼š

```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š
ä¿®æ”¹æ•°é‡è¾“å…¥æ¡† â†’ ç‚¹å‡»æ›´æ–°æŒ‰é’® â†’ å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ â†’ é‡æ–°è®¡ç®—é‡‘é¢ â†’ åˆ·æ–°é¡µé¢æ˜¾ç¤º

ä¼˜åŒ–ç›®æ ‡ï¼š
- æ“ä½œç®€å•ï¼šä¸€é”®æ›´æ–°
- åé¦ˆåŠæ—¶ï¼šç«‹å³çœ‹åˆ°å˜åŒ–  
- é˜²æ­¢è¯¯æ“ä½œï¼šç¡®è®¤æç¤º
```

### 6.2 æ•°é‡æ›´æ–°å¤„ç†é€»è¾‘


**âš™ï¸ åç«¯æ›´æ–°é€»è¾‘**ï¼š

```java
// CartServletä¸­çš„updateQuantityæ–¹æ³•
private void updateQuantity(HttpServletRequest request, ShoppingCart cart) {
    try {
        int productId = Integer.parseInt(request.getParameter("productId"));
        int newQuantity = Integer.parseInt(request.getParameter("quantity"));
        
        // æ•°é‡åˆæ³•æ€§æ ¡éªŒ
        if (newQuantity <= 0) {
            // æ•°é‡ä¸º0æˆ–è´Ÿæ•°æ—¶ï¼Œåˆ é™¤è¯¥å•†å“
            cart.removeItem(productId);
            return;
        }
        
        if (newQuantity > 99) {
            newQuantity = 99; // é™åˆ¶æœ€å¤§æ•°é‡
        }
        
        // æŸ¥æ‰¾å¹¶æ›´æ–°å•†å“æ•°é‡
        CartItem item = cart.findItemByProductId(productId);
        if (item != null) {
            item.setQuantity(newQuantity);
            cart.calculateTotal(); // é‡æ–°è®¡ç®—æ€»é‡‘é¢
        }
        
    } catch (NumberFormatException e) {
        // å¤„ç†æ•°å­—æ ¼å¼å¼‚å¸¸
        System.out.println("æ•°é‡æ ¼å¼é”™è¯¯: " + e.getMessage());
    }
}
```

### 6.3 åº“å­˜æ£€æŸ¥ä¸é™åˆ¶


**ğŸ“¦ åº“å­˜ç®¡ç†é›†æˆ**ï¼š

```java
// å¸¦åº“å­˜æ£€æŸ¥çš„æ•°é‡æ›´æ–°
private void updateQuantityWithStock(HttpServletRequest request, ShoppingCart cart) {
    int productId = Integer.parseInt(request.getParameter("productId"));
    int requestedQuantity = Integer.parseInt(request.getParameter("quantity"));
    
    // è·å–å•†å“åº“å­˜ä¿¡æ¯
    ProductService productService = new ProductService();
    Product product = productService.getProductById(productId);
    int availableStock = product.getStock();
    
    // æ£€æŸ¥åº“å­˜æ˜¯å¦è¶³å¤Ÿ
    if (requestedQuantity > availableStock) {
        // åº“å­˜ä¸è¶³ï¼Œè®¾ç½®ä¸ºæœ€å¤§å¯ç”¨æ•°é‡
        request.setAttribute("stockWarning", 
            "å•†å“ " + product.getName() + " åº“å­˜ä¸è¶³ï¼Œå·²è°ƒæ•´ä¸ºæœ€å¤§å¯è´­ä¹°æ•°é‡ï¼š" + availableStock);
        requestedQuantity = availableStock;
    }
    
    // æ›´æ–°è´­ç‰©è½¦ä¸­çš„æ•°é‡
    CartItem item = cart.findItemByProductId(productId);
    if (item != null) {
        item.setQuantity(requestedQuantity);
        cart.calculateTotal();
    }
}
```

---

## 7. ğŸ« ä¼˜æƒ åˆ¸ç³»ç»Ÿé›†æˆ


### 7.1 ä¼˜æƒ åˆ¸ç±»å‹è®¾è®¡


**ğŸ·ï¸ ä¼˜æƒ åˆ¸åˆ†ç±»ä½“ç³»**ï¼š

```java
// ä¼˜æƒ åˆ¸æšä¸¾ç±»å‹
public enum CouponType {
    PERCENTAGE("ç™¾åˆ†æ¯”æŠ˜æ‰£", "æ‰“æŠ˜ä¼˜æƒ "),
    FIXED_AMOUNT("å›ºå®šé‡‘é¢", "æ»¡å‡ä¼˜æƒ "), 
    FREE_SHIPPING("å…è¿è´¹", "åŒ…é‚®ä¼˜æƒ "),
    BUY_GET("ä¹°èµ ", "ä¹°Né€Mä¼˜æƒ ");
    
    private String displayName;
    private String description;
}

// ä¼˜æƒ åˆ¸å®ä½“ç±»
public class Coupon {
    private int id;
    private String code;              // ä¼˜æƒ åˆ¸ç 
    private CouponType type;          // ä¼˜æƒ åˆ¸ç±»å‹
    private double value;             // ä¼˜æƒ æ•°å€¼
    private double minAmount;         // æœ€å°æ¶ˆè´¹é‡‘é¢
    private Date expireDate;          // è¿‡æœŸæ—¶é—´
    private boolean isUsed;           // æ˜¯å¦å·²ä½¿ç”¨
    
    // è®¡ç®—ä¼˜æƒ é‡‘é¢çš„æ–¹æ³•
    public double calculateDiscount(double totalAmount) {
        if (totalAmount < minAmount) {
            return 0; // ä¸æ»¡è¶³æœ€å°æ¶ˆè´¹è¦æ±‚
        }
        
        switch (type) {
            case PERCENTAGE:
                return totalAmount * (value / 100.0);
            case FIXED_AMOUNT:
                return Math.min(value, totalAmount);
            case FREE_SHIPPING:
                return 0; // å…è¿è´¹ä¼˜æƒ åœ¨è¿è´¹è®¡ç®—ä¸­å¤„ç†
            default:
                return 0;
        }
    }
}
```

### 7.2 ä¼˜æƒ åˆ¸åº”ç”¨ç•Œé¢


**ğŸ¨ ä¼˜æƒ åˆ¸é€‰æ‹©åŒºåŸŸ**ï¼š

```jsp
<!-- ä¼˜æƒ åˆ¸åº”ç”¨åŒºåŸŸ -->
<div class="coupon-section">
    <h3>ğŸ« ä¼˜æƒ åˆ¸</h3>
    
    <!-- å¯ç”¨ä¼˜æƒ åˆ¸åˆ—è¡¨ -->
    <div class="available-coupons">
        <c:forEach items="${availableCoupons}" var="coupon">
            <div class="coupon-card ${coupon.id == sessionScope.selectedCouponId ? 'selected' : ''}">
                <div class="coupon-info">
                    <span class="coupon-name">${coupon.displayName}</span>
                    <span class="coupon-desc">${coupon.description}</span>
                    <c:choose>
                        <c:when test="${coupon.type == 'PERCENTAGE'}">
                            <span class="coupon-value">${coupon.value}% OFF</span>
                        </c:when>
                        <c:otherwise>
                            <span class="coupon-value">Â¥${coupon.value}</span>
                        </c:otherwise>
                    </c:choose>
                </div>
                
                <!-- åº”ç”¨ä¼˜æƒ åˆ¸æŒ‰é’® -->
                <form action="cart" method="post" style="display:inline;">
                    <input type="hidden" name="action" value="applyCoupon">
                    <input type="hidden" name="couponId" value="${coupon.id}">
                    <button type="submit" class="apply-coupon-btn"
                            ${sessionScope.cart.totalAmount < coupon.minAmount ? 'disabled' : ''}>
                        ${coupon.id == sessionScope.selectedCouponId ? 'å·²åº”ç”¨' : 'ä½¿ç”¨ä¼˜æƒ åˆ¸'}
                    </button>
                </form>
                
                <!-- ä½¿ç”¨æ¡ä»¶æç¤º -->
                <c:if test="${sessionScope.cart.totalAmount < coupon.minAmount}">
                    <p class="coupon-condition">
                        è¿˜éœ€æ¶ˆè´¹ Â¥<fmt:formatNumber value="${coupon.minAmount - sessionScope.cart.totalAmount}" pattern="#,##0.00"/> å³å¯ä½¿ç”¨
                    </p>
                </c:if>
            </div>
        </c:forEach>
    </div>
    
    <!-- ä¼˜æƒ åˆ¸ç è¾“å…¥ -->
    <div class="coupon-code-input">
        <form action="cart" method="post" class="coupon-form">
            <input type="hidden" name="action" value="applyCouponCode">
            <input type="text" name="couponCode" placeholder="è¯·è¾“å…¥ä¼˜æƒ åˆ¸ç " class="coupon-input">
            <button type="submit" class="coupon-submit">ä½¿ç”¨</button>
        </form>
    </div>
</div>
```

### 7.3 ä¼˜æƒ åˆ¸åº”ç”¨é€»è¾‘


**ğŸ¯ ä¼˜æƒ åˆ¸å¤„ç†æœåŠ¡**ï¼š

```java
// ä¼˜æƒ åˆ¸æœåŠ¡ç±»
public class CouponService {
    
    // åº”ç”¨ä¼˜æƒ åˆ¸åˆ°è´­ç‰©è½¦
    public boolean applyCoupon(ShoppingCart cart, Coupon coupon) {
        // æ£€æŸ¥ä¼˜æƒ åˆ¸æ˜¯å¦æœ‰æ•ˆ
        if (!isValidCoupon(coupon, cart.getTotalAmount())) {
            return false;
        }
        
        // è®¡ç®—ä¼˜æƒ é‡‘é¢
        double discountAmount = coupon.calculateDiscount(cart.getTotalAmount());
        
        // åº”ç”¨ä¼˜æƒ 
        cart.setDiscountAmount(discountAmount);
        cart.setAppliedCoupon(coupon);
        
        return true;
    }
    
    // éªŒè¯ä¼˜æƒ åˆ¸æœ‰æ•ˆæ€§
    private boolean isValidCoupon(Coupon coupon, double totalAmount) {
        // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if (coupon.getExpireDate().before(new Date())) {
            return false;
        }
        
        // æ£€æŸ¥æ˜¯å¦å·²ä½¿ç”¨
        if (coupon.isUsed()) {
            return false;
        }
        
        // æ£€æŸ¥æœ€å°æ¶ˆè´¹é‡‘é¢
        if (totalAmount < coupon.getMinAmount()) {
            return false;
        }
        
        return true;
    }
}
```

---

## 8. ğŸ›’ æ¸…ç©ºä¸ç»“ç®—åŠŸèƒ½


### 8.1 æ¸…ç©ºè´­ç‰©è½¦åŠŸèƒ½


**ğŸ—‘ï¸ æ¸…ç©ºæ“ä½œå®ç°**ï¼š

```java
// æ¸…ç©ºè´­ç‰©è½¦çš„å¤„ç†é€»è¾‘
private void clearCart(ShoppingCart cart) {
    cart.clear();
    // å¯ä»¥è®°å½•ç”¨æˆ·è¡Œä¸ºæ—¥å¿—
    System.out.println("ç”¨æˆ·æ¸…ç©ºäº†è´­ç‰©è½¦ï¼Œæ—¶é—´ï¼š" + new Date());
}
```

**ğŸ¨ æ¸…ç©ºç¡®è®¤ç•Œé¢**ï¼š

```jsp
<!-- è´­ç‰©è½¦æ“ä½œæŒ‰é’®åŒºåŸŸ -->
<div class="cart-actions">
    <form action="cart" method="post" style="display:inline;" 
          onsubmit="return confirm('ç¡®å®šè¦æ¸…ç©ºæ•´ä¸ªè´­ç‰©è½¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')">
        <input type="hidden" name="action" value="clear">
        <button type="submit" class="clear-cart-btn">ğŸ—‘ï¸ æ¸…ç©ºè´­ç‰©è½¦</button>
    </form>
    
    <a href="products" class="continue-shopping-btn">ğŸ›ï¸ ç»§ç»­è´­ç‰©</a>
    
    <c:if test="${not empty sessionScope.cart.items}">
        <button onclick="goToCheckout()" class="checkout-btn">ğŸ’³ å»ç»“ç®—</button>
    </c:if>
</div>

<script>
function goToCheckout() {
    // ç»“ç®—å‰çš„æœ€åç¡®è®¤
    var totalAmount = ${sessionScope.cart.finalAmount};
    var itemCount = ${sessionScope.cart.itemCount};
    
    if (confirm('ç¡®è®¤æäº¤è®¢å•ï¼Ÿ\nå•†å“æ•°é‡ï¼š' + itemCount + ' ä»¶\nåº”ä»˜é‡‘é¢ï¼šÂ¥' + totalAmount.toFixed(2))) {
        window.location.href = 'checkout.jsp';
    }
}
</script>
```

### 8.2 è®¢å•ç»“ç®—æµç¨‹


**ğŸ“‹ ç»“ç®—é¡µé¢è®¾è®¡**ï¼š

```jsp
<%-- checkout.jsp - è®¢å•ç»“ç®—é¡µé¢ --%>
<div class="checkout-container">
    <h2>ğŸ“‹ è®¢å•ç»“ç®—</h2>
    
    <!-- è®¢å•å•†å“æ‘˜è¦ -->
    <div class="order-summary">
        <h3>ğŸ“¦ å•†å“æ¸…å•</h3>
        <c:forEach items="${sessionScope.cart.items}" var="item">
            <div class="order-item">
                <span class="item-name">${item.product.name}</span>
                <span class="item-qty">Ã— ${item.quantity}</span>
                <span class="item-price">Â¥<fmt:formatNumber value="${item.subtotal}" pattern="#,##0.00"/></span>
            </div>
        </c:forEach>
    </div>
    
    <!-- ä»·æ ¼æ˜ç»† -->
    <div class="price-breakdown">
        <div class="breakdown-row">
            <span>å•†å“æ€»é¢ï¼š</span>
            <span>Â¥<fmt:formatNumber value="${sessionScope.cart.totalAmount}" pattern="#,##0.00"/></span>
        </div>
        <c:if test="${sessionScope.cart.discountAmount > 0}">
            <div class="breakdown-row discount">
                <span>ä¼˜æƒ å‡å…ï¼š</span>
                <span>-Â¥<fmt:formatNumber value="${sessionScope.cart.discountAmount}" pattern="#,##0.00"/></span>
            </div>
        </c:if>
        <div class="breakdown-row shipping">
            <span>è¿è´¹ï¼š</span>
            <span>Â¥<fmt:formatNumber value="${shippingFee}" pattern="#,##0.00"/></span>
        </div>
        <div class="breakdown-row total">
            <span>åº”ä»˜æ€»é¢ï¼š</span>
            <span class="total-amount">Â¥<fmt:formatNumber value="${sessionScope.cart.finalAmount + shippingFee}" pattern="#,##0.00"/></span>
        </div>
    </div>
    
    <!-- ç»“ç®—è¡¨å• -->
    <form action="order" method="post" class="checkout-form">
        <input type="hidden" name="action" value="submit">
        
        <div class="payment-section">
            <h3>ğŸ’³ æ”¯ä»˜æ–¹å¼</h3>
            <label><input type="radio" name="paymentMethod" value="alipay" checked> æ”¯ä»˜å®</label>
            <label><input type="radio" name="paymentMethod" value="wechat"> å¾®ä¿¡æ”¯ä»˜</label>
            <label><input type="radio" name="paymentMethod" value="unionpay"> é“¶è”æ”¯ä»˜</label>
        </div>
        
        <div class="form-actions">
            <button type="button" onclick="history.back()" class="back-btn">è¿”å›è´­ç‰©è½¦</button>
            <button type="submit" class="submit-order-btn">ğŸ’° æäº¤è®¢å•</button>
        </div>
    </form>
</div>
```

### 8.3 è®¢å•æäº¤å¤„ç†


**âš™ï¸ è®¢å•å¤„ç†é€»è¾‘**ï¼š

```java
@WebServlet("/order")
public class OrderServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String action = request.getParameter("action");
        
        if ("submit".equals(action)) {
            submitOrder(request, response);
        }
    }
    
    private void submitOrder(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–è´­ç‰©è½¦æ•°æ®
        ShoppingCart cart = (ShoppingCart) request.getSession().getAttribute("cart");
        
        if (cart == null || cart.getItems().isEmpty()) {
            response.sendRedirect("cart.jsp?error=empty");
            return;
        }
        
        try {
            // åˆ›å»ºè®¢å•å¯¹è±¡
            Order order = new Order();
            order.setOrderId(generateOrderId());
            order.setItems(cart.getItems());
            order.setTotalAmount(cart.getFinalAmount());
            order.setPaymentMethod(request.getParameter("paymentMethod"));
            order.setCreateTime(new Date());
            
            // ä¿å­˜è®¢å•åˆ°æ•°æ®åº“ï¼ˆæ¨¡æ‹Ÿï¼‰
            OrderService orderService = new OrderService();
            boolean success = orderService.saveOrder(order);
            
            if (success) {
                // æ¸…ç©ºè´­ç‰©è½¦
                cart.clear();
                
                // è·³è½¬åˆ°æˆåŠŸé¡µé¢
                request.setAttribute("order", order);
                request.getRequestDispatcher("orderSuccess.jsp").forward(request, response);
            } else {
                response.sendRedirect("checkout.jsp?error=failed");
            }
            
        } catch (Exception e) {
            e.printStackTrace();
            response.sendRedirect("checkout.jsp?error=system");
        }
    }
    
    // ç”Ÿæˆè®¢å•å·
    private String generateOrderId() {
        return "ORD" + System.currentTimeMillis();
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è´­ç‰©è½¦æœ¬è´¨ï¼šä¸´æ—¶å­˜å‚¨ç”¨æˆ·é€‰æ‹©å•†å“çš„å®¹å™¨ï¼Œç±»ä¼¼ç°å®è´­ç‰©è½¦
ğŸ”¸ Sessionç®¡ç†ï¼šæœåŠ¡å™¨ç«¯ä¼šè¯æŠ€æœ¯ï¼Œç”¨äºä¿æŒç”¨æˆ·çŠ¶æ€å’Œè´­ç‰©è½¦æ•°æ®
ğŸ”¸ æ•°æ®ç»“æ„ï¼šProduct â†’ CartItem â†’ ShoppingCart ä¸‰å±‚æ•°æ®æ¨¡å‹
ğŸ”¸ CRUDæ“ä½œï¼šCreate(æ·»åŠ )ã€Read(æŸ¥çœ‹)ã€Update(ä¿®æ”¹)ã€Delete(åˆ é™¤)
ğŸ”¸ é‡‘é¢è®¡ç®—ï¼šå•ä»·Ã—æ•°é‡=å°è®¡ï¼Œæ‰€æœ‰å°è®¡ç›¸åŠ =æ€»é¢ï¼Œæ€»é¢-ä¼˜æƒ =æœ€ç»ˆé‡‘é¢
```

### 9.2 å…³é”®æŠ€æœ¯è¦ç‚¹


**ğŸ”¹ å‰ç«¯é¡µé¢æŠ€æœ¯**ï¼š
- **JSTLæ ‡ç­¾**ï¼š`<c:forEach>` å¾ªç¯æ˜¾ç¤ºå•†å“ï¼Œ`<c:choose>` æ¡ä»¶åˆ¤æ–­
- **ELè¡¨è¾¾å¼**ï¼š`${sessionScope.cart.totalAmount}` è·å–ä¼šè¯æ•°æ®
- **æ ¼å¼åŒ–æ˜¾ç¤º**ï¼š`<fmt:formatNumber>` æ ¼å¼åŒ–é‡‘é¢æ˜¾ç¤º

**ğŸ”¹ åç«¯å¤„ç†æŠ€æœ¯**ï¼š
- **Servletå¤„ç†**ï¼šæ¥æ”¶è¯·æ±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›å“åº”
- **Sessionç®¡ç†**ï¼šå­˜å‚¨è´­ç‰©è½¦æ•°æ®ï¼Œä¿æŒç”¨æˆ·çŠ¶æ€
- **æ•°æ®å°è£…**ï¼šJavaBeanå°è£…å•†å“å’Œè´­ç‰©è½¦ä¿¡æ¯

**ğŸ”¹ ä¸šåŠ¡é€»è¾‘è®¾è®¡**ï¼š
- **è´­ç‰©è½¦ç®¡ç†**ï¼šæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€æ¸…ç©ºå•†å“
- **ä»·æ ¼è®¡ç®—**ï¼šè‡ªåŠ¨è®¡ç®—å°è®¡å’Œæ€»è®¡
- **ä¼˜æƒ åˆ¸ç³»ç»Ÿ**ï¼šå¤šç§ä¼˜æƒ æ–¹å¼çš„è®¾è®¡å’Œåº”ç”¨

### 9.3 å®é™…å¼€å‘ç»éªŒ


**ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
ä¼šè¯ç®¡ç†ï¼š
- åˆç†è®¾ç½®Sessionè¶…æ—¶æ—¶é—´
- åŠæ—¶æ¸…ç†æ— ç”¨çš„è´­ç‰©è½¦æ•°æ®
- è€ƒè™‘ä½¿ç”¨Redisç­‰ç¼“å­˜æ–¹æ¡ˆ

æ•°æ®è®¡ç®—ï¼š
- ä½¿ç”¨BigDecimalå¤„ç†é‡‘é¢ï¼Œé¿å…ç²¾åº¦é—®é¢˜  
- åœ¨åˆé€‚çš„æ—¶æœºé‡æ–°è®¡ç®—æ€»é¢
- ç¼“å­˜è®¡ç®—ç»“æœï¼Œå‡å°‘é‡å¤è®¡ç®—
```

**ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹**ï¼š
```
è¾“å…¥éªŒè¯ï¼š
- å•†å“æ•°é‡èŒƒå›´æ£€æŸ¥(1-99)
- å•†å“IDåˆæ³•æ€§éªŒè¯
- é˜²æ­¢SQLæ³¨å…¥å’ŒXSSæ”»å‡»

æƒé™æ§åˆ¶ï¼š
- ç”¨æˆ·åªèƒ½æ“ä½œè‡ªå·±çš„è´­ç‰©è½¦
- æ•æ„Ÿæ“ä½œéœ€è¦ç¡®è®¤
- é˜²æ­¢æ¶æ„åˆ·å•å’Œçˆ¬è™«
```

**ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼š
```
äº¤äº’è®¾è®¡ï¼š
- æ“ä½œåé¦ˆè¦åŠæ—¶æ˜ç¡®
- é”™è¯¯æç¤ºè¦å‹å¥½æ˜“æ‡‚
- é‡è¦æ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤

é¡µé¢æ€§èƒ½ï¼š
- å‡å°‘ä¸å¿…è¦çš„é¡µé¢åˆ·æ–°
- åˆç†ä½¿ç”¨Ajaxå¼‚æ­¥æ›´æ–°
- å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©ä¼˜åŒ–
```

### 9.4 å­¦ä¹ ä»·å€¼ä¸æ‰©å±•


**ğŸ“ çŸ¥è¯†ç‚¹ä»·å€¼**ï¼š
- **MVCæ¨¡å¼ç†è§£**ï¼šé€šè¿‡è´­ç‰©è½¦é¡¹ç›®ç†è§£Model-View-Controlleræ¶æ„
- **ä¼šè¯ç®¡ç†æŒæ¡**ï¼šSessionæŠ€æœ¯åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨
- **å‰åç«¯äº¤äº’**ï¼šè¡¨å•æäº¤ã€æ•°æ®ä¼ é€’ã€é¡µé¢è·³è½¬çš„å®Œæ•´æµç¨‹
- **ä¸šåŠ¡é€»è¾‘è®¾è®¡**ï¼šä»éœ€æ±‚åˆ†æåˆ°ä»£ç å®ç°çš„å®Œæ•´è¿‡ç¨‹

**ğŸš€ åŠŸèƒ½æ‰©å±•æ–¹å‘**ï¼š
- **æŒä¹…åŒ–å­˜å‚¨**ï¼šå°†è´­ç‰©è½¦æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“
- **ç”¨æˆ·ç™»å½•é›†æˆ**ï¼šç»“åˆç”¨æˆ·ç³»ç»Ÿï¼Œå®ç°ä¸ªäººè´­ç‰©è½¦
- **Ajaxä¼˜åŒ–**ï¼šå¼‚æ­¥æ›´æ–°æ•°é‡å’Œé‡‘é¢ï¼Œæ— éœ€åˆ·æ–°é¡µé¢
- **ç§»åŠ¨ç«¯é€‚é…**ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‰‹æœºç«¯æ“ä½œ

> ğŸ§  **æ ¸å¿ƒè®°å¿†**ï¼š
> è´­ç‰©è½¦ = ä¸´æ—¶å®¹å™¨ + ä¼šè¯ç®¡ç† + å¢åˆ æ”¹æŸ¥ + ä»·æ ¼è®¡ç®—
> 
> SessionåƒæœåŠ¡å‘˜ï¼Œè®°ä½æ¯ä¸ªå®¢äººç‚¹çš„èœ  
> JSTLåƒèœå•æ¨¡æ¿ï¼Œæ•´é½æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯  
> Servletåƒå¨å¸ˆé•¿ï¼Œå¤„ç†æ‰€æœ‰çš„è®¢å•è¯·æ±‚