---
title: 2ã€è¡¨å•å¤„ç†å®Œæ•´æ¡ˆä¾‹
---
## ğŸ“š ç›®å½•

1. [è¡¨å•å¤„ç†æŠ€æœ¯æ¦‚è¿°](#1-è¡¨å•å¤„ç†æŠ€æœ¯æ¦‚è¿°)
2. [ç”¨æˆ·æ³¨å†Œè¡¨å•å®Œæ•´æ¡ˆä¾‹](#2-ç”¨æˆ·æ³¨å†Œè¡¨å•å®Œæ•´æ¡ˆä¾‹)
3. [è¡¨å•æ•°æ®å›æ˜¾æŠ€æœ¯](#3-è¡¨å•æ•°æ®å›æ˜¾æŠ€æœ¯)
4. [é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºæœºåˆ¶](#4-é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºæœºåˆ¶)
5. [ä¸‹æ‹‰é€‰é¡¹åŠ¨æ€ç”Ÿæˆ](#5-ä¸‹æ‹‰é€‰é¡¹åŠ¨æ€ç”Ÿæˆ)
6. [å•é€‰å¤é€‰æ¡†å¤„ç†](#6-å•é€‰å¤é€‰æ¡†å¤„ç†)
7. [è¡¨å•éªŒè¯ä¸æç¤º](#7-è¡¨å•éªŒè¯ä¸æç¤º)
8. [æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤º](#8-æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤º)
9. [æäº¤çŠ¶æ€å¤„ç†](#9-æäº¤çŠ¶æ€å¤„ç†)
10. [æœ€ä½³å®è·µæ€»ç»“](#10-æœ€ä½³å®è·µæ€»ç»“)

---

## 1. ğŸ¯ è¡¨å•å¤„ç†æŠ€æœ¯æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯è¡¨å•å¤„ç†


**ç®€å•ç†è§£**ï¼šè¡¨å•å¤„ç†å°±åƒåœ¨é“¶è¡Œå¡«å†™å¼€æˆ·ç”³è¯·è¡¨ä¸€æ ·
- ç”¨æˆ·åœ¨ç½‘é¡µä¸Šå¡«å†™ä¿¡æ¯ï¼ˆå§“åã€ç”µè¯ã€é‚®ç®±ç­‰ï¼‰
- ç‚¹å‡»æäº¤æŒ‰é’®æŠŠä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨
- æœåŠ¡å™¨æ¥æ”¶å¹¶å¤„ç†è¿™äº›æ•°æ®
- ç»™ç”¨æˆ·ä¸€ä¸ªåé¦ˆï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰

### 1.2 è¡¨å•å¤„ç†çš„æ ¸å¿ƒç¯èŠ‚


```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š
å¡«å†™è¡¨å• â†’ ç‚¹å‡»æäº¤ â†’ æœåŠ¡å™¨å¤„ç† â†’ è¿”å›ç»“æœ

æŠ€æœ¯å®ç°ç¯èŠ‚ï¼š
â”œâ”€â”€ ğŸ“ è¡¨å•å±•ç¤ºï¼šç”¨JSP + EL + JSTLæ˜¾ç¤ºè¡¨å•
â”œâ”€â”€ ğŸ”„ æ•°æ®å›æ˜¾ï¼šæäº¤å¤±è´¥æ—¶ä¿ç•™ç”¨æˆ·å·²å¡«æ•°æ®
â”œâ”€â”€ âŒ é”™è¯¯æ˜¾ç¤ºï¼šéªŒè¯å¤±è´¥æ—¶æ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯
â”œâ”€â”€ âœ… æˆåŠŸå¤„ç†ï¼šæ•°æ®éªŒè¯é€šè¿‡åçš„ä¸šåŠ¡å¤„ç†
â””â”€â”€ ğŸ“Š çŠ¶æ€åé¦ˆï¼šå‘Šè¯‰ç”¨æˆ·æ“ä½œæ˜¯å¦æˆåŠŸ
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦ELè¡¨è¾¾å¼å’ŒJSTL


**ä¼ ç»ŸJSPçš„é—®é¢˜**ï¼š
```jsp
<!-- ä¼ ç»Ÿå†™æ³•ï¼šä»£ç æ··ä¹±éš¾ç»´æŠ¤ -->
<%
if(request.getAttribute("user") != null) {
    User user = (User)request.getAttribute("user");
    out.print(user.getUsername());
}
%>
```

**ä½¿ç”¨EL+JSTLå**ï¼š
```jsp
<!-- ç°ä»£å†™æ³•ï¼šç®€æ´æ¸…æ™°æ˜“æ‡‚ -->
<c:if test="${not empty user}">
    ${user.username}
</c:if>
```

> ğŸ’¡ **å…³é”®æ´å¯Ÿ**
> ELè¡¨è¾¾å¼è®©æ•°æ®è·å–å˜ç®€å•ï¼ŒJSTLè®©é¡µé¢é€»è¾‘å˜æ¸…æ™°ï¼Œä¸¤è€…ç»“åˆå°±åƒç»™JSPè£…ä¸Šäº†"æ™ºèƒ½åŠ©æ‰‹"

---

## 2. ğŸ‘¤ ç”¨æˆ·æ³¨å†Œè¡¨å•å®Œæ•´æ¡ˆä¾‹


### 2.1 æ¡ˆä¾‹åœºæ™¯ä»‹ç»


æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼ŒåŒ…å«ï¼š
- ğŸ“ **ç”¨æˆ·ä¿¡æ¯**ï¼šç”¨æˆ·åã€å¯†ç ã€ç¡®è®¤å¯†ç ã€é‚®ç®±
- ğŸ­ **ä¸ªäººèµ„æ–™**ï¼šçœŸå®å§“åã€æ€§åˆ«ã€çˆ±å¥½ã€åŸå¸‚
- âœ… **è¡¨å•éªŒè¯**ï¼šå„ç§è¾“å…¥è§„åˆ™æ£€æŸ¥
- ğŸ”„ **æ•°æ®å›æ˜¾**ï¼šéªŒè¯å¤±è´¥æ—¶ä¿ç•™å·²å¡«ä¿¡æ¯

### 2.2 é¡¹ç›®ç»“æ„è®¾è®¡


```
ç”¨æˆ·æ³¨å†Œé¡¹ç›®ç»“æ„ï¼š
webapp/
â”œâ”€â”€ WEB-INF/
â”‚   â”œâ”€â”€ web.xml           # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ jstl-1.2.jar  # JSTLæ ‡ç­¾åº“
â”œâ”€â”€ css/
â”‚   â””â”€â”€ form.css          # è¡¨å•æ ·å¼
â”œâ”€â”€ js/
â”‚   â””â”€â”€ validation.js     # å‰ç«¯éªŒè¯
â””â”€â”€ pages/
    â”œâ”€â”€ register.jsp      # æ³¨å†Œé¡µé¢
    â””â”€â”€ success.jsp       # æˆåŠŸé¡µé¢

Javaä»£ç ç»“æ„ï¼š
src/
â”œâ”€â”€ entity/
â”‚   â””â”€â”€ User.java         # ç”¨æˆ·å®ä½“ç±»
â”œâ”€â”€ servlet/
â”‚   â””â”€â”€ RegisterServlet.java  # æ³¨å†Œå¤„ç†å™¨
â””â”€â”€ util/
    â””â”€â”€ ValidationUtil.java   # éªŒè¯å·¥å…·ç±»
```

### 2.3 ç”¨æˆ·å®ä½“ç±»è®¾è®¡


```java
// ç”¨æˆ·ä¿¡æ¯çš„è½½ä½“ï¼Œå°±åƒä¸€ä¸ªä¿¡æ¯ç™»è®°è¡¨
public class User {
    private String username;    // ç”¨æˆ·å
    private String password;    // å¯†ç 
    private String email;       // é‚®ç®±
    private String realName;    // çœŸå®å§“å
    private String gender;      // æ€§åˆ«ï¼šmale/female
    private String[] hobbies;   // çˆ±å¥½æ•°ç»„ï¼šreading,music,sports
    private String city;        // åŸå¸‚
    
    // æ„é€ æ–¹æ³•ã€getter/setteræ–¹æ³•...
    // è¿™é‡Œçœç•¥ï¼Œå®é™…é¡¹ç›®ä¸­å¿…é¡»æœ‰
}
```

---

## 3. ğŸ”„ è¡¨å•æ•°æ®å›æ˜¾æŠ€æœ¯


### 3.1 ä»€ä¹ˆæ˜¯æ•°æ®å›æ˜¾


**ç”Ÿæ´»åœºæ™¯ç±»æ¯”**ï¼š
> ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> å°±åƒå¡«å†™çº¸è´¨è¡¨æ ¼æ—¶ï¼Œå¦‚æœæŸä¸€é¡¹å¡«é”™äº†ï¼Œä½ ä¸éœ€è¦é‡æ–°å¡«å†™æ•´å¼ è¡¨æ ¼ï¼Œåªéœ€è¦ä¿®æ”¹é”™è¯¯çš„åœ°æ–¹ã€‚ç½‘é¡µè¡¨å•å›æ˜¾ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚

**æŠ€æœ¯åŸç†**ï¼š
- ç”¨æˆ·æäº¤è¡¨å•åï¼Œå¦‚æœéªŒè¯å¤±è´¥
- æœåŠ¡å™¨æŠŠç”¨æˆ·å·²å¡«å†™çš„æ•°æ®é‡æ–°å‘å›é¡µé¢
- é¡µé¢ä½¿ç”¨ELè¡¨è¾¾å¼æ˜¾ç¤ºè¿™äº›æ•°æ®
- ç”¨æˆ·åªéœ€è¦ä¿®æ”¹é”™è¯¯çš„åœ°æ–¹ï¼Œä¸ç”¨é‡æ–°å¡«å†™

### 3.2 å›æ˜¾æŠ€æœ¯å®ç°


**Servletä¸­çš„æ•°æ®å‡†å¤‡**ï¼š
```java
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) {
        // è·å–è¡¨å•æ•°æ®
        String username = request.getParameter("username");
        String email = request.getParameter("email");
        String realName = request.getParameter("realName");
        // ...å…¶ä»–å­—æ®µ
        
        // éªŒè¯æ•°æ®
        List<String> errors = validateUser(username, email, realName);
        
        if (!errors.isEmpty()) {
            // éªŒè¯å¤±è´¥ï¼šå‡†å¤‡å›æ˜¾æ•°æ®
            request.setAttribute("username", username);
            request.setAttribute("email", email);
            request.setAttribute("realName", realName);
            request.setAttribute("errors", errors);
            
            // è½¬å‘å›æ³¨å†Œé¡µé¢
            request.getRequestDispatcher("/register.jsp").forward(request, response);
        } else {
            // éªŒè¯æˆåŠŸï¼šå¤„ç†æ³¨å†Œé€»è¾‘
            // ...
        }
    }
}
```

**JSPé¡µé¢ä¸­çš„å›æ˜¾æ˜¾ç¤º**ï¼š
```jsp
<!-- ç”¨æˆ·åè¾“å…¥æ¡†ï¼šç”¨ELè¡¨è¾¾å¼å›æ˜¾æ•°æ® -->
<div class="form-group">
    <label for="username">ç”¨æˆ·åï¼š</label>
    <input type="text" id="username" name="username" 
           value="${username}" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
    
    <!-- å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯å°±æ˜¾ç¤º -->
    <c:if test="${not empty errors}">
        <c:forEach var="error" items="${errors}">
            <c:if test="${fn:contains(error, 'ç”¨æˆ·å')}">
                <span class="error">${error}</span>
            </c:if>
        </c:forEach>
    </c:if>
</div>
```

### 3.3 å›æ˜¾çš„å…³é”®æŠ€æœ¯ç‚¹


**ğŸ“ å­¦ä¹ æ£€æŸ¥ç‚¹**
- [ ] ç†è§£å›æ˜¾çš„ç›®çš„ï¼šæå‡ç”¨æˆ·ä½“éªŒ
- [ ] æŒæ¡æ•°æ®ä¼ é€’ï¼šServlet â†’ requestå±æ€§ â†’ JSPé¡µé¢
- [ ] ç†Ÿç»ƒä½¿ç”¨ELè¡¨è¾¾å¼è·å–å±æ€§å€¼

**âš ï¸ æ³¨æ„äº‹é¡¹**
- å¯†ç å­—æ®µé€šå¸¸ä¸å›æ˜¾ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
- æ•æ„Ÿä¿¡æ¯è¦è°¨æ…å¤„ç†
- ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰é¿å…XSSæ”»å‡»

---

## 4. âŒ é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºæœºåˆ¶


### 4.1 é”™è¯¯ä¿¡æ¯çš„åˆ†ç±»


**æŒ‰é”™è¯¯ç±»å‹åˆ†ç±»**ï¼š

| é”™è¯¯ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| ğŸš« **æ ¼å¼é”™è¯¯** | è¾“å…¥æ ¼å¼ä¸ç¬¦åˆè¦æ±‚ | é‚®ç®±æ ¼å¼ä¸æ­£ç¡® |
| ğŸ“ **é•¿åº¦é”™è¯¯** | è¾“å…¥é•¿åº¦è¶…å‡ºé™åˆ¶ | ç”¨æˆ·åå¤ªçŸ­æˆ–å¤ªé•¿ |
| ğŸ”’ **ä¸šåŠ¡é”™è¯¯** | è¿åä¸šåŠ¡è§„åˆ™ | ç”¨æˆ·åå·²å­˜åœ¨ |
| ğŸ”— **å…³è”é”™è¯¯** | å­—æ®µé—´å…³ç³»é”™è¯¯ | ç¡®è®¤å¯†ç ä¸ä¸€è‡´ |

### 4.2 é”™è¯¯ä¿¡æ¯æ”¶é›†ä¸æ˜¾ç¤º


**æœåŠ¡å™¨ç«¯é”™è¯¯æ”¶é›†**ï¼š
```java
// éªŒè¯å·¥å…·ç±»ï¼šä¸“é—¨è´Ÿè´£å„ç§éªŒè¯é€»è¾‘
public class ValidationUtil {
    public static List<String> validateUser(User user) {
        List<String> errors = new ArrayList<>();
        
        // ç”¨æˆ·åéªŒè¯
        if (user.getUsername() == null || user.getUsername().trim().isEmpty()) {
            errors.add("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        } else if (user.getUsername().length() < 3) {
            errors.add("ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦");
        } else if (user.getUsername().length() > 20) {
            errors.add("ç”¨æˆ·åé•¿åº¦ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦");
        }
        
        // é‚®ç®±éªŒè¯
        if (user.getEmail() == null || user.getEmail().trim().isEmpty()) {
            errors.add("é‚®ç®±ä¸èƒ½ä¸ºç©º");
        } else if (!isValidEmail(user.getEmail())) {
            errors.add("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
        }
        
        return errors;
    }
    
    // é‚®ç®±æ ¼å¼éªŒè¯
    private static boolean isValidEmail(String email) {
        String emailRegex = "^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$";
        return email.matches(emailRegex);
    }
}
```

**JSPé¡µé¢é”™è¯¯æ˜¾ç¤º**ï¼š
```jsp
<!-- é”™è¯¯ä¿¡æ¯ç»Ÿä¸€æ˜¾ç¤ºåŒºåŸŸ -->
<c:if test="${not empty errors}">
    <div class="alert alert-error">
        <h4>âš ï¸ è¯·ä¿®æ­£ä»¥ä¸‹é”™è¯¯ï¼š</h4>
        <ul>
            <c:forEach var="error" items="${errors}">
                <li>${error}</li>
            </c:forEach>
        </ul>
    </div>
</c:if>

<!-- å­—æ®µçº§åˆ«çš„é”™è¯¯æç¤º -->
<div class="form-group">
    <label for="username">ç”¨æˆ·åï¼š</label>
    <input type="text" id="username" name="username" 
           value="${username}" class="${not empty usernameError ? 'error' : ''}">
    
    <c:if test="${not empty usernameError}">
        <span class="field-error">${usernameError}</span>
    </c:if>
</div>
```

### 4.3 ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º


**ğŸ’¡ å…³é”®æ´å¯Ÿ**
é”™è¯¯æç¤ºè¦åƒä¸€ä¸ªè€å¿ƒçš„è€å¸ˆï¼Œä¸æ˜¯ç®€å•è¯´"é”™äº†"ï¼Œè€Œæ˜¯å‘Šè¯‰ä½ "å“ªé‡Œé”™äº†"å’Œ"åº”è¯¥æ€ä¹ˆæ”¹"ã€‚

**é”™è¯¯æç¤ºçš„è®¾è®¡åŸåˆ™**ï¼š

```
âŒ ä¸å¥½çš„æç¤ºï¼š"è¾“å…¥é”™è¯¯"
âœ… å¥½çš„æç¤ºï¼š"ç”¨æˆ·åé•¿åº¦åº”åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´"

âŒ ä¸å¥½çš„æç¤ºï¼š"æ ¼å¼ä¸å¯¹" 
âœ… å¥½çš„æç¤ºï¼š"é‚®ç®±æ ¼å¼ç¤ºä¾‹ï¼šexample@email.com"

âŒ ä¸å¥½çš„æç¤ºï¼š"éªŒè¯å¤±è´¥"
âœ… å¥½çš„æç¤ºï¼š"ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ï¼Œè¯·é‡æ–°ç¡®è®¤"
```

---

## 5. ğŸ“‹ ä¸‹æ‹‰é€‰é¡¹åŠ¨æ€ç”Ÿæˆ


### 5.1 é™æ€ä¸‹æ‹‰é€‰é¡¹


**åŸºç¡€çš„åŸå¸‚é€‰æ‹©ä¸‹æ‹‰æ¡†**ï¼š
```jsp
<!-- ä¼ ç»Ÿçš„é™æ€ä¸‹æ‹‰é€‰é¡¹ -->
<select name="city" id="city">
    <option value="">è¯·é€‰æ‹©åŸå¸‚</option>
    <option value="beijing" ${city == 'beijing' ? 'selected' : ''}>åŒ—äº¬</option>
    <option value="shanghai" ${city == 'shanghai' ? 'selected' : ''}>ä¸Šæµ·</option>
    <option value="guangzhou" ${city == 'guangzhou' ? 'selected' : ''}>å¹¿å·</option>
    <option value="shenzhen" ${city == 'shenzhen' ? 'selected' : ''}>æ·±åœ³</option>
</select>
```

**é—®é¢˜åˆ†æ**ï¼š
- é€‰é¡¹å†™æ­»åœ¨é¡µé¢ä¸­ï¼Œéš¾ä»¥ç»´æŠ¤
- æ·»åŠ æ–°åŸå¸‚éœ€è¦ä¿®æ”¹JSPæ–‡ä»¶
- ä»£ç é‡å¤ï¼Œå®¹æ˜“å‡ºé”™

### 5.2 åŠ¨æ€ä¸‹æ‹‰é€‰é¡¹ç”Ÿæˆ


**Servletä¸­å‡†å¤‡é€‰é¡¹æ•°æ®**ï¼š
```java
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // å‡†å¤‡åŸå¸‚é€‰é¡¹æ•°æ®ï¼ˆå®é™…é¡¹ç›®ä¸­å¯èƒ½ä»æ•°æ®åº“è·å–ï¼‰
        Map<String, String> cityOptions = new LinkedHashMap<>();
        cityOptions.put("beijing", "åŒ—äº¬");
        cityOptions.put("shanghai", "ä¸Šæµ·");
        cityOptions.put("guangzhou", "å¹¿å·");
        cityOptions.put("shenzhen", "æ·±åœ³");
        cityOptions.put("hangzhou", "æ­å·");
        cityOptions.put("nanjing", "å—äº¬");
        
        request.setAttribute("cityOptions", cityOptions);
        request.getRequestDispatcher("/register.jsp").forward(request, response);
    }
}
```

**JSPä¸­ä½¿ç”¨JSTLç”Ÿæˆé€‰é¡¹**ï¼š
```jsp
<!-- ä½¿ç”¨JSTLåŠ¨æ€ç”Ÿæˆä¸‹æ‹‰é€‰é¡¹ -->
<div class="form-group">
    <label for="city">æ‰€åœ¨åŸå¸‚ï¼š</label>
    <select name="city" id="city">
        <option value="">è¯·é€‰æ‹©åŸå¸‚</option>
        <c:forEach var="cityOption" items="${cityOptions}">
            <option value="${cityOption.key}" 
                    ${city == cityOption.key ? 'selected' : ''}>
                ${cityOption.value}
            </option>
        </c:forEach>
    </select>
</div>
```

### 5.3 åˆ†ç»„ä¸‹æ‹‰é€‰é¡¹


**çœå¸‚è”åŠ¨çš„å®ç°**ï¼š
```java
// å‡†å¤‡çœå¸‚æ•°æ®ç»“æ„
Map<String, Map<String, String>> provinceCity = new HashMap<>();

// å¹¿ä¸œçœçš„åŸå¸‚
Map<String, String> guangdongCities = new HashMap<>();
guangdongCities.put("guangzhou", "å¹¿å·");
guangdongCities.put("shenzhen", "æ·±åœ³");
guangdongCities.put("dongguan", "ä¸œè");
provinceCity.put("guangdong", guangdongCities);

// æ±Ÿè‹çœçš„åŸå¸‚
Map<String, String> jiangsuCities = new HashMap<>();
jiangsuCities.put("nanjing", "å—äº¬");
jiangsuCities.put("suzhou", "è‹å·");
jiangsuCities.put("wuxi", "æ— é”¡");
provinceCity.put("jiangsu", jiangsuCities);

request.setAttribute("provinceCity", provinceCity);
```

```jsp
<!-- åˆ†ç»„æ˜¾ç¤ºçš„ä¸‹æ‹‰é€‰é¡¹ -->
<select name="city" id="city">
    <option value="">è¯·é€‰æ‹©åŸå¸‚</option>
    <c:forEach var="province" items="${provinceCity}">
        <optgroup label="${province.key == 'guangdong' ? 'å¹¿ä¸œçœ' : 'æ±Ÿè‹çœ'}">
            <c:forEach var="city" items="${province.value}">
                <option value="${city.key}" 
                        ${selectedCity == city.key ? 'selected' : ''}>
                    ${city.value}
                </option>
            </c:forEach>
        </optgroup>
    </c:forEach>
</select>
```

---

## 6. â˜‘ï¸ å•é€‰å¤é€‰æ¡†å¤„ç†


### 6.1 å•é€‰æ¡†ï¼ˆRadio Buttonï¼‰å¤„ç†


**æ€§åˆ«é€‰æ‹©çš„å®ç°**ï¼š
```jsp
<!-- æ€§åˆ«å•é€‰æ¡†ç»„ -->
<div class="form-group">
    <label>æ€§åˆ«ï¼š</label>
    <div class="radio-group">
        <input type="radio" id="male" name="gender" value="male" 
               ${gender == 'male' ? 'checked' : ''}>
        <label for="male">ç”·</label>
        
        <input type="radio" id="female" name="gender" value="female" 
               ${gender == 'female' ? 'checked' : ''}>
        <label for="female">å¥³</label>
        
        <input type="radio" id="other" name="gender" value="other" 
               ${gender == 'other' ? 'checked' : ''}>
        <label for="other">å…¶ä»–</label>
    </div>
</div>
```

**ä½¿ç”¨JSTLç®€åŒ–å•é€‰æ¡†**ï¼š
```jsp
<!-- æ›´ä¼˜é›…çš„å•é€‰æ¡†å®ç° -->
<div class="form-group">
    <label>æ€§åˆ«ï¼š</label>
    <div class="radio-group">
        <c:set var="genderOptions" value="male:ç”·,female:å¥³,other:å…¶ä»–"/>
        <c:forEach var="option" items="${fn:split(genderOptions, ',')}">
            <c:set var="parts" value="${fn:split(option, ':')}"/>
            <input type="radio" id="${parts[0]}" name="gender" value="${parts[0]}" 
                   ${gender == parts[0] ? 'checked' : ''}>
            <label for="${parts[0]}">${parts[1]}</label>
        </c:forEach>
    </div>
</div>
```

### 6.2 å¤é€‰æ¡†ï¼ˆCheckboxï¼‰å¤„ç†


**çˆ±å¥½å¤šé€‰çš„å®ç°**ï¼š

> ğŸ” **æ·±å…¥æ€è€ƒ**
> å¤é€‰æ¡†å’Œå•é€‰æ¡†çš„åŒºåˆ«ï¼šå•é€‰æ¡†åƒé€‰æ‹©é¢˜çš„å•é€‰ï¼Œå¤é€‰æ¡†åƒå¤šé€‰é¢˜ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å¤šä¸ªé€‰é¡¹ã€‚

```java
// Servletä¸­å¤„ç†å¤šä¸ªçˆ±å¥½å€¼
String[] hobbies = request.getParameterValues("hobbies");
if (hobbies != null) {
    user.setHobbies(hobbies);
    // ä¸ºäº†å›æ˜¾ï¼Œå°†æ•°ç»„è½¬ä¸ºListå­˜å‚¨
    request.setAttribute("selectedHobbies", Arrays.asList(hobbies));
}
```

```jsp
<!-- çˆ±å¥½å¤é€‰æ¡†ç»„ -->
<div class="form-group">
    <label>çˆ±å¥½ï¼š</label>
    <div class="checkbox-group">
        <c:set var="hobbyOptions" value="reading:é˜…è¯»,music:éŸ³ä¹,sports:è¿åŠ¨,travel:æ—…è¡Œ,gaming:æ¸¸æˆ"/>
        <c:forEach var="option" items="${fn:split(hobbyOptions, ',')}">
            <c:set var="parts" value="${fn:split(option, ':')}"/>
            
            <input type="checkbox" id="${parts[0]}" name="hobbies" value="${parts[0]}"
                   <c:if test="${not empty selectedHobbies}">
                       <c:forEach var="selected" items="${selectedHobbies}">
                           ${selected == parts[0] ? 'checked' : ''}
                       </c:forEach>
                   </c:if>>
            <label for="${parts[0]}">${parts[1]}</label>
        </c:forEach>
    </div>
</div>
```

### 6.3 é€‰é¡¹çŠ¶æ€çš„ä¼˜é›…å¤„ç†


**ä½¿ç”¨JSTLå‡½æ•°ç®€åŒ–åˆ¤æ–­**ï¼š
```jsp
<%-- å¯¼å…¥JSTLå‡½æ•°åº“ --%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<!-- å¤é€‰æ¡†é€‰ä¸­çŠ¶æ€çš„ç®€åŒ–åˆ¤æ–­ -->
<c:forEach var="option" items="${hobbyOptions}">
    <input type="checkbox" name="hobbies" value="${option.key}"
           ${fn:contains(selectedHobbies, option.key) ? 'checked' : ''}>
    ${option.value}
</c:forEach>
```

**ğŸ“Š å¯¹æ¯”çŸ©é˜µ**

| æ§ä»¶ç±»å‹ | æ•°æ®è·å–æ–¹å¼ | å›æ˜¾å¤„ç† | é€‚ç”¨åœºæ™¯ |
|---------|-------------|---------|---------|
| ğŸ”˜ **å•é€‰æ¡†** | `getParameter()` | ç®€å•å­—ç¬¦ä¸²æ¯”è¾ƒ | æ€§åˆ«ã€ç­‰çº§é€‰æ‹© |
| â˜‘ï¸ **å¤é€‰æ¡†** | `getParameterValues()` | æ•°ç»„/é›†åˆåŒ…å«åˆ¤æ–­ | å…´è¶£çˆ±å¥½ã€æƒé™é€‰æ‹© |
| ğŸ“‹ **ä¸‹æ‹‰æ¡†** | `getParameter()` | å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­ | åŸå¸‚ã€åˆ†ç±»é€‰æ‹© |

---

## 7. âœ… è¡¨å•éªŒè¯ä¸æç¤º


### 7.1 å¤šå±‚éªŒè¯ç­–ç•¥


è¡¨å•éªŒè¯å°±åƒè¿‡å®‰æ£€ï¼Œéœ€è¦å¤šé“å…³å¡ç¡®ä¿æ•°æ®è´¨é‡ï¼š

```
éªŒè¯å±‚æ¬¡ç»“æ„ï¼š
ğŸ–¥ï¸ å‰ç«¯éªŒè¯ï¼ˆç¬¬ä¸€é“é˜²çº¿ï¼‰
    â”œâ”€â”€ JavaScriptå®æ—¶éªŒè¯
    â”œâ”€â”€ HTML5è¡¨å•éªŒè¯
    â””â”€â”€ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
    
ğŸ–¥ï¸ åç«¯éªŒè¯ï¼ˆæ ¸å¿ƒé˜²çº¿ï¼‰  
    â”œâ”€â”€ æ•°æ®æ ¼å¼éªŒè¯
    â”œâ”€â”€ ä¸šåŠ¡è§„åˆ™éªŒè¯
    â””â”€â”€ å®‰å…¨æ€§éªŒè¯
```

### 7.2 å‰ç«¯å®æ—¶éªŒè¯


**JavaScriptå®æ—¶éªŒè¯ç¤ºä¾‹**ï¼š
```jsp
<script>
// ç”¨æˆ·åå®æ—¶éªŒè¯
function validateUsername() {
    const username = document.getElementById('username').value;
    const errorSpan = document.getElementById('usernameError');
    
    if (username.length === 0) {
        showError(errorSpan, 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');
        return false;
    } else if (username.length < 3) {
        showError(errorSpan, 'ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦');
        return false;
    } else if (username.length > 20) {
        showError(errorSpan, 'ç”¨æˆ·åä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦');
        return false;
    } else {
        hideError(errorSpan);
        return true;
    }
}

// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
function showError(element, message) {
    element.textContent = message;
    element.className = 'error-message show';
}

// éšè—é”™è¯¯ä¿¡æ¯
function hideError(element) {
    element.className = 'error-message';
}

// ç»‘å®šäº‹ä»¶ç›‘å¬
document.getElementById('username').addEventListener('blur', validateUsername);
</script>
```

**HTML5å†…ç½®éªŒè¯**ï¼š
```jsp
<!-- åˆ©ç”¨HTML5çš„éªŒè¯å±æ€§ -->
<input type="email" name="email" required 
       pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
       title="è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€"
       value="${email}">

<input type="password" name="password" required 
       minlength="6" maxlength="20"
       title="å¯†ç é•¿åº¦åº”åœ¨6-20ä¸ªå­—ç¬¦ä¹‹é—´"
       value="">
```

### 7.3 åç«¯éªŒè¯æ¡†æ¶


**ç»Ÿä¸€çš„éªŒè¯ç»“æœç±»**ï¼š
```java
// éªŒè¯ç»“æœå°è£…ç±»
public class ValidationResult {
    private boolean valid;              // æ˜¯å¦éªŒè¯é€šè¿‡
    private Map<String, String> fieldErrors;   // å­—æ®µé”™è¯¯ä¿¡æ¯
    private List<String> globalErrors;         // å…¨å±€é”™è¯¯ä¿¡æ¯
    
    public ValidationResult() {
        this.valid = true;
        this.fieldErrors = new HashMap<>();
        this.globalErrors = new ArrayList<>();
    }
    
    // æ·»åŠ å­—æ®µé”™è¯¯
    public void addFieldError(String field, String message) {
        this.fieldErrors.put(field, message);
        this.valid = false;
    }
    
    // æ·»åŠ å…¨å±€é”™è¯¯
    public void addGlobalError(String message) {
        this.globalErrors.add(message);
        this.valid = false;
    }
    
    // getters...
}
```

**å¢å¼ºçš„éªŒè¯å·¥å…·ç±»**ï¼š
```java
public class ValidationUtil {
    // éªŒè¯ç”¨æˆ·æ³¨å†Œä¿¡æ¯
    public static ValidationResult validateUserRegistration(User user, String confirmPassword) {
        ValidationResult result = new ValidationResult();
        
        // ç”¨æˆ·åéªŒè¯
        if (isEmpty(user.getUsername())) {
            result.addFieldError("username", "ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        } else if (!isValidUsername(user.getUsername())) {
            result.addFieldError("username", "ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé•¿åº¦3-20å­—ç¬¦");
        }
        
        // å¯†ç éªŒè¯
        if (isEmpty(user.getPassword())) {
            result.addFieldError("password", "å¯†ç ä¸èƒ½ä¸ºç©º");
        } else if (!isValidPassword(user.getPassword())) {
            result.addFieldError("password", "å¯†ç é•¿åº¦6-20å­—ç¬¦ï¼Œéœ€åŒ…å«å­—æ¯å’Œæ•°å­—");
        }
        
        // ç¡®è®¤å¯†ç éªŒè¯
        if (!user.getPassword().equals(confirmPassword)) {
            result.addFieldError("confirmPassword", "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´");
        }
        
        // é‚®ç®±éªŒè¯
        if (isEmpty(user.getEmail())) {
            result.addFieldError("email", "é‚®ç®±ä¸èƒ½ä¸ºç©º");
        } else if (!isValidEmail(user.getEmail())) {
            result.addFieldError("email", "è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€");
        }
        
        return result;
    }
    
    // è¾…åŠ©æ–¹æ³•
    private static boolean isEmpty(String str) {
        return str == null || str.trim().isEmpty();
    }
    
    private static boolean isValidUsername(String username) {
        return username.matches("^[a-zA-Z0-9_]{3,20}$");
    }
    
    private static boolean isValidPassword(String password) {
        // è‡³å°‘åŒ…å«ä¸€ä¸ªå­—æ¯å’Œä¸€ä¸ªæ•°å­—ï¼Œé•¿åº¦6-20
        return password.matches("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d@$!%*#?&]{6,20}$");
    }
    
    private static boolean isValidEmail(String email) {
        return email.matches("^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$");
    }
}
```

---

## 8. ğŸ¨ æ•°æ®æ ¼å¼åŒ–æ˜¾ç¤º


### 8.1 æ—¥æœŸæ ¼å¼åŒ–


**ä½¿ç”¨JSTLæ ¼å¼åŒ–æ ‡ç­¾**ï¼š
```jsp
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!-- æ³¨å†Œæ—¶é—´çš„ä¸åŒæ˜¾ç¤ºæ ¼å¼ -->
<div class="user-info">
    <p>æ³¨å†Œæ—¶é—´ï¼š
        <!-- å®Œæ•´æ—¥æœŸæ—¶é—´ -->
        <fmt:formatDate value="${user.registerTime}" pattern="yyyyå¹´MMæœˆddæ—¥ HH:mm:ss"/>
    </p>
    
    <p>æ³¨å†Œæ—¥æœŸï¼š
        <!-- åªæ˜¾ç¤ºæ—¥æœŸ -->
        <fmt:formatDate value="${user.registerTime}" pattern="yyyy-MM-dd"/>
    </p>
    
    <p>æ³¨å†Œå¹´ä»½ï¼š
        <!-- åªæ˜¾ç¤ºå¹´ä»½ -->
        <fmt:formatDate value="${user.registerTime}" pattern="yyyy"/>
    </p>
</div>
```

**ç›¸å¯¹æ—¶é—´æ˜¾ç¤º**ï¼š
```jsp
<!-- ä½¿ç”¨ELè¡¨è¾¾å¼è®¡ç®—ç›¸å¯¹æ—¶é—´ -->
<c:set var="now" value="<%=new java.util.Date()%>"/>
<c:set var="diffMinutes" value="${(now.time - user.registerTime.time) / (1000 * 60)}"/>

<c:choose>
    <c:when test="${diffMinutes < 1}">
        åˆšåˆšæ³¨å†Œ
    </c:when>
    <c:when test="${diffMinutes < 60}">
        ${Math.floor(diffMinutes)}åˆ†é’Ÿå‰æ³¨å†Œ
    </c:when>
    <c:when test="${diffMinutes < 1440}">
        ${Math.floor(diffMinutes / 60)}å°æ—¶å‰æ³¨å†Œ
    </c:when>
    <c:otherwise>
        <fmt:formatDate value="${user.registerTime}" pattern="yyyy-MM-dd"/>æ³¨å†Œ
    </c:otherwise>
</c:choose>
```

### 8.2 æ•°å­—æ ¼å¼åŒ–


**æ•°å­—å’Œè´§å¸æ ¼å¼åŒ–**ï¼š
```jsp
<!-- ç”¨æˆ·ç§¯åˆ†æ˜¾ç¤º -->
<div class="score-info">
    <p>å½“å‰ç§¯åˆ†ï¼š<fmt:formatNumber value="${user.score}" pattern="#,###"/>åˆ†</p>
    
    <p>è´¦æˆ·ä½™é¢ï¼š<fmt:formatNumber value="${user.balance}" type="currency"/>å…ƒ</p>
    
    <p>å®Œæˆåº¦ï¼š<fmt:formatNumber value="${user.progress}" type="percent"/>%</p>
</div>
```

### 8.3 é›†åˆæ•°æ®æ ¼å¼åŒ–


**çˆ±å¥½åˆ—è¡¨çš„ä¼˜é›…æ˜¾ç¤º**ï¼š
```jsp
<!-- çˆ±å¥½æ•°ç»„çš„æ ¼å¼åŒ–æ˜¾ç¤º -->
<div class="hobbies-display">
    <label>å…´è¶£çˆ±å¥½ï¼š</label>
    <c:choose>
        <c:when test="${empty user.hobbies}">
            <span class="no-data">æš‚æœªè®¾ç½®</span>
        </c:when>
        <c:otherwise>
            <div class="hobby-tags">
                <c:forEach var="hobby" items="${user.hobbies}" varStatus="status">
                    <span class="tag">${hobby}</span>
                    <c:if test="${not status.last}"> Â· </c:if>
                </c:forEach>
            </div>
        </c:otherwise>
    </c:choose>
</div>
```

---

## 9. ğŸ“Š æäº¤çŠ¶æ€å¤„ç†


### 9.1 è¡¨å•æäº¤çŠ¶æ€ç®¡ç†


**æäº¤çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸ**ï¼š

```
è¡¨å•æäº¤æµç¨‹ï¼š
ğŸ“ åˆå§‹çŠ¶æ€ â†’ ğŸ”„ æäº¤ä¸­ â†’ âœ… æˆåŠŸ / âŒ å¤±è´¥

çŠ¶æ€è¯´æ˜ï¼š
â”œâ”€â”€ ğŸ“ åˆå§‹çŠ¶æ€ï¼šç”¨æˆ·æ­£åœ¨å¡«å†™è¡¨å•
â”œâ”€â”€ ğŸ”„ æäº¤ä¸­ï¼šæ•°æ®æ­£åœ¨å‘é€å’Œå¤„ç†
â”œâ”€â”€ âœ… æäº¤æˆåŠŸï¼šæ˜¾ç¤ºæˆåŠŸä¿¡æ¯ï¼Œè·³è½¬æˆ–åˆ·æ–°
â””â”€â”€ âŒ æäº¤å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä¿æŒè¡¨å•æ•°æ®
```

### 9.2 é˜²é‡å¤æäº¤æœºåˆ¶


**Tokenæœºåˆ¶é˜²é‡å¤æäº¤**ï¼š
```java
// Servletä¸­ç”Ÿæˆå’ŒéªŒè¯Token
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // ç”Ÿæˆé˜²é‡å¤æäº¤çš„Token
        String token = UUID.randomUUID().toString();
        request.getSession().setAttribute("formToken", token);
        request.setAttribute("formToken", token);
        
        // è½¬å‘åˆ°æ³¨å†Œé¡µé¢
        request.getRequestDispatcher("/register.jsp").forward(request, response);
    }
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) {
        // éªŒè¯Tokenï¼Œé˜²æ­¢é‡å¤æäº¤
        String sessionToken = (String) request.getSession().getAttribute("formToken");
        String requestToken = request.getParameter("formToken");
        
        if (sessionToken == null || !sessionToken.equals(requestToken)) {
            request.setAttribute("error", "è¯·ä¸è¦é‡å¤æäº¤è¡¨å•");
            request.getRequestDispatcher("/register.jsp").forward(request, response);
            return;
        }
        
        // ç§»é™¤Tokenï¼Œç¡®ä¿ä¸€æ¬¡æ€§ä½¿ç”¨
        request.getSession().removeAttribute("formToken");
        
        // å¤„ç†æ­£å¸¸çš„æ³¨å†Œé€»è¾‘...
    }
}
```

**JSPä¸­çš„Tokenå¤„ç†**ï¼š
```jsp
<!-- éšè—å­—æ®µæºå¸¦Token -->
<form id="registerForm" method="post" action="${pageContext.request.contextPath}/register">
    <!-- é˜²é‡å¤æäº¤Token -->
    <input type="hidden" name="formToken" value="${formToken}">
    
    <!-- å…¶ä»–è¡¨å•å­—æ®µ... -->
    
    <button type="submit" id="submitBtn">
        <span class="btn-text">ç«‹å³æ³¨å†Œ</span>
        <span class="btn-loading" style="display:none;">æäº¤ä¸­...</span>
    </button>
</form>

<script>
// æäº¤æŒ‰é’®çŠ¶æ€æ§åˆ¶
document.getElementById('registerForm').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnLoading = submitBtn.querySelector('.btn-loading');
    
    // æ˜¾ç¤ºæäº¤ä¸­çŠ¶æ€
    btnText.style.display = 'none';
    btnLoading.style.display = 'inline';
    submitBtn.disabled = true;
    
    // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¢å¤–çš„éªŒè¯é€»è¾‘
    // å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ¢å¤æŒ‰é’®çŠ¶æ€
});
</script>
```

### 9.3 æˆåŠŸçŠ¶æ€çš„å¤„ç†


**æ³¨å†ŒæˆåŠŸçš„å‹å¥½æç¤º**ï¼š
```jsp
<!-- success.jsp - æ³¨å†ŒæˆåŠŸé¡µé¢ -->
<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
<head>
    <title>æ³¨å†ŒæˆåŠŸ</title>
    <style>
        .success-container {
            text-align: center;
            padding: 50px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 100px auto;
            max-width: 500px;
        }
        .success-icon {
            font-size: 64px;
            color: #28a745;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="success-container">
        <div class="success-icon">âœ…</div>
        <h2>æ³¨å†ŒæˆåŠŸï¼</h2>
        <p>æ­å–œ <strong>${user.username}</strong>ï¼Œæ‚¨çš„è´¦æˆ·å·²åˆ›å»ºæˆåŠŸï¼</p>
        <p>æ³¨å†Œé‚®ç®±ï¼š${user.email}</p>
        
        <div class="action-buttons">
            <a href="${pageContext.request.contextPath}/login.jsp" class="btn btn-primary">
                ç«‹å³ç™»å½•
            </a>
            <a href="${pageContext.request.contextPath}/index.jsp" class="btn btn-secondary">
                è¿”å›é¦–é¡µ
            </a>
        </div>
        
        <!-- è‡ªåŠ¨è·³è½¬å€’è®¡æ—¶ -->
        <p class="countdown">
            <span id="countdown">5</span>ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
        </p>
    </div>
    
    <script>
    // å€’è®¡æ—¶è‡ªåŠ¨è·³è½¬
    let countdown = 5;
    const countdownElement = document.getElementById('countdown');
    
    const timer = setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;
        
        if (countdown <= 0) {
            clearInterval(timer);
            window.location.href = '${pageContext.request.contextPath}/login.jsp';
        }
    }, 1000);
    </script>
</body>
</html>
```

---

## 10. ğŸ¯ æœ€ä½³å®è·µæ€»ç»“


### 10.1 ä»£ç ç»„ç»‡æœ€ä½³å®è·µ


**ğŸ“ å­¦ä¹ æ£€æŸ¥ç‚¹**
- [ ] æŒæ¡MVCæ¨¡å¼åœ¨è¡¨å•å¤„ç†ä¸­çš„åº”ç”¨
- [ ] ç†è§£æ•°æ®éªŒè¯çš„å¤šå±‚ç­–ç•¥
- [ ] ç†Ÿç»ƒä½¿ç”¨ELè¡¨è¾¾å¼å’ŒJSTLæ ‡ç­¾
- [ ] äº†è§£è¡¨å•å®‰å…¨å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–

**ğŸ¯ é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ**ï¼š

```
æ¨èçš„é¡¹ç›®ç»“æ„ï¼š
src/main/java/
â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚
â”‚   â””â”€â”€ RegisterServlet.java
â”œâ”€â”€ service/            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ UserService.java
â”œâ”€â”€ dao/                # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ UserDAO.java
â”œâ”€â”€ entity/             # å®ä½“ç±»
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ util/               # å·¥å…·ç±»
â”‚   â”œâ”€â”€ ValidationUtil.java
â”‚   â””â”€â”€ SecurityUtil.java
â””â”€â”€ filter/             # è¿‡æ»¤å™¨
    â””â”€â”€ CharacterEncodingFilter.java

webapp/
â”œâ”€â”€ WEB-INF/
â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ js/                 # JavaScriptæ–‡ä»¶
â”œâ”€â”€ pages/              # JSPé¡µé¢
â”‚   â”œâ”€â”€ register.jsp
â”‚   â””â”€â”€ success.jsp
â””â”€â”€ common/             # å…¬å…±ç»„ä»¶
    â”œâ”€â”€ header.jsp
    â””â”€â”€ footer.jsp
```

### 10.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**âš¡ æ€§èƒ½å…³é”®ç‚¹**ï¼š

| ä¼˜åŒ–æ–¹é¢ | å»ºè®®åšæ³• | æ€§èƒ½æå‡ |
|---------|---------|---------|
| ğŸ”„ **æ•°æ®å›æ˜¾** | åªå›æ˜¾å¿…è¦å­—æ®µï¼Œæ•æ„Ÿä¿¡æ¯ä¸å›æ˜¾ | å‡å°‘æ•°æ®ä¼ è¾“ |
| ğŸ“Š **é€‰é¡¹æ•°æ®** | ç¼“å­˜å¸¸ç”¨é€‰é¡¹ï¼Œé¿å…é‡å¤æŸ¥è¯¢æ•°æ®åº“ | å‡å°‘æ•°æ®åº“è®¿é—® |
| âœ… **è¡¨å•éªŒè¯** | å‰ç«¯éªŒè¯æå‡ä½“éªŒï¼Œåç«¯éªŒè¯ä¿è¯å®‰å…¨ | å‡å°‘æ— æ•ˆè¯·æ±‚ |
| ğŸ¨ **é¡µé¢æ¸²æŸ“** | ä½¿ç”¨EL+JSTLæ›¿ä»£Javaä»£ç ï¼Œæé«˜å¯è¯»æ€§ | æå‡å¼€å‘æ•ˆç‡ |

### 10.3 å®‰å…¨æ€§è€ƒè™‘


**ğŸ”’ å®‰å…¨é˜²æŠ¤è¦ç‚¹**ï¼š

```
å®‰å…¨æ£€æŸ¥æ¸…å•ï¼š
â˜‘ï¸ XSSé˜²æŠ¤ï¼šå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰
â˜‘ï¸ CSRFé˜²æŠ¤ï¼šä½¿ç”¨TokenéªŒè¯è¡¨å•æ¥æº
â˜‘ï¸ SQLæ³¨å…¥é˜²æŠ¤ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
â˜‘ï¸ è¾“å…¥éªŒè¯ï¼šå‰åç«¯åŒé‡éªŒè¯
â˜‘ï¸ æ•æ„Ÿä¿¡æ¯ï¼šå¯†ç ç­‰ä¿¡æ¯ä¸è¦å›æ˜¾
â˜‘ï¸ ä¼šè¯ç®¡ç†ï¼šåˆç†è®¾ç½®ä¼šè¯è¶…æ—¶
```

**XSSé˜²æŠ¤ç¤ºä¾‹**ï¼š
```jsp
<!-- ä½¿ç”¨JSTLçš„escapeXmlå±æ€§é˜²æ­¢XSS -->
<c:out value="${user.username}" escapeXml="true"/>

<!-- æˆ–è€…ä½¿ç”¨ELè¡¨è¾¾å¼çš„è‡ªåŠ¨è½¬ä¹‰ -->
${fn:escapeXml(user.username)}
```

### 10.4 ç”¨æˆ·ä½“éªŒä¼˜åŒ–


**ğŸ¨ ç”¨æˆ·ä½“éªŒæå‡æŠ€å·§**ï¼š

```
ä½“éªŒä¼˜åŒ–ç­–ç•¥ï¼š
ğŸ”¸ å®æ—¶éªŒè¯ï¼šè¾“å…¥æ—¶ç«‹å³åé¦ˆï¼Œä¸ç”¨ç­‰åˆ°æäº¤
ğŸ”¸ å‹å¥½æç¤ºï¼šé”™è¯¯ä¿¡æ¯è¦å…·ä½“ï¼Œå‘Šè¯‰ç”¨æˆ·æ€ä¹ˆæ”¹æ­£
ğŸ”¸ è¿›åº¦æŒ‡ç¤ºï¼šå¤æ‚è¡¨å•æ˜¾ç¤ºå®Œæˆè¿›åº¦
ğŸ”¸ æ•°æ®ä¿æŠ¤ï¼šæ„å¤–åˆ·æ–°æˆ–é€€å‡ºæ—¶ä¿å­˜å·²å¡«æ•°æ®
ğŸ”¸ å¿«æ·æ“ä½œï¼šå¸¸ç”¨é€‰é¡¹è®¾ä¸ºé»˜è®¤å€¼
ğŸ”¸ å“åº”å¼è®¾è®¡ï¼šé€‚é…ä¸åŒè®¾å¤‡å±å¹•
```

**ğŸ’¡ å…³é”®æ´å¯Ÿ**
è¡¨å•å¤„ç†ä¸åªæ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯ç”¨æˆ·ä½“éªŒè®¾è®¡ã€‚å¥½çš„è¡¨å•è®©ç”¨æˆ·æ„Ÿè§‰ç®€å•å¿«æ·ï¼Œå·®çš„è¡¨å•è®©ç”¨æˆ·æ„Ÿåˆ°æŒ«è´¥ã€‚

### 10.5 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ


**ğŸš¨ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**ï¼š

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| **ä¹±ç é—®é¢˜** | å­—ç¬¦ç¼–ç ä¸ç»Ÿä¸€ | è®¾ç½®è¯·æ±‚å“åº”ç¼–ç ï¼Œä½¿ç”¨è¿‡æ»¤å™¨ |
| **æ•°æ®ä¸¢å¤±** | é¡µé¢åˆ·æ–°æˆ–ç½‘ç»œä¸­æ–­ | å®ç°è¡¨å•è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ |
| **é‡å¤æäº¤** | ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æäº¤æŒ‰é’® | Tokenæœºåˆ¶+å‰ç«¯æŒ‰é’®çŠ¶æ€æ§åˆ¶ |
| **éªŒè¯ä¸ä¸€è‡´** | å‰åç«¯éªŒè¯è§„åˆ™ä¸åŒæ­¥ | å»ºç«‹ç»Ÿä¸€çš„éªŒè¯è§„åˆ™é…ç½® |

### 10.6 å­¦ä¹ è¿›é˜¶æ–¹å‘


**ğŸš€ è¿›é˜¶å­¦ä¹ è·¯å¾„**ï¼š

```
å­¦ä¹ å‘å±•è·¯çº¿ï¼š
ğŸ“š åŸºç¡€é˜¶æ®µï¼ˆå½“å‰ï¼‰
â”œâ”€â”€ ELè¡¨è¾¾å¼å’ŒJSTLåŸºç¡€è¯­æ³•
â”œâ”€â”€ è¡¨å•æ•°æ®å¤„ç†å’ŒéªŒè¯
â””â”€â”€ åŸºæœ¬çš„ç”¨æˆ·äº¤äº’å®ç°

ğŸ”§ è¿›é˜¶é˜¶æ®µ
â”œâ”€â”€ Ajaxå¼‚æ­¥è¡¨å•æäº¤
â”œâ”€â”€ æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½å¤„ç†
â”œâ”€â”€ å¤æ‚çš„ä¸šåŠ¡è¡¨å•è®¾è®¡
â””â”€â”€ è¡¨å•æ•°æ®çš„æ‰¹é‡å¤„ç†

ğŸš€ é«˜çº§é˜¶æ®µ
â”œâ”€â”€ å‰ç«¯æ¡†æ¶é›†æˆï¼ˆVue.jsã€Reactï¼‰
â”œâ”€â”€ RESTful APIè®¾è®¡
â”œâ”€â”€ å¾®æœåŠ¡æ¶æ„ä¸‹çš„è¡¨å•å¤„ç†
â””â”€â”€ å¤§æ•°æ®é‡è¡¨å•çš„æ€§èƒ½ä¼˜åŒ–
```

**ğŸ’ª å®è·µå»ºè®®**ï¼š
1. **åŠ¨æ‰‹å®è·µ**ï¼šè·Ÿç€æ•™ç¨‹åšä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·æ³¨å†Œç³»ç»Ÿ
2. **é€æ­¥æ”¹è¿›**ï¼šä»ç®€å•è¡¨å•å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚åŠŸèƒ½
3. **æ³¨é‡ç»†èŠ‚**ï¼šå…³æ³¨ç”¨æˆ·ä½“éªŒçš„æ¯ä¸€ä¸ªç»†èŠ‚
4. **å­¦ä¹ æºç **ï¼šç ”ç©¶ä¼˜ç§€å¼€æºé¡¹ç›®çš„è¡¨å•å¤„ç†å®ç°

---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è¡¨å•å¤„ç†æµç¨‹ï¼šæ•°æ®æ”¶é›† â†’ éªŒè¯ â†’ å¤„ç† â†’ åé¦ˆ
ğŸ”¸ æ•°æ®å›æ˜¾æŠ€æœ¯ï¼šä½¿ç”¨ELè¡¨è¾¾å¼æ˜¾ç¤ºç”¨æˆ·å·²è¾“å…¥æ•°æ®
ğŸ”¸ é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼šå‹å¥½çš„é”™è¯¯æç¤ºå’Œå­—æ®µçº§é”™è¯¯æ ‡è®°
ğŸ”¸ åŠ¨æ€é€‰é¡¹ç”Ÿæˆï¼šä½¿ç”¨JSTLå¾ªç¯ç”Ÿæˆä¸‹æ‹‰é€‰é¡¹
ğŸ”¸ å•é€‰å¤é€‰å¤„ç†ï¼šä¸åŒæ§ä»¶ç±»å‹çš„æ•°æ®è·å–å’ŒçŠ¶æ€å›æ˜¾
ğŸ”¸ è¡¨å•éªŒè¯ç­–ç•¥ï¼šå‰ç«¯ä½“éªŒéªŒè¯+åç«¯å®‰å…¨éªŒè¯
ğŸ”¸ æäº¤çŠ¶æ€ç®¡ç†ï¼šé˜²é‡å¤æäº¤å’Œç”¨æˆ·å‹å¥½çš„çŠ¶æ€åé¦ˆ
```

### å®æˆ˜åº”ç”¨ä»·å€¼


- **é¡¹ç›®å¼€å‘**ï¼šæŒæ¡JavaWebé¡¹ç›®ä¸­æœ€å¸¸è§çš„è¡¨å•å¤„ç†æŠ€æœ¯
- **ç”¨æˆ·ä½“éªŒ**ï¼šå­¦ä¼šè®¾è®¡å‹å¥½çš„ç”¨æˆ·äº¤äº’ç•Œé¢
- **ä»£ç è´¨é‡**ï¼šä½¿ç”¨EL+JSTLå†™å‡ºæ›´ç®€æ´æ˜“ç»´æŠ¤çš„ä»£ç   
- **å®‰å…¨é˜²æŠ¤**ï¼šäº†è§£è¡¨å•å®‰å…¨çš„åŸºæœ¬é˜²æŠ¤æªæ–½
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæŒæ¡è¡¨å•å¤„ç†çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§

### å­¦ä¹ è®°å¿†è¦ç‚¹


> ğŸ¯ **ä¸€å¥è¯æ€»ç»“**
> è¡¨å•å¤„ç†å°±åƒæœåŠ¡å‘˜æ¥å¾…å®¢æˆ·ï¼šçƒ­æƒ…æ¥æ”¶ä¿¡æ¯ï¼Œä»”ç»†æ£€æŸ¥æ ¸å®ï¼Œå¦¥å–„å¤„ç†è¯·æ±‚ï¼ŒåŠæ—¶åé¦ˆç»“æœã€‚

**ğŸ”‘ å…³é”®å­—è®°å¿†**
- **ELè¡¨è¾¾å¼**ï¼š${} ç®€åŒ–æ•°æ®è·å–
- **JSTLæ ‡ç­¾**ï¼šc:ifã€c:forEach ç®€åŒ–é¡µé¢é€»è¾‘  
- **æ•°æ®å›æ˜¾**ï¼šsetAttribute + ELè¡¨è¾¾å¼æ˜¾ç¤º
- **é”™è¯¯æ˜¾ç¤º**ï¼šéªŒè¯å¤±è´¥æ—¶çš„å‹å¥½æç¤º
- **çŠ¶æ€ç®¡ç†**ï¼šTokené˜²é‡å¤ + æŒ‰é’®çŠ¶æ€æ§åˆ¶

è¡¨å•å¤„ç†æŠ€æœ¯æ˜¯JavaWebå¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½ï¼Œç†Ÿç»ƒæŒæ¡è¿™äº›æŠ€æœ¯ï¼Œå°±èƒ½å¼€å‘å‡ºç”¨æˆ·ä½“éªŒè‰¯å¥½ã€åŠŸèƒ½å®Œæ•´çš„Webåº”ç”¨ç¨‹åºã€‚