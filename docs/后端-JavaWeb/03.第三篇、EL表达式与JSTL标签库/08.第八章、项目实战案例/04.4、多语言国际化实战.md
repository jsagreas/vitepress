---
title: 4ã€å¤šè¯­è¨€å›½é™…åŒ–å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯å›½é™…åŒ–(i18n)](#1-ä»€ä¹ˆæ˜¯å›½é™…åŒ–i18n)
2. [å¤šè¯­è¨€èµ„æºé…ç½®](#2-å¤šè¯­è¨€èµ„æºé…ç½®)
3. [åŠ¨æ€è¯­è¨€åˆ‡æ¢å®ç°](#3-åŠ¨æ€è¯­è¨€åˆ‡æ¢å®ç°)
4. [åŒºåŸŸè‡ªåŠ¨æ£€æµ‹](#4-åŒºåŸŸè‡ªåŠ¨æ£€æµ‹)
5. [æ—¥æœŸæ ¼å¼æœ¬åœ°åŒ–](#5-æ—¥æœŸæ ¼å¼æœ¬åœ°åŒ–)
6. [è´§å¸æ ¼å¼æœ¬åœ°åŒ–](#6-è´§å¸æ ¼å¼æœ¬åœ°åŒ–)
7. [æ¶ˆæ¯å›½é™…åŒ–å¤„ç†](#7-æ¶ˆæ¯å›½é™…åŒ–å¤„ç†)
8. [å®Œæ•´i18næ–¹æ¡ˆå®æˆ˜](#8-å®Œæ•´i18næ–¹æ¡ˆå®æˆ˜)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ä»€ä¹ˆæ˜¯å›½é™…åŒ–(i18n)


### 1.1 å›½é™…åŒ–åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯å›½é™…åŒ–ï¼Ÿ**
```
é€šä¿—ç†è§£ï¼šè®©ä½ çš„ç½‘ç«™èƒ½æ”¯æŒå¤šç§è¯­è¨€
å°±åƒéº¦å½“åŠ³åœ¨ä¸­å›½æ˜¾ç¤ºä¸­æ–‡èœå•ï¼Œåœ¨ç¾å›½æ˜¾ç¤ºè‹±æ–‡èœå•

ä¸“ä¸šå®šä¹‰ï¼š
i18n = internationalization (18ä¸ªå­—æ¯ç¼©å†™)
è®©åº”ç”¨ç¨‹åºé€‚åº”ä¸åŒå›½å®¶å’Œåœ°åŒºçš„è¯­è¨€ã€æ–‡åŒ–ä¹ æƒ¯çš„æŠ€æœ¯
```

**ğŸ’¡ ä¸ºä»€ä¹ˆå«i18nï¼Ÿ**
```
internationalization è¿™ä¸ªå•è¯ï¼š
i + nternationalizatio + n
é¦–å­—æ¯i + ä¸­é—´18ä¸ªå­—æ¯ + æœ«å°¾å­—æ¯n = i18n
```

### 1.2 å›½é™…åŒ–åŒ…å«ä»€ä¹ˆå†…å®¹


**ğŸŒ å›½é™…åŒ–çš„å‡ ä¸ªå±‚é¢**
```
è¯­è¨€æ–‡å­—ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ç­‰
æ—¥æœŸæ—¶é—´ï¼š2025-01-20 vs 01/20/2025  
æ•°å­—è´§å¸ï¼šï¿¥100 vs $15.99
æ–‡åŒ–ä¹ æƒ¯ï¼šé¢œè‰²å«ä¹‰ã€é˜…è¯»ä¹ æƒ¯ç­‰
```

**ğŸ“ åœ¨JavaWebä¸­çš„ä½“ç°**
```
ç½‘é¡µç•Œé¢ï¼šæŒ‰é’®ã€æ ‡ç­¾ã€æç¤ºä¿¡æ¯å¤šè¯­è¨€æ˜¾ç¤º
æ•°æ®å±•ç¤ºï¼šä»·æ ¼ã€æ—¥æœŸæŒ‰å½“åœ°ä¹ æƒ¯æ ¼å¼åŒ–
ç”¨æˆ·ä½“éªŒï¼šæ ¹æ®ç”¨æˆ·ä½ç½®è‡ªåŠ¨é€‰æ‹©è¯­è¨€
```

### 1.3 å›½é™…åŒ–çš„å®é™…ä»·å€¼


> **ğŸ’­ ç”Ÿæ´»ç±»æ¯”**
> 
> æƒ³è±¡ä½ å¼€äº†ä¸€å®¶ç½‘ä¸Šå•†åº—ï¼š
> - åªæœ‰ä¸­æ–‡ï¼šåªèƒ½å–ç»™ä¸­å›½äºº
> - æ”¯æŒå¤šè¯­è¨€ï¼šå…¨ä¸–ç•Œéƒ½æ˜¯ä½ çš„å®¢æˆ·
> 
> å›½é™…åŒ–å°±æ˜¯è®©ä½ çš„ç½‘ç«™èµ°å‘ä¸–ç•Œçš„"ç¿»è¯‘å®˜"

---

## 2. ğŸ“ å¤šè¯­è¨€èµ„æºé…ç½®


### 2.1 èµ„æºæ–‡ä»¶çš„åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯èµ„æºæ–‡ä»¶ï¼Ÿ**
```
ç®€å•ç†è§£ï¼šå°±æ˜¯å­˜æ”¾å„ç§è¯­è¨€ç¿»è¯‘çš„æ–‡æœ¬æ–‡ä»¶
åƒä¸€æœ¬å­—å…¸ï¼Œå­˜ç€ä¸­æ–‡å¯¹åº”çš„è‹±æ–‡ã€æ—¥æ–‡ç­‰ç¿»è¯‘

æ–‡ä»¶æ ¼å¼ï¼š.propertiesæ–‡ä»¶
æ–‡ä»¶å‘½åï¼šmessages_è¯­è¨€ä»£ç _å›½å®¶ä»£ç .properties
```

### 2.2 åˆ›å»ºå¤šè¯­è¨€èµ„æºæ–‡ä»¶


**ğŸ“‚ èµ„æºæ–‡ä»¶ç»“æ„**
```
src/main/resources/
â”œâ”€â”€ messages.properties           (é»˜è®¤ï¼Œé€šå¸¸æ˜¯è‹±æ–‡)
â”œâ”€â”€ messages_zh_CN.properties    (ç®€ä½“ä¸­æ–‡)
â”œâ”€â”€ messages_en_US.properties    (ç¾å¼è‹±è¯­)
â””â”€â”€ messages_ja_JP.properties    (æ—¥è¯­)
```

**ğŸ“ èµ„æºæ–‡ä»¶å†…å®¹ç¤ºä¾‹**

**messages_zh_CN.properties (ä¸­æ–‡èµ„æº)**
```properties
# åŸºæœ¬ç•Œé¢æ–‡å­—
login.title=ç”¨æˆ·ç™»å½•
login.username=ç”¨æˆ·å
login.password=å¯†ç 
login.submit=ç™»å½•
login.cancel=å–æ¶ˆ

# æç¤ºä¿¡æ¯
msg.success=æ“ä½œæˆåŠŸï¼
msg.error=æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•
msg.welcome=æ¬¢è¿è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™

# å¯¼èˆªèœå•
nav.home=é¦–é¡µ
nav.products=äº§å“
nav.about=å…³äºæˆ‘ä»¬
nav.contact=è”ç³»æˆ‘ä»¬
```

**messages_en_US.properties (è‹±æ–‡èµ„æº)**
```properties
# åŸºæœ¬ç•Œé¢æ–‡å­—
login.title=User Login
login.username=Username
login.password=Password
login.submit=Login
login.cancel=Cancel

# æç¤ºä¿¡æ¯
msg.success=Operation successful!
msg.error=Operation failed, please try again
msg.welcome=Welcome to our website

# å¯¼èˆªèœå•
nav.home=Home
nav.products=Products
nav.about=About Us
nav.contact=Contact Us
```

### 2.3 èµ„æºæ–‡ä»¶çš„ç»„ç»‡æ–¹å¼


**ğŸ—‚ï¸ æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡**
```
resources/
â”œâ”€â”€ login_zh_CN.properties      (ç™»å½•æ¨¡å—-ä¸­æ–‡)
â”œâ”€â”€ login_en_US.properties      (ç™»å½•æ¨¡å—-è‹±æ–‡)
â”œâ”€â”€ product_zh_CN.properties    (äº§å“æ¨¡å—-ä¸­æ–‡)
â””â”€â”€ product_en_US.properties    (äº§å“æ¨¡å—-è‹±æ–‡)
```

**ğŸ¯ èµ„æºæ–‡ä»¶ç¼–å†™è§„èŒƒ**
```properties
# ä½¿ç”¨æœ‰æ„ä¹‰çš„é”®å
user.profile.name=å§“å
user.profile.email=é‚®ç®±
user.profile.phone=ç”µè¯

# é”®ååˆ†å±‚ç»“æ„
page.login.title=ç™»å½•é¡µé¢
page.register.title=æ³¨å†Œé¡µé¢
page.home.title=é¦–é¡µ
```

> **ğŸ“Œ é‡ç‚¹æé†’**
> 
> ä¸­æ–‡èµ„æºæ–‡ä»¶éœ€è¦ä½¿ç”¨Unicodeç¼–ç ï¼ŒIDEé€šå¸¸ä¼šè‡ªåŠ¨å¤„ç†
> å¦‚æœæ˜¾ç¤ºä¹±ç ï¼Œæ£€æŸ¥æ–‡ä»¶ç¼–ç æ ¼å¼

---

## 3. ğŸ”„ åŠ¨æ€è¯­è¨€åˆ‡æ¢å®ç°


### 3.1 è¯­è¨€åˆ‡æ¢çš„åŸºæœ¬åŸç†


**ğŸ”¸ åˆ‡æ¢åŸç†ç®€å•ç†è§£**
```
ç”¨æˆ·ç‚¹å‡»"English" â†’ å‘Šè¯‰æœåŠ¡å™¨è¦ç”¨è‹±æ–‡ â†’ æœåŠ¡å™¨è®°ä½è¿™ä¸ªé€‰æ‹© â†’ é¡µé¢é‡æ–°åŠ è½½æ˜¾ç¤ºè‹±æ–‡

æŠ€æœ¯å®ç°ï¼š
1. ç”¨æˆ·é€‰æ‹©è¯­è¨€
2. å­˜å‚¨è¯­è¨€åå¥½(Session/Cookie)
3. æ ¹æ®è¯­è¨€åå¥½åŠ è½½å¯¹åº”èµ„æºæ–‡ä»¶
4. é¡µé¢æ˜¾ç¤ºåˆ‡æ¢åçš„è¯­è¨€
```

### 3.2 è¯­è¨€åˆ‡æ¢Servletå®ç°


```java
@WebServlet("/changeLanguage")
public class LanguageServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€
        String language = request.getParameter("lang");
        
        if (language != null && !language.trim().isEmpty()) {
            // å­˜å‚¨åˆ°Sessionä¸­ï¼Œæ•´ä¸ªä¼šè¯æœŸé—´æœ‰æ•ˆ
            HttpSession session = request.getSession();
            session.setAttribute("userLanguage", language);
        }
        
        // è·³è½¬å›åŸé¡µé¢
        String referer = request.getHeader("Referer");
        if (referer != null) {
            response.sendRedirect(referer);
        } else {
            response.sendRedirect("index.jsp");
        }
    }
}
```

### 3.3 JSPé¡µé¢ä¸­çš„è¯­è¨€åˆ‡æ¢


**ğŸ–¼ï¸ åˆ›å»ºè¯­è¨€åˆ‡æ¢æŒ‰é’®**
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<html>
<head>
    <title>å¤šè¯­è¨€ç½‘ç«™</title>
</head>
<body>
    <!-- è¯­è¨€åˆ‡æ¢èœå• -->
    <div class="language-switcher">
        <a href="changeLanguage?lang=zh_CN">ä¸­æ–‡</a> |
        <a href="changeLanguage?lang=en_US">English</a> |
        <a href="changeLanguage?lang=ja_JP">æ—¥æœ¬èª</a>
    </div>

    <!-- è®¾ç½®å½“å‰è¯­è¨€ç¯å¢ƒ -->
    <fmt:setLocale value="${sessionScope.userLanguage}" />
    <fmt:setBundle basename="messages" />

    <!-- ä½¿ç”¨å›½é™…åŒ–æ–‡æœ¬ -->
    <h1><fmt:message key="msg.welcome" /></h1>
    <p><fmt:message key="nav.home" /></p>
</body>
</html>
```

### 3.4 é«˜çº§è¯­è¨€åˆ‡æ¢å®ç°


**âš™ï¸ å¸¦CookieæŒä¹…åŒ–çš„è¯­è¨€åˆ‡æ¢**
```java
@WebServlet("/advancedLanguage")
public class AdvancedLanguageServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String language = request.getParameter("lang");
        
        if (language != null) {
            // å­˜å‚¨åˆ°Session
            request.getSession().setAttribute("userLanguage", language);
            
            // åŒæ—¶å­˜å‚¨åˆ°Cookieï¼Œä¸‹æ¬¡è®¿é—®è®°ä½é€‰æ‹©
            Cookie langCookie = new Cookie("userLanguage", language);
            langCookie.setMaxAge(30 * 24 * 60 * 60); // 30å¤©
            langCookie.setPath("/");
            response.addCookie(langCookie);
        }
        
        response.sendRedirect("index.jsp");
    }
}
```

**ğŸ”§ è¯­è¨€ä¼˜å…ˆçº§æ£€æµ‹Filter**
```java
@WebFilter("/*")
public class LanguageFilter implements Filter {
    
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) 
            throws IOException, ServletException {
        
        HttpServletRequest request = (HttpServletRequest) req;
        HttpSession session = request.getSession();
        
        String language = null;
        
        // ä¼˜å…ˆçº§1ï¼šSessionä¸­çš„è¯­è¨€è®¾ç½®
        language = (String) session.getAttribute("userLanguage");
        
        // ä¼˜å…ˆçº§2ï¼šCookieä¸­çš„è¯­è¨€è®¾ç½®
        if (language == null) {
            Cookie[] cookies = request.getCookies();
            if (cookies != null) {
                for (Cookie cookie : cookies) {
                    if ("userLanguage".equals(cookie.getName())) {
                        language = cookie.getValue();
                        session.setAttribute("userLanguage", language);
                        break;
                    }
                }
            }
        }
        
        // ä¼˜å…ˆçº§3ï¼šæµè§ˆå™¨é»˜è®¤è¯­è¨€
        if (language == null) {
            language = request.getLocale().toString();
            session.setAttribute("userLanguage", language);
        }
        
        chain.doFilter(request, resp);
    }
}
```

---

## 4. ğŸ¯ åŒºåŸŸè‡ªåŠ¨æ£€æµ‹


### 4.1 ä»€ä¹ˆæ˜¯åŒºåŸŸè‡ªåŠ¨æ£€æµ‹


**ğŸ”¸ è‡ªåŠ¨æ£€æµ‹çš„å«ä¹‰**
```
å°±åƒä½ çš„æ‰‹æœºä¼šæ ¹æ®ä½ çš„ä½ç½®è‡ªåŠ¨åˆ‡æ¢æ—¶åŒºä¸€æ ·
ç½‘ç«™èƒ½æ ¹æ®ç”¨æˆ·çš„æµè§ˆå™¨è®¾ç½®ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„è¯­è¨€

æŠ€æœ¯åŸç†ï¼š
æµè§ˆå™¨ä¼šå‘Šè¯‰æœåŠ¡å™¨ç”¨æˆ·çš„è¯­è¨€åå¥½
æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªä¿¡æ¯è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„è¯­è¨€åŒ…
```

### 4.2 è·å–ç”¨æˆ·åŒºåŸŸä¿¡æ¯


**ğŸŒ æµè§ˆå™¨è¯­è¨€æ£€æµ‹**
```java
@WebServlet("/autoDetect")
public class AutoDetectServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–æµè§ˆå™¨çš„è¯­è¨€åå¥½
        Locale browserLocale = request.getLocale();
        
        // è·å–æ‰€æœ‰è¯­è¨€åå¥½ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
        Enumeration<Locale> locales = request.getLocales();
        
        System.out.println("ç”¨æˆ·é¦–é€‰è¯­è¨€: " + browserLocale);
        System.out.println("è¯­è¨€: " + browserLocale.getLanguage());
        System.out.println("å›½å®¶: " + browserLocale.getCountry());
        
        // éå†æ‰€æœ‰è¯­è¨€åå¥½
        while (locales.hasMoreElements()) {
            Locale locale = locales.nextElement();
            System.out.println("æ”¯æŒè¯­è¨€: " + locale);
        }
    }
}
```

### 4.3 æ™ºèƒ½è¯­è¨€é€‰æ‹©ç­–ç•¥


**ğŸ§  è¯­è¨€åŒ¹é…ç®—æ³•**
```java
public class SmartLanguageDetector {
    
    // ç½‘ç«™æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
    private static final String[] SUPPORTED_LANGUAGES = {
        "zh_CN", "en_US", "ja_JP", "ko_KR"
    };
    
    public String detectBestLanguage(HttpServletRequest request) {
        // è·å–ç”¨æˆ·æ‰€æœ‰è¯­è¨€åå¥½
        Enumeration<Locale> locales = request.getLocales();
        
        while (locales.hasMoreElements()) {
            Locale locale = locales.nextElement();
            String langCode = locale.getLanguage() + "_" + locale.getCountry();
            
            // ç²¾ç¡®åŒ¹é…ï¼ˆè¯­è¨€+å›½å®¶ï¼‰
            if (isSupported(langCode)) {
                return langCode;
            }
            
            // è¯­è¨€åŒ¹é…ï¼ˆå¿½ç•¥å›½å®¶ï¼‰
            for (String supported : SUPPORTED_LANGUAGES) {
                if (supported.startsWith(locale.getLanguage())) {
                    return supported;
                }
            }
        }
        
        // é»˜è®¤è¿”å›è‹±æ–‡
        return "en_US";
    }
    
    private boolean isSupported(String langCode) {
        for (String supported : SUPPORTED_LANGUAGES) {
            if (supported.equals(langCode)) {
                return true;
            }
        }
        return false;
    }
}
```

### 4.4 åŒºåŸŸæ£€æµ‹å®ç”¨å·¥å…·


**ğŸ› ï¸ åœ°ç†ä½ç½®ä¸è¯­è¨€æ˜ å°„**
```java
public class GeoLanguageMapper {
    
    private static Map<String, String> countryLanguageMap = new HashMap<>();
    
    static {
        countryLanguageMap.put("CN", "zh_CN");  // ä¸­å›½->ä¸­æ–‡
        countryLanguageMap.put("US", "en_US");  // ç¾å›½->è‹±æ–‡  
        countryLanguageMap.put("JP", "ja_JP");  // æ—¥æœ¬->æ—¥æ–‡
        countryLanguageMap.put("KR", "ko_KR");  // éŸ©å›½->éŸ©æ–‡
        countryLanguageMap.put("GB", "en_US");  // è‹±å›½->è‹±æ–‡
    }
    
    public String getLanguageByCountry(String countryCode) {
        return countryLanguageMap.getOrDefault(countryCode, "en_US");
    }
}
```

**ğŸ“± ç»¼åˆæ£€æµ‹ç­–ç•¥**
```
æ£€æµ‹ä¼˜å…ˆçº§ï¼š
1. ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„è¯­è¨€ï¼ˆSession/Cookieï¼‰
2. æµè§ˆå™¨Accept-Languageå¤´ä¿¡æ¯
3. IPåœ°å€åœ°ç†ä½ç½®æ¨æµ‹
4. é»˜è®¤è¯­è¨€ï¼ˆé€šå¸¸æ˜¯è‹±æ–‡ï¼‰

å®é™…åº”ç”¨å»ºè®®ï¼š
- ç¬¬ä¸€æ¬¡è®¿é—®ï¼šè‡ªåŠ¨æ£€æµ‹+ç”¨æˆ·ç¡®è®¤
- åç»­è®¿é—®ï¼šè®°ä½ç”¨æˆ·é€‰æ‹©
- æä¾›æ‰‹åŠ¨åˆ‡æ¢é€‰é¡¹
```

---

## 5. ğŸ“… æ—¥æœŸæ ¼å¼æœ¬åœ°åŒ–


### 5.1 æ—¥æœŸæ ¼å¼çš„æ–‡åŒ–å·®å¼‚


**ğŸŒ ä¸åŒåœ°åŒºçš„æ—¥æœŸä¹ æƒ¯**
```
ä¸­å›½ï¼š     2025å¹´1æœˆ20æ—¥ æˆ– 2025-01-20
ç¾å›½ï¼š     January 20, 2025 æˆ– 01/20/2025  
æ¬§æ´²ï¼š     20/01/2025 æˆ– 20.01.2025
æ—¥æœ¬ï¼š     ä»¤å’Œ7å¹´1æœˆ20æ—¥

æŠ€æœ¯è§’åº¦ï¼šåŒä¸€ä¸ªæ—¶é—´ï¼Œä¸åŒåœ°åŒºæ˜¾ç¤ºæ–¹å¼å®Œå…¨ä¸åŒ
```

### 5.2 JSTLæ—¥æœŸæ ¼å¼åŒ–


**ğŸ“… åŸºæœ¬æ—¥æœŸæ ¼å¼åŒ–**
```jsp
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ page import="java.util.Date" %>

<!-- è®¾ç½®å½“å‰è¯­è¨€ç¯å¢ƒ -->
<fmt:setLocale value="${sessionScope.userLanguage}" />

<!-- è·å–å½“å‰æ—¶é—´ -->
<jsp:useBean id="now" class="java.util.Date" />

<!-- ä¸åŒæ ·å¼çš„æ—¥æœŸæ ¼å¼åŒ– -->
<p>å®Œæ•´æ—¥æœŸ: <fmt:formatDate value="${now}" type="date" dateStyle="full" /></p>
<p>é•¿æ—¥æœŸ:   <fmt:formatDate value="${now}" type="date" dateStyle="long" /></p>
<p>ä¸­ç­‰æ—¥æœŸ: <fmt:formatDate value="${now}" type="date" dateStyle="medium" /></p>
<p>çŸ­æ—¥æœŸ:   <fmt:formatDate value="${now}" type="date" dateStyle="short" /></p>
```

**â° æ—¶é—´æ ¼å¼åŒ–**
```jsp
<!-- ä¸åŒæ ·å¼çš„æ—¶é—´æ ¼å¼åŒ– -->
<p>å®Œæ•´æ—¶é—´: <fmt:formatDate value="${now}" type="time" timeStyle="full" /></p>
<p>é•¿æ—¶é—´:   <fmt:formatDate value="${now}" type="time" timeStyle="long" /></p>
<p>ä¸­ç­‰æ—¶é—´: <fmt:formatDate value="${now}" type="time" timeStyle="medium" /></p>
<p>çŸ­æ—¶é—´:   <fmt:formatDate value="${now}" type="time" timeStyle="short" /></p>

<!-- æ—¥æœŸ+æ—¶é—´ç»„åˆ -->
<p>æ—¥æœŸæ—¶é—´: <fmt:formatDate value="${now}" type="both" 
           dateStyle="medium" timeStyle="medium" /></p>
```

### 5.3 è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼


**ğŸ¨ è‡ªå®šä¹‰æ ¼å¼æ¨¡å¼**
```jsp
<!-- è‡ªå®šä¹‰æ ¼å¼æ¨¡å¼ -->
<fmt:formatDate value="${now}" pattern="yyyyå¹´MMæœˆddæ—¥ HH:mm:ss" />
<fmt:formatDate value="${now}" pattern="MM/dd/yyyy" />
<fmt:formatDate value="${now}" pattern="dd-MM-yyyy HH:mm" />

<!-- æ ¹æ®è¯­è¨€ç¯å¢ƒä½¿ç”¨ä¸åŒæ ¼å¼ -->
<c:choose>
    <c:when test="${sessionScope.userLanguage == 'zh_CN'}">
        <fmt:formatDate value="${now}" pattern="yyyyå¹´MMæœˆddæ—¥" />
    </c:when>
    <c:when test="${sessionScope.userLanguage == 'en_US'}">
        <fmt:formatDate value="${now}" pattern="MMM dd, yyyy" />
    </c:when>
    <c:otherwise>
        <fmt:formatDate value="${now}" pattern="dd/MM/yyyy" />
    </c:otherwise>
</c:choose>
```

### 5.4 Javaä»£ç ä¸­çš„æ—¥æœŸæœ¬åœ°åŒ–


**ğŸ’» Servletä¸­çš„æ—¥æœŸå¤„ç†**
```java
@WebServlet("/dateDemo")
public class DateLocalizationServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–å½“å‰è¯­è¨€ç¯å¢ƒ
        String langCode = (String) request.getSession().getAttribute("userLanguage");
        Locale locale = getLocaleFromString(langCode);
        
        // åˆ›å»ºæœ¬åœ°åŒ–çš„æ—¥æœŸæ ¼å¼å™¨
        DateFormat dateFormat = DateFormat.getDateInstance(DateFormat.FULL, locale);
        DateFormat timeFormat = DateFormat.getTimeInstance(DateFormat.MEDIUM, locale);
        
        Date now = new Date();
        
        // æ ¼å¼åŒ–æ—¥æœŸ
        String formattedDate = dateFormat.format(now);
        String formattedTime = timeFormat.format(now);
        
        // ä¼ é€’åˆ°JSPé¡µé¢
        request.setAttribute("localizedDate", formattedDate);
        request.setAttribute("localizedTime", formattedTime);
        
        request.getRequestDispatcher("date-display.jsp").forward(request, response);
    }
    
    private Locale getLocaleFromString(String langCode) {
        if (langCode == null) return Locale.getDefault();
        
        String[] parts = langCode.split("_");
        if (parts.length == 2) {
            return new Locale(parts[0], parts[1]);
        }
        return new Locale(parts[0]);
    }
}
```

**ğŸ“Š å¤šæ—¶åŒºæ—¥æœŸæ˜¾ç¤º**

| è¯­è¨€ç¯å¢ƒ | æ—¥æœŸæ ¼å¼ç¤ºä¾‹ | æ—¶é—´æ ¼å¼ç¤ºä¾‹ |
|---------|--------------|--------------|
| **ä¸­æ–‡** | `2025å¹´1æœˆ20æ—¥` | `ä¸Šåˆ10:30:45` |
| **è‹±æ–‡** | `January 20, 2025` | `10:30:45 AM` |
| **æ—¥æ–‡** | `2025å¹´1æœˆ20æ—¥` | `åˆå‰10:30:45` |

---

## 6. ğŸ’° è´§å¸æ ¼å¼æœ¬åœ°åŒ–


### 6.1 è´§å¸æ ¼å¼çš„åœ°åŒºå·®å¼‚


**ğŸ’¸ ä¸åŒå›½å®¶çš„è´§å¸æ˜¾ç¤º**
```
ä¸­å›½ï¼š    Â¥100.00 æˆ– 100.00å…ƒ
ç¾å›½ï¼š    $99.99
æ¬§æ´²ï¼š    â‚¬85.50  
æ—¥æœ¬ï¼š    Â¥10,500

æŠ€æœ¯æŒ‘æˆ˜ï¼š
- è´§å¸ç¬¦å·ä¸åŒ
- å°æ•°ä½æ•°ä¸åŒï¼ˆæ—¥å…ƒæ²¡æœ‰å°æ•°ï¼‰
- åƒåˆ†ä½åˆ†éš”ç¬¦ä¸åŒ
- ç¬¦å·ä½ç½®ä¸åŒï¼ˆå‰ç½®/åç½®ï¼‰
```

### 6.2 JSTLè´§å¸æ ¼å¼åŒ–


**ğŸ’µ åŸºæœ¬è´§å¸æ ¼å¼åŒ–**
```jsp
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!-- è®¾ç½®è¯­è¨€ç¯å¢ƒ -->
<fmt:setLocale value="${sessionScope.userLanguage}" />

<!-- å®šä¹‰ä¸€ä¸ªä»·æ ¼ -->
<c:set var="price" value="1234.56" />

<!-- è‡ªåŠ¨è´§å¸æ ¼å¼åŒ– -->
<p>å•†å“ä»·æ ¼: <fmt:formatNumber value="${price}" type="currency" /></p>

<!-- æŒ‡å®šè´§å¸ä»£ç  -->
<fmt:formatNumber value="${price}" type="currency" currencyCode="USD" />
<fmt:formatNumber value="${price}" type="currency" currencyCode="CNY" />
<fmt:formatNumber value="${price}" type="currency" currencyCode="JPY" />
```

### 6.3 å¤šè´§å¸æ”¯æŒå®ç°


**ğŸŒ è´§å¸è½¬æ¢ä¸æ˜¾ç¤º**
```jsp
<!-- è´§å¸è½¬æ¢JSPé¡µé¢ -->
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<html>
<head>
    <title>å¤šè´§å¸å•†å“å±•ç¤º</title>
</head>
<body>
    <!-- è®¾ç½®è¯­è¨€ç¯å¢ƒ -->
    <fmt:setLocale value="${sessionScope.userLanguage}" />
    
    <!-- å•†å“ä¿¡æ¯ -->
    <div class="product">
        <h3>iPhone 15 Pro</h3>
        
        <!-- åŸä»·ï¼ˆç¾å…ƒï¼‰ -->
        <c:set var="originalPrice" value="999.99" />
        
        <!-- æ ¹æ®ç”¨æˆ·è¯­è¨€æ˜¾ç¤ºå¯¹åº”è´§å¸ -->
        <c:choose>
            <c:when test="${sessionScope.userLanguage == 'zh_CN'}">
                <!-- è½¬æ¢ä¸ºäººæ°‘å¸æ˜¾ç¤º -->
                <c:set var="cnPrice" value="${originalPrice * 7.2}" />
                <p>ä»·æ ¼: <fmt:formatNumber value="${cnPrice}" type="currency" currencyCode="CNY" /></p>
            </c:when>
            <c:when test="${sessionScope.userLanguage == 'ja_JP'}">
                <!-- è½¬æ¢ä¸ºæ—¥å…ƒæ˜¾ç¤º -->
                <c:set var="jpPrice" value="${originalPrice * 150}" />
                <p>ä¾¡æ ¼: <fmt:formatNumber value="${jpPrice}" type="currency" currencyCode="JPY" /></p>
            </c:when>
            <c:otherwise>
                <!-- é»˜è®¤ç¾å…ƒæ˜¾ç¤º -->
                <p>Price: <fmt:formatNumber value="${originalPrice}" type="currency" currencyCode="USD" /></p>
            </c:otherwise>
        </c:choose>
    </div>
</body>
</html>
```

### 6.4 åç«¯è´§å¸å¤„ç†


**ğŸ’¼ è´§å¸å¤„ç†Servlet**
```java
@WebServlet("/currencyDemo")
public class CurrencyServlet extends HttpServlet {
    
    // æ±‡ç‡æ˜ å°„è¡¨ï¼ˆå®é™…é¡¹ç›®ä¸­åº”è¯¥ä»APIè·å–å®æ—¶æ±‡ç‡ï¼‰
    private static final Map<String, Double> EXCHANGE_RATES = new HashMap<>();
    
    static {
        EXCHANGE_RATES.put("USD", 1.0);      // ç¾å…ƒåŸºå‡†
        EXCHANGE_RATES.put("CNY", 7.2);     // äººæ°‘å¸
        EXCHANGE_RATES.put("JPY", 150.0);   // æ—¥å…ƒ
        EXCHANGE_RATES.put("EUR", 0.85);    // æ¬§å…ƒ
    }
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–ç”¨æˆ·è¯­è¨€ç¯å¢ƒ
        String langCode = (String) request.getSession().getAttribute("userLanguage");
        
        // åŸå§‹ä»·æ ¼ï¼ˆç¾å…ƒï¼‰
        double originalPrice = 99.99;
        
        // æ ¹æ®è¯­è¨€ç¡®å®šè´§å¸
        String currencyCode = getCurrencyByLanguage(langCode);
        double exchangeRate = EXCHANGE_RATES.getOrDefault(currencyCode, 1.0);
        
        // è½¬æ¢ä»·æ ¼
        double localizedPrice = originalPrice * exchangeRate;
        
        // æ ¼å¼åŒ–è´§å¸
        Locale locale = getLocaleFromLanguage(langCode);
        NumberFormat currencyFormat = NumberFormat.getCurrencyInstance(locale);
        String formattedPrice = currencyFormat.format(localizedPrice);
        
        // ä¼ é€’ç»™JSP
        request.setAttribute("formattedPrice", formattedPrice);
        request.setAttribute("currencyCode", currencyCode);
        
        request.getRequestDispatcher("currency-display.jsp").forward(request, response);
    }
    
    private String getCurrencyByLanguage(String langCode) {
        if (langCode == null) return "USD";
        
        if (langCode.startsWith("zh")) return "CNY";
        if (langCode.startsWith("ja")) return "JPY";
        if (langCode.startsWith("en")) return "USD";
        
        return "USD";
    }
    
    private Locale getLocaleFromLanguage(String langCode) {
        if (langCode == null) return Locale.US;
        
        String[] parts = langCode.split("_");
        if (parts.length == 2) {
            return new Locale(parts[0], parts[1]);
        }
        return new Locale(parts[0]);
    }
}
```

**ğŸ“ˆ æ±‡ç‡å®æ—¶æ›´æ–°å·¥å…·ç±»**
```java
public class ExchangeRateService {
    
    private static Map<String, Double> rateCache = new HashMap<>();
    private static long lastUpdateTime = 0;
    private static final long CACHE_DURATION = 30 * 60 * 1000; // 30åˆ†é’Ÿ
    
    public static double getExchangeRate(String fromCurrency, String toCurrency) {
        // å¦‚æœç¼“å­˜è¿‡æœŸï¼Œæ›´æ–°æ±‡ç‡
        if (System.currentTimeMillis() - lastUpdateTime > CACHE_DURATION) {
            updateExchangeRates();
        }
        
        // è¿”å›æ±‡ç‡
        String key = fromCurrency + "_" + toCurrency;
        return rateCache.getOrDefault(key, 1.0);
    }
    
    private static void updateExchangeRates() {
        // å®é™…é¡¹ç›®ä¸­è¿™é‡Œåº”è¯¥è°ƒç”¨æ±‡ç‡API
        // è¿™é‡Œåªæ˜¯ç¤ºä¾‹æ•°æ®
        rateCache.put("USD_CNY", 7.2);
        rateCache.put("USD_JPY", 150.0);
        rateCache.put("USD_EUR", 0.85);
        
        lastUpdateTime = System.currentTimeMillis();
    }
}
```

---

## 7. ğŸ“§ æ¶ˆæ¯å›½é™…åŒ–å¤„ç†


### 7.1 ä»€ä¹ˆæ˜¯æ¶ˆæ¯å›½é™…åŒ–


**ğŸ”¸ æ¶ˆæ¯å›½é™…åŒ–çš„å«ä¹‰**
```
ç®€å•ç†è§£ï¼šè®©ç³»ç»Ÿçš„æç¤ºä¿¡æ¯ã€é”™è¯¯ä¿¡æ¯ã€æˆåŠŸä¿¡æ¯ç­‰
æ ¹æ®ç”¨æˆ·çš„è¯­è¨€æ˜¾ç¤ºå¯¹åº”çš„æ–‡å­—

ä¾‹å¦‚ï¼š
ç™»å½•æˆåŠŸ â†’ ä¸­æ–‡æ˜¾ç¤º"ç™»å½•æˆåŠŸï¼"
Login Success â†’ è‹±æ–‡æ˜¾ç¤º"Login successful!"
ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ â†’ æ—¥æ–‡æ˜¾ç¤º"ãƒ­ã‚°ã‚¤ãƒ³ã«æˆåŠŸã—ã¾ã—ãŸï¼"
```

### 7.2 æ¶ˆæ¯èµ„æºæ–‡ä»¶é…ç½®


**ğŸ“ æ¶ˆæ¯èµ„æºæ–‡ä»¶ç¤ºä¾‹**

**messages_zh_CN.properties**
```properties
# ç³»ç»Ÿæ¶ˆæ¯
system.welcome=æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿï¼
system.goodbye=è°¢è°¢æ‚¨çš„ä½¿ç”¨ï¼Œå†è§ï¼

# æˆåŠŸæ¶ˆæ¯
success.login=ç™»å½•æˆåŠŸï¼
success.register=æ³¨å†ŒæˆåŠŸï¼
success.save=ä¿å­˜æˆåŠŸï¼
success.delete=åˆ é™¤æˆåŠŸï¼

# é”™è¯¯æ¶ˆæ¯
error.login.failed=ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
error.network=ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•
error.permission=æ‚¨æ²¡æœ‰æƒé™æ‰§è¡Œæ­¤æ“ä½œ
error.validation.required={0}ä¸èƒ½ä¸ºç©º
error.validation.email=è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼

# è­¦å‘Šæ¶ˆæ¯  
warning.unsaved=æ‚¨æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ
warning.delete=åˆ é™¤åæ— æ³•æ¢å¤ï¼Œç¡®å®šè¦åˆ é™¤å—ï¼Ÿ
```

**messages_en_US.properties**
```properties
# ç³»ç»Ÿæ¶ˆæ¯
system.welcome=Welcome to our system!
system.goodbye=Thank you for using our service, goodbye!

# æˆåŠŸæ¶ˆæ¯
success.login=Login successful!
success.register=Registration successful!
success.save=Save successful!
success.delete=Delete successful!

# é”™è¯¯æ¶ˆæ¯
error.login.failed=Invalid username or password
error.network=Network connection failed, please try again later
error.permission=You don't have permission to perform this action
error.validation.required={0} is required
error.validation.email=Please enter a valid email format

# è­¦å‘Šæ¶ˆæ¯
warning.unsaved=You have unsaved changes, are you sure you want to leave?
warning.delete=This action cannot be undone, are you sure you want to delete?
```

### 7.3 JSPä¸­ä½¿ç”¨å›½é™…åŒ–æ¶ˆæ¯


**ğŸ“± åŸºæœ¬æ¶ˆæ¯æ˜¾ç¤º**
```jsp
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!-- è®¾ç½®è¯­è¨€ç¯å¢ƒå’Œèµ„æºåŒ… -->
<fmt:setLocale value="${sessionScope.userLanguage}" />
<fmt:setBundle basename="messages" />

<!-- æ˜¾ç¤ºå„ç§æ¶ˆæ¯ -->
<div class="messages">
    <!-- æ¬¢è¿æ¶ˆæ¯ -->
    <h1><fmt:message key="system.welcome" /></h1>
    
    <!-- æˆåŠŸæ¶ˆæ¯ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <c:if test="${not empty successMsg}">
        <div class="success-message">
            <fmt:message key="${successMsg}" />
        </div>
    </c:if>
    
    <!-- é”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <c:if test="${not empty errorMsg}">
        <div class="error-message">
            <fmt:message key="${errorMsg}" />
        </div>
    </c:if>
</div>
```

**ğŸ”§ å¸¦å‚æ•°çš„æ¶ˆæ¯**
```jsp
<!-- å¸¦å‚æ•°çš„é”™è¯¯æ¶ˆæ¯ -->
<c:if test="${not empty fieldError}">
    <fmt:message key="error.validation.required">
        <fmt:param value="ç”¨æˆ·å" />
    </fmt:message>
</c:if>

<!-- åŠ¨æ€å‚æ•°æ¶ˆæ¯ -->
<fmt:message key="user.info.message">
    <fmt:param value="${user.name}" />
    <fmt:param value="${user.lastLoginTime}" />
</fmt:message>
```

### 7.4 Servletä¸­çš„æ¶ˆæ¯å¤„ç†


**ğŸ’» æ¶ˆæ¯å¤„ç†Servlet**
```java
@WebServlet("/login")
public class LoginServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        
        try {
            // æ¨¡æ‹Ÿç™»å½•éªŒè¯
            if (validateUser(username, password)) {
                // ç™»å½•æˆåŠŸ
                HttpSession session = request.getSession();
                session.setAttribute("user", username);
                
                // è®¾ç½®æˆåŠŸæ¶ˆæ¯é”®
                request.setAttribute("successMsg", "success.login");
                
                // è·³è½¬åˆ°ä¸»é¡µ
                request.getRequestDispatcher("home.jsp").forward(request, response);
                
            } else {
                // ç™»å½•å¤±è´¥
                request.setAttribute("errorMsg", "error.login.failed");
                request.getRequestDispatcher("login.jsp").forward(request, response);
            }
            
        } catch (Exception e) {
            // ç³»ç»Ÿå¼‚å¸¸
            request.setAttribute("errorMsg", "error.network");
            request.getRequestDispatcher("login.jsp").forward(request, response);
        }
    }
    
    private boolean validateUser(String username, String password) {
        // ç®€å•çš„ç”¨æˆ·éªŒè¯é€»è¾‘
        return "admin".equals(username) && "123456".equals(password);
    }
}
```

### 7.5 æ¶ˆæ¯å·¥å…·ç±»


**ğŸ› ï¸ æ¶ˆæ¯å¤„ç†å·¥å…·ç±»**
```java
public class MessageUtil {
    
    /**
     * è·å–å›½é™…åŒ–æ¶ˆæ¯
     */
    public static String getMessage(HttpServletRequest request, String key) {
        // è·å–ç”¨æˆ·è¯­è¨€ç¯å¢ƒ
        String langCode = (String) request.getSession().getAttribute("userLanguage");
        Locale locale = getLocaleFromString(langCode);
        
        // åŠ è½½èµ„æºåŒ…
        ResourceBundle bundle = ResourceBundle.getBundle("messages", locale);
        
        try {
            return bundle.getString(key);
        } catch (MissingResourceException e) {
            return key; // å¦‚æœæ‰¾ä¸åˆ°æ¶ˆæ¯ï¼Œè¿”å›é”®å€¼
        }
    }
    
    /**
     * è·å–å¸¦å‚æ•°çš„å›½é™…åŒ–æ¶ˆæ¯
     */
    public static String getMessage(HttpServletRequest request, String key, Object... params) {
        String message = getMessage(request, key);
        return MessageFormat.format(message, params);
    }
    
    private static Locale getLocaleFromString(String langCode) {
        if (langCode == null) return Locale.getDefault();
        
        String[] parts = langCode.split("_");
        if (parts.length == 2) {
            return new Locale(parts[0], parts[1]);
        }
        return new Locale(parts[0]);
    }
}
```

**ğŸ“¤ æ¶ˆæ¯å‘é€ç¤ºä¾‹**
```java
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String email = request.getParameter("email");
        
        // é‚®ç®±æ ¼å¼éªŒè¯
        if (!isValidEmail(email)) {
            // ä½¿ç”¨å·¥å…·ç±»è·å–é”™è¯¯æ¶ˆæ¯
            String errorMsg = MessageUtil.getMessage(request, "error.validation.email");
            request.setAttribute("errorMessage", errorMsg);
            request.getRequestDispatcher("register.jsp").forward(request, response);
            return;
        }
        
        // æ³¨å†ŒæˆåŠŸ
        String successMsg = MessageUtil.getMessage(request, "success.register");
        request.setAttribute("successMessage", successMsg);
        request.getRequestDispatcher("success.jsp").forward(request, response);
    }
    
    private boolean isValidEmail(String email) {
        return email != null && email.contains("@");
    }
}
```

---

## 8. ğŸš€ å®Œæ•´i18næ–¹æ¡ˆå®æˆ˜


### 8.1 é¡¹ç›®ç»“æ„è§„åˆ’


**ğŸ“‚ å®Œæ•´å›½é™…åŒ–é¡¹ç›®ç»“æ„**
```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”œâ”€â”€ servlet/
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageServlet.java
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginServlet.java
â”‚   â”‚   â”‚   â””â”€â”€ ProductServlet.java
â”‚   â”‚   â”œâ”€â”€ filter/
â”‚   â”‚   â”‚   â””â”€â”€ LanguageFilter.java
â”‚   â”‚   â””â”€â”€ util/
â”‚   â”‚       â”œâ”€â”€ MessageUtil.java
â”‚   â”‚       â””â”€â”€ CurrencyUtil.java
â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”œâ”€â”€ messages_zh_CN.properties
â”‚   â”‚   â”œâ”€â”€ messages_en_US.properties
â”‚   â”‚   â””â”€â”€ messages_ja_JP.properties
â”‚   â””â”€â”€ webapp/
â”‚       â”œâ”€â”€ WEB-INF/
â”‚       â”‚   â””â”€â”€ web.xml
â”‚       â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ style.css
â”‚       â”œâ”€â”€ js/
â”‚       â”‚   â””â”€â”€ i18n.js
â”‚       â”œâ”€â”€ index.jsp
â”‚       â”œâ”€â”€ login.jsp
â”‚       â””â”€â”€ product.jsp
```

### 8.2 å®Œæ•´é…ç½®æ–‡ä»¶


**ğŸ”§ web.xmlé…ç½®**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
         http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">
         
    <display-name>å›½é™…åŒ–ç”µå•†ç½‘ç«™</display-name>
    
    <!-- è¯­è¨€è¿‡æ»¤å™¨ -->
    <filter>
        <filter-name>LanguageFilter</filter-name>
        <filter-class>filter.LanguageFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>LanguageFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    
    <!-- é»˜è®¤é¦–é¡µ -->
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    
</web-app>
```

### 8.3 æ ¸å¿ƒFilterå®ç°


**ğŸ” å®Œæ•´è¯­è¨€æ£€æµ‹Filter**
```java
package filter;

import javax.servlet.*;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.*;
import java.io.IOException;
import java.util.*;

@WebFilter("/*")
public class LanguageFilter implements Filter {
    
    // æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
    private static final Set<String> SUPPORTED_LANGUAGES = new HashSet<>(
        Arrays.asList("zh_CN", "en_US", "ja_JP")
    );
    
    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) 
            throws IOException, ServletException {
        
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) resp;
        HttpSession session = request.getSession();
        
        String language = detectUserLanguage(request, session);
        
        // å­˜å‚¨åˆ°Sessionä¸­ä¾›åç»­ä½¿ç”¨
        session.setAttribute("userLanguage", language);
        session.setAttribute("currentLocale", getLocaleFromString(language));
        
        // è®¾ç½®å“åº”å­—ç¬¦ç¼–ç 
        response.setCharacterEncoding("UTF-8");
        request.setCharacterEncoding("UTF-8");
        
        chain.doFilter(request, response);
    }
    
    private String detectUserLanguage(HttpServletRequest request, HttpSession session) {
        String language = null;
        
        // 1. æ£€æŸ¥URLå‚æ•°ï¼ˆç”¨äºè¯­è¨€åˆ‡æ¢ï¼‰
        String langParam = request.getParameter("lang");
        if (isValidLanguage(langParam)) {
            // åŒæ—¶ä¿å­˜åˆ°Cookie
            Cookie cookie = new Cookie("userLanguage", langParam);
            cookie.setMaxAge(30 * 24 * 60 * 60); // 30å¤©
            cookie.setPath("/");
            ((HttpServletResponse) request.getAttribute("response")).addCookie(cookie);
            return langParam;
        }
        
        // 2. æ£€æŸ¥Sessionä¸­çš„è®¾ç½®
        language = (String) session.getAttribute("userLanguage");
        if (isValidLanguage(language)) {
            return language;
        }
        
        // 3. æ£€æŸ¥Cookieä¸­çš„è®¾ç½®
        Cookie[] cookies = request.getCookies();
        if (cookies != null) {
            for (Cookie cookie : cookies) {
                if ("userLanguage".equals(cookie.getName())) {
                    language = cookie.getValue();
                    if (isValidLanguage(language)) {
                        return language;
                    }
                }
            }
        }
        
        // 4. æ£€æŸ¥æµè§ˆå™¨è¯­è¨€åå¥½
        Enumeration<Locale> locales = request.getLocales();
        while (locales.hasMoreElements()) {
            Locale locale = locales.nextElement();
            String langCode = locale.getLanguage() + "_" + locale.getCountry();
            
            if (SUPPORTED_LANGUAGES.contains(langCode)) {
                return langCode;
            }
            
            // æ£€æŸ¥ä»…è¯­è¨€éƒ¨åˆ†çš„åŒ¹é…
            for (String supported : SUPPORTED_LANGUAGES) {
                if (supported.startsWith(locale.getLanguage())) {
                    return supported;
                }
            }
        }
        
        // 5. é»˜è®¤è¿”å›è‹±æ–‡
        return "en_US";
    }
    
    private boolean isValidLanguage(String language) {
        return language != null && SUPPORTED_LANGUAGES.contains(language);
    }
    
    private Locale getLocaleFromString(String langCode) {
        if (langCode == null) return Locale.getDefault();
        
        String[] parts = langCode.split("_");
        if (parts.length == 2) {
            return new Locale(parts[0], parts[1]);
        }
        return new Locale(parts[0]);
    }
}
```

### 8.4 å®Œæ•´ä¸»é¡µå®ç°


**ğŸ  å›½é™…åŒ–ä¸»é¡µJSP**
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!DOCTYPE html>
<html lang="${sessionScope.userLanguage}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <fmt:setLocale value="${sessionScope.userLanguage}" />
        <fmt:setBundle basename="messages" />
        <fmt:message key="site.title" />
    </title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- è®¾ç½®å›½é™…åŒ–ç¯å¢ƒ -->
    <fmt:setLocale value="${sessionScope.userLanguage}" />
    <fmt:setBundle basename="messages" />
    
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="container">
            <!-- ç½‘ç«™æ ‡é¢˜ -->
            <h1 class="logo">
                <fmt:message key="site.name" />
            </h1>
            
            <!-- è¯­è¨€åˆ‡æ¢èœå• -->
            <div class="language-switcher">
                <span><fmt:message key="language.select" />:</span>
                <a href="?lang=zh_CN" class="${sessionScope.userLanguage == 'zh_CN' ? 'active' : ''}">
                    ä¸­æ–‡
                </a> |
                <a href="?lang=en_US" class="${sessionScope.userLanguage == 'en_US' ? 'active' : ''}">
                    English
                </a> |
                <a href="?lang=ja_JP" class="${sessionScope.userLanguage == 'ja_JP' ? 'active' : ''}">
                    æ—¥æœ¬èª
                </a>
            </div>
            
            <!-- ä¸»å¯¼èˆª -->
            <nav class="main-nav">
                <ul>
                    <li><a href="index.jsp"><fmt:message key="nav.home" /></a></li>
                    <li><a href="product.jsp"><fmt:message key="nav.products" /></a></li>
                    <li><a href="about.jsp"><fmt:message key="nav.about" /></a></li>
                    <li><a href="contact.jsp"><fmt:message key="nav.contact" /></a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- ä¸»è¦å†…å®¹ -->
    <main class="main-content">
        <div class="container">
            <!-- æ¬¢è¿ä¿¡æ¯ -->
            <section class="welcome">
                <h2><fmt:message key="home.welcome.title" /></h2>
                <p><fmt:message key="home.welcome.description" /></p>
            </section>
            
            <!-- äº§å“å±•ç¤º -->
            <section class="products">
                <h3><fmt:message key="home.products.title" /></h3>
                <div class="product-grid">
                    <!-- äº§å“1 -->
                    <div class="product-card">
                        <img src="images/product1.jpg" alt="Product 1">
                        <h4><fmt:message key="product.iphone.name" /></h4>
                        <p class="price">
                            <c:set var="price" value="999.99" />
                            <c:choose>
                                <c:when test="${sessionScope.userLanguage == 'zh_CN'}">
                                    <fmt:formatNumber value="${price * 7.2}" type="currency" currencyCode="CNY" />
                                </c:when>
                                <c:when test="${sessionScope.userLanguage == 'ja_JP'}">
                                    <fmt:formatNumber value="${price * 150}" type="currency" currencyCode="JPY" />
                                </c:when>
                                <c:otherwise>
                                    <fmt:formatNumber value="${price}" type="currency" currencyCode="USD" />
                                </c:otherwise>
                            </c:choose>
                        </p>
                    </div>
                    
                    <!-- æ›´å¤šäº§å“... -->
                </div>
            </section>
            
            <!-- æ—¶é—´ä¿¡æ¯ -->
            <section class="time-info">
                <jsp:useBean id="now" class="java.util.Date" />
                <p>
                    <fmt:message key="current.time" />: 
                    <fmt:formatDate value="${now}" type="both" 
                                  dateStyle="full" timeStyle="medium" />
                </p>
            </section>
        </div>
    </main>
    
    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 <fmt:message key="site.name" />. <fmt:message key="footer.rights" /></p>
        </div>
    </footer>
    
    <script src="js/i18n.js"></script>
</body>
</html>
```

### 8.5 å®Œæ•´èµ„æºé…ç½®


**ğŸ“„ messages_zh_CN.properties**
```properties
# ç½‘ç«™ä¿¡æ¯
site.name=å¤šè¯­è¨€å•†åŸ
site.title=å¤šè¯­è¨€ç”µå•†ç½‘ç«™ - å…¨çƒè´­ç‰©ä½“éªŒ

# å¯¼èˆªèœå•
nav.home=é¦–é¡µ
nav.products=äº§å“ä¸­å¿ƒ
nav.about=å…³äºæˆ‘ä»¬
nav.contact=è”ç³»æˆ‘ä»¬

# è¯­è¨€é€‰æ‹©
language.select=é€‰æ‹©è¯­è¨€

# é¦–é¡µå†…å®¹
home.welcome.title=æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å•†åŸï¼
home.welcome.description=è¿™é‡Œæœ‰å…¨çƒæœ€ä¼˜è´¨çš„äº§å“ï¼Œæ”¯æŒå¤šç§è¯­è¨€å’Œè´§å¸
home.products.title=çƒ­é—¨äº§å“

# äº§å“ä¿¡æ¯
product.iphone.name=iPhone 15 Pro
product.laptop.name=MacBook Pro
product.watch.name=Apple Watch

# æ—¶é—´æ˜¾ç¤º
current.time=å½“å‰æ—¶é—´

# é¡µè„š
footer.rights=ç‰ˆæƒæ‰€æœ‰
```

**ğŸ“„ messages_en_US.properties**
```properties
# ç½‘ç«™ä¿¡æ¯
site.name=Multi-Language Mall
site.title=Multi-Language E-commerce - Global Shopping Experience

# å¯¼èˆªèœå•
nav.home=Home
nav.products=Products
nav.about=About Us
nav.contact=Contact

# è¯­è¨€é€‰æ‹©
language.select=Select Language

# é¦–é¡µå†…å®¹
home.welcome.title=Welcome to Our Mall!
home.welcome.description=Here you can find the world's finest products with multi-language and currency support
home.products.title=Featured Products

# äº§å“ä¿¡æ¯
product.iphone.name=iPhone 15 Pro
product.laptop.name=MacBook Pro
product.watch.name=Apple Watch

# æ—¶é—´æ˜¾ç¤º
current.time=Current Time

# é¡µè„š
footer.rights=All Rights Reserved
```

### 8.6 å®Œæ•´æ ·å¼æ”¯æŒ


**ğŸ¨ CSSæ ·å¼æ–‡ä»¶**
```css
/* åŸºç¡€æ ·å¼ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6;
    color: #333;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* å¤´éƒ¨æ ·å¼ */
.header {
    background: #2c3e50;
    color: white;
    padding: 1rem 0;
}

.header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.logo {
    font-size: 1.8rem;
    margin: 0;
}

.language-switcher {
    display: flex;
    align-items: center;
    gap: 10px;
}

.language-switcher a {
    color: white;
    text-decoration: none;
    padding: 5px 10px;
    border-radius: 3px;
    transition: background 0.3s;
}

.language-switcher a:hover,
.language-switcher a.active {
    background: rgba(255,255,255,0.2);
}

.main-nav ul {
    display: flex;
    list-style: none;
    gap: 2rem;
}

.main-nav a {
    color: white;
    text-decoration: none;
    font-weight: 500;
}

/* ä¸»è¦å†…å®¹ */
.main-content {
    min-height: 70vh;
    padding: 2rem 0;
}

.welcome {
    text-align: center;
    margin-bottom: 3rem;
}

.welcome h2 {
    font-size: 2.5rem;
    color: #2c3e50;
    margin-bottom: 1rem;
}

.products {
    margin-bottom: 3rem;
}

.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.product-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
    transition: transform 0.3s;
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.product-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 5px;
}

.price {
    font-size: 1.5rem;
    font-weight: bold;
    color: #e74c3c;
    margin-top: 10px;
}

.time-info {
    text-align: center;
    padding: 2rem;
    background: #f8f9fa;
    border-radius: 8px;
    font-size: 1.1rem;
}

/* é¡µè„š */
.footer {
    background: #34495e;
    color: white;
    text-align: center;
    padding: 2rem 0;
    margin-top: 3rem;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .header .container {
        flex-direction: column;
        gap: 1rem;
    }
    
    .main-nav ul {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .welcome h2 {
        font-size: 2rem;
    }
    
    .product-grid {
        grid-template-columns: 1fr;
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ¯ å›½é™…åŒ–åŸºç¡€ç†è§£**
```
âœ… i18næ¦‚å¿µï¼šè®©ç½‘ç«™æ”¯æŒå¤šè¯­è¨€çš„æŠ€æœ¯
âœ… èµ„æºæ–‡ä»¶ï¼šå­˜å‚¨å„ç§è¯­è¨€ç¿»è¯‘çš„propertiesæ–‡ä»¶
âœ… åŠ¨æ€åˆ‡æ¢ï¼šç”¨æˆ·å¯ä»¥å®æ—¶åˆ‡æ¢è¯­è¨€ç¯å¢ƒ
âœ… è‡ªåŠ¨æ£€æµ‹ï¼šæ ¹æ®æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨é€‰æ‹©åˆé€‚è¯­è¨€
âœ… æ ¼å¼åŒ–ï¼šæ—¥æœŸã€è´§å¸ç­‰æŒ‰å½“åœ°ä¹ æƒ¯æ˜¾ç¤º
```

### 9.2 å…³é”®æŠ€æœ¯è¦ç‚¹


**ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ ˆ**
```
JSTLæ ‡ç­¾ï¼š<fmt:message>, <fmt:formatDate>, <fmt:formatNumber>
èµ„æºæ–‡ä»¶ï¼šmessages_è¯­è¨€ä»£ç _å›½å®¶ä»£ç .properties
Servletï¼šå¤„ç†è¯­è¨€åˆ‡æ¢å’Œèµ„æºåŠ è½½
Filterï¼šè‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œç¯å¢ƒè®¾ç½®
Localeï¼šJavaä¸­çš„åŒºåŸŸä¿¡æ¯è¡¨ç¤º
```

**ğŸ“Š å®ç°æµç¨‹å›¾**
```
ç”¨æˆ·è®¿é—®
    â†“
è¯­è¨€æ£€æµ‹Filter
    â†“
ç¡®å®šç”¨æˆ·è¯­è¨€åå¥½
    â†“
åŠ è½½å¯¹åº”èµ„æºæ–‡ä»¶
    â†“
JSPé¡µé¢ä½¿ç”¨JSTLæ ‡ç­¾
    â†“
æ˜¾ç¤ºæœ¬åœ°åŒ–å†…å®¹
```

### 9.3 æœ€ä½³å®è·µå»ºè®®


**ğŸŒŸ å¼€å‘å»ºè®®**
```
ğŸ“ æ–‡ä»¶ç»„ç»‡ï¼šæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡èµ„æºæ–‡ä»¶
ğŸ”„ è¯­è¨€åˆ‡æ¢ï¼šæä¾›æ˜æ˜¾çš„è¯­è¨€åˆ‡æ¢å…¥å£
ğŸ’¾ çŠ¶æ€ä¿æŒï¼šä½¿ç”¨Session+Cookieè®°ä½ç”¨æˆ·é€‰æ‹©  
ğŸ¨ UIé€‚é…ï¼šè€ƒè™‘ä¸åŒè¯­è¨€çš„æ–‡å­—é•¿åº¦å·®å¼‚
âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šåˆç†ç¼“å­˜èµ„æºæ–‡ä»¶å†…å®¹
```

**ğŸš« å¸¸è§é™·é˜±**
```
âŒ ç¡¬ç¼–ç æ–‡å­—ï¼šé¡µé¢ä¸­ä¸è¦ç›´æ¥å†™æ­»æ–‡å­—
âŒ ç¼–ç é—®é¢˜ï¼šæ³¨æ„ä¸­æ–‡èµ„æºæ–‡ä»¶çš„ç¼–ç æ ¼å¼
âŒ æ ¼å¼å‡è®¾ï¼šä¸è¦å‡è®¾æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨ç›¸åŒçš„æ—¥æœŸæ ¼å¼
âŒ è´§å¸é”™è¯¯ï¼šæ±‡ç‡è¦åŠæ—¶æ›´æ–°ï¼Œä¸èƒ½å†™æ­»
```

### 9.4 æ‰©å±•å­¦ä¹ æ–¹å‘


**ğŸ“ˆ è¿›é˜¶æŠ€æœ¯**
- **Springå›½é™…åŒ–**ï¼šå­¦ä¹ Springæ¡†æ¶çš„i18næ”¯æŒ
- **å‰ç«¯å›½é™…åŒ–**ï¼šJavaScriptçš„å›½é™…åŒ–åº“ä½¿ç”¨
- **æ•°æ®åº“å›½é™…åŒ–**ï¼šå¤šè¯­è¨€æ•°æ®å­˜å‚¨æ–¹æ¡ˆ
- **SEOä¼˜åŒ–**ï¼šå¤šè¯­è¨€ç½‘ç«™çš„æœç´¢å¼•æ“ä¼˜åŒ–

> **ğŸ’¡ ä¸€å¥è¯æ€»ç»“**
> 
> å›½é™…åŒ–å°±æ˜¯è®©ä½ çš„ç½‘ç«™è¯´éå…¨ä¸–ç•Œçš„è¯­è¨€ï¼Œ
> ç”¨æŠ€æœ¯æ¶èµ·æ²Ÿé€šä¸–ç•Œçš„æ¡¥æ¢ï¼

**ğŸ§  è®°å¿†å£è¯€**
```
å›½é™…åŒ–å¼€å‘è¦è®°ç‰¢ï¼š
èµ„æºæ–‡ä»¶åˆ†è¯­è¨€ï¼ŒJSTLæ ‡ç­¾æ¥è°ƒç”¨
Filteræ£€æµ‹è‡ªåŠ¨é€‰ï¼ŒSessionä¿å­˜ç”¨æˆ·é€‰
æ—¥æœŸè´§å¸è¦æ ¼å¼ï¼Œæç¤ºä¿¡æ¯è¦ç¿»è¯‘
ç”¨æˆ·ä½“éªŒæ˜¯å…³é”®ï¼Œå…¨çƒæœåŠ¡æ— å›½ç•Œ
```

---

**ğŸ‰ æ­å–œä½ å®Œæˆäº†JavaWebå›½é™…åŒ–æŠ€æœ¯çš„å­¦ä¹ ï¼**

ç°åœ¨ä½ å·²ç»æŒæ¡äº†ï¼š
- âœ… å¤šè¯­è¨€èµ„æºé…ç½®çš„å®Œæ•´æ–¹æ¡ˆ
- âœ… åŠ¨æ€è¯­è¨€åˆ‡æ¢çš„å®ç°åŸç†  
- âœ… åŒºåŸŸè‡ªåŠ¨æ£€æµ‹çš„æ™ºèƒ½ç®—æ³•
- âœ… æ—¥æœŸè´§å¸æ ¼å¼çš„æœ¬åœ°åŒ–å¤„ç†
- âœ… æ¶ˆæ¯å›½é™…åŒ–çš„æœ€ä½³å®è·µ
- âœ… å®Œæ•´i18næ–¹æ¡ˆçš„é¡¹ç›®å®æˆ˜

**ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®ï¼š**
1. åŠ¨æ‰‹å®è·µä¸€ä¸ªå®Œæ•´çš„å¤šè¯­è¨€ç½‘ç«™é¡¹ç›®
2. å­¦ä¹ Springæ¡†æ¶çš„å›½é™…åŒ–æ”¯æŒ
3. äº†è§£å‰ç«¯å›½é™…åŒ–æŠ€æœ¯
4. ç ”ç©¶å¤§å‹ç½‘ç«™çš„å›½é™…åŒ–æ¶æ„

è®°ä½ï¼Œå›½é™…åŒ–ä¸ä»…ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ä¸ºå…¨çƒç”¨æˆ·æä¾›ä¼˜è´¨æœåŠ¡çš„é‡è¦æ‰‹æ®µï¼