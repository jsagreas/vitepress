---
title: 1ã€ELä¸JSTLååŒå¼€å‘æ¨¡å¼
---
## ğŸ“š ç›®å½•

1. [ELè¡¨è¾¾å¼åœ¨JSTLä¸­çš„åº”ç”¨](#1-ELè¡¨è¾¾å¼åœ¨JSTLä¸­çš„åº”ç”¨)
2. [æ•°æ®å±•ç¤ºä¸é€»è¾‘æ§åˆ¶](#2-æ•°æ®å±•ç¤ºä¸é€»è¾‘æ§åˆ¶)
3. [MVCæ¨¡å¼ä¸‹çš„ELä¸JSTLåº”ç”¨](#3-MVCæ¨¡å¼ä¸‹çš„ELä¸JSTLåº”ç”¨)
4. [æ›¿ä»£è„šæœ¬å¼ä»£ç ](#4-æ›¿ä»£è„šæœ¬å¼ä»£ç )
5. [å¤æ‚æ•°æ®å¤„ç†æ¨¡å¼](#5-å¤æ‚æ•°æ®å¤„ç†æ¨¡å¼)
6. [æ¡ä»¶ä¸å¾ªç¯åµŒå¥—æŠ€å·§](#6-æ¡ä»¶ä¸å¾ªç¯åµŒå¥—æŠ€å·§)
7. [è¡¨å•æ•°æ®å¤„ç†å®æˆ˜](#7-è¡¨å•æ•°æ®å¤„ç†å®æˆ˜)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”— ELè¡¨è¾¾å¼åœ¨JSTLä¸­çš„åº”ç”¨


### 1.1 ä»€ä¹ˆæ˜¯ELä¸JSTLååŒï¼Ÿ


ğŸ’¡ **é€šä¿—ç†è§£**ï¼š
```
æƒ³è±¡ä¸€ä¸‹åˆ¶ä½œè›‹ç³•çš„è¿‡ç¨‹ï¼š
- ELè¡¨è¾¾å¼ = é…æ–™ï¼ˆæ•°æ®ï¼‰
- JSTLæ ‡ç­¾ = åˆ¶ä½œå·¥å…·ï¼ˆé€»è¾‘å¤„ç†ï¼‰
- ååŒå·¥ä½œ = ç”¨å·¥å…·å¤„ç†é…æ–™ï¼Œåšå‡ºç¾å‘³è›‹ç³•ï¼ˆé¡µé¢ï¼‰
```

**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **ELè¡¨è¾¾å¼**ï¼šä¸“é—¨è´Ÿè´£è·å–å’Œæ˜¾ç¤ºæ•°æ®
- **JSTLæ ‡ç­¾**ï¼šä¸“é—¨è´Ÿè´£é¡µé¢é€»è¾‘æ§åˆ¶
- **ååŒå·¥ä½œ**ï¼šELæä¾›æ•°æ®ï¼ŒJSTLæ§åˆ¶å±•ç¤ºé€»è¾‘

### 1.2 åŸºæœ¬ååŒè¯­æ³•


**ğŸ”¸ åœ¨JSTLæ ‡ç­¾ä¸­ä½¿ç”¨EL**ï¼š
```jsp
<!-- ç”¨ELè·å–æ•°æ®ï¼Œç”¨JSTLæ§åˆ¶æ˜¾ç¤º -->
<c:if test="${user.age >= 18}">
    <p>æ¬¢è¿æˆå¹´ç”¨æˆ·ï¼š${user.name}</p>
</c:if>
```

**ğŸ’¡ è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ**
- `${user.age >= 18}` æ˜¯ELè¡¨è¾¾å¼ï¼Œè·å–ç”¨æˆ·å¹´é¾„å¹¶åˆ¤æ–­
- `<c:if>` æ˜¯JSTLæ ‡ç­¾ï¼Œæ ¹æ®åˆ¤æ–­ç»“æœå†³å®šæ˜¯å¦æ˜¾ç¤ºå†…å®¹
- `${user.name}` æ˜¯ELè¡¨è¾¾å¼ï¼Œæ˜¾ç¤ºç”¨æˆ·å§“å

### 1.3 ååŒå¼€å‘çš„ä¼˜åŠ¿


| ğŸ†š **å¯¹æ¯”ç»´åº¦** | **ä¼ ç»ŸJSPè„šæœ¬** | **EL+JSTLååŒ** |
|----------------|----------------|-----------------|
| ğŸ“– **å¯è¯»æ€§** | å¤æ‚éš¾æ‡‚ | æ¸…æ™°ç›´è§‚ |
| ğŸ”§ **ç»´æŠ¤æ€§** | éš¾ä»¥ç»´æŠ¤ | æ˜“äºç»´æŠ¤ |
| ğŸš€ **å¼€å‘æ•ˆç‡** | ä»£ç å†—é•¿ | ç®€æ´é«˜æ•ˆ |
| ğŸ› **å‡ºé”™ç‡** | å®¹æ˜“å‡ºé”™ | ä¸æ˜“å‡ºé”™ |

---

## 2. ğŸ“Š æ•°æ®å±•ç¤ºä¸é€»è¾‘æ§åˆ¶


### 2.1 åŸºç¡€æ•°æ®å±•ç¤ºæ¨¡å¼


**ğŸ¯ å•ä¸€æ•°æ®æ˜¾ç¤º**ï¼š
```jsp
<!-- ç®€å•æ•°æ®æ˜¾ç¤º -->
<p>ç”¨æˆ·åï¼š${sessionScope.user.username}</p>
<p>ç™»å½•æ—¶é—´ï¼š${sessionScope.loginTime}</p>

<!-- å¸¦é»˜è®¤å€¼çš„æ˜¾ç¤º -->
<p>ç”¨æˆ·ç­‰çº§ï¼š${empty user.level ? 'æ™®é€šç”¨æˆ·' : user.level}</p>
```

**ğŸ”‘ å…³é”®ç†è§£**ï¼š
- `sessionScope.user.username`ï¼šä»sessionä¸­è·å–ç”¨æˆ·å
- `empty` è¿ç®—ç¬¦ï¼šæ£€æŸ¥æ•°æ®æ˜¯å¦ä¸ºç©º
- `? :` ä¸‰å…ƒè¿ç®—ç¬¦ï¼šæä¾›é»˜è®¤å€¼

### 2.2 åˆ—è¡¨æ•°æ®å±•ç¤ºæ¨¡å¼


**ğŸ”¸ åŸºç¡€åˆ—è¡¨å¾ªç¯**ï¼š
```jsp
<table border="1">
    <tr>
        <th>ç”¨æˆ·ID</th>
        <th>ç”¨æˆ·å</th>
        <th>é‚®ç®±</th>
    </tr>
    <c:forEach var="user" items="${userList}">
        <tr>
            <td>${user.id}</td>
            <td>${user.username}</td>
            <td>${user.email}</td>
        </tr>
    </c:forEach>
</table>
```

**ğŸ’¡ æ–°æ‰‹ç†è§£**ï¼š
- `c:forEach`ï¼šç›¸å½“äºJavaä¸­çš„forå¾ªç¯
- `var="user"`ï¼šå¾ªç¯ä¸­æ¯ä¸ªç”¨æˆ·å¯¹è±¡çš„å˜é‡å
- `items="${userList}"`ï¼šè¦å¾ªç¯çš„åˆ—è¡¨æ•°æ®
- `${user.id}`ï¼šè·å–å½“å‰ç”¨æˆ·çš„ID

### 2.3 æ¡ä»¶åˆ¤æ–­å±•ç¤ºæ¨¡å¼


**ğŸ”¸ å¤šæ¡ä»¶åˆ¤æ–­**ï¼š
```jsp
<c:choose>
    <c:when test="${user.score >= 90}">
        <span style="color: gold;">ä¼˜ç§€ç”¨æˆ· â­â­â­</span>
    </c:when>
    <c:when test="${user.score >= 70}">
        <span style="color: blue;">è‰¯å¥½ç”¨æˆ· â­â­</span>
    </c:when>
    <c:otherwise>
        <span style="color: gray;">æ™®é€šç”¨æˆ· â­</span>
    </c:otherwise>
</c:choose>
```

**ğŸ§  è®°å¿†æŠ€å·§**ï¼š
- `c:choose` = Javaçš„switchè¯­å¥
- `c:when` = Javaçš„caseåˆ†æ”¯
- `c:otherwise` = Javaçš„defaultåˆ†æ”¯

---

## 3. ğŸ—ï¸ MVCæ¨¡å¼ä¸‹çš„ELä¸JSTLåº”ç”¨


### 3.1 MVCæ¶æ„ä¸­çš„è§’è‰²åˆ†å·¥


```
ğŸ¢ MVCæ¶æ„ååŒå›¾ï¼š
Controller (Servlet)     Model (JavaBean)     View (JSP)
      |                       |                  |
   å¤„ç†è¯·æ±‚              â†â†’   æ•°æ®å¤„ç†       â†â†’   ELè·å–æ•°æ®
   è°ƒç”¨ä¸šåŠ¡                   ä¸šåŠ¡é€»è¾‘           JSTLæ§åˆ¶æ˜¾ç¤º
   è½¬å‘é¡µé¢                   æ•°æ®å­˜å‚¨           ç”¨æˆ·ç•Œé¢
```

**ğŸ“ éš¾åº¦ç­‰çº§**ï¼šğŸŸ¡ ä¸­çº§ - éœ€è¦ç†è§£MVCæ¨¡å¼

### 3.2 Controllerå±‚æ•°æ®å‡†å¤‡


**ğŸ”§ Servletä¸­å‡†å¤‡æ•°æ®**ï¼š
```java
// UserListServlet.java
@WebServlet("/userList")
public class UserListServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) {
        
        // 1. è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
        List<User> userList = getUserList();
        
        // 2. è®¾ç½®é¡µé¢æ ‡é¢˜
        String pageTitle = "ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ";
        
        // 3. å°†æ•°æ®å­˜å…¥requestèŒƒå›´
        request.setAttribute("userList", userList);
        request.setAttribute("pageTitle", pageTitle);
        request.setAttribute("totalCount", userList.size());
        
        // 4. è½¬å‘åˆ°JSPé¡µé¢
        request.getRequestDispatcher("/WEB-INF/views/userList.jsp")
               .forward(request, response);
    }
}
```

### 3.3 Viewå±‚æ•°æ®å±•ç¤º


**ğŸ”¸ JSPé¡µé¢æ¥æ”¶å’Œæ˜¾ç¤ºæ•°æ®**ï¼š
```jsp
<%-- userList.jsp --%>
<!DOCTYPE html>
<html>
<head>
    <title>${pageTitle}</title>
</head>
<body>
    <h1>${pageTitle}</h1>
    <p>æ€»ç”¨æˆ·æ•°ï¼š<strong>${totalCount}</strong></p>
    
    <!-- æ•°æ®å±•ç¤ºåŒºåŸŸ -->
    <c:if test="${not empty userList}">
        <table border="1" cellpadding="5">
            <tr>
                <th>åºå·</th>
                <th>ç”¨æˆ·å</th>
                <th>çŠ¶æ€</th>
                <th>æ“ä½œ</th>
            </tr>
            
            <c:forEach var="user" items="${userList}" varStatus="status">
                <tr>
                    <td>${status.index + 1}</td>
                    <td>${user.username}</td>
                    <td>
                        <c:choose>
                            <c:when test="${user.active}">
                                <span style="color: green;">æ´»è·ƒ</span>
                            </c:when>
                            <c:otherwise>
                                <span style="color: red;">åœç”¨</span>
                            </c:otherwise>
                        </c:choose>
                    </td>
                    <td>
                        <a href="editUser?id=${user.id}">ç¼–è¾‘</a> |
                        <a href="deleteUser?id=${user.id}">åˆ é™¤</a>
                    </td>
                </tr>
            </c:forEach>
        </table>
    </c:if>
    
    <!-- æ— æ•°æ®æç¤º -->
    <c:if test="${empty userList}">
        <p style="color: gray;">æš‚æ— ç”¨æˆ·æ•°æ®</p>
    </c:if>
</body>
</html>
```

**ğŸ”‘ å…³é”®ç†è§£**ï¼š
- **æ•°æ®æµå‘**ï¼šServlet â†’ requestèŒƒå›´ â†’ JSPé¡µé¢
- **ELèŒè´£**ï¼šä»requestä¸­å–æ•°æ®æ˜¾ç¤º
- **JSTLèŒè´£**ï¼šæ§åˆ¶é¡µé¢æ˜¾ç¤ºé€»è¾‘

---

## 4. ğŸš« æ›¿ä»£è„šæœ¬å¼ä»£ç 


### 4.1 ä¼ ç»Ÿè„šæœ¬æ–¹å¼çš„é—®é¢˜


âŒ **ä¼ ç»ŸJSPè„šæœ¬å†™æ³•**ï¼š
```jsp
<%-- è¿™æ˜¯ä¸æ¨èçš„è€å¼å†™æ³• --%>
<% 
    List<User> userList = (List<User>) request.getAttribute("userList");
    if (userList != null && !userList.isEmpty()) {
        for (int i = 0; i < userList.size(); i++) {
            User user = userList.get(i);
%>
    <tr>
        <td><%= i + 1 %></td>
        <td><%= user.getUsername() %></td>
        <td>
            <% if (user.isActive()) { %>
                <span style="color: green;">æ´»è·ƒ</span>
            <% } else { %>
                <span style="color: red;">åœç”¨</span>
            <% } %>
        </td>
    </tr>
<%
        }
    }
%>
```

**ğŸ¯ é—®é¢˜åˆ†æ**ï¼š
- ğŸ”¸ **æ··ä¹±éš¾è¯»**ï¼šJavaä»£ç å’ŒHTMLæ··åœ¨ä¸€èµ·
- ğŸ”¸ **ç»´æŠ¤å›°éš¾**ï¼šä¿®æ”¹é€»è¾‘éœ€è¦æ”¹åŠ¨å¤šå¤„
- ğŸ”¸ **å®¹æ˜“å‡ºé”™**ï¼šæ‹¬å·åŒ¹é…ã€å˜é‡ä½œç”¨åŸŸç­‰é—®é¢˜
- ğŸ”¸ **å›¢é˜Ÿåä½œå›°éš¾**ï¼šå‰ç«¯äººå‘˜æ— æ³•ç†è§£Javaä»£ç 

### 4.2 EL+JSTLç°ä»£å†™æ³•


âœ… **æ¨èçš„ç°ä»£å†™æ³•**ï¼š
```jsp
<%-- è¿™æ˜¯æ¨èçš„ç°ä»£å†™æ³• --%>
<c:if test="${not empty userList}">
    <c:forEach var="user" items="${userList}" varStatus="status">
        <tr>
            <td>${status.index + 1}</td>
            <td>${user.username}</td>
            <td>
                <c:choose>
                    <c:when test="${user.active}">
                        <span style="color: green;">æ´»è·ƒ</span>
                    </c:when>
                    <c:otherwise>
                        <span style="color: red;">åœç”¨</span>
                    </c:otherwise>
                </c:choose>
            </td>
        </tr>
    </c:forEach>
</c:if>
```

**ğŸ† ä¼˜åŠ¿å¯¹æ¯”**ï¼š

| ğŸ†š **å¯¹æ¯”é¡¹** | **è„šæœ¬æ–¹å¼** | **EL+JSTLæ–¹å¼** |
|--------------|-------------|----------------|
| ğŸ“– **å¯è¯»æ€§** | å¾ˆå·® | å¾ˆå¥½ |
| ğŸ¨ **HTMLç»“æ„** | æ··ä¹± | æ¸…æ™° |
| ğŸ”§ **ç»´æŠ¤æ€§** | å›°éš¾ | ç®€å• |
| ğŸ‘¥ **å›¢é˜Ÿåä½œ** | å›°éš¾ | å®¹æ˜“ |
| ğŸ› **è°ƒè¯•éš¾åº¦** | å¾ˆéš¾ | ç®€å• |

---

## 5. ğŸ”„ å¤æ‚æ•°æ®å¤„ç†æ¨¡å¼


### 5.1 å¤šå±‚åµŒå¥—æ•°æ®å¤„ç†


**ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯**ï¼šå¤„ç†éƒ¨é—¨-å‘˜å·¥çš„å±‚çº§ç»“æ„æ•°æ®

```jsp
<%-- æ˜¾ç¤ºéƒ¨é—¨åŠå…¶å‘˜å·¥åˆ—è¡¨ --%>
<c:forEach var="department" items="${departmentList}">
    <div class="department-card">
        <h3>ğŸ“‹ ${department.name}éƒ¨é—¨</h3>
        <p>éƒ¨é—¨ä»£ç ï¼š${department.code}</p>
        <p>å‘˜å·¥äººæ•°ï¼š${fn:length(department.employees)}</p>
        
        <!-- å‘˜å·¥åˆ—è¡¨ -->
        <c:choose>
            <c:when test="${not empty department.employees}">
                <table border="1">
                    <tr>
                        <th>åºå·</th>
                        <th>å§“å</th>
                        <th>èŒä½</th>
                        <th>è–ªèµ„ç­‰çº§</th>
                    </tr>
                    <c:forEach var="employee" items="${department.employees}" 
                              varStatus="empStatus">
                        <tr>
                            <td>${empStatus.index + 1}</td>
                            <td>${employee.name}</td>
                            <td>${employee.position}</td>
                            <td>
                                <c:choose>
                                    <c:when test="${employee.salary >= 10000}">
                                        <span style="color: gold;">é«˜çº§ ğŸ’°</span>
                                    </c:when>
                                    <c:when test="${employee.salary >= 6000}">
                                        <span style="color: blue;">ä¸­çº§ ğŸ’¼</span>
                                    </c:when>
                                    <c:otherwise>
                                        <span style="color: green;">åˆçº§ ğŸ“</span>
                                    </c:otherwise>
                                </c:choose>
                            </td>
                        </tr>
                    </c:forEach>
                </table>
            </c:when>
            <c:otherwise>
                <p style="color: gray;">è¯¥éƒ¨é—¨æš‚æ— å‘˜å·¥</p>
            </c:otherwise>
        </c:choose>
    </div>
    <br>
</c:forEach>
```

### 5.2 æ•°æ®ç»Ÿè®¡ä¸è®¡ç®—


**ğŸ“Š å®æ—¶ç»Ÿè®¡åŠŸèƒ½**ï¼š
```jsp
<%-- ä½¿ç”¨ELè¿›è¡Œç®€å•ç»Ÿè®¡ --%>
<div class="statistics-panel">
    <h3>ğŸ“Š æ•°æ®ç»Ÿè®¡</h3>
    
    <!-- éƒ¨é—¨ç»Ÿè®¡ -->
    <p>æ€»éƒ¨é—¨æ•°ï¼š<strong>${fn:length(departmentList)}</strong></p>
    
    <!-- å‘˜å·¥ç»Ÿè®¡ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ ‡ç­¾å‡½æ•°ï¼‰ -->
    <c:set var="totalEmployees" value="0"/>
    <c:set var="highSalaryCount" value="0"/>
    
    <c:forEach var="dept" items="${departmentList}">
        <c:set var="totalEmployees" value="${totalEmployees + fn:length(dept.employees)}"/>
        
        <c:forEach var="emp" items="${dept.employees}">
            <c:if test="${emp.salary >= 10000}">
                <c:set var="highSalaryCount" value="${highSalaryCount + 1}"/>
            </c:if>
        </c:forEach>
    </c:forEach>
    
    <p>æ€»å‘˜å·¥æ•°ï¼š<strong>${totalEmployees}</strong></p>
    <p>é«˜è–ªå‘˜å·¥ï¼š<strong>${highSalaryCount}</strong></p>
    <p>é«˜è–ªæ¯”ä¾‹ï¼š<strong>${totalEmployees > 0 ? (highSalaryCount * 100 / totalEmployees) : 0}%</strong></p>
</div>
```

**ğŸ”‘ æ–°æ‰‹ç†è§£**ï¼š
- `c:set`ï¼šåœ¨é¡µé¢ä¸­åˆ›å»ºå˜é‡ï¼Œç›¸å½“äºå£°æ˜ä¸€ä¸ªå˜é‡
- `fn:length()`ï¼šè·å–é›†åˆæˆ–å­—ç¬¦ä¸²çš„é•¿åº¦
- åµŒå¥—å¾ªç¯ï¼šå¤–å±‚å¾ªç¯éƒ¨é—¨ï¼Œå†…å±‚å¾ªç¯å‘˜å·¥
- å®æ—¶è®¡ç®—ï¼šè¾¹å¾ªç¯è¾¹ç»Ÿè®¡æ•°æ®

---

## 6. ğŸ”„ æ¡ä»¶ä¸å¾ªç¯åµŒå¥—æŠ€å·§


### 6.1 å¤æ‚æ¡ä»¶åµŒå¥—æ¨¡å¼


**ğŸ¯ å®æˆ˜åœºæ™¯**ï¼šæ ¹æ®ç”¨æˆ·æƒé™æ˜¾ç¤ºä¸åŒçš„æ“ä½œæŒ‰é’®

```jsp
<c:forEach var="user" items="${userList}" varStatus="status">
    <tr ${status.index % 2 == 0 ? 'class="even-row"' : 'class="odd-row"'}>
        <td>${status.index + 1}</td>
        <td>${user.username}</td>
        <td>${user.email}</td>
        <td>
            <!-- æ ¹æ®ç”¨æˆ·çŠ¶æ€æ˜¾ç¤ºä¸åŒæ ‡è¯† -->
            <c:choose>
                <c:when test="${user.status == 'ACTIVE'}">
                    <span class="status-active">âœ… æ­£å¸¸</span>
                </c:when>
                <c:when test="${user.status == 'LOCKED'}">
                    <span class="status-locked">ğŸ”’ é”å®š</span>
                </c:when>
                <c:when test="${user.status == 'PENDING'}">
                    <span class="status-pending">â³ å¾…å®¡æ ¸</span>
                </c:when>
                <c:otherwise>
                    <span class="status-unknown">â“ æœªçŸ¥</span>
                </c:otherwise>
            </c:choose>
        </td>
        <td>
            <!-- æ ¹æ®å½“å‰ç™»å½•ç”¨æˆ·æƒé™æ˜¾ç¤ºæ“ä½œæŒ‰é’® -->
            <c:choose>
                <c:when test="${sessionScope.currentUser.role == 'ADMIN'}">
                    <!-- ç®¡ç†å‘˜ï¼šæ˜¾ç¤ºæ‰€æœ‰æ“ä½œ -->
                    <a href="viewUser?id=${user.id}" class="btn-view">æŸ¥çœ‹</a>
                    <a href="editUser?id=${user.id}" class="btn-edit">ç¼–è¾‘</a>
                    
                    <c:choose>
                        <c:when test="${user.status == 'ACTIVE'}">
                            <a href="lockUser?id=${user.id}" class="btn-lock">é”å®š</a>
                        </c:when>
                        <c:otherwise>
                            <a href="unlockUser?id=${user.id}" class="btn-unlock">è§£é”</a>
                        </c:otherwise>
                    </c:choose>
                    
                    <a href="deleteUser?id=${user.id}" class="btn-delete" 
                       onclick="return confirm('ç¡®å®šè¦åˆ é™¤ç”¨æˆ· ${user.username} å—ï¼Ÿ')">åˆ é™¤</a>
                       
                </c:when>
                <c:when test="${sessionScope.currentUser.role == 'MANAGER'}">
                    <!-- ç»ç†ï¼šéƒ¨åˆ†æ“ä½œ -->
                    <a href="viewUser?id=${user.id}" class="btn-view">æŸ¥çœ‹</a>
                    <c:if test="${user.status == 'PENDING'}">
                        <a href="approveUser?id=${user.id}" class="btn-approve">å®¡æ ¸</a>
                    </c:if>
                </c:when>
                <c:otherwise>
                    <!-- æ™®é€šç”¨æˆ·ï¼šåªèƒ½æŸ¥çœ‹è‡ªå·±çš„ä¿¡æ¯ -->
                    <c:if test="${user.id == sessionScope.currentUser.id}">
                        <a href="viewUser?id=${user.id}" class="btn-view">æŸ¥çœ‹</a>
                        <a href="editProfile?id=${user.id}" class="btn-edit">ç¼–è¾‘èµ„æ–™</a>
                    </c:if>
                </c:otherwise>
            </c:choose>
        </td>
    </tr>
</c:forEach>
```

### 6.2 å¾ªç¯çŠ¶æ€æ§åˆ¶æŠ€å·§


**ğŸ”¸ å¾ªç¯çŠ¶æ€ä¿¡æ¯çš„å·§å¦™è¿ç”¨**ï¼š
```jsp
<c:forEach var="product" items="${productList}" varStatus="loop">
    <!-- æ¯5ä¸ªäº§å“æ¢ä¸€è¡Œ -->
    <c:if test="${loop.index % 5 == 0}">
        <div class="product-row">
    </c:if>
    
        <div class="product-card">
            <h4>${product.name}</h4>
            <p>ä»·æ ¼ï¼šÂ¥${product.price}</p>
            
            <!-- æ ¹æ®ä½ç½®æ·»åŠ ç‰¹æ®Šæ ‡è¯† -->
            <c:if test="${loop.first}">
                <span class="badge-new">ğŸ†• æœ€æ–°</span>
            </c:if>
            
            <c:if test="${loop.last}">
                <span class="badge-final">ğŸ æœ€åä¸€ä¸ª</span>
            </c:if>
            
            <!-- æ ¹æ®ç´¢å¼•ä½ç½®è®¾ç½®ä¸åŒæ ·å¼ -->
            <c:choose>
                <c:when test="${loop.index < 3}">
                    <span class="priority-high">â­ æ¨è</span>
                </c:when>
                <c:when test="${loop.index < 10}">
                    <span class="priority-medium">ğŸ‘ çƒ­é”€</span>
                </c:when>
            </c:choose>
        </div>
    
    <!-- æ¯5ä¸ªäº§å“æˆ–æœ€åä¸€ä¸ªäº§å“å…³é—­è¡Œ -->
    <c:if test="${loop.index % 5 == 4 || loop.last}">
        </div>
    </c:if>
</c:forEach>
```

**ğŸ’¡ å¾ªç¯çŠ¶æ€å±æ€§è¯´æ˜**ï¼š

| å±æ€§å | å«ä¹‰ | ç¤ºä¾‹ç”¨æ³• |
|--------|------|----------|
| `index` | å½“å‰ç´¢å¼•(ä»0å¼€å§‹) | `${loop.index}` |
| `count` | å½“å‰è®¡æ•°(ä»1å¼€å§‹) | `${loop.count}` |
| `first` | æ˜¯å¦ç¬¬ä¸€ä¸ªå…ƒç´  | `${loop.first}` |
| `last` | æ˜¯å¦æœ€åä¸€ä¸ªå…ƒç´  | `${loop.last}` |
| `begin` | å¾ªç¯å¼€å§‹å€¼ | `${loop.begin}` |
| `end` | å¾ªç¯ç»“æŸå€¼ | `${loop.end}` |

---

## 7. ğŸ“ è¡¨å•æ•°æ®å¤„ç†å®æˆ˜


### 7.1 è¡¨å•æ•°æ®å±•ç¤ºä¸éªŒè¯


**ğŸ’¼ å®æˆ˜åœºæ™¯**ï¼šç”¨æˆ·æ³¨å†Œè¡¨å•çš„æ•°æ®å¤„ç†

```jsp
<%-- ç”¨æˆ·æ³¨å†Œ/ç¼–è¾‘è¡¨å• --%>
<form action="saveUser" method="post">
    <!-- éšè—å­—æ®µï¼šç¼–è¾‘æ—¶ä¼ é€’ç”¨æˆ·ID -->
    <c:if test="${not empty user.id}">
        <input type="hidden" name="id" value="${user.id}">
    </c:if>
    
    <div class="form-section">
        <h3>${empty user.id ? 'ç”¨æˆ·æ³¨å†Œ' : 'ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯'}</h3>
        
        <!-- ç”¨æˆ·åè¾“å…¥ -->
        <div class="form-group">
            <label for="username">ç”¨æˆ·åï¼š</label>
            <input type="text" id="username" name="username" 
                   value="${user.username}" 
                   placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
            
            <!-- æ˜¾ç¤ºéªŒè¯é”™è¯¯ä¿¡æ¯ -->
            <c:if test="${not empty errors.username}">
                <span class="error-message">âŒ ${errors.username}</span>
            </c:if>
        </div>
        
        <!-- é‚®ç®±è¾“å…¥ -->
        <div class="form-group">
            <label for="email">é‚®ç®±ï¼š</label>
            <input type="email" id="email" name="email" 
                   value="${user.email}" 
                   placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€">
                   
            <c:if test="${not empty errors.email}">
                <span class="error-message">âŒ ${errors.email}</span>
            </c:if>
        </div>
        
        <!-- å¹´é¾„é€‰æ‹© -->
        <div class="form-group">
            <label for="age">å¹´é¾„ï¼š</label>
            <select id="age" name="age">
                <option value="">è¯·é€‰æ‹©å¹´é¾„</option>
                <c:forEach var="ageOption" begin="18" end="65">
                    <option value="${ageOption}" 
                            ${user.age == ageOption ? 'selected' : ''}>
                        ${ageOption}å²
                    </option>
                </c:forEach>
            </select>
        </div>
        
        <!-- æ€§åˆ«é€‰æ‹© -->
        <div class="form-group">
            <label>æ€§åˆ«ï¼š</label>
            <input type="radio" id="male" name="gender" value="MALE"
                   ${user.gender == 'MALE' ? 'checked' : ''}>
            <label for="male">ç”·</label>
            
            <input type="radio" id="female" name="gender" value="FEMALE"
                   ${user.gender == 'FEMALE' ? 'checked' : ''}>
            <label for="female">å¥³</label>
        </div>
        
        <!-- çˆ±å¥½å¤šé€‰ -->
        <div class="form-group">
            <label>çˆ±å¥½ï¼š</label>
            <c:forEach var="hobby" items="${allHobbies}">
                <input type="checkbox" id="hobby_${hobby.id}" 
                       name="hobbies" value="${hobby.id}"
                       <c:forEach var="userHobby" items="${user.hobbies}">
                           ${userHobby.id == hobby.id ? 'checked' : ''}
                       </c:forEach>>
                <label for="hobby_${hobby.id}">${hobby.name}</label>
            </c:forEach>
        </div>
        
        <!-- ç”¨æˆ·çŠ¶æ€ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰ -->
        <c:if test="${sessionScope.currentUser.role == 'ADMIN'}">
            <div class="form-group">
                <label for="status">ç”¨æˆ·çŠ¶æ€ï¼š</label>
                <select id="status" name="status">
                    <c:forEach var="statusOption" items="${userStatusList}">
                        <option value="${statusOption}" 
                                ${user.status == statusOption ? 'selected' : ''}>
                            <c:choose>
                                <c:when test="${statusOption == 'ACTIVE'}">æ­£å¸¸</c:when>
                                <c:when test="${statusOption == 'LOCKED'}">é”å®š</c:when>
                                <c:when test="${statusOption == 'PENDING'}">å¾…å®¡æ ¸</c:when>
                                <c:otherwise>æœªçŸ¥çŠ¶æ€</c:otherwise>
                            </c:choose>
                        </option>
                    </c:forEach>
                </select>
            </div>
        </c:if>
        
        <!-- æäº¤æŒ‰é’® -->
        <div class="form-actions">
            <button type="submit" class="btn-primary">
                ${empty user.id ? 'æ³¨å†Œ' : 'ä¿å­˜ä¿®æ”¹'}
            </button>
            <a href="userList" class="btn-secondary">å–æ¶ˆ</a>
        </div>
    </div>
</form>

<!-- æ˜¾ç¤ºæ“ä½œç»“æœæ¶ˆæ¯ -->
<c:if test="${not empty message}">
    <div class="message-box 
                ${messageType == 'success' ? 'success' : 'error'}">
        <c:choose>
            <c:when test="${messageType == 'success'}">
                âœ… ${message}
            </c:when>
            <c:otherwise>
                âŒ ${message}
            </c:otherwise>
        </c:choose>
    </div>
</c:if>
```

### 7.2 è¡¨å•æ•°æ®çš„åç«¯å¤„ç†


**ğŸ”§ Servletä¸­çš„æ•°æ®å¤„ç†é€»è¾‘**ï¼š
```java
@WebServlet("/saveUser")
public class SaveUserServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, 
                         HttpServletResponse response) {
        
        // è®¾ç½®è¯·æ±‚ç¼–ç 
        request.setCharacterEncoding("UTF-8");
        
        // 1. è·å–è¡¨å•æ•°æ®
        String id = request.getParameter("id");
        String username = request.getParameter("username");
        String email = request.getParameter("email");
        String ageStr = request.getParameter("age");
        String gender = request.getParameter("gender");
        String[] hobbies = request.getParameterValues("hobbies");
        String status = request.getParameter("status");
        
        // 2. æ•°æ®éªŒè¯
        Map<String, String> errors = new HashMap<>();
        
        if (username == null || username.trim().isEmpty()) {
            errors.put("username", "ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        }
        
        if (email == null || email.trim().isEmpty()) {
            errors.put("email", "é‚®ç®±ä¸èƒ½ä¸ºç©º");
        } else if (!isValidEmail(email)) {
            errors.put("email", "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
        }
        
        // 3. å¦‚æœæœ‰éªŒè¯é”™è¯¯ï¼Œè¿”å›è¡¨å•é¡µé¢
        if (!errors.isEmpty()) {
            request.setAttribute("errors", errors);
            request.setAttribute("user", createUserFromForm(request));
            request.getRequestDispatcher("/WEB-INF/views/userForm.jsp")
                   .forward(request, response);
            return;
        }
        
        // 4. ä¿å­˜ç”¨æˆ·æ•°æ®
        try {
            User user = createUserFromForm(request);
            if (id != null && !id.trim().isEmpty()) {
                // æ›´æ–°ç”¨æˆ·
                userService.updateUser(user);
                request.setAttribute("message", "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸï¼");
            } else {
                // åˆ›å»ºæ–°ç”¨æˆ·
                userService.createUser(user);
                request.setAttribute("message", "ç”¨æˆ·æ³¨å†ŒæˆåŠŸï¼");
            }
            request.setAttribute("messageType", "success");
            
        } catch (Exception e) {
            request.setAttribute("message", "æ“ä½œå¤±è´¥ï¼š" + e.getMessage());
            request.setAttribute("messageType", "error");
        }
        
        // 5. é‡å®šå‘åˆ°ç”¨æˆ·åˆ—è¡¨
        response.sendRedirect("userList");
    }
}
```

### 7.3 åŠ¨æ€è¡¨å•æ§åˆ¶


**ğŸ¯ æ ¹æ®æ¡ä»¶åŠ¨æ€æ˜¾ç¤ºè¡¨å•å…ƒç´ **ï¼š
```jsp
<script>
// æ ¹æ®ç”¨æˆ·ç±»å‹åŠ¨æ€æ˜¾ç¤ºä¸åŒçš„è¡¨å•å­—æ®µ
function toggleFormFields() {
    var userType = document.getElementById('userType').value;
    var adminFields = document.getElementById('adminFields');
    var customerFields = document.getElementById('customerFields');
    
    if (userType === 'ADMIN') {
        adminFields.style.display = 'block';
        customerFields.style.display = 'none';
    } else if (userType === 'CUSTOMER') {
        adminFields.style.display = 'none';
        customerFields.style.display = 'block';
    } else {
        adminFields.style.display = 'none';
        customerFields.style.display = 'none';
    }
}
</script>

<!-- ç”¨æˆ·ç±»å‹é€‰æ‹© -->
<div class="form-group">
    <label for="userType">ç”¨æˆ·ç±»å‹ï¼š</label>
    <select id="userType" name="userType" onchange="toggleFormFields()">
        <option value="">è¯·é€‰æ‹©ç”¨æˆ·ç±»å‹</option>
        <option value="ADMIN" ${user.userType == 'ADMIN' ? 'selected' : ''}>ç®¡ç†å‘˜</option>
        <option value="CUSTOMER" ${user.userType == 'CUSTOMER' ? 'selected' : ''}>å®¢æˆ·</option>
    </select>
</div>

<!-- ç®¡ç†å‘˜ä¸“ç”¨å­—æ®µ -->
<div id="adminFields" style="display: none;">
    <c:if test="${user.userType == 'ADMIN'}">
        <script>document.getElementById('adminFields').style.display = 'block';</script>
    </c:if>
    
    <div class="form-group">
        <label for="permissions">æƒé™è®¾ç½®ï¼š</label>
        <c:forEach var="permission" items="${allPermissions}">
            <input type="checkbox" name="permissions" value="${permission.id}">
            <label>${permission.name}</label>
        </c:forEach>
    </div>
</div>

<!-- å®¢æˆ·ä¸“ç”¨å­—æ®µ -->
<div id="customerFields" style="display: none;">
    <c:if test="${user.userType == 'CUSTOMER'}">
        <script>document.getElementById('customerFields').style.display = 'block';</script>
    </c:if>
    
    <div class="form-group">
        <label for="company">æ‰€å±å…¬å¸ï¼š</label>
        <input type="text" name="company" value="${user.company}">
    </div>
</div>
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ååŒå·¥ä½œåŸç†ï¼šELè´Ÿè´£æ•°æ®è·å–ï¼ŒJSTLè´Ÿè´£é€»è¾‘æ§åˆ¶
ğŸ”¸ MVCæ¨¡å¼åº”ç”¨ï¼šControllerå‡†å¤‡æ•°æ®ï¼ŒViewç”¨EL+JSTLå±•ç¤º
ğŸ”¸ æ›¿ä»£è„šæœ¬ä»£ç ï¼šç”¨æ ‡ç­¾åŒ–æ–¹å¼æ›¿ä»£<% %>è„šæœ¬ä»£ç 
ğŸ”¸ æ•°æ®å¤„ç†æ¨¡å¼ï¼šåˆ—è¡¨å±•ç¤ºã€æ¡ä»¶åˆ¤æ–­ã€åµŒå¥—å¾ªç¯
ğŸ”¸ è¡¨å•æ•°æ®å¤„ç†ï¼šæ•°æ®å›æ˜¾ã€éªŒè¯é”™è¯¯æ˜¾ç¤ºã€åŠ¨æ€æ§åˆ¶
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆè¦ååŒä½¿ç”¨ï¼Ÿ**
```
å•ç‹¬ä½¿ç”¨çš„å±€é™ï¼š
- åªç”¨ELï¼šåªèƒ½æ˜¾ç¤ºæ•°æ®ï¼Œæ— æ³•æ§åˆ¶é€»è¾‘
- åªç”¨JSTLï¼šæ•°æ®è·å–å¤æ‚ï¼Œè¡¨è¾¾å¼å†—é•¿
- ååŒä½¿ç”¨ï¼šå„å–æ‰€é•¿ï¼Œå¼€å‘æ•ˆç‡é«˜
```

**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ååŒæ¨¡å¼ï¼Ÿ**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… éœ€è¦æ ¹æ®æ¡ä»¶æ˜¾ç¤ºä¸åŒå†…å®¹
âœ… éœ€è¦å¾ªç¯æ˜¾ç¤ºåˆ—è¡¨æ•°æ®
âœ… éœ€è¦å¤æ‚çš„é¡µé¢é€»è¾‘æ§åˆ¶
âœ… éœ€è¦æ›¿ä»£JSPè„šæœ¬ä»£ç 
âœ… éœ€è¦å›¢é˜Ÿåä½œå¼€å‘
```

**ğŸ”¹ ååŒå¼€å‘çš„æœ€ä½³å®è·µ**
```
å¼€å‘åŸåˆ™ï¼š
- ELä¸“æ³¨æ•°æ®ï¼šè·å–å’Œæ˜¾ç¤ºæ•°æ®
- JSTLä¸“æ³¨é€»è¾‘ï¼šæ§åˆ¶æ˜¾ç¤ºæµç¨‹
- é¿å…æ··åˆï¼šä¸åœ¨æ ‡ç­¾å±æ€§ä¸­å†™å¤æ‚é€»è¾‘
- ä¿æŒç®€æ´ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘æ”¾åœ¨åç«¯å¤„ç†
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ å®é™…å¼€å‘åœºæ™¯**ï¼š
- **ä¼ä¸šç³»ç»Ÿ**ï¼šç”¨æˆ·ç®¡ç†ã€æƒé™æ§åˆ¶ã€æ•°æ®å±•ç¤º
- **ç”µå•†ç½‘ç«™**ï¼šå•†å“åˆ—è¡¨ã€è´­ç‰©è½¦ã€è®¢å•å¤„ç†
- **å†…å®¹ç®¡ç†**ï¼šæ–‡ç« å±•ç¤ºã€åˆ†ç±»ç®¡ç†ã€è¯„è®ºç³»ç»Ÿ
- **æ•°æ®æŠ¥è¡¨**ï¼šç»Ÿè®¡å›¾è¡¨ã€æ¡ä»¶ç­›é€‰ã€åˆ†é¡µæ˜¾ç¤º

### 8.4 å­¦ä¹ è·¯å¾„å»ºè®®


```
ğŸ›¤ï¸ å­¦ä¹ è¿›åº¦ï¼š
åˆå­¦è€… â†’ æŒæ¡åŸºæœ¬ELè¡¨è¾¾å¼å’ŒJSTLæ ‡ç­¾
  â†“
ç»ƒä¹ è€… â†’ å®Œæˆç®€å•çš„æ•°æ®å±•ç¤ºå’Œæ¡ä»¶æ§åˆ¶
  â†“
åº”ç”¨è€… â†’ å¤„ç†å¤æ‚çš„åµŒå¥—é€»è¾‘å’Œè¡¨å•æ•°æ®
  â†“
ç†Ÿç»ƒè€… â†’ åœ¨å®é™…é¡¹ç›®ä¸­çµæ´»è¿ç”¨ååŒæ¨¡å¼
```

**âœ… æŒæ¡æ£€éªŒæ ‡å‡†**ï¼š
- [ ] èƒ½å¤Ÿè§£é‡ŠELä¸JSTLçš„ååŒå·¥ä½œåŸç†
- [ ] èƒ½å¤Ÿåœ¨MVCæ¨¡å¼ä¸­æ­£ç¡®ä½¿ç”¨ELå’ŒJSTL
- [ ] èƒ½å¤Ÿç”¨EL+JSTLæ›¿ä»£ä¼ ç»Ÿçš„JSPè„šæœ¬ä»£ç 
- [ ] èƒ½å¤Ÿå¤„ç†å¤æ‚çš„åµŒå¥—å¾ªç¯å’Œæ¡ä»¶åˆ¤æ–­
- [ ] èƒ½å¤Ÿå®Œæˆå®Œæ•´çš„è¡¨å•æ•°æ®å¤„ç†åŠŸèƒ½

ğŸ§  **è®°å¿†å£è¯€**ï¼š
"ELå–æ•°æ®ï¼ŒJSTLæ§é€»è¾‘ï¼ŒååŒå·¥ä½œæ•ˆç‡é«˜ï¼Œå‘Šåˆ«è„šæœ¬æ›´æ¸…æ™°"

**æ ¸å¿ƒè®°å¿†**ï¼š
- ELä¸JSTLååŒæ˜¯ç°ä»£JSPå¼€å‘çš„æ ‡å‡†æ¨¡å¼
- æ•°æ®è·å–ç”¨ELï¼Œé€»è¾‘æ§åˆ¶ç”¨JSTLï¼Œåˆ†å·¥æ˜ç¡®æ•ˆç‡é«˜
- åœ¨MVCæ¶æ„ä¸­ï¼ŒViewå±‚çš„ä¸»è¦æŠ€æœ¯å°±æ˜¯EL+JSTL
- æŒæ¡ååŒæ¨¡å¼æ˜¯æˆä¸ºJavaWebå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½