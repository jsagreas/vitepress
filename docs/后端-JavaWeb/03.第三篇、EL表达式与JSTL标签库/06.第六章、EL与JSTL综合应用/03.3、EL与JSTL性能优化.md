---
title: 3ã€ELä¸JSTLæ€§èƒ½ä¼˜åŒ–
---
## ğŸ“š ç›®å½•

1. [ELä¸JSTLæ€§èƒ½ä¼˜åŒ–åŸºç¡€æ¦‚å¿µ](#1-ELä¸JSTLæ€§èƒ½ä¼˜åŒ–åŸºç¡€æ¦‚å¿µ)
2. [è¡¨è¾¾å¼æ±‚å€¼ä¼˜åŒ–](#2-è¡¨è¾¾å¼æ±‚å€¼ä¼˜åŒ–)
3. [å¾ªç¯æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#3-å¾ªç¯æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
4. [ä½œç”¨åŸŸé€‰æ‹©ä¸ä¼˜åŒ–](#4-ä½œç”¨åŸŸé€‰æ‹©ä¸ä¼˜åŒ–)
5. [ç¼“å­˜æœºåˆ¶çš„åˆç†åˆ©ç”¨](#5-ç¼“å­˜æœºåˆ¶çš„åˆç†åˆ©ç”¨)
6. [é¿å…é‡å¤è®¡ç®—çš„æŠ€å·§](#6-é¿å…é‡å¤è®¡ç®—çš„æŠ€å·§)
7. [å†…å­˜ä½¿ç”¨ä¼˜åŒ–å®è·µ](#7-å†…å­˜ä½¿ç”¨ä¼˜åŒ–å®è·µ)
8. [æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜](#8-æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ ELä¸JSTLæ€§èƒ½ä¼˜åŒ–åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ€§èƒ½ä¼˜åŒ–


**é€šä¿—ç†è§£**ï¼šå°±åƒæ•´ç†æˆ¿é—´ä¸€æ ·ï¼Œè®©ç½‘é¡µåŠ è½½æ›´å¿«ã€è¿è¡Œæ›´æµç•…

```
æ€§èƒ½ä¼˜åŒ–å°±æ˜¯ï¼š
è®©ç”¨æˆ·ç­‰å¾…æ—¶é—´æ›´çŸ­ â†’ æå‡ç”¨æˆ·ä½“éªŒ
è®©æœåŠ¡å™¨å‹åŠ›æ›´å° â†’ èŠ‚çº¦èµ„æºæˆæœ¬
è®©ç¨‹åºè¿è¡Œæ›´ç¨³å®š â†’ å‡å°‘å´©æºƒé£é™©
```

**ğŸ”¸ ä¸ºä»€ä¹ˆè¦ä¼˜åŒ–ELå’ŒJSTL**
```
ELè¡¨è¾¾å¼ï¼šæ¯æ¬¡è®¿é—®éƒ½è¦è§£æå’Œè®¡ç®—
JSTLæ ‡ç­¾ï¼šå¾ªç¯å’Œåˆ¤æ–­ä¼šæ¶ˆè€—CPUèµ„æº
å¤§æ•°æ®é‡ï¼šå¤„ç†å¤§åˆ—è¡¨æ—¶å¯èƒ½å¾ˆæ…¢
é«˜å¹¶å‘ï¼šå¤šç”¨æˆ·åŒæ—¶è®¿é—®æ—¶å‹åŠ›å¤§
```

### 1.2 æ€§èƒ½é—®é¢˜çš„å¸¸è§è¡¨ç°


**âš ï¸ ç”¨æˆ·æ„Ÿå—åˆ°çš„é—®é¢˜**
- é¡µé¢åŠ è½½æ…¢ï¼Œç”¨æˆ·ç­‰å¾—ä¸è€çƒ¦
- ç‚¹å‡»æŒ‰é’®ååŠå¤©æ²¡ååº”
- é¡µé¢å¡é¡¿ï¼Œæ“ä½œä¸æµç•…
- ç³»ç»Ÿç»å¸¸æŠ¥é”™æˆ–å´©æºƒ

**ğŸ”§ æŠ€æœ¯å±‚é¢çš„é—®é¢˜**
```
CPUä½¿ç”¨ç‡é«˜ï¼šè¡¨è¾¾å¼è®¡ç®—å¤ªå¤š
å†…å­˜å ç”¨å¤§ï¼šæ•°æ®ç¼“å­˜ä¸å½“
å“åº”æ—¶é—´é•¿ï¼šæ•°æ®åº“æŸ¥è¯¢é¢‘ç¹
æœåŠ¡å™¨å‹åŠ›å¤§ï¼šå¹¶å‘å¤„ç†èƒ½åŠ›ä¸è¶³
```

### 1.3 ä¼˜åŒ–çš„åŸºæœ¬æ€è·¯


**ğŸ’¡ ä¼˜åŒ–é‡‘å­—å¡”**
```
            å‡å°‘ä¸å¿…è¦çš„è®¡ç®—
           /                 \
    é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸ     â†’     ä½¿ç”¨ç¼“å­˜æœºåˆ¶
         |                        |
    é¿å…é‡å¤æ“ä½œ              ä¼˜åŒ–å¾ªç¯é€»è¾‘
         |                        |
      åˆç†ä½¿ç”¨å†…å­˜  â†  â†  â†  ç›‘æ§å’Œè°ƒä¼˜
```

---

## 2. âš¡ è¡¨è¾¾å¼æ±‚å€¼ä¼˜åŒ–


### 2.1 ELè¡¨è¾¾å¼çš„æ‰§è¡Œè¿‡ç¨‹


**ğŸ” ELè¡¨è¾¾å¼æ˜¯æ€ä¹ˆå·¥ä½œçš„**
```
ç”¨æˆ·è®¿é—®JSPé¡µé¢
    â†“
æœåŠ¡å™¨è§£æELè¡¨è¾¾å¼
    â†“
æŸ¥æ‰¾å¯¹åº”çš„æ•°æ®å¯¹è±¡
    â†“
æ‰§è¡Œè®¡ç®—æˆ–å–å€¼æ“ä½œ
    â†“
å°†ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²
    â†“
è¾“å‡ºåˆ°HTMLé¡µé¢
```

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šæ¯ä¸ª`${}`éƒ½è¦ç»å†è¿™ä¸ªè¿‡ç¨‹ï¼Œå¦‚æœè¡¨è¾¾å¼å¾ˆå¤æ‚æˆ–è€…æ•°é‡å¾ˆå¤šï¼Œå°±ä¼šå½±å“æ€§èƒ½

### 2.2 ç®€åŒ–å¤æ‚è¡¨è¾¾å¼


**âŒ æ€§èƒ½ä¸å¥½çš„å†™æ³•**
```jsp
<!-- å¤æ‚çš„åµŒå¥—è¡¨è¾¾å¼ -->
${user.profile.address.city.name.length() > 10 ? 
  user.profile.address.city.name.substring(0, 10) + "..." : 
  user.profile.address.city.name}

<!-- é‡å¤çš„å¤æ‚è®¡ç®— -->
<c:if test="${user.orders.size() > 0}">
  è®¢å•æ•°é‡ï¼š${user.orders.size()}
</c:if>
```

**âœ… ä¼˜åŒ–åçš„å†™æ³•**
```jsp
<!-- åœ¨Servletä¸­é¢„å¤„ç† -->
<%
String cityDisplay = "";
String cityName = user.getProfile().getAddress().getCity().getName();
if (cityName.length() > 10) {
    cityDisplay = cityName.substring(0, 10) + "...";
} else {
    cityDisplay = cityName;
}
request.setAttribute("cityDisplay", cityDisplay);

int orderCount = user.getOrders().size();
request.setAttribute("orderCount", orderCount);
%>

<!-- JSPä¸­ä½¿ç”¨ç®€å•è¡¨è¾¾å¼ -->
${cityDisplay}

<c:if test="${orderCount > 0}">
  è®¢å•æ•°é‡ï¼š${orderCount}
</c:if>
```

> ğŸ¯ **ä¼˜åŒ–åŸç†**ï¼šæŠŠå¤æ‚è®¡ç®—æ”¾åœ¨Javaä»£ç ä¸­æ‰§è¡Œï¼ŒJSPåªè´Ÿè´£æ˜¾ç¤ºç»“æœ

### 2.3 é¿å…ç©ºå€¼æ£€æŸ¥çš„æ€§èƒ½æŸè€—


**âŒ é¢‘ç¹çš„ç©ºå€¼æ£€æŸ¥**
```jsp
${user != null && user.name != null ? user.name : "åŒ¿åç”¨æˆ·"}
${user != null && user.profile != null && 
  user.profile.phone != null ? user.profile.phone : "æœªå¡«å†™"}
```

**âœ… ä½¿ç”¨é»˜è®¤å€¼å’Œé¢„å¤„ç†**
```java
// Servletä¸­ç»Ÿä¸€å¤„ç†ç©ºå€¼
public class UserDisplayHelper {
    public static String getDisplayName(User user) {
        if (user == null || user.getName() == null) {
            return "åŒ¿åç”¨æˆ·";
        }
        return user.getName();
    }
    
    public static String getDisplayPhone(User user) {
        if (user == null || user.getProfile() == null || 
            user.getProfile().getPhone() == null) {
            return "æœªå¡«å†™";
        }
        return user.getProfile().getPhone();
    }
}

// JSPä¸­ç®€å•ä½¿ç”¨
request.setAttribute("displayName", 
    UserDisplayHelper.getDisplayName(user));
request.setAttribute("displayPhone", 
    UserDisplayHelper.getDisplayPhone(user));
```

```jsp
<!-- JSPå˜å¾—å¾ˆç®€æ´ -->
ç”¨æˆ·å§“åï¼š${displayName}
è”ç³»ç”µè¯ï¼š${displayPhone}
```

---

## 3. ğŸ”„ å¾ªç¯æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 3.1 `<c:forEach>`çš„æ€§èƒ½ç‰¹ç‚¹


**ğŸ” å¾ªç¯æ˜¯æ€ä¹ˆæ¶ˆè€—æ€§èƒ½çš„**
```
æ¯æ¬¡å¾ªç¯éƒ½è¦ï¼š
1. æ£€æŸ¥å¾ªç¯æ¡ä»¶
2. åˆ›å»ºå¾ªç¯å˜é‡
3. æ‰§è¡Œæ ‡ç­¾ä½“å†…å®¹
4. æ›´æ–°å¾ªç¯çŠ¶æ€

å¦‚æœå¾ªç¯1000æ¬¡ï¼Œè¿™äº›æ“ä½œå°±è¦é‡å¤1000æ¬¡ï¼
```

### 3.2 å‡å°‘å¾ªç¯æ¬¡æ•°


**âŒ æ˜¾ç¤ºæ‰€æœ‰æ•°æ®**
```jsp
<!-- å¯èƒ½æœ‰å‡ åƒæ¡è®°å½• -->
<c:forEach items="${allUsers}" var="user">
    <tr>
        <td>${user.name}</td>
        <td>${user.email}</td>
    </tr>
</c:forEach>
```

**âœ… åˆ†é¡µæ˜¾ç¤º**
```java
// Servletä¸­å®ç°åˆ†é¡µ
public class UserPageServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) {
        int page = Integer.parseInt(request.getParameter("page"));
        int pageSize = 20; // æ¯é¡µ20æ¡
        
        // åªæŸ¥è¯¢å½“å‰é¡µçš„æ•°æ®
        List<User> users = userService.getUsersByPage(page, pageSize);
        request.setAttribute("users", users);
        request.setAttribute("currentPage", page);
    }
}
```

```jsp
<!-- åªå¾ªç¯20æ¬¡ï¼Œæ€§èƒ½å¤§å¤§æå‡ -->
<c:forEach items="${users}" var="user" varStatus="status">
    <tr>
        <td>${status.index + 1}</td>
        <td>${user.name}</td>
        <td>${user.email}</td>
    </tr>
</c:forEach>

<!-- åˆ†é¡µå¯¼èˆª -->
<a href="users?page=${currentPage - 1}">ä¸Šä¸€é¡µ</a>
<a href="users?page=${currentPage + 1}">ä¸‹ä¸€é¡µ</a>
```

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šç”¨æˆ·ä¸€æ¬¡åªèƒ½çœ‹å‡ åæ¡æ•°æ®ï¼Œæ²¡å¿…è¦åŠ è½½å‡ åƒæ¡

### 3.3 ä¼˜åŒ–å¾ªç¯å†…çš„æ“ä½œ


**âŒ å¾ªç¯å†…æœ‰å¤æ‚æ“ä½œ**
```jsp
<c:forEach items="${orders}" var="order">
    <tr>
        <td>${order.id}</td>
        <!-- æ¯æ¬¡å¾ªç¯éƒ½è¦è®¡ç®—æ€»ä»· -->
        <td>
            <c:set var="total" value="0"/>
            <c:forEach items="${order.items}" var="item">
                <c:set var="total" value="${total + item.price * item.quantity}"/>
            </c:forEach>
            æ€»ä»·ï¼š${total}
        </td>
    </tr>
</c:forEach>
```

**âœ… é¢„å…ˆè®¡ç®—ç»“æœ**
```java
// åœ¨Javaä»£ç ä¸­é¢„å¤„ç†
for (Order order : orders) {
    double total = 0;
    for (OrderItem item : order.getItems()) {
        total += item.getPrice() * item.getQuantity();
    }
    order.setTotalPrice(total); // è®¾ç½®æ€»ä»·
}
```

```jsp
<!-- JSPä¸­ç›´æ¥ä½¿ç”¨ç»“æœ -->
<c:forEach items="${orders}" var="order">
    <tr>
        <td>${order.id}</td>
        <td>æ€»ä»·ï¼š${order.totalPrice}</td>
    </tr>
</c:forEach>
```

### 3.4 åˆç†ä½¿ç”¨å¾ªç¯çŠ¶æ€


**ğŸ“Š `varStatus`çš„æ€§èƒ½å½±å“**
```jsp
<!-- å¦‚æœä¸éœ€è¦çŠ¶æ€ä¿¡æ¯ï¼Œå°±ä¸è¦æ·»åŠ varStatus -->
<c:forEach items="${users}" var="user">
    <p>${user.name}</p>
</c:forEach>

<!-- åªæœ‰éœ€è¦ç´¢å¼•ã€è®¡æ•°ç­‰ä¿¡æ¯æ—¶æ‰ä½¿ç”¨ -->
<c:forEach items="${users}" var="user" varStatus="status">
    <p>${status.index + 1}. ${user.name}</p>
</c:forEach>
```

> âš ï¸ **æ³¨æ„**ï¼š`varStatus`ä¼šåˆ›å»ºé¢å¤–çš„å¯¹è±¡ï¼Œå¢åŠ å†…å­˜ä½¿ç”¨

---

## 4. ğŸ¯ ä½œç”¨åŸŸé€‰æ‹©ä¸ä¼˜åŒ–


### 4.1 å››ç§ä½œç”¨åŸŸçš„æ€§èƒ½ç‰¹ç‚¹


**ğŸ“‹ ä½œç”¨åŸŸæ€§èƒ½å¯¹æ¯”è¡¨**

| ä½œç”¨åŸŸ | ç”Ÿå­˜æ—¶é—´ | å†…å­˜å ç”¨ | æŸ¥æ‰¾é€Ÿåº¦ | é€‚ç”¨åœºæ™¯ |
|--------|----------|----------|----------|----------|
| **pageContext** | å•ä¸ªé¡µé¢ | æœ€å° | æœ€å¿« | é¡µé¢ä¸´æ—¶æ•°æ® |
| **request** | å•æ¬¡è¯·æ±‚ | è¾ƒå° | å¿« | è¯·æ±‚é—´ä¼ é€’æ•°æ® |
| **session** | ç”¨æˆ·ä¼šè¯ | è¾ƒå¤§ | ä¸­ç­‰ | ç”¨æˆ·ä¸ªäººæ•°æ® |
| **application** | æ•´ä¸ªåº”ç”¨ | æœ€å¤§ | æ…¢ | å…¨å±€å…±äº«æ•°æ® |

### 4.2 é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸ


**ğŸ¯ ä½œç”¨åŸŸé€‰æ‹©åŸåˆ™**
```
æ•°æ®ä½¿ç”¨èŒƒå›´æœ€å° â†’ é€‰æ‹©æœ€å°çš„ä½œç”¨åŸŸ
æ•°æ®æ›´æ–°é¢‘ç‡é«˜ â†’ é¿å…ä½¿ç”¨sessionå’Œapplication
æ•°æ®é‡å¾ˆå¤§ â†’ ä¼˜å…ˆä½¿ç”¨requestå’Œpage
å¤šç”¨æˆ·å…±äº« â†’ è€ƒè™‘ä½¿ç”¨applicationï¼Œä½†è¦æ³¨æ„åŒæ­¥
```

**âœ… å¥½çš„ä½œç”¨åŸŸä½¿ç”¨**
```java
// ä¸´æ—¶è®¡ç®—ç»“æœç”¨page
pageContext.setAttribute("tempResult", result);

// è¡¨å•æ•°æ®ç”¨request
request.setAttribute("userForm", form);

// ç”¨æˆ·ç™»å½•ä¿¡æ¯ç”¨session
session.setAttribute("currentUser", user);

// ç³»ç»Ÿé…ç½®ç”¨application
application.setAttribute("systemConfig", config);
```

**âŒ ä¸å¥½çš„ä½œç”¨åŸŸä½¿ç”¨**
```java
// å¤§é‡ä¸´æ—¶æ•°æ®æ”¾åœ¨sessionä¸­
session.setAttribute("searchResults", largeList); // å ç”¨å†…å­˜è¿‡å¤š

// ç”¨æˆ·ä¸ªäººæ•°æ®æ”¾åœ¨applicationä¸­
application.setAttribute("userPreference", preference); // ä¼šè¢«è¦†ç›–
```

### 4.3 åŠæ—¶æ¸…ç†æ— ç”¨æ•°æ®


**ğŸ—‘ï¸ æ•°æ®æ¸…ç†ç­–ç•¥**
```java
// è¯·æ±‚ç»“æŸå‰æ¸…ç†å¤§å¯¹è±¡
request.removeAttribute("largeDataList");

// ç”¨æˆ·é€€å‡ºæ—¶æ¸…ç†session
session.invalidate();

// å®šæœŸæ¸…ç†applicationä¸­çš„è¿‡æœŸæ•°æ®
public class DataCleanupListener implements ServletContextListener {
    public void contextInitialized(ServletContextEvent sce) {
        // å¯åŠ¨å®šæ—¶æ¸…ç†ä»»åŠ¡
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            public void run() {
                cleanupExpiredData();
            }
        }, 0, 3600000); // æ¯å°æ—¶æ¸…ç†ä¸€æ¬¡
    }
}
```

---

## 5. ğŸ’¾ ç¼“å­˜æœºåˆ¶çš„åˆç†åˆ©ç”¨


### 5.1 ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç¼“å­˜


**ğŸ¤” ç¼“å­˜çš„æœ¬è´¨**
ç¼“å­˜å°±åƒæŠŠå¸¸ç”¨çš„ä¸œè¥¿æ”¾åœ¨æ‰‹è¾¹ï¼Œé¿å…æ¯æ¬¡éƒ½å»è¿œå¤„æ‹¿

```
é€‚åˆç¼“å­˜çš„æ•°æ®ï¼š
âœ… æŸ¥è¯¢é¢‘ç¹ï¼šç”¨æˆ·ç»å¸¸è®¿é—®
âœ… è®¡ç®—å¤æ‚ï¼šå¤„ç†æ—¶é—´é•¿
âœ… å˜åŒ–ä¸é¢‘ç¹ï¼šæ•°æ®ç›¸å¯¹ç¨³å®š
âœ… æˆæœ¬é«˜ï¼šæ•°æ®åº“æŸ¥è¯¢ã€ç½‘ç»œè¯·æ±‚

ä¸é€‚åˆç¼“å­˜çš„æ•°æ®ï¼š
âŒ å˜åŒ–é¢‘ç¹ï¼šå®æ—¶æ•°æ®
âŒ å ç”¨ç©ºé—´å¤§ï¼šå¤§æ–‡ä»¶ã€å¤§åˆ—è¡¨
âŒ ä¸ªäººéšç§ï¼šæ•æ„Ÿä¿¡æ¯
âŒ ä¸€æ¬¡æ€§ï¼šä¸´æ—¶æ•°æ®
```

### 5.2 å®ç°ç®€å•çš„åº”ç”¨ç¼“å­˜


**ğŸ”§ åŸºç¡€ç¼“å­˜å®ç°**
```java
public class SimpleCache {
    private static final Map<String, Object> cache = new HashMap<>();
    private static final Map<String, Long> cacheTime = new HashMap<>();
    private static final long EXPIRE_TIME = 300000; // 5åˆ†é’Ÿè¿‡æœŸ
    
    public static void put(String key, Object value) {
        cache.put(key, value);
        cacheTime.put(key, System.currentTimeMillis());
    }
    
    public static Object get(String key) {
        Long time = cacheTime.get(key);
        if (time == null) {
            return null;
        }
        
        // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if (System.currentTimeMillis() - time > EXPIRE_TIME) {
            cache.remove(key);
            cacheTime.remove(key);
            return null;
        }
        
        return cache.get(key);
    }
}
```

**ğŸ“ åœ¨Servletä¸­ä½¿ç”¨ç¼“å­˜**
```java
public class ProductListServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) {
        String cacheKey = "productList";
        
        // å…ˆä»ç¼“å­˜è·å–
        List<Product> products = (List<Product>) SimpleCache.get(cacheKey);
        
        if (products == null) {
            // ç¼“å­˜æ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢
            products = productService.getAllProducts();
            // æ”¾å…¥ç¼“å­˜
            SimpleCache.put(cacheKey, products);
        }
        
        request.setAttribute("products", products);
        request.getRequestDispatcher("/productList.jsp").forward(request, response);
    }
}
```

### 5.3 é¡µé¢ç‰‡æ®µç¼“å­˜


**ğŸ¨ ç¼“å­˜é™æ€é¡µé¢ç‰‡æ®µ**
```jsp
<!-- ç¼“å­˜ä¸ç»å¸¸å˜åŒ–çš„å¯¼èˆªèœå• -->
<%
String menuHtml = (String) application.getAttribute("menuHtml");
if (menuHtml == null) {
    // ç”Ÿæˆèœå•HTML
    StringBuilder menu = new StringBuilder();
    menu.append("<ul class='nav'>");
    for (MenuItem item : menuItems) {
        menu.append("<li><a href='").append(item.getUrl()).append("'>")
            .append(item.getName()).append("</a></li>");
    }
    menu.append("</ul>");
    
    menuHtml = menu.toString();
    application.setAttribute("menuHtml", menuHtml);
}
%>

<!-- ç›´æ¥è¾“å‡ºç¼“å­˜çš„HTML -->
<%=menuHtml%>
```

> ğŸ’¡ **ä¼˜åŒ–æ•ˆæœ**ï¼šé¿å…æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°ç”Ÿæˆç›¸åŒçš„HTML

---

## 6. ğŸ”„ é¿å…é‡å¤è®¡ç®—çš„æŠ€å·§


### 6.1 è¯†åˆ«é‡å¤è®¡ç®—


**ğŸ” å¸¸è§çš„é‡å¤è®¡ç®—åœºæ™¯**
```jsp
<!-- åŒä¸€ä¸ªè¡¨è¾¾å¼åœ¨é¡µé¢ä¸­å¤šæ¬¡å‡ºç° -->
<h1>æ¬¢è¿ ${user.profile.displayName}</h1>
<p>ç”¨æˆ·ï¼š${user.profile.displayName} çš„ä¸ªäººä¿¡æ¯</p>
<div>å½“å‰ç™»å½•ç”¨æˆ·ï¼š${user.profile.displayName}</div>

<!-- å¾ªç¯ä¸­çš„é‡å¤è®¡ç®— -->
<c:forEach items="${orders}" var="order">
    è®¢å•${order.id}ï¼š${order.createTime.year + 1900}å¹´åˆ›å»º
    <!-- æ¯æ¬¡å¾ªç¯éƒ½è¦è®¡ç®—year + 1900 -->
</c:forEach>
```

### 6.2 ä½¿ç”¨`<c:set>`ç¼“å­˜è®¡ç®—ç»“æœ


**âœ… ä¸€æ¬¡è®¡ç®—ï¼Œå¤šæ¬¡ä½¿ç”¨**
```jsp
<!-- è®¡ç®—ä¸€æ¬¡ï¼Œä¿å­˜ç»“æœ -->
<c:set var="displayName" value="${user.profile.displayName}"/>
<c:set var="currentYear" value="${2024}"/>

<!-- å¤šæ¬¡ä½¿ç”¨ç¼“å­˜çš„ç»“æœ -->
<h1>æ¬¢è¿ ${displayName}</h1>
<p>ç”¨æˆ·ï¼š${displayName} çš„ä¸ªäººä¿¡æ¯</p>
<div>å½“å‰ç™»å½•ç”¨æˆ·ï¼š${displayName}</div>

<!-- å¾ªç¯ä¸­ä½¿ç”¨é¢„è®¡ç®—ç»“æœ -->
<c:forEach items="${orders}" var="order">
    <c:set var="orderYear" value="${order.createTime.year + 1900}"/>
    è®¢å•${order.id}ï¼š${orderYear}å¹´åˆ›å»º
</c:forEach>
```

### 6.3 åœ¨Javaä¸­é¢„å¤„ç†æ•°æ®


**ğŸ”§ æœåŠ¡å™¨ç«¯é¢„å¤„ç†**
```java
public class OrderDisplayHelper {
    public static class OrderDisplay {
        private Order order;
        private String displayDate;
        private String displayStatus;
        
        public OrderDisplay(Order order) {
            this.order = order;
            // é¢„å…ˆæ ¼å¼åŒ–æ—¥æœŸ
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
            this.displayDate = sdf.format(order.getCreateTime());
            
            // é¢„å…ˆè½¬æ¢çŠ¶æ€
            this.displayStatus = getStatusText(order.getStatus());
        }
        
        private String getStatusText(int status) {
            switch (status) {
                case 0: return "å¾…ä»˜æ¬¾";
                case 1: return "å·²ä»˜æ¬¾";
                case 2: return "å·²å‘è´§";
                case 3: return "å·²å®Œæˆ";
                default: return "æœªçŸ¥çŠ¶æ€";
            }
        }
        
        // getteræ–¹æ³•...
    }
    
    public static List<OrderDisplay> prepareOrdersForDisplay(List<Order> orders) {
        List<OrderDisplay> displayOrders = new ArrayList<>();
        for (Order order : orders) {
            displayOrders.add(new OrderDisplay(order));
        }
        return displayOrders;
    }
}
```

```jsp
<!-- JSPä¸­ç›´æ¥ä½¿ç”¨é¢„å¤„ç†çš„ç»“æœ -->
<c:forEach items="${displayOrders}" var="orderDisplay">
    <tr>
        <td>${orderDisplay.order.id}</td>
        <td>${orderDisplay.displayDate}</td>
        <td>${orderDisplay.displayStatus}</td>
    </tr>
</c:forEach>
```

---

## 7. ğŸ§  å†…å­˜ä½¿ç”¨ä¼˜åŒ–å®è·µ


### 7.1 ç†è§£å†…å­˜ä½¿ç”¨æ¨¡å¼


**ğŸ” ELå’ŒJSTLçš„å†…å­˜æ¶ˆè€—**
```
å˜é‡å­˜å‚¨ï¼šæ¯ä¸ªsetAttributeéƒ½å ç”¨å†…å­˜
å¯¹è±¡å¼•ç”¨ï¼šå¤§å¯¹è±¡ä¼šå ç”¨å¤§é‡å†…å­˜
å¾ªç¯å˜é‡ï¼šforEachä¼šåˆ›å»ºä¸´æ—¶å˜é‡
è¡¨è¾¾å¼ç¼“å­˜ï¼šå¤æ‚è¡¨è¾¾å¼çš„ä¸­é—´ç»“æœ
```

**ğŸ“Š å†…å­˜ä½¿ç”¨ç¤ºæ„å›¾**
```
JVMå†…å­˜ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å †å†…å­˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Sessionæ•°æ®    Requestæ•°æ®         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ç”¨æˆ·Aæ•°æ®    â”‚ å½“å‰è¯·æ±‚æ•°æ®     â”‚   â”‚
â”‚  â”‚ç”¨æˆ·Bæ•°æ®    â”‚ ä¸´æ—¶å˜é‡        â”‚   â”‚
â”‚  â”‚...          â”‚ å¾ªç¯å˜é‡        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Applicationæ•°æ®             â”‚
â”‚  å…¨å±€é…ç½®ã€ç¼“å­˜æ•°æ®ã€å…±äº«å¯¹è±¡        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å‡å°‘å¤§å¯¹è±¡çš„ä¼ é€’


**âŒ ä¼ é€’æ•´ä¸ªå¤§å¯¹è±¡**
```java
// æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼ˆå¯èƒ½åŒ…å«å¤§é‡å­—æ®µï¼‰
List<User> allUsers = userService.getAllUsersWithDetails();
request.setAttribute("users", allUsers);
```

```jsp
<!-- åªæ˜¾ç¤ºå§“åå’Œé‚®ç®±ï¼Œä½†ä¼ é€’äº†å®Œæ•´å¯¹è±¡ -->
<c:forEach items="${users}" var="user">
    <p>${user.name} - ${user.email}</p>
</c:forEach>
```

**âœ… åªä¼ é€’éœ€è¦çš„æ•°æ®**
```java
// åˆ›å»ºè½»é‡çº§çš„æ˜¾ç¤ºå¯¹è±¡
public class UserSummary {
    private String name;
    private String email;
    
    public UserSummary(User user) {
        this.name = user.getName();
        this.email = user.getEmail();
    }
    // getteræ–¹æ³•...
}

// åªæŸ¥è¯¢å’Œä¼ é€’éœ€è¦çš„å­—æ®µ
List<UserSummary> userSummaries = userService.getUserSummaries();
request.setAttribute("users", userSummaries);
```

### 7.3 åŠæ—¶é‡Šæ”¾èµ„æº


**ğŸ—‘ï¸ è¯·æ±‚ç»“æŸæ—¶æ¸…ç†**
```java
public class CleanupFilter implements Filter {
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        try {
            chain.doFilter(request, response);
        } finally {
            // æ¸…ç†å¤§å¯¹è±¡
            HttpServletRequest req = (HttpServletRequest) request;
            req.removeAttribute("largeDataList");
            req.removeAttribute("searchResults");
        }
    }
}
```

**â° å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®**
```java
// Sessionè¶…æ—¶æ¸…ç†
public class SessionCleanupListener implements HttpSessionListener {
    public void sessionDestroyed(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        // æ¸…ç†sessionä¸­çš„å¤§å¯¹è±¡
        session.removeAttribute("userCache");
        session.removeAttribute("tempData");
    }
}
```

---

## 8. ğŸ“ˆ æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜


### 8.1 ç®€å•çš„æ€§èƒ½ç›‘æ§


**â±ï¸ ç›‘æ§é¡µé¢å“åº”æ—¶é—´**
```java
public class PerformanceFilter implements Filter {
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        long startTime = System.currentTimeMillis();
        
        try {
            chain.doFilter(request, response);
        } finally {
            long endTime = System.currentTimeMillis();
            long duration = endTime - startTime;
            
            HttpServletRequest req = (HttpServletRequest) request;
            String uri = req.getRequestURI();
            
            // è®°å½•æ…¢è¯·æ±‚
            if (duration > 1000) { // è¶…è¿‡1ç§’çš„è¯·æ±‚
                System.out.println("æ…¢è¯·æ±‚ï¼š" + uri + " è€—æ—¶ï¼š" + duration + "ms");
            }
        }
    }
}
```

### 8.2 å†…å­˜ä½¿ç”¨ç›‘æ§


**ğŸ§  ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ**
```java
public class MemoryMonitorServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) throws IOException {
        
        Runtime runtime = Runtime.getRuntime();
        long totalMemory = runtime.totalMemory();
        long freeMemory = runtime.freeMemory();
        long usedMemory = totalMemory - freeMemory;
        
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        
        out.println("<h2>å†…å­˜ä½¿ç”¨æƒ…å†µ</h2>");
        out.println("<p>æ€»å†…å­˜ï¼š" + (totalMemory / 1024 / 1024) + " MB</p>");
        out.println("<p>å·²ä½¿ç”¨ï¼š" + (usedMemory / 1024 / 1024) + " MB</p>");
        out.println("<p>ç©ºé—²å†…å­˜ï¼š" + (freeMemory / 1024 / 1024) + " MB</p>");
        
        // å¦‚æœå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œæç¤ºè­¦å‘Š
        double memoryUsageRate = (double) usedMemory / totalMemory;
        if (memoryUsageRate > 0.8) {
            out.println("<p style='color:red'>âš ï¸ å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼š" + 
                       (int)(memoryUsageRate * 100) + "%</p>");
        }
    }
}
```

### 8.3 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•


**âœ… ä¼˜åŒ–æ£€æŸ¥æ¸…å•**

> ğŸ“‹ **è¡¨è¾¾å¼ä¼˜åŒ–**
> - [ ] ç®€åŒ–å¤æ‚çš„ELè¡¨è¾¾å¼
> - [ ] å‡å°‘åµŒå¥—å±‚çº§
> - [ ] é¢„å¤„ç†å¤æ‚è®¡ç®—
> - [ ] é¿å…é‡å¤çš„ç©ºå€¼æ£€æŸ¥

> ğŸ“‹ **å¾ªç¯ä¼˜åŒ–**
> - [ ] å®ç°åˆ†é¡µï¼Œé™åˆ¶å¾ªç¯æ¬¡æ•°
> - [ ] å°†å¤æ‚è®¡ç®—ç§»åˆ°å¾ªç¯å¤–
> - [ ] åªåœ¨éœ€è¦æ—¶ä½¿ç”¨varStatus
> - [ ] è€ƒè™‘ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤æŸ¥è¯¢

> ğŸ“‹ **ä½œç”¨åŸŸä¼˜åŒ–**
> - [ ] é€‰æ‹©æœ€å°é€‚ç”¨çš„ä½œç”¨åŸŸ
> - [ ] åŠæ—¶æ¸…ç†æ— ç”¨æ•°æ®
> - [ ] é¿å…åœ¨sessionä¸­å­˜å‚¨å¤§å¯¹è±¡
> - [ ] åˆç†ä½¿ç”¨applicationç¼“å­˜

> ğŸ“‹ **å†…å­˜ä¼˜åŒ–**
> - [ ] åªä¼ é€’éœ€è¦çš„æ•°æ®å­—æ®µ
> - [ ] å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜
> - [ ] ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
> - [ ] è®¾ç½®åˆç†çš„sessionè¶…æ—¶æ—¶é—´

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„ä¼˜åŒ–åŸåˆ™


```
ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼š
â€¢ è¡¨è¾¾å¼è¶Šç®€å•è¶Šå¥½ - å¤æ‚è®¡ç®—æ”¾åœ¨Javaä¸­å¤„ç†
â€¢ å¾ªç¯æ¬¡æ•°è¶Šå°‘è¶Šå¥½ - ä½¿ç”¨åˆ†é¡µé¿å…å¤§é‡å¾ªç¯
â€¢ ä½œç”¨åŸŸè¶Šå°è¶Šå¥½ - æ•°æ®ç”¨å®ŒåŠæ—¶æ¸…ç†
â€¢ é‡å¤è®¡ç®—è¶Šå°‘è¶Šå¥½ - ä¸€æ¬¡è®¡ç®—å¤šæ¬¡ä½¿ç”¨
â€¢ å†…å­˜å ç”¨è¶Šå°è¶Šå¥½ - åªä¼ é€’å¿…è¦çš„æ•°æ®
```

### 9.2 ä¼˜åŒ–æ•ˆæœçš„å…¸å‹æ”¹è¿›


**ğŸ“Š æ€§èƒ½æå‡å¯¹æ¯”**

| ä¼˜åŒ–ç±»å‹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡æ•ˆæœ |
|----------|--------|--------|----------|
| **é¡µé¢åˆ†é¡µ** | æ˜¾ç¤º1000æ¡è®°å½• | æ˜¾ç¤º20æ¡è®°å½• | å“åº”æ—¶é—´å‡å°‘80% |
| **è¡¨è¾¾å¼é¢„å¤„ç†** | å¤æ‚ELè¡¨è¾¾å¼ | Javaé¢„è®¡ç®— | CPUä½¿ç”¨é™ä½60% |
| **æ•°æ®ç¼“å­˜** | æ¯æ¬¡æŸ¥è¯¢æ•°æ®åº“ | ç¼“å­˜5åˆ†é’Ÿ | æ•°æ®åº“å‹åŠ›å‡å°‘90% |
| **å¯¹è±¡ç²¾ç®€** | ä¼ é€’å®Œæ•´Userå¯¹è±¡ | ä¼ é€’UserSummary | å†…å­˜ä½¿ç”¨å‡å°‘70% |

### 9.3 ä¼˜åŒ–çš„æœ€ä½³å®è·µå»ºè®®


**ğŸš€ å®æˆ˜å»ºè®®**

1. **ä»ç”¨æˆ·ä½“éªŒå‡ºå‘**
   - é¡µé¢åŠ è½½æ—¶é—´æ§åˆ¶åœ¨2ç§’ä»¥å†…
   - å…³é”®æ“ä½œå“åº”æ—¶é—´ä¸è¶…è¿‡1ç§’
   - ä½¿ç”¨åŠ è½½æç¤ºæ”¹å–„ç­‰å¾…ä½“éªŒ

2. **å¾ªåºæ¸è¿›ä¼˜åŒ–**
   - å…ˆä¼˜åŒ–æœ€æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜
   - ä½¿ç”¨å·¥å…·æµ‹é‡ä¼˜åŒ–æ•ˆæœ
   - é¿å…è¿‡åº¦ä¼˜åŒ–å½±å“ä»£ç å¯è¯»æ€§

3. **å»ºç«‹ç›‘æ§æœºåˆ¶**
   - å®šæœŸæ£€æŸ¥é¡µé¢å“åº”æ—¶é—´
   - ç›‘æ§æœåŠ¡å™¨å†…å­˜ä½¿ç”¨æƒ…å†µ
   - æ”¶é›†ç”¨æˆ·åé¦ˆæŒç»­æ”¹è¿›

**ğŸ”§ å¸¸ç”¨ä¼˜åŒ–å·¥å…·**
- **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**ï¼šæ£€æŸ¥é¡µé¢åŠ è½½æ—¶é—´
- **JProfiler**ï¼šåˆ†æJavaåº”ç”¨å†…å­˜ä½¿ç”¨
- **Apache Bench (ab)**ï¼šç®€å•çš„æ€§èƒ½å‹æµ‹å·¥å…·
- **æ—¥å¿—åˆ†æ**ï¼šé€šè¿‡æ—¥å¿—å‘ç°æ€§èƒ½ç“¶é¢ˆ

### 9.4 é¿å…å¸¸è§çš„ä¼˜åŒ–è¯¯åŒº


**âš ï¸ ä¼˜åŒ–è¯¯åŒºæé†’**

```
âŒ è¿‡åº¦ä¼˜åŒ–ï¼šä¸ºäº†å¾®å°æå‡ç‰ºç‰²ä»£ç å¯è¯»æ€§
âŒ ç›²ç›®ç¼“å­˜ï¼šç¼“å­˜ä¸é€‚åˆçš„æ•°æ®åè€Œæ¶ˆè€—æ›´å¤šå†…å­˜
âŒ å¿½ç•¥æ¸…ç†ï¼šåªå…³æ³¨ä¼˜åŒ–ï¼Œä¸å…³æ³¨èµ„æºé‡Šæ”¾
âŒ å±€éƒ¨ä¼˜åŒ–ï¼šåªä¼˜åŒ–å•ä¸ªé¡µé¢ï¼Œå¿½è§†ç³»ç»Ÿæ•´ä½“æ€§èƒ½
```

**âœ… æ­£ç¡®çš„ä¼˜åŒ–æ€åº¦**
- æ€§èƒ½å¤Ÿç”¨å°±å¥½ï¼Œä¸å¿…è¿½æ±‚æè‡´
- ä¼˜åŒ–è¦æœ‰æ•°æ®æ”¯æ’‘ï¼Œä¸å‡­æ„Ÿè§‰
- å¹³è¡¡æ€§èƒ½å’Œå¼€å‘æ•ˆç‡
- è€ƒè™‘é•¿æœŸç»´æŠ¤æˆæœ¬

**ğŸ¯ æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
ç®€åŒ–è¡¨è¾¾å¼ï¼Œå‡å°‘å¾ªç¯æ•°
é€‰å°ä½œç”¨åŸŸï¼ŒåŠæ—¶æ¸…ç¼“å­˜  
é¢„å¤„ç†æ•°æ®ï¼Œç›‘æ§è¦è·Ÿä¸Š
ç”¨æˆ·ä½“éªŒä½³ï¼Œç³»ç»Ÿæ‰ç¨³å®š
```

> ğŸ’¡ **æœ€ç»ˆæé†’**ï¼šæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œè¦æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µä¸æ–­è°ƒæ•´å’Œæ”¹è¿›ã€‚æœ€é‡è¦çš„æ˜¯è®©ç”¨æˆ·æ„Ÿå—åˆ°ç½‘ç«™å¿«é€Ÿã€ç¨³å®šã€å¥½ç”¨ï¼