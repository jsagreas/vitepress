---
title: 3、fmt日期时间格式化
---
## 📚 目录

1. [fmt日期时间格式化概述](#1-fmt日期时间格式化概述)
2. [formatDate标签详解](#2-formatDate标签详解)
3. [parseDate标签详解](#3-parseDate标签详解)
4. [日期时间格式类型](#4-日期时间格式类型)
5. [自定义格式模式](#5-自定义格式模式)
6. [时区设置与处理](#6-时区设置与处理)
7. [实际应用场景](#7-实际应用场景)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🕐 fmt日期时间格式化概述


### 1.1 什么是日期时间格式化


**简单理解**：就像给数字"穿衣服"一样，给日期时间数据穿上好看易读的"外衣"

```
原始数据：2025-01-25 14:30:25.123
格式化后：2025年1月25日 下午2:30
```

**为什么需要格式化**：
- 📱 **用户友好**：让用户看得懂日期时间
- 🌍 **国际化支持**：不同地区有不同的日期显示习惯
- 🎨 **显示美观**：统一的格式让页面更整齐
- 📊 **数据处理**：方便数据的显示和计算

### 1.2 JSTL中的日期格式化工具


**核心标签家族**：
```
<fmt:formatDate>  → 把日期对象变成字符串显示
<fmt:parseDate>   → 把字符串变成日期对象
<fmt:timeZone>    → 设置时区环境
<fmt:setTimeZone> → 临时改变时区
```

> 💡 **新手提示**  
> 想象一下：formatDate 就像"翻译官"，把计算机认识的日期翻译成人类看得懂的格式

---

## 2. 🎯 formatDate标签详解


### 2.1 基本语法结构


**标签语法**：
```jsp
<fmt:formatDate value="日期对象" 
                type="格式类型" 
                pattern="自定义模式"
                timeZone="时区"
                var="保存变量名"
                scope="作用域" />
```

### 2.2 核心属性详解


| 属性名 | **作用** | **可选值** | **是否必需** |
|--------|----------|------------|-------------|
| `value` | **要格式化的日期对象** | Date对象、Long时间戳 | ✅ **必需** |
| `type` | **显示什么内容** | date/time/both | ⭐ 常用 |
| `pattern` | **自定义显示格式** | 格式字符串 | ⭐ 常用 |
| `timeZone` | **时区设置** | 时区ID | 📝 可选 |
| `var` | **保存结果到变量** | 变量名 | 📝 可选 |

### 2.3 基础使用示例


**准备测试数据**：
```jsp
<%-- 在JSP页面准备一个当前时间 --%>
<c:set var="now" value="<%=new java.util.Date()%>" />
```

**基本格式化展示**：
```jsp
<!-- 只显示日期部分 -->
今天日期：<fmt:formatDate value="${now}" type="date" />
<!-- 输出：今天日期：2025-1-25 -->

<!-- 只显示时间部分 -->
现在时间：<fmt:formatDate value="${now}" type="time" />  
<!-- 输出：现在时间：14:30:25 -->

<!-- 显示完整日期时间 -->
完整时间：<fmt:formatDate value="${now}" type="both" />
<!-- 输出：完整时间：2025-1-25 14:30:25 -->
```

> ⚠️ **注意事项**  
> value属性必须是Date对象或Long类型的时间戳，不能直接放字符串

---

## 3. 🔄 parseDate标签详解


### 3.1 什么是日期解析


**通俗解释**：把用户输入的文字日期转换成计算机能处理的日期对象

```
用户输入："2025年1月25日"
解析后：Date对象 → 可以用于计算和处理
```

### 3.2 基本语法


```jsp
<fmt:parseDate value="字符串日期" 
               type="解析类型"
               pattern="解析模式"
               timeZone="时区"
               var="保存变量名" />
```

### 3.3 实际使用示例


**解析用户输入的日期**：
```jsp
<!-- 假设用户输入了生日字符串 -->
<c:set var="birthdayStr" value="1990-05-15" />

<!-- 解析成日期对象 -->
<fmt:parseDate value="${birthdayStr}" 
               type="date" 
               pattern="yyyy-MM-dd" 
               var="birthday" />

<!-- 现在可以格式化显示 -->
您的生日是：<fmt:formatDate value="${birthday}" type="date" />
```

**处理表单提交的日期**：
```jsp
<!-- 接收表单中的日期字符串 -->
<fmt:parseDate value="${param.eventDate}" 
               pattern="yyyy/MM/dd HH:mm"
               var="parsedDate" />
               
<!-- 验证解析是否成功 -->
<c:if test="${not empty parsedDate}">
    活动时间：<fmt:formatDate value="${parsedDate}" type="both" />
</c:if>
```

---

## 4. 📅 日期时间格式类型


### 4.1 三种基本类型对比


```
原始时间：2025年1月25日 下午2点30分25秒

type="date" → 只要日期：2025-1-25
type="time" → 只要时间：14:30:25  
type="both" → 全部显示：2025-1-25 14:30:25
```

### 4.2 详细格式样式


**不同地区的显示差异**：

| 类型 | **中文环境** | **英文环境** | **适用场景** |
|------|-------------|-------------|-------------|
| `date` | `2025-1-25` | `Jan 25, 2025` | 📅 生日、截止日期 |
| `time` | `14:30:25` | `2:30:25 PM` | ⏰ 课程时间、会议时间 |
| `both` | `2025-1-25 14:30:25` | `Jan 25, 2025 2:30:25 PM` | 📝 系统日志、详细记录 |

### 4.3 实用选择建议


```jsp
<!-- 用户生日显示 - 只要日期 -->
<fmt:formatDate value="${user.birthday}" type="date" />

<!-- 系统操作时间 - 需要精确时间 -->
<fmt:formatDate value="${log.createTime}" type="both" />

<!-- 每日签到时间 - 只看时间就够了 -->
<fmt:formatDate value="${signTime}" type="time" />
```

> 💡 **选择技巧**  
> - 普通用户看的 → 用 `date`  
> - 需要精确记录 → 用 `both`  
> - 只关心时间点 → 用 `time`

---

## 5. 🎨 自定义格式模式


### 5.1 pattern属性的威力


**灵活控制显示格式**：想怎么显示就怎么显示！

```jsp
<c:set var="now" value="<%=new java.util.Date()%>" />

<!-- 中文友好格式 -->
<fmt:formatDate value="${now}" pattern="yyyy年MM月dd日 HH:mm:ss" />
<!-- 输出：2025年01月25日 14:30:25 -->

<!-- 简洁格式 -->
<fmt:formatDate value="${now}" pattern="MM/dd HH:mm" />
<!-- 输出：01/25 14:30 -->

<!-- 星期显示 -->
<fmt:formatDate value="${now}" pattern="yyyy-MM-dd EEEE" />
<!-- 输出：2025-01-25 星期六 -->
```

### 5.2 常用格式符号大全


| 符号 | **含义** | **示例** | **说明** |
|------|----------|----------|----------|
| `yyyy` | **4位年份** | 2025 | 完整年份 |
| `yy` | **2位年份** | 25 | 简化年份 |
| `MM` | **月份(补零)** | 01, 12 | 固定2位数字 |
| `M` | **月份(不补零)** | 1, 12 | 可能1位或2位 |
| `dd` | **日期(补零)** | 05, 25 | 固定2位数字 |
| `d` | **日期(不补零)** | 5, 25 | 可能1位或2位 |
| `HH` | **24小时制时** | 00-23 | 24小时制 |
| `hh` | **12小时制时** | 01-12 | 12小时制 |
| `mm` | **分钟** | 00-59 | 固定2位 |
| `ss` | **秒** | 00-59 | 固定2位 |
| `EEEE` | **星期全称** | 星期一 | 完整星期名 |
| `EEE` | **星期简称** | 周一 | 简化星期名 |
| `a` | **上下午** | AM/PM | 配合12小时制 |

### 5.3 实际业务场景应用


**电商订单时间显示**：
```jsp
<!-- 订单创建时间 - 用户友好格式 -->
下单时间：<fmt:formatDate value="${order.createTime}" 
                       pattern="MM月dd日 HH:mm" />

<!-- 物流更新时间 - 包含星期信息 -->
配送时间：<fmt:formatDate value="${delivery.updateTime}" 
                       pattern="MM-dd EEEE HH:mm" />
```

**系统日志格式**：
```jsp
<!-- 详细的系统日志时间戳 -->
[<fmt:formatDate value="${log.timestamp}" 
                 pattern="yyyy-MM-dd HH:mm:ss.SSS" />] 
${log.message}
```

> 🎯 **实用建议**  
> 选择格式时考虑用户习惯：中国用户习惯"年-月-日"，美国用户习惯"月/日/年"

---

## 6. 🌍 时区设置与处理


### 6.1 为什么需要时区处理


**现实场景**：
```
服务器在北京    → 显示：2025-01-25 14:30
用户在纽约      → 应该显示：2025-01-25 01:30  
用户在东京      → 应该显示：2025-01-25 15:30
```

**问题**：同一个时间，不同地区的用户应该看到不同的显示

### 6.2 timeZone属性使用


**基本时区设置**：
```jsp
<c:set var="now" value="<%=new java.util.Date()%>" />

<!-- 北京时间显示 -->
北京时间：<fmt:formatDate value="${now}" 
                       type="both"
                       timeZone="Asia/Shanghai" />

<!-- 纽约时间显示 -->  
纽约时间：<fmt:formatDate value="${now}" 
                       type="both" 
                       timeZone="America/New_York" />

<!-- 东京时间显示 -->
东京时间：<fmt:formatDate value="${now}" 
                       type="both"
                       timeZone="Asia/Tokyo" />
```

### 6.3 常用时区ID参考


```
中国大陆：Asia/Shanghai
日本：    Asia/Tokyo  
韩国：    Asia/Seoul
美国东部：America/New_York
美国西部：America/Los_Angeles
英国：    Europe/London
德国：    Europe/Berlin
```

### 6.4 动态时区处理


**根据用户设置显示**：
```jsp
<!-- 从用户配置中获取时区 -->
<c:set var="userTimeZone" value="${user.timeZone}" />

<!-- 根据用户时区显示时间 -->
<c:choose>
    <c:when test="${not empty userTimeZone}">
        <fmt:formatDate value="${article.publishTime}" 
                        type="both"
                        timeZone="${userTimeZone}" />
    </c:when>
    <c:otherwise>
        <fmt:formatDate value="${article.publishTime}" type="both" />
    </c:otherwise>
</c:choose>
```

---

## 7. 🚀 实际应用场景


### 7.1 用户注册页面


**生日选择和显示**：
```jsp
<!-- 用户填写的生日字符串 -->
<fmt:parseDate value="${param.birthday}" 
               pattern="yyyy-MM-dd" 
               var="userBirthday" />

<!-- 确认页面显示 -->
<c:if test="${not empty userBirthday}">
    您的生日：<fmt:formatDate value="${userBirthday}" 
                            pattern="yyyy年MM月dd日" />
</c:if>
```

### 7.2 文章列表页面


**发布时间的友好显示**：
```jsp
<c:forEach items="${articles}" var="article">
    <div class="article-item">
        <h3>${article.title}</h3>
        <div class="meta">
            <!-- 根据时间远近选择不同格式 -->
            <c:set var="now" value="<%=new java.util.Date()%>" />
            <c:set var="timeDiff" value="${now.time - article.publishTime.time}" />
            
            <c:choose>
                <!-- 今天发布的文章显示具体时间 -->
                <c:when test="${timeDiff < 86400000}">
                    发布时间：<fmt:formatDate value="${article.publishTime}" 
                                          pattern="HH:mm" />
                </c:when>
                <!-- 一周内的文章显示星期 -->
                <c:when test="${timeDiff < 604800000}">
                    发布时间：<fmt:formatDate value="${article.publishTime}" 
                                          pattern="EEEE HH:mm" />
                </c:when>
                <!-- 更早的文章显示完整日期 -->
                <c:otherwise>
                    发布时间：<fmt:formatDate value="${article.publishTime}" 
                                          pattern="MM-dd HH:mm" />
                </c:otherwise>
            </c:choose>
        </div>
    </div>
</c:forEach>
```

### 7.3 系统管理后台


**操作日志的时间显示**：
```jsp
<table class="log-table">
    <tr>
        <th>操作时间</th>
        <th>操作人</th>
        <th>操作内容</th>
    </tr>
    <c:forEach items="${logs}" var="log">
        <tr>
            <td>
                <!-- 精确到秒的时间显示 -->
                <fmt:formatDate value="${log.operateTime}" 
                                pattern="yyyy-MM-dd HH:mm:ss" />
            </td>
            <td>${log.operator}</td>
            <td>${log.content}</td>
        </tr>
    </c:forEach>
</table>
```

### 7.4 国际化网站


**多语言环境下的时间显示**：
```jsp
<!-- 检测用户的语言环境 -->
<c:set var="userLocale" value="${pageContext.request.locale}" />

<!-- 根据语言环境显示不同格式 -->
<c:choose>
    <c:when test="${userLocale.language == 'zh'}">
        <!-- 中文用户显示中文格式 -->
        <fmt:formatDate value="${event.startTime}" 
                        pattern="yyyy年MM月dd日 HH:mm" />
    </c:when>
    <c:when test="${userLocale.language == 'en'}">
        <!-- 英文用户显示英文格式 -->
        <fmt:formatDate value="${event.startTime}" 
                        pattern="MMM dd, yyyy HH:mm" />
    </c:when>
    <c:otherwise>
        <!-- 默认格式 -->
        <fmt:formatDate value="${event.startTime}" type="both" />
    </c:otherwise>
</c:choose>
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的基础概念


```
🔸 formatDate：把Date对象变成好看的字符串
🔸 parseDate：把字符串变成可处理的Date对象  
🔸 type属性：控制显示日期、时间还是两者
🔸 pattern属性：自定义显示格式的万能钥匙
🔸 timeZone属性：处理不同时区的时间显示
```

### 8.2 关键理解要点


**🔹 格式化 vs 解析的区别**
```
格式化(formatDate)：Date对象 → 字符串显示
用途：给用户看漂亮的时间

解析(parseDate)：字符串 → Date对象  
用途：处理用户输入的时间数据
```

**🔹 type属性的选择策略**
```
显示生日、节日 → type="date"
显示上课时间、会议时间 → type="time"  
显示系统日志、操作记录 → type="both"
```

**🔹 pattern属性的实用原则**
```
面向用户 → 友好格式："yyyy年MM月dd日"
系统记录 → 精确格式："yyyy-MM-dd HH:mm:ss"
国际化 → 灵活格式：根据地区调整
```

### 8.3 常用格式模式速查


| 使用场景 | **推荐格式** | **显示效果** |
|----------|-------------|-------------|
| **用户生日** | `yyyy年MM月dd日` | 1990年05月15日 |
| **文章发布** | `MM-dd HH:mm` | 01-25 14:30 |
| **系统日志** | `yyyy-MM-dd HH:mm:ss` | 2025-01-25 14:30:25 |
| **订单时间** | `MM月dd日 HH:mm` | 01月25日 14:30 |
| **国际格式** | `MMM dd, yyyy` | Jan 25, 2025 |

### 8.4 实际开发建议


**📋 开发检查清单**：
- [x] 确认value是Date对象而不是字符串
- [x] 根据显示需求选择合适的type类型  
- [x] 考虑用户体验选择友好的pattern格式
- [x] 国际化项目要考虑时区处理
- [x] 解析用户输入时要处理解析失败的情况

**⚡ 性能优化提示**：
- 复杂的时间格式化考虑在后台处理
- 频繁使用的格式可以定义成变量复用
- 大量数据的时间显示考虑分页处理

**🔧 调试技巧**：
```jsp
<!-- 调试时显示原始时间对象 -->
原始时间：${now}<br/>
格式化后：<fmt:formatDate value="${now}" pattern="yyyy-MM-dd HH:mm:ss" />
```

**核心记忆**：
- formatDate让时间变好看，parseDate让字符串变时间
- type选择看需求：date看日子，time看时间，both全都要
- pattern是万能钥匙，想要什么格式自己定
- 国际化网站要考虑时区，用户体验更友好