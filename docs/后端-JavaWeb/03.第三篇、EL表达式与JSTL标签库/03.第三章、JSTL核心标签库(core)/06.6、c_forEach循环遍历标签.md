---
title: 6、c_forEach循环遍历标签
---
## 📚 目录

1. [c:forEach标签概述](#1-cforEach标签概述)
2. [基础语法与属性详解](#2-基础语法与属性详解)
3. [集合遍历实战应用](#3-集合遍历实战应用)
4. [循环状态信息详解](#4-循环状态信息详解)
5. [数值范围循环](#5-数值范围循环)
6. [实际开发场景应用](#6-实际开发场景应用)
7. [常见问题与解决方案](#7-常见问题与解决方案)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🔄 c:forEach标签概述


### 1.1 什么是c:forEach标签


**🔸 基本概念**
`<c:forEach>`是JSTL核心标签库中用于**循环遍历**的标签，就像Java中的for循环和增强for循环一样，可以重复执行某段代码。

```
简单理解：
传统Java循环：for(int i=0; i<list.size(); i++) { ... }
JSTL循环标签：<c:forEach items="${list}" var="item"> ... </c:forEach>

作用：在JSP页面中实现循环功能，避免写复杂的Java代码
```

**💡 为什么需要forEach标签**
```
传统JSP写法（不推荐）：
<%
    List<String> names = (List<String>)request.getAttribute("names");
    for(String name : names) {
        out.println("<li>" + name + "</li>");
    }
%>

使用forEach标签（推荐）：
<c:forEach items="${names}" var="name">
    <li>${name}</li>
</c:forEach>

优势对比：
✅ 代码更简洁易读
✅ 分离了Java逻辑和页面显示
✅ 更好的维护性
✅ 更符合MVC模式
```

### 1.2 forEach标签的两种使用模式


**🔹 模式一：集合遍历模式**
```jsp
<!-- 遍历List、Array、Set等集合 -->
<c:forEach items="${集合}" var="元素变量">
    <!-- 处理每个元素 -->
</c:forEach>
```

**🔹 模式二：数值范围模式**
```jsp
<!-- 指定数值范围进行循环 -->
<c:forEach begin="开始值" end="结束值" var="循环变量">
    <!-- 循环体 -->
</c:forEach>
```

---

## 2. ⚙️ 基础语法与属性详解


### 2.1 核心属性一览表


| 属性名 | **作用说明** | **使用场景** | **示例值** |
|--------|-------------|-------------|-----------|
| **items** | `要遍历的集合对象` | `集合遍历` | `${userList}` |
| **var** | `当前元素的变量名` | `访问当前元素` | `user` |
| **varStatus** | `循环状态信息变量` | `获取索引、计数等` | `status` |
| **begin** | `开始索引(从0开始)` | `指定起始位置` | `0, 1, 2` |
| **end** | `结束索引` | `指定结束位置` | `5, 10` |
| **step** | `步长增量` | `控制递增幅度` | `1, 2, 3` |

### 2.2 属性详细说明


**🔸 items属性 - 数据源**
```jsp
<!-- 遍历不同类型的集合 -->
<c:forEach items="${stringList}" var="str">     <!-- List集合 -->
<c:forEach items="${userArray}" var="user">     <!-- 数组 -->
<c:forEach items="${userMap}" var="entry">      <!-- Map集合 -->
```

**🔸 var属性 - 当前元素**
```jsp
<c:forEach items="${productList}" var="product">
    <p>商品名：${product.name}</p>  <!-- var定义的变量名 -->
    <p>价格：${product.price}</p>
</c:forEach>
```

**🔸 varStatus属性 - 循环状态**
```jsp
<c:forEach items="${items}" var="item" varStatus="status">
    <tr class="${status.index % 2 == 0 ? 'even' : 'odd'}">
        <td>第${status.count}行</td>
        <td>${item}</td>
    </tr>
</c:forEach>
```

### 2.3 基础语法结构


**📋 标准语法格式**
```jsp
<c:forEach items="集合表达式" 
          var="元素变量名" 
          varStatus="状态变量名"
          begin="开始索引" 
          end="结束索引" 
          step="步长">
    
    <!-- 循环体内容 -->
    ${元素变量名}        <!-- 访问当前元素 -->
    ${状态变量名.index}  <!-- 访问循环状态 -->
    
</c:forEach>
```

---

## 3. 📋 集合遍历实战应用


### 3.1 遍历List集合


**🎯 实际场景：显示用户列表**

**Java后台代码：**
```java
// 在Servlet中准备数据
List<User> userList = Arrays.asList(
    new User("张三", 25, "工程师"),
    new User("李四", 28, "设计师"),
    new User("王五", 30, "产品经理")
);
request.setAttribute("users", userList);
```

**JSP页面代码：**
```jsp
<table border="1">
    <tr>
        <th>姓名</th>
        <th>年龄</th>
        <th>职位</th>
    </tr>
    <c:forEach items="${users}" var="user">
        <tr>
            <td>${user.name}</td>
            <td>${user.age}</td>
            <td>${user.job}</td>
        </tr>
    </c:forEach>
</table>
```

**📊 运行结果：**
```
┌─────┬─────┬─────────┐
│ 姓名│ 年龄│ 职位    │
├─────┼─────┼─────────┤
│ 张三│  25 │ 工程师  │
│ 李四│  28 │ 设计师  │
│ 王五│  30 │ 产品经理│
└─────┴─────┴─────────┘
```

### 3.2 遍历数组


**🎯 实际场景：显示菜单选项**

**Java代码：**
```java
String[] menus = {"首页", "产品", "服务", "关于我们", "联系我们"};
request.setAttribute("menuItems", menus);
```

**JSP代码：**
```jsp
<ul class="nav-menu">
    <c:forEach items="${menuItems}" var="menu">
        <li><a href="#">${menu}</a></li>
    </c:forEach>
</ul>
```

### 3.3 遍历Map集合


**🎯 实际场景：显示配置信息**

**Java代码：**
```java
Map<String, String> configs = new HashMap<>();
configs.put("网站标题", "我的网站");
configs.put("版权信息", "© 2024 公司名称");
configs.put("联系邮箱", "contact@example.com");
request.setAttribute("siteConfigs", configs);
```

**JSP代码：**
```jsp
<dl>
    <c:forEach items="${siteConfigs}" var="config">
        <dt>${config.key}：</dt>
        <dd>${config.value}</dd>
    </c:forEach>
</dl>
```

**💡 重要说明：**
> **Map遍历特点**：var变量代表Map.Entry对象
> - `${config.key}` - 获取键
> - `${config.value}` - 获取值

---

## 4. 📊 循环状态信息详解


### 4.1 varStatus对象的属性


**🔸 varStatus包含的状态信息**
```
varStatus对象提供的属性：

🔹 index    - 当前元素索引（从0开始）
🔹 count    - 当前元素计数（从1开始）  
🔹 first    - 是否是第一个元素（boolean）
🔹 last     - 是否是最后一个元素（boolean）
🔹 begin    - 循环开始值
🔹 end      - 循环结束值
🔹 step     - 循环步长值
```

### 4.2 状态信息实际应用


**🎯 场景一：表格行样式交替**
```jsp
<table>
    <c:forEach items="${products}" var="product" varStatus="status">
        <tr class="${status.index % 2 == 0 ? 'even-row' : 'odd-row'}">
            <td>${status.count}</td>      <!-- 行号 -->
            <td>${product.name}</td>
            <td>${product.price}</td>
        </tr>
    </c:forEach>
</table>

<!-- CSS样式 -->
<style>
    .even-row { background-color: #f9f9f9; }
    .odd-row { background-color: #ffffff; }
</style>
```

**🎯 场景二：首尾元素特殊处理**
```jsp
<ul class="breadcrumb">
    <c:forEach items="${pathList}" var="path" varStatus="status">
        <li>
            <c:if test="${!status.first}">></c:if>  <!-- 非首个元素前加箭头 -->
            <a href="${path.url}">${path.name}</a>
            <c:if test="${status.last}"></a></c:if>  <!-- 最后一个元素不加链接 -->
        </li>
    </c:forEach>
</ul>
```

### 4.3 状态信息对比表


| 场景 | **index使用** | **count使用** | **first/last使用** |
|------|--------------|--------------|------------------|
| **行号显示** | `第${status.index+1}行` | `第${status.count}行` | `不适用` |
| **样式交替** | `${status.index % 2}` | `${status.count % 2}` | `不适用` |
| **首尾处理** | `不常用` | `不常用` | `${status.first}` |
| **数组访问** | `arr[${status.index}]` | `不适用` | `不适用` |

---

## 5. 🔢 数值范围循环


### 5.1 基础数值循环


**🔸 简单数值循环**
```jsp
<!-- 生成1到5的数字 -->
<c:forEach begin="1" end="5" var="i">
    <span>数字：${i}</span><br>
</c:forEach>

输出结果：
数字：1
数字：2
数字：3
数字：4
数字：5
```

### 5.2 带步长的循环


**🔸 step属性控制增量**
```jsp
<!-- 生成偶数：2, 4, 6, 8, 10 -->
<c:forEach begin="2" end="10" step="2" var="even">
    <span>${even}</span>
</c:forEach>

<!-- 倒序循环：10, 8, 6, 4, 2 -->
<c:forEach begin="10" end="2" step="-2" var="desc">
    <span>${desc}</span>
</c:forEach>
```

### 5.3 实际应用场景


**🎯 场景一：分页页码**
```jsp
<!-- 生成分页页码 1-10 -->
<div class="pagination">
    <c:forEach begin="1" end="${totalPages}" var="page">
        <a href="?page=${page}" 
           class="${page == currentPage ? 'active' : ''}">${page}</a>
    </c:forEach>
</div>
```

**🎯 场景二：下拉选择框**
```jsp
<!-- 年份选择：2020-2030 -->
<select name="year">
    <c:forEach begin="2020" end="2030" var="year">
        <option value="${year}" 
                ${year == selectedYear ? 'selected' : ''}>${year}年</option>
    </c:forEach>
</select>
```

**🎯 场景三：表格列生成**
```jsp
<!-- 生成10列的表格 -->
<table>
    <tr>
        <c:forEach begin="1" end="10" var="col">
            <th>列${col}</th>
        </c:forEach>
    </tr>
</table>
```

---

## 6. 🚀 实际开发场景应用


### 6.1 商品列表展示


**🛍️ 电商网站商品展示**

```jsp
<!-- 商品网格布局 -->
<div class="product-grid">
    <c:forEach items="${productList}" var="product" varStatus="status">
        <div class="product-item ${status.index % 4 == 0 ? 'first-in-row' : ''}">
            <img src="${product.imageUrl}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p class="price">￥${product.price}</p>
            <button onclick="addToCart(${product.id})">加入购物车</button>
        </div>
        
        <!-- 每4个商品换行 -->
        <c:if test="${status.count % 4 == 0}">
            <div class="clearfix"></div>
        </c:if>
    </c:forEach>
</div>
```

### 6.2 导航菜单生成


**🧭 多级导航菜单**

```jsp
<!-- 主导航菜单 -->
<nav class="main-nav">
    <ul>
        <c:forEach items="${menuList}" var="menu" varStatus="status">
            <li class="${menu.active ? 'active' : ''} ${status.first ? 'first' : ''} ${status.last ? 'last' : ''}">
                <a href="${menu.url}">${menu.title}</a>
                
                <!-- 子菜单 -->
                <c:if test="${not empty menu.children}">
                    <ul class="sub-menu">
                        <c:forEach items="${menu.children}" var="subMenu">
                            <li><a href="${subMenu.url}">${subMenu.title}</a></li>
                        </c:forEach>
                    </ul>
                </c:if>
            </li>
        </c:forEach>
    </ul>
</nav>
```

### 6.3 数据表格显示


**📋 带操作的数据表格**

```jsp
<table class="data-table">
    <thead>
        <tr>
            <th>序号</th>
            <th>用户名</th>
            <th>邮箱</th>
            <th>状态</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        <c:forEach items="${userList}" var="user" varStatus="status">
            <tr class="${status.index % 2 == 0 ? 'even' : 'odd'}">
                <td>${status.count}</td>
                <td>${user.username}</td>
                <td>${user.email}</td>
                <td>
                    <span class="status ${user.active ? 'active' : 'inactive'}">
                        ${user.active ? '启用' : '禁用'}
                    </span>
                </td>
                <td class="actions">
                    <button onclick="editUser(${user.id})">编辑</button>
                    <button onclick="deleteUser(${user.id})" 
                            class="delete-btn">删除</button>
                </td>
            </tr>
        </c:forEach>
    </tbody>
</table>

<!-- 空数据提示 -->
<c:if test="${empty userList}">
    <div class="empty-data">
        <p>暂无用户数据</p>
    </div>
</c:if>
```

---

## 7. ❓ 常见问题与解决方案


### 7.1 性能相关问题


**🔸 问题：大量数据遍历导致页面卡顿**

```jsp
<!-- ❌ 错误做法：一次性显示所有数据 -->
<c:forEach items="${bigDataList}" var="item">  <!-- 假设有10万条数据 -->
    <div>${item.content}</div>
</c:forEach>

<!-- ✅ 正确做法：分页显示 -->
<c:forEach items="${pageDataList}" var="item" begin="0" end="19">
    <div>${item.content}</div>
</c:forEach>

<!-- 分页导航 -->
<div class="pagination">
    <c:forEach begin="1" end="${totalPages}" var="page">
        <a href="?page=${page}">${page}</a>
    </c:forEach>
</div>
```

### 7.2 空集合处理


**🔸 问题：集合为空时的页面显示**

```jsp
<!-- ✅ 推荐做法：先检查集合是否为空 -->
<c:choose>
    <c:when test="${not empty productList}">
        <div class="product-list">
            <c:forEach items="${productList}" var="product">
                <div class="product">${product.name}</div>
            </c:forEach>
        </div>
    </c:when>
    <c:otherwise>
        <div class="no-data">
            <p>暂无商品信息</p>
            <a href="add-product.jsp">添加商品</a>
        </div>
    </c:otherwise>
</c:choose>
```

### 7.3 索引越界问题


**🔸 问题：begin/end值设置不当**

```jsp
<!-- ❌ 可能出错：end值超过集合大小 -->
<c:forEach items="${list}" var="item" begin="0" end="100">
    ${item}  <!-- 如果list只有5个元素，这里不会出错，但显示不完整 -->
</c:forEach>

<!-- ✅ 安全做法：动态计算end值 -->
<c:forEach items="${list}" var="item" 
          begin="0" end="${fn:length(list) - 1}">
    ${item}
</c:forEach>

<!-- 或者不指定end，让forEach自动处理 -->
<c:forEach items="${list}" var="item">
    ${item}
</c:forEach>
```

### 7.4 嵌套循环问题


**🔸 问题：嵌套forEach的变量冲突**

```jsp
<!-- ❌ 变量名冲突 -->
<c:forEach items="${categories}" var="item">
    <h2>${item.name}</h2>
    <c:forEach items="${item.products}" var="item">  <!-- 变量名重复 -->
        <p>${item.name}</p>  <!-- 这里会混淆 -->
    </c:forEach>
</c:forEach>

<!-- ✅ 使用不同的变量名 -->
<c:forEach items="${categories}" var="category">
    <h2>${category.name}</h2>
    <c:forEach items="${category.products}" var="product">
        <p>${product.name}</p>
    </c:forEach>
</c:forEach>
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的基本概念


```
🔸 forEach标签：JSTL中用于循环遍历的核心标签
🔸 两种模式：集合遍历模式 + 数值范围模式
🔸 核心属性：items(数据源) + var(元素变量) + varStatus(状态信息)
🔸 循环状态：index(索引) + count(计数) + first/last(首尾判断)
🔸 数值循环：begin(开始) + end(结束) + step(步长)
```

### 8.2 关键理解要点


**🔹 items与var的关系**
```
理解要点：
- items指定要遍历的数据源（List、数组、Map等）
- var定义每次循环中当前元素的变量名
- 在循环体内通过${var}访问当前元素

实际应用：
items="${userList}"  var="user"
→ 每次循环user代表userList中的一个用户对象
→ 可以通过${user.name}访问用户属性
```

**🔹 index与count的区别**
```
记忆方法：
- index：程序员思维，从0开始计数（0,1,2,3...）
- count：用户思维，从1开始计数（1,2,3,4...）

使用场景：
- 显示行号：使用count（第1行、第2行）
- 数组访问：使用index（array[0]、array[1]）
- 样式交替：都可以（index%2 或 count%2）
```

**🔹 集合遍历vs数值循环**
```
选择原则：
- 有现成数据集合 → 使用items属性遍历
- 需要生成数字序列 → 使用begin/end属性
- 需要控制循环次数 → 两种方式都可以

实际例子：
- 显示用户列表 → items="${users}"
- 生成页码 → begin="1" end="${totalPages}"
- 创建表格列 → begin="1" end="10"
```

### 8.3 实际应用指南


**🎯 选择合适的循环方式**
```
数据展示场景：
✅ 商品列表 → <c:forEach items="${products}" var="product">
✅ 用户信息 → <c:forEach items="${users}" var="user">  
✅ 菜单导航 → <c:forEach items="${menus}" var="menu">

数字生成场景：
✅ 分页页码 → <c:forEach begin="1" end="${pages}" var="page">
✅ 年份选择 → <c:forEach begin="2020" end="2030" var="year">
✅ 评分星级 → <c:forEach begin="1" end="5" var="star">
```

**🔧 性能优化建议**
```
最佳实践：
- 大数据集合使用分页，不要一次性全部显示
- 合理使用begin/end限制循环范围  
- 嵌套循环要注意变量命名，避免冲突
- 空集合要做检查，提供友好的提示信息
- 复杂逻辑尽量在Java层处理，不要在JSP中实现
```

**核心记忆**：
- forEach让JSP循环变得简单优雅
- items遍历集合，begin/end生成数字
- varStatus提供丰富的循环状态信息  
- 合理使用提升页面性能和用户体验
- 是JavaWeb开发中不可缺少的重要工具