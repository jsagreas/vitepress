---
title: 5、c_choose多分支判断标签
---
## 📚 目录

1. [c:choose标签概述](#1-c-choose标签概述)
2. [基本语法结构](#2-基本语法结构)
3. [三大核心组件详解](#3-三大核心组件详解)
4. [实际应用场景](#4-实际应用场景)
5. [与传统if-else的对比](#5-与传统if-else的对比)
6. [常见问题与最佳实践](#6-常见问题与最佳实践)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🎯 c:choose标签概述


### 1.1 什么是c:choose标签


**简单理解**：`<c:choose>`就像Java中的`if-else if-else`语句，让你在JSP页面中实现多分支判断逻辑。

```
生活中的例子：
根据天气情况决定穿什么衣服
- 如果下雨 → 穿雨衣
- 如果很冷 → 穿棉衣  
- 如果很热 → 穿短袖
- 其他情况 → 穿普通衣服

这就是多分支判断的思路！
```

**核心作用**：
- 🔸 **多条件判断**：一次性处理多个不同条件
- 🔸 **逻辑清晰**：避免多个`<c:if>`嵌套造成的混乱
- 🔸 **性能优化**：只有匹配的分支会执行
- 🔸 **代码美观**：结构化的条件判断，代码更易读

### 1.2 为什么需要choose标签


**传统方式的问题**：
```jsp
<!-- 用多个c:if会很麻烦 -->
<c:if test="${score >= 90}">优秀</c:if>
<c:if test="${score >= 80 && score < 90}">良好</c:if>
<c:if test="${score >= 70 && score < 80}">中等</c:if>
<c:if test="${score >= 60 && score < 70}">及格</c:if>
<c:if test="${score < 60}">不及格</c:if>
```

**使用choose的优势**：
- ✅ **逻辑更清晰**：一看就知道是多分支判断
- ✅ **性能更好**：找到匹配条件就停止，不继续判断
- ✅ **维护更方便**：修改条件时不容易出错
- ✅ **结构更合理**：符合程序设计的逻辑结构

---

## 2. 📋 基本语法结构


### 2.1 标准语法格式


```jsp
<c:choose>
    <c:when test="条件1">
        <!-- 条件1为true时执行的内容 -->
    </c:when>
    <c:when test="条件2">
        <!-- 条件2为true时执行的内容 -->
    </c:when>
    <c:when test="条件3">
        <!-- 条件3为true时执行的内容 -->
    </c:when>
    <c:otherwise>
        <!-- 所有条件都不满足时执行的内容 -->
    </c:otherwise>
</c:choose>
```

### 2.2 语法要点说明


**🔸 标签嵌套关系**：
```
<c:choose>           ← 外层容器，必须的
  ├── <c:when>       ← 条件分支，可以有多个
  ├── <c:when>       ← 条件分支，可以有多个  
  └── <c:otherwise>  ← 默认分支，可选的
```

**🔸 执行顺序**：
1. **从上到下**：按照`<c:when>`标签的出现顺序依次检查条件
2. **找到就停**：一旦某个`test`条件为`true`，执行对应内容后直接结束
3. **默认处理**：如果所有`when`条件都不满足，执行`otherwise`中的内容

**🔸 重要规则**：
- `<c:choose>`标签内**只能**包含`<c:when>`和`<c:otherwise>`
- `<c:when>`可以有**多个**，`<c:otherwise>`最多**一个**
- `<c:otherwise>`必须放在**最后面**
- 至少要有**一个**`<c:when>`标签

---

## 3. 🛠️ 三大核心组件详解


### 3.1 c:choose - 选择容器


**作用**：充当整个多分支判断的**外层容器**

```jsp
<c:choose>
    <!-- 这里只能放c:when和c:otherwise标签 -->
    <!-- 不能直接放其他HTML内容或文本 -->
</c:choose>
```

**使用要点**：
- 📝 **纯容器**：自己不做任何判断，只是包装其他标签
- 📝 **严格嵌套**：内部只能包含when和otherwise标签
- 📝 **必须存在**：想用多分支判断就必须用它包裹

### 3.2 c:when - 条件分支


**作用**：定义具体的**判断条件**和对应的**执行内容**

```jsp
<c:when test="${user.age >= 18}">
    <p>您已成年，可以注册账号</p>
</c:when>
```

**核心属性 - test**：
- 🔸 **必填属性**：每个`<c:when>`都必须有test属性
- 🔸 **EL表达式**：通常使用EL表达式进行条件判断
- 🔸 **布尔结果**：表达式结果必须是true或false
- 🔸 **灵活判断**：可以进行各种复杂的逻辑判断

**test属性的常见用法**：

| 判断类型 | 示例 | 说明 |
|---------|------|------|
| **数值比较** | `test="${score >= 90}"` | 比较分数大小 |
| **字符串比较** | `test="${user.name == 'admin'}"` | 判断用户名 |
| **空值检查** | `test="${not empty userList}"` | 检查列表是否为空 |
| **复合条件** | `test="${age >= 18 && gender == 'male'}"` | 多个条件组合 |

### 3.3 c:otherwise - 默认分支


**作用**：当所有`<c:when>`条件都不满足时的**兜底处理**

```jsp
<c:otherwise>
    <p>抱歉，您不符合任何已知条件</p>
</c:otherwise>
```

**使用特点**：
- 🔸 **可选标签**：可以不写，但建议加上以确保逻辑完整
- 🔸 **无需属性**：不需要test属性，因为它是默认执行的
- 🔸 **位置固定**：必须放在所有`<c:when>`标签的后面
- 🔸 **兜底机制**：类似于switch语句中的default分支

---

## 4. 🎯 实际应用场景


### 4.1 学生成绩等级划分


```jsp
<!-- 假设后台传来student对象，包含score属性 -->
<div class="grade-display">
    <p>学生姓名：${student.name}</p>
    <p>考试分数：${student.score}</p>
    <p>成绩等级：
        <c:choose>
            <c:when test="${student.score >= 90}">
                <span class="excellent">优秀 🏆</span>
            </c:when>
            <c:when test="${student.score >= 80}">
                <span class="good">良好 👍</span>
            </c:when>
            <c:when test="${student.score >= 70}">
                <span class="average">中等 👌</span>
            </c:when>
            <c:when test="${student.score >= 60}">
                <span class="pass">及格 ✅</span>
            </c:when>
            <c:otherwise>
                <span class="fail">不及格 ❌</span>
            </c:otherwise>
        </c:choose>
    </p>
</div>
```

### 4.2 用户权限显示不同内容


```jsp
<!-- 根据用户角色显示不同的操作菜单 -->
<div class="user-menu">
    <c:choose>
        <c:when test="${user.role == 'admin'}">
            <ul>
                <li><a href="/admin/users">用户管理</a></li>
                <li><a href="/admin/system">系统设置</a></li>
                <li><a href="/admin/logs">日志查看</a></li>
            </ul>
        </c:when>
        <c:when test="${user.role == 'teacher'}">
            <ul>
                <li><a href="/teacher/courses">课程管理</a></li>
                <li><a href="/teacher/students">学生管理</a></li>
                <li><a href="/teacher/grades">成绩录入</a></li>
            </ul>
        </c:when>
        <c:when test="${user.role == 'student'}">
            <ul>
                <li><a href="/student/courses">我的课程</a></li>
                <li><a href="/student/grades">查看成绩</a></li>
                <li><a href="/student/profile">个人信息</a></li>
            </ul>
        </c:when>
        <c:otherwise>
            <p>请先登录系统</p>
            <a href="/login">立即登录</a>
        </c:otherwise>
    </c:choose>
</div>
```

### 4.3 商品状态显示


```jsp
<!-- 电商网站商品状态展示 -->
<div class="product-status">
    <c:choose>
        <c:when test="${product.stock > 10}">
            <span class="in-stock">现货充足</span>
            <button class="buy-btn">立即购买</button>
        </c:when>
        <c:when test="${product.stock > 0}">
            <span class="low-stock">库存紧张，仅剩${product.stock}件</span>
            <button class="buy-btn">赶紧下单</button>
        </c:when>
        <c:when test="${product.status == 'pre_sale'}">
            <span class="pre-sale">预售中</span>
            <button class="pre-order-btn">预订</button>
        </c:when>
        <c:otherwise>
            <span class="out-of-stock">暂时缺货</span>
            <button class="notify-btn">到货通知</button>
        </c:otherwise>
    </c:choose>
</div>
```

### 4.4 时间段问候语


```jsp
<%-- 根据当前时间显示不同问候语 --%>
<div class="greeting">
    <%-- 假设后台传来当前小时数 --%>
    <c:choose>
        <c:when test="${currentHour >= 6 && currentHour < 12}">
            <h2>早上好！☀️</h2>
            <p>美好的一天开始了</p>
        </c:when>
        <c:when test="${currentHour >= 12 && currentHour < 18}">
            <h2>下午好！🌞</h2>
            <p>午后时光，继续加油</p>
        </c:when>
        <c:when test="${currentHour >= 18 && currentHour < 22}">
            <h2>晚上好！🌙</h2>
            <p>辛苦了一天，放松一下</p>
        </c:when>
        <c:otherwise>
            <h2>夜深了！🌃</h2>
            <p>早点休息，注意身体</p>
        </c:otherwise>
    </c:choose>
</div>
```

---

## 5. ⚖️ 与传统if-else的对比


### 5.1 可读性对比


**传统多个c:if方式**：
```jsp
<!-- 代码冗长，条件重复 -->
<c:if test="${weather == 'sunny'}">
    <p>今天天气晴朗，适合出游 ☀️</p>
</c:if>
<c:if test="${weather == 'rainy'}">
    <p>今天下雨，记得带伞 🌧️</p>
</c:if>
<c:if test="${weather == 'cloudy'}">
    <p>今天多云，温度适宜 ☁️</p>
</c:if>
<c:if test="${weather != 'sunny' && weather != 'rainy' && weather != 'cloudy'}">
    <p>天气情况未知</p>
</c:if>
```

**使用choose标签**：
```jsp
<!-- 结构清晰，逻辑一目了然 -->
<c:choose>
    <c:when test="${weather == 'sunny'}">
        <p>今天天气晴朗，适合出游 ☀️</p>
    </c:when>
    <c:when test="${weather == 'rainy'}">
        <p>今天下雨，记得带伞 🌧️</p>
    </c:when>
    <c:when test="${weather == 'cloudy'}">
        <p>今天多云，温度适宜 ☁️</p>
    </c:when>
    <c:otherwise>
        <p>天气情况未知</p>
    </c:otherwise>
</c:choose>
```

### 5.2 性能对比分析


```
执行效率对比图示：

多个c:if方式：
条件1 → 判断 ✓ 执行
条件2 → 判断 ✓ 执行  （即使条件1已经满足，仍然会判断）
条件3 → 判断 ✓ 执行
条件4 → 判断 ✓ 执行

c:choose方式：
条件1 → 判断 ✓ 执行 → 结束  （找到匹配就停止）
条件2 → 不执行
条件3 → 不执行
条件4 → 不执行
```

**性能优势**：
- ✅ **短路执行**：找到匹配条件就停止，不继续判断
- ✅ **资源节约**：减少不必要的条件计算
- ✅ **响应更快**：特别是在条件很多的情况下

### 5.3 维护性对比


| 对比方面 | 多个c:if | c:choose标签 |
|---------|----------|-------------|
| **代码结构** | 平铺式，难以看出关联性 | 层次化，逻辑关系清晰 |
| **修改条件** | 需要修改多处，容易遗漏 | 结构化修改，不易出错 |
| **添加分支** | 容易忘记排他性检查 | 天然的排他性逻辑 |
| **调试难度** | 需要逐个检查每个if | 按分支逐一排查 |

---

## 6. ⚠️ 常见问题与最佳实践


### 6.1 常见错误及解决方案


**❌ 错误1：在choose标签内直接放内容**
```jsp
<!-- 错误示例 -->
<c:choose>
    这里不能放文本内容！
    <c:when test="${score >= 90}">优秀</c:when>
    <c:otherwise>其他</c:otherwise>
</c:choose>
```

**✅ 正确做法**：
```jsp
<c:choose>
    <c:when test="${score >= 90}">优秀</c:when>
    <c:otherwise>其他</c:otherwise>
</c:choose>
```

**❌ 错误2：otherwise放在when前面**
```jsp
<!-- 错误示例 -->
<c:choose>
    <c:otherwise>默认情况</c:otherwise>
    <c:when test="${score >= 90}">优秀</c:when>
</c:choose>
```

**✅ 正确做法**：
```jsp
<c:choose>
    <c:when test="${score >= 90}">优秀</c:when>
    <c:otherwise>默认情况</c:otherwise>
</c:choose>
```

**❌ 错误3：when标签缺少test属性**
```jsp
<!-- 错误示例 -->
<c:when>这样写是错误的</c:when>
```

**✅ 正确做法**：
```jsp
<c:when test="${condition}">正确的写法</c:when>
```

### 6.2 最佳实践建议


**🔸 条件设计原则**：
- **互斥性**：确保各个when条件互不重叠
- **完整性**：考虑所有可能的情况，善用otherwise
- **顺序性**：把最可能满足的条件放在前面

**🔸 代码组织建议**：
```jsp
<!-- 推荐的代码结构 -->
<c:choose>
    <%-- 最常见的情况放在最前面 --%>
    <c:when test="${mostCommonCondition}">
        <!-- 内容 -->
    </c:when>
    
    <%-- 按重要性或频率排序 --%>
    <c:when test="${secondCondition}">
        <!-- 内容 -->
    </c:when>
    
    <%-- 异常或特殊情况 --%>
    <c:when test="${specialCondition}">
        <!-- 内容 -->
    </c:when>
    
    <%-- 兜底处理，确保逻辑完整 --%>
    <c:otherwise>
        <!-- 默认内容 -->
    </c:otherwise>
</c:choose>
```

**🔸 性能优化技巧**：
- 把最可能成立的条件放在前面
- 避免在test属性中使用复杂的方法调用
- 合理使用EL表达式的内置对象

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的基本概念


```
🔸 c:choose：多分支判断的容器标签
🔸 c:when：具体的条件分支，必须有test属性
🔸 c:otherwise：默认分支，所有条件都不满足时执行
🔸 执行特点：从上到下检查，找到匹配就停止
🔸 嵌套规则：choose内只能包含when和otherwise
```

### 7.2 关键理解要点


**🔹 什么时候使用choose**：
```
使用choose的场景：
- 需要处理多个互斥的条件
- 替代复杂的if-else if-else逻辑
- 提高代码的可读性和维护性
- 优化页面渲染性能

不需要choose的场景：
- 只有一个判断条件（用c:if即可）
- 多个条件可能同时成立（用多个c:if）
- 条件非常简单（直接用EL表达式）
```

**🔹 执行逻辑理解**：
```
执行流程：
1. 进入c:choose标签
2. 从第一个c:when开始，依次检查test条件
3. 找到第一个为true的条件，执行对应内容
4. 执行完毕后，直接跳出整个choose结构
5. 如果所有when都不满足，执行c:otherwise内容
6. 如果没有otherwise，就什么都不执行
```

**🔹 与其他标签的配合**：
```jsp
<!-- choose可以与其他JSTL标签配合使用 -->
<c:forEach items="${products}" var="product">
    <div class="product-item">
        <h3>${product.name}</h3>
        <c:choose>
            <c:when test="${product.discount > 0}">
                <p class="price">
                    原价：<del>${product.originalPrice}</del>
                    现价：${product.finalPrice}
                </p>
            </c:when>
            <c:otherwise>
                <p class="price">${product.originalPrice}</p>
            </c:otherwise>
        </c:choose>
    </div>
</c:forEach>
```

### 7.3 实际应用价值


**📊 应用场景总结**：
- **用户界面**：根据用户状态显示不同内容
- **数据展示**：根据数据值显示不同样式或信息
- **权限控制**：根据用户角色显示不同操作
- **状态处理**：根据业务状态显示相应提示

**💡 学习要点**：
- choose标签是JSTL中实现复杂条件逻辑的重要工具
- 掌握好choose标签能让JSP页面的逻辑更加清晰
- 合理使用能提高代码质量和页面性能
- 是从静态页面向动态页面过渡的关键技术

**核心记忆口诀**：
```
choose包裹做容器，when条件来判断
test属性必须有，otherwise做兜底
从上往下逐个查，找到匹配就停下
互斥条件理念清，页面逻辑更分明
```