---
title: 1、JSTL概述与环境配置
---
## 📚 目录

1. [JSTL标签库概述](#1-JSTL标签库概述)
2. [JSTL标签库分类详解](#2-JSTL标签库分类详解)
3. [JSTL环境配置与导入](#3-JSTL环境配置与导入)
4. [核心标签库core基础使用](#4-核心标签库core基础使用)
5. [JSTL与EL表达式的配合](#5-JSTL与EL表达式的配合)
6. [核心要点总结](#6-核心要点总结)

---

## 1. 🏷️ JSTL标签库概述


### 1.1 什么是JSTL标签库


**🔸 JSTL简单理解**
```
JSTL = JSP Standard Tag Library
翻译：JSP标准标签库
```

> 💡 **通俗解释**：JSTL就像是JSP页面中的"工具箱"，里面装着各种现成的标签工具，让我们在JSP页面中处理数据变得更简单、更方便。

**为什么需要JSTL？**
```
传统JSP写法：
<%
  List<User> users = (List<User>)request.getAttribute("users");
  for(User user : users) {
    out.println(user.getName());
  }
%>

使用JSTL后：
<c:forEach var="user" items="${users}">
  ${user.name}
</c:forEach>
```

**🎯 JSTL的核心价值**
- ✅ **减少Java代码**：在JSP页面中少写甚至不写Java代码
- ✅ **提高可读性**：标签比Java代码更直观易懂
- ✅ **降低维护成本**：前端人员也能看懂和修改
- ✅ **标准化**：Sun公司制定的官方标准

### 1.2 JSTL解决的实际问题


**🔸 传统JSP开发的痛点**
```
问题1：页面中Java代码过多
<% 
  if(user != null && user.getAge() > 18) {
    out.println("成年用户");
  } else {
    out.println("未成年用户");
  }
%>

问题2：逻辑判断复杂
<%
  String status = user.getStatus();
  if("active".equals(status)) {
    out.println("激活");
  } else if("inactive".equals(status)) {
    out.println("未激活");  
  } else {
    out.println("未知状态");
  }
%>
```

**🌟 JSTL的解决方案**
```html
<!-- 简洁的条件判断 -->
<c:if test="${user.age > 18}">成年用户</c:if>
<c:if test="${user.age <= 18}">未成年用户</c:if>

<!-- 清晰的多条件选择 -->
<c:choose>
  <c:when test="${user.status == 'active'}">激活</c:when>
  <c:when test="${user.status == 'inactive'}">未激活</c:when>
  <c:otherwise>未知状态</c:otherwise>
</c:choose>
```

---

## 2. 📋 JSTL标签库分类详解


### 2.1 JSTL标签库的组成


**🏗️ JSTL标签库架构图**
```
JSTL标准标签库
├── Core标签库 (核心)
│   ├── 变量操作 <c:set>、<c:out>
│   ├── 条件判断 <c:if>、<c:choose>
│   └── 循环遍历 <c:forEach>
├── Format标签库 (格式化)
│   ├── 数字格式化 <fmt:formatNumber>
│   ├── 日期格式化 <fmt:formatDate>
│   └── 国际化 <fmt:message>
├── Functions标签库 (函数)
│   ├── 字符串函数 fn:length、fn:substring
│   ├── 集合函数 fn:contains、fn:indexOf
│   └── 其他实用函数
└── SQL标签库 (数据库)
    └── 数据库操作相关 (实际项目中很少用)
```

### 2.2 核心标签库 (core) 详解


**🔸 核心标签库是什么？**

> 💡 **核心标签库**：就是JSTL中最常用、最重要的标签集合，主要处理页面中的基本逻辑操作。

**核心标签分类**

| 标签类型 | **主要标签** | **作用说明** | **使用频率** |
|---------|-------------|-------------|-------------|
| 🔧 **变量操作** | `<c:set>` `<c:out>` | `设置和输出变量` | ⭐⭐⭐ |
| ❓ **条件判断** | `<c:if>` `<c:choose>` | `条件分支控制` | ⭐⭐⭐ |
| 🔄 **循环遍历** | `<c:forEach>` | `遍历集合或数组` | ⭐⭐⭐ |
| 🌐 **URL处理** | `<c:url>` `<c:import>` | `处理链接和导入` | ⭐⭐ |

### 2.3 格式化标签库 (fmt) 详解


**🔸 格式化标签库的作用**

> 💡 **格式化标签库**：专门处理数据显示格式的工具，比如日期要显示成什么样子、数字要保留几位小数等。

**常用格式化标签**
```html
<!-- 日期格式化 -->
<fmt:formatDate value="${user.createTime}" pattern="yyyy-MM-dd HH:mm:ss"/>

<!-- 数字格式化 -->  
<fmt:formatNumber value="${product.price}" pattern="0.00"/>

<!-- 国际化消息 -->
<fmt:message key="welcome.message"/>
```

### 2.4 函数标签库 (functions) 详解


**🔸 函数标签库的特点**

> 💡 **函数标签库**：提供各种实用的字符串和集合处理函数，在EL表达式中使用。

**常用函数示例**
```html
<!-- 字符串长度 -->
${fn:length(user.name)}

<!-- 字符串包含判断 -->
<c:if test="${fn:contains(user.email, '@')}">
  邮箱格式正确
</c:if>

<!-- 集合大小 -->
总共有 ${fn:length(userList)} 个用户
```

---

## 3. ⚙️ JSTL环境配置与导入


### 3.1 Maven项目配置


**🔸 添加JSTL依赖**

> ⚠️ **注意**：在Maven项目中，需要先添加JSTL的jar包依赖，就像装软件前要先下载安装包一样。

```xml
<!-- pom.xml文件中添加 -->
<dependencies>
  <!-- JSTL标签库依赖 -->
  <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
  </dependency>
  
  <!-- 如果是较新的项目，也可以使用 -->
  <dependency>
    <groupId>org.apache.taglibs</groupId>
    <artifactId>taglibs-standard-impl</artifactId>
    <version>1.2.5</version>
  </dependency>
</dependencies>
```

**📝 版本选择建议**
- ✅ **JSTL 1.2**：最稳定版本，推荐使用
- ⚠️ **JSTL 1.0/1.1**：版本较老，不建议
- 🔄 **TagLibs版本**：Apache维护的版本，功能相同

### 3.2 传统Web项目配置


**🔸 手动导入jar包**

如果不是Maven项目，需要手动下载jar包：

```
需要下载的jar包：
├── jstl.jar          (JSTL核心包)
├── standard.jar      (JSTL实现包)
└── 放入WEB-INF/lib目录下
```

> 💡 **简单理解**：就像安装软件要把安装包放到指定文件夹一样，jar包要放到`WEB-INF/lib`文件夹中。

### 3.3 JSP页面中的taglib指令


**🔸 声明要使用的标签库**

在JSP页面顶部添加taglib指令：

```jsp
<%-- 声明使用核心标签库 --%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%-- 声明使用格式化标签库 --%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<%-- 声明使用函数标签库 --%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
```

**🔍 taglib指令详解**
- **prefix**：标签前缀，相当于"别名"，可以自定义但建议用标准的
- **uri**：标签库的唯一标识，告诉服务器要加载哪个标签库

> 💡 **类比理解**：taglib指令就像在Java中的`import`语句，告诉页面要使用哪些工具。

### 3.4 完整的JSP页面示例


```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%-- 导入JSTL标签库 --%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<html>
<head>
    <title>JSTL标签库测试</title>
</head>
<body>
    <h2>JSTL基础使用演示</h2>
    
    <%-- 设置变量 --%>
    <c:set var="username" value="张三"/>
    
    <%-- 输出变量 --%>
    <p>用户名：<c:out value="${username}"/></p>
    
    <%-- 条件判断 --%>
    <c:if test="${not empty username}">
        <p>用户已登录</p>
    </c:if>
</body>
</html>
```

---

## 4. 🛠️ 核心标签库core基础使用


### 4.1 变量操作标签


**🔸 <c:set> 设置变量**

> 💡 **作用说明**：`<c:set>`标签就像在页面中定义一个变量，可以存储数据供后面使用。

```jsp
<%-- 基本用法：设置字符串 --%>
<c:set var="message" value="欢迎访问"/>

<%-- 设置数字 --%>
<c:set var="count" value="100"/>

<%-- 设置对象属性 --%>
<c:set target="${user}" property="name" value="李四"/>
```

**📋 <c:set>标签属性说明**

| 属性名 | **必需** | **说明** | **示例** |
|-------|---------|---------|---------|
| `var` | 否 | `变量名` | `var="username"` |
| `value` | 否 | `变量值` | `value="张三"` |
| `target` | 否 | `目标对象` | `target="${user}"` |
| `property` | 否 | `对象属性` | `property="name"` |
| `scope` | 否 | `变量作用域` | `scope="session"` |

**🔸 <c:out> 输出变量**

> 💡 **作用说明**：`<c:out>`标签用来安全地输出变量值，自动处理HTML转义。

```jsp
<%-- 基本输出 --%>
<c:out value="${username}"/>

<%-- 带默认值的输出 --%>
<c:out value="${user.email}" default="邮箱未设置"/>

<%-- HTML转义输出 --%>
<c:out value="${htmlContent}" escapeXml="true"/>
```

### 4.2 条件判断标签


**🔸 <c:if> 简单条件判断**

```jsp
<%-- 简单条件 --%>
<c:if test="${user.age >= 18}">
    <span style="color: green;">成年用户</span>
</c:if>

<%-- 复杂条件 --%>
<c:if test="${not empty user and user.status == 'active'}">
    <p>用户状态：正常</p>
</c:if>
```

**🔸 <c:choose> 多条件选择**

> 💡 **类比理解**：`<c:choose>`就像Java中的if-else if-else语句，或者switch语句。

```jsp
<c:choose>
    <c:when test="${user.level == 'VIP'}">
        <span style="color: gold;">VIP用户</span>
    </c:when>
    <c:when test="${user.level == 'PREMIUM'}">
        <span style="color: silver;">高级用户</span>
    </c:when>
    <c:otherwise>
        <span>普通用户</span>
    </c:otherwise>
</c:choose>
```

### 4.3 循环遍历标签


**🔸 <c:forEach> 集合遍历**

> 💡 **作用说明**：`<c:forEach>`就像Java中的for循环，用来遍历数组、List、Map等集合。

```jsp
<%-- 遍历List集合 --%>
<c:forEach var="user" items="${userList}">
    <tr>
        <td>${user.id}</td>
        <td>${user.name}</td>
        <td>${user.email}</td>
    </tr>
</c:forEach>

<%-- 带索引的遍历 --%>
<c:forEach var="item" items="${products}" varStatus="status">
    <p>第${status.index + 1}个商品：${item.name}</p>
</c:forEach>
```

**📊 varStatus状态变量属性**

| 属性名 | **说明** | **示例用法** |
|-------|---------|-------------|
| `index` | `当前索引(从0开始)` | `${status.index}` |
| `count` | `当前计数(从1开始)` | `${status.count}` |
| `first` | `是否是第一个` | `${status.first}` |
| `last` | `是否是最后一个` | `${status.last}` |

---

## 5. 🔗 JSTL与EL表达式的配合


### 5.1 完美组合的威力


> 💡 **核心理解**：JSTL标签负责逻辑控制，EL表达式负责数据获取，两者配合使用威力无穷。

**🔸 数据获取与逻辑处理**
```jsp
<%-- EL表达式获取数据，JSTL处理逻辑 --%>
<c:if test="${not empty sessionScope.user}">
    欢迎回来，<c:out value="${sessionScope.user.name}"/>！
</c:if>

<%-- 遍历时结合条件判断 --%>
<c:forEach var="order" items="${orderList}">
    <c:choose>
        <c:when test="${order.status == 'PAID'}">
            <span style="color: green;">已付款</span>
        </c:when>
        <c:when test="${order.status == 'PENDING'}">
            <span style="color: orange;">待付款</span>
        </c:when>
        <c:otherwise>
            <span style="color: red;">已取消</span>
        </c:otherwise>
    </c:choose>
</c:forEach>
```

### 5.2 实际应用场景示例


**🔸 用户列表页面**
```jsp
<h3>用户管理</h3>
<c:choose>
    <c:when test="${empty userList}">
        <p>暂无用户数据</p>
    </c:when>
    <c:otherwise>
        <table border="1">
            <tr>
                <th>序号</th>
                <th>姓名</th>
                <th>邮箱</th>
                <th>状态</th>
            </tr>
            <c:forEach var="user" items="${userList}" varStatus="vs">
                <tr>
                    <td>${vs.count}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>
                        <c:if test="${user.active}">
                            <span style="color: green;">活跃</span>
                        </c:if>
                        <c:if test="${not user.active}">
                            <span style="color: red;">禁用</span>
                        </c:if>
                    </td>
                </tr>
            </c:forEach>
        </table>
    </c:otherwise>
</c:choose>
```

---

## 6. 📋 核心要点总结


### 6.1 必须掌握的基本概念


```
🔸 JSTL本质：JSP标准标签库，减少页面中的Java代码
🔸 核心价值：提高代码可读性，降低维护成本
🔸 标签分类：core核心库、fmt格式化库、functions函数库
🔸 环境配置：Maven依赖 + taglib指令声明
🔸 核心标签：<c:set>、<c:out>、<c:if>、<c:choose>、<c:forEach>
```

### 6.2 关键理解要点


**🔹 JSTL的学习策略**
```
学习顺序：
1. 先理解JSTL的作用和价值
2. 掌握环境配置和基本语法
3. 熟练使用core核心标签
4. 结合EL表达式进行实战练习
5. 根据需要学习fmt和functions
```

**🔹 使用JSTL的最佳实践**
```
推荐做法：
✅ 页面逻辑用JSTL标签处理
✅ 数据获取用EL表达式
✅ 复杂业务逻辑放在Servlet中
✅ 保持JSP页面简洁清晰

避免做法：
❌ 在JSP中写大量Java代码
❌ 过度复杂的嵌套标签
❌ 在标签中处理复杂业务逻辑
```

**🔹 核心标签使用场景**
- **<c:set>**：设置页面变量，临时存储数据
- **<c:out>**：安全输出内容，防止XSS攻击
- **<c:if>**：简单条件判断，显示隐藏内容
- **<c:choose>**：多分支选择，替代复杂if-else
- **<c:forEach>**：遍历集合，生成列表和表格

### 6.3 实际应用价值


- **提高开发效率**：减少重复的Java代码编写
- **增强代码可维护性**：前端人员也能理解和修改
- **提升页面安全性**：自动处理HTML转义
- **标准化开发**：遵循Java EE规范，团队协作更顺畅

**核心记忆**：
- JSTL是JSP的好帮手，让页面更简洁
- 核心标签解决基本逻辑，配合EL威力大
- 环境配置要做好，taglib指令不能少
- 实战多练习，熟能生巧效果佳