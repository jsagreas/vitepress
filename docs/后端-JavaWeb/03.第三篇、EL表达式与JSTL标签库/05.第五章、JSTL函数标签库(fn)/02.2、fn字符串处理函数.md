---
title: 2、fn字符串处理函数
---
## 📚 目录

1. [JSTL函数标签库概述](#1-jstl函数标签库概述)
2. [字符串截取函数](#2-字符串截取函数)
3. [字符串查找替换函数](#3-字符串查找替换函数)
4. [字符串分割连接函数](#4-字符串分割连接函数)
5. [大小写转换函数](#5-大小写转换函数)
6. [综合应用实例](#6-综合应用实例)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🔧 JSTL函数标签库概述


### 1.1 什么是fn标签库


**简单理解**：fn标签库就像是JSP页面中的"工具箱"，专门用来处理字符串操作

```
想象一下：
你有一段文字 "Hello World"
- 想要截取其中一部分 → 用fn:substring
- 想要替换某些字符 → 用fn:replace  
- 想要转换大小写 → 用fn:toLowerCase
- 想要分割成多段 → 用fn:split

就像Word软件的文本处理功能一样！
```

### 1.2 为什么需要fn标签库


**解决的问题**：
- **❌ 之前**：在JSP中处理字符串很麻烦，需要写Java代码
- **✅ 现在**：用fn标签，直接在页面上处理字符串

**使用场景举例**：
```
真实场景：
- 显示用户姓名，只显示姓氏：张三 → 张*
- 处理文章标题过长：很长很长的标题 → 很长很长...
- 格式化电话号码：13812345678 → 138****5678
- 处理用户输入的文本内容
```

### 1.3 如何引入fn标签库


**第一步**：在JSP页面顶部添加taglib指令

```jsp
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
```

**完整示例**：
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<html>
<head>
    <title>JSTL函数示例</title>
</head>
<body>
    <!-- 现在可以使用fn:xxx函数了 -->
</body>
</html>
```

---

## 2. ✂️ 字符串截取函数


### 2.1 fn:substring - 基础字符串截取


**作用**：从指定位置开始截取字符串的一部分

**语法格式**：
```jsp
${fn:substring(原字符串, 开始位置, 结束位置)}
```

**🎯 通俗解释**：
```
想象字符串是一串珠子：H-e-l-l-o  W-o-r-l-d
位置编号从0开始：      0 1 2 3 4 5 6 7 8 9

fn:substring("Hello World", 0, 5) 
就是取第0个到第5个位置之前的珠子 → "Hello"
```

**基础示例**：
```jsp
<c:set var="text" value="Hello World" />

<!-- 截取前5个字符 -->
<p>前5个字符：${fn:substring(text, 0, 5)}</p>
<!-- 输出：Hello -->

<!-- 截取后5个字符 -->  
<p>后5个字符：${fn:substring(text, 6, 11)}</p>
<!-- 输出：World -->

<!-- 从第3个位置开始截取 -->
<p>从位置3开始：${fn:substring(text, 3, fn:length(text))}</p>
<!-- 输出：lo World -->
```

### 2.2 fn:substringBefore - 指定字符前截取


**作用**：截取指定字符或字符串**之前**的内容

**语法格式**：
```jsp
${fn:substringBefore(原字符串, 分隔符)}
```

**🎯 实用场景**：
```jsp
<!-- 从邮箱中提取用户名 -->
<c:set var="email" value="zhangsan@qq.com" />
<p>用户名：${fn:substringBefore(email, '@')}</p>
<!-- 输出：zhangsan -->

<!-- 从文件路径中提取目录 -->
<c:set var="filePath" value="/home/user/documents/file.txt" />
<p>目录：${fn:substringBefore(filePath, 'file.txt')}</p>
<!-- 输出：/home/user/documents/ -->

<!-- 提取姓氏 -->
<c:set var="fullName" value="张三丰" />
<p>姓氏：${fn:substringBefore(fullName, '三')}</p>
<!-- 输出：张 -->
```

### 2.3 fn:substringAfter - 指定字符后截取


**作用**：截取指定字符或字符串**之后**的内容

**语法格式**：
```jsp
${fn:substringAfter(原字符串, 分隔符)}
```

**🎯 实用场景**：
```jsp
<!-- 从邮箱中提取域名 -->
<c:set var="email" value="zhangsan@qq.com" />
<p>邮箱域名：${fn:substringAfter(email, '@')}</p>
<!-- 输出：qq.com -->

<!-- 从URL中提取参数 -->
<c:set var="url" value="page.jsp?id=123&name=test" />
<p>参数部分：${fn:substringAfter(url, '?')}</p>
<!-- 输出：id=123&name=test -->

<!-- 提取文件扩展名 -->
<c:set var="fileName" value="document.pdf" />
<p>文件类型：${fn:substringAfter(fileName, '.')}</p>
<!-- 输出：pdf -->
```

---

## 3. 🔍 字符串查找替换函数


### 3.1 fn:replace - 字符串替换


**作用**：将字符串中的指定内容替换为新内容

**语法格式**：
```jsp
${fn:replace(原字符串, 要替换的内容, 新内容)}
```

**🎯 生活场景类比**：
```
就像手机短信的敏感词替换：
"你个笨蛋" → "你个**"
把"笨蛋"替换成"**"
```

**实用示例**：
```jsp
<!-- 敏感词过滤 -->
<c:set var="comment" value="这个产品真的很垃圾，不建议购买" />
<p>过滤后：${fn:replace(comment, '垃圾', '**')}</p>
<!-- 输出：这个产品真的很**，不建议购买 -->

<!-- 格式化电话号码 -->
<c:set var="phone" value="13812345678" />
<p>隐藏手机号：${fn:replace(fn:substring(phone, 0, 3), fn:substring(phone, 3, 7), '****')}${fn:substring(phone, 7, 11)}</p>
<!-- 输出：138****5678 -->

<!-- HTML标签清理 -->
<c:set var="htmlText" value="<p>这是一段<strong>重要</strong>的文字</p>" />
<p>纯文本：${fn:replace(fn:replace(htmlText, '<p>', ''), '</p>', '')}</p>
```

### 3.2 替换多个内容的技巧


**连续替换**：
```jsp
<c:set var="text" value="Hello World! Welcome to Java World!" />

<!-- 方法1：嵌套替换 -->
<c:set var="result" value="${fn:replace(fn:replace(text, 'World', '世界'), 'Hello', '你好')}" />
<p>替换结果：${result}</p>
<!-- 输出：你好 世界! Welcome to Java 世界! -->

<!-- 方法2：逐步替换 -->
<c:set var="step1" value="${fn:replace(text, 'World', '世界')}" />
<c:set var="step2" value="${fn:replace(step1, 'Hello', '你好')}" />
<c:set var="final" value="${fn:replace(step2, 'Welcome', '欢迎')}" />
<p>最终结果：${final}</p>
```

---

## 4. 📝 字符串分割连接函数


### 4.1 fn:split - 字符串分割


**作用**：将一个完整的字符串按照指定分隔符分割成数组

**语法格式**：
```jsp
${fn:split(原字符串, 分隔符)}
```

**🎯 生活类比**：
```
就像切蛋糕一样：
"苹果,香蕉,橙子" 用逗号分割
切成三块：["苹果", "香蕉", "橙子"]
```

**基础示例**：
```jsp
<!-- 处理标签列表 -->
<c:set var="tags" value="Java,Spring,MySQL,Redis" />
<c:set var="tagArray" value="${fn:split(tags, ',')}" />

<h3>技能标签：</h3>
<ul>
    <c:forEach var="tag" items="${tagArray}">
        <li>${tag}</li>
    </c:forEach>
</ul>
<!-- 输出：
技能标签：
• Java
• Spring  
• MySQL
• Redis
-->
```

**实用场景**：
```jsp
<!-- 处理路径 -->
<c:set var="path" value="/user/profile/settings" />
<c:set var="pathParts" value="${fn:split(path, '/')}" />

<nav>
    <c:forEach var="part" items="${pathParts}" varStatus="status">
        <c:if test="${not empty part}">
            <a href="#">${part}</a>
            <c:if test="${not status.last}"> > </c:if>
        </c:if>
    </c:forEach>
</nav>
<!-- 输出：user > profile > settings -->

<!-- 处理多选值 -->
<c:set var="hobbies" value="读书;运动;音乐;旅游" />
<c:set var="hobbyList" value="${fn:split(hobbies, ';')}" />

<p>您的爱好：</p>
<c:forEach var="hobby" items="${hobbyList}" varStatus="status">
    <span class="tag">${hobby}</span>
    <c:if test="${not status.last}">、</c:if>
</c:forEach>
```

### 4.2 fn:join - 字符串连接


**作用**：将数组中的元素用指定分隔符连接成一个字符串

**语法格式**：
```jsp
${fn:join(数组, 分隔符)}
```

**🎯 理解要点**：
```
fn:join 是 fn:split 的反向操作
split: "a,b,c" → ["a", "b", "c"]  (一个变多个)
join:  ["a", "b", "c"] → "a,b,c"  (多个变一个)
```

**实用示例**：
```jsp
<!-- 将数组连接成字符串 -->
<c:set var="cities" value="${['北京', '上海', '广州', '深圳']}" />
<p>热门城市：${fn:join(cities, ' | ')}</p>
<!-- 输出：热门城市：北京 | 上海 | 广州 | 深圳 -->

<!-- 处理表单多选值 -->
<c:set var="selectedOptions" value="${['option1', 'option3', 'option5']}" />
<input type="hidden" name="options" value="${fn:join(selectedOptions, ',')}" />
<!-- 生成：<input type="hidden" name="options" value="option1,option3,option5" /> -->
```

---

## 5. 🔤 大小写转换函数


### 5.1 fn:toLowerCase - 转换为小写


**作用**：将字符串中的所有大写字母转换为小写

**语法格式**：
```jsp
${fn:toLowerCase(原字符串)}
```

**实用场景**：
```jsp
<!-- 用户输入标准化 -->
<c:set var="userInput" value="HELLO World" />
<p>标准化后：${fn:toLowerCase(userInput)}</p>
<!-- 输出：hello world -->

<!-- 邮箱地址标准化 -->
<c:set var="email" value="ZhangSan@QQ.COM" />  
<p>标准邮箱：${fn:toLowerCase(email)}</p>
<!-- 输出：zhangsan@qq.com -->

<!-- URL路径处理 -->
<c:set var="urlPath" value="/User/Profile/SETTINGS" />
<p>标准路径：${fn:toLowerCase(urlPath)}</p>
<!-- 输出：/user/profile/settings -->
```

### 5.2 fn:toUpperCase - 转换为大写


**作用**：将字符串中的所有小写字母转换为大写

**语法格式**：
```jsp
${fn:toUpperCase(原字符串)}
```

**实用场景**：
```jsp
<!-- 强调显示 -->
<c:set var="alertMsg" value="warning: system maintenance" />
<div class="alert">${fn:toUpperCase(alertMsg)}</div>
<!-- 输出：WARNING: SYSTEM MAINTENANCE -->

<!-- 代码常量显示 -->
<c:set var="configKey" value="database.url" />
<p>配置项：${fn:toUpperCase(fn:replace(configKey, '.', '_'))}</p>
<!-- 输出：DATABASE_URL -->

<!-- 用户名显示 -->
<c:set var="username" value="admin" />
<h1>欢迎 ${fn:toUpperCase(username)} 管理员</h1>
<!-- 输出：欢迎 ADMIN 管理员 -->
```

### 5.3 大小写转换的组合应用


**首字母大写效果**：
```jsp
<c:set var="name" value="zhang san" />
<c:set var="words" value="${fn:split(name, ' ')}" />

<p>格式化姓名：
    <c:forEach var="word" items="${words}" varStatus="status">
        ${fn:toUpperCase(fn:substring(word, 0, 1))}${fn:toLowerCase(fn:substring(word, 1, fn:length(word)))}
        <c:if test="${not status.last}"> </c:if>
    </c:forEach>
</p>
<!-- 输出：Zhang San -->
```

---

## 6. 🎯 综合应用实例


### 6.1 用户信息格式化显示


```jsp
<!-- 用户数据 -->
<c:set var="user" scope="page">
    <jsp:setProperty name="fullName" value="zhang san feng" />
    <jsp:setProperty name="email" value="ZSF@WUDANG.ORG" />
    <jsp:setProperty name="skills" value="太极拳,内功心法,医术,书法" />
    <jsp:setProperty name="bio" value="武当派创始人，一代<strong>宗师</strong>级人物。" />
</c:set>

<div class="user-profile">
    <!-- 格式化姓名显示 -->
    <h2>
        <c:set var="nameWords" value="${fn:split(user.fullName, ' ')}" />
        <c:forEach var="word" items="${nameWords}" varStatus="status">
            ${fn:toUpperCase(fn:substring(word, 0, 1))}${fn:substring(word, 1, fn:length(word))}
            <c:if test="${not status.last}"> </c:if>
        </c:forEach>
    </h2>
    
    <!-- 邮箱显示（隐藏用户名部分） -->
    <p>邮箱：${fn:substringBefore(fn:toLowerCase(user.email), '@')}***@${fn:substringAfter(user.email, '@')}</p>
    
    <!-- 技能标签显示 -->
    <div class="skills">
        <span>专长：</span>
        <c:forEach var="skill" items="${fn:split(user.skills, ',')}" varStatus="status">
            <span class="skill-tag">${skill}</span>
            <c:if test="${not status.last}">、</c:if>
        </c:forEach>
    </div>
    
    <!-- 个人简介（清理HTML标签） -->
    <p class="bio">
        简介：${fn:replace(fn:replace(user.bio, '<strong>', ''), '</strong>', '')}
    </p>
</div>
```

### 6.2 文章内容处理系统


```jsp
<c:set var="article" scope="page">
    <jsp:setProperty name="title" value="JSTL函数标签库详细教程 - 完整版本教学指南" />
    <jsp:setProperty name="content" value="本文详细介绍了JSTL函数标签库的使用方法。包含了字符串处理、数组操作等多个方面的内容。希望对大家学习JavaWeb开发有所帮助！" />
    <jsp:setProperty name="tags" value="JSTL;JavaWeb;标签库;教程" />
</c:set>

<article class="post">
    <!-- 标题处理：过长截断 -->
    <h1 title="${article.title}">
        <c:choose>
            <c:when test="${fn:length(article.title) > 30}">
                ${fn:substring(article.title, 0, 30)}...
            </c:when>
            <c:otherwise>
                ${article.title}
            </c:otherwise>
        </c:choose>
    </h1>
    
    <!-- 内容摘要 -->
    <div class="summary">
        <c:choose>
            <c:when test="${fn:length(article.content) > 100}">
                <p>${fn:substring(article.content, 0, 100)}...</p>
                <a href="#" class="read-more">阅读全文</a>
            </c:when>
            <c:otherwise>
                <p>${article.content}</p>
            </c:otherwise>
        </c:choose>
    </div>
    
    <!-- 标签显示 -->
    <div class="tags">
        <c:forEach var="tag" items="${fn:split(article.tags, ';')}">
            <a href="tag.jsp?name=${fn:toLowerCase(tag)}" class="tag">
                #${tag}
            </a>
        </c:forEach>
    </div>
</article>
```

### 6.3 数据验证与格式化


```jsp
<!-- 表单数据处理 -->
<c:set var="formData" scope="request">
    <jsp:setProperty name="phone" value=" 138-1234-5678 " />
    <jsp:setProperty name="idCard" value="110101199001011234" />
    <jsp:setProperty name="address" value="北京市  朝阳区   某某街道123号" />
</c:set>

<div class="form-data">
    <!-- 手机号码格式化 -->
    <c:set var="cleanPhone" value="${fn:replace(fn:replace(fn:trim(formData.phone), '-', ''), ' ', '')}" />
    <p>手机号码：${fn:substring(cleanPhone, 0, 3)}****${fn:substring(cleanPhone, 7, 11)}</p>
    
    <!-- 身份证脱敏显示 -->
    <c:set var="idCard" value="${formData.idCard}" />
    <p>身份证号：${fn:substring(idCard, 0, 6)}********${fn:substring(idCard, 14, 18)}</p>
    
    <!-- 地址格式化 -->
    <c:set var="cleanAddress" value="${fn:replace(fn:replace(formData.address, '  ', ' '), '   ', ' ')}" />
    <p>联系地址：${fn:trim(cleanAddress)}</p>
</div>
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的函数


| **函数名** | **作用** | **常用场景** | **记忆要点** |
|-----------|---------|-------------|-------------|
| **fn:substring** | `字符串截取` | 文本摘要、内容预览 | 指定开始和结束位置 |
| **fn:substringBefore** | `指定字符前截取` | 提取邮箱用户名、文件目录 | 找到分隔符，取前面 |
| **fn:substringAfter** | `指定字符后截取` | 提取邮箱域名、文件扩展名 | 找到分隔符，取后面 |
| **fn:replace** | `字符串替换` | 敏感词过滤、格式转换 | 旧内容换成新内容 |
| **fn:split** | `字符串分割` | 处理标签、多选值 | 一个变多个 |
| **fn:join** | `数组连接` | 生成参数字符串 | 多个变一个 |
| **fn:toLowerCase** | `转小写` | 标准化输入、比较 | 统一小写处理 |
| **fn:toUpperCase** | `转大写` | 强调显示、常量名 | 统一大写处理 |

### 7.2 使用技巧与注意事项


**🔸 组合使用技巧**：
```jsp
<!-- 多个函数嵌套使用 -->
${fn:toUpperCase(fn:substring(fn:trim(userInput), 0, 10))}

<!-- 逐步处理，提高可读性 -->
<c:set var="step1" value="${fn:trim(userInput)}" />
<c:set var="step2" value="${fn:substring(step1, 0, 10)}" />
<c:set var="result" value="${fn:toUpperCase(step2)}" />
```

**⚠️ 常见注意事项**：
```jsp
<!-- 1. 处理空值 -->
<c:if test="${not empty text}">
    ${fn:substring(text, 0, 10)}
</c:if>

<!-- 2. 边界检查 -->
<c:choose>
    <c:when test="${fn:length(text) > 10}">
        ${fn:substring(text, 0, 10)}...
    </c:when>
    <c:otherwise>
        ${text}
    </c:otherwise>
</c:choose>

<!-- 3. 特殊字符处理 -->
<c:set var="safeText" value="${fn:replace(fn:replace(text, '<', '&lt;'), '>', '&gt;')}" />
```

### 7.3 实际应用价值


**🎯 解决的实际问题**：
- **内容展示优化**：标题过长截断、摘要生成
- **数据脱敏处理**：手机号、身份证号隐藏
- **用户输入标准化**：大小写统一、格式清理
- **动态内容生成**：标签展示、导航生成
- **安全防护**：HTML标签过滤、特殊字符处理

**💡 学习建议**：
1. **多练习组合使用**：实际项目中很少单独使用一个函数
2. **注意边界情况**：空字符串、超长字符串的处理  
3. **关注用户体验**：合理的截断长度、友好的显示格式
4. **安全意识**：处理用户输入时要考虑安全过滤

**🔗 与其他技术的配合**：
- **配合EL表达式**：`${fn:xxx(data)}`
- **配合JSTL核心标签**：`<c:if>`, `<c:forEach>`  
- **配合CSS样式**：创建美观的显示效果
- **配合JavaScript**：前后端数据格式统一

**核心记忆口诀**：
> substring截取有始终，Before After找分隔  
> replace替换旧换新，split分割join连接  
> 大小写转换很简单，组合使用功能全