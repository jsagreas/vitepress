---
title: 1、fn字符串基础函数
---
## 📚 目录

1. [JSTL函数标签库基础认知](#1-JSTL函数标签库基础认知)
2. [字符串长度函数fn:length](#2-字符串长度函数fn:length)
3. [包含判断函数详解](#3-包含判断函数详解)
4. [开头结尾判断函数](#4-开头结尾判断函数)
5. [字符串查找与定位](#5-字符串查找与定位)
6. [去除空格函数fn:trim](#6-去除空格函数fn:trim)
7. [实际开发应用场景](#7-实际开发应用场景)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 JSTL函数标签库基础认知


### 1.1 什么是JSTL函数标签库

**💡 生活化理解**：就像我们手机里的计算器工具一样简单实用

```
想象一个场景：
你在写微信聊天时：
- 需要知道一段话有多少个字 → fn:length
- 想检查消息里是否包含某个词 → fn:contains  
- 需要删除文字前后的空格 → fn:trim

JSTL函数标签库就是JSP页面的"文字处理工具箱"
```

**🔸 fn标签库的核心特点**
```
简单易用：
- 不需要写复杂的Java代码
- 直接在JSP页面中调用
- 语法清晰，见名知意

功能实用：
- 专门处理字符串操作
- 解决页面常见需求
- 提高开发效率
```

### 1.2 如何引入fn标签库

**📋 引入步骤说明**

```jsp
<!-- 在JSP页面顶部添加这行代码 -->
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<!-- 
解释：
- prefix="fn" 表示我们用fn作为前缀
- 就像给工具起个简短的名字方便使用
- 引入后就可以使用fn:length、fn:contains等函数了
-->
```

**🌟 使用方式预览**
```
基本语法结构：
${fn:函数名(参数)}

常见用法示例：
${fn:length('Hello World')}     → 返回字符串长度
${fn:contains(text, 'Java')}    → 判断是否包含某个词
${fn:trim(message)}             → 去除前后空格
```

### 1.3 fn标签库 vs Java字符串方法对比

**📊 功能对应关系**

| **fn标签库函数** | **Java String方法** | **作用说明** |
|-----------------|-------------------|-------------|
| 🔸 **fn:length** | `str.length()` | `获取字符串长度` |
| 🔸 **fn:contains** | `str.contains()` | `检查是否包含子串` |
| 🔸 **fn:startsWith** | `str.startsWith()` | `检查是否以某字符开头` |
| 🔸 **fn:trim** | `str.trim()` | `去除前后空白字符` |

**💭 为什么要用fn标签库**
```
直观对比：

Java后端写法：
String message = "Hello World";
int length = message.length();
request.setAttribute("messageLength", length);

fn标签库写法：
${fn:length(message)}

优势：
✅ 代码更简洁
✅ 直接在页面使用
✅ 减少后端处理逻辑
✅ 前端人员也能理解
```

---

## 2. 📏 字符串长度函数fn:length


### 2.1 fn:length基础用法

**🎯 核心功能**：获取字符串、数组或集合的长度

```jsp
<!-- 最基础的用法 -->
用户名长度：${fn:length('张三')}
<!-- 输出：用户名长度：2 -->

<!-- 配合EL表达式使用 -->
<c:set var="username" value="李小明" />
姓名字符数：${fn:length(username)}
<!-- 输出：姓名字符数：3 -->

<!-- 处理来自表单的数据 -->
您输入的密码长度为：${fn:length(param.password)} 位
```

### 2.2 实际开发中的应用场景

**🔸 用户输入验证**

```jsp
<!-- 用户注册表单验证 -->
<form action="register" method="post">
    用户名：<input type="text" name="username" value="${param.username}">
    
    <!-- 实时显示用户名长度 -->
    <c:if test="${not empty param.username}">
        <span style="color: blue;">
            当前长度：${fn:length(param.username)} 
            <c:choose>
                <c:when test="${fn:length(param.username) < 3}">
                    (太短了，至少需要3位)
                </c:when>
                <c:when test="${fn:length(param.username) > 20}">
                    (太长了，最多20位)
                </c:when>
                <c:otherwise>
                    (长度合适✓)
                </c:otherwise>
            </c:choose>
        </span>
    </c:if>
</form>
```

**🔸 内容展示优化**

```jsp
<!-- 文章摘要显示 -->
<c:forEach var="article" items="${articles}">
    <div class="article-item">
        <h3>${article.title}</h3>
        <p>
            <c:choose>
                <c:when test="${fn:length(article.content) > 100}">
                    ${fn:substring(article.content, 0, 100)}...
                    <a href="article?id=${article.id}">阅读全文</a>
                </c:when>
                <c:otherwise>
                    ${article.content}
                </c:otherwise>
            </c:choose>
        </p>
        <small>字数：${fn:length(article.content)}</small>
    </div>
</c:forEach>
```

### 2.3 处理不同数据类型

**📊 长度获取的多种场景**

```jsp
<!-- 处理集合长度 -->
<c:set var="hobbies" value="${['读书','游泳','编程']}" />
兴趣爱好数量：${fn:length(hobbies)} 个

<!-- 处理数组长度 -->
购物车商品数量：${fn:length(cartItems)}

<!-- 处理null值的安全写法 -->
<c:choose>
    <c:when test="${not empty userComment}">
        评论长度：${fn:length(userComment)} 字符
    </c:when>
    <c:otherwise>
        暂无评论
    </c:otherwise>
</c:choose>
```

**⚠️ 常见注意事项**
```
处理空值的最佳实践：

❌ 错误写法（可能报错）：
${fn:length(nullString)}

✅ 安全写法：
${not empty content ? fn:length(content) : 0}

或者：
<c:if test="${not empty content}">
    长度：${fn:length(content)}
</c:if>
```

---

## 3. 🔍 包含判断函数详解


### 3.1 fn:contains 精确包含判断

**🎯 核心功能**：检查字符串是否包含指定的子字符串（区分大小写）

```jsp
<!-- 基础用法示例 -->
<c:set var="message" value="欢迎学习Java Web开发" />

是否包含"Java"：${fn:contains(message, 'Java')}
<!-- 输出：是否包含"Java"：true -->

是否包含"java"：${fn:contains(message, 'java')}
<!-- 输出：是否包含"java"：false（注意大小写敏感） -->
```

**🔸 实际应用场景**

```jsp
<!-- 搜索结果高亮显示 -->
<c:set var="keyword" value="${param.search}" />
<c:forEach var="article" items="${searchResults}">
    <div class="search-result">
        <h4>
            <c:choose>
                <c:when test="${fn:contains(article.title, keyword)}">
                    <span class="highlight">${article.title}</span> ⭐
                </c:when>
                <c:otherwise>
                    ${article.title}
                </c:otherwise>
            </c:choose>
        </h4>
    </div>
</c:forEach>
```

### 3.2 fn:containsIgnoreCase 忽略大小写判断

**🎯 核心功能**：检查字符串是否包含指定的子字符串（不区分大小写）

```jsp
<!-- 大小写对比测试 -->
<c:set var="email" value="user@Gmail.com" />

精确匹配：${fn:contains(email, 'gmail')}
<!-- 输出：精确匹配：false -->

忽略大小写：${fn:containsIgnoreCase(email, 'gmail')}
<!-- 输出：忽略大小写：true -->
```

**🔸 用户友好的搜索功能**

```jsp
<!-- 智能搜索实现 -->
<form method="get">
    <input type="text" name="q" value="${param.q}" placeholder="搜索商品...">
    <button type="submit">搜索</button>
</form>

<c:if test="${not empty param.q}">
    <h3>搜索结果：</h3>
    <c:forEach var="product" items="${products}">
        <c:if test="${fn:containsIgnoreCase(product.name, param.q) 
                      or fn:containsIgnoreCase(product.description, param.q)}">
            <div class="product-item">
                <h4>${product.name}</h4>
                <p>${product.description}</p>
                <span class="price">¥${product.price}</span>
            </div>
        </c:if>
    </c:forEach>
</c:if>
```

### 3.3 包含判断的实用技巧

**💡 多条件组合判断**

```jsp
<!-- 内容分类显示 -->
<c:forEach var="post" items="${blogPosts}">
    <article class="blog-post">
        <h2>${post.title}</h2>
        
        <!-- 根据内容添加标签 -->
        <div class="tags">
            <c:if test="${fn:containsIgnoreCase(post.content, 'java')}">
                <span class="tag java-tag">Java</span>
            </c:if>
            <c:if test="${fn:containsIgnoreCase(post.content, 'spring')}">
                <span class="tag spring-tag">Spring</span>
            </c:if>
            <c:if test="${fn:containsIgnoreCase(post.content, '数据库')}">
                <span class="tag db-tag">数据库</span>
            </c:if>
        </div>
        
        <p>${post.summary}</p>
    </article>
</c:forEach>
```

**🛡️ 内容安全检查**

```jsp
<!-- 评论内容过滤 -->
<c:set var="bannedWords" value="广告,spam,垃圾" />
<c:forEach var="comment" items="${userComments}">
    <div class="comment">
        <strong>${comment.username}：</strong>
        <c:choose>
            <c:when test="${fn:contains(comment.content, '广告') 
                            or fn:contains(comment.content, 'spam')}">
                <em style="color: red;">[该评论包含不当内容，已被系统过滤]</em>
            </c:when>
            <c:otherwise>
                ${comment.content}
            </c:otherwise>
        </c:choose>
    </div>
</c:forEach>
```

---

## 4. 🎯 开头结尾判断函数


### 4.1 fn:startsWith 开头判断

**🎯 核心功能**：检查字符串是否以指定的字符或字符串开头

```jsp
<!-- 基础用法演示 -->
<c:set var="filename" value="report.pdf" />
<c:set var="url" value="https://www.example.com" />

文件类型判断：
<c:choose>
    <c:when test="${fn:startsWith(filename, 'report')}">
        这是一个报告文件
    </c:when>
    <c:when test="${fn:startsWith(filename, 'photo')}">
        这是一个照片文件
    </c:when>
    <c:otherwise>
        未知类型文件
    </c:otherwise>
</c:choose>

协议检查：
<c:if test="${fn:startsWith(url, 'https')}">
    ✅ 这是安全的HTTPS链接
</c:if>
```

**🔸 文件分类管理**

```jsp
<!-- 文件列表分类显示 -->
<div class="file-manager">
    <h3>文档文件</h3>
    <c:forEach var="file" items="${fileList}">
        <c:if test="${fn:startsWith(file.name, 'doc') 
                      or fn:startsWith(file.name, 'report')
                      or fn:startsWith(file.name, '报告')}">
            <div class="file-item document">
                📄 ${file.name} (${file.size} KB)
            </div>
        </c:if>
    </c:forEach>
    
    <h3>图片文件</h3>
    <c:forEach var="file" items="${fileList}">
        <c:if test="${fn:startsWith(file.name, 'img') 
                      or fn:startsWith(file.name, 'photo')}">
            <div class="file-item image">
                🖼️ ${file.name} (${file.size} KB)
            </div>
        </c:if>
    </c:forEach>
</div>
```

### 4.2 fn:endsWith 结尾判断

**🎯 核心功能**：检查字符串是否以指定的字符或字符串结尾

```jsp
<!-- 文件扩展名检查 -->
<c:set var="uploadFile" value="avatar.jpg" />

<c:choose>
    <c:when test="${fn:endsWith(uploadFile, '.jpg') 
                    or fn:endsWith(uploadFile, '.png')
                    or fn:endsWith(uploadFile, '.gif')}">
        <img src="uploads/${uploadFile}" alt="用户头像" class="avatar">
    </c:when>
    <c:when test="${fn:endsWith(uploadFile, '.pdf')}">
        📄 <a href="uploads/${uploadFile}">下载PDF文档</a>
    </c:when>
    <c:otherwise>
        ❌ 不支持的文件格式
    </c:otherwise>
</c:choose>
```

**🔸 邮箱域名分类**

```jsp
<!-- 用户邮箱分类显示 -->
<c:forEach var="user" items="${userList}">
    <tr>
        <td>${user.name}</td>
        <td>
            ${user.email}
            <c:choose>
                <c:when test="${fn:endsWith(user.email, '@gmail.com')}">
                    <span class="email-provider gmail">Gmail</span>
                </c:when>
                <c:when test="${fn:endsWith(user.email, '@qq.com')}">
                    <span class="email-provider qq">QQ邮箱</span>
                </c:when>
                <c:when test="${fn:endsWith(user.email, '@163.com')}">
                    <span class="email-provider netease">网易邮箱</span>
                </c:when>
                <c:otherwise>
                    <span class="email-provider other">其他</span>
                </c:otherwise>
            </c:choose>
        </td>
    </tr>
</c:forEach>
```

### 4.3 开头结尾判断的组合应用

**💡 链接安全检查**

```jsp
<!-- 外部链接安全提示 -->
<c:forEach var="link" items="${externalLinks}">
    <div class="link-item">
        <a href="${link.url}" 
           <c:if test="${not (fn:startsWith(link.url, 'https://') 
                             or fn:startsWith(link.url, '//'))}">
               class="unsafe-link" 
               onclick="return confirm('该链接可能不安全，确定要访问吗？')"
           </c:if>
           target="_blank">
            ${link.title}
        </a>
        
        <!-- 链接类型标识 -->
        <c:choose>
            <c:when test="${fn:startsWith(link.url, 'https://')}">
                🔒 安全链接
            </c:when>
            <c:when test="${fn:startsWith(link.url, 'http://')}">
                ⚠️ 非加密链接
            </c:when>
            <c:when test="${fn:startsWith(link.url, '//')}">
                🌐 协议自适应
            </c:when>
        </c:choose>
    </div>
</c:forEach>
```

---

## 5. 🔎 字符串查找与定位


### 5.1 fn:indexOf 查找字符位置

**🎯 核心功能**：查找子字符串在目标字符串中第一次出现的位置

```jsp
<!-- 基础用法示例 -->
<c:set var="text" value="Hello Java World" />

"Java"的位置：${fn:indexOf(text, 'Java')}
<!-- 输出："Java"的位置：6 -->

"Python"的位置：${fn:indexOf(text, 'Python')}
<!-- 输出："Python"的位置：-1 (表示未找到) -->
```

**💡 理解位置编号规则**
```
字符串位置编号（从0开始）：
H e l l o   J a v a   W o r l d
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14

所以"Java"在位置6是正确的
-1表示没有找到指定的子字符串
```

### 5.2 实际开发中的应用

**🔸 邮箱格式验证**

```jsp
<!-- 简单的邮箱格式检查 -->
<c:set var="userEmail" value="${param.email}" />
<c:if test="${not empty userEmail}">
    <div class="email-validation">
        输入的邮箱：${userEmail}
        <br>
        <c:choose>
            <c:when test="${fn:indexOf(userEmail, '@') > 0 
                            and fn:indexOf(userEmail, '.') > fn:indexOf(userEmail, '@')}">
                ✅ 邮箱格式看起来正确
            </c:when>
            <c:otherwise>
                ❌ 邮箱格式不正确，请检查
            </c:otherwise>
        </c:choose>
    </div>
</c:if>
```

**🔸 文本关键词高亮**

```jsp
<!-- 搜索结果关键词定位 -->
<c:set var="searchKeyword" value="${param.keyword}" />
<c:forEach var="article" items="${searchResults}">
    <c:if test="${fn:indexOf(article.content, searchKeyword) >= 0}">
        <div class="search-result">
            <h4>${article.title}</h4>
            <p>
                关键词"${searchKeyword}"在第 
                ${fn:indexOf(article.content, searchKeyword) + 1} 个字符处首次出现
            </p>
            <!-- 显示关键词前后的内容片段 -->
            <c:set var="keywordPos" value="${fn:indexOf(article.content, searchKeyword)}" />
            <c:if test="${keywordPos >= 0}">
                <div class="content-preview">
                    ...${fn:substring(article.content, 
                                     keywordPos > 20 ? keywordPos - 20 : 0, 
                                     keywordPos + fn:length(searchKeyword) + 20)}...
                </div>
            </c:if>
        </div>
    </c:if>
</c:forEach>
```

### 5.3 位置查找的进阶技巧

**💡 多关键词定位**

```jsp
<!-- 检查文本中多个关键词的位置 -->
<c:set var="content" value="学习Java编程需要掌握Spring框架" />
<div class="keyword-analysis">
    <h4>关键词位置分析：</h4>
    <ul>
        <li>
            "Java" 
            <c:choose>
                <c:when test="${fn:indexOf(content, 'Java') >= 0}">
                    在第 ${fn:indexOf(content, 'Java') + 1} 位
                </c:when>
                <c:otherwise>未找到</c:otherwise>
            </c:choose>
        </li>
        <li>
            "Spring" 
            <c:choose>
                <c:when test="${fn:indexOf(content, 'Spring') >= 0}">
                    在第 ${fn:indexOf(content, 'Spring') + 1} 位
                </c:when>
                <c:otherwise>未找到</c:otherwise>
            </c:choose>
        </li>
    </ul>
</div>
```

**🔧 实用的URL分析**

```jsp
<!-- URL组成部分分析 -->
<c:set var="fullUrl" value="https://www.example.com/user/profile?id=123" />
<div class="url-analysis">
    <h4>URL分析结果：</h4>
    
    协议部分：
    <c:set var="protocolEnd" value="${fn:indexOf(fullUrl, '://')}" />
    <c:if test="${protocolEnd > 0}">
        ${fn:substring(fullUrl, 0, protocolEnd)}
    </c:if>
    
    <br>域名部分：
    <c:set var="domainStart" value="${protocolEnd + 3}" />
    <c:set var="pathStart" value="${fn:indexOf(fullUrl, '/', domainStart)}" />
    <c:if test="${pathStart > domainStart}">
        ${fn:substring(fullUrl, domainStart, pathStart)}
    </c:if>
    
    <br>是否包含查询参数：
    <c:choose>
        <c:when test="${fn:indexOf(fullUrl, '?') > 0}">
            ✅ 包含查询参数，位置在第 ${fn:indexOf(fullUrl, '?') + 1} 位
        </c:when>
        <c:otherwise>❌ 不包含查询参数</c:otherwise>
    </c:choose>
</div>
```

---

## 6. ✂️ 去除空格函数fn:trim


### 6.1 fn:trim 基础用法

**🎯 核心功能**：去除字符串开头和结尾的空白字符

```jsp
<!-- 演示空格去除效果 -->
<c:set var="messyText" value="   Hello World   " />

原始文本："${messyText}" (长度：${fn:length(messyText)})
处理后："${fn:trim(messyText)}" (长度：${fn:length(fn:trim(messyText))})

<!-- 输出：
原始文本："   Hello World   " (长度：17)
处理后："Hello World" (长度：11)
-->
```

**💡 什么是空白字符**
```
fn:trim会去除的字符：
✓ 普通空格（最常见）
✓ 制表符（Tab）
✓ 换行符
✓ 回车符
✓ 其他不可见的空白字符

注意：只去除开头和结尾的空白，中间的空格保留
```

### 6.2 表单数据处理

**🔸 用户输入清理**

```jsp
<!-- 表单提交后的数据处理 -->
<c:if test="${not empty param.username}">
    <c:set var="cleanUsername" value="${fn:trim(param.username)}" />
    <div class="form-feedback">
        <c:choose>
            <c:when test="${fn:length(cleanUsername) == 0}">
                ❌ 用户名不能为空或只包含空格
            </c:when>
            <c:when test="${fn:length(cleanUsername) < 3}">
                ⚠️ 用户名长度至少3位（当前：${fn:length(cleanUsername)}位）
            </c:when>
            <c:otherwise>
                ✅ 用户名格式正确：${cleanUsername}
            </c:otherwise>
        </c:choose>
    </div>
</c:if>

<!-- 评论内容处理 -->
<c:if test="${not empty param.comment}">
    <c:set var="cleanComment" value="${fn:trim(param.comment)}" />
    <c:if test="${fn:length(cleanComment) > 0}">
        <div class="user-comment">
            <strong>您的评论：</strong>
            <p>${cleanComment}</p>
            <small>字数：${fn:length(cleanComment)}</small>
        </div>
    </c:if>
</c:if>
```

### 6.3 数据显示优化

**🔸 避免显示异常**

```jsp
<!-- 用户资料显示 -->
<div class="user-profile">
    <c:forEach var="user" items="${userList}">
        <div class="user-card">
            <!-- 避免显示前后带空格的姓名 -->
            <h3>${fn:trim(user.name)}</h3>
            
            <!-- 个人简介处理 -->
            <c:set var="bio" value="${fn:trim(user.biography)}" />
            <c:choose>
                <c:when test="${fn:length(bio) > 0}">
                    <p class="bio">${bio}</p>
                </c:when>
                <c:otherwise>
                    <p class="bio empty">这个人很懒，什么都没留下~</p>
                </c:otherwise>
            </c:choose>
            
            <!-- 联系方式清理 -->
            <c:set var="phone" value="${fn:trim(user.phone)}" />
            <c:if test="${fn:length(phone) > 0}">
                <p>电话：${phone}</p>
            </c:if>
        </div>
    </c:forEach>
</div>
```

### 6.4 搜索功能优化

**🔍 搜索关键词处理**

```jsp
<!-- 智能搜索处理 -->
<form method="get" action="search">
    <input type="text" name="q" value="${param.q}" placeholder="输入搜索关键词">
    <button type="submit">搜索</button>
</form>

<c:if test="${not empty param.q}">
    <c:set var="searchQuery" value="${fn:trim(param.q)}" />
    <c:choose>
        <c:when test="${fn:length(searchQuery) == 0}">
            <p class="search-error">❌ 搜索关键词不能为空</p>
        </c:when>
        <c:when test="${fn:length(searchQuery) < 2}">
            <p class="search-warning">⚠️ 关键词太短，请输入至少2个字符</p>
        </c:when>
        <c:otherwise>
            <p class="search-info">
                🔍 搜索关键词："<strong>${searchQuery}</strong>" 
                (共 ${fn:length(searchQuery)} 个字符)
            </p>
            
            <!-- 执行搜索逻辑 -->
            <c:set var="foundResults" value="0" />
            <c:forEach var="item" items="${allItems}">
                <c:if test="${fn:containsIgnoreCase(item.title, searchQuery)}">
                    <c:set var="foundResults" value="${foundResults + 1}" />
                    <div class="search-result">
                        <h4>${item.title}</h4>
                        <p>${item.summary}</p>
                    </div>
                </c:if>
            </c:forEach>
            
            <c:if test="${foundResults == 0}">
                <p class="no-results">😔 没有找到相关结果</p>
            </c:if>
        </c:otherwise>
    </c:choose>
</c:if>
```

---

## 7. 🚀 实际开发应用场景


### 7.1 用户注册表单验证

**📋 完整的表单处理示例**

```jsp
<!-- 用户注册页面 -->
<form method="post" action="register">
    <div class="form-group">
        <label>用户名：</label>
        <input type="text" name="username" value="${param.username}" required>
        
        <!-- 实时验证提示 -->
        <c:if test="${not empty param.username}">
            <c:set var="cleanUsername" value="${fn:trim(param.username)}" />
            <div class="validation-info">
                <c:choose>
                    <c:when test="${fn:length(cleanUsername) == 0}">
                        <span class="error">❌ 用户名不能为空</span>
                    </c:when>
                    <c:when test="${fn:length(cleanUsername) < 3}">
                        <span class="warning">⚠️ 用户名太短（当前${fn:length(cleanUsername)}位，需要3-20位）</span>
                    </c:when>
                    <c:when test="${fn:length(cleanUsername) > 20}">
                        <span class="error">❌ 用户名太长（当前${fn:length(cleanUsername)}位，最多20位）</span>
                    </c:when>
                    <c:when test="${fn:contains(cleanUsername, ' ')}">
                        <span class="error">❌ 用户名不能包含空格</span>
                    </c:when>
                    <c:otherwise>
                        <span class="success">✅ 用户名格式正确</span>
                    </c:otherwise>
                </c:choose>
            </div>
        </c:if>
    </div>
    
    <div class="form-group">
        <label>邮箱：</label>
        <input type="email" name="email" value="${param.email}" required>
        
        <c:if test="${not empty param.email}">
            <c:set var="cleanEmail" value="${fn:trim(param.email)}" />
            <div class="validation-info">
                <c:choose>
                    <c:when test="${fn:indexOf(cleanEmail, '@') <= 0}">
                        <span class="error">❌ 请输入正确的邮箱地址</span>
                    </c:when>
                    <c:when test="${fn:endsWith(cleanEmail, '@gmail.com')}">
                        <span class="info">📧 Gmail邮箱</span>
                    </c:when>
                    <c:when test="${fn:endsWith(cleanEmail, '@qq.com')}">
                        <span class="info">📧 QQ邮箱</span>
                    </c:when>
                    <c:otherwise>
                        <span class="success">✅ 邮箱格式正确</span>
                    </c:otherwise>
                </c:choose>
            </div>
        </c:if>
    </div>
    
    <button type="submit">注册</button>
</form>
```

### 7.2 商品搜索与筛选

**🛒 电商网站搜索功能**

```jsp
<!-- 商品搜索页面 -->
<div class="search-container">
    <form method="get">
        <input type="text" name="keyword" value="${param.keyword}" 
               placeholder="搜索商品名称或描述...">
        <button type="submit">搜索</button>
    </form>
    
    <c:if test="${not empty param.keyword}">
        <c:set var="searchTerm" value="${fn:trim(param.keyword)}" />
        <c:if test="${fn:length(searchTerm) > 0}">
            <h3>搜索结果："${searchTerm}"</h3>
            
            <div class="search-stats">
                搜索关键词长度：${fn:length(searchTerm)} 字符
            </div>
            
            <!-- 商品列表 -->
            <div class="product-grid">
                <c:set var="resultCount" value="0" />
                <c:forEach var="product" items="${products}">
                    <!-- 多字段搜索匹配 -->
                    <c:if test="${fn:containsIgnoreCase(product.name, searchTerm) 
                                  or fn:containsIgnoreCase(product.description, searchTerm)
                                  or fn:containsIgnoreCase(product.category, searchTerm)}">
                        <c:set var="resultCount" value="${resultCount + 1}" />
                        <div class="product-card">
                            <img src="${product.image}" alt="${product.name}">
                            <h4>
                                <!-- 高亮显示匹配的商品名 -->
                                <c:choose>
                                    <c:when test="${fn:containsIgnoreCase(product.name, searchTerm)}">
                                        <span class="highlight">${product.name}</span>
                                    </c:when>
                                    <c:otherwise>
                                        ${product.name}
                                    </c:otherwise>
                                </c:choose>
                            </h4>
                            <p class="price">¥${product.price}</p>
                            
                            <!-- 匹配标签 -->
                            <div class="match-tags">
                                <c:if test="${fn:containsIgnoreCase(product.name, searchTerm)}">
                                    <span class="tag">标题匹配</span>
                                </c:if>
                                <c:if test="${fn:containsIgnoreCase(product.description, searchTerm)}">
                                    <span class="tag">描述匹配</span>
                                </c:if>
                            </div>
                        </div>
                    </c:if>
                </c:forEach>
            </div>
            
            <!-- 搜索结果统计 -->
            <div class="search-summary">
                共找到 <strong>${resultCount}</strong> 个相关商品
                <c:if test="${resultCount == 0}">
                    <p class="no-results">
                        😔 没有找到包含"${searchTerm}"的商品<br>
                        建议：
                        <ul>
                            <li>检查关键词拼写</li>
                            <li>尝试使用更简短的关键词</li>
                            <li>使用商品的通用名称</li>
                        </ul>
                    </p>
                </c:if>
            </div>
        </c:if>
    </c:if>
</div>
```

### 7.3 文件管理系统

**📁 智能文件分类展示**

```jsp
<!-- 文件管理界面 -->
<div class="file-manager">
    <h2>我的文件</h2>
    
    <!-- 文件分类统计 -->
    <div class="file-stats">
        <c:set var="docCount" value="0" />
        <c:set var="imageCount" value="0" />
        <c:set var="videoCount" value="0" />
        <c:set var="otherCount" value="0" />
        
        <c:forEach var="file" items="${userFiles}">
            <c:choose>
                <c:when test="${fn:endsWith(file.name, '.doc') 
                                or fn:endsWith(file.name, '.pdf')
                                or fn:endsWith(file.name, '.txt')}">
                    <c:set var="docCount" value="${docCount + 1}" />
                </c:when>
                <c:when test="${fn:endsWith(file.name, '.jpg') 
                                or fn:endsWith(file.name, '.png')
                                or fn:endsWith(file.name, '.gif')}">
                    <c:set var="imageCount" value="${imageCount + 1}" />
                </c:when>
                <c:when test="${fn:endsWith(file.name, '.mp4') 
                                or fn:endsWith(file.name, '.avi')
                                or fn:endsWith(file.name, '.mov')}">
                    <c:set var="videoCount" value="${videoCount + 1}" />
                </c:when>
                <c:otherwise>
                    <c:set var="otherCount" value="${otherCount + 1}" />
                </c:otherwise>
            </c:choose>
        </c:forEach>
        
        <div class="stats-grid">
            <div class="stat-item">📄 文档 (${docCount})</div>
            <div class="stat-item">🖼️ 图片 (${imageCount})</div>
            <div class="stat-item">🎬 视频 (${videoCount})</div>
            <div class="stat-item">📎 其他 (${otherCount})</div>
        </div>
    </div>
    
    <!-- 文件列表 -->
    <div class="file-list">
        <c:forEach var="file" items="${userFiles}">
            <div class="file-item">
                <!-- 文件图标 -->
                <span class="file-icon">
                    <c:choose>
                        <c:when test="${fn:endsWith(file.name, '.pdf')}">📄</c:when>
                        <c:when test="${fn:endsWith(file.name, '.doc') or fn:endsWith(file.name, '.docx')}">📝</c:when>
                        <c:when test="${fn:endsWith(file.name, '.jpg') or fn:endsWith(file.name, '.png')}">🖼️</c:when>
                        <c:when test="${fn:endsWith(file.name, '.mp4') or fn:endsWith(file.name, '.avi')}">🎬</c:when>
                        <c:when test="${fn:endsWith(file.name, '.zip') or fn:endsWith(file.name, '.rar')}">📦</c:when>
                        <c:otherwise>📎</c:otherwise>
                    </c:choose>
                </span>
                
                <!-- 文件名 -->
                <span class="file-name">${fn:trim(file.name)}</span>
                
                <!-- 文件信息 -->
                <span class="file-info">
                    ${file.size} KB | 
                    名称长度：${fn:length(fn:trim(file.name))} 字符
                    
                    <!-- 文件名长度提醒 -->
                    <c:if test="${fn:length(fn:trim(file.name)) > 50}">
                        <span class="warning">⚠️ 文件名过长</span>
                    </c:if>
                </span>
                
                <!-- 操作按钮 -->
                <div class="file-actions">
                    <a href="download?file=${file.name}" class="btn-download">下载</a>
                    <a href="delete?file=${file.name}" class="btn-delete" 
                       onclick="return confirm('确定要删除 ${file.name} 吗？')">删除</a>
                </div>
            </div>
        </c:forEach>
    </div>
</div>
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


```
🔸 fn:length - 获取字符串、数组或集合的长度，用于数据验证和显示控制
🔸 fn:contains - 检查字符串是否包含子串（区分大小写），用于搜索和过滤
🔸 fn:containsIgnoreCase - 检查字符串包含关系（不区分大小写），提升用户体验
🔸 fn:startsWith - 判断字符串开头，常用于文件分类和协议检查
🔸 fn:endsWith - 判断字符串结尾，主要用于文件扩展名识别
🔸 fn:indexOf - 查找子字符串位置，用于定位和分析
🔸 fn:trim - 去除字符串前后空白，确保数据整洁
```

### 8.2 关键理解要点


**🔹 fn标签库的核心价值**
```
开发效率提升：
- 减少Java后端字符串处理逻辑
- 直接在JSP页面进行数据处理
- 降低前后端数据传输复杂度

用户体验优化：
- 实时表单验证和提示
- 智能搜索和筛选功能
- 友好的错误信息显示

代码可维护性：
- 逻辑清晰，易于理解
- 减少重复代码
- 便于调试和修改
```

**🔹 函数组合使用的威力**
```
单个函数的局限性：
- fn:length只能获取长度
- fn:contains只能判断包含关系

组合使用的优势：
- fn:trim + fn:length = 准确的内容长度验证
- fn:contains + fn:indexOf = 精确的内容定位
- fn:startsWith + fn:endsWith = 完整的格式验证

实际效果：
简单的函数组合能解决复杂的业务需求
```

**🔹 处理用户输入的最佳实践**
```
数据清理流程：
1. fn:trim - 去除多余空格
2. fn:length - 检查长度是否合规  
3. fn:contains - 检查是否包含非法字符
4. 其他业务逻辑验证

安全性考虑：
- 始终验证用户输入
- 提供友好的错误提示
- 防止XSS等安全问题
```

### 8.3 实际应用价值


**🎯 Web开发中的常见应用**
- **表单验证**：用户注册、登录、信息修改时的实时验证
- **搜索功能**：商品搜索、内容检索、智能推荐
- **文件管理**：上传文件的格式检查、文件分类显示
- **内容展示**：文章摘要、评论过滤、链接安全检查

**🔧 开发实践建议**
- **数据验证**：前端验证提升用户体验，但后端验证确保安全性
- **性能考虑**：fn函数在页面层执行，复杂逻辑建议后端处理
- **国际化支持**：注意中文字符的长度计算和处理
- **兼容性测试**：确保在不同浏览器下表现一致

**📈 学习进阶方向**
- **JSTL核心标签**：配合fn函数实现更复杂的页面逻辑
- **EL表达式高级用法**：与fn函数的深度结合应用
- **前端框架集成**：在现代前端框架中的类似功能实现
- **性能优化**：大数据量下的字符串处理优化策略

**🎓 学习检查清单**
- [ ] 理解每个fn函数的基本用法
- [ ] 能够组合多个函数解决实际问题
- [ ] 掌握表单验证的完整流程
- [ ] 能够实现基本的搜索功能
- [ ] 了解数据安全和用户体验的平衡

**核心记忆口诀**：
- fn函数处理字符串，页面逻辑更清晰
- length长度contains包含，startsWith开头要记清
- endsWith结尾indexOf定位，trim去空格最干净
- 函数组合威力大，用户体验顶呱呱