---
title: 3、第一个JSP程序
---
## 📚 目录

1. [什么是JSP - 让网页动起来](#1-什么是JSP-让网页动起来)
2. [JSP的工作原理 - 幕后的魔法](#2-JSP的工作原理-幕后的魔法)
3. [开发环境准备 - 工欲善其事](#3-开发环境准备-工欲善其事)
4. [第一个JSP程序 - Hello World](#4-第一个JSP程序-HelloWorld)
5. [Web应用目录结构 - 规范很重要](#5-Web应用目录结构-规范很重要)
6. [部署与运行 - 让程序跑起来](#6-部署与运行-让程序跑起来)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🌟 什么是JSP - 让网页动起来


### 1.1 JSP的通俗理解


**想象一下这个场景：**
```
静态网页就像一张印刷好的报纸 📰
- 内容固定不变
- 每个人看到的都一样
- 无法根据用户需求调整

JSP就像一台智能打印机 🖨️
- 可以根据不同用户打印不同内容
- 能够显示当前时间、用户信息
- 内容可以动态变化
```

### 1.2 JSP的正式定义


**🔸 核心概念**
```
JSP (JavaServer Pages) = HTML + Java代码
目的：在网页中嵌入Java代码，实现动态内容生成
本质：服务器端技术，在服务器上运行Java代码生成HTML
```

**💡 JSP的优势**
- ✅ **简单易学** - 基于HTML，Java程序员容易上手
- ✅ **功能强大** - 可以使用全部Java功能
- ✅ **平台无关** - 运行在支持Java的任何平台
- ✅ **重用性好** - 可以使用Java组件和标签库

### 1.3 JSP vs 其他技术对比


| 🆚 对比项 | HTML | PHP | ASP | JSP |
|----------|------|-----|-----|-----|
| **动态内容** | ❌ | ✅ | ✅ | ✅ |
| **平台依赖** | 无 | Linux优势 | Windows | 跨平台 |
| **学习难度** | ⭐ | ⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| **企业应用** | ❌ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ |

---

## 2. ⚙️ JSP的工作原理 - 幕后的魔法


### 2.1 JSP执行流程图


```
用户浏览器                  Web服务器(Tomcat)               Java虚拟机
     │                           │                          │
     │──[1]请求hello.jsp────────→│                          │
     │                           │                          │
     │                           │──[2]首次访问？──→编译JSP────→│
     │                           │    检查是否需要重新编译      │
     │                           │                          │
     │                           │←─[3]生成Servlet类────────│
     │                           │    hello_jsp.java         │
     │                           │                          │
     │                           │──[4]执行Servlet────────→│
     │                           │                          │
     │                           │←─[5]返回HTML结果─────────│
     │                           │                          │
     │←──[6]发送HTML响应─────────│                          │
```

### 2.2 JSP转换过程详解


**🔄 第一阶段：翻译阶段**
```
原始JSP文件：hello.jsp
     ↓ [JSP引擎处理]
生成Java文件：hello_jsp.java (Servlet)
     ↓ [Java编译器]
字节码文件：hello_jsp.class
```

**⚡ 第二阶段：执行阶段**
```
1. 加载Servlet类到内存
2. 创建Servlet实例（只创建一次）
3. 调用service()方法处理请求
4. 生成HTML响应发送给浏览器
```

### 2.3 为什么JSP比纯Java Servlet更好用？


> 💡 **通俗比喻**
> 
> **Servlet写网页** = 用Java代码一行行输出HTML
> ```java
> out.println("<html>");
> out.println("<head><title>Hello</title></head>");
> out.println("<body>");
> out.println("<h1>Hello World</h1>");
> out.println("</body></html>");
> ```
> 
> **JSP写网页** = 在HTML中嵌入Java代码
> ```jsp
> <html>
> <head><title>Hello</title></head>
> <body>
>   <h1>Hello <%= name %></h1>
> </body>
> </html>
> ```

---

## 3. 🛠️ 开发环境准备 - 工欲善其事


### 3.1 必需软件清单


**📋 开发工具包**
```
🔸 JDK (Java Development Kit)
  └─ 版本要求：JDK 8 或更高版本
  └─ 作用：编译和运行Java程序

🔸 Tomcat服务器
  └─ 版本推荐：Tomcat 9.x
  └─ 作用：运行JSP和Servlet

🔸 集成开发环境 (可选但推荐)
  └─ Eclipse / IntelliJ IDEA / VS Code
  └─ 作用：编写代码更方便
```

### 3.2 安装步骤指导


**步骤 1️⃣：安装JDK**
1. 下载JDK安装包
2. 运行安装程序
3. 配置环境变量 `JAVA_HOME` 和 `PATH`

**步骤 2️⃣：安装Tomcat**
1. 下载Tomcat压缩包
2. 解压到指定目录（如：`D:\apache-tomcat-9.0`）
3. 配置环境变量 `CATALINA_HOME`

**步骤 3️⃣：验证安装**

```bash
# 验证JDK安装
$ java -version
java version "1.8.0_281"

# 启动Tomcat
$ cd $CATALINA_HOME/bin
$ ./startup.sh    # Linux/Mac
$ startup.bat     # Windows
```

> ⚠️ **新手提醒**
> 
> 如果启动Tomcat后浏览器访问 `http://localhost:8080` 看到Tomcat欢迎页面，说明安装成功！

---

## 4. 👋 第一个JSP程序 - Hello World


### 4.1 创建JSP文件


**📝 创建 `hello.jsp` 文件**

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>我的第一个JSP程序</title>
</head>
<body>
    <h1>🎉 Hello, JSP World!</h1>
    
    <!-- 这里是JSP代码，显示当前时间 -->
    <p>当前时间是：<%= new java.util.Date() %></p>
    
    <!-- 显示一些动态内容 -->
    <p>这个页面被访问于：<%= System.currentTimeMillis() %>毫秒</p>
    
    <!-- 使用Java代码计算 -->
    <p>10 + 20 = <%= 10 + 20 %></p>
</body>
</html>
```

### 4.2 代码详细解释


**🔍 逐行分析**

| 代码部分 | 作用说明 | 💡 新手理解 |
|---------|----------|-----------|
| `<%@ page ... %>` | 页面指令，设置页面属性 | 告诉服务器这个页面的基本信息 |
| `<%= ... %>` | 表达式标签，输出Java表达式结果 | 把Java计算结果显示在网页上 |
| `new java.util.Date()` | 创建当前日期时间对象 | 获取现在的时间 |
| `System.currentTimeMillis()` | 获取系统时间戳 | 获取一个很大的数字，表示时间 |

### 4.3 JSP标签快速入门


**🏷️ 常用JSP标签**

```jsp
<!-- 1. 表达式标签：输出内容 -->
<%= "Hello World" %>
<%= 100 + 200 %>
<%= request.getParameter("name") %>

<!-- 2. 脚本标签：写Java代码 -->
<% 
   String message = "欢迎学习JSP";
   int count = 10;
%>

<!-- 3. 声明标签：声明变量和方法 -->
<%! 
   private String userName = "小明";
   public String getMessage() {
       return "Hello JSP";
   }
%>
```

> 💡 **记忆技巧**
> 
> - `<%=  %>` = 等于号，**输出**结果到页面
> - `<%   %>` = 没有等号，**执行**Java代码  
> - `<%!  %>` = 感叹号，**声明**变量和方法

---

## 5. 📁 Web应用目录结构 - 规范很重要


### 5.1 标准目录结构


```
mywebapp/                          ← Web应用根目录
├── 📄 index.jsp                   ← 首页文件
├── 📄 hello.jsp                   ← 我们创建的JSP文件
├── 📁 css/                        ← 样式文件目录
│   └── 📄 style.css
├── 📁 js/                         ← JavaScript文件目录
│   └── 📄 main.js
├── 📁 images/                     ← 图片文件目录
│   └── 📄 logo.png
├── 📁 WEB-INF/                    ← 受保护的目录（重要！）
│   ├── 📄 web.xml                 ← 部署描述文件
│   ├── 📁 classes/                ← Java字节码文件
│   │   └── 📄 MyServlet.class
│   └── 📁 lib/                    ← 第三方JAR包
│       └── 📄 mysql-connector.jar
└── 📁 META-INF/                   ← 元信息目录
    └── 📄 MANIFEST.MF
```

### 5.2 目录作用详解


| 📁 目录/文件 | 🎯 作用 | 👁️ 浏览器访问 | 💡 新手理解 |
|-------------|---------|--------------|-----------|
| **根目录** | 存放JSP、HTML等页面文件 | ✅ 可直接访问 | 网站的"门面" |
| **css/** | 存放CSS样式文件 | ✅ 可直接访问 | 让网页更漂亮 |
| **js/** | 存放JavaScript文件 | ✅ 可直接访问 | 让网页有交互 |
| **images/** | 存放图片文件 | ✅ 可直接访问 | 网页中的图片 |
| **WEB-INF/** | 存放配置和Java文件 | ❌ 不能直接访问 | 网站的"后台" |
| **classes/** | 存放Java字节码 | ❌ 不能直接访问 | 编译后的Java程序 |
| **lib/** | 存放JAR包 | ❌ 不能直接访问 | Java程序需要的工具包 |

> 🔒 **安全性说明**
> 
> **WEB-INF** 目录是受保护的，浏览器无法直接访问，这样可以保护：
> - 配置文件不被外部查看
> - Java源代码的安全性
> - 数据库连接信息等敏感内容

### 5.3 创建Web应用步骤


**步骤 1️⃣：** 在Tomcat的 `webapps` 目录下创建应用目录
```bash
📁 apache-tomcat-9.0/webapps/
└── 📁 mywebapp/        ← 创建这个目录
```

**步骤 2️⃣：** 创建基础目录结构
```bash
$ cd webapps
$ mkdir mywebapp
$ cd mywebapp
$ mkdir WEB-INF
$ mkdir WEB-INF/classes
$ mkdir WEB-INF/lib
```

**步骤 3️⃣：** 创建基础的 `web.xml` 文件

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         version="4.0">
    
    <!-- 应用显示名称 -->
    <display-name>我的第一个Web应用</display-name>
    
    <!-- 欢迎页面设置 -->
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>hello.jsp</welcome-file>
    </welcome-file-list>
    
</web-app>
```

---

## 6. 🚀 部署与运行 - 让程序跑起来


### 6.1 部署流程图


```
开发阶段                    部署阶段                   运行阶段
    │                          │                         │
 📝 编写JSP           →    📁 复制到webapps        →   🌐 浏览器访问
    │                          │                         │
 hello.jsp                mywebapp/hello.jsp         http://localhost:8080/mywebapp/hello.jsp
```

### 6.2 详细部署步骤


**步骤 1️⃣：文件放置**
```
📁 Tomcat目录/webapps/mywebapp/
├── hello.jsp                    ← 把JSP文件放这里
└── WEB-INF/
    └── web.xml                  ← 配置文件
```

**步骤 2️⃣：启动Tomcat服务器**

> 🖥️ **命令行操作**

<kbd>Windows用户</kbd>：
```cmd
C:\> cd D:\apache-tomcat-9.0\bin
C:\> startup.bat
```

<kbd>Linux/Mac用户</kbd>：
```bash
$ cd /usr/local/tomcat/bin
$ ./startup.sh
```

**步骤 3️⃣：验证启动成功**

在浏览器输入：`http://localhost:8080`
- ✅ 看到Tomcat欢迎页面 = 启动成功
- ❌ 页面无法打开 = 启动失败，检查日志

### 6.3 访问JSP页面


**🌐 浏览器访问地址格式**
```
http://服务器地址:端口号/应用名称/JSP文件名

示例：
http://localhost:8080/mywebapp/hello.jsp
│        │         │     │           │
协议    服务器地址  端口  应用名    JSP文件
```

### 6.4 常见问题排查


**🐛 问题1：页面显示404错误**
```
可能原因：
❌ JSP文件路径不正确
❌ 应用没有正确部署
❌ 文件名拼写错误

解决方法：
✅ 检查文件是否在正确的webapps目录下
✅ 确认URL拼写正确
✅ 重启Tomcat服务器
```

**🐛 问题2：页面显示500错误**
```
可能原因：
❌ JSP代码有语法错误
❌ 缺少必要的Java类库
❌ 中文编码问题

解决方法：
✅ 检查JSP语法是否正确
✅ 查看Tomcat日志文件
✅ 确保page指令中设置了正确的编码
```

**🐛 问题3：中文显示乱码**
```jsp
<!-- 在JSP文件开头加上这行 -->
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
```

### 6.5 JSP访问流程详解


```
浏览器发起请求
       ↓
    Tomcat接收请求
       ↓
   查找JSP文件
       ↓
第一次访问？ ──→ 是 ──→ 编译JSP为Servlet
       ↓                      ↓
       否                    保存class文件
       ↓                      ↓
   执行Servlet ←──────────────┘
       ↓
   生成HTML响应
       ↓
   返回给浏览器
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的基本概念


```
🔸 JSP本质：HTML + Java代码，在服务器端运行
🔸 工作原理：JSP → Servlet → HTML，转换执行机制
🔸 开发环境：JDK + Tomcat + IDE，缺一不可
🔸 目录结构：标准Web应用目录，WEB-INF受保护
🔸 部署运行：webapps目录部署，浏览器访问
```

### 7.2 关键理解要点


**🔹 JSP与HTML的区别**
```
HTML：静态页面，内容固定
JSP：动态页面，内容可变，能执行Java代码
```

**🔹 JSP标签记忆口诀**
```
<%= %> 输出显示用等号
<%  %> 代码执行无等号  
<%! %> 声明变量感叹号
```

**🔹 目录结构重点**
```
根目录：放JSP页面，可直接访问
WEB-INF：放配置文件，浏览器不能直接访问
```

### 7.3 实际应用指导


**✅ 适合JSP的场景**
- 需要动态生成内容的网页
- 需要与数据库交互的Web应用
- 企业级Web项目开发

**🎯 学习建议**
- 先掌握HTML基础再学JSP
- 熟练使用基本JSP标签
- 理解Web应用目录结构
- 多练习部署和调试

**🔧 开发技巧**
- 使用IDE提高开发效率
- 设置好字符编码避免乱码
- 查看Tomcat日志排查问题
- 养成良好的目录组织习惯

> 🧠 **学习心得**
> 
> JSP学习就像学开车：
> - **理论知识**：了解JSP工作原理（交通规则）
> - **环境准备**：搭建开发环境（准备车辆）  
> - **实践操作**：编写运行JSP（实际驾驶）
> - **问题解决**：调试排错能力（处理突发情况）

**核心记忆**：
- JSP = HTML + Java，服务器端动态网页技术
- 掌握基本标签语法，理解执行流程
- 标准目录结构，正确部署运行
- 多练习多调试，积累实战经验