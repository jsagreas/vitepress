---
title: 2、核心标签库
---
## 📚 目录

1. [JSTL核心标签库概述](#1-JSTL核心标签库概述)
2. [输出标签c:out](#2-输出标签c:out)
3. [变量操作标签](#3-变量操作标签)
4. [条件判断标签](#4-条件判断标签)
5. [多条件判断标签](#5-多条件判断标签)
6. [循环遍历标签](#6-循环遍历标签)
7. [字符串分割循环标签](#7-字符串分割循环标签)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🔧 JSTL核心标签库概述


### 1.1 什么是JSTL核心标签库


**通俗解释**：JSTL核心标签库就像是JSP页面的"瑞士军刀"，它提供了一套现成的标签，让我们不用写复杂的Java代码就能完成常见的页面操作。

```
简单理解：
传统方式：在JSP页面写一堆Java代码 ❌
JSTL方式：用简洁的标签完成相同功能 ✅

就像用遥控器控制电视，而不是手动调节电视机内部电路
```

### 1.2 核心标签库的作用


**🎯 主要功能**
- **数据输出**：安全地显示数据到页面
- **变量管理**：设置、获取、删除页面变量
- **逻辑控制**：条件判断、循环遍历
- **字符串处理**：分割、格式化文本

### 1.3 使用前的准备工作


**📋 引入步骤**
```jsp
<%-- 在JSP页面顶部添加这行代码 --%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
```

**🔸 标签前缀说明**
- `prefix="c"`：表示使用时标签前面要加"c:"
- 就像给标签起个"姓氏"，方便识别

---

## 2. 📤 输出标签c:out


### 2.1 c:out标签的作用


**通俗理解**：`<c:out>`就像是页面的"安全输出员"，它负责把数据安全地显示在网页上，防止恶意代码的攻击。

```
生活比喻：
普通输出 = 直接把别人说的话重复一遍（可能有危险）
c:out = 先检查内容是否安全，再说出来（更安全）
```

### 2.2 基本语法格式


**🔸 标准语法**
```jsp
<c:out value="要输出的内容" default="默认值" escapeXml="true/false"/>
```

**📊 参数说明表**
| 参数 | **作用** | **必需** | **默认值** |
|------|---------|----------|------------|
| `value` | 要输出的数据 | ✅ | 无 |
| `default` | 当value为空时显示的内容 | ❌ | 空字符串 |
| `escapeXml` | 是否转义HTML标签 | ❌ | true |

### 2.3 实际应用示例


**🔸 基础输出**
```jsp
<%-- 输出普通字符串 --%>
<c:out value="欢迎来到我的网站"/>
<!-- 页面显示：欢迎来到我的网站 -->

<%-- 输出变量值 --%>
<c:out value="${username}"/>
<!-- 如果username="张三"，页面显示：张三 -->
```

**🔸 带默认值的输出**
```jsp
<c:out value="${user.email}" default="邮箱未设置"/>
<!-- 如果email为空，显示：邮箱未设置 -->
```

**🔸 HTML安全处理**
```jsp
<%-- escapeXml="true"（默认）：安全模式 --%>
<c:out value="<script>alert('危险代码')</script>"/>
<!-- 页面显示：&lt;script&gt;alert('危险代码')&lt;/script&gt; -->

<%-- escapeXml="false"：直接输出（谨慎使用） --%>
<c:out value="<b>粗体文字</b>" escapeXml="false"/>
<!-- 页面显示：粗体文字（真正的粗体效果） -->
```

### 2.4 为什么要用c:out


**🛡️ 安全防护对比**

```
不安全的写法：
${userInput}  ← 直接输出，可能被XSS攻击

安全的写法：
<c:out value="${userInput}"/>  ← 自动转义，防止攻击
```

**💡 实际应用场景**
- **用户评论显示**：防止用户输入恶意脚本
- **搜索结果展示**：安全显示搜索关键词
- **表单回显**：安全显示用户之前输入的内容

---

## 3. 🔧 变量操作标签


### 3.1 c:set标签 - 设置变量


**通俗理解**：`<c:set>`就像是页面的"存储箱管理员"，负责往不同的存储箱（作用域）里放东西（变量）。

**🔸 基本语法**
```jsp
<c:set var="变量名" value="变量值" scope="作用域"/>
```

**📊 作用域说明**
| 作用域 | **生存范围** | **使用场景** |
|--------|-------------|-------------|
| `page` | 当前页面 | 页面内临时变量 |
| `request` | 当前请求 | 请求转发时传递数据 |
| `session` | 当前会话 | 用户登录信息等 |
| `application` | 整个应用 | 全局配置信息 |

### 3.2 c:set实际应用


**🔸 设置简单变量**
```jsp
<%-- 设置页面级别的变量 --%>
<c:set var="siteName" value="我的博客" scope="page"/>
<c:set var="currentYear" value="2025" scope="page"/>

<%-- 使用变量 --%>
<h1>${siteName} - ${currentYear}</h1>
<!-- 页面显示：我的博客 - 2025 -->
```

**🔸 设置对象属性**
```jsp
<%-- 假设有一个User对象 --%>
<c:set target="${user}" property="name" value="李四"/>
<c:set target="${user}" property="age" value="25"/>

<%-- 等价于Java代码：user.setName("李四"); user.setAge(25); --%>
```

**🔸 设置复杂表达式的结果**
```jsp
<c:set var="totalPrice" value="${price * quantity * (1 + taxRate)}"/>
<c:set var="isVIP" value="${user.points >= 1000}"/>
```

### 3.3 c:remove标签 - 删除变量


**通俗理解**：`<c:remove>`就像是"清洁工"，负责清理不再需要的变量，释放内存空间。

**🔸 基本语法**
```jsp
<c:remove var="变量名" scope="作用域"/>
```

**🔸 实际应用**
```jsp
<%-- 删除特定作用域的变量 --%>
<c:remove var="tempData" scope="request"/>

<%-- 删除所有作用域的同名变量 --%>
<c:remove var="oldUserInfo"/>
```

### 3.4 变量操作的最佳实践


**✅ 推荐做法**
```jsp
<%-- 在页面开始设置常用变量 --%>
<c:set var="contextPath" value="${pageContext.request.contextPath}"/>
<c:set var="isLoggedIn" value="${not empty sessionScope.user}"/>

<%-- 在页面结束清理临时变量 --%>
<c:remove var="tempCalculation" scope="page"/>
```

---

## 4. 🤔 条件判断标签


### 4.1 c:if标签概述


**通俗理解**：`<c:if>`就像是页面的"门卫"，根据条件决定是否让某些内容"通过"显示在页面上。

```
生活比喻：
if (天气好) {
    显示"今天适合出门"
}
```

**🔸 基本语法**
```jsp
<c:if test="条件表达式" var="结果变量名" scope="作用域">
    <!-- 条件为true时显示的内容 -->
</c:if>
```

### 4.2 条件表达式的写法


**📊 常见条件类型**
| 条件类型 | **示例** | **说明** |
|---------|---------|---------|
| 相等比较 | `${age == 18}` | 数值相等 |
| 字符串比较 | `${name eq 'admin'}` | 字符串相等 |
| 大小比较 | `${score >= 60}` | 数值大小 |
| 空值检查 | `${empty username}` | 检查是否为空 |
| 逻辑运算 | `${age >= 18 and gender eq 'male'}` | 多条件组合 |

### 4.3 c:if实际应用示例


**🔸 用户权限控制**
```jsp
<c:if test="${user.role eq 'admin'}">
    <a href="admin.jsp">管理后台</a>
</c:if>

<c:if test="${not empty sessionScope.user}">
    <p>欢迎回来，${user.username}!</p>
</c:if>
```

**🔸 数据显示控制**
```jsp
<c:if test="${productList.size() > 0}">
    <div class="product-container">
        <!-- 显示产品列表 -->
    </div>
</c:if>

<c:if test="${empty productList}">
    <div class="no-data">暂无商品信息</div>
</c:if>
```

**🔸 保存条件结果**
```jsp
<c:if test="${score >= 90}" var="isExcellent" scope="page">
    <span class="badge excellent">优秀</span>
</c:if>

<%-- 后续可以使用isExcellent变量 --%>
<c:if test="${isExcellent}">
    <p>恭喜获得优秀评级！</p>
</c:if>
```

### 4.4 c:if的使用技巧


**💡 实用技巧**

```
灵活运用empty操作符：
${empty str}          - 字符串为空或null
${not empty list}     - 集合不为空
${empty param.name}   - 请求参数不存在
```

**🔸 复杂条件示例**
```jsp
<c:if test="${user.age >= 18 and user.status eq 'active' and not empty user.email}">
    <button class="btn-primary">立即购买</button>
</c:if>
```

---

## 5. 🔀 多条件判断标签


### 5.1 多条件标签组合概述


**通俗理解**：如果说`<c:if>`是"单选题"，那么`<c:choose>`、`<c:when>`、`<c:otherwise>`的组合就是"多选题"，可以处理复杂的多分支逻辑。

```
程序逻辑类比：
if (条件1) {
    // 做事情1
} else if (条件2) {
    // 做事情2  
} else {
    // 默认处理
}
```

### 5.2 标签结构和语法


**🔸 完整语法结构**
```jsp
<c:choose>
    <c:when test="条件1">
        <!-- 条件1为true时的内容 -->
    </c:when>
    <c:when test="条件2">
        <!-- 条件2为true时的内容 -->
    </c:when>
    <c:otherwise>
        <!-- 所有条件都为false时的内容 -->
    </c:otherwise>
</c:choose>
```

**📋 标签组合规则**
- `<c:choose>`：最外层容器，只能包含`<c:when>`和`<c:otherwise>`
- `<c:when>`：可以有多个，按顺序执行，找到第一个true就停止
- `<c:otherwise>`：可选的，相当于默认情况，最多只能有一个

### 5.3 实际应用场景


**🔸 用户等级显示**
```jsp
<c:choose>
    <c:when test="${user.points >= 10000}">
        <span class="vip-gold">💎 钻石会员</span>
    </c:when>
    <c:when test="${user.points >= 5000}">
        <span class="vip-silver">🥈 白金会员</span>
    </c:when>
    <c:when test="${user.points >= 1000}">
        <span class="vip-bronze">🥉 黄金会员</span>
    </c:when>
    <c:otherwise>
        <span class="normal-user">👤 普通用户</span>
    </c:otherwise>
</c:choose>
```

**🔸 成绩等级评定**
```jsp
<c:choose>
    <c:when test="${score >= 90}">
        <div class="grade excellent">
            <h3>优秀 (${score}分)</h3>
            <p>表现非常出色！</p>
        </div>
    </c:when>
    <c:when test="${score >= 80}">
        <div class="grade good">
            <h3>良好 (${score}分)</h3>
            <p>继续保持！</p>
        </div>
    </c:when>
    <c:when test="${score >= 60}">
        <div class="grade pass">
            <h3>及格 (${score}分)</h3>
            <p>还需要努力！</p>
        </div>
    </c:when>
    <c:otherwise>
        <div class="grade fail">
            <h3>不及格 (${score}分)</h3>
            <p>需要重新学习</p>
        </div>
    </c:otherwise>
</c:choose>
```

**🔸 页面布局控制**
```jsp
<c:choose>
    <c:when test="${param.layout eq 'grid'}">
        <div class="grid-layout">
            <!-- 网格布局 -->
        </div>
    </c:when>
    <c:when test="${param.layout eq 'list'}">
        <div class="list-layout">
            <!-- 列表布局 -->
        </div>
    </c:when>
    <c:otherwise>
        <div class="default-layout">
            <!-- 默认布局 -->
        </div>
    </c:otherwise>
</c:choose>
```

### 5.4 与c:if的选择建议


**🎯 使用选择指南**

```
使用c:if的场景：
✅ 只需要判断一个条件
✅ 多个独立的条件（可以同时满足）

使用c:choose的场景：
✅ 多个互斥的条件（只能满足一个）
✅ 需要默认处理情况
✅ 条件有优先级顺序
```

---

## 6. 🔄 循环遍历标签


### 6.1 c:forEach标签概述


**通俗理解**：`<c:forEach>`就像是"流水线工人"，可以对一批数据进行重复性操作，把每个数据都用相同的方式处理一遍。

```
生活比喻：
有一箱苹果，要给每个苹果都贴上价格标签
forEach就是负责：拿出苹果 → 贴标签 → 放回去 → 继续下一个
```

### 6.2 基本语法格式


**🔸 遍历集合语法**
```jsp
<c:forEach items="集合" var="当前项变量名" varStatus="状态变量名">
    <!-- 对每个项目的处理 -->
</c:forEach>
```

**🔸 数值范围循环语法**
```jsp
<c:forEach begin="开始值" end="结束值" step="步长" var="计数变量">
    <!-- 循环体 -->
</c:forEach>
```

**📊 重要参数说明**
| 参数 | **作用** | **示例值** |
|------|---------|-----------|
| `items` | 要遍历的集合 | `${userList}` |
| `var` | 当前循环项的变量名 | `user` |
| `varStatus` | 循环状态信息 | `status` |
| `begin` | 开始索引/值 | `0` 或 `1` |
| `end` | 结束索引/值 | `10` |
| `step` | 步长 | `1`（默认），`2` |

### 6.3 遍历集合的应用


**🔸 遍历用户列表**
```jsp
<table class="user-table">
    <thead>
        <tr>
            <th>序号</th>
            <th>用户名</th>
            <th>邮箱</th>
            <th>注册时间</th>
        </tr>
    </thead>
    <tbody>
        <c:forEach items="${userList}" var="user" varStatus="status">
            <tr class="${status.index % 2 == 0 ? 'even-row' : 'odd-row'}">
                <td>${status.count}</td>
                <td>${user.username}</td>
                <td>${user.email}</td>
                <td>${user.registerDate}</td>
            </tr>
        </c:forEach>
    </tbody>
</table>
```

**🔸 遍历商品分类**
```jsp
<div class="category-menu">
    <c:forEach items="${categoryList}" var="category" varStatus="loop">
        <a href="category.jsp?id=${category.id}" 
           class="category-link ${loop.first ? 'first' : ''} ${loop.last ? 'last' : ''}">
            ${category.name}
            <span class="count">(${category.productCount})</span>
        </a>
    </c:forEach>
</div>
```

### 6.4 varStatus状态对象详解


**📋 状态对象属性表**
| 属性 | **含义** | **数据类型** | **使用示例** |
|------|---------|-------------|-------------|
| `index` | 当前索引（从0开始） | int | `${status.index}` |
| `count` | 当前计数（从1开始） | int | `${status.count}` |
| `first` | 是否第一个 | boolean | `${status.first}` |
| `last` | 是否最后一个 | boolean | `${status.last}` |
| `current` | 当前对象 | Object | `${status.current}` |

**🔸 状态对象实际应用**
```jsp
<c:forEach items="${newsList}" var="news" varStatus="loop">
    <div class="news-item 
                ${loop.first ? 'featured' : ''} 
                ${loop.count <= 3 ? 'top-news' : ''}">
        
        <span class="news-number">${loop.count}</span>
        <h3>${news.title}</h3>
        <p>${news.summary}</p>
        
        <c:if test="${not loop.last}">
            <hr class="divider">
        </c:if>
    </div>
</c:forEach>
```

### 6.5 数值范围循环


**🔸 生成页码导航**
```jsp
<div class="pagination">
    <c:forEach begin="1" end="${totalPages}" var="pageNum">
        <c:choose>
            <c:when test="${pageNum == currentPage}">
                <span class="current-page">${pageNum}</span>
            </c:when>
            <c:otherwise>
                <a href="?page=${pageNum}" class="page-link">${pageNum}</a>
            </c:otherwise>
        </c:choose>
    </c:forEach>
</div>
```

**🔸 生成年份下拉选择**
```jsp
<select name="birthYear" class="year-select">
    <option value="">请选择年份</option>
    <c:forEach begin="1950" end="2025" var="year">
        <option value="${year}" ${year == selectedYear ? 'selected' : ''}>
            ${year}年
        </option>
    </c:forEach>
</select>
```

### 6.6 循环的高级用法


**🔸 嵌套循环示例**
```jsp
<div class="grade-report">
    <c:forEach items="${classList}" var="classInfo" varStatus="classLoop">
        <div class="class-section">
            <h2>${classInfo.className}</h2>
            <table>
                <c:forEach items="${classInfo.students}" var="student" varStatus="stuLoop">
                    <tr class="${stuLoop.index % 2 == 0 ? 'even' : 'odd'}">
                        <td>${classLoop.count}.${stuLoop.count}</td>
                        <td>${student.name}</td>
                        <td>${student.score}</td>
                    </tr>
                </c:forEach>
            </table>
        </div>
    </c:forEach>
</div>
```

---

## 7. ✂️ 字符串分割循环标签


### 7.1 c:forTokens标签概述


**通俗理解**：`<c:forTokens>`就像是"字符串切片机"，可以把一个长字符串按照指定的分隔符切成小段，然后对每一小段进行处理。

```
生活比喻：
把"苹果,香蕉,橙子,葡萄"这个字符串
用逗号作为"刀"，切成：苹果、香蕉、橙子、葡萄
然后对每个水果分别处理
```

### 7.2 基本语法格式


**🔸 标准语法**
```jsp
<c:forTokens items="要分割的字符串" 
             delims="分隔符" 
             var="当前片段变量名" 
             varStatus="状态变量名">
    <!-- 对每个片段的处理 -->
</c:forTokens>
```

**📊 参数详解**
| 参数 | **作用** | **示例** |
|------|---------|---------|
| `items` | 要分割的字符串 | `"apple,banana,orange"` |
| `delims` | 分隔符（可以多个） | `","` 或 `", |"` |
| `var` | 当前分割片段的变量名 | `fruit` |
| `varStatus` | 循环状态信息 | `status` |

### 7.3 实际应用场景


**🔸 处理标签字符串**
```jsp
<%-- 假设文章的tags字段存储为"Java,Spring,数据库,Web开发" --%>
<div class="article-tags">
    <span>标签：</span>
    <c:forTokens items="${article.tags}" delims="," var="tag" varStatus="tagLoop">
        <span class="tag-item">
            #${tag}
            <c:if test="${not tagLoop.last}">&nbsp;</c:if>
        </span>
    </c:forTokens>
</div>
```

**🔸 处理技能列表**
```jsp
<%-- 假设用户技能存储为"HTML;CSS;JavaScript;Vue.js;Node.js" --%>
<div class="skills-container">
    <h3>技能专长</h3>
    <div class="skills-list">
        <c:forTokens items="${user.skills}" delims=";" var="skill" varStatus="loop">
            <div class="skill-badge ${loop.count <= 3 ? 'primary' : 'secondary'}">
                <i class="skill-icon"></i>
                <span>${skill}</span>
            </div>
        </c:forTokens>
    </div>
</div>
```

**🔸 处理导航路径**
```jsp
<%-- 面包屑导航：首页>产品中心>手机>iPhone --%>
<nav class="breadcrumb">
    <c:forTokens items="${breadcrumbPath}" delims=">" var="pathItem" varStatus="pathLoop">
        <c:choose>
            <c:when test="${pathLoop.last}">
                <span class="current-path">${pathItem}</span>
            </c:when>
            <c:otherwise>
                <a href="#" class="path-link">${pathItem}</a>
                <span class="separator">></span>
            </c:otherwise>
        </c:choose>
    </c:forTokens>
</nav>
```

### 7.4 多分隔符处理


**🔸 复杂分隔符示例**
```jsp
<%-- 处理包含多种分隔符的数据："apple,banana|orange;grape cherry" --%>
<div class="mixed-fruits">
    <c:forTokens items="${mixedFruitString}" delims=",|; " var="fruit" varStatus="status">
        <div class="fruit-item ${status.index % 4 == 0 ? 'highlight' : ''}">
            <span class="number">${status.count}.</span>
            <span class="name">${fruit}</span>
        </div>
    </c:forTokens>
</div>
```

### 7.5 与c:forEach的对比


**🔄 选择指南**

```
使用c:forEach的场景：
✅ 遍历List、Array等集合对象
✅ 需要访问对象的完整属性
✅ 数据已经是结构化的

使用c:forTokens的场景：  
✅ 处理分隔符分割的字符串
✅ 简单的文本数据处理
✅ 需要快速分割显示字符串
```

**🔸 实际对比示例**
```jsp
<%-- 如果数据存储在List中 --%>
<c:forEach items="${fruitList}" var="fruit">
    <span>${fruit.name} - ${fruit.price}元</span>
</c:forEach>

<%-- 如果数据存储为字符串 --%>
<c:forTokens items="${fruitString}" delims="," var="fruit">
    <span>${fruit}</span>
</c:forTokens>
```

### 7.6 常见应用技巧


**💡 实用技巧总结**

**🔸 条件处理**
```jsp
<c:forTokens items="${user.hobbies}" delims="," var="hobby" varStatus="loop">
    <c:if test="${not empty hobby}">
        <span class="hobby-tag">${hobby}</span>
    </c:if>
</c:forTokens>
```

**🔸 格式化输出**
```jsp
<p>用户兴趣：
<c:forTokens items="${interests}" delims="," var="interest" varStatus="status">
    ${interest}<c:if test="${not status.last}">、</c:if>
</c:forTokens>
</p>
```

---

## 8. 📋 核心要点总结


### 8.1 JSTL核心标签总览


```
输出标签：<c:out>           → 安全输出数据
变量标签：<c:set>, <c:remove> → 管理页面变量  
条件标签：<c:if>            → 单一条件判断
分支标签：<c:choose>等       → 多条件分支处理
循环标签：<c:forEach>       → 遍历集合数据
分割标签：<c:forTokens>     → 处理分隔字符串
```

### 8.2 使用场景选择指南


**🎯 标签选择原则**
| 需求场景 | **推荐标签** | **理由** |
|----------|-------------|---------|
| 显示用户输入内容 | `<c:out>` | 防XSS攻击，安全输出 |
| 显示用户等级 | `<c:choose>` | 多级条件判断 |
| 显示商品列表 | `<c:forEach>` | 遍历集合对象 |
| 显示文章标签 | `<c:forTokens>` | 分割字符串显示 |

### 8.3 最佳实践建议


**✅ 推荐做法**
- 优先使用`<c:out>`进行数据输出，保证安全性
- 合理设置变量作用域，避免内存浪费
- 善用`varStatus`获取循环状态信息
- 复杂条件优先使用`<c:choose>`而不是多个`<c:if>`

**❌ 避免的问题**
- 不要在循环中设置过多的全局变量
- 避免过深的嵌套循环影响性能
- 不要忽略`escapeXml`的安全设置
- 避免在大数据集上使用复杂的条件判断

### 8.4 记忆要点


**🧠 核心记忆口诀**
```
数据输出用out，安全第一要记牢
变量管理set删除，作用域别搞混淆  
单一条件用if，多重分支choose好
集合遍历forEach，字符分割forTokens巧
```

**🔍 快速查阅清单**
- `<c:out value="" default="" escapeXml="true"/>`
- `<c:set var="" value="" scope=""/>`  
- `<c:if test="" var="" scope="">`
- `<c:choose><c:when><c:otherwise>`
- `<c:forEach items="" var="" varStatus="">`
- `<c:forTokens items="" delims="" var="">`

### 8.5 进阶学习建议


**📚 后续学习方向**
1. **JSTL格式化标签库**：处理日期、数字格式化
2. **JSTL函数库**：字符串处理函数
3. **自定义标签开发**：创建项目专用标签
4. **性能优化技巧**：大数据量下的标签使用优化

**🎯 实践建议**
- 在实际项目中逐个尝试每个标签
- 对比传统Java代码和JSTL标签的差异
- 关注页面性能和用户体验
- 学习查看生成的HTML源码，理解标签的实际作用