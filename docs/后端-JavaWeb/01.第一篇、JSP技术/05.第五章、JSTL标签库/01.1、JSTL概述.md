---
title: 1、JSTL概述
---
## 📚 目录

1. [JSTL技术概述](#1-JSTL技术概述)
2. [JSTL环境配置](#2-JSTL环境配置)
3. [标签库声明与基础语法](#3-标签库声明与基础语法)
4. [JSTL与EL表达式结合使用](#4-JSTL与EL表达式结合使用)
5. [核心要点总结](#5-核心要点总结)

---

## 1. 🔍 JSTL技术概述


### 1.1 什么是JSTL？


**💡 通俗理解**
想象你在写JSP页面，如果用传统方式写一个循环显示用户列表，代码会很乱：

```jsp
<!-- 传统写法：Java代码和HTML混在一起 -->
<% 
List<User> users = (List<User>) request.getAttribute("users");
for(User user : users) {
%>
  <div>用户名：<%= user.getName() %></div>
<%
}
%>
```

用JSTL后，代码变得清爽多了：
```jsp
<!-- JSTL写法：清晰简洁 -->
<c:forEach var="user" items="${users}">
  <div>用户名：${user.name}</div>
</c:forEach>
```

**🎯 核心定义**
```
JSTL = JavaServer Pages Standard Tag Library
中文名：JSP标准标签库

简单说：JSTL就是一套现成的标签，让你在JSP页面中不用写Java代码
也能完成判断、循环、格式化等常见操作。
```

### 1.2 JSTL的主要作用


**🔸 解决的问题**
```
问题1：JSP页面中Java代码太多，难以维护
解决：用标签代替Java代码

问题2：前端开发人员看不懂Java代码
解决：标签语法类似HTML，前端人员容易理解

问题3：代码复用性差
解决：标准化的标签，到处都能用
```

**⭐ 核心优势**
- **代码清晰**：不用在HTML里写一堆Java代码
- **维护方便**：标签比Java代码更容易理解和修改
- **标准化**：所有项目都用相同的标签，学会一次到处用
- **功能丰富**：提供判断、循环、格式化、国际化等功能

### 1.3 JSTL标签库分类


**📦 五大标签库**

| 标签库类型 | **作用** | **常用标签** | **使用频率** |
|-----------|---------|-------------|-------------|
| 🔥 **Core核心库** | `条件判断、循环、变量操作` | `c:if、c:forEach、c:set` | `⭐⭐⭐` |
| 🔢 **fmt格式化库** | `日期、数字、国际化格式` | `fmt:formatDate、fmt:formatNumber` | `⭐⭐⭐` |
| 📊 **sql数据库库** | `数据库操作（不推荐）` | `sql:query、sql:update` | `⭐` |
| 🌐 **xml处理库** | `XML文档处理` | `x:parse、x:forEach` | `⭐` |
| 🔧 **functions函数库** | `字符串处理函数` | `fn:length、fn:contains` | `⭐⭐` |

> 💡 **新手建议**：重点掌握Core核心库和fmt格式化库，这两个最常用！

---

## 2. ⚙️ JSTL环境配置


### 2.1 为什么需要导入jar包？


**🤔 新手疑问**
为什么JSP页面要单独导入JSTL的jar包？

**💡 通俗解释**
```
类比理解：
JSP = 一台电脑
JSTL = 软件程序

电脑买来时只有操作系统，要用QQ、微信等软件，需要单独安装。
同样，JSP默认只支持基本功能，要用JSTL标签，需要导入相应的jar包。
```

### 2.2 JSTL依赖配置


**📦 Maven项目配置**
如果你用的是Maven项目，在`pom.xml`中添加：

```xml
<!-- JSTL标签库依赖 -->
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>

<!-- Standard标签库实现 -->
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>
```

**📁 普通Web项目配置**
```
手动下载jar包，放到项目的WEB-INF/lib目录下：
- jstl.jar          // JSTL接口定义
- standard.jar      // JSTL具体实现

下载地址：Apache官网或Maven中央仓库
```

### 2.3 验证JSTL是否配置成功


**✅ 简单测试**
创建一个测试JSP页面：

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
    <title>JSTL测试</title>
</head>
<body>
    <c:set var="message" value="JSTL配置成功！"/>
    <h1>${message}</h1>
</body>
</html>
```

如果页面显示"JSTL配置成功！"，说明配置OK了。

---

## 3. 📝 标签库声明与基础语法


### 3.1 taglib指令详解


**🔸 什么是taglib指令？**
```
简单理解：就是告诉JSP页面"我要用哪个标签库"

类比：
在Word文档开头声明"本文档使用宋体字"
在JSP页面开头声明"本页面使用JSTL标签"
```

**📋 标准语法格式**
```jsp
<%@ taglib prefix="前缀名" uri="标签库的唯一标识" %>
```

**🔍 参数说明**

| 参数 | **含义** | **作用** | **示例** |
|------|---------|---------|---------|
| `prefix` | `标签前缀` | `区分不同标签库，避免冲突` | `c、fmt、fn` |
| `uri` | `标签库标识` | `系统根据uri找到对应的标签库` | `http://java.sun.com/jsp/jstl/core` |

### 3.2 常用标签库声明


**📚 五大标签库的声明方式**

```jsp
<!-- 1. 核心标签库（最常用） -->
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!-- 2. 格式化标签库 -->
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!-- 3. 函数标签库 -->
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<!-- 4. SQL标签库（不推荐在实际项目中使用） -->
<%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %>

<!-- 5. XML标签库（使用较少） -->
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" %>
```

> ⚠️ **注意事项**：taglib指令必须写在JSP页面的顶部，在任何HTML内容之前！

### 3.3 标签使用基础语法


**🔸 标签的基本结构**
```
JSTL标签遵循XML语法规则：

单标签形式：<前缀:标签名 属性="值" />
双标签形式：<前缀:标签名 属性="值">内容</前缀:标签名>
```

**💡 实际使用示例**

```jsp
<!-- 单标签：设置变量 -->
<c:set var="username" value="张三" />

<!-- 双标签：条件判断 -->
<c:if test="${username != null}">
    欢迎用户：${username}
</c:if>

<!-- 双标签：循环遍历 -->
<c:forEach var="i" begin="1" end="5">
    第${i}项<br/>
</c:forEach>
```

---

## 4. 🤝 JSTL与EL表达式结合使用


### 4.1 什么是EL表达式？


**💡 通俗理解**
```
EL = Expression Language（表达式语言）
格式：${表达式}

作用：在JSP页面中获取数据，不用写Java代码

传统方式：<%= request.getAttribute("username") %>
EL方式：${username}

看，是不是简洁多了！
```

### 4.2 EL在JSTL中的作用


**🎯 完美搭档关系**
```
JSTL标签 + EL表达式 = 完美组合

JSTL：提供逻辑控制（判断、循环等）
EL：提供数据获取（从域对象中取值）

就像汽车的发动机和轮子，缺一不可！
```

### 4.3 结合使用的典型场景


**🔸 场景1：条件判断**
```jsp
<!-- 判断用户是否登录 -->
<c:if test="${user != null}">
    <div>欢迎，${user.name}！</div>
</c:if>

<c:if test="${user == null}">
    <div><a href="login.jsp">请登录</a></div>
</c:if>
```

**🔸 场景2：循环遍历**
```jsp
<!-- 显示商品列表 -->
<c:forEach var="product" items="${productList}">
    <div class="product">
        <h3>${product.name}</h3>
        <p>价格：￥${product.price}</p>
        <p>库存：${product.stock}件</p>
    </div>
</c:forEach>
```

**🔸 场景3：数据格式化**
```jsp
<!-- 格式化日期和金额 -->
<fmt:formatDate value="${order.createTime}" pattern="yyyy-MM-dd HH:mm:ss"/>
<fmt:formatNumber value="${order.totalAmount}" pattern="#,##0.00"/>
```

### 4.4 数据流向图解


```
Servlet后台                     JSP页面
    |                             |
    ├─ 处理业务逻辑                 ├─ 使用JSTL标签控制页面逻辑
    ├─ 查询数据库                   ├─ 使用EL表达式获取数据
    ├─ 封装数据对象                 └─ 渲染最终HTML页面
    └─ 存储到域对象 ──数据传递──→
       (request/session/application)
```

**🔍 具体示例分析**

**后台Servlet代码：**
```java
// 模拟获取用户列表
List<User> users = userService.getAllUsers();
request.setAttribute("users", users);
request.setAttribute("totalCount", users.size());
```

**前台JSP代码：**
```jsp
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<h2>用户列表（共${totalCount}人）</h2>

<c:choose>
    <c:when test="${totalCount > 0}">
        <table>
            <c:forEach var="user" items="${users}" varStatus="status">
                <tr>
                    <td>${status.count}</td>
                    <td>${user.name}</td>
                    <td>${user.age}岁</td>
                </tr>
            </c:forEach>
        </table>
    </c:when>
    <c:otherwise>
        <p>暂无用户数据</p>
    </c:otherwise>
</c:choose>
```

**📊 运行效果分析**
```
数据传递过程：
1. Servlet查询数据库 → 得到用户列表
2. 将列表存入request域 → request.setAttribute("users", users)
3. 转发到JSP页面 → forward到user_list.jsp
4. JSP用EL获取数据 → ${users}、${totalCount}
5. JSTL控制页面逻辑 → c:forEach遍历、c:choose判断
6. 最终生成HTML → 浏览器显示用户列表
```

---

## 5. 📋 核心要点总结


### 5.1 必须掌握的核心概念


```
🔸 JSTL本质：JSP标准标签库，用标签代替Java代码
🔸 主要优势：代码清晰、维护方便、标准化、功能丰富  
🔸 环境配置：需要导入jstl.jar和standard.jar两个包
🔸 标签库声明：用<%@ taglib %>指令声明要使用的标签库
🔸 与EL结合：JSTL负责逻辑控制，EL负责数据获取
```

### 5.2 关键理解要点


**🔹 JSTL的价值**
```
传统JSP的问题：
- Java代码和HTML混杂，难以维护
- 前端人员看不懂Java语法
- 代码复用性差

JSTL的解决方案：
- 用标签替代Java代码
- 语法类似HTML，容易理解  
- 标准化标签，通用性强
```

**🔹 标签库的选择原则**
```
常用组合推荐：
✅ 核心库(core) + 格式化库(fmt) → 覆盖90%的使用场景
✅ 再加函数库(fn) → 处理字符串操作需求

不推荐：
❌ SQL标签库 → 违反MVC分层原则
❌ XML标签库 → 现在很少用XML格式
```

**🔹 与EL表达式的协作**
```
分工明确：
JSTL标签 → 控制页面逻辑（判断、循环、格式化）
EL表达式 → 获取和显示数据（从域对象中取值）

配合使用：
<c:if test="${EL表达式}">JSTL控制逻辑</c:if>
<c:forEach items="${EL表达式}">...</c:forEach>
```

### 5.3 实际开发指导


**✅ 最佳实践**
```
1. 页面顶部统一声明所需标签库
2. 优先使用核心库和格式化库
3. 标签属性值多用EL表达式获取动态数据
4. 避免在JSTL标签中嵌套Java代码
5. 合理使用c:choose替代多个c:if判断
```

**⚠️ 常见陷阱**
```
1. 忘记导入jar包 → 标签无法识别
2. taglib声明位置错误 → 写在HTML内容后面
3. 标签语法不规范 → 不符合XML语法要求
4. EL表达式语法错误 → ${}内部语法不对
5. 域对象数据为空 → 没有判空处理
```

**🎯 学习重点**
```
第一优先级：
- 掌握环境配置和标签库声明
- 学会c:if、c:forEach、c:set等核心标签
- 理解JSTL与EL的配合使用

第二优先级：
- 掌握fmt格式化标签
- 了解fn函数库的常用函数
- 学会复杂的条件判断c:choose

扩展学习：
- 自定义标签库开发
- JSTL源码分析
- 性能优化技巧
```

**核心记忆口诀**：
- JSTL标签替Java码，页面清爽易维护
- 环境配置jar包全，标签声明要在前  
- 核心格式最重要，EL配合效果好
- 逻辑控制用标签，数据获取靠EL拿