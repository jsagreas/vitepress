---
title: 3ã€å•†å“å±•ç¤ºç³»ç»Ÿ
---
## ğŸ“š ç›®å½•

1. [å•†å“å±•ç¤ºç³»ç»Ÿæ¦‚è¿°](#1-å•†å“å±•ç¤ºç³»ç»Ÿæ¦‚è¿°)
2. [å•†å“åˆ—è¡¨é¡µé¢å®ç°](#2-å•†å“åˆ—è¡¨é¡µé¢å®ç°)
3. [å•†å“è¯¦æƒ…å±•ç¤ºåŠŸèƒ½](#3-å•†å“è¯¦æƒ…å±•ç¤ºåŠŸèƒ½)
4. [åˆ†ç±»ç­›é€‰åŠŸèƒ½å®ç°](#4-åˆ†ç±»ç­›é€‰åŠŸèƒ½å®ç°)
5. [æœç´¢åŠŸèƒ½å¼€å‘](#5-æœç´¢åŠŸèƒ½å¼€å‘)
6. [å›¾ç‰‡ä¸Šä¼ ä¸æ˜¾ç¤º](#6-å›¾ç‰‡ä¸Šä¼ ä¸æ˜¾ç¤º)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›ï¸ å•†å“å±•ç¤ºç³»ç»Ÿæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯å•†å“å±•ç¤ºç³»ç»Ÿ


**ğŸ’¡ é€šä¿—è§£é‡Š**ï¼š
å•†å“å±•ç¤ºç³»ç»Ÿå°±åƒç½‘ä¸Šå•†åŸçš„å•†å“å±•ç¤ºéƒ¨åˆ†ï¼Œæ¯”å¦‚æ·˜å®ã€äº¬ä¸œçš„å•†å“é¡µé¢ã€‚ç”¨æˆ·å¯ä»¥ï¼š
- æµè§ˆæ‰€æœ‰å•†å“åˆ—è¡¨
- æŸ¥çœ‹å•ä¸ªå•†å“çš„è¯¦ç»†ä¿¡æ¯  
- æŒ‰ç±»åˆ«ç­›é€‰å•†å“
- æœç´¢è‡ªå·±æƒ³è¦çš„å•†å“
- æŸ¥çœ‹å•†å“å›¾ç‰‡

**ğŸ¯ ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½**ï¼š
```
å•†å“å±•ç¤ºç³»ç»ŸåŠŸèƒ½å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å•†å“å±•ç¤ºç³»ç»Ÿ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å•†å“åˆ—è¡¨   â”‚    å•†å“è¯¦æƒ…       â”‚
â”‚  - åˆ†é¡µæ˜¾ç¤º â”‚    - è¯¦ç»†ä¿¡æ¯     â”‚
â”‚  - ç¼©ç•¥å›¾   â”‚    - å¤§å›¾æ˜¾ç¤º     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ†ç±»ç­›é€‰   â”‚    æœç´¢åŠŸèƒ½       â”‚
â”‚  - æŒ‰ç±»åˆ«   â”‚    - æŒ‰åç§°       â”‚
â”‚  - æŒ‰ä»·æ ¼   â”‚    - æŒ‰å…³é”®è¯     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›¾ç‰‡ç®¡ç†   â”‚    æ•°æ®åº“æ“ä½œ     â”‚
â”‚  - ä¸Šä¼      â”‚    - å¢åˆ æ”¹æŸ¥     â”‚
â”‚  - æ˜¾ç¤º     â”‚    - æ•°æ®éªŒè¯     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€æœ¯æ¶æ„ç»„æˆ


**ğŸ”§ æŠ€æœ¯æ ˆè¯´æ˜**ï¼š
- **å‰ç«¯æ˜¾ç¤º**ï¼šJSPé¡µé¢ + HTML + CSS
- **åç«¯é€»è¾‘**ï¼šJava Servlet + JavaBean
- **æ•°æ®å­˜å‚¨**ï¼šMySQLæ•°æ®åº“
- **å›¾ç‰‡å¤„ç†**ï¼šæ–‡ä»¶ä¸Šä¼  + è·¯å¾„å­˜å‚¨

**ğŸ“Š ç³»ç»Ÿæµç¨‹**ï¼š
```
ç”¨æˆ·è¯·æ±‚æµç¨‹ï¼š
æµè§ˆå™¨ â†’ JSPé¡µé¢ â†’ Servletå¤„ç† â†’ æ•°æ®åº“æŸ¥è¯¢ â†’ è¿”å›ç»“æœ â†’ JSPæ˜¾ç¤º
   â†“                                                        â†‘
æ˜¾ç¤ºå•†å“ â†â”€â”€â”€ æ ¼å¼åŒ–æ•°æ® â†â”€â”€â”€ ä¸šåŠ¡é€»è¾‘ â†â”€â”€â”€ è·å–æ•°æ® â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ“‹ å•†å“åˆ—è¡¨é¡µé¢å®ç°


### 2.1 æ•°æ®åº“è¡¨è®¾è®¡


**ğŸ—ƒï¸ å•†å“è¡¨ç»“æ„**ï¼š
```sql
-- å•†å“ä¿¡æ¯è¡¨
CREATE TABLE products (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL COMMENT 'å•†å“åç§°',
    price DECIMAL(10,2) NOT NULL COMMENT 'å•†å“ä»·æ ¼', 
    category_id INT COMMENT 'åˆ†ç±»ID',
    description TEXT COMMENT 'å•†å“æè¿°',
    image_url VARCHAR(200) COMMENT 'å•†å“å›¾ç‰‡è·¯å¾„',
    stock INT DEFAULT 0 COMMENT 'åº“å­˜æ•°é‡',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- å•†å“åˆ†ç±»è¡¨
CREATE TABLE categories (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL COMMENT 'åˆ†ç±»åç§°',
    description VARCHAR(200) COMMENT 'åˆ†ç±»æè¿°'
);
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼š
> - `DECIMAL(10,2)` è¡¨ç¤ºæœ€å¤š10ä½æ•°å­—ï¼Œå°æ•°ç‚¹å2ä½ï¼Œé€‚åˆå­˜å‚¨ä»·æ ¼
> - `AUTO_INCREMENT` è¡¨ç¤ºè‡ªåŠ¨é€’å¢ï¼Œæ’å…¥æ•°æ®æ—¶IDè‡ªåŠ¨+1
> - `DEFAULT` è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ›å»ºæ—¶é—´è‡ªåŠ¨è®¾ä¸ºå½“å‰æ—¶é—´

### 2.2 å•†å“åˆ—è¡¨JSPé¡µé¢


**ğŸ“„ productList.jsp æ ¸å¿ƒä»£ç **ï¼š
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.*" %>
<%@ page import="com.example.bean.Product" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
<head>
    <title>å•†å“åˆ—è¡¨</title>
    <style>
        .product-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .product-card { border: 1px solid #ddd; padding: 15px; text-align: center; }
        .product-image { width: 150px; height: 150px; object-fit: cover; }
        .product-price { color: #e74c3c; font-weight: bold; font-size: 18px; }
    </style>
</head>
<body>
    <h1>ğŸ›ï¸ å•†å“å±•ç¤ºä¸­å¿ƒ</h1>
    
    <!-- å•†å“åˆ—è¡¨å±•ç¤º -->
    <div class="product-grid">
        <c:forEach var="product" items="${productList}">
            <div class="product-card">
                <img src="${product.imageUrl}" alt="${product.name}" class="product-image">
                <h3>${product.name}</h3>
                <p class="product-price">ï¿¥${product.price}</p>
                <p>åº“å­˜ï¼š${product.stock}ä»¶</p>
                <a href="productDetail.jsp?id=${product.id}">æŸ¥çœ‹è¯¦æƒ…</a>
            </div>
        </c:forEach>
    </div>
    
    <!-- åˆ†é¡µå¯¼èˆª -->
    <div class="pagination">
        <c:if test="${currentPage > 1}">
            <a href="?page=${currentPage - 1}">â† ä¸Šä¸€é¡µ</a>
        </c:if>
        
        <span>ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ</span>
        
        <c:if test="${currentPage < totalPages}">
            <a href="?page=${currentPage + 1}">ä¸‹ä¸€é¡µ â†’</a>
        </c:if>
    </div>
</body>
</html>
```

> ğŸ“ **ä»£ç è§£é‡Š**ï¼š
> - `<c:forEach>` æ˜¯JSTLæ ‡ç­¾ï¼Œç”¨æ¥å¾ªç¯æ˜¾ç¤ºæ¯ä¸ªå•†å“
> - `${product.name}` æ˜¯ELè¡¨è¾¾å¼ï¼Œè·å–å•†å“å¯¹è±¡çš„åç§°å±æ€§
> - `grid-template-columns: repeat(4, 1fr)` CSSç½‘æ ¼å¸ƒå±€ï¼Œ4åˆ—ç­‰å®½æ˜¾ç¤º

### 2.3 å•†å“åˆ—è¡¨Servletå¤„ç†


**âš™ï¸ ProductListServlet.java**ï¼š
```java
@WebServlet("/productList")
public class ProductListServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–é¡µç å‚æ•°ï¼ˆé»˜è®¤ç¬¬1é¡µï¼‰
        String pageStr = request.getParameter("page");
        int currentPage = (pageStr != null) ? Integer.parseInt(pageStr) : 1;
        
        // æ¯é¡µæ˜¾ç¤ºå•†å“æ•°é‡
        int pageSize = 12;
        
        // è®¡ç®—æ•°æ®åº“æŸ¥è¯¢çš„èµ·å§‹ä½ç½®
        int offset = (currentPage - 1) * pageSize;
        
        try {
            ProductDao productDao = new ProductDao();
            
            // è·å–å•†å“æ€»æ•°ï¼ˆç”¨äºè®¡ç®—æ€»é¡µæ•°ï¼‰
            int totalProducts = productDao.getTotalCount();
            int totalPages = (int) Math.ceil((double) totalProducts / pageSize);
            
            // è·å–å½“å‰é¡µçš„å•†å“åˆ—è¡¨
            List<Product> productList = productDao.getProductList(offset, pageSize);
            
            // å°†æ•°æ®å­˜å‚¨åˆ°requestä½œç”¨åŸŸï¼Œä¼ é€’ç»™JSPé¡µé¢
            request.setAttribute("productList", productList);
            request.setAttribute("currentPage", currentPage);
            request.setAttribute("totalPages", totalPages);
            
            // è½¬å‘åˆ°JSPé¡µé¢æ˜¾ç¤º
            request.getRequestDispatcher("productList.jsp").forward(request, response);
            
        } catch (Exception e) {
            e.printStackTrace();
            response.sendRedirect("error.jsp");
        }
    }
}
```

> ğŸ” **é‡ç‚¹è§£é‡Š**ï¼š
> - **åˆ†é¡µè®¡ç®—**ï¼š`offset = (å½“å‰é¡µç  - 1) Ã— æ¯é¡µæ•°é‡`
> - **æ€»é¡µæ•°è®¡ç®—**ï¼š`Math.ceil(æ€»è®°å½•æ•° Ã· æ¯é¡µæ•°é‡)`ï¼Œå‘ä¸Šå–æ•´
> - **request.setAttribute**ï¼šæŠŠæ•°æ®å­˜å‚¨åˆ°è¯·æ±‚ä½œç”¨åŸŸï¼ŒJSPé¡µé¢å¯ä»¥è·å–

---

## 3. ğŸ” å•†å“è¯¦æƒ…å±•ç¤ºåŠŸèƒ½


### 3.1 å•†å“è¯¦æƒ…é¡µé¢è®¾è®¡


**ğŸ“± è¯¦æƒ…é¡µé¢å¸ƒå±€**ï¼š
```
å•†å“è¯¦æƒ…é¡µé¢å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å•†å“åç§°                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚  å•†å“ä¿¡æ¯                 â”‚
â”‚   å•†å“å¤§å›¾   â”‚  ä»·æ ¼ï¼šï¿¥199.00           â”‚
â”‚              â”‚  åº“å­˜ï¼š50ä»¶               â”‚
â”‚   å›¾ç‰‡ç¼©ç•¥å›¾ â”‚  åˆ†ç±»ï¼šç”µå­äº§å“           â”‚
â”‚              â”‚  æè¿°ï¼šè¯¦ç»†å•†å“ä»‹ç»...     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ“ä½œæŒ‰é’®   â”‚  ç›¸å…³æ¨è                 â”‚
â”‚  [åŠ å…¥è´­ç‰©è½¦] â”‚  æ¨èå•†å“1 æ¨èå•†å“2      â”‚
â”‚  [ç«‹å³è´­ä¹°]   â”‚  æ¨èå•†å“3 æ¨èå•†å“4      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å•†å“è¯¦æƒ…JSPå®ç°


**ğŸ“„ productDetail.jsp**ï¼š
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
<head>
    <title>${product.name} - å•†å“è¯¦æƒ…</title>
    <style>
        .detail-container { display: flex; gap: 30px; max-width: 1200px; margin: 0 auto; }
        .image-section { flex: 1; }
        .info-section { flex: 1; }
        .main-image { width: 100%; max-width: 400px; }
        .thumbnail-list { display: flex; gap: 10px; margin-top: 10px; }
        .thumbnail { width: 60px; height: 60px; cursor: pointer; border: 2px solid transparent; }
        .thumbnail.active { border-color: #007bff; }
        .price-info { font-size: 24px; color: #e74c3c; font-weight: bold; margin: 20px 0; }
        .product-info p { margin: 10px 0; line-height: 1.6; }
        .action-buttons { margin: 30px 0; }
        .btn { padding: 12px 24px; margin-right: 15px; border: none; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-warning { background: #f39c12; color: white; }
    </style>
</head>
<body>
    <div class="detail-container">
        <!-- å•†å“å›¾ç‰‡åŒºåŸŸ -->
        <div class="image-section">
            <img src="${product.imageUrl}" alt="${product.name}" class="main-image" id="mainImage">
            
            <!-- å¦‚æœæœ‰å¤šå¼ å›¾ç‰‡ï¼Œæ˜¾ç¤ºç¼©ç•¥å›¾ -->
            <c:if test="${not empty product.imageList}">
                <div class="thumbnail-list">
                    <c:forEach var="image" items="${product.imageList}">
                        <img src="${image}" alt="å•†å“å›¾ç‰‡" class="thumbnail" 
                             onclick="changeMainImage('${image}')">
                    </c:forEach>
                </div>
            </c:if>
        </div>
        
        <!-- å•†å“ä¿¡æ¯åŒºåŸŸ -->
        <div class="info-section">
            <h1>${product.name}</h1>
            
            <div class="price-info">
                ï¿¥${product.price}
            </div>
            
            <div class="product-info">
                <p><strong>ğŸ·ï¸ å•†å“åˆ†ç±»ï¼š</strong>${product.categoryName}</p>
                <p><strong>ğŸ“¦ åº“å­˜æ•°é‡ï¼š</strong>${product.stock} ä»¶</p>
                <p><strong>ğŸ•’ æ·»åŠ æ—¶é—´ï¼š</strong>${product.createTime}</p>
                
                <div style="margin-top: 20px;">
                    <strong>ğŸ“ å•†å“æè¿°ï¼š</strong>
                    <p style="background: #f8f9fa; padding: 15px; margin-top: 10px; border-radius: 5px;">
                        ${product.description}
                    </p>
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="action-buttons">
                <c:if test="${product.stock > 0}">
                    <button class="btn btn-warning" onclick="addToCart(${product.id})">
                        ğŸ›’ åŠ å…¥è´­ç‰©è½¦
                    </button>
                    <button class="btn btn-primary" onclick="buyNow(${product.id})">
                        ğŸ’³ ç«‹å³è´­ä¹°
                    </button>
                </c:if>
                <c:if test="${product.stock == 0}">
                    <button class="btn" disabled style="background: #ccc;">
                        ğŸ˜ å•†å“å·²å”®å®Œ
                    </button>
                </c:if>
            </div>
        </div>
    </div>
    
    <!-- JavaScriptåŠŸèƒ½ -->
    <script>
        // åˆ‡æ¢ä¸»å›¾ç‰‡æ˜¾ç¤º
        function changeMainImage(imageUrl) {
            document.getElementById('mainImage').src = imageUrl;
            
            // æ›´æ–°ç¼©ç•¥å›¾é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
                if (thumb.src.includes(imageUrl.split('/').pop())) {
                    thumb.classList.add('active');
                }
            });
        }
        
        // åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½
        function addToCart(productId) {
            // å‘é€AJAXè¯·æ±‚åˆ°åç«¯
            fetch('/addToCart', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ productId: productId, quantity: 1 })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('âœ… å•†å“å·²åŠ å…¥è´­ç‰©è½¦ï¼');
                } else {
                    alert('âŒ æ·»åŠ å¤±è´¥ï¼š' + data.message);
                }
            });
        }
    </script>
</body>
</html>
```

> ğŸ’¡ **åŠŸèƒ½è¯´æ˜**ï¼š
> - **å›¾ç‰‡åˆ‡æ¢**ï¼šç‚¹å‡»ç¼©ç•¥å›¾å¯ä»¥åˆ‡æ¢ä¸»å›¾æ˜¾ç¤º
> - **åº“å­˜åˆ¤æ–­**ï¼šåº“å­˜ä¸º0æ—¶æŒ‰é’®å˜ç°ä¸”ä¸å¯ç‚¹å‡»
> - **AJAXå¼‚æ­¥**ï¼šåŠ å…¥è´­ç‰©è½¦ä¸åˆ·æ–°æ•´ä¸ªé¡µé¢

### 3.3 å•†å“è¯¦æƒ…Servlet


**âš™ï¸ ProductDetailServlet.java**ï¼š
```java
@WebServlet("/productDetail")
public class ProductDetailServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–å•†å“IDå‚æ•°
        String idStr = request.getParameter("id");
        
        if (idStr == null || idStr.trim().isEmpty()) {
            response.sendRedirect("productList");
            return;
        }
        
        try {
            int productId = Integer.parseInt(idStr);
            ProductDao productDao = new ProductDao();
            
            // æ ¹æ®IDæŸ¥è¯¢å•†å“è¯¦ç»†ä¿¡æ¯
            Product product = productDao.getProductById(productId);
            
            if (product == null) {
                // å•†å“ä¸å­˜åœ¨ï¼Œè·³è½¬åˆ°åˆ—è¡¨é¡µ
                response.sendRedirect("productList");
                return;
            }
            
            // è·å–å•†å“çš„æ‰€æœ‰å›¾ç‰‡ï¼ˆå¦‚æœæœ‰å¤šå¼ ï¼‰
            List<String> imageList = productDao.getProductImages(productId);
            product.setImageList(imageList);
            
            // è·å–åŒåˆ†ç±»çš„æ¨èå•†å“
            List<Product> recommendProducts = productDao.getRecommendProducts(
                product.getCategoryId(), productId, 4);
            
            // ä¼ é€’æ•°æ®ç»™JSPé¡µé¢
            request.setAttribute("product", product);
            request.setAttribute("recommendProducts", recommendProducts);
            
            request.getRequestDispatcher("productDetail.jsp").forward(request, response);
            
        } catch (NumberFormatException e) {
            // IDæ ¼å¼é”™è¯¯
            response.sendRedirect("productList");
        } catch (Exception e) {
            e.printStackTrace();
            response.sendRedirect("error.jsp");
        }
    }
}
```

---

## 4. ğŸ” åˆ†ç±»ç­›é€‰åŠŸèƒ½å®ç°


### 4.1 åˆ†ç±»ç­›é€‰ç•Œé¢è®¾è®¡


**ğŸ¯ ç­›é€‰åŠŸèƒ½å¸ƒå±€**ï¼š
```
åˆ†ç±»ç­›é€‰ç•Œé¢ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” å•†å“ç­›é€‰                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å•†å“åˆ†ç±»   â”‚   ä»·æ ¼åŒºé—´                 â”‚
â”‚  â–¡ å…¨éƒ¨     â”‚   â–¡ 100å…ƒä»¥ä¸‹              â”‚
â”‚  â–¡ ç”µå­äº§å“ â”‚   â–¡ 100-500å…ƒ              â”‚
â”‚  â–¡ æœè£…é‹å¸½ â”‚   â–¡ 500-1000å…ƒ             â”‚
â”‚  â–¡ å®¶å±…ç”¨å“ â”‚   â–¡ 1000å…ƒä»¥ä¸Š             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ’åºæ–¹å¼   â”‚   [é‡ç½®æ¡ä»¶] [å¼€å§‹ç­›é€‰]    â”‚
â”‚  â—‹ ä»·æ ¼å‡åº â”‚                           â”‚
â”‚  â—‹ ä»·æ ¼é™åº â”‚                           â”‚
â”‚  â—‹ æœ€æ–°å•†å“ â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 åˆ†ç±»ç­›é€‰JSPå®ç°


**ğŸ“„ ç­›é€‰åŒºåŸŸä»£ç **ï¼š
```jsp
<!-- å•†å“ç­›é€‰åŒºåŸŸ -->
<div class="filter-section">
    <h3>ğŸ” å•†å“ç­›é€‰</h3>
    
    <form action="productList" method="get" id="filterForm">
        <!-- åˆ†ç±»ç­›é€‰ -->
        <div class="filter-group">
            <h4>ğŸ“‚ å•†å“åˆ†ç±»</h4>
            <label><input type="radio" name="categoryId" value="" ${empty param.categoryId ? 'checked' : ''}> å…¨éƒ¨åˆ†ç±»</label>
            <c:forEach var="category" items="${categoryList}">
                <label>
                    <input type="radio" name="categoryId" value="${category.id}" 
                           ${param.categoryId == category.id ? 'checked' : ''}> 
                    ${category.name}
                </label>
            </c:forEach>
        </div>
        
        <!-- ä»·æ ¼åŒºé—´ç­›é€‰ -->
        <div class="filter-group">
            <h4>ğŸ’° ä»·æ ¼åŒºé—´</h4>
            <label><input type="radio" name="priceRange" value="" ${empty param.priceRange ? 'checked' : ''}> å…¨éƒ¨ä»·æ ¼</label>
            <label><input type="radio" name="priceRange" value="0-100" ${param.priceRange == '0-100' ? 'checked' : ''}> 100å…ƒä»¥ä¸‹</label>
            <label><input type="radio" name="priceRange" value="100-500" ${param.priceRange == '100-500' ? 'checked' : ''}> 100-500å…ƒ</label>
            <label><input type="radio" name="priceRange" value="500-1000" ${param.priceRange == '500-1000' ? 'checked' : ''}> 500-1000å…ƒ</label>
            <label><input type="radio" name="priceRange" value="1000-" ${param.priceRange == '1000-' ? 'checked' : ''}> 1000å…ƒä»¥ä¸Š</label>
        </div>
        
        <!-- æ’åºæ–¹å¼ -->
        <div class="filter-group">
            <h4>ğŸ“Š æ’åºæ–¹å¼</h4>
            <select name="orderBy">
                <option value="create_time DESC" ${param.orderBy == 'create_time DESC' ? 'selected' : ''}>æœ€æ–°å•†å“</option>
                <option value="price ASC" ${param.orderBy == 'price ASC' ? 'selected' : ''}>ä»·æ ¼å‡åº</option>
                <option value="price DESC" ${param.orderBy == 'price DESC' ? 'selected' : ''}>ä»·æ ¼é™åº</option>
                <option value="name ASC" ${param.orderBy == 'name ASC' ? 'selected' : ''}>åç§°æ’åº</option>
            </select>
        </div>
        
        <!-- æ“ä½œæŒ‰é’® -->
        <div class="filter-actions">
            <button type="submit" class="btn btn-primary">å¼€å§‹ç­›é€‰</button>
            <button type="button" class="btn btn-secondary" onclick="resetFilter()">é‡ç½®æ¡ä»¶</button>
        </div>
        
        <!-- ä¿æŒå½“å‰é¡µç  -->
        <input type="hidden" name="page" value="1">
    </form>
</div>

<script>
    // é‡ç½®ç­›é€‰æ¡ä»¶
    function resetFilter() {
        window.location.href = 'productList';
    }
    
    // ç­›é€‰æ¡ä»¶æ”¹å˜æ—¶è‡ªåŠ¨æäº¤
    document.querySelectorAll('input[type="radio"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.getElementById('filterForm').submit();
        });
    });
</script>
```

### 4.3 å¸¦ç­›é€‰åŠŸèƒ½çš„Servlet


**âš™ï¸ å¢å¼ºçš„ProductListServlet**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {
    
    // è·å–ç­›é€‰å‚æ•°
    String categoryId = request.getParameter("categoryId");
    String priceRange = request.getParameter("priceRange");
    String orderBy = request.getParameter("orderBy");
    String keyword = request.getParameter("keyword");
    
    // åˆ†é¡µå‚æ•°
    int currentPage = getIntParam(request, "page", 1);
    int pageSize = 12;
    int offset = (currentPage - 1) * pageSize;
    
    try {
        ProductDao productDao = new ProductDao();
        
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        ProductFilter filter = new ProductFilter();
        filter.setCategoryId(categoryId);
        filter.setPriceRange(priceRange);
        filter.setOrderBy(orderBy);
        filter.setKeyword(keyword);
        filter.setOffset(offset);
        filter.setPageSize(pageSize);
        
        // è·å–ç­›é€‰åçš„å•†å“åˆ—è¡¨å’Œæ€»æ•°
        List<Product> productList = productDao.getFilteredProducts(filter);
        int totalProducts = productDao.getFilteredCount(filter);
        int totalPages = (int) Math.ceil((double) totalProducts / pageSize);
        
        // è·å–æ‰€æœ‰åˆ†ç±»ï¼ˆç”¨äºç­›é€‰ç•Œé¢æ˜¾ç¤ºï¼‰
        List<Category> categoryList = productDao.getAllCategories();
        
        // ä¼ é€’æ•°æ®ç»™JSP
        request.setAttribute("productList", productList);
        request.setAttribute("categoryList", categoryList);
        request.setAttribute("currentPage", currentPage);
        request.setAttribute("totalPages", totalPages);
        request.setAttribute("totalProducts", totalProducts);
        
        request.getRequestDispatcher("productList.jsp").forward(request, response);
        
    } catch (Exception e) {
        e.printStackTrace();
        response.sendRedirect("error.jsp");
    }
}

// å®‰å…¨è·å–æ•´æ•°å‚æ•°çš„è¾…åŠ©æ–¹æ³•
private int getIntParam(HttpServletRequest request, String paramName, int defaultValue) {
    String paramStr = request.getParameter(paramName);
    if (paramStr != null && !paramStr.trim().isEmpty()) {
        try {
            return Integer.parseInt(paramStr);
        } catch (NumberFormatException e) {
            return defaultValue;
        }
    }
    return defaultValue;
}
```

> ğŸ”§ **ç­›é€‰é€»è¾‘è¯´æ˜**ï¼š
> - **å¤šæ¡ä»¶ç»„åˆ**ï¼šåˆ†ç±»ã€ä»·æ ¼ã€æ’åºå¯ä»¥åŒæ—¶ç­›é€‰
> - **å‚æ•°ä¿æŒ**ï¼šç­›é€‰åç¿»é¡µæ—¶ä¿æŒç­›é€‰æ¡ä»¶
> - **å®‰å…¨å¤„ç†**ï¼šå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒéªŒè¯å’Œå¼‚å¸¸å¤„ç†

---

## 5. ğŸ” æœç´¢åŠŸèƒ½å¼€å‘


### 5.1 æœç´¢åŠŸèƒ½ç•Œé¢


**ğŸ” æœç´¢æ¡†è®¾è®¡**ï¼š
```jsp
<!-- æœç´¢åŒºåŸŸ -->
<div class="search-section">
    <form action="productList" method="get" class="search-form">
        <div class="search-input-group">
            <input type="text" name="keyword" value="${param.keyword}" 
                   placeholder="ğŸ” è¯·è¾“å…¥å•†å“åç§°æˆ–å…³é”®è¯..." class="search-input">
            <button type="submit" class="search-btn">æœç´¢</button>
        </div>
        
        <!-- ä¿æŒå…¶ä»–ç­›é€‰æ¡ä»¶ -->
        <input type="hidden" name="categoryId" value="${param.categoryId}">
        <input type="hidden" name="priceRange" value="${param.priceRange}">
        <input type="hidden" name="orderBy" value="${param.orderBy}">
    </form>
    
    <!-- æœç´¢ç»“æœæç¤º -->
    <c:if test="${not empty param.keyword}">
        <div class="search-result-info">
            <p>ğŸ” æœç´¢"<strong>${param.keyword}</strong>"ï¼Œæ‰¾åˆ° <strong>${totalProducts}</strong> ä¸ªå•†å“</p>
            <a href="productList" style="color: #007bff;">æ¸…é™¤æœç´¢æ¡ä»¶</a>
        </div>
    </c:if>
</div>

<style>
.search-section { margin: 20px 0; text-align: center; }
.search-input-group { display: flex; max-width: 500px; margin: 0 auto; }
.search-input { flex: 1; padding: 10px; border: 1px solid #ddd; font-size: 16px; }
.search-btn { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
.search-result-info { margin-top: 15px; color: #666; }
</style>
```

### 5.2 æ•°æ®åº“æœç´¢å®ç°


**ğŸ—„ï¸ ProductDaoä¸­çš„æœç´¢æ–¹æ³•**ï¼š
```java
public class ProductDao {
    
    // æ ¹æ®å…³é”®è¯æœç´¢å•†å“
    public List<Product> searchProducts(String keyword, int offset, int pageSize) 
            throws SQLException {
        
        String sql = """
            SELECT p.*, c.name as category_name 
            FROM products p 
            LEFT JOIN categories c ON p.category_id = c.id 
            WHERE p.name LIKE ? OR p.description LIKE ?
            ORDER BY p.create_time DESC 
            LIMIT ?, ?
        """;
        
        List<Product> productList = new ArrayList<>();
        
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {
            
            // æ„å»ºæ¨¡ç³ŠæŸ¥è¯¢å‚æ•°
            String searchPattern = "%" + keyword + "%";
            stmt.setString(1, searchPattern);
            stmt.setString(2, searchPattern);
            stmt.setInt(3, offset);
            stmt.setInt(4, pageSize);
            
            ResultSet rs = stmt.executeQuery();
            while (rs.next()) {
                Product product = new Product();
                product.setId(rs.getInt("id"));
                product.setName(rs.getString("name"));
                product.setPrice(rs.getBigDecimal("price"));
                product.setDescription(rs.getString("description"));
                product.setImageUrl(rs.getString("image_url"));
                product.setStock(rs.getInt("stock"));
                product.setCategoryName(rs.getString("category_name"));
                product.setCreateTime(rs.getTimestamp("create_time"));
                
                productList.add(product);
            }
        }
        
        return productList;
    }
    
    // è·å–æœç´¢ç»“æœæ€»æ•°
    public int getSearchCount(String keyword) throws SQLException {
        String sql = "SELECT COUNT(*) FROM products WHERE name LIKE ? OR description LIKE ?";
        
        try (Connection conn = DBUtil.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql)) {
            
            String searchPattern = "%" + keyword + "%";
            stmt.setString(1, searchPattern);
            stmt.setString(2, searchPattern);
            
            ResultSet rs = stmt.executeQuery();
            if (rs.next()) {
                return rs.getInt(1);
            }
        }
        
        return 0;
    }
}
```

> ğŸ’¡ **æœç´¢æŠ€æœ¯è¦ç‚¹**ï¼š
> - **æ¨¡ç³ŠæŸ¥è¯¢**ï¼šä½¿ç”¨ `LIKE '%å…³é”®è¯%'` å®ç°æ¨¡ç³ŠåŒ¹é…
> - **å¤šå­—æ®µæœç´¢**ï¼šåŒæ—¶æœç´¢å•†å“åç§°å’Œæè¿°
> - **é˜²SQLæ³¨å…¥**ï¼šä½¿ç”¨PreparedStatementå‚æ•°åŒ–æŸ¥è¯¢

### 5.3 é«˜çº§æœç´¢åŠŸèƒ½


**ğŸ¯ æœç´¢ç»“æœé«˜äº®æ˜¾ç¤º**ï¼š
```jsp
<%-- è‡ªå®šä¹‰æ ‡ç­¾å‡½æ•°ï¼šé«˜äº®æ˜¾ç¤ºæœç´¢å…³é”®è¯ --%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<div class="product-card">
    <h3>
        <%-- é«˜äº®æ˜¾ç¤ºå•†å“åç§°ä¸­çš„æœç´¢å…³é”®è¯ --%>
        <c:choose>
            <c:when test="${not empty param.keyword}">
                ${fn:replace(product.name, param.keyword, 
                    '<mark style="background: yellow;">'.concat(param.keyword).concat('</mark>'))}
            </c:when>
            <c:otherwise>
                ${product.name}
            </c:otherwise>
        </c:choose>
    </h3>
    
    <p class="product-description">
        <%-- æ˜¾ç¤ºæè¿°ç‰‡æ®µï¼Œçªå‡ºæ˜¾ç¤ºå…³é”®è¯ --%>
        <c:set var="description" value="${fn:substring(product.description, 0, 100)}"/>
        <c:choose>
            <c:when test="${not empty param.keyword}">
                ${fn:replace(description, param.keyword, 
                    '<mark style="background: yellow;">'.concat(param.keyword).concat('</mark>'))}
                <c:if test="${fn:length(product.description) > 100}">...</c:if>
            </c:when>
            <c:otherwise>
                ${description}
                <c:if test="${fn:length(product.description) > 100}">...</c:if>
            </c:otherwise>
        </c:choose>
    </p>
</div>
```

**ğŸ” æ™ºèƒ½æœç´¢å»ºè®®**ï¼š
```javascript
// æœç´¢å»ºè®®åŠŸèƒ½ï¼ˆå®æ—¶æœç´¢æç¤ºï¼‰
function setupSearchSuggestion() {
    const searchInput = document.querySelector('.search-input');
    let timeoutId;
    
    searchInput.addEventListener('input', function() {
        const keyword = this.value.trim();
        
        // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
        clearTimeout(timeoutId);
        
        if (keyword.length >= 2) {
            // å»¶è¿Ÿ500msåå‘é€è¯·æ±‚ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
            timeoutId = setTimeout(() => {
                fetchSearchSuggestions(keyword);
            }, 500);
        } else {
            hideSuggestions();
        }
    });
}

function fetchSearchSuggestions(keyword) {
    fetch(`/searchSuggestions?keyword=${encodeURIComponent(keyword)}`)
        .then(response => response.json())
        .then(suggestions => {
            showSuggestions(suggestions);
        })
        .catch(error => {
            console.error('è·å–æœç´¢å»ºè®®å¤±è´¥:', error);
        });
}

function showSuggestions(suggestions) {
    // åˆ›å»ºå¹¶æ˜¾ç¤ºæœç´¢å»ºè®®åˆ—è¡¨
    const suggestionList = document.getElementById('suggestionList');
    suggestionList.innerHTML = '';
    
    suggestions.forEach(suggestion => {
        const item = document.createElement('div');
        item.className = 'suggestion-item';
        item.textContent = suggestion;
        item.onclick = () => selectSuggestion(suggestion);
        suggestionList.appendChild(item);
    });
    
    suggestionList.style.display = 'block';
}
```

---

## 6. ğŸ“· å›¾ç‰‡ä¸Šä¼ ä¸æ˜¾ç¤º


### 6.1 å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½å®ç°


**ğŸ“¤ å›¾ç‰‡ä¸Šä¼ è¡¨å•**ï¼š
```jsp
<!-- å•†å“å›¾ç‰‡ä¸Šä¼ è¡¨å•ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰ -->
<form action="uploadProductImage" method="post" enctype="multipart/form-data" id="imageUploadForm">
    <div class="upload-section">
        <h3>ğŸ“· å•†å“å›¾ç‰‡ä¸Šä¼ </h3>
        
        <input type="hidden" name="productId" value="${product.id}">
        
        <!-- æ–‡ä»¶é€‰æ‹©åŒºåŸŸ -->
        <div class="file-upload-area" onclick="document.getElementById('imageFile').click()">
            <div class="upload-icon">ğŸ“</div>
            <p>ç‚¹å‡»é€‰æ‹©å›¾ç‰‡æ–‡ä»¶</p>
            <p style="color: #666; font-size: 14px;">æ”¯æŒ JPGã€PNGã€GIF æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡5MB</p>
        </div>
        
        <input type="file" id="imageFile" name="imageFile" accept="image/*" 
               style="display: none;" onchange="previewImage(this)">
        
        <!-- å›¾ç‰‡é¢„è§ˆåŒºåŸŸ -->
        <div id="imagePreview" style="display: none;">
            <h4>å›¾ç‰‡é¢„è§ˆï¼š</h4>
            <img id="previewImg" src="" alt="é¢„è§ˆå›¾ç‰‡" style="max-width: 300px; max-height: 300px;">
        </div>
        
        <!-- ä¸Šä¼ æŒ‰é’® -->
        <div class="upload-actions">
            <button type="submit" class="btn btn-primary" id="uploadBtn" disabled>
                ğŸ“¤ ä¸Šä¼ å›¾ç‰‡
            </button>
            <button type="button" class="btn btn-secondary" onclick="cancelUpload()">
                âŒ å–æ¶ˆä¸Šä¼ 
            </button>
        </div>
    </div>
</form>

<script>
    // å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
    function previewImage(input) {
        const file = input.files[0];
        
        if (file) {
            // éªŒè¯æ–‡ä»¶ç±»å‹
            if (!file.type.match('image.*')) {
                alert('âŒ è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼');
                input.value = '';
                return;
            }
            
            // éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆ5MB = 5 * 1024 * 1024 bytesï¼‰
            if (file.size > 5 * 1024 * 1024) {
                alert('âŒ å›¾ç‰‡æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MBï¼');
                input.value = '';
                return;
            }
            
            // æ˜¾ç¤ºé¢„è§ˆå›¾ç‰‡
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('previewImg').src = e.target.result;
                document.getElementById('imagePreview').style.display = 'block';
                document.getElementById('uploadBtn').disabled = false;
            };
            reader.readAsDataURL(file);
        }
    }
    
    // å–æ¶ˆä¸Šä¼ 
    function cancelUpload() {
        document.getElementById('imageFile').value = '';
        document.getElementById('imagePreview').style.display = 'none';
        document.getElementById('uploadBtn').disabled = true;
    }
</script>
```

### 6.2 å›¾ç‰‡ä¸Šä¼ Servletå¤„ç†


**âš™ï¸ ImageUploadServlet.java**ï¼š
```java
@WebServlet("/uploadProductImage")
@MultipartConfig(
    fileSizeThreshold = 1024 * 1024 * 1,  // 1MB
    maxFileSize = 1024 * 1024 * 5,        // 5MB
    maxRequestSize = 1024 * 1024 * 10     // 10MB
)
public class ImageUploadServlet extends HttpServlet {
    
    // å›¾ç‰‡ä¿å­˜çš„æ ¹ç›®å½•
    private static final String UPLOAD_DIR = "uploads/products";
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        response.setContentType("application/json;charset=UTF-8");
        PrintWriter out = response.getWriter();
        
        try {
            // è·å–å•†å“ID
            String productIdStr = request.getParameter("productId");
            if (productIdStr == null || productIdStr.trim().isEmpty()) {
                out.println("{\"success\": false, \"message\": \"å•†å“IDä¸èƒ½ä¸ºç©º\"}");
                return;
            }
            
            int productId = Integer.parseInt(productIdStr);
            
            // è·å–ä¸Šä¼ çš„æ–‡ä»¶
            Part filePart = request.getPart("imageFile");
            if (filePart == null || filePart.getSize() == 0) {
                out.println("{\"success\": false, \"message\": \"è¯·é€‰æ‹©è¦ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶\"}");
                return;
            }
            
            // éªŒè¯æ–‡ä»¶ç±»å‹
            String contentType = filePart.getContentType();
            if (!isValidImageType(contentType)) {
                out.println("{\"success\": false, \"message\": \"åªæ”¯æŒJPGã€PNGã€GIFæ ¼å¼çš„å›¾ç‰‡\"}");
                return;
            }
            
            // ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å
            String originalFileName = getFileName(filePart);
            String fileExtension = getFileExtension(originalFileName);
            String newFileName = "product_" + productId + "_" + System.currentTimeMillis() + fileExtension;
            
            // åˆ›å»ºä¿å­˜ç›®å½•
            String uploadPath = getServletContext().getRealPath("") + File.separator + UPLOAD_DIR;
            File uploadDir = new File(uploadPath);
            if (!uploadDir.exists()) {
                uploadDir.mkdirs();
            }
            
            // ä¿å­˜æ–‡ä»¶åˆ°ç£ç›˜
            String filePath = uploadPath + File.separator + newFileName;
            filePart.write(filePath);
            
            // ç”ŸæˆWebè®¿é—®è·¯å¾„
            String webPath = UPLOAD_DIR + "/" + newFileName;
            
            // æ›´æ–°æ•°æ®åº“ä¸­å•†å“çš„å›¾ç‰‡è·¯å¾„
            ProductDao productDao = new ProductDao();
            boolean updateResult = productDao.updateProductImage(productId, webPath);
            
            if (updateResult) {
                out.println("{\"success\": true, \"message\": \"å›¾ç‰‡ä¸Šä¼ æˆåŠŸ\", \"imagePath\": \"" + webPath + "\"}");
            } else {
                // åˆ é™¤å·²ä¸Šä¼ çš„æ–‡ä»¶
                new File(filePath).delete();
                out.println("{\"success\": false, \"message\": \"æ•°æ®åº“æ›´æ–°å¤±è´¥\"}");
            }
            
        } catch (Exception e) {
            e.printStackTrace();
            out.println("{\"success\": false, \"message\": \"ä¸Šä¼ å¤±è´¥ï¼š\" + e.getMessage()}");
        } finally {
            out.close();
        }
    }
    
    // éªŒè¯å›¾ç‰‡æ–‡ä»¶ç±»å‹
    private boolean isValidImageType(String contentType) {
        return contentType != null && (
            contentType.equals("image/jpeg") ||
            contentType.equals("image/jpg") ||
            contentType.equals("image/png") ||
            contentType.equals("image/gif")
        );
    }
    
    // è·å–æ–‡ä»¶å
    private String getFileName(Part part) {
        String contentDisp = part.getHeader("content-disposition");
        for (String content : contentDisp.split(";")) {
            if (content.trim().startsWith("filename")) {
                return content.substring(content.indexOf('=') + 1).trim().replace("\"", "");
            }
        }
        return "";
    }
    
    // è·å–æ–‡ä»¶æ‰©å±•å
    private String getFileExtension(String fileName) {
        if (fileName != null && fileName.lastIndexOf('.') > 0) {
            return fileName.substring(fileName.lastIndexOf('.'));
        }
        return "";
    }
}
```

> ğŸ”§ **æ–‡ä»¶ä¸Šä¼ è¦ç‚¹**ï¼š
> - **@MultipartConfig**ï¼šé…ç½®æ–‡ä»¶ä¸Šä¼ çš„å¤§å°é™åˆ¶
> - **Partæ¥å£**ï¼šServlet 3.0æä¾›çš„æ–‡ä»¶å¤„ç†æ¥å£
> - **æ–‡ä»¶éªŒè¯**ï¼šæ£€æŸ¥æ–‡ä»¶ç±»å‹å’Œå¤§å°ï¼Œç¡®ä¿å®‰å…¨æ€§
> - **å”¯ä¸€æ–‡ä»¶å**ï¼šé¿å…æ–‡ä»¶åå†²çªï¼Œä½¿ç”¨æ—¶é—´æˆ³ç”Ÿæˆ

### 6.3 å›¾ç‰‡æ˜¾ç¤ºä¼˜åŒ–


**ğŸ–¼ï¸ å›¾ç‰‡æ˜¾ç¤ºå¤„ç†**ï¼š
```jsp
<!-- å›¾ç‰‡æ˜¾ç¤ºçš„å·¥å…·å‡½æ•° -->
<%!
    // ç”Ÿæˆç¼©ç•¥å›¾è·¯å¾„çš„è¾…åŠ©æ–¹æ³•
    public String getThumbnailPath(String originalPath, String size) {
        if (originalPath == null || originalPath.isEmpty()) {
            return "/images/no-image.png";  // é»˜è®¤å›¾ç‰‡
        }
        
        // å¦‚æœæ˜¯ç¼©ç•¥å›¾å°ºå¯¸ï¼Œè¿”å›ç¼©ç•¥å›¾è·¯å¾„
        if ("thumb".equals(size)) {
            return originalPath.replace("/uploads/", "/uploads/thumbs/");
        }
        
        return originalPath;
    }
%>

<!-- å•†å“å›¾ç‰‡æ˜¾ç¤ºç»„ä»¶ -->
<div class="product-image-container">
    <c:choose>
        <c:when test="${not empty product.imageUrl}">
            <!-- æ˜¾ç¤ºå•†å“å›¾ç‰‡ -->
            <img src="<%= getThumbnailPath("${product.imageUrl}", "thumb") %>" 
                 alt="${product.name}"
                 class="product-image"
                 onerror="this.src='/images/no-image.png'">
        </c:when>
        <c:otherwise>
            <!-- æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡ -->
            <img src="/images/no-image.png" alt="æš‚æ— å›¾ç‰‡" class="product-image">
        </c:otherwise>
    </c:choose>
</div>

<style>
    .product-image-container {
        position: relative;
        overflow: hidden;
        border-radius: 8px;
    }
    
    .product-image {
        width: 100%;
        height: 200px;
        object-fit: cover;  /* ä¿æŒæ¯”ä¾‹è£å‰ª */
        transition: transform 0.3s ease;
    }
    
    .product-image:hover {
        transform: scale(1.05);  /* é¼ æ ‡æ‚¬åœæ”¾å¤§æ•ˆæœ */
    }
    
    /* å›¾ç‰‡åŠ è½½ä¸­çš„å ä½ç¬¦ */
    .product-image[src=""] {
        background: #f5f5f5 url('/images/loading.gif') center no-repeat;
        background-size: 50px 50px;
    }
</style>
```

**ğŸ–¼ï¸ å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–**ï¼š
```javascript
// å›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½ï¼ˆæå‡é¡µé¢åŠ è½½é€Ÿåº¦ï¼‰
document.addEventListener('DOMContentLoaded', function() {
    const images = document.querySelectorAll('.product-image[data-src]');
    
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.removeAttribute('data-src');
                imageObserver.unobserve(img);
            }
        });
    });
    
    images.forEach(img => imageObserver.observe(img));
});
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å•†å“å±•ç¤ºç³»ç»Ÿï¼šç”µå•†ç½‘ç«™çš„å•†å“æµè§ˆå’Œå±•ç¤ºåŠŸèƒ½æ¨¡å—
ğŸ”¸ åˆ†é¡µæ˜¾ç¤ºï¼šå¤§æ•°æ®é‡çš„åˆ†é¡µåŠ è½½å’Œå¯¼èˆªå®ç°
ğŸ”¸ æ¡ä»¶ç­›é€‰ï¼šæŒ‰åˆ†ç±»ã€ä»·æ ¼ã€æ’åºç­‰æ¡ä»¶è¿‡æ»¤å•†å“
ğŸ”¸ æ¨¡ç³Šæœç´¢ï¼šä½¿ç”¨LIKEå®ç°å•†å“åç§°å’Œæè¿°çš„å…³é”®è¯æœç´¢
ğŸ”¸ å›¾ç‰‡å¤„ç†ï¼šæ–‡ä»¶ä¸Šä¼ ã€å­˜å‚¨ã€æ˜¾ç¤ºå’Œä¼˜åŒ–çš„å®Œæ•´æµç¨‹
```

### 7.2 å…³é”®æŠ€æœ¯ç†è§£è¦ç‚¹


**ğŸ”¹ JSPé¡µé¢ç»„ç»‡**
```
é¡µé¢ç»“æ„æ¸…æ™°ï¼šå¤´éƒ¨ç­›é€‰ + å•†å“ç½‘æ ¼ + åˆ†é¡µå¯¼èˆª
æ•°æ®å±•ç¤ºå®Œæ•´ï¼šå•†å“ä¿¡æ¯ + å›¾ç‰‡ + ä»·æ ¼ + åº“å­˜
ç”¨æˆ·ä½“éªŒå‹å¥½ï¼šæœç´¢æç¤º + åŠ è½½çŠ¶æ€ + é”™è¯¯å¤„ç†
```

**ğŸ”¹ Servletä¸šåŠ¡é€»è¾‘**
```
å‚æ•°å¤„ç†å®‰å…¨ï¼šéªŒè¯ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢SQLæ³¨å…¥
æ•°æ®åº“æ“ä½œé«˜æ•ˆï¼šåˆç†ä½¿ç”¨ç´¢å¼•ï¼Œä¼˜åŒ–æŸ¥è¯¢è¯­å¥
å¼‚å¸¸å¤„ç†å®Œå–„ï¼šæ•è·å¼‚å¸¸ï¼Œæä¾›å‹å¥½é”™è¯¯ä¿¡æ¯
```

**ğŸ”¹ æ•°æ®åº“è®¾è®¡åˆç†**
```
è¡¨ç»“æ„è§„èŒƒï¼šä¸»é”®ã€å¤–é”®ã€ç´¢å¼•è®¾è®¡åˆç†
æŸ¥è¯¢ä¼˜åŒ–ï¼šåˆ†é¡µæŸ¥è¯¢ã€æ¡ä»¶æŸ¥è¯¢ã€æ’åºæŸ¥è¯¢
æ•°æ®å®Œæ•´æ€§ï¼šéç©ºçº¦æŸã€æ•°æ®ç±»å‹åˆç†
```

### 7.3 å®é™…å¼€å‘ä»·å€¼


**âœ… è¿™ä¸ªç³»ç»Ÿæ•™ä¼šä½ **ï¼š
- **å®Œæ•´çš„Webåº”ç”¨å¼€å‘æµç¨‹**ï¼šä»æ•°æ®åº“åˆ°å‰ç«¯çš„å…¨æ ˆå¼€å‘
- **ç”¨æˆ·äº¤äº’è®¾è®¡**ï¼šæœç´¢ã€ç­›é€‰ã€åˆ†é¡µç­‰å¸¸è§åŠŸèƒ½å®ç°
- **æ–‡ä»¶å¤„ç†æŠ€æœ¯**ï¼šå›¾ç‰‡ä¸Šä¼ ã€å­˜å‚¨ã€æ˜¾ç¤ºçš„æ ‡å‡†æµç¨‹
- **æ€§èƒ½ä¼˜åŒ–æ€è·¯**ï¼šåˆ†é¡µåŠ è½½ã€å›¾ç‰‡å‹ç¼©ã€ç¼“å­˜ç­–ç•¥
- **å®‰å…¨é˜²æŠ¤æªæ–½**ï¼šè¾“å…¥éªŒè¯ã€æ–‡ä»¶ç±»å‹æ£€æŸ¥ã€SQLæ³¨å…¥é˜²æŠ¤

**ğŸ¯ å¯ä»¥æ‰©å±•çš„åŠŸèƒ½**ï¼š
- **è´­ç‰©è½¦ç³»ç»Ÿ**ï¼šå•†å“åŠ å…¥è´­ç‰©è½¦ã€æ•°é‡ç®¡ç†
- **ç”¨æˆ·è¯„è®º**ï¼šå•†å“è¯„ä»·ã€è¯„åˆ†ç³»ç»Ÿ
- **æ¨èç®—æ³•**ï¼šåŸºäºç”¨æˆ·è¡Œä¸ºçš„å•†å“æ¨è
- **åº“å­˜ç®¡ç†**ï¼šå®æ—¶åº“å­˜æ›´æ–°ã€ç¼ºè´§æé†’
- **ä¼˜æƒ æ´»åŠ¨**ï¼šä¿ƒé”€ä»·æ ¼ã€æŠ˜æ‰£åˆ¸æ”¯æŒ

**ğŸ’¡ å­¦ä¹ å»ºè®®**ï¼š
- **å¾ªåºæ¸è¿›**ï¼šå…ˆå®ç°åŸºç¡€åŠŸèƒ½ï¼Œå†æ·»åŠ é«˜çº§ç‰¹æ€§
- **æ³¨é‡ç»†èŠ‚**ï¼šç”¨æˆ·ä½“éªŒå’Œå¼‚å¸¸å¤„ç†åŒæ ·é‡è¦
- **å®é™…æ“ä½œ**ï¼šåŠ¨æ‰‹ç¼–å†™æ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„ä»£ç 
- **æµ‹è¯•éªŒè¯**ï¼šæ¯ä¸ªåŠŸèƒ½éƒ½è¦å……åˆ†æµ‹è¯•å„ç§åœºæ™¯
- **ä»£ç è§„èŒƒ**ï¼šä¿æŒè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯å’Œæ³¨é‡Š

**æ ¸å¿ƒè®°å¿†**ï¼š
- å•†å“å±•ç¤ºç³»ç»Ÿæ˜¯ç”µå•†ç½‘ç«™çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- JSPè´Ÿè´£é¡µé¢å±•ç¤ºï¼ŒServletå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œæ•°æ®åº“å­˜å‚¨æ•°æ®
- åˆ†é¡µã€æœç´¢ã€ç­›é€‰æ˜¯å¤§æ•°æ®é‡å±•ç¤ºçš„å¿…å¤‡åŠŸèƒ½
- å›¾ç‰‡å¤„ç†æ¶‰åŠä¸Šä¼ ã€å­˜å‚¨ã€æ˜¾ç¤ºçš„å®Œæ•´é“¾è·¯
- ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿæ€§èƒ½åŒæ ·é‡è¦ï¼Œéœ€è¦å¹³è¡¡è€ƒè™‘