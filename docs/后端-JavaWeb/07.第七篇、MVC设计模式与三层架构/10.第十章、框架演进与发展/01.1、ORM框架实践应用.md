---
title: 1ã€ORMæ¡†æ¶å®è·µåº”ç”¨
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ORMæ¡†æ¶](#1-ä»€ä¹ˆæ˜¯ORMæ¡†æ¶)
2. [MyBatisæ¡†æ¶è¯¦è§£](#2-MyBatisæ¡†æ¶è¯¦è§£)
3. [Hibernateæ¡†æ¶è¯¦è§£](#3-Hibernateæ¡†æ¶è¯¦è§£)
4. [ORMæ˜ å°„æ ¸å¿ƒæ¦‚å¿µ](#4-ORMæ˜ å°„æ ¸å¿ƒæ¦‚å¿µ)
5. [SQLä¸å¯¹è±¡è§£è€¦å®ç°](#5-SQLä¸å¯¹è±¡è§£è€¦å®ç°)
6. [é…ç½®æ–‡ä»¶ä¸æ³¨è§£å¼€å‘](#6-é…ç½®æ–‡ä»¶ä¸æ³¨è§£å¼€å‘)
7. [æ¡†æ¶é€‰æ‹©ä¸æœ€ä½³å®è·µ](#7-æ¡†æ¶é€‰æ‹©ä¸æœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä»€ä¹ˆæ˜¯ORMæ¡†æ¶


### 1.1 ORMåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯ORMï¼Ÿ**
```
ORM = Object Relational Mappingï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰

ç®€å•ç†è§£ï¼š
æŠŠæ•°æ®åº“è¡¨ â†” Javaå¯¹è±¡ ä¹‹é—´å»ºç«‹å¯¹åº”å…³ç³»
è®©æˆ‘ä»¬ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®åº“
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ORMï¼Ÿ**

ä¼ ç»ŸJDBCæ–¹å¼çš„ç—›ç‚¹ï¼š
```
æ•°æ®åº“è¡¨ï¼šuser
+----+------+-----+
| id | name | age |
+----+------+-----+
| 1  | å¼ ä¸‰  | 25  |
+----+------+-----+

Javaä»£ç éœ€è¦ï¼š
1. å†™å¤æ‚çš„SQLè¯­å¥
2. æ‰‹åŠ¨è®¾ç½®å‚æ•°
3. æ‰‹åŠ¨è§£æResultSet
4. å¤„ç†å„ç§å¼‚å¸¸

ResultSet rs = stmt.executeQuery("SELECT * FROM user");
while(rs.next()) {
    User user = new User();
    user.setId(rs.getInt("id"));        // æ‰‹åŠ¨æ˜ å°„
    user.setName(rs.getString("name"));  // å¾ˆç¹ç
    user.setAge(rs.getInt("age"));
}
```

**âœ¨ ORMæ¡†æ¶çš„ä¼˜åŠ¿**
```
ä½¿ç”¨ORMåï¼š
User user = userMapper.findById(1);  // ä¸€è¡Œä»£ç æå®šï¼

ä¼˜åŠ¿ï¼š
ğŸ”¹ ç®€åŒ–å¼€å‘ï¼šå‡å°‘é‡å¤ä»£ç 
ğŸ”¹ é¢å‘å¯¹è±¡ï¼šç”¨å¯¹è±¡æ€ç»´æ“ä½œæ•°æ®
ğŸ”¹ ç±»å‹å®‰å…¨ï¼šé¿å…SQLæ‹¼å†™é”™è¯¯
ğŸ”¹ è·¨æ•°æ®åº“ï¼šæ”¯æŒå¤šç§æ•°æ®åº“
```

### 1.2 ORMæ¡†æ¶åˆ†ç±»


**ä¸»æµORMæ¡†æ¶å¯¹æ¯”**ï¼š

| æ¡†æ¶ç±»å‹ | **ä»£è¡¨æ¡†æ¶** | **ç‰¹ç‚¹** | **é€‚ç”¨åœºæ™¯** |
|---------|-------------|---------|-------------|
| **åŠè‡ªåŠ¨ORM** | `MyBatis` | éœ€è¦æ‰‹å†™SQLï¼Œçµæ´»åº¦é«˜ | å¤æ‚æŸ¥è¯¢ã€æ€§èƒ½è¦æ±‚é«˜ |
| **å…¨è‡ªåŠ¨ORM** | `Hibernate` | è‡ªåŠ¨ç”ŸæˆSQLï¼Œå¼€å‘æ•ˆç‡é«˜ | ç®€å•CRUDã€å¿«é€Ÿå¼€å‘ |
| **è½»é‡çº§ORM** | `MyBatis-Plus` | MyBatiså¢å¼ºç‰ˆï¼Œæ›´ç®€å• | ä¸­å°é¡¹ç›®ã€å¿«é€Ÿå¼€å‘ |

**ğŸ¯ é€‰æ‹©åŸåˆ™**
```
é¡¹ç›®ç‰¹ç‚¹ â†’ æ¡†æ¶é€‰æ‹©

ç®€å•CRUDï¼Œå¿«é€Ÿå¼€å‘ï¼š
â†’ Hibernate æˆ– MyBatis-Plus

å¤æ‚æŸ¥è¯¢ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼š
â†’ MyBatis

å­¦ä¹ æˆæœ¬è€ƒè™‘ï¼š
â†’ MyBatisï¼ˆç›¸å¯¹ç®€å•ï¼‰
```

---

## 2. ğŸš€ MyBatisæ¡†æ¶è¯¦è§£


### 2.1 MyBatisæ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ MyBatisæ˜¯ä»€ä¹ˆï¼Ÿ**
```
MyBatisï¼šä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶
ç‰¹ç‚¹ï¼šæ”¯æŒè‡ªå®šä¹‰SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„
æ ¸å¿ƒæ€æƒ³ï¼šSQLä¸Javaä»£ç åˆ†ç¦»ï¼Œæ›´çµæ´»æ§åˆ¶
```

**ğŸ’¡ MyBatiså·¥ä½œåŸç†**
```
å·¥ä½œæµç¨‹ï¼š
Javaå¯¹è±¡ â†’ MyBatis â†’ SQLæ‰§è¡Œ â†’ æ•°æ®åº“
         â†—              â†˜
    æ˜ å°„é…ç½®æ–‡ä»¶      ç»“æœæ˜ å°„å›å¯¹è±¡

æ ¸å¿ƒç»„ä»¶ï¼š
ğŸ”¹ SqlSessionFactoryï¼šä¼šè¯å·¥å‚
ğŸ”¹ SqlSessionï¼šæ‰§è¡ŒSQLçš„ä¼šè¯
ğŸ”¹ Mapperï¼šSQLæ˜ å°„æ¥å£
ğŸ”¹ é…ç½®æ–‡ä»¶ï¼šå…¨å±€é…ç½®å’ŒSQLæ˜ å°„
```

### 2.2 MyBatiså¿«é€Ÿä¸Šæ‰‹


**ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis</artifactId>
    <version>3.5.13</version>
</dependency>
```

**ğŸ“‹ ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®ä½“ç±»**
```java
// User.java - å¯¹åº”æ•°æ®åº“userè¡¨
public class User {
    private Integer id;
    private String name;
    private Integer age;
    
    // æ„é€ æ–¹æ³•ã€getterã€setterçœç•¥
}
```

**ğŸ“‹ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºMapperæ¥å£**
```java
// UserMapper.java - å®šä¹‰æ“ä½œæ–¹æ³•
public interface UserMapper {
    User findById(Integer id);
    List<User> findAll();
    int insert(User user);
    int update(User user);
}
```

**ğŸ“‹ ç¬¬å››æ­¥ï¼šç¼–å†™SQLæ˜ å°„æ–‡ä»¶**
```xml
<!-- UserMapper.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.UserMapper">
    <!-- æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ· -->
    <select id="findById" resultType="User">
        SELECT * FROM user WHERE id = #{id}
    </select>
    
    <!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· -->
    <select id="findAll" resultType="User">
        SELECT * FROM user
    </select>
</mapper>
```

### 2.3 MyBatisæ ¸å¿ƒç‰¹æ€§


**ğŸ”§ å‚æ•°ä¼ é€’**
```xml
<!-- å•ä¸ªå‚æ•° -->
<select id="findById" resultType="User">
    SELECT * FROM user WHERE id = #{id}
</select>

<!-- å¤šä¸ªå‚æ•° -->
<select id="findByNameAndAge" resultType="User">
    SELECT * FROM user WHERE name = #{name} AND age = #{age}
</select>

<!-- å¯¹è±¡å‚æ•° -->
<insert id="insert">
    INSERT INTO user(name, age) VALUES(#{name}, #{age})
</insert>
```

**ğŸ¯ åŠ¨æ€SQL**
```xml
<!-- æ¡ä»¶æŸ¥è¯¢ -->
<select id="findByCondition" resultType="User">
    SELECT * FROM user WHERE 1=1
    <if test="name != null">
        AND name LIKE #{name}
    </if>
    <if test="age != null">
        AND age = #{age}
    </if>
</select>

<!-- æ‰¹é‡æ“ä½œ -->
<insert id="batchInsert">
    INSERT INTO user(name, age) VALUES
    <foreach collection="users" item="user" separator=",">
        (#{user.name}, #{user.age})
    </foreach>
</insert>
```

---

## 3. ğŸ—ï¸ Hibernateæ¡†æ¶è¯¦è§£


### 3.1 HibernateåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯Hibernateï¼Ÿ**
```
Hibernateï¼šå…¨è‡ªåŠ¨çš„ORMæ¡†æ¶
ç‰¹ç‚¹ï¼šè‡ªåŠ¨ç”ŸæˆSQLï¼Œå®Œå…¨é¢å‘å¯¹è±¡æ“ä½œæ•°æ®åº“
æ ¸å¿ƒæ€æƒ³ï¼šè®©å¼€å‘è€…å®Œå…¨å¿˜è®°SQLï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘
```

**ğŸ’¡ Hibernate vs MyBatis**
```
å¯¹æ¯”ç»´åº¦ï¼š

SQLæ§åˆ¶ï¼š
MyBatisï¼šæ‰‹å†™SQLï¼Œå®Œå…¨æ§åˆ¶
Hibernateï¼šè‡ªåŠ¨ç”ŸæˆSQLï¼Œé»‘ç›’æ“ä½œ

å­¦ä¹ æˆæœ¬ï¼š
MyBatisï¼šç›¸å¯¹ç®€å•ï¼Œæ¥è¿‘åŸç”ŸJDBC
Hibernateï¼šå¤æ‚ï¼Œéœ€è¦ç†è§£æ˜ å°„è§„åˆ™

æ€§èƒ½ä¼˜åŒ–ï¼š
MyBatisï¼šSQLå¯ç²¾ç¡®ä¼˜åŒ–
Hibernateï¼šä¾èµ–æ¡†æ¶ä¼˜åŒ–æœºåˆ¶
```

### 3.2 Hibernateå¿«é€Ÿä¸Šæ‰‹


**ğŸ“‹ å®ä½“ç±»é…ç½®**
```java
@Entity  // æ ‡è®°ä¸ºå®ä½“ç±»
@Table(name = "user")  // æŒ‡å®šå¯¹åº”çš„è¡¨å
public class User {
    @Id  // ä¸»é”®
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // è‡ªå¢
    private Integer id;
    
    @Column(name = "name")  // å¯¹åº”å­—æ®µ
    private String name;
    
    private Integer age;  // å­—æ®µåç›¸åŒå¯çœç•¥@Column
    
    // getterã€setteræ–¹æ³•
}
```

**ğŸ“‹ åŸºæœ¬æ“ä½œç¤ºä¾‹**
```java
// ä¿å­˜ç”¨æˆ·
User user = new User();
user.setName("å¼ ä¸‰");
user.setAge(25);
session.save(user);  // è‡ªåŠ¨ç”ŸæˆINSERTè¯­å¥

// æŸ¥è¯¢ç”¨æˆ·
User user = session.get(User.class, 1);  // è‡ªåŠ¨ç”ŸæˆSELECT

// æ›´æ–°ç”¨æˆ·
user.setAge(26);
session.update(user);  // è‡ªåŠ¨ç”ŸæˆUPDATE

// åˆ é™¤ç”¨æˆ·
session.delete(user);  // è‡ªåŠ¨ç”ŸæˆDELETE
```

### 3.3 Hibernateé«˜çº§ç‰¹æ€§


**ğŸ”— å…³è”æ˜ å°„**
```java
// ä¸€å¯¹å¤šå…³ç³»ï¼šç”¨æˆ·å’Œè®¢å•
@Entity
public class User {
    @OneToMany(mappedBy = "user")  // ä¸€ä¸ªç”¨æˆ·å¤šä¸ªè®¢å•
    private List<Order> orders;
}

@Entity 
public class Order {
    @ManyToOne  // å¤šä¸ªè®¢å•å±äºä¸€ä¸ªç”¨æˆ·
    @JoinColumn(name = "user_id")
    private User user;
}
```

**âš¡ å»¶è¿ŸåŠ è½½**
```java
// å»¶è¿ŸåŠ è½½ï¼šç”¨åˆ°æ—¶æ‰æŸ¥è¯¢
@OneToMany(fetch = FetchType.LAZY)
private List<Order> orders;

// ç«‹å³åŠ è½½ï¼šé©¬ä¸ŠæŸ¥è¯¢
@OneToMany(fetch = FetchType.EAGER) 
private List<Order> orders;
```

---

## 4. ğŸ”„ ORMæ˜ å°„æ ¸å¿ƒæ¦‚å¿µ


### 4.1 å¯¹è±¡å…³ç³»æ˜ å°„åŸç†


**ğŸ“Š æ˜ å°„å…³ç³»å›¾è§£**
```
æ•°æ®åº“è¡¨                    Javaå¯¹è±¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user è¡¨      â”‚    æ˜ å°„    â”‚ User ç±»      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â†â”€â”€â”€â†’   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (INT)     â”‚           â”‚ id (Integer) â”‚
â”‚ name (VARCHAR)â”‚          â”‚ name (String)â”‚
â”‚ age (INT)    â”‚           â”‚ age (Integer)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ˜ å°„è§„åˆ™ï¼š
è¡¨ â†” ç±»
å­—æ®µ â†” å±æ€§
è¡Œ â†” å¯¹è±¡å®ä¾‹
ä¸»é”® â†” æ ‡è¯†ç¬¦
```

**ğŸ¯ æ˜ å°„ç±»å‹åˆ†ç±»**
```
åŸºæœ¬æ˜ å°„ï¼š
âœ“ ç®€å•ç±»å‹ï¼šStringã€Integerã€Dateç­‰
âœ“ ä¸»é”®æ˜ å°„ï¼šè‡ªå¢ã€UUIDã€åºåˆ—ç­‰

å…³ç³»æ˜ å°„ï¼š
âœ“ ä¸€å¯¹ä¸€ï¼š@OneToOne
âœ“ ä¸€å¯¹å¤šï¼š@OneToMany  
âœ“ å¤šå¯¹ä¸€ï¼š@ManyToOne
âœ“ å¤šå¯¹å¤šï¼š@ManyToMany
```

### 4.2 æ•°æ®ç±»å‹æ˜ å°„


**ğŸ“‹ Javaç±»å‹ â†” æ•°æ®åº“ç±»å‹å¯¹ç…§**

| **Javaç±»å‹** | **MySQLç±»å‹** | **è¯´æ˜** |
|-------------|--------------|---------|
| `String` | `VARCHAR`ã€`TEXT` | æ–‡æœ¬æ•°æ® |
| `Integer` | `INT` | æ•´æ•° |
| `Long` | `BIGINT` | é•¿æ•´æ•° |
| `Date` | `DATETIME`ã€`TIMESTAMP` | æ—¥æœŸæ—¶é—´ |
| `Boolean` | `TINYINT(1)` | å¸ƒå°”å€¼ |
| `BigDecimal` | `DECIMAL` | ç²¾ç¡®å°æ•° |

**ğŸ’¡ æ˜ å°„æ³¨æ„äº‹é¡¹**
```
æ•°æ®ç²¾åº¦é—®é¢˜ï¼š
âŒ float/doubleï¼šå¯èƒ½æœ‰ç²¾åº¦ä¸¢å¤±
âœ… BigDecimalï¼šç²¾ç¡®å°æ•°è®¡ç®—

æ—¥æœŸå¤„ç†ï¼š
âŒ Dateï¼šè€æ—§APIï¼Œçº¿ç¨‹ä¸å®‰å…¨
âœ… LocalDateTimeï¼šæ–°APIï¼Œæ¨èä½¿ç”¨

ç©ºå€¼å¤„ç†ï¼š
âŒ intï¼šä¸èƒ½ä¸ºnull
âœ… Integerï¼šå¯ä»¥ä¸ºnullï¼Œå¯¹åº”æ•°æ®åº“NULL
```

---

## 5. ğŸ”“ SQLä¸å¯¹è±¡è§£è€¦å®ç°


### 5.1 ä»€ä¹ˆæ˜¯SQLä¸å¯¹è±¡è§£è€¦


**ğŸ”¸ ä¼ ç»ŸJDBCçš„è€¦åˆé—®é¢˜**
```java
// ç´§è€¦åˆï¼šSQLå’ŒJavaä»£ç æ··åœ¨ä¸€èµ·
String sql = "SELECT id, name, age FROM user WHERE id = ?";
PreparedStatement ps = conn.prepareStatement(sql);
ps.setInt(1, userId);
ResultSet rs = ps.executeQuery();

// SQLå˜æ›´éœ€è¦ä¿®æ”¹Javaä»£ç 
// æ•°æ®åº“å­—æ®µå˜æ›´éœ€è¦ä¿®æ”¹æ˜ å°„ä»£ç 
// ç»´æŠ¤å›°éš¾ï¼Œå®¹æ˜“å‡ºé”™
```

**âœ¨ ORMæ¡†æ¶çš„è§£è€¦æ–¹æ¡ˆ**
```
è§£è€¦å±‚æ¬¡ï¼š

ç‰©ç†è§£è€¦ï¼š
SQLè¯­å¥ â†’ ç‹¬ç«‹çš„XMLæ–‡ä»¶æˆ–æ³¨è§£
Javaä»£ç  â†’ åªå…³å¿ƒä¸šåŠ¡é€»è¾‘

é€»è¾‘è§£è€¦ï¼š
æ•°æ®è®¿é—®å±‚ â†’ Mapperæ¥å£
ä¸šåŠ¡é€»è¾‘å±‚ â†’ Serviceç±»
è¡¨ç°å±‚ â†’ Controllerç±»
```

### 5.2 MyBatisè§£è€¦å®ç°


**ğŸ“ æ–‡ä»¶ç»“æ„è§£è€¦**
```
é¡¹ç›®ç»“æ„ï¼š
src/main/java/
  â”œâ”€â”€ entity/User.java          # å®ä½“ç±»
  â”œâ”€â”€ mapper/UserMapper.java    # æ¥å£å®šä¹‰
  â””â”€â”€ service/UserService.java  # ä¸šåŠ¡é€»è¾‘

src/main/resources/
  â””â”€â”€ mapper/UserMapper.xml     # SQLæ˜ å°„æ–‡ä»¶

å¥½å¤„ï¼š
âœ“ SQLç‹¬ç«‹ç®¡ç†
âœ“ æ¥å£å’Œå®ç°åˆ†ç¦»
âœ“ ä¾¿äºå›¢é˜Ÿåä½œ
```

**ğŸ”§ æ¥å£ä¸å®ç°è§£è€¦**
```java
// 1. å®šä¹‰æ¥å£ï¼ˆä¸å…³å¿ƒSQLå®ç°ï¼‰
public interface UserMapper {
    User findById(Integer id);
    List<User> findByName(String name);
}

// 2. XMLå®ç°SQLï¼ˆä¸å…³å¿ƒJavaè°ƒç”¨ï¼‰
<select id="findById" resultType="User">
    SELECT * FROM user WHERE id = #{id}
</select>

// 3. ä¸šåŠ¡å±‚è°ƒç”¨ï¼ˆä¸å…³å¿ƒSQLç»†èŠ‚ï¼‰
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    public User getUser(Integer id) {
        return userMapper.findById(id);  // ç®€æ´è°ƒç”¨
    }
}
```

### 5.3 Hibernateè§£è€¦å®ç°


**ğŸ·ï¸ æ³¨è§£æ–¹å¼è§£è€¦**
```java
@Entity
@Table(name = "user")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    
    @Column(name = "user_name", length = 50)
    private String name;
    
    // SQLç”Ÿæˆå®Œå…¨ç”±æ¡†æ¶è´Ÿè´£
    // å¼€å‘è€…åªéœ€è¦å…³å¿ƒå¯¹è±¡æ“ä½œ
}
```

**âš™ï¸ é…ç½®æ–‡ä»¶è§£è€¦**
```xml
<!-- hibernate.cfg.xml -->
<hibernate-configuration>
    <session-factory>
        <!-- æ•°æ®åº“é…ç½® -->
        <property name="hibernate.connection.driver_class">
            com.mysql.cj.jdbc.Driver
        </property>
        
        <!-- SQLæ–¹è¨€é…ç½® -->
        <property name="hibernate.dialect">
            org.hibernate.dialect.MySQLDialect
        </property>
        
        <!-- å®ä½“æ˜ å°„ -->
        <mapping class="com.example.entity.User"/>
    </session-factory>
</hibernate-configuration>
```

---

## 6. âš™ï¸ é…ç½®æ–‡ä»¶ä¸æ³¨è§£å¼€å‘


### 6.1 é…ç½®æ–‡ä»¶å¼€å‘æ–¹å¼


**ğŸ”¸ MyBatisé…ç½®æ–‡ä»¶å¼€å‘**

**ä¸»é…ç½®æ–‡ä»¶ mybatis-config.xmlï¼š**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
    <!-- ç¯å¢ƒé…ç½® -->
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="com.mysql.cj.jdbc.Driver"/>
                <property name="url" value="jdbc:mysql://localhost:3306/test"/>
                <property name="username" value="root"/>
                <property name="password" value="password"/>
            </dataSource>
        </environment>
    </environments>
    
    <!-- æ˜ å°„æ–‡ä»¶ -->
    <mappers>
        <mapper resource="mapper/UserMapper.xml"/>
    </mappers>
</configuration>
```

**æ˜ å°„æ–‡ä»¶ UserMapper.xmlï¼š**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.UserMapper">
    <!-- ç»“æœæ˜ å°„ -->
    <resultMap id="UserResultMap" type="User">
        <id column="id" property="id"/>
        <result column="user_name" property="name"/>
        <result column="user_age" property="age"/>
    </resultMap>
    
    <!-- SQLè¯­å¥ -->
    <select id="findById" resultMap="UserResultMap">
        SELECT id, user_name, user_age FROM user WHERE id = #{id}
    </select>
</mapper>
```

**ğŸ“Š é…ç½®æ–‡ä»¶ä¼˜ç¼ºç‚¹**

| **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|---------|---------|
| âœ… SQLé›†ä¸­ç®¡ç† | âŒ æ–‡ä»¶è¾ƒå¤šï¼Œç®¡ç†å¤æ‚ |
| âœ… æ”¯æŒå¤æ‚SQL | âŒ ç¼–å†™ç¹ç |
| âœ… ä¾¿äºSQLä¼˜åŒ– | âŒ ç±»å‹æ£€æŸ¥ä¸å¤Ÿå¼º |
| âœ… æ”¯æŒåŠ¨æ€SQL | âŒ é‡æ„å›°éš¾ |

### 6.2 æ³¨è§£å¼€å‘æ–¹å¼


**ğŸ”¸ MyBatisæ³¨è§£å¼€å‘**
```java
public interface UserMapper {
    
    @Select("SELECT * FROM user WHERE id = #{id}")
    User findById(Integer id);
    
    @Select("SELECT * FROM user")
    List<User> findAll();
    
    @Insert("INSERT INTO user(name, age) VALUES(#{name}, #{age})")
    @Options(useGeneratedKeys = true, keyProperty = "id")
    int insert(User user);
    
    @Update("UPDATE user SET name = #{name}, age = #{age} WHERE id = #{id}")
    int update(User user);
    
    @Delete("DELETE FROM user WHERE id = #{id}")
    int delete(Integer id);
}
```

**ğŸ”¸ Hibernateæ³¨è§£å¼€å‘**
```java
@Entity
@Table(name = "user")
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Integer id;
    
    @Column(name = "name", length = 50, nullable = false)
    private String name;
    
    @Column(name = "age")
    private Integer age;
    
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "create_time")
    private Date createTime;
}
```

### 6.3 é…ç½®æ–‡ä»¶ vs æ³¨è§£å¯¹æ¯”


**ğŸ“‹ è¯¦ç»†å¯¹æ¯”åˆ†æ**

| **å¯¹æ¯”é¡¹ç›®** | **é…ç½®æ–‡ä»¶** | **æ³¨è§£æ–¹å¼** |
|-------------|-------------|-------------|
| **å­¦ä¹ æˆæœ¬** | éœ€è¦å­¦ä¹ XMLè¯­æ³• | å­¦ä¹ å„ç§æ³¨è§£ |
| **ä»£ç ç®€æ´** | æ–‡ä»¶åˆ†ç¦»ï¼ŒJavaä»£ç ç®€æ´ | æ³¨è§£å’Œä»£ç åœ¨ä¸€èµ· |
| **SQLå¤æ‚åº¦** | æ”¯æŒå¤æ‚SQLå’ŒåŠ¨æ€SQL | ç®€å•SQLï¼Œå¤æ‚SQLå›°éš¾ |
| **ç»´æŠ¤æ€§** | ç»Ÿä¸€ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤ | åˆ†æ•£åœ¨å„ä¸ªç±»ä¸­ |
| **ç¼–è¯‘æ£€æŸ¥** | è¿è¡Œæ—¶æ‰èƒ½å‘ç°é”™è¯¯ | ç¼–è¯‘æ—¶æ£€æŸ¥æ›´ä¸¥æ ¼ |
| **å›¢é˜Ÿåä½œ** | DBAå¯ä»¥ç›´æ¥ä¼˜åŒ–SQL | éœ€è¦Javaå¼€å‘è€…ä¿®æ”¹ |

**ğŸ¯ é€‰æ‹©å»ºè®®**
```
æ¨èä½¿ç”¨åœºæ™¯ï¼š

é…ç½®æ–‡ä»¶æ–¹å¼ï¼š
âœ“ å¤æ‚æŸ¥è¯¢è¾ƒå¤š
âœ“ éœ€è¦DBAå‚ä¸SQLä¼˜åŒ–
âœ“ å›¢é˜Ÿæ›´ç†Ÿæ‚‰SQL
âœ“ é¡¹ç›®è§„æ¨¡è¾ƒå¤§

æ³¨è§£æ–¹å¼ï¼š
âœ“ ç®€å•CRUDæ“ä½œ
âœ“ å¿«é€Ÿå¼€å‘
âœ“ å°å‹é¡¹ç›®
âœ“ å›¢é˜ŸJavaæŠ€èƒ½å¼º

æ··åˆä½¿ç”¨ï¼š
âœ“ ç®€å•æ“ä½œç”¨æ³¨è§£
âœ“ å¤æ‚æŸ¥è¯¢ç”¨XML
âœ“ çµæ´»é€‰æ‹©æœ€é€‚åˆçš„æ–¹å¼
```

---

## 7. ğŸ¯ æ¡†æ¶é€‰æ‹©ä¸æœ€ä½³å®è·µ


### 7.1 æ¡†æ¶é€‰æ‹©å†³ç­–


**ğŸ“Š é€‰æ‹©å†³ç­–æ ‘**
```
é¡¹ç›®ç‰¹ç‚¹åˆ†æï¼š

é¡¹ç›®è§„æ¨¡ï¼š
â”œâ”€ å°å‹é¡¹ç›®ï¼ˆ<10å¼ è¡¨ï¼‰
â”‚  â””â”€ æ¨èï¼šMyBatis-Plus æˆ– æ³¨è§£å¼MyBatis
â”œâ”€ ä¸­å‹é¡¹ç›®ï¼ˆ10-50å¼ è¡¨ï¼‰  
â”‚  â””â”€ æ¨èï¼šMyBatis + XMLé…ç½®
â””â”€ å¤§å‹é¡¹ç›®ï¼ˆ>50å¼ è¡¨ï¼‰
   â””â”€ æ¨èï¼šMyBatis æˆ– æ··åˆæ–¹æ¡ˆ

æ€§èƒ½è¦æ±‚ï¼š
â”œâ”€ é«˜æ€§èƒ½è¦æ±‚
â”‚  â””â”€ æ¨èï¼šMyBatisï¼ˆå¯ç²¾ç¡®æ§åˆ¶SQLï¼‰
â””â”€ å¼€å‘æ•ˆç‡ä¼˜å…ˆ
   â””â”€ æ¨èï¼šHibernate æˆ– MyBatis-Plus

å›¢é˜ŸæŠ€èƒ½ï¼š
â”œâ”€ SQLæŠ€èƒ½å¼º
â”‚  â””â”€ æ¨èï¼šMyBatis
â””â”€ JavaæŠ€èƒ½å¼ºï¼ŒSQLä¸€èˆ¬
   â””â”€ æ¨èï¼šHibernate
```

### 7.2 MyBatisæœ€ä½³å®è·µ


**ğŸ”§ é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ**
```
æ ‡å‡†ç›®å½•ç»“æ„ï¼š
src/main/java/
â”œâ”€â”€ entity/          # å®ä½“ç±»
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ mapper/          # Mapperæ¥å£
â”‚   â””â”€â”€ UserMapper.java  
â”œâ”€â”€ service/         # ä¸šåŠ¡å±‚
â”‚   â”œâ”€â”€ UserService.java
â”‚   â””â”€â”€ impl/
â”‚       â””â”€â”€ UserServiceImpl.java
â””â”€â”€ controller/      # æ§åˆ¶å±‚
    â””â”€â”€ UserController.java

src/main/resources/
â”œâ”€â”€ mapper/          # SQLæ˜ å°„æ–‡ä»¶
â”‚   â””â”€â”€ UserMapper.xml
â”œâ”€â”€ mybatis-config.xml
â””â”€â”€ application.yml
```

**âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
```
SQLä¼˜åŒ–ï¼š
âœ“ é¿å…SELECT *ï¼Œæ˜ç¡®æŸ¥è¯¢å­—æ®µ
âœ“ åˆç†ä½¿ç”¨ç´¢å¼•
âœ“ æ‰¹é‡æ“ä½œä½¿ç”¨foreach

ç¼“å­˜ä½¿ç”¨ï¼š
âœ“ å¯ç”¨ä¸€çº§ç¼“å­˜ï¼ˆé»˜è®¤å¼€å¯ï¼‰
âœ“ åˆç†ä½¿ç”¨äºŒçº§ç¼“å­˜
âœ“ é›†æˆRedisç­‰å¤–éƒ¨ç¼“å­˜

è¿æ¥æ± é…ç½®ï¼š
âœ“ åˆç†è®¾ç½®è¿æ¥æ± å¤§å°
âœ“ é…ç½®è¿æ¥è¶…æ—¶æ—¶é—´
âœ“ ç›‘æ§è¿æ¥æ± ä½¿ç”¨æƒ…å†µ
```

### 7.3 Hibernateæœ€ä½³å®è·µ


**ğŸ—ï¸ å®ä½“è®¾è®¡æœ€ä½³å®è·µ**
```java
@Entity
@Table(name = "user")
public class User {
    // ä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œæ”¯æŒnullå€¼
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;  // Longè€Œä¸æ˜¯long
    
    // å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶
    @Column(name = "name", length = 50, nullable = false)
    private String name;
    
    // ç²¾ç¡®å°æ•°ä½¿ç”¨BigDecimal
    @Column(name = "salary", precision = 10, scale = 2)
    private BigDecimal salary;
    
    // æ—¶é—´å­—æ®µä½¿ç”¨æ–°API
    @Column(name = "create_time")
    private LocalDateTime createTime;
}
```

**ğŸ”— å…³è”å…³ç³»æœ€ä½³å®è·µ**
```java
// åˆç†ä½¿ç”¨æ‡’åŠ è½½
@OneToMany(mappedBy = "user", fetch = FetchType.LAZY)
private List<Order> orders;

// é¿å…åŒå‘å…³è”çš„æ— é™é€’å½’
@JsonIgnore  // åºåˆ—åŒ–æ—¶å¿½ç•¥
@OneToMany(mappedBy = "user")
private List<Order> orders;

// ä½¿ç”¨çº§è”æ“ä½œè¦è°¨æ…
@OneToMany(cascade = CascadeType.PERSIST)  // åªçº§è”ä¿å­˜
private List<Order> orders;
```

### 7.4 é€šç”¨æœ€ä½³å®è·µ


**ğŸ“‹ å¼€å‘è§„èŒƒ**
```
å‘½åè§„èŒƒï¼š
âœ“ å®ä½“ç±»ï¼šUserã€Orderï¼ˆPascalCaseï¼‰
âœ“ å±æ€§åï¼šuserNameã€createTimeï¼ˆcamelCaseï¼‰  
âœ“ è¡¨åï¼šuserã€order_itemï¼ˆsnake_caseï¼‰
âœ“ å­—æ®µåï¼šuser_nameã€create_timeï¼ˆsnake_caseï¼‰

å¼‚å¸¸å¤„ç†ï¼š
âœ“ è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
âœ“ ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
âœ“ è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

äº‹åŠ¡ç®¡ç†ï¼š
âœ“ åœ¨Serviceå±‚ç®¡ç†äº‹åŠ¡
âœ“ åˆç†è®¾ç½®äº‹åŠ¡è¾¹ç•Œ
âœ“ æ³¨æ„äº‹åŠ¡ä¼ æ’­è¡Œä¸º
```

**âš ï¸ å¸¸è§é™·é˜±é¿å…**
```
æ€§èƒ½é™·é˜±ï¼š
âŒ N+1æŸ¥è¯¢é—®é¢˜
âŒ è¿‡åº¦ä½¿ç”¨æ€¥åŠ è½½
âŒ ç¼ºå°‘åˆé€‚ç´¢å¼•

è®¾è®¡é™·é˜±ï¼š
âŒ å®ä½“ç±»è¿‡åº¦å¤æ‚
âŒ å¾ªç¯ä¾èµ–å…³ç³»
âŒ ç¼ºå°‘åˆç†çš„åˆ†å±‚

ç»´æŠ¤é™·é˜±ï¼š
âŒ SQLæ•£è½åœ¨ä»£ç å„å¤„
âŒ ç¼ºå°‘ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
âŒ æ²¡æœ‰å……åˆ†çš„å•å…ƒæµ‹è¯•
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ORMæœ¬è´¨ï¼šå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œè®©Javaå¯¹è±¡å’Œæ•°æ®åº“è¡¨å»ºç«‹å¯¹åº”å…³ç³»
ğŸ”¸ æ¡†æ¶åˆ†ç±»ï¼šåŠè‡ªåŠ¨ORMï¼ˆMyBatisï¼‰vs å…¨è‡ªåŠ¨ORMï¼ˆHibernateï¼‰
ğŸ”¸ SQLè§£è€¦ï¼šå°†SQLè¯­å¥ä»Javaä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæé«˜å¯ç»´æŠ¤æ€§
ğŸ”¸ é…ç½®æ–¹å¼ï¼šXMLé…ç½®æ–‡ä»¶ vs æ³¨è§£å¼€å‘ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹
ğŸ”¸ æ˜ å°„å…³ç³»ï¼šè¡¨â†”ç±»ã€å­—æ®µâ†”å±æ€§ã€è¡Œâ†”å¯¹è±¡å®ä¾‹
```

### 8.2 å…³é”®æŠ€æœ¯ç†è§£è¦ç‚¹


**ğŸ”¹ MyBatisæ ¸å¿ƒç†è§£**
```
å·¥ä½œæ–¹å¼ï¼š
- åŠè‡ªåŠ¨ORMï¼Œéœ€è¦æ‰‹å†™SQL
- é€šè¿‡XMLæˆ–æ³¨è§£é…ç½®SQLæ˜ å°„  
- çµæ´»æ§åˆ¶SQLï¼Œæ€§èƒ½ä¼˜åŒ–ç©ºé—´å¤§

é€‚ç”¨åœºæ™¯ï¼š
- å¤æ‚æŸ¥è¯¢æ¯”è¾ƒå¤šçš„é¡¹ç›®
- å¯¹SQLæ€§èƒ½è¦æ±‚è¾ƒé«˜
- å›¢é˜ŸSQLåŠŸåº•è¾ƒå¥½
```

**ğŸ”¹ Hibernateæ ¸å¿ƒç†è§£**  
```
å·¥ä½œæ–¹å¼ï¼š
- å…¨è‡ªåŠ¨ORMï¼Œè‡ªåŠ¨ç”ŸæˆSQL
- é€šè¿‡æ³¨è§£é…ç½®å®ä½“æ˜ å°„
- å®Œå…¨é¢å‘å¯¹è±¡ï¼Œå±è”½SQLç»†èŠ‚

é€‚ç”¨åœºæ™¯ï¼š
- ç®€å•CRUDæ“ä½œä¸ºä¸»
- å¿«é€Ÿå¼€å‘è¦æ±‚
- å›¢é˜ŸJavaæŠ€èƒ½è¾ƒå¼º
```

**ğŸ”¹ è§£è€¦çš„é‡è¦æ„ä¹‰**
```
ä¸ºä»€ä¹ˆè¦è§£è€¦ï¼š
- é™ä½ä»£ç ç»´æŠ¤æˆæœ¬
- æé«˜å›¢é˜Ÿåä½œæ•ˆç‡  
- ä¾¿äºç³»ç»Ÿæ‰©å±•å’Œä¿®æ”¹
- æå‡ä»£ç å¯æµ‹è¯•æ€§

å¦‚ä½•å®ç°è§£è€¦ï¼š
- æ¥å£ä¸å®ç°åˆ†ç¦»
- é…ç½®ä¸ä»£ç åˆ†ç¦»
- åˆ†å±‚æ¶æ„è®¾è®¡
```

### 8.3 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š æ¨èå­¦ä¹ é¡ºåº**
```
ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¦‚å¿µ
1. ç†è§£ORMæ˜¯ä»€ä¹ˆï¼Œè§£å†³ä»€ä¹ˆé—®é¢˜
2. æŒæ¡MyBatisåŸºæœ¬é…ç½®å’Œä½¿ç”¨
3. å­¦ä¼šç®€å•çš„CRUDæ“ä½œ

ç¬¬äºŒé˜¶æ®µï¼šæ·±å…¥MyBatis  
1. æŒæ¡åŠ¨æ€SQLä½¿ç”¨
2. ç†è§£ç»“æœæ˜ å°„æœºåˆ¶
3. å­¦ä¼šå¤æ‚æŸ¥è¯¢ç¼–å†™

ç¬¬ä¸‰é˜¶æ®µï¼šæ¡†æ¶å¯¹æ¯”
1. äº†è§£Hibernateç‰¹ç‚¹
2. å¯¹æ¯”ä¸¤ç§æ¡†æ¶ä¼˜ç¼ºç‚¹
3. æ ¹æ®é¡¹ç›®é€‰æ‹©åˆé€‚æ¡†æ¶

ç¬¬å››é˜¶æ®µï¼šæœ€ä½³å®è·µ
1. å­¦ä¹ æ€§èƒ½ä¼˜åŒ–æŠ€å·§
2. æŒæ¡å¸¸è§é—®é¢˜è§£å†³
3. æ€»ç»“é¡¹ç›®ç»éªŒè§„å¾‹
```

### 8.4 å®é™…é¡¹ç›®åº”ç”¨æŒ‡å¯¼


**ğŸ¯ æ–°æ‰‹å»ºè®®**
- **ä»MyBatiså¼€å§‹å­¦ä¹ **ï¼šç›¸å¯¹ç®€å•ï¼Œå®¹æ˜“ç†è§£
- **å…ˆæŒæ¡XMLé…ç½®**ï¼šåŠŸèƒ½å®Œæ•´ï¼Œä¾¿äºå­¦ä¹ åŸç†
- **å¤šåŠ¨æ‰‹ç»ƒä¹ **ï¼šç†è®ºç»“åˆå®è·µï¼ŒåŠ æ·±ç†è§£
- **æ³¨æ„è§„èŒƒ**ï¼šå…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯

**ğŸ’¡ é¡¹ç›®å®æˆ˜æŠ€å·§**
- **åˆç†è®¾è®¡å®ä½“ç±»**ï¼šå¯¹åº”æ•°æ®åº“è¡¨ç»“æ„
- **ç»Ÿä¸€å¼‚å¸¸å¤„ç†**ï¼šé¿å…é‡å¤çš„å¼‚å¸¸å¤„ç†ä»£ç   
- **æ³¨æ„äº‹åŠ¡ç®¡ç†**ï¼šç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- **åšå¥½æ€§èƒ½ç›‘æ§**ï¼šåŠæ—¶å‘ç°å’Œä¼˜åŒ–æ€§èƒ½é—®é¢˜

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ORMæ˜ å°„å¯¹è±¡è¡¨ï¼ŒSQLè§£è€¦æ›´çµæ´»
- MyBatisåŠè‡ªåŠ¨ï¼ŒHibernateå…¨åŒ…åŠ
- é…ç½®æ³¨è§£ä¸¤æ–¹å¼ï¼Œé¡¹ç›®ç‰¹ç‚¹å®šé€‰æ‹©
- åˆ†å±‚è§£è€¦å¥½ç»´æŠ¤ï¼Œè§„èŒƒå¼€å‘è´¨é‡é«˜