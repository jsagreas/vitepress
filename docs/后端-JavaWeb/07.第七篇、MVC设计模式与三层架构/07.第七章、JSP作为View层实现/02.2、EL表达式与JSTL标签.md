---
title: 2ã€ELè¡¨è¾¾å¼ä¸JSTLæ ‡ç­¾
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦ELè¡¨è¾¾å¼](#1-ä¸ºä»€ä¹ˆéœ€è¦ELè¡¨è¾¾å¼)
2. [ELè¡¨è¾¾å¼åŸºç¡€è¯­æ³•](#2-ELè¡¨è¾¾å¼åŸºç¡€è¯­æ³•)
3. [JSTLæ ‡ç­¾åº“ä»‹ç»](#3-JSTLæ ‡ç­¾åº“ä»‹ç»)
4. [æ ¸å¿ƒæ ‡ç­¾è¯¦è§£](#4-æ ¸å¿ƒæ ‡ç­¾è¯¦è§£)
5. [æ•°æ®ç»‘å®šä¸æ˜¾ç¤º](#5-æ•°æ®ç»‘å®šä¸æ˜¾ç¤º)
6. [å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º](#6-å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ELè¡¨è¾¾å¼


### 1.1 ä¼ ç»ŸJSPçš„é—®é¢˜


**ğŸ”´ ä¼ ç»ŸJSPå†™æ³•çš„ç—›ç‚¹**ï¼š
```jsp
<!-- ä¼ ç»Ÿå†™æ³•ï¼šå¤æ‚ä¸”å®¹æ˜“å‡ºé”™ -->
<%
    User user = (User)request.getAttribute("user");
    if(user != null) {
        out.println("æ¬¢è¿ï¼š" + user.getName());
    } else {
        out.println("ç”¨æˆ·æœªç™»å½•");
    }
%>
```

> ğŸ’­ **æ–°æ‰‹å›°æƒ‘**ï¼šè¿™æ ·å†™ä»£ç ï¼ŒHTMLå’ŒJavaä»£ç æ··åœ¨ä¸€èµ·ï¼Œçœ‹èµ·æ¥å¾ˆä¹±ï¼Œç»´æŠ¤èµ·æ¥å¾ˆå›°éš¾

### 1.2 ELè¡¨è¾¾å¼çš„è§£å†³æ–¹æ¡ˆ


**âœ… ä½¿ç”¨ELè¡¨è¾¾å¼çš„ç®€æ´å†™æ³•**ï¼š
```jsp
<!-- ELè¡¨è¾¾å¼å†™æ³•ï¼šç®€æ´æ˜äº† -->
<h1>æ¬¢è¿ï¼š${user.name}</h1>
```

**ğŸ¯ ELè¡¨è¾¾å¼çš„æ ¸å¿ƒä¼˜åŠ¿**ï¼š

| å¯¹æ¯”é¡¹ç›® | **ä¼ ç»ŸJSP** | **ELè¡¨è¾¾å¼** |
|---------|------------|-------------|
| **ä»£ç é‡** | `20-30è¡ŒJavaä»£ç ` | `1è¡Œç®€æ´è¡¨è¾¾å¼` |
| **å¯è¯»æ€§** | `HTMLä¸Javaæ··æ‚` | `ç±»ä¼¼HTMLå±æ€§ï¼Œç›´è§‚` |
| **å®‰å…¨æ€§** | `éœ€è¦æ‰‹åŠ¨åˆ¤ç©º` | `è‡ªåŠ¨å¤„ç†nullå€¼` |
| **ç»´æŠ¤æ€§** | `ä¿®æ”¹å¤æ‚` | `ä¿®æ”¹ç®€å•` |

### 1.3 ä»€ä¹ˆæ˜¯ELè¡¨è¾¾å¼


**ğŸ“‹ ELè¡¨è¾¾å¼å®šä¹‰**ï¼š
```
EL = Expression Languageï¼ˆè¡¨è¾¾å¼è¯­è¨€ï¼‰
ä½œç”¨ï¼šåœ¨JSPé¡µé¢ä¸­ç®€åŒ–æ•°æ®è®¿é—®å’Œæ˜¾ç¤º
è¯­æ³•ï¼š${è¡¨è¾¾å¼}
åŸç†ï¼šè‡ªåŠ¨ä»å„ä¸ªä½œç”¨åŸŸæŸ¥æ‰¾æ•°æ®å¹¶æ˜¾ç¤º
```

> ğŸ  **ç”Ÿæ´»ç±»æ¯”**ï¼šELè¡¨è¾¾å¼å°±åƒå®¶é‡Œçš„ä¸‡èƒ½é¥æ§å™¨ï¼Œä¸ç®¡æ˜¯ç”µè§†ã€ç©ºè°ƒè¿˜æ˜¯éŸ³å“ï¼Œä¸€ä¸ªé¥æ§å™¨å°±èƒ½æ§åˆ¶æ‰€æœ‰è®¾å¤‡ï¼Œä¸éœ€è¦æ¯ä¸ªè®¾å¤‡éƒ½å•ç‹¬æ“ä½œã€‚

---

## 2. ğŸ¯ ELè¡¨è¾¾å¼åŸºç¡€è¯­æ³•


### 2.1 åŸºæœ¬è¯­æ³•è§„åˆ™


**ğŸ“ ELè¡¨è¾¾å¼è¯­æ³•ç»“æ„**ï¼š
```
åŸºæœ¬æ ¼å¼ï¼š${è¡¨è¾¾å¼å†…å®¹}
å˜é‡è®¿é—®ï¼š${å˜é‡å}
å±æ€§è®¿é—®ï¼š${å¯¹è±¡.å±æ€§å}
æ•°ç»„è®¿é—®ï¼š${æ•°ç»„[ç´¢å¼•]}
Mapè®¿é—®ï¼š${map['key']}
```

### 2.2 ä½œç”¨åŸŸæŸ¥æ‰¾é¡ºåº


**ğŸ” ELè‡ªåŠ¨æŸ¥æ‰¾æ•°æ®çš„é¡ºåº**ï¼š
```
æŸ¥æ‰¾é¡ºåºï¼ˆä»å°åˆ°å¤§ï¼‰ï¼š
pageScopeï¼ˆé¡µé¢èŒƒå›´ï¼‰
    â†“
requestScopeï¼ˆè¯·æ±‚èŒƒå›´ï¼‰  
    â†“
sessionScopeï¼ˆä¼šè¯èŒƒå›´ï¼‰
    â†“
applicationScopeï¼ˆåº”ç”¨èŒƒå›´ï¼‰
```

**ğŸ’¡ å®é™…ä¾‹å­**ï¼š
```java
// Servletä¸­è®¾ç½®æ•°æ®
request.setAttribute("message", "è¯·æ±‚ä¸­çš„æ¶ˆæ¯");
session.setAttribute("message", "ä¼šè¯ä¸­çš„æ¶ˆæ¯");
```

```jsp
<!-- JSPä¸­ä½¿ç”¨ -->
${message}  <!-- æ˜¾ç¤º"è¯·æ±‚ä¸­çš„æ¶ˆæ¯"ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰ -->
${sessionScope.message}  <!-- æ˜¾ç¤º"ä¼šè¯ä¸­çš„æ¶ˆæ¯"ï¼ˆæŒ‡å®šä½œç”¨åŸŸï¼‰ -->
```

### 2.3 å¸¸ç”¨ELè¡¨è¾¾å¼ç¤ºä¾‹


**ğŸ”¸ åŸºç¡€æ•°æ®è®¿é—®**ï¼š
```jsp
<!-- ç®€å•å˜é‡ -->
ç”¨æˆ·åï¼š${username}
å¹´é¾„ï¼š${age}

<!-- å¯¹è±¡å±æ€§ -->
å§“åï¼š${user.name}
é‚®ç®±ï¼š${user.email}

<!-- åµŒå¥—å±æ€§ -->
éƒ¨é—¨åç§°ï¼š${user.department.name}
```

**ğŸ”¸ é›†åˆæ•°æ®è®¿é—®**ï¼š
```jsp
<!-- Listé›†åˆ -->
ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼š${userList[0].name}
ç”¨æˆ·æ€»æ•°ï¼š${userList.size()}

<!-- Mapé›†åˆ -->
é…ç½®ä¿¡æ¯ï¼š${config['database.url']}
ç³»ç»Ÿè®¾ç½®ï¼š${systemConfig.maxUsers}
```

**ğŸ”¸ è¿ç®—ç¬¦ä½¿ç”¨**ï¼š
```jsp
<!-- ç®—æœ¯è¿ç®— -->
æ€»ä»·ï¼š${price * quantity} å…ƒ
æŠ˜æ‰£åï¼š${price * 0.8} å…ƒ

<!-- æ¯”è¾ƒè¿ç®— -->
${age >= 18 ? 'æˆå¹´äºº' : 'æœªæˆå¹´'}
${user.vip ? 'VIPç”¨æˆ·' : 'æ™®é€šç”¨æˆ·'}

<!-- é€»è¾‘è¿ç®— -->
${not empty username and username != 'guest'}
```

### 2.4 ELè¡¨è¾¾å¼çš„å®‰å…¨ç‰¹æ€§


**ğŸ›¡ï¸ è‡ªåŠ¨å®‰å…¨å¤„ç†**ï¼š

```
nullå€¼å®‰å…¨ï¼š${user.name}
â†’ å¦‚æœuserä¸ºnullï¼Œæ˜¾ç¤ºç©ºå­—ç¬¦ä¸²ï¼Œä¸ä¼šæŠ¥é”™

ç©ºé›†åˆå®‰å…¨ï¼š${list[0]}  
â†’ å¦‚æœlistä¸ºç©ºï¼Œæ˜¾ç¤ºç©ºå­—ç¬¦ä¸²ï¼Œä¸ä¼šæ•°ç»„è¶Šç•Œ

å±æ€§ä¸å­˜åœ¨ï¼š${user.nonExistProperty}
â†’ å¦‚æœå±æ€§ä¸å­˜åœ¨ï¼Œæ˜¾ç¤ºç©ºå­—ç¬¦ä¸²ï¼Œä¸ä¼šæŠ¥é”™
```

> âš ï¸ **é‡è¦ç†è§£**ï¼šè¿™å°±æ˜¯ä¸ºä»€ä¹ˆELè¡¨è¾¾å¼æ¯”ä¼ ç»ŸJSPè„šæœ¬æ›´å®‰å…¨ï¼Œå®ƒå¸®æˆ‘ä»¬å¤„ç†äº†æ‰€æœ‰å¯èƒ½å‡ºé”™çš„æƒ…å†µã€‚

---

## 3. ğŸ“š JSTLæ ‡ç­¾åº“ä»‹ç»


### 3.1 ä»€ä¹ˆæ˜¯JSTL


**ğŸ“‹ JSTLå®šä¹‰**ï¼š
```
JSTL = JavaServer Pages Standard Tag Library
ä¸­æ–‡ï¼šJSPæ ‡å‡†æ ‡ç­¾åº“
ä½œç”¨ï¼šæä¾›å¸¸ç”¨çš„æ ‡ç­¾ï¼Œå‡å°‘JSPä¸­çš„Javaä»£ç 
ç›®æ ‡ï¼šè®©JSPé¡µé¢æ›´åƒHTMLï¼Œæ›´æ˜“ç»´æŠ¤
```

**ğŸ—ï¸ JSTLçš„è®¾è®¡æ€æƒ³**ï¼š
```
ä¼ ç»Ÿæ€è·¯ï¼šJSP = HTML + Javaä»£ç 
JSTLæ€è·¯ï¼šJSP = HTML + æ ‡ç­¾ï¼ˆçœ‹èµ·æ¥åƒHTMLå±æ€§ï¼‰

ä¼˜åŠ¿ï¼š
â€¢ å‰ç«¯å¼€å‘è€…å®¹æ˜“ç†è§£
â€¢ ä»£ç æ›´è§„èŒƒç»Ÿä¸€
â€¢ å‡å°‘å‡ºé”™æ¦‚ç‡
```

### 3.2 JSTLæ ‡ç­¾åº“åˆ†ç±»


**ğŸ“¦ JSTLæ ‡ç­¾åº“ç»„æˆ**ï¼š

| æ ‡ç­¾åº“ç±»å‹ | **å‰ç¼€** | **URI** | **ä¸»è¦ç”¨é€”** |
|-----------|---------|---------|-------------|
| **æ ¸å¿ƒæ ‡ç­¾** | `c` | `http://java.sun.com/jsp/jstl/core` | `æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ã€å˜é‡æ“ä½œ` |
| **æ ¼å¼åŒ–æ ‡ç­¾** | `fmt` | `http://java.sun.com/jsp/jstl/fmt` | `æ—¥æœŸã€æ•°å­—ã€å›½é™…åŒ–æ ¼å¼` |
| **å‡½æ•°æ ‡ç­¾** | `fn` | `http://java.sun.com/jsp/jstl/functions` | `å­—ç¬¦ä¸²å¤„ç†ã€é›†åˆæ“ä½œ` |

> ğŸ”´ **å¿…é¡»æŒæ¡**ï¼šæ ¸å¿ƒæ ‡ç­¾æ˜¯æœ€é‡è¦çš„ï¼Œ99%çš„æƒ…å†µéƒ½åœ¨ç”¨
> ğŸŸ¡ **å»ºè®®äº†è§£**ï¼šæ ¼å¼åŒ–æ ‡ç­¾åœ¨å¤„ç†æ—¥æœŸã€é‡‘é¢æ—¶å¾ˆæœ‰ç”¨
> ğŸŸ¢ **æ‹“å±•çŸ¥è¯†**ï¼šå‡½æ•°æ ‡ç­¾åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä½¿ç”¨

### 3.3 JSTLç¯å¢ƒé…ç½®


**âš™ï¸ ä½¿ç”¨JSTLçš„å‡†å¤‡å·¥ä½œ**ï¼š

```jsp
<%-- 1. åœ¨JSPé¡µé¢é¡¶éƒ¨å¼•å…¥æ ‡ç­¾åº“ --%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<%-- 2. ç„¶åå°±å¯ä»¥ä½¿ç”¨æ ‡ç­¾äº† --%>
<c:if test="${user != null}">
    æ¬¢è¿ï¼š${user.name}
</c:if>
```

**ğŸ“ Mavenä¾èµ–é…ç½®**ï¼š
```xml
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>
```

---

## 4. ğŸ› ï¸ æ ¸å¿ƒæ ‡ç­¾è¯¦è§£


### 4.1 æ¡ä»¶åˆ¤æ–­æ ‡ç­¾


#### ğŸ”¸ c:if æ ‡ç­¾ï¼ˆç®€å•æ¡ä»¶åˆ¤æ–­ï¼‰


**åŸºç¡€ç”¨æ³•**ï¼š
```jsp
<!-- ç®€å•æ¡ä»¶åˆ¤æ–­ -->
<c:if test="${user != null}">
    <h2>æ¬¢è¿å›æ¥ï¼Œ${user.name}ï¼</h2>
</c:if>

<!-- å¤æ‚æ¡ä»¶åˆ¤æ–­ -->
<c:if test="${user.age >= 18 and user.status == 'active'}">
    <a href="vip.jsp">å‡çº§VIP</a>
</c:if>
```

> ğŸ’­ **ç†è§£è¦ç‚¹**ï¼š`c:if`å°±åƒç¼–ç¨‹è¯­è¨€ä¸­çš„ifè¯­å¥ï¼Œä½†æ˜¯å†™åœ¨HTMLé‡Œé¢ï¼Œçœ‹èµ·æ¥æ›´ç›´è§‚ã€‚

#### ğŸ”¸ c:chooseæ ‡ç­¾ï¼ˆå¤šæ¡ä»¶åˆ¤æ–­ï¼‰


**å¤šåˆ†æ”¯åˆ¤æ–­**ï¼š
```jsp
<c:choose>
    <c:when test="${user.score >= 90}">
        <span class="excellent">ä¼˜ç§€</span>
    </c:when>
    <c:when test="${user.score >= 80}">
        <span class="good">è‰¯å¥½</span>
    </c:when>
    <c:when test="${user.score >= 60}">
        <span class="pass">åŠæ ¼</span>
    </c:when>
    <c:otherwise>
        <span class="fail">ä¸åŠæ ¼</span>
    </c:otherwise>
</c:choose>
```

**ğŸ¤” æ–°æ‰‹ç–‘é—®**ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨if-elseï¼Ÿ
> **ç­”æ¡ˆ**ï¼šå› ä¸ºJSPä¸­ä¸èƒ½ç›´æ¥å†™if-elseï¼Œ`c:choose`ç›¸å½“äºswitchè¯­å¥ï¼Œè®©å¤šæ¡ä»¶åˆ¤æ–­æ›´æ¸…æ™°ã€‚

### 4.2 å¾ªç¯æ ‡ç­¾


#### ğŸ”¸ c:forEachæ ‡ç­¾ï¼ˆéå†é›†åˆï¼‰


**éå†Listé›†åˆ**ï¼š
```jsp
<!-- æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨ -->
<table border="1">
    <tr>
        <th>åºå·</th>
        <th>å§“å</th>
        <th>é‚®ç®±</th>
    </tr>
    <c:forEach var="user" items="${userList}" varStatus="status">
        <tr>
            <td>${status.index + 1}</td>  <!-- åºå·ä»1å¼€å§‹ -->
            <td>${user.name}</td>
            <td>${user.email}</td>
        </tr>
    </c:forEach>
</table>
```

**éå†Mapé›†åˆ**ï¼š
```jsp
<!-- æ˜¾ç¤ºé…ç½®ä¿¡æ¯ -->
<c:forEach var="entry" items="${configMap}">
    <p>${entry.key}ï¼š${entry.value}</p>
</c:forEach>
```

**ğŸ“Š varStatusçŠ¶æ€ä¿¡æ¯**ï¼š

| å±æ€§ | **å«ä¹‰** | **ç¤ºä¾‹ç”¨é€”** |
|------|---------|-------------|
| `index` | `ä»0å¼€å§‹çš„ç´¢å¼•` | `æ˜¾ç¤ºåºå·ï¼š${status.index + 1}` |
| `count` | `ä»1å¼€å§‹çš„è®¡æ•°` | `ç¬¬${status.count}ä¸ªé¡¹ç›®` |
| `first` | `æ˜¯å¦ç¬¬ä¸€ä¸ªå…ƒç´ ` | `ç¬¬ä¸€è¡Œç‰¹æ®Šæ ·å¼` |
| `last` | `æ˜¯å¦æœ€åä¸€ä¸ªå…ƒç´ ` | `æœ€åä¸€è¡Œä¸æ˜¾ç¤ºåˆ†å‰²çº¿` |

### 4.3 å˜é‡æ“ä½œæ ‡ç­¾


#### ğŸ”¸ c:setæ ‡ç­¾ï¼ˆè®¾ç½®å˜é‡ï¼‰


**è®¾ç½®ç®€å•å˜é‡**ï¼š
```jsp
<!-- è®¾ç½®é¡µé¢å˜é‡ -->
<c:set var="title" value="ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ" />
<h1>${title}</h1>

<!-- è®¾ç½®åˆ°æŒ‡å®šä½œç”¨åŸŸ -->
<c:set var="message" value="æ“ä½œæˆåŠŸ" scope="session" />
```

**è®¡ç®—å¹¶è®¾ç½®å˜é‡**ï¼š
```jsp
<c:set var="totalPrice" value="${price * quantity * 0.9}" />
æŠ˜æ‰£åæ€»ä»·ï¼š${totalPrice}å…ƒ
```

#### ğŸ”¸ c:removeæ ‡ç­¾ï¼ˆåˆ é™¤å˜é‡ï¼‰


```jsp
<!-- åˆ é™¤å˜é‡ -->
<c:remove var="tempData" />
<c:remove var="userCache" scope="session" />
```

### 4.4 URLå’Œè¾“å‡ºæ ‡ç­¾


#### ğŸ”¸ c:urlæ ‡ç­¾ï¼ˆURLå¤„ç†ï¼‰


```jsp
<!-- æ„å»ºURL -->
<c:url var="editUrl" value="/user/edit.jsp">
    <c:param name="id" value="${user.id}" />
    <c:param name="type" value="admin" />
</c:url>

<!-- ä½¿ç”¨æ„å»ºçš„URL -->
<a href="${editUrl}">ç¼–è¾‘ç”¨æˆ·</a>
```

#### ğŸ”¸ c:outæ ‡ç­¾ï¼ˆå®‰å…¨è¾“å‡ºï¼‰


```jsp
<!-- å®‰å…¨è¾“å‡ºï¼Œé˜²æ­¢XSSæ”»å‡» -->
<c:out value="${user.description}" escapeXml="true" />

<!-- æŒ‡å®šé»˜è®¤å€¼ -->
<c:out value="${user.nickname}" default="æœªè®¾ç½®æ˜µç§°" />
```

---

## 5. ğŸ”— æ•°æ®ç»‘å®šä¸æ˜¾ç¤º


### 5.1 Servletä¸JSPæ•°æ®ä¼ é€’


**ğŸ“¤ Servletä¸­å‡†å¤‡æ•°æ®**ï¼š
```java
@WebServlet("/userList")
public class UserListServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // å‡†å¤‡ç”¨æˆ·åˆ—è¡¨æ•°æ®
        List<User> users = new ArrayList<>();
        users.add(new User(1, "å¼ ä¸‰", "zhang@example.com", 25));
        users.add(new User(2, "æå››", "li@example.com", 30));
        
        // è®¾ç½®åˆ°requestä½œç”¨åŸŸ
        request.setAttribute("userList", users);
        request.setAttribute("total", users.size());
        
        // è½¬å‘åˆ°JSPé¡µé¢
        request.getRequestDispatcher("/userList.jsp").forward(request, response);
    }
}
```

**ğŸ“¥ JSPä¸­æ¥æ”¶å¹¶æ˜¾ç¤ºæ•°æ®**ï¼š
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<html>
<head>
    <title>ç”¨æˆ·åˆ—è¡¨</title>
</head>
<body>
    <h1>ç”¨æˆ·ç®¡ç†ï¼ˆå…±${total}äººï¼‰</h1>
    
    <c:if test="${empty userList}">
        <p>æš‚æ— ç”¨æˆ·æ•°æ®</p>
    </c:if>
    
    <c:if test="${not empty userList}">
        <table border="1">
            <c:forEach var="user" items="${userList}" varStatus="status">
                <tr style="${status.index % 2 == 0 ? 'background-color:#f0f0f0' : ''}">
                    <td>${status.count}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.age}å²</td>
                </tr>
            </c:forEach>
        </table>
    </c:if>
</body>
</html>
```

### 5.2 å¤æ‚æ•°æ®ç»“æ„å¤„ç†


**ğŸ“Š å¤„ç†åµŒå¥—å¯¹è±¡**ï¼š
```java
// Userç±»åŒ…å«Departmentå¯¹è±¡
public class User {
    private String name;
    private Department department;
    // getter/setter...
}

public class Department {
    private String name;
    private String location;
    // getter/setter...
}
```

```jsp
<!-- JSPä¸­è®¿é—®åµŒå¥—å±æ€§ -->
<c:forEach var="user" items="${userList}">
    <tr>
        <td>${user.name}</td>
        <td>${user.department.name}</td>
        <td>${user.department.location}</td>
    </tr>
</c:forEach>
```

**ğŸ—‚ï¸ å¤„ç†Mapæ•°æ®**ï¼š
```java
// Servletä¸­è®¾ç½®Mapæ•°æ®
Map<String, Object> userStats = new HashMap<>();
userStats.put("totalUsers", 150);
userStats.put("activeUsers", 120);
userStats.put("newUsers", 15);
request.setAttribute("stats", userStats);
```

```jsp
<!-- JSPä¸­æ˜¾ç¤ºMapæ•°æ® -->
<div class="stats">
    <p>æ€»ç”¨æˆ·æ•°ï¼š${stats.totalUsers}</p>
    <p>æ´»è·ƒç”¨æˆ·ï¼š${stats.activeUsers}</p>
    <p>æ–°å¢ç”¨æˆ·ï¼š${stats.newUsers}</p>
</div>

<!-- æˆ–è€…éå†Map -->
<c:forEach var="entry" items="${stats}">
    <p>${entry.key}ï¼š${entry.value}</p>
</c:forEach>
```

---

## 6. ğŸš€ å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º


### 6.1 ç”¨æˆ·ç®¡ç†å®Œæ•´æ¡ˆä¾‹


**ğŸ¯ æ¡ˆä¾‹åœºæ™¯**ï¼šåˆ¶ä½œä¸€ä¸ªç”¨æˆ·ç®¡ç†é¡µé¢ï¼ŒåŒ…å«ç”¨æˆ·åˆ—è¡¨ã€æœç´¢ã€çŠ¶æ€æ˜¾ç¤º

**ğŸ“‹ Servletæ§åˆ¶å™¨**ï¼š
```java
@WebServlet("/admin/users")
public class UserManageServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        String keyword = request.getParameter("keyword");
        
        // æ¨¡æ‹Ÿä»æ•°æ®åº“è·å–ç”¨æˆ·
        List<User> allUsers = getUsersFromDatabase();
        List<User> filteredUsers = new ArrayList<>();
        
        // æ ¹æ®å…³é”®è¯è¿‡æ»¤
        if (keyword != null && !keyword.trim().isEmpty()) {
            for (User user : allUsers) {
                if (user.getName().contains(keyword)) {
                    filteredUsers.add(user);
                }
            }
        } else {
            filteredUsers = allUsers;
        }
        
        // ç»Ÿè®¡ä¿¡æ¯
        Map<String, Integer> statistics = new HashMap<>();
        statistics.put("total", filteredUsers.size());
        statistics.put("active", (int) filteredUsers.stream().filter(u -> u.isActive()).count());
        
        // è®¾ç½®æ•°æ®åˆ°request
        request.setAttribute("userList", filteredUsers);
        request.setAttribute("stats", statistics);
        request.setAttribute("keyword", keyword);
        
        // è½¬å‘åˆ°JSP
        request.getRequestDispatcher("/WEB-INF/views/userManage.jsp").forward(request, response);
    }
}
```

**ğŸ¨ JSPè§†å›¾é¡µé¢**ï¼š
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<!DOCTYPE html>
<html>
<head>
    <title>ç”¨æˆ·ç®¡ç†</title>
    <style>
        .stats { background: #f5f5f5; padding: 10px; margin: 10px 0; }
        .active { color: green; }
        .inactive { color: red; }
        .even-row { background-color: #f9f9f9; }
    </style>
</head>
<body>
    <h1>ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ</h1>
    
    <!-- æœç´¢è¡¨å• -->
    <form method="get">
        <input type="text" name="keyword" value="${keyword}" placeholder="è¾“å…¥ç”¨æˆ·åæœç´¢" />
        <button type="submit">æœç´¢</button>
        <a href="?">æ˜¾ç¤ºå…¨éƒ¨</a>
    </form>
    
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats">
        <c:if test="${not empty keyword}">
            <p>æœç´¢"${keyword}"çš„ç»“æœï¼š</p>
        </c:if>
        <p>å…±æ‰¾åˆ° <strong>${stats.total}</strong> ä¸ªç”¨æˆ·ï¼Œå…¶ä¸­ <strong>${stats.active}</strong> ä¸ªæ´»è·ƒç”¨æˆ·</p>
    </div>
    
    <!-- ç”¨æˆ·åˆ—è¡¨ -->
    <c:choose>
        <c:when test="${empty userList}">
            <div class="no-data">
                <p>ğŸ˜” æ²¡æœ‰æ‰¾åˆ°ç”¨æˆ·æ•°æ®</p>
                <c:if test="${not empty keyword}">
                    <p>è¯•è¯•æœç´¢å…¶ä»–å…³é”®è¯ï¼Œæˆ–è€…<a href="?">æŸ¥çœ‹å…¨éƒ¨ç”¨æˆ·</a></p>
                </c:if>
            </div>
        </c:when>
        <c:otherwise>
            <table border="1" width="100%">
                <thead>
                    <tr>
                        <th>åºå·</th>
                        <th>ç”¨æˆ·å</th>
                        <th>é‚®ç®±</th>
                        <th>å¹´é¾„</th>
                        <th>çŠ¶æ€</th>
                        <th>æ³¨å†Œæ—¶é—´</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach var="user" items="${userList}" varStatus="loop">
                        <tr class="${loop.index % 2 == 0 ? 'even-row' : ''}">
                            <td>${loop.count}</td>
                            <td>
                                <c:choose>
                                    <c:when test="${user.vip}">
                                        ğŸ‘‘ ${user.name}
                                    </c:when>
                                    <c:otherwise>
                                        ${user.name}
                                    </c:otherwise>
                                </c:choose>
                            </td>
                            <td>${user.email}</td>
                            <td>
                                ${user.age}å²
                                <c:if test="${user.age < 18}">
                                    <span style="color: orange;">ï¼ˆæœªæˆå¹´ï¼‰</span>
                                </c:if>
                            </td>
                            <td>
                                <c:choose>
                                    <c:when test="${user.active}">
                                        <span class="active">âœ… æ´»è·ƒ</span>
                                    </c:when>
                                    <c:otherwise>
                                        <span class="inactive">âŒ æœªæ¿€æ´»</span>
                                    </c:otherwise>
                                </c:choose>
                            </td>
                            <td>
                                <fmt:formatDate value="${user.createTime}" pattern="yyyy-MM-dd HH:mm" />
                            </td>
                            <td>
                                <c:url var="editUrl" value="/admin/editUser">
                                    <c:param name="id" value="${user.id}" />
                                </c:url>
                                <a href="${editUrl}">ç¼–è¾‘</a>
                                
                                <c:if test="${user.active}">
                                    | <a href="#" onclick="deactivateUser(${user.id})">ç¦ç”¨</a>
                                </c:if>
                                <c:if test="${not user.active}">
                                    | <a href="#" onclick="activateUser(${user.id})">å¯ç”¨</a>
                                </c:if>
                            </td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
            
            <!-- åˆ†é¡µä¿¡æ¯ -->
            <c:if test="${loop.count > 10}">
                <p>æ³¨ï¼šå½“å‰æ˜¾ç¤ºå‰10æ¡è®°å½•ï¼Œ<a href="?showAll=true">æ˜¾ç¤ºå…¨éƒ¨${stats.total}æ¡</a></p>
            </c:if>
        </c:otherwise>
    </c:choose>
</body>
</html>
```

### 6.2 æ¡ˆä¾‹å…³é”®æŠ€å·§æ€»ç»“


**ğŸ¯ æ¡ˆä¾‹ä¸­çš„æ ¸å¿ƒæŠ€å·§**ï¼š

```
1. æ¡ä»¶åµŒå¥—ä½¿ç”¨ï¼š
   c:choose > c:when > c:if çš„ç»„åˆä½¿ç”¨

2. å¾ªç¯çŠ¶æ€åˆ©ç”¨ï¼š
   ä½¿ç”¨ varStatus å®ç°å¥‡å¶è¡Œæ ·å¼ã€åºå·æ˜¾ç¤º

3. æ•°æ®å®‰å…¨å¤„ç†ï¼š
   ä½¿ç”¨ c:out é˜²æ­¢XSSæ”»å‡»

4. URLåŠ¨æ€æ„å»ºï¼š
   ä½¿ç”¨ c:url å’Œ c:param æ„å»ºå¸¦å‚æ•°çš„é“¾æ¥

5. ç©ºæ•°æ®å‹å¥½æç¤ºï¼š
   ä½¿ç”¨ empty å’Œ not empty åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨
```

**ğŸ’¡ å®æˆ˜ç»éªŒåˆ†äº«**ï¼š
> **è°ƒè¯•æŠ€å·§**ï¼šå½“ELè¡¨è¾¾å¼æ˜¾ç¤ºä¸å‡ºæ•°æ®æ—¶ï¼Œå…ˆæ£€æŸ¥Servletä¸­æ˜¯å¦æ­£ç¡®è®¾ç½®äº†attributeï¼Œå†æ£€æŸ¥JSPä¸­çš„å˜é‡åæ˜¯å¦ä¸€è‡´ã€‚
> 
> **æ€§èƒ½ä¼˜åŒ–**ï¼šåœ¨å¾ªç¯ä¸­é¿å…å¤æ‚çš„ELè¡¨è¾¾å¼è®¡ç®—ï¼Œå¯ä»¥åœ¨Servletä¸­é¢„å¤„ç†æ•°æ®ã€‚
> 
> **ç”¨æˆ·ä½“éªŒ**ï¼šå–„ç”¨æ¡ä»¶åˆ¤æ–­ä¸ºä¸åŒçŠ¶æ€æä¾›ä¸åŒçš„è§†è§‰åé¦ˆã€‚

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ELè¡¨è¾¾å¼ï¼š${è¡¨è¾¾å¼} è¯­æ³•ï¼Œè‡ªåŠ¨æŸ¥æ‰¾ä½œç”¨åŸŸæ•°æ®
ğŸ”¸ JSTLæ ¸å¿ƒæ ‡ç­¾ï¼šc:ifã€c:chooseã€c:forEach ä¸‰å¤§æ ¸å¿ƒæ ‡ç­¾
ğŸ”¸ æ•°æ®ç»‘å®šï¼šServletè®¾ç½®attributeï¼ŒJSPç”¨ELè·å–
ğŸ”¸ å®‰å…¨å¤„ç†ï¼šELè‡ªåŠ¨å¤„ç†nullå€¼ï¼Œé¿å…ç¨‹åºå´©æºƒ
ğŸ”¸ ä½œç”¨åŸŸé¡ºåºï¼špage â†’ request â†’ session â†’ application
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ELè¡¨è¾¾å¼çš„è®¾è®¡å“²å­¦**ï¼š
```
ç®€åŒ–åŸåˆ™ï¼šèƒ½ç”¨ELçš„åœ°æ–¹ä¸ç”¨Javaè„šæœ¬
å®‰å…¨åŸåˆ™ï¼šè‡ªåŠ¨å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ  
ç›´è§‚åŸåˆ™ï¼šè¯­æ³•ç±»ä¼¼äºè®¿é—®å¯¹è±¡å±æ€§
æ•ˆç‡åŸåˆ™ï¼šå‡å°‘ä»£ç é‡ï¼Œæé«˜å¼€å‘æ•ˆç‡
```

**ğŸ”¹ JSTLæ ‡ç­¾çš„é€‰æ‹©ç­–ç•¥**ï¼š
```
æ¡ä»¶åˆ¤æ–­ï¼š
â€¢ ç®€å•æ¡ä»¶ â†’ c:if
â€¢ å¤šåˆ†æ”¯æ¡ä»¶ â†’ c:choose

å¾ªç¯éå†ï¼š
â€¢ é›†åˆéå† â†’ c:forEach
â€¢ éœ€è¦çŠ¶æ€ä¿¡æ¯ â†’ ä½¿ç”¨varStatus

æ•°æ®è¾“å‡ºï¼š
â€¢ æ™®é€šæ•°æ® â†’ ç›´æ¥ç”¨${...}
â€¢ ç”¨æˆ·è¾“å…¥æ•°æ® â†’ c:outï¼ˆé˜²XSSï¼‰
```

**ğŸ”¹ æ•°æ®ä¼ é€’æœ€ä½³å®è·µ**ï¼š
```
ServletèŒè´£ï¼š
â€¢ å¤„ç†ä¸šåŠ¡é€»è¾‘
â€¢ å‡†å¤‡é¡µé¢éœ€è¦çš„æ•°æ®
â€¢ è®¾ç½®åˆ°åˆé€‚çš„ä½œç”¨åŸŸ

JSPèŒè´£ï¼š
â€¢ åªè´Ÿè´£æ•°æ®å±•ç¤º
â€¢ ä½¿ç”¨ELå’ŒJSTLå¤„ç†æ˜¾ç¤ºé€»è¾‘
â€¢ ä¸åŒ…å«Javaä¸šåŠ¡ä»£ç 
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è§£å†³çš„å®é™…é—®é¢˜**ï¼š
- **ä»£ç åˆ†ç¦»**ï¼šHTMLå’ŒJavaä»£ç å®Œå…¨åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤
- **å›¢é˜Ÿåä½œ**ï¼šå‰ç«¯å¼€å‘è€…å¯ä»¥ç›´æ¥ä¿®æ”¹JSPé¡µé¢æ ·å¼
- **å‡å°‘é”™è¯¯**ï¼šè‡ªåŠ¨å¤„ç†nullå€¼ï¼Œå‡å°‘ç©ºæŒ‡é’ˆå¼‚å¸¸
- **æé«˜æ•ˆç‡**ï¼šç®€åŒ–æ•°æ®æ˜¾ç¤ºä»£ç ï¼Œå¼€å‘æ›´å¿«

**ğŸ”§ å¼€å‘å®è·µæŒ‡å¯¼**ï¼š
- **æ•°æ®å‡†å¤‡**ï¼šåœ¨Servletä¸­å®Œæˆæ‰€æœ‰æ•°æ®å¤„ç†
- **é¡µé¢å±•ç¤º**ï¼šåœ¨JSPä¸­åªåšæ•°æ®å±•ç¤ºå’Œç®€å•é€»è¾‘åˆ¤æ–­
- **é”™è¯¯å¤„ç†**ï¼šåˆ©ç”¨ELçš„å®‰å…¨ç‰¹æ€§ï¼Œæä¾›å‹å¥½çš„é”™è¯¯æç¤º
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…åœ¨JSPä¸­è¿›è¡Œå¤æ‚è®¡ç®—

### 7.4 å­¦ä¹ æ£€æŸ¥æ¸…å•


**âœ… åŸºç¡€æŒæ¡æ£€æŸ¥**ï¼š
- [ ] èƒ½å†™å‡ºåŸºæœ¬çš„ELè¡¨è¾¾å¼è¯­æ³•
- [ ] ç†è§£ELä½œç”¨åŸŸæŸ¥æ‰¾é¡ºåº
- [ ] æŒæ¡c:ifå’Œc:chooseçš„ä½¿ç”¨åŒºåˆ«
- [ ] èƒ½ç”¨c:forEachéå†Listå’ŒMap
- [ ] çŸ¥é“å¦‚ä½•åœ¨Servletä¸­è®¾ç½®æ•°æ®ç»™JSPä½¿ç”¨

**âœ… è¿›é˜¶åº”ç”¨æ£€æŸ¥**ï¼š
- [ ] èƒ½å¤„ç†å¤æ‚çš„åµŒå¥—å¯¹è±¡æ˜¾ç¤º
- [ ] ä¼šä½¿ç”¨varStatusè·å–å¾ªç¯çŠ¶æ€
- [ ] èƒ½æ„å»ºåŠ¨æ€URLå’Œå¤„ç†å‚æ•°
- [ ] æŒæ¡æ•°æ®å®‰å…¨è¾“å‡ºçš„æ–¹æ³•
- [ ] èƒ½ç‹¬ç«‹å®Œæˆä¸€ä¸ªå®Œæ•´çš„æ•°æ®å±•ç¤ºé¡µé¢

**ğŸ¯ ä¸€å¥è¯ç²¾å**ï¼š
ELè¡¨è¾¾å¼è®©æ•°æ®è·å–å˜ç®€å•ï¼ŒJSTLæ ‡ç­¾è®©é¡µé¢é€»è¾‘æ›´æ¸…æ™°ï¼Œä¸¤è€…ç»“åˆè®©JSPå¼€å‘æ›´é«˜æ•ˆï¼

**ğŸ§  è®°å¿†å£è¯€**ï¼š
ELè·æ•°æ®ï¼ŒJSTLåšé€»è¾‘ï¼ŒServletå¤‡æ•°æ®ï¼ŒJSPçº¯å±•ç¤ºï¼

**æ ¸å¿ƒè®°å¿†**ï¼š
- ELè¡¨è¾¾å¼ = ç®€åŒ–çš„æ•°æ®è®¿é—®è¯­æ³•
- JSTLæ ‡ç­¾ = HTMLåŒ–çš„ç¨‹åºé€»è¾‘  
- æ•°æ®ç»‘å®š = Servletè®¾ç½®ï¼ŒJSPè·å–
- å®‰å…¨ç¬¬ä¸€ = è‡ªåŠ¨å¤„ç†å¼‚å¸¸ï¼Œé˜²æ­¢æ”»å‡»