---
title: 2ã€å®ä½“ç±»Entityè®¾è®¡
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯JavaBean](#1-ä»€ä¹ˆæ˜¯javabean)
2. [å®ä½“ç±»Entityçš„æ¦‚å¿µä¸ä½œç”¨](#2-å®ä½“ç±»entityçš„æ¦‚å¿µä¸ä½œç”¨)
3. [æ•°æ®åº“è¡¨ä¸å®ä½“ç±»çš„æ˜ å°„å…³ç³»](#3-æ•°æ®åº“è¡¨ä¸å®ä½“ç±»çš„æ˜ å°„å…³ç³»)
4. [ä¸»é”®è®¾è®¡ç­–ç•¥](#4-ä¸»é”®è®¾è®¡ç­–ç•¥)
5. [å­—æ®µå±æ€§å¯¹åº”è§„èŒƒ](#5-å­—æ®µå±æ€§å¯¹åº”è§„èŒƒ)
6. [æ³¨è§£é…ç½®è¯¦è§£](#6-æ³¨è§£é…ç½®è¯¦è§£)
7. [å…³è”å…³ç³»æ˜ å°„](#7-å…³è”å…³ç³»æ˜ å°„)
8. [å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º](#8-å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ«˜ ä»€ä¹ˆæ˜¯JavaBean


### 1.1 JavaBeançš„é€šä¿—ç†è§£


**ä»€ä¹ˆæ˜¯JavaBeanï¼Ÿ**
ç®€å•æ¥è¯´ï¼ŒJavaBeanå°±åƒæ˜¯ä¸€ä¸ª**æ ‡å‡†åŒ–çš„æ•°æ®å®¹å™¨**ï¼Œå°±åƒæˆ‘ä»¬ç”Ÿæ´»ä¸­çš„å¿«é€’ç›’å­ä¸€æ ·ï¼š

```
ç°å®ç”Ÿæ´»ä¸­çš„å¿«é€’ç›’ï¼š            JavaBeanï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ”¶ä»¶äººï¼šå¼ ä¸‰    â”‚            â”‚   name: "å¼ ä¸‰"   â”‚
â”‚  ç”µè¯ï¼š138xxx   â”‚     â†’      â”‚   phone: "138xx" â”‚
â”‚  åœ°å€ï¼šåŒ—äº¬å¸‚    â”‚            â”‚   address: "åŒ—äº¬" â”‚
â”‚  é‡é‡ï¼š2kg      â”‚            â”‚   weight: 2.0    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æ ‡å‡†æ ¼å¼ï¼Œä¾¿äºä¼ é€’å’Œå¤„ç†          æ ‡å‡†æ ¼å¼ï¼Œä¾¿äºç¨‹åºå¤„ç†
```

### 1.2 JavaBeançš„ä¸‰å¤§ç‰¹å¾


**JavaBeanå¿…é¡»éµå¾ªçš„æ ‡å‡†**ï¼š

**ğŸ”¹ ç‰¹å¾1ï¼šç§æœ‰å±æ€§ï¼ˆå°è£…æ€§ï¼‰**
```java
// âœ… æ­£ç¡®ï¼šå±æ€§ç§æœ‰åŒ–
private String name;
private int age;

// âŒ é”™è¯¯ï¼šå±æ€§å…¬å¼€
public String name;
public int age;
```

**ğŸ”¹ ç‰¹å¾2ï¼šgetter/setteræ–¹æ³•ï¼ˆè®¿é—®å™¨ï¼‰**
```java
// æä¾›æ ‡å‡†çš„è®¿é—®æ–¹æ³•
public String getName() {
    return name;  // è·å–æ•°æ®
}

public void setName(String name) {
    this.name = name;  // è®¾ç½®æ•°æ®
}
```

**ğŸ”¹ ç‰¹å¾3ï¼šæ— å‚æ„é€ å™¨**
```java
// å¿…é¡»æä¾›æ— å‚æ„é€ å™¨
public User() {
    // ç©ºæ„é€ å™¨ï¼Œä¾›æ¡†æ¶ä½¿ç”¨
}
```

### 1.3 ä¸ºä»€ä¹ˆè¦ç”¨JavaBeanï¼Ÿ


**ğŸ’¡ å¥½å¤„å¯¹æ¯”**ï¼š

| **ä½¿ç”¨JavaBean** | **ä¸ä½¿ç”¨JavaBean** |
|------------------|-------------------|
| `è§„èŒƒç»Ÿä¸€ï¼Œå›¢é˜Ÿåä½œæ–¹ä¾¿` | `å„å†™å„çš„ï¼Œæ··ä¹±ä¸å ª` |
| `æ¡†æ¶è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†` | `éœ€è¦æ‰‹åŠ¨ç¼–å†™å¤§é‡ä»£ç ` |
| `æ•°æ®å®‰å…¨ï¼Œç§æœ‰å±æ€§ä¿æŠ¤` | `æ•°æ®æš´éœ²ï¼Œå®¹æ˜“å‡ºé”™` |
| `ä¾¿äºç»´æŠ¤å’Œæ‰©å±•` | `ä¿®æ”¹å›°éš¾ï¼Œç‰µä¸€å‘åŠ¨å…¨èº«` |

---

## 2. ğŸ—ï¸ å®ä½“ç±»Entityçš„æ¦‚å¿µä¸ä½œç”¨


### 2.1 ä»€ä¹ˆæ˜¯Entityå®ä½“ç±»ï¼Ÿ


**é€šä¿—è§£é‡Š**ï¼š
Entityå°±æ˜¯**æ•°æ®åº“è¡¨åœ¨Javaä¸­çš„é•œåƒ**ï¼ŒæŠŠæ•°æ®åº“è¡¨çš„æ¯ä¸€è¡Œæ•°æ®ç”¨ä¸€ä¸ªJavaå¯¹è±¡æ¥è¡¨ç¤ºã€‚

```
æ•°æ®åº“ç”¨æˆ·è¡¨ï¼š                  Javaç”¨æˆ·å®ä½“ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ userè¡¨         â”‚              â”‚ Userç±»         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (ä¸»é”®)      â”‚              â”‚ private Long idâ”‚
â”‚ username       â”‚       â†â†’     â”‚ private String â”‚
â”‚ password       â”‚              â”‚   username     â”‚
â”‚ email          â”‚              â”‚ private String â”‚
â”‚ create_time    â”‚              â”‚   password     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ ... ç­‰ç­‰       â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Entityçš„æ ¸å¿ƒä½œç”¨


**ğŸ¯ ä½œç”¨1ï¼šæ•°æ®ä¼ è¾“è½½ä½“**
```java
// ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
User user = userService.findById(1);

// åœ¨ä¸åŒå±‚ä¹‹é—´ä¼ é€’æ•°æ®
Controller â†’ Service â†’ DAO â†’ Database
```

**ğŸ¯ ä½œç”¨2ï¼šä¸šåŠ¡é€»è¾‘æ‰¿è½½**
```java
public class User {
    private String password;
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šæ£€æŸ¥å¯†ç å¼ºåº¦
    public boolean isPasswordStrong() {
        return password.length() >= 8 && 
               password.matches(".*[A-Z].*") &&
               password.matches(".*[0-9].*");
    }
}
```

**ğŸ¯ ä½œç”¨3ï¼šæ¡†æ¶é›†æˆæ¡¥æ¢**
```java
// Hibernateè‡ªåŠ¨æ˜ å°„
@Entity
@Table(name = "user")
public class User {
    // æ¡†æ¶è‡ªåŠ¨å¤„ç†æ•°æ®åº“æ“ä½œ
}
```

### 2.3 Entityä¸æ™®é€šJavaBeançš„åŒºåˆ«


| **ç‰¹æ€§** | **æ™®é€šJavaBean** | **Entityå®ä½“ç±»** |
|----------|------------------|-----------------|
| **ç”¨é€”** | `é€šç”¨æ•°æ®å®¹å™¨` | `ä¸“é—¨å¯¹åº”æ•°æ®åº“è¡¨` |
| **æ˜ å°„** | `ä¸ä¸€å®šå¯¹åº”æ•°æ®åº“` | `å¿…é¡»å¯¹åº”æ•°æ®åº“è¡¨` |
| **æ³¨è§£** | `å¾ˆå°‘ä½¿ç”¨æ³¨è§£` | `å¤§é‡ä½¿ç”¨JPAç­‰æ³¨è§£` |
| **ä¸»é”®** | `å¯æœ‰å¯æ— ` | `å¿…é¡»æœ‰ä¸»é”®å­—æ®µ` |
| **ç”Ÿå‘½å‘¨æœŸ** | `ç¨‹åºæ§åˆ¶` | `ç”±æ¡†æ¶ç®¡ç†` |

---

## 3. ğŸ”— æ•°æ®åº“è¡¨ä¸å®ä½“ç±»çš„æ˜ å°„å…³ç³»


### 3.1 ä¸€å¯¹ä¸€æ˜ å°„è§„åˆ™


**åŸºæœ¬æ˜ å°„åŸåˆ™**ï¼š

```
æ•°æ®åº“å‘½åé£æ ¼          Javaå‘½åé£æ ¼
user_name       â†’      userName
create_time     â†’      createTime  
is_active       â†’      active (booleanç±»å‹å»æ‰is)
```

**å®Œæ•´æ˜ å°„ç¤ºä¾‹**ï¼š
```java
-- æ•°æ®åº“è¡¨
CREATE TABLE user_info (
    id BIGINT PRIMARY KEY,
    user_name VARCHAR(50),
    email_address VARCHAR(100),
    birth_date DATE,
    is_active BOOLEAN,
    create_time TIMESTAMP
);

// Javaå®ä½“ç±»
@Entity
@Table(name = "user_info")
public class UserInfo {
    @Id
    private Long id;                    // id
    
    @Column(name = "user_name")
    private String userName;            // user_name
    
    @Column(name = "email_address")
    private String emailAddress;        // email_address
    
    @Column(name = "birth_date")
    private Date birthDate;             // birth_date
    
    @Column(name = "is_active")
    private Boolean active;             // is_active
    
    @Column(name = "create_time")
    private Date createTime;            // create_time
}
```

### 3.2 æ•°æ®ç±»å‹æ˜ å°„å¯¹ç…§è¡¨


| **MySQLç±»å‹** | **Javaç±»å‹** | **è¯´æ˜** |
|---------------|-------------|----------|
| `BIGINT` | `Long` | `ä¸»é”®å¸¸ç”¨ï¼Œå¤§æ•´æ•°` |
| `INT` | `Integer` | `æ™®é€šæ•´æ•°` |
| `VARCHAR` | `String` | `å­—ç¬¦ä¸²` |
| `TEXT` | `String` | `é•¿æ–‡æœ¬` |
| `DATE` | `Date/LocalDate` | `æ—¥æœŸ` |
| `DATETIME` | `Date/LocalDateTime` | `æ—¥æœŸæ—¶é—´` |
| `BOOLEAN` | `Boolean` | `å¸ƒå°”å€¼` |
| `DECIMAL` | `BigDecimal` | `ç²¾ç¡®å°æ•°` |
| `DOUBLE` | `Double` | `æµ®ç‚¹æ•°` |

### 3.3 æ˜ å°„æ³¨æ„äº‹é¡¹


**âš ï¸ å¸¸è§è¯¯åŒº**ï¼š

```java
// âŒ é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…
@Column(name = "price")
private int price;  // é‡‘é¢ç”¨intï¼Œç²¾åº¦ä¸¢å¤±ï¼

// âœ… æ­£ç¡®ï¼šä½¿ç”¨åˆé€‚ç±»å‹
@Column(name = "price")
private BigDecimal price;  // é‡‘é¢ç”¨BigDecimal

// âŒ é”™è¯¯ï¼šå‘½åä¸è§„èŒƒ
private String userName;  // ä½†æ•°æ®åº“å­—æ®µå« username

// âœ… æ­£ç¡®ï¼šæ˜ç¡®æŒ‡å®šæ˜ å°„
@Column(name = "username")
private String userName;
```

---

## 4. ğŸ”‘ ä¸»é”®è®¾è®¡ç­–ç•¥


### 4.1 ä»€ä¹ˆæ˜¯ä¸»é”®ï¼Ÿ


**é€šä¿—ç†è§£**ï¼š
ä¸»é”®å°±åƒæ˜¯æ¯ä¸ªäººçš„**èº«ä»½è¯å·ç **ï¼Œåœ¨æ•°æ®åº“è¡¨ä¸­å”¯ä¸€æ ‡è¯†æ¯ä¸€è¡Œæ•°æ®ã€‚

```
ç”¨æˆ·è¡¨ç¤ºä¾‹ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚ ç”¨æˆ·å    â”‚ é‚®ç®±     â”‚  â† IDå°±æ˜¯ä¸»é”®
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ å¼ ä¸‰      â”‚ a@x.com â”‚  
â”‚ 2  â”‚ æå››      â”‚ b@x.com â”‚  
â”‚ 3  â”‚ ç‹äº”      â”‚ c@x.com â”‚  
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ä¸»é”®ç”Ÿæˆç­–ç•¥


**ğŸ”¹ ç­–ç•¥1ï¼šè‡ªåŠ¨é€’å¢ï¼ˆAUTO_INCREMENTï¼‰**
```java
@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;  // æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆï¼š1, 2, 3, 4...
}
```
> ğŸ’¡ **é€‚ç”¨åœºæ™¯**ï¼šå•æ•°æ®åº“ç³»ç»Ÿï¼Œç®€å•ç›´æ¥

**ğŸ”¹ ç­–ç•¥2ï¼šUUIDç­–ç•¥**
```java
@Entity
public class User {
    @Id
    @GeneratedValue(generator = "uuid")
    @GenericGenerator(name = "uuid", strategy = "uuid2")
    private String id;  // ç”Ÿæˆï¼š550e8400-e29b-41d4-a716-446655440000
}
```
> ğŸ’¡ **é€‚ç”¨åœºæ™¯**ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå…¨å±€å”¯ä¸€

**ğŸ”¹ ç­–ç•¥3ï¼šæ‰‹åŠ¨åˆ†é…**
```java
@Entity
public class User {
    @Id
    private String id;  // æ‰‹åŠ¨è®¾ç½®ï¼šUSER_001, USER_002
    
    // æ„é€ å™¨ä¸­æ‰‹åŠ¨è®¾ç½®
    public User() {
        this.id = generateCustomId();
    }
}
```
> ğŸ’¡ **é€‚ç”¨åœºæ™¯**ï¼šæœ‰ç‰¹æ®Šä¸šåŠ¡è§„åˆ™

### 4.3 ä¸»é”®é€‰æ‹©å»ºè®®


| **åœºæ™¯** | **æ¨èç­–ç•¥** | **ç†ç”±** |
|----------|--------------|----------|
| **å°å‹é¡¹ç›®** | `è‡ªå¢ID` | `ç®€å•é«˜æ•ˆï¼Œæ€§èƒ½å¥½` |
| **åˆ†å¸ƒå¼ç³»ç»Ÿ** | `UUID` | `å…¨å±€å”¯ä¸€ï¼Œæ— å†²çª` |
| **æœ‰ä¸šåŠ¡å«ä¹‰** | `æ‰‹åŠ¨åˆ†é…` | `ç¬¦åˆä¸šåŠ¡è§„åˆ™` |
| **é«˜å¹¶å‘ç³»ç»Ÿ** | `é›ªèŠ±ç®—æ³•` | `é«˜æ€§èƒ½ï¼Œæœ‰åºé€’å¢` |

---

## 5. ğŸ“ å­—æ®µå±æ€§å¯¹åº”è§„èŒƒ


### 5.1 å±æ€§å®šä¹‰è§„èŒƒ


**æ ‡å‡†JavaBeanå±æ€§å®šä¹‰**ï¼š

```java
@Entity
@Table(name = "user")
public class User {
    // 1. ç§æœ‰å±æ€§
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "username")
    private String username;
    
    @Column(name = "email")
    private String email;
    
    // 2. æ— å‚æ„é€ å™¨
    public User() {}
    
    // 3. æœ‰å‚æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰
    public User(String username, String email) {
        this.username = username;
        this.email = email;
    }
    
    // 4. getter/setteræ–¹æ³•
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }
    
    // 5. toStringæ–¹æ³•ï¼ˆä¾¿äºè°ƒè¯•ï¼‰
    @Override
    public String toString() {
        return "User{id=" + id + ", username='" + username + "'}";
    }
}
```

### 5.2 å­—æ®µéªŒè¯ä¸çº¦æŸ


**å¸¸ç”¨å­—æ®µçº¦æŸ**ï¼š

```java
@Entity
public class User {
    @Id
    private Long id;
    
    // éç©ºçº¦æŸ
    @Column(nullable = false)
    private String username;
    
    // é•¿åº¦é™åˆ¶
    @Column(length = 100)
    private String email;
    
    // å”¯ä¸€çº¦æŸ
    @Column(unique = true)
    private String phoneNumber;
    
    // é»˜è®¤å€¼
    @Column(columnDefinition = "INT DEFAULT 0")
    private Integer status;
    
    // ç²¾åº¦æ§åˆ¶ï¼ˆé‡‘é¢ï¼‰
    @Column(precision = 10, scale = 2)
    private BigDecimal balance;
}
```

### 5.3 ç‰¹æ®Šå­—æ®µå¤„ç†


**ğŸ”¹ æ—¥æœŸæ—¶é—´å­—æ®µ**ï¼š
```java
// åˆ›å»ºæ—¶é—´ï¼ˆè‡ªåŠ¨è®¾ç½®ï¼‰
@Column(name = "create_time")
@CreationTimestamp  // Hibernateæ³¨è§£ï¼Œè‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´
private Date createTime;

// æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
@Column(name = "update_time")  
@UpdateTimestamp   // è‡ªåŠ¨æ›´æ–°æ—¶é—´
private Date updateTime;
```

**ğŸ”¹ æšä¸¾å­—æ®µ**ï¼š
```java
// ç”¨æˆ·çŠ¶æ€æšä¸¾
public enum UserStatus {
    ACTIVE, INACTIVE, BANNED
}

@Entity
public class User {
    @Enumerated(EnumType.STRING)  // å­˜å‚¨æšä¸¾åç§°
    private UserStatus status;
}
```

**ğŸ”¹ JSONå­—æ®µ**ï¼š
```java
// å­˜å‚¨JSONæ ¼å¼æ•°æ®
@Column(columnDefinition = "JSON")
private String preferences;  // å­˜å‚¨ç”¨æˆ·åå¥½è®¾ç½®
```

---

## 6. ğŸ“Œ æ³¨è§£é…ç½®è¯¦è§£


### 6.1 åŸºç¡€æ³¨è§£


**ğŸ·ï¸ @Entity - å®ä½“ç±»æ ‡è®°**
```java
@Entity  // æ ‡è®°è¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»
@Table(name = "user_info")  // æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“è¡¨å
public class User {
    // å®ä½“ç±»å†…å®¹
}
```

**ğŸ·ï¸ @Id - ä¸»é”®æ ‡è®°**
```java
@Entity
public class User {
    @Id  // æ ‡è®°ä¸»é”®å­—æ®µ
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // ä¸»é”®ç”Ÿæˆç­–ç•¥
    private Long id;
}
```

**ğŸ·ï¸ @Column - åˆ—æ˜ å°„**
```java
@Column(
    name = "user_name",     // æ•°æ®åº“åˆ—å
    nullable = false,       // æ˜¯å¦å…è®¸ä¸ºç©º
    length = 50,           // å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶
    unique = true          // æ˜¯å¦å”¯ä¸€
)
private String username;
```

### 6.2 é«˜çº§æ³¨è§£


**ğŸ·ï¸ @Temporal - æ—¥æœŸæ—¶é—´æ ¼å¼**
```java
@Temporal(TemporalType.DATE)        // åªå­˜å‚¨æ—¥æœŸ
private Date birthDate;

@Temporal(TemporalType.TIMESTAMP)   // å­˜å‚¨å®Œæ•´æ—¶é—´æˆ³  
private Date createTime;
```

**ğŸ·ï¸ @Lob - å¤§å¯¹è±¡å­˜å‚¨**
```java
@Lob  // å¤§æ–‡æœ¬å¯¹è±¡
private String description;  // å¯¹åº”æ•°æ®åº“çš„TEXTç±»å‹

@Lob  // äºŒè¿›åˆ¶å¤§å¯¹è±¡
private byte[] avatar;       // å¯¹åº”æ•°æ®åº“çš„BLOBç±»å‹
```

**ğŸ·ï¸ @Transient - å¿½ç•¥å­—æ®µ**
```java
@Transient  // ä¸æ˜ å°„åˆ°æ•°æ®åº“
private String confirmPassword;  // ç¡®è®¤å¯†ç ï¼Œåªåœ¨è¡¨å•ä¸­ä½¿ç”¨
```

### 6.3 æ³¨è§£ç»„åˆä½¿ç”¨


**å®Œæ•´æ³¨è§£ç¤ºä¾‹**ï¼š
```java
@Entity
@Table(name = "user", 
       indexes = {@Index(columnList = "email")})  // åˆ›å»ºç´¢å¼•
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;
    
    @Column(name = "username", nullable = false, length = 50, unique = true)
    private String username;
    
    @Column(name = "email", nullable = false, length = 100)
    private String email;
    
    @Column(name = "password", nullable = false)
    private String password;
    
    @Enumerated(EnumType.STRING)
    @Column(name = "status")
    private UserStatus status;
    
    @CreationTimestamp
    @Column(name = "create_time")
    private Date createTime;
    
    @UpdateTimestamp
    @Column(name = "update_time") 
    private Date updateTime;
}
```

---

## 7. ğŸ”— å…³è”å…³ç³»æ˜ å°„


### 7.1 ä¸€å¯¹ä¸€å…³ç³»ï¼ˆ@OneToOneï¼‰


**åœºæ™¯ç¤ºä¾‹**ï¼šä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªç”¨æˆ·è¯¦æƒ…

```java
// ç”¨æˆ·åŸºç¡€ä¿¡æ¯
@Entity
@Table(name = "user")
public class User {
    @Id
    private Long id;
    private String username;
    
    // ä¸€å¯¹ä¸€å…³è”ç”¨æˆ·è¯¦æƒ…
    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "user_detail_id")  // å¤–é”®åˆ—
    private UserDetail userDetail;
}

// ç”¨æˆ·è¯¦ç»†ä¿¡æ¯  
@Entity
@Table(name = "user_detail")
public class UserDetail {
    @Id
    private Long id;
    private String realName;
    private String phone;
    private String address;
    
    // åŒå‘å…³è”ï¼ˆå¯é€‰ï¼‰
    @OneToOne(mappedBy = "userDetail")
    private User user;
}
```

### 7.2 ä¸€å¯¹å¤šå…³ç³»ï¼ˆ@OneToManyï¼‰


**åœºæ™¯ç¤ºä¾‹**ï¼šä¸€ä¸ªéƒ¨é—¨æœ‰å¤šä¸ªå‘˜å·¥

```java
// éƒ¨é—¨è¡¨
@Entity
@Table(name = "department")  
public class Department {
    @Id
    private Long id;
    private String name;
    
    // ä¸€å¯¹å¤šï¼šä¸€ä¸ªéƒ¨é—¨å¤šä¸ªå‘˜å·¥
    @OneToMany(mappedBy = "department", cascade = CascadeType.ALL)
    private List<Employee> employees = new ArrayList<>();
    
    // ä¾¿åˆ©æ–¹æ³•
    public void addEmployee(Employee employee) {
        employees.add(employee);
        employee.setDepartment(this);
    }
}

// å‘˜å·¥è¡¨
@Entity
@Table(name = "employee")
public class Employee {
    @Id
    private Long id;
    private String name;
    
    // å¤šå¯¹ä¸€ï¼šå¤šä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨
    @ManyToOne
    @JoinColumn(name = "department_id")  // å¤–é”®
    private Department department;
}
```

### 7.3 å¤šå¯¹å¤šå…³ç³»ï¼ˆ@ManyToManyï¼‰


**åœºæ™¯ç¤ºä¾‹**ï¼šå­¦ç”Ÿé€‰è¯¾ï¼Œå¤šä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ç¨‹

```java
// å­¦ç”Ÿè¡¨
@Entity
@Table(name = "student")
public class Student {
    @Id
    private Long id;
    private String name;
    
    // å¤šå¯¹å¤šå…³ç³»
    @ManyToMany
    @JoinTable(
        name = "student_course",           // ä¸­é—´è¡¨å
        joinColumns = @JoinColumn(name = "student_id"),        // å½“å‰è¡¨å¤–é”®
        inverseJoinColumns = @JoinColumn(name = "course_id")   // å…³è”è¡¨å¤–é”®
    )
    private List<Course> courses = new ArrayList<>();
}

// è¯¾ç¨‹è¡¨
@Entity  
@Table(name = "course")
public class Course {
    @Id
    private Long id;
    private String name;
    private String teacher;
    
    // åå‘å…³è”
    @ManyToMany(mappedBy = "courses")
    private List<Student> students = new ArrayList<>();
}
```

### 7.4 å…³è”å…³ç³»æ€»ç»“


| **å…³ç³»ç±»å‹** | **æ³¨è§£** | **ä½¿ç”¨åœºæ™¯** | **å¤–é”®ä½ç½®** |
|--------------|----------|-------------|-------------|
| **ä¸€å¯¹ä¸€** | `@OneToOne` | `ç”¨æˆ·-è¯¦æƒ…` | `ä»»æ„ä¸€æ–¹` |
| **ä¸€å¯¹å¤š** | `@OneToMany` | `éƒ¨é—¨-å‘˜å·¥` | `"å¤š"çš„ä¸€æ–¹` |
| **å¤šå¯¹ä¸€** | `@ManyToOne` | `å‘˜å·¥-éƒ¨é—¨` | `"å¤š"çš„ä¸€æ–¹` |
| **å¤šå¯¹å¤š** | `@ManyToMany` | `å­¦ç”Ÿ-è¯¾ç¨‹` | `ä¸­é—´è¡¨` |

---

## 8. ğŸ› ï¸ å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º


### 8.1 å®Œæ•´ç”¨æˆ·ç®¡ç†ç³»ç»Ÿå®ä½“è®¾è®¡


**éœ€æ±‚åˆ†æ**ï¼šè®¾è®¡ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«ç”¨æˆ·åŸºç¡€ä¿¡æ¯ã€è§’è‰²æƒé™ã€æ“ä½œæ—¥å¿—

**æ•°æ®åº“è®¾è®¡**ï¼š
```
æ•°æ®åº“è¡¨è®¾è®¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    user     â”‚    â”‚    role     â”‚    â”‚ user_role   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚    â”‚ id (PK)     â”‚    â”‚ user_id (FK)â”‚
â”‚ username    â”‚    â”‚ name        â”‚    â”‚ role_id (FK)â”‚
â”‚ email       â”‚    â”‚ description â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ password    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           
â”‚ create_time â”‚            
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            
```

**å®ä½“ç±»å®ç°**ï¼š

```java
// ç”¨æˆ·å®ä½“
@Entity
@Table(name = "user")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, unique = true, length = 50)
    private String username;
    
    @Column(nullable = false, unique = true, length = 100) 
    private String email;
    
    @Column(nullable = false)
    private String password;
    
    @Enumerated(EnumType.STRING)
    private UserStatus status = UserStatus.ACTIVE;
    
    @CreationTimestamp
    private Date createTime;
    
    @UpdateTimestamp
    private Date updateTime;
    
    // å¤šå¯¹å¤šå…³è”è§’è‰²
    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(
        name = "user_role",
        joinColumns = @JoinColumn(name = "user_id"),
        inverseJoinColumns = @JoinColumn(name = "role_id")
    )
    private Set<Role> roles = new HashSet<>();
    
    // æ„é€ å™¨ã€getter/setterçœç•¥...
    
    // ä¸šåŠ¡æ–¹æ³•
    public boolean hasRole(String roleName) {
        return roles.stream()
                   .anyMatch(role -> role.getName().equals(roleName));
    }
}

// è§’è‰²å®ä½“
@Entity
@Table(name = "role")
public class Role {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, unique = true, length = 50)
    private String name;
    
    @Column(length = 200)
    private String description;
    
    @ManyToMany(mappedBy = "roles")
    private Set<User> users = new HashSet<>();
    
    // æ„é€ å™¨ã€getter/setterçœç•¥...
}

// ç”¨æˆ·çŠ¶æ€æšä¸¾
public enum UserStatus {
    ACTIVE("æ¿€æ´»"),
    INACTIVE("æœªæ¿€æ´»"), 
    BANNED("å·²å°ç¦");
    
    private String description;
    
    UserStatus(String description) {
        this.description = description;
    }
    
    public String getDescription() {
        return description;
    }
}
```

### 8.2 ä½¿ç”¨ç¤ºä¾‹


**åˆ›å»ºç”¨æˆ·æ•°æ®**ï¼š
```java
// åœ¨Serviceå±‚ä½¿ç”¨
@Service
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private RoleRepository roleRepository;
    
    public User createUser(String username, String email, String password) {
        // 1. åˆ›å»ºç”¨æˆ·å¯¹è±¡
        User user = new User();
        user.setUsername(username);
        user.setEmail(email);
        user.setPassword(encryptPassword(password));
        
        // 2. åˆ†é…é»˜è®¤è§’è‰²
        Role userRole = roleRepository.findByName("USER");
        user.getRoles().add(userRole);
        
        // 3. ä¿å­˜åˆ°æ•°æ®åº“
        return userRepository.save(user);
    }
    
    public boolean checkUserPermission(Long userId, String roleName) {
        User user = userRepository.findById(userId)
                                 .orElseThrow(() -> new UserNotFoundException());
        return user.hasRole(roleName);
    }
}
```

### 8.3 æœ€ä½³å®è·µæ€»ç»“


**âœ… è‰¯å¥½å®è·µ**ï¼š

1. **å±æ€§ç§æœ‰åŒ–**ï¼šæ‰€æœ‰å­—æ®µä½¿ç”¨privateä¿®é¥°
2. **æä¾›è®¿é—®å™¨**ï¼šæ ‡å‡†çš„getter/setteræ–¹æ³•
3. **é‡å†™toString**ï¼šä¾¿äºè°ƒè¯•å’Œæ—¥å¿—è®°å½•
4. **åˆç†ä½¿ç”¨æ³¨è§£**ï¼šæ˜ç¡®æŒ‡å®šæ˜ å°„å…³ç³»
5. **å…³è”å…³ç³»ç®¡ç†**ï¼šæä¾›ä¾¿åˆ©æ–¹æ³•ç»´æŠ¤å…³ç³»
6. **æšä¸¾ç±»å‹**ï¼šä½¿ç”¨æšä¸¾è¡¨ç¤ºæœ‰é™çŠ¶æ€å€¼

**âŒ å¸¸è§é”™è¯¯**ï¼š

1. **å±æ€§å…¬å¼€**ï¼šç›´æ¥ä½¿ç”¨publicä¿®é¥°å±æ€§
2. **ç¼ºå°‘æ„é€ å™¨**ï¼šæ²¡æœ‰æä¾›æ— å‚æ„é€ å™¨
3. **æ³¨è§£æ»¥ç”¨**ï¼šä¸å¿…è¦çš„æ³¨è§£é…ç½®
4. **å…³ç³»æ··ä¹±**ï¼šåŒå‘å…³è”æœªæ­£ç¡®ç»´æŠ¤
5. **ç±»å‹é”™è¯¯**ï¼šæ•°æ®ç±»å‹ä¸æ•°æ®åº“ä¸åŒ¹é…

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ JavaBeanæœ¬è´¨ï¼šæ ‡å‡†åŒ–çš„æ•°æ®å®¹å™¨ï¼Œéµå¾ªå°è£…ã€è®¿é—®å™¨ã€æ„é€ å™¨ä¸‰å¤§è§„èŒƒ
ğŸ”¸ Entityä½œç”¨ï¼šæ•°æ®åº“è¡¨åœ¨Javaä¸­çš„å¯¹è±¡æ˜ å°„ï¼Œæ‰¿è½½æ•°æ®ä¼ è¾“å’Œä¸šåŠ¡é€»è¾‘
ğŸ”¸ æ˜ å°„å…³ç³»ï¼šæ•°æ®åº“è¡¨ç»“æ„ä¸Javaç±»å±æ€§çš„ä¸€ä¸€å¯¹åº”å…³ç³»
ğŸ”¸ ä¸»é”®ç­–ç•¥ï¼šè‡ªå¢IDã€UUIDã€æ‰‹åŠ¨åˆ†é…ç­‰ä¸åŒåœºæ™¯çš„é€‰æ‹©
ğŸ”¸ æ³¨è§£é…ç½®ï¼š@Entityã€@Tableã€@Columnç­‰JPAæ³¨è§£çš„æ­£ç¡®ä½¿ç”¨
ğŸ”¸ å…³è”å…³ç³»ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šå…³ç³»çš„æ˜ å°„å’Œç»´æŠ¤
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦JavaBeanè§„èŒƒï¼Ÿ**
```
ç»Ÿä¸€æ ‡å‡†ï¼š
â€¢ æ¡†æ¶èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†
â€¢ å›¢é˜Ÿåä½œæœ‰ç»Ÿä¸€çš„ç¼–ç è§„èŒƒ  
â€¢ å·¥å…·èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆä»£ç 

æ•°æ®å®‰å…¨ï¼š
â€¢ ç§æœ‰å±æ€§é˜²æ­¢ç›´æ¥è®¿é—®
â€¢ é€šè¿‡æ–¹æ³•æ§åˆ¶æ•°æ®è®¿é—®
â€¢ ä¾¿äºæ·»åŠ éªŒè¯é€»è¾‘
```

**ğŸ”¹ å®ä½“ç±»è®¾è®¡åŸåˆ™**ï¼š
```
å•ä¸€èŒè´£ï¼šä¸€ä¸ªå®ä½“å¯¹åº”ä¸€å¼ è¡¨
å±æ€§å¯¹åº”ï¼šæ¯ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ªå­—æ®µ
ç±»å‹åŒ¹é…ï¼šJavaç±»å‹ä¸æ•°æ®åº“ç±»å‹è¦å¯¹åº”
å…³ç³»æ¸…æ™°ï¼šæ­£ç¡®è¡¨è¾¾è¡¨ä¹‹é—´çš„å…³è”å…³ç³»
```

**ğŸ”¹ æ³¨è§£ä½¿ç”¨æŠ€å·§**ï¼š
```
å¿…è¦æ€§åŸåˆ™ï¼šåªåœ¨éœ€è¦æ—¶ä½¿ç”¨æ³¨è§£
æ˜ç¡®æ€§åŸåˆ™ï¼šæ˜¾å¼æŒ‡å®šæ˜ å°„å…³ç³»
ä¸€è‡´æ€§åŸåˆ™ï¼šå›¢é˜Ÿå†…ä¿æŒæ³¨è§£ä½¿ç”¨é£æ ¼ç»Ÿä¸€
æ€§èƒ½è€ƒè™‘ï¼šåˆç†é…ç½®æ‡’åŠ è½½å’Œå…³è”ç­–ç•¥
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å¼€å‘æ•ˆç‡æå‡**ï¼š
- **ä»£ç æ ‡å‡†åŒ–**ï¼šå‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œæé«˜ä»£ç è´¨é‡
- **æ¡†æ¶é›†æˆ**ï¼šä¸Springã€Hibernateç­‰æ¡†æ¶æ— ç¼é›†æˆ
- **å·¥å…·æ”¯æŒ**ï¼šIDEèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†ä»£ç 

**ğŸ¯ ç»´æŠ¤æ€§å¢å¼º**ï¼š
- **ç»“æ„æ¸…æ™°**ï¼šæ•°æ®ç»“æ„ä¸€ç›®äº†ç„¶
- **ä¿®æ”¹ä¾¿åˆ©**ï¼šå­—æ®µå˜æ›´åªéœ€ä¿®æ”¹å®ä½“ç±»
- **æ‰©å±•æ€§å¥½**ï¼šæ·»åŠ æ–°å±æ€§æˆ–å…³ç³»ç›¸å¯¹ç®€å•

**ğŸ¯ å›¢é˜Ÿåä½œä¼˜åŒ–**ï¼š
- **è§„èŒƒç»Ÿä¸€**ï¼šå›¢é˜Ÿæˆå‘˜éƒ½æŒ‰ç›¸åŒæ ‡å‡†ç¼–å†™
- **æ–‡æ¡£åŒ–**ï¼šå®ä½“ç±»å°±æ˜¯æœ€å¥½çš„æ•°æ®ç»“æ„æ–‡æ¡£
- **æµ‹è¯•å‹å¥½**ï¼šä¾¿äºç¼–å†™å•å…ƒæµ‹è¯•

### 9.4 å­¦ä¹ è·¯çº¿å»ºè®®


**ğŸ“š åˆå­¦é˜¶æ®µ**ï¼š
1. æŒæ¡JavaBeanåŸºæœ¬è§„èŒƒ
2. ç†è§£å®ä½“ç±»ä¸æ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»
3. ç†Ÿç»ƒä½¿ç”¨åŸºç¡€æ³¨è§£

**ğŸ“š è¿›é˜¶é˜¶æ®µ**ï¼š
1. æŒæ¡å¤æ‚å…³è”å…³ç³»æ˜ å°„
2. å­¦ä¹ æ€§èƒ½ä¼˜åŒ–æŠ€å·§
3. äº†è§£ä¸åŒJPAå®ç°çš„å·®å¼‚

**ğŸ“š é«˜çº§é˜¶æ®µ**ï¼š
1. è®¾è®¡å¤æ‚çš„é¢†åŸŸæ¨¡å‹
2. å¤„ç†å¤§æ•°æ®é‡çš„å®ä½“æ˜ å°„
3. è‡ªå®šä¹‰æ³¨è§£å’Œæ‰©å±•åŠŸèƒ½

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- JavaBeanè§„èŒƒè¦éµå¾ªï¼Œç§æœ‰å±æ€§è®¿é—®å™¨
- å®ä½“æ˜ å°„æ•°æ®åº“ï¼Œä¸€è¡¨ä¸€ç±»å¯¹åº”æ¸…
- ä¸»é”®ç­–ç•¥é€‰æ‹©å¥½ï¼Œå…³è”å…³ç³»è¦ç†æ¸…
- æ³¨è§£ä½¿ç”¨è¦æ°å½“ï¼Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»æ˜