---
title: 3ã€æ•°æ®ä¼ é€’å¯¹è±¡è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [æ•°æ®ä¼ é€’å¯¹è±¡æ¦‚è¿°](#1-æ•°æ®ä¼ é€’å¯¹è±¡æ¦‚è¿°)
2. [VOè§†å›¾å¯¹è±¡è¯¦è§£](#2-VOè§†å›¾å¯¹è±¡è¯¦è§£)
3. [DTOæ•°æ®ä¼ è¾“å¯¹è±¡è¯¦è§£](#3-DTOæ•°æ®ä¼ è¾“å¯¹è±¡è¯¦è§£)
4. [BOä¸šåŠ¡å¯¹è±¡è¯¦è§£](#4-BOä¸šåŠ¡å¯¹è±¡è¯¦è§£)
5. [POæŒä¹…åŒ–å¯¹è±¡è¯¦è§£](#5-POæŒä¹…åŒ–å¯¹è±¡è¯¦è§£)
6. [å¯¹è±¡è½¬æ¢ä¸æ˜ å°„](#6-å¯¹è±¡è½¬æ¢ä¸æ˜ å°„)
7. [å±‚é—´æ•°æ®ä¼ é€’å®è·µ](#7-å±‚é—´æ•°æ®ä¼ é€’å®è·µ)
8. [æœ€ä½³å®è·µä¸è®¾è®¡åŸåˆ™](#8-æœ€ä½³å®è·µä¸è®¾è®¡åŸåˆ™)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ•°æ®ä¼ é€’å¯¹è±¡æ¦‚è¿°


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šå¯¹è±¡


**ç”Ÿæ´»ä¸­çš„ç±»æ¯”**ï¼š
æƒ³è±¡ä½ åœ¨ä¸€å®¶é¤å…å·¥ä½œï¼Œä»å®¢äººç‚¹é¤åˆ°åå¨å‡ºèœï¼Œä¿¡æ¯åœ¨ä¸åŒäººæ‰‹ä¸­ä¼ é€’æ—¶å½¢å¼æ˜¯ä¸ä¸€æ ·çš„ï¼š
- **èœå•**ï¼ˆå®¢äººçœ‹åˆ°çš„ï¼‰ï¼šå›¾ç‰‡ç²¾ç¾ã€ä»·æ ¼æ¸…æ™°
- **è®¢å•**ï¼ˆæœåŠ¡å‘˜è®°å½•çš„ï¼‰ï¼šç®€æ´æ˜äº†ã€æ˜“äºä¼ é€’  
- **å·¥ä½œå•**ï¼ˆåå¨ä½¿ç”¨çš„ï¼‰ï¼šè¯¦ç»†é…èœã€åˆ¶ä½œæµç¨‹
- **åº“å­˜è®°å½•**ï¼ˆä»“åº“ç®¡ç†çš„ï¼‰ï¼šåŸææ–™ã€æ•°é‡ã€ä¾›åº”å•†

JavaWebä¸­çš„æ•°æ®å¯¹è±¡ä¹Ÿæ˜¯è¿™ä¸ªé“ç† - ä¸åŒçš„åœºæ™¯éœ€è¦ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚

### 1.2 å››ç§å¯¹è±¡çš„æœ¬è´¨åŒºåˆ«


```
æ•°æ®åœ¨ç³»ç»Ÿä¸­çš„æµè½¬è¿‡ç¨‹ï¼š

æ•°æ®åº“ â†â†’ PO(æŒä¹…åŒ–å¯¹è±¡) â†â†’ BO(ä¸šåŠ¡å¯¹è±¡) â†â†’ DTO(ä¼ è¾“å¯¹è±¡) â†â†’ VO(è§†å›¾å¯¹è±¡) â†â†’ å‰ç«¯é¡µé¢
  â†‘          â†‘                â†‘               â†‘              â†‘             â†‘
å­˜å‚¨å±‚      æ•°æ®è®¿é—®å±‚        ä¸šåŠ¡é€»è¾‘å±‚      æ§åˆ¶å™¨å±‚        è¡¨ç°å±‚        ç”¨æˆ·ç•Œé¢
```

**ğŸ” å½¢è±¡ç†è§£**ï¼š
- **PO**ï¼šæ•°æ®åº“çš„"ç¿»è¯‘å®˜" - æŠŠæ•°æ®åº“è®°å½•å˜æˆJavaå¯¹è±¡
- **BO**ï¼šä¸šåŠ¡çš„"å¤„ç†å‘˜" - åŒ…å«ä¸šåŠ¡é€»è¾‘å’Œä¸šåŠ¡æ•°æ®
- **DTO**ï¼šä¿¡æ¯çš„"å¿«é€’å‘˜" - åœ¨ä¸åŒå±‚ä¹‹é—´å®‰å…¨ä¼ é€’æ•°æ®
- **VO**ï¼šç•Œé¢çš„"åŒ–å¦†å¸ˆ" - æŠŠæ•°æ®å˜æˆç”¨æˆ·çœ‹å¾—æ‡‚çš„æ ¼å¼

### 1.3 ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä¸€ä¸ªå¯¹è±¡è§£å†³æ‰€æœ‰é—®é¢˜


**âŒ å¦‚æœåªç”¨ä¸€ä¸ªUserå¯¹è±¡ä¼šæ€æ ·ï¼Ÿ**

```
é—®é¢˜1ï¼šå®‰å…¨é£é™©
ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œå‰ç«¯ä¼ å…¥Userå¯¹è±¡åŒ…å«å¯†ç 
å¦‚æœç›´æ¥è¿”å›ç»™å‰ç«¯ï¼Œå¯†ç å°±æ³„éœ²äº†ï¼

é—®é¢˜2ï¼šæ€§èƒ½æµªè´¹
æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨æ—¶ï¼Œä¸éœ€è¦è¯¦ç»†ä¿¡æ¯
ä½†Userå¯¹è±¡åŒ…å«æ‰€æœ‰å­—æ®µï¼Œæµªè´¹ç½‘ç»œå¸¦å®½

é—®é¢˜3ï¼šè€¦åˆä¸¥é‡
æ•°æ®åº“å­—æ®µå˜åŒ–æ—¶ï¼Œå‰ç«¯æ˜¾ç¤ºä¹Ÿè¦è·Ÿç€å˜
ç³»ç»Ÿå„å±‚ç´§å¯†è€¦åˆï¼Œéš¾ä»¥ç»´æŠ¤

é—®é¢˜4ï¼šèŒè´£æ··ä¹±
ä¸€ä¸ªå¯¹è±¡æ—¢è¦å¤„ç†æ•°æ®åº“æ˜ å°„
åˆè¦å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜è¦è€ƒè™‘å‰ç«¯æ˜¾ç¤º
è¿åå•ä¸€èŒè´£åŸåˆ™
```

**âœ… ä½¿ç”¨å¤šç§å¯¹è±¡çš„å¥½å¤„**ï¼š
- **å®‰å…¨æ€§**ï¼šæ•æ„Ÿæ•°æ®ä¸ä¼šæ„å¤–æš´éœ²
- **æ€§èƒ½**ï¼šåªä¼ é€’å¿…è¦çš„æ•°æ®
- **ç»´æŠ¤æ€§**ï¼šå„å±‚ç‹¬ç«‹å˜åŒ–ï¼Œäº’ä¸å½±å“
- **æ¸…æ™°æ€§**ï¼šæ¯ç§å¯¹è±¡èŒè´£æ˜ç¡®

---

## 2. ğŸ‘ï¸ VOè§†å›¾å¯¹è±¡è¯¦è§£


### 2.1 VOçš„æ ¸å¿ƒæ¦‚å¿µ


**ä»€ä¹ˆæ˜¯VOï¼Ÿ**
VOï¼ˆView Objectï¼‰å°±æ˜¯"ç»™ç”¨æˆ·çœ‹çš„æ•°æ®"ï¼Œä¸“é—¨ä¸ºå‰ç«¯æ˜¾ç¤ºè€Œè®¾è®¡çš„å¯¹è±¡ã€‚

**ğŸ­ VOçš„ç‰¹ç‚¹**ï¼š
- **é¢å‘å±•ç¤º**ï¼šåªåŒ…å«å‰ç«¯éœ€è¦æ˜¾ç¤ºçš„å­—æ®µ
- **æ ¼å¼å‹å¥½**ï¼šæ•°æ®æ ¼å¼é€‚åˆå‰ç«¯ç›´æ¥ä½¿ç”¨
- **å®‰å…¨è¿‡æ»¤**ï¼šä¸åŒ…å«æ•æ„Ÿä¿¡æ¯
- **æ˜“äºç†è§£**ï¼šå­—æ®µå‘½åæ¸…æ™°ï¼Œç¬¦åˆç•Œé¢é€»è¾‘

### 2.2 VOçš„è®¾è®¡åŸåˆ™


**ğŸ“‹ è®¾è®¡è¦ç‚¹**ï¼š

```java
// ç”¨æˆ·åˆ—è¡¨å±•ç¤ºVO - ç²¾ç®€ä¿¡æ¯
public class UserListVO {
    private Long id;           // ç”¨æˆ·ID
    private String username;   // ç”¨æˆ·å
    private String nickname;   // æ˜µç§°
    private String avatar;     // å¤´åƒURL
    private String statusText; // çŠ¶æ€æ–‡å­—ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
    private String joinTime;   // æ³¨å†Œæ—¶é—´ï¼ˆæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ï¼‰
    
    // æ³¨æ„ï¼šæ²¡æœ‰å¯†ç ã€æ‰‹æœºå·ç­‰æ•æ„Ÿä¿¡æ¯
    // æ³¨æ„ï¼šæ—¶é—´å·²ç»æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå‰ç«¯ç›´æ¥æ˜¾ç¤º
}
```

**ğŸ” VOè®¾è®¡åŸåˆ™è§£æ**ï¼š

```
1. åªåŒ…å«æ˜¾ç¤ºå­—æ®µ
   âŒ é”™è¯¯ï¼šæŠŠæ•°æ®åº“æ‰€æœ‰å­—æ®µéƒ½æ”¾è¿›å»
   âœ… æ­£ç¡®ï¼šåªæ”¾å‰ç«¯éœ€è¦æ˜¾ç¤ºçš„å­—æ®µ

2. æ•°æ®æ ¼å¼åŒ–
   âŒ é”™è¯¯ï¼šcreateTime è¿”å› Date å¯¹è±¡
   âœ… æ­£ç¡®ï¼šcreateTime è¿”å› "2024-01-15 14:30" å­—ç¬¦ä¸²

3. ä¸šåŠ¡é€»è¾‘å¤„ç†
   âŒ é”™è¯¯ï¼šstatus è¿”å›æ•°å­— 1
   âœ… æ­£ç¡®ï¼šstatusText è¿”å› "æ­£å¸¸" æˆ– "ç¦ç”¨"

4. å®‰å…¨è€ƒè™‘
   âŒ é”™è¯¯ï¼šåŒ…å«passwordã€phoneç­‰æ•æ„Ÿå­—æ®µ
   âœ… æ­£ç¡®ï¼šåªåŒ…å«å¯ä»¥å…¬å¼€æ˜¾ç¤ºçš„ä¿¡æ¯
```

### 2.3 ä¸åŒåœºæ™¯çš„VOè®¾è®¡


**ğŸ“± ç”¨æˆ·è¯¦æƒ…é¡µVO**ï¼š
```java
public class UserDetailVO {
    private Long id;
    private String username;
    private String nickname;
    private String email;      // è¯¦æƒ…é¡µå¯ä»¥æ˜¾ç¤ºé‚®ç®±
    private String avatar;
    private String bio;        // ä¸ªäººç®€ä»‹
    private Integer postCount; // å‘å¸–æ•°é‡
    private Integer fanCount;  // ç²‰ä¸æ•°é‡
    private String joinDate;   // åŠ å…¥æ—¥æœŸ
    private List<String> tags; // ç”¨æˆ·æ ‡ç­¾
    
    // æ¯”åˆ—è¡¨VOåŒ…å«æ›´å¤šä¿¡æ¯ï¼Œä½†ä»ç„¶æ˜¯å®‰å…¨çš„
}
```

**ğŸ“Š ç»Ÿè®¡æŠ¥è¡¨VO**ï¼š
```java
public class UserStatisticsVO {
    private String period;        // ç»Ÿè®¡å‘¨æœŸ
    private Integer totalUsers;   // æ€»ç”¨æˆ·æ•°
    private Integer newUsers;     // æ–°å¢ç”¨æˆ·
    private Integer activeUsers;  // æ´»è·ƒç”¨æˆ·
    private String growthRate;    // å¢é•¿ç‡ï¼ˆå·²æ ¼å¼åŒ–ï¼‰
    
    // ä¸“é—¨ä¸ºæŠ¥è¡¨æ˜¾ç¤ºè®¾è®¡çš„æ•°æ®ç»“æ„
}
```

### 2.4 VOçš„å®é™…åº”ç”¨


**ğŸ¯ å‰ç«¯æ¥å£è¿”å›ç¤ºä¾‹**ï¼š
```java
@RestController
public class UserController {
    
    // ç”¨æˆ·åˆ—è¡¨æ¥å£
    @GetMapping("/users")
    public Result<List<UserListVO>> getUserList() {
        // 1. æŸ¥è¯¢ç”¨æˆ·æ•°æ®
        List<User> users = userService.getAllUsers();
        
        // 2. è½¬æ¢ä¸ºVOå¯¹è±¡
        List<UserListVO> voList = users.stream()
            .map(this::convertToListVO)
            .collect(Collectors.toList());
            
        return Result.success(voList);
    }
    
    // è½¬æ¢æ–¹æ³•
    private UserListVO convertToListVO(User user) {
        UserListVO vo = new UserListVO();
        vo.setId(user.getId());
        vo.setUsername(user.getUsername());
        vo.setNickname(user.getNickname());
        vo.setAvatar(user.getAvatar());
        
        // çŠ¶æ€è½¬æ¢
        vo.setStatusText(user.getStatus() == 1 ? "æ­£å¸¸" : "ç¦ç”¨");
        
        // æ—¶é—´æ ¼å¼åŒ–
        vo.setJoinTime(DateUtils.format(user.getCreateTime(), "yyyy-MM-dd"));
        
        return vo;
    }
}
```

**ğŸ’¡ VOä½¿ç”¨æŠ€å·§**ï¼š
- **å‘½åè§„èŒƒ**ï¼šä»¥åœºæ™¯+VOç»“å°¾ï¼Œå¦‚ `UserListVO`ã€`UserDetailVO`
- **å­—æ®µé€‰æ‹©**ï¼šå®å¯å°‘ä¸è¦å¤šï¼ŒæŒ‰éœ€æ·»åŠ å­—æ®µ
- **æ ¼å¼å¤„ç†**ï¼šåœ¨è½¬æ¢æ—¶å°±æ ¼å¼åŒ–å¥½æ•°æ®
- **æ‰©å±•æ€§**ï¼šä¸ºå°†æ¥å¯èƒ½çš„éœ€æ±‚é¢„ç•™ä¸€äº›å­—æ®µ

---

## 3. ğŸšš DTOæ•°æ®ä¼ è¾“å¯¹è±¡è¯¦è§£


### 3.1 DTOçš„æ ¸å¿ƒä½œç”¨


**ä»€ä¹ˆæ˜¯DTOï¼Ÿ**
DTOï¼ˆData Transfer Objectï¼‰å°±æ˜¯"æ•°æ®å¿«é€’å‘˜"ï¼Œä¸“é—¨è´Ÿè´£åœ¨ä¸åŒç³»ç»Ÿå±‚ä¹‹é—´å®‰å…¨ã€é«˜æ•ˆåœ°ä¼ è¾“æ•°æ®ã€‚

**ğŸ“¦ å¿«é€’å‘˜çš„èŒè´£**ï¼š
- **æ‰“åŒ…æ•°æ®**ï¼šæŠŠéœ€è¦ä¼ è¾“çš„æ•°æ®æ•´ç†æ‰“åŒ…
- **å®‰å…¨è¿è¾“**ï¼šç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹
- **æ ¼å¼é€‚é…**ï¼šè®©æ¥æ”¶æ–¹èƒ½å¤Ÿæ­£ç¡®ç†è§£æ•°æ®
- **å‡å°‘å¾€è¿”**ï¼šä¸€æ¬¡ä¼ è¾“å°½å¯èƒ½å¤šçš„ç›¸å…³æ•°æ®

### 3.2 DTOçš„è®¾è®¡ç‰¹ç‚¹


**ğŸ¯ DTOè®¾è®¡è¦ç‚¹**ï¼š

```java
// ç”¨æˆ·æ³¨å†Œè¯·æ±‚DTO
public class UserRegisterDTO {
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Length(min = 6, max = 20, message = "å¯†ç é•¿åº¦6-20ä½")
    private String password;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    private String nickname;
    
    // DTOåŒ…å«éªŒè¯é€»è¾‘ï¼Œç¡®ä¿æ•°æ®çš„æ­£ç¡®æ€§
}
```

**ğŸ” DTOç‰¹ç‚¹åˆ†æ**ï¼š

```
ä¼ è¾“ä¼˜åŒ–ï¼š
â€¢ åªåŒ…å«æœ¬æ¬¡æ“ä½œéœ€è¦çš„å­—æ®µ
â€¢ å‡å°‘ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡
â€¢ æé«˜ç³»ç»Ÿæ€§èƒ½

æ•°æ®éªŒè¯ï¼š
â€¢ åŒ…å«è¾“å…¥éªŒè¯æ³¨è§£
â€¢ åœ¨æ•°æ®ä¼ è¾“æ—¶å°±å‘ç°é—®é¢˜
â€¢ ä¿è¯æ•°æ®è´¨é‡

æ ¼å¼æ ‡å‡†ï¼š
â€¢ ç»Ÿä¸€çš„æ•°æ®æ ¼å¼
â€¢ æ–¹ä¾¿ä¸åŒç³»ç»Ÿå¯¹æ¥
â€¢ é™ä½é›†æˆå¤æ‚åº¦

èŒè´£å•ä¸€ï¼š
â€¢ åªè´Ÿè´£æ•°æ®ä¼ è¾“
â€¢ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
â€¢ ç»“æ„ç®€å•æ¸…æ™°
```

### 3.3 ä¸åŒæ–¹å‘çš„DTOè®¾è®¡


**ğŸ“¥ è¯·æ±‚DTOï¼ˆå‰ç«¯åˆ°åç«¯ï¼‰**ï¼š
```java
// ç”¨æˆ·æ›´æ–°ä¸ªäººä¿¡æ¯DTO
public class UserUpdateDTO {
    @NotNull(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©º")
    private Long userId;
    
    private String nickname;  // å¯é€‰æ›´æ–°
    private String email;     // å¯é€‰æ›´æ–°
    private String bio;       // å¯é€‰æ›´æ–°
    
    // è¯·æ±‚DTOé€šå¸¸åŒ…å«éªŒè¯è§„åˆ™
    // åªåŒ…å«å…è®¸ç”¨æˆ·ä¿®æ”¹çš„å­—æ®µ
}

// åˆ†é¡µæŸ¥è¯¢DTO
public class UserQueryDTO {
    private String keyword;    // æœç´¢å…³é”®è¯
    private Integer status;    // ç”¨æˆ·çŠ¶æ€
    private Integer pageNum = 1;   // é¡µç 
    private Integer pageSize = 10; // é¡µå¤§å°
    private String sortBy = "createTime"; // æ’åºå­—æ®µ
    private String sortOrder = "desc";    // æ’åºæ–¹å‘
}
```

**ğŸ“¤ å“åº”DTOï¼ˆåç«¯åˆ°å‰ç«¯ï¼‰**ï¼š
```java
// åˆ†é¡µå“åº”DTO
public class PageResponseDTO<T> {
    private List<T> data;      // æ•°æ®åˆ—è¡¨
    private Long total;        // æ€»è®°å½•æ•°
    private Integer pageNum;   // å½“å‰é¡µç 
    private Integer pageSize;  // é¡µå¤§å°
    private Integer totalPages; // æ€»é¡µæ•°
    private Boolean hasNext;   // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
    
    // å“åº”DTOåŒ…å«åˆ†é¡µç›¸å…³çš„å…ƒæ•°æ®
}

// æ“ä½œç»“æœDTO
public class ResultDTO<T> {
    private Boolean success;   // æ“ä½œæ˜¯å¦æˆåŠŸ
    private String message;    // æç¤ºä¿¡æ¯
    private T data;           // è¿”å›æ•°æ®
    private String errorCode; // é”™è¯¯ç ï¼ˆå¤±è´¥æ—¶ï¼‰
}
```

### 3.4 DTOçš„å®é™…åº”ç”¨åœºæ™¯


**ğŸ”„ æœåŠ¡é—´é€šä¿¡**ï¼š
```java
@Service
public class UserService {
    
    // æ¥æ”¶DTOï¼Œè¿”å›VO
    public UserDetailVO getUserDetail(Long userId) {
        // 1. æŸ¥è¯¢æ•°æ®
        User user = userRepository.findById(userId);
        
        // 2. æŸ¥è¯¢ç›¸å…³æ•°æ®
        UserStatistics stats = statisticsService.getUserStats(userId);
        
        // 3. ç»„è£…è¿”å›æ•°æ®
        UserDetailVO vo = new UserDetailVO();
        // ... æ•°æ®ç»„è£…
        vo.setPostCount(stats.getPostCount());
        vo.setFanCount(stats.getFanCount());
        
        return vo;
    }
    
    // æ¥æ”¶DTOè¿›è¡Œä¸šåŠ¡å¤„ç†
    public void updateUser(UserUpdateDTO dto) {
        // 1. éªŒè¯DTOæ•°æ®
        validateUserUpdateDTO(dto);
        
        // 2. è½¬æ¢ä¸ºä¸šåŠ¡å¯¹è±¡
        User user = convertDTOToEntity(dto);
        
        // 3. æ‰§è¡Œä¸šåŠ¡é€»è¾‘
        userRepository.updateUser(user);
    }
}
```

**ğŸŒ å¾®æœåŠ¡æ¶æ„ä¸­çš„åº”ç”¨**ï¼š
```java
// è®¢å•æœåŠ¡è°ƒç”¨ç”¨æˆ·æœåŠ¡
@Component
public class OrderService {
    
    @Autowired
    private UserServiceClient userServiceClient;
    
    public void createOrder(CreateOrderDTO orderDTO) {
        // 1. éªŒè¯ç”¨æˆ·ä¿¡æ¯ï¼ˆé€šè¿‡DTOä¼ è¾“ï¼‰
        UserValidationDTO userDTO = new UserValidationDTO();
        userDTO.setUserId(orderDTO.getUserId());
        
        // 2. è¿œç¨‹è°ƒç”¨ç”¨æˆ·æœåŠ¡
        UserValidationResultDTO result = 
            userServiceClient.validateUser(userDTO);
        
        // 3. æ ¹æ®éªŒè¯ç»“æœå¤„ç†è®¢å•
        if (result.getIsValid()) {
            // åˆ›å»ºè®¢å•é€»è¾‘
        }
    }
}
```

---

## 4. ğŸ’¼ BOä¸šåŠ¡å¯¹è±¡è¯¦è§£


### 4.1 BOçš„ä¸šåŠ¡æœ¬è´¨


**ä»€ä¹ˆæ˜¯BOï¼Ÿ**
BOï¼ˆBusiness Objectï¼‰å°±æ˜¯"ä¸šåŠ¡ä¸“å®¶"ï¼Œå®ƒä¸ä»…åŒ…å«æ•°æ®ï¼Œæ›´é‡è¦çš„æ˜¯åŒ…å«ä¸šåŠ¡è§„åˆ™å’Œä¸šåŠ¡é€»è¾‘ã€‚

**ğŸ§  ä¸šåŠ¡ä¸“å®¶çš„ç‰¹ç‚¹**ï¼š
- **æ‡‚ä¸šåŠ¡**ï¼šçŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥åšä»€ä¹ˆæ“ä½œ
- **ä¼šè®¡ç®—**ï¼šèƒ½å¤Ÿå¤„ç†å¤æ‚çš„ä¸šåŠ¡è®¡ç®—
- **æœ‰è§„åˆ™**ï¼šåŒ…å«å„ç§ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸ
- **èƒ½å†³ç­–**ï¼šæ ¹æ®ä¸šåŠ¡æƒ…å†µåšå‡ºåˆ¤æ–­

### 4.2 BOçš„è®¾è®¡ç†å¿µ


**ğŸ—ï¸ BOè®¾è®¡ç¤ºä¾‹**ï¼š
```java
public class UserBO {
    private Long id;
    private String username;
    private String password;
    private String email;
    private Integer status;
    private Date createTime;
    private Integer loginFailCount; // ç™»å½•å¤±è´¥æ¬¡æ•°
    private Date lastLoginTime;     // æœ€åç™»å½•æ—¶é—´
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥ç™»å½•
    public boolean canLogin() {
        // ä¸šåŠ¡è§„åˆ™1ï¼šè´¦æˆ·å¿…é¡»æ˜¯æ¿€æ´»çŠ¶æ€
        if (this.status != 1) {
            return false;
        }
        
        // ä¸šåŠ¡è§„åˆ™2ï¼šç™»å½•å¤±è´¥æ¬¡æ•°ä¸èƒ½è¶…è¿‡5æ¬¡
        if (this.loginFailCount >= 5) {
            return false;
        }
        
        // ä¸šåŠ¡è§„åˆ™3ï¼šè´¦æˆ·ä¸èƒ½è¢«é•¿æœŸå†»ç»“
        if (isAccountFrozen()) {
            return false;
        }
        
        return true;
    }
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šç™»å½•å¤±è´¥å¤„ç†
    public void recordLoginFailure() {
        this.loginFailCount++;
        
        // ä¸šåŠ¡è§„åˆ™ï¼šè¿ç»­å¤±è´¥5æ¬¡åˆ™å†»ç»“è´¦æˆ·
        if (this.loginFailCount >= 5) {
            this.status = 2; // å†»ç»“çŠ¶æ€
        }
    }
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šæ£€æŸ¥å¯†ç å¼ºåº¦
    public boolean isPasswordSecure(String password) {
        // ä¸šåŠ¡è§„åˆ™ï¼šå¯†ç å¤æ‚åº¦è¦æ±‚
        return password.length() >= 8 
            && password.matches(".*[A-Z].*")
            && password.matches(".*[a-z].*")
            && password.matches(".*\\d.*");
    }
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šè®¡ç®—ç”¨æˆ·ç­‰çº§
    public String getUserLevel() {
        long daysSinceJoin = ChronoUnit.DAYS.between(
            this.createTime.toInstant(), Instant.now());
        
        if (daysSinceJoin > 365) {
            return "èµ„æ·±ç”¨æˆ·";
        } else if (daysSinceJoin > 90) {
            return "æ´»è·ƒç”¨æˆ·";
        } else {
            return "æ–°ç”¨æˆ·";
        }
    }
}
```

### 4.3 BOä¸å…¶ä»–å¯¹è±¡çš„åŒºåˆ«


**ğŸ” å¯¹æ¯”ç†è§£**ï¼š

```
æ•°æ®å¤„ç†èƒ½åŠ›å¯¹æ¯”ï¼š

PO (æŒä¹…åŒ–å¯¹è±¡)ï¼š
â€¢ åªæœ‰åŸºæœ¬çš„getter/setter
â€¢ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
â€¢ èŒè´£ï¼šæ•°æ®åº“æ˜ å°„
ç¤ºä¾‹ï¼šuser.setStatus(1)  // åªæ˜¯è®¾ç½®å€¼

BO (ä¸šåŠ¡å¯¹è±¡)ï¼š
â€¢ åŒ…å«ä¸°å¯Œçš„ä¸šåŠ¡æ–¹æ³•
â€¢ æœ‰ä¸šåŠ¡è§„åˆ™å’Œé€»è¾‘
â€¢ èŒè´£ï¼šä¸šåŠ¡å¤„ç†
ç¤ºä¾‹ï¼šuser.activateAccount()  // æœ‰ä¸šåŠ¡å«ä¹‰

DTO (ä¼ è¾“å¯¹è±¡)ï¼š
â€¢ æ•°æ®éªŒè¯å’Œä¼ è¾“
â€¢ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
â€¢ èŒè´£ï¼šæ•°æ®ä¼ é€’
ç¤ºä¾‹ï¼šdto.getUsername()  // åªæ˜¯è·å–æ•°æ®

VO (è§†å›¾å¯¹è±¡)ï¼š
â€¢ æ ¼å¼åŒ–çš„æ˜¾ç¤ºæ•°æ®
â€¢ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘  
â€¢ èŒè´£ï¼šç•Œé¢å±•ç¤º
ç¤ºä¾‹ï¼švo.getStatusText()  // æ ¼å¼åŒ–åçš„çŠ¶æ€
```

### 4.4 å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­çš„BO


**ğŸ›’ ç”µå•†è®¢å•ä¸šåŠ¡BO**ï¼š
```java
public class OrderBO {
    private Long orderId;
    private Long userId;
    private List<OrderItemBO> items;
    private BigDecimal totalAmount;
    private Integer status;
    private Date createTime;
    
    // å¤æ‚ä¸šåŠ¡æ–¹æ³•ï¼šè®¡ç®—è®¢å•æ€»é‡‘é¢
    public BigDecimal calculateTotalAmount() {
        BigDecimal total = BigDecimal.ZERO;
        
        for (OrderItemBO item : items) {
            // è®¡ç®—å•é¡¹é‡‘é¢
            BigDecimal itemTotal = item.getPrice()
                .multiply(new BigDecimal(item.getQuantity()));
                
            // åº”ç”¨ä¼˜æƒ åˆ¸
            if (item.hasDiscount()) {
                itemTotal = item.applyDiscount(itemTotal);
            }
            
            total = total.add(itemTotal);
        }
        
        // åº”ç”¨è®¢å•çº§åˆ«çš„ä¼˜æƒ 
        total = applyOrderDiscount(total);
        
        this.totalAmount = total;
        return total;
    }
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥å–æ¶ˆè®¢å•
    public boolean canCancel() {
        // ä¸šåŠ¡è§„åˆ™1ï¼šå·²æ”¯ä»˜çš„è®¢å•ä¸èƒ½å–æ¶ˆ
        if (this.status >= 2) { // 2è¡¨ç¤ºå·²æ”¯ä»˜
            return false;
        }
        
        // ä¸šåŠ¡è§„åˆ™2ï¼šè¶…è¿‡30åˆ†é’Ÿæœªæ”¯ä»˜è‡ªåŠ¨å–æ¶ˆ
        long minutesSinceCreate = ChronoUnit.MINUTES.between(
            this.createTime.toInstant(), Instant.now());
            
        return minutesSinceCreate <= 30;
    }
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šè®¢å•çŠ¶æ€æµè½¬
    public void payOrder() {
        if (this.status != 1) { // 1è¡¨ç¤ºå¾…æ”¯ä»˜
            throw new BusinessException("è®¢å•çŠ¶æ€ä¸å…è®¸æ”¯ä»˜");
        }
        
        this.status = 2; // å·²æ”¯ä»˜
        // è§¦å‘åç»­ä¸šåŠ¡æµç¨‹
        notifyWarehouse();
        updateInventory();
    }
}
```

**ğŸ’¡ BOè®¾è®¡æœ€ä½³å®è·µ**ï¼š
- **é¢†åŸŸé©±åŠ¨**ï¼šBOåº”è¯¥åæ˜ çœŸå®çš„ä¸šåŠ¡é¢†åŸŸ
- **è§„åˆ™é›†ä¸­**ï¼šæŠŠç›¸å…³çš„ä¸šåŠ¡è§„åˆ™æ”¾åœ¨åŒä¸€ä¸ªBOä¸­
- **çŠ¶æ€ä¸€è‡´**ï¼šBOè´Ÿè´£ç»´æŠ¤å¯¹è±¡çŠ¶æ€çš„ä¸€è‡´æ€§
- **ä¸šåŠ¡æ–¹æ³•**ï¼šæä¾›æœ‰ä¸šåŠ¡å«ä¹‰çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç®€å•çš„getter/setter

---

## 5. ğŸ—„ï¸ POæŒä¹…åŒ–å¯¹è±¡è¯¦è§£


### 5.1 POçš„æ•°æ®æœ¬è´¨


**ä»€ä¹ˆæ˜¯POï¼Ÿ**
POï¼ˆPersistent Objectï¼‰å°±æ˜¯"æ•°æ®åº“ç¿»è¯‘å®˜"ï¼Œå®ƒçš„èŒè´£æ˜¯åœ¨Javaå¯¹è±¡å’Œæ•°æ®åº“è®°å½•ä¹‹é—´å»ºç«‹æ˜ å°„å…³ç³»ã€‚

**ğŸ“‹ æ•°æ®åº“ç¿»è¯‘å®˜çš„å·¥ä½œ**ï¼š
- **å­—æ®µæ˜ å°„**ï¼šJavaå±æ€§å¯¹åº”æ•°æ®åº“åˆ—
- **ç±»å‹è½¬æ¢**ï¼šJavaç±»å‹ä¸SQLç±»å‹äº’è½¬
- **å…³ç³»ç»´æŠ¤**ï¼šå¤„ç†è¡¨ä¹‹é—´çš„å…³è”å…³ç³»
- **æŒä¹…åŒ–æ“ä½œ**ï¼šé…åˆORMæ¡†æ¶è¿›è¡ŒCRUDæ“ä½œ

### 5.2 POçš„è®¾è®¡ç‰¹ç‚¹


**ğŸ—ƒï¸ æ ‡å‡†POè®¾è®¡**ï¼š
```java
@Entity
@Table(name = "sys_user")
public class UserPO {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "user_id")
    private Long id;
    
    @Column(name = "username", nullable = false, length = 50)
    private String username;
    
    @Column(name = "password", nullable = false)
    private String password;
    
    @Column(name = "email", length = 100)
    private String email;
    
    @Column(name = "phone", length = 11)
    private String phone;
    
    @Column(name = "status", nullable = false)
    private Integer status;
    
    @Column(name = "create_time")
    private Date createTime;
    
    @Column(name = "update_time")
    private Date updateTime;
    
    // åªæœ‰æ ‡å‡†çš„getter/setteræ–¹æ³•
    // ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
}
```

**ğŸ” POè®¾è®¡è¦ç‚¹**ï¼š

```
æ˜ å°„åŸåˆ™ï¼š
â€¢ ä¸€ä¸ªPOå¯¹åº”ä¸€ä¸ªæ•°æ®åº“è¡¨
â€¢ å±æ€§åå¯¹åº”æ•°æ®åº“åˆ—å
â€¢ Javaç±»å‹å¯¹åº”SQLæ•°æ®ç±»å‹
â€¢ å…³ç³»æ˜ å°„å¯¹åº”å¤–é”®å…³ç³»

æ³¨è§£è¯´æ˜ï¼š
@Entity        - æ ‡è®°ä¸ºJPAå®ä½“
@Table         - æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“è¡¨
@Id            - æ ‡è®°ä¸»é”®å­—æ®µ
@GeneratedValue - ä¸»é”®ç”Ÿæˆç­–ç•¥
@Column        - å­—æ®µæ˜ å°„é…ç½®

è®¾è®¡çº¦æŸï¼š
â€¢ å¿…é¡»æœ‰æ— å‚æ„é€ æ–¹æ³•
â€¢ å±æ€§ä½¿ç”¨privateä¿®é¥°
â€¢ æä¾›getter/setteræ–¹æ³•
â€¢ ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘æ–¹æ³•
```

### 5.3 POçš„å…³è”å…³ç³»å¤„ç†


**ğŸ”— ä¸€å¯¹ä¸€å…³ç³»**ï¼š
```java
@Entity
@Table(name = "user_profile")
public class UserProfilePO {
    @Id
    private Long userId;
    
    @OneToOne
    @JoinColumn(name = "user_id")
    private UserPO user;
    
    private String realName;
    private String avatar;
    private String bio;
    
    // getter/setter...
}
```

**ğŸ”— ä¸€å¯¹å¤šå…³ç³»**ï¼š
```java
@Entity
@Table(name = "sys_user")
public class UserPO {
    @Id
    private Long id;
    
    // ç”¨æˆ·æ‹¥æœ‰å¤šä¸ªè§’è‰²
    @OneToMany(mappedBy = "user", cascade = CascadeType.ALL)
    private List<UserRolePO> userRoles;
    
    // ç”¨æˆ·å‘è¡¨å¤šç¯‡æ–‡ç« 
    @OneToMany(mappedBy = "author")
    private List<ArticlePO> articles;
    
    // åŸºæœ¬å­—æ®µ...
}
```

**ğŸ”— å¤šå¯¹å¤šå…³ç³»**ï¼š
```java
@Entity
@Table(name = "article")
public class ArticlePO {
    @Id
    private Long id;
    
    // æ–‡ç« æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œæ ‡ç­¾å¯¹åº”å¤šç¯‡æ–‡ç« 
    @ManyToMany
    @JoinTable(
        name = "article_tag",
        joinColumns = @JoinColumn(name = "article_id"),
        inverseJoinColumns = @JoinColumn(name = "tag_id")
    )
    private List<TagPO> tags;
    
    // åŸºæœ¬å­—æ®µ...
}
```

### 5.4 POçš„æœ€ä½³å®è·µ


**ğŸ“ POä½¿ç”¨è§„èŒƒ**ï¼š

```java
// æ¨èçš„POåŸºç±»
@MappedSuperclass
public abstract class BasePO {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    protected Long id;
    
    @Column(name = "create_time")
    protected Date createTime;
    
    @Column(name = "update_time")
    protected Date updateTime;
    
    @Column(name = "create_by")
    protected Long createBy;
    
    @Column(name = "update_by")
    protected Long updateBy;
    
    @PrePersist
    protected void onCreate() {
        createTime = new Date();
        updateTime = new Date();
    }
    
    @PreUpdate
    protected void onUpdate() {
        updateTime = new Date();
    }
}

// å…·ä½“çš„POç»§æ‰¿åŸºç±»
@Entity
@Table(name = "sys_user")
public class UserPO extends BasePO {
    @Column(name = "username")
    private String username;
    
    // å…¶ä»–å­—æ®µ...
}
```

**âš ï¸ POä½¿ç”¨æ³¨æ„äº‹é¡¹**ï¼š

```
DOï¼ˆå»ºè®®ï¼‰:
âœ… åªç”¨äºæ•°æ®æŒä¹…åŒ–æ“ä½œ
âœ… ä¿æŒä¸æ•°æ®åº“ç»“æ„ä¸€è‡´
âœ… ä½¿ç”¨JPA/MyBatisç­‰ORMæ³¨è§£
âœ… æä¾›æ ‡å‡†çš„getter/setter

DON'Tï¼ˆé¿å…ï¼‰:
âŒ ä¸è¦åœ¨POä¸­å†™ä¸šåŠ¡é€»è¾‘
âŒ ä¸è¦ç›´æ¥æŠŠPOè¿”å›ç»™å‰ç«¯
âŒ ä¸è¦åœ¨POä¸­è¿›è¡Œå¤æ‚è®¡ç®—
âŒ ä¸è¦è®©POä¾èµ–å…¶ä»–ä¸šåŠ¡ç»„ä»¶

åŸå› è¯´æ˜ï¼š
POçš„èŒè´£æ˜¯æ•°æ®æ˜ å°„ï¼Œä¸æ˜¯ä¸šåŠ¡å¤„ç†
æ··åˆèŒè´£ä¼šå¯¼è‡´ä»£ç æ··ä¹±å’Œç»´æŠ¤å›°éš¾
```

---

## 6. ğŸ”„ å¯¹è±¡è½¬æ¢ä¸æ˜ å°„


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦å¯¹è±¡è½¬æ¢


**ç°å®åœºæ™¯ç±»æ¯”**ï¼š
å°±åƒç¿»è¯‘å®˜åœ¨ä¸åŒè¯­è¨€ä¹‹é—´è½¬æ¢ä¸€æ ·ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿéœ€è¦åœ¨ä¸åŒå¯¹è±¡ä¹‹é—´è½¬æ¢æ•°æ®ï¼š

```
ç”¨æˆ·æ³¨å†Œæµç¨‹ä¸­çš„å¯¹è±¡è½¬æ¢ï¼š
å‰ç«¯è¡¨å• â†’ DTOéªŒè¯ â†’ BOä¸šåŠ¡å¤„ç† â†’ POæ•°æ®å­˜å‚¨

ç”¨æˆ·æŸ¥è¯¢æµç¨‹ä¸­çš„å¯¹è±¡è½¬æ¢ï¼š
æ•°æ®åº“è®°å½• â†’ POæ˜ å°„ â†’ BOä¸šåŠ¡åŠ å·¥ â†’ VOç•Œé¢å±•ç¤º
```

### 6.2 æ‰‹åŠ¨è½¬æ¢æ–¹æ³•


**ğŸ”§ åŸºç¡€è½¬æ¢å·¥å…·ç±»**ï¼š
```java
@Component
public class UserConverter {
    
    // DTOè½¬BO
    public UserBO convertDTOToBO(UserRegisterDTO dto) {
        UserBO bo = new UserBO();
        bo.setUsername(dto.getUsername());
        bo.setPassword(encryptPassword(dto.getPassword()));
        bo.setEmail(dto.getEmail());
        bo.setPhone(dto.getPhone());
        bo.setNickname(dto.getNickname());
        bo.setStatus(1); // é»˜è®¤æ¿€æ´»çŠ¶æ€
        bo.setCreateTime(new Date());
        return bo;
    }
    
    // BOè½¬PO
    public UserPO convertBOToPO(UserBO bo) {
        UserPO po = new UserPO();
        po.setId(bo.getId());
        po.setUsername(bo.getUsername());
        po.setPassword(bo.getPassword());
        po.setEmail(bo.getEmail());
        po.setPhone(bo.getPhone());
        po.setStatus(bo.getStatus());
        po.setCreateTime(bo.getCreateTime());
        return po;
    }
    
    // BOè½¬VO
    public UserListVO convertBOToListVO(UserBO bo) {
        UserListVO vo = new UserListVO();
        vo.setId(bo.getId());
        vo.setUsername(bo.getUsername());
        vo.setNickname(bo.getNickname());
        
        // ä¸šåŠ¡æ•°æ®è½¬æ¢
        vo.setStatusText(bo.getStatus() == 1 ? "æ­£å¸¸" : "ç¦ç”¨");
        vo.setUserLevel(bo.getUserLevel()); // ä½¿ç”¨BOçš„ä¸šåŠ¡æ–¹æ³•
        vo.setJoinTime(formatDate(bo.getCreateTime()));
        
        return vo;
    }
    
    // å·¥å…·æ–¹æ³•
    private String encryptPassword(String password) {
        // å¯†ç åŠ å¯†é€»è¾‘
        return BCrypt.hashpw(password, BCrypt.gensalt());
    }
    
    private String formatDate(Date date) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
        return sdf.format(date);
    }
}
```

### 6.3 ä½¿ç”¨MapStructè‡ªåŠ¨æ˜ å°„


**ğŸš€ MapStructç®€åŒ–è½¬æ¢**ï¼š

é¦–å…ˆæ·»åŠ ä¾èµ–ï¼š
```xml
<dependency>
    <groupId>org.mapstruct</groupId>
    <artifactId>mapstruct</artifactId>
    <version>1.5.3.Final</version>
</dependency>
```

å®šä¹‰æ˜ å°„æ¥å£ï¼š
```java
@Mapper(componentModel = "spring")
public interface UserMapper {
    
    // åŸºæœ¬æ˜ å°„
    @Mapping(target = "password", source = "password", qualifiedByName = "encryptPassword")
    @Mapping(target = "status", constant = "1")
    @Mapping(target = "createTime", expression = "java(new java.util.Date())")
    UserBO dtoToBO(UserRegisterDTO dto);
    
    // å¿½ç•¥æŸäº›å­—æ®µ
    @Mapping(target = "password", ignore = true)
    @Mapping(target = "loginFailCount", ignore = true)
    UserPO boToPO(UserBO bo);
    
    // è‡ªå®šä¹‰è½¬æ¢é€»è¾‘
    @Mapping(target = "statusText", source = "status", qualifiedByName = "statusToText")
    @Mapping(target = "joinTime", source = "createTime", qualifiedByName = "formatDate")
    UserListVO boToListVO(UserBO bo);
    
    // åˆ—è¡¨è½¬æ¢
    List<UserListVO> boListToVOList(List<UserBO> boList);
    
    // è‡ªå®šä¹‰æ–¹æ³•
    @Named("encryptPassword")
    default String encryptPassword(String password) {
        return BCrypt.hashpw(password, BCrypt.gensalt());
    }
    
    @Named("statusToText")
    default String statusToText(Integer status) {
        return status == 1 ? "æ­£å¸¸" : "ç¦ç”¨";
    }
    
    @Named("formatDate")
    default String formatDate(Date date) {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
        return sdf.format(date);
    }
}
```

### 6.4 è½¬æ¢æœ€ä½³å®è·µ


**ğŸ¯ è½¬æ¢ç­–ç•¥é€‰æ‹©**ï¼š

```
è½¬æ¢å·¥å…·å¯¹æ¯”ï¼š

æ‰‹åŠ¨è½¬æ¢ï¼š
ä¼˜ç‚¹ï¼šçµæ´»ã€å¯æ§ã€æ˜“è°ƒè¯•
ç¼ºç‚¹ï¼šä»£ç é‡å¤§ã€å®¹æ˜“å‡ºé”™
é€‚ç”¨ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘ã€ç‰¹æ®Šè½¬æ¢éœ€æ±‚

MapStructï¼š
ä¼˜ç‚¹ï¼šç¼–è¯‘æ—¶ç”Ÿæˆã€æ€§èƒ½å¥½ã€ä»£ç ç®€æ´
ç¼ºç‚¹ï¼šå­¦ä¹ æˆæœ¬ã€å¤æ‚æ˜ å°„é…ç½®å›°éš¾
é€‚ç”¨ï¼šæ ‡å‡†æ˜ å°„ã€å¤§é‡è½¬æ¢ä»£ç 

BeanUtils.copyPropertiesï¼š
ä¼˜ç‚¹ï¼šç®€å•æ˜“ç”¨ã€æ— éœ€é…ç½®
ç¼ºç‚¹ï¼šåå°„æ€§èƒ½å·®ã€ç±»å‹å®‰å…¨æ€§å·®
é€‚ç”¨ï¼šç®€å•åœºæ™¯ã€åŸå‹å¼€å‘
```

**ğŸ”§ è½¬æ¢å±‚è®¾è®¡æ¨¡å¼**ï¼š
```java
@Service
public class UserService {
    
    @Autowired
    private UserMapper userMapper;
    
    @Autowired
    private UserRepository userRepository;
    
    // å®Œæ•´çš„æ•°æ®æµè½¬
    public void registerUser(UserRegisterDTO dto) {
        // 1. DTO â†’ BOï¼ˆæ·»åŠ ä¸šåŠ¡é€»è¾‘ï¼‰
        UserBO userBO = userMapper.dtoToBO(dto);
        
        // 2. æ‰§è¡Œä¸šåŠ¡æ ¡éªŒ
        validateUser(userBO);
        
        // 3. BO â†’ POï¼ˆæŒä¹…åŒ–ï¼‰
        UserPO userPO = userMapper.boToPO(userBO);
        userRepository.save(userPO);
        
        // 4. åç»­ä¸šåŠ¡å¤„ç†
        sendWelcomeEmail(userBO);
    }
    
    public List<UserListVO> getUserList() {
        // 1. æŸ¥è¯¢PO
        List<UserPO> userPOs = userRepository.findAll();
        
        // 2. PO â†’ BOï¼ˆæ·»åŠ ä¸šåŠ¡ä¿¡æ¯ï¼‰
        List<UserBO> userBOs = userPOs.stream()
            .map(this::enrichUserBO)
            .collect(Collectors.toList());
        
        // 3. BO â†’ VOï¼ˆç•Œé¢å±•ç¤ºï¼‰
        return userMapper.boListToVOList(userBOs);
    }
    
    // ä¸šåŠ¡æ•°æ®è¡¥å……
    private UserBO enrichUserBO(UserPO po) {
        UserBO bo = userMapper.poToBO(po);
        // æ·»åŠ ç»Ÿè®¡ä¿¡æ¯ã€è®¡ç®—è¡ç”Ÿå­—æ®µç­‰
        return bo;
    }
}
```

---

## 7. ğŸŒ å±‚é—´æ•°æ®ä¼ é€’å®è·µ


### 7.1 MVCæ¶æ„ä¸­çš„æ•°æ®æµ


**ğŸ“Š æ ‡å‡†æ•°æ®æµå‘**ï¼š
```
å‰ç«¯è¯·æ±‚ â†’ Controlleræ¥æ”¶DTO â†’ Serviceå¤„ç†BO â†’ Repositoryæ“ä½œPO â†’ æ•°æ®åº“
              â†“                    â†“               â†“
           æ•°æ®éªŒè¯            ä¸šåŠ¡é€»è¾‘å¤„ç†      æ•°æ®æŒä¹…åŒ–
              â†“                    â†“               â†“
          è¿”å›VO â† Serviceç»„è£…æ•°æ® â† RepositoryæŸ¥è¯¢PO â† æ•°æ®åº“
```

### 7.2 Controllerå±‚æ•°æ®å¤„ç†


**ğŸ® æ§åˆ¶å™¨æœ€ä½³å®è·µ**ï¼š
```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // ç”¨æˆ·æ³¨å†Œ
    @PostMapping("/register")
    public Result<Void> register(@Valid @RequestBody UserRegisterDTO dto) {
        try {
            // Controlleråªè´Ÿè´£æ•°æ®ä¼ é€’ï¼Œä¸å¤„ç†ä¸šåŠ¡é€»è¾‘
            userService.registerUser(dto);
            return Result.success("æ³¨å†ŒæˆåŠŸ");
        } catch (BusinessException e) {
            return Result.error(e.getMessage());
        }
    }
    
    // ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢
    @GetMapping("/list")
    public Result<PageResult<UserListVO>> getUserList(
            @Valid UserQueryDTO queryDTO) {
        
        // å‚æ•°éªŒè¯å·²é€šè¿‡@Validå®Œæˆ
        PageResult<UserListVO> result = userService.getUserList(queryDTO);
        return Result.success(result);
    }
    
    // ç”¨æˆ·è¯¦æƒ…æŸ¥è¯¢
    @GetMapping("/{id}")
    public Result<UserDetailVO> getUserDetail(@PathVariable Long id) {
        if (id == null || id <= 0) {
            return Result.error("ç”¨æˆ·IDæ— æ•ˆ");
        }
        
        UserDetailVO userDetail = userService.getUserDetail(id);
        return Result.success(userDetail);
    }
    
    // ç”¨æˆ·ä¿¡æ¯æ›´æ–°
    @PutMapping("/{id}")
    public Result<Void> updateUser(@PathVariable Long id, 
                                  @Valid @RequestBody UserUpdateDTO dto) {
        // è®¾ç½®ç”¨æˆ·ID
        dto.setUserId(id);
        
        userService.updateUser(dto);
        return Result.success("æ›´æ–°æˆåŠŸ");
    }
}
```

### 7.3 Serviceå±‚ä¸šåŠ¡å¤„ç†


**âš™ï¸ æœåŠ¡å±‚æ•°æ®æµæ§åˆ¶**ï¼š
```java
@Service
@Transactional
public class UserServiceImpl implements UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private UserMapper userMapper;
    
    @Override
    public void registerUser(UserRegisterDTO dto) {
        // 1. DTOéªŒè¯ï¼ˆæ³¨è§£éªŒè¯å·²å®Œæˆï¼Œè¿™é‡Œåšä¸šåŠ¡éªŒè¯ï¼‰
        validateUserRegister(dto);
        
        // 2. DTO â†’ BOè½¬æ¢
        UserBO userBO = userMapper.dtoToBO(dto);
        
        // 3. ä¸šåŠ¡é€»è¾‘å¤„ç†
        userBO.initializeNewUser(); // BOçš„ä¸šåŠ¡æ–¹æ³•
        
        // 4. BO â†’ POè½¬æ¢
        UserPO userPO = userMapper.boToPO(userBO);
        
        // 5. æ•°æ®æŒä¹…åŒ–
        userRepository.save(userPO);
        
        // 6. åç»­ä¸šåŠ¡å¤„ç†
        publishUserRegisteredEvent(userBO);
    }
    
    @Override
    public PageResult<UserListVO> getUserList(UserQueryDTO queryDTO) {
        // 1. æ„å»ºæŸ¥è¯¢æ¡ä»¶
        UserQueryCondition condition = buildQueryCondition(queryDTO);
        
        // 2. æŸ¥è¯¢æ•°æ®
        PageResult<UserPO> poPageResult = 
            userRepository.findUsersByCondition(condition);
        
        // 3. PO â†’ BOè½¬æ¢ï¼ˆæ·»åŠ ä¸šåŠ¡ä¿¡æ¯ï¼‰
        List<UserBO> userBOs = poPageResult.getData().stream()
            .map(po -> {
                UserBO bo = userMapper.poToBO(po);
                // æ·»åŠ ä¸šåŠ¡è®¡ç®—å­—æ®µ
                bo.calculateUserLevel();
                bo.loadStatisticsInfo();
                return bo;
            })
            .collect(Collectors.toList());
        
        // 4. BO â†’ VOè½¬æ¢
        List<UserListVO> userVOs = userMapper.boListToVOList(userBOs);
        
        // 5. æ„å»ºåˆ†é¡µç»“æœ
        return new PageResult<>(userVOs, poPageResult.getTotal(), 
                               queryDTO.getPageNum(), queryDTO.getPageSize());
    }
    
    private void validateUserRegister(UserRegisterDTO dto) {
        // ä¸šåŠ¡éªŒè¯ï¼šç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        if (userRepository.existsByUsername(dto.getUsername())) {
            throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        // ä¸šåŠ¡éªŒè¯ï¼šé‚®ç®±æ˜¯å¦å·²æ³¨å†Œ
        if (StringUtils.hasText(dto.getEmail()) && 
            userRepository.existsByEmail(dto.getEmail())) {
            throw new BusinessException("é‚®ç®±å·²æ³¨å†Œ");
        }
    }
}
```

### 7.4 Repositoryå±‚æ•°æ®è®¿é—®


**ğŸ—„ï¸ æ•°æ®è®¿é—®å±‚è®¾è®¡**ï¼š
```java
@Repository
public interface UserRepository extends JpaRepository<UserPO, Long> {
    
    // åŸºæœ¬æŸ¥è¯¢æ–¹æ³•
    boolean existsByUsername(String username);
    boolean existsByEmail(String email);
    Optional<UserPO> findByUsername(String username);
    
    // å¤æ‚æŸ¥è¯¢æ–¹æ³•
    @Query("SELECT u FROM UserPO u WHERE " +
           "(:keyword IS NULL OR u.username LIKE %:keyword% OR u.nickname LIKE %:keyword%) " +
           "AND (:status IS NULL OR u.status = :status)")
    Page<UserPO> findUsersByCondition(
        @Param("keyword") String keyword,
        @Param("status") Integer status,
        Pageable pageable
    );
    
    // ç»Ÿè®¡æŸ¥è¯¢
    @Query("SELECT COUNT(u) FROM UserPO u WHERE u.status = 1")
    long countActiveUsers();
    
    // æ‰¹é‡æ“ä½œ
    @Modifying
    @Query("UPDATE UserPO u SET u.status = :status WHERE u.id IN :ids")
    void batchUpdateStatus(@Param("ids") List<Long> ids, @Param("status") Integer status);
}

// å¤æ‚æŸ¥è¯¢çš„å®ç°ç±»
@Repository
public class UserRepositoryImpl {
    
    @Autowired
    private EntityManager entityManager;
    
    public PageResult<UserPO> findUsersByCondition(UserQueryCondition condition) {
        // æ„å»ºåŠ¨æ€æŸ¥è¯¢
        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery<UserPO> query = cb.createQuery(UserPO.class);
        Root<UserPO> root = query.from(UserPO.class);
        
        List<Predicate> predicates = new ArrayList<>();
        
        // å…³é”®è¯æœç´¢
        if (StringUtils.hasText(condition.getKeyword())) {
            Predicate usernameLike = cb.like(root.get("username"), 
                "%" + condition.getKeyword() + "%");
            Predicate nicknameLike = cb.like(root.get("nickname"), 
                "%" + condition.getKeyword() + "%");
            predicates.add(cb.or(usernameLike, nicknameLike));
        }
        
        // çŠ¶æ€è¿‡æ»¤
        if (condition.getStatus() != null) {
            predicates.add(cb.equal(root.get("status"), condition.getStatus()));
        }
        
        // åº”ç”¨æŸ¥è¯¢æ¡ä»¶
        query.where(predicates.toArray(new Predicate[0]));
        
        // æ’åº
        if ("createTime".equals(condition.getSortBy())) {
            if ("desc".equals(condition.getSortOrder())) {
                query.orderBy(cb.desc(root.get("createTime")));
            } else {
                query.orderBy(cb.asc(root.get("createTime")));
            }
        }
        
        // æ‰§è¡ŒæŸ¥è¯¢
        TypedQuery<UserPO> typedQuery = entityManager.createQuery(query);
        typedQuery.setFirstResult((condition.getPageNum() - 1) * condition.getPageSize());
        typedQuery.setMaxResults(condition.getPageSize());
        
        List<UserPO> users = typedQuery.getResultList();
        
        // æŸ¥è¯¢æ€»æ•°
        CriteriaQuery<Long> countQuery = cb.createQuery(Long.class);
        Root<UserPO> countRoot = countQuery.from(UserPO.class);
        countQuery.select(cb.count(countRoot));
        countQuery.where(predicates.toArray(new Predicate[0]));
        
        Long total = entityManager.createQuery(countQuery).getSingleResult();
        
        return new PageResult<>(users, total, condition.getPageNum(), condition.getPageSize());
    }
}
```

---

## 8. ğŸ¯ æœ€ä½³å®è·µä¸è®¾è®¡åŸåˆ™


### 8.1 å¯¹è±¡è®¾è®¡åŸåˆ™


**ğŸ“ SOLIDåŸåˆ™åœ¨å¯¹è±¡è®¾è®¡ä¸­çš„åº”ç”¨**ï¼š

```
å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼š
âœ… POåªè´Ÿè´£æ•°æ®æ˜ å°„
âœ… BOåªè´Ÿè´£ä¸šåŠ¡é€»è¾‘
âœ… DTOåªè´Ÿè´£æ•°æ®ä¼ è¾“
âœ… VOåªè´Ÿè´£è§†å›¾å±•ç¤º

å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼š
âœ… é€šè¿‡ç»§æ‰¿æ‰©å±•åŸºç¡€å¯¹è±¡
âœ… é€šè¿‡ç»„åˆæ·»åŠ æ–°åŠŸèƒ½
âœ… æ¥å£å®šä¹‰ç¨³å®šï¼Œå®ç°å¯å˜

é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰ï¼š
âœ… å­ç±»å¯¹è±¡å¯ä»¥æ›¿æ¢çˆ¶ç±»å¯¹è±¡
âœ… ä¿æŒæ¥å£å¥‘çº¦ä¸å˜

æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰ï¼š
âœ… DTOæ¥å£åªæš´éœ²ä¼ è¾“ç›¸å…³æ–¹æ³•
âœ… VOæ¥å£åªæš´éœ²æ˜¾ç¤ºç›¸å…³å±æ€§

ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰ï¼š
âœ… ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
âœ… é€šè¿‡æ¥å£å®šä¹‰å¯¹è±¡è½¬æ¢å¥‘çº¦
```

### 8.2 å‘½åä¸åŒ…ç»“æ„è§„èŒƒ


**ğŸ“ æ¨èçš„åŒ…ç»“æ„**ï¼š
```
com.example.project
â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ request/    # è¯·æ±‚DTO
â”‚   â”‚   â””â”€â”€ response/   # å“åº”DTO
â”‚   â””â”€â”€ vo/             # è§†å›¾å¯¹è±¡
â”œâ”€â”€ service/            # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ bo/             # ä¸šåŠ¡å¯¹è±¡
â”‚   â””â”€â”€ impl/           # æœåŠ¡å®ç°
â”œâ”€â”€ repository/         # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ po/             # æŒä¹…åŒ–å¯¹è±¡
â””â”€â”€ common/             # é€šç”¨ç»„ä»¶
    â”œâ”€â”€ converter/      # å¯¹è±¡è½¬æ¢å™¨
    â”œâ”€â”€ util/          # å·¥å…·ç±»
    â””â”€â”€ exception/     # å¼‚å¸¸å®šä¹‰
```

**ğŸ·ï¸ å‘½åè§„èŒƒ**ï¼š
```
å¯¹è±¡å‘½åè§„åˆ™ï¼š
- PO: å®ä½“å + POï¼Œå¦‚ UserPO, OrderPO
- BO: å®ä½“å + BOï¼Œå¦‚ UserBO, OrderBO
- DTO: åŠŸèƒ½æè¿° + DTOï¼Œå¦‚ UserRegisterDTO, UserUpdateDTO
- VO: åœºæ™¯æè¿° + VOï¼Œå¦‚ UserListVO, UserDetailVO

è½¬æ¢å™¨å‘½åï¼š
- å®ä½“å + Converterï¼Œå¦‚ UserConverter
- å®ä½“å + Mapperï¼Œå¦‚ UserMapperï¼ˆMapStructï¼‰

æ–¹æ³•å‘½åï¼š
- è½¬æ¢æ–¹æ³•: convertXToYï¼Œå¦‚ convertDTOToBO
- ä¸šåŠ¡æ–¹æ³•: åŠ¨è¯+åè¯ï¼Œå¦‚ validateUser, calculateAmount
```

### 8.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**ğŸš€ æ•°æ®ä¼ é€’æ€§èƒ½ä¼˜åŒ–**ï¼š

```java
@Service
public class UserService {
    
    // 1. é¿å…N+1æŸ¥è¯¢é—®é¢˜
    public List<UserDetailVO> getUsersWithProfiles() {
        // âŒ é”™è¯¯ï¼šä¼šäº§ç”ŸN+1æŸ¥è¯¢
        List<UserPO> users = userRepository.findAll();
        return users.stream()
            .map(user -> {
                UserProfilePO profile = profileRepository.findByUserId(user.getId()); // Næ¬¡æŸ¥è¯¢
                return convertToDetailVO(user, profile);
            })
            .collect(Collectors.toList());
        
        // âœ… æ­£ç¡®ï¼šä½¿ç”¨è¿æ¥æŸ¥è¯¢æˆ–æ‰¹é‡æŸ¥è¯¢
        List<UserWithProfilePO> usersWithProfile = userRepository.findAllWithProfile();
        return usersWithProfile.stream()
            .map(this::convertToDetailVO)
            .collect(Collectors.toList());
    }
    
    // 2. åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
    public PageResult<UserListVO> getUserList(UserQueryDTO queryDTO) {
        // åªæŸ¥è¯¢å¿…è¦çš„å­—æ®µ
        PageResult<UserBasicPO> basicUsers = 
            userRepository.findBasicUsersByCondition(queryDTO);
        
        // æ‰¹é‡åŠ è½½å…³è”æ•°æ®
        List<Long> userIds = basicUsers.getData().stream()
            .map(UserBasicPO::getId)
            .collect(Collectors.toList());
            
        Map<Long, UserStatisticsPO> statisticsMap = 
            statisticsRepository.findByUserIds(userIds).stream()
            .collect(Collectors.toMap(UserStatisticsPO::getUserId, Function.identity()));
        
        // ç»„è£…VO
        List<UserListVO> voList = basicUsers.getData().stream()
            .map(user -> {
                UserListVO vo = convertToListVO(user);
                UserStatisticsPO stats = statisticsMap.get(user.getId());
                if (stats != null) {
                    vo.setPostCount(stats.getPostCount());
                    vo.setFanCount(stats.getFanCount());
                }
                return vo;
            })
            .collect(Collectors.toList());
        
        return new PageResult<>(voList, basicUsers.getTotal(), 
                               queryDTO.getPageNum(), queryDTO.getPageSize());
    }
    
    // 3. ç¼“å­˜ç­–ç•¥
    @Cacheable(value = "userDetail", key = "#userId")
    public UserDetailVO getUserDetail(Long userId) {
        UserPO userPO = userRepository.findById(userId)
            .orElseThrow(() -> new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨"));
            
        UserBO userBO = userMapper.poToBO(userPO);
        // æ·»åŠ ä¸šåŠ¡ä¿¡æ¯
        enrichUserBO(userBO);
        
        return userMapper.boToDetailVO(userBO);
    }
}
```

### 8.4 å¼‚å¸¸å¤„ç†ä¸æ•°æ®æ ¡éªŒ


**ğŸ›¡ï¸ å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶**ï¼š

```java
// è‡ªå®šä¹‰å¼‚å¸¸ç±»
public class BusinessException extends RuntimeException {
    private String errorCode;
    
    public BusinessException(String message) {
        super(message);
        this.errorCode = "BUSINESS_ERROR";
    }
    
    public BusinessException(String errorCode, String message) {
        super(message);
        this.errorCode = errorCode;
    }
}

// å…¨å±€å¼‚å¸¸å¤„ç†
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    // æ•°æ®éªŒè¯å¼‚å¸¸
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public Result<Void> handleValidationException(MethodArgumentNotValidException e) {
        BindingResult bindingResult = e.getBindingResult();
        String errorMessage = bindingResult.getFieldErrors().stream()
            .map(error -> error.getField() + ": " + error.getDefaultMessage())
            .collect(Collectors.joining(", "));
            
        return Result.error("VALIDATION_ERROR", "å‚æ•°éªŒè¯å¤±è´¥: " + errorMessage);
    }
    
    // ä¸šåŠ¡å¼‚å¸¸
    @ExceptionHandler(BusinessException.class)
    public Result<Void> handleBusinessException(BusinessException e) {
        return Result.error(e.getErrorCode(), e.getMessage());
    }
    
    // ç³»ç»Ÿå¼‚å¸¸
    @ExceptionHandler(Exception.class)
    public Result<Void> handleSystemException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸", e);
        return Result.error("SYSTEM_ERROR", "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}

// DTOæ•°æ®æ ¡éªŒ
public class UserRegisterDTO {
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^[a-zA-Z0-9_]{4,20}$", message = "ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œé•¿åº¦4-20ä½")
    private String username;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Length(min = 6, max = 20, message = "å¯†ç é•¿åº¦6-20ä½")
    private String password;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    private String email;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    // è‡ªå®šä¹‰éªŒè¯æ³¨è§£
    @ValidNickname
    private String nickname;
}

// è‡ªå®šä¹‰éªŒè¯å™¨
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = NicknameValidator.class)
public @interface ValidNickname {
    String message() default "æ˜µç§°æ ¼å¼ä¸æ­£ç¡®";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

public class NicknameValidator implements ConstraintValidator<ValidNickname, String> {
    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        if (value == null || value.trim().isEmpty()) {
            return false;
        }
        
        // æ˜µç§°ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦2-20ä½
        return value.matches("^[\\u4e00-\\u9fa5a-zA-Z0-9_]{2,20}$");
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å››ç§å¯¹è±¡æœ¬è´¨ï¼šPOæ˜ å°„æ•°æ®åº“ï¼ŒBOå¤„ç†ä¸šåŠ¡ï¼ŒDTOä¼ è¾“æ•°æ®ï¼ŒVOå±•ç¤ºç•Œé¢
ğŸ”¸ èŒè´£åˆ†ç¦»ï¼šæ¯ç§å¯¹è±¡æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œï¼Œä¸èƒ½è¶Šç•Œ
ğŸ”¸ æ•°æ®æµè½¬ï¼šç†è§£æ•°æ®åœ¨ä¸åŒå±‚ä¹‹é—´çš„è½¬æ¢è¿‡ç¨‹
ğŸ”¸ å¯¹è±¡è½¬æ¢ï¼šæŒæ¡æ‰‹åŠ¨è½¬æ¢å’Œè‡ªåŠ¨æ˜ å°„å·¥å…·çš„ä½¿ç”¨
ğŸ”¸ æœ€ä½³å®è·µï¼šéµå¾ªè®¾è®¡åŸåˆ™ï¼Œå»ºç«‹è§„èŒƒçš„å‘½åå’ŒåŒ…ç»“æ„
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šå¯¹è±¡ç±»å‹**ï¼š
```
æ ¹æœ¬åŸå› ï¼š
â€¢ ä¸åŒå±‚æ¬¡æœ‰ä¸åŒçš„æ•°æ®éœ€æ±‚
â€¢ å®‰å…¨æ€§è¦æ±‚æ•°æ®éš”ç¦»
â€¢ æ€§èƒ½ä¼˜åŒ–éœ€è¦ç²¾ç®€æ•°æ®
â€¢ ç»´æŠ¤æ€§è¦æ±‚èŒè´£åˆ†ç¦»

å®é™…æ•ˆæœï¼š
â€¢ æé«˜ç³»ç»Ÿå®‰å…¨æ€§
â€¢ ä¼˜åŒ–ç½‘ç»œä¼ è¾“æ€§èƒ½  
â€¢ é™ä½å„å±‚ä¹‹é—´çš„è€¦åˆ
â€¢ æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§
```

**ğŸ”¹ å¦‚ä½•é€‰æ‹©åˆé€‚çš„å¯¹è±¡ç±»å‹**ï¼š
```
é€‰æ‹©æ ‡å‡†ï¼š
1. æ•°æ®æ¥æºï¼šæ•°æ®åº“ç”¨POï¼Œå‰ç«¯ä¼ å…¥ç”¨DTO
2. ä½¿ç”¨åœºæ™¯ï¼šä¸šåŠ¡å¤„ç†ç”¨BOï¼Œç•Œé¢æ˜¾ç¤ºç”¨VO
3. æ•°æ®æµå‘ï¼šè¯·æ±‚ç”¨RequestDTOï¼Œå“åº”ç”¨ResponseVO
4. å®‰å…¨è¦æ±‚ï¼šæ•æ„Ÿæ•°æ®ä¸èƒ½å‡ºç°åœ¨VOä¸­

å¸¸è§é”™è¯¯ï¼š
âŒ ç›´æ¥è¿”å›POç»™å‰ç«¯ï¼ˆæ³„éœ²æ•æ„Ÿä¿¡æ¯ï¼‰
âŒ åœ¨VOä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼ˆèŒè´£æ··ä¹±ï¼‰
âŒ DTOéªŒè¯ä¸å…¨é¢ï¼ˆå®‰å…¨é£é™©ï¼‰
âŒ å¯¹è±¡è½¬æ¢è¿‡äºå¤æ‚ï¼ˆæ€§èƒ½é—®é¢˜ï¼‰
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ é¡¹ç›®å®è·µå»ºè®®**ï¼š
```
åˆå­¦é˜¶æ®µï¼š
1. å…ˆç†è§£å››ç§å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ
2. ç»ƒä¹ æ‰‹åŠ¨å¯¹è±¡è½¬æ¢
3. æŒæ¡åŸºæœ¬çš„æ•°æ®éªŒè¯

è¿›é˜¶é˜¶æ®µï¼š
1. å­¦ä¹ ä½¿ç”¨MapStructç­‰è½¬æ¢å·¥å…·
2. å»ºç«‹é¡¹ç›®çš„å¯¹è±¡è®¾è®¡è§„èŒƒ
3. å®è·µå¤æ‚ä¸šåŠ¡åœºæ™¯çš„å¯¹è±¡è®¾è®¡

é«˜çº§é˜¶æ®µï¼š
1. ä¼˜åŒ–å¯¹è±¡è½¬æ¢æ€§èƒ½
2. è®¾è®¡é€šç”¨çš„å¯¹è±¡è½¬æ¢æ¡†æ¶
3. ç»“åˆç¼“å­˜å’Œå¼‚æ­¥å¤„ç†ä¼˜åŒ–æ•°æ®æµè½¬
```

**ğŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ**ï¼š
```
é—®é¢˜1ï¼šå¯¹è±¡è½¬æ¢ä»£ç å¤ªå¤š
è§£å†³ï¼šä½¿ç”¨MapStructè‡ªåŠ¨ç”Ÿæˆè½¬æ¢ä»£ç 

é—®é¢˜2ï¼šVOä¸­åº”è¯¥åŒ…å«å“ªäº›å­—æ®µ
è§£å†³ï¼šæ ¹æ®å‰ç«¯é¡µé¢éœ€æ±‚ç¡®å®šï¼Œå®å¯å°‘ä¸è¦å¤š

é—®é¢˜3ï¼šDTOéªŒè¯è§„åˆ™å¦‚ä½•è®¾è®¡
è§£å†³ï¼šç»“åˆå‰ç«¯éªŒè¯å’Œåç«¯ä¸šåŠ¡è§„åˆ™ï¼Œç¡®ä¿æ•°æ®å®‰å…¨

é—®é¢˜4ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦BOå¯¹è±¡
è§£å†³ï¼šæœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘æ—¶ä½¿ç”¨ï¼Œç®€å•CRUDå¯ä»¥çœç•¥

é—®é¢˜5ï¼šæ€§èƒ½ä¼˜åŒ–ä»ä½•å…¥æ‰‹
è§£å†³ï¼šé¦–å…ˆè§£å†³N+1æŸ¥è¯¢ï¼Œç„¶åä¼˜åŒ–å¯¹è±¡è½¬æ¢ï¼Œæœ€åè€ƒè™‘ç¼“å­˜
```

### 9.4 è®°å¿†è¦ç‚¹


**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
POå¯¹æ•°æ®åº“ï¼ŒBOç®¡ä¸šåŠ¡
DTOä¼ æ•°æ®ï¼ŒVOç»™ç•Œé¢
å„å¸å…¶èŒä¸è¶Šç•Œï¼Œè½¬æ¢æ˜ å°„è¦è§„èŒƒ
å®‰å…¨ç¬¬ä¸€æ€§èƒ½å¥½ï¼Œåˆ†å±‚è®¾è®¡æ˜¯å…³é”®
```

**ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•**ï¼š
```
â–¡ ç†è§£å››ç§å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µå’Œä½œç”¨
â–¡ ä¼šè®¾è®¡ç¬¦åˆè§„èŒƒçš„å„ç§å¯¹è±¡
â–¡ æŒæ¡å¯¹è±¡ä¹‹é—´çš„è½¬æ¢æ–¹æ³•
â–¡ äº†è§£æ•°æ®éªŒè¯å’Œå¼‚å¸¸å¤„ç†
â–¡ èƒ½å¤Ÿåœ¨å®é™…é¡¹ç›®ä¸­æ­£ç¡®åº”ç”¨
â–¡ çŸ¥é“å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
â–¡ æŒæ¡æ€§èƒ½ä¼˜åŒ–çš„åŸºæœ¬ç­–ç•¥
```

**ğŸ¯ å®è·µå»ºè®®**ï¼š
```
å­¦ä¹ æ–¹æ³•ï¼š
1. ç†è®ºå­¦ä¹ ï¼šç†è§£æ¦‚å¿µå’ŒåŸç†
2. åŠ¨æ‰‹ç»ƒä¹ ï¼šç¼–å†™è½¬æ¢ä»£ç 
3. é¡¹ç›®å®æˆ˜ï¼šåœ¨çœŸå®é¡¹ç›®ä¸­åº”ç”¨
4. ä»£ç å®¡æŸ¥ï¼šå­¦ä¹ ä¼˜ç§€çš„è®¾è®¡æ¡ˆä¾‹
5. æŒç»­æ”¹è¿›ï¼šæ ¹æ®å®è·µç»éªŒä¼˜åŒ–è®¾è®¡

æ³¨æ„äº‹é¡¹ï¼š
â€¢ ä¸è¦ä¸ºäº†ä½¿ç”¨è€Œä½¿ç”¨ï¼Œè¦æ ¹æ®å®é™…éœ€æ±‚
â€¢ ä¿æŒå¯¹è±¡è®¾è®¡çš„ç®€å•æ€§ï¼Œé¿å…è¿‡åº¦è®¾è®¡
â€¢ é‡è§†æ•°æ®å®‰å…¨ï¼Œç‰¹åˆ«æ˜¯æ•æ„Ÿä¿¡æ¯çš„å¤„ç†
â€¢ å…³æ³¨æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯å¤§æ•°æ®é‡çš„å¤„ç†åœºæ™¯
```

é€šè¿‡æŒæ¡è¿™äº›æ•°æ®ä¼ é€’å¯¹è±¡çš„è®¾è®¡åŸåˆ™å’Œå®è·µæ–¹æ³•ï¼Œä½ å°±èƒ½åœ¨JavaWebå¼€å‘ä¸­æ„å»ºå‡ºå®‰å…¨ã€é«˜æ•ˆã€å¯ç»´æŠ¤çš„æ•°æ®å¤„ç†æ¶æ„ã€‚è®°ä½ï¼Œå¥½çš„å¯¹è±¡è®¾è®¡æ˜¯æ•´ä¸ªåº”ç”¨æ¶æ„çš„åŸºç¡€ï¼