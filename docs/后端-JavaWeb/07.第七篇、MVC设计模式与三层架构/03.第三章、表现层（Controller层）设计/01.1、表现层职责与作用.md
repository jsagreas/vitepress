---
title: 1ã€è¡¨ç°å±‚èŒè´£ä¸ä½œç”¨
---
## ğŸ“š ç›®å½•

1. [è¡¨ç°å±‚åŸºæœ¬æ¦‚å¿µ](#1-è¡¨ç°å±‚åŸºæœ¬æ¦‚å¿µ)
2. [è¡¨ç°å±‚æ ¸å¿ƒèŒè´£](#2-è¡¨ç°å±‚æ ¸å¿ƒèŒè´£)
3. [è¯·æ±‚æ¥æ”¶ä¸å¤„ç†](#3-è¯·æ±‚æ¥æ”¶ä¸å¤„ç†)
4. [å‚æ•°ç»‘å®šæœºåˆ¶](#4-å‚æ•°ç»‘å®šæœºåˆ¶)
5. [æ•°æ®æ ¡éªŒå¤„ç†](#5-æ•°æ®æ ¡éªŒå¤„ç†)
6. [ä¸šåŠ¡é€»è¾‘è°ƒç”¨](#6-ä¸šåŠ¡é€»è¾‘è°ƒç”¨)
7. [ç»“æœè¿”å›å¤„ç†](#7-ç»“æœè¿”å›å¤„ç†)
8. [å¼‚å¸¸å¤„ç†æœºåˆ¶](#8-å¼‚å¸¸å¤„ç†æœºåˆ¶)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è¡¨ç°å±‚åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è¡¨ç°å±‚


**ç®€å•ç†è§£**ï¼šè¡¨ç°å±‚å°±åƒé¤å…çš„æœåŠ¡å‘˜ï¼Œè´Ÿè´£æ¥å¾…å®¢äººã€è®°å½•ç‚¹é¤ã€ä¼ è¾¾ç»™åå¨ã€å†æŠŠèœç«¯ç»™å®¢äºº

```
ç°å®ä¸­çš„é¤å…æœåŠ¡ï¼š           JavaWebä¸­çš„è¡¨ç°å±‚ï¼š
å®¢äºº â†’ æœåŠ¡å‘˜ â†’ åå¨              æµè§ˆå™¨ â†’ Controller â†’ Serviceå±‚
     â†‘                                    â†‘
   ç‚¹é¤éœ€æ±‚                            HTTPè¯·æ±‚
     â†“                                    â†“
   ä¸ŠèœæœåŠ¡                            å“åº”ç»“æœ
```

**ä¸“ä¸šå®šä¹‰**ï¼š
- **è¡¨ç°å±‚ï¼ˆControllerå±‚ï¼‰**ï¼šMVCæ¶æ„ä¸­çš„Cï¼ˆControllerï¼‰
- **ä¸»è¦ä½œç”¨**ï¼šå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œæ§åˆ¶ç¨‹åºæµç¨‹ï¼Œåè°ƒå„ä¸ªç»„ä»¶
- **ä½ç½®**ï¼šä½äºç”¨æˆ·ç•Œé¢å’Œä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ä¸­é—´å±‚

### 1.2 è¡¨ç°å±‚åœ¨ä¸‰å±‚æ¶æ„ä¸­çš„ä½ç½®


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¡¨ç°å±‚ (Controller)         â”‚ â† æ¥æ”¶è¯·æ±‚ï¼Œè¿”å›å“åº”
â”‚        - æ¥æ”¶HTTPè¯·æ±‚               â”‚
â”‚        - å‚æ•°æ ¡éªŒç»‘å®š               â”‚
â”‚        - è°ƒç”¨ä¸šåŠ¡å±‚                 â”‚
â”‚        - å¤„ç†è¿”å›ç»“æœ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          ä¸šåŠ¡å±‚ (Service)           â”‚ â† å¤„ç†ä¸šåŠ¡é€»è¾‘
â”‚        - ä¸šåŠ¡è§„åˆ™å¤„ç†               â”‚
â”‚        - äº‹åŠ¡ç®¡ç†                   â”‚
â”‚        - è°ƒç”¨æŒä¹…å±‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æŒä¹…å±‚ (DAO)               â”‚ â† æ•°æ®åº“æ“ä½œ
â”‚        - æ•°æ®çš„å¢åˆ æ”¹æŸ¥             â”‚
â”‚        - SQLè¯­å¥æ‰§è¡Œ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦è¡¨ç°å±‚


**é—®é¢˜åˆ†æ**ï¼šå¦‚æœæ²¡æœ‰è¡¨ç°å±‚ä¼šæ€æ ·ï¼Ÿ

```
æ²¡æœ‰è¡¨ç°å±‚çš„æƒ…å†µï¼š
æµè§ˆå™¨è¯·æ±‚ â†’ ç›´æ¥è°ƒç”¨ä¸šåŠ¡é€»è¾‘ â†’ æ•°æ®åº“æ“ä½œ

é—®é¢˜ï¼š
âŒ è¯·æ±‚å‚æ•°æ··ä¹±ï¼Œä¸çŸ¥é“æ€ä¹ˆå¤„ç†
âŒ ä¸šåŠ¡é€»è¾‘å’Œç•Œé¢å¤„ç†æ··åœ¨ä¸€èµ·
âŒ é”™è¯¯å¤„ç†æ²¡æœ‰ç»Ÿä¸€æ ‡å‡†
âŒ ä»£ç é‡å¤ï¼Œç»´æŠ¤å›°éš¾
```

**è¡¨ç°å±‚çš„ä»·å€¼**ï¼š
- âœ… **ç»Ÿä¸€å…¥å£**ï¼šæ‰€æœ‰è¯·æ±‚éƒ½ä»è¿™é‡Œè¿›å…¥
- âœ… **èŒè´£åˆ†ç¦»**ï¼šç•Œé¢é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘åˆ†å¼€
- âœ… **æ ‡å‡†åŒ–å¤„ç†**ï¼šç»Ÿä¸€çš„è¯·æ±‚å’Œå“åº”æ ¼å¼
- âœ… **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ç•Œé¢ä¸å½±å“ä¸šåŠ¡é€»è¾‘

---

## 2. âš¡ è¡¨ç°å±‚æ ¸å¿ƒèŒè´£


### 2.1 å…­å¤§æ ¸å¿ƒèŒè´£æ¦‚è§ˆ


**è¡¨ç°å±‚å°±åƒä¸€ä¸ªæ™ºèƒ½å®¢æœï¼Œéœ€è¦åšè¿™äº›äº‹æƒ…ï¼š**

```
å®¢æˆ·å’¨è¯¢æµç¨‹ï¼š                    è¡¨ç°å±‚å¤„ç†æµç¨‹ï¼š
1. æ¥å¬ç”µè¯                    â†’ 1. æ¥æ”¶HTTPè¯·æ±‚
2. ç†è§£å®¢æˆ·é—®é¢˜                â†’ 2. è§£æè¯·æ±‚å‚æ•°
3. éªŒè¯å®¢æˆ·ä¿¡æ¯                â†’ 3. æ ¡éªŒå‚æ•°æ•°æ®
4. è½¬æ¥ç›¸å…³éƒ¨é—¨                â†’ 4. è°ƒç”¨ä¸šåŠ¡é€»è¾‘
5. æ•´ç†å›å¤å†…å®¹                â†’ 5. å¤„ç†è¿”å›ç»“æœ
6. å¤„ç†å¼‚å¸¸æƒ…å†µ                â†’ 6. å¼‚å¸¸ç»Ÿä¸€å¤„ç†
```

### 2.2 èŒè´£è¯¦ç»†è¯´æ˜


| èŒè´£ | **ä½œç”¨è¯´æ˜** | **ç±»æ¯”ç†è§£** | **æŠ€æœ¯å®ç°** |
|------|-------------|-------------|-------------|
| ğŸ”Œ **è¯·æ±‚æ¥æ”¶** | `æ¥æ”¶æ¥è‡ªå‰ç«¯çš„HTTPè¯·æ±‚` | `é¤å…æœåŠ¡å‘˜æ¥å¾…å®¢äºº` | `@RequestMappingæ³¨è§£` |
| ğŸ“ **å‚æ•°ç»‘å®š** | `å°†è¯·æ±‚å‚æ•°è½¬æ¢ä¸ºJavaå¯¹è±¡` | `æŠŠå®¢äººçš„å£å¤´ç‚¹é¤å†™æˆè®¢å•` | `@RequestParam, @RequestBody` |
| âœ… **æ•°æ®æ ¡éªŒ** | `éªŒè¯å‚æ•°çš„åˆæ³•æ€§å’Œå®Œæ•´æ€§` | `ç¡®è®¤è®¢å•ä¿¡æ¯æ˜¯å¦é½å…¨æ­£ç¡®` | `@Valid, @Validated` |
| ğŸ”§ **è°ƒç”¨ä¸šåŠ¡** | `è°ƒç”¨Serviceå±‚å¤„ç†ä¸šåŠ¡é€»è¾‘` | `æŠŠè®¢å•ä¼ ç»™åå¨åˆ¶ä½œ` | `service.method()è°ƒç”¨` |
| ğŸ“¤ **ç»“æœè¿”å›** | `å°†å¤„ç†ç»“æœè¿”å›ç»™å‰ç«¯` | `æŠŠåšå¥½çš„èœç«¯ç»™å®¢äºº` | `return ResponseEntity` |
| âš ï¸ **å¼‚å¸¸å¤„ç†** | `ç»Ÿä¸€å¤„ç†å„ç§é”™è¯¯æƒ…å†µ` | `å¤„ç†æŠ•è¯‰å’Œç‰¹æ®Šæƒ…å†µ` | `@ExceptionHandler` |

### 2.3 èŒè´£è¾¹ç•Œåˆ’åˆ†


**è¡¨ç°å±‚åº”è¯¥åšçš„ï¼š**
- âœ… æ¥æ”¶å’Œå“åº”HTTPè¯·æ±‚
- âœ… å‚æ•°æ ¼å¼è½¬æ¢å’ŒåŸºæœ¬æ ¡éªŒ
- âœ… è°ƒç”¨åˆé€‚çš„ä¸šåŠ¡æ–¹æ³•
- âœ… è¿”å›æ ‡å‡†æ ¼å¼çš„å“åº”

**è¡¨ç°å±‚ä¸åº”è¯¥åšçš„ï¼š**
- âŒ å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è®¡ç®—
- âŒ ç›´æ¥æ“ä½œæ•°æ®åº“
- âŒ å¤æ‚çš„æ•°æ®å¤„ç†ç®—æ³•
- âŒ äº‹åŠ¡ç®¡ç†

> ğŸ’¡ **è®°å¿†æŠ€å·§**ï¼šè¡¨ç°å±‚å°±æ˜¯"ä¼ è¯ç­’"ï¼Œåªè´Ÿè´£ä¼ è¾¾å’Œè½¬æ¢ï¼Œä¸è´Ÿè´£å…·ä½“çš„"å¹²æ´»"

---

## 3. ğŸ“¨ è¯·æ±‚æ¥æ”¶ä¸å¤„ç†


### 3.1 HTTPè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ


**è¯·æ±‚å¤„ç†å…¨è¿‡ç¨‹ï¼š**

```
æµè§ˆå™¨å‘èµ·è¯·æ±‚                    æœåŠ¡å™¨å¤„ç†è¯·æ±‚
     |                               |
     |--[1] HTTP Request----------->|
     |   GET /user/list             |
     |                              |
     |                              |--[2] è·¯ç”±åŒ¹é…
     |                              |   æ‰¾åˆ°å¯¹åº”Controller
     |                              |
     |                              |--[3] æ–¹æ³•è°ƒç”¨
     |                              |   æ‰§è¡ŒControlleræ–¹æ³•
     |                              |
     |                              |--[4] ä¸šåŠ¡å¤„ç†
     |                              |   è°ƒç”¨Serviceå±‚
     |                              |
     |                              |--[5] ç»“æœå°è£…
     |                              |   å‡†å¤‡å“åº”æ•°æ®
     |                              |
     |<--[6] HTTP Response----------|
     |   200 OK + JSONæ•°æ®          |
```

### 3.2 è¯·æ±‚æ˜ å°„æœºåˆ¶


**è·¯ç”±æ˜ å°„å°±åƒé—¨ç‰Œå·ç³»ç»Ÿï¼š**

```java
// å°±åƒå°åŒºçš„é—¨ç‰Œå·æŒ‡å¼•
@Controller
@RequestMapping("/user")  // è¿™æ˜¯"å°åŒºåœ°å€"
public class UserController {
    
    @RequestMapping("/list")  // è¿™æ˜¯"å…·ä½“æˆ¿å·"
    public String getUserList() {
        // å¤„ç† /user/list è¯·æ±‚
        return "userList";
    }
    
    @RequestMapping("/add")  // å¦ä¸€ä¸ª"æˆ¿å·"
    public String addUser() {
        // å¤„ç† /user/add è¯·æ±‚
        return "addUser";
    }
}
```

**HTTPæ–¹æ³•åŒºåˆ†ï¼š**

| HTTPæ–¹æ³• | **ç”¨é€”** | **å¯¹åº”æ“ä½œ** | **ç¤ºä¾‹URL** |
|----------|---------|-------------|------------|
| `GET` | `æŸ¥è¯¢æ•°æ®` | `æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨` | `GET /user/list` |
| `POST` | `åˆ›å»ºæ•°æ®` | `æ·»åŠ æ–°ç”¨æˆ·` | `POST /user/add` |
| `PUT` | `æ›´æ–°æ•°æ®` | `ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯` | `PUT /user/update` |
| `DELETE` | `åˆ é™¤æ•°æ®` | `åˆ é™¤ç”¨æˆ·` | `DELETE /user/delete` |

### 3.3 æ§åˆ¶å™¨çš„åŸºæœ¬ç»“æ„


```java
// ä¸€ä¸ªæ ‡å‡†çš„Controllerå°±åƒä¸€ä¸ªæ¥å¾…å¤§å…
@Controller  // å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨
public class UserController {
    
    @Autowired  // è‡ªåŠ¨æ³¨å…¥ä¸šåŠ¡å±‚æœåŠ¡
    private UserService userService;
    
    // å¤„ç†ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢è¯·æ±‚
    @RequestMapping("/user/list")
    @ResponseBody  // è¿”å›JSONæ•°æ®è€Œä¸æ˜¯é¡µé¢
    public List<User> getUserList() {
        // è°ƒç”¨ä¸šåŠ¡å±‚è·å–æ•°æ®
        return userService.getAllUsers();
    }
}
```

> ğŸ¯ **å…³é”®ç†è§£**ï¼šControllerå°±åƒé…’åº—å‰å°ï¼Œå®¢äººçš„ä»»ä½•éœ€æ±‚éƒ½å…ˆåˆ°å‰å°ï¼Œå‰å°å†å†³å®šè½¬ç»™å“ªä¸ªéƒ¨é—¨å¤„ç†

---

## 4. ğŸ”— å‚æ•°ç»‘å®šæœºåˆ¶


### 4.1 ä»€ä¹ˆæ˜¯å‚æ•°ç»‘å®š


**ç®€å•ç†è§£**ï¼šå‚æ•°ç»‘å®šå°±åƒç¿»è¯‘ï¼ŒæŠŠå‰ç«¯å‘æ¥çš„"å¤–è¯­"ï¼ˆHTTPå‚æ•°ï¼‰ç¿»è¯‘æˆåç«¯èƒ½ç†è§£çš„"æ¯è¯­"ï¼ˆJavaå¯¹è±¡ï¼‰

```
å‰ç«¯å‘é€ï¼š                     åç«¯æ¥æ”¶ï¼š
name=å¼ ä¸‰&age=25&email=...  â†’  Userå¯¹è±¡{name:"å¼ ä¸‰", age:25, email:"..."}
```

### 4.2 å¸¸è§çš„å‚æ•°ç»‘å®šæ–¹å¼


#### ğŸ”¸ åŸºæœ¬å‚æ•°ç»‘å®š


```java
// å¤„ç†ç®€å•çš„æŸ¥è¯¢å‚æ•°
@RequestMapping("/user/search")
@ResponseBody
public String searchUser(
    @RequestParam("name") String userName,    // ç»‘å®šnameå‚æ•°
    @RequestParam("age") Integer userAge      // ç»‘å®šageå‚æ•°
) {
    return "æŸ¥æ‰¾ç”¨æˆ·ï¼š" + userName + "ï¼Œå¹´é¾„ï¼š" + userAge;
}

// å‰ç«¯è°ƒç”¨ï¼š/user/search?name=å¼ ä¸‰&age=25
```

#### ğŸ”¸ å¯¹è±¡å‚æ•°ç»‘å®š


```java
// æŠŠå¤šä¸ªå‚æ•°è‡ªåŠ¨å°è£…æˆå¯¹è±¡
@RequestMapping("/user/add")
@ResponseBody
public String addUser(User user) {  // è‡ªåŠ¨ç»‘å®šåˆ°Userå¯¹è±¡
    // Springä¼šè‡ªåŠ¨æŠŠè¡¨å•å‚æ•°èµ‹å€¼ç»™Userå¯¹è±¡çš„å±æ€§
    return "æ·»åŠ ç”¨æˆ·ï¼š" + user.getName();
}

// Userç±»
public class User {
    private String name;
    private Integer age;
    private String email;
    // getterå’Œsetteræ–¹æ³•...
}
```

#### ğŸ”¸ JSONå‚æ•°ç»‘å®š


```java
// å¤„ç†JSONæ ¼å¼çš„è¯·æ±‚ä½“
@RequestMapping("/user/save")
@ResponseBody
public String saveUser(@RequestBody User user) {
    // @RequestBodyä¼šæŠŠJSONè½¬æ¢ä¸ºUserå¯¹è±¡
    return "ä¿å­˜ç”¨æˆ·ï¼š" + user.getName();
}

// å‰ç«¯å‘é€JSONï¼š{"name":"å¼ ä¸‰","age":25,"email":"zhangsan@qq.com"}
```

### 4.3 å‚æ•°ç»‘å®šæœ€ä½³å®è·µ


**å‚æ•°æ ¡éªŒå¢å¼ºï¼š**

```java
@RequestMapping("/user/register")
@ResponseBody
public String registerUser(
    @RequestParam("username") String username,
    @RequestParam(value = "age", defaultValue = "18") Integer age,
    @RequestParam(value = "email", required = false) String email
) {
    // required = falseï¼šå‚æ•°å¯é€‰
    // defaultValueï¼šè®¾ç½®é»˜è®¤å€¼
    return "æ³¨å†ŒæˆåŠŸ";
}
```

**å‚æ•°ç»‘å®šè§„åˆ™æ€»ç»“ï¼š**

| ç»‘å®šç±»å‹ | **ä½¿ç”¨åœºæ™¯** | **æ³¨è§£** | **ç‰¹ç‚¹** |
|----------|-------------|---------|----------|
| `åŸºæœ¬å‚æ•°` | `ç®€å•æŸ¥è¯¢æ¡ä»¶` | `@RequestParam` | `é€‚åˆ1-3ä¸ªå‚æ•°` |
| `å¯¹è±¡ç»‘å®š` | `è¡¨å•æäº¤` | `æ— éœ€æ³¨è§£` | `å‚æ•°åè¦å¯¹åº”å±æ€§å` |
| `JSONç»‘å®š` | `Ajaxè¯·æ±‚` | `@RequestBody` | `å‰ç«¯å‘é€JSONæ ¼å¼` |
| `è·¯å¾„å‚æ•°` | `RESTfulé£æ ¼` | `@PathVariable` | `å‚æ•°åœ¨URLè·¯å¾„ä¸­` |

> ğŸ’¡ **å°æŠ€å·§**ï¼šå‚æ•°ç»‘å®šå¤±è´¥æ—¶ï¼ŒSpringä¼šè‡ªåŠ¨è¿”å›400é”™è¯¯ï¼Œå‘Šè¯‰å‰ç«¯å‚æ•°æœ‰é—®é¢˜

---

## 5. âœ… æ•°æ®æ ¡éªŒå¤„ç†


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®æ ¡éªŒ


**ç°å®åœºæ™¯ç±»æ¯”**ï¼š

```
é“¶è¡Œå¼€æˆ·æµç¨‹ï¼š                    Webåº”ç”¨æ•°æ®æ ¡éªŒï¼š
1. æ£€æŸ¥èº«ä»½è¯æ˜¯å¦æœ‰æ•ˆ           â†’ 1. æ£€æŸ¥é‚®ç®±æ ¼å¼æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤å¹´é¾„æ˜¯å¦æ»¡18å²          â†’ 2. ç¡®è®¤å¹´é¾„æ˜¯å¦åœ¨åˆç†èŒƒå›´
3. éªŒè¯æ‰‹æœºå·æ˜¯å¦çœŸå®          â†’ 3. éªŒè¯ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
4. æ‰€æœ‰ä¿¡æ¯æ— è¯¯æ‰èƒ½å¼€æˆ·        â†’ 4. æ‰€æœ‰æ ¡éªŒé€šè¿‡æ‰å¤„ç†ä¸šåŠ¡
```

**ä¸æ ¡éªŒæ•°æ®çš„åæœï¼š**
- âŒ åƒåœ¾æ•°æ®è¿›å…¥æ•°æ®åº“
- âŒ ç¨‹åºè¿è¡Œå‡ºç°å¼‚å¸¸
- âŒ å®‰å…¨æ¼æ´è¢«åˆ©ç”¨
- âŒ ç”¨æˆ·ä½“éªŒå·®

### 5.2 æ ¡éªŒçš„å±‚æ¬¡ç»“æ„


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯æ ¡éªŒ       â”‚ â† ç”¨æˆ·ä½“éªŒï¼Œå¿«é€Ÿåé¦ˆ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Controlleræ ¡éªŒ â”‚ â† æœåŠ¡ç«¯å…¥å£æ ¡éªŒ â­ æˆ‘ä»¬çš„é‡ç‚¹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Serviceæ ¡éªŒ    â”‚ â† ä¸šåŠ¡è§„åˆ™æ ¡éªŒ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ•°æ®åº“çº¦æŸ     â”‚ â† æœ€åé˜²çº¿
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å¸¸è§æ ¡éªŒè§„åˆ™


**åŸºæœ¬æ ¡éªŒæ³¨è§£ï¼š**

```java
public class User {
    @NotNull(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 2, max = 20, message = "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨2-20å­—ç¬¦ä¹‹é—´")
    private String username;
    
    @NotNull(message = "å¹´é¾„ä¸èƒ½ä¸ºç©º") 
    @Min(value = 1, message = "å¹´é¾„å¿…é¡»å¤§äº0")
    @Max(value = 150, message = "å¹´é¾„ä¸èƒ½è¶…è¿‡150")
    private Integer age;
    
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
}
```

**Controllerä¸­å¯ç”¨æ ¡éªŒï¼š**

```java
@RequestMapping("/user/register")
@ResponseBody
public String registerUser(@Valid @RequestBody User user, BindingResult result) {
    
    // æ£€æŸ¥æ ¡éªŒç»“æœ
    if (result.hasErrors()) {
        // è·å–ç¬¬ä¸€ä¸ªé”™è¯¯ä¿¡æ¯
        String errorMsg = result.getFieldError().getDefaultMessage();
        return "æ ¡éªŒå¤±è´¥ï¼š" + errorMsg;
    }
    
    // æ ¡éªŒé€šè¿‡ï¼Œè¿›è¡Œä¸šåŠ¡å¤„ç†
    userService.registerUser(user);
    return "æ³¨å†ŒæˆåŠŸ";
}
```

### 5.4 è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™


**åœºæ™¯ï¼šæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨**

```java
// 1. åˆ›å»ºè‡ªå®šä¹‰æ ¡éªŒæ³¨è§£
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = UniqueUsernameValidator.class)
public @interface UniqueUsername {
    String message() default "ç”¨æˆ·åå·²å­˜åœ¨";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

// 2. å®ç°æ ¡éªŒé€»è¾‘
public class UniqueUsernameValidator implements ConstraintValidator<UniqueUsername, String> {
    
    @Autowired
    private UserService userService;
    
    @Override
    public boolean isValid(String username, ConstraintValidatorContext context) {
        if (username == null) {
            return true;  // ç©ºå€¼ç”±@NotNullå¤„ç†
        }
        return !userService.isUsernameExists(username);
    }
}

// 3. åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨
public class User {
    @NotNull
    @UniqueUsername  // ä½¿ç”¨è‡ªå®šä¹‰æ ¡éªŒ
    private String username;
}
```

**æ ¡éªŒæ³¨è§£é€ŸæŸ¥è¡¨ï¼š**

| æ ¡éªŒæ³¨è§£ | **ä½œç”¨** | **ç¤ºä¾‹** | **å¸¸ç”¨åœºæ™¯** |
|----------|---------|---------|-------------|
| `@NotNull` | `ä¸èƒ½ä¸ºnull` | `ç”¨æˆ·åä¸èƒ½ä¸ºç©º` | `å¿…å¡«å­—æ®µ` |
| `@NotBlank` | `ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²` | `å¯†ç ä¸èƒ½ä¸ºç©º` | `æ–‡æœ¬è¾“å…¥` |
| `@Size` | `é•¿åº¦é™åˆ¶` | `ç”¨æˆ·å2-20å­—ç¬¦` | `å­—ç¬¦ä¸²é•¿åº¦` |
| `@Email` | `é‚®ç®±æ ¼å¼` | `é‚®ç®±æ ¼å¼æ ¡éªŒ` | `é‚®ç®±è¾“å…¥` |
| `@Pattern` | `æ­£åˆ™åŒ¹é…` | `æ‰‹æœºå·æ ¼å¼` | `æ ¼å¼æ ¡éªŒ` |
| `@Min/@Max` | `æ•°å€¼èŒƒå›´` | `å¹´é¾„1-150` | `æ•°å€¼æ ¡éªŒ` |

> ğŸ”§ **å®ç”¨å»ºè®®**ï¼šå…ˆä½¿ç”¨æ ‡å‡†æ ¡éªŒæ³¨è§£ï¼Œå¤æ‚ä¸šåŠ¡è§„åˆ™å†è€ƒè™‘è‡ªå®šä¹‰æ ¡éªŒ

---

## 6. ğŸ”„ ä¸šåŠ¡é€»è¾‘è°ƒç”¨


### 6.1 è°ƒç”¨ä¸šåŠ¡å±‚çš„æ­£ç¡®å§¿åŠ¿


**å°±åƒç‚¹é¤æµç¨‹ï¼š**

```
å®¢äººç‚¹é¤ï¼š                        Controllerè°ƒç”¨Serviceï¼š
å®¢äºº â†’ æœåŠ¡å‘˜ â†’ åå¨              å‰ç«¯ â†’ Controller â†’ Service

æœåŠ¡å‘˜çš„èŒè´£ï¼š                    Controllerçš„èŒè´£ï¼š
âœ… è®°å½•å®¢äººéœ€æ±‚                   âœ… æ¥æ”¶å‰ç«¯è¯·æ±‚
âœ… ä¼ è¾¾ç»™åå¨                     âœ… è°ƒç”¨åˆé€‚çš„Serviceæ–¹æ³•  
âœ… æŠŠèœç«¯ç»™å®¢äºº                   âœ… è¿”å›å¤„ç†ç»“æœ
âŒ ä¸ä¼šè‡ªå·±åšèœ                   âŒ ä¸å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘
```

### 6.2 Serviceå±‚ä¾èµ–æ³¨å…¥


**æ­£ç¡®çš„ä¾èµ–æ³¨å…¥æ–¹å¼ï¼š**

```java
@Controller
public class UserController {
    
    // æ¨èæ–¹å¼ï¼šæ„é€ å™¨æ³¨å…¥
    private final UserService userService;
    
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    // æˆ–è€…ä½¿ç”¨@Autowiredå­—æ®µæ³¨å…¥ï¼ˆç®€å•åœºæ™¯ï¼‰
    @Autowired
    private UserService userService;
}
```

### 6.3 ä¸šåŠ¡æ–¹æ³•è°ƒç”¨æ¨¡å¼


#### ğŸ”¸ ç®€å•æŸ¥è¯¢è°ƒç”¨


```java
@RequestMapping("/user/list")
@ResponseBody
public List<User> getUserList() {
    // ç›´æ¥è°ƒç”¨ï¼Œè¿”å›ç»“æœ
    return userService.getAllUsers();
}
```

#### ğŸ”¸ å¸¦å‚æ•°çš„ä¸šåŠ¡è°ƒç”¨


```java
@RequestMapping("/user/search")
@ResponseBody
public List<User> searchUsers(
    @RequestParam("keyword") String keyword,
    @RequestParam(value = "page", defaultValue = "1") Integer page
) {
    // ä¼ é€’å‚æ•°ç»™ä¸šåŠ¡å±‚
    return userService.searchUsers(keyword, page);
}
```

#### ğŸ”¸ å¤æ‚ä¸šåŠ¡è°ƒç”¨


```java
@RequestMapping("/user/register")
@ResponseBody
public ResponseResult registerUser(@Valid @RequestBody User user) {
    try {
        // è°ƒç”¨ä¸šåŠ¡å±‚å¤„ç†æ³¨å†Œé€»è¾‘
        User savedUser = userService.registerUser(user);
        
        // æˆåŠŸè¿”å›
        return ResponseResult.success("æ³¨å†ŒæˆåŠŸ", savedUser);
        
    } catch (BusinessException e) {
        // ä¸šåŠ¡å¼‚å¸¸å¤„ç†
        return ResponseResult.error(e.getMessage());
    }
}
```

### 6.4 è°ƒç”¨ç»“æœå¤„ç†


**ç»“æœå¤„ç†çš„ä¸‰ç§æƒ…å†µï¼š**

```java
@RequestMapping("/user/delete/{id}")
@ResponseBody
public ResponseResult deleteUser(@PathVariable Long id) {
    
    // 1. æˆåŠŸæƒ…å†µ
    boolean success = userService.deleteUser(id);
    if (success) {
        return ResponseResult.success("åˆ é™¤æˆåŠŸ");
    }
    
    // 2. ä¸šåŠ¡å¤±è´¥æƒ…å†µ
    else {
        return ResponseResult.error("åˆ é™¤å¤±è´¥ï¼Œç”¨æˆ·ä¸å­˜åœ¨");
    }
    
    // 3. å¼‚å¸¸æƒ…å†µç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨å¤„ç†
}
```

**ä¸šåŠ¡è°ƒç”¨æœ€ä½³å®è·µï¼š**

| åœºæ™¯ | **åšæ³•** | **ç¤ºä¾‹** | **æ³¨æ„äº‹é¡¹** |
|------|---------|---------|-------------|
| `ç®€å•æŸ¥è¯¢` | `ç›´æ¥è°ƒç”¨è¿”å›` | `return service.getAll()` | `æ— éœ€å¤æ‚å¤„ç†` |
| `å¸¦å‚æ•°è°ƒç”¨` | `å‚æ•°æ ¡éªŒåä¼ é€’` | `service.search(keyword)` | `æ ¡éªŒå‚æ•°æœ‰æ•ˆæ€§` |
| `å¯èƒ½å¤±è´¥` | `åˆ¤æ–­è¿”å›ç»“æœ` | `if(success) {...}` | `å¤„ç†å¤±è´¥æƒ…å†µ` |
| `å¯èƒ½å¼‚å¸¸` | `try-catchå¤„ç†` | `catch(Exception e)` | `æˆ–ç”¨å…¨å±€å¼‚å¸¸å¤„ç†` |

> ğŸ’¡ **æ ¸å¿ƒåŸåˆ™**ï¼šControlleråªè´Ÿè´£"ä¼ è¯"ï¼Œä¸è´Ÿè´£"å¹²æ´»"ï¼Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘éƒ½äº¤ç»™Serviceå±‚å¤„ç†

---

## 7. ğŸ“¤ ç»“æœè¿”å›å¤„ç†


### 7.1 å“åº”ç»“æœçš„ç»Ÿä¸€æ ¼å¼


**ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€æ ¼å¼ï¼Ÿ**

```
æ··ä¹±çš„è¿”å›æ ¼å¼ï¼š                   ç»Ÿä¸€çš„è¿”å›æ ¼å¼ï¼š
æ¥å£1: "success"                 æ‰€æœ‰æ¥å£: {"code":200, "msg":"æˆåŠŸ", "data":...}
æ¥å£2: {"status":1}              
æ¥å£3: true
æ¥å£4: {"success":true}
    â†“                                â†“
å‰ç«¯å¤„ç†å¤æ‚                      å‰ç«¯å¤„ç†ç®€å•ç»Ÿä¸€
```

**æ ‡å‡†å“åº”æ ¼å¼è®¾è®¡ï¼š**

```java
// ç»Ÿä¸€å“åº”ç»“æœç±»
public class ResponseResult<T> {
    private Integer code;    // çŠ¶æ€ç ï¼š200æˆåŠŸï¼Œ400å®¢æˆ·ç«¯é”™è¯¯ï¼Œ500æœåŠ¡å™¨é”™è¯¯
    private String message;  // æç¤ºä¿¡æ¯
    private T data;         // è¿”å›æ•°æ®
    
    // æˆåŠŸå“åº”çš„é™æ€æ–¹æ³•
    public static <T> ResponseResult<T> success(String message, T data) {
        ResponseResult<T> result = new ResponseResult<>();
        result.code = 200;
        result.message = message;
        result.data = data;
        return result;
    }
    
    // å¤±è´¥å“åº”çš„é™æ€æ–¹æ³•  
    public static <T> ResponseResult<T> error(String message) {
        ResponseResult<T> result = new ResponseResult<>();
        result.code = 400;
        result.message = message;
        result.data = null;
        return result;
    }
}
```

### 7.2 ä¸åŒåœºæ™¯çš„è¿”å›å¤„ç†


#### ğŸ”¸ æŸ¥è¯¢æ•°æ®è¿”å›


```java
@RequestMapping("/user/list")
@ResponseBody
public ResponseResult<List<User>> getUserList() {
    List<User> users = userService.getAllUsers();
    
    if (users.isEmpty()) {
        return ResponseResult.success("æš‚æ— ç”¨æˆ·æ•°æ®", users);
    } else {
        return ResponseResult.success("æŸ¥è¯¢æˆåŠŸ", users);
    }
}
```

#### ğŸ”¸ æ“ä½œç»“æœè¿”å›


```java
@RequestMapping("/user/add")
@ResponseBody
public ResponseResult<User> addUser(@Valid @RequestBody User user) {
    User savedUser = userService.addUser(user);
    return ResponseResult.success("æ·»åŠ æˆåŠŸ", savedUser);
}

@RequestMapping("/user/delete/{id}")
@ResponseBody
public ResponseResult<Void> deleteUser(@PathVariable Long id) {
    userService.deleteUser(id);
    return ResponseResult.success("åˆ é™¤æˆåŠŸ", null);
}
```

#### ğŸ”¸ åˆ†é¡µæ•°æ®è¿”å›


```java
@RequestMapping("/user/page")
@ResponseBody
public ResponseResult<PageResult<User>> getUserPage(
    @RequestParam(value = "page", defaultValue = "1") Integer page,
    @RequestParam(value = "size", defaultValue = "10") Integer size
) {
    PageResult<User> pageResult = userService.getUserPage(page, size);
    return ResponseResult.success("æŸ¥è¯¢æˆåŠŸ", pageResult);
}

// åˆ†é¡µç»“æœå°è£…
public class PageResult<T> {
    private List<T> list;      // å½“å‰é¡µæ•°æ®
    private Long total;        // æ€»è®°å½•æ•°
    private Integer page;      // å½“å‰é¡µç 
    private Integer size;      // æ¯é¡µå¤§å°
    private Integer pages;     // æ€»é¡µæ•°
}
```

### 7.3 å“åº”çŠ¶æ€ç è§„èŒƒ


**HTTPçŠ¶æ€ç ä½¿ç”¨æŒ‡å—ï¼š**

| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|--------|---------|-------------|----------|
| `200` | `æˆåŠŸ` | `æ“ä½œæˆåŠŸå®Œæˆ` | `æ•°æ®æŸ¥è¯¢æˆåŠŸ` |
| `201` | `åˆ›å»ºæˆåŠŸ` | `èµ„æºåˆ›å»ºæˆåŠŸ` | `ç”¨æˆ·æ³¨å†ŒæˆåŠŸ` |
| `400` | `å®¢æˆ·ç«¯é”™è¯¯` | `å‚æ•°é”™è¯¯ã€æ ¡éªŒå¤±è´¥` | `é‚®ç®±æ ¼å¼ä¸æ­£ç¡®` |
| `401` | `æœªæˆæƒ` | `éœ€è¦ç™»å½•` | `è¯·å…ˆç™»å½•` |
| `403` | `ç¦æ­¢è®¿é—®` | `æƒé™ä¸è¶³` | `æ— æ“ä½œæƒé™` |
| `404` | `èµ„æºä¸å­˜åœ¨` | `æ‰¾ä¸åˆ°æ•°æ®` | `ç”¨æˆ·ä¸å­˜åœ¨` |
| `500` | `æœåŠ¡å™¨é”™è¯¯` | `ç³»ç»Ÿå†…éƒ¨é”™è¯¯` | `æ•°æ®åº“è¿æ¥å¤±è´¥` |

**çŠ¶æ€ç è®¾ç½®ç¤ºä¾‹ï¼š**

```java
@RequestMapping("/user/{id}")
@ResponseBody
public ResponseEntity<ResponseResult<User>> getUser(@PathVariable Long id) {
    try {
        User user = userService.getUserById(id);
        if (user != null) {
            // 200 æˆåŠŸ
            return ResponseEntity.ok(ResponseResult.success("æŸ¥è¯¢æˆåŠŸ", user));
        } else {
            // 404 æœªæ‰¾åˆ°
            return ResponseEntity.status(HttpStatus.NOT_FOUND)
                    .body(ResponseResult.error("ç”¨æˆ·ä¸å­˜åœ¨"));
        }
    } catch (Exception e) {
        // 500 æœåŠ¡å™¨é”™è¯¯
        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)
                .body(ResponseResult.error("ç³»ç»Ÿé”™è¯¯"));
    }
}
```

> ğŸ“‹ **è¿”å›æ•°æ®æ£€æŸ¥æ¸…å•**ï¼š
> - âœ… ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼
> - âœ… è®¾ç½®åˆé€‚çš„HTTPçŠ¶æ€ç   
> - âœ… æä¾›å‹å¥½çš„æç¤ºä¿¡æ¯
> - âœ… è¿”å›å‰ç«¯éœ€è¦çš„æ•°æ®
> - âœ… å¤„ç†ç©ºæ•°æ®æƒ…å†µ

---

## 8. âš ï¸ å¼‚å¸¸å¤„ç†æœºåˆ¶


### 8.1 å¼‚å¸¸å¤„ç†çš„é‡è¦æ€§


**æ²¡æœ‰å¼‚å¸¸å¤„ç†çš„åæœï¼š**

```
ç”¨æˆ·æ“ä½œï¼šåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„ç”¨æˆ·
æ²¡æœ‰å¼‚å¸¸å¤„ç†ï¼šç³»ç»ŸæŠ¥é”™ï¼Œé¡µé¢ç™½å±ï¼Œç”¨æˆ·æ‡µäº†
æœ‰å¼‚å¸¸å¤„ç†ï¼šå‹å¥½æç¤º"ç”¨æˆ·ä¸å­˜åœ¨ï¼Œæ— æ³•åˆ é™¤"
```

**å¼‚å¸¸å¤„ç†å°±åƒåŒ»é™¢çš„åˆ†è¯Šç³»ç»Ÿï¼š**

```
åŒ»é™¢åˆ†è¯Šï¼š                        å¼‚å¸¸å¤„ç†ï¼š
1. æ ¹æ®ç—‡çŠ¶åˆ†ç§‘å®¤              â†’ 1. æ ¹æ®å¼‚å¸¸ç±»å‹åˆ†ç±»å¤„ç†
2. è½»å¾®é—®é¢˜é—¨è¯Šå¤„ç†            â†’ 2. ä¸šåŠ¡å¼‚å¸¸è¿”å›å‹å¥½æç¤º
3. ä¸¥é‡é—®é¢˜ä½é™¢æ²»ç–—            â†’ 3. ç³»ç»Ÿå¼‚å¸¸è®°å½•æ—¥å¿—æŠ¥è­¦
4. ç»™æ‚£è€…æ˜ç¡®çš„å¤„ç†æ–¹æ¡ˆ        â†’ 4. ç»™ç”¨æˆ·æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯
```

### 8.2 å¼‚å¸¸çš„åˆ†ç±»å’Œå¤„ç†ç­–ç•¥


**å¼‚å¸¸åˆ†ç±»ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ‰€æœ‰å¼‚å¸¸        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ä¸šåŠ¡å¼‚å¸¸          â”‚ â† å¯é¢„æœŸçš„ï¼Œç»™ç”¨æˆ·å‹å¥½æç¤º
â”‚  - ç”¨æˆ·ä¸å­˜åœ¨        â”‚
â”‚  - ä½™é¢ä¸è¶³         â”‚  
â”‚  - æƒé™ä¸å¤Ÿ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç³»ç»Ÿå¼‚å¸¸          â”‚ â† ä¸å¯é¢„æœŸçš„ï¼Œè®°å½•æ—¥å¿—
â”‚  - æ•°æ®åº“è¿æ¥å¤±è´¥    â”‚
â”‚  - ç½‘ç»œè¶…æ—¶         â”‚
â”‚  - ä»£ç é€»è¾‘é”™è¯¯      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 å…¨å±€å¼‚å¸¸å¤„ç†å™¨


**åˆ›å»ºå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼š**

```java
@ControllerAdvice  // å…¨å±€å¼‚å¸¸å¤„ç†å™¨
public class GlobalExceptionHandler {
    
    // å¤„ç†ä¸šåŠ¡å¼‚å¸¸
    @ExceptionHandler(BusinessException.class)
    @ResponseBody
    public ResponseResult<Void> handleBusinessException(BusinessException e) {
        return ResponseResult.error(e.getMessage());
    }
    
    // å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸
    @ExceptionHandler(MethodArgumentNotValidException.class)
    @ResponseBody
    public ResponseResult<Void> handleValidException(MethodArgumentNotValidException e) {
        String errorMsg = e.getBindingResult().getFieldError().getDefaultMessage();
        return ResponseResult.error("å‚æ•°æ ¡éªŒå¤±è´¥ï¼š" + errorMsg);
    }
    
    // å¤„ç†ç³»ç»Ÿå¼‚å¸¸
    @ExceptionHandler(Exception.class)
    @ResponseBody
    public ResponseResult<Void> handleSystemException(Exception e) {
        // è®°å½•é”™è¯¯æ—¥å¿—
        logger.error("ç³»ç»Ÿå¼‚å¸¸ï¼š", e);
        return ResponseResult.error("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

**è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ï¼š**

```java
// è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±»
public class BusinessException extends RuntimeException {
    private Integer code;
    
    public BusinessException(String message) {
        super(message);
        this.code = 400;
    }
    
    public BusinessException(Integer code, String message) {
        super(message);
        this.code = code;
    }
}

// åœ¨Serviceä¸­æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
@Service
public class UserService {
    
    public User getUserById(Long id) {
        User user = userDao.selectById(id);
        if (user == null) {
            throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        return user;
    }
}
```

### 8.4 Controllerå±‚å¼‚å¸¸å¤„ç†


**æ–¹æ³•çº§å¼‚å¸¸å¤„ç†ï¼š**

```java
@Controller
public class UserController {
    
    @RequestMapping("/user/transfer")
    @ResponseBody
    public ResponseResult<Void> transferMoney(
            @RequestParam Long fromUserId,
            @RequestParam Long toUserId, 
            @RequestParam BigDecimal amount) {
        
        try {
            userService.transferMoney(fromUserId, toUserId, amount);
            return ResponseResult.success("è½¬è´¦æˆåŠŸ", null);
            
        } catch (InsufficientBalanceException e) {
            return ResponseResult.error("ä½™é¢ä¸è¶³");
            
        } catch (UserNotFoundException e) {
            return ResponseResult.error("ç”¨æˆ·ä¸å­˜åœ¨");
            
        } catch (Exception e) {
            logger.error("è½¬è´¦å¼‚å¸¸ï¼š", e);
            return ResponseResult.error("è½¬è´¦å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
        }
    }
}
```

**å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µï¼š**

| å¼‚å¸¸ç±»å‹ | **å¤„ç†ç­–ç•¥** | **è¿”å›ç»™ç”¨æˆ·** | **åå°å¤„ç†** |
|----------|-------------|---------------|-------------|
| `ä¸šåŠ¡å¼‚å¸¸` | `å‹å¥½æç¤º` | `å…·ä½“é”™è¯¯ä¿¡æ¯` | `å¯é€‰è®°å½•æ—¥å¿—` |
| `å‚æ•°å¼‚å¸¸` | `æ ¡éªŒæç¤º` | `å‚æ•°é”™è¯¯è¯¦æƒ…` | `è®°å½•è­¦å‘Šæ—¥å¿—` |
| `ç³»ç»Ÿå¼‚å¸¸` | `é€šç”¨æç¤º` | `"ç³»ç»Ÿç¹å¿™"` | `è¯¦ç»†é”™è¯¯æ—¥å¿—+å‘Šè­¦` |
| `ç½‘ç»œå¼‚å¸¸` | `é‡è¯•æç¤º` | `"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·é‡è¯•"` | `ç›‘æ§å‘Šè­¦` |

> ğŸ›¡ï¸ **å®‰å…¨æé†’**ï¼šä¸è¦æŠŠç³»ç»Ÿå†…éƒ¨é”™è¯¯ç›´æ¥æš´éœ²ç»™ç”¨æˆ·ï¼Œè¿™å¯èƒ½æ³„éœ²ç³»ç»Ÿä¿¡æ¯è¢«æ¶æ„åˆ©ç”¨

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ è¡¨ç°å±‚æœ¬è´¨ï¼šWebåº”ç”¨çš„"é—¨é¢"ï¼Œè´Ÿè´£æ¥å¾…å’Œåè°ƒ
ğŸ”Œ å…­å¤§æ ¸å¿ƒèŒè´£ï¼šæ¥æ”¶â†’ç»‘å®šâ†’æ ¡éªŒâ†’è°ƒç”¨â†’è¿”å›â†’å¼‚å¸¸å¤„ç†  
ğŸ“ å‚æ•°ç»‘å®šï¼šHTTPå‚æ•°è½¬Javaå¯¹è±¡çš„"ç¿»è¯‘å®˜"
âœ…æ•°æ®æ ¡éªŒï¼šè¿›å…¥ç³»ç»Ÿå‰çš„"å®‰æ£€"
ğŸ”„ ä¸šåŠ¡è°ƒç”¨ï¼šControlleråªè´Ÿè´£"ä¼ è¯"ä¸è´Ÿè´£"å¹²æ´»"
ğŸ“¤ ç»“æœè¿”å›ï¼šç»Ÿä¸€æ ¼å¼ï¼Œå‹å¥½æç¤º
âš ï¸ å¼‚å¸¸å¤„ç†ï¼šä¼˜é›…å¤„ç†é”™è¯¯ï¼Œä¿æŠ¤ç³»ç»Ÿç¨³å®š
```

### 9.2 å…³é”®è®¾è®¡åŸåˆ™


**ğŸ”¹ å•ä¸€èŒè´£åŸåˆ™**
- Controlleråªè´Ÿè´£æ§åˆ¶æµç¨‹ï¼Œä¸å¤„ç†ä¸šåŠ¡é€»è¾‘
- æ¯ä¸ªæ–¹æ³•åªå¤„ç†ä¸€ç§ç±»å‹çš„è¯·æ±‚
- ä¿æŒæ–¹æ³•ç®€æ´ï¼Œé¿å…è¿‡äºå¤æ‚

**ğŸ”¹ ç»Ÿä¸€æ ‡å‡†åŸåˆ™**  
- ç»Ÿä¸€çš„è¯·æ±‚æ˜ å°„è§„èŒƒ
- ç»Ÿä¸€çš„è¿”å›ç»“æœæ ¼å¼
- ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- ç»Ÿä¸€çš„å‚æ•°æ ¡éªŒè§„åˆ™

**ğŸ”¹ ç”¨æˆ·ä½“éªŒåŸåˆ™**
- å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
- å¿«é€Ÿçš„å“åº”å¤„ç†
- æ¸…æ™°çš„æ¥å£æ–‡æ¡£
- åˆç†çš„HTTPçŠ¶æ€ç 

### 9.3 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


**é—®é¢˜1ï¼šå‚æ•°ç»‘å®šå¤±è´¥**
```
åŸå› ï¼šå‰ç«¯å‚æ•°åå’Œåç«¯å±æ€§åä¸åŒ¹é…
è§£å†³ï¼šä½¿ç”¨@RequestParamæŒ‡å®šå‚æ•°åï¼Œæˆ–ç»Ÿä¸€å‘½åè§„èŒƒ
```

**é—®é¢˜2ï¼šæ•°æ®æ ¡éªŒä¸ç”Ÿæ•ˆ**
```
åŸå› ï¼šå¿˜è®°æ·»åŠ @Validæ³¨è§£æˆ–BindingResultå‚æ•°
è§£å†³ï¼šè®°ä½æ ¡éªŒä¸‰è¦ç´ ï¼šå®ä½“ç±»æ³¨è§£+@Valid+BindingResult
```

**é—®é¢˜3ï¼šå¼‚å¸¸æ²¡æœ‰è¢«å…¨å±€å¤„ç†**
```
åŸå› ï¼šå¼‚å¸¸ç±»å‹ä¸åŒ¹é…æˆ–å…¨å±€å¤„ç†å™¨é…ç½®é—®é¢˜
è§£å†³ï¼šæ£€æŸ¥@ControllerAdviceé…ç½®å’Œå¼‚å¸¸ç±»å‹åŒ¹é…
```

**é—®é¢˜4ï¼šè¿”å›æ•°æ®æ ¼å¼æ··ä¹±**
```
åŸå› ï¼šæ²¡æœ‰ç»Ÿä¸€çš„è¿”å›æ ¼å¼è§„èŒƒ
è§£å†³ï¼šå®šä¹‰ç»Ÿä¸€çš„ResponseResultç±»å¹¶å¼ºåˆ¶ä½¿ç”¨
```

### 9.4 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ—ï¸ è®¾è®¡Controllerçš„æ­¥éª¤**ï¼š
1. **ç¡®å®šè¯·æ±‚è·¯å¾„**ï¼šéµå¾ªRESTfulè§„èŒƒ
2. **è®¾è®¡å‚æ•°æ¥æ”¶**ï¼šé€‰æ‹©åˆé€‚çš„ç»‘å®šæ–¹å¼
3. **æ·»åŠ å‚æ•°æ ¡éªŒ**ï¼šä¿è¯æ•°æ®æœ‰æ•ˆæ€§
4. **è°ƒç”¨ä¸šåŠ¡é€»è¾‘**ï¼šå§”æ‰˜ç»™Serviceå¤„ç†
5. **å¤„ç†è¿”å›ç»“æœ**ï¼šç»Ÿä¸€æ ¼å¼è¿”å›
6. **è€ƒè™‘å¼‚å¸¸æƒ…å†µ**ï¼šå®Œå–„å¼‚å¸¸å¤„ç†

**ğŸ”§ Controllerç¼–ç è§„èŒƒ**ï¼š
- ç±»åä»¥Controllerç»“å°¾
- æ–¹æ³•åè§åçŸ¥æ„
- åˆç†ä½¿ç”¨HTTPæ–¹æ³•
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ä¿æŒä»£ç ç®€æ´

**ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
- é¿å…åœ¨Controllerä¸­è¿›è¡Œè€—æ—¶æ“ä½œ
- åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
- ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤æŸ¥è¯¢
- è€ƒè™‘å¼‚æ­¥å¤„ç†é•¿æ—¶é—´æ“ä½œ

### 9.5 å­¦ä¹ æ£€éªŒæ¸…å•


**åŸºç¡€æ¦‚å¿µç†è§£ï¼š**
- [ ] ç†è§£è¡¨ç°å±‚åœ¨ä¸‰å±‚æ¶æ„ä¸­çš„ä½ç½®å’Œä½œç”¨
- [ ] æŒæ¡Controllerçš„å…­å¤§æ ¸å¿ƒèŒè´£
- [ ] ç†è§£MVCæ¨¡å¼ä¸­Controllerçš„è§’è‰²

**å®é™…æŠ€èƒ½æŒæ¡ï¼š**
- [ ] èƒ½å¤Ÿåˆ›å»ºåŸºæœ¬çš„Controllerç±»
- [ ] ç†Ÿç»ƒä½¿ç”¨å„ç§å‚æ•°ç»‘å®šæ–¹å¼
- [ ] èƒ½å¤Ÿæ·»åŠ å’Œè‡ªå®šä¹‰æ•°æ®æ ¡éªŒè§„åˆ™
- [ ] æŒæ¡ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- [ ] èƒ½å¤Ÿè®¾è®¡ç»Ÿä¸€çš„è¿”å›ç»“æœæ ¼å¼

**æœ€ä½³å®è·µåº”ç”¨ï¼š**
- [ ] éµå¾ªRESTfulè®¾è®¡åŸåˆ™
- [ ] ä¿æŒControlleræ–¹æ³•çš„ç®€æ´æ€§
- [ ] åˆç†åˆ’åˆ†èŒè´£è¾¹ç•Œ
- [ ] é‡è§†ç”¨æˆ·ä½“éªŒå’Œé”™è¯¯å¤„ç†

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- è¡¨ç°å±‚æ˜¯é—¨é¢ï¼ŒèŒè´£åˆ†å·¥è¦æ˜ç¡®
- æ¥æ”¶ç»‘å®šåŠ æ ¡éªŒï¼Œè°ƒç”¨ä¸šåŠ¡è¿”ç»“æœ  
- å¼‚å¸¸å¤„ç†è¦å®Œå–„ï¼Œç”¨æˆ·ä½“éªŒæœ€é‡è¦
- ç»Ÿä¸€æ ‡å‡†æ˜“ç»´æŠ¤ï¼Œç®€æ´æ¸…æ™°æ˜¯ç‹é“