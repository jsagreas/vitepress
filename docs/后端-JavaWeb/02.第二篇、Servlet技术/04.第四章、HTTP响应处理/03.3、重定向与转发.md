---
title: 3ã€é‡å®šå‘ä¸è½¬å‘
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯é‡å®šå‘å’Œè½¬å‘](#1-ä»€ä¹ˆæ˜¯é‡å®šå‘å’Œè½¬å‘)
2. [é‡å®šå‘è¯¦è§£](#2-é‡å®šå‘è¯¦è§£)
3. [è½¬å‘è¯¦è§£](#3-è½¬å‘è¯¦è§£)
4. [é‡å®šå‘vsè½¬å‘å¯¹æ¯”](#4-é‡å®šå‘vsè½¬å‘å¯¹æ¯”)
5. [è·¯å¾„é—®é¢˜è¯¦è§£](#5-è·¯å¾„é—®é¢˜è¯¦è§£)
6. [æ•°æ®ä¼ é€’æ–¹å¼](#6-æ•°æ®ä¼ é€’æ–¹å¼)
7. [ä½¿ç”¨åœºæ™¯é€‰æ‹©](#7-ä½¿ç”¨åœºæ™¯é€‰æ‹©)
8. [å®é™…åº”ç”¨ç¤ºä¾‹](#8-å®é™…åº”ç”¨ç¤ºä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ä»€ä¹ˆæ˜¯é‡å®šå‘å’Œè½¬å‘


### 1.1 ç”Ÿæ´»ä¸­çš„ç±»æ¯”


**é‡å®šå‘å°±åƒæ¢ä¹˜åœ°é“**ï¼š
```
ä½ è¦ä»Aç«™åˆ°Cç«™ï¼Œä½†æ²¡æœ‰ç›´è¾¾çº¿è·¯
åœ°é“å·¥ä½œäººå‘˜å‘Šè¯‰ä½ ï¼š"å»Bç«™æ¢ä¹˜å§ï¼"
ä½ éœ€è¦è‡ªå·±é‡æ–°ä¹°ç¥¨ï¼Œèµ°åˆ°Bç«™å†åå¦ä¸€ç­è½¦åˆ°Cç«™
```

**è½¬å‘å°±åƒå†…éƒ¨è°ƒåŠ¨**ï¼š
```
ä½ åœ¨å…¬å¸æ‰¾å¼ ç»ç†åŠäº‹
å‰å°è¯´ï¼š"å¼ ç»ç†åœ¨ä¼šè®®å®¤ï¼Œæˆ‘å¸®ä½ è½¬æ¥è¿‡å»"
ä½ ä¸éœ€è¦é‡æ–°ç™»è®°ï¼Œå‰å°ç›´æ¥æŠŠä½ çš„éœ€æ±‚è½¬ç»™å¼ ç»ç†
```

### 1.2 Webåº”ç”¨ä¸­çš„å«ä¹‰


**ğŸ”¸ é‡å®šå‘ï¼ˆRedirectï¼‰**
- æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼š"ä½ è¦çš„èµ„æºåœ¨å¦ä¸€ä¸ªåœ°å€ï¼Œä½ è‡ªå·±å»æ‰¾å§"
- æµè§ˆå™¨æ”¶åˆ°æŒ‡ä»¤åï¼Œ**è‡ªåŠ¨å‘èµ·æ–°çš„è¯·æ±‚**åˆ°æ–°åœ°å€
- åœ°å€æ ä¼šæ˜¾ç¤ºæœ€ç»ˆçš„URL

**ğŸ”¸ è½¬å‘ï¼ˆForwardï¼‰**
- æœåŠ¡å™¨å†…éƒ¨è¯´ï¼š"æˆ‘å¸®ä½ å¤„ç†ï¼ŒæŠŠè¯·æ±‚äº¤ç»™å¦ä¸€ä¸ªç»„ä»¶"
- åœ¨æœåŠ¡å™¨å†…éƒ¨å®Œæˆï¼Œ**æµè§ˆå™¨æ¯«ä¸çŸ¥æƒ…**
- åœ°å€æ URLä¿æŒä¸å˜

### 1.3 æ ¸å¿ƒåŒºåˆ«ä¸€è§ˆ


```
è¯·æ±‚æµç¨‹å¯¹æ¯”ï¼š

é‡å®šå‘ï¼š
æµè§ˆå™¨ â†’ æœåŠ¡å™¨A â†’ [å‘Šè¯‰æµè§ˆå™¨å»æ‰¾B] â†’ æµè§ˆå™¨ â†’ æœåŠ¡å™¨B

è½¬å‘ï¼š
æµè§ˆå™¨ â†’ æœåŠ¡å™¨A â†’ [å†…éƒ¨æ‰¾åˆ°Bå¤„ç†] â†’ è¿”å›ç»“æœç»™æµè§ˆå™¨
```

---

## 2. ğŸ”„ é‡å®šå‘è¯¦è§£


### 2.1 é‡å®šå‘çš„å·¥ä½œåŸç†


**ğŸ”¸ åº•å±‚HTTPæœºåˆ¶**
```
1. å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°ServletA
2. ServletAå¤„ç†åï¼Œè®¾ç½®å“åº”çŠ¶æ€ç ä¸º302
3. ServletAåœ¨å“åº”å¤´ä¸­è®¾ç½®Locationå­—æ®µæŒ‡å‘æ–°URL
4. æµè§ˆå™¨æ”¶åˆ°302å“åº”ï¼Œè‡ªåŠ¨å‘æ–°URLå‘èµ·è¯·æ±‚
5. æ–°çš„Servletå¤„ç†è¯·æ±‚å¹¶è¿”å›æœ€ç»ˆç»“æœ
```

**ğŸ”¸ HTTPå“åº”ç¤ºä¾‹**
```
HTTP/1.1 302 Found
Location: http://localhost:8080/myapp/success.jsp
Content-Length: 0
```

### 2.2 sendRedirect()æ–¹æ³•è¯¦è§£


**åŸºæœ¬è¯­æ³•**ï¼š
```java
response.sendRedirect(String location)
```

**ğŸ”¸ ç›¸å¯¹è·¯å¾„é‡å®šå‘**
```java
@WebServlet("/login")
public class LoginServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, 
                         HttpServletResponse response) throws ServletException, IOException {
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        
        // ç®€å•éªŒè¯é€»è¾‘
        if ("admin".equals(username) && "123456".equals(password)) {
            // ç™»å½•æˆåŠŸï¼Œé‡å®šå‘åˆ°é¦–é¡µ
            response.sendRedirect("home.jsp");
        } else {
            // ç™»å½•å¤±è´¥ï¼Œé‡å®šå‘å›ç™»å½•é¡µ
            response.sendRedirect("login.jsp?error=1");
        }
    }
}
```

**ğŸ”¸ ç»å¯¹è·¯å¾„é‡å®šå‘**
```java
// é‡å®šå‘åˆ°å¤–éƒ¨ç½‘ç«™
response.sendRedirect("https://www.baidu.com");

// é‡å®šå‘åˆ°é¡¹ç›®å†…çš„ç»å¯¹è·¯å¾„
response.sendRedirect(request.getContextPath() + "/user/profile");
```

### 2.3 é‡å®šå‘çš„ç‰¹ç‚¹


**âœ… ä¼˜ç‚¹**ï¼š
- **URLåœ°å€å˜åŒ–**ï¼šç”¨æˆ·èƒ½çœ‹åˆ°æœ€ç»ˆçš„é¡µé¢åœ°å€
- **åˆ·æ–°å‹å¥½**ï¼šåˆ·æ–°é¡µé¢ä¸ä¼šé‡å¤æäº¤è¡¨å•
- **è·¨åŸŸæ”¯æŒ**ï¼šå¯ä»¥é‡å®šå‘åˆ°å…¶ä»–ç½‘ç«™
- **æœç´¢å¼•æ“å‹å¥½**ï¼šæœç´¢å¼•æ“èƒ½æ­£ç¡®ç†è§£é¡µé¢è·³è½¬

**âŒ ç¼ºç‚¹**ï¼š
- **ä¸¤æ¬¡è¯·æ±‚**ï¼šç½‘ç»œå¼€é”€å¤§ï¼Œå“åº”è¾ƒæ…¢
- **æ•°æ®ä¸¢å¤±**ï¼šrequestä¸­çš„æ•°æ®æ— æ³•ä¼ é€’
- **é™åˆ¶å¤š**ï¼šä¸èƒ½ä¼ é€’å¤æ‚å¯¹è±¡

---

## 3. â¡ï¸ è½¬å‘è¯¦è§£


### 3.1 è½¬å‘çš„å·¥ä½œåŸç†


**ğŸ”¸ å†…éƒ¨å¤„ç†æœºåˆ¶**
```
æœåŠ¡å™¨å†…éƒ¨æµç¨‹ï¼š
1. ServletAæ¥æ”¶åˆ°è¯·æ±‚
2. ServletAè·å–RequestDispatcherå¯¹è±¡
3. ServletAè°ƒç”¨forward()æ–¹æ³•
4. è¯·æ±‚åœ¨æœåŠ¡å™¨å†…éƒ¨è½¬ç»™ServletB
5. ServletBå¤„ç†è¯·æ±‚å¹¶ç”Ÿæˆå“åº”
6. å“åº”ç›´æ¥è¿”å›ç»™æµè§ˆå™¨ï¼ˆåœ°å€æ ä¸å˜ï¼‰
```

### 2.2 RequestDispatcher.forward()è¯¦è§£


**è·å–RequestDispatcherçš„æ–¹å¼**ï¼š
```java
// æ–¹å¼1ï¼šé€šè¿‡requestå¯¹è±¡è·å–
RequestDispatcher dispatcher = request.getRequestDispatcher("/target.jsp");

// æ–¹å¼2ï¼šé€šè¿‡ServletContextè·å–
RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/target.jsp");
```

**ğŸ”¸ åŸºæœ¬è½¬å‘ç¤ºä¾‹**
```java
@WebServlet("/process")
public class ProcessServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, 
                         HttpServletResponse response) throws ServletException, IOException {
        
        // ä¸šåŠ¡é€»è¾‘å¤„ç†
        String action = request.getParameter("action");
        
        if ("calculate".equals(action)) {
            // æ‰§è¡Œè®¡ç®—é€»è¾‘
            int result = doCalculation(request);
            
            // å°†ç»“æœå­˜å‚¨åˆ°requestä¸­
            request.setAttribute("result", result);
            request.setAttribute("message", "è®¡ç®—å®Œæˆ");
            
            // è½¬å‘åˆ°ç»“æœé¡µé¢æ˜¾ç¤º
            RequestDispatcher dispatcher = request.getRequestDispatcher("/result.jsp");
            dispatcher.forward(request, response);
            
        } else {
            // æœªçŸ¥æ“ä½œï¼Œè½¬å‘åˆ°é”™è¯¯é¡µé¢
            request.setAttribute("error", "ä¸æ”¯æŒçš„æ“ä½œç±»å‹");
            request.getRequestDispatcher("/error.jsp").forward(request, response);
        }
    }
    
    private int doCalculation(HttpServletRequest request) {
        // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—é€»è¾‘
        return 42;
    }
}
```

### 3.3 è½¬å‘çš„ç‰¹ç‚¹


**âœ… ä¼˜ç‚¹**ï¼š
- **ä¸€æ¬¡è¯·æ±‚**ï¼šæœåŠ¡å™¨å†…éƒ¨å¤„ç†ï¼Œæ•ˆç‡é«˜
- **æ•°æ®å…±äº«**ï¼šrequestå’Œresponseå¯¹è±¡å®Œå…¨å…±äº«
- **éšè—å®ç°**ï¼šç”¨æˆ·ä¸çŸ¥é“å†…éƒ¨çš„å¤„ç†æµç¨‹
- **æ€§èƒ½å¥½**ï¼šé¿å…äº†ç½‘ç»œå¾€è¿”å¼€é”€

**âŒ ç¼ºç‚¹**ï¼š
- **URLä¸å˜**ï¼šç”¨æˆ·çœ‹ä¸åˆ°çœŸå®çš„å¤„ç†é¡µé¢
- **åˆ·æ–°é‡å¤**ï¼šåˆ·æ–°å¯èƒ½å¯¼è‡´é‡å¤æäº¤
- **åŒåŸŸé™åˆ¶**ï¼šåªèƒ½è½¬å‘åˆ°åŒä¸€Webåº”ç”¨å†…
- **å“åº”é™åˆ¶**ï¼šè½¬å‘å‰ä¸èƒ½æœ‰å“åº”è¾“å‡º

---

## 4. âš–ï¸ é‡å®šå‘vsè½¬å‘å¯¹æ¯”


### 4.1 æ ¸å¿ƒå·®å¼‚å¯¹æ¯”è¡¨


| ç‰¹å¾ | **é‡å®šå‘ï¼ˆRedirectï¼‰** | **è½¬å‘ï¼ˆForwardï¼‰** |
|------|----------------------|-------------------|
| ğŸŒ **è¯·æ±‚æ¬¡æ•°** | `2æ¬¡ï¼ˆå®¢æˆ·ç«¯å‘èµ·2æ¬¡è¯·æ±‚ï¼‰` | `1æ¬¡ï¼ˆæœåŠ¡å™¨å†…éƒ¨å¤„ç†ï¼‰` |
| ğŸ“ **URLå˜åŒ–** | `åœ°å€æ æ˜¾ç¤ºæœ€ç»ˆURL` | `åœ°å€æ ä¿æŒåŸå§‹URL` |
| ğŸ“¦ **æ•°æ®ä¼ é€’** | `requestæ•°æ®ä¸¢å¤±` | `requestæ•°æ®ä¿æŒ` |
| ğŸš€ **æ‰§è¡Œæ•ˆç‡** | `è¾ƒä½ï¼ˆç½‘ç»œå¾€è¿”ï¼‰` | `è¾ƒé«˜ï¼ˆå†…éƒ¨å¤„ç†ï¼‰` |
| ğŸŒ **è·¨åŸŸèƒ½åŠ›** | `æ”¯æŒè·¨åŸŸè·³è½¬` | `ä»…é™åŒä¸€åº”ç”¨` |
| ğŸ”„ **åˆ·æ–°å½±å“** | `åˆ·æ–°è®¿é—®æ–°é¡µé¢` | `åˆ·æ–°å¯èƒ½é‡å¤æäº¤` |

### 4.2 è¯·æ±‚æµç¨‹å¯¹æ¯”å›¾


```
é‡å®šå‘æµç¨‹ï¼š
å®¢æˆ·ç«¯                    æœåŠ¡å™¨
   |                       |
   |--[1] è¯·æ±‚ç™»å½•---------->| LoginServlet
   |                       |--å¤„ç†é€»è¾‘
   |<-[2] 302å“åº”+Location--|
   |                       |
   |--[3] æ–°è¯·æ±‚------------>| home.jsp
   |<-[4] æœ€ç»ˆå“åº”-----------|


è½¬å‘æµç¨‹ï¼š
å®¢æˆ·ç«¯                    æœåŠ¡å™¨
   |                       |
   |--[1] è¯·æ±‚å¤„ç†---------->| ProcessServlet
   |                       |--å†…éƒ¨è½¬å‘--> result.jsp
   |<-[2] æœ€ç»ˆå“åº”-----------|
```

### 4.3 ä½¿ç”¨åœºæ™¯å¯¹æ¯”


**ğŸ”¸ é‡å®šå‘é€‚åˆçš„åœºæ™¯**ï¼š
```
âœ… ç™»å½•æˆåŠŸè·³è½¬é¦–é¡µ
âœ… è¡¨å•æäº¤åé¿å…é‡å¤æäº¤
âœ… è®¿é—®æƒé™æ£€æŸ¥åè·³è½¬
âœ… é¡µé¢æ°¸ä¹…è¿ç§»
âœ… è·³è½¬åˆ°å¤–éƒ¨ç½‘ç«™
```

**ğŸ”¸ è½¬å‘é€‚åˆçš„åœºæ™¯**ï¼š
```
âœ… æ•°æ®å¤„ç†åæ˜¾ç¤ºç»“æœ
âœ… ç”¨æˆ·è¾“å…¥éªŒè¯å¤±è´¥
âœ… å¤æ‚ä¸šåŠ¡é€»è¾‘å¤„ç†
âœ… MVCæ¨¡å¼ä¸­æ§åˆ¶å™¨åˆ°è§†å›¾
âœ… å†…éƒ¨é¡µé¢åŒ…å«
```

---

## 5. ğŸ“‚ è·¯å¾„é—®é¢˜è¯¦è§£


### 5.1 ç›¸å¯¹è·¯å¾„vsç»å¯¹è·¯å¾„


**ğŸ”¸ ç›¸å¯¹è·¯å¾„ç‰¹ç‚¹**
```java
// ç›¸å¯¹äºå½“å‰Servletçš„è·¯å¾„
response.sendRedirect("success.jsp");           // åŒçº§ç›®å½•
response.sendRedirect("../admin/dashboard.jsp"); // ä¸Šçº§ç›®å½•
response.sendRedirect("user/profile.jsp");      // ä¸‹çº§ç›®å½•
```

**ğŸ”¸ ç»å¯¹è·¯å¾„ç‰¹ç‚¹**
```java
// ä»é¡¹ç›®æ ¹è·¯å¾„å¼€å§‹
response.sendRedirect("/myproject/user/profile.jsp");

// ä½¿ç”¨ä¸Šä¸‹æ–‡è·¯å¾„ï¼ˆæ¨èï¼‰
String contextPath = request.getContextPath();
response.sendRedirect(contextPath + "/user/profile.jsp");
```

### 5.2 è·¯å¾„è§£æè§„åˆ™è¯¦è§£


**é‡å®šå‘è·¯å¾„è§£æ**ï¼š
```
å½“å‰URL: http://localhost:8080/myapp/user/login

ç›¸å¯¹è·¯å¾„ "success.jsp":
â†’ http://localhost:8080/myapp/user/success.jsp

ç›¸å¯¹è·¯å¾„ "../admin/panel.jsp":
â†’ http://localhost:8080/myapp/admin/panel.jsp

ç»å¯¹è·¯å¾„ "/myapp/home.jsp":
â†’ http://localhost:8080/myapp/home.jsp
```

**è½¬å‘è·¯å¾„è§£æ**ï¼š
```java
// è½¬å‘è·¯å¾„éƒ½æ˜¯ç›¸å¯¹äºWebåº”ç”¨æ ¹ç›®å½•
request.getRequestDispatcher("/WEB-INF/views/success.jsp");
// å®é™…æŒ‡å‘ï¼š/myapp/WEB-INF/views/success.jsp
```

### 5.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ”¸ æ¨èçš„è·¯å¾„å†™æ³•**
```java
public class PathUtils {
    
    // é‡å®šå‘åˆ°é¡¹ç›®å†…é¡µé¢
    public static void redirectToPage(HttpServletRequest request, 
                                    HttpServletResponse response, 
                                    String page) throws IOException {
        String contextPath = request.getContextPath();
        response.sendRedirect(contextPath + "/" + page);
    }
    
    // è½¬å‘åˆ°JSPé¡µé¢
    public static void forwardToJSP(HttpServletRequest request, 
                                   HttpServletResponse response, 
                                   String jsp) throws ServletException, IOException {
        request.getRequestDispatcher("/WEB-INF/views/" + jsp)
               .forward(request, response);
    }
}
```

---

## 6. ğŸ“Š æ•°æ®ä¼ é€’æ–¹å¼


### 6.1 é‡å®šå‘ä¸­çš„æ•°æ®ä¼ é€’


**ğŸ”¸ URLå‚æ•°ä¼ é€’**
```java
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, 
                         HttpServletResponse response) throws IOException {
        
        String username = request.getParameter("username");
        boolean success = registerUser(username);
        
        if (success) {
            // é€šè¿‡URLå‚æ•°ä¼ é€’æˆåŠŸæ¶ˆæ¯
            response.sendRedirect("welcome.jsp?user=" + 
                                URLEncoder.encode(username, "UTF-8") + 
                                "&status=success");
        } else {
            // ä¼ é€’é”™è¯¯ä¿¡æ¯
            response.sendRedirect("register.jsp?error=" + 
                                URLEncoder.encode("ç”¨æˆ·åå·²å­˜åœ¨", "UTF-8"));
        }
    }
}
```

**ğŸ”¸ Sessionä¼ é€’æ•°æ®**
```java
// å­˜å‚¨åˆ°Session
HttpSession session = request.getSession();
session.setAttribute("message", "æ³¨å†ŒæˆåŠŸï¼");
session.setAttribute("user", userInfo);

// é‡å®šå‘
response.sendRedirect("dashboard.jsp");

// åœ¨ç›®æ ‡é¡µé¢è·å–
// String message = (String) session.getAttribute("message");
```

### 6.2 è½¬å‘ä¸­çš„æ•°æ®ä¼ é€’


**ğŸ”¸ Requestå±æ€§ä¼ é€’**
```java
@WebServlet("/search")
public class SearchServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) throws ServletException, IOException {
        
        String keyword = request.getParameter("keyword");
        
        // æ‰§è¡Œæœç´¢é€»è¾‘
        List<Product> products = searchProducts(keyword);
        int totalCount = products.size();
        
        // å°†æ•°æ®å­˜å‚¨åˆ°requestä¸­
        request.setAttribute("products", products);
        request.setAttribute("keyword", keyword);
        request.setAttribute("totalCount", totalCount);
        request.setAttribute("searchTime", new Date());
        
        // è½¬å‘åˆ°ç»“æœé¡µé¢
        request.getRequestDispatcher("/WEB-INF/views/search-result.jsp")
               .forward(request, response);
    }
}
```

### 6.3 æ•°æ®ä¼ é€’æœ€ä½³å®è·µ


**æ•°æ®ä¼ é€’é€‰æ‹©åŸåˆ™**ï¼š
```
ğŸ”¸ ç®€å•çŠ¶æ€ä¿¡æ¯ â†’ URLå‚æ•°
ğŸ”¸ ç”¨æˆ·ä¼šè¯ä¿¡æ¯ â†’ Session
ğŸ”¸ å¤æ‚ä¸šåŠ¡æ•°æ® â†’ Requestå±æ€§ï¼ˆè½¬å‘ï¼‰
ğŸ”¸ è·¨é¡µé¢æŒä¹…æ•°æ® â†’ Sessionæˆ–æ•°æ®åº“
```

---

## 7. ğŸ¯ ä½¿ç”¨åœºæ™¯é€‰æ‹©


### 7.1 é€‰æ‹©å†³ç­–æ ‘


```
éœ€è¦ä¼ é€’å¤æ‚æ•°æ®ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨è½¬å‘ (Forward)
â””â”€â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­
    â”‚
    éœ€è¦è·³è½¬åˆ°å¤–éƒ¨ç½‘ç«™ï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨é‡å®šå‘ (Redirect)
    â””â”€â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­
        â”‚
        ç”¨æˆ·æäº¤è¡¨å•åï¼Ÿ
        â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨é‡å®šå‘ (é¿å…é‡å¤æäº¤)
        â””â”€â”€ å¦ â†’ æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©
```

### 7.2 å…¸å‹åº”ç”¨åœºæ™¯


**ğŸ”¸ é‡å®šå‘åœºæ™¯è¯¦è§£**

| åœºæ™¯ | è¯´æ˜ | ä»£ç ç¤ºä¾‹ |
|------|------|----------|
| **ç™»å½•æˆåŠŸ** | `é¿å…åˆ·æ–°é‡å¤ç™»å½•` | `response.sendRedirect("home.jsp")` |
| **è¡¨å•æäº¤** | `é˜²æ­¢é‡å¤æäº¤æ•°æ®` | `response.sendRedirect("success.jsp")` |
| **æƒé™æ£€æŸ¥** | `æœªç™»å½•è·³è½¬ç™»å½•é¡µ` | `response.sendRedirect("login.jsp")` |
| **é¡µé¢è¿ç§»** | `æ—§é¡µé¢è·³è½¬æ–°é¡µé¢` | `response.sendRedirect("new-page.jsp")` |

**ğŸ”¸ è½¬å‘åœºæ™¯è¯¦è§£**

| åœºæ™¯ | è¯´æ˜ | ä»£ç ç¤ºä¾‹ |
|------|------|----------|
| **æ•°æ®å±•ç¤º** | `å¤„ç†åå±•ç¤ºç»“æœ` | `dispatcher.forward(request, response)` |
| **è¡¨å•éªŒè¯** | `éªŒè¯å¤±è´¥æ˜¾ç¤ºé”™è¯¯` | `request.setAttribute("errors", errors)` |
| **åŒ…å«é¡µé¢** | `é¡µé¢æ¨¡å—åŒ–ç»„åˆ` | `request.getRequestDispatcher("/header.jsp")` |
| **MVCæ¨¡å¼** | `æ§åˆ¶å™¨åˆ°è§†å›¾` | `forwardåˆ°JSPé¡µé¢` |

### 7.3 å®é™…ä¸šåŠ¡ä¸­çš„é€‰æ‹©ç­–ç•¥


**ç”µå•†ç½‘ç«™ç¤ºä¾‹**ï¼š
```java
// è´­ç‰©è½¦æ·»åŠ å•†å“
@WebServlet("/cart/add")
public class AddToCartServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
        boolean success = addToCart(request);
        
        if (success) {
            // é‡å®šå‘åˆ°è´­ç‰©è½¦é¡µé¢ï¼ˆé¿å…é‡å¤æ·»åŠ ï¼‰
            response.sendRedirect(request.getContextPath() + "/cart/view");
        } else {
            // è½¬å‘åˆ°é”™è¯¯é¡µé¢ï¼ˆä¿ç•™é”™è¯¯ä¿¡æ¯ï¼‰
            request.setAttribute("error", "å•†å“åº“å­˜ä¸è¶³");
            request.getRequestDispatcher("/WEB-INF/views/error.jsp")
                   .forward(request, response);
        }
    }
}
```

---

## 8. ğŸ’¼ å®é™…åº”ç”¨ç¤ºä¾‹


### 8.1 å®Œæ•´çš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿ


**ç™»å½•å¤„ç†Servlet**ï¼š
```java
@WebServlet("/login")
public class LoginServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        // æ˜¾ç¤ºç™»å½•é¡µé¢
        request.getRequestDispatcher("/WEB-INF/views/login.jsp")
               .forward(request, response);
    }
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        String rememberMe = request.getParameter("rememberMe");
        
        // è¾“å…¥éªŒè¯
        if (username == null || username.trim().isEmpty()) {
            request.setAttribute("error", "ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
            request.getRequestDispatcher("/WEB-INF/views/login.jsp")
                   .forward(request, response);
            return;
        }
        
        // ç”¨æˆ·è®¤è¯
        User user = userService.authenticate(username, password);
        
        if (user != null) {
            // ç™»å½•æˆåŠŸ
            HttpSession session = request.getSession();
            session.setAttribute("currentUser", user);
            session.setAttribute("loginTime", new Date());
            
            // è®°ä½æˆ‘åŠŸèƒ½
            if ("on".equals(rememberMe)) {
                Cookie userCookie = new Cookie("username", username);
                userCookie.setMaxAge(7 * 24 * 3600); // 7å¤©
                response.addCookie(userCookie);
            }
            
            // é‡å®šå‘åˆ°é¦–é¡µï¼ˆé¿å…åˆ·æ–°é‡å¤ç™»å½•ï¼‰
            response.sendRedirect(request.getContextPath() + "/dashboard");
            
        } else {
            // ç™»å½•å¤±è´¥ï¼Œè½¬å‘å›ç™»å½•é¡µé¢ï¼ˆä¿ç•™é”™è¯¯ä¿¡æ¯ï¼‰
            request.setAttribute("error", "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
            request.setAttribute("username", username); // ä¿ç•™ç”¨æˆ·è¾“å…¥
            request.getRequestDispatcher("/WEB-INF/views/login.jsp")
                   .forward(request, response);
        }
    }
}
```

### 8.2 æ–‡ä»¶ä¸Šä¼ å¤„ç†ç¤ºä¾‹


```java
@WebServlet("/upload")
@MultipartConfig
public class FileUploadServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        // æ˜¾ç¤ºä¸Šä¼ é¡µé¢
        request.getRequestDispatcher("/WEB-INF/views/upload.jsp")
               .forward(request, response);
    }
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        try {
            Part filePart = request.getPart("file");
            String fileName = getFileName(filePart);
            
            if (fileName == null || fileName.isEmpty()) {
                // æ²¡æœ‰é€‰æ‹©æ–‡ä»¶ï¼Œè½¬å‘å›ä¸Šä¼ é¡µé¢
                request.setAttribute("error", "è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶");
                request.getRequestDispatcher("/WEB-INF/views/upload.jsp")
                       .forward(request, response);
                return;
            }
            
            // ä¿å­˜æ–‡ä»¶
            String uploadPath = getServletContext().getRealPath("/uploads");
            String savedFileName = saveFile(filePart, uploadPath, fileName);
            
            // ä¸Šä¼ æˆåŠŸï¼Œé‡å®šå‘åˆ°æˆåŠŸé¡µé¢
            HttpSession session = request.getSession();
            session.setAttribute("successMessage", "æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼š" + savedFileName);
            response.sendRedirect(request.getContextPath() + "/upload/success");
            
        } catch (Exception e) {
            // ä¸Šä¼ å¤±è´¥ï¼Œè½¬å‘åˆ°é”™è¯¯é¡µé¢
            request.setAttribute("error", "æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼š" + e.getMessage());
            request.getRequestDispatcher("/WEB-INF/views/upload.jsp")
                   .forward(request, response);
        }
    }
}
```

### 8.3 è´­ç‰©è½¦ç®¡ç†ç³»ç»Ÿ


```java
@WebServlet("/cart/*")
public class CartServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String action = getAction(request);
        HttpSession session = request.getSession();
        Cart cart = getCartFromSession(session);
        
        switch (action) {
            case "add":
                handleAddToCart(request, cart);
                // æ·»åŠ æˆåŠŸåé‡å®šå‘ï¼Œé¿å…é‡å¤æ·»åŠ 
                response.sendRedirect(request.getContextPath() + "/cart/view");
                break;
                
            case "update":
                handleUpdateCart(request, cart);
                // æ›´æ–°åé‡å®šå‘åˆ°è´­ç‰©è½¦é¡µé¢
                response.sendRedirect(request.getContextPath() + "/cart/view");
                break;
                
            case "view":
                // æŸ¥çœ‹è´­ç‰©è½¦ï¼Œè½¬å‘åˆ°é¡µé¢å±•ç¤º
                request.setAttribute("cart", cart);
                request.setAttribute("totalAmount", cart.getTotalAmount());
                request.getRequestDispatcher("/WEB-INF/views/cart.jsp")
                       .forward(request, response);
                break;
                
            default:
                // æœªçŸ¥æ“ä½œï¼Œè½¬å‘åˆ°é”™è¯¯é¡µé¢
                request.setAttribute("error", "ä¸æ”¯æŒçš„æ“ä½œ");
                request.getRequestDispatcher("/WEB-INF/views/error.jsp")
                       .forward(request, response);
        }
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é‡å®šå‘ï¼šæµè§ˆå™¨å‘èµ·ä¸¤æ¬¡è¯·æ±‚ï¼ŒURLæ”¹å˜ï¼Œæ•°æ®ä¸ä¿ç•™
ğŸ”¸ è½¬å‘ï¼šæœåŠ¡å™¨å†…éƒ¨å¤„ç†ï¼ŒURLä¸å˜ï¼Œæ•°æ®å¯ä¼ é€’
ğŸ”¸ åº”ç”¨åœºæ™¯ï¼šé‡å®šå‘é˜²é‡å¤æäº¤ï¼Œè½¬å‘ä¼ é€’æ•°æ®
ğŸ”¸ è·¯å¾„å¤„ç†ï¼šç†è§£ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„çš„åŒºåˆ«
ğŸ”¸ æ•°æ®ä¼ é€’ï¼šæŒæ¡ä¸åŒæ–¹å¼çš„æ•°æ®ä¼ é€’æ–¹æ³•
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä½•æ—¶ä½¿ç”¨é‡å®šå‘**
```
ç”¨æˆ·æ“ä½œåœºæ™¯ï¼š
âœ… ç™»å½•æˆåŠŸ â†’ è·³è½¬é¦–é¡µ
âœ… è¡¨å•æäº¤ â†’ é¿å…é‡å¤æäº¤
âœ… æƒé™éªŒè¯ â†’ è·³è½¬ç›¸åº”é¡µé¢
âœ… å¤–éƒ¨é“¾æ¥ â†’ è·³è½¬å…¶ä»–ç½‘ç«™
```

**ğŸ”¹ ä½•æ—¶ä½¿ç”¨è½¬å‘**
```
æ•°æ®å¤„ç†åœºæ™¯ï¼š
âœ… ä¸šåŠ¡é€»è¾‘ â†’ ç»“æœå±•ç¤º
âœ… è¡¨å•éªŒè¯ â†’ é”™è¯¯æ˜¾ç¤º
âœ… æ•°æ®æŸ¥è¯¢ â†’ åˆ—è¡¨å±•ç¤º
âœ… é¡µé¢ç»„åˆ â†’ æ¨¡å—åŒ…å«
```

**ğŸ”¹ è·¯å¾„ä½¿ç”¨åŸåˆ™**
```
æ¨èåšæ³•ï¼š
- ä½¿ç”¨request.getContextPath()è·å–é¡¹ç›®è·¯å¾„
- é‡å®šå‘ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆåŒ…å«é¡¹ç›®åï¼‰
- è½¬å‘è·¯å¾„ä»¥"/"å¼€å¤´ï¼ˆç›¸å¯¹Webåº”ç”¨æ ¹ç›®å½•ï¼‰
- URLå‚æ•°éœ€è¦è¿›è¡Œç¼–ç å¤„ç†
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**å¸¸è§é”™è¯¯é¿å…**ï¼š
```
âŒ è½¬å‘åç»§ç»­å†™å…¥å“åº”
âŒ é‡å®šå‘æ—¶ä¼ é€’requestæ•°æ®
âŒ è·¯å¾„å†™é”™å¯¼è‡´404é”™è¯¯
âŒ å¿˜è®°å¤„ç†ä¸­æ–‡ç¼–ç é—®é¢˜
```

**æœ€ä½³å®è·µå»ºè®®**ï¼š
```
âœ… æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹å¼
âœ… ç»Ÿä¸€ç®¡ç†é¡µé¢è·¯å¾„å¸¸é‡
âœ… åšå¥½å¼‚å¸¸å¤„ç†å’Œç”¨æˆ·æç¤º
âœ… æ³¨æ„æ•°æ®å®‰å…¨å’Œç¼–ç é—®é¢˜
```

### 9.4 è®°å¿†è¦è¯€


**æ ¸å¿ƒåŒºåˆ«è®°å¿†**ï¼š
```
é‡å®šå‘ï¼š
- "æ¢ä¹˜åœ°é“" - æµè§ˆå™¨è‡ªå·±è·‘ä¸¤è¶Ÿ
- åœ°å€å˜åŒ–ï¼Œæ•°æ®ä¸¢å¤±
- é€‚åˆè·³è½¬ã€é˜²é‡å¤

è½¬å‘ï¼š
- "å†…éƒ¨è°ƒåŠ¨" - æœåŠ¡å™¨å†…éƒ¨è§£å†³
- åœ°å€ä¸å˜ï¼Œæ•°æ®ä¿ç•™  
- é€‚åˆå¤„ç†ã€æ˜¾ç¤ºæ•°æ®
```

**é€‰æ‹©ç­–ç•¥è®°å¿†**ï¼š
```
æƒ³è¦æ•°æ®ä¼ é€’ â†’ ç”¨è½¬å‘
æƒ³è¦é˜²æ­¢é‡å¤ â†’ ç”¨é‡å®šå‘
æƒ³è¦è·³è½¬å¤–éƒ¨ â†’ ç”¨é‡å®šå‘
æƒ³è¦éšè—å®ç° â†’ ç”¨è½¬å‘
```