---
title: 1ã€HttpServletResponseè¯¦è§£
---
## ğŸ“š ç›®å½•

1. [HttpServletResponseåŸºæœ¬æ¦‚å¿µ](#1-HttpServletResponseåŸºæœ¬æ¦‚å¿µ)
2. [å“åº”å¤´è®¾ç½®è¯¦è§£](#2-å“åº”å¤´è®¾ç½®è¯¦è§£)
3. [çŠ¶æ€ç è®¾ç½®ä¸åº”ç”¨](#3-çŠ¶æ€ç è®¾ç½®ä¸åº”ç”¨)
4. [å­—ç¬¦ç¼–ç å¤„ç†](#4-å­—ç¬¦ç¼–ç å¤„ç†)
5. [Content-Typeå†…å®¹ç±»å‹](#5-Content-Typeå†…å®¹ç±»å‹)
6. [ç¼“å­˜æ§åˆ¶æœºåˆ¶](#6-ç¼“å­˜æ§åˆ¶æœºåˆ¶)
7. [å“åº”æµæ“ä½œå®è·µ](#7-å“åº”æµæ“ä½œå®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ HttpServletResponseåŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯HttpServletResponse


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä½ æ˜¯ä¸€ä¸ªé¤å…æœåŠ¡å‘˜ï¼Œå®¢æˆ·ï¼ˆæµè§ˆå™¨ï¼‰ç‚¹äº†èœï¼ˆå‘é€è¯·æ±‚ï¼‰ï¼Œä½ éœ€è¦æŠŠèœå“ï¼ˆå“åº”æ•°æ®ï¼‰ç«¯ç»™å®¢æˆ·ã€‚HttpServletResponseå°±åƒæ˜¯ä½ æ‰‹ä¸­çš„æ‰˜ç›˜å’Œé¤å…·ï¼Œå¸®ä½ æŠŠèœå“å®Œæ•´åœ°é€åˆ°å®¢æˆ·é¢å‰ã€‚

**ä¸“ä¸šå®šä¹‰**ï¼š
- HttpServletResponseæ˜¯Servlet APIä¸­çš„æ ¸å¿ƒæ¥å£
- ä»£è¡¨æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯HTTPè¯·æ±‚çš„å“åº”
- è´Ÿè´£å°†æœåŠ¡å™¨å¤„ç†ç»“æœå‘é€å›æµè§ˆå™¨

**åŸºæœ¬å·¥ä½œæµç¨‹**ï¼š
```
å®¢æˆ·ç«¯è¯·æ±‚ â†’ Servletå¤„ç† â†’ HttpServletResponseç»„è£…å“åº” â†’ å‘é€ç»™å®¢æˆ·ç«¯

1. æ¥æ”¶ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚
2. å¤„ç†ï¼šServletä¸šåŠ¡é€»è¾‘å¤„ç†  
3. å“åº”ï¼šé€šè¿‡Responseå¯¹è±¡è¿”å›ç»“æœ
4. ä¼ è¾“ï¼šHTTPåè®®ä¼ è¾“å“åº”æ•°æ®
```

### 1.2 å“åº”çš„ç»„æˆéƒ¨åˆ†


HTTPå“åº”å°±åƒä¸€å°å®Œæ•´çš„ä¿¡ä»¶ï¼ŒåŒ…å«ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

```
HTTPå“åº”ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å“åº”è¡Œï¼ˆçŠ¶æ€ï¼‰      â”‚ â† HTTP/1.1 200 OK
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å“åº”å¤´ï¼ˆä¿¡æ¯ï¼‰      â”‚ â† Content-Type: text/html
â”‚                     â”‚   Content-Length: 1234
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å“åº”ä½“ï¼ˆå†…å®¹ï¼‰      â”‚ â† <html><body>é¡µé¢å†…å®¹</body></html>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸‰éƒ¨åˆ†è¯¦è§£**ï¼š
- **å“åº”è¡Œ**ï¼šå‘Šè¯‰æµè§ˆå™¨è¯·æ±‚å¤„ç†çš„ç»“æœçŠ¶æ€
- **å“åº”å¤´**ï¼šæä¾›å…³äºå“åº”çš„é¢å¤–ä¿¡æ¯ï¼ˆç¼–ç ã€ç±»å‹ç­‰ï¼‰
- **å“åº”ä½“**ï¼šå®é™…è¦å‘é€ç»™æµè§ˆå™¨çš„å†…å®¹æ•°æ®

### 1.3 HttpServletResponseçš„æ ¸å¿ƒä½œç”¨


| åŠŸèƒ½åˆ†ç±» | **å…·ä½“ä½œç”¨** | **ç”Ÿæ´»ç±»æ¯”** |
|---------|-------------|-------------|
| ğŸ¯ **çŠ¶æ€é€šçŸ¥** | `è®¾ç½®å“åº”çŠ¶æ€ç ` | `å¿«é€’å‘˜å‘Šè¯‰ä½ åŒ…è£¹é€è¾¾æƒ…å†µ` |
| ğŸ“‹ **ä¿¡æ¯è¯´æ˜** | `è®¾ç½®å“åº”å¤´ä¿¡æ¯` | `åŒ…è£¹ä¸Šçš„æ ‡ç­¾å’Œè¯´æ˜ä¹¦` |
| ğŸ“„ **å†…å®¹ä¼ é€’** | `å‘é€å“åº”æ•°æ®` | `åŒ…è£¹é‡Œçš„å®é™…ç‰©å“` |
| ğŸ”§ **æ ¼å¼æ§åˆ¶** | `è®¾ç½®å†…å®¹ç±»å‹å’Œç¼–ç ` | `é€‰æ‹©åˆé€‚çš„åŒ…è£…æ–¹å¼` |

---

## 2. ğŸ“ å“åº”å¤´è®¾ç½®è¯¦è§£


### 2.1 ä»€ä¹ˆæ˜¯å“åº”å¤´


**é€šä¿—è§£é‡Š**ï¼šå“åº”å¤´å°±åƒå¿«é€’åŒ…è£¹ä¸Šçš„æ ‡ç­¾ï¼Œå‘Šè¯‰æ”¶ä»¶äººï¼ˆæµè§ˆå™¨ï¼‰è¿™ä¸ªåŒ…è£¹ï¼ˆå“åº”ï¼‰çš„å„ç§ä¿¡æ¯ï¼Œæ¯”å¦‚é‡Œé¢è£…çš„æ˜¯ä»€ä¹ˆã€æ€ä¹ˆå¤„ç†ã€æ³¨æ„äº‹é¡¹ç­‰ã€‚

**å“åº”å¤´çš„é‡è¦æ€§**ï¼š
- ğŸ” **æŒ‡å¯¼æµè§ˆå™¨**ï¼šå‘Šè¯‰æµè§ˆå™¨å¦‚ä½•å¤„ç†å“åº”å†…å®¹
- ğŸ“± **æ§åˆ¶è¡Œä¸º**ï¼šå½±å“æµè§ˆå™¨çš„ç¼“å­˜ã€æ¸²æŸ“ç­‰è¡Œä¸º
- ğŸ” **å®‰å…¨æ§åˆ¶**ï¼šè®¾ç½®å®‰å…¨ç›¸å…³çš„ç­–ç•¥
- ğŸ“Š **æ€§èƒ½ä¼˜åŒ–**ï¼šæ§åˆ¶ç¼“å­˜å’Œå‹ç¼©ç­‰æ€§èƒ½ç‰¹æ€§

### 2.2 setHeader()æ–¹æ³•è¯¦è§£


**æ–¹æ³•ç­¾å**ï¼š`void setHeader(String name, String value)`

**åŸºæœ¬ç”¨æ³•**ï¼š
```java
// è®¾ç½®å•ä¸ªå“åº”å¤´
response.setHeader("Content-Type", "text/html;charset=UTF-8");
response.setHeader("Cache-Control", "no-cache");
```

**é‡è¦ç‰¹ç‚¹**ï¼š
- âš ï¸ **è¦†ç›–æ€§**ï¼šå¦‚æœå¤´å·²å­˜åœ¨ï¼Œä¼šå®Œå…¨æ›¿æ¢åŸå€¼
- ğŸ”„ **å¯é‡å¤**ï¼šå¯ä»¥å¤šæ¬¡è°ƒç”¨è®¾ç½®ä¸åŒçš„å¤´
- â° **æ—¶æ•ˆæ€§**ï¼šå¿…é¡»åœ¨å“åº”æäº¤å‰è®¾ç½®

### 2.3 å¸¸ç”¨å“åº”å¤´è®¾ç½®


**å†…å®¹ç›¸å…³å¤´éƒ¨**ï¼š
```java
// è®¾ç½®å†…å®¹ç±»å‹
response.setHeader("Content-Type", "application/json;charset=UTF-8");

// è®¾ç½®å†…å®¹é•¿åº¦
response.setHeader("Content-Length", "1024");

// è®¾ç½®å†…å®¹ç¼–ç 
response.setHeader("Content-Encoding", "gzip");
```

**ç¼“å­˜æ§åˆ¶å¤´éƒ¨**ï¼š
```java
// ç¦æ­¢ç¼“å­˜
response.setHeader("Cache-Control", "no-cache, no-store");

// è®¾ç½®ç¼“å­˜æ—¶é—´ï¼ˆ3600ç§’ï¼‰
response.setHeader("Cache-Control", "max-age=3600");

// è®¾ç½®è¿‡æœŸæ—¶é—´
response.setHeader("Expires", "Wed, 21 Jan 2025 12:00:00 GMT");
```

**å®‰å…¨ç›¸å…³å¤´éƒ¨**ï¼š
```java
// é˜²æ­¢XSSæ”»å‡»
response.setHeader("X-Content-Type-Options", "nosniff");

// è®¾ç½®é¡µé¢æ¡†æ¶ç­–ç•¥
response.setHeader("X-Frame-Options", "DENY");

// HTTPSå®‰å…¨ä¼ è¾“
response.setHeader("Strict-Transport-Security", "max-age=31536000");
```

### 2.4 å“åº”å¤´è®¾ç½®çš„æœ€ä½³å®è·µ


**âš¡ è®¾ç½®æ—¶æœº**ï¼š
```java
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // âœ… æ­£ç¡®ï¼šåœ¨å†™å…¥å†…å®¹å‰è®¾ç½®å“åº”å¤´
    response.setHeader("Content-Type", "text/html;charset=UTF-8");
    response.setHeader("Cache-Control", "no-cache");
    
    // ç„¶åå†™å…¥å“åº”å†…å®¹
    PrintWriter out = response.getWriter();
    out.println("<html><body>Hello World</body></html>");
    
    // âŒ é”™è¯¯ï¼šåœ¨å†…å®¹è¾“å‡ºåè®¾ç½®å¤´éƒ¨ï¼ˆå¯èƒ½æ— æ•ˆï¼‰
    // response.setHeader("Cache-Control", "no-cache");
}
```

---

## 3. ğŸ¯ çŠ¶æ€ç è®¾ç½®ä¸åº”ç”¨


### 3.1 HTTPçŠ¶æ€ç çš„å«ä¹‰


**é€šä¿—ç†è§£**ï¼šçŠ¶æ€ç å°±åƒå¿«é€’çš„é…é€çŠ¶æ€ï¼Œå‘Šè¯‰ä½ åŒ…è£¹å¤„ç†çš„ç»“æœï¼š
- ğŸ“¦ **200ç³»åˆ—**ï¼šæˆåŠŸé€è¾¾ï¼ˆè¯·æ±‚å¤„ç†æˆåŠŸï¼‰
- ğŸ“ **300ç³»åˆ—**ï¼šéœ€è¦è½¬å¯„ï¼ˆé‡å®šå‘ï¼‰
- â“ **400ç³»åˆ—**ï¼šåœ°å€æœ‰é—®é¢˜ï¼ˆå®¢æˆ·ç«¯é”™è¯¯ï¼‰
- ğŸš« **500ç³»åˆ—**ï¼šå¿«é€’å…¬å¸å‡ºé”™ï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰

### 3.2 setStatus()æ–¹æ³•è¯¦è§£


**æ–¹æ³•ç­¾å**ï¼š`void setStatus(int sc)`

**å¸¸ç”¨çŠ¶æ€ç è®¾ç½®**ï¼š
```java
// æˆåŠŸå“åº”
response.setStatus(HttpServletResponse.SC_OK); // 200

// é‡å®šå‘
response.setStatus(HttpServletResponse.SC_FOUND); // 302

// å®¢æˆ·ç«¯é”™è¯¯
response.setStatus(HttpServletResponse.SC_BAD_REQUEST); // 400
response.setStatus(HttpServletResponse.SC_NOT_FOUND); // 404

// æœåŠ¡å™¨é”™è¯¯
response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); // 500
```

### 3.3 å¸¸è§çŠ¶æ€ç åº”ç”¨åœºæ™¯


| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **å®é™…åº”ç”¨** |
|-------|---------|-------------|-------------|
| **200** | `æˆåŠŸ` | `è¯·æ±‚å¤„ç†æˆåŠŸ` | `æ­£å¸¸é¡µé¢æ˜¾ç¤º` |
| **302** | `ä¸´æ—¶é‡å®šå‘` | `é¡µé¢è·³è½¬` | `ç™»å½•åè·³è½¬é¦–é¡µ` |
| **304** | `æœªä¿®æ”¹` | `ç¼“å­˜æœ‰æ•ˆ` | `é™æ€èµ„æºç¼“å­˜` |
| **400** | `è¯·æ±‚é”™è¯¯` | `å‚æ•°æ ¼å¼é”™è¯¯` | `è¡¨å•éªŒè¯å¤±è´¥` |
| **401** | `æœªæˆæƒ` | `éœ€è¦ç™»å½•` | `è®¿é—®å—ä¿æŠ¤èµ„æº` |
| **404** | `æœªæ‰¾åˆ°` | `èµ„æºä¸å­˜åœ¨` | `é¡µé¢æˆ–æ–‡ä»¶ä¸å­˜åœ¨` |
| **500** | `æœåŠ¡å™¨é”™è¯¯` | `ç¨‹åºå¼‚å¸¸` | `ä»£ç è¿è¡Œå‡ºé”™` |

### 3.4 çŠ¶æ€ç è®¾ç½®å®è·µç¤ºä¾‹


**ç™»å½•éªŒè¯åœºæ™¯**ï¼š
```java
protected void doPost(HttpServletRequest request, HttpServletResponse response) {
    String username = request.getParameter("username");
    String password = request.getParameter("password");
    
    if (username == null || password == null) {
        // å‚æ•°ç¼ºå¤±
        response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        response.setHeader("Content-Type", "application/json;charset=UTF-8");
        // è¿”å›é”™è¯¯ä¿¡æ¯...
        return;
    }
    
    if (validateUser(username, password)) {
        // ç™»å½•æˆåŠŸ
        response.setStatus(HttpServletResponse.SC_OK);
        // è®¾ç½®sessionæˆ–è¿”å›æˆåŠŸä¿¡æ¯...
    } else {
        // ç™»å½•å¤±è´¥
        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
        // è¿”å›å¤±è´¥ä¿¡æ¯...
    }
}
```

---

## 4. ğŸ”¤ å­—ç¬¦ç¼–ç å¤„ç†


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½®å­—ç¬¦ç¼–ç 


**ç”Ÿæ´»ç±»æ¯”**ï¼šå­—ç¬¦ç¼–ç å°±åƒä¸åŒå›½å®¶çš„è¯­è¨€ï¼Œå¦‚æœä½ è¯´ä¸­æ–‡ï¼Œå¯¹æ–¹å´æŒ‰è‹±æ–‡ç†è§£ï¼Œå°±ä¼šå‡ºç°"ä¹±ç "ã€‚æµè§ˆå™¨éœ€è¦çŸ¥é“æœåŠ¡å™¨å‘é€çš„æ˜¯ä»€ä¹ˆ"è¯­è¨€"ï¼ˆç¼–ç ï¼‰ï¼Œæ‰èƒ½æ­£ç¡®æ˜¾ç¤ºã€‚

**å¸¸è§ç¼–ç é—®é¢˜**ï¼š
```
é—®é¢˜ç°è±¡ï¼š
æ­£ç¡®æ˜¾ç¤ºï¼šä½ å¥½ï¼Œæ¬¢è¿è®¿é—®ï¼
ä¹±ç æ˜¾ç¤ºï¼šÃ¤Â½ Ã¥Â¥Â½Ã¯Â¼Ã¦Â¬Â¢Ã¨Â¿Ã¨Â®Â¿Ã©Â®Ã¯Â¼

åŸå› ï¼šæœåŠ¡å™¨ç”¨UTF-8ç¼–ç ï¼Œæµè§ˆå™¨ç”¨ISO-8859-1è§£ç 
```

### 4.2 setCharacterEncoding()æ–¹æ³•


**æ–¹æ³•ä½œç”¨**ï¼šè®¾ç½®å“åº”è¾“å‡ºæµçš„å­—ç¬¦ç¼–ç 

```java
// è®¾ç½®å“åº”ç¼–ç ä¸ºUTF-8
response.setCharacterEncoding("UTF-8");

// åŒæ—¶è®¾ç½®Content-Typeå’Œç¼–ç 
response.setContentType("text/html;charset=UTF-8");
```

**ä¸¤ç§è®¾ç½®æ–¹å¼å¯¹æ¯”**ï¼š

| æ–¹å¼ | **æ–¹æ³•** | **ä½œç”¨èŒƒå›´** | **æ¨èåº¦** |
|-----|---------|-------------|-----------|
| ğŸ”§ **å•ç‹¬è®¾ç½®** | `setCharacterEncoding()` | `ä»…è®¾ç½®è¾“å‡ºæµç¼–ç ` | `â­â­` |
| ğŸ¯ **ç»„åˆè®¾ç½®** | `setContentType()` | `åŒæ—¶è®¾ç½®ç±»å‹å’Œç¼–ç ` | `â­â­â­â­â­` |

### 4.3 ç¼–ç è®¾ç½®çš„æ­£ç¡®å§¿åŠ¿


**âœ… æ¨èåšæ³•**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // æ–¹å¼ä¸€ï¼šç»„åˆè®¾ç½®ï¼ˆæ¨èï¼‰
    response.setContentType("text/html;charset=UTF-8");
    
    // æ–¹å¼äºŒï¼šåˆ†åˆ«è®¾ç½®
    // response.setCharacterEncoding("UTF-8");
    // response.setContentType("text/html");
    
    PrintWriter out = response.getWriter();
    out.println("<h1>ä½ å¥½ï¼Œä¸–ç•Œï¼</h1>");
}
```

**âŒ é”™è¯¯åšæ³•**ï¼š
```java
// é”™è¯¯ï¼šå…ˆè·å–è¾“å‡ºæµï¼Œå†è®¾ç½®ç¼–ç ï¼ˆæ— æ•ˆï¼‰
PrintWriter out = response.getWriter();
response.setCharacterEncoding("UTF-8"); // è¿™æ—¶è®¾ç½®å·²ç»å¤ªæ™šäº†
```

### 4.4 ç¼–ç é—®é¢˜çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ


**å…¨é“¾è·¯ç¼–ç ç»Ÿä¸€**ï¼š
```java
// 1. è®¾ç½®è¯·æ±‚ç¼–ç ï¼ˆå¤„ç†è¡¨å•æ•°æ®ï¼‰
request.setCharacterEncoding("UTF-8");

// 2. è®¾ç½®å“åº”ç¼–ç 
response.setContentType("text/html;charset=UTF-8");

// 3. æ•°æ®åº“è¿æ¥ç¼–ç 
// jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8

// 4. é¡µé¢metaæ ‡ç­¾
// <meta charset="UTF-8">
```

---

## 5. ğŸ“„ Content-Typeå†…å®¹ç±»å‹


### 5.1 Content-Typeçš„ä½œç”¨


**é€šä¿—è§£é‡Š**ï¼šContent-Typeå°±åƒæ–‡ä»¶çš„æ ‡ç­¾ï¼Œå‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªæ–‡ä»¶æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œåº”è¯¥ç”¨ä»€ä¹ˆæ–¹å¼æ‰“å¼€ã€‚å°±åƒä½ çœ‹åˆ°.docxçŸ¥é“æ˜¯Wordæ–‡æ¡£ï¼Œçœ‹åˆ°.mp4çŸ¥é“æ˜¯è§†é¢‘æ–‡ä»¶ä¸€æ ·ã€‚

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ¯ **æŒ‡å¯¼æµè§ˆå™¨**ï¼šå‘Šè¯‰æµè§ˆå™¨å¦‚ä½•å¤„ç†å“åº”å†…å®¹
- ğŸ”„ **å†³å®šæ¸²æŸ“æ–¹å¼**ï¼šå½±å“æµè§ˆå™¨çš„æ˜¾ç¤ºæ–¹å¼
- ğŸ“± **è§¦å‘è¡Œä¸º**ï¼šå¯èƒ½è§¦å‘ä¸‹è½½æˆ–åœ¨çº¿é¢„è§ˆ

### 5.2 å¸¸è§Content-Typeç±»å‹


**ç½‘é¡µå†…å®¹ç±»å‹**ï¼š
```java
// HTMLé¡µé¢
response.setContentType("text/html;charset=UTF-8");

// çº¯æ–‡æœ¬
response.setContentType("text/plain;charset=UTF-8");

// CSSæ ·å¼æ–‡ä»¶
response.setContentType("text/css;charset=UTF-8");

// JavaScriptæ–‡ä»¶
response.setContentType("text/javascript;charset=UTF-8");
```

**æ•°æ®äº¤æ¢ç±»å‹**ï¼š
```java
// JSONæ•°æ®
response.setContentType("application/json;charset=UTF-8");

// XMLæ•°æ®
response.setContentType("application/xml;charset=UTF-8");

// è¡¨å•æ•°æ®
response.setContentType("application/x-www-form-urlencoded");
```

**æ–‡ä»¶ä¸‹è½½ç±»å‹**ï¼š
```java
// å¼ºåˆ¶ä¸‹è½½
response.setContentType("application/octet-stream");

// PDFæ–‡ä»¶
response.setContentType("application/pdf");

// å›¾ç‰‡æ–‡ä»¶
response.setContentType("image/jpeg");
response.setContentType("image/png");
```

### 5.3 Content-Typeè®¾ç½®å®è·µ


**JSON APIå“åº”**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    response.setContentType("application/json;charset=UTF-8");
    
    PrintWriter out = response.getWriter();
    out.println("{\"message\":\"Hello World\",\"status\":\"success\"}");
}
```

**æ–‡ä»¶ä¸‹è½½**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // è®¾ç½®ä¸ºä¸‹è½½ç±»å‹
    response.setContentType("application/octet-stream");
    response.setHeader("Content-Disposition", "attachment;filename=file.txt");
    
    // è¾“å‡ºæ–‡ä»¶å†…å®¹...
}
```

### 5.4 Content-Typeé€‰æ‹©æŒ‡å—


```
é€‰æ‹©åŸåˆ™ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å›HTMLé¡µé¢   â”‚ â†’ text/html
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿”å›JSONæ•°æ®   â”‚ â†’ application/json  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿”å›æ–‡ä»¶ä¸‹è½½   â”‚ â†’ application/octet-stream
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿”å›å›¾ç‰‡æ˜¾ç¤º   â”‚ â†’ image/jpeg æˆ– image/png
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿”å›çº¯æ–‡æœ¬     â”‚ â†’ text/plain
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ğŸš€ ç¼“å­˜æ§åˆ¶æœºåˆ¶


### 6.1 æµè§ˆå™¨ç¼“å­˜åŸºæœ¬æ¦‚å¿µ


**ç”Ÿæ´»ç±»æ¯”**ï¼šæµè§ˆå™¨ç¼“å­˜å°±åƒä½ å®¶é‡Œçš„å†°ç®±ï¼ŒæŠŠç»å¸¸ç”¨çš„ä¸œè¥¿ï¼ˆç½‘é¡µã€å›¾ç‰‡ï¼‰å­˜èµ·æ¥ï¼Œä¸‹æ¬¡éœ€è¦æ—¶ç›´æ¥ä»å†°ç®±ï¼ˆç¼“å­˜ï¼‰æ‹¿ï¼Œä¸ç”¨å†å»è¶…å¸‚ï¼ˆæœåŠ¡å™¨ï¼‰ä¹°ï¼Œè¿™æ ·æ—¢å¿«é€ŸåˆèŠ‚çœèµ„æºã€‚

**ç¼“å­˜çš„å¥½å¤„**ï¼š
- âš¡ **æé«˜é€Ÿåº¦**ï¼šå‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œé¡µé¢åŠ è½½æ›´å¿«
- ğŸ’° **èŠ‚çœæµé‡**ï¼šå‡å°‘æ•°æ®ä¼ è¾“ï¼ŒèŠ‚çœå¸¦å®½æˆæœ¬
- ğŸ”„ **å‡è½»æœåŠ¡å™¨å‹åŠ›**ï¼šå‡å°‘æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„æ•°é‡

### 6.2 Cache-Controlå“åº”å¤´è¯¦è§£


**åŸºæœ¬è¯­æ³•**ï¼š`Cache-Control: æŒ‡ä»¤1, æŒ‡ä»¤2`

**å¸¸ç”¨æŒ‡ä»¤è¯´æ˜**ï¼š

| æŒ‡ä»¤ | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **æ•ˆæœ** |
|------|---------|-------------|----------|
| **no-cache** | `ä¸ç›´æ¥ä½¿ç”¨ç¼“å­˜` | `éœ€è¦éªŒè¯çš„å†…å®¹` | `æ¯æ¬¡éƒ½é—®æœåŠ¡å™¨æ˜¯å¦æœ‰æ›´æ–°` |
| **no-store** | `ä¸å­˜å‚¨ç¼“å­˜` | `æ•æ„Ÿä¿¡æ¯` | `å®Œå…¨ä¸ç¼“å­˜` |
| **max-age=ç§’æ•°** | `ç¼“å­˜æœ‰æ•ˆæ—¶é—´` | `é™æ€èµ„æº` | `æŒ‡å®šæ—¶é—´å†…ç›´æ¥ä½¿ç”¨ç¼“å­˜` |
| **public** | `å¯è¢«ä»»ä½•ç¼“å­˜` | `å…¬å…±èµ„æº` | `ä»£ç†æœåŠ¡å™¨ä¹Ÿå¯ç¼“å­˜` |
| **private** | `åªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜` | `ä¸ªäººä¿¡æ¯` | `ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜` |

### 6.3 ç¼“å­˜æ§åˆ¶å®é™…åº”ç”¨


**é™æ€èµ„æºç¼“å­˜ï¼ˆé•¿æ—¶é—´ç¼“å­˜ï¼‰**ï¼š
```java
// è®¾ç½®CSSã€JSã€å›¾ç‰‡ç­‰é™æ€èµ„æºç¼“å­˜1å¹´
response.setHeader("Cache-Control", "public, max-age=31536000");
response.setHeader("Expires", "Wed, 21 Jan 2026 12:00:00 GMT");
```

**åŠ¨æ€é¡µé¢ç¼“å­˜ï¼ˆçŸ­æ—¶é—´ç¼“å­˜ï¼‰**ï¼š
```java
// è®¾ç½®é¡µé¢ç¼“å­˜5åˆ†é’Ÿ
response.setHeader("Cache-Control", "private, max-age=300");
```

**ç¦æ­¢ç¼“å­˜ï¼ˆå®æ—¶æ•°æ®ï¼‰**ï¼š
```java
// å®Œå…¨ç¦æ­¢ç¼“å­˜ï¼ˆé€‚ç”¨äºç”¨æˆ·ä¿¡æ¯ã€å®æ—¶æ•°æ®ç­‰ï¼‰
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
response.setHeader("Pragma", "no-cache");
response.setHeader("Expires", "0");
```

### 6.4 ç¼“å­˜ç­–ç•¥é€‰æ‹©æŒ‡å—


```
å†…å®¹ç±»å‹ç¼“å­˜ç­–ç•¥ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    é™æ€èµ„æº         â”‚ â†’ é•¿æ—¶é—´ç¼“å­˜ï¼ˆ1å¹´ï¼‰
â”‚  (CSS/JS/å›¾ç‰‡)      â”‚   Cache-Control: public, max-age=31536000
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    é¡µé¢å†…å®¹         â”‚ â†’ çŸ­æ—¶é—´ç¼“å­˜ï¼ˆ5-30åˆ†é’Ÿï¼‰
â”‚  (å•†å“åˆ—è¡¨/æ–°é—»)     â”‚   Cache-Control: private, max-age=1800
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç”¨æˆ·æ•°æ®         â”‚ â†’ éªŒè¯ç¼“å­˜
â”‚  (ä¸ªäººä¿¡æ¯/è´­ç‰©è½¦)   â”‚   Cache-Control: private, must-revalidate
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    å®æ—¶æ•°æ®         â”‚ â†’ ç¦æ­¢ç¼“å­˜
â”‚  (è‚¡ç¥¨ä»·æ ¼/èŠå¤©)     â”‚   Cache-Control: no-cache, no-store
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¼“å­˜è®¾ç½®çš„å®ç”¨å»ºè®®**ï¼š
- ğŸ¯ **é™æ€èµ„æº**ï¼šè®¾ç½®é•¿æ—¶é—´ç¼“å­˜ï¼Œé€šè¿‡ç‰ˆæœ¬å·æ›´æ–°
- ğŸ“± **é¡µé¢å†…å®¹**ï¼šè®¾ç½®é€‚å½“çš„ç¼“å­˜æ—¶é—´ï¼Œå¹³è¡¡æ€§èƒ½å’Œå®æ—¶æ€§
- ğŸ” **æ•æ„Ÿæ•°æ®**ï¼šç¦æ­¢ç¼“å­˜ï¼Œç¡®ä¿å®‰å…¨æ€§
- âš¡ **APIæ¥å£**ï¼šæ ¹æ®æ•°æ®æ›´æ–°é¢‘ç‡è®¾ç½®åˆé€‚çš„ç¼“å­˜ç­–ç•¥

---

## 7. ğŸ’§ å“åº”æµæ“ä½œå®è·µ


### 7.1 å“åº”æµçš„åŸºæœ¬æ¦‚å¿µ


**é€šä¿—ç†è§£**ï¼šå“åº”æµå°±åƒæ°´ç®¡ï¼ŒæœåŠ¡å™¨é€šè¿‡è¿™æ ¹"æ°´ç®¡"æŠŠæ•°æ®ï¼ˆæ°´ï¼‰è¾“é€ç»™æµè§ˆå™¨ã€‚æœ‰ä¸¤ç§ç±»å‹çš„"æ°´ç®¡"ï¼š
- ğŸ”¤ **å­—ç¬¦æµï¼ˆPrintWriterï¼‰**ï¼šä¸“é—¨ä¼ è¾“æ–‡å­—å†…å®¹
- ğŸ’¾ **å­—èŠ‚æµï¼ˆOutputStreamï¼‰**ï¼šå¯ä»¥ä¼ è¾“ä»»ä½•ç±»å‹çš„æ•°æ®

**ä¸¤ç§æµçš„åŒºåˆ«**ï¼š
```
å­—ç¬¦æµ PrintWriterï¼š
- å¤„ç†æ–‡æœ¬å†…å®¹ï¼ˆHTMLã€JSONã€XMLç­‰ï¼‰
- è‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç 
- é€‚åˆè¾“å‡ºç½‘é¡µå’Œæ–‡æœ¬æ•°æ®

å­—èŠ‚æµ ServletOutputStreamï¼š  
- å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼ˆå›¾ç‰‡ã€æ–‡ä»¶ã€è§†é¢‘ç­‰ï¼‰
- ç›´æ¥æ“ä½œå­—èŠ‚
- é€‚åˆæ–‡ä»¶ä¸‹è½½å’ŒäºŒè¿›åˆ¶è¾“å‡º
```

### 7.2 å­—ç¬¦æµæ“ä½œï¼ˆPrintWriterï¼‰


**è·å–å’Œä½¿ç”¨å­—ç¬¦æµ**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // å…ˆè®¾ç½®å†…å®¹ç±»å‹å’Œç¼–ç 
    response.setContentType("text/html;charset=UTF-8");
    
    // è·å–å­—ç¬¦è¾“å‡ºæµ
    PrintWriter out = response.getWriter();
    
    // è¾“å‡ºHTMLå†…å®¹
    out.println("<!DOCTYPE html>");
    out.println("<html>");
    out.println("<head><title>æµ‹è¯•é¡µé¢</title></head>");
    out.println("<body>");
    out.println("<h1>æ¬¢è¿è®¿é—®ï¼</h1>");
    out.println("<p>å½“å‰æ—¶é—´ï¼š" + new Date() + "</p>");
    out.println("</body>");
    out.println("</html>");
    
    // PrintWriterä¼šè‡ªåŠ¨å…³é—­ï¼Œä¸éœ€è¦æ‰‹åŠ¨å…³é—­
}
```

**è¾“å‡ºJSONæ•°æ®**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    response.setContentType("application/json;charset=UTF-8");
    
    PrintWriter out = response.getWriter();
    out.println("{");
    out.println("  \"status\": \"success\",");
    out.println("  \"message\": \"æ•°æ®è·å–æˆåŠŸ\",");
    out.println("  \"data\": {");
    out.println("    \"name\": \"å¼ ä¸‰\",");
    out.println("    \"age\": 25");
    out.println("  }");
    out.println("}");
}
```

### 7.3 å­—èŠ‚æµæ“ä½œï¼ˆServletOutputStreamï¼‰


**æ–‡ä»¶ä¸‹è½½å®ç°**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // è®¾ç½®ä¸‹è½½ç›¸å…³å¤´ä¿¡æ¯
    response.setContentType("application/octet-stream");
    response.setHeader("Content-Disposition", "attachment;filename=test.txt");
    
    try {
        // è·å–å­—èŠ‚è¾“å‡ºæµ
        ServletOutputStream out = response.getOutputStream();
        
        // å‡†å¤‡è¦ä¸‹è½½çš„å†…å®¹
        String content = "è¿™æ˜¯è¦ä¸‹è½½çš„æ–‡ä»¶å†…å®¹\nåŒ…å«ä¸­æ–‡å­—ç¬¦æµ‹è¯•";
        byte[] bytes = content.getBytes("UTF-8");
        
        // è®¾ç½®æ–‡ä»¶å¤§å°
        response.setContentLength(bytes.length);
        
        // è¾“å‡ºæ–‡ä»¶å†…å®¹
        out.write(bytes);
        out.flush();
        
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

**å›¾ç‰‡è¾“å‡ºå®ç°**ï¼š
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    response.setContentType("image/jpeg");
    
    try {
        ServletOutputStream out = response.getOutputStream();
        
        // ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–å›¾ç‰‡
        FileInputStream fis = new FileInputStream("path/to/image.jpg");
        byte[] buffer = new byte[1024];
        int len;
        
        while ((len = fis.read(buffer)) != -1) {
            out.write(buffer, 0, len);
        }
        
        fis.close();
        out.flush();
        
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

### 7.4 å“åº”æµä½¿ç”¨æ³¨æ„äº‹é¡¹


**âš ï¸ é‡è¦åŸåˆ™**ï¼š
```java
// âŒ é”™è¯¯ï¼šä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸¤ç§æµ
PrintWriter writer = response.getWriter();
ServletOutputStream stream = response.getOutputStream(); // ä¼šæŠ›å‡ºå¼‚å¸¸

// âœ… æ­£ç¡®ï¼šæ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©åˆé€‚çš„æµ
if (isTextContent) {
    PrintWriter out = response.getWriter();
    // å¤„ç†æ–‡æœ¬å†…å®¹
} else {
    ServletOutputStream out = response.getOutputStream();
    // å¤„ç†äºŒè¿›åˆ¶å†…å®¹
}
```

**æµçš„é€‰æ‹©æŒ‡å—**ï¼š
- ğŸ“ **è¾“å‡ºHTMLã€JSONã€XML**ï¼šä½¿ç”¨ `PrintWriter`
- ğŸ“ **æ–‡ä»¶ä¸‹è½½ã€å›¾ç‰‡è¾“å‡º**ï¼šä½¿ç”¨ `ServletOutputStream`  
- ğŸ”¤ **çº¯æ–‡æœ¬å†…å®¹**ï¼šä½¿ç”¨ `PrintWriter`
- ğŸ’¾ **äºŒè¿›åˆ¶æ•°æ®**ï¼šä½¿ç”¨ `ServletOutputStream`

### 7.5 å®Œæ•´çš„å“åº”å¤„ç†ç¤ºä¾‹


**ç»¼åˆåº”ç”¨ç¤ºä¾‹**ï¼š
```java
@WebServlet("/api/userinfo")
public class UserInfoServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // 1. è®¾ç½®å“åº”åŸºæœ¬ä¿¡æ¯
        response.setContentType("application/json;charset=UTF-8");
        response.setStatus(HttpServletResponse.SC_OK);
        
        // 2. è®¾ç½®ç¼“å­˜ç­–ç•¥
        response.setHeader("Cache-Control", "private, max-age=300");
        
        // 3. è®¾ç½®å®‰å…¨å¤´
        response.setHeader("X-Content-Type-Options", "nosniff");
        
        try {
            // 4. è·å–è¾“å‡ºæµå¹¶è¾“å‡ºæ•°æ®
            PrintWriter out = response.getWriter();
            
            // 5. æ„é€ JSONå“åº”
            StringBuilder json = new StringBuilder();
            json.append("{");
            json.append("\"status\":\"success\",");
            json.append("\"timestamp\":\"").append(System.currentTimeMillis()).append("\",");
            json.append("\"data\":{");
            json.append("\"username\":\"testuser\",");
            json.append("\"email\":\"test@example.com\"");
            json.append("}");
            json.append("}");
            
            out.println(json.toString());
            
        } catch (IOException e) {
            // 6. é”™è¯¯å¤„ç†
            response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
            e.printStackTrace();
        }
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ HttpServletResponseä½œç”¨ï¼šæœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€å“åº”çš„æ ¸å¿ƒå·¥å…·
ğŸ”¸ å“åº”ç»„æˆéƒ¨åˆ†ï¼šå“åº”è¡Œï¼ˆçŠ¶æ€ç ï¼‰+ å“åº”å¤´ï¼ˆä¿¡æ¯ï¼‰+ å“åº”ä½“ï¼ˆå†…å®¹ï¼‰
ğŸ”¸ setHeader()æ–¹æ³•ï¼šè®¾ç½®å“åº”å¤´ä¿¡æ¯ï¼ŒæŒ‡å¯¼æµè§ˆå™¨å¤„ç†å“åº”
ğŸ”¸ setStatus()æ–¹æ³•ï¼šè®¾ç½®HTTPçŠ¶æ€ç ï¼Œå‘ŠçŸ¥è¯·æ±‚å¤„ç†ç»“æœ
ğŸ”¸ å­—ç¬¦ç¼–ç è®¾ç½®ï¼šè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œä¿è¯å†…å®¹æ­£ç¡®æ˜¾ç¤º
ğŸ”¸ Content-Typeè®¾ç½®ï¼šå‘Šè¯‰æµè§ˆå™¨å“åº”å†…å®¹çš„ç±»å‹å’Œå¤„ç†æ–¹å¼
ğŸ”¸ ç¼“å­˜æ§åˆ¶ï¼šæé«˜é¡µé¢æ€§èƒ½ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›
ğŸ”¸ å“åº”æµæ“ä½œï¼šå­—ç¬¦æµå¤„ç†æ–‡æœ¬ï¼Œå­—èŠ‚æµå¤„ç†äºŒè¿›åˆ¶æ•°æ®
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å“åº”å¤„ç†çš„æ—¶åºæ€§**
```
æ­£ç¡®é¡ºåºï¼š
1. è®¾ç½®å“åº”å¤´ â†’ 2. è®¾ç½®çŠ¶æ€ç  â†’ 3. è·å–è¾“å‡ºæµ â†’ 4. è¾“å‡ºå†…å®¹

é”™è¯¯åšæ³•ï¼šå…ˆè¾“å‡ºå†…å®¹ï¼Œå†è®¾ç½®å¤´ä¿¡æ¯ï¼ˆå¯èƒ½æ— æ•ˆï¼‰
```

**ğŸ”¹ ç¼–ç é—®é¢˜çš„æ ¹æœ¬è§£å†³**
```
ç»Ÿä¸€ç¼–ç åŸåˆ™ï¼š
- è¯·æ±‚ç¼–ç ï¼šrequest.setCharacterEncoding("UTF-8")  
- å“åº”ç¼–ç ï¼šresponse.setContentType("text/html;charset=UTF-8")
- æ•°æ®åº“ç¼–ç ï¼šè¿æ¥URLæ·»åŠ characterEncoding=UTF-8
- é¡µé¢ç¼–ç ï¼š<meta charset="UTF-8">
```

**ğŸ”¹ å“åº”æµçš„é€‰æ‹©åŸåˆ™**
```
å†…å®¹ç±»å‹å†³å®šæµç±»å‹ï¼š
æ–‡æœ¬å†…å®¹ï¼ˆHTML/JSON/XMLï¼‰â†’ PrintWriter
äºŒè¿›åˆ¶å†…å®¹ï¼ˆæ–‡ä»¶/å›¾ç‰‡ï¼‰â†’ ServletOutputStream
ä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸¤ç§æµ
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ“± Webé¡µé¢å“åº”**ï¼š
```java
// æ ‡å‡†Webé¡µé¢å“åº”æ¨¡æ¿
response.setContentType("text/html;charset=UTF-8");
response.setStatus(HttpServletResponse.SC_OK);
PrintWriter out = response.getWriter();
// è¾“å‡ºHTMLå†…å®¹
```

**ğŸ”„ APIæ¥å£å“åº”**ï¼š
```java
// æ ‡å‡†APIå“åº”æ¨¡æ¿
response.setContentType("application/json;charset=UTF-8");
response.setHeader("Cache-Control", "private, max-age=300");
PrintWriter out = response.getWriter();
// è¾“å‡ºJSONæ•°æ®
```

**ğŸ“ æ–‡ä»¶ä¸‹è½½å“åº”**ï¼š
```java
// æ ‡å‡†æ–‡ä»¶ä¸‹è½½æ¨¡æ¿
response.setContentType("application/octet-stream");
response.setHeader("Content-Disposition", "attachment;filename=" + fileName);
ServletOutputStream out = response.getOutputStream();
// è¾“å‡ºæ–‡ä»¶å†…å®¹
```

### 8.4 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


| é—®é¢˜ç±»å‹ | **ç°è±¡** | **åŸå› ** | **è§£å†³æ–¹æ¡ˆ** |
|---------|---------|---------|-------------|
| ğŸ”¤ **ä¸­æ–‡ä¹±ç ** | `é¡µé¢æ˜¾ç¤ºä¹±ç å­—ç¬¦` | `ç¼–ç è®¾ç½®ä¸ç»Ÿä¸€` | `ç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç ` |
| ğŸš« **å¤´ä¿¡æ¯æ— æ•ˆ** | `è®¾ç½®çš„å¤´ä¿¡æ¯ä¸ç”Ÿæ•ˆ` | `åœ¨è¾“å‡ºå†…å®¹åè®¾ç½®å¤´` | `å…ˆè®¾ç½®å¤´ï¼Œå†è¾“å‡ºå†…å®¹` |
| ğŸ’¥ **æµå†²çªå¼‚å¸¸** | `IllegalStateException` | `åŒæ—¶ä½¿ç”¨ä¸¤ç§è¾“å‡ºæµ` | `åªé€‰æ‹©ä¸€ç§åˆé€‚çš„æµ` |
| ğŸ“± **ç¼“å­˜é—®é¢˜** | `é¡µé¢ä¸æ›´æ–°æˆ–æ›´æ–°å¤ªé¢‘ç¹` | `ç¼“å­˜ç­–ç•¥è®¾ç½®ä¸å½“` | `æ ¹æ®å†…å®¹ç±»å‹åˆç†è®¾ç½®ç¼“å­˜` |

**æ ¸å¿ƒè®°å¿†**ï¼š
- HttpServletResponseæ˜¯æœåŠ¡å™¨å“åº”çš„è½½ä½“
- å“åº”å¤´è®¾ç½®è¦åœ¨å†…å®¹è¾“å‡ºå‰å®Œæˆ  
- ç¼–ç ç»Ÿä¸€æ˜¯è§£å†³ä¹±ç çš„æ ¹æœ¬æ–¹æ³•
- æ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©åˆé€‚çš„è¾“å‡ºæµ
- åˆç†çš„ç¼“å­˜ç­–ç•¥èƒ½æ˜¾è‘—æå‡æ€§èƒ½