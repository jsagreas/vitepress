---
title: 3ã€ç»¼åˆæ¡ˆä¾‹å®ç°
---
## ğŸ“š ç›®å½•

1. [ç»¼åˆæ¡ˆä¾‹ç³»ç»Ÿæ¦‚è¿°](#1-ç»¼åˆæ¡ˆä¾‹ç³»ç»Ÿæ¦‚è¿°)
2. [ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿ](#2-ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿ)
3. [æ•°æ®åº“CRUDæ“ä½œè¯¦è§£](#3-æ•°æ®åº“CRUDæ“ä½œè¯¦è§£)
4. [åˆ†é¡µæ˜¾ç¤ºåŠŸèƒ½å®ç°](#4-åˆ†é¡µæ˜¾ç¤ºåŠŸèƒ½å®ç°)
5. [æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½](#5-æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½)
6. [æƒé™æ§åˆ¶ç®¡ç†](#6-æƒé™æ§åˆ¶ç®¡ç†)
7. [é¡¹ç›®æ‰“åŒ…éƒ¨ç½²](#7-é¡¹ç›®æ‰“åŒ…éƒ¨ç½²)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç»¼åˆæ¡ˆä¾‹ç³»ç»Ÿæ¦‚è¿°


### 1.1 æˆ‘ä»¬è¦åšä»€ä¹ˆï¼Ÿ


**é€šä¿—ç†è§£**ï¼šæˆ‘ä»¬è¦åšä¸€ä¸ªå®Œæ•´çš„ç½‘ç«™ç³»ç»Ÿï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·æŠŠä¹‹å‰å­¦çš„çŸ¥è¯†ç»„è£…èµ·æ¥

```
æƒ³è±¡ä¸€ä¸‹ï¼šæˆ‘ä»¬è¦å¼€ä¸€å®¶ç½‘ä¸Šä¹¦åº—
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ğŸ“š ç½‘ä¸Šä¹¦åº—ç³»ç»Ÿ          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ ç”¨æˆ·æ³¨å†Œ/ç™»å½• â† é¡¾å®¢è¿›åº—       â”‚
â”‚ ğŸ“– ä¹¦ç±ç®¡ç†     â† å•†å“ç®¡ç†       â”‚
â”‚ ğŸ›’ è´­ç‰©è½¦åŠŸèƒ½   â† é€‰è´­å•†å“       â”‚
â”‚ ğŸ“„ åˆ†é¡µæ˜¾ç¤º     â† å•†å“å¤ªå¤šåˆ†é¡µçœ‹  â”‚
â”‚ ğŸ“ æ–‡ä»¶ä¸Šä¼      â† ä¸Šä¼ ä¹¦ç±å°é¢   â”‚
â”‚ ğŸ”’ æƒé™æ§åˆ¶     â† åŒºåˆ†é¡¾å®¢å’Œåº—é•¿  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€æœ¯æ¶æ„è¯´æ˜


**ä¸‰å±‚æ¶æ„æ¨¡å¼**ï¼šå°±åƒç›–æˆ¿å­è¦æœ‰åœ°åŸºã€ä¸»ä½“ã€è£…ä¿®ä¸€æ ·
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“± è¡¨ç°å±‚       â”‚ â† JSPé¡µé¢ï¼ˆç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼‰
â”‚   (JSP/HTML)    â”‚   
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ”§ ä¸šåŠ¡å±‚       â”‚ â† Servletï¼ˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   (Servlet)     â”‚   
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ’¾ æ•°æ®å±‚       â”‚ â† æ•°æ®åº“ï¼ˆå­˜å‚¨æ•°æ®ï¼‰
â”‚   (MySQL)       â”‚   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **ä¸ºä»€ä¹ˆè¿™æ ·åˆ†å±‚ï¼Ÿ**  
> å°±åƒå·¥å‚æµæ°´çº¿ï¼Œæ¯ä¸ªç¯èŠ‚ä¸“é—¨è´Ÿè´£ä¸€ä»¶äº‹ï¼Œè¿™æ ·ä»£ç æ›´æ¸…æ¥šï¼Œå‡ºé—®é¢˜ä¹Ÿå®¹æ˜“æ‰¾åˆ°åŸå› 

### 1.3 é¡¹ç›®ç»“æ„è®¾ç½®


```
ğŸ“ WebBookStore/
â”œâ”€â”€ ğŸ“ src/main/java/
â”‚   â”œâ”€â”€ ğŸ“ entity/          â† å®ä½“ç±»ï¼ˆæ•°æ®æ¨¡å‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ User.java       â† ç”¨æˆ·ä¿¡æ¯
â”‚   â”‚   â””â”€â”€ Book.java       â† ä¹¦ç±ä¿¡æ¯
â”‚   â”œâ”€â”€ ğŸ“ dao/             â† æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ UserDao.java    â† ç”¨æˆ·æ•°æ®æ“ä½œ
â”‚   â”‚   â””â”€â”€ BookDao.java    â† ä¹¦ç±æ•°æ®æ“ä½œ
â”‚   â”œâ”€â”€ ğŸ“ servlet/         â† æ§åˆ¶å±‚
â”‚   â”‚   â”œâ”€â”€ LoginServlet.java
â”‚   â”‚   â””â”€â”€ BookServlet.java
â”‚   â””â”€â”€ ğŸ“ utils/           â† å·¥å…·ç±»
â”‚       â””â”€â”€ DBUtil.java     â† æ•°æ®åº“è¿æ¥å·¥å…·
â”œâ”€â”€ ğŸ“ src/main/webapp/
â”‚   â”œâ”€â”€ ğŸ“ WEB-INF/
â”‚   â”‚   â””â”€â”€ web.xml         â† é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ css/             â† æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ js/              â† JavaScriptæ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ images/          â† å›¾ç‰‡æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ *.jsp            â† é¡µé¢æ–‡ä»¶
â””â”€â”€ ğŸ“ lib/                 â† å¤–éƒ¨jaråŒ…
```

---

## 2. ğŸ‘¤ ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿ


### 2.1 ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½


**ä»€ä¹ˆæ˜¯æ³¨å†Œï¼Ÿ** å°±åƒåŠä¼šå‘˜å¡ï¼ŒæŠŠä¸ªäººä¿¡æ¯ç™»è®°åˆ°ç³»ç»Ÿé‡Œ

#### ğŸ—ï¸ æ•°æ®åº“è¡¨è®¾è®¡


```sql
-- ç”¨æˆ·è¡¨è®¾è®¡
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,    -- ç”¨æˆ·IDï¼ˆè‡ªåŠ¨é€’å¢ï¼‰
    username VARCHAR(50) UNIQUE NOT NULL, -- ç”¨æˆ·åï¼ˆä¸èƒ½é‡å¤ï¼‰
    password VARCHAR(100) NOT NULL,       -- å¯†ç 
    email VARCHAR(100),                   -- é‚®ç®±
    role VARCHAR(20) DEFAULT 'user',      -- è§’è‰²ï¼ˆæ™®é€šç”¨æˆ·/ç®¡ç†å‘˜ï¼‰
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP  -- æ³¨å†Œæ—¶é—´
);
```

> ğŸ“ **è¡¨è®¾è®¡è¦ç‚¹**  
> - `UNIQUE`ï¼šç¡®ä¿ç”¨æˆ·åä¸é‡å¤ï¼Œå°±åƒèº«ä»½è¯å·å”¯ä¸€
> - `AUTO_INCREMENT`ï¼šIDè‡ªåŠ¨å¢é•¿ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†é…
> - `DEFAULT`ï¼šè®¾ç½®é»˜è®¤å€¼ï¼Œæ–°ç”¨æˆ·é»˜è®¤æ˜¯æ™®é€šè§’è‰²

#### ğŸ¯ æ³¨å†Œé¡µé¢å®ç°


```jsp
<!-- register.jsp -->
<form action="RegisterServlet" method="post">
    <div class="form-group">
        <label>ç”¨æˆ·åï¼š</label>
        <input type="text" name="username" required>
        <span class="tip">* ç”¨æˆ·åä¸èƒ½é‡å¤</span>
    </div>
    
    <div class="form-group">
        <label>å¯†ç ï¼š</label>
        <input type="password" name="password" required>
        <span class="tip">* è‡³å°‘6ä½å­—ç¬¦</span>
    </div>
    
    <div class="form-group">
        <label>é‚®ç®±ï¼š</label>
        <input type="email" name="email">
    </div>
    
    <button type="submit">ç«‹å³æ³¨å†Œ</button>
</form>
```

#### ğŸ”§ æ³¨å†Œå¤„ç†é€»è¾‘


```java
@WebServlet("/RegisterServlet")
public class RegisterServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // 1. è·å–ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        String email = request.getParameter("email");
        
        // 2. ç®€å•éªŒè¯ï¼ˆå®é™…é¡¹ç›®è¦æ›´ä¸¥æ ¼ï¼‰
        if (username == null || password == null || username.length() < 3) {
            request.setAttribute("error", "ç”¨æˆ·åæˆ–å¯†ç ä¸ç¬¦åˆè¦æ±‚");
            request.getRequestDispatcher("register.jsp").forward(request, response);
            return;
        }
        
        // 3. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        UserDao userDao = new UserDao();
        if (userDao.isUsernameExist(username)) {
            request.setAttribute("error", "ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·æ¢ä¸€ä¸ª");
            request.getRequestDispatcher("register.jsp").forward(request, response);
            return;
        }
        
        // 4. åˆ›å»ºç”¨æˆ·å¯¹è±¡å¹¶ä¿å­˜
        User newUser = new User();
        newUser.setUsername(username);
        newUser.setPassword(password); // å®é™…é¡¹ç›®è¦åŠ å¯†å¯†ç 
        newUser.setEmail(email);
        
        boolean success = userDao.saveUser(newUser);
        if (success) {
            response.sendRedirect("login.jsp?msg=æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•");
        } else {
            request.setAttribute("error", "æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•");
            request.getRequestDispatcher("register.jsp").forward(request, response);
        }
    }
}
```

> âš ï¸ **å®‰å…¨æç¤º**  
> å®é™…é¡¹ç›®ä¸­å¯†ç è¦åŠ å¯†å­˜å‚¨ï¼Œä¸èƒ½æ˜æ–‡ä¿å­˜ï¼å¯ä»¥ä½¿ç”¨MD5æˆ–BCryptåŠ å¯†

### 2.2 ç”¨æˆ·ç™»å½•åŠŸèƒ½


**ä»€ä¹ˆæ˜¯ç™»å½•ï¼Ÿ** å°±åƒæ‹¿ä¼šå‘˜å¡åˆ·å¡è¿›åº—ï¼ŒéªŒè¯èº«ä»½

#### ğŸ”‘ ç™»å½•éªŒè¯æµç¨‹


```
ç™»å½•éªŒè¯æµç¨‹ï¼š
ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç 
        â†“
   æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
        â†“
   éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®
        â†“
  ç™»å½•æˆåŠŸï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°Session
        â†“
   è·³è½¬åˆ°ä¸»é¡µé¢
```

#### ğŸ’» ç™»å½•å®ç°ä»£ç 


```java
@WebServlet("/LoginServlet")
public class LoginServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        
        // ä»æ•°æ®åº“éªŒè¯ç”¨æˆ·
        UserDao userDao = new UserDao();
        User user = userDao.login(username, password);
        
        if (user != null) {
            // ç™»å½•æˆåŠŸï¼ŒæŠŠç”¨æˆ·ä¿¡æ¯å­˜åˆ°Sessioné‡Œ
            HttpSession session = request.getSession();
            session.setAttribute("user", user);
            session.setAttribute("username", user.getUsername());
            
            // æ ¹æ®ç”¨æˆ·è§’è‰²è·³è½¬ä¸åŒé¡µé¢
            if ("admin".equals(user.getRole())) {
                response.sendRedirect("admin/index.jsp");
            } else {
                response.sendRedirect("user/index.jsp");
            }
        } else {
            // ç™»å½•å¤±è´¥
            request.setAttribute("error", "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
            request.getRequestDispatcher("login.jsp").forward(request, response);
        }
    }
}
```

> ğŸ’¡ **Sessionçš„ä½œç”¨**  
> Sessionå°±åƒç»™æ¯ä¸ªç”¨æˆ·å‘ä¸€ä¸ªä¸´æ—¶é€šè¡Œè¯ï¼Œåœ¨ç”¨æˆ·æµè§ˆç½‘ç«™æœŸé—´ä¸€ç›´æœ‰æ•ˆï¼Œç”¨æ¥è®°ä½ç”¨æˆ·çš„ç™»å½•çŠ¶æ€

---

## 3. ğŸ—ƒï¸ æ•°æ®åº“CRUDæ“ä½œè¯¦è§£


### 3.1 ä»€ä¹ˆæ˜¯CRUDï¼Ÿ


**CRUDå°±æ˜¯æ•°æ®åº“çš„å››ä¸ªåŸºæœ¬æ“ä½œ**ï¼š
- **C**reate â† åˆ›å»ºï¼ˆæ–°å¢æ•°æ®ï¼‰
- **R**ead â† è¯»å–ï¼ˆæŸ¥è¯¢æ•°æ®ï¼‰  
- **U**pdate â† æ›´æ–°ï¼ˆä¿®æ”¹æ•°æ®ï¼‰
- **D**elete â† åˆ é™¤ï¼ˆåˆ é™¤æ•°æ®ï¼‰

å°±åƒç®¡ç†ä¸€ä¸ªæ–‡ä»¶æŸœï¼šæ”¾å…¥æ–‡ä»¶ã€æŸ¥æ‰¾æ–‡ä»¶ã€ä¿®æ”¹æ–‡ä»¶ã€ä¸¢å¼ƒæ–‡ä»¶

### 3.2 æ•°æ®åº“è¿æ¥å·¥å…·ç±»


```java
public class DBUtil {
    private static final String URL = "jdbc:mysql://localhost:3306/bookstore";
    private static final String USERNAME = "root";
    private static final String PASSWORD = "123456";
    
    // è·å–æ•°æ®åº“è¿æ¥
    public static Connection getConnection() {
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            return DriverManager.getConnection(URL, USERNAME, PASSWORD);
        } catch (Exception e) {
            throw new RuntimeException("æ•°æ®åº“è¿æ¥å¤±è´¥", e);
        }
    }
    
    // å…³é—­èµ„æºï¼ˆå¾ˆé‡è¦ï¼ï¼‰
    public static void close(Connection conn, PreparedStatement ps, ResultSet rs) {
        try {
            if (rs != null) rs.close();
            if (ps != null) ps.close();
            if (conn != null) conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```

### 3.3 ä¹¦ç±ç®¡ç†CRUDå®ç°


#### ğŸ“š ä¹¦ç±å®ä½“ç±»


```java
public class Book {
    private int id;
    private String title;      // ä¹¦å
    private String author;     // ä½œè€…
    private double price;      // ä»·æ ¼
    private String category;   // åˆ†ç±»
    private String description; // æè¿°
    
    // æ„é€ æ–¹æ³•ã€getter/setterçœç•¥...
}
```

#### â• æ–°å¢ä¹¦ç±ï¼ˆCreateï¼‰


```java
public class BookDao {
    
    // æ·»åŠ ä¹¦ç±
    public boolean addBook(Book book) {
        String sql = "INSERT INTO books (title, author, price, category, description) VALUES (?, ?, ?, ?, ?)";
        Connection conn = null;
        PreparedStatement ps = null;
        
        try {
            conn = DBUtil.getConnection();
            ps = conn.prepareStatement(sql);
            
            // è®¾ç½®å‚æ•°ï¼ˆ?å·å ä½ç¬¦å¯¹åº”çš„å€¼ï¼‰
            ps.setString(1, book.getTitle());
            ps.setString(2, book.getAuthor());
            ps.setDouble(3, book.getPrice());
            ps.setString(4, book.getCategory());
            ps.setString(5, book.getDescription());
            
            int result = ps.executeUpdate();
            return result > 0; // å½±å“è¡Œæ•°å¤§äº0è¡¨ç¤ºæˆåŠŸ
            
        } catch (SQLException e) {
            e.printStackTrace();
            return false;
        } finally {
            DBUtil.close(conn, ps, null);
        }
    }
}
```

#### ğŸ” æŸ¥è¯¢ä¹¦ç±ï¼ˆReadï¼‰


```java
// æ ¹æ®IDæŸ¥è¯¢å•æœ¬ä¹¦
public Book getBookById(int id) {
    String sql = "SELECT * FROM books WHERE id = ?";
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    
    try {
        conn = DBUtil.getConnection();
        ps = conn.prepareStatement(sql);
        ps.setInt(1, id);
        
        rs = ps.executeQuery();
        if (rs.next()) {
            Book book = new Book();
            book.setId(rs.getInt("id"));
            book.setTitle(rs.getString("title"));
            book.setAuthor(rs.getString("author"));
            book.setPrice(rs.getDouble("price"));
            book.setCategory(rs.getString("category"));
            book.setDescription(rs.getString("description"));
            return book;
        }
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        DBUtil.close(conn, ps, rs);
    }
    return null;
}

// æŸ¥è¯¢æ‰€æœ‰ä¹¦ç±
public List<Book> getAllBooks() {
    List<Book> books = new ArrayList<>();
    String sql = "SELECT * FROM books ORDER BY id DESC";
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;
    
    try {
        conn = DBUtil.getConnection();
        ps = conn.prepareStatement(sql);
        rs = ps.executeQuery();
        
        while (rs.next()) {
            Book book = new Book();
            // è®¾ç½®å±æ€§...ï¼ˆåŒä¸Šï¼‰
            books.add(book);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        DBUtil.close(conn, ps, rs);
    }
    return books;
}
```

#### âœï¸ æ›´æ–°ä¹¦ç±ï¼ˆUpdateï¼‰


```java
public boolean updateBook(Book book) {
    String sql = "UPDATE books SET title=?, author=?, price=?, category=?, description=? WHERE id=?";
    Connection conn = null;
    PreparedStatement ps = null;
    
    try {
        conn = DBUtil.getConnection();
        ps = conn.prepareStatement(sql);
        
        ps.setString(1, book.getTitle());
        ps.setString(2, book.getAuthor());
        ps.setDouble(3, book.getPrice());
        ps.setString(4, book.getCategory());
        ps.setString(5, book.getDescription());
        ps.setInt(6, book.getId()); // WHEREæ¡ä»¶çš„ID
        
        int result = ps.executeUpdate();
        return result > 0;
        
    } catch (SQLException e) {
        e.printStackTrace();
        return false;
    } finally {
        DBUtil.close(conn, ps, null);
    }
}
```

#### ğŸ—‘ï¸ åˆ é™¤ä¹¦ç±ï¼ˆDeleteï¼‰


```java
public boolean deleteBook(int id) {
    String sql = "DELETE FROM books WHERE id = ?";
    Connection conn = null;
    PreparedStatement ps = null;
    
    try {
        conn = DBUtil.getConnection();
        ps = conn.prepareStatement(sql);
        ps.setInt(1, id);
        
        int result = ps.executeUpdate();
        return result > 0;
        
    } catch (SQLException e) {
        e.printStackTrace();
        return false;
    } finally {
        DBUtil.close(conn, ps, null);
    }
}
```

### 3.4 Servletæ§åˆ¶å™¨å®ç°


```java
@WebServlet("/BookServlet")
public class BookServlet extends HttpServlet {
    private BookDao bookDao = new BookDao();
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String action = request.getParameter("action");
        
        switch (action) {
            case "list":
                listBooks(request, response);
                break;
            case "add":
                showAddForm(request, response);
                break;
            case "edit":
                showEditForm(request, response);
                break;
            case "delete":
                deleteBook(request, response);
                break;
        }
    }
    
    // æ˜¾ç¤ºä¹¦ç±åˆ—è¡¨
    private void listBooks(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        List<Book> books = bookDao.getAllBooks();
        request.setAttribute("books", books);
        request.getRequestDispatcher("book-list.jsp").forward(request, response);
    }
    
    // åˆ é™¤ä¹¦ç±
    private void deleteBook(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        int id = Integer.parseInt(request.getParameter("id"));
        bookDao.deleteBook(id);
        response.sendRedirect("BookServlet?action=list");
    }
}
```

---

## 4. ğŸ“„ åˆ†é¡µæ˜¾ç¤ºåŠŸèƒ½å®ç°


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ


**æƒ³è±¡ä¸€ä¸‹**ï¼šå¦‚æœä¹¦åº—æœ‰10000æœ¬ä¹¦ï¼Œä¸€æ¬¡æ€§æ˜¾ç¤ºå‡ºæ¥é¡µé¢ä¼šå¡æ­»ï¼å°±åƒç¿»å­—å…¸ï¼Œè¦ä¸€é¡µä¸€é¡µçœ‹

```
ä¸åˆ†é¡µçš„é—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¹¦1  ä¹¦2  ä¹¦3   â”‚
â”‚ ä¹¦4  ä¹¦5  ä¹¦6   â”‚
â”‚ ...ä¹¦9998...   â”‚ â† é¡µé¢è¶…é•¿ï¼ŒåŠ è½½å¾ˆæ…¢
â”‚ ä¹¦9999 ä¹¦10000 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†é¡µåçš„æ•ˆæœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¹¦1  ä¹¦2  ä¹¦3   â”‚
â”‚ ä¹¦4  ä¹¦5  ä¹¦6   â”‚ â† åªæ˜¾ç¤º10æ¡
â”‚ ä¹¦7  ä¹¦8  ä¹¦9   â”‚
â”‚ ä¹¦10           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [1] [2] ... [1000] â”‚ â† é¡µç å¯¼èˆª
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 åˆ†é¡µå‚æ•°è®¡ç®—


**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **æ€»è®°å½•æ•°**ï¼šæ•°æ®åº“é‡Œæ€»å…±æœ‰å¤šå°‘æ¡è®°å½•
- **æ¯é¡µå¤§å°**ï¼šæ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡è®°å½•ï¼ˆæ¯”å¦‚10æ¡ï¼‰
- **æ€»é¡µæ•°**ï¼šéœ€è¦åˆ†å¤šå°‘é¡µæ˜¾ç¤º
- **å½“å‰é¡µ**ï¼šç”¨æˆ·ç°åœ¨çœ‹çš„æ˜¯ç¬¬å‡ é¡µ

```java
public class PageInfo {
    private int currentPage = 1;    // å½“å‰é¡µç 
    private int pageSize = 10;      // æ¯é¡µæ˜¾ç¤ºæ•°é‡
    private int totalCount;         // æ€»è®°å½•æ•°
    private int totalPages;         // æ€»é¡µæ•°
    
    // è®¡ç®—æ€»é¡µæ•°
    public void calculateTotalPages() {
        if (totalCount % pageSize == 0) {
            totalPages = totalCount / pageSize;
        } else {
            totalPages = totalCount / pageSize + 1;
        }
    }
    
    // è®¡ç®—æŸ¥è¯¢çš„èµ·å§‹ä½ç½®
    public int getStartIndex() {
        return (currentPage - 1) * pageSize;
    }
    
    // æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
    public boolean hasPrevious() {
        return currentPage > 1;
    }
    
    // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
    public boolean hasNext() {
        return currentPage < totalPages;
    }
}
```

### 4.3 åˆ†é¡µæŸ¥è¯¢å®ç°


```java
public class BookDao {
    
    // åˆ†é¡µæŸ¥è¯¢ä¹¦ç±
    public List<Book> getBooksByPage(int startIndex, int pageSize) {
        List<Book> books = new ArrayList<>();
        String sql = "SELECT * FROM books ORDER BY id DESC LIMIT ?, ?";
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        
        try {
            conn = DBUtil.getConnection();
            ps = conn.prepareStatement(sql);
            ps.setInt(1, startIndex);  // ä»ç¬¬å‡ æ¡å¼€å§‹
            ps.setInt(2, pageSize);    // å–å¤šå°‘æ¡
            
            rs = ps.executeQuery();
            while (rs.next()) {
                Book book = new Book();
                // è®¾ç½®bookå±æ€§...
                books.add(book);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            DBUtil.close(conn, ps, rs);
        }
        return books;
    }
    
    // è·å–æ€»è®°å½•æ•°
    public int getTotalCount() {
        String sql = "SELECT COUNT(*) FROM books";
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        
        try {
            conn = DBUtil.getConnection();
            ps = conn.prepareStatement(sql);
            rs = ps.executeQuery();
            if (rs.next()) {
                return rs.getInt(1);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            DBUtil.close(conn, ps, rs);
        }
        return 0;
    }
}
```

### 4.4 åˆ†é¡µServletå¤„ç†


```java
@WebServlet("/BookPageServlet")
public class BookPageServlet extends HttpServlet {
    private BookDao bookDao = new BookDao();
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–é¡µç å‚æ•°ï¼Œé»˜è®¤ç¬¬1é¡µ
        String pageParam = request.getParameter("page");
        int currentPage = 1;
        if (pageParam != null && !pageParam.isEmpty()) {
            try {
                currentPage = Integer.parseInt(pageParam);
            } catch (NumberFormatException e) {
                currentPage = 1;
            }
        }
        
        // åˆ›å»ºåˆ†é¡µä¿¡æ¯å¯¹è±¡
        PageInfo pageInfo = new PageInfo();
        pageInfo.setCurrentPage(currentPage);
        pageInfo.setPageSize(10); // æ¯é¡µ10æ¡
        
        // è·å–æ€»è®°å½•æ•°å¹¶è®¡ç®—æ€»é¡µæ•°
        int totalCount = bookDao.getTotalCount();
        pageInfo.setTotalCount(totalCount);
        pageInfo.calculateTotalPages();
        
        // è·å–å½“å‰é¡µçš„æ•°æ®
        List<Book> books = bookDao.getBooksByPage(pageInfo.getStartIndex(), pageInfo.getPageSize());
        
        // ä¼ é€’æ•°æ®åˆ°JSP
        request.setAttribute("books", books);
        request.setAttribute("pageInfo", pageInfo);
        request.getRequestDispatcher("book-list.jsp").forward(request, response);
    }
}
```

### 4.5 åˆ†é¡µæ˜¾ç¤ºç•Œé¢


```jsp
<!-- book-list.jsp -->
<div class="book-list">
    <c:forEach items="${books}" var="book">
        <div class="book-item">
            <h3>${book.title}</h3>
            <p>ä½œè€…ï¼š${book.author}</p>
            <p>ä»·æ ¼ï¼šï¿¥${book.price}</p>
        </div>
    </c:forEach>
</div>

<!-- åˆ†é¡µå¯¼èˆª -->
<div class="pagination">
    <c:if test="${pageInfo.hasPrevious()}">
        <a href="BookPageServlet?page=${pageInfo.currentPage - 1}">ä¸Šä¸€é¡µ</a>
    </c:if>
    
    <!-- æ˜¾ç¤ºé¡µç  -->
    <c:forEach begin="1" end="${pageInfo.totalPages}" var="pageNum">
        <c:choose>
            <c:when test="${pageNum == pageInfo.currentPage}">
                <span class="current-page">${pageNum}</span>
            </c:when>
            <c:otherwise>
                <a href="BookPageServlet?page=${pageNum}">${pageNum}</a>
            </c:otherwise>
        </c:choose>
    </c:forEach>
    
    <c:if test="${pageInfo.hasNext()}">
        <a href="BookPageServlet?page=${pageInfo.currentPage + 1}">ä¸‹ä¸€é¡µ</a>
    </c:if>
</div>

<!-- åˆ†é¡µä¿¡æ¯ -->
<div class="page-info">
    ç¬¬${pageInfo.currentPage}é¡µï¼Œå…±${pageInfo.totalPages}é¡µï¼Œæ€»è®¡${pageInfo.totalCount}æ¡è®°å½•
</div>
```

---

## 5. ğŸ“ æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½


### 5.1 æ–‡ä»¶ä¸Šä¼ åŸç†


**é€šä¿—ç†è§£**ï¼šå°±åƒå¯„å¿«é€’ï¼ŒæŠŠæœ¬åœ°æ–‡ä»¶æ‰“åŒ…å‘é€åˆ°æœåŠ¡å™¨

```
æ–‡ä»¶ä¸Šä¼ æµç¨‹ï¼š
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ â†’ æµè§ˆå™¨è¯»å–æ–‡ä»¶ â†’ å‘é€åˆ°æœåŠ¡å™¨ â†’ æœåŠ¡å™¨ä¿å­˜æ–‡ä»¶
     ğŸ“„          â†’      ğŸŒ      â†’      ğŸ’»      â†’     ğŸ’¾
   æœ¬åœ°æ–‡ä»¶            ç½‘ç»œä¼ è¾“        Servletå¤„ç†    å­˜å‚¨åˆ°ç£ç›˜
```

### 5.2 ä¸Šä¼ ç¯å¢ƒå‡†å¤‡


**æ·»åŠ ä¾èµ–**ï¼šéœ€è¦commons-fileuploadåº“æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ 
```xml
<!-- åœ¨pom.xmlä¸­æ·»åŠ  -->
<dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId>commons-fileupload</artifactId>
    <version>1.4</version>
</dependency>
```

### 5.3 æ–‡ä»¶ä¸Šä¼ è¡¨å•


```jsp
<!-- æ–‡ä»¶ä¸Šä¼ è¡¨å•çš„ç‰¹æ®Šè¦æ±‚ -->
<form action="FileUploadServlet" method="post" enctype="multipart/form-data">
    <div class="upload-area">
        <label>é€‰æ‹©ä¹¦ç±å°é¢ï¼š</label>
        <input type="file" name="bookCover" accept="image/*">
        <span class="tip">* æ”¯æŒjpgã€pngæ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡2MB</span>
    </div>
    
    <div class="form-group">
        <label>ä¹¦åï¼š</label>
        <input type="text" name="bookTitle" required>
    </div>
    
    <button type="submit">ä¸Šä¼ å¹¶ä¿å­˜</button>
</form>
```

> âš ï¸ **é‡è¦æé†’**  
> æ–‡ä»¶ä¸Šä¼ è¡¨å•å¿…é¡»è®¾ç½® `enctype="multipart/form-data"`ï¼Œå¦åˆ™æ— æ³•ä¸Šä¼ æ–‡ä»¶ï¼

### 5.4 æ–‡ä»¶ä¸Šä¼ Servletå®ç°


```java
@WebServlet("/FileUploadServlet")
@MultipartConfig(
    maxFileSize = 1024 * 1024 * 2,      // å•ä¸ªæ–‡ä»¶æœ€å¤§2MB
    maxRequestSize = 1024 * 1024 * 10,   // æ•´ä¸ªè¯·æ±‚æœ€å¤§10MB
    fileSizeThreshold = 1024 * 1024      // è¶…è¿‡1MBå†™å…¥ç£ç›˜
)
public class FileUploadServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        request.setCharacterEncoding("UTF-8");
        
        try {
            // è·å–ä¸Šä¼ çš„æ–‡ä»¶
            Part filePart = request.getPart("bookCover");
            String fileName = getFileName(filePart);
            
            if (fileName != null && !fileName.isEmpty()) {
                // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                if (isValidImageFile(fileName)) {
                    // ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åï¼ˆé¿å…é‡åï¼‰
                    String newFileName = System.currentTimeMillis() + "_" + fileName;
                    
                    // è®¾ç½®ä¿å­˜è·¯å¾„
                    String uploadPath = getServletContext().getRealPath("/uploads");
                    File uploadDir = new File(uploadPath);
                    if (!uploadDir.exists()) {
                        uploadDir.mkdirs(); // åˆ›å»ºç›®å½•
                    }
                    
                    // ä¿å­˜æ–‡ä»¶
                    String filePath = uploadPath + File.separator + newFileName;
                    filePart.write(filePath);
                    
                    // è·å–å…¶ä»–è¡¨å•æ•°æ®
                    String bookTitle = request.getParameter("bookTitle");
                    
                    // ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆåŒ…å«æ–‡ä»¶è·¯å¾„ï¼‰
                    Book book = new Book();
                    book.setTitle(bookTitle);
                    book.setCoverImage("uploads/" + newFileName);
                    
                    BookDao bookDao = new BookDao();
                    boolean success = bookDao.addBook(book);
                    
                    if (success) {
                        response.sendRedirect("success.jsp?msg=ä¸Šä¼ æˆåŠŸ");
                    } else {
                        response.sendRedirect("error.jsp?msg=ä¿å­˜å¤±è´¥");
                    }
                } else {
                    response.sendRedirect("error.jsp?msg=æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ");
                }
            } else {
                response.sendRedirect("error.jsp?msg=è¯·é€‰æ‹©æ–‡ä»¶");
            }
            
        } catch (Exception e) {
            e.printStackTrace();
            response.sendRedirect("error.jsp?msg=ä¸Šä¼ å‡ºé”™");
        }
    }
    
    // è·å–æ–‡ä»¶å
    private String getFileName(Part part) {
        String contentDisp = part.getHeader("content-disposition");
        String[] tokens = contentDisp.split(";");
        for (String token : tokens) {
            if (token.trim().startsWith("filename")) {
                return token.substring(token.indexOf("=") + 2, token.length() - 1);
            }
        }
        return "";
    }
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶
    private boolean isValidImageFile(String fileName) {
        String[] validExtensions = {".jpg", ".jpeg", ".png", ".gif"};
        String fileExtension = fileName.toLowerCase().substring(fileName.lastIndexOf("."));
        for (String ext : validExtensions) {
            if (ext.equals(fileExtension)) {
                return true;
            }
        }
        return false;
    }
}
```

### 5.5 æ–‡ä»¶ä¸‹è½½åŠŸèƒ½


```java
@WebServlet("/FileDownloadServlet")
public class FileDownloadServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String fileName = request.getParameter("file");
        if (fileName == null || fileName.isEmpty()) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST, "æ–‡ä»¶åä¸èƒ½ä¸ºç©º");
            return;
        }
        
        // æ„å»ºæ–‡ä»¶è·¯å¾„
        String filePath = getServletContext().getRealPath("/uploads/" + fileName);
        File file = new File(filePath);
        
        if (!file.exists()) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND, "æ–‡ä»¶ä¸å­˜åœ¨");
            return;
        }
        
        // è®¾ç½®å“åº”å¤´
        response.setContentType("application/octet-stream");
        response.setHeader("Content-Disposition", 
            "attachment; filename=\"" + new String(fileName.getBytes("UTF-8"), "ISO8859-1") + "\"");
        response.setContentLength((int) file.length());
        
        // è¯»å–æ–‡ä»¶å¹¶è¾“å‡º
        try (FileInputStream fis = new FileInputStream(file);
             OutputStream os = response.getOutputStream()) {
            
            byte[] buffer = new byte[1024];
            int bytesRead;
            while ((bytesRead = fis.read(buffer)) != -1) {
                os.write(buffer, 0, bytesRead);
            }
            os.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

---

## 6. ğŸ”’ æƒé™æ§åˆ¶ç®¡ç†


### 6.1 æƒé™æ§åˆ¶çš„å¿…è¦æ€§


**é€šä¿—ç†è§£**ï¼šå°±åƒå…¬å¸çš„é—¨ç¦å¡ï¼Œä¸åŒçº§åˆ«çš„äººèƒ½è¿›å…¥ä¸åŒçš„åŒºåŸŸ

```
æƒé™åˆ†çº§ç¤ºä¾‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘‘ è¶…çº§ç®¡ç†å‘˜ - æ‰€æœ‰æƒé™         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¨â€ğŸ’¼ æ™®é€šç®¡ç†å‘˜ - å†…å®¹ç®¡ç†       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ æ™®é€šç”¨æˆ·   - æµè§ˆå’Œè´­ä¹°       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘» æœªç™»å½•ç”¨æˆ· - åªèƒ½æµè§ˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶


**æ ¸å¿ƒæ€æƒ³**ï¼šç»™æ¯ä¸ªç”¨æˆ·åˆ†é…è§’è‰²ï¼Œä¸åŒè§’è‰²æœ‰ä¸åŒæƒé™

| è§’è‰² | æƒé™åˆ—è¡¨ |
|------|----------|
| **admin** | âœ… ç”¨æˆ·ç®¡ç†<br/>âœ… ä¹¦ç±å¢åˆ æ”¹æŸ¥<br/>âœ… è®¢å•ç®¡ç†<br/>âœ… ç³»ç»Ÿè®¾ç½® |
| **editor** | âŒ ç”¨æˆ·ç®¡ç†<br/>âœ… ä¹¦ç±å¢åˆ æ”¹æŸ¥<br/>âœ… è®¢å•æŸ¥çœ‹<br/>âŒ ç³»ç»Ÿè®¾ç½® |
| **user** | âŒ ç”¨æˆ·ç®¡ç†<br/>âŒ ä¹¦ç±ç®¡ç†<br/>âœ… æµè§ˆå’Œè´­ä¹°<br/>âŒ ç³»ç»Ÿè®¾ç½® |
| **guest** | âŒ ç”¨æˆ·ç®¡ç†<br/>âŒ ä¹¦ç±ç®¡ç†<br/>âœ… æµè§ˆå•†å“<br/>âŒ ç³»ç»Ÿè®¾ç½® |

### 6.3 ç™»å½•æ£€æŸ¥Filter


```java
@WebFilter(urlPatterns = {"/admin/*", "/user/*"})
public class LoginCheckFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // è·å–å½“å‰è®¿é—®çš„è·¯å¾„
        String requestURI = req.getRequestURI();
        
        // æ£€æŸ¥Sessionä¸­æ˜¯å¦æœ‰ç”¨æˆ·ä¿¡æ¯
        HttpSession session = req.getSession();
        User user = (User) session.getAttribute("user");
        
        if (user == null) {
            // æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
            resp.sendRedirect(req.getContextPath() + "/login.jsp?msg=è¯·å…ˆç™»å½•");
            return;
        }
        
        // æ£€æŸ¥è®¿é—®æƒé™
        if (requestURI.contains("/admin/") && !"admin".equals(user.getRole())) {
            // ä¸æ˜¯ç®¡ç†å‘˜ä½†è®¿é—®ç®¡ç†å‘˜é¡µé¢
            resp.sendRedirect(req.getContextPath() + "/error.jsp?msg=æƒé™ä¸è¶³");
            return;
        }
        
        // æƒé™æ£€æŸ¥é€šè¿‡ï¼Œç»§ç»­è®¿é—®
        chain.doFilter(request, response);
    }
}
```

### 6.4 æƒé™éªŒè¯å·¥å…·ç±»


```java
public class PermissionUtil {
    
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æŒ‡å®šæƒé™
    public static boolean hasPermission(HttpServletRequest request, String permission) {
        HttpSession session = request.getSession();
        User user = (User) session.getAttribute("user");
        
        if (user == null) {
            return false;
        }
        
        return hasRolePermission(user.getRole(), permission);
    }
    
    // æ£€æŸ¥è§’è‰²æ˜¯å¦æœ‰æŒ‡å®šæƒé™
    private static boolean hasRolePermission(String role, String permission) {
        switch (role) {
            case "admin":
                return true; // ç®¡ç†å‘˜æœ‰æ‰€æœ‰æƒé™
            case "editor":
                return permission.equals("book_manage") || permission.equals("order_view");
            case "user":
                return permission.equals("book_buy") || permission.equals("profile_edit");
            default:
                return false;
        }
    }
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯ç®¡ç†å‘˜
    public static boolean isAdmin(HttpServletRequest request) {
        return hasPermission(request, "admin");
    }
    
    // è·å–å½“å‰ç”¨æˆ·
    public static User getCurrentUser(HttpServletRequest request) {
        HttpSession session = request.getSession();
        return (User) session.getAttribute("user");
    }
}
```

### 6.5 åœ¨JSPä¸­è¿›è¡Œæƒé™æ§åˆ¶


```jsp
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<div class="navbar">
    <c:choose>
        <c:when test="${sessionScope.user != null}">
            <!-- å·²ç™»å½•ç”¨æˆ·æ˜¾ç¤º -->
            <span>æ¬¢è¿, ${sessionScope.user.username}!</span>
            
            <!-- æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒèœå• -->
            <c:if test="${sessionScope.user.role == 'admin'}">
                <a href="admin/index.jsp">ç®¡ç†åå°</a>
                <a href="UserManageServlet">ç”¨æˆ·ç®¡ç†</a>
                <a href="BookManageServlet">ä¹¦ç±ç®¡ç†</a>
            </c:if>
            
            <c:if test="${sessionScope.user.role == 'user'}">
                <a href="user/profile.jsp">ä¸ªäººä¸­å¿ƒ</a>
                <a href="CartServlet">è´­ç‰©è½¦</a>
            </c:if>
            
            <a href="LogoutServlet">é€€å‡ºç™»å½•</a>
        </c:when>
        <c:otherwise>
            <!-- æœªç™»å½•ç”¨æˆ·æ˜¾ç¤º -->
            <a href="login.jsp">ç™»å½•</a>
            <a href="register.jsp">æ³¨å†Œ</a>
        </c:otherwise>
    </c:choose>
</div>
```

### 6.6 é€€å‡ºç™»å½•åŠŸèƒ½


```java
@WebServlet("/LogoutServlet")
public class LogoutServlet extends HttpServlet {
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–Session
        HttpSession session = request.getSession();
        
        // æ¸…é™¤ç”¨æˆ·ä¿¡æ¯
        session.removeAttribute("user");
        session.removeAttribute("username");
        
        // ä¹Ÿå¯ä»¥ç›´æ¥é”€æ¯æ•´ä¸ªSession
        // session.invalidate();
        
        // è·³è½¬åˆ°é¦–é¡µ
        response.sendRedirect("index.jsp?msg=é€€å‡ºæˆåŠŸ");
    }
}
```

---

## 7. ğŸ“¦ é¡¹ç›®æ‰“åŒ…éƒ¨ç½²


### 7.1 é¡¹ç›®æ‰“åŒ…å‡†å¤‡


**æ‰“åŒ…å‰æ£€æŸ¥æ¸…å•**ï¼š
- âœ… æ‰€æœ‰åŠŸèƒ½æµ‹è¯•å®Œæˆ
- âœ… æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
- âœ… å¤–éƒ¨ä¾èµ–jaråŒ…é½å…¨
- âœ… é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡®

### 7.2 ä½¿ç”¨Mavenæ‰“åŒ…


**å¦‚æœä½¿ç”¨Mavené¡¹ç›®**ï¼š

```xml
<!-- pom.xmlé…ç½® -->
<packaging>war</packaging>

<build>
    <finalName>BookStore</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.8.1</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>3.2.3</version>
        </plugin>
    </plugins>
</build>
```

**æ‰“åŒ…å‘½ä»¤**ï¼š
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd BookStore

# æ¸…ç†å¹¶æ‰“åŒ…
mvn clean package

# æ‰“åŒ…ååœ¨targetç›®å½•ç”ŸæˆBookStore.waræ–‡ä»¶
```

### 7.3 æ‰‹åŠ¨æ‰“åŒ…WARæ–‡ä»¶


**å¦‚æœæ˜¯æ™®é€šJava Webé¡¹ç›®**ï¼š

```
æ‰“åŒ…æ­¥éª¤ï¼š
1. ç¼–è¯‘æ‰€æœ‰Javaæ–‡ä»¶åˆ°classesç›®å½•
2. æŒ‰ç…§WARåŒ…ç»“æ„ç»„ç»‡æ–‡ä»¶
3. ä½¿ç”¨jarå‘½ä»¤æ‰“åŒ…

WARåŒ…æ ‡å‡†ç»“æ„ï¼š
BookStore.war
â”œâ”€â”€ WEB-INF/
â”‚   â”œâ”€â”€ web.xml
â”‚   â”œâ”€â”€ classes/           â† Javaå­—èŠ‚ç æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ dao/
â”‚   â”‚   â””â”€â”€ servlet/
â”‚   â””â”€â”€ lib/              â† jarä¾èµ–åŒ…
â”‚       â”œâ”€â”€ mysql-connector.jar
â”‚       â””â”€â”€ commons-fileupload.jar
â”œâ”€â”€ css/                  â† é™æ€èµ„æº
â”œâ”€â”€ js/
â”œâ”€â”€ images/
â”œâ”€â”€ uploads/
â””â”€â”€ *.jsp                â† JSPé¡µé¢
```

**æ‰‹åŠ¨æ‰“åŒ…å‘½ä»¤**ï¼š
```bash
# åˆ›å»ºWARåŒ…
jar -cvf BookStore.war -C WebContent .
```

### 7.4 Tomcatéƒ¨ç½²


#### ğŸ”§ éƒ¨ç½²æ–¹å¼ä¸€ï¼šç›´æ¥éƒ¨ç½²


```bash
# 1. åœæ­¢TomcatæœåŠ¡å™¨
sh shutdown.sh

# 2. å°†WARæ–‡ä»¶å¤åˆ¶åˆ°webappsç›®å½•
cp BookStore.war /path/to/tomcat/webapps/

# 3. å¯åŠ¨TomcatæœåŠ¡å™¨
sh startup.sh

# 4. Tomcatä¼šè‡ªåŠ¨è§£å‹WARæ–‡ä»¶å¹¶éƒ¨ç½²
```

#### ğŸŒ éƒ¨ç½²æ–¹å¼äºŒï¼šç®¡ç†ç•Œé¢éƒ¨ç½²


```
è®¿é—®æ­¥éª¤ï¼š
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080/manager/html
2. è¾“å…¥ç®¡ç†å‘˜è´¦å·å¯†ç 
3. åœ¨"éƒ¨ç½²"åŒºåŸŸé€‰æ‹©WARæ–‡ä»¶ä¸Šä¼ 
4. ç‚¹å‡»"éƒ¨ç½²"æŒ‰é’®
5. éƒ¨ç½²æˆåŠŸåå¯ä»¥çœ‹åˆ°åº”ç”¨åˆ—è¡¨
```

### 7.5 æ•°æ®åº“éƒ¨ç½²é…ç½®


**ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“é…ç½®**ï¼š

```java
// ä¿®æ”¹DBUtil.javaä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
public class DBUtil {
    // ç”Ÿäº§ç¯å¢ƒé…ç½®
    private static final String URL = "jdbc:mysql://æ•°æ®åº“æœåŠ¡å™¨IP:3306/bookstore";
    private static final String USERNAME = "ç”Ÿäº§ç¯å¢ƒç”¨æˆ·å";
    private static final String PASSWORD = "ç”Ÿäº§ç¯å¢ƒå¯†ç ";
    
    // ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¯»å–
    static {
        try {
            Properties props = new Properties();
            props.load(DBUtil.class.getResourceAsStream("/db.properties"));
            URL = props.getProperty("db.url");
            USERNAME = props.getProperty("db.username");
            PASSWORD = props.getProperty("db.password");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬**ï¼š
```sql
-- init.sql
CREATE DATABASE IF NOT EXISTS bookstore DEFAULT CHARSET utf8mb4;
USE bookstore;

-- åˆ›å»ºç”¨æˆ·è¡¨
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    role VARCHAR(20) DEFAULT 'user',
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºä¹¦ç±è¡¨
CREATE TABLE books (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(200) NOT NULL,
    author VARCHAR(100) NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    category VARCHAR(50),
    description TEXT,
    cover_image VARCHAR(500),
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO users (username, password, role) VALUES 
('admin', '123456', 'admin'),
('user1', '123456', 'user');

INSERT INTO books (title, author, price, category, description) VALUES 
('Javaç¼–ç¨‹æ€æƒ³', 'Bruce Eckel', 89.00, 'ç¼–ç¨‹', 'Javaç»å…¸æ•™ç¨‹'),
('Springå®æˆ˜', 'Craig Walls', 79.00, 'ç¼–ç¨‹', 'Springæ¡†æ¶å®æˆ˜æŒ‡å—');
```

### 7.6 éƒ¨ç½²åæµ‹è¯•


**æµ‹è¯•æ£€æŸ¥é¡¹**ï¼š

| æµ‹è¯•é¡¹ç›® | æµ‹è¯•æ–¹æ³• | é¢„æœŸç»“æœ |
|----------|----------|----------|
| **é¡µé¢è®¿é—®** | æµè§ˆå™¨æ‰“å¼€é¦–é¡µ | æ­£å¸¸æ˜¾ç¤ºï¼Œæ— 404é”™è¯¯ |
| **ç”¨æˆ·æ³¨å†Œ** | å¡«å†™æ³¨å†Œè¡¨å•æäº¤ | æˆåŠŸæ³¨å†Œï¼Œè·³è½¬ç™»å½•é¡µ |
| **ç”¨æˆ·ç™»å½•** | è¾“å…¥è´¦å·å¯†ç ç™»å½• | æˆåŠŸç™»å½•ï¼Œè·³è½¬ä¸»é¡µ |
| **æ•°æ®æŸ¥è¯¢** | æŸ¥çœ‹ä¹¦ç±åˆ—è¡¨ | æ­£å¸¸æ˜¾ç¤ºæ•°æ®åº“æ•°æ® |
| **æ–‡ä»¶ä¸Šä¼ ** | ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ | æ–‡ä»¶æˆåŠŸä¿å­˜åˆ°æœåŠ¡å™¨ |
| **æƒé™æ§åˆ¶** | æœªç™»å½•è®¿é—®ç®¡ç†é¡µé¢ | è·³è½¬åˆ°ç™»å½•é¡µé¢ |

**å¸¸è§éƒ¨ç½²é—®é¢˜åŠè§£å†³**ï¼š

> âš ï¸ **é—®é¢˜1ï¼š404é¡µé¢æ‰¾ä¸åˆ°**  
> **åŸå› **ï¼šWARåŒ…åç§°ä¸è®¿é—®è·¯å¾„ä¸åŒ¹é…  
> **è§£å†³**ï¼šç¡®ä¿è®¿é—®è·¯å¾„ä¸º `http://åŸŸå:ç«¯å£/WARåŒ…åç§°/é¡µé¢`

> âš ï¸ **é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥**  
> **åŸå› **ï¼šæ•°æ®åº“é…ç½®ä¿¡æ¯é”™è¯¯æˆ–æ•°æ®åº“æœåŠ¡æœªå¯åŠ¨  
> **è§£å†³**ï¼šæ£€æŸ¥æ•°æ®åº“é…ç½®ï¼Œç¡®ä¿æ•°æ®åº“æœåŠ¡æ­£å¸¸è¿è¡Œ

> âš ï¸ **é—®é¢˜3ï¼šä¸­æ–‡ä¹±ç **  
> **åŸå› **ï¼šå­—ç¬¦ç¼–ç è®¾ç½®ä¸ç»Ÿä¸€  
> **è§£å†³**ï¼šç»Ÿä¸€è®¾ç½®UTF-8ç¼–ç ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€Servletã€JSPé¡µé¢

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ ç³»ç»Ÿæ¶æ„ç†è§£ï¼š
â€¢ ä¸‰å±‚æ¶æ„æ¨¡å¼ï¼šè¡¨ç°å±‚ã€ä¸šåŠ¡å±‚ã€æ•°æ®å±‚
â€¢ MVCè®¾è®¡æ¨¡å¼ï¼šModel-View-Controller
â€¢ å„å±‚èŒè´£åˆ†å·¥æ˜ç¡®ï¼Œé™ä½è€¦åˆåº¦

ğŸ” ç”¨æˆ·è®¤è¯æˆæƒï¼š
â€¢ æ³¨å†Œç™»å½•åŸºæœ¬æµç¨‹
â€¢ Sessionä¼šè¯ç®¡ç†æœºåˆ¶
â€¢ åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
â€¢ Filterè¿›è¡Œç»Ÿä¸€æƒé™æ£€æŸ¥

ğŸ’¾ æ•°æ®åº“æ“ä½œç²¾é«“ï¼š
â€¢ CRUDå››å¤§åŸºæœ¬æ“ä½œ
â€¢ PreparedStatementé˜²SQLæ³¨å…¥
â€¢ äº‹åŠ¡æ§åˆ¶ä¿è¯æ•°æ®ä¸€è‡´æ€§
â€¢ è¿æ¥æ± ç®¡ç†æé«˜æ€§èƒ½

ğŸ“„ åˆ†é¡µæŠ€æœ¯è¦ç‚¹ï¼š
â€¢ LIMITå…³é”®å­—å®ç°åˆ†é¡µæŸ¥è¯¢
â€¢ åˆ†é¡µå‚æ•°è®¡ç®—é€»è¾‘
â€¢ ç”¨æˆ·ä½“éªŒå‹å¥½çš„é¡µé¢å¯¼èˆª
â€¢ å¤§æ•°æ®é‡å¤„ç†çš„å¿…å¤‡æŠ€èƒ½
```

### 8.2 å®æˆ˜å¼€å‘ç»éªŒæ€»ç»“


**ğŸ”¹ ä»£ç ç»„ç»‡æœ€ä½³å®è·µ**ï¼š
```
é¡¹ç›®ç»“æ„è§„èŒƒï¼š
â€¢ å®ä½“ç±»å•ç‹¬åŒ…ç®¡ç†ï¼ˆentityï¼‰
â€¢ æ•°æ®è®¿é—®å±‚ç»Ÿä¸€æ¥å£ï¼ˆdaoï¼‰  
â€¢ ä¸šåŠ¡é€»è¾‘å±‚å¤„ç†æ ¸å¿ƒåŠŸèƒ½ï¼ˆserviceï¼‰
â€¢ æ§åˆ¶å±‚è´Ÿè´£è¯·æ±‚åˆ†å‘ï¼ˆservletï¼‰
â€¢ å·¥å…·ç±»æä¾›é€šç”¨åŠŸèƒ½ï¼ˆutilï¼‰

å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼š
â€¢ æ•°æ®åº“æ“ä½œå¿…é¡»try-catch
â€¢ èµ„æºä½¿ç”¨å®Œæ¯•åŠæ—¶å…³é—­
â€¢ ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
â€¢ æ—¥å¿—è®°å½•ä¾¿äºé—®é¢˜æ’æŸ¥
```

**ğŸ”¹ å®‰å…¨é˜²æŠ¤è¦ç‚¹**ï¼š
```
è¾“å…¥æ•°æ®éªŒè¯ï¼š
â€¢ å‰ç«¯JavaScriptéªŒè¯ç”¨æˆ·ä½“éªŒ
â€¢ åç«¯JavaéªŒè¯ä¿è¯å®‰å…¨æ€§
â€¢ SQLæ³¨å…¥é˜²æŠ¤ä½¿ç”¨PreparedStatement
â€¢ XSSæ”»å‡»é˜²æŠ¤è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦

ä¼šè¯å®‰å…¨ç®¡ç†ï¼š
â€¢ Sessionè¶…æ—¶è®¾ç½®
â€¢ æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯
â€¢ å¯†ç åŠ å¯†å­˜å‚¨
â€¢ HTTPSä¼ è¾“æ•æ„Ÿæ•°æ®
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**ï¼š
```
æ•°æ®åº“ä¼˜åŒ–ï¼š
â€¢ åˆç†ä½¿ç”¨ç´¢å¼•æé«˜æŸ¥è¯¢é€Ÿåº¦
â€¢ åˆ†é¡µæŸ¥è¯¢å‡å°‘å†…å­˜å ç”¨
â€¢ è¿æ¥æ± å¤ç”¨æ•°æ®åº“è¿æ¥
â€¢ ç¼“å­˜çƒ­ç‚¹æ•°æ®å‡å°‘æ•°æ®åº“å‹åŠ›

å‰ç«¯ä¼˜åŒ–ï¼š
â€¢ CSS/JSæ–‡ä»¶å‹ç¼©åˆå¹¶
â€¢ å›¾ç‰‡æ ¼å¼ä¼˜åŒ–å’Œå‹ç¼©
â€¢ é™æ€èµ„æºCDNåŠ é€Ÿ
â€¢ æµè§ˆå™¨ç¼“å­˜ç­–ç•¥è®¾ç½®
```

### 8.3 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


| é—®é¢˜ç±»å‹ | **å…·ä½“è¡¨ç°** | **è§£å†³æ–¹æ¡ˆ** |
|----------|-------------|-------------|
| ğŸ› **ä¸­æ–‡ä¹±ç ** | é¡µé¢æ˜¾ç¤ºé—®å·æˆ–æ–¹å— | ç»Ÿä¸€UTF-8ç¼–ç ï¼š`request.setCharacterEncoding("UTF-8")` |
| ğŸ”— **Sessionå¤±æ•ˆ** | ç”¨æˆ·çŠ¶æ€ä¸¢å¤±ï¼Œé¢‘ç¹è·³ç™»å½• | æ£€æŸ¥Sessionè¶…æ—¶è®¾ç½®ï¼Œç¡®ä¿æ­£ç¡®å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ |
| ğŸ’¾ **å†…å­˜æº¢å‡º** | å¤§é‡æ•°æ®æŸ¥è¯¢å¯¼è‡´æœåŠ¡å™¨å¡æ­» | å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œé™åˆ¶å•æ¬¡æŸ¥è¯¢æ•°æ®é‡ |
| ğŸ”’ **æƒé™ç»•è¿‡** | ç›´æ¥è®¿é—®URLç»•è¿‡æƒé™æ£€æŸ¥ | ä½¿ç”¨Filterç»Ÿä¸€æ‹¦æˆªï¼Œæ£€æŸ¥æ‰€æœ‰å—ä¿æŠ¤èµ„æº |
| ğŸ“ **æ–‡ä»¶ä¸Šä¼ å¤±è´¥** | æ–‡ä»¶æ— æ³•ä¿å­˜æˆ–è·¯å¾„é”™è¯¯ | æ£€æŸ¥ç›®å½•æƒé™ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ŒéªŒè¯æ–‡ä»¶æ ¼å¼ |

### 8.4 å­¦ä¹ è¿›é˜¶å»ºè®®


**ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘**ï¼š
```
æ¡†æ¶æŠ€æœ¯å‡çº§ï¼š
â€¢ Spring MVCï¼šæ›´å¼ºå¤§çš„MVCæ¡†æ¶
â€¢ Spring Bootï¼šç®€åŒ–é…ç½®çš„å¿«é€Ÿå¼€å‘
â€¢ MyBatisï¼šä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶
â€¢ Spring Securityï¼šä¸“ä¸šçš„å®‰å…¨æ¡†æ¶

å‰ç«¯æŠ€æœ¯è¡¥å¼ºï¼š
â€¢ Vue.js/Reactï¼šç°ä»£å‰ç«¯æ¡†æ¶
â€¢ Ajaxå¼‚æ­¥äº¤äº’ï¼šæå‡ç”¨æˆ·ä½“éªŒ
â€¢ Bootstrapï¼šå“åº”å¼UIç»„ä»¶åº“
â€¢ RESTful APIï¼šå‰åç«¯åˆ†ç¦»æ¶æ„

éƒ¨ç½²è¿ç»´æŠ€èƒ½ï¼š
â€¢ Dockerå®¹å™¨åŒ–éƒ¨ç½²
â€¢ LinuxæœåŠ¡å™¨ç®¡ç†
â€¢ Nginxåå‘ä»£ç†
â€¢ MySQLä¸»ä»å¤åˆ¶
```

**ğŸ’¡ æŒç»­æå‡å»ºè®®**ï¼š
- **å¤šå®è·µ**ï¼šè‡ªå·±åŠ¨æ‰‹å®ç°å®Œæ•´é¡¹ç›®
- **è¯»æºç **ï¼šå­¦ä¹ ä¼˜ç§€å¼€æºé¡¹ç›®çš„è®¾è®¡æ€è·¯
- **å†™æ€»ç»“**ï¼šè®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- **é‡æ„ä»£ç **ï¼šä¸æ–­ä¼˜åŒ–ä»£ç ç»“æ„å’Œæ€§èƒ½
- **å…³æ³¨æ–°æŠ€æœ¯**ï¼šä¿æŒå­¦ä¹ çƒ­æƒ…ï¼Œè·Ÿä¸ŠæŠ€æœ¯å‘å±•

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> ğŸ¯ ä¸‰å±‚æ¶æ„åˆ†å·¥æ˜ï¼ŒMVCæ¨¡å¼ç†æ€è·¯  
> ğŸ” æ³¨å†Œç™»å½•åŠ æƒé™ï¼ŒSessionç®¡ç†è¦ç‰¢è®°  
> ğŸ’¾ å¢åˆ æ”¹æŸ¥CRUDå…¨ï¼Œåˆ†é¡µæŸ¥è¯¢æ€§èƒ½å¥½  
> ğŸ“ æ–‡ä»¶ä¸Šä¼ ä¸‹è½½é€šï¼Œæ‰“åŒ…éƒ¨ç½²é¡¹ç›®æˆ  
> ğŸš€ åŸºç¡€æ‰å®å‘å‰å†²ï¼Œæ¡†æ¶å­¦ä¹ è·¯æ›´å®½