---
title: 3ã€å¸¸ç”¨Filteråº”ç”¨åœºæ™¯
---
## ğŸ“š ç›®å½•

1. [Filteråº”ç”¨åœºæ™¯æ¦‚è¿°](#1-Filteråº”ç”¨åœºæ™¯æ¦‚è¿°)
2. [å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨](#2-å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨)
3. [ç™»å½•éªŒè¯è¿‡æ»¤å™¨](#3-ç™»å½•éªŒè¯è¿‡æ»¤å™¨)
4. [æƒé™æ£€æŸ¥è¿‡æ»¤å™¨](#4-æƒé™æ£€æŸ¥è¿‡æ»¤å™¨)
5. [æ—¥å¿—è®°å½•è¿‡æ»¤å™¨](#5-æ—¥å¿—è®°å½•è¿‡æ»¤å™¨)
6. [ç¼“å­˜æ§åˆ¶è¿‡æ»¤å™¨](#6-ç¼“å­˜æ§åˆ¶è¿‡æ»¤å™¨)
7. [è·¨åŸŸå¤„ç†è¿‡æ»¤å™¨](#7-è·¨åŸŸå¤„ç†è¿‡æ»¤å™¨)
8. [è¯·æ±‚å“åº”åŒ…è£…å™¨](#8-è¯·æ±‚å“åº”åŒ…è£…å™¨)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Filteråº”ç”¨åœºæ™¯æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Filterçš„åº”ç”¨åœºæ™¯


**ç®€å•ç†è§£**ï¼šFilterå°±åƒç”Ÿæ´»ä¸­çš„"æ£€æŸ¥ç«™"ï¼Œæ¯ä¸ªæ£€æŸ¥ç«™è´Ÿè´£ä¸åŒçš„æ£€æŸ¥å·¥ä½œã€‚

```
ğŸ  ç”Ÿæ´»ä¸­çš„æ£€æŸ¥ç«™ç±»æ¯”ï¼š
è¿›å…¥å°åŒº â†’ é—¨å«æ£€æŸ¥ â†’ èº«ä»½éªŒè¯
è¿›å…¥åŠå…¬æ¥¼ â†’ å‰å°ç™»è®° â†’ æƒé™ç¡®è®¤  
è¿›å…¥æœºåœº â†’ å®‰æ£€æ£€æŸ¥ â†’ å®‰å…¨éªŒè¯
ååœ°é“ â†’ åˆ·å¡æ£€æŸ¥ â†’ æ”¯ä»˜éªŒè¯

ğŸŒ Webåº”ç”¨ä¸­çš„Filterï¼š
ç”¨æˆ·è¯·æ±‚ â†’ ç¼–ç è¿‡æ»¤å™¨ â†’ å¤„ç†ä¸­æ–‡ä¹±ç 
         â†’ ç™»å½•è¿‡æ»¤å™¨ â†’ æ£€æŸ¥æ˜¯å¦ç™»å½•
         â†’ æƒé™è¿‡æ»¤å™¨ â†’ æ£€æŸ¥è®¿é—®æƒé™
         â†’ æ—¥å¿—è¿‡æ»¤å™¨ â†’ è®°å½•è®¿é—®ä¿¡æ¯
         â†’ åˆ°è¾¾Servlet â†’ å¤„ç†å…·ä½“ä¸šåŠ¡
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›åº”ç”¨åœºæ™¯


**è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š
- **ç»Ÿä¸€å¤„ç†**ï¼šé¿å…åœ¨æ¯ä¸ªServletä¸­é‡å¤ç›¸åŒçš„é€»è¾‘
- **å…³æ³¨ç‚¹åˆ†ç¦»**ï¼šè®©ä¸šåŠ¡ä»£ç ä¸“æ³¨äºä¸šåŠ¡ï¼Œè®©é€šç”¨é€»è¾‘äº¤ç»™Filter
- **ä»£ç å¤ç”¨**ï¼šä¸€ä¸ªFilterå¯ä»¥æœåŠ¡å¤šä¸ªServlet
- **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹é€šç”¨é€»è¾‘åªéœ€è¦æ”¹ä¸€ä¸ªåœ°æ–¹

```
âŒ æ²¡æœ‰Filterçš„ç—›è‹¦ï¼š
æ¯ä¸ªServletéƒ½è¦å†™ï¼š
â€¢ ç¼–ç è®¾ç½®ä»£ç 
â€¢ ç™»å½•æ£€æŸ¥ä»£ç   
â€¢ æƒé™éªŒè¯ä»£ç 
â€¢ æ—¥å¿—è®°å½•ä»£ç 
â†’ ä»£ç é‡å¤ï¼Œç»´æŠ¤å›°éš¾

âœ… ä½¿ç”¨Filterçš„å¥½å¤„ï¼š
å†™ä¸€æ¬¡Filterï¼Œå¤„å¤„ç”Ÿæ•ˆï¼š
â€¢ ç»Ÿä¸€ç¼–ç å¤„ç†
â€¢ ç»Ÿä¸€ç™»å½•æ£€æŸ¥
â€¢ ç»Ÿä¸€æƒé™æ§åˆ¶
â€¢ ç»Ÿä¸€æ—¥å¿—è®°å½•
â†’ ä»£ç æ¸…çˆ½ï¼Œç»´æŠ¤ç®€å•
```

### 1.3 å¸¸è§Filteråº”ç”¨åœºæ™¯åˆ†ç±»


**ğŸ“‹ Filteråº”ç”¨åœºæ™¯å…¨æ™¯å›¾**ï¼š

| ç±»å‹ | **åº”ç”¨åœºæ™¯** | **è§£å†³é—®é¢˜** | **ä½¿ç”¨é¢‘ç‡** |
|------|-------------|-------------|-------------|
| ğŸ”¤ **å­—ç¬¦å¤„ç†** | `ç¼–ç è¿‡æ»¤å™¨` | `ä¸­æ–‡ä¹±ç ` | `â­â­â­â­â­` |
| ğŸ” **å®‰å…¨æ§åˆ¶** | `ç™»å½•éªŒè¯ã€æƒé™æ£€æŸ¥` | `æœªæˆæƒè®¿é—®` | `â­â­â­â­â­` |
| ğŸ“ **æ—¥å¿—è®°å½•** | `è®¿é—®æ—¥å¿—ã€æ“ä½œæ—¥å¿—` | `ç³»ç»Ÿç›‘æ§` | `â­â­â­â­â˜†` |
| ğŸŒ **ç½‘ç»œå¤„ç†** | `è·¨åŸŸå¤„ç†ã€ç¼“å­˜æ§åˆ¶` | `æµè§ˆå™¨é™åˆ¶` | `â­â­â­â˜†â˜†` |
| ğŸ”§ **æ•°æ®å¤„ç†** | `è¯·æ±‚å“åº”åŒ…è£…` | `æ•°æ®æ ¼å¼ç»Ÿä¸€` | `â­â­â­â˜†â˜†` |

---

## 2. ğŸ”¤ å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨


### 2.1 ä¸­æ–‡ä¹±ç é—®é¢˜çš„æ ¹æº


**ä¸ºä»€ä¹ˆä¼šæœ‰ä¸­æ–‡ä¹±ç ï¼Ÿ**
æƒ³è±¡ä½ å†™äº†ä¸€å°ä¸­æ–‡ä¿¡ï¼Œä½†æ”¶ä¿¡äººç”¨é”™è¯¯çš„"è§£ç æ–¹å¼"æ¥è¯»ï¼Œè‡ªç„¶çœ‹åˆ°çš„å°±æ˜¯ä¹±ç ã€‚

```
ğŸ”¤ ç¼–ç è§£ç è¿‡ç¨‹ï¼š
æµè§ˆå™¨å‘é€ â†’ "ä½ å¥½" (UTF-8ç¼–ç ) â†’ 01001000...
æœåŠ¡å™¨æ¥æ”¶ â†’ 01001000... (å¦‚æœç”¨GBKè§£ç ) â†’ "æµ£çŠ²ã‚½" (ä¹±ç )

æ­£ç¡®çš„è¿‡ç¨‹åº”è¯¥æ˜¯ï¼š
æµè§ˆå™¨å‘é€ â†’ "ä½ å¥½" (UTF-8ç¼–ç ) â†’ 01001000...
æœåŠ¡å™¨æ¥æ”¶ â†’ 01001000... (ç”¨UTF-8è§£ç ) â†’ "ä½ å¥½" (æ­£ç¡®)
```

### 2.2 ç¼–ç è¿‡æ»¤å™¨çš„å®ç°


**ğŸ› ï¸ ç¼–ç è¿‡æ»¤å™¨çš„å·¥ä½œåŸç†**ï¼š

```java
// ç¼–ç è¿‡æ»¤å™¨ - ç»Ÿä¸€å¤„ç†å­—ç¬¦ç¼–ç 
@WebFilter("/*")  // æ‹¦æˆªæ‰€æœ‰è¯·æ±‚
public class EncodingFilter implements Filter {
    
    private String encoding = "UTF-8";  // é»˜è®¤ç¼–ç 
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        // è®¾ç½®è¯·æ±‚ç¼–ç  - å¤„ç†è¡¨å•æäº¤çš„ä¸­æ–‡
        request.setCharacterEncoding(encoding);
        
        // è®¾ç½®å“åº”ç¼–ç  - ç¡®ä¿è¾“å‡ºçš„ä¸­æ–‡æ­£ç¡®æ˜¾ç¤º
        response.setCharacterEncoding(encoding);
        response.setContentType("text/html;charset=" + encoding);
        
        // ç»§ç»­æ‰§è¡Œåé¢çš„è¿‡æ»¤å™¨å’ŒServlet
        chain.doFilter(request, response);
    }
}
```

**ğŸ’¡ ç¼–ç è¿‡æ»¤å™¨çš„ä½œç”¨è§£æ**ï¼š

```
è¯·æ±‚å¤„ç†æµç¨‹ï¼š
1. ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥"å¼ ä¸‰"
2. æµè§ˆå™¨ç”¨UTF-8ç¼–ç å‘é€
3. ç¼–ç è¿‡æ»¤å™¨è®¾ç½®request.setCharacterEncoding("UTF-8")
4. Servletç”¨request.getParameter()è·å–åˆ°æ­£ç¡®çš„"å¼ ä¸‰"

å“åº”å¤„ç†æµç¨‹ï¼š
1. Servletè¦è¾“å‡º"æ¬¢è¿å¼ ä¸‰"
2. ç¼–ç è¿‡æ»¤å™¨è®¾ç½®response.setCharacterEncoding("UTF-8")
3. æµè§ˆå™¨æ¥æ”¶åˆ°æ­£ç¡®çš„UTF-8ç¼–ç æ•°æ®
4. ç”¨æˆ·çœ‹åˆ°æ­£ç¡®çš„"æ¬¢è¿å¼ ä¸‰"
```

### 2.3 ç¼–ç è¿‡æ»¤å™¨çš„é…ç½®ä¼˜åŒ–


**âš™ï¸ å¯é…ç½®çš„ç¼–ç è¿‡æ»¤å™¨**ï¼š

```java
public class ConfigurableEncodingFilter implements Filter {
    private String encoding;
    
    @Override
    public void init(FilterConfig config) throws ServletException {
        // ä»web.xmlè¯»å–é…ç½®ï¼Œå¦‚æœæ²¡æœ‰é…ç½®åˆ™ä½¿ç”¨é»˜è®¤å€¼
        encoding = config.getInitParameter("encoding");
        if (encoding == null) {
            encoding = "UTF-8";
        }
    }
    
    // doFilteræ–¹æ³•åŒä¸Š...
}
```

**web.xmlé…ç½®**ï¼š
```xml
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>com.example.filter.ConfigurableEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

**ğŸ¯ ä½¿ç”¨å»ºè®®**ï¼š
```
âœ… ç¼–ç è¿‡æ»¤å™¨æœ€ä½³å®è·µï¼š
â€¢ æ”¾åœ¨æ‰€æœ‰Filterçš„æœ€å‰é¢æ‰§è¡Œ
â€¢ ä½¿ç”¨ "/*" æ‹¦æˆªæ‰€æœ‰è¯·æ±‚
â€¢ ç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç 
â€¢ åœ¨é¡¹ç›®åˆæœŸå°±é…ç½®å¥½ï¼Œé¿å…åæœŸæ”¹åŠ¨

âŒ å¸¸è§é”™è¯¯ï¼š
â€¢ å¿˜è®°è®¾ç½®è¯·æ±‚ç¼–ç ï¼Œè¡¨å•ä¸­æ–‡ä¹±ç 
â€¢ å¿˜è®°è®¾ç½®å“åº”ç¼–ç ï¼Œè¾“å‡ºä¸­æ–‡ä¹±ç 
â€¢ Filteré¡ºåºä¸å¯¹ï¼Œç¼–ç è®¾ç½®è¢«å…¶ä»–Filterå½±å“
```

---

## 3. ğŸ” ç™»å½•éªŒè¯è¿‡æ»¤å™¨


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦ç™»å½•éªŒè¯


**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
å°±åƒè¿›å…¥é“¶è¡ŒåŠä¸šåŠ¡éœ€è¦èº«ä»½è¯ï¼Œè®¿é—®ç½‘ç«™çš„æŸäº›é¡µé¢ä¹Ÿéœ€è¦å…ˆç™»å½•éªŒè¯èº«ä»½ã€‚

```
ğŸ¦ é“¶è¡Œä¸šåŠ¡æµç¨‹ï¼š
å®¢æˆ·åˆ°è¾¾ â†’ ä¿å®‰æ£€æŸ¥èº«ä»½è¯ â†’ é€šè¿‡/æ‹’ç»
åˆæ³•å®¢æˆ· â†’ ç»§ç»­åŠç†ä¸šåŠ¡
éæ³•è®¿å®¢ â†’ è¯·å…ˆåŠç†ç›¸å…³æ‰‹ç»­

ğŸŒ ç½‘ç«™è®¿é—®æµç¨‹ï¼š
ç”¨æˆ·è®¿é—® â†’ ç™»å½•éªŒè¯è¿‡æ»¤å™¨ â†’ æ£€æŸ¥Session
å·²ç™»å½•ç”¨æˆ· â†’ ç»§ç»­è®¿é—®é¡µé¢  
æœªç™»å½•ç”¨æˆ· â†’ é‡å®šå‘åˆ°ç™»å½•é¡µ
```

### 3.2 ç™»å½•éªŒè¯è¿‡æ»¤å™¨å®ç°


**ğŸ”’ åŸºç¡€ç™»å½•éªŒè¯è¿‡æ»¤å™¨**ï¼š

```java
@WebFilter("/admin/*")  // åªæ‹¦æˆªç®¡ç†å‘˜é¡µé¢
public class LoginFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        // è½¬æ¢ä¸ºHTTPè¯·æ±‚å’Œå“åº”å¯¹è±¡
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // æ£€æŸ¥Sessionä¸­æ˜¯å¦æœ‰ç”¨æˆ·ä¿¡æ¯
        HttpSession session = req.getSession();
        Object user = session.getAttribute("user");
        
        if (user != null) {
            // ç”¨æˆ·å·²ç™»å½•ï¼Œç»§ç»­æ‰§è¡Œ
            chain.doFilter(request, response);
        } else {
            // ç”¨æˆ·æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
            resp.sendRedirect(req.getContextPath() + "/login.jsp");
        }
    }
}
```

**ğŸ¯ ç™»å½•éªŒè¯çš„å·¥ä½œæµç¨‹**ï¼š

```
ç”¨æˆ·è®¿é—®æµç¨‹å›¾ï¼š
ç”¨æˆ·è¯·æ±‚ /admin/userList
    â†“
ç™»å½•éªŒè¯è¿‡æ»¤å™¨æ£€æŸ¥
    â†“
Sessionä¸­æœ‰userå¯¹è±¡ï¼Ÿ
    â†“               â†“
   æ˜¯               å¦
    â†“               â†“
ç»§ç»­è®¿é—®é¡µé¢    é‡å®šå‘åˆ°login.jsp
```

### 3.3 æ”¹è¿›çš„ç™»å½•éªŒè¯è¿‡æ»¤å™¨


**ğŸš€ åŠŸèƒ½å¢å¼ºç‰ˆæœ¬**ï¼š

```java
public class AdvancedLoginFilter implements Filter {
    
    // ä¸éœ€è¦ç™»å½•å°±èƒ½è®¿é—®çš„é¡µé¢
    private Set<String> excludeUrls;
    
    @Override
    public void init(FilterConfig config) throws ServletException {
        excludeUrls = new HashSet<>();
        excludeUrls.add("/login.jsp");
        excludeUrls.add("/register.jsp");
        excludeUrls.add("/loginServlet");
        excludeUrls.add("/registerServlet");
    }
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        String requestURI = req.getRequestURI();
        String contextPath = req.getContextPath();
        String path = requestURI.substring(contextPath.length());
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯ä¸éœ€è¦ç™»å½•çš„é¡µé¢
        if (excludeUrls.contains(path)) {
            chain.doFilter(request, response);
            return;
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        HttpSession session = req.getSession();
        Object user = session.getAttribute("user");
        
        if (user != null) {
            chain.doFilter(request, response);
        } else {
            // è®°ä½ç”¨æˆ·æƒ³è®¿é—®çš„é¡µé¢ï¼Œç™»å½•åå¯ä»¥è·³è½¬å›æ¥
            session.setAttribute("targetUrl", requestURI);
            resp.sendRedirect(contextPath + "/login.jsp");
        }
    }
}
```

### 3.4 ç™»å½•éªŒè¯çš„å®ç”¨æŠ€å·§


**ğŸ’¡ å®ç”¨åŠŸèƒ½æ‰©å±•**ï¼š

```
ç™»å½•éªŒè¯è¿‡æ»¤å™¨å¸¸è§æ‰©å±•ï¼š

1. è®°ä½è®¿é—®é¡µé¢ï¼š
   â€¢ ç”¨æˆ·æƒ³è®¿é—®Aé¡µé¢ä½†æœªç™»å½•
   â€¢ é‡å®šå‘åˆ°ç™»å½•é¡µ
   â€¢ ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬å›Aé¡µé¢

2. ç™»å½•è¶…æ—¶æ£€æŸ¥ï¼š
   â€¢ æ£€æŸ¥æœ€åæ´»åŠ¨æ—¶é—´
   â€¢ è¶…æ—¶è‡ªåŠ¨é€€å‡ºç™»å½•
   â€¢ æé†’ç”¨æˆ·é‡æ–°ç™»å½•

3. å¤šçº§æƒé™æ”¯æŒï¼š
   â€¢ ä¸åŒç”¨æˆ·ç±»å‹ä¸åŒæƒé™
   â€¢ ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ã€VIPç”¨æˆ·ç­‰
   â€¢ çµæ´»çš„æƒé™æ§åˆ¶æœºåˆ¶

4. å®‰å…¨å¢å¼ºï¼š
   â€¢ é˜²æ­¢SessionåŠ«æŒ
   â€¢ IPåœ°å€éªŒè¯
   â€¢ ç”¨æˆ·ä»£ç†éªŒè¯
```

---

## 4. âš–ï¸ æƒé™æ£€æŸ¥è¿‡æ»¤å™¨


### 4.1 æƒé™æ§åˆ¶çš„å¿…è¦æ€§


**æƒé™æ§åˆ¶å°±åƒå…¬å¸çš„é—¨ç¦ç³»ç»Ÿ**ï¼š
- æ‰€æœ‰å‘˜å·¥éƒ½èƒ½è¿›å…¥å…¬å¸å¤§é—¨ï¼ˆç™»å½•ï¼‰
- ä½†åªæœ‰è´¢åŠ¡äººå‘˜èƒ½è¿›è´¢åŠ¡å®¤ï¼ˆæƒé™ï¼‰
- åªæœ‰é¢†å¯¼èƒ½è¿›ä¼šè®®å®¤ï¼ˆæ›´é«˜æƒé™ï¼‰

```
ğŸ¢ å…¬å¸é—¨ç¦ç³»ç»Ÿï¼š
å‘˜å·¥åˆ·å¡ â†’ é—¨ç¦ç³»ç»Ÿ â†’ æ£€æŸ¥æƒé™
â”œâ”€ è´¢åŠ¡æƒé™ â†’ å¯è¿›è´¢åŠ¡å®¤
â”œâ”€ äººäº‹æƒé™ â†’ å¯è¿›äººäº‹éƒ¨
â”œâ”€ æŠ€æœ¯æƒé™ â†’ å¯è¿›æœºæˆ¿
â””â”€ ç®¡ç†æƒé™ â†’ å¯è¿›æ‰€æœ‰åŒºåŸŸ

ğŸŒ ç½‘ç«™æƒé™ç³»ç»Ÿï¼š
ç”¨æˆ·è®¿é—® â†’ æƒé™è¿‡æ»¤å™¨ â†’ æ£€æŸ¥æƒé™
â”œâ”€ æ™®é€šç”¨æˆ· â†’ åªèƒ½çœ‹ä¸ªäººä¿¡æ¯
â”œâ”€ ç®¡ç†å‘˜ â†’ å¯ä»¥ç®¡ç†ç”¨æˆ·
â””â”€ è¶…çº§ç®¡ç†å‘˜ â†’ å¯ä»¥ç®¡ç†ç³»ç»Ÿ
```

### 4.2 åŸºç¡€æƒé™æ£€æŸ¥è¿‡æ»¤å™¨


**ğŸ” è§’è‰²åŸºç¡€çš„æƒé™æ§åˆ¶**ï¼š

```java
@WebFilter("/admin/*")
public class AdminPermissionFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // å…ˆæ£€æŸ¥æ˜¯å¦ç™»å½•
        HttpSession session = req.getSession();
        User user = (User) session.getAttribute("user");
        
        if (user == null) {
            // æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
            resp.sendRedirect(req.getContextPath() + "/login.jsp");
            return;
        }
        
        // æ£€æŸ¥æ˜¯å¦æœ‰ç®¡ç†å‘˜æƒé™
        if ("admin".equals(user.getRole())) {
            // æœ‰ç®¡ç†å‘˜æƒé™ï¼Œç»§ç»­æ‰§è¡Œ
            chain.doFilter(request, response);
        } else {
            // æƒé™ä¸è¶³ï¼Œæ˜¾ç¤ºé”™è¯¯é¡µé¢
            resp.sendRedirect(req.getContextPath() + "/error/403.jsp");
        }
    }
}
```

### 4.3 çµæ´»çš„æƒé™æ£€æŸ¥ç³»ç»Ÿ


**ğŸš€ åŸºäºURLçš„æƒé™æ§åˆ¶**ï¼š

```java
public class FlexiblePermissionFilter implements Filter {
    
    // URLæƒé™æ˜ å°„è¡¨
    private Map<String, String> urlPermissionMap;
    
    @Override
    public void init(FilterConfig config) throws ServletException {
        urlPermissionMap = new HashMap<>();
        // é…ç½®ä¸åŒURLéœ€è¦çš„æƒé™
        urlPermissionMap.put("/admin/user", "USER_MANAGE");
        urlPermissionMap.put("/admin/product", "PRODUCT_MANAGE");
        urlPermissionMap.put("/admin/order", "ORDER_MANAGE");
        urlPermissionMap.put("/admin/system", "SYSTEM_MANAGE");
    }
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        String requestURI = req.getRequestURI();
        String contextPath = req.getContextPath();
        String path = requestURI.substring(contextPath.length());
        
        // è·å–å½“å‰ç”¨æˆ·
        HttpSession session = req.getSession();
        User user = (User) session.getAttribute("user");
        
        // æ£€æŸ¥è¯¥URLéœ€è¦çš„æƒé™
        String requiredPermission = urlPermissionMap.get(path);
        
        if (requiredPermission != null) {
            if (user == null || !user.hasPermission(requiredPermission)) {
                // æƒé™ä¸è¶³
                req.setAttribute("errorMsg", "æ‚¨æ²¡æœ‰è®¿é—®æ­¤é¡µé¢çš„æƒé™");
                req.getRequestDispatcher("/error/403.jsp").forward(req, resp);
                return;
            }
        }
        
        chain.doFilter(request, response);
    }
}
```

### 4.4 æƒé™æ§åˆ¶æœ€ä½³å®è·µ


**ğŸ“‹ æƒé™è®¾è®¡åŸåˆ™**ï¼š

```
ğŸ¯ æƒé™æ§åˆ¶æœ€ä½³å®è·µï¼š

1. æœ€å°æƒé™åŸåˆ™ï¼š
   â€¢ ç”¨æˆ·åªè·å¾—å®Œæˆå·¥ä½œå¿…éœ€çš„æœ€å°æƒé™
   â€¢ é»˜è®¤æ‹’ç»è®¿é—®ï¼Œæ˜ç¡®æˆæƒæ‰å…è®¸
   â€¢ å®šæœŸå®¡æŸ¥å’Œè°ƒæ•´æƒé™

2. åˆ†å±‚æƒé™è®¾è®¡ï¼š
   â€¢ åŠŸèƒ½æƒé™ï¼šèƒ½åšä»€ä¹ˆæ“ä½œ
   â€¢ æ•°æ®æƒé™ï¼šèƒ½çœ‹ä»€ä¹ˆæ•°æ®  
   â€¢ é¡µé¢æƒé™ï¼šèƒ½è®¿é—®ä»€ä¹ˆé¡µé¢

3. æ˜“äºç»´æŠ¤ï¼š
   â€¢ æƒé™é…ç½®å¤–éƒ¨åŒ–ï¼ˆæ•°æ®åº“æˆ–é…ç½®æ–‡ä»¶ï¼‰
   â€¢ æƒé™å˜æ›´ä¸éœ€è¦ä¿®æ”¹ä»£ç 
   â€¢ æ¸…æ™°çš„æƒé™å‘½åè§„èŒƒ

4. ç”¨æˆ·ä½“éªŒï¼š
   â€¢ æ˜ç¡®çš„é”™è¯¯æç¤ºä¿¡æ¯
   â€¢ å¼•å¯¼ç”¨æˆ·ç”³è¯·æƒé™
   â€¢ é¿å…ç”¨æˆ·çœ‹åˆ°æ— æƒé™çš„åŠŸèƒ½
```

**âš ï¸ æƒé™æ§åˆ¶æ³¨æ„äº‹é¡¹**ï¼š
```
å¸¸è§å®‰å…¨é—®é¢˜ï¼š
âŒ åªåœ¨å‰ç«¯éšè—æŒ‰é’®ï¼Œåç«¯ä¸æ£€æŸ¥æƒé™
âŒ æƒé™æ£€æŸ¥é€»è¾‘åˆ†æ•£åœ¨å„ä¸ªServletä¸­
âŒ æƒé™æå‡æ¼æ´ï¼ˆæ™®é€šç”¨æˆ·èƒ½æ‰§è¡Œç®¡ç†å‘˜æ“ä½œï¼‰
âŒ æƒé™æ£€æŸ¥é—æ¼æŸäº›URLè·¯å¾„

å®‰å…¨å»ºè®®ï¼š
âœ… å‰åç«¯éƒ½è¦åšæƒé™æ£€æŸ¥
âœ… ä½¿ç”¨Filterç»Ÿä¸€è¿›è¡Œæƒé™æ§åˆ¶
âœ… ç™½åå•æ–¹å¼é…ç½®æƒé™
âœ… å®šæœŸè¿›è¡Œå®‰å…¨æµ‹è¯•
```

---

## 5. ğŸ“ æ—¥å¿—è®°å½•è¿‡æ»¤å™¨


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—è®°å½•


**æ—¥å¿—å°±åƒç›‘æ§æ‘„åƒå¤´**ï¼š
å¸®åŠ©æˆ‘ä»¬äº†è§£ç³»ç»Ÿè¿è¡Œæƒ…å†µï¼Œå‡ºé—®é¢˜æ—¶èƒ½å¿«é€Ÿå®šä½åŸå› ã€‚

```
ğŸ¢ ç›‘æ§æ‘„åƒå¤´çš„ä½œç”¨ï¼š
â€¢ è®°å½•è°ä»€ä¹ˆæ—¶å€™è¿›å…¥äº†å“ªä¸ªæˆ¿é—´
â€¢ å‘ç°å¼‚å¸¸è¡Œä¸ºåŠæ—¶æŠ¥è­¦
â€¢ å‡ºç°é—®é¢˜æ—¶å›çœ‹å½•åƒæ‰¾åŸå› 
â€¢ ç»Ÿè®¡äººæµé‡ä¼˜åŒ–å¸ƒå±€

ğŸ“ ç³»ç»Ÿæ—¥å¿—çš„ä½œç”¨ï¼š
â€¢ è®°å½•è°ä»€ä¹ˆæ—¶å€™è®¿é—®äº†å“ªä¸ªé¡µé¢
â€¢ å‘ç°å¼‚å¸¸è®¿é—®åŠæ—¶é¢„è­¦
â€¢ å‡ºç°é”™è¯¯æ—¶æŸ¥çœ‹æ—¥å¿—æ‰¾bug
â€¢ åˆ†æè®¿é—®æ•°æ®ä¼˜åŒ–æ€§èƒ½
```

### 5.2 åŸºç¡€è®¿é—®æ—¥å¿—è¿‡æ»¤å™¨


**ğŸ“Š ç®€å•çš„è®¿é—®æ—¥å¿—è®°å½•**ï¼š

```java
@WebFilter("/*")
public class AccessLogFilter implements Filter {
    
    private static final Logger logger = LoggerFactory.getLogger(AccessLogFilter.class);
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        
        // è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´
        long startTime = System.currentTimeMillis();
        
        // è®°å½•è¯·æ±‚ä¿¡æ¯
        String clientIP = req.getRemoteAddr();
        String method = req.getMethod();
        String requestURI = req.getRequestURI();
        String userAgent = req.getHeader("User-Agent");
        
        try {
            // ç»§ç»­æ‰§è¡Œè¯·æ±‚
            chain.doFilter(request, response);
            
            // è®¡ç®—å¤„ç†æ—¶é—´
            long duration = System.currentTimeMillis() - startTime;
            
            // è®°å½•è®¿é—®æ—¥å¿—
            logger.info("è®¿é—®æ—¥å¿—: IP={}, æ–¹æ³•={}, URI={}, è€—æ—¶={}ms", 
                       clientIP, method, requestURI, duration);
                       
        } catch (Exception e) {
            // è®°å½•é”™è¯¯æ—¥å¿—
            logger.error("è¯·æ±‚å¤„ç†å¼‚å¸¸: IP={}, URI={}, é”™è¯¯={}", 
                        clientIP, requestURI, e.getMessage());
            throw e;
        }
    }
}
```

### 5.3 å¢å¼ºç‰ˆæ—¥å¿—è¿‡æ»¤å™¨


**ğŸ” è¯¦ç»†çš„æ—¥å¿—è®°å½•ç³»ç»Ÿ**ï¼š

```java
public class DetailedLogFilter implements Filter {
    
    private static final Logger accessLogger = LoggerFactory.getLogger("ACCESS");
    private static final Logger errorLogger = LoggerFactory.getLogger("ERROR");
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // åˆ›å»ºæ—¥å¿—è®°å½•å¯¹è±¡
        AccessLog log = new AccessLog();
        log.setStartTime(System.currentTimeMillis());
        log.setClientIP(getClientIP(req));
        log.setMethod(req.getMethod());
        log.setRequestURI(req.getRequestURI());
        log.setUserAgent(req.getHeader("User-Agent"));
        
        // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
        HttpSession session = req.getSession(false);
        if (session != null) {
            User user = (User) session.getAttribute("user");
            if (user != null) {
                log.setUserId(user.getId());
                log.setUsername(user.getUsername());
            }
        }
        
        try {
            chain.doFilter(request, response);
            
            // è®°å½•å“åº”ä¿¡æ¯
            log.setEndTime(System.currentTimeMillis());
            log.setDuration(log.getEndTime() - log.getStartTime());
            log.setStatusCode(resp.getStatus());
            
            // è¾“å‡ºè®¿é—®æ—¥å¿—
            accessLogger.info(log.toString());
            
            // æ€§èƒ½é¢„è­¦
            if (log.getDuration() > 5000) { // è¶…è¿‡5ç§’
                accessLogger.warn("æ…¢è¯·æ±‚è­¦å‘Š: {}", log.toString());
            }
            
        } catch (Exception e) {
            log.setEndTime(System.currentTimeMillis());
            log.setException(e.getMessage());
            errorLogger.error("è¯·æ±‚å¼‚å¸¸: {}", log.toString(), e);
            throw e;
        }
    }
    
    // è·å–çœŸå®å®¢æˆ·ç«¯IPï¼ˆè€ƒè™‘ä»£ç†æœåŠ¡å™¨ï¼‰
    private String getClientIP(HttpServletRequest request) {
        String ip = request.getHeader("X-Forwarded-For");
        if (ip == null || ip.isEmpty()) {
            ip = request.getHeader("X-Real-IP");
        }
        if (ip == null || ip.isEmpty()) {
            ip = request.getRemoteAddr();
        }
        return ip;
    }
}
```

### 5.4 æ—¥å¿—åˆ†æä¸ç›‘æ§


**ğŸ“Š æ—¥å¿—çš„å®ç”¨ä»·å€¼**ï¼š

```
æ—¥å¿—æ•°æ®çš„ç”¨é€”ï¼š

1. æ€§èƒ½ç›‘æ§ï¼š
   â€¢ ç»Ÿè®¡é¡µé¢å¹³å‡å“åº”æ—¶é—´
   â€¢ å‘ç°æ€§èƒ½ç“¶é¢ˆé¡µé¢
   â€¢ ç›‘æ§ç³»ç»Ÿè´Ÿè½½æƒ…å†µ

2. å®‰å…¨åˆ†æï¼š
   â€¢ æ£€æµ‹å¼‚å¸¸è®¿é—®æ¨¡å¼
   â€¢ å‘ç°æš´åŠ›ç ´è§£æ”»å‡»
   â€¢ è¿½è¸ªå¯ç–‘ç”¨æˆ·è¡Œä¸º

3. ä¸šåŠ¡åˆ†æï¼š
   â€¢ ç»Ÿè®¡é¡µé¢è®¿é—®é‡
   â€¢ åˆ†æç”¨æˆ·è¡Œä¸ºè·¯å¾„
   â€¢ ä¼˜åŒ–äº§å“åŠŸèƒ½è®¾è®¡

4. é—®é¢˜æ’æŸ¥ï¼š
   â€¢ å¿«é€Ÿå®šä½é”™è¯¯åŸå› 
   â€¢ é‡ç°ç”¨æˆ·æ“ä½œåœºæ™¯
   â€¢ åˆ†æç³»ç»Ÿå¼‚å¸¸æ¨¡å¼
```

**ğŸ¯ æ—¥å¿—è®°å½•æœ€ä½³å®è·µ**ï¼š
```
âœ… æ—¥å¿—è®°å½•å»ºè®®ï¼š
â€¢ è®°å½•å…³é”®ä¿¡æ¯ä½†ä¸è¿‡åº¦è¯¦ç»†
â€¢ æ•æ„Ÿä¿¡æ¯è¦è„±æ•å¤„ç†
â€¢ ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—æ ¼å¼
â€¢ è®¾ç½®åˆç†çš„æ—¥å¿—çº§åˆ«
â€¢ å®šæœŸæ¸…ç†å†å²æ—¥å¿—

âŒ æ—¥å¿—è®°å½•è¯¯åŒºï¼š
â€¢ è®°å½•ç”¨æˆ·å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯
â€¢ æ—¥å¿—ä¿¡æ¯è¿‡äºè¯¦ç»†å½±å“æ€§èƒ½
â€¢ æ²¡æœ‰æ—¥å¿—è½®è½¬å¯¼è‡´ç£ç›˜æ»¡
â€¢ æ—¥å¿—çº§åˆ«è®¾ç½®ä¸å½“
```

---

## 6. ğŸ’¾ ç¼“å­˜æ§åˆ¶è¿‡æ»¤å™¨


### 6.1 æµè§ˆå™¨ç¼“å­˜çš„åŒé¢æ€§


**ç¼“å­˜å°±åƒå®¶é‡Œçš„å†°ç®±**ï¼š
- å¥½å¤„ï¼šéœ€è¦çš„æ—¶å€™ç›´æ¥å–ï¼Œä¸ç”¨è·‘è¶…å¸‚
- åå¤„ï¼šæ”¾å¤ªä¹…çš„ä¸œè¥¿å¯èƒ½è¿‡æœŸäº†

```
ğŸ  å†°ç®±ç¼“å­˜ç±»æ¯”ï¼š
æ–°é²œé£Ÿç‰© â†’ æ”¾å…¥å†°ç®± â†’ ä¸‹æ¬¡ç›´æ¥å–ç”¨
è¿‡æœŸé£Ÿç‰© â†’ éœ€è¦æ¸…ç† â†’ é‡æ–°ä¹°æ–°é²œçš„

ğŸŒ æµè§ˆå™¨ç¼“å­˜ï¼š
ç½‘é¡µèµ„æº â†’ å­˜åˆ°æœ¬åœ° â†’ ä¸‹æ¬¡ç›´æ¥ä½¿ç”¨  
è¿‡æœŸèµ„æº â†’ éœ€è¦æ›´æ–° â†’ é‡æ–°ä»æœåŠ¡å™¨è·å–
```

### 6.2 é™æ€èµ„æºç¼“å­˜è¿‡æ»¤å™¨


**âš¡ é™æ€èµ„æºç¼“å­˜ä¼˜åŒ–**ï¼š

```java
@WebFilter("*.css,*.js,*.png,*.jpg,*.gif")
public class StaticResourceCacheFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // è®¾ç½®ç¼“å­˜æ—¶é—´ï¼š30å¤©
        int cacheTime = 30 * 24 * 60 * 60; // 30å¤©çš„ç§’æ•°
        
        // è®¾ç½®ç¼“å­˜å“åº”å¤´
        resp.setHeader("Cache-Control", "public, max-age=" + cacheTime);
        resp.setDateHeader("Expires", System.currentTimeMillis() + cacheTime * 1000L);
        
        // è®¾ç½®ETagæ”¯æŒæ¡ä»¶è¯·æ±‚
        String etag = generateETag(request);
        resp.setHeader("ETag", etag);
        
        chain.doFilter(request, response);
    }
    
    private String generateETag(ServletRequest request) {
        HttpServletRequest req = (HttpServletRequest) request;
        String uri = req.getRequestURI();
        // åŸºäºæ–‡ä»¶è·¯å¾„å’Œä¿®æ”¹æ—¶é—´ç”ŸæˆETag
        return "\"" + Math.abs(uri.hashCode()) + "\"";
    }
}
```

### 6.3 åŠ¨æ€å†…å®¹ç¼“å­˜æ§åˆ¶


**ğŸš« é˜²æ­¢æ•æ„Ÿé¡µé¢è¢«ç¼“å­˜**ï¼š

```java
@WebFilter("/admin/*,/user/*")
public class NoCacheFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // è®¾ç½®ä¸ç¼“å­˜çš„å“åº”å¤´
        resp.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        resp.setHeader("Pragma", "no-cache"); // HTTP 1.0å…¼å®¹
        resp.setDateHeader("Expires", 0); // è¿‡æœŸæ—¶é—´è®¾ä¸º0
        
        chain.doFilter(request, response);
    }
}
```

### 6.4 æ™ºèƒ½ç¼“å­˜ç­–ç•¥è¿‡æ»¤å™¨


**ğŸ§  æ ¹æ®å†…å®¹ç±»å‹æ™ºèƒ½ç¼“å­˜**ï¼š

```java
public class SmartCacheFilter implements Filter {
    
    // ä¸åŒèµ„æºç±»å‹çš„ç¼“å­˜æ—¶é—´é…ç½®
    private Map<String, Integer> cacheConfig;
    
    @Override
    public void init(FilterConfig config) throws ServletException {
        cacheConfig = new HashMap<>();
        cacheConfig.put("css", 30 * 24 * 60 * 60);     // CSSæ–‡ä»¶ï¼š30å¤©
        cacheConfig.put("js", 7 * 24 * 60 * 60);       // JSæ–‡ä»¶ï¼š7å¤©
        cacheConfig.put("image", 30 * 24 * 60 * 60);   // å›¾ç‰‡ï¼š30å¤©
        cacheConfig.put("html", 60 * 60);              // HTMLï¼š1å°æ—¶
        cacheConfig.put("api", 0);                     // APIï¼šä¸ç¼“å­˜
    }
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        String uri = req.getRequestURI();
        String resourceType = getResourceType(uri);
        Integer cacheTime = cacheConfig.get(resourceType);
        
        if (cacheTime != null && cacheTime > 0) {
            // è®¾ç½®ç¼“å­˜
            resp.setHeader("Cache-Control", "public, max-age=" + cacheTime);
            resp.setDateHeader("Expires", System.currentTimeMillis() + cacheTime * 1000L);
        } else {
            // ä¸ç¼“å­˜
            resp.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
            resp.setHeader("Pragma", "no-cache");
            resp.setDateHeader("Expires", 0);
        }
        
        chain.doFilter(request, response);
    }
    
    private String getResourceType(String uri) {
        if (uri.endsWith(".css")) return "css";
        if (uri.endsWith(".js")) return "js";
        if (uri.endsWith(".png") || uri.endsWith(".jpg") || uri.endsWith(".gif")) return "image";
        if (uri.endsWith(".html") || uri.endsWith(".jsp")) return "html";
        if (uri.startsWith("/api/")) return "api";
        return "unknown";
    }
}
```

**ğŸ’¡ ç¼“å­˜ç­–ç•¥å»ºè®®**ï¼š
```
ğŸ¯ ç¼“å­˜æœ€ä½³å®è·µï¼š

é™æ€èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ï¼‰ï¼š
âœ… é•¿æ—¶é—´ç¼“å­˜ï¼ˆ30å¤©ï¼‰
âœ… ä½¿ç”¨ç‰ˆæœ¬å·æˆ–hashå€¼æ›´æ–°
âœ… è®¾ç½®ETagæ”¯æŒæ¡ä»¶è¯·æ±‚

åŠ¨æ€å†…å®¹ï¼ˆHTMLé¡µé¢ï¼‰ï¼š
âœ… çŸ­æ—¶é—´ç¼“å­˜ï¼ˆ1å°æ—¶ï¼‰æˆ–ä¸ç¼“å­˜
âœ… æ ¹æ®ç”¨æˆ·æƒé™åŒºåˆ«å¯¹å¾…
âœ… é‡è¦é¡µé¢ç»å¯¹ä¸ç¼“å­˜

APIæ¥å£ï¼š
âœ… ä¸€èˆ¬ä¸ç¼“å­˜
âœ… æŸ¥è¯¢ç±»æ¥å£å¯çŸ­æ—¶é—´ç¼“å­˜
âœ… å¢åˆ æ”¹æ¥å£ç»å¯¹ä¸ç¼“å­˜
```

---

## 7. ğŸŒ è·¨åŸŸå¤„ç†è¿‡æ»¤å™¨


### 7.1 ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜


**è·¨åŸŸå°±åƒä¸åŒå›½å®¶çš„äººäº¤æµ**ï¼š
æµè§ˆå™¨çš„åŒæºç­–ç•¥å°±åƒæµ·å…³ï¼Œä¸åŒ"å›½å®¶"ï¼ˆåŸŸåï¼‰ä¹‹é—´çš„èµ„æºè®¿é—®éœ€è¦ç‰¹æ®Š"ç­¾è¯"ã€‚

```
ğŸŒ è·¨åŸŸé—®é¢˜ç¤ºä¾‹ï¼š
å‰ç«¯é¡µé¢ï¼šhttp://localhost:3000 (Reactåº”ç”¨)
åç«¯æ¥å£ï¼šhttp://localhost:8080 (Javaåç«¯)

æµè§ˆå™¨æ£€æŸ¥ï¼š
â€¢ åè®®ä¸åŒï¼Ÿ http vs https
â€¢ åŸŸåä¸åŒï¼Ÿ localhost vs api.example.com  
â€¢ ç«¯å£ä¸åŒï¼Ÿ 3000 vs 8080

åªè¦æœ‰ä¸€ä¸ªä¸åŒ â†’ è·¨åŸŸï¼æµè§ˆå™¨æ‹’ç»è¯·æ±‚
```

### 7.2 CORSè·¨åŸŸå¤„ç†è¿‡æ»¤å™¨


**âœˆï¸ åŸºç¡€è·¨åŸŸå¤„ç†**ï¼š

```java
@WebFilter("/api/*")
public class CorsFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // å…è®¸æ‰€æœ‰åŸŸåè®¿é—®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
        resp.setHeader("Access-Control-Allow-Origin", "*");
        
        // å…è®¸çš„HTTPæ–¹æ³•
        resp.setHeader("Access-Control-Allow-Methods", 
                      "GET, POST, PUT, DELETE, OPTIONS");
        
        // å…è®¸çš„è¯·æ±‚å¤´
        resp.setHeader("Access-Control-Allow-Headers", 
                      "Origin, X-Requested-With, Content-Type, Accept, Authorization");
        
        // é¢„æ£€è¯·æ±‚çš„ç¼“å­˜æ—¶é—´
        resp.setHeader("Access-Control-Max-Age", "3600");
        
        // å¤„ç†é¢„æ£€è¯·æ±‚
        if ("OPTIONS".equals(req.getMethod())) {
            resp.setStatus(HttpServletResponse.SC_OK);
            return;
        }
        
        chain.doFilter(request, response);
    }
}
```

### 7.3 å®‰å…¨çš„è·¨åŸŸé…ç½®


**ğŸ” ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®**ï¼š

```java
public class SecureCorsFilter implements Filter {
    
    // å…è®¸çš„åŸŸåç™½åå•
    private Set<String> allowedOrigins;
    
    @Override
    public void init(FilterConfig config) throws ServletException {
        allowedOrigins = new HashSet<>();
        // ä»é…ç½®æ–‡ä»¶è¯»å–å…è®¸çš„åŸŸå
        String origins = config.getInitParameter("allowedOrigins");
        if (origins != null) {
            String[] originArray = origins.split(",");
            for (String origin : originArray) {
                allowedOrigins.add(origin.trim());
            }
        }
        
        // å¦‚æœæ²¡æœ‰é…ç½®ï¼Œæ·»åŠ é»˜è®¤åŸŸå
        if (allowedOrigins.isEmpty()) {
            allowedOrigins.add("http://localhost:3000");
            allowedOrigins.add("https://www.example.com");
        }
    }
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        String origin = req.getHeader("Origin");
        
        // æ£€æŸ¥è¯·æ±‚æ¥æºæ˜¯å¦åœ¨ç™½åå•ä¸­
        if (origin != null && allowedOrigins.contains(origin)) {
            resp.setHeader("Access-Control-Allow-Origin", origin);
            resp.setHeader("Access-Control-Allow-Credentials", "true");
        }
        
        resp.setHeader("Access-Control-Allow-Methods", 
                      "GET, POST, PUT, DELETE, OPTIONS");
        resp.setHeader("Access-Control-Allow-Headers", 
                      "Origin, X-Requested-With, Content-Type, Accept, Authorization");
        
        // å¤„ç†é¢„æ£€è¯·æ±‚
        if ("OPTIONS".equals(req.getMethod())) {
            resp.setStatus(HttpServletResponse.SC_OK);
            return;
        }
        
        chain.doFilter(request, response);
    }
}
```

### 7.4 è·¨åŸŸé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå¯¹æ¯”


**ğŸ”„ ä¸åŒè·¨åŸŸè§£å†³æ–¹æ¡ˆ**ï¼š

| æ–¹æ¡ˆ | **å®ç°æ–¹å¼** | **é€‚ç”¨åœºæ™¯** | **å®‰å…¨æ€§** |
|------|------------|-------------|-----------|
| **CORS** | `åç«¯è®¾ç½®å“åº”å¤´` | `æ ‡å‡†è§£å†³æ–¹æ¡ˆ` | `è¾ƒé«˜` |
| **JSONP** | `åŠ¨æ€scriptæ ‡ç­¾` | `è€ç‰ˆæœ¬æµè§ˆå™¨` | `è¾ƒä½` |
| **ä»£ç†æœåŠ¡å™¨** | `Nginxåå‘ä»£ç†` | `å¼€å‘ç¯å¢ƒ` | `é«˜` |
| **postMessage** | `çª—å£é—´é€šä¿¡` | `iframeé€šä¿¡` | `ä¸­ç­‰` |

**ğŸ’¡ è·¨åŸŸå¤„ç†å»ºè®®**ï¼š
```
ğŸ¯ è·¨åŸŸæœ€ä½³å®è·µï¼š

å¼€å‘ç¯å¢ƒï¼š
âœ… ä½¿ç”¨é€šé…ç¬¦ "*" å¿«é€Ÿå¼€å‘
âœ… æˆ–è€…é…ç½®å¼€å‘æœåŠ¡å™¨ä»£ç†

ç”Ÿäº§ç¯å¢ƒï¼š  
âœ… æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
âœ… ä¸è¦ä½¿ç”¨é€šé…ç¬¦
âœ… å¯ç”¨å‡­è¯æ”¯æŒæ—¶æ›´è¦è°¨æ…
âœ… å®šæœŸå®¡æŸ¥è·¨åŸŸé…ç½®

å®‰å…¨å»ºè®®ï¼š
âŒ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ "*"
âŒ ä¸è¦å…è®¸æ‰€æœ‰è¯·æ±‚å¤´
âŒ æ³¨æ„å‡­è¯å’ŒOriginçš„é…åˆä½¿ç”¨
```

---

## 8. ğŸ”§ è¯·æ±‚å“åº”åŒ…è£…å™¨


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…å™¨


**åŒ…è£…å™¨å°±åƒå¿«é€’æ‰“åŒ…æœåŠ¡**ï¼š
åŸå§‹çš„åŒ…è£¹ï¼ˆè¯·æ±‚/å“åº”ï¼‰å¯èƒ½ä¸å¤ªåˆé€‚ï¼ŒåŒ…è£…ä¸€ä¸‹è®©å®ƒæ›´å¥½ç”¨ã€‚

```
ğŸ“¦ å¿«é€’åŒ…è£…ç±»æ¯”ï¼š
åŸå§‹å•†å“ â†’ åŠ æ³¡æ³¡çº¸ â†’ æ”¾å…¥çº¸ç®± â†’ è´´æ ‡ç­¾
å¢åŠ ä¿æŠ¤   æ ‡å‡†åŒ–åŒ…è£…   æ–¹ä¾¿å¤„ç†

ğŸ”§ è¯·æ±‚å“åº”åŒ…è£…ï¼š
åŸå§‹è¯·æ±‚ â†’ æ•°æ®é¢„å¤„ç† â†’ ç»Ÿä¸€æ ¼å¼ â†’ å¢å¼ºåŠŸèƒ½
         å‚æ•°æ ¡éªŒ      JSONè½¬æ¢    æ—¥å¿—è®°å½•
```

### 8.2 è¯·æ±‚å‚æ•°é¢„å¤„ç†åŒ…è£…å™¨


**ğŸ§¹ è¯·æ±‚æ•°æ®æ¸…ç†åŒ…è£…å™¨**ï¼š

```java
// è‡ªå®šä¹‰è¯·æ±‚åŒ…è£…å™¨
public class RequestWrapper extends HttpServletRequestWrapper {
    
    public RequestWrapper(HttpServletRequest request) {
        super(request);
    }
    
    @Override
    public String getParameter(String name) {
        String value = super.getParameter(name);
        if (value != null) {
            // å»é™¤å‰åç©ºæ ¼
            value = value.trim();
            // é˜²æ­¢XSSæ”»å‡»ï¼Œè½¬ä¹‰HTMLæ ‡ç­¾
            value = escapeHtml(value);
        }
        return value;
    }
    
    @Override
    public String[] getParameterValues(String name) {
        String[] values = super.getParameterValues(name);
        if (values != null) {
            for (int i = 0; i < values.length; i++) {
                if (values[i] != null) {
                    values[i] = values[i].trim();
                    values[i] = escapeHtml(values[i]);
                }
            }
        }
        return values;
    }
    
    private String escapeHtml(String input) {
        if (input == null) return null;
        return input.replace("<", "&lt;")
                   .replace(">", "&gt;")
                   .replace("\"", "&quot;")
                   .replace("'", "&#x27;")
                   .replace("&", "&amp;");
    }
}

// ä½¿ç”¨åŒ…è£…å™¨çš„è¿‡æ»¤å™¨
@WebFilter("/*")
public class RequestProcessFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        
        // ä½¿ç”¨åŒ…è£…å™¨åŒ…è£…åŸå§‹è¯·æ±‚
        RequestWrapper wrappedRequest = new RequestWrapper(req);
        
        // ä¼ é€’åŒ…è£…åçš„è¯·æ±‚ç»™åç»­å¤„ç†
        chain.doFilter(wrappedRequest, response);
    }
}
```

### 8.3 å“åº”å†…å®¹å¤„ç†åŒ…è£…å™¨


**ğŸ“ å“åº”æ•°æ®ç»Ÿä¸€æ ¼å¼åŒ–**ï¼š

```java
// å“åº”åŒ…è£…å™¨
public class ResponseWrapper extends HttpServletResponseWrapper {
    
    private StringWriter stringWriter;
    private PrintWriter writer;
    
    public ResponseWrapper(HttpServletResponse response) {
        super(response);
        stringWriter = new StringWriter();
        writer = new PrintWriter(stringWriter);
    }
    
    @Override
    public PrintWriter getWriter() {
        return writer;
    }
    
    // è·å–å“åº”å†…å®¹
    public String getResponseData() {
        writer.flush();
        return stringWriter.toString();
    }
}

// ä½¿ç”¨å“åº”åŒ…è£…å™¨çš„è¿‡æ»¤å™¨
@WebFilter("/api/*")
public class ApiResponseFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // ä½¿ç”¨åŒ…è£…å™¨åŒ…è£…å“åº”
        ResponseWrapper wrappedResponse = new ResponseWrapper(resp);
        
        try {
            // ç»§ç»­å¤„ç†è¯·æ±‚
            chain.doFilter(request, wrappedResponse);
            
            // è·å–åŸå§‹å“åº”æ•°æ®
            String responseData = wrappedResponse.getResponseData();
            
            // åŒ…è£…æˆç»Ÿä¸€çš„APIå“åº”æ ¼å¼
            ApiResult apiResult = new ApiResult();
            apiResult.setCode(200);
            apiResult.setMessage("success");
            apiResult.setData(responseData);
            
            // å†™å…¥æœ€ç»ˆå“åº”
            resp.setContentType("application/json;charset=UTF-8");
            resp.getWriter().write(JSON.toJSONString(apiResult));
            
        } catch (Exception e) {
            // å¼‚å¸¸æƒ…å†µçš„ç»Ÿä¸€å¤„ç†
            ApiResult errorResult = new ApiResult();
            errorResult.setCode(500);
            errorResult.setMessage("ç³»ç»Ÿå¼‚å¸¸ï¼š" + e.getMessage());
            
            resp.setContentType("application/json;charset=UTF-8");
            resp.getWriter().write(JSON.toJSONString(errorResult));
        }
    }
}
```

### 8.4 å®ç”¨åŒ…è£…å™¨ç¤ºä¾‹


**ğŸ”’ æ•æ„Ÿä¿¡æ¯è„±æ•åŒ…è£…å™¨**ï¼š

```java
public class DataMaskingFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;
        
        // åŒ…è£…è¯·æ±‚ï¼Œå¯¹æ•æ„Ÿå‚æ•°è„±æ•
        RequestWrapper requestWrapper = new RequestWrapper(req) {
            @Override
            public String getParameter(String name) {
                String value = super.getParameter(name);
                // å¯¹å¯†ç å­—æ®µè„±æ•
                if ("password".equals(name) && value != null) {
                    return "******";
                }
                // å¯¹æ‰‹æœºå·è„±æ•
                if ("phone".equals(name) && value != null && value.length() == 11) {
                    return value.substring(0, 3) + "****" + value.substring(7);
                }
                return value;
            }
        };
        
        chain.doFilter(requestWrapper, response);
    }
}
```

**ğŸ’¡ åŒ…è£…å™¨ä½¿ç”¨å»ºè®®**ï¼š
```
ğŸ¯ åŒ…è£…å™¨æœ€ä½³å®è·µï¼š

å¸¸è§åº”ç”¨åœºæ™¯ï¼š
âœ… å‚æ•°é¢„å¤„ç†ï¼ˆå»ç©ºæ ¼ã€è½¬ä¹‰ï¼‰
âœ… ç»Ÿä¸€å“åº”æ ¼å¼
âœ… æ•æ„Ÿä¿¡æ¯è„±æ•
âœ… æ•°æ®æ ¼å¼è½¬æ¢
âœ… å¢åŠ é¢å¤–åŠŸèƒ½

æ³¨æ„äº‹é¡¹ï¼š
âŒ ä¸è¦è¿‡åº¦åŒ…è£…å½±å“æ€§èƒ½
âŒ æ³¨æ„å†…å­˜ä½¿ç”¨ï¼ˆç‰¹åˆ«æ˜¯å“åº”åŒ…è£…ï¼‰
âŒ ä¿æŒåŒ…è£…å™¨çš„å•ä¸€èŒè´£
âŒ æµ‹è¯•åŒ…è£…å‰åçš„è¡Œä¸ºä¸€è‡´æ€§
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„Filteråº”ç”¨åœºæ™¯


```
ğŸ”¸ å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ï¼šè§£å†³ä¸­æ–‡ä¹±ç ï¼Œç»Ÿä¸€è®¾ç½®UTF-8ç¼–ç 
ğŸ”¸ ç™»å½•éªŒè¯è¿‡æ»¤å™¨ï¼šæ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œä¿æŠ¤éœ€è¦è®¤è¯çš„é¡µé¢
ğŸ”¸ æƒé™æ£€æŸ¥è¿‡æ»¤å™¨ï¼šæ§åˆ¶ç”¨æˆ·è®¿é—®æƒé™ï¼Œå®ç°ç²¾ç»†åŒ–æƒé™ç®¡ç†
ğŸ”¸ æ—¥å¿—è®°å½•è¿‡æ»¤å™¨ï¼šè®°å½•è®¿é—®æ—¥å¿—ï¼Œç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
ğŸ”¸ ç¼“å­˜æ§åˆ¶è¿‡æ»¤å™¨ï¼šä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œåˆç†è®¾ç½®ç¼“å­˜ç­–ç•¥
ğŸ”¸ è·¨åŸŸå¤„ç†è¿‡æ»¤å™¨ï¼šè§£å†³å‰åç«¯åˆ†ç¦»çš„è·¨åŸŸé—®é¢˜
ğŸ”¸ è¯·æ±‚å“åº”åŒ…è£…å™¨ï¼šé¢„å¤„ç†è¯·æ±‚æ•°æ®ï¼Œç»Ÿä¸€å“åº”æ ¼å¼
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Filteråº”ç”¨åœºæ™¯çš„é€‰æ‹©åŸåˆ™**ï¼š
```
é€šç”¨æ€§åŸåˆ™ï¼š
â€¢ å¤šä¸ªServletéƒ½éœ€è¦çš„åŠŸèƒ½ â†’ ç”¨Filterç»Ÿä¸€å¤„ç†
â€¢ åªæœ‰æŸä¸ªServletéœ€è¦çš„åŠŸèƒ½ â†’ åœ¨Servletå†…éƒ¨å¤„ç†

æ‰§è¡Œé¡ºåºåŸåˆ™ï¼š
â€¢ ç¼–ç è¿‡æ»¤å™¨æ”¾åœ¨æœ€å‰é¢
â€¢ ç™»å½•éªŒè¯åœ¨æƒé™æ£€æŸ¥ä¹‹å‰
â€¢ æ—¥å¿—è®°å½•å¯ä»¥åœ¨ä»»æ„ä½ç½®
â€¢ åŒ…è£…å™¨è¦åœ¨ä½¿ç”¨å®ƒçš„Filterä¹‹å‰

æ€§èƒ½å½±å“åŸåˆ™ï¼š
â€¢ é«˜é¢‘è®¿é—®çš„Filterè¦ä¼˜åŒ–æ€§èƒ½
â€¢ é¿å…åœ¨Filterä¸­åšå¤æ‚è®¡ç®—
â€¢ åˆç†ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤å¤„ç†
```

**ğŸ”¹ å®é™…å¼€å‘ä¸­çš„åº”ç”¨ç­–ç•¥**ï¼š
```
é¡¹ç›®åˆæœŸï¼š
1. å…ˆé…ç½®ç¼–ç è¿‡æ»¤å™¨ï¼ˆè§£å†³ä¹±ç ï¼‰
2. å†åŠ ç™»å½•éªŒè¯ï¼ˆä¿æŠ¤é¡µé¢ï¼‰
3. ç„¶åæ˜¯æƒé™æ§åˆ¶ï¼ˆç»†åŒ–æƒé™ï¼‰

é¡¹ç›®å‘å±•ï¼š
4. æ·»åŠ æ—¥å¿—è®°å½•ï¼ˆç›‘æ§ç³»ç»Ÿï¼‰
5. ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ï¼ˆæå‡æ€§èƒ½ï¼‰
6. å¤„ç†è·¨åŸŸé—®é¢˜ï¼ˆæ”¯æŒå‰åç«¯åˆ†ç¦»ï¼‰

é¡¹ç›®æˆç†Ÿï¼š
7. ä½¿ç”¨åŒ…è£…å™¨ï¼ˆç»Ÿä¸€æ•°æ®å¤„ç†ï¼‰
8. æ·»åŠ å®‰å…¨è¿‡æ»¤å™¨ï¼ˆé˜²æ”»å‡»ï¼‰
9. æ€§èƒ½ç›‘æ§è¿‡æ»¤å™¨ï¼ˆç³»ç»Ÿä¼˜åŒ–ï¼‰
```

### 9.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ’¼ ä¼ä¸šçº§å¼€å‘å»ºè®®**ï¼š
```
è¿‡æ»¤å™¨é“¾è®¾è®¡ï¼š
1. ç¼–ç è¿‡æ»¤å™¨ï¼ˆ/*ï¼‰
2. è·¨åŸŸå¤„ç†è¿‡æ»¤å™¨ï¼ˆ/api/*ï¼‰
3. ç™»å½•éªŒè¯è¿‡æ»¤å™¨ï¼ˆ/admin/*, /user/*ï¼‰
4. æƒé™æ£€æŸ¥è¿‡æ»¤å™¨ï¼ˆ/admin/*ï¼‰
5. æ—¥å¿—è®°å½•è¿‡æ»¤å™¨ï¼ˆ/*ï¼‰
6. ç¼“å­˜æ§åˆ¶è¿‡æ»¤å™¨ï¼ˆ*.css, *.js, *.pngï¼‰

é…ç½®ç®¡ç†ï¼š
â€¢ ä½¿ç”¨æ³¨è§£é…ç½®ç®€å•Filter
â€¢ å¤æ‚é…ç½®ä½¿ç”¨web.xml
â€¢ æ•æ„Ÿé…ç½®å¤–éƒ¨åŒ–
â€¢ æ”¯æŒåŠ¨æ€é…ç½®ä¿®æ”¹
```

**ğŸ› ï¸ å¼€å‘æœ€ä½³å®è·µ**ï¼š
```
ä»£ç è´¨é‡ï¼š
âœ… FilterèŒè´£å•ä¸€ï¼ŒåŠŸèƒ½æ˜ç¡®
âœ… åˆç†ä½¿ç”¨FilterConfigè¯»å–é…ç½®
âœ… æ­£ç¡®å¤„ç†å¼‚å¸¸ï¼Œä¸å½±å“åç»­å¤„ç†
âœ… æ·»åŠ è¯¦ç»†çš„æ³¨é‡Šå’Œæ–‡æ¡£

æ€§èƒ½ä¼˜åŒ–ï¼š
âœ… é¿å…åœ¨Filterä¸­åˆ›å»ºå¤§å¯¹è±¡
âœ… åˆç†ä½¿ç”¨ç¼“å­˜æœºåˆ¶
âœ… æ•°æ®åº“æ“ä½œè¦æœ‰è¿æ¥æ± 
âœ… å®šæœŸåˆ†æFilteræ€§èƒ½å½±å“

å®‰å…¨è€ƒè™‘ï¼š
âœ… è¾“å…¥æ•°æ®éªŒè¯å’Œæ¸…ç†
âœ… æ•æ„Ÿä¿¡æ¯è„±æ•å¤„ç†
âœ… é˜²æ­¢å„ç§æ³¨å…¥æ”»å‡»
âœ… åˆç†çš„é”™è¯¯ä¿¡æ¯æç¤º
```

### 9.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š å¾ªåºæ¸è¿›çš„å­¦ä¹ æ­¥éª¤**ï¼š

**é˜¶æ®µä¸€ï¼šåŸºç¡€åº”ç”¨**
- æŒæ¡ç¼–ç è¿‡æ»¤å™¨ï¼Œè§£å†³ä¹±ç é—®é¢˜
- å®ç°ç®€å•çš„ç™»å½•éªŒè¯è¿‡æ»¤å™¨
- äº†è§£Filterçš„æ‰§è¡Œé¡ºåº

**é˜¶æ®µäºŒï¼šè¿›é˜¶åŠŸèƒ½**  
- å®ç°æƒé™æ£€æŸ¥è¿‡æ»¤å™¨
- æ·»åŠ è®¿é—®æ—¥å¿—è®°å½•åŠŸèƒ½
- å­¦ä¹ ç¼“å­˜æ§åˆ¶çš„åŸºæœ¬æ¦‚å¿µ

**é˜¶æ®µä¸‰ï¼šé«˜çº§ç‰¹æ€§**
- å¤„ç†è·¨åŸŸé—®é¢˜
- ä½¿ç”¨è¯·æ±‚å“åº”åŒ…è£…å™¨
- å®ç°å¤æ‚çš„å®‰å…¨è¿‡æ»¤å™¨

**é˜¶æ®µå››ï¼šé¡¹ç›®å®è·µ**
- è®¾è®¡å®Œæ•´çš„è¿‡æ»¤å™¨é“¾
- ä¼˜åŒ–æ€§èƒ½å’Œå®‰å…¨æ€§
- æ•´åˆåˆ°å®é™…é¡¹ç›®ä¸­

**ğŸ§  è®°å¿†è¦ç‚¹**ï¼š
- Filteråº”ç”¨åœºæ™¯è§£å†³é€šç”¨æ€§é—®é¢˜
- ç¼–ç ç™»å½•æƒé™æ—¥å¿—ç¼“å­˜è·¨åŸŸåŒ…è£…æ˜¯ä¸ƒå¤§æ ¸å¿ƒåœºæ™¯
- æ‰§è¡Œé¡ºåºå¾ˆé‡è¦ï¼Œç¼–ç åœ¨å‰ï¼Œæ—¥å¿—å¯åœ¨ä»»æ„ä½ç½®
- ç»Ÿä¸€å¤„ç†å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜ç³»ç»Ÿç»´æŠ¤æ€§
- å®‰å…¨æ€§å’Œæ€§èƒ½è¦å¹³è¡¡ï¼Œä¸èƒ½åªé¡¾åŠŸèƒ½ä¸é¡¾æ•ˆç‡

**å®è·µå»ºè®®**ï¼šæ¯ä¸ªåœºæ™¯éƒ½è¦åŠ¨æ‰‹å®ç°ä¸€éï¼Œç†è®ºç»“åˆå®è·µæ‰èƒ½çœŸæ­£æŒæ¡Filterçš„å¼ºå¤§åŠŸèƒ½ï¼