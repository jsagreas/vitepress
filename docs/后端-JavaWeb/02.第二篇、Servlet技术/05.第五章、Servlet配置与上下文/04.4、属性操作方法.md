---
title: 4ã€å±æ€§æ“ä½œæ–¹æ³•
---
## ğŸ“š ç›®å½•

1. [å±æ€§æ“ä½œåŸºæœ¬æ¦‚å¿µ](#1-å±æ€§æ“ä½œåŸºæœ¬æ¦‚å¿µ)
2. [å››å¤§æ ¸å¿ƒæ–¹æ³•è¯¦è§£](#2-å››å¤§æ ¸å¿ƒæ–¹æ³•è¯¦è§£)
3. [æ•°æ®ç±»å‹å¤„ç†æŠ€å·§](#3-æ•°æ®ç±»å‹å¤„ç†æŠ€å·§)
4. [ä¸‰å¤§ä½œç”¨åŸŸå±æ€§æ“ä½œ](#4-ä¸‰å¤§ä½œç”¨åŸŸå±æ€§æ“ä½œ)
5. [å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–](#5-å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–)
6. [å®é™…å¼€å‘åº”ç”¨åœºæ™¯](#6-å®é™…å¼€å‘åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å±æ€§æ“ä½œåŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Servletå±æ€§


**é€šä¿—ç†è§£**ï¼š
- å±æ€§å°±åƒæ˜¯ç»™å¯¹è±¡è´´ä¸Šçš„**æ ‡ç­¾çº¸**ï¼Œæ¯å¼ æ ‡ç­¾çº¸ä¸Šå†™ç€åå­—å’Œå†…å®¹
- æ¯”å¦‚ç»™ä¸€ä¸ªå­¦ç”Ÿè´´æ ‡ç­¾ï¼š`å§“å=å¼ ä¸‰`ã€`å¹´é¾„=20`ã€`ä¸“ä¸š=è®¡ç®—æœº`
- åœ¨Servletä¸­ï¼Œå±æ€§å°±æ˜¯**å­˜å‚¨æ•°æ®çš„å®¹å™¨**ï¼Œç”¨æ¥åœ¨ä¸åŒåœ°æ–¹ä¼ é€’ä¿¡æ¯

**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
å±æ€§ = é”®å€¼å¯¹æ•°æ®å­˜å‚¨
â€¢ é”®(Key)ï¼šå±æ€§åç§°ï¼Œå¿…é¡»æ˜¯Stringç±»å‹
â€¢ å€¼(Value)ï¼šå±æ€§å†…å®¹ï¼Œå¯ä»¥æ˜¯ä»»æ„Objectå¯¹è±¡
â€¢ ä½œç”¨ï¼šåœ¨Webåº”ç”¨ä¸­ä¼ é€’å’Œå…±äº«æ•°æ®
```

### 1.2 å±æ€§å­˜å‚¨çš„æœ¬è´¨åŸç†


**ğŸ“¦ åº•å±‚å­˜å‚¨æœºåˆ¶**
```
Webå®¹å™¨å†…éƒ¨ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Webå®¹å™¨(Tomcat)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ServletContext                â”‚ â† åº”ç”¨çº§å±æ€§å­˜å‚¨
â”‚  â”œâ”€â”€ Map<String, Object>       â”‚
â”‚  â””â”€â”€ æ‰€æœ‰ç”¨æˆ·å…±äº«               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HttpSession                   â”‚ â† ä¼šè¯çº§å±æ€§å­˜å‚¨
â”‚  â”œâ”€â”€ Map<String, Object>       â”‚
â”‚  â””â”€â”€ å•ä¸ªç”¨æˆ·ä¼šè¯å†…å…±äº«         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HttpServletRequest            â”‚ â† è¯·æ±‚çº§å±æ€§å­˜å‚¨
â”‚  â”œâ”€â”€ Map<String, Object>       â”‚
â”‚  â””â”€â”€ å•æ¬¡è¯·æ±‚å†…å…±äº«             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ ç”Ÿæ´»ä¸­çš„ç±»æ¯”**
- **ServletContext** = å­¦æ ¡å…¬å‘Šæ ï¼ˆå…¨æ ¡å¸ˆç”Ÿéƒ½èƒ½çœ‹åˆ°ï¼‰
- **HttpSession** = ä¸ªäººå‚¨ç‰©æŸœï¼ˆåªæœ‰è‡ªå·±èƒ½å­˜å–ï¼‰
- **HttpServletRequest** = ä¸€æ¬¡è€ƒè¯•çš„ç­”é¢˜å¡ï¼ˆè¿™æ¬¡è€ƒè¯•ä¸“ç”¨ï¼‰

---

## 2. âš™ï¸ å››å¤§æ ¸å¿ƒæ–¹æ³•è¯¦è§£


### 2.1 setAttribute() - å­˜å‚¨å±æ€§


**ğŸ”¸ æ–¹æ³•ç­¾åä¸ä½œç”¨**
```java
void setAttribute(String name, Object value)
```

**ğŸ“ é€šä¿—è§£é‡Š**
- å°±åƒå¾€**å‚¨ç‰©ç®±**é‡Œæ”¾ä¸œè¥¿ï¼Œéœ€è¦ç»™æ¯æ ·ä¸œè¥¿è´´ä¸ª**æ ‡ç­¾**
- `name`ï¼šæ ‡ç­¾ä¸Šå†™çš„åå­—ï¼ˆå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼‰
- `value`ï¼šè¦å­˜æ”¾çš„ç‰©å“ï¼ˆå¯ä»¥æ˜¯ä»»ä½•Javaå¯¹è±¡ï¼‰

**ğŸ’» åŸºç¡€ä½¿ç”¨ç¤ºä¾‹**
```java
// åœ¨Servletä¸­å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®
@WebServlet("/demo")
public class AttributeDemo extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // å­˜å‚¨å­—ç¬¦ä¸²
        request.setAttribute("username", "å¼ ä¸‰");
        
        // å­˜å‚¨æ•°å­—
        request.setAttribute("age", 25);
        
        // å­˜å‚¨å¯¹è±¡
        User user = new User("æå››", 30);
        request.setAttribute("userInfo", user);
        
        // å­˜å‚¨é›†åˆ
        List<String> hobbies = Arrays.asList("è¯»ä¹¦", "æ¸¸æ³³", "ç¼–ç¨‹");
        request.setAttribute("hobbies", hobbies);
    }
}
```

**âš ï¸ é‡è¦ç‰¹æ€§**
- **è¦†ç›–æ€§**ï¼šç›¸åŒnameä¼šè¦†ç›–åŸæœ‰å€¼ï¼Œå°±åƒé‡æ–°è´´æ ‡ç­¾
- **ç±»å‹è‡ªç”±**ï¼švalueå¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ç±»å‹
- **å³æ—¶ç”Ÿæ•ˆ**ï¼šè°ƒç”¨åç«‹å³å¯ä»¥é€šè¿‡getAttributeè·å–

### 2.2 getAttribute() - è·å–å±æ€§


**ğŸ”¸ æ–¹æ³•ç­¾åä¸ä½œç”¨**
```java
Object getAttribute(String name)
```

**ğŸ“ é€šä¿—è§£é‡Š**
- å°±åƒæ ¹æ®**æ ‡ç­¾åå­—**å»å‚¨ç‰©ç®±é‡Œæ‰¾ä¸œè¥¿
- æ‰¾åˆ°äº†è¿”å›ç‰©å“ï¼Œæ‰¾ä¸åˆ°è¿”å›`null`
- è¿”å›çš„æ˜¯`Object`ç±»å‹ï¼Œé€šå¸¸éœ€è¦**å¼ºåˆ¶ç±»å‹è½¬æ¢**

**ğŸ’» å®‰å…¨è·å–ç¤ºä¾‹**
```java
// å®‰å…¨çš„å±æ€§è·å–æ–¹å¼
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // 1. è·å–å­—ç¬¦ä¸²å±æ€§
    String username = (String) request.getAttribute("username");
    if (username != null) {
        System.out.println("ç”¨æˆ·å: " + username);
    }
    
    // 2. è·å–æ•°å­—å±æ€§ï¼ˆéœ€è¦åˆ¤æ–­ç±»å‹ï¼‰
    Object ageObj = request.getAttribute("age");
    if (ageObj instanceof Integer) {
        int age = (Integer) ageObj;
        System.out.println("å¹´é¾„: " + age);
    }
    
    // 3. è·å–å¯¹è±¡å±æ€§
    User user = (User) request.getAttribute("userInfo");
    if (user != null) {
        System.out.println("ç”¨æˆ·ä¿¡æ¯: " + user.getName());
    }
}
```

**ğŸ›¡ï¸ é˜²ç©ºæŒ‡é’ˆæŠ€å·§**
```java
// æ–¹å¼1ï¼šå…ˆåˆ¤æ–­å†è½¬æ¢
Object obj = request.getAttribute("data");
if (obj != null && obj instanceof String) {
    String data = (String) obj;
    // å®‰å…¨ä½¿ç”¨data
}

// æ–¹å¼2ï¼šæä¾›é»˜è®¤å€¼
String title = (String) request.getAttribute("title");
if (title == null) {
    title = "é»˜è®¤æ ‡é¢˜";
}
```

### 2.3 removeAttribute() - åˆ é™¤å±æ€§


**ğŸ”¸ æ–¹æ³•ç­¾åä¸ä½œç”¨**
```java
void removeAttribute(String name)
```

**ğŸ“ é€šä¿—è§£é‡Š**
- å°±åƒæŠŠå‚¨ç‰©ç®±é‡Œçš„æŸä¸ªç‰©å“**æ‹¿èµ°å¹¶æ‰”æ‰**
- åˆ é™¤åè¯¥å±æ€§å°±ä¸å­˜åœ¨äº†ï¼Œå†æ¬¡è·å–ä¼šè¿”å›`null`
- åˆ é™¤ä¸å­˜åœ¨çš„å±æ€§ä¸ä¼šæŠ¥é”™ï¼Œé™é»˜å¤„ç†

**ğŸ’» åˆ é™¤æ“ä½œç¤ºä¾‹**
```java
protected void doPost(HttpServletRequest request, HttpServletResponse response) {
    // åˆ é™¤ä¸´æ—¶æ•°æ®
    request.removeAttribute("tempData");
    
    // æ¸…ç†ç”¨æˆ·ä¼šè¯ä¸­çš„æ•æ„Ÿä¿¡æ¯
    HttpSession session = request.getSession();
    session.removeAttribute("creditCard");
    
    // åˆ é™¤å‰å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨
    if (session.getAttribute("shoppingCart") != null) {
        session.removeAttribute("shoppingCart");
        System.out.println("è´­ç‰©è½¦å·²æ¸…ç©º");
    }
}
```

**ğŸ”„ å¸¸è§ä½¿ç”¨åœºæ™¯**
- **æ¸…ç†ä¸´æ—¶æ•°æ®**ï¼šå¤„ç†å®Œæˆååˆ é™¤ä¸­é—´ç»“æœ
- **å†…å­˜é‡Šæ”¾**ï¼šåˆ é™¤å¤§å¯¹è±¡é¿å…å†…å­˜æ³„æ¼
- **å®‰å…¨è€ƒè™‘**ï¼šåˆ é™¤æ•æ„Ÿä¿¡æ¯å¦‚å¯†ç ã€ä¿¡ç”¨å¡å·

### 2.4 getAttributeNames() - éå†å±æ€§


**ğŸ”¸ æ–¹æ³•ç­¾åä¸ä½œç”¨**
```java
Enumeration<String> getAttributeNames()
```

**ğŸ“ é€šä¿—è§£é‡Š**
- å°±åƒæ‹¿åˆ°å‚¨ç‰©ç®±é‡Œ**æ‰€æœ‰æ ‡ç­¾çš„æ¸…å•**
- è¿”å›æ‰€æœ‰å±æ€§åç§°çš„æšä¸¾å™¨ï¼Œå¯ä»¥éå†æŸ¥çœ‹
- å¸¸ç”¨äºè°ƒè¯•æˆ–æ‰¹é‡å¤„ç†å±æ€§

**ğŸ’» éå†å±æ€§ç¤ºä¾‹**
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    // éå†è¯·æ±‚ä¸­çš„æ‰€æœ‰å±æ€§
    Enumeration<String> attrNames = request.getAttributeNames();
    
    System.out.println("=== è¯·æ±‚å±æ€§æ¸…å• ===");
    while (attrNames.hasMoreElements()) {
        String attrName = attrNames.nextElement();
        Object attrValue = request.getAttribute(attrName);
        
        System.out.println("å±æ€§å: " + attrName);
        System.out.println("å±æ€§å€¼: " + attrValue);
        System.out.println("å±æ€§ç±»å‹: " + attrValue.getClass().getSimpleName());
        System.out.println("---");
    }
}
```

**ğŸ”§ å®ç”¨å·¥å…·æ–¹æ³•**
```java
// å°†æ‰€æœ‰å±æ€§è½¬æ¢ä¸ºMapæ–¹ä¾¿å¤„ç†
public Map<String, Object> getAttributesAsMap(HttpServletRequest request) {
    Map<String, Object> attributeMap = new HashMap<>();
    
    Enumeration<String> attrNames = request.getAttributeNames();
    while (attrNames.hasMoreElements()) {
        String name = attrNames.nextElement();
        attributeMap.put(name, request.getAttribute(name));
    }
    
    return attributeMap;
}
```

---

## 3. ğŸ“Š æ•°æ®ç±»å‹å¤„ç†æŠ€å·§


### 3.1 å¸¸è§æ•°æ®ç±»å‹å¤„ç†


**ğŸ”¸ åŸºæœ¬æ•°æ®ç±»å‹å¤„ç†**

| å­˜å‚¨ç±»å‹ | **å­˜å‚¨æ–¹å¼** | **è·å–æ–¹å¼** | **æ³¨æ„äº‹é¡¹** |
|---------|------------|-------------|-------------|
| `String` | `ç›´æ¥å­˜å‚¨` | `(String) getAttribute()` | `æœ€å¸¸ç”¨ï¼Œæ— éœ€è£…ç®±` |
| `int` | `è‡ªåŠ¨è£…ç®±ä¸ºInteger` | `(Integer) getAttribute()` | `éœ€è¦æ‹†ç®±ä½¿ç”¨` |
| `boolean` | `è‡ªåŠ¨è£…ç®±ä¸ºBoolean` | `(Boolean) getAttribute()` | `æ³¨æ„nullå€¼åˆ¤æ–­` |
| `List/Map` | `ç›´æ¥å­˜å‚¨é›†åˆå¯¹è±¡` | `å¼ºåˆ¶ç±»å‹è½¬æ¢` | `æ³¨æ„æ³›å‹æ“¦é™¤` |

**ğŸ’» ç±»å‹å¤„ç†ç¤ºä¾‹**
```java
// å­˜å‚¨å„ç§ç±»å‹æ•°æ®
request.setAttribute("name", "å¼ ä¸‰");           // String
request.setAttribute("age", 25);               // Integer
request.setAttribute("isVip", true);           // Boolean
request.setAttribute("score", 95.5);           // Double

// å®‰å…¨è·å–å„ç§ç±»å‹
String name = (String) request.getAttribute("name");
Integer age = (Integer) request.getAttribute("age");
Boolean isVip = (Boolean) request.getAttribute("isVip");
Double score = (Double) request.getAttribute("score");

// ä½¿ç”¨æ—¶éœ€è¦åˆ¤ç©º
if (age != null) {
    int userAge = age.intValue(); // æ‹†ç®±ä¸ºåŸºæœ¬ç±»å‹
}
```

### 3.2 å¤æ‚å¯¹è±¡å¤„ç†


**ğŸ“¦ è‡ªå®šä¹‰å¯¹è±¡å­˜å‚¨**
```java
// ç”¨æˆ·ä¿¡æ¯ç±»
public class UserInfo {
    private String username;
    private int age;
    private List<String> roles;
    
    // æ„é€ æ–¹æ³•ã€getterã€setter...
}

// å­˜å‚¨å’Œè·å–è‡ªå®šä¹‰å¯¹è±¡
UserInfo user = new UserInfo("admin", 30, Arrays.asList("ç®¡ç†å‘˜", "ç”¨æˆ·"));
request.setAttribute("currentUser", user);

// è·å–æ—¶éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢
UserInfo currentUser = (UserInfo) request.getAttribute("currentUser");
if (currentUser != null) {
    System.out.println("å½“å‰ç”¨æˆ·: " + currentUser.getUsername());
}
```

**ğŸ“‹ é›†åˆç±»å‹å¤„ç†**
```java
// å­˜å‚¨Listé›†åˆ
List<String> cityList = Arrays.asList("åŒ—äº¬", "ä¸Šæµ·", "å¹¿å·");
request.setAttribute("cities", cityList);

// è·å–Listï¼ˆæ³¨æ„æ³›å‹æ“¦é™¤ï¼‰
@SuppressWarnings("unchecked")
List<String> cities = (List<String>) request.getAttribute("cities");

// å­˜å‚¨Mapé›†åˆ
Map<String, Integer> scoreMap = new HashMap<>();
scoreMap.put("æ•°å­¦", 90);
scoreMap.put("è‹±è¯­", 85);
request.setAttribute("scores", scoreMap);

// è·å–Map
@SuppressWarnings("unchecked")
Map<String, Integer> scores = (Map<String, Integer>) request.getAttribute("scores");
```

### 3.3 ç±»å‹å®‰å…¨æ£€æŸ¥


**ğŸ›¡ï¸ ç±»å‹æ£€æŸ¥å·¥å…·æ–¹æ³•**
```java
public class AttributeUtils {
    
    // å®‰å…¨è·å–å­—ç¬¦ä¸²å±æ€§
    public static String getString(HttpServletRequest request, String name) {
        Object value = request.getAttribute(name);
        return value instanceof String ? (String) value : null;
    }
    
    // å®‰å…¨è·å–æ•´æ•°å±æ€§
    public static Integer getInteger(HttpServletRequest request, String name) {
        Object value = request.getAttribute(name);
        return value instanceof Integer ? (Integer) value : null;
    }
    
    // å®‰å…¨è·å–å¸ƒå°”å±æ€§
    public static Boolean getBoolean(HttpServletRequest request, String name) {
        Object value = request.getAttribute(name);
        return value instanceof Boolean ? (Boolean) value : null;
    }
    
    // æ³›å‹å®‰å…¨è·å–
    @SuppressWarnings("unchecked")
    public static <T> T getAttribute(HttpServletRequest request, String name, Class<T> type) {
        Object value = request.getAttribute(name);
        return type.isInstance(value) ? (T) value : null;
    }
}
```

---

## 4. ğŸŒ ä¸‰å¤§ä½œç”¨åŸŸå±æ€§æ“ä½œ


### 4.1 ä½œç”¨åŸŸèŒƒå›´å¯¹æ¯”


**ğŸ”¸ ä¸‰å¤§ä½œç”¨åŸŸç‰¹ç‚¹**
```
ä½œç”¨åŸŸèŒƒå›´å¯¹æ¯”ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ServletContext (åº”ç”¨çº§)              â”‚ â† æ‰€æœ‰ç”¨æˆ·å…±äº«
â”‚  â”œâ”€ ç”Ÿå‘½å‘¨æœŸï¼šåº”ç”¨å¯åŠ¨åˆ°å…³é—­          â”‚
â”‚  â”œâ”€ æ•°æ®å…±äº«ï¼šå…¨å±€å…±äº«                â”‚
â”‚  â””â”€ å…¸å‹ç”¨é€”ï¼šé…ç½®ä¿¡æ¯ã€è®¡æ•°å™¨        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HttpSession (ä¼šè¯çº§)                â”‚ â† å•ä¸ªç”¨æˆ·ä¼šè¯
â”‚  â”œâ”€ ç”Ÿå‘½å‘¨æœŸï¼šä¼šè¯åˆ›å»ºåˆ°é”€æ¯          â”‚
â”‚  â”œâ”€ æ•°æ®å…±äº«ï¼šåŒä¸€ç”¨æˆ·å¤šä¸ªè¯·æ±‚        â”‚
â”‚  â””â”€ å…¸å‹ç”¨é€”ï¼šç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HttpServletRequest (è¯·æ±‚çº§)         â”‚ â† å•æ¬¡è¯·æ±‚
â”‚  â”œâ”€ ç”Ÿå‘½å‘¨æœŸï¼šè¯·æ±‚å¼€å§‹åˆ°å“åº”ç»“æŸ      â”‚
â”‚  â”œâ”€ æ•°æ®å…±äº«ï¼šåŒä¸€è¯·æ±‚å†…çš„ç»„ä»¶        â”‚
â”‚  â””â”€ å…¸å‹ç”¨é€”ï¼šé¡µé¢æ•°æ®ã€ä¸´æ—¶å˜é‡      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Requestä½œç”¨åŸŸ - è¯·æ±‚çº§åˆ«


**ğŸ¯ ä½¿ç”¨åœºæ™¯**
- **é¡µé¢æ•°æ®ä¼ é€’**ï¼šServletå‘JSPä¼ é€’æ˜¾ç¤ºæ•°æ®
- **è¯·æ±‚è½¬å‘**ï¼šåœ¨forwardè¿‡ç¨‹ä¸­ä¼ é€’å‚æ•°
- **ä¸´æ—¶è®¡ç®—ç»“æœ**ï¼šå­˜å‚¨å¤„ç†è¿‡ç¨‹ä¸­çš„ä¸­é—´æ•°æ®

```java
@WebServlet("/userList")
public class UserListServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        // ä»æ•°æ®åº“è·å–ç”¨æˆ·åˆ—è¡¨
        List<User> users = userService.getAllUsers();
        
        // å­˜å‚¨åˆ°requestä½œç”¨åŸŸ
        request.setAttribute("userList", users);
        request.setAttribute("pageTitle", "ç”¨æˆ·ç®¡ç†");
        request.setAttribute("totalCount", users.size());
        
        // è½¬å‘åˆ°JSPé¡µé¢æ˜¾ç¤º
        request.getRequestDispatcher("/WEB-INF/views/userList.jsp")
               .forward(request, response);
    }
}
```

### 4.3 Sessionä½œç”¨åŸŸ - ä¼šè¯çº§åˆ«


**ğŸ¯ ä½¿ç”¨åœºæ™¯**
- **ç”¨æˆ·ç™»å½•çŠ¶æ€**ï¼šä¿å­˜ç™»å½•ç”¨æˆ·ä¿¡æ¯
- **è´­ç‰©è½¦æ•°æ®**ï¼šç”µå•†ç½‘ç«™çš„å•†å“æ”¶è—
- **ç”¨æˆ·åå¥½è®¾ç½®**ï¼šç•Œé¢ä¸»é¢˜ã€è¯­è¨€é€‰æ‹©

```java
@WebServlet("/login")
public class LoginServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) {
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        
        // éªŒè¯ç”¨æˆ·ç™»å½•
        User user = userService.validateUser(username, password);
        
        if (user != null) {
            // ç™»å½•æˆåŠŸï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°Session
            HttpSession session = request.getSession();
            session.setAttribute("loginUser", user);
            session.setAttribute("loginTime", new Date());
            session.setAttribute("userRole", user.getRole());
            
            response.sendRedirect("dashboard.jsp");
        } else {
            request.setAttribute("errorMsg", "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
            request.getRequestDispatcher("login.jsp").forward(request, response);
        }
    }
}

// å…¶ä»–é¡µé¢è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯
@WebServlet("/profile")
public class ProfileServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        HttpSession session = request.getSession();
        User loginUser = (User) session.getAttribute("loginUser");
        
        if (loginUser == null) {
            // æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
            response.sendRedirect("login.jsp");
            return;
        }
        
        // å·²ç™»å½•ï¼Œæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
        request.setAttribute("user", loginUser);
        request.getRequestDispatcher("profile.jsp").forward(request, response);
    }
}
```

### 4.4 ServletContextä½œç”¨åŸŸ - åº”ç”¨çº§åˆ«


**ğŸ¯ ä½¿ç”¨åœºæ™¯**
- **å…¨å±€é…ç½®ä¿¡æ¯**ï¼šæ•°æ®åº“è¿æ¥é…ç½®ã€ç³»ç»Ÿå‚æ•°
- **åº”ç”¨çº§è®¡æ•°å™¨**ï¼šè®¿é—®ç»Ÿè®¡ã€åœ¨çº¿ç”¨æˆ·æ•°
- **ç¼“å­˜æ•°æ®**ï¼šä¸ç»å¸¸å˜åŠ¨çš„å­—å…¸æ•°æ®

```java
// åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–å…¨å±€æ•°æ®
@WebListener
public class AppInitListener implements ServletContextListener {
    
    public void contextInitialized(ServletContextEvent sce) {
        ServletContext context = sce.getServletContext();
        
        // åˆå§‹åŒ–å…¨å±€é…ç½®
        Properties config = loadConfig();
        context.setAttribute("appConfig", config);
        
        // åˆå§‹åŒ–è®¡æ•°å™¨
        context.setAttribute("visitCount", 0);
        context.setAttribute("onlineUsers", new HashSet<String>());
        
        // åŠ è½½å­—å…¸æ•°æ®
        Map<String, String> cityDict = loadCityDictionary();
        context.setAttribute("cityDict", cityDict);
        
        System.out.println("åº”ç”¨åˆå§‹åŒ–å®Œæˆ");
    }
}

// åœ¨Servletä¸­ä½¿ç”¨å…¨å±€æ•°æ®
@WebServlet("/welcome")
public class WelcomeServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) {
        ServletContext context = getServletContext();
        
        // è·å–å¹¶æ›´æ–°è®¿é—®è®¡æ•°
        Integer visitCount = (Integer) context.getAttribute("visitCount");
        context.setAttribute("visitCount", visitCount + 1);
        
        // è·å–é…ç½®ä¿¡æ¯
        Properties config = (Properties) context.getAttribute("appConfig");
        String welcomeMsg = config.getProperty("welcome.message", "æ¬¢è¿è®¿é—®ï¼");
        
        request.setAttribute("message", welcomeMsg);
        request.setAttribute("visitCount", visitCount + 1);
        
        request.getRequestDispatcher("welcome.jsp").forward(request, response);
    }
}
```

---

## 5. ğŸ’¾ å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–


### 5.1 å†…å­˜æ³„æ¼é£é™©è¯†åˆ«


**âš ï¸ å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯**

**ğŸ”´ é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡å¼•ç”¨çŸ­ç”Ÿå‘½å‘¨æœŸæ•°æ®**
```java
// âŒ å±é™©åšæ³•ï¼šå°†å¤§å¯¹è±¡å­˜å‚¨åœ¨ServletContextä¸­
ServletContext context = getServletContext();
List<User> allUsers = userService.getAllUsers(); // å‡è®¾æœ‰10ä¸‡ç”¨æˆ·
context.setAttribute("allUsers", allUsers); // å†…å­˜ä¸­å¸¸é©»10ä¸‡ç”¨æˆ·æ•°æ®

// âœ… æ­£ç¡®åšæ³•ï¼šåªå­˜å‚¨å¿…è¦çš„æ‘˜è¦ä¿¡æ¯
Map<String, String> userSummary = new HashMap<>();
for (User user : allUsers) {
    userSummary.put(user.getId(), user.getName());
}
context.setAttribute("userNames", userSummary);
```

**ğŸ”´ Sessionä¸­å­˜å‚¨å¤§é‡æ•°æ®**
```java
// âŒ å±é™©åšæ³•ï¼šåœ¨Sessionä¸­å­˜å‚¨å¤§å¯¹è±¡
HttpSession session = request.getSession();
List<Product> productList = productService.getAllProducts(); // å¤§é‡å•†å“æ•°æ®
session.setAttribute("allProducts", productList);

// âœ… æ­£ç¡®åšæ³•ï¼šåªå­˜å‚¨IDåˆ—è¡¨ï¼Œéœ€è¦æ—¶å†æŸ¥è¯¢
List<String> productIds = Arrays.asList("p001", "p002", "p003");
session.setAttribute("selectedProducts", productIds);
```

### 5.2 å±æ€§æ¸…ç†ç­–ç•¥


**ğŸ§¹ è‡ªåŠ¨æ¸…ç†æœºåˆ¶**
```java
public class AttributeCleanupFilter implements Filter {
    
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        
        try {
            // æ­£å¸¸å¤„ç†è¯·æ±‚
            chain.doFilter(request, response);
        } finally {
            // è¯·æ±‚ç»“æŸåæ¸…ç†ä¸´æ—¶å±æ€§
            cleanupTempAttributes(httpRequest);
        }
    }
    
    private void cleanupTempAttributes(HttpServletRequest request) {
        // æ¸…ç†ä»¥"temp_"å¼€å¤´çš„ä¸´æ—¶å±æ€§
        Enumeration<String> attrNames = request.getAttributeNames();
        List<String> tempAttrs = new ArrayList<>();
        
        while (attrNames.hasMoreElements()) {
            String attrName = attrNames.nextElement();
            if (attrName.startsWith("temp_")) {
                tempAttrs.add(attrName);
            }
        }
        
        // åˆ é™¤ä¸´æ—¶å±æ€§
        for (String tempAttr : tempAttrs) {
            request.removeAttribute(tempAttr);
        }
    }
}
```

**ğŸ”„ Sessionå±æ€§å®šæœŸæ¸…ç†**
```java
@WebListener
public class SessionCleanupListener implements HttpSessionListener {
    
    public void sessionCreated(HttpSessionEvent se) {
        // Sessionåˆ›å»ºæ—¶è®¾ç½®è¶…æ—¶æ—¶é—´
        se.getSession().setMaxInactiveInterval(30 * 60); // 30åˆ†é’Ÿ
    }
    
    public void sessionDestroyed(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        
        // Sessioné”€æ¯å‰æ¸…ç†å¤§å¯¹è±¡
        cleanupLargeObjects(session);
        
        System.out.println("Sessionå·²æ¸…ç†: " + session.getId());
    }
    
    private void cleanupLargeObjects(HttpSession session) {
        // æ¸…ç†å·²çŸ¥çš„å¤§å¯¹è±¡å±æ€§
        String[] largeAttrs = {"shoppingCart", "userDocuments", "uploadFiles"};
        
        for (String attr : largeAttrs) {
            Object value = session.getAttribute(attr);
            if (value != null) {
                session.removeAttribute(attr);
                System.out.println("æ¸…ç†å¤§å¯¹è±¡å±æ€§: " + attr);
            }
        }
    }
}
```

### 5.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**âš¡ å±æ€§è®¿é—®ä¼˜åŒ–**

```java
// âŒ ä½æ•ˆï¼šé‡å¤è·å–ç›¸åŒå±æ€§
for (int i = 0; i < 100; i++) {
    User user = (User) session.getAttribute("loginUser");
    // ä½¿ç”¨user...
}

// âœ… é«˜æ•ˆï¼šä¸€æ¬¡è·å–ï¼Œé‡å¤ä½¿ç”¨
User user = (User) session.getAttribute("loginUser");
if (user != null) {
    for (int i = 0; i < 100; i++) {
        // ä½¿ç”¨user...
    }
}
```

**ğŸ“Š å±æ€§å¤§å°ç›‘æ§**
```java
public class AttributeSizeMonitor {
    
    // æ£€æŸ¥å±æ€§å ç”¨å†…å­˜å¤§å°
    public static void checkAttributeSize(HttpServletRequest request) {
        Enumeration<String> attrNames = request.getAttributeNames();
        
        while (attrNames.hasMoreElements()) {
            String attrName = attrNames.nextElement();
            Object attrValue = request.getAttribute(attrName);
            
            long size = getObjectSize(attrValue);
            if (size > 1024 * 1024) { // å¤§äº1MB
                System.out.println("âš ï¸ å¤§å±æ€§è­¦å‘Š: " + attrName + " å¤§å°: " + size + " bytes");
            }
        }
    }
    
    // ç®€å•ä¼°ç®—å¯¹è±¡å¤§å°ï¼ˆå®é™…é¡¹ç›®å¯ç”¨æ›´ç²¾ç¡®çš„æ–¹æ³•ï¼‰
    private static long getObjectSize(Object obj) {
        if (obj == null) return 0;
        
        if (obj instanceof String) {
            return ((String) obj).length() * 2; // å­—ç¬¦ä¸²å¤§çº¦æ¯å­—ç¬¦2å­—èŠ‚
        } else if (obj instanceof List) {
            return ((List<?>) obj).size() * 100; // ä¼°ç®—æ¯ä¸ªå…ƒç´ 100å­—èŠ‚
        } else {
            return 100; // å…¶ä»–å¯¹è±¡ä¼°ç®—100å­—èŠ‚
        }
    }
}
```

---

## 6. ğŸš€ å®é™…å¼€å‘åº”ç”¨åœºæ™¯


### 6.1 MVCæ¨¡å¼æ•°æ®ä¼ é€’


**ğŸ“Š å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç¤ºä¾‹**
```java
// Controllerå±‚ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
@WebServlet("/user/*")
public class UserController extends HttpServlet {
    private UserService userService = new UserService();
    
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String pathInfo = request.getPathInfo();
        
        if ("/list".equals(pathInfo)) {
            showUserList(request, response);
        } else if ("/edit".equals(pathInfo)) {
            showEditForm(request, response);
        }
    }
    
    private void showUserList(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–åˆ†é¡µå‚æ•°
        String pageStr = request.getParameter("page");
        int page = pageStr != null ? Integer.parseInt(pageStr) : 1;
        int pageSize = 10;
        
        // æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
        List<User> users = userService.getUserList(page, pageSize);
        int totalCount = userService.getTotalUserCount();
        int totalPages = (int) Math.ceil((double) totalCount / pageSize);
        
        // è®¾ç½®é¡µé¢æ•°æ®
        request.setAttribute("userList", users);
        request.setAttribute("currentPage", page);
        request.setAttribute("totalPages", totalPages);
        request.setAttribute("totalCount", totalCount);
        request.setAttribute("pageTitle", "ç”¨æˆ·åˆ—è¡¨");
        
        // è½¬å‘åˆ°è§†å›¾
        request.getRequestDispatcher("/WEB-INF/views/user/list.jsp")
               .forward(request, response);
    }
}
```

### 6.2 è¡¨å•æ•°æ®éªŒè¯ä¸å›æ˜¾


**ğŸ“ è¡¨å•å¤„ç†å®Œæ•´æµç¨‹**
```java
@WebServlet("/register")
public class RegisterServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // è·å–è¡¨å•æ•°æ®
        String username = request.getParameter("username");
        String email = request.getParameter("email");
        String password = request.getParameter("password");
        String confirmPassword = request.getParameter("confirmPassword");
        
        // æ•°æ®éªŒè¯
        Map<String, String> errors = new HashMap<>();
        
        if (username == null || username.trim().isEmpty()) {
            errors.put("username", "ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        } else if (username.length() < 3) {
            errors.put("username", "ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä½");
        }
        
        if (email == null || !email.contains("@")) {
            errors.put("email", "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
        }
        
        if (password == null || password.length() < 6) {
            errors.put("password", "å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½");
        }
        
        if (!password.equals(confirmPassword)) {
            errors.put("confirmPassword", "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´");
        }
        
        // éªŒè¯å¤±è´¥ï¼Œå›æ˜¾æ•°æ®
        if (!errors.isEmpty()) {
            // å›æ˜¾è¡¨å•æ•°æ®ï¼ˆå¯†ç é™¤å¤–ï¼‰
            request.setAttribute("username", username);
            request.setAttribute("email", email);
            
            // è®¾ç½®é”™è¯¯ä¿¡æ¯
            request.setAttribute("errors", errors);
            
            // è½¬å‘å›æ³¨å†Œé¡µé¢
            request.getRequestDispatcher("/register.jsp").forward(request, response);
            return;
        }
        
        // éªŒè¯æˆåŠŸï¼Œå¤„ç†æ³¨å†Œ
        try {
            User newUser = new User(username, email, password);
            userService.registerUser(newUser);
            
            // æ³¨å†ŒæˆåŠŸæç¤º
            request.setAttribute("successMsg", "æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•");
            request.getRequestDispatcher("/login.jsp").forward(request, response);
            
        } catch (Exception e) {
            request.setAttribute("errorMsg", "æ³¨å†Œå¤±è´¥ï¼š" + e.getMessage());
            request.getRequestDispatcher("/register.jsp").forward(request, response);
        }
    }
}
```

### 6.3 æƒé™æ§åˆ¶ä¸æ‹¦æˆª


**ğŸ”’ åŸºäºå±æ€§çš„æƒé™éªŒè¯**
```java
// æƒé™æ£€æŸ¥è¿‡æ»¤å™¨
@WebFilter("/admin/*")
public class AdminAuthFilter implements Filter {
    
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        
        // è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯
        HttpSession session = httpRequest.getSession();
        User loginUser = (User) session.getAttribute("loginUser");
        
        if (loginUser == null) {
            // æœªç™»å½•ï¼Œè·³è½¬ç™»å½•é¡µ
            httpRequest.setAttribute("errorMsg", "è¯·å…ˆç™»å½•");
            httpRequest.getRequestDispatcher("/login.jsp").forward(request, response);
            return;
        }
        
        // æ£€æŸ¥ç®¡ç†å‘˜æƒé™
        String userRole = (String) session.getAttribute("userRole");
        if (!"admin".equals(userRole)) {
            // æƒé™ä¸è¶³
            httpRequest.setAttribute("errorMsg", "æ‚¨æ²¡æœ‰ç®¡ç†å‘˜æƒé™");
            httpRequest.getRequestDispatcher("/error/403.jsp").forward(request, response);
            return;
        }
        
        // æƒé™éªŒè¯é€šè¿‡ï¼Œç»§ç»­å¤„ç†
        chain.doFilter(request, response);
    }
}
```

### 6.4 è´­ç‰©è½¦åŠŸèƒ½å®ç°


**ğŸ›’ è´­ç‰©è½¦æ“ä½œç¤ºä¾‹**
```java
@WebServlet("/cart")
public class ShoppingCartServlet extends HttpServlet {
    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        String action = request.getParameter("action");
        HttpSession session = request.getSession();
        
        // è·å–è´­ç‰©è½¦ï¼ˆæ²¡æœ‰åˆ™åˆ›å»ºï¼‰
        @SuppressWarnings("unchecked")
        Map<String, Integer> cart = (Map<String, Integer>) session.getAttribute("shoppingCart");
        if (cart == null) {
            cart = new HashMap<>();
            session.setAttribute("shoppingCart", cart);
        }
        
        if ("add".equals(action)) {
            // æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
            String productId = request.getParameter("productId");
            String quantityStr = request.getParameter("quantity");
            int quantity = quantityStr != null ? Integer.parseInt(quantityStr) : 1;
            
            // ç´¯åŠ æ•°é‡
            cart.put(productId, cart.getOrDefault(productId, 0) + quantity);
            
            request.setAttribute("message", "å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦");
            
        } else if ("remove".equals(action)) {
            // ä»è´­ç‰©è½¦ç§»é™¤å•†å“
            String productId = request.getParameter("productId");
            cart.remove(productId);
            
            request.setAttribute("message", "å•†å“å·²ä»è´­ç‰©è½¦ç§»é™¤");
            
        } else if ("clear".equals(action)) {
            // æ¸…ç©ºè´­ç‰©è½¦
            session.removeAttribute("shoppingCart");
            request.setAttribute("message", "è´­ç‰©è½¦å·²æ¸…ç©º");
        }
        
        // é‡å®šå‘åˆ°è´­ç‰©è½¦é¡µé¢
        response.sendRedirect("cart.jsp");
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ å±æ€§æ“ä½œå››å¤§æ–¹æ³•ï¼šsetAttributeã€getAttributeã€removeAttributeã€getAttributeNames
ğŸ”¸ ä¸‰å¤§ä½œç”¨åŸŸç‰¹ç‚¹ï¼šRequest(è¯·æ±‚çº§)ã€Session(ä¼šè¯çº§)ã€ServletContext(åº”ç”¨çº§)
ğŸ”¸ æ•°æ®ç±»å‹å¤„ç†ï¼šObjectè¿”å›å€¼éœ€å¼ºåˆ¶è½¬æ¢ï¼Œæ³¨æ„nullåˆ¤æ–­
ğŸ”¸ å†…å­˜ç®¡ç†æ„è¯†ï¼šåŠæ—¶æ¸…ç†å¤§å¯¹è±¡ï¼Œé¿å…å†…å­˜æ³„æ¼
ğŸ”¸ å®é™…åº”ç”¨åœºæ™¯ï¼šMVCæ•°æ®ä¼ é€’ã€è¡¨å•å›æ˜¾ã€æƒé™æ§åˆ¶ã€è´­ç‰©è½¦åŠŸèƒ½
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å±æ€§çš„æœ¬è´¨**
```
ç†è§£è¦ç‚¹ï¼š
- å±æ€§ = é”®å€¼å¯¹å­˜å‚¨ï¼Œç±»ä¼¼HashMap
- å­˜å‚¨åœ¨Webå®¹å™¨çš„å†…å­˜ä¸­ï¼Œä¸æ˜¯æ•°æ®åº“
- ç”Ÿå‘½å‘¨æœŸä¸ä½œç”¨åŸŸå¯¹è±¡ç»‘å®š
- åªèƒ½åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨ï¼Œå®¢æˆ·ç«¯æ— æ³•ç›´æ¥è®¿é—®
```

**ğŸ”¹ ä½œç”¨åŸŸé€‰æ‹©åŸåˆ™**
```
é€‰æ‹©æ ‡å‡†ï¼š
Requestï¼šé¡µé¢å±•ç¤ºæ•°æ®ã€ä¸´æ—¶è®¡ç®—ç»“æœ
Sessionï¼šç”¨æˆ·çŠ¶æ€ä¿¡æ¯ã€ä¸ªæ€§åŒ–æ•°æ®
ServletContextï¼šå…¨å±€é…ç½®ã€åº”ç”¨çº§ç¼“å­˜

è®°å¿†å£è¯€ï¼š
Requestä¼ é¡µé¢ï¼ŒSessionè®°çŠ¶æ€ï¼ŒContextå­˜å…¨å±€
```

**ğŸ”¹ ç±»å‹è½¬æ¢å®‰å…¨**
```
å®‰å…¨åŸåˆ™ï¼š
- è·å–å‰å…ˆåˆ¤æ–­null
- è½¬æ¢å‰å…ˆåˆ¤æ–­ç±»å‹instanceof
- æä¾›é»˜è®¤å€¼å¤„ç†å¼‚å¸¸æƒ…å†µ
- å°è£…å·¥å…·æ–¹æ³•ç®€åŒ–æ“ä½œ
```

### 7.3 å®é™…å¼€å‘æœ€ä½³å®è·µ


**ğŸ’¡ å‘½åè§„èŒƒ**
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å±æ€§åï¼š`loginUser`ã€`userList`ã€`errorMsg`
- âœ… åŒºåˆ†ä¸´æ—¶å±æ€§ï¼š`temp_calculateResult`ã€`cache_userCount`
- âœ… ç»Ÿä¸€å‰ç¼€çº¦å®šï¼š`form_username`ã€`page_title`

**ğŸ”§ æ€§èƒ½ä¼˜åŒ–**
- âœ… åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„å±æ€§ï¼Œç‰¹åˆ«æ˜¯å¤§å¯¹è±¡
- âœ… é¿å…åœ¨ServletContextä¸­å­˜å‚¨æ˜“å˜æ•°æ®
- âœ… åˆç†è®¾ç½®Sessionè¶…æ—¶æ—¶é—´
- âœ… ç›‘æ§å±æ€§å¤§å°ï¼Œè­¦æƒ•å†…å­˜å ç”¨

**ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘**
- âœ… ä¸è¦åœ¨å±æ€§ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯å¦‚å¯†ç 
- âœ… ç”¨æˆ·é€€å‡ºæ—¶æ¸…ç†Sessionä¸­çš„ä¸ªäººæ•°æ®
- âœ… éªŒè¯å±æ€§æ¥æºï¼Œé˜²æ­¢æ¶æ„æ•°æ®æ³¨å…¥

**æ ¸å¿ƒè®°å¿†**ï¼š
- å±æ€§æ“ä½œå››æ–¹æ³•ï¼Œå­˜å–åˆ éè¦è®°ç‰¢
- ä¸‰å¤§ä½œç”¨åŸŸé€‰æ‹©ï¼ŒæŒ‰éœ€ä½¿ç”¨ä¸æ··æ·†
- ç±»å‹è½¬æ¢è¦å®‰å…¨ï¼Œåˆ¤ç©ºæ£€æŸ¥å¾ˆé‡è¦
- å†…å­˜ç®¡ç†è¦é‡è§†ï¼ŒåŠæ—¶æ¸…ç†å¤§å¯¹è±¡