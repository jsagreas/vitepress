---
title: 3ã€ä¼ä¸šçº§å¤šæ¨¡å—å®è·µ
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ä¼ä¸šçº§å¤šæ¨¡å—é¡¹ç›®](#1-ä»€ä¹ˆæ˜¯ä¼ä¸šçº§å¤šæ¨¡å—é¡¹ç›®)
2. [åˆ†å±‚æ¶æ„æ¨¡å—è®¾è®¡](#2-åˆ†å±‚æ¶æ„æ¨¡å—è®¾è®¡)
3. [commonå…¬å…±æ¨¡å—è¯¦è§£](#3-commonå…¬å…±æ¨¡å—è¯¦è§£)
4. [daoæ•°æ®è®¿é—®å±‚æ¨¡å—](#4-daoæ•°æ®è®¿é—®å±‚æ¨¡å—)
5. [serviceä¸šåŠ¡å±‚æ¨¡å—](#5-serviceä¸šåŠ¡å±‚æ¨¡å—)
6. [webè¡¨ç°å±‚æ¨¡å—](#6-webè¡¨ç°å±‚æ¨¡å—)
7. [æ¨¡å—èŒè´£åˆ’åˆ†åŸåˆ™](#7-æ¨¡å—èŒè´£åˆ’åˆ†åŸåˆ™)
8. [ä¾èµ–å…³ç³»è®¾è®¡](#8-ä¾èµ–å…³ç³»è®¾è®¡)
9. [å®é™…é¡¹ç›®æ­å»ºæ¼”ç¤º](#9-å®é™…é¡¹ç›®æ­å»ºæ¼”ç¤º)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¢ ä»€ä¹ˆæ˜¯ä¼ä¸šçº§å¤šæ¨¡å—é¡¹ç›®


### 1.1 é€šä¿—ç†è§£å¤šæ¨¡å—

æƒ³è±¡ä¸€ä¸‹å»ºé€ ä¸€æ ‹å¤§æ¥¼ï¼Œæˆ‘ä»¬ä¸ä¼šæŠŠæ‰€æœ‰åŠŸèƒ½éƒ½å¡åœ¨ä¸€ä¸ªæˆ¿é—´é‡Œï¼Œè€Œæ˜¯ä¼šåˆ†æˆä¸åŒçš„æ¥¼å±‚å’Œæˆ¿é—´ï¼š

```
ç°å®ä¸­çš„å¤§æ¥¼åˆ†å±‚ï¼š           ä¼ä¸šé¡¹ç›®åˆ†å±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç®¡ç†å±‚åŠå…¬å®¤   â”‚  â†---â†’  â”‚   webè¡¨ç°å±‚     â”‚  (å¤„ç†ç”¨æˆ·è¯·æ±‚)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ä¸šåŠ¡å¤„ç†éƒ¨é—¨   â”‚  â†---â†’  â”‚   serviceä¸šåŠ¡å±‚  â”‚  (å¤„ç†ä¸šåŠ¡é€»è¾‘)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¡£æ¡ˆèµ„æ–™å®¤     â”‚  â†---â†’  â”‚   daoæ•°æ®è®¿é—®å±‚  â”‚  (æ“ä½œæ•°æ®åº“)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å…¬å…±è®¾æ–½      â”‚  â†---â†’  â”‚   commonå…¬å…±å±‚   â”‚  (é€šç”¨å·¥å…·ç±»)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¼ä¸šçº§å¤šæ¨¡å—çš„æ ¸å¿ƒæ€æƒ³


> ğŸ’¡ **æ ¸å¿ƒç†å¿µ**ï¼š**åˆ†è€Œæ²»ä¹‹ï¼Œå„å¸å…¶èŒ**
> 
> æŠŠä¸€ä¸ªå¤æ‚çš„å¤§é¡¹ç›®ï¼Œæ‹†åˆ†æˆå¤šä¸ªå°é¡¹ç›®ï¼ˆæ¨¡å—ï¼‰ï¼Œæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½

**ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ**
- **å›¢é˜Ÿåä½œ**ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥åŒæ—¶å¼€å‘ä¸åŒæ¨¡å—ï¼Œäº’ä¸å¹²æ‰°
- **ä»£ç å¤ç”¨**ï¼šå…¬å…±åŠŸèƒ½åªå†™ä¸€æ¬¡ï¼Œå¤šä¸ªåœ°æ–¹éƒ½èƒ½ç”¨
- **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹æŸä¸ªåŠŸèƒ½æ—¶ï¼Œåªéœ€è¦æ”¹å¯¹åº”çš„æ¨¡å—
- **é™ä½å¤æ‚åº¦**ï¼šå¤§é—®é¢˜åˆ†è§£æˆå°é—®é¢˜ï¼Œæ›´å®¹æ˜“ç†è§£å’Œè§£å†³

### 1.3 å¤šæ¨¡å—é¡¹ç›®çš„æ•´ä½“ç»“æ„


```
my-enterprise-project/          â† çˆ¶é¡¹ç›®ï¼ˆç®¡ç†è€…ï¼‰
â”œâ”€â”€ pom.xml                     â† çˆ¶POMï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰
â”œâ”€â”€ common-utils/               â† å…¬å…±å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ dao-module/                 â† æ•°æ®è®¿é—®æ¨¡å—  
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ service-module/             â† ä¸šåŠ¡é€»è¾‘æ¨¡å—
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ pom.xml
â””â”€â”€ web-module/                 â† è¡¨ç°å±‚æ¨¡å—
    â”œâ”€â”€ src/main/java/
    â”œâ”€â”€ src/main/webapp/
    â””â”€â”€ pom.xml
```

---

## 2. ğŸ—ï¸ åˆ†å±‚æ¶æ„æ¨¡å—è®¾è®¡


### 2.1 ä»€ä¹ˆæ˜¯åˆ†å±‚æ¶æ„


åˆ†å±‚æ¶æ„å°±åƒ**æ±‰å ¡åŒ…çš„å±‚æ¬¡ç»“æ„**ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„ä½œç”¨ï¼š

```
ç”¨æˆ·ç•Œé¢å±‚ (web)     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† æ±‰å ¡é¡¶å±‚é¢åŒ…ï¼ˆç”¨æˆ·çœ‹åˆ°çš„ï¼‰
                    â”‚  ç”¨æˆ·è¯·æ±‚å¤„ç†  â”‚
ä¸šåŠ¡é€»è¾‘å±‚ (service) â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â† è”¬èœå’Œè°ƒæ–™ï¼ˆä¸šåŠ¡è§„åˆ™ï¼‰
                    â”‚  ä¸šåŠ¡è§„åˆ™å¤„ç†  â”‚  
æ•°æ®è®¿é—®å±‚ (dao)     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â† è‚‰é¥¼ï¼ˆæ•°æ®æ“ä½œï¼‰
                    â”‚  æ•°æ®åº“æ“ä½œ   â”‚
å…¬å…±å·¥å…·å±‚ (common)  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â† åº•å±‚é¢åŒ…ï¼ˆåŸºç¡€æ”¯æ’‘ï¼‰
```

### 2.2 å„å±‚çš„é€šä¿—è§£é‡Š


**ğŸŒ Webå±‚ï¼ˆè¡¨ç°å±‚ï¼‰**ï¼š
- **ä½œç”¨**ï¼šå°±åƒ**é¤å…æœåŠ¡å‘˜**ï¼Œè´Ÿè´£æ¥å¾…å®¢äººã€è®°å½•ç‚¹é¤ã€ä¸Šèœ
- **èŒè´£**ï¼šæ¥æ”¶ç”¨æˆ·è¯·æ±‚ã€å±•ç¤ºæ•°æ®ã€å¤„ç†ç”¨æˆ·äº¤äº’
- **æŠ€æœ¯**ï¼šServletã€JSPã€Controllerç­‰

**âš™ï¸ Serviceå±‚ï¼ˆä¸šåŠ¡å±‚ï¼‰**ï¼š
- **ä½œç”¨**ï¼šå°±åƒ**é¤å…å¨å¸ˆé•¿**ï¼Œè´Ÿè´£åˆ¶å®šèœè°±ã€åè°ƒå¨æˆ¿å·¥ä½œ
- **èŒè´£**ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®æ ¡éªŒã€äº‹åŠ¡ç®¡ç†
- **æŠ€æœ¯**ï¼šSpring Serviceã€ä¸šåŠ¡é€»è¾‘ä»£ç 

**ğŸ’¾ DAOå±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰**ï¼š
- **ä½œç”¨**ï¼šå°±åƒ**ä»“åº“ç®¡ç†å‘˜**ï¼Œè´Ÿè´£å­˜å–é£Ÿæã€ç®¡ç†åº“å­˜
- **èŒè´£**ï¼šå¢åˆ æ”¹æŸ¥æ•°æ®åº“ã€SQLæ“ä½œ
- **æŠ€æœ¯**ï¼šMyBatisã€JPAã€JDBCç­‰

**ğŸ”§ Commonå±‚ï¼ˆå…¬å…±å±‚ï¼‰**ï¼š
- **ä½œç”¨**ï¼šå°±åƒ**é¤å…çš„åŸºç¡€è®¾æ–½**ï¼ˆæ¡Œæ¤…ã€é¤å…·ã€è°ƒæ–™ç­‰ï¼‰
- **èŒè´£**ï¼šæä¾›é€šç”¨å·¥å…·ã€å¸¸é‡å®šä¹‰ã€å®ä½“ç±»
- **æŠ€æœ¯**ï¼šå·¥å…·ç±»ã€å®ä½“ç±»ã€æšä¸¾ç­‰

---

## 3. ğŸ› ï¸ commonå…¬å…±æ¨¡å—è¯¦è§£


### 3.1 å…¬å…±æ¨¡å—çš„ä½œç”¨


> **ğŸ’¡ æ¯”å–»ç†è§£**ï¼šCommonæ¨¡å—å°±åƒå®¶é‡Œçš„**å·¥å…·ç®±**ï¼Œé‡Œé¢æ”¾ç€èºä¸åˆ€ã€æ‰³æ‰‹ã€èƒ¶å¸¦ç­‰å¸¸ç”¨å·¥å…·ï¼Œå…¨å®¶äººéƒ½å¯ä»¥ä½¿ç”¨

### 3.2 Commonæ¨¡å—é€šå¸¸åŒ…å«ä»€ä¹ˆ


**ğŸ“ ç›®å½•ç»“æ„ç¤ºä¾‹ï¼š**
```
common-utils/
â”œâ”€â”€ src/main/java/com/company/common/
â”‚   â”œâ”€â”€ entity/          â† å®ä½“ç±»ï¼ˆæ•°æ®æ¨¡å‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â””â”€â”€ Product.java  
â”‚   â”œâ”€â”€ utils/           â† å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ DateUtil.java
â”‚   â”‚   â”œâ”€â”€ StringUtil.java
â”‚   â”‚   â””â”€â”€ HttpUtil.java
â”‚   â”œâ”€â”€ constants/       â† å¸¸é‡ç±»
â”‚   â”‚   â””â”€â”€ Constants.java
â”‚   â”œâ”€â”€ enums/          â† æšä¸¾ç±»
â”‚   â”‚   â””â”€â”€ StatusEnum.java
â”‚   â””â”€â”€ exception/      â† è‡ªå®šä¹‰å¼‚å¸¸
â”‚       â””â”€â”€ BusinessException.java
â””â”€â”€ pom.xml
```

### 3.3 å®ä½“ç±»ï¼ˆEntityï¼‰è¯¦è§£


**ä»€ä¹ˆæ˜¯å®ä½“ç±»ï¼Ÿ**
å®ä½“ç±»å°±åƒ**æ•°æ®çš„æ¨¡æ¿**ï¼Œå®šä¹‰äº†æ•°æ®åº”è¯¥é•¿ä»€ä¹ˆæ ·å­ã€‚

```java
// ç”¨æˆ·å®ä½“ç±» - å°±åƒç”¨æˆ·ä¿¡æ¯çš„æ¨¡æ¿
public class User {
    private Long id;        // ç”¨æˆ·ç¼–å·
    private String name;    // ç”¨æˆ·å§“å  
    private Integer age;    // ç”¨æˆ·å¹´é¾„
    private String email;   // é‚®ç®±åœ°å€
    
    // æ„é€ æ–¹æ³•ã€getterã€setteræ–¹æ³•
    public User() {}
    
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    // ... å…¶ä»–getter/setteræ–¹æ³•
}
```

### 3.4 å·¥å…·ç±»ï¼ˆUtilsï¼‰è¯¦è§£


**ä»€ä¹ˆæ˜¯å·¥å…·ç±»ï¼Ÿ**
å·¥å…·ç±»å°±åƒ**å¤šåŠŸèƒ½å·¥å…·**ï¼Œæä¾›å„ç§å¸¸ç”¨çš„åŠŸèƒ½æ–¹æ³•ã€‚

```java
// æ—¥æœŸå·¥å…·ç±» - å¤„ç†æ—¥æœŸç›¸å…³çš„æ“ä½œ
public class DateUtil {
    
    // è·å–å½“å‰æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆæ ¼å¼ï¼š2023-10-15ï¼‰
    public static String getCurrentDate() {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        return sdf.format(new Date());
    }
    
    // åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦æ˜¯åŒä¸€å¤©
    public static boolean isSameDay(Date date1, Date date2) {
        // å…·ä½“å®ç°...
        return false;
    }
}
```

### 3.5 å¸¸é‡ç±»ï¼ˆConstantsï¼‰è¯¦è§£


**ä¸ºä»€ä¹ˆéœ€è¦å¸¸é‡ç±»ï¼Ÿ**
é¿å…åœ¨ä»£ç ä¸­å†™**é­”æ³•æ•°å­—**å’Œ**é­”æ³•å­—ç¬¦ä¸²**ï¼Œè®©ä»£ç æ›´æ˜“è¯»æ˜“ç»´æŠ¤ã€‚

```java
// ç³»ç»Ÿå¸¸é‡ç±»
public class Constants {
    // ç”¨æˆ·çŠ¶æ€
    public static final int USER_STATUS_ACTIVE = 1;    // æ¿€æ´»çŠ¶æ€
    public static final int USER_STATUS_INACTIVE = 0;  // éæ¿€æ´»çŠ¶æ€
    
    // ç³»ç»Ÿé…ç½®
    public static final String DEFAULT_ENCODING = "UTF-8";
    public static final int PAGE_SIZE = 10;  // é»˜è®¤åˆ†é¡µå¤§å°
}
```

**ä½¿ç”¨å¯¹æ¯”ï¼š**
```java
// âŒ ä¸å¥½çš„å†™æ³• - é­”æ³•æ•°å­—
if (user.getStatus() == 1) {
    // å¤„ç†æ¿€æ´»ç”¨æˆ·
}

// âœ… å¥½çš„å†™æ³• - ä½¿ç”¨å¸¸é‡
if (user.getStatus() == Constants.USER_STATUS_ACTIVE) {
    // å¤„ç†æ¿€æ´»ç”¨æˆ· - æ„ä¹‰æ˜ç¡®
}
```

---

## 4. ğŸ’¾ daoæ•°æ®è®¿é—®å±‚æ¨¡å—


### 4.1 DAOå±‚çš„é€šä¿—ç†è§£


> **ğŸ’¡ æ¯”å–»**ï¼šDAOå±‚å°±åƒ**å›¾ä¹¦ç®¡ç†å‘˜**
> 
> - ä½ æƒ³å€Ÿä¹¦æ—¶ï¼Œä¸ç”¨è‡ªå·±å»ä¹¦æ¶æ‰¾ï¼Œå‘Šè¯‰ç®¡ç†å‘˜ä¹¦åå°±è¡Œ
> - ä½ æƒ³è¿˜ä¹¦æ—¶ï¼ŒæŠŠä¹¦äº¤ç»™ç®¡ç†å‘˜å°±è¡Œ
> - ç®¡ç†å‘˜çŸ¥é“æ‰€æœ‰ä¹¦çš„ä½ç½®ï¼Œè´Ÿè´£ä¹¦ç±çš„å­˜å–ç®¡ç†

### 4.2 DAOå±‚çš„æ ¸å¿ƒä½œç”¨


**ğŸ¯ ä¸»è¦èŒè´£ï¼š**
1. **æ•°æ®å¢åˆ æ”¹æŸ¥**ï¼šå¯¹æ•°æ®åº“è¿›è¡ŒCRUDæ“ä½œ
2. **SQLè¯­å¥æ‰§è¡Œ**ï¼šæ‰§è¡Œå…·ä½“çš„æ•°æ®åº“æ“ä½œ
3. **æ•°æ®æ˜ å°„**ï¼šæŠŠæ•°æ®åº“è®°å½•è½¬æ¢æˆJavaå¯¹è±¡

### 4.3 DAOæ¨¡å—ç»“æ„


```
dao-module/
â”œâ”€â”€ src/main/java/com/company/dao/
â”‚   â”œâ”€â”€ UserDao.java         â† ç”¨æˆ·æ•°æ®è®¿é—®æ¥å£
â”‚   â”œâ”€â”€ ProductDao.java      â† å•†å“æ•°æ®è®¿é—®æ¥å£
â”‚   â””â”€â”€ impl/                â† æ¥å£å®ç°ç±»ç›®å½•
â”‚       â”œâ”€â”€ UserDaoImpl.java
â”‚       â””â”€â”€ ProductDaoImpl.java
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ mapper/              â† MyBatisæ˜ å°„æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ UserMapper.xml
â”‚   â”‚   â””â”€â”€ ProductMapper.xml
â”‚   â””â”€â”€ db.properties        â† æ•°æ®åº“é…ç½®
â””â”€â”€ pom.xml
```

### 4.4 DAOæ¥å£å®šä¹‰


**UserDaoæ¥å£ç¤ºä¾‹ï¼š**
```java
// ç”¨æˆ·æ•°æ®è®¿é—®æ¥å£ - å®šä¹‰å¯¹ç”¨æˆ·è¡¨çš„æ“ä½œ
public interface UserDao {
    
    // æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
    User findById(Long id);
    
    // æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
    List<User> findAll();
    
    // æ–°å¢ç”¨æˆ·
    int insert(User user);
    
    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯  
    int update(User user);
    
    // åˆ é™¤ç”¨æˆ·
    int deleteById(Long id);
}
```

### 4.5 ä¸ºä»€ä¹ˆè¦ç”¨æ¥å£ï¼Ÿ


**ğŸ¤” é—®é¢˜**ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å†™å®ç°ç±»ï¼Œè€Œè¦å…ˆå®šä¹‰æ¥å£ï¼Ÿ

**ğŸ’¡ ç­”æ¡ˆ**ï¼šä½¿ç”¨æ¥å£çš„å¥½å¤„å°±åƒ**å®šåˆ¶åˆåŒ**

```
æ²¡æœ‰æ¥å£ï¼ˆç›´æ¥å®ç°ï¼‰ï¼š        æœ‰æ¥å£ï¼ˆå…ˆå®šåˆåŒï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Serviceå±‚ç›´æ¥è°ƒç”¨ â”‚   VS   â”‚ Serviceå±‚è°ƒç”¨æ¥å£ â”‚
â”‚ å…·ä½“çš„å®ç°ç±»     â”‚         â”‚ ä¸å…³å¿ƒå…·ä½“å®ç°   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                           â†“
   è€¦åˆåº¦é«˜ï¼Œéš¾ä»¥åˆ‡æ¢            è€¦åˆåº¦ä½ï¼Œæ˜“äºåˆ‡æ¢
```

**å®é™…å¥½å¤„ï¼š**
- **æ˜“äºæµ‹è¯•**ï¼šå¯ä»¥åˆ›å»ºæµ‹è¯•ç”¨çš„å‡å®ç°
- **æ˜“äºæ›¿æ¢**ï¼šä»MySQLæ¢åˆ°Oracleï¼Œåªéœ€è¦æ¢å®ç°ç±»
- **èŒè´£åˆ†ç¦»**ï¼šæ¥å£å®šä¹‰åšä»€ä¹ˆï¼Œå®ç°ç±»å®šä¹‰æ€ä¹ˆåš

---

## 5. âš™ï¸ serviceä¸šåŠ¡å±‚æ¨¡å—


### 5.1 Serviceå±‚çš„é€šä¿—ç†è§£


> **ğŸ’¡ æ¯”å–»**ï¼šServiceå±‚å°±åƒ**é“¶è¡ŒæŸœå°ä¸šåŠ¡å‘˜**
> 
> - å®¢æˆ·è¯´è¦è½¬è´¦ï¼Œä¸šåŠ¡å‘˜è¦æ£€æŸ¥è´¦æˆ·ä½™é¢ã€éªŒè¯å¯†ç ã€è®°å½•æµæ°´
> - å®¢æˆ·è¯´è¦å¼€æˆ·ï¼Œä¸šåŠ¡å‘˜è¦éªŒè¯èº«ä»½ã€å¡«å†™è¡¨æ ¼ã€åˆ›å»ºè´¦å·
> - ä¸šåŠ¡å‘˜è´Ÿè´£æ•´ä¸ªä¸šåŠ¡æµç¨‹ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½æ­£ç¡®å®Œæˆ

### 5.2 Serviceå±‚çš„æ ¸å¿ƒèŒè´£


**ğŸ¯ ä¸»è¦ä½œç”¨ï¼š**
1. **ä¸šåŠ¡é€»è¾‘å¤„ç†**ï¼šå®ç°å…·ä½“çš„ä¸šåŠ¡è§„åˆ™
2. **æ•°æ®æ ¡éªŒ**ï¼šéªŒè¯è¾“å…¥æ•°æ®æ˜¯å¦æ­£ç¡®
3. **äº‹åŠ¡ç®¡ç†**ï¼šç¡®ä¿æ“ä½œçš„åŸå­æ€§
4. **è°ƒç”¨DAOå±‚**ï¼šè·å–å’Œä¿å­˜æ•°æ®

### 5.3 Serviceæ¨¡å—ç»“æ„


```
service-module/
â”œâ”€â”€ src/main/java/com/company/service/
â”‚   â”œâ”€â”€ UserService.java         â† ç”¨æˆ·ä¸šåŠ¡æ¥å£
â”‚   â”œâ”€â”€ ProductService.java      â† å•†å“ä¸šåŠ¡æ¥å£
â”‚   â””â”€â”€ impl/                    â† ä¸šåŠ¡å®ç°ç±»
â”‚       â”œâ”€â”€ UserServiceImpl.java
â”‚       â””â”€â”€ ProductServiceImpl.java
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ spring-service.xml       â† Springé…ç½®æ–‡ä»¶
â””â”€â”€ pom.xml
```

### 5.4 Serviceæ¥å£å®šä¹‰


**ç”¨æˆ·ä¸šåŠ¡æ¥å£ç¤ºä¾‹ï¼š**
```java
// ç”¨æˆ·ä¸šåŠ¡æœåŠ¡æ¥å£
public interface UserService {
    
    // ç”¨æˆ·æ³¨å†Œ - åŒ…å«å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
    boolean registerUser(User user);
    
    // ç”¨æˆ·ç™»å½•éªŒè¯
    User login(String username, String password);
    
    // ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
    boolean updateUserInfo(User user);
    
    // è·å–ç”¨æˆ·è¯¦æƒ…ï¼ˆåŒ…å«å…³è”ä¿¡æ¯ï¼‰
    UserDetail getUserDetail(Long userId);
}
```

### 5.5 Serviceå®ç°ç±»è¯¦è§£


**ç”¨æˆ·æœåŠ¡å®ç°ç¤ºä¾‹ï¼š**
```java
@Service
public class UserServiceImpl implements UserService {
    
    @Autowired
    private UserDao userDao;  // æ³¨å…¥æ•°æ®è®¿é—®å±‚
    
    @Override
    public boolean registerUser(User user) {
        // 1. æ•°æ®æ ¡éªŒ
        if (user.getName() == null || user.getName().trim().isEmpty()) {
            throw new BusinessException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        }
        
        // 2. ä¸šåŠ¡è§„åˆ™æ£€æŸ¥
        User existUser = userDao.findByName(user.getName());
        if (existUser != null) {
            throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        // 3. æ•°æ®å¤„ç†
        user.setCreateTime(new Date());
        user.setStatus(Constants.USER_STATUS_ACTIVE);
        
        // 4. ä¿å­˜æ•°æ®
        int result = userDao.insert(user);
        return result > 0;
    }
}
```

### 5.6 Serviceå±‚ vs DAOå±‚çš„åŒºåˆ«


| **å±‚æ¬¡** | **DAOå±‚** | **Serviceå±‚** |
|---------|-----------|---------------|
| **èŒè´£** | `æ•°æ®å­˜å–` | `ä¸šåŠ¡é€»è¾‘` |
| **å…³æ³¨ç‚¹** | `æ€ä¹ˆå­˜æ•°æ®` | `å­˜ä»€ä¹ˆæ•°æ®ï¼Œä»€ä¹ˆæ—¶å€™å­˜` |
| **æ¯”å–»** | `ä»“åº“ç®¡ç†å‘˜` | `ä¸šåŠ¡ç»ç†` |
| **ç¤ºä¾‹** | `useræ’å…¥æ•°æ®åº“` | `ç”¨æˆ·æ³¨å†Œï¼ˆåŒ…å«æ ¡éªŒã€åŠ å¯†ç­‰ï¼‰` |

**ä¸¾ä¸ªä¾‹å­ï¼šç”¨æˆ·æ³¨å†Œ**
- **DAOå±‚**ï¼š`æŠŠç”¨æˆ·æ•°æ®æ’å…¥åˆ°userè¡¨ä¸­`
- **Serviceå±‚**ï¼š`æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦é‡å¤ + å¯†ç åŠ å¯† + å‘é€æ¬¢è¿é‚®ä»¶ + è°ƒç”¨DAOä¿å­˜`

---

## 6. ğŸŒ webè¡¨ç°å±‚æ¨¡å—


### 6.1 Webå±‚çš„é€šä¿—ç†è§£


> **ğŸ’¡ æ¯”å–»**ï¼šWebå±‚å°±åƒ**é¤å…çš„æœåŠ¡å‘˜**
> 
> - æ¥å¾…å®¢äººï¼ˆæ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼‰
> - è®°å½•ç‚¹é¤ï¼ˆè·å–è¯·æ±‚å‚æ•°ï¼‰
> - ä¼ è¾¾ç»™å¨æˆ¿ï¼ˆè°ƒç”¨Serviceå¤„ç†ä¸šåŠ¡ï¼‰
> - ä¸Šèœç»™å®¢äººï¼ˆè¿”å›å¤„ç†ç»“æœï¼‰

### 6.2 Webå±‚çš„æ ¸å¿ƒèŒè´£


**ğŸ¯ ä¸»è¦ä½œç”¨ï¼š**
1. **è¯·æ±‚å¤„ç†**ï¼šæ¥æ”¶HTTPè¯·æ±‚
2. **å‚æ•°ç»‘å®š**ï¼šè·å–è¯·æ±‚å‚æ•°å¹¶è½¬æ¢
3. **è°ƒç”¨ä¸šåŠ¡å±‚**ï¼šå°†è¯·æ±‚è½¬å‘ç»™Serviceå¤„ç†
4. **å“åº”è¿”å›**ï¼šå°†å¤„ç†ç»“æœè¿”å›ç»™ç”¨æˆ·

### 6.3 Webæ¨¡å—ç»“æ„


```
web-module/
â”œâ”€â”€ src/main/java/com/company/web/
â”‚   â”œâ”€â”€ controller/              â† æ§åˆ¶å™¨ç±»
â”‚   â”‚   â”œâ”€â”€ UserController.java
â”‚   â”‚   â””â”€â”€ ProductController.java
â”‚   â”œâ”€â”€ filter/                  â† è¿‡æ»¤å™¨
â”‚   â”‚   â””â”€â”€ LoginFilter.java
â”‚   â””â”€â”€ listener/                â† ç›‘å¬å™¨
â”‚       â””â”€â”€ ApplicationListener.java
â”œâ”€â”€ src/main/webapp/
â”‚   â”œâ”€â”€ WEB-INF/
â”‚   â”‚   â”œâ”€â”€ web.xml
â”‚   â”‚   â””â”€â”€ jsp/                 â† JSPé¡µé¢
â”‚   â”œâ”€â”€ static/                  â† é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ images/
â”‚   â””â”€â”€ index.jsp
â””â”€â”€ pom.xml
```

### 6.4 Controlleræ§åˆ¶å™¨è¯¦è§£


**ç”¨æˆ·æ§åˆ¶å™¨ç¤ºä¾‹ï¼š**
```java
@Controller
@RequestMapping("/user")
public class UserController {
    
    @Autowired
    private UserService userService;  // æ³¨å…¥ä¸šåŠ¡å±‚
    
    // ç”¨æˆ·æ³¨å†Œ
    @PostMapping("/register")
    public String register(User user, Model model) {
        try {
            // è°ƒç”¨ä¸šåŠ¡å±‚å¤„ç†æ³¨å†Œé€»è¾‘
            boolean success = userService.registerUser(user);
            
            if (success) {
                model.addAttribute("message", "æ³¨å†ŒæˆåŠŸ");
                return "success";  // è·³è½¬åˆ°æˆåŠŸé¡µé¢
            } else {
                model.addAttribute("error", "æ³¨å†Œå¤±è´¥");
                return "register"; // è¿”å›æ³¨å†Œé¡µé¢
            }
        } catch (BusinessException e) {
            model.addAttribute("error", e.getMessage());
            return "register";
        }
    }
    
    // è·å–ç”¨æˆ·åˆ—è¡¨
    @GetMapping("/list")
    public String getUserList(Model model) {
        List<User> users = userService.getAllUsers();
        model.addAttribute("users", users);
        return "user-list";  // è¿”å›ç”¨æˆ·åˆ—è¡¨é¡µé¢
    }
}
```

### 6.5 Webå±‚çš„è¯·æ±‚å¤„ç†æµç¨‹


```
ç”¨æˆ·æµè§ˆå™¨å‘èµ·è¯·æ±‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Filterè¿‡æ»¤å™¨  â”‚ â† ç™»å½•æ£€æŸ¥ã€ç¼–ç è®¾ç½®ç­‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Controlleræ§åˆ¶å™¨â”‚ â† æ¥æ”¶è¯·æ±‚ã€å‚æ•°ç»‘å®š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Serviceä¸šåŠ¡å±‚  â”‚ â† å¤„ç†ä¸šåŠ¡é€»è¾‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DAOæ•°æ®å±‚    â”‚ â† æ•°æ®åº“æ“ä½œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
è¿”å›ç»“æœç»™ç”¨æˆ·æµè§ˆå™¨
```

---

## 7. ğŸ“‹ æ¨¡å—èŒè´£åˆ’åˆ†åŸåˆ™


### 7.1 èŒè´£åˆ’åˆ†çš„é‡è¦æ€§


> **ğŸ’¡ æ ¸å¿ƒæ€æƒ³**ï¼š**å•ä¸€èŒè´£åŸåˆ™**
> 
> æ¯ä¸ªæ¨¡å—åªåšä¸€ä»¶äº‹ï¼Œå¹¶ä¸”æŠŠè¿™ä»¶äº‹åšå¥½

### 7.2 å„å±‚èŒè´£æ¸…å•


**ğŸ“Š èŒè´£åˆ†å·¥è¡¨ï¼š**

| **æ¨¡å—** | **ä¸»è¦èŒè´£** | **ä¸åº”è¯¥åšçš„äº‹** |
|---------|-------------|-----------------|
| **Common** | `å·¥å…·ç±»`ã€`å®ä½“ç±»`ã€`å¸¸é‡å®šä¹‰` | `ä¸šåŠ¡é€»è¾‘`ã€`æ•°æ®åº“æ“ä½œ` |
| **DAO** | `æ•°æ®åº“CRUD`ã€`SQLæ‰§è¡Œ` | `ä¸šåŠ¡è§„åˆ™`ã€`æ•°æ®æ ¡éªŒ` |
| **Service** | `ä¸šåŠ¡é€»è¾‘`ã€`äº‹åŠ¡ç®¡ç†`ã€`æ•°æ®æ ¡éªŒ` | `HTTPå¤„ç†`ã€`SQLç¼–å†™` |
| **Web** | `è¯·æ±‚å¤„ç†`ã€`å‚æ•°ç»‘å®š`ã€`å“åº”è¿”å›` | `ä¸šåŠ¡é€»è¾‘`ã€`æ•°æ®åº“æ“ä½œ` |

### 7.3 å¸¸è§çš„èŒè´£æ··ä¹±é—®é¢˜


**âŒ é”™è¯¯ç¤ºä¾‹1ï¼šåœ¨Controllerä¸­å†™ä¸šåŠ¡é€»è¾‘**
```java
// ä¸å¥½çš„åšæ³• - Controllerä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘
@PostMapping("/register")
public String register(User user) {
    // âŒ åœ¨Controllerä¸­åšæ•°æ®æ ¡éªŒå’Œä¸šåŠ¡å¤„ç†
    if (user.getName() == null) {
        return "error";
    }
    
    if (userDao.findByName(user.getName()) != null) {
        return "error";
    }
    
    userDao.insert(user);
    return "success";
}
```

**âœ… æ­£ç¡®ç¤ºä¾‹1ï¼šControlleråªåšè¯·æ±‚å¤„ç†**
```java
// æ­£ç¡®çš„åšæ³• - Controlleråªè´Ÿè´£è¯·æ±‚å¤„ç†
@PostMapping("/register") 
public String register(User user, Model model) {
    try {
        // âœ… ç›´æ¥è°ƒç”¨Serviceï¼Œè®©ä¸šåŠ¡å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘
        boolean success = userService.registerUser(user);
        return success ? "success" : "error";
    } catch (BusinessException e) {
        model.addAttribute("error", e.getMessage());
        return "error";
    }
}
```

### 7.4 èŒè´£åˆ’åˆ†çš„å®é™…å¥½å¤„


**ğŸ“ˆ æ¸…æ™°èŒè´£å¸¦æ¥çš„å¥½å¤„ï¼š**

```
ä»£ç ç»´æŠ¤æˆæœ¬ï¼š
æ··ä¹±èŒè´£    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’    æ¸…æ™°èŒè´£
   é«˜                        ä½
   â†“                        â†“
ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½éœ€è¦            ä¿®æ”¹åŠŸèƒ½åªéœ€è¦æ”¹
æ”¹å¤šä¸ªåœ°æ–¹                å¯¹åº”çš„æ¨¡å—
```

**â‘  æ˜“äºæµ‹è¯•**ï¼šæ¯ä¸ªæ¨¡å—åŠŸèƒ½å•ä¸€ï¼Œæµ‹è¯•æ›´ç®€å•
**â‘¡ æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ä¸šåŠ¡é€»è¾‘åªéœ€è¦æ”¹Serviceå±‚
**â‘¢ æ˜“äºå¤ç”¨**ï¼šServiceå±‚å¯ä»¥è¢«ä¸åŒçš„Webæ¡†æ¶ä½¿ç”¨
**â‘£ æ˜“äºæ›¿æ¢**ï¼šæ›´æ¢æŒä¹…åŒ–æ¡†æ¶åªéœ€è¦æ”¹DAOå±‚

---

## 8. ğŸ”— ä¾èµ–å…³ç³»è®¾è®¡


### 8.1 ä¾èµ–å…³ç³»çš„é€šä¿—ç†è§£


> **ğŸ’¡ æ¯”å–»**ï¼šä¾èµ–å…³ç³»å°±åƒ**å…¬å¸çš„æ±‡æŠ¥å…³ç³»**
> 
> - å‘˜å·¥ä¾èµ–ç»ç†ï¼šå‘˜å·¥éœ€è¦å‘ç»ç†æ±‡æŠ¥å·¥ä½œ
> - ç»ç†ä¸èƒ½ä¾èµ–å‘˜å·¥ï¼šç»ç†ä¸åº”è¯¥ç›´æ¥åšå‘˜å·¥çš„å…·ä½“å·¥ä½œ
> - ä¾èµ–å…³ç³»è¦å•å‘ï¼šä¸èƒ½å½¢æˆå¾ªç¯ä¾èµ–

### 8.2 æ ‡å‡†ä¾èµ–å…³ç³»å›¾


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Webå±‚      â”‚ â”€â”€â”
â”‚ (Controller) â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”œâ”€â”€ éƒ½ä¾èµ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â†“
â”‚ Serviceå±‚    â”‚ â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (ä¸šåŠ¡é€»è¾‘)    â”‚ â”€â”€â”€â”€â†’â”‚ Commonå±‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ (å…¬å…±å·¥å…·)    â”‚
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                    â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  DAOå±‚      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ (æ•°æ®è®¿é—®)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¾èµ–æ–¹å‘ï¼šWeb â†’ Service â†’ DAO â†’ Common
```

### 8.3 Mavenä¾èµ–é…ç½®


**çˆ¶é¡¹ç›®pom.xmlé…ç½®ï¼š**
```xml
<!-- çˆ¶é¡¹ç›®åªåšä¾èµ–ç®¡ç†ï¼Œä¸å†™å…·ä½“ä¾èµ– -->
<dependencyManagement>
    <dependencies>
        <!-- ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å· -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>5.3.21</version>
        </dependency>
        
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.33</version>
        </dependency>
    </dependencies>
</dependencyManagement>
```

**å„å­æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼š**

**ğŸ”§ Commonæ¨¡å—ï¼ˆæœ€åº•å±‚ï¼‰ï¼š**
```xml
<dependencies>
    <!-- åªä¾èµ–åŸºç¡€å·¥å…·åŒ…ï¼Œä¸ä¾èµ–å…¶ä»–ä¸šåŠ¡æ¨¡å— -->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
    </dependency>
</dependencies>
```

**ğŸ’¾ DAOæ¨¡å—ï¼š**
```xml
<dependencies>
    <!-- ä¾èµ–Commonæ¨¡å—ï¼ˆéœ€è¦ç”¨åˆ°å®ä½“ç±»ï¼‰ -->
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>common-utils</artifactId>
        <version>1.0.0</version>
    </dependency>
    
    <!-- æ•°æ®åº“ç›¸å…³ä¾èµ– -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
    </dependency>
</dependencies>
```

**âš™ï¸ Serviceæ¨¡å—ï¼š**
```xml
<dependencies>
    <!-- ä¾èµ–Commonæ¨¡å—å’ŒDAOæ¨¡å— -->
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>common-utils</artifactId>
        <version>1.0.0</version>
    </dependency>
    
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>dao-module</artifactId>
        <version>1.0.0</version>
    </dependency>
    
    <!-- Springç›¸å…³ä¾èµ– -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
    </dependency>
</dependencies>
```

**ğŸŒ Webæ¨¡å—ï¼š**
```xml
<dependencies>
    <!-- ä¾èµ–æ‰€æœ‰ä¸‹å±‚æ¨¡å— -->
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>common-utils</artifactId>
        <version>1.0.0</version>
    </dependency>
    
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>service-module</artifactId>
        <version>1.0.0</version>
    </dependency>
    
    <!-- Webç›¸å…³ä¾èµ– -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
    </dependency>
</dependencies>
```

### 8.4 ä¾èµ–å…³ç³»çš„æ³¨æ„äº‹é¡¹


> âš ï¸ **é‡è¦åŸåˆ™**ï¼š**ä¾èµ–åªèƒ½å‘ä¸‹ï¼Œä¸èƒ½å‘ä¸Š**

**âŒ ç»å¯¹ä¸èƒ½è¿™æ ·åšï¼š**
```xml
<!-- DAOæ¨¡å—ç»å¯¹ä¸èƒ½ä¾èµ–Serviceæ¨¡å— -->
<!-- Serviceæ¨¡å—ç»å¯¹ä¸èƒ½ä¾èµ–Webæ¨¡å— -->
<!-- è¿™æ ·ä¼šé€ æˆå¾ªç¯ä¾èµ–ï¼ -->
```

**âœ… æ­£ç¡®çš„ä¾èµ–ä¼ é€’ï¼š**
```
Webéœ€è¦Serviceçš„åŠŸèƒ½ â†’ Webä¾èµ–Service âœ“
Serviceéœ€è¦DAOçš„åŠŸèƒ½ â†’ Serviceä¾èµ–DAO âœ“  
DAOéœ€è¦Commonçš„å®ä½“ç±» â†’ DAOä¾èµ–Common âœ“
```

---

## 9. ğŸ› ï¸ å®é™…é¡¹ç›®æ­å»ºæ¼”ç¤º


### 9.1 åˆ›å»ºçˆ¶é¡¹ç›®


**ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMavené¡¹ç›®**
```xml
<!-- çˆ¶é¡¹ç›®çš„pom.xml -->
<groupId>com.company</groupId>
<artifactId>enterprise-project</artifactId>
<version>1.0.0</version>
<packaging>pom</packaging>  <!-- æ³¨æ„ï¼šçˆ¶é¡¹ç›®æ˜¯pomç±»å‹ -->

<!-- å£°æ˜å­æ¨¡å— -->
<modules>
    <module>common-utils</module>
    <module>dao-module</module>
    <module>service-module</module>
    <module>web-module</module>
</modules>
```

### 9.2 åˆ›å»ºCommonæ¨¡å—


**é¡¹ç›®ç»“æ„ï¼š**
```
common-utils/
â”œâ”€â”€ src/main/java/com/company/common/
â”‚   â”œâ”€â”€ entity/User.java
â”‚   â”œâ”€â”€ utils/DateUtil.java
â”‚   â””â”€â”€ constants/Constants.java
â””â”€â”€ pom.xml
```

**Userå®ä½“ç±»ï¼š**
```java
package com.company.common.entity;

import java.util.Date;

public class User {
    private Long id;
    private String name;
    private String email;
    private Date createTime;
    
    // æ„é€ æ–¹æ³•
    public User() {}
    
    public User(String name, String email) {
        this.name = name;
        this.email = email;
        this.createTime = new Date();
    }
    
    // getterå’Œsetteræ–¹æ³•
    // ... çœç•¥å…·ä½“å®ç°
}
```

### 9.3 åˆ›å»ºDAOæ¨¡å—


**UserDaoæ¥å£ï¼š**
```java
package com.company.dao;

import com.company.common.entity.User;
import java.util.List;

public interface UserDao {
    // æ’å…¥ç”¨æˆ·
    int insert(User user);
    
    // æ ¹æ®IDæŸ¥è¯¢
    User findById(Long id);
    
    // æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
    List<User> findAll();
    
    // æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢
    User findByName(String name);
}
```

### 9.4 åˆ›å»ºServiceæ¨¡å—


**UserServiceæ¥å£ï¼š**
```java
package com.company.service;

import com.company.common.entity.User;

public interface UserService {
    // ç”¨æˆ·æ³¨å†Œ
    boolean registerUser(User user);
    
    // ç”¨æˆ·ç™»å½•
    User login(String name, String password);
}
```

**UserServiceImplå®ç°ç±»ï¼š**
```java
package com.company.service.impl;

import com.company.dao.UserDao;
import com.company.service.UserService;
import com.company.common.entity.User;

@Service
public class UserServiceImpl implements UserService {
    
    @Autowired
    private UserDao userDao;
    
    @Override
    public boolean registerUser(User user) {
        // 1. å‚æ•°æ ¡éªŒ
        if (user.getName() == null || user.getName().trim().isEmpty()) {
            throw new IllegalArgumentException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        }
        
        // 2. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        User existUser = userDao.findByName(user.getName());
        if (existUser != null) {
            throw new IllegalArgumentException("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        // 3. ä¿å­˜ç”¨æˆ·
        int result = userDao.insert(user);
        return result > 0;
    }
    
    @Override
    public User login(String name, String password) {
        // ç™»å½•é€»è¾‘å®ç°
        return userDao.findByName(name);
    }
}
```

### 9.5 åˆ›å»ºWebæ¨¡å—


**UserControlleræ§åˆ¶å™¨ï¼š**
```java
package com.company.web.controller;

import com.company.service.UserService;
import com.company.common.entity.User;

@Controller
@RequestMapping("/user")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // æ˜¾ç¤ºæ³¨å†Œé¡µé¢
    @GetMapping("/register")
    public String showRegister() {
        return "register";  // è¿”å›register.jspé¡µé¢
    }
    
    // å¤„ç†æ³¨å†Œè¯·æ±‚
    @PostMapping("/register")
    public String register(User user, Model model) {
        try {
            boolean success = userService.registerUser(user);
            if (success) {
                model.addAttribute("message", "æ³¨å†ŒæˆåŠŸï¼");
                return "success";
            } else {
                model.addAttribute("error", "æ³¨å†Œå¤±è´¥ï¼");
                return "register";
            }
        } catch (IllegalArgumentException e) {
            model.addAttribute("error", e.getMessage());
            return "register";
        }
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


> **ğŸ¯ æ ¸å¿ƒç†å¿µæ€»ç»“**

```
ğŸ”¸ å¤šæ¨¡å—è®¾è®¡ï¼šå¤§é¡¹ç›®åˆ†è§£æˆå°æ¨¡å—ï¼Œå„å¸å…¶èŒ
ğŸ”¸ åˆ†å±‚æ¶æ„ï¼šWeb â†’ Service â†’ DAO â†’ Commonï¼Œå±‚æ¬¡åˆ†æ˜  
ğŸ”¸ èŒè´£åˆ†ç¦»ï¼šæ¯å±‚åªåšè‡ªå·±è¯¥åšçš„äº‹ï¼Œä¸è¶Šç•Œ
ğŸ”¸ ä¾èµ–ç®¡ç†ï¼šä¾èµ–å…³ç³»å•å‘å‘ä¸‹ï¼Œä¸èƒ½å¾ªç¯ä¾èµ–
ğŸ”¸ ä»£ç å¤ç”¨ï¼šå…¬å…±åŠŸèƒ½æŠ½å–åˆ°Commonæ¨¡å—ï¼Œé¿å…é‡å¤
```

### 10.2 å„å±‚èŒè´£å£è¯€


> **ğŸ’¡ è®°å¿†å£è¯€**ï¼š
> 
> - **Webå±‚**ï¼š`æ¥è¯·æ±‚ï¼Œè°ƒæœåŠ¡ï¼Œè¿”ç»“æœ` 
> - **Serviceå±‚**ï¼š`åšä¸šåŠ¡ï¼Œç®¡äº‹åŠ¡ï¼Œè°ƒæ•°æ®`
> - **DAOå±‚**ï¼š`å­˜æ•°æ®ï¼Œå–æ•°æ®ï¼Œæ‰§è¡ŒSQL`
> - **Commonå±‚**ï¼š`å·¥å…·ç±»ï¼Œå®ä½“ç±»ï¼Œå¤§å®¶ç”¨`

### 10.3 ä¾èµ–å…³ç³»è®°å¿†å›¾


```
     ğŸŒ Webå±‚
       â†“ ä¾èµ–
     âš™ï¸ Serviceå±‚  
       â†“ ä¾èµ–
     ğŸ’¾ DAOå±‚
       â†“ ä¾èµ–
     ğŸ”§ Commonå±‚

è®°å¿†è¦ç‚¹ï¼šæ°´å¾€ä½å¤„æµï¼Œä¾èµ–å‘ä¸‹èµ°ï¼
```

### 10.4 å®é™…å¼€å‘ä¸­çš„å¥½å¤„


**â‘  å›¢é˜Ÿåä½œæ•ˆç‡**ï¼š
- å‰ç«¯å›¢é˜Ÿä¸“æ³¨Webå±‚å¼€å‘
- åç«¯å›¢é˜Ÿä¸“æ³¨Serviceå’ŒDAOå±‚
- å…¬å…±ç»„ä»¶å›¢é˜Ÿç»´æŠ¤Commonå±‚

**â‘¡ ä»£ç è´¨é‡æå‡**ï¼š
- èŒè´£æ¸…æ™°ï¼Œbugå®¹æ˜“å®šä½
- æ¨¡å—åŒ–æµ‹è¯•ï¼Œè´¨é‡æ›´å¯é 
- ä»£ç å¤ç”¨ç‡é«˜ï¼Œå‡å°‘é‡å¤

**â‘¢ é¡¹ç›®ç»´æŠ¤æˆæœ¬**ï¼š
- ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ï¼Œåªæ”¹Serviceå±‚
- æ›´æ¢æ•°æ®åº“ï¼Œåªæ”¹DAOå±‚
- å‡çº§æ¡†æ¶ï¼Œåªæ”¹å¯¹åº”å±‚æ¬¡

### 10.5 åˆå­¦è€…å¸¸çŠ¯é”™è¯¯


> âš ï¸ **é¿å…è¿™äº›å¸¸è§é—®é¢˜**ï¼š

**âŒ é”™è¯¯1**ï¼šåœ¨Controlleré‡Œå†™ä¸šåŠ¡é€»è¾‘
**âœ… æ­£ç¡®**ï¼šControlleråªåšè¯·æ±‚è½¬å‘

**âŒ é”™è¯¯2**ï¼šDAOå±‚åŒ…å«ä¸šåŠ¡åˆ¤æ–­
**âœ… æ­£ç¡®**ï¼šDAOå±‚åªåšæ•°æ®å­˜å–

**âŒ é”™è¯¯3**ï¼šå¾ªç¯ä¾èµ–æ¨¡å—
**âœ… æ­£ç¡®**ï¼šä¾èµ–å…³ç³»ä¸¥æ ¼å‘ä¸‹

**âŒ é”™è¯¯4**ï¼šé‡å¤ä»£ç åˆ†æ•£åœ¨å„æ¨¡å—
**âœ… æ­£ç¡®**ï¼šå…¬å…±åŠŸèƒ½ç»Ÿä¸€æ”¾åœ¨Commonå±‚

### 10.6 å­¦ä¹ å»ºè®®


**ğŸ“š å­¦ä¹ è·¯å¾„**ï¼š
1. **å…ˆç†è§£åˆ†å±‚æ€æƒ³**ï¼šä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿæ¯å±‚åšä»€ä¹ˆï¼Ÿ
2. **åŠ¨æ‰‹æ­å»ºé¡¹ç›®**ï¼šæŒ‰ç…§æ¼”ç¤ºæ­¥éª¤å®é™…æ“ä½œä¸€é
3. **å®è·µä¸­åŠ æ·±ç†è§£**ï¼šåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›æ¦‚å¿µ
4. **ä¸æ–­é‡æ„ä¼˜åŒ–**ï¼šéšç€ç»éªŒå¢é•¿ï¼Œä¸æ–­æ”¹è¿›æ¨¡å—è®¾è®¡

**ğŸ¯ æ ¸å¿ƒè®°å¿†**ï¼š
- ä¼ä¸šçº§å¤šæ¨¡å—å°±æ˜¯**åˆ†è€Œæ²»ä¹‹**çš„æ€æƒ³ä½“ç°
- æ¯ä¸ªæ¨¡å—**èŒè´£å•ä¸€**ï¼Œ**ä¾èµ–å‘ä¸‹**
- å¥½çš„æ¶æ„è®¾è®¡è®©é¡¹ç›®**æ˜“äºç»´æŠ¤**ã€**æ˜“äºæ‰©å±•**
- æ¶æ„è®¾è®¡æ˜¯ä¸ºäº†**è§£å†³å¤æ‚æ€§**ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆ