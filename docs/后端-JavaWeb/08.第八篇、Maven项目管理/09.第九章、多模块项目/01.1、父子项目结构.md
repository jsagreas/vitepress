---
title: 1、父子项目结构
---
## 📚 目录

1. [什么是父子项目结构](#1-什么是父子项目结构)
2. [父项目的作用和配置](#2-父项目的作用和配置)
3. [子模块的继承机制](#3-子模块的继承机制)
4. [依赖版本统一管理](#4-依赖版本统一管理)
5. [插件统一管理](#5-插件统一管理)
6. [实战案例演练](#6-实战案例演练)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🏠 什么是父子项目结构


### 1.1 生活化理解


**🏭 家庭企业类比**
```
想象一个家族企业：
爸爸（父项目） ← 制定家族规矩、管理财务
├── 大儿子（web模块） ← 负责前台接待
├── 二儿子（service模块） ← 负责核心业务  
└── 小女儿（dao模块） ← 负责数据管理

爸爸负责：统一采购、制定标准、分配资源
孩子们：继承家族传统，专注自己的工作
```

### 1.2 技术定义


**父子项目结构**：一种项目组织方式，通过父项目统一管理多个子模块

**🔸 核心概念**
```
父项目（Parent Project）：
• 不包含具体业务代码
• 统一管理依赖版本  
• 定义公共配置
• 提供构建规范

子模块（Child Modules）：
• 继承父项目配置
• 专注具体业务功能
• 可以是jar包或war包
• 相互之间可以依赖
```

### 1.3 为什么要用父子结构


**🎯 解决的核心问题**

| 传统多项目问题 | 父子结构解决方案 | 实际效果 |
|-------------|---------------|---------|
| 依赖版本冲突 | 父项目统一版本管理 | 版本一致，减少冲突 |
| 配置重复维护 | 公共配置继承 | 一次配置，处处使用 |
| 构建脚本复杂 | 统一构建流程 | 一键构建所有模块 |
| 项目结构混乱 | 标准化目录结构 | 清晰的模块划分 |

---

## 2. 👨‍💼 父项目的作用和配置


### 2.1 父项目的核心作用


**🔸 统一版本管理**
```
就像家里的财务管家：
• 统一采购：所有依赖版本由父项目决定
• 批量管理：一次修改，影响所有子模块
• 版本兼容：确保各个依赖版本相互兼容
• 升级简单：只需修改父项目版本号
```

**🔸 配置继承**
```
就像家族传统：
• 编译规则：Java版本、编码格式等
• 构建流程：测试、打包、部署标准
• 插件配置：Maven插件及其参数
• 仓库地址：依赖下载源配置
```

### 2.2 父项目pom.xml核心配置


**基础结构配置**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <!-- 父项目基本信息 -->
    <groupId>com.example</groupId>
    <artifactId>my-parent</artifactId>
    <version>1.0.0</version>
    <packaging>pom</packaging>  <!-- 关键：父项目必须是pom类型 -->
    
    <name>我的父项目</name>
    <description>统一管理所有子模块的父项目</description>
</project>
```

**📋 关键配置说明**
- **`packaging`**：必须设为`pom`，表示这是一个容器项目
- **`groupId`**：组织标识，所有子模块会继承
- **`version`**：父项目版本，子模块可以继承使用

### 2.3 声明子模块


```xml
<!-- 声明包含的子模块 -->
<modules>
    <module>web-module</module>       <!-- 前端模块 -->
    <module>service-module</module>   <!-- 业务逻辑模块 -->
    <module>dao-module</module>       <!-- 数据访问模块 -->
</modules>
```

**💡 理解要点**
```
<modules>标签的作用：
✅ 告诉Maven有哪些子模块
✅ 定义构建顺序（Maven会自动分析依赖关系）
✅ 支持批量操作（如mvn clean install会构建所有模块）

注意事项：
⚠️ module标签里写的是子模块的文件夹名称
⚠️ 子模块必须在父项目目录下
⚠️ 构建时会按照依赖关系确定编译顺序
```

---

## 3. 👶 子模块的继承机制


### 3.1 子模块如何声明父项目


**基本继承语法**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <!-- 声明父项目 -->
    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-parent</artifactId>
        <version>1.0.0</version>
        <relativePath>../pom.xml</relativePath>  <!-- 相对路径 -->
    </parent>
    
    <!-- 子模块信息（groupId和version会从父项目继承） -->
    <artifactId>web-module</artifactId>
    <packaging>war</packaging>
    
    <name>Web前端模块</name>
</project>
```

### 3.2 relativePath的重要性


**🔗 相对路径机制**
```
文件目录结构：
my-parent/                    ← 父项目根目录
├── pom.xml                  ← 父项目的pom.xml
├── web-module/              ← 子模块目录
│   └── pom.xml             ← 子模块的pom.xml
├── service-module/
│   └── pom.xml
└── dao-module/
    └── pom.xml

relativePath配置：
• ../pom.xml：表示父项目pom.xml在上级目录
• 默认值也是../pom.xml，可以省略
• 如果父项目在其他位置，需要指定正确路径
```

### 3.3 继承的内容


**🔸 自动继承的属性**
```
✅ groupId：组织标识
✅ version：版本号
✅ properties：属性配置
✅ dependencyManagement：依赖管理
✅ pluginManagement：插件管理
✅ repositories：仓库配置
✅ build配置：编译设置
```

**🔸 不会继承的属性**
```
❌ artifactId：每个模块必须有唯一标识
❌ name：模块名称
❌ packaging：打包类型
❌ dependencies：具体依赖（但可以继承版本）
❌ modules：子模块列表
```

### 3.4 版本继承示例


**🎯 实际应用**
```xml
<!-- 父项目定义版本 -->
<properties>
    <spring.version>5.3.21</spring.version>
    <junit.version>4.12</junit.version>
</properties>

<!-- 子模块使用继承的版本 -->
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>  <!-- 使用父项目定义的版本 -->
    </dependency>
</dependencies>
```

---

## 4. 📦 依赖版本统一管理


### 4.1 dependencyManagement的作用


**🛠️ 核心机制**
```
dependencyManagement ≠ dependencies

dependencyManagement：
• 只是声明依赖和版本，不会实际引入
• 为子模块提供版本参考
• 统一管理，避免版本冲突

dependencies：  
• 实际引入依赖到项目中
• 子模块中使用时可以省略版本号
```

### 4.2 父项目中的版本管理


**完整配置示例**
```xml
<properties>
    <!-- 定义版本变量，方便统一修改 -->
    <java.version>8</java.version>
    <spring.version>5.3.21</spring.version>
    <mybatis.version>3.5.9</mybatis.version>
    <mysql.version>8.0.29</mysql.version>
    <junit.version>4.12</junit.version>
</properties>

<dependencyManagement>
    <dependencies>
        <!-- Spring框架 -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        
        <!-- MyBatis -->
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>${mybatis.version}</version>
        </dependency>
        
        <!-- MySQL驱动 -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>${mysql.version}</version>
        </dependency>
        
        <!-- 测试框架 -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

### 4.3 子模块中的简化使用


**🎯 简化后的依赖声明**
```xml
<!-- 子模块pom.xml中的dependencies -->
<dependencies>
    <!-- 无需写version，自动使用父项目定义的版本 -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <!-- version会自动从父项目的dependencyManagement继承 -->
    </dependency>
    
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis</artifactId>
        <!-- 同样无需指定版本 -->
    </dependency>
</dependencies>
```

### 4.4 版本管理最佳实践


**📋 管理策略**

| 管理方式 | 适用场景 | 优点 | 注意事项 |
|---------|----------|------|----------|
| **properties变量** | 同一框架多个依赖 | 统一修改方便 | 变量名要有意义 |
| **Spring Boot BOM** | Spring Boot项目 | 版本兼容有保证 | 限制了技术选型 |
| **自定义BOM** | 企业级项目 | 完全控制版本 | 需要测试兼容性 |

**💡 版本升级流程**
```
第1步：修改父项目properties中的版本号
第2步：编译测试，检查是否有兼容性问题  
第3步：如果有问题，可以在具体子模块中覆盖版本
第4步：全部测试通过后，统一发布
```

---

## 5. 🔧 插件统一管理


### 5.1 pluginManagement的作用机制


**🛠️ 插件管理原理**
```
pluginManagement作用：
✅ 统一定义插件版本和配置
✅ 子模块可以选择性继承
✅ 避免插件配置重复
✅ 保证构建行为一致

使用方式：
1. 父项目在pluginManagement中定义
2. 子模块在plugins中引用（无需写版本和配置）
3. 如果不引用，不会被激活
```

### 5.2 父项目插件管理配置


```xml
<build>
    <pluginManagement>
        <plugins>
            <!-- Java编译插件 -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.8.1</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            
            <!-- Surefire测试插件 -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>3.0.0-M5</version>
                <configuration>
                    <skipTests>false</skipTests>
                </configuration>
            </plugin>
            
            <!-- War打包插件（仅web模块需要） -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>3.2.3</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
```

### 5.3 子模块插件继承


**🎯 选择性使用插件**
```xml
<!-- 子模块pom.xml中的build配置 -->
<build>
    <plugins>
        <!-- 继承父项目的编译插件配置 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <!-- 版本和configuration自动从父项目继承 -->
        </plugin>
        
        <!-- 只有web模块才需要war插件 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
        </plugin>
    </plugins>
</build>
```

### 5.4 常用插件配置模板


**📋 企业级插件配置**
```xml
<pluginManagement>
    <plugins>
        <!-- 1. 编译插件：设置Java版本和编码 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.8.1</version>
            <configuration>
                <source>8</source>
                <target>8</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        
        <!-- 2. 资源插件：设置资源文件编码 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>3.2.0</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        
        <!-- 3. 打包插件：生成可执行jar -->
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <version>2.5.4</version>
        </plugin>
    </plugins>
</pluginManagement>
```

---

## 6. 🚀 实战案例演练


### 6.1 项目结构设计


**🏗️ 典型电商项目结构**
```
e-commerce-parent/           ← 父项目
├── pom.xml                 ← 父pom配置
├── common-module/          ← 公共工具模块
│   ├── src/
│   └── pom.xml
├── user-service/           ← 用户服务模块
│   ├── src/
│   └── pom.xml
├── order-service/          ← 订单服务模块
│   ├── src/
│   └── pom.xml
└── web-admin/             ← 管理后台模块
    ├── src/
    └── pom.xml
```

### 6.2 父项目完整配置


```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <groupId>com.example</groupId>
    <artifactId>e-commerce-parent</artifactId>
    <version>1.0.0</version>
    <packaging>pom</packaging>
    
    <name>电商系统父项目</name>
    <description>统一管理电商系统各模块</description>
    
    <!-- 子模块声明 -->
    <modules>
        <module>common-module</module>
        <module>user-service</module>
        <module>order-service</module>
        <module>web-admin</module>
    </modules>
    
    <!-- 属性配置 -->
    <properties>
        <java.version>8</java.version>
        <maven.compiler.source>8</maven.compiler.source>
        <maven.compiler.target>8</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        
        <!-- 框架版本 -->
        <spring.version>5.3.21</spring.version>
        <mybatis.version>3.5.9</mybatis.version>
        <mysql.version>8.0.29</mysql.version>
        <jackson.version>2.13.3</jackson.version>
        <junit.version>4.12</junit.version>
    </properties>
    
    <!-- 依赖版本管理 -->
    <dependencyManagement>
        <dependencies>
            <!-- Spring框架 -->
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
                <version>${spring.version}</version>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
                <version>${spring.version}</version>
            </dependency>
            
            <!-- 数据库相关 -->
            <dependency>
                <groupId>org.mybatis</groupId>
                <artifactId>mybatis</artifactId>
                <version>${mybatis.version}</version>
            </dependency>
            <dependency>
                <groupId>mysql</groupId>
                <artifactId>mysql-connector-java</artifactId>
                <version>${mysql.version}</version>
            </dependency>
            
            <!-- JSON处理 -->
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-databind</artifactId>
                <version>${jackson.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
    
    <!-- 插件管理 -->
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.8.1</version>
                    <configuration>
                        <source>${java.version}</source>
                        <target>${java.version}</target>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project>
```

### 6.3 子模块配置示例


**用户服务模块配置**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <!-- 继承父项目 -->
    <parent>
        <groupId>com.example</groupId>
        <artifactId>e-commerce-parent</artifactId>
        <version>1.0.0</version>
        <relativePath>../pom.xml</relativePath>
    </parent>
    
    <artifactId>user-service</artifactId>
    <packaging>jar</packaging>
    <name>用户服务模块</name>
    
    <dependencies>
        <!-- 依赖公共模块 -->
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>common-module</artifactId>
            <version>${project.version}</version>
        </dependency>
        
        <!-- Spring框架（版本自动继承） -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
        </dependency>
        
        <!-- 数据库相关 -->
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
        </dependency>
        
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
        </dependency>
    </dependencies>
</project>
```

### 6.4 构建和验证


**📋 构建命令**
```bash
# 在父项目根目录执行
mvn clean install

# Maven会按依赖关系自动确定构建顺序：
# 1. common-module（被其他模块依赖）
# 2. user-service  
# 3. order-service
# 4. web-admin
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念


**🔸 父子关系本质**
```
父项目（Parent）：
• packaging必须是pom
• 定义公共配置和依赖版本
• 统一管理构建流程
• 不包含业务代码

子模块（Child）：  
• 通过<parent>标签继承
• 自动获得父项目配置
• 可以选择性使用依赖
• 专注具体业务功能
```

**🔸 两个核心管理机制**
```
dependencyManagement：
✅ 统一管理依赖版本
✅ 子模块可选择性继承
✅ 解决版本冲突问题

pluginManagement：
✅ 统一管理插件配置
✅ 保证构建行为一致
✅ 子模块选择性使用
```

### 7.2 实际应用价值


**🎯 解决的实际问题**
- **版本管理**：统一依赖版本，避免冲突
- **配置复用**：公共配置一次定义，处处使用
- **构建简化**：一键构建所有模块
- **团队协作**：标准化项目结构，降低维护成本

### 7.3 最佳实践建议


**🛠️ 项目组织建议**
```
目录结构原则：
• 父项目根目录包含所有子模块
• 子模块按功能划分（如web、service、dao）
• 公共模块放在最前面（被其他模块依赖）

命名规范：
• 父项目：xxx-parent
• 公共模块：xxx-common  
• 业务模块：xxx-service、xxx-web等
• 版本号：统一使用${project.version}
```

**⚠️ 常见问题避免**
```
❌ 父项目包含业务代码
❌ 子模块直接指定版本号
❌ relativePath配置错误
❌ 循环依赖问题

✅ 父项目只做管理，不写业务
✅ 版本统一从父项目继承
✅ 确保relativePath指向正确
✅ 合理设计模块依赖关系
```

### 7.4 记忆要点


**🧠 核心记忆**
- **父项目像管家**：统一管理，不干具体活
- **子模块像员工**：继承规范，专注业务
- **版本管理像采购**：统一采购，避免冲突
- **插件管理像标准**：统一标准，选择使用

**🎯 一句话精华**
> Maven父子项目就像家族企业：父辈定规矩管资源，子辈按规矩做具体工作，既统一管理又灵活分工！