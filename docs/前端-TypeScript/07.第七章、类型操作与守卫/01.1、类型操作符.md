---
title: 1ã€ç±»å‹æ“ä½œç¬¦
---
## ğŸ“š ç›®å½•

1. [keyofæ“ä½œç¬¦ - è·å–å¯¹è±¡é”®](#1-keyofæ“ä½œç¬¦---è·å–å¯¹è±¡é”®)
2. [typeofæ“ä½œç¬¦ - è·å–å˜é‡ç±»å‹](#2-typeofæ“ä½œç¬¦---è·å–å˜é‡ç±»å‹)
3. [inæ“ä½œç¬¦ - å±æ€§æ£€æŸ¥ä¸éå†](#3-inæ“ä½œç¬¦---å±æ€§æ£€æŸ¥ä¸éå†)
4. [æ¡ä»¶ç±»å‹ - ç±»å‹çš„ä¸‰å…ƒè¿ç®—](#4-æ¡ä»¶ç±»å‹---ç±»å‹çš„ä¸‰å…ƒè¿ç®—)
5. [inferæ¨æ–­ - è‡ªåŠ¨æ¨å¯¼ç±»å‹](#5-inferæ¨æ–­---è‡ªåŠ¨æ¨å¯¼ç±»å‹)
6. [å®æˆ˜åº”ç”¨ç¤ºä¾‹](#6-å®æˆ˜åº”ç”¨ç¤ºä¾‹)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”‘ keyofæ“ä½œç¬¦ - è·å–å¯¹è±¡é”®


### 1.1 åŸºæœ¬æ¦‚å¿µ


`keyof` å°±åƒæ˜¯è·å–å¯¹è±¡æ‰€æœ‰é’¥åŒ™çš„å·¥å…·ï¼Œå®ƒèƒ½æå–å‡ºå¯¹è±¡ç±»å‹çš„æ‰€æœ‰å±æ€§åã€‚

```typescript
// ç†è§£keyofçš„æ ¸å¿ƒæ€è·¯
interface User {
  name: string;
  age: number;
  email: string;
}

// keyof User ç­‰ä»·äº "name" | "age" | "email"
type UserKeys = keyof User;  // "name" | "age" | "email"
```

**ğŸ’¡ ç›´è§‚ç†è§£**ï¼š
```
æƒ³è±¡ä¸€ä¸ªå¯¹è±¡å°±åƒä¸€ä¸ªæˆ¿å­
æˆ¿å­æœ‰å¾ˆå¤šæˆ¿é—´ï¼šnameæˆ¿é—´ã€ageæˆ¿é—´ã€emailæˆ¿é—´
keyofå°±æ˜¯è·å–æ‰€æœ‰æˆ¿é—´åç§°çš„æ“ä½œ
```

### 1.2 å®é™…åº”ç”¨åœºæ™¯


**ğŸ”¸ åŠ¨æ€è®¿é—®å¯¹è±¡å±æ€§**
```typescript
function getValue<T, K extends keyof T>(obj: T, key: K): T[K] {
  return obj[key];
}

const user = { name: "å¼ ä¸‰", age: 25, email: "123@qq.com" };

const name = getValue(user, "name");    // ç±»å‹ï¼šstring
const age = getValue(user, "age");      // ç±»å‹ï¼šnumber
// const invalid = getValue(user, "xyz"); // âŒ ç¼–è¯‘é”™è¯¯
```

**ğŸ”¸ åˆ›å»ºå®‰å…¨çš„å±æ€§é€‰æ‹©å™¨**
```typescript
interface Product {
  id: number;
  title: string;
  price: number;
  category: string;
}

// åªèƒ½é€‰æ‹©Productçš„çœŸå®å±æ€§
function pickProperty<K extends keyof Product>(key: K) {
  return key;
}

const validKey = pickProperty("price");     // âœ… æ­£ç¡®
// const invalidKey = pickProperty("xyz");  // âŒ ç¼–è¯‘é”™è¯¯
```

### 1.3 keyofçš„é«˜çº§ç”¨æ³•


**æ•°ç»„å’Œå­—ç¬¦ä¸²çš„keyof**
```typescript
// æ•°ç»„çš„keyofåŒ…å«æ•°ç»„æ–¹æ³•å’Œç´¢å¼•
type ArrayKeys = keyof string[];  // "length" | "push" | "pop" | number | ...

// å­—ç¬¦ä¸²çš„keyofåŒ…å«å­—ç¬¦ä¸²æ–¹æ³•
type StringKeys = keyof string;   // "charAt" | "indexOf" | "length" | ...
```

---

## 2. ğŸ” typeofæ“ä½œç¬¦ - è·å–å˜é‡ç±»å‹


### 2.1 åŸºæœ¬æ¦‚å¿µ


`typeof` åœ¨TypeScriptä¸­æœ‰ä¸¤ä¸ªä½œç”¨ï¼š**è¿è¡Œæ—¶æ£€æŸ¥**å’Œ**ç¼–è¯‘æ—¶ç±»å‹æå–**ã€‚

```typescript
// ğŸ”¸ è¿è¡Œæ—¶typeofï¼ˆJavaScriptåŸç”Ÿï¼‰
const value = "hello";
console.log(typeof value);  // "string"

// ğŸ”¸ ç¼–è¯‘æ—¶typeofï¼ˆTypeScriptä¸“ç”¨ï¼‰
type ValueType = typeof value;  // stringç±»å‹
```

### 2.2 ç¼–è¯‘æ—¶typeofçš„å¼ºå¤§ç”¨æ³•


**ğŸ”¸ ä»å˜é‡æ¨æ–­ç±»å‹**
```typescript
const config = {
  apiUrl: "https://api.example.com",
  timeout: 5000,
  retries: 3
};

// æ— éœ€æ‰‹å†™æ¥å£ï¼Œç›´æ¥ä»å˜é‡è·å–ç±»å‹
type Config = typeof config;
// ç­‰ä»·äº:
// type Config = {
//   apiUrl: string;
//   timeout: number;
//   retries: number;
// }
```

**ğŸ”¸ ä»å‡½æ•°æ¨æ–­ç±»å‹**
```typescript
function createUser(name: string, age: number) {
  return { name, age, id: Math.random() };
}

// è·å–å‡½æ•°ç±»å‹
type CreateUserType = typeof createUser;
// (name: string, age: number) => { name: string; age: number; id: number }

// è·å–å‡½æ•°è¿”å›å€¼ç±»å‹
type User = ReturnType<typeof createUser>;
// { name: string; age: number; id: number }
```

### 2.3 å®ç”¨æŠ€å·§ç»„åˆ


**typeof + keyof ç»„åˆä½¿ç”¨**
```typescript
const theme = {
  colors: {
    primary: "#007bff",
    secondary: "#6c757d"
  },
  fonts: {
    small: "12px",
    large: "18px"
  }
};

// è·å–themeçš„æ‰€æœ‰é¡¶çº§å±æ€§
type ThemeKeys = keyof typeof theme;  // "colors" | "fonts"

// è·å–colorsçš„æ‰€æœ‰å±æ€§
type ColorKeys = keyof typeof theme.colors;  // "primary" | "secondary"
```

---

## 3. ğŸ“‹ inæ“ä½œç¬¦ - å±æ€§æ£€æŸ¥ä¸éå†


### 3.1 è¿è¡Œæ—¶å±æ€§æ£€æŸ¥


`in` æ“ä½œç¬¦å¯ä»¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦åŒ…å«æŸä¸ªå±æ€§ï¼Œå¸¸ç”¨äº**ç±»å‹å®ˆå«**ã€‚

```typescript
interface Bird {
  fly(): void;
  layEggs(): void;
}

interface Fish {
  swim(): void;
  layEggs(): void;
}

// ä½¿ç”¨inæ“ä½œç¬¦è¿›è¡Œç±»å‹å®ˆå«
function moveAnimal(animal: Bird | Fish) {
  if ("fly" in animal) {
    animal.fly();    // TypeScriptçŸ¥é“è¿™é‡Œæ˜¯Birdç±»å‹
  } else {
    animal.swim();   // TypeScriptçŸ¥é“è¿™é‡Œæ˜¯Fishç±»å‹
  }
}
```

### 3.2 æ˜ å°„ç±»å‹ä¸­çš„inæ“ä½œç¬¦


**ğŸ”¸ åŸºç¡€æ˜ å°„è¯­æ³•**
```typescript
// inæ“ä½œç¬¦åœ¨æ˜ å°„ç±»å‹ä¸­éå†è”åˆç±»å‹
type Readonly<T> = {
  readonly [K in keyof T]: T[K];
};

interface User {
  name: string;
  age: number;
}

type ReadonlyUser = Readonly<User>;
// ç»“æœ: { readonly name: string; readonly age: number; }
```

**ğŸ”¸ åˆ›å»ºå¯é€‰ç±»å‹**
```typescript
// å°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰
type Partial<T> = {
  [K in keyof T]?: T[K];
};

type PartialUser = Partial<User>;
// ç»“æœ: { name?: string; age?: number; }
```

### 3.3 æ˜ å°„ç±»å‹çš„å®ç”¨æ¨¡å¼


**ğŸ”¸ åˆ›å»ºå±æ€§éªŒè¯å™¨**
```typescript
type Validators<T> = {
  [K in keyof T]: (value: T[K]) => boolean;
};

interface UserForm {
  email: string;
  age: number;
}

const validators: Validators<UserForm> = {
  email: (value) => value.includes("@"),
  age: (value) => value >= 0
};
```

---

## 4. âš¡ æ¡ä»¶ç±»å‹ - ç±»å‹çš„ä¸‰å…ƒè¿ç®—


### 4.1 åŸºæœ¬è¯­æ³•ç†è§£


æ¡ä»¶ç±»å‹å°±åƒJavaScriptçš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œä½†æ˜¯ç”¨äºç±»å‹åˆ¤æ–­ã€‚

```typescript
// åŸºç¡€è¯­æ³•: T extends U ? X : Y
// å¦‚æœTèƒ½èµ‹å€¼ç»™Uï¼Œåˆ™è¿”å›Xï¼Œå¦åˆ™è¿”å›Y

type IsString<T> = T extends string ? true : false;

type Test1 = IsString<string>;   // true
type Test2 = IsString<number>;   // false
type Test3 = IsString<"hello">;  // true (å­—é¢é‡ç±»å‹extends string)
```

### 4.2 å®ç”¨æ¡ä»¶ç±»å‹ç¤ºä¾‹


**ğŸ”¸ è¿‡æ»¤nullå’Œundefined**
```typescript
type NonNullable<T> = T extends null | undefined ? never : T;

type CleanType = NonNullable<string | null | undefined>;  // string
```

**ğŸ”¸ æå–æ•°ç»„å…ƒç´ ç±»å‹**
```typescript
type ArrayElement<T> = T extends (infer U)[] ? U : never;

type StringArray = string[];
type ElementType = ArrayElement<StringArray>;  // string
```

**ğŸ”¸ å‡½æ•°å‚æ•°ç±»å‹æå–**
```typescript
type Parameters<T> = T extends (...args: infer P) => any ? P : never;

function example(a: string, b: number) {}
type ExampleParams = Parameters<typeof example>;  // [string, number]
```

### 4.3 åˆ†å‘æ¡ä»¶ç±»å‹


å½“æ¡ä»¶ç±»å‹é‡åˆ°è”åˆç±»å‹æ—¶ï¼Œä¼š**è‡ªåŠ¨åˆ†å‘**ï¼š

```typescript
type ToArray<T> = T extends any ? T[] : never;

type Result = ToArray<string | number>;  
// åˆ†å‘ä¸º: ToArray<string> | ToArray<number>
// ç»“æœ: string[] | number[]
```

---

## 5. ğŸ”® inferæ¨æ–­ - è‡ªåŠ¨æ¨å¯¼ç±»å‹


### 5.1 inferçš„æ ¸å¿ƒæ¦‚å¿µ


`infer` è®©TypeScriptè‡ªåŠ¨æ¨æ–­å¹¶æå–ç±»å‹ï¼Œå°±åƒæ˜¯"è¯·å¸®æˆ‘çŒœå‡ºè¿™é‡Œçš„ç±»å‹"ã€‚

```typescript
// åŸºç¡€ç¤ºä¾‹ï¼šæå–å‡½æ•°è¿”å›å€¼ç±»å‹
type ReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

function getName(): string { return ""; }
type NameType = ReturnType<typeof getName>;  // string
```

### 5.2 å¸¸ç”¨inferæ¨¡å¼


**ğŸ”¸ æå–Promiseçš„å€¼ç±»å‹**
```typescript
type UnwrapPromise<T> = T extends Promise<infer U> ? U : T;

type AsyncString = Promise<string>;
type SyncString = UnwrapPromise<AsyncString>;  // string
```

**ğŸ”¸ æå–æ•°ç»„å…ƒç´ ç±»å‹**
```typescript
type ArrayType<T> = T extends (infer U)[] ? U : never;

type Numbers = number[];
type NumberType = ArrayType<Numbers>;  // number
```

**ğŸ”¸ æå–å¯¹è±¡å±æ€§ç±»å‹**
```typescript
type PropertyType<T, K extends keyof T> = T extends { [P in K]: infer U } ? U : never;

interface User {
  name: string;
  age: number;
}

type NameType = PropertyType<User, "name">;  // string
```

### 5.3 å¤æ‚inferåº”ç”¨


**æå–å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹**
```typescript
type FirstParameter<T> = T extends (first: infer F, ...rest: any[]) => any ? F : never;

function process(data: string, options: object) {}
type FirstParam = FirstParameter<typeof process>;  // string
```

---

## 6. ğŸš€ å®æˆ˜åº”ç”¨ç¤ºä¾‹


### 6.1 åˆ›å»ºç±»å‹å®‰å…¨çš„å¯¹è±¡æ›´æ–°å‡½æ•°


```typescript
interface User {
  id: number;
  name: string;
  email: string;
  age: number;
}

// åªå…è®¸æ›´æ–°éƒ¨åˆ†å±æ€§ï¼Œä¸”ç±»å‹å®‰å…¨
function updateUser<K extends keyof User>(
  user: User, 
  key: K, 
  value: User[K]
): User {
  return { ...user, [key]: value };
}

const user: User = { id: 1, name: "å¼ ä¸‰", email: "123@qq.com", age: 25 };

const updated = updateUser(user, "age", 26);        // âœ… æ­£ç¡®
// const invalid = updateUser(user, "age", "è€");    // âŒ ç±»å‹é”™è¯¯
```

### 6.2 åˆ›å»ºå“åº”å¼æ•°æ®ç±»å‹


```typescript
// å°†å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•è½¬æ¢ä¸ºå“åº”å¼
type Reactive<T> = {
  [K in keyof T]: T[K] extends (...args: any[]) => infer R 
    ? (...args: Parameters<T[K]>) => Promise<R>
    : T[K];
};

interface API {
  getUser(id: number): User;
  updateUser(user: User): boolean;
  count: number;
}

type ReactiveAPI = Reactive<API>;
// ç»“æœ:
// {
//   getUser: (id: number) => Promise<User>;
//   updateUser: (user: User) => Promise<boolean>;
//   count: number;
// }
```

### 6.3 åˆ›å»ºæ·±åº¦åªè¯»ç±»å‹


```typescript
type DeepReadonly<T> = {
  readonly [K in keyof T]: T[K] extends object 
    ? DeepReadonly<T[K]> 
    : T[K];
};

interface Config {
  database: {
    host: string;
    port: number;
  };
  cache: {
    ttl: number;
  };
}

type ReadonlyConfig = DeepReadonly<Config>;
// æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å˜ä¸ºreadonly
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```typescript
// ğŸ”¸ keyof: è·å–å¯¹è±¡æ‰€æœ‰å±æ€§åçš„è”åˆç±»å‹
type Keys = keyof { name: string; age: number };  // "name" | "age"

// ğŸ”¸ typeof: ä»å˜é‡æ¨æ–­ç±»å‹
const obj = { x: 1 };
type ObjType = typeof obj;  // { x: number }

// ğŸ”¸ in: å±æ€§æ£€æŸ¥å’Œæ˜ å°„éå†
type Optional<T> = { [K in keyof T]?: T[K] };

// ğŸ”¸ æ¡ä»¶ç±»å‹: ç±»å‹å±‚é¢çš„if-else
type Check<T> = T extends string ? true : false;

// ğŸ”¸ infer: åœ¨æ¡ä»¶ç±»å‹ä¸­æ¨æ–­ç±»å‹
type ReturnType<T> = T extends (...args: any[]) => infer R ? R : never;
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


| æ“ä½œç¬¦ | **ä½œç”¨** | **ä½¿ç”¨åœºæ™¯** | **è®°å¿†æŠ€å·§** |
|--------|----------|-------------|-------------|
| **keyof** | `è·å–å¯¹è±¡é”®å` | `åŠ¨æ€å±æ€§è®¿é—®ã€æ³›å‹çº¦æŸ` | `é’¥åŒ™ä¸² - è·å–æ‰€æœ‰é’¥åŒ™` |
| **typeof** | `æ¨æ–­å˜é‡ç±»å‹` | `ä»å€¼åæ¨ç±»å‹å®šä¹‰` | `ç±»å‹æ¢æµ‹å™¨` |
| **in** | `å±æ€§æ£€æŸ¥/éå†` | `ç±»å‹å®ˆå«ã€æ˜ å°„ç±»å‹` | `åŒ…å«æ£€æŸ¥å™¨` |
| **æ¡ä»¶ç±»å‹** | `ç±»å‹åˆ†æ”¯åˆ¤æ–­` | `ç±»å‹è¿‡æ»¤ã€è½¬æ¢` | `ç±»å‹çš„ä¸‰å…ƒè¿ç®—ç¬¦` |
| **infer** | `è‡ªåŠ¨ç±»å‹æ¨æ–­` | `æå–åµŒå¥—ç±»å‹` | `æ™ºèƒ½ç±»å‹çŒœæµ‹å™¨` |

### 7.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ”¹ ç»„åˆä½¿ç”¨å¨åŠ›æ›´å¤§**
```typescript
// keyof + typeof + æ¡ä»¶ç±»å‹çš„ç»„åˆ
type PickByType<T, U> = {
  [K in keyof T]: T[K] extends U ? K : never;
}[keyof T];

const example = { name: "å¼ ä¸‰", age: 25, active: true };
type StringKeys = PickByType<typeof example, string>;  // "name"
```

**ğŸ”¹ æ¸è¿›å¼å­¦ä¹ è·¯å¾„**
1. **å…ˆæŒæ¡åŸºç¡€**: keyof å’Œ typeof çš„å•ç‹¬ä½¿ç”¨
2. **ç†è§£æ˜ å°„**: in æ“ä½œç¬¦åœ¨æ˜ å°„ç±»å‹ä¸­çš„åº”ç”¨  
3. **å­¦ä¼šæ¡ä»¶**: æ¡ä»¶ç±»å‹çš„åŸºç¡€è¯­æ³•å’Œåˆ†å‘
4. **æŒæ¡æ¨æ–­**: infer åœ¨å¤æ‚ç±»å‹æ“ä½œä¸­çš„åº”ç”¨
5. **ç»„åˆåº”ç”¨**: å¤šä¸ªæ“ä½œç¬¦çš„ç»¼åˆä½¿ç”¨

**ğŸ”¹ å¸¸è§é”™è¯¯é¿å…**
```typescript
// âŒ é”™è¯¯ï¼šæ··æ·†è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶typeof
function check(value: any) {
  if (typeof value === "string") {  // è¿è¡Œæ—¶typeof
    type T = typeof value;  // âŒ ç¼–è¯‘æ—¶typeofï¼Œè¿™é‡Œvalueç±»å‹æ˜¯any
  }
}

// âœ… æ­£ç¡®ï¼šæ˜ç¡®åŒºåˆ†ä½¿ç”¨åœºæ™¯
const config = { url: "..." };
type ConfigType = typeof config;  // ç¼–è¯‘æ—¶typeofï¼Œæ¨æ–­ç±»å‹

function isString(value: any): value is string {  
  return typeof value === "string";  // è¿è¡Œæ—¶typeofï¼Œç±»å‹å®ˆå«
}
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- **keyof**ï¼šå¯¹è±¡å±æ€§åæå–å™¨
- **typeof**ï¼šå˜é‡ç±»å‹æ¢æµ‹å™¨  
- **in**ï¼šå±æ€§å­˜åœ¨æ£€æŸ¥å™¨
- **æ¡ä»¶ç±»å‹**ï¼šç±»å‹çš„if-elseåˆ¤æ–­
- **infer**ï¼šæ™ºèƒ½ç±»å‹æ¨æ–­åŠ©æ‰‹
