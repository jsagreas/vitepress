---
title: 1、函数声明与参数类型
---
## 📚 目录

1. [函数类型的基本概念](#1-函数类型的基本概念)
2. [函数类型定义语法](#2-函数类型定义语法)
3. [参数类型处理](#3-参数类型处理)
4. [箭头函数类型](#4-箭头函数类型)
5. [this类型约束](#5-this类型约束)
6. [核心要点总结](#6-核心要点总结)

---

## 1. 🎯 函数类型的基本概念


### 1.1 什么是函数类型


**简单理解**：函数类型就是告诉TypeScript"这个函数接收什么参数，返回什么结果"

```typescript
// JavaScript中的函数
function add(a, b) {
  return a + b;
}

// TypeScript中的函数类型
function add(a: number, b: number): number {
  return a + b;
}
```

**核心思路**：
```
输入参数类型 + 输出结果类型 = 完整的函数类型
```

### 1.2 为什么需要函数类型


**问题场景**：
```typescript
// 没有类型约束的问题
function greet(name) {
  return "Hello " + name;
}

greet("张三");     // ✅ 正常使用
greet(123);       // ❌ 传入数字，但没有报错
greet();          // ❌ 缺少参数，但没有报错
```

**使用类型约束后**：
```typescript
function greet(name: string): string {
  return "Hello " + name;
}

greet("张三");     // ✅ 正常
greet(123);       // ❌ TypeScript直接报错
greet();          // ❌ TypeScript直接报错
```

**实际价值**：
- 🔍 **提前发现错误**：编写时就能发现问题
- 📖 **代码更易读**：一眼看出函数的用途
- 🛡️ **防止误用**：避免传错参数类型

---

## 2. ⚙️ 函数类型定义语法


### 2.1 基础语法格式


**函数声明方式**：
```typescript
// 格式：function 函数名(参数: 类型): 返回值类型
function 函数名(参数1: 类型1, 参数2: 类型2): 返回值类型 {
  // 函数体
}
```

**实际例子**：
```typescript
// 数字相加
function add(x: number, y: number): number {
  return x + y;
}

// 字符串处理
function formatName(first: string, last: string): string {
  return `${first} ${last}`;
}

// 没有返回值
function sayHello(name: string): void {
  console.log(`Hello ${name}`);
}
```

### 2.2 函数表达式类型


**赋值给变量的函数**：
```typescript
// 方式1：直接在函数上加类型
const multiply = function(x: number, y: number): number {
  return x * y;
};

// 方式2：给变量加函数类型
const divide: (x: number, y: number) => number = function(x, y) {
  return x / y;
};
```

**函数类型的完整写法**：
```
(参数1: 类型1, 参数2: 类型2) => 返回值类型
```

### 2.3 常用返回值类型


| 返回值类型 | **含义** | **使用场景** |
|----------|---------|-------------|
| `number` | 返回数字 | 计算函数、获取长度等 |
| `string` | 返回字符串 | 文本处理、格式化等 |
| `boolean` | 返回布尔值 | 判断函数、验证函数等 |
| `void` | 无返回值 | 执行操作、打印日志等 |
| `object` | 返回对象 | 数据处理、创建对象等 |

```typescript
function getAge(): number { return 25; }
function getName(): string { return "张三"; }
function isValid(): boolean { return true; }
function logMessage(): void { console.log("Hello"); }
function getUser(): object { return { name: "张三" }; }
```

---

## 3. 🔧 参数类型处理


### 3.1 可选参数 - 用问号标记


**基本概念**：有些参数可传可不传，用`?`标记

```typescript
// 基础语法
function 函数名(必需参数: 类型, 可选参数?: 类型): 返回类型 {
  // 函数体
}
```

**实际应用**：
```typescript
function createUser(name: string, age?: number): string {
  if (age) {
    return `用户：${name}，年龄：${age}`;
  }
  return `用户：${name}`;
}

// 使用方式
createUser("张三");           // ✅ 可以
createUser("李四", 25);       // ✅ 也可以
```

**⚠️ 重要规则**：
```typescript
// ✅ 正确：可选参数放在后面
function good(name: string, age?: number) { }

// ❌ 错误：可选参数不能放在必需参数前面
function bad(age?: number, name: string) { }  // 报错
```

### 3.2 默认参数 - 自动类型推断


**基本概念**：给参数设置默认值，TypeScript会自动推断类型

```typescript
function greet(name: string, greeting = "Hello"): string {
  //                          ↑ 自动推断为string类型
  return `${greeting} ${name}`;
}

// 等价于
function greet(name: string, greeting: string = "Hello"): string {
  return `${greeting} ${name}`;
}
```

**实用示例**：
```typescript
// 网页配置函数
function setupPage(title: string, theme = "light", width = 1200) {
  // theme自动推断为string类型
  // width自动推断为number类型
  return { title, theme, width };
}

setupPage("首页");                    // ✅ 使用默认值
setupPage("首页", "dark");           // ✅ 覆盖theme
setupPage("首页", "dark", 1400);     // ✅ 覆盖所有默认值
```

### 3.3 剩余参数 - 处理不定数量参数


**基本概念**：当参数数量不确定时，用`...`收集所有剩余参数

```typescript
function 函数名(固定参数: 类型, ...剩余参数: 类型[]): 返回类型 {
  // 剩余参数是一个数组
}
```

**实际应用**：
```typescript
// 求和函数：可以传入任意数量的数字
function sum(first: number, ...numbers: number[]): number {
  let total = first;
  for (const num of numbers) {
    total += num;
  }
  return total;
}

// 使用方式
sum(1);              // ✅ 传1个参数
sum(1, 2, 3);        // ✅ 传3个参数  
sum(1, 2, 3, 4, 5);  // ✅ 传5个参数
```

**字符串拼接示例**：
```typescript
function joinStrings(separator: string, ...strings: string[]): string {
  return strings.join(separator);
}

joinStrings("-", "a", "b", "c");        // 结果："a-b-c"
joinStrings(" ", "Hello", "World");     // 结果："Hello World"
```

---

## 4. 🎯 箭头函数类型


### 4.1 箭头函数的类型写法


**基础对比**：
```typescript
// 普通函数
function add(x: number, y: number): number {
  return x + y;
}

// 箭头函数 - 方式1
const add = (x: number, y: number): number => {
  return x + y;
};

// 箭头函数 - 方式2（简写）
const add = (x: number, y: number): number => x + y;
```

### 4.2 箭头函数类型声明


**给变量指定函数类型**：
```typescript
// 先声明类型，再赋值
const calculator: (x: number, y: number) => number = (x, y) => x + y;

// 类型别名方式
type MathOperation = (x: number, y: number) => number;
const multiply: MathOperation = (x, y) => x * y;
const divide: MathOperation = (x, y) => x / y;
```

### 4.3 实际应用场景


**数组方法中的箭头函数**：
```typescript
const numbers = [1, 2, 3, 4, 5];

// map方法
const doubled = numbers.map((num: number): number => num * 2);

// filter方法  
const evens = numbers.filter((num: number): boolean => num % 2 === 0);

// 简化写法（类型推断）
const tripled = numbers.map(num => num * 3);  // 自动推断类型
```

**事件处理函数**：
```typescript
// 按钮点击事件
const handleClick = (event: MouseEvent): void => {
  console.log("按钮被点击了");
};

// 输入框变化事件
const handleChange = (value: string): void => {
  console.log(`输入值：${value}`);
};
```

---

## 5. 🎭 this类型约束


### 5.1 为什么需要this类型


**问题场景**：
```typescript
const user = {
  name: "张三",
  greet() {
    // this在这里指向什么？TypeScript不确定
    return `Hello, ${this.name}`;
  }
};
```

### 5.2 指定this类型


**基本语法**：
```typescript
function 函数名(this: this的类型, 其他参数: 类型): 返回类型 {
  // 函数体
}
```

**实际示例**：
```typescript
interface User {
  name: string;
  age: number;
}

function introduce(this: User): string {
  return `我是${this.name}，今年${this.age}岁`;
}

// 使用
const user: User = { name: "张三", age: 25 };
const boundIntroduce = introduce.bind(user);
console.log(boundIntroduce()); // "我是张三，今年25岁"
```

### 5.3 对象方法中的this


**对象方法定义**：
```typescript
interface Calculator {
  value: number;
  add(this: Calculator, num: number): Calculator;
  multiply(this: Calculator, num: number): Calculator;
}

const calc: Calculator = {
  value: 0,
  add(num) {
    this.value += num;
    return this;
  },
  multiply(num) {
    this.value *= num;
    return this;
  }
};

// 链式调用
calc.add(5).multiply(2);  // value变成10
```

### 5.4 箭头函数的this


**重要区别**：
```typescript
class Counter {
  count = 0;
  
  // 普通方法：this需要绑定
  increment() {
    this.count++;
  }
  
  // 箭头函数：自动绑定this
  incrementArrow = () => {
    this.count++;
  }
}

const counter = new Counter();
const fn1 = counter.increment;      // this会丢失
const fn2 = counter.incrementArrow; // this不会丢失

// fn1();  // ❌ this为undefined
fn2();     // ✅ 正常工作
```

---

## 6. 📋 核心要点总结


### 6.1 必须掌握的核心概念


```typescript
🔸 函数类型 = 参数类型 + 返回值类型
🔸 可选参数：参数名?，必须放在必需参数后面
🔸 默认参数：自动类型推断，等价于可选参数
🔸 剩余参数：...参数名: 类型[]，收集多余参数
🔸 箭头函数：(参数: 类型) => 返回类型
🔸 this约束：function(this: 类型, 其他参数)
```

### 6.2 实用技巧总结


**参数处理顺序**：
```typescript
function example(
  required: string,        // 1. 必需参数
  optional?: number,       // 2. 可选参数
  withDefault = true,      // 3. 默认参数
  ...rest: string[]        // 4. 剩余参数
): void {
  // 函数体
}
```

**类型推断的好处**：
```typescript
// ✅ 推荐：让TypeScript自动推断
const add = (x: number, y: number) => x + y;  // 返回类型自动推断为number

// ❌ 不必要：手动指定明显的类型
const add = (x: number, y: number): number => x + y;  // 返回类型多余
```

**常见使用模式**：
```typescript
// 1. 数据处理函数
const processUser = (user: { name: string; age?: number }) => {
  return `处理用户：${user.name}`;
};

// 2. 事件处理函数
const handleSubmit = (data: FormData): void => {
  console.log("提交数据：", data);
};

// 3. 工具函数
const formatCurrency = (amount: number, currency = "CNY"): string => {
  return `${amount} ${currency}`;
};
```

### 6.3 实际应用指导


**何时使用各种参数类型**：
- **可选参数**：配置项、额外信息（如用户年龄）
- **默认参数**：常用默认值（如主题、语言设置）
- **剩余参数**：数量不定的同类参数（如多个数字求和）

**函数类型定义策略**：
- **简单函数**：直接在函数上加类型
- **复用函数**：使用类型别名
- **对象方法**：明确this类型
- **回调函数**：在参数中定义函数类型

**核心记忆口诀**：
- 参数类型要明确，返回类型可推断
- 可选参数加问号，默认参数自推断  
- 剩余参数用三点，this类型要约束
- 箭头函数更简洁，类型写法要掌握