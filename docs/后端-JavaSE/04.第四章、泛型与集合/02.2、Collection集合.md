---
title: 2ã€Collectioné›†åˆ
---
## ğŸ“š ç›®å½•

1. [Collectioné›†åˆæ¦‚è¿°](#1-Collectioné›†åˆæ¦‚è¿°)
2. [Listæ¥å£è¯¦è§£](#2-Listæ¥å£è¯¦è§£)
3. [Setæ¥å£è¯¦è§£](#3-Setæ¥å£è¯¦è§£)
4. [Queueæ¥å£è¯¦è§£](#4-Queueæ¥å£è¯¦è§£)
5. [æ‰©å®¹æœºåˆ¶æ¯”è¾ƒ](#5-æ‰©å®¹æœºåˆ¶æ¯”è¾ƒ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“¦ Collectioné›†åˆæ¦‚è¿°


### 1.1 Collectionæ¥å£å±‚æ¬¡ç»“æ„


**ğŸ”¸ Collectionæ¥å£ä½“ç³»å›¾**
```
Collection<E> ï¼ˆæ¥å£ï¼‰
â”œâ”€â”€ List<E>ï¼ˆæœ‰åºï¼Œå¯é‡å¤ï¼‰                     // æŒ‰æ’å…¥é¡ºåºä¿å­˜ï¼Œå…è®¸é‡å¤å…ƒç´ 
â”‚   â”œâ”€â”€ ArrayList<E>                            // åŠ¨æ€æ•°ç»„ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢
â”‚   â”œâ”€â”€ LinkedList<E>                           // åŒå‘é“¾è¡¨ï¼Œå¢åˆ å¿«ï¼ŒæŸ¥è¯¢æ…¢ï¼Œå¯ä½œé˜Ÿåˆ—/æ ˆ
â”‚   â””â”€â”€ Vector<E>ï¼ˆå·²è¿‡æ—¶ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½å·®ï¼‰     // åŒæ­¥å®ç°ï¼Œä¸æ¨èä½¿ç”¨
â”‚
â”œâ”€â”€ Set<E>ï¼ˆæ— åºï¼Œä¸å¯é‡å¤ï¼‰                   // ä¸ä¿è¯é¡ºåºï¼Œå…ƒç´ å”¯ä¸€
â”‚   â”œâ”€â”€ HashSet<E>                              // åŸºäº HashMapï¼Œæœ€å¿«ï¼Œå…ƒç´ æ— åº
â”‚   â”œâ”€â”€ LinkedHashSet<E>                        // ä¿ç•™æ’å…¥é¡ºåºï¼Œå†…éƒ¨ä½¿ç”¨é“¾è¡¨ç»´æŠ¤é¡ºåº
â”‚   â””â”€â”€ TreeSet<E>                              // æŒ‰è‡ªç„¶é¡ºåºæˆ– Comparator æ’åºï¼ŒåŸºäºçº¢é»‘æ ‘
â”‚
â””â”€â”€ Queue<E>ï¼ˆé˜Ÿåˆ—æ¥å£ï¼Œéƒ¨åˆ†å®ç°ç±»ä¸ºåŒç«¯æˆ–ä¼˜å…ˆé˜Ÿåˆ—ï¼‰
    â”œâ”€â”€ LinkedList<E>                           // åŒæ—¶å®ç° Listã€Queueã€Dequeï¼Œå¤šé¢æ‰‹
    â””â”€â”€ PriorityQueue<E>                        // ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå†…éƒ¨å…ƒç´ æŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨æ’åºï¼ˆå †ç»“æ„ï¼‰
```

### 1.2 Collectionæ¥å£æ ¸å¿ƒç‰¹ç‚¹


| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ğŸ”¸ ç»Ÿä¸€æŠ½è±¡** | ä¸ºä¸åŒæ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„æ“ä½œæ¥å£ |
| **ğŸ”¸ æ³›å‹æ”¯æŒ** | é€šè¿‡æ³›å‹ç¡®ä¿ç±»å‹å®‰å…¨ |
| **ğŸ”¸ å¯æ‰©å±•æ€§** | æ”¯æŒè‡ªå®šä¹‰å®ç°ç±» |
| **ğŸ”¸ è¿­ä»£å™¨æ¨¡å¼** | ç»Ÿä¸€çš„éå†æ–¹å¼ |

---

## 2. ğŸ“‹ Listæ¥å£è¯¦è§£


### 2.1 Listæ¥å£æ¦‚è¿°


**ğŸ”¸ ListåŸºæœ¬ç‰¹ç‚¹**

List æ˜¯ Collection çš„å­æ¥å£ï¼Œè¡¨ç¤º==æœ‰åºã€å¯é‡å¤==çš„å…ƒç´ é›†åˆã€‚

| ç‰¹ç‚¹           | è¯´æ˜                   |
|----------------|--------------------------------|
| **é¡ºåºæ€§**     | å…ƒç´  ==æŒ‰æ’å…¥é¡ºåº== æ’åˆ—                          |
| **å…è®¸ `null`** | å¯å­˜å‚¨ `null` å€¼                              |
| **å…è®¸é‡å¤å…ƒç´ ** | å­˜åœ¨ç›¸åŒå€¼çš„å…ƒç´ ä¸ä¼šè¢«è‡ªåŠ¨å»é‡                  |
| **ç´¢å¼•è®¿é—®**   | æ”¯æŒ ==åŸºäºç´¢å¼•è®¿é—®==ï¼Œå¦‚ `get(int index)`        |
| **æ“ä½œæ”¯æŒ**   | æä¾› éå†ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ ç­‰åŸºç¡€åŠŸèƒ½         |

### 2.2 Listä¸»è¦å®ç°ç±»å¯¹æ¯”


**ğŸ’¡ ä¸»è¦å®ç°ç±»æ€»è§ˆ**
- **`ArrayList`**ï¼šæŸ¥è¯¢æ€§èƒ½é«˜ï¼Œé€‚ç”¨äºéšæœºè®¿é—®å¤šã€æ’å…¥åˆ é™¤å°‘çš„åœºæ™¯
- **`LinkedList`**ï¼šæ’å…¥åˆ é™¤å¿«ï¼Œé€‚ç”¨äºé˜Ÿåˆ—ã€æ ˆã€é¢‘ç¹å¢åˆ çš„åº”ç”¨
- **`Vector`**ï¼šè€æ—§çš„åŒæ­¥ `List` æ–¹æ¡ˆï¼Œç°å·²ä¸æ¨èä½¿ç”¨

| å®ç°ç±» | åº•å±‚ç»“æ„ | æ˜¯å¦çº¿ç¨‹å®‰å…¨ | æŸ¥è¯¢æ•ˆç‡ | æ’å…¥/åˆ é™¤æ•ˆç‡ | æ˜¯å¦æœ‰åº | æ˜¯å¦å…è®¸é‡å¤ | å¸¸ç”¨åœºæ™¯ |
|-------------|---------|------------|--------------|-----------------|---------|------------|-------------|
| **ArrayList** | åŠ¨æ€æ•°ç»„ | âŒ å¦ | ğŸš€ é«˜ (éšæœºè®¿é—®) | ğŸ¢ ä½ (ä¸­é—´æ’å…¥/åˆ é™¤éœ€ç§»åŠ¨) | âœ… æ˜¯ | âœ… æ˜¯ | æ™®é€šåˆ—è¡¨æ“ä½œ |
| **LinkedList** | åŒå‘é“¾è¡¨ | âŒ å¦ | ğŸ¢ æ…¢ (æŒ‰ç´¢å¼•è®¿é—®) | ğŸš€ å¿« (ä»»æ„ä½ç½®å¢åˆ ) | âœ… æ˜¯ | âœ… æ˜¯ | é¢‘ç¹å¢åˆ ï¼Œé˜Ÿåˆ—/æ ˆ |
| **Vector** | åŠ¨æ€æ•°ç»„ | âœ… æ˜¯ | ğŸš€ é«˜ (éšæœºè®¿é—®) | ğŸ¢ ä½ (åŒæ­¥å¼€é”€) | âœ… æ˜¯ | âœ… æ˜¯ | æ—©æœŸå¤šçº¿ç¨‹åœºæ™¯ (ä¸æ¨è) |

---

### 2.3 ArrayListè¯¦è§£


**ğŸ”¸ ArrayListæ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§        | ArrayList è¯´æ˜           |
|--------------|--------------------------------|
| **åº•å±‚ç»“æ„**  | åŠ¨æ€æ•°ç»„ (`Object[]`) |
| **é»˜è®¤å®¹é‡**  | 10ï¼Œæ‰©å®¹æ—¶å¢é•¿ 1.5 å€ |
| **æŸ¥è¯¢æ€§èƒ½**  | å¿« (`get(int index)`ï¼Œæ”¯æŒéšæœºè®¿é—®) |
| **å†…å­˜ç®¡ç†**  | ç´§å‡‘ï¼Œç»“æ„ ç®€å• |
| **æ’å…¥/åˆ é™¤**  | æ…¢ (å°¤å…¶æ˜¯å¤´éƒ¨/ä¸­é—´æ“ä½œéœ€ç§»åŠ¨å…ƒç´ ) |
| **æ‰©å®¹æœºåˆ¶**  | åŸå®¹é‡ + åŸå®¹é‡ / 2ï¼Œéœ€å¤åˆ¶æ•°ç»„ (æ€§èƒ½æŸè€—) |
| **null å¤„ç†** | æ”¯æŒå­˜å‚¨ `null`ï¼Œä½†å¤šä¸ª `null` è§†ä¸º é‡å¤å…ƒç´  |
| **é€‚ç”¨åœºæ™¯**  | æŸ¥è¯¢é¢‘ç¹ã€å¢åˆ è¾ƒå°‘ |

**âš¡ ArrayListå¸¸ç”¨æ–¹æ³•**
```java
// åˆ›å»ºArrayList
ArrayList<String> list = new ArrayList<>(); // åˆ›å»ºç©ºArrayList
ArrayList<String> list2 = new ArrayList<>(20); // æŒ‡å®šåˆå§‹å®¹é‡
ArrayList<String> list3 = new ArrayList<>(anotherCollection); // ä»å…¶ä»–é›†åˆåˆ›å»º

// ä½¿ç”¨Arrays.asListåˆå§‹åŒ–
ArrayList<String> list4 = new ArrayList<>(Arrays.asList("Apple", "Banana", "Orange"));

// Java 9+ List.ofå¿«é€Ÿåˆ›å»ºä¸å¯å˜Listï¼Œç„¶åè½¬ArrayList
ArrayList<String> list5 = new ArrayList<>(List.of("Apple", "Banana", "Orange"));

// æ·»åŠ å…ƒç´ 
list.add("A");        // æ·»åŠ å…ƒç´ åˆ°æœ«å°¾
list.add(1, "B");     // åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ 
list.addAll(Arrays.asList("Cherry", "Date")); // æ·»åŠ å¤šä¸ªå…ƒç´ ï¼ˆæ‰¹é‡æ·»åŠ ï¼‰

// è·å–å’Œæ›¿æ¢å…ƒç´ 
String element = list.get(0);    // è·å–æŒ‡å®šç´¢å¼•å…ƒç´ 
list.set(0, "C");               // æ›¿æ¢æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
String first = list.stream().findFirst().orElse(null); // è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆJava 8+ï¼‰

// åˆ é™¤å…ƒç´ 
list.remove(0);      // åˆ é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
list.remove("B");    // åˆ é™¤æŒ‡å®šå†…å®¹çš„å…ƒç´ ï¼ˆé¦–æ¬¡å‡ºç°ï¼‰
list.removeIf(item -> item.startsWith("A")); // æ‰¹é‡åˆ é™¤ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼ˆJava 8+ï¼‰

// æŸ¥è¯¢æ“ä½œ
boolean contains = list.contains("A");  // æ£€æŸ¥æ˜¯å¦åŒ…å«æŸå…ƒç´ 
int index = list.indexOf("Apple");      // é¦–æ¬¡å‡ºç°ä½ç½®ï¼Œä¸å­˜åœ¨è¿”å›-1
int size = list.size();                 // è·å–åˆ—è¡¨ä¸­å…ƒç´ çš„æ•°é‡
boolean isEmpty = list.isEmpty();       // æ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©º

// å®¹é‡ç®¡ç†
list.ensureCapacity(100);  // ç¡®ä¿å®¹é‡è‡³å°‘ä¸ºæŒ‡å®šå¤§å°
list.trimToSize();         // å°†å®¹é‡ç¼©å‡ä¸ºå½“å‰å¤§å°ï¼ˆé‡Šæ”¾æœªä½¿ç”¨ç©ºé—´ï¼‰
```

---

### 2.4 LinkedListè¯¦è§£


**ğŸ”¸ LinkedListæ ¸å¿ƒç‰¹æ€§**

| å±æ€§           | LinkedList è¯´æ˜                     |
|-----------------|--------------------------------|
| **åº•å±‚ç»“æ„**      | åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å« å‰é©±ã€åç»§å¼•ç”¨å’Œæ•°æ® |
| **æ’å…¥/åˆ é™¤æ€§èƒ½**  | å¿«ï¼ˆåªä¿®æ”¹æŒ‡é’ˆï¼Œä¸éœ€ç§»åŠ¨å…ƒç´ ï¼‰         |
| **é€‚ç”¨åœºæ™¯**      | é˜Ÿåˆ—ï¼ˆFIFOï¼‰ å’Œ æ ˆï¼ˆLIFOï¼‰           |
| **æŸ¥è¯¢æ€§èƒ½**      | æ…¢ï¼ˆç´¢å¼•è®¿é—®éœ€ä»å¤´/å°¾é¡ºåºæŸ¥æ‰¾ï¼‰         |
| **å†…å­˜ç®¡ç†**      | å ç”¨è¾ƒå¤§ï¼ˆé¢å¤–å­˜å‚¨å‰åæŒ‡é’ˆï¼‰           |
| **ç‰¹æ®Šç‰¹æ€§**      | å”¯ä¸€åŒæ—¶å®ç° `List` å’Œ `Deque`         |

**âš¡ LinkedListå¸¸ç”¨æ–¹æ³•**
```java
// åˆ›å»ºLinkedList
LinkedList<String> list = new LinkedList<>();
LinkedList<String> list2 = new LinkedList<>(anotherCollection); // ä»å…¶ä»–é›†åˆåˆ›å»º

// æ·»åŠ å…ƒç´ 
list.add("A");        // æ·»åŠ å…ƒç´ åˆ°æœ«å°¾
list.addFirst("B");   // åœ¨å¤´éƒ¨æ·»åŠ å…ƒç´ 
list.addLast("C");    // åœ¨å°¾éƒ¨æ·»åŠ å…ƒç´ 
list.add(0, "Banana"); // åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ 

// è·å–å…ƒç´ 
String firstElement = list.getFirst();  // è·å–å¤´éƒ¨å…ƒç´ 
String lastElement = list.getLast();   // è·å–å°¾éƒ¨å…ƒç´ 
String elementAtIndex = list.get(1);   // è·å–æŒ‡å®šç´¢å¼•çš„å…ƒç´ 

// åˆ é™¤å…ƒç´ 
list.removeFirst();  // åˆ é™¤å¤´éƒ¨å…ƒç´ 
list.removeLast();   // åˆ é™¤å°¾éƒ¨å…ƒç´ 
list.remove(1);      // åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ 

// æ›¿æ¢å…ƒç´ 
String oldValue = list.set(1, "Blueberry");   // æ›¿æ¢æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
list.replaceAll(item -> item.toUpperCase()); // æ‰¹é‡æ›¿æ¢ï¼ˆJava 8+ï¼‰

// æŸ¥è¯¢æ“ä½œ
boolean contains = list.contains("A");  // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
int index = list.indexOf("A");         // é¦–æ¬¡å‡ºç°ä½ç½®
int size = list.size();                // è·å–é“¾è¡¨ä¸­çš„å…ƒç´ æ•°é‡
boolean isEmpty = list.isEmpty();      // æ£€æŸ¥é“¾è¡¨æ˜¯å¦ä¸ºç©º
```

---

### 2.5 Vectorè¯¦è§£


**ğŸ”¸ Vectoræ ¸å¿ƒç‰¹æ€§**

| ç‰¹æ€§             | Vector è¯´æ˜                          |
|----------------|--------------------------------|
| **åº•å±‚ç»“æ„**       | åŠ¨æ€æ•°ç»„ï¼ˆç±»ä¼¼ `ArrayList`ï¼‰  |
| **çº¿ç¨‹å®‰å…¨æ€§**     | æ‰€æœ‰æ–¹æ³•ä½¿ç”¨ `synchronized` ä¿®é¥° |
| **æ‰©å®¹æ–¹å¼**       | é»˜è®¤ æ‰©å®¹ä¸º ==2 å€== |
| **æŸ¥è¯¢æ€§èƒ½**       | é«˜ï¼ˆéšæœºè®¿é—®å¿«ï¼‰ |
| **æ’å…¥/åˆ é™¤æ€§èƒ½**   | è¾ƒä½ï¼ˆåŒæ­¥å¼€é”€å½±å“æ•ˆç‡ï¼‰ |
| **ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ**  | åŒæ­¥æ•ˆç‡ä½ï¼ˆä½¿ç”¨ç²—ç²’åº¦é”ï¼‰ |

**ğŸ”¸ Vectoræ›¿ä»£æ–¹æ¡ˆ**

| **ç›®æ ‡åœºæ™¯**            | **æ¨èç±»**                          | **ä¼˜åŠ¿ç®€è¦**                          |
|-----------------|----------------------|--------------------------------|
| **å¤šçº¿ç¨‹ï¼Œè¯»å¤šå†™å°‘**      | `CopyOnWriteArrayList` (æ¨è) | **å†™æ—¶å¤åˆ¶ï¼Œè¯»æ“ä½œæ— é”ï¼Œè¯»å–é€Ÿåº¦å¿«**     |
| **å¤šçº¿ç¨‹ï¼Œè¯»å†™éƒ½é¢‘ç¹**    | `Collections.synchronizedList(...)` | **é€šè¿‡åŒ…è£…å®ç°åŒæ­¥**                   |

**ğŸ’¡ æœ€æ¨èï¼šCopyOnWriteArrayList**
```java
// çº¿ç¨‹å®‰å…¨ï¼ˆæ— é¡»åŠ é”çš„è¯»æ“ä½œï¼‰
// å†™æ“ä½œï¼ˆå¦‚ add/removeï¼‰ä¼šå¤åˆ¶åº•å±‚æ•°ç»„å†å†™å…¥
List<String> list = new CopyOnWriteArrayList<>();
list.add("A");
System.out.println(list.get(0));
```

**ğŸ’¡ ç»å…¸æ–¹æ¡ˆï¼šCollections.synchronizedList(...)**
```java
// ä½¿ç”¨ synchronized åŒ…è£…æ™®é€š List å®ç°çº¿ç¨‹å®‰å…¨
// æ¯ä¸ªæ–¹æ³•è°ƒç”¨éƒ½è‡ªåŠ¨åŠ é”ï¼Œé€‚åˆç®€å•åœºæ™¯
List<String> list = Collections.synchronizedList(new ArrayList<>());
list.add("A");
// æ³¨æ„ï¼šéå†æ—¶éœ€æ‰‹åŠ¨åŠ åŒæ­¥é”ï¼
synchronized (list) {
    for (String s : list) {
        System.out.println(s);
    }
}
```

### 2.6 Listå®ç°ç±»ç‰¹æ€§å¯¹æ¯”


| ç‰¹æ€§                 | ArrayList                         | LinkedList                         |
|-------------------------|--------------------------------------|--------------------------------------|
| **æ˜¯å¦å…è®¸é‡å¤å…ƒç´ **     | âœ… å…è®¸                              | âœ… å…è®¸                              |
| **æ˜¯å¦å…è®¸ `null` å…ƒç´ ** | âœ… å…è®¸å¤šä¸ª                          | âœ… å…è®¸å¤šä¸ª                          |
| **å…ƒç´ æ˜¯å¦æœ‰åº**         | âœ… ç»´æŒæ’å…¥é¡ºåº (ç´¢å¼•é¡ºåº)            | âœ… ç»´æŒæ’å…¥é¡ºåº (ç´¢å¼•é¡ºåº)            |
| **åº•å±‚ç»“æ„**             | åŠ¨æ€æ•°ç»„ (`Object[]`)                | åŒå‘é“¾è¡¨ (`Node` å‰åæŒ‡é’ˆ)           |
| **éšæœºè®¿é—®æ•ˆç‡**         | ğŸš€ é«˜ (`O(1)`)                      | ğŸ¢ ä½ (`O(n)`)                      |
| **æ’å…¥/åˆ é™¤ä¸­é—´å…ƒç´ æ•ˆç‡** | ğŸ¢ æ…¢ (æ¶‰åŠæ•°ç»„ç§»åŠ¨)                 | ğŸš€ å¿« (ä»…ä¿®æ”¹é“¾è¡¨æŒ‡é’ˆ)               |

---

## 3. ğŸ¯ Setæ¥å£è¯¦è§£


### 3.1 Setæ¥å£æ¦‚è¿°


**ğŸ”¸ SetåŸºæœ¬å®šä¹‰**

Set æ˜¯ Collection æ¥å£çš„å­æ¥å£ï¼Œè¡¨ç¤º==ä¸å…è®¸é‡å¤å…ƒç´ ==çš„é›†åˆï¼Œå…ƒç´ é¡ºåºä¸ä¿è¯ä¸€è‡´æ€§ï¼ˆé™¤éä½¿ç”¨æœ‰åºå®ç°ç±»ï¼‰ã€‚

| ç‰¹ç‚¹             | è¯´æ˜              |
|----------------|--------------------------------|
| **ä¸å…è®¸é‡å¤å…ƒç´ **   | `Set` é€šè¿‡ `equals()` æ–¹æ³•åˆ¤æ–­å…ƒç´ æ˜¯å¦é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¢«å¿½ç•¥ |
| **æ— åºæ€§**         | å¤§å¤šæ•° `Set` ä¸ä¿è¯å…ƒç´ é¡ºåºï¼Œä½† `LinkedHashSet`ã€`TreeSet` ç»´æŠ¤ç‰¹å®šé¡ºåº |
| **æœ€å¤šä¸€ä¸ª `null`** | `Set` å…è®¸æœ€å¤šä¸€ä¸ª `null` å…ƒç´ ï¼Œä½† `TreeSet` å’Œ `EnumSet` ä¸å…è®¸ `null` |
| **å…ƒç´ å”¯ä¸€æ€§**     | ä¾èµ– `equals()` å’Œ `hashCode()` ä¿è¯å…ƒç´ å”¯ä¸€æ€§ |
| **æ— ç´¢å¼•è®¿é—®**     | ä¸èƒ½ä½¿ç”¨ `get(index)`ï¼Œä½†å¯ä½¿ç”¨ éå† |
| **åŸºæœ¬é›†åˆæ“ä½œ**   | æ”¯æŒ `æ·»åŠ ã€åˆ é™¤ã€åˆ¤æ–­æ˜¯å¦åŒ…å«` ç­‰å¸¸è§„æ“ä½œ |

### 3.2 Setä¸»è¦å®ç°ç±»å¯¹æ¯”


**ğŸ’¡ ä¸»è¦å®ç°ç±»æ€»è§ˆ**
- `HashSet` é€‚ç”¨äº ==æ— åºä½†å»é‡== çš„åœºæ™¯ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜
- `TreeSet` é€‚ç”¨äº ==æ’åºé›†åˆ==ï¼Œéœ€å…ƒç´ å…·æœ‰ å¯æ¯”è¾ƒæ€§
- `LinkedHashSet` é€‚ç”¨äº ==å»é‡ + ç»´æŠ¤æ’å…¥é¡ºåº== çš„åœºæ™¯

**ğŸ”¸ åº•å±‚å®ç°å¯¹æ¯”**

| ç±»å         | åº•å±‚å®ç°            | è¯´æ˜                                                 |
|-------------|-----------------|--------------------------------------------------|
| **HashSet**      | `HashMap`       | åŸºäº å“ˆå¸Œè¡¨ï¼Œä½¿ç”¨ `hashCode()` å’Œ `equals()` åˆ¤æ–­å…ƒç´ å”¯ä¸€æ€§ |
| **LinkedHashSet** | `HashMap + åŒå‘é“¾è¡¨` | ç»´æŠ¤ æ’å…¥é¡ºåºï¼Œé€‚ç”¨äº é¡ºåºæ•æ„Ÿçš„é›†åˆ                 |
| **TreeSet**      | `çº¢é»‘æ ‘ (TreeMap)` | æœ‰åºé›†åˆï¼Œæ”¯æŒ å…ƒç´ æ’åºï¼Œé€‚åˆ éœ€è¦æ’åºçš„åœºæ™¯      |

**ğŸ”¸ å…ƒç´ é¡ºåºç‰¹ç‚¹**

| ç±»å          | é¡ºåºç‰¹ç‚¹            | è¯´æ˜                                               |
|--------------|-----------------|--------------------------------------------------|
| **HashSet**      | æ— åº            | ä¸ä¿è¯å…ƒç´ çš„é¡ºåºï¼Œéå†æ—¶é¡ºåºå¯èƒ½å˜åŒ–                   |
| **LinkedHashSet** | æ’å…¥é¡ºåºæœ‰åº      | ä¿è¯å…ƒç´ æŒ‰ç…§æ’å…¥é¡ºåºéå†ï¼Œé€‚ç”¨äºéœ€è¦ ç¨³å®šéå†é¡ºåº çš„åœºæ™¯ |
| **TreeSet**      | æŒ‰è‡ªç„¶é¡ºåºæ’åº    | æ ¹æ® `compareTo()` æˆ– `Comparator` è¿›è¡Œæ’åºï¼Œé€‚åˆ æœ‰åºé›†åˆ |

**ğŸ”¸ ä½¿ç”¨åœºæ™¯å¯¹æ¯”**

| ç±»å          | é€‚ç”¨åœºæ™¯              | è¯´æ˜                                 |
|--------------|------------------|----------------------------------|
| **HashSet**      | å¿«é€Ÿå»é‡ã€æŸ¥æ‰¾ã€åˆ é™¤ | åœ¨å…ƒç´ é¡ºåºæ— å…³çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ |
| **LinkedHashSet** | å»é‡ + ä¿ç•™æ’å…¥é¡ºåº  | å½“ä½ éœ€è¦ä¿ç•™æ’å…¥é¡ºåºï¼Œä¸”å…ƒç´ ä¸é‡å¤æ—¶ï¼Œä½¿ç”¨æ­¤ç±» |
| **TreeSet**      | è‡ªåŠ¨æ’åºã€æ’åºå»é‡   | å½“éœ€è¦æŒ‰é¡ºåºè®¿é—®å…ƒç´ ï¼Œæˆ–è€…éœ€è¦è‡ªå®šä¹‰æ’åºè§„åˆ™æ—¶ä½¿ç”¨ |

---

### 3.3 HashSetè¯¦è§£


**ğŸ”¸ HashSetæ ¸å¿ƒç‰¹ç‚¹**

HashSetæ˜¯Setæ¥å£å®ç°ç±»ï¼Œåº•å±‚åŸºäºå“ˆå¸Œè¡¨ï¼ˆHashMap å®ç°ï¼‰ï¼ŒHashSet ä¸­çš„å…ƒç´ æ˜¯==æ— åºçš„==ï¼Œå¹¶ä¸”==ä¸å¯é‡å¤==ã€‚

| **ç‰¹æ€§**             | **è¯´æ˜**                |
|----------------|--------------------------------|
| **å”¯ä¸€æ€§**        | æ¯ä¸ªå…ƒç´ åªèƒ½å‡ºç°ä¸€æ¬¡ï¼ŒåŸºäº `hashCode()` å’Œ `equals()` è¿›è¡Œåˆ¤æ–­ |
| **æ— åºæ€§**       | ä¸ä¿è¯å…ƒç´ é¡ºåºï¼Œéå†æ—¶å¯èƒ½éšæ—¶é—´å˜åŒ– |
| **å…è®¸ `null`**    | å…è®¸å­˜å‚¨æœ€å¤šä¸€ä¸ª `null` å…ƒç´  |
| **ä¸å…è®¸é‡å¤å…ƒç´ **   | ä¸å…è®¸å­˜å‚¨é‡å¤å…ƒç´ ï¼Œæ·»åŠ é‡å¤é¡¹ä¼šè¢«å¿½ç•¥ |
| **éåŒæ­¥æ€§**     | çº¿ç¨‹ä¸å®‰å…¨ï¼Œéœ€è¦é¢å¤–åŒæ­¥ç®¡ç† |
| **æ€§èƒ½ç‰¹ç‚¹**      | å¸¸æ•°æ—¶é—´å¤æ‚åº¦ (`O(1)`) çš„åŸºæœ¬æ“ä½œï¼šæ·»åŠ ã€åˆ é™¤ã€åŒ…å«æ£€æŸ¥ |

**ğŸ”¸ åº•å±‚å®ç°æœºåˆ¶**

| **ç‰¹æ€§**                  | **è¯´æ˜**                                      |
|----------------------|--------------------------------|
| **åº•å±‚ç»“æ„**           | åŸºäº `HashMap` |
| **å­˜å‚¨æ–¹å¼**          | `HashSet` å…ƒç´ ä½œä¸º`HashMap` çš„ keyï¼Œæ‰€æœ‰ value è®¾ä¸ºåŒä¸€ä¸ª è™šæ‹Ÿå¯¹è±¡ (`PRESENT`) |
| **å…ƒç´ ä½ç½®å†³å®šæ–¹å¼**    | é€šè¿‡ `hashCode()` è®¡ç®—å“ˆå¸Œå€¼ï¼Œç¡®å®šå­˜å‚¨ä½ç½® |
| **å“ˆå¸Œå†²çªå¤„ç†**     | é‡‡ç”¨é“¾è¡¨æˆ–çº¢é»‘æ ‘è§£å†³å“ˆå¸Œå†²çª |
| **å…ƒç´ å”¯ä¸€æ€§åˆ¤æ–­**  | `hashCode()` è®¡ç®—å“ˆå¸Œå€¼ + `equals()` åˆ¤æ–­æ˜¯å¦ç›¸åŒ |
| **å»é‡åŸç†**      | ä¾èµ– `HashMap`é”®çš„å”¯ä¸€æ€§ç¡®ä¿ `Set` ä¸å­˜å‚¨é‡å¤å…ƒç´  |

**ğŸ”¸ æ‰©å®¹æœºåˆ¶**

| **æ­¥éª¤**         | **æ‰©å®¹è¿‡ç¨‹**                                             |
|--------------|--------------------------------------------------|
| **è§¦å‘æ¡ä»¶**   | å½“ `å…ƒç´ æ•°é‡ > å®¹é‡ Ã— è´Ÿè½½å› å­` æ—¶ï¼Œè§¦å‘æ‰©å®¹ |
| **é»˜è®¤å€¼**    | åˆå§‹å®¹é‡ `16`ï¼Œè´Ÿè½½å› å­ `0.75`ï¼Œæ»¡ `12` ä¸ªå…ƒç´ åæ‰©å®¹ |
| **æ‰©å®¹æ–¹å¼**  | åˆ›å»ºæ–°æ•°ç»„ï¼Œå¤§å°ä¸ºåŸå®¹é‡çš„ 2 å€ (å¦‚ `16 â†’ 32`) |
| **é‡æ–°è®¡ç®—å“ˆå¸Œ** | é‡æ–°è®¡ç®—æ‰€æœ‰å·²æœ‰å…ƒç´ çš„ `hashCode()` å¹¶è°ƒæ•´å­˜å‚¨ä½ç½® |
| **é‡æ–°åˆ†é…æ¡¶**  | å°†æ‰€æœ‰å…ƒç´ é‡æ–°æ˜ å°„åˆ°æ–°æ•°ç»„çš„æ¡¶ |
| **æ›¿æ¢æ—§æ•°ç»„**  | ç”¨æ–°æ•°ç»„æ›¿æ¢æ—§æ•°ç»„ï¼Œå®Œæˆæ‰©å®¹ |

> **æ³¨æ„äº‹é¡¹**: è´Ÿè½½å› å­å€¼è¶Šå°ï¼Œå“ˆå¸Œå†²çªè¶Šå°‘ä½†å†…å­˜ä½¿ç”¨è¶Šå¤§ï¼Œå€¼è¶Šå¤§ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ä½†å“ˆå¸Œå†²çªå¯èƒ½å¢åŠ 

**ğŸ”¸ å†²çªå¤„ç†æœºåˆ¶**

```
HashSetå¤„ç†å†²çªçš„ä¸¤æ­¥æœºåˆ¶

ç¬¬ä¸€æ­¥ï¼šhashCode()è®¡ç®—æ¡¶ä½ç½®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å½“ä½ å‘HashSetæ·»åŠ å…ƒç´ æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆè®¡ç®—å…ƒç´ çš„       â”‚
â”‚ hashCodeå€¼ï¼Œå¹¶åŸºäºè¿™ä¸ªå€¼ç¡®å®šå…ƒç´ åº”è¯¥å­˜å‚¨åœ¨å“ªä¸ªæ¡¶ä¸­ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// ç®€åŒ–çš„å“ˆå¸Œè®¡ç®—è¿‡ç¨‹
int hash = element.hashCode();
int bucketIndex = hash & (bucketArray.length - 1); // è®¡ç®—å­˜å‚¨æ¡¶ç´¢å¼•

ç¬¬äºŒæ­¥ï¼šequals()è§£å†³å†²çª
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¦‚æœè®¡ç®—å‡ºçš„æ¡¶ä½ç½®å·²ç»æœ‰å…ƒç´ äº†ï¼ˆå³å‘ç”Ÿå“ˆå¸Œå†²çªï¼‰ï¼Œ â”‚
â”‚ ç³»ç»Ÿä¼šè°ƒç”¨equals()æ–¹æ³•é€ä¸€æ¯”è¾ƒå·²å­˜åœ¨çš„å…ƒç´        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ å¦‚æœequals()è¿”å›trueï¼Œè¡¨ç¤ºå…ƒç´ å·²å­˜åœ¨ï¼Œæ·»åŠ æ“ä½œå¤±è´¥
â€¢ å¦‚æœequals()è¿”å›falseï¼Œè¡¨ç¤ºæ˜¯ä¸åŒå…ƒç´ ä½†å“ˆå¸Œå†²çªï¼Œ
  å°†æ–°å…ƒç´ æ·»åŠ åˆ°åŒä¸€æ¡¶çš„é“¾è¡¨æˆ–çº¢é»‘æ ‘ä¸­

HashMapå†…éƒ¨ç»“æ„æ¼”å˜

Java 7 åŠæ›´æ—©ç‰ˆæœ¬ (æ•°ç»„ + é“¾è¡¨ç»“æ„)ï¼š
[æ¡¶0] -> å…ƒç´ A -> å…ƒç´ B -> å…ƒç´ C -> ...  // é“¾è¡¨å¯èƒ½æ— é™å»¶é•¿
[æ¡¶1] -> å…ƒç´ D
[æ¡¶2] -> null
[æ¡¶3] -> å…ƒç´ E -> å…ƒç´ F -> ...

Java 8+ (é“¾è¡¨ + çº¢é»‘æ ‘)ï¼š
[æ¡¶0] -> å…ƒç´ A -> å…ƒç´ B -> å…ƒç´ C  // é“¾è¡¨å½¢å¼å­˜å‚¨å†²çªå…ƒç´ 
[æ¡¶1] -> å…ƒç´ D
[æ¡¶2] -> null
[æ¡¶3] -> å…ƒç´ E -> å…ƒç´ F -> ...   // å½“é“¾è¡¨é•¿åº¦â‰¥8æ—¶è½¬ä¸ºçº¢é»‘æ ‘
```

**âš¡ HashSetå¸¸ç”¨æ–¹æ³•**
```java
// åˆ›å»ºHashSet
HashSet<String> set = new HashSet<>();
HashSet<String> set2 = new HashSet<>(20); // æŒ‡å®šåˆå§‹å®¹é‡
HashSet<String> set3 = new HashSet<>(16, 0.75f); // æŒ‡å®šåˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­
HashSet<String> set4 = new HashSet<>(Arrays.asList("Apple", "Banana", "Cherry"));

// æ·»åŠ å…ƒç´ 
boolean added = set.add("Apple"); // è¿”å›æ˜¯å¦æˆåŠŸæ·»åŠ ï¼ˆå…ƒç´ ä¸å­˜åœ¨è¿”å›trueï¼‰
set.addAll(Arrays.asList("Banana", "Cherry", "Date")); // æ·»åŠ å¤šä¸ªå…ƒç´ 

// åˆ é™¤å…ƒç´ 
boolean removed = set.remove("Apple"); // è¿”å›æ˜¯å¦æˆåŠŸåˆ é™¤ï¼ˆå…ƒç´ å­˜åœ¨è¿”å›trueï¼‰
set.removeAll(Arrays.asList("Banana", "Cherry")); // åˆ é™¤å¤šä¸ªå…ƒç´ 
set.removeIf(e -> e.startsWith("A")); // åˆ é™¤æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼ˆJava 8+ï¼‰
set.clear(); // æ¸…ç©º HashSet

// æŸ¥è¯¢æ“ä½œ
boolean exists = set.contains("Apple");
boolean containsAll = set.containsAll(Arrays.asList("Apple", "Banana"));
int size = set.size(); // è·å–å…ƒç´ æ•°é‡
boolean isEmpty = set.isEmpty(); // æ£€æŸ¥æ˜¯å¦ä¸ºç©º

// é›†åˆæ“ä½œ
HashSet<String> set1 = new HashSet<>(Arrays.asList("A", "B", "C"));
HashSet<String> set2 = new HashSet<>(Arrays.asList("B", "C", "D"));
// å¹¶é›†ï¼ˆä¿®æ”¹ set1ï¼‰
set1.addAll(set2); // ç»“æœ: [A, B, C, D]
// äº¤é›†ï¼ˆä¿®æ”¹ set1ï¼‰
set1.retainAll(set2); // ç»“æœ: [B, C]
// å·®é›†ï¼ˆä¿®æ”¹ set1ï¼‰
set1.removeAll(set2); // ç»“æœ: [A]
```

---

### 3.4 LinkedHashSetè¯¦è§£


**ğŸ”¸ LinkedHashSetæ ¸å¿ƒç‰¹ç‚¹**

LinkedHashSet æ˜¯ HashSet çš„å­ç±»ï¼Œä¸HashSetæœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šLinkedHashSet ==ä¿è¯å…ƒç´ çš„æ’å…¥é¡ºåº==ã€‚

| ç‰¹æ€§              | è¯´æ˜                             |
|-----------------|--------------------------------|
| **å»é‡æœºåˆ¶**        | ä¸å…è®¸é‡å¤å…ƒç´ ï¼Œä¾èµ– `hashCode()` + `equals()` åˆ¤æ–­ |
| **æ’å…¥é¡ºåº**       | ä¿æŒæ’å…¥é¡ºåºï¼Œéå†æ—¶é¡ºåºä¸å˜ |
| **å…è®¸ `null`**     | å¯å­˜å‚¨ ä¸€ä¸ª `null` å…ƒç´  |
| **åº•å±‚ç»“æ„**       | å“ˆå¸Œè¡¨ + åŒå‘é“¾è¡¨ |
| **çº¿ç¨‹å®‰å…¨æ€§**     | éåŒæ­¥ï¼ˆä¸é€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒï¼‰ |
| **æ€§èƒ½å¯¹æ¯”**       | æ’å…¥/åˆ é™¤é€Ÿåº¦ç•¥ä½äº `HashSet`ï¼Œä½† è¿­ä»£æ›´å¿« |

**ğŸ”¸ åº•å±‚å®ç°æœºåˆ¶**

| ç‰¹æ€§             | LinkedHashSet è¯´æ˜                            |
|----------------|--------------------------------|
| **ç»§æ‰¿å…³ç³»**       | ç»§æ‰¿è‡ª `HashSet` |
| **åº•å±‚ç»“æ„**       | åŸºäº `LinkedHashMap` |
| **å­˜å‚¨æ–¹å¼**       | å…ƒç´ ä½œä¸º `LinkedHashMap` çš„ keyï¼Œvalue ä¸º å›ºå®šå¯¹è±¡ (`PRESENT`) |
| **é¡ºåºç»´æŠ¤æ–¹å¼**   | ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤æ’å…¥é¡ºåº |
| **æ“ä½œæ•ˆç‡**       | å“ˆå¸Œè¡¨æä¾› `O(1)` çº§åˆ«çš„æŸ¥æ‰¾æ€§èƒ½ |
| **éå†é¡ºåº**       | æŒ‰ç…§å…ƒç´ æ’å…¥çš„é¡ºåºéå† |

**ğŸ”¸ å†…éƒ¨ç»“æ„å›¾ç¤º**
```
LinkedHashSetå†…éƒ¨ç»“æ„

LinkedHashSet
â”‚
â””â”€â”€ LinkedHashMap<String, Object> map
       â”œâ”€â”€ Hashè¡¨ç»“æ„ï¼ˆæ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘ï¼‰
       â”‚
       â”œâ”€â”€ æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª Entry èŠ‚ç‚¹ï¼š
       â”‚     key: A
       â”‚     value: PRESENT
       â”‚     before: null
       â”‚     after: B
       â”‚
       â”‚     key: B
       â”‚     value: PRESENT
       â”‚     before: A
       â”‚     after: C
       â”‚
       â”‚     key: C
       â”‚     value: PRESENT
       â”‚     before: B
       â”‚     after: null
       â”‚
       â””â”€â”€ åŒå‘é“¾è¡¨ï¼šç”¨äºæŒ‰æ’å…¥é¡ºåºç»´æŠ¤å…ƒç´ 

             head â†’ A â‡„ B â‡„ C â† tail

èŠ‚ç‚¹ç»“æ„è¯´æ˜ï¼ˆç®€åŒ–ï¼‰ï¼š
â€¢ before / afterï¼šå½¢æˆä¸€ä¸ªåŒå‘é“¾è¡¨
â€¢ è¿™ä¸ªé“¾è¡¨ç”¨äº entrySet().iterator() ä¿è¯æ’å…¥é¡ºåº

class LinkedHashMap.Entry<K, V> extends HashMap.Node<K, V> {
    Entry<K, V> before;
    Entry<K, V> after;
}
```

**âš¡ LinkedHashSetå¸¸ç”¨æ–¹æ³•**
```java
// åˆ›å»ºä¸åˆå§‹åŒ–
LinkedHashSet<String> set = new LinkedHashSet<>(); // åˆ›å»ºç©ºé›†åˆ
LinkedHashSet<String> set2 = new LinkedHashSet<>(20); // æŒ‡å®šåˆå§‹å®¹é‡
LinkedHashSet<String> set4 = new LinkedHashSet<>(Arrays.asList("A", "B", "C"));

// æ·»åŠ å…ƒç´ 
set.add("Apple"); // æ·»åŠ å•ä¸ªå…ƒç´ 
set.addAll(Arrays.asList("Banana", "Cherry", "Date")); // æ·»åŠ å¤šä¸ªå…ƒç´ 

// åˆ é™¤å…ƒç´ 
set.remove("Apple");// åˆ é™¤æŒ‡å®šå…ƒç´ 
set.removeIf(e -> e.startsWith("A")); // åˆ é™¤æ»¡è¶³æ¡ä»¶çš„å…ƒç´ (Java 8+)
set.clear(); // æ¸…ç©ºé›†åˆ

// æŸ¥è¯¢æ“ä½œ
boolean contains = set.contains("Apple"); // æ£€æŸ¥æ˜¯å¦åŒ…å«å…ƒç´ 
int size = set.size(); // è·å–å¤§å°
boolean isEmpty = set.isEmpty();  // æ£€æŸ¥æ˜¯å¦ä¸ºç©º

// è½¬æ¢æ“ä½œ
Object[] array = set.toArray(); // è½¬æ¢ä¸ºæ•°ç»„
List<String> list = new ArrayList<>(set); // è½¬æ¢ä¸ºList(ä¿æŒé¡ºåº)
```

---

### 3.5 TreeSetè¯¦è§£


**ğŸ”¸ TreeSetæ ¸å¿ƒç‰¹ç‚¹**

TreeSet æ˜¯ä¸€ä¸ª ==åŸºäºçº¢é»‘æ ‘== å®ç°çš„ã€å¯æ’åºçš„å”¯ä¸€æ€§é›†åˆï¼Œæ˜¯ NavigableSet çš„å®ç°ç±»ï¼Œåº•å±‚ä½¿ç”¨ TreeMap æ¥å­˜å‚¨æ•°æ®ï¼Œå¹¶é€šè¿‡ Comparable æˆ– Comparator å®ç°å…ƒç´ æ’åºã€‚

```
TreeSet ç±»ç»“æ„å›¾ï¼ˆJava ç±»æ¥å£å…³ç³»ï¼‰

Collection<E>ï¼ˆæ¥å£ï¼‰
â””â”€â”€ Set<E>ï¼ˆæ¥å£ï¼‰
    â””â”€â”€ SortedSet<E>ï¼ˆæ¥å£ï¼‰                  // æä¾›æ’åºåŠŸèƒ½ï¼ˆfirst, last, subSet ç­‰ï¼‰
        â””â”€â”€ NavigableSet<E>ï¼ˆæ¥å£ï¼‰           // å¢å¼ºç‰ˆï¼šæä¾›å¯¼èˆªæ–¹æ³•ï¼ˆceiling, floor, lower, higherï¼‰
            â””â”€â”€ TreeSet<E>ï¼ˆç±»ï¼‰
                 â”œâ”€â”€ åº•å±‚ç»“æ„ï¼šçº¢é»‘æ ‘ï¼ˆTreeMap å®ç°ï¼‰
                 â”œâ”€â”€ å…ƒç´ è‡ªåŠ¨æ’åºï¼ˆè‡ªç„¶é¡ºåºæˆ– Comparatorï¼‰
                 â”œâ”€â”€ æ’å…¥/åˆ é™¤/æŸ¥æ‰¾ï¼šO(log n)
                 â”œâ”€â”€ ä¸å…è®¸ null å…ƒç´ 
                 â””â”€â”€ æ”¯æŒèŒƒå›´è§†å›¾ä¸å¯¼èˆªæŸ¥è¯¢

TreeSet çš„æœ¬è´¨å®ç°å…³ç³»
TreeSet<E>ï¼ˆç±»ï¼‰
â”œâ”€â”€ implements NavigableSet<E>
â”‚    â””â”€â”€ extends SortedSet<E>
â”‚         â””â”€â”€ extends Set<E>
â”‚              â””â”€â”€ extends Collection<E>
â”‚
â”œâ”€â”€ åº•å±‚åŸºäº TreeMap<E, Object>
â”‚
â””â”€â”€ æ”¯æŒ Comparator<E>ï¼ˆå¯é€‰ï¼‰
     â”œâ”€â”€ è‹¥æœªæä¾›ï¼Œåˆ™è¦æ±‚å…ƒç´ å®ç° Comparable<E>
     â””â”€â”€ å…ƒç´ å¿…é¡»æ”¯æŒæœ‰æ•ˆæ¯”è¾ƒï¼Œå¦åˆ™æŠ›å‡º ClassCastException
```

| ç‰¹æ€§             | TreeSet è¯´æ˜                                      |
|----------------|--------------------------------|
| **æ¥å£å®ç°**      | `SortedSet` æ¥å£ + `NavigableSet` æ¥å£ |
| **åº•å±‚ç»“æ„**      | åŸºäºçº¢é»‘æ ‘ (`TreeMap`) |
| **å…ƒç´ æœ‰åºæ€§**    | é»˜è®¤æŒ‰è‡ªç„¶é¡ºåºæ’åºï¼Œå¯é€šè¿‡ `Comparator` è‡ªå®šä¹‰æ’åº |
| **å”¯ä¸€æ€§**       | ä¸å…è®¸å­˜å‚¨é‡å¤å…ƒç´  |
| **`null` å¤„ç†**  | ä¸å…è®¸å­˜å‚¨ `null`ï¼Œæ’å…¥ `null` ä¼šæŠ› `NullPointerException` |
| **çº¿ç¨‹å®‰å…¨æ€§**    | éåŒæ­¥ï¼ˆéœ€é¢å¤–åŒæ­¥ç®¡ç†ï¼‰ |

**ğŸ”¸ åº•å±‚å®ç°æœºåˆ¶**

| åº•å±‚ç»“æ„          | è¯´æ˜                                      |
|-----------------|--------------------------------|
| **æ•°æ®ç»“æ„**     | çº¢é»‘æ ‘ (`Red-Black Tree`)ï¼Œå±äº è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ (`BST`) |
| **æ“ä½œå¤æ‚åº¦**   | æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º `O(log n)` |
| **æ’åºæ–¹å¼**     | é»˜è®¤æŒ‰ `Comparable` è‡ªç„¶é¡ºåºæ’åºï¼Œå¯ä½¿ç”¨ `Comparator` è‡ªå®šä¹‰æ’åº |
| **å¹³è¡¡æ€§ç»´æŠ¤**   | é‡‡ç”¨ çº¢é»‘æ ‘çš„è‡ªå¹³è¡¡æœºåˆ¶ï¼Œä¿è¯é«˜æ•ˆæ“ä½œ |

**ğŸ”¸ å…ƒç´ æ’åºæœºåˆ¶**

- é»˜è®¤ ==å‡åºæ’åº==ï¼ˆå…ƒç´ å¿…é¡»å®ç° Comparableï¼‰
- è‡ªå®šä¹‰æ’åºï¼šä½¿ç”¨æ„é€ æ–¹æ³•ä¼ å…¥ Comparator

> äºŒè€…ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä¼˜å…ˆçº§ï¼š==æ„é€ å™¨çš„ Comparator é«˜äºå…ƒç´ çš„ Comparable==

| æ’åºæ–¹å¼     | ä½¿ç”¨æ¡ä»¶                                           |
|-------------|------------------------------------------------|
| **è‡ªç„¶æ’åº**     | å…ƒç´ å¿…é¡»å®ç° `Comparable<T>` æ¥å£                     |
| **è‡ªå®šä¹‰æ’åºå™¨** | åœ¨æ„é€  `TreeSet` æ—¶ä¼ å…¥ `Comparator<T>` å¯¹è±¡           |

```java
TreeSet<Integer> set = new TreeSet<>(); // é»˜è®¤å‡åº
TreeSet<String> set2 = new TreeSet<>(Comparator.reverseOrder()); // è‡ªå®šä¹‰é™åº
```

**ğŸ”¸ å¸¸ç”¨æ„é€ æ–¹æ³•**

| æ„é€ æ–¹æ³•                               | è¯´æ˜                  |
|---------------------------------|--------------------------------|
| `TreeSet()`                    | åˆ›å»º ç©ºçš„ `TreeSet`ï¼Œå…ƒç´ æŒ‰ è‡ªç„¶é¡ºåº æ’åº |
| `TreeSet(Collection<? extends E> c)` | ç”¨æŒ‡å®šé›†åˆå…ƒç´ åˆå§‹åŒ– `TreeSet`ï¼Œå…ƒç´ æŒ‰ è‡ªç„¶é¡ºåº æ’åº |
| `TreeSet(Comparator<? super E> comparator)` | åˆ›å»º ç©ºçš„ `TreeSet`ï¼Œå…ƒç´ æŒ‰ æŒ‡å®šçš„æ¯”è¾ƒå™¨ æ’åº |
| `TreeSet(SortedSet<E> s)`       | ç”¨æŒ‡å®š `SortedSet` åˆå§‹åŒ– `TreeSet`ï¼Œä¿æŒåŸæ’åºè§„åˆ™ |

**âš¡ TreeSetå¸¸ç”¨æ–¹æ³•**
```java
// åˆ›å»ºTreeSetï¼ˆè‡ªç„¶é¡ºåºï¼‰
TreeSet<Integer> numbers = new TreeSet<>();

// æ·»åŠ å…ƒç´ ï¼ˆè‡ªåŠ¨æ’åºï¼Œä¸èƒ½é‡å¤ï¼‰
numbers.add(5);
numbers.add(2);
numbers.add(8);
numbers.add(1);
numbers.add(10);

// è·å–é›†åˆå¤§å°
int size = numbers.size();  

// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
boolean contains3 = numbers.contains(3); // false
boolean contains5 = numbers.contains(5); // true

// è·å–ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ 
int first = numbers.first(); // 1
int last = numbers.last();   // 10

// è·å–å°äºæˆ–å¤§äºç»™å®šå…ƒç´ çš„å…ƒç´ 
Integer lower = numbers.lower(5);    // 2 (ä¸¥æ ¼å°äº5çš„æœ€å¤§å…ƒç´ )
Integer floor = numbers.floor(5);    // 5 (å°äºæˆ–ç­‰äº5çš„æœ€å¤§å…ƒç´ )
Integer ceiling = numbers.ceiling(6); // 8 (å¤§äºæˆ–ç­‰äº6çš„æœ€å°å…ƒç´ )
Integer higher = numbers.higher(5);   // 8 (ä¸¥æ ¼å¤§äº5çš„æœ€å°å…ƒç´ )

// åˆ é™¤å¹¶è¿”å›å…ƒç´ 
Integer pollFirst = numbers.pollFirst(); // ç§»é™¤å¹¶è¿”å›1
Integer pollLast = numbers.pollLast();   // ç§»é™¤å¹¶è¿”å›10
numbers.remove(2);   //  åˆ é™¤å…ƒç´ 2

// è·å–å­é›†
SortedSet<Integer> subSet = numbers.subSet(3, 8);     // åŒ…å«[3,8)èŒƒå›´å†…çš„å…ƒç´ 
NavigableSet<Integer> navSubSet = numbers.subSet(3, true, 8, true); // åŒ…å«[3,8]èŒƒå›´å†…çš„å…ƒç´ 

// å¤´å°¾é›†åˆ
SortedSet<Integer> headSet = numbers.headSet(5);      // åŒ…å«å°äº5çš„æ‰€æœ‰å…ƒç´ 
NavigableSet<Integer> navHeadSet = numbers.headSet(5, true); // åŒ…å«å°äºç­‰äº5çš„æ‰€æœ‰å…ƒç´ 

SortedSet<Integer> tailSet = numbers.tailSet(5);      // åŒ…å«å¤§äºç­‰äº5çš„æ‰€æœ‰å…ƒç´ 
NavigableSet<Integer> navTailSet = numbers.tailSet(5, false); // åŒ…å«ä¸¥æ ¼å¤§äº5çš„æ‰€æœ‰å…ƒç´ 

// é€†åºé›†åˆ
NavigableSet<Integer> descendingSet = numbers.descendingSet(); // è¿”å›é€†åºæ’åˆ—çš„é›†åˆè§†å›¾
```

---

### 3.6 Setçº¿ç¨‹å®‰å…¨å®ç°


**ğŸ”¸ çº¿ç¨‹å®‰å…¨Seté€‰æ‹©æŒ‡å—**

```
Javaçº¿ç¨‹å®‰å…¨Setå®ç°
â”œâ”€â”€ Collections.synchronizedSet()
â”‚    â”œâ”€â”€ æœ€å¸¸ç”¨çš„çº¿ç¨‹å®‰å…¨SetåŒ…è£…æ–¹æ³•
â”‚    â”œâ”€â”€ ä½¿ç”¨synchronizedå…³é”®å­—å®ç°åŒæ­¥
â”‚    â””â”€â”€ æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŒæ­¥çš„ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆ
â”‚
â”œâ”€â”€ ConcurrentHashMap.newKeySet()
â”‚    â”œâ”€â”€ åŸºäºConcurrentHashMapå®ç°ï¼ŒJava 8å¼•å…¥
â”‚    â”œâ”€â”€ æ€§èƒ½ä¼˜äºsynchronizedSet
â”‚    â”œâ”€â”€ æ”¯æŒé«˜å¹¶å‘è¯»å–å’Œæ›´æ–°
â”‚    â””â”€â”€ ä¸ä¿è¯å…ƒç´ æœ‰åº
â”‚
â”œâ”€â”€ CopyOnWriteArraySet
â”‚    â”œâ”€â”€ é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯
â”‚    â”œâ”€â”€ å†™æ“ä½œåˆ›å»ºåº•å±‚æ•°ç»„çš„æ–°å‰¯æœ¬
â”‚    â”œâ”€â”€ è¯»æ“ä½œä¸éœ€è¦åŠ é”ï¼Œæ€§èƒ½å¥½
â”‚    â””â”€â”€ å†™æ“ä½œå¼€é”€å¤§ï¼Œä¸é€‚åˆé¢‘ç¹ä¿®æ”¹
â”‚
â””â”€â”€ å…¶ä»–è¾ƒå°‘ä½¿ç”¨çš„é€‰æ‹©
     â”œâ”€â”€ ConcurrentSkipListSet ï¼ˆæœ‰åºé›†åˆï¼‰
     â””â”€â”€ ä½¿ç”¨è‡ªå®šä¹‰åŒæ­¥æœºåˆ¶çš„Setå®ç°
```

| çº¿ç¨‹å®‰å…¨ `Set` é€‰æ‹©æŒ‡å— | é€‚ç”¨åœºæ™¯                     | ç‰¹ç‚¹                |
|------------------|----------------|-------------------------------|
| `Collections.synchronizedSet(Set<T>)` | ç®€å•åŒæ­¥ï¼Œé€šç”¨åœºæ™¯ | åŒ…è£…æ™®é€š `Set`ï¼Œæ‰€æœ‰æ–¹æ³•åŠ åŒæ­¥ |
| `CopyOnWriteArraySet` | è¯»å¤šå†™å°‘                | å†™æ—¶å¤åˆ¶ï¼Œè¯»æ“ä½œæ— é”ï¼Œé€‚åˆé«˜å¹¶å‘ |
| `ConcurrentHashMap.newKeySet()` | æ— åºï¼Œé«˜å¹¶å‘            | åŸºäº `ConcurrentHashMap`ï¼Œé”®é›†åˆ |
| `ConcurrentSkipListSet` | æœ‰åºï¼Œé«˜å¹¶å‘            | åŸºäºè·³è¡¨ (`SkipList`)ï¼Œæ”¯æŒæ’åº |

**ğŸ’¡ CopyOnWriteArraySetï¼ˆâ­æ¨èï¼Œç°ä»£å¼€å‘å¸¸ç”¨ï¼‰**
- ç‰¹ç‚¹ï¼šå†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼‰ï¼Œé€‚åˆ ==è¯»å¤šå†™å°‘== çš„å¹¶å‘åœºæ™¯
- åº•å±‚å®ç°ï¼šåŸºäº CopyOnWriteArrayList
- çº¿ç¨‹å®‰å…¨ï¼šâœ…
- é€‚åˆåœºæ™¯ï¼šç¼“å­˜ã€ç›‘å¬å™¨é›†åˆã€è®¢é˜…åˆ—è¡¨ã€å¹¶å‘åªè¯»åœºæ™¯

**ğŸ’¡ Collections.synchronizedSet(Set<T>)ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**
- ç‰¹ç‚¹ï¼šé€šè¿‡åŒ…è£…æ™®é€š Set å®ç°çº¿ç¨‹å®‰å…¨
- åº•å±‚å®ç°ï¼šæ–¹æ³•åŠ  synchronizedï¼ŒåŒæ­¥ç²’åº¦è¾ƒç²—
- çº¿ç¨‹å®‰å…¨ï¼šâœ…
- éå†æ—¶éœ€é¢å¤–åŠ é”
- é€‚åˆåœºæ™¯ï¼šè½»é‡çº¿ç¨‹å®‰å…¨éœ€æ±‚ã€ä½å¹¶å‘è¯»å†™

### 3.7 Setå®ç°ç±»ç‰¹æ€§æ€»å¯¹æ¯”


| ç‰¹æ€§ / å®ç°ç±»          | HashSet     | LinkedHashSet | TreeSet        | CopyOnWriteArraySet |
|---------------------------|----------------|------------------|------------------|----------------------|
| **æ˜¯å¦å…è®¸é‡å¤å…ƒç´ **       | âŒ ä¸å…è®¸      | âŒ ä¸å…è®¸         | âŒ ä¸å…è®¸         | âŒ ä¸å…è®¸             |
| **æ˜¯å¦å…è®¸ `null` å…ƒç´ **  | âœ… å…è®¸ 1 ä¸ª   | âœ… å…è®¸ 1 ä¸ª      | âŒ ä¸å…è®¸         | âœ… å…è®¸ 1 ä¸ª           |
| **å…ƒç´ æ˜¯å¦æœ‰åº**          | âŒ æ— åº        | âœ… æ’å…¥é¡ºåº      | âœ… è‡ªåŠ¨æ’åº       | âœ… æ’å…¥é¡ºåº           |
| **åº•å±‚ç»“æ„**              | `HashMap`       | `HashMap` + é“¾è¡¨  | `TreeMap` (çº¢é»‘æ ‘) | æ•°ç»„ (å†™æ—¶å¤åˆ¶)        |
| **çº¿ç¨‹å®‰å…¨æ€§**            | âŒ å¦         | âŒ å¦           | âŒ å¦           | âœ… æ˜¯                 |

---

## 4. ğŸš€ Queueæ¥å£è¯¦è§£


### 4.1 Queueæ¥å£æ¦‚è¿°


**ğŸ”¸ QueueåŸºæœ¬å®šä¹‰**

Queue æ˜¯ Java é›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿è‡ª Collectionï¼Œè¡¨ç¤ºä¸€ä¸ª ==å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰== çš„æ•°æ®ç»“æ„ï¼ˆQueue = é˜Ÿåˆ—ï¼‰ã€‚

**ğŸ”¸ Queueæ¥å£ä½“ç³»ç»“æ„**

```
Queue<E>ï¼ˆæ¥å£ï¼‰
â”œâ”€â”€ Deque<E>ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰
â”‚   â”œâ”€â”€ LinkedList<E>ï¼ˆList + Deque + Queueï¼Œå¤šé¢æ‰‹ï¼‰
â”‚   â””â”€â”€ ArrayDeque<E>ï¼ˆæ•°ç»„å®ç°ï¼Œæ•ˆç‡é«˜ï¼Œæ ˆ/é˜Ÿåˆ—é€šç”¨ï¼‰
â”‚
â”œâ”€â”€ PriorityQueue<E>ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼Œè‡ªåŠ¨æ’åºï¼Œæœ€å°å †ï¼‰
â”‚
â””â”€â”€ BlockingQueue<E>ï¼ˆæ¥å£ï¼Œç”¨äºå¹¶å‘é˜Ÿåˆ—ï¼‰
    â”œâ”€â”€ ArrayBlockingQueue
    â”œâ”€â”€ LinkedBlockingQueue
    â”œâ”€â”€ DelayQueue
    â”œâ”€â”€ PriorityBlockingQueue
    â””â”€â”€ SynchronousQueue
```

**ğŸ”¸ Queueå¸¸ç”¨æ–¹æ³•ï¼ˆæ¥å£å®šä¹‰ï¼‰**

| æ–¹æ³•         | è¯´æ˜                             |
|--------------|--------------------------------|
| `add(E e)`      | æ·»åŠ å…ƒç´ ï¼Œå¤±è´¥æ—¶æŠ›å¼‚å¸¸              |
| `offer(E e)`    | æ·»åŠ å…ƒç´ ï¼Œå¤±è´¥æ—¶è¿”å› `false`ï¼ˆ==æ¨è==ï¼‰ |
| `remove()`      | ç§»é™¤å¤´éƒ¨å…ƒç´ ï¼Œé˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å¼‚å¸¸      |
| `poll()`       | ç§»é™¤å¤´éƒ¨å…ƒç´ ï¼Œé˜Ÿåˆ—ä¸ºç©ºæ—¶è¿”å› `null`ï¼ˆ==æ¨è==ï¼‰ |
| `element()`     | æŸ¥çœ‹å¤´éƒ¨å…ƒç´ ï¼Œé˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å¼‚å¸¸      |
| `peek()`       | æŸ¥çœ‹å¤´éƒ¨å…ƒç´ ï¼Œé˜Ÿåˆ—ä¸ºç©ºæ—¶è¿”å› `null`ï¼ˆ==æ¨è==ï¼‰ |

---

### 4.2 PriorityQueueè¯¦è§£


**ğŸ”¸ PriorityQueueæ ¸å¿ƒç‰¹ç‚¹**

`PriorityQueue` ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°ç±»ï¼Œå…ƒç´ ä¼šæ ¹æ®ä¼˜å…ˆçº§è¿›è¡Œè‡ªåŠ¨æ’åºï¼Œå‡ºé˜Ÿæ—¶è¿”å›ä¼˜å…ˆçº§æœ€é«˜æˆ–æœ€ä½çš„å…ƒç´ ã€‚

| ç‰¹æ€§            | è¯´æ˜          |
|----------------|--------------------------------|
| **é‡å¤å…ƒç´ **      | å…è®¸å­˜å‚¨é‡å¤å…ƒç´  |
| **`null` å¤„ç†**   | ä¸å…è®¸å­˜å‚¨ `null` å…ƒç´  |
| **é»˜è®¤ç»“æ„**      | åŸºäºæ•°ç»„çš„å®Œå…¨äºŒå‰æ ‘ï¼Œ==æœ€å°å †ç»“æ„==ï¼ˆå‡åºä¼˜å…ˆï¼‰ |

**ğŸ”¸ å®Œå…¨äºŒå‰æ ‘ç»“æ„ç¤ºæ„**

```
å®Œå…¨äºŒå‰æ ‘ç»“æ„ç¤ºæ„å›¾ï¼ˆä»¥å­˜å‚¨[3,1,7,5,8,2,6]ä¸ºä¾‹ï¼‰

              1 (æ ¹èŠ‚ç‚¹ç´¢å¼•0)
            /   \
           2     3
         /  \   / \
        5    8  7  6

å¯¹åº”çš„æ•°ç»„è¡¨ç¤º: [1,2,3,5,8,7,6]

æ•°ç»„åˆ°äºŒå‰æ ‘çš„æ˜ å°„å…³ç³»
ç´¢å¼•:     0  1  2  3  4  5  6
æ•°ç»„:    [1, 2, 3, 5, 8, 7, 6]

æ ‘å½¢ç»“æ„:
           1 (0)
         /     \
      2 (1)     3 (2)
     /   \     /   \
 5 (3)  8 (4) 7 (5) 6 (6)

å¯¹äºç´¢å¼•ä¸ºiçš„èŠ‚ç‚¹:
â€¢ çˆ¶èŠ‚ç‚¹ç´¢å¼•: (i-1)/2ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
â€¢ å·¦å­èŠ‚ç‚¹ç´¢å¼•: 2*i + 1
â€¢ å³å­èŠ‚ç‚¹ç´¢å¼•: 2*i + 2
```

**ğŸ”¸ å †æ“ä½œæ¼”ç¤º**

```
æ·»åŠ å…ƒç´ ï¼ˆsiftUpï¼‰æ“ä½œå›¾ç¤º
å½“æ·»åŠ æ–°å…ƒç´ æ—¶ï¼ŒPriorityQueueå°†å…ƒç´ æ”¾åœ¨æ•°ç»„æœ«å°¾ï¼Œç„¶åå‘ä¸Šè°ƒæ•´ï¼ˆsiftUpï¼‰ç»´æŒå †æ€§è´¨

æ·»åŠ å…ƒç´ 4çš„è¿‡ç¨‹:

åˆå§‹çŠ¶æ€:
              1 (0)
            /     \
        2 (1)      3 (2)
       /   \      /   \
   5 (3)  8 (4)  7 (5) 6 (6)

æ•°ç»„: [1,2,3,5,8,7,6]

æ­¥éª¤1: å°†æ–°å…ƒç´ 4æ·»åŠ åˆ°æ•°ç»„æœ«å°¾
æ•°ç»„: [1,2,3,5,8,7,6,4]

              1 (0)
            /     \
        2 (1)      3 (2)
       /   \      /   \
   5 (3)  8 (4)  7 (5) 6 (6)
  /
4 (7)

æ­¥éª¤2: ä¸çˆ¶èŠ‚ç‚¹5æ¯”è¾ƒï¼Œ4<5ï¼Œäº¤æ¢
æ•°ç»„: [1,2,3,4,8,7,6,5]

æ­¥éª¤3: ä¸çˆ¶èŠ‚ç‚¹2æ¯”è¾ƒï¼Œ4>2ï¼Œåœæ­¢
æœ€ç»ˆçŠ¶æ€:
              1 (0)
            /     \
        2 (1)      3 (2)
       /   \      /   \
   4 (3)  8 (4)  7 (5) 6 (6)
  /
5 (7)

ç§»é™¤å †é¡¶å…ƒç´ ï¼ˆsiftDownï¼‰æ“ä½œå›¾ç¤º
å½“ç§»é™¤å †é¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰æ—¶ï¼ŒPriorityQueueå°†æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°å †é¡¶ï¼Œç„¶åå‘ä¸‹è°ƒæ•´ï¼ˆsiftDownï¼‰ç»´æŒå †æ€§è´¨

æ­¥éª¤1: ç”¨æœ€åä¸€ä¸ªå…ƒç´ 5æ›¿æ¢å †é¡¶
æ­¥éª¤2: ä¸å­èŠ‚ç‚¹æ¯”è¾ƒï¼Œé€‰æœ€å°çš„å­èŠ‚ç‚¹2ï¼Œ5>2ï¼Œäº¤æ¢
æ­¥éª¤3: ç»§ç»­ä¸å­èŠ‚ç‚¹æ¯”è¾ƒï¼Œé€‰æœ€å°çš„å­èŠ‚ç‚¹4ï¼Œ5>4ï¼Œäº¤æ¢
æ­¥éª¤4: 5çš„å­èŠ‚ç‚¹ä¸å­˜åœ¨æˆ–éƒ½å¤§äº5ï¼Œåœæ­¢
```

**ğŸ”¸ æ’åºæœºåˆ¶**

| æ’åºæ–¹å¼     | è¯´æ˜                                        |
|-------------|--------------------------------|
| **è‡ªç„¶æ’åº**     | å…ƒç´ éœ€å®ç° `Comparable<T>`ï¼Œå¦‚ `Integer`ã€`String` ç­‰ |
| **è‡ªå®šä¹‰æ’åºå™¨** | æ„é€ æ—¶ä¼ å…¥ `Comparator<T>`ï¼Œå®ç°è‡ªå®šä¹‰ä¼˜å…ˆçº§é€»è¾‘ |

**âš¡ PriorityQueueå¸¸ç”¨æ–¹æ³•**

| æ–¹æ³•          | åŠŸèƒ½è¯´æ˜                      |
|--------------|------------------------------|
| `offer(E e)`   | æ·»åŠ å…ƒç´ ï¼ˆè‡ªåŠ¨æ”¾å…¥åˆé€‚çš„å †ä½ï¼‰ |
| `poll()`      | åˆ é™¤å¹¶è¿”å›å †é¡¶å…ƒç´ ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ |
| `peek()`      | è¿”å›å †é¡¶å…ƒç´ ä½†ä¸ç§»é™¤ |
| `remove(Object)` | åˆ é™¤æŒ‡å®šå…ƒç´  |
| `size()`      | è¿”å›å½“å‰é˜Ÿåˆ—ä¸­å…ƒç´ ä¸ªæ•° |
| `clear()`     | æ¸…ç©ºæ‰€æœ‰å…ƒç´  |
| `isEmpty()`   | åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º |

```java
// åˆ›å»ºé˜Ÿåˆ—
PriorityQueue<Integer> pq = new PriorityQueue<>(); // é»˜è®¤æœ€å°å †
PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Collections.reverseOrder()); // æœ€å¤§å †

// æ·»åŠ å…ƒç´ 
pq.offer(3);
pq.offer(1);
pq.offer(4);
pq.offer(2);

// æŸ¥çœ‹å’Œç§»é™¤
System.out.println(pq.peek()); // 1 (æœ€å°å…ƒç´ )
System.out.println(pq.poll()); // 1 (ç§»é™¤æœ€å°å…ƒç´ )
System.out.println(pq.poll()); // 2 (ç§»é™¤ä¸‹ä¸€ä¸ªæœ€å°å…ƒç´ )
```

---

### 4.3 ArrayDequeè¯¦è§£


**ğŸ”¸ ArrayDequeæ ¸å¿ƒç‰¹ç‚¹**

ArrayDeque æ˜¯åŸºäºæ•°ç»„çš„åŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒæ ˆå’Œé˜Ÿåˆ—æ“ä½œï¼Œæ˜¯ Java ä¸­==æœ€æ¨èä½¿ç”¨==çš„åŒç«¯é˜Ÿåˆ—å®ç°ã€‚

| ç‰¹æ€§            | ArrayDeque è¯´æ˜                           |
|----------------|--------------------------------|
| **åº•å±‚ç»“æ„**      | åŸºäºå¯è°ƒæ•´å¤§å°çš„å¾ªç¯æ•°ç»„å®ç° |
| **æ•°æ®ç»“æ„**      | åŒç«¯é˜Ÿåˆ—ï¼ˆæ”¯æŒ FIFO & LIFOï¼‰ï¼ŒåŒæ—¶æ”¯æŒé˜Ÿåˆ—å’Œæ ˆçš„æ“ä½œ |
| **æ€§èƒ½ä¼˜åŠ¿**      | æ¯” `LinkedList` æ›´é«˜æ•ˆï¼Œæ›¿ä»£ `Stack` å’Œ `LinkedList` |
| **nullå€¼å­˜å‚¨**      | ä¸å…è®¸å­˜å‚¨nullå…ƒç´  |
| **æ“ä½œç‰¹æ€§**      | å¤´å°¾å‡å¯æ·»åŠ æˆ–åˆ é™¤å…ƒç´  |

**ğŸ”¸ å†…éƒ¨å®ç°æœºåˆ¶**

| æ•°æ®ç»“æ„       | è¯´æ˜                                      |
|----------------|--------------------------------|
| **å¾ªç¯æ•°ç»„**     | å­˜å‚¨é˜Ÿåˆ—å…ƒç´ ï¼Œé¿å…é¢å¤–é“¾è¡¨å¼€é”€ |
| **å¤´æŒ‡é’ˆ (`head`)** | è®°å½•é˜Ÿåˆ—å¤´éƒ¨ä½ç½®ï¼Œæ”¯æŒ O(1) çº§åˆ«å‡ºé˜Ÿ |
| **å°¾æŒ‡é’ˆ (`tail`)** | è®°å½•é˜Ÿåˆ—å°¾éƒ¨ä½ç½®ï¼Œæ”¯æŒ O(1) çº§åˆ«å…¥é˜Ÿ |
| **æ•°ç»„é•¿åº¦**     | æ€»æ˜¯ 2 çš„å¹‚æ¬¡ï¼Œä¾¿äº ä½è¿ç®—ä¼˜åŒ– |
| **é»˜è®¤å®¹é‡**     | 16ï¼Œå½“å®¹é‡ä¸å¤Ÿæ—¶åŠ¨æ€æ‰©å®¹ |
| **åŠ¨æ€æ‰©å®¹**     | å…ƒç´ æ•°é‡è¾¾åˆ° å½“å‰å®¹é‡æ—¶ï¼Œæ‰©å®¹ä¸º åŸæ¥çš„ 2 å€ |

**ğŸ”¸ å¾ªç¯æ•°ç»„åŸç†**

- `tail`ï¼šåœ¨æ·»åŠ å…ƒç´ åˆ°é˜Ÿåˆ—å°¾éƒ¨æ—¶(offerLast)ï¼Œtailæ€»æ˜¯å‘åç§»åŠ¨
- `head`ï¼šåœ¨ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ æ—¶(pollFirst)ï¼Œheadæ€»æ˜¯å‘åç§»åŠ¨
- ä½†åœ¨æ·»åŠ å…ƒç´ åˆ°é˜Ÿåˆ—å¤´éƒ¨æ—¶(offerFirst)ï¼Œheadä¼šå‘å‰ç§»åŠ¨
- å½“ `tail == array.length` ä¸”æ•°ç»„æœªæ»¡æ—¶ï¼Œtail ä¼šå›ç»•åˆ° 0ï¼ˆå½¢æˆå¾ªç¯ï¼‰
- å½“headéœ€è¦å‘å‰ç§»åŠ¨ä¸”å·²ç»åœ¨ç´¢å¼•0æ—¶ï¼Œå®ƒä¼šç»•åˆ°æ•°ç»„æœ«å°¾
- é˜Ÿåˆ—æ»¡çš„æ¡ä»¶æ˜¯ï¼š`head == ((tail + 1) & (elements.length - 1))`

**âš¡ ArrayDequeå¸¸ç”¨æ–¹æ³•**
```java
// åˆ›å»ºåŒç«¯é˜Ÿåˆ—
ArrayDeque<String> deque = new ArrayDeque<>();

// ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ (FIFO)
deque.offer("ä»»åŠ¡1");
deque.offer("ä»»åŠ¡2");
deque.offer("ä»»åŠ¡3");
while (!deque.isEmpty()) {
    String task = deque.poll();  // è·å–å¹¶ç§»é™¤é˜Ÿé¦–å…ƒç´ 
    System.out.println("å¤„ç†: " + task);
}

// ä½œä¸ºæ ˆä½¿ç”¨ (LIFO)
ArrayDeque<String> stack = new ArrayDeque<>();
stack.push("ç¬¬ä¸€å±‚");
stack.push("ç¬¬äºŒå±‚");
stack.push("ç¬¬ä¸‰å±‚");
while (!stack.isEmpty()) {
    System.out.println("å¼¹å‡º: " + stack.pop());
}

// ä½œä¸ºåŒç«¯é˜Ÿåˆ—ä½¿ç”¨
ArrayDeque<Integer> doubleDeque = new ArrayDeque<>();
doubleDeque.offerFirst(10);  // [10]
doubleDeque.offerLast(20);   // [10, 20]
doubleDeque.offerFirst(5);   // [5, 10, 20]
doubleDeque.offerLast(30);   // [5, 10, 20, 30]

System.out.println("é˜Ÿé¦–å…ƒç´ : " + doubleDeque.peekFirst());  // 5
System.out.println("é˜Ÿå°¾å…ƒç´ : " + doubleDeque.peekLast());   // 30
```

---

### 4.4 Queueçº¿ç¨‹å®‰å…¨å®ç°


**ğŸ”¸ å¹¶å‘åœºæ™¯å¸¸ç”¨é˜Ÿåˆ—**

```
å¹¶å‘åœºæ™¯å¸¸ç”¨é˜Ÿåˆ—
â”œâ”€â”€ é˜»å¡é˜Ÿåˆ— (BlockingQueueæ¥å£å®ç°)
â”‚    â”œâ”€â”€ LinkedBlockingQueue - æœ€å¸¸ç”¨
â”‚    â”‚    â”œâ”€â”€ åŸºäºé“¾è¡¨çš„å¯é€‰æœ‰ç•Œé˜Ÿåˆ—
â”‚    â”‚    â”œâ”€â”€ é»˜è®¤å®¹é‡Integer.MAX_VALUE (å®é™…æ— ç•Œ)
â”‚    â”‚    â”œâ”€â”€ é€‚ç”¨äºç”Ÿäº§è€…æ¶ˆè´¹è€…é€Ÿç‡ä¸åŒ¹é…åœºæ™¯
â”‚    â”‚    â””â”€â”€ ååé‡é€šå¸¸ä¼˜äºArrayBlockingQueue
â”‚    â”‚
â”‚    â”œâ”€â”€ ArrayBlockingQueue
â”‚    â”‚    â”œâ”€â”€ åŸºäºæ•°ç»„çš„æœ‰ç•Œé˜Ÿåˆ—
â”‚    â”‚    â”œâ”€â”€ åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå®¹é‡
â”‚    â”‚    â”œâ”€â”€ å¯é€‰å…¬å¹³æ€§å‚æ•°æ§åˆ¶çº¿ç¨‹è®¿é—®é¡ºåº
â”‚    â”‚    â””â”€â”€ é€‚ç”¨äºå·²çŸ¥è¾¹ç•Œçš„ç¼“å†²åœºæ™¯
â”‚    â”‚
â”‚    â”œâ”€â”€ SynchronousQueue
â”‚    â”‚    â”œâ”€â”€ æ— å­˜å‚¨å®¹é‡çš„é˜»å¡é˜Ÿåˆ—
â”‚    â”‚    â”œâ”€â”€ æ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…å¯¹åº”çš„ç§»é™¤æ“ä½œ
â”‚    â”‚    â””â”€â”€ é€‚ç”¨äº"æ‰‹é€’æ‰‹"äº¤æ¢ä¿¡æ¯çš„åœºæ™¯
â”‚    â”‚
â”‚    â”œâ”€â”€ PriorityBlockingQueue
â”‚    â”‚    â”œâ”€â”€ åŸºäºä¼˜å…ˆçº§å †çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—
â”‚    â”‚    â”œâ”€â”€ å…ƒç´ æŒ‰ä¼˜å…ˆçº§é¡ºåºå‡ºé˜Ÿ
â”‚    â”‚    â””â”€â”€ é€‚ç”¨äºä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
â”‚    â”‚
â”‚    â””â”€â”€ DelayQueue
â”‚         â”œâ”€â”€ å»¶è¿Ÿè·å–å…ƒç´ çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—
â”‚         â”œâ”€â”€ å…ƒç´ åªæœ‰åœ¨å»¶è¿ŸæœŸæ»¡åæ‰èƒ½è¢«æ¶ˆè´¹
â”‚         â””â”€â”€ é€‚ç”¨äºå®šæ—¶ä»»åŠ¡è°ƒåº¦
â”‚
â”œâ”€â”€ éé˜»å¡å¹¶å‘é˜Ÿåˆ—
â”‚    â”œâ”€â”€ ConcurrentLinkedQueue - é«˜æ€§èƒ½
â”‚    â”‚    â”œâ”€â”€ åŸºäºé“¾è¡¨çš„æ— ç•Œéé˜»å¡é˜Ÿåˆ—
â”‚    â”‚    â”œâ”€â”€ ä½¿ç”¨CASæ“ä½œè€Œéé”å®ç°å¹¶å‘å®‰å…¨
â”‚    â”‚    â””â”€â”€ é€‚ç”¨äºé«˜å¹¶å‘ä½å»¶è¿Ÿåœºæ™¯
â”‚    â”‚
â”‚    â””â”€â”€ ConcurrentLinkedDeque
â”‚         â”œâ”€â”€ åŸºäºé“¾è¡¨çš„æ— ç•Œéé˜»å¡åŒç«¯é˜Ÿåˆ—
â”‚         â””â”€â”€ ä¸¤ç«¯éƒ½æ”¯æŒå¹¶å‘å®‰å…¨æ“ä½œ
â”‚
â””â”€â”€ ç‰¹æ®Šç”¨é€”é˜Ÿåˆ—
     â”œâ”€â”€ LinkedTransferQueue
     â”‚    â”œâ”€â”€ ç»“åˆSynchronousQueueå’ŒLinkedBlockingQueueç‰¹æ€§
     â”‚    â”œâ”€â”€ æ”¯æŒå¯é€‰çš„åŒæ­¥ä¼ è¾“æ¨¡å¼
     â”‚    â””â”€â”€ JDK 7å¼•å…¥çš„é«˜æ€§èƒ½é˜Ÿåˆ—
     â”‚
     â””â”€â”€ LinkedBlockingDeque
          â”œâ”€â”€ åŸºäºé“¾è¡¨çš„å¯é€‰æœ‰ç•Œé˜»å¡åŒç«¯é˜Ÿåˆ—
          â””â”€â”€ æ”¯æŒåœ¨ä¸¤ç«¯å¹¶å‘æ’å…¥å’Œç§»é™¤
```

---

## 5. âš™ï¸ æ‰©å®¹æœºåˆ¶æ¯”è¾ƒ


### 5.1 æ‰©å®¹æœºåˆ¶æ€»è§ˆ


**ğŸ”¸ æ”¯æŒæ‰©å®¹çš„ï¼ˆåŠ¨æ€æ•°ç»„ç»“æ„ï¼‰**

ArrayListã€HashMapã€HashSetã€ArrayDequeã€PriorityQueueã€Vectorã€CopyOnWriteArraySet

**ğŸ”¸ ä¸æ”¯æŒæ‰©å®¹ï¼ˆé“¾è¡¨/æ ‘ç»“æ„ï¼‰**

LinkedListã€TreeSetã€TreeMapï¼šåŸºäºé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»“æ„ï¼ŒèŠ‚ç‚¹æŒ‰éœ€å¢åŠ ï¼Œæ— "å®¹é‡"æ¦‚å¿µ

### 5.2 è¯¦ç»†æ‰©å®¹æœºåˆ¶å¯¹æ¯”è¡¨


| ç±»å                      | ç±»å‹       | åº•å±‚ç»“æ„                     | æ˜¯å¦è‡ªåŠ¨æ‰©å®¹ | æ‰©å®¹è§¦å‘æ¡ä»¶                          | æ‰©å®¹æ–¹å¼                               |
|---------------------------|------------|------------------------------|----------------|----------------------------------------|----------------------------------------|
| **ArrayList**             | List       | åŠ¨æ€æ•°ç»„ï¼ˆObject[]ï¼‰         | âœ… æ˜¯           | å…ƒç´ ä¸ªæ•° â‰¥ å½“å‰æ•°ç»„å®¹é‡               | æ–°å®¹é‡ = åŸå®¹é‡ Ã— 1.5ï¼ˆ+æ—§å€¼>>1ï¼‰       |
| **LinkedList**            | List/Deque | åŒå‘é“¾è¡¨                     | âŒ å¦           | æ— å®¹é‡é™åˆ¶ï¼ˆæŒ‰éœ€å¢é•¿ï¼‰                | æ¯æ¬¡æ·»åŠ æ–°èŠ‚ç‚¹                         |
| **Vector**                | List       | åŠ¨æ€æ•°ç»„ï¼ˆObject[]ï¼‰         | âœ… æ˜¯           | å…ƒç´ ä¸ªæ•° â‰¥ å½“å‰å®¹é‡                   | æ–°å®¹é‡ = åŸå®¹é‡ Ã— 2ï¼ˆåŒå€æ‰©å®¹ï¼‰        |
| **HashSet**               | Set        | HashMapï¼ˆæ•°ç»„ + é“¾è¡¨/æ ‘ï¼‰     | âœ… æ˜¯           | å…ƒç´ ä¸ªæ•° > thresholdï¼ˆå®¹é‡ Ã— è´Ÿè½½å› å­ï¼‰| æ–°å®¹é‡ = åŸå®¹é‡ Ã— 2                   |
| **LinkedHashSet**         | Set        | HashMap + åŒå‘é“¾è¡¨           | âœ… æ˜¯           | åŒ HashSet                            | åŒä¸Š                                   |
| **TreeSet**               | Set        | TreeMapï¼ˆçº¢é»‘æ ‘ï¼‰             | âŒ å¦           | æ— æ‰©å®¹æ¦‚å¿µï¼ˆæ ‘ç»“æ„æŒ‰éœ€å¢é•¿ï¼‰          | åŠ¨æ€æ’å…¥èŠ‚ç‚¹                           |
| **CopyOnWriteArraySet**   | Set        | CopyOnWriteArrayList         | âœ… æ˜¯           | æ·»åŠ å…ƒç´ è§¦å‘æ•°ç»„å¤åˆ¶                  | åˆ›å»ºæ–°æ•°ç»„ï¼ˆå®¹é‡ = æ—§æ•°ç»„ + 1ï¼‰        |
| **PriorityQueue**         | Queue      | æœ€å°å †ï¼ˆæ•°ç»„ï¼‰                | âœ… æ˜¯           | å…ƒç´ ä¸ªæ•° â‰¥ å½“å‰æ•°ç»„å®¹é‡               | æ–°å®¹é‡ = åŸå®¹é‡ Ã— 2                   |
| **ArrayDeque**            | Deque      | å¾ªç¯æ•°ç»„                     | âœ… æ˜¯           | å…ƒç´ ä¸ªæ•° â‰¥ å½“å‰æ•°ç»„å®¹é‡               | æ–°å®¹é‡ = åŸå®¹é‡ Ã— 2                   |

### 5.3 ç‰¹æ®Šæƒ…å†µè¯´æ˜


> **ğŸ’¡ ç‰¹æ®Šæƒ…å†µè¯´æ˜**ï¼š
> - **ConcurrentHashMap** çš„æ‰©å®¹é‡‡ç”¨å¤šçº¿ç¨‹åä½œï¼Œé€šè¿‡è®¾ç½® ForwardingNode æ ‡è¯†å·²è¿ç§»ä½ç½®
> - **CopyOnWriteArraySet** æ¯æ¬¡æ·»åŠ å…ƒç´ ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œå› æ­¤å¼€é”€å¤§ï¼Œé€‚åˆè¯»å¤šå†™å°‘åœºæ™¯

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ Collectionä¸‰å¤§æ¥å£ï¼šListï¼ˆæœ‰åºå¯é‡å¤ï¼‰ã€Setï¼ˆæ— åºä¸é‡å¤ï¼‰ã€Queueï¼ˆé˜Ÿåˆ—ï¼‰
ğŸ”¸ Listæ ¸å¿ƒå®ç°ï¼šArrayListï¼ˆæŸ¥è¯¢å¿«ï¼‰ã€LinkedListï¼ˆå¢åˆ å¿«ï¼‰ã€Vectorï¼ˆåŒæ­¥ä½†ä¸æ¨èï¼‰
ğŸ”¸ Setæ ¸å¿ƒå®ç°ï¼šHashSetï¼ˆæ— åºï¼‰ã€LinkedHashSetï¼ˆæ’å…¥é¡ºåºï¼‰ã€TreeSetï¼ˆè‡ªåŠ¨æ’åºï¼‰
ğŸ”¸ Queueæ ¸å¿ƒå®ç°ï¼šPriorityQueueï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ã€ArrayDequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰
ğŸ”¸ æ‰©å®¹æœºåˆ¶ï¼šæ•°ç»„ç»“æ„æ”¯æŒæ‰©å®¹ï¼Œé“¾è¡¨/æ ‘ç»“æ„æŒ‰éœ€å¢é•¿
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‰æ‹©åˆé€‚çš„é›†åˆç±»å‹**
```
æŸ¥è¯¢ä¸ºä¸» â†’ ArrayList
å¢åˆ é¢‘ç¹ â†’ LinkedList  
å»é‡æ— åº â†’ HashSet
å»é‡æœ‰åº â†’ TreeSet æˆ– LinkedHashSet
ä¼˜å…ˆçº§å¤„ç† â†’ PriorityQueue
åŒç«¯æ“ä½œ â†’ ArrayDeque
```

**ğŸ”¹ çº¿ç¨‹å®‰å…¨è€ƒè™‘**
```
å•çº¿ç¨‹åœºæ™¯ï¼šä½¿ç”¨æ™®é€šå®ç°ç±»
å¤šçº¿ç¨‹åœºæ™¯ï¼š
â€¢ è¯»å¤šå†™å°‘ â†’ CopyOnWriteArrayListã€CopyOnWriteArraySet
â€¢ è¯»å†™å‡è¡¡ â†’ Collections.synchronizedXxx() åŒ…è£…
â€¢ é«˜å¹¶å‘ â†’ ConcurrentHashMap.newKeySet()ã€ConcurrentLinkedQueue
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
```
ArrayListä¼˜åŒ–ï¼š
â€¢ é¢„è®¾åˆå§‹å®¹é‡ï¼Œé¿å…é¢‘ç¹æ‰©å®¹
â€¢ ä½¿ç”¨ ensureCapacity() é¢„åˆ†é…ç©ºé—´
â€¢ é¿å…åœ¨ä¸­é—´ä½ç½®é¢‘ç¹æ’å…¥åˆ é™¤

HashSetä¼˜åŒ–ï¼š
â€¢ åˆç†è®¾ç½®åˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­
â€¢ ç¡®ä¿å…ƒç´ æ­£ç¡®å®ç° hashCode() å’Œ equals()
â€¢ é¿å…å“ˆå¸Œå†²çªè¿‡å¤š

LinkedListä¼˜åŒ–ï¼š
â€¢ é¿å…æŒ‰ç´¢å¼•éšæœºè®¿é—®
â€¢ å¤šç”¨ addFirst/addLastã€removeFirst/removeLast
â€¢ ä½œä¸ºé˜Ÿåˆ—æˆ–æ ˆä½¿ç”¨æ—¶æ€§èƒ½æœ€ä½³
```

### 6.3 å¸¸è§ä½¿ç”¨åœºæ™¯


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”¨æˆ·åˆ—è¡¨ç®¡ç†**ï¼šArrayList å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œæ”¯æŒåˆ†é¡µæŸ¥è¯¢
- **å»é‡ä¸šåŠ¡é€»è¾‘**ï¼šHashSet å¿«é€Ÿå»é™¤é‡å¤æ•°æ®
- **æ’åºéœ€æ±‚**ï¼šTreeSet è‡ªåŠ¨ç»´æŠ¤æœ‰åºé›†åˆ
- **ä»»åŠ¡é˜Ÿåˆ—å¤„ç†**ï¼šPriorityQueue å¤„ç†ä¼˜å…ˆçº§ä»»åŠ¡
- **ç¼“å­˜å®ç°**ï¼šLinkedHashSet ç»´æŠ¤è®¿é—®é¡ºåºçš„ç¼“å­˜
- **å¤šçº¿ç¨‹ç¯å¢ƒ**ï¼šCopyOnWriteArrayList å®ç°è¯»å†™åˆ†ç¦»

**ğŸ”§ ç¼–ç¨‹å®è·µæŠ€å·§**
- **å®¹é‡é¢„ä¼°**ï¼šæ ¹æ®é¢„æœŸæ•°æ®é‡è®¾ç½®åˆç†çš„åˆå§‹å®¹é‡
- **ç±»å‹é€‰æ‹©**ï¼šä¼˜å…ˆé€‰æ‹©æ¥å£ç±»å‹å£°æ˜å˜é‡ï¼Œä¾¿äºåç»­æ›¿æ¢å®ç°
- **å¼‚å¸¸å¤„ç†**ï¼šæ³¨æ„ç©ºæŒ‡é’ˆå¼‚å¸¸å’Œå¹¶å‘ä¿®æ”¹å¼‚å¸¸
- **å†…å­˜ç®¡ç†**ï¼šåŠæ—¶æ¸…ç†ä¸éœ€è¦çš„é›†åˆå¼•ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼

### 6.4 è®¾è®¡æ¨¡å¼åº”ç”¨


**ğŸ”¸ è¿­ä»£å™¨æ¨¡å¼**
```java
// ç»Ÿä¸€çš„éå†æ–¹å¼
List<String> list = new ArrayList<>();
Set<String> set = new HashSet<>();
Queue<String> queue = new PriorityQueue<>();

// éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„éå†æ–¹å¼
for (String item : list) { /* å¤„ç† */ }
for (String item : set) { /* å¤„ç† */ }  
for (String item : queue) { /* å¤„ç† */ }
```

**ğŸ”¸ å·¥å‚æ¨¡å¼**
```java
// Collections å·¥å‚æ–¹æ³•
List<String> emptyList = Collections.emptyList();
Set<String> singleton = Collections.singleton("item");
List<String> unmodifiable = Collections.unmodifiableList(list);
```

**ğŸ”¸ è£…é¥°å™¨æ¨¡å¼**
```java
// çº¿ç¨‹å®‰å…¨è£…é¥°
List<String> syncList = Collections.synchronizedList(new ArrayList<>());
Set<String> syncSet = Collections.synchronizedSet(new HashSet<>());
```

### 6.5 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ ç¼–ç è§„èŒƒ**
```java
// âœ… æ¨èï¼šä½¿ç”¨æ¥å£å£°æ˜
List<String> list = new ArrayList<>();
Set<Integer> set = new HashSet<>();
Queue<Task> queue = new PriorityQueue<>();

// âŒ ä¸æ¨èï¼šä½¿ç”¨å…·ä½“å®ç°ç±»å£°æ˜
ArrayList<String> list = new ArrayList<>();
HashSet<Integer> set = new HashSet<>();
```

**ğŸ’¡ åˆå§‹åŒ–æœ€ä½³å®è·µ**
```java
// âœ… é¢„è®¾å®¹é‡
List<String> list = new ArrayList<>(100);
Set<String> set = new HashSet<>(16, 0.75f);

// âœ… ä½¿ç”¨å·¥å‚æ–¹æ³•ï¼ˆJava 9+ï¼‰
List<String> list = List.of("a", "b", "c");
Set<String> set = Set.of("x", "y", "z");

// âœ… ä»ç°æœ‰é›†åˆåˆ›å»º
List<String> newList = new ArrayList<>(existingList);
```

**ğŸ’¡ çº¿ç¨‹å®‰å…¨ä½¿ç”¨**
```java
// âœ… è¯»å¤šå†™å°‘åœºæ™¯
List<String> list = new CopyOnWriteArrayList<>();

// âœ… ç®€å•åŒæ­¥åœºæ™¯
List<String> syncList = Collections.synchronizedList(new ArrayList<>());
synchronized (syncList) {
    // éå†æ—¶éœ€è¦åŒæ­¥å—
    for (String item : syncList) {
        // å¤„ç†é€»è¾‘
    }
}

// âœ… é«˜å¹¶å‘åœºæ™¯
Set<String> concurrentSet = ConcurrentHashMap.newKeySet();
```

### 6.6 æ€§èƒ½å¯¹æ¯”æ€»ç»“


| æ“ä½œç±»å‹ | ArrayList | LinkedList | HashSet | TreeSet | ArrayDeque |
|---------|-----------|------------|---------|---------|------------|
| **æ·»åŠ ï¼ˆå°¾éƒ¨ï¼‰** | `O(1)` | `O(1)` | `O(1)` | `O(log n)` | `O(1)` |
| **æ·»åŠ ï¼ˆå¤´éƒ¨ï¼‰** | `O(n)` | `O(1)` | `O(1)` | `O(log n)` | `O(1)` |
| **æ·»åŠ ï¼ˆä¸­é—´ï¼‰** | `O(n)` | `O(1)*` | `O(1)` | `O(log n)` | `O(n)` |
| **æŸ¥æ‰¾å…ƒç´ ** | `O(1)` | `O(n)` | `O(1)` | `O(log n)` | `O(n)` |
| **åˆ é™¤å…ƒç´ ** | `O(n)` | `O(1)*` | `O(1)` | `O(log n)` | `O(n)` |
| **éå†è®¿é—®** | `O(1)` | `O(1)` | `O(1)` | `O(1)` | `O(1)` |

> *æ³¨ï¼šLinkedList çš„ O(1) æ˜¯æŒ‡å·²çŸ¥èŠ‚ç‚¹ä½ç½®çš„æƒ…å†µ

### 6.7 å®é™…åº”ç”¨ä»·å€¼


**ğŸ”§ ä¼ä¸šå¼€å‘å¸¸è§éœ€æ±‚**
- **æ•°æ®å»é‡**ï¼šä½¿ç”¨ Set é›†åˆå¿«é€Ÿå»é™¤é‡å¤æ•°æ®
- **æ’åºéœ€æ±‚**ï¼šTreeSet è‡ªåŠ¨ç»´æŠ¤æœ‰åºï¼ŒPriorityQueue å¤„ç†ä¼˜å…ˆçº§
- **ç¼“å­˜è®¾è®¡**ï¼šLinkedHashSet å®ç° LRU ç¼“å­˜çš„åŸºç¡€ç»“æ„
- **å¼‚æ­¥å¤„ç†**ï¼šQueue å®ç°ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ”¯æŒç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼
- **é…ç½®ç®¡ç†**ï¼šCopyOnWriteArrayList å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œæ”¯æŒçƒ­æ›´æ–°

**ğŸ¯ ç®—æ³•ç«èµ›åº”ç”¨**
- **å›¾è®ºç®—æ³•**ï¼šArrayList å­˜å‚¨é‚»æ¥è¡¨ï¼ŒQueue å®ç° BFS
- **åŠ¨æ€è§„åˆ’**ï¼šArrayList ä½œä¸º DP æ•°ç»„çš„åŠ¨æ€æ‰©å±•
- **è´ªå¿ƒç®—æ³•**ï¼šPriorityQueue ç»´æŠ¤å€™é€‰è§£çš„ä¼˜å…ˆçº§
- **å­—ç¬¦ä¸²å¤„ç†**ï¼šHashSet å¿«é€Ÿåˆ¤æ–­å­—ç¬¦æˆ–å­ä¸²æ˜¯å¦å­˜åœ¨

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- Collectionä¸‰å…„å¼Ÿï¼ŒList Set Queueè¦åˆ†æ¸…
- ArrayListæŸ¥è¯¢å¿«ï¼ŒLinkedListå¢åˆ å¼º  
- HashSetæ— åºå¿«ï¼ŒTreeSetæ’åºé¦™
- çº¿ç¨‹å®‰å…¨è¦è€ƒè™‘ï¼ŒCopyOnWriteè¯»å¤šå¼º
- æ‰©å®¹æœºåˆ¶è¦è®°ä½ï¼Œæ•°ç»„ç¿»å€é“¾è¡¨é•¿

---

## ğŸ” Collectioné›†åˆçŸ¥è¯†ç‚¹é€ŸæŸ¥è¡¨


### å¿«é€Ÿé€‰æ‹©æŒ‡å—


```
éœ€æ±‚åœºæ™¯ â†’ æ¨èé›†åˆç±»å‹

ğŸ“‹ å­˜å‚¨æœ‰åºæ•°æ®ï¼Œé¢‘ç¹æŸ¥è¯¢ â†’ ArrayList
ğŸ”— é¢‘ç¹æ’å…¥åˆ é™¤ï¼Œå½“ä½œé˜Ÿåˆ—æ ˆ â†’ LinkedList  
ğŸ¯ æ•°æ®å»é‡ï¼Œæ— åºå¿«é€ŸæŸ¥æ‰¾ â†’ HashSet
ğŸ“œ æ•°æ®å»é‡ï¼Œä¿æŒæ’å…¥é¡ºåº â†’ LinkedHashSet
ğŸ† æ•°æ®å»é‡ï¼Œè‡ªåŠ¨æ’åº â†’ TreeSet
âš¡ ä¼˜å…ˆçº§å¤„ç†ï¼Œå †æ“ä½œ â†’ PriorityQueue
ğŸ”„ åŒç«¯æ“ä½œï¼Œå½“ä½œæ ˆé˜Ÿåˆ— â†’ ArrayDeque
ğŸ”’ å¤šçº¿ç¨‹ï¼Œè¯»å¤šå†™å°‘ â†’ CopyOnWriteArrayList/Set
ğŸŒ é«˜å¹¶å‘ï¼Œçº¿ç¨‹å®‰å…¨ â†’ ConcurrentHashMap.newKeySet()
```

### é›†åˆé€‰æ‹©å†³ç­–æ ‘


```
å¼€å§‹é€‰æ‹©é›†åˆ
â”œâ”€â”€ éœ€è¦æœ‰åºå—ï¼Ÿ
â”‚   â”œâ”€â”€ æ˜¯ â†’ éœ€è¦ç´¢å¼•è®¿é—®å—ï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ æ˜¯ â†’ æŸ¥è¯¢å¤šè¿˜æ˜¯å¢åˆ å¤šï¼Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ æŸ¥è¯¢å¤š â†’ ArrayList
â”‚   â”‚   â”‚   â””â”€â”€ å¢åˆ å¤š â†’ LinkedList
â”‚   â”‚   â””â”€â”€ å¦ â†’ éœ€è¦å»é‡å—ï¼Ÿ
â”‚   â”‚       â”œâ”€â”€ æ˜¯ â†’ éœ€è¦æ’åºå—ï¼Ÿ
â”‚   â”‚       â”‚   â”œâ”€â”€ æ˜¯ â†’ TreeSet
â”‚   â”‚       â”‚   â””â”€â”€ å¦ â†’ LinkedHashSet
â”‚   â”‚       â””â”€â”€ å¦ â†’ éœ€è¦åŒç«¯æ“ä½œå—ï¼Ÿ
â”‚   â”‚           â”œâ”€â”€ æ˜¯ â†’ ArrayDeque
â”‚   â”‚           â””â”€â”€ å¦ â†’ ArrayList
â”‚   â””â”€â”€ å¦ â†’ éœ€è¦å»é‡å—ï¼Ÿ
â”‚       â”œâ”€â”€ æ˜¯ â†’ éœ€è¦ä¼˜å…ˆçº§å—ï¼Ÿ
â”‚       â”‚   â”œâ”€â”€ æ˜¯ â†’ PriorityQueue
â”‚       â”‚   â””â”€â”€ å¦ â†’ HashSet
â”‚       â””â”€â”€ å¦ â†’ éœ€è¦ä¼˜å…ˆçº§å—ï¼Ÿ
â”‚           â”œâ”€â”€ æ˜¯ â†’ PriorityQueue
â”‚           â””â”€â”€ å¦ â†’ ArrayList
```