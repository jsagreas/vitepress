---
title: 3ã€Mapé›†åˆ
---
## ğŸ“š ç›®å½•

1. [MapåŸºç¡€æ¦‚å¿µ](#1-MapåŸºç¡€æ¦‚å¿µ)
2. [HashMapè¯¦è§£](#2-HashMapè¯¦è§£)
3. [LinkedHashMapè¯¦è§£](#3-LinkedHashMapè¯¦è§£)
4. [Hashtableè¯¦è§£](#4-Hashtableè¯¦è§£)
5. [TreeMapè¯¦è§£](#5-TreeMapè¯¦è§£)
6. [ConcurrentHashMapè¯¦è§£](#6-ConcurrentHashMapè¯¦è§£)
7. [Mapå®ç°ç±»å¯¹æ¯”](#7-Mapå®ç°ç±»å¯¹æ¯”)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ºï¸ MapåŸºç¡€æ¦‚å¿µ


### 1.1 Mapæ¥å£å®šä¹‰


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
Map<K, V>ï¼šç”¨äºå­˜å‚¨é”®å€¼å¯¹çš„æ¥å£ï¼Œæ¯ä¸ª key å¯¹åº”ä¸€ä¸ª value
ç‰¹ç‚¹ï¼šåŸºäºå“ˆå¸Œè¡¨çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œæ”¯æŒåŠ¨æ€æ‰©å®¹
è®¾è®¡ç†å¿µï¼šæä¾›é«˜æ•ˆçš„é”®å€¼å¯¹å­˜å‚¨å’Œæ£€ç´¢æœºåˆ¶
```

### 1.2 Mapæ ¸å¿ƒç‰¹æ€§


| ç‰¹æ€§                    | è¯´æ˜                                                 |
|-------------------------|------------------------------------------------------|
| ğŸ”‘ **é”®æœ€å¤šæ˜ å°„ä¸€ä¸ªå€¼**   | æ¯ä¸ªé”®åªèƒ½å…³è”åˆ°ä¸€ä¸ªå€¼ï¼Œä¸èƒ½æ˜ å°„åˆ°å¤šä¸ªå€¼              |
| ğŸš« **é”®ä¸èƒ½é‡å¤**        | Map ä¸­çš„é”®æ˜¯å”¯ä¸€çš„ï¼Œé‡å¤çš„é”®ä¼šè¦†ç›–åŸæœ‰å€¼              |
| âœ… **å€¼å¯ä»¥é‡å¤**        | å€¼æ²¡æœ‰å”¯ä¸€æ€§çº¦æŸï¼Œå¯ä»¥å¤šä¸ªé”®æ˜ å°„åˆ°ç›¸åŒçš„å€¼            |
| ğŸ”„ **å…ƒç´ æ— åº**         | Map ä¸ä¿è¯å…ƒç´ å­˜å‚¨çš„é¡ºåºï¼Œä¸€äº›å®ç°ç±»å¦‚ LinkedHashMap ä¾‹å¤– |
| ğŸ¯ **é”®å’Œå€¼çš„ç±»å‹**     | é”®å’Œå€¼éƒ½å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ç±»å‹ï¼ŒåŒ…æ‹¬ nullï¼ˆæŸäº›å®ç°ç±»å¯èƒ½ä¸å…è®¸ï¼‰ |

### 1.3 Mapä½“ç³»ç»“æ„


```
Map<K, V>ï¼ˆæ¥å£ï¼‰  
â”œâ”€â”€ HashMap<K, V>  
â”‚   â”œâ”€â”€ é»˜è®¤å®ç°ï¼Œæœ€å¸¸ç”¨  
â”‚   â”œâ”€â”€ åº•å±‚ï¼šå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼‰  
â”‚   â”œâ”€â”€ å…è®¸ null é”®å’Œ null å€¼  
â”‚   â””â”€â”€ éçº¿ç¨‹å®‰å…¨  
â”‚
â”œâ”€â”€ LinkedHashMap<K, V>  
â”‚   â”œâ”€â”€ HashMap å­ç±»  
â”‚   â”œâ”€â”€ ä¿ç•™æ’å…¥é¡ºåºï¼ˆåŒå‘é“¾è¡¨ï¼‰  
â”‚   â””â”€â”€ å¸¸ç”¨äºç¼“å­˜ï¼ˆå¦‚ LRUï¼‰  
â”‚
â”œâ”€â”€ TreeMap<K, V>  
â”‚   â”œâ”€â”€ å¯æ’åºï¼ˆkey æŒ‰è‡ªç„¶é¡ºåºæˆ– Comparatorï¼‰  
â”‚   â”œâ”€â”€ åº•å±‚ï¼šçº¢é»‘æ ‘  
â”‚   â”œâ”€â”€ ä¸å…è®¸ null keyï¼ˆå…è®¸ null valueï¼‰  
â”‚   â””â”€â”€ éçº¿ç¨‹å®‰å…¨  
â”‚
â”œâ”€â”€ Hashtable<K, V>ï¼ˆå·²è¿‡æ—¶ï¼Œä¸æ¨èï¼‰  
â”‚   â”œâ”€â”€ çº¿ç¨‹å®‰å…¨ï¼ˆæ–¹æ³•åŠ  synchronizedï¼‰  
â”‚   â”œâ”€â”€ ä¸å…è®¸ null é”®å’Œ null å€¼  
â”‚   â””â”€â”€ æ€§èƒ½å·®ï¼Œä¸å»ºè®®ä½¿ç”¨  
â”‚
â””â”€â”€ ConcurrentHashMap<K, V>ï¼ˆå¹¶å‘é›†åˆï¼‰  
    â”œâ”€â”€ é«˜å¹¶å‘ä¸‹æ¨èä½¿ç”¨  
    â”œâ”€â”€ åˆ†æ®µé”ï¼ˆJDK8 åç”¨ CAS + æ•£åˆ—æ¡¶ + çº¢é»‘æ ‘ï¼‰  
    â”œâ”€â”€ ä¸å…è®¸ null é”®æˆ–å€¼ï¼ˆæŠ›å‡º NullPointerExceptionï¼‰  
    â””â”€â”€ æ”¯æŒå¹¶å‘è¯»å†™ï¼Œçº¿ç¨‹å®‰å…¨  
```

### 1.4 æ ¸å¿ƒç»„æˆéƒ¨åˆ†

```
ğŸ”¸ å“ˆå¸Œæ¡¶æ•°ç»„(table): å­˜å‚¨å…ƒç´ çš„æ•°ç»„ï¼Œä¹Ÿç§°ä¸ºå“ˆå¸Œè¡¨
ğŸ”¸ é“¾è¡¨èŠ‚ç‚¹(Node): å­˜å‚¨é”®å€¼å¯¹çš„èŠ‚ç‚¹
ğŸ”¸ çº¢é»‘æ ‘èŠ‚ç‚¹(TreeNode): å½“é“¾è¡¨è¿‡é•¿æ—¶è½¬ä¸ºçº¢é»‘æ ‘çš„èŠ‚ç‚¹
```

---

## 2. ğŸ”¥ HashMapè¯¦è§£


### 2.1 HashMapåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
HashMapï¼šJava é›†åˆæ¡†æ¶ä¸­å®ç° Map æ¥å£çš„å…·ä½“ç±»
åŸç†ï¼šåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹(key-value)æ•°æ®
ç›®æ ‡ï¼šæä¾›é«˜æ•ˆçš„å­˜å–æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(1)
```

### 2.2 HashMapæ ¸å¿ƒç‰¹æ€§


| ç‰¹æ€§                      | è¯´æ˜                                                        |
|---------------------------|-------------------------------------------------------------|
| ğŸ”‘ **Key å”¯ä¸€**           | æ¯ä¸ªé”®åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ï¼Œä¸èƒ½é‡å¤                             |
| ğŸ”„ **Value å¯é‡å¤**       | ä¸åŒçš„é”®å¯ä»¥å­˜å‚¨ç›¸åŒçš„å€¼                                     |
| â­• **å…è®¸ null**          | å¯ä»¥æœ‰ä¸€ä¸ª null é”®ï¼Œå¤šä¸ª null å€¼                            |
| ğŸ“Š **ä¸ä¿è¯å…ƒç´ é¡ºåº**      | å­˜å‚¨é¡ºåºä¸å›ºå®šï¼ŒLinkedHashMap ä¾‹å¤–                         |
| âš¡ **å­˜å–æ•ˆç‡é«˜**         | HashMap çš„æŸ¥æ‰¾å’Œå­˜å–æ“ä½œæ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(1)                  |

### 2.3 åº•å±‚æ•°æ®ç»“æ„æ¼”è¿›


| JDK ç‰ˆæœ¬  | æ•°æ®ç»“æ„                              | ä¸»è¦ç‰¹ç‚¹                                             |
|-----------|---------------------------------------|------------------------------------------------------|
| **JDK7 ä»¥å‰** | æ•°ç»„ + é“¾è¡¨ï¼ˆæ‹‰é“¾æ³•ï¼‰              | é€šè¿‡é“¾è¡¨è§£å†³å“ˆå¸Œå†²çªï¼Œä½†æŸ¥è¯¢æ•ˆç‡è¾ƒä½ï¼ˆO(n)ï¼‰         |
| **JDK8 åŠä»¥å** | æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘             | å½“é“¾è¡¨é•¿åº¦ â‰¥ 8 æ—¶ï¼Œè½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ (O(log n)) |

**ğŸ’¡ æ•°æ®ç»“æ„ç¤ºæ„å›¾**
```
HashMap å­˜å‚¨ç»“æ„ï¼š
[0] -> A â†’ B â†’ C
[1] -> null
[2] -> D
[3] -> E â†’ F â†’ G â†’ H â†’ I â†’ J â†’ K â†’ Lï¼ˆçº¢é»‘æ ‘ï¼‰
```

### 2.4 æ ¸å¿ƒå±æ€§é…ç½®


| å±æ€§                  | é»˜è®¤å€¼ | è¯´æ˜                                       |
|-----------------------|--------|---------------------------------------------|
| **åˆå§‹å®¹é‡**           | `16`   | åˆ›å»ºæ—¶æ¡¶æ•°ç»„çš„å¤§å°                          |
| **è´Ÿè½½å› å­ (loadFactor)** | `0.75` | è¶…è¿‡ `capacity Ã— loadFactor` æ—¶è§¦å‘æ‰©å®¹    |
| **æ ‘åŒ–é˜ˆå€¼ (TREEIFY_THRESHOLD)** | `8` | å½“æŸæ¡¶é“¾è¡¨é•¿åº¦ â‰¥ 8 æ—¶ï¼Œè½¬æ¢ä¸ºçº¢é»‘æ ‘ç»“æ„     |
| **æœ€å°æ ‘åŒ–å®¹é‡ (MIN_TREEIFY_CAPACITY)** | `64` | å°äºè¯¥å€¼æ—¶ä¸ä¼šæ ‘åŒ–ï¼Œè€Œæ˜¯å…ˆæ‰©å®¹ |

### 2.5 Hashå†²çªä¸æ ‘åŒ–æœºåˆ¶


```
ğŸ”¸ Hashå†²çªå¤„ç†ç­–ç•¥

åŒä¸€ä¸ªæ¡¶å†…æœ‰å¤šä¸ªå…ƒç´  (hash å†²çª):
â”œâ”€ åˆå§‹çŠ¶æ€ï¼šä½¿ç”¨é“¾è¡¨å­˜å‚¨
â”œâ”€ é“¾è¡¨é•¿åº¦ â‰¥ 8 ä¸”å®¹é‡ â‰¥ 64ï¼šé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘
â””â”€ å¦‚æœå®¹é‡ < 64ï¼šä¼˜å…ˆæ‰©å®¹ï¼Œä¸ç«‹å³æ ‘åŒ–

ğŸ”¸ æ ‘åŒ–æ¡ä»¶åˆ¤æ–­
if (æŸæ¡¶å†…å…ƒç´  â‰¥ 8) {
    if (table.length â‰¥ 64) {
        è½¬æ¢ä¸ºçº¢é»‘æ ‘  // æå‡æŸ¥è¯¢æ•ˆç‡
    } else {
        resize()     // ä¼˜å…ˆæ‰©å®¹
    }
}
```

### 2.6 æ‰©å®¹æœºåˆ¶è¯¦è§£


**âš™ï¸ æ‰©å®¹è§¦å‘æ—¶æœº**
```
æ‰©å®¹è§¦å‘æ¡ä»¶ï¼š
â”œâ”€ å…ƒç´ æ•°é‡ > thresholdï¼ˆthreshold = capacity Ã— loadFactorï¼‰
â”œâ”€ é“¾è¡¨é•¿åº¦ â‰¥ 8 ä¸”æ•°ç»„é•¿åº¦ < 64ï¼ˆä¼˜å…ˆæ‰©å®¹ï¼Œä¸ç«‹åˆ»æ ‘åŒ–ï¼‰
```

**ğŸ”„ resize()æ‰©å®¹æµç¨‹**
```
resize() æ‰©å®¹è¿‡ç¨‹ï¼š
â”œâ”€ 1. åˆ›å»ºæ–°æ•°ç»„ï¼šnewTable.length = oldTable.length Ã— 2
â”œâ”€ 2. éå†åŸæ•°ç»„ oldTable
â”‚   â””â”€ å¯¹æ¯ä¸ªéç©ºæ¡¶ bucketï¼š
â”‚       â”œâ”€ å¦‚æœæ˜¯é“¾è¡¨ï¼š
â”‚       â”‚   â””â”€ æ‹†åˆ†ä¸ºä¸¤ä¸ªé“¾è¡¨ï¼šlowListã€highList
â”‚       â”œâ”€ å¦‚æœæ˜¯çº¢é»‘æ ‘ï¼š
â”‚       â”‚   â””â”€ æ‹†åˆ†ä¸ºä¸¤ä¸ªçº¢é»‘æ ‘ï¼ˆå¯èƒ½é™çº§ä¸ºé“¾è¡¨ï¼‰
â”‚       â””â”€ é‡æ–°æ’å…¥åˆ° newTable ä¸­çš„æ–°ä½ç½®
â””â”€ 3. æ›´æ–° table æŒ‡å‘æ–°æ•°ç»„

ğŸ”¸ è¿ç§»ä¼˜åŒ–ï¼ˆå› æ•°ç»„å®¹é‡æ˜¯ 2 çš„å¹‚ï¼‰ï¼š
â”œâ”€ å‡è®¾åŸæ•°ç»„é•¿åº¦ä¸º Nï¼Œæ‰©å®¹åä¸º 2N
â”œâ”€ å¯¹æ¯ä¸ªå…ƒç´  nodeï¼š
â”‚   â”œâ”€ hash & (N - 1) == åŸç´¢å¼•
â”‚   â”œâ”€ hash & (2N - 1) == ?
â”‚   â”‚   â”œâ”€ å¦‚æœæ˜¯ 0ï¼Œåˆ™ node ä»åœ¨åŸç´¢å¼•
â”‚   â”‚   â””â”€ å¦‚æœæ˜¯ 1ï¼Œåˆ™ node æ–°ç´¢å¼• = åŸç´¢å¼• + N
â””â”€ æ— éœ€é‡æ–°è®¡ç®—å®Œæ•´ hashï¼Œåªéœ€ç®€å•åˆ¤æ–­æ˜¯å¦"+N"
```

### 2.7 HashMapå­˜å‚¨å’ŒæŸ¥æ‰¾æµç¨‹


**ğŸ“¥ put()å­˜å‚¨æµç¨‹**
```
put(key, value) æ’å…¥æµç¨‹ï¼š
â”œâ”€ 1. è®¡ç®— key çš„ hash å€¼
â”œâ”€ 2. é€šè¿‡ hash å®šä½æ•°ç»„ä¸‹æ ‡ index
â”œâ”€ 3. if table[index] == null:
â”‚   â””â”€ ç›´æ¥æ’å…¥æ–°çš„èŠ‚ç‚¹
â”œâ”€ 4. else:
â”‚   â”œâ”€ éå†è¯¥ä½ç½®ä¸Šçš„é“¾è¡¨æˆ–çº¢é»‘æ ‘
â”‚   â”œâ”€ if å­˜åœ¨ key ç›¸åŒ:
â”‚   â”‚   â””â”€ è¦†ç›–åŸæœ‰ value
â”‚   â””â”€ else:
â”‚       â”œâ”€ è¿½åŠ æ–°èŠ‚ç‚¹åˆ°é“¾è¡¨/æ ‘ä¸­
â”‚       â””â”€ if é“¾è¡¨é•¿åº¦ â‰¥ TREEIFY_THRESHOLD:
â”‚           â”œâ”€ if table.length â‰¥ MIN_TREEIFY_CAPACITY:
â”‚           â”‚   â””â”€ è½¬ä¸ºçº¢é»‘æ ‘
â”‚           â””â”€ else:
â”‚               â””â”€ æ‰©å®¹ï¼ˆresizeï¼‰
```

**ğŸ“¤ get()æŸ¥æ‰¾æµç¨‹**
```
get(key) æŸ¥æ‰¾æµç¨‹ï¼š
â”œâ”€ 1. è®¡ç®— key çš„ hash å€¼
â”œâ”€ 2. é€šè¿‡ hash å®šä½æ•°ç»„ä¸‹æ ‡ index
â”œâ”€ 3. ä» table[index] å¼€å§‹æŸ¥æ‰¾
â”‚   â”œâ”€ if æ˜¯é“¾è¡¨:
â”‚   â”‚   â””â”€ ä¾æ¬¡æ¯”è¾ƒèŠ‚ç‚¹çš„ keyï¼Œç›´åˆ°æ‰¾åˆ°æˆ–éå†ç»“æŸ
â”‚   â””â”€ if æ˜¯çº¢é»‘æ ‘:
â”‚       â””â”€ ä½¿ç”¨æ ‘çš„æŸ¥æ‰¾æ–¹å¼æ¯”è¾ƒ key
â””â”€ 4. if æ‰¾åˆ°åŒ¹é… key:
    â””â”€ è¿”å›å¯¹åº”çš„ value
```

### 2.8 HashMapæ ¸å¿ƒæ–¹æ³•


```java
// åˆ›å»º HashMap
HashMap<String, Integer> map = new HashMap<>();

// === 1.1 å¢åˆ æ”¹æŸ¥ ===
map.put("Alice", 95);            // æ·»åŠ é”®å€¼å¯¹
int score = map.get("Alice");    // è·å–å€¼ï¼š95
map.remove("Alice");             // åˆ é™¤é”®å€¼å¯¹
boolean hasKey = map.containsKey("Alice");         // æ£€æŸ¥é”®ï¼šfalse
boolean hasValue = map.containsValue(95);          // æ£€æŸ¥å€¼ï¼šfalse

// === 1.2 å®¹é‡ç›¸å…³ ===
int size = map.size();           // è·å–å¤§å°ï¼š0
boolean empty = map.isEmpty();   // æ˜¯å¦ä¸ºç©ºï¼štrue
map.put("Bob", 85);
map.clear();                     // æ¸…ç©ºæ‰€æœ‰å…ƒç´ 

// === 1.3 åˆ¤æ–­æ˜¯å¦å­˜åœ¨ ===
map.containsKey("A");        // åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨
map.containsValue(100);      // åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ª value

// === 1.4 é›†åˆè§†å›¾ ===
map.put("Alice", 95);
map.put("Bob", 85);
map.put("Charlie", 90);

Set<String> keys = map.keySet();                  // è·å–æ‰€æœ‰é”®
Collection<Integer> values = map.values();        // è·å–æ‰€æœ‰å€¼
Set<Map.Entry<String, Integer>> entries = map.entrySet();  // è·å–æ‰€æœ‰é”®å€¼å¯¹

// éå†é”®
for (String key : keys) {
    System.out.println(key);  // è¾“å‡ºï¼šAlice, Bob, Charlie
}

// éå†å€¼
for (Integer value : values) {
    System.out.println(value);  // è¾“å‡ºï¼š95, 85, 90
}

// éå†é”®å€¼å¯¹
for (Map.Entry<String, Integer> entry : entries) {
    System.out.println(entry.getKey() + ": " + entry.getValue());
    // è¾“å‡ºï¼šAlice: 95, Bob: 85, Charlie: 90
}
```

---

## 3. ğŸ”— LinkedHashMapè¯¦è§£


### 3.1 LinkedHashMapåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
LinkedHashMapï¼šHashMap çš„å­ç±»
ç‰¹ç‚¹ï¼šå…·æœ‰å“ˆå¸Œè¡¨çš„å¿«é€Ÿè®¿é—®èƒ½åŠ›ï¼ŒåŒæ—¶ç»´æŠ¤å…ƒç´ æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåº
åŸç†ï¼šå“ˆå¸Œè¡¨ + åŒå‘é“¾è¡¨çš„ç»“åˆä½“
```

### 3.2 LinkedHashMapæ ¸å¿ƒç‰¹æ€§


| ç‰¹æ€§                       | è¯´æ˜                                                  |
|----------------------------|-------------------------------------------------------|
| ğŸ“‹ **éå†é¡ºåºå¯æ§**        | ç»´æŠ¤æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåºï¼Œå¯é€šè¿‡ `accessOrder` æ§åˆ¶     |
| â­• **å…è®¸ null**           | å…è®¸ä¸€ä¸ª null é”®ï¼Œå¤šä¸ª null å€¼                       |
| ğŸ’¾ **å¯ç”¨äº LRU ç¼“å­˜**     | å¯é€šè¿‡ `removeEldestEntry` æ–¹æ³•å®ç°æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜   |
| ğŸ”„ **æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåºç»´æŠ¤** | é»˜è®¤æŒ‰æ’å…¥é¡ºåºï¼Œè®¿é—®é¡ºåºæ¨¡å¼ä¸‹ä¼šè°ƒæ•´æœ€è¿‘è®¿é—®çš„å…ƒç´ ä½ç½® |
| ğŸ—ï¸ **ç»“åˆäº† HashMap å’Œé“¾è¡¨** | å…¼å…· HashMap çš„å¿«é€ŸæŸ¥æ‰¾å’Œé“¾è¡¨çš„æœ‰åºæ€§               |

### 3.3 åº•å±‚ç»“æ„åŸç†


| ç»“æ„      | è¯´æ˜                                      |
|-----------|-------------------------------------------|
| **Hash è¡¨**  | æä¾› O(1) çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œç»“æ„ä¸ HashMap ç›¸åŒ |
| **åŒå‘é“¾è¡¨** | é¢å¤–ç»´æŠ¤æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåº                |

**ğŸ—ï¸ èŠ‚ç‚¹ç»“æ„æ‰©å±•**
```java
// å“ˆå¸Œæ¡¶æ•°ç»„(table)ï¼šç»§æ‰¿è‡ª HashMap
// èŠ‚ç‚¹(Entry)ï¼šæ‰©å±•äº† HashMap.Nodeï¼Œå¢åŠ äº† before å’Œ after æŒ‡é’ˆ
static class Entry<K,V> extends HashMap.Node<K,V> {
    Entry<K,V> before, after;  // åŒå‘é“¾è¡¨çš„å‰åæŒ‡é’ˆ
    Entry(int hash, K key, V value, Node<K,V> next) {
        super(hash, key, value, next);
    }
}
```

### 3.4 LinkedHashMapå¸¸è§åº”ç”¨


**ğŸ“Š æœ‰åºæ•°æ®å­˜å‚¨**
```java
LinkedHashMap<String, Integer> scores = new LinkedHashMap<>();
scores.put("Alice", 95);
scores.put("Bob", 85);
scores.put("Charlie", 90);

// éå†æ—¶ä¼šæŒ‰ç…§æ’å…¥é¡ºåºï¼šAlice, Bob, Charlie
for (Map.Entry<String, Integer> entry : scores.entrySet()) {
    System.out.println(entry.getKey() + ": " + entry.getValue());
}
```

**ğŸ”„ è®¿é—®é¡ºåºæ¨¡å¼**
```java
// è®¿é—®é¡ºåºæ¨¡å¼
LinkedHashMap<String, Integer> map = 
    new LinkedHashMap<>(16, 0.75f, true);
map.put("A", 1);
map.put("B", 2);
map.put("C", 3);

map.get("A");  // è®¿é—® Aï¼ŒA å°†ç§»åˆ°é“¾è¡¨æœ«å°¾

// éå†é¡ºåºï¼šB=2, C=3, A=1
for (Map.Entry<String, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + "=" + entry.getValue());
}
```

**ğŸ’¾ LRUç¼“å­˜å®ç°**
```java
// LRU ç¼“å­˜å®ç° "Least Recently Used" (æœ€è¿‘æœ€å°‘ä½¿ç”¨)
// ä¼˜å…ˆæ·˜æ±°æœ€é•¿æ—¶é—´æœªè¢«è®¿é—®çš„æ•°æ®,æœ€è¿‘è¢«è®¿é—®è¿‡çš„æ•°æ®ä¼šè¢«ä¿ç•™åœ¨ç¼“å­˜ä¸­æ›´é•¿æ—¶é—´
public class LRUCache<K, V> extends LinkedHashMap<K, V> {
    private final int capacity;
    
    public LRUCache(int capacity) {
        super(capacity, 0.75f, true);  // å¼€å¯è®¿é—®é¡ºåºæ¨¡å¼
        this.capacity = capacity;
    }
    
    @Override
    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
        return size() > capacity;  // å½“å¤§å°è¶…è¿‡å®¹é‡æ—¶ç§»é™¤æœ€è€å…ƒç´ 
    }
}
```

### 3.5 LinkedHashMapæ ¸å¿ƒæ–¹æ³•


```java
// === åˆ›å»ºæ–¹æ³• ===
LinkedHashMap<String, Integer> map1 = new LinkedHashMap<>(); // æ’å…¥é¡ºåºï¼ˆé»˜è®¤ï¼‰

// è®¿é—®é¡ºåºï¼ˆLRUç¼“å­˜å®ç°çš„åŸºç¡€ï¼‰
LinkedHashMap<String, Integer> map2 = new LinkedHashMap<>(16, 0.75f, true);

// === åŸºæœ¬æ“ä½œæ–¹æ³•ï¼ˆç»§æ‰¿è‡ªHashMapï¼‰ ===
LinkedHashMap<String, Integer> map = new LinkedHashMap<>();

// æ·»åŠ å…ƒç´ 
map.put("A", 1);                  // æ·»åŠ é”®å€¼å¯¹
map.putIfAbsent("B", 2);          // é”®ä¸å­˜åœ¨æ—¶æ‰æ·»åŠ 

// è·å–å…ƒç´ 
Integer value = map.get("A");     // è·å–å€¼ï¼š1
value = map.getOrDefault("C", 0); // é”®ä¸å­˜åœ¨è¿”å›é»˜è®¤å€¼ï¼š0

// åˆ é™¤å…ƒç´ 
map.remove("A");                  // åˆ é™¤æŒ‡å®šé”®å€¼å¯¹

// åˆ¤æ–­åŒ…å«
boolean hasKey = map.containsKey("B");     // æ˜¯å¦åŒ…å«é”®ï¼štrue
boolean hasValue = map.containsValue(2);   // æ˜¯å¦åŒ…å«å€¼ï¼štrue

// å¤§å°æ“ä½œ
int size = map.size();            // è·å–å¤§å°ï¼š1
boolean empty = map.isEmpty();    // æ˜¯å¦ä¸ºç©ºï¼šfalse
map.clear();                      // æ¸…ç©ºæ‰€æœ‰å…ƒç´ 

// === éå†æ–¹æ³•ï¼ˆä¿è¯æŒ‰æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåºï¼‰ ===
LinkedHashMap<String, Integer> map = new LinkedHashMap<>();
map.put("A", 1);
map.put("B", 2);
map.put("C", 3);

// 1. éå†é”®å€¼å¯¹ï¼ˆä¿è¯é¡ºåºï¼‰
for (Map.Entry<String, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + ": " + entry.getValue());
}

// 2. éå†é”®ï¼ˆä¿è¯é¡ºåºï¼‰
for (String key : map.keySet()) {
    System.out.println(key);
}

// 3. éå†å€¼ï¼ˆä¿è¯é¡ºåºï¼‰
for (Integer value : map.values()) {
    System.out.println(value);
}

// 4. Lambdaéå†ï¼ˆJava 8+ï¼Œä¿è¯é¡ºåºï¼‰
map.forEach((k, v) -> System.out.println(k + ": " + v));
```

---

## 4. ğŸ“œ Hashtableè¯¦è§£


### 4.1 HashtableåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
Hashtableï¼šJava æ—©æœŸæä¾›çš„çº¿ç¨‹å®‰å…¨çš„ key-value æ˜ å°„è¡¨å®ç°ç±»
ç‰¹ç‚¹ï¼šå’Œ HashMap ç±»ä¼¼ï¼Œéƒ½æ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œä½†æ–¹æ³•åŒæ­¥ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
å†å²ï¼šæ—©äº Java é›†åˆæ¡†æ¶ï¼ˆJava 1.2 ä¹‹å‰ï¼‰
```

### 4.2 Hashtableæ ¸å¿ƒç‰¹æ€§


| ç‰¹æ€§                      | è¯´æ˜                                      |
|---------------------------|-------------------------------------------|
| ğŸš« **Key å’Œ Value ä¸èƒ½ä¸º null** | Hashtable ä¸å…è®¸ null é”®å’Œ null å€¼       |
| ğŸ”’ **æ–¹æ³•åŒæ­¥ (synchronized)** | ç»å¤§å¤šæ•°æ–¹æ³•éƒ½ä½¿ç”¨ synchronizedï¼Œå¯¼è‡´æ€§èƒ½è¾ƒä½ |
| ğŸ“š **é—ç•™ç±»**             | æ—©äº Java é›†åˆæ¡†æ¶ï¼ˆJava 1.2 ä¹‹å‰ï¼‰      |

> **âš ï¸ æ³¨æ„**ï¼šHashtable ç”±äºæ€§èƒ½é—®é¢˜ï¼Œç°åœ¨å¾ˆå°‘ä½¿ç”¨ï¼Œæ¨èä½¿ç”¨ ConcurrentHashMap æ›¿ä»£

### 4.3 Hashtableæ ¸å¿ƒæ–¹æ³•


```java
Hashtable<String, Integer> table = new Hashtable<>();

table.put("A", 100);             // æ·»åŠ æˆ–æ›´æ–°
table.get("A");                  // è·å– value
table.remove("A");               // åˆ é™¤ key
table.containsKey("A");          // æ˜¯å¦å­˜åœ¨ key
table.containsValue(100);        // æ˜¯å¦å­˜åœ¨å€¼
table.size();                    // è·å–å¤§å°
table.isEmpty();                 // æ˜¯å¦ä¸ºç©º
table.clear();                   // æ¸…ç©º

// éå†æ–¹å¼
for (Map.Entry<String, Integer> entry : table.entrySet()) {
    System.out.println(entry.getKey() + " â†’ " + entry.getValue());
}
```

---

## 5. ğŸŒ³ TreeMapè¯¦è§£


### 5.1 TreeMapåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
TreeMapï¼šJava é›†åˆæ¡†æ¶ä¸­çš„ä¸€ä¸ªå®ç°ç±»
åŸç†ï¼šåŸºäºçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼‰å®ç°
ç‰¹ç‚¹ï¼šè‡ªåŠ¨æ’åºï¼Œä¿è¯ O(log n) çš„æ—¶é—´å¤æ‚åº¦
```

### 5.2 TreeMapæ ¸å¿ƒç‰¹æ€§


| ç‰¹æ€§                          | è¯´æ˜                                             |
|-------------------------------|--------------------------------------------------|
| ğŸ“Š **æœ‰åºæ€§**                 | æŒ‰é”®çš„è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰ Comparator æ’åº           |
| ğŸš« **ä¸å…è®¸ null é”®**         | ä¸èƒ½æ’å…¥ null é”®ï¼Œä½†å…è®¸ null å€¼                 |
| â±ï¸ **æ—¶é—´å¤æ‚åº¦**             | ä¿è¯ O(log n) çš„æ—¶é—´å¤æ‚åº¦ï¼ˆåŸºäºçº¢é»‘æ ‘ï¼‰         |
| ğŸ”„ **è‡ªåŠ¨æ’åº**               | å…ƒç´ æŒ‰é”®çš„é¡ºåºæ’åˆ—ï¼Œæ— éœ€é¢å¤–å¤„ç†                 |
| ğŸŒ³ **æ•°æ®ç»“æ„**               | çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼‰                       |

### 5.3 æ’åºæœºåˆ¶


**âš–ï¸ æ’åºç±»å‹é€‰æ‹©**ï¼ˆäºŒè€…åªèƒ½é€‰å…¶ä¸€ï¼Œä¸å¯åŒæ—¶ä½¿ç”¨ï¼‰

| æ’åºç±»å‹       | æ¡ä»¶                                      |
|---------------|-------------------------------------------|
| **è‡ªç„¶æ’åº**   | `key` å®ç° `Comparable<K>` æ¥å£          |
| **è‡ªå®šä¹‰æ’åºå™¨** | åˆ›å»º `TreeMap` æ—¶ä¼ å…¥ `Comparator<K>`   |

**ğŸ”¢ è‡ªç„¶æ’åºç¤ºä¾‹**
```java
// ä½¿ç”¨è‡ªç„¶é¡ºåº
// å½“æ²¡æœ‰æä¾›æ¯”è¾ƒå™¨æ—¶ï¼ŒTreeMap è¦æ±‚é”®å®ç° Comparable æ¥å£ï¼Œä½¿ç”¨ compareTo æ–¹æ³•è¿›è¡Œæ¯”è¾ƒæ’åºã€‚
TreeMap<String, Integer> map = new TreeMap<>();
map.put("apple", 1);
map.put("banana", 2);
map.put("orange", 3);
// æŒ‰ç…§å­—æ¯é¡ºåºæ’åºï¼šapple, banana, orange
```

**ğŸ¯ è‡ªå®šä¹‰æ’åºç¤ºä¾‹**
```java
// ä½¿ç”¨æ¯”è¾ƒå™¨ï¼ˆComparatorï¼‰
// å¯ä»¥åœ¨æ„é€  TreeMap æ—¶æä¾›ä¸€ä¸ª Comparator å¯¹è±¡ï¼Œè‡ªå®šä¹‰æ’åºé€»è¾‘
// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼ˆæŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åºï¼‰
TreeMap<String, Integer> map = new TreeMap<>((s1, s2) -> s1.length() - s2.length());
map.put("apple", 1);
map.put("banana", 2);
map.put("kiwi", 3);
// æŒ‰ç…§å­—ç¬¦ä¸²é•¿åº¦æ’åºï¼škiwi, apple, banana
```

### 5.4 TreeMapæ ¸å¿ƒæ–¹æ³•


```java
// === åˆ›å»ºæ–¹æ³• ===
// ä½¿ç”¨è‡ªç„¶é¡ºåº
TreeMap<String, Integer> map1 = new TreeMap<>();

// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨
TreeMap<String, Integer> map2 = new TreeMap<>((a, b) -> b.compareTo(a));  // é™åº

// === åŸºæœ¬æ“ä½œæ–¹æ³• ===
TreeMap<String, Integer> map = new TreeMap<>();

// æ·»åŠ å…ƒç´ 
map.put("Apple", 10);               // æ·»åŠ é”®å€¼å¯¹
map.putIfAbsent("Banana", 5);       // é”®ä¸å­˜åœ¨æ—¶æ‰æ·»åŠ 

// è·å–å…ƒç´ 
Integer count = map.get("Apple");   // è·å–å€¼ï¼š10
count = map.getOrDefault("Cherry", 0);  // é”®ä¸å­˜åœ¨è¿”å›é»˜è®¤å€¼ï¼š0

// åˆ é™¤å…ƒç´ 
map.remove("Apple");                // åˆ é™¤æŒ‡å®šé”®å€¼å¯¹

// åˆ¤æ–­åŒ…å«
boolean hasKey = map.containsKey("Banana");      // æ˜¯å¦åŒ…å«é”®ï¼štrue
boolean hasValue = map.containsValue(5);         // æ˜¯å¦åŒ…å«å€¼ï¼štrue

// å¤§å°æ“ä½œ
int size = map.size();              // è·å–å¤§å°
boolean empty = map.isEmpty();      // æ˜¯å¦ä¸ºç©º
map.clear();                        // æ¸…ç©ºæ‰€æœ‰å…ƒç´ 

// === å¯¼èˆªæ–¹æ³•ï¼ˆTreeMap ç‰¹æœ‰ï¼‰ ===
TreeMap<Integer, String> map = new TreeMap<>();
map.put(10, "Ten");
map.put(20, "Twenty");
map.put(30, "Thirty");
map.put(40, "Forty");

// è·å–é”®
Integer firstKey = map.firstKey();           // æœ€å°é”®ï¼š10
Integer lastKey = map.lastKey();             // æœ€å¤§é”®ï¼š40
Integer lowerKey = map.lowerKey(25);         // ä¸¥æ ¼å°äº25çš„æœ€å¤§é”®ï¼š20
Integer floorKey = map.floorKey(20);         // å°äºç­‰äº20çš„æœ€å¤§é”®ï¼š20
Integer ceilingKey = map.ceilingKey(25);     // å¤§äºç­‰äº25çš„æœ€å°é”®ï¼š30
Integer higherKey = map.higherKey(30);       // ä¸¥æ ¼å¤§äº30çš„æœ€å°é”®ï¼š40

// è·å–é”®å€¼å¯¹
Map.Entry<Integer, String> firstEntry = map.firstEntry();      // æœ€å°é”®å€¼å¯¹ï¼š10=Ten
Map.Entry<Integer, String> lastEntry = map.lastEntry();        // æœ€å¤§é”®å€¼å¯¹ï¼š40=Forty
Map.Entry<Integer, String> floorEntry = map.floorEntry(25);    // â‰¤25çš„æœ€å¤§é”®å€¼å¯¹ï¼š20=Twenty
Map.Entry<Integer, String> ceilingEntry = map.ceilingEntry(25); // â‰¥25çš„æœ€å°é”®å€¼å¯¹ï¼š30=Thirty

// ç§»é™¤å¹¶è¿”å›
Map.Entry<Integer, String> pollFirst = map.pollFirstEntry();   // ç§»é™¤å¹¶è¿”å›æœ€å°é”®å€¼å¯¹
Map.Entry<Integer, String> pollLast = map.pollLastEntry();     // ç§»é™¤å¹¶è¿”å›æœ€å¤§é”®å€¼å¯¹

// === éå†æ–¹å¼ ===
TreeMap<String, Integer> map = new TreeMap<>();
map.put("Apple", 10);
map.put("Banana", 5);
map.put("Cherry", 8);

// 1. éå†é”®å€¼å¯¹ï¼ˆå‡åºï¼‰
for (Map.Entry<String, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + ": " + entry.getValue());
}

// 2. éå†é”®ï¼ˆå‡åºï¼‰
for (String key : map.keySet()) {
    System.out.println(key + ": " + map.get(key));
}

// 3. éå†å€¼ï¼ˆå¯¹åº”é”®çš„å‡åºï¼‰
for (Integer value : map.values()) {
    System.out.println(value);
}

// 4. Lambdaéå†ï¼ˆJava 8+ï¼‰
map.forEach((key, value) -> System.out.println(key + ": " + value));
```

---

## 6. âš¡ ConcurrentHashMapè¯¦è§£


### 6.1 ConcurrentHashMapåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
ConcurrentHashMapï¼šJava æä¾›çš„çº¿ç¨‹å®‰å…¨ã€é«˜æ€§èƒ½çš„å“ˆå¸Œè¡¨å®ç°
ä½ç½®ï¼šjava.util.concurrent åŒ…ä¸­
ç‰¹ç‚¹ï¼šä¸“ä¸ºé«˜å¹¶å‘è®¾è®¡ï¼Œæ›¿ä»£ Hashtable çš„æœ€ä½³é€‰æ‹©
```

### 6.2 ConcurrentHashMapæ ¸å¿ƒç‰¹æ€§


| ç‰¹æ€§                       | è¯´æ˜                                       |
|----------------------------|-------------------------------------------|
| ğŸ”’ **çº¿ç¨‹å®‰å…¨**            | é‡‡ç”¨åˆ†æ®µé”æˆ– CAS æ“ä½œï¼Œæ”¯æŒé«˜å¹¶å‘è¯»å†™      |
| ğŸš« **ä¸å…è®¸ null é”®å’Œå€¼**  | ä¸èƒ½æ’å…¥ null é”®ï¼Œä¹Ÿä¸èƒ½å­˜å‚¨ null å€¼       |
| ğŸ“– **éé˜»å¡è¯»**            | è¯»æ“ä½œä¸ä¼šé˜»å¡å†™ï¼Œä¿è¯é«˜æ•ˆçš„å¹¶å‘è®¿é—®       |
| âš™ï¸ **åˆ†æ®µé” / CAS å†™å…¥**   | é‡‡ç”¨åˆ†æ®µé”å‡å°‘é”ç²’åº¦ï¼Œæˆ–ä½¿ç”¨ CAS è¿›è¡Œé«˜æ•ˆå†™å…¥ |
| ğŸ—ï¸ **åº•å±‚ç»“æ„**           | é‡‡ç”¨å“ˆå¸Œè¡¨ç»“æ„ï¼Œæ”¯æŒè‡ªåŠ¨æ‰©å®¹               |

### 6.3 åº•å±‚ç»“æ„åŸç†ï¼ˆJDK 1.8ï¼‰


| ç»“æ„éƒ¨åˆ†           | æè¿°                                                       |
|--------------------|-------------------------------------------------------------|
| **æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘** | ç±»ä¼¼ HashMapï¼Œå¤„ç†å†²çªæ—¶ä½¿ç”¨é“¾è¡¨ï¼Œå½“é“¾é•¿ â‰¥ 8 ä¸”å®¹é‡ â‰¥ 64 è½¬ä¸ºçº¢é»‘æ ‘ |
| **å¹¶å‘æ§åˆ¶**       | é‡‡ç”¨åˆ†æ®µé”å’Œ CAS (compare-and-swap) æœºåˆ¶ï¼Œæé«˜å¹¶å‘æ€§èƒ½     |
| **æ‰©å®¹æœºåˆ¶**       | å¤šçº¿ç¨‹åä½œè¿ç§»ï¼ˆtransferï¼‰ï¼Œé‡‡ç”¨ Node â†’ ForwardingNode æ ‡è¯† |

### 6.4 çº¿ç¨‹å®‰å…¨æœºåˆ¶æ¼”è¿›


| JDK ç‰ˆæœ¬  | é”æœºåˆ¶                      | ä¼˜åŒ–ç‚¹                                    |
|-----------|-----------------------------|--------------------------------------------|
| **JDK 1.7** | `Segment[]` åˆ†æ®µé”ï¼Œæ¯ä¸ª `Segment` ç‹¬ç«‹åŠ é” | é”ç²’åº¦è¾ƒç²—ï¼Œå½±å“é«˜å¹¶å‘åœºæ™¯ |
| **JDK 1.8** | å»æ‰ `Segment`ï¼Œä½¿ç”¨ `synchronized` + CAS æ§åˆ¶ | é”ç²’åº¦ä¼˜åŒ–ï¼Œæå‡å¹¶å‘æ€§èƒ½  |

**ğŸ”§ æ“ä½œä¼˜åŒ–ç­–ç•¥**

| æ“ä½œç±»å‹ | ä¼˜åŒ–æ–¹æ¡ˆ                     |
|----------|------------------------------|
| **è¯»**   | æ— é”ï¼ˆ`volatile` ä¿è¯å¯è§æ€§ï¼‰ |
| **å†™**   | `CAS` + `synchronized` æ§åˆ¶   |
| **æ‰©å®¹** | å¤šçº¿ç¨‹åä½œå¹¶è¡Œè¿ç§»æ•°æ®       |

---

## 7. ğŸ“Š Mapå®ç°ç±»å¯¹æ¯”


### 7.1 æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”


| ç‰¹æ€§ / å®ç°ç±»           | HashMap       | LinkedHashMap   | Hashtable     | TreeMap      | ConcurrentHashMap |
|-------------------------|---------------|-----------------|---------------|--------------|-------------------|
| **é”®æ˜¯å¦å”¯ä¸€**          | âœ… å”¯ä¸€       | âœ… å”¯ä¸€         | âœ… å”¯ä¸€       | âœ… å”¯ä¸€      | âœ… å”¯ä¸€           |
| **å€¼æ˜¯å¦å…è®¸é‡å¤**      | âœ… å…è®¸       | âœ… å…è®¸         | âœ… å…è®¸       | âœ… å…è®¸      | âœ… å…è®¸           |
| **é”®æ˜¯å¦å…è®¸ null**     | âœ… å…è®¸ 1 ä¸ª  | âœ… å…è®¸ 1 ä¸ª    | âŒ ä¸å…è®¸     | âŒ ä¸å…è®¸    | âŒ ä¸å…è®¸         |
| **å€¼æ˜¯å¦å…è®¸ null**     | âœ… å…è®¸å¤šä¸ª   | âœ… å…è®¸å¤šä¸ª     | âŒ ä¸å…è®¸     | âœ… å…è®¸å¤šä¸ª  | âŒ ä¸å…è®¸         |
| **å…ƒç´ æ˜¯å¦æœ‰åº**        | âŒ æ— åº       | âœ… æŒ‰æ’å…¥é¡ºåº   | âŒ æ— åº       | âœ… æŒ‰ key å‡åº | âŒ æ— åº         |
| **çº¿ç¨‹å®‰å…¨æ€§**          | âŒ éçº¿ç¨‹å®‰å…¨ | âŒ éçº¿ç¨‹å®‰å…¨   | âœ… çº¿ç¨‹å®‰å…¨   | âŒ éçº¿ç¨‹å®‰å…¨ | âœ… çº¿ç¨‹å®‰å…¨       |
| **åº•å±‚æ•°æ®ç»“æ„**        | æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ | æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘+åŒå‘é“¾è¡¨ | æ•°ç»„+é“¾è¡¨ | çº¢é»‘æ ‘ | æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ |
| **æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦**      | O(1)          | O(1)            | O(1)          | O(log n)     | O(1)              |
| **é€‚ç”¨åœºæ™¯**            | é€šç”¨åœºæ™¯      | éœ€è¦ä¿æŒé¡ºåº    | å·²è¿‡æ—¶        | éœ€è¦æ’åº     | é«˜å¹¶å‘åœºæ™¯        |

### 7.2 æ€§èƒ½ç‰¹ç‚¹å¯¹æ¯”


```
ğŸ”¸ HashMap
ä¼˜ç‚¹ï¼šæŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œå†…å­˜å ç”¨ç›¸å¯¹è¾ƒå°
ç¼ºç‚¹ï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼Œä¸ä¿è¯é¡ºåº
é€‚ç”¨ï¼šå•çº¿ç¨‹ç¯å¢ƒï¼Œå¯¹é¡ºåºæ— è¦æ±‚

ğŸ”¸ LinkedHashMap  
ä¼˜ç‚¹ï¼šä¿æŒæ’å…¥é¡ºåºï¼Œå¯å®ç°LRUç¼“å­˜
ç¼ºç‚¹ï¼šé¢å¤–å†…å­˜å¼€é”€ï¼Œçº¿ç¨‹ä¸å®‰å…¨
é€‚ç”¨ï¼šéœ€è¦ä¿æŒé¡ºåºçš„åœºæ™¯

ğŸ”¸ Hashtable
ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨
ç¼ºç‚¹ï¼šæ€§èƒ½å·®ï¼Œå·²è¿‡æ—¶ï¼Œä¸å…è®¸null
é€‚ç”¨ï¼šåŸºæœ¬ä¸å»ºè®®ä½¿ç”¨

ğŸ”¸ TreeMap
ä¼˜ç‚¹ï¼šè‡ªåŠ¨æ’åºï¼Œæœ‰ä¸°å¯Œçš„å¯¼èˆªæ–¹æ³•
ç¼ºç‚¹ï¼šæ€§èƒ½ç›¸å¯¹è¾ƒä½ O(log n)
é€‚ç”¨ï¼šéœ€è¦æ’åºçš„åœºæ™¯

ğŸ”¸ ConcurrentHashMap
ä¼˜ç‚¹ï¼šé«˜å¹¶å‘æ€§èƒ½å¥½ï¼Œçº¿ç¨‹å®‰å…¨
ç¼ºç‚¹ï¼šä¸å…è®¸nullå€¼ï¼Œå†…å­˜å¼€é”€ç¨å¤§
é€‚ç”¨ï¼šå¤šçº¿ç¨‹é«˜å¹¶å‘ç¯å¢ƒ
```

### 7.3 é€‰æ‹©å»ºè®®


```
é€‰æ‹©åŸåˆ™ï¼š

å•çº¿ç¨‹ç¯å¢ƒï¼š
â”œâ”€ æ— é¡ºåºè¦æ±‚ â†’ HashMap
â”œâ”€ éœ€è¦æ’å…¥é¡ºåº â†’ LinkedHashMap  
â””â”€ éœ€è¦æ’åº â†’ TreeMap

å¤šçº¿ç¨‹ç¯å¢ƒï¼š
â”œâ”€ é«˜å¹¶å‘ â†’ ConcurrentHashMap
â””â”€ é¿å…ä½¿ç”¨ â†’ Hashtableï¼ˆå·²è¿‡æ—¶ï¼‰

ç‰¹æ®Šéœ€æ±‚ï¼š
â”œâ”€ LRUç¼“å­˜ â†’ LinkedHashMap + accessOrder=true
â”œâ”€ èŒƒå›´æŸ¥è¯¢ â†’ TreeMap
â””â”€ é«˜æ€§èƒ½æŸ¥æ‰¾ â†’ HashMap/ConcurrentHashMap
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Mapæœ¬è´¨ï¼šé”®å€¼å¯¹å­˜å‚¨æ¥å£ï¼Œæä¾›é«˜æ•ˆçš„æŸ¥æ‰¾å’Œå­˜å‚¨æœºåˆ¶
ğŸ”¸ HashMapåŸç†ï¼šæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ŒO(1)æŸ¥æ‰¾æ•ˆç‡ï¼ŒJDK8ä¼˜åŒ–
ğŸ”¸ LinkedHashMapç‰¹ç‚¹ï¼šHashMapåŸºç¡€ä¸Šå¢åŠ åŒå‘é“¾è¡¨ç»´æŠ¤é¡ºåº
ğŸ”¸ TreeMapæ’åºï¼šåŸºäºçº¢é»‘æ ‘è‡ªåŠ¨æ’åºï¼ŒO(log n)æ—¶é—´å¤æ‚åº¦
ğŸ”¸ ConcurrentHashMapï¼šé«˜å¹¶å‘çº¿ç¨‹å®‰å…¨ï¼Œåˆ†æ®µé”+CASä¼˜åŒ–
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ HashMapçš„æ ¸å¿ƒä¼˜åŒ–**
```
JDK8ä¼˜åŒ–ç­–ç•¥ï¼š
- é“¾è¡¨è½¬çº¢é»‘æ ‘ï¼šé“¾é•¿â‰¥8ä¸”å®¹é‡â‰¥64æ—¶è½¬æ¢
- æ‰©å®¹ä¼˜åŒ–ï¼šåˆ©ç”¨2çš„å¹‚æ¬¡æ–¹ç‰¹æ€§å¿«é€Ÿå®šä½
- Hashç®—æ³•ä¼˜åŒ–ï¼šå‡å°‘å†²çªï¼Œæå‡åˆ†å¸ƒå‡åŒ€æ€§
```

**ğŸ”¹ çº¿ç¨‹å®‰å…¨çš„é€‰æ‹©**
```
Hashtable vs ConcurrentHashMapï¼š
- Hashtableï¼šæ–¹æ³•çº§synchronizedï¼Œæ€§èƒ½å·®
- ConcurrentHashMapï¼šåˆ†æ®µé”+CASï¼Œæ€§èƒ½ä¼˜å¼‚
- æ¨èï¼šé«˜å¹¶å‘åœºæ™¯ä½¿ç”¨ConcurrentHashMap
```

**ğŸ”¹ æœ‰åºæ€§çš„å®ç°**
```
LinkedHashMapï¼šåŒå‘é“¾è¡¨ç»´æŠ¤æ’å…¥é¡ºåº
TreeMapï¼šçº¢é»‘æ ‘ç»´æŠ¤é”®çš„æ’åº
HashMapï¼šæ— åºï¼Œä½†æ€§èƒ½æœ€é«˜
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ ä½¿ç”¨åœºæ™¯é€‰æ‹©**
```
HashMapï¼š
âœ… å•çº¿ç¨‹ç¯å¢ƒçš„é€šç”¨é”®å€¼å­˜å‚¨
âœ… å¯¹æ€§èƒ½è¦æ±‚é«˜ï¼Œä¸éœ€è¦é¡ºåº
âœ… ç¼“å­˜å®ç°çš„åº•å±‚å­˜å‚¨

LinkedHashMapï¼š
âœ… éœ€è¦ä¿æŒæ’å…¥é¡ºåºçš„åœºæ™¯
âœ… LRUç¼“å­˜çš„å®ç°
âœ… é…ç½®æ–‡ä»¶çš„æœ‰åºå­˜å‚¨

TreeMapï¼š
âœ… éœ€è¦æ’åºçš„é”®å€¼å­˜å‚¨
âœ… èŒƒå›´æŸ¥è¯¢éœ€æ±‚
âœ… ç»Ÿè®¡å’Œåˆ†æåœºæ™¯

ConcurrentHashMapï¼š
âœ… å¤šçº¿ç¨‹é«˜å¹¶å‘ç¯å¢ƒ
âœ… åˆ†å¸ƒå¼ç¼“å­˜
âœ… å…±äº«æ•°æ®å­˜å‚¨
```

**âš ï¸ æ³¨æ„äº‹é¡¹**
```
æ€§èƒ½è€ƒè™‘ï¼š
- HashMap > LinkedHashMap > ConcurrentHashMap > TreeMap
- æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ï¼Œä¸è¦è¿‡åº¦è®¾è®¡

nullå€¼å¤„ç†ï¼š
- HashMap/LinkedHashMap/TreeMapï¼šå…è®¸nullå€¼
- Hashtable/ConcurrentHashMapï¼šä¸å…è®¸null

çº¿ç¨‹å®‰å…¨ï¼š
- å•çº¿ç¨‹ï¼šHashMap/LinkedHashMap/TreeMap
- å¤šçº¿ç¨‹ï¼šConcurrentHashMap
- é¿å…ä½¿ç”¨ï¼šHashtableï¼ˆå·²è¿‡æ—¶ï¼‰
```

### 8.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®


```
HashMapä¼˜åŒ–ï¼š
ğŸ”¸ åˆç†è®¾ç½®åˆå§‹å®¹é‡ï¼Œé¿å…é¢‘ç¹æ‰©å®¹
ğŸ”¸ é€‰æ‹©åˆé€‚çš„è´Ÿè½½å› å­ï¼ˆé»˜è®¤0.75ï¼‰
ğŸ”¸ é‡å†™equalså’ŒhashCodeæ–¹æ³•ï¼Œå‡å°‘å†²çª

ConcurrentHashMapä¼˜åŒ–ï¼š
ğŸ”¸ é¿å…çƒ­ç‚¹æ•°æ®é›†ä¸­ï¼Œåˆ†æ•£è®¿é—®
ğŸ”¸ åˆç†ä½¿ç”¨æ‰¹é‡æ“ä½œæ–¹æ³•
ğŸ”¸ æ³¨æ„CASå¤±è´¥é‡è¯•çš„å¼€é”€

TreeMapä¼˜åŒ–ï¼š
ğŸ”¸ å®ç°é«˜æ•ˆçš„Comparableæˆ–Comparator
ğŸ”¸ é¿å…é¢‘ç¹çš„å¢åˆ æ“ä½œ
ğŸ”¸ åˆ©ç”¨å¯¼èˆªæ–¹æ³•æå‡æŸ¥è¯¢æ•ˆç‡
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- HashMapå¿«æ— åºï¼ŒLinkedHashä¿é¡ºåº
- TreeMapèƒ½æ’åºï¼ŒConcurrentHashä¿å¹¶å‘
- nullå€¼çœ‹å®ç°ï¼Œçº¿ç¨‹å®‰å…¨è¦åˆ†æ¸…
- åœºæ™¯é€‰å®ç°ï¼Œæ€§èƒ½é¡ºåºè¦ç‰¢è®°