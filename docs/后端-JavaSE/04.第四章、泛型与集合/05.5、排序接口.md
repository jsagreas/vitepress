---
title: 5ã€æ’åºæ¥å£
---
## ğŸ“š ç›®å½•

1. [Comparableæ¥å£è¯¦è§£](#1-Comparableæ¥å£è¯¦è§£)
2. [Comparatoræ¥å£è¯¦è§£](#2-Comparatoræ¥å£è¯¦è§£)
3. [ArrayListæ’åº](#3-ArrayListæ’åº)
4. [LinkedListæ’åº](#4-LinkedListæ’åº)
5. [TreeSetæ’åº](#5-TreeSetæ’åº)
6. [TreeMapæ’åº](#6-TreeMapæ’åº)
7. [PriorityQueueæ’åº](#7-PriorityQueueæ’åº)
8. [Arrays.sort()æ’åº](#8-Arrays.sort()æ’åº)
9. [Collections.sort()æ’åº](#9-Collections.sort()æ’åº)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”¢ Comparableæ¥å£è¯¦è§£


### 1.1 ComparableåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
Comparableï¼šJavaä¸­çš„æ ¸å¿ƒæ¥å£ï¼Œä½äºjava.langåŒ…ä¸­
åˆ«åï¼šé€šå¸¸ç§°ä¸º"å†…éƒ¨æ¯”è¾ƒå™¨"
ç‰¹ç‚¹ï¼šå¯¹è±¡è‡ªå·±å®šä¹‰è‡ªå·±çš„æ’åºæ–¹å¼
ä½œç”¨ï¼šå®ç°è¯¥æ¥å£çš„ç±»è¡¨æ˜å…¶å®ä¾‹å¯ä»¥æŒ‰ç…§æŸç§é¡ºåºæ’åˆ—ï¼Œè¿™ç§é¡ºåºè¢«ç§°ä¸ºè¯¥ç±»çš„"è‡ªç„¶æ’åº"
```

### 1.2 æ¥å£å®šä¹‰


```java
public interface Comparable<T> {
    int compareTo(T o);
}

// è¿”å›å€¼è¯­ä¹‰ï¼š
// < 0ï¼šå½“å‰å¯¹è±¡å°äº o
// = 0ï¼šå½“å‰å¯¹è±¡ç­‰äº o
// > 0ï¼šå½“å‰å¯¹è±¡å¤§äº o
```

### 1.3 å…¸å‹å®ç°ç¤ºä¾‹


```java
import java.util.*;

public class Person implements Comparable<Person> {
    private String name;
    private Integer age;
    private Double score;

    public Person(String name, Integer age, Double score) {
        this.name = name;
        this.age = age;
        this.score = score;
    }

    // æ’åºï¼šå¹´é¾„é™åº â†’ åˆ†æ•°å‡åº
    @Override
    public int compareTo(Person other) {
        // åŸæ¥çš„å†™æ³•ï¼ˆå¯èƒ½ä¸å®‰å…¨ï¼‰ï¼š
        // int ageCompare = other.age.compareTo(this.age); // é™åº

        // âœ… å®‰å…¨å†™æ³•ï¼ˆé¿å…æº¢å‡ºï¼‰ï¼š
        int ageCompare = Integer.compare(other.age, this.age); // é™åº
        if (ageCompare != 0) {
            return ageCompare;
        }

        // åŸæ¥çš„å†™æ³•ï¼š
        // return this.score.compareTo(other.score); // å‡åº

        // âœ… å®‰å…¨å†™æ³•ï¼š
        return Double.compare(this.score, other.score); // å‡åº
    }

    @Override
    public String toString() {
        return name + " - " + age + " - " + score;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Person)) return false;
        Person person = (Person) o;
        return Objects.equals(name, person.name) &&
               Objects.equals(age, person.age) &&
               Objects.equals(score, person.score);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age, score);
    }

    // æµ‹è¯•
    public static void main(String[] args) {
        Set<Person> set = new TreeSet<>();
        set.add(new Person("Tom", 25, 88.5));
        set.add(new Person("Alice", 30, 90.0));
        set.add(new Person("Bob", 30, 85.0));
        set.add(new Person("Jerry", 25, 70.0));
        set.add(new Person("Tom", 25, 88.5)); // é‡å¤ï¼Œä¸ä¼šæ·»åŠ 

        for (Person p : set) {
            System.out.println(p);
        }
    }
}
```

### 1.4 é‡è¦æ³¨æ„äº‹é¡¹


**âš ï¸ é¿å…å‡æ³•è¿ç®—æº¢å‡º**
```java
// åœ¨å®ç° compareTo() æˆ– Comparator.compare() æ—¶ï¼Œä¸è¦ç”¨å‡æ³•
// ä¼˜å…ˆç”¨ Integer.compare() ç­‰æ–¹æ³•ï¼Œæ—¢å®‰å…¨åˆè¯­ä¹‰æ¸…æ™°ï¼Œé¿å…æº¢å‡º bug 

int x = Integer.MAX_VALUE;
int y = -1;
System.out.println(x - y);  // ç»“æœé”™è¯¯ï¼šæº¢å‡ºä¸ºè´Ÿå€¼

@Override
public int compareTo(Person other) {
    // å¹´é¾„é™åºï¼ˆå¤§åœ¨å‰ï¼‰
    int ageCompare = Integer.compare(other.age, this.age);  // æ¨è âœ…

    if (ageCompare != 0) return ageCompare;

    // åˆ†æ•°å‡åºï¼ˆå°åœ¨å‰ï¼‰
    return Double.compare(this.score, other.score);         // æ¨è âœ…
}
```

**âš ï¸ equalså’ŒhashCodeä¸€è‡´æ€§é—®é¢˜**

```java
// é—®é¢˜1ï¼šåªé‡å†™ equalsï¼Œæ²¡æœ‰é‡å†™ hashCode
public class Person {
    String name;
    int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // åªé‡å†™ equalsï¼Œæ²¡æœ‰é‡å†™ hashCode âŒ
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Person)) return false;
        Person p = (Person) o;
        return age == p.age && Objects.equals(name, p.name);
    }

    // âŒ å¿½ç•¥äº† hashCode
    // @Override
    // public int hashCode() {
    //     return Objects.hash(name, age);
    // }

    @Override
    public String toString() {
        return name + " - " + age;
    }

    public static void main(String[] args) {
        Set<Person> set = new HashSet<>();
        Person p1 = new Person("Tom", 25);
        Person p2 = new Person("Tom", 25);

        set.add(p1);

        System.out.println("é›†åˆå†…å®¹ï¼š");
        set.forEach(System.out::println); // åŒ…å« p1

        System.out.println("\næ˜¯å¦åŒ…å« p2ï¼ˆé¢„æœŸåº”ä¸º trueï¼‰: " + set.contains(p2)); // âŒ false  (bug)
    }
}
```

**âš ï¸ compareToä¸equalsä¸ä¸€è‡´çš„é—®é¢˜**

```java
// é—®é¢˜2ï¼šæœªé‡å†™ equals å’Œ hashCode
import java.util.*;

public class PersonExample {
    public static void main(String[] args) {
        // åˆ›å»ºåŒ…å«ç›¸åŒå€¼çš„ä¸¤ä¸ª Person å¯¹è±¡
        Person p1 = new Person("Alice", 30);
        Person p2 = new Person("Alice", 30);
        
        // ä½¿ç”¨ TreeSetï¼ˆä½¿ç”¨ Comparable æ¥å£æ’åºï¼‰
        Set<Person> treeSet = new TreeSet<>();
        treeSet.add(p1);
        treeSet.add(p2);
        System.out.println("TreeSet size: " + treeSet.size()); // é¢„æœŸæ˜¯ 1ï¼Œå› ä¸º compareTo è®¤ä¸ºå®ƒä»¬ç›¸ç­‰
        
        // ä½¿ç”¨ HashSetï¼ˆä½¿ç”¨ equals å’Œ hashCodeï¼‰
        Set<Person> hashSet = new HashSet<>();
        hashSet.add(p1);
        hashSet.add(p2);
        System.out.println("HashSet size: " + hashSet.size()); // é¢„æœŸåº”è¯¥ä¹Ÿæ˜¯ 1ï¼Œä½†ç»“æœæ˜¯ 2ï¼
        
        // æ¯”è¾ƒä¸¤ç§ç›¸ç­‰æ€§æ£€æŸ¥çš„ç»“æœ
        System.out.println("p1.compareTo(p2) == 0: " + (p1.compareTo(p2) == 0)); // true
        System.out.println("p1.equals(p2): " + p1.equals(p2)); // falseï¼ˆé»˜è®¤å®ç°åªæ¯”è¾ƒå¼•ç”¨ï¼‰
    }
}

class Person implements Comparable<Person> {
    private String name;
    private int age;
    
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    @Override
    public int compareTo(Person other) {
        // å…ˆæŒ‰å§“åæ¯”è¾ƒï¼Œå§“åç›¸åŒå†æŒ‰å¹´é¾„æ¯”è¾ƒ
        int nameCompare = this.name.compareTo(other.name);
        if (nameCompare != 0) {
            return nameCompare;
        }
        return this.age - other.age;
    }
    
    @Override
    public String toString() {
        return name + "(" + age + ")";
    }
    
    // æ²¡æœ‰é‡å†™ equals å’Œ hashCode æ–¹æ³•ï¼
}
```

**ğŸ”¸ é—®é¢˜åˆ†æ**
```
ä¸ä¸€è‡´çš„ç›¸ç­‰æ€§æ¦‚å¿µï¼š
- compareTo æ–¹æ³•è®¤ä¸ºä¸¤ä¸ªå…·æœ‰ç›¸åŒå§“åå’Œå¹´é¾„çš„ Person å¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼ˆè¿”å› 0ï¼‰
- ä½†é»˜è®¤çš„ equals æ–¹æ³•è®¤ä¸ºå®ƒä»¬ä¸ç›¸ç­‰ï¼ˆæ¯”è¾ƒçš„æ˜¯å¯¹è±¡å¼•ç”¨ï¼‰

å¯¼è‡´çš„é—®é¢˜ï¼š
- TreeSetï¼ˆåŸºäº Comparableï¼‰åªæ·»åŠ äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå› ä¸ºå®ƒä½¿ç”¨ compareTo åˆ¤æ–­ç›¸ç­‰æ€§
- HashSetï¼ˆåŸºäº equals/hashCodeï¼‰æ·»åŠ äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œå› ä¸ºé»˜è®¤çš„ equals æ–¹æ³•è®¤ä¸ºå®ƒä»¬ä¸ç›¸ç­‰

è¿åäº†çº¦å®šï¼š
- Java æ–‡æ¡£æ˜ç¡®å»ºè®®ï¼šå¦‚æœ x.compareTo(y) == 0ï¼Œé‚£ä¹ˆ x.equals(y) ä¹Ÿåº”è¯¥ä¸º true
```

**âš ï¸ åªé‡å†™equalsä¸é‡å†™hashCodeçš„å¼‚å¸¸æƒ…å†µ**

```java
// åªé‡å†™equalsä¸é‡å†™hashCodeçš„å¼‚å¸¸æƒ…å†µ
import java.util.*;

public class EqualsWithoutHashCodeDemo {
    public static void main(String[] args) {
        // åˆ›å»ºä¸¤ä¸ª"ç›¸ç­‰"çš„å¯¹è±¡
        Employee e1 = new Employee("Alice", 101);
        Employee e2 = new Employee("Alice", 101);
        
        // ç¡®è®¤ä¸¤ä¸ªå¯¹è±¡é€šè¿‡equalsæ¯”è¾ƒæ˜¯ç›¸ç­‰çš„
        System.out.println("e1.equals(e2): " + e1.equals(e2));  // è¾“å‡º: true
        
        // ä½†å®ƒä»¬çš„hashCodeå´ä¸åŒ
        System.out.println("e1.hashCode(): " + e1.hashCode());  // ä¾‹å¦‚: 1234567
        System.out.println("e2.hashCode(): " + e2.hashCode());  // ä¾‹å¦‚: 7654321
        
        // å¼‚å¸¸æƒ…å†µ1: HashSetæ— æ³•æ­£ç¡®å»é‡
        Set<Employee> employees = new HashSet<>();
        employees.add(e1);
        employees.add(e2);  // åº”è¯¥è¢«è§†ä¸ºé‡å¤ï¼Œä½†è¢«æ·»åŠ äº†
        System.out.println("HashSet size: " + employees.size());  // è¾“å‡º: 2 (åº”è¯¥æ˜¯1)
        
        // å¼‚å¸¸æƒ…å†µ2: HashMapä¸­æ— æ³•æ‰¾åˆ°"ç›¸ç­‰"å¯¹è±¡å¯¹åº”çš„å€¼
        Map<Employee, String> employeeMap = new HashMap<>();
        employeeMap.put(e1, "Senior Developer");
        
        // æŸ¥æ‰¾e2å¯¹åº”çš„å€¼ - åº”è¯¥èƒ½æ‰¾åˆ°ï¼Œä½†æ‰¾ä¸åˆ°
        String role = employeeMap.get(e2);
        System.out.println("e2's role: " + role);  // è¾“å‡º: null (åº”è¯¥æ˜¯"Senior Developer")
        
        // å¼‚å¸¸æƒ…å†µ3: ç§»é™¤æ“ä½œæ— æ³•æ­£å¸¸å·¥ä½œ
        boolean removed = employees.remove(e2);  // åº”è¯¥ç§»é™¤e2(ç­‰åŒäºe1)å¹¶è¿”å›true
        System.out.println("Removed e2: " + removed);  // è¾“å‡º: false
        System.out.println("HashSet size after removal: " + employees.size());  // ä»ç„¶æ˜¯2
    }
}

class Employee {
    private String name;
    private int id;
    
    public Employee(String name, int id) {
        this.name = name;
        this.id = id;
    }
    
    // åªé‡å†™equalsæ–¹æ³•
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (!(obj instanceof Employee)) return false;
        Employee other = (Employee) obj;
        return this.id == other.id && Objects.equals(this.name, other.name);
    }
    
    // æ•…æ„ä¸é‡å†™hashCodeæ–¹æ³•
    // å°†ä½¿ç”¨Objectç±»é»˜è®¤çš„hashCodeå®ç°ï¼ŒåŸºäºå¯¹è±¡å†…å­˜åœ°å€
}
```

### 1.5 Comparable vs Comparatorå¯¹æ¯”


| å¯¹æ¯”é¡¹         | Comparable                  | Comparator                 |
|----------------|------------------------------|----------------------------|
| **å®šä¹‰ä½ç½®**      | ç±»å†…éƒ¨å®ç° (`implements Comparable<T>`) | ç‹¬ç«‹å®šä¹‰ (`implements Comparator<T>`) |
| **æ˜¯å¦ä¾µå…¥ç±»**    | æ˜¯ï¼ˆå¿…é¡»ä¿®æ”¹åŸç±»ï¼‰               | å¦ï¼ˆä¸å½±å“åŸç±»ï¼‰              |
| **çµæ´»æ€§**        | åªèƒ½å®šä¹‰ä¸€ç§æ’åº                 | å¯å®šä¹‰å¤šç§æ’åºé€»è¾‘ï¼ˆå¤šä¸ªæ¯”è¾ƒå™¨ï¼‰ |
| **ä½¿ç”¨æ–¹å¼**      | `obj1.compareTo(obj2)`         | `compare(obj1, obj2)`        |
| **åº”ç”¨åœºæ™¯**      | é»˜è®¤æ’åºè§„åˆ™ (`TreeSet`, `sort` ç­‰) | ä¸´æ—¶æ’åºã€è‡ªå®šä¹‰å¤æ‚æ’åºã€å¤šæ¡ä»¶æ’åº |

---

## 2. âš–ï¸ Comparatoræ¥å£è¯¦è§£


### 2.1 ComparatoråŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
Comparatorï¼šJavaä¸­çš„æ ¸å¿ƒæ¥å£ï¼Œä½äºjava.utilåŒ…ä¸­
åˆ«åï¼šé€šå¸¸è¢«ç§°ä¸º"å¤–éƒ¨æ¯”è¾ƒå™¨"
ç‰¹ç‚¹ï¼šç”¨äºå®šä¹‰å¯¹è±¡çš„æ¯”è¾ƒç­–ç•¥ï¼Œæä¾›çµæ´»çš„å¤–éƒ¨æ¯”è¾ƒæœºåˆ¶
é€‚ç”¨åœºæ™¯ï¼šæ— æ³•ä¿®æ”¹æºç±»ï¼Œå…è®¸æˆ‘ä»¬å®šä¹‰ä¸åŒçš„æ’åºè§„åˆ™ï¼Œè€Œæ— éœ€ä¿®æ”¹è¢«æ¯”è¾ƒçš„ç±»
```

### 2.2 æ¥å£å®šä¹‰


```java
@FunctionalInterface
public interface Comparator<T> {
    int compare(T o1, T o2);
    
    // å…¶ä»–é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•...
}

// è¿”å›å€¼è¯­ä¹‰ï¼š
// < 0: o1 < o2ï¼Œæ’åœ¨å‰é¢
//   0:	o1 == o2ï¼Œä¸åˆ†å‰å
// > 0: o1 > o2ï¼Œæ’åœ¨åé¢
```

### 2.3 å¸¸ç”¨æ’åºæ–¹å¼


```java
// åŒ¿åç±»å†™æ³•ï¼ˆJava 8 ä¹‹å‰ï¼‰
Comparator<Person> byAge = new Comparator<>() {
    public int compare(Person p1, Person p2) {
        return Integer.compare(p1.getAge(), p2.getAge());
    }
};

// Lambda è¡¨è¾¾å¼ï¼ˆJava 8+ï¼‰
Comparator<Person> byAge = (p1, p2) -> Integer.compare(p1.getAge(), p2.getAge());

// Comparator.comparingï¼ˆæ¨èï¼‰
Comparator<Person> byAge = Comparator.comparing(Person::getAge);

// é“¾å¼ç»„åˆæ’åº
Comparator<Person> comparator =
    Comparator.comparing(Person::getAge)              // å¹´é¾„å‡åº
              .thenComparing(Person::getScore)        // åˆ†æ•°å‡åº
              .thenComparing(Person::getName);        // å§“åå‡åº

// é™åºæ’
Comparator<Person> desc = Comparator.comparing(Person::getScore).reversed();

// å¤šå­—æ®µé“¾å¼æ’åºé€»è¾‘
List<Person> people = new ArrayList<>(List.of(
    new Person("Alice", 30, 88.5),
    new Person("Bob", 25, 92.0),
    new Person("Tom", 25, 85.0),
    new Person("Jerry", 25, null),
    new Person(null, 30, 75.0),
    new Person("Tom", 25, 95.0)
));
people.sort(
    Comparator.comparing(Person::getAge, Comparator.nullsLast(Integer::compareTo))
              .thenComparing(Person::getName, Comparator.nullsLast(String::compareTo))
              .thenComparing(Person::getScore, Comparator.nullsLast(Comparator.reverseOrder()))
);
```

### 2.4 å…¸å‹æ’åºç¤ºä¾‹


```java
import java.util.*;

public class Student {
    private Integer age;
    private Double height;
    private Double score;

    public Student(Integer age, Double height, Double score) {
        this.age = age;
        this.height = height;
        this.score = score;
    }

    public Integer getAge() { return age; }
    public Double getHeight() { return height; }
    public Double getScore() { return score; }

    @Override
    public String toString() {
        return "Student{" +
                "age=" + age +
                ", height=" + height +
                ", score=" + score +
                '}';
    }

    public static void main(String[] args) {
        List<Student> students = new ArrayList<>();
        students.add(new Student(18, 170.0, 85.0));
        students.add(new Student(18, 165.0, null));
        students.add(new Student(17, 175.0, 88.0));
        students.add(new Student(null, 160.0, 90.0));
        students.add(new Student(18, null, 70.0));
        students.add(new Student(18, 170.0, 60.0));

        Collections.sort(students, new Comparator<Student>() {
            @Override
            public int compare(Student s1, Student s2) {
                // æŒ‰ age å‡åºï¼Œnull æ”¾æœ€å
                int ageCompare = compareNullable(s1.getAge(), s2.getAge());
                if (ageCompare != 0) return ageCompare;

                // æŒ‰ height å‡åºï¼Œnull æ”¾æœ€å
                int heightCompare = compareNullable(s1.getHeight(), s2.getHeight());
                if (heightCompare != 0) return heightCompare;

                // æŒ‰ score å‡åºï¼Œnull æ”¾æœ€å
                return compareNullable(s1.getScore(), s2.getScore());
            }

            private <T extends Comparable<T>> int compareNullable(T o1, T o2) {
                if (o1 == null && o2 == null) return 0;
                if (o1 == null) return 1;  // null æ”¾å
                if (o2 == null) return -1;
                return o1.compareTo(o2);
            }
        });

        for (Student s : students) {
            System.out.println(s);
        }
    }
}
```

### 2.5 ä¸Comparableçš„åŒºåˆ«


| å¯¹æ¯”é¡¹             | Comparable                        | Comparator                     |
|--------------------|-----------------------------------|--------------------------------|
| **å®šä¹‰ä½ç½®**         | ç±»å†…éƒ¨ (`implements Comparable<T>`) | ç±»å¤–éƒ¨ (`implements Comparator<T>`) |
| **æ˜¯å¦ä¾µå…¥ç±»**       | âœ… æ˜¯ï¼ˆéœ€è¦ä¿®æ”¹åŸç±»ï¼‰                 | âŒ å¦ï¼ˆä¸å½±å“åŸç±»ï¼‰              |
| **æ˜¯å¦æ”¯æŒå¤šç§æ’åº** | âŒ ä»…ä¸€ç§æ’åº                        | âœ… å¯å®šä¹‰å¤šä¸ªæ’åºé€»è¾‘           |
| **åº”ç”¨åœºæ™¯**         | é»˜è®¤æ’åº (`TreeSet`, `sort` ç­‰)      | ä¸´æ—¶æ’åºã€å¤šç»´æ’åº              |
| **æ¥å£æ–¹æ³•**         | `compareTo(T o)`                   | `compare(T o1, T o2)`          |

### 2.6 ä½¿ç”¨æ€»ç»“


| æ’åºæ–¹å¼             | æ–¹æ³•                   | é€‚ç”¨åœºæ™¯                           |
|----------------------|------------------------|------------------------------------|
| **é»˜è®¤æ’åº**           | `Comparable<T>`               | ç±»å†…éƒ¨å®šä¹‰ï¼ŒæŒ‰è‡ªç„¶é¡ºåºæ’åº       |
| **çµæ´»æ’åº**           | `Comparator<T>`               | å¤–éƒ¨å®šä¹‰ï¼Œå¯å®šåˆ¶å¤šç§æ’åºæ–¹å¼     |
| **å¤šå­—æ®µæ’åº**         | `thenComparing()`             | å…ˆæŒ‰ä¸€ä¸ªå­—æ®µæ’åºï¼Œå†æŒ‰å…¶ä»–å­—æ®µ   |
| **å€’åºæ’åº**           | `reversed()`                  | åå‘æ’åº                         |
| **å¤„ç† null å€¼**     | `nullsFirst()` / `nullsLast()` | æŒ‡å®š null å€¼çš„æ’åºä¼˜å…ˆçº§       |
| **é€‚ç”¨åœºæ™¯**           | `TreeSet` / `TreeMap` / `PriorityQueue` | è¿™äº›ç»“æ„ä¾èµ–æ’åºï¼Œå»ºè®®ç”¨ `Comparator` |

---

## 3. ğŸ“‹ ArrayListæ’åº


### 3.1 Studentç±»å®šä¹‰


```java
class Student implements Comparable<Student> {
    String name;
    int age;

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // æŒ‰å¹´é¾„å‡åº
    @Override
    public int compareTo(Student other) {
        return Integer.compare(this.age, other.age);
    }

    @Override
    public String toString() {
        return name + "-" + age;
    }

    // å¦‚æœæ¶‰åŠ containsã€HashSet å»é‡ç­‰ï¼Œå»ºè®®åŠ ä¸Šä»¥ä¸‹æ–¹æ³•ï¼š
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Student)) return false;
        Student s = (Student) o;
        return age == s.age && Objects.equals(name, s.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}
```

### 3.2 ArrayListæ’åºç¤ºä¾‹


```java
import java.util.*;

public class Main {
    public static void main(String[] args) {
        List<Student> list = new ArrayList<>();
        list.add(new Student("Tom", 25));
        list.add(new Student("Alice", 20));
        list.add(new Student("Bob", 22));

        // âœ… 1. ä½¿ç”¨ Comparableï¼šå†…éƒ¨æ’åº
        Collections.sort(list);  // é»˜è®¤ä½¿ç”¨ compareTo()
        System.out.println("Comparable æ’åº: " + list);

        // âœ… 2. ä½¿ç”¨ Comparatorï¼šå¤–éƒ¨æ’åºï¼ŒæŒ‰åå­—å‡åº
        list.sort(new Comparator<Student>() {
            public int compare(Student s1, Student s2) {
                return s1.name.compareTo(s2.name);
            }
        });
        System.out.println("Comparator æ’åº: " + list);
    }
}
```

---

## 4. ğŸ”— LinkedListæ’åº


### 4.1 LinkedListæ’åºç¤ºä¾‹


```java
import java.util.*;

public class Main {
    public static void main(String[] args) {
        LinkedList<Student> list = new LinkedList<>();
        list.add(new Student("Tom", 25));
        list.add(new Student("Alice", 20));
        list.add(new Student("Bob", 22));

        // âœ… æ–¹æ³•1ï¼šä½¿ç”¨ Comparableï¼ˆå†…éƒ¨æ’åºï¼‰
        Collections.sort(list);
        System.out.println("é»˜è®¤å¹´é¾„å‡åº: " + list);

        // âœ… æ–¹æ³•2ï¼šä½¿ç”¨ Comparatorï¼ˆå¤–éƒ¨æ’åºï¼‰
        list.sort(new Comparator<Student>() {
            public int compare(Student s1, Student s2) {
                return s1.name.compareTo(s2.name); // æŒ‰åå­—å‡åº
            }
        });
        System.out.println("åå­—å‡åº: " + list);
    }
}
```

---

## 5. ğŸŒ³ TreeSetæ’åº


### 5.1 TreeSetæ’åºç±»å®šä¹‰


```java
class Student implements Comparable<Student> {
    String name;
    int age;

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // é»˜è®¤æŒ‰å¹´é¾„å‡åº
    @Override
    public int compareTo(Student other) {
        return Integer.compare(this.age, other.age);
    }

    @Override
    public String toString() {
        return name + "-" + age;
    }

    // å»ºè®®åŒæ—¶é‡å†™ equals å’Œ hashCodeï¼ˆé¿å…é€»è¾‘å†²çªï¼‰
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Student)) return false;
        Student s = (Student) o;
        return age == s.age && Objects.equals(name, s.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}
```

### 5.2 TreeSetæ’åºç¤ºä¾‹


```java
// === æ–¹æ³•1ï¼šé»˜è®¤æ’åºï¼ˆä½¿ç”¨ Comparableï¼‰ ===
TreeSet<Student> set = new TreeSet<>();
set.add(new Student("Tom", 25));
set.add(new Student("Alice", 20));
set.add(new Student("Bob", 22));
set.forEach(System.out::println);

// è¾“å‡ºï¼ˆæŒ‰å¹´é¾„å‡åºï¼‰ï¼š
// Alice-20
// Bob-22
// Tom-25

// === æ–¹æ³•2ï¼šè‡ªå®šä¹‰æ’åºï¼ˆä½¿ç”¨ Comparatorï¼‰ ===
TreeSet<Student> set = new TreeSet<>(Comparator.comparing(s -> s.name));
set.add(new Student("Tom", 25));
set.add(new Student("Alice", 20));
set.add(new Student("Bob", 22));
set.forEach(System.out::println);
// è¾“å‡ºï¼ˆæŒ‰åå­—å‡åºï¼‰ï¼š
// Alice-20
// Bob-22
// Tom-25
```

---

## 6. ğŸ—ºï¸ TreeMapæ’åº


### 6.1 TreeMapæ’åºç±»å®šä¹‰


```java
class Student implements Comparable<Student> {
    String name;
    int age;

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // é»˜è®¤æŒ‰å¹´é¾„å‡åº
    @Override
    public int compareTo(Student other) {
        return Integer.compare(this.age, other.age);
    }

    @Override
    public String toString() {
        return name + "-" + age;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Student)) return false;
        Student s = (Student) o;
        return age == s.age && Objects.equals(name, s.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age);
    }
}
```

### 6.2 TreeMapæ’åºç¤ºä¾‹


```java
// === æ–¹æ³•1ï¼šä½¿ç”¨ Comparableï¼ˆé»˜è®¤æ’åºï¼‰ ===
TreeMap<Student, String> map = new TreeMap<>();
map.put(new Student("Tom", 25), "A");
map.put(new Student("Alice", 20), "B");
map.put(new Student("Bob", 22), "C");

map.forEach((k, v) -> System.out.println(k + " => " + v));

// è¾“å‡ºï¼ˆæŒ‰å¹´é¾„å‡åºï¼‰ï¼š
// Alice-20 => B
// Bob-22 => C
// Tom-25 => A

// === æ–¹æ³•2ï¼šä½¿ç”¨ Comparatorï¼ˆè‡ªå®šä¹‰æ’åºï¼‰ ===
TreeMap<Student, String> map = new TreeMap<>(
    Comparator.comparing(s -> s.name) // æŒ‰åå­—æ’åº
);
map.put(new Student("Tom", 25), "A");
map.put(new Student("Alice", 20), "B");
map.put(new Student("Bob", 22), "C");

map.forEach((k, v) -> System.out.println(k + " => " + v));

// è¾“å‡ºï¼ˆæŒ‰åå­—å‡åºï¼‰ï¼š
// Alice-20 => B
// Bob-22 => C
// Tom-25 => A
```

---

## 7. ğŸš€ PriorityQueueæ’åº


### 7.1 PriorityQueueæ’åºç±»å®šä¹‰


```java
class Student implements Comparable<Student> {
    String name;
    int score;

    public Student(String name, int score) {
        this.name = name;
        this.score = score;
    }

    // æŒ‰åˆ†æ•°å‡åºï¼ˆåˆ†æ•°è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
    @Override
    public int compareTo(Student other) {
        return Integer.compare(this.score, other.score);
    }

    @Override
    public String toString() {
        return name + "-" + score;
    }
}
```

### 7.2 PriorityQueueæ’åºç¤ºä¾‹


```java
// === æ–¹æ³•1ï¼šé»˜è®¤æ’åºï¼ˆä½¿ç”¨ Comparableï¼‰ ===
PriorityQueue<Student> queue = new PriorityQueue<>();
queue.add(new Student("Tom", 90));
queue.add(new Student("Alice", 85));
queue.add(new Student("Bob", 95));

while (!queue.isEmpty()) {
    System.out.println(queue.poll()); // åˆ†æ•°å°çš„å…ˆå‡º
}

// è¾“å‡ºï¼ˆå‡åºï¼‰ï¼š
// Alice-85
// Tom-90
// Bob-95

// === æ–¹æ³•2ï¼šä½¿ç”¨ Comparatorï¼ˆè‡ªå®šä¹‰æ’åºï¼‰ ===
PriorityQueue<Student> queue = new PriorityQueue<>(
    Comparator.comparing(Student::getName)  // æŒ‰åå­—å‡åº
);
queue.add(new Student("Tom", 90));
queue.add(new Student("Alice", 85));
queue.add(new Student("Bob", 95));

while (!queue.isEmpty()) {
    System.out.println(queue.poll()); // åå­—å­—æ¯é¡ºåºå‡ºé˜Ÿ
}

// è¾“å‡ºï¼š
// Alice-85
// Bob-95
// Tom-90
```

---

## 8. ğŸ”¢ Arrays.sort()æ’åº


### 8.1 Arrays.sort()åŸºæœ¬è¯­æ³•


```java
Arrays.sort(æ•°ç»„);     // é»˜è®¤å‡åºï¼ˆåŸºç¡€ç±»å‹ or å®ç° Comparable çš„å¯¹è±¡ï¼‰
Arrays.sort(æ•°ç»„, Comparator);         // è‡ªå®šä¹‰æ’åºï¼ˆå¯¹è±¡æ•°ç»„ï¼‰
```

### 8.2 åŸºç¡€ç±»å‹æ•°ç»„æ’åº


```java
// æ’åºåŸºç¡€ç±»å‹æ•°ç»„ï¼ˆintã€double ç­‰ï¼‰
public class Main {
    public static void main(String[] args) {
        int[] nums = {5, 3, 8, 1};
        Arrays.sort(nums);  // å‡åºæ’åº
        System.out.println(Arrays.toString(nums)); // [1, 3, 5, 8]
    }
}
```

### 8.3 å­—ç¬¦ä¸²æ•°ç»„æ’åº


```java
// æ’åºå¯¹è±¡æ•°ç»„ï¼ˆé»˜è®¤ Comparableï¼‰  å­—ç¬¦ä¸²æ•°ç»„ï¼ˆString å®ç°äº† Comparableï¼‰
String[] names = {"Tom", "Alice", "Bob"};
Arrays.sort(names);  // å­—å…¸åºæ’åº
System.out.println(Arrays.toString(names)); // [Alice, Bob, Tom]
```

### 8.4 å¯¹è±¡æ•°ç»„è‡ªå®šä¹‰æ’åº


```java
// å¯¹è±¡æ•°ç»„ + è‡ªå®šä¹‰æ’åºï¼ˆä½¿ç”¨ Comparatorï¼‰
import java.util.*;

class Student {
    String name;
    int score;

    public Student(String name, int score) {
        this.name = name;
        this.score = score;
    }

    public String toString() {
        return name + "-" + score;
    }
}

public class Main {
    public static void main(String[] args) {
        Student[] arr = {
            new Student("Tom", 85),
            new Student("Alice", 95),
            new Student("Bob", 90)
        };

        // ä½¿ç”¨ Comparator æŒ‰ score é™åºæ’åº
        Arrays.sort(arr, new Comparator<Student>() {
            public int compare(Student s1, Student s2) {
                return Integer.compare(s2.score, s1.score); // é™åº
            }
        });

        System.out.println(Arrays.toString(arr));
        // [Alice-95, Bob-90, Tom-85]
    }
}
```

---

## 9. ğŸ“š Collections.sort()æ’åº


### 9.1 Collections.sort()åŸºæœ¬è¯­æ³•


```java
// æ–¹æ³•1ï¼šé»˜è®¤å‡åºæ’åºï¼ˆå…ƒç´ å®ç° Comparableï¼‰
public static <T extends Comparable<? super T>> void sort(List<T> list)
// æ–¹æ³•2ï¼šè‡ªå®šä¹‰æ’åºï¼ˆä¼ å…¥ Comparatorï¼‰
public static <T> void sort(List<T> list, Comparator<? super T> c)
```

### 9.2 é»˜è®¤æ’åºç¤ºä¾‹


```java
// é»˜è®¤æ’åºï¼ˆå…ƒç´ å®ç° Comparableï¼‰
import java.util.*;

public class Main {
    public static void main(String[] args) {
        List<String> list = Arrays.asList("Tom", "Alice", "Bob");
        Collections.sort(list); // é»˜è®¤å­—å…¸åº
        System.out.println(list); // [Alice, Bob, Tom]
    }
}
```

### 9.3 è‡ªå®šä¹‰æ’åºç¤ºä¾‹


```java
// è‡ªå®šä¹‰æ’åºï¼ˆä½¿ç”¨ Comparatorï¼‰
public class Main {
    public static void main(String[] args) {
        List<Integer> list = Arrays.asList(5, 3, 8, 1);
        Collections.sort(list, new Comparator<Integer>() {
            public int compare(Integer a, Integer b) {
                return b - a; // é™åº
            }
        });
        System.out.println(list); // [8, 5, 3, 1]
    }
}
```

### 9.4 æ’åºè‡ªå®šä¹‰ç±»ç¤ºä¾‹


```java
// æ’åºè‡ªå®šä¹‰ç±»ï¼ˆä½¿ç”¨ Comparableï¼‰
class Student implements Comparable<Student> {
    String name;
    int score;

    public Student(String name, int score) {
        this.name = name;
        this.score = score;
    }

    public int compareTo(Student other) {
        return Integer.compare(this.score, other.score); // æŒ‰åˆ†æ•°å‡åº
    }

    public String toString() {
        return name + "-" + score;
    }
}

public class Main {
    public static void main(String[] args) {
        List<Student> list = Arrays.asList(
            new Student("Tom", 90),
            new Student("Alice", 85),
            new Student("Bob", 95)
        );
        Collections.sort(list); // ä½¿ç”¨ compareTo
        System.out.println(list); // [Alice-85, Tom-90, Bob-95]
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Comparableæœ¬è´¨ï¼šå†…éƒ¨æ¯”è¾ƒå™¨ï¼Œç±»è‡ªå·±å®šä¹‰æ’åºæ–¹å¼ï¼Œå®ç°compareTo()æ–¹æ³•
ğŸ”¸ Comparatoræœ¬è´¨ï¼šå¤–éƒ¨æ¯”è¾ƒå™¨ï¼Œçµæ´»å®šä¹‰å¤šç§æ’åºç­–ç•¥ï¼Œå®ç°compare()æ–¹æ³•
ğŸ”¸ å®‰å…¨æ¯”è¾ƒï¼šä½¿ç”¨Integer.compare()ç­‰æ–¹æ³•ï¼Œé¿å…å‡æ³•æº¢å‡ºé—®é¢˜
ğŸ”¸ ä¸€è‡´æ€§åŸåˆ™ï¼šcompareTo()ä¸equals()ã€hashCode()ä¿æŒä¸€è‡´
ğŸ”¸ é€‚ç”¨åœºæ™¯ï¼šTreeSetã€TreeMapã€PriorityQueueç­‰ä¾èµ–æ’åºçš„æ•°æ®ç»“æ„
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Comparable vs Comparatoré€‰æ‹©**
```
ä½¿ç”¨Comparableçš„æƒ…å†µï¼š
- ç±»æœ‰æ˜ç¡®çš„"è‡ªç„¶æ’åº"è§„åˆ™
- å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æŒ‰è¿™ç§æ–¹å¼æ’åº
- å¯ä»¥ä¿®æ”¹æºä»£ç 
- åªéœ€è¦ä¸€ç§æ’åºæ–¹å¼

ä½¿ç”¨Comparatorçš„æƒ…å†µï¼š
- éœ€è¦å¤šç§ä¸åŒçš„æ’åºæ–¹å¼
- ä¸èƒ½ä¿®æ”¹æºç±»ä»£ç 
- ä¸´æ—¶æ€§çš„æ’åºéœ€æ±‚
- å¤æ‚çš„å¤šæ¡ä»¶æ’åº
```

**ğŸ”¹ å®‰å…¨ç¼–ç¨‹å®è·µ**
```
é¿å…æº¢å‡ºçš„æ–¹æ³•ï¼š
âŒ return this.age - other.age;  // å¯èƒ½æº¢å‡º
âœ… return Integer.compare(this.age, other.age);  // å®‰å…¨

å¤„ç†nullå€¼ï¼š
âœ… ä½¿ç”¨Comparator.nullsFirst()æˆ–nullsLast()
âœ… æ‰‹åŠ¨å¤„ç†nullå€¼çš„æ¯”è¾ƒé€»è¾‘

ä¿æŒä¸€è‡´æ€§ï¼š
âœ… å¦‚æœé‡å†™compareTo()ï¼Œä¹Ÿè¦é‡å†™equals()å’ŒhashCode()
âœ… ç¡®ä¿ (x.compareTo(y) == 0) == x.equals(y)
```

**ğŸ”¹ ä¸åŒæ•°æ®ç»“æ„çš„æ’åºç‰¹ç‚¹**
```
Listæ’åºï¼š
- ArrayListï¼šArrays.sort()æˆ–Collections.sort()
- LinkedListï¼šåªèƒ½ç”¨Collections.sort()
- å¯ä»¥ä½¿ç”¨Comparableæˆ–Comparator

Setæ’åºï¼š
- TreeSetï¼šè‡ªåŠ¨æ’åºï¼Œå¯æŒ‡å®šComparator
- HashSetã€LinkedHashSetï¼šä¸æ’åº

Mapæ’åºï¼š
- TreeMapï¼šæŒ‰keyæ’åºï¼Œå¯æŒ‡å®šComparator
- HashMapã€LinkedHashMapï¼šä¸æ’åº

Queueæ’åºï¼š
- PriorityQueueï¼šè‡ªåŠ¨ç»´æŠ¤ä¼˜å…ˆçº§é¡ºåº
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ æ’åºé€‰æ‹©æŒ‡å—**
```
å•ä¸€æ’åºéœ€æ±‚ï¼š
âœ… å®ç°Comparableæ¥å£
âœ… å®šä¹‰ç±»çš„è‡ªç„¶æ’åº

å¤šç§æ’åºéœ€æ±‚ï¼š
âœ… ä½¿ç”¨Comparator
âœ… å¯ä»¥å®šä¹‰å¤šä¸ªComparatorå®ä¾‹

å¤æ‚æ’åºï¼š
âœ… ä½¿ç”¨Comparator.comparing()é“¾å¼è°ƒç”¨
âœ… ç»“åˆthenComparing()å®ç°å¤šçº§æ’åº

nullå€¼å¤„ç†ï¼š
âœ… ä½¿ç”¨nullsFirst()æˆ–nullsLast()
âœ… æˆ–æ‰‹åŠ¨ç¼–å†™nullå€¼å¤„ç†é€»è¾‘
```

**âš ï¸ å¸¸è§é™·é˜±å’Œé¿å‘æŒ‡å—**
```
æº¢å‡ºé™·é˜±ï¼š
âŒ ä½¿ç”¨å‡æ³•æ¯”è¾ƒå¤§æ•°å€¼
âœ… ä½¿ç”¨Integer.compare()ç­‰é™æ€æ–¹æ³•

ä¸€è‡´æ€§é™·é˜±ï¼š
âŒ åªå®ç°compareTo()ä¸å®ç°equals()
âœ… åŒæ—¶æ­£ç¡®å®ç°compareTo()ã€equals()ã€hashCode()

nullå€¼é™·é˜±ï¼š
âŒ æ²¡æœ‰å¤„ç†nullå€¼å¯¼è‡´NullPointerException
âœ… æ˜ç¡®å®šä¹‰nullå€¼çš„æ’åºä½ç½®

æ€§èƒ½é™·é˜±ï¼š
âŒ åœ¨compareTo()ä¸­è¿›è¡Œå¤æ‚è®¡ç®—
âœ… é¢„å…ˆè®¡ç®—å¥½æ¯”è¾ƒå€¼æˆ–ä½¿ç”¨ç¼“å­˜
```

### 10.4 æœ€ä½³å®è·µå»ºè®®


```
è®¾è®¡åŸåˆ™ï¼š
ğŸ”¸ å¦‚æœç±»æœ‰æ˜ç¡®çš„è‡ªç„¶æ’åºï¼Œå®ç°Comparable
ğŸ”¸ éœ€è¦å¤šç§æ’åºæ–¹å¼æ—¶ï¼Œæä¾›Comparator
ğŸ”¸ ä¿æŒcompareTo()ä¸equals()çš„ä¸€è‡´æ€§
ğŸ”¸ ä¼˜å…ˆä½¿ç”¨ç°æœ‰çš„æ¯”è¾ƒæ–¹æ³•ï¼Œé¿å…é‡å¤é€ è½®å­

æ€§èƒ½ä¼˜åŒ–ï¼š
ğŸ”¸ æ¯”è¾ƒå­—ç¬¦ä¸²æ—¶è€ƒè™‘ä½¿ç”¨compareToIgnoreCase()
ğŸ”¸ å¤šçº§æ’åºæ—¶å°†æœ€å¯èƒ½åŒºåˆ†çš„æ¡ä»¶æ”¾åœ¨å‰é¢
ğŸ”¸ é¿å…åœ¨æ¯”è¾ƒæ–¹æ³•ä¸­è¿›è¡Œé‡å¤è®¡ç®—
ğŸ”¸ å¯¹äºé¢‘ç¹æ’åºçš„åœºæ™¯è€ƒè™‘é¢„å…ˆæ’åº

ä»£ç è´¨é‡ï¼š
ğŸ”¸ ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡åå’Œæ³¨é‡Š
ğŸ”¸ æ·»åŠ å•å…ƒæµ‹è¯•éªŒè¯æ’åºé€»è¾‘
ğŸ”¸ å¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆnullã€ç›¸ç­‰å€¼ç­‰ï¼‰
ğŸ”¸ éµå¾ªå›¢é˜Ÿçš„ç¼–ç è§„èŒƒ
```

### 10.5 æ’åºç®—æ³•é€‰æ‹©æ€»ç»“


```
Arrays.sort()ï¼š
âœ… åŸºç¡€ç±»å‹æ•°ç»„æ’åº
âœ… å¯¹è±¡æ•°ç»„æ’åº
âœ… æ€§èƒ½ä¼˜ç§€ï¼ˆåŒè½´å¿«æ’/å½’å¹¶æ’åºï¼‰

Collections.sort()ï¼š
âœ… Listé›†åˆæ’åº
âœ… å†…éƒ¨è°ƒç”¨Arrays.sort()
âœ… æ”¯æŒComparableå’ŒComparator

List.sort()ï¼š
âœ… Java 8+æ¨èæ–¹å¼
âœ… ç›´æ¥åœ¨Listä¸Šè°ƒç”¨
âœ… è¯­æ³•æ›´ç®€æ´

TreeSet/TreeMapï¼š
âœ… è‡ªåŠ¨ç»´æŠ¤æ’åº
âœ… æ’å…¥æ—¶æ’åºï¼ŒæŸ¥è¯¢é«˜æ•ˆ
âœ… é€‚åˆéœ€è¦æŒç»­æœ‰åºçš„åœºæ™¯

PriorityQueueï¼š
âœ… å †æ’åºå®ç°
âœ… é€‚åˆä¼˜å…ˆçº§é˜Ÿåˆ—åœºæ™¯
âœ… éƒ¨åˆ†æœ‰åºï¼Œå–æœ€å€¼é«˜æ•ˆ
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- Comparableå†…éƒ¨å®šï¼ŒComparatorå¤–éƒ¨çµ
- compareæ–¹æ³•è¦å®‰å…¨ï¼Œé¿å…æº¢å‡ºç”¨static
- equalså’Œhashè¦ä¸€è‡´ï¼ŒTreeSet HashMapéƒ½è¦è¡Œ
- å¤šçº§æ’åºç”¨é“¾å¼ï¼Œnullå€¼å¤„ç†åˆ«å¿˜è®°
- é€‰å¯¹åœºæ™¯ç”¨å¯¹æ³•ï¼Œæ’åºæ•ˆç‡è‡ªç„¶é«˜