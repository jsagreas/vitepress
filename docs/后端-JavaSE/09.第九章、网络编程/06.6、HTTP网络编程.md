---
title: 6ã€HTTPç½‘ç»œç¼–ç¨‹
---
## ğŸ“š ç›®å½•

1. [HTTPæ˜¯ä»€ä¹ˆ](#1-HTTPæ˜¯ä»€ä¹ˆ)
2. [Javaå‘é€HTTPè¯·æ±‚](#2-Javaå‘é€HTTPè¯·æ±‚)
3. [ç¬¬ä¸‰æ–¹HTTPå·¥å…·åº“](#3-ç¬¬ä¸‰æ–¹HTTPå·¥å…·åº“)
4. [ç®€å•HTTPæœåŠ¡å™¨](#4-ç®€å•HTTPæœåŠ¡å™¨)
5. [HTTPä¼˜åŒ–æŠ€å·§](#5-HTTPä¼˜åŒ–æŠ€å·§)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ HTTPæ˜¯ä»€ä¹ˆ


### 1.1 HTTPçš„å®šä¹‰å’Œä½œç”¨


**ğŸ”¸ HTTPçš„å«ä¹‰**
```
HTTPå…¨ç§°ï¼šHyperText Transfer Protocol
ä¸­æ–‡æ„æ€ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®

ç®€å•ç†è§£ï¼š
HTTPå°±æ˜¯æµè§ˆå™¨å’Œç½‘ç«™æœåŠ¡å™¨ä¹‹é—´"è¯´è¯"çš„è§„åˆ™

å°±åƒï¼š
ğŸ—£ï¸ äººä¸äººå¯¹è¯æœ‰è¯­è¨€è§„åˆ™ï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰
ğŸŒ æµè§ˆå™¨ä¸æœåŠ¡å™¨å¯¹è¯æœ‰HTTPè§„åˆ™
```

### 1.2 ç”Ÿæ´»åŒ–ç†è§£HTTP


**ğŸª HTTPå°±åƒå»å•†åº—ä¹°ä¸œè¥¿**
```
å»å•†åº—ä¹°ä¸œè¥¿ï¼š                    HTTPè¯·æ±‚ï¼š
ğŸ‘¤ é¡¾å®¢                          ğŸ–¥ï¸ æµè§ˆå™¨/å®¢æˆ·ç«¯
â”œâ”€ è¿›å…¥å•†åº—                      â”œâ”€ è¿æ¥æœåŠ¡å™¨
â”œâ”€ è¯¢é—®ï¼š"æœ‰è‹¹æœå—ï¼Ÿ"            â”œâ”€ å‘é€è¯·æ±‚ï¼š"GET /apple"
â”œâ”€ åº—å‘˜æŸ¥çœ‹åº“å­˜                  â”œâ”€ æœåŠ¡å™¨å¤„ç†è¯·æ±‚
â”œâ”€ åº—å‘˜å›ç­”ï¼š"æœ‰ï¼Œ5å…ƒä¸€ä¸ª"        â”œâ”€ æœåŠ¡å™¨å›åº”ï¼š"200 OK + æ•°æ®"
â””â”€ é¡¾å®¢ä»˜é’±æ‹¿èµ°è‹¹æœ              â””â”€ æµè§ˆå™¨æ˜¾ç¤ºç½‘é¡µå†…å®¹

ç‰¹ç‚¹ï¼š
â€¢ ä¸€é—®ä¸€ç­”çš„æ¨¡å¼
â€¢ é¡¾å®¢ä¸»åŠ¨è¯¢é—®ï¼Œåº—å‘˜è¢«åŠ¨å›åº”
â€¢ æ¯æ¬¡ä¹°ä¸œè¥¿éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ˆæ— çŠ¶æ€ï¼‰
```

### 1.3 HTTPè¯·æ±‚å’Œå“åº”çš„ç»“æ„


**ğŸ“¤ HTTPè¯·æ±‚çš„ç»„æˆ**
```
HTTPè¯·æ±‚å°±åƒå†™ä¿¡ï¼š

ç¬¬1è¡Œï¼ˆè¯·æ±‚è¡Œï¼‰ï¼šè¯´æ˜ä½ è¦åšä»€ä¹ˆ
GET /search?q=java HTTP/1.1

ç¬¬2-Nè¡Œï¼ˆè¯·æ±‚å¤´ï¼‰ï¼šè¯´æ˜ä½ çš„èº«ä»½å’Œè¦æ±‚
Host: www.baidu.com
User-Agent: Chromeæµè§ˆå™¨
Accept: text/html

ç©ºè¡Œï¼šåˆ†éš”ç¬¦

è¯·æ±‚ä½“ï¼šè¦å‘é€çš„æ•°æ®ï¼ˆPOSTè¯·æ±‚æ‰æœ‰ï¼‰
name=å¼ ä¸‰&age=25
```

**ğŸ“¥ HTTPå“åº”çš„ç»„æˆ**
```
HTTPå“åº”å°±åƒå›ä¿¡ï¼š

ç¬¬1è¡Œï¼ˆçŠ¶æ€è¡Œï¼‰ï¼šè¯´æ˜å¤„ç†ç»“æœ
HTTP/1.1 200 OK

ç¬¬2-Nè¡Œï¼ˆå“åº”å¤´ï¼‰ï¼šè¯´æ˜è¿”å›å†…å®¹çš„ä¿¡æ¯
Content-Type: text/html
Content-Length: 1234

ç©ºè¡Œï¼šåˆ†éš”ç¬¦

å“åº”ä½“ï¼šå®é™…çš„ç½‘é¡µå†…å®¹
<html><body>ä½ å¥½</body></html>
```

### 1.4 HTTPæ–¹æ³•ï¼ˆåŠ¨ä½œç±»å‹ï¼‰


**ğŸ¯ å¸¸ç”¨çš„HTTPæ–¹æ³•**
```
HTTPæ–¹æ³•å°±åƒä¸åŒçš„åŠ¨ä½œï¼š

GETï¼šè·å–ä¿¡æ¯
â€¢ å°±åƒé—®"æœ‰ä»€ä¹ˆå•†å“ï¼Ÿ"
â€¢ ç”¨æ³•ï¼šGET /products
â€¢ ç‰¹ç‚¹ï¼šåªè·å–ï¼Œä¸ä¿®æ”¹

POSTï¼šæäº¤ä¿¡æ¯
â€¢ å°±åƒ"æˆ‘è¦ä¹°è¿™ä¸ª"
â€¢ ç”¨æ³•ï¼šPOST /orders
â€¢ ç‰¹ç‚¹ï¼šä¼šåˆ›å»ºæ–°çš„ä¸œè¥¿

PUTï¼šæ›´æ–°ä¿¡æ¯
â€¢ å°±åƒ"æŠŠæˆ‘çš„åœ°å€æ”¹æˆxxx"
â€¢ ç”¨æ³•ï¼šPUT /profile
â€¢ ç‰¹ç‚¹ï¼šä¼šä¿®æ”¹å·²æœ‰çš„ä¸œè¥¿

DELETEï¼šåˆ é™¤ä¿¡æ¯
â€¢ å°±åƒ"å–æ¶ˆæˆ‘çš„è®¢å•"
â€¢ ç”¨æ³•ï¼šDELETE /orders/123
â€¢ ç‰¹ç‚¹ï¼šä¼šåˆ é™¤ä¸œè¥¿
```

### 1.5 HTTPçŠ¶æ€ç ï¼ˆç»“æœä»£ç ï¼‰


**ğŸ“Š çŠ¶æ€ç å°±åƒå•†åº—çš„å›å¤**
```
2xx æˆåŠŸç³»åˆ—ï¼š
200 OK           = "å¥½çš„ï¼Œç»™ä½ "
201 Created      = "å¥½çš„ï¼Œå·²ç»ä¸ºä½ åˆ›å»ºäº†"

3xx é‡å®šå‘ç³»åˆ—ï¼š
301 Moved        = "æ¬å®¶äº†ï¼Œæ–°åœ°å€æ˜¯..."
302 Found        = "ä¸´æ—¶åœ¨å¦ä¸€ä¸ªåœ°æ–¹"

4xx å®¢æˆ·é”™è¯¯ç³»åˆ—ï¼š
400 Bad Request  = "ä½ è¯´çš„æˆ‘å¬ä¸æ‡‚"
401 Unauthorized = "ä½ æ²¡æœ‰æƒé™"
404 Not Found    = "æ²¡æœ‰ä½ è¦çš„ä¸œè¥¿"

5xx æœåŠ¡å™¨é”™è¯¯ç³»åˆ—ï¼š
500 Server Error = "æˆ‘ä»¬åº—å‡ºæ•…éšœäº†"
503 Unavailable  = "æˆ‘ä»¬åº—æš‚æ—¶å…³é—¨"
```

---

## 2. â˜• Javaå‘é€HTTPè¯·æ±‚


### 2.1 Javaå†…ç½®çš„HTTPå·¥å…·


**ğŸ”§ ä½¿ç”¨HttpURLConnection**
```java
import java.io.*;
import java.net.*;

public class SimpleHTTPClient {
    // å‘é€GETè¯·æ±‚
    public static String sendGet(String url) {
        try {
            // 1. åˆ›å»ºè¿æ¥
            URL obj = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) obj.openConnection();
            
            // 2. è®¾ç½®è¯·æ±‚æ–¹å¼
            connection.setRequestMethod("GET");
            connection.setRequestProperty("User-Agent", "Javaç¨‹åº");
            
            // 3. è·å–å“åº”ç 
            int responseCode = connection.getResponseCode();
            System.out.println("å“åº”ç : " + responseCode);
            
            // 4. è¯»å–å“åº”å†…å®¹
            BufferedReader reader = new BufferedReader(
                new InputStreamReader(connection.getInputStream()));
            
            String line;
            StringBuilder response = new StringBuilder();
            while ((line = reader.readLine()) != null) {
                response.append(line).append("\n");
            }
            reader.close();
            
            return response.toString();
            
        } catch (Exception e) {
            System.out.println("è¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        String result = sendGet("http://httpbin.org/get");
        System.out.println("å“åº”å†…å®¹: " + result);
    }
}
```

### 2.2 å‘é€POSTè¯·æ±‚


**ğŸ“ å‘é€æ•°æ®åˆ°æœåŠ¡å™¨**
```java
public class HTTPPostExample {
    public static String sendPost(String url, String data) {
        try {
            URL obj = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) obj.openConnection();
            
            // è®¾ç½®POSTè¯·æ±‚
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Content-Type", "application/json");
            connection.setDoOutput(true); // å…è®¸å‘é€æ•°æ®
            
            // å‘é€æ•°æ®
            OutputStream outputStream = connection.getOutputStream();
            outputStream.write(data.getBytes());
            outputStream.flush();
            outputStream.close();
            
            // è¯»å–å“åº”
            BufferedReader reader = new BufferedReader(
                new InputStreamReader(connection.getInputStream()));
            
            String line;
            StringBuilder response = new StringBuilder();
            while ((line = reader.readLine()) != null) {
                response.append(line).append("\n");
            }
            reader.close();
            
            return response.toString();
            
        } catch (Exception e) {
            System.out.println("POSTè¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        String jsonData = "{\"name\":\"å¼ ä¸‰\",\"age\":25}";
        String result = sendPost("http://httpbin.org/post", jsonData);
        System.out.println("å“åº”: " + result);
    }
}
```

### 2.3 å¤„ç†è¯·æ±‚å‚æ•°


**ğŸ”— GETè¯·æ±‚å¸¦å‚æ•°**
```java
public class HTTPParamsExample {
    public static String sendGetWithParams(String baseUrl, String name, String age) {
        try {
            // æ‰‹åŠ¨æ‹¼æ¥å‚æ•°
            String url = baseUrl + "?name=" + URLEncoder.encode(name, "UTF-8") + 
                        "&age=" + URLEncoder.encode(age, "UTF-8");
            
            System.out.println("è¯·æ±‚URL: " + url);
            
            URL obj = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) obj.openConnection();
            connection.setRequestMethod("GET");
            
            // è¯»å–å“åº”
            BufferedReader reader = new BufferedReader(
                new InputStreamReader(connection.getInputStream()));
            
            String line;
            StringBuilder response = new StringBuilder();
            while ((line = reader.readLine()) != null) {
                response.append(line).append("\n");
            }
            reader.close();
            
            return response.toString();
            
        } catch (Exception e) {
            System.out.println("è¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        String result = sendGetWithParams("http://httpbin.org/get", "å¼ ä¸‰", "25");
        System.out.println("å“åº”: " + result);
    }
}
```

### 2.4 å¤„ç†å¸¸è§é—®é¢˜


**âš ï¸ å¼‚å¸¸å¤„ç†å’Œè¶…æ—¶è®¾ç½®**
```java
public class HTTPErrorHandling {
    public static String sendRequestSafely(String url) {
        try {
            URL obj = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) obj.openConnection();
            
            // è®¾ç½®è¶…æ—¶ï¼ˆé¿å…ä¸€ç›´ç­‰å¾…ï¼‰
            connection.setConnectTimeout(5000); // è¿æ¥è¶…æ—¶5ç§’
            connection.setReadTimeout(10000);   // è¯»å–è¶…æ—¶10ç§’
            
            connection.setRequestMethod("GET");
            
            int responseCode = connection.getResponseCode();
            
            if (responseCode == 200) {
                // æˆåŠŸ
                BufferedReader reader = new BufferedReader(
                    new InputStreamReader(connection.getInputStream()));
                
                StringBuilder response = new StringBuilder();
                String line;
                while ((line = reader.readLine()) != null) {
                    response.append(line).append("\n");
                }
                reader.close();
                return response.toString();
                
            } else {
                // å¤±è´¥
                System.out.println("è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : " + responseCode);
                return null;
            }
            
        } catch (SocketTimeoutException e) {
            System.out.println("è¯·æ±‚è¶…æ—¶: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("ç½‘ç»œé”™è¯¯: " + e.getMessage());
            return null;
        } catch (Exception e) {
            System.out.println("å…¶ä»–é”™è¯¯: " + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        String result = sendRequestSafely("http://httpbin.org/get");
        if (result != null) {
            System.out.println("è¯·æ±‚æˆåŠŸ: " + result);
        } else {
            System.out.println("è¯·æ±‚å¤±è´¥");
        }
    }
}
```

---

## 3. ğŸ“¦ ç¬¬ä¸‰æ–¹HTTPå·¥å…·åº“


### 3.1 ä¸ºä»€ä¹ˆä½¿ç”¨ç¬¬ä¸‰æ–¹åº“


**ğŸ¤” åŸç”ŸHttpURLConnectionçš„é—®é¢˜**
```
åŸç”Ÿæ–¹å¼çš„é—®é¢˜ï¼š
âŒ ä»£ç å†™èµ·æ¥å¾ˆç¹ç
âŒ é”™è¯¯å¤„ç†å¤æ‚
âŒ ä¸æ”¯æŒè¿æ¥æ± 
âŒ ä¸æ”¯æŒè‡ªåŠ¨é‡è¯•
âŒ JSONå¤„ç†éœ€è¦æ‰‹å†™

ç¬¬ä¸‰æ–¹åº“çš„å¥½å¤„ï¼š
âœ… ä»£ç ç®€æ´
âœ… åŠŸèƒ½å¼ºå¤§
âœ… æ€§èƒ½æ›´å¥½
âœ… è‡ªåŠ¨å¤„ç†å¸¸è§é—®é¢˜
```

### 3.2 OkHttpç®€å•ä½¿ç”¨


**ğŸš€ ç°ä»£åŒ–çš„HTTPå®¢æˆ·ç«¯**
```java
// éœ€è¦æ·»åŠ ä¾èµ–ï¼š
// <dependency>
//     <groupId>com.squareup.okhttp3</groupId>
//     <artifactId>okhttp</artifactId>
//     <version>4.10.0</version>
// </dependency>

import okhttp3.*;

public class OkHttpExample {
    private static final OkHttpClient client = new OkHttpClient();
    
    // GETè¯·æ±‚
    public static String sendGet(String url) {
        try {
            Request request = new Request.Builder()
                .url(url)
                .build();
            
            Response response = client.newCall(request).execute();
            return response.body().string();
            
        } catch (Exception e) {
            System.out.println("è¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    // POSTè¯·æ±‚
    public static String sendPost(String url, String json) {
        try {
            RequestBody body = RequestBody.create(
                json, MediaType.parse("application/json"));
            
            Request request = new Request.Builder()
                .url(url)
                .post(body)
                .build();
            
            Response response = client.newCall(request).execute();
            return response.body().string();
            
        } catch (Exception e) {
            System.out.println("POSTè¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        // æµ‹è¯•GET
        String getResult = sendGet("http://httpbin.org/get");
        System.out.println("GETç»“æœ: " + getResult);
        
        // æµ‹è¯•POST
        String json = "{\"name\":\"å¼ ä¸‰\",\"age\":25}";
        String postResult = sendPost("http://httpbin.org/post", json);
        System.out.println("POSTç»“æœ: " + postResult);
    }
}
```

### 3.3 Apache HttpClientä½¿ç”¨


**ğŸ”§ ä¼ä¸šçº§HTTPå®¢æˆ·ç«¯**
```java
// éœ€è¦æ·»åŠ ä¾èµ–ï¼š
// <dependency>
//     <groupId>org.apache.httpcomponents</groupId>
//     <artifactId>httpclient</artifactId>
//     <version>4.5.13</version>
// </dependency>

import org.apache.http.client.methods.*;
import org.apache.http.impl.client.*;
import org.apache.http.util.EntityUtils;
import org.apache.http.entity.StringEntity;

public class HttpClientExample {
    private static final CloseableHttpClient httpClient = HttpClients.createDefault();
    
    // GETè¯·æ±‚
    public static String sendGet(String url) {
        try {
            HttpGet request = new HttpGet(url);
            CloseableHttpResponse response = httpClient.execute(request);
            
            String result = EntityUtils.toString(response.getEntity());
            response.close();
            return result;
            
        } catch (Exception e) {
            System.out.println("GETè¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    // POSTè¯·æ±‚
    public static String sendPost(String url, String json) {
        try {
            HttpPost request = new HttpPost(url);
            request.setHeader("Content-Type", "application/json");
            request.setEntity(new StringEntity(json, "UTF-8"));
            
            CloseableHttpResponse response = httpClient.execute(request);
            String result = EntityUtils.toString(response.getEntity());
            response.close();
            return result;
            
        } catch (Exception e) {
            System.out.println("POSTè¯·æ±‚å‡ºé”™: " + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        String getResult = sendGet("http://httpbin.org/get");
        System.out.println("GETç»“æœ: " + getResult);
        
        String json = "{\"name\":\"æå››\",\"age\":30}";
        String postResult = sendPost("http://httpbin.org/post", json);
        System.out.println("POSTç»“æœ: " + postResult);
    }
}
```

---

## 4. ğŸ–¥ï¸ ç®€å•HTTPæœåŠ¡å™¨


### 4.1 Javaå†…ç½®HTTPæœåŠ¡å™¨


**ğŸ  åˆ›å»ºç®€å•çš„WebæœåŠ¡å™¨**
```java
import com.sun.net.httpserver.*;
import java.io.*;
import java.net.*;

public class SimpleWebServer {
    public static void main(String[] args) throws Exception {
        // åˆ›å»ºHTTPæœåŠ¡å™¨ï¼Œç›‘å¬8080ç«¯å£
        HttpServer server = HttpServer.create(new InetSocketAddress(8080), 0);
        
        // æ·»åŠ ä¸åŒçš„è·¯å¾„å¤„ç†
        server.createContext("/hello", new HelloHandler());
        server.createContext("/time", new TimeHandler());
        server.createContext("/", new HomeHandler());
        
        // å¯åŠ¨æœåŠ¡å™¨
        server.start();
        System.out.println("æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼");
        System.out.println("è®¿é—®ï¼šhttp://localhost:8080");
    }
}

// å¤„ç† /hello è·¯å¾„
class HelloHandler implements HttpHandler {
    @Override
    public void handle(HttpExchange exchange) throws IOException {
        String response = "Hello, World! ä½ å¥½ä¸–ç•Œï¼";
        
        // è®¾ç½®å“åº”å¤´
        exchange.getResponseHeaders().set("Content-Type", "text/html; charset=UTF-8");
        
        // å‘é€å“åº”
        exchange.sendResponseHeaders(200, response.getBytes().length);
        OutputStream os = exchange.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
}

// å¤„ç† /time è·¯å¾„
class TimeHandler implements HttpHandler {
    @Override
    public void handle(HttpExchange exchange) throws IOException {
        String response = "å½“å‰æ—¶é—´ï¼š" + new java.util.Date();
        
        exchange.getResponseHeaders().set("Content-Type", "text/html; charset=UTF-8");
        exchange.sendResponseHeaders(200, response.getBytes().length);
        
        OutputStream os = exchange.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
}

// å¤„ç†é¦–é¡µ
class HomeHandler implements HttpHandler {
    @Override
    public void handle(HttpExchange exchange) throws IOException {
        String response = """
            <html>
            <body>
                <h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™ï¼</h1>
                <ul>
                    <li><a href="/hello">æ‰“æ‹›å‘¼</a></li>
                    <li><a href="/time">æŸ¥çœ‹æ—¶é—´</a></li>
                </ul>
            </body>
            </html>
            """;
        
        exchange.getResponseHeaders().set("Content-Type", "text/html; charset=UTF-8");
        exchange.sendResponseHeaders(200, response.getBytes().length);
        
        OutputStream os = exchange.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
}
```

### 4.2 å¤„ç†ä¸åŒHTTPæ–¹æ³•


**ğŸ¯ æ”¯æŒGETå’ŒPOST**
```java
class ApiHandler implements HttpHandler {
    @Override
    public void handle(HttpExchange exchange) throws IOException {
        String method = exchange.getRequestMethod();
        String response;
        
        if ("GET".equals(method)) {
            response = handleGet(exchange);
        } else if ("POST".equals(method)) {
            response = handlePost(exchange);
        } else {
            response = "ä¸æ”¯æŒçš„æ–¹æ³•: " + method;
        }
        
        exchange.getResponseHeaders().set("Content-Type", "text/html; charset=UTF-8");
        exchange.sendResponseHeaders(200, response.getBytes().length);
        
        OutputStream os = exchange.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
    
    private String handleGet(HttpExchange exchange) {
        // è·å–æŸ¥è¯¢å‚æ•°
        String query = exchange.getRequestURI().getQuery();
        return "GETè¯·æ±‚ï¼Œå‚æ•°: " + (query != null ? query : "æ— ");
    }
    
    private String handlePost(HttpExchange exchange) throws IOException {
        // è¯»å–POSTæ•°æ®
        InputStream inputStream = exchange.getRequestBody();
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
        
        StringBuilder postData = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            postData.append(line);
        }
        
        return "POSTè¯·æ±‚ï¼Œæ•°æ®: " + postData.toString();
    }
}
```

### 4.3 è¿”å›JSONæ•°æ®


**ğŸ“Š åˆ›å»ºAPIæ¥å£**
```java
class JsonApiHandler implements HttpHandler {
    @Override
    public void handle(HttpExchange exchange) throws IOException {
        String path = exchange.getRequestURI().getPath();
        String response;
        
        if (path.equals("/api/user")) {
            // è¿”å›ç”¨æˆ·ä¿¡æ¯
            response = """
                {
                    "id": 1,
                    "name": "å¼ ä¸‰",
                    "age": 25,
                    "email": "zhangsan@example.com"
                }
                """;
        } else if (path.equals("/api/users")) {
            // è¿”å›ç”¨æˆ·åˆ—è¡¨
            response = """
                [
                    {"id": 1, "name": "å¼ ä¸‰", "age": 25},
                    {"id": 2, "name": "æå››", "age": 30},
                    {"id": 3, "name": "ç‹äº”", "age": 28}
                ]
                """;
        } else {
            response = """
                {
                    "error": "æ¥å£ä¸å­˜åœ¨",
                    "code": 404
                }
                """;
        }
        
        // è®¾ç½®JSONå“åº”å¤´
        exchange.getResponseHeaders().set("Content-Type", "application/json; charset=UTF-8");
        exchange.sendResponseHeaders(200, response.getBytes().length);
        
        OutputStream os = exchange.getResponseBody();
        os.write(response.getBytes());
        os.close();
    }
}

// åœ¨mainæ–¹æ³•ä¸­æ·»åŠ 
// server.createContext("/api", new JsonApiHandler());
```

---

## 5. ğŸš€ HTTPä¼˜åŒ–æŠ€å·§


### 5.1 è¿æ¥å¤ç”¨


**ğŸ”„ ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥å¤ç”¨**
```
æ²¡æœ‰è¿æ¥å¤ç”¨çš„é—®é¢˜ï¼š
æ¯æ¬¡HTTPè¯·æ±‚éƒ½éœ€è¦ï¼š
1. TCPä¸‰æ¬¡æ¡æ‰‹ï¼ˆè€—æ—¶ï¼‰
2. å‘é€HTTPè¯·æ±‚
3. æ¥æ”¶HTTPå“åº”
4. TCPå››æ¬¡æŒ¥æ‰‹ï¼ˆè€—æ—¶ï¼‰

æœ‰è¿æ¥å¤ç”¨çš„å¥½å¤„ï¼š
ä¸€æ¡è¿æ¥å¯ä»¥å‘é€å¤šä¸ªè¯·æ±‚ï¼š
1. TCPä¸‰æ¬¡æ¡æ‰‹ï¼ˆåªéœ€ä¸€æ¬¡ï¼‰
2. å‘é€HTTPè¯·æ±‚1
3. æ¥æ”¶HTTPå“åº”1
4. å‘é€HTTPè¯·æ±‚2
5. æ¥æ”¶HTTPå“åº”2
6. ...
7. TCPå››æ¬¡æŒ¥æ‰‹ï¼ˆåªéœ€ä¸€æ¬¡ï¼‰
```

**ğŸ’¡ ä½¿ç”¨è¿æ¥æ± **
```java
// OkHttpè‡ªåŠ¨ç®¡ç†è¿æ¥æ± 
public class ConnectionPoolExample {
    // åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯å®ä¾‹ï¼Œé‡å¤ä½¿ç”¨
    private static final OkHttpClient client = new OkHttpClient.Builder()
        .connectionPool(new ConnectionPool(5, 5, TimeUnit.MINUTES)) // 5ä¸ªè¿æ¥ï¼Œä¿æŒ5åˆ†é’Ÿ
        .build();
    
    public static void multipleRequests() {
        // å¤šä¸ªè¯·æ±‚ä¼šè‡ªåŠ¨å¤ç”¨è¿æ¥
        for (int i = 0; i < 10; i++) {
            try {
                Request request = new Request.Builder()
                    .url("http://httpbin.org/get?id=" + i)
                    .build();
                
                Response response = client.newCall(request).execute();
                System.out.println("è¯·æ±‚" + i + "ï¼š" + response.code());
                response.close();
                
            } catch (Exception e) {
                System.out.println("è¯·æ±‚" + i + "å¤±è´¥ï¼š" + e.getMessage());
            }
        }
    }
    
    public static void main(String[] args) {
        multipleRequests();
    }
}
```

### 5.2 è®¾ç½®è¶…æ—¶æ—¶é—´


**â° é¿å…ç¨‹åº"å¡æ­»"**
```java
public class TimeoutExample {
    public static void main(String[] args) {
        // è®¾ç½®å„ç§è¶…æ—¶æ—¶é—´
        OkHttpClient client = new OkHttpClient.Builder()
            .connectTimeout(5, TimeUnit.SECONDS)    // è¿æ¥è¶…æ—¶5ç§’
            .readTimeout(10, TimeUnit.SECONDS)      // è¯»å–è¶…æ—¶10ç§’
            .writeTimeout(10, TimeUnit.SECONDS)     // å†™å…¥è¶…æ—¶10ç§’
            .build();
        
        try {
            Request request = new Request.Builder()
                .url("http://httpbin.org/delay/15") // æœåŠ¡å™¨æ•…æ„å»¶è¿Ÿ15ç§’
                .build();
            
            Response response = client.newCall(request).execute();
            System.out.println("å“åº”ï¼š" + response.body().string());
            
        } catch (java.net.SocketTimeoutException e) {
            System.out.println("è¯·æ±‚è¶…æ—¶ï¼");
        } catch (Exception e) {
            System.out.println("è¯·æ±‚å¤±è´¥ï¼š" + e.getMessage());
        }
    }
}
```

### 5.3 å¤„ç†å¸¸è§é”™è¯¯


**ğŸ› ï¸ é”™è¯¯å¤„ç†æœ€ä½³å®è·µ**
```java
public class ErrorHandlingExample {
    private static final OkHttpClient client = new OkHttpClient();
    
    public static String safeHttpRequest(String url) {
        try {
            Request request = new Request.Builder()
                .url(url)
                .build();
            
            Response response = client.newCall(request).execute();
            
            if (response.isSuccessful()) {
                // 2xxçŠ¶æ€ç è¡¨ç¤ºæˆåŠŸ
                return response.body().string();
            } else {
                // å¤„ç†HTTPé”™è¯¯çŠ¶æ€ç 
                System.out.println("HTTPé”™è¯¯ï¼š" + response.code() + " " + response.message());
                return null;
            }
            
        } catch (java.net.UnknownHostException e) {
            System.out.println("ç½‘ç»œé”™è¯¯ï¼šæ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨");
            return null;
        } catch (java.net.SocketTimeoutException e) {
            System.out.println("ç½‘ç»œé”™è¯¯ï¼šè¯·æ±‚è¶…æ—¶");
            return null;
        } catch (java.io.IOException e) {
            System.out.println("IOé”™è¯¯ï¼š" + e.getMessage());
            return null;
        } catch (Exception e) {
            System.out.println("æœªçŸ¥é”™è¯¯ï¼š" + e.getMessage());
            return null;
        }
    }
    
    public static void main(String[] args) {
        // æµ‹è¯•æ­£å¸¸è¯·æ±‚
        String result1 = safeHttpRequest("http://httpbin.org/get");
        System.out.println("æ­£å¸¸è¯·æ±‚ç»“æœï¼š" + (result1 != null ? "æˆåŠŸ" : "å¤±è´¥"));
        
        // æµ‹è¯•404é”™è¯¯
        String result2 = safeHttpRequest("http://httpbin.org/status/404");
        System.out.println("404è¯·æ±‚ç»“æœï¼š" + (result2 != null ? "æˆåŠŸ" : "å¤±è´¥"));
        
        // æµ‹è¯•æ— æ•ˆåŸŸå
        String result3 = safeHttpRequest("http://invalidhost.example");
        System.out.println("æ— æ•ˆåŸŸåç»“æœï¼š" + (result3 != null ? "æˆåŠŸ" : "å¤±è´¥"));
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºç¡€æ¦‚å¿µ


```
ğŸ”¸ HTTP = æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´"è¯´è¯"çš„è§„åˆ™
ğŸ”¸ è¯·æ±‚æ–¹æ³• = GETï¼ˆè·å–ï¼‰ã€POSTï¼ˆæäº¤ï¼‰ã€PUTï¼ˆæ›´æ–°ï¼‰ã€DELETEï¼ˆåˆ é™¤ï¼‰
ğŸ”¸ çŠ¶æ€ç  = 2xxæˆåŠŸã€3xxé‡å®šå‘ã€4xxå®¢æˆ·ç«¯é”™è¯¯ã€5xxæœåŠ¡å™¨é”™è¯¯
ğŸ”¸ è¯·æ±‚ç»“æ„ = è¯·æ±‚è¡Œ + è¯·æ±‚å¤´ + ç©ºè¡Œ + è¯·æ±‚ä½“
ğŸ”¸ å“åº”ç»“æ„ = çŠ¶æ€è¡Œ + å“åº”å¤´ + ç©ºè¡Œ + å“åº”ä½“
```

### 6.2 Java HTTPç¼–ç¨‹è¦ç‚¹


**ğŸ”¹ å®¢æˆ·ç«¯ç¼–ç¨‹å¥—è·¯**
```
å‘é€HTTPè¯·æ±‚çš„åŸºæœ¬æ­¥éª¤ï¼š
1. åˆ›å»ºè¿æ¥ï¼ˆURL â†’ HttpURLConnectionï¼‰
2. è®¾ç½®è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POSTç­‰ï¼‰
3. è®¾ç½®è¯·æ±‚å¤´ï¼ˆå¯é€‰ï¼‰
4. å‘é€è¯·æ±‚ä½“ï¼ˆPOSTæ‰éœ€è¦ï¼‰
5. è·å–å“åº”ç 
6. è¯»å–å“åº”å†…å®¹
7. å…³é—­è¿æ¥

è®°ä½ï¼šæ¯ä¸€æ­¥éƒ½è¦å¤„ç†å¯èƒ½çš„å¼‚å¸¸ï¼
```

**ğŸ”¹ æœåŠ¡ç«¯ç¼–ç¨‹å¥—è·¯**
```
åˆ›å»ºHTTPæœåŠ¡å™¨çš„åŸºæœ¬æ­¥éª¤ï¼š
1. åˆ›å»ºHttpServerå¹¶ç»‘å®šç«¯å£
2. ä¸ºä¸åŒè·¯å¾„åˆ›å»ºå¤„ç†å™¨ï¼ˆHandlerï¼‰
3. åœ¨å¤„ç†å™¨ä¸­å¤„ç†è¯·æ±‚
4. è®¾ç½®å“åº”å¤´ï¼ˆContent-Typeç­‰ï¼‰
5. å‘é€å“åº”å†…å®¹
6. å¯åŠ¨æœåŠ¡å™¨

è®°ä½ï¼šè¦æ­£ç¡®è®¾ç½®Content-Typeï¼
```

### 6.3 å·¥å…·é€‰æ‹©æŒ‡å—


**ğŸ¤” ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆå·¥å…·**
```
ä½¿ç”¨åŸç”ŸHttpURLConnectionï¼š
âœ… ç®€å•çš„GET/POSTè¯·æ±‚
âœ… ä¸æƒ³å¼•å…¥ç¬¬ä¸‰æ–¹åº“
âœ… å­¦ä¹ HTTPåè®®åŸºç¡€
âŒ å¤æ‚çš„HTTPæ“ä½œ

ä½¿ç”¨OkHttpï¼š
âœ… ç°ä»£åº”ç”¨å¼€å‘
âœ… éœ€è¦è¿æ¥æ± ã€é‡è¯•ç­‰é«˜çº§åŠŸèƒ½
âœ… Androidå¼€å‘
âœ… ä»£ç è¦ç®€æ´æ˜“è¯»

ä½¿ç”¨Apache HttpClientï¼š
âœ… ä¼ä¸šçº§åº”ç”¨
âœ… éœ€è¦ä¸°å¯Œçš„é…ç½®é€‰é¡¹
âœ… å¤æ‚çš„HTTPåœºæ™¯
âŒ ç®€å•çš„åº”ç”¨ï¼ˆå¤ªé‡äº†ï¼‰
```

### 6.4 é‡è¦æ³¨æ„äº‹é¡¹


**âš ï¸ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ**
```
ç¼–ç é—®é¢˜ï¼š
â€¢ ç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç 
â€¢ è®¾ç½®æ­£ç¡®çš„Content-Type
â€¢ URLå‚æ•°è¦è¿›è¡Œç¼–ç 

è¶…æ—¶é—®é¢˜ï¼š
â€¢ ä¸€å®šè¦è®¾ç½®è¿æ¥è¶…æ—¶
â€¢ è®¾ç½®è¯»å–è¶…æ—¶
â€¢ é¿å…ç¨‹åºæ— é™ç­‰å¾…

å¼‚å¸¸å¤„ç†ï¼š
â€¢ æ•è·ç½‘ç»œå¼‚å¸¸
â€¢ å¤„ç†HTTPé”™è¯¯çŠ¶æ€ç 
â€¢ ç»™ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

æ€§èƒ½ä¼˜åŒ–ï¼š
â€¢ ä½¿ç”¨è¿æ¥æ± 
â€¢ å¤ç”¨HTTPå®¢æˆ·ç«¯å®ä¾‹
â€¢ é€‚å½“è®¾ç½®ç¼“å­˜
```


**æ ¸å¿ƒè®°å¿†**ï¼š
- HTTPæ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯¹è¯çš„è§„åˆ™
- GETè·å–æ•°æ®ï¼ŒPOSTæäº¤æ•°æ®
- 2xxæˆåŠŸï¼Œ4xxå®¢æˆ·ç«¯é”™è¯¯ï¼Œ5xxæœåŠ¡å™¨é”™è¯¯
- Javaå‘é€HTTPè¯·æ±‚è¦å¤„ç†å¼‚å¸¸å’Œè®¾ç½®è¶…æ—¶
- ç¬¬ä¸‰æ–¹åº“è®©HTTPç¼–ç¨‹å˜å¾—æ›´ç®€å•
- åˆ›å»ºHTTPæœåŠ¡å™¨å°±æ˜¯ä¸ºä¸åŒURLæä¾›ä¸åŒçš„å“åº”