---
title: 5ã€åå°„ä¸æ³¨è§£
---
## ğŸ“š ç›®å½•

1. [åŸºæœ¬æ¦‚å¿µä¸å…³è”èƒŒæ™¯](#1-åŸºæœ¬æ¦‚å¿µä¸å…³è”èƒŒæ™¯)
2. [è·å–æ³¨è§£çš„APIæ–¹æ³•](#2-è·å–æ³¨è§£çš„apiæ–¹æ³•)
3. [åå°„æ”¯æŒçš„æ³¨è§£è¯»å–ä½ç½®](#3-åå°„æ”¯æŒçš„æ³¨è§£è¯»å–ä½ç½®)
4. [è·å–æ³¨è§£å±æ€§å€¼](#4-è·å–æ³¨è§£å±æ€§å€¼)
5. [æ³¨è§£ç»§æ‰¿å¤„ç†](#5-æ³¨è§£ç»§æ‰¿å¤„ç†)
6. [å¸¸è§ä½¿ç”¨åœºæ™¯](#6-å¸¸è§ä½¿ç”¨åœºæ™¯)
7. [é€šç”¨å¤„ç†æ¨¡æ¿](#7-é€šç”¨å¤„ç†æ¨¡æ¿)
8. [æ¡†æ¶å®è·µåº”ç”¨](#8-æ¡†æ¶å®è·µåº”ç”¨)
9. [æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–](#9-æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”— åŸºæœ¬æ¦‚å¿µä¸å…³è”èƒŒæ™¯


### 1.1 æ³¨è§£ä¸åå°„çš„å…³ç³»

```
è¿è¡Œæ—¶æ³¨è§£å¤„ç†æµç¨‹ï¼š

ç¼–è¯‘æœŸï¼šJavaæºç  + æ³¨è§£ â†’ å­—èŠ‚ç (.classæ–‡ä»¶)
è¿è¡ŒæœŸï¼šJVMåŠ è½½ â†’ åå°„API â†’ è·å–æ³¨è§£ä¿¡æ¯ â†’ ä¸šåŠ¡å¤„ç†

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æºç +æ³¨è§£   â”‚ -> â”‚   å­—èŠ‚ç      â”‚ -> â”‚  åå°„è¯»å–    â”‚
â”‚ @MyAnnotationâ”‚    â”‚ .classæ–‡ä»¶   â”‚    â”‚ æ³¨è§£ä¿¡æ¯     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒæ¦‚å¿µè§£æ

**ğŸ”¸ æ³¨è§£æœ¬è´¨**
```java
// æ³¨è§£æ˜¯ç‰¹æ®Šçš„æ¥å£
public @interface MyAnnotation {
    String value();
}

// ç¼–è¯‘åç­‰ä»·äº
public interface MyAnnotation extends java.lang.annotation.Annotation {
    String value();
}
```

**ğŸ”¸ åå°„ä½œç”¨**
- æ¥è‡ª `java.lang.reflect` åŒ…
- è¿è¡Œæ—¶åˆ†æç±»çš„ç»“æ„ä¿¡æ¯ï¼ˆå­—æ®µã€æ–¹æ³•ã€æ„é€ å™¨ç­‰ï¼‰
- æä¾›è·å–å’Œæ“ä½œæ³¨è§£çš„èƒ½åŠ›

**ğŸ”¸ ä½¿ç”¨å‰ææ¡ä»¶**
```java
// âœ… æ­£ç¡®ï¼šè¿è¡Œæ—¶å¯è®¿é—®
@Retention(RetentionPolicy.RUNTIME)
public @interface RuntimeAnnotation { }

// âŒ é”™è¯¯ï¼šè¿è¡Œæ—¶å·²è¢«ä¸¢å¼ƒ
@Retention(RetentionPolicy.SOURCE)  
public @interface CompileOnlyAnnotation { }
```

---

## 2. ğŸ“‹ è·å–æ³¨è§£çš„APIæ–¹æ³•


### 2.1 æ ¸å¿ƒAPIæ–¹æ³•

```java
public class AnnotationReflectionDemo {
    
    @MyAnnotation("æµ‹è¯•æ–¹æ³•")
    public void testMethod() { }
    
    public static void main(String[] args) throws Exception {
        Class<?> clazz = AnnotationReflectionDemo.class;
        Method method = clazz.getMethod("testMethod");
        
        // 1. è·å–å•ä¸ªæ³¨è§£å¯¹è±¡
        MyAnnotation ann = method.getAnnotation(MyAnnotation.class);
        if (ann != null) {
            System.out.println("æ³¨è§£å€¼ï¼š" + ann.value());
        }
        
        // 2. åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŒ‡å®šæ³¨è§£
        if (method.isAnnotationPresent(MyAnnotation.class)) {
            System.out.println("å­˜åœ¨MyAnnotationæ³¨è§£");
        }
        
        // 3. è·å–æ‰€æœ‰æ³¨è§£ï¼ˆåŒ…å«ç»§æ‰¿çš„ï¼‰
        Annotation[] allAnnotations = method.getAnnotations();
        
        // 4. è·å–ç›´æ¥å£°æ˜çš„æ³¨è§£
        Annotation[] declaredAnnotations = method.getDeclaredAnnotations();
        
        // 5. è·å–é‡å¤æ³¨è§£
        MyAnnotation[] repeatedAnns = method.getAnnotationsByType(MyAnnotation.class);
    }
}
```

### 2.2 APIæ–¹æ³•å¯¹æ¯”


| **æ–¹æ³•** | **ä½œç”¨** | **åŒ…å«ç»§æ‰¿** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|------------|------------|
| `getAnnotation(Class<T>)` | `è·å–æŒ‡å®šç±»å‹æ³¨è§£` | `æ˜¯` | `è·å–ç‰¹å®šæ³¨è§£å®ä¾‹` |
| `getAnnotations()` | `è·å–æ‰€æœ‰æ³¨è§£` | `æ˜¯` | `éå†æ‰€æœ‰æ³¨è§£` |
| `getDeclaredAnnotations()` | `è·å–ç›´æ¥å£°æ˜çš„æ³¨è§£` | `å¦` | `åªå…³å¿ƒå½“å‰å…ƒç´ æ³¨è§£` |
| `isAnnotationPresent(Class)` | `åˆ¤æ–­æ³¨è§£æ˜¯å¦å­˜åœ¨` | `æ˜¯` | `å¿«é€Ÿæ£€æŸ¥æ³¨è§£å­˜åœ¨æ€§` |
| `getAnnotationsByType(Class)` | `è·å–é‡å¤æ³¨è§£` | `æ˜¯` | `å¤„ç†@Repeatableæ³¨è§£` |

### 2.3 é‡å¤æ³¨è§£å¤„ç†

```java
// å®šä¹‰é‡å¤æ³¨è§£
@Repeatable(Roles.class)
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Role {
    String value();
}

// å®¹å™¨æ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Roles {
    Role[] value();
}

// ä½¿ç”¨é‡å¤æ³¨è§£
@Role("admin")
@Role("user")
@Role("manager")
public void secureMethod() { }

// è·å–é‡å¤æ³¨è§£
public static void processRoles(Method method) {
    Role[] roles = method.getAnnotationsByType(Role.class);
    for (Role role : roles) {
        System.out.println("è§’è‰²ï¼š" + role.value());
    }
}
```

---

## 3. ğŸ¯ åå°„æ”¯æŒçš„æ³¨è§£è¯»å–ä½ç½®


### 3.1 æ”¯æŒä½ç½®æ€»è§ˆ

```java
public class AnnotationTargetDemo {
    
    // ç±»çº§åˆ«æ³¨è§£
    @Entity
    public static class User {
        
        // å­—æ®µçº§åˆ«æ³¨è§£
        @Column(name = "user_name")
        private String username;
        
        // æ„é€ å™¨æ³¨è§£
        @Autowired
        public User(@Param("name") String username) {
            this.username = username;
        }
        
        // æ–¹æ³•çº§åˆ«æ³¨è§£
        @Transactional
        public void save() { }
        
        // å‚æ•°çº§åˆ«æ³¨è§£
        public void update(@Valid @RequestBody UserDTO dto) { }
    }
}
```

### 3.2 å„ä½ç½®æ³¨è§£è¯»å–ç¤ºä¾‹

```java
public class AnnotationReader {
    
    public static void readAllAnnotations(Class<?> clazz) throws Exception {
        // 1. è¯»å–ç±»æ³¨è§£
        System.out.println("=== ç±»æ³¨è§£ ===");
        for (Annotation ann : clazz.getDeclaredAnnotations()) {
            System.out.println("ç±»æ³¨è§£ï¼š" + ann.annotationType().getSimpleName());
        }
        
        // 2. è¯»å–å­—æ®µæ³¨è§£
        System.out.println("=== å­—æ®µæ³¨è§£ ===");
        for (Field field : clazz.getDeclaredFields()) {
            for (Annotation ann : field.getDeclaredAnnotations()) {
                System.out.println("å­—æ®µ " + field.getName() + " æ³¨è§£ï¼š" + 
                                 ann.annotationType().getSimpleName());
            }
        }
        
        // 3. è¯»å–æ–¹æ³•æ³¨è§£
        System.out.println("=== æ–¹æ³•æ³¨è§£ ===");
        for (Method method : clazz.getDeclaredMethods()) {
            for (Annotation ann : method.getDeclaredAnnotations()) {
                System.out.println("æ–¹æ³• " + method.getName() + " æ³¨è§£ï¼š" + 
                                 ann.annotationType().getSimpleName());
            }
        }
        
        // 4. è¯»å–æ„é€ å™¨æ³¨è§£
        System.out.println("=== æ„é€ å™¨æ³¨è§£ ===");
        for (Constructor<?> constructor : clazz.getDeclaredConstructors()) {
            for (Annotation ann : constructor.getDeclaredAnnotations()) {
                System.out.println("æ„é€ å™¨æ³¨è§£ï¼š" + ann.annotationType().getSimpleName());
            }
        }
        
        // 5. è¯»å–æ–¹æ³•å‚æ•°æ³¨è§£
        System.out.println("=== å‚æ•°æ³¨è§£ ===");
        for (Method method : clazz.getDeclaredMethods()) {
            Parameter[] parameters = method.getParameters();
            for (int i = 0; i < parameters.length; i++) {
                Parameter param = parameters[i];
                for (Annotation ann : param.getDeclaredAnnotations()) {
                    System.out.println("æ–¹æ³• " + method.getName() + 
                                     " å‚æ•°" + i + " æ³¨è§£ï¼š" + ann.annotationType().getSimpleName());
                }
            }
        }
    }
}
```

---

## 4. ğŸ”§ è·å–æ³¨è§£å±æ€§å€¼


### 4.1 æ³¨è§£å±æ€§è®¿é—®

```java
// å®šä¹‰æ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface ApiInfo {
    String value();                    // ä¸»è¦æè¿°
    String version() default "1.0";    // ç‰ˆæœ¬å·
    String[] tags() default {};        // æ ‡ç­¾æ•°ç»„
    boolean deprecated() default false; // æ˜¯å¦åºŸå¼ƒ
}

// ä½¿ç”¨æ³¨è§£
public class ApiController {
    
    @ApiInfo(
        value = "è·å–ç”¨æˆ·ä¿¡æ¯", 
        version = "2.0",
        tags = {"user", "query"},
        deprecated = false
    )
    public User getUser(Long id) {
        return userService.findById(id);
    }
}
```

### 4.2 å±æ€§å€¼è·å–ç¤ºä¾‹

```java
public class AnnotationValueReader {
    
    public static void readApiInfo(Method method) {
        if (method.isAnnotationPresent(ApiInfo.class)) {
            ApiInfo apiInfo = method.getAnnotation(ApiInfo.class);
            
            // è·å–å„ç§ç±»å‹çš„å±æ€§å€¼
            String description = apiInfo.value();
            String version = apiInfo.version();
            String[] tags = apiInfo.tags();
            boolean deprecated = apiInfo.deprecated();
            
            System.out.println("APIæè¿°ï¼š" + description);
            System.out.println("APIç‰ˆæœ¬ï¼š" + version);
            System.out.println("APIæ ‡ç­¾ï¼š" + String.join(", ", tags));
            System.out.println("æ˜¯å¦åºŸå¼ƒï¼š" + deprecated);
            
            // æ•°ç»„å±æ€§å¤„ç†
            if (tags.length > 0) {
                System.out.println("æ ‡ç­¾åˆ—è¡¨ï¼š");
                for (String tag : tags) {
                    System.out.println("  - " + tag);
                }
            }
        }
    }
}
```

### 4.3 å¤æ‚å±æ€§ç±»å‹å¤„ç†

```java
// æ³¨è§£ä¸­ä½¿ç”¨æšä¸¾å’ŒClassç±»å‹
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface FieldConfig {
    String name();
    FieldType type() default FieldType.STRING;
    Class<?> targetClass() default Object.class;
    Range range() default @Range(min = 0, max = 100);
}

public enum FieldType {
    STRING, NUMBER, DATE, BOOLEAN
}

@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Range {
    int min();
    int max();
}

// ä½¿ç”¨å¤æ‚æ³¨è§£
public class UserForm {
    
    @FieldConfig(
        name = "ç”¨æˆ·å¹´é¾„",
        type = FieldType.NUMBER,
        targetClass = Integer.class,
        range = @Range(min = 18, max = 120)
    )
    private Integer age;
}

// è¯»å–å¤æ‚å±æ€§
public static void readFieldConfig(Field field) {
    FieldConfig config = field.getAnnotation(FieldConfig.class);
    if (config != null) {
        String name = config.name();
        FieldType type = config.type();          // æšä¸¾ç±»å‹
        Class<?> targetClass = config.targetClass(); // Classç±»å‹
        Range range = config.range();            // åµŒå¥—æ³¨è§£
        
        System.out.println("å­—æ®µåï¼š" + name);
        System.out.println("å­—æ®µç±»å‹ï¼š" + type);
        System.out.println("ç›®æ ‡ç±»ï¼š" + targetClass.getSimpleName());
        System.out.println("èŒƒå›´ï¼š" + range.min() + " - " + range.max());
    }
}
```

---

## 5. ğŸ”„ æ³¨è§£ç»§æ‰¿å¤„ç†


### 5.1 æ³¨è§£ç»§æ‰¿è§„åˆ™

```java
// æ”¯æŒç»§æ‰¿çš„æ³¨è§£ï¼ˆä»…ç±»çº§åˆ«ï¼‰
@Inherited
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface BusinessModule {
    String value();
    String description() default "";
}

// ä¸æ”¯æŒç»§æ‰¿çš„æ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface LogTrace {
    String operation();
}
```

### 5.2 ç»§æ‰¿è¡Œä¸ºéªŒè¯

```java
// çˆ¶ç±»
@BusinessModule(value = "ç”¨æˆ·æ¨¡å—", description = "ç”¨æˆ·ç›¸å…³ä¸šåŠ¡")
public class BaseUserService {
    
    @LogTrace(operation = "æŸ¥è¯¢ç”¨æˆ·")
    public User findById(Long id) {
        return null;
    }
}

// å­ç±»
public class UserServiceImpl extends BaseUserService {
    
    @Override
    public User findById(Long id) {
        // å­ç±»æ–¹æ³•é‡å†™
        return userRepository.findById(id);
    }
    
    @LogTrace(operation = "åˆ›å»ºç”¨æˆ·")
    public User createUser(User user) {
        return userRepository.save(user);
    }
}

// ç»§æ‰¿æ€§æµ‹è¯•
public class InheritanceTest {
    
    public static void testAnnotationInheritance() throws Exception {
        Class<UserServiceImpl> childClass = UserServiceImpl.class;
        Class<BaseUserService> parentClass = BaseUserService.class;
        
        // æµ‹è¯•ç±»çº§åˆ«æ³¨è§£ç»§æ‰¿
        System.out.println("=== ç±»æ³¨è§£ç»§æ‰¿æµ‹è¯• ===");
        BusinessModule parentAnnotation = parentClass.getAnnotation(BusinessModule.class);
        BusinessModule childAnnotation = childClass.getAnnotation(BusinessModule.class);
        
        System.out.println("çˆ¶ç±»æ³¨è§£ï¼š" + (parentAnnotation != null ? parentAnnotation.value() : "æ— "));
        System.out.println("å­ç±»æ³¨è§£ï¼š" + (childAnnotation != null ? childAnnotation.value() : "æ— "));
        System.out.println("å­ç±»ç»§æ‰¿çˆ¶ç±»æ³¨è§£ï¼š" + (childAnnotation != null)); // true
        
        // æµ‹è¯•æ–¹æ³•çº§åˆ«æ³¨è§£ç»§æ‰¿
        System.out.println("=== æ–¹æ³•æ³¨è§£ç»§æ‰¿æµ‹è¯• ===");
        Method parentMethod = parentClass.getMethod("findById", Long.class);
        Method childMethod = childClass.getMethod("findById", Long.class);
        
        LogTrace parentMethodAnnotation = parentMethod.getAnnotation(LogTrace.class);
        LogTrace childMethodAnnotation = childMethod.getAnnotation(LogTrace.class);
        
        System.out.println("çˆ¶ç±»æ–¹æ³•æ³¨è§£ï¼š" + (parentMethodAnnotation != null ? parentMethodAnnotation.operation() : "æ— "));
        System.out.println("å­ç±»æ–¹æ³•æ³¨è§£ï¼š" + (childMethodAnnotation != null ? childMethodAnnotation.operation() : "æ— "));
        System.out.println("å­ç±»ç»§æ‰¿çˆ¶ç±»æ–¹æ³•æ³¨è§£ï¼š" + (childMethodAnnotation != null)); // false
    }
}
```

### 5.3 ç»§æ‰¿è§„åˆ™æ€»ç»“

```
æ³¨è§£ç»§æ‰¿è§„åˆ™ï¼š

âœ… ç±»çº§åˆ«æ³¨è§£ï¼š
   â€¢ ä½¿ç”¨@Inheritedå…ƒæ³¨è§£ï¼šå­ç±»å¯ä»¥ç»§æ‰¿
   â€¢ æœªä½¿ç”¨@Inheritedï¼šå­ç±»ä¸ä¼šç»§æ‰¿

âŒ æ–¹æ³•çº§åˆ«æ³¨è§£ï¼š
   â€¢ æ— è®ºæ˜¯å¦ä½¿ç”¨@Inheritedï¼Œéƒ½ä¸ä¼šè¢«ç»§æ‰¿
   â€¢ å­ç±»é‡å†™æ–¹æ³•ä¸ä¼šè‡ªåŠ¨è·å¾—çˆ¶ç±»æ–¹æ³•çš„æ³¨è§£

âŒ å­—æ®µçº§åˆ«æ³¨è§£ï¼š
   â€¢ ä¸æ”¯æŒç»§æ‰¿
   â€¢ å­ç±»å­—æ®µéœ€è¦å•ç‹¬å£°æ˜æ³¨è§£

âŒ æ¥å£æ³¨è§£ï¼š
   â€¢ æ¥å£ä¸Šçš„æ³¨è§£ä¸ä¼šè¢«å®ç°ç±»ç»§æ‰¿
   â€¢ å³ä½¿ä½¿ç”¨@Inheritedä¹Ÿæ— æ•ˆ
```

---

## 6. ğŸ’¼ å¸¸è§ä½¿ç”¨åœºæ™¯


### 6.1 é…ç½®é©±åŠ¨å¼€å‘

```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface ConfigBinding {
    String prefix();
    String file() default "application.properties";
}

@ConfigBinding(prefix = "database", file = "db.properties")
public class DatabaseConfig {
    private String url;
    private String username;
    private String password;
    
    // getter/setterçœç•¥
}

// é…ç½®åŠ è½½å™¨
public class ConfigLoader {
    
    public static <T> T loadConfig(Class<T> configClass) throws Exception {
        ConfigBinding binding = configClass.getAnnotation(ConfigBinding.class);
        if (binding == null) {
            throw new IllegalArgumentException("ç¼ºå°‘@ConfigBindingæ³¨è§£");
        }
        
        // åŠ è½½é…ç½®æ–‡ä»¶
        Properties props = new Properties();
        props.load(new FileInputStream(binding.file()));
        
        // åˆ›å»ºé…ç½®å¯¹è±¡
        T config = configClass.getDeclaredConstructor().newInstance();
        String prefix = binding.prefix();
        
        // åå°„è®¾ç½®å±æ€§å€¼
        for (Field field : configClass.getDeclaredFields()) {
            String key = prefix + "." + field.getName();
            String value = props.getProperty(key);
            
            if (value != null) {
                field.setAccessible(true);
                field.set(config, value);
            }
        }
        
        return config;
    }
}
```

### 6.2 æ–¹æ³•è°ƒåº¦å™¨

```java
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Command {
    String name();
    String description() default "";
    String[] aliases() default {};
}

public class CommandProcessor {
    
    @Command(name = "start", description = "å¯åŠ¨æœåŠ¡", aliases = {"run", "begin"})
    public void startService() {
        System.out.println("æœåŠ¡å·²å¯åŠ¨");
    }
    
    @Command(name = "stop", description = "åœæ­¢æœåŠ¡", aliases = {"shutdown", "halt"})
    public void stopService() {
        System.out.println("æœåŠ¡å·²åœæ­¢");
    }
    
    @Command(name = "status", description = "æŸ¥çœ‹æœåŠ¡çŠ¶æ€")
    public void getStatus() {
        System.out.println("æœåŠ¡è¿è¡Œä¸­");
    }
}

// å‘½ä»¤è°ƒåº¦å™¨
public class CommandDispatcher {
    
    private final Map<String, Method> commandMap = new HashMap<>();
    private final Object processor;
    
    public CommandDispatcher(Object processor) {
        this.processor = processor;
        scanCommands();
    }
    
    private void scanCommands() {
        Class<?> clazz = processor.getClass();
        
        for (Method method : clazz.getDeclaredMethods()) {
            Command cmd = method.getAnnotation(Command.class);
            if (cmd != null) {
                // æ³¨å†Œä¸»å‘½ä»¤å
                commandMap.put(cmd.name(), method);
                
                // æ³¨å†Œåˆ«å
                for (String alias : cmd.aliases()) {
                    commandMap.put(alias, method);
                }
            }
        }
    }
    
    public void executeCommand(String commandName) throws Exception {
        Method method = commandMap.get(commandName);
        if (method == null) {
            System.out.println("æœªçŸ¥å‘½ä»¤ï¼š" + commandName);
            return;
        }
        
        method.invoke(processor);
    }
    
    public void listCommands() {
        Set<String> processed = new HashSet<>();
        
        for (Method method : processor.getClass().getDeclaredMethods()) {
            Command cmd = method.getAnnotation(Command.class);
            if (cmd != null && !processed.contains(cmd.name())) {
                System.out.println(cmd.name() + " - " + cmd.description());
                if (cmd.aliases().length > 0) {
                    System.out.println("  åˆ«åï¼š" + String.join(", ", cmd.aliases()));
                }
                processed.add(cmd.name());
            }
        }
    }
}
```

### 6.3 å­—æ®µæ˜ å°„å™¨

```java
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface ExcelColumn {
    String name();              // Excelåˆ—å
    int index() default -1;     // åˆ—ç´¢å¼•
    String format() default ""; // æ ¼å¼åŒ–æ¨¡å¼
    boolean required() default false; // æ˜¯å¦å¿…å¡«
}

public class UserExcelDTO {
    
    @ExcelColumn(name = "å§“å", index = 0, required = true)
    private String name;
    
    @ExcelColumn(name = "å¹´é¾„", index = 1)
    private Integer age;
    
    @ExcelColumn(name = "é‚®ç®±", index = 2, required = true)
    private String email;
    
    @ExcelColumn(name = "å…¥èŒæ—¥æœŸ", index = 3, format = "yyyy-MM-dd")
    private Date joinDate;
    
    // getter/setterçœç•¥
}

// Excelæ˜ å°„å¤„ç†å™¨
public class ExcelMapper {
    
    public static <T> List<T> parseExcel(List<List<String>> excelData, Class<T> targetClass) throws Exception {
        List<T> result = new ArrayList<>();
        
        // è·å–å­—æ®µæ˜ å°„ä¿¡æ¯
        Map<Integer, Field> fieldMap = new HashMap<>();
        Map<Integer, ExcelColumn> annotationMap = new HashMap<>();
        
        for (Field field : targetClass.getDeclaredFields()) {
            ExcelColumn column = field.getAnnotation(ExcelColumn.class);
            if (column != null) {
                field.setAccessible(true);
                fieldMap.put(column.index(), field);
                annotationMap.put(column.index(), column);
            }
        }
        
        // è§£ææ•°æ®ï¼ˆè·³è¿‡è¡¨å¤´ï¼‰
        for (int i = 1; i < excelData.size(); i++) {
            List<String> row = excelData.get(i);
            T instance = targetClass.getDeclaredConstructor().newInstance();
            
            for (int j = 0; j < row.size(); j++) {
                Field field = fieldMap.get(j);
                ExcelColumn column = annotationMap.get(j);
                
                if (field != null && column != null) {
                    String cellValue = row.get(j);
                    
                    // å¿…å¡«å­—æ®µéªŒè¯
                    if (column.required() && (cellValue == null || cellValue.trim().isEmpty())) {
                        throw new IllegalArgumentException("ç¬¬" + (i + 1) + "è¡Œï¼Œ" + column.name() + "ä¸èƒ½ä¸ºç©º");
                    }
                    
                    // ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–
                    Object value = convertValue(cellValue, field.getType(), column.format());
                    field.set(instance, value);
                }
            }
            
            result.add(instance);
        }
        
        return result;
    }
    
    private static Object convertValue(String cellValue, Class<?> fieldType, String format) {
        if (cellValue == null || cellValue.trim().isEmpty()) {
            return null;
        }
        
        cellValue = cellValue.trim();
        
        if (fieldType == String.class) {
            return cellValue;
        } else if (fieldType == Integer.class || fieldType == int.class) {
            return Integer.parseInt(cellValue);
        } else if (fieldType == Date.class) {
            try {
                SimpleDateFormat sdf = new SimpleDateFormat(format.isEmpty() ? "yyyy-MM-dd" : format);
                return sdf.parse(cellValue);
            } catch (ParseException e) {
                throw new RuntimeException("æ—¥æœŸæ ¼å¼é”™è¯¯ï¼š" + cellValue, e);
            }
        }
        
        return cellValue;
    }
}
```

---

## 7. ğŸ”§ é€šç”¨å¤„ç†æ¨¡æ¿


### 7.1 æ³¨è§£æ‰«æå™¨åŸºç¡€æ¨¡æ¿

```java
public class AnnotationScanner {
    
    /**
     * æ‰«æç±»ä¸­çš„æ‰€æœ‰æ³¨è§£å¹¶æ‰§è¡Œå¤„ç†é€»è¾‘
     */
    public static void scanAndProcess(Class<?> targetClass, AnnotationProcessor processor) {
        // å¤„ç†ç±»çº§åˆ«æ³¨è§£
        processClassAnnotations(targetClass, processor);
        
        // å¤„ç†å­—æ®µæ³¨è§£
        processFieldAnnotations(targetClass, processor);
        
        // å¤„ç†æ–¹æ³•æ³¨è§£
        processMethodAnnotations(targetClass, processor);
        
        // å¤„ç†æ„é€ å™¨æ³¨è§£
        processConstructorAnnotations(targetClass, processor);
    }
    
    private static void processClassAnnotations(Class<?> clazz, AnnotationProcessor processor) {
        for (Annotation annotation : clazz.getDeclaredAnnotations()) {
            processor.processClassAnnotation(clazz, annotation);
        }
    }
    
    private static void processFieldAnnotations(Class<?> clazz, AnnotationProcessor processor) {
        for (Field field : clazz.getDeclaredFields()) {
            for (Annotation annotation : field.getDeclaredAnnotations()) {
                processor.processFieldAnnotation(field, annotation);
            }
        }
    }
    
    private static void processMethodAnnotations(Class<?> clazz, AnnotationProcessor processor) {
        for (Method method : clazz.getDeclaredMethods()) {
            for (Annotation annotation : method.getDeclaredAnnotations()) {
                processor.processMethodAnnotation(method, annotation);
            }
        }
    }
    
    private static void processConstructorAnnotations(Class<?> clazz, AnnotationProcessor processor) {
        for (Constructor<?> constructor : clazz.getDeclaredConstructors()) {
            for (Annotation annotation : constructor.getDeclaredAnnotations()) {
                processor.processConstructorAnnotation(constructor, annotation);
            }
        }
    }
}

// æ³¨è§£å¤„ç†å™¨æ¥å£
public interface AnnotationProcessor {
    default void processClassAnnotation(Class<?> clazz, Annotation annotation) {}
    default void processFieldAnnotation(Field field, Annotation annotation) {}
    default void processMethodAnnotation(Method method, Annotation annotation) {}
    default void processConstructorAnnotation(Constructor<?> constructor, Annotation annotation) {}
}
```

### 7.2 ç‰¹å®šæ³¨è§£å¤„ç†å™¨ç¤ºä¾‹

```java
public class MyAnnotationProcessor implements AnnotationProcessor {
    
    @Override
    public void processMethodAnnotation(Method method, Annotation annotation) {
        if (annotation instanceof LogTrace) {
            LogTrace logTrace = (LogTrace) annotation;
            System.out.println("å‘ç°æ—¥å¿—è·Ÿè¸ªæ³¨è§£ - æ–¹æ³•ï¼š" + method.getName() + 
                             "ï¼Œæ“ä½œï¼š" + logTrace.operation());
        }
        
        if (annotation instanceof Command) {
            Command command = (Command) annotation;
            System.out.println("å‘ç°å‘½ä»¤æ³¨è§£ - æ–¹æ³•ï¼š" + method.getName() + 
                             "ï¼Œå‘½ä»¤ï¼š" + command.name());
        }
    }
    
    @Override
    public void processFieldAnnotation(Field field, Annotation annotation) {
        if (annotation instanceof ExcelColumn) {
            ExcelColumn column = (ExcelColumn) annotation;
            System.out.println("å‘ç°Excelåˆ—æ³¨è§£ - å­—æ®µï¼š" + field.getName() + 
                             "ï¼Œåˆ—åï¼š" + column.name());
        }
    }
    
    @Override
    public void processClassAnnotation(Class<?> clazz, Annotation annotation) {
        if (annotation instanceof BusinessModule) {
            BusinessModule module = (BusinessModule) annotation;
            System.out.println("å‘ç°ä¸šåŠ¡æ¨¡å—æ³¨è§£ - ç±»ï¼š" + clazz.getSimpleName() + 
                             "ï¼Œæ¨¡å—ï¼š" + module.value());
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class ProcessorDemo {
    public static void main(String[] args) {
        AnnotationScanner.scanAndProcess(CommandProcessor.class, new MyAnnotationProcessor());
        AnnotationScanner.scanAndProcess(UserExcelDTO.class, new MyAnnotationProcessor());
    }
}
```

---

## 8. ğŸ¢ æ¡†æ¶å®è·µåº”ç”¨


### 8.1 ä¸»æµæ¡†æ¶ä¸­çš„æ³¨è§£+åå°„åº”ç”¨


| **æ¡†æ¶** | **æ³¨è§£ç¤ºä¾‹** | **åå°„åº”ç”¨** | **å¤„ç†æ—¶æœº** |
|---------|------------|------------|------------|
| `Spring` | `@Autowired, @RequestMapping` | `Beanæ‰«æä¸æ³¨å…¥ï¼ŒURLæ˜ å°„` | `å®¹å™¨å¯åŠ¨æ—¶` |
| `JPA/Hibernate` | `@Entity, @Column` | `å®ä½“æ˜ å°„ï¼ŒSQLç”Ÿæˆ` | `EntityManageråˆå§‹åŒ–` |
| `Jackson` | `@JsonProperty, @JsonIgnore` | `åºåˆ—åŒ–/ååºåˆ—åŒ–æ§åˆ¶` | `å¯¹è±¡è½¬æ¢æ—¶` |
| `Validation` | `@NotNull, @Valid` | `å‚æ•°æ ¡éªŒé€»è¾‘æ‰§è¡Œ` | `æ–¹æ³•è°ƒç”¨æ—¶` |
| `MyBatis` | `@Select, @Param` | `SQLæ˜ å°„ï¼Œå‚æ•°ç»‘å®š` | `Mapperä»£ç†åˆ›å»ºæ—¶` |

### 8.2 Springæ¡†æ¶æ³¨è§£å¤„ç†åŸç†

```java
// æ¨¡æ‹ŸSpringçš„ä¾èµ–æ³¨å…¥å¤„ç†
public class SimpleIoCContainer {
    
    private final Map<Class<?>, Object> beanMap = new ConcurrentHashMap<>();
    
    public void scanAndRegister(String packageName) throws Exception {
        // 1. æ‰«æåŒ…ä¸‹çš„æ‰€æœ‰ç±»
        List<Class<?>> classes = scanClasses(packageName);
        
        // 2. ç­›é€‰å¸¦æœ‰@Componentæ³¨è§£çš„ç±»
        for (Class<?> clazz : classes) {
            if (clazz.isAnnotationPresent(Component.class)) {
                // 3. åˆ›å»ºBeanå®ä¾‹
                Object bean = createBean(clazz);
                beanMap.put(clazz, bean);
            }
        }
        
        // 4. å¤„ç†ä¾èµ–æ³¨å…¥
        for (Object bean : beanMap.values()) {
            injectDependencies(bean);
        }
    }
    
    private Object createBean(Class<?> clazz) throws Exception {
        return clazz.getDeclaredConstructor().newInstance();
    }
    
    private void injectDependencies(Object bean) throws Exception {
        Class<?> clazz = bean.getClass();
        
        // å¤„ç†å­—æ®µæ³¨å…¥
        for (Field field : clazz.getDeclaredFields()) {
            if (field.isAnnotationPresent(Autowired.class)) {
                Class<?> fieldType = field.getType();
                Object dependency = beanMap.get(fieldType);
                
                if (dependency != null) {
                    field.setAccessible(true);
                    field.set(bean, dependency);
                    System.out.println("æ³¨å…¥ä¾èµ–ï¼š" + clazz.getSimpleName() + 
                                     "." + field.getName() + " = " + 
                                     dependency.getClass().getSimpleName());
                }
            }
        }
    }
    
    @SuppressWarnings("unchecked")
    public <T> T getBean(Class<T> type) {
        return (T) beanMap.get(type);
    }
    
    private List<Class<?>> scanClasses(String packageName) {
        // ç®€åŒ–å®ç°ï¼Œå®é™…åº”è¯¥æ‰«æclasspath
        return Arrays.asList(UserService.class, UserRepository.class);
    }
}

// æµ‹è¯•ç±»
@Component
class UserRepository {
    public void save() {
        System.out.println("ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“");
    }
}

@Component
class UserService {
    @Autowired
    private UserRepository userRepository;
    
    public void createUser() {
        System.out.println("åˆ›å»ºç”¨æˆ·");
        userRepository.save();
    }
}
```

### 8.3 å‚æ•°æ ¡éªŒæ¡†æ¶å®ç°

```java
public class ValidationFramework {
    
    public static void validate(Object obj) throws ValidationException {
        Class<?> clazz = obj.getClass();
        
        for (Field field : clazz.getDeclaredFields()) {
            field.setAccessible(true);
            Object value = getFieldValue(field, obj);
            
            // å¤„ç†@NotNullæ³¨è§£
            if (field.isAnnotationPresent(NotNull.class) && value == null) {
                throw new ValidationException(field.getName() + " ä¸èƒ½ä¸ºnull");
            }
            
            // å¤„ç†@Sizeæ³¨è§£
            Size sizeAnnotation = field.getAnnotation(Size.class);
            if (sizeAnnotation != null && value instanceof String) {
                String strValue = (String) value;
                if (strValue.length() < sizeAnnotation.min() || strValue.length() > sizeAnnotation.max()) {
                    throw new ValidationException(field.getName() + " é•¿åº¦å¿…é¡»åœ¨ " + 
                                                sizeAnnotation.min() + "-" + sizeAnnotation.max() + " ä¹‹é—´");
                }
            }
            
            // å¤„ç†@Emailæ³¨è§£
            if (field.isAnnotationPresent(Email.class) && value instanceof String) {
                String strValue = (String) value;
                if (!isValidEmail(strValue)) {
                    throw new ValidationException(field.getName() + " ä¸æ˜¯æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼");
                }
            }
        }
    }
    
    private static Object getFieldValue(Field field, Object obj) {
        try {
            return field.get(obj);
        } catch (IllegalAccessException e) {
            throw new RuntimeException("æ— æ³•è®¿é—®å­—æ®µï¼š" + field.getName(), e);
        }
    }
    
    private static boolean isValidEmail(String email) {
        return email != null && email.contains("@") && email.contains(".");
    }
}

class ValidationException extends Exception {
    public ValidationException(String message) {
        super(message);
    }
}
```

---

## 9. âš ï¸ æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–


### 9.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

```java
public class AnnotationCache {
    
    // ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤åå°„
    private static final Map<Class<?>, List<Field>> FIELD_CACHE = new ConcurrentHashMap<>();
    private static final Map<Class<?>, List<Method>> METHOD_CACHE = new ConcurrentHashMap<>();
    private static final Map<String, Annotation> ANNOTATION_CACHE = new ConcurrentHashMap<>();
    
    /**
     * è·å–ç±»çš„æ‰€æœ‰å­—æ®µï¼ˆå¸¦ç¼“å­˜ï¼‰
     */
    public static List<Field> getCachedFields(Class<?> clazz) {
        return FIELD_CACHE.computeIfAbsent(clazz, k -> Arrays.asList(k.getDeclaredFields()));
    }
    
    /**
     * è·å–ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼ˆå¸¦ç¼“å­˜ï¼‰
     */
    public static List<Method> getCachedMethods(Class<?> clazz) {
        return METHOD_CACHE.computeIfAbsent(clazz, k -> Arrays.asList(k.getDeclaredMethods()));
    }
    
    /**
     * è·å–æ³¨è§£ï¼ˆå¸¦ç¼“å­˜ï¼‰
     */
    public static <T extends Annotation> T getCachedAnnotation(AnnotatedElement element, Class<T> annotationType) {
        String key = element.toString() + ":" + annotationType.getName();
        
        @SuppressWarnings("unchecked")
        T annotation = (T) ANNOTATION_CACHE.computeIfAbsent(key, k -> element.getAnnotation(annotationType));
        
        return annotation;
    }
    
    /**
     * æ¸…ç©ºç¼“å­˜
     */
    public static void clearCache() {
        FIELD_CACHE.clear();
        METHOD_CACHE.clear();
        ANNOTATION_CACHE.clear();
    }
}
```

### 9.2 æœ€ä½³å®è·µå»ºè®®

```java
public class AnnotationBestPractices {
    
    /**
     * âœ… æ¨èï¼šå¯åŠ¨æ—¶é¢„å¤„ç†æ³¨è§£
     */
    public void goodPractice() {
        // åœ¨åº”ç”¨å¯åŠ¨æ—¶å¤„ç†æ³¨è§£ï¼Œç¼“å­˜ç»“æœ
        Map<Class<?>, AnnotationMetadata> metadataCache = new HashMap<>();
        
        for (Class<?> clazz : getAllBusinessClasses()) {
            AnnotationMetadata metadata = analyzeAnnotations(clazz);
            metadataCache.put(clazz, metadata);
        }
        
        // è¿è¡Œæ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å…ƒæ•°æ®
    }
    
    /**
     * âŒ ä¸æ¨èï¼šè¿è¡Œæ—¶é¢‘ç¹åå°„
     */
    public void badPractice(Object obj) {
        // æ¯æ¬¡ä¸šåŠ¡è°ƒç”¨éƒ½è¿›è¡Œåå°„ï¼Œæ€§èƒ½å¾ˆå·®
        Class<?> clazz = obj.getClass();
        for (Method method : clazz.getDeclaredMethods()) {
            if (method.isAnnotationPresent(LogTrace.class)) {
                // å¤„ç†æ—¥å¿—...
            }
        }
    }
    
    /**
     * âœ… æ¨èï¼šä½¿ç”¨å·¥å…·ç±»å°è£…
     */
    public static class AnnotationUtils {
        
        public static <T extends Annotation> T findAnnotation(Method method, Class<T> annotationType) {
            // å…ˆæŸ¥æ‰¾æ–¹æ³•æœ¬èº«çš„æ³¨è§£
            T annotation = method.getAnnotation(annotationType);
            if (annotation != null) {
                return annotation;
            }
            
            // æŸ¥æ‰¾æ–¹æ³•æ‰€åœ¨ç±»çš„æ³¨è§£
            return method.getDeclaringClass().getAnnotation(annotationType);
        }
        
        public static boolean hasAnyAnnotation(AnnotatedElement element, Class<? extends Annotation>... annotationTypes) {
            for (Class<? extends Annotation> type : annotationTypes) {
                if (element.isAnnotationPresent(type)) {
                    return true;
                }
            }
            return false;
        }
        
        public static List<Method> findAnnotatedMethods(Class<?> clazz, Class<? extends Annotation> annotationType) {
            return Arrays.stream(clazz.getDeclaredMethods())
                    .filter(method -> method.isAnnotationPresent(annotationType))
                    .collect(Collectors.toList());
        }
    }
    
    private AnnotationMetadata analyzeAnnotations(Class<?> clazz) {
        // åˆ†æç±»çš„æ³¨è§£å…ƒæ•°æ®
        return new AnnotationMetadata();
    }
    
    private List<Class<?>> getAllBusinessClasses() {
        // è·å–æ‰€æœ‰ä¸šåŠ¡ç±»
        return Collections.emptyList();
    }
    
    private static class AnnotationMetadata {
        // æ³¨è§£å…ƒæ•°æ®
    }
}
```

### 9.3 å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ

```java
public class AnnotationPitfalls {
    
    /**
     * é™·é˜±1ï¼šå¿˜è®°è®¾ç½®@Retention(RUNTIME)
     */
    // âŒ é”™è¯¯ï¼šé»˜è®¤æ˜¯CLASSï¼Œè¿è¡Œæ—¶æ— æ³•è·å–
    public @interface WrongAnnotation {
        String value();
    }
    
    // âœ… æ­£ç¡®ï¼šæ˜ç¡®è®¾ç½®RUNTIME
    @Retention(RetentionPolicy.RUNTIME)
    public @interface CorrectAnnotation {
        String value();
    }
    
    /**
     * é™·é˜±2ï¼šè¯¯ä»¥ä¸ºæ–¹æ³•æ³¨è§£ä¼šè¢«ç»§æ‰¿
     */
    public void testMethodInheritance() {
        class Parent {
            @LogTrace(operation = "çˆ¶ç±»æ–¹æ³•")
            public void method() {}
        }
        
        class Child extends Parent {
            @Override
            public void method() {
                // è¿™ä¸ªæ–¹æ³•ä¸ä¼šç»§æ‰¿çˆ¶ç±»çš„@LogTraceæ³¨è§£
            }
        }
        
        try {
            Method childMethod = Child.class.getMethod("method");
            LogTrace annotation = childMethod.getAnnotation(LogTrace.class);
            System.out.println("å­ç±»æ–¹æ³•æ³¨è§£ï¼š" + (annotation != null ? "å­˜åœ¨" : "ä¸å­˜åœ¨")); // è¾“å‡ºï¼šä¸å­˜åœ¨
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }
    
    /**
     * é™·é˜±3ï¼šåœ¨å¾ªç¯ä¸­é¢‘ç¹ä½¿ç”¨åå°„
     */
    // âŒ é”™è¯¯ï¼šæ¯æ¬¡å¾ªç¯éƒ½åå°„
    public void processItems(List<Object> items) {
        for (Object item : items) {
            Class<?> clazz = item.getClass();
            for (Field field : clazz.getDeclaredFields()) {
                // é¢‘ç¹åå°„ï¼Œæ€§èƒ½å·®
                if (field.isAnnotationPresent(ExcelColumn.class)) {
                    // å¤„ç†...
                }
            }
        }
    }
    
    // âœ… æ­£ç¡®ï¼šé¢„å¤„ç†åå°„ä¿¡æ¯
    private static final Map<Class<?>, List<Field>> EXCEL_FIELDS_CACHE = new ConcurrentHashMap<>();
    
    public void processItemsOptimized(List<Object> items) {
        for (Object item : items) {
            Class<?> clazz = item.getClass();
            
            // ä½¿ç”¨ç¼“å­˜çš„å­—æ®µä¿¡æ¯
            List<Field> excelFields = EXCEL_FIELDS_CACHE.computeIfAbsent(clazz, k -> {
                return Arrays.stream(k.getDeclaredFields())
                        .filter(field -> field.isAnnotationPresent(ExcelColumn.class))
                        .collect(Collectors.toList());
            });
            
            for (Field field : excelFields) {
                // å¤„ç†...
            }
        }
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ

```
ğŸ”¸ æ³¨è§£æœ¬è´¨ï¼šç‰¹æ®Šæ¥å£ï¼Œç¼–è¯‘åç”Ÿæˆå­—èŠ‚ç 
ğŸ”¸ åå°„ä½œç”¨ï¼šè¿è¡Œæ—¶åˆ†æç±»ç»“æ„ï¼Œè·å–æ³¨è§£ä¿¡æ¯
ğŸ”¸ å‰ææ¡ä»¶ï¼šæ³¨è§£å¿…é¡»ä½¿ç”¨@Retention(RUNTIME)
ğŸ”¸ APIæ–¹æ³•ï¼šgetAnnotation()ã€isAnnotationPresent()ç­‰
ğŸ”¸ æ”¯æŒä½ç½®ï¼šç±»ã€æ–¹æ³•ã€å­—æ®µã€æ„é€ å™¨ã€å‚æ•°
```

### 10.2 å…³é”®æŠ€æœ¯è¦ç‚¹

```java
// æ³¨è§£+åå°„çš„æ ‡å‡†å¤„ç†æ¨¡å¼
public static void processAnnotations(Class<?> clazz) {
    // 1. è·å–æ³¨è§£
    if (clazz.isAnnotationPresent(MyAnnotation.class)) {
        MyAnnotation annotation = clazz.getAnnotation(MyAnnotation.class);
        
        // 2. è¯»å–æ³¨è§£å±æ€§
        String value = annotation.value();
        
        // 3. æ‰§è¡Œç›¸åº”é€»è¾‘
        handleAnnotation(value);
    }
}
```

### 10.3 ç»§æ‰¿è§„åˆ™è®°å¿†

| **æ³¨è§£ä½ç½®** | **æ˜¯å¦æ”¯æŒç»§æ‰¿** | **æ¡ä»¶è¦æ±‚** |
|------------|----------------|------------|
| `ç±»çº§åˆ«` | `âœ… æ”¯æŒ` | `éœ€è¦@Inheritedå…ƒæ³¨è§£` |
| `æ–¹æ³•çº§åˆ«` | `âŒ ä¸æ”¯æŒ` | `æ— è®ºæ˜¯å¦æœ‰@Inherited` |
| `å­—æ®µçº§åˆ«` | `âŒ ä¸æ”¯æŒ` | `æ— è®ºæ˜¯å¦æœ‰@Inherited` |
| `æ¥å£æ³¨è§£` | `âŒ ä¸æ”¯æŒ` | `å®ç°ç±»ä¸ä¼šç»§æ‰¿æ¥å£æ³¨è§£` |

### 10.4 æ€§èƒ½ä¼˜åŒ–è¦ç‚¹

```
ğŸ”¸ ç¼“å­˜ç­–ç•¥ï¼šé¢„å¤„ç†æ³¨è§£ä¿¡æ¯ï¼Œé¿å…é‡å¤åå°„
ğŸ”¸ å¯åŠ¨æ—¶å¤„ç†ï¼šåœ¨åº”ç”¨å¯åŠ¨é˜¶æ®µå®Œæˆæ³¨è§£æ‰«æ
ğŸ”¸ å·¥å…·ç±»å°è£…ï¼šç»Ÿä¸€æ³¨è§£æ“ä½œAPIï¼Œæé«˜ä»£ç å¤ç”¨
ğŸ”¸ é¿å…é¢‘ç¹åå°„ï¼šåœ¨å¾ªç¯ä¸­ä½¿ç”¨ç¼“å­˜çš„å…ƒæ•°æ®
ğŸ”¸ åˆç†é€‰æ‹©APIï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„åå°„æ–¹æ³•
```

### 10.5 å®é™…åº”ç”¨ä»·å€¼

- **æ¡†æ¶å¼€å‘**ï¼šSpringã€MyBatisç­‰æ¡†æ¶çš„æ ¸å¿ƒæœºåˆ¶
- **é…ç½®ç®¡ç†**ï¼šæ³¨è§£é©±åŠ¨çš„é…ç½®åŠ è½½å’Œç»‘å®š
- **AOPå®ç°**ï¼šåŸºäºæ³¨è§£çš„åˆ‡é¢ç¼–ç¨‹
- **æ•°æ®æ˜ å°„**ï¼šORMæ¡†æ¶çš„å®ä½“æ˜ å°„
- **å‚æ•°æ ¡éªŒ**ï¼šBean Validationçš„å®ç°åŸºç¡€
- **ä»£ç ç”Ÿæˆ**ï¼šAPTå’Œç¼–è¯‘æœŸä»£ç ç”Ÿæˆ

### 10.6 æœ€ä½³å®è·µæ€»ç»“

```
è®¾è®¡åŸåˆ™ï¼š
âœ… æ˜ç¡®æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨èŒƒå›´
âœ… æä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œç®€åŒ–ä½¿ç”¨
âœ… æ³¨è§£å‘½åè¦æ¸…æ™°è¡¨è¾¾æ„å›¾

ä½¿ç”¨åŸåˆ™ï¼š
âœ… ä¼˜å…ˆåœ¨å¯åŠ¨æ—¶å¤„ç†æ³¨è§£ï¼Œç¼“å­˜ç»“æœ
âœ… ä½¿ç”¨å·¥å…·ç±»ç»Ÿä¸€æ³¨è§£æ“ä½œé€»è¾‘
âœ… é¿å…åœ¨æ€§èƒ½æ•æ„Ÿè·¯å¾„ä¸Šé¢‘ç¹åå°„

æ€§èƒ½åŸåˆ™ï¼š
âœ… åˆç†ä½¿ç”¨ç¼“å­˜å‡å°‘åå°„å¼€é”€
âœ… æ‰¹é‡å¤„ç†ä¼˜äºé€ä¸ªå¤„ç†
âœ… é€‰æ‹©åˆé€‚çš„åå°„APIæ–¹æ³•
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- åå°„æ˜¯æ³¨è§£è¿è¡Œæ—¶å¤„ç†çš„æ¡¥æ¢ï¼Œ@Retention(RUNTIME)æ˜¯å‰æ
- æ³¨è§£ç»§æ‰¿åªé™äºç±»çº§åˆ«ä¸”éœ€è¦@Inheritedå…ƒæ³¨è§£
- æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æ˜¯ç¼“å­˜å’Œé¢„å¤„ç†ï¼Œé¿å…è¿è¡Œæ—¶é¢‘ç¹åå°„
- æŒæ¡åå°„+æ³¨è§£æ˜¯ç†è§£ç°ä»£Javaæ¡†æ¶çš„åŸºç¡€æŠ€èƒ½