---
title: 4ã€å¸¸ç”¨çº¿ç¨‹æ§åˆ¶æ–¹æ³•
---
## ğŸ“š ç›®å½•

1. [çº¿ç¨‹æ§åˆ¶æ–¹æ³•æ¦‚è¿°](#1-çº¿ç¨‹æ§åˆ¶æ–¹æ³•æ¦‚è¿°)
2. [åŸºç¡€æ§åˆ¶æ–¹æ³•](#2-åŸºç¡€æ§åˆ¶æ–¹æ³•)
3. [çº¿ç¨‹ç­‰å¾…ä¸è°ƒåº¦](#3-çº¿ç¨‹ç­‰å¾…ä¸è°ƒåº¦)
4. [çº¿ç¨‹ä¸­æ–­æœºåˆ¶](#4-çº¿ç¨‹ä¸­æ–­æœºåˆ¶)
5. [çº¿ç¨‹é€šä¿¡æ–¹æ³•](#5-çº¿ç¨‹é€šä¿¡æ–¹æ³•)
6. [æ–¹æ³•å¯¹æ¯”ä¸æ€»ç»“](#6-æ–¹æ³•å¯¹æ¯”ä¸æ€»ç»“)
7. [å¸¸è§è¯¯åŒºä¸æœ€ä½³å®è·µ](#7-å¸¸è§è¯¯åŒºä¸æœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ çº¿ç¨‹æ§åˆ¶æ–¹æ³•æ¦‚è¿°


### 1.1 æ–¹æ³•åˆ†ç±»ä½“ç³»


```java
å¸¸ç”¨çº¿ç¨‹æ§åˆ¶æ–¹æ³•ï¼ˆJavaï¼‰
â”œâ”€â”€ åŸºç¡€æ§åˆ¶
â”‚   â”œâ”€â”€ start() - å¯åŠ¨æ–°çº¿ç¨‹å¹¶æ‰§è¡Œ run() æ–¹æ³• â˜…â˜…â˜…â˜…â˜…
â”‚   â”œâ”€â”€ run() - æ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šå¯åŠ¨æ–°çº¿ç¨‹ â˜…â˜…â˜…
â”‚   â””â”€â”€ isAlive() - åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä»å¤„äºæ´»åŠ¨çŠ¶æ€ â˜…â˜…â˜…

â”œâ”€â”€ ç­‰å¾…ä¸è°ƒåº¦
â”‚   â”œâ”€â”€ sleep(long millis) - å½“å‰çº¿ç¨‹ä¼‘çœ æŒ‡å®šæ—¶é—´ â˜…â˜…â˜…â˜…
â”‚   â”œâ”€â”€ join() - ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå†ç»§ç»­ â˜…â˜…â˜…â˜…
â”‚   â””â”€â”€ yield() - è®©å½“å‰çº¿ç¨‹ä¸»åŠ¨è®©å‡º CPU ä½¿ç”¨æƒ â˜…â˜…

â”œâ”€â”€ ä¸­æ–­æ§åˆ¶
â”‚   â”œâ”€â”€ interrupt() - ä¸­æ–­çº¿ç¨‹ï¼Œè®¾ç½®ä¸­æ–­æ ‡å¿—ä½ â˜…â˜…â˜…â˜…
â”‚   â”œâ”€â”€ isInterrupted() - æ£€æŸ¥çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰ â˜…â˜…â˜…
â”‚   â””â”€â”€ interrupted() - æ£€æŸ¥å¹¶æ¸…é™¤å½“å‰çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿— â˜…â˜…â˜…

â””â”€â”€ çº¿ç¨‹é€šä¿¡
    â”œâ”€â”€ wait() - ä½¿å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œé‡Šæ”¾é” â˜…â˜…â˜…
    â”œâ”€â”€ notify() - å”¤é†’ä¸€ä¸ªåœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…çš„çº¿ç¨‹ â˜…â˜…â˜…
    â””â”€â”€ notifyAll() - å”¤é†’æ‰€æœ‰åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…çš„çº¿ç¨‹ â˜…â˜…â˜…
```

### 1.2 ä½¿ç”¨é¢‘ç‡ä¸é‡è¦æ€§


| ç±»åˆ« | **æ–¹æ³•** | **é‡è¦æ€§** | **ä½¿ç”¨åœºæ™¯** |
|------|---------|----------|------------|
| **å¿…é¡»æŒæ¡** | `start()` | `â˜…â˜…â˜…â˜…â˜…` | `å¯åŠ¨çº¿ç¨‹çš„æ ‡å‡†æ–¹æ³•` |
|  | `sleep()` | `â˜…â˜…â˜…â˜…` | `å»¶è¿Ÿæ‰§è¡Œã€å®šæ—¶ä»»åŠ¡` |
|  | `join()` | `â˜…â˜…â˜…â˜…` | `çº¿ç¨‹åè°ƒã€é¡ºåºæ§åˆ¶` |
|  | `interrupt()` | `â˜…â˜…â˜…â˜…` | `ä¼˜é›…ä¸­æ–­çº¿ç¨‹` |
| **å¸¸ç”¨** | `isAlive()` | `â˜…â˜…â˜…` | `çº¿ç¨‹çŠ¶æ€æ£€æŸ¥` |
|  | `wait/notify` | `â˜…â˜…â˜…` | `çº¿ç¨‹é—´é€šä¿¡` |
| **äº†è§£å³å¯** | `yield()` | `â˜…â˜…` | `è°ƒè¯•ã€æµ‹è¯•åœºæ™¯` |
|  | `run()` | `â˜…â˜…â˜…` | `ä»»åŠ¡å®šä¹‰ï¼Œä¸ç›´æ¥è°ƒç”¨` |

---

## 2. ğŸš€ åŸºç¡€æ§åˆ¶æ–¹æ³•


### 2.1 start() vs run()


**ğŸ”¸ æ ¸å¿ƒåŒºåˆ«**
```
start() - å¯åŠ¨æ–°çº¿ç¨‹çš„å”¯ä¸€æ–¹å¼
â€¢ åˆ›å»ºæ–°çš„æ‰§è¡Œçº¿ç¨‹
â€¢ å¼‚æ­¥æ‰§è¡Œrun()æ–¹æ³•
â€¢ åªèƒ½è°ƒç”¨ä¸€æ¬¡

run() - æ™®é€šæ–¹æ³•è°ƒç”¨
â€¢ åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œ
â€¢ ä¸åˆ›å»ºæ–°çº¿ç¨‹
â€¢ å¯ä»¥å¤šæ¬¡è°ƒç”¨
```

**ğŸ’» ä»£ç ç¤ºä¾‹**
```java
public class StartRunDemo {
    public static void main(String[] args) {
        Thread t = new Thread(() -> {
            System.out.println("å­çº¿ç¨‹æ‰§è¡Œ: " + Thread.currentThread().getName());
            for (int i = 1; i <= 3; i++) {
                System.out.println("è®¡æ•°: " + i);
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        });

        System.out.println("=== ä½¿ç”¨ start() æ–¹æ³• ===");
        t.start(); // âœ… æ­£ç¡®ï¼šå¯åŠ¨æ–°çº¿ç¨‹ï¼Œå¼‚æ­¥æ‰§è¡Œ
        
        System.out.println("ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ: " + Thread.currentThread().getName());
        
        // âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥è°ƒç”¨run()
        Thread t2 = new Thread(() -> {
            System.out.println("ç›´æ¥è°ƒç”¨run(): " + Thread.currentThread().getName());
        });
        
        System.out.println("=== ç›´æ¥è°ƒç”¨ run() æ–¹æ³• ===");
        t2.run(); // âŒ é”™è¯¯ï¼šåªæ˜¯æ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šåˆ›å»ºæ–°çº¿ç¨‹
    }
}

// ğŸ”¹é‡ç‚¹å¯¹æ¯”ï¼š
// start() - åˆ›å»ºæ–°çº¿ç¨‹ï¼Œè¾“å‡ºå­çº¿ç¨‹åç§°
// run() - å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œè¾“å‡ºä¸»çº¿ç¨‹åç§°
```

**âš ï¸ æ³¨æ„äº‹é¡¹**
```java
// start()æ–¹æ³•çš„é™åˆ¶
Thread t = new Thread(() -> System.out.println("ä»»åŠ¡"));
t.start(); // ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œæ­£å¸¸
// t.start(); // ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ŒæŠ›å‡º IllegalThreadStateException

// æ­£ç¡®çš„é‡å¤æ‰§è¡Œæ–¹å¼
for (int i = 0; i < 3; i++) {
    Thread newThread = new Thread(() -> System.out.println("ä»»åŠ¡ " + i));
    newThread.start(); // æ¯æ¬¡åˆ›å»ºæ–°çš„Threadå®ä¾‹
}
```

### 2.2 isAlive() çŠ¶æ€æ£€æŸ¥


**ğŸ”¸ æ–¹æ³•è¯´æ˜**
```
ä½œç”¨ï¼šåˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä»å¤„äº"æ´»åŠ¨çŠ¶æ€"
æ´»åŠ¨çŠ¶æ€ = å·²å¯åŠ¨ä¸”å°šæœªç»ˆæ­¢
è¿”å›å€¼ï¼šboolean (true/false)
```

**ğŸ’» ä»£ç ç¤ºä¾‹**
```java
public class IsAliveDemo {
    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(() -> {
            System.out.println("çº¿ç¨‹å¼€å§‹æ‰§è¡Œ");
            try {
                Thread.sleep(2000); // æ¨¡æ‹Ÿé•¿æ—¶é—´ä»»åŠ¡
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            System.out.println("çº¿ç¨‹æ‰§è¡Œå®Œæ¯•");
        });

        System.out.println("å¯åŠ¨å‰ isAlive: " + t.isAlive()); // false
        
        t.start();
        System.out.println("å¯åŠ¨å isAlive: " + t.isAlive()); // true
        
        Thread.sleep(1000); // ç­‰å¾…1ç§’ï¼Œçº¿ç¨‹ä»åœ¨è¿è¡Œ
        System.out.println("è¿è¡Œä¸­ isAlive: " + t.isAlive()); // true
        
        Thread.sleep(2000); // å†ç­‰å¾…2ç§’ï¼Œçº¿ç¨‹å·²ç»“æŸ
        System.out.println("ç»“æŸå isAlive: " + t.isAlive()); // false
    }
}

// è¾“å‡ºç¤ºä¾‹ï¼š
// å¯åŠ¨å‰ isAlive: false
// å¯åŠ¨å isAlive: true
// çº¿ç¨‹å¼€å§‹æ‰§è¡Œ
// è¿è¡Œä¸­ isAlive: true
// çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
// ç»“æŸå isAlive: false
```

**ğŸ¯ å®é™…åº”ç”¨åœºæ™¯**
```java
// ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆçš„æ¨¡å¼
public class ThreadMonitor {
    public static void waitForAllThreads(Thread... threads) {
        boolean allFinished = false;
        while (!allFinished) {
            allFinished = true;
            for (Thread t : threads) {
                if (t.isAlive()) {
                    allFinished = false;
                    break;
                }
            }
            if (!allFinished) {
                try {
                    Thread.sleep(100); // è½®è¯¢é—´éš”
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    break;
                }
            }
        }
        System.out.println("æ‰€æœ‰çº¿ç¨‹éƒ½å·²å®Œæˆ");
    }
}
```

---

## 3. â° çº¿ç¨‹ç­‰å¾…ä¸è°ƒåº¦


### 3.1 sleep() ä¼‘çœ æ§åˆ¶


**ğŸ”¸ æ ¸å¿ƒç‰¹æ€§**
```
ä½œç”¨ï¼šè®©å½“å‰çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œæš‚åœæ‰§è¡ŒæŒ‡å®šæ—¶é—´
ç‰¹ç‚¹ï¼šä¸é‡Šæ”¾åŒæ­¥é”ï¼Œä½†å¯ä»¥å“åº”ä¸­æ–­
çŠ¶æ€è½¬æ¢ï¼šRUNNABLE â†’ TIMED_WAITING
```

**ğŸ’» åŸºç¡€ä½¿ç”¨**
```java
public class SleepDemo {
    public static void main(String[] args) {
        System.out.println("å¼€å§‹æ‰§è¡Œ: " + System.currentTimeMillis());
        
        try {
            Thread.sleep(2000); // å½“å‰çº¿ç¨‹ç¡çœ  2 ç§’
        } catch (InterruptedException e) {
            System.out.println("ç¡çœ è¢«ä¸­æ–­äº†ï¼");
            Thread.currentThread().interrupt(); // æ¢å¤ä¸­æ–­çŠ¶æ€
        }
        
        System.out.println("ç¡é†’äº†: " + System.currentTimeMillis());
    }
}
```

**ğŸ”’ sleep()ä¸é‡Šæ”¾é”ç¤ºä¾‹**
```java
public class SleepLockDemo {
    private static final Object lock = new Object();
    
    public static void main(String[] args) {
        // çº¿ç¨‹1ï¼šè·å–é”å¹¶sleep
        Thread t1 = new Thread(() -> {
            synchronized (lock) {
                System.out.println("çº¿ç¨‹1 è·å¾—é”ï¼Œå¼€å§‹sleep");
                try {
                    Thread.sleep(3000); // sleepæœŸé—´ä¸ä¼šé‡Šæ”¾é”
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
                System.out.println("çº¿ç¨‹1 sleepç»“æŸï¼Œé‡Šæ”¾é”");
            }
        });
        
        // çº¿ç¨‹2ï¼šå°è¯•è·å–åŒæ ·çš„é”
        Thread t2 = new Thread(() -> {
            System.out.println("çº¿ç¨‹2 å°è¯•è·å–é”...");
            synchronized (lock) {
                System.out.println("çº¿ç¨‹2 è·å¾—é”");
            }
        });
        
        t1.start();
        try { Thread.sleep(100); } catch (InterruptedException e) {}
        t2.start(); // t2ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°t1é‡Šæ”¾é”
    }
}

// è¾“å‡ºè¯´æ˜ï¼š
// çº¿ç¨‹1 è·å¾—é”ï¼Œå¼€å§‹sleep
// çº¿ç¨‹2 å°è¯•è·å–é”...
// ï¼ˆç­‰å¾…3ç§’ï¼‰
// çº¿ç¨‹1 sleepç»“æŸï¼Œé‡Šæ”¾é”
// çº¿ç¨‹2 è·å¾—é”
```

### 3.2 join() çº¿ç¨‹ç­‰å¾…


**ğŸ”¸ æ ¸å¿ƒæœºåˆ¶**
```
ä½œç”¨ï¼šè®©å½“å‰çº¿ç¨‹ç­‰å¾…æŒ‡å®šçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå†ç»§ç»­æ‰§è¡Œ
åº”ç”¨ï¼šçº¿ç¨‹åè°ƒã€é¡ºåºæ§åˆ¶ã€ç»“æœèšåˆ
å˜ç§ï¼šjoin(timeout) - å¸¦è¶…æ—¶çš„ç­‰å¾…
```

**ğŸ’» åŸºç¡€ç”¨æ³•**
```java
public class JoinExample {
    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(() -> {
            for (int i = 1; i <= 3; i++) {
                System.out.println("å­çº¿ç¨‹æ‰§è¡Œ: " + i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    return;
                }
            }
            System.out.println("å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•");
        });
        
        System.out.println("ä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹");
        t.start();
        
        System.out.println("ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹å®Œæˆ...");
        t.join(); // ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œå†ç»§ç»­
        
        System.out.println("ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ");
    }
}

// è¾“å‡ºé¡ºåºï¼š
// ä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹
// ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹å®Œæˆ...
// å­çº¿ç¨‹æ‰§è¡Œ: 1
// å­çº¿ç¨‹æ‰§è¡Œ: 2
// å­çº¿ç¨‹æ‰§è¡Œ: 3
// å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
// ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ
```

**ğŸ”„ é¡ºåºæ‰§è¡Œæ§åˆ¶**
```java
public class SequentialThreads {
    public static void main(String[] args) throws InterruptedException {
        Thread threadA = new Thread(() -> {
            System.out.println("çº¿ç¨‹Aå¼€å§‹æ‰§è¡Œ");
            try { Thread.sleep(1000); } catch (InterruptedException e) {}
            System.out.println("çº¿ç¨‹Aæ‰§è¡Œå®Œæ¯•");
        });
        
        Thread threadB = new Thread(() -> {
            System.out.println("çº¿ç¨‹Bå¼€å§‹æ‰§è¡Œ");
            try { Thread.sleep(1000); } catch (InterruptedException e) {}
            System.out.println("çº¿ç¨‹Bæ‰§è¡Œå®Œæ¯•");
        });
        
        Thread threadC = new Thread(() -> {
            System.out.println("çº¿ç¨‹Cå¼€å§‹æ‰§è¡Œ");
            try { Thread.sleep(1000); } catch (InterruptedException e) {}
            System.out.println("çº¿ç¨‹Cæ‰§è¡Œå®Œæ¯•");
        });

        // é¡ºåºæ‰§è¡Œï¼šA â†’ B â†’ C
        threadA.start();
        threadA.join(); // ç­‰å¾…Aå®Œæˆ

        threadB.start();
        threadB.join(); // ç­‰å¾…Bå®Œæˆ

        threadC.start();
        threadC.join(); // ç­‰å¾…Cå®Œæˆ
        
        System.out.println("æ‰€æœ‰çº¿ç¨‹éƒ½å·²å®Œæˆ");
    }
}
```

**â±ï¸ å¸¦è¶…æ—¶çš„join()**
```java
public class JoinTimeoutExample {
    public static void main(String[] args) throws InterruptedException {
        Thread longTask = new Thread(() -> {
            try {
                System.out.println("é•¿æ—¶é—´ä»»åŠ¡å¼€å§‹...");
                Thread.sleep(5000); // æ‰§è¡Œ5ç§’
                System.out.println("é•¿æ—¶é—´ä»»åŠ¡å®Œæˆ");
            } catch (InterruptedException e) {
                System.out.println("é•¿æ—¶é—´ä»»åŠ¡è¢«ä¸­æ–­");
            }
        });
        
        longTask.start();
        
        System.out.println("ç­‰å¾…ä»»åŠ¡å®Œæˆï¼Œæœ€å¤šç­‰å¾…2ç§’...");
        longTask.join(2000); // æœ€å¤šç­‰å¾…2ç§’
        
        if (longTask.isAlive()) {
            System.out.println("ä»»åŠ¡è¶…æ—¶ï¼Œä¸»çº¿ç¨‹ä¸å†ç­‰å¾…");
            longTask.interrupt(); // ä¸­æ–­é•¿æ—¶é—´ä»»åŠ¡
        } else {
            System.out.println("ä»»åŠ¡åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ");
        }
    }
}
```

### 3.3 yield() ä¸»åŠ¨è®©æƒ


**ğŸ”¸ æ–¹æ³•ç‰¹æ€§**
```
ä½œç”¨ï¼šæç¤ºçº¿ç¨‹è°ƒåº¦å™¨å½“å‰çº¿ç¨‹æ„¿æ„è®©å‡º CPU ä½¿ç”¨æƒ
ç‰¹ç‚¹ï¼šåªæ˜¯"å»ºè®®"ï¼Œè°ƒåº¦å™¨å¯èƒ½å¿½ç•¥
ä½¿ç”¨åœºæ™¯ï¼šè°ƒè¯•ã€æµ‹è¯•ã€ä¸´æ—¶è®©æƒ
```

**ğŸ’» ä»£ç ç¤ºä¾‹**
```java
public class YieldDemo {
    public static void main(String[] args) {
        Runnable task = () -> {
            for (int i = 1; i <= 5; i++) {
                System.out.println(Thread.currentThread().getName() + ": " + i);
                Thread.yield(); // æç¤ºè®©å‡º CPUï¼Œä½†ä¸ä¿è¯
                
                // æ·»åŠ å°‘é‡å»¶è¿Ÿä»¥è§‚å¯Ÿæ•ˆæœ
                try {
                    Thread.sleep(10);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        };

        Thread t1 = new Thread(task, "çº¿ç¨‹A");
        Thread t2 = new Thread(task, "çº¿ç¨‹B");
        
        t1.start();
        t2.start();
    }
}

// ğŸ”¹æ³¨æ„ï¼š
// yield() æ˜¯"å»ºè®®"è°ƒåº¦å™¨åˆ‡æ¢ï¼Œä¸ä¿è¯æ‰§è¡Œ
// å®é™…æ•ˆæœä¾èµ–äº JVM å’Œæ“ä½œç³»ç»Ÿå®ç°
// ç”Ÿäº§ç¯å¢ƒæ…ç”¨ï¼Œä¸»è¦ç”¨äºè°ƒè¯•å’Œæµ‹è¯•
```

**âš ï¸ yield()ä½¿ç”¨æ³¨æ„äº‹é¡¹**
```java
// âŒ é”™è¯¯ç”¨æ³•ï¼šä¾èµ–yield()æ§åˆ¶ä¸šåŠ¡é€»è¾‘
public class BadYieldUsage {
    private static boolean flag = false;
    
    public static void main(String[] args) {
        Thread t1 = new Thread(() -> {
            while (!flag) {
                Thread.yield(); // âŒ ä¸åº”è¯¥ä¾èµ–yield()ç­‰å¾…æ¡ä»¶
                // æ­£ç¡®åšæ³•åº”è¯¥ä½¿ç”¨wait/notifyæˆ–å…¶ä»–åŒæ­¥æœºåˆ¶
            }
        });
        
        // âœ… æ­£ç¡®ç”¨æ³•ï¼šä»…ç”¨äºè°ƒè¯•æˆ–æµ‹è¯•
        Thread t2 = new Thread(() -> {
            for (int i = 0; i < 100; i++) {
                if (i % 10 == 0) {
                    Thread.yield(); // å¶å°”è®©æƒï¼Œä¾¿äºè§‚å¯Ÿå…¶ä»–çº¿ç¨‹æ‰§è¡Œ
                }
                System.out.println("å¤„ç†æ•°æ®: " + i);
            }
        });
    }
}
```

---

## 4. â›” çº¿ç¨‹ä¸­æ–­æœºåˆ¶


### 4.1 ä¸­æ–­æœºåˆ¶æ¦‚è¿°


**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µ**
```
ä¸­æ–­æœºåˆ¶ï¼šJavaæä¾›çš„çº¿ç¨‹åä½œå¼åœæ­¢æœºåˆ¶
ç‰¹ç‚¹ï¼šä¸æ˜¯å¼ºåˆ¶ç»ˆæ­¢ï¼Œè€Œæ˜¯å‘é€åœæ­¢è¯·æ±‚
åŸç†ï¼šé€šè¿‡ä¸­æ–­æ ‡å¿—ä½è¿›è¡Œé€šä¿¡
ä¼˜åŠ¿ï¼šå®‰å…¨ã€å¯æ§ã€èµ„æºå‹å¥½
```

**ğŸ¯ ä¸­æ–­æœºåˆ¶æ¶æ„å›¾**
```
çº¿ç¨‹ä¸­æ–­æœºåˆ¶ç»“æ„ï¼š

å‘èµ·ä¸­æ–­                          å“åº”ä¸­æ–­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…¶ä»–çº¿ç¨‹     â”‚   interrupt()   â”‚  ç›®æ ‡çº¿ç¨‹    â”‚
â”‚ è°ƒç”¨        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚             â”‚
â”‚ t.interrupt()â”‚                â”‚ æ£€æŸ¥ä¸­æ–­æ ‡å¿—  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ å†³å®šå¦‚ä½•å“åº”  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                              â”‚ ä¸­æ–­æ ‡å¿—ä½  â”‚
                              â”‚ (boolean) â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 interrupt() å‘èµ·ä¸­æ–­


**ğŸ”¸ æ–¹æ³•æœºåˆ¶**
```
ä½œç”¨ï¼šè¯·æ±‚ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œè®¾ç½®å…¶"ä¸­æ–­æ ‡å¿—ä½"ä¸º true
ç‰¹ç‚¹ï¼šä¸ä¼šå¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹ï¼Œéœ€è¦ç›®æ ‡çº¿ç¨‹é…åˆæ£€æŸ¥
åº”ç”¨ï¼šä¼˜é›…åœæ­¢çº¿ç¨‹çš„æ¨èæ–¹å¼
```

**ğŸ’» åŸºç¡€ä½¿ç”¨**
```java
public class InterruptDemo {
    public static void main(String[] args) throws InterruptedException {
        Thread worker = new Thread(() -> {
            int count = 0;
            // æ£€æŸ¥ä¸­æ–­æ ‡å¿—ï¼Œé…åˆä¸­æ–­è¯·æ±‚
            while (!Thread.currentThread().isInterrupted()) {
                System.out.println("å·¥ä½œä¸­... " + (++count));
                try {
                    Thread.sleep(500); // æ¨¡æ‹Ÿå·¥ä½œ
                } catch (InterruptedException e) {
                    System.out.println("åœ¨sleepä¸­è¢«ä¸­æ–­");
                    // é‡è¦ï¼šæ¢å¤ä¸­æ–­çŠ¶æ€
                    Thread.currentThread().interrupt();
                    break;
                }
            }
            System.out.println("çº¿ç¨‹æ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼Œä¼˜é›…é€€å‡º");
        });

        worker.start();
        
        // ä¸»çº¿ç¨‹ç­‰å¾…3ç§’åå‘èµ·ä¸­æ–­
        Thread.sleep(3000);
        System.out.println("ä¸»çº¿ç¨‹å‘èµ·ä¸­æ–­è¯·æ±‚");
        worker.interrupt(); // å‘èµ·ä¸­æ–­
        
        // ç­‰å¾…å·¥ä½œçº¿ç¨‹ç»“æŸ
        worker.join();
        System.out.println("ç¨‹åºç»“æŸ");
    }
}
```

**ğŸ”„ ä¸­æ–­å¤„ç†çš„æœ€ä½³å®è·µ**
```java
public class InterruptBestPractice {
    public static void main(String[] args) throws InterruptedException {
        Thread task = new Thread(() -> {
            try {
                doWork(); // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
            } catch (InterruptedException e) {
                System.out.println("ä»»åŠ¡è¢«ä¸­æ–­ï¼Œæ¸…ç†èµ„æº...");
                // æ¸…ç†èµ„æºçš„ä»£ç 
                cleanup();
            }
        });
        
        task.start();
        Thread.sleep(2000);
        task.interrupt(); // ä¸­æ–­ä»»åŠ¡
        task.join();
    }
    
    private static void doWork() throws InterruptedException {
        for (int i = 0; i < 10; i++) {
            // æ£€æŸ¥ä¸­æ–­çŠ¶æ€
            if (Thread.currentThread().isInterrupted()) {
                throw new InterruptedException("ä»»åŠ¡è¢«ä¸­æ–­");
            }
            
            System.out.println("æ‰§è¡Œå·¥ä½œæ­¥éª¤: " + i);
            Thread.sleep(500); // å¯ä¸­æ–­çš„ç­‰å¾…
        }
    }
    
    private static void cleanup() {
        System.out.println("æ¸…ç†èµ„æºå®Œæˆ");
    }
}
```

### 4.3 isInterrupted() æ£€æŸ¥ä¸­æ–­


**ğŸ”¸ æ–¹æ³•ç‰¹æ€§**
```
ä½œç”¨ï¼šæ£€æŸ¥æŸä¸ªçº¿ç¨‹æ˜¯å¦å·²è¢«ä¸­æ–­
ç‰¹ç‚¹ï¼šä¸ä¼šæ¸…é™¤ä¸­æ–­çŠ¶æ€ï¼Œå¯å¤šæ¬¡æ£€æŸ¥
ç”¨æ³•ï¼šå®ä¾‹æ–¹æ³•ï¼Œæ£€æŸ¥ç‰¹å®šçº¿ç¨‹
```

**ğŸ’» ä½¿ç”¨ç¤ºä¾‹**
```java
public class IsInterruptedDemo {
    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(() -> {
            while (true) {
                // æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­
                if (Thread.currentThread().isInterrupted()) {
                    System.out.println("æ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·ï¼Œå‡†å¤‡é€€å‡º");
                    break;
                }
                
                System.out.println("æ­£åœ¨æ‰§è¡Œä»»åŠ¡...");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    System.out.println("sleepè¢«ä¸­æ–­");
                    // æ¢å¤ä¸­æ–­çŠ¶æ€ï¼Œå› ä¸ºInterruptedExceptionä¼šæ¸…é™¤ä¸­æ–­æ ‡å¿—
                    Thread.currentThread().interrupt();
                }
            }
            
            // å†æ¬¡æ£€æŸ¥ä¸­æ–­çŠ¶æ€
            System.out.println("é€€å‡ºå‰ä¸­æ–­çŠ¶æ€: " + 
                             Thread.currentThread().isInterrupted());
        });

        t.start();
        Thread.sleep(3000);
        
        System.out.println("å‘èµ·ä¸­æ–­å‰çŠ¶æ€: " + t.isInterrupted()); // false
        t.interrupt();
        System.out.println("å‘èµ·ä¸­æ–­åçŠ¶æ€: " + t.isInterrupted()); // true
        
        t.join();
    }
}
```

### 4.4 interrupted() æ£€æŸ¥å¹¶æ¸…é™¤


**ğŸ”¸ æ–¹æ³•ç‰¹æ€§**
```
ä½œç”¨ï¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶æ¸…é™¤ä¸­æ–­æ ‡å¿—
ç‰¹ç‚¹ï¼šé™æ€æ–¹æ³•ï¼Œåªæ£€æŸ¥å½“å‰çº¿ç¨‹ï¼Œè°ƒç”¨åä¸­æ–­çŠ¶æ€å˜ä¸ºfalse
ç”¨æ³•ï¼šé€‚åˆåªæ£€æŸ¥ä¸€æ¬¡çš„æƒ…å†µ
```

**ğŸ’» ä½¿ç”¨ç¤ºä¾‹**
```java
public class InterruptedDemo {
    public static void main(String[] args) {
        // æ‰‹åŠ¨è®¾ç½®å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€
        Thread.currentThread().interrupt();
        
        System.out.println("ç¬¬ä¸€æ¬¡æ£€æŸ¥: " + Thread.interrupted()); // trueï¼Œä¸”æ¸…é™¤æ ‡å¿—
        System.out.println("ç¬¬äºŒæ¬¡æ£€æŸ¥: " + Thread.interrupted()); // false
        System.out.println("isInterrupted: " + Thread.currentThread().isInterrupted()); // false
        
        // æ¼”ç¤ºæ¸…é™¤æœºåˆ¶çš„ä½œç”¨
        demonstrateInterruptedUsage();
    }
    
    private static void demonstrateInterruptedUsage() {
        Thread.currentThread().interrupt(); // é‡æ–°è®¾ç½®ä¸­æ–­
        
        // ä½¿ç”¨interrupted()è¿›è¡Œä¸€æ¬¡æ€§æ£€æŸ¥å’Œå¤„ç†
        if (Thread.interrupted()) {  // æ£€æŸ¥å¹¶æ¸…é™¤
            System.out.println("å¤„ç†ä¸­æ–­ä¿¡å·...");
            // å¤„ç†ä¸­æ–­é€»è¾‘
            // ç°åœ¨ä¸­æ–­çŠ¶æ€å·²æ¸…é™¤ï¼Œä¸ä¼šé‡å¤è¿›å…¥æ­¤ä»£ç å—
        }
        
        // å†æ¬¡æ£€æŸ¥ï¼Œåº”è¯¥è¿”å›false
        if (Thread.interrupted()) {
            System.out.println("è¿™è¡Œä¸ä¼šæ‰§è¡Œ");
        } else {
            System.out.println("ä¸­æ–­çŠ¶æ€å·²è¢«æ¸…é™¤");
        }
    }
}
```

### 4.5 ä¸­æ–­æ–¹æ³•å¯¹æ¯”


| æ–¹æ³• | **ç±»å‹** | **æ˜¯å¦æ¸…é™¤ä¸­æ–­æ ‡å¿—** | **åº”ç”¨åœºæ™¯** |
|------|---------|-------------------|------------|
| **interrupt()** | `å®ä¾‹æ–¹æ³•` | `âŒ å¦` | `é€šçŸ¥çº¿ç¨‹åº”è¯¥ä¸­æ–­` |
| **isInterrupted()** | `å®ä¾‹æ–¹æ³•` | `âŒ å¦` | `æ£€æŸ¥çº¿ç¨‹æ˜¯å¦ä¸­æ–­` |
| **interrupted()** | `é™æ€æ–¹æ³•` | `âœ… æ˜¯` | `æ£€æŸ¥å¹¶æ¸…é™¤å½“å‰çº¿ç¨‹ä¸­æ–­çŠ¶æ€` |

---

## 5. ğŸ“ çº¿ç¨‹é€šä¿¡æ–¹æ³•


### 5.1 wait/notify/notifyAllæ¦‚è¿°


**ğŸ”¸ æ ¸å¿ƒæœºåˆ¶**
```
ä½œç”¨ï¼šå®ç°çº¿ç¨‹é—´çš„åä½œå’Œé€šä¿¡
åŸç†ï¼šåŸºäºå¯¹è±¡ç›‘è§†å™¨é”çš„ç­‰å¾…/é€šçŸ¥æœºåˆ¶
è¦æ±‚ï¼šå¿…é¡»åœ¨synchronizedå—ä¸­ä½¿ç”¨
åœºæ™¯ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…ã€çº¿ç¨‹åè°ƒç­‰
```

**ğŸ—ï¸ é€šä¿¡æœºåˆ¶æ¶æ„å›¾**
```
çº¿ç¨‹é€šä¿¡æœºåˆ¶ï¼š

ç­‰å¾…çº¿ç¨‹                    é€šçŸ¥çº¿ç¨‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·å–é”      â”‚            â”‚ è·å–é”      â”‚
â”‚ â†“          â”‚            â”‚ â†“          â”‚
â”‚ è°ƒç”¨wait()   â”‚            â”‚ æ‰§è¡Œä¸šåŠ¡é€»è¾‘  â”‚
â”‚ â†“          â”‚            â”‚ â†“          â”‚
â”‚ é‡Šæ”¾é”      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ è°ƒç”¨notify() â”‚
â”‚ â†“          â”‚            â”‚ â†“          â”‚
â”‚ è¿›å…¥ç­‰å¾…     â”‚            â”‚ é‡Šæ”¾é”      â”‚
â”‚ â†“          â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ è¢«å”¤é†’      â”‚                   â”‚
â”‚ â†“          â”‚                   â”‚
â”‚ é‡æ–°è·å–é”   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â†“          â”‚
â”‚ ç»§ç»­æ‰§è¡Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 wait() ç­‰å¾…æœºåˆ¶


**ğŸ”¸ æ–¹æ³•ç‰¹æ€§**
```
ä½œç”¨ï¼šä½¿çº¿ç¨‹ç­‰å¾…å¹¶é‡Šæ”¾å½“å‰å¯¹è±¡é”ï¼Œç›´åˆ°è¢«å”¤é†’
ç‰¹ç‚¹ï¼šå¿…é¡»åœ¨synchronizedå—ä¸­ä½¿ç”¨ï¼Œä¼šé‡Šæ”¾é”
çŠ¶æ€è½¬æ¢ï¼šRUNNABLE â†’ WAITING
å”¤é†’æ–¹å¼ï¼šnotify()ã€notifyAll()æˆ–ä¸­æ–­
```

**ğŸ’» åŸºç¡€ä½¿ç”¨**
```java
public class WaitExample {
    private static final Object lock = new Object();
    private static boolean condition = false;
    
    public static void main(String[] args) throws InterruptedException {
        // ç­‰å¾…çº¿ç¨‹
        Thread waiter = new Thread(() -> {
            synchronized (lock) {
                System.out.println("ç­‰å¾…çº¿ç¨‹ï¼šæ£€æŸ¥æ¡ä»¶");
                while (!condition) { // ä½¿ç”¨whileå¾ªç¯é˜²æ­¢è™šå‡å”¤é†’
                    try {
                        System.out.println("ç­‰å¾…çº¿ç¨‹ï¼šæ¡ä»¶ä¸æ»¡è¶³ï¼Œå¼€å§‹ç­‰å¾…...");
                        lock.wait(); // é‡Šæ”¾é”å¹¶ç­‰å¾…
                        System.out.println("ç­‰å¾…çº¿ç¨‹ï¼šè¢«å”¤é†’ï¼Œé‡æ–°æ£€æŸ¥æ¡ä»¶");
                    } catch (InterruptedException e) {
                        Thread.currentThread().interrupt();
                        return;
                    }
                }
                System.out.println("ç­‰å¾…çº¿ç¨‹ï¼šæ¡ä»¶æ»¡è¶³ï¼Œç»§ç»­æ‰§è¡Œ");
            }
        });
        
        waiter.start();
        Thread.sleep(2000); // ç¡®ä¿ç­‰å¾…çº¿ç¨‹å…ˆæ‰§è¡Œ
        
        // é€šçŸ¥çº¿ç¨‹
        synchronized (lock) {
            System.out.println("ä¸»çº¿ç¨‹ï¼šæ”¹å˜æ¡ä»¶å¹¶é€šçŸ¥");
            condition = true;
            lock.notify(); // å”¤é†’ç­‰å¾…çš„çº¿ç¨‹
        }
        
        waiter.join();
    }
}
```

### 5.3 notify() vs notifyAll()


**ğŸ”¸ æ–¹æ³•å¯¹æ¯”**
```
notify()ï¼š
â€¢ éšæœºå”¤é†’ä¸€ä¸ªç­‰å¾…çº¿ç¨‹
â€¢ é€‚ç”¨äºåªæœ‰ä¸€ä¸ªç­‰å¾…çº¿ç¨‹çš„åœºæ™¯
â€¢ æ€§èƒ½è¾ƒå¥½ï¼Œä½†å¯èƒ½å¯¼è‡´æ­»é”

notifyAll()ï¼š
â€¢ å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹
â€¢ å®‰å…¨æ€§æ›´é«˜ï¼Œé¿å…æ­»é”
â€¢ æ¨èä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯å¤šç­‰å¾…çº¿ç¨‹åœºæ™¯
```

**ğŸ’» å¯¹æ¯”ç¤ºä¾‹**
```java
public class NotifyVsNotifyAll {
    private static final Object lock = new Object();
    private static int count = 0;
    
    public static void main(String[] args) throws InterruptedException {
        // åˆ›å»ºå¤šä¸ªç­‰å¾…çº¿ç¨‹
        for (int i = 1; i <= 3; i++) {
            Thread waiter = new Thread(new WaitingTask(), "ç­‰å¾…çº¿ç¨‹-" + i);
            waiter.start();
        }
        
        Thread.sleep(1000); // ç¡®ä¿æ‰€æœ‰çº¿ç¨‹éƒ½è¿›å…¥ç­‰å¾…çŠ¶æ€
        
        // ä½¿ç”¨notify()åªèƒ½å”¤é†’ä¸€ä¸ªçº¿ç¨‹
        System.out.println("\n=== ä½¿ç”¨ notify() ===");
        synchronized (lock) {
            count++;
            lock.notify(); // åªå”¤é†’ä¸€ä¸ªçº¿ç¨‹
        }
        
        Thread.sleep(2000);
        
        // ä½¿ç”¨notifyAll()å”¤é†’æ‰€æœ‰çº¿ç¨‹
        System.out.println("\n=== ä½¿ç”¨ notifyAll() ===");
        synchronized (lock) {
            count++;
            lock.notifyAll(); // å”¤é†’æ‰€æœ‰çº¿ç¨‹
        }
        
        Thread.sleep(2000);
    }
    
    static class WaitingTask implements Runnable {
        @Override
        public void run() {
            synchronized (lock) {
                try {
                    System.out.println(Thread.currentThread().getName() + " å¼€å§‹ç­‰å¾…");
                    lock.wait();
                    System.out.println(Thread.currentThread().getName() + 
                                     " è¢«å”¤é†’ï¼Œcount = " + count);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        }
    }
}
```

### 5.4 ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼


**ğŸ’» å®Œæ•´å®ç°**
```java
public class ProducerConsumerExample {
    private static final Object lock = new Object();
    private static final int CAPACITY = 5;
    private static final LinkedList<Integer> buffer = new LinkedList<>();
    
    public static void main(String[] args) {
        // åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹
        Thread producer = new Thread(new Producer(), "ç”Ÿäº§è€…");
        
        // åˆ›å»ºæ¶ˆè´¹è€…çº¿ç¨‹
        Thread consumer1 = new Thread(new Consumer(), "æ¶ˆè´¹è€…1");
        Thread consumer2 = new Thread(new Consumer(), "æ¶ˆè´¹è€…2");
        
        producer.start();
        consumer1.start();
        consumer2.start();
    }
    
    // ç”Ÿäº§è€…
    static class Producer implements Runnable {
        @Override
        public void run() {
            for (int i = 1; i <= 10; i++) {
                synchronized (lock) {
                    // ç¼“å†²åŒºæ»¡æ—¶ç­‰å¾…
                    while (buffer.size() >= CAPACITY) {
                        try {
                            System.out.println("ç¼“å†²åŒºæ»¡ï¼Œç”Ÿäº§è€…ç­‰å¾…...");
                            lock.wait();
                        } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
                            return;
                        }
                    }
                    
                    // ç”Ÿäº§æ•°æ®
                    buffer.offer(i);
                    System.out.println("ç”Ÿäº§è€…ç”Ÿäº§: " + i + "ï¼Œç¼“å†²åŒºå¤§å°: " + buffer.size());
                    
                    // é€šçŸ¥æ¶ˆè´¹è€…
                    lock.notifyAll();
                }
                
                try {
                    Thread.sleep(500); // æ¨¡æ‹Ÿç”Ÿäº§æ—¶é—´
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    break;
                }
            }
        }
    }
    
    // æ¶ˆè´¹è€…
    static class Consumer implements Runnable {
        @Override
        public void run() {
            while (true) {
                synchronized (lock) {
                    // ç¼“å†²åŒºç©ºæ—¶ç­‰å¾…
                    while (buffer.isEmpty()) {
                        try {
                            System.out.println(Thread.currentThread().getName() + " ç¼“å†²åŒºç©ºï¼Œç­‰å¾…...");
                            lock.wait();
                        } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
                            return;
                        }
                    }
                    
                    // æ¶ˆè´¹æ•°æ®
                    Integer data = buffer.poll();
                    System.out.println(Thread.currentThread().getName() + 
                                     " æ¶ˆè´¹: " + data + "ï¼Œç¼“å†²åŒºå¤§å°: " + buffer.size());
                    
                    // é€šçŸ¥ç”Ÿäº§è€…
                    lock.notifyAll();
                }
                
                try {
                    Thread.sleep(1000); // æ¨¡æ‹Ÿæ¶ˆè´¹æ—¶é—´
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    break;
                }
            }
        }
    }
}
```

### 5.5 wait/notifyä½¿ç”¨è¦ç‚¹


**âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹**
```java
// âœ… æ­£ç¡®ç”¨æ³•
synchronized (obj) {
    while (conditionä¸æ»¡è¶³) {
        obj.wait(); // ä½¿ç”¨whileå¾ªç¯ï¼Œé˜²æ­¢è™šå‡å”¤é†’
    }
    // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
}

// âŒ é”™è¯¯ç”¨æ³•
obj.wait(); // æœªåœ¨synchronizedå—ä¸­ä½¿ç”¨ï¼ŒæŠ›å‡ºIllegalMonitorStateException

if (conditionä¸æ»¡è¶³) {
    obj.wait(); // ä½¿ç”¨ifè€Œä¸æ˜¯whileï¼Œå¯èƒ½å‡ºç°è™šå‡å”¤é†’é—®é¢˜
}
```

| è¦ç‚¹ | **è¯´æ˜** |
|------|---------|
| **å¿…é¡»åœ¨synchronizedä¸­** | `å¦åˆ™æŠ›å‡º IllegalMonitorStateException` |
| **wait()ä¼šé‡Šæ”¾é”** | `çº¿ç¨‹åœ¨ç­‰å¾…æœŸé—´ä¸ä¼šå ç”¨é”èµ„æº` |
| **notify()ä¸ä¼šç«‹å³é‡Šæ”¾é”** | `å¿…é¡»ç­‰ synchronized å—ç»“æŸåæ‰é‡Šæ”¾` |
| **æ¨èç”¨notifyAll()** | `æ›´å®‰å…¨ï¼Œé¿å…"å‡æ­»"æƒ…å†µ` |
| **ä½¿ç”¨whileå¾ªç¯** | `é˜²æ­¢è™šå‡å”¤é†’é—®é¢˜` |

---

## 6. âš–ï¸ æ–¹æ³•å¯¹æ¯”ä¸æ€»ç»“


### 6.1 æ ¸å¿ƒæ–¹æ³•å¯¹æ¯”è¡¨


| æ–¹æ³• | **æ˜¯å¦åˆ›å»ºæ–°çº¿ç¨‹** | **æ˜¯å¦ä¸­æ–­çº¿ç¨‹** | **æ˜¯å¦ä¼šé˜»å¡å½“å‰çº¿ç¨‹** | **æ˜¯å¦æ¸…é™¤ä¸­æ–­æ ‡å¿—** |
|------|------------------|---------------|---------------------|-------------------|
| **start()** | `âœ… æ˜¯` | `âŒ å¦` | `âŒ å¦` | `âŒ å¦` |
| **run()** | `âŒ å¦` | `âŒ å¦` | `âŒ å¦` | `âŒ å¦` |
| **sleep()** | `âŒ å¦` | `âŒ å¦` | `âœ… æ˜¯ï¼ˆä¸»åŠ¨ï¼‰` | `âŒ å¦` |
| **join()** | `âŒ å¦` | `âŒ å¦` | `âœ… æ˜¯ï¼ˆç­‰å¾…ä»–äººï¼‰` | `âŒ å¦` |
| **yield()** | `âŒ å¦` | `âŒ å¦` | `âŒ å¦ï¼ˆå¯èƒ½è®©å‡ºï¼‰` | `âŒ å¦` |
| **interrupt()** | `âŒ å¦` | `âœ… æ˜¯` | `âŒ å¦` | `âŒ å¦` |
| **isInterrupted()** | `âŒ å¦` | `âŒ å¦` | `âŒ å¦` | `âŒ å¦` |
| **interrupted()** | `âŒ å¦` | `âŒ å¦` | `âŒ å¦` | `âœ… æ˜¯` |

### 6.2 é”é‡Šæ”¾æƒ…å†µå¯¹æ¯”


| æ–¹æ³• | **æ˜¯å¦é‡Šæ”¾é”** | **çŠ¶æ€è½¬æ¢** | **å¤‡æ³¨** |
|------|-------------|-------------|---------|
| **sleep()** | `âŒ ä¸é‡Šæ”¾` | `RUNNABLE â†’ TIMED_WAITING` | `ä¼‘çœ ä½†ä¿æŒé”` |
| **wait()** | `âœ… é‡Šæ”¾` | `RUNNABLE â†’ WAITING` | `é‡Šæ”¾é”å¹¶ç­‰å¾…é€šçŸ¥` |
| **join()** | `âŒ ä¸é‡Šæ”¾` | `RUNNABLE â†’ WAITING` | `ç­‰å¾…å…¶ä»–çº¿ç¨‹ï¼Œä¸é‡Šæ”¾é”` |
| **yield()** | `âŒ ä¸é‡Šæ”¾` | `å¯èƒ½çŸ­æš‚è®©å‡ºCPU` | `åªæ˜¯å»ºè®®è°ƒåº¦å™¨` |

### 6.3 å¼‚å¸¸å¤„ç†è¦æ±‚


| æ–¹æ³• | **æ˜¯å¦éœ€è¦å¼‚å¸¸å¤„ç†** | **å¼‚å¸¸ç±»å‹** | **å¤„ç†å»ºè®®** |
|------|-------------------|-------------|-------------|
| **sleep()** | `âœ… å¿…é¡»` | `InterruptedException` | `try-catchåŒ…å›´ï¼Œæ¢å¤ä¸­æ–­çŠ¶æ€` |
| **join()** | `âœ… å¿…é¡»` | `InterruptedException` | `try-catchåŒ…å›´` |
| **wait()** | `âœ… å¿…é¡»` | `InterruptedException` | `try-catchåŒ…å›´ï¼Œåœ¨synchronizedä¸­` |
| **start()** | `âŒ å¦` | `IllegalThreadStateException` | `ç¡®ä¿åªè°ƒç”¨ä¸€æ¬¡` |

---

## 7. âš ï¸ å¸¸è§è¯¯åŒºä¸æœ€ä½³å®è·µ


### 7.1 å¸¸è§è¯¯åŒºæ±‡æ€»


```java
çº¿ç¨‹æ§åˆ¶æ–¹æ³•ï¼šå¸¸è§ç»„åˆä¸æ–°æ‰‹è¯¯åŒº
â”œâ”€â”€ âš ï¸ æ–°æ‰‹è¯¯åŒºæç¤º
â”‚   â”œâ”€â”€ interrupt() ä¸ä¼šå¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹
â”‚   â”‚   â””â”€â”€ åªæ˜¯è®¾ç½®"ä¸­æ–­æ ‡å¿—"ï¼Œçº¿ç¨‹å¿…é¡»è‡ªè¡Œæ£€æŸ¥æ˜¯å¦ä¸­æ–­
â”‚   â”œâ”€â”€ ä¸è¦ç›´æ¥è°ƒç”¨ run()
â”‚   â”‚   â””â”€â”€ run() æ˜¯æ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šå¯åŠ¨æ–°çº¿ç¨‹ï¼ˆæ— å¹¶å‘ï¼‰
â”‚   â”œâ”€â”€ sleep() å’Œ join() å¿…é¡»å¤„ç† InterruptedException
â”‚   â”‚   â””â”€â”€ å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯èƒ½è¢«ä¸­æ–­ï¼Œéœ€è¦ç”¨ try-catch åŒ…è£¹
â”‚   â”œâ”€â”€ wait/notify å¿…é¡»åœ¨ synchronized ä¸­ä½¿ç”¨
â”‚   â”‚   â””â”€â”€ å¦åˆ™æŠ›å‡º IllegalMonitorStateException
â”‚   â””â”€â”€ yield() ä¸ä¿è¯è®©æƒ
â”‚       â””â”€â”€ åªæ˜¯å»ºè®®è°ƒåº¦å™¨ï¼Œå®é™…æ•ˆæœä¸ç¡®å®š

â””â”€â”€ âœ… å¸¸è§ç»„åˆä½¿ç”¨æ–¹å¼
    â”œâ”€â”€ sleep() + interrupt()
    â”‚   â””â”€â”€ ç”¨äºå®ç°å»¶è¿Ÿç­‰å¾…è¿‡ç¨‹ä¸­æ”¯æŒä¸­æ–­ï¼ˆä¾‹å¦‚è¶…æ—¶å–æ¶ˆä»»åŠ¡ï¼‰
    â”œâ”€â”€ join() + é¡ºåºæ§åˆ¶
    â”‚   â””â”€â”€ ç”¨äºä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå®ç°çº¿ç¨‹é¡ºåºæ§åˆ¶
    â”œâ”€â”€ interrupt() + isInterrupted()
    â”‚   â””â”€â”€ ç”¨äºåœ¨çº¿ç¨‹å†…éƒ¨é€šè¿‡æ ‡å¿—åˆ¤æ–­ä¼˜é›…åœ°ç»ˆæ­¢çº¿ç¨‹ä»»åŠ¡
    â””â”€â”€ wait/notify + ç”Ÿäº§è€…æ¶ˆè´¹è€…
        â””â”€â”€ å®ç°çº¿ç¨‹é—´åä½œå’Œæ•°æ®äº¤æ¢
```

### 7.2 æœ€ä½³å®è·µç¤ºä¾‹


**âœ… æ­£ç¡®çš„ä¸­æ–­å¤„ç†**
```java
public class InterruptHandlingBestPractice {
    public static void main(String[] args) throws InterruptedException {
        Thread worker = new Thread(() -> {
            try {
                doInterruptibleWork();
            } catch (InterruptedException e) {
                System.out.println("ä»»åŠ¡è¢«ä¸­æ–­ï¼Œæ¸…ç†èµ„æº...");
                cleanup();
            }
        });
        
        worker.start();
        Thread.sleep(3000);
        worker.interrupt(); // å‘èµ·ä¸­æ–­
        worker.join();
    }
    
    private static void doInterruptibleWork() throws InterruptedException {
        for (int i = 0; i < 10; i++) {
            // å®šæœŸæ£€æŸ¥ä¸­æ–­çŠ¶æ€
            if (Thread.currentThread().isInterrupted()) {
                throw new InterruptedException("å·¥ä½œè¢«ä¸­æ–­");
            }
            
            System.out.println("æ‰§è¡Œå·¥ä½œ: " + i);
            Thread.sleep(500); // å¯ä¸­æ–­çš„ç­‰å¾…
        }
    }
    
    private static void cleanup() {
        System.out.println("æ¸…ç†èµ„æºå®Œæˆ");
    }
}
```

**âœ… å®‰å…¨çš„wait/notifyæ¨¡å¼**
```java
public class SafeWaitNotifyPattern {
    private final Object lock = new Object();
    private boolean condition = false;
    
    public void waitForCondition() throws InterruptedException {
        synchronized (lock) {
            // ä½¿ç”¨whileå¾ªç¯é˜²æ­¢è™šå‡å”¤é†’
            while (!condition) {
                lock.wait();
            }
            // æ¡ä»¶æ»¡è¶³åçš„å¤„ç†é€»è¾‘
            System.out.println("æ¡ä»¶æ»¡è¶³ï¼Œç»§ç»­æ‰§è¡Œ");
        }
    }
    
    public void signalCondition() {
        synchronized (lock) {
            condition = true;
            lock.notifyAll(); // ä½¿ç”¨notifyAll()æ›´å®‰å…¨
        }
    }
}
```

**âœ… çº¿ç¨‹æ± ä¸­çš„æœ€ä½³å®è·µ**
```java
public class ThreadControlBestPractices {
    public static void main(String[] args) {
        ExecutorService executor = Executors.newFixedThreadPool(3);
        
        // æäº¤å¯ä¸­æ–­çš„ä»»åŠ¡
        Future<?> task1 = executor.submit(() -> {
            try {
                doWork("ä»»åŠ¡1");
            } catch (InterruptedException e) {
                System.out.println("ä»»åŠ¡1è¢«ä¸­æ–­");
                Thread.currentThread().interrupt(); // æ¢å¤ä¸­æ–­çŠ¶æ€
            }
        });
        
        Future<?> task2 = executor.submit(() -> {
            try {
                doWork("ä»»åŠ¡2");
            } catch (InterruptedException e) {
                System.out.println("ä»»åŠ¡2è¢«ä¸­æ–­");
                Thread.currentThread().interrupt();
            }
        });
        
        // 3ç§’åå–æ¶ˆä»»åŠ¡
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        
        task1.cancel(true); // ä¸­æ–­ä»»åŠ¡1
        task2.cancel(true); // ä¸­æ–­ä»»åŠ¡2
        
        executor.shutdown();
    }
    
    private static void doWork(String taskName) throws InterruptedException {
        for (int i = 0; i < 10; i++) {
            if (Thread.currentThread().isInterrupted()) {
                throw new InterruptedException(taskName + "è¢«ä¸­æ–­");
            }
            System.out.println(taskName + " æ‰§è¡Œæ­¥éª¤: " + i);
            Thread.sleep(500);
        }
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒçŸ¥è¯†


```
ğŸ”¸ åŸºç¡€æ§åˆ¶ï¼šstart()å¯åŠ¨çº¿ç¨‹ï¼Œrun()å®šä¹‰ä»»åŠ¡ï¼ŒisAlive()æ£€æŸ¥çŠ¶æ€
ğŸ”¸ ç­‰å¾…è°ƒåº¦ï¼šsleep()ä¼‘çœ ä¸é‡Šæ”¾é”ï¼Œjoin()ç­‰å¾…çº¿ç¨‹å®Œæˆï¼Œyield()å»ºè®®è®©æƒ
ğŸ”¸ ä¸­æ–­æœºåˆ¶ï¼šinterrupt()å‘èµ·è¯·æ±‚ï¼ŒisInterrupted()æ£€æŸ¥çŠ¶æ€ï¼Œinterrupted()æ£€æŸ¥å¹¶æ¸…é™¤
ğŸ”¸ çº¿ç¨‹é€šä¿¡ï¼šwait()é‡Šæ”¾é”ç­‰å¾…ï¼Œnotify()å”¤é†’ä¸€ä¸ªï¼ŒnotifyAll()å”¤é†’æ‰€æœ‰
ğŸ”¸ å¼‚å¸¸å¤„ç†ï¼šInterruptedExceptionå¿…é¡»å¤„ç†ï¼Œæ¢å¤ä¸­æ–­çŠ¶æ€æ˜¯å…³é”®
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸­æ–­çš„åä½œæ€§æœ¬è´¨**
```
æ ¸å¿ƒç†å¿µï¼š
â€¢ ä¸­æ–­ä¸æ˜¯å¼ºåˆ¶ç»ˆæ­¢ï¼Œè€Œæ˜¯åä½œå¼åœæ­¢
â€¢ çº¿ç¨‹å¿…é¡»ä¸»åŠ¨æ£€æŸ¥å’Œå“åº”ä¸­æ–­ä¿¡å·
â€¢ é€šè¿‡ä¸­æ–­å¼‚å¸¸å’Œæ ‡å¿—ä½è¿›è¡Œé€šä¿¡

æœ€ä½³å®è·µï¼š
â€¢ å®šæœŸæ£€æŸ¥isInterrupted()çŠ¶æ€
â€¢ æ­£ç¡®å¤„ç†InterruptedException
â€¢ åœ¨catchå—ä¸­æ¢å¤ä¸­æ–­çŠ¶æ€
```

**ğŸ”¹ wait/notifyçš„åŒæ­¥è¦æ±‚**
```
è®¾è®¡åŸåˆ™ï¼š
â€¢ åŸºäºå¯¹è±¡ç›‘è§†å™¨é”çš„æœºåˆ¶
â€¢ å¿…é¡»åœ¨synchronizedå—ä¸­ä½¿ç”¨
â€¢ wait()ä¼šé‡Šæ”¾é”ï¼Œnotify()ä¸ä¼šç«‹å³é‡Šæ”¾é”

é˜²æŠ¤æªæ–½ï¼š
â€¢ ä½¿ç”¨whileå¾ªç¯é˜²æ­¢è™šå‡å”¤é†’
â€¢ ä¼˜å…ˆä½¿ç”¨notifyAll()é¿å…æ­»é”
â€¢ æ­£ç¡®å¤„ç†InterruptedException
```

**ğŸ”¹ æ–¹æ³•é€‰æ‹©çš„åœºæ™¯æŒ‡å¯¼**
```
çº¿ç¨‹å¯åŠ¨ï¼šstart() (å¿…é¡»)
çº¿ç¨‹ç­‰å¾…ï¼šjoin() (ç­‰å¾…å®Œæˆ)ã€sleep() (å®šæ—¶ç­‰å¾…)
çº¿ç¨‹åœæ­¢ï¼šinterrupt() + isInterrupted() (ä¼˜é›…åœæ­¢)
çº¿ç¨‹é€šä¿¡ï¼šwait/notify (å¤æ‚åä½œ)ã€çº¿ç¨‹æ±  (ç®€å•åœºæ™¯)
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


- **ä»»åŠ¡è°ƒåº¦**ï¼šä½¿ç”¨sleep()å®ç°å®šæ—¶ä»»åŠ¡ï¼Œjoin()æ§åˆ¶æ‰§è¡Œé¡ºåº
- **ä¼˜é›…åœæ­¢**ï¼šä½¿ç”¨interrupt()æœºåˆ¶æ›¿ä»£è¿‡æ—¶çš„stop()æ–¹æ³•  
- **èµ„æºåè°ƒ**ï¼šä½¿ç”¨wait/notifyå®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼
- **å¼‚å¸¸å¤„ç†**ï¼šæ­£ç¡®å¤„ç†InterruptedExceptionï¼Œä¿æŒä¸­æ–­çŠ¶æ€

**æ ¸å¿ƒè®°å¿†**ï¼š
- startå¯åŠ¨runå®šä¹‰ï¼Œsleepä¼‘çœ joinç­‰å¾…
- interruptåä½œåœï¼Œæ£€æŸ¥å“åº”è¦é…åˆ
- waité‡Šæ”¾é”notifyå”¤é†’ï¼Œsynchronizedå¿…é¡»åŒ…å›´
- å¼‚å¸¸å¤„ç†å¾ˆé‡è¦ï¼Œä¸­æ–­çŠ¶æ€è¦æ¢å¤