---
title: 5ã€JVMæ‰§è¡Œå¼•æ“ä¸å­—èŠ‚ç 
---
## ğŸ“š ç›®å½•

1. [å­—èŠ‚ç æ‰§è¡ŒåŸç†](#1-å­—èŠ‚ç æ‰§è¡ŒåŸç†)
2. [JITç¼–è¯‘ä¸ä¼˜åŒ–](#2-JITç¼–è¯‘ä¸ä¼˜åŒ–)
3. [æ–¹æ³•è°ƒç”¨ä¸å¼‚å¸¸å¤„ç†](#3-æ–¹æ³•è°ƒç”¨ä¸å¼‚å¸¸å¤„ç†)

---

## 1. ğŸ”§ å­—èŠ‚ç æ‰§è¡ŒåŸç†


### 1.1 å­—èŠ‚ç æŒ‡ä»¤é›†æ¦‚è§ˆ


**ğŸ¯ å­—èŠ‚ç çš„æœ¬è´¨**
```
å­—èŠ‚ç ï¼ˆBytecodeï¼‰ï¼š
â€¢ å®šä¹‰ï¼šä»‹äºæºä»£ç å’Œæœºå™¨ç ä¹‹é—´çš„ä¸­é—´è¡¨ç¤º
â€¢ ç‰¹ç‚¹ï¼šå¹³å°æ— å…³ã€ç±»å‹å®‰å…¨ã€ç´§å‡‘é«˜æ•ˆ
â€¢ æ ¼å¼ï¼šæ“ä½œç ï¼ˆopcodeï¼‰+ æ“ä½œæ•°ï¼ˆoperandsï¼‰
â€¢ æ‰§è¡Œï¼šåŸºäºæ ˆçš„è™šæ‹ŸæœºæŒ‡ä»¤é›†
```

**ğŸ“‹ å­—èŠ‚ç æŒ‡ä»¤åˆ†ç±»**

| æŒ‡ä»¤ç±»å‹ | **åŠŸèƒ½** | **æŒ‡ä»¤å‰ç¼€** | **ç¤ºä¾‹æŒ‡ä»¤** | **ç”¨é€”** |
|---------|---------|-------------|-------------|---------|
| ğŸ”„ **åŠ è½½å­˜å‚¨** | `å±€éƒ¨å˜é‡ä¸æ“ä½œæ•°æ ˆé—´ä¼ è¾“` | `load/store` | `iloadã€astore` | `å˜é‡è¯»å†™` |
| â• **è¿ç®—æŒ‡ä»¤** | `å¯¹æ ˆé¡¶å…ƒç´ è¿›è¡Œè¿ç®—` | `add/sub/mul` | `iaddã€dmul` | `ç®—æœ¯è®¡ç®—` |
| ğŸ”€ **ç±»å‹è½¬æ¢** | `æ•°å€¼ç±»å‹è½¬æ¢` | `i2lã€d2f` | `i2lã€f2d` | `ç±»å‹å®‰å…¨è½¬æ¢` |
| ğŸ¯ **å¯¹è±¡æ“ä½œ** | `åˆ›å»ºå’Œè®¿é—®å¯¹è±¡` | `new/get/put` | `newã€getfield` | `é¢å‘å¯¹è±¡` |
| ğŸŒŠ **æ§åˆ¶è½¬ç§»** | `æ”¹å˜æ‰§è¡Œæµç¨‹` | `if/goto` | `if_icmpltã€goto` | `æµç¨‹æ§åˆ¶` |
| ğŸ“ **æ–¹æ³•è°ƒç”¨** | `è°ƒç”¨æ–¹æ³•` | `invoke` | `invokevirtual` | `æ–¹æ³•æ‰§è¡Œ` |

**ğŸ’» å­—èŠ‚ç ç¤ºä¾‹å¯¹æ¯”**
```java
// Javaæºç 
public int add(int a, int b) {
    return a + b;
}

// å¯¹åº”å­—èŠ‚ç  (javap -c)
public int add(int, int);
  Code:
     0: iload_1    // åŠ è½½ç¬¬ä¸€ä¸ªå‚æ•°åˆ°æ“ä½œæ•°æ ˆ
     1: iload_2    // åŠ è½½ç¬¬äºŒä¸ªå‚æ•°åˆ°æ“ä½œæ•°æ ˆ
     2: iadd       // æ‰§è¡Œæ•´æ•°åŠ æ³•
     3: ireturn    // è¿”å›æ•´æ•°ç»“æœ
```

### 1.2 æ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨çš„äº¤äº’


**ğŸ—ï¸ æ ˆå¸§å†…å­˜ç»“æ„**
```
æ ˆå¸§ï¼ˆStack Frameï¼‰ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ“ä½œæ•°æ ˆ                â”‚ â† è®¡ç®—è¿‡ç¨‹çš„å·¥ä½œåŒº
â”‚    â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ top â”‚     â”‚     â”‚     â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        å±€éƒ¨å˜é‡è¡¨               â”‚ â† å­˜å‚¨æ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡
â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚ ... â”‚ â”‚
â”‚ â”‚this â”‚ arg1â”‚ arg2â”‚ var1â”‚     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”„ æ•°æ®æµåŠ¨æœºåˆ¶**
```java
public class StackInteraction {
    public int calculate(int x, int y) {
        int sum = x + y;
        int result = sum * 2;
        return result;
    }
}

// å­—èŠ‚ç æ‰§è¡Œè¿‡ç¨‹ï¼š
// å±€éƒ¨å˜é‡è¡¨åˆå§‹çŠ¶æ€ï¼š[this, x, y, sum, result]
//                   [obj,  5, 3,  ?,   ?   ]

// iload_1        æ“ä½œæ•°æ ˆï¼š[5]         å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,?,?]
// iload_2        æ“ä½œæ•°æ ˆï¼š[5,3]       å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,?,?]
// iadd           æ“ä½œæ•°æ ˆï¼š[8]         å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,?,?]
// istore_3       æ“ä½œæ•°æ ˆï¼š[]          å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,8,?]
// iload_3        æ“ä½œæ•°æ ˆï¼š[8]         å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,8,?]
// iconst_2       æ“ä½œæ•°æ ˆï¼š[8,2]       å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,8,?]
// imul           æ“ä½œæ•°æ ˆï¼š[16]        å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,8,?]
// istore 4       æ“ä½œæ•°æ ˆï¼š[]          å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,8,16]
// iload 4        æ“ä½œæ•°æ ˆï¼š[16]        å±€éƒ¨å˜é‡è¡¨ï¼š[obj,5,3,8,16]
// ireturn        æ“ä½œæ•°æ ˆï¼š[]          è¿”å›å€¼ï¼š16
```

### 1.3 å¸¸è§å­—èŠ‚ç æŒ‡ä»¤ï¼šåŠ è½½ã€å­˜å‚¨ã€è¿ç®—ã€ç±»å‹è½¬æ¢


**ğŸ“¥ åŠ è½½æŒ‡ä»¤ï¼ˆLoad Instructionsï¼‰**
```java
// ç¤ºä¾‹æ–¹æ³•
public void loadExample() {
    int i = 10;
    long l = 20L;
    String s = "hello";
}

// å¯¹åº”å­—èŠ‚ç 
// bipush 10      // å°†å¸¸é‡10æ¨å…¥æ“ä½œæ•°æ ˆ
// istore_1       // å°†æ ˆé¡¶intå€¼å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨slot 1
// ldc2_w 20      // å°†é•¿æ•´å‹å¸¸é‡20æ¨å…¥æ“ä½œæ•°æ ˆ
// lstore_2       // å°†æ ˆé¡¶longå€¼å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨slot 2-3
// ldc "hello"    // å°†å­—ç¬¦ä¸²å¸¸é‡æ¨å…¥æ“ä½œæ•°æ ˆ
// astore 4       // å°†æ ˆé¡¶å¼•ç”¨å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨slot 4
```

**ğŸ“Š åŠ è½½æŒ‡ä»¤åˆ†ç±»è¡¨**

| ç±»å‹ | **å¸¸é‡åŠ è½½** | **å±€éƒ¨å˜é‡åŠ è½½** | **è¯´æ˜** |
|------|-------------|-----------------|---------|
| `int` | `iconst_m1 ~ iconst_5, bipush, sipush, ldc` | `iload_0 ~ iload_3, iload` | `æ•´æ•°æ“ä½œ` |
| `long` | `lconst_0, lconst_1, ldc2_w` | `lload_0 ~ lload_3, lload` | `é•¿æ•´æ•°ï¼Œå 2ä¸ªslot` |
| `float` | `fconst_0, fconst_1, fconst_2, ldc` | `fload_0 ~ fload_3, fload` | `å•ç²¾åº¦æµ®ç‚¹` |
| `double` | `dconst_0, dconst_1, ldc2_w` | `dload_0 ~ dload_3, dload` | `åŒç²¾åº¦ï¼Œå 2ä¸ªslot` |
| `reference` | `aconst_null, ldc` | `aload_0 ~ aload_3, aload` | `å¯¹è±¡å¼•ç”¨` |

**ğŸ“¤ å­˜å‚¨æŒ‡ä»¤ï¼ˆStore Instructionsï¼‰**
```java
public void storeExample(int param) {
    int local1 = param;          // istore_2
    int local2 = local1 + 5;     // istore_3
    String str = "test";         // astore 4
}

// å­˜å‚¨æŒ‡ä»¤å‘½åè§„å¾‹ï¼š
// {type}store_{slot} æˆ– {type}store
// type: i(int), l(long), f(float), d(double), a(reference)
// slot: 0-3ä½¿ç”¨ä¸‹æ ‡å½¢å¼ï¼Œ4+ä½¿ç”¨å‚æ•°å½¢å¼
```

**â• è¿ç®—æŒ‡ä»¤ï¼ˆArithmetic Instructionsï¼‰**
```java
public int arithmetic(int a, int b) {
    int sum = a + b;        // iadd
    int diff = a - b;       // isub
    int product = a * b;    // imul
    int quotient = a / b;   // idiv
    int remainder = a % b;  // irem
    return sum;
}

// è¿ç®—æŒ‡ä»¤ç‰¹ç‚¹ï¼š
// â€¢ ä»æ“ä½œæ•°æ ˆå¼¹å‡ºæ“ä½œæ•°
// â€¢ æ‰§è¡Œè®¡ç®—
// â€¢ å°†ç»“æœæ¨å›æ“ä½œæ•°æ ˆ
```

**ğŸ“Š è¿ç®—æŒ‡ä»¤åˆ†ç±»**

| è¿ç®—ç±»å‹ | **int** | **long** | **float** | **double** |
|---------|---------|----------|-----------|------------|
| **åŠ æ³•** | `iadd` | `ladd` | `fadd` | `dadd` |
| **å‡æ³•** | `isub` | `lsub` | `fsub` | `dsub` |
| **ä¹˜æ³•** | `imul` | `lmul` | `fmul` | `dmul` |
| **é™¤æ³•** | `idiv` | `ldiv` | `fdiv` | `ddiv` |
| **æ±‚ä½™** | `irem` | `lrem` | `frem` | `drem` |
| **å–è´Ÿ** | `ineg` | `lneg` | `fneg` | `dneg` |

**ğŸ”€ ç±»å‹è½¬æ¢æŒ‡ä»¤ï¼ˆType Conversionï¼‰**
```java
public void conversion() {
    int i = 100;
    long l = i;          // i2l (int to long)
    float f = i;         // i2f (int to float)
    double d = l;        // l2d (long to double)
    int back = (int)d;   // d2i (double to int)
}

// ç±»å‹è½¬æ¢è§„åˆ™ï¼š
// å®½åŒ–è½¬æ¢ï¼šè‡ªåŠ¨è¿›è¡Œï¼Œæ— ç²¾åº¦ä¸¢å¤±
// çª„åŒ–è½¬æ¢ï¼šéœ€è¦æ˜¾å¼è½¬æ¢ï¼Œå¯èƒ½ä¸¢å¤±ç²¾åº¦
```

### 1.4 æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ï¼šinvokevirtualã€invokespecialã€invokestaticã€invokeinterface


**ğŸ“ æ–¹æ³•è°ƒç”¨æŒ‡ä»¤åˆ†ç±»**

| æŒ‡ä»¤ | **è°ƒç”¨ç±»å‹** | **ç»‘å®šæ—¶æœº** | **ä½¿ç”¨åœºæ™¯** |
|------|-------------|-------------|-------------|
| `invokestatic` | `é™æ€æ–¹æ³•` | `ç¼–è¯‘æ—¶ç»‘å®š` | `é™æ€æ–¹æ³•è°ƒç”¨` |
| `invokespecial` | `ç‰¹æ®Šæ–¹æ³•` | `ç¼–è¯‘æ—¶ç»‘å®š` | `æ„é€ å™¨ã€ç§æœ‰æ–¹æ³•ã€superè°ƒç”¨` |
| `invokevirtual` | `è™šæ–¹æ³•` | `è¿è¡Œæ—¶ç»‘å®š` | `å®ä¾‹æ–¹æ³•è°ƒç”¨` |
| `invokeinterface` | `æ¥å£æ–¹æ³•` | `è¿è¡Œæ—¶ç»‘å®š` | `æ¥å£æ–¹æ³•è°ƒç”¨` |
| `invokedynamic` | `åŠ¨æ€æ–¹æ³•` | `è¿è¡Œæ—¶ç»‘å®š` | `Lambdaè¡¨è¾¾å¼ã€æ–¹æ³•å¥æŸ„` |

**ğŸ’» æ–¹æ³•è°ƒç”¨ç¤ºä¾‹**
```java
class Parent {
    private void privateMethod() {}
    public void instanceMethod() {}
    public static void staticMethod() {}
}

interface MyInterface {
    void interfaceMethod();
}

class Child extends Parent implements MyInterface {
    public Child() {
        super();                    // invokespecial
        privateMethod();            // invokespecial  
    }
    
    public void test() {
        instanceMethod();           // invokevirtual
        staticMethod();             // invokestatic
        interfaceMethod();          // invokeinterface
    }
    
    public void interfaceMethod() {}
}
```

**ğŸ¯ invokevirtualè¯¦è§£**
```java
// è™šæ–¹æ³•è°ƒç”¨çš„åŠ¨æ€åˆ†æ´¾
class Animal {
    public void speak() { System.out.println("Animal speaks"); }
}

class Dog extends Animal {
    @Override
    public void speak() { System.out.println("Dog barks"); }
}

class Cat extends Animal {
    @Override  
    public void speak() { System.out.println("Cat meows"); }
}

public void polymorphism() {
    Animal animal1 = new Dog();
    Animal animal2 = new Cat();
    
    animal1.speak();  // invokevirtualï¼Œè¿è¡Œæ—¶ç¡®å®šè°ƒç”¨Dog.speak()
    animal2.speak();  // invokevirtualï¼Œè¿è¡Œæ—¶ç¡®å®šè°ƒç”¨Cat.speak()
}

// invokevirtualæ‰§è¡Œè¿‡ç¨‹ï¼š
// 1. ä»æ“ä½œæ•°æ ˆå¼¹å‡ºå¯¹è±¡å¼•ç”¨
// 2. æŸ¥æ‰¾å¯¹è±¡çš„å®é™…ç±»å‹
// 3. åœ¨è™šæ–¹æ³•è¡¨ä¸­æ‰¾åˆ°æ–¹æ³•å®ç°
// 4. è°ƒç”¨å®é™…çš„æ–¹æ³•
```

**ğŸ”§ invokespecialè¯¦è§£**
```java
class SpecialCallExample {
    private String name;
    
    public SpecialCallExample(String name) {
        this.name = name;           // putfield
        init();                     // invokespecial (ç§æœ‰æ–¹æ³•)
    }
    
    private void init() {
        System.out.println("Initializing...");
    }
    
    public void callSuper() {
        super.toString();           // invokespecial (superè°ƒç”¨)
    }
}

// invokespecialç‰¹ç‚¹ï¼š
// â€¢ ç¼–è¯‘æ—¶ç¡®å®šè°ƒç”¨ç›®æ ‡
// â€¢ ä¸ä¼šå‘ç”ŸåŠ¨æ€åˆ†æ´¾
// â€¢ ç”¨äºè°ƒç”¨"ç‰¹æ®Š"æ–¹æ³•
```

### 1.5 javap -c åç¼–è¯‘æŸ¥çœ‹å­—èŠ‚ç 


**ğŸ” javapå·¥å…·ä½¿ç”¨**
```bash
# åŸºæœ¬ç”¨æ³•
javap -c ClassName              # æŸ¥çœ‹å­—èŠ‚ç æŒ‡ä»¤
javap -v ClassName              # æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
javap -p ClassName              # æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜
javap -s ClassName              # æ˜¾ç¤ºå†…éƒ¨ç±»å‹ç­¾å

# å®ç”¨å‚æ•°ç»„åˆ
javap -c -v -p ClassName        # å®Œæ•´çš„å­—èŠ‚ç åˆ†æ
javap -c -l ClassName           # æ˜¾ç¤ºè¡Œå·è¡¨
javap -c -constants ClassName   # æ˜¾ç¤ºå¸¸é‡æ± 
```

**ğŸ’» å­—èŠ‚ç åˆ†æå®ä¾‹**
```java
// æºç ï¼šBytecodeExample.java
public class BytecodeExample {
    private int value = 10;
    
    public int getValue() {
        return value;
    }
    
    public void setValue(int newValue) {
        this.value = newValue;
    }
}
```

```bash
# ç¼–è¯‘å¹¶åç¼–è¯‘
javac BytecodeExample.java
javap -c -v BytecodeExample

# è¾“å‡ºåˆ†æï¼š
public BytecodeExample();
  Code:
     0: aload_0           // åŠ è½½thiså¼•ç”¨
     1: invokespecial #1  // è°ƒç”¨Object.<init>()
     4: aload_0           // åŠ è½½thiså¼•ç”¨
     5: bipush 10         // å°†å¸¸é‡10æ¨å…¥æ ˆ
     7: putfield #2       // è®¾ç½®valueå­—æ®µ
    10: return            // è¿”å›

public int getValue();
  Code:
     0: aload_0           // åŠ è½½thiså¼•ç”¨
     1: getfield #2       // è·å–valueå­—æ®µ
     4: ireturn           // è¿”å›intå€¼

public void setValue(int);
  Code:
     0: aload_0           // åŠ è½½thiså¼•ç”¨
     1: iload_1           // åŠ è½½å‚æ•°newValue
     2: putfield #2       // è®¾ç½®valueå­—æ®µ
     5: return            // è¿”å›
```

**ğŸ“Š å­—èŠ‚ç åˆ†æè¦ç‚¹**
```java
// å¤æ‚ç¤ºä¾‹ï¼šå¾ªç¯å’Œæ¡ä»¶åˆ¤æ–­
public int fibonacci(int n) {
    if (n <= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

// å¯¹åº”å­—èŠ‚ç å…³é”®éƒ¨åˆ†ï¼š
// 0: iload_1           // åŠ è½½å‚æ•°n
// 1: iconst_1          // æ¨å…¥å¸¸é‡1
// 2: if_icmpgt 7       // å¦‚æœn > 1ï¼Œè·³è½¬åˆ°å­—èŠ‚ç 7
// 5: iload_1           // åŠ è½½n
// 6: ireturn           // è¿”å›n
// 7: aload_0           // åŠ è½½thisï¼ˆé€’å½’è°ƒç”¨å¼€å§‹ï¼‰
// ...

// å­—èŠ‚ç åˆ†ææŠ€å·§ï¼š
// âœ… å…³æ³¨è·³è½¬æŒ‡ä»¤ï¼šif_xxx, goto
// âœ… ç†è§£æ ˆæ“ä½œï¼šload/store/const
// âœ… è·Ÿè¸ªæ–¹æ³•è°ƒç”¨ï¼šinvokeç³»åˆ—
// âœ… æ³¨æ„å¼‚å¸¸å¤„ç†ï¼šå¼‚å¸¸è¡¨
```

---

## 2. âš¡ JITç¼–è¯‘ä¸ä¼˜åŒ–


### 2.1 è§£é‡Šå™¨ vs ç¼–è¯‘å™¨ï¼šè§£é‡Šæ‰§è¡Œ vs ç¼–è¯‘æ‰§è¡Œ


**ğŸ”„ ä¸¤ç§æ‰§è¡Œæ¨¡å¼å¯¹æ¯”**

| æ‰§è¡Œæ–¹å¼ | **è§£é‡Šæ‰§è¡Œ** | **ç¼–è¯‘æ‰§è¡Œ** |
|---------|-------------|-------------|
| ğŸš€ **å¯åŠ¨é€Ÿåº¦** | `å¿«é€Ÿå¯åŠ¨` | `éœ€è¦ç¼–è¯‘æ—¶é—´` |
| âš¡ **æ‰§è¡Œé€Ÿåº¦** | `è¾ƒæ…¢` | `å¾ˆå¿«` |
| ğŸ’¾ **å†…å­˜å ç”¨** | `ä½` | `é«˜ï¼ˆéœ€å­˜å‚¨æœºå™¨ç ï¼‰` |
| ğŸ¯ **é€‚ç”¨åœºæ™¯** | `ç¨‹åºå¯åŠ¨é˜¶æ®µ` | `çƒ­ç‚¹ä»£ç æ‰§è¡Œ` |

**ğŸ” è§£é‡Šæ‰§è¡Œè¿‡ç¨‹**
```
è§£é‡Šæ‰§è¡Œæµç¨‹ï¼š
å­—èŠ‚ç æŒ‡ä»¤ â†’ è§£é‡Šå™¨ â†’ é€æ¡ç¿»è¯‘ â†’ æ‰§è¡Œæœºå™¨æŒ‡ä»¤

ç‰¹ç‚¹ï¼š
âœ… æ— éœ€é¢„ç¼–è¯‘ï¼Œç«‹å³æ‰§è¡Œ
âœ… è·¨å¹³å°ï¼Œè§£é‡Šå™¨å¤„ç†å¹³å°å·®å¼‚
âŒ æ¯æ¬¡æ‰§è¡Œéƒ½éœ€è¦ç¿»è¯‘ï¼Œæ•ˆç‡ä½
âŒ é‡å¤æ‰§è¡Œç›¸åŒä»£ç æ—¶ä»éœ€é‡å¤ç¿»è¯‘
```

**âš¡ ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹**
```
ç¼–è¯‘æ‰§è¡Œæµç¨‹ï¼š
å­—èŠ‚ç æŒ‡ä»¤ â†’ JITç¼–è¯‘å™¨ â†’ ç”Ÿæˆæœºå™¨ç  â†’ ç¼“å­˜ â†’ ç›´æ¥æ‰§è¡Œ

ç‰¹ç‚¹ï¼š
âœ… ä¸€æ¬¡ç¼–è¯‘ï¼Œå¤šæ¬¡æ‰§è¡Œï¼Œæ•ˆç‡é«˜
âœ… å¯ä»¥è¿›è¡Œæ·±åº¦ä¼˜åŒ–
âŒ ç¼–è¯‘éœ€è¦æ—¶é—´ï¼Œå¯åŠ¨è¾ƒæ…¢
âŒ å ç”¨æ›´å¤šå†…å­˜å­˜å‚¨æœºå™¨ç 
```

**ğŸ’» æ‰§è¡Œæ¨¡å¼åˆ‡æ¢ç¤ºä¾‹**
```java
public class ExecutionModeExample {
    public static void main(String[] args) {
        // JVMå¯åŠ¨æ—¶ä½¿ç”¨è§£é‡Šæ‰§è¡Œ
        System.out.println("ç¨‹åºå¯åŠ¨"); // è§£é‡Šæ‰§è¡Œ
        
        // çƒ­ç‚¹æ–¹æ³•ä¼šè¢«JITç¼–è¯‘
        for (int i = 0; i < 15000; i++) {
            hotMethod();  // è¾¾åˆ°é˜ˆå€¼åJITç¼–è¯‘
        }
        
        // ç¼–è¯‘åçš„æ–¹æ³•ç›´æ¥æ‰§è¡Œæœºå™¨ç 
        for (int i = 0; i < 100000; i++) {
            hotMethod();  // ç¼–è¯‘åæ‰§è¡Œ
        }
    }
    
    static void hotMethod() {
        // è¿™ä¸ªæ–¹æ³•ä¼šæˆä¸ºçƒ­ç‚¹ä»£ç 
        int sum = 0;
        for (int i = 0; i < 1000; i++) {
            sum += i;
        }
    }
}

// æ‰§è¡Œè¿‡ç¨‹ï¼š
// 1. mainæ–¹æ³•å¼€å§‹æ—¶ï¼šè§£é‡Šæ‰§è¡Œ
// 2. hotMethodå‰å‡ åƒæ¬¡è°ƒç”¨ï¼šè§£é‡Šæ‰§è¡Œ
// 3. hotMethodè°ƒç”¨æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼ï¼šè§¦å‘JITç¼–è¯‘
// 4. ç¼–è¯‘å®Œæˆåï¼šhotMethodç›´æ¥æ‰§è¡Œæœºå™¨ç 
```

### 2.2 JITç¼–è¯‘å™¨ï¼šC1ç¼–è¯‘å™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ã€C2ç¼–è¯‘å™¨ï¼ˆæœåŠ¡ç«¯ï¼‰


**ğŸ”§ C1ç¼–è¯‘å™¨ï¼ˆClient Compilerï¼‰**
```
C1ç¼–è¯‘å™¨ç‰¹ç‚¹ï¼š
â€¢ ç¼–è¯‘é€Ÿåº¦ï¼šå¿«é€Ÿç¼–è¯‘
â€¢ ä¼˜åŒ–ç¨‹åº¦ï¼šè½»é‡çº§ä¼˜åŒ–
â€¢ å†…å­˜å ç”¨ï¼šè¾ƒä½
â€¢ é€‚ç”¨åœºæ™¯ï¼šå®¢æˆ·ç«¯åº”ç”¨ã€å¯åŠ¨é˜¶æ®µ
â€¢ ä¼˜åŒ–æŠ€æœ¯ï¼š
  - æ–¹æ³•å†…è”
  - å»è™šæ‹ŸåŒ–
  - å†—ä½™æ¶ˆé™¤
  - å±€éƒ¨ä¼˜åŒ–
```

**ğŸš€ C2ç¼–è¯‘å™¨ï¼ˆServer Compilerï¼‰**
```
C2ç¼–è¯‘å™¨ç‰¹ç‚¹ï¼š
â€¢ ç¼–è¯‘é€Ÿåº¦ï¼šè¾ƒæ…¢ï¼Œæ·±åº¦åˆ†æ
â€¢ ä¼˜åŒ–ç¨‹åº¦ï¼šæ¿€è¿›ä¼˜åŒ–
â€¢ å†…å­˜å ç”¨ï¼šè¾ƒé«˜
â€¢ é€‚ç”¨åœºæ™¯ï¼šæœåŠ¡ç«¯åº”ç”¨ã€é•¿æ—¶é—´è¿è¡Œ
â€¢ ä¼˜åŒ–æŠ€æœ¯ï¼š
  - å…¨å±€ä¼˜åŒ–
  - é€ƒé€¸åˆ†æ
  - æ ‡é‡æ›¿æ¢
  - æ ˆä¸Šåˆ†é…
  - å¾ªç¯ä¼˜åŒ–
```

**ğŸ“Š C1 vs C2 å¯¹æ¯”**

| ç‰¹æ€§ | **C1ç¼–è¯‘å™¨** | **C2ç¼–è¯‘å™¨** |
|------|-------------|-------------|
| ğŸ• **ç¼–è¯‘æ—¶é—´** | `å‡ æ¯«ç§’` | `å‡ ååˆ°å‡ ç™¾æ¯«ç§’` |
| ğŸ¯ **ä¼˜åŒ–å¼ºåº¦** | `åŸºç¡€ä¼˜åŒ–` | `æ¿€è¿›ä¼˜åŒ–` |
| ğŸ’¾ **å†…å­˜å¼€é”€** | `ä½` | `é«˜` |
| ğŸ“ˆ **æ€§èƒ½æå‡** | `3-5å€` | `10-20å€æˆ–æ›´é«˜` |
| âš™ï¸ **é€‚ç”¨é˜¶æ®µ** | `ç¨‹åºå¯åŠ¨æœŸ` | `ç¨‹åºç¨³å®šè¿è¡ŒæœŸ` |

### 2.3 åˆ†å±‚ç¼–è¯‘ï¼šè§£é‡Šæ‰§è¡Œã€C1ç¼–è¯‘ã€C2ç¼–è¯‘çš„åä½œ


**ğŸ—ï¸ åˆ†å±‚ç¼–è¯‘æ¶æ„**
```
åˆ†å±‚ç¼–è¯‘ï¼ˆTiered Compilationï¼‰äº”ä¸ªçº§åˆ«ï¼š

Level 0: è§£é‡Šæ‰§è¡Œ
â”œâ”€ ç›´æ¥è§£é‡Šå­—èŠ‚ç 
â””â”€ æ”¶é›†æ–¹æ³•è°ƒç”¨å’Œåˆ†æ”¯ä¿¡æ¯

Level 1: C1ç¼–è¯‘ï¼ˆæ— æ€§èƒ½ç›‘æ§ï¼‰
â”œâ”€ ç®€å•C1ç¼–è¯‘
â””â”€ ä¸æ”¶é›†æ€§èƒ½æ•°æ®

Level 2: C1ç¼–è¯‘ï¼ˆæœ‰é™ç›‘æ§ï¼‰
â”œâ”€ C1ç¼–è¯‘ + è½»é‡çº§æ€§èƒ½ç›‘æ§
â””â”€ æ”¶é›†è°ƒç”¨è®¡æ•°ä¿¡æ¯

Level 3: C1ç¼–è¯‘ï¼ˆå®Œæ•´ç›‘æ§ï¼‰
â”œâ”€ C1ç¼–è¯‘ + å®Œæ•´æ€§èƒ½ç›‘æ§
â””â”€ æ”¶é›†è¯¦ç»†çš„æ€§èƒ½æ•°æ®

Level 4: C2ç¼–è¯‘
â”œâ”€ æœ€é«˜çº§åˆ«ä¼˜åŒ–
â””â”€ åŸºäºLevel 3æ”¶é›†çš„æ•°æ®è¿›è¡Œæ¿€è¿›ä¼˜åŒ–
```

**ğŸ”„ åˆ†å±‚ç¼–è¯‘æµç¨‹**
```java
public class TieredCompilationExample {
    static int counter = 0;
    
    public static void main(String[] args) {
        // ç¨‹åºå¯åŠ¨ï¼šLevel 0 è§£é‡Šæ‰§è¡Œ
        System.out.println("Starting...");
        
        // è°ƒç”¨hotMethodï¼Œè§‚å¯Ÿç¼–è¯‘å±‚çº§å˜åŒ–
        for (int i = 0; i < 50000; i++) {
            hotMethod(i);
        }
    }
    
    static int hotMethod(int x) {
        // Level 0: è§£é‡Šæ‰§è¡Œï¼ˆå‰å‡ åæ¬¡è°ƒç”¨ï¼‰
        // Level 3: C1ç¼–è¯‘+ç›‘æ§ï¼ˆå‡ ç™¾æ¬¡è°ƒç”¨åï¼‰
        // Level 4: C2ç¼–è¯‘ï¼ˆå‡ åƒæ¬¡è°ƒç”¨åï¼‰
        
        counter++;
        return x * x + x + 1;
    }
}

// ç¼–è¯‘å±‚çº§æ¼”è¿›è¿‡ç¨‹ï¼š
// 1. å‰20æ¬¡è°ƒç”¨ï¼šLevel 0ï¼ˆè§£é‡Šæ‰§è¡Œï¼‰
// 2. 200æ¬¡è°ƒç”¨åï¼šLevel 3ï¼ˆC1ç¼–è¯‘+ç›‘æ§ï¼‰
// 3. 10000æ¬¡è°ƒç”¨åï¼šLevel 4ï¼ˆC2ç¼–è¯‘ï¼‰
```

**âš™ï¸ åˆ†å±‚ç¼–è¯‘å‚æ•°æ§åˆ¶**
```bash
# å¯ç”¨åˆ†å±‚ç¼–è¯‘ï¼ˆé»˜è®¤å¼€å¯ï¼‰
-XX:+TieredCompilation

# æ§åˆ¶ç¼–è¯‘é˜ˆå€¼
-XX:Tier3InvocationThreshold=200      # Level 3ç¼–è¯‘é˜ˆå€¼
-XX:Tier4InvocationThreshold=15000    # Level 4ç¼–è¯‘é˜ˆå€¼

# æ§åˆ¶ç¼–è¯‘çº¿ç¨‹æ•°
-XX:CICompilerCount=4                 # ç¼–è¯‘çº¿ç¨‹æ€»æ•°

# æŸ¥çœ‹ç¼–è¯‘è¿‡ç¨‹
-XX:+PrintCompilation                 # æ‰“å°ç¼–è¯‘ä¿¡æ¯
-XX:+UnlockDiagnosticVMOptions
-XX:+PrintInlining                    # æ‰“å°å†…è”ä¿¡æ¯
```

### 2.4 çƒ­ç‚¹ä»£ç æ£€æµ‹ï¼šæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ã€å›è¾¹è®¡æ•°å™¨


**ğŸŒ¡ï¸ çƒ­ç‚¹ä»£ç æ£€æµ‹æœºåˆ¶**
```
çƒ­ç‚¹ä»£ç ï¼ˆHot Spot Codeï¼‰è¯†åˆ«ï¼š
â€¢ æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ï¼šç»Ÿè®¡æ–¹æ³•è¢«è°ƒç”¨çš„æ¬¡æ•°
â€¢ å›è¾¹è®¡æ•°å™¨ï¼šç»Ÿè®¡å¾ªç¯æ‰§è¡Œçš„æ¬¡æ•°
â€¢ ç»¼åˆåˆ¤æ–­ï¼šä¸¤ä¸ªè®¡æ•°å™¨å…±åŒå†³å®šæ˜¯å¦ä¸ºçƒ­ç‚¹
```

**ğŸ“Š æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨**
```java
public class MethodInvocationCounter {
    
    public void normalMethod() {
        // å¦‚æœè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨è¶…è¿‡é˜ˆå€¼
        // å°±ä¼šè¢«æ ‡è®°ä¸ºçƒ­ç‚¹æ–¹æ³•
        System.out.println("Normal method call");
    }
    
    public static void main(String[] args) {
        MethodInvocationCounter example = new MethodInvocationCounter();
        
        // æ¨¡æ‹Ÿçƒ­ç‚¹æ–¹æ³•è°ƒç”¨
        for (int i = 0; i < 15000; i++) {
            example.normalMethod();  // æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨é€’å¢
        }
        
        // å½“è°ƒç”¨æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼æ—¶ï¼š
        // 1. æ–¹æ³•è¢«æ ‡è®°ä¸ºçƒ­ç‚¹
        // 2. æäº¤ç»™JITç¼–è¯‘å™¨
        // 3. ç¼–è¯‘ä¸ºæœºå™¨ç 
    }
}

// æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨å·¥ä½œåŸç†ï¼š
// âœ… æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶è®¡æ•°å™¨+1
// âœ… è¾¾åˆ°é˜ˆå€¼æ—¶è§¦å‘ç¼–è¯‘
// âœ… ç¼–è¯‘æœŸé—´ç»§ç»­ä½¿ç”¨è§£é‡Šæ‰§è¡Œ
// âœ… ç¼–è¯‘å®Œæˆåæ›¿æ¢ä¸ºæœºå™¨ç 
```

**ğŸ”„ å›è¾¹è®¡æ•°å™¨**
```java
public class BackEdgeCounter {
    
    public void loopMethod() {
        // å›è¾¹è®¡æ•°å™¨ç»Ÿè®¡å¾ªç¯æ‰§è¡Œæ¬¡æ•°
        for (int i = 0; i < 10000; i++) {
            // æ¯æ¬¡å¾ªç¯å›åˆ°forè¯­å¥å¼€å¤´å°±æ˜¯ä¸€æ¬¡"å›è¾¹"
            doSomething();
        }
    }
    
    public void nestedLoopMethod() {
        // åµŒå¥—å¾ªç¯çš„å›è¾¹è®¡æ•°
        for (int i = 0; i < 100; i++) {        // å¤–å±‚å›è¾¹
            for (int j = 0; j < 100; j++) {    // å†…å±‚å›è¾¹
                // å†…å±‚å¾ªç¯çš„å›è¾¹æ¬¡æ•°æ›´å¤š
                // æ›´å®¹æ˜“è§¦å‘JITç¼–è¯‘
                compute(i, j);
            }
        }
    }
    
    void doSomething() {}
    void compute(int i, int j) {}
}

// å›è¾¹è®¡æ•°å™¨ç‰¹ç‚¹ï¼š
// âœ… æ£€æµ‹å¾ªç¯çƒ­ç‚¹ï¼Œä¸éœ€è¦æ–¹æ³•è°ƒç”¨é¢‘ç¹
// âœ… å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„å¾ªç¯ç‰¹åˆ«æœ‰æ•ˆ
// âœ… å¯ä»¥å®ç°æ ˆä¸Šæ›¿æ¢ï¼ˆOSRï¼‰ç¼–è¯‘
```

**âš™ï¸ çƒ­ç‚¹æ£€æµ‹å‚æ•°é…ç½®**
```bash
# æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨é˜ˆå€¼
-XX:CompileThreshold=10000              # é»˜è®¤10000æ¬¡

# å›è¾¹è®¡æ•°å™¨ç›¸å…³
-XX:OnStackReplacePercentage=140        # OSRé˜ˆå€¼æ¯”ä¾‹

# è®¡æ•°å™¨è¡°å‡ï¼ˆé˜²æ­¢é•¿æ—¶é—´è¿è¡Œçš„å†·æ–¹æ³•è¢«è¯¯åˆ¤ï¼‰
-XX:+UseCounterDecay                    # å¯ç”¨è®¡æ•°å™¨è¡°å‡
-XX:CounterHalfLifeTime=30              # è®¡æ•°å™¨åŠè¡°æœŸ30ç§’

# æŸ¥çœ‹çƒ­ç‚¹ä¿¡æ¯
-XX:+PrintCompilation                   # æ˜¾ç¤ºç¼–è¯‘ä¿¡æ¯
-XX:+PrintGCDetails                     # æ˜¾ç¤ºGCè¯¦æƒ…
```

### 2.5 ç¼–è¯‘ä¼˜åŒ–æŠ€æœ¯ï¼šå†…è”ã€é€ƒé€¸åˆ†æã€æ ‡é‡æ›¿æ¢ã€æ ˆä¸Šåˆ†é…


**ğŸ”— æ–¹æ³•å†…è”ï¼ˆMethod Inliningï¼‰**
```java
// å†…è”ä¼˜åŒ–ç¤ºä¾‹
class InliningExample {
    public int calculate(int x) {
        return square(x) + double(x);  // å°æ–¹æ³•å€™é€‰å†…è”
    }
    
    private int square(int x) {
        return x * x;  // ç®€å•æ–¹æ³•ï¼Œå®¹æ˜“è¢«å†…è”
    }
    
    private int double(int x) {
        return x * 2;  // ç®€å•æ–¹æ³•ï¼Œå®¹æ˜“è¢«å†…è”
    }
}

// å†…è”åçš„ç­‰æ•ˆä»£ç ï¼š
class InlinedExample {
    public int calculate(int x) {
        // ç¼–è¯‘å™¨ç›´æ¥å±•å¼€æ–¹æ³•è°ƒç”¨
        return (x * x) + (x * 2);  // æ¶ˆé™¤äº†æ–¹æ³•è°ƒç”¨å¼€é”€
    }
}

// å†…è”ä¼˜åŒ–æ•ˆæœï¼š
// âœ… æ¶ˆé™¤æ–¹æ³•è°ƒç”¨å¼€é”€
// âœ… å¢åŠ åç»­ä¼˜åŒ–æœºä¼š
// âœ… å‡å°‘æ ˆå¸§åˆ›å»ºé”€æ¯
// âŒ å¯èƒ½å¢åŠ ä»£ç å¤§å°
```

**ğŸƒ é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰**
```java
// é€ƒé€¸åˆ†æç¤ºä¾‹
public class EscapeAnalysis {
    
    // å¯¹è±¡ä¸é€ƒé€¸ï¼šä»…åœ¨æ–¹æ³•å†…ä½¿ç”¨
    public int noEscape() {
        Point p = new Point(1, 2);  // å¯¹è±¡ä¸ä¼šé€ƒé€¸å‡ºæ–¹æ³•
        return p.x + p.y;           // å¯ä»¥ä¼˜åŒ–ä¸ºæ ˆä¸Šåˆ†é…
    }
    
    // å¯¹è±¡é€ƒé€¸ï¼šè¿”å›ç»™è°ƒç”¨è€…
    public Point escape() {
        Point p = new Point(3, 4);  // å¯¹è±¡é€ƒé€¸ï¼Œå¿…é¡»åœ¨å †ä¸Šåˆ†é…
        return p;                   // è¿”å›ç»™å¤–éƒ¨ä½¿ç”¨
    }
    
    // å‚æ•°é€ƒé€¸ï¼šä½œä¸ºå‚æ•°ä¼ é€’
    public void paramEscape() {
        Point p = new Point(5, 6);
        process(p);                 // ä¼ é€’ç»™å…¶ä»–æ–¹æ³•ï¼Œå¯èƒ½é€ƒé€¸
    }
    
    void process(Point point) {
        // pointå¯èƒ½è¢«å­˜å‚¨æˆ–è¿”å›
    }
}

class Point {
    int x, y;
    Point(int x, int y) { this.x = x; this.y = y; }
}

// é€ƒé€¸åˆ†æä¼˜åŒ–ï¼š
// âœ… æœªé€ƒé€¸å¯¹è±¡å¯ä»¥æ ˆä¸Šåˆ†é…
// âœ… å‡å°‘GCå‹åŠ›
// âœ… æé«˜å†…å­˜è®¿é—®å±€éƒ¨æ€§
```

**ğŸ”„ æ ‡é‡æ›¿æ¢ï¼ˆScalar Replacementï¼‰**
```java
// æ ‡é‡æ›¿æ¢ç¤ºä¾‹
public class ScalarReplacement {
    
    public int calculate() {
        Point p = new Point(10, 20);  // å¯¹è±¡æœªé€ƒé€¸
        return p.x + p.y;
    }
    
    // ç»è¿‡æ ‡é‡æ›¿æ¢ä¼˜åŒ–åçš„ç­‰æ•ˆä»£ç ï¼š
    public int calculateOptimized() {
        // å¯¹è±¡è¢«æ›¿æ¢ä¸ºæ ‡é‡å˜é‡
        int p_x = 10;  // æ›¿æ¢Point.x
        int p_y = 20;  // æ›¿æ¢Point.y
        return p_x + p_y;  // ç›´æ¥ä½¿ç”¨æ ‡é‡
    }
}

// æ ‡é‡æ›¿æ¢æ¡ä»¶ï¼š
// âœ… å¯¹è±¡ä¸ä¼šé€ƒé€¸
// âœ… å¯¹è±¡å­—æ®µå¯ä»¥ç‹¬ç«‹è®¿é—®
// âœ… å­—æ®µè®¿é—®æ¨¡å¼ç®€å•

// æ ‡é‡æ›¿æ¢æ•ˆæœï¼š
// âœ… å®Œå…¨æ¶ˆé™¤å¯¹è±¡åˆ†é…
// âœ… å­—æ®µè®¿é—®å˜ä¸ºå±€éƒ¨å˜é‡è®¿é—®
// âœ… è¿›ä¸€æ­¥ä¼˜åŒ–æœºä¼š
```

**ğŸ“š æ ˆä¸Šåˆ†é…ï¼ˆStack Allocationï¼‰**
```java
public class StackAllocation {
    
    public void stackAllocExample() {
        // å¤§é‡ä¸´æ—¶å¯¹è±¡åˆ›å»º
        for (int i = 0; i < 1000000; i++) {
            Temp temp = new Temp(i);  // å¦‚æœä¸é€ƒé€¸ï¼Œå¯æ ˆä¸Šåˆ†é…
            temp.process();
            // tempåœ¨å¾ªç¯ç»“æŸåç«‹å³æ­»äº¡
        }
    }
    
    public void heapAllocExample() {
        List<Temp> list = new ArrayList<>();
        for (int i = 0; i < 1000000; i++) {
            Temp temp = new Temp(i);  // é€ƒé€¸åˆ°listä¸­ï¼Œå¿…é¡»å †åˆ†é…
            list.add(temp);
        }
    }
}

class Temp {
    private int value;
    
    Temp(int value) { this.value = value; }
    
    void process() {
        // ç®€å•å¤„ç†
        System.out.println(value);
    }
}

// æ ˆä¸Šåˆ†é…ä¼˜åŠ¿ï¼š
// âœ… æ— GCå‹åŠ›ï¼šæ ˆä¸Šå¯¹è±¡éšæ ˆå¸§é”€æ¯
// âœ… åˆ†é…é€Ÿåº¦å¿«ï¼šç§»åŠ¨æ ˆæŒ‡é’ˆå³å¯
// âœ… å†…å­˜å±€éƒ¨æ€§å¥½ï¼šæ ˆå†…å­˜è¿ç»­
// âœ… çº¿ç¨‹å®‰å…¨ï¼šæ¯çº¿ç¨‹ç‹¬ç«‹æ ˆ
```

**âš™ï¸ ä¼˜åŒ–æŠ€æœ¯å¯ç”¨å‚æ•°**
```bash
# é€ƒé€¸åˆ†æ
-XX:+DoEscapeAnalysis                   # å¯ç”¨é€ƒé€¸åˆ†æï¼ˆé»˜è®¤å¼€å¯ï¼‰

# æ ‡é‡æ›¿æ¢
-XX:+EliminateAllocations              # å¯ç”¨æ ‡é‡æ›¿æ¢ï¼ˆé»˜è®¤å¼€å¯ï¼‰

# æ ˆä¸Šåˆ†é…
-XX:+UseTLAB                           # ä½¿ç”¨TLABï¼ˆé—´æ¥æ”¯æŒæ ˆä¸Šåˆ†é…ï¼‰

# æ–¹æ³•å†…è”
-XX:MaxInlineLevel=9                    # æœ€å¤§å†…è”æ·±åº¦
-XX:MaxFreqInlineSize=325               # çƒ­ç‚¹æ–¹æ³•å†…è”å¤§å°é˜ˆå€¼
-XX:MaxInlineSize=35                    # æ™®é€šæ–¹æ³•å†…è”å¤§å°é˜ˆå€¼

# æŸ¥çœ‹ä¼˜åŒ–ä¿¡æ¯
-XX:+PrintCompilation                   # æ˜¾ç¤ºç¼–è¯‘ä¿¡æ¯
-XX:+UnlockDiagnosticVMOptions
-XX:+PrintInlining                      # æ˜¾ç¤ºå†…è”ä¿¡æ¯
-XX:+PrintEliminateAllocations          # æ˜¾ç¤ºæ ‡é‡æ›¿æ¢ä¿¡æ¯
```

---

## 3. ğŸ“ æ–¹æ³•è°ƒç”¨ä¸å¼‚å¸¸å¤„ç†


### 3.1 æ–¹æ³•è°ƒç”¨çš„åº•å±‚å®ç°


**ğŸ—ï¸ æ–¹æ³•è°ƒç”¨æœºåˆ¶æ¦‚è§ˆ**
```
æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ï¼š
1. å‡†å¤‡å‚æ•°ï¼šå°†å‚æ•°æ¨å…¥æ“ä½œæ•°æ ˆ
2. æ‰§è¡Œè°ƒç”¨æŒ‡ä»¤ï¼šinvokeç³»åˆ—æŒ‡ä»¤
3. åˆ›å»ºæ ˆå¸§ï¼šä¸ºè¢«è°ƒç”¨æ–¹æ³•åˆ†é…æ ˆå¸§
4. å‚æ•°ä¼ é€’ï¼šå°†å‚æ•°ä¼ é€’ç»™æ–°æ ˆå¸§
5. æ‰§è¡Œæ–¹æ³•ä½“ï¼šåœ¨æ–°æ ˆå¸§ä¸­æ‰§è¡Œ
6. å¤„ç†è¿”å›å€¼ï¼šå°†ç»“æœè¿”å›ç»™è°ƒç”¨è€…
7. é”€æ¯æ ˆå¸§ï¼šæ¸…ç†è¢«è°ƒç”¨æ–¹æ³•çš„æ ˆå¸§
```

**ğŸ’» æ–¹æ³•è°ƒç”¨å­—èŠ‚ç åˆ†æ**
```java
public class MethodCallExample {
    public void caller() {
        int result = add(5, 3);
        System.out.println(result);
    }
    
    public int add(int a, int b) {
        return a + b;
    }
}

// calleræ–¹æ³•çš„å­—èŠ‚ç ï¼š
public void caller();
  Code:
     0: aload_0              // åŠ è½½this
     1: iconst_5             // åŠ è½½å‚æ•°5
     2: iconst_3             // åŠ è½½å‚æ•°3
     3: invokevirtual #2     // è°ƒç”¨addæ–¹æ³•
     6: istore_1             // å­˜å‚¨è¿”å›å€¼åˆ°å±€éƒ¨å˜é‡
     7: getstatic #3         // è·å–System.out
    10: iload_1              // åŠ è½½result
    11: invokevirtual #4     // è°ƒç”¨println
    14: return               // æ–¹æ³•è¿”å›

// addæ–¹æ³•çš„å­—èŠ‚ç ï¼š
public int add(int, int);
  Code:
     0: iload_1              // åŠ è½½å‚æ•°a
     1: iload_2              // åŠ è½½å‚æ•°b
     2: iadd                 // æ‰§è¡ŒåŠ æ³•
     3: ireturn              // è¿”å›ç»“æœ
```

### 3.2 è™šæ–¹æ³•è¡¨ï¼ˆVirtual Method Tableï¼‰


**ğŸ“‹ è™šæ–¹æ³•è¡¨ç»“æ„**
```java
// ç±»ç»§æ‰¿ç»“æ„ç¤ºä¾‹
class Animal {
    public void eat() { System.out.println("Animal eats"); }
    public void sleep() { System.out.println("Animal sleeps"); }
    public void move() { System.out.println("Animal moves"); }
}

class Dog extends Animal {
    @Override
    public void eat() { System.out.println("Dog eats"); }
    @Override
    public void move() { System.out.println("Dog runs"); }
    public void bark() { System.out.println("Dog barks"); }
}

class Cat extends Animal {
    @Override
    public void eat() { System.out.println("Cat eats"); }
    public void climb() { System.out.println("Cat climbs"); }
}
```

**ğŸ—‚ï¸ è™šæ–¹æ³•è¡¨å¸ƒå±€**
```
Animalç±»çš„è™šæ–¹æ³•è¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç´¢å¼• â”‚    æ–¹æ³•å…¥å£      â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0  â”‚ Animal.eat()     â”‚
â”‚  1  â”‚ Animal.sleep()   â”‚
â”‚  2  â”‚ Animal.move()    â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dogç±»çš„è™šæ–¹æ³•è¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç´¢å¼• â”‚    æ–¹æ³•å…¥å£      â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0  â”‚ Dog.eat()        â”‚ â† é‡å†™äº†çˆ¶ç±»æ–¹æ³•
â”‚  1  â”‚ Animal.sleep()   â”‚ â† ç»§æ‰¿çˆ¶ç±»æ–¹æ³•
â”‚  2  â”‚ Dog.move()       â”‚ â† é‡å†™äº†çˆ¶ç±»æ–¹æ³•
â”‚  3  â”‚ Dog.bark()       â”‚ â† æ–°å¢æ–¹æ³•
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Catç±»çš„è™šæ–¹æ³•è¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç´¢å¼• â”‚    æ–¹æ³•å…¥å£      â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0  â”‚ Cat.eat()        â”‚ â† é‡å†™äº†çˆ¶ç±»æ–¹æ³•
â”‚  1  â”‚ Animal.sleep()   â”‚ â† ç»§æ‰¿çˆ¶ç±»æ–¹æ³•
â”‚  2  â”‚ Animal.move()    â”‚ â† ç»§æ‰¿çˆ¶ç±»æ–¹æ³•
â”‚  3  â”‚ Cat.climb()      â”‚ â† æ–°å¢æ–¹æ³•
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âš¡ è™šæ–¹æ³•è°ƒç”¨è¿‡ç¨‹**
```java
public class VirtualMethodCall {
    public static void main(String[] args) {
        Animal animal1 = new Dog();
        Animal animal2 = new Cat();
        
        animal1.eat();  // è°ƒç”¨Dog.eat()
        animal2.eat();  // è°ƒç”¨Cat.eat()
    }
}

// invokevirtualæ‰§è¡Œè¿‡ç¨‹ï¼š
// 1. ä»æ“ä½œæ•°æ ˆè·å–å¯¹è±¡å¼•ç”¨
// 2. è·å–å¯¹è±¡çš„å®é™…ç±»å‹ï¼ˆDogæˆ–Catï¼‰
// 3. åœ¨è¯¥ç±»å‹çš„è™šæ–¹æ³•è¡¨ä¸­æŸ¥æ‰¾æ–¹æ³•
// 4. è°ƒç”¨è™šæ–¹æ³•è¡¨ä¸­ç´¢å¼•0çš„æ–¹æ³•
//    - Dogå¯¹è±¡ï¼šè°ƒç”¨Dog.eat()
//    - Catå¯¹è±¡ï¼šè°ƒç”¨Cat.eat()
```

### 3.3 åŠ¨æ€åˆ†æ´¾ä¸é™æ€åˆ†æ´¾


**ğŸ¯ é™æ€åˆ†æ´¾ï¼ˆStatic Dispatchï¼‰**
```java
// é™æ€åˆ†æ´¾ï¼šç¼–è¯‘æ—¶ç¡®å®šè°ƒç”¨ç›®æ ‡
class StaticDispatch {
    public void test(Animal animal) {
        System.out.println("Animal version");
    }
    
    public void test(Dog dog) {
        System.out.println("Dog version");
    }
    
    public void test(Cat cat) {
        System.out.println("Cat version");
    }
    
    public static void main(String[] args) {
        StaticDispatch dispatcher = new StaticDispatch();
        
        Animal animal = new Dog();  // é™æ€ç±»å‹ï¼šAnimalï¼Œå®é™…ç±»å‹ï¼šDog
        Dog dog = new Dog();        // é™æ€ç±»å‹ï¼šDogï¼Œå®é™…ç±»å‹ï¼šDog
        
        dispatcher.test(animal);    // è¾“å‡ºï¼šAnimal versionï¼ˆåŸºäºé™æ€ç±»å‹ï¼‰
        dispatcher.test(dog);       // è¾“å‡ºï¼šDog versionï¼ˆåŸºäºé™æ€ç±»å‹ï¼‰
    }
}

// é™æ€åˆ†æ´¾ç‰¹ç‚¹ï¼š
// âœ… é‡è½½æ–¹æ³•çš„é€‰æ‹©åŸºäºå‚æ•°çš„é™æ€ç±»å‹
// âœ… ç¼–è¯‘æ—¶ç¡®å®šï¼Œä½¿ç”¨invokespecialæˆ–invokestatic
// âœ… ä¸æ¶‰åŠè¿è¡Œæ—¶å¤šæ€
```

**ğŸŒŠ åŠ¨æ€åˆ†æ´¾ï¼ˆDynamic Dispatchï¼‰**
```java
// åŠ¨æ€åˆ†æ´¾ï¼šè¿è¡Œæ—¶ç¡®å®šè°ƒç”¨ç›®æ ‡
class DynamicDispatch {
    public static void main(String[] args) {
        Animal animal1 = new Dog();
        Animal animal2 = new Cat();
        
        // åŠ¨æ€åˆ†æ´¾ï¼šåŸºäºå®é™…ç±»å‹é€‰æ‹©æ–¹æ³•
        animal1.eat();  // è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨Dog.eat()
        animal2.eat();  // è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨Cat.eat()
        
        // ç¼–è¯‘æ—¶æ— æ³•ç¡®å®šå…·ä½“è°ƒç”¨å“ªä¸ªeat()æ–¹æ³•
        // éœ€è¦åœ¨è¿è¡Œæ—¶é€šè¿‡è™šæ–¹æ³•è¡¨æŸ¥æ‰¾
    }
}

// åŠ¨æ€åˆ†æ´¾ç‰¹ç‚¹ï¼š
// âœ… é‡å†™æ–¹æ³•çš„é€‰æ‹©åŸºäºå¯¹è±¡çš„å®é™…ç±»å‹
// âœ… è¿è¡Œæ—¶ç¡®å®šï¼Œä½¿ç”¨invokevirtual
// âœ… å®ç°å¤šæ€æœºåˆ¶
```

**ğŸ“Š åˆ†æ´¾æœºåˆ¶å¯¹æ¯”**

| åˆ†æ´¾ç±»å‹ | **å†³å®šå› ç´ ** | **ç¡®å®šæ—¶æœº** | **æŒ‡ä»¤ç±»å‹** | **å…¸å‹åœºæ™¯** |
|---------|-------------|-------------|-------------|-------------|
| ğŸ¯ **é™æ€åˆ†æ´¾** | `å‚æ•°é™æ€ç±»å‹` | `ç¼–è¯‘æ—¶` | `invokespecial/static` | `æ–¹æ³•é‡è½½` |
| ğŸŒŠ **åŠ¨æ€åˆ†æ´¾** | `å¯¹è±¡å®é™…ç±»å‹` | `è¿è¡Œæ—¶` | `invokevirtual` | `æ–¹æ³•é‡å†™` |

### 3.4 å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼šå¼‚å¸¸è¡¨ã€try-catch-finallyçš„å­—èŠ‚ç å®ç°


**âš ï¸ å¼‚å¸¸è¡¨ç»“æ„**
```java
public class ExceptionHandling {
    public void handleException() {
        try {
            riskyOperation();
        } catch (IOException e) {
            System.out.println("IO Exception: " + e.getMessage());
        } catch (Exception e) {
            System.out.println("General Exception: " + e.getMessage());
        } finally {
            System.out.println("Finally block");
        }
    }
    
    void riskyOperation() throws IOException {
        throw new IOException("Test exception");
    }
}

// å¯¹åº”çš„å¼‚å¸¸è¡¨ï¼š
Exception table:
  from    to  target type
     0    10    20   Class java/io/IOException
     0    10    35   Class java/lang/Exception
     0    10    55   any
    20    35    55   any
    35    55    55   any
```

**ğŸ” å¼‚å¸¸è¡¨å­—æ®µå«ä¹‰**
```
å¼‚å¸¸è¡¨å­—æ®µè§£é‡Šï¼š
â€¢ from: ç›‘æ§èŒƒå›´èµ·å§‹å­—èŠ‚ç åç§»é‡
â€¢ to: ç›‘æ§èŒƒå›´ç»“æŸå­—èŠ‚ç åç§»é‡
â€¢ target: å¼‚å¸¸å¤„ç†å™¨å…¥å£ç‚¹å­—èŠ‚ç åç§»é‡
â€¢ type: æ•è·çš„å¼‚å¸¸ç±»å‹ï¼ˆanyè¡¨ç¤ºfinallyï¼‰

å¼‚å¸¸å¤„ç†æµç¨‹ï¼š
1. å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJVMæŸ¥æ‰¾å¼‚å¸¸è¡¨
2. æŒ‰é¡ºåºåŒ¹é…å¼‚å¸¸ç±»å‹
3. æ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè·³è½¬åˆ°targetæŒ‡å®šçš„å¤„ç†å™¨
4. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œç»§ç»­å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸
```

**ğŸ’» try-catch-finallyå­—èŠ‚ç åˆ†æ**
```java
public int exceptionTest() {
    int result = 0;
    try {
        result = 10 / 0;        // å¯èƒ½æŠ›å‡ºå¼‚å¸¸
        return result;
    } catch (ArithmeticException e) {
        result = -1;
        return result;
    } finally {
        System.out.println("Finally");
    }
}

// ç®€åŒ–çš„å­—èŠ‚ç ç»“æ„ï¼š
public int exceptionTest();
  Code:
     0: iconst_0              // result = 0
     1: istore_1
     2: bipush 10             // 10 / 0
     4: iconst_0
     5: idiv                  // å¯èƒ½æŠ›å‡ºArithmeticException
     6: istore_1              // result = ç»“æœ
     7: getstatic #2          // System.out
    10: ldc #3                // "Finally"
    12: invokevirtual #4      // println
    15: iload_1               // return result
    16: ireturn
    17: astore_2              // catchå—å¼€å§‹
    18: iconst_m1             // result = -1
    19: istore_1
    20: getstatic #2          // System.out
    23: ldc #3                // "Finally"
    25: invokevirtual #4      // println
    28: iload_1               // return result
    29: ireturn
    30: astore_3              // finallyå—ï¼ˆå¼‚å¸¸æƒ…å†µï¼‰
    31: getstatic #2          // System.out
    34: ldc #3                // "Finally"
    36: invokevirtual #4      // println
    39: aload_3               // é‡æ–°æŠ›å‡ºå¼‚å¸¸
    40: athrow

  Exception table:
    from    to  target type
       2     7    17   Class java/lang/ArithmeticException
       2     7    30   any
      17    20    30   any
```

### 3.5 æ–¹æ³•è¿”å›åœ°å€å’Œå¼‚å¸¸å¤„ç†çš„å…³ç³»


**ğŸ”— æ–¹æ³•è¿”å›æœºåˆ¶**
```java
public class ReturnMechanism {
    
    // æ­£å¸¸è¿”å›
    public int normalReturn(int x) {
        if (x > 0) {
            return x * 2;     // æ­£å¸¸è¿”å›ç‚¹1
        }
        return 0;             // æ­£å¸¸è¿”å›ç‚¹2
    }
    
    // å¼‚å¸¸è¿”å›
    public int exceptionReturn(int x) {
        if (x == 0) {
            throw new IllegalArgumentException("x cannot be zero");
        }
        return x;             // æ­£å¸¸è¿”å›ç‚¹
    }
}

// è¿”å›åœ°å€çš„å­˜å‚¨ï¼š
// âœ… æ­£å¸¸è¿”å›ï¼šæ–¹æ³•è¿”å›åœ°å€å­˜å‚¨åœ¨æ ˆå¸§ä¸­
// âœ… å¼‚å¸¸è¿”å›ï¼šé€šè¿‡å¼‚å¸¸è¡¨ç¡®å®šè¿”å›ä½ç½®
// âœ… è°ƒç”¨è€…æ¢å¤ï¼šæ ¹æ®è¿”å›åœ°å€æ¢å¤æ‰§è¡Œ
```

**âš¡ å¼‚å¸¸ä¼ æ’­æœºåˆ¶**
```java
public class ExceptionPropagation {
    
    public void methodA() {
        try {
            methodB();
        } catch (Exception e) {
            System.out.println("Caught in methodA: " + e.getMessage());
        }
    }
    
    public void methodB() throws Exception {
        methodC();  // å¼‚å¸¸ä¼šä¼ æ’­åˆ°è¿™é‡Œ
    }
    
    public void methodC() throws Exception {
        throw new Exception("Exception from methodC");
    }
}

// å¼‚å¸¸ä¼ æ’­è¿‡ç¨‹ï¼š
// 1. methodCæŠ›å‡ºå¼‚å¸¸
// 2. methodCæ ˆå¸§è¢«é”€æ¯ï¼Œå¼‚å¸¸ä¼ æ’­åˆ°methodB
// 3. methodBæ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œæ ˆå¸§è¢«é”€æ¯ï¼Œç»§ç»­ä¼ æ’­åˆ°methodA
// 4. methodAæ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸ä¼ æ’­åœæ­¢
// 5. ç¨‹åºåœ¨methodAçš„catchå—ä¸­ç»§ç»­æ‰§è¡Œ
```

**ğŸ“‹ è¿”å›åœ°å€ç®¡ç†**
```
æ ˆå¸§ä¸­çš„è¿”å›åœ°å€ä¿¡æ¯ï¼š

æ­£å¸¸è°ƒç”¨æƒ…å†µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        methodAæ ˆå¸§              â”‚
â”‚  è¿”å›åœ°å€ï¼šmainæ–¹æ³•çš„PC+1        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        methodBæ ˆå¸§              â”‚
â”‚  è¿”å›åœ°å€ï¼šmethodAçš„PC+1         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¼‚å¸¸æƒ…å†µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        methodAæ ˆå¸§              â”‚
â”‚  å¼‚å¸¸å¤„ç†å™¨ï¼šcatchå—å…¥å£         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- å­—èŠ‚ç æ˜¯å¹³å°æ— å…³çš„ä¸­é—´è¡¨ç¤ºï¼Œé€šè¿‡æ“ä½œæ•°æ ˆå’Œå±€éƒ¨å˜é‡è¡¨äº¤äº’æ‰§è¡Œ
- JITç¼–è¯‘å™¨é€šè¿‡åˆ†å±‚ç¼–è¯‘å¹³è¡¡å¯åŠ¨é€Ÿåº¦å’Œæ‰§è¡Œæ€§èƒ½ï¼Œçƒ­ç‚¹ä»£ç è¢«ä¼˜åŒ–ç¼–è¯‘
- æ–¹æ³•è°ƒç”¨é€šè¿‡è™šæ–¹æ³•è¡¨å®ç°å¤šæ€ï¼Œé™æ€åˆ†æ´¾åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼ŒåŠ¨æ€åˆ†æ´¾åœ¨è¿è¡Œæ—¶ç¡®å®š
- å¼‚å¸¸å¤„ç†é€šè¿‡å¼‚å¸¸è¡¨å®ç°ï¼ŒåŒ…å«ç›‘æ§èŒƒå›´ã€å¤„ç†å™¨å…¥å£å’Œå¼‚å¸¸ç±»å‹ä¿¡æ¯
- JVMæ‰§è¡Œå¼•æ“æ˜¯è§£é‡Šå™¨å’Œç¼–è¯‘å™¨çš„åä½œï¼Œé€šè¿‡å¤šç§ä¼˜åŒ–æŠ€æœ¯æå‡æ€§èƒ½