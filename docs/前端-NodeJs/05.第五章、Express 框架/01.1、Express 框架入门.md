---
title: 1、Express 框架入门
---
## 📚 目录

1. [Express 到底是什么](#1-express-到底是什么)
2. [为什么要使用 Express 框架](#2-为什么要使用-express-框架)
3. [Express 在 Node.js 生态中的地位](#3-express-在-nodejs-生态中的地位)
4. [Express vs 其他框架对比](#4-express-vs-其他框架对比)
5. [安装和创建第一个应用](#5-安装和创建第一个应用)
6. [Express 基本路由](#6-express-基本路由)
7. [Express 应用结构解析](#7-express-应用结构解析)
8. [Express Generator 脚手架](#8-express-generator-脚手架)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🌟 Express 到底是什么


### 1.1 通俗理解 Express

想象一下，**Express 就像是一个餐厅的完整服务体系**：

```
原生 Node.js HTTP：
🔧 自己搭建厨房、自己制定菜单、自己安排服务员
   需要从零开始处理每一个细节

Express 框架：
🏪 提供现成的餐厅框架、标准化的服务流程
   你只需要专注于做菜（业务逻辑）
```

**简单说**：Express 是 Node.js 的一个 **`Web 应用框架`**，它把复杂的 HTTP 服务器搭建过程变得简单易用。

### 1.2 Express 核心定义

```
📋 Express 是什么：
• 基于 Node.js 的 Web 应用开发框架
• 提供了一套简洁、灵活的 Web 功能
• 让构建 Web 应用和 API 变得快速简单
• 目前最流行的 Node.js Web 框架

🎯 Express 的作用：
• 简化 HTTP 服务器创建
• 提供路由管理功能
• 支持中间件机制
• 简化请求和响应处理
```

### 1.3 没有框架 vs 有框架对比


**❌ 不用 Express（原生 Node.js）**：
```javascript
const http = require('http');
const url = require('url');

const server = http.createServer((req, res) => {
  const pathname = url.parse(req.url).pathname;
  
  // 手动处理不同路由
  if (pathname === '/' && req.method === 'GET') {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end('<h1>首页</h1>');
  } else if (pathname === '/about' && req.method === 'GET') {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end('<h1>关于页面</h1>');
  } else {
    res.writeHead(404, {'Content-Type': 'text/html'});
    res.end('<h1>页面不存在</h1>');
  }
});
```

**✅ 使用 Express**：
```javascript
const express = require('express');
const app = express();

// 简洁的路由定义
app.get('/', (req, res) => {
  res.send('<h1>首页</h1>');
});

app.get('/about', (req, res) => {
  res.send('<h1>关于页面</h1>');
});
```

💡 **对比结果**：Express 让代码量减少 70%，逻辑更清晰！

---

## 2. 🚀 为什么要使用 Express 框架


### 2.1 核心优势解析


**🎯 主要优势**：

| 优势特点 | **具体说明** | **实际效果** |
|---------|-------------|-------------|
| 🚀 **开发效率** | `路由自动处理，中间件机制` | `开发速度提升 3-5 倍` |
| 🧩 **功能丰富** | `内置常用 Web 功能` | `减少重复造轮子` |
| 🔧 **简单易学** | `API 设计直观友好` | `新手 1-2 天快速上手` |
| 🌐 **生态完善** | `海量中间件可用` | `90% 需求都有现成方案` |
| 📦 **轻量灵活** | `核心功能精简，按需扩展` | `项目大小可控` |

### 2.2 实际开发中的便利


**🔸 路由管理便利**：
```javascript
// 不同 HTTP 方法的路由
app.get('/users', getAllUsers);      // 获取用户列表
app.post('/users', createUser);      // 创建新用户
app.put('/users/:id', updateUser);   // 更新用户
app.delete('/users/:id', deleteUser); // 删除用户
```

**🔸 中间件支持**：
```javascript
// 全局中间件 - 记录所有请求
app.use((req, res, next) => {
  console.log(`${req.method} ${req.url}`);
  next();
});

// 路由级中间件 - 身份验证
app.get('/admin', requireAuth, (req, res) => {
  res.send('管理员页面');
});
```

### 2.3 企业级应用考虑


```
🏢 企业选择 Express 的原因：

✅ 成熟稳定：2010年发布，经过13年验证
✅ 社区活跃：GitHub 60k+ stars，npm 周下载量 2000w+
✅ 大厂使用：腾讯、阿里、字节跳动等都在使用
✅ 人才储备：市场上 Express 开发者数量最多
✅ 维护成本：文档完善，问题解决方案多
```

---

## 3. 🌐 Express 在 Node.js 生态中的地位


### 3.1 生态地位分析


```
Node.js Web 框架生态图：

           Node.js 核心
               |
    ┌─────────────────────────┐
    |      Web 框架层         |
    ├─────────────────────────┤
    | Express  👑 (王者地位)   |
    | Koa      💪 (新兴力量)   |  
    | Fastify  ⚡ (性能之王)   |
    | Nest.js  🏗️ (企业级)    |
    └─────────────────────────┘
               |
    ┌─────────────────────────┐
    |     应用生态层          |
    └─────────────────────────┘
```

### 3.2 市场占有率对比


| 框架名称 | **市场份额** | **适用场景** | **学习难度** |
|---------|-------------|-------------|-------------|
| 📊 **Express** | `~65%` | `通用 Web 应用、API 开发` | `⭐⭐☆☆☆ 简单` |
| 🎯 **Koa** | `~15%` | `现代化应用、轻量级项目` | `⭐⭐⭐☆☆ 中等` |
| ⚡ **Fastify** | `~8%` | `高性能 API、微服务` | `⭐⭐⭐☆☆ 中等` |
| 🏗️ **Nest.js** | `~7%` | `大型企业应用、TypeScript` | `⭐⭐⭐⭐☆ 较难` |

### 3.3 Express 的历史地位


```
🕰️ Express 发展历程：

2010年 → Express 诞生
2011年 → 成为 Node.js 默认框架  
2013年 → Express 4.0 重大更新
2017年 → Express 5.0 开发启动
2024年 → 仍然是最受欢迎的 Node.js 框架

💡 为什么 Express 能保持王者地位？
• 先发优势：最早的成熟 Node.js Web 框架
• 简单易用：学习成本低，上手快
• 生态丰富：中间件生态最完善
• 稳定可靠：长期维护，向后兼容好
```

---

## 4. ⚖️ Express vs 其他框架对比


### 4.1 详细对比分析


**🆚 Express vs Koa**

| 对比维度 | **Express** | **Koa** |
|---------|------------|---------|
| 🎯 **设计理念** | `包含更多内置功能` | `极简核心，按需扩展` |
| 📚 **学习曲线** | `文档完善，示例多` | `需要理解 async/await` |
| 🔧 **中间件** | `传统回调风格` | `基于 Promise，更现代` |
| 🌐 **生态系统** | `中间件数量最多` | `生态较小但质量高` |
| 👥 **社区支持** | `使用者最多` | `技术更先进，但人员少` |

**🔍 代码风格对比**：

```javascript
// Express 风格（传统回调）
app.use((req, res, next) => {
  console.log('请求处理');
  next();
});

// Koa 风格（现代 async/await）
app.use(async (ctx, next) => {
  console.log('请求处理');
  await next();
});
```

**🆚 Express vs Fastify**

| 对比维度 | **Express** | **Fastify** |
|---------|------------|-------------|
| ⚡ **性能** | `标准性能` | `性能优异（2-3倍快）` |
| 🧩 **功能** | `功能全面` | `专注于 API 开发` |
| 📖 **学习成本** | `最容易学习` | `需要了解 JSON Schema` |
| 🔧 **灵活性** | `极其灵活` | `结构化程度更高` |

### 4.2 选择建议


```
🎯 什么时候选择 Express？

✅ 你是 Node.js 新手
✅ 项目需要快速上线
✅ 团队成员技术水平不一
✅ 需要丰富的中间件支持
✅ 构建传统的 Web 应用

🎯 什么时候考虑其他框架？

🔸 Koa：团队技术水平高，喜欢现代化开发
🔸 Fastify：对性能要求极高的 API 项目
🔸 Nest.js：大型企业项目，使用 TypeScript
```

---

## 5. 💻 安装和创建第一个应用


### 5.1 环境准备


**📋 前提条件**：
- ✅ Node.js 已安装（版本 >= 14.x）
- ✅ npm 或 yarn 包管理器可用
- ✅ 基本的 JavaScript 语法

**🔍 检查环境**：
```bash
# 检查 Node.js 版本
$ node --version
v18.17.0

# 检查 npm 版本  
$ npm --version
9.6.7
```

### 5.2 安装 Express


**🚀 创建项目目录**：
```bash
# 创建项目文件夹
$ mkdir my-express-app
$ cd my-express-app

# 初始化 npm 项目
$ npm init -y
```

**📦 安装 Express**：
```bash
# 安装 Express
$ npm install express

# 查看安装结果
$ npm list express
my-express-app@1.0.0
└── express@4.18.2
```

### 5.3 创建第一个 Express 应用


**📄 创建 `app.js` 文件**：
```javascript
// 引入 Express 框架
const express = require('express');

// 创建 Express 应用实例
const app = express();

// 定义端口号
const PORT = 3000;

// 创建一个简单的路由
app.get('/', (req, res) => {
  res.send('🎉 恭喜！你的第一个 Express 应用运行成功！');
});

// 启动服务器
app.listen(PORT, () => {
  console.log(`🚀 服务器运行在 http://localhost:${PORT}`);
});
```

**🎯 运行应用**：
```bash
# 启动应用
$ node app.js
🚀 服务器运行在 http://localhost:3000

# 浏览器访问：http://localhost:3000
# 看到：🎉 恭喜！你的第一个 Express 应用运行成功！
```

### 5.4 代码逐行解析


```javascript
// 1️⃣ 引入 Express 模块
const express = require('express');
// 💡 这里导入的是 Express 的构造函数

// 2️⃣ 创建应用实例
const app = express();  
// 💡 调用 express() 创建一个应用对象
// 💡 app 对象包含了所有路由和中间件功能

// 3️⃣ 定义路由
app.get('/', (req, res) => {
  // 💡 get() 方法处理 GET 请求
  // 💡 '/' 是路径，(req, res) => {} 是处理函数
  res.send('Hello World');
  // 💡 res.send() 发送响应给客户端
});

// 4️⃣ 启动服务器
app.listen(3000, () => {
  // 💡 listen() 让应用监听指定端口
  // 💡 回调函数在服务器启动后执行
  console.log('服务器启动成功');
});
```

---

## 6. 🛣️ Express 基本路由


### 6.1 路由概念理解


**🎯 什么是路由？**
路由就像是 **`快递分拣中心`**：

```
用户请求 → Express 路由器 → 对应处理函数
   ↓            ↓              ↓
GET /users → app.get('/users') → 返回用户列表
POST /login → app.post('/login') → 处理登录逻辑
PUT /profile → app.put('/profile') → 更新用户信息
```

**🔸 路由的三个要素**：
- **HTTP 方法**：GET、POST、PUT、DELETE 等
- **路径**：/、/users、/login 等
- **处理函数**：当路由匹配时执行的代码

### 6.2 基本路由方法


**📋 常用路由方法**：

```javascript
const app = express();

// 🔸 GET 路由 - 获取数据
app.get('/users', (req, res) => {
  res.send('获取用户列表');
});

// 🔸 POST 路由 - 创建数据  
app.post('/users', (req, res) => {
  res.send('创建新用户');
});

// 🔸 PUT 路由 - 更新数据
app.put('/users/123', (req, res) => {
  res.send('更新用户 123');
});

// 🔸 DELETE 路由 - 删除数据
app.delete('/users/123', (req, res) => {
  res.send('删除用户 123');
});

// 🔸 ALL 路由 - 匹配所有 HTTP 方法
app.all('/api/*', (req, res) => {
  res.send('API 通用处理');
});
```

### 6.3 路由参数和查询


**🎯 路径参数示例**：
```javascript
// 路径参数（动态路由）
app.get('/users/:id', (req, res) => {
  const userId = req.params.id;
  res.send(`用户ID是：${userId}`);
});

// 多个参数
app.get('/users/:userId/posts/:postId', (req, res) => {
  const { userId, postId } = req.params;
  res.send(`用户${userId}的文章${postId}`);
});

// 访问示例：
// GET /users/123 → userId = "123"
// GET /users/456/posts/789 → userId = "456", postId = "789"
```

**🔍 查询参数示例**：
```javascript
// 查询参数处理
app.get('/search', (req, res) => {
  const { keyword, page, limit } = req.query;
  res.json({
    搜索关键词: keyword,
    页码: page,
    每页条数: limit
  });
});

// 访问示例：
// GET /search?keyword=nodejs&page=1&limit=10
// → keyword: "nodejs", page: "1", limit: "10"
```

### 6.4 实用路由示例


**🏪 模拟商城 API**：
```javascript
const app = express();

// 🏠 首页
app.get('/', (req, res) => {
  res.send(`
    <h1>欢迎来到我的商城</h1>
    <ul>
      <li><a href="/products">商品列表</a></li>
      <li><a href="/about">关于我们</a></li>
    </ul>
  `);
});

// 📦 商品相关路由
app.get('/products', (req, res) => {
  res.json([
    { id: 1, name: 'iPhone 15', price: 5999 },
    { id: 2, name: 'MacBook Pro', price: 12999 }
  ]);
});

app.get('/products/:id', (req, res) => {
  const productId = req.params.id;
  res.json({
    id: productId,
    name: `商品 ${productId}`,
    description: '这是一个很棒的商品'
  });
});

// 📝 关于页面
app.get('/about', (req, res) => {
  res.send('<h1>关于我们</h1><p>我们是一家专业的电商公司</p>');
});

// 启动服务器
app.listen(3000, () => {
  console.log('🛒 商城服务器启动：http://localhost:3000');
});
```

---

## 7. 🏗️ Express 应用结构解析


### 7.1 请求响应生命周期


**🔄 完整流程图**：
```
客户端请求 → Express 应用 → 路由匹配 → 中间件处理 → 响应返回

具体步骤：
1️⃣ 客户端发送 HTTP 请求
    ↓
2️⃣ Express 接收请求，创建 req 和 res 对象  
    ↓
3️⃣ 依次执行全局中间件
    ↓
4️⃣ 匹配对应路由
    ↓
5️⃣ 执行路由处理函数
    ↓
6️⃣ 发送响应给客户端
```

### 7.2 核心对象解析


**📋 `req` 对象（请求对象）**：
```javascript
app.get('/demo', (req, res) => {
  // 🔸 常用属性
  console.log('请求方法：', req.method);      // GET
  console.log('请求路径：', req.url);         // /demo
  console.log('请求头：', req.headers);       // 包含所有请求头
  console.log('路径参数：', req.params);      // URL 参数
  console.log('查询参数：', req.query);       // 查询字符串参数
  console.log('请求体：', req.body);          // POST 数据（需要中间件）
  
  res.send('请求信息已打印到控制台');
});
```

**📤 `res` 对象（响应对象）**：
```javascript
app.get('/response-demo', (req, res) => {
  // 🔸 常用响应方法
  
  // 发送文本
  res.send('Hello World');
  
  // 发送 JSON  
  res.json({ message: '成功', code: 200 });
  
  // 设置状态码
  res.status(404).send('页面未找到');
  
  // 重定向
  res.redirect('/home');
  
  // 发送文件
  res.sendFile(path.join(__dirname, 'index.html'));
});
```

### 7.3 应用实例 (app) 详解


**🎯 `app` 对象核心方法**：
```javascript
const app = express();

// 🔸 路由方法
app.get()     // GET 请求
app.post()    // POST 请求  
app.put()     // PUT 请求
app.delete()  // DELETE 请求
app.all()     // 所有 HTTP 方法

// 🔸 中间件方法
app.use()     // 使用中间件

// 🔸 服务器方法
app.listen() // 启动服务器

// 🔸 设置方法
app.set()    // 设置应用配置
app.get()    // 获取应用配置（注意与路由的 get 区分）
```

### 7.4 典型应用结构


**📁 推荐的文件结构**：
```
my-express-app/
├── app.js              # 主应用文件
├── package.json        # 项目配置
├── routes/             # 路由文件夹
│   ├── index.js        # 主路由
│   └── users.js        # 用户路由
├── views/              # 模板文件
├── public/             # 静态资源
│   ├── css/
│   ├── js/
│   └── images/
└── node_modules/       # 依赖包
```

**📄 模块化应用示例**：
```javascript
// app.js - 主应用文件
const express = require('express');
const indexRouter = require('./routes/index');
const usersRouter = require('./routes/users');

const app = express();

// 使用路由
app.use('/', indexRouter);
app.use('/users', usersRouter);

app.listen(3000);

// routes/index.js - 首页路由
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
  res.send('首页');
});

module.exports = router;
```

---

## 8. 🛠️ Express Generator 脚手架


### 8.1 什么是 Express Generator


**🎯 简单理解**：
Express Generator 就像是 **`装修公司的标准模板`**：

```
手动搭建：🔨 自己买材料、设计布局、一步步装修
使用脚手架：🏠 提供标准化的房屋模板，快速入住

Express Generator 提供：
✅ 标准化的项目结构
✅ 基础配置文件
✅ 常用中间件预配置
✅ 开发服务器脚本
```

### 8.2 安装和使用


**📦 全局安装**：
```bash
# 安装 Express Generator
$ npm install -g express-generator

# 验证安装
$ express --version
4.16.1
```

**🚀 创建项目**：
```bash
# 创建基础项目
$ express my-app

# 创建指定模板引擎的项目
$ express --view=ejs my-app
$ express --view=pug my-app

# 进入项目并安装依赖
$ cd my-app
$ npm install

# 启动项目
$ npm start
```

### 8.3 生成的项目结构分析


**📁 脚手架生成的完整结构**：
```
my-app/
├── app.js              # 主应用文件
├── package.json        # 项目配置和依赖
├── bin/
│   └── www            # 服务器启动脚本
├── public/            # 静态资源目录
│   ├── images/        # 图片资源
│   ├── javascripts/   # 前端 JS 文件
│   └── stylesheets/   # CSS 样式文件
│       └── style.css
├── routes/            # 路由目录
│   ├── index.js       # 首页路由
│   └── users.js       # 用户路由
└── views/             # 视图模板目录
    ├── error.jade     # 错误页面模板
    ├── index.jade     # 首页模板
    └── layout.jade    # 布局模板
```

**🔍 核心文件分析**：

**📄 `app.js` - 主应用配置**：
```javascript
var express = require('express');
var path = require('path');
var cookieParser = require('cookie-parser');
var logger = require('morgan');

// 引入路由模块
var indexRouter = require('./routes/index');
var usersRouter = require('./routes/users');

var app = express();

// 视图引擎设置
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade');

// 中间件配置
app.use(logger('dev'));                           // 日志记录
app.use(express.json());                          // JSON 解析
app.use(express.urlencoded({ extended: false })); // URL 编码解析
app.use(cookieParser());                          // Cookie 解析
app.use(express.static(path.join(__dirname, 'public'))); // 静态文件

// 路由配置
app.use('/', indexRouter);
app.use('/users', usersRouter);

module.exports = app;
```

**📄 `bin/www` - 服务器启动脚本**：
```javascript
var app = require('../app');
var http = require('http');

// 设置端口
var port = process.env.PORT || '3000';
app.set('port', port);

// 创建 HTTP 服务器
var server = http.createServer(app);

// 监听端口
server.listen(port);
console.log('服务器运行在端口：' + port);
```

### 8.4 脚手架项目的优势


**✅ 使用脚手架的好处**：

| 优势 | **说明** | **效果** |
|------|---------|---------|
| 🚀 **快速启动** | `标准化项目结构` | `10分钟完成项目搭建` |
| 🔧 **最佳实践** | `集成常用中间件` | `避免配置错误` |
| 📁 **规范结构** | `清晰的目录组织` | `团队协作更容易` |
| 🛠️ **开发工具** | `自动重启、错误处理` | `开发效率更高` |

**⚠️ 脚手架的限制**：
```
💡 注意事项：
• 生成的代码可能包含你不需要的功能
• 某些配置可能不符合你的项目需求  
• 学习阶段建议先手动搭建，理解原理后再使用脚手架
• 生产环境可能需要根据具体需求调整配置
```

### 8.5 调试和错误处理


**🐛 基本调试方法**：
```javascript
// 1️⃣ 控制台输出调试
app.get('/debug', (req, res) => {
  console.log('请求路径：', req.url);
  console.log('请求参数：', req.query);
  res.send('调试信息已输出到控制台');
});

// 2️⃣ 使用 Node.js 调试器
// 启动命令：node --inspect app.js
// 然后在 Chrome 中打开：chrome://inspect

// 3️⃣ 错误处理中间件
app.use((err, req, res, next) => {
  console.error('发生错误：', err.message);
  res.status(500).send('服务器内部错误');
});
```

**📊 开发环境调试技巧**：
```bash
# 使用 nodemon 自动重启
$ npm install -g nodemon
$ nodemon app.js

# 设置调试级别
$ DEBUG=express:* node app.js

# 查看详细错误信息
$ NODE_ENV=development node app.js
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🎯 Express 核心理解：
• Express 是 Node.js 最流行的 Web 框架
• 简化了 HTTP 服务器的创建和管理
• 提供路由、中间件、模板引擎等核心功能
• 拥有丰富的生态系统和社区支持

🛣️ 路由系统理解：
• 路由 = HTTP方法 + 路径 + 处理函数
• 支持静态路由和动态路由（参数）
• req 对象包含请求信息，res 对象用于响应
• 路由匹配按照定义顺序进行
```

### 9.2 实际开发要点


**🔸 最佳实践建议**：
```
📂 项目组织：
• 使用模块化路由，避免单文件过大
• 静态资源放在 public 目录
• 配置文件独立管理

🚀 性能优化：
• 合理使用中间件，避免不必要的处理
• 静态资源使用 CDN 或缓存
• 生产环境关闭调试日志

🔒 安全考虑：
• 不要在客户端暴露敏感信息
• 使用 HTTPS 传输敏感数据
• 对用户输入进行验证和清理
```

### 9.3 学习路径建议


```
📚 Express 学习顺序：

第1步：基础概念理解 ✅
├── Express 是什么
├── 基本安装和使用
└── 简单路由创建

第2步：路由深入学习 (下节课)
├── 路由参数和查询
├── 路由模块化
└── 路由中间件

第3步：中间件机制 (后续课程)
├── 内置中间件
├── 第三方中间件  
└── 自定义中间件

第4步：实战项目练习 (综合应用)
├── 用户管理系统
├── 博客应用
└── API 服务开发
```

### 9.4 常见问题解答


**❓ 新手常见问题**：

| 问题 | **解答** |
|------|---------|
| 🤔 **Express 和 Node.js 什么关系？** | `Node.js 是运行环境，Express 是基于 Node.js 的 Web 框架` |
| 🤔 **为什么选择 Express 而不是其他框架？** | `学习成本低、生态丰富、社区活跃、适合新手入门` |
| 🤔 **Express 应用如何部署到服务器？** | `后续章节会详细讲解部署相关内容` |
| 🤔 **Express 适合开发什么类型的应用？** | `Web 网站、REST API、微服务、实时应用都适合` |

**💡 学习建议**：
- 先理解概念，再动手实践
- 多写代码，少看视频
- 遇到问题先查官方文档
- 加入技术社群，与他人交流

**🎯 下节预告**：
下一节我们将学习 **Express 路由深入**，包括路由参数、路由模块化、路由中间件等高级用法，让你的 Express 应用更加专业和强大！

**核心记忆**：
- Express 让 Node.js Web 开发变得简单
- 路由是 Express 的核心概念
- app.get/post/put/delete 处理不同 HTTP 请求
- req 获取请求信息，res 发送响应
- 脚手架工具帮助快速搭建项目结构