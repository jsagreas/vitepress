---
title: 2ã€grafana-å®‰è£…é…ç½®
---
## ğŸ“š ç›®å½•

1. [Grafanaæ˜¯ä»€ä¹ˆ](#1-grafanaæ˜¯ä»€ä¹ˆ)
2. [å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ](#2-å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ)
3. [Dockeræ–¹å¼å®‰è£…](#3-dockeræ–¹å¼å®‰è£…)
4. [LinuxåŒ…ç®¡ç†å™¨å®‰è£…](#4-linuxåŒ…ç®¡ç†å™¨å®‰è£…)
5. [äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…](#5-äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…)
6. [Grafanaé…ç½®è¯¦è§£](#6-grafanaé…ç½®è¯¦è§£)
7. [é¦–æ¬¡ç™»å½•å’Œåˆå§‹åŒ–](#7-é¦–æ¬¡ç™»å½•å’Œåˆå§‹åŒ–)
8. [æœåŠ¡ç®¡ç†å’Œè¿ç»´](#8-æœåŠ¡ç®¡ç†å’Œè¿ç»´)
9. [å¸¸è§é—®é¢˜è§£å†³](#9-å¸¸è§é—®é¢˜è§£å†³)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Grafanaæ˜¯ä»€ä¹ˆ


### 1.1 é€šä¿—ç†è§£Grafana


**ç®€å•è¯´**ï¼šGrafanaå°±åƒæ˜¯ä¸€ä¸ª"æ•°æ®å¤§å±å¹•"ï¼ŒæŠŠå„ç§ç›‘æ§æ•°æ®å˜æˆæ¼‚äº®çš„å›¾è¡¨å±•ç¤ºå‡ºæ¥ã€‚

```
æƒ³è±¡ä¸€ä¸‹æ±½è½¦ä»ªè¡¨ç›˜ï¼š
é€Ÿåº¦è¡¨ â† æ˜¾ç¤ºå½“å‰è½¦é€Ÿ
æ²¹é‡è¡¨ â† æ˜¾ç¤ºå‰©ä½™æ²¹é‡  
è½¬é€Ÿè¡¨ â† æ˜¾ç¤ºå‘åŠ¨æœºè½¬é€Ÿ

Grafanaå°±æ˜¯æœåŠ¡å™¨çš„"ä»ªè¡¨ç›˜"ï¼š
CPUä½¿ç”¨ç‡å›¾è¡¨ â† æ˜¾ç¤ºæœåŠ¡å™¨CPUå¿™ä¸å¿™
å†…å­˜ä½¿ç”¨å›¾è¡¨ â† æ˜¾ç¤ºå†…å­˜ç”¨äº†å¤šå°‘
ç½‘ç»œæµé‡å›¾è¡¨ â† æ˜¾ç¤ºç½‘ç»œä¼ è¾“æƒ…å†µ
```

### 1.2 Grafanaçš„æ ¸å¿ƒä½œç”¨


**ğŸ”¸ æ•°æ®å¯è§†åŒ–**
- æŠŠæ¯ç‡¥çš„æ•°å­—å˜æˆç›´è§‚çš„å›¾è¡¨
- æ”¯æŒæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰å¤šç§æ ·å¼
- è®©æŠ€æœ¯å°ç™½ä¹Ÿèƒ½çœ‹æ‡‚ç³»ç»ŸçŠ¶æ€

**ğŸ”¸ ç›‘æ§å‘Šè­¦**
- å½“ç³»ç»Ÿå‡ºé—®é¢˜æ—¶è‡ªåŠ¨å‘é€é€šçŸ¥
- æ”¯æŒé‚®ä»¶ã€çŸ­ä¿¡ã€é’‰é’‰ç­‰å¤šç§å‘Šè­¦æ–¹å¼
- å°±åƒçƒŸé›¾æŠ¥è­¦å™¨ä¸€æ ·åŠæ—¶é¢„è­¦

**ğŸ”¸ æ•°æ®æ•´åˆ**
- ä»ä¸åŒåœ°æ–¹æ”¶é›†æ•°æ®ï¼ˆæ•°æ®åº“ã€æ—¥å¿—ã€APIç­‰ï¼‰
- ç»Ÿä¸€å±•ç¤ºåœ¨ä¸€ä¸ªç•Œé¢ä¸Š
- é¿å…åˆ°å¤„æ‰¾æ•°æ®çš„éº»çƒ¦

### 1.3 ä¸ºä»€ä¹ˆè¦ç”¨Grafana


| **ä¼ ç»Ÿæ–¹å¼** | **ä½¿ç”¨Grafanaå** |
|-------------|------------------|
| `æ‰‹åŠ¨æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€` | `è‡ªåŠ¨ç›‘æ§å›¾è¡¨å±•ç¤º` |
| `é—®é¢˜å‘ç”Ÿåæ‰çŸ¥é“` | `æå‰é¢„è­¦åŠæ—¶å¤„ç†` |
| `æ•°æ®åˆ†æ•£éš¾ä»¥åˆ†æ` | `ç»Ÿä¸€dashboardå±•ç¤º` |
| `éœ€è¦æŠ€æœ¯èƒŒæ™¯æ‰èƒ½çœ‹æ‡‚` | `å›¾å½¢åŒ–ç•Œé¢ç›´è§‚æ˜“æ‡‚` |

---

## 2. ğŸ› ï¸ å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ


### 2.1 ç³»ç»Ÿè¦æ±‚æ£€æŸ¥


**ğŸ”¸ ç¡¬ä»¶æœ€ä½è¦æ±‚**
```
CPUï¼š1æ ¸å¿ƒï¼ˆæ¨è2æ ¸å¿ƒä»¥ä¸Šï¼‰
å†…å­˜ï¼š512MBï¼ˆæ¨è2GBä»¥ä¸Šï¼‰
ç¡¬ç›˜ï¼š1GBå¯ç”¨ç©ºé—´
ç½‘ç»œï¼šéœ€è¦è®¿é—®å¤–ç½‘ä¸‹è½½ç»„ä»¶
```

**ğŸ”¸ æ“ä½œç³»ç»Ÿæ”¯æŒ**
- âœ… Linuxï¼ˆUbuntuã€CentOSã€RHELç­‰ï¼‰
- âœ… Windows
- âœ… macOS  
- âœ… Dockerç¯å¢ƒ

### 2.2 ç«¯å£è§„åˆ’


**é»˜è®¤ç«¯å£è¯´æ˜**ï¼š
- `3000`ï¼šGrafana Webç•Œé¢è®¿é—®ç«¯å£
- `25`ï¼šé‚®ä»¶å‘Šè­¦ç«¯å£ï¼ˆå¯é€‰ï¼‰
- `443/80`ï¼šHTTPS/HTTPåå‘ä»£ç†ç«¯å£ï¼ˆå¯é€‰ï¼‰

> **ğŸ’¡ å°è´´å£«**ï¼šå¦‚æœ3000ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£

### 2.3 ä¾èµ–è½¯ä»¶æ£€æŸ¥


```bash
# æ£€æŸ¥æ˜¯å¦å·²å®‰è£…
which docker    # Dockeræ–¹å¼éœ€è¦
which systemctl # LinuxæœåŠ¡ç®¡ç†éœ€è¦
curl --version  # ä¸‹è½½æ–‡ä»¶éœ€è¦
```

---

## 3. ğŸ³ Dockeræ–¹å¼å®‰è£…


### 3.1 ä¸ºä»€ä¹ˆæ¨èDockerå®‰è£…


**ä¼˜åŠ¿å¯¹æ¯”**ï¼š

| **ç‰¹ç‚¹** | **Dockeræ–¹å¼** | **ä¼ ç»Ÿå®‰è£…** |
|---------|---------------|-------------|
| `å®‰è£…é€Ÿåº¦` | âš¡ å‡ åˆ†é’Ÿæå®š | ğŸŒ éœ€è¦é…ç½®ç¯å¢ƒ |
| `ç¯å¢ƒéš”ç¦»` | âœ… å®Œå…¨éš”ç¦» | âŒ å¯èƒ½å†²çª |
| `å¸è½½æ¸…ç†` | âœ… ä¸€é”®åˆ é™¤ | âŒ æ®‹ç•™æ–‡ä»¶ |
| `ç‰ˆæœ¬ç®¡ç†` | âœ… è½»æ¾åˆ‡æ¢ | âŒ å‡çº§éº»çƒ¦ |

### 3.2 å¿«é€Ÿå¯åŠ¨Grafana


**ğŸš€ ä¸€é”®å¯åŠ¨å‘½ä»¤**ï¼š
```bash
# åŸºç¡€å¯åŠ¨ï¼ˆä¸´æ—¶æµ‹è¯•ç”¨ï¼‰
docker run -d -p 3000:3000 grafana/grafana

# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰
docker run -d \
  --name=grafana \
  -p 3000:3000 \
  -v grafana-storage:/var/lib/grafana \
  grafana/grafana
```

**å‘½ä»¤è§£é‡Š**ï¼š
- `-d`ï¼šåå°è¿è¡Œï¼Œä¸å ç”¨ç»ˆç«¯
- `-p 3000:3000`ï¼šæŠŠå®¹å™¨3000ç«¯å£æ˜ å°„åˆ°ä¸»æœº3000ç«¯å£
- `--name=grafana`ï¼šç»™å®¹å™¨èµ·ä¸ªåå­—ï¼Œæ–¹ä¾¿ç®¡ç†
- `-v grafana-storage:/var/lib/grafana`ï¼šæ•°æ®æŒä¹…åŒ–å­˜å‚¨

### 3.3 Docker Composeæ–¹å¼ï¼ˆæ¨èï¼‰


åˆ›å»º`docker-compose.yml`æ–‡ä»¶ï¼š
```yaml
version: '3.8'
services:
  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      - grafana-data:/var/lib/grafana
      - ./grafana/provisioning:/etc/grafana/provisioning
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=ä½ çš„å¯†ç 
      - GF_USERS_ALLOW_SIGN_UP=false

volumes:
  grafana-data:
```

**å¯åŠ¨æœåŠ¡**ï¼š
```bash
# å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs grafana
```

### 3.4 éªŒè¯å®‰è£…æˆåŠŸ


**ğŸ” æ£€æŸ¥æ­¥éª¤**ï¼š
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://ä½ çš„IP:3000`
2. çœ‹åˆ°Grafanaç™»å½•é¡µé¢å°±æˆåŠŸäº†
3. ä½¿ç”¨é»˜è®¤è´¦å·ï¼š`admin/admin`

```
æµè§ˆå™¨æ˜¾ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Grafana Login        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Username: [admin        ]   â”‚
â”‚ Password: [admin        ]   â”‚
â”‚           [Login]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ğŸ“¦ LinuxåŒ…ç®¡ç†å™¨å®‰è£…


### 4.1 Ubuntu/Debianç³»ç»Ÿå®‰è£…


**ğŸ”¸ APTæ–¹å¼å®‰è£…**ï¼š
```bash
# 1. æ·»åŠ GPGå¯†é’¥
sudo apt-get install -y software-properties-common
wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -

# 2. æ·»åŠ ä»“åº“æº
echo "deb https://packages.grafana.com/oss/deb stable main" | sudo tee -a /etc/apt/sources.list.d/grafana.list

# 3. æ›´æ–°å¹¶å®‰è£…
sudo apt-get update
sudo apt-get install grafana
```

**ğŸ”¸ DEBåŒ…ç›´æ¥å®‰è£…**ï¼š
```bash
# ä¸‹è½½debåŒ…
wget https://dl.grafana.com/oss/release/grafana_10.0.0_amd64.deb

# å®‰è£…
sudo dpkg -i grafana_10.0.0_amd64.deb
```

### 4.2 CentOS/RHELç³»ç»Ÿå®‰è£…


**ğŸ”¸ YUMæ–¹å¼å®‰è£…**ï¼š
```bash
# 1. æ·»åŠ ä»“åº“é…ç½®
sudo tee /etc/yum.repos.d/grafana.repo <<EOF
[grafana]
name=grafana
baseurl=https://packages.grafana.com/oss/rpm
repo_gpgcheck=1
enabled=1
gpgcheck=1
gpgkey=https://packages.grafana.com/gpg.key
sslverify=1
sslcacert=/etc/pki/tls/certs/ca-bundle.crt
EOF

# 2. å®‰è£…
sudo yum install grafana
```

**ğŸ”¸ RPMåŒ…ç›´æ¥å®‰è£…**ï¼š
```bash
# ä¸‹è½½rpmåŒ…
wget https://dl.grafana.com/oss/release/grafana-10.0.0-1.x86_64.rpm

# å®‰è£…
sudo rpm -Uvh grafana-10.0.0-1.x86_64.rpm
```

### 4.3 å¯åŠ¨å’Œç®¡ç†æœåŠ¡


```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start grafana-server

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable grafana-server

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status grafana-server

# é‡å¯æœåŠ¡
sudo systemctl restart grafana-server

# åœæ­¢æœåŠ¡
sudo systemctl stop grafana-server
```

---

## 5. ğŸ’¾ äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…


### 5.1 é€‚ç”¨åœºæ™¯


**ä»€ä¹ˆæ—¶å€™ç”¨äºŒè¿›åˆ¶å®‰è£…**ï¼š
- âš™ï¸ éœ€è¦è‡ªå®šä¹‰å®‰è£…è·¯å¾„
- ğŸ”§ ç³»ç»Ÿæ²¡æœ‰åŒ…ç®¡ç†å™¨
- ğŸ¯ æƒ³è¦å®Œå…¨æ§åˆ¶å®‰è£…è¿‡ç¨‹
- ğŸ“¦ ä¸æƒ³å®‰è£…é¢å¤–ä¾èµ–

### 5.2 ä¸‹è½½å’Œå®‰è£…æ­¥éª¤


```bash
# 1. ä¸‹è½½äºŒè¿›åˆ¶åŒ…
wget https://dl.grafana.com/oss/release/grafana-10.0.0.linux-amd64.tar.gz

# 2. è§£å‹
tar -zxvf grafana-10.0.0.linux-amd64.tar.gz

# 3. ç§»åŠ¨åˆ°å®‰è£…ç›®å½•
sudo mv grafana-10.0.0 /opt/grafana

# 4. åˆ›å»ºgrafanaç”¨æˆ·
sudo useradd --system --shell /bin/false grafana

# 5. è®¾ç½®æƒé™
sudo chown -R grafana:grafana /opt/grafana
```

### 5.3 åˆ›å»ºsystemdæœåŠ¡


åˆ›å»ºæœåŠ¡æ–‡ä»¶`/etc/systemd/system/grafana.service`ï¼š
```ini
[Unit]
Description=Grafana server
Documentation=http://docs.grafana.org
Wants=network-online.target
After=network-online.target

[Service]
Type=simple
User=grafana
Group=grafana
ExecStart=/opt/grafana/bin/grafana-server \
  --config=/opt/grafana/conf/defaults.ini \
  --pidfile=/var/run/grafana/grafana-server.pid \
  cfg:default.paths.logs=/var/log/grafana \
  cfg:default.paths.data=/var/lib/grafana \
  cfg:default.paths.plugins=/var/lib/grafana/plugins

Restart=on-failure
RestartSec=10s

[Install]
WantedBy=multi-user.target
```

---

## 6. âš™ï¸ Grafanaé…ç½®è¯¦è§£


### 6.1 é…ç½®æ–‡ä»¶ä½ç½®


**ğŸ“ ä¸åŒå®‰è£…æ–¹å¼çš„é…ç½®æ–‡ä»¶ä½ç½®**ï¼š

| **å®‰è£…æ–¹å¼** | **é…ç½®æ–‡ä»¶è·¯å¾„** |
|-------------|-----------------|
| `Docker` | `/etc/grafana/grafana.ini` |
| `APT/YUM` | `/etc/grafana/grafana.ini` |
| `äºŒè¿›åˆ¶` | `/opt/grafana/conf/defaults.ini` |

### 6.2 æ ¸å¿ƒé…ç½®é¡¹è¯¦è§£


**ğŸ”¸ åŸºç¡€è®¾ç½®**ï¼š
```ini
[default]
# å®ä¾‹åç§°ï¼ˆæ˜¾ç¤ºåœ¨é¡µé¢æ ‡é¢˜ï¼‰
instance_name = æˆ‘çš„ç›‘æ§ç³»ç»Ÿ

[server]
# HTTPç«¯å£ï¼ˆé»˜è®¤3000ï¼‰
http_port = 3000

# ç›‘å¬åœ°å€ï¼ˆ0.0.0.0è¡¨ç¤ºæ‰€æœ‰ç½‘å¡ï¼‰
http_addr = 0.0.0.0

# åŸŸåè®¾ç½®ï¼ˆç”¨äºå¤–éƒ¨è®¿é—®ï¼‰
domain = monitor.company.com

# æ ¹URLè·¯å¾„
root_url = %(protocol)s://%(domain)s:%(http_port)s/
```

**ğŸ”¸ å®‰å…¨é…ç½®**ï¼š
```ini
[security]
# ç®¡ç†å‘˜å¯†ç ï¼ˆé¦–æ¬¡ç™»å½•åä¼šæç¤ºä¿®æ”¹ï¼‰
admin_password = ä½ çš„å¼ºå¯†ç 

# å¯†é’¥ï¼ˆç”¨äºç­¾åcookiesï¼Œä¿æŒé»˜è®¤æˆ–è‡ªå®šä¹‰ï¼‰
secret_key = SW2YcwTIb9zpOOhoPsMm

# å…è®¸åµŒå…¥iframe
allow_embedding = false
```

**ğŸ”¸ ç”¨æˆ·ç®¡ç†**ï¼š
```ini
[users]
# å…è®¸ç”¨æˆ·æ³¨å†Œ
allow_sign_up = false

# å…è®¸ç»„ç»‡ç®¡ç†å‘˜æ·»åŠ ç”¨æˆ·
allow_org_create = false

# é»˜è®¤ç”¨æˆ·è§’è‰²
auto_assign_org_role = Viewer
```

### 6.3 æ•°æ®åº“é…ç½®


**ğŸ”¸ é»˜è®¤SQLiteé…ç½®**ï¼š
```ini
[database]
# æ•°æ®åº“ç±»å‹
type = sqlite3

# SQLiteæ–‡ä»¶è·¯å¾„
path = grafana.db
```

**ğŸ”¸ MySQLé…ç½®ç¤ºä¾‹**ï¼š
```ini
[database]
type = mysql
host = 127.0.0.1:3306
name = grafana
user = grafana_user
password = æ•°æ®åº“å¯†ç 
```

**ğŸ”¸ PostgreSQLé…ç½®ç¤ºä¾‹**ï¼š
```ini
[database]
type = postgres
host = 127.0.0.1:5432
name = grafana
user = grafana_user
password = æ•°æ®åº“å¯†ç 
ssl_mode = disable
```

---

## 7. ğŸ”‘ é¦–æ¬¡ç™»å½•å’Œåˆå§‹åŒ–


### 7.1 è®¿é—®Grafanaç•Œé¢


**ğŸŒ æ‰“å¼€æµè§ˆå™¨è®¿é—®**ï¼š
- æœ¬åœ°è®¿é—®ï¼š`http://localhost:3000`
- å±€åŸŸç½‘è®¿é—®ï¼š`http://æœåŠ¡å™¨IP:3000`
- åŸŸåè®¿é—®ï¼š`http://ä½ çš„åŸŸå:3000`

### 7.2 é»˜è®¤ç™»å½•å‡­æ®


```
åˆå§‹ç™»å½•ä¿¡æ¯ï¼š
ç”¨æˆ·åï¼šadmin
å¯†ç ï¼šadmin
```

> **âš ï¸ é‡è¦**ï¼šé¦–æ¬¡ç™»å½•åç³»ç»Ÿä¼šå¼ºåˆ¶è¦æ±‚ä¿®æ”¹å¯†ç ï¼Œå»ºè®®è®¾ç½®å¤æ‚å¯†ç 

### 7.3 åˆå§‹åŒ–é…ç½®æ­¥éª¤


**ğŸ”¸ ä¿®æ”¹ç®¡ç†å‘˜å¯†ç **ï¼š
```
ç™»å½•åä¼šçœ‹åˆ°æç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Change admin password           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ New password: [            ]    â”‚
â”‚ Confirm:      [            ]    â”‚
â”‚              [Change Password]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ é…ç½®åŸºæœ¬ä¿¡æ¯**ï¼š
1. ç‚¹å‡»å·¦ä¾§èœå• "Configuration" â†’ "Preferences"
2. è®¾ç½®ç»„ç»‡åç§°ã€æ—¶åŒºã€é»˜è®¤ä¸»é¢˜ç­‰
3. ä¿å­˜è®¾ç½®

### 7.4 æ·»åŠ ç¬¬ä¸€ä¸ªæ•°æ®æº


**æ•°æ®æºé…ç½®æµç¨‹**ï¼š
```
æ­¥éª¤1ï¼šç‚¹å‡» "Add data source"
   â†“
æ­¥éª¤2ï¼šé€‰æ‹©æ•°æ®æºç±»å‹ï¼ˆå¦‚Prometheusï¼‰
   â†“  
æ­¥éª¤3ï¼šå¡«å†™è¿æ¥ä¿¡æ¯
   â†“
æ­¥éª¤4ï¼šç‚¹å‡» "Save & Test"
   â†“
æ­¥éª¤5ï¼šçœ‹åˆ°ç»¿è‰²"Data source is working"
```

---

## 8. ğŸ”§ æœåŠ¡ç®¡ç†å’Œè¿ç»´


### 8.1 æœåŠ¡çŠ¶æ€ç®¡ç†


**ğŸ”¸ systemdæ–¹å¼ç®¡ç†**ï¼š
```bash
# æŸ¥çœ‹è¯¦ç»†çŠ¶æ€
sudo systemctl status grafana-server -l

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo journalctl -u grafana-server -f

# é‡è½½é…ç½®æ–‡ä»¶
sudo systemctl reload grafana-server
```

**ğŸ”¸ Dockeræ–¹å¼ç®¡ç†**ï¼š
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep grafana

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs grafana -f

# é‡å¯å®¹å™¨
docker restart grafana

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it grafana /bin/bash
```

### 8.2 æ—¥å¿—æ–‡ä»¶ç®¡ç†


**ğŸ“‹ æ—¥å¿—æ–‡ä»¶ä½ç½®**ï¼š

| **å®‰è£…æ–¹å¼** | **æ—¥å¿—è·¯å¾„** |
|-------------|-------------|
| `LinuxåŒ…å®‰è£…` | `/var/log/grafana/grafana.log` |
| `Docker` | `docker logs grafana` |
| `äºŒè¿›åˆ¶å®‰è£…` | `/var/log/grafana/grafana.log` |

**ğŸ” æ—¥å¿—çº§åˆ«é…ç½®**ï¼š
```ini
[log]
# æ—¥å¿—çº§åˆ«ï¼štrace, debug, info, warn, error, critical
level = info

# æ—¥å¿—æ¨¡å¼ï¼šconsole, file, syslog
mode = console file

# æ–‡ä»¶æ—¥å¿—é…ç½®
[log.file]
level = info
format = text
log_rotate = true
max_lines = 1000000
max_size_shift = 28
daily_rotate = true
max_days = 7
```

### 8.3 æ€§èƒ½ç›‘æ§


**ğŸ”¸ å†…å­˜ä½¿ç”¨ç›‘æ§**ï¼š
```bash
# æŸ¥çœ‹Grafanaè¿›ç¨‹å†…å­˜ä½¿ç”¨
ps aux | grep grafana

# ç³»ç»Ÿæ•´ä½“å†…å­˜æƒ…å†µ
free -h
```

**ğŸ”¸ CPUä½¿ç”¨ç›‘æ§**ï¼š
```bash
# æŸ¥çœ‹Grafana CPUä½¿ç”¨ç‡
top -p $(pgrep grafana)
```

---

## 9. ğŸš¨ å¸¸è§é—®é¢˜è§£å†³


### 9.1 æ— æ³•è®¿é—®3000ç«¯å£


**ğŸ”¸ é—®é¢˜æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨
sudo systemctl status grafana-server

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
sudo netstat -tlnp | grep 3000

# 3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
sudo ufw status                    # Ubuntu
sudo firewall-cmd --list-ports     # CentOS
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¼€æ”¾é˜²ç«å¢™ç«¯å£
sudo ufw allow 3000               # Ubuntu
sudo firewall-cmd --add-port=3000/tcp --permanent  # CentOS
sudo firewall-cmd --reload        # CentOS
```

### 9.2 å¿˜è®°ç®¡ç†å‘˜å¯†ç 


**ğŸ”‘ é‡ç½®å¯†ç æ–¹æ³•**ï¼š

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨CLIå·¥å…·é‡ç½®
sudo grafana-cli admin reset-admin-password æ–°å¯†ç 

# æ–¹æ³•2ï¼šç›´æ¥ä¿®æ”¹æ•°æ®åº“ï¼ˆSQLiteï¼‰
sudo grafana-cli admin reset-admin-password --homepath /usr/share/grafana newpassword
```

### 9.3 æ•°æ®æºè¿æ¥å¤±è´¥


**ğŸ”¸ å¸¸è§åŸå› å’Œè§£å†³æ–¹æ¡ˆ**ï¼š

| **é”™è¯¯ä¿¡æ¯** | **å¯èƒ½åŸå› ** | **è§£å†³æ–¹æ³•** |
|-------------|-------------|-------------|
| `Connection refused` | `ç›®æ ‡æœåŠ¡æœªå¯åŠ¨` | `æ£€æŸ¥æ•°æ®æºæœåŠ¡çŠ¶æ€` |
| `Timeout` | `ç½‘ç»œä¸é€šæˆ–é˜²ç«å¢™é˜»æŒ¡` | `æ£€æŸ¥ç½‘ç»œè¿é€šæ€§` |
| `Authentication failed` | `ç”¨æˆ·åå¯†ç é”™è¯¯` | `ç¡®è®¤ç™»å½•å‡­æ®` |
| `Database not found` | `æ•°æ®åº“åç§°é”™è¯¯` | `ç¡®è®¤æ•°æ®åº“åç§°` |

### 9.4 æ€§èƒ½é—®é¢˜ä¼˜åŒ–


**ğŸ”¸ å½“Grafanaå“åº”æ…¢æ—¶**ï¼š

```ini
# ä¼˜åŒ–é…ç½®å»ºè®®
[server]
# å¢åŠ å¹¶å‘è¿æ¥æ•°
max_connections = 100

[database]
# æ•°æ®åº“è¿æ¥æ± è®¾ç½®
max_idle_conn = 2
max_open_conn = 0
conn_max_lifetime = 14400

[caching]
# å¯ç”¨ç¼“å­˜
enabled = true
ttl = 1h
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å®‰è£…æ–¹å¼é€‰æ‹©æŒ‡å—


| **ä½¿ç”¨åœºæ™¯** | **æ¨èæ–¹å¼** | **ç†ç”±** |
|-------------|-------------|----------|
| `å¿«é€Ÿæµ‹è¯•` | **Docker** | `å®‰è£…å¿«é€Ÿï¼Œç¯å¢ƒéš”ç¦»` |
| `ç”Ÿäº§ç¯å¢ƒ` | **LinuxåŒ…ç®¡ç†å™¨** | `ç¨³å®šå¯é ï¼Œæ˜“äºç»´æŠ¤` |
| `è‡ªå®šä¹‰éœ€æ±‚` | **äºŒè¿›åˆ¶æ–‡ä»¶** | `çµæ´»æ§åˆ¶ï¼Œæ— ä¾èµ–` |

### 10.2 å¿…é¡»è®°ä½çš„å…³é”®ä¿¡æ¯


**ğŸ”¸ é»˜è®¤è®¿é—®ä¿¡æ¯**ï¼š
- **ç«¯å£**ï¼š3000
- **ç”¨æˆ·å**ï¼šadmin  
- **å¯†ç **ï¼šadminï¼ˆé¦–æ¬¡ç™»å½•åå¿…é¡»ä¿®æ”¹ï¼‰

**ğŸ”¸ é‡è¦æ–‡ä»¶è·¯å¾„**ï¼š
- **é…ç½®æ–‡ä»¶**ï¼š`/etc/grafana/grafana.ini`
- **æ•°æ®ç›®å½•**ï¼š`/var/lib/grafana`
- **æ—¥å¿—æ–‡ä»¶**ï¼š`/var/log/grafana/grafana.log`

**ğŸ”¸ æ ¸å¿ƒå‘½ä»¤**ï¼š
```bash
# æœåŠ¡ç®¡ç†
sudo systemctl start/stop/restart grafana-server

# æŸ¥çœ‹çŠ¶æ€  
sudo systemctl status grafana-server

# é‡ç½®å¯†ç 
sudo grafana-cli admin reset-admin-password æ–°å¯†ç 
```

### 10.3 ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®


**ğŸ¯ å­¦ä¹ è·¯å¾„**ï¼š
1. âœ… **å®‰è£…é…ç½®** â† å½“å‰å·²å®Œæˆ
2. ğŸ¯ **æ•°æ®æºé…ç½®** â† ä¸‹ä¸€ä¸ªé‡ç‚¹
3. ğŸ¯ **Dashboardåˆ›å»º** â† æ ¸å¿ƒåŠŸèƒ½
4. ğŸ¯ **å‘Šè­¦é…ç½®** â† å®ç”¨åŠŸèƒ½
5. ğŸ¯ **ç”¨æˆ·æƒé™ç®¡ç†** â† å›¢é˜Ÿåä½œ

**ğŸ’¡ å®è·µå»ºè®®**ï¼š
- å…ˆåœ¨æµ‹è¯•ç¯å¢ƒç†Ÿæ‚‰æ“ä½œ
- ä»ç®€å•çš„æ•°æ®æºå¼€å§‹ï¼ˆå¦‚æµ‹è¯•ç”¨çš„APIï¼‰
- é€æ­¥æ·»åŠ çœŸå®çš„ç›‘æ§æ•°æ®æº
- é‡ç‚¹å…³æ³¨ä¸šåŠ¡æ ¸å¿ƒæŒ‡æ ‡çš„ç›‘æ§

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- Grafanaæ˜¯æ•°æ®å¯è§†åŒ–å·¥å…·ï¼ŒæŠŠæ•°å­—å˜æˆå›¾è¡¨
- Dockerå®‰è£…æœ€ç®€å•ï¼Œç”Ÿäº§ç¯å¢ƒç”¨åŒ…ç®¡ç†å™¨
- é»˜è®¤ç«¯å£3000ï¼Œåˆå§‹è´¦å·admin/admin
- é…ç½®æ–‡ä»¶åœ¨/etc/grafana/grafana.ini
- é‡ç‚¹æŒæ¡æ•°æ®æºé…ç½®å’ŒDashboardåˆ›å»º