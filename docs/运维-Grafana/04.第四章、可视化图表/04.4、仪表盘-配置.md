---
title: 4、仪表盘-配置
---
## 📚 目录

1. [Gauge仪表盘基本概念](#1-Gauge仪表盘基本概念)
2. [创建和配置Gauge面板](#2-创建和配置Gauge面板)
3. [阈值区间设置详解](#3-阈值区间设置详解)
4. [颜色配置策略](#4-颜色配置策略)
5. [数值范围和单位设置](#5-数值范围和单位设置)
6. [样式美化技巧](#6-样式美化技巧)
7. [实际应用场景](#7-实际应用场景)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 Gauge仪表盘基本概念


### 1.1 什么是Gauge面板


**简单理解**：Gauge面板就像汽车的仪表盘，用圆形或半圆形的表盘来显示数据

```
想象汽车速度表：
    ┌─────────────────┐
   ╱                   ╲
  ╱         80          ╲    ← 当前数值
 │    ┌─────┴─────┐     │
 │   ╱  绿 黄 红   ╲    │   ← 不同颜色代表不同状态
 │  ╱              ╲   │
  ╲                   ╱
   ╲_________________╱
      0    50   100         ← 最小值到最大值

在Grafana中：
- 绿色区间：正常状态（如CPU使用率0-70%）
- 黄色区间：警告状态（如CPU使用率70-85%）  
- 红色区间：危险状态（如CPU使用率85-100%）
```

### 1.2 为什么使用Gauge面板


**核心优势**：
- 📊 **直观易懂**：一眼就能看出当前状态好坏
- 🎨 **视觉冲击**：用颜色快速传达警告信息
- 📈 **趋势展示**：通过指针位置了解数值大小
- ⚠️ **告警功能**：超出阈值立即变色提醒

**什么时候用Gauge**：
```
✅ 适合使用场景：
- 服务器CPU使用率（0-100%）
- 内存使用率（0-100%）  
- 网络带宽使用情况
- 温度监控
- 业务KPI指标

❌ 不适合场景：
- 时间序列趋势（用折线图更好）
- 大量数据对比（用表格更好）
- 历史数据分析（用柱状图更好）
```

### 1.3 Gauge面板的组成部分


**核心构成元素**：

```
Gauge面板 = 数据源 + 显示样式 + 阈值配置 + 颜色方案

┌──────────────────────────────────┐
│  📊 Gauge面板完整结构图           │
├──────────────────────────────────┤
│  🔌 数据源                        │
│  ├─ 查询语句(Query)              │
│  ├─ 数据刷新频率                  │
│  └─ 数据处理方式                  │
├──────────────────────────────────┤
│  🎨 样式配置                      │
│  ├─ 标题和描述                    │
│  ├─ 显示单位                      │
│  └─ 表盘样式                      │
├──────────────────────────────────┤
│  ⚠️ 阈值设置                      │
│  ├─ 最小值/最大值                 │
│  ├─ 警告阈值                      │
│  └─ 危险阈值                      │
├──────────────────────────────────┤
│  🌈 颜色配置                      │
│  ├─ 正常状态颜色                  │
│  ├─ 警告状态颜色                  │
│  └─ 危险状态颜色                  │
└──────────────────────────────────┘
```

---

## 2. 🛠️ 创建和配置Gauge面板


### 2.1 创建Gauge面板的步骤


**Step 1: 添加新面板**
```
操作流程：
仪表板页面 → 点击"Add Panel"按钮 → 选择"Add a new panel"

界面路径：
Dashboard页面
    ↓
顶部工具栏的"+"号
    ↓  
"Add Panel" 选项
    ↓
进入面板编辑界面
```

**Step 2: 选择Gauge可视化类型**
```
在面板编辑界面右侧：
┌─────────────────┐
│ Visualization   │ ← 可视化类型选择区域
├─────────────────┤
│ [📊] Time series│
│ [📈] Stat       │
│ [🎯] Gauge      │ ← 选择这个！
│ [📋] Table      │
│ [...] 更多类型   │
└─────────────────┘
```

### 2.2 基础数据源配置


**配置数据查询**：

```
数据源配置示例：

Query设置：
┌─────────────────────────────────┐
│ 数据源: Prometheus              │
│ 指标: cpu_usage_percent         │
│ 实例: server01                  │
│ 时间范围: Last 5 minutes        │
└─────────────────────────────────┘

常用监控指标：
- CPU使用率: cpu_usage_percent  
- 内存使用率: memory_usage_percent
- 磁盘使用率: disk_usage_percent
- 网络流量: network_bytes_total
```

**数据处理配置**：
```
Transform选项：
✅ Last (取最新值) ← 推荐，显示当前状态
❌ Mean (平均值) 
❌ Max (最大值)
❌ Min (最小值)

为什么选择Last：
仪表盘通常显示"当前状态"，不是历史统计
例如：当前CPU使用率是75%，而不是过去5分钟的平均值
```

### 2.3 面板基本信息设置


**标题和描述配置**：

```
面板设置区域：
┌─────────────────────────────────┐
│ Panel options                   │
├─────────────────────────────────┤
│ Title: "服务器CPU使用率"          │
│ Description: "监控生产服务器CPU使用情况，超过85%需要关注" │
│ Transparent: □ (通常不勾选)      │
└─────────────────────────────────┘

好的标题示例：
✅ "生产环境CPU使用率"
✅ "数据库内存占用"  
✅ "API响应时间"

避免的标题：
❌ "metric1"
❌ "监控"
❌ "gauge"
```

---

## 3. ⚠️ 阈值区间设置详解


### 3.1 阈值概念理解


**什么是阈值**：
阈值就是**分界线**，用来区分不同的状态级别

```
阈值分界概念图：
  0%    70%    85%    100%
   │      │      │      │
   └──────┼──────┼──────┘
     正常   警告   危险

实际含义：
- 0-70%：绿色，系统运行正常
- 70-85%：黄色，需要关注但不紧急  
- 85-100%：红色，需要立即处理
```

### 3.2 设置阈值的最佳实践


**阈值设置原则**：

| 监控指标 | **正常范围** | **警告阈值** | **危险阈值** | **设置理由** |
|---------|------------|------------|------------|------------|
| 🖥️ **CPU使用率** | `0-70%` | `70-85%` | `85-100%` | `超过85%影响响应速度` |
| 💾 **内存使用率** | `0-80%` | `80-90%` | `90-100%` | `内存不足会导致系统卡顿` |
| 💿 **磁盘使用率** | `0-75%` | `75-90%` | `90-100%` | `磁盘满了系统无法写入` |
| 🌡️ **服务器温度** | `0-60°C` | `60-70°C` | `70°C+` | `过热会损坏硬件` |
| ⏱️ **API响应时间** | `0-200ms` | `200-500ms` | `500ms+` | `响应慢影响用户体验` |

**配置阈值的具体操作**：

```
在Gauge面板设置中：
┌─────────────────────────────────┐
│ Thresholds                      │
├─────────────────────────────────┤
│ Base: Green                     │ ← 基础颜色(正常状态)
│                                 │
│ ⚠️ Add threshold                │
│ Value: 70  Color: Yellow        │ ← 第一个警告阈值
│                                 │  
│ ⚠️ Add threshold                │
│ Value: 85  Color: Red           │ ← 第二个危险阈值
└─────────────────────────────────┘

结果效果：
0-70: 绿色显示
70-85: 黄色显示  
85-100: 红色显示
```

### 3.3 动态阈值vs静态阈值


**静态阈值**（推荐新手使用）：
```
特点：固定不变的数值
适用：大部分常规监控场景
示例：CPU使用率超过85%就是红色

优点：
✅ 简单易懂
✅ 配置方便
✅ 规则明确

缺点：
❌ 不能适应业务变化
❌ 可能产生误报
```

**动态阈值**（高级用法）：
```
特点：根据历史数据自动调整
适用：业务负载变化大的场景
示例：根据过去7天的平均值+标准差确定阈值

优点：
✅ 自适应调整
✅ 减少误报

缺点：  
❌ 配置复杂
❌ 新手不易理解
```

---

## 4. 🌈 颜色配置策略


### 4.1 颜色的心理学原理


**颜色与状态的关系**：
```
🟢 绿色 = 安全、正常、可以放心
🟡 黄色 = 注意、警告、需要关注  
🔴 红色 = 危险、紧急、立即处理
🔵 蓝色 = 信息、中性、一般状态

这是国际通用的颜色约定，符合人的直觉认知
```

### 4.2 标准颜色配置方案


**方案一：经典三色方案**（推荐）
```
配置参数：
Base color: #52C41A (绿色)
Warning: #FAAD14 (黄色)  
Critical: #F5222D (红色)

使用场景：
✅ 系统资源监控（CPU、内存、磁盘）
✅ 业务指标监控（成功率、响应时间）
✅ 大部分常规监控场景
```

**方案二：蓝绿渐变方案**
```
配置参数：
Base color: #1890FF (蓝色)
Medium: #52C41A (绿色)
High: #722ED1 (紫色)

使用场景：
✅ 业务增长指标（订单量、用户数）
✅ 正向指标监控（越高越好的指标）
```

### 4.3 颜色配置的实际操作


**在Grafana中设置颜色**：

```
颜色设置步骤：
1. 选中阈值条目
2. 点击颜色方块
3. 选择预设颜色或自定义

┌─────────────────────────────────┐
│ Threshold configuration         │
├─────────────────────────────────┤  
│ Thresholds:                     │
│                                 │
│ Base    🟢 Green   (默认)        │
│ 70      🟡 Yellow  (警告)        │  
│ 85      🔴 Red     (危险)        │
│                                 │
│ ☑️ Show thresholds on graph     │ ← 在图表上显示阈值线
│ ☑️ Show thresholds labels       │ ← 显示阈值标签
└─────────────────────────────────┘
```

**自定义颜色代码**：
```
常用颜色十六进制代码：
🟢 安全绿: #52C41A, #00AA00, #228B22
🟡 警告黄: #FAAD14, #FFD700, #FFA500  
🔴 危险红: #F5222D, #FF4444, #DC143C
🔵 信息蓝: #1890FF, #4169E1, #0066CC
🟣 特殊紫: #722ED1, #8A2BE2, #9932CC
```

---

## 5. 📏 数值范围和单位设置


### 5.1 最小值和最大值设置


**为什么要设置范围**：
```
设置原因：
1. 让仪表盘显示更精确
2. 避免数据突变导致显示异常
3. 保持不同面板的统一性

示例对比：
┌─────────────────┬─────────────────┐
│   不设置范围     │    设置范围      │
├─────────────────┼─────────────────┤
│ 自动调节0-97%   │   固定0-100%    │
│ 指针接近顶部    │   指针97%位置   │  
│ 看起来很危险    │   一目了然      │
└─────────────────┴─────────────────┘
```

**常见监控指标的范围设置**：

| 监控类型 | **最小值** | **最大值** | **设置说明** |
|---------|-----------|-----------|------------|
| 📊 **百分比类** | `0` | `100` | `CPU、内存、磁盘使用率等` |
| 🌡️ **温度类** | `0` | `100` | `服务器温度，单位°C` |
| ⏱️ **时间类** | `0` | `5000` | `响应时间，单位ms` |
| 📈 **计数类** | `0` | `10000` | `QPS、用户在线数等` |
| 💾 **存储类** | `0` | `1024` | `磁盘空间，单位GB` |

### 5.2 单位设置详解


**为什么需要设置单位**：
- 让数据更易读懂（显示"75%"比"0.75"更直观）
- 自动格式化数值（1024字节显示为1KB）
- 保持仪表板的专业性

**常用单位配置**：

```
Grafana内置单位分类：
┌─────────────────────────────────┐
│ 📊 数据量单位                    │
│ - bytes: 自动转换B/KB/MB/GB     │
│ - bits: 自动转换bit/Kbit/Mbit   │
├─────────────────────────────────┤
│ ⏱️ 时间单位                      │  
│ - ms: 毫秒                      │
│ - s: 秒                         │
│ - h: 小时                       │
├─────────────────────────────────┤
│ 📈 百分比单位                    │
│ - percent (0-100): 显示%符号    │
│ - percentunit (0-1): 0.75→75%   │
├─────────────────────────────────┤
│ 🔢 数值单位                      │
│ - short: 自动缩放(1000→1K)      │
│ - none: 无单位                  │
└─────────────────────────────────┘
```

**单位设置的实际操作**：

```
在Standard options中：
┌─────────────────────────────────┐
│ Standard options                │
├─────────────────────────────────┤
│ Unit: percent (0-100) ▼         │ ← 选择合适的单位
│ Min: 0                          │ ← 最小值
│ Max: 100                        │ ← 最大值  
│ Decimals: 1                     │ ← 小数位数
│ Display name: CPU使用率          │ ← 显示名称
└─────────────────────────────────┘

效果对比：
设置前: 显示 "0.856"
设置后: 显示 "85.6%"
```

### 5.3 小数位数控制


**合理的小数位设置**：

| 数据类型 | **建议小数位** | **显示效果** | **原因说明** |
|---------|--------------|-------------|------------|
| 📊 **CPU使用率** | `1位` | `85.6%` | `过于精确没有意义` |
| 💾 **内存使用** | `1位` | `76.2%` | `便于快速读取` |  
| ⏱️ **响应时间** | `0位` | `245ms` | `毫秒级精度足够` |
| 💰 **金额相关** | `2位` | `¥1,234.56` | `财务精度要求` |
| 📈 **QPS** | `0位` | `1,856` | `整数更直观` |

---

## 6. 🎨 样式美化技巧


### 6.1 仪表盘样式选择


**Gauge显示模式**：

```
Grafana提供三种Gauge样式：

1. 🎯 Standard Gauge (标准圆形)
   ┌─────────────┐
   │      85%    │ ← 数值显示在中央
   │   ┌─────┐   │
   │  ╱   ┏━━ ╲  │ ← 指针指向当前值
   │ ╱ ┏━━╋    ╲ │
   │ ╲    ┗━━ ╱ │
   │  ╲_______╱  │ ← 颜色弧线表示状态
   └─────────────┘
   适合：单一指标重点展示

2. 📊 LCD Style (液晶风格)  
   ┌─────────────┐
   │ CPU Usage   │ ← 标题
   │    85.6%    │ ← 大号数字显示
   │ ████████▓▓▓ │ ← 进度条样式
   └─────────────┘
   适合：简洁信息展示

3. 🎪 Ring Style (环形风格)
   ┌─────────────┐
   │     85%     │ ← 中央显示数值
   │   ●●●●●○○   │ ← 环形进度
   │  ●       ○  │
   │   ●●●●○○○   │
   └─────────────┘
   适合：节省空间的场景
```

### 6.2 标题和标签美化


**标题设置技巧**：
```
好的标题应该：
✅ 简洁明了：直接说明监控内容
✅ 包含单位：让人知道数据含义
✅ 有层次感：区分不同重要级别

标题示例：
🎯 主要服务器: "🖥️ 生产环境CPU使用率"
🎯 数据库: "💾 MySQL内存占用率"  
🎯 业务指标: "📈 API平均响应时间"
🎯 网络监控: "🌐 带宽使用情况"

避免的标题：
❌ "metric_1"  
❌ "监控"
❌ "数据"
```

### 6.3 布局和大小优化


**面板大小建议**：

```
仪表板布局规划：
┌─────────────────────────────────┐
│ 📊 Grafana Dashboard布局示例    │
├─────────────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ │
│ │CPU  │ │内存  │ │磁盘  │ │网络  │ │ ← 4个小gauge，尺寸3x3
│ │85%  │ │67%  │ │34%  │ │12%  │ │
│ └─────┘ └─────┘ └─────┘ └─────┘ │
├─────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────┐ │
│ │   API响应时间  │ │  数据库连接数  │ │ ← 2个大gauge，尺寸6x4  
│ │    245ms    │ │     156     │ │
│ └─────────────┘ └─────────────┘ │
└─────────────────────────────────┘

尺寸选择原则：
- 重要指标：大尺寸，突出显示
- 基础监控：小尺寸，概览展示
- 保持对齐：视觉上更整洁
```

---

## 7. 💼 实际应用场景


### 7.1 服务器资源监控


**完整的服务器监控Gauge配置**：

```java
// 服务器监控仪表板配置示例

1. 🖥️ CPU使用率Gauge
   数据源：node_exporter  
   查询：100 - (avg(irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)
   单位：percent (0-100)
   阈值：70%(黄色), 85%(红色)
   标题："服务器CPU使用率"

2. 💾 内存使用率Gauge  
   查询：(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100
   单位：percent (0-100)
   阈值：80%(黄色), 90%(红色)
   标题："内存使用率"

3. 💿 磁盘使用率Gauge
   查询：(1 - (node_filesystem_avail_bytes / node_filesystem_size_bytes)) * 100  
   单位：percent (0-100)
   阈值：75%(黄色), 90%(红色)
   标题："磁盘空间使用率"
```

### 7.2 业务指标监控


**电商业务监控示例**：

```
🛒 电商平台关键指标Gauge配置：

1. 📈 订单成功率
   计算：(成功订单数 / 总订单数) × 100
   正常：>95%(绿色)
   警告：90-95%(黄色)  
   异常：<90%(红色)

2. ⏱️ 支付响应时间
   数据：payment_api_duration_ms
   正常：<500ms(绿色)
   慢速：500-1000ms(黄色)
   超时：>1000ms(红色)

3. 👥 用户在线数
   数据：active_users_count
   显示：当前在线用户数量
   无需阈值，仅展示数据
```

### 7.3 告警级联配置


**从Gauge到告警的完整流程**：

```
告警链路设计：
┌─────────────────────────────────┐
│ 监控数据流转过程                 │
├─────────────────────────────────┤
│ 数据采集 → Prometheus            │ ← 收集原始数据
│     ↓                           │
│ 数据查询 → Grafana Gauge        │ ← 可视化展示
│     ↓                           │  
│ 阈值判断 → 颜色变化              │ ← 视觉提醒
│     ↓                           │
│ 告警触发 → 通知发送              │ ← 主动通知
│     ↓                           │
│ 问题处理 → 状态恢复              │ ← 问题解决
└─────────────────────────────────┘

实际配置：
🔴 Gauge显示红色 + 发送钉钉/邮件通知
🟡 Gauge显示黄色 + 记录日志，暂不发送通知
🟢 Gauge显示绿色 + 正常状态，无需处理
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


```
🎯 Gauge面板本质：仪表盘式的数据可视化，用颜色和指针位置表示状态
📊 阈值设置：通过设定分界线来区分正常、警告、危险三种状态  
🌈 颜色配置：绿色(正常)、黄色(警告)、红色(危险)的标准色彩约定
📏 数值范围：设置最小最大值让显示更精确，配置单位让数据更易读
🎨 样式美化：合理的布局和标题让仪表板更专业易懂
```

### 8.2 关键配置要点


**🔹 阈值设置最佳实践**：
```
通用原则：
- CPU/内存：70%警告，85%危险
- 磁盘空间：75%警告，90%危险  
- 响应时间：根据业务需求设定
- 成功率：95%以下警告，90%以下危险

记忆口诀：
七八原则：大部分资源70%警告，85%危险
九五原则：业务指标95%以下需关注
```

**🔹 颜色使用规范**：
```
国际通用：
🟢 绿色 = 安全放心
🟡 黄色 = 需要关注  
🔴 红色 = 立即处理

自定义原则：
- 保持一致性：同类指标用相同颜色方案
- 符合直觉：不要用红色表示正常状态
- 考虑色盲：避免仅用颜色区分状态
```

### 8.3 实际应用指导


**🎯 什么时候用Gauge**：
```
✅ 适合场景：
- 百分比类指标（CPU、内存使用率）
- 有明确正常范围的指标
- 需要快速判断状态的监控
- 重要性高的单一指标

❌ 不适合场景：  
- 趋势分析（用折线图）
- 多个指标对比（用表格）
- 历史数据查看（用时间序列图）
```

**🔧 常见问题解决**：
```
问题1：数据不显示
解决：检查数据源连接、查询语句、时间范围

问题2：颜色不变化  
解决：确认阈值设置正确、数据类型匹配

问题3：显示效果不好
解决：调整单位设置、小数位数、最小最大值

问题4：性能影响
解决：合理设置刷新频率，避免过于频繁查询
```

### 8.4 进阶技巧


**🚀 高级配置**：
- **模板变量**：用变量控制不同服务器的监控
- **数据链接**：点击Gauge跳转到详细监控页面
- **覆盖设置**：为特定数据系列设置不同样式
- **联动效果**：多个面板间的数据关联显示

**核心记忆口诀**：
- Gauge面板似仪表，一眼便知状态好坏
- 阈值设定要合理，绿黄红色有标准
- 单位范围需精确，标题简洁更专业
- 监控告警相配合，运维效率大提升