---
title: 4ã€HTTPSå®‰å…¨é€šä¿¡å®ç°
---
## ğŸ“š ç›®å½•

1. [HTTPSåŸºç¡€æ¦‚å¿µ](#1-HTTPSåŸºç¡€æ¦‚å¿µ)
2. [HTTPSé…ç½®æœ€ä½³å®è·µ](#2-HTTPSé…ç½®æœ€ä½³å®è·µ)
3. [è¯ä¹¦éƒ¨ç½²ä¸ä¼˜åŒ–](#3-è¯ä¹¦éƒ¨ç½²ä¸ä¼˜åŒ–)
4. [HSTSå¤´éƒ¨è®¾ç½®](#4-HSTSå¤´éƒ¨è®¾ç½®)
5. [TLSé…ç½®ä¼˜åŒ–](#5-TLSé…ç½®ä¼˜åŒ–)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” HTTPSåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯HTTPS


> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**ï¼šHTTPS = HTTP + TLS/SSLï¼Œå°±æ˜¯åœ¨æ™®é€šHTTPçš„åŸºç¡€ä¸ŠåŠ äº†ä¸€å±‚å®‰å…¨ä¿æŠ¤

**é€šä¿—ç†è§£**ï¼š
```
HTTPä¼ è¾“ï¼šå°±åƒæ˜ä¿¡ç‰‡é‚®å¯„
- å†…å®¹è°éƒ½èƒ½çœ‹åˆ°
- å®¹æ˜“è¢«ç¯¡æ”¹
- æ— æ³•ç¡®è®¤å¯„ä»¶äººèº«ä»½

HTTPSä¼ è¾“ï¼šå°±åƒå¯†å°ä¿¡ä»¶é‚®å¯„
- å†…å®¹åŠ å¯†ï¼Œåªæœ‰æ”¶ä»¶äººèƒ½çœ‹
- æœ‰é˜²ä¼ªæ ‡è¯†ï¼Œéš¾ä»¥ç¯¡æ”¹
- èƒ½ç¡®è®¤å¯„ä»¶äººèº«ä»½
```

### 1.2 HTTPSè§£å†³çš„ä¸‰å¤§å®‰å…¨é—®é¢˜


| å®‰å…¨é—®é¢˜ | **HTTPçš„é£é™©** | **HTTPSçš„ä¿æŠ¤** |
|---------|-------------|---------------|
| ğŸ” **çªƒå¬** | `æ˜æ–‡ä¼ è¾“ï¼Œä»»ä½•äººéƒ½èƒ½çœ‹åˆ°` | `åŠ å¯†ä¼ è¾“ï¼Œåªæœ‰åŒæ–¹èƒ½è§£å¯†` |
| âœï¸ **ç¯¡æ”¹** | `æ•°æ®å¯ä»¥è¢«ä¸­é—´äººä¿®æ”¹` | `å®Œæ•´æ€§æ ¡éªŒï¼Œå‘ç°ç¯¡æ”¹ç«‹å³æ‹’ç»` |
| ğŸ­ **å†’å……** | `æ— æ³•éªŒè¯æœåŠ¡å™¨èº«ä»½` | `æ•°å­—è¯ä¹¦éªŒè¯ï¼Œç¡®ä¿æœåŠ¡å™¨çœŸå®æ€§` |

### 1.3 HTTPSå·¥ä½œåŸç†ç®€åŒ–ç‰ˆ


```
å®¢æˆ·ç«¯                           æœåŠ¡å™¨
  |                                |
  |--[1]æˆ‘è¦å®‰å…¨è¿æ¥--------------->|
  |<-[2]è¿™æ˜¯æˆ‘çš„è¯ä¹¦-----------------|
  |--[3]éªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆå¯†é’¥--------->|
  |<-[4]ç¡®è®¤ï¼Œå¼€å§‹åŠ å¯†é€šä¿¡----------|
  |                                |
  |====== åŠ å¯†æ•°æ®ä¼ è¾“ ======|
```

**æ­¥éª¤è§£é‡Š**ï¼š
â‘  **æ¡æ‰‹è¯·æ±‚**ï¼šå®¢æˆ·ç«¯è¯´"æˆ‘æƒ³è¦å®‰å…¨è¿æ¥"
â‘¡ **å‡ºç¤ºè¯ä¹¦**ï¼šæœåŠ¡å™¨æ‹¿å‡ºèº«ä»½è¯æ˜
â‘¢ **éªŒè¯èº«ä»½**ï¼šå®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦çœŸå‡ï¼Œç”Ÿæˆé€šä¿¡å¯†é’¥
â‘£ **å»ºç«‹åŠ å¯†**ï¼šåŒæ–¹ç¡®è®¤ï¼Œå¼€å§‹åŠ å¯†é€šä¿¡

---

## 2. âš™ï¸ HTTPSé…ç½®æœ€ä½³å®è·µ


### 2.1 æœåŠ¡å™¨é…ç½®åŸºç¡€


**Nginxé…ç½®ç¤ºä¾‹**ï¼š
```nginx
server {
    listen 443 ssl http2;
    server_name example.com;
    
    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/private.key;
    
    # åŸºç¡€å®‰å…¨é…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256';
    ssl_prefer_server_ciphers off;
}
```

> âš ï¸ **é‡è¦æé†’**ï¼šé…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹

### 2.2 Apacheé…ç½®ç¤ºä¾‹


```apache
<VirtualHost *:443>
    ServerName example.com
    
    # å¯ç”¨SSL
    SSLEngine on
    SSLCertificateFile /path/to/cert.pem
    SSLCertificateKeyFile /path/to/private.key
    
    # å®‰å…¨åè®®é…ç½®
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM
</VirtualHost>
```

### 2.3 é…ç½®æ£€æŸ¥æ¸…å•


**âœ… å¿…åšé…ç½®**ï¼š
- [ ] **å¯ç”¨HTTP/2**ï¼šæå‡æ€§èƒ½
- [ ] **ç¦ç”¨æ—§åè®®**ï¼šåªå…è®¸TLS 1.2+
- [ ] **é…ç½®å¼ºå¯†ç å¥—ä»¶**ï¼šä½¿ç”¨ç°ä»£åŠ å¯†ç®—æ³•
- [ ] **è®¾ç½®HSTS**ï¼šå¼ºåˆ¶ä½¿ç”¨HTTPS
- [ ] **é…ç½®OCSPè£…è®¢**ï¼šæå‡è¯ä¹¦éªŒè¯é€Ÿåº¦

**âŒ é¿å…çš„é…ç½®**ï¼š
- âŒ ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- âŒ å…è®¸SSLv3/TLS1.0åè®®
- âŒ ä½¿ç”¨å¼±å¯†ç å¥—ä»¶
- âŒ å¿˜è®°é…ç½®HTTPé‡å®šå‘

### 2.4 æ€§èƒ½ä¼˜åŒ–é…ç½®


```nginx
# ä¼šè¯ç¼“å­˜ä¼˜åŒ–
ssl_session_cache shared:SSL:10m;
ssl_session_timeout 24h;
ssl_session_tickets off;

# OCSPè£…è®¢
ssl_stapling on;
ssl_stapling_verify on;
ssl_trusted_certificate /path/to/chain.pem;

# å‹ç¼©é…ç½®
gzip on;
gzip_types text/css application/javascript application/json;
```

---

## 3. ğŸ“œ è¯ä¹¦éƒ¨ç½²ä¸ä¼˜åŒ–


### 3.1 è¯ä¹¦ç±»å‹é€‰æ‹©


| è¯ä¹¦ç±»å‹ | **éªŒè¯çº§åˆ«** | **é€‚ç”¨åœºæ™¯** | **ä»·æ ¼** | **éƒ¨ç½²éš¾åº¦** |
|---------|-------------|-------------|---------|-------------|
| ğŸŸ¢ **DVè¯ä¹¦** | `åŸŸåéªŒè¯` | `ä¸ªäººç½‘ç«™ã€åšå®¢` | `å…è´¹-ä¾¿å®œ` | `â­ç®€å•` |
| ğŸŸ¡ **OVè¯ä¹¦** | `ç»„ç»‡éªŒè¯` | `ä¼ä¸šå®˜ç½‘` | `ä¸­ç­‰` | `â­â­ä¸­ç­‰` |
| ğŸ”´ **EVè¯ä¹¦** | `æ‰©å±•éªŒè¯` | `é“¶è¡Œã€ç”µå•†` | `è¾ƒè´µ` | `â­â­â­å¤æ‚` |

### 3.2 Let's Encryptå…è´¹è¯ä¹¦éƒ¨ç½²


**å®‰è£…Certbotå·¥å…·**ï¼š
```bash
# Ubuntu/Debian
sudo apt install certbot python3-certbot-nginx

# CentOS/RHEL
sudo yum install certbot python3-certbot-nginx
```

**è‡ªåŠ¨è·å–è¯ä¹¦**ï¼š
```bash
# è‡ªåŠ¨é…ç½®Nginx
sudo certbot --nginx -d example.com -d www.example.com

# æ‰‹åŠ¨è·å–è¯ä¹¦
sudo certbot certonly --webroot -w /var/www/html -d example.com
```

> ğŸ’¡ **å°è´´å£«**ï¼šLet's Encryptè¯ä¹¦3ä¸ªæœˆè¿‡æœŸï¼Œå»ºè®®è®¾ç½®è‡ªåŠ¨ç»­æœŸ

### 3.3 è¯ä¹¦è‡ªåŠ¨ç»­æœŸ


**è®¾ç½®å®šæ—¶ä»»åŠ¡**ï¼š
```bash
# ç¼–è¾‘crontab
sudo crontab -e

# æ·»åŠ è‡ªåŠ¨ç»­æœŸä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹æ£€æŸ¥ï¼‰
0 2 * * * /usr/bin/certbot renew --quiet
```

**æµ‹è¯•ç»­æœŸ**ï¼š
```bash
# æ¨¡æ‹Ÿç»­æœŸè¿‡ç¨‹
sudo certbot renew --dry-run
```

### 3.4 è¯ä¹¦é“¾é…ç½®


**å®Œæ•´è¯ä¹¦é“¾ç»“æ„**ï¼š
```
ä½ çš„åŸŸåè¯ä¹¦
    â†“
ä¸­é—´è¯ä¹¦ï¼ˆCAç­¾å‘ï¼‰
    â†“
æ ¹è¯ä¹¦ï¼ˆæµè§ˆå™¨å†…ç½®ï¼‰
```

**æ­£ç¡®çš„è¯ä¹¦æ–‡ä»¶æ ¼å¼**ï¼š
```
-----BEGIN CERTIFICATE-----
ä½ çš„åŸŸåè¯ä¹¦å†…å®¹
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
ä¸­é—´è¯ä¹¦å†…å®¹
-----END CERTIFICATE-----
```

> âš ï¸ **æ³¨æ„**ï¼šè¯ä¹¦é“¾ä¸å®Œæ•´ä¼šå¯¼è‡´æŸäº›æµè§ˆå™¨æŠ¥é”™

### 3.5 è¯ä¹¦ç›‘æ§ä¸ç®¡ç†


**è¯ä¹¦è¿‡æœŸæ£€æŸ¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# æ£€æŸ¥è¯ä¹¦è¿‡æœŸæ—¶é—´
echo | openssl s_client -servername example.com -connect example.com:443 2>/dev/null | openssl x509 -noout -dates
```

**è¯ä¹¦ä¿¡æ¯æŸ¥çœ‹**ï¼š
```bash
# æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…
openssl x509 -in cert.pem -text -noout

# æ£€æŸ¥ç§é’¥åŒ¹é…
openssl rsa -in private.key -pubout -outform PEM | sha256sum
openssl x509 -in cert.pem -pubkey -noout -outform PEM | sha256sum
```

---

## 4. ğŸ›¡ï¸ HSTSå¤´éƒ¨è®¾ç½®


### 4.1 ä»€ä¹ˆæ˜¯HSTS


> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šHSTSå°±åƒç»™æµè§ˆå™¨ä¸‹äº†ä¸€ä¸ª"å¼ºåˆ¶ä»¤"ï¼Œå‘Šè¯‰å®ƒ"ä»¥åè®¿é—®æˆ‘çš„ç½‘ç«™ï¼Œå¿…é¡»ç”¨HTTPSï¼Œä¸è®¸ç”¨HTTP"

**HSTSçš„ä½œç”¨**ï¼š
- **é˜²æ­¢é™çº§æ”»å‡»**ï¼šé˜»æ­¢HTTPè¿æ¥
- **æå‡å®‰å…¨æ€§**ï¼šå¼ºåˆ¶åŠ å¯†ä¼ è¾“
- **æé«˜æ€§èƒ½**ï¼šå‡å°‘é‡å®šå‘

### 4.2 HSTSå·¥ä½œåŸç†


```
ç¬¬ä¸€æ¬¡è®¿é—®ï¼š
ç”¨æˆ· â†’ https://example.com
æœåŠ¡å™¨å“åº”ï¼šStrict-Transport-Security: max-age=31536000

åç»­è®¿é—®ï¼š
ç”¨æˆ·è¾“å…¥ï¼šhttp://example.com
æµè§ˆå™¨è‡ªåŠ¨è½¬æ¢ï¼šhttps://example.comï¼ˆæ— éœ€æœåŠ¡å™¨é‡å®šå‘ï¼‰
```

### 4.3 HSTSé…ç½®å®ç°


**Nginxé…ç½®**ï¼š
```nginx
server {
    listen 443 ssl;
    server_name example.com;
    
    # åŸºç¡€HSTSé…ç½®
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    # æ›´ä¸¥æ ¼çš„é…ç½®ï¼ˆæ…ç”¨ï¼‰
    # add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
}
```

**Apacheé…ç½®**ï¼š
```apache
<VirtualHost *:443>
    ServerName example.com
    
    # HSTSå¤´éƒ¨
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
</VirtualHost>
```

### 4.4 HSTSå‚æ•°è¯¦è§£


| å‚æ•° | **å«ä¹‰** | **å»ºè®®å€¼** | **æ³¨æ„äº‹é¡¹** |
|------|---------|-----------|-------------|
| `max-age` | `HSTSæœ‰æ•ˆæœŸï¼ˆç§’ï¼‰` | `31536000ï¼ˆ1å¹´ï¼‰` | `æ—¶é—´å¤ªé•¿éš¾ä»¥æ’¤é”€` |
| `includeSubDomains` | `åŒ…å«æ‰€æœ‰å­åŸŸå` | `å»ºè®®å¼€å¯` | `ç¡®ä¿æ‰€æœ‰å­åŸŸéƒ½æ”¯æŒHTTPS` |
| `preload` | `åŠ å…¥æµè§ˆå™¨é¢„è½½åˆ—è¡¨` | `è°¨æ…ä½¿ç”¨` | `ä¸€æ—¦æäº¤å¾ˆéš¾æ’¤é”€` |

### 4.5 HSTSéƒ¨ç½²ç­–ç•¥


**æ¸è¿›å¼éƒ¨ç½²**ï¼š
```nginx
# ç¬¬1å‘¨ï¼šçŸ­æœŸæµ‹è¯•
add_header Strict-Transport-Security "max-age=300";

# ç¬¬2-3å‘¨ï¼šå»¶é•¿åˆ°1å¤©
add_header Strict-Transport-Security "max-age=86400";

# ç¬¬4å‘¨åï¼šè®¾ç½®ä¸º1å¹´
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";
```

> âš ï¸ **é‡è¦è­¦å‘Š**ï¼šHSTSä¸€æ—¦è®¾ç½®ï¼Œåœ¨è¿‡æœŸå‰æ— æ³•é€šè¿‡HTTPè®¿é—®ç½‘ç«™ï¼Œéƒ¨ç½²å‰åŠ¡å¿…ç¡®ä¿HTTPSé…ç½®æ­£ç¡®

### 4.6 HSTS Preloadåˆ—è¡¨


**ä»€ä¹ˆæ˜¯Preload**ï¼š
- æµè§ˆå™¨å†…ç½®çš„HTTPSå¼ºåˆ¶ç½‘ç«™åˆ—è¡¨
- ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®å°±å¼ºåˆ¶HTTPS
- æä¾›æœ€é«˜çº§åˆ«çš„å®‰å…¨ä¿æŠ¤

**æäº¤åˆ°Preloadçš„æ¡ä»¶**ï¼š
1. âœ… æœ‰æ•ˆçš„HTTPSè¯ä¹¦
2. âœ… é‡å®šå‘æ‰€æœ‰HTTPæµé‡åˆ°HTTPS
3. âœ… æ‰€æœ‰å­åŸŸåéƒ½æ”¯æŒHTTPS
4. âœ… HSTSå¤´éƒ¨åŒ…å«preloadæŒ‡ä»¤
5. âœ… max-ageè‡³å°‘18å‘¨ï¼ˆ10886400ç§’ï¼‰

---

## 5. ğŸ”§ TLSé…ç½®ä¼˜åŒ–


### 5.1 TLSç‰ˆæœ¬é€‰æ‹©


**TLSç‰ˆæœ¬å®‰å…¨æ€§å¯¹æ¯”**ï¼š
```
TLS 1.3 â† æœ€å®‰å…¨ï¼Œæœ€å¿«
TLS 1.2 â† å®‰å…¨ï¼Œå¹¿æ³›æ”¯æŒ
TLS 1.1 â† è¿‡æ—¶ï¼Œä¸æ¨è
TLS 1.0 â† ä¸å®‰å…¨ï¼Œç¦ç”¨
SSL 3.0 â† ä¸¥é‡æ¼æ´ï¼Œç¦ç”¨
```

**æ¨èé…ç½®**ï¼š
```nginx
# åªå…è®¸ç°ä»£TLSç‰ˆæœ¬
ssl_protocols TLSv1.2 TLSv1.3;

# ä¼˜å…ˆä½¿ç”¨æœåŠ¡å™¨å¯†ç å¥—ä»¶é¡ºåºï¼ˆTLS 1.2ï¼‰
ssl_prefer_server_ciphers on;

# TLS 1.3ä¸éœ€è¦cipheré…ç½®
ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
```

### 5.2 å¯†ç å¥—ä»¶ä¼˜åŒ–


**å¯†ç å¥—ä»¶é€‰æ‹©åŸåˆ™**ï¼š
- âœ… **ä¼˜å…ˆAEAD**ï¼šAES-GCMã€ChaCha20-Poly1305
- âœ… **ä½¿ç”¨ECDHE**ï¼šæä¾›å‰å‘å®‰å…¨æ€§
- âœ… **é¿å…RC4**ï¼šå·²çŸ¥å®‰å…¨æ¼æ´
- âœ… **ç¦ç”¨NULL**ï¼šæ— åŠ å¯†çš„å¥—ä»¶

**ç°ä»£å¯†ç å¥—ä»¶é…ç½®**ï¼š
```nginx
ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384';
```

### 5.3 ä¼šè¯ç®¡ç†ä¼˜åŒ–


**ä¼šè¯ç¼“å­˜é…ç½®**ï¼š
```nginx
# å…±äº«ç¼“å­˜ï¼Œ10MBå¯å­˜å‚¨çº¦40,000ä¸ªä¼šè¯
ssl_session_cache shared:SSL:10m;

# ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆ24å°æ—¶ï¼‰
ssl_session_timeout 24h;

# ç¦ç”¨ä¼šè¯ç¥¨æ®ï¼ˆæ›´å®‰å…¨ï¼‰
ssl_session_tickets off;
```

**ä¼šè¯ç®¡ç†çš„ä½œç”¨**ï¼š
- **å‡å°‘æ¡æ‰‹æ¬¡æ•°**ï¼šé‡ç”¨å·²å»ºç«‹çš„å®‰å…¨å‚æ•°
- **æå‡æ€§èƒ½**ï¼šé¿å…é‡å¤çš„å¯†é’¥äº¤æ¢
- **æ”¹å–„ç”¨æˆ·ä½“éªŒ**ï¼šå‡å°‘è¿æ¥å»¶è¿Ÿ

### 5.4 OCSPè£…è®¢é…ç½®


**ä»€ä¹ˆæ˜¯OCSPè£…è®¢**ï¼š
> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šæœåŠ¡å™¨æå‰å‘CAæŸ¥è¯¢è¯ä¹¦çŠ¶æ€ï¼Œç›´æ¥å‘Šè¯‰å®¢æˆ·ç«¯"æˆ‘çš„è¯ä¹¦æ˜¯å¥½çš„"ï¼Œé¿å…å®¢æˆ·ç«¯è‡ªå·±å»æŸ¥è¯¢

```nginx
# å¯ç”¨OCSPè£…è®¢
ssl_stapling on;
ssl_stapling_verify on;

# æŒ‡å®šCAè¯ä¹¦é“¾ç”¨äºéªŒè¯OCSPå“åº”
ssl_trusted_certificate /path/to/chain.pem;

# DNSè§£æå™¨é…ç½®
resolver 8.8.8.8 8.8.4.4 valid=300s;
resolver_timeout 5s;
```

### 5.5 TLSé…ç½®å®‰å…¨æ£€æŸ¥


**é…ç½®éªŒè¯å·¥å…·**ï¼š
```bash
# ä½¿ç”¨testssl.shæ£€æŸ¥TLSé…ç½®
./testssl.sh https://example.com

# ä½¿ç”¨OpenSSLæ£€æŸ¥æ”¯æŒçš„å¯†ç å¥—ä»¶
openssl s_client -connect example.com:443 -cipher 'ALL:COMPLEMENTOFALL'
```

**åœ¨çº¿æ£€æµ‹å·¥å…·**ï¼š
- ğŸ” **SSL Labs Test**ï¼šhttps://www.ssllabs.com/ssltest/
- ğŸ” **Mozilla Observatory**ï¼šhttps://observatory.mozilla.org/
- ğŸ” **Security Headers**ï¼šhttps://securityheaders.com/

### 5.6 æ€§èƒ½vså®‰å…¨å¹³è¡¡


**é«˜å®‰å…¨é…ç½®ï¼ˆA+çº§åˆ«ï¼‰**ï¼š
```nginx
ssl_protocols TLSv1.3;
ssl_ciphers '';  # TLS 1.3ä½¿ç”¨å†…ç½®å¯†ç å¥—ä»¶
ssl_prefer_server_ciphers off;
ssl_session_tickets off;
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload";
```

**å…¼å®¹æ€§é…ç½®ï¼ˆæ”¯æŒè€è®¾å¤‡ï¼‰**ï¼š
```nginx
ssl_protocols TLSv1.2 TLSv1.3;
ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384';
ssl_prefer_server_ciphers on;
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 HTTPSéƒ¨ç½²æ ¸å¿ƒæ­¥éª¤


**ğŸ”„ éƒ¨ç½²æµç¨‹**ï¼š
```
â‘  è·å–SSLè¯ä¹¦ â†’ â‘¡ é…ç½®æœåŠ¡å™¨ â†’ â‘¢ è®¾ç½®é‡å®šå‘ â†’ â‘£ å¯ç”¨HSTS â†’ â‘¤ ä¼˜åŒ–æ€§èƒ½
```

**âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•**ï¼š
- [ ] **è¯ä¹¦å®‰è£…**ï¼šæ­£ç¡®é…ç½®è¯ä¹¦å’Œç§é’¥
- [ ] **åè®®ç‰ˆæœ¬**ï¼šåªå…è®¸TLS 1.2+
- [ ] **å¯†ç å¥—ä»¶**ï¼šä½¿ç”¨ç°ä»£å®‰å…¨å¥—ä»¶
- [ ] **HTTPé‡å®šå‘**ï¼šæ‰€æœ‰HTTPæµé‡é‡å®šå‘åˆ°HTTPS
- [ ] **HSTSå¯ç”¨**ï¼šè®¾ç½®å®‰å…¨ä¼ è¾“å¤´éƒ¨
- [ ] **æ€§èƒ½ä¼˜åŒ–**ï¼šé…ç½®ä¼šè¯ç¼“å­˜å’Œå‹ç¼©

### 6.2 å…³é”®å®‰å…¨é…ç½®


**ğŸ›¡ï¸ å¿…å¤‡å®‰å…¨å¤´éƒ¨**ï¼š
```nginx
# HSTSï¼šå¼ºåˆ¶HTTPS
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";

# é˜²æ­¢å†…å®¹ç±»å‹å—…æ¢
add_header X-Content-Type-Options nosniff;

# é˜²æ­¢ç‚¹å‡»åŠ«æŒ
add_header X-Frame-Options DENY;

# XSSä¿æŠ¤
add_header X-XSS-Protection "1; mode=block";
```

### 6.3 å¸¸è§é—®é¢˜åŠè§£å†³


| é—®é¢˜ | **ç—‡çŠ¶** | **è§£å†³æ–¹æ¡ˆ** |
|------|---------|-------------|
| ğŸ”´ **è¯ä¹¦é“¾ä¸å®Œæ•´** | `éƒ¨åˆ†æµè§ˆå™¨æŠ¥é”™` | `é…ç½®å®Œæ•´è¯ä¹¦é“¾` |
| ğŸŸ¡ **æ··åˆå†…å®¹è­¦å‘Š** | `HTTPSé¡µé¢åŠ è½½HTTPèµ„æº` | `æ‰€æœ‰èµ„æºæ”¹ä¸ºHTTPS` |
| ğŸŸ  **æ€§èƒ½ä¸‹é™** | `HTTPSæ¯”HTTPæ…¢` | `å¯ç”¨HTTP/2ï¼Œä¼˜åŒ–ä¼šè¯ç¼“å­˜` |
| ğŸ”µ **å…¼å®¹æ€§é—®é¢˜** | `è€è®¾å¤‡æ— æ³•è®¿é—®` | `é€‚å½“æ”¾å®½å¯†ç å¥—ä»¶é™åˆ¶` |

### 6.4 ç»´æŠ¤æœ€ä½³å®è·µ


**ğŸ”§ æ—¥å¸¸ç»´æŠ¤**ï¼š
- **ç›‘æ§è¯ä¹¦è¿‡æœŸ**ï¼šè®¾ç½®æå‰30å¤©æé†’
- **å®šæœŸå®‰å…¨æ£€æµ‹**ï¼šä½¿ç”¨SSL Labsç­‰å·¥å…·æ£€æŸ¥
- **æ›´æ–°TLSé…ç½®**ï¼šå…³æ³¨æœ€æ–°å®‰å…¨å»ºè®®
- **å¤‡ä»½è¯ä¹¦æ–‡ä»¶**ï¼šç¡®ä¿è¯ä¹¦å’Œç§é’¥å®‰å…¨å­˜å‚¨

**ğŸ“Š æ€§èƒ½ç›‘æ§**ï¼š
- **TLSæ¡æ‰‹æ—¶é—´**ï¼šç›‘æ§è¿æ¥å»ºç«‹é€Ÿåº¦
- **è¯ä¹¦éªŒè¯æ—¶é—´**ï¼šOCSPå“åº”é€Ÿåº¦
- **ä¼šè¯å¤ç”¨ç‡**ï¼šæ£€æŸ¥ç¼“å­˜æ•ˆæœ

### 6.5 å®ç”¨è®°å¿†è¦ç‚¹


> ğŸ’¡ **æ ¸å¿ƒè®°å¿†**ï¼šHTTPS = å®‰å…¨çš„HTTPï¼Œé€šè¿‡TLSåŠ å¯†ä¿æŠ¤æ•°æ®ä¼ è¾“

**ğŸ¯ é…ç½®ä¼˜å…ˆçº§**ï¼š
1. **åŸºç¡€å®‰å…¨** > æ€§èƒ½ä¼˜åŒ–
2. **è¯ä¹¦æœ‰æ•ˆ** > é«˜çº§åŠŸèƒ½  
3. **å…¼å®¹æ€§** > å®Œç¾é…ç½®
4. **ç›‘æ§ç»´æŠ¤** > ä¸€æ¬¡é…ç½®

**âš ï¸ é‡è¦æé†’**ï¼š
- HSTSè®¾ç½®éœ€è°¨æ…ï¼Œé”™è¯¯é…ç½®å¯èƒ½å¯¼è‡´ç½‘ç«™æ— æ³•è®¿é—®
- è¯ä¹¦è¿‡æœŸå‰åŠ¡å¿…ç»­æœŸï¼Œå»ºè®®è‡ªåŠ¨åŒ–å¤„ç†
- å®šæœŸæ›´æ–°TLSé…ç½®ï¼Œè·Ÿä¸Šå®‰å…¨æ ‡å‡†æ¼”è¿›
- æµ‹è¯•ç¯å¢ƒéªŒè¯åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**ğŸš€ è¿›é˜¶å­¦ä¹ **ï¼š
- ğŸ“š æ·±å…¥äº†è§£TLS 1.3æ–°ç‰¹æ€§
- ğŸ” å­¦ä¹ Certificate Transparency
- ğŸ› ï¸ æŒæ¡HTTP/3å’ŒQUICåè®®
- ğŸ“Š Webæ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨å¹³è¡¡