---
title: 1、zabbix_get数据获取工具
---
## 📚 目录

1. [zabbix_get工具概述](#1-zabbix_get工具概述)
2. [基本语法与核心参数](#2-基本语法与核心参数)
3. [常用监控项键值详解](#3-常用监控项键值详解)
4. [实战应用场景](#4-实战应用场景)
5. [故障排查与调试技巧](#5-故障排查与调试技巧)
6. [核心要点总结](#6-核心要点总结)

---

## 1. 🔍 zabbix_get工具概述


### 1.1 什么是zabbix_get


**🎯 简单理解**
```
zabbix_get就像是一个"数据探测器"
想象你是一个医生，需要给病人做体检
zabbix_get就是你的听诊器、血压计、体温计

它的作用：
- 主动去目标服务器"问"各种数据
- 测试监控项是否正常工作
- 验证配置是否正确
```

**💡 核心概念**
```
zabbix_get = Zabbix + get（获取）
- Zabbix：开源监控系统
- get：获取、拿到数据的意思

通俗解释：
就是Zabbix提供的一个命令行小工具
专门用来从远程主机获取监控数据
```

### 1.2 为什么需要zabbix_get


**🤔 实际问题场景**
```
场景1：监控配置不生效
问题：在Zabbix Web界面看不到数据
解决：用zabbix_get测试是否能获取到数据

场景2：新增监控项测试  
问题：不知道新的监控项配置是否正确
解决：先用zabbix_get手动测试一下

场景3：网络连通性检查
问题：怀疑网络有问题，数据传不过来
解决：用zabbix_get验证网络和服务是否正常
```

**⚡ 工具优势**
```
✅ 快速测试：几秒钟就能验证监控项
✅ 故障定位：快速找出问题所在
✅ 配置验证：新配置上线前的验证工具  
✅ 学习辅助：理解Zabbix工作原理的好帮手
```

---

## 2. 🛠️ 基本语法与核心参数


### 2.1 基本语法结构


**📋 标准格式**
```bash
zabbix_get -s <主机IP> -p <端口> -k <监控项键值> [其他选项]
```

**🔸 参数分解理解**
```
-s：source（来源）→ 指定目标主机IP
-p：port（端口）→ 指定连接端口  
-k：key（键值）→ 指定要获取的监控项
```

### 2.2 核心参数详解


#### 🎯 **-s 指定目标主机**


```bash
# 基本用法
zabbix_get -s 192.168.1.100 -k system.uptime

# 通俗理解
-s 就是告诉工具："去哪台机器获取数据"
就像写地址一样，必须告诉快递员送到哪里
```

> 💡 **新手提示**  
> IP地址要写准确，否则连不上目标主机

#### 🌐 **-p 指定端口号**


```bash
# 默认端口（可省略）
zabbix_get -s 192.168.1.100 -p 10050 -k system.uptime

# 自定义端口
zabbix_get -s 192.168.1.100 -p 10051 -k system.uptime
```

**📖 端口号概念解释**
```
端口号就像房间号
- 一栋楼（服务器）有很多房间（服务）
- 10050：Zabbix Agent的默认"房间号"
- 不指定-p时，自动使用10050端口
```

| 端口类型 | **端口号** | **用途说明** |
|---------|-----------|-------------|
| 🏠 **默认端口** | `10050` | `Zabbix Agent标准端口` |
| 🔧 **自定义端口** | `其他端口` | `修改过配置的Agent端口` |
| 🚫 **错误端口** | `随意端口` | `连接失败，无法获取数据` |

#### 🔑 **-k 指定监控项键值**


```bash
# 获取系统运行时间
zabbix_get -s 192.168.1.100 -k system.uptime

# 获取CPU负载
zabbix_get -s 192.168.1.100 -k system.cpu.load[all,avg1]
```

**🎭 键值的通俗理解**
```
键值(key)就像"问题清单"
- system.uptime：问"你开机多长时间了？"
- system.cpu.load：问"你CPU累不累？"
- vm.memory.size：问"你内存用了多少？"

每个键值对应一个具体的监控指标
```

#### ⏰ **-t 设置超时时间**


```bash
# 设置30秒超时
zabbix_get -s 192.168.1.100 -k system.uptime -t 30
```

**⏱️ 超时概念说明**
```
超时就像等电话
- 默认：等10秒没接通就挂断
- -t 30：等30秒没接通才挂断
- 网络慢或服务器忙时，可以设置长一点
```

#### 🌍 **-I 指定源IP地址**


```bash
# 从特定IP发起请求
zabbix_get -s 192.168.1.100 -k system.uptime -I 192.168.1.50
```

**🏃 源IP的作用**
```
源IP就像寄信的回信地址
- 通常不需要指定，系统自动选择
- 多网卡环境可能需要指定
- 防火墙限制特定IP时使用
```

---

## 3. 📊 常用监控项键值详解


### 3.1 系统基础监控


#### 💻 **system.cpu.load - CPU负载监控**


```bash
# CPU 1分钟平均负载
zabbix_get -s 192.168.1.100 -k system.cpu.load[all,avg1]

# CPU 5分钟平均负载  
zabbix_get -s 192.168.1.100 -k system.cpu.load[all,avg5]

# CPU 15分钟平均负载
zabbix_get -s 192.168.1.100 -k system.cpu.load[all,avg15]
```

**🎯 CPU负载通俗解释**
```
CPU负载就像餐厅的忙碌程度
- 0.0：餐厅空着，服务员闲着
- 1.0：刚好忙满，一个服务员对应一桌客人
- 2.0：超负荷，需要排队等待

参数说明：
[all,avg1]：所有CPU的1分钟平均值
[all,avg5]：所有CPU的5分钟平均值
```

> ⚠️ **重要提醒**  
> 负载值超过CPU核心数表示系统繁忙

#### 🧠 **vm.memory.size - 内存信息监控**


```bash
# 总内存大小
zabbix_get -s 192.168.1.100 -k vm.memory.size[total]

# 可用内存大小
zabbix_get -s 192.168.1.100 -k vm.memory.size[available]

# 已用内存大小
zabbix_get -s 192.168.1.100 -k vm.memory.size[used]

# 内存使用百分比
zabbix_get -s 192.168.1.100 -k vm.memory.size[pavailable]
```

**💾 内存监控参数对照表**

| 参数类型 | **键值** | **返回结果** | **通俗理解** |
|---------|---------|-------------|-------------|
| 📏 **总容量** | `total` | `字节数` | `内存条总大小` |
| ✅ **可用量** | `available` | `字节数` | `还能用多少` |
| 📊 **已用量** | `used` | `字节数` | `已经用了多少` |
| 📈 **可用率** | `pavailable` | `百分比` | `还剩百分之几可用` |

#### ⏰ **system.uptime - 系统运行时间**


```bash
# 获取系统运行时间（秒）
zabbix_get -s 192.168.1.100 -k system.uptime
```

**⏱️ 运行时间说明**
```
返回值：从开机到现在的秒数
例如：86400 = 1天（24小时×60分钟×60秒）

实际意义：
- 了解服务器稳定性
- 判断是否最近重启过
- 监控服务器宕机情况
```

### 3.2 文件系统监控


#### 💽 **vfs.fs.size - 文件系统大小监控**


```bash
# 根分区总大小
zabbix_get -s 192.168.1.100 -k vfs.fs.size[/,total]

# 根分区已用空间
zabbix_get -s 192.168.1.100 -k vfs.fs.size[/,used]

# 根分区可用空间
zabbix_get -s 192.168.1.100 -k vfs.fs.size[/,free]

# 根分区使用百分比
zabbix_get -s 192.168.1.100 -k vfs.fs.size[/,pused]
```

**📁 文件系统监控说明**
```
vfs.fs.size[挂载点,类型]

挂载点例子：
- /：根分区（Linux）
- /home：家目录分区
- C:\：C盘（Windows）
- /var/log：日志分区

类型说明：
- total：总容量  
- used：已使用
- free：剩余空间
- pused：使用百分比
```

### 3.3 网络监控


#### 🌐 **net.if.in/out - 网络流量监控**


```bash
# 网卡接收字节数
zabbix_get -s 192.168.1.100 -k net.if.in[eth0]

# 网卡发送字节数  
zabbix_get -s 192.168.1.100 -k net.if.out[eth0]

# 网卡接收包数
zabbix_get -s 192.168.1.100 -k net.if.in[eth0,packets]

# 网卡发送包数
zabbix_get -s 192.168.1.100 -k net.if.out[eth0,packets]
```

**📡 网络流量监控原理图**
```
服务器网卡流量示意：
    
    互联网
       ↕
   ┌─────────┐
   │  路由器  │
   └─────────┘
       ↕
   ┌─────────┐    net.if.in[eth0] ←── 接收流量
   │ 服务器   │    
   │ eth0网卡 │    net.if.out[eth0] ←── 发送流量
   └─────────┘
```

> 💡 **实用技巧**  
> 常用网卡名称：eth0, eth1, ens33, em1

### 3.4 进程监控


#### 🔄 **proc.num - 进程数量监控**


```bash
# 总进程数
zabbix_get -s 192.168.1.100 -k proc.num

# 特定进程数量
zabbix_get -s 192.168.1.100 -k proc.num[httpd]

# 特定用户的进程数
zabbix_get -s 192.168.1.100 -k proc.num[,root]

# 运行状态的进程数
zabbix_get -s 192.168.1.100 -k proc.num[,,run]
```

**🔍 进程监控参数说明**
```
proc.num[进程名,用户,状态,命令行]

参数详解：
- 进程名：如httpd, mysql, nginx
- 用户：如root, www-data, mysql  
- 状态：run(运行), sleep(休眠), zombie(僵尸)
- 命令行：进程启动的完整命令
```

### 3.5 日志监控


#### 📄 **log监控 - 日志文件监控**


```bash
# 监控日志文件
zabbix_get -s 192.168.1.100 -k log[/var/log/messages]

# 监控特定模式的日志
zabbix_get -s 192.168.1.100 -k log[/var/log/apache/error.log,"error"]
```

**📝 日志监控实际应用**
```
日志监控就像安全摄像头
- 实时查看系统"发生了什么"
- 发现错误和异常情况
- 分析系统运行状态

常用日志文件：
- /var/log/messages：系统日志
- /var/log/apache/error.log：Apache错误日志  
- /var/log/mysql/error.log：MySQL错误日志
```

---

## 4. 🎯 实战应用场景


### 4.1 网络连通性测试


**🔗 测试连接是否正常**
```bash
# 基础连通性测试
zabbix_get -s 192.168.1.100 -k agent.ping

# 带超时的连接测试
zabbix_get -s 192.168.1.100 -k agent.ping -t 5
```

**📊 连接测试结果判断**
```
返回结果解读：
✅ 返回"1"：连接正常，Agent运行正常
❌ 连接超时：网络问题或Agent未运行  
❌ 连接拒绝：端口不对或防火墙阻挡
❌ 主机不可达：IP地址错误或主机关机
```

### 4.2 性能基准测试


**⚡ 获取系统性能基线**
```bash
# 获取当前CPU负载
zabbix_get -s 192.168.1.100 -k system.cpu.load[all,avg1]

# 获取内存使用率
zabbix_get -s 192.168.1.100 -k vm.memory.size[pavailable]

# 获取磁盘使用率
zabbix_get -s 192.168.1.100 -k vfs.fs.size[/,pused]
```

**📈 性能测试脚本示例**
```bash
#!/bin/bash
# 性能快速检测脚本

HOST="192.168.1.100"
echo "=== 系统性能检测 ==="
echo "CPU负载: $(zabbix_get -s $HOST -k system.cpu.load[all,avg1])"
echo "内存可用: $(zabbix_get -s $HOST -k vm.memory.size[pavailable])%"
echo "磁盘使用: $(zabbix_get -s $HOST -k vfs.fs.size[/,pused])%"
echo "运行时间: $(zabbix_get -s $HOST -k system.uptime)秒"
```

### 4.3 代理测试方法


**🔄 通过代理获取数据**
```bash
# 通过Zabbix Proxy获取数据
zabbix_get -s proxy.example.com -p 10051 -k system.uptime

# 测试代理转发功能
zabbix_get -s proxy.example.com -p 10051 -k system.cpu.load[all,avg1]
```

**🏗️ 代理架构理解图**
```
Zabbix监控架构：

Zabbix Server ←→ Zabbix Proxy ←→ Zabbix Agent
   (总部)          (分公司)        (监控目标)
      ↕              ↕               ↕  
   Web界面        数据转发          数据采集
   数据存储        本地缓存          系统信息
```

### 4.4 自定义参数测试


**🛠️ 测试自定义监控项**
```bash
# 测试自定义脚本监控项
zabbix_get -s 192.168.1.100 -k custom.script[check_mysql]

# 测试用户自定义参数
zabbix_get -s 192.168.1.100 -k user.parameter[disk_usage]
```

**💡 自定义监控项配置理解**
```
自定义监控项就像"个性化体检"
- 标准监控：血压、体温、心率
- 自定义监控：血糖、胆固醇、特殊指标

配置位置：
/etc/zabbix/zabbix_agentd.conf
UserParameter=custom.script[*],/path/to/script.sh $1
```

---

## 5. 🚨 故障排查与调试技巧


### 5.1 常见错误与解决方法


#### ❌ **连接错误排查**


**错误现象1：连接超时**
```bash
# 错误信息
zabbix_get: Timeout while connecting to host

# 排查步骤
1. ping测试网络连通性
2. telnet测试端口是否开放
3. 检查防火墙规则
4. 确认Agent是否运行
```

**🔧 网络排查命令组合**
```bash
# 1. 测试网络连通性
ping 192.168.1.100

# 2. 测试端口连通性  
telnet 192.168.1.100 10050

# 3. 检查防火墙状态
systemctl status firewalld

# 4. 检查Agent运行状态
systemctl status zabbix-agent
```

**错误现象2：连接被拒绝**
```bash
# 错误信息
zabbix_get: Connection refused

# 可能原因及解决
✅ Agent未启动 → systemctl start zabbix-agent
✅ 端口配置错误 → 检查Agent配置文件
✅ 防火墙阻挡 → 开放10050端口
```

#### ⚠️ **数据获取错误**


**错误现象3：不支持的监控项**
```bash
# 错误信息
ZBX_NOTSUPPORTED: Unsupported item key

# 排查方法
1. 检查键值拼写是否正确
2. 确认监控项是否支持当前系统
3. 查看Agent日志文件
```

**📋 监控项支持性检查表**

| 系统类型 | **支持的监控项** | **常见限制** |
|---------|---------------|-------------|
| 🐧 **Linux** | `大部分监控项` | `Windows特有项不支持` |
| 🪟 **Windows** | `大部分监控项` | `Linux特有项不支持` |
| 🍎 **macOS** | `基础监控项` | `部分高级功能受限` |

### 5.2 调试技巧与最佳实践


#### 🔍 **逐步调试方法**


```bash
# 步骤1：测试基础连接
zabbix_get -s 192.168.1.100 -k agent.ping

# 步骤2：测试简单监控项
zabbix_get -s 192.168.1.100 -k system.uptime

# 步骤3：测试复杂监控项
zabbix_get -s 192.168.1.100 -k system.cpu.load[all,avg1]

# 步骤4：测试自定义监控项
zabbix_get -s 192.168.1.100 -k custom.item
```

**🎯 调试策略**
```
从简单到复杂的调试原则：
1. 先测试连接 → agent.ping
2. 再测试基础项 → system.uptime  
3. 然后测试常用项 → CPU、内存
4. 最后测试自定义项 → 用户参数
```

#### 📊 **性能调试技巧**


```bash
# 使用详细模式获取更多信息
zabbix_get -s 192.168.1.100 -k system.uptime -t 30 -v

# 批量测试多个监控项
for key in system.uptime system.cpu.load vm.memory.size; do
    echo "Testing $key:"
    zabbix_get -s 192.168.1.100 -k $key
done
```

> 💡 **调试小贴士**  
> 遇到问题时，先检查最基础的连接，再逐步深入

### 5.3 日志分析与问题定位


**📄 Agent日志查看**
```bash
# 查看Agent日志
tail -f /var/log/zabbix/zabbix_agentd.log

# 搜索错误信息
grep "ERROR" /var/log/zabbix/zabbix_agentd.log

# 查看最近的日志
tail -100 /var/log/zabbix/zabbix_agentd.log
```

**🔍 日志分析重点**
```
关注日志中的关键信息：
- ERROR：错误信息，需要重点关注
- WARNING：警告信息，可能影响功能
- connection：连接相关问题
- timeout：超时问题
- permission：权限问题
```

---

## 6. 📋 核心要点总结


### 6.1 必须掌握的基本知识


```
🔸 zabbix_get本质：Zabbix的数据获取测试工具
🔸 基本语法：zabbix_get -s IP -p 端口 -k 键值
🔸 核心参数：-s(主机) -p(端口) -k(键值) -t(超时)
🔸 常用键值：system.uptime, system.cpu.load, vm.memory.size
🔸 实际作用：测试、调试、验证监控配置
```

### 6.2 关键理解要点


**🔹 工具定位与作用**
```
zabbix_get不是监控系统本身，而是：
- 测试工具：验证监控项是否正常
- 调试工具：排查监控问题  
- 学习工具：理解Zabbix工作原理
```

**🔹 参数使用原则**
```
必需参数：-s(目标主机) -k(监控项)
常用参数：-p(端口，默认10050)
可选参数：-t(超时) -I(源IP)
```

**🔹 监控项分类理解**
```
系统基础：CPU、内存、磁盘、网络
进程服务：进程数量、服务状态
日志文件：错误日志、系统日志
自定义项：用户脚本、特殊需求
```

### 6.3 实际应用价值


**🎯 新手学习路径**
- **第一步**：学会基本语法，能获取系统运行时间
- **第二步**：掌握常用监控项，能检查CPU、内存
- **第三步**：学会故障排查，能解决连接问题
- **第四步**：应用实际场景，能编写测试脚本

**🔧 工作中的实用技巧**
- **配置验证**：新监控项上线前先用zabbix_get测试
- **问题排查**：监控异常时用zabbix_get快速定位
- **性能检查**：定期用脚本批量检查系统状态
- **网络诊断**：验证Agent连接和网络问题

### 6.4 进阶学习建议


**📚 后续学习方向**
```
基础巩固：
- 熟练掌握所有常用监控项
- 理解不同操作系统的差异
- 掌握自定义监控项配置

实战提升：
- 编写自动化测试脚本
- 结合其他Zabbix工具使用
- 学习Zabbix API调用方法
```

**🎯 学习重点提醒**
- **多练习**：只有动手实践才能真正掌握
- **多思考**：理解每个参数和返回值的含义
- **多应用**：结合实际工作场景使用
- **多总结**：记录常用命令和排查方法

> 💡 **核心记忆口诀**  
> zabbix_get，数据探测器  
> -s指主机，-k是键值  
> 测试调试很方便，监控运维好帮手

**最终目标**：通过zabbix_get工具，新手能够独立进行基础的Zabbix监控测试和简单的故障排查，为深入学习Zabbix监控系统打下坚实基础。