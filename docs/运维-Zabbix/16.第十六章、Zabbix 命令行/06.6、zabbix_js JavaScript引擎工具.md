---
title: 6ã€zabbix_js JavaScriptå¼•æ“å·¥å…·
---
## ğŸ“š ç›®å½•

1. [zabbix_jså·¥å…·æ¦‚è¿°](#1-zabbix_jså·¥å…·æ¦‚è¿°)
2. [åŸºæœ¬ä½¿ç”¨æ–¹æ³•](#2-åŸºæœ¬ä½¿ç”¨æ–¹æ³•)
3. [æ ¸å¿ƒå‚æ•°è¯¦è§£](#3-æ ¸å¿ƒå‚æ•°è¯¦è§£)
4. [JavaScriptè„šæœ¬æµ‹è¯•](#4-javascriptè„šæœ¬æµ‹è¯•)
5. [å®é™…åº”ç”¨åœºæ™¯](#5-å®é™…åº”ç”¨åœºæ™¯)
6. [è°ƒè¯•ä¸ä¼˜åŒ–æŠ€å·§](#6-è°ƒè¯•ä¸ä¼˜åŒ–æŠ€å·§)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ zabbix_jså·¥å…·æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯zabbix_js


**ğŸ¯ ç®€å•ç†è§£**ï¼š
`zabbix_js`å°±åƒæ˜¯ä¸€ä¸ª**JavaScriptä»£ç æµ‹è¯•å™¨**ï¼Œä¸“é—¨ç”¨æ¥æµ‹è¯•Zabbixä¸­çš„JavaScriptè„šæœ¬æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œã€‚

> **ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**
> å°±åƒä½ å†™å®Œä¸€ç¯‡æ–‡ç« è¦å…ˆæ£€æŸ¥è¯­æ³•å’Œé€»è¾‘ä¸€æ ·ï¼Œå†™å®ŒJavaScriptè„šæœ¬ä¹Ÿè¦å…ˆç”¨zabbix_jsæµ‹è¯•ä¸€ä¸‹ï¼Œç¡®ä¿æ²¡é—®é¢˜å†åœ¨Zabbixä¸­ä½¿ç”¨ã€‚

**ğŸ” æ ¸å¿ƒä½œç”¨**ï¼š
```
ä¸»è¦åŠŸèƒ½æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    JavaScriptè„šæœ¬       â”‚ â† ä½ å†™çš„ä»£ç 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    zabbix_jså·¥å…·        â”‚ â† æµ‹è¯•æ‰§è¡Œå™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    æ‰§è¡Œç»“æœè¾“å‡º         â”‚ â† è¿è¡Œç»“æœ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦zabbix_js


**ğŸ¤” è§£å†³çš„é—®é¢˜**ï¼š

åœ¨Zabbixä¸­ï¼Œå¾ˆå¤šåœ°æ–¹ä¼šç”¨åˆ°JavaScriptè„šæœ¬ï¼š
- **æ•°æ®é¢„å¤„ç†**ï¼šå¯¹é‡‡é›†åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†
- **Webhooké€šçŸ¥**ï¼šå‘é€å‘Šè­¦é€šçŸ¥åˆ°å¤–éƒ¨ç³»ç»Ÿ
- **åª’ä»‹ç±»å‹è„šæœ¬**ï¼šè‡ªå®šä¹‰é€šçŸ¥æ–¹å¼
- **è‡ªå®šä¹‰å‡½æ•°**ï¼šå¤æ‚çš„è®¡ç®—é€»è¾‘

> **âš ï¸ å¸¸è§å›°æ‰°**
> å¦‚æœç›´æ¥åœ¨Zabbixç•Œé¢é‡Œå†™è„šæœ¬ï¼Œå‡ºé”™äº†å¾ˆéš¾è°ƒè¯•ï¼Œè€Œä¸”å¯èƒ½å½±å“æ­£å¸¸ç›‘æ§ã€‚ç”¨zabbix_jså¯ä»¥**æå‰æµ‹è¯•**ï¼Œé¿å…çº¿ä¸Šå‡ºé—®é¢˜ã€‚

**âœ… ä½¿ç”¨ä¼˜åŠ¿**ï¼š
- ğŸš€ **å¿«é€Ÿæµ‹è¯•**ï¼šä¸ç”¨é‡å¯ZabbixæœåŠ¡
- ğŸ” **é”™è¯¯å®šä½**ï¼šæ¸…æ™°æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- ğŸ“Š **æ€§èƒ½æµ‹è¯•**ï¼šå¯ä»¥æµ‹è¯•è„šæœ¬æ‰§è¡Œæ—¶é—´
- ğŸ›¡ï¸ **å®‰å…¨éªŒè¯**ï¼šç¡®ä¿è„šæœ¬ä¸ä¼šå¼•èµ·ç³»ç»Ÿé—®é¢˜

---

## 2. ğŸ’» åŸºæœ¬ä½¿ç”¨æ–¹æ³•


### 2.1 å‘½ä»¤æ ¼å¼


**åŸºç¡€è¯­æ³•**ï¼š
```bash
zabbix_js [é€‰é¡¹] [è„šæœ¬æ–‡ä»¶]
```

**ğŸ¯ æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# ç›´æ¥æ‰§è¡ŒJavaScriptä»£ç 
zabbix_js -s "console.log('Hello Zabbix!');"

# æ‰§è¡ŒJavaScriptæ–‡ä»¶
zabbix_js test.js
```

### 2.2 å¿«é€Ÿå…¥é—¨ç¤ºä¾‹


**ğŸ“ åˆ›å»ºæµ‹è¯•è„šæœ¬**ï¼š
```javascript
// ä¿å­˜ä¸º test.js
var message = "æ¬¢è¿ä½¿ç”¨Zabbix JavaScriptå¼•æ“ï¼";
console.log(message);

// ç®€å•çš„æ•°æ®å¤„ç†ç¤ºä¾‹
var data = "100.5MB";
var number = parseFloat(data);
console.log("æå–çš„æ•°å­—ï¼š" + number);
```

**â–¶ï¸ æ‰§è¡Œæµ‹è¯•**ï¼š
```bash
# æ–¹æ³•1ï¼šæ‰§è¡Œæ–‡ä»¶
zabbix_js test.js

# æ–¹æ³•2ï¼šç›´æ¥æ‰§è¡Œä»£ç 
zabbix_js -s "var x = 10; var y = 20; console.log('ç»“æœï¼š' + (x + y));"
```

**ğŸ“¤ é¢„æœŸè¾“å‡º**ï¼š
```
æ¬¢è¿ä½¿ç”¨Zabbix JavaScriptå¼•æ“ï¼
æå–çš„æ•°å­—ï¼š100.5
```

---

## 3. âš™ï¸ æ ¸å¿ƒå‚æ•°è¯¦è§£


### 3.1 ä¸»è¦å‚æ•°å¯¹ç…§è¡¨


| å‚æ•° | **ä½œç”¨è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|------|-------------|-------------|----------|
| `-s` | **æ‰§è¡ŒJavaScriptä»£ç å­—ç¬¦ä¸²** | `æµ‹è¯•ç®€å•è„šæœ¬` | `-s "console.log('test');"` |
| `-p` | **ä¼ é€’å‚æ•°ç»™è„šæœ¬** | `æ¨¡æ‹ŸZabbixä¼ å…¥çš„å‚æ•°` | `-p param1 -p param2` |
| `-l` | **è®¾ç½®æ—¥å¿—çº§åˆ«** | `æ§åˆ¶è¾“å‡ºè¯¦ç»†ç¨‹åº¦` | `-l debug` |
| `-t` | **è®¾ç½®æ‰§è¡Œè¶…æ—¶æ—¶é—´** | `é˜²æ­¢è„šæœ¬æ— é™æ‰§è¡Œ` | `-t 30` |

### 3.2 -s å‚æ•°ï¼šæ‰§è¡Œè„šæœ¬å­—ç¬¦ä¸²


**ğŸ¯ ç”¨é€”**ï¼šç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­å†™JavaScriptä»£ç 

```bash
# åŸºç¡€ç¤ºä¾‹
zabbix_js -s "console.log('å½“å‰æ—¶é—´ï¼š' + new Date());"

# æ•°æ®å¤„ç†ç¤ºä¾‹
zabbix_js -s "
var cpu_usage = '85.6%';
var value = parseFloat(cpu_usage);
if (value > 80) {
    console.log('CPUä½¿ç”¨ç‡è¿‡é«˜ï¼š' + value + '%');
} else {
    console.log('CPUä½¿ç”¨ç‡æ­£å¸¸ï¼š' + value + '%');
}
"
```

> **ğŸ’¡ å®ç”¨æŠ€å·§**
> ç”¨-så‚æ•°é€‚åˆæµ‹è¯•ç®€å•çš„é€»è¾‘ï¼Œå¤æ‚çš„è„šæœ¬å»ºè®®å†™æˆæ–‡ä»¶

### 3.3 -p å‚æ•°ï¼šè„šæœ¬å‚æ•°ä¼ é€’


**ğŸ¯ ç”¨é€”**ï¼šæ¨¡æ‹ŸZabbixå‘è„šæœ¬ä¼ é€’çš„å‚æ•°

**ğŸ“ å‚æ•°è„šæœ¬ç¤ºä¾‹**ï¼š
```javascript
// ä¿å­˜ä¸º process_params.js
// åœ¨Zabbixä¸­ï¼Œå‚æ•°é€šè¿‡valueå˜é‡è·å–
console.log('æ¥æ”¶åˆ°çš„å‚æ•°ï¼š');
console.log('å‚æ•°1ï¼š' + value);

// å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œé€šè¿‡æ•°ç»„è·å–
if (typeof params !== 'undefined' && params.length > 0) {
    for (var i = 0; i < params.length; i++) {
        console.log('å‚æ•°' + (i+1) + 'ï¼š' + params[i]);
    }
}
```

**â–¶ï¸ ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# ä¼ é€’å•ä¸ªå‚æ•°
zabbix_js -p "æœåŠ¡å™¨CPUä½¿ç”¨ç‡ï¼š85%" process_params.js

# ä¼ é€’å¤šä¸ªå‚æ•°
zabbix_js -p "å‚æ•°1" -p "å‚æ•°2" -p "å‚æ•°3" process_params.js
```

### 3.4 -l å‚æ•°ï¼šæ—¥å¿—çº§åˆ«è®¾ç½®


**ğŸ“Š æ—¥å¿—çº§åˆ«è¯´æ˜**ï¼š

| çº§åˆ« | **æ˜¾ç¤ºå†…å®¹** | **é€‚ç”¨åœºæ™¯** |
|------|-------------|-------------|
| `error` | **åªæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯** | `ç”Ÿäº§ç¯å¢ƒä½¿ç”¨` |
| `warning` | **æ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯** | `ä¸€èˆ¬è°ƒè¯•ä½¿ç”¨` |
| `info` | **æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯** | `é»˜è®¤çº§åˆ«` |
| `debug` | **æ˜¾ç¤ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯** | `æ·±åº¦è°ƒè¯•æ—¶ä½¿ç”¨` |

**ğŸ” ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# è°ƒè¯•æ¨¡å¼ï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
zabbix_js -l debug -s "console.log('è°ƒè¯•ä¿¡æ¯æµ‹è¯•');"

# åªæ˜¾ç¤ºé”™è¯¯
zabbix_js -l error test.js
```

### 3.5 -t å‚æ•°ï¼šæ‰§è¡Œè¶…æ—¶è®¾ç½®


**â° ä½œç”¨**ï¼šé˜²æ­¢è„šæœ¬æ‰§è¡Œæ—¶é—´è¿‡é•¿

```bash
# è®¾ç½®30ç§’è¶…æ—¶
zabbix_js -t 30 long_running_script.js

# è®¾ç½®5ç§’è¶…æ—¶ï¼ˆé€‚åˆç®€å•è„šæœ¬ï¼‰
zabbix_js -t 5 -s "
for(var i = 0; i < 1000000; i++) {
    // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
}
console.log('æ‰§è¡Œå®Œæˆ');
"
```

> **âš ï¸ æ³¨æ„äº‹é¡¹**
> å¦‚æœè„šæœ¬è¶…æ—¶ï¼Œzabbix_jsä¼šè‡ªåŠ¨ç»ˆæ­¢æ‰§è¡Œå¹¶æŠ¥å‘Šè¶…æ—¶é”™è¯¯

---

## 4. ğŸ§ª JavaScriptè„šæœ¬æµ‹è¯•


### 4.1 æ•°æ®é¢„å¤„ç†è„šæœ¬æµ‹è¯•


**ğŸ“‹ åº”ç”¨åœºæ™¯**ï¼šåœ¨Zabbixä¸­å¯¹ç›‘æ§æ•°æ®è¿›è¡Œé¢„å¤„ç†

**ğŸ“ é¢„å¤„ç†è„šæœ¬ç¤ºä¾‹**ï¼š
```javascript
// ä¿å­˜ä¸º data_preprocessing.js
// æ¨¡æ‹Ÿä»ç›‘æ§é¡¹è·å–çš„åŸå§‹æ•°æ®
var raw_data = value || "Memory usage: 4.2GB/8GB (52.5%)";

// æå–å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯”
var match = raw_data.match(/\((\d+\.?\d*)%\)/);
if (match) {
    var percentage = parseFloat(match[1]);
    console.log("æå–çš„ç™¾åˆ†æ¯”ï¼š" + percentage);
    
    // æ ¹æ®ä½¿ç”¨ç‡è®¾ç½®å‘Šè­¦çº§åˆ«
    if (percentage > 90) {
        console.log("å‘Šè­¦çº§åˆ«ï¼šä¸¥é‡");
    } else if (percentage > 80) {
        console.log("å‘Šè­¦çº§åˆ«ï¼šè­¦å‘Š");
    } else {
        console.log("å‘Šè­¦çº§åˆ«ï¼šæ­£å¸¸");
    }
} else {
    console.log("æ•°æ®æ ¼å¼é”™è¯¯");
}
```

**â–¶ï¸ æµ‹è¯•å‘½ä»¤**ï¼š
```bash
# æµ‹è¯•æ­£å¸¸æ•°æ®
zabbix_js -p "Memory usage: 4.2GB/8GB (52.5%)" data_preprocessing.js

# æµ‹è¯•é«˜ä½¿ç”¨ç‡æ•°æ®
zabbix_js -p "Memory usage: 7.5GB/8GB (93.8%)" data_preprocessing.js
```

### 4.2 Webhookè„šæœ¬æµ‹è¯•


**ğŸ“¨ åº”ç”¨åœºæ™¯**ï¼šå‘é€å‘Šè­¦é€šçŸ¥åˆ°å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ç­‰ï¼‰

**ğŸ“ Webhookè„šæœ¬ç¤ºä¾‹**ï¼š
```javascript
// ä¿å­˜ä¸º webhook_test.js
// æ¨¡æ‹Ÿå‘Šè­¦æ•°æ®
var alert_data = {
    host: "web-server-01",
    item: "CPUä½¿ç”¨ç‡",
    value: "95%",
    severity: "ä¸¥é‡",
    time: new Date().toLocaleString()
};

// æ„é€ å‘é€æ¶ˆæ¯
var message = "ğŸš¨ å‘Šè­¦é€šçŸ¥\n" +
              "ä¸»æœºï¼š" + alert_data.host + "\n" +
              "ç›‘æ§é¡¹ï¼š" + alert_data.item + "\n" +
              "å½“å‰å€¼ï¼š" + alert_data.value + "\n" +
              "å‘Šè­¦çº§åˆ«ï¼š" + alert_data.severity + "\n" +
              "æ—¶é—´ï¼š" + alert_data.time;

console.log("å‡†å¤‡å‘é€çš„æ¶ˆæ¯ï¼š");
console.log(message);

// åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨HTTPè¯·æ±‚å‘é€æ¶ˆæ¯
// è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿè¾“å‡º
console.log("âœ… æ¶ˆæ¯å‘é€æˆåŠŸ");
```

**â–¶ï¸ æµ‹è¯•æ‰§è¡Œ**ï¼š
```bash
zabbix_js webhook_test.js
```

### 4.3 JSONæ•°æ®å¤„ç†æµ‹è¯•


**ğŸ“Š å¸¸è§éœ€æ±‚**ï¼šå¤„ç†APIè¿”å›çš„JSONæ•°æ®

**ğŸ“ JSONå¤„ç†ç¤ºä¾‹**ï¼š
```javascript
// ä¿å­˜ä¸º json_processor.js
// æ¨¡æ‹ŸAPIè¿”å›çš„JSONæ•°æ®
var json_data = value || '{"status":"ok","data":{"cpu":45.6,"memory":78.2,"disk":65.1}}';

try {
    var parsed = JSON.parse(json_data);
    
    console.log("è§£ææˆåŠŸï¼");
    console.log("CPUä½¿ç”¨ç‡ï¼š" + parsed.data.cpu + "%");
    console.log("å†…å­˜ä½¿ç”¨ç‡ï¼š" + parsed.data.memory + "%");
    console.log("ç£ç›˜ä½¿ç”¨ç‡ï¼š" + parsed.data.disk + "%");
    
    // è®¡ç®—å¹³å‡ä½¿ç”¨ç‡
    var average = (parsed.data.cpu + parsed.data.memory + parsed.data.disk) / 3;
    console.log("å¹³å‡ä½¿ç”¨ç‡ï¼š" + average.toFixed(2) + "%");
    
} catch (error) {
    console.log("JSONè§£æå¤±è´¥ï¼š" + error.message);
}
```

**â–¶ï¸ æµ‹è¯•ä¸åŒæ•°æ®**ï¼š
```bash
# æµ‹è¯•æ­£å¸¸JSON
zabbix_js json_processor.js

# æµ‹è¯•è‡ªå®šä¹‰JSONæ•°æ®
zabbix_js -p '{"status":"error","message":"æœåŠ¡ä¸å¯ç”¨"}' json_processor.js

# æµ‹è¯•é”™è¯¯JSONæ ¼å¼
zabbix_js -p '{"status":"ok"ï¼Œ"data":invalid}' json_processor.js
```

---

## 5. ğŸ¯ å®é™…åº”ç”¨åœºæ™¯


### 5.1 æ•°æ®æ ¼å¼è½¬æ¢


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯**ï¼šç›‘æ§é¡¹è¿”å›çš„æ•°æ®æ ¼å¼éœ€è¦è½¬æ¢

```javascript
// ä¿å­˜ä¸º format_converter.js
// å¤„ç†ä¸åŒå•ä½çš„æ•°æ®
var input = value || "1024MB";

function convertToGB(input) {
    var number = parseFloat(input);
    var unit = input.replace(/[\d.]/g, '').trim();
    
    switch(unit.toLowerCase()) {
        case 'kb':
            return (number / 1024 / 1024).toFixed(2) + "GB";
        case 'mb':
            return (number / 1024).toFixed(2) + "GB";
        case 'gb':
            return number.toFixed(2) + "GB";
        case 'tb':
            return (number * 1024).toFixed(2) + "GB";
        default:
            return "æœªçŸ¥å•ä½";
    }
}

console.log("åŸå§‹æ•°æ®ï¼š" + input);
console.log("è½¬æ¢ç»“æœï¼š" + convertToGB(input));
```

**ğŸ§ª æµ‹è¯•å„ç§å•ä½**ï¼š
```bash
zabbix_js -p "512MB" format_converter.js
zabbix_js -p "2048KB" format_converter.js
zabbix_js -p "1.5TB" format_converter.js
```

### 5.2 HTTPè¯·æ±‚æ¨¡æ‹Ÿæµ‹è¯•


**ğŸŒ åº”ç”¨åœºæ™¯**ï¼šæµ‹è¯•å¯¹å¤–éƒ¨APIçš„è°ƒç”¨é€»è¾‘

```javascript
// ä¿å­˜ä¸º http_request_test.js
// æ¨¡æ‹ŸHTTPè¯·æ±‚çš„é€»è¾‘æµ‹è¯•
function simulateHttpRequest(url, method, data) {
    console.log("=== HTTPè¯·æ±‚æµ‹è¯• ===");
    console.log("URL: " + url);
    console.log("æ–¹æ³•: " + method);
    console.log("æ•°æ®: " + JSON.stringify(data));
    
    // æ¨¡æ‹Ÿä¸åŒçš„å“åº”ç»“æœ
    var mockResponses = {
        200: { status: "success", message: "è¯·æ±‚æˆåŠŸ" },
        400: { status: "error", message: "è¯·æ±‚å‚æ•°é”™è¯¯" },
        500: { status: "error", message: "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯" }
    };
    
    // éšæœºé€‰æ‹©ä¸€ä¸ªå“åº”çŠ¶æ€
    var statuses = [200, 200, 200, 400, 500]; // å¤§éƒ¨åˆ†æˆåŠŸ
    var randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
    
    console.log("å“åº”çŠ¶æ€: " + randomStatus);
    console.log("å“åº”å†…å®¹: " + JSON.stringify(mockResponses[randomStatus]));
    
    return randomStatus === 200;
}

// æµ‹è¯•ä¼ä¸šå¾®ä¿¡é€šçŸ¥
var webhook_url = "https://qyapi.weixin.qq.com/cgi-bin/webhook/send";
var message_data = {
    msgtype: "text",
    text: { content: "Zabbixå‘Šè­¦ï¼šæœåŠ¡å™¨CPUä½¿ç”¨ç‡è¿‡é«˜" }
};

var success = simulateHttpRequest(webhook_url, "POST", message_data);
console.log("å‘é€ç»“æœ: " + (success ? "âœ… æˆåŠŸ" : "âŒ å¤±è´¥"));
```

### 5.3 å¤æ‚æ¡ä»¶åˆ¤æ–­æµ‹è¯•


**ğŸ” åº”ç”¨åœºæ™¯**ï¼šå¤šæ¡ä»¶å‘Šè­¦åˆ¤æ–­é€»è¾‘

```javascript
// ä¿å­˜ä¸º alert_logic_test.js
// å¤æ‚çš„å‘Šè­¦åˆ¤æ–­é€»è¾‘
function analyzeSystemHealth(metrics) {
    var alerts = [];
    var severity = "æ­£å¸¸";
    
    // CPUæ£€æŸ¥
    if (metrics.cpu > 90) {
        alerts.push("CPUä½¿ç”¨ç‡è¿‡é«˜: " + metrics.cpu + "%");
        severity = "ä¸¥é‡";
    } else if (metrics.cpu > 80) {
        alerts.push("CPUä½¿ç”¨ç‡è¾ƒé«˜: " + metrics.cpu + "%");
        if (severity === "æ­£å¸¸") severity = "è­¦å‘Š";
    }
    
    // å†…å­˜æ£€æŸ¥
    if (metrics.memory > 95) {
        alerts.push("å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜: " + metrics.memory + "%");
        severity = "ä¸¥é‡";
    } else if (metrics.memory > 85) {
        alerts.push("å†…å­˜ä½¿ç”¨ç‡è¾ƒé«˜: " + metrics.memory + "%");
        if (severity === "æ­£å¸¸") severity = "è­¦å‘Š";
    }
    
    // ç£ç›˜æ£€æŸ¥
    if (metrics.disk > 90) {
        alerts.push("ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜: " + metrics.disk + "%");
        severity = "ä¸¥é‡";
    }
    
    // è´Ÿè½½æ£€æŸ¥
    if (metrics.load > 8) {
        alerts.push("ç³»ç»Ÿè´Ÿè½½è¿‡é«˜: " + metrics.load);
        severity = "ä¸¥é‡";
    }
    
    return {
        severity: severity,
        alerts: alerts,
        summary: alerts.length > 0 ? alerts.join("; ") : "ç³»ç»ŸçŠ¶æ€æ­£å¸¸"
    };
}

// æµ‹è¯•ä¸åŒçš„ç³»ç»ŸçŠ¶æ€
var test_cases = [
    { name: "æ­£å¸¸çŠ¶æ€", metrics: { cpu: 45, memory: 60, disk: 50, load: 2.5 } },
    { name: "è½»å¾®å‘Šè­¦", metrics: { cpu: 85, memory: 70, disk: 60, load: 3.0 } },
    { name: "ä¸¥é‡å‘Šè­¦", metrics: { cpu: 95, memory: 98, disk: 95, load: 12.5 } }
];

test_cases.forEach(function(test_case) {
    console.log("\n=== " + test_case.name + " ===");
    var result = analyzeSystemHealth(test_case.metrics);
    console.log("å‘Šè­¦çº§åˆ«: " + result.severity);
    console.log("å‘Šè­¦æ‘˜è¦: " + result.summary);
});
```

---

## 6. ğŸ”§ è°ƒè¯•ä¸ä¼˜åŒ–æŠ€å·§


### 6.1 é”™è¯¯è°ƒè¯•æ–¹æ³•


**ğŸ› å¸¸è§é”™è¯¯ç±»å‹**ï¼š

```javascript
// ä¿å­˜ä¸º debug_examples.js
// æ¼”ç¤ºå¸¸è§é”™è¯¯å’Œè°ƒè¯•æ–¹æ³•

console.log("=== é”™è¯¯è°ƒè¯•ç¤ºä¾‹ ===");

// 1. è¯­æ³•é”™è¯¯ç¤ºä¾‹
try {
    // æ•…æ„çš„è¯­æ³•é”™è¯¯ï¼ˆå®é™…è¿è¡Œæ—¶ä¼šæ³¨é‡Šæ‰ï¼‰
    // var data = {name: "test" value: 123};
    console.log("è¯­æ³•æ£€æŸ¥é€šè¿‡");
} catch (e) {
    console.log("è¯­æ³•é”™è¯¯: " + e.message);
}

// 2. ç±»å‹é”™è¯¯ç¤ºä¾‹
try {
    var undefined_var;
    console.log("å°è¯•è®¿é—®æœªå®šä¹‰å˜é‡çš„å±æ€§: " + undefined_var.property);
} catch (e) {
    console.log("ç±»å‹é”™è¯¯: " + e.message);
}

// 3. JSONè§£æé”™è¯¯ç¤ºä¾‹
try {
    var bad_json = '{"name": "test", "value": }';
    JSON.parse(bad_json);
} catch (e) {
    console.log("JSONè§£æé”™è¯¯: " + e.message);
}

// 4. æ­£ç¡®çš„é”™è¯¯å¤„ç†æ–¹å¼
function safeJsonParse(jsonString) {
    try {
        return JSON.parse(jsonString);
    } catch (e) {
        console.log("JSONè§£æå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼");
        return { error: "è§£æå¤±è´¥", message: e.message };
    }
}

var test_data = '{"status": "ok"}';
var result = safeJsonParse(test_data);
console.log("å®‰å…¨è§£æç»“æœ: " + JSON.stringify(result));
```

**ğŸ” è°ƒè¯•æŠ€å·§**ï¼š
```bash
# ä½¿ç”¨debugæ¨¡å¼æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
zabbix_js -l debug debug_examples.js

# è®¾ç½®è¾ƒçŸ­çš„è¶…æ—¶æ—¶é—´æµ‹è¯•æ€§èƒ½
zabbix_js -t 5 debug_examples.js
```

### 6.2 æ€§èƒ½ä¼˜åŒ–æŠ€å·§


**âš¡ æ€§èƒ½æµ‹è¯•è„šæœ¬**ï¼š
```javascript
// ä¿å­˜ä¸º performance_test.js
// æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–ç¤ºä¾‹

console.log("=== æ€§èƒ½æµ‹è¯•å¼€å§‹ ===");
var start_time = new Date().getTime();

// æµ‹è¯•å¾ªç¯æ€§èƒ½
function testLoop(size) {
    var loop_start = new Date().getTime();
    
    for (var i = 0; i < size; i++) {
        // æ¨¡æ‹Ÿä¸€äº›è®¡ç®—
        var result = Math.sqrt(i) * Math.random();
    }
    
    var loop_end = new Date().getTime();
    console.log("å¾ªç¯ " + size + " æ¬¡è€—æ—¶: " + (loop_end - loop_start) + "ms");
}

// æµ‹è¯•ä¸åŒè§„æ¨¡çš„æ€§èƒ½
testLoop(10000);
testLoop(100000);
testLoop(1000000);

// æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†æ€§èƒ½
function testStringProcessing() {
    var string_start = new Date().getTime();
    
    var large_string = "";
    for (var i = 0; i < 10000; i++) {
        large_string += "test string " + i + " ";
    }
    
    // å­—ç¬¦ä¸²åˆ†å‰²å’Œå¤„ç†
    var words = large_string.split(" ");
    var filtered = [];
    for (var j = 0; j < words.length; j++) {
        if (words[j].length > 5) {
            filtered.push(words[j]);
        }
    }
    
    var string_end = new Date().getTime();
    console.log("å­—ç¬¦ä¸²å¤„ç†è€—æ—¶: " + (string_end - string_start) + "ms");
    console.log("å¤„ç†åçš„å•è¯æ•°é‡: " + filtered.length);
}

testStringProcessing();

var end_time = new Date().getTime();
console.log("=== æ€»è€—æ—¶: " + (end_time - start_time) + "ms ===");
```

### 6.3 è„šæœ¬ä¼˜åŒ–å»ºè®®


> **ğŸ’¡ ä¼˜åŒ–è¦ç‚¹**
> 
> **1. é¿å…ä¸å¿…è¦çš„å¾ªç¯**
> - ä½¿ç”¨åˆé€‚çš„ç®—æ³•å¤æ‚åº¦
> - èƒ½ç”¨å†…ç½®å‡½æ•°å°±ä¸è¦è‡ªå·±å†™å¾ªç¯
> 
> **2. åˆç†å¤„ç†å­—ç¬¦ä¸²**
> - å¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨æ•°ç»„joinæ–¹æ³•
> - é¿å…é¢‘ç¹çš„å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œ
> 
> **3. é”™è¯¯å¤„ç†è¦åˆ°ä½**
> - æ‰€æœ‰å¯èƒ½å‡ºé”™çš„åœ°æ–¹éƒ½è¦try-catch
> - æä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯
> 
> **4. è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´**
> - ç®€å•è„šæœ¬ï¼š5-10ç§’
> - å¤æ‚è„šæœ¬ï¼š30-60ç§’

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ¯ zabbix_jsçš„æœ¬è´¨ï¼šJavaScriptè„šæœ¬æµ‹è¯•å’Œè°ƒè¯•å·¥å…·
ğŸ¯ ä¸»è¦ç”¨é€”ï¼šé¢„å¤„ç†è„šæœ¬ã€Webhookè„šæœ¬ã€åª’ä»‹ç±»å‹è„šæœ¬æµ‹è¯•
ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿ï¼šæå‰å‘ç°é—®é¢˜ï¼Œé¿å…çº¿ä¸Šæ•…éšœ
ğŸ¯ åŸºæœ¬è¯­æ³•ï¼šzabbix_js [é€‰é¡¹] [è„šæœ¬æ–‡ä»¶]
```

### 7.2 é‡è¦å‚æ•°è®°å¿†


| å‚æ•° | **è®°å¿†å£è¯€** | **å®é™…å«ä¹‰** |
|------|-------------|-------------|
| `-s` | **ç›´æ¥æ‰§è¡Œ(String)** | `æ‰§è¡ŒJavaScriptä»£ç å­—ç¬¦ä¸²` |
| `-p` | **ä¼ é€’å‚æ•°(Parameter)** | `æ¨¡æ‹ŸZabbixä¼ å…¥çš„å‚æ•°` |
| `-l` | **æ—¥å¿—çº§åˆ«(Log)** | `æ§åˆ¶è¾“å‡ºè¯¦ç»†ç¨‹åº¦` |
| `-t` | **æ‰§è¡Œæ—¶é—´(Time)** | `è®¾ç½®è„šæœ¬è¶…æ—¶æ—¶é—´` |

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ç›‘æ§è¿ç»´åœºæ™¯**ï¼š
- **æ•°æ®å¤„ç†**ï¼šç›‘æ§æ•°æ®æ ¼å¼è½¬æ¢å’Œæ¸…æ´—
- **å‘Šè­¦é€šçŸ¥**ï¼šè‡ªå®šä¹‰å‘Šè­¦æ¶ˆæ¯å’Œå‘é€æ–¹å¼  
- **é›†æˆå¯¹æ¥**ï¼šä¸å¤–éƒ¨ç³»ç»Ÿçš„APIå¯¹æ¥æµ‹è¯•
- **é€»è¾‘éªŒè¯**ï¼šå¤æ‚ç›‘æ§é€»è¾‘çš„æ­£ç¡®æ€§éªŒè¯

**ğŸ”§ å¼€å‘è°ƒè¯•åœºæ™¯**ï¼š
- **å¿«é€Ÿæµ‹è¯•**ï¼šä¸ç”¨éƒ¨ç½²åˆ°Zabbixå°±èƒ½æµ‹è¯•è„šæœ¬
- **é”™è¯¯å®šä½**ï¼šæ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å¸®åŠ©å¿«é€Ÿå®šä½é—®é¢˜
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæµ‹è¯•è„šæœ¬æ‰§è¡Œæ—¶é—´ï¼Œä¼˜åŒ–æ€§èƒ½
- **è¯­æ³•éªŒè¯**ï¼šç¡®ä¿JavaScriptè¯­æ³•æ­£ç¡®

### 7.4 ä½¿ç”¨æ³¨æ„äº‹é¡¹


> **âš ï¸ é‡è¦æé†’**
> 
> **1. å‚æ•°ä¼ é€’**ï¼šä½¿ç”¨-på‚æ•°æ¨¡æ‹ŸçœŸå®ç¯å¢ƒä¸­çš„æ•°æ®
> 
> **2. è¶…æ—¶è®¾ç½®**ï¼šæ ¹æ®è„šæœ¬å¤æ‚åº¦è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
> 
> **3. é”™è¯¯å¤„ç†**ï¼šç”Ÿäº§ç¯å¢ƒçš„è„šæœ¬å¿…é¡»æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†
> 
> **4. æ€§èƒ½è€ƒè™‘**ï¼šç›‘æ§è„šæœ¬è¦æ±‚é«˜æ•ˆï¼Œé¿å…è€—æ—¶æ“ä½œ

### 7.5 å­¦ä¹ è¿›é˜¶è·¯å¾„


```
åŸºç¡€é˜¶æ®µï¼šæŒæ¡åŸºæœ¬å‚æ•°ä½¿ç”¨
   â†“
å®è·µé˜¶æ®µï¼šç¼–å†™å¸¸ç”¨çš„å¤„ç†è„šæœ¬
   â†“  
ä¼˜åŒ–é˜¶æ®µï¼šæ€§èƒ½è°ƒä¼˜å’Œé”™è¯¯å¤„ç†
   â†“
é«˜çº§é˜¶æ®µï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘å®ç°
```

**ğŸ“ æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- **zabbix_jsæµ‹è¯•å¿«ï¼Œ-sç›´æ¥æŠŠç è·‘**
- **-på‚æ•°ä¼ è¿›æ¥ï¼Œ-læ—¥å¿—çœ‹æ˜ç™½**  
- **-tè¶…æ—¶è¦è®¾å¥½ï¼Œè°ƒè¯•ä¼˜åŒ–å°‘ä¸äº†**
- **è„šæœ¬æµ‹è¯•å¾ˆé‡è¦ï¼Œä¸Šçº¿ä¹‹å‰å…ˆè·‘è·‘**

---

> **ğŸ“š å­¦ä¹ å»ºè®®**
> 
> 1. **åŠ¨æ‰‹å®è·µ**ï¼šæ¯ä¸ªç¤ºä¾‹éƒ½è¦äº²è‡ªè¿è¡Œä¸€é
> 2. **æ¨¡æ‹Ÿåœºæ™¯**ï¼šç»“åˆå®é™…ç›‘æ§éœ€æ±‚è®¾è®¡æµ‹è¯•åœºæ™¯  
> 3. **é”™è¯¯ä½“éªŒ**ï¼šæ•…æ„åˆ¶é€ é”™è¯¯ï¼Œå­¦ä¹ å¦‚ä½•è°ƒè¯•
> 4. **æ€§èƒ½æ„è¯†**ï¼šå…³æ³¨è„šæœ¬æ‰§è¡Œæ—¶é—´ï¼Œå…»æˆä¼˜åŒ–ä¹ æƒ¯
> 
> **ä¸‹ä¸€æ­¥å­¦ä¹ **ï¼šæŒæ¡äº†zabbix_jsåï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ Zabbixçš„é¢„å¤„ç†åŠŸèƒ½å’ŒWebhooké…ç½®