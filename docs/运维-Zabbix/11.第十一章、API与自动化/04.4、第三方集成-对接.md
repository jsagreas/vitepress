---
title: 4ã€ç¬¬ä¸‰æ–¹é›†æˆ-å¯¹æ¥
---
## ğŸ“š ç›®å½•

1. [ç¬¬ä¸‰æ–¹é›†æˆæ¦‚è¿°](#1-ç¬¬ä¸‰æ–¹é›†æˆæ¦‚è¿°)
2. [Grafanaå¯è§†åŒ–é›†æˆ](#2-Grafanaå¯è§†åŒ–é›†æˆ)
3. [PrometheusæŒ‡æ ‡é›†æˆ](#3-PrometheusæŒ‡æ ‡é›†æˆ)
4. [ELKæ—¥å¿—ç³»ç»Ÿé›†æˆ](#4-ELKæ—¥å¿—ç³»ç»Ÿé›†æˆ)
5. [ITSMå·¥å•ç³»ç»Ÿé›†æˆ](#5-ITSMå·¥å•ç³»ç»Ÿé›†æˆ)
6. [CI/CDæµæ°´çº¿é›†æˆ](#6-CICDæµæ°´çº¿é›†æˆ)
7. [äº‘å¹³å°ç›‘æ§é›†æˆ](#7-äº‘å¹³å°ç›‘æ§é›†æˆ)
8. [å®¹å™¨ç›‘æ§é›†æˆ](#8-å®¹å™¨ç›‘æ§é›†æˆ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ç¬¬ä¸‰æ–¹é›†æˆæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ç¬¬ä¸‰æ–¹é›†æˆ


**é€šä¿—è§£é‡Š**ï¼šç¬¬ä¸‰æ–¹é›†æˆå°±æ˜¯è®© Zabbix å’Œå…¶ä»–ç›‘æ§å·¥å…·ã€å¹³å°ç³»ç»Ÿ"æ¡æ‰‹åˆä½œ"ï¼Œå®ç°æ•°æ®å…±äº«å’ŒåŠŸèƒ½äº’è¡¥ã€‚

```
æƒ³è±¡ä¸€ä¸‹ä¼ä¸šçš„ç›‘æ§ä½“ç³»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Zabbix    â”‚â—„â”€â”€â–ºâ”‚   Grafana   â”‚â—„â”€â”€â–ºâ”‚ Prometheus  â”‚
â”‚  åŸºç¡€ç›‘æ§    â”‚    â”‚  æ•°æ®å±•ç¤º    â”‚    â”‚  æŒ‡æ ‡æ”¶é›†    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                   â–²                   â–²
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ELK      â”‚    â”‚    ITSM     â”‚    â”‚   CI/CD     â”‚
â”‚  æ—¥å¿—åˆ†æ    â”‚    â”‚  å·¥å•ç³»ç»Ÿ    â”‚    â”‚  è‡ªåŠ¨éƒ¨ç½²    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ä¸ªç³»ç»Ÿå„å¸å…¶èŒï¼Œåˆç›¸äº’é…åˆ
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç¬¬ä¸‰æ–¹é›†æˆ


**ğŸ¯ æ ¸å¿ƒåŸå› **ï¼š
- **æ‰¬é•¿é¿çŸ­**ï¼šæ¯ä¸ªå·¥å…·éƒ½æœ‰è‡ªå·±çš„å¼ºé¡¹ï¼Œç»„åˆä½¿ç”¨æ•ˆæœæ›´å¥½
- **æ•°æ®æµé€š**ï¼šé¿å…ä¿¡æ¯å­¤å²›ï¼Œè®©æ•°æ®åœ¨ä¸åŒç³»ç»Ÿé—´æµåŠ¨
- **ç»Ÿä¸€ç®¡ç†**ï¼šåœ¨ä¸€ä¸ªç•Œé¢æŸ¥çœ‹æ¥è‡ªå¤šä¸ªç³»ç»Ÿçš„ä¿¡æ¯
- **è‡ªåŠ¨åŒ–å“åº”**ï¼šé—®é¢˜å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘ç›¸åº”çš„å¤„ç†æµç¨‹

**ğŸ“Š é›†æˆä»·å€¼å¯¹æ¯”**ï¼š

| é›†æˆæ–¹å¼ | **ä¼˜åŠ¿** | **é€‚ç”¨åœºæ™¯** | **å¤æ‚åº¦** |
|---------|---------|-------------|-----------|
| **APIæ¥å£** | `çµæ´»æ€§é«˜ï¼Œå®æ—¶æ€§å¥½` | `éœ€è¦åŒå‘æ•°æ®äº¤æ¢` | `â­â­â­` |
| **æ•°æ®å¯¼å‡º** | `ç®€å•å¯é ï¼Œå…¼å®¹æ€§å¥½` | `å•å‘æ•°æ®æµè½¬` | `â­` |
| **æ’ä»¶æ‰©å±•** | `åŠŸèƒ½å¼ºå¤§ï¼Œæ·±åº¦é›†æˆ` | `ç‰¹å®šåŠŸèƒ½å¢å¼º` | `â­â­â­â­` |
| **æ¶ˆæ¯é˜Ÿåˆ—** | `å¼‚æ­¥å¤„ç†ï¼Œé«˜å¹¶å‘` | `å¤§æ•°æ®é‡å¤„ç†` | `â­â­â­â­â­` |

---

## 2. ğŸ“Š Grafanaå¯è§†åŒ–é›†æˆ


### 2.1 Grafanaæ˜¯ä»€ä¹ˆ


**ç®€å•ç†è§£**ï¼šGrafana å°±åƒæ˜¯ä¸€ä¸ªè¶…çº§å¼ºå¤§çš„"æ•°æ®ä»ªè¡¨ç›˜"ï¼Œä¸“é—¨ç”¨æ¥æŠŠå„ç§æ•°æ®å˜æˆæ¼‚äº®çš„å›¾è¡¨ã€‚

```
Zabbix vs Grafana çš„å…³ç³»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Zabbix      â”‚  æ•°æ®   â”‚     Grafana     â”‚
â”‚                 â”‚ â”€â”€â”€â”€â”€â–º â”‚                 â”‚
â”‚ ğŸ”¸ æ”¶é›†æ•°æ®      â”‚         â”‚ ğŸ”¸ å±•ç¤ºæ•°æ®      â”‚
â”‚ ğŸ”¸ å­˜å‚¨æ•°æ®      â”‚         â”‚ ğŸ”¸ ç¾åŒ–å›¾è¡¨      â”‚
â”‚ ğŸ”¸ å‘Šè­¦å¤„ç†      â”‚         â”‚ ğŸ”¸ å¤šæ•°æ®æº      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é›†æˆæ­¥éª¤è¯¦è§£


**ğŸ”§ Step 1: å®‰è£… Zabbix æ•°æ®æºæ’ä»¶**

```bash
# åœ¨ Grafana æœåŠ¡å™¨ä¸Šå®‰è£…æ’ä»¶
grafana-cli plugins install alexanderzobnin-zabbix-app

# é‡å¯ Grafana æœåŠ¡
systemctl restart grafana-server
```

**ğŸ’¡ Step 2: é…ç½®æ•°æ®æºè¿æ¥**

```javascript
// Grafana æ•°æ®æºé…ç½®ç¤ºä¾‹
{
  "name": "Zabbix-Production",
  "type": "alexanderzobnin-zabbix-datasource",
  "url": "http://your-zabbix-server/zabbix/api_jsonrpc.php",
  "access": "proxy",
  "basicAuth": false,
  "jsonData": {
    "username": "grafana-user",
    "trend": true,
    "trendsFrom": "7d",
    "trendsRange": "4h"
  }
}
```

**ğŸ“ˆ Step 3: åˆ›å»ºå®ç”¨çš„ä»ªè¡¨ç›˜**

```
æœåŠ¡å™¨ç›‘æ§ä»ªè¡¨ç›˜å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CPUä½¿ç”¨ç‡      â”‚   å†…å­˜ä½¿ç”¨ç‡      â”‚
â”‚   ğŸ“ˆ å®æ—¶æ›²çº¿    â”‚   ğŸ“Š å®æ—¶æ›²çº¿    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç£ç›˜IO        â”‚   ç½‘ç»œæµé‡       â”‚
â”‚   ğŸ“‰ è¯»å†™åˆ†ç¦»    â”‚   ğŸ“Š ä¸Šä¸‹è¡Œåˆ†ç¦»   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         æœåŠ¡å™¨åˆ—è¡¨çŠ¶æ€è¡¨æ ¼           â”‚
â”‚    ğŸŸ¢ æ­£å¸¸  ğŸŸ¡ è­¦å‘Š  ğŸ”´ æ•…éšœ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 é«˜çº§åŠŸèƒ½åº”ç”¨


**ğŸ¨ å‘Šè­¦é¢æ¿è®¾ç½®**

| å‘Šè­¦çº§åˆ« | **é¢œè‰²æ ‡è¯†** | **é˜ˆå€¼è®¾ç½®** | **æ˜¾ç¤ºæ•ˆæœ** |
|---------|-------------|-------------|-------------|
| **æ­£å¸¸** | `ğŸŸ¢ ç»¿è‰²` | `< 70%` | `æ•°å€¼æ˜¾ç¤º` |
| **è­¦å‘Š** | `ğŸŸ¡ é»„è‰²` | `70% - 85%` | `é—ªçƒæé†’` |
| **ä¸¥é‡** | `ğŸ”´ çº¢è‰²` | `> 85%` | `é«˜äº®æ˜¾ç¤º` |

---

## 3. ğŸ“¡ PrometheusæŒ‡æ ‡é›†æˆ


### 3.1 Prometheusç®€ä»‹


**é€šä¿—è¯´æ˜**ï¼šPrometheus å°±åƒä¸€ä¸ª"æ•°æ®æ”¶é›†ä¸“å®¶"ï¼Œç‰¹åˆ«æ“…é•¿æ”¶é›†åº”ç”¨ç¨‹åºå†…éƒ¨çš„å„ç§æ€§èƒ½æŒ‡æ ‡ã€‚

```
Zabbix + Prometheus åä½œæ¨¡å¼ï¼š
        åº”ç”¨æœåŠ¡å™¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Javaåº”ç”¨           â”‚
â”‚  â”œâ”€ JVMæŒ‡æ ‡ â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Prometheus
â”‚  â”œâ”€ ä¸šåŠ¡æŒ‡æ ‡ â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Prometheus  
â”‚  â””â”€ è‡ªå®šä¹‰æŒ‡æ ‡ â”€â”€â”€â”€â”€â”¼â”€â”€â–º Prometheus
â”‚                     â”‚
â”‚  ç³»ç»ŸæŒ‡æ ‡           â”‚
â”‚  â”œâ”€ CPU/å†…å­˜ â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Zabbix
â”‚  â”œâ”€ ç£ç›˜/ç½‘ç»œ â”€â”€â”€â”€â”€â”¼â”€â”€â–º Zabbix
â”‚  â””â”€ è¿›ç¨‹çŠ¶æ€ â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Zabbix
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é›†æˆé…ç½®æ–¹æ³•


**ğŸ”§ æ–¹æ³•ä¸€ï¼šPrometheus æ¨é€åˆ° Zabbix**

```yaml
# prometheus.yml é…ç½®
remote_write:
  - url: "http://zabbix-server:10051/zabbix"
    remote_timeout: 30s
    queue_config:
      max_shards: 200
      max_samples_per_send: 1000
```

**ğŸ”„ æ–¹æ³•äºŒï¼šZabbix æ‹‰å– Prometheus æŒ‡æ ‡**

```bash
# Zabbix ç›‘æ§é¡¹é…ç½®
# é”®å€¼ï¼šprometheus.metric[node_cpu_seconds_total]
# ç±»å‹ï¼šHTTP agent
# URLï¼šhttp://node-exporter:9100/metrics
# é¢„å¤„ç†ï¼šPrometheusæ¨¡å¼
```

**ğŸ“Š å¸¸ç”¨æŒ‡æ ‡æ˜ å°„**

| PrometheusæŒ‡æ ‡ | **Zabbixç›‘æ§é¡¹** | **è¯´æ˜** |
|---------------|-----------------|---------|
| `node_cpu_seconds_total` | `system.cpu.util` | `CPUä½¿ç”¨ç‡` |
| `node_memory_MemAvailable_bytes` | `vm.memory.available` | `å¯ç”¨å†…å­˜` |
| `node_filesystem_free_bytes` | `vfs.fs.free` | `ç£ç›˜ç©ºé—´` |

---

## 4. ğŸ“‹ ELKæ—¥å¿—ç³»ç»Ÿé›†æˆ


### 4.1 ELKç³»ç»Ÿç®€ä»‹


**ç®€å•ç†è§£**ï¼šELK æ˜¯å¤„ç†æ—¥å¿—çš„"ä¸‰å‰‘å®¢"ï¼š
- **E**lasticsearchï¼šå­˜å‚¨å’Œæœç´¢æ—¥å¿—
- **L**ogstashï¼šæ”¶é›†å’Œå¤„ç†æ—¥å¿—  
- **K**ibanaï¼šå±•ç¤ºå’Œåˆ†ææ—¥å¿—

```
ELK + Zabbix æ—¥å¿—ç›‘æ§æµç¨‹ï¼š
åº”ç”¨æœåŠ¡å™¨ â”€â”€â–º Logstash â”€â”€â–º Elasticsearch â”€â”€â–º Kibana
     â”‚                                          â–²
     â”‚                                          â”‚
     â–¼                                          â”‚
   Zabbix â”€â”€â”€â”€ å‘Šè­¦è§¦å‘ â”€â”€â”€â”€â–º æ—¥å¿—åˆ†æè¯·æ±‚ â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 é›†æˆå®ç°æ–¹æ¡ˆ


**ğŸ”§ æ–¹æ¡ˆä¸€ï¼šé€šè¿‡ Logstash æ’ä»¶**

```ruby
# logstash.conf é…ç½®
input {
  beats {
    port => 5044
  }
}

filter {
  if [fields][service] == "application" {
    if "ERROR" in [message] {
      # å‘ Zabbix å‘é€å‘Šè­¦
      http {
        url => "http://zabbix-server/zabbix/api_jsonrpc.php"
        http_method => "post"
        headers => {
          "Content-Type" => "application/json"
        }
        body => '{"jsonrpc":"2.0","method":"item.get","params":{"output":"extend","hostids":"10001"},"id":1}'
      }
    }
  }
}
```

**ğŸ“Š æ–¹æ¡ˆäºŒï¼šé€šè¿‡ Zabbix Webåœºæ™¯ç›‘æ§**

```bash
# åˆ›å»º Web åœºæ™¯ç›‘æ§ Elasticsearch å¥åº·çŠ¶æ€
# URL: http://elasticsearch:9200/_cluster/health
# æ£€æŸ¥å†…å®¹: "status":"green"
# æ›´æ–°é—´éš”: 60ç§’
```

### 4.3 å®ç”¨ç›‘æ§æŒ‡æ ‡


**ğŸ¯ å…³é”®æ—¥å¿—æŒ‡æ ‡**

| ç›‘æ§ç»´åº¦ | **å…·ä½“æŒ‡æ ‡** | **å‘Šè­¦é˜ˆå€¼** | **å¤„ç†å»ºè®®** |
|---------|-------------|-------------|-------------|
| **é”™è¯¯ç‡** | `ERRORæ—¥å¿—/æ€»æ—¥å¿—` | `> 5%` | `æ£€æŸ¥åº”ç”¨çŠ¶æ€` |
| **å“åº”æ—¶é—´** | `æ¥å£å¹³å‡å“åº”æ—¶é—´` | `> 2ç§’` | `ä¼˜åŒ–æ€§èƒ½` |
| **å¹¶å‘æ•°** | `åŒæ—¶å¤„ç†è¯·æ±‚æ•°` | `> 1000` | `æ‰©å®¹æœåŠ¡å™¨` |

---

## 5. ğŸ« ITSMå·¥å•ç³»ç»Ÿé›†æˆ


### 5.1 ITSMç³»ç»Ÿçš„ä½œç”¨


**é€šä¿—è§£é‡Š**ï¼šITSMï¼ˆITæœåŠ¡ç®¡ç†ï¼‰å°±åƒä¼ä¸šçš„"å”®åæœåŠ¡å°"ï¼Œè´Ÿè´£å¤„ç†å„ç§ITé—®é¢˜å’ŒæœåŠ¡è¯·æ±‚ã€‚

```
Zabbixå‘Šè­¦ â†’ ITSMå·¥å•å¤„ç†æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Zabbixå‘ç°  â”‚    â”‚  è‡ªåŠ¨åˆ›å»º    â”‚    â”‚  å·¥ç¨‹å¸ˆå¤„ç†  â”‚
â”‚  ç³»ç»Ÿå¼‚å¸¸    â”‚â”€â”€â”€â–ºâ”‚  å·¥å•è®°å½•    â”‚â”€â”€â”€â–ºâ”‚  è·Ÿè¸ªè§£å†³    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
   ğŸ“§ é‚®ä»¶é€šçŸ¥         ğŸ“‹ å·¥å•ç¼–å·         âœ… é—®é¢˜è§£å†³
```

### 5.2 å¸¸è§ITSMç³»ç»Ÿé›†æˆ


**ğŸ”§ ServiceNow é›†æˆç¤ºä¾‹**

```javascript
// Zabbix åª’ä½“ç±»å‹è„šæœ¬
var req = new HttpRequest();
req.addHeader('Content-Type: application/json');
req.addHeader('Authorization: Basic ' + btoa(username + ':' + password));

var data = {
    "short_description": "Zabbix Alert: " + subject,
    "description": message,
    "urgency": "2",
    "impact": "2",
    "category": "Software"
};

var response = req.post('https://your-instance.servicenow.com/api/now/table/incident', 
                       JSON.stringify(data));
```

**ğŸ“‹ å·¥å•ä¿¡æ¯æ˜ å°„**

| Zabbixå­—æ®µ | **ITSMå­—æ®µ** | **æ˜ å°„è¯´æ˜** |
|-----------|-------------|-------------|
| `{ALERT.SUBJECT}` | `ç®€è¦æè¿°` | `å‘Šè­¦æ ‡é¢˜` |
| `{ALERT.MESSAGE}` | `è¯¦ç»†æè¿°` | `å‘Šè­¦è¯¦æƒ…` |
| `{EVENT.SEVERITY}` | `ä¼˜å…ˆçº§` | `ä¸¥é‡ç¨‹åº¦` |
| `{HOST.NAME}` | `é…ç½®é¡¹` | `å—å½±å“ä¸»æœº` |

### 5.3 å·¥å•å¤„ç†è‡ªåŠ¨åŒ–


**ğŸ”„ è‡ªåŠ¨åŒ–å·¥ä½œæµ**

```
å‘Šè­¦çº§åˆ«åˆ¤æ–­ï¼š
â”œâ”€ ğŸŸ¢ ä¿¡æ¯çº§åˆ« â†’ è®°å½•æ—¥å¿—ï¼Œä¸åˆ›å»ºå·¥å•
â”œâ”€ ğŸŸ¡ è­¦å‘Šçº§åˆ« â†’ åˆ›å»ºä½ä¼˜å…ˆçº§å·¥å•
â”œâ”€ ğŸŸ  ä¸€èˆ¬çº§åˆ« â†’ åˆ›å»ºä¸­ä¼˜å…ˆçº§å·¥å•ï¼Œé€šçŸ¥ç›¸å…³äººå‘˜
â”œâ”€ ğŸ”´ ä¸¥é‡çº§åˆ« â†’ åˆ›å»ºé«˜ä¼˜å…ˆçº§å·¥å•ï¼Œç«‹å³é€šçŸ¥
â””â”€ ğŸ’¥ ç¾éš¾çº§åˆ« â†’ åˆ›å»ºç´§æ€¥å·¥å•ï¼Œé€šçŸ¥æ‰€æœ‰äººå‘˜
```

---

## 6. ğŸš€ CI/CDæµæ°´çº¿é›†æˆ


### 6.1 CI/CDé›†æˆçš„æ„ä¹‰


**ç®€å•ç†è§£**ï¼šCI/CD å°±åƒè½¯ä»¶çš„"è‡ªåŠ¨åŒ–å·¥å‚æµæ°´çº¿"ï¼Œä»£ç å†™å¥½åè‡ªåŠ¨è¿›è¡Œæµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ã€‚

```
CI/CD + Zabbix ç›‘æ§é›†æˆï¼š
å¼€å‘æäº¤ä»£ç  â”€â”€â–º è‡ªåŠ¨æ„å»º â”€â”€â–º è‡ªåŠ¨æµ‹è¯• â”€â”€â–º è‡ªåŠ¨éƒ¨ç½²
     â”‚              â”‚            â”‚            â”‚
     â–¼              â–¼            â–¼            â–¼
   ä»£ç è´¨é‡        æ„å»ºçŠ¶æ€      æµ‹è¯•ç»“æœ      éƒ¨ç½²çŠ¶æ€
     â”‚              â”‚            â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    Zabbixç›‘æ§
```

### 6.2 Jenkinsé›†æˆç¤ºä¾‹


**ğŸ”§ Jenkins Pipeline é›†æˆ**

```groovy
pipeline {
    agent any
    
    stages {
        stage('Build') {
            steps {
                sh 'mvn clean package'
            }
            post {
                failure {
                    // æ„å»ºå¤±è´¥æ—¶é€šçŸ¥ Zabbix
                    sh '''
                        curl -X POST http://zabbix-server:10051 \
                        -d '{"request":"sender data","data":[{
                            "host":"jenkins-server",
                            "key":"build.status",
                            "value":"0"
                        }]}'
                    '''
                }
                success {
                    // æ„å»ºæˆåŠŸæ—¶é€šçŸ¥ Zabbix
                    sh '''
                        curl -X POST http://zabbix-server:10051 \
                        -d '{"request":"sender data","data":[{
                            "host":"jenkins-server",
                            "key":"build.status",
                            "value":"1"
                        }]}'
                    '''
                }
            }
        }
        
        stage('Deploy') {
            steps {
                sh 'kubectl apply -f deployment.yaml'
                // éƒ¨ç½²åç­‰å¾…ç›‘æ§æŒ‡æ ‡ç¨³å®š
                sleep 60
                // æ£€æŸ¥ Zabbix ç›‘æ§æŒ‡æ ‡
                script {
                    def response = sh(
                        script: '''
                            curl -s -X POST http://zabbix-server/zabbix/api_jsonrpc.php \
                            -H "Content-Type: application/json" \
                            -d '{"jsonrpc":"2.0","method":"item.get","params":{"output":"lastvalue","hostids":"10001","search":{"key_":"system.cpu.util"}},"id":1}'
                        ''',
                        returnStdout: true
                    )
                    
                    if (response.contains('"result":[]')) {
                        error("éƒ¨ç½²åç›‘æ§æ•°æ®å¼‚å¸¸")
                    }
                }
            }
        }
    }
}
```

### 6.3 GitLab CI é›†æˆ


**ğŸ“Š ç›‘æ§æŒ‡æ ‡æ”¶é›†**

| é˜¶æ®µ | **ç›‘æ§æŒ‡æ ‡** | **æ­£å¸¸èŒƒå›´** | **å¼‚å¸¸å¤„ç†** |
|------|-------------|-------------|-------------|
| **æ„å»º** | `æ„å»ºæ—¶é—´` | `< 10åˆ†é’Ÿ` | `ä¼˜åŒ–æ„å»ºè„šæœ¬` |
| **æµ‹è¯•** | `æµ‹è¯•é€šè¿‡ç‡` | `> 95%` | `ä¿®å¤å¤±è´¥ç”¨ä¾‹` |
| **éƒ¨ç½²** | `éƒ¨ç½²æˆåŠŸç‡` | `> 98%` | `æ£€æŸ¥ç¯å¢ƒé…ç½®` |
| **è¿è¡Œ** | `æœåŠ¡å¯ç”¨æ€§` | `> 99.9%` | `å›æ»šåˆ°ä¸Šç‰ˆæœ¬` |

---

## 7. â˜ï¸ äº‘å¹³å°ç›‘æ§é›†æˆ


### 7.1 ä¸»æµäº‘å¹³å°é›†æˆ


**ğŸŒ AWS CloudWatch é›†æˆ**

```python
# AWS CloudWatch æŒ‡æ ‡åŒæ­¥è„šæœ¬
import boto3
import requests

def sync_cloudwatch_to_zabbix():
    cloudwatch = boto3.client('cloudwatch')
    
    # è·å– EC2 å®ä¾‹ CPU ä½¿ç”¨ç‡
    response = cloudwatch.get_metric_statistics(
        Namespace='AWS/EC2',
        MetricName='CPUUtilization',
        Dimensions=[{'Name': 'InstanceId', 'Value': 'i-1234567890abcdef0'}],
        StartTime=datetime.utcnow() - timedelta(minutes=5),
        EndTime=datetime.utcnow(),
        Period=300,
        Statistics=['Average']
    )
    
    # å‘é€åˆ° Zabbix
    for point in response['Datapoints']:
        zabbix_data = {
            "request": "sender data",
            "data": [{
                "host": "aws-ec2-instance",
                "key": "aws.ec2.cpu.utilization",
                "value": point['Average']
            }]
        }
        
        requests.post('http://zabbix-server:10051', json=zabbix_data)
```

**ğŸ“Š äº‘å¹³å°ç›‘æ§å¯¹æ¯”**

| äº‘å¹³å° | **åŸç”Ÿç›‘æ§** | **Zabbixé›†æˆæ–¹å¼** | **æ¨èæŒ‡æ•°** |
|-------|-------------|-------------------|-------------|
| **AWS** | `CloudWatch` | `API + Lambdaå‡½æ•°` | `â­â­â­â­â­` |
| **Azure** | `Azure Monitor` | `REST APIè°ƒç”¨` | `â­â­â­â­` |
| **é˜¿é‡Œäº‘** | `äº‘ç›‘æ§` | `SDK + å®šæ—¶ä»»åŠ¡` | `â­â­â­â­` |
| **è…¾è®¯äº‘** | `äº‘ç›‘æ§` | `API + äº‘å‡½æ•°` | `â­â­â­` |

### 7.2 æ··åˆäº‘ç›‘æ§æ¶æ„


```
æ··åˆäº‘ç›‘æ§æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç»Ÿä¸€ç›‘æ§ä¸­å¿ƒ                          â”‚
â”‚                     Zabbix                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                 â”‚                     
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      
        â”‚      AWSäº‘å¹³å°      â”‚     â”‚   æœ¬åœ°æ•°æ®ä¸­å¿ƒ   â”‚      
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      
        â”‚ â”‚   CloudWatch    â”‚ â”‚     â”‚ â”‚ ç‰©ç†æœåŠ¡å™¨   â”‚ â”‚      
        â”‚ â”‚   æŒ‡æ ‡æ•°æ®      â”‚ â”‚     â”‚ â”‚ è™šæ‹ŸåŒ–å¹³å°   â”‚ â”‚      
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      
```

---

## 8. ğŸ³ å®¹å™¨ç›‘æ§é›†æˆ


### 8.1 Dockerå®¹å™¨ç›‘æ§


**ğŸ“¦ å®¹å™¨ç›‘æ§çš„ç‰¹ç‚¹**ï¼š
- å®¹å™¨ç”Ÿå‘½å‘¨æœŸçŸ­ï¼ŒåŠ¨æ€åˆ›å»ºé”€æ¯
- éœ€è¦ç›‘æ§å®¹å™¨å†…åº”ç”¨å’Œå®¹å™¨æœ¬èº«
- èµ„æºé™åˆ¶å’Œä½¿ç”¨æƒ…å†µéœ€è¦é‡ç‚¹å…³æ³¨

```bash
# Docker å®¹å™¨ç›‘æ§é…ç½®
# ä½¿ç”¨ Zabbix Agent 2 çš„ Docker æ’ä»¶

# zabbix_agent2.conf æ·»åŠ é…ç½®
Plugins.Docker.Endpoint=unix:///var/run/docker.sock

# ç›‘æ§é¡¹ç¤ºä¾‹
docker.container_info[container_name]           # å®¹å™¨åŸºæœ¬ä¿¡æ¯
docker.container_stats[container_name,cpu]      # CPUä½¿ç”¨ç‡
docker.container_stats[container_name,memory]   # å†…å­˜ä½¿ç”¨é‡
docker.container_stats[container_name,net]      # ç½‘ç»œæµé‡
```

### 8.2 Kubernetesé›†æˆ


**âš™ï¸ K8sé›†æˆæ¶æ„**

```
Kubernetes + Zabbix ç›‘æ§æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Kubernetes é›†ç¾¤                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Master Node â”‚  â”‚ Worker Node â”‚  â”‚ Worker Node â”‚     â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚
â”‚  â”‚ â”‚ Zabbix  â”‚ â”‚  â”‚ â”‚ Zabbix  â”‚ â”‚  â”‚ â”‚ Zabbix  â”‚ â”‚     â”‚
â”‚  â”‚ â”‚ Agent   â”‚ â”‚  â”‚ â”‚ Agent   â”‚ â”‚  â”‚ â”‚ Agent   â”‚ â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Zabbix Server  â”‚
                   â”‚   ç›‘æ§ä¸­å¿ƒ      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ K8s ç›‘æ§é…ç½®**

```yaml
# zabbix-agent-daemonset.yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: zabbix-agent
spec:
  selector:
    matchLabels:
      app: zabbix-agent
  template:
    metadata:
      labels:
        app: zabbix-agent
    spec:
      containers:
      - name: zabbix-agent
        image: zabbix/zabbix-agent2:latest
        env:
        - name: ZBX_SERVER_HOST
          value: "zabbix-server.monitoring.svc.cluster.local"
        - name: ZBX_HOSTNAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        volumeMounts:
        - name: proc
          mountPath: /host/proc
          readOnly: true
        - name: sys
          mountPath: /host/sys
          readOnly: true
        - name: docker-sock
          mountPath: /var/run/docker.sock
          readOnly: true
      volumes:
      - name: proc
        hostPath:
          path: /proc
      - name: sys
        hostPath:
          path: /sys
      - name: docker-sock
        hostPath:
          path: /var/run/docker.sock
```

### 8.3 å®¹å™¨ç›‘æ§å…³é”®æŒ‡æ ‡


**ğŸ“Š å®¹å™¨æ€§èƒ½æŒ‡æ ‡**

| ç›‘æ§ç±»åˆ« | **å…³é”®æŒ‡æ ‡** | **æ­£å¸¸èŒƒå›´** | **å‘Šè­¦é˜ˆå€¼** |
|---------|-------------|-------------|-------------|
| **CPU** | `å®¹å™¨CPUä½¿ç”¨ç‡` | `< 70%` | `> 85%` |
| **å†…å­˜** | `å®¹å™¨å†…å­˜ä½¿ç”¨ç‡` | `< 80%` | `> 90%` |
| **å­˜å‚¨** | `å®¹å™¨ç£ç›˜ä½¿ç”¨ç‡` | `< 80%` | `> 90%` |
| **ç½‘ç»œ** | `å®¹å™¨ç½‘ç»œå»¶è¿Ÿ` | `< 10ms` | `> 50ms` |

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç¬¬ä¸‰æ–¹é›†æˆæœ¬è´¨ï¼šè®©ä¸åŒç›‘æ§å·¥å…·ååŒå·¥ä½œï¼Œå‘æŒ¥å„è‡ªä¼˜åŠ¿
ğŸ”¸ é›†æˆæ–¹å¼é€‰æ‹©ï¼šæ ¹æ®æ•°æ®æµå‘å’Œå®æ—¶æ€§è¦æ±‚é€‰æ‹©åˆé€‚æ–¹æ³•
ğŸ”¸ APIæ¥å£é›†æˆï¼šæœ€çµæ´»çš„é›†æˆæ–¹å¼ï¼Œæ”¯æŒåŒå‘æ•°æ®äº¤æ¢
ğŸ”¸ æ•°æ®æ ¼å¼è½¬æ¢ï¼šä¸åŒç³»ç»Ÿé—´çš„æ•°æ®æ ¼å¼éœ€è¦è¿›è¡Œè½¬æ¢é€‚é…
ğŸ”¸ å‘Šè­¦è”åŠ¨æœºåˆ¶ï¼šå®ç°è·¨ç³»ç»Ÿçš„å‘Šè­¦æµè½¬å’Œå¤„ç†è‡ªåŠ¨åŒ–
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é›†æˆç­–ç•¥é€‰æ‹©**
```
æ•°æ®é‡å° + å®æ—¶æ€§è¦æ±‚é«˜ â†’ APIæ¥å£é›†æˆ
æ•°æ®é‡å¤§ + å¯æ¥å—å»¶è¿Ÿ â†’ æ–‡ä»¶å¯¼å‡ºå¯¼å…¥
åŠŸèƒ½æ‰©å±•éœ€æ±‚ â†’ æ’ä»¶å¼€å‘
ç³»ç»Ÿè§£è€¦éœ€æ±‚ â†’ æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ
```

**ğŸ”¹ å¸¸è§é›†æˆæ¨¡å¼**
```
ç›‘æ§æ•°æ®æµå‘ï¼š
Zabbix â†’ Grafana (æ•°æ®å±•ç¤ºç¾åŒ–)
Prometheus â†’ Zabbix (æŒ‡æ ‡æ•°æ®è¡¥å……)
Zabbix â†’ ITSM (å‘Šè­¦å·¥å•è½¬æ¢)
CI/CD â†’ Zabbix (æ„å»ºéƒ¨ç½²çŠ¶æ€)
```

**ğŸ”¹ é›†æˆæ³¨æ„äº‹é¡¹**
```
å®‰å…¨è®¤è¯ï¼šç¡®ä¿ç³»ç»Ÿé—´é€šä¿¡å®‰å…¨
æ•°æ®ä¸€è‡´æ€§ï¼šé¿å…æ•°æ®ä¸åŒæ­¥é—®é¢˜  
æ€§èƒ½å½±å“ï¼šé›†æˆä¸åº”å½±å“ä¸»ç³»ç»Ÿæ€§èƒ½
æ•…éšœå¤„ç†ï¼šé›†æˆç³»ç»Ÿæ•…éšœçš„åº”æ€¥æ–¹æ¡ˆ
```

### 9.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ¯ åˆå­¦è€…å»ºè®®**ï¼š
- å…ˆä»ç®€å•çš„æ•°æ®å¯¼å‡ºå¼€å§‹ç»ƒä¹ 
- é‡ç‚¹æŒæ¡ Grafana é›†æˆï¼Œæå‡æ•°æ®å±•ç¤ºæ•ˆæœ
- å­¦ä¼šä½¿ç”¨ Zabbix API è¿›è¡ŒåŸºæœ¬çš„æ•°æ®äº¤æ¢
- äº†è§£ä¸»æµäº‘å¹³å°çš„ç›‘æ§é›†æˆæ–¹æ³•

**ğŸš€ è¿›é˜¶åº”ç”¨**ï¼š
- è®¾è®¡å®Œæ•´çš„ç›‘æ§ä½“ç³»æ¶æ„
- å®ç°å‘Šè­¦çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- æ„å»º DevOps å·¥å…·é“¾çš„ç›‘æ§é›†æˆ
- å¼€å‘è‡ªå®šä¹‰çš„é›†æˆè§£å†³æ–¹æ¡ˆ

**ğŸ’¡ æœ€ä½³å®è·µ**ï¼š
- ä¿æŒç³»ç»Ÿé—´çš„æ¾è€¦åˆè®¾è®¡
- å»ºç«‹ç»Ÿä¸€çš„ç›‘æ§æ•°æ®æ ‡å‡†
- å®ç°é›†æˆç³»ç»Ÿçš„ç›‘æ§å’Œå‘Šè­¦
- å®šæœŸæµ‹è¯•é›†æˆç³»ç»Ÿçš„å¯ç”¨æ€§

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- ç¬¬ä¸‰æ–¹é›†æˆè®©ç›‘æ§ä½“ç³»æ›´å®Œæ•´å¼ºå¤§
- APIæ¥å£æ˜¯æœ€å¸¸ç”¨çš„é›†æˆæ–¹å¼
- ä¸åŒå·¥å…·æœ‰ä¸åŒä¼˜åŠ¿ï¼Œç»„åˆä½¿ç”¨æ•ˆæœæ›´å¥½
- é›†æˆç³»ç»Ÿæœ¬èº«ä¹Ÿéœ€è¦ç›‘æ§å’Œç»´æŠ¤