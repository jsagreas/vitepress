---
title: 3、jQuery选择器与Ajax结合
---
## 📚 目录

1. [jQuery选择器基础回顾](#1-jQuery选择器基础回顾)
2. [获取表单数据的选择器技巧](#2-获取表单数据的选择器技巧)
3. [操作DOM元素显示Ajax结果](#3-操作DOM元素显示Ajax结果)
4. [事件绑定与Ajax触发](#4-事件绑定与Ajax触发)
5. [this关键字在Ajax中的应用](#5-this关键字在Ajax中的应用)
6. [jQuery Ready事件与Ajax的配合](#6-jQuery-Ready事件与Ajax的配合)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🎯 jQuery选择器基础回顾


### 1.1 什么是jQuery选择器

**通俗理解**：jQuery选择器就像是"指路牌"，用来告诉jQuery你要操作哪个HTML元素。

> 💡 **形象比喻**
> 
> 如果把网页比作一栋大楼，jQuery选择器就是房间号码，告诉你要找哪一间房子

### 1.2 三大核心选择器


**📌 ID选择器 `#id`**
```javascript
// 意思：找到ID为"username"的那个唯一元素
$("#username")
```
```html
<!-- 对应的HTML -->
<input id="username" type="text">
```

**📌 类选择器 `.class`**
```javascript
// 意思：找到所有class为"btn"的元素
$(".btn")
```
```html
<!-- 对应的HTML -->
<button class="btn">按钮1</button>
<button class="btn">按钮2</button>
```

**📌 元素选择器 `element`**
```javascript
// 意思：找到页面上所有的input元素
$("input")
```

### 1.3 选择器在Ajax中的作用


```
网页操作流程图：
用户操作 → 选择器找元素 → 触发Ajax → 选择器显示结果

具体过程：
1️⃣ 用户点击按钮 ← $("#submit-btn")
2️⃣ 获取输入框数据 ← $("#username").val()
3️⃣ 发送Ajax请求 ← $.ajax()
4️⃣ 显示返回结果 ← $("#result").html(data)
```

---

## 2. 📝 获取表单数据的选择器技巧


### 2.1 为什么要获取表单数据


> 🎯 **核心目的**
> 
> Ajax的本质就是"不刷新页面，发送数据给服务器"。而用户填写的表单数据，就是我们要发送的内容。

### 2.2 常用的数据获取方法


**🔸 获取输入框的值**
```javascript
// 获取用户名输入框的内容
var username = $("#username").val();
console.log(username); // 输出用户输入的内容
```

**🔸 获取下拉框选中的值**
```javascript
// 获取城市下拉框选中的值
var city = $("#city").val();
```

**🔸 获取单选框选中的值**
```javascript
// 获取性别单选框选中的值
var gender = $("input[name='gender']:checked").val();
```

**🔸 获取复选框选中的值**
```javascript
// 获取所有选中的爱好
var hobbies = [];
$("input[name='hobby']:checked").each(function(){
    hobbies.push($(this).val());
});
```

### 2.3 批量获取表单数据


**🚀 serialize()方法 - 最常用**
```javascript
// 一行代码获取整个表单的所有数据
var formData = $("#myForm").serialize();
// 结果：username=张三&age=25&city=北京
```

```html
<!-- 对应的HTML表单 -->
<form id="myForm">
    <input name="username" value="张三">
    <input name="age" value="25">
    <select name="city">
        <option value="北京" selected>北京</option>
    </select>
</form>
```

> 💡 **serialize()的好处**
> 
> 不用一个一个去获取表单项，一行代码全部搞定！

---

## 3. 🎨 操作DOM元素显示Ajax结果


### 3.1 什么是显示Ajax结果


**通俗解释**：服务器返回数据后，我们需要把这些数据显示在网页上让用户看到。

```
Ajax结果显示流程：
服务器返回数据 → jQuery选择器找到显示位置 → 把数据放进去
```

### 3.2 常用的显示方法


**🔸 替换内容 - html()**
```javascript
// 把服务器返回的HTML内容显示在result区域
$("#result").html("<p>登录成功！</p>");
```

**🔸 替换文本 - text()**
```javascript
// 只显示纯文本，不解析HTML标签
$("#message").text("用户名已存在");
```

**🔸 追加内容 - append()**
```javascript
// 在原有内容后面追加新内容
$("#chat").append("<div>新消息：你好</div>");
```

### 3.3 实际应用示例


```javascript
// 完整的Ajax显示流程
$.ajax({
    url: '/api/login',
    type: 'POST',
    data: $("#loginForm").serialize(),
    success: function(response) {
        if(response.success) {
            // 登录成功，显示欢迎信息
            $("#welcome").html("欢迎你，" + response.username);
            $("#loginForm").hide(); // 隐藏登录表单
        } else {
            // 登录失败，显示错误信息
            $("#error").text(response.message);
        }
    }
});
```

---

## 4. ⚡ 事件绑定与Ajax触发


### 4.1 什么是事件绑定


**通俗理解**：事件绑定就是告诉jQuery"当用户做了某个动作时，你要执行什么代码"。

```
事件绑定示意图：
用户动作 → 触发事件 → 执行代码 → 发送Ajax

常见动作：
👆 点击按钮 → click事件
📝 填写表单 → change事件  
⌨️ 按键盘 → keyup事件
```

### 4.2 常用事件与Ajax结合


**🔸 点击事件触发Ajax**
```javascript
// 当点击提交按钮时，发送Ajax请求
$("#submit-btn").click(function() {
    var formData = $("#myForm").serialize();
    
    $.ajax({
        url: '/api/submit',
        type: 'POST',
        data: formData,
        success: function(response) {
            $("#result").html("提交成功！");
        }
    });
});
```

**🔸 表单改变时触发Ajax**
```javascript
// 当用户选择城市时，自动加载该城市的区县
$("#city").change(function() {
    var selectedCity = $(this).val();
    
    $.ajax({
        url: '/api/districts',
        data: {city: selectedCity},
        success: function(districts) {
            // 清空区县选择框并添加新数据
            $("#district").empty();
            $.each(districts, function(i, district) {
                $("#district").append("<option>" + district + "</option>");
            });
        }
    });
});
```

### 4.3 阻止默认行为


**为什么要阻止默认行为？**
```javascript
// 阻止表单默认提交，改用Ajax提交
$("#myForm").submit(function(e) {
    e.preventDefault(); // 阻止表单默认提交行为
    
    // 使用Ajax提交
    $.ajax({
        url: $(this).attr('action'),
        type: 'POST',
        data: $(this).serialize(),
        success: function(response) {
            alert("提交成功，页面不会刷新！");
        }
    });
});
```

---

## 5. 🎪 this关键字在Ajax中的应用


### 5.1 this到底是什么


**通俗解释**：`this` 就是"当前正在操作的那个元素"。

> 💡 **形象比喻**
> 
> 如果你在教室里说"这个学生"，大家不知道你指谁。但如果你指着某个学生说"这个学生"，大家就明白了。`this`就是那个"指着的手指"。

```html
<!-- 多个按钮的情况 -->
<button class="load-btn" data-id="1">加载用户1</button>
<button class="load-btn" data-id="2">加载用户2</button>
<button class="load-btn" data-id="3">加载用户3</button>
```

### 5.2 this在事件中的应用


```javascript
$(".load-btn").click(function() {
    // this指向被点击的那个按钮
    var userId = $(this).data('id'); // 获取当前按钮的data-id
    var $currentBtn = $(this);       // 保存当前按钮的jQuery对象
    
    $currentBtn.text("加载中..."); // 只改变被点击按钮的文字
    
    $.ajax({
        url: '/api/user/' + userId,
        success: function(user) {
            // 显示用户信息
            $currentBtn.text("加载完成");
        }
    });
});
```

### 5.3 this的常见陷阱与解决


**❌ 错误用法：**
```javascript
$("#btn").click(function() {
    $.ajax({
        url: '/api/data',
        success: function(response) {
            // 这里的this不是按钮，是Ajax的设置对象！
            $(this).text("完成"); // 会报错
        }
    });
});
```

**✅ 正确用法：**
```javascript
$("#btn").click(function() {
    var $btn = $(this); // 先保存按钮的引用
    
    $.ajax({
        url: '/api/data',
        success: function(response) {
            $btn.text("完成"); // 使用保存的引用
        }
    });
});
```

---

## 6. 🚀 jQuery Ready事件与Ajax的配合


### 6.1 什么是Ready事件


**通俗理解**：Ready事件就是等网页的HTML结构加载完成后，立即执行的代码。

```
网页加载过程：
1️⃣ 开始加载HTML
2️⃣ HTML结构加载完成 ← Ready事件触发
3️⃣ 图片、CSS等继续加载
4️⃣ 全部加载完成 ← Load事件触发
```

### 6.2 为什么Ajax需要Ready事件


```javascript
// 如果没有Ready事件，可能会出错
$("#submit-btn").click(function() { // 此时按钮可能还没加载出来
    // 绑定事件失败
});

// 正确的做法：等HTML加载完再绑定事件
$(document).ready(function() {
    $("#submit-btn").click(function() {
        // 现在可以安全地绑定事件了
    });
});
```

### 6.3 Ready事件的简写形式


**三种写法都是一样的：**
```javascript
// 完整写法
$(document).ready(function() {
    // Ajax相关代码
});

// 简写1
$(function() {
    // Ajax相关代码
});

// 简写2
$(() => {
    // Ajax相关代码（ES6箭头函数）
});
```

### 6.4 完整的实际应用


```javascript
$(function() {
    // 页面加载完成后，初始化所有Ajax功能
    
    // 1. 绑定表单提交事件
    $("#loginForm").submit(function(e) {
        e.preventDefault();
        
        $.ajax({
            url: '/api/login',
            type: 'POST',
            data: $(this).serialize(),
            success: function(response) {
                if(response.success) {
                    location.href = '/dashboard';
                } else {
                    $("#error").text(response.message);
                }
            }
        });
    });
    
    // 2. 绑定实时搜索
    $("#search").keyup(function() {
        var keyword = $(this).val();
        if(keyword.length > 2) {
            $.ajax({
                url: '/api/search',
                data: {q: keyword},
                success: function(results) {
                    $("#searchResults").html(results);
                }
            });
        }
    });
    
    // 3. 页面加载时自动获取初始数据
    $.ajax({
        url: '/api/init-data',
        success: function(data) {
            $("#welcome").text("欢迎回来，" + data.username);
        }
    });
});
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念


```
🔸 jQuery选择器：网页元素的"门牌号码"，用来找到要操作的元素
🔸 表单数据获取：serialize()是最简单的批量获取方法
🔸 结果显示：html()、text()、append()各有用途
🔸 事件绑定：用户动作触发Ajax的桥梁
🔸 this关键字：指向当前操作的元素，注意作用域问题
🔸 Ready事件：确保HTML加载完成再执行Ajax代码
```

### 7.2 关键理解要点


**🔹 选择器的本质作用**
```
获取数据：告诉jQuery从哪里拿数据
发送请求：确定用户触发Ajax的方式
显示结果：决定Ajax结果显示在哪里
```

**🔹 this的使用原则**
```
记住一句话：在哪个元素的事件里，this就指向那个元素
但在Ajax回调函数里，this会改变，要提前保存
```

**🔹 Ready事件的重要性**
```
所有的事件绑定都要放在Ready事件里
这样确保元素存在了再去绑定事件
```

### 7.3 实际应用指导


**✅ 最佳实践：**
```javascript
$(function() {
    // 所有Ajax相关代码都放在这里
    
    // 1. 表单提交用serialize()获取数据
    // 2. 用事件委托处理动态元素
    // 3. 提前保存this的引用
    // 4. 用合适的方法显示结果
});
```

**❌ 常见错误：**
- 不等Ready事件就绑定事件
- 在Ajax回调里直接使用this
- 忘记阻止表单默认提交行为
- 数据获取方法用错（html()和text()的区别）

**核心记忆**：
- **选择器是桥梁**：连接用户操作和Ajax功能
- **事件是触发器**：用户动作启动Ajax流程
- **Ready是基础**：所有功能的起点
- **this要小心**：作用域变化要注意