---
title: 1ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
---
## ğŸ“š ç›®å½•


1. [è¯·æ±‚é¢‘ç‡æ§åˆ¶](#1-è¯·æ±‚é¢‘ç‡æ§åˆ¶)
2. [æ•°æ®ç¼“å­˜æœºåˆ¶](#2-æ•°æ®ç¼“å­˜æœºåˆ¶)
3. [è¯·æ±‚å»é‡å¤„ç†](#3-è¯·æ±‚å»é‡å¤„ç†)
4. [è¿æ¥æ± ç®¡ç†](#4-è¿æ¥æ± ç®¡ç†)
5. [å‹ç¼©æ•°æ®ä¼ è¾“](#5-å‹ç¼©æ•°æ®ä¼ è¾“)
6. [CDNä½¿ç”¨ä¼˜åŒ–](#6-CDNä½¿ç”¨ä¼˜åŒ–)
7. [ç§»åŠ¨ç«¯ä¼˜åŒ–ç­–ç•¥](#7-ç§»åŠ¨ç«¯ä¼˜åŒ–ç­–ç•¥)
8. [è¯·æ±‚æ± ç®¡ç†å’Œå¹¶å‘æ§åˆ¶](#8-è¯·æ±‚æ± ç®¡ç†å’Œå¹¶å‘æ§åˆ¶)
9. [å“åº”æ•°æ®å‹ç¼©å¤„ç†](#9-å“åº”æ•°æ®å‹ç¼©å¤„ç†)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

# ğŸ¯ å­¦ä¹ ç›®æ ‡



> ğŸ’¡ **æœ¬ç« ç›®æ ‡**ï¼šæŒæ¡jQuery Ajaxæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥ï¼Œè®©ä½ çš„ç½‘é¡µè¯·æ±‚åˆå¿«åˆç¨³ï¼
> 
> ğŸ“ **é€‚åˆäººç¾¤**ï¼šæœ‰jQuery AjaxåŸºç¡€ï¼Œæƒ³æå‡ç½‘é¡µæ€§èƒ½çš„å¼€å‘è€…
> 
> â±ï¸ **é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼š45åˆ†é’Ÿ

---

## 1. ğŸš¦ è¯·æ±‚é¢‘ç‡æ§åˆ¶



### 1.1 ä»€ä¹ˆæ˜¯è¯·æ±‚é¢‘ç‡æ§åˆ¶



**é€šä¿—è§£é‡Š**ï¼šæƒ³è±¡ä½ åœ¨é¤å…ç‚¹èœï¼Œå¦‚æœä½ æ¯ç§’é’Ÿéƒ½å–ŠæœåŠ¡å‘˜æ¥ä¸€æ¬¡ï¼ŒæœåŠ¡å‘˜ä¼šè¢«ä½ æç–¯çš„ï¼è¯·æ±‚é¢‘ç‡æ§åˆ¶å°±æ˜¯è®©ç½‘é¡µ"æœ‰ç¤¼è²Œ"åœ°å‘æœåŠ¡å™¨è¦æ•°æ®ã€‚

```
æ²¡æœ‰æ§åˆ¶çš„æƒ…å†µï¼š
ç”¨æˆ·è¾“å…¥ â†’ ç«‹å³è¯·æ±‚ â†’ æœåŠ¡å™¨å‹åŠ›å¤§
ç”¨æˆ·è¾“å…¥ â†’ ç«‹å³è¯·æ±‚ â†’ å¯èƒ½å¡æ­»
ç”¨æˆ·è¾“å…¥ â†’ ç«‹å³è¯·æ±‚ â†’ æµªè´¹èµ„æº

æœ‰æ§åˆ¶çš„æƒ…å†µï¼š
ç”¨æˆ·è¾“å…¥ â†’ ç­‰å¾…ä¸€ä¼š â†’ åˆå¹¶è¯·æ±‚ â†’ æœåŠ¡å™¨è½»æ¾
```

### 1.2 é˜²æŠ–ï¼ˆDebounceï¼‰- ç­‰ç­‰å†è¯´



**ğŸ”¸ æ¦‚å¿µç†è§£**ï¼šå°±åƒç”µæ¢¯é—¨ä¸€æ ·ï¼Œæœ‰äººè¿›æ¥å°±é‡æ–°ç­‰10ç§’ï¼Œç›´åˆ°æ²¡äººè¿›æ¥æ‰å…³é—¨å‡ºå‘ã€‚

```javascript
// æœç´¢æ¡†é˜²æŠ–ç¤ºä¾‹
let searchTimer;

$('#search-input').on('input', function() {
    const keyword = $(this).val();
    
    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
    clearTimeout(searchTimer);
    
    // è®¾ç½®æ–°çš„å®šæ—¶å™¨ï¼Œ500æ¯«ç§’åæ‰§è¡Œ
    searchTimer = setTimeout(function() {
        // çœŸæ­£å‘é€æœç´¢è¯·æ±‚
        $.ajax({
            url: '/api/search',
            data: { q: keyword },
            success: function(data) {
                $('#search-results').html(data);
            }
        });
    }, 500);
});
```

**ğŸ’¡ å®é™…æ•ˆæœ**ï¼šç”¨æˆ·æ‰“å­—æ—¶ä¸ä¼šç–¯ç‹‚å‘è¯·æ±‚ï¼Œåªæœ‰åœæ­¢æ‰“å­—0.5ç§’åæ‰å‘é€ï¼Œå¤§å¤§å‡å°‘æœåŠ¡å™¨å‹åŠ›ã€‚

### 1.3 èŠ‚æµï¼ˆThrottleï¼‰- å®šæ—¶æ”¾è¡Œ



**ğŸ”¸ æ¦‚å¿µç†è§£**ï¼šå°±åƒåœ°é“æ£€ç¥¨å£ï¼Œæ¯éš”ä¸€å®šæ—¶é—´æ‰æ”¾ä¸€æ‰¹äººé€šè¿‡ã€‚

```javascript
// æ»šåŠ¨åŠ è½½èŠ‚æµç¤ºä¾‹
let isScrolling = false;

$(window).on('scroll', function() {
    if (isScrolling) return; // å¦‚æœæ­£åœ¨å¤„ç†ï¼Œç›´æ¥è·³è¿‡
    
    isScrolling = true;
    
    // 500æ¯«ç§’åæ‰å…è®¸ä¸‹æ¬¡å¤„ç†
    setTimeout(function() {
        // æ£€æŸ¥æ˜¯å¦éœ€è¦åŠ è½½æ›´å¤šæ•°æ®
        if ($(window).scrollTop() + $(window).height() >= $(document).height() - 100) {
            loadMoreData();
        }
        isScrolling = false;
    }, 500);
});

function loadMoreData() {
    $.ajax({
        url: '/api/more-data',
        success: function(data) {
            $('#content-list').append(data);
        }
    });
}
```

| æ§åˆ¶æ–¹å¼ | **ä½¿ç”¨åœºæ™¯** | **ç‰¹ç‚¹** | **ä¸¾ä¾‹** |
|---------|-------------|---------|---------|
| **é˜²æŠ–** | `æœç´¢ã€è¾“å…¥éªŒè¯` | `ç­‰æœ€åä¸€æ¬¡æ“ä½œ` | `æœç´¢æ¡†è¾“å…¥` |
| **èŠ‚æµ** | `æ»šåŠ¨ã€æ‹–æ‹½` | `å›ºå®šæ—¶é—´é—´éš”æ‰§è¡Œ` | `æ»šåŠ¨åŠ è½½` |

---

## 2. ğŸ’¾ æ•°æ®ç¼“å­˜æœºåˆ¶



### 2.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜



**é€šä¿—è§£é‡Š**ï¼šå°±åƒä½ æŠŠå¸¸ç”¨çš„ä¸œè¥¿æ”¾åœ¨æ‰‹è¾¹ä¸€æ ·ï¼Œé¿å…æ¯æ¬¡éƒ½è¦è·‘åˆ°ä»“åº“å»æ‹¿ã€‚

```
æ— ç¼“å­˜ï¼š
ç”¨æˆ·ç‚¹å‡» â†’ è¯·æ±‚æœåŠ¡å™¨ â†’ ç­‰å¾…å“åº” â†’ æ˜¾ç¤ºæ•°æ®
ç”¨æˆ·å†ç‚¹å‡» â†’ åˆè¯·æ±‚æœåŠ¡å™¨ â†’ åˆç­‰å¾… â†’ åˆæ˜¾ç¤ºï¼ˆæµªè´¹ï¼ï¼‰

æœ‰ç¼“å­˜ï¼š
ç”¨æˆ·ç‚¹å‡» â†’ è¯·æ±‚æœåŠ¡å™¨ â†’ ä¿å­˜åˆ°ç¼“å­˜ â†’ æ˜¾ç¤ºæ•°æ®
ç”¨æˆ·å†ç‚¹å‡» â†’ ç›´æ¥ä»ç¼“å­˜å– â†’ ç«‹å³æ˜¾ç¤ºï¼ˆå¿«ï¼ï¼‰
```

### 2.2 ç®€å•å†…å­˜ç¼“å­˜



```javascript
// åˆ›å»ºä¸€ä¸ªç®€å•çš„ç¼“å­˜å¯¹è±¡
const ajaxCache = {};

function getCachedData(url, params) {
    // ç”Ÿæˆç¼“å­˜é”®å
    const cacheKey = url + JSON.stringify(params || {});
    
    // å¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œç›´æ¥è¿”å›
    if (ajaxCache[cacheKey]) {
        console.log('ä»ç¼“å­˜è·å–æ•°æ®');
        return Promise.resolve(ajaxCache[cacheKey]);
    }
    
    // å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œå‘é€è¯·æ±‚
    return $.ajax({
        url: url,
        data: params
    }).done(function(data) {
        // è¯·æ±‚æˆåŠŸåä¿å­˜åˆ°ç¼“å­˜
        ajaxCache[cacheKey] = data;
        console.log('æ•°æ®å·²ç¼“å­˜');
    });
}

// ä½¿ç”¨ç¤ºä¾‹
$('#load-user-btn').click(function() {
    getCachedData('/api/user', { id: 123 })
        .then(function(userData) {
            $('#user-info').html(userData.name);
        });
});
```

### 2.3 å¸¦è¿‡æœŸæ—¶é—´çš„ç¼“å­˜



```javascript
const cacheWithExpire = {
    data: {},
    
    set: function(key, value, expireMinutes = 5) {
        this.data[key] = {
            value: value,
            expire: Date.now() + (expireMinutes * 60 * 1000)
        };
    },
    
    get: function(key) {
        const item = this.data[key];
        if (!item) return null;
        
        // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if (Date.now() > item.expire) {
            delete this.data[key];
            return null;
        }
        
        return item.value;
    }
};

// ä½¿ç”¨ç¤ºä¾‹
function getNewsData() {
    const cached = cacheWithExpire.get('news');
    if (cached) {
        $('#news-list').html(cached);
        return;
    }
    
    $.ajax({
        url: '/api/news',
        success: function(data) {
            cacheWithExpire.set('news', data, 10); // ç¼“å­˜10åˆ†é’Ÿ
            $('#news-list').html(data);
        }
    });
}
```

**ğŸ”§ ç¼“å­˜ç­–ç•¥é€‰æ‹©**ï¼š
- **ğŸ• çŸ­æœŸç¼“å­˜**ï¼šç”¨æˆ·ä¿¡æ¯ã€èœå•æ•°æ®ï¼ˆ5-10åˆ†é’Ÿï¼‰
- **ğŸ“… é•¿æœŸç¼“å­˜**ï¼šé…ç½®æ•°æ®ã€é™æ€å†…å®¹ï¼ˆ1å°æ—¶ä»¥ä¸Šï¼‰
- **âš¡ ä¼šè¯ç¼“å­˜**ï¼šä¸´æ—¶æ•°æ®ï¼Œå…³é—­é¡µé¢å°±æ¸…é™¤

---

## 3. ğŸ”„ è¯·æ±‚å»é‡å¤„ç†



### 3.1 ä»€ä¹ˆæ˜¯è¯·æ±‚å»é‡



**é€šä¿—è§£é‡Š**ï¼šé˜²æ­¢ç”¨æˆ·è¿ç»­ç‚¹å‡»æŒ‰é’®å‘é€å¤šä¸ªç›¸åŒè¯·æ±‚ï¼Œå°±åƒé˜²æ­¢é‡å¤æäº¤è¡¨å•ä¸€æ ·ã€‚

```
é—®é¢˜åœºæ™¯ï¼š
ç”¨æˆ·ç‚¹å‡»"æäº¤" â†’ å‘é€è¯·æ±‚1
ç”¨æˆ·å†ç‚¹å‡»"æäº¤" â†’ å‘é€è¯·æ±‚2 ï¼ˆé‡å¤ï¼ï¼‰
ç”¨æˆ·ç»§ç»­ç‚¹å‡» â†’ å‘é€è¯·æ±‚3 ï¼ˆé‡å¤ï¼ï¼‰

è§£å†³åï¼š
ç”¨æˆ·ç‚¹å‡»"æäº¤" â†’ å‘é€è¯·æ±‚ï¼Œç¦ç”¨æŒ‰é’®
è¯·æ±‚å®Œæˆå â†’ å¯ç”¨æŒ‰é’®ï¼Œå…è®¸ä¸‹æ¬¡æ“ä½œ
```

### 3.2 æŒ‰é’®é˜²é‡å¤ç‚¹å‡»



```javascript
function submitForm(formData) {
    const $submitBtn = $('#submit-btn');
    
    // æ£€æŸ¥æ˜¯å¦æ­£åœ¨æäº¤
    if ($submitBtn.prop('disabled')) {
        console.log('æ­£åœ¨æäº¤ä¸­ï¼Œè¯·ç¨å€™...');
        return;
    }
    
    // ç¦ç”¨æŒ‰é’®ï¼Œæ˜¾ç¤ºåŠ è½½çŠ¶æ€
    $submitBtn.prop('disabled', true).text('æäº¤ä¸­...');
    
    $.ajax({
        url: '/api/submit',
        method: 'POST',
        data: formData,
        success: function(response) {
            alert('æäº¤æˆåŠŸï¼');
        },
        error: function() {
            alert('æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•');
        },
        complete: function() {
            // æ— è®ºæˆåŠŸå¤±è´¥ï¼Œéƒ½è¦æ¢å¤æŒ‰é’®çŠ¶æ€
            $submitBtn.prop('disabled', false).text('æäº¤');
        }
    });
}

// ç»‘å®šè¡¨å•æäº¤
$('#my-form').on('submit', function(e) {
    e.preventDefault();
    const formData = $(this).serialize();
    submitForm(formData);
});
```

### 3.3 è¯·æ±‚æ ‡è¯†å»é‡



```javascript
// æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚è®°å½•
const pendingRequests = new Set();

function makeUniqueRequest(url, data) {
    // ç”Ÿæˆè¯·æ±‚çš„å”¯ä¸€æ ‡è¯†
    const requestId = url + JSON.stringify(data || {});
    
    // å¦‚æœå·²ç»æœ‰ç›¸åŒè¯·æ±‚åœ¨è¿›è¡Œï¼Œç›´æ¥è¿”å›
    if (pendingRequests.has(requestId)) {
        console.log('ç›¸åŒè¯·æ±‚æ­£åœ¨è¿›è¡Œä¸­');
        return Promise.reject('é‡å¤è¯·æ±‚');
    }
    
    // æ·»åŠ åˆ°è¿›è¡Œä¸­çš„è¯·æ±‚åˆ—è¡¨
    pendingRequests.add(requestId);
    
    return $.ajax({
        url: url,
        data: data
    }).always(function() {
        // è¯·æ±‚å®Œæˆåï¼Œä»åˆ—è¡¨ä¸­ç§»é™¤
        pendingRequests.delete(requestId);
    });
}

// ä½¿ç”¨ç¤ºä¾‹
$('#search-btn').click(function() {
    const keyword = $('#search-input').val();
    
    makeUniqueRequest('/api/search', { q: keyword })
        .done(function(results) {
            $('#search-results').html(results);
        })
        .fail(function(error) {
            if (error !== 'é‡å¤è¯·æ±‚') {
                alert('æœç´¢å¤±è´¥');
            }
        });
});
```

---

## 4. ğŸ”— è¿æ¥æ± ç®¡ç†



### 4.1 ä»€ä¹ˆæ˜¯è¿æ¥æ± 



**é€šä¿—è§£é‡Š**ï¼šå°±åƒé“¶è¡Œçš„çª—å£æ•°é‡æœ‰é™ï¼Œå®¢æˆ·éœ€è¦æ’é˜ŸåŠç†ä¸šåŠ¡ã€‚æµè§ˆå™¨å¯¹åŒä¸€ä¸ªåŸŸåçš„å¹¶å‘è¿æ¥ä¹Ÿæœ‰é™åˆ¶ã€‚

```
æµè§ˆå™¨è¿æ¥é™åˆ¶ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒä¸€åŸŸåæœ€å¤š6ä¸ªå¹¶å‘è¿æ¥          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚è¯·æ±‚1â”‚ â”‚è¯·æ±‚2â”‚ â”‚è¯·æ±‚3â”‚ ...    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜        â”‚
â”‚ ç¬¬7ä¸ªè¯·æ±‚éœ€è¦ç­‰å¾…å‰é¢å®Œæˆ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 è¯·æ±‚ä¼˜å…ˆçº§ç®¡ç†



```javascript
// ç®€å•çš„è¯·æ±‚é˜Ÿåˆ—ç®¡ç†
const requestQueue = {
    high: [],    // é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—
    normal: [],  // æ™®é€šä¼˜å…ˆçº§é˜Ÿåˆ—
    running: 0,  // å½“å‰è¿è¡Œçš„è¯·æ±‚æ•°
    maxConcurrent: 4, // æœ€å¤§å¹¶å‘æ•°
    
    add: function(request, priority = 'normal') {
        this[priority].push(request);
        this.process();
    },
    
    process: function() {
        if (this.running >= this.maxConcurrent) return;
        
        // ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§è¯·æ±‚
        let request = this.high.shift() || this.normal.shift();
        if (!request) return;
        
        this.running++;
        request().always(() => {
            this.running--;
            this.process(); // å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚
        });
    }
};

// ä½¿ç”¨ç¤ºä¾‹
function highPriorityRequest() {
    return $.ajax({
        url: '/api/important-data',
        success: function(data) {
            $('#important-info').html(data);
        }
    });
}

function normalRequest() {
    return $.ajax({
        url: '/api/normal-data',
        success: function(data) {
            $('#normal-info').html(data);
        }
    });
}

// æ·»åŠ åˆ°é˜Ÿåˆ—
requestQueue.add(highPriorityRequest, 'high');
requestQueue.add(normalRequest, 'normal');
```

---

## 5. ğŸ“¦ å‹ç¼©æ•°æ®ä¼ è¾“



### 5.1 ä¸ºä»€ä¹ˆè¦å‹ç¼©æ•°æ®



**é€šä¿—è§£é‡Š**ï¼šå°±åƒå¿«é€’æ‰“åŒ…ä¸€æ ·ï¼ŒæŠŠå¤§åŒ…è£¹å‹ç¼©æˆå°åŒ…è£¹ï¼Œä¼ è¾“æ›´å¿«ï¼Œçœæµé‡ã€‚

```
æ•°æ®ä¼ è¾“å¯¹æ¯”ï¼š
åŸå§‹æ•°æ®ï¼š     [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100KB
å‹ç¼©åï¼š       [â–ˆâ–ˆâ–ˆâ–ˆ]             25KB
ä¼ è¾“æ—¶é—´ï¼š     å¿«4å€ï¼
æµé‡æ¶ˆè€—ï¼š     çœ75%ï¼
```

### 5.2 å®¢æˆ·ç«¯å‹ç¼©å¤„ç†



```javascript
// å‘é€å‹ç¼©è¯·æ±‚å¤´
$.ajaxSetup({
    beforeSend: function(xhr) {
        // å‘Šè¯‰æœåŠ¡å™¨å®¢æˆ·ç«¯æ”¯æŒå‹ç¼©
        xhr.setRequestHeader('Accept-Encoding', 'gzip, deflate');
    }
});

// å¤„ç†å¤§é‡æ•°æ®æ—¶çš„åˆ†é¡µç­–ç•¥
function loadDataByPages(pageSize = 20) {
    let currentPage = 1;
    let isLoading = false;
    
    function loadPage() {
        if (isLoading) return;
        isLoading = true;
        
        $.ajax({
            url: '/api/data',
            data: {
                page: currentPage,
                size: pageSize
            },
            success: function(response) {
                // è¿½åŠ æ•°æ®è€Œä¸æ˜¯æ›¿æ¢
                $('#data-list').append(response.data);
                currentPage++;
                
                // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®
                if (response.hasMore) {
                    $('#load-more-btn').show();
                } else {
                    $('#load-more-btn').hide();
                }
            },
            complete: function() {
                isLoading = false;
            }
        });
    }
    
    // é¦–æ¬¡åŠ è½½
    loadPage();
    
    // åŠ è½½æ›´å¤šæŒ‰é’®
    $('#load-more-btn').click(loadPage);
}
```

### 5.3 æ•°æ®æ ¼å¼ä¼˜åŒ–



```javascript
// ä¼˜åŒ–JSONæ•°æ®ç»“æ„
// âŒ å†—ä½™çš„æ•°æ®æ ¼å¼
const badFormat = {
    users: [
        { id: 1, name: "å¼ ä¸‰", email: "zhang@email.com", status: "active" },
        { id: 2, name: "æå››", email: "li@email.com", status: "active" },
        { id: 3, name: "ç‹äº”", email: "wang@email.com", status: "inactive" }
    ]
};

// âœ… ç´§å‡‘çš„æ•°æ®æ ¼å¼
const goodFormat = {
    headers: ["id", "name", "email", "status"],
    data: [
        [1, "å¼ ä¸‰", "zhang@email.com", 1], // 1ä»£è¡¨active
        [2, "æå››", "li@email.com", 1],
        [3, "ç‹äº”", "wang@email.com", 0]   // 0ä»£è¡¨inactive
    ]
};

// å®¢æˆ·ç«¯è§£æç´§å‡‘æ ¼å¼
function parseCompactData(response) {
    const { headers, data } = response;
    return data.map(row => {
        const obj = {};
        headers.forEach((header, index) => {
            obj[header] = row[index];
        });
        return obj;
    });
}
```

---

## 6. ğŸŒ CDNä½¿ç”¨ä¼˜åŒ–



### 6.1 ä»€ä¹ˆæ˜¯CDN



**é€šä¿—è§£é‡Š**ï¼šCDNå°±åƒå…¨å›½å„åœ°çš„å¿«é€’åˆ†æ‹£ä¸­å¿ƒï¼Œè®©ç”¨æˆ·å°±è¿‘è·å–æ•°æ®ï¼Œé€Ÿåº¦æ›´å¿«ã€‚

```
æ²¡æœ‰CDNï¼š
åŒ—äº¬ç”¨æˆ· â†’ ä¸Šæµ·æœåŠ¡å™¨ â†’ å»¶è¿Ÿ200ms

æœ‰CDNï¼š
åŒ—äº¬ç”¨æˆ· â†’ åŒ—äº¬CDNèŠ‚ç‚¹ â†’ å»¶è¿Ÿ20msï¼ˆå¿«10å€ï¼ï¼‰
```

### 6.2 jQueryåº“CDNä¼˜åŒ–



```html
<!-- ä½¿ç”¨CDNåŠ è½½jQueryï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ -->
<script>
// æ£€æµ‹CDNæ˜¯å¦åŠ è½½æˆåŠŸ
function loadjQuery() {
    // é¦–é€‰ï¼šçŸ¥åCDN
    const cdnSources = [
        'https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js',
        '/js/jquery.min.js' // æœ¬åœ°å¤‡ä»½
    ];
    
    let currentIndex = 0;
    
    function tryLoad() {
        if (currentIndex >= cdnSources.length) {
            console.error('jQueryåŠ è½½å¤±è´¥');
            return;
        }
        
        const script = document.createElement('script');
        script.src = cdnSources[currentIndex];
        
        script.onload = function() {
            console.log('jQueryåŠ è½½æˆåŠŸï¼š', cdnSources[currentIndex]);
        };
        
        script.onerror = function() {
            console.log('CDNå¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ä¸ª');
            currentIndex++;
            tryLoad();
        };
        
        document.head.appendChild(script);
    }
    
    tryLoad();
}

// æ£€æŸ¥jQueryæ˜¯å¦å·²åŠ è½½
if (typeof jQuery === 'undefined') {
    loadjQuery();
}
</script>
```

### 6.3 APIæ¥å£CDNç­–ç•¥



```javascript
// å¤šCDNèŠ‚ç‚¹è½®è¯¢
const apiEndpoints = [
    'https://api-cn.example.com',    // ä¸­å›½èŠ‚ç‚¹
    'https://api-us.example.com',    // ç¾å›½èŠ‚ç‚¹
    'https://api.example.com'        // ä¸»èŠ‚ç‚¹
];

let currentEndpoint = 0;

function makeRobustRequest(path, data) {
    function tryRequest() {
        const baseUrl = apiEndpoints[currentEndpoint];
        
        return $.ajax({
            url: baseUrl + path,
            data: data,
            timeout: 5000 // 5ç§’è¶…æ—¶
        }).fail(function(xhr, status, error) {
            console.log(`èŠ‚ç‚¹ ${baseUrl} è¯·æ±‚å¤±è´¥ï¼š${error}`);
            
            // å°è¯•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            if (currentEndpoint < apiEndpoints.length - 1) {
                currentEndpoint++;
                return tryRequest();
            } else {
                throw new Error('æ‰€æœ‰APIèŠ‚ç‚¹éƒ½ä¸å¯ç”¨');
            }
        });
    }
    
    return tryRequest();
}

// ä½¿ç”¨ç¤ºä¾‹
makeRobustRequest('/user/profile', { id: 123 })
    .done(function(data) {
        $('#profile').html(data);
    })
    .fail(function() {
        $('#profile').html('æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•');
    });
```

---

## 7. ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–ç­–ç•¥



### 7.1 ç§»åŠ¨ç«¯ç‰¹æ®Šè€ƒè™‘



**é€šä¿—è§£é‡Š**ï¼šæ‰‹æœºç½‘ç»œä¸å¦‚ç”µè„‘ç¨³å®šï¼Œéœ€è¦æ›´"æ¸©æŸ”"çš„è¯·æ±‚ç­–ç•¥ã€‚

```
ç§»åŠ¨ç«¯æŒ‘æˆ˜ï¼š
ğŸ“¶ ç½‘ç»œä¸ç¨³å®šï¼ˆWiFi/4Gåˆ‡æ¢ï¼‰
ğŸ”‹ ç”µé‡æ•æ„Ÿï¼ˆé¢‘ç¹è¯·æ±‚è€—ç”µï¼‰
ğŸ’¾ æµé‡é™åˆ¶ï¼ˆç”¨æˆ·å¯èƒ½æŒ‰æµé‡è®¡è´¹ï¼‰
âš¡ CPUæ€§èƒ½æœ‰é™ï¼ˆå¤„ç†å¤§æ•°æ®è¾ƒæ…¢ï¼‰
```

### 7.2 ç½‘ç»œçŠ¶æ€æ£€æµ‹



```javascript
// æ£€æµ‹ç½‘ç»œçŠ¶æ€
function getNetworkInfo() {
    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    
    if (connection) {
        return {
            type: connection.effectiveType, // '4g', '3g', '2g', 'slow-2g'
            downlink: connection.downlink,  // ä¸‹è¡Œé€Ÿåº¦
            rtt: connection.rtt            // å¾€è¿”æ—¶å»¶
        };
    }
    
    return { type: 'unknown' };
}

// æ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´è¯·æ±‚ç­–ç•¥
function adaptiveAjax(url, data) {
    const network = getNetworkInfo();
    let timeout = 10000; // é»˜è®¤10ç§’
    let retries = 1;
    
    // æ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´å‚æ•°
    switch (network.type) {
        case 'slow-2g':
        case '2g':
            timeout = 30000; // æ…¢ç½‘ç»œç»™æ›´å¤šæ—¶é—´
            retries = 3;     // å¤šé‡è¯•å‡ æ¬¡
            break;
        case '3g':
            timeout = 15000;
            retries = 2;
            break;
        case '4g':
            timeout = 8000;
            retries = 1;
            break;
    }
    
    console.log(`ç½‘ç»œç±»å‹: ${network.type}, è¶…æ—¶: ${timeout}ms`);
    
    return $.ajax({
        url: url,
        data: data,
        timeout: timeout
    }).retry(retries); // ä½¿ç”¨é‡è¯•æœºåˆ¶
}
```

### 7.3 ç¦»çº¿ç¼“å­˜ç­–ç•¥



```javascript
// ç®€å•çš„ç¦»çº¿å­˜å‚¨
const offlineStorage = {
    save: function(key, data) {
        try {
            localStorage.setItem(key, JSON.stringify({
                data: data,
                timestamp: Date.now()
            }));
        } catch (e) {
            console.log('å­˜å‚¨ç©ºé—´ä¸è¶³');
        }
    },
    
    load: function(key, maxAge = 5 * 60 * 1000) { // é»˜è®¤5åˆ†é’Ÿæœ‰æ•ˆ
        try {
            const item = localStorage.getItem(key);
            if (!item) return null;
            
            const parsed = JSON.parse(item);
            const age = Date.now() - parsed.timestamp;
            
            if (age > maxAge) {
                localStorage.removeItem(key);
                return null;
            }
            
            return parsed.data;
        } catch (e) {
            return null;
        }
    }
};

// æ”¯æŒç¦»çº¿çš„Ajaxè¯·æ±‚
function offlineAjax(url, data) {
    const cacheKey = url + JSON.stringify(data || {});
    
    // æ£€æŸ¥ç½‘ç»œçŠ¶æ€
    if (!navigator.onLine) {
        console.log('ç¦»çº¿çŠ¶æ€ï¼Œä½¿ç”¨ç¼“å­˜æ•°æ®');
        const cached = offlineStorage.load(cacheKey, 30 * 60 * 1000); // 30åˆ†é’Ÿæœ‰æ•ˆ
        if (cached) {
            return Promise.resolve(cached);
        } else {
            return Promise.reject('æ— ç½‘ç»œä¸”æ— ç¼“å­˜æ•°æ®');
        }
    }
    
    // åœ¨çº¿çŠ¶æ€ï¼Œå‘é€è¯·æ±‚
    return $.ajax({
        url: url,
        data: data
    }).done(function(response) {
        // æˆåŠŸåä¿å­˜åˆ°ç¼“å­˜
        offlineStorage.save(cacheKey, response);
    });
}
```

---

## 8. ğŸŠ è¯·æ±‚æ± ç®¡ç†å’Œå¹¶å‘æ§åˆ¶



### 8.1 ä»€ä¹ˆæ˜¯è¯·æ±‚æ± 



**é€šä¿—è§£é‡Š**ï¼šæƒ³è±¡ä¸€ä¸ªæ¸¸æ³³æ± ï¼ŒåŒæ—¶åªèƒ½å®¹çº³ä¸€å®šæ•°é‡çš„äººæ¸¸æ³³ï¼Œè¶…è¿‡äº†å°±è¦æ’é˜Ÿç­‰å¾…ã€‚

```
è¯·æ±‚æ± æ¦‚å¿µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯·æ±‚æ±  (æœ€å¤§å¹¶å‘: 3)         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚è¯·æ±‚Aâ”‚ â”‚è¯·æ±‚Bâ”‚ â”‚è¯·æ±‚Câ”‚    â”‚ â† æ­£åœ¨æ‰§è¡Œ
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ç­‰å¾…é˜Ÿåˆ— â”‚  â† æ’é˜Ÿç­‰å¾…
    â”‚è¯·æ±‚D    â”‚
    â”‚è¯·æ±‚E    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 å®ç°å¹¶å‘æ§åˆ¶å™¨



```javascript
class RequestPool {
    constructor(maxConcurrent = 3) {
        this.maxConcurrent = maxConcurrent; // æœ€å¤§å¹¶å‘æ•°
        this.running = new Set();           // æ­£åœ¨è¿è¡Œçš„è¯·æ±‚
        this.waiting = [];                  // ç­‰å¾…é˜Ÿåˆ—
    }
    
    // æ·»åŠ è¯·æ±‚åˆ°æ± ä¸­
    add(requestFunction, priority = 0) {
        return new Promise((resolve, reject) => {
            const request = {
                fn: requestFunction,
                priority: priority,
                resolve: resolve,
                reject: reject
            };
            
            // æŒ‰ä¼˜å…ˆçº§æ’å…¥ç­‰å¾…é˜Ÿåˆ—
            this.waiting.push(request);
            this.waiting.sort((a, b) => b.priority - a.priority);
            
            this.process();
        });
    }
    
    // å¤„ç†é˜Ÿåˆ—
    process() {
        // å¦‚æœè¾¾åˆ°æœ€å¤§å¹¶å‘æ•°ï¼Œä¸å¤„ç†
        if (this.running.size >= this.maxConcurrent) return;
        
        // å¦‚æœæ²¡æœ‰ç­‰å¾…çš„è¯·æ±‚ï¼Œé€€å‡º
        if (this.waiting.length === 0) return;
        
        // å–å‡ºä¼˜å…ˆçº§æœ€é«˜çš„è¯·æ±‚
        const request = this.waiting.shift();
        this.running.add(request);
        
        // æ‰§è¡Œè¯·æ±‚
        request.fn()
            .then(result => {
                request.resolve(result);
            })
            .catch(error => {
                request.reject(error);
            })
            .finally(() => {
                this.running.delete(request);
                this.process(); // ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª
            });
    }
    
    // è·å–çŠ¶æ€ä¿¡æ¯
    getStatus() {
        return {
            running: this.running.size,
            waiting: this.waiting.length,
            total: this.running.size + this.waiting.length
        };
    }
}

// åˆ›å»ºå…¨å±€è¯·æ±‚æ± 
const globalRequestPool = new RequestPool(4);

// ä½¿ç”¨ç¤ºä¾‹
function loadUserData(userId) {
    return globalRequestPool.add(() => {
        return $.ajax({
            url: '/api/user/' + userId,
            timeout: 5000
        });
    }, 1); // æ™®é€šä¼˜å…ˆçº§
}

function loadCriticalData() {
    return globalRequestPool.add(() => {
        return $.ajax({
            url: '/api/critical-data',
            timeout: 3000
        });
    }, 10); // é«˜ä¼˜å…ˆçº§
}

// æ‰¹é‡åŠ è½½ç”¨æˆ·æ•°æ®
async function loadMultipleUsers() {
    const userIds = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    
    try {
        // è™½ç„¶æœ‰10ä¸ªè¯·æ±‚ï¼Œä½†åŒæ—¶åªä¼šæ‰§è¡Œ4ä¸ª
        const userPromises = userIds.map(id => loadUserData(id));
        const users = await Promise.all(userPromises);
        
        console.log('æ‰€æœ‰ç”¨æˆ·æ•°æ®åŠ è½½å®Œæˆ', users);
        
        // æ˜¾ç¤ºè¯·æ±‚æ± çŠ¶æ€
        console.log('è¯·æ±‚æ± çŠ¶æ€:', globalRequestPool.getStatus());
        
    } catch (error) {
        console.error('æ‰¹é‡åŠ è½½å¤±è´¥:', error);
    }
}
```

### 8.3 è¯·æ±‚ä¼˜å…ˆçº§ç®¡ç†



```javascript
// æ‰©å±•è¯·æ±‚æ± ï¼Œæ”¯æŒæ›´ç»†ç²’åº¦çš„ä¼˜å…ˆçº§
class AdvancedRequestPool extends RequestPool {
    constructor(maxConcurrent = 3) {
        super(maxConcurrent);
        this.priorities = {
            CRITICAL: 100,  // å…³é”®è¯·æ±‚ï¼ˆç”¨æˆ·ç™»å½•ç­‰ï¼‰
            HIGH: 50,       // é«˜ä¼˜å…ˆçº§ï¼ˆä¸»è¦åŠŸèƒ½ï¼‰
            NORMAL: 10,     // æ™®é€šè¯·æ±‚ï¼ˆä¸€èˆ¬æ•°æ®ï¼‰
            LOW: 1          // ä½ä¼˜å…ˆçº§ï¼ˆç»Ÿè®¡ã€æ—¥å¿—ç­‰ï¼‰
        };
    }
    
    // ä¾¿æ·æ–¹æ³•ï¼šæ·»åŠ ä¸åŒä¼˜å…ˆçº§çš„è¯·æ±‚
    addCritical(requestFn) {
        return this.add(requestFn, this.priorities.CRITICAL);
    }
    
    addHigh(requestFn) {
        return this.add(requestFn, this.priorities.HIGH);
    }
    
    addNormal(requestFn) {
        return this.add(requestFn, this.priorities.NORMAL);
    }
    
    addLow(requestFn) {
        return this.add(requestFn, this.priorities.LOW);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const requestPool = new AdvancedRequestPool(3);

// ç”¨æˆ·ç‚¹å‡»ç™»å½•ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
$('#login-btn').click(function() {
    const username = $('#username').val();
    const password = $('#password').val();
    
    requestPool.addCritical(() => {
        return $.ajax({
            url: '/api/login',
            method: 'POST',
            data: { username, password }
        });
    }).then(function(response) {
        if (response.success) {
            window.location.href = '/dashboard';
        } else {
            alert('ç™»å½•å¤±è´¥');
        }
    });
});

// åŠ è½½é¡µé¢æ•°æ®ï¼ˆæ­£å¸¸ä¼˜å…ˆçº§ï¼‰
requestPool.addNormal(() => {
    return $.ajax({
        url: '/api/dashboard-data'
    });
}).then(function(data) {
    $('#dashboard').html(data);
});

// å‘é€ç»Ÿè®¡ä¿¡æ¯ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
requestPool.addLow(() => {
    return $.ajax({
        url: '/api/analytics',
        method: 'POST',
        data: { page: 'dashboard', time: Date.now() }
    });
});
```

---

## 9. ğŸ—œï¸ å“åº”æ•°æ®å‹ç¼©å¤„ç†



### 9.1 ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©å¤„ç†



**é€šä¿—è§£é‡Š**ï¼šå°±åƒæŠŠè¡£æœè£…è¿›å‹ç¼©è¢‹ä¸€æ ·ï¼ŒåŒæ ·çš„æ•°æ®å ç”¨æ›´å°‘çš„ä¼ è¾“ç©ºé—´å’Œæ—¶é—´ã€‚

```
æ•°æ®ä¼ è¾“æ•ˆæœå¯¹æ¯”ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå§‹JSONæ•°æ® (100KB)  â”‚ â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ å‹ç¼©
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ å‹ç¼©å (25KB)        â”‚ â†â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ä¼ è¾“æ—¶é—´å‡å°‘ 75%ï¼
```

### 9.2 å®¢æˆ·ç«¯è§£å‹å¤„ç†



```javascript
// æ£€æµ‹å’Œå¤„ç†å‹ç¼©å“åº”
$.ajaxSetup({
    beforeSend: function(xhr) {
        // å‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬æ”¯æŒå‹ç¼©
        xhr.setRequestHeader('Accept-Encoding', 'gzip, deflate, br');
    },
    
    success: function(data, textStatus, xhr) {
        // æ£€æŸ¥å“åº”æ˜¯å¦è¢«å‹ç¼©
        const encoding = xhr.getResponseHeader('Content-Encoding');
        if (encoding) {
            console.log('å“åº”ä½¿ç”¨äº†å‹ç¼©:', encoding);
        }
        
        // jQueryä¼šè‡ªåŠ¨è§£å‹ï¼Œæˆ‘ä»¬åªéœ€è¦è®°å½•ä¿¡æ¯
        const responseSize = xhr.getResponseHeader('Content-Length');
        if (responseSize) {
            console.log('å“åº”å¤§å°:', responseSize, 'å­—èŠ‚');
        }
    }
});
```

### 9.3 å¤§æ•°æ®åˆ†å—å¤„ç†



```javascript
// å¤„ç†å¤§é‡æ•°æ®æ—¶çš„åˆ†å—ç­–ç•¥
class ChunkedDataProcessor {
    constructor(chunkSize = 1000) {
        this.chunkSize = chunkSize;
    }
    
    // åˆ†å—å¤„ç†å¤§æ•°ç»„
    processLargeData(data, processFn, onProgress) {
        return new Promise((resolve) => {
            let index = 0;
            const total = data.length;
            const results = [];
            
            function processChunk() {
                const endIndex = Math.min(index + this.chunkSize, total);
                const chunk = data.slice(index, endIndex);
                
                // å¤„ç†å½“å‰å—
                const chunkResult = processFn(chunk);
                results.push(...chunkResult);
                
                index = endIndex;
                
                // æŠ¥å‘Šè¿›åº¦
                if (onProgress) {
                    onProgress(index, total);
                }
                
                // å¦‚æœè¿˜æœ‰æ•°æ®ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€å—
                if (index < total) {
                    // ä½¿ç”¨setTimeoutè®©å‡ºæ§åˆ¶æƒï¼Œé¿å…é˜»å¡UI
                    setTimeout(processChunk.bind(this), 0);
                } else {
                    resolve(results);
                }
            }
            
            processChunk.call(this);
        });
    }
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šå¤„ç†å¤§é‡ç”¨æˆ·æ•°æ®
function loadAndProcessUsers() {
    $.ajax({
        url: '/api/all-users',
        success: async function(response) {
            console.log('æ”¶åˆ°', response.length, 'æ¡ç”¨æˆ·æ•°æ®');
            
            const processor = new ChunkedDataProcessor(500);
            
            // åˆ†å—å¤„ç†æ•°æ®
            const processedData = await processor.processLargeData(
                response,
                function(chunk) {
                    // å¯¹æ¯ä¸ªå—è¿›è¡Œå¤„ç†ï¼ˆæ¯”å¦‚æ ¼å¼åŒ–ï¼‰
                    return chunk.map(user => ({
                        id: user.id,
                        name: user.name,
                        displayName: `${user.name} (${user.email})`
                    }));
                },
                function(current, total) {
                    // æ˜¾ç¤ºè¿›åº¦
                    const percent = Math.round(current / total * 100);
                    $('#progress').text(`å¤„ç†ä¸­... ${percent}%`);
                }
            );
            
            console.log('æ•°æ®å¤„ç†å®Œæˆ');
            renderUserList(processedData);
        }
    });
}

function renderUserList(users) {
    const $list = $('#user-list');
    $list.empty();
    
    // åˆ†æ‰¹æ¸²æŸ“ï¼Œé¿å…ä¸€æ¬¡æ€§æ¸²æŸ“å¤ªå¤šDOM
    let index = 0;
    const batchSize = 100;
    
    function renderBatch() {
        const endIndex = Math.min(index + batchSize, users.length);
        const batch = users.slice(index, endIndex);
        
        const html = batch.map(user => 
            `<div class="user-item">${user.displayName}</div>`
        ).join('');
        
        $list.append(html);
        index = endIndex;
        
        if (index < users.length) {
            setTimeout(renderBatch, 0);
        }
    }
    
    renderBatch();
}
```

### 9.4 æ™ºèƒ½æ•°æ®å‹ç¼©ç­–ç•¥



```javascript
// æ ¹æ®æ•°æ®ç±»å‹é€‰æ‹©æœ€ä¼˜ä¼ è¾“æ ¼å¼
const dataOptimizer = {
    // æ£€æµ‹æ•°æ®ç±»å‹å¹¶é€‰æ‹©æœ€ä¼˜æ ¼å¼
    optimizeRequest: function(data) {
        const dataSize = JSON.stringify(data).length;
        
        // å°æ•°æ®ç›´æ¥å‘é€
        if (dataSize < 1024) {
            return {
                data: data,
                headers: { 'Content-Type': 'application/json' }
            };
        }
        
        // å¤§æ•°æ®è€ƒè™‘å‹ç¼©
        if (dataSize > 10240) {
            console.log('æ•°æ®è¾ƒå¤§ï¼Œå»ºè®®ä½¿ç”¨å‹ç¼©ä¼ è¾“');
            return {
                data: data,
                headers: { 
                    'Content-Type': 'application/json',
                    'Accept-Encoding': 'gzip'
                }
            };
        }
        
        return {
            data: data,
            headers: { 'Content-Type': 'application/json' }
        };
    },
    
    // ä¼˜åŒ–å“åº”æ•°æ®å¤„ç†
    processResponse: function(response, xhr) {
        const contentType = xhr.getResponseHeader('Content-Type');
        const contentLength = xhr.getResponseHeader('Content-Length');
        
        console.log(`å“åº”ç±»å‹: ${contentType}, å¤§å°: ${contentLength}å­—èŠ‚`);
        
        // æ ¹æ®æ•°æ®å¤§å°é€‰æ‹©ä¸åŒçš„å¤„ç†ç­–ç•¥
        if (contentLength && parseInt(contentLength) > 100000) {
            console.log('å¤§æ•°æ®å“åº”ï¼Œå»ºè®®åˆ†æ‰¹å¤„ç†');
            return this.processLargeResponse(response);
        }
        
        return response;
    },
    
    processLargeResponse: function(data) {
        // å¦‚æœæ˜¯æ•°ç»„ï¼Œå¯ä»¥è€ƒè™‘åˆ†é¡µæ˜¾ç¤º
        if (Array.isArray(data) && data.length > 1000) {
            console.log('æ•°æ®é‡å¤§ï¼Œå¯ç”¨è™šæ‹Ÿæ»šåŠ¨æˆ–åˆ†é¡µ');
            return {
                data: data,
                suggestion: 'use-pagination'
            };
        }
        
        return data;
    }
};

// ä½¿ç”¨ä¼˜åŒ–å™¨çš„Ajaxè¯·æ±‚
function optimizedAjax(url, data) {
    const optimized = dataOptimizer.optimizeRequest(data);
    
    return $.ajax({
        url: url,
        method: 'POST',
        data: optimized.data,
        headers: optimized.headers,
        success: function(response, textStatus, xhr) {
            const processed = dataOptimizer.processResponse(response, xhr);
            return processed;
        }
    });
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 10.1 å¿…é¡»æŒæ¡çš„ä¼˜åŒ–ç­–ç•¥



```
ğŸ¯ è¯·æ±‚æ§åˆ¶ï¼š
â€¢ é˜²æŠ–èŠ‚æµ â†’ å‡å°‘æ— æ•ˆè¯·æ±‚
â€¢ å»é‡æœºåˆ¶ â†’ é¿å…é‡å¤æäº¤
â€¢ ç¼“å­˜ç­–ç•¥ â†’ æé«˜å“åº”é€Ÿåº¦

âš¡ æ€§èƒ½ä¼˜åŒ–ï¼š
â€¢ å¹¶å‘æ§åˆ¶ â†’ åˆç†åˆ†é…èµ„æº
â€¢ æ•°æ®å‹ç¼© â†’ å‡å°‘ä¼ è¾“æ—¶é—´
â€¢ CDNä½¿ç”¨ â†’ å°±è¿‘è·å–æ•°æ®

ğŸ“± ç§»åŠ¨ç«¯é€‚é…ï¼š
â€¢ ç½‘ç»œæ£€æµ‹ â†’ è‡ªé€‚åº”ç­–ç•¥
â€¢ ç¦»çº¿ç¼“å­˜ â†’ æå‡ç”¨æˆ·ä½“éªŒ
â€¢ åˆ†å—å¤„ç† â†’ é¿å…é˜»å¡UI
```

### 10.2 ä¼˜åŒ–æ•ˆæœå¯¹æ¯”è¡¨



| ä¼˜åŒ–ç­–ç•¥ | **å®æ–½éš¾åº¦** | **æ€§èƒ½æå‡** | **ç”¨æˆ·ä½“éªŒ** | **æ¨èæŒ‡æ•°** |
|---------|-------------|-------------|-------------|-------------|
| **è¯·æ±‚é˜²æŠ–** | `ğŸŸ¢ ç®€å•` | `â­â­â­` | `â­â­â­â­` | `ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥` |
| **æ•°æ®ç¼“å­˜** | `ğŸŸ¡ ä¸­ç­‰` | `â­â­â­â­` | `â­â­â­â­â­` | `ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥` |
| **å¹¶å‘æ§åˆ¶** | `ğŸŸ¡ ä¸­ç­‰` | `â­â­â­â­` | `â­â­â­` | `ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥` |
| **CDNä¼˜åŒ–** | `ğŸŸ¢ ç®€å•` | `â­â­â­â­â­` | `â­â­â­â­` | `ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥` |
| **ç§»åŠ¨ç«¯é€‚é…** | `ğŸ”´ å›°éš¾` | `â­â­â­` | `â­â­â­â­â­` | `ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥` |

### 10.3 å®æ–½å»ºè®®



**ğŸ¯ æ–°æ‰‹èµ·æ­¥ï¼ˆå¿…åšï¼‰**ï¼š
1. **è¯·æ±‚é˜²æŠ–** - æœç´¢æ¡†è¾“å…¥é˜²æŠ–
2. **ç®€å•ç¼“å­˜** - å¸¸ç”¨æ•°æ®ç¼“å­˜5-10åˆ†é’Ÿ
3. **æŒ‰é’®é˜²é‡å¤** - é˜²æ­¢é‡å¤æäº¤

**âš¡ è¿›é˜¶ä¼˜åŒ–ï¼ˆæ¨èï¼‰**ï¼š
1. **å¹¶å‘æ§åˆ¶** - é™åˆ¶åŒæ—¶è¯·æ±‚æ•°é‡
2. **CDNåˆ‡æ¢** - å¤šèŠ‚ç‚¹è‡ªåŠ¨åˆ‡æ¢
3. **æ•°æ®åˆ†é¡µ** - å¤§æ•°æ®åˆ†æ‰¹åŠ è½½

**ğŸš€ é«˜çº§ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰**ï¼š
1. **æ™ºèƒ½å‹ç¼©** - æ ¹æ®æ•°æ®å¤§å°è‡ªåŠ¨é€‰æ‹©ç­–ç•¥
2. **ç¦»çº¿æ”¯æŒ** - ç½‘ç»œå¼‚å¸¸æ—¶çš„é™çº§æ–¹æ¡ˆ
3. **æ€§èƒ½ç›‘æ§** - è¯·æ±‚è€—æ—¶å’ŒæˆåŠŸç‡ç»Ÿè®¡

### 10.4 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ



> **â“ é—®é¢˜1ï¼šç”¨æˆ·ç–¯ç‹‚ç‚¹å‡»æäº¤æŒ‰é’®**
> 
> **ğŸ’¡ è§£å†³**ï¼šæŒ‰é’®ç¦ç”¨ + é˜²é‡å¤è¯·æ±‚æœºåˆ¶
> ```javascript
> $('#submit').prop('disabled', true).text('æäº¤ä¸­...');
> ```

> **â“ é—®é¢˜2ï¼šæœç´¢æ¡†è¾“å…¥å¡é¡¿**
> 
> **ğŸ’¡ è§£å†³**ï¼šä½¿ç”¨é˜²æŠ–ï¼Œå»¶è¿Ÿ500msåå†æœç´¢
> ```javascript
> clearTimeout(searchTimer);
> searchTimer = setTimeout(search, 500);
> ```

> **â“ é—®é¢˜3ï¼šç§»åŠ¨ç«¯åŠ è½½æ…¢**
> 
> **ğŸ’¡ è§£å†³**ï¼šæ£€æµ‹ç½‘ç»œçŠ¶å†µï¼Œæ…¢ç½‘ç»œæ—¶å¢åŠ è¶…æ—¶æ—¶é—´
> ```javascript
> const timeout = network.type === '2g' ? 30000 : 10000;
> ```

> **â“ é—®é¢˜4ï¼šå¤§é‡æ•°æ®å¯¼è‡´é¡µé¢å¡æ­»**
> 
> **ğŸ’¡ è§£å†³**ï¼šåˆ†æ‰¹å¤„ç† + setTimeoutè®©å‡ºæ§åˆ¶æƒ
> ```javascript
> setTimeout(processNextBatch, 0);
> ```

### 10.5 è®°å¿†å£è¯€



```
Ajaxä¼˜åŒ–æœ‰å¦™æ‹›ï¼Œ
é˜²æŠ–èŠ‚æµå°‘ä¸äº†ï¼Œ
ç¼“å­˜æ•°æ®æé€Ÿåº¦ï¼Œ
å¹¶å‘æ§åˆ¶èµ„æºå¥½ã€‚

CDNå°±è¿‘ä¼ è¾“å¿«ï¼Œ
ç§»åŠ¨é€‚é…å¾ˆé‡è¦ï¼Œ
åˆ†æ‰¹å¤„ç†ä¸å¡é¡¿ï¼Œ
ç”¨æˆ·ä½“éªŒèŠ‚èŠ‚é«˜ï¼
```

---

> ğŸ“ **å­¦ä¹ å»ºè®®**ï¼š
> 
> 1. **ä»ç®€å•å¼€å§‹** - å…ˆå®ç°é˜²æŠ–å’Œç¼“å­˜ï¼Œæ•ˆæœç«‹ç«¿è§å½±
> 2. **é€æ­¥ä¼˜åŒ–** - ä¸è¦ä¸€æ¬¡æ€§å®ç°æ‰€æœ‰ä¼˜åŒ–ï¼Œå¾ªåºæ¸è¿›
> 3. **ç›‘æ§æ•ˆæœ** - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è§‚å¯Ÿä¼˜åŒ–æ•ˆæœ
> 4. **ç”¨æˆ·åé¦ˆ** - å…³æ³¨ç”¨æˆ·ä½“éªŒï¼Œæ•°æ®è¯´è¯
> 