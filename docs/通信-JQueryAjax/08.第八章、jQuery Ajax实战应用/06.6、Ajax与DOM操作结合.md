---
title: 6ã€Ajaxä¸DOMæ“ä½œç»“åˆ
---
## ğŸ“š ç›®å½•

1. [Ajaxä¸DOMç»“åˆçš„æ ¸å¿ƒç†å¿µ](#1-ajaxä¸domç»“åˆçš„æ ¸å¿ƒç†å¿µ)
2. [Ajaxæ•°æ®æ¸²æŸ“åˆ°DOM](#2-ajaxæ•°æ®æ¸²æŸ“åˆ°dom)
3. [åŠ¨æ€åŠ è½½å†…å®¹å®æˆ˜](#3-åŠ¨æ€åŠ è½½å†…å®¹å®æˆ˜)
4. [äº‹ä»¶å§”æ‰˜å¤„ç†åŠ¨æ€å†…å®¹](#4-äº‹ä»¶å§”æ‰˜å¤„ç†åŠ¨æ€å†…å®¹)
5. [æ¨¡æ¿æ¸²æŸ“æŠ€å·§](#5-æ¨¡æ¿æ¸²æŸ“æŠ€å·§)
6. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#6-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Ajaxä¸DOMç»“åˆçš„æ ¸å¿ƒç†å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Ajaxä¸DOMç»“åˆ


**é€šä¿—è§£é‡Š**ï¼šæƒ³è±¡ä½ åœ¨çœ‹ä¸€ä¸ªæ–°é—»ç½‘ç«™ï¼Œå½“ä½ ç‚¹å‡»"åŠ è½½æ›´å¤š"æŒ‰é’®æ—¶ï¼Œé¡µé¢ä¸åˆ·æ–°ï¼Œä½†æ–°çš„æ–°é—»åˆ—è¡¨ç¥å¥‡åœ°å‡ºç°äº†ã€‚è¿™å°±æ˜¯Ajaxä¸DOMç»“åˆçš„å…¸å‹åº”ç”¨ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼šç‚¹å‡»æŒ‰é’® â†’ æ•´ä¸ªé¡µé¢åˆ·æ–° â†’ æ˜¾ç¤ºæ–°å†…å®¹
Ajaxæ–¹å¼ï¼šç‚¹å‡»æŒ‰é’® â†’ åå°è·å–æ•°æ® â†’ åªæ›´æ–°éƒ¨åˆ†é¡µé¢
```

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **Ajaxè´Ÿè´£**ï¼šå‘æœåŠ¡å™¨è¦æ•°æ®ï¼ˆå¹•åå·¥ä½œï¼‰
- **DOMæ“ä½œè´Ÿè´£**ï¼šæŠŠæ•°æ®æ˜¾ç¤ºåˆ°é¡µé¢ä¸Šï¼ˆå‰å°å±•ç¤ºï¼‰
- **ç»“åˆæ•ˆæœ**ï¼šæ— ç¼çš„ç”¨æˆ·ä½“éªŒï¼Œé¡µé¢å±€éƒ¨æ›´æ–°

### 1.2 ä¸ºä»€ä¹ˆè¦ç»“åˆä½¿ç”¨


**ç”Ÿæ´»ç±»æ¯”**ï¼š
```
å°±åƒåœ¨é¤å…ç‚¹èœï¼š
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ç‚¹ä¸€é“èœéƒ½è¦é‡æ–°æ¢æ¡Œå­ï¼ˆé¡µé¢åˆ·æ–°ï¼‰
Ajax+DOMï¼šèœä¸€é“é“ç«¯ä¸Šæ¥ï¼Œæ¡Œå­ä¸ç”¨æ¢ï¼ˆå±€éƒ¨æ›´æ–°ï¼‰
```

**å®é™…å¥½å¤„**ï¼š
- âœ… **ç”¨æˆ·ä½“éªŒå¥½**ï¼šé¡µé¢ä¸é—ªçƒï¼Œæ“ä½œæµç•…
- âœ… **èŠ‚çœæµé‡**ï¼šåªä¼ è¾“éœ€è¦çš„æ•°æ®ï¼Œä¸é‡å¤åŠ è½½é¡µé¢ç»“æ„
- âœ… **å“åº”é€Ÿåº¦å¿«**ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†

---

## 2. ğŸ“„ Ajaxæ•°æ®æ¸²æŸ“åˆ°DOM


### 2.1 åŸºç¡€æ¸²æŸ“æµç¨‹


**æ ¸å¿ƒæ­¥éª¤**ï¼š
```
ç¬¬1æ­¥ï¼šå‘é€Ajaxè¯·æ±‚è·å–æ•°æ®
ç¬¬2æ­¥ï¼šè§£æè¿”å›çš„æ•°æ®
ç¬¬3æ­¥ï¼šæ„å»ºHTMLç»“æ„
ç¬¬4æ­¥ï¼šæ’å…¥åˆ°é¡µé¢æŒ‡å®šä½ç½®
```

**ç®€å•ç¤ºä¾‹**ï¼šè·å–ç”¨æˆ·ä¿¡æ¯å¹¶æ˜¾ç¤º
```javascript
// ç¬¬1æ­¥ï¼šå‘é€è¯·æ±‚
$.ajax({
    url: '/api/user/123',
    method: 'GET',
    success: function(userData) {
        // ç¬¬2æ­¥ï¼šæ•°æ®å·²è·å–åˆ°
        console.log(userData); // {name: "å¼ ä¸‰", age: 25, email: "..."}
        
        // ç¬¬3æ­¥ï¼šæ„å»ºHTML
        var userHtml = '<div class="user-info">' +
                      '<h3>' + userData.name + '</h3>' +
                      '<p>å¹´é¾„ï¼š' + userData.age + '</p>' +
                      '<p>é‚®ç®±ï¼š' + userData.email + '</p>' +
                      '</div>';
        
        // ç¬¬4æ­¥ï¼šæ’å…¥åˆ°é¡µé¢
        $('#user-container').html(userHtml);
    }
});
```

### 2.2 å¸¸ç”¨çš„DOMæ’å…¥æ–¹æ³•


| æ–¹æ³• | **ä½œç”¨** | **ä½¿ç”¨åœºæ™¯** |
|------|---------|-------------|
| `.html()` | `æ›¿æ¢å…ƒç´ å†…éƒ¨æ‰€æœ‰å†…å®¹` | `å®Œå…¨æ›´æ–°ä¸€ä¸ªåŒºåŸŸ` |
| `.append()` | `åœ¨å…ƒç´ æœ«å°¾æ·»åŠ å†…å®¹` | `è¿½åŠ æ–°æ•°æ®ï¼ˆå¦‚è¯„è®ºåˆ—è¡¨ï¼‰` |
| `.prepend()` | `åœ¨å…ƒç´ å¼€å¤´æ·»åŠ å†…å®¹` | `æ’å…¥æœ€æ–°æ•°æ®ï¼ˆå¦‚æ¶ˆæ¯é€šçŸ¥ï¼‰` |
| `.after()` | `åœ¨å…ƒç´ åé¢æ·»åŠ å†…å®¹` | `åœ¨ç‰¹å®šä½ç½®æ’å…¥` |
| `.before()` | `åœ¨å…ƒç´ å‰é¢æ·»åŠ å†…å®¹` | `åœ¨ç‰¹å®šä½ç½®æ’å…¥` |

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```javascript
// åœºæ™¯1ï¼šæ›¿æ¢æ•´ä¸ªå•†å“åˆ—è¡¨
$.get('/api/products', function(products) {
    $('#product-list').html(''); // å…ˆæ¸…ç©º
    products.forEach(function(product) {
        var productHtml = '<div class="product">' + product.name + '</div>';
        $('#product-list').append(productHtml); // é€ä¸ªæ·»åŠ 
    });
});

// åœºæ™¯2ï¼šæ·»åŠ æ–°è¯„è®ºåˆ°è¯„è®ºåˆ—è¡¨æœ«å°¾
function addComment(commentData) {
    var commentHtml = '<div class="comment">' +
                     '<strong>' + commentData.author + 'ï¼š</strong>' +
                     commentData.content +
                     '</div>';
    $('#comment-list').append(commentHtml);
}
```

---

## 3. ğŸ”„ åŠ¨æ€åŠ è½½å†…å®¹å®æˆ˜


### 3.1 åˆ†é¡µåŠ è½½å®ç°


**åº”ç”¨åœºæ™¯**ï¼šå½“ç”¨æˆ·æµè§ˆå•†å“åˆ—è¡¨æ—¶ï¼Œç‚¹å‡»"ä¸‹ä¸€é¡µ"ä¸åˆ·æ–°é¡µé¢ï¼Œè€Œæ˜¯åŠ è½½æ–°çš„å•†å“æ•°æ®ã€‚

```javascript
var currentPage = 1; // å½“å‰é¡µç 

// åŠ è½½æŒ‡å®šé¡µçš„æ•°æ®
function loadPage(page) {
    // æ˜¾ç¤ºåŠ è½½æç¤º
    $('#loading').show();
    $('#product-list').addClass('loading');
    
    $.ajax({
        url: '/api/products',
        data: { page: page, limit: 10 },
        success: function(response) {
            // æ„å»ºå•†å“HTML
            var productListHtml = '';
            response.products.forEach(function(product) {
                productListHtml += '<div class="product-item">' +
                                  '<img src="' + product.image + '">' +
                                  '<h4>' + product.name + '</h4>' +
                                  '<span class="price">ï¿¥' + product.price + '</span>' +
                                  '</div>';
            });
            
            // æ›´æ–°é¡µé¢
            $('#product-list').html(productListHtml);
            $('#current-page').text(page);
            
            // æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€
            updatePaginationButtons(page, response.totalPages);
        },
        complete: function() {
            // éšè—åŠ è½½æç¤º
            $('#loading').hide();
            $('#product-list').removeClass('loading');
        }
    });
}

// ç»‘å®šåˆ†é¡µæŒ‰é’®äº‹ä»¶
$('#next-page').click(function() {
    currentPage++;
    loadPage(currentPage);
});

$('#prev-page').click(function() {
    if (currentPage > 1) {
        currentPage--;
        loadPage(currentPage);
    }
});
```

### 3.2 æ— é™æ»šåŠ¨åŠ è½½


**åº”ç”¨åœºæ™¯**ï¼šåƒå¾®åšã€æœ‹å‹åœˆé‚£æ ·ï¼Œæ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šå†…å®¹ã€‚

```javascript
var isLoading = false; // é˜²æ­¢é‡å¤åŠ è½½
var hasMore = true;    // æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®

// æ£€æµ‹æ»šåŠ¨åˆ°åº•éƒ¨
$(window).scroll(function() {
    // å¦‚æœæ­£åœ¨åŠ è½½æˆ–æ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œå°±ä¸æ‰§è¡Œ
    if (isLoading || !hasMore) return;
    
    // è®¡ç®—æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨
    var scrollTop = $(window).scrollTop();
    var windowHeight = $(window).height();
    var documentHeight = $(document).height();
    
    // è·ç¦»åº•éƒ¨è¿˜æœ‰100pxæ—¶å°±å¼€å§‹åŠ è½½
    if (scrollTop + windowHeight >= documentHeight - 100) {
        loadMoreContent();
    }
});

function loadMoreContent() {
    isLoading = true;
    
    // æ˜¾ç¤ºåŠ è½½æç¤º
    $('#load-more-tip').show().text('æ­£åœ¨åŠ è½½...');
    
    $.ajax({
        url: '/api/more-content',
        data: { offset: $('.content-item').length },
        success: function(response) {
            if (response.items && response.items.length > 0) {
                // æ„å»ºHTMLå¹¶è¿½åŠ åˆ°åˆ—è¡¨
                var contentHtml = '';
                response.items.forEach(function(item) {
                    contentHtml += '<div class="content-item">' +
                                  '<h3>' + item.title + '</h3>' +
                                  '<p>' + item.summary + '</p>' +
                                  '</div>';
                });
                
                $('#content-list').append(contentHtml);
                
                // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šæ•°æ®
                hasMore = response.hasMore;
                if (!hasMore) {
                    $('#load-more-tip').text('æ²¡æœ‰æ›´å¤šå†…å®¹äº†');
                }
            } else {
                hasMore = false;
                $('#load-more-tip').text('æ²¡æœ‰æ›´å¤šå†…å®¹äº†');
            }
        },
        error: function() {
            $('#load-more-tip').text('åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•');
        },
        complete: function() {
            isLoading = false;
            if (hasMore) {
                $('#load-more-tip').hide();
            }
        }
    });
}
```

### 3.3 æœç´¢å®æ—¶æç¤º


**åº”ç”¨åœºæ™¯**ï¼šç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥æ—¶ï¼Œå®æ—¶æ˜¾ç¤ºæœç´¢å»ºè®®ã€‚

```javascript
var searchTimer; // ç”¨äºå»¶è¿Ÿæœç´¢

$('#search-input').on('input', function() {
    var keyword = $(this).val().trim();
    
    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
    clearTimeout(searchTimer);
    
    if (keyword.length < 2) {
        $('#search-suggestions').hide();
        return;
    }
    
    // å»¶è¿Ÿ300æ¯«ç§’åæœç´¢ï¼ˆé¿å…é¢‘ç¹è¯·æ±‚ï¼‰
    searchTimer = setTimeout(function() {
        searchSuggestions(keyword);
    }, 300);
});

function searchSuggestions(keyword) {
    $.ajax({
        url: '/api/search/suggestions',
        data: { keyword: keyword },
        success: function(suggestions) {
            var suggestionsHtml = '';
            
            if (suggestions.length > 0) {
                suggestions.forEach(function(item) {
                    suggestionsHtml += '<div class="suggestion-item" data-value="' + item.value + '">' +
                                      '<i class="icon-search"></i>' +
                                      '<span>' + item.text + '</span>' +
                                      '</div>';
                });
                
                $('#search-suggestions').html(suggestionsHtml).show();
            } else {
                $('#search-suggestions').hide();
            }
        }
    });
}

// ç‚¹å‡»å»ºè®®é¡¹æ—¶å¡«å…¥æœç´¢æ¡†
$(document).on('click', '.suggestion-item', function() {
    var value = $(this).data('value');
    $('#search-input').val(value);
    $('#search-suggestions').hide();
    // å¯ä»¥åœ¨è¿™é‡Œè§¦å‘æœç´¢
});
```

---

## 4. ğŸ“‹ äº‹ä»¶å§”æ‰˜å¤„ç†åŠ¨æ€å†…å®¹


### 4.1 ä»€ä¹ˆæ˜¯äº‹ä»¶å§”æ‰˜


**é€šä¿—è§£é‡Š**ï¼š
```
æƒ³è±¡ä¸€ä¸ªç­çº§çš„æƒ…å†µï¼š

æ™®é€šäº‹ä»¶ç»‘å®šï¼š
- å¼€å­¦æ—¶ç»™æ¯ä¸ªå­¦ç”Ÿå‘ä¸€ä¸ªé—¨ç¦å¡
- æ–°è½¬æ¥çš„å­¦ç”Ÿæ²¡æœ‰é—¨ç¦å¡ï¼Œè¿›ä¸äº†æ•™å®¤

äº‹ä»¶å§”æ‰˜ï¼š
- åœ¨æ•™å®¤é—¨å£å®‰æ’ä¸€ä¸ªé—¨å«
- æ‰€æœ‰å­¦ç”Ÿï¼ˆåŒ…æ‹¬æ–°æ¥çš„ï¼‰éƒ½é€šè¿‡é—¨å«è¿›å…¥
- é—¨å«æ ¹æ®å­¦ç”Ÿçš„èº«ä»½å†³å®šæ˜¯å¦æ”¾è¡Œ
```

**æŠ€æœ¯è§£é‡Š**ï¼š
- **æ™®é€šç»‘å®š**ï¼šç›´æ¥ç»™é¡µé¢ä¸Šå·²å­˜åœ¨çš„å…ƒç´ ç»‘å®šäº‹ä»¶
- **äº‹ä»¶å§”æ‰˜**ï¼šç»™çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œé€šè¿‡äº‹ä»¶å†’æ³¡æœºåˆ¶å¤„ç†å­å…ƒç´ çš„äº‹ä»¶

### 4.2 ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å§”æ‰˜


**é—®é¢˜åœºæ™¯**ï¼š
```javascript
// é¡µé¢åˆå§‹æ—¶ç»‘å®šåˆ é™¤äº‹ä»¶
$('.delete-btn').click(function() {
    $(this).parent().remove();
});

// é€šè¿‡Ajaxæ·»åŠ æ–°çš„å†…å®¹
$.get('/api/new-item', function(data) {
    var newItemHtml = '<div class="item">' +
                     '<span>' + data.name + '</span>' +
                     '<button class="delete-btn">åˆ é™¤</button>' +
                     '</div>';
    $('#item-list').append(newItemHtml);
});

// é—®é¢˜ï¼šæ–°æ·»åŠ çš„åˆ é™¤æŒ‰é’®ç‚¹å‡»æ— æ•ˆï¼
// å› ä¸ºç»‘å®šäº‹ä»¶æ—¶ï¼Œè¿™äº›æŒ‰é’®è¿˜ä¸å­˜åœ¨
```

**äº‹ä»¶å§”æ‰˜è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// ç»™çˆ¶å®¹å™¨ç»‘å®šäº‹ä»¶ï¼Œå¤„ç†æ‰€æœ‰åˆ é™¤æŒ‰é’®çš„ç‚¹å‡»
$('#item-list').on('click', '.delete-btn', function() {
    $(this).parent().remove();
});

// ç°åœ¨æ— è®ºä½•æ—¶æ·»åŠ æ–°å†…å®¹ï¼Œåˆ é™¤åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å·¥ä½œ
$.get('/api/new-item', function(data) {
    var newItemHtml = '<div class="item">' +
                     '<span>' + data.name + '</span>' +
                     '<button class="delete-btn">åˆ é™¤</button>' +
                     '</div>';
    $('#item-list').append(newItemHtml);
    // ä¸éœ€è¦é‡æ–°ç»‘å®šäº‹ä»¶ï¼
});
```

### 4.3 äº‹ä»¶å§”æ‰˜çš„å®é™…åº”ç”¨


**è´­ç‰©è½¦åŠŸèƒ½ç¤ºä¾‹**ï¼š
```javascript
// è´­ç‰©è½¦å®¹å™¨ç»Ÿä¸€å¤„ç†æ‰€æœ‰äº‹ä»¶
$('#shopping-cart').on('click', '.quantity-plus', function() {
    // å¢åŠ å•†å“æ•°é‡
    var $quantityInput = $(this).siblings('.quantity-input');
    var currentQty = parseInt($quantityInput.val());
    $quantityInput.val(currentQty + 1);
    updateCartItem($(this).closest('.cart-item'));
});

$('#shopping-cart').on('click', '.quantity-minus', function() {
    // å‡å°‘å•†å“æ•°é‡
    var $quantityInput = $(this).siblings('.quantity-input');
    var currentQty = parseInt($quantityInput.val());
    if (currentQty > 1) {
        $quantityInput.val(currentQty - 1);
        updateCartItem($(this).closest('.cart-item'));
    }
});

$('#shopping-cart').on('click', '.remove-item', function() {
    // ç§»é™¤å•†å“
    var $cartItem = $(this).closest('.cart-item');
    var itemId = $cartItem.data('item-id');
    
    // Ajaxåˆ é™¤
    $.ajax({
        url: '/api/cart/remove',
        method: 'POST',
        data: { itemId: itemId },
        success: function() {
            $cartItem.fadeOut(function() {
                $(this).remove();
                updateCartTotal();
            });
        }
    });
});

// æ·»åŠ æ–°å•†å“åˆ°è´­ç‰©è½¦
function addToCart(productId) {
    $.ajax({
        url: '/api/cart/add',
        method: 'POST',
        data: { productId: productId },
        success: function(cartItem) {
            var cartItemHtml = '<div class="cart-item" data-item-id="' + cartItem.id + '">' +
                              '<span class="item-name">' + cartItem.name + '</span>' +
                              '<div class="quantity-controls">' +
                              '<button class="quantity-minus">-</button>' +
                              '<input class="quantity-input" value="' + cartItem.quantity + '">' +
                              '<button class="quantity-plus">+</button>' +
                              '</div>' +
                              '<button class="remove-item">åˆ é™¤</button>' +
                              '</div>';
            
            $('#shopping-cart').append(cartItemHtml);
            // æ–°æ·»åŠ çš„å…ƒç´ è‡ªåŠ¨å…·æœ‰æ‰€æœ‰åŠŸèƒ½ï¼
        }
    });
}
```

**è¡¨æ ¼åŠ¨æ€æ“ä½œç¤ºä¾‹**ï¼š
```javascript
// æ•°æ®è¡¨æ ¼çš„ç»Ÿä¸€äº‹ä»¶å¤„ç†
$('#data-table').on('click', '.edit-btn', function() {
    var $row = $(this).closest('tr');
    var rowData = getRowData($row);
    showEditDialog(rowData);
});

$('#data-table').on('click', '.delete-btn', function() {
    var $row = $(this).closest('tr');
    var itemId = $row.data('id');
    
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
        deleteTableRow(itemId, $row);
    }
});

// åŠ è½½æ–°çš„è¡¨æ ¼æ•°æ®
function loadTableData(page) {
    $.ajax({
        url: '/api/table-data',
        data: { page: page },
        success: function(response) {
            var tableHtml = '';
            response.data.forEach(function(item) {
                tableHtml += '<tr data-id="' + item.id + '">' +
                           '<td>' + item.name + '</td>' +
                           '<td>' + item.email + '</td>' +
                           '<td>' +
                           '<button class="edit-btn">ç¼–è¾‘</button>' +
                           '<button class="delete-btn">åˆ é™¤</button>' +
                           '</td>' +
                           '</tr>';
            });
            
            $('#data-table tbody').html(tableHtml);
            // æ‰€æœ‰æŒ‰é’®è‡ªåŠ¨å…·æœ‰ç¼–è¾‘å’Œåˆ é™¤åŠŸèƒ½
        }
    });
}
```

---

## 5. ğŸ¨ æ¨¡æ¿æ¸²æŸ“æŠ€å·§


### 5.1 ç®€å•å­—ç¬¦ä¸²æ¨¡æ¿


**åŸºç¡€æ¨¡æ¿æ–¹æ³•**ï¼š
```javascript
// åˆ›å»ºç®€å•çš„æ¨¡æ¿å‡½æ•°
function createUserCard(user) {
    return '<div class="user-card" data-user-id="' + user.id + '">' +
           '<div class="avatar">' +
           '<img src="' + (user.avatar || '/images/default-avatar.png') + '">' +
           '</div>' +
           '<div class="user-info">' +
           '<h3>' + user.name + '</h3>' +
           '<p>' + user.title + '</p>' +
           '<span class="status ' + (user.isOnline ? 'online' : 'offline') + '">' +
           (user.isOnline ? 'åœ¨çº¿' : 'ç¦»çº¿') +
           '</span>' +
           '</div>' +
           '</div>';
}

// ä½¿ç”¨æ¨¡æ¿
$.get('/api/users', function(users) {
    var usersHtml = '';
    users.forEach(function(user) {
        usersHtml += createUserCard(user);
    });
    $('#user-list').html(usersHtml);
});
```

### 5.2 æ¡ä»¶æ¸²æŸ“æŠ€å·§


**å¤„ç†ä¸åŒçŠ¶æ€çš„æ˜¾ç¤º**ï¼š
```javascript
function createOrderItem(order) {
    // æ ¹æ®è®¢å•çŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹
    var statusClass = '';
    var statusText = '';
    var actionButtons = '';
    
    switch(order.status) {
        case 'pending':
            statusClass = 'status-pending';
            statusText = 'å¾…ä»˜æ¬¾';
            actionButtons = '<button class="pay-btn" data-order-id="' + order.id + '">å»ä»˜æ¬¾</button>' +
                           '<button class="cancel-btn" data-order-id="' + order.id + '">å–æ¶ˆè®¢å•</button>';
            break;
        case 'paid':
            statusClass = 'status-paid';
            statusText = 'å·²ä»˜æ¬¾';
            actionButtons = '<button class="view-btn" data-order-id="' + order.id + '">æŸ¥çœ‹è¯¦æƒ…</button>';
            break;
        case 'shipped':
            statusClass = 'status-shipped';
            statusText = 'å·²å‘è´§';
            actionButtons = '<button class="track-btn" data-order-id="' + order.id + '">ç‰©æµè·Ÿè¸ª</button>';
            break;
        case 'completed':
            statusClass = 'status-completed';
            statusText = 'å·²å®Œæˆ';
            actionButtons = '<button class="review-btn" data-order-id="' + order.id + '">è¯„ä»·</button>';
            break;
    }
    
    return '<div class="order-item" data-order-id="' + order.id + '">' +
           '<div class="order-header">' +
           '<span class="order-number">è®¢å•å·ï¼š' + order.orderNumber + '</span>' +
           '<span class="order-status ' + statusClass + '">' + statusText + '</span>' +
           '</div>' +
           '<div class="order-content">' +
           '<div class="product-info">' + order.productName + '</div>' +
           '<div class="order-amount">ï¿¥' + order.amount + '</div>' +
           '</div>' +
           '<div class="order-actions">' + actionButtons + '</div>' +
           '</div>';
}
```

### 5.3 åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–


**æ‰¹é‡æ¸²æŸ“æå‡æ€§èƒ½**ï¼š
```javascript
function renderProductList(products) {
    // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µæå‡æ€§èƒ½
    var $container = $('#product-list');
    var htmlArray = []; // ç”¨æ•°ç»„æ”¶é›†HTMLå­—ç¬¦ä¸²
    
    // æ‰¹é‡æ„å»ºHTML
    products.forEach(function(product) {
        var discountHtml = '';
        if (product.discount) {
            discountHtml = '<span class="discount">ä¼˜æƒ ï¼š' + product.discount + '</span>';
        }
        
        var ratingHtml = '';
        if (product.rating) {
            ratingHtml = '<div class="rating">' +
                        '<span class="stars">' + generateStars(product.rating) + '</span>' +
                        '<span class="rating-text">(' + product.rating + 'åˆ†)</span>' +
                        '</div>';
        }
        
        htmlArray.push(
            '<div class="product-card" data-product-id="' + product.id + '">' +
            '<div class="product-image">' +
            '<img src="' + product.image + '" alt="' + product.name + '">' +
            discountHtml +
            '</div>' +
            '<div class="product-info">' +
            '<h4 class="product-name">' + product.name + '</h4>' +
            '<p class="product-desc">' + product.description + '</p>' +
            ratingHtml +
            '<div class="product-price">' +
            '<span class="current-price">ï¿¥' + product.price + '</span>' +
            (product.originalPrice ? '<span class="original-price">ï¿¥' + product.originalPrice + '</span>' : '') +
            '</div>' +
            '<button class="add-to-cart-btn" data-product-id="' + product.id + '">åŠ å…¥è´­ç‰©è½¦</button>' +
            '</div>' +
            '</div>'
        );
    });
    
    // ä¸€æ¬¡æ€§æ›´æ–°DOM
    $container.html(htmlArray.join(''));
}

// ç”Ÿæˆæ˜Ÿçº§è¯„åˆ†HTML
function generateStars(rating) {
    var stars = '';
    var fullStars = Math.floor(rating);
    var hasHalfStar = rating % 1 !== 0;
    
    for (var i = 0; i < fullStars; i++) {
        stars += '<i class="star star-full">â˜…</i>';
    }
    
    if (hasHalfStar) {
        stars += '<i class="star star-half">â˜†</i>';
    }
    
    return stars;
}
```

---

## 6. âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 6.1 å‡å°‘DOMæ“ä½œæ¬¡æ•°


**é—®é¢˜ç¤ºä¾‹**ï¼š
```javascript
// âŒ ä½æ•ˆçš„æ–¹å¼ï¼šæ¯æ¬¡éƒ½æ“ä½œDOM
$.get('/api/messages', function(messages) {
    $('#message-list').empty(); // ç¬¬1æ¬¡DOMæ“ä½œ
    
    messages.forEach(function(message) {
        var messageHtml = '<div class="message">' + message.content + '</div>';
        $('#message-list').append(messageHtml); // æ¯æ¬¡å¾ªç¯éƒ½æ“ä½œDOM
    });
});
```

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```javascript
// âœ… é«˜æ•ˆçš„æ–¹å¼ï¼šæ‰¹é‡æ“ä½œDOM
$.get('/api/messages', function(messages) {
    var messageListHtml = '';
    
    // å…ˆåœ¨å†…å­˜ä¸­æ„å»ºå®Œæ•´çš„HTML
    messages.forEach(function(message) {
        messageListHtml += '<div class="message">' + message.content + '</div>';
    });
    
    // ä¸€æ¬¡æ€§æ›´æ–°DOM
    $('#message-list').html(messageListHtml);
});
```

### 6.2 é¿å…é‡å¤è¯·æ±‚


**é˜²æŠ–åŠ¨å¤„ç†**ï¼š
```javascript
var searchCache = {}; // æœç´¢ç»“æœç¼“å­˜
var searchTimer;

function searchWithCache(keyword) {
    // æ£€æŸ¥ç¼“å­˜
    if (searchCache[keyword]) {
        displaySearchResults(searchCache[keyword]);
        return;
    }
    
    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
    clearTimeout(searchTimer);
    
    // å»¶è¿Ÿæœç´¢ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
    searchTimer = setTimeout(function() {
        $.ajax({
            url: '/api/search',
            data: { keyword: keyword },
            success: function(results) {
                // ç¼“å­˜ç»“æœ
                searchCache[keyword] = results;
                displaySearchResults(results);
            }
        });
    }, 300);
}

// é™åˆ¶ç¼“å­˜å¤§å°
function limitCacheSize() {
    var cacheKeys = Object.keys(searchCache);
    if (cacheKeys.length > 50) {
        // åˆ é™¤æœ€æ—©çš„ç¼“å­˜
        delete searchCache[cacheKeys[0]];
    }
}
```

### 6.3 æ‡’åŠ è½½å’Œåˆ†é¡µä¼˜åŒ–


**å›¾ç‰‡æ‡’åŠ è½½**ï¼š
```javascript
function setupImageLazyLoad() {
    $(window).scroll(function() {
        $('.lazy-image').each(function() {
            var $img = $(this);
            var imgTop = $img.offset().top;
            var windowBottom = $(window).scrollTop() + $(window).height();
            
            // å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸæ—¶æ‰åŠ è½½
            if (imgTop <= windowBottom + 100) {
                var realSrc = $img.data('src');
                if (realSrc && !$img.hasClass('loaded')) {
                    $img.attr('src', realSrc)
                        .addClass('loaded')
                        .removeClass('lazy-image');
                }
            }
        });
    });
}

// æ¸²æŸ“å¸¦æ‡’åŠ è½½çš„å•†å“åˆ—è¡¨
function renderProductsWithLazyLoad(products) {
    var productsHtml = '';
    
    products.forEach(function(product) {
        productsHtml += '<div class="product-item">' +
                       '<img class="lazy-image" ' +
                       'src="/images/placeholder.png" ' +
                       'data-src="' + product.image + '" ' +
                       'alt="' + product.name + '">' +
                       '<h4>' + product.name + '</h4>' +
                       '</div>';
    });
    
    $('#product-list').append(productsHtml);
    setupImageLazyLoad(); // è®¾ç½®æ‡’åŠ è½½
}
```

### 6.4 å†…å­˜æ³„æ¼é¢„é˜²


**æ­£ç¡®çš„äº‹ä»¶æ¸…ç†**ï¼š
```javascript
var activeRequests = []; // è·Ÿè¸ªæ´»åŠ¨çš„è¯·æ±‚

function loadUserData(userId) {
    // å–æ¶ˆä¹‹å‰çš„è¯·æ±‚
    activeRequests.forEach(function(xhr) {
        if (xhr.readyState !== 4) {
            xhr.abort();
        }
    });
    activeRequests = [];
    
    var xhr = $.ajax({
        url: '/api/user/' + userId,
        success: function(userData) {
            renderUserProfile(userData);
        },
        complete: function() {
            // è¯·æ±‚å®Œæˆåä»æ•°ç»„ä¸­ç§»é™¤
            var index = activeRequests.indexOf(xhr);
            if (index > -1) {
                activeRequests.splice(index, 1);
            }
        }
    });
    
    activeRequests.push(xhr);
}

// é¡µé¢å¸è½½æ—¶æ¸…ç†
$(window).on('beforeunload', function() {
    activeRequests.forEach(function(xhr) {
        xhr.abort();
    });
});
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Ajax+DOMç»“åˆï¼šåå°è·å–æ•°æ® + å‰å°åŠ¨æ€æ›´æ–°é¡µé¢
ğŸ”¸ åŠ¨æ€å†…å®¹æ¸²æŸ“ï¼šå°†Ajaxæ•°æ®è½¬æ¢ä¸ºHTMLå¹¶æ’å…¥åˆ°é¡µé¢
ğŸ”¸ äº‹ä»¶å§”æ‰˜ï¼šç»™çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œå¤„ç†åŠ¨æ€æ·»åŠ çš„å­å…ƒç´ 
ğŸ”¸ æ¨¡æ¿æ¸²æŸ“ï¼šç”¨å‡½æ•°ç”ŸæˆHTMLç»“æ„ï¼Œæé«˜ä»£ç å¤ç”¨æ€§
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘DOMæ“ä½œï¼Œé¿å…é‡å¤è¯·æ±‚ï¼Œåˆç†ä½¿ç”¨ç¼“å­˜
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Ajaxä¸DOMç»“åˆçš„æœ¬è´¨**
```
æ ¸å¿ƒæ€æƒ³ï¼š
- Ajaxè´Ÿè´£æ•°æ®è·å–ï¼ˆçœ‹ä¸è§çš„åå°å·¥ä½œï¼‰
- DOMæ“ä½œè´Ÿè´£ç•Œé¢æ›´æ–°ï¼ˆçœ‹å¾—è§çš„å‰å°æ•ˆæœï¼‰
- ä¸¤è€…ç»“åˆå®ç°æ— åˆ·æ–°çš„åŠ¨æ€ç½‘é¡µ

ç”¨æˆ·æ„Ÿå—ï¼š
- é¡µé¢ä¸é—ªçƒï¼Œæ“ä½œæµç•…è‡ªç„¶
- å“åº”é€Ÿåº¦å¿«ï¼Œåªæ›´æ–°éœ€è¦çš„éƒ¨åˆ†
```

**ğŸ”¹ äº‹ä»¶å§”æ‰˜çš„é‡è¦æ€§**
```
é—®é¢˜æ ¹æºï¼š
- åŠ¨æ€æ·»åŠ çš„å…ƒç´ æ²¡æœ‰äº‹ä»¶ç»‘å®š
- éœ€è¦æ‰‹åŠ¨ä¸ºæ–°å…ƒç´ é‡æ–°ç»‘å®šäº‹ä»¶

å§”æ‰˜æ–¹æ¡ˆï¼š
- ç»™ç¨³å®šçš„çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶
- é€šè¿‡äº‹ä»¶å†’æ³¡å¤„ç†å­å…ƒç´ çš„äº‹ä»¶
- æ–°å¢å…ƒç´ è‡ªåŠ¨å…·æœ‰äº‹ä»¶å¤„ç†èƒ½åŠ›
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç‚¹**
```
DOMæ“ä½œä¼˜åŒ–ï¼š
- æ‰¹é‡æ“ä½œä»£æ›¿é€ä¸ªæ“ä½œ
- ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µå‡å°‘é‡æ’é‡ç»˜

è¯·æ±‚ä¼˜åŒ–ï¼š
- é˜²æŠ–åŠ¨é¿å…é¢‘ç¹è¯·æ±‚
- ç¼“å­˜ç»“æœå‡å°‘é‡å¤è¯·æ±‚
- æ‡’åŠ è½½å‡å°‘åˆå§‹åŠ è½½å‹åŠ›
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**å¸¸è§åº”ç”¨åœºæ™¯**ï¼š
- ğŸ“„ **åˆ†é¡µåˆ—è¡¨**ï¼šå•†å“åˆ—è¡¨ã€æ–°é—»åˆ—è¡¨çš„åˆ†é¡µåŠ è½½
- ğŸ” **æœç´¢åŠŸèƒ½**ï¼šå®æ—¶æœç´¢æç¤ºã€æœç´¢ç»“æœå±•ç¤º
- ğŸ›’ **è´­ç‰©è½¦**ï¼šæ·»åŠ å•†å“ã€ä¿®æ”¹æ•°é‡ã€åˆ é™¤å•†å“
- ğŸ’¬ **è¯„è®ºç³»ç»Ÿ**ï¼šå‘è¡¨è¯„è®ºã€åˆ é™¤è¯„è®ºã€ç‚¹èµåŠŸèƒ½
- ğŸ“‹ **è¡¨å•å¤„ç†**ï¼šåŠ¨æ€è¡¨å•ã€è¡¨å•éªŒè¯ã€æ•°æ®æäº¤

**å¼€å‘å»ºè®®**ï¼š
- âœ… **å…ˆå†™é™æ€é¡µé¢**ï¼šç¡®ä¿æ ·å¼å’Œå¸ƒå±€æ­£ç¡®
- âœ… **å†åŠ AjaxåŠŸèƒ½**ï¼šé€æ­¥æ·»åŠ åŠ¨æ€äº¤äº’
- âœ… **ä½¿ç”¨äº‹ä»¶å§”æ‰˜**ï¼šä¸ºå°†æ¥çš„åŠ¨æ€å†…å®¹åšå‡†å¤‡
- âœ… **å…³æ³¨æ€§èƒ½**ï¼šå¤§é‡æ•°æ®æ—¶è€ƒè™‘åˆ†é¡µå’Œæ‡’åŠ è½½
- âœ… **ç”¨æˆ·ä½“éªŒ**ï¼šæ·»åŠ åŠ è½½æç¤ºå’Œé”™è¯¯å¤„ç†

### 7.4 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


| é—®é¢˜ | **åŸå› ** | **è§£å†³æ–¹æ¡ˆ** |
|------|---------|-------------|
| æ–°å¢å…ƒç´ ç‚¹å‡»æ— æ•ˆ | `äº‹ä»¶ç»‘å®šåœ¨åŠ¨æ€å†…å®¹æ·»åŠ ä¹‹å‰` | `ä½¿ç”¨äº‹ä»¶å§”æ‰˜ç»‘å®šåˆ°çˆ¶å…ƒç´ ` |
| é¡µé¢å¡é¡¿ | `é¢‘ç¹çš„DOMæ“ä½œ` | `æ‰¹é‡æ“ä½œï¼Œå‡å°‘DOMè®¿é—®æ¬¡æ•°` |
| é‡å¤è¯·æ±‚ | `ç”¨æˆ·å¿«é€Ÿè¿ç»­æ“ä½œ` | `é˜²æŠ–åŠ¨å¤„ç†ï¼Œå–æ¶ˆä¹‹å‰çš„è¯·æ±‚` |
| å†…å­˜æ³„æ¼ | `æœªæ¸…ç†äº‹ä»¶å’Œè¯·æ±‚` | `åŠæ—¶æ¸…ç†å®šæ—¶å™¨å’Œä¸­æ­¢è¯·æ±‚` |

**æ ¸å¿ƒè®°å¿†**ï¼š
- Ajaxè·å–æ•°æ®ï¼ŒDOMè´Ÿè´£æ˜¾ç¤ºï¼Œä¸¤è€…é…åˆå®ç°åŠ¨æ€ç½‘é¡µ
- äº‹ä»¶å§”æ‰˜è§£å†³åŠ¨æ€å†…å®¹çš„äº¤äº’é—®é¢˜
- æ¨¡æ¿å‡½æ•°æé«˜HTMLç”Ÿæˆçš„æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§
- æ€§èƒ½ä¼˜åŒ–é‡ç‚¹æ˜¯å‡å°‘DOMæ“ä½œå’Œé¿å…é‡å¤è¯·æ±‚