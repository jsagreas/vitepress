---
title: 4ã€æ–‡ä»¶ä¸Šä¼ å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [æ–‡ä»¶ä¸Šä¼ åŸºç¡€æ¦‚å¿µ](#1-æ–‡ä»¶ä¸Šä¼ åŸºç¡€æ¦‚å¿µ)
2. [FormDataæ ¸å¿ƒæœºåˆ¶](#2-FormDataæ ¸å¿ƒæœºåˆ¶)
3. [jQueryæ–‡ä»¶ä¸Šä¼ å®ç°](#3-jQueryæ–‡ä»¶ä¸Šä¼ å®ç°)
4. [ä¸Šä¼ è¿›åº¦æ˜¾ç¤º](#4-ä¸Šä¼ è¿›åº¦æ˜¾ç¤º)
5. [å¤šæ–‡ä»¶ä¸Šä¼ å¤„ç†](#5-å¤šæ–‡ä»¶ä¸Šä¼ å¤„ç†)
6. [æ–‡ä»¶éªŒè¯ä¸é™åˆ¶](#6-æ–‡ä»¶éªŒè¯ä¸é™åˆ¶)
7. [é”™è¯¯å¤„ç†æœºåˆ¶](#7-é”™è¯¯å¤„ç†æœºåˆ¶)
8. [æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½](#8-æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“ æ–‡ä»¶ä¸Šä¼ åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ–‡ä»¶ä¸Šä¼ 


**é€šä¿—ç†è§£**ï¼šæ–‡ä»¶ä¸Šä¼ å°±æ˜¯æŠŠä½ ç”µè„‘é‡Œçš„æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€æ–‡æ¡£ã€è§†é¢‘ç­‰ï¼‰é€šè¿‡ç½‘é¡µä¼ é€åˆ°æœåŠ¡å™¨ä¸Šä¿å­˜ã€‚

```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š
ç”¨æˆ·ç”µè„‘ â†’ é€‰æ‹©æ–‡ä»¶ â†’ ç½‘é¡µå¤„ç† â†’ å‘é€åˆ°æœåŠ¡å™¨ â†’ æœåŠ¡å™¨ä¿å­˜

å°±åƒå¯„å¿«é€’ï¼š
æœ¬åœ°æ–‡ä»¶ = è¦å¯„çš„åŒ…è£¹
ç½‘é¡µ = å¿«é€’å‘˜
æœåŠ¡å™¨ = æ”¶ä»¶åœ°å€
```

### 1.2 ä¼ ç»Ÿè¡¨å• vs Ajaxä¸Šä¼ 


**ä¼ ç»Ÿè¡¨å•ä¸Šä¼ **ï¼š
- ğŸ”„ **é¡µé¢ä¼šåˆ·æ–°** - ä¸Šä¼ æ—¶æ•´ä¸ªé¡µé¢é‡æ–°åŠ è½½
- âŒ **ç”¨æˆ·ä½“éªŒå·®** - ç­‰å¾…æ—¶é—´é•¿ï¼Œé¡µé¢ä¼šå¡ä½
- ğŸ“„ **æ— æ³•æ˜¾ç¤ºè¿›åº¦** - ä¸çŸ¥é“ä¸Šä¼ åˆ°å“ªä¸€æ­¥äº†

**Ajaxä¸Šä¼ **ï¼š
- âœ… **é¡µé¢ä¸åˆ·æ–°** - åœ¨åå°æ‚„æ‚„ä¸Šä¼ 
- ğŸš€ **ç”¨æˆ·ä½“éªŒå¥½** - å¯ä»¥ç»§ç»­æ“ä½œå…¶ä»–åŠŸèƒ½
- ğŸ“Š **èƒ½æ˜¾ç¤ºè¿›åº¦** - å®æ—¶æ˜¾ç¤ºä¸Šä¼ ç™¾åˆ†æ¯”

### 1.3 æ–‡ä»¶ä¸Šä¼ çš„æœ¬è´¨


```
HTTPè¯·æ±‚çš„ç‰¹æ®Šä¹‹å¤„ï¼š
æ™®é€šæ•°æ®ï¼šname=å¼ ä¸‰&age=20  (æ–‡æœ¬æ ¼å¼)
æ–‡ä»¶æ•°æ®ï¼šåŒ…å«æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ (äºŒè¿›åˆ¶æ ¼å¼)

æ‰€ä»¥éœ€è¦ç‰¹æ®Šçš„ç¼–ç æ–¹å¼ï¼šmultipart/form-data
```

---

## 2. ğŸ—‚ï¸ FormDataæ ¸å¿ƒæœºåˆ¶


### 2.1 FormDataæ˜¯ä»€ä¹ˆ


**ç®€å•ç†è§£**ï¼šFormDataæ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ä¸ª"æ‰“åŒ…å·¥å…·"ï¼Œä¸“é—¨ç”¨æ¥æ‰“åŒ…æ–‡ä»¶å’Œè¡¨å•æ•°æ®ï¼Œè®©å®ƒä»¬èƒ½é€šè¿‡Ajaxå‘é€ã€‚

```javascript
// æƒ³è±¡FormDataæ˜¯ä¸€ä¸ªå¿«é€’ç›’å­
let formData = new FormData();

// å¾€ç›’å­é‡Œæ”¾æ–‡ä»¶
formData.append('avatar', fileInput.files[0]);

// å¾€ç›’å­é‡Œæ”¾æ™®é€šæ•°æ®
formData.append('username', 'å¼ ä¸‰');
```

### 2.2 FormDataçš„æ ¸å¿ƒä½œç”¨


**ğŸ”¸ è‡ªåŠ¨å¤„ç†æ–‡ä»¶ç¼–ç **
```javascript
// FormDataè‡ªåŠ¨æŠŠæ–‡ä»¶è½¬æ¢æˆæœåŠ¡å™¨èƒ½æ¥æ”¶çš„æ ¼å¼
// ä½ ä¸éœ€è¦æ‰‹åŠ¨å¤„ç†å¤æ‚çš„äºŒè¿›åˆ¶ç¼–ç 
let formData = new FormData();
formData.append('file', file); // FormDataè‡ªåŠ¨å¤„ç†
```

**ğŸ”¸ æ··åˆæ•°æ®ä¼ è¾“**
```javascript
// å¯ä»¥åŒæ—¶ä¼ æ–‡ä»¶å’Œæ™®é€šæ•°æ®
formData.append('file', file);        // æ–‡ä»¶
formData.append('title', 'æˆ‘çš„ç…§ç‰‡');   // æ–‡å­—
formData.append('category', 'photo');  // åˆ†ç±»
```

### 2.3 FormDataåŸºæœ¬ç”¨æ³•


```javascript
// åˆ›å»ºFormDataå¯¹è±¡
let formData = new FormData();

// æ·»åŠ æ–‡ä»¶ï¼ˆä»inputå…ƒç´ è·å–ï¼‰
let fileInput = document.getElementById('fileInput');
formData.append('upload_file', fileInput.files[0]);

// æ·»åŠ å…¶ä»–æ•°æ®
formData.append('description', 'è¿™æ˜¯æ–‡ä»¶æè¿°');

// FormDataä¼šè‡ªåŠ¨è®¾ç½®æ­£ç¡®çš„Content-Type
```

> **ğŸ’¡ å°è´´å£«**ï¼šFormDataä¼šè‡ªåŠ¨è®¾ç½®`Content-Type: multipart/form-data`ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼

---

## 3. ğŸš€ jQueryæ–‡ä»¶ä¸Šä¼ å®ç°


### 3.1 åŸºç¡€ä¸Šä¼ å®ç°


**HTMLç»“æ„**ï¼š
```html
<!-- ç®€å•çš„æ–‡ä»¶é€‰æ‹©ç•Œé¢ -->
<input type="file" id="fileInput" accept="image/*">
<button id="uploadBtn">ä¸Šä¼ æ–‡ä»¶</button>
<div id="result"></div>
```

**jQueryå®ç°**ï¼š
```javascript
$('#uploadBtn').click(function() {
    // è·å–ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶
    let file = $('#fileInput')[0].files[0];
    
    // æ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†æ–‡ä»¶
    if (!file) {
        alert('è¯·å…ˆé€‰æ‹©æ–‡ä»¶ï¼');
        return;
    }
    
    // åˆ›å»ºFormDataå¹¶æ·»åŠ æ–‡ä»¶
    let formData = new FormData();
    formData.append('file', file);
    
    // å‘é€Ajaxè¯·æ±‚
    $.ajax({
        url: '/upload',
        type: 'POST',
        data: formData,
        processData: false,  // ä¸è¦å¤„ç†æ•°æ®
        contentType: false,  // ä¸è¦è®¾ç½®å†…å®¹ç±»å‹
        success: function(response) {
            $('#result').html('ä¸Šä¼ æˆåŠŸï¼');
        },
        error: function() {
            $('#result').html('ä¸Šä¼ å¤±è´¥ï¼');
        }
    });
});
```

### 3.2 å…³é”®å‚æ•°è§£é‡Š


**processData: false**
```javascript
// processDataæ§åˆ¶jQueryæ˜¯å¦å¤„ç†æ•°æ®
processData: true   // jQueryä¼šæŠŠæ•°æ®è½¬æˆå­—ç¬¦ä¸²ï¼ˆé»˜è®¤ï¼‰
processData: false  // ä¿æŒFormDataåŸæ ·ï¼ˆæ–‡ä»¶ä¸Šä¼ å¿…é¡»ï¼‰

// é€šä¿—ç†è§£ï¼šå‘Šè¯‰jQuery"è¿™ä¸ªåŒ…è£¹æˆ‘å·²ç»æ‰“åŒ…å¥½äº†ï¼Œä½ åˆ«å†æ‹†å¼€é‡æ–°æ‰“åŒ…"
```

**contentType: false**
```javascript
// contentTypeæ§åˆ¶è¯·æ±‚å¤´çš„Content-Type
contentType: 'application/x-www-form-urlencoded' // æ™®é€šè¡¨å•ï¼ˆé»˜è®¤ï¼‰
contentType: false  // è®©æµè§ˆå™¨è‡ªåŠ¨è®¾ç½®ï¼ˆæ–‡ä»¶ä¸Šä¼ å¿…é¡»ï¼‰

// é€šä¿—ç†è§£ï¼šå‘Šè¯‰jQuery"ä½ åˆ«ç®¡å¿«é€’æ ‡ç­¾äº†ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è´´å¯¹çš„"
```

---

## 4. ğŸ“Š ä¸Šä¼ è¿›åº¦æ˜¾ç¤º


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦è¿›åº¦æ˜¾ç¤º


å¤§æ–‡ä»¶ä¸Šä¼ å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼Œç”¨æˆ·ä¸çŸ¥é“è¿›åº¦ä¼šä»¥ä¸ºå¡æ­»äº†ã€‚è¿›åº¦æ¡è®©ç”¨æˆ·çŸ¥é“ï¼š
- â³ **ä¸Šä¼ è¿˜åœ¨è¿›è¡Œ** - æ²¡æœ‰å¡æ­»
- ğŸ“ˆ **å½“å‰è¿›åº¦** - ä¸Šä¼ äº†å¤šå°‘ç™¾åˆ†æ¯”
- â±ï¸ **é¢„ä¼°æ—¶é—´** - å¤§æ¦‚è¿˜éœ€è¦å¤šä¹…

### 4.2 å®ç°ä¸Šä¼ è¿›åº¦


**HTMLæ·»åŠ è¿›åº¦æ¡**ï¼š
```html
<input type="file" id="fileInput">
<button id="uploadBtn">ä¸Šä¼ </button>

<!-- è¿›åº¦æ˜¾ç¤ºåŒºåŸŸ -->
<div id="progressContainer" style="display:none;">
    <div>ä¸Šä¼ è¿›åº¦ï¼š<span id="progressText">0%</span></div>
    <div style="width:300px; background:#f0f0f0; border-radius:5px;">
        <div id="progressBar" style="width:0%; height:20px; background:#4CAF50; border-radius:5px;"></div>
    </div>
</div>

<div id="result"></div>
```

**jQueryå®ç°å¸¦è¿›åº¦çš„ä¸Šä¼ **ï¼š
```javascript
$('#uploadBtn').click(function() {
    let file = $('#fileInput')[0].files[0];
    if (!file) return;
    
    let formData = new FormData();
    formData.append('file', file);
    
    // æ˜¾ç¤ºè¿›åº¦æ¡
    $('#progressContainer').show();
    $('#progressBar').css('width', '0%');
    $('#progressText').text('0%');
    
    $.ajax({
        url: '/upload',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        
        // å…³é”®ï¼šxhrå¯¹è±¡é…ç½®è¿›åº¦ç›‘å¬
        xhr: function() {
            let xhr = new window.XMLHttpRequest();
            
            // ç›‘å¬ä¸Šä¼ è¿›åº¦
            xhr.upload.addEventListener('progress', function(e) {
                if (e.lengthComputable) {
                    // è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”
                    let percent = Math.round((e.loaded / e.total) * 100);
                    
                    // æ›´æ–°è¿›åº¦æ˜¾ç¤º
                    $('#progressBar').css('width', percent + '%');
                    $('#progressText').text(percent + '%');
                }
            });
            
            return xhr;
        },
        
        success: function(response) {
            $('#result').html('âœ… ä¸Šä¼ æˆåŠŸï¼');
            $('#progressContainer').hide();
        },
        
        error: function() {
            $('#result').html('âŒ ä¸Šä¼ å¤±è´¥ï¼');
            $('#progressContainer').hide();
        }
    });
});
```

### 4.3 è¿›åº¦äº‹ä»¶è¯¦è§£


```javascript
// progressäº‹ä»¶å¯¹è±¡åŒ…å«çš„ä¿¡æ¯
xhr.upload.addEventListener('progress', function(e) {
    console.log(e.loaded);  // å·²ä¸Šä¼ å­—èŠ‚æ•°
    console.log(e.total);   // æ€»å­—èŠ‚æ•°
    console.log(e.lengthComputable); // æ˜¯å¦å¯è®¡ç®—è¿›åº¦
});

// å®é™…è®¡ç®—ç¤ºä¾‹ï¼š
// æ–‡ä»¶å¤§å°ï¼š1MB = 1,048,576 å­—èŠ‚
// å·²ä¸Šä¼ ï¼š524,288 å­—èŠ‚
// è¿›åº¦ï¼š524,288 Ã· 1,048,576 = 0.5 = 50%
```

---

## 5. ğŸ—‚ï¸ å¤šæ–‡ä»¶ä¸Šä¼ å¤„ç†


### 5.1 å¤šæ–‡ä»¶ä¸Šä¼ çš„åº”ç”¨åœºæ™¯


- ğŸ“¸ **ç›¸å†Œä¸Šä¼ ** - ä¸€æ¬¡é€‰æ‹©å¤šå¼ ç…§ç‰‡
- ğŸ“„ **æ–‡æ¡£æ‰¹é‡ä¸Šä¼ ** - ä¸Šä¼ å¤šä¸ªæ–‡ä»¶åˆ°é¡¹ç›®
- ğŸµ **éŸ³ä¹åº“ç®¡ç†** - æ‰¹é‡æ·»åŠ æ­Œæ›²

### 5.2 HTMLæ”¯æŒå¤šæ–‡ä»¶é€‰æ‹©


```html
<!-- multipleå±æ€§å…è®¸é€‰æ‹©å¤šä¸ªæ–‡ä»¶ -->
<input type="file" id="fileInput" multiple accept="image/*">
<button id="uploadBtn">æ‰¹é‡ä¸Šä¼ </button>

<div id="fileList"></div> <!-- æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶åˆ—è¡¨ -->
<div id="uploadProgress"></div> <!-- ä¸Šä¼ è¿›åº¦ -->
```

### 5.3 æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶åˆ—è¡¨


```javascript
// å½“ç”¨æˆ·é€‰æ‹©æ–‡ä»¶åï¼Œæ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨
$('#fileInput').change(function() {
    let files = this.files;
    let fileListHtml = '<h4>é€‰æ‹©çš„æ–‡ä»¶ï¼š</h4>';
    
    for (let i = 0; i < files.length; i++) {
        let file = files[i];
        fileListHtml += `
            <div>
                ğŸ“„ ${file.name} 
                (${(file.size / 1024 / 1024).toFixed(2)} MB)
            </div>
        `;
    }
    
    $('#fileList').html(fileListHtml);
});
```

### 5.4 æ‰¹é‡ä¸Šä¼ å®ç°


**æ–¹å¼ä¸€ï¼šä¸€æ¬¡æ€§ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶**
```javascript
$('#uploadBtn').click(function() {
    let files = $('#fileInput')[0].files;
    if (files.length === 0) return;
    
    let formData = new FormData();
    
    // æŠŠæ‰€æœ‰æ–‡ä»¶éƒ½æ·»åŠ åˆ°FormData
    for (let i = 0; i < files.length; i++) {
        formData.append('files[]', files[i]);
    }
    
    $.ajax({
        url: '/upload-multiple',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
            alert('æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼');
        }
    });
});
```

**æ–¹å¼äºŒï¼šé€ä¸ªä¸Šä¼ æ–‡ä»¶ï¼ˆæ¨èï¼‰**
```javascript
$('#uploadBtn').click(function() {
    let files = $('#fileInput')[0].files;
    uploadFilesOneByOne(files, 0);
});

function uploadFilesOneByOne(files, index) {
    // æ‰€æœ‰æ–‡ä»¶éƒ½ä¸Šä¼ å®Œäº†
    if (index >= files.length) {
        alert('æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ å®Œæˆï¼');
        return;
    }
    
    let file = files[index];
    let formData = new FormData();
    formData.append('file', file);
    
    // æ˜¾ç¤ºå½“å‰ä¸Šä¼ çš„æ–‡ä»¶
    $('#uploadProgress').html(`æ­£åœ¨ä¸Šä¼ : ${file.name} (${index + 1}/${files.length})`);
    
    $.ajax({
        url: '/upload',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function() {
            // ä¸Šä¼ ä¸‹ä¸€ä¸ªæ–‡ä»¶
            uploadFilesOneByOne(files, index + 1);
        },
        error: function() {
            alert(`æ–‡ä»¶ ${file.name} ä¸Šä¼ å¤±è´¥ï¼`);
        }
    });
}
```

### 5.5 ä¸¤ç§æ–¹å¼å¯¹æ¯”


| æ–¹å¼ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **é€‚ç”¨åœºæ™¯** |
|------|---------|----------|-------------|
| **ä¸€æ¬¡æ€§ä¸Šä¼ ** | `é€Ÿåº¦å¿«ï¼Œä»£ç ç®€å•` | `æ–‡ä»¶å¤§æ—¶å®¹æ˜“è¶…æ—¶ï¼Œå¤±è´¥åè¦é‡ä¼ å…¨éƒ¨` | `å°æ–‡ä»¶æ‰¹é‡ä¸Šä¼ ` |
| **é€ä¸ªä¸Šä¼ ** | `ç¨³å®šæ€§å¥½ï¼Œå¯æ˜¾ç¤ºè¯¦ç»†è¿›åº¦` | `æ€»æ—¶é—´è¾ƒé•¿ï¼Œä»£ç å¤æ‚` | `å¤§æ–‡ä»¶æˆ–é‡è¦æ–‡ä»¶ä¸Šä¼ ` |

---

## 6. âœ… æ–‡ä»¶éªŒè¯ä¸é™åˆ¶


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦æ–‡ä»¶éªŒè¯


**å®‰å…¨è€ƒè™‘**ï¼š
- ğŸ›¡ï¸ é˜²æ­¢ä¸Šä¼ ç—…æ¯’æ–‡ä»¶
- ğŸš« é™åˆ¶æ–‡ä»¶ç±»å‹ï¼ˆåªå…è®¸å›¾ç‰‡ã€æ–‡æ¡£ç­‰ï¼‰
- ğŸ’¾ æ§åˆ¶æ–‡ä»¶å¤§å°ï¼ˆé˜²æ­¢æœåŠ¡å™¨å­˜å‚¨çˆ†æ»¡ï¼‰

**ç”¨æˆ·ä½“éªŒ**ï¼š
- âš¡ æå‰å‘ŠçŸ¥é”™è¯¯ï¼Œé¿å…æ— æ•ˆä¸Šä¼ 
- ğŸ“‹ æ¸…æ™°çš„é™åˆ¶è¯´æ˜

### 6.2 æ–‡ä»¶ç±»å‹éªŒè¯


**HTMLåŸç”Ÿé™åˆ¶**ï¼š
```html
<!-- acceptå±æ€§é™åˆ¶æ–‡ä»¶ç±»å‹ -->
<input type="file" accept="image/*">           <!-- åªå…è®¸å›¾ç‰‡ -->
<input type="file" accept=".pdf,.doc,.docx">   <!-- åªå…è®¸æ–‡æ¡£ -->
<input type="file" accept="image/jpeg,image/png"> <!-- åªå…è®¸JPGå’ŒPNG -->
```

**JavaScriptéªŒè¯**ï¼š
```javascript
function validateFileType(file) {
    // å…è®¸çš„æ–‡ä»¶ç±»å‹
    let allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
    
    if (!allowedTypes.includes(file.type)) {
        alert('åªå…è®¸ä¸Šä¼  JPGã€PNGã€GIF æ ¼å¼çš„å›¾ç‰‡ï¼');
        return false;
    }
    
    return true;
}

// ä½¿ç”¨ç¤ºä¾‹
$('#fileInput').change(function() {
    let file = this.files[0];
    if (file && !validateFileType(file)) {
        // æ¸…é™¤é€‰æ‹©çš„æ–‡ä»¶
        this.value = '';
    }
});
```

### 6.3 æ–‡ä»¶å¤§å°é™åˆ¶


```javascript
function validateFileSize(file, maxSizeMB) {
    let maxSizeBytes = maxSizeMB * 1024 * 1024; // è½¬æ¢ä¸ºå­—èŠ‚
    
    if (file.size > maxSizeBytes) {
        alert(`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ ${maxSizeMB}MBï¼\nå½“å‰æ–‡ä»¶ï¼š${(file.size / 1024 / 1024).toFixed(2)}MB`);
        return false;
    }
    
    return true;
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šé™åˆ¶5MB
$('#fileInput').change(function() {
    let file = this.files[0];
    if (file) {
        if (!validateFileType(file) || !validateFileSize(file, 5)) {
            this.value = '';
        }
    }
});
```

### 6.4 ç»¼åˆéªŒè¯å‡½æ•°


```javascript
function validateFile(file) {
    // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    if (!file) {
        alert('è¯·é€‰æ‹©æ–‡ä»¶ï¼');
        return false;
    }
    
    // æ–‡ä»¶ç±»å‹æ£€æŸ¥
    let allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
    if (!allowedTypes.includes(file.type)) {
        alert('åªå…è®¸ä¸Šä¼  JPGã€PNGã€GIF æ ¼å¼çš„å›¾ç‰‡ï¼');
        return false;
    }
    
    // æ–‡ä»¶å¤§å°æ£€æŸ¥ï¼ˆ5MBé™åˆ¶ï¼‰
    let maxSize = 5 * 1024 * 1024;
    if (file.size > maxSize) {
        alert(`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 5MBï¼\nå½“å‰æ–‡ä»¶ï¼š${(file.size / 1024 / 1024).toFixed(2)}MB`);
        return false;
    }
    
    return true;
}

// åœ¨ä¸Šä¼ å‰è°ƒç”¨éªŒè¯
$('#uploadBtn').click(function() {
    let file = $('#fileInput')[0].files[0];
    
    if (!validateFile(file)) {
        return; // éªŒè¯å¤±è´¥ï¼Œåœæ­¢ä¸Šä¼ 
    }
    
    // éªŒè¯é€šè¿‡ï¼Œå¼€å§‹ä¸Šä¼ 
    let formData = new FormData();
    formData.append('file', file);
    
    $.ajax({
        url: '/upload',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
            alert('ä¸Šä¼ æˆåŠŸï¼');
        }
    });
});
```

---

## 7. âš ï¸ é”™è¯¯å¤„ç†æœºåˆ¶


### 7.1 å¸¸è§ä¸Šä¼ é”™è¯¯ç±»å‹


**ç½‘ç»œé”™è¯¯**ï¼š
- ğŸŒ ç½‘ç»œæ–­å¼€
- â±ï¸ è¯·æ±‚è¶…æ—¶
- ğŸš« æœåŠ¡å™¨æ— å“åº”

**æœåŠ¡å™¨é”™è¯¯**ï¼š
- ğŸ’¾ å­˜å‚¨ç©ºé—´ä¸è¶³
- ğŸ”’ æƒé™ä¸å¤Ÿ
- ğŸ“ æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ

**å®¢æˆ·ç«¯é”™è¯¯**ï¼š
- ğŸ“„ æ–‡ä»¶æŸå
- ğŸ”’ æ–‡ä»¶è¢«å ç”¨

### 7.2 å®Œå–„çš„é”™è¯¯å¤„ç†


```javascript
function uploadFile(file) {
    let formData = new FormData();
    formData.append('file', file);
    
    $.ajax({
        url: '/upload',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        timeout: 30000, // 30ç§’è¶…æ—¶
        
        success: function(response) {
            // æ£€æŸ¥æœåŠ¡å™¨è¿”å›çš„ç»“æœ
            if (response.success) {
                showMessage('âœ… ä¸Šä¼ æˆåŠŸï¼', 'success');
            } else {
                showMessage('âŒ ' + response.message, 'error');
            }
        },
        
        error: function(xhr, status, error) {
            let errorMessage;
            
            if (status === 'timeout') {
                errorMessage = 'â±ï¸ ä¸Šä¼ è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
            } else if (xhr.status === 413) {
                errorMessage = 'ğŸ“¦ æ–‡ä»¶å¤ªå¤§ï¼ŒæœåŠ¡å™¨æ‹’ç»æ¥æ”¶';
            } else if (xhr.status === 500) {
                errorMessage = 'ğŸ”§ æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•';
            } else {
                errorMessage = 'âŒ ä¸Šä¼ å¤±è´¥ï¼š' + error;
            }
            
            showMessage(errorMessage, 'error');
        }
    });
}

function showMessage(message, type) {
    let className = type === 'success' ? 'alert-success' : 'alert-error';
    $('#result').html(`<div class="${className}">${message}</div>`);
}
```

### 7.3 é‡è¯•æœºåˆ¶


```javascript
function uploadWithRetry(file, maxRetries = 3) {
    let retryCount = 0;
    
    function attemptUpload() {
        let formData = new FormData();
        formData.append('file', file);
        
        $.ajax({
            url: '/upload',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            
            success: function(response) {
                showMessage('âœ… ä¸Šä¼ æˆåŠŸï¼', 'success');
            },
            
            error: function(xhr, status, error) {
                retryCount++;
                
                if (retryCount <= maxRetries) {
                    showMessage(`âŒ ä¸Šä¼ å¤±è´¥ï¼Œæ­£åœ¨é‡è¯• (${retryCount}/${maxRetries})...`, 'warning');
                    
                    // ç­‰å¾…2ç§’åé‡è¯•
                    setTimeout(attemptUpload, 2000);
                } else {
                    showMessage('âŒ ä¸Šä¼ å¤±è´¥ï¼Œå·²é‡è¯•3æ¬¡', 'error');
                }
            }
        });
    }
    
    attemptUpload();
}
```

---

## 8. ğŸ¯ æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½


### 8.1 æ‹–æ‹½ä¸Šä¼ çš„ç”¨æˆ·ä½“éªŒ


æ‹–æ‹½ä¸Šä¼ è®©ç”¨æˆ·å¯ä»¥ç›´æ¥æŠŠæ–‡ä»¶ä»ç”µè„‘æ–‡ä»¶å¤¹æ‹–åˆ°ç½‘é¡µä¸Šï¼Œæ¯”ç‚¹å‡»æŒ‰é’®é€‰æ–‡ä»¶æ›´æ–¹ä¾¿ï¼š

```
ä¼ ç»Ÿæ–¹å¼ï¼šç‚¹å‡»æŒ‰é’® â†’ æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡† â†’ æµè§ˆæ–‡ä»¶å¤¹ â†’ é€‰æ‹©æ–‡ä»¶
æ‹–æ‹½æ–¹å¼ï¼šç›´æ¥æ‹–æ–‡ä»¶åˆ°ç½‘é¡µ â†’ æ¾æ‰‹ â†’ å¼€å§‹ä¸Šä¼ 
```

### 8.2 HTMLæ‹–æ‹½åŒºåŸŸ


```html
<div id="dropZone" style="
    width: 400px; 
    height: 200px; 
    border: 2px dashed #ccc; 
    text-align: center; 
    line-height: 200px;
    cursor: pointer;
">
    ğŸ“ æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
</div>

<input type="file" id="fileInput" style="display:none;" multiple>
<div id="fileList"></div>
```

### 8.3 æ‹–æ‹½åŠŸèƒ½å®ç°


```javascript
$(document).ready(function() {
    let $dropZone = $('#dropZone');
    let $fileInput = $('#fileInput');
    
    // ç‚¹å‡»åŒºåŸŸä¹Ÿèƒ½é€‰æ‹©æ–‡ä»¶
    $dropZone.click(function() {
        $fileInput.click();
    });
    
    // æ‹–æ‹½è¿›å…¥åŒºåŸŸ
    $dropZone.on('dragover dragenter', function(e) {
        e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º
        e.stopPropagation();
        
        // æ”¹å˜æ ·å¼ï¼Œæç¤ºç”¨æˆ·å¯ä»¥æ”¾ç½®
        $dropZone.css({
            'border-color': '#007cba',
            'background-color': '#f0f8ff'
        });
    });
    
    // æ‹–æ‹½ç¦»å¼€åŒºåŸŸ
    $dropZone.on('dragleave', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        // æ¢å¤åŸæ ·å¼
        $dropZone.css({
            'border-color': '#ccc',
            'background-color': 'transparent'
        });
    });
    
    // æ–‡ä»¶è¢«æ”¾ç½®
    $dropZone.on('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        // æ¢å¤æ ·å¼
        $dropZone.css({
            'border-color': '#ccc',
            'background-color': 'transparent'
        });
        
        // è·å–æ‹–æ‹½çš„æ–‡ä»¶
        let files = e.originalEvent.dataTransfer.files;
        
        if (files.length > 0) {
            handleFiles(files);
        }
    });
    
    // é€šè¿‡inputé€‰æ‹©æ–‡ä»¶
    $fileInput.change(function() {
        handleFiles(this.files);
    });
});

// å¤„ç†é€‰æ‹©çš„æ–‡ä»¶
function handleFiles(files) {
    let fileListHtml = '';
    
    for (let i = 0; i < files.length; i++) {
        let file = files[i];
        fileListHtml += `
            <div style="margin: 5px; padding: 10px; background: #f5f5f5; border-radius: 5px;">
                ğŸ“„ ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)
                <button onclick="uploadSingleFile(${i})" style="margin-left: 10px;">ä¸Šä¼ </button>
            </div>
        `;
    }
    
    $('#fileList').html(fileListHtml);
    
    // ä¿å­˜æ–‡ä»¶åˆ—è¡¨ä¾›åç»­ä½¿ç”¨
    window.selectedFiles = files;
}

// ä¸Šä¼ å•ä¸ªæ–‡ä»¶
function uploadSingleFile(index) {
    let file = window.selectedFiles[index];
    
    if (!validateFile(file)) return;
    
    let formData = new FormData();
    formData.append('file', file);
    
    $.ajax({
        url: '/upload',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
            alert(`${file.name} ä¸Šä¼ æˆåŠŸï¼`);
        }
    });
}
```

### 8.4 æ‹–æ‹½äº‹ä»¶è¯¦è§£


```javascript
// æ‹–æ‹½ç›¸å…³çš„å…³é”®äº‹ä»¶
dragenter  // æ‹–æ‹½è¿›å…¥ç›®æ ‡åŒºåŸŸ
dragover   // åœ¨ç›®æ ‡åŒºåŸŸä¸Šæ–¹æ‹–æ‹½
dragleave  // ç¦»å¼€ç›®æ ‡åŒºåŸŸ
drop       // åœ¨ç›®æ ‡åŒºåŸŸé‡Šæ”¾æ–‡ä»¶

// æ¯ä¸ªäº‹ä»¶éƒ½éœ€è¦é˜»æ­¢é»˜è®¤è¡Œä¸º
e.preventDefault();  // é˜»æ­¢æµè§ˆå™¨é»˜è®¤å¤„ç†ï¼ˆå¦‚æ‰“å¼€æ–‡ä»¶ï¼‰
e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡

// è·å–æ‹–æ‹½çš„æ–‡ä»¶
let files = e.originalEvent.dataTransfer.files;
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ FormDataï¼šæ–‡ä»¶ä¸Šä¼ çš„"æ‰“åŒ…å·¥å…·"ï¼Œè‡ªåŠ¨å¤„ç†æ–‡ä»¶ç¼–ç 
ğŸ”¸ Ajaxé…ç½®ï¼šprocessData: false, contentType: false æ˜¯å…³é”®
ğŸ”¸ è¿›åº¦ç›‘å¬ï¼šé€šè¿‡xhr.upload.progressäº‹ä»¶å®ç°è¿›åº¦æ˜¾ç¤º
ğŸ”¸ æ–‡ä»¶éªŒè¯ï¼šç±»å‹ã€å¤§å°éªŒè¯ç¡®ä¿ä¸Šä¼ å®‰å…¨å’Œç¨³å®š
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šç½‘ç»œã€æœåŠ¡å™¨ã€å®¢æˆ·ç«¯é”™è¯¯çš„åˆ†ç±»å¤„ç†
ğŸ”¸ æ‹–æ‹½ä¸Šä¼ ï¼šé€šè¿‡dragäº‹ä»¶å®ç°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦FormData**
```
æ™®é€šAjaxä¼ è¾“ï¼šæ–‡æœ¬æ•°æ® â†’ å­—ç¬¦ä¸²ç¼–ç 
æ–‡ä»¶ä¸Šä¼ éœ€è¦ï¼šäºŒè¿›åˆ¶æ•°æ® â†’ ç‰¹æ®Šç¼–ç æ ¼å¼
FormDataä½œç”¨ï¼šè‡ªåŠ¨æŠŠæ–‡ä»¶è½¬æ¢æˆæœåŠ¡å™¨èƒ½æ¥æ”¶çš„æ ¼å¼
```

**ğŸ”¹ Ajaxæ–‡ä»¶ä¸Šä¼ çš„ç‰¹æ®Šé…ç½®**
```
processData: false  // ä¸è¦å¤„ç†æ•°æ®ï¼ˆä¿æŒFormDataåŸæ ·ï¼‰
contentType: false  // ä¸è¦è®¾ç½®å†…å®¹ç±»å‹ï¼ˆè®©æµè§ˆå™¨è‡ªåŠ¨è®¾ç½®ï¼‰

è¿™ä¸¤ä¸ªè®¾ç½®è®©jQuery"ä¸è¦æ’æ‰‹æ–‡ä»¶å¤„ç†"
```

**ğŸ”¹ å¤šæ–‡ä»¶ä¸Šä¼ çš„ç­–ç•¥é€‰æ‹©**
```
ä¸€æ¬¡æ€§ä¸Šä¼ ï¼šé€‚åˆå°æ–‡ä»¶ï¼Œä»£ç ç®€å•
é€ä¸ªä¸Šä¼ ï¼šé€‚åˆå¤§æ–‡ä»¶ï¼Œç¨³å®šæ€§å¥½ï¼Œèƒ½æ˜¾ç¤ºè¯¦ç»†è¿›åº¦

é€‰æ‹©åŸåˆ™ï¼šæ ¹æ®æ–‡ä»¶å¤§å°å’Œé‡è¦æ€§å†³å®š
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ“¸ å›¾ç‰‡ä¸Šä¼ åº”ç”¨**
- é™åˆ¶æ–‡ä»¶ç±»å‹ï¼š`accept="image/*"`
- å¤§å°é™åˆ¶ï¼šé€šå¸¸2-5MB
- æ˜¾ç¤ºé¢„è§ˆï¼šç”¨FileReaderè¯»å–å›¾ç‰‡
- è¿›åº¦æ˜¾ç¤ºï¼šæå‡ç”¨æˆ·ä½“éªŒ

**ğŸ“„ æ–‡æ¡£ä¸Šä¼ åº”ç”¨**
- ä¸¥æ ¼ç±»å‹éªŒè¯ï¼š`.pdf,.doc,.xlsx`ç­‰
- è¾ƒå¤§æ–‡ä»¶æ”¯æŒï¼š10-50MB
- é‡è¯•æœºåˆ¶ï¼šæ–‡æ¡£é€šå¸¸æ¯”è¾ƒé‡è¦
- æ‰¹é‡ä¸Šä¼ ï¼šå·¥ä½œåœºæ™¯å¸¸éœ€è¦

**ğŸµ å¤šåª’ä½“ä¸Šä¼ **
- å¤§æ–‡ä»¶å¤„ç†ï¼šè§†é¢‘å¯èƒ½å‡ ç™¾MB
- åˆ†ç‰‡ä¸Šä¼ ï¼šè¶…å¤§æ–‡ä»¶éœ€è¦åˆ†ç‰‡
- æ–­ç‚¹ç»­ä¼ ï¼šç½‘ç»œä¸ç¨³å®šæ—¶çš„ä¿éšœ

### 9.4 æœ€ä½³å®è·µæ€»ç»“


**âœ… æ¨èåšæ³•**ï¼š
```
- å‰ç«¯éªŒè¯ + åç«¯éªŒè¯åŒé‡ä¿éšœ
- æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æå‡ç”¨æˆ·ä½“éªŒ  
- é”™è¯¯å¤„ç†è¦å‹å¥½ä¸”å…·ä½“
- å¤§æ–‡ä»¶ä½¿ç”¨é€ä¸ªä¸Šä¼ ç­–ç•¥
- æä¾›æ‹–æ‹½åŠŸèƒ½æå‡æ˜“ç”¨æ€§
```

**âŒ é¿å…çš„é—®é¢˜**ï¼š
```
- åªåšå‰ç«¯éªŒè¯ï¼ˆä¸å®‰å…¨ï¼‰
- é•¿æ—¶é—´ä¸Šä¼ æ— è¿›åº¦æç¤º
- é”™è¯¯ä¿¡æ¯è¿‡äºæŠ€æœ¯åŒ–
- è¶…å¤§æ–‡ä»¶ä¸€æ¬¡æ€§ä¸Šä¼ 
- å¿˜è®°è®¾ç½®processDataå’ŒcontentTypeä¸ºfalse
```

**ğŸ”§ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
- å›¾ç‰‡ä¸Šä¼ å‰å‹ç¼©å¤„ç†
- åˆç†è®¾ç½®æ–‡ä»¶å¤§å°é™åˆ¶
- ä½¿ç”¨CDNåŠ é€Ÿæ–‡ä»¶æœåŠ¡
- å®ç°æ–­ç‚¹ç»­ä¼ åŠŸèƒ½
- è€ƒè™‘ä½¿ç”¨äº‘å­˜å‚¨æœåŠ¡
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- FormDataæ˜¯æ–‡ä»¶ä¸Šä¼ çš„æ ¸å¿ƒå·¥å…·
- Ajaxé…ç½®processDataå’ŒcontentTypeå¿…é¡»ä¸ºfalse
- è¿›åº¦æ˜¾ç¤ºé€šè¿‡xhr.upload.progresså®ç°
- éªŒè¯è¦åœ¨å‰ç«¯å’Œåç«¯éƒ½åš
- æ‹–æ‹½åŠŸèƒ½å¤§å¤§æå‡ç”¨æˆ·ä½“éªŒ