---
title: 3ã€è¯„è®ºäº’åŠ¨ç³»ç»Ÿå®æˆ˜
---
## ğŸ“š ç›®å½•

1. [é¡¹ç›®éœ€æ±‚åˆ†æ](#1-é¡¹ç›®éœ€æ±‚åˆ†æ)
2. [é¡µé¢åˆå§‹åŒ–åŠ è½½è¯„è®ºåˆ—è¡¨](#2-é¡µé¢åˆå§‹åŒ–åŠ è½½è¯„è®ºåˆ—è¡¨)
3. [è¡¨å•æäº¤æ–°è¯„è®º](#3-è¡¨å•æäº¤æ–°è¯„è®º)
4. [ç‚¹èµåŠŸèƒ½å®ç°](#4-ç‚¹èµåŠŸèƒ½å®ç°)
5. [é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ](#5-é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ)
6. [åŠ¨æ€æ›´æ–°DOM](#6-åŠ¨æ€æ›´æ–°DOM)
7. [å®Œæ•´é¡¹ç›®å®æˆ˜](#7-å®Œæ•´é¡¹ç›®å®æˆ˜)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ é¡¹ç›®éœ€æ±‚åˆ†æ


### 1.1 ä»€ä¹ˆæ˜¯è¯„è®ºäº’åŠ¨ç³»ç»Ÿ


**ç®€å•ç†è§£**ï¼šå°±åƒå¾®åšã€æœ‹å‹åœˆé‚£æ ·çš„è¯„è®ºåŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- çœ‹åˆ°å·²æœ‰çš„è¯„è®º
- å‘è¡¨è‡ªå·±çš„è¯„è®º  
- ç»™è¯„è®ºç‚¹èµ
- å®æ—¶çœ‹åˆ°æœ€æ–°å†…å®¹

### 1.2 ç³»ç»ŸåŠŸèƒ½è§„åˆ’


```
è¯„è®ºç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± å‰ç«¯é¡µé¢                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”„ åŠ è½½è¯„è®ºåˆ—è¡¨ (GETè¯·æ±‚)       â”‚
â”‚  âœï¸  å‘å¸ƒæ–°è¯„è®º (POSTè¯·æ±‚)       â”‚
â”‚  ğŸ‘ ç‚¹èµåŠŸèƒ½ (PUTè¯·æ±‚)          â”‚
â”‚  ğŸ”„ å®æ—¶æ›´æ–°æ˜¾ç¤º                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†•ï¸ Ajaxäº¤äº’
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¥ï¸  åç«¯æœåŠ¡å™¨                 â”‚
â”‚  ğŸ’¾ è¯„è®ºæ•°æ®å­˜å‚¨                â”‚
â”‚  ğŸ”Œ APIæ¥å£å¤„ç†                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æŠ€æœ¯å®ç°æ€è·¯


**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **GETè¯·æ±‚**ï¼šä»æœåŠ¡å™¨è·å–æ•°æ®ï¼ˆæŸ¥çœ‹è¯„è®ºï¼‰
- **POSTè¯·æ±‚**ï¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ˆå‘å¸ƒè¯„è®ºï¼‰
- **DOMæ“ä½œ**ï¼šåŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹
- **ç”¨æˆ·ä½“éªŒ**ï¼šloadingæç¤ºã€é”™è¯¯å¤„ç†

---

## 2. ğŸ”„ é¡µé¢åˆå§‹åŒ–åŠ è½½è¯„è®ºåˆ—è¡¨


### 2.1 åŠ è½½è¯„è®ºçš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯é¡µé¢åˆå§‹åŒ–åŠ è½½**ï¼š
- ç”¨æˆ·æ‰“å¼€é¡µé¢æ—¶ï¼Œè‡ªåŠ¨ä»æœåŠ¡å™¨è·å–å·²æœ‰çš„è¯„è®º
- å°±åƒæ‰“å¼€å¾®ä¿¡æœ‹å‹åœˆï¼Œä¼šè‡ªåŠ¨æ˜¾ç¤ºå¥½å‹çš„åŠ¨æ€

### 2.2 GETè¯·æ±‚è·å–è¯„è®ºæ•°æ®


```javascript
// é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è·å–è¯„è®º
$(document).ready(function() {
    loadComments(); // è°ƒç”¨åŠ è½½è¯„è®ºçš„å‡½æ•°
});

// åŠ è½½è¯„è®ºåˆ—è¡¨çš„å‡½æ•°
function loadComments() {
    $.ajax({
        url: '/api/comments',      // æœåŠ¡å™¨æ¥å£åœ°å€
        type: 'GET',               // GETè¯·æ±‚ï¼šè·å–æ•°æ®
        dataType: 'json',          // æœŸæœ›è¿”å›JSONæ ¼å¼æ•°æ®
        
        success: function(response) {
            // è¯·æ±‚æˆåŠŸï¼Œæ˜¾ç¤ºè¯„è®º
            displayComments(response.data);
        },
        
        error: function() {
            // è¯·æ±‚å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            $('#comments-area').html('<p>è¯„è®ºåŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</p>');
        }
    });
}
```

### 2.3 æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼


**å…¸å‹çš„è¯„è®ºæ•°æ®ç»“æ„**ï¼š
```javascript
// æœåŠ¡å™¨è¿”å›çš„JSONæ•°æ®ç¤ºä¾‹
{
    "status": "success",
    "data": [
        {
            "id": 1,
            "username": "å¼ å°æ˜",
            "content": "è¿™ç¯‡æ–‡ç« å†™å¾—çœŸå¥½ï¼",
            "likes": 5,
            "time": "2024-01-15 10:30:00"
        },
        {
            "id": 2, 
            "username": "æå°çº¢",
            "content": "å­¦åˆ°äº†å¾ˆå¤šæ–°çŸ¥è¯†",
            "likes": 3,
            "time": "2024-01-15 11:20:00"
        }
    ]
}
```

### 2.4 åŠ¨æ€ç”Ÿæˆè¯„è®ºHTML


```javascript
// å°†è¯„è®ºæ•°æ®è½¬æ¢ä¸ºé¡µé¢æ˜¾ç¤º
function displayComments(comments) {
    let html = '';
    
    // éå†æ¯æ¡è¯„è®ºï¼Œç”ŸæˆHTML
    $.each(comments, function(index, comment) {
        html += `
            <div class="comment-item" data-id="${comment.id}">
                <div class="comment-header">
                    <strong>${comment.username}</strong>
                    <span class="time">${comment.time}</span>
                </div>
                <div class="comment-content">${comment.content}</div>
                <div class="comment-actions">
                    <button class="like-btn" data-id="${comment.id}">
                        ğŸ‘ <span class="like-count">${comment.likes}</span>
                    </button>
                </div>
            </div>
        `;
    });
    
    // å°†ç”Ÿæˆçš„HTMLæ’å…¥åˆ°é¡µé¢
    $('#comments-list').html(html);
}
```

---

## 3. âœï¸ è¡¨å•æäº¤æ–°è¯„è®º


### 3.1 å‘å¸ƒè¯„è®ºçš„å·¥ä½œæµç¨‹


**ç”¨æˆ·å‘å¸ƒè¯„è®ºçš„å®Œæ•´è¿‡ç¨‹**ï¼š
```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š
å†™è¯„è®º â†’ ç‚¹å‡»å‘å¸ƒ â†’ å‘é€åˆ°æœåŠ¡å™¨ â†’ æœåŠ¡å™¨ä¿å­˜ â†’ æ›´æ–°é¡µé¢æ˜¾ç¤º

æŠ€æœ¯å®ç°æµç¨‹ï¼š
è¡¨å•æ•°æ® â†’ POSTè¯·æ±‚ â†’ æœåŠ¡å™¨å¤„ç† â†’ è¿”å›ç»“æœ â†’ DOMæ›´æ–°
```

### 3.2 è¯„è®ºè¡¨å•HTMLç»“æ„


```html
<!-- è¯„è®ºå‘å¸ƒè¡¨å• -->
<div class="comment-form">
    <form id="comment-form">
        <div class="form-group">
            <input type="text" id="username" placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" required>
        </div>
        <div class="form-group">
            <textarea id="content" placeholder="å†™ä¸‹æ‚¨çš„è¯„è®º..." required></textarea>
        </div>
        <button type="submit" id="submit-btn">å‘å¸ƒè¯„è®º</button>
    </form>
</div>

<!-- è¯„è®ºæ˜¾ç¤ºåŒºåŸŸ -->
<div id="comments-area">
    <div id="comments-list"></div>
</div>
```

### 3.3 POSTè¯·æ±‚æäº¤è¯„è®º


```javascript
// ç›‘å¬è¡¨å•æäº¤äº‹ä»¶
$('#comment-form').on('submit', function(e) {
    e.preventDefault(); // é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º
    
    // è·å–è¡¨å•æ•°æ®
    let formData = {
        username: $('#username').val().trim(),
        content: $('#content').val().trim()
    };
    
    // ç®€å•éªŒè¯
    if (!formData.username || !formData.content) {
        alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯');
        return;
    }
    
    // å‘é€POSTè¯·æ±‚
    submitComment(formData);
});

// æäº¤è¯„è®ºçš„å‡½æ•°
function submitComment(data) {
    $.ajax({
        url: '/api/comments',
        type: 'POST',              // POSTè¯·æ±‚ï¼šæäº¤æ•°æ®
        data: JSON.stringify(data), // å°†æ•°æ®è½¬ä¸ºJSONå­—ç¬¦ä¸²
        contentType: 'application/json', // å‘Šè¯‰æœåŠ¡å™¨æ•°æ®æ ¼å¼
        dataType: 'json',
        
        beforeSend: function() {
            // è¯·æ±‚å‘é€å‰ï¼šç¦ç”¨æŒ‰é’®ï¼Œæ˜¾ç¤ºloading
            $('#submit-btn').prop('disabled', true).text('å‘å¸ƒä¸­...');
        },
        
        success: function(response) {
            // å‘å¸ƒæˆåŠŸ
            if (response.status === 'success') {
                // æ¸…ç©ºè¡¨å•
                $('#comment-form')[0].reset();
                // é‡æ–°åŠ è½½è¯„è®ºåˆ—è¡¨
                loadComments();
                alert('è¯„è®ºå‘å¸ƒæˆåŠŸï¼');
            }
        },
        
        error: function() {
            // å‘å¸ƒå¤±è´¥
            alert('è¯„è®ºå‘å¸ƒå¤±è´¥ï¼Œè¯·é‡è¯•');
        },
        
        complete: function() {
            // æ— è®ºæˆåŠŸå¤±è´¥ï¼Œéƒ½è¦æ¢å¤æŒ‰é’®çŠ¶æ€
            $('#submit-btn').prop('disabled', false).text('å‘å¸ƒè¯„è®º');
        }
    });
}
```

---

## 4. ğŸ‘ ç‚¹èµåŠŸèƒ½å®ç°


### 4.1 ç‚¹èµåŠŸèƒ½çš„åŸºæœ¬æ¦‚å¿µ


**ç‚¹èµçš„å·¥ä½œåŸç†**ï¼š
- ç”¨æˆ·ç‚¹å‡»"ğŸ‘"æŒ‰é’®
- å‘é€è¯·æ±‚å‘Šè¯‰æœåŠ¡å™¨"ç»™è¿™æ¡è¯„è®ºç‚¹èµ"
- æœåŠ¡å™¨æ›´æ–°ç‚¹èµæ•°é‡
- é¡µé¢æ˜¾ç¤ºæœ€æ–°çš„ç‚¹èµæ•°

### 4.2 ç‚¹èµè¯·æ±‚å®ç°


```javascript
// ç›‘å¬ç‚¹èµæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
$(document).on('click', '.like-btn', function() {
    let commentId = $(this).data('id');
    let $button = $(this);
    
    // å‘é€ç‚¹èµè¯·æ±‚
    $.ajax({
        url: '/api/comments/' + commentId + '/like',
        type: 'PUT',               // PUTè¯·æ±‚ï¼šæ›´æ–°æ•°æ®
        dataType: 'json',
        
        beforeSend: function() {
            // é˜²æ­¢é‡å¤ç‚¹å‡»
            $button.prop('disabled', true);
        },
        
        success: function(response) {
            if (response.status === 'success') {
                // æ›´æ–°ç‚¹èµæ•°æ˜¾ç¤º
                $button.find('.like-count').text(response.likes);
                
                // æ·»åŠ ç‚¹èµæ•ˆæœ
                $button.addClass('liked');
            }
        },
        
        error: function() {
            alert('ç‚¹èµå¤±è´¥ï¼Œè¯·é‡è¯•');
        },
        
        complete: function() {
            // æ¢å¤æŒ‰é’®çŠ¶æ€
            $button.prop('disabled', false);
        }
    });
});
```

### 4.3 ç‚¹èµè§†è§‰æ•ˆæœ


```css
/* ç‚¹èµæŒ‰é’®æ ·å¼ */
.like-btn {
    background: none;
    border: 1px solid #ddd;
    padding: 5px 10px;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.like-btn:hover {
    background: #f0f0f0;
}

/* å·²ç‚¹èµçŠ¶æ€ */
.like-btn.liked {
    background: #ff6b6b;
    color: white;
    border-color: #ff6b6b;
}
```

---

## 5. âš ï¸ é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦é”™è¯¯å¤„ç†


**å¸¸è§çš„é—®é¢˜æƒ…å†µ**ï¼š
- ç½‘ç»œè¿æ¥ä¸ç¨³å®š
- æœåŠ¡å™¨ä¸´æ—¶æ•…éšœ
- ç”¨æˆ·è¾“å…¥ä¸åˆæ³•
- è¯·æ±‚è¶…æ—¶

**ç”¨æˆ·ä½“éªŒçš„é‡è¦æ€§**ï¼š
- è®©ç”¨æˆ·çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ
- æä¾›æ˜ç¡®çš„æ“ä½œæŒ‡å¼•
- é¿å…ç”¨æˆ·ç–‘æƒ‘å’Œç„¦è™‘

### 5.2 Loadingæç¤ºå®ç°


```javascript
// é€šç”¨çš„loadingæç¤ºå‡½æ•°
function showLoading(message) {
    let loadingHtml = `
        <div class="loading-overlay">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>${message || 'åŠ è½½ä¸­...'}</p>
            </div>
        </div>
    `;
    $('body').append(loadingHtml);
}

function hideLoading() {
    $('.loading-overlay').remove();
}

// åœ¨Ajaxè¯·æ±‚ä¸­ä½¿ç”¨
function loadComments() {
    showLoading('æ­£åœ¨åŠ è½½è¯„è®º...');
    
    $.ajax({
        url: '/api/comments',
        type: 'GET',
        success: function(response) {
            displayComments(response.data);
        },
        error: function() {
            showError('è¯„è®ºåŠ è½½å¤±è´¥');
        },
        complete: function() {
            hideLoading();
        }
    });
}
```

### 5.3 é”™è¯¯ä¿¡æ¯å±•ç¤º


```javascript
// é”™è¯¯æç¤ºå‡½æ•°
function showError(message) {
    let errorHtml = `
        <div class="error-message">
            âš ï¸ ${message}
            <button class="close-error">Ã—</button>
        </div>
    `;
    
    $('#messages').html(errorHtml);
    
    // 3ç§’åè‡ªåŠ¨éšè—
    setTimeout(function() {
        $('.error-message').fadeOut();
    }, 3000);
}

// å…³é—­é”™è¯¯æç¤º
$(document).on('click', '.close-error', function() {
    $(this).parent().fadeOut();
});
```

### 5.4 æŒ‰é’®çŠ¶æ€ç®¡ç†


```javascript
// æŒ‰é’®çŠ¶æ€ç®¡ç†å™¨
const ButtonManager = {
    // è®¾ç½®loadingçŠ¶æ€
    setLoading: function($button, loadingText) {
        $button.data('original-text', $button.text());
        $button.prop('disabled', true).text(loadingText);
    },
    
    // æ¢å¤æ­£å¸¸çŠ¶æ€
    restore: function($button) {
        let originalText = $button.data('original-text');
        $button.prop('disabled', false).text(originalText);
    },
    
    // è®¾ç½®æˆåŠŸçŠ¶æ€
    setSuccess: function($button, successText, duration) {
        $button.text(successText).removeClass('btn-loading').addClass('btn-success');
        
        setTimeout(() => {
            this.restore($button);
            $button.removeClass('btn-success');
        }, duration || 2000);
    }
};

// ä½¿ç”¨ç¤ºä¾‹
$('#submit-btn').on('click', function() {
    let $btn = $(this);
    ButtonManager.setLoading($btn, 'å‘å¸ƒä¸­...');
    
    // æ¨¡æ‹Ÿè¯·æ±‚å®Œæˆ
    setTimeout(() => {
        ButtonManager.setSuccess($btn, 'å‘å¸ƒæˆåŠŸï¼');
    }, 2000);
});
```

---

## 6. ğŸ”„ åŠ¨æ€æ›´æ–°DOM


### 6.1 DOMæ›´æ–°çš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯DOMæ›´æ–°**ï¼š
- DOMå°±æ˜¯é¡µé¢ä¸Šçš„HTMLå…ƒç´ 
- åŠ¨æ€æ›´æ–°å°±æ˜¯ç”¨JavaScriptæ”¹å˜é¡µé¢å†…å®¹
- ä¸éœ€è¦åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†

### 6.2 æ–°å¢è¯„è®ºåˆ°åˆ—è¡¨


```javascript
// åœ¨åˆ—è¡¨é¡¶éƒ¨æ·»åŠ æ–°è¯„è®º
function addNewComment(comment) {
    let commentHtml = `
        <div class="comment-item new-comment" data-id="${comment.id}">
            <div class="comment-header">
                <strong>${comment.username}</strong>
                <span class="time">${comment.time}</span>
                <span class="new-tag">NEW</span>
            </div>
            <div class="comment-content">${comment.content}</div>
            <div class="comment-actions">
                <button class="like-btn" data-id="${comment.id}">
                    ğŸ‘ <span class="like-count">0</span>
                </button>
            </div>
        </div>
    `;
    
    // åœ¨åˆ—è¡¨é¡¶éƒ¨æ’å…¥æ–°è¯„è®º
    $('#comments-list').prepend(commentHtml);
    
    // æ·»åŠ è¿›å…¥åŠ¨ç”»
    $('.new-comment').hide().slideDown(500);
    
    // 3ç§’åç§»é™¤NEWæ ‡ç­¾
    setTimeout(function() {
        $('.new-tag').fadeOut();
    }, 3000);
}
```

### 6.3 æ›´æ–°ç‚¹èµæ•°é‡


```javascript
// æ›´æ–°ç‰¹å®šè¯„è®ºçš„ç‚¹èµæ•°
function updateLikeCount(commentId, newCount) {
    let $comment = $(`.comment-item[data-id="${commentId}"]`);
    let $likeCount = $comment.find('.like-count');
    
    // æ•°å­—å˜åŒ–åŠ¨ç”»
    $likeCount.addClass('count-update');
    $likeCount.text(newCount);
    
    setTimeout(function() {
        $likeCount.removeClass('count-update');
    }, 300);
}
```

### 6.4 æ™ºèƒ½çš„DOMæ›´æ–°ç­–ç•¥


```javascript
// æ™ºèƒ½æ›´æ–°ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†
function smartUpdateComments(newComments) {
    let $existingComments = $('.comment-item');
    let existingIds = [];
    
    // è·å–ç°æœ‰è¯„è®ºID
    $existingComments.each(function() {
        existingIds.push($(this).data('id'));
    });
    
    // æ‰¾å‡ºæ–°å¢çš„è¯„è®º
    $.each(newComments, function(index, comment) {
        if (existingIds.indexOf(comment.id) === -1) {
            // è¿™æ˜¯æ–°è¯„è®ºï¼Œæ·»åŠ åˆ°åˆ—è¡¨
            addNewComment(comment);
        } else {
            // è¿™æ˜¯å·²å­˜åœ¨çš„è¯„è®ºï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°ç‚¹èµæ•°
            updateExistingComment(comment);
        }
    });
}

function updateExistingComment(comment) {
    let $comment = $(`.comment-item[data-id="${comment.id}"]`);
    let currentLikes = parseInt($comment.find('.like-count').text());
    
    if (currentLikes !== comment.likes) {
        updateLikeCount(comment.id, comment.likes);
    }
}
```

---

## 7. ğŸš€ å®Œæ•´é¡¹ç›®å®æˆ˜


### 7.1 å®Œæ•´çš„HTMLç»“æ„


```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ç« è¯„è®ºç³»ç»Ÿ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- æ–‡ç« å†…å®¹åŒº -->
    <article class="article">
        <h1>jQuery Ajax å®æˆ˜æ•™ç¨‹</h1>
        <p>è¿™é‡Œæ˜¯æ–‡ç« æ­£æ–‡å†…å®¹...</p>
    </article>

    <!-- è¯„è®ºåŒºåŸŸ -->
    <section class="comments-section">
        <h2>ğŸ’¬ è¯„è®ºåŒº</h2>
        
        <!-- æ¶ˆæ¯æç¤ºåŒº -->
        <div id="messages"></div>
        
        <!-- è¯„è®ºè¡¨å• -->
        <div class="comment-form">
            <h3>å‘è¡¨è¯„è®º</h3>
            <form id="comment-form">
                <div class="form-group">
                    <input type="text" id="username" placeholder="æ‚¨çš„æ˜µç§°" required>
                </div>
                <div class="form-group">
                    <textarea id="content" placeholder="å†™ä¸‹æ‚¨çš„è¯„è®º..." rows="4" required></textarea>
                </div>
                <button type="submit" id="submit-btn" class="btn-primary">
                    ğŸ“ å‘å¸ƒè¯„è®º
                </button>
            </form>
        </div>
        
        <!-- è¯„è®ºåˆ—è¡¨ -->
        <div class="comments-area">
            <h3>ğŸ“‹ è¯„è®ºåˆ—è¡¨ (<span id="comment-count">0</span>)</h3>
            <div id="comments-list">
                <!-- è¯„è®ºä¼šåŠ¨æ€æ’å…¥è¿™é‡Œ -->
            </div>
        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="comment-system.js"></script>
</body>
</html>
```

### 7.2 å®Œæ•´çš„JavaScriptä»£ç 


```javascript
// è¯„è®ºç³»ç»Ÿä¸»è¦åŠŸèƒ½
$(document).ready(function() {
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    initCommentSystem();
});

// åˆå§‹åŒ–è¯„è®ºç³»ç»Ÿ
function initCommentSystem() {
    loadComments();           // åŠ è½½ç°æœ‰è¯„è®º
    bindFormEvents();         // ç»‘å®šè¡¨å•äº‹ä»¶
    bindCommentEvents();      // ç»‘å®šè¯„è®ºäº¤äº’äº‹ä»¶
}

// åŠ è½½è¯„è®ºåˆ—è¡¨
function loadComments() {
    showLoading('æ­£åœ¨åŠ è½½è¯„è®º...');
    
    $.ajax({
        url: '/api/comments',
        type: 'GET',
        dataType: 'json',
        timeout: 10000,  // 10ç§’è¶…æ—¶
        
        success: function(response) {
            if (response.status === 'success') {
                displayComments(response.data);
                updateCommentCount(response.data.length);
            }
        },
        
        error: function(xhr, status, error) {
            let errorMsg = 'è¯„è®ºåŠ è½½å¤±è´¥';
            if (status === 'timeout') {
                errorMsg = 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
            }
            showError(errorMsg);
        },
        
        complete: function() {
            hideLoading();
        }
    });
}

// æ˜¾ç¤ºè¯„è®ºåˆ—è¡¨
function displayComments(comments) {
    if (comments.length === 0) {
        $('#comments-list').html(`
            <div class="empty-comments">
                <p>ğŸˆ è¿˜æ²¡æœ‰è¯„è®ºï¼Œæ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼</p>
            </div>
        `);
        return;
    }
    
    let html = '';
    $.each(comments, function(index, comment) {
        html += createCommentHTML(comment);
    });
    
    $('#comments-list').html(html);
}

// åˆ›å»ºå•æ¡è¯„è®ºçš„HTML
function createCommentHTML(comment) {
    return `
        <div class="comment-item" data-id="${comment.id}">
            <div class="comment-avatar">
                <span class="avatar">${comment.username.charAt(0)}</span>
            </div>
            <div class="comment-body">
                <div class="comment-header">
                    <strong class="username">${comment.username}</strong>
                    <span class="time">${formatTime(comment.time)}</span>
                </div>
                <div class="comment-content">${comment.content}</div>
                <div class="comment-actions">
                    <button class="like-btn ${comment.liked ? 'liked' : ''}" data-id="${comment.id}">
                        ğŸ‘ <span class="like-count">${comment.likes}</span>
                    </button>
                    <button class="reply-btn" data-id="${comment.id}">
                        ğŸ’¬ å›å¤
                    </button>
                </div>
            </div>
        </div>
    `;
}

// ç»‘å®šè¡¨å•äº‹ä»¶
function bindFormEvents() {
    $('#comment-form').on('submit', function(e) {
        e.preventDefault();
        submitComment();
    });
}

// æäº¤è¯„è®º
function submitComment() {
    let formData = {
        username: $('#username').val().trim(),
        content: $('#content').val().trim()
    };
    
    // è¡¨å•éªŒè¯
    if (!validateForm(formData)) {
        return;
    }
    
    let $submitBtn = $('#submit-btn');
    ButtonManager.setLoading($submitBtn, 'å‘å¸ƒä¸­...');
    
    $.ajax({
        url: '/api/comments',
        type: 'POST',
        data: JSON.stringify(formData),
        contentType: 'application/json',
        dataType: 'json',
        
        success: function(response) {
            if (response.status === 'success') {
                // æ¸…ç©ºè¡¨å•
                $('#comment-form')[0].reset();
                
                // æ·»åŠ æ–°è¯„è®ºåˆ°åˆ—è¡¨é¡¶éƒ¨
                addNewComment(response.data);
                
                // æ›´æ–°è¯„è®ºè®¡æ•°
                updateCommentCount();
                
                ButtonManager.setSuccess($submitBtn, 'å‘å¸ƒæˆåŠŸï¼');
                showSuccess('è¯„è®ºå‘å¸ƒæˆåŠŸï¼');
            }
        },
        
        error: function() {
            ButtonManager.restore($submitBtn);
            showError('è¯„è®ºå‘å¸ƒå¤±è´¥ï¼Œè¯·é‡è¯•');
        }
    });
}

// è¡¨å•éªŒè¯
function validateForm(data) {
    if (!data.username) {
        showError('è¯·è¾“å…¥æ‚¨çš„æ˜µç§°');
        $('#username').focus();
        return false;
    }
    
    if (data.username.length > 20) {
        showError('æ˜µç§°ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦');
        $('#username').focus();
        return false;
    }
    
    if (!data.content) {
        showError('è¯·è¾“å…¥è¯„è®ºå†…å®¹');
        $('#content').focus();
        return false;
    }
    
    if (data.content.length > 500) {
        showError('è¯„è®ºå†…å®¹ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦');
        $('#content').focus();
        return false;
    }
    
    return true;
}

// ç»‘å®šè¯„è®ºäº¤äº’äº‹ä»¶
function bindCommentEvents() {
    // ç‚¹èµåŠŸèƒ½
    $(document).on('click', '.like-btn', function() {
        let commentId = $(this).data('id');
        let $btn = $(this);
        
        if ($btn.hasClass('liked')) {
            return; // å·²ç»ç‚¹è¿‡èµäº†
        }
        
        $btn.prop('disabled', true);
        
        $.ajax({
            url: `/api/comments/${commentId}/like`,
            type: 'PUT',
            dataType: 'json',
            
            success: function(response) {
                if (response.status === 'success') {
                    $btn.addClass('liked');
                    $btn.find('.like-count').text(response.likes);
                    
                    // ç‚¹èµåŠ¨ç”»æ•ˆæœ
                    $btn.addClass('like-animation');
                    setTimeout(() => $btn.removeClass('like-animation'), 300);
                }
            },
            
            error: function() {
                showError('ç‚¹èµå¤±è´¥ï¼Œè¯·é‡è¯•');
            },
            
            complete: function() {
                $btn.prop('disabled', false);
            }
        });
    });
}

// å·¥å…·å‡½æ•°
function formatTime(timeString) {
    let time = new Date(timeString);
    let now = new Date();
    let diff = now - time;
    
    if (diff < 60000) return 'åˆšåˆš';
    if (diff < 3600000) return Math.floor(diff / 60000) + 'åˆ†é’Ÿå‰';
    if (diff < 86400000) return Math.floor(diff / 3600000) + 'å°æ—¶å‰';
    return Math.floor(diff / 86400000) + 'å¤©å‰';
}

function updateCommentCount(count) {
    if (count === undefined) {
        count = $('.comment-item').length;
    }
    $('#comment-count').text(count);
}

// æ¶ˆæ¯æç¤ºç³»ç»Ÿ
function showSuccess(message) {
    showMessage(message, 'success');
}

function showError(message) {
    showMessage(message, 'error');
}

function showMessage(message, type) {
    let icon = type === 'success' ? 'âœ…' : 'âš ï¸';
    let className = `message-${type}`;
    
    let messageHtml = `
        <div class="message ${className}">
            ${icon} ${message}
            <button class="close-message">Ã—</button>
        </div>
    `;
    
    $('#messages').html(messageHtml);
    
    setTimeout(function() {
        $('.message').fadeOut();
    }, 3000);
}

$(document).on('click', '.close-message', function() {
    $(this).parent().fadeOut();
});
```

### 7.3 å®Œæ•´çš„CSSæ ·å¼


```css
/* åŸºç¡€æ ·å¼ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background: #f5f5f5;
}

.article {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background: white;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* è¯„è®ºåŒºåŸŸæ ·å¼ */
.comments-section {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* æ¶ˆæ¯æç¤ºæ ·å¼ */
.message {
    padding: 10px 15px;
    margin-bottom: 15px;
    border-radius: 5px;
    position: relative;
}

.message-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.message-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.close-message {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
}

/* è¯„è®ºè¡¨å•æ ·å¼ */
.comment-form {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 30px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

.btn-primary {
    background: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background: #0056b3;
}

.btn-primary:disabled {
    background: #6c757d;
    cursor: not-allowed;
}

/* è¯„è®ºåˆ—è¡¨æ ·å¼ */
.comment-item {
    display: flex;
    margin-bottom: 20px;
    padding: 15px;
    background: #fff;
    border: 1px solid #eee;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.comment-item:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.comment-avatar {
    margin-right: 15px;
}

.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #007bff;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.comment-body {
    flex: 1;
}

.comment-header {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
}

.username {
    color: #007bff;
    margin-right: 10px;
}

.time {
    color: #6c757d;
    font-size: 12px;
}

.comment-content {
    margin-bottom: 10px;
    line-height: 1.5;
}

.comment-actions {
    display: flex;
    gap: 10px;
}

.like-btn,
.reply-btn {
    background: none;
    border: 1px solid #ddd;
    padding: 5px 10px;
    border-radius: 15px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.3s ease;
}

.like-btn:hover,
.reply-btn:hover {
    background: #f0f0f0;
}

.like-btn.liked {
    background: #ff6b6b;
    color: white;
    border-color: #ff6b6b;
}

/* åŠ¨ç”»æ•ˆæœ */
.like-animation {
    animation: likeEffect 0.3s ease;
}

@keyframes likeEffect {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.count-update {
    animation: countUpdate 0.3s ease;
}

@keyframes countUpdate {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); color: #ff6b6b; }
    100% { transform: scale(1); }
}

/* Loadingæ ·å¼ */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.loading-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
}

.spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #007bff;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto 10px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ç©ºçŠ¶æ€æ ·å¼ */
.empty-comments {
    text-align: center;
    padding: 40px;
    color: #6c757d;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .comments-section,
    .article {
        margin: 10px;
        padding: 15px;
    }
    
    .comment-item {
        flex-direction: column;
    }
    
    .comment-avatar {
        margin-right: 0;
        margin-bottom: 10px;
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ GETè¯·æ±‚ï¼šä»æœåŠ¡å™¨è·å–æ•°æ®ï¼ˆæŸ¥çœ‹è¯„è®ºåˆ—è¡¨ï¼‰
ğŸ”¸ POSTè¯·æ±‚ï¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ˆå‘å¸ƒæ–°è¯„è®ºï¼‰
ğŸ”¸ PUTè¯·æ±‚ï¼šæ›´æ–°æœåŠ¡å™¨æ•°æ®ï¼ˆç‚¹èµåŠŸèƒ½ï¼‰
ğŸ”¸ DOMæ“ä½œï¼šåŠ¨æ€æ›´æ–°é¡µé¢å†…å®¹ï¼Œæ— éœ€åˆ·æ–°
ğŸ”¸ ç”¨æˆ·ä½“éªŒï¼šloadingæç¤ºã€é”™è¯¯å¤„ç†ã€æŒ‰é’®çŠ¶æ€ç®¡ç†
ğŸ”¸ æ•°æ®éªŒè¯ï¼šè¡¨å•è¾“å…¥éªŒè¯ï¼Œç¡®ä¿æ•°æ®å®‰å…¨
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Ajaxçš„æ ¸å¿ƒä»·å€¼**
```
ä¼ ç»Ÿæ–¹å¼ï¼šç‚¹å‡» â†’ é¡µé¢åˆ·æ–° â†’ é‡æ–°åŠ è½½æ‰€æœ‰å†…å®¹
Ajaxæ–¹å¼ï¼šç‚¹å‡» â†’ åå°è¯·æ±‚ â†’ åªæ›´æ–°å˜åŒ–éƒ¨åˆ†

ä¼˜åŠ¿ï¼š
â€¢ ç”¨æˆ·ä½“éªŒæµç•…ï¼Œæ— é¡µé¢è·³è½¬
â€¢ èŠ‚çœå¸¦å®½ï¼Œåªä¼ è¾“å¿…è¦æ•°æ®
â€¢ æé«˜å“åº”é€Ÿåº¦
â€¢ æ”¯æŒå®æ—¶äº¤äº’
```

**ğŸ”¹ è¯·æ±‚ç±»å‹çš„é€‰æ‹©**
```
GETè¯·æ±‚ - è·å–æ•°æ®ï¼š
â€¢ æŸ¥çœ‹è¯„è®ºåˆ—è¡¨
â€¢ æœç´¢å†…å®¹
â€¢ è·å–ç”¨æˆ·ä¿¡æ¯

POSTè¯·æ±‚ - åˆ›å»ºæ•°æ®ï¼š
â€¢ å‘å¸ƒæ–°è¯„è®º
â€¢ ç”¨æˆ·æ³¨å†Œ
â€¢ æäº¤è¡¨å•

PUTè¯·æ±‚ - æ›´æ–°æ•°æ®ï¼š
â€¢ ä¿®æ”¹è¯„è®º
â€¢ ç‚¹èµæ“ä½œ
â€¢ æ›´æ–°ä¸ªäººèµ„æ–™
```

**ğŸ”¹ ç”¨æˆ·ä½“éªŒè®¾è®¡åŸåˆ™**
```
å³æ—¶åé¦ˆï¼š
â€¢ ç‚¹å‡»æŒ‰é’®ç«‹å³æ˜¾ç¤ºloadingçŠ¶æ€
â€¢ æ“ä½œæˆåŠŸç»™å‡ºæ˜ç¡®æç¤º
â€¢ é”™è¯¯å‘ç”Ÿæ—¶æä¾›è§£å†³å»ºè®®

é˜²æ­¢è¯¯æ“ä½œï¼š
â€¢ æäº¤æœŸé—´ç¦ç”¨æŒ‰é’®
â€¢ é‡è¦æ“ä½œéœ€è¦ç¡®è®¤
â€¢ æ•°æ®éªŒè¯åœ¨å‰ç«¯å’Œåç«¯éƒ½è¦åš

ä¼˜é›…é™çº§ï¼š
â€¢ ç½‘ç»œé”™è¯¯æ—¶çš„å‹å¥½æç¤º
â€¢ è¶…æ—¶é‡è¯•æœºåˆ¶
â€¢ ç¦»çº¿çŠ¶æ€çš„å¤„ç†
```

### 8.3 å®é™…åº”ç”¨åœºæ™¯


**å¸¸è§çš„Ajaxåº”ç”¨**ï¼š
- ğŸ“± **ç¤¾äº¤åª’ä½“**ï¼šç‚¹èµã€è¯„è®ºã€åˆ†äº«
- ğŸ›’ **ç”µå•†ç½‘ç«™**ï¼šåŠ å…¥è´­ç‰©è½¦ã€å•†å“ç­›é€‰
- ğŸ“§ **é‚®ç®±ç³»ç»Ÿ**ï¼šå‘é€é‚®ä»¶ã€åˆ é™¤é‚®ä»¶
- ğŸ” **æœç´¢åŠŸèƒ½**ï¼šå®æ—¶æœç´¢å»ºè®®
- ğŸ“Š **æ•°æ®æŠ¥è¡¨**ï¼šåŠ¨æ€å›¾è¡¨æ›´æ–°

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
Ajaxè¯·æ±‚è¦åˆ†ç±»ï¼ŒGETè·å–POSTåˆ›å»º
PUTæ›´æ–°DELETEåˆ é™¤ï¼ŒçŠ¶æ€ç®¡ç†åˆ«å¿˜è®°
ç”¨æˆ·ä½“éªŒæ˜¯å…³é”®ï¼Œé”™è¯¯å¤„ç†è¦å®Œå–„
DOMæ›´æ–°è¦åŠæ—¶ï¼Œäº¤äº’æµç•…ç”¨æˆ·çˆ±
```