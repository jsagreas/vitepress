---
title: 5ã€å·¥å‚æ–¹æ³•æ¨¡å¼æ‰©å±•åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [å‚æ•°åŒ–å·¥å‚æ–¹æ³•](#1-å‚æ•°åŒ–å·¥å‚æ–¹æ³•)
2. [å¤šäº§å“å·¥å‚è®¾è®¡](#2-å¤šäº§å“å·¥å‚è®¾è®¡)
3. [å·¥å‚ç¼“å­˜æœºåˆ¶](#3-å·¥å‚ç¼“å­˜æœºåˆ¶)
4. [å¼‚æ­¥å·¥å‚å®ç°](#4-å¼‚æ­¥å·¥å‚å®ç°)
5. [å·¥å‚é“¾æ¨¡å¼](#5-å·¥å‚é“¾æ¨¡å¼)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å‚æ•°åŒ–å·¥å‚æ–¹æ³•


### 1.1 ä»€ä¹ˆæ˜¯å‚æ•°åŒ–å·¥å‚æ–¹æ³•


**ğŸ’¡ é€šä¿—ç†è§£**ï¼šå°±åƒä¸€ä¸ªæ™ºèƒ½å·¥å‚ï¼Œä½ å‘Šè¯‰å®ƒä½ è¦ä»€ä¹ˆç±»å‹çš„äº§å“ï¼Œå®ƒå°±ç»™ä½ ç”Ÿäº§å¯¹åº”çš„äº§å“ã€‚

```
ä¼ ç»Ÿå·¥å‚æ–¹æ³•ï¼š
ä¸€ä¸ªå·¥å‚ â†’ åªèƒ½ç”Ÿäº§ä¸€ç§äº§å“

å‚æ•°åŒ–å·¥å‚æ–¹æ³•ï¼š
ä¸€ä¸ªå·¥å‚ + å‚æ•° â†’ å¯ä»¥ç”Ÿäº§å¤šç§äº§å“
```

**ğŸ”¸ æ ¸å¿ƒæ€æƒ³**
- **ç»Ÿä¸€å…¥å£**ï¼šä¸€ä¸ªå·¥å‚æ–¹æ³•æå®šæ‰€æœ‰äº§å“åˆ›å»º
- **å‚æ•°é©±åŠ¨**ï¼šé€šè¿‡å‚æ•°å†³å®šåˆ›å»ºä»€ä¹ˆäº§å“
- **ä»£ç ç®€æ´**ï¼šé¿å…ä¸ºæ¯ç§äº§å“éƒ½åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»

### 1.2 åŸºç¡€å®ç°æ–¹å¼


**ğŸ“ æšä¸¾å‚æ•°æ–¹å¼**
```java
// äº§å“ç±»å‹æšä¸¾
enum DatabaseType {
    MYSQL, POSTGRESQL, ORACLE
}

// ç»Ÿä¸€çš„æ•°æ®åº“å·¥å‚
class DatabaseFactory {
    // å‚æ•°åŒ–å·¥å‚æ–¹æ³•
    public static Database createDatabase(DatabaseType type) {
        switch (type) {
            case MYSQL:
                return new MySQLDatabase();
            case POSTGRESQL:
                return new PostgreSQLDatabase();
            case ORACLE:
                return new OracleDatabase();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„æ•°æ®åº“ç±»å‹");
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
Database mysql = DatabaseFactory.createDatabase(DatabaseType.MYSQL);
Database postgres = DatabaseFactory.createDatabase(DatabaseType.POSTGRESQL);
```

**ğŸ” å­—ç¬¦ä¸²å‚æ•°æ–¹å¼**
```java
class DatabaseFactory {
    public static Database createDatabase(String type) {
        switch (type.toLowerCase()) {
            case "mysql":
                return new MySQLDatabase();
            case "postgresql":
                return new PostgreSQLDatabase();
            case "oracle":
                return new OracleDatabase();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„æ•°æ®åº“ç±»å‹: " + type);
        }
    }
}

// ä½¿ç”¨æ›´çµæ´»
Database db = DatabaseFactory.createDatabase("mysql");
```

### 1.3 é«˜çº§å‚æ•°åŒ–æ¨¡å¼


**âš¡ é…ç½®å¯¹è±¡å‚æ•°**
```java
// é…ç½®ç±»
class DatabaseConfig {
    private String type;
    private String host;
    private int port;
    private String username;
    private String password;
    
    // æ„é€ æ–¹æ³•å’Œgetter/setter...
}

// å¢å¼ºçš„å·¥å‚æ–¹æ³•
class DatabaseFactory {
    public static Database createDatabase(DatabaseConfig config) {
        Database db;
        
        // æ ¹æ®ç±»å‹åˆ›å»ºå¯¹åº”æ•°æ®åº“
        switch (config.getType()) {
            case "mysql":
                db = new MySQLDatabase();
                break;
            case "postgresql":
                db = new PostgreSQLDatabase();
                break;
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„ç±»å‹");
        }
        
        // ç»Ÿä¸€é…ç½®è¿æ¥å‚æ•°
        db.setHost(config.getHost());
        db.setPort(config.getPort());
        db.setCredentials(config.getUsername(), config.getPassword());
        
        return db;
    }
}
```

### 1.4 å®é™…åº”ç”¨åœºæ™¯


| åº”ç”¨åœºæ™¯ | **å‚æ•°ç±»å‹** | **ä¼˜åŠ¿** | **ä½¿ç”¨æ—¶æœº** |
|---------|------------|---------|-------------|
| ğŸ—„ï¸ **æ•°æ®åº“è¿æ¥** | `æšä¸¾/å­—ç¬¦ä¸²` | `ç»Ÿä¸€ç®¡ç†å¤šç§æ•°æ®åº“` | `éœ€è¦æ”¯æŒå¤šç§æ•°æ®åº“æ—¶` |
| ğŸ“„ **æ–‡ä»¶è§£æå™¨** | `æ–‡ä»¶æ‰©å±•å` | `æ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨é€‰æ‹©è§£æå™¨` | `å¤„ç†å¤šç§æ–‡ä»¶æ ¼å¼æ—¶` |
| ğŸ”— **HTTPå®¢æˆ·ç«¯** | `åè®®ç‰ˆæœ¬` | `æ”¯æŒä¸åŒHTTPç‰ˆæœ¬` | `éœ€è¦å…¼å®¹å¤šç‰ˆæœ¬åè®®æ—¶` |
| ğŸ¨ **UIç»„ä»¶** | `å¹³å°æ ‡è¯†` | `è·¨å¹³å°UIç»„ä»¶åˆ›å»º` | `å¤šå¹³å°åº”ç”¨å¼€å‘æ—¶` |

---

## 2. ğŸ­ å¤šäº§å“å·¥å‚è®¾è®¡


### 2.1 ä»€ä¹ˆæ˜¯å¤šäº§å“å·¥å‚


**ğŸ­ ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒä¸€ä¸ªå¤§å‹åˆ¶é€ å·¥å‚ï¼Œæ—¢èƒ½ç”Ÿäº§æ±½è½¦ï¼Œä¹Ÿèƒ½ç”Ÿäº§æ‰‹æœºï¼Œè¿˜èƒ½ç”Ÿäº§ç”µè„‘ã€‚

```
å•äº§å“å·¥å‚ï¼š
æ±½è½¦å·¥å‚ â†’ åªç”Ÿäº§æ±½è½¦

å¤šäº§å“å·¥å‚ï¼š
ç»¼åˆå·¥å‚ â†’ ç”Ÿäº§æ±½è½¦ã€æ‰‹æœºã€ç”µè„‘...
```

**ğŸ”¸ è®¾è®¡ç†å¿µ**
- **äº§å“æ—ç®¡ç†**ï¼šä¸€ä¸ªå·¥å‚è´Ÿè´£ä¸€æ•´å¥—ç›¸å…³äº§å“
- **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰äº§å“éƒ½æœ‰ç»Ÿä¸€çš„åˆ›å»ºæ–¹å¼
- **æ‰©å±•æ€§å¼º**ï¼šæ–°å¢äº§å“åªéœ€è¦æ‰©å±•ï¼Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç 

### 2.2 æŠ½è±¡å·¥å‚å®ç°


**ğŸ“Š äº§å“æ—è®¾è®¡æ¶æ„**
```
UIå·¥å‚ä½“ç³»ï¼š
â”œâ”€â”€ WindowsUIFactory (Windowsé£æ ¼)
â”‚   â”œâ”€â”€ createButton() â†’ WindowsButton
â”‚   â”œâ”€â”€ createDialog() â†’ WindowsDialog
â”‚   â””â”€â”€ createMenu() â†’ WindowsMenu
â”œâ”€â”€ MacUIFactory (Macé£æ ¼)
â”‚   â”œâ”€â”€ createButton() â†’ MacButton
â”‚   â”œâ”€â”€ createDialog() â†’ MacDialog
â”‚   â””â”€â”€ createMenu() â†’ MacMenu
â””â”€â”€ LinuxUIFactory (Linuxé£æ ¼)
    â”œâ”€â”€ createButton() â†’ LinuxButton
    â”œâ”€â”€ createDialog() â†’ LinuxDialog
    â””â”€â”€ createMenu() â†’ LinuxMenu
```

**ğŸ’» ä»£ç å®ç°**
```java
// æŠ½è±¡å·¥å‚æ¥å£
interface UIFactory {
    Button createButton();
    Dialog createDialog();
    Menu createMenu();
}

// Windowså·¥å‚å®ç°
class WindowsUIFactory implements UIFactory {
    @Override
    public Button createButton() {
        return new WindowsButton();
    }
    
    @Override
    public Dialog createDialog() {
        return new WindowsDialog();
    }
    
    @Override
    public Menu createMenu() {
        return new WindowsMenu();
    }
}

// ä½¿ç”¨ç¤ºä¾‹
class Application {
    private UIFactory uiFactory;
    private Button button;
    private Dialog dialog;
    
    public Application(UIFactory factory) {
        this.uiFactory = factory;
        this.button = factory.createButton();
        this.dialog = factory.createDialog();
    }
}

// åˆ›å»ºWindowsé£æ ¼çš„åº”ç”¨
UIFactory windowsFactory = new WindowsUIFactory();
Application app = new Application(windowsFactory);
```

### 2.3 äº§å“æ³¨å†Œæœºåˆ¶


**ğŸ¯ åŠ¨æ€äº§å“æ³¨å†Œ**
```java
class ProductRegistry {
    // å­˜å‚¨äº§å“ç±»å‹å’Œå¯¹åº”çš„åˆ›å»ºå™¨
    private Map<String, Supplier<Product>> productCreators = new HashMap<>();
    
    // æ³¨å†Œäº§å“åˆ›å»ºå™¨
    public void registerProduct(String type, Supplier<Product> creator) {
        productCreators.put(type, creator);
    }
    
    // åˆ›å»ºäº§å“
    public Product createProduct(String type) {
        Supplier<Product> creator = productCreators.get(type);
        if (creator == null) {
            throw new IllegalArgumentException("æœªæ³¨å†Œçš„äº§å“ç±»å‹: " + type);
        }
        return creator.get();
    }
}

// å·¥å‚ç±»ä½¿ç”¨æ³¨å†Œæœºåˆ¶
class MultiProductFactory {
    private ProductRegistry registry = new ProductRegistry();
    
    public MultiProductFactory() {
        // æ³¨å†Œå„ç§äº§å“
        registry.registerProduct("database", MySQLDatabase::new);
        registry.registerProduct("cache", RedisCache::new);
        registry.registerProduct("queue", RabbitMQQueue::new);
    }
    
    public Product create(String type) {
        return registry.createProduct(type);
    }
}
```

---

## 3. ğŸ’¾ å·¥å‚ç¼“å­˜æœºåˆ¶


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜


**ğŸ’¡ é—®é¢˜åˆ†æ**ï¼šæœ‰äº›å¯¹è±¡åˆ›å»ºæˆæœ¬å¾ˆé«˜ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œå®¢æˆ·ç«¯ç­‰ã€‚

> **âš ï¸ æ€§èƒ½é—®é¢˜**  
> æ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡ â†’ æµªè´¹å†…å­˜ + åˆ›å»ºæ—¶é—´é•¿ + èµ„æºæ¶ˆè€—å¤§

**ğŸ¯ ç¼“å­˜çš„å¥½å¤„**
- **æå‡æ€§èƒ½**ï¼šé¿å…é‡å¤åˆ›å»ºç›¸åŒå¯¹è±¡
- **èŠ‚çœå†…å­˜**ï¼šå¤ç”¨å·²åˆ›å»ºçš„å¯¹è±¡  
- **èµ„æºç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ

### 3.2 ç®€å•ç¼“å­˜å®ç°


**ğŸ“¦ åŸºç¡€ç¼“å­˜å·¥å‚**
```java
class CachedDatabaseFactory {
    // ç¼“å­˜å®¹å™¨
    private static Map<String, Database> cache = new HashMap<>();
    
    public static Database getDatabase(String type) {
        // å…ˆæ£€æŸ¥ç¼“å­˜
        Database db = cache.get(type);
        if (db == null) {
            // ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ›å»ºæ–°çš„
            db = createNewDatabase(type);
            // æ”¾å…¥ç¼“å­˜
            cache.put(type, db);
        }
        return db;
    }
    
    private static Database createNewDatabase(String type) {
        switch (type) {
            case "mysql":
                return new MySQLDatabase();
            case "postgresql":
                return new PostgreSQLDatabase();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„ç±»å‹");
        }
    }
}
```

### 3.3 é«˜çº§ç¼“å­˜ç­–ç•¥


**â° å¸¦è¿‡æœŸæ—¶é—´çš„ç¼“å­˜**
```java
class TimedCacheFactory {
    // ç¼“å­˜é¡¹åŒ…è£…ç±»
    static class CacheItem {
        private final Object product;
        private final long createTime;
        private final long expireTime;
        
        public CacheItem(Object product, long ttlMillis) {
            this.product = product;
            this.createTime = System.currentTimeMillis();
            this.expireTime = createTime + ttlMillis;
        }
        
        public boolean isExpired() {
            return System.currentTimeMillis() > expireTime;
        }
        
        public Object getProduct() {
            return product;
        }
    }
    
    private Map<String, CacheItem> cache = new ConcurrentHashMap<>();
    private final long defaultTTL = 30 * 60 * 1000; // 30åˆ†é’Ÿ
    
    public Database getDatabase(String type) {
        CacheItem item = cache.get(type);
        
        // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if (item != null && !item.isExpired()) {
            return (Database) item.getProduct();
        }
        
        // åˆ›å»ºæ–°å¯¹è±¡å¹¶ç¼“å­˜
        Database db = createNewDatabase(type);
        cache.put(type, new CacheItem(db, defaultTTL));
        return db;
    }
}
```

### 3.4 ç¼“å­˜åº”ç”¨åœºæ™¯


| åœºæ™¯ç±»å‹ | **ç¼“å­˜ç­–ç•¥** | **é€‚ç”¨æƒ…å†µ** | **æ³¨æ„äº‹é¡¹** |
|---------|------------|-------------|-------------|
| ğŸ”— **è¿æ¥æ± ** | `é•¿æœŸç¼“å­˜` | `æ•°æ®åº“ã€Redisè¿æ¥` | `æ³¨æ„è¿æ¥æœ‰æ•ˆæ€§æ£€æŸ¥` |
| ğŸ“„ **é…ç½®å¯¹è±¡** | `æ°¸ä¹…ç¼“å­˜` | `ä¸å˜çš„é…ç½®ä¿¡æ¯` | `é…ç½®æ›´æ–°æ—¶éœ€æ¸…ç†ç¼“å­˜` |
| ğŸ¨ **UIç»„ä»¶** | `ä¼šè¯çº§ç¼“å­˜` | `ç”¨æˆ·ç•Œé¢å…ƒç´ ` | `å†…å­˜å ç”¨æ§åˆ¶` |
| ğŸ“Š **è®¡ç®—ç»“æœ** | `TTLç¼“å­˜` | `è®¡ç®—å¯†é›†å‹å¯¹è±¡` | `è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´` |

---

## 4. âš¡ å¼‚æ­¥å·¥å‚å®ç°


### 4.1 å¼‚æ­¥å·¥å‚çš„å¿…è¦æ€§


**ğŸš€ ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥**ï¼šæœ‰äº›å¯¹è±¡åˆ›å»ºè¿‡ç¨‹å¾ˆæ…¢ï¼Œæ¯”å¦‚ç½‘ç»œè¿æ¥ã€æ–‡ä»¶åŠ è½½ç­‰ã€‚

```
åŒæ­¥åˆ›å»ºé—®é¢˜ï¼š
ç”¨æˆ·ç‚¹å‡» â†’ ç­‰å¾…3ç§’ â†’ å¯¹è±¡åˆ›å»ºå®Œæˆ â†’ ç•Œé¢å“åº”
(ç”¨æˆ·ä½“éªŒå·®)

å¼‚æ­¥åˆ›å»ºä¼˜åŠ¿ï¼š
ç”¨æˆ·ç‚¹å‡» â†’ ç«‹å³å“åº” â†’ åå°åˆ›å»º â†’ åˆ›å»ºå®Œæˆé€šçŸ¥
(ç”¨æˆ·ä½“éªŒå¥½)
```

**ğŸ¯ å¼‚æ­¥çš„å¥½å¤„**
- **ç”¨æˆ·ä½“éªŒ**ï¼šç•Œé¢ä¸å¡é¡¿ï¼Œå“åº”åŠæ—¶
- **ç³»ç»Ÿæ€§èƒ½**ï¼šå¯ä»¥å¹¶è¡Œåˆ›å»ºå¤šä¸ªå¯¹è±¡
- **èµ„æºåˆ©ç”¨**ï¼šå……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æº

### 4.2 CompletableFutureå®ç°


**ğŸ“± å¼‚æ­¥å·¥å‚åŸºç¡€ç‰ˆ**
```java
class AsyncDatabaseFactory {
    
    public CompletableFuture<Database> createDatabaseAsync(String type) {
        return CompletableFuture.supplyAsync(() -> {
            // æ¨¡æ‹Ÿè€—æ—¶çš„åˆ›å»ºè¿‡ç¨‹
            try {
                Thread.sleep(2000); // å‡è®¾éœ€è¦2ç§’åˆ›å»º
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            
            // å®é™…åˆ›å»ºæ•°æ®åº“å¯¹è±¡
            return createDatabase(type);
        });
    }
    
    private Database createDatabase(String type) {
        switch (type) {
            case "mysql":
                return new MySQLDatabase();
            case "postgresql":
                return new PostgreSQLDatabase();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„ç±»å‹");
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
AsyncDatabaseFactory factory = new AsyncDatabaseFactory();

// å‘èµ·å¼‚æ­¥åˆ›å»º
CompletableFuture<Database> future = factory.createDatabaseAsync("mysql");

// ç»§ç»­å…¶ä»–å·¥ä½œ...
System.out.println("ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡");

// éœ€è¦ä½¿ç”¨æ—¶è·å–ç»“æœ
Database db = future.get(); // å¦‚æœè¿˜æ²¡å®Œæˆä¼šç­‰å¾…
```

### 4.3 å›è°ƒæœºåˆ¶å®ç°


**ğŸ”” å¸¦å›è°ƒçš„å¼‚æ­¥å·¥å‚**
```java
class CallbackAsyncFactory {
    
    // å›è°ƒæ¥å£
    interface CreationCallback<T> {
        void onSuccess(T product);
        void onError(Exception error);
    }
    
    public void createDatabaseAsync(String type, CreationCallback<Database> callback) {
        CompletableFuture.supplyAsync(() -> {
            try {
                // æ¨¡æ‹Ÿåˆ›å»ºè¿‡ç¨‹
                Thread.sleep(1000);
                return createDatabase(type);
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        }).whenComplete((result, error) -> {
            if (error != null) {
                callback.onError(new RuntimeException(error));
            } else {
                callback.onSuccess(result);
            }
        });
    }
}

// ä½¿ç”¨ç¤ºä¾‹
CallbackAsyncFactory factory = new CallbackAsyncFactory();

factory.createDatabaseAsync("mysql", new CreationCallback<Database>() {
    @Override
    public void onSuccess(Database database) {
        System.out.println("æ•°æ®åº“åˆ›å»ºæˆåŠŸ: " + database);
        // ä½¿ç”¨æ•°æ®åº“...
    }
    
    @Override
    public void onError(Exception error) {
        System.err.println("æ•°æ®åº“åˆ›å»ºå¤±è´¥: " + error.getMessage());
        // é”™è¯¯å¤„ç†...
    }
});
```

### 4.4 å¼‚æ­¥å·¥å‚åº”ç”¨åœºæ™¯


**ğŸ® å®é™…åº”ç”¨ç¤ºä¾‹**
- **Webåº”ç”¨**ï¼šå¼‚æ­¥åŠ è½½ç”¨æˆ·é…ç½®ã€æƒé™ä¿¡æ¯
- **ç§»åŠ¨åº”ç”¨**ï¼šåå°é¢„åŠ è½½å›¾ç‰‡ã€æ•°æ®
- **æ¸¸æˆå¼€å‘**ï¼šå¼‚æ­¥åŠ è½½æ¸¸æˆèµ„æºã€åœºæ™¯
- **å¾®æœåŠ¡**ï¼šå¼‚æ­¥åˆå§‹åŒ–æœåŠ¡è¿æ¥

---

## 5. ğŸ”— å·¥å‚é“¾æ¨¡å¼


### 5.1 å·¥å‚é“¾çš„æ¦‚å¿µ


**ğŸ”„ ä»€ä¹ˆæ˜¯å·¥å‚é“¾**ï¼šå¤šä¸ªå·¥å‚æŒ‰ç…§é¡ºåºæ’åˆ—ï¼Œæ¯ä¸ªå·¥å‚å°è¯•åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœä¸èƒ½åˆ›å»ºå°±ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå·¥å‚ã€‚

```
å·¥å‚é“¾å¤„ç†æµç¨‹ï¼š
è¯·æ±‚ â†’ å·¥å‚A â†’ èƒ½å¤„ç†ï¼Ÿ
                â”œâ”€ æ˜¯ â†’ åˆ›å»ºå¯¹è±¡ â†’ è¿”å›
                â””â”€ å¦ â†’ ä¼ é€’ç»™å·¥å‚B
                        â””â”€ å·¥å‚B â†’ èƒ½å¤„ç†ï¼Ÿ
                                  â”œâ”€ æ˜¯ â†’ åˆ›å»ºå¯¹è±¡ â†’ è¿”å›
                                  â””â”€ å¦ â†’ ä¼ é€’ç»™å·¥å‚C...
```

**ğŸ¯ å·¥å‚é“¾çš„ä¼˜åŠ¿**
- **çµæ´»æ‰©å±•**ï¼šå¯ä»¥éšæ—¶æ·»åŠ æ–°çš„å·¥å‚
- **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªå·¥å‚åªè´Ÿè´£è‡ªå·±æ“…é•¿çš„äº§å“
- **ä¼˜å…ˆçº§æ§åˆ¶**ï¼šå¯ä»¥è®¾ç½®å·¥å‚çš„å¤„ç†é¡ºåº

### 5.2 è´£ä»»é“¾å·¥å‚å®ç°


**â›“ï¸ åŸºç¡€å·¥å‚é“¾**
```java
// æŠ½è±¡å·¥å‚å¤„ç†å™¨
abstract class FactoryHandler {
    private FactoryHandler nextHandler;
    
    public void setNext(FactoryHandler handler) {
        this.nextHandler = handler;
    }
    
    public Object createProduct(String type) {
        // å°è¯•è‡ªå·±å¤„ç†
        Object product = doCreate(type);
        
        if (product != null) {
            return product;
        }
        
        // è‡ªå·±ä¸èƒ½å¤„ç†ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ª
        if (nextHandler != null) {
            return nextHandler.createProduct(type);
        }
        
        // æ²¡æœ‰æ›´å¤šå¤„ç†å™¨äº†
        return null;
    }
    
    // å­ç±»å®ç°å…·ä½“åˆ›å»ºé€»è¾‘
    protected abstract Object doCreate(String type);
}

// å…·ä½“å·¥å‚å¤„ç†å™¨
class DatabaseFactoryHandler extends FactoryHandler {
    @Override
    protected Object doCreate(String type) {
        if (type.endsWith("Database")) {
            switch (type) {
                case "MySQLDatabase":
                    return new MySQLDatabase();
                case "PostgreSQLDatabase":
                    return new PostgreSQLDatabase();
            }
        }
        return null; // ä¸èƒ½å¤„ç†
    }
}

class CacheFactoryHandler extends FactoryHandler {
    @Override
    protected Object doCreate(String type) {
        if (type.endsWith("Cache")) {
            switch (type) {
                case "RedisCache":
                    return new RedisCache();
                case "MemoryCache":
                    return new MemoryCache();
            }
        }
        return null;
    }
}
```

### 5.3 å·¥å‚é“¾ç®¡ç†å™¨


**ğŸ›ï¸ é“¾å¼å·¥å‚ç®¡ç†**
```java
class FactoryChainManager {
    private FactoryHandler firstHandler;
    
    public FactoryChainManager() {
        // æ„å»ºå·¥å‚é“¾
        buildFactoryChain();
    }
    
    private void buildFactoryChain() {
        // åˆ›å»ºå„ä¸ªå·¥å‚å¤„ç†å™¨
        FactoryHandler databaseHandler = new DatabaseFactoryHandler();
        FactoryHandler cacheHandler = new CacheFactoryHandler();
        FactoryHandler queueHandler = new QueueFactoryHandler();
        
        // å»ºç«‹é“¾å¼å…³ç³»
        databaseHandler.setNext(cacheHandler);
        cacheHandler.setNext(queueHandler);
        
        // è®¾ç½®ç¬¬ä¸€ä¸ªå¤„ç†å™¨
        this.firstHandler = databaseHandler;
    }
    
    public Object createProduct(String type) {
        if (firstHandler != null) {
            return firstHandler.createProduct(type);
        }
        throw new IllegalArgumentException("æ²¡æœ‰å¯ç”¨çš„å·¥å‚å¤„ç†å™¨");
    }
    
    // åŠ¨æ€æ·»åŠ å·¥å‚åˆ°é“¾ä¸­
    public void addFactory(FactoryHandler handler) {
        if (firstHandler == null) {
            firstHandler = handler;
        } else {
            FactoryHandler current = firstHandler;
            while (current.nextHandler != null) {
                current = current.nextHandler;
            }
            current.setNext(handler);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
FactoryChainManager manager = new FactoryChainManager();

// åˆ›å»ºä¸åŒç±»å‹çš„äº§å“
Database db = (Database) manager.createProduct("MySQLDatabase");
Cache cache = (Cache) manager.createProduct("RedisCache");
Queue queue = (Queue) manager.createProduct("RabbitMQQueue");
```

### 5.4 å·¥å‚é“¾çš„åº”ç”¨åœºæ™¯


| åº”ç”¨åœºæ™¯ | **å·¥å‚é“¾ç»„æˆ** | **å¤„ç†é€»è¾‘** | **å®é™…ä¾‹å­** |
|---------|--------------|------------|-------------|
| ğŸ”Œ **æ’ä»¶ç³»ç»Ÿ** | `æ’ä»¶å·¥å‚A â†’ æ’ä»¶å·¥å‚B â†’ é»˜è®¤å·¥å‚` | `æŒ‰æ’ä»¶ä¼˜å…ˆçº§å¤„ç†` | `IDEæ’ä»¶ã€æµè§ˆå™¨æ‰©å±•` |
| ğŸ“„ **æ–‡ä»¶å¤„ç†** | `å›¾ç‰‡å·¥å‚ â†’ æ–‡æ¡£å·¥å‚ â†’ åª’ä½“å·¥å‚` | `æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©å¤„ç†å™¨` | `æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ` |
| ğŸ” **è®¤è¯ç³»ç»Ÿ** | `æœ¬åœ°è®¤è¯ â†’ LDAPè®¤è¯ â†’ ç¬¬ä¸‰æ–¹è®¤è¯` | `æŒ‰è®¤è¯æ–¹å¼ä¼˜å…ˆçº§` | `ä¼ä¸šå•ç‚¹ç™»å½•` |
| ğŸ¨ **æ¸²æŸ“å¼•æ“** | `GPUæ¸²æŸ“ â†’ CPUæ¸²æŸ“ â†’ è½¯ä»¶æ¸²æŸ“` | `æŒ‰æ€§èƒ½ä¼˜å…ˆçº§é™çº§` | `æ¸¸æˆå›¾å½¢å¼•æ“` |

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å‚æ•°åŒ–å·¥å‚ï¼šä¸€ä¸ªå·¥å‚æ–¹æ³•é€šè¿‡å‚æ•°åˆ›å»ºä¸åŒäº§å“
ğŸ”¸ å¤šäº§å“å·¥å‚ï¼šä¸€ä¸ªå·¥å‚è´Ÿè´£åˆ›å»ºä¸€æ•´å¥—ç›¸å…³äº§å“
ğŸ”¸ å·¥å‚ç¼“å­˜ï¼šç¼“å­˜å·²åˆ›å»ºçš„å¯¹è±¡ï¼Œæå‡æ€§èƒ½å’Œèµ„æºåˆ©ç”¨
ğŸ”¸ å¼‚æ­¥å·¥å‚ï¼šåå°åˆ›å»ºå¯¹è±¡ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
ğŸ”¸ å·¥å‚é“¾ï¼šå¤šä¸ªå·¥å‚ä¸²è”ï¼ŒæŒ‰ä¼˜å…ˆçº§å¤„ç†åˆ›å»ºè¯·æ±‚
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‰æ‹©åˆé€‚çš„æ‰©å±•æ–¹å¼**
```
æ•°æ®é‡å°ã€ç±»å‹å›ºå®š â†’ å‚æ•°åŒ–å·¥å‚
äº§å“æ—å¤æ‚ã€éœ€è¦ç»Ÿä¸€ç®¡ç† â†’ å¤šäº§å“å·¥å‚
åˆ›å»ºæˆæœ¬é«˜ã€éœ€è¦å¤ç”¨ â†’ å·¥å‚ç¼“å­˜
åˆ›å»ºè€—æ—¶é•¿ã€å½±å“ä½“éªŒ â†’ å¼‚æ­¥å·¥å‚
å¤šç§åˆ›å»ºæ–¹å¼ã€éœ€è¦çµæ´»æ‰©å±• â†’ å·¥å‚é“¾
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–è€ƒè™‘**
```
ç¼“å­˜ç­–ç•¥é€‰æ‹©ï¼š
- çŸ­æœŸä½¿ç”¨ â†’ TTLç¼“å­˜
- é•¿æœŸä½¿ç”¨ â†’ æ°¸ä¹…ç¼“å­˜
- å†…å­˜æ•æ„Ÿ â†’ LRUç¼“å­˜

å¼‚æ­¥åœºæ™¯åˆ¤æ–­ï¼š
- åˆ›å»ºæ—¶é—´ > 100ms â†’ è€ƒè™‘å¼‚æ­¥
- ç”¨æˆ·äº¤äº’é¢‘ç¹ â†’ å»ºè®®å¼‚æ­¥
- æ‰¹é‡åˆ›å»º â†’ å¼‚æ­¥å¹¶è¡Œå¤„ç†
```

**ğŸ”¹ æ‰©å±•æ€§è®¾è®¡åŸåˆ™**
```
å¼€é—­åŸåˆ™ï¼šæ–°å¢äº§å“ç±»å‹æ—¶ï¼Œåªæ‰©å±•ä¸ä¿®æ”¹
å•ä¸€èŒè´£ï¼šæ¯ä¸ªå·¥å‚åªè´Ÿè´£ç‰¹å®šç±»å‹çš„äº§å“
ä¾èµ–å€’ç½®ï¼šä¾èµ–æŠ½è±¡æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
```

### 6.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**
- **å‚æ•°åŒ–å·¥å‚**ï¼šé€‚åˆäº§å“ç±»å‹ç›¸å¯¹å›ºå®šçš„åœºæ™¯
- **å¤šäº§å“å·¥å‚**ï¼šç”¨äºç®¡ç†äº§å“æ—ï¼Œä¿è¯äº§å“ä¸€è‡´æ€§
- **å·¥å‚ç¼“å­˜**ï¼šé‡ç‚¹å…³æ³¨ç¼“å­˜å¤±æ•ˆå’Œå†…å­˜ç®¡ç†
- **å¼‚æ­¥å·¥å‚**ï¼šæ³¨æ„é”™è¯¯å¤„ç†å’Œè¶…æ—¶æ§åˆ¶
- **å·¥å‚é“¾**ï¼šåˆç†è®¾è®¡å¤„ç†é¡ºåºï¼Œé¿å…è¿‡é•¿é“¾æ¡

**âš ï¸ å¸¸è§é™·é˜±é¿å…**
- ä¸è¦è¿‡åº¦ä½¿ç”¨ç¼“å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼
- å¼‚æ­¥å·¥å‚è¦å¤„ç†å¥½å¼‚å¸¸ä¼ æ’­
- å·¥å‚é“¾ä¸è¦è®¾è®¡å¾—è¿‡äºå¤æ‚
- å‚æ•°åŒ–å·¥å‚è¦åšå¥½å‚æ•°æ ¡éªŒ

**ğŸ¯ é¡¹ç›®ä¸­çš„é€‰æ‹©ç­–ç•¥**
1. **å°å‹é¡¹ç›®**ï¼šå‚æ•°åŒ–å·¥å‚è¶³å¤Ÿ
2. **ä¸­å‹é¡¹ç›®**ï¼šå¤šäº§å“å·¥å‚ + é€‚åº¦ç¼“å­˜
3. **å¤§å‹é¡¹ç›®**ï¼šå·¥å‚é“¾ + å¼‚æ­¥å·¥å‚ + æ™ºèƒ½ç¼“å­˜
4. **é«˜æ€§èƒ½è¦æ±‚**ï¼šé‡ç‚¹ä½¿ç”¨ç¼“å­˜å’Œå¼‚æ­¥æœºåˆ¶

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- å‚æ•°åŒ–ç®€åŒ–åˆ›å»ºï¼Œå¤šäº§å“ç®¡ç†æˆå¥—
- ç¼“å­˜æœºåˆ¶ææ€§èƒ½ï¼Œå¼‚æ­¥å¤„ç†ä½“éªŒå¥½
- å·¥å‚é“¾æ¡çµæ´»æ‰©ï¼Œæ¨¡å¼ç»„åˆæ•ˆæœä½³