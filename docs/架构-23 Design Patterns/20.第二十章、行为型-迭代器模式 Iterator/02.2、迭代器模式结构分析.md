---
title: 2ã€è¿­ä»£å™¨æ¨¡å¼ç»“æ„åˆ†æ
---
## ğŸ“š ç›®å½•

1. [è¿­ä»£å™¨æ¨¡å¼æ•´ä½“ç»“æ„](#1-è¿­ä»£å™¨æ¨¡å¼æ•´ä½“ç»“æ„)
2. [æŠ½è±¡è¿­ä»£å™¨æ¥å£](#2-æŠ½è±¡è¿­ä»£å™¨æ¥å£)
3. [å…·ä½“è¿­ä»£å™¨å®ç°](#3-å…·ä½“è¿­ä»£å™¨å®ç°)
4. [æŠ½è±¡å®¹å™¨æ¥å£](#4-æŠ½è±¡å®¹å™¨æ¥å£)
5. [å…·ä½“å®¹å™¨å®ç°](#5-å…·ä½“å®¹å™¨å®ç°)
6. [è¿­ä»£è¿‡ç¨‹æ§åˆ¶](#6-è¿­ä»£è¿‡ç¨‹æ§åˆ¶)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ è¿­ä»£å™¨æ¨¡å¼æ•´ä½“ç»“æ„


### 1.1 ä»€ä¹ˆæ˜¯è¿­ä»£å™¨æ¨¡å¼


**ğŸ”¸ é€šä¿—ç†è§£**
æƒ³è±¡ä½ åœ¨çœ‹ä¸€æœ¬ä¹¦ï¼Œä½ éœ€è¦ä¸€é¡µä¸€é¡µåœ°ç¿»é˜…ã€‚è¿­ä»£å™¨æ¨¡å¼å°±åƒæ˜¯ä¸€ä¸ª**ä¹¦ç­¾**ï¼Œå®ƒå¸®ä½ è®°ä½å½“å‰çœ‹åˆ°å“ªä¸€é¡µäº†ï¼Œè¿˜èƒ½å¸®ä½ ç¿»åˆ°ä¸‹ä¸€é¡µï¼Œè€Œä¸”ä¸ç®¡è¿™æœ¬ä¹¦æ˜¯å°è¯´ã€æ•™ç§‘ä¹¦è¿˜æ˜¯æ¼«ç”»ä¹¦ï¼Œè¿™ä¸ªä¹¦ç­¾çš„ä½¿ç”¨æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ã€‚

> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**
> 
> è¿­ä»£å™¨æ¨¡å¼ï¼šæä¾›ä¸€ç§æ–¹æ³•æ¥**é¡ºåºè®¿é—®**é›†åˆä¸­çš„å…ƒç´ ï¼Œè€Œä¸éœ€è¦æš´éœ²é›†åˆçš„å†…éƒ¨ç»“æ„ã€‚
> 
> ç®€å•è¯´å°±æ˜¯ï¼šç»™ä½ ä¸€ä¸ªç»Ÿä¸€çš„æ–¹å¼æ¥éå†ä¸åŒç±»å‹çš„é›†åˆã€‚

### 1.2 æ¨¡å¼ç»“æ„ç»„æˆ


**ğŸ—ï¸ å››å¤§æ ¸å¿ƒè§’è‰²**

```
è¿­ä»£å™¨æ¨¡å¼ç»“æ„å›¾ï¼š

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æŠ½è±¡è¿­ä»£å™¨      â”‚         â”‚   æŠ½è±¡å®¹å™¨       â”‚
    â”‚  Iterator       â”‚         â”‚  Container      â”‚
    â”‚                â”‚         â”‚                â”‚
    â”‚ + hasNext()    â”‚         â”‚ + getIterator() â”‚
    â”‚ + next()       â”‚         â”‚                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–³                           â–³
             â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å…·ä½“è¿­ä»£å™¨      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚   å…·ä½“å®¹å™¨       â”‚
    â”‚ ConcreteIteratorâ”‚         â”‚ ConcreteContainerâ”‚
    â”‚                â”‚         â”‚                â”‚
    â”‚ + hasNext()    â”‚         â”‚ + getIterator() â”‚
    â”‚ + next()       â”‚         â”‚ + add()        â”‚
    â”‚ - position     â”‚         â”‚ - items[]      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ è§’è‰²è¯´æ˜**
- **æŠ½è±¡è¿­ä»£å™¨**ï¼šå®šä¹‰è®¿é—®å…ƒç´ çš„æ ‡å‡†æ–¹æ³•
- **å…·ä½“è¿­ä»£å™¨**ï¼šå®ç°å…·ä½“çš„éå†é€»è¾‘  
- **æŠ½è±¡å®¹å™¨**ï¼šå®šä¹‰åˆ›å»ºè¿­ä»£å™¨çš„æ¥å£
- **å…·ä½“å®¹å™¨**ï¼šå­˜å‚¨æ•°æ®å¹¶åˆ›å»ºå¯¹åº”çš„è¿­ä»£å™¨

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§ç»“æ„


**âŒ æ²¡æœ‰è¿­ä»£å™¨æ¨¡å¼çš„é—®é¢˜**
```java
// éå†æ•°ç»„
for(int i = 0; i < array.length; i++) {
    process(array[i]);
}

// éå†é“¾è¡¨
Node current = list.head;
while(current != null) {
    process(current.data);
    current = current.next;
}

// éå†æ ‘ - å®Œå…¨ä¸åŒçš„æ–¹å¼
traverseTree(tree.root);
```

**âœ… ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼å**
```java
// ç»Ÿä¸€çš„éå†æ–¹å¼
Iterator<String> iterator = container.getIterator();
while(iterator.hasNext()) {
    process(iterator.next());
}
```

---

## 2. ğŸ”§ æŠ½è±¡è¿­ä»£å™¨æ¥å£


### 2.1 æ¥å£è®¾è®¡åŸç†


**ğŸ¯ è®¾è®¡ç›®çš„**
æŠ½è±¡è¿­ä»£å™¨å°±åƒæ˜¯å®šåˆ¶äº†ä¸€ä¸ª**é€šç”¨é¥æ§å™¨**çš„æ ‡å‡†ï¼Œä¸ç®¡ä½ ç”¨ä»€ä¹ˆå“ç‰Œçš„ç”µè§†ï¼Œè¿™ä¸ªé¥æ§å™¨çš„åŸºæœ¬æŒ‰é’®ï¼ˆå¼€å…³ã€æ¢å°ã€éŸ³é‡ï¼‰éƒ½æ˜¯ä¸€æ ·çš„ã€‚

> ğŸ’¡ **æ ¸å¿ƒæ€æƒ³**
> 
> å®šä¹‰ä¸€å¥—**æ ‡å‡†çš„è®¿é—®æ–¹æ³•**ï¼Œè®©æ‰€æœ‰ç±»å‹çš„é›†åˆéƒ½èƒ½ç”¨åŒæ ·çš„æ–¹å¼æ¥éå†ã€‚

### 2.2 åŸºæœ¬æ¥å£å®šä¹‰


```java
/**
 * æŠ½è±¡è¿­ä»£å™¨æ¥å£
 * å®šä¹‰äº†éå†é›†åˆçš„æ ‡å‡†æ–¹æ³•
 */
public interface Iterator<T> {
    
    /**
     * æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ 
     * @return trueè¡¨ç¤ºè¿˜æœ‰å…ƒç´ ï¼Œfalseè¡¨ç¤ºå·²ç»åˆ°æœ«å°¾
     */
    boolean hasNext();
    
    /**
     * è·å–ä¸‹ä¸€ä¸ªå…ƒç´ å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€ä½ç½®
     * @return å½“å‰ä½ç½®çš„å…ƒç´ 
     */
    T next();
    
    /**
     * ç§»é™¤å½“å‰å…ƒç´ ï¼ˆå¯é€‰æ“ä½œï¼‰
     * @throws UnsupportedOperationException å¦‚æœä¸æ”¯æŒåˆ é™¤
     */
    default void remove() {
        throw new UnsupportedOperationException("remove");
    }
}
```

### 2.3 æ¥å£æ–¹æ³•è¯¦è§£


**ğŸ”¸ hasNext() æ–¹æ³•**
```
ä½œç”¨ï¼šå°±åƒæ˜¯é—®"è¿˜æœ‰ä¸‹ä¸€é¡µå—ï¼Ÿ"
è¿”å›ï¼šbooleanç±»å‹
- trueï¼šè¿˜æœ‰å…ƒç´ å¯ä»¥è®¿é—®
- falseï¼šå·²ç»åˆ°äº†é›†åˆæœ«å°¾

ä½¿ç”¨åœºæ™¯ï¼šåœ¨å¾ªç¯ä¸­ä½œä¸ºç»§ç»­æ¡ä»¶
```

**ğŸ”¸ next() æ–¹æ³•**
```
ä½œç”¨ï¼šè·å–å½“å‰å…ƒç´ å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®
è¿”å›ï¼šé›†åˆä¸­çš„å…ƒç´ 
æ³¨æ„ï¼šè°ƒç”¨å‰åº”è¯¥å…ˆæ£€æŸ¥hasNext()

ç±»æ¯”ï¼šç¿»ä¹¦æ—¶ï¼Œçœ‹å½“å‰é¡µå†…å®¹ç„¶åç¿»åˆ°ä¸‹ä¸€é¡µ
```

**ğŸ”¸ remove() æ–¹æ³•**
```
ä½œç”¨ï¼šåˆ é™¤å½“å‰è®¿é—®çš„å…ƒç´ 
ç‰¹ç‚¹ï¼šå¯é€‰å®ç°ï¼ˆç”¨defaultæ–¹æ³•ï¼‰
é™åˆ¶ï¼šåªèƒ½åˆ é™¤åˆšåˆšnext()è¿”å›çš„å…ƒç´ 

ä¸ºä»€ä¹ˆæ˜¯å¯é€‰çš„ï¼Ÿ
æŸäº›é›†åˆå¯èƒ½ä¸å…è®¸åœ¨éå†æ—¶ä¿®æ”¹
```

### 2.4 æ¥å£è®¾è®¡ä¼˜åŠ¿


| ä¼˜åŠ¿ | **è¯´æ˜** | **ä¸¾ä¾‹** |
|------|---------|---------|
| ğŸ¯ **ç»Ÿä¸€æ€§** | `æ‰€æœ‰é›†åˆç”¨ç›¸åŒæ–¹å¼éå†` | `æ•°ç»„ã€é“¾è¡¨ã€æ ‘éƒ½ç”¨hasNext()/next()` |
| ğŸ”’ **å°è£…æ€§** | `éšè—é›†åˆå†…éƒ¨ç»“æ„` | `ä¸ç”¨çŸ¥é“æ˜¯æ•°ç»„è¿˜æ˜¯é“¾è¡¨å®ç°` |
| ğŸ”„ **å¯æ‰©å±•** | `å®¹æ˜“æ·»åŠ æ–°çš„é›†åˆç±»å‹` | `æ–°é›†åˆåªéœ€å®ç°Iteratoræ¥å£` |
| ğŸ›¡ï¸ **å®‰å…¨æ€§** | `é˜²æ­¢å¤–éƒ¨ç›´æ¥ä¿®æ”¹é›†åˆ` | `é€šè¿‡è¿­ä»£å™¨æ§åˆ¶è®¿é—®æƒé™` |

---

## 3. âš™ï¸ å…·ä½“è¿­ä»£å™¨å®ç°


### 3.1 å®ç°åŸç†è§£æ


**ğŸ”¸ æ ¸å¿ƒèŒè´£**
å…·ä½“è¿­ä»£å™¨å°±åƒä¸€ä¸ª**æ™ºèƒ½ä¹¦ç­¾**ï¼Œå®ƒä¸ä»…çŸ¥é“å½“å‰è¯»åˆ°å“ªé‡Œäº†ï¼Œè¿˜çŸ¥é“è¿™æœ¬ä¹¦çš„ç»“æ„ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°æ‰¾åˆ°ä¸‹ä¸€é¡µåœ¨å“ªé‡Œã€‚

> ğŸ’¡ **å®ç°è¦ç‚¹**
> 
> 1. **è®°å½•å½“å‰ä½ç½®**ï¼šçŸ¥é“ç°åœ¨è®¿é—®åˆ°å“ªä¸ªå…ƒç´ äº†
> 2. **äº†è§£å®¹å™¨ç»“æ„**ï¼šçŸ¥é“æ€ä¹ˆæ‰¾åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ 
> 3. **æä¾›è®¿é—®æ–¹æ³•**ï¼šå®ç°hasNext()å’Œnext()çš„å…·ä½“é€»è¾‘

### 3.2 æ•°ç»„è¿­ä»£å™¨å®ç°


```java
/**
 * æ•°ç»„çš„å…·ä½“è¿­ä»£å™¨å®ç°
 * ä¸“é—¨ç”¨æ¥éå†æ•°ç»„ç±»å‹çš„é›†åˆ
 */
public class ArrayIterator<T> implements Iterator<T> {
    private T[] array;        // è¦éå†çš„æ•°ç»„
    private int position;     // å½“å‰ä½ç½®ç´¢å¼•
    
    public ArrayIterator(T[] array) {
        this.array = array;
        this.position = 0;    // ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹
    }
    
    @Override
    public boolean hasNext() {
        // æ£€æŸ¥å½“å‰ä½ç½®æ˜¯å¦è¶…å‡ºæ•°ç»„èŒƒå›´
        return position < array.length;
    }
    
    @Override
    public T next() {
        if (!hasNext()) {
            throw new NoSuchElementException("æ²¡æœ‰æ›´å¤šå…ƒç´ äº†");
        }
        // è¿”å›å½“å‰å…ƒç´ ï¼Œç„¶åä½ç½®+1
        return array[position++];
    }
}
```

### 3.3 é“¾è¡¨è¿­ä»£å™¨å®ç°


```java
/**
 * é“¾è¡¨çš„å…·ä½“è¿­ä»£å™¨å®ç°
 */
public class LinkedListIterator<T> implements Iterator<T> {
    private Node<T> current;  // å½“å‰èŠ‚ç‚¹æŒ‡é’ˆ
    
    public LinkedListIterator(Node<T> head) {
        this.current = head;  // ä»å¤´èŠ‚ç‚¹å¼€å§‹
    }
    
    @Override
    public boolean hasNext() {
        // æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º
        return current != null;
    }
    
    @Override
    public T next() {
        if (!hasNext()) {
            throw new NoSuchElementException("æ²¡æœ‰æ›´å¤šå…ƒç´ äº†");
        }
        T data = current.data;   // è·å–å½“å‰èŠ‚ç‚¹æ•°æ®
        current = current.next;  // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        return data;
    }
}
```

### 3.4 å®ç°å¯¹æ¯”åˆ†æ


| é›†åˆç±»å‹ | **ä½ç½®è®°å½•æ–¹å¼** | **ä¸‹ä¸€å…ƒç´ æŸ¥æ‰¾** | **è¾¹ç•Œæ£€æŸ¥** |
|---------|---------------|---------------|-------------|
| ğŸ”¢ **æ•°ç»„** | `int position` | `position++` | `position < array.length` |
| ğŸ”— **é“¾è¡¨** | `Node current` | `current = current.next` | `current != null` |
| ğŸŒ³ **æ ‘** | `Stack<Node> stack` | `æ ˆæ“ä½œ` | `!stack.isEmpty()` |

**ğŸ”¸ å…³é”®ç†è§£**
- ä¸åŒçš„æ•°æ®ç»“æ„éœ€è¦ä¸åŒçš„éå†ç­–ç•¥
- ä½†å¯¹å¤–æä¾›çš„æ¥å£æ˜¯å®Œå…¨ä¸€æ ·çš„
- è¿™å°±æ˜¯**ç»Ÿä¸€æ¥å£ï¼Œä¸åŒå®ç°**çš„ä½“ç°

---

## 4. ğŸ“¦ æŠ½è±¡å®¹å™¨æ¥å£


### 4.1 å®¹å™¨æ¥å£è®¾è®¡


**ğŸ¯ è®¾è®¡ç›®çš„**
æŠ½è±¡å®¹å™¨å°±åƒæ˜¯**å·¥å‚çš„æ ‡å‡†**ï¼Œè§„å®šäº†æ¯ä¸ªå·¥å‚éƒ½å¿…é¡»èƒ½ç”Ÿäº§å‡ºå¯¹åº”çš„äº§å“ï¼ˆè¿­ä»£å™¨ï¼‰ã€‚ä¸ç®¡æ˜¯ç”Ÿäº§æ±½è½¦çš„å·¥å‚è¿˜æ˜¯ç”Ÿäº§æ‰‹æœºçš„å·¥å‚ï¼Œéƒ½å¿…é¡»æœ‰ç”Ÿäº§çº¿ã€‚

> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**
> 
> æŠ½è±¡å®¹å™¨å®šä¹‰äº†**åˆ›å»ºè¿­ä»£å™¨çš„æ ‡å‡†æ–¹æ³•**ï¼Œç¡®ä¿æ¯ä¸ªé›†åˆéƒ½èƒ½æä¾›éå†è‡ªå·±çš„æ–¹å¼ã€‚

### 4.2 åŸºæœ¬æ¥å£å®šä¹‰


```java
/**
 * æŠ½è±¡å®¹å™¨æ¥å£
 * å®šä¹‰äº†é›†åˆå¿…é¡»æä¾›çš„åŸºæœ¬èƒ½åŠ›
 */
public interface Container<T> {
    
    /**
     * åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å™¨
     * @return ç”¨äºéå†è¯¥å®¹å™¨çš„è¿­ä»£å™¨
     */
    Iterator<T> getIterator();
    
    /**
     * è·å–å®¹å™¨ä¸­å…ƒç´ çš„æ•°é‡
     * @return å…ƒç´ ä¸ªæ•°
     */
    int size();
    
    /**
     * æ£€æŸ¥å®¹å™¨æ˜¯å¦ä¸ºç©º
     * @return trueè¡¨ç¤ºæ²¡æœ‰å…ƒç´ ï¼Œfalseè¡¨ç¤ºæœ‰å…ƒç´ 
     */
    boolean isEmpty();
}
```

### 4.3 æ¥å£æ–¹æ³•è¯´æ˜


**ğŸ”¸ getIterator() æ–¹æ³•**
```
ä½œç”¨ï¼šè¿™æ˜¯æœ€é‡è¦çš„æ–¹æ³•ï¼Œè´Ÿè´£åˆ›å»ºè¿­ä»£å™¨
è¿”å›ï¼šä¸€ä¸ªèƒ½éå†å½“å‰å®¹å™¨çš„è¿­ä»£å™¨å¯¹è±¡
èŒè´£ï¼šåƒæ˜¯ç»™æ¯æœ¬ä¹¦é…ä¸€ä¸ªä¸“ç”¨ä¹¦ç­¾

ä¸ºä»€ä¹ˆè¦å®¹å™¨è‡ªå·±åˆ›å»ºè¿­ä»£å™¨ï¼Ÿ
å› ä¸ºå®¹å™¨æœ€äº†è§£è‡ªå·±çš„å†…éƒ¨ç»“æ„
çŸ¥é“åº”è¯¥ç”¨ä»€ä¹ˆæ–¹å¼æ¥éå†
```

**ğŸ”¸ size() å’Œ isEmpty() æ–¹æ³•**
```
size()ï¼šè¿”å›å®¹å™¨ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ 
isEmpty()ï¼šæ£€æŸ¥å®¹å™¨æ˜¯å¦ä¸ºç©º

è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼š
1. è®©ç”¨æˆ·äº†è§£å®¹å™¨çš„åŸºæœ¬çŠ¶æ€
2. å¸®åŠ©è¿­ä»£å™¨å®ç°è¾¹ç•Œæ£€æŸ¥
3. æä¾›å®¹å™¨çš„åŸºæœ¬ä¿¡æ¯
```

### 4.4 æ¥å£è®¾è®¡åŸåˆ™


**ğŸ¯ å•ä¸€èŒè´£åŸåˆ™**
```
æŠ½è±¡å®¹å™¨åªå…³å¿ƒä¸¤ä»¶äº‹ï¼š
1. å­˜å‚¨å…ƒç´ ï¼ˆå…·ä½“å¦‚ä½•å­˜å‚¨ç”±å­ç±»å†³å®šï¼‰
2. æä¾›éå†æ–¹å¼ï¼ˆåˆ›å»ºè¿­ä»£å™¨ï¼‰

ä¸å…³å¿ƒï¼š
- å…·ä½“çš„å­˜å‚¨å®ç°
- å…·ä½“çš„éå†ç®—æ³•
- å…ƒç´ çš„ä¸šåŠ¡é€»è¾‘
```

**ğŸ”’ ä¾èµ–å€’ç½®åŸåˆ™**
```
é«˜å±‚æ¨¡å—ï¼ˆä½¿ç”¨æ–¹ï¼‰ä¾èµ–æŠ½è±¡æ¥å£
ä½å±‚æ¨¡å—ï¼ˆå…·ä½“å®ç°ï¼‰ä¹Ÿä¾èµ–æŠ½è±¡æ¥å£

å¥½å¤„ï¼š
- å¯ä»¥éšæ—¶æ›´æ¢ä¸åŒçš„å®¹å™¨å®ç°
- æ–°å¢å®¹å™¨ç±»å‹ä¸å½±å“ä½¿ç”¨æ–¹ä»£ç 
```

---

## 5. ğŸ—ƒï¸ å…·ä½“å®¹å™¨å®ç°


### 5.1 æ•°ç»„å®¹å™¨å®ç°


**ğŸ”¸ å®ç°æ€è·¯**
æ•°ç»„å®¹å™¨å°±åƒä¸€ä¸ª**ä¹¦æ¶**ï¼Œä¹¦æŒ‰é¡ºåºæ’åˆ—ï¼Œæ¯æœ¬ä¹¦éƒ½æœ‰å›ºå®šçš„ä½ç½®ç¼–å·ã€‚è¦éå†è¿™ä¸ªä¹¦æ¶ï¼Œå°±ç»™å®ƒé…ä¸€ä¸ªçŸ¥é“å¦‚ä½•æŒ‰é¡ºåºå–ä¹¦çš„åŠ©æ‰‹ï¼ˆè¿­ä»£å™¨ï¼‰ã€‚

```java
/**
 * åŸºäºæ•°ç»„çš„å…·ä½“å®¹å™¨å®ç°
 */
public class ArrayContainer<T> implements Container<T> {
    private T[] elements;     // å­˜å‚¨å…ƒç´ çš„æ•°ç»„
    private int size;         // å½“å‰å…ƒç´ æ•°é‡
    private int capacity;     // æ•°ç»„æ€»å®¹é‡
    
    @SuppressWarnings("unchecked")
    public ArrayContainer(int capacity) {
        this.capacity = capacity;
        this.elements = (T[]) new Object[capacity];
        this.size = 0;
    }
    
    /**
     * æ·»åŠ å…ƒç´ åˆ°å®¹å™¨
     */
    public void add(T element) {
        if (size >= capacity) {
            throw new IllegalStateException("å®¹å™¨å·²æ»¡");
        }
        elements[size++] = element;
    }
    
    @Override
    public Iterator<T> getIterator() {
        // åˆ›å»ºä¸“é—¨éå†è¿™ä¸ªæ•°ç»„çš„è¿­ä»£å™¨
        return new ArrayIterator<>(elements, size);
    }
    
    @Override
    public int size() {
        return size;
    }
    
    @Override
    public boolean isEmpty() {
        return size == 0;
    }
}
```

### 5.2 é“¾è¡¨å®¹å™¨å®ç°


**ğŸ”¸ å®ç°æ€è·¯** 
é“¾è¡¨å®¹å™¨åƒæ˜¯ä¸€ä¸²**ç³–è‘«èŠ¦**ï¼Œæ¯é¢—å±±æ¥‚éƒ½ç”¨ç«¹ç­¾ä¸²èµ·æ¥ã€‚è¦éå†è¿™ä¸²ç³–è‘«èŠ¦ï¼Œå°±è¦ä»ç¬¬ä¸€é¢—å¼€å§‹ï¼Œé¡ºç€ç«¹ç­¾ä¸€é¢—ä¸€é¢—åœ°çœ‹è¿‡å»ã€‚

```java
/**
 * åŸºäºé“¾è¡¨çš„å…·ä½“å®¹å™¨å®ç°
 */
public class LinkedListContainer<T> implements Container<T> {
    private Node<T> head;     // é“¾è¡¨å¤´èŠ‚ç‚¹
    private int size;         // å…ƒç´ æ•°é‡
    
    public LinkedListContainer() {
        this.head = null;
        this.size = 0;
    }
    
    /**
     * æ·»åŠ å…ƒç´ åˆ°é“¾è¡¨å¤´éƒ¨
     */
    public void add(T element) {
        Node<T> newNode = new Node<>(element);
        newNode.next = head;
        head = newNode;
        size++;
    }
    
    @Override
    public Iterator<T> getIterator() {
        // åˆ›å»ºä¸“é—¨éå†è¿™ä¸ªé“¾è¡¨çš„è¿­ä»£å™¨
        return new LinkedListIterator<>(head);
    }
    
    @Override
    public int size() {
        return size;
    }
    
    @Override
    public boolean isEmpty() {
        return head == null;
    }
    
    /**
     * é“¾è¡¨èŠ‚ç‚¹å†…éƒ¨ç±»
     */
    private static class Node<T> {
        T data;
        Node<T> next;
        
        Node(T data) {
            this.data = data;
            this.next = null;
        }
    }
}
```

### 5.3 ä¸åŒå®¹å™¨å¯¹æ¯”


| å®¹å™¨ç±»å‹ | **å­˜å‚¨æ–¹å¼** | **è¿­ä»£å™¨ç±»å‹** | **é€‚ç”¨åœºæ™¯** | **æ€§èƒ½ç‰¹ç‚¹** |
|---------|-------------|--------------|-------------|-------------|
| ğŸ”¢ **æ•°ç»„å®¹å™¨** | `è¿ç»­å†…å­˜ç©ºé—´` | `ArrayIterator` | `éšæœºè®¿é—®é¢‘ç¹` | `ç´¢å¼•è®¿é—®O(1)` |
| ğŸ”— **é“¾è¡¨å®¹å™¨** | `èŠ‚ç‚¹é“¾æ¥` | `LinkedListIterator` | `é¢‘ç¹æ’å…¥åˆ é™¤` | `éå†è®¿é—®O(n)` |
| ğŸŒ³ **æ ‘å®¹å™¨** | `å±‚æ¬¡ç»“æ„` | `TreeIterator` | `å±‚æ¬¡æ•°æ®` | `æŸ¥æ‰¾O(log n)` |

**ğŸ”¸ è®¾è®¡è¦ç‚¹**
```
æ¯ç§å®¹å™¨éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼š
1. å­˜å‚¨ç»“æ„ä¸åŒï¼ˆæ•°ç»„ vs é“¾è¡¨ vs æ ‘ï¼‰
2. è®¿é—®æ–¹å¼ä¸åŒï¼ˆç´¢å¼• vs æŒ‡é’ˆ vs é€’å½’ï¼‰
3. æ€§èƒ½ç‰¹æ€§ä¸åŒï¼ˆæ—¶é—´å¤æ‚åº¦å·®å¼‚ï¼‰

ä½†æ˜¯å¯¹å¤–æ¥å£å®Œå…¨ä¸€è‡´ï¼š
- éƒ½å®ç°Containeræ¥å£
- éƒ½æä¾›getIterator()æ–¹æ³•
- ä½¿ç”¨æ–¹å¼å®Œå…¨ç›¸åŒ
```

---

## 6. ğŸ® è¿­ä»£è¿‡ç¨‹æ§åˆ¶


### 6.1 è¿­ä»£æµç¨‹å›¾è§£


**ğŸ”¸ å®Œæ•´è¿­ä»£è¿‡ç¨‹**

```
è¿­ä»£å™¨ä½¿ç”¨æµç¨‹ï¼š

å®¢æˆ·ç«¯ä»£ç            å®¹å™¨å¯¹è±¡           è¿­ä»£å™¨å¯¹è±¡
     |                  |                  |
     |--åˆ›å»ºå®¹å™¨--------->|                  |
     |                  |                  |
     |--æ·»åŠ å…ƒç´ --------->|                  |
     |                  |                  |
     |--getIterator()---->|                  |
     |                  |--åˆ›å»ºè¿­ä»£å™¨------->|
     |                  |                  |
     |<--è¿”å›è¿­ä»£å™¨-------|<-----------------|
     |                  |                  |
å¾ªç¯: |--hasNext()------------------------------>|
     |<--è¿”å›true/false---------------------|
     |                  |                  |
     |--next()-------------------------------->|
     |<--è¿”å›å…ƒç´ ---------------------------|
     |                  |                  |
     |--å¤„ç†å…ƒç´        |                  |
     |                  |                  |
ç»“æŸ: |--hasNext()------------------------------>|
     |<--è¿”å›false------------------------|
```

### 6.2 è¿­ä»£çŠ¶æ€ç®¡ç†


**ğŸ”¸ çŠ¶æ€è½¬æ¢**
```
è¿­ä»£å™¨çš„ä¸‰ç§çŠ¶æ€ï¼š

åˆå§‹çŠ¶æ€ â†’ éå†çŠ¶æ€ â†’ ç»“æŸçŠ¶æ€
   â†“         â†“         â†“
 å‡†å¤‡å¼€å§‹   æ­£åœ¨éå†   éå†å®Œæˆ
position=0  0<pos<size  pos>=size
```

**ğŸ”¸ çŠ¶æ€æ£€æŸ¥æœºåˆ¶**
```java
public class SafeIterator<T> implements Iterator<T> {
    private T[] array;
    private int position;
    private boolean nextCalled;  // æ ‡è®°æ˜¯å¦è°ƒç”¨äº†next()
    
    @Override
    public boolean hasNext() {
        return position < array.length;
    }
    
    @Override
    public T next() {
        if (!hasNext()) {
            throw new NoSuchElementException("æ²¡æœ‰æ›´å¤šå…ƒç´ ");
        }
        nextCalled = true;
        return array[position++];
    }
    
    @Override
    public void remove() {
        if (!nextCalled) {
            throw new IllegalStateException("å¿…é¡»å…ˆè°ƒç”¨next()");
        }
        // æ‰§è¡Œåˆ é™¤é€»è¾‘
        nextCalled = false;  // é‡ç½®çŠ¶æ€
    }
}
```

### 6.3 å¼‚å¸¸å¤„ç†æœºåˆ¶


**âš ï¸ å¸¸è§å¼‚å¸¸æƒ…å†µ**

| å¼‚å¸¸ç±»å‹ | **è§¦å‘æ¡ä»¶** | **å¤„ç†æ–¹å¼** | **é¢„é˜²æ–¹æ³•** |
|---------|-------------|-------------|-------------|
| ğŸš« **NoSuchElementException** | `next()æ—¶å·²æ— å…ƒç´ ` | `æŠ›å‡ºå¼‚å¸¸` | `å…ˆè°ƒç”¨hasNext()æ£€æŸ¥` |
| âš ï¸ **IllegalStateException** | `remove()å‰æœªè°ƒç”¨next()` | `æŠ›å‡ºå¼‚å¸¸` | `æŒ‰æ­£ç¡®é¡ºåºè°ƒç”¨æ–¹æ³•` |
| ğŸ”„ **ConcurrentModificationException** | `éå†æ—¶ä¿®æ”¹é›†åˆ` | `å¿«é€Ÿå¤±è´¥` | `ä½¿ç”¨è¿­ä»£å™¨çš„remove()` |

### 6.4 æœ€ä½³å®è·µæ¨¡å¼


**âœ… æ ‡å‡†éå†æ¨¡å¼**
```java
// æ¨èçš„è¿­ä»£æ–¹å¼
Iterator<String> iterator = container.getIterator();
while (iterator.hasNext()) {
    String element = iterator.next();
    System.out.println(element);
    
    // å¦‚æœéœ€è¦åˆ é™¤ï¼Œä½¿ç”¨è¿­ä»£å™¨çš„remove()
    if (shouldRemove(element)) {
        iterator.remove();
    }
}
```

**âŒ é”™è¯¯ä½¿ç”¨æ–¹å¼**
```java
// é”™è¯¯ï¼šæ²¡æœ‰æ£€æŸ¥hasNext()
while (true) {
    String element = iterator.next();  // å¯èƒ½æŠ›å¼‚å¸¸
    if (element == null) break;
}

// é”™è¯¯ï¼šéå†æ—¶ç›´æ¥ä¿®æ”¹é›†åˆ
while (iterator.hasNext()) {
    String element = iterator.next();
    container.remove(element);  // ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆ
}
```

**ğŸ¯ æ€§èƒ½ä¼˜åŒ–æŠ€å·§**
```java
// æŠ€å·§1ï¼šç¼“å­˜hasNext()ç»“æœï¼ˆé€‚ç”¨äºå¤æ‚è®¡ç®—çš„æƒ…å†µï¼‰
boolean hasNext = iterator.hasNext();
while (hasNext) {
    T element = iterator.next();
    processElement(element);
    hasNext = iterator.hasNext();  // é‡æ–°æ£€æŸ¥
}

// æŠ€å·§2ï¼šæ‰¹é‡å¤„ç†ï¼ˆå‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€ï¼‰
List<T> batch = new ArrayList<>();
while (iterator.hasNext() && batch.size() < BATCH_SIZE) {
    batch.add(iterator.next());
}
processBatch(batch);
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å››å¤§è§’è‰²ï¼šæŠ½è±¡è¿­ä»£å™¨ã€å…·ä½“è¿­ä»£å™¨ã€æŠ½è±¡å®¹å™¨ã€å…·ä½“å®¹å™¨
ğŸ”¸ æ ¸å¿ƒæ–¹æ³•ï¼šhasNext()æ£€æŸ¥ã€next()è·å–ã€remove()åˆ é™¤
ğŸ”¸ è®¾è®¡åŸåˆ™ï¼šç»Ÿä¸€æ¥å£ã€éšè—å®ç°ã€çŠ¶æ€ç®¡ç†
ğŸ”¸ å®ç°è¦ç‚¹ï¼šä½ç½®è·Ÿè¸ªã€è¾¹ç•Œæ£€æŸ¥ã€å¼‚å¸¸å¤„ç†
ğŸ”¸ ä½¿ç”¨æ¨¡å¼ï¼šå…ˆæ£€æŸ¥hasNext()ï¼Œå†è°ƒç”¨next()
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦æŠ½è±¡æ¥å£**
```
ç»Ÿä¸€æ¥å£çš„ä»·å€¼ï¼š
- ä¸åŒé›†åˆç”¨ç›¸åŒæ–¹å¼éå†
- ä»£ç æ›´åŠ é€šç”¨å’Œçµæ´»
- å®¹æ˜“æ‰©å±•æ–°çš„é›†åˆç±»å‹
- éšè—é›†åˆå†…éƒ¨å®ç°ç»†èŠ‚

ç±»æ¯”ï¼šæ‰€æœ‰ç”µè§†é¥æ§å™¨çš„åŸºæœ¬æŒ‰é’®éƒ½ä¸€æ ·
ä¸ç®¡ä»€ä¹ˆå“ç‰Œï¼Œå¼€å…³ã€æ¢å°çš„æ“ä½œéƒ½æ˜¯ç»Ÿä¸€çš„
```

**ğŸ”¹ å…·ä½“å®ç°çš„å·®å¼‚æ€§**
```
ä¸åŒé›†åˆçš„éå†ç­–ç•¥ï¼š
- æ•°ç»„ï¼šé€šè¿‡ç´¢å¼•é€’å¢
- é“¾è¡¨ï¼šé€šè¿‡æŒ‡é’ˆç§»åŠ¨  
- æ ‘ï¼šé€šè¿‡æ ˆæˆ–é€’å½’
- å›¾ï¼šé€šè¿‡æ ‡è®°è®¿é—®çŠ¶æ€

æ ¸å¿ƒæ€æƒ³ï¼šå¤–éƒ¨æ¥å£ç»Ÿä¸€ï¼Œå†…éƒ¨å®ç°å„å¼‚
```

**ğŸ”¹ çŠ¶æ€ç®¡ç†çš„é‡è¦æ€§**
```
è¿­ä»£å™¨å¿…é¡»æ­£ç¡®ç®¡ç†çŠ¶æ€ï¼š
- è®°å½•å½“å‰è®¿é—®ä½ç½®
- æ£€æŸ¥æ˜¯å¦åˆ°è¾¾è¾¹ç•Œ
- å¤„ç†å¼‚å¸¸æƒ…å†µ
- æ”¯æŒremove()æ“ä½œ

ç±»æ¯”ï¼šä¹¦ç­¾ä¸ä»…è¦è®°ä½é¡µç ï¼Œè¿˜è¦çŸ¥é“ä¹¦æœ‰å¤šå°‘é¡µ
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ æ¡†æ¶ä¸­çš„åº”ç”¨**
- **Javaé›†åˆæ¡†æ¶**ï¼šArrayListã€LinkedListéƒ½å®ç°Iterator
- **æ•°æ®åº“è®¿é—®**ï¼šResultSetå°±æ˜¯è¿­ä»£å™¨æ¨¡å¼çš„åº”ç”¨
- **æ–‡ä»¶è¯»å–**ï¼šBufferedReaderæŒ‰è¡Œè¯»å–æ–‡ä»¶
- **ç½‘ç»œæ•°æ®**ï¼šåˆ†æ‰¹å¤„ç†å¤§é‡ç½‘ç»œæ•°æ®

**ğŸ› ï¸ è®¾è®¡ä¼˜åŠ¿**
- **è§£è€¦åˆ**ï¼šé›†åˆå’Œéå†é€»è¾‘åˆ†ç¦»
- **å¯æ‰©å±•**ï¼šæ–°å¢é›†åˆç±»å‹ä¸å½±å“å®¢æˆ·ç«¯
- **å®‰å…¨æ€§**ï¼šæ§åˆ¶è®¿é—®æƒé™ï¼Œé˜²æ­¢è¯¯æ“ä½œ
- **ä¸€è‡´æ€§**ï¼šæä¾›ç»Ÿä¸€çš„éå†ä½“éªŒ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
è¿­ä»£å™¨æ¨¡å¼çœŸå¥‡å¦™ï¼Œç»Ÿä¸€æ¥å£æŠŠè·¯é“º
ä¸ç®¡æ•°ç»„è¿˜æ˜¯é“¾è¡¨ï¼ŒhasNextåŠ nextèµ°åˆ°åº•  
æŠ½è±¡å®šæ ‡å‡†å…·ä½“å¹²æ´»ï¼Œå®¹å™¨é€ è¿­ä»£å™¨ä¸å«ç³Š
çŠ¶æ€ç®¡ç†å¾ˆé‡è¦ï¼Œå¼‚å¸¸å¤„ç†ä¸èƒ½å°‘
```