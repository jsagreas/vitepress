---
title: 2ã€åŸå‹æ¨¡å¼å®ç°æœºåˆ¶
---
## ğŸ“š ç›®å½•

1. [å…‹éš†çš„åŸºæœ¬æ¦‚å¿µ](#1-å…‹éš†çš„åŸºæœ¬æ¦‚å¿µ)
2. [æµ…å…‹éš†å®ç°æœºåˆ¶](#2-æµ…å…‹éš†å®ç°æœºåˆ¶)
3. [æ·±å…‹éš†å®ç°æœºåˆ¶](#3-æ·±å…‹éš†å®ç°æœºåˆ¶)
4. [Cloneableæ¥å£ä½¿ç”¨](#4-Cloneableæ¥å£ä½¿ç”¨)
5. [åºåˆ—åŒ–å…‹éš†æŠ€æœ¯](#5-åºåˆ—åŒ–å…‹éš†æŠ€æœ¯)
6. [è‡ªå®šä¹‰å…‹éš†æ–¹æ³•](#6-è‡ªå®šä¹‰å…‹éš†æ–¹æ³•)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ§¬ å…‹éš†çš„åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¯¹è±¡å…‹éš†


> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> å¯¹è±¡å…‹éš†å°±åƒå¤å°æœºå¤å°æ–‡ä»¶ä¸€æ ·ï¼Œæ ¹æ®ç°æœ‰å¯¹è±¡åˆ›å»ºä¸€ä¸ªå†…å®¹ç›¸åŒçš„æ–°å¯¹è±¡

**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
åŸç‰ˆç…§ç‰‡ â†’ å¤å°æœº â†’ å¤å°ä»¶ç…§ç‰‡
åŸå§‹å¯¹è±¡ â†’ å…‹éš†æ–¹æ³• â†’ å…‹éš†å¯¹è±¡

ç‰¹ç‚¹ï¼š
âœ… å¤–è§‚ä¸€æ¨¡ä¸€æ ·
âœ… å†…å®¹å®Œå…¨ç›¸åŒ  
âœ… ä½†æ˜¯æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ç‰©ä½“
```

**æŠ€æœ¯å±‚é¢å«ä¹‰**ï¼š
- **ç›®çš„**ï¼šæ ¹æ®ç°æœ‰å¯¹è±¡å¿«é€Ÿåˆ›å»ºç›¸åŒå†…å®¹çš„æ–°å¯¹è±¡
- **æœ¬è´¨**ï¼šé¿å…é‡å¤çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæé«˜åˆ›å»ºæ•ˆç‡
- **ç»“æœ**ï¼šå¾—åˆ°ä¸åŸå¯¹è±¡å†…å®¹ç›¸åŒä½†ç‹¬ç«‹çš„æ–°å¯¹è±¡

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å…‹éš†


**ä¼ ç»Ÿåˆ›å»ºå¯¹è±¡çš„é—®é¢˜**ï¼š
```
Student student1 = new Student();
student1.setName("å¼ ä¸‰");
student1.setAge(20);
student1.setGrades(Arrays.asList(85, 90, 88));

// è¦åˆ›å»ºç›¸åŒçš„å­¦ç”Ÿå¯¹è±¡
Student student2 = new Student();  // é‡å¤è®¾ç½®
student2.setName("å¼ ä¸‰");          // é‡å¤è®¾ç½®  
student2.setAge(20);               // é‡å¤è®¾ç½®
student2.setGrades(Arrays.asList(85, 90, 88)); // é‡å¤è®¾ç½®
```

**ä½¿ç”¨å…‹éš†çš„ä¼˜åŠ¿**ï¼š
```
Student student1 = new Student("å¼ ä¸‰", 20, Arrays.asList(85, 90, 88));
Student student2 = student1.clone(); // ä¸€è¡Œä»£ç æå®šï¼
```

**å…‹éš†çš„é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ¯ **å¯¹è±¡åˆ›å»ºæˆæœ¬é«˜**ï¼šåˆå§‹åŒ–è¿‡ç¨‹å¤æ‚ã€è€—æ—¶
- ğŸ¯ **éœ€è¦å¤§é‡ç›¸ä¼¼å¯¹è±¡**ï¼šæ¸¸æˆä¸­çš„NPCã€å•†å“ä¿¡æ¯ç­‰
- ğŸ¯ **ä¿å­˜å¯¹è±¡çŠ¶æ€**ï¼šå¤‡ä»½å½“å‰çŠ¶æ€ï¼Œæ”¯æŒæ’¤é”€æ“ä½œ
- ğŸ¯ **é¿å…æ„é€ å‡½æ•°**ï¼šæŸäº›æƒ…å†µä¸‹ä¸æƒ³è°ƒç”¨æ„é€ å‡½æ•°

---

## 2. ğŸ” æµ…å…‹éš†å®ç°æœºåˆ¶


### 2.1 æµ…å…‹éš†çš„å·¥ä½œåŸç†


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> æµ…å…‹éš†å°±åƒå¤å°ä¸€å¼ è´´äº†ç…§ç‰‡çš„çº¸ï¼Œçº¸å¼ æ˜¯æ–°çš„ï¼Œä½†ç…§ç‰‡è¿˜æ˜¯åŸæ¥çš„é‚£å¼ 

```
æµ…å…‹éš†ç¤ºæ„å›¾ï¼š

åŸå¯¹è±¡                    å…‹éš†å¯¹è±¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name: "å¼ ä¸‰" â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ name: "å¼ ä¸‰" â”‚ (å¤åˆ¶å€¼)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ age: 20     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ age: 20     â”‚ (å¤åˆ¶å€¼)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ address: â”€â”€â”€â”¼â”€â”€â”       â”‚ address: â”€â”€â”€â”¼â”€â”€â”˜ (å¤åˆ¶å¼•ç”¨)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚       
                 â–¼       
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ "åŒ—äº¬æœé˜³åŒº" â”‚ (åŒä¸€ä¸ªAddresså¯¹è±¡)
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æµ…å…‹éš†çš„ç‰¹ç‚¹**ï¼š
- âœ… **åŸºæœ¬ç±»å‹å±æ€§**ï¼šå®Œå…¨å¤åˆ¶ï¼Œä¿®æ”¹äº’ä¸å½±å“
- âš ï¸ **å¼•ç”¨ç±»å‹å±æ€§**ï¼šåªå¤åˆ¶å¼•ç”¨åœ°å€ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡

### 2.2 æµ…å…‹éš†å®ç°ç¤ºä¾‹


```java
public class Student implements Cloneable {
    private String name;        // åŸºæœ¬ç±»å‹(String)
    private int age;           // åŸºæœ¬ç±»å‹
    private Address address;   // å¼•ç”¨ç±»å‹
    
    // æ„é€ æ–¹æ³•
    public Student(String name, int age, Address address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }
    
    // æµ…å…‹éš†å®ç°
    @Override
    public Student clone() {
        try {
            return (Student) super.clone(); // è°ƒç”¨Object.clone()
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException("å…‹éš†å¤±è´¥", e);
        }
    }
    
    // getterå’Œsetteræ–¹æ³•...
}
```

### 2.3 æµ…å…‹éš†çš„é—®é¢˜æ¼”ç¤º


```java
public class ShallowCloneTest {
    public static void main(String[] args) {
        // åˆ›å»ºåŸå§‹å¯¹è±¡
        Address address = new Address("åŒ—äº¬", "æœé˜³åŒº");
        Student original = new Student("å¼ ä¸‰", 20, address);
        
        // æµ…å…‹éš†
        Student cloned = original.clone();
        
        // ä¿®æ”¹åŸºæœ¬ç±»å‹å±æ€§
        cloned.setName("æå››");
        cloned.setAge(21);
        
        // ä¿®æ”¹å¼•ç”¨ç±»å‹å±æ€§
        cloned.getAddress().setCity("ä¸Šæµ·");
        
        // æŸ¥çœ‹ç»“æœ
        System.out.println("åŸå¯¹è±¡å§“å: " + original.getName());     // å¼ ä¸‰ (æœªå˜)
        System.out.println("åŸå¯¹è±¡å¹´é¾„: " + original.getAge());      // 20 (æœªå˜)
        System.out.println("åŸå¯¹è±¡åŸå¸‚: " + original.getAddress().getCity()); // ä¸Šæµ· (è¢«å½±å“!)
        
        System.out.println("å…‹éš†å¯¹è±¡å§“å: " + cloned.getName());      // æå››
        System.out.println("å…‹éš†å¯¹è±¡å¹´é¾„: " + cloned.getAge());       // 21  
        System.out.println("å…‹éš†å¯¹è±¡åŸå¸‚: " + cloned.getAddress().getCity()); // ä¸Šæµ·
    }
}
```

> âš ï¸ **æµ…å…‹éš†çš„é™·é˜±**  
> ä¿®æ”¹å…‹éš†å¯¹è±¡çš„å¼•ç”¨å±æ€§ï¼Œä¼šå½±å“åˆ°åŸå¯¹è±¡ï¼å› ä¸ºå®ƒä»¬æŒ‡å‘åŒä¸€ä¸ªAddresså¯¹è±¡

### 2.4 æµ…å…‹éš†é€‚ç”¨åœºæ™¯


âœ… **é€‚åˆä½¿ç”¨æµ…å…‹éš†çš„æƒ…å†µ**ï¼š
- å¯¹è±¡åªåŒ…å«åŸºæœ¬ç±»å‹å±æ€§
- å¼•ç”¨ç±»å‹å±æ€§æ˜¯ä¸å¯å˜å¯¹è±¡ï¼ˆå¦‚Stringã€Integerï¼‰
- ç¡®å®å¸Œæœ›å…±äº«å¼•ç”¨ç±»å‹å±æ€§

---

## 3. ğŸ—ï¸ æ·±å…‹éš†å®ç°æœºåˆ¶


### 3.1 æ·±å…‹éš†çš„å·¥ä½œåŸç†


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> æ·±å…‹éš†å°±åƒå®Œå…¨é‡æ–°åˆ¶ä½œä¸€ä»½ï¼Œè¿è´´çš„ç…§ç‰‡ä¹Ÿé‡æ–°æ‹ä¸€å¼ ï¼Œå®Œå…¨ç‹¬ç«‹

```
æ·±å…‹éš†ç¤ºæ„å›¾ï¼š

åŸå¯¹è±¡                    å…‹éš†å¯¹è±¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name: "å¼ ä¸‰" â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ name: "å¼ ä¸‰" â”‚ (å¤åˆ¶å€¼)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ age: 20     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ age: 20     â”‚ (å¤åˆ¶å€¼)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ address: â”€â”€â”€â”¼â”€â”€â”       â”‚ address: â”€â”€â”€â”¼â”€â”€â” (æ–°çš„å¼•ç”¨)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚                        â”‚
                 â–¼                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ "åŒ—äº¬æœé˜³åŒº" â”‚          â”‚ "åŒ—äº¬æœé˜³åŒº" â”‚ (æ–°çš„Addresså¯¹è±¡)
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ·±å…‹éš†çš„ç‰¹ç‚¹**ï¼š
- âœ… **åŸºæœ¬ç±»å‹å±æ€§**ï¼šå®Œå…¨å¤åˆ¶
- âœ… **å¼•ç”¨ç±»å‹å±æ€§**ï¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå†…å®¹ç›¸åŒä½†å®Œå…¨ç‹¬ç«‹

### 3.2 æ·±å…‹éš†æ‰‹åŠ¨å®ç°


```java
public class Student implements Cloneable {
    private String name;
    private int age;
    private Address address;
    private List<String> hobbies;
    
    // æ·±å…‹éš†å®ç°
    @Override
    public Student clone() {
        try {
            // å…ˆè¿›è¡Œæµ…å…‹éš†
            Student cloned = (Student) super.clone();
            
            // æ‰‹åŠ¨æ·±å…‹éš†å¼•ç”¨ç±»å‹å±æ€§
            if (this.address != null) {
                cloned.address = this.address.clone(); // Addressä¹Ÿéœ€è¦å®ç°clone
            }
            
            // æ·±å…‹éš†é›†åˆç±»å‹
            if (this.hobbies != null) {
                cloned.hobbies = new ArrayList<>(this.hobbies);
            }
            
            return cloned;
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException("å…‹éš†å¤±è´¥", e);
        }
    }
}

// Addressç±»ä¹Ÿéœ€è¦æ”¯æŒå…‹éš†
public class Address implements Cloneable {
    private String city;
    private String district;
    
    @Override
    public Address clone() {
        try {
            return (Address) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException("å…‹éš†å¤±è´¥", e);
        }
    }
}
```

### 3.3 æ·±å…‹éš†æ•ˆæœéªŒè¯


```java
public class DeepCloneTest {
    public static void main(String[] args) {
        // åˆ›å»ºåŸå§‹å¯¹è±¡
        Address address = new Address("åŒ—äº¬", "æœé˜³åŒº");
        List<String> hobbies = Arrays.asList("è¯»ä¹¦", "æ¸¸æ³³");
        Student original = new Student("å¼ ä¸‰", 20, address, hobbies);
        
        // æ·±å…‹éš†
        Student cloned = original.clone();
        
        // ä¿®æ”¹å¼•ç”¨ç±»å‹å±æ€§
        cloned.getAddress().setCity("ä¸Šæµ·");
        cloned.getHobbies().add("è·‘æ­¥");
        
        // æŸ¥çœ‹ç»“æœ
        System.out.println("åŸå¯¹è±¡åŸå¸‚: " + original.getAddress().getCity()); // åŒ—äº¬ (æœªè¢«å½±å“)
        System.out.println("åŸå¯¹è±¡çˆ±å¥½: " + original.getHobbies());          // [è¯»ä¹¦, æ¸¸æ³³] (æœªè¢«å½±å“)
        
        System.out.println("å…‹éš†å¯¹è±¡åŸå¸‚: " + cloned.getAddress().getCity()); // ä¸Šæµ·
        System.out.println("å…‹éš†å¯¹è±¡çˆ±å¥½: " + cloned.getHobbies());          // [è¯»ä¹¦, æ¸¸æ³³, è·‘æ­¥]
    }
}
```

> âœ… **æ·±å…‹éš†çš„æ•ˆæœ**  
> ä¿®æ”¹å…‹éš†å¯¹è±¡çš„ä»»ä½•å±æ€§ï¼Œéƒ½ä¸ä¼šå½±å“åŸå¯¹è±¡ï¼Œå®ç°äº†å®Œå…¨ç‹¬ç«‹

---

## 4. ğŸ”§ Cloneableæ¥å£ä½¿ç”¨


### 4.1 Cloneableæ¥å£çš„ä½œç”¨


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> Cloneableæ¥å£å°±åƒä¸€ä¸ª"å‡†å…‹éš†è¯"ï¼Œè¡¨æ˜è¿™ä¸ªç±»å…è®¸è¢«å…‹éš†

**Cloneableæ¥å£ç‰¹ç‚¹**ï¼š
```java
public interface Cloneable {
    // è¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œæ²¡æœ‰ä»»ä½•æ–¹æ³•
}
```

- **æ ‡è®°æ¥å£**ï¼šæ²¡æœ‰æ–¹æ³•ï¼Œåªèµ·æ ‡è®°ä½œç”¨
- **è®¸å¯è¯æ˜**ï¼šå‘Šè¯‰JVMè¿™ä¸ªç±»å¯ä»¥è¢«å…‹éš†
- **å¿…é¡»å®ç°**ï¼šä¸å®ç°ä¼šæŠ›å‡º`CloneNotSupportedException`

### 4.2 æ­£ç¡®ä½¿ç”¨Cloneableæ¥å£


**å®Œæ•´çš„å…‹éš†å®ç°æ¨¡æ¿**ï¼š
```java
public class Product implements Cloneable {
    private String name;
    private double price;
    private Category category; // å¼•ç”¨ç±»å‹
    
    public Product(String name, double price, Category category) {
        this.name = name;
        this.price = price;
        this.category = category;
    }
    
    @Override
    public Product clone() {
        try {
            // è°ƒç”¨Object.clone()è¿›è¡Œæµ…å…‹éš†
            Product cloned = (Product) super.clone();
            
            // å¦‚æœéœ€è¦æ·±å…‹éš†ï¼Œæ‰‹åŠ¨å¤„ç†å¼•ç”¨ç±»å‹
            if (this.category != null) {
                cloned.category = this.category.clone();
            }
            
            return cloned;
        } catch (CloneNotSupportedException e) {
            // ç”±äºå·²å®ç°Cloneableï¼Œè¿™ä¸ªå¼‚å¸¸ç†è®ºä¸Šä¸ä¼šå‘ç”Ÿ
            throw new AssertionError("å…‹éš†å¤±è´¥ï¼šç±»æœªå®ç°Cloneableæ¥å£", e);
        }
    }
}
```

### 4.3 ä¸å®ç°Cloneableçš„åæœ


```java
public class BadExample { // æ³¨æ„ï¼šæ²¡æœ‰å®ç°Cloneable
    private String data;
    
    @Override
    public BadExample clone() {
        try {
            return (BadExample) super.clone(); // è¿™é‡Œä¼šæŠ›å¼‚å¸¸ï¼
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException("å…‹éš†å¤±è´¥", e);
        }
    }
}

// æµ‹è¯•ä»£ç 
BadExample bad = new BadExample();
BadExample cloned = bad.clone(); // è¿è¡Œæ—¶å¼‚å¸¸ï¼šCloneNotSupportedException
```

> âš ï¸ **é‡è¦æé†’**  
> å¿…é¡»å®ç°Cloneableæ¥å£ï¼Œå¦åˆ™è°ƒç”¨clone()æ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸

### 4.4 å…‹éš†æ–¹æ³•çš„çº¦å®š


**Object.clone()æ–¹æ³•çš„åŸºæœ¬çº¦å®š**ï¼š

| çº¦å®š | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| `x.clone() != x` | å…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ª | ä¸åŒçš„å†…å­˜åœ°å€ |
| `x.clone().getClass() == x.getClass()` | å…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡ç±»å‹ç›¸åŒ | éƒ½æ˜¯Studentç±»å‹ |
| `x.clone().equals(x)` | å…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡å†…å®¹ç›¸ç­‰ | æ‰€æœ‰å±æ€§å€¼ç›¸åŒ |

---

## 5. ğŸ’¾ åºåˆ—åŒ–å…‹éš†æŠ€æœ¯


### 5.1 åºåˆ—åŒ–å…‹éš†çš„åŸç†


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> åºåˆ—åŒ–å…‹éš†å°±åƒæŠŠå¯¹è±¡"å†·å†»ä¿å­˜"ç„¶å"è§£å†»å¤æ´»"ï¼Œå¾—åˆ°ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬

```
åºåˆ—åŒ–å…‹éš†æµç¨‹ï¼š

åŸå¯¹è±¡ â†’ [åºåˆ—åŒ–] â†’ å­—èŠ‚æµ â†’ [ååºåˆ—åŒ–] â†’ å…‹éš†å¯¹è±¡
  â†“                           â†“
å®Œæ•´ä¿¡æ¯    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    å®Œæ•´ä¿¡æ¯
          â”‚  äºŒè¿›åˆ¶æ•°æ®  â”‚
          â”‚ (åŒ…å«æ‰€æœ‰å±æ€§) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åºåˆ—åŒ–å…‹éš†çš„ä¼˜åŠ¿**ï¼š
- âœ… **è‡ªåŠ¨æ·±å…‹éš†**ï¼šæ— éœ€æ‰‹åŠ¨å¤„ç†å¼•ç”¨ç±»å‹
- âœ… **å¤„ç†å¤æ‚ç»“æ„**ï¼šè‡ªåŠ¨å¤„ç†åµŒå¥—å¯¹è±¡ã€é›†åˆç­‰
- âœ… **å®ç°ç®€å•**ï¼šå‡ è¡Œä»£ç æå®šå¤æ‚å…‹éš†

### 5.2 åºåˆ—åŒ–å…‹éš†å®ç°


```java
import java.io.*;

public class Student implements Serializable {
    private static final long serialVersionUID = 1L;
    
    private String name;
    private int age;
    private Address address;   // Addressä¹Ÿéœ€è¦å®ç°Serializable
    private List<String> hobbies;
    
    // åºåˆ—åŒ–å…‹éš†æ–¹æ³•
    public Student deepCloneBySerialize() {
        try {
            // åºåˆ—åŒ–ï¼šå¯¹è±¡ â†’ å­—èŠ‚æµ
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(bos);
            oos.writeObject(this);
            oos.close();
            
            // ååºåˆ—åŒ–ï¼šå­—èŠ‚æµ â†’ æ–°å¯¹è±¡
            ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
            ObjectInputStream ois = new ObjectInputStream(bis);
            Student cloned = (Student) ois.readObject();
            ois.close();
            
            return cloned;
        } catch (IOException | ClassNotFoundException e) {
            throw new RuntimeException("åºåˆ—åŒ–å…‹éš†å¤±è´¥", e);
        }
    }
}

// åœ°å€ç±»ä¹Ÿéœ€è¦å®ç°Serializable
public class Address implements Serializable {
    private static final long serialVersionUID = 1L;
    private String city;
    private String district;
    // ...
}
```

### 5.3 åºåˆ—åŒ–å…‹éš†çš„ä½¿ç”¨


```java
public class SerializationCloneTest {
    public static void main(String[] args) {
        // åˆ›å»ºå¤æ‚å¯¹è±¡
        Address address = new Address("åŒ—äº¬", "æœé˜³åŒº");
        List<String> hobbies = new ArrayList<>();
        hobbies.add("è¯»ä¹¦");
        hobbies.add("æ¸¸æ³³");
        
        Student original = new Student("å¼ ä¸‰", 20, address, hobbies);
        
        // åºåˆ—åŒ–å…‹éš†ï¼ˆè‡ªåŠ¨æ·±å…‹éš†ï¼‰
        Student cloned = original.deepCloneBySerialize();
        
        // ä¿®æ”¹å…‹éš†å¯¹è±¡
        cloned.setName("æå››");
        cloned.getAddress().setCity("ä¸Šæµ·");
        cloned.getHobbies().add("è·‘æ­¥");
        
        // éªŒè¯ç‹¬ç«‹æ€§
        System.out.println("åŸå¯¹è±¡: " + original.getName() + ", " + 
                          original.getAddress().getCity() + ", " + 
                          original.getHobbies());
        // è¾“å‡ºï¼šå¼ ä¸‰, åŒ—äº¬, [è¯»ä¹¦, æ¸¸æ³³]
        
        System.out.println("å…‹éš†å¯¹è±¡: " + cloned.getName() + ", " + 
                          cloned.getAddress().getCity() + ", " + 
                          cloned.getHobbies());
        // è¾“å‡ºï¼šæå››, ä¸Šæµ·, [è¯»ä¹¦, æ¸¸æ³³, è·‘æ­¥]
    }
}
```

### 5.4 åºåˆ—åŒ–å…‹éš†çš„ä¼˜ç¼ºç‚¹


**âœ… ä¼˜ç‚¹**ï¼š
- è‡ªåŠ¨å®ç°æ·±å…‹éš†ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†
- èƒ½å¤„ç†ä»»æ„å¤æ‚çš„å¯¹è±¡ç»“æ„
- ä»£ç ç®€æ´ï¼Œå®ç°å®¹æ˜“

**âŒ ç¼ºç‚¹**ï¼š
- æ€§èƒ½è¾ƒå·®ï¼Œåºåˆ—åŒ–/ååºåˆ—åŒ–æœ‰å¼€é”€
- æ‰€æœ‰ç›¸å…³ç±»éƒ½å¿…é¡»å®ç°Serializable
- ä¸èƒ½å¤„ç†transientå’Œstaticå­—æ®µ

**ğŸ¯ é€‚ç”¨åœºæ™¯**ï¼š
- å¯¹è±¡ç»“æ„å¤æ‚ï¼Œæ‰‹åŠ¨å…‹éš†å›°éš¾
- æ€§èƒ½è¦æ±‚ä¸é«˜çš„åœºæ™¯
- éœ€è¦å®Œå…¨éš”ç¦»çš„æ·±åº¦å…‹éš†

---

## 6. ğŸ› ï¸ è‡ªå®šä¹‰å…‹éš†æ–¹æ³•


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰å…‹éš†


**Object.clone()çš„å±€é™æ€§**ï¼š
- åªèƒ½è¿›è¡Œæµ…å…‹éš†
- å¿…é¡»å®ç°Cloneableæ¥å£
- å¼‚å¸¸å¤„ç†å¤æ‚
- ä¸å¤Ÿçµæ´»

**è‡ªå®šä¹‰å…‹éš†çš„ä¼˜åŠ¿**ï¼š
- âœ… **çµæ´»æ§åˆ¶**ï¼šå¯ä»¥é€‰æ‹©æ€§å…‹éš†æŸäº›å±æ€§
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„åºåˆ—åŒ–å¼€é”€
- âœ… **ä¸šåŠ¡å®šåˆ¶**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶å…‹éš†é€»è¾‘
- âœ… **æ— éœ€æ¥å£**ï¼šä¸ä¾èµ–Cloneableæ¥å£

### 6.2 æ„é€ å‡½æ•°å…‹éš†æ³•


```java
public class Student {
    private String name;
    private int age;
    private Address address;
    private List<String> hobbies;
    
    // æ™®é€šæ„é€ å‡½æ•°
    public Student(String name, int age, Address address, List<String> hobbies) {
        this.name = name;
        this.age = age;
        this.address = address;
        this.hobbies = hobbies;
    }
    
    // å…‹éš†æ„é€ å‡½æ•°ï¼ˆæ¨èæ–¹å¼ï¼‰
    public Student(Student other) {
        this.name = other.name;           // Stringä¸å¯å˜ï¼Œç›´æ¥èµ‹å€¼
        this.age = other.age;             // åŸºæœ¬ç±»å‹ï¼Œç›´æ¥èµ‹å€¼
        
        // æ·±åº¦å…‹éš†å¼•ç”¨ç±»å‹
        this.address = (other.address != null) ? 
                      new Address(other.address) : null;
        
        this.hobbies = (other.hobbies != null) ? 
                      new ArrayList<>(other.hobbies) : null;
    }
    
    // ä¾¿æ·çš„å…‹éš†æ–¹æ³•
    public Student copy() {
        return new Student(this);
    }
}

// Addressçš„å…‹éš†æ„é€ å‡½æ•°
public class Address {
    private String city;
    private String district;
    
    public Address(String city, String district) {
        this.city = city;
        this.district = district;
    }
    
    // å…‹éš†æ„é€ å‡½æ•°
    public Address(Address other) {
        this.city = other.city;
        this.district = other.district;
    }
}
```

### 6.3 å»ºé€ è€…æ¨¡å¼å…‹éš†æ³•


```java
public class Student {
    private String name;
    private int age;
    private Address address;
    private List<String> hobbies;
    
    // ç§æœ‰æ„é€ å‡½æ•°
    private Student(Builder builder) {
        this.name = builder.name;
        this.age = builder.age;
        this.address = builder.address;
        this.hobbies = builder.hobbies;
    }
    
    // åŸºäºå½“å‰å¯¹è±¡åˆ›å»ºBuilder
    public Builder toBuilder() {
        return new Builder()
                .setName(this.name)
                .setAge(this.age)
                .setAddress(this.address != null ? new Address(this.address) : null)
                .setHobbies(this.hobbies != null ? new ArrayList<>(this.hobbies) : null);
    }
    
    // å»ºé€ è€…ç±»
    public static class Builder {
        private String name;
        private int age;
        private Address address;
        private List<String> hobbies;
        
        public Builder setName(String name) {
            this.name = name;
            return this;
        }
        
        public Builder setAge(int age) {
            this.age = age;
            return this;
        }
        
        public Builder setAddress(Address address) {
            this.address = address;
            return this;
        }
        
        public Builder setHobbies(List<String> hobbies) {
            this.hobbies = hobbies;
            return this;
        }
        
        public Student build() {
            return new Student(this);
        }
    }
}
```

**å»ºé€ è€…å…‹éš†çš„ä½¿ç”¨**ï¼š
```java
// åŸå§‹å¯¹è±¡
Student original = new Student.Builder()
    .setName("å¼ ä¸‰")
    .setAge(20)
    .setAddress(new Address("åŒ—äº¬", "æœé˜³åŒº"))
    .setHobbies(Arrays.asList("è¯»ä¹¦", "æ¸¸æ³³"))
    .build();

// å…‹éš†å¹¶ä¿®æ”¹
Student cloned = original.toBuilder()
    .setName("æå››")      // ä¿®æ”¹å§“å
    .setAge(21)          // ä¿®æ”¹å¹´é¾„
    .build();            // å…¶ä»–å±æ€§ä¿æŒä¸å˜
```

### 6.4 å·¥å‚æ–¹æ³•å…‹éš†æ³•


```java
public class Student {
    private String name;
    private int age;
    private Address address;
    private List<String> hobbies;
    
    // å…‹éš†å·¥å‚æ–¹æ³•
    public static Student copyOf(Student original) {
        if (original == null) {
            return null;
        }
        
        Student copy = new Student();
        copy.name = original.name;
        copy.age = original.age;
        
        // æ·±åº¦å…‹éš†å¼•ç”¨ç±»å‹
        copy.address = (original.address != null) ? 
                      Address.copyOf(original.address) : null;
        
        copy.hobbies = (original.hobbies != null) ? 
                      new ArrayList<>(original.hobbies) : null;
        
        return copy;
    }
    
    // ä¾¿æ·çš„å®ä¾‹æ–¹æ³•
    public Student copy() {
        return Student.copyOf(this);
    }
}
```

### 6.5 é€‰æ‹©æ€§å…‹éš†


```java
public class Student {
    private String name;
    private int age;
    private Address address;
    private List<String> hobbies;
    private String password; // æ•æ„Ÿä¿¡æ¯
    
    // åŸºç¡€ä¿¡æ¯å…‹éš†ï¼ˆä¸åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼‰
    public Student copyBasicInfo() {
        Student copy = new Student();
        copy.name = this.name;
        copy.age = this.age;
        copy.address = (this.address != null) ? new Address(this.address) : null;
        // æ³¨æ„ï¼šä¸å¤åˆ¶passwordå’Œhobbies
        return copy;
    }
    
    // å®Œæ•´å…‹éš†
    public Student copyAll() {
        Student copy = new Student();
        copy.name = this.name;
        copy.age = this.age;
        copy.address = (this.address != null) ? new Address(this.address) : null;
        copy.hobbies = (this.hobbies != null) ? new ArrayList<>(this.hobbies) : null;
        copy.password = this.password; // åŒ…å«æ•æ„Ÿä¿¡æ¯
        return copy;
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å…‹éš†æ–¹å¼å¯¹æ¯”


| å…‹éš†æ–¹å¼ | **å®ç°éš¾åº¦** | **æ€§èƒ½** | **çµæ´»æ€§** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|---------|-----------|-------------|
| ğŸ”¸ **æµ…å…‹éš†** | `ç®€å•` | `å¿«` | `ä½` | `ç®€å•å¯¹è±¡ï¼Œå…±äº«å¼•ç”¨` |
| ğŸ”¸ **æ·±å…‹éš†æ‰‹åŠ¨** | `å¤æ‚` | `ä¸­` | `é«˜` | `å¤æ‚å¯¹è±¡ï¼Œéœ€è¦æ§åˆ¶` |
| ğŸ”¸ **åºåˆ—åŒ–å…‹éš†** | `ç®€å•` | `æ…¢` | `ä¸­` | `å¤æ‚ç»“æ„ï¼Œè‡ªåŠ¨å¤„ç†` |
| ğŸ”¸ **è‡ªå®šä¹‰å…‹éš†** | `ä¸­ç­‰` | `å¿«` | `æé«˜` | `çµæ´»æ§åˆ¶ï¼Œæ€§èƒ½è¦æ±‚` |

### 7.2 å¿…é¡»è®°ä½çš„å…³é”®ç‚¹


> ğŸ“Œ **æµ…å…‹éš† vs æ·±å…‹éš†**  
> - æµ…å…‹éš†ï¼šå¤åˆ¶å¼•ç”¨ï¼Œå…±äº«å¯¹è±¡
> - æ·±å…‹éš†ï¼šå¤åˆ¶å†…å®¹ï¼Œç‹¬ç«‹å¯¹è±¡

> âš ï¸ **Cloneableæ¥å£å¿…é¡»å®ç°**  
> ä¸å®ç°ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸

> ğŸ’¡ **åºåˆ—åŒ–å…‹éš†è‡ªåŠ¨æ·±å…‹éš†**  
> é€šè¿‡åºåˆ—åŒ–/ååºåˆ—åŒ–å®ç°ï¼Œä½†æ€§èƒ½è¾ƒä½

> ğŸ› ï¸ **è‡ªå®šä¹‰å…‹éš†æœ€çµæ´»**  
> å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æ€§å…‹éš†å±æ€§

### 7.3 å®é™…å¼€å‘å»ºè®®


**ğŸŒ± åˆå­¦è€…å»ºè®®**ï¼š
- ç®€å•å¯¹è±¡ç”¨æµ…å…‹éš†
- å¤æ‚å¯¹è±¡ç”¨æ„é€ å‡½æ•°å…‹éš†æ³•
- é¿å…ä½¿ç”¨åºåˆ—åŒ–å…‹éš†ï¼ˆæ€§èƒ½é—®é¢˜ï¼‰

**ğŸŒ¿ è¿›é˜¶å¼€å‘å»ºè®®**ï¼š
- æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å…‹éš†æ–¹å¼
- æ³¨æ„ç©ºå€¼æ£€æŸ¥å’Œå¼‚å¸¸å¤„ç†
- è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜

**ğŸŒ³ ä¸“å®¶çº§å»ºè®®**ï¼š
- ç»“åˆå·¥å‚æ¨¡å¼å’Œå»ºé€ è€…æ¨¡å¼
- å®ç°å…‹éš†æ± å¤ç”¨å¯¹è±¡
- ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Apache Commons BeanUtilsï¼‰

### 7.4 å¸¸è§é™·é˜±ä¸é¿å…æ–¹æ³•


| é™·é˜± | é—®é¢˜ | è§£å†³æ–¹æ³• |
|------|------|----------|
| **å¿˜è®°å®ç°Cloneable** | è¿è¡Œæ—¶å¼‚å¸¸ | è®°å¾—å®ç°æ¥å£ |
| **æµ…å…‹éš†å‰¯ä½œç”¨** | ä¿®æ”¹å½±å“åŸå¯¹è±¡ | ä½¿ç”¨æ·±å…‹éš† |
| **åºåˆ—åŒ–æ€§èƒ½é—®é¢˜** | å…‹éš†é€Ÿåº¦æ…¢ | æ”¹ç”¨æ„é€ å‡½æ•°å…‹éš† |
| **ç©ºå€¼æœªå¤„ç†** | NullPointerException | å¢åŠ ç©ºå€¼æ£€æŸ¥ |

**ğŸ“– è®°å¿†å£è¯€**ï¼š
```
å…‹éš†æ¨¡å¼é€‰æ‹©å¤šï¼Œæµ…æ·±åºåˆ—åŒ–å®šåˆ¶ä½³
æµ…å…‹éš†å¿«å…±å¼•ç”¨ï¼Œæ·±å…‹éš†æ…¢å…¨ç‹¬ç«‹  
åºåˆ—åŒ–è‡ªåŠ¨æ·±ï¼Œè‡ªå®šä¹‰çµæ´»æ€§
ä¸šåŠ¡åœºæ™¯å®šæ–¹æ¡ˆï¼Œæ€§èƒ½å®‰å…¨ä¸¤æ‰‹æŠ“
```

**æ ¸å¿ƒç†è§£**ï¼š
- å…‹éš†æ˜¯ä¸ºäº†å¿«é€Ÿåˆ›å»ºç›¸ä¼¼å¯¹è±¡
- æµ…å…‹éš†å’Œæ·±å…‹éš†é€‚ç”¨äºä¸åŒåœºæ™¯
- æ²¡æœ‰ä¸‡èƒ½çš„å…‹éš†æ–¹å¼ï¼Œè¦æ ¹æ®éœ€æ±‚é€‰æ‹©
- è‡ªå®šä¹‰å…‹éš†æ–¹æ³•é€šå¸¸æ˜¯æœ€ä½³å®è·µ