---
title: 5ã€å»ºé€ è€…æ¨¡å¼é«˜çº§æŠ€å·§
---
## ğŸ“š ç›®å½•

1. [å¿…å¡«å‚æ•°éªŒè¯æœºåˆ¶](#1-å¿…å¡«å‚æ•°éªŒè¯æœºåˆ¶)
2. [æ„å»ºæ­¥éª¤çº¦æŸæ§åˆ¶](#2-æ„å»ºæ­¥éª¤çº¦æŸæ§åˆ¶)
3. [å‚æ•°æ ¡éªŒæœºåˆ¶è¯¦è§£](#3-å‚æ•°æ ¡éªŒæœºåˆ¶è¯¦è§£)
4. [é»˜è®¤å€¼å¤„ç†ç­–ç•¥](#4-é»˜è®¤å€¼å¤„ç†ç­–ç•¥)
5. [ä¸å¯å˜å¯¹è±¡æ„å»ºæŠ€æœ¯](#5-ä¸å¯å˜å¯¹è±¡æ„å»ºæŠ€æœ¯)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”’ å¿…å¡«å‚æ•°éªŒè¯æœºåˆ¶


### 1.1 ä»€ä¹ˆæ˜¯å¿…å¡«å‚æ•°éªŒè¯


**é€šä¿—ç†è§£**ï¼šå°±åƒå¡«è¡¨æ ¼æ—¶ï¼Œæœ‰äº›å­—æ®µæ˜¯å¿…é¡»è¦å¡«çš„ï¼ˆæ¯”å¦‚å§“åã€èº«ä»½è¯å·ï¼‰ï¼Œå»ºé€ è€…æ¨¡å¼ä¹Ÿéœ€è¦ç¡®ä¿å…³é”®å‚æ•°ä¸èƒ½ä¸ºç©ºã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
æ³¨å†Œè´¦å·æ—¶ï¼š
âœ… å¿…å¡«ï¼šç”¨æˆ·åã€å¯†ç ã€é‚®ç®±
âŒ å¯é€‰ï¼šæ˜µç§°ã€å¤´åƒã€ä¸ªäººç®€ä»‹

å»ºé€ è€…æ¨¡å¼ä¸­ï¼š
âœ… å¿…å¡«ï¼šæ ¸å¿ƒä¸šåŠ¡å‚æ•°
âŒ å¯é€‰ï¼šè¾…åŠ©é…ç½®å‚æ•°
```

### 1.2 ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜


**é—®é¢˜åœºæ™¯**ï¼šæ²¡æœ‰éªŒè¯æœºåˆ¶æ—¶ï¼Œå¾ˆå®¹æ˜“åˆ›å»ºå‡º"åŠæˆå“"å¯¹è±¡

```java
// ä¼ ç»Ÿå»ºé€ è€… - å®¹æ˜“å‡ºé”™
public class User {
    private String username;
    private String email;
    private String password;
    
    // é—®é¢˜ï¼šå¯èƒ½åˆ›å»ºå‡ºç”¨æˆ·åä¸ºç©ºçš„ç”¨æˆ·ï¼
    public static class Builder {
        private String username;
        private String email;
        private String password;
        
        public User build() {
            return new User(this);  // æ²¡æœ‰ä»»ä½•æ£€æŸ¥ï¼
        }
    }
}

// ä½¿ç”¨æ—¶çš„éšæ‚£
User user = new User.Builder()
    .email("test@email.com")
    .password("123456")
    .build();  // ç³Ÿç³•ï¼å¿˜è®°è®¾ç½®ç”¨æˆ·åäº†
```

### 1.3 æ”¹è¿›åçš„å¿…å¡«å‚æ•°éªŒè¯


**æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨`build()`æ–¹æ³•ä¸­è¿›è¡Œä¸¥æ ¼æ£€æŸ¥

```java
public class User {
    private final String username;
    private final String email;
    private final String password;
    private final String nickname;
    
    private User(Builder builder) {
        this.username = builder.username;
        this.email = builder.email;
        this.password = builder.password;
        this.nickname = builder.nickname;
    }
    
    public static class Builder {
        // å¿…å¡«å‚æ•°
        private String username;
        private String email;
        private String password;
        
        // å¯é€‰å‚æ•°
        private String nickname = "é»˜è®¤æ˜µç§°";
        
        public Builder username(String username) {
            this.username = username;
            return this;
        }
        
        public Builder email(String email) {
            this.email = email;
            return this;
        }
        
        public Builder password(String password) {
            this.password = password;
            return this;
        }
        
        public Builder nickname(String nickname) {
            this.nickname = nickname;
            return this;
        }
        
        // ğŸ”‘ å…³é”®ï¼šbuildæ–¹æ³•ä¸­è¿›è¡ŒéªŒè¯
        public User build() {
            validateRequiredFields();  // éªŒè¯å¿…å¡«å­—æ®µ
            return new User(this);
        }
        
        private void validateRequiredFields() {
            if (username == null || username.trim().isEmpty()) {
                throw new IllegalStateException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
            }
            if (email == null || email.trim().isEmpty()) {
                throw new IllegalStateException("é‚®ç®±ä¸èƒ½ä¸ºç©º");
            }
            if (password == null || password.length() < 6) {
                throw new IllegalStateException("å¯†ç ä¸èƒ½å°‘äº6ä½");
            }
        }
    }
}
```

### 1.4 æ›´ä¼˜é›…çš„éªŒè¯æ–¹å¼


**ä½¿ç”¨éªŒè¯å™¨æ¨¡å¼**ï¼šè®©éªŒè¯é€»è¾‘æ›´æ¸…æ™°

```java
public class UserValidator {
    
    public static void validateUsername(String username) {
        if (username == null || username.trim().isEmpty()) {
            throw new IllegalArgumentException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        }
        if (username.length() < 3) {
            throw new IllegalArgumentException("ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦");
        }
    }
    
    public static void validateEmail(String email) {
        if (email == null || !email.contains("@")) {
            throw new IllegalArgumentException("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
        }
    }
    
    public static void validatePassword(String password) {
        if (password == null || password.length() < 6) {
            throw new IllegalArgumentException("å¯†ç è‡³å°‘6ä½");
        }
    }
}

// åœ¨Builderä¸­ä½¿ç”¨
private void validateRequiredFields() {
    UserValidator.validateUsername(username);
    UserValidator.validateEmail(email);
    UserValidator.validatePassword(password);
}
```

> ğŸ’¡ **è®¾è®¡æŠ€å·§**ï¼šæŠŠéªŒè¯é€»è¾‘å•ç‹¬æå–å‡ºæ¥ï¼Œæ—¢æ¸…æ™°åˆæ–¹ä¾¿é‡ç”¨

---

## 2. â›“ï¸ æ„å»ºæ­¥éª¤çº¦æŸæ§åˆ¶


### 2.1 ä»€ä¹ˆæ˜¯æ„å»ºæ­¥éª¤çº¦æŸ


**é€šä¿—ç†è§£**ï¼šå°±åƒåšèœæœ‰å…ˆåé¡ºåºï¼ˆå…ˆæ´—èœå†åˆ‡èœå†ç‚’èœï¼‰ï¼ŒæŸäº›å¯¹è±¡çš„æ„å»ºä¹Ÿéœ€è¦æŒ‰ç…§ç‰¹å®šæ­¥éª¤è¿›è¡Œã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
æ³¡èŒ¶æ­¥éª¤ï¼š
1ï¸âƒ£ çƒ§æ°´ â†’ 2ï¸âƒ£ æ´—èŒ¶å…· â†’ 3ï¸âƒ£ æ”¾èŒ¶å¶ â†’ 4ï¸âƒ£ å†²æ³¡

è¿åé¡ºåºçš„åæœï¼š
âŒ å…ˆæ”¾èŒ¶å¶å†çƒ§æ°´ â†’ èŒ¶å¶ä¼šå˜è´¨
âŒ ä¸æ´—èŒ¶å…·ç›´æ¥ç”¨ â†’ å½±å“èŒ¶å‘³
```

### 2.2 æ­¥éª¤çº¦æŸçš„å®é™…åº”ç”¨åœºæ™¯


**æ•°æ®åº“è¿æ¥æ„å»ºç¤ºä¾‹**ï¼š

```
æ­£ç¡®çš„è¿æ¥æ­¥éª¤ï¼š
1ï¸âƒ£ è®¾ç½®ä¸»æœºåœ°å€
2ï¸âƒ£ è®¾ç½®ç«¯å£
3ï¸âƒ£ è®¾ç½®æ•°æ®åº“å
4ï¸âƒ£ è®¾ç½®ç”¨æˆ·åå’Œå¯†ç 
5ï¸âƒ£ å»ºç«‹è¿æ¥

å¦‚æœè·³è¿‡æŸäº›æ­¥éª¤ï¼Œè¿æ¥å°±ä¼šå¤±è´¥
```

### 2.3 ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜


```java
// æ²¡æœ‰æ­¥éª¤çº¦æŸçš„å»ºé€ è€…
public class DatabaseConnection {
    public static class Builder {
        private String host;
        private int port;
        private String database;
        private String username;
        private String password;
        
        // é—®é¢˜ï¼šå¯ä»¥éšæ„è°ƒç”¨ï¼Œæ²¡æœ‰é¡ºåºçº¦æŸ
        public Builder host(String host) { this.host = host; return this; }
        public Builder port(int port) { this.port = port; return this; }
        public Builder database(String db) { this.database = db; return this; }
        public Builder credentials(String user, String pass) { 
            this.username = user; 
            this.password = pass; 
            return this; 
        }
        
        public DatabaseConnection build() {
            return new DatabaseConnection(this);
        }
    }
}

// ä½¿ç”¨æ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜
DatabaseConnection conn = new DatabaseConnection.Builder()
    .credentials("user", "pass")  // è¿˜æ²¡è®¾ç½®ä¸»æœºå°±è®¾ç½®äº†å¯†ç 
    .database("mydb")            // è¿˜æ²¡è®¾ç½®ç«¯å£å°±è®¾ç½®äº†æ•°æ®åº“
    .build();                    // å¾ˆå¤šå…³é”®ä¿¡æ¯éƒ½æ²¡è®¾ç½®ï¼
```

### 2.4 æ”¹è¿›åçš„æ­¥éª¤çº¦æŸæ–¹æ¡ˆ


**æ–¹æ¡ˆä¸€ï¼šæ¥å£é“¾å¼çº¦æŸ**

```java
// å®šä¹‰ä¸åŒé˜¶æ®µçš„æ¥å£
public interface HostStep {
    PortStep host(String host);
}

public interface PortStep {
    DatabaseStep port(int port);
}

public interface DatabaseStep {
    CredentialStep database(String database);
}

public interface CredentialStep {
    BuildStep credentials(String username, String password);
}

public interface BuildStep {
    DatabaseConnection build();
}

// å®ç°æ­¥éª¤çº¦æŸçš„å»ºé€ è€…
public class DatabaseConnection {
    private final String host;
    private final int port;
    private final String database;
    private final String username;
    private final String password;
    
    private DatabaseConnection(Builder builder) {
        this.host = builder.host;
        this.port = builder.port;
        this.database = builder.database;
        this.username = builder.username;
        this.password = builder.password;
    }
    
    // ğŸ”‘ å…³é”®ï¼šBuilderå®ç°æ‰€æœ‰æ­¥éª¤æ¥å£
    public static class Builder implements HostStep, PortStep, 
                                          DatabaseStep, CredentialStep, BuildStep {
        private String host;
        private int port;
        private String database;
        private String username;
        private String password;
        
        @Override
        public PortStep host(String host) {
            this.host = host;
            return this;  // è¿”å›PortStepï¼Œåªèƒ½è°ƒç”¨port()
        }
        
        @Override
        public DatabaseStep port(int port) {
            this.port = port;
            return this;  // è¿”å›DatabaseStepï¼Œåªèƒ½è°ƒç”¨database()
        }
        
        @Override
        public CredentialStep database(String database) {
            this.database = database;
            return this;  // è¿”å›CredentialStepï¼Œåªèƒ½è°ƒç”¨credentials()
        }
        
        @Override
        public BuildStep credentials(String username, String password) {
            this.username = username;
            this.password = password;
            return this;  // è¿”å›BuildStepï¼Œåªèƒ½è°ƒç”¨build()
        }
        
        @Override
        public DatabaseConnection build() {
            return new DatabaseConnection(this);
        }
    }
    
    // ğŸ¯ å¼ºåˆ¶æŒ‰æ­¥éª¤æ„å»ºçš„å…¥å£
    public static HostStep newBuilder() {
        return new Builder();
    }
}
```

**ä½¿ç”¨æ•ˆæœ**ï¼š

```java
// âœ… å¿…é¡»æŒ‰ç…§æ­£ç¡®çš„æ­¥éª¤æ¥
DatabaseConnection connection = DatabaseConnection.newBuilder()
    .host("localhost")          // ç¬¬1æ­¥ï¼šè®¾ç½®ä¸»æœº
    .port(3306)                // ç¬¬2æ­¥ï¼šè®¾ç½®ç«¯å£
    .database("myapp")         // ç¬¬3æ­¥ï¼šè®¾ç½®æ•°æ®åº“
    .credentials("admin", "123456")  // ç¬¬4æ­¥ï¼šè®¾ç½®å‡­æ®
    .build();                  // ç¬¬5æ­¥ï¼šæ„å»ºå¯¹è±¡

// âŒ ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½è·³è¿‡æ­¥éª¤
// DatabaseConnection.newBuilder().port(3306)  // é”™è¯¯ï¼å¿…é¡»å…ˆè®¾ç½®host
```

### 2.5 ç®€åŒ–çš„æ­¥éª¤çº¦æŸæ–¹æ¡ˆ


**æ–¹æ¡ˆäºŒï¼šçŠ¶æ€æ ‡è®°çº¦æŸ**

```java
public class EmailMessage {
    private final String to;
    private final String subject;
    private final String content;
    
    public static class Builder {
        private String to;
        private String subject;
        private String content;
        
        // çŠ¶æ€æ ‡è®°
        private boolean hasRecipient = false;
        private boolean hasSubject = false;
        
        public Builder to(String to) {
            this.to = to;
            this.hasRecipient = true;
            return this;
        }
        
        public Builder subject(String subject) {
            if (!hasRecipient) {
                throw new IllegalStateException("å¿…é¡»å…ˆè®¾ç½®æ”¶ä»¶äºº");
            }
            this.subject = subject;
            this.hasSubject = true;
            return this;
        }
        
        public Builder content(String content) {
            if (!hasSubject) {
                throw new IllegalStateException("å¿…é¡»å…ˆè®¾ç½®ä¸»é¢˜");
            }
            this.content = content;
            return this;
        }
        
        public EmailMessage build() {
            if (!hasRecipient) {
                throw new IllegalStateException("ç¼ºå°‘æ”¶ä»¶äºº");
            }
            if (!hasSubject) {
                throw new IllegalStateException("ç¼ºå°‘é‚®ä»¶ä¸»é¢˜");
            }
            return new EmailMessage(this);
        }
    }
}
```

> âš ï¸ **é€‰æ‹©å»ºè®®**ï¼šæ¥å£é“¾å¼çº¦æŸæ›´å®‰å…¨ï¼ˆç¼–è¯‘æœŸæ£€æŸ¥ï¼‰ï¼ŒçŠ¶æ€æ ‡è®°çº¦æŸæ›´ç®€å•ï¼ˆè¿è¡ŒæœŸæ£€æŸ¥ï¼‰

---

## 3. âœ… å‚æ•°æ ¡éªŒæœºåˆ¶è¯¦è§£


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦å‚æ•°æ ¡éªŒ


**é€šä¿—ç†è§£**ï¼šå°±åƒé—¨å«æ£€æŸ¥è¯ä»¶ä¸€æ ·ï¼Œç¡®ä¿è¿›å…¥çš„æ•°æ®éƒ½æ˜¯"åˆæ³•å±…æ°‘"ã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
é“¶è¡Œå¼€æˆ·æ—¶çš„æ£€æŸ¥ï¼š
âœ… èº«ä»½è¯å·æ ¼å¼æ­£ç¡®
âœ… æ‰‹æœºå·æ˜¯11ä½æ•°å­—
âœ… å¹´é¾„åœ¨åˆç†èŒƒå›´å†…
âŒ æ‹’ç»è™šå‡ä¿¡æ¯

ç¨‹åºä¸­çš„å‚æ•°æ ¡éªŒï¼š
âœ… é‚®ç®±æ ¼å¼æ­£ç¡®
âœ… å¯†ç å¼ºåº¦è¶³å¤Ÿ
âœ… æ•°å€¼åœ¨æœ‰æ•ˆèŒƒå›´å†…
âŒ æ‹’ç»æ— æ•ˆæ•°æ®
```

### 3.2 å¸¸è§çš„å‚æ•°æ ¡éªŒç±»å‹


**ğŸ“Š æ ¡éªŒç±»å‹æ€»è§ˆ**

| æ ¡éªŒç±»å‹ | **è¯´æ˜** | **ç¤ºä¾‹** | **å¸¸ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| ğŸ”¤ **æ ¼å¼æ ¡éªŒ** | `æ£€æŸ¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®` | `é‚®ç®±ã€æ‰‹æœºå·ã€èº«ä»½è¯` | `ç”¨æˆ·æ³¨å†Œã€è¡¨å•æäº¤` |
| ğŸ“ **é•¿åº¦æ ¡éªŒ** | `æ£€æŸ¥å­—ç¬¦ä¸²é•¿åº¦èŒƒå›´` | `ç”¨æˆ·å3-20ä½` | `ç”¨æˆ·è¾“å…¥ã€å¯†ç è®¾ç½®` |
| ğŸ”¢ **æ•°å€¼æ ¡éªŒ** | `æ£€æŸ¥æ•°å­—èŒƒå›´å’Œç±»å‹` | `å¹´é¾„0-150ã€ä»·æ ¼>0` | `æ•°å€¼è¾“å…¥ã€é…ç½®å‚æ•°` |
| ğŸš« **éç©ºæ ¡éªŒ** | `ç¡®ä¿å¿…è¦å­—æ®µä¸ä¸ºç©º` | `å§“åã€å¯†ç ä¸èƒ½ä¸ºç©º` | `å¿…å¡«å­—æ®µéªŒè¯` |
| ğŸ”— **å…³è”æ ¡éªŒ** | `æ£€æŸ¥å­—æ®µé—´çš„é€»è¾‘å…³ç³»` | `ç»“æŸæ—¶é—´>å¼€å§‹æ—¶é—´` | `ä¸šåŠ¡é€»è¾‘éªŒè¯` |

### 3.3 å®ç”¨çš„å‚æ•°æ ¡éªŒå®ç°


**åŸºç¡€æ ¡éªŒå·¥å…·ç±»**ï¼š

```java
public class ValidationUtils {
    
    // é‚®ç®±æ ¼å¼æ ¡éªŒ
    public static boolean isValidEmail(String email) {
        if (email == null) return false;
        return email.matches("^[\\w.-]+@[\\w.-]+\\.[a-zA-Z]{2,}$");
    }
    
    // æ‰‹æœºå·æ ¡éªŒ
    public static boolean isValidPhone(String phone) {
        if (phone == null) return false;
        return phone.matches("^1[3-9]\\d{9}$");
    }
    
    // å­—ç¬¦ä¸²é•¿åº¦æ ¡éªŒ
    public static boolean isValidLength(String str, int min, int max) {
        if (str == null) return false;
        int length = str.trim().length();
        return length >= min && length <= max;
    }
    
    // æ•°å€¼èŒƒå›´æ ¡éªŒ
    public static boolean isInRange(int value, int min, int max) {
        return value >= min && value <= max;
    }
    
    // éç©ºæ ¡éªŒ
    public static boolean isNotEmpty(String str) {
        return str != null && !str.trim().isEmpty();
    }
}
```

### 3.4 åœ¨å»ºé€ è€…ä¸­é›†æˆæ ¡éªŒ


**å®Œæ•´çš„æ ¡éªŒç¤ºä¾‹**ï¼š

```java
public class UserProfile {
    private final String username;
    private final String email;
    private final String phone;
    private final int age;
    private final String bio;
    
    private UserProfile(Builder builder) {
        this.username = builder.username;
        this.email = builder.email;
        this.phone = builder.phone;
        this.age = builder.age;
        this.bio = builder.bio;
    }
    
    public static class Builder {
        private String username;
        private String email;
        private String phone;
        private int age;
        private String bio = "";
        
        public Builder username(String username) {
            // ç«‹å³æ ¡éªŒï¼Œå¿«é€Ÿå¤±è´¥
            if (!ValidationUtils.isValidLength(username, 3, 20)) {
                throw new IllegalArgumentException("ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä½ä¹‹é—´");
            }
            this.username = username;
            return this;
        }
        
        public Builder email(String email) {
            if (!ValidationUtils.isValidEmail(email)) {
                throw new IllegalArgumentException("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
            }
            this.email = email;
            return this;
        }
        
        public Builder phone(String phone) {
            if (!ValidationUtils.isValidPhone(phone)) {
                throw new IllegalArgumentException("æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®");
            }
            this.phone = phone;
            return this;
        }
        
        public Builder age(int age) {
            if (!ValidationUtils.isInRange(age, 0, 150)) {
                throw new IllegalArgumentException("å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´");
            }
            this.age = age;
            return this;
        }
        
        public Builder bio(String bio) {
            if (bio != null && bio.length() > 500) {
                throw new IllegalArgumentException("ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡500å­—");
            }
            this.bio = bio != null ? bio : "";
            return this;
        }
        
        public UserProfile build() {
            // æœ€ç»ˆæ ¡éªŒ
            validateFinalState();
            return new UserProfile(this);
        }
        
        private void validateFinalState() {
            // æ£€æŸ¥å¿…å¡«å­—æ®µ
            if (!ValidationUtils.isNotEmpty(username)) {
                throw new IllegalStateException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
            }
            if (!ValidationUtils.isNotEmpty(email)) {
                throw new IllegalStateException("é‚®ç®±ä¸èƒ½ä¸ºç©º");
            }
            
            // ä¸šåŠ¡é€»è¾‘æ ¡éªŒ
            if (age < 13 && ValidationUtils.isNotEmpty(phone)) {
                throw new IllegalStateException("13å²ä»¥ä¸‹ç”¨æˆ·ä¸èƒ½è®¾ç½®æ‰‹æœºå·");
            }
        }
    }
}
```

### 3.5 ä¼˜é›…çš„é”™è¯¯å¤„ç†


**è‡ªå®šä¹‰æ ¡éªŒå¼‚å¸¸**ï¼š

```java
// ä¸“é—¨çš„æ ¡éªŒå¼‚å¸¸
public class ValidationException extends RuntimeException {
    private final String field;
    private final Object value;
    
    public ValidationException(String field, Object value, String message) {
        super(String.format("å­—æ®µ '%s' çš„å€¼ '%s' ä¸åˆæ³•: %s", field, value, message));
        this.field = field;
        this.value = value;
    }
    
    public String getField() { return field; }
    public Object getValue() { return value; }
}

// åœ¨Builderä¸­ä½¿ç”¨
public Builder email(String email) {
    if (!ValidationUtils.isValidEmail(email)) {
        throw new ValidationException("email", email, "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
    }
    this.email = email;
    return this;
}
```

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼šç«‹å³æ ¡éªŒï¼ˆè®¾ç½®æ—¶å°±æ£€æŸ¥ï¼‰+ æœ€ç»ˆæ ¡éªŒï¼ˆbuildæ—¶å†æ£€æŸ¥ä¸€éï¼‰

---

## 4. ğŸ”§ é»˜è®¤å€¼å¤„ç†ç­–ç•¥


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦é»˜è®¤å€¼


**é€šä¿—ç†è§£**ï¼šå°±åƒä¹°è½¦æ—¶ï¼Œå¾ˆå¤šé…ç½®éƒ½æœ‰å‡ºå‚é»˜è®¤è®¾ç½®ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©ä¿æŒé»˜è®¤æˆ–è€…è‡ªå®šä¹‰ä¿®æ”¹ã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
æ‰‹æœºè®¾ç½®ï¼š
ğŸ“± é»˜è®¤é“ƒå£°ï¼šç³»ç»Ÿé“ƒå£°
ğŸ“± é»˜è®¤å£çº¸ï¼šå®˜æ–¹å£çº¸
ğŸ“± é»˜è®¤è¯­è¨€ï¼šä¸­æ–‡
ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼

è½¯ä»¶é…ç½®ï¼š
âš™ï¸ é»˜è®¤ç«¯å£ï¼š8080
âš™ï¸ é»˜è®¤è¶…æ—¶æ—¶é—´ï¼š30ç§’
âš™ï¸ é»˜è®¤æ—¥å¿—çº§åˆ«ï¼šINFO
```

### 4.2 é»˜è®¤å€¼çš„è®¾è®¡ç­–ç•¥


**ğŸ“‹ é»˜è®¤å€¼è®¾è®¡åŸåˆ™**

```
ğŸ¯ åˆç†æ€§åŸåˆ™ï¼š
- é€‰æ‹©æœ€å¸¸ç”¨çš„å€¼ä½œä¸ºé»˜è®¤å€¼
- é»˜è®¤å€¼åº”è¯¥æ˜¯å®‰å…¨çš„ã€æ— å®³çš„

ğŸ“Š ä¸šåŠ¡åŸåˆ™ï¼š
- è€ƒè™‘å¤§å¤šæ•°ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯
- é»˜è®¤å€¼åº”è¯¥ç¬¦åˆä¸šåŠ¡é€»è¾‘

ğŸ”’ å®‰å…¨åŸåˆ™ï¼š
- é»˜è®¤å€¼ä¸åº”è¯¥é€ æˆå®‰å…¨é£é™©
- æ•æ„Ÿé…ç½®ä¸è®¾é»˜è®¤å€¼ï¼Œå¼ºåˆ¶ç”¨æˆ·è®¾ç½®
```

### 4.3 é»˜è®¤å€¼çš„å®ç°æ–¹å¼


**æ–¹å¼ä¸€ï¼šå­—æ®µç›´æ¥åˆå§‹åŒ–**

```java
public class ServerConfig {
    private final String host;
    private final int port;
    private final int timeout;
    private final String logLevel;
    private final boolean enableSsl;
    
    public static class Builder {
        // ğŸ”‘ ç›´æ¥åœ¨å­—æ®µå£°æ˜æ—¶è®¾ç½®é»˜è®¤å€¼
        private String host = "localhost";           // é»˜è®¤æœ¬åœ°ä¸»æœº
        private int port = 8080;                    // é»˜è®¤ç«¯å£
        private int timeout = 30000;                // é»˜è®¤30ç§’è¶…æ—¶
        private String logLevel = "INFO";           // é»˜è®¤æ—¥å¿—çº§åˆ«
        private boolean enableSsl = false;          // é»˜è®¤ä¸å¯ç”¨SSL
        
        // ç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§è¦†ç›–é»˜è®¤å€¼
        public Builder host(String host) {
            this.host = host;
            return this;
        }
        
        public Builder port(int port) {
            this.port = port;
            return this;
        }
        
        public Builder timeout(int timeout) {
            this.timeout = timeout;
            return this;
        }
        
        public Builder logLevel(String logLevel) {
            this.logLevel = logLevel;
            return this;
        }
        
        public Builder enableSsl(boolean enableSsl) {
            this.enableSsl = enableSsl;
            return this;
        }
        
        public ServerConfig build() {
            return new ServerConfig(this);
        }
    }
}

// ä½¿ç”¨æ•ˆæœ
ServerConfig config1 = new ServerConfig.Builder()
    .host("192.168.1.100")     // åªä¿®æ”¹ä¸»æœºï¼Œå…¶ä»–ç”¨é»˜è®¤å€¼
    .build();

ServerConfig config2 = new ServerConfig.Builder()
    .build();                  // å…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼
```

**æ–¹å¼äºŒï¼šå¸¸é‡å®šä¹‰é»˜è®¤å€¼**

```java
public class DatabaseConfig {
    // ğŸ”¸ é›†ä¸­å®šä¹‰é»˜è®¤å€¼å¸¸é‡
    private static final String DEFAULT_HOST = "localhost";
    private static final int DEFAULT_PORT = 3306;
    private static final int DEFAULT_MAX_CONNECTIONS = 10;
    private static final int DEFAULT_TIMEOUT = 5000;
    private static final String DEFAULT_CHARSET = "UTF-8";
    
    private final String host;
    private final int port;
    private final int maxConnections;
    private final int timeout;
    private final String charset;
    
    public static class Builder {
        private String host = DEFAULT_HOST;
        private int port = DEFAULT_PORT;
        private int maxConnections = DEFAULT_MAX_CONNECTIONS;
        private int timeout = DEFAULT_TIMEOUT;
        private String charset = DEFAULT_CHARSET;
        
        public Builder host(String host) {
            this.host = host != null ? host : DEFAULT_HOST;
            return this;
        }
        
        public Builder port(int port) {
            this.port = port > 0 ? port : DEFAULT_PORT;
            return this;
        }
        
        public Builder maxConnections(int maxConnections) {
            this.maxConnections = maxConnections > 0 ? maxConnections : DEFAULT_MAX_CONNECTIONS;
            return this;
        }
        
        // ğŸ¯ é‡ç½®ä¸ºé»˜è®¤å€¼çš„æ–¹æ³•
        public Builder resetToDefaults() {
            this.host = DEFAULT_HOST;
            this.port = DEFAULT_PORT;
            this.maxConnections = DEFAULT_MAX_CONNECTIONS;
            this.timeout = DEFAULT_TIMEOUT;
            this.charset = DEFAULT_CHARSET;
            return this;
        }
        
        public DatabaseConfig build() {
            return new DatabaseConfig(this);
        }
    }
}
```

### 4.4 æ™ºèƒ½é»˜è®¤å€¼å¤„ç†


**æ ¹æ®å…¶ä»–å‚æ•°åŠ¨æ€è®¡ç®—é»˜è®¤å€¼**ï¼š

```java
public class HttpClientConfig {
    private final String baseUrl;
    private final int timeout;
    private final int retryCount;
    private final String userAgent;
    
    public static class Builder {
        private String baseUrl;
        private Integer timeout;        // ä½¿ç”¨åŒ…è£…ç±»ï¼Œnullè¡¨ç¤ºæœªè®¾ç½®
        private Integer retryCount;
        private String userAgent;
        
        public Builder baseUrl(String baseUrl) {
            this.baseUrl = baseUrl;
            return this;
        }
        
        public Builder timeout(int timeout) {
            this.timeout = timeout;
            return this;
        }
        
        public Builder retryCount(int retryCount) {
            this.retryCount = retryCount;
            return this;
        }
        
        public Builder userAgent(String userAgent) {
            this.userAgent = userAgent;
            return this;
        }
        
        public HttpClientConfig build() {
            applySmartDefaults();  // åº”ç”¨æ™ºèƒ½é»˜è®¤å€¼
            return new HttpClientConfig(this);
        }
        
        private void applySmartDefaults() {
            // ğŸ§  æ™ºèƒ½é»˜è®¤å€¼é€»è¾‘
            
            // æ ¹æ®URLç±»å‹è®¾ç½®é»˜è®¤è¶…æ—¶æ—¶é—´
            if (timeout == null) {
                if (baseUrl != null && baseUrl.startsWith("https://")) {
                    timeout = 10000;  // HTTPSé»˜è®¤10ç§’
                } else {
                    timeout = 5000;   // HTTPé»˜è®¤5ç§’
                }
            }
            
            // æ ¹æ®è¶…æ—¶æ—¶é—´è®¾ç½®é‡è¯•æ¬¡æ•°
            if (retryCount == null) {
                retryCount = timeout > 5000 ? 3 : 1;  // è¶…æ—¶é•¿åˆ™å¤šé‡è¯•
            }
            
            // ç”Ÿæˆé»˜è®¤User-Agent
            if (userAgent == null) {
                userAgent = "MyApp/1.0 (Java/" + System.getProperty("java.version") + ")";
            }
        }
    }
}
```

### 4.5 é…ç½®æ–‡ä»¶é»˜è®¤å€¼


**ä»é…ç½®æ–‡ä»¶è¯»å–é»˜è®¤å€¼**ï¼š

```java
public class AppConfig {
    // ğŸ“„ ä»é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡è¯»å–é»˜è®¤å€¼
    private static final Properties DEFAULT_PROPS = loadDefaultProperties();
    
    private final String appName;
    private final String version;
    private final int port;
    
    private static Properties loadDefaultProperties() {
        Properties props = new Properties();
        try {
            // å°è¯•ä»å¤šä¸ªä½ç½®è¯»å–é…ç½®
            InputStream is = AppConfig.class.getResourceAsStream("/default.properties");
            if (is != null) {
                props.load(is);
            }
        } catch (Exception e) {
            // å¦‚æœè¯»å–å¤±è´¥ï¼Œä½¿ç”¨ç¡¬ç¼–ç é»˜è®¤å€¼
            props.setProperty("app.name", "MyApplication");
            props.setProperty("app.version", "1.0.0");
            props.setProperty("app.port", "8080");
        }
        return props;
    }
    
    public static class Builder {
        private String appName = DEFAULT_PROPS.getProperty("app.name", "Unknown");
        private String version = DEFAULT_PROPS.getProperty("app.version", "1.0.0");
        private int port = Integer.parseInt(DEFAULT_PROPS.getProperty("app.port", "8080"));
        
        public Builder appName(String appName) {
            this.appName = appName;
            return this;
        }
        
        public Builder version(String version) {
            this.version = version;
            return this;
        }
        
        public Builder port(int port) {
            this.port = port;
            return this;
        }
        
        public AppConfig build() {
            return new AppConfig(this);
        }
    }
}
```

> ğŸ’¡ **è®¾è®¡å»ºè®®**ï¼šç®€å•åœºæ™¯ç”¨å­—æ®µåˆå§‹åŒ–ï¼Œå¤æ‚åœºæ™¯ç”¨æ™ºèƒ½é»˜è®¤å€¼ï¼Œä¼ä¸šçº§åº”ç”¨è€ƒè™‘é…ç½®æ–‡ä»¶

---

## 5. ğŸ”’ ä¸å¯å˜å¯¹è±¡æ„å»ºæŠ€æœ¯


### 5.1 ä»€ä¹ˆæ˜¯ä¸å¯å˜å¯¹è±¡


**é€šä¿—ç†è§£**ï¼šå°±åƒèº«ä»½è¯ä¸€æ ·ï¼Œä¸€æ—¦åˆ¶ä½œå®Œæˆå°±ä¸èƒ½ä¿®æ”¹ï¼Œè¦æ”¹åªèƒ½é‡æ–°åŠä¸€å¼ ã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
ğŸ†” èº«ä»½è¯ï¼šä¸€æ—¦åˆ¶ä½œå®Œæˆï¼Œä¿¡æ¯ä¸èƒ½ä¿®æ”¹
ğŸ« ç«è½¦ç¥¨ï¼šæ‰“å°åï¼Œè½¦æ¬¡æ—¶é—´åº§ä½å·éƒ½ä¸èƒ½æ”¹
ğŸ“œ è¯ä¹¦ï¼šé¢å‘åï¼Œå†…å®¹å°±å›ºå®šäº†

ç¨‹åºä¸­çš„ä¸å¯å˜å¯¹è±¡ï¼š
âœ… åˆ›å»ºåçŠ¶æ€ä¸èƒ½æ”¹å˜
âœ… æ²¡æœ‰setteræ–¹æ³•
âœ… æ‰€æœ‰å­—æ®µéƒ½æ˜¯final
âœ… çº¿ç¨‹å®‰å…¨ï¼Œæ— éœ€åŒæ­¥
```

### 5.2 ä¸ºä»€ä¹ˆéœ€è¦ä¸å¯å˜å¯¹è±¡


**ğŸ“Š ä¸å¯å˜å¯¹è±¡çš„ä¼˜åŠ¿**

| ä¼˜åŠ¿ | **è¯´æ˜** | **å®é™…å¥½å¤„** |
|------|---------|-------------|
| ğŸ”’ **çº¿ç¨‹å®‰å…¨** | `å¤šçº¿ç¨‹è®¿é—®æ— éœ€åŒæ­¥` | `é¿å…å¹¶å‘é—®é¢˜ï¼Œæé«˜æ€§èƒ½` |
| ğŸ›¡ï¸ **é˜²æ­¢æ„å¤–ä¿®æ”¹** | `å¯¹è±¡çŠ¶æ€ä¸ä¼šè¢«æ„å¤–æ”¹å˜` | `å‡å°‘bugï¼Œä»£ç æ›´å¯é ` |
| ğŸ’¾ **ç¼“å­˜å‹å¥½** | `å¯ä»¥å®‰å…¨ç¼“å­˜å“ˆå¸Œå€¼ç­‰` | `æé«˜æ€§èƒ½ï¼Œå‡å°‘è®¡ç®—` |
| ğŸ”— **å®‰å…¨å…±äº«** | `å¯ä»¥å®‰å…¨åœ°ä¼ é€’å’Œå…±äº«` | `ç®€åŒ–ç¨‹åºè®¾è®¡` |

### 5.3 ä¼ ç»Ÿå¯å˜å¯¹è±¡çš„é—®é¢˜


```java
// âŒ ä¼ ç»Ÿå¯å˜å¯¹è±¡çš„é—®é¢˜
public class MutableUser {
    private String name;
    private String email;
    private List<String> roles;
    
    // æ„é€ å‡½æ•°
    public MutableUser(String name, String email) {
        this.name = name;
        this.email = email;
        this.roles = new ArrayList<>();
    }
    
    // setteræ–¹æ³• - é—®é¢˜æºå¤´ï¼
    public void setName(String name) { this.name = name; }
    public void setEmail(String email) { this.email = email; }
    public List<String> getRoles() { return roles; }  // æš´éœ²å†…éƒ¨çŠ¶æ€ï¼
}

// ä½¿ç”¨æ—¶çš„é—®é¢˜
MutableUser user = new MutableUser("å¼ ä¸‰", "zhang@email.com");

// é—®é¢˜1ï¼šå¯¹è±¡å¯èƒ½è¢«æ„å¤–ä¿®æ”¹
user.setName("æå››");  // å“å‘€ï¼Œä¸å°å¿ƒæ”¹äº†åå­—

// é—®é¢˜2ï¼šå†…éƒ¨çŠ¶æ€å¯èƒ½è¢«å¤–éƒ¨ä¿®æ”¹
List<String> roles = user.getRoles();
roles.add("admin");   // å¤–éƒ¨ä»£ç ä¿®æ”¹äº†å†…éƒ¨çŠ¶æ€ï¼

// é—®é¢˜3ï¼šå¤šçº¿ç¨‹ä¸å®‰å…¨
// çº¿ç¨‹Aåœ¨ä¿®æ”¹ï¼Œçº¿ç¨‹Båœ¨è¯»å–ï¼Œå¯èƒ½å‡ºç°ä¸ä¸€è‡´çš„çŠ¶æ€
```

### 5.4 ä¸å¯å˜å¯¹è±¡çš„æ­£ç¡®å®ç°


**åŸºç¡€ä¸å¯å˜å¯¹è±¡**ï¼š

```java
public final class ImmutableUser {  // ğŸ”‘ finalç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿
    private final String name;      // ğŸ”‘ finalå­—æ®µï¼Œä¸èƒ½è¢«ä¿®æ”¹
    private final String email;
    private final List<String> roles;
    
    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œåªèƒ½é€šè¿‡Builderåˆ›å»º
    private ImmutableUser(Builder builder) {
        this.name = builder.name;
        this.email = builder.email;
        // ğŸ”‘ é˜²å¾¡æ€§å¤åˆ¶ï¼Œåˆ›å»ºæ–°çš„ä¸å¯å˜åˆ—è¡¨
        this.roles = Collections.unmodifiableList(new ArrayList<>(builder.roles));
    }
    
    // åªæä¾›getteræ–¹æ³•ï¼Œæ²¡æœ‰setter
    public String getName() { return name; }
    public String getEmail() { return email; }
    public List<String> getRoles() { 
        return roles;  // è¿”å›ä¸å¯å˜è§†å›¾ï¼Œå¤–éƒ¨æ— æ³•ä¿®æ”¹
    }
    
    // ğŸ¯ å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œè¿”å›æ–°å¯¹è±¡
    public ImmutableUser withName(String newName) {
        return new Builder()
            .name(newName)
            .email(this.email)
            .roles(this.roles)
            .build();
    }
    
    public ImmutableUser withEmail(String newEmail) {
        return new Builder()
            .name(this.name)
            .email(newEmail)
            .roles(this.roles)
            .build();
    }
    
    public ImmutableUser addRole(String role) {
        List<String> newRoles = new ArrayList<>(this.roles);
        newRoles.add(role);
        return new Builder()
            .name(this.name)
            .email(this.email)
            .roles(newRoles)
            .build();
    }
    
    public static class Builder {
        private String name;
        private String email;
        private List<String> roles = new ArrayList<>();
        
        public Builder name(String name) {
            this.name = name;
            return this;
        }
        
        public Builder email(String email) {
            this.email = email;
            return this;
        }
        
        public Builder role(String role) {
            this.roles.add(role);
            return this;
        }
        
        public Builder roles(List<String> roles) {
            this.roles = new ArrayList<>(roles);  // é˜²å¾¡æ€§å¤åˆ¶
            return this;
        }
        
        public ImmutableUser build() {
            // éªŒè¯å¿…å¡«å­—æ®µ
            if (name == null || email == null) {
                throw new IllegalStateException("å§“åå’Œé‚®ç®±ä¸èƒ½ä¸ºç©º");
            }
            return new ImmutableUser(this);
        }
    }
    
    // é‡å†™equalså’ŒhashCodeï¼ˆä¸å¯å˜å¯¹è±¡çš„æ ‡å‡†åšæ³•ï¼‰
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        
        ImmutableUser that = (ImmutableUser) obj;
        return Objects.equals(name, that.name) &&
               Objects.equals(email, that.email) &&
               Objects.equals(roles, that.roles);
    }
    
    @Override
    public int hashCode() {
        return Objects.hash(name, email, roles);
    }
    
    @Override
    public String toString() {
        return String.format("User{name='%s', email='%s', roles=%s}", 
                           name, email, roles);
    }
}
```

### 5.5 æ·±åº¦ä¸å¯å˜å¯¹è±¡


**å¤„ç†å¤æ‚åµŒå¥—å¯¹è±¡**ï¼š

```java
// ä¸å¯å˜çš„åœ°å€å¯¹è±¡
public final class ImmutableAddress {
    private final String street;
    private final String city;
    private final String zipCode;
    
    private ImmutableAddress(Builder builder) {
        this.street = builder.street;
        this.city = builder.city;
        this.zipCode = builder.zipCode;
    }
    
    // getteræ–¹æ³•...
    public String getStreet() { return street; }
    public String getCity() { return city; }
    public String getZipCode() { return zipCode; }
    
    public static class Builder {
        private String street;
        private String city;
        private String zipCode;
        
        public Builder street(String street) { this.street = street; return this; }
        public Builder city(String city) { this.city = city; return this; }
        public Builder zipCode(String zipCode) { this.zipCode = zipCode; return this; }
        
        public ImmutableAddress build() {
            return new ImmutableAddress(this);
        }
    }
}

// åŒ…å«å¤æ‚å¯¹è±¡çš„ä¸å¯å˜ç±»
public final class ImmutablePerson {
    private final String name;
    private final ImmutableAddress address;          // åµŒå¥—ä¸å¯å˜å¯¹è±¡
    private final List<ImmutableAddress> workPlaces; // ä¸å¯å˜å¯¹è±¡åˆ—è¡¨
    
    private ImmutablePerson(Builder builder) {
        this.name = builder.name;
        this.address = builder.address;
        // ğŸ”‘ æ·±åº¦å¤åˆ¶ï¼šç¡®ä¿åµŒå¥—å¯¹è±¡ä¹Ÿæ˜¯ä¸å¯å˜çš„
        this.workPlaces = Collections.unmodifiableList(
            new ArrayList<>(builder.workPlaces)
        );
    }
    
    public String getName() { return name; }
    public ImmutableAddress getAddress() { return address; }
    public List<ImmutableAddress> getWorkPlaces() { return workPlaces; }
    
    // ğŸ¯ ä¿®æ”¹åµŒå¥—å¯¹è±¡æ—¶è¿”å›æ–°å®ä¾‹
    public ImmutablePerson withAddress(ImmutableAddress newAddress) {
        return new Builder()
            .name(this.name)
            .address(newAddress)
            .workPlaces(this.workPlaces)
            .build();
    }
    
    public static class Builder {
        private String name;
        private ImmutableAddress address;
        private List<ImmutableAddress> workPlaces = new ArrayList<>();
        
        public Builder name(String name) {
            this.name = name;
            return this;
        }
        
        public Builder address(ImmutableAddress address) {
            this.address = address;
            return this;
        }
        
        public Builder addWorkPlace(ImmutableAddress workPlace) {
            this.workPlaces.add(workPlace);
            return this;
        }
        
        public Builder workPlaces(List<ImmutableAddress> workPlaces) {
            this.workPlaces = new ArrayList<>(workPlaces);
            return this;
        }
        
        public ImmutablePerson build() {
            return new ImmutablePerson(this);
        }
    }
}
```

### 5.6 ä½¿ç”¨æ•ˆæœå±•ç¤º


```java
public class ImmutableExample {
    public static void main(String[] args) {
        // åˆ›å»ºä¸å¯å˜ç”¨æˆ·
        ImmutableUser user = new ImmutableUser.Builder()
            .name("å¼ ä¸‰")
            .email("zhang@email.com")
            .role("user")
            .role("moderator")
            .build();
        
        System.out.println("åŸç”¨æˆ·: " + user);
        
        // âœ… è¦"ä¿®æ”¹"æ—¶ï¼Œè¿”å›æ–°å¯¹è±¡
        ImmutableUser adminUser = user.addRole("admin");
        
        System.out.println("åŸç”¨æˆ·: " + user);        // ä¸å˜ï¼
        System.out.println("æ–°ç”¨æˆ·: " + adminUser);   // æœ‰adminè§’è‰²
        
        // âœ… çº¿ç¨‹å®‰å…¨ - å¯ä»¥å®‰å…¨åœ°åœ¨å¤šçº¿ç¨‹é—´å…±äº«
        // ä¸éœ€è¦ä»»ä½•åŒæ­¥æœºåˆ¶
        
        // âœ… æ— æ³•æ„å¤–ä¿®æ”¹
        List<String> roles = user.getRoles();
        // roles.add("hacker");  // è¿è¡Œæ—¶å¼‚å¸¸ï¼æ— æ³•ä¿®æ”¹
    }
}
```

> ğŸ”’ **æ ¸å¿ƒè¦ç‚¹**ï¼šä¸å¯å˜å¯¹è±¡ = finalç±» + finalå­—æ®µ + é˜²å¾¡æ€§å¤åˆ¶ + æ— setter + æ–°å¯¹è±¡è¿”å›

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæŠ€å·§


```
ğŸ”¸ å¿…å¡«å‚æ•°éªŒè¯ï¼šåœ¨build()æ–¹æ³•ä¸­ä¸¥æ ¼æ£€æŸ¥ï¼Œç¡®ä¿å¯¹è±¡å®Œæ•´æ€§
ğŸ”¸ æ„å»ºæ­¥éª¤çº¦æŸï¼šé€šè¿‡æ¥å£é“¾æˆ–çŠ¶æ€æ ‡è®°æ§åˆ¶æ„å»ºé¡ºåº
ğŸ”¸ å‚æ•°æ ¡éªŒæœºåˆ¶ï¼šç«‹å³æ ¡éªŒ+æœ€ç»ˆæ ¡éªŒï¼Œå¿«é€Ÿå¤±è´¥åŸåˆ™
ğŸ”¸ é»˜è®¤å€¼å¤„ç†ï¼šåˆç†è®¾ç½®é»˜è®¤å€¼ï¼Œæä¾›æ™ºèƒ½é»˜è®¤é€»è¾‘
ğŸ”¸ ä¸å¯å˜å¯¹è±¡ï¼šfinal+é˜²å¾¡æ€§å¤åˆ¶ï¼Œçº¿ç¨‹å®‰å…¨ä¸”çŠ¶æ€ç¨³å®š
```

### 6.2 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ”¹ æŠ€å·§é€‰æ‹©åŸåˆ™**

```
å¿…å¡«éªŒè¯ï¼š
âœ… é€‚ç”¨ï¼šå…³é”®ä¸šåŠ¡å¯¹è±¡ï¼Œæ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜
âŒ é¿å…ï¼šç®€å•é…ç½®å¯¹è±¡ï¼Œè¿‡åº¦éªŒè¯

æ­¥éª¤çº¦æŸï¼š
âœ… é€‚ç”¨ï¼šå¤æ‚æ„å»ºæµç¨‹ï¼Œé¡ºåºé‡è¦çš„åœºæ™¯
âŒ é¿å…ï¼šç®€å•å¯¹è±¡ï¼Œå¢åŠ ä¸å¿…è¦å¤æ‚æ€§

å‚æ•°æ ¡éªŒï¼š
âœ… é€‚ç”¨ï¼šç”¨æˆ·è¾“å…¥ï¼Œå¤–éƒ¨æ¥å£ï¼Œæ•°æ®å®‰å…¨è¦æ±‚é«˜
âŒ é¿å…ï¼šå†…éƒ¨ä½¿ç”¨ï¼Œä¿¡ä»»ç¯å¢ƒ

é»˜è®¤å€¼ï¼š
âœ… é€‚ç”¨ï¼šé…ç½®ç±»ï¼Œå¯é€‰å‚æ•°å¤šçš„åœºæ™¯
âŒ é¿å…ï¼šä¸šåŠ¡æ ¸å¿ƒå­—æ®µï¼Œå®‰å…¨æ•æ„Ÿå‚æ•°

ä¸å¯å˜å¯¹è±¡ï¼š
âœ… é€‚ç”¨ï¼šå€¼å¯¹è±¡ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒï¼Œç¼“å­˜å¯¹è±¡
âŒ é¿å…ï¼šé¢‘ç¹ä¿®æ”¹çš„å¯¹è±¡ï¼Œæ€§èƒ½æ•æ„Ÿåœºæ™¯
```

### 6.3 å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ


**âš ï¸ å¸¸è§é—®é¢˜**

```
éªŒè¯æ—¶æœºé—®é¢˜ï¼š
âŒ åªåœ¨build()æ—¶éªŒè¯ â†’ é”™è¯¯å‘ç°å¤ªæ™š
âœ… è®¾ç½®æ—¶ç«‹å³éªŒè¯ + build()æ—¶æœ€ç»ˆéªŒè¯

é»˜è®¤å€¼é™·é˜±ï¼š
âŒ æ•æ„Ÿä¿¡æ¯è®¾é»˜è®¤å€¼ â†’ å®‰å…¨é£é™©
âœ… åªä¸ºå®‰å…¨çš„é…ç½®é¡¹è®¾é»˜è®¤å€¼

ä¸å¯å˜å¯¹è±¡è¯¯åŒºï¼š
âŒ åªè®¾ç½®finalå­—æ®µ â†’ å¼•ç”¨ç±»å‹ä»å¯å˜
âœ… finalå­—æ®µ + é˜²å¾¡æ€§å¤åˆ¶ + ä¸å¯å˜è§†å›¾

æ€§èƒ½è€ƒè™‘ï¼š
âŒ è¿‡åº¦éªŒè¯å’Œå¤åˆ¶ â†’ æ€§èƒ½æŸå¤±
âœ… å¹³è¡¡å®‰å…¨æ€§å’Œæ€§èƒ½ï¼Œåˆç†ä½¿ç”¨
```

### 6.4 æœ€ä½³å®è·µæ€»ç»“


**ğŸ¯ å»ºé€ è€…æ¨¡å¼é«˜çº§ä½¿ç”¨æŒ‡å—**

```
è®¾è®¡é˜¶æ®µï¼š
1ï¸âƒ£ è¯†åˆ«å¿…å¡«å‚æ•°å’Œå¯é€‰å‚æ•°
2ï¸âƒ£ ç¡®å®šæ˜¯å¦éœ€è¦æ„å»ºæ­¥éª¤çº¦æŸ
3ï¸âƒ£ è®¾è®¡åˆç†çš„é»˜è®¤å€¼ç­–ç•¥
4ï¸âƒ£ å†³å®šæ˜¯å¦éœ€è¦ä¸å¯å˜å¯¹è±¡

å®ç°é˜¶æ®µï¼š
1ï¸âƒ£ å…ˆå®ç°åŸºç¡€å»ºé€ è€…
2ï¸âƒ£ æ·»åŠ å¿…è¦çš„éªŒè¯é€»è¾‘
3ï¸âƒ£ é›†æˆé»˜è®¤å€¼å¤„ç†
4ï¸âƒ£ è€ƒè™‘ä¸å¯å˜æ€§è¦æ±‚

æµ‹è¯•é˜¶æ®µï¼š
1ï¸âƒ£ æµ‹è¯•å„ç§æ— æ•ˆè¾“å…¥
2ï¸âƒ£ éªŒè¯é»˜è®¤å€¼è¡Œä¸º
3ï¸âƒ£ ç¡®è®¤ä¸å¯å˜æ€§
4ï¸âƒ£ æ€§èƒ½æµ‹è¯•
```

### 6.5 æŠ€æœ¯å‘å±•è¶‹åŠ¿


**ğŸš€ ç°ä»£å»ºé€ è€…æ¨¡å¼å‘å±•**

```
æ³¨è§£é©±åŠ¨ï¼š
- ä½¿ç”¨@Builderæ³¨è§£è‡ªåŠ¨ç”Ÿæˆ
- Lombokç­‰å·¥å…·ç®€åŒ–å¼€å‘

ç±»å‹å®‰å…¨ï¼š
- æ³›å‹çº¦æŸæé«˜ç±»å‹å®‰å…¨
- ç¼–è¯‘æœŸé”™è¯¯æ£€æµ‹

å‡½æ•°å¼ç¼–ç¨‹ï¼š
- Lambdaè¡¨è¾¾å¼å¢å¼ºçµæ´»æ€§
- æµå¼APIæå‡æ˜“ç”¨æ€§

IDEæ”¯æŒï¼š
- æ™ºèƒ½ä»£ç ç”Ÿæˆ
- é‡æ„å·¥å…·æ”¯æŒ
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- éªŒè¯å‚æ•°è¦åŠæ—¶ï¼Œé»˜è®¤å€¼è®¾è®¡è¦åˆç†
- æ„å»ºæ­¥éª¤æœ‰çº¦æŸï¼Œä¸å¯å˜æ€§ä¿å®‰å…¨
- å»ºé€ è€…æ¨¡å¼åŠŸèƒ½å¼ºï¼Œé«˜çº§æŠ€å·§åŠ©å¼€å‘