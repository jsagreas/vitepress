---
title: 3ã€èŒè´£é“¾æ¨¡å¼å®ç°æ–¹å¼
---
## ğŸ“š ç›®å½•

1. [å®ç°æ–¹å¼æ¦‚è¿°](#1-å®ç°æ–¹å¼æ¦‚è¿°)
2. [çº¯èŒè´£é“¾å®ç°](#2-çº¯èŒè´£é“¾å®ç°)
3. [ä¸çº¯èŒè´£é“¾å®ç°](#3-ä¸çº¯èŒè´£é“¾å®ç°)
4. [é“¾è¡¨ç»“æ„è®¾è®¡](#4-é“¾è¡¨ç»“æ„è®¾è®¡)
5. [é“¾çš„åŠ¨æ€æ„å»º](#5-é“¾çš„åŠ¨æ€æ„å»º)
6. [å¤„ç†å™¨æ³¨å†Œæœºåˆ¶](#6-å¤„ç†å™¨æ³¨å†Œæœºåˆ¶)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å®ç°æ–¹å¼æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯èŒè´£é“¾æ¨¡å¼å®ç°æ–¹å¼


**ğŸ”¸ ç”Ÿæ´»ä¸­çš„ä¾‹å­**
æƒ³è±¡ä¸€ä¸‹ä½ åœ¨å…¬å¸è¯·å‡çš„æµç¨‹ï¼š

```
ä½ çš„è¯·å‡ç”³è¯·
    â†“
ç›´å±é¢†å¯¼ï¼ˆ1å¤©å†…å‡æœŸï¼‰
    â†“ (è¶…å‡ºæƒé™)
éƒ¨é—¨ç»ç†ï¼ˆ3å¤©å†…å‡æœŸï¼‰
    â†“ (è¶…å‡ºæƒé™)  
æ€»ç›‘ï¼ˆ7å¤©å†…å‡æœŸï¼‰
    â†“ (è¶…å‡ºæƒé™)
HRæ€»ç›‘ï¼ˆä»»æ„å¤©æ•°ï¼‰
```

æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„**å¤„ç†æƒé™**ï¼Œå¦‚æœè¶…å‡ºäº†å°±ä¼ ç»™ä¸‹ä¸€ä¸ªäººã€‚è¿™å°±æ˜¯èŒè´£é“¾çš„æ ¸å¿ƒæ€æƒ³ï¼

### 1.2 å®ç°æ–¹å¼åˆ†ç±»


| å®ç°ç±»å‹ | **æ ¸å¿ƒç‰¹ç‚¹** | **ä½¿ç”¨åœºæ™¯** | **ä¼˜ç¼ºç‚¹** |
|---------|-------------|-------------|-----------|
| ğŸ”— **çº¯èŒè´£é“¾** | `åªæœ‰ä¸€ä¸ªå¤„ç†è€…å¤„ç†è¯·æ±‚` | `å®¡æ‰¹æµç¨‹ã€æƒé™éªŒè¯` | `é€»è¾‘æ¸…æ™°ï¼Œä½†å¯èƒ½æ— äººå¤„ç†` |
| ğŸ”€ **ä¸çº¯èŒè´£é“¾** | `å¤šä¸ªå¤„ç†è€…å¯ä»¥å¤„ç†åŒä¸€è¯·æ±‚` | `äº‹ä»¶å¤„ç†ã€æ—¥å¿—è®°å½•` | `çµæ´»ä½†å¤æ‚` |
| ğŸ“‹ **é“¾è¡¨ç»“æ„** | `å¤„ç†è€…é€šè¿‡é“¾è¡¨è¿æ¥` | `é™æ€å¤„ç†æµç¨‹` | `ç»“æ„ç®€å•ï¼Œä½†ä¸å¤Ÿçµæ´»` |
| ğŸ”§ **åŠ¨æ€æ„å»º** | `è¿è¡Œæ—¶åŠ¨æ€ç»„è£…é“¾æ¡` | `å¯é…ç½®çš„ä¸šåŠ¡æµç¨‹` | `çµæ´»ä½†å®ç°å¤æ‚` |
| ğŸ“ **æ³¨å†Œæœºåˆ¶** | `é€šè¿‡æ³¨å†Œä¸­å¿ƒç®¡ç†å¤„ç†è€…` | `æ’ä»¶ç³»ç»Ÿã€å¾®æœåŠ¡` | `è§£è€¦å¥½ï¼Œä½†éœ€è¦é¢å¤–ç®¡ç†` |

---

## 2. ğŸ”— çº¯èŒè´£é“¾å®ç°


### 2.1 çº¯èŒè´£é“¾çš„ç‰¹ç‚¹


**ğŸ¯ æ ¸å¿ƒåŸåˆ™**
- **å”¯ä¸€å¤„ç†è€…**ï¼šä¸€ä¸ªè¯·æ±‚åªèƒ½è¢«ä¸€ä¸ªå¤„ç†è€…å¤„ç†
- **é“¾å¼ä¼ é€’**ï¼šå¦‚æœå½“å‰å¤„ç†è€…æ— æ³•å¤„ç†ï¼Œä¼ ç»™ä¸‹ä¸€ä¸ª
- **æ˜ç¡®ç»ˆæ­¢**ï¼šè¦ä¹ˆè¢«å¤„ç†ï¼Œè¦ä¹ˆåˆ°é“¾å°¾ç»“æŸ

**ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**
å°±åƒåŒ»é™¢çœ‹ç—…æŒ‚å·ï¼š
- æŒ‚é”™ç§‘å®¤ â†’ è½¬åˆ°æ­£ç¡®ç§‘å®¤  
- æ‰¾åˆ°å¯¹çš„åŒ»ç”Ÿ â†’ ç›´æ¥çœ‹ç—…
- æ²¡æœ‰åŒ»ç”Ÿèƒ½çœ‹ â†’ è½¬åˆ°å¤§åŒ»é™¢

### 2.2 åŸºç¡€å®ç°ç»“æ„


```java
// æŠ½è±¡å¤„ç†è€… - æ‰€æœ‰å¤„ç†è€…çš„åŸºç±»
public abstract class Handler {
    protected Handler nextHandler;  // ä¸‹ä¸€ä¸ªå¤„ç†è€…
    
    // è®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†è€…
    public void setNextHandler(Handler nextHandler) {
        this.nextHandler = nextHandler;
    }
    
    // å¤„ç†è¯·æ±‚çš„æ¨¡æ¿æ–¹æ³•
    public final void handleRequest(Request request) {
        if (canHandle(request)) {
            doHandle(request);  // è‡ªå·±å¤„ç†
        } else if (nextHandler != null) {
            nextHandler.handleRequest(request);  // ä¼ ç»™ä¸‹ä¸€ä¸ª
        } else {
            System.out.println("æ²¡æœ‰å¤„ç†è€…èƒ½å¤Ÿå¤„ç†è¯¥è¯·æ±‚");
        }
    }
    
    // åˆ¤æ–­æ˜¯å¦èƒ½å¤„ç†ï¼ˆå­ç±»å®ç°ï¼‰
    protected abstract boolean canHandle(Request request);
    
    // å…·ä½“å¤„ç†é€»è¾‘ï¼ˆå­ç±»å®ç°ï¼‰
    protected abstract void doHandle(Request request);
}
```

### 2.3 å®é™…åº”ç”¨ç¤ºä¾‹ï¼šè¯·å‡å®¡æ‰¹ç³»ç»Ÿ


**ğŸ¢ è¯·å‡å®¡æ‰¹çš„å¤„ç†æµç¨‹**

```
è¯·å‡ç”³è¯·å¤„ç†é“¾ï¼š
ç»„é•¿ â†’ ç»ç† â†’ æ€»ç›‘ â†’ CEO
(1å¤©) (3å¤©) (7å¤©) (æ— é™åˆ¶)
```

**å…·ä½“å®ç°ä»£ç ï¼š**

```java
// è¯·å‡ç”³è¯·å®ä½“
class LeaveRequest {
    private String employeeName;
    private int days;
    private String reason;
    
    public LeaveRequest(String name, int days, String reason) {
        this.employeeName = name;
        this.days = days;
        this.reason = reason;
    }
    
    // getteræ–¹æ³•çœç•¥...
}

// ç»„é•¿å¤„ç†è€…
class TeamLeader extends Handler {
    @Override
    protected boolean canHandle(Request request) {
        LeaveRequest leave = (LeaveRequest) request;
        return leave.getDays() <= 1;  // åªèƒ½æ‰¹1å¤©å‡
    }
    
    @Override
    protected void doHandle(Request request) {
        LeaveRequest leave = (LeaveRequest) request;
        System.out.println("ç»„é•¿æ‰¹å‡†äº†" + leave.getEmployeeName() 
                         + "çš„" + leave.getDays() + "å¤©å‡æœŸ");
    }
}

// ç»ç†å¤„ç†è€…
class Manager extends Handler {
    @Override
    protected boolean canHandle(Request request) {
        LeaveRequest leave = (LeaveRequest) request;
        return leave.getDays() <= 3;  // èƒ½æ‰¹3å¤©å‡
    }
    
    @Override
    protected void doHandle(Request request) {
        LeaveRequest leave = (LeaveRequest) request;
        System.out.println("ç»ç†æ‰¹å‡†äº†" + leave.getEmployeeName() 
                         + "çš„" + leave.getDays() + "å¤©å‡æœŸ");
    }
}
```

**ğŸ”§ ä½¿ç”¨ç¤ºä¾‹ï¼š**

```java
public class ChainTest {
    public static void main(String[] args) {
        // æ„å»ºå®¡æ‰¹é“¾
        Handler teamLeader = new TeamLeader();
        Handler manager = new Manager();
        Handler director = new Director();
        
        teamLeader.setNextHandler(manager);
        manager.setNextHandler(director);
        
        // æµ‹è¯•ä¸åŒçš„è¯·å‡ç”³è¯·
        LeaveRequest request1 = new LeaveRequest("å¼ ä¸‰", 1, "æ„Ÿå†’");
        LeaveRequest request2 = new LeaveRequest("æå››", 5, "æ—…æ¸¸");
        
        teamLeader.handleRequest(request1);  // ç»„é•¿å¤„ç†
        teamLeader.handleRequest(request2);  // ä¼ åˆ°æ€»ç›‘å¤„ç†
    }
}
```

### 2.4 çº¯èŒè´£é“¾çš„ä¼˜ç¼ºç‚¹


**âœ… ä¼˜ç‚¹**
- **é€»è¾‘æ¸…æ™°**ï¼šæ¯ä¸ªè¯·æ±‚åªæœ‰ä¸€ä¸ªå¤„ç†ç»“æœ
- **èŒè´£æ˜ç¡®**ï¼šæ¯ä¸ªå¤„ç†è€…æƒè´£åˆ†æ˜
- **æ˜“äºç†è§£**ï¼šç¬¦åˆç°å®ä¸–ç•Œçš„å¤„ç†æµç¨‹

**âŒ ç¼ºç‚¹**
- **å¯èƒ½æ— æ³•å¤„ç†**ï¼šå¦‚æœæ‰€æœ‰å¤„ç†è€…éƒ½æ— æ³•å¤„ç†è¯·æ±‚
- **å¤„ç†é¡ºåºé‡è¦**ï¼šé“¾çš„é¡ºåºå½±å“å¤„ç†ç»“æœ
- **çµæ´»æ€§æœ‰é™**ï¼šä¸èƒ½åŒæ—¶è®©å¤šä¸ªå¤„ç†è€…å‚ä¸

---

## 3. ğŸ”€ ä¸çº¯èŒè´£é“¾å®ç°


### 3.1 ä¸çº¯èŒè´£é“¾çš„ç‰¹ç‚¹


**ğŸ¯ æ ¸å¿ƒç‰¹è‰²**
- **å¤šé‡å¤„ç†**ï¼šä¸€ä¸ªè¯·æ±‚å¯ä»¥è¢«å¤šä¸ªå¤„ç†è€…å¤„ç†
- **ä¸ä¸­æ–­ä¼ é€’**ï¼šå¤„ç†å®Œæ¯•åç»§ç»­ä¼ ç»™ä¸‹ä¸€ä¸ª
- **ç´¯ç§¯æ•ˆæœ**ï¼šå¤šä¸ªå¤„ç†è€…çš„ç»“æœå¯ä»¥ç´¯ç§¯

**ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**
å°±åƒä¸€ä¸ªåŒ…è£¹çš„é…é€æµç¨‹ï¼š
- æ‰“åŒ…å‘˜ï¼šåŒ…è£…å•†å“ âœ“
- è´¨æ£€å‘˜ï¼šæ£€æŸ¥åŒ…è£… âœ“  
- å¿«é€’å‘˜ï¼šé…é€åŒ…è£¹ âœ“
- æ¯ä¸ªäººéƒ½å¤„ç†ï¼Œä½†ä¸å½±å“ä¸‹ä¸€ä¸ªäººçš„å·¥ä½œ

### 3.2 ä¸çº¯èŒè´£é“¾å®ç°


```java
// ä¸çº¯èŒè´£é“¾çš„æŠ½è±¡å¤„ç†è€…
public abstract class ImpureHandler {
    protected ImpureHandler nextHandler;
    
    public void setNextHandler(ImpureHandler nextHandler) {
        this.nextHandler = nextHandler;
    }
    
    // å¤„ç†è¯·æ±‚ï¼ˆä¸é˜»æ–­ä¼ é€’ï¼‰
    public final void handleRequest(Request request) {
        // å…ˆå¤„ç†è‡ªå·±çš„é€»è¾‘
        if (canHandle(request)) {
            doHandle(request);
        }
        
        // ç»§ç»­ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†è€…
        if (nextHandler != null) {
            nextHandler.handleRequest(request);
        }
    }
    
    protected abstract boolean canHandle(Request request);
    protected abstract void doHandle(Request request);
}
```

### 3.3 å®é™…åº”ç”¨ç¤ºä¾‹ï¼šWebè¯·æ±‚å¤„ç†


**ğŸŒ Webè¯·æ±‚çš„å¤„ç†æµç¨‹**

```
HTTPè¯·æ±‚å¤„ç†é“¾ï¼š
èº«ä»½éªŒè¯ â†’ æƒé™æ£€æŸ¥ â†’ æ—¥å¿—è®°å½• â†’ ä¸šåŠ¡å¤„ç†
    â†“           â†“           â†“           â†“
  éªŒè¯é€šè¿‡    æƒé™éªŒè¯    è®°å½•è®¿é—®     å¤„ç†è¯·æ±‚
```

**å…·ä½“å®ç°ï¼š**

```java
// Webè¯·æ±‚å®ä½“
class WebRequest {
    private String url;
    private String token;
    private String userRole;
    
    // æ„é€ æ–¹æ³•å’Œgetterçœç•¥...
}

// èº«ä»½éªŒè¯å¤„ç†è€…
class AuthenticationHandler extends ImpureHandler {
    @Override
    protected boolean canHandle(Request request) {
        WebRequest webReq = (WebRequest) request;
        return webReq.getToken() != null;
    }
    
    @Override
    protected void doHandle(Request request) {
        System.out.println("âœ… èº«ä»½éªŒè¯é€šè¿‡");
    }
}

// æƒé™æ£€æŸ¥å¤„ç†è€…
class AuthorizationHandler extends ImpureHandler {
    @Override
    protected boolean canHandle(Request request) {
        WebRequest webReq = (WebRequest) request;
        return "admin".equals(webReq.getUserRole());
    }
    
    @Override
    protected void doHandle(Request request) {
        System.out.println("âœ… æƒé™æ£€æŸ¥é€šè¿‡");
    }
}

// æ—¥å¿—è®°å½•å¤„ç†è€…
class LoggingHandler extends ImpureHandler {
    @Override
    protected boolean canHandle(Request request) {
        return true;  // æ€»æ˜¯è®°å½•æ—¥å¿—
    }
    
    @Override
    protected void doHandle(Request request) {
        WebRequest webReq = (WebRequest) request;
        System.out.println("ğŸ“ è®°å½•è®¿é—®: " + webReq.getUrl());
    }
}
```

### 3.4 ä¸çº¯èŒè´£é“¾çš„åº”ç”¨åœºæ™¯


**ğŸ¯ é€‚ç”¨åœºæ™¯**
- **è¿‡æ»¤å™¨é“¾**ï¼šWebè¿‡æ»¤å™¨ã€æ‹¦æˆªå™¨
- **äº‹ä»¶å¤„ç†**ï¼šGUIäº‹ä»¶ã€ç³»ç»Ÿäº‹ä»¶
- **æ•°æ®å¤„ç†ç®¡é“**ï¼šETLæ•°æ®å¤„ç†æµç¨‹
- **ä¸­é—´ä»¶æ¨¡å¼**ï¼šæ¶ˆæ¯ä¸­é—´ä»¶ã€ç¼“å­˜ä¸­é—´ä»¶

---

## 4. ğŸ“‹ é“¾è¡¨ç»“æ„è®¾è®¡


### 4.1 å•å‘é“¾è¡¨ç»“æ„


**ğŸ”— é“¾è¡¨ç»“æ„ç¤ºæ„å›¾**

```
å¤„ç†è€…1 â†’ å¤„ç†è€…2 â†’ å¤„ç†è€…3 â†’ å¤„ç†è€…4 â†’ null
   â†“         â†“         â†“         â†“
handle()  handle()  handle()  handle()
```

**åŸºç¡€é“¾è¡¨å®ç°ï¼š**

```java
// é“¾è¡¨èŠ‚ç‚¹å½¢å¼çš„å¤„ç†è€…
public class LinkedHandler {
    private String name;
    private LinkedHandler next;
    private int level;  // å¤„ç†çº§åˆ«
    
    public LinkedHandler(String name, int level) {
        this.name = name;
        this.level = level;
    }
    
    // æ·»åŠ ä¸‹ä¸€ä¸ªå¤„ç†è€…
    public LinkedHandler setNext(LinkedHandler handler) {
        this.next = handler;
        return handler;  // æ”¯æŒé“¾å¼è°ƒç”¨
    }
    
    // å¤„ç†è¯·æ±‚
    public void handle(int requestLevel) {
        if (requestLevel <= this.level) {
            System.out.println(name + " å¤„ç†äº†çº§åˆ« " + requestLevel + " çš„è¯·æ±‚");
        } else if (next != null) {
            next.handle(requestLevel);
        } else {
            System.out.println("âš ï¸ æ²¡æœ‰åˆé€‚çš„å¤„ç†è€…");
        }
    }
}
```

### 4.2 åŒå‘é“¾è¡¨ç»“æ„


**ğŸ”„ åŒå‘é“¾è¡¨çš„ä¼˜åŠ¿**

```
null â† å¤„ç†è€…1 â‡„ å¤„ç†è€…2 â‡„ å¤„ç†è€…3 â‡„ å¤„ç†è€…4 â†’ null
```

- **å‰åéå†**ï¼šå¯ä»¥å‘å‰æˆ–å‘åä¼ é€’è¯·æ±‚
- **åŠ¨æ€æ’å…¥**ï¼šå®¹æ˜“åœ¨é“¾ä¸­æ’å…¥æ–°çš„å¤„ç†è€…
- **çµæ´»è°ƒæ•´**ï¼šå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´å¤„ç†é¡ºåº

```java
public class DoubleLinkedHandler {
    private String name;
    private DoubleLinkedHandler prev;
    private DoubleLinkedHandler next;
    
    // å‘å‰ä¼ é€’è¯·æ±‚
    public void handleForward(Request request) {
        if (canHandle(request)) {
            doHandle(request);
        } else if (next != null) {
            next.handleForward(request);
        }
    }
    
    // å‘åä¼ é€’è¯·æ±‚
    public void handleBackward(Request request) {
        if (canHandle(request)) {
            doHandle(request);
        } else if (prev != null) {
            prev.handleBackward(request);
        }
    }
}
```

### 4.3 ç¯å½¢é“¾è¡¨ç»“æ„


**â­• ç¯å½¢é“¾è¡¨çš„ç‰¹ç‚¹**

```
    å¤„ç†è€…1
   â†™     â†–
å¤„ç†è€…4   å¤„ç†è€…2
   â†–     â†™
    å¤„ç†è€…3
```

- **å¾ªç¯å¤„ç†**ï¼šè¯·æ±‚ä¼šåœ¨ç¯ä¸­å¾ªç¯ç›´åˆ°è¢«å¤„ç†
- **è´Ÿè½½å‡è¡¡**ï¼šå¯ä»¥å®ç°è½®è¯¢å¤„ç†
- **å®¹é”™æ€§å¼º**ï¼šå¦‚æœä¸€ä¸ªå¤„ç†è€…å¤±æ•ˆï¼Œè¯·æ±‚ä¼šç»§ç»­å¾ªç¯

---

## 5. ğŸ”§ é“¾çš„åŠ¨æ€æ„å»º


### 5.1 é“¾æ„å»ºå™¨æ¨¡å¼


**ğŸ—ï¸ ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ„å»ºèŒè´£é“¾**

```java
public class ChainBuilder {
    private Handler firstHandler;
    private Handler lastHandler;
    
    // æ·»åŠ å¤„ç†è€…
    public ChainBuilder addHandler(Handler handler) {
        if (firstHandler == null) {
            firstHandler = lastHandler = handler;
        } else {
            lastHandler.setNextHandler(handler);
            lastHandler = handler;
        }
        return this;  // æ”¯æŒé“¾å¼è°ƒç”¨
    }
    
    // æ„å»ºå®Œæˆï¼Œè¿”å›é“¾å¤´
    public Handler build() {
        return firstHandler;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
Handler chain = new ChainBuilder()
    .addHandler(new TeamLeader())
    .addHandler(new Manager())
    .addHandler(new Director())
    .addHandler(new CEO())
    .build();
```

### 5.2 é…ç½®é©±åŠ¨çš„é“¾æ„å»º


**âš™ï¸ é€šè¿‡é…ç½®æ–‡ä»¶åŠ¨æ€æ„å»ºé“¾**

```yaml
# chain-config.yml
handlers:
  - class: TeamLeader
    level: 1
    name: "ç»„é•¿"
  - class: Manager  
    level: 3
    name: "ç»ç†"
  - class: Director
    level: 7
    name: "æ€»ç›‘"
```

```java
public class ConfigurableChainBuilder {
    
    public Handler buildFromConfig(String configPath) {
        ChainConfig config = loadConfig(configPath);
        Handler firstHandler = null;
        Handler currentHandler = null;
        
        for (HandlerConfig hConfig : config.getHandlers()) {
            Handler handler = createHandler(hConfig);
            
            if (firstHandler == null) {
                firstHandler = currentHandler = handler;
            } else {
                currentHandler.setNextHandler(handler);
                currentHandler = handler;
            }
        }
        
        return firstHandler;
    }
    
    private Handler createHandler(HandlerConfig config) {
        // ä½¿ç”¨åå°„æˆ–å·¥å‚æ¨¡å¼åˆ›å»ºå¤„ç†è€…
        // è¿™é‡Œç®€åŒ–å¤„ç†
        switch (config.getClassName()) {
            case "TeamLeader": return new TeamLeader();
            case "Manager": return new Manager();
            default: throw new IllegalArgumentException("æœªçŸ¥å¤„ç†è€…ç±»å‹");
        }
    }
}
```

### 5.3 è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´


**ğŸ”„ è¿è¡Œæ—¶é“¾çš„è°ƒæ•´èƒ½åŠ›**

```java
public class DynamicChain {
    private List<Handler> handlers = new ArrayList<>();
    
    // æ·»åŠ å¤„ç†è€…
    public void addHandler(Handler handler) {
        handlers.add(handler);
        rebuildChain();
    }
    
    // ç§»é™¤å¤„ç†è€…
    public void removeHandler(Handler handler) {
        handlers.remove(handler);
        rebuildChain();
    }
    
    // é‡æ–°æ„å»ºé“¾
    private void rebuildChain() {
        for (int i = 0; i < handlers.size() - 1; i++) {
            handlers.get(i).setNextHandler(handlers.get(i + 1));
        }
        if (!handlers.isEmpty()) {
            handlers.get(handlers.size() - 1).setNextHandler(null);
        }
    }
    
    // å¤„ç†è¯·æ±‚
    public void handleRequest(Request request) {
        if (!handlers.isEmpty()) {
            handlers.get(0).handleRequest(request);
        }
    }
}
```

---

## 6. ğŸ“ å¤„ç†å™¨æ³¨å†Œæœºåˆ¶


### 6.1 æ³¨å†Œä¸­å¿ƒæ¨¡å¼


**ğŸª ç»Ÿä¸€çš„å¤„ç†å™¨æ³¨å†Œä¸­å¿ƒ**

```java
public class HandlerRegistry {
    private Map<String, Handler> handlers = new HashMap<>();
    private Map<String, List<String>> chains = new HashMap<>();
    
    // æ³¨å†Œå¤„ç†å™¨
    public void registerHandler(String name, Handler handler) {
        handlers.put(name, handler);
        System.out.println("ğŸ“ æ³¨å†Œå¤„ç†å™¨: " + name);
    }
    
    // å®šä¹‰å¤„ç†é“¾
    public void defineChain(String chainName, String... handlerNames) {
        chains.put(chainName, Arrays.asList(handlerNames));
        System.out.println("ğŸ”— å®šä¹‰å¤„ç†é“¾: " + chainName);
    }
    
    // è·å–å¤„ç†é“¾
    public Handler getChain(String chainName) {
        List<String> handlerNames = chains.get(chainName);
        if (handlerNames == null || handlerNames.isEmpty()) {
            return null;
        }
        
        Handler firstHandler = null;
        Handler currentHandler = null;
        
        for (String name : handlerNames) {
            Handler handler = handlers.get(name);
            if (handler != null) {
                if (firstHandler == null) {
                    firstHandler = currentHandler = handler;
                } else {
                    currentHandler.setNextHandler(handler);
                    currentHandler = handler;
                }
            }
        }
        
        return firstHandler;
    }
}
```

### 6.2 åŸºäºæ³¨è§£çš„è‡ªåŠ¨æ³¨å†Œ


**ğŸ·ï¸ ä½¿ç”¨æ³¨è§£ç®€åŒ–æ³¨å†Œè¿‡ç¨‹**

```java
// å¤„ç†å™¨æ³¨è§£
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface ChainHandler {
    String name();           // å¤„ç†å™¨åç§°
    int order() default 0;   // å¤„ç†é¡ºåº
    String[] chains() default {};  // æ‰€å±é“¾
}

// ä½¿ç”¨æ³¨è§£çš„å¤„ç†å™¨
@ChainHandler(name = "auth", order = 1, chains = {"web", "api"})
public class AuthenticationHandler extends Handler {
    // å¤„ç†å™¨å®ç°
}

// è‡ªåŠ¨æ³¨å†Œæ‰«æå™¨
public class AutoRegistryScanner {
    private HandlerRegistry registry;
    
    public void scanAndRegister(String packageName) {
        // ä½¿ç”¨åå°„æ‰«æåŒ…ä¸­çš„ç±»
        Set<Class<?>> classes = scanPackage(packageName);
        
        for (Class<?> clazz : classes) {
            ChainHandler annotation = clazz.getAnnotation(ChainHandler.class);
            if (annotation != null) {
                try {
                    Handler handler = (Handler) clazz.newInstance();
                    registry.registerHandler(annotation.name(), handler);
                    
                    // è‡ªåŠ¨åŠ å…¥æŒ‡å®šçš„é“¾
                    for (String chainName : annotation.chains()) {
                        addToChain(chainName, annotation.name(), annotation.order());
                    }
                } catch (Exception e) {
                    System.err.println("æ³¨å†Œå¤„ç†å™¨å¤±è´¥: " + clazz.getName());
                }
            }
        }
    }
}
```

### 6.3 æ’ä»¶å¼å¤„ç†å™¨åŠ è½½


**ğŸ”Œ æ”¯æŒæ’ä»¶åŒ–çš„å¤„ç†å™¨ç³»ç»Ÿ**

```
æ’ä»¶åŠ è½½æµç¨‹:
JARæ–‡ä»¶ â†’ ç±»åŠ è½½å™¨ â†’ æ³¨è§£æ‰«æ â†’ è‡ªåŠ¨æ³¨å†Œ â†’ é“¾æ„å»º
```

```java
public class PluginHandlerLoader {
    private HandlerRegistry registry;
    private List<URL> pluginUrls = new ArrayList<>();
    
    // åŠ è½½æ’ä»¶JAR
    public void loadPlugin(String jarPath) {
        try {
            URL jarUrl = new File(jarPath).toURI().toURL();
            pluginUrls.add(jarUrl);
            
            // åˆ›å»ºæ’ä»¶ç±»åŠ è½½å™¨
            URLClassLoader pluginLoader = new URLClassLoader(
                new URL[]{jarUrl}, 
                this.getClass().getClassLoader()
            );
            
            // æ‰«æå¹¶æ³¨å†Œæ’ä»¶ä¸­çš„å¤„ç†å™¨
            scanPluginHandlers(pluginLoader);
            
            System.out.println("ğŸ”Œ æ’ä»¶åŠ è½½æˆåŠŸ: " + jarPath);
        } catch (Exception e) {
            System.err.println("æ’ä»¶åŠ è½½å¤±è´¥: " + jarPath);
        }
    }
    
    private void scanPluginHandlers(ClassLoader loader) {
        // æ‰«ææ’ä»¶ä¸­çš„å¤„ç†å™¨ç±»å¹¶è‡ªåŠ¨æ³¨å†Œ
        // å®ç°ç»†èŠ‚çœç•¥...
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ çº¯èŒè´£é“¾ï¼šä¸€ä¸ªè¯·æ±‚åªè¢«ä¸€ä¸ªå¤„ç†è€…å¤„ç†ï¼Œç¬¦åˆä¼ ç»Ÿå®¡æ‰¹æµç¨‹
ğŸ”¸ ä¸çº¯èŒè´£é“¾ï¼šä¸€ä¸ªè¯·æ±‚å¯è¢«å¤šä¸ªå¤„ç†è€…å¤„ç†ï¼Œé€‚åˆç®¡é“å¼å¤„ç†
ğŸ”¸ é“¾è¡¨ç»“æ„ï¼šå¤„ç†è€…é€šè¿‡æŒ‡é’ˆè¿æ¥ï¼Œæ”¯æŒåŠ¨æ€è°ƒæ•´
ğŸ”¸ åŠ¨æ€æ„å»ºï¼šè¿è¡Œæ—¶æ ¹æ®é…ç½®æˆ–æ¡ä»¶æ„å»ºå¤„ç†é“¾
ğŸ”¸ æ³¨å†Œæœºåˆ¶ï¼šç»Ÿä¸€ç®¡ç†å¤„ç†å™¨ï¼Œæ”¯æŒæ’ä»¶åŒ–æ‰©å±•
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‰æ‹©å®ç°æ–¹å¼çš„åŸåˆ™**
```
ä¸šåŠ¡éœ€æ±‚å†³å®šå®ç°æ–¹å¼ï¼š
â€¢ ä¸¥æ ¼çš„å®¡æ‰¹æµç¨‹ â†’ çº¯èŒè´£é“¾
â€¢ æ•°æ®å¤„ç†ç®¡é“ â†’ ä¸çº¯èŒè´£é“¾  
â€¢ å›ºå®šçš„å¤„ç†æµç¨‹ â†’ é™æ€é“¾è¡¨
â€¢ çµæ´»çš„ä¸šåŠ¡é…ç½® â†’ åŠ¨æ€æ„å»º
â€¢ æ’ä»¶åŒ–ç³»ç»Ÿ â†’ æ³¨å†Œæœºåˆ¶
```

**ğŸ”¹ æ€§èƒ½è€ƒè™‘**
```
é“¾é•¿åº¦å½±å“æ€§èƒ½ï¼š
â€¢ çŸ­é“¾ï¼šæ€§èƒ½å¥½ï¼Œä½†åŠŸèƒ½æœ‰é™
â€¢ é•¿é“¾ï¼šåŠŸèƒ½å¼ºï¼Œä½†éå†å¼€é”€å¤§
â€¢ ä¼˜åŒ–ï¼šæ ¹æ®è¯·æ±‚ç±»å‹é¢„å…ˆåˆ†ç±»ï¼Œå‡å°‘éå†

ç¼“å­˜æœºåˆ¶ï¼š
â€¢ ç¼“å­˜æˆåŠŸçš„å¤„ç†è·¯å¾„
â€¢ é¿å…é‡å¤çš„é“¾æ„å»ºå¼€é”€
```

**ğŸ”¹ æ‰©å±•æ€§è®¾è®¡**
```
è‰¯å¥½çš„æ‰©å±•æ€§éœ€è¦ï¼š
â€¢ æ ‡å‡†çš„å¤„ç†å™¨æ¥å£
â€¢ çµæ´»çš„é“¾æ„å»ºæœºåˆ¶
â€¢ å®Œå–„çš„æ³¨å†Œå’Œå‘ç°æœºåˆ¶
â€¢ æ”¯æŒçƒ­æ’æ‹”çš„æ’ä»¶ç³»ç»Ÿ
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ æœ€ä½³å®è·µå»ºè®®**
- **æ¥å£è®¾è®¡**ï¼šå®šä¹‰æ¸…æ™°çš„å¤„ç†å™¨æ¥å£ï¼Œä¾¿äºæ‰©å±•
- **å¼‚å¸¸å¤„ç†**ï¼šæ¯ä¸ªå¤„ç†å™¨éƒ½è¦æœ‰å¼‚å¸¸å¤„ç†æœºåˆ¶
- **æ—¥å¿—è®°å½•**ï¼šè®°å½•è¯·æ±‚çš„å¤„ç†è·¯å¾„ï¼Œä¾¿äºè°ƒè¯•
- **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§é“¾çš„å¤„ç†æ—¶é—´å’ŒæˆåŠŸç‡
- **é…ç½®ç®¡ç†**ï¼šæ”¯æŒé…ç½®é©±åŠ¨çš„é“¾æ„å»ºå’Œè°ƒæ•´

**âš ï¸ å¸¸è§é™·é˜±**
- **é“¾è¿‡é•¿**ï¼šå¯¼è‡´æ€§èƒ½é—®é¢˜å’Œè°ƒè¯•å›°éš¾
- **å¾ªç¯å¼•ç”¨**ï¼šåœ¨åŠ¨æ€æ„å»ºæ—¶å¯èƒ½äº§ç”Ÿæ­»å¾ªç¯
- **å†…å­˜æ³„æ¼**ï¼šå¤„ç†å™¨æŒæœ‰å¤§å¯¹è±¡å¼•ç”¨ä¸é‡Šæ”¾
- **çº¿ç¨‹å®‰å…¨**ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„çŠ¶æ€ç®¡ç†é—®é¢˜

**æ ¸å¿ƒè®°å¿†**ï¼š
- èŒè´£é“¾æ¨¡å¼çš„å®ç°æ–¹å¼è¦æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚é€‰æ‹©
- çº¯é“¾é€‚åˆå®¡æ‰¹ï¼Œä¸çº¯é“¾é€‚åˆç®¡é“å¤„ç†
- åŠ¨æ€æ„å»ºå’Œæ³¨å†Œæœºåˆ¶æä¾›äº†æœ€å¤§çš„çµæ´»æ€§
- è‰¯å¥½çš„è®¾è®¡éœ€è¦å¹³è¡¡åŠŸèƒ½ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§