---
title: 4ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®é™…åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [æ•°æ®è®¿é—®æ¨¡æ¿](#1-æ•°æ®è®¿é—®æ¨¡æ¿)
2. [æµ‹è¯•æ¡†æ¶è®¾è®¡](#2-æµ‹è¯•æ¡†æ¶è®¾è®¡)
3. [ç®—æ³•æ¡†æ¶å®ç°](#3-ç®—æ³•æ¡†æ¶å®ç°)
4. [æŠ¥è¡¨ç”Ÿæˆæ¨¡æ¿](#4-æŠ¥è¡¨ç”Ÿæˆæ¨¡æ¿)
5. [Springæ¨¡æ¿ç±»](#5-Springæ¨¡æ¿ç±»)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ’¾ æ•°æ®è®¿é—®æ¨¡æ¿


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®è®¿é—®æ¨¡æ¿


**é€šä¿—ç†è§£**ï¼šå°±åƒå»é“¶è¡ŒåŠä¸šåŠ¡ï¼Œä¸ç®¡æ˜¯å­˜é’±ã€å–é’±è¿˜æ˜¯è½¬è´¦ï¼Œéƒ½è¦ç»è¿‡"å–å·â†’æ’é˜Ÿâ†’åŠç†â†’ç¡®è®¤"è¿™ä¸ªå›ºå®šæµç¨‹ï¼Œåªæ˜¯ä¸­é—´"åŠç†"çš„å…·ä½“å†…å®¹ä¸åŒã€‚

æ•°æ®è®¿é—®ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼š
```
è¿æ¥æ•°æ®åº“ â†’ æ‰§è¡Œæ“ä½œ â†’ å¤„ç†ç»“æœ â†’ å…³é—­è¿æ¥
```

è¿™ä¸ªæµç¨‹æ˜¯å›ºå®šçš„ï¼Œä½†"æ‰§è¡Œæ“ä½œ"è¿™ä¸€æ­¥æ¯æ¬¡éƒ½ä¸åŒã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®è®¿é—®æ¨¡æ¿


**ğŸ¤” æ²¡æœ‰æ¨¡æ¿çš„ç—›è‹¦**ï¼š
- æ¯æ¬¡å†™æ•°æ®åº“æ“ä½œéƒ½è¦é‡å¤å†™è¿æ¥ã€å…³é—­çš„ä»£ç 
- å®¹æ˜“å¿˜è®°å…³é—­è¿æ¥ï¼Œé€ æˆèµ„æºæ³„éœ²
- å¼‚å¸¸å¤„ç†ä»£ç åˆ°å¤„éƒ½æ˜¯ï¼Œå¾ˆæ··ä¹±

**âœ… æœ‰äº†æ¨¡æ¿çš„å¥½å¤„**ï¼š
- å›ºå®šæµç¨‹è‡ªåŠ¨å¤„ç†ï¼Œä½ åªéœ€è¦å…³å¿ƒä¸šåŠ¡é€»è¾‘
- ä¸ä¼šå¿˜è®°å…³é—­è¿æ¥ï¼Œæ¨¡æ¿å¸®ä½ å¤„ç†
- å¼‚å¸¸å¤„ç†ç»Ÿä¸€ç®¡ç†

### 1.3 æ•°æ®è®¿é—®æ¨¡æ¿å®ç°


```java
// æŠ½è±¡çš„æ•°æ®è®¿é—®æ¨¡æ¿
public abstract class DataAccessTemplate {
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰å›ºå®šçš„è®¿é—®æµç¨‹
    public final Object execute() {
        Connection conn = null;
        try {
            // æ­¥éª¤1ï¼šè·å–è¿æ¥
            conn = getConnection();
            
            // æ­¥éª¤2ï¼šæ‰§è¡Œå…·ä½“æ“ä½œï¼ˆç”±å­ç±»å®ç°ï¼‰
            Object result = doExecute(conn);
            
            // æ­¥éª¤3ï¼šæäº¤äº‹åŠ¡
            commit(conn);
            
            return result;
            
        } catch (Exception e) {
            // æ­¥éª¤4ï¼šå‡ºé”™æ—¶å›æ»š
            rollback(conn);
            throw new RuntimeException("æ•°æ®è®¿é—®å¤±è´¥", e);
        } finally {
            // æ­¥éª¤5ï¼šé‡Šæ”¾è¿æ¥
            closeConnection(conn);
        }
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼šå…·ä½“çš„æ•°æ®æ“ä½œç”±å­ç±»å®ç°
    protected abstract Object doExecute(Connection conn) throws Exception;
    
    // å…·ä½“æ–¹æ³•ï¼šé€šç”¨çš„è¿æ¥ç®¡ç†
    private Connection getConnection() {
        System.out.println("ğŸ“¡ è·å–æ•°æ®åº“è¿æ¥...");
        return DriverManager.getConnection("jdbc:mysql://...");
    }
    
    private void commit(Connection conn) {
        System.out.println("âœ… æäº¤äº‹åŠ¡");
        conn.commit();
    }
    
    private void rollback(Connection conn) {
        System.out.println("ğŸ”„ å›æ»šäº‹åŠ¡");
        conn.rollback();
    }
    
    private void closeConnection(Connection conn) {
        System.out.println("ğŸ” å…³é—­æ•°æ®åº“è¿æ¥");
        if (conn != null) conn.close();
    }
}
```

### 1.4 å…·ä½“åº”ç”¨ç¤ºä¾‹


```java
// ç”¨æˆ·æŸ¥è¯¢æ“ä½œ
public class UserQueryTemplate extends DataAccessTemplate {
    private String userId;
    
    public UserQueryTemplate(String userId) {
        this.userId = userId;
    }
    
    @Override
    protected Object doExecute(Connection conn) throws Exception {
        System.out.println("ğŸ” æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯: " + userId);
        PreparedStatement stmt = conn.prepareStatement(
            "SELECT * FROM users WHERE id = ?");
        stmt.setString(1, userId);
        ResultSet rs = stmt.executeQuery();
        
        // å¤„ç†æŸ¥è¯¢ç»“æœ
        if (rs.next()) {
            return new User(rs.getString("name"), rs.getString("email"));
        }
        return null;
    }
}

// è®¢å•æ’å…¥æ“ä½œ
public class OrderInsertTemplate extends DataAccessTemplate {
    private Order order;
    
    public OrderInsertTemplate(Order order) {
        this.order = order;
    }
    
    @Override
    protected Object doExecute(Connection conn) throws Exception {
        System.out.println("ğŸ“ æ’å…¥è®¢å•ä¿¡æ¯");
        PreparedStatement stmt = conn.prepareStatement(
            "INSERT INTO orders (user_id, amount) VALUES (?, ?)");
        stmt.setString(1, order.getUserId());
        stmt.setDouble(2, order.getAmount());
        
        int result = stmt.executeUpdate();
        return result > 0 ? "æ’å…¥æˆåŠŸ" : "æ’å…¥å¤±è´¥";
    }
}
```

### 1.5 ä½¿ç”¨æ•ˆæœå¯¹æ¯”


| ç‰¹æ€§ | **ä¼ ç»Ÿæ–¹å¼** | **æ¨¡æ¿æ–¹å¼** |
|------|-------------|-------------|
| **ä»£ç é‡å¤** | `æ¯æ¬¡éƒ½è¦å†™è¿æ¥/å…³é—­ä»£ç ` | `åªå†™ä¸šåŠ¡é€»è¾‘ï¼Œå…¶ä»–è‡ªåŠ¨å¤„ç†` |
| **é”™è¯¯å¤„ç†** | `å®¹æ˜“å¿˜è®°å¼‚å¸¸å¤„ç†` | `ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶` |
| **èµ„æºç®¡ç†** | `å¯èƒ½å¿˜è®°å…³é—­è¿æ¥` | `è‡ªåŠ¨å…³é—­ï¼Œä¸ä¼šæ³„éœ²` |
| **ä»£ç ç»´æŠ¤** | `ä¿®æ”¹è¿æ¥é€»è¾‘è¦æ”¹Nä¸ªåœ°æ–¹` | `åªéœ€ä¿®æ”¹æ¨¡æ¿ä¸€ä¸ªåœ°æ–¹` |

---

## 2. ğŸ§ª æµ‹è¯•æ¡†æ¶è®¾è®¡


### 2.1 æµ‹è¯•æ¡†æ¶çš„æœ¬è´¨


**ç”Ÿæ´»æ¯”å–»**ï¼šå°±åƒä½“æ£€æµç¨‹ï¼Œä¸ç®¡æ£€æŸ¥ä»€ä¹ˆé¡¹ç›®ï¼Œéƒ½æ˜¯"å‡†å¤‡â†’æ£€æŸ¥â†’è®°å½•ç»“æœâ†’æ¸…ç†"è¿™ä¸ªå›ºå®šæµç¨‹ï¼Œåªæ˜¯ä¸­é—´"æ£€æŸ¥"çš„å†…å®¹ä¸åŒã€‚

æµ‹è¯•ä¹Ÿä¸€æ ·ï¼š
```
æµ‹è¯•å‡†å¤‡ â†’ æ‰§è¡Œæµ‹è¯• â†’ éªŒè¯ç»“æœ â†’ æ¸…ç†èµ„æº
```

### 2.2 æµ‹è¯•æ¡†æ¶æ¨¡æ¿è®¾è®¡


```java
// æŠ½è±¡æµ‹è¯•æ¡†æ¶
public abstract class TestFramework {
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰æµ‹è¯•æ‰§è¡Œæµç¨‹
    public final TestResult runTest() {
        System.out.println("ğŸš€ å¼€å§‹æ‰§è¡Œæµ‹è¯•...");
        
        try {
            // æ­¥éª¤1ï¼šæµ‹è¯•å‰å‡†å¤‡
            setUp();
            
            // æ­¥éª¤2ï¼šæ‰§è¡Œå…·ä½“æµ‹è¯•ï¼ˆç”±å­ç±»å®ç°ï¼‰
            boolean testResult = executeTest();
            
            // æ­¥éª¤3ï¼šéªŒè¯ç»“æœ
            TestResult result = verifyResult(testResult);
            
            return result;
            
        } catch (Exception e) {
            return new TestResult(false, "æµ‹è¯•æ‰§è¡Œå¼‚å¸¸: " + e.getMessage());
        } finally {
            // æ­¥éª¤4ï¼šæ¸…ç†èµ„æº
            tearDown();
        }
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼šå…·ä½“æµ‹è¯•é€»è¾‘ç”±å­ç±»å®ç°
    protected abstract boolean executeTest() throws Exception;
    
    // é’©å­æ–¹æ³•ï¼šå¯é€‰çš„å‡†å¤‡å·¥ä½œ
    protected void setUp() {
        System.out.println("ğŸ”§ å‡†å¤‡æµ‹è¯•ç¯å¢ƒ...");
    }
    
    // é’©å­æ–¹æ³•ï¼šå¯é€‰çš„æ¸…ç†å·¥ä½œ
    protected void tearDown() {
        System.out.println("ğŸ§¹ æ¸…ç†æµ‹è¯•ç¯å¢ƒ...");
    }
    
    // å…·ä½“æ–¹æ³•ï¼šé€šç”¨çš„ç»“æœéªŒè¯
    private TestResult verifyResult(boolean success) {
        if (success) {
            System.out.println("âœ… æµ‹è¯•é€šè¿‡");
            return new TestResult(true, "æµ‹è¯•æˆåŠŸ");
        } else {
            System.out.println("âŒ æµ‹è¯•å¤±è´¥");
            return new TestResult(false, "æµ‹è¯•å¤±è´¥");
        }
    }
}
```

### 2.3 ä¸åŒç±»å‹æµ‹è¯•çš„å®ç°


```java
// å•å…ƒæµ‹è¯•
public class UnitTest extends TestFramework {
    private Calculator calculator;
    
    @Override
    protected void setUp() {
        super.setUp();
        calculator = new Calculator();
        System.out.println("ğŸ“± åˆ›å»ºè®¡ç®—å™¨å®ä¾‹");
    }
    
    @Override
    protected boolean executeTest() throws Exception {
        System.out.println("ğŸ§® æµ‹è¯•åŠ æ³•è¿ç®—");
        int result = calculator.add(2, 3);
        return result == 5; // éªŒè¯2+3=5
    }
}

// æ€§èƒ½æµ‹è¯•
public class PerformanceTest extends TestFramework {
    private long startTime;
    
    @Override
    protected void setUp() {
        super.setUp();
        startTime = System.currentTimeMillis();
        System.out.println("â±ï¸ è®°å½•å¼€å§‹æ—¶é—´");
    }
    
    @Override
    protected boolean executeTest() throws Exception {
        System.out.println("ğŸƒ æ‰§è¡Œæ€§èƒ½æµ‹è¯•...");
        
        // æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶æ“ä½œ
        for (int i = 0; i < 1000000; i++) {
            Math.sqrt(i);
        }
        
        long duration = System.currentTimeMillis() - startTime;
        System.out.println("â° æ‰§è¡Œæ—¶é—´: " + duration + "ms");
        
        return duration < 1000; // è¦æ±‚åœ¨1ç§’å†…å®Œæˆ
    }
}
```

### 2.4 æµ‹è¯•æ¡†æ¶çš„ä¼˜åŠ¿


**ğŸ¯ ç»Ÿä¸€ç®¡ç†**ï¼š
- æ‰€æœ‰æµ‹è¯•éƒ½éµå¾ªç›¸åŒçš„æ‰§è¡Œæµç¨‹
- èµ„æºç®¡ç†ï¼ˆsetUp/tearDownï¼‰è‡ªåŠ¨åŒ–
- å¼‚å¸¸å¤„ç†ç»Ÿä¸€å¤„ç†

**ğŸ“Š æ˜“äºæ‰©å±•**ï¼š
- æ–°å¢æµ‹è¯•ç±»å‹åªéœ€å®ç°executeTest()
- å¯ä»¥æ·»åŠ æ–°çš„é’©å­æ–¹æ³•
- æ”¯æŒæµ‹è¯•ç»“æœçš„ç»Ÿä¸€æ”¶é›†

---

## 3. ğŸ§® ç®—æ³•æ¡†æ¶å®ç°


### 3.1 æ’åºç®—æ³•æ¨¡æ¿


**æ ¸å¿ƒæ€æƒ³**ï¼šæ‰€æœ‰æ’åºç®—æ³•éƒ½æœ‰ç›¸åŒçš„åŸºæœ¬ç»“æ„ï¼Œåªæ˜¯å…·ä½“çš„æ’åºç­–ç•¥ä¸åŒã€‚

```
è¾“å…¥éªŒè¯ â†’ æ‰§è¡Œæ’åº â†’ è¾“å‡ºç»“æœ
```

```java
// æŠ½è±¡æ’åºç®—æ³•æ¨¡æ¿
public abstract class SortAlgorithm {
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰æ’åºæµç¨‹
    public final int[] sort(int[] array) {
        // æ­¥éª¤1ï¼šè¾“å…¥éªŒè¯
        if (!validateInput(array)) {
            throw new IllegalArgumentException("è¾“å…¥æ•°ç»„æ— æ•ˆ");
        }
        
        // æ­¥éª¤2ï¼šè®°å½•å¼€å§‹æ—¶é—´
        long startTime = System.currentTimeMillis();
        System.out.println("ğŸš€ å¼€å§‹" + getAlgorithmName() + "æ’åº...");
        
        // æ­¥éª¤3ï¼šæ‰§è¡Œå…·ä½“æ’åºç®—æ³•
        int[] result = doSort(array.clone());
        
        // æ­¥éª¤4ï¼šè®°å½•ç»“æŸæ—¶é—´å’Œç»Ÿè®¡ä¿¡æ¯
        long endTime = System.currentTimeMillis();
        System.out.println("âœ… " + getAlgorithmName() + "æ’åºå®Œæˆï¼Œè€—æ—¶: " + (endTime - startTime) + "ms");
        
        return result;
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼šå…·ä½“æ’åºç®—æ³•ç”±å­ç±»å®ç°
    protected abstract int[] doSort(int[] array);
    
    // æŠ½è±¡æ–¹æ³•ï¼šç®—æ³•åç§°
    protected abstract String getAlgorithmName();
    
    // å…·ä½“æ–¹æ³•ï¼šè¾“å…¥éªŒè¯
    private boolean validateInput(int[] array) {
        if (array == null || array.length == 0) {
            System.out.println("âŒ æ•°ç»„ä¸ºç©º");
            return false;
        }
        System.out.println("ğŸ“Š æ•°ç»„é•¿åº¦: " + array.length);
        return true;
    }
}
```

### 3.2 å…·ä½“æ’åºç®—æ³•å®ç°


```java
// å†’æ³¡æ’åº
public class BubbleSort extends SortAlgorithm {
    
    @Override
    protected String getAlgorithmName() {
        return "å†’æ³¡æ’åº";
    }
    
    @Override
    protected int[] doSort(int[] array) {
        System.out.println("ğŸ”„ ä½¿ç”¨å†’æ³¡æ’åºç­–ç•¥...");
        
        for (int i = 0; i < array.length - 1; i++) {
            for (int j = 0; j < array.length - 1 - i; j++) {
                if (array[j] > array[j + 1]) {
                    // äº¤æ¢å…ƒç´ 
                    int temp = array[j];
                    array[j] = array[j + 1];
                    array[j + 1] = temp;
                }
            }
        }
        return array;
    }
}

// å¿«é€Ÿæ’åº
public class QuickSort extends SortAlgorithm {
    
    @Override
    protected String getAlgorithmName() {
        return "å¿«é€Ÿæ’åº";
    }
    
    @Override
    protected int[] doSort(int[] array) {
        System.out.println("âš¡ ä½¿ç”¨å¿«é€Ÿæ’åºç­–ç•¥...");
        quickSort(array, 0, array.length - 1);
        return array;
    }
    
    private void quickSort(int[] array, int low, int high) {
        if (low < high) {
            int pivotIndex = partition(array, low, high);
            quickSort(array, low, pivotIndex - 1);
            quickSort(array, pivotIndex + 1, high);
        }
    }
    
    private int partition(int[] array, int low, int high) {
        // å¿«é€Ÿæ’åºçš„åˆ†åŒºé€»è¾‘
        // ç®€åŒ–å®ç°...
        return low;
    }
}
```

### 3.3 ç®—æ³•æ€§èƒ½å¯¹æ¯”


```java
// ç®—æ³•æ€§èƒ½æµ‹è¯•å™¨
public class AlgorithmComparator {
    
    public void compareAlgorithms(int[] testData) {
        System.out.println("ğŸ“Š ç®—æ³•æ€§èƒ½å¯¹æ¯”æµ‹è¯•");
        System.out.println("æµ‹è¯•æ•°æ®è§„æ¨¡: " + testData.length);
        System.out.println("-".repeat(40));
        
        // æµ‹è¯•ä¸åŒç®—æ³•
        SortAlgorithm[] algorithms = {
            new BubbleSort(),
            new QuickSort()
        };
        
        for (SortAlgorithm algorithm : algorithms) {
            int[] result = algorithm.sort(testData);
            System.out.println("ç»“æœéªŒè¯: " + (isSorted(result) ? "âœ…æ­£ç¡®" : "âŒé”™è¯¯"));
            System.out.println();
        }
    }
    
    private boolean isSorted(int[] array) {
        for (int i = 1; i < array.length; i++) {
            if (array[i] < array[i - 1]) {
                return false;
            }
        }
        return true;
    }
}
```

---

## 4. ğŸ“Š æŠ¥è¡¨ç”Ÿæˆæ¨¡æ¿


### 4.1 æŠ¥è¡¨ç”Ÿæˆçš„é€šç”¨æµç¨‹


**ç°å®åœºæ™¯**ï¼šä¸ç®¡æ˜¯ç”Ÿæˆé”€å”®æŠ¥è¡¨ã€è´¢åŠ¡æŠ¥è¡¨è¿˜æ˜¯ç”¨æˆ·æŠ¥è¡¨ï¼Œæµç¨‹éƒ½å·®ä¸å¤šï¼š

```
æ”¶é›†æ•°æ® â†’ å¤„ç†æ•°æ® â†’ æ ¼å¼åŒ–è¾“å‡º â†’ ä¿å­˜æ–‡ä»¶
```

åªæ˜¯æ¯ç§æŠ¥è¡¨çš„å…·ä½“å†…å®¹ä¸åŒã€‚

### 4.2 æŠ¥è¡¨æ¨¡æ¿è®¾è®¡


```java
// æŠ½è±¡æŠ¥è¡¨ç”Ÿæˆå™¨
public abstract class ReportGenerator {
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰æŠ¥è¡¨ç”Ÿæˆæµç¨‹
    public final String generateReport() {
        System.out.println("ğŸ“ˆ å¼€å§‹ç”Ÿæˆ" + getReportType() + "æŠ¥è¡¨...");
        
        try {
            // æ­¥éª¤1ï¼šæ”¶é›†æ•°æ®
            Object rawData = collectData();
            
            // æ­¥éª¤2ï¼šå¤„ç†æ•°æ®
            Object processedData = processData(rawData);
            
            // æ­¥éª¤3ï¼šæ ¼å¼åŒ–è¾“å‡º
            String formattedReport = formatReport(processedData);
            
            // æ­¥éª¤4ï¼šä¿å­˜æŠ¥è¡¨
            saveReport(formattedReport);
            
            System.out.println("âœ… æŠ¥è¡¨ç”Ÿæˆå®Œæˆï¼");
            return formattedReport;
            
        } catch (Exception e) {
            System.out.println("âŒ æŠ¥è¡¨ç”Ÿæˆå¤±è´¥: " + e.getMessage());
            return null;
        }
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼šç”±å­ç±»å®ç°å…·ä½“çš„æŠ¥è¡¨é€»è¾‘
    protected abstract String getReportType();
    protected abstract Object collectData() throws Exception;
    protected abstract Object processData(Object rawData);
    protected abstract String formatReport(Object processedData);
    
    // é’©å­æ–¹æ³•ï¼šå¯é€‰çš„ä¿å­˜é€»è¾‘
    protected void saveReport(String report) {
        String fileName = getReportType() + "_" + getCurrentDate() + ".txt";
        System.out.println("ğŸ’¾ ä¿å­˜æŠ¥è¡¨åˆ°æ–‡ä»¶: " + fileName);
        // å®é™…ä¿å­˜é€»è¾‘...
    }
    
    private String getCurrentDate() {
        return java.time.LocalDate.now().toString();
    }
}
```

### 4.3 ä¸åŒç±»å‹æŠ¥è¡¨å®ç°


```java
// é”€å”®æŠ¥è¡¨
public class SalesReportGenerator extends ReportGenerator {
    
    @Override
    protected String getReportType() {
        return "é”€å”®æŠ¥è¡¨";
    }
    
    @Override
    protected Object collectData() throws Exception {
        System.out.println("ğŸ“Š ä»é”€å”®æ•°æ®åº“æ”¶é›†æ•°æ®...");
        // æ¨¡æ‹Ÿä»æ•°æ®åº“è·å–é”€å”®æ•°æ®
        List<SalesRecord> salesData = Arrays.asList(
            new SalesRecord("äº§å“A", 100, 5000),
            new SalesRecord("äº§å“B", 200, 8000),
            new SalesRecord("äº§å“C", 150, 6000)
        );
        return salesData;
    }
    
    @Override
    protected Object processData(Object rawData) {
        System.out.println("ğŸ”„ è®¡ç®—é”€å”®ç»Ÿè®¡æ•°æ®...");
        @SuppressWarnings("unchecked")
        List<SalesRecord> sales = (List<SalesRecord>) rawData;
        
        double totalRevenue = sales.stream()
            .mapToDouble(SalesRecord::getRevenue)
            .sum();
        
        int totalQuantity = sales.stream()
            .mapToInt(SalesRecord::getQuantity)
            .sum();
        
        return new SalesSummary(totalRevenue, totalQuantity, sales);
    }
    
    @Override
    protected String formatReport(Object processedData) {
        System.out.println("ğŸ“ æ ¼å¼åŒ–é”€å”®æŠ¥è¡¨...");
        SalesSummary summary = (SalesSummary) processedData;
        
        StringBuilder report = new StringBuilder();
        report.append("=== é”€å”®æŠ¥è¡¨ ===\n");
        report.append("æ€»é”€å”®é¢: Â¥").append(summary.getTotalRevenue()).append("\n");
        report.append("æ€»é”€é‡: ").append(summary.getTotalQuantity()).append("ä»¶\n");
        report.append("\nè¯¦ç»†æ•°æ®:\n");
        
        for (SalesRecord record : summary.getDetails()) {
            report.append("- ").append(record.getProductName())
                  .append(": ").append(record.getQuantity())
                  .append("ä»¶, Â¥").append(record.getRevenue()).append("\n");
        }
        
        return report.toString();
    }
}

// ç”¨æˆ·æŠ¥è¡¨
public class UserReportGenerator extends ReportGenerator {
    
    @Override
    protected String getReportType() {
        return "ç”¨æˆ·æŠ¥è¡¨";
    }
    
    @Override
    protected Object collectData() throws Exception {
        System.out.println("ğŸ‘¥ ä»ç”¨æˆ·æ•°æ®åº“æ”¶é›†æ•°æ®...");
        // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
        return Arrays.asList(
            new UserRecord("å¼ ä¸‰", "VIP", 50),
            new UserRecord("æå››", "æ™®é€š", 20),
            new UserRecord("ç‹äº”", "VIP", 80)
        );
    }
    
    @Override
    protected Object processData(Object rawData) {
        System.out.println("ğŸ“Š åˆ†æç”¨æˆ·æ´»è·ƒåº¦...");
        @SuppressWarnings("unchecked")
        List<UserRecord> users = (List<UserRecord>) rawData;
        
        long vipCount = users.stream()
            .filter(user -> "VIP".equals(user.getType()))
            .count();
        
        double avgActivity = users.stream()
            .mapToInt(UserRecord::getActivityScore)
            .average()
            .orElse(0);
        
        return new UserSummary(users.size(), (int)vipCount, avgActivity, users);
    }
    
    @Override
    protected String formatReport(Object processedData) {
        System.out.println("ğŸ“‹ æ ¼å¼åŒ–ç”¨æˆ·æŠ¥è¡¨...");
        UserSummary summary = (UserSummary) processedData;
        
        StringBuilder report = new StringBuilder();
        report.append("=== ç”¨æˆ·æŠ¥è¡¨ ===\n");
        report.append("æ€»ç”¨æˆ·æ•°: ").append(summary.getTotalUsers()).append("\n");
        report.append("VIPç”¨æˆ·æ•°: ").append(summary.getVipUsers()).append("\n");
        report.append("å¹³å‡æ´»è·ƒåº¦: ").append(String.format("%.1f", summary.getAvgActivity())).append("\n");
        
        return report.toString();
    }
}
```

### 4.4 æŠ¥è¡¨ç³»ç»Ÿä¼˜åŠ¿


**ğŸ”§ æ˜“äºç»´æŠ¤**ï¼š
- æ–°å¢æŠ¥è¡¨ç±»å‹å¾ˆç®€å•ï¼Œåªéœ€å®ç°4ä¸ªæ–¹æ³•
- å…¬å…±é€»è¾‘ï¼ˆå¦‚ä¿å­˜ã€é”™è¯¯å¤„ç†ï¼‰åœ¨æ¨¡æ¿ä¸­ç»Ÿä¸€ç®¡ç†
- ä¿®æ”¹é€šç”¨æµç¨‹åªéœ€æ”¹æ¨¡æ¿ï¼Œä¸å½±å“å…·ä½“æŠ¥è¡¨

**ğŸ“Š ç»Ÿä¸€æ ¼å¼**ï¼š
- æ‰€æœ‰æŠ¥è¡¨éƒ½æœ‰ç»Ÿä¸€çš„ç”Ÿæˆæµç¨‹
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•æ ‡å‡†åŒ–
- ä¾¿äºç³»ç»Ÿé›†æˆå’Œè‡ªåŠ¨åŒ–

---

## 5. ğŸŒ± Springæ¨¡æ¿ç±»


### 5.1 Springä¸­çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼


**Springæ¡†æ¶**æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç»å…¸åº”ç”¨ï¼ŒSpringä¸­æœ‰å¾ˆå¤šä»¥"Template"ç»“å°¾çš„ç±»ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚

### 5.2 JdbcTemplateåŸç†è§£æ


**æ ¸å¿ƒæ€æƒ³**ï¼šSpringæŠŠæ•°æ®åº“æ“ä½œçš„é€šç”¨æµç¨‹ï¼ˆè·å–è¿æ¥ã€å…³é—­è¿æ¥ã€å¼‚å¸¸å¤„ç†ï¼‰å°è£…åœ¨æ¨¡æ¿ä¸­ï¼Œå¼€å‘è€…åªéœ€è¦å…³å¿ƒå…·ä½“çš„SQLæ“ä½œã€‚

```java
// ç®€åŒ–ç‰ˆçš„JdbcTemplateå®ç°åŸç†
public class SimpleJdbcTemplate {
    
    private DataSource dataSource;
    
    public SimpleJdbcTemplate(DataSource dataSource) {
        this.dataSource = dataSource;
    }
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰æ•°æ®åº“æ“ä½œæµç¨‹
    public <T> T execute(ConnectionCallback<T> callback) {
        Connection conn = null;
        try {
            // æ­¥éª¤1ï¼šè·å–è¿æ¥
            conn = dataSource.getConnection();
            System.out.println("ğŸ“¡ è·å–æ•°æ®åº“è¿æ¥");
            
            // æ­¥éª¤2ï¼šæ‰§è¡Œå›è°ƒæ“ä½œï¼ˆå…·ä½“SQLæ“ä½œï¼‰
            T result = callback.doInConnection(conn);
            
            System.out.println("âœ… æ“ä½œæ‰§è¡ŒæˆåŠŸ");
            return result;
            
        } catch (SQLException e) {
            System.out.println("âŒ æ•°æ®åº“æ“ä½œå¤±è´¥: " + e.getMessage());
            throw new RuntimeException(e);
        } finally {
            // æ­¥éª¤3ï¼šé‡Šæ”¾è¿æ¥
            if (conn != null) {
                try {
                    conn.close();
                    System.out.println("ğŸ” å…³é—­æ•°æ®åº“è¿æ¥");
                } catch (SQLException e) {
                    System.out.println("âš ï¸ å…³é—­è¿æ¥æ—¶å‡ºé”™");
                }
            }
        }
    }
    
    // å›è°ƒæ¥å£ï¼šå®šä¹‰å…·ä½“æ“ä½œ
    public interface ConnectionCallback<T> {
        T doInConnection(Connection conn) throws SQLException;
    }
}
```

### 5.3 JdbcTemplateä½¿ç”¨ç¤ºä¾‹


```java
// ä½¿ç”¨JdbcTemplateçš„ç¤ºä¾‹
public class UserService {
    
    private SimpleJdbcTemplate jdbcTemplate;
    
    public UserService(DataSource dataSource) {
        this.jdbcTemplate = new SimpleJdbcTemplate(dataSource);
    }
    
    // æŸ¥è¯¢ç”¨æˆ·
    public User findUserById(String userId) {
        return jdbcTemplate.execute(conn -> {
            System.out.println("ğŸ” æ‰§è¡Œç”¨æˆ·æŸ¥è¯¢SQL");
            PreparedStatement stmt = conn.prepareStatement(
                "SELECT name, email FROM users WHERE id = ?");
            stmt.setString(1, userId);
            ResultSet rs = stmt.executeQuery();
            
            if (rs.next()) {
                return new User(rs.getString("name"), rs.getString("email"));
            }
            return null;
        });
    }
    
    // æ›´æ–°ç”¨æˆ·
    public boolean updateUser(User user) {
        return jdbcTemplate.execute(conn -> {
            System.out.println("ğŸ“ æ‰§è¡Œç”¨æˆ·æ›´æ–°SQL");
            PreparedStatement stmt = conn.prepareStatement(
                "UPDATE users SET name = ?, email = ? WHERE id = ?");
            stmt.setString(1, user.getName());
            stmt.setString(2, user.getEmail());
            stmt.setString(3, user.getId());
            
            int result = stmt.executeUpdate();
            return result > 0;
        });
    }
}
```

### 5.4 RestTemplateå·¥ä½œåŸç†


**RestTemplate**ä¹Ÿæ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨ï¼Œå®ƒå°è£…äº†HTTPè¯·æ±‚çš„é€šç”¨æµç¨‹ã€‚

```java
// RestTemplateçš„å·¥ä½œåŸç†ï¼ˆç®€åŒ–ç‰ˆï¼‰
public class SimpleRestTemplate {
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰HTTPè¯·æ±‚æµç¨‹
    public <T> T execute(String url, HttpMethod method, 
                        RequestCallback requestCallback,
                        ResponseExtractor<T> responseExtractor) {
        
        HttpURLConnection connection = null;
        try {
            // æ­¥éª¤1ï¼šå»ºç«‹è¿æ¥
            connection = createConnection(url, method);
            System.out.println("ğŸŒ å»ºç«‹HTTPè¿æ¥: " + url);
            
            // æ­¥éª¤2ï¼šå‡†å¤‡è¯·æ±‚ï¼ˆå¦‚æœéœ€è¦ï¼‰
            if (requestCallback != null) {
                requestCallback.doWithRequest(connection);
            }
            
            // æ­¥éª¤3ï¼šå‘é€è¯·æ±‚å¹¶è·å–å“åº”
            connection.connect();
            System.out.println("ğŸ“¤ å‘é€HTTPè¯·æ±‚");
            
            // æ­¥éª¤4ï¼šå¤„ç†å“åº”
            T result = responseExtractor.extractData(connection);
            System.out.println("ğŸ“¥ å¤„ç†HTTPå“åº”");
            
            return result;
            
        } catch (IOException e) {
            System.out.println("âŒ HTTPè¯·æ±‚å¤±è´¥: " + e.getMessage());
            throw new RuntimeException(e);
        } finally {
            // æ­¥éª¤5ï¼šå…³é—­è¿æ¥
            if (connection != null) {
                connection.disconnect();
                System.out.println("ğŸ” å…³é—­HTTPè¿æ¥");
            }
        }
    }
    
    private HttpURLConnection createConnection(String url, HttpMethod method) 
            throws IOException {
        HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
        conn.setRequestMethod(method.name());
        return conn;
    }
    
    // å›è°ƒæ¥å£
    public interface RequestCallback {
        void doWithRequest(HttpURLConnection connection) throws IOException;
    }
    
    public interface ResponseExtractor<T> {
        T extractData(HttpURLConnection connection) throws IOException;
    }
}
```

### 5.5 Springæ¨¡æ¿ç±»çš„å…±åŒç‰¹ç‚¹


| ç‰¹æ€§ | **è¯´æ˜** | **å¥½å¤„** |
|------|----------|----------|
| **ğŸ”„ å›ºå®šæµç¨‹** | `è¿æ¥â†’æ“ä½œâ†’å…³é—­çš„æ ‡å‡†æµç¨‹` | `é¿å…é‡å¤ä»£ç ï¼Œå‡å°‘é”™è¯¯` |
| **ğŸ¯ å…³æ³¨åˆ†ç¦»** | `æ¡†æ¶å¤„ç†æŠ€æœ¯ç»†èŠ‚ï¼Œå¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡` | `æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½å­¦ä¹ æˆæœ¬` |
| **ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†** | `ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œèµ„æºæ¸…ç†` | `æé«˜ç¨‹åºå¥å£®æ€§` |
| **ğŸ”§ æ˜“äºæ‰©å±•** | `é€šè¿‡å›è°ƒæ¥å£å®ç°ä¸ªæ€§åŒ–æ“ä½œ` | `çµæ´»æ€§å’Œå¤ç”¨æ€§å…¼é¡¾` |

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨å®é™…åº”ç”¨ä¸­çš„ä»·å€¼


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š
```
ç°å®ä¸­å¾ˆå¤šæ“ä½œéƒ½æœ‰å›ºå®šçš„æµç¨‹æ¡†æ¶ï¼Œ
åªæ˜¯æŸäº›æ­¥éª¤çš„å…·ä½“å†…å®¹ä¸åŒã€‚
æ¨¡æ¿æ–¹æ³•æ¨¡å¼è®©æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ¡†æ¶æå–å‡ºæ¥ï¼Œ
é¿å…æ¯æ¬¡éƒ½é‡å†™ç›¸åŒçš„æµç¨‹ä»£ç ã€‚
```

**ğŸ’¡ å…³é”®ç†è§£è¦ç‚¹**ï¼š
- **å›ºå®šæµç¨‹**ï¼šæ¨¡æ¿å®šä¹‰äº†ä¸å˜çš„æ‰§è¡Œé¡ºåº
- **å¯å˜éƒ¨åˆ†**ï¼šæŠ½è±¡æ–¹æ³•è®©å­ç±»å®ç°å…·ä½“ç»†èŠ‚
- **ä»£ç å¤ç”¨**ï¼šå…¬å…±é€»è¾‘åªå†™ä¸€æ¬¡ï¼Œå¤šå¤„ä½¿ç”¨
- **ç»´æŠ¤æ€§**ï¼šä¿®æ”¹æµç¨‹åªéœ€æ”¹æ¨¡æ¿ï¼Œä¸å½±å“æ‰€æœ‰å­ç±»

### 6.2 æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨åœºæ™¯è¯†åˆ«


**âœ… é€‚åˆä½¿ç”¨çš„åœºæ™¯**ï¼š
- å¤šä¸ªç±»æœ‰ç›¸ä¼¼çš„å¤„ç†æµç¨‹ï¼Œåªæ˜¯æŸäº›æ­¥éª¤ä¸åŒ
- éœ€è¦æ§åˆ¶ç®—æ³•çš„æ‰§è¡Œé¡ºåº
- æœ‰å…¬å…±çš„åˆå§‹åŒ–å’Œæ¸…ç†é€»è¾‘
- æƒ³è¦é¿å…ä»£ç é‡å¤

**âŒ ä¸é€‚åˆçš„åœºæ™¯**ï¼š
- æµç¨‹æ­¥éª¤ç»å¸¸å˜åŒ–
- æ¯ä¸ªå®ç°å·®å¼‚å¾ˆå¤§ï¼Œæ²¡æœ‰å…¬å…±æµç¨‹
- åªæœ‰ä¸€ä¸ªå®ç°ç±»

### 6.3 å®é™…å¼€å‘ä¸­çš„æœ€ä½³å®è·µ


**ğŸ”§ è®¾è®¡æŠ€å·§**ï¼š
1. **ç¡®å®šå›ºå®šæµç¨‹**ï¼šå…ˆåˆ†æå“ªäº›æ­¥éª¤æ˜¯å›ºå®šçš„ï¼Œå“ªäº›æ˜¯å¯å˜çš„
2. **åˆç†ä½¿ç”¨é’©å­æ–¹æ³•**ï¼šå¯¹äºå¯é€‰æ­¥éª¤ï¼Œæä¾›é»˜è®¤å®ç°
3. **å¼‚å¸¸å¤„ç†ç»Ÿä¸€åŒ–**ï¼šåœ¨æ¨¡æ¿ä¸­å¤„ç†å…¬å…±å¼‚å¸¸
4. **æ–‡æ¡£æ¸…æ™°**ï¼šæ˜ç¡®è¯´æ˜æ¯ä¸ªæŠ½è±¡æ–¹æ³•çš„èŒè´£

**âš ï¸ å¸¸è§è¯¯åŒº**ï¼š
- ä¸è¦æŠŠæ‰€æœ‰æ–¹æ³•éƒ½åšæˆæŠ½è±¡çš„
- ä¸è¦è®©æ¨¡æ¿æ–¹æ³•è¿‡äºå¤æ‚
- æ³¨æ„æ§åˆ¶ç»§æ‰¿å±‚æ¬¡ï¼Œé¿å…è¿‡æ·±

### 6.4 ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»


```
æ¨¡æ¿æ–¹æ³• + ç­–ç•¥æ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ¨¡æ¿å®šä¹‰æµç¨‹   â”‚    â”‚  ç­–ç•¥å®šä¹‰ç®—æ³•    â”‚
â”‚                â”‚    â”‚                â”‚
â”‚ æ­¥éª¤1: å‡†å¤‡     â”‚    â”‚ é€‰æ‹©å…·ä½“ç­–ç•¥å®ç°  â”‚
â”‚ æ­¥éª¤2: æ‰§è¡Œç®—æ³• â”‚ â”€â”€ â”‚ ä¸åŒçš„ç®—æ³•é€»è¾‘   â”‚
â”‚ æ­¥éª¤3: æ¸…ç†     â”‚    â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¨¡æ¿æ–¹æ³•å…³æ³¨"ä½•æ—¶åšä»€ä¹ˆ"
ç­–ç•¥æ¨¡å¼å…³æ³¨"å¦‚ä½•åš"
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- æ¨¡æ¿æ–¹æ³•å®šæµç¨‹ï¼ŒæŠ½è±¡å…·ä½“è¦åˆ†æ¸…
- å…¬å…±é€»è¾‘æåˆ°ä¸Šï¼Œå˜åŒ–éƒ¨åˆ†äº¤å­ç±»
- æ•°æ®è®¿é—®æµ‹è¯•æ¡†æ¶ï¼ŒSpringæ¨¡æ¿éƒ½åœ¨ç”¨
- å›ºå®šæ­¥éª¤çœé‡å¤ï¼Œç»´æŠ¤æ‰©å±•éƒ½è½»æ¾