---
title: 6ã€è£…é¥°å™¨æ¨¡å¼ä»£ç å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [è£…é¥°å™¨æ¨¡å¼æ ¸å¿ƒæ¦‚å¿µ](#1-è£…é¥°å™¨æ¨¡å¼æ ¸å¿ƒæ¦‚å¿µ)
2. [ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ€ç»´](#2-ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ€ç»´)
3. [è£…é¥°å™¨æ¨¡å¼åŸºæœ¬ç»“æ„](#3-è£…é¥°å™¨æ¨¡å¼åŸºæœ¬ç»“æ„)
4. [å®Œæ•´ä»£ç å®æˆ˜æ¼”ç¤º](#4-å®Œæ•´ä»£ç å®æˆ˜æ¼”ç¤º)
5. [å¤šå±‚è£…é¥°å™¨åº”ç”¨](#5-å¤šå±‚è£…é¥°å™¨åº”ç”¨)
6. [åŠ¨æ€è£…é¥°å®ç°æŠ€å·§](#6-åŠ¨æ€è£…é¥°å®ç°æŠ€å·§)
7. [æ€§èƒ½åˆ†æä¸ä¼˜åŒ–](#7-æ€§èƒ½åˆ†æä¸ä¼˜åŒ–)
8. [æ¡†æ¶é›†æˆåº”ç”¨æ¡ˆä¾‹](#8-æ¡†æ¶é›†æˆåº”ç”¨æ¡ˆä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è£…é¥°å™¨æ¨¡å¼æ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è£…é¥°å™¨æ¨¡å¼


> **ğŸ’¡ ä¸€å¥è¯ç†è§£**  
> è£…é¥°å™¨æ¨¡å¼å°±åƒç»™æ‰‹æœºè´´è†œã€æˆ´ä¿æŠ¤å¥—ä¸€æ ·ï¼Œåœ¨ä¸æ”¹å˜æ‰‹æœºæœ¬èº«çš„æƒ…å†µä¸‹ï¼Œç»™å®ƒå¢åŠ æ–°åŠŸèƒ½

**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰ï¼š
â€¢ ç›®çš„ï¼šåŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½
â€¢ æ–¹å¼ï¼šä¸ä¿®æ”¹åŸå§‹ç±»çš„ä»£ç 
â€¢ ç»“æœï¼šåŠŸèƒ½å¯ä»¥è‡ªç”±ç»„åˆæ­é…
```

**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦è£…é¥°å™¨æ¨¡å¼ï¼Ÿ**

å‡è®¾ä½ æœ‰ä¸€ä¸ªå’–å•¡åº—ï¼ŒåŸºç¡€å’–å•¡æœ‰ï¼šç¾å¼å’–å•¡ã€æ‹¿é“å’–å•¡ã€‚å®¢æˆ·å¯èƒ½éœ€è¦åŠ ç³–ã€åŠ å¥¶ã€åŠ å·§å…‹åŠ›ã€‚

```
âŒ ä¼ ç»Ÿåšæ³•çš„é—®é¢˜ï¼š
ç¾å¼å’–å•¡ â†’ åˆ›å»ºä¸€ä¸ªç±»
ç¾å¼+ç³– â†’ åˆåˆ›å»ºä¸€ä¸ªç±»  
ç¾å¼+ç³–+å¥¶ â†’ å†åˆ›å»ºä¸€ä¸ªç±»
ç¾å¼+ç³–+å¥¶+å·§å…‹åŠ› â†’ ç»§ç»­åˆ›å»ºç±»...

ç»“æœï¼šç±»çˆ†ç‚¸ï¼å‡ åç§ç»„åˆå°±è¦å‡ åä¸ªç±»

âœ… è£…é¥°å™¨æ¨¡å¼çš„è§£å†³ï¼š
åŸºç¡€å’–å•¡ï¼šç¾å¼ã€æ‹¿é“
è£…é¥°å™¨ï¼šç³–è£…é¥°å™¨ã€å¥¶è£…é¥°å™¨ã€å·§å…‹åŠ›è£…é¥°å™¨
ç»“æœï¼šä»»æ„ç»„åˆï¼Œä»£ç ç®€æ´
```

### 1.2 è£…é¥°å™¨çš„æ ¸å¿ƒæ€æƒ³


**ğŸ§  æ ¸å¿ƒç†å¿µ**
- **å¼€æ”¾å°é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­
- **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šç”¨ç»„åˆçš„æ–¹å¼æ·»åŠ åŠŸèƒ½
- **è¿è¡Œæ—¶è£…é¥°**ï¼šç¨‹åºè¿è¡Œæ—¶æ‰å†³å®šåŠ ä»€ä¹ˆåŠŸèƒ½

---

## 2. ğŸ  ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ€ç»´


### 2.1 ç”Ÿæ´»å®ä¾‹å¸®åŠ©ç†è§£


```
ğŸ  è£…ä¿®æˆ¿å­ï¼š
åŸºç¡€æˆ¿å­ â†’ åŸå§‹å¯¹è±¡
åˆ·å¢™æ¼† â†’ è£…é¥°å™¨1  
é“ºåœ°æ¿ â†’ è£…é¥°å™¨2
å®‰è£…ç¯å…· â†’ è£…é¥°å™¨3

æ¯ä¸€æ­¥è£…ä¿®éƒ½ä¸æ”¹å˜æˆ¿å­ç»“æ„ï¼Œä½†å¢åŠ äº†æ–°åŠŸèƒ½

ğŸ“± æ‰‹æœºé…ä»¶ï¼š
åŸºç¡€æ‰‹æœº â†’ åŸå§‹å¯¹è±¡
è´´è†œ â†’ ä¿æŠ¤è£…é¥°å™¨
æ‰‹æœºå£³ â†’ é˜²æ‘”è£…é¥°å™¨  
æŒ‡ç¯æ”¯æ¶ â†’ æ”¯æ’‘è£…é¥°å™¨

ğŸ‚ è›‹ç³•åˆ¶ä½œï¼š
åŸºç¡€è›‹ç³• â†’ åŸå§‹å¯¹è±¡
æ¶‚å¥¶æ²¹ â†’ è£…é¥°å™¨1
æ”¾æ°´æœ â†’ è£…é¥°å™¨2  
å†™å­—è£…é¥° â†’ è£…é¥°å™¨3
```

### 2.2 è£…é¥°å™¨æ€ç»´çš„ç‰¹ç‚¹


| **ç‰¹ç‚¹** | **è¯´æ˜** | **ç”Ÿæ´»ä¾‹å­** |
|---------|---------|-------------|
| **ä¸ç ´ååŸç‰©** | `è£…é¥°ä¸ä¼šæŸååŸæ¥çš„ä¸œè¥¿` | `æ‰‹æœºè´´è†œä¸ä¼šæŸåå±å¹•` |
| **å¯ä»¥å åŠ ** | `å¤šä¸ªè£…é¥°å¯ä»¥åŒæ—¶ä½¿ç”¨` | `æ‰‹æœºå¯ä»¥æ—¢è´´è†œåˆæˆ´å£³` |
| **å¯ä»¥ç§»é™¤** | `è£…é¥°å¯ä»¥éšæ—¶å–ä¸‹` | `ä¸å–œæ¬¢å¯ä»¥æ’•æ‰è´´è†œ` |
| **è‡ªç”±ç»„åˆ** | `è£…é¥°çš„é¡ºåºå’Œç»„åˆå¾ˆçµæ´»` | `å…ˆè´´è†œå†æˆ´å£³ï¼Œæˆ–åä¹‹` |

---

## 3. ğŸ—ï¸ è£…é¥°å™¨æ¨¡å¼åŸºæœ¬ç»“æ„


### 3.1 æ ¸å¿ƒè§’è‰²è¯´æ˜


```
è£…é¥°å™¨æ¨¡å¼çš„å››ä¸ªè§’è‰²ï¼š

ğŸ“¦ Componentï¼ˆç»„ä»¶æ¥å£ï¼‰
â””â”€â”€ å®šä¹‰åŸºç¡€åŠŸèƒ½çš„æ¥å£

ğŸ  ConcreteComponentï¼ˆå…·ä½“ç»„ä»¶ï¼‰  
â””â”€â”€ å®ç°åŸºç¡€åŠŸèƒ½çš„å…·ä½“ç±»

ğŸ¨ Decoratorï¼ˆè£…é¥°å™¨æŠ½è±¡ç±»ï¼‰
â””â”€â”€ è£…é¥°å™¨çš„åŸºç¡€ç»“æ„

âœ¨ ConcreteDecoratorï¼ˆå…·ä½“è£…é¥°å™¨ï¼‰
â””â”€â”€ å®ç°å…·ä½“è£…é¥°åŠŸèƒ½çš„ç±»
```

### 3.2 ç»“æ„å…³ç³»å›¾


```
         Component
         (ç»„ä»¶æ¥å£)
            â†‘
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚
ConcreteComponent   Decorator
(å…·ä½“ç»„ä»¶)          (è£…é¥°å™¨åŸºç±»)
                       â†‘
                 ConcreteDecorator
                 (å…·ä½“è£…é¥°å™¨)
```

### 3.3 åŸºç¡€ä»£ç æ¡†æ¶


```java
// 1. ç»„ä»¶æ¥å£ - å®šä¹‰åŸºç¡€åŠŸèƒ½
interface Coffee {
    String getDescription();
    double getCost();
}

// 2. å…·ä½“ç»„ä»¶ - åŸºç¡€å’–å•¡
class SimpleCoffee implements Coffee {
    public String getDescription() {
        return "Simple Coffee";
    }
    
    public double getCost() {
        return 2.0;
    }
}

// 3. è£…é¥°å™¨åŸºç±»
abstract class CoffeeDecorator implements Coffee {
    protected Coffee coffee;
    
    public CoffeeDecorator(Coffee coffee) {
        this.coffee = coffee;
    }
}
```

---

## 4. âš¡ å®Œæ•´ä»£ç å®æˆ˜æ¼”ç¤º


### 4.1 å’–å•¡è£…é¥°å™¨å®Œæ•´å®ç°


```java
// === åŸºç¡€æ¥å£å’Œå®ç° ===
interface Coffee {
    String getDescription();
    double getCost();
}

// åŸºç¡€ç¾å¼å’–å•¡
class AmericaCoffee implements Coffee {
    public String getDescription() {
        return "ç¾å¼å’–å•¡";
    }
    
    public double getCost() {
        return 3.0;
    }
}

// åŸºç¡€æ‹¿é“å’–å•¡
class LatteCoffee implements Coffee {
    public String getDescription() {
        return "æ‹¿é“å’–å•¡";
    }
    
    public double getCost() {
        return 4.0;
    }
}
```

```java
// === è£…é¥°å™¨å®ç° ===
// è£…é¥°å™¨åŸºç±»
abstract class CoffeeDecorator implements Coffee {
    protected Coffee coffee;
    
    public CoffeeDecorator(Coffee coffee) {
        this.coffee = coffee;
    }
    
    public String getDescription() {
        return coffee.getDescription();
    }
    
    public double getCost() {
        return coffee.getCost();
    }
}

// ç³–è£…é¥°å™¨
class SugarDecorator extends CoffeeDecorator {
    public SugarDecorator(Coffee coffee) {
        super(coffee);
    }
    
    public String getDescription() {
        return coffee.getDescription() + " + ç³–";
    }
    
    public double getCost() {
        return coffee.getCost() + 0.5;
    }
}

// ç‰›å¥¶è£…é¥°å™¨
class MilkDecorator extends CoffeeDecorator {
    public MilkDecorator(Coffee coffee) {
        super(coffee);
    }
    
    public String getDescription() {
        return coffee.getDescription() + " + ç‰›å¥¶";
    }
    
    public double getCost() {
        return coffee.getCost() + 1.0;
    }
}

// å·§å…‹åŠ›è£…é¥°å™¨
class ChocolateDecorator extends CoffeeDecorator {
    public ChocolateDecorator(Coffee coffee) {
        super(coffee);
    }
    
    public String getDescription() {
        return coffee.getDescription() + " + å·§å…‹åŠ›";
    }
    
    public double getCost() {
        return coffee.getCost() + 1.5;
    }
}
```

### 4.2 ä½¿ç”¨æ¼”ç¤º


```java
public class DecoratorDemo {
    public static void main(String[] args) {
        // åŸºç¡€å’–å•¡
        Coffee coffee = new AmericaCoffee();
        System.out.println(coffee.getDescription() + " $" + coffee.getCost());
        
        // åŠ ç³–çš„ç¾å¼å’–å•¡
        coffee = new SugarDecorator(coffee);
        System.out.println(coffee.getDescription() + " $" + coffee.getCost());
        
        // åŠ ç³–åŠ ç‰›å¥¶çš„ç¾å¼å’–å•¡
        coffee = new MilkDecorator(coffee);
        System.out.println(coffee.getDescription() + " $" + coffee.getCost());
        
        // åŠ ç³–åŠ ç‰›å¥¶åŠ å·§å…‹åŠ›çš„ç¾å¼å’–å•¡
        coffee = new ChocolateDecorator(coffee);
        System.out.println(coffee.getDescription() + " $" + coffee.getCost());
    }
}
```

**ğŸ¯ è¿è¡Œç»“æœï¼š**
```
ç¾å¼å’–å•¡ $3.0
ç¾å¼å’–å•¡ + ç³– $3.5  
ç¾å¼å’–å•¡ + ç³– + ç‰›å¥¶ $4.5
ç¾å¼å’–å•¡ + ç³– + ç‰›å¥¶ + å·§å…‹åŠ› $6.0
```

---

## 5. ğŸ¨ å¤šå±‚è£…é¥°å™¨åº”ç”¨


### 5.1 æ–‡æœ¬å¤„ç†è£…é¥°å™¨å®ä¾‹


> **ğŸ’¡ åœºæ™¯è¯´æ˜**  
> å¯¹ä¸€æ®µæ–‡æœ¬è¿›è¡Œå¤šç§æ ¼å¼åŒ–ï¼šåŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ã€é¢œè‰²ç­‰

```java
// æ–‡æœ¬æ¥å£
interface Text {
    String getContent();
}

// åŸºç¡€æ–‡æœ¬
class PlainText implements Text {
    private String content;
    
    public PlainText(String content) {
        this.content = content;
    }
    
    public String getContent() {
        return content;
    }
}

// æ–‡æœ¬è£…é¥°å™¨åŸºç±»
abstract class TextDecorator implements Text {
    protected Text text;
    
    public TextDecorator(Text text) {
        this.text = text;
    }
}

// åŠ ç²—è£…é¥°å™¨
class BoldDecorator extends TextDecorator {
    public BoldDecorator(Text text) {
        super(text);
    }
    
    public String getContent() {
        return "<b>" + text.getContent() + "</b>";
    }
}

// æ–œä½“è£…é¥°å™¨
class ItalicDecorator extends TextDecorator {
    public ItalicDecorator(Text text) {
        super(text);
    }
    
    public String getContent() {
        return "<i>" + text.getContent() + "</i>";
    }
}

// ä¸‹åˆ’çº¿è£…é¥°å™¨
class UnderlineDecorator extends TextDecorator {
    public UnderlineDecorator(Text text) {
        super(text);
    }
    
    public String getContent() {
        return "<u>" + text.getContent() + "</u>";
    }
}
```

### 5.2 å¤šå±‚è£…é¥°æ¼”ç¤º


```java
public class TextFormattingDemo {
    public static void main(String[] args) {
        Text text = new PlainText("Hello World");
        
        // é€æ­¥æ·»åŠ æ ¼å¼
        System.out.println("åŸæ–‡ï¼š" + text.getContent());
        
        text = new BoldDecorator(text);
        System.out.println("åŠ ç²—ï¼š" + text.getContent());
        
        text = new ItalicDecorator(text);
        System.out.println("æ–œä½“ï¼š" + text.getContent());
        
        text = new UnderlineDecorator(text);
        System.out.println("ä¸‹åˆ’çº¿ï¼š" + text.getContent());
        
        // ä¸€æ¬¡æ€§è£…é¥°
        Text richText = new UnderlineDecorator(
            new ItalicDecorator(
                new BoldDecorator(
                    new PlainText("Design Pattern")
                )
            )
        );
        System.out.println("ç»„åˆæ ¼å¼ï¼š" + richText.getContent());
    }
}
```

**ğŸ“‹ è¾“å‡ºç»“æœï¼š**
```
åŸæ–‡ï¼šHello World
åŠ ç²—ï¼š<b>Hello World</b>
æ–œä½“ï¼š<i><b>Hello World</b></i>
ä¸‹åˆ’çº¿ï¼š<u><i><b>Hello World</b></i></u>
ç»„åˆæ ¼å¼ï¼š<u><i><b>Design Pattern</b></i></u>
```

---

## 6. ğŸš€ åŠ¨æ€è£…é¥°å®ç°æŠ€å·§


### 6.1 è£…é¥°å™¨å·¥å‚æ¨¡å¼


> **ğŸ”§ å®è·µæŠ€å·§**  
> ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥åŠ¨æ€åˆ›å»ºå’Œç»„åˆè£…é¥°å™¨

```java
// è£…é¥°å™¨å·¥å‚
class DecoratorFactory {
    public static Coffee decorateCoffee(Coffee coffee, String... decorators) {
        Coffee result = coffee;
        
        for (String decorator : decorators) {
            switch (decorator.toLowerCase()) {
                case "sugar":
                    result = new SugarDecorator(result);
                    break;
                case "milk":
                    result = new MilkDecorator(result);
                    break;
                case "chocolate":
                    result = new ChocolateDecorator(result);
                    break;
                default:
                    System.out.println("æœªçŸ¥è£…é¥°å™¨: " + decorator);
            }
        }
        
        return result;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class DynamicDecoratorDemo {
    public static void main(String[] args) {
        Coffee coffee = new AmericaCoffee();
        
        // åŠ¨æ€æ·»åŠ è£…é¥°å™¨
        Coffee decoratedCoffee = DecoratorFactory.decorateCoffee(
            coffee, "sugar", "milk", "chocolate"
        );
        
        System.out.println(decoratedCoffee.getDescription());
        System.out.println("ä»·æ ¼: $" + decoratedCoffee.getCost());
    }
}
```

### 6.2 é…ç½®é©±åŠ¨çš„è£…é¥°å™¨


```java
// è£…é¥°å™¨é…ç½®ç±»
class DecoratorConfig {
    private List<String> decorators;
    
    public DecoratorConfig(String configString) {
        // ä»é…ç½®å­—ç¬¦ä¸²è§£æï¼šå¦‚ "sugar,milk,chocolate"
        this.decorators = Arrays.asList(configString.split(","));
    }
    
    public Coffee apply(Coffee coffee) {
        Coffee result = coffee;
        for (String decorator : decorators) {
            result = DecoratorFactory.decorateCoffee(result, decorator.trim());
        }
        return result;
    }
}

// ä½¿ç”¨é…ç½®
public class ConfigDrivenDemo {
    public static void main(String[] args) {
        Coffee coffee = new LatteCoffee();
        
        // é€šè¿‡é…ç½®æ–‡ä»¶æˆ–ç”¨æˆ·è¾“å…¥æ¥å†³å®šè£…é¥°
        String userChoice = "sugar,chocolate";  // æ¨¡æ‹Ÿç”¨æˆ·é€‰æ‹©
        DecoratorConfig config = new DecoratorConfig(userChoice);
        
        Coffee finalCoffee = config.apply(coffee);
        System.out.println("æ‚¨çš„å’–å•¡: " + finalCoffee.getDescription());
        System.out.println("æ€»ä»·: $" + finalCoffee.getCost());
    }
}
```

---

## 7. ğŸ“Š æ€§èƒ½åˆ†æä¸ä¼˜åŒ–


### 7.1 è£…é¥°å™¨æ¨¡å¼çš„æ€§èƒ½ç‰¹ç‚¹


> **âš ï¸ æ€§èƒ½æ³¨æ„ç‚¹**  
> è™½ç„¶è£…é¥°å™¨æ¨¡å¼å¾ˆçµæ´»ï¼Œä½†ä¹Ÿè¦æ³¨æ„æ€§èƒ½é—®é¢˜

| **æ€§èƒ½æ–¹é¢** | **å½±å“** | **ä¼˜åŒ–å»ºè®®** |
|-------------|---------|-------------|
| **å†…å­˜å ç”¨** | `æ¯ä¸ªè£…é¥°å™¨éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡` | `é‡ç”¨å¸¸ç”¨è£…é¥°å™¨` |
| **è°ƒç”¨é“¾è·¯** | `å¤šå±‚è£…é¥°ä¼šå½¢æˆè°ƒç”¨é“¾` | `æ§åˆ¶è£…é¥°å±‚æ•°` |
| **åˆ›å»ºå¼€é”€** | `åŠ¨æ€åˆ›å»ºè£…é¥°å™¨æœ‰å¼€é”€` | `ä½¿ç”¨å¯¹è±¡æ± ` |

### 7.2 æ€§èƒ½æµ‹è¯•ä»£ç 


```java
public class PerformanceTest {
    public static void main(String[] args) {
        // æµ‹è¯•ä¸åŒè£…é¥°å±‚æ•°çš„æ€§èƒ½
        testPerformance(1);    // 1å±‚è£…é¥°
        testPerformance(5);    // 5å±‚è£…é¥°  
        testPerformance(10);   // 10å±‚è£…é¥°
    }
    
    private static void testPerformance(int layers) {
        long startTime = System.nanoTime();
        
        // åˆ›å»ºå¤šå±‚è£…é¥°
        Coffee coffee = new AmericaCoffee();
        for (int i = 0; i < layers; i++) {
            coffee = new SugarDecorator(coffee);
        }
        
        // æ‰§è¡Œ1000æ¬¡è°ƒç”¨
        for (int i = 0; i < 1000; i++) {
            coffee.getDescription();
            coffee.getCost();
        }
        
        long endTime = System.nanoTime();
        System.out.println(layers + "å±‚è£…é¥°ï¼Œè€—æ—¶: " + 
                         (endTime - startTime) / 1000000 + "ms");
    }
}
```

### 7.3 ä¼˜åŒ–ç­–ç•¥


**ğŸ”¸ è£…é¥°å™¨ç¼“å­˜**
```java
class CachedDecorator extends CoffeeDecorator {
    private String cachedDescription;
    private Double cachedCost;
    
    public String getDescription() {
        if (cachedDescription == null) {
            cachedDescription = super.getDescription();
        }
        return cachedDescription;
    }
    
    public double getCost() {
        if (cachedCost == null) {
            cachedCost = super.getCost();
        }
        return cachedCost;
    }
}
```

---

## 8. ğŸŒ æ¡†æ¶é›†æˆåº”ç”¨æ¡ˆä¾‹


### 8.1 Springæ¡†æ¶ä¸­çš„è£…é¥°å™¨


> **ğŸ“ çŸ¥è¯†æ‹“å±•**  
> Springæ¡†æ¶å¤§é‡ä½¿ç”¨äº†è£…é¥°å™¨æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨AOPå’Œæ•°æ®æºç®¡ç†ä¸­

```java
// æ¨¡æ‹ŸSpringçš„æ•°æ®æºè£…é¥°å™¨
interface DataSource {
    Connection getConnection();
}

// åŸºç¡€æ•°æ®æº
class BasicDataSource implements DataSource {
    public Connection getConnection() {
        // è¿”å›åŸºç¡€è¿æ¥
        return new BasicConnection();
    }
}

// è¿æ¥æ± è£…é¥°å™¨
class PooledDataSourceDecorator implements DataSource {
    private DataSource dataSource;
    private ConnectionPool pool;
    
    public PooledDataSourceDecorator(DataSource dataSource) {
        this.dataSource = dataSource;
        this.pool = new ConnectionPool();
    }
    
    public Connection getConnection() {
        // ä»è¿æ¥æ± è·å–è¿æ¥
        return pool.borrowConnection();
    }
}

// ç›‘æ§è£…é¥°å™¨
class MonitoringDataSourceDecorator implements DataSource {
    private DataSource dataSource;
    
    public MonitoringDataSourceDecorator(DataSource dataSource) {
        this.dataSource = dataSource;
    }
    
    public Connection getConnection() {
        System.out.println("æ•°æ®åº“è¿æ¥è¯·æ±‚ - " + new Date());
        Connection conn = dataSource.getConnection();
        System.out.println("è¿æ¥è·å–æˆåŠŸ");
        return conn;
    }
}
```

### 8.2 Webè¿‡æ»¤å™¨ä¸­çš„è£…é¥°å™¨


```java
// HTTPè¯·æ±‚è£…é¥°å™¨
class HttpRequestDecorator {
    private HttpServletRequest request;
    
    public HttpRequestDecorator(HttpServletRequest request) {
        this.request = request;
    }
    
    // æ·»åŠ æ—¥å¿—åŠŸèƒ½
    public String getParameter(String name) {
        String value = request.getParameter(name);
        System.out.println("å‚æ•°è®¿é—®: " + name + " = " + value);
        return value;
    }
    
    // æ·»åŠ å®‰å…¨æ£€æŸ¥
    public String getSecureParameter(String name) {
        String value = getParameter(name);
        // è¿›è¡Œå®‰å…¨è¿‡æ»¤
        return SecurityUtils.filter(value);
    }
}
```

### 8.3 å®é™…é¡¹ç›®åº”ç”¨å»ºè®®


| **åœºæ™¯** | **ä½¿ç”¨å»ºè®®** | **æ³¨æ„äº‹é¡¹** |
|---------|-------------|-------------|
| **æ—¥å¿—ç³»ç»Ÿ** | `ç”¨è£…é¥°å™¨æ·»åŠ ä¸åŒçº§åˆ«çš„æ—¥å¿—` | `é¿å…æ—¥å¿—åµŒå¥—è¿‡æ·±` |
| **ç¼“å­˜ç³»ç»Ÿ** | `è£…é¥°å™¨å®ç°å¤šçº§ç¼“å­˜` | `æ³¨æ„ç¼“å­˜ä¸€è‡´æ€§` |
| **æƒé™æ§åˆ¶** | `è£…é¥°å™¨æ·»åŠ æƒé™æ£€æŸ¥` | `æ€§èƒ½å½±å“è¦è€ƒè™‘` |
| **æ•°æ®éªŒè¯** | `è£…é¥°å™¨å®ç°æ•°æ®æ ¡éªŒ` | `é”™è¯¯å¤„ç†è¦å®Œå–„` |

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 è£…é¥°å™¨æ¨¡å¼çš„æ ¸å¿ƒä¼˜åŠ¿


```
âœ… ä¸»è¦ä¼˜ç‚¹ï¼š
â€¢ åŠŸèƒ½æ‰©å±•çµæ´»ï¼šä¸ä¿®æ”¹åŸç å°±èƒ½åŠ æ–°åŠŸèƒ½
â€¢ ç»„åˆè‡ªç”±ï¼šå¯ä»¥ä»»æ„ç»„åˆä¸åŒçš„è£…é¥°å™¨
â€¢ èŒè´£å•ä¸€ï¼šæ¯ä¸ªè£…é¥°å™¨åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
â€¢ è¿è¡Œæ—¶å†³å®šï¼šç¨‹åºè¿è¡Œæ—¶æ‰ç¡®å®šè¦åŠ ä»€ä¹ˆåŠŸèƒ½

âš ï¸ éœ€è¦æ³¨æ„ï¼š
â€¢ å¯¹è±¡æ•°é‡å¢åŠ ï¼šæ¯ä¸ªè£…é¥°å™¨éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡
â€¢ è°ƒç”¨é“¾å˜é•¿ï¼šå¤šå±‚è£…é¥°ä¼šå½±å“æ€§èƒ½
â€¢ è°ƒè¯•å¤æ‚ï¼šåµŒå¥—å±‚æ¬¡å¤šæ—¶ä¸å¥½è°ƒè¯•
```

### 9.2 ä½¿ç”¨åœºæ™¯åˆ¤æ–­


**ğŸ”¸ é€‚åˆä½¿ç”¨è£…é¥°å™¨æ¨¡å¼çš„æƒ…å†µï¼š**
- éœ€è¦ç»™å¯¹è±¡åŠ¨æ€æ·»åŠ åŠŸèƒ½
- åŠŸèƒ½å¯ä»¥è‡ªç”±ç»„åˆæ­é…
- ä¸æƒ³ä¿®æ”¹åŸå§‹ç±»çš„ä»£ç 
- åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œå¯ä»¥åˆ†å±‚å®ç°

**ğŸ”¹ ä¸é€‚åˆä½¿ç”¨çš„æƒ…å†µï¼š**
- åŠŸèƒ½å›ºå®šï¼Œä¸éœ€è¦çµæ´»ç»„åˆ
- æ€§èƒ½è¦æ±‚æé«˜ï¼Œä¸èƒ½å®¹å¿è°ƒç”¨é“¾å¼€é”€
- è£…é¥°å™¨ç§ç±»å¾ˆå°‘ï¼Œç”¨ç»§æ‰¿æ›´ç®€å•

### 9.3 ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»


```
ğŸ”— ç›¸å…³è®¾è®¡æ¨¡å¼ï¼š

è£…é¥°å™¨ vs ä»£ç†æ¨¡å¼ï¼š
â€¢ è£…é¥°å™¨ï¼šå¢å¼ºåŠŸèƒ½
â€¢ ä»£ç†ï¼šæ§åˆ¶è®¿é—®

è£…é¥°å™¨ vs é€‚é…å™¨æ¨¡å¼ï¼š
â€¢ è£…é¥°å™¨ï¼šå¢åŠ åŠŸèƒ½
â€¢ é€‚é…å™¨ï¼šæ¥å£è½¬æ¢

è£…é¥°å™¨ vs ç»„åˆæ¨¡å¼ï¼š
â€¢ è£…é¥°å™¨ï¼šçº¿æ€§è£…é¥°é“¾
â€¢ ç»„åˆï¼šæ ‘å½¢ç»“æ„
```

### 9.4 å®è·µå»ºè®®


> **ğŸ’¡ æœ€ä½³å®è·µ**
> 1. ä¿æŒè£…é¥°å™¨çš„èŒè´£å•ä¸€
> 2. æ§åˆ¶è£…é¥°å±‚æ•°ï¼Œé¿å…è¿‡åº¦åµŒå¥—
> 3. è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼ç®€åŒ–è£…é¥°å™¨åˆ›å»º
> 4. é‡è¦åœºæ™¯ä¸‹è¿›è¡Œæ€§èƒ½æµ‹è¯•
> 5. åšå¥½æ–‡æ¡£ï¼Œè¯´æ˜å„è£…é¥°å™¨çš„ä½œç”¨

**ğŸ¯ è®°å¿†è¦ç‚¹ï¼š**
- **æ ¸å¿ƒæ€æƒ³**ï¼šåŒ…è£…å¢å¼ºï¼Œä¸æ”¹åŸç‰©
- **ä½¿ç”¨æ—¶æœº**ï¼šåŠ¨æ€åŠŸèƒ½ï¼Œè‡ªç”±ç»„åˆ
- **å®ç°å…³é”®**ï¼šæ¥å£ç»Ÿä¸€ï¼Œå±‚å±‚åŒ…è£…
- **æ³¨æ„äº‹é¡¹**ï¼šæ€§èƒ½å¼€é”€ï¼Œè°ƒè¯•å¤æ‚

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
*è£…é¥°æ¨¡å¼åŒ…ä¸€å±‚ï¼ŒåŠŸèƒ½å¢å¼ºä¸æ”¹åŸ*  
*åŠ¨æ€ç»„åˆå¾ˆçµæ´»ï¼Œå°±åƒæ‰‹æœºè´´è†œæ¡ˆ*