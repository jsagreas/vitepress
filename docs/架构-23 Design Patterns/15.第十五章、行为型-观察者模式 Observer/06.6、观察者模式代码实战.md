---
title: 6ã€è§‚å¯Ÿè€…æ¨¡å¼ä»£ç å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [è§‚å¯Ÿè€…æ¨¡å¼ä»£ç å®æˆ˜æ¦‚è¿°](#1-è§‚å¯Ÿè€…æ¨¡å¼ä»£ç å®æˆ˜æ¦‚è¿°)
2. [åŸºç¡€ç‰ˆæœ¬å®Œæ•´å®ç°](#2-åŸºç¡€ç‰ˆæœ¬å®Œæ•´å®ç°)
3. [äº‹ä»¶ç³»ç»Ÿè¿›é˜¶å®ç°](#3-äº‹ä»¶ç³»ç»Ÿè¿›é˜¶å®ç°)
4. [å¼‚æ­¥é€šçŸ¥æœºåˆ¶æ¼”ç¤º](#4-å¼‚æ­¥é€šçŸ¥æœºåˆ¶æ¼”ç¤º)
5. [å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–](#5-å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–)
6. [å®é™…æ¡†æ¶é›†æˆåº”ç”¨](#6-å®é™…æ¡†æ¶é›†æˆåº”ç”¨)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è§‚å¯Ÿè€…æ¨¡å¼ä»£ç å®æˆ˜æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ä»£ç å®æˆ˜


**ğŸ”¸ å®æˆ˜çš„å«ä¹‰**
è§‚å¯Ÿè€…æ¨¡å¼çš„ä»£ç å®æˆ˜ï¼Œå°±æ˜¯æŠŠç†è®ºçŸ¥è¯†è½¬åŒ–ä¸ºèƒ½è¿è¡Œçš„ä»£ç ã€‚å°±åƒå­¦å¼€è½¦ä¸èƒ½åªçœ‹ä¹¦ï¼Œå¾—å®é™…ä¸Šè·¯ç»ƒä¹ ä¸€æ ·ã€‚æˆ‘ä»¬è¦é€šè¿‡å†™ä»£ç æ¥çœŸæ­£ç†è§£è§‚å¯Ÿè€…æ¨¡å¼æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚

**ğŸ’¡ ä¸ºä»€ä¹ˆè¦å®æˆ˜ç»ƒä¹ **
```
ç†è®º vs å®é™…çš„å·®è·ï¼š

çœ‹æ‡‚æ¦‚å¿µ â‰  ä¼šå†™ä»£ç 
- ç†è®ºï¼šçŸ¥é“è§‚å¯Ÿè€…æ¨¡å¼æ˜¯"ä¸€å¯¹å¤šä¾èµ–å…³ç³»"
- å®é™…ï¼šæ€ä¹ˆç”¨ä»£ç å®ç°è¿™ç§å…³ç³»ï¼Ÿ

ç®€å•ä¾‹å­ â‰  å¤æ‚åœºæ™¯
- ç®€å•ï¼šä¸€ä¸ªæŒ‰é’®é€šçŸ¥å‡ ä¸ªç•Œé¢å…ƒç´ 
- å¤æ‚ï¼šå¤§å‹ç³»ç»Ÿä¸­æˆåƒä¸Šä¸‡ä¸ªå¯¹è±¡çš„é€šçŸ¥å…³ç³»

åŸºç¡€å®ç° â‰  ç”Ÿäº§åº”ç”¨
- åŸºç¡€ï¼šåŠŸèƒ½èƒ½è·‘å°±è¡Œ
- ç”Ÿäº§ï¼šè¦è€ƒè™‘æ€§èƒ½ã€å†…å­˜ã€çº¿ç¨‹å®‰å…¨ç­‰
```

### 1.2 å®æˆ˜å­¦ä¹ è·¯çº¿å›¾


```
å­¦ä¹ è¿›é˜¶è·¯å¾„ï¼š

ç¬¬ä¸€æ­¥ï¼šåŸºç¡€å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç®€å•Subject   â”‚ â”€â”€é€šçŸ¥â”€â”€> â”‚ Observer1 â”‚
â”‚   å’ŒObserver    â”‚           â”‚ Observer2 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ Observer3 â”‚

ç¬¬äºŒæ­¥ï¼šäº‹ä»¶ç³»ç»Ÿ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EventManager  â”‚ â”€â”€å‘å¸ƒâ”€â”€> â”‚ å„ç§äº‹ä»¶ç›‘å¬å™¨ â”‚
â”‚   (äº‹ä»¶ç®¡ç†å™¨)   â”‚           â”‚ (æŒ‰äº‹ä»¶ç±»å‹åˆ†ç»„)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬ä¸‰æ­¥ï¼šå¼‚æ­¥é€šçŸ¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AsyncNotifier â”‚ â”€â”€å¼‚æ­¥â”€â”€> â”‚ å¹¶å‘å¤„ç† â”‚
â”‚   (å¼‚æ­¥é€šçŸ¥å™¨)   â”‚           â”‚ å¤šçº¿ç¨‹å®‰å…¨ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬å››æ­¥ï¼šæ¡†æ¶é›†æˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®é™…ä¸šåŠ¡ç³»ç»Ÿ    â”‚ â”€â”€é›†æˆâ”€â”€> â”‚ Springäº‹ä»¶ â”‚
â”‚  (çœŸå®åº”ç”¨åœºæ™¯)  â”‚           â”‚ æ¶ˆæ¯é˜Ÿåˆ—ç­‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å®æˆ˜ç›®æ ‡è®¾å®š


**ğŸ¯ å­¦ä¹ ç›®æ ‡**
- **ç†è§£å®ç°**ï¼šçœ‹æ‡‚æ¯è¡Œä»£ç çš„ä½œç”¨
- **åŠ¨æ‰‹èƒ½åŠ›**ï¼šèƒ½è‡ªå·±å†™å‡ºåŸºæœ¬çš„è§‚å¯Ÿè€…æ¨¡å¼
- **è§£å†³é—®é¢˜**ï¼šé‡åˆ°å®é™…éœ€æ±‚çŸ¥é“å¦‚ä½•åº”ç”¨
- **æ€§èƒ½æ„è¯†**ï¼šäº†è§£å®é™…ä½¿ç”¨ä¸­çš„æ³¨æ„äº‹é¡¹

---

## 2. ğŸ› ï¸ åŸºç¡€ç‰ˆæœ¬å®Œæ•´å®ç°


### 2.1 ä¼ ç»Ÿè§‚å¯Ÿè€…æ¨¡å¼å®ç°


**ğŸ”¸ æ ¸å¿ƒæ¥å£å®šä¹‰**

é¦–å…ˆæˆ‘ä»¬å®šä¹‰è§‚å¯Ÿè€…æ¥å£ï¼Œè¿™å°±åƒæ˜¯åˆ¶å®šä¸€ä¸ª"é€šçŸ¥è§„èŒƒ"ï¼š

```java
// è§‚å¯Ÿè€…æ¥å£ - å®šä¹‰æ¥æ”¶é€šçŸ¥çš„æ ‡å‡†
public interface Observer {
    // updateæ–¹æ³•ï¼šå½“è¢«è§‚å¯Ÿå¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•
    // å‚æ•°messageï¼šæºå¸¦å˜åŒ–çš„å…·ä½“ä¿¡æ¯
    void update(String message);
}
```

**ğŸ”¸ è¢«è§‚å¯Ÿè€…æŠ½è±¡ç±»**

```java
import java.util.*;

// è¢«è§‚å¯Ÿè€…æŠ½è±¡ç±» - ç®¡ç†è§‚å¯Ÿè€…åˆ—è¡¨çš„åŸºç¡€ç±»
public abstract class Subject {
    // å­˜å‚¨æ‰€æœ‰è§‚å¯Ÿè€…çš„åˆ—è¡¨
    private List<Observer> observers = new ArrayList<>();
    
    // æ·»åŠ è§‚å¯Ÿè€… - å°±åƒè®¢é˜…é€šçŸ¥
    public void addObserver(Observer observer) {
        if (observer != null && !observers.contains(observer)) {
            observers.add(observer);
            System.out.println("æ–°è§‚å¯Ÿè€…å·²è®¢é˜…ï¼Œå½“å‰è®¢é˜…æ•°ï¼š" + observers.size());
        }
    }
    
    // ç§»é™¤è§‚å¯Ÿè€… - å–æ¶ˆè®¢é˜…
    public void removeObserver(Observer observer) {
        if (observers.remove(observer)) {
            System.out.println("è§‚å¯Ÿè€…å·²å–æ¶ˆè®¢é˜…ï¼Œå½“å‰è®¢é˜…æ•°ï¼š" + observers.size());
        }
    }
    
    // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€… - ç¾¤å‘é€šçŸ¥
    protected void notifyObservers(String message) {
        System.out.println("å¼€å§‹é€šçŸ¥ " + observers.size() + " ä¸ªè§‚å¯Ÿè€…...");
        for (Observer observer : observers) {
            observer.update(message);
        }
        System.out.println("é€šçŸ¥å®Œæˆï¼");
    }
}
```

### 2.2 å…·ä½“å®ç°ç±»


**ğŸ“° æ–°é—»å‘å¸ƒç³»ç»Ÿç¤ºä¾‹**

è¿™é‡Œæˆ‘ä»¬ç”¨æ–°é—»å‘å¸ƒæ¥æ¼”ç¤ºï¼Œå°±åƒå¾®ä¿¡å…¬ä¼—å·å‘æ–‡ç« ï¼Œè®¢é˜…è€…ä¼šæ”¶åˆ°æ¨é€ï¼š

```java
// å…·ä½“çš„è¢«è§‚å¯Ÿè€…ï¼šæ–°é—»å‘å¸ƒå™¨
public class NewsPublisher extends Subject {
    private String latestNews;
    
    // å‘å¸ƒæ–°é—»
    public void publishNews(String news) {
        this.latestNews = news;
        System.out.println("\nğŸ“° æ–°é—»å‘å¸ƒï¼š" + news);
        // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…
        notifyObservers("æœ€æ–°æ–°é—»ï¼š" + news);
    }
    
    public String getLatestNews() {
        return latestNews;
    }
}

// å…·ä½“è§‚å¯Ÿè€…ï¼šæ‰‹æœºç”¨æˆ·
public class MobileUser implements Observer {
    private String name;
    
    public MobileUser(String name) {
        this.name = name;
    }
    
    @Override
    public void update(String message) {
        System.out.println("ğŸ“± [" + name + "] æ‰‹æœºæ”¶åˆ°æ¨é€ï¼š" + message);
    }
}

// å…·ä½“è§‚å¯Ÿè€…ï¼šé‚®ç®±ç”¨æˆ·  
public class EmailUser implements Observer {
    private String email;
    
    public EmailUser(String email) {
        this.email = email;
    }
    
    @Override
    public void update(String message) {
        System.out.println("ğŸ“§ [" + email + "] é‚®ç®±æ”¶åˆ°ï¼š" + message);
    }
}
```

### 2.3 åŸºç¡€æ¼”ç¤ºæµ‹è¯•


**ğŸ§ª è¿è¡Œæµ‹è¯•ç¤ºä¾‹**

```java
public class ObserverPatternDemo {
    public static void main(String[] args) {
        // åˆ›å»ºæ–°é—»å‘å¸ƒå™¨
        NewsPublisher publisher = new NewsPublisher();
        
        // åˆ›å»ºä¸åŒç±»å‹çš„ç”¨æˆ·
        MobileUser user1 = new MobileUser("å¼ ä¸‰");
        MobileUser user2 = new MobileUser("æå››");
        EmailUser user3 = new EmailUser("wang@email.com");
        
        System.out.println("=== ç”¨æˆ·å¼€å§‹è®¢é˜…æ–°é—» ===");
        publisher.addObserver(user1);
        publisher.addObserver(user2);
        publisher.addObserver(user3);
        
        System.out.println("\n=== å‘å¸ƒç¬¬ä¸€æ¡æ–°é—» ===");
        publisher.publishNews("ç§‘æŠ€æ–°çªç ´ï¼šAIåŠ©æ‰‹èƒ½ç†è§£å¤æ‚æŒ‡ä»¤");
        
        System.out.println("\n=== æå››å–æ¶ˆè®¢é˜… ===");
        publisher.removeObserver(user2);
        
        System.out.println("\n=== å‘å¸ƒç¬¬äºŒæ¡æ–°é—» ===");
        publisher.publishNews("å¤©æ°”é¢„æŠ¥ï¼šæ˜å¤©é˜´è½¬å¤šäº‘");
    }
}
```

**é¢„æœŸè¾“å‡ºç»“æœï¼š**
```
=== ç”¨æˆ·å¼€å§‹è®¢é˜…æ–°é—» ===
æ–°è§‚å¯Ÿè€…å·²è®¢é˜…ï¼Œå½“å‰è®¢é˜…æ•°ï¼š1
æ–°è§‚å¯Ÿè€…å·²è®¢é˜…ï¼Œå½“å‰è®¢é˜…æ•°ï¼š2
æ–°è§‚å¯Ÿè€…å·²è®¢é˜…ï¼Œå½“å‰è®¢é˜…æ•°ï¼š3

=== å‘å¸ƒç¬¬ä¸€æ¡æ–°é—» ===

ğŸ“° æ–°é—»å‘å¸ƒï¼šç§‘æŠ€æ–°çªç ´ï¼šAIåŠ©æ‰‹èƒ½ç†è§£å¤æ‚æŒ‡ä»¤
å¼€å§‹é€šçŸ¥ 3 ä¸ªè§‚å¯Ÿè€…...
ğŸ“± [å¼ ä¸‰] æ‰‹æœºæ”¶åˆ°æ¨é€ï¼šæœ€æ–°æ–°é—»ï¼šç§‘æŠ€æ–°çªç ´ï¼šAIåŠ©æ‰‹èƒ½ç†è§£å¤æ‚æŒ‡ä»¤
ğŸ“± [æå››] æ‰‹æœºæ”¶åˆ°æ¨é€ï¼šæœ€æ–°æ–°é—»ï¼šç§‘æŠ€æ–°çªç ´ï¼šAIåŠ©æ‰‹èƒ½ç†è§£å¤æ‚æŒ‡ä»¤
ğŸ“§ [wang@email.com] é‚®ç®±æ”¶åˆ°ï¼šæœ€æ–°æ–°é—»ï¼šç§‘æŠ€æ–°çªç ´ï¼šAIåŠ©æ‰‹èƒ½ç†è§£å¤æ‚æŒ‡ä»¤
é€šçŸ¥å®Œæˆï¼

=== æå››å–æ¶ˆè®¢é˜… ===
è§‚å¯Ÿè€…å·²å–æ¶ˆè®¢é˜…ï¼Œå½“å‰è®¢é˜…æ•°ï¼š2

=== å‘å¸ƒç¬¬äºŒæ¡æ–°é—» ===

ğŸ“° æ–°é—»å‘å¸ƒï¼šå¤©æ°”é¢„æŠ¥ï¼šæ˜å¤©é˜´è½¬å¤šäº‘
å¼€å§‹é€šçŸ¥ 2 ä¸ªè§‚å¯Ÿè€…...
ğŸ“± [å¼ ä¸‰] æ‰‹æœºæ”¶åˆ°æ¨é€ï¼šæœ€æ–°æ–°é—»ï¼šå¤©æ°”é¢„æŠ¥ï¼šæ˜å¤©é˜´è½¬å¤šäº‘
ğŸ“§ [wang@email.com] é‚®ç®±æ”¶åˆ°ï¼šæœ€æ–°æ–°é—»ï¼šå¤©æ°”é¢„æŠ¥ï¼šæ˜å¤©é˜´è½¬å¤šäº‘
é€šçŸ¥å®Œæˆï¼
```

---

## 3. ğŸš€ äº‹ä»¶ç³»ç»Ÿè¿›é˜¶å®ç°


### 3.1 äº‹ä»¶é©±åŠ¨æ¶æ„


**ğŸ”¸ ä»€ä¹ˆæ˜¯äº‹ä»¶ç³»ç»Ÿ**

ä¼ ç»Ÿè§‚å¯Ÿè€…æ¨¡å¼æ¯”è¾ƒç®€å•ï¼Œä½†å®é™…åº”ç”¨ä¸­æˆ‘ä»¬éœ€è¦æ›´çµæ´»çš„äº‹ä»¶ç³»ç»Ÿã€‚å°±åƒç°å®ä¸­ä¸åŒçš„äº‹æƒ…éœ€è¦é€šçŸ¥ä¸åŒçš„äººï¼š
- ç«è­¦ â†’ é€šçŸ¥æ¶ˆé˜²é˜Ÿ
- åŒ»ç–—æ€¥æ•‘ â†’ é€šçŸ¥åŒ»é™¢  
- äº¤é€šäº‹æ•… â†’ é€šçŸ¥äº¤è­¦

**ğŸ¨ äº‹ä»¶ç³»ç»Ÿæ¶æ„å›¾**
```
äº‹ä»¶å‘å¸ƒæµç¨‹ï¼š

äº‹ä»¶æº â†’ äº‹ä»¶ç®¡ç†å™¨ â†’ äº‹ä»¶ç›‘å¬å™¨
  â”‚         â”‚           â”‚
å‘å¸ƒäº‹ä»¶   åˆ†ç±»åˆ†å‘      å¤„ç†äº‹ä»¶

å…·ä½“ç¤ºä¾‹ï¼š
ç”¨æˆ·ç™»å½• â†’ EventManager â†’ [å®‰å…¨ç›‘æ§, æ—¥å¿—è®°å½•, ç»Ÿè®¡åˆ†æ]
è®¢å•æ”¯ä»˜ â†’ EventManager â†’ [åº“å­˜æ›´æ–°, ç‰©æµé€šçŸ¥, è´¦å•ç”Ÿæˆ]
```

### 3.2 é€šç”¨äº‹ä»¶æ¥å£è®¾è®¡


```java
// äº‹ä»¶åŸºç¡€æ¥å£
public interface Event {
    // è·å–äº‹ä»¶ç±»å‹
    String getEventType();
    
    // è·å–äº‹ä»¶å‘ç”Ÿæ—¶é—´
    long getTimestamp();
    
    // è·å–äº‹ä»¶æ•°æ®
    Object getData();
}

// äº‹ä»¶ç›‘å¬å™¨æ¥å£
public interface EventListener<T extends Event> {
    // å¤„ç†äº‹ä»¶çš„æ–¹æ³•
    void handleEvent(T event);
    
    // è·å–ç›‘å¬å™¨èƒ½å¤„ç†çš„äº‹ä»¶ç±»å‹
    Class<T> getEventType();
}
```

### 3.3 å…·ä½“äº‹ä»¶ç±»å®ç°


```java
// ç”¨æˆ·äº‹ä»¶
public class UserEvent implements Event {
    private String eventType;
    private long timestamp;
    private Map<String, Object> userData;
    
    public UserEvent(String eventType, Map<String, Object> userData) {
        this.eventType = eventType;
        this.userData = userData;
        this.timestamp = System.currentTimeMillis();
    }
    
    @Override
    public String getEventType() { return eventType; }
    
    @Override
    public long getTimestamp() { return timestamp; }
    
    @Override
    public Object getData() { return userData; }
    
    // ä¾¿æ·æ–¹æ³•è·å–ç”¨æˆ·ä¿¡æ¯
    public String getUserName() {
        return (String) userData.get("userName");
    }
    
    public String getUserId() {
        return (String) userData.get("userId");
    }
}

// è®¢å•äº‹ä»¶
public class OrderEvent implements Event {
    private String eventType;
    private long timestamp;
    private Map<String, Object> orderData;
    
    public OrderEvent(String eventType, Map<String, Object> orderData) {
        this.eventType = eventType;
        this.orderData = orderData;
        this.timestamp = System.currentTimeMillis();
    }
    
    @Override
    public String getEventType() { return eventType; }
    
    @Override
    public long getTimestamp() { return timestamp; }
    
    @Override
    public Object getData() { return orderData; }
    
    public String getOrderId() {
        return (String) orderData.get("orderId");
    }
    
    public Double getAmount() {
        return (Double) orderData.get("amount");
    }
}
```

### 3.4 äº‹ä»¶ç®¡ç†å™¨æ ¸å¿ƒå®ç°


```java
import java.util.*;
import java.util.concurrent.ConcurrentHashMap;

public class EventManager {
    // å­˜å‚¨ä¸åŒäº‹ä»¶ç±»å‹çš„ç›‘å¬å™¨åˆ—è¡¨
    private Map<String, List<EventListener<?>>> listeners = new ConcurrentHashMap<>();
    
    // è®¢é˜…äº‹ä»¶ï¼ˆæ·»åŠ ç›‘å¬å™¨ï¼‰
    public <T extends Event> void subscribe(String eventType, EventListener<T> listener) {
        listeners.computeIfAbsent(eventType, k -> new ArrayList<>()).add(listener);
        System.out.println("âœ… ç›‘å¬å™¨å·²è®¢é˜…äº‹ä»¶ç±»å‹ï¼š" + eventType);
    }
    
    // å–æ¶ˆè®¢é˜…
    public void unsubscribe(String eventType, EventListener<?> listener) {
        List<EventListener<?>> eventListeners = listeners.get(eventType);
        if (eventListeners != null && eventListeners.remove(listener)) {
            System.out.println("âŒ ç›‘å¬å™¨å·²å–æ¶ˆè®¢é˜…ï¼š" + eventType);
        }
    }
    
    // å‘å¸ƒäº‹ä»¶
    @SuppressWarnings("unchecked")
    public void publish(Event event) {
        String eventType = event.getEventType();
        List<EventListener<?>> eventListeners = listeners.get(eventType);
        
        if (eventListeners != null && !eventListeners.isEmpty()) {
            System.out.println("ğŸ“¡ å‘å¸ƒäº‹ä»¶ï¼š" + eventType + " (ç›‘å¬å™¨æ•°é‡ï¼š" + eventListeners.size() + ")");
            
            for (EventListener<?> listener : eventListeners) {
                try {
                    // ç±»å‹å®‰å…¨çš„äº‹ä»¶åˆ†å‘
                    ((EventListener<Event>) listener).handleEvent(event);
                } catch (Exception e) {
                    System.err.println("â— äº‹ä»¶å¤„ç†å¼‚å¸¸ï¼š" + e.getMessage());
                }
            }
        } else {
            System.out.println("âš ï¸ æ²¡æœ‰æ‰¾åˆ°äº‹ä»¶ç±»å‹ '" + eventType + "' çš„ç›‘å¬å™¨");
        }
    }
    
    // è·å–ç»Ÿè®¡ä¿¡æ¯
    public void printStatistics() {
        System.out.println("\nğŸ“Š äº‹ä»¶ç®¡ç†å™¨ç»Ÿè®¡ï¼š");
        for (Map.Entry<String, List<EventListener<?>>> entry : listeners.entrySet()) {
            System.out.println("  " + entry.getKey() + ": " + entry.getValue().size() + " ä¸ªç›‘å¬å™¨");
        }
    }
}
```

### 3.5 å…·ä½“ç›‘å¬å™¨å®ç°


```java
// ç”¨æˆ·ç™»å½•ç›‘å¬å™¨
public class UserLoginListener implements EventListener<UserEvent> {
    @Override
    public void handleEvent(UserEvent event) {
        System.out.println("ğŸ” [å®‰å…¨ç›‘æ§] ç”¨æˆ· " + event.getUserName() + " äº " + 
                          new Date(event.getTimestamp()) + " ç™»å½•ç³»ç»Ÿ");
    }
    
    @Override
    public Class<UserEvent> getEventType() {
        return UserEvent.class;
    }
}

// æ—¥å¿—è®°å½•ç›‘å¬å™¨
public class LoggingListener implements EventListener<Event> {
    @Override
    public void handleEvent(Event event) {
        System.out.println("ğŸ“ [æ—¥å¿—è®°å½•] " + event.getEventType() + 
                          " äº‹ä»¶å·²è®°å½•ï¼Œæ—¶é—´ï¼š" + new Date(event.getTimestamp()));
    }
    
    @Override
    public Class<Event> getEventType() {
        return Event.class;
    }
}

// è®¢å•å¤„ç†ç›‘å¬å™¨
public class OrderProcessListener implements EventListener<OrderEvent> {
    @Override
    public void handleEvent(OrderEvent event) {
        if ("ORDER_CREATED".equals(event.getEventType())) {
            System.out.println("ğŸ›’ [è®¢å•å¤„ç†] è®¢å• " + event.getOrderId() + 
                              " å·²åˆ›å»ºï¼Œé‡‘é¢ï¼š$" + event.getAmount());
        } else if ("ORDER_PAID".equals(event.getEventType())) {
            System.out.println("ğŸ’³ [æ”¯ä»˜å¤„ç†] è®¢å• " + event.getOrderId() + " æ”¯ä»˜æˆåŠŸ");
        }
    }
    
    @Override
    public Class<OrderEvent> getEventType() {
        return OrderEvent.class;
    }
}
```

### 3.6 äº‹ä»¶ç³»ç»Ÿæ¼”ç¤º


```java
public class EventSystemDemo {
    public static void main(String[] args) {
        // åˆ›å»ºäº‹ä»¶ç®¡ç†å™¨
        EventManager eventManager = new EventManager();
        
        // åˆ›å»ºç›‘å¬å™¨
        UserLoginListener loginListener = new UserLoginListener();
        LoggingListener loggingListener = new LoggingListener();
        OrderProcessListener orderListener = new OrderProcessListener();
        
        // è®¢é˜…äº‹ä»¶
        System.out.println("=== æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ ===");
        eventManager.subscribe("USER_LOGIN", loginListener);
        eventManager.subscribe("USER_LOGIN", loggingListener);  // ä¸€ä¸ªäº‹ä»¶å¯ä»¥æœ‰å¤šä¸ªç›‘å¬å™¨
        eventManager.subscribe("ORDER_CREATED", orderListener);
        eventManager.subscribe("ORDER_PAID", orderListener);
        
        // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
        eventManager.printStatistics();
        
        // å‘å¸ƒç”¨æˆ·ç™»å½•äº‹ä»¶
        System.out.println("\n=== æ¨¡æ‹Ÿç”¨æˆ·ç™»å½• ===");
        Map<String, Object> userData = new HashMap<>();
        userData.put("userId", "U001");
        userData.put("userName", "å¼ ä¸‰");
        UserEvent loginEvent = new UserEvent("USER_LOGIN", userData);
        eventManager.publish(loginEvent);
        
        // å‘å¸ƒè®¢å•äº‹ä»¶
        System.out.println("\n=== æ¨¡æ‹Ÿè®¢å•åˆ›å»º ===");
        Map<String, Object> orderData = new HashMap<>();
        orderData.put("orderId", "ORD001");
        orderData.put("amount", 99.99);
        OrderEvent orderEvent = new OrderEvent("ORDER_CREATED", orderData);
        eventManager.publish(orderEvent);
        
        System.out.println("\n=== æ¨¡æ‹Ÿè®¢å•æ”¯ä»˜ ===");
        OrderEvent payEvent = new OrderEvent("ORDER_PAID", orderData);
        eventManager.publish(payEvent);
    }
}
```

---

## 4. âš¡ å¼‚æ­¥é€šçŸ¥æœºåˆ¶æ¼”ç¤º


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥é€šçŸ¥


**ğŸ”¸ åŒæ­¥é€šçŸ¥çš„é—®é¢˜**

åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæ‰€æœ‰é€šçŸ¥éƒ½æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œå°±åƒè€å¸ˆç‚¹åï¼Œå«åˆ°ä¸€ä¸ªå­¦ç”Ÿï¼Œç­‰ä»–å›ç­”å®Œäº†å†å«ä¸‹ä¸€ä¸ªã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹ä¼šæœ‰é—®é¢˜ï¼š

```
åŒæ­¥é€šçŸ¥çš„é—®é¢˜ï¼š

é˜»å¡é—®é¢˜ï¼š
- å¦‚æœä¸€ä¸ªè§‚å¯Ÿè€…å¤„ç†å¾ˆæ…¢ï¼Œä¼šå½±å“åé¢æ‰€æœ‰è§‚å¯Ÿè€…
- å°±åƒä¸€ä¸ªäººå¡ä½äº†ï¼Œåé¢çš„äººéƒ½è¦ç­‰ç€

é”™è¯¯ä¼ æ’­ï¼š
- å¦‚æœä¸€ä¸ªè§‚å¯Ÿè€…å‡ºé”™ï¼Œå¯èƒ½å½±å“æ•´ä¸ªé€šçŸ¥æµç¨‹
- å°±åƒä¸€ä¸ªç¯èŠ‚å‡ºé—®é¢˜ï¼Œæ•´ä¸ªæµæ°´çº¿åœæ­¢

æ€§èƒ½é—®é¢˜ï¼š
- è§‚å¯Ÿè€…å¾ˆå¤šæ—¶ï¼Œé€ä¸ªé€šçŸ¥è€—æ—¶å¾ˆé•¿
- ç”¨æˆ·æ“ä½œä¼šæ„Ÿè§‰å¡é¡¿
```

**ğŸ’¡ å¼‚æ­¥é€šçŸ¥çš„ä¼˜åŠ¿**

å¼‚æ­¥é€šçŸ¥å°±åƒå‘çŸ­ä¿¡ç¾¤å‘ï¼Œå‘å‡ºå»å°±ä¸ç”¨ç­‰å›å¤ï¼Œå„è‡ªå¤„ç†å„è‡ªçš„ã€‚

### 4.2 çº¿ç¨‹æ± å¼‚æ­¥å®ç°


```java
import java.util.concurrent.*;

public class AsyncEventManager {
    private Map<String, List<EventListener<?>>> listeners = new ConcurrentHashMap<>();
    
    // å¼‚æ­¥æ‰§è¡Œçº¿ç¨‹æ± 
    private ExecutorService executorService;
    
    public AsyncEventManager() {
        // åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± 
        this.executorService = Executors.newFixedThreadPool(5);
        System.out.println("ğŸš€ å¼‚æ­¥äº‹ä»¶ç®¡ç†å™¨å¯åŠ¨ï¼Œçº¿ç¨‹æ± å¤§å°ï¼š5");
    }
    
    // è®¢é˜…æ–¹æ³•ä¿æŒåŒæ­¥
    public <T extends Event> void subscribe(String eventType, EventListener<T> listener) {
        listeners.computeIfAbsent(eventType, k -> new ArrayList<>()).add(listener);
        System.out.println("âœ… å¼‚æ­¥ç›‘å¬å™¨å·²è®¢é˜…ï¼š" + eventType);
    }
    
    // å¼‚æ­¥å‘å¸ƒäº‹ä»¶
    @SuppressWarnings("unchecked")
    public void publishAsync(Event event) {
        String eventType = event.getEventType();
        List<EventListener<?>> eventListeners = listeners.get(eventType);
        
        if (eventListeners != null && !eventListeners.isEmpty()) {
            System.out.println("ğŸ“¡ å¼‚æ­¥å‘å¸ƒäº‹ä»¶ï¼š" + eventType + " (ç›‘å¬å™¨æ•°é‡ï¼š" + eventListeners.size() + ")");
            
            // ä¸ºæ¯ä¸ªç›‘å¬å™¨åˆ›å»ºå¼‚æ­¥ä»»åŠ¡
            for (EventListener<?> listener : eventListeners) {
                executorService.submit(() -> {
                    try {
                        // è®°å½•å¤„ç†å¼€å§‹æ—¶é—´
                        long startTime = System.currentTimeMillis();
                        String threadName = Thread.currentThread().getName();
                        
                        System.out.println("âš¡ [" + threadName + "] å¼€å§‹å¤„ç†äº‹ä»¶ï¼š" + eventType);
                        
                        // å¤„ç†äº‹ä»¶
                        ((EventListener<Event>) listener).handleEvent(event);
                        
                        // è®°å½•å¤„ç†è€—æ—¶
                        long duration = System.currentTimeMillis() - startTime;
                        System.out.println("âœ… [" + threadName + "] äº‹ä»¶å¤„ç†å®Œæˆï¼Œè€—æ—¶ï¼š" + duration + "ms");
                        
                    } catch (Exception e) {
                        System.err.println("â— [å¼‚æ­¥å¤„ç†å¼‚å¸¸] " + e.getMessage());
                    }
                });
            }
        }
    }
    
    // ä¼˜é›…å…³é—­
    public void shutdown() {
        System.out.println("ğŸ›‘ å…³é—­å¼‚æ­¥äº‹ä»¶ç®¡ç†å™¨...");
        executorService.shutdown();
        try {
            if (!executorService.awaitTermination(5, TimeUnit.SECONDS)) {
                executorService.shutdownNow();
            }
        } catch (InterruptedException e) {
            executorService.shutdownNow();
        }
        System.out.println("âœ… å¼‚æ­¥äº‹ä»¶ç®¡ç†å™¨å·²å…³é—­");
    }
}
```

### 4.3 æ¨¡æ‹Ÿè€—æ—¶æ“ä½œçš„ç›‘å¬å™¨


```java
// æ…¢é€Ÿå¤„ç†ç›‘å¬å™¨ï¼ˆæ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œï¼‰
public class SlowDatabaseListener implements EventListener<Event> {
    private String name;
    
    public SlowDatabaseListener(String name) {
        this.name = name;
    }
    
    @Override
    public void handleEvent(Event event) {
        try {
            // æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œè€—æ—¶
            System.out.println("ğŸ’¾ [" + name + "] å¼€å§‹æ•°æ®åº“æ“ä½œ...");
            Thread.sleep(2000); // æ¨¡æ‹Ÿ2ç§’çš„æ•°æ®åº“æ“ä½œ
            System.out.println("ğŸ’¾ [" + name + "] æ•°æ®åº“æ“ä½œå®Œæˆï¼š" + event.getEventType());
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
    
    @Override
    public Class<Event> getEventType() {
        return Event.class;
    }
}

// å¿«é€Ÿå¤„ç†ç›‘å¬å™¨ï¼ˆæ¨¡æ‹Ÿç¼“å­˜æ“ä½œï¼‰
public class FastCacheListener implements EventListener<Event> {
    private String name;
    
    public FastCacheListener(String name) {
        this.name = name;
    }
    
    @Override
    public void handleEvent(Event event) {
        try {
            // æ¨¡æ‹Ÿç¼“å­˜æ“ä½œè€—æ—¶
            System.out.println("âš¡ [" + name + "] ç¼“å­˜æ“ä½œï¼š" + event.getEventType());
            Thread.sleep(100); // æ¨¡æ‹Ÿ100msçš„ç¼“å­˜æ“ä½œ
            System.out.println("âš¡ [" + name + "] ç¼“å­˜æ“ä½œå®Œæˆ");
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
    
    @Override
    public Class<Event> getEventType() {
        return Event.class;
    }
}
```

### 4.4 å¼‚æ­¥é€šçŸ¥æ¼”ç¤ºå¯¹æ¯”


```java
public class AsyncNotificationDemo {
    public static void main(String[] args) throws InterruptedException {
        System.out.println("========== åŒæ­¥ vs å¼‚æ­¥æ€§èƒ½å¯¹æ¯” ==========\n");
        
        // åˆ›å»ºåŒæ­¥å’Œå¼‚æ­¥äº‹ä»¶ç®¡ç†å™¨
        EventManager syncManager = new EventManager();
        AsyncEventManager asyncManager = new AsyncEventManager();
        
        // åˆ›å»ºä¸åŒé€Ÿåº¦çš„ç›‘å¬å™¨
        SlowDatabaseListener dbListener1 = new SlowDatabaseListener("æ•°æ®åº“1");
        SlowDatabaseListener dbListener2 = new SlowDatabaseListener("æ•°æ®åº“2");
        FastCacheListener cacheListener = new FastCacheListener("ç¼“å­˜");
        
        // æ³¨å†Œç›‘å¬å™¨åˆ°ä¸¤ä¸ªç®¡ç†å™¨
        syncManager.subscribe("TEST_EVENT", dbListener1);
        syncManager.subscribe("TEST_EVENT", dbListener2);
        syncManager.subscribe("TEST_EVENT", cacheListener);
        
        asyncManager.subscribe("TEST_EVENT", dbListener1);
        asyncManager.subscribe("TEST_EVENT", dbListener2);
        asyncManager.subscribe("TEST_EVENT", cacheListener);
        
        // åˆ›å»ºæµ‹è¯•äº‹ä»¶
        Map<String, Object> testData = new HashMap<>();
        testData.put("message", "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•äº‹ä»¶");
        UserEvent testEvent = new UserEvent("TEST_EVENT", testData);
        
        // æµ‹è¯•åŒæ­¥å¤„ç†
        System.out.println("=== åŒæ­¥å¤„ç†æµ‹è¯• ===");
        long syncStart = System.currentTimeMillis();
        syncManager.publish(testEvent);
        long syncDuration = System.currentTimeMillis() - syncStart;
        System.out.println("ğŸ• åŒæ­¥å¤„ç†æ€»è€—æ—¶ï¼š" + syncDuration + "ms\n");
        
        // ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œé¿å…è¾“å‡ºæ··ä¹±
        Thread.sleep(1000);
        
        // æµ‹è¯•å¼‚æ­¥å¤„ç†
        System.out.println("=== å¼‚æ­¥å¤„ç†æµ‹è¯• ===");
        long asyncStart = System.currentTimeMillis();
        asyncManager.publishAsync(testEvent);
        long asyncPublishTime = System.currentTimeMillis() - asyncStart;
        System.out.println("ğŸš€ å¼‚æ­¥å‘å¸ƒè€—æ—¶ï¼š" + asyncPublishTime + "msï¼ˆå‘å¸ƒå³è¿”å›ï¼‰");
        
        // ç­‰å¾…å¼‚æ­¥å¤„ç†å®Œæˆ
        System.out.println("â³ ç­‰å¾…å¼‚æ­¥å¤„ç†å®Œæˆ...");
        Thread.sleep(3000);
        
        // å…³é—­å¼‚æ­¥ç®¡ç†å™¨
        asyncManager.shutdown();
        
        System.out.println("\nğŸ“Š æ€§èƒ½å¯¹æ¯”æ€»ç»“ï¼š");
        System.out.println("  åŒæ­¥å¤„ç†ï¼š" + syncDuration + "msï¼ˆé˜»å¡ç­‰å¾…ï¼‰");
        System.out.println("  å¼‚æ­¥å‘å¸ƒï¼š" + asyncPublishTime + "msï¼ˆç«‹å³è¿”å›ï¼‰");
        System.out.println("  æ€§èƒ½æå‡ï¼š" + (syncDuration / (double)asyncPublishTime) + "å€");
    }
}
```

---

## 5. ğŸ§  å†…å­˜ç®¡ç†ä¸æ€§èƒ½ä¼˜åŒ–


### 5.1 å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³


**âš ï¸ è§‚å¯Ÿè€…æ¨¡å¼å¸¸è§å†…å­˜é—®é¢˜**

è§‚å¯Ÿè€…æ¨¡å¼å¦‚æœä½¿ç”¨ä¸å½“ï¼Œå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚å°±åƒè®¢é˜…äº†å¾ˆå¤šå…¬ä¼—å·ï¼Œå¦‚æœä¸å–æ¶ˆè®¢é˜…ï¼Œæ‰‹æœºå†…å­˜ä¼šè¶Šæ¥è¶Šæ»¡ã€‚

**ğŸ”¸ å¼±å¼•ç”¨è§£å†³æ–¹æ¡ˆ**

```java
import java.lang.ref.WeakReference;
import java.util.*;

// ä½¿ç”¨å¼±å¼•ç”¨çš„è§‚å¯Ÿè€…ç®¡ç†å™¨
public class WeakReferenceSubject {
    // ä½¿ç”¨å¼±å¼•ç”¨å­˜å‚¨è§‚å¯Ÿè€…ï¼Œé¿å…å†…å­˜æ³„æ¼
    private List<WeakReference<Observer>> observers = new ArrayList<>();
    
    public void addObserver(Observer observer) {
        // æ¸…ç†å·²å¤±æ•ˆçš„å¼±å¼•ç”¨
        cleanupInvalidReferences();
        
        // æ·»åŠ æ–°çš„å¼±å¼•ç”¨
        observers.add(new WeakReference<>(observer));
        System.out.println("ğŸ“ æ·»åŠ è§‚å¯Ÿè€…ï¼ˆå¼±å¼•ç”¨ï¼‰ï¼Œå½“å‰æ•°é‡ï¼š" + getValidObserverCount());
    }
    
    public void removeObserver(Observer observer) {
        observers.removeIf(ref -> {
            Observer obs = ref.get();
            return obs == null || obs.equals(observer);
        });
        System.out.println("ğŸ—‘ï¸ ç§»é™¤è§‚å¯Ÿè€…ï¼Œå½“å‰æ•°é‡ï¼š" + getValidObserverCount());
    }
    
    protected void notifyObservers(String message) {
        cleanupInvalidReferences();
        
        List<Observer> validObservers = new ArrayList<>();
        for (WeakReference<Observer> ref : observers) {
            Observer observer = ref.get();
            if (observer != null) {
                validObservers.add(observer);
            }
        }
        
        System.out.println("ğŸ“¢ é€šçŸ¥ " + validObservers.size() + " ä¸ªæœ‰æ•ˆè§‚å¯Ÿè€…");
        for (Observer observer : validObservers) {
            observer.update(message);
        }
    }
    
    // æ¸…ç†å¤±æ•ˆçš„å¼±å¼•ç”¨
    private void cleanupInvalidReferences() {
        int sizeBefore = observers.size();
        observers.removeIf(ref -> ref.get() == null);
        int sizeAfter = observers.size();
        
        if (sizeBefore != sizeAfter) {
            System.out.println("ğŸ§¹ æ¸…ç†äº† " + (sizeBefore - sizeAfter) + " ä¸ªå¤±æ•ˆå¼•ç”¨");
        }
    }
    
    // è·å–æœ‰æ•ˆè§‚å¯Ÿè€…æ•°é‡
    public int getValidObserverCount() {
        cleanupInvalidReferences();
        return observers.size();
    }
}
```

### 5.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**ğŸš€ æ‰¹é‡é€šçŸ¥ä¼˜åŒ–**

```java
import java.util.concurrent.*;

public class BatchNotificationSubject {
    private List<Observer> observers = new ArrayList<>();
    private BlockingQueue<String> messageQueue = new LinkedBlockingQueue<>();
    private ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
    private volatile boolean running = true;
    
    public BatchNotificationSubject() {
        // å¯åŠ¨æ‰¹é‡å¤„ç†ä»»åŠ¡ï¼Œæ¯éš”500mså¤„ç†ä¸€æ¬¡
        scheduler.scheduleAtFixedRate(this::processBatch, 500, 500, TimeUnit.MILLISECONDS);
        System.out.println("ğŸ”„ æ‰¹é‡é€šçŸ¥ç³»ç»Ÿå·²å¯åŠ¨");
    }
    
    public void addObserver(Observer observer) {
        synchronized (observers) {
            observers.add(observer);
        }
    }
    
    // å¼‚æ­¥æäº¤æ¶ˆæ¯åˆ°é˜Ÿåˆ—
    public void notifyObserversAsync(String message) {
        try {
            messageQueue.offer(message);
            System.out.println("ğŸ“¥ æ¶ˆæ¯å·²åŠ å…¥é˜Ÿåˆ—ï¼š" + message + "ï¼ˆé˜Ÿåˆ—é•¿åº¦ï¼š" + messageQueue.size() + "ï¼‰");
        } catch (Exception e) {
            System.err.println("â— æ¶ˆæ¯å…¥é˜Ÿå¤±è´¥ï¼š" + e.getMessage());
        }
    }
    
    // æ‰¹é‡å¤„ç†æ¶ˆæ¯
    private void processBatch() {
        if (!running || messageQueue.isEmpty()) {
            return;
        }
        
        List<String> messages = new ArrayList<>();
        messageQueue.drainTo(messages, 10); // æ¯æ¬¡æœ€å¤šå¤„ç†10æ¡æ¶ˆæ¯
        
        if (!messages.isEmpty()) {
            System.out.println("ğŸ”„ å¼€å§‹æ‰¹é‡å¤„ç† " + messages.size() + " æ¡æ¶ˆæ¯");
            
            synchronized (observers) {
                for (Observer observer : observers) {
                    for (String message : messages) {
                        observer.update(message);
                    }
                }
            }
            
            System.out.println("âœ… æ‰¹é‡å¤„ç†å®Œæˆ");
        }
    }
    
    public void shutdown() {
        running = false;
        scheduler.shutdown();
        System.out.println("ğŸ›‘ æ‰¹é‡é€šçŸ¥ç³»ç»Ÿå·²å…³é—­");
    }
}
```

### 5.3 å†…å­˜ç›‘æ§å’Œæµ‹è¯•


```java
public class MemoryMonitorDemo {
    public static void main(String[] args) throws InterruptedException {
        System.out.println("=== å†…å­˜ç®¡ç†æµ‹è¯• ===\n");
        
        // è·å–è¿è¡Œæ—¶ç¯å¢ƒ
        Runtime runtime = Runtime.getRuntime();
        
        // æµ‹è¯•æ™®é€šå¼•ç”¨ vs å¼±å¼•ç”¨
        testNormalReference();
        System.gc(); // å»ºè®®åƒåœ¾å›æ”¶
        Thread.sleep(1000);
        
        testWeakReference();
        System.gc(); // å»ºè®®åƒåœ¾å›æ”¶
        Thread.sleep(1000);
        
        // æ‰“å°å†…å­˜ä½¿ç”¨æƒ…å†µ
        long totalMemory = runtime.totalMemory();
        long freeMemory = runtime.freeMemory();
        long usedMemory = totalMemory - freeMemory;
        
        System.out.println("ğŸ“Š å†…å­˜ä½¿ç”¨æƒ…å†µï¼š");
        System.out.println("  æ€»å†…å­˜ï¼š" + formatBytes(totalMemory));
        System.out.println("  å·²ç”¨å†…å­˜ï¼š" + formatBytes(usedMemory));
        System.out.println("  ç©ºé—²å†…å­˜ï¼š" + formatBytes(freeMemory));
    }
    
    private static void testNormalReference() {
        System.out.println("--- æ™®é€šå¼•ç”¨æµ‹è¯• ---");
        Subject subject = new NewsPublisher();
        
        // åˆ›å»ºå¤§é‡è§‚å¯Ÿè€…
        for (int i = 0; i < 1000; i++) {
            MobileUser user = new MobileUser("User" + i);
            subject.addObserver(user);
            // æ³¨æ„ï¼šè¿™é‡Œuseråœ¨å¾ªç¯å¤–æ²¡æœ‰å¼•ç”¨ï¼Œä½†SubjectæŒæœ‰å¼ºå¼•ç”¨
        }
        
        System.out.println("ğŸ’¾ åˆ›å»ºäº†1000ä¸ªè§‚å¯Ÿè€…ï¼ˆå¼ºå¼•ç”¨ï¼‰");
        // å³ä½¿userå˜é‡ç¦»å¼€ä½œç”¨åŸŸï¼ŒSubjectä»ç„¶æŒæœ‰è§‚å¯Ÿè€…çš„å¼ºå¼•ç”¨
    }
    
    private static void testWeakReference() {
        System.out.println("--- å¼±å¼•ç”¨æµ‹è¯• ---");
        WeakReferenceSubject subject = new WeakReferenceSubject();
        
        // åˆ›å»ºå¤§é‡è§‚å¯Ÿè€…
        for (int i = 0; i < 1000; i++) {
            MobileUser user = new MobileUser("User" + i);
            subject.addObserver(user);
            // userç¦»å¼€ä½œç”¨åŸŸåï¼Œåªæœ‰å¼±å¼•ç”¨æŒ‡å‘å®ƒï¼Œå¯ä»¥è¢«GCå›æ”¶
        }
        
        System.out.println("ğŸ’¾ åˆ›å»ºäº†1000ä¸ªè§‚å¯Ÿè€…ï¼ˆå¼±å¼•ç”¨ï¼‰");
        System.out.println("ğŸ—‘ï¸ è§¦å‘GCåï¼Œå¼±å¼•ç”¨çš„è§‚å¯Ÿè€…å¯èƒ½è¢«å›æ”¶");
    }
    
    private static String formatBytes(long bytes) {
        if (bytes < 1024) return bytes + " B";
        if (bytes < 1024 * 1024) return (bytes / 1024) + " KB";
        return (bytes / (1024 * 1024)) + " MB";
    }
}
```

---

## 6. ğŸ¢ å®é™…æ¡†æ¶é›†æˆåº”ç”¨


### 6.1 Springäº‹ä»¶æœºåˆ¶é›†æˆ


**ğŸŒ± Springæ¡†æ¶ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼**

Springæ¡†æ¶å†…ç½®äº†å¼ºå¤§çš„äº‹ä»¶æœºåˆ¶ï¼Œè¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å®é™…åº”ç”¨ã€‚å°±åƒSpringå¸®æˆ‘ä»¬æ­å»ºå¥½äº†ä¸€ä¸ªå®Œæ•´çš„é€šçŸ¥ç³»ç»Ÿã€‚

```java
import org.springframework.context.ApplicationEvent;
import org.springframework.context.ApplicationListener;
import org.springframework.context.ApplicationEventPublisher;
import org.springframework.stereotype.Component;

// è‡ªå®šä¹‰Springäº‹ä»¶
public class OrderCreatedEvent extends ApplicationEvent {
    private String orderId;
    private Double amount;
    
    public OrderCreatedEvent(Object source, String orderId, Double amount) {
        super(source);
        this.orderId = orderId;
        this.amount = amount;
    }
    
    // getteræ–¹æ³•
    public String getOrderId() { return orderId; }
    public Double getAmount() { return amount; }
}

// äº‹ä»¶ç›‘å¬å™¨
@Component
public class EmailNotificationListener implements ApplicationListener<OrderCreatedEvent> {
    
    @Override
    public void onApplicationEvent(OrderCreatedEvent event) {
        System.out.println("ğŸ“§ [é‚®ä»¶é€šçŸ¥] è®¢å•åˆ›å»ºï¼š" + event.getOrderId() + 
                          "ï¼Œé‡‘é¢ï¼š$" + event.getAmount());
        // å®é™…çš„é‚®ä»¶å‘é€é€»è¾‘
        sendEmailNotification(event.getOrderId(), event.getAmount());
    }
    
    private void sendEmailNotification(String orderId, Double amount) {
        // æ¨¡æ‹Ÿé‚®ä»¶å‘é€
        System.out.println("âœ‰ï¸ é‚®ä»¶å·²å‘é€ï¼šè®¢å•" + orderId + "åˆ›å»ºæˆåŠŸ");
    }
}

// ä¸šåŠ¡æœåŠ¡ç±»
@Component
public class OrderService {
    private ApplicationEventPublisher eventPublisher;
    
    public OrderService(ApplicationEventPublisher eventPublisher) {
        this.eventPublisher = eventPublisher;
    }
    
    public void createOrder(String orderId, Double amount) {
        // è®¢å•åˆ›å»ºé€»è¾‘
        System.out.println("ğŸ›’ åˆ›å»ºè®¢å•ï¼š" + orderId);
        
        // å‘å¸ƒäº‹ä»¶
        OrderCreatedEvent event = new OrderCreatedEvent(this, orderId, amount);
        eventPublisher.publishEvent(event);
        
        System.out.println("âœ… è®¢å•åˆ›å»ºå®Œæˆ");
    }
}
```

### 6.2 æ¶ˆæ¯é˜Ÿåˆ—é›†æˆç¤ºä¾‹


**ğŸ“¡ åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„äº‹ä»¶ç³»ç»Ÿ**

```java
// æ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—çš„äº‹ä»¶ç³»ç»Ÿ
public class MessageQueueEventSystem {
    
    // æ¨¡æ‹Ÿæ¶ˆæ¯é˜Ÿåˆ—å®¢æˆ·ç«¯
    public static class MessageQueue {
        private Map<String, List<MessageConsumer>> consumers = new ConcurrentHashMap<>();
        private ExecutorService executor = Executors.newFixedThreadPool(10);
        
        // è®¢é˜…ä¸»é¢˜
        public void subscribe(String topic, MessageConsumer consumer) {
            consumers.computeIfAbsent(topic, k -> new ArrayList<>()).add(consumer);
            System.out.println("ğŸ“¡ è®¢é˜…ä¸»é¢˜ï¼š" + topic);
        }
        
        // å‘å¸ƒæ¶ˆæ¯
        public void publish(String topic, Object message) {
            List<MessageConsumer> topicConsumers = consumers.get(topic);
            if (topicConsumers != null) {
                System.out.println("ğŸ“¤ å‘å¸ƒæ¶ˆæ¯åˆ°ä¸»é¢˜ï¼š" + topic);
                
                for (MessageConsumer consumer : topicConsumers) {
                    // å¼‚æ­¥å¤„ç†æ¶ˆæ¯
                    executor.submit(() -> {
                        try {
                            consumer.consume(topic, message);
                        } catch (Exception e) {
                            System.err.println("â— æ¶ˆæ¯å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
                        }
                    });
                }
            }
        }
        
        public void shutdown() {
            executor.shutdown();
        }
    }
    
    // æ¶ˆæ¯æ¶ˆè´¹è€…æ¥å£
    public interface MessageConsumer {
        void consume(String topic, Object message);
    }
    
    // å…·ä½“çš„æ¶ˆæ¯æ¶ˆè´¹è€…
    public static class OrderProcessor implements MessageConsumer {
        @Override
        public void consume(String topic, Object message) {
            System.out.println("ğŸ­ [è®¢å•å¤„ç†å™¨] å¤„ç†æ¶ˆæ¯ï¼š" + message);
            // æ¨¡æ‹Ÿå¤„ç†æ—¶é—´
            try {
                Thread.sleep(1000);
                System.out.println("âœ… [è®¢å•å¤„ç†å™¨] å¤„ç†å®Œæˆ");
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }
    
    public static class InventoryUpdater implements MessageConsumer {
        @Override
        public void consume(String topic, Object message) {
            System.out.println("ğŸ“¦ [åº“å­˜æ›´æ–°å™¨] æ›´æ–°åº“å­˜ï¼š" + message);
            try {
                Thread.sleep(500);
                System.out.println("âœ… [åº“å­˜æ›´æ–°å™¨] åº“å­˜å·²æ›´æ–°");
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }
    
    // æ¼”ç¤ºæ–¹æ³•
    public static void demo() throws InterruptedException {
        MessageQueue mq = new MessageQueue();
        
        // æ³¨å†Œæ¶ˆè´¹è€…
        mq.subscribe("order.created", new OrderProcessor());
        mq.subscribe("order.created", new InventoryUpdater());
        
        // å‘å¸ƒè®¢å•åˆ›å»ºæ¶ˆæ¯
        Map<String, Object> orderData = new HashMap<>();
        orderData.put("orderId", "ORD-2024-001");
        orderData.put("productId", "PROD-123");
        orderData.put("quantity", 2);
        
        mq.publish("order.created", orderData);
        
        // ç­‰å¾…å¤„ç†å®Œæˆ
        Thread.sleep(2000);
        mq.shutdown();
    }
}
```

### 6.3 å®é™…ä¸šåŠ¡åœºæ™¯åº”ç”¨


**ğŸª ç”µå•†ç³»ç»Ÿç»¼åˆç¤ºä¾‹**

```java
// ç”µå•†ç³»ç»Ÿäº‹ä»¶é©±åŠ¨æ¶æ„
public class ECommerceEventSystem {
    
    // ä¸šåŠ¡äº‹ä»¶å®šä¹‰
    public static class BusinessEvent {
        private String eventType;
        private Map<String, Object> data;
        private long timestamp;
        
        public BusinessEvent(String eventType, Map<String, Object> data) {
            this.eventType = eventType;
            this.data = data;
            this.timestamp = System.currentTimeMillis();
        }
        
        // getteræ–¹æ³•çœç•¥...
        public String getEventType() { return eventType; }
        public Map<String, Object> getData() { return data; }
        public long getTimestamp() { return timestamp; }
    }
    
    // ç»¼åˆä¸šåŠ¡ç›‘å¬å™¨
    public static class BusinessEventListener {
        private String listenerName;
        
        public BusinessEventListener(String listenerName) {
            this.listenerName = listenerName;
        }
        
        public void handleUserRegistered(BusinessEvent event) {
            Map<String, Object> data = event.getData();
            System.out.println("ğŸ‘¤ [" + listenerName + "] ç”¨æˆ·æ³¨å†Œï¼š" + data.get("username"));
            
            // ä¸šåŠ¡é€»è¾‘ï¼šå‘é€æ¬¢è¿é‚®ä»¶ã€èµ é€ä¼˜æƒ åˆ¸ç­‰
            sendWelcomeEmail((String) data.get("email"));
            giveCoupon((String) data.get("userId"));
        }
        
        public void handleOrderPlaced(BusinessEvent event) {
            Map<String, Object> data = event.getData();
            System.out.println("ğŸ›’ [" + listenerName + "] è®¢å•åˆ›å»ºï¼š" + data.get("orderId"));
            
            // ä¸šåŠ¡é€»è¾‘ï¼šåº“å­˜æ£€æŸ¥ã€æ”¯ä»˜å¤„ç†ã€ç‰©æµå®‰æ’
            checkInventory((String) data.get("productId"), (Integer) data.get("quantity"));
            arrangeLogistics((String) data.get("orderId"));
        }
        
        public void handlePaymentCompleted(BusinessEvent event) {
            Map<String, Object> data = event.getData();
            System.out.println("ğŸ’³ [" + listenerName + "] æ”¯ä»˜å®Œæˆï¼š" + data.get("paymentId"));
            
            // ä¸šåŠ¡é€»è¾‘ï¼šå‘è´§ã€å¼€å‘ç¥¨ã€ç§¯åˆ†å¥–åŠ±
            triggerShipment((String) data.get("orderId"));
            generateInvoice((String) data.get("orderId"));
            awardPoints((String) data.get("userId"), (Double) data.get("amount"));
        }
        
        // æ¨¡æ‹Ÿå…·ä½“ä¸šåŠ¡æ–¹æ³•
        private void sendWelcomeEmail(String email) {
            System.out.println("  ğŸ“§ å‘é€æ¬¢è¿é‚®ä»¶åˆ°ï¼š" + email);
        }
        
        private void giveCoupon(String userId) {
            System.out.println("  ğŸŸï¸ èµ é€æ–°ç”¨æˆ·ä¼˜æƒ åˆ¸ï¼š" + userId);
        }
        
        private void checkInventory(String productId, Integer quantity) {
            System.out.println("  ğŸ“¦ æ£€æŸ¥åº“å­˜ï¼šäº§å“" + productId + "ï¼Œæ•°é‡" + quantity);
        }
        
        private void arrangeLogistics(String orderId) {
            System.out.println("  ğŸšš å®‰æ’ç‰©æµï¼šè®¢å•" + orderId);
        }
        
        private void triggerShipment(String orderId) {
            System.out.println("  ğŸ“¦ è§¦å‘å‘è´§ï¼šè®¢å•" + orderId);
        }
        
        private void generateInvoice(String orderId) {
            System.out.println("  ğŸ§¾ ç”Ÿæˆå‘ç¥¨ï¼šè®¢å•" + orderId);
        }
        
        private void awardPoints(String userId, Double amount) {
            int points = (int) (amount * 0.1); // 1%è¿”ç‚¹
            System.out.println("  â­ ç§¯åˆ†å¥–åŠ±ï¼šç”¨æˆ·" + userId + "è·å¾—" + points + "ç§¯åˆ†");
        }
    }
    
    // ä¸šåŠ¡äº‹ä»¶ç®¡ç†å™¨
    public static class BusinessEventManager {
        private Map<String, List<BusinessEventListener>> listeners = new HashMap<>();
        
        public void registerListener(String eventType, BusinessEventListener listener) {
            listeners.computeIfAbsent(eventType, k -> new ArrayList<>()).add(listener);
        }
        
        public void publishEvent(BusinessEvent event) {
            String eventType = event.getEventType();
            List<BusinessEventListener> eventListeners = listeners.get(eventType);
            
            if (eventListeners != null) {
                for (BusinessEventListener listener : eventListeners) {
                    switch (eventType) {
                        case "USER_REGISTERED":
                            listener.handleUserRegistered(event);
                            break;
                        case "ORDER_PLACED":
                            listener.handleOrderPlaced(event);
                            break;
                        case "PAYMENT_COMPLETED":
                            listener.handlePaymentCompleted(event);
                            break;
                    }
                }
            }
        }
    }
    
    // ç»¼åˆæ¼”ç¤º
    public static void demo() {
        BusinessEventManager eventManager = new BusinessEventManager();
        
        // æ³¨å†Œå„ç§ä¸šåŠ¡ç›‘å¬å™¨
        eventManager.registerListener("USER_REGISTERED", new BusinessEventListener("ç”¨æˆ·æœåŠ¡"));
        eventManager.registerListener("USER_REGISTERED", new BusinessEventListener("è¥é”€æœåŠ¡"));
        
        eventManager.registerListener("ORDER_PLACED", new BusinessEventListener("è®¢å•æœåŠ¡"));
        eventManager.registerListener("ORDER_PLACED", new BusinessEventListener("åº“å­˜æœåŠ¡"));
        
        eventManager.registerListener("PAYMENT_COMPLETED", new BusinessEventListener("æ”¯ä»˜æœåŠ¡"));
        eventManager.registerListener("PAYMENT_COMPLETED", new BusinessEventListener("ç‰©æµæœåŠ¡"));
        
        // æ¨¡æ‹Ÿä¸šåŠ¡æµç¨‹
        System.out.println("=== æ¨¡æ‹Ÿç”¨æˆ·æ³¨å†Œ ===");
        Map<String, Object> userData = new HashMap<>();
        userData.put("userId", "U12345");
        userData.put("username", "å¼ ä¸‰");
        userData.put("email", "zhangsan@example.com");
        eventManager.publishEvent(new BusinessEvent("USER_REGISTERED", userData));
        
        System.out.println("\n=== æ¨¡æ‹Ÿè®¢å•åˆ›å»º ===");
        Map<String, Object> orderData = new HashMap<>();
        orderData.put("orderId", "ORD-001");
        orderData.put("userId", "U12345");
        orderData.put("productId", "PROD-456");
        orderData.put("quantity", 2);
        eventManager.publishEvent(new BusinessEvent("ORDER_PLACED", orderData));
        
        System.out.println("\n=== æ¨¡æ‹Ÿæ”¯ä»˜å®Œæˆ ===");
        Map<String, Object> paymentData = new HashMap<>();
        paymentData.put("paymentId", "PAY-789");
        paymentData.put("orderId", "ORD-001");
        paymentData.put("userId", "U12345");
        paymentData.put("amount", 199.99);
        eventManager.publishEvent(new BusinessEvent("PAYMENT_COMPLETED", paymentData));
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å®æˆ˜å­¦ä¹ çš„å…³é”®æ”¶è·


**ğŸ¯ ä»£ç èƒ½åŠ›æå‡**
```
ä»ç†è®ºåˆ°å®è·µçš„è½¬å˜ï¼š
âœ… ç†è§£äº†è§‚å¯Ÿè€…æ¨¡å¼çš„åŸºæœ¬å®ç°ç»“æ„
âœ… æŒæ¡äº†äº‹ä»¶é©±åŠ¨ç³»ç»Ÿçš„è®¾è®¡æ€è·¯  
âœ… å­¦ä¼šäº†å¼‚æ­¥é€šçŸ¥çš„å®ç°æ–¹æ³•
âœ… äº†è§£äº†å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§
```

**ğŸ’¡ å®é™…åº”ç”¨ç†è§£**
```
è§‚å¯Ÿè€…æ¨¡å¼åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ï¼š
- GUIäº‹ä»¶å¤„ç†ï¼šæŒ‰é’®ç‚¹å‡»ã€èœå•é€‰æ‹©
- ä¸šåŠ¡ç³»ç»Ÿï¼šè®¢å•æµç¨‹ã€ç”¨æˆ·è¡Œä¸ºè¿½è¸ª
- æ¡†æ¶é›†æˆï¼šSpringäº‹ä»¶ã€æ¶ˆæ¯é˜Ÿåˆ—
- ç³»ç»Ÿç›‘æ§ï¼šæ—¥å¿—è®°å½•ã€æ€§èƒ½ç»Ÿè®¡
```

### 7.2 ä»£ç å®ç°æœ€ä½³å®è·µ


**ğŸ”§ è®¾è®¡åŸåˆ™**
```
æ¥å£éš”ç¦»ï¼š
âœ… è§‚å¯Ÿè€…æ¥å£è¦ç®€æ´æ˜ç¡®
âœ… äº‹ä»¶ç±»å‹è¦èŒè´£å•ä¸€
âœ… é¿å…ä¸€ä¸ªæ¥å£æ‰¿æ‹…å¤ªå¤šè´£ä»»

æ¾è€¦åˆï¼š
âœ… è§‚å¯Ÿè€…ä¸åº”è¯¥çŸ¥é“å…¶ä»–è§‚å¯Ÿè€…çš„å­˜åœ¨
âœ… è¢«è§‚å¯Ÿè€…ä¸åº”è¯¥ä¾èµ–å…·ä½“è§‚å¯Ÿè€…ç±»å‹
âœ… é€šè¿‡æ¥å£å’ŒæŠ½è±¡ç±»å®ç°è§£è€¦

å¯æ‰©å±•æ€§ï¼š
âœ… æ–°å¢è§‚å¯Ÿè€…ä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç 
âœ… äº‹ä»¶ç±»å‹è¦æ”¯æŒæ–¹ä¾¿çš„æ‰©å±•
âœ… ç³»ç»Ÿè¦æ”¯æŒåŠ¨æ€æ³¨å†Œå’Œæ³¨é”€
```

**âš¡ æ€§èƒ½è€ƒè™‘**
```
åŒæ­¥ vs å¼‚æ­¥ï¼š
- ç®€å•åœºæ™¯ï¼šåŒæ­¥é€šçŸ¥ï¼Œä»£ç ç®€å•
- å¤æ‚åœºæ™¯ï¼šå¼‚æ­¥é€šçŸ¥ï¼Œé¿å…é˜»å¡
- æ··åˆæ–¹å¼ï¼šå…³é”®äº‹ä»¶åŒæ­¥ï¼Œæ™®é€šäº‹ä»¶å¼‚æ­¥

å†…å­˜ç®¡ç†ï¼š
- åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„è§‚å¯Ÿè€…
- ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼
- æ‰¹é‡å¤„ç†å‡å°‘é¢‘ç¹é€šçŸ¥

çº¿ç¨‹å®‰å…¨ï¼š
- å¤šçº¿ç¨‹ç¯å¢ƒè¦è€ƒè™‘å¹¶å‘å®‰å…¨
- ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»
- å¿…è¦æ—¶æ·»åŠ åŒæ­¥æœºåˆ¶
```

### 7.3 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â— å…¸å‹é—®é¢˜æ€»ç»“**
```
å¾ªç¯ä¾èµ–ï¼š
é—®é¢˜ï¼šAè§‚å¯ŸBï¼ŒBåˆè§‚å¯ŸAï¼Œé€ æˆæ— é™å¾ªç¯
è§£å†³ï¼šè®¾è®¡æ—¶é¿å…å¾ªç¯ä¾èµ–ï¼Œæˆ–æ·»åŠ å¾ªç¯æ£€æµ‹æœºåˆ¶

æ€§èƒ½é—®é¢˜ï¼š
é—®é¢˜ï¼šè§‚å¯Ÿè€…å¤ªå¤šå¯¼è‡´é€šçŸ¥å¾ˆæ…¢
è§£å†³ï¼šä½¿ç”¨å¼‚æ­¥é€šçŸ¥ã€æ‰¹é‡å¤„ç†ã€ä¼˜å…ˆçº§é˜Ÿåˆ—

å†…å­˜æ³„æ¼ï¼š
é—®é¢˜ï¼šè§‚å¯Ÿè€…æ²¡æœ‰æ­£ç¡®æ³¨é”€å¯¼è‡´å†…å­˜æ³„æ¼
è§£å†³ï¼šä½¿ç”¨å¼±å¼•ç”¨ã€è‡ªåŠ¨æ¸…ç†æœºåˆ¶ã€è§„èŒƒåŒ–æ³¨é”€

å¼‚å¸¸å¤„ç†ï¼š
é—®é¢˜ï¼šä¸€ä¸ªè§‚å¯Ÿè€…å‡ºé”™å½±å“å…¶ä»–è§‚å¯Ÿè€…
è§£å†³ï¼šå¼‚å¸¸éš”ç¦»ã€å®¹é”™æœºåˆ¶ã€æ—¥å¿—è®°å½•
```

### 7.4 è¿›é˜¶å­¦ä¹ å»ºè®®


**ğŸ“š ç»§ç»­å­¦ä¹ æ–¹å‘**
```
æ·±å…¥æ¡†æ¶æºç ï¼š
- ç ”ç©¶Springçš„äº‹ä»¶æœºåˆ¶æºç 
- å­¦ä¹ æ¶ˆæ¯é˜Ÿåˆ—çš„å®ç°åŸç†
- äº†è§£å“åº”å¼ç¼–ç¨‹ï¼ˆRxJavaã€Spring WebFluxï¼‰

è®¾è®¡æ¨¡å¼ç»„åˆï¼š
- è§‚å¯Ÿè€… + ç­–ç•¥æ¨¡å¼ï¼šä¸åŒç±»å‹äº‹ä»¶çš„å¤„ç†ç­–ç•¥
- è§‚å¯Ÿè€… + å·¥å‚æ¨¡å¼ï¼šåŠ¨æ€åˆ›å»ºè§‚å¯Ÿè€…
- è§‚å¯Ÿè€… + å‘½ä»¤æ¨¡å¼ï¼šäº‹ä»¶å¤„ç†çš„æ’¤é”€å’Œé‡åš

æ¶æ„çº§åº”ç”¨ï¼š
- å¾®æœåŠ¡ä¹‹é—´çš„äº‹ä»¶é€šä¿¡
- CQRSï¼ˆå‘½ä»¤æŸ¥è¯¢è´£ä»»åˆ†ç¦»ï¼‰æ¶æ„
- äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰æ¨¡å¼
```

**ğŸ¯ å®è·µå»ºè®®**
```
é¡¹ç›®å®è·µï¼š
1. åœ¨ä¸ªäººé¡¹ç›®ä¸­åº”ç”¨è§‚å¯Ÿè€…æ¨¡å¼
2. å°è¯•å®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶ç³»ç»Ÿ
3. å‚ä¸å¼€æºé¡¹ç›®ï¼Œå­¦ä¹ å®é™…åº”ç”¨

æŠ€èƒ½å»ºè®¾ï¼š
1. å¤šå†™ä»£ç ï¼Œä»ç®€å•åˆ°å¤æ‚
2. é˜…è¯»ä¼˜ç§€æ¡†æ¶çš„æºç å®ç°
3. æ€»ç»“å’Œåˆ†äº«è‡ªå·±çš„å®è·µç»éªŒ

æ€ç»´åŸ¹å…»ï¼š
1. åŸ¹å…»äº‹ä»¶é©±åŠ¨çš„æ€ç»´æ–¹å¼
2. å­¦ä¼šä»ä¸šåŠ¡éœ€æ±‚æŠ½è±¡å‡ºäº‹ä»¶æ¨¡å‹
3. æ³¨é‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- è§‚å¯Ÿè€…æ¨¡å¼çš„æ ¸å¿ƒæ˜¯"å‘å¸ƒ-è®¢é˜…"æœºåˆ¶
- å®é™…åº”ç”¨è¦è€ƒè™‘å¼‚æ­¥å¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–
- å†…å­˜ç®¡ç†å’Œçº¿ç¨‹å®‰å…¨æ˜¯é‡è¦è€ƒè™‘å› ç´ 
- æ¡†æ¶é›†æˆèƒ½å¤§å¤§ç®€åŒ–å¼€å‘å¤æ‚åº¦
- ä»ç®€å•ç¤ºä¾‹å¼€å§‹ï¼Œé€æ­¥åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­