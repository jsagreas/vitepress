---
title: 2ã€ç»„åˆæ¨¡å¼ç»“æ„åˆ†æ
---
## ğŸ“š ç›®å½•

1. [ç»„åˆæ¨¡å¼æ•´ä½“ç»“æ„](#1-ç»„åˆæ¨¡å¼æ•´ä½“ç»“æ„)
2. [æŠ½è±¡ç»„ä»¶æ¥å£è®¾è®¡](#2-æŠ½è±¡ç»„ä»¶æ¥å£è®¾è®¡)
3. [å¶å­èŠ‚ç‚¹å®ç°è¯¦è§£](#3-å¶å­èŠ‚ç‚¹å®ç°è¯¦è§£)
4. [ç»„åˆèŠ‚ç‚¹å®ç°è¯¦è§£](#4-ç»„åˆèŠ‚ç‚¹å®ç°è¯¦è§£)
5. [å®¢æˆ·ç«¯æ“ä½œæ–¹å¼](#5-å®¢æˆ·ç«¯æ“ä½œæ–¹å¼)
6. [æ ‘å½¢ç»“æ„ç®¡ç†æœºåˆ¶](#6-æ ‘å½¢ç»“æ„ç®¡ç†æœºåˆ¶)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ ç»„åˆæ¨¡å¼æ•´ä½“ç»“æ„


### 1.1 ä»€ä¹ˆæ˜¯ç»„åˆæ¨¡å¼çš„ç»“æ„


**ğŸ”¸ é€šä¿—ç†è§£**
ç»„åˆæ¨¡å¼å°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œæœ‰ä¸¤ç§ç§¯æœ¨ï¼š
- **åŸºç¡€ç§¯æœ¨**ï¼šä¸èƒ½å†æ‹†åˆ†çš„æœ€å°å•å…ƒï¼ˆå¶å­èŠ‚ç‚¹ï¼‰
- **ç»„åˆç§¯æœ¨**ï¼šç”±å¤šä¸ªåŸºç¡€ç§¯æœ¨æˆ–å…¶ä»–ç»„åˆç§¯æœ¨æ‹¼æˆçš„ï¼ˆç»„åˆèŠ‚ç‚¹ï¼‰

ä¸ç®¡æ˜¯åŸºç¡€ç§¯æœ¨è¿˜æ˜¯ç»„åˆç§¯æœ¨ï¼Œæˆ‘ä»¬éƒ½ç”¨åŒæ ·çš„æ–¹å¼æ¥æ“ä½œå®ƒä»¬ã€‚

**ğŸ’¡ æ ¸å¿ƒæ€æƒ³**
```
æŠŠ"ä¸ªä½“"å’Œ"æ•´ä½“"ç”¨ç»Ÿä¸€çš„æ–¹å¼æ¥å¤„ç†
ä¸ªä½“ = å¶å­èŠ‚ç‚¹ï¼ˆä¸èƒ½å†åˆ†è§£ï¼‰
æ•´ä½“ = ç»„åˆèŠ‚ç‚¹ï¼ˆåŒ…å«å…¶ä»–èŠ‚ç‚¹ï¼‰
ç»Ÿä¸€æ–¹å¼ = ç›¸åŒçš„æ¥å£
```

### 1.2 è§’è‰²æ„æˆå…³ç³»å›¾


```
ç»„åˆæ¨¡å¼è§’è‰²å…³ç³»ï¼š

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Component     â”‚ â† æŠ½è±¡ç»„ä»¶ï¼ˆå®šä¹‰ç»Ÿä¸€æ¥å£ï¼‰
    â”‚   (æŠ½è±¡æ¥å£)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â”‚           â”‚
  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Leaf    â”‚ â”‚  Composite   â”‚
  â”‚  (å¶å­)    â”‚ â”‚   (ç»„åˆ)     â”‚
  â”‚  åŸºç¡€å•å…ƒ   â”‚ â”‚  åŒ…å«å­èŠ‚ç‚¹   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                â”‚   children  â”‚ â† å­èŠ‚ç‚¹é›†åˆ
                â”‚ (Component) â”‚   (å¯ä»¥æ˜¯å¶å­æˆ–ç»„åˆ)
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å®é™…åº”ç”¨ç±»æ¯”


**ğŸ“ æ–‡ä»¶ç³»ç»Ÿç»“æ„**
```
æ–‡ä»¶ç³»ç»Ÿç¤ºä¾‹ï¼š
Cç›˜/
â”œâ”€â”€ æ–‡ä»¶å¤¹A/          â† ç»„åˆèŠ‚ç‚¹ï¼ˆåŒ…å«å…¶ä»–æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼‰
â”‚   â”œâ”€â”€ æ–‡æ¡£1.txt     â† å¶å­èŠ‚ç‚¹ï¼ˆä¸èƒ½å†åŒ…å«å…¶ä»–ä¸œè¥¿ï¼‰
â”‚   â”œâ”€â”€ æ–‡æ¡£2.pdf     â† å¶å­èŠ‚ç‚¹
â”‚   â””â”€â”€ å­æ–‡ä»¶å¤¹B/    â† ç»„åˆèŠ‚ç‚¹
â”‚       â”œâ”€â”€ å›¾ç‰‡.jpg  â† å¶å­èŠ‚ç‚¹
â”‚       â””â”€â”€ éŸ³ä¹.mp3  â† å¶å­èŠ‚ç‚¹
â””â”€â”€ æ–‡ä»¶å¤¹C/          â† ç»„åˆèŠ‚ç‚¹
    â””â”€â”€ è§†é¢‘.mp4      â† å¶å­èŠ‚ç‚¹

ç‰¹ç‚¹ï¼š
- æ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½æœ‰åç§°ã€å¤§å°ç­‰å±æ€§
- éƒ½å¯ä»¥åˆ é™¤ã€å¤åˆ¶ã€ç§»åŠ¨
- ä½†æ–‡ä»¶å¤¹å¯ä»¥åŒ…å«å…¶ä»–æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶ä¸è¡Œ
```

---

## 2. ğŸ”§ æŠ½è±¡ç»„ä»¶æ¥å£è®¾è®¡


### 2.1 æ¥å£è®¾è®¡åŸåˆ™


**ğŸ¯ è®¾è®¡æ€è·¯**
æŠ½è±¡ç»„ä»¶å°±åƒæ˜¯"ä¸‡èƒ½é¥æ§å™¨"ï¼Œä¸ç®¡æ˜¯ç”µè§†ã€ç©ºè°ƒè¿˜æ˜¯éŸ³å“ï¼Œéƒ½èƒ½ç”¨è¿™ä¸ªé¥æ§å™¨æ¥æ§åˆ¶ã€‚

**æ ¸å¿ƒè¦ç´ **ï¼š
- **ç»Ÿä¸€æ“ä½œæ–¹æ³•**ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½æ‰§è¡Œçš„åŸºæœ¬æ“ä½œ
- **æ ‘å½¢ç»“æ„æ–¹æ³•**ï¼šç®¡ç†å­èŠ‚ç‚¹çš„æ–¹æ³•
- **ä¿¡æ¯è·å–æ–¹æ³•**ï¼šè·å–èŠ‚ç‚¹ä¿¡æ¯çš„æ–¹æ³•

### 2.2 åŸºç¡€æ¥å£å®šä¹‰


```java
/**
 * ğŸ”¸ æŠ½è±¡ç»„ä»¶æ¥å£
 * å®šä¹‰å¶å­å’Œç»„åˆèŠ‚ç‚¹çš„ç»Ÿä¸€æ“ä½œè§„èŒƒ
 */
public abstract class Component {
    protected String name;  // èŠ‚ç‚¹åç§°
    
    public Component(String name) {
        this.name = name;
    }
    
    // ===== ç»Ÿä¸€æ“ä½œæ–¹æ³• =====
    
    /**
     * æ˜¾ç¤ºèŠ‚ç‚¹ä¿¡æ¯ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦å®ç°ï¼‰
     */
    public abstract void display(int depth);
    
    /**
     * è·å–èŠ‚ç‚¹å¤§å°ï¼ˆå¶å­è¿”å›è‡ªèº«å¤§å°ï¼Œç»„åˆè¿”å›æ‰€æœ‰å­èŠ‚ç‚¹å¤§å°ä¹‹å’Œï¼‰
     */
    public abstract long getSize();
    
    // ===== æ ‘å½¢ç»“æ„ç®¡ç†æ–¹æ³• =====
    
    /**
     * æ·»åŠ å­èŠ‚ç‚¹ï¼ˆé»˜è®¤æŠ›å¼‚å¸¸ï¼Œç»„åˆèŠ‚ç‚¹é‡å†™ï¼‰
     */
    public void add(Component component) {
        throw new UnsupportedOperationException("å¶å­èŠ‚ç‚¹ä¸æ”¯æŒæ·»åŠ å­èŠ‚ç‚¹");
    }
    
    /**
     * åˆ é™¤å­èŠ‚ç‚¹ï¼ˆé»˜è®¤æŠ›å¼‚å¸¸ï¼Œç»„åˆèŠ‚ç‚¹é‡å†™ï¼‰
     */
    public void remove(Component component) {
        throw new UnsupportedOperationException("å¶å­èŠ‚ç‚¹ä¸æ”¯æŒåˆ é™¤å­èŠ‚ç‚¹");
    }
    
    /**
     * è·å–å­èŠ‚ç‚¹ï¼ˆé»˜è®¤æŠ›å¼‚å¸¸ï¼Œç»„åˆèŠ‚ç‚¹é‡å†™ï¼‰
     */
    public Component getChild(int index) {
        throw new UnsupportedOperationException("å¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹");
    }
}
```

### 2.3 æ¥å£è®¾è®¡è€ƒè™‘ç‚¹


**ğŸ”¸ æ–¹æ³•åˆ†ç±»å¤„ç†**
```
å¿…é¡»å®ç°çš„æ–¹æ³•ï¼š
- display() â† æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½æ˜¾ç¤ºè‡ªå·±
- getSize() â† æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰å¤§å°æ¦‚å¿µ

å¯é€‰å®ç°çš„æ–¹æ³•ï¼š
- add() â† åªæœ‰ç»„åˆèŠ‚ç‚¹èƒ½æ·»åŠ å­èŠ‚ç‚¹
- remove() â† åªæœ‰ç»„åˆèŠ‚ç‚¹èƒ½åˆ é™¤å­èŠ‚ç‚¹
- getChild() â† åªæœ‰ç»„åˆèŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹

å¤„ç†ç­–ç•¥ï¼š
âœ… å¿…é¡»æ–¹æ³• â†’ æŠ½è±¡æ–¹æ³•ï¼Œå¼ºåˆ¶å­ç±»å®ç°
âœ… å¯é€‰æ–¹æ³• â†’ é»˜è®¤æŠ›å¼‚å¸¸ï¼Œéœ€è¦æ—¶é‡å†™
```

> ğŸ’¡ **è®¾è®¡å°è´´å£«**ï¼šè¿™ç§è®¾è®¡è®©å¶å­èŠ‚ç‚¹ä¸ç”¨å®ç°ä¸éœ€è¦çš„æ–¹æ³•ï¼Œä½†å¦‚æœé”™è¯¯è°ƒç”¨ä¼šæœ‰æ˜ç¡®æç¤ºã€‚

---

## 3. ğŸƒ å¶å­èŠ‚ç‚¹å®ç°è¯¦è§£


### 3.1 å¶å­èŠ‚ç‚¹çš„ç‰¹ç‚¹


**ğŸ”¸ æœ¬è´¨ç†è§£**
å¶å­èŠ‚ç‚¹å°±åƒæ˜¯"æœ€ç»ˆäº§å“"ï¼š
- **ä¸èƒ½åˆ†è§£**ï¼šå·²ç»æ˜¯æœ€å°å•ä½ï¼Œä¸èƒ½å†åŒ…å«å…¶ä»–ä¸œè¥¿
- **å…·ä½“åŠŸèƒ½**ï¼šæœ‰æ˜ç¡®çš„åŠŸèƒ½å’Œå±æ€§
- **ç‹¬ç«‹å­˜åœ¨**ï¼šå¯ä»¥ç‹¬ç«‹å®Œæˆè‡ªå·±çš„ä»»åŠ¡

### 3.2 æ–‡ä»¶å¶å­èŠ‚ç‚¹å®ç°


```java
/**
 * ğŸƒ æ–‡ä»¶å¶å­èŠ‚ç‚¹
 * ä»£è¡¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼ˆä¸èƒ½åŒ…å«å…¶ä»–æ–‡ä»¶ï¼‰
 */
public class File extends Component {
    private long fileSize;  // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
    
    public File(String name, long fileSize) {
        super(name);
        this.fileSize = fileSize;
    }
    
    @Override
    public void display(int depth) {
        // æ ¹æ®å±‚çº§ç¼©è¿›æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
        StringBuilder indent = new StringBuilder();
        for (int i = 0; i < depth; i++) {
            indent.append("  ");
        }
        System.out.println(indent + "ğŸ“„ " + name + " (" + fileSize + " bytes)");
    }
    
    @Override
    public long getSize() {
        return fileSize;
    }
    
    // å¶å­èŠ‚ç‚¹ä¸é‡å†™add/remove/getChildæ–¹æ³•
    // è°ƒç”¨æ—¶ä¼šæŠ›å‡ºçˆ¶ç±»çš„å¼‚å¸¸
}
```

### 3.3 å¶å­èŠ‚ç‚¹ä½¿ç”¨ç¤ºä¾‹


```java
public class LeafNodeDemo {
    public static void main(String[] args) {
        // åˆ›å»ºæ–‡ä»¶å¶å­èŠ‚ç‚¹
        Component file1 = new File("æ–‡æ¡£.txt", 1024);
        Component file2 = new File("å›¾ç‰‡.jpg", 2048);
        
        // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
        file1.display(0);  // è¾“å‡º: ğŸ“„ æ–‡æ¡£.txt (1024 bytes)
        file2.display(1);  // è¾“å‡º:   ğŸ“„ å›¾ç‰‡.jpg (2048 bytes)
        
        // è·å–æ–‡ä»¶å¤§å°
        System.out.println("æ–‡ä»¶å¤§å°: " + file1.getSize());  // è¾“å‡º: 1024
        
        // é”™è¯¯ä½¿ç”¨ç¤ºä¾‹
        try {
            file1.add(file2);  // æŠ›å¼‚å¸¸: å¶å­èŠ‚ç‚¹ä¸æ”¯æŒæ·»åŠ å­èŠ‚ç‚¹
        } catch (UnsupportedOperationException e) {
            System.out.println("é”™è¯¯: " + e.getMessage());
        }
    }
}
```

**ğŸ” å¶å­èŠ‚ç‚¹è¦ç‚¹**ï¼š
- âœ… **ç®€å•ç›´æ¥**ï¼šåªç®¡è‡ªå·±çš„äº‹æƒ…ï¼Œä¸ç®¡å…¶ä»–èŠ‚ç‚¹
- âœ… **åŠŸèƒ½ä¸“ä¸€**ï¼šä¸“æ³¨äºè‡ªå·±çš„æ ¸å¿ƒåŠŸèƒ½
- âœ… **ä¸éœ€æ‰©å±•**ï¼šä¸å®ç°æ ‘å½¢ç»“æ„ç®¡ç†æ–¹æ³•

---

## 4. ğŸŒ³ ç»„åˆèŠ‚ç‚¹å®ç°è¯¦è§£


### 4.1 ç»„åˆèŠ‚ç‚¹çš„ç‰¹ç‚¹


**ğŸ”¸ æœ¬è´¨ç†è§£**
ç»„åˆèŠ‚ç‚¹å°±åƒæ˜¯"ç®¡ç†è€…"ï¼š
- **åŒ…å«å­èŠ‚ç‚¹**ï¼šå¯ä»¥åŒ…å«å¶å­èŠ‚ç‚¹æˆ–å…¶ä»–ç»„åˆèŠ‚ç‚¹
- **ç»Ÿä¸€ç®¡ç†**ï¼šå¯¹å­èŠ‚ç‚¹è¿›è¡Œç»Ÿä¸€æ“ä½œ
- **é€’å½’å¤„ç†**ï¼šæ“ä½œä¼šä¼ é€’ç»™æ‰€æœ‰å­èŠ‚ç‚¹

### 4.2 æ–‡ä»¶å¤¹ç»„åˆèŠ‚ç‚¹å®ç°


```java
/**
 * ğŸŒ³ æ–‡ä»¶å¤¹ç»„åˆèŠ‚ç‚¹
 * ä»£è¡¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å¤¹ï¼ˆå¯ä»¥åŒ…å«æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ï¼‰
 */
public class Folder extends Component {
    private List<Component> children;  // å­èŠ‚ç‚¹é›†åˆ
    
    public Folder(String name) {
        super(name);
        this.children = new ArrayList<>();
    }
    
    @Override
    public void display(int depth) {
        // æ˜¾ç¤ºæ–‡ä»¶å¤¹æœ¬èº«
        StringBuilder indent = new StringBuilder();
        for (int i = 0; i < depth; i++) {
            indent.append("  ");
        }
        System.out.println(indent + "ğŸ“ " + name + "/");
        
        // é€’å½’æ˜¾ç¤ºæ‰€æœ‰å­èŠ‚ç‚¹
        for (Component child : children) {
            child.display(depth + 1);
        }
    }
    
    @Override
    public long getSize() {
        // æ–‡ä»¶å¤¹å¤§å° = æ‰€æœ‰å­èŠ‚ç‚¹å¤§å°ä¹‹å’Œ
        long totalSize = 0;
        for (Component child : children) {
            totalSize += child.getSize();
        }
        return totalSize;
    }
    
    @Override
    public void add(Component component) {
        children.add(component);
    }
    
    @Override
    public void remove(Component component) {
        children.remove(component);
    }
    
    @Override
    public Component getChild(int index) {
        if (index >= 0 && index < children.size()) {
            return children.get(index);
        }
        throw new IndexOutOfBoundsException("å­èŠ‚ç‚¹ç´¢å¼•è¶…å‡ºèŒƒå›´: " + index);
    }
    
    /**
     * è·å–å­èŠ‚ç‚¹æ•°é‡
     */
    public int getChildrenCount() {
        return children.size();
    }
}
```

### 4.3 ç»„åˆèŠ‚ç‚¹çš„é€’å½’ç‰¹æ€§


**ğŸ”„ é€’å½’å¤„ç†ç¤ºæ„å›¾**
```
ç»„åˆèŠ‚ç‚¹æ“ä½œä¼ é€’è¿‡ç¨‹ï¼š

è°ƒç”¨ folder.display(0)
â”‚
â”œâ”€ æ˜¾ç¤ºè‡ªå·±: "ğŸ“ æ ¹ç›®å½•/"
â”œâ”€ éå†å­èŠ‚ç‚¹:
â”‚   â”œâ”€ child1.display(1) â†’ å¦‚æœæ˜¯æ–‡ä»¶ï¼Œç›´æ¥æ˜¾ç¤º
â”‚   â”œâ”€ child2.display(1) â†’ å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œç»§ç»­é€’å½’
â”‚   â”‚   â”œâ”€ æ˜¾ç¤ºè‡ªå·±: "ğŸ“ å­æ–‡ä»¶å¤¹/"
â”‚   â”‚   â””â”€ éå†å­èŠ‚ç‚¹: subchild.display(2)
â”‚   â””â”€ child3.display(1)
â””â”€ å®Œæˆ
```

**ğŸ’¡ é€’å½’çš„å¨åŠ›**ï¼š
- ä¸ç®¡æ ‘æœ‰å¤šæ·±ï¼Œä»£ç é€»è¾‘éƒ½ä¸€æ ·
- æ¯ä¸ªèŠ‚ç‚¹åªå…³å¿ƒè‡ªå·±å’Œç›´æ¥å­èŠ‚ç‚¹
- å¤æ‚çš„æ ‘å½¢ç»“æ„è‡ªåŠ¨å¤„ç†

---

## 5. ğŸ‘¤ å®¢æˆ·ç«¯æ“ä½œæ–¹å¼


### 5.1 ç»Ÿä¸€æ“ä½œçš„ä¼˜åŠ¿


**ğŸ¯ å®¢æˆ·ç«¯è§†è§’**
å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œä¸ç®¡æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹ï¼Œæ“ä½œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼š

```java
Component item = getFileOrFolder();  // ä¸çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆ
item.display(0);    // ç»Ÿä¸€çš„æ˜¾ç¤ºæ–¹æ³•
long size = item.getSize();  // ç»Ÿä¸€çš„è·å–å¤§å°æ–¹æ³•
```

### 5.2 å®Œæ•´ä½¿ç”¨ç¤ºä¾‹


```java
public class CompositePatternDemo {
    public static void main(String[] args) {
        // ğŸ”¸ æ„å»ºæ–‡ä»¶ç³»ç»Ÿæ ‘
        Component root = buildFileSystem();
        
        // ğŸ”¸ ç»Ÿä¸€æ“ä½œæ¼”ç¤º
        System.out.println("=== æ˜¾ç¤ºå®Œæ•´æ–‡ä»¶ç³»ç»Ÿ ===");
        root.display(0);
        
        System.out.println("\n=== è®¡ç®—æ€»å¤§å° ===");
        System.out.println("æ€»å¤§å°: " + root.getSize() + " bytes");
        
        // ğŸ”¸ åŠ¨æ€æ·»åŠ å†…å®¹
        System.out.println("\n=== åŠ¨æ€æ·»åŠ æ–‡ä»¶ ===");
        if (root instanceof Folder) {
            Folder rootFolder = (Folder) root;
            rootFolder.add(new File("æ–°æ–‡ä»¶.txt", 512));
            root.display(0);
        }
    }
    
    /**
     * æ„å»ºç¤ºä¾‹æ–‡ä»¶ç³»ç»Ÿ
     */
    private static Component buildFileSystem() {
        // æ ¹æ–‡ä»¶å¤¹
        Folder root = new Folder("æˆ‘çš„æ–‡æ¡£");
        
        // æ·»åŠ æ–‡ä»¶
        root.add(new File("ç®€å†.pdf", 1024));
        root.add(new File("ç…§ç‰‡.jpg", 2048));
        
        // æ·»åŠ å­æ–‡ä»¶å¤¹
        Folder workFolder = new Folder("å·¥ä½œèµ„æ–™");
        workFolder.add(new File("é¡¹ç›®è®¡åˆ’.docx", 1536));
        workFolder.add(new File("ä¼šè®®è®°å½•.txt", 512));
        
        // æ·»åŠ å­æ–‡ä»¶å¤¹çš„å­æ–‡ä»¶å¤¹
        Folder projectFolder = new Folder("é¡¹ç›®A");
        projectFolder.add(new File("æºç .java", 4096));
        projectFolder.add(new File("æ–‡æ¡£.md", 256));
        workFolder.add(projectFolder);
        
        root.add(workFolder);
        
        return root;
    }
}
```

### 5.3 å®¢æˆ·ç«¯æ“ä½œæ¨¡å¼


**ğŸ”¸ é€æ˜æ“ä½œæ¨¡å¼**
```
å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“ï¼š
â“ å½“å‰æ“ä½œçš„æ˜¯å¶å­è¿˜æ˜¯ç»„åˆèŠ‚ç‚¹
â“ æ ‘å½¢ç»“æ„æœ‰å¤šå¤æ‚
â“ å…·ä½“çš„å®ç°ç»†èŠ‚

å®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“ï¼š
âœ… ç»Ÿä¸€çš„æ¥å£æ–¹æ³•
âœ… é¢„æœŸçš„æ“ä½œç»“æœ
âœ… åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼
```

---

## 6. ğŸŒ² æ ‘å½¢ç»“æ„ç®¡ç†æœºåˆ¶


### 6.1 æ ‘å½¢ç»“æ„çš„æ„å»º


**ğŸ”¸ æ„å»ºæ–¹å¼å¯¹æ¯”**

| æ„å»ºæ–¹å¼ | **æè¿°** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|---------|----------|----------|----------|
| **ğŸ”§ ç¨‹åºåŒ–æ„å»º** | `ä»£ç ä¸­é€æ­¥æ·»åŠ èŠ‚ç‚¹` | `çµæ´»æ§åˆ¶ï¼Œå¯éªŒè¯` | `ä»£ç é‡å¤§ï¼Œç¡¬ç¼–ç ` |
| **ğŸ“„ é…ç½®æ–‡ä»¶æ„å»º** | `ä»JSON/XMLè¯»å–ç»“æ„` | `é…ç½®çµæ´»ï¼Œæ˜“ä¿®æ”¹` | `éœ€è¦è§£æå™¨ï¼Œå¤æ‚åº¦é«˜` |
| **ğŸ¯ å·¥å‚æ¨¡å¼æ„å»º** | `å·¥å‚æ–¹æ³•åˆ›å»ºæ ‡å‡†ç»“æ„` | `æ ‡å‡†åŒ–ï¼Œå¯å¤ç”¨` | `çµæ´»æ€§å—é™` |

### 6.2 æ ‘å½¢ç»“æ„éå†æ–¹å¼


**ğŸ” éå†ç­–ç•¥**
```java
public class TreeTraversal {
    
    /**
     * æ·±åº¦ä¼˜å…ˆéå†ï¼ˆé€’å½’ï¼‰
     */
    public static void depthFirstTraversal(Component node, int depth) {
        // å…ˆå¤„ç†å½“å‰èŠ‚ç‚¹
        node.display(depth);
        
        // å†å¤„ç†å­èŠ‚ç‚¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
        if (node instanceof Folder) {
            Folder folder = (Folder) node;
            for (int i = 0; i < folder.getChildrenCount(); i++) {
                depthFirstTraversal(folder.getChild(i), depth + 1);
            }
        }
    }
    
    /**
     * å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆé˜Ÿåˆ—ï¼‰
     */
    public static void breadthFirstTraversal(Component root) {
        Queue<Component> queue = new LinkedList<>();
        queue.offer(root);
        
        while (!queue.isEmpty()) {
            Component current = queue.poll();
            current.display(0);  // æ˜¾ç¤ºå½“å‰èŠ‚ç‚¹
            
            // å°†å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
            if (current instanceof Folder) {
                Folder folder = (Folder) current;
                for (int i = 0; i < folder.getChildrenCount(); i++) {
                    queue.offer(folder.getChild(i));
                }
            }
        }
    }
}
```

### 6.3 æ ‘å½¢ç»“æ„æ“ä½œå®‰å…¨


**âš ï¸ å®‰å…¨è€ƒè™‘**
```java
public class SafeTreeOperations {
    
    /**
     * å®‰å…¨æ·»åŠ èŠ‚ç‚¹ï¼ˆé¿å…å¾ªç¯å¼•ç”¨ï¼‰
     */
    public static boolean safeAdd(Folder parent, Component child) {
        // æ£€æŸ¥æ˜¯å¦ä¼šé€ æˆå¾ªç¯å¼•ç”¨
        if (isAncestor(child, parent)) {
            System.out.println("é”™è¯¯: ä¸èƒ½å°†çˆ¶èŠ‚ç‚¹æ·»åŠ ä¸ºå­èŠ‚ç‚¹ï¼Œä¼šé€ æˆå¾ªç¯å¼•ç”¨");
            return false;
        }
        
        parent.add(child);
        return true;
    }
    
    /**
     * æ£€æŸ¥æ˜¯å¦ä¸ºç¥–å…ˆèŠ‚ç‚¹
     */
    private static boolean isAncestor(Component ancestor, Component descendant) {
        if (ancestor == descendant) {
            return true;
        }
        
        if (ancestor instanceof Folder) {
            Folder folder = (Folder) ancestor;
            for (int i = 0; i < folder.getChildrenCount(); i++) {
                if (isAncestor(folder.getChild(i), descendant)) {
                    return true;
                }
            }
        }
        
        return false;
    }
}
```

**ğŸ›¡ï¸ å¸¸è§å®‰å…¨é—®é¢˜**ï¼š
- **å¾ªç¯å¼•ç”¨**ï¼šAåŒ…å«Bï¼ŒBåŒ…å«A
- **å†…å­˜æ³„æ¼**ï¼šèŠ‚ç‚¹åˆ é™¤åä»æœ‰å¼•ç”¨
- **å¹¶å‘è®¿é—®**ï¼šå¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹æ ‘ç»“æ„

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 ç»„åˆæ¨¡å¼ç»“æ„ç²¾é«“


**ğŸ”¸ æ ¸å¿ƒç†å¿µ**
```
"æŠŠå¤æ‚çš„æ ‘å½¢ç»“æ„ï¼Œç”¨ç®€å•ç»Ÿä¸€çš„æ–¹å¼æ¥æ“ä½œ"

å…³é”®è¦ç´ ï¼š
âœ… ç»Ÿä¸€æ¥å£ â†’ å¶å­å’Œç»„åˆéƒ½å®ç°ç›¸åŒæ¥å£
âœ… é€’å½’å¤„ç† â†’ ç»„åˆèŠ‚ç‚¹å°†æ“ä½œä¼ é€’ç»™å­èŠ‚ç‚¹  
âœ… é€æ˜æ“ä½œ â†’ å®¢æˆ·ç«¯ä¸å…³å¿ƒå…·ä½“èŠ‚ç‚¹ç±»å‹
âœ… çµæ´»ç»„åˆ â†’ å¯ä»¥ä»»æ„ç»„åˆå¶å­å’Œç»„åˆèŠ‚ç‚¹
```

### 7.2 è§’è‰²èŒè´£æ¸…å•


| è§’è‰² | **ä¸»è¦èŒè´£** | **å…³é”®æ–¹æ³•** | **ä½¿ç”¨åœºæ™¯** |
|------|-------------|-------------|-------------|
| **ğŸ”§ æŠ½è±¡ç»„ä»¶** | `å®šä¹‰ç»Ÿä¸€æ¥å£è§„èŒƒ` | `display(), getSize()` | `æ‰€æœ‰èŠ‚ç‚¹çš„åŸºç¡€è§„èŒƒ` |
| **ğŸƒ å¶å­èŠ‚ç‚¹** | `å®ç°å…·ä½“åŠŸèƒ½` | `é‡å†™æŠ½è±¡æ–¹æ³•` | `æœ€ç»ˆçš„åŠŸèƒ½å•å…ƒ` |
| **ğŸŒ³ ç»„åˆèŠ‚ç‚¹** | `ç®¡ç†å­èŠ‚ç‚¹é›†åˆ` | `add(), remove(), getChild()` | `å®¹å™¨å’Œç®¡ç†è€…` |
| **ğŸ‘¤ å®¢æˆ·ç«¯** | `ç»Ÿä¸€æ“ä½œå„ç§èŠ‚ç‚¹` | `è°ƒç”¨æ¥å£æ–¹æ³•` | `ä¸šåŠ¡é€»è¾‘å¤„ç†` |

### 7.3 å®ç°è¦ç‚¹æé†’


**ğŸ¯ è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç±»åªè´Ÿè´£è‡ªå·±çš„æ ¸å¿ƒåŠŸèƒ½
- **å¼€é—­åŸåˆ™**ï¼šå¯ä»¥æ·»åŠ æ–°çš„å¶å­æˆ–ç»„åˆç±»å‹
- **é‡Œæ°æ›¿æ¢**ï¼šå¶å­å’Œç»„åˆå¯ä»¥äº’ç›¸æ›¿æ¢
- **ä¾èµ–å€’ç½®**ï¼šå®¢æˆ·ç«¯ä¾èµ–æŠ½è±¡æ¥å£

**ğŸ’¡ å®è·µå»ºè®®**
- âœ… **ä»ç®€å•å¼€å§‹**ï¼šå…ˆå®ç°åŸºæœ¬çš„å¶å­å’Œç»„åˆèŠ‚ç‚¹
- âœ… **é€æ­¥æ‰©å±•**ï¼šæ ¹æ®éœ€è¦æ·»åŠ æ–°çš„èŠ‚ç‚¹ç±»å‹
- âœ… **æ³¨æ„å®‰å…¨**ï¼šé˜²æ­¢å¾ªç¯å¼•ç”¨å’Œå†…å­˜æ³„æ¼
- âœ… **æ€§èƒ½è€ƒè™‘**ï¼šå¤§å‹æ ‘ç»“æ„è¦è€ƒè™‘éå†æ•ˆç‡

**âš ï¸ å¸¸è§é™·é˜±**
- **è¿‡åº¦è®¾è®¡**ï¼šä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½éœ€è¦ç»„åˆæ¨¡å¼
- **æ€§èƒ½é—®é¢˜**ï¼šæ·±åº¦å¾ˆå¤§çš„æ ‘ç»“æ„é€’å½’å¯èƒ½æ ˆæº¢å‡º
- **ç±»å‹è½¬æ¢**ï¼šé¿å…é¢‘ç¹çš„ç±»å‹æ£€æŸ¥å’Œè½¬æ¢

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æŠ½è±¡æ¥å£å®šè§„èŒƒï¼Œå¶å­ç»„åˆåˆ†ä¸¤ç«¯
ç»Ÿä¸€æ“ä½œæ˜¯å…³é”®ï¼Œé€’å½’å¤„ç†å¾ˆè‡ªç„¶
å®¢æˆ·ç«¯ä¸­ä¸ç”¨ç®¡ï¼Œæ˜¯å¶æ˜¯åˆéƒ½ä¸€èˆ¬
```