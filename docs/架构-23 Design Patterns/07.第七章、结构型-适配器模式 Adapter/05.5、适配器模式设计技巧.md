---
title: 5ã€é€‚é…å™¨æ¨¡å¼è®¾è®¡æŠ€å·§
---
## ğŸ“š ç›®å½•

1. [é€‚é…å™¨æ¨¡å¼æ ¸å¿ƒç†å¿µå›é¡¾](#1-é€‚é…å™¨æ¨¡å¼æ ¸å¿ƒç†å¿µå›é¡¾)
2. [é€‚é…å™¨ç²’åº¦æ§åˆ¶](#2-é€‚é…å™¨ç²’åº¦æ§åˆ¶)
3. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#3-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
4. [å¼‚å¸¸å¤„ç†æœºåˆ¶](#4-å¼‚å¸¸å¤„ç†æœºåˆ¶)
5. [ç‰ˆæœ¬å…¼å®¹æ€§è®¾è®¡](#5-ç‰ˆæœ¬å…¼å®¹æ€§è®¾è®¡)
6. [å¯æ‰©å±•æ€§è®¾è®¡](#6-å¯æ‰©å±•æ€§è®¾è®¡)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ é€‚é…å™¨æ¨¡å¼æ ¸å¿ƒç†å¿µå›é¡¾


### 1.1 ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼


> ğŸ’¡ **é€šä¿—ç†è§£**  
> é€‚é…å™¨æ¨¡å¼å°±åƒç°å®ä¸­çš„è½¬æ¢å™¨æ’å¤´ä¸€æ ·ã€‚å½“ä½ çš„æ‰‹æœºå……ç”µå™¨æ˜¯åœ†å¤´æ’å¤´ï¼Œä½†å¢™ä¸Šåªæœ‰æ–¹å½¢æ’åº§æ—¶ï¼Œä½ éœ€è¦ä¸€ä¸ªè½¬æ¢å™¨æ¥è®©å®ƒä»¬èƒ½å¤Ÿé…åˆå·¥ä½œã€‚

**ğŸ¯ æ ¸å¿ƒä½œç”¨**ï¼šè®©ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£èƒ½å¤ŸååŒå·¥ä½œ

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœ†å¤´å……ç”µå™¨  â”‚ -> â”‚  è½¬æ¢æ’å¤´   â”‚ -> â”‚  æ–¹å½¢æ’åº§   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     åŸæ¥å£            é€‚é…å™¨             ç›®æ ‡æ¥å£

è½¯ä»¶å¼€å‘ä¸­ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—§ç³»ç»ŸAPI  â”‚ -> â”‚  é€‚é…å™¨ç±»   â”‚ -> â”‚  æ–°ç³»ç»Ÿæ¥å£ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 é€‚é…å™¨æ¨¡å¼çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ 


**ğŸ”¸ ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰**ï¼šæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨çš„æ ‡å‡†æ¥å£
**ğŸ”¸ è¢«é€‚é…è€…ï¼ˆAdapteeï¼‰**ï¼šå·²ç»å­˜åœ¨ä½†æ¥å£ä¸åŒ¹é…çš„ç±»
**ğŸ”¸ é€‚é…å™¨ï¼ˆAdapterï¼‰**ï¼šè¿æ¥ä¸¤è€…çš„æ¡¥æ¢

---

## 2. âš–ï¸ é€‚é…å™¨ç²’åº¦æ§åˆ¶


### 2.1 ç²’åº¦é€‰æ‹©çš„é‡è¦æ€§


> âš ï¸ **è®¾è®¡å…³é”®ç‚¹**  
> é€‚é…å™¨çš„ç²’åº¦å†³å®šäº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚ç²’åº¦å¤ªç»†ä¼šå¯¼è‡´é€‚é…å™¨æ•°é‡çˆ†ç‚¸ï¼Œç²’åº¦å¤ªç²—ä¼šé™ä½çµæ´»æ€§ã€‚

### 2.2 ç»†ç²’åº¦é€‚é…å™¨


**ğŸ”¸ é€‚ç”¨åœºæ™¯**ï¼šæ¥å£å·®å¼‚è¾ƒå°ï¼Œåªéœ€è¦ç®€å•çš„æ–¹æ³•åæˆ–å‚æ•°è½¬æ¢

```java
// ç»†ç²’åº¦é€‚é…å™¨ç¤ºä¾‹ï¼šåªé€‚é…ä¸€ä¸ªå…·ä½“æ–¹æ³•
public class PaymentMethodAdapter implements StandardPayment {
    private LegacyPaymentService legacyService;
    
    // åªé€‚é…æ”¯ä»˜æ–¹æ³•ï¼Œç²’åº¦å¾ˆç»†
    public boolean pay(double amount, String currency) {
        // ç®€å•çš„å‚æ•°è½¬æ¢
        return legacyService.makePayment(amount, currency.toUpperCase());
    }
}
```

**âœ… ä¼˜ç‚¹**ï¼š
- èŒè´£å•ä¸€ï¼Œæ˜“äºç†è§£
- æµ‹è¯•ç®€å•ï¼Œbugå®¹æ˜“å®šä½
- å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªæ–¹æ³•çš„é€‚é…é€»è¾‘

**âŒ ç¼ºç‚¹**ï¼š
- é€‚é…å™¨ç±»æ•°é‡å¯èƒ½å¾ˆå¤š
- ç®¡ç†æˆæœ¬è¾ƒé«˜

### 2.3 ç²—ç²’åº¦é€‚é…å™¨


**ğŸ”¸ é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦é€‚é…æ•´ä¸ªå­ç³»ç»Ÿæˆ–å¤§é‡ç›¸å…³åŠŸèƒ½

```java
// ç²—ç²’åº¦é€‚é…å™¨ï¼šé€‚é…æ•´ä¸ªç”¨æˆ·ç®¡ç†æ¨¡å—
public class UserManagementAdapter implements ModernUserService {
    private LegacyUserSystem legacySystem;
    private LegacyRoleSystem roleSystem;
    private LegacyPermissionSystem permissionSystem;
    
    // é€‚é…æ•´å¥—ç”¨æˆ·ç®¡ç†åŠŸèƒ½
    public User createUser(UserProfile profile) {
        // å¤æ‚çš„æ•°æ®è½¬æ¢å’Œå¤šç³»ç»Ÿåè°ƒ
        LegacyUser legacyUser = legacySystem.addUser(profile.getName());
        roleSystem.assignRole(legacyUser.getId(), profile.getRole());
        permissionSystem.setPermissions(legacyUser.getId(), profile.getPermissions());
        
        return convertToModernUser(legacyUser);
    }
}
```

**âœ… ä¼˜ç‚¹**ï¼š
- é€‚é…å™¨æ•°é‡å°‘ï¼Œç»Ÿä¸€ç®¡ç†
- èƒ½å¤Ÿå¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
- å¯¹å¤–æä¾›ä¸€è‡´çš„æ¥å£

**âŒ ç¼ºç‚¹**ï¼š
- å•ä¸ªé€‚é…å™¨è¾ƒå¤æ‚
- èŒè´£å¯èƒ½ä¸å¤Ÿå•ä¸€

### 2.4 ç²’åº¦æ§åˆ¶çš„å®ç”¨ç­–ç•¥


| **åœºæ™¯åˆ†ç±»** | **æ¨èç²’åº¦** | **è®¾è®¡è¦ç‚¹** |
|-------------|-------------|-------------|
| **ç®€å•è½¬æ¢** | `ç»†ç²’åº¦` | ä¸€ä¸ªé€‚é…å™¨å¯¹åº”ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ |
| **æ•°æ®æ ¼å¼è½¬æ¢** | `ä¸­ç­‰ç²’åº¦` | æŒ‰æ•°æ®ç±»å‹æˆ–ä¸šåŠ¡é¢†åŸŸåˆ†ç»„ |
| **ç³»ç»Ÿæ•´åˆ** | `ç²—ç²’åº¦` | æŒ‰å­ç³»ç»Ÿæˆ–æœåŠ¡æ¨¡å—åˆ’åˆ† |
| **ç¬¬ä¸‰æ–¹APIé›†æˆ** | `ä¸­ç­‰ç²’åº¦` | æŒ‰APIæœåŠ¡åˆ†ç±»é€‚é… |

> ğŸ¯ **æœ€ä½³å®è·µ**  
> ä»ç»†ç²’åº¦å¼€å§‹è®¾è®¡ï¼Œå½“å‘ç°å¤šä¸ªç»†ç²’åº¦é€‚é…å™¨æœ‰å…±åŒé€»è¾‘æ—¶ï¼Œå†è€ƒè™‘åˆå¹¶ä¸ºä¸­ç­‰ç²’åº¦é€‚é…å™¨ã€‚

---

## 3. âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 3.1 ç¼“å­˜æœºåˆ¶ä¼˜åŒ–


**ğŸ’¡ æ ¸å¿ƒæ€æƒ³**ï¼šé¿å…é‡å¤çš„æ•°æ®è½¬æ¢å’Œè®¡ç®—

```java
public class CachedDataAdapter implements ModernDataService {
    private LegacyDataService legacyService;
    // ä½¿ç”¨LRUç¼“å­˜é¿å…é‡å¤è½¬æ¢
    private Map<String, ConvertedData> cache = new LinkedHashMap<String, ConvertedData>(100, 0.75f, true) {
        protected boolean removeEldestEntry(Map.Entry eldest) {
            return size() > 100;
        }
    };
    
    public ConvertedData getData(String key) {
        // å…ˆæ£€æŸ¥ç¼“å­˜
        ConvertedData cached = cache.get(key);
        if (cached != null) {
            return cached;
        }
        
        // ç¼“å­˜æœªå‘½ä¸­ï¼Œè¿›è¡Œè½¬æ¢
        LegacyData rawData = legacyService.fetchData(key);
        ConvertedData converted = convertData(rawData);
        cache.put(key, converted);
        return converted;
    }
}
```

**ğŸ¯ ç¼“å­˜ç­–ç•¥é€‰æ‹©**ï¼š

```
æ•°æ®ç‰¹ç‚¹åˆ†æï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®æ›´æ–°é¢‘ç‡     â”‚ -> é€‰æ‹©ç¼“å­˜ç­–ç•¥
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é«˜é¢‘æ›´æ–°        â”‚ -> çŸ­æœŸç¼“å­˜æˆ–ä¸ç¼“å­˜
â”‚ ä¸­é¢‘æ›´æ–°        â”‚ -> TTLè¿‡æœŸç¼“å­˜
â”‚ ä½é¢‘æ›´æ–°        â”‚ -> é•¿æœŸç¼“å­˜
â”‚ åŸºæœ¬ä¸å˜        â”‚ -> æ°¸ä¹…ç¼“å­˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å»¶è¿ŸåŠ è½½ä¼˜åŒ–


**ğŸ”¸ é—®é¢˜åœºæ™¯**ï¼šé€‚é…å™¨åˆå§‹åŒ–æ—¶éœ€è¦è¿æ¥å¤šä¸ªå¤–éƒ¨ç³»ç»Ÿ

```java
public class LazyLoadAdapter implements ComprehensiveService {
    // å»¶è¿Ÿåˆå§‹åŒ–çš„æœåŠ¡è¿æ¥
    private volatile LegacyDatabaseService dbService;
    private volatile LegacyFileService fileService;
    private volatile LegacyNetworkService networkService;
    
    // åªåœ¨éœ€è¦æ—¶æ‰å»ºç«‹è¿æ¥
    private LegacyDatabaseService getDbService() {
        if (dbService == null) {
            synchronized (this) {
                if (dbService == null) {
                    dbService = new LegacyDatabaseService();
                    dbService.connect();
                }
            }
        }
        return dbService;
    }
    
    public Data queryData(String id) {
        // åªæœ‰æŸ¥è¯¢æ•°æ®æ—¶æ‰è¿æ¥æ•°æ®åº“
        return convertData(getDbService().query(id));
    }
}
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> å»¶è¿ŸåŠ è½½è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ç¡®ä¿å•ä¾‹åˆ›å»ºã€‚

### 3.3 æ‰¹å¤„ç†ä¼˜åŒ–


**ğŸ”¸ ä¼˜åŒ–ç›®æ ‡**ï¼šå‡å°‘ç½‘ç»œè°ƒç”¨æ¬¡æ•°å’Œç³»ç»Ÿå¼€é”€

```java
public class BatchProcessingAdapter implements EfficientDataService {
    private LegacyService legacyService;
    private List<PendingRequest> pendingRequests = new ArrayList<>();
    private final int BATCH_SIZE = 50;
    
    public Future<ProcessedData> processDataAsync(RawData data) {
        CompletableFuture<ProcessedData> future = new CompletableFuture<>();
        
        synchronized (pendingRequests) {
            pendingRequests.add(new PendingRequest(data, future));
            
            // è¾¾åˆ°æ‰¹æ¬¡å¤§å°æ—¶ï¼Œæ‰§è¡Œæ‰¹å¤„ç†
            if (pendingRequests.size() >= BATCH_SIZE) {
                processBatch();
            }
        }
        
        return future;
    }
    
    private void processBatch() {
        List<RawData> batchData = pendingRequests.stream()
            .map(req -> req.getData())
            .collect(Collectors.toList());
            
        // ä¸€æ¬¡æ€§å¤„ç†æ•´æ‰¹æ•°æ®
        List<ProcessedData> results = legacyService.batchProcess(batchData);
        
        // åˆ†å‘ç»“æœç»™å¯¹åº”çš„Future
        for (int i = 0; i < results.size(); i++) {
            pendingRequests.get(i).getFuture().complete(results.get(i));
        }
        
        pendingRequests.clear();
    }
}
```

---

## 4. ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†æœºåˆ¶


### 4.1 å¼‚å¸¸è½¬æ¢ç­–ç•¥


**ğŸ’­ è®¾è®¡æ€è·¯**ï¼šå°†æ—§ç³»ç»Ÿçš„å¼‚å¸¸è½¬æ¢ä¸ºæ–°ç³»ç»Ÿèƒ½ç†è§£çš„å¼‚å¸¸ç±»å‹

```java
public class RobustAdapter implements ReliableService {
    private LegacyService legacyService;
    
    public Result processRequest(Request request) {
        try {
            LegacyRequest legacyReq = convertRequest(request);
            LegacyResponse response = legacyService.process(legacyReq);
            return convertResponse(response);
            
        } catch (LegacyConnectionException e) {
            // è¿æ¥å¼‚å¸¸è½¬æ¢ä¸ºç°ä»£çš„æœåŠ¡ä¸å¯ç”¨å¼‚å¸¸
            throw new ServiceUnavailableException("Legacy service connection failed", e);
            
        } catch (LegacyDataFormatException e) {
            // æ•°æ®æ ¼å¼å¼‚å¸¸è½¬æ¢ä¸ºå‚æ•°å¼‚å¸¸
            throw new InvalidParameterException("Invalid request format", e);
            
        } catch (LegacyTimeoutException e) {
            // è¶…æ—¶å¼‚å¸¸ä¿æŒè¯­ä¹‰è½¬æ¢
            throw new RequestTimeoutException("Request processing timeout", e);
            
        } catch (Exception e) {
            // æœªçŸ¥å¼‚å¸¸ç»Ÿä¸€å¤„ç†
            throw new AdapterException("Unexpected error during adaptation", e);
        }
    }
}
```

### 4.2 é‡è¯•æœºåˆ¶è®¾è®¡


**ğŸ”„ é‡è¯•ç­–ç•¥åˆ†ç±»**ï¼š

```
é‡è¯•åœºæ™¯åˆ†æï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬æ—¶ç½‘ç»œæ•…éšœ     â”‚ -> æŒ‡æ•°é€€é¿é‡è¯•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡ä¸´æ—¶è¿‡è½½     â”‚ -> çº¿æ€§é—´éš”é‡è¯•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®é”å®šå†²çª     â”‚ -> éšæœºå»¶è¿Ÿé‡è¯•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç³»ç»Ÿç»´æŠ¤æœŸé—´     â”‚ -> é•¿é—´éš”é‡è¯•
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
public class RetryableAdapter implements ResilientService {
    private static final int MAX_RETRIES = 3;
    private static final long BASE_DELAY = 1000; // 1ç§’åŸºç¡€å»¶è¿Ÿ
    
    public Data fetchData(String id) throws ServiceException {
        Exception lastException = null;
        
        for (int attempt = 0; attempt < MAX_RETRIES; attempt++) {
            try {
                return legacyService.getData(id);
                
            } catch (TemporaryFailureException e) {
                lastException = e;
                
                if (attempt < MAX_RETRIES - 1) {
                    // æŒ‡æ•°é€€é¿ç­–ç•¥
                    long delay = BASE_DELAY * (1L << attempt);
                    Thread.sleep(delay);
                }
            } catch (PermanentFailureException e) {
                // æ°¸ä¹…æ€§é”™è¯¯ä¸é‡è¯•
                throw new ServiceException("Permanent failure", e);
            }
        }
        
        throw new ServiceException("Max retries exceeded", lastException);
    }
}
```

### 4.3 é™çº§å¤„ç†æœºåˆ¶


**ğŸ¯ é™çº§ç­–ç•¥**ï¼šå½“ä¸»è¦åŠŸèƒ½ä¸å¯ç”¨æ—¶ï¼Œæä¾›å¤‡ç”¨æ–¹æ¡ˆ

```java
public class DegradableAdapter implements FlexibleService {
    private PrimaryLegacyService primaryService;
    private BackupLegacyService backupService;
    private CacheService cacheService;
    
    public ServiceResult processRequest(ServiceRequest request) {
        // ç¬¬ä¸€çº§ï¼šå°è¯•ä¸»æœåŠ¡
        try {
            return callPrimaryService(request);
        } catch (PrimaryServiceException e) {
            logWarning("Primary service failed, trying backup", e);
        }
        
        // ç¬¬äºŒçº§ï¼šå°è¯•å¤‡ç”¨æœåŠ¡
        try {
            return callBackupService(request);
        } catch (BackupServiceException e) {
            logWarning("Backup service failed, using cache", e);
        }
        
        // ç¬¬ä¸‰çº§ï¼šè¿”å›ç¼“å­˜æ•°æ®
        ServiceResult cachedResult = cacheService.get(request.getId());
        if (cachedResult != null) {
            cachedResult.setFromCache(true);
            return cachedResult;
        }
        
        // ç¬¬å››çº§ï¼šè¿”å›é»˜è®¤å€¼
        return createDefaultResult(request);
    }
}
```

---

## 5. ğŸ”„ ç‰ˆæœ¬å…¼å®¹æ€§è®¾è®¡


### 5.1 å‘åå…¼å®¹ç­–ç•¥


**ğŸ¯ æ ¸å¿ƒç›®æ ‡**ï¼šç¡®ä¿é€‚é…å™¨å‡çº§æ—¶ä¸å½±å“ç°æœ‰å®¢æˆ·ç«¯

```
ç‰ˆæœ¬å…¼å®¹æ€§å±‚æ¬¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ–°ç‰ˆæœ¬å®¢æˆ·ç«¯      â”‚ <- ä½¿ç”¨æ–°æ¥å£ç‰¹æ€§
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    é€‚é…å™¨ v2.0      â”‚ <- æ”¯æŒæ–°æ—§ä¸¤å¥—æ¥å£
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    æ—§ç‰ˆæœ¬å®¢æˆ·ç«¯      â”‚ <- ç»§ç»­ä½¿ç”¨æ—§æ¥å£
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
public class VersionCompatibleAdapter implements ModernServiceV2, LegacyCompatible {
    private NewSystemService newService;
    
    // æ–°ç‰ˆæœ¬æ¥å£ï¼ˆæ¨èä½¿ç”¨ï¼‰
    @Override
    public CompletableFuture<EnhancedResult> processAsync(EnhancedRequest request) {
        return newService.processEnhanced(request);
    }
    
    // æ—§ç‰ˆæœ¬æ¥å£ï¼ˆå…¼å®¹æ€§æ”¯æŒï¼‰
    @Override
    @Deprecated
    public SimpleResult process(SimpleRequest request) {
        // å°†æ—§è¯·æ±‚è½¬æ¢ä¸ºæ–°è¯·æ±‚
        EnhancedRequest enhancedReq = upgradeRequest(request);
        
        // è°ƒç”¨æ–°æœåŠ¡å¹¶è½¬æ¢å›æ—§æ ¼å¼
        EnhancedResult enhancedResult = processAsync(enhancedReq).get();
        return downgradeResult(enhancedResult);
    }
    
    private EnhancedRequest upgradeRequest(SimpleRequest oldRequest) {
        return EnhancedRequest.builder()
            .setData(oldRequest.getData())
            .setOptions(getDefaultOptions()) // ä½¿ç”¨é»˜è®¤é…ç½®
            .build();
    }
}
```

### 5.2 é…ç½®é©±åŠ¨çš„ç‰ˆæœ¬é€‰æ‹©


**ğŸ’¡ è®¾è®¡ç†å¿µ**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶é€‚é…å™¨çš„è¡Œä¸ºæ¨¡å¼

```java
public class ConfigurableAdapter implements AdaptiveService {
    private AdapterConfig config;
    
    public void initialize(AdapterConfig config) {
        this.config = config;
    }
    
    public ProcessingResult process(InputData data) {
        switch (config.getCompatibilityLevel()) {
            case STRICT_V1:
                return processWithV1Logic(data);
                
            case MIXED_MODE:
                return processWithMixedLogic(data);
                
            case FULL_V2:
                return processWithV2Logic(data);
                
            default:
                throw new ConfigurationException("Unknown compatibility level");
        }
    }
}
```

### 5.3 æ¸è¿›å¼è¿ç§»æ”¯æŒ


**ğŸ”„ è¿ç§»ç­–ç•¥**ï¼šæ”¯æŒåˆ†é˜¶æ®µçš„ç³»ç»Ÿè¿ç§»

```
è¿ç§»æ—¶é—´çº¿ï¼š
é˜¶æ®µ1: åŒå†™æ¨¡å¼     â”‚ æ–°æ—§ç³»ç»ŸåŒæ—¶å†™å…¥
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ æ—§ç³»ç»Ÿ   â”‚<-â”¼-â”‚ é€‚é…å™¨  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
      â”‚ æ–°ç³»ç»Ÿ   â”‚<-â”˜     â”‚ è¯»å–ä»¥æ—§ç³»ç»Ÿä¸ºå‡†
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚

é˜¶æ®µ2: åŒè¯»éªŒè¯     â”‚ å¯¹æ¯”æ–°æ—§ç»“æœ
                   â”‚
é˜¶æ®µ3: å®Œå…¨è¿ç§»     â”‚ åªä½¿ç”¨æ–°ç³»ç»Ÿ
```

---

## 6. ğŸš€ å¯æ‰©å±•æ€§è®¾è®¡


### 6.1 æ’ä»¶åŒ–é€‚é…å™¨æ¶æ„


**ğŸ¯ è®¾è®¡ç›®æ ‡**ï¼šæ”¯æŒåŠ¨æ€æ·»åŠ æ–°çš„é€‚é…é€»è¾‘ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 

```java
// é€‚é…å™¨æ’ä»¶æ¥å£
public interface AdapterPlugin {
    boolean canHandle(String dataType);
    ConvertedData convert(RawData rawData);
    String getPluginName();
}

// å¯æ‰©å±•çš„é€‚é…å™¨ç®¡ç†å™¨
public class ExtensibleAdapter implements UniversalDataService {
    private Map<String, AdapterPlugin> plugins = new HashMap<>();
    
    // æ³¨å†Œæ–°çš„é€‚é…æ’ä»¶
    public void registerPlugin(AdapterPlugin plugin) {
        plugins.put(plugin.getPluginName(), plugin);
    }
    
    public ConvertedData adaptData(RawData data) {
        String dataType = data.getType();
        
        // æŸ¥æ‰¾èƒ½å¤„ç†è¯¥æ•°æ®ç±»å‹çš„æ’ä»¶
        for (AdapterPlugin plugin : plugins.values()) {
            if (plugin.canHandle(dataType)) {
                return plugin.convert(data);
            }
        }
        
        throw new UnsupportedDataTypeException("No plugin found for type: " + dataType);
    }
}

// å…·ä½“çš„é€‚é…æ’ä»¶å®ç°
public class JsonDataPlugin implements AdapterPlugin {
    public boolean canHandle(String dataType) {
        return "JSON".equalsIgnoreCase(dataType);
    }
    
    public ConvertedData convert(RawData rawData) {
        // JSONç‰¹å®šçš„è½¬æ¢é€»è¾‘
        return JsonConverter.convert(rawData);
    }
}
```

### 6.2 ç­–ç•¥æ¨¡å¼ç»“åˆé€‚é…å™¨


**ğŸ’¡ è®¾è®¡æ€è·¯**ï¼šä¸ºä¸åŒçš„é€‚é…åœºæ™¯æä¾›å¯åˆ‡æ¢çš„ç­–ç•¥

```java
// é€‚é…ç­–ç•¥æ¥å£
public interface AdaptationStrategy {
    AdaptedResult adapt(OriginalData data, AdaptationContext context);
}

// ç­–ç•¥åŒ–çš„é€‚é…å™¨
public class StrategyBasedAdapter implements FlexibleAdapter {
    private Map<String, AdaptationStrategy> strategies;
    private String defaultStrategy;
    
    public AdaptedResult adapt(OriginalData data, String strategyName) {
        AdaptationStrategy strategy = strategies.get(strategyName);
        if (strategy == null) {
            strategy = strategies.get(defaultStrategy);
        }
        
        AdaptationContext context = createContext(data);
        return strategy.adapt(data, context);
    }
}

// æ€§èƒ½ä¼˜å…ˆç­–ç•¥
public class PerformanceFirstStrategy implements AdaptationStrategy {
    public AdaptedResult adapt(OriginalData data, AdaptationContext context) {
        // å¿«é€Ÿè½¬æ¢ï¼Œå¯èƒ½æŸå¤±ä¸€äº›ç²¾åº¦
        return quickConvert(data);
    }
}

// å‡†ç¡®æ€§ä¼˜å…ˆç­–ç•¥
public class AccuracyFirstStrategy implements AdaptationStrategy {
    public AdaptedResult adapt(OriginalData data, AdaptationContext context) {
        // ç²¾ç¡®è½¬æ¢ï¼Œå¯èƒ½è¾ƒæ…¢
        return preciseConvert(data);
    }
}
```

### 6.3 æ¨¡æ¿æ–¹æ³•ä¼˜åŒ–é€‚é…æµç¨‹


**ğŸ”§ åº”ç”¨åœºæ™¯**ï¼šå½“å¤šä¸ªé€‚é…å™¨æœ‰ç›¸ä¼¼çš„å¤„ç†æµç¨‹æ—¶

```java
// é€‚é…å™¨åŸºç¡€æ¨¡æ¿
public abstract class BaseAdapter<T, R> implements GenericAdapter<T, R> {
    
    // æ¨¡æ¿æ–¹æ³•å®šä¹‰é€‚é…æµç¨‹
    public final R adapt(T input) {
        // 1. è¾“å…¥éªŒè¯
        validateInput(input);
        
        // 2. é¢„å¤„ç†
        T preprocessed = preprocess(input);
        
        // 3. æ ¸å¿ƒè½¬æ¢ï¼ˆå­ç±»å®ç°ï¼‰
        R converted = doConvert(preprocessed);
        
        // 4. åå¤„ç†
        R postprocessed = postprocess(converted);
        
        // 5. ç»“æœéªŒè¯
        validateOutput(postprocessed);
        
        return postprocessed;
    }
    
    // é’©å­æ–¹æ³•ï¼Œå­ç±»å¯ä»¥é€‰æ‹©æ€§é‡å†™
    protected void validateInput(T input) {
        if (input == null) {
            throw new IllegalArgumentException("Input cannot be null");
        }
    }
    
    protected T preprocess(T input) {
        return input; // é»˜è®¤ä¸é¢„å¤„ç†
    }
    
    protected R postprocess(R output) {
        return output; // é»˜è®¤ä¸åå¤„ç†
    }
    
    protected void validateOutput(R output) {
        if (output == null) {
            throw new AdapterException("Conversion resulted in null output");
        }
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°
    protected abstract R doConvert(T input);
}

// å…·ä½“çš„é€‚é…å™¨å®ç°
public class DatabaseRecordAdapter extends BaseAdapter<LegacyRecord, ModernEntity> {
    
    @Override
    protected LegacyRecord preprocess(LegacyRecord input) {
        // æ•°æ®æ¸…æ´—
        return cleanupLegacyData(input);
    }
    
    @Override
    protected ModernEntity doConvert(LegacyRecord record) {
        // æ ¸å¿ƒè½¬æ¢é€»è¾‘
        return ModernEntity.builder()
            .setId(record.getId())
            .setName(record.getName())
            .setCreatedAt(parseDate(record.getDateCreated()))
            .build();
    }
    
    @Override
    protected ModernEntity postprocess(ModernEntity entity) {
        // è®¾ç½®é»˜è®¤å€¼
        if (entity.getStatus() == null) {
            entity.setStatus(EntityStatus.ACTIVE);
        }
        return entity;
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„è®¾è®¡åŸåˆ™


> ğŸ¯ **é€‚é…å™¨è®¾è®¡äº”å¤§åŸåˆ™**

**ğŸ”¸ å•ä¸€èŒè´£åŸåˆ™**
- æ¯ä¸ªé€‚é…å™¨åªè´Ÿè´£ä¸€ç§ç‰¹å®šçš„æ¥å£é€‚é…
- é¿å…åœ¨é€‚é…å™¨ä¸­æ··åˆä¸šåŠ¡é€»è¾‘

**ğŸ”¸ å¼€é—­åŸåˆ™**
- å¯¹æ‰©å±•å¼€æ”¾ï¼šæ”¯æŒæ–°çš„é€‚é…éœ€æ±‚
- å¯¹ä¿®æ”¹å°é—­ï¼šä¸å½±å“ç°æœ‰é€‚é…åŠŸèƒ½

**ğŸ”¸ ä¾èµ–å€’ç½®åŸåˆ™**
- ä¾èµ–æŠ½è±¡æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
- ä¾¿äºæ›¿æ¢è¢«é€‚é…çš„ç»„ä»¶

**ğŸ”¸ æ¥å£éš”ç¦»åŸåˆ™**
- æä¾›æœ€å°åŒ–çš„æ¥å£é€‚é…
- å®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£

**ğŸ”¸ é‡Œæ°æ›¿æ¢åŸåˆ™**
- é€‚é…å™¨å¯ä»¥å®Œå…¨æ›¿ä»£åŸæœ‰æ¥å£
- ä¿æŒæ¥å£å¥‘çº¦çš„ä¸€è‡´æ€§

### 7.2 è®¾è®¡æŠ€å·§é€ŸæŸ¥è¡¨


| **æŠ€å·§åˆ†ç±»** | **åº”ç”¨åœºæ™¯** | **æ ¸å¿ƒè¦ç‚¹** | **æ³¨æ„äº‹é¡¹** |
|-------------|-------------|-------------|-------------|
| **ç²’åº¦æ§åˆ¶** | `æ¥å£è®¾è®¡` | æ ¹æ®å¤æ‚åº¦é€‰æ‹©åˆé€‚ç²’åº¦ | é¿å…è¿‡åº¦æ‹†åˆ†æˆ–åˆå¹¶ |
| **æ€§èƒ½ä¼˜åŒ–** | `é«˜é¢‘è°ƒç”¨` | ç¼“å­˜+å»¶è¿ŸåŠ è½½+æ‰¹å¤„ç† | æƒè¡¡å†…å­˜ä¸æ€§èƒ½ |
| **å¼‚å¸¸å¤„ç†** | `ç¨³å®šæ€§è¦æ±‚` | è½¬æ¢+é‡è¯•+é™çº§ | ä¿æŒå¼‚å¸¸è¯­ä¹‰ä¸€è‡´ |
| **ç‰ˆæœ¬å…¼å®¹** | `ç³»ç»Ÿå‡çº§` | å‘åå…¼å®¹+é…ç½®é©±åŠ¨ | æ¸è¿›å¼è¿ç§»ç­–ç•¥ |
| **å¯æ‰©å±•æ€§** | `éœ€æ±‚å˜åŒ–` | æ’ä»¶åŒ–+ç­–ç•¥æ¨¡å¼ | ä¿æŒæ¶æ„ç®€æ´ |

### 7.3 å¸¸è§è®¾è®¡é™·é˜±ä¸é¿å…æ–¹æ³•


> âš ï¸ **è®¾è®¡é™·é˜±è­¦ç¤º**

**âŒ é™·é˜±1ï¼šé€‚é…å™¨æ‰¿æ‹…è¿‡å¤šè´£ä»»**
```java
// é”™è¯¯ç¤ºä¾‹ï¼šé€‚é…å™¨åŒ…å«ä¸šåŠ¡é€»è¾‘
public class OverloadedAdapter implements UserService {
    public User createUser(UserRequest request) {
        // âŒ æ•°æ®éªŒè¯ï¼ˆåº”è¯¥åœ¨ä¸šåŠ¡å±‚ï¼‰
        validateUserRequest(request);
        
        // âŒ ä¸šåŠ¡è§„åˆ™æ£€æŸ¥ï¼ˆåº”è¯¥åœ¨ä¸šåŠ¡å±‚ï¼‰
        checkBusinessRules(request);
        
        // âœ… é€‚é…é€»è¾‘ï¼ˆé€‚é…å™¨åº”è¯¥åšçš„ï¼‰
        LegacyUser legacy = convertToLegacy(request);
        return legacyService.create(legacy);
    }
}
```

**âœ… æ­£ç¡®åšæ³•ï¼šä¿æŒé€‚é…å™¨èŒè´£å•ä¸€**
```java
public class FocusedAdapter implements UserService {
    public User createUser(UserRequest request) {
        // âœ… åªåšæ¥å£é€‚é…
        LegacyUser legacy = convertToLegacy(request);
        LegacyUser created = legacyService.create(legacy);
        return convertToModern(created);
    }
}
```

**âŒ é™·é˜±2ï¼šå¿½ç•¥å¼‚å¸¸é€‚é…**
- åªè½¬æ¢æ­£å¸¸æµç¨‹ï¼Œå¿½ç•¥å¼‚å¸¸æƒ…å†µ
- å¯¼è‡´å®¢æˆ·ç«¯æ”¶åˆ°æ— æ³•ç†è§£çš„å¼‚å¸¸

**âŒ é™·é˜±3ï¼šç¡¬ç¼–ç é€‚é…é€»è¾‘**
- å°†è½¬æ¢è§„åˆ™å†™æ­»åœ¨ä»£ç ä¸­
- æ— æ³•çµæ´»åº”å¯¹å˜åŒ–

### 7.4 å®æˆ˜åº”ç”¨æŒ‡å¯¼


**ğŸš€ ä»é›¶å¼€å§‹è®¾è®¡é€‚é…å™¨çš„æ­¥éª¤**

1. **ğŸ“Š éœ€æ±‚åˆ†æ**
   - è¯†åˆ«ä¸å…¼å®¹çš„æ¥å£
   - åˆ†æå·®å¼‚ç‚¹å’Œè½¬æ¢å¤æ‚åº¦
   - ç¡®å®šæ€§èƒ½å’Œç¨³å®šæ€§è¦æ±‚

2. **ğŸ¯ è®¾è®¡è§„åˆ’**
   - é€‰æ‹©åˆé€‚çš„é€‚é…å™¨ç²’åº¦
   - è®¾è®¡å¼‚å¸¸å¤„ç†ç­–ç•¥
   - è§„åˆ’æ‰©å±•ç‚¹å’Œé…ç½®é¡¹

3. **ğŸ”§ ç¼–ç å®ç°**
   - å®ç°æ ¸å¿ƒé€‚é…é€»è¾‘
   - æ·»åŠ ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–
   - å®Œå–„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—

4. **ğŸ§ª æµ‹è¯•éªŒè¯**
   - å•å…ƒæµ‹è¯•è¦†ç›–æ‰€æœ‰è½¬æ¢è·¯å¾„
   - é›†æˆæµ‹è¯•éªŒè¯å…¼å®¹æ€§
   - æ€§èƒ½æµ‹è¯•ç¡®ä¿æ»¡è¶³è¦æ±‚

5. **ğŸ“ˆ ä¸Šçº¿ç›‘æ§**
   - ç›‘æ§é€‚é…å™¨æ€§èƒ½æŒ‡æ ‡
   - æ”¶é›†é”™è¯¯æ—¥å¿—å’Œç”¨æˆ·åé¦ˆ
   - æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- é€‚é…æ¥å£é‡åœ¨å·§ï¼Œç²’åº¦æ§åˆ¶å¾ˆé‡è¦
- æ€§èƒ½ä¼˜åŒ–ä¸‰æ¿æ–§ï¼Œç¼“å­˜å»¶è¿ŸåŠ æ‰¹å¤„ç†  
- å¼‚å¸¸å¤„ç†è¦å‘¨å…¨ï¼Œè½¬æ¢é‡è¯•åŠ é™çº§
- ç‰ˆæœ¬å…¼å®¹æ˜¯åŸºç¡€ï¼Œæ‰©å±•è®¾è®¡çœ‹æœªæ¥