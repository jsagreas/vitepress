---
title: 6ã€æŠ½è±¡å·¥å‚æ¨¡å¼ä»£ç å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [å®Œæ•´ä»£ç ç¤ºä¾‹è¯¦è§£](#1-å®Œæ•´ä»£ç ç¤ºä¾‹è¯¦è§£)
2. [å¤šå¹³å°é€‚é…å®ç°](#2-å¤šå¹³å°é€‚é…å®ç°)
3. [æ‰©å±•æ–°äº§å“æ—](#3-æ‰©å±•æ–°äº§å“æ—)
4. [å·¥å‚åˆ‡æ¢æ¼”ç¤º](#4-å·¥å‚åˆ‡æ¢æ¼”ç¤º)
5. [é¡¹ç›®é›†æˆå®è·µ](#5-é¡¹ç›®é›†æˆå®è·µ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“ å®Œæ•´ä»£ç ç¤ºä¾‹è¯¦è§£


### 1.1 æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯ä»€ä¹ˆ

ğŸ¯ **ç®€å•ç†è§£**ï¼šæŠ½è±¡å·¥å‚å°±åƒä¸€ä¸ª"å“ç‰Œä¸“å–åº—"

```
ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š
å®œå®¶å®¶å…·åº— â†’ åªå–å®œå®¶å“ç‰Œçš„æ¡Œå­ã€æ¤…å­ã€æŸœå­
æ— å°è‰¯å“åº— â†’ åªå–æ— å°è‰¯å“çš„æ¡Œå­ã€æ¤…å­ã€æŸœå­

æ¯ä¸ªåº—éƒ½èƒ½æä¾›ï¼š
- åŒä¸€ä¸ªå“ç‰Œé£æ ¼çš„äº§å“
- äº’ç›¸æ­é…çš„äº§å“ç³»åˆ—
- ä¿è¯æ•´ä½“åè°ƒç»Ÿä¸€

è½¯ä»¶ä¸­çš„æŠ½è±¡å·¥å‚ï¼š
Windowså·¥å‚ â†’ åˆ›å»ºWindowsé£æ ¼çš„æŒ‰é’®ã€æ–‡æœ¬æ¡†ã€èœå•
Macå·¥å‚ â†’ åˆ›å»ºMacé£æ ¼çš„æŒ‰é’®ã€æ–‡æœ¬æ¡†ã€èœå•
```

**ğŸ”¸ æ ¸å¿ƒä»·å€¼**
- **äº§å“æ—ç»Ÿä¸€**ï¼šç¡®ä¿åˆ›å»ºçš„äº§å“å±äºåŒä¸€ç³»åˆ—ï¼Œé£æ ¼åè°ƒ
- **å¹³å°æ— å…³**ï¼šå®¢æˆ·ç«¯ä»£ç ä¸éœ€è¦çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªå¹³å°
- **æ˜“äºæ‰©å±•**ï¼šæ·»åŠ æ–°å¹³å°åªéœ€è¦å¢åŠ æ–°çš„å·¥å‚ç±»

### 1.2 åŸºç¡€ä»£ç ç»“æ„è®¾è®¡

**ğŸ“‹ é¦–å…ˆè®¾è®¡äº§å“æ¥å£**

æˆ‘ä»¬ä»¥å›¾å½¢ç•Œé¢ç»„ä»¶ä¸ºä¾‹ï¼Œéœ€è¦åˆ›å»ºæŒ‰é’®å’Œæ–‡æœ¬æ¡†ä¸¤ç±»äº§å“ï¼š

```java
// æŠ½è±¡äº§å“ - æŒ‰é’®æ¥å£
interface Button {
    void paint();      // ç»˜åˆ¶æŒ‰é’®
    void onClick();    // ç‚¹å‡»äº‹ä»¶
}

// æŠ½è±¡äº§å“ - æ–‡æœ¬æ¡†æ¥å£  
interface TextBox {
    void render();     // æ¸²æŸ“æ–‡æœ¬æ¡†
    void onFocus();    // è·å¾—ç„¦ç‚¹äº‹ä»¶
}
```

**ğŸ”§ å…·ä½“äº§å“å®ç°**

```java
// Windowsé£æ ¼çš„æŒ‰é’®
class WindowsButton implements Button {
    @Override
    public void paint() {
        System.out.println("ç»˜åˆ¶Windowsé£æ ¼æŒ‰é’®ï¼šæ–¹å½¢è¾¹æ¡†ï¼Œè“è‰²ä¸»é¢˜");
    }
    
    @Override
    public void onClick() {
        System.out.println("WindowsæŒ‰é’®è¢«ç‚¹å‡»ï¼šæ’­æ”¾ç³»ç»Ÿæç¤ºéŸ³");
    }
}

// Macé£æ ¼çš„æŒ‰é’®
class MacButton implements Button {
    @Override
    public void paint() {
        System.out.println("ç»˜åˆ¶Macé£æ ¼æŒ‰é’®ï¼šåœ†è§’è¾¹æ¡†ï¼Œç™½è‰²ä¸»é¢˜");
    }
    
    @Override
    public void onClick() {
        System.out.println("MacæŒ‰é’®è¢«ç‚¹å‡»ï¼šè§¦è§‰åé¦ˆ");
    }
}

// Windowsé£æ ¼çš„æ–‡æœ¬æ¡†
class WindowsTextBox implements TextBox {
    @Override
    public void render() {
        System.out.println("æ¸²æŸ“Windowsæ–‡æœ¬æ¡†ï¼šç›´è§’è¾¹æ¡†ï¼Œç™½è‰²èƒŒæ™¯");
    }
    
    @Override
    public void onFocus() {
        System.out.println("Windowsæ–‡æœ¬æ¡†è·å¾—ç„¦ç‚¹ï¼šè“è‰²è¾¹æ¡†é«˜äº®");
    }
}

// Macé£æ ¼çš„æ–‡æœ¬æ¡†
class MacTextBox implements TextBox {
    @Override
    public void render() {
        System.out.println("æ¸²æŸ“Macæ–‡æœ¬æ¡†ï¼šåœ†è§’è¾¹æ¡†ï¼Œæµ…ç°èƒŒæ™¯");
    }
    
    @Override
    public void onFocus() {
        System.out.println("Macæ–‡æœ¬æ¡†è·å¾—ç„¦ç‚¹ï¼šè“è‰²å…‰æ™•æ•ˆæœ");
    }
}
```

### 1.3 æŠ½è±¡å·¥å‚è®¾è®¡

**ğŸ­ è®¾è®¡å·¥å‚æ¥å£**

```java
// æŠ½è±¡å·¥å‚æ¥å£
interface UIFactory {
    Button createButton();       // åˆ›å»ºæŒ‰é’®
    TextBox createTextBox();     // åˆ›å»ºæ–‡æœ¬æ¡†
}

// Windowså¹³å°å·¥å‚
class WindowsFactory implements UIFactory {
    @Override
    public Button createButton() {
        return new WindowsButton();
    }
    
    @Override
    public TextBox createTextBox() {
        return new WindowsTextBox();
    }
}

// Macå¹³å°å·¥å‚
class MacFactory implements UIFactory {
    @Override
    public Button createButton() {
        return new MacButton();
    }
    
    @Override
    public TextBox createTextBox() {
        return new MacTextBox();
    }
}
```

### 1.4 å®¢æˆ·ç«¯ä½¿ç”¨ç¤ºä¾‹

**ğŸ–¥ï¸ åº”ç”¨ç¨‹åºä¸»ç±»**

```java
// åº”ç”¨ç¨‹åºç±»
class Application {
    private Button button;
    private TextBox textBox;
    private UIFactory factory;
    
    // æ„é€ å‡½æ•°æ¥æ”¶å·¥å‚
    public Application(UIFactory factory) {
        this.factory = factory;
    }
    
    // åˆ›å»ºUIç•Œé¢
    public void createUI() {
        button = factory.createButton();
        textBox = factory.createTextBox();
    }
    
    // æ¸²æŸ“ç•Œé¢
    public void renderUI() {
        button.paint();
        textBox.render();
    }
    
    // å¤„ç†ç”¨æˆ·äº¤äº’
    public void handleUserInput() {
        button.onClick();
        textBox.onFocus();
    }
}

// ä¸»ç¨‹åºå…¥å£
public class AbstractFactoryDemo {
    public static void main(String[] args) {
        // æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©å·¥å‚
        String os = System.getProperty("os.name");
        UIFactory factory;
        
        if (os.contains("Windows")) {
            factory = new WindowsFactory();
            System.out.println("æ£€æµ‹åˆ°Windowsç³»ç»Ÿï¼Œä½¿ç”¨Windowså·¥å‚");
        } else if (os.contains("Mac")) {
            factory = new MacFactory();
            System.out.println("æ£€æµ‹åˆ°Macç³»ç»Ÿï¼Œä½¿ç”¨Macå·¥å‚");
        } else {
            // é»˜è®¤ä½¿ç”¨Windowså·¥å‚
            factory = new WindowsFactory();
            System.out.println("æœªçŸ¥ç³»ç»Ÿï¼Œä½¿ç”¨é»˜è®¤Windowså·¥å‚");
        }
        
        // åˆ›å»ºåº”ç”¨ç¨‹åº
        Application app = new Application(factory);
        app.createUI();
        app.renderUI();
        app.handleUserInput();
    }
}
```

**ğŸ“Š è¿è¡Œç»“æœç¤ºä¾‹**
```
æ£€æµ‹åˆ°Windowsç³»ç»Ÿï¼Œä½¿ç”¨Windowså·¥å‚
ç»˜åˆ¶Windowsé£æ ¼æŒ‰é’®ï¼šæ–¹å½¢è¾¹æ¡†ï¼Œè“è‰²ä¸»é¢˜
æ¸²æŸ“Windowsæ–‡æœ¬æ¡†ï¼šç›´è§’è¾¹æ¡†ï¼Œç™½è‰²èƒŒæ™¯
WindowsæŒ‰é’®è¢«ç‚¹å‡»ï¼šæ’­æ”¾ç³»ç»Ÿæç¤ºéŸ³
Windowsæ–‡æœ¬æ¡†è·å¾—ç„¦ç‚¹ï¼šè“è‰²è¾¹æ¡†é«˜äº®
```

---

## 2. ğŸŒ å¤šå¹³å°é€‚é…å®ç°


### 2.1 æ‰©å±•åˆ°Linuxå¹³å°

**ğŸ§ å¢åŠ Linuxæ”¯æŒ**

ç°å®ä¸­çš„éœ€æ±‚ï¼šæˆ‘ä»¬çš„åº”ç”¨ä¸åªè¦æ”¯æŒWindowså’ŒMacï¼Œè¿˜è¦æ”¯æŒLinuxç³»ç»Ÿã€‚

```java
// Linuxé£æ ¼çš„äº§å“å®ç°
class LinuxButton implements Button {
    @Override
    public void paint() {
        System.out.println("ç»˜åˆ¶LinuxæŒ‰é’®ï¼šç®€çº¦è¾¹æ¡†ï¼Œæ·±è‰²ä¸»é¢˜");
    }
    
    @Override
    public void onClick() {
        System.out.println("LinuxæŒ‰é’®è¢«ç‚¹å‡»ï¼šå‘½ä»¤è¡Œæç¤º");
    }
}

class LinuxTextBox implements TextBox {
    @Override
    public void render() {
        System.out.println("æ¸²æŸ“Linuxæ–‡æœ¬æ¡†ï¼šæ–¹å½¢è¾¹æ¡†ï¼Œæ·±è‰²èƒŒæ™¯");
    }
    
    @Override
    public void onFocus() {
        System.out.println("Linuxæ–‡æœ¬æ¡†è·å¾—ç„¦ç‚¹ï¼šç»¿è‰²è¾¹æ¡†é—ªçƒ");
    }
}

// Linuxå·¥å‚å®ç°
class LinuxFactory implements UIFactory {
    @Override
    public Button createButton() {
        return new LinuxButton();
    }
    
    @Override
    public TextBox createTextBox() {
        return new LinuxTextBox();
    }
}
```

### 2.2 å·¥å‚é€‰æ‹©å™¨ä¼˜åŒ–

**âš™ï¸ æ™ºèƒ½å·¥å‚é€‰æ‹©æœºåˆ¶**

```java
// å·¥å‚é€‰æ‹©å™¨ç±»
class FactorySelector {
    
    // æ ¹æ®ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©å·¥å‚
    public static UIFactory getFactory() {
        String os = System.getProperty("os.name").toLowerCase();
        
        if (os.contains("windows")) {
            return new WindowsFactory();
        } else if (os.contains("mac")) {
            return new MacFactory();
        } else if (os.contains("linux")) {
            return new LinuxFactory();
        } else {
            // é»˜è®¤è¿”å›Windowså·¥å‚
            System.out.println("âš ï¸ æœªè¯†åˆ«çš„æ“ä½œç³»ç»Ÿï¼Œä½¿ç”¨é»˜è®¤å·¥å‚");
            return new WindowsFactory();
        }
    }
    
    // æ‰‹åŠ¨æŒ‡å®šå·¥å‚ç±»å‹
    public static UIFactory getFactory(String platformType) {
        switch (platformType.toLowerCase()) {
            case "windows":
                return new WindowsFactory();
            case "mac":
                return new MacFactory();
            case "linux":
                return new LinuxFactory();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„å¹³å°ç±»å‹: " + platformType);
        }
    }
    
    // è·å–æ”¯æŒçš„å¹³å°åˆ—è¡¨
    public static String[] getSupportedPlatforms() {
        return new String[]{"Windows", "Mac", "Linux"};
    }
}
```

### 2.3 é…ç½®æ–‡ä»¶é©±åŠ¨çš„å·¥å‚é€‰æ‹©

**ğŸ“„ ä½¿ç”¨é…ç½®æ–‡ä»¶æ§åˆ¶**

åˆ›å»ºé…ç½®æ–‡ä»¶ `ui-config.properties`ï¼š
```properties
# UIå·¥å‚é…ç½®
default.platform=auto
manual.platform=windows
theme.style=modern

# å·¥å‚ç±»é…ç½®
factory.windows=com.example.WindowsFactory
factory.mac=com.example.MacFactory
factory.linux=com.example.LinuxFactory
```

é…ç½®é©±åŠ¨çš„å·¥å‚ç®¡ç†å™¨ï¼š
```java
class ConfigurableFactoryManager {
    private Properties config;
    
    public ConfigurableFactoryManager() {
        loadConfiguration();
    }
    
    private void loadConfiguration() {
        config = new Properties();
        try {
            config.load(getClass().getResourceAsStream("/ui-config.properties"));
        } catch (Exception e) {
            System.out.println("é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®");
            setDefaultConfig();
        }
    }
    
    private void setDefaultConfig() {
        config.setProperty("default.platform", "auto");
        config.setProperty("factory.windows", "WindowsFactory");
        config.setProperty("factory.mac", "MacFactory");
        config.setProperty("factory.linux", "LinuxFactory");
    }
    
    public UIFactory createFactory() {
        String platform = config.getProperty("default.platform");
        
        if ("auto".equals(platform)) {
            return FactorySelector.getFactory();
        } else {
            return FactorySelector.getFactory(platform);
        }
    }
}
```

---

## 3. â• æ‰©å±•æ–°äº§å“æ—


### 3.1 æ·»åŠ æ–°çš„UIç»„ä»¶

**ğŸ”˜ æ‰©å±•èœå•å’Œå¯¹è¯æ¡†ç»„ä»¶**

ç°åœ¨æˆ‘ä»¬éœ€è¦æ·»åŠ èœå•å’Œå¯¹è¯æ¡†ç»„ä»¶ï¼Œçœ‹çœ‹æŠ½è±¡å·¥å‚å¦‚ä½•ä¼˜é›…åœ°å¤„ç†æ‰©å±•ï¼š

```java
// æ–°å¢äº§å“æ¥å£
interface Menu {
    void showMenu();
    void selectItem(String item);
}

interface Dialog {
    void openDialog();
    void closeDialog();
}

// Windowså¹³å°çš„æ–°ç»„ä»¶
class WindowsMenu implements Menu {
    @Override
    public void showMenu() {
        System.out.println("æ˜¾ç¤ºWindowsèœå•ï¼šç»å…¸ä¸‹æ‹‰å¼èœå•");
    }
    
    @Override
    public void selectItem(String item) {
        System.out.println("é€‰æ‹©Windowsèœå•é¡¹ï¼š" + item + "ï¼ˆé«˜äº®æ˜¾ç¤ºï¼‰");
    }
}

class WindowsDialog implements Dialog {
    @Override
    public void openDialog() {
        System.out.println("æ‰“å¼€Windowså¯¹è¯æ¡†ï¼šæ¨¡æ€çª—å£ï¼Œé˜´å½±èƒŒæ™¯");
    }
    
    @Override
    public void closeDialog() {
        System.out.println("å…³é—­Windowså¯¹è¯æ¡†ï¼šæ·¡å‡ºåŠ¨ç”»");
    }
}

// Macå¹³å°çš„æ–°ç»„ä»¶
class MacMenu implements Menu {
    @Override
    public void showMenu() {
        System.out.println("æ˜¾ç¤ºMacèœå•ï¼šé¡¶éƒ¨èœå•æ æ ·å¼");
    }
    
    @Override
    public void selectItem(String item) {
        System.out.println("é€‰æ‹©Macèœå•é¡¹ï¼š" + item + "ï¼ˆè“è‰²é«˜äº®ï¼‰");
    }
}

class MacDialog implements Dialog {
    @Override
    public void openDialog() {
        System.out.println("æ‰“å¼€Macå¯¹è¯æ¡†ï¼šåœ†è§’çª—å£ï¼Œæ¯›ç»ç’ƒæ•ˆæœ");
    }
    
    @Override
    public void closeDialog() {
        System.out.println("å…³é—­Macå¯¹è¯æ¡†ï¼šç¼©æ”¾åŠ¨ç”»");
    }
}
```

### 3.2 æ‰©å±•æŠ½è±¡å·¥å‚æ¥å£

**ğŸ”„ æ›´æ–°å·¥å‚æ¥å£**

```java
// æ‰©å±•åçš„æŠ½è±¡å·¥å‚æ¥å£
interface ExtendedUIFactory extends UIFactory {
    Menu createMenu();
    Dialog createDialog();
}

// æ›´æ–°Windowså·¥å‚
class ExtendedWindowsFactory implements ExtendedUIFactory {
    @Override
    public Button createButton() {
        return new WindowsButton();
    }
    
    @Override
    public TextBox createTextBox() {
        return new WindowsTextBox();
    }
    
    @Override
    public Menu createMenu() {
        return new WindowsMenu();
    }
    
    @Override
    public Dialog createDialog() {
        return new WindowsDialog();
    }
}

// æ›´æ–°Macå·¥å‚
class ExtendedMacFactory implements ExtendedUIFactory {
    @Override
    public Button createButton() {
        return new MacButton();
    }
    
    @Override
    public TextBox createTextBox() {
        return new MacTextBox();
    }
    
    @Override
    public Menu createMenu() {
        return new MacMenu();
    }
    
    @Override
    public Dialog createDialog() {
        return new MacDialog();
    }
}
```

### 3.3 å…¼å®¹æ€§å¤„ç†

**ğŸ”§ å‘åå…¼å®¹çš„é€‚é…å™¨**

```java
// é€‚é…å™¨æ¨¡å¼ï¼šè®©æ—§çš„UIFactoryä¹Ÿèƒ½ä½¿ç”¨æ–°åŠŸèƒ½
class FactoryAdapter implements ExtendedUIFactory {
    private UIFactory oldFactory;
    
    public FactoryAdapter(UIFactory oldFactory) {
        this.oldFactory = oldFactory;
    }
    
    @Override
    public Button createButton() {
        return oldFactory.createButton();
    }
    
    @Override
    public TextBox createTextBox() {
        return oldFactory.createTextBox();
    }
    
    @Override
    public Menu createMenu() {
        // ä¸ºæ—§å·¥å‚æä¾›é»˜è®¤çš„èœå•å®ç°
        return new DefaultMenu();
    }
    
    @Override
    public Dialog createDialog() {
        // ä¸ºæ—§å·¥å‚æä¾›é»˜è®¤çš„å¯¹è¯æ¡†å®ç°
        return new DefaultDialog();
    }
}

// é»˜è®¤å®ç°
class DefaultMenu implements Menu {
    @Override
    public void showMenu() {
        System.out.println("æ˜¾ç¤ºé»˜è®¤èœå•ï¼šç®€å•åˆ—è¡¨èœå•");
    }
    
    @Override
    public void selectItem(String item) {
        System.out.println("é€‰æ‹©èœå•é¡¹ï¼š" + item);
    }
}

class DefaultDialog implements Dialog {
    @Override
    public void openDialog() {
        System.out.println("æ‰“å¼€é»˜è®¤å¯¹è¯æ¡†ï¼šåŸºç¡€å¼¹çª—");
    }
    
    @Override
    public void closeDialog() {
        System.out.println("å…³é—­é»˜è®¤å¯¹è¯æ¡†");
    }
}
```

---

## 4. ğŸ”„ å·¥å‚åˆ‡æ¢æ¼”ç¤º


### 4.1 è¿è¡Œæ—¶å·¥å‚åˆ‡æ¢

**âš¡ åŠ¨æ€åˆ‡æ¢ä¸åŒå¹³å°**

```java
// åŠ¨æ€å·¥å‚åˆ‡æ¢æ¼”ç¤º
class DynamicFactorySwitcher {
    private ExtendedUIFactory currentFactory;
    private String currentPlatform;
    
    public DynamicFactorySwitcher() {
        // åˆå§‹åŒ–ä¸ºè‡ªåŠ¨æ£€æµ‹çš„å·¥å‚
        switchToPlatform("auto");
    }
    
    // åˆ‡æ¢åˆ°æŒ‡å®šå¹³å°
    public void switchToPlatform(String platform) {
        ExtendedUIFactory newFactory;
        
        switch (platform.toLowerCase()) {
            case "windows":
                newFactory = new ExtendedWindowsFactory();
                currentPlatform = "Windows";
                break;
            case "mac":
                newFactory = new ExtendedMacFactory();
                currentPlatform = "Mac";
                break;
            case "linux":
                newFactory = new ExtendedLinuxFactory();
                currentPlatform = "Linux";
                break;
            case "auto":
                newFactory = autoDetectFactory();
                break;
            default:
                System.out.println("âŒ ä¸æ”¯æŒçš„å¹³å°: " + platform);
                return;
        }
        
        this.currentFactory = newFactory;
        System.out.println("âœ… å·²åˆ‡æ¢åˆ° " + currentPlatform + " å¹³å°å·¥å‚");
    }
    
    private ExtendedUIFactory autoDetectFactory() {
        String os = System.getProperty("os.name").toLowerCase();
        if (os.contains("windows")) {
            currentPlatform = "Windows";
            return new ExtendedWindowsFactory();
        } else if (os.contains("mac")) {
            currentPlatform = "Mac";
            return new ExtendedMacFactory();
        } else {
            currentPlatform = "Linux";
            return new ExtendedLinuxFactory();
        }
    }
    
    // æ¼”ç¤ºå½“å‰å¹³å°çš„æ‰€æœ‰ç»„ä»¶
    public void demonstrateCurrentPlatform() {
        System.out.println("\n=== " + currentPlatform + " å¹³å°UIç»„ä»¶æ¼”ç¤º ===");
        
        // åˆ›å»ºæ‰€æœ‰ç»„ä»¶
        Button button = currentFactory.createButton();
        TextBox textBox = currentFactory.createTextBox();
        Menu menu = currentFactory.createMenu();
        Dialog dialog = currentFactory.createDialog();
        
        // æ¼”ç¤ºç»„ä»¶åŠŸèƒ½
        System.out.println("\nğŸ”˜ æŒ‰é’®æ¼”ç¤ºï¼š");
        button.paint();
        button.onClick();
        
        System.out.println("\nğŸ“ æ–‡æœ¬æ¡†æ¼”ç¤ºï¼š");
        textBox.render();
        textBox.onFocus();
        
        System.out.println("\nğŸ“‹ èœå•æ¼”ç¤ºï¼š");
        menu.showMenu();
        menu.selectItem("æ–‡ä»¶");
        
        System.out.println("\nğŸ’¬ å¯¹è¯æ¡†æ¼”ç¤ºï¼š");
        dialog.openDialog();
        dialog.closeDialog();
    }
    
    public String getCurrentPlatform() {
        return currentPlatform;
    }
}
```

### 4.2 äº¤äº’å¼å¹³å°åˆ‡æ¢æ¼”ç¤º

**ğŸ® ç”¨æˆ·äº¤äº’æ¼”ç¤ºç¨‹åº**

```java
import java.util.Scanner;

public class InteractiveFactoryDemo {
    public static void main(String[] args) {
        DynamicFactorySwitcher switcher = new DynamicFactorySwitcher();
        Scanner scanner = new Scanner(System.in);
        
        System.out.println("ğŸ¨ æŠ½è±¡å·¥å‚æ¨¡å¼ - å¤šå¹³å°UIæ¼”ç¤ºç¨‹åº");
        System.out.println("å½“å‰å¹³å°ï¼š" + switcher.getCurrentPlatform());
        
        while (true) {
            showMenu();
            String choice = scanner.nextLine().trim();
            
            switch (choice) {
                case "1":
                    switcher.switchToPlatform("windows");
                    break;
                case "2":
                    switcher.switchToPlatform("mac");
                    break;
                case "3":
                    switcher.switchToPlatform("linux");
                    break;
                case "4":
                    switcher.switchToPlatform("auto");
                    break;
                case "5":
                    switcher.demonstrateCurrentPlatform();
                    break;
                case "6":
                    comparePlatforms();
                    break;
                case "0":
                    System.out.println("ğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨æŠ½è±¡å·¥å‚æ¼”ç¤ºç¨‹åºï¼");
                    return;
                default:
                    System.out.println("âŒ æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥");
            }
            
            System.out.println("\næŒ‰å›è½¦é”®ç»§ç»­...");
            scanner.nextLine();
        }
    }
    
    private static void showMenu() {
        System.out.println("\n" + "=".repeat(50));
        System.out.println("è¯·é€‰æ‹©æ“ä½œï¼š");
        System.out.println("1. åˆ‡æ¢åˆ° Windows å¹³å°");
        System.out.println("2. åˆ‡æ¢åˆ° Mac å¹³å°");
        System.out.println("3. åˆ‡æ¢åˆ° Linux å¹³å°");
        System.out.println("4. è‡ªåŠ¨æ£€æµ‹å¹³å°");
        System.out.println("5. æ¼”ç¤ºå½“å‰å¹³å°ç»„ä»¶");
        System.out.println("6. å¯¹æ¯”æ‰€æœ‰å¹³å°å·®å¼‚");
        System.out.println("0. é€€å‡ºç¨‹åº");
        System.out.print("è¯·è¾“å…¥é€‰æ‹© (0-6): ");
    }
    
    private static void comparePlatforms() {
        System.out.println("\nğŸ” å¹³å°å·®å¼‚å¯¹æ¯”ï¼š");
        
        String[] platforms = {"windows", "mac", "linux"};
        for (String platform : platforms) {
            DynamicFactorySwitcher tempSwitcher = new DynamicFactorySwitcher();
            tempSwitcher.switchToPlatform(platform);
            tempSwitcher.demonstrateCurrentPlatform();
            System.out.println();
        }
    }
}
```

---

## 5. ğŸ—ï¸ é¡¹ç›®é›†æˆå®è·µ


### 5.1 Springæ¡†æ¶é›†æˆ

**ğŸŒ± åœ¨Springé¡¹ç›®ä¸­ä½¿ç”¨æŠ½è±¡å·¥å‚**

```java
// Springé…ç½®ç±»
@Configuration
@EnableConfigurationProperties(UIFactoryProperties.class)
public class UIFactoryConfig {
    
    @Autowired
    private UIFactoryProperties properties;
    
    @Bean
    @Primary
    public ExtendedUIFactory uiFactory() {
        String platform = properties.getPlatform();
        
        if ("auto".equals(platform)) {
            return createAutoDetectedFactory();
        } else {
            return createSpecificFactory(platform);
        }
    }
    
    private ExtendedUIFactory createAutoDetectedFactory() {
        // å®ç°è‡ªåŠ¨æ£€æµ‹é€»è¾‘
        return FactorySelector.getExtendedFactory();
    }
    
    private ExtendedUIFactory createSpecificFactory(String platform) {
        switch (platform.toLowerCase()) {
            case "windows":
                return new ExtendedWindowsFactory();
            case "mac":
                return new ExtendedMacFactory();
            case "linux":
                return new ExtendedLinuxFactory();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„å¹³å°: " + platform);
        }
    }
}

// é…ç½®å±æ€§ç±»
@ConfigurationProperties(prefix = "ui.factory")
@Data
public class UIFactoryProperties {
    private String platform = "auto";
    private String theme = "default";
    private boolean enableAnimation = true;
}
```

### 5.2 Maven/Gradleé¡¹ç›®ç»“æ„

**ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„è®¾è®¡**

```
src/main/java/
â”œâ”€â”€ factory/
â”‚   â”œâ”€â”€ AbstractUIFactory.java          # æŠ½è±¡å·¥å‚æ¥å£
â”‚   â”œâ”€â”€ WindowsUIFactory.java           # Windowså…·ä½“å·¥å‚
â”‚   â”œâ”€â”€ MacUIFactory.java               # Macå…·ä½“å·¥å‚
â”‚   â””â”€â”€ LinuxUIFactory.java             # Linuxå…·ä½“å·¥å‚
â”œâ”€â”€ products/
â”‚   â”œâ”€â”€ Button.java                     # æŒ‰é’®æ¥å£
â”‚   â”œâ”€â”€ TextBox.java                    # æ–‡æœ¬æ¡†æ¥å£
â”‚   â”œâ”€â”€ windows/                        # Windowsäº§å“å®ç°
â”‚   â”‚   â”œâ”€â”€ WindowsButton.java
â”‚   â”‚   â””â”€â”€ WindowsTextBox.java
â”‚   â”œâ”€â”€ mac/                            # Macäº§å“å®ç°
â”‚   â”‚   â”œâ”€â”€ MacButton.java
â”‚   â”‚   â””â”€â”€ MacTextBox.java
â”‚   â””â”€â”€ linux/                          # Linuxäº§å“å®ç°
â”‚       â”œâ”€â”€ LinuxButton.java
â”‚       â””â”€â”€ LinuxTextBox.java
â”œâ”€â”€ selector/
â”‚   â”œâ”€â”€ FactorySelector.java            # å·¥å‚é€‰æ‹©å™¨
â”‚   â””â”€â”€ ConfigurableFactoryManager.java # é…ç½®é©±åŠ¨ç®¡ç†å™¨
â””â”€â”€ demo/
    â”œâ”€â”€ Application.java                # ç¤ºä¾‹åº”ç”¨
    â””â”€â”€ InteractiveDemo.java            # äº¤äº’æ¼”ç¤º
```

### 5.3 å®é™…é¡¹ç›®åº”ç”¨åœºæ™¯

**ğŸ’¼ çœŸå®ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹**

**åœºæ™¯1ï¼šè·¨å¹³å°æ¡Œé¢åº”ç”¨**
```java
// è·¨å¹³å°æ–‡æ¡£ç¼–è¾‘å™¨
public class DocumentEditor {
    private ExtendedUIFactory uiFactory;
    private Button saveButton;
    private Button openButton;
    private TextBox contentArea;
    private Menu fileMenu;
    
    public DocumentEditor(ExtendedUIFactory factory) {
        this.uiFactory = factory;
        initializeUI();
    }
    
    private void initializeUI() {
        // åˆ›å»ºå¹³å°ç‰¹å®šçš„UIç»„ä»¶
        saveButton = uiFactory.createButton();
        openButton = uiFactory.createButton();
        contentArea = uiFactory.createTextBox();
        fileMenu = uiFactory.createMenu();
        
        setupEventHandlers();
    }
    
    private void setupEventHandlers() {
        // é…ç½®äº‹ä»¶å¤„ç†ï¼Œä½†å…·ä½“çš„è§†è§‰æ•ˆæœç”±å„å¹³å°å·¥å‚å†³å®š
        System.out.println("ğŸ“„ æ–‡æ¡£ç¼–è¾‘å™¨åˆå§‹åŒ–å®Œæˆ");
        System.out.println("ğŸ’¾ ä¿å­˜æŒ‰é’®å·²å°±ç»ª");
        System.out.println("ğŸ“ æ‰“å¼€æŒ‰é’®å·²å°±ç»ª");
        System.out.println("âœï¸ ç¼–è¾‘åŒºåŸŸå·²å°±ç»ª");
    }
    
    public void openDocument(String filename) {
        fileMenu.showMenu();
        contentArea.render();
        System.out.println("ğŸ“– æ‰“å¼€æ–‡æ¡£: " + filename);
    }
    
    public void saveDocument(String filename) {
        saveButton.onClick();
        System.out.println("ğŸ’¾ ä¿å­˜æ–‡æ¡£: " + filename);
    }
}
```

**åœºæ™¯2ï¼šå¤šä¸»é¢˜Webåº”ç”¨**
```java
// Webåº”ç”¨çš„ä¸»é¢˜å·¥å‚
interface WebThemeFactory {
    WebButton createButton();
    WebTextBox createTextBox();
    WebDialog createDialog();
}

// æ·±è‰²ä¸»é¢˜å·¥å‚
class DarkThemeFactory implements WebThemeFactory {
    @Override
    public WebButton createButton() {
        return new DarkWebButton();
    }
    
    @Override
    public WebTextBox createTextBox() {
        return new DarkWebTextBox();
    }
    
    @Override
    public WebDialog createDialog() {
        return new DarkWebDialog();
    }
}

// æµ…è‰²ä¸»é¢˜å·¥å‚
class LightThemeFactory implements WebThemeFactory {
    @Override
    public WebButton createButton() {
        return new LightWebButton();
    }
    
    @Override
    public WebTextBox createTextBox() {
        return new LightWebTextBox();
    }
    
    @Override
    public WebDialog createDialog() {
        return new LightWebDialog();
    }
}

// Webåº”ç”¨ä¸»é¢˜ç®¡ç†å™¨
@Service
public class WebThemeManager {
    private WebThemeFactory currentTheme;
    
    @PostConstruct
    public void initialize() {
        // æ ¹æ®ç”¨æˆ·åå¥½æˆ–ç³»ç»Ÿè®¾ç½®é€‰æ‹©ä¸»é¢˜
        String userPreference = getUserThemePreference();
        switchTheme(userPreference);
    }
    
    public void switchTheme(String themeName) {
        switch (themeName.toLowerCase()) {
            case "dark":
                currentTheme = new DarkThemeFactory();
                break;
            case "light":
                currentTheme = new LightThemeFactory();
                break;
            default:
                currentTheme = new LightThemeFactory();
        }
        
        System.out.println("ğŸ¨ å·²åˆ‡æ¢åˆ° " + themeName + " ä¸»é¢˜");
    }
    
    public WebThemeFactory getCurrentTheme() {
        return currentTheme;
    }
    
    private String getUserThemePreference() {
        // ä»æ•°æ®åº“æˆ–é…ç½®æ–‡ä»¶è¯»å–ç”¨æˆ·åå¥½
        return "light"; // é»˜è®¤å€¼
    }
}
```

### 5.4 æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µ

**âš¡ å·¥å‚æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**

```java
// å•ä¾‹å·¥å‚ç®¡ç†å™¨ - é¿å…é‡å¤åˆ›å»ºå·¥å‚å®ä¾‹
public class FactoryManager {
    private static final Map<String, ExtendedUIFactory> factoryCache = new ConcurrentHashMap<>();
    
    // è·å–å·¥å‚å®ä¾‹ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰
    public static ExtendedUIFactory getFactory(String platform) {
        return factoryCache.computeIfAbsent(platform, FactoryManager::createFactory);
    }
    
    private static ExtendedUIFactory createFactory(String platform) {
        switch (platform.toLowerCase()) {
            case "windows":
                return new ExtendedWindowsFactory();
            case "mac":
                return new ExtendedMacFactory();
            case "linux":
                return new ExtendedLinuxFactory();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„å¹³å°: " + platform);
        }
    }
    
    // é¢„çƒ­å·¥å‚ - åœ¨åº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºå¸¸ç”¨å·¥å‚
    public static void warmUpFactories() {
        String[] commonPlatforms = {"windows", "mac", "linux"};
        for (String platform : commonPlatforms) {
            getFactory(platform);
        }
        System.out.println("ğŸš€ å·¥å‚é¢„çƒ­å®Œæˆ");
    }
    
    // æ¸…ç†å·¥å‚ç¼“å­˜
    public static void clearCache() {
        factoryCache.clear();
        System.out.println("ğŸ§¹ å·¥å‚ç¼“å­˜å·²æ¸…ç†");
    }
}
```

**ğŸ” è®¾è®¡åŸåˆ™æ£€æŸ¥æ¸…å•**
```
âœ… ä¾èµ–å€’ç½®åŸåˆ™ï¼šå®¢æˆ·ç«¯ä¾èµ–æŠ½è±¡å·¥å‚ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
âœ… å¼€é—­åŸåˆ™ï¼šå¯ä»¥æ·»åŠ æ–°å¹³å°è€Œä¸ä¿®æ”¹ç°æœ‰ä»£ç 
âœ… å•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ªå·¥å‚åªè´Ÿè´£åˆ›å»ºä¸€ä¸ªå¹³å°çš„äº§å“
âœ… é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šæ‰€æœ‰å·¥å‚éƒ½å¯ä»¥äº’ç›¸æ›¿æ¢ä½¿ç”¨
âœ… æ¥å£éš”ç¦»åŸåˆ™ï¼šäº§å“æ¥å£èŒè´£å•ä¸€ï¼Œä¸å¼ºè¿«å®ç°ä¸éœ€è¦çš„æ–¹æ³•
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æŠ½è±¡å·¥å‚æœ¬è´¨ï¼šåˆ›å»ºç›¸å…³äº§å“æ—çš„å·¥å‚æ¥å£ï¼Œç¡®ä¿äº§å“é£æ ¼ç»Ÿä¸€
ğŸ”¸ äº§å“æ—æ¦‚å¿µï¼šä¸€ç»„ç›¸å…³çš„äº§å“ï¼ˆå¦‚Windowsé£æ ¼çš„æŒ‰é’®ã€æ–‡æœ¬æ¡†ã€èœå•ï¼‰
ğŸ”¸ å·¥å‚æ—æ¦‚å¿µï¼šä¸ºæ¯ä¸ªäº§å“æ—æä¾›ä¸“é—¨çš„å·¥å‚ï¼ˆWindowsFactoryã€MacFactoryï¼‰
ğŸ”¸ å®¢æˆ·ç«¯éš”ç¦»ï¼šåº”ç”¨ä»£ç ä¸çŸ¥é“å…·ä½“å¹³å°ï¼Œåªé€šè¿‡æŠ½è±¡æ¥å£æ“ä½œ
ğŸ”¸ æ˜“äºæ‰©å±•ï¼šæ·»åŠ æ–°å¹³å°åªéœ€å¢åŠ æ–°çš„äº§å“ç±»å’Œå·¥å‚ç±»
ğŸ”¸ é£æ ¼ä¸€è‡´æ€§ï¼šåŒä¸€å·¥å‚åˆ›å»ºçš„äº§å“ä¿è¯é£æ ¼åè°ƒç»Ÿä¸€
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æŠ½è±¡å·¥å‚ vs å·¥å‚æ–¹æ³•çš„åŒºåˆ«**
```
å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š
- åˆ›å»ºä¸€ç§äº§å“çš„ä¸åŒå®ç°
- ä¾‹å¦‚ï¼šButtonFactoryåˆ›å»ºä¸åŒæ ·å¼çš„æŒ‰é’®

æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š
- åˆ›å»ºå¤šç§ç›¸å…³äº§å“çš„åŒä¸€é£æ ¼å®ç°
- ä¾‹å¦‚ï¼šUIFactoryåˆ›å»ºåŒä¸€å¹³å°çš„æŒ‰é’®ã€æ–‡æœ¬æ¡†ã€èœå•

å…³é”®åŒºåˆ«ï¼š
å·¥å‚æ–¹æ³•å…³æ³¨"ä¸€ç§äº§å“çš„å¤šç§å®ç°"
æŠ½è±¡å·¥å‚å…³æ³¨"å¤šç§äº§å“çš„ç»Ÿä¸€é£æ ¼"
```

**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŠ½è±¡å·¥å‚**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… éœ€è¦åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³äº§å“
âœ… è¿™äº›äº§å“å±äºä¸åŒçš„å“ç‰Œæˆ–å¹³å°
âœ… å®¢æˆ·ç«¯éœ€è¦ä¸å…·ä½“äº§å“è§£è€¦
âœ… éœ€è¦ä¿è¯äº§å“ä¹‹é—´çš„ä¸€è‡´æ€§

ä¸é€‚ç”¨åœºæ™¯ï¼š
âŒ åªæœ‰ä¸€ç§äº§å“éœ€è¦åˆ›å»º
âŒ äº§å“ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„æ—ç¾¤å…³ç³»
âŒ ç³»ç»Ÿå¾ˆç®€å•ï¼Œä¸éœ€è¦è¿™ç§å¤æ‚åº¦
```

**ğŸ”¹ å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ä»·å€¼**
```
è·¨å¹³å°å¼€å‘ï¼š
- æ¡Œé¢åº”ç”¨çš„å¤šæ“ä½œç³»ç»Ÿæ”¯æŒ
- Webåº”ç”¨çš„å¤šä¸»é¢˜åˆ‡æ¢
- ç§»åŠ¨åº”ç”¨çš„å¤šå“ç‰Œå®šåˆ¶

ä¼ä¸šçº§åº”ç”¨ï¼š
- å¤šç§Ÿæˆ·ç³»ç»Ÿçš„ç•Œé¢å®šåˆ¶
- ä¸åŒå®¢æˆ·çš„äº§å“é£æ ¼é€‚é…
- å›½é™…åŒ–åº”ç”¨çš„æœ¬åœ°åŒ–ç•Œé¢

æŠ€æœ¯æ¶æ„ï¼š
- å‡å°‘å®¢æˆ·ç«¯ä¸å…·ä½“å®ç°çš„è€¦åˆ
- æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§
- æ”¯æŒè¿è¡Œæ—¶çš„åŠ¨æ€åˆ‡æ¢
```

### 6.3 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


**ğŸš¨ å¸¸è§é™·é˜±**
```
é™·é˜±1ï¼šè¿‡åº¦è®¾è®¡
é—®é¢˜ï¼šä¸ºç®€å•åœºæ™¯ä½¿ç”¨æŠ½è±¡å·¥å‚ï¼Œå¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§
è§£å†³ï¼šå…ˆè¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦äº§å“æ—å’Œå¤šå¹³å°æ”¯æŒ

é™·é˜±2ï¼šå·¥å‚çˆ†ç‚¸
é—®é¢˜ï¼šæ¯ä¸ªæ–°å¹³å°éƒ½è¦åˆ›å»ºå¤§é‡çš„äº§å“ç±»å’Œå·¥å‚ç±»
è§£å†³ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶ã€åå°„æˆ–ä¾èµ–æ³¨å…¥ç®€åŒ–åˆ›å»ºè¿‡ç¨‹

é™·é˜±3ï¼šäº§å“æ¥å£ä¸ç¨³å®š
é—®é¢˜ï¼šé¢‘ç¹ä¿®æ”¹äº§å“æ¥å£å½±å“æ‰€æœ‰å®ç°ç±»
è§£å†³ï¼šè®¾è®¡ç¨³å®šçš„æŠ½è±¡æ¥å£ï¼Œä½¿ç”¨é€‚é…å™¨å¤„ç†å˜åŒ–
```

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**
```
è®¾è®¡é˜¶æ®µï¼š
- å…ˆè¯†åˆ«çœŸæ­£çš„äº§å“æ—å…³ç³»
- è®¾è®¡ç¨³å®šçš„æŠ½è±¡æ¥å£
- è€ƒè™‘æœªæ¥å¯èƒ½çš„æ‰©å±•éœ€æ±‚

å®ç°é˜¶æ®µï¼š
- ä½¿ç”¨å·¥å‚ç¼“å­˜æé«˜æ€§èƒ½
- è€ƒè™‘ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¡†æ¶
- ä¸ºæ¯ä¸ªå¹³å°å†™å•å…ƒæµ‹è¯•

ç»´æŠ¤é˜¶æ®µï¼š
- å®šæœŸé‡æ„æ¸…ç†æ— ç”¨ä»£ç 
- ç›‘æ§å·¥å‚åˆ›å»ºçš„æ€§èƒ½
- æ–‡æ¡£åŒ–å„å¹³å°çš„å·®å¼‚ç‚¹
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- æŠ½è±¡å·¥å‚ç®¡äº§å“æ—ï¼ŒåŒä¸€é£æ ¼æˆå¥—åˆ›å»º
- å®¢æˆ·ç«¯ä»£ç ä¸çŸ¥æƒ…ï¼Œå·¥å‚åˆ‡æ¢å¾ˆè½»æ¾
- æ–°å¢å¹³å°ä¸ä¿®æ”¹ï¼Œå¼€é—­åŸåˆ™ä½“ç°å¥½
- äº§å“ä¸€è‡´æœ‰ä¿éšœï¼Œç”¨æˆ·ä½“éªŒæ›´åè°ƒ