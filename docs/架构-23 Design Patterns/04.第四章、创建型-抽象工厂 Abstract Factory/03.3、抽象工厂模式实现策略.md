---
title: 3ã€æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°ç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [å·¥å‚æ—è®¾è®¡åŸåˆ™](#1-å·¥å‚æ—è®¾è®¡åŸåˆ™)
2. [äº§å“æ—æ‰©å±•æœºåˆ¶](#2-äº§å“æ—æ‰©å±•æœºåˆ¶)
3. [é…ç½®é©±åŠ¨å·¥å‚](#3-é…ç½®é©±åŠ¨å·¥å‚)
4. [å·¥å‚é€‰æ‹©ç­–ç•¥](#4-å·¥å‚é€‰æ‹©ç­–ç•¥)
5. [ä¾èµ–æ³¨å…¥é›†æˆ](#5-ä¾èµ–æ³¨å…¥é›†æˆ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ­ å·¥å‚æ—è®¾è®¡åŸåˆ™


### 1.1 ä»€ä¹ˆæ˜¯å·¥å‚æ—


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä¸€ä¸‹æ±½è½¦åˆ¶é€ ä¸šï¼Œå¥”é©°æœ‰è‡ªå·±çš„å·¥å‚ç”Ÿäº§å¥”é©°è½¿è½¦å’Œå¥”é©°SUVï¼Œå®é©¬æœ‰è‡ªå·±çš„å·¥å‚ç”Ÿäº§å®é©¬è½¿è½¦å’Œå®é©¬SUVã€‚æ¯ä¸ªå“ç‰Œå°±æ˜¯ä¸€ä¸ª"å·¥å‚æ—"ï¼Œè´Ÿè´£ç”Ÿäº§è¯¥å“ç‰Œä¸‹çš„æ‰€æœ‰äº§å“ã€‚

```
ç°å®ä¸–ç•Œçš„ä¾‹å­ï¼š

å¥”é©°å·¥å‚æ—:                    å®é©¬å·¥å‚æ—:
â”œâ”€â”€ ç”Ÿäº§å¥”é©°è½¿è½¦                â”œâ”€â”€ ç”Ÿäº§å®é©¬è½¿è½¦
â””â”€â”€ ç”Ÿäº§å¥”é©°SUV                â””â”€â”€ ç”Ÿäº§å®é©¬SUV

æ¯ä¸ªå·¥å‚æ—éƒ½éµå¾ªç»Ÿä¸€çš„ç”Ÿäº§æ ‡å‡†ï¼Œä½†äº§å‡ºä¸åŒå“ç‰Œçš„äº§å“
```

### 1.2 å·¥å‚æ—è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™


**ğŸ¯ å•ä¸€èŒè´£åŸåˆ™**
```
æ¯ä¸ªå…·ä½“å·¥å‚åªè´Ÿè´£ä¸€ä¸ªäº§å“æ—ï¼š

âœ… æ­£ç¡®åšæ³•ï¼š
WindowsUIFactory    â†’ åªç”Ÿäº§Windowsé£æ ¼çš„UIç»„ä»¶
MacUIFactory        â†’ åªç”Ÿäº§Macé£æ ¼çš„UIç»„ä»¶

âŒ é”™è¯¯åšæ³•ï¼š
MixedUIFactory      â†’ æ—¢ç”Ÿäº§Windowsåˆç”Ÿäº§Macç»„ä»¶ï¼ˆèŒè´£æ··ä¹±ï¼‰
```

**ğŸ”’ å¼€é—­åŸåˆ™**
- **å¯¹æ‰©å±•å¼€æ”¾**ï¼šå¯ä»¥è½»æ¾æ·»åŠ æ–°çš„äº§å“æ—ï¼ˆæ¯”å¦‚Linux UIæ—ï¼‰
- **å¯¹ä¿®æ”¹å°é—­**ï¼šæ·»åŠ æ–°æ—æ—¶ä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç 

**âš–ï¸ ä¾èµ–å€’ç½®åŸåˆ™**
```
å®¢æˆ·ç«¯ä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°ï¼š

å®¢æˆ·ç«¯ä»£ç  â†’ ä¾èµ– â†’ æŠ½è±¡å·¥å‚æ¥å£
                â†‘
            å…·ä½“å·¥å‚å®ç°

è¿™æ ·å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å…·ä½“ç”¨çš„æ˜¯å“ªä¸ªå·¥å‚
```

### 1.3 å·¥å‚æ—çš„å±‚æ¬¡ç»“æ„


```
æŠ½è±¡å·¥å‚æ¥å£ (UIFactory)
â”œâ”€â”€ æŠ½è±¡æ–¹æ³•: createButton()
â”œâ”€â”€ æŠ½è±¡æ–¹æ³•: createTextField()
â””â”€â”€ æŠ½è±¡æ–¹æ³•: createCheckbox()
    â”‚
    â”œâ”€â”€ Windowså·¥å‚ (WindowsUIFactory)
    â”‚   â”œâ”€â”€ createButton() â†’ WindowsButton
    â”‚   â”œâ”€â”€ createTextField() â†’ WindowsTextField
    â”‚   â””â”€â”€ createCheckbox() â†’ WindowsCheckbox
    â”‚
    â””â”€â”€ Macå·¥å‚ (MacUIFactory)
        â”œâ”€â”€ createButton() â†’ MacButton
        â”œâ”€â”€ createTextField() â†’ MacTextField
        â””â”€â”€ createCheckbox() â†’ MacCheckbox
```

**ğŸ’¡ è®¾è®¡è¦ç‚¹**ï¼š
- æ¯ä¸ªå·¥å‚æ—éƒ½å®ç°ç›¸åŒçš„æŠ½è±¡æ¥å£
- æ¯ä¸ªå·¥å‚æ—å†…éƒ¨çš„äº§å“é£æ ¼ä¿æŒä¸€è‡´
- å·¥å‚æ—ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°

---

## 2. ğŸ”§ äº§å“æ—æ‰©å±•æœºåˆ¶


### 2.1 äº§å“æ—æ‰©å±•çš„æŒ‘æˆ˜


**ç°å®åœºæ™¯**ï¼šå‡è®¾ä½ çš„UIç³»ç»ŸåŸæœ¬åªæœ‰æŒ‰é’®å’Œæ–‡æœ¬æ¡†ï¼Œç°åœ¨è¦åŠ å…¥ä¸‹æ‹‰èœå•ç»„ä»¶ã€‚è¿™å°±æ˜¯å…¸å‹çš„äº§å“æ—æ‰©å±•ã€‚

**ğŸš¨ ä¼ ç»Ÿåšæ³•çš„é—®é¢˜**ï¼š
```
å¦‚æœç›´æ¥ä¿®æ”¹æŠ½è±¡å·¥å‚æ¥å£ï¼š

interface UIFactory {
    Button createButton();
    TextField createTextField();
    // æ–°å¢æ–¹æ³• - è¿™ä¼šç ´åç°æœ‰ä»£ç ï¼
    Dropdown createDropdown();  âŒ
}

é—®é¢˜ï¼šæ‰€æœ‰å·²å­˜åœ¨çš„å…·ä½“å·¥å‚éƒ½å¿…é¡»å®ç°æ–°æ–¹æ³•ï¼Œè¿åäº†å¼€é—­åŸåˆ™
```

### 2.2 æ¸è¿›å¼æ‰©å±•ç­–ç•¥


**ğŸ¯ ç­–ç•¥ä¸€ï¼šæ¥å£ç»§æ‰¿æ‰©å±•**

```java
// åŸå§‹å·¥å‚æ¥å£ä¿æŒä¸å˜
interface UIFactory {
    Button createButton();
    TextField createTextField();
}

// æ‰©å±•æ¥å£ï¼Œç»§æ‰¿åŸæ¥å£
interface ExtendedUIFactory extends UIFactory {
    Dropdown createDropdown();
    DatePicker createDatePicker();
}

// æ–°å·¥å‚å®ç°æ‰©å±•æ¥å£
class ModernWindowsUIFactory implements ExtendedUIFactory {
    // å®ç°æ‰€æœ‰æ–¹æ³•...
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… åŸæœ‰ä»£ç å®Œå…¨ä¸å—å½±å“
- âœ… æ–°åŠŸèƒ½é€šè¿‡ç»§æ‰¿ä¼˜é›…æ·»åŠ 
- âœ… å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä½¿ç”¨åŸºç¡€ç‰ˆæˆ–æ‰©å±•ç‰ˆ

**ğŸ¯ ç­–ç•¥äºŒï¼šç»„åˆå¼æ‰©å±•**

```java
// å°†æ‰©å±•åŠŸèƒ½å•ç‹¬æŠ½å–
interface AdvancedUIFactory {
    Dropdown createDropdown();
    DatePicker createDatePicker();
}

// å¤åˆå·¥å‚ï¼Œç»„åˆå¤šä¸ªå·¥å‚
class CompositeUIFactory {
    private UIFactory basicFactory;
    private AdvancedUIFactory advancedFactory;
    
    // æä¾›ç»Ÿä¸€çš„è®¿é—®æ¥å£
    public Button createButton() {
        return basicFactory.createButton();
    }
    
    public Dropdown createDropdown() {
        return advancedFactory.createDropdown();
    }
}
```

### 2.3 ç‰ˆæœ¬åŒ–ç®¡ç†æ‰©å±•


**ğŸ’¼ å®é™…é¡¹ç›®ä¸­çš„åšæ³•**ï¼š

| ç‰ˆæœ¬ | **æ”¯æŒç»„ä»¶** | **é€‚ç”¨åœºæ™¯** |
|------|-------------|-------------|
| `UIFactory 1.0` | `Button, TextField` | `åŸºç¡€é¡¹ç›®` |
| `UIFactory 2.0` | `+ Dropdown, Checkbox` | `æ ‡å‡†é¡¹ç›®` |
| `UIFactory 3.0` | `+ DatePicker, Chart` | `ä¼ä¸šé¡¹ç›®` |

```java
// ç‰ˆæœ¬æ£€æµ‹æœºåˆ¶
class FactoryCapabilities {
    public static boolean supportsDropdown(UIFactory factory) {
        return factory instanceof ExtendedUIFactory;
    }
    
    public static boolean supportsDatePicker(UIFactory factory) {
        return factory instanceof AdvancedUIFactory;
    }
}

// å®¢æˆ·ç«¯å®‰å…¨ä½¿ç”¨
if (FactoryCapabilities.supportsDropdown(factory)) {
    Dropdown dropdown = ((ExtendedUIFactory) factory).createDropdown();
}
```

---

## 3. âš™ï¸ é…ç½®é©±åŠ¨å·¥å‚


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦é…ç½®é©±åŠ¨


**ç°å®é—®é¢˜**ï¼šå‡è®¾ä½ å¼€å‘çš„è½¯ä»¶è¦åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼Œæ¯æ¬¡éƒ¨ç½²éƒ½è¦ä¿®æ”¹ä»£ç æ¥é€‰æ‹©å¯¹åº”çš„UIå·¥å‚ï¼Ÿè¿™æ˜¾ç„¶ä¸ç°å®ã€‚

**è§£å†³æ€è·¯**ï¼šè®©ç¨‹åºæ ¹æ®é…ç½®æ–‡ä»¶è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å·¥å‚ï¼Œå°±åƒæ‰‹æœºä¼šæ ¹æ®ä½ çš„è¯­è¨€è®¾ç½®è‡ªåŠ¨åˆ‡æ¢ç•Œé¢è¯­è¨€ä¸€æ ·ã€‚

### 3.2 é…ç½®æ–‡ä»¶è®¾è®¡


**ğŸ“„ propertiesé…ç½®æ–¹å¼**ï¼š
```properties
# ui-config.properties
ui.factory.type=windows
ui.theme=dark
ui.language=zh_CN

# å·¥å‚ç±»æ˜ å°„
factory.windows=com.example.WindowsUIFactory
factory.mac=com.example.MacUIFactory
factory.linux=com.example.LinuxUIFactory
```

**ğŸ“„ JSONé…ç½®æ–¹å¼**ï¼š
```json
{
  "uiConfig": {
    "factoryType": "windows",
    "theme": "dark",
    "language": "zh_CN",
    "factories": {
      "windows": "com.example.WindowsUIFactory",
      "mac": "com.example.MacUIFactory",
      "linux": "com.example.LinuxUIFactory"
    }
  }
}
```

### 3.3 é…ç½®é©±åŠ¨å·¥å‚å®ç°


```java
public class ConfigDrivenFactoryManager {
    private static final String CONFIG_FILE = "ui-config.properties";
    private Properties config;
    private Map<String, UIFactory> factoryCache;
    
    public ConfigDrivenFactoryManager() {
        loadConfiguration();
        this.factoryCache = new HashMap<>();
    }
    
    // ğŸ”§ æ ¹æ®é…ç½®åˆ›å»ºå·¥å‚
    public UIFactory createFactory() {
        String factoryType = config.getProperty("ui.factory.type", "windows");
        
        // ç¼“å­˜æœºåˆ¶ï¼šé¿å…é‡å¤åˆ›å»º
        if (factoryCache.containsKey(factoryType)) {
            return factoryCache.get(factoryType);
        }
        
        UIFactory factory = createFactoryByType(factoryType);
        factoryCache.put(factoryType, factory);
        return factory;
    }
    
    // ğŸ­ å…·ä½“çš„å·¥å‚åˆ›å»ºé€»è¾‘
    private UIFactory createFactoryByType(String type) {
        String className = config.getProperty("factory." + type);
        try {
            Class<?> factoryClass = Class.forName(className);
            return (UIFactory) factoryClass.newInstance();
        } catch (Exception e) {
            // é™çº§ç­–ç•¥ï¼šè¿”å›é»˜è®¤å·¥å‚
            System.out.println("åˆ›å»ºå·¥å‚å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤Windowså·¥å‚");
            return new WindowsUIFactory();
        }
    }
}
```

**ğŸ’¡ é…ç½®é©±åŠ¨çš„ä¼˜åŠ¿**ï¼š
- **ğŸ”„ è¿è¡Œæ—¶åˆ‡æ¢**ï¼šæ— éœ€é‡æ–°ç¼–è¯‘å°±èƒ½æ”¹å˜å·¥å‚ç±»å‹
- **ğŸŒ ç¯å¢ƒé€‚é…**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
- **ğŸ›¡ï¸ é™çº§ä¿æŠ¤**ï¼šé…ç½®é”™è¯¯æ—¶æœ‰é»˜è®¤æ–¹æ¡ˆ

---

## 4. ğŸ¯ å·¥å‚é€‰æ‹©ç­–ç•¥


### 4.1 ç­–ç•¥æ¨¡å¼ä¸å·¥å‚é€‰æ‹©


**æ ¸å¿ƒæ€æƒ³**ï¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼ˆæ“ä½œç³»ç»Ÿã€ç”¨æˆ·åå¥½ã€æ€§èƒ½è¦æ±‚ç­‰ï¼‰æ™ºèƒ½é€‰æ‹©æœ€åˆé€‚çš„å·¥å‚ã€‚

```
å·¥å‚é€‰æ‹©å†³ç­–æ ‘ï¼š

è¿è¡Œç¯å¢ƒæ£€æµ‹
â”œâ”€â”€ Windowsç³»ç»Ÿï¼Ÿ â†’ WindowsUIFactory
â”œâ”€â”€ Macç³»ç»Ÿï¼Ÿ    â†’ MacUIFactory  
â”œâ”€â”€ Linuxç³»ç»Ÿï¼Ÿ  â†’ LinuxUIFactory
â””â”€â”€ ç§»åŠ¨è®¾å¤‡ï¼Ÿ   â†’ MobileUIFactory
```

### 4.2 ç¯å¢ƒæ„ŸçŸ¥çš„å·¥å‚é€‰æ‹©å™¨


```java
public class SmartFactorySelector {
    
    // ğŸ” ç¯å¢ƒæ£€æµ‹ä¸å·¥å‚é€‰æ‹©
    public UIFactory selectOptimalFactory() {
        EnvironmentInfo env = detectEnvironment();
        
        // ç­–ç•¥é“¾ï¼šæŒ‰ä¼˜å…ˆçº§ä¾æ¬¡æ£€æŸ¥
        for (FactorySelectionStrategy strategy : getStrategies()) {
            if (strategy.canHandle(env)) {
                return strategy.createFactory(env);
            }
        }
        
        // é»˜è®¤ç­–ç•¥
        return new DefaultUIFactory();
    }
    
    // ğŸŒ ç¯å¢ƒä¿¡æ¯æ”¶é›†
    private EnvironmentInfo detectEnvironment() {
        return EnvironmentInfo.builder()
            .operatingSystem(System.getProperty("os.name"))
            .javaVersion(System.getProperty("java.version"))
            .screenResolution(getScreenResolution())
            .touchSupport(hasTouchSupport())
            .build();
    }
}
```

### 4.3 å¤šç»´åº¦é€‰æ‹©ç­–ç•¥


**ğŸ“Š é€‰æ‹©çŸ©é˜µ**ï¼š

| **ç³»ç»Ÿ** | **åˆ†è¾¨ç‡** | **è§¦å±** | **æ¨èå·¥å‚** |
|---------|-----------|---------|-------------|
| `Windows` | `é«˜åˆ†è¾¨ç‡` | `å¦` | `WindowsHDUIFactory` |
| `Windows` | `æ ‡å‡†` | `æ˜¯` | `WindowsTouchUIFactory` |
| `Mac` | `Retina` | `å¦` | `MacRetinaUIFactory` |
| `ç§»åŠ¨è®¾å¤‡` | `ä»»æ„` | `æ˜¯` | `MobileUIFactory` |

```java
// ğŸ¯ å¤šç»´åº¦é€‰æ‹©ç­–ç•¥å®ç°
public class MultiDimensionFactorySelector {
    
    public UIFactory selectFactory(EnvironmentInfo env) {
        // ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆ
        if (env.isMobile()) {
            return new MobileUIFactory();
        }
        
        // æ¡Œé¢ç³»ç»ŸæŒ‰åˆ†è¾¨ç‡å’Œè§¦å±æ”¯æŒé€‰æ‹©
        if (env.isWindows()) {
            if (env.hasHighResolution() && !env.hasTouch()) {
                return new WindowsHDUIFactory();
            } else if (env.hasTouch()) {
                return new WindowsTouchUIFactory();
            }
            return new StandardWindowsUIFactory();
        }
        
        // Macç³»ç»Ÿå¤„ç†
        if (env.isMac()) {
            return env.hasRetinaDisplay() 
                ? new MacRetinaUIFactory() 
                : new StandardMacUIFactory();
        }
        
        // é»˜è®¤é€‰æ‹©
        return new CrossPlatformUIFactory();
    }
}
```

**ğŸ”„ åŠ¨æ€ç­–ç•¥æ›´æ–°**ï¼š
```java
// æ”¯æŒè¿è¡Œæ—¶ç­–ç•¥è°ƒæ•´
public class AdaptiveFactorySelector {
    private List<SelectionRule> rules = new ArrayList<>();
    
    // ğŸ“ æ·»åŠ æ–°çš„é€‰æ‹©è§„åˆ™
    public void addRule(SelectionRule rule) {
        rules.add(rule);
        // æŒ‰ä¼˜å…ˆçº§æ’åº
        rules.sort(Comparator.comparing(SelectionRule::getPriority).reversed());
    }
    
    // ğŸ¯ åº”ç”¨è§„åˆ™é€‰æ‹©å·¥å‚
    public UIFactory selectFactory(EnvironmentInfo env) {
        for (SelectionRule rule : rules) {
            if (rule.matches(env)) {
                return rule.createFactory();
            }
        }
        return getDefaultFactory();
    }
}
```

---

## 5. ğŸ’‰ ä¾èµ–æ³¨å…¥é›†æˆ


### 5.1 ä¾èµ–æ³¨å…¥ä¸å·¥å‚æ¨¡å¼çš„å…³ç³»


**é€šä¿—ç†è§£**ï¼šä¾èµ–æ³¨å…¥å°±åƒé¤å…çš„"é…èœæœåŠ¡"ã€‚ä½ ç‚¹äº†ä¸€é“ä¸»èœï¼ŒæœåŠ¡å‘˜ä¼šè‡ªåŠ¨ç»™ä½ é…ä¸Šåˆé€‚çš„é¤å…·ã€è°ƒæ–™å’Œé…èœï¼Œä½ ä¸éœ€è¦è‡ªå·±å»æ‰¾ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆè‡ªå·±æ‰¾é¤å…·ï¼‰ï¼š
å®¢æˆ·ç«¯ä»£ç  â†’ æ‰‹åŠ¨åˆ›å»ºå·¥å‚ â†’ æ‰‹åŠ¨åˆ›å»ºäº§å“

ä¾èµ–æ³¨å…¥æ–¹å¼ï¼ˆæœåŠ¡å‘˜é…èœï¼‰ï¼š
å®¢æˆ·ç«¯ä»£ç  â†’ å£°æ˜éœ€è¦ä»€ä¹ˆ â†’ å®¹å™¨è‡ªåŠ¨æä¾›
```

### 5.2 Springæ¡†æ¶é›†æˆç¤ºä¾‹


**ğŸŒ± åŸºäºæ³¨è§£çš„å·¥å‚æ³¨å…¥**ï¼š

```java
@Configuration
public class FactoryConfiguration {
    
    // ğŸ­ æ ¹æ®é…ç½®å†³å®šä½¿ç”¨å“ªä¸ªå·¥å‚
    @Bean
    @Primary
    public UIFactory primaryUIFactory(@Value("${ui.factory.type:windows}") String type) {
        switch (type.toLowerCase()) {
            case "windows": return new WindowsUIFactory();
            case "mac": return new MacUIFactory();
            case "linux": return new LinuxUIFactory();
            default: return new DefaultUIFactory();
        }
    }
    
    // ğŸ¯ ä¸ºä¸åŒåœºæ™¯æä¾›ç‰¹å®šå·¥å‚
    @Bean
    @Qualifier("mobile")
    public UIFactory mobileUIFactory() {
        return new MobileUIFactory();
    }
    
    @Bean
    @Qualifier("desktop")
    public UIFactory desktopUIFactory() {
        return new DesktopUIFactory();
    }
}
```

**ğŸ¯ å®¢æˆ·ç«¯ä½¿ç”¨**ï¼š
```java
@Component
public class UIManager {
    
    // è‡ªåŠ¨æ³¨å…¥ä¸»å·¥å‚
    @Autowired
    private UIFactory uiFactory;
    
    // æ³¨å…¥ç‰¹å®šåœºæ™¯çš„å·¥å‚
    @Autowired
    @Qualifier("mobile")
    private UIFactory mobileFactory;
    
    public void createUserInterface() {
        // ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå·¥å‚
        Button button = uiFactory.createButton();
        TextField field = uiFactory.createTextField();
        
        // ä½¿ç”¨ç‰¹å®šå·¥å‚
        if (isMobileEnvironment()) {
            Button mobileButton = mobileFactory.createButton();
        }
    }
}
```

### 5.3 å·¥å‚Beanæ¨¡å¼


**ğŸ’¡ é«˜çº§æŠ€å·§**ï¼šè®©Springå®¹å™¨ç®¡ç†å·¥å‚çš„åˆ›å»ºè¿‡ç¨‹

```java
@Component
public class UIFactoryBean implements FactoryBean<UIFactory> {
    
    @Value("${ui.factory.type}")
    private String factoryType;
    
    @Value("${ui.theme:default}")
    private String theme;
    
    // ğŸ­ Springè°ƒç”¨æ­¤æ–¹æ³•è·å–å·¥å‚å®ä¾‹
    @Override
    public UIFactory getObject() throws Exception {
        UIFactory factory = createBaseFactory();
        
        // ğŸ¨ åº”ç”¨ä¸»é¢˜é…ç½®
        if (factory instanceof ThemeableFactory) {
            ((ThemeableFactory) factory).setTheme(theme);
        }
        
        return factory;
    }
    
    @Override
    public Class<?> getObjectType() {
        return UIFactory.class;
    }
    
    @Override
    public boolean isSingleton() {
        return true;  // å·¥å‚é€šå¸¸æ˜¯å•ä¾‹çš„
    }
    
    private UIFactory createBaseFactory() {
        // å·¥å‚åˆ›å»ºé€»è¾‘...
    }
}
```

### 5.4 æ¡ä»¶åŒ–å·¥å‚åˆ›å»º


```java
// ğŸ”„ åªæœ‰åœ¨Windowsç¯å¢ƒä¸‹æ‰åˆ›å»ºWindowså·¥å‚
@Component
@ConditionalOnProperty(name = "os.name", havingValue = "Windows")
public class WindowsUIFactory implements UIFactory {
    // Windowsç‰¹å®šå®ç°...
}

// ğŸ åªæœ‰åœ¨Macç¯å¢ƒä¸‹æ‰åˆ›å»ºMacå·¥å‚
@Component
@ConditionalOnProperty(name = "os.name", havingValue = "Mac OS X")
public class MacUIFactory implements UIFactory {
    // Macç‰¹å®šå®ç°...
}

// ğŸ›¡ï¸ é»˜è®¤å·¥å‚ï¼Œå½“å…¶ä»–æ¡ä»¶éƒ½ä¸æ»¡è¶³æ—¶å¯ç”¨
@Component
@ConditionalOnMissingBean(UIFactory.class)
public class DefaultUIFactory implements UIFactory {
    // é»˜è®¤å®ç°...
}
```

**ğŸ¯ æ¡ä»¶åŒ–åˆ›å»ºçš„ä¼˜åŠ¿**ï¼š
- **ğŸ“¦ æŒ‰éœ€åŠ è½½**ï¼šåªåˆ›å»ºå½“å‰ç¯å¢ƒéœ€è¦çš„å·¥å‚
- **ğŸ”§ è‡ªåŠ¨é€‚é…**ï¼šæ ¹æ®è¿è¡Œç¯å¢ƒè‡ªåŠ¨é€‰æ‹©
- **ğŸ›¡ï¸ é™çº§ä¿æŠ¤**ï¼šç¡®ä¿æ€»æœ‰å¯ç”¨çš„å·¥å‚

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 è®¾è®¡åŸåˆ™å›é¡¾


```
ğŸ¯ å·¥å‚æ—è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ï¼š
â”œâ”€â”€ å•ä¸€èŒè´£ï¼šæ¯ä¸ªå·¥å‚æ—ä¸“æ³¨ä¸€ä¸ªäº§å“ç³»åˆ—
â”œâ”€â”€ å¼€é—­åŸåˆ™ï¼šæ˜“äºæ‰©å±•æ–°æ—ï¼Œä¸ä¿®æ”¹ç°æœ‰ä»£ç 
â”œâ”€â”€ ä¾èµ–å€’ç½®ï¼šå®¢æˆ·ç«¯ä¾èµ–æŠ½è±¡ï¼Œä¸ä¾èµ–å…·ä½“
â””â”€â”€ ä¸€è‡´æ€§ï¼šåŒæ—äº§å“ä¿æŒé£æ ¼ç»Ÿä¸€
```

### 6.2 å®ç°ç­–ç•¥é€‰æ‹©æŒ‡å—


| **åœºæ™¯** | **æ¨èç­–ç•¥** | **ä¼˜åŠ¿** |
|---------|-------------|---------|
| **äº§å“æ—éœ€è¦é¢‘ç¹æ‰©å±•** | `æ¥å£ç»§æ‰¿æ‰©å±•` | `å‘åå…¼å®¹ï¼Œæ¸è¿›å‡çº§` |
| **å¤šç¯å¢ƒéƒ¨ç½²** | `é…ç½®é©±åŠ¨å·¥å‚` | `æ— éœ€ä¿®æ”¹ä»£ç ï¼Œçµæ´»åˆ‡æ¢` |
| **å¤æ‚é€‰æ‹©é€»è¾‘** | `ç­–ç•¥æ¨¡å¼é€‰æ‹©å™¨` | `é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤` |
| **Springé¡¹ç›®** | `ä¾èµ–æ³¨å…¥é›†æˆ` | `è‡ªåŠ¨è£…é…ï¼Œè§£è€¦åˆ` |

### 6.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ”§ è®¾è®¡æ—¶è€ƒè™‘**ï¼š
- **æå‰è§„åˆ’**ï¼šé¢„ç•™æ‰©å±•ç‚¹ï¼Œé¿å…åæœŸå¤§è§„æ¨¡é‡æ„
- **æ¸è¿›æ¼”è¿›**ï¼šä»ç®€å•å¼€å§‹ï¼Œæ ¹æ®éœ€è¦é€æ­¥å¢åŠ å¤æ‚åº¦
- **æ–‡æ¡£å®Œå–„**ï¼šæ¸…æ¥šè¯´æ˜æ¯ä¸ªå·¥å‚æ—çš„é€‚ç”¨åœºæ™¯

**ğŸ’» ç¼–ç æ—¶æ³¨æ„**ï¼š
- **å¼‚å¸¸å¤„ç†**ï¼šå·¥å‚åˆ›å»ºå¤±è´¥æ—¶çš„é™çº§ç­–ç•¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤åˆ›å»º
- **çº¿ç¨‹å®‰å…¨**ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å·¥å‚å®ä¾‹ç®¡ç†

**ğŸ§ª æµ‹è¯•æ—¶å…³æ³¨**ï¼š
- **è¦†ç›–æ‰€æœ‰å·¥å‚æ—**ï¼šç¡®ä¿æ¯ä¸ªå®ç°éƒ½æ­£ç¡®
- **é…ç½®æµ‹è¯•**ï¼šéªŒè¯ä¸åŒé…ç½®ä¸‹çš„è¡Œä¸º
- **è¾¹ç•Œæ¡ä»¶**ï¼šå¼‚å¸¸è¾“å…¥å’Œç¯å¢ƒå˜åŒ–çš„å¤„ç†

### 6.4 è®°å¿†è¦ç‚¹


**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **å·¥å‚æ—** = ä¸€å¥—é£æ ¼ç»Ÿä¸€çš„äº§å“ç”Ÿäº§çº¿
- **é…ç½®é©±åŠ¨** = æ ¹æ®è®¾ç½®è‡ªåŠ¨é€‰æ‹©å·¥å‚
- **ç­–ç•¥é€‰æ‹©** = æ™ºèƒ½åŒ¹é…æœ€é€‚åˆçš„å·¥å‚
- **ä¾èµ–æ³¨å…¥** = è®©å®¹å™¨è‡ªåŠ¨æä¾›å·¥å‚å®ä¾‹

**ğŸ”„ å®ç°æµç¨‹**ï¼š
```
1. å®šä¹‰æŠ½è±¡å·¥å‚æ¥å£
2. åˆ›å»ºå…·ä½“å·¥å‚æ—å®ç°
3. è®¾è®¡å·¥å‚é€‰æ‹©ç­–ç•¥
4. é…ç½®é©±åŠ¨æˆ–ä¾èµ–æ³¨å…¥
5. å®¢æˆ·ç«¯é€æ˜ä½¿ç”¨
```

**ğŸ’¡ å…³é”®æ”¶ç›Š**ï¼š
- **ğŸ”§ æ˜“æ‰©å±•**ï¼šæ–°å¢äº§å“æ—ä¸å½±å“ç°æœ‰ä»£ç 
- **ğŸ¯ å¯é…ç½®**ï¼šè¿è¡Œæ—¶åˆ‡æ¢ä¸åŒå®ç°
- **ğŸ§ª å¯æµ‹è¯•**ï¼šæ¯ä¸ªå·¥å‚æ—ç‹¬ç«‹æµ‹è¯•
- **ğŸ›¡ï¸ å¯ç»´æŠ¤**ï¼šèŒè´£æ¸…æ™°ï¼Œä¿®æ”¹å½±å“èŒƒå›´å°