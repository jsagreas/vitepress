---
title: 2ã€.çŠ¶æ€æ¨¡å¼ç»“æ„åˆ†æ
---
## ğŸ“š ç›®å½•

1. [çŠ¶æ€æ¨¡å¼åŸºæœ¬æ¦‚å¿µ](#1-çŠ¶æ€æ¨¡å¼åŸºæœ¬æ¦‚å¿µ)
2. [ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€æ¨¡å¼](#2-ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€æ¨¡å¼)
3. [çŠ¶æ€æ¨¡å¼ç»“æ„åˆ†æ](#3-çŠ¶æ€æ¨¡å¼ç»“æ„åˆ†æ)
4. [çŠ¶æ€è½¬æ¢æœºåˆ¶è¯¦è§£](#4-çŠ¶æ€è½¬æ¢æœºåˆ¶è¯¦è§£)
5. [å®é™…åº”ç”¨åœºæ™¯](#5-å®é™…åº”ç”¨åœºæ™¯)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ çŠ¶æ€æ¨¡å¼åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯çŠ¶æ€æ¨¡å¼


> **ğŸ’¡ é€šä¿—ç†è§£**
> çŠ¶æ€æ¨¡å¼å°±åƒæ˜¯ä¸€ä¸ª**æ™ºèƒ½å¼€å…³**ï¼Œæ ¹æ®ä¸åŒçš„çŠ¶æ€æ¥æ‰§è¡Œä¸åŒçš„è¡Œä¸ºã€‚æƒ³è±¡ä¸€ä¸‹ä½ çš„æ‰‹æœºï¼šåœ¨é™éŸ³çŠ¶æ€ä¸‹æŒ‰éŸ³é‡é”®æ˜¯è°ƒèŠ‚éœ‡åŠ¨å¼ºåº¦ï¼Œåœ¨å“é“ƒçŠ¶æ€ä¸‹æŒ‰éŸ³é‡é”®æ˜¯è°ƒèŠ‚é“ƒå£°å¤§å° â€”â€” åŒæ ·çš„æ“ä½œï¼Œä¸åŒçš„çŠ¶æ€ï¼Œäº§ç”Ÿä¸åŒçš„ç»“æœã€‚

**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ï¼š
â€¢ å…è®¸å¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸º
â€¢ å¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å…¶ç±»
â€¢ å°†çŠ¶æ€ç›¸å…³çš„è¡Œä¸ºå°è£…åˆ°ç‹¬ç«‹çš„çŠ¶æ€ç±»ä¸­
```

**ğŸ“ ç”Ÿæ´»å®ä¾‹å¯¹æ¯”ï¼š**
```
ç”µæ¢¯çš„è¿è¡Œï¼š
æ™®é€šå†™æ³• â†’ ä¸€ä¸ªå¤§ç±»é‡Œé¢å†™æ»¡äº† if-else åˆ¤æ–­å½“å‰æ˜¯ä»€ä¹ˆçŠ¶æ€
çŠ¶æ€æ¨¡å¼ â†’ æ¯ç§çŠ¶æ€ï¼ˆåœæ­¢ã€ä¸Šå‡ã€ä¸‹é™ï¼‰éƒ½æ˜¯ç‹¬ç«‹çš„ç±»

å¥½å¤„ï¼šæ–°å¢çŠ¶æ€å¾ˆç®€å•ï¼Œä¸ç”¨æ”¹åŸæ¥çš„ä»£ç 
```

### 1.2 çŠ¶æ€æ¨¡å¼è§£å†³çš„æ ¸å¿ƒé—®é¢˜


**âš ï¸ ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹ï¼š**
- **if-else åœ°ç‹±**ï¼šä¸€ä¸ªæ–¹æ³•é‡Œå…¨æ˜¯çŠ¶æ€åˆ¤æ–­
- **èŒè´£æ··ä¹±**ï¼šä¸€ä¸ªç±»è¦å¤„ç†æ‰€æœ‰çŠ¶æ€çš„é€»è¾‘  
- **éš¾ä»¥æ‰©å±•**ï¼šæ–°å¢çŠ¶æ€è¦ä¿®æ”¹åŸæœ‰ä»£ç 
- **å®¹æ˜“å‡ºé”™**ï¼šçŠ¶æ€é€»è¾‘åˆ†æ•£ï¼Œéš¾ä»¥ç»´æŠ¤

**âœ… çŠ¶æ€æ¨¡å¼çš„ä¼˜åŠ¿ï¼š**
- **èŒè´£æ¸…æ™°**ï¼šæ¯ä¸ªçŠ¶æ€ç±»åªè´Ÿè´£è‡ªå·±çš„è¡Œä¸º
- **æ˜“äºæ‰©å±•**ï¼šæ–°å¢çŠ¶æ€åªéœ€æ–°å»ºç±»
- **æ¶ˆé™¤æ¡ä»¶åˆ¤æ–­**ï¼šä¸éœ€è¦å¤§é‡ if-else
- **çŠ¶æ€åˆ‡æ¢æ˜ç¡®**ï¼šçŠ¶æ€è½¬æ¢é€»è¾‘æ¸…æ™°

---

## 2. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€æ¨¡å¼


### 2.1 é—®é¢˜åœºæ™¯æ¼”ç¤º


è®©æˆ‘ä»¬çœ‹ä¸€ä¸ª**ç®€å•çš„åª’ä½“æ’­æ”¾å™¨**ä¾‹å­ï¼Œäº†è§£ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€æ¨¡å¼ï¼š

**âŒ ä¼ ç»Ÿæ–¹å¼ï¼ˆä¸ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼‰ï¼š**
```java
public class MediaPlayer {
    private String state = "STOPPED";  // å½“å‰çŠ¶æ€
    
    public void play() {
        if (state.equals("STOPPED")) {
            System.out.println("å¼€å§‹æ’­æ”¾");
            state = "PLAYING";
        } else if (state.equals("PLAYING")) {
            System.out.println("å·²åœ¨æ’­æ”¾ä¸­");
        } else if (state.equals("PAUSED")) {
            System.out.println("ç»§ç»­æ’­æ”¾");
            state = "PLAYING";
        }
    }
    
    public void pause() {
        if (state.equals("PLAYING")) {
            System.out.println("æš‚åœæ’­æ”¾");
            state = "PAUSED";
        } else {
            System.out.println("å½“å‰æ— æ³•æš‚åœ");
        }
    }
    
    // æ›´å¤šæ–¹æ³•...æ¯ä¸ªéƒ½è¦å†™ä¸€å † if-else
}
```

**ğŸ”¸ è¿™ç§å†™æ³•çš„é—®é¢˜ï¼š**
- æ¯ä¸ªæ–¹æ³•éƒ½è¦åˆ¤æ–­å½“å‰çŠ¶æ€
- æ–°å¢çŠ¶æ€éœ€è¦ä¿®æ”¹æ‰€æœ‰æ–¹æ³•
- çŠ¶æ€é€»è¾‘åˆ†æ•£ï¼Œéš¾ä»¥ç†è§£å’Œç»´æŠ¤
- å®¹æ˜“æ¼æ‰æŸäº›çŠ¶æ€çš„å¤„ç†

### 2.2 çŠ¶æ€æ¨¡å¼æ”¹è¿›æ–¹æ¡ˆ


**âœ… ä½¿ç”¨çŠ¶æ€æ¨¡å¼åï¼š**

> **ğŸ¯ æ ¸å¿ƒæ€æƒ³**
> æŠŠæ¯ç§çŠ¶æ€çš„è¡Œä¸ºå°è£…åˆ°ç‹¬ç«‹çš„ç±»ä¸­ï¼Œè®©å¯¹è±¡çš„è¡Œä¸ºéšç€çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ï¼Œå°±åƒå˜èº«ä¸€æ ·ï¼

**è®¾è®¡æ€è·¯ï¼š**
1. **æŠ½è±¡çŠ¶æ€**ï¼šå®šä¹‰çŠ¶æ€åº”è¯¥æœ‰å“ªäº›è¡Œä¸º
2. **å…·ä½“çŠ¶æ€**ï¼šæ¯ç§çŠ¶æ€å®ç°è‡ªå·±çš„è¡Œä¸º
3. **ä¸Šä¸‹æ–‡**ï¼šæŒæœ‰å½“å‰çŠ¶æ€ï¼ŒæŠŠæ“ä½œå§”æ‰˜ç»™çŠ¶æ€å¯¹è±¡

---

## 3. ğŸ—ï¸ çŠ¶æ€æ¨¡å¼ç»“æ„åˆ†æ


### 3.1 æ ¸å¿ƒç»„ä»¶è¯´æ˜


**çŠ¶æ€æ¨¡å¼åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š**

```
ç»„ä»¶å…³ç³»å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Context       â”‚â—†â”€â”€â”€â”€â†’â”‚ AbstractState   â”‚
â”‚  (ä¸Šä¸‹æ–‡ç±»)      â”‚      â”‚  (æŠ½è±¡çŠ¶æ€)     â”‚
â”‚                 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - currentState  â”‚              â–²
â”‚ + request()     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                â”‚ ConcreteStateAâ”‚ â”‚ConcreteStateBâ”‚
                â”‚ (å…·ä½“çŠ¶æ€A)   â”‚ â”‚ (å…·ä½“çŠ¶æ€B) â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æŠ½è±¡çŠ¶æ€æ¥å£è®¾è®¡


**ğŸ”¸ æŠ½è±¡çŠ¶æ€ï¼ˆStateï¼‰**
> **ä½œç”¨è¯´æ˜ï¼š** å®šä¹‰æ‰€æœ‰çŠ¶æ€éƒ½åº”è¯¥å®ç°çš„è¡Œä¸ºæ¥å£ï¼Œå°±åƒæ˜¯æ‰€æœ‰çŠ¶æ€çš„"åˆåŒ"

```java
// åª’ä½“æ’­æ”¾å™¨çŠ¶æ€æ¥å£
public interface PlayerState {
    void play(MediaPlayer player);    // æ’­æ”¾æ“ä½œ
    void pause(MediaPlayer player);   // æš‚åœæ“ä½œ
    void stop(MediaPlayer player);    // åœæ­¢æ“ä½œ
    String getStateName();            // è·å–çŠ¶æ€åç§°
}
```

**â­ è®¾è®¡è¦ç‚¹ï¼š**
- æ¯ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ–¹ä¾¿çŠ¶æ€åˆ‡æ¢
- æ–¹æ³•åè¦ä½“ç°**ç”¨æˆ·æ“ä½œ**ï¼Œä¸æ˜¯çŠ¶æ€å
- å¯ä»¥æ·»åŠ è·å–çŠ¶æ€ä¿¡æ¯çš„æ–¹æ³•

### 3.3 å…·ä½“çŠ¶æ€å®ç°


**ğŸ”¸ åœæ­¢çŠ¶æ€**
```java
public class StoppedState implements PlayerState {
    
    @Override
    public void play(MediaPlayer player) {
        System.out.println("å¼€å§‹æ’­æ”¾éŸ³ä¹");
        player.setState(new PlayingState());  // åˆ‡æ¢åˆ°æ’­æ”¾çŠ¶æ€
    }
    
    @Override
    public void pause(MediaPlayer player) {
        System.out.println("åœæ­¢çŠ¶æ€ä¸‹æ— æ³•æš‚åœ");
    }
    
    @Override
    public void stop(MediaPlayer player) {
        System.out.println("å·²ç»æ˜¯åœæ­¢çŠ¶æ€");
    }
    
    @Override
    public String getStateName() {
        return "å·²åœæ­¢";
    }
}
```

**ğŸ”¸ æ’­æ”¾çŠ¶æ€**
```java
public class PlayingState implements PlayerState {
    
    @Override
    public void play(MediaPlayer player) {
        System.out.println("æ­£åœ¨æ’­æ”¾ä¸­...");
    }
    
    @Override
    public void pause(MediaPlayer player) {
        System.out.println("æš‚åœæ’­æ”¾");
        player.setState(new PausedState());  // åˆ‡æ¢åˆ°æš‚åœçŠ¶æ€
    }
    
    @Override
    public void stop(MediaPlayer player) {
        System.out.println("åœæ­¢æ’­æ”¾");
        player.setState(new StoppedState()); // åˆ‡æ¢åˆ°åœæ­¢çŠ¶æ€
    }
    
    @Override
    public String getStateName() {
        return "æ’­æ”¾ä¸­";
    }
}
```

### 3.4 ä¸Šä¸‹æ–‡ç±»è®¾è®¡


**ğŸ”¸ ä¸Šä¸‹æ–‡ç±»ï¼ˆContextï¼‰**
> **ä½œç”¨è¯´æ˜ï¼š** å°±åƒæ˜¯ä¸€ä¸ª"ä»£ç†äºº"ï¼Œç”¨æˆ·çš„æ‰€æœ‰æ“ä½œéƒ½é€šè¿‡å®ƒè½¬å‘ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡

```java
public class MediaPlayer {
    private PlayerState currentState;  // å½“å‰çŠ¶æ€
    
    public MediaPlayer() {
        // åˆå§‹çŠ¶æ€è®¾ä¸ºåœæ­¢
        currentState = new StoppedState();
    }
    
    // ç”¨æˆ·æ“ä½œæ–¹æ³• - ç›´æ¥å§”æ‰˜ç»™å½“å‰çŠ¶æ€
    public void play() {
        currentState.play(this);
    }
    
    public void pause() {
        currentState.pause(this);
    }
    
    public void stop() {
        currentState.stop(this);
    }
    
    // çŠ¶æ€ç®¡ç†æ–¹æ³•
    public void setState(PlayerState state) {
        this.currentState = state;
        System.out.println("çŠ¶æ€åˆ‡æ¢ä¸ºï¼š" + state.getStateName());
    }
    
    public String getCurrentState() {
        return currentState.getStateName();
    }
}
```

**ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹ï¼š**
```java
public class Demo {
    public static void main(String[] args) {
        MediaPlayer player = new MediaPlayer();
        
        System.out.println("å½“å‰çŠ¶æ€ï¼š" + player.getCurrentState());
        
        player.play();   // åœæ­¢ â†’ æ’­æ”¾
        player.pause();  // æ’­æ”¾ â†’ æš‚åœ  
        player.play();   // æš‚åœ â†’ æ’­æ”¾
        player.stop();   // æ’­æ”¾ â†’ åœæ­¢
    }
}
```

---

## 4. ğŸ”„ çŠ¶æ€è½¬æ¢æœºåˆ¶è¯¦è§£


### 4.1 çŠ¶æ€è½¬æ¢çš„ä¸¤ç§æ–¹å¼


**ğŸ”¸ æ–¹å¼ä¸€ï¼šçŠ¶æ€è‡ªå·±ç®¡ç†è½¬æ¢ï¼ˆæ¨èï¼‰**

> **ğŸ’¡ ç†è§£è¦ç‚¹**
> æ¯ä¸ªçŠ¶æ€æœ€æ¸…æ¥šè‡ªå·±åœ¨ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥åˆ‡æ¢åˆ°å“ªä¸ªçŠ¶æ€ï¼Œå°±åƒä½ è‡ªå·±æœ€çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥èµ·åºŠã€è¯¥ç¡è§‰ä¸€æ ·ã€‚

```java
// åœ¨å…·ä½“çŠ¶æ€ç±»ä¸­ç®¡ç†è½¬æ¢
public void play(MediaPlayer player) {
    if (canPlay()) {
        doPlay();
        player.setState(new PlayingState());  // çŠ¶æ€å†³å®šè½¬æ¢
    } else {
        showErrorMessage();
    }
}
```

**âœ… ä¼˜ç‚¹ï¼š** çŠ¶æ€è½¬æ¢é€»è¾‘é›†ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€ç±»èŒè´£æ¸…æ™°
**âŒ ç¼ºç‚¹ï¼š** çŠ¶æ€ç±»ä¹‹é—´æœ‰è€¦åˆï¼Œéœ€è¦çŸ¥é“å…¶ä»–çŠ¶æ€ç±»

**ğŸ”¸ æ–¹å¼äºŒï¼šä¸Šä¸‹æ–‡ç®¡ç†è½¬æ¢**

```java
// åœ¨ä¸Šä¸‹æ–‡ç±»ä¸­é›†ä¸­ç®¡ç†è½¬æ¢
public void play() {
    String result = currentState.play();
    
    // æ ¹æ®è¿”å›ç»“æœå†³å®šçŠ¶æ€è½¬æ¢
    if (result.equals("TO_PLAYING")) {
        setState(new PlayingState());
    }
}
```

**âœ… ä¼˜ç‚¹ï¼š** çŠ¶æ€ç±»ä¹‹é—´è§£è€¦ï¼Œè½¬æ¢é€»è¾‘é›†ä¸­
**âŒ ç¼ºç‚¹ï¼š** ä¸Šä¸‹æ–‡ç±»èŒè´£è¿‡é‡ï¼ŒçŠ¶æ€ç±»è¦è¿”å›è½¬æ¢ä¿¡æ¯

### 4.2 çŠ¶æ€è½¬æ¢å›¾è®¾è®¡


**ğŸ”¸ åª’ä½“æ’­æ”¾å™¨çŠ¶æ€è½¬æ¢å›¾ï¼š**
```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Stopped   â”‚ â—„â”€â”€â”€ åˆå§‹çŠ¶æ€
           â”‚   (åœæ­¢)    â”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ play()
                  â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Playing   â”‚
           â”‚   (æ’­æ”¾)    â”‚
           â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”˜
              â”‚         â”‚
       pause()â”‚         â”‚stop()
              â–¼         â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
           â”‚   Paused    â”‚ â”‚
           â”‚   (æš‚åœ)    â”‚ â”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
                  â”‚        â”‚
              play()       â”‚
                  â”‚        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 çŠ¶æ€ç®¡ç†ç­–ç•¥


**ğŸ”¸ çŠ¶æ€å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼š**

| ç­–ç•¥ | **è¯´æ˜** | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç¼ºç‚¹** |
|------|----------|-------------|------------|
| `å³æ—¶åˆ›å»º` | æ¯æ¬¡è½¬æ¢æ—¶ new æ–°å¯¹è±¡ | çŠ¶æ€å¯¹è±¡æœ‰çŠ¶æ€æ•°æ® | çµæ´»ä½†æœ‰åˆ›å»ºå¼€é”€ |
| `å•ä¾‹æ¨¡å¼` | æ¯ç§çŠ¶æ€åªæœ‰ä¸€ä¸ªå®ä¾‹ | çŠ¶æ€å¯¹è±¡æ— çŠ¶æ€æ•°æ® | èŠ‚çœå†…å­˜ï¼Œæ€§èƒ½å¥½ |
| `é¢„åˆ›å»º` | å¯åŠ¨æ—¶åˆ›å»ºæ‰€æœ‰çŠ¶æ€ | çŠ¶æ€ç§ç±»ä¸å¤š | å¯åŠ¨æ…¢ï¼Œä½†è¿è¡Œå¿« |

**æ¨èçš„å•ä¾‹çŠ¶æ€å®ç°ï¼š**
```java
public class PlayingState implements PlayerState {
    private static PlayingState instance;
    
    private PlayingState() {}  // ç§æœ‰æ„é€ 
    
    public static PlayingState getInstance() {
        if (instance == null) {
            instance = new PlayingState();
        }
        return instance;
    }
    
    // å…¶ä»–æ–¹æ³•...
}
```

---

## 5. ğŸ¯ å®é™…åº”ç”¨åœºæ™¯


### 5.1 ç”µå•†è®¢å•çŠ¶æ€ç®¡ç†


> **ğŸ›’ ä¸šåŠ¡åœºæ™¯**
> ç”µå•†ç½‘ç«™çš„è®¢å•ä¼šç»å†ï¼šå¾…æ”¯ä»˜ â†’ å·²æ”¯ä»˜ â†’ å·²å‘è´§ â†’ å·²æ”¶è´§ â†’ å·²å®Œæˆç­‰å¤šä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€ä¸‹ç”¨æˆ·èƒ½è¿›è¡Œçš„æ“ä½œå®Œå…¨ä¸åŒã€‚

**ğŸ”¸ è®¢å•çŠ¶æ€æ¥å£ï¼š**
```java
public interface OrderState {
    void pay(Order order);        // æ”¯ä»˜
    void ship(Order order);       // å‘è´§  
    void receive(Order order);    // ç¡®è®¤æ”¶è´§
    void cancel(Order order);     // å–æ¶ˆè®¢å•
    void refund(Order order);     // ç”³è¯·é€€æ¬¾
}
```

**ğŸ”¸ å¾…æ”¯ä»˜çŠ¶æ€ï¼š**
```java
public class PendingPaymentState implements OrderState {
    
    @Override
    public void pay(Order order) {
        System.out.println("æ”¯ä»˜æˆåŠŸï¼Œè®¢å•è¿›å…¥å¾…å‘è´§çŠ¶æ€");
        order.setState(new PaidState());
    }
    
    @Override
    public void cancel(Order order) {
        System.out.println("è®¢å•å·²å–æ¶ˆ");
        order.setState(new CancelledState());
    }
    
    @Override
    public void ship(Order order) {
        System.out.println("è®¢å•æœªæ”¯ä»˜ï¼Œæ— æ³•å‘è´§");
    }
    
    // å…¶ä»–æ“ä½œéƒ½æ˜¯æ— æ•ˆçš„...
}
```

**ğŸ“Š çŠ¶æ€è½¬æ¢å…³ç³»ï¼š**
```
å¾…æ”¯ä»˜ â”€â”€pay()â”€â”€â–º å·²æ”¯ä»˜ â”€â”€ship()â”€â”€â–º å·²å‘è´§ â”€â”€receive()â”€â”€â–º å·²å®Œæˆ
   â”‚                                      â”‚
   â”‚                                      â”‚
 cancel()                            refund()
   â”‚                                      â”‚
   â–¼                                      â–¼
 å·²å–æ¶ˆ                                 é€€æ¬¾ä¸­
```

### 5.2 æ¸¸æˆè§’è‰²çŠ¶æ€ç³»ç»Ÿ


> **ğŸ® æ¸¸æˆåœºæ™¯**
> RPGæ¸¸æˆä¸­çš„è§’è‰²ä¼šæœ‰æ­£å¸¸ã€ä¸­æ¯’ã€çœ©æ™•ã€æ— æ•Œç­‰çŠ¶æ€ï¼Œæ¯ç§çŠ¶æ€ä¸‹è§’è‰²çš„è¡Œä¸ºå’Œèƒ½åŠ›éƒ½ä¸åŒã€‚

**ğŸ”¸ è§’è‰²çŠ¶æ€ç³»ç»Ÿï¼š**
```java
// è§’è‰²çŠ¶æ€æ¥å£
public interface CharacterState {
    void attack(GameCharacter character);
    void move(GameCharacter character);
    void useSkill(GameCharacter character);
    void takeDamage(GameCharacter character, int damage);
}

// æ­£å¸¸çŠ¶æ€
public class NormalState implements CharacterState {
    @Override
    public void attack(GameCharacter character) {
        System.out.println("å‘åŠ¨æ”»å‡»ï¼Œé€ æˆ " + character.getAttackPower() + " ç‚¹ä¼¤å®³");
    }
    
    @Override
    public void takeDamage(GameCharacter character, int damage) {
        character.reduceHealth(damage);
        if (character.getHealth() <= 0) {
            character.setState(new DeadState());
        }
    }
}

// ä¸­æ¯’çŠ¶æ€
public class PoisonedState implements CharacterState {
    private int poisonTurns = 3;  // ä¸­æ¯’æŒç»­å›åˆ
    
    @Override
    public void attack(GameCharacter character) {
        System.out.println("ä¸­æ¯’çŠ¶æ€ä¸‹æ”»å‡»åŠ›å‡åŠ");
        System.out.println("é€ æˆ " + (character.getAttackPower() / 2) + " ç‚¹ä¼¤å®³");
        
        // ä¸­æ¯’æ‰£è¡€
        character.reduceHealth(10);
        poisonTurns--;
        
        if (poisonTurns <= 0) {
            System.out.println("ä¸­æ¯’çŠ¶æ€è§£é™¤");
            character.setState(new NormalState());
        }
    }
}
```

### 5.3 å·¥ä½œæµå¼•æ“


> **ğŸ“‹ åŠå…¬åœºæ™¯**
> å…¬å¸çš„è¯·å‡ç”³è¯·æµç¨‹ï¼šæäº¤ç”³è¯· â†’ éƒ¨é—¨ä¸»ç®¡å®¡æ‰¹ â†’ HRå®¡æ‰¹ â†’ å®Œæˆï¼Œæ¯ä¸ªç¯èŠ‚éƒ½æœ‰ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚

**ğŸ”¸ å·¥ä½œæµçŠ¶æ€ï¼š**
```java
public interface WorkflowState {
    void submit(LeaveRequest request);     // æäº¤
    void approve(LeaveRequest request);    // æ‰¹å‡†
    void reject(LeaveRequest request);     // æ‹’ç»
    void withdraw(LeaveRequest request);   // æ’¤å›
}
```

**ğŸ’¼ åº”ç”¨ä»·å€¼ï¼š**
- **ä¸šåŠ¡æ¸…æ™°**ï¼šæ¯ä¸ªæµç¨‹èŠ‚ç‚¹çš„é€»è¾‘ç‹¬ç«‹
- **æ˜“äºæ‰©å±•**ï¼šæ–°å¢å®¡æ‰¹ç¯èŠ‚å¾ˆç®€å•
- **çŠ¶æ€å¯è§†**ï¼šç”¨æˆ·èƒ½æ¸…æ¥šçŸ¥é“å½“å‰è¿›åº¦
- **æƒé™æ§åˆ¶**ï¼šä¸åŒçŠ¶æ€ä¸‹ä¸åŒè§’è‰²æœ‰ä¸åŒæ“ä½œæƒé™

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ çŠ¶æ€æ¨¡å¼æœ¬è´¨ï¼šç”¨å¯¹è±¡çš„ç»„åˆæ›¿ä»£æ¡ä»¶åˆ¤æ–­
ğŸ”¸ æ ¸å¿ƒç»„ä»¶ï¼šæŠ½è±¡çŠ¶æ€ã€å…·ä½“çŠ¶æ€ã€ä¸Šä¸‹æ–‡ç±»
ğŸ”¸ å…³é”®æœºåˆ¶ï¼šçŠ¶æ€å¯¹è±¡è´Ÿè´£è¡Œä¸ºï¼Œä¸Šä¸‹æ–‡è´Ÿè´£çŠ¶æ€åˆ‡æ¢
ğŸ”¸ ä¸»è¦ä¼˜åŠ¿ï¼šæ¶ˆé™¤if-elseï¼ŒèŒè´£æ¸…æ™°ï¼Œæ˜“æ‰©å±•
ğŸ”¸ é€‚ç”¨åœºæ™¯ï¼šå¯¹è±¡è¡Œä¸ºä¾èµ–äºçŠ¶æ€ï¼ŒçŠ¶æ€è½¬æ¢å¤æ‚
```

### 6.2 è®¾è®¡è¦ç‚¹å’Œæœ€ä½³å®è·µ


**ğŸ”¹ çŠ¶æ€æ¥å£è®¾è®¡åŸåˆ™ï¼š**
- æ–¹æ³•åä½“ç°**ç”¨æˆ·æ“ä½œ**ï¼Œä¸æ˜¯çŠ¶æ€å
- æ¯ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸Šä¸‹æ–‡å¯¹è±¡å‚æ•°
- åªå®šä¹‰å½“å‰ä¸šåŠ¡éœ€è¦çš„æ“ä½œæ–¹æ³•

**ğŸ”¹ çŠ¶æ€åˆ‡æ¢ç­–ç•¥ï¼š**
- **ç®€å•åœºæ™¯**ï¼šçŠ¶æ€è‡ªå·±ç®¡ç†è½¬æ¢ï¼ˆæ¨èï¼‰
- **å¤æ‚åœºæ™¯**ï¼šä¸Šä¸‹æ–‡é›†ä¸­ç®¡ç†è½¬æ¢
- **æ€§èƒ½è¦æ±‚é«˜**ï¼šä½¿ç”¨å•ä¾‹çŠ¶æ€å¯¹è±¡

**ğŸ”¹ å¸¸è§è®¾è®¡é™·é˜±ï¼š**
```
âŒ é¿å…çš„é—®é¢˜ï¼š
â€¢ çŠ¶æ€ç±»ä¸­å†™ if-else åˆ¤æ–­å…¶ä»–çŠ¶æ€
â€¢ åœ¨ä¸Šä¸‹æ–‡ç±»ä¸­æš´éœ²çŠ¶æ€åˆ‡æ¢çš„å…·ä½“é€»è¾‘  
â€¢ çŠ¶æ€å¯¹è±¡ä¿å­˜è¿‡å¤šçš„ä¸šåŠ¡æ•°æ®
â€¢ å¿˜è®°å¤„ç†æ— æ•ˆæ“ä½œçš„æƒ…å†µ

âœ… æ­£ç¡®çš„åšæ³•ï¼š
â€¢ æ¯ä¸ªçŠ¶æ€åªå…³å¿ƒè‡ªå·±çš„è¡Œä¸º
â€¢ çŠ¶æ€è½¬æ¢é€»è¾‘è¦æ¸…æ™°æ˜ç¡®
â€¢ æ— æ•ˆæ“ä½œè¦ç»™å‡ºå‹å¥½æç¤º
â€¢ è€ƒè™‘çŠ¶æ€å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
```

### 6.3 ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»


**ğŸ”— ç›¸å…³è®¾è®¡æ¨¡å¼å¯¹æ¯”ï¼š**

| æ¨¡å¼å¯¹æ¯” | **çŠ¶æ€æ¨¡å¼** | **ç­–ç•¥æ¨¡å¼** | **å‘½ä»¤æ¨¡å¼** |
|---------|-------------|-------------|-------------|
| **æ ¸å¿ƒç›®çš„** | `æ ¹æ®çŠ¶æ€æ”¹å˜è¡Œä¸º` | `æ ¹æ®ç­–ç•¥é€‰æ‹©ç®—æ³•` | `å°è£…è¯·æ±‚ä¸ºå¯¹è±¡` |
| **çŠ¶æ€å˜åŒ–** | `çŠ¶æ€ä¼šè‡ªåŠ¨åˆ‡æ¢` | `ç­–ç•¥ä¸»åŠ¨é€‰æ‹©` | `å‘½ä»¤ç‹¬ç«‹æ‰§è¡Œ` |
| **å…¸å‹åº”ç”¨** | `çŠ¶æ€æœºã€å·¥ä½œæµ` | `æ’åºç®—æ³•é€‰æ‹©` | `æ’¤é”€é‡åšåŠŸèƒ½` |

### 6.4 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼š**
- âœ… å¯¹è±¡çš„è¡Œä¸º**å¼ºä¾èµ–**äºå…¶çŠ¶æ€
- âœ… å­˜åœ¨å¤§é‡åŸºäºçŠ¶æ€çš„**æ¡ä»¶åˆ¤æ–­**
- âœ… çŠ¶æ€è½¬æ¢é€»è¾‘**æ¯”è¾ƒå¤æ‚**
- âœ… éœ€è¦åœ¨è¿è¡Œæ—¶**åŠ¨æ€æ”¹å˜**å¯¹è±¡è¡Œä¸º

**âš ï¸ ä»€ä¹ˆæ—¶å€™ä¸é€‚åˆï¼š**
- âŒ åªæœ‰å°‘é‡ç®€å•çŠ¶æ€ï¼ˆ2-3ä¸ªï¼‰
- âŒ çŠ¶æ€è½¬æ¢å¾ˆç®€å•ï¼ˆif-elseå°±å¤Ÿäº†ï¼‰
- âŒ çŠ¶æ€ä¹‹é—´**æ²¡æœ‰è¡Œä¸ºå·®å¼‚**
- âŒ æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯

### 6.5 å­¦ä¹ è®°å¿†è¦ç‚¹


> **ğŸ§  ä¸€å¥è¯æ€»ç»“**
> çŠ¶æ€æ¨¡å¼å°±æ˜¯æŠŠå¯¹è±¡çš„"å¤šé‡äººæ ¼"åˆ†åˆ«å°è£…ï¼Œè®©å¯¹è±¡èƒ½å¤Ÿ"çœ‹æƒ…å†µåŠäº‹"ï¼

**ğŸ”‘ è®°å¿†å£è¯€ï¼š**
```
çŠ¶æ€æ¨¡å¼å¾ˆç®€å•ï¼Œè¡Œä¸ºè·Ÿç€çŠ¶æ€è½¬
if-elseå¤ªå¤æ‚ï¼Œç‹¬ç«‹çŠ¶æ€æ¥åˆ†æ‹…  
ä¸Šä¸‹æ–‡åšä¸­ä»‹ï¼ŒçŠ¶æ€è‡ªå·±ç®¡è½¬æ¢
ç”µæ¢¯è®¢å•æ’­æ”¾å™¨ï¼Œå·¥ä½œæµç¨‹éƒ½é€‚ç”¨
```

**ğŸ“Œ å…³é”®ç†è§£ï¼š**
- **çŠ¶æ€ä¸æ˜¯æ•°æ®**ï¼šæ˜¯å¯¹è±¡åœ¨æŸä¸ªæ—¶æœŸçš„è¡Œä¸ºæ¨¡å¼
- **è½¬æ¢æœ‰è§„åˆ™**ï¼šä¸æ˜¯ä»»æ„çŠ¶æ€éƒ½èƒ½äº’ç›¸è½¬æ¢
- **è¡Œä¸ºæœ‰å·®å¼‚**ï¼šç›¸åŒæ“ä½œåœ¨ä¸åŒçŠ¶æ€ä¸‹è¡¨ç°ä¸åŒ
- **èŒè´£è¦åˆ†ç¦»**ï¼šçŠ¶æ€ç®¡ç†è¡Œä¸ºï¼Œä¸Šä¸‹æ–‡ç®¡ç†çŠ¶æ€

**ğŸ“ è¿›é˜¶å­¦ä¹ å»ºè®®ï¼š**
1. å…ˆä»ç®€å•çš„å¼€å…³ã€æ’­æ”¾å™¨å¼€å§‹ç»ƒä¹ 
2. ç†è§£çŠ¶æ€è½¬æ¢å›¾çš„è®¾è®¡æ–¹æ³•
3. å­¦ä¼šé€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†ç­–ç•¥
4. åœ¨å®é™…é¡¹ç›®ä¸­è¯†åˆ«çŠ¶æ€æ¨¡å¼çš„åº”ç”¨åœºæ™¯

**æ ¸å¿ƒè®°å¿†**ï¼šçŠ¶æ€æ¨¡å¼è®©å¯¹è±¡å˜å¾—"èªæ˜"ï¼Œèƒ½å¤Ÿæ ¹æ®è‡ªå·±çš„çŠ¶æ€é€‰æ‹©åˆé€‚çš„è¡Œä¸ºï¼Œå°±åƒäººåœ¨ä¸åŒå¿ƒæƒ…ä¸‹ä¼šæœ‰ä¸åŒçš„ååº”ä¸€æ ·è‡ªç„¶ï¼