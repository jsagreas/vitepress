---
title: 5ã€å‘½ä»¤æ¨¡å¼é«˜çº§åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [å‘½ä»¤æ¨¡å¼ä¸å¤‡å¿˜å½•æ¨¡å¼](#1-å‘½ä»¤æ¨¡å¼ä¸å¤‡å¿˜å½•æ¨¡å¼)
2. [å‘½ä»¤æ—¥å¿—è®°å½•æœºåˆ¶](#2-å‘½ä»¤æ—¥å¿—è®°å½•æœºåˆ¶)
3. [åˆ†å¸ƒå¼å‘½ä»¤æ‰§è¡Œ](#3-åˆ†å¸ƒå¼å‘½ä»¤æ‰§è¡Œ)
4. [å‘½ä»¤æ¨¡å¼ä¸å·¥ä½œæµå¼•æ“](#4-å‘½ä»¤æ¨¡å¼ä¸å·¥ä½œæµå¼•æ“)
5. [å¼‚æ­¥å‘½ä»¤å¤„ç†](#5-å¼‚æ­¥å‘½ä»¤å¤„ç†)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ å‘½ä»¤æ¨¡å¼ä¸å¤‡å¿˜å½•æ¨¡å¼


### 1.1 ä¸ºä»€ä¹ˆè¦ç»“åˆå¤‡å¿˜å½•æ¨¡å¼


**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šå•çº¯çš„å‘½ä»¤æ¨¡å¼åªèƒ½æ’¤é”€æ“ä½œï¼Œä½†å¦‚æœéœ€è¦æ¢å¤åˆ°ä»»æ„å†å²çŠ¶æ€æ€ä¹ˆåŠï¼Ÿ

```
æƒ³è±¡ä¸€ä¸ªæ–‡æ¡£ç¼–è¾‘å™¨ï¼š
ç”¨æˆ·æ“ä½œåºåˆ—ï¼šè¾“å…¥"Hello" â†’ åŠ ç²— â†’ è¾“å…¥"World" â†’ æ”¹é¢œè‰²
æ™®é€šæ’¤é”€ï¼šåªèƒ½ä¸€æ­¥æ­¥å¾€å›æ’¤
éœ€æ±‚å‡çº§ï¼šç”¨æˆ·æƒ³ç›´æ¥å›åˆ°"è¾“å…¥HelloååŠ ç²—"çš„çŠ¶æ€
```

**ğŸ’¡ è§£å†³æ€è·¯**ï¼šå‘½ä»¤æ¨¡å¼è´Ÿè´£æ“ä½œçš„å°è£…å’Œæ‰§è¡Œï¼Œå¤‡å¿˜å½•æ¨¡å¼è´Ÿè´£çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤

### 1.2 ç»„åˆæ¨¡å¼çš„è®¾è®¡æ¶æ„


```
ç³»ç»Ÿæ¶æ„å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    æ‰§è¡Œå‘½ä»¤    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è°ƒç”¨è€…     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  å‘½ä»¤å¯¹è±¡    â”‚
â”‚  (Invoker)  â”‚              â”‚  (Command)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚
       â”‚ ç®¡ç†å†å²                     â”‚ æ“ä½œå¯¹è±¡
       â†“                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ä¿å­˜çŠ¶æ€    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†å²ç®¡ç†å™¨   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  æ¥æ”¶è€…      â”‚
â”‚(History Mgr)â”‚              â”‚ (Receiver)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ å­˜å‚¨å¿«ç…§
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¤‡å¿˜å½•å¯¹è±¡   â”‚
â”‚ (Memento)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å®é™…åº”ç”¨ç¤ºä¾‹


**â­ åŸºç¡€çº§ï¼šæ–‡æœ¬ç¼–è¾‘å™¨çš„å®ç°**

```java
// æ–‡æ¡£çŠ¶æ€å¤‡å¿˜å½•
class DocumentMemento {
    private final String content;
    private final int cursorPosition;
    private final long timestamp;
    
    public DocumentMemento(String content, int cursor) {
        this.content = content;
        this.cursorPosition = cursor;
        this.timestamp = System.currentTimeMillis();
    }
    
    // åªæä¾›è·å–æ–¹æ³•ï¼Œä¿è¯ä¸å¯å˜æ€§
    public String getContent() { return content; }
    public int getCursorPosition() { return cursorPosition; }
}

// æ–‡æ¡£å¯¹è±¡ï¼ˆæ¥æ”¶è€…ï¼‰
class Document {
    private StringBuilder content = new StringBuilder();
    private int cursorPosition = 0;
    
    // åˆ›å»ºå½“å‰çŠ¶æ€çš„å¤‡å¿˜å½•
    public DocumentMemento createMemento() {
        return new DocumentMemento(content.toString(), cursorPosition);
    }
    
    // ä»å¤‡å¿˜å½•æ¢å¤çŠ¶æ€
    public void restoreFromMemento(DocumentMemento memento) {
        this.content = new StringBuilder(memento.getContent());
        this.cursorPosition = memento.getCursorPosition();
    }
    
    public void insertText(String text) {
        content.insert(cursorPosition, text);
        cursorPosition += text.length();
    }
}

// å¢å¼ºçš„å‘½ä»¤æ¥å£
interface UndoableCommand {
    void execute();
    void undo();
    DocumentMemento getBeforeState();  // æ‰§è¡Œå‰çš„çŠ¶æ€
    DocumentMemento getAfterState();   // æ‰§è¡Œåçš„çŠ¶æ€
}

// å…·ä½“å‘½ä»¤å®ç°
class InsertTextCommand implements UndoableCommand {
    private Document document;
    private String text;
    private DocumentMemento beforeState;
    private DocumentMemento afterState;
    
    public InsertTextCommand(Document doc, String text) {
        this.document = doc;
        this.text = text;
    }
    
    @Override
    public void execute() {
        beforeState = document.createMemento();  // ä¿å­˜æ‰§è¡Œå‰çŠ¶æ€
        document.insertText(text);
        afterState = document.createMemento();   // ä¿å­˜æ‰§è¡ŒåçŠ¶æ€
    }
    
    @Override
    public void undo() {
        if (beforeState != null) {
            document.restoreFromMemento(beforeState);
        }
    }
    
    // çŠ¶æ€è®¿é—®æ–¹æ³•
    public DocumentMemento getBeforeState() { return beforeState; }
    public DocumentMemento getAfterState() { return afterState; }
}
```

### 1.4 é«˜çº§å†å²ç®¡ç†å™¨


**â­â­ è¿›é˜¶çº§ï¼šæ”¯æŒä»»æ„æ—¶é—´ç‚¹æ¢å¤**

```java
class AdvancedHistoryManager {
    private List<UndoableCommand> commandHistory = new ArrayList<>();
    private Map<String, DocumentMemento> namedSnapshots = new HashMap<>();
    private int currentPosition = -1;
    
    // æ‰§è¡Œå‘½ä»¤å¹¶è®°å½•å†å²
    public void executeCommand(UndoableCommand command) {
        // å¦‚æœä¸åœ¨æœ€æ–°ä½ç½®ï¼Œæ¸…é™¤åç»­å†å²
        if (currentPosition < commandHistory.size() - 1) {
            commandHistory = commandHistory.subList(0, currentPosition + 1);
        }
        
        command.execute();
        commandHistory.add(command);
        currentPosition++;
    }
    
    // æ’¤é”€åˆ°æŒ‡å®šæ­¥æ•°å‰
    public void undoSteps(int steps) {
        for (int i = 0; i < steps && currentPosition >= 0; i++) {
            commandHistory.get(currentPosition).undo();
            currentPosition--;
        }
    }
    
    // åˆ›å»ºå‘½åå¿«ç…§
    public void createSnapshot(String name, Document document) {
        namedSnapshots.put(name, document.createMemento());
    }
    
    // æ¢å¤åˆ°å‘½åå¿«ç…§
    public void restoreToSnapshot(String name, Document document) {
        DocumentMemento snapshot = namedSnapshots.get(name);
        if (snapshot != null) {
            document.restoreFromMemento(snapshot);
        }
    }
}
```

---

## 2. ğŸ“‹ å‘½ä»¤æ—¥å¿—è®°å½•æœºåˆ¶


### 2.1 ä»€ä¹ˆæ˜¯å‘½ä»¤æ—¥å¿—


**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**ï¼šæŠŠæ¯ä¸ªæ‰§è¡Œçš„å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œå°±åƒé“¶è¡Œè®°å½•æ¯ç¬”äº¤æ˜“ä¸€æ ·

```
ä¸ºä»€ä¹ˆéœ€è¦å‘½ä»¤æ—¥å¿—ï¼Ÿ
åœºæ™¯1ï¼šç³»ç»Ÿå´©æºƒæ¢å¤
- ç¨‹åºçªç„¶å´©æºƒï¼Œé‡å¯åæ€ä¹ˆæ¢å¤åˆ°å´©æºƒå‰çš„çŠ¶æ€ï¼Ÿ

åœºæ™¯2ï¼šæ“ä½œå®¡è®¡
- è°åœ¨ä»€ä¹ˆæ—¶å€™åšäº†ä»€ä¹ˆæ“ä½œï¼Ÿ

åœºæ™¯3ï¼šæ•°æ®åŒæ­¥
- å¦‚ä½•æŠŠä¸€ä¸ªç³»ç»Ÿçš„æ“ä½œåŒæ­¥åˆ°å¦ä¸€ä¸ªç³»ç»Ÿï¼Ÿ

è§£å†³æ–¹æ¡ˆï¼šå‘½ä»¤æ—¥å¿— = æ“ä½œçš„"å½•åƒå›æ”¾"
```

### 2.2 å‘½ä»¤æ—¥å¿—çš„è®¾è®¡æ€è·¯


```
å‘½ä»¤æ—¥å¿—æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·æ“ä½œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ å°è£…æˆå‘½ä»¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    åŒæ—¶å†™å…¥    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘½ä»¤æ‰§è¡Œå™¨  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  æ—¥å¿—è®°å½•å™¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚
       â†“ æ‰§è¡Œ                       â†“ æŒä¹…åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸šåŠ¡å¯¹è±¡    â”‚               â”‚  æ—¥å¿—æ–‡ä»¶    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 å¯åºåˆ—åŒ–çš„å‘½ä»¤è®¾è®¡


**â­ åŸºç¡€çº§ï¼šç®€å•å‘½ä»¤æ—¥å¿—**

```java
// å¯åºåˆ—åŒ–çš„å‘½ä»¤æ¥å£
interface LoggableCommand extends Serializable {
    void execute();
    void undo();
    String getCommandType();
    Map<String, Object> getParameters();
}

// é“¶è¡Œè½¬è´¦å‘½ä»¤ç¤ºä¾‹
class TransferCommand implements LoggableCommand {
    private String fromAccount;
    private String toAccount; 
    private BigDecimal amount;
    private String transactionId;
    
    public TransferCommand(String from, String to, BigDecimal amount) {
        this.fromAccount = from;
        this.toAccount = to;
        this.amount = amount;
        this.transactionId = UUID.randomUUID().toString();
    }
    
    @Override
    public void execute() {
        // æ‰§è¡Œè½¬è´¦æ“ä½œ
        BankService.transfer(fromAccount, toAccount, amount);
        System.out.println("è½¬è´¦æ‰§è¡Œï¼š" + fromAccount + " â†’ " + toAccount + 
                         " é‡‘é¢ï¼š" + amount);
    }
    
    @Override
    public void undo() {
        // æ’¤é”€è½¬è´¦ï¼ˆåå‘è½¬è´¦ï¼‰
        BankService.transfer(toAccount, fromAccount, amount);
        System.out.println("è½¬è´¦æ’¤é”€ï¼š" + transactionId);
    }
    
    @Override
    public String getCommandType() {
        return "TRANSFER";
    }
    
    @Override
    public Map<String, Object> getParameters() {
        Map<String, Object> params = new HashMap<>();
        params.put("fromAccount", fromAccount);
        params.put("toAccount", toAccount);
        params.put("amount", amount);
        params.put("transactionId", transactionId);
        return params;
    }
}
```

### 2.4 å‘½ä»¤æ—¥å¿—ç®¡ç†å™¨


**â­â­ è¿›é˜¶çº§ï¼šå®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ**

```java
class CommandLogger {
    private final String logFilePath;
    private final List<LogEntry> inMemoryLog = new ArrayList<>();
    
    public CommandLogger(String logPath) {
        this.logFilePath = logPath;
        loadExistingLog();
    }
    
    // è®°å½•å‘½ä»¤æ‰§è¡Œ
    public void logCommand(LoggableCommand command) {
        LogEntry entry = new LogEntry(
            System.currentTimeMillis(),
            command.getCommandType(),
            command.getParameters(),
            LogEntry.Status.EXECUTED
        );
        
        inMemoryLog.add(entry);
        appendToFile(entry);
    }
    
    // é‡æ”¾æ‰€æœ‰å‘½ä»¤ï¼ˆç³»ç»Ÿæ¢å¤æ—¶ä½¿ç”¨ï¼‰
    public void replayCommands(CommandFactory factory) {
        System.out.println("å¼€å§‹é‡æ”¾å‘½ä»¤ï¼Œå…± " + inMemoryLog.size() + " æ¡");
        
        for (LogEntry entry : inMemoryLog) {
            try {
                LoggableCommand command = factory.createCommand(
                    entry.getCommandType(), 
                    entry.getParameters()
                );
                command.execute();
                System.out.println("é‡æ”¾æˆåŠŸï¼š" + entry.getCommandType());
            } catch (Exception e) {
                System.err.println("é‡æ”¾å¤±è´¥ï¼š" + e.getMessage());
            }
        }
    }
    
    // æ—¥å¿—æ¡ç›®ç±»
    static class LogEntry {
        private final long timestamp;
        private final String commandType;
        private final Map<String, Object> parameters;
        private final Status status;
        
        enum Status { EXECUTED, FAILED, UNDONE }
        
        // æ„é€ å‡½æ•°å’Œgetteræ–¹æ³•...
    }
}
```

---

## 3. ğŸŒ åˆ†å¸ƒå¼å‘½ä»¤æ‰§è¡Œ


### 3.1 åˆ†å¸ƒå¼åœºæ™¯çš„æŒ‘æˆ˜


**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šåœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•åè°ƒæ‰§è¡Œå‘½ä»¤ï¼Ÿ

```
åˆ†å¸ƒå¼æŒ‘æˆ˜ï¼š
é—®é¢˜1ï¼šç½‘ç»œå»¶è¿Ÿå’Œæ•…éšœ
- å‘½ä»¤å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨å¯èƒ½å¤±è´¥

é—®é¢˜2ï¼šä¸€è‡´æ€§ä¿è¯  
- å¦‚ä½•ä¿è¯æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œç›¸åŒçš„å‘½ä»¤åºåˆ—ï¼Ÿ

é—®é¢˜3ï¼šæ•…éšœæ¢å¤
- æŸä¸ªèŠ‚ç‚¹å´©æºƒåå¦‚ä½•æ¢å¤ï¼Ÿ

é—®é¢˜4ï¼šè´Ÿè½½å‡è¡¡
- å¦‚ä½•åœ¨å¤šä¸ªèŠ‚ç‚¹é—´åˆ†é…å‘½ä»¤ï¼Ÿ
```

### 3.2 åˆ†å¸ƒå¼å‘½ä»¤æ¶æ„


```
åˆ†å¸ƒå¼å‘½ä»¤æ‰§è¡Œæ¶æ„ï¼š
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ å‘½ä»¤åè°ƒå™¨   â”‚
                    â”‚(Coordinator)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
            â†“              â†“              â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   èŠ‚ç‚¹ A     â”‚â”‚   èŠ‚ç‚¹ B     â”‚â”‚   èŠ‚ç‚¹ C     â”‚
     â”‚  æ‰§è¡Œå™¨      â”‚â”‚  æ‰§è¡Œå™¨      â”‚â”‚  æ‰§è¡Œå™¨      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚              â”‚
            â†“              â†“              â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  æœ¬åœ°æœåŠ¡    â”‚â”‚  æœ¬åœ°æœåŠ¡    â”‚â”‚  æœ¬åœ°æœåŠ¡    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 åˆ†å¸ƒå¼å‘½ä»¤å®ç°


**â­â­ è¿›é˜¶çº§ï¼šåˆ†å¸ƒå¼å‘½ä»¤ç³»ç»Ÿ**

```java
// åˆ†å¸ƒå¼å‘½ä»¤æ¥å£
interface DistributedCommand extends Serializable {
    String getCommandId();
    Set<String> getTargetNodes();  // éœ€è¦æ‰§è¡Œçš„èŠ‚ç‚¹
    void execute();
    boolean isIdempotent();  // æ˜¯å¦å¹‚ç­‰ï¼ˆé‡å¤æ‰§è¡Œç»“æœç›¸åŒï¼‰
}

// åˆ†å¸ƒå¼æ–‡ä»¶æ“ä½œå‘½ä»¤
class DistributedFileCommand implements DistributedCommand {
    private String commandId;
    private String fileName;
    private String content;
    private Set<String> targetNodes;
    
    public DistributedFileCommand(String fileName, String content, Set<String> nodes) {
        this.commandId = UUID.randomUUID().toString();
        this.fileName = fileName;
        this.content = content;
        this.targetNodes = nodes;
    }
    
    @Override
    public void execute() {
        try {
            Files.write(Paths.get(fileName), content.getBytes());
            System.out.println("æ–‡ä»¶åˆ›å»ºæˆåŠŸï¼š" + fileName);
        } catch (IOException e) {
            throw new RuntimeException("æ–‡ä»¶åˆ›å»ºå¤±è´¥", e);
        }
    }
    
    @Override
    public boolean isIdempotent() {
        return true;  // å†™æ–‡ä»¶æ“ä½œæ˜¯å¹‚ç­‰çš„
    }
    
    // å…¶ä»–æ–¹æ³•å®ç°...
}

// åˆ†å¸ƒå¼å‘½ä»¤åè°ƒå™¨
class DistributedCommandCoordinator {
    private Map<String, NodeExecutor> nodeExecutors;
    private CommandLogger logger;
    
    public DistributedCommandCoordinator() {
        this.nodeExecutors = new HashMap<>();
        this.logger = new CommandLogger("distributed_commands.log");
    }
    
    // åˆ†å‘å¹¶æ‰§è¡Œå‘½ä»¤
    public CompletableFuture<Map<String, Boolean>> executeCommand(DistributedCommand command) {
        // è®°å½•å‘½ä»¤
        logger.logCommand((LoggableCommand) command);
        
        // å¹¶è¡Œæ‰§è¡Œ
        List<CompletableFuture<String>> futures = new ArrayList<>();
        
        for (String nodeId : command.getTargetNodes()) {
            NodeExecutor executor = nodeExecutors.get(nodeId);
            if (executor != null) {
                CompletableFuture<String> future = CompletableFuture
                    .supplyAsync(() -> executor.executeCommand(command))
                    .exceptionally(throwable -> {
                        System.err.println("èŠ‚ç‚¹ " + nodeId + " æ‰§è¡Œå¤±è´¥: " + throwable.getMessage());
                        return "FAILED";
                    });
                futures.add(future);
            }
        }
        
        // ç­‰å¾…æ‰€æœ‰æ‰§è¡Œå®Œæˆ
        return CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
            .thenApply(v -> {
                Map<String, Boolean> results = new HashMap<>();
                for (int i = 0; i < futures.size(); i++) {
                    String result = futures.get(i).join();
                    results.put("node_" + i, "SUCCESS".equals(result));
                }
                return results;
            });
    }
}
```

---

## 4. ğŸ”„ å‘½ä»¤æ¨¡å¼ä¸å·¥ä½œæµå¼•æ“


### 4.1 å·¥ä½œæµçš„æœ¬è´¨


**ğŸ¯ æ ¸å¿ƒç†è§£**ï¼šå·¥ä½œæµå°±æ˜¯ä¸€ç³»åˆ—æœ‰é¡ºåºã€æœ‰æ¡ä»¶çš„å‘½ä»¤æ‰§è¡Œ

```
ä¸¾ä¸ªä¾‹å­ï¼šå‘˜å·¥è¯·å‡æµç¨‹
æ­¥éª¤1ï¼šå‘˜å·¥æäº¤ç”³è¯· â†’ åˆ›å»ºç”³è¯·å‘½ä»¤
æ­¥éª¤2ï¼šç›´æ¥ä¸»ç®¡å®¡æ‰¹ â†’ å®¡æ‰¹å‘½ä»¤ï¼ˆæ¡ä»¶ï¼šåŒæ„/æ‹’ç»ï¼‰
æ­¥éª¤3ï¼šHRç¡®è®¤ â†’ ç¡®è®¤å‘½ä»¤ï¼ˆæ¡ä»¶ï¼šä¸»ç®¡åŒæ„æ‰æ‰§è¡Œï¼‰
æ­¥éª¤4ï¼šç³»ç»Ÿè®°å½• â†’ è®°å½•å‘½ä»¤

æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œæ•´ä¸ªæµç¨‹å°±æ˜¯å‘½ä»¤çš„ç»„åˆ
```

### 4.2 å·¥ä½œæµå‘½ä»¤è®¾è®¡


```
å·¥ä½œæµæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å·¥ä½œæµå¼•æ“   â”‚
â”‚(Workflow)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ ç®¡ç†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»»åŠ¡é˜Ÿåˆ—    â”‚
â”‚(Task Queue) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ åŒ…å«
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å·¥ä½œæµæ­¥éª¤   â”‚
â”‚(Step/Node)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ æ‰§è¡Œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘½ä»¤å¯¹è±¡    â”‚
â”‚ (Command)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 å·¥ä½œæµå®ç°ç¤ºä¾‹


**â­â­ è¿›é˜¶çº§ï¼šç®€å•å·¥ä½œæµå¼•æ“**

```java
// å·¥ä½œæµæ­¥éª¤æ¥å£
interface WorkflowStep {
    String getStepId();
    boolean canExecute(WorkflowContext context);  // æ‰§è¡Œæ¡ä»¶
    void execute(WorkflowContext context);
    List<String> getNextSteps();  // ä¸‹ä¸€æ­¥å¯èƒ½çš„æ­¥éª¤
}

// å…·ä½“çš„å·¥ä½œæµæ­¥éª¤
class ApprovalStep implements WorkflowStep {
    private String stepId;
    private String approverRole;
    
    public ApprovalStep(String stepId, String approverRole) {
        this.stepId = stepId;
        this.approverRole = approverRole;
    }
    
    @Override
    public boolean canExecute(WorkflowContext context) {
        // æ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”è§’è‰²çš„äººå‘˜
        return context.hasUserWithRole(approverRole);
    }
    
    @Override
    public void execute(WorkflowContext context) {
        System.out.println("æ‰§è¡Œå®¡æ‰¹æ­¥éª¤ï¼š" + stepId + "ï¼Œå®¡æ‰¹äººè§’è‰²ï¼š" + approverRole);
        
        // æ¨¡æ‹Ÿå®¡æ‰¹æ“ä½œ
        boolean approved = simulateApproval();
        context.setVariable(stepId + "_result", approved ? "APPROVED" : "REJECTED");
        context.setVariable("last_approver", approverRole);
    }
    
    @Override
    public List<String> getNextSteps() {
        return Arrays.asList("hr_confirmation", "rejection_notification");
    }
    
    private boolean simulateApproval() {
        // æ¨¡æ‹Ÿå®¡æ‰¹å†³å®šï¼ˆå®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ˜¯çœŸå®çš„ä¸šåŠ¡é€»è¾‘ï¼‰
        return Math.random() > 0.3;  // 70%é€šè¿‡ç‡
    }
}

// å·¥ä½œæµä¸Šä¸‹æ–‡
class WorkflowContext {
    private Map<String, Object> variables = new HashMap<>();
    private String currentUser;
    private Set<String> userRoles;
    
    public void setVariable(String key, Object value) {
        variables.put(key, value);
    }
    
    public Object getVariable(String key) {
        return variables.get(key);
    }
    
    public boolean hasUserWithRole(String role) {
        return userRoles.contains(role);
    }
    
    // å…¶ä»–æ–¹æ³•...
}

// å·¥ä½œæµå¼•æ“
class SimpleWorkflowEngine {
    private Map<String, WorkflowStep> steps = new HashMap<>();
    private Queue<String> pendingSteps = new LinkedList<>();
    
    public void defineWorkflow() {
        // å®šä¹‰è¯·å‡æµç¨‹
        steps.put("submit", new SubmitApplicationStep());
        steps.put("manager_approval", new ApprovalStep("manager_approval", "MANAGER"));
        steps.put("hr_confirmation", new ApprovalStep("hr_confirmation", "HR"));
        steps.put("system_record", new SystemRecordStep());
    }
    
    public void startWorkflow(WorkflowContext context) {
        pendingSteps.offer("submit");  // ä»æäº¤æ­¥éª¤å¼€å§‹
        
        while (!pendingSteps.isEmpty()) {
            String currentStepId = pendingSteps.poll();
            WorkflowStep step = steps.get(currentStepId);
            
            if (step != null && step.canExecute(context)) {
                step.execute(context);
                
                // æ ¹æ®æ‰§è¡Œç»“æœå†³å®šä¸‹ä¸€æ­¥
                List<String> nextSteps = determineNextSteps(step, context);
                pendingSteps.addAll(nextSteps);
            }
        }
    }
    
    private List<String> determineNextSteps(WorkflowStep currentStep, WorkflowContext context) {
        // æ ¹æ®å½“å‰æ­¥éª¤çš„æ‰§è¡Œç»“æœå†³å®šä¸‹ä¸€æ­¥
        // è¿™é‡Œæ˜¯ç®€åŒ–ç‰ˆæœ¬ï¼Œå®é™…åº”ç”¨ä¸­ä¼šæ›´å¤æ‚
        return currentStep.getNextSteps();
    }
}
```

---

## 5. âš¡ å¼‚æ­¥å‘½ä»¤å¤„ç†


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥å‘½ä»¤


**ğŸ¯ æ ¸å¿ƒé—®é¢˜**ï¼šæœ‰äº›å‘½ä»¤æ‰§è¡Œæ—¶é—´å¾ˆé•¿ï¼Œä¸èƒ½è®©ç”¨æˆ·ä¸€ç›´ç­‰å¾…

```
å¼‚æ­¥åœºæ™¯ä¸¾ä¾‹ï¼š
åœºæ™¯1ï¼šå‘é€é‚®ä»¶
- ç”¨æˆ·ç‚¹å‡»"å‘é€"æŒ‰é’®
- ç³»ç»Ÿç«‹å³å“åº”"æ­£åœ¨å‘é€"
- åå°æ…¢æ…¢å‘é€é‚®ä»¶

åœºæ™¯2ï¼šæ–‡ä»¶ä¸Šä¼ 
- ç”¨æˆ·é€‰æ‹©å¤§æ–‡ä»¶ä¸Šä¼ 
- ç³»ç»Ÿç«‹å³æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
- åå°å¼‚æ­¥å¤„ç†æ–‡ä»¶

åœºæ™¯3ï¼šæ•°æ®å¤„ç†
- ç”¨æˆ·æäº¤æ•°æ®åˆ†æè¯·æ±‚
- ç³»ç»Ÿç«‹å³è¿”å›ä»»åŠ¡ID
- åå°æ…¢æ…¢åˆ†ææ•°æ®

å…±åŒç‰¹ç‚¹ï¼šç”¨æˆ·ä¸ç”¨ç­‰å¾…ï¼Œç³»ç»Ÿåå°å¤„ç†
```

### 5.2 å¼‚æ­¥å‘½ä»¤æ¶æ„


```
å¼‚æ­¥å‘½ä»¤å¤„ç†æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    æäº¤å‘½ä»¤    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·ç•Œé¢   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ å‘½ä»¤è°ƒåº¦å™¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                            â”‚
       â”‚ ç«‹å³è¿”å›çŠ¶æ€                  â”‚ åŠ å…¥é˜Ÿåˆ—
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â†“
                     â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚        â”‚  ä»»åŠ¡é˜Ÿåˆ—    â”‚
â”‚  çŠ¶æ€æŸ¥è¯¢    â”‚ â†â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                                    â”‚ å¼‚æ­¥æ‰§è¡Œ
                                    â†“
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚ å·¥ä½œçº¿ç¨‹æ±    â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“ æ‰§è¡Œå‘½ä»¤
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚  ä¸šåŠ¡å¯¹è±¡    â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å¼‚æ­¥å‘½ä»¤å®ç°


**â­â­ è¿›é˜¶çº§ï¼šå¼‚æ­¥å‘½ä»¤å¤„ç†å™¨**

```java
// å¼‚æ­¥å‘½ä»¤æ¥å£
interface AsyncCommand extends Serializable {
    String getCommandId();
    void execute();
    long getEstimatedDuration();  // é¢„ä¼°æ‰§è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    CommandPriority getPriority();
}

enum CommandPriority {
    LOW(1), NORMAL(5), HIGH(10), URGENT(20);
    
    private final int value;
    CommandPriority(int value) { this.value = value; }
    public int getValue() { return value; }
}

// å¼‚æ­¥é‚®ä»¶å‘é€å‘½ä»¤
class AsyncEmailCommand implements AsyncCommand {
    private String commandId;
    private String recipient;
    private String subject;
    private String content;
    
    public AsyncEmailCommand(String recipient, String subject, String content) {
        this.commandId = UUID.randomUUID().toString();
        this.recipient = recipient;
        this.subject = subject;
        this.content = content;
    }
    
    @Override
    public void execute() {
        System.out.println("å¼€å§‹å‘é€é‚®ä»¶åˆ°ï¼š" + recipient);
        
        // æ¨¡æ‹Ÿé‚®ä»¶å‘é€ï¼ˆå®é™…ä¼šè°ƒç”¨é‚®ä»¶æœåŠ¡ï¼‰
        try {
            Thread.sleep(2000);  // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
            System.out.println("é‚®ä»¶å‘é€æˆåŠŸï¼š" + subject);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            throw new RuntimeException("é‚®ä»¶å‘é€è¢«ä¸­æ–­", e);
        }
    }
    
    @Override
    public long getEstimatedDuration() {
        return 3000;  // é¢„ä¼°3ç§’
    }
    
    @Override
    public CommandPriority getPriority() {
        return CommandPriority.NORMAL;
    }
    
    @Override
    public String getCommandId() {
        return commandId;
    }
}

// å‘½ä»¤çŠ¶æ€è·Ÿè¸ª
enum CommandStatus {
    PENDING("ç­‰å¾…æ‰§è¡Œ"),
    RUNNING("æ­£åœ¨æ‰§è¡Œ"), 
    COMPLETED("æ‰§è¡Œå®Œæˆ"),
    FAILED("æ‰§è¡Œå¤±è´¥");
    
    private final String description;
    CommandStatus(String description) { this.description = description; }
}

class CommandExecution {
    private final String commandId;
    private final AsyncCommand command;
    private CommandStatus status;
    private long startTime;
    private long endTime;
    private String errorMessage;
    
    public CommandExecution(AsyncCommand command) {
        this.commandId = command.getCommandId();
        this.command = command;
        this.status = CommandStatus.PENDING;
    }
    
    // çŠ¶æ€æ›´æ–°æ–¹æ³•
    public void markAsRunning() {
        this.status = CommandStatus.RUNNING;
        this.startTime = System.currentTimeMillis();
    }
    
    public void markAsCompleted() {
        this.status = CommandStatus.COMPLETED;
        this.endTime = System.currentTimeMillis();
    }
    
    public void markAsFailed(String error) {
        this.status = CommandStatus.FAILED;
        this.endTime = System.currentTimeMillis();
        this.errorMessage = error;
    }
    
    // getteræ–¹æ³•...
}
```

### 5.4 å¼‚æ­¥å‘½ä»¤è°ƒåº¦å™¨


**â­â­â­ é«˜çº§ï¼šå®Œæ•´çš„å¼‚æ­¥å¤„ç†ç³»ç»Ÿ**

```java
class AsyncCommandProcessor {
    private final ExecutorService executorService;
    private final Map<String, CommandExecution> executions;
    private final PriorityQueue<AsyncCommand> commandQueue;
    private final ScheduledExecutorService statusChecker;
    
    public AsyncCommandProcessor(int threadPoolSize) {
        this.executorService = Executors.newFixedThreadPool(threadPoolSize);
        this.executions = new ConcurrentHashMap<>();
        
        // ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œé«˜ä¼˜å…ˆçº§å‘½ä»¤å…ˆæ‰§è¡Œ
        this.commandQueue = new PriorityQueue<>((cmd1, cmd2) -> 
            Integer.compare(cmd2.getPriority().getValue(), cmd1.getPriority().getValue())
        );
        
        this.statusChecker = Executors.newScheduledThreadPool(1);
        startStatusChecker();
    }
    
    // æäº¤å¼‚æ­¥å‘½ä»¤
    public String submitCommand(AsyncCommand command) {
        String commandId = command.getCommandId();
        CommandExecution execution = new CommandExecution(command);
        
        executions.put(commandId, execution);
        
        // æäº¤åˆ°çº¿ç¨‹æ± æ‰§è¡Œ
        CompletableFuture.runAsync(() -> {
            try {
                execution.markAsRunning();
                command.execute();
                execution.markAsCompleted();
                System.out.println("å‘½ä»¤æ‰§è¡Œå®Œæˆï¼š" + commandId);
            } catch (Exception e) {
                execution.markAsFailed(e.getMessage());
                System.err.println("å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼š" + commandId + ", é”™è¯¯ï¼š" + e.getMessage());
            }
        }, executorService);
        
        return commandId;
    }
    
    // æŸ¥è¯¢å‘½ä»¤çŠ¶æ€
    public CommandStatus getCommandStatus(String commandId) {
        CommandExecution execution = executions.get(commandId);
        return execution != null ? execution.getStatus() : null;
    }
    
    // è·å–æ‰§è¡Œè¿›åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰
    public double getProgress(String commandId) {
        CommandExecution execution = executions.get(commandId);
        if (execution == null) return 0.0;
        
        switch (execution.getStatus()) {
            case PENDING: return 0.0;
            case RUNNING:
                long elapsed = System.currentTimeMillis() - execution.getStartTime();
                long estimated = execution.getCommand().getEstimatedDuration();
                return Math.min(0.9, (double) elapsed / estimated);  // æœ€å¤šæ˜¾ç¤º90%
            case COMPLETED: return 1.0;
            case FAILED: return 0.0;
            default: return 0.0;
        }
    }
    
    // å®šæœŸæ¸…ç†å·²å®Œæˆçš„å‘½ä»¤è®°å½•
    private void startStatusChecker() {
        statusChecker.scheduleAtFixedRate(() -> {
            long cutoffTime = System.currentTimeMillis() - TimeUnit.HOURS.toMillis(1);
            
            executions.entrySet().removeIf(entry -> {
                CommandExecution execution = entry.getValue();
                return (execution.getStatus() == CommandStatus.COMPLETED || 
                        execution.getStatus() == CommandStatus.FAILED) &&
                       execution.getEndTime() < cutoffTime;
            });
        }, 10, 10, TimeUnit.MINUTES);
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 äº”å¤§é«˜çº§åº”ç”¨åœºæ™¯


> ğŸ’¡ **ä¸€å¥è¯æ€»ç»“**  
> å‘½ä»¤æ¨¡å¼çš„é«˜çº§åº”ç”¨å°±æ˜¯è®©å‘½ä»¤å˜å¾—æ›´"èªæ˜"ï¼šèƒ½è®°ä½å†å²ã€èƒ½å†™æ—¥å¿—ã€èƒ½è·¨ç½‘ç»œã€èƒ½ç»„æˆæµç¨‹ã€èƒ½å¼‚æ­¥æ‰§è¡Œ

### 6.2 æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹


**ğŸ”¥ å¿…é¡»æŒæ¡çš„æ¦‚å¿µ**

| åº”ç”¨åœºæ™¯ | **æ ¸å¿ƒæ€æƒ³** | **è§£å†³é—®é¢˜** | **æŠ€æœ¯å…³é”®** |
|---------|------------|-------------|-------------|
| **å‘½ä»¤+å¤‡å¿˜å½•** | `çŠ¶æ€å¯æ¢å¤` | ä»»æ„æ—¶é—´ç‚¹å›æ»š | çŠ¶æ€å¿«ç…§ç®¡ç† |
| **å‘½ä»¤æ—¥å¿—** | `æ“ä½œå¯é‡æ”¾` | ç³»ç»Ÿæ¢å¤å’Œå®¡è®¡ | åºåˆ—åŒ–å’Œé‡æ”¾ |
| **åˆ†å¸ƒå¼å‘½ä»¤** | `è·¨èŠ‚ç‚¹åè°ƒ` | å¤šæœºå™¨ä¸€è‡´æ€§ | ç½‘ç»œé€šä¿¡å’Œå®¹é”™ |
| **å·¥ä½œæµå¼•æ“** | `å‘½ä»¤ç¼–æ’` | å¤æ‚ä¸šåŠ¡æµç¨‹ | æ¡ä»¶æ‰§è¡Œå’Œæµè½¬ |
| **å¼‚æ­¥å¤„ç†** | `éé˜»å¡æ‰§è¡Œ` | ç”¨æˆ·ä½“éªŒä¼˜åŒ– | çº¿ç¨‹æ± å’ŒçŠ¶æ€è·Ÿè¸ª |

### 6.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ æŠ€æœ¯é€‰æ‹©åŸåˆ™**

```
é€‰æ‹©å‘½ä»¤+å¤‡å¿˜å½•ï¼š
âœ… éœ€è¦ç²¾ç¡®çš„çŠ¶æ€æ¢å¤ï¼ˆæ–‡æ¡£ç¼–è¾‘å™¨ã€æ¸¸æˆå­˜æ¡£ï¼‰
âœ… ç”¨æˆ·éœ€è¦"æ—¶å…‰æœº"åŠŸèƒ½

é€‰æ‹©å‘½ä»¤æ—¥å¿—ï¼š
âœ… éœ€è¦æ“ä½œå®¡è®¡ï¼ˆé‡‘èç³»ç»Ÿã€é‡è¦ä¸šåŠ¡ï¼‰
âœ… éœ€è¦ç³»ç»Ÿæ¢å¤èƒ½åŠ›

é€‰æ‹©åˆ†å¸ƒå¼å‘½ä»¤ï¼š
âœ… å¤šæœºå™¨åè°ƒæ“ä½œï¼ˆåˆ†å¸ƒå¼ç³»ç»Ÿã€é›†ç¾¤ç®¡ç†ï¼‰
âœ… éœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§

é€‰æ‹©å·¥ä½œæµå¼•æ“ï¼š
âœ… å¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼ˆå®¡æ‰¹æµç¨‹ã€è®¢å•å¤„ç†ï¼‰
âœ… éœ€è¦çµæ´»çš„æµç¨‹é…ç½®

é€‰æ‹©å¼‚æ­¥å¤„ç†ï¼š
âœ… è€—æ—¶æ“ä½œï¼ˆæ–‡ä»¶ä¸Šä¼ ã€é‚®ä»¶å‘é€ã€æ•°æ®åˆ†æï¼‰
âœ… éœ€è¦æå‡ç”¨æˆ·ä½“éªŒ
```

### 6.4 é‡è¦åº¦æ ‡è¯†


- ğŸŸ¢ **åŸºç¡€å¿…ä¼š**ï¼šå‘½ä»¤+å¤‡å¿˜å½•çš„åŸºæœ¬ç»„åˆ
- ğŸŸ¡ **è¿›é˜¶æŒæ¡**ï¼šå‘½ä»¤æ—¥å¿—çš„è®¾è®¡å’Œå®ç°  
- ğŸ”´ **é«˜çº§ç†è§£**ï¼šåˆ†å¸ƒå¼å‘½ä»¤åè°ƒã€å·¥ä½œæµå¼•æ“ã€å¼‚æ­¥å¤„ç†

### 6.5 å­¦ä¹ å»ºè®®


**ğŸ“š å­¦ä¹ è·¯å¾„**
```
ç¬¬ä¸€æ­¥ï¼šæŒæ¡åŸºç¡€å‘½ä»¤æ¨¡å¼
ç¬¬äºŒæ­¥ï¼šç†è§£å¤‡å¿˜å½•æ¨¡å¼ç»“åˆ
ç¬¬ä¸‰æ­¥ï¼šå­¦ä¹ å‘½ä»¤åºåˆ—åŒ–å’Œæ—¥å¿—
ç¬¬å››æ­¥ï¼šäº†è§£åˆ†å¸ƒå¼åè°ƒæ¦‚å¿µ
ç¬¬äº”æ­¥ï¼šå®è·µå¼‚æ­¥å¤„ç†å’Œå·¥ä½œæµ
```

**ğŸ§  è®°å¿†æŠ€å·§**
- **å¤‡å¿˜å½•**ï¼šå‘½ä»¤çš„"æ—¶å…‰æœº"ï¼Œéšæ—¶å›åˆ°è¿‡å»
- **æ—¥å¿—**ï¼šå‘½ä»¤çš„"å½•åƒå¸¦"ï¼Œå¯ä»¥é‡æ”¾å†å²
- **åˆ†å¸ƒå¼**ï¼šå‘½ä»¤çš„"ä¼ ä»¤å…µ"ï¼Œè·¨ç½‘ç»œæ‰§è¡Œ
- **å·¥ä½œæµ**ï¼šå‘½ä»¤çš„"ç¼–èˆè€…"ï¼Œå®‰æ’æ‰§è¡Œé¡ºåº
- **å¼‚æ­¥**ï¼šå‘½ä»¤çš„"åå°åŠ©æ‰‹"ï¼Œä¸è®©ç”¨æˆ·ç­‰å¾…

**ğŸ”‘ æ ¸å¿ƒè®°å¿†**ï¼š
> å‘½ä»¤æ¨¡å¼é«˜çº§åº”ç”¨çš„ç²¾é«“åœ¨äºè®©å‘½ä»¤å…·å¤‡"è®°å¿†"ã€"ä¼ æ’­"ã€"åä½œ"å’Œ"æ™ºèƒ½"çš„èƒ½åŠ›ï¼Œä»ç®€å•çš„æ“ä½œå°è£…å‡çº§ä¸ºå¼ºå¤§çš„ç³»ç»Ÿåè°ƒå·¥å…·ã€‚