---
title: 3、调试技巧与工具
---
## 📚 目录

1. [调试基础概念](#1-调试基础概念)
2. [浏览器Network面板调试](#2-浏览器Network面板调试)
3. [Axios调试信息配置](#3-Axios调试信息配置)
4. [请求日志记录](#4-请求日志记录)
5. [错误排查技巧](#5-错误排查技巧)
6. [代理工具使用](#6-代理工具使用)
7. [开发环境最佳实践](#7-开发环境最佳实践)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🔍 调试基础概念


### 1.1 什么是调试


> 💡 **调试的本质**：调试就是找问题、解决问题的过程，就像医生看病一样

**简单理解**：
```
发请求 → 出问题了 → 找原因 → 解决问题

比如：
- 点击按钮没反应 → 看看请求发出去了吗？
- 数据没显示 → 看看服务器返回了什么？
- 报错了 → 看看错误信息说的是啥？
```

### 1.2 为什么要调试


**日常开发中的痛点**：
- ✅ **请求失败**：不知道哪里出错了
- ✅ **数据异常**：服务器返回的数据不对
- ✅ **性能问题**：请求太慢了
- ✅ **逻辑错误**：功能不按预期工作

> ⚠️ **注意**：不会调试的程序员，就像闭着眼睛走路一样危险

### 1.3 调试工具分类


```
调试工具全景图：

浏览器内置工具
├── Network面板 ← 看请求详情
├── Console面板 ← 看日志输出  
└── Sources面板 ← 断点调试

外部代理工具
├── Charles ← Mac常用
├── Fiddler ← Windows常用
└── Postman ← 接口测试

代码调试
├── console.log() ← 最简单
├── debugger语句 ← 强制断点
└── 请求拦截器 ← 自动记录
```

---

## 2. 🌐 浏览器Network面板调试


### 2.1 打开Network面板


**操作步骤**：
```
① 打开浏览器 (Chrome/Firefox/Edge)
② 按F12键 (或右键→检查元素)
③ 点击"Network"或"网络"标签
④ 刷新页面开始监控
```

> 💡 **小技巧**：先打开Network面板，再触发请求，这样才能看到完整信息

### 2.2 Network面板界面介绍


```
Network面板布局：

┌─────────────────────────────────────────┐
│ 🔄 清空  📁 过滤  🔍 搜索  ⚙️ 设置     │
├─────────────────────────────────────────┤
│ 请求列表区域                             │
│ ┌─名称─┬─状态─┬─类型─┬─大小─┬─时间─┐    │
│ │ajax  │ 200 │ XHR │ 2KB │ 150ms│    │
│ │api   │ 404 │ XHR │ 1KB │ 200ms│    │
│ └─────┴─────┴─────┴─────┴─────┘    │
├─────────────────────────────────────────┤
│ 请求详情区域                             │
│ Headers | Preview | Response | Timing  │
└─────────────────────────────────────────┘
```

### 2.3 查看请求基本信息


**看请求状态**：
```javascript
// 发起一个请求
axios.get('/api/users')
  .then(response => {
    console.log('请求成功');
  })
  .catch(error => {
    console.log('请求失败');
  });
```

**在Network面板中看到**：
- ✅ **绿色200**：请求成功
- ❌ **红色404**：接口不存在  
- ❌ **红色500**：服务器错误
- ⏳ **灰色(pending)**：请求中

### 2.4 查看请求参数


**点击请求行 → Headers标签**：

```
General 基本信息
├── Request URL: https://api.example.com/users
├── Request Method: GET
├── Status Code: 200 OK
└── Remote Address: 192.168.1.100:80

Request Headers 请求头
├── Accept: application/json
├── User-Agent: Chrome/91.0
└── Authorization: Bearer token123

Query String Parameters 查询参数  
├── page: 1
├── size: 10
└── keyword: 张三
```

> 💡 **实用技巧**：右键请求 → Copy → Copy as cURL，可以复制完整的命令行请求

### 2.5 查看响应数据


**Response标签 - 看原始数据**：
```json
{
  "code": 200,
  "message": "success", 
  "data": [
    {"id": 1, "name": "张三"},
    {"id": 2, "name": "李四"}
  ]
}
```

**Preview标签 - 看格式化数据**：
```
展开式查看，更容易阅读：
▼ Object
  ▼ data: Array(2)
    ▼ 0: Object  
      id: 1
      name: "张三"
    ▼ 1: Object
      id: 2  
      name: "李四"
```

---

## 3. ⚙️ Axios调试信息配置


### 3.1 开启详细日志


```javascript
// 创建axios实例时开启调试
const api = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 5000,
  // 开启详细日志 (仅开发环境)
  validateStatus: function (status) {
    console.log('响应状态码:', status);
    return status >= 200 && status < 300;
  }
});
```

### 3.2 请求拦截器 - 记录发送信息


```javascript
// 请求拦截器：记录每个请求
api.interceptors.request.use(
  function (config) {
    console.log('📤 发送请求:', {
      url: config.url,
      method: config.method,
      params: config.params,
      data: config.data
    });
    return config;
  },
  function (error) {
    console.error('❌ 请求配置错误:', error);
    return Promise.reject(error);
  }
);
```

### 3.3 响应拦截器 - 记录接收信息


```javascript
// 响应拦截器：记录每个响应
api.interceptors.response.use(
  function (response) {
    console.log('📥 收到响应:', {
      status: response.status,
      url: response.config.url,
      data: response.data
    });
    return response;
  },
  function (error) {
    console.error('❌ 响应错误:', {
      status: error.response?.status,
      message: error.message,
      url: error.config?.url
    });
    return Promise.reject(error);
  }
);
```

### 3.4 开发环境专用调试


```javascript
// 只在开发环境开启调试
const isDev = process.env.NODE_ENV === 'development';

if (isDev) {
  // 开发环境：显示详细信息
  api.interceptors.request.use(config => {
    console.group('🚀 API请求');
    console.log('地址:', config.url);
    console.log('方法:', config.method);
    console.log('参数:', config.params || config.data);
    console.groupEnd();
    return config;
  });
} else {
  // 生产环境：只记录错误
  api.interceptors.response.use(
    response => response,
    error => {
      console.error('API错误:', error.message);
      return Promise.reject(error);
    }
  );
}
```

---

## 4. 📝 请求日志记录


### 4.1 简单日志记录


```javascript
// 封装一个简单的日志函数
function logRequest(type, info) {
  const timestamp = new Date().toLocaleTimeString();
  console.log(`[${timestamp}] ${type}:`, info);
}

// 使用示例
axios.get('/api/users')
  .then(response => {
    logRequest('SUCCESS', `获取用户列表成功，共${response.data.length}条`);
  })
  .catch(error => {
    logRequest('ERROR', `获取用户列表失败：${error.message}`);
  });
```

### 4.2 结构化日志记录


```javascript
// 创建日志记录器
class RequestLogger {
  static log(request, response, error) {
    const logData = {
      time: new Date().toISOString(),
      url: request.url,
      method: request.method,
      status: response?.status || 'failed',
      duration: Date.now() - request.startTime,
      error: error?.message
    };
    
    // 开发环境：控制台输出
    if (process.env.NODE_ENV === 'development') {
      console.table(logData);
    }
    
    // 可以发送到日志服务
    // this.sendToLogService(logData);
  }
}

// 在拦截器中使用
api.interceptors.request.use(config => {
  config.startTime = Date.now(); // 记录开始时间
  return config;
});

api.interceptors.response.use(
  response => {
    RequestLogger.log(response.config, response);
    return response;
  },
  error => {
    RequestLogger.log(error.config, null, error);
    return Promise.reject(error);
  }
);
```

### 4.3 条件日志记录


```javascript
// 只记录特定条件的请求
const shouldLog = (config) => {
  // 只记录API请求，不记录静态资源
  return config.url.includes('/api/');
};

api.interceptors.request.use(config => {
  if (shouldLog(config)) {
    console.log(`🔄 ${config.method?.toUpperCase()} ${config.url}`);
  }
  return config;
});
```

---

## 5. 🔧 错误排查技巧


### 5.1 常见错误类型


**网络错误**：
```javascript
// 网络连接问题
axios.get('/api/data')
  .catch(error => {
    if (error.code === 'ERR_NETWORK') {
      console.log('❌ 网络连接失败，请检查网络');
    }
  });
```

**超时错误**：
```javascript
// 请求超时
axios.get('/api/slow', { timeout: 3000 })
  .catch(error => {
    if (error.code === 'ECONNABORTED') {
      console.log('⏰ 请求超时，服务器响应太慢');
    }
  });
```

**HTTP错误**：
```javascript
// HTTP状态码错误
axios.get('/api/users')
  .catch(error => {
    const status = error.response?.status;
    switch (status) {
      case 404:
        console.log('❌ 接口不存在');
        break;
      case 500:
        console.log('❌ 服务器内部错误');
        break;
      case 401:
        console.log('❌ 未授权，请先登录');
        break;
    }
  });
```

### 5.2 错误信息详细分析


```javascript
// 完整的错误处理
axios.get('/api/data')
  .catch(error => {
    console.group('❌ 请求错误详情');
    
    // 基本信息
    console.log('错误消息:', error.message);
    console.log('错误代码:', error.code);
    
    // 请求信息
    if (error.config) {
      console.log('请求地址:', error.config.url);
      console.log('请求方法:', error.config.method);
    }
    
    // 响应信息
    if (error.response) {
      console.log('响应状态:', error.response.status);
      console.log('响应数据:', error.response.data);
      console.log('响应头:', error.response.headers);
    }
    
    console.groupEnd();
  });
```

### 5.3 排查步骤


**系统化排查流程**：
```
① 检查请求是否发出
   └─ Network面板看是否有请求记录

② 检查请求地址是否正确  
   └─ 看URL是否拼写错误

③ 检查请求参数是否正确
   └─ Headers标签查看参数

④ 检查服务器响应
   └─ Response标签查看返回数据

⑤ 检查前端处理逻辑
   └─ Console查看JavaScript错误
```

> 💡 **排查口诀**：先看发没发，再看对不对，最后看返回啥

---

## 6. 🛠️ 代理工具使用


### 6.1 什么是代理工具


> 💡 **简单理解**：代理工具就像一个"中间人"，帮你监听和修改网络请求

```
正常请求流程：
浏览器 ──────→ 服务器

使用代理后：
浏览器 ──→ 代理工具 ──→ 服务器
         ↑
      可以查看/修改
```

### 6.2 Charles使用 (Mac推荐)


**基本设置**：
```
① 下载安装Charles
② 设置代理端口：Proxy → Proxy Settings → 8888
③ 浏览器设置代理：127.0.0.1:8888  
④ 安装证书：Help → SSL Proxying → Install Charles Root Certificate
```

**查看HTTPS请求**：
```
① Proxy → SSL Proxying Settings
② 添加域名：*.example.com:443
③ 勾选"Enable SSL Proxying"
```

### 6.3 Fiddler使用 (Windows推荐)


**基本配置**：
```
① 下载安装Fiddler
② Tools → Options → Connections
③ 设置端口：8888
④ 勾选"Allow remote computers to connect"
```

**查看请求详情**：
- **左侧列表**：所有请求记录
- **右侧Inspector**：请求和响应详情
- **Composer**：手动构造请求测试

### 6.4 代理工具的优势


**对比浏览器Network面板**：

| 功能 | Network面板 | 代理工具 |
|------|------------|----------|
| **查看请求** | ✅ 可以 | ✅ 可以 |
| **修改请求** | ❌ 不行 | ✅ 可以 |
| **保存记录** | ❌ 刷新就没了 | ✅ 永久保存 |
| **跨应用监控** | ❌ 只看当前页面 | ✅ 所有应用 |
| **高级过滤** | ⭐ 基础 | ⭐⭐⭐ 强大 |

---

## 7. 💻 开发环境最佳实践


### 7.1 统一错误处理


```javascript
// 创建统一的错误处理器
const errorHandler = {
  // 网络错误
  handleNetworkError(error) {
    console.error('🌐 网络错误:', error.message);
    // 可以显示用户友好的提示
    this.showUserMessage('网络连接失败，请检查网络后重试');
  },
  
  // HTTP错误
  handleHttpError(error) {
    const status = error.response?.status;
    const message = error.response?.data?.message || '请求失败';
    
    console.error(`📡 HTTP错误 ${status}:`, message);
    
    // 根据状态码处理
    switch (status) {
      case 401:
        this.handleUnauthorized();
        break;
      case 403:
        this.showUserMessage('没有权限访问');
        break;
      case 500:
        this.showUserMessage('服务器异常，请稍后重试');
        break;
      default:
        this.showUserMessage(message);
    }
  },
  
  // 显示用户消息
  showUserMessage(message) {
    // 这里可以接入UI组件库的提示组件
    alert(message); // 简单示例
  },
  
  // 处理未授权
  handleUnauthorized() {
    console.log('🔒 用户未授权，跳转登录页');
    // 清除token，跳转登录页
    localStorage.removeItem('token');
    window.location.href = '/login';
  }
};

// 在响应拦截器中使用
api.interceptors.response.use(
  response => response,
  error => {
    if (error.response) {
      errorHandler.handleHttpError(error);
    } else {
      errorHandler.handleNetworkError(error);
    }
    return Promise.reject(error);
  }
);
```

### 7.2 开发环境调试配置


```javascript
// 开发环境配置
const devConfig = {
  // 开启请求日志
  enableRequestLog: true,
  // 开启响应日志  
  enableResponseLog: true,
  // 开启性能监控
  enablePerformanceLog: true,
  // 模拟网络延迟
  simulateNetworkDelay: 0 // 毫秒
};

// 应用配置
if (process.env.NODE_ENV === 'development') {
  // 请求日志
  if (devConfig.enableRequestLog) {
    api.interceptors.request.use(config => {
      console.log(`🚀 ${config.method?.toUpperCase()} ${config.url}`);
      return config;
    });
  }
  
  // 模拟延迟
  if (devConfig.simulateNetworkDelay > 0) {
    api.interceptors.request.use(async config => {
      await new Promise(resolve => 
        setTimeout(resolve, devConfig.simulateNetworkDelay)
      );
      return config;
    });
  }
}
```

### 7.3 Console调试技巧


**基础日志输出**：
```javascript
// 普通日志
console.log('这是普通信息');

// 不同级别的日志
console.info('ℹ️ 信息日志');
console.warn('⚠️ 警告日志'); 
console.error('❌ 错误日志');

// 分组日志
console.group('📦 用户相关操作');
console.log('获取用户信息');
console.log('更新用户资料');
console.groupEnd();

// 表格形式显示
const users = [
  {id: 1, name: '张三', age: 25},
  {id: 2, name: '李四', age: 30}
];
console.table(users);
```

**条件日志**：
```javascript
// 只在特定条件下打印日志
const DEBUG = true;

function debugLog(message, data) {
  if (DEBUG) {
    console.log(`🐛 [DEBUG] ${message}`, data);
  }
}

// 使用
debugLog('用户登录', {username: 'admin', timestamp: Date.now()});
```

### 7.4 性能监控


```javascript
// 监控请求性能
api.interceptors.request.use(config => {
  config.metadata = { startTime: Date.now() };
  return config;
});

api.interceptors.response.use(
  response => {
    const duration = Date.now() - response.config.metadata.startTime;
    
    // 记录慢请求
    if (duration > 2000) {
      console.warn(`🐌 慢请求警告: ${response.config.url} 耗时 ${duration}ms`);
    } else {
      console.log(`⚡ ${response.config.url} 耗时 ${duration}ms`);
    }
    
    return response;
  },
  error => {
    const duration = Date.now() - error.config?.metadata?.startTime;
    console.error(`❌ 请求失败: ${error.config?.url} 耗时 ${duration}ms`);
    return Promise.reject(error);
  }
);
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的调试技能


```
🔸 浏览器Network面板：查看请求状态、参数、响应
🔸 Console调试：使用console.log输出关键信息  
🔸 拦截器调试：在请求/响应拦截器中记录日志
🔸 错误处理：识别和处理常见的请求错误
🔸 代理工具：使用Charles/Fiddler进行高级调试
```

### 8.2 调试思路和方法


**🔹 系统化调试流程**：
```
① 确认问题：具体是什么问题？
② 检查请求：请求发出去了吗？参数对吗？
③ 查看响应：服务器返回了什么？
④ 分析逻辑：前端处理逻辑对吗？
⑤ 解决问题：针对性修复
```

**🔹 常用调试手段**：
```
✅ Network面板：第一选择，最直观
✅ Console日志：简单有效，成本最低
✅ 拦截器：自动化记录，覆盖全面
✅ 代理工具：功能强大，适合复杂场景
✅ 断点调试：深入代码，精确定位
```

### 8.3 实际应用建议


**开发阶段**：
- ✅ 开启详细日志记录
- ✅ 使用拦截器自动监控
- ✅ 配置统一错误处理
- ✅ 善用Console调试

**测试阶段**：
- ✅ 使用代理工具模拟各种场景
- ✅ 测试错误处理逻辑
- ✅ 监控性能指标

**生产阶段**：
- ✅ 关闭详细日志（性能考虑）
- ✅ 保留错误监控
- ✅ 收集用户反馈的错误信息

> 💡 **调试心得**：调试不是技术活，是侦探活。要有耐心，要有方法，要有工具。

**核心记忆**：
- 调试就是找问题解决问题的过程
- Network面板是最基础最重要的工具
- Console.log是最简单有效的调试手段  
- 拦截器可以自动记录所有请求信息
- 代理工具适合复杂场景的深度调试
- 错误处理要分类处理，给用户友好提示