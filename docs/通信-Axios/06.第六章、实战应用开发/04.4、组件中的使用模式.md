---
title: 4ã€ç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼
---
## ğŸ“š ç›®å½•

1. [ç»„ä»¶ä¸­ä½¿ç”¨Axiosçš„åŸºæœ¬ç†å¿µ](#1-ç»„ä»¶ä¸­ä½¿ç”¨axiosçš„åŸºæœ¬ç†å¿µ)
2. [Vueç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼](#2-vueç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼)
3. [Reactç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼](#3-reactç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼)
4. [é€šç”¨ç»„ä»¶ä½¿ç”¨æœ€ä½³å®è·µ](#4-é€šç”¨ç»„ä»¶ä½¿ç”¨æœ€ä½³å®è·µ)
5. [é¡¹ç›®å®æˆ˜æ¡ˆä¾‹](#5-é¡¹ç›®å®æˆ˜æ¡ˆä¾‹)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç»„ä»¶ä¸­ä½¿ç”¨Axiosçš„åŸºæœ¬ç†å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç»„ä»¶ä¸­çš„HTTPè¯·æ±‚


**é€šä¿—ç†è§£**ï¼š
```
æƒ³è±¡ä½ åœ¨é¤å…ç‚¹èœï¼š
- ç»„ä»¶ = ä½ è¿™ä¸ªé¡¾å®¢
- HTTPè¯·æ±‚ = å‘æœåŠ¡å‘˜ç‚¹èœ
- æ•°æ®å“åº” = æœåŠ¡å‘˜é€æ¥çš„èœå“

åœ¨å‰ç«¯ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‘æœåŠ¡å™¨"ç‚¹èœ"ï¼ˆå‘è¯·æ±‚ï¼‰ï¼Œ
ç„¶åæŠŠ"èœå“"ï¼ˆæ•°æ®ï¼‰å±•ç¤ºç»™ç”¨æˆ·çœ‹
```

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **è¯·æ±‚æ—¶æœº**ï¼šä»€ä¹ˆæ—¶å€™å‘èµ·è¯·æ±‚æœ€åˆé€‚
- **æ•°æ®å¤„ç†**ï¼šè¯·æ±‚å›æ¥çš„æ•°æ®æ€ä¹ˆå¤„ç†
- **çŠ¶æ€ç®¡ç†**ï¼šåŠ è½½ä¸­ã€æˆåŠŸã€å¤±è´¥ç­‰çŠ¶æ€
- **èµ„æºæ¸…ç†**ï¼šç»„ä»¶é”€æ¯æ—¶è¦åšçš„æ¸…ç†å·¥ä½œ

### 1.2 ç»„ä»¶è¯·æ±‚çš„å¸¸è§åœºæ™¯


```
ğŸ“Š ç”¨æˆ·è¿›å…¥é¡µé¢ â†’ åŠ è½½ç”¨æˆ·ä¿¡æ¯
ğŸ“ å¡«å†™è¡¨å•å â†’ æäº¤æ•°æ®åˆ°æœåŠ¡å™¨  
ğŸ”„ ç‚¹å‡»åˆ·æ–°æŒ‰é’® â†’ é‡æ–°è·å–æœ€æ–°æ•°æ®
ğŸ” è¾“å…¥æœç´¢è¯ â†’ å®æ—¶æœç´¢ç»“æœ
```

---

## 2. ğŸŸ¢ Vueç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼


### 2.1 Vue2ä¸­çš„åŸºç¡€ä½¿ç”¨


**æ ¸å¿ƒæ€è·¯**ï¼šåœ¨åˆé€‚çš„ç”Ÿå‘½å‘¨æœŸå‘èµ·è¯·æ±‚ï¼ŒæŠŠæ•°æ®å­˜åˆ°ç»„ä»¶çš„dataä¸­

```javascript
// ç”¨æˆ·ä¿¡æ¯é¡µé¢ç»„ä»¶
export default {
  data() {
    return {
      user: null,        // ç”¨æˆ·æ•°æ®
      loading: true,     // åŠ è½½çŠ¶æ€
      error: null        // é”™è¯¯ä¿¡æ¯
    }
  },
  
  // ç»„ä»¶æŒ‚è½½åç«‹å³åŠ è½½æ•°æ®
  async mounted() {
    try {
      this.loading = true
      const response = await this.$http.get('/api/user/profile')
      this.user = response.data
    } catch (error) {
      this.error = 'åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥'
    } finally {
      this.loading = false
    }
  }
}
```

> ğŸ’¡ **ç”Ÿå‘½å‘¨æœŸé€‰æ‹©æŒ‡å—**
> - `created`ï¼šç»„ä»¶åˆ›å»ºåï¼Œé€‚åˆä¸ä¾èµ–DOMçš„è¯·æ±‚
> - `mounted`ï¼šDOMæŒ‚è½½åï¼Œé€‚åˆå¤§éƒ¨åˆ†æ•°æ®è¯·æ±‚
> - `activated`ï¼škeep-aliveç»„ä»¶æ¿€æ´»æ—¶

### 2.2 Vue3 Composition APIæ¨¡å¼


**æ ¸å¿ƒç†å¿µ**ï¼šç”¨ç»„åˆå¼APIè®©ä»£ç æ›´æ¸…æ™°ï¼Œé€»è¾‘æ›´é›†ä¸­

```javascript
// composables/useUserData.js - å¯å¤ç”¨çš„ç”¨æˆ·æ•°æ®é€»è¾‘
import { ref, onMounted, onUnmounted } from 'vue'
import axios from 'axios'

export function useUserData(userId) {
  const user = ref(null)
  const loading = ref(false)
  const error = ref(null)
  
  // è·å–ç”¨æˆ·æ•°æ®çš„å‡½æ•°
  const fetchUser = async () => {
    try {
      loading.value = true
      error.value = null
      const response = await axios.get(`/api/users/${userId}`)
      user.value = response.data
    } catch (err) {
      error.value = 'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥'
    } finally {
      loading.value = false
    }
  }
  
  // ç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨è·å–æ•°æ®
  onMounted(() => {
    if (userId) {
      fetchUser()
    }
  })
  
  return {
    user,
    loading, 
    error,
    fetchUser,    // æ‰‹åŠ¨åˆ·æ–°æ•°æ®çš„æ–¹æ³•
    refresh: fetchUser
  }
}
```

**åœ¨ç»„ä»¶ä¸­ä½¿ç”¨**ï¼š
```javascript
// UserProfile.vue
<template>
  <div>
    <div v-if="loading">æ­£åœ¨åŠ è½½ç”¨æˆ·ä¿¡æ¯...</div>
    <div v-else-if="error">{{ error }}</div>
    <div v-else-if="user">
      <h2>{{ user.name }}</h2>
      <p>{{ user.email }}</p>
      <button @click="refresh">åˆ·æ–°</button>
    </div>
  </div>
</template>

<script>
import { useUserData } from '@/composables/useUserData'

export default {
  props: ['userId'],
  setup(props) {
    // ä½¿ç”¨å¯å¤ç”¨çš„æ•°æ®é€»è¾‘
    const { user, loading, error, refresh } = useUserData(props.userId)
    
    return {
      user,
      loading,
      error, 
      refresh
    }
  }
}
</script>
```

### 2.3 åœ¨Vueé¡¹ç›®ä¸­æŒ‚è½½Axios


**æ–¹æ³•ä¸€ï¼šå…¨å±€æŒ‚è½½ï¼ˆVue2ï¼‰**
```javascript
// main.js
import axios from 'axios'

// é…ç½®åŸºç¡€URL
axios.defaults.baseURL = 'https://api.example.com'

// æŒ‚è½½åˆ°VueåŸå‹ä¸Šï¼Œç»„ä»¶ä¸­å¯ä»¥ç”¨this.$http
Vue.prototype.$http = axios

// ç»„ä»¶ä¸­ä½¿ç”¨
this.$http.get('/users').then(response => {
  // å¤„ç†æ•°æ®
})
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨provide/injectï¼ˆVue3ï¼‰**
```javascript
// main.js
import { createApp } from 'vue'
import axios from 'axios'

const app = createApp(App)

// å…¨å±€æä¾›axioså®ä¾‹
app.provide('$http', axios)

// ç»„ä»¶ä¸­ä½¿ç”¨
import { inject } from 'vue'

export default {
  setup() {
    const $http = inject('$http')
    
    const loadData = async () => {
      const response = await $http.get('/api/data')
      return response.data
    }
    
    return { loadData }
  }
}
```

### 2.4 ä¸VuexçŠ¶æ€ç®¡ç†ç»“åˆ


**æ ¸å¿ƒæ€è·¯**ï¼šæŠŠHTTPè¯·æ±‚æ”¾åœ¨Vuexçš„actionsä¸­ï¼Œè®©å¤šä¸ªç»„ä»¶å…±äº«æ•°æ®

```javascript
// store/modules/user.js
const state = {
  userInfo: null,
  loading: false,
  error: null
}

const mutations = {
  SET_LOADING(state, loading) {
    state.loading = loading
  },
  SET_USER_INFO(state, userInfo) {
    state.userInfo = userInfo
  },
  SET_ERROR(state, error) {
    state.error = error
  }
}

const actions = {
  // è·å–ç”¨æˆ·ä¿¡æ¯çš„action
  async fetchUserInfo({ commit }, userId) {
    try {
      commit('SET_LOADING', true)
      commit('SET_ERROR', null)
      
      const response = await this.$axios.get(`/api/users/${userId}`)
      commit('SET_USER_INFO', response.data)
    } catch (error) {
      commit('SET_ERROR', 'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥')
    } finally {
      commit('SET_LOADING', false)
    }
  }
}

// ç»„ä»¶ä¸­ä½¿ç”¨
export default {
  computed: {
    ...mapState('user', ['userInfo', 'loading', 'error'])
  },
  methods: {
    ...mapActions('user', ['fetchUserInfo'])
  },
  mounted() {
    this.fetchUserInfo(this.$route.params.id)
  }
}
```

---

## 3. ğŸ”µ Reactç»„ä»¶ä¸­çš„ä½¿ç”¨æ¨¡å¼


### 3.1 useEffect Hookä¸­çš„åŸºç¡€ä½¿ç”¨


**æ ¸å¿ƒç†å¿µ**ï¼šç”¨useEffectæ¨¡æ‹Ÿç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨åˆé€‚çš„æ—¶æœºå‘èµ·è¯·æ±‚

```javascript
import { useState, useEffect } from 'react'
import axios from 'axios'

function UserProfile({ userId }) {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(null)
  
  useEffect(() => {
    // å®šä¹‰å¼‚æ­¥å‡½æ•°
    const fetchUser = async () => {
      try {
        setLoading(true)
        setError(null)
        const response = await axios.get(`/api/users/${userId}`)
        setUser(response.data)
      } catch (err) {
        setError('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥')
      } finally {
        setLoading(false)
      }
    }
    
    if (userId) {
      fetchUser()
    }
  }, [userId]) // å½“userIdå˜åŒ–æ—¶é‡æ–°è¯·æ±‚
  
  if (loading) return <div>æ­£åœ¨åŠ è½½...</div>
  if (error) return <div>é”™è¯¯ï¼š{error}</div>
  if (!user) return <div>ç”¨æˆ·ä¸å­˜åœ¨</div>
  
  return (
    <div>
      <h2>{user.name}</h2>
      <p>{user.email}</p>
    </div>
  )
}
```

### 3.2 è‡ªå®šä¹‰Hookå°è£…


**æ ¸å¿ƒæ€è·¯**ï¼šæŠŠè¯·æ±‚é€»è¾‘æŠ½å–åˆ°è‡ªå®šä¹‰Hookä¸­ï¼Œè®©å¤šä¸ªç»„ä»¶å¤ç”¨

```javascript
// hooks/useApi.js - é€šç”¨çš„APIè¯·æ±‚Hook
import { useState, useEffect, useCallback } from 'react'
import axios from 'axios'

export function useApi(url, options = {}) {
  const [data, setData] = useState(null)
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)
  
  // å‘èµ·è¯·æ±‚çš„å‡½æ•°
  const request = useCallback(async (customUrl = url) => {
    try {
      setLoading(true)
      setError(null)
      const response = await axios.get(customUrl)
      setData(response.data)
      return response.data
    } catch (err) {
      setError(err.message)
      throw err
    } finally {
      setLoading(false)
    }
  }, [url])
  
  // æ ¹æ®é…ç½®å†³å®šæ˜¯å¦è‡ªåŠ¨è¯·æ±‚
  useEffect(() => {
    if (options.immediate !== false && url) {
      request()
    }
  }, [request, options.immediate, url])
  
  return {
    data,
    loading,
    error,
    request,    // æ‰‹åŠ¨è§¦å‘è¯·æ±‚
    refetch: () => request(), // é‡æ–°è·å–æ•°æ®
  }
}

// ç‰¹å®šçš„ç”¨æˆ·æ•°æ®Hook
export function useUserData(userId) {
  return useApi(userId ? `/api/users/${userId}` : null)
}
```

**åœ¨ç»„ä»¶ä¸­ä½¿ç”¨**ï¼š
```javascript
import { useUserData } from '../hooks/useApi'

function UserProfile({ userId }) {
  const { data: user, loading, error, refetch } = useUserData(userId)
  
  if (loading) return <div>åŠ è½½ä¸­...</div>
  if (error) return <div>é”™è¯¯ï¼š{error}</div>
  
  return (
    <div>
      <h2>{user?.name}</h2>
      <p>{user?.email}</p>
      <button onClick={refetch}>åˆ·æ–°</button>
    </div>
  )
}
```

### 3.3 ç»„ä»¶å¸è½½æ—¶çš„æ¸…ç†


**ä¸ºä»€ä¹ˆè¦æ¸…ç†**ï¼šç»„ä»¶å¸è½½åï¼Œå¦‚æœè¯·æ±‚è¿˜åœ¨è¿›è¡Œï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼

```javascript
import { useState, useEffect, useRef } from 'react'
import axios from 'axios'

function UserProfile({ userId }) {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(false)
  
  // ç”¨äºå–æ¶ˆè¯·æ±‚çš„æ ‡è®°
  const cancelTokenRef = useRef()
  
  useEffect(() => {
    const fetchUser = async () => {
      try {
        setLoading(true)
        
        // åˆ›å»ºå–æ¶ˆä»¤ç‰Œ
        const cancelToken = axios.CancelToken.source()
        cancelTokenRef.current = cancelToken
        
        const response = await axios.get(`/api/users/${userId}`, {
          cancelToken: cancelToken.token
        })
        
        setUser(response.data)
      } catch (error) {
        if (!axios.isCancel(error)) {
          console.error('è¯·æ±‚å¤±è´¥:', error)
        }
      } finally {
        setLoading(false)
      }
    }
    
    if (userId) {
      fetchUser()
    }
    
    // æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚
    return () => {
      if (cancelTokenRef.current) {
        cancelTokenRef.current.cancel('ç»„ä»¶å·²å¸è½½')
      }
    }
  }, [userId])
  
  // ç»„ä»¶render...
}
```

### 3.4 ä¸ReduxçŠ¶æ€ç®¡ç†ç»“åˆ


**æ ¸å¿ƒæ€è·¯**ï¼šæŠŠå¼‚æ­¥è¯·æ±‚æ”¾åœ¨Reduxçš„actionä¸­ï¼Œç”¨middlewareå¤„ç†

```javascript
// store/userSlice.js (Redux Toolkit)
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'
import axios from 'axios'

// å¼‚æ­¥actionï¼šè·å–ç”¨æˆ·ä¿¡æ¯
export const fetchUserInfo = createAsyncThunk(
  'user/fetchUserInfo',
  async (userId, { rejectWithValue }) => {
    try {
      const response = await axios.get(`/api/users/${userId}`)
      return response.data
    } catch (error) {
      return rejectWithValue(error.message)
    }
  }
)

const userSlice = createSlice({
  name: 'user',
  initialState: {
    userInfo: null,
    loading: false,
    error: null
  },
  reducers: {},
  extraReducers: (builder) => {
    builder
      .addCase(fetchUserInfo.pending, (state) => {
        state.loading = true
        state.error = null
      })
      .addCase(fetchUserInfo.fulfilled, (state, action) => {
        state.loading = false
        state.userInfo = action.payload
      })
      .addCase(fetchUserInfo.rejected, (state, action) => {
        state.loading = false
        state.error = action.payload
      })
  }
})

// ç»„ä»¶ä¸­ä½¿ç”¨
import { useSelector, useDispatch } from 'react-redux'
import { fetchUserInfo } from '../store/userSlice'

function UserProfile({ userId }) {
  const dispatch = useDispatch()
  const { userInfo, loading, error } = useSelector(state => state.user)
  
  useEffect(() => {
    if (userId) {
      dispatch(fetchUserInfo(userId))
    }
  }, [dispatch, userId])
  
  // ç»„ä»¶render...
}
```

---

## 4. ğŸ”§ é€šç”¨ç»„ä»¶ä½¿ç”¨æœ€ä½³å®è·µ


### 4.1 æ¡ä»¶è¯·æ±‚å¤„ç†


**ä»€ä¹ˆæ˜¯æ¡ä»¶è¯·æ±‚**ï¼šåªæœ‰æ»¡è¶³æŸäº›æ¡ä»¶æ—¶æ‰å‘èµ·è¯·æ±‚

```javascript
// Vueç¤ºä¾‹ï¼šåªæœ‰ç”¨æˆ·IDå­˜åœ¨ä¸”å¤§äº0æ—¶æ‰è¯·æ±‚
export default {
  props: ['userId'],
  watch: {
    userId: {
      immediate: true,
      handler(newUserId) {
        // æ¡ä»¶æ£€æŸ¥
        if (newUserId && newUserId > 0) {
          this.fetchUserData(newUserId)
        } else {
          this.user = null  // æ¸…ç©ºä¹‹å‰çš„æ•°æ®
        }
      }
    }
  }
}

// Reactç¤ºä¾‹ï¼šæƒé™æ£€æŸ¥åå†è¯·æ±‚
function UserProfile({ userId, hasPermission }) {
  const [user, setUser] = useState(null)
  
  useEffect(() => {
    // å¤šé‡æ¡ä»¶æ£€æŸ¥
    if (userId && hasPermission && userId !== 'guest') {
      fetchUserData()
    }
  }, [userId, hasPermission])
}
```

### 4.2 ä¾èµ–è¯·æ±‚å¤„ç†


**ä»€ä¹ˆæ˜¯ä¾èµ–è¯·æ±‚**ï¼šç¬¬äºŒä¸ªè¯·æ±‚ä¾èµ–ç¬¬ä¸€ä¸ªè¯·æ±‚çš„ç»“æœ

```javascript
// Reactç¤ºä¾‹ï¼šå…ˆè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå†è·å–ç”¨æˆ·çš„è®¢å•
function UserOrders({ userId }) {
  const [user, setUser] = useState(null)
  const [orders, setOrders] = useState([])
  const [loading, setLoading] = useState(false)
  
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true)
        
        // ç¬¬ä¸€æ­¥ï¼šè·å–ç”¨æˆ·ä¿¡æ¯
        const userResponse = await axios.get(`/api/users/${userId}`)
        setUser(userResponse.data)
        
        // ç¬¬äºŒæ­¥ï¼šåŸºäºç”¨æˆ·ä¿¡æ¯è·å–è®¢å•
        const ordersResponse = await axios.get(`/api/users/${userId}/orders`, {
          params: { 
            status: userResponse.data.memberLevel === 'VIP' ? 'all' : 'active'
          }
        })
        setOrders(ordersResponse.data)
        
      } catch (error) {
        console.error('è·å–æ•°æ®å¤±è´¥:', error)
      } finally {
        setLoading(false)
      }
    }
    
    if (userId) {
      fetchData()
    }
  }, [userId])
}
```

### 4.3 é”™è¯¯è¾¹ç•Œå¤„ç†


**æ ¸å¿ƒæ€è·¯**ï¼šç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒç±»å‹çš„é”™è¯¯

```javascript
// é€šç”¨é”™è¯¯å¤„ç†Hook
function useApiError() {
  const [error, setError] = useState(null)
  
  const handleError = useCallback((error) => {
    if (error.response) {
      // æœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç 
      switch (error.response.status) {
        case 401:
          setError('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')
          // è·³è½¬åˆ°ç™»å½•é¡µ
          break
        case 403:
          setError('æ²¡æœ‰æƒé™è®¿é—®æ­¤å†…å®¹')
          break
        case 404:
          setError('è¯·æ±‚çš„å†…å®¹ä¸å­˜åœ¨')
          break
        case 500:
          setError('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åå†è¯•')
          break
        default:
          setError('è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥')
      }
    } else if (error.request) {
      // ç½‘ç»œé”™è¯¯
      setError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®')
    } else {
      // å…¶ä»–é”™è¯¯
      setError('å‘ç”ŸæœªçŸ¥é”™è¯¯')
    }
  }, [])
  
  const clearError = useCallback(() => {
    setError(null)
  }, [])
  
  return { error, handleError, clearError }
}
```

---

## 5. ğŸ’¼ é¡¹ç›®å®æˆ˜æ¡ˆä¾‹


### 5.1 ç”¨æˆ·ä¿¡æ¯é¡µé¢å®æˆ˜


**éœ€æ±‚æè¿°**ï¼šç”¨æˆ·è¿›å…¥é¡µé¢è‡ªåŠ¨åŠ è½½ä¸ªäººä¿¡æ¯ï¼Œå¯ä»¥ç¼–è¾‘å¹¶æäº¤æ›´æ–°

```javascript
// Vue3å®æˆ˜ç¤ºä¾‹
<template>
  <div class="user-profile">
    <!-- åŠ è½½çŠ¶æ€ -->
    <div v-if="loading" class="loading">
      <span>ğŸ”„ æ­£åœ¨åŠ è½½ç”¨æˆ·ä¿¡æ¯...</span>
    </div>
    
    <!-- é”™è¯¯çŠ¶æ€ -->
    <div v-else-if="error" class="error">
      <span>âŒ {{ error }}</span>
      <button @click="retryLoad">é‡è¯•</button>
    </div>
    
    <!-- æ­£å¸¸çŠ¶æ€ -->
    <div v-else-if="user" class="content">
      <h2>ğŸ‘¤ ä¸ªäººä¿¡æ¯</h2>
      
      <form @submit.prevent="submitForm">
        <div class="form-group">
          <label>å§“åï¼š</label>
          <input v-model="form.name" required>
        </div>
        
        <div class="form-group">
          <label>é‚®ç®±ï¼š</label>
          <input v-model="form.email" type="email" required>
        </div>
        
        <button type="submit" :disabled="submitting">
          {{ submitting ? 'ğŸ’¾ ä¿å­˜ä¸­...' : 'ğŸ’¾ ä¿å­˜' }}
        </button>
      </form>
    </div>
  </div>
</template>

<script>
import { ref, reactive, onMounted } from 'vue'
import axios from 'axios'

export default {
  setup() {
    // æ•°æ®çŠ¶æ€
    const user = ref(null)
    const loading = ref(false)
    const error = ref(null)
    const submitting = ref(false)
    
    // è¡¨å•æ•°æ®
    const form = reactive({
      name: '',
      email: ''
    })
    
    // åŠ è½½ç”¨æˆ·æ•°æ®
    const loadUserData = async () => {
      try {
        loading.value = true
        error.value = null
        
        const response = await axios.get('/api/user/profile')
        user.value = response.data
        
        // å¡«å……è¡¨å•
        form.name = response.data.name
        form.email = response.data.email
        
      } catch (err) {
        error.value = err.response?.data?.message || 'åŠ è½½å¤±è´¥'
      } finally {
        loading.value = false
      }
    }
    
    // æäº¤è¡¨å•
    const submitForm = async () => {
      try {
        submitting.value = true
        
        const response = await axios.put('/api/user/profile', {
          name: form.name,
          email: form.email
        })
        
        user.value = response.data
        alert('âœ… ä¿å­˜æˆåŠŸï¼')
        
      } catch (err) {
        alert('âŒ ä¿å­˜å¤±è´¥ï¼š' + (err.response?.data?.message || 'æœªçŸ¥é”™è¯¯'))
      } finally {
        submitting.value = false
      }
    }
    
    // é‡è¯•åŠ è½½
    const retryLoad = () => {
      loadUserData()
    }
    
    // ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æ•°æ®
    onMounted(() => {
      loadUserData()
    })
    
    return {
      user,
      loading,
      error,
      submitting,
      form,
      submitForm,
      retryLoad
    }
  }
}
</script>
```

### 5.2 å®æ—¶æœç´¢ç»„ä»¶å®æˆ˜


**éœ€æ±‚æè¿°**ï¼šç”¨æˆ·è¾“å…¥æœç´¢è¯æ—¶å®æ—¶æ˜¾ç¤ºæœç´¢ç»“æœï¼Œæ”¯æŒé˜²æŠ–

```javascript
// Reactå®æˆ˜ç¤ºä¾‹
import { useState, useEffect, useMemo, useCallback } from 'react'
import axios from 'axios'

function SearchComponent() {
  const [searchTerm, setSearchTerm] = useState('')
  const [results, setResults] = useState([])
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)
  
  // é˜²æŠ–æœç´¢å‡½æ•°
  const debouncedSearch = useMemo(() => {
    const timeoutId = null
    
    return (term) => {
      if (timeoutId) {
        clearTimeout(timeoutId)
      }
      
      setTimeout(async () => {
        if (!term.trim()) {
          setResults([])
          return
        }
        
        try {
          setLoading(true)
          setError(null)
          
          const response = await axios.get('/api/search', {
            params: { q: term, limit: 10 }
          })
          
          setResults(response.data)
        } catch (err) {
          setError('æœç´¢å¤±è´¥ï¼Œè¯·é‡è¯•')
          setResults([])
        } finally {
          setLoading(false)
        }
      }, 300) // 300msé˜²æŠ–
    }
  }, [])
  
  // æœç´¢è¯å˜åŒ–æ—¶è§¦å‘æœç´¢
  useEffect(() => {
    debouncedSearch(searchTerm)
  }, [searchTerm, debouncedSearch])
  
  return (
    <div className="search-component">
      <div className="search-box">
        <input
          type="text"
          placeholder="ğŸ” è¾“å…¥æœç´¢å…³é”®è¯..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>
      
      <div className="search-results">
        {loading && <div>ğŸ”„ æœç´¢ä¸­...</div>}
        
        {error && (
          <div className="error">âŒ {error}</div>
        )}
        
        {results.length > 0 && (
          <ul>
            {results.map(item => (
              <li key={item.id}>
                <h4>{item.title}</h4>
                <p>{item.description}</p>
              </li>
            ))}
          </ul>
        )}
        
        {!loading && !error && searchTerm && results.length === 0 && (
          <div>ğŸ˜” æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç»“æœ</div>
        )}
      </div>
    </div>
  )
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ è¯·æ±‚æ—¶æœºï¼šç»„ä»¶ä»€ä¹ˆæ—¶å€™å‘èµ·HTTPè¯·æ±‚
ğŸ”¸ çŠ¶æ€ç®¡ç†ï¼šloadingã€errorã€dataä¸‰ç§åŸºæœ¬çŠ¶æ€
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸï¼šåœ¨åˆé€‚çš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µå¤„ç†è¯·æ±‚
ğŸ”¸ èµ„æºæ¸…ç†ï¼šç»„ä»¶é”€æ¯æ—¶å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šç»Ÿä¸€å¤„ç†ç½‘ç»œé”™è¯¯å’Œä¸šåŠ¡é”™è¯¯
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Vue vs Reactçš„å·®å¼‚**
```
Vueç‰¹ç‚¹ï¼š
- ç”Ÿå‘½å‘¨æœŸé’©å­æ˜ç¡®ï¼ˆmountedã€createdç­‰ï¼‰
- åŒå‘æ•°æ®ç»‘å®šç®€åŒ–çŠ¶æ€æ›´æ–°
- Vuexæä¾›é›†ä¸­å¼çŠ¶æ€ç®¡ç†

Reactç‰¹ç‚¹ï¼š
- useEffectç»Ÿä¸€å¤„ç†å‰¯ä½œç”¨
- å‡½æ•°å¼ç¼–ç¨‹æ€ç»´
- è‡ªå®šä¹‰Hookä¾¿äºé€»è¾‘å¤ç”¨
```

**ğŸ”¹ ä½•æ—¶ä½¿ç”¨å…¨å±€çŠ¶æ€ç®¡ç†**
```
é€‚åˆæ”¾åœ¨Vuex/Reduxï¼š
âœ… å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çš„æ•°æ®
âœ… æ•°æ®éœ€è¦æŒä¹…åŒ–ä¿å­˜
âœ… å¤æ‚çš„æ•°æ®å…³ç³»å’Œè®¡ç®—

é€‚åˆæ”¾åœ¨ç»„ä»¶å†…éƒ¨ï¼š
âœ… åªæœ‰å½“å‰ç»„ä»¶ä½¿ç”¨çš„æ•°æ®
âœ… ä¸´æ—¶çš„UIçŠ¶æ€
âœ… ç®€å•çš„è¡¨å•æ•°æ®
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
```
å…³é”®ä¼˜åŒ–ï¼š
- é˜²æŠ–å¤„ç†ç”¨æˆ·è¾“å…¥
- å–æ¶ˆä¸å¿…è¦çš„è¯·æ±‚
- ç¼“å­˜è¯·æ±‚ç»“æœ
- æ¡ä»¶æ€§å‘èµ·è¯·æ±‚
```

### 6.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
- **ç”¨æˆ·ç®¡ç†**ï¼šç™»å½•éªŒè¯ã€ä¸ªäººä¿¡æ¯ç®¡ç†
- **æ•°æ®å±•ç¤º**ï¼šåˆ—è¡¨é¡µé¢ã€è¯¦æƒ…é¡µé¢åŠ è½½
- **è¡¨å•æäº¤**ï¼šæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤æ“ä½œ
- **å®æ—¶åŠŸèƒ½**ï¼šæœç´¢ã€ç­›é€‰ã€è‡ªåŠ¨å®Œæˆ

**ğŸ”§ å¼€å‘å®è·µ**ï¼š
- **ä»£ç å¤ç”¨**ï¼šå°è£…é€šç”¨çš„è¯·æ±‚é€»è¾‘
- **é”™è¯¯å¤„ç†**ï¼šå»ºç«‹ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **ç”¨æˆ·ä½“éªŒ**ï¼šåˆç†çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è¯·æ±‚å’Œé‡å¤æ¸²æŸ“

**æ ¸å¿ƒè®°å¿†**ï¼š
- ç»„ä»¶è¯·æ±‚è¦è€ƒè™‘æ—¶æœºã€çŠ¶æ€ã€æ¸…ç†ä¸‰ä¸ªè¦ç´ 
- Vueå’ŒReactå„æœ‰ç‰¹è‰²ï¼Œä½†æ ¸å¿ƒæ€è·¯ç›¸åŒ
- å…¨å±€çŠ¶æ€ç®¡ç†é€‚åˆå…±äº«æ•°æ®ï¼Œç»„ä»¶çŠ¶æ€é€‚åˆç§æœ‰æ•°æ®
- ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ä¼˜åŒ–æ˜¯å®æˆ˜å¼€å‘çš„é‡ä¸­ä¹‹é‡