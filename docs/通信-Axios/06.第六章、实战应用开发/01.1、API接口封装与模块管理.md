---
title: 1ã€APIæ¥å£å°è£…ä¸æ¨¡å—ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆè¦å°è£…APIæ¥å£](#1-ä¸ºä»€ä¹ˆè¦å°è£…APIæ¥å£)
2. [Axioså®ä¾‹å°è£…](#2-Axioså®ä¾‹å°è£…)
3. [APIæ¨¡å—åŒ–ç®¡ç†](#3-APIæ¨¡å—åŒ–ç®¡ç†)
4. [ç»Ÿä¸€é”™è¯¯å¤„ç†ä¸æç¤º](#4-ç»Ÿä¸€é”™è¯¯å¤„ç†ä¸æç¤º)
5. [é…ç½®é›†ä¸­ç®¡ç†](#5-é…ç½®é›†ä¸­ç®¡ç†)
6. [TypeScriptç±»å‹å®šä¹‰](#6-TypeScriptç±»å‹å®šä¹‰)
7. [å›¢é˜Ÿåä½œè§„èŒƒ](#7-å›¢é˜Ÿåä½œè§„èŒƒ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä¸ºä»€ä¹ˆè¦å°è£…APIæ¥å£


### 1.1 å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹é—®é¢˜


**ğŸ”¸ ä¸å°è£…æ—¶çš„æ··ä¹±æƒ…å†µ**
```javascript
// åˆ°å¤„éƒ½æ˜¯è¿™æ ·çš„ä»£ç ï¼Œç»´æŠ¤èµ·æ¥å¾ˆå¤´ç–¼
axios.get('http://localhost:3000/api/user/list').then(res => {
  console.log(res.data)
})

axios.post('http://localhost:3000/api/user/add', {name: 'å¼ ä¸‰'}).then(res => {
  console.log(res.data) 
})

// æœåŠ¡å™¨åœ°å€å˜äº†ï¼Œè¦æ”¹å‡ åä¸ªåœ°æ–¹...ğŸ˜­
```

**ğŸ’¡ å°è£…åçš„ä¼˜é›™**
```javascript
// æ¸…çˆ½ç®€æ´ï¼Œä¸€ç›®äº†ç„¶
userAPI.getList()
userAPI.add({name: 'å¼ ä¸‰'})

// æœåŠ¡å™¨åœ°å€å˜äº†ï¼Ÿæ”¹ä¸€ä¸ªé…ç½®å°±è¡Œï¼ğŸ‰
```

### 1.2 å°è£…è§£å†³çš„æ ¸å¿ƒé—®é¢˜


```
ğŸ¯ æ ¸å¿ƒæ”¶ç›Šï¼š
âœ… ç»Ÿä¸€ç®¡ç†ï¼šæ‰€æœ‰æ¥å£é›†ä¸­ç®¡ç†ï¼Œä¸ä¼šä¹±
âœ… å¤ç”¨æ€§å¼ºï¼šå†™ä¸€æ¬¡ï¼Œåˆ°å¤„ç”¨
âœ… ç»´æŠ¤ç®€å•ï¼šæ”¹æ¥å£åœ°å€åªéœ€è¦æ”¹ä¸€ä¸ªåœ°æ–¹
âœ… é”™è¯¯ç»Ÿä¸€ï¼šæ‰€æœ‰æ¥å£çš„é”™è¯¯å¤„ç†éƒ½ä¸€æ ·
âœ… ç±»å‹å®‰å…¨ï¼šé…åˆTypeScriptï¼Œå†™é”™äº†ç«‹é©¬çŸ¥é“
```

---

## 2. ğŸ”§ Axioså®ä¾‹å°è£…


### 2.1 åŸºç¡€å®ä¾‹åˆ›å»º


**ğŸ”¸ ä¸ºä»€ä¹ˆè¦åˆ›å»ºå®ä¾‹ï¼Ÿ**
> æŠŠaxiosæƒ³è±¡æˆä¸€ä¸ªå·¥å‚ï¼Œæˆ‘ä»¬è¦å®šåˆ¶è‡ªå·±çš„"ç”Ÿäº§çº¿"ï¼Œè®¾ç½®å¥½é»˜è®¤é…ç½®ï¼Œè¿™æ ·åé¢ç”Ÿäº§çš„æ¯ä¸ªè¯·æ±‚éƒ½æŒ‰æˆ‘ä»¬çš„æ ‡å‡†æ¥ã€‚

```javascript
// utils/request.js
import axios from 'axios'

// åˆ›å»ºaxioså®ä¾‹ - å°±åƒå»ºç«‹è‡ªå·±çš„è¯·æ±‚å·¥å‚
const request = axios.create({
  baseURL: 'http://localhost:3000/api', // åŸºç¡€åœ°å€ï¼Œåé¢æ‰€æœ‰è¯·æ±‚éƒ½ä¼šåŠ ä¸Šè¿™ä¸ªå‰ç¼€
  timeout: 5000, // 5ç§’è¶…æ—¶ï¼Œé¿å…ç”¨æˆ·ç­‰å¤ªä¹…
  headers: {
    'Content-Type': 'application/json' // å‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬å‘é€çš„æ˜¯JSONæ•°æ®
  }
})
```

### 2.2 è¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨å¤„ç†Token


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ**
> æ‹¦æˆªå™¨å°±åƒæœºåœºå®‰æ£€ï¼Œæ¯ä¸ªè¯·æ±‚å‡ºå‘å‰éƒ½è¦ç»è¿‡"å®‰æ£€"ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»Ÿä¸€å¤„ç†ä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚è‡ªåŠ¨å¸¦ä¸Šç”¨æˆ·çš„èº«ä»½è¯æ˜(Token)ã€‚

```javascript
// è¯·æ±‚æ‹¦æˆªå™¨ - æ¯ä¸ªè¯·æ±‚å‘å‡ºå‰éƒ½ä¼šç»è¿‡è¿™é‡Œ
request.interceptors.request.use(
  config => {
    // ä»æœ¬åœ°å­˜å‚¨è·å–token
    const token = localStorage.getItem('token')
    
    if (token) {
      // è‡ªåŠ¨åœ¨è¯·æ±‚å¤´åŠ ä¸Štokenï¼Œå°±åƒè‡ªåŠ¨å‡ºç¤ºèº«ä»½è¯
      config.headers.Authorization = `Bearer ${token}`
    }
    
    console.log('è¯·æ±‚å‘å‡º:', config.url)
    return config
  },
  error => {
    console.error('è¯·æ±‚å‡ºé”™:', error)
    return Promise.reject(error)
  }
)
```

### 2.3 å“åº”æ‹¦æˆªå™¨ - ç»Ÿä¸€å¤„ç†è¿”å›æ•°æ®


**ğŸ”¸ å“åº”æ‹¦æˆªå™¨çš„ä½œç”¨**
> å°±åƒå¿«é€’å‘˜é€åŒ…è£¹ï¼Œä¸ç®¡ä»€ä¹ˆå¿«é€’éƒ½æŒ‰ç»Ÿä¸€æ ‡å‡†å¤„ç†ï¼šæ£€æŸ¥åŒ…è£…æ˜¯å¦å®Œå¥½ï¼Œç­¾æ”¶æˆ–æ‹’æ”¶ã€‚

```javascript
// å“åº”æ‹¦æˆªå™¨ - æ¯ä¸ªå“åº”å›æ¥éƒ½ä¼šç»è¿‡è¿™é‡Œ
request.interceptors.response.use(
  response => {
    // æœåŠ¡å™¨è¿”å›çš„æ•°æ®åœ¨response.dataé‡Œ
    const { code, data, message } = response.data
    
    // æ ¹æ®åç«¯çº¦å®šçš„çŠ¶æ€ç åˆ¤æ–­
    if (code === 200) {
      return data // æˆåŠŸæ—¶ç›´æ¥è¿”å›æ•°æ®éƒ¨åˆ†
    } else {
      // ä¸šåŠ¡é”™è¯¯ï¼Œæ¯”å¦‚ç”¨æˆ·åå·²å­˜åœ¨
      console.error('ä¸šåŠ¡é”™è¯¯:', message)
      return Promise.reject(new Error(message))
    }
  },
  error => {
    // ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨é”™è¯¯
    let errorMessage = 'è¯·æ±‚å¤±è´¥'
    
    if (error.response) {
      // æœåŠ¡å™¨æœ‰å“åº”ï¼Œä½†çŠ¶æ€ç ä¸æ˜¯2xx
      switch (error.response.status) {
        case 401:
          errorMessage = 'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'
          // æ¸…é™¤tokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
          localStorage.removeItem('token')
          window.location.href = '/login'
          break
        case 403:
          errorMessage = 'æ²¡æœ‰æƒé™è®¿é—®'
          break
        case 404:
          errorMessage = 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨'
          break
        case 500:
          errorMessage = 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
          break
      }
    } else if (error.code === 'ECONNABORTED') {
      errorMessage = 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•'
    }
    
    console.error('è¯·æ±‚é”™è¯¯:', errorMessage)
    return Promise.reject(new Error(errorMessage))
  }
)
```

### 2.4 å°è£…é€šç”¨è¯·æ±‚æ–¹æ³•


```javascript
// å°è£…GETè¯·æ±‚
export const get = (url, params = {}) => {
  return request({
    method: 'GET',
    url,
    params // GETè¯·æ±‚å‚æ•°æ”¾åœ¨paramsé‡Œ
  })
}

// å°è£…POSTè¯·æ±‚
export const post = (url, data = {}) => {
  return request({
    method: 'POST',
    url,
    data // POSTè¯·æ±‚å‚æ•°æ”¾åœ¨dataé‡Œ
  })
}

// å°è£…PUTè¯·æ±‚
export const put = (url, data = {}) => {
  return request({
    method: 'PUT',
    url,
    data
  })
}

// å°è£…DELETEè¯·æ±‚
export const del = (url, params = {}) => {
  return request({
    method: 'DELETE',
    url,
    params
  })
}

// é€šç”¨è¯·æ±‚æ–¹æ³• - å¯ä»¥å‘é€ä»»ä½•ç±»å‹çš„è¯·æ±‚
export default request
```

---

## 3. ğŸ“¦ APIæ¨¡å—åŒ–ç®¡ç†


### 3.1 æŒ‰ä¸šåŠ¡æ¨¡å—ç»„ç»‡API


**ğŸ”¸ ä¸ºä»€ä¹ˆè¦æ¨¡å—åŒ–ï¼Ÿ**
> å°±åƒæ•´ç†è¡£æŸœï¼ŒæŠŠå¤è£…ã€å†¬è£…åˆ†å¼€æ”¾ï¼Œç”¨çš„æ—¶å€™å¥½æ‰¾ã€‚APIä¹Ÿä¸€æ ·ï¼Œç”¨æˆ·ç›¸å…³çš„æ”¾ä¸€èµ·ï¼Œå•†å“ç›¸å…³çš„æ”¾ä¸€èµ·ã€‚

```
é¡¹ç›®ç»“æ„ï¼š
src/
  api/
    â”œâ”€â”€ index.js        # ç»Ÿä¸€å‡ºå£æ–‡ä»¶
    â”œâ”€â”€ user.js         # ç”¨æˆ·ç›¸å…³æ¥å£
    â”œâ”€â”€ product.js      # å•†å“ç›¸å…³æ¥å£
    â”œâ”€â”€ order.js        # è®¢å•ç›¸å…³æ¥å£
    â””â”€â”€ common.js       # å…¬å…±æ¥å£
```

### 3.2 ç”¨æˆ·æ¨¡å—APIå°è£…


```javascript
// api/user.js
import { get, post, put, del } from '@/utils/request'

// ç”¨æˆ·ç›¸å…³çš„æ‰€æœ‰æ¥å£
export const userAPI = {
  // è·å–ç”¨æˆ·åˆ—è¡¨
  getList(params = {}) {
    return get('/user/list', params)
  },
  
  // æ ¹æ®IDè·å–ç”¨æˆ·è¯¦æƒ…
  getById(id) {
    return get(`/user/${id}`)
  },
  
  // æ–°å¢ç”¨æˆ·
  add(data) {
    return post('/user/add', data)
  },
  
  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  update(id, data) {
    return put(`/user/${id}`, data)
  },
  
  // åˆ é™¤ç”¨æˆ·
  delete(id) {
    return del(`/user/${id}`)
  },
  
  // ç”¨æˆ·ç™»å½•
  login(data) {
    return post('/user/login', data)
  },
  
  // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
  getCurrentUser() {
    return get('/user/current')
  }
}
```

### 3.3 å•†å“æ¨¡å—APIå°è£…


```javascript
// api/product.js
import { get, post, put, del } from '@/utils/request'

export const productAPI = {
  // è·å–å•†å“åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œæœç´¢ï¼‰
  getList(params = {}) {
    return get('/product/list', {
      page: 1,
      pageSize: 10,
      ...params // åˆå¹¶ä¼ å…¥çš„å‚æ•°
    })
  },
  
  // è·å–å•†å“è¯¦æƒ…
  getDetail(id) {
    return get(`/product/${id}`)
  },
  
  // æŒ‰åˆ†ç±»è·å–å•†å“
  getByCategory(categoryId, params = {}) {
    return get(`/product/category/${categoryId}`, params)
  },
  
  // æœç´¢å•†å“
  search(keyword, params = {}) {
    return get('/product/search', {
      keyword,
      ...params
    })
  }
}
```

### 3.4 è®¢å•æ¨¡å—APIå°è£…


```javascript
// api/order.js
import { get, post, put } from '@/utils/request'

export const orderAPI = {
  // åˆ›å»ºè®¢å•
  create(data) {
    return post('/order/create', data)
  },
  
  // è·å–æˆ‘çš„è®¢å•åˆ—è¡¨
  getMyOrders(params = {}) {
    return get('/order/my', params)
  },
  
  // è·å–è®¢å•è¯¦æƒ…
  getDetail(orderId) {
    return get(`/order/${orderId}`)
  },
  
  // å–æ¶ˆè®¢å•
  cancel(orderId, reason) {
    return put(`/order/${orderId}/cancel`, { reason })
  },
  
  // ç¡®è®¤æ”¶è´§
  confirm(orderId) {
    return put(`/order/${orderId}/confirm`)
  }
}
```

### 3.5 ç»Ÿä¸€å‡ºå£ç®¡ç†


```javascript
// api/index.js - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰API
import { userAPI } from './user'
import { productAPI } from './product'
import { orderAPI } from './order'

// ç»Ÿä¸€å¯¼å‡ºï¼Œä½¿ç”¨æ—¶æ›´æ–¹ä¾¿
export {
  userAPI,
  productAPI,
  orderAPI
}

// æˆ–è€…è¿™æ ·å¯¼å‡º
export default {
  user: userAPI,
  product: productAPI,
  order: orderAPI
}
```

---

## 4. ğŸš¨ ç»Ÿä¸€é”™è¯¯å¤„ç†ä¸æç¤º


### 4.1 é”™è¯¯åˆ†ç±»ä¸å¤„ç†ç­–ç•¥


**ğŸ”¸ é”™è¯¯ç±»å‹åˆ†æ**
```
å¸¸è§é”™è¯¯ç±»å‹ï¼š
ğŸ”´ ç½‘ç»œé”™è¯¯ï¼šæ–­ç½‘ã€è¶…æ—¶ã€æœåŠ¡å™¨æŒ‚äº†
ğŸŸ¡ ä¸šåŠ¡é”™è¯¯ï¼šç”¨æˆ·åå·²å­˜åœ¨ã€åº“å­˜ä¸è¶³
ğŸŸ¢ å‚æ•°é”™è¯¯ï¼šå¿…å¡«å‚æ•°ä¸ºç©ºã€æ ¼å¼ä¸æ­£ç¡®
ğŸ”µ æƒé™é”™è¯¯ï¼šæœªç™»å½•ã€æƒé™ä¸è¶³
```

### 4.2 é”™è¯¯ç æ˜ å°„æœºåˆ¶


```javascript
// utils/errorHandler.js
// é”™è¯¯ç å¯¹åº”çš„æç¤ºä¿¡æ¯
const ERROR_MESSAGES = {
  // é€šç”¨é”™è¯¯
  400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
  401: 'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',
  403: 'æ²¡æœ‰æƒé™æ‰§è¡Œæ­¤æ“ä½œ',
  404: 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨',
  500: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•',
  
  // ä¸šåŠ¡é”™è¯¯ç 
  10001: 'ç”¨æˆ·åå·²å­˜åœ¨',
  10002: 'å¯†ç é”™è¯¯',
  10003: 'ç”¨æˆ·ä¸å­˜åœ¨',
  20001: 'å•†å“åº“å­˜ä¸è¶³',
  20002: 'å•†å“å·²ä¸‹æ¶',
  30001: 'è®¢å•ä¸å­˜åœ¨',
  30002: 'è®¢å•çŠ¶æ€å¼‚å¸¸'
}

// ç»Ÿä¸€é”™è¯¯å¤„ç†å‡½æ•°
export const handleError = (error) => {
  let message = 'æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'
  
  if (error.response) {
    // æœåŠ¡å™¨å“åº”çš„é”™è¯¯
    const { status, data } = error.response
    message = ERROR_MESSAGES[status] || ERROR_MESSAGES[data.code] || data.message
  } else if (error.code === 'ECONNABORTED') {
    // è¯·æ±‚è¶…æ—¶
    message = 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥'
  } else if (error.message) {
    message = error.message
  }
  
  // æ˜¾ç¤ºé”™è¯¯æç¤ºï¼ˆè¿™é‡Œå¯ä»¥é›†æˆUIåº“çš„æç¤ºç»„ä»¶ï¼‰
  console.error('é”™è¯¯ä¿¡æ¯:', message)
  // å¦‚æœä½¿ç”¨Element UI: this.$message.error(message)
  // å¦‚æœä½¿ç”¨Ant Design: message.error(message)
  
  return message
}
```

### 4.3 å…¨å±€é”™è¯¯æç¤ºé›†æˆ


```javascript
// utils/request.js ä¸­çš„å“åº”æ‹¦æˆªå™¨æ›´æ–°
import { handleError } from './errorHandler'

request.interceptors.response.use(
  response => {
    const { code, data, message } = response.data
    
    if (code === 200) {
      return data
    } else {
      // ä½¿ç”¨ç»Ÿä¸€é”™è¯¯å¤„ç†
      const errorMessage = handleError({ response: { data: { code, message } } })
      return Promise.reject(new Error(errorMessage))
    }
  },
  error => {
    // ç½‘ç»œé”™è¯¯ä¹Ÿä½¿ç”¨ç»Ÿä¸€å¤„ç†
    const errorMessage = handleError(error)
    return Promise.reject(new Error(errorMessage))
  }
)
```

---

## 5. âš™ï¸ é…ç½®é›†ä¸­ç®¡ç†


### 5.1 ç¯å¢ƒé…ç½®ç®¡ç†


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦ç¯å¢ƒé…ç½®ï¼Ÿ**
> å¼€å‘æ—¶ç”¨æµ‹è¯•æœåŠ¡å™¨ï¼Œä¸Šçº¿æ—¶ç”¨æ­£å¼æœåŠ¡å™¨ï¼Œä¸èƒ½å†™æ­»åœ¨ä»£ç é‡Œï¼Œè¦èƒ½çµæ´»åˆ‡æ¢ã€‚

```javascript
// config/env.js
// ä¸åŒç¯å¢ƒçš„é…ç½®
const envConfig = {
  // å¼€å‘ç¯å¢ƒ
  development: {
    baseURL: 'http://localhost:3000/api',
    timeout: 10000,
    uploadURL: 'http://localhost:3000/upload'
  },
  
  // æµ‹è¯•ç¯å¢ƒ
  test: {
    baseURL: 'http://test.example.com/api',
    timeout: 8000,
    uploadURL: 'http://test.example.com/upload'
  },
  
  // ç”Ÿäº§ç¯å¢ƒ
  production: {
    baseURL: 'https://api.example.com',
    timeout: 5000,
    uploadURL: 'https://upload.example.com'
  }
}

// æ ¹æ®å½“å‰ç¯å¢ƒè·å–é…ç½®
const currentEnv = process.env.NODE_ENV || 'development'
export const config = envConfig[currentEnv]
```

### 5.2 APIåœ°å€ç»Ÿä¸€ç®¡ç†


```javascript
// config/api.js
// æ‰€æœ‰æ¥å£åœ°å€é›†ä¸­ç®¡ç†
export const API_URLS = {
  // ç”¨æˆ·ç›¸å…³
  USER: {
    LIST: '/user/list',
    DETAIL: '/user/:id',
    ADD: '/user/add',
    UPDATE: '/user/:id',
    DELETE: '/user/:id',
    LOGIN: '/user/login',
    CURRENT: '/user/current'
  },
  
  // å•†å“ç›¸å…³
  PRODUCT: {
    LIST: '/product/list',
    DETAIL: '/product/:id',
    CATEGORY: '/product/category/:categoryId',
    SEARCH: '/product/search'
  },
  
  // è®¢å•ç›¸å…³
  ORDER: {
    CREATE: '/order/create',
    MY_ORDERS: '/order/my',
    DETAIL: '/order/:id',
    CANCEL: '/order/:id/cancel',
    CONFIRM: '/order/:id/confirm'
  }
}

// URLå‚æ•°æ›¿æ¢å·¥å…·å‡½æ•°
export const replaceParams = (url, params) => {
  let result = url
  Object.keys(params).forEach(key => {
    result = result.replace(`:${key}`, params[key])
  })
  return result
}
```

### 5.3 æ›´æ–°APIæ¨¡å—ä½¿ç”¨é…ç½®


```javascript
// api/user.js æ›´æ–°ç‰ˆæœ¬
import { get, post, put, del } from '@/utils/request'
import { API_URLS, replaceParams } from '@/config/api'

export const userAPI = {
  getList(params = {}) {
    return get(API_URLS.USER.LIST, params)
  },
  
  getById(id) {
    const url = replaceParams(API_URLS.USER.DETAIL, { id })
    return get(url)
  },
  
  update(id, data) {
    const url = replaceParams(API_URLS.USER.UPDATE, { id })
    return put(url, data)
  }
  
  // ... å…¶ä»–æ–¹æ³•
}
```

---

## 6. ğŸ”· TypeScriptç±»å‹å®šä¹‰


### 6.1 åŸºç¡€ç±»å‹å®šä¹‰


**ğŸ”¸ ä¸ºä»€ä¹ˆè¦ç”¨TypeScriptï¼Ÿ**
> å†™ä»£ç æ—¶IDEä¼šæç¤ºä½ ï¼Œå‚æ•°ç±»å‹å¯¹ä¸å¯¹ï¼Œæœ‰æ²¡æœ‰å°‘ä¼ å‚æ•°ï¼Œå°±åƒæœ‰ä¸ªè€å¸ˆåœ¨æ—è¾¹æŒ‡å¯¼ï¼Œå‡å°‘å‡ºé”™ã€‚

```typescript
// types/api.ts
// é€šç”¨å“åº”ç±»å‹
export interface ApiResponse<T = any> {
  code: number
  message: string
  data: T
}

// åˆ†é¡µå‚æ•°ç±»å‹
export interface PageParams {
  page?: number
  pageSize?: number
  keyword?: string
}

// åˆ†é¡µå“åº”ç±»å‹
export interface PageResponse<T> {
  list: T[]
  total: number
  page: number
  pageSize: number
}
```

### 6.2 ç”¨æˆ·æ¨¡å—ç±»å‹å®šä¹‰


```typescript
// types/user.ts
// ç”¨æˆ·ä¿¡æ¯ç±»å‹
export interface User {
  id: number
  username: string
  email: string
  phone?: string
  avatar?: string
  createTime: string
  status: 1 | 0 // 1-å¯ç”¨ï¼Œ0-ç¦ç”¨
}

// ç™»å½•å‚æ•°ç±»å‹
export interface LoginParams {
  username: string
  password: string
  captcha?: string
}

// ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢å‚æ•°
export interface UserListParams extends PageParams {
  status?: 1 | 0
  startTime?: string
  endTime?: string
}
```

### 6.3 å¸¦ç±»å‹çš„APIå°è£…


```typescript
// api/user.ts
import { get, post, put, del } from '@/utils/request'
import { User, LoginParams, UserListParams } from '@/types/user'
import { ApiResponse, PageResponse } from '@/types/api'

export const userAPI = {
  // è·å–ç”¨æˆ·åˆ—è¡¨ - æ˜ç¡®è¿”å›ç±»å‹
  getList(params: UserListParams = {}): Promise<PageResponse<User>> {
    return get('/user/list', params)
  },
  
  // æ ¹æ®IDè·å–ç”¨æˆ·
  getById(id: number): Promise<User> {
    return get(`/user/${id}`)
  },
  
  // ç”¨æˆ·ç™»å½•
  login(data: LoginParams): Promise<{ token: string; user: User }> {
    return post('/user/login', data)
  },
  
  // æ–°å¢ç”¨æˆ·
  add(data: Omit<User, 'id' | 'createTime'>): Promise<User> {
    return post('/user/add', data)
  }
}
```

---

## 7. ğŸ‘¥ å›¢é˜Ÿåä½œè§„èŒƒ


### 7.1 å‘½åè§„èŒƒ


```javascript
// âœ… å¥½çš„å‘½åè§„èŒƒ
export const userAPI = {
  getList,        // è·å–åˆ—è¡¨
  getById,        // æ ¹æ®IDè·å–
  add,           // æ–°å¢
  update,        // æ›´æ–°
  delete,        // åˆ é™¤
  login,         // ç™»å½•
  logout         // ç™»å‡º
}

// âŒ ä¸å¥½çš„å‘½å
export const userAPI = {
  list,          // ä¸æ¸…æ¥šæ˜¯è·å–è¿˜æ˜¯è®¾ç½®
  user,          // å¤ªæ¨¡ç³Š
  getUserInfo,   // å†—ä½™ï¼Œåœ¨userAPIä¸‹å·²ç»çŸ¥é“æ˜¯ç”¨æˆ·ç›¸å…³
  delUser        // ä¸ç»Ÿä¸€ï¼Œåº”è¯¥ç”¨delete
}
```

### 7.2 æ³¨é‡Šè§„èŒƒ


```javascript
/**
 * ç”¨æˆ·ç›¸å…³APIæ¥å£
 * @description åŒ…å«ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥ã€ç™»å½•ç™»å‡ºç­‰åŠŸèƒ½
 */
export const userAPI = {
  /**
   * è·å–ç”¨æˆ·åˆ—è¡¨
   * @param {Object} params - æŸ¥è¯¢å‚æ•°
   * @param {number} params.page - é¡µç ï¼Œé»˜è®¤1
   * @param {number} params.pageSize - æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10
   * @param {string} params.keyword - æœç´¢å…³é”®è¯
   * @returns {Promise} è¿”å›ç”¨æˆ·åˆ—è¡¨æ•°æ®
   */
  getList(params = {}) {
    return get('/user/list', {
      page: 1,
      pageSize: 10,
      ...params
    })
  }
}
```

### 7.3 æ¥å£æ–‡æ¡£å¯¹æ¥è§„èŒƒ


```javascript
// æ¥å£çº¦å®šç¤ºä¾‹
const API_DOC = `
æ¥å£åœ°å€: GET /api/user/list
è¯·æ±‚å‚æ•°:
{
  page: number,      // é¡µç ï¼Œé»˜è®¤1
  pageSize: number,  // æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10
  keyword: string    // æœç´¢å…³é”®è¯ï¼Œå¯é€‰
}

å“åº”æ ¼å¼:
{
  code: 200,         // çŠ¶æ€ç ï¼Œ200æˆåŠŸ
  message: "success", // æç¤ºä¿¡æ¯
  data: {
    list: [...],     // ç”¨æˆ·åˆ—è¡¨
    total: 100,      // æ€»æ¡æ•°
    page: 1,         // å½“å‰é¡µç 
    pageSize: 10     // æ¯é¡µæ¡æ•°
  }
}
`
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ APIå°è£…æœ¬è´¨ï¼šæŠŠåˆ†æ•£çš„è¯·æ±‚ä»£ç é›†ä¸­ç®¡ç†ï¼Œæé«˜å¤ç”¨æ€§å’Œç»´æŠ¤æ€§
ğŸ”¸ æ¨¡å—åŒ–ç®¡ç†ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ†ç»„ï¼Œæ¯ä¸ªæ¨¡å—ç®¡å„è‡ªçš„æ¥å£
ğŸ”¸ å®ä¾‹é…ç½®ï¼šåˆ›å»ºaxioså®ä¾‹ï¼Œè®¾ç½®é»˜è®¤é…ç½®å’Œæ‹¦æˆªå™¨
ğŸ”¸ ç»Ÿä¸€å¤„ç†ï¼šé”™è¯¯å¤„ç†ã€tokenç®¡ç†ã€å“åº”æ ¼å¼ç»Ÿä¸€
ğŸ”¸ é…ç½®ç®¡ç†ï¼šç¯å¢ƒé…ç½®ã€æ¥å£åœ°å€ã€é”™è¯¯ç é›†ä¸­ç®¡ç†
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆè¦å°è£…**
```
è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š
- ä»£ç å¤ç”¨ï¼šç›¸åŒçš„è¯·æ±‚é€»è¾‘ä¸ç”¨é‡å¤å†™
- ç»Ÿä¸€ç®¡ç†ï¼šé…ç½®ã€é”™è¯¯å¤„ç†é›†ä¸­å¤„ç†  
- ç»´æŠ¤ç®€å•ï¼šä¿®æ”¹é…ç½®åªéœ€è¦æ”¹ä¸€ä¸ªåœ°æ–¹
- å›¢é˜Ÿåä½œï¼šå¤§å®¶æŒ‰åŒæ ·çš„è§„èŒƒå†™ä»£ç 
```

**ğŸ”¹ å°è£…çš„å±‚æ¬¡ç»“æ„**
```
è¯·æ±‚å±‚æ¬¡ï¼š
ç»„ä»¶è°ƒç”¨ â†’ APIæ¨¡å— â†’ è¯·æ±‚å·¥å…· â†’ axioså®ä¾‹ â†’ æœåŠ¡å™¨

æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„èŒè´£ï¼š
- ç»„ä»¶ï¼šè°ƒç”¨APIï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘
- APIæ¨¡å—ï¼šå°è£…æ¥å£ï¼Œå‚æ•°å¤„ç†  
- è¯·æ±‚å·¥å…·ï¼šç»Ÿä¸€çš„GET/POSTæ–¹æ³•
- axioså®ä¾‹ï¼šæ‹¦æˆªå™¨ã€é»˜è®¤é…ç½®
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¡ å¼€å‘æ•ˆç‡æå‡**
- å†™æ¥å£è°ƒç”¨åªéœ€è¦ä¸€è¡Œä»£ç 
- ä¸ç”¨å…³å¿ƒtokenã€é”™è¯¯å¤„ç†ç­‰ç»†èŠ‚
- æ¥å£åœ°å€å˜æ›´åªéœ€è¦æ”¹é…ç½®æ–‡ä»¶

**ğŸ”§ ä»£ç è´¨é‡ä¿éšœ**
- TypeScriptç±»å‹æ£€æŸ¥å‡å°‘é”™è¯¯
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æå‡ç”¨æˆ·ä½“éªŒ
- æ¨¡å—åŒ–ç»“æ„ä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

**ğŸ‘¥ å›¢é˜Ÿåä½œä¼˜åŒ–**
- ç»Ÿä¸€çš„ä»£ç è§„èŒƒå’Œç»“æ„
- æ¸…æ™°çš„æ¥å£æ–‡æ¡£å’Œæ³¨é‡Š
- æ–°äººæ¥æ‰‹é¡¹ç›®æ›´å®¹æ˜“ç†è§£

### 8.4 æœ€ä½³å®è·µå»ºè®®


```
ğŸ¯ å®è·µè¦ç‚¹ï¼š
âœ… å…ˆç¡®å®šå›¢é˜Ÿè§„èŒƒï¼Œå†å¼€å§‹å°è£…
âœ… ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å®Œå–„åŠŸèƒ½
âœ… é…ç½®å’Œä»£ç åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤
âœ… é”™è¯¯å¤„ç†è¦è€ƒè™‘ç”¨æˆ·ä½“éªŒ
âœ… æ–‡æ¡£å’Œæ³¨é‡Šè¦è·Ÿä¸Šä»£ç æ›´æ–°

ğŸš« é¿å…çš„å‘ï¼š
âŒ è¿‡åº¦å°è£…ï¼Œç®€å•åŠŸèƒ½å¤æ‚åŒ–
âŒ é…ç½®å†™æ­»ï¼Œä¸è€ƒè™‘ç¯å¢ƒåˆ‡æ¢
âŒ å¿½ç•¥é”™è¯¯å¤„ç†ï¼Œç”¨æˆ·ä½“éªŒå·®
âŒ ç¼ºå°‘ç±»å‹å®šä¹‰ï¼Œå®¹æ˜“å‡ºé”™
âŒ æ–‡æ¡£è¿‡æ—¶ï¼Œæ–°äººçœ‹ä¸æ‡‚
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- APIå°è£…å°±æ˜¯æŠŠé›¶æ•£çš„è¯·æ±‚æ•´ç†æˆå·¥å…·ç®±
- æ¨¡å—åŒ–ç®¡ç†è®©ä»£ç äº•äº•æœ‰æ¡
- ç»Ÿä¸€å¤„ç†è®©å¼€å‘æ›´çœå¿ƒ
- è§„èŒƒæ–‡æ¡£è®©å›¢é˜Ÿåä½œæ›´é¡ºç•…