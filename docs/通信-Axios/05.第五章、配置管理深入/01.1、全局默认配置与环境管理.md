---
title: 1ã€å…¨å±€é»˜è®¤é…ç½®ä¸ç¯å¢ƒç®¡ç†
---
## ğŸ“š ç›®å½•

1. [å…¨å±€é»˜è®¤é…ç½®æ¦‚å¿µç†è§£](#1-å…¨å±€é»˜è®¤é…ç½®æ¦‚å¿µç†è§£)
2. [axios.defaultsåŸºç¡€ç”¨æ³•](#2-axiosdefaultsåŸºç¡€ç”¨æ³•)
3. [ç¯å¢ƒç®¡ç†ç­–ç•¥](#3-ç¯å¢ƒç®¡ç†ç­–ç•¥)
4. [é…ç½®é¡¹è¯¦ç»†è§£æ](#4-é…ç½®é¡¹è¯¦ç»†è§£æ)
5. [é…ç½®ä¼˜å…ˆçº§è§„åˆ™](#5-é…ç½®ä¼˜å…ˆçº§è§„åˆ™)
6. [å®æˆ˜åº”ç”¨åœºæ™¯](#6-å®æˆ˜åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å…¨å±€é»˜è®¤é…ç½®æ¦‚å¿µç†è§£


### 1.1 ä»€ä¹ˆæ˜¯å…¨å±€é»˜è®¤é…ç½®ï¼Ÿ


**é€šä¿—ç†è§£**ï¼šå°±åƒç»™ä½ çš„æ‰‹æœºè®¾ç½®é»˜è®¤é“ƒå£°ï¼Œæ¯æ¬¡æ¥ç”µè¯éƒ½ç”¨è¿™ä¸ªé“ƒå£°ã€‚axiosçš„å…¨å±€é…ç½®å°±æ˜¯ç»™æ‰€æœ‰è¯·æ±‚è®¾ç½®é»˜è®¤è§„åˆ™ã€‚

```
ç”Ÿæ´»ä¾‹å­ï¼š
ä½ æ¯å¤©ä¸Šç­éƒ½èµ°åŒä¸€æ¡è·¯ â†’ è¿™æ˜¯ä½ çš„"é»˜è®¤è·¯çº¿"
axiosæ¯ä¸ªè¯·æ±‚éƒ½ç”¨ç›¸åŒè®¾ç½® â†’ è¿™æ˜¯"é»˜è®¤é…ç½®"

å¥½å¤„ï¼š
- ä¸ç”¨æ¯æ¬¡éƒ½é‡å¤è®¾ç½®
- ä¿æŒé¡¹ç›®çš„ä¸€è‡´æ€§
- æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å’Œä¿®æ”¹
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å…¨å±€é…ç½®ï¼Ÿ


**å®é™…é—®é¢˜**ï¼š
```javascript
// æ²¡æœ‰å…¨å±€é…ç½®æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½è¦å†™é‡å¤çš„è®¾ç½®
axios.get('http://localhost:3000/api/users', {
  timeout: 5000,
  headers: { 'Authorization': 'Bearer token123' }
})

axios.post('http://localhost:3000/api/login', data, {
  timeout: 5000,
  headers: { 'Authorization': 'Bearer token123' }
})
// é‡å¤ä»£ç å¾ˆå¤šï¼Œç»´æŠ¤å›°éš¾
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// ä½¿ç”¨å…¨å±€é…ç½®ï¼Œä¸€æ¬¡è®¾ç½®ï¼Œå¤„å¤„ç”Ÿæ•ˆ
axios.defaults.baseURL = 'http://localhost:3000/api'
axios.defaults.timeout = 5000
axios.defaults.headers.common['Authorization'] = 'Bearer token123'

// ç°åœ¨è¯·æ±‚å˜å¾—ç®€æ´
axios.get('/users')
axios.post('/login', data)
```

### 1.3 é…ç½®çš„ä½œç”¨èŒƒå›´


```
å…¨å±€é…ç½®ä½œç”¨ç¤ºæ„å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         axios.defaults          â”‚ â† å…¨å±€é»˜è®¤é…ç½®
â”‚         (å½±å“æ‰€æœ‰è¯·æ±‚)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¯·æ±‚1  â”‚  è¯·æ±‚2  â”‚  è¯·æ±‚3       â”‚ â† æ‰€æœ‰è¯·æ±‚éƒ½ä¼šç»§æ‰¿
â”‚  /users â”‚ /login  â”‚ /products   â”‚   å…¨å±€é…ç½®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. âš™ï¸ axios.defaultsåŸºç¡€ç”¨æ³•


### 2.1 åŸºç¡€é…ç½®è¯­æ³•


**æ ¸å¿ƒè¯­æ³•**ï¼š`axios.defaults.é…ç½®é¡¹ = é…ç½®å€¼`

```javascript
// æœ€å¸¸ç”¨çš„åŸºç¡€é…ç½®
axios.defaults.baseURL = 'https://api.example.com'  // åŸºç¡€URL
axios.defaults.timeout = 10000                      // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
axios.defaults.headers.common['Accept'] = 'application/json'  // é€šç”¨è¯·æ±‚å¤´
```

### 2.2 å¸¸ç”¨é…ç½®é¡¹è®¾ç½®


#### ğŸŒ åŸºç¡€URLé…ç½®


**ä½œç”¨**ï¼šè®¾ç½®æ‰€æœ‰è¯·æ±‚çš„åŸºç¡€åœ°å€ï¼Œé¿å…é‡å¤å†™å®Œæ•´URL

```javascript
// è®¾ç½®åŸºç¡€URL
axios.defaults.baseURL = 'https://api.myapp.com/v1'

// ç°åœ¨è¯·æ±‚æ—¶åªéœ€è¦å†™ç›¸å¯¹è·¯å¾„
axios.get('/users')        // å®é™…è¯·æ±‚ï¼šhttps://api.myapp.com/v1/users
axios.post('/login', data)  // å®é™…è¯·æ±‚ï¼šhttps://api.myapp.com/v1/login
```

#### â° è¶…æ—¶é…ç½®


**ä½œç”¨**ï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢è¯·æ±‚é•¿æ—¶é—´æ— å“åº”

```javascript
// è®¾ç½®10ç§’è¶…æ—¶
axios.defaults.timeout = 10000

// ç†è§£ï¼šå¦‚æœ10ç§’å†…æœåŠ¡å™¨æ²¡å“åº”ï¼Œè‡ªåŠ¨å–æ¶ˆè¯·æ±‚
```

#### ğŸ“‹ è¯·æ±‚å¤´é…ç½®


**ä½œç”¨**ï¼šè®¾ç½®æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæºå¸¦çš„è¯·æ±‚å¤´ä¿¡æ¯

```javascript
// è®¾ç½®é€šç”¨è¯·æ±‚å¤´ï¼ˆæ‰€æœ‰è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šï¼‰
axios.defaults.headers.common['Authorization'] = 'Bearer your-token'
axios.defaults.headers.common['Accept'] = 'application/json'

// è®¾ç½®POSTè¯·æ±‚ä¸“ç”¨å¤´
axios.defaults.headers.post['Content-Type'] = 'application/json'

// è®¾ç½®GETè¯·æ±‚ä¸“ç”¨å¤´
axios.defaults.headers.get['Cache-Control'] = 'no-cache'
```

### 2.3 å®Œæ•´çš„åŸºç¡€é…ç½®ç¤ºä¾‹


```javascript
// é¡¹ç›®åˆå§‹åŒ–æ—¶çš„å®Œæ•´é…ç½®
const setupAxios = () => {
  // åŸºç¡€URL
  axios.defaults.baseURL = process.env.VUE_APP_API_URL || 'http://localhost:3000/api'
  
  // è¶…æ—¶æ—¶é—´
  axios.defaults.timeout = 15000
  
  // é€šç”¨è¯·æ±‚å¤´
  axios.defaults.headers.common['Accept'] = 'application/json'
  axios.defaults.headers.common['Content-Type'] = 'application/json'
  
  // å¦‚æœæœ‰tokenï¼Œæ·»åŠ è®¤è¯å¤´
  const token = localStorage.getItem('token')
  if (token) {
    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`
  }
}

// åœ¨main.jsä¸­è°ƒç”¨
setupAxios()
```

---

## 3. ğŸŒ ç¯å¢ƒç®¡ç†ç­–ç•¥


### 3.1 ä»€ä¹ˆæ˜¯ç¯å¢ƒç®¡ç†ï¼Ÿ


**é€šä¿—ç†è§£**ï¼šå°±åƒä½ åœ¨å®¶é‡Œå’Œåœ¨å…¬å¸çš„è¡Œä¸ºä¸åŒï¼Œç¨‹åºåœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¹Ÿéœ€è¦ä¸åŒçš„é…ç½®ã€‚

```
ç¯å¢ƒå¯¹æ¯”ï¼š
å¼€å‘ç¯å¢ƒï¼ˆä½ çš„ç”µè„‘ï¼‰ï¼š
- å¯ä»¥éšä¾¿æµ‹è¯•
- é”™è¯¯ä¿¡æ¯è¯¦ç»†
- æœåŠ¡å™¨åœ°å€æ˜¯æœ¬åœ°

ç”Ÿäº§ç¯å¢ƒï¼ˆç”¨æˆ·ä½¿ç”¨ï¼‰ï¼š
- å¿…é¡»ç¨³å®šå¯é 
- é”™è¯¯ä¿¡æ¯ç®€æ´
- æœåŠ¡å™¨åœ°å€æ˜¯æ­£å¼åŸŸå
```

### 3.2 ä¸‰ç§ç¯å¢ƒé…ç½®


#### ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®


**ç‰¹ç‚¹**ï¼šæ–¹ä¾¿è°ƒè¯•ï¼Œè¯¦ç»†é”™è¯¯ä¿¡æ¯

```javascript
// å¼€å‘ç¯å¢ƒé…ç½®
if (process.env.NODE_ENV === 'development') {
  axios.defaults.baseURL = 'http://localhost:3000/api'
  axios.defaults.timeout = 30000  // å¼€å‘æ—¶å¯ä»¥é•¿ä¸€ç‚¹
  
  // å¼€å‘ç¯å¢ƒæ˜¾ç¤ºè¯¦ç»†é”™è¯¯
  axios.interceptors.response.use(
    response => response,
    error => {
      console.log('å¼€å‘ç¯å¢ƒé”™è¯¯è¯¦æƒ…ï¼š', error)
      return Promise.reject(error)
    }
  )
}
```

#### ğŸš€ ç”Ÿäº§ç¯å¢ƒé…ç½®


**ç‰¹ç‚¹**ï¼šæ€§èƒ½ä¼˜åŒ–ï¼Œç”¨æˆ·ä½“éªŒä¼˜å…ˆ

```javascript
// ç”Ÿäº§ç¯å¢ƒé…ç½®
if (process.env.NODE_ENV === 'production') {
  axios.defaults.baseURL = 'https://api.myapp.com/v1'
  axios.defaults.timeout = 10000  // ç”Ÿäº§ç¯å¢ƒè¦å¿«é€Ÿå“åº”
  
  // ç”Ÿäº§ç¯å¢ƒç®€æ´é”™è¯¯å¤„ç†
  axios.interceptors.response.use(
    response => response,
    error => {
      console.error('è¯·æ±‚å¤±è´¥')  // ç®€æ´çš„é”™è¯¯ä¿¡æ¯
      return Promise.reject(error)
    }
  )
}
```

#### ğŸ§ª æµ‹è¯•ç¯å¢ƒé…ç½®


**ç‰¹ç‚¹**ï¼šæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼Œä¾¿äºæµ‹è¯•

```javascript
// æµ‹è¯•ç¯å¢ƒé…ç½®
if (process.env.NODE_ENV === 'test') {
  axios.defaults.baseURL = 'https://test-api.myapp.com/v1'
  axios.defaults.timeout = 15000
}
```

### 3.3 ç¯å¢ƒé…ç½®çš„ç»Ÿä¸€ç®¡ç†


```javascript
// config/axios.js - ç»Ÿä¸€çš„ç¯å¢ƒé…ç½®æ–‡ä»¶
const configs = {
  development: {
    baseURL: 'http://localhost:3000/api',
    timeout: 30000,
    debug: true
  },
  production: {
    baseURL: 'https://api.myapp.com/v1',
    timeout: 10000,
    debug: false
  },
  test: {
    baseURL: 'https://test-api.myapp.com/v1',
    timeout: 15000,
    debug: true
  }
}

// æ ¹æ®å½“å‰ç¯å¢ƒè·å–é…ç½®
const currentConfig = configs[process.env.NODE_ENV] || configs.development

// åº”ç”¨é…ç½®
Object.keys(currentConfig).forEach(key => {
  if (key !== 'debug') {
    axios.defaults[key] = currentConfig[key]
  }
})
```

---

## 4. ğŸ“ é…ç½®é¡¹è¯¦ç»†è§£æ


### 4.1 baseURLè¯¦è§£


**ä½œç”¨**ï¼šè®¾ç½®è¯·æ±‚çš„åŸºç¡€URLï¼Œæ‰€æœ‰ç›¸å¯¹è·¯å¾„éƒ½ä¼šæ‹¼æ¥åœ¨å®ƒåé¢

```javascript
// è®¾ç½®åŸºç¡€URL
axios.defaults.baseURL = 'https://api.example.com/v1'

// è¯·æ±‚ç¤ºä¾‹
axios.get('/users')     // å®Œæ•´URL: https://api.example.com/v1/users
axios.get('/products')  // å®Œæ•´URL: https://api.example.com/v1/products

// æ³¨æ„äº‹é¡¹
axios.get('http://other.com/data')  // ç»å¯¹URLä¼šå¿½ç•¥baseURL
```

**å®ç”¨æŠ€å·§**ï¼š
```javascript
// åŠ¨æ€åˆ‡æ¢APIç‰ˆæœ¬
const API_VERSION = 'v2'
axios.defaults.baseURL = `https://api.example.com/${API_VERSION}`
```

### 4.2 headersè¯¦ç»†é…ç½®


**ç†è§£headers**ï¼šå°±åƒå¯„ä¿¡æ—¶åœ¨ä¿¡å°ä¸Šå†™çš„ä¿¡æ¯ï¼Œå‘Šè¯‰æœåŠ¡å™¨è¿™ä¸ªè¯·æ±‚çš„ç›¸å…³ä¿¡æ¯

```javascript
// ä¸‰ç§headersè®¾ç½®æ–¹å¼

// 1. é€šç”¨headersï¼ˆæ‰€æœ‰è¯·æ±‚éƒ½å¸¦ï¼‰
axios.defaults.headers.common['Accept'] = 'application/json'
axios.defaults.headers.common['User-Agent'] = 'MyApp/1.0'

// 2. ç‰¹å®šæ–¹æ³•çš„headers
axios.defaults.headers.post['Content-Type'] = 'application/json'
axios.defaults.headers.get['Cache-Control'] = 'no-cache'

// 3. ç›´æ¥è®¾ç½®headerså¯¹è±¡
axios.defaults.headers = {
  'Accept': 'application/json',
  'Content-Type': 'application/json',
  'Authorization': 'Bearer token123'
}
```

**å¸¸ç”¨headersè¯´æ˜**ï¼š
```javascript
// è®¤è¯ç›¸å…³
axios.defaults.headers.common['Authorization'] = 'Bearer your-jwt-token'

// å†…å®¹ç±»å‹
axios.defaults.headers.post['Content-Type'] = 'application/json'  // JSONæ•°æ®
axios.defaults.headers.post['Content-Type'] = 'multipart/form-data'  // æ–‡ä»¶ä¸Šä¼ 

// ç¼“å­˜æ§åˆ¶
axios.defaults.headers.get['Cache-Control'] = 'no-cache'  // ä¸ä½¿ç”¨ç¼“å­˜

// è‡ªå®šä¹‰headers
axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'
```

### 4.3 timeoutè¶…æ—¶é…ç½®


**ç†è§£timeout**ï¼šå°±åƒç»™æœ‹å‹æ‰“ç”µè¯ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šæ—¶é—´æ²¡äººæ¥ï¼Œä½ å°±æŒ‚æ–­

```javascript
// è®¾ç½®å…¨å±€è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
axios.defaults.timeout = 5000  // 5ç§’è¶…æ—¶

// ä¸åŒåœºæ™¯çš„æ¨èå€¼
axios.defaults.timeout = 3000   // å¿«é€Ÿæ¥å£ï¼ˆå¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰
axios.defaults.timeout = 10000  // æ™®é€šæ¥å£ï¼ˆå¦‚æ•°æ®æŸ¥è¯¢ï¼‰
axios.defaults.timeout = 30000  // æ…¢æ¥å£ï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ ï¼‰
```

### 4.4 å…¶ä»–é‡è¦é…ç½®é¡¹


```javascript
// å“åº”æ•°æ®ç±»å‹
axios.defaults.responseType = 'json'  // è‡ªåŠ¨è§£æJSON

// è·¨åŸŸè¯·æ±‚æ˜¯å¦æºå¸¦cookie
axios.defaults.withCredentials = true

// è¯·æ±‚ä½“å¤§å°é™åˆ¶
axios.defaults.maxContentLength = 2000  // 2KB
axios.defaults.maxBodyLength = 2000
```

---

## 5. ğŸ”„ é…ç½®ä¼˜å…ˆçº§è§„åˆ™


### 5.1 ä¼˜å…ˆçº§é¡ºåºç†è§£


**é€šä¿—ç†è§£**ï¼šå°±åƒç©¿è¡£æœçš„å±‚æ¬¡ï¼Œå¤–é¢çš„è¡£æœä¼šç›–ä½é‡Œé¢çš„

```
é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    è¯·æ±‚æ—¶çš„é…ç½®      â”‚ â† æœ€é«˜ä¼˜å…ˆçº§ï¼ˆä¼šè¦†ç›–ä¸‹é¢çš„ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å®ä¾‹çš„é»˜è®¤é…ç½®     â”‚ â† ä¸­ç­‰ä¼˜å…ˆçº§
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å…¨å±€é»˜è®¤é…ç½®       â”‚ â† æœ€ä½ä¼˜å…ˆçº§ï¼ˆåŸºç¡€é…ç½®ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å®é™…ä¼˜å…ˆçº§ç¤ºä¾‹


```javascript
// 1. å…¨å±€é»˜è®¤é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰
axios.defaults.timeout = 5000
axios.defaults.baseURL = 'https://api.example.com'

// 2. åˆ›å»ºå®ä¾‹æ—¶çš„é…ç½®ï¼ˆä¸­ç­‰ä¼˜å…ˆçº§ï¼‰
const apiClient = axios.create({
  timeout: 8000,  // ä¼šè¦†ç›–å…¨å±€çš„5000
  baseURL: 'https://api.example.com'  // å’Œå…¨å±€ç›¸åŒ
})

// 3. è¯·æ±‚æ—¶çš„é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
apiClient.get('/users', {
  timeout: 10000  // ä¼šè¦†ç›–å®ä¾‹çš„8000å’Œå…¨å±€çš„5000
})

// æœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®ï¼š
// timeout: 10000 ï¼ˆæ¥è‡ªè¯·æ±‚é…ç½®ï¼‰
// baseURL: 'https://api.example.com' ï¼ˆæ¥è‡ªå…¨å±€é…ç½®ï¼‰
```

### 5.3 é…ç½®åˆå¹¶è§„åˆ™


```javascript
// é…ç½®æ˜¯å¦‚ä½•åˆå¹¶çš„ç¤ºä¾‹
const globalConfig = {
  timeout: 5000,
  headers: {
    'Accept': 'application/json',
    'Content-Type': 'application/json'
  }
}

const requestConfig = {
  timeout: 8000,
  headers: {
    'Authorization': 'Bearer token123'
  }
}

// åˆå¹¶åçš„æœ€ç»ˆé…ç½®
const finalConfig = {
  timeout: 8000,  // è¢«è¯·æ±‚é…ç½®è¦†ç›–
  headers: {
    'Accept': 'application/json',       // æ¥è‡ªå…¨å±€
    'Content-Type': 'application/json', // æ¥è‡ªå…¨å±€
    'Authorization': 'Bearer token123'  // æ¥è‡ªè¯·æ±‚
  }
}
```

---

## 6. ğŸ¯ å®æˆ˜åº”ç”¨åœºæ™¯


### 6.1 Vueé¡¹ç›®ä¸­çš„å…¨å±€é…ç½®


```javascript
// main.js - Vueé¡¹ç›®å…¥å£æ–‡ä»¶
import axios from 'axios'

// å…¨å±€é…ç½®è®¾ç½®
const setupAxios = () => {
  // æ ¹æ®ç¯å¢ƒè®¾ç½®åŸºç¡€URL
  if (process.env.NODE_ENV === 'development') {
    axios.defaults.baseURL = 'http://localhost:8080/api'
  } else {
    axios.defaults.baseURL = 'https://prod-api.myapp.com/api'
  }
  
  // è¶…æ—¶é…ç½®
  axios.defaults.timeout = 10000
  
  // é€šç”¨è¯·æ±‚å¤´
  axios.defaults.headers.common['Accept'] = 'application/json'
  axios.defaults.headers.post['Content-Type'] = 'application/json'
  
  // æ·»åŠ tokenï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  const token = localStorage.getItem('authToken')
  if (token) {
    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`
  }
}

setupAxios()
```

### 6.2 åŠ¨æ€æ›´æ–°å…¨å±€é…ç½®


```javascript
// ç”¨æˆ·ç™»å½•åæ›´æ–°token
const updateAuthToken = (token) => {
  localStorage.setItem('authToken', token)
  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`
}

// ç”¨æˆ·é€€å‡ºç™»å½•æ¸…é™¤token
const clearAuthToken = () => {
  localStorage.removeItem('authToken')
  delete axios.defaults.headers.common['Authorization']
}

// ä½¿ç”¨ç¤ºä¾‹
// ç™»å½•æˆåŠŸå
updateAuthToken('new-jwt-token-here')

// é€€å‡ºç™»å½•æ—¶
clearAuthToken()
```

### 6.3 æ¥å£åœ°å€åˆ‡æ¢ç®¡ç†


```javascript
// APIåœ°å€ç®¡ç†
const API_CONFIGS = {
  local: 'http://localhost:3000/api',
  dev: 'https://dev-api.myapp.com/api',
  prod: 'https://api.myapp.com/api'
}

// åˆ‡æ¢APIç¯å¢ƒçš„å‡½æ•°
const switchApiEnvironment = (env) => {
  axios.defaults.baseURL = API_CONFIGS[env] || API_CONFIGS.local
  console.log(`APIåœ°å€å·²åˆ‡æ¢ä¸º: ${axios.defaults.baseURL}`)
}

// ä½¿ç”¨ç¤ºä¾‹
switchApiEnvironment('dev')  // åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒ
switchApiEnvironment('prod') // åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
```

### 6.4 å¤šè¯­è¨€è¯·æ±‚å¤´é…ç½®


```javascript
// æ ¹æ®ç”¨æˆ·è¯­è¨€è®¾ç½®è¯·æ±‚å¤´
const setLanguage = (lang) => {
  axios.defaults.headers.common['Accept-Language'] = lang
}

// ä½¿ç”¨ç¤ºä¾‹
setLanguage('zh-CN')  // ä¸­æ–‡
setLanguage('en-US')  // è‹±æ–‡
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å…¨å±€é»˜è®¤é…ç½®ï¼šé€šè¿‡axios.defaultsè®¾ç½®æ‰€æœ‰è¯·æ±‚çš„é»˜è®¤å€¼
ğŸ”¸ ç¯å¢ƒç®¡ç†ï¼šå¼€å‘/ç”Ÿäº§/æµ‹è¯•ç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
ğŸ”¸ é…ç½®ä¼˜å…ˆçº§ï¼šè¯·æ±‚é…ç½® > å®ä¾‹é…ç½® > å…¨å±€é…ç½®
ğŸ”¸ åŠ¨æ€é…ç½®ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹å…¨å±€é…ç½®
ğŸ”¸ é…ç½®ç»§æ‰¿ï¼šæ–°çš„é…ç½®ä¼šåˆå¹¶è€Œä¸æ˜¯å®Œå…¨è¦†ç›–æ—§é…ç½®
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ç”¨å…¨å±€é…ç½®**
```
é€‚åˆå…¨å±€é…ç½®çš„ï¼š
âœ… åŸºç¡€URLï¼ˆbaseURLï¼‰
âœ… è¶…æ—¶æ—¶é—´ï¼ˆtimeoutï¼‰
âœ… é€šç”¨è¯·æ±‚å¤´ï¼ˆAcceptã€Content-Typeï¼‰
âœ… è®¤è¯ä¿¡æ¯ï¼ˆAuthorizationï¼‰

ä¸é€‚åˆå…¨å±€é…ç½®çš„ï¼š
âŒ ç‰¹æ®Šçš„è¯·æ±‚å‚æ•°
âŒ æ–‡ä»¶ä¸Šä¼ çš„é…ç½®
âŒ æŸäº›ç‰¹å®šæ¥å£çš„é…ç½®
```

**ğŸ”¹ ç¯å¢ƒé…ç½®çš„å®é™…æ„ä¹‰**
```
ä¸ºä»€ä¹ˆéœ€è¦ç¯å¢ƒé…ç½®ï¼š
- å¼€å‘æ—¶ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼Œéƒ¨ç½²æ—¶ç”¨æ­£å¼æœåŠ¡å™¨
- ä¸åŒç¯å¢ƒçš„æ€§èƒ½è¦æ±‚ä¸åŒ
- è°ƒè¯•ä¿¡æ¯çš„è¯¦ç»†ç¨‹åº¦ä¸åŒ
- å®‰å…¨ç­–ç•¥ä¸åŒ
```

**ğŸ”¹ é…ç½®ä¼˜å…ˆçº§çš„å®é™…åº”ç”¨**
```
å®é™…åœºæ™¯ï¼š
- å…¨å±€è®¾ç½®è¶…æ—¶5ç§’ï¼ˆé€‚åˆå¤§éƒ¨åˆ†æ¥å£ï¼‰
- æŸä¸ªä¸Šä¼ æ¥å£éœ€è¦30ç§’è¶…æ—¶
- åœ¨è¯·æ±‚æ—¶å•ç‹¬è®¾ç½®å³å¯ï¼Œä¸å½±å“å…¶ä»–æ¥å£
```

### 7.3 æœ€ä½³å®è·µå»ºè®®


```javascript
// âœ… æ¨èçš„å…¨å±€é…ç½®æ–¹å¼
const initAxios = () => {
  // åŸºç¡€é…ç½®
  axios.defaults.baseURL = process.env.VUE_APP_API_URL
  axios.defaults.timeout = 10000
  axios.defaults.headers.common['Accept'] = 'application/json'
  
  // è®¤è¯é…ç½®
  const token = getToken()
  if (token) {
    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`
  }
}

// âœ… ç¯å¢ƒé…ç½®çš„æ¨èæ–¹å¼
const config = {
  development: { baseURL: 'http://localhost:3000/api', timeout: 30000 },
  production: { baseURL: 'https://api.myapp.com', timeout: 10000 }
}

Object.assign(axios.defaults, config[process.env.NODE_ENV])
```

### 7.4 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| **é…ç½®ä¸ç”Ÿæ•ˆ** | `é…ç½®æ—¶æœºå¤ªæ™š` | `åœ¨åº”ç”¨å¯åŠ¨æ—¶å°±è®¾ç½®å…¨å±€é…ç½®` |
| **Tokenæ›´æ–°ä¸åŠæ—¶** | `æ²¡æœ‰åŠ¨æ€æ›´æ–°é…ç½®` | `ç™»å½•åç«‹å³æ›´æ–°axios.defaults` |
| **ç¯å¢ƒåˆ‡æ¢å¤±è´¥** | `é…ç½®å†™æ­»äº†` | `ä½¿ç”¨ç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®` |
| **è¯·æ±‚å¤´é‡å¤** | `å¤šæ¬¡è®¾ç½®ç›¸åŒheader` | `æ£€æŸ¥é…ç½®çš„ç»§æ‰¿å…³ç³»` |

**æ ¸å¿ƒè®°å¿†**ï¼š
- axios.defaultsæ˜¯å…¨å±€é…ç½®çš„å…¥å£
- ç¯å¢ƒç®¡ç†è®©é…ç½®æ›´çµæ´»
- é…ç½®æœ‰ä¼˜å…ˆçº§ï¼Œè¯·æ±‚æ—¶çš„é…ç½®æœ€é«˜
- è®¤è¯ä¿¡æ¯è¦åŠ¨æ€æ›´æ–°
- åˆç†çš„è¶…æ—¶æ—¶é—´å¾ˆé‡è¦