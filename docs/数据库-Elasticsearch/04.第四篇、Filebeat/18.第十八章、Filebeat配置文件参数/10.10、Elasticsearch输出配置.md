---
title: 10ã€Elasticsearchè¾“å‡ºé…ç½®
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Elasticsearchè¾“å‡º](#1-ä»€ä¹ˆæ˜¯elasticsearchè¾“å‡º)
2. [åŸºç¡€è¿æ¥é…ç½®](#2-åŸºç¡€è¿æ¥é…ç½®)
3. [ç´¢å¼•ç®¡ç†é…ç½®](#3-ç´¢å¼•ç®¡ç†é…ç½®)
4. [æ¨¡æ¿ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†](#4-æ¨¡æ¿ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†)
5. [æ€§èƒ½ä¼˜åŒ–é…ç½®](#5-æ€§èƒ½ä¼˜åŒ–é…ç½®)
6. [å®æˆ˜é…ç½®ç¤ºä¾‹](#6-å®æˆ˜é…ç½®ç¤ºä¾‹)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯Elasticsearchè¾“å‡º


### 1.1 åŸºæœ¬æ¦‚å¿µç†è§£


**ğŸ”¸ Elasticsearchè¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ**
```
ç®€å•ç†è§£ï¼šFilebeatæ”¶é›†åˆ°æ—¥å¿—åï¼Œéœ€è¦æŠŠæ•°æ®å‘é€åˆ°æŸä¸ªåœ°æ–¹å­˜å‚¨å’Œåˆ†æ
Elasticsearchè¾“å‡ºï¼šå°±æ˜¯æŠŠæ—¥å¿—æ•°æ®å‘é€åˆ°Elasticsearché›†ç¾¤çš„"å‡ºå£"

ç±»æ¯”ç†è§£ï¼š
å°±åƒå¿«é€’å‘˜ï¼ˆFilebeatï¼‰æ”¶é›†åŒ…è£¹ï¼ˆæ—¥å¿—ï¼‰å
éœ€è¦é€åˆ°æŒ‡å®šçš„ä»“åº“ï¼ˆElasticsearchï¼‰
è¾“å‡ºé…ç½®å°±æ˜¯å‘Šè¯‰å¿«é€’å‘˜ï¼š
- ä»“åº“åœ°å€åœ¨å“ªé‡Œ
- æ€ä¹ˆåˆ†ç±»å­˜æ”¾
- ç”¨ä»€ä¹ˆæ–¹å¼è¿è¾“
```

**ğŸ’¡ ä¸ºä»€ä¹ˆè¦ç”¨Elasticsearchï¼Ÿ**
- **å¼ºå¤§æœç´¢**ï¼šå¯ä»¥å¿«é€Ÿæœç´¢æµ·é‡æ—¥å¿—
- **å®æ—¶åˆ†æ**ï¼šæ”¯æŒå®æ—¶æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- **é›†ç¾¤æ‰©å±•**ï¼šå¯ä»¥æ°´å¹³æ‰©å±•å¤„ç†æ›´å¤šæ•°æ®
- **ç”Ÿæ€å®Œæ•´**ï¼šé…åˆKibanaå¯ä»¥åšå¯è§†åŒ–åˆ†æ

### 1.2 è¾“å‡ºé…ç½®åœ¨Filebeatä¸­çš„ä½ç½®


```
Filebeatå·¥ä½œæµç¨‹ï¼š
ğŸ“ æ—¥å¿—æ–‡ä»¶ â†’ ğŸ” Inputæ”¶é›† â†’ âš™ï¸ Processorå¤„ç† â†’ ğŸ“¤ Outputè¾“å‡º â†’ ğŸ—„ï¸ Elasticsearch

è¾“å‡ºé…ç½®çš„ä½œç”¨ï¼š
âœ… å‘Šè¯‰Filebeatæ•°æ®å‘é€åˆ°å“ªé‡Œ
âœ… è®¾å®šæ•°æ®å­˜å‚¨çš„æ ¼å¼å’Œè§„åˆ™
âœ… æ§åˆ¶å‘é€çš„æ€§èƒ½å’Œæ•ˆç‡
âœ… ç®¡ç†ç´¢å¼•çš„ç”Ÿå‘½å‘¨æœŸ
```

---

## 2. ğŸ”— åŸºç¡€è¿æ¥é…ç½®


### 2.1 hosts - ESé›†ç¾¤åœ°å€é…ç½®


**ğŸ”¸ ä»€ä¹ˆæ˜¯hostsé…ç½®ï¼Ÿ**
```
ä½œç”¨ï¼šå‘Šè¯‰Filebeatä½ çš„Elasticsearché›†ç¾¤åœ¨å“ªé‡Œ
å°±åƒï¼šå‘Šè¯‰å¿«é€’å‘˜ä»“åº“çš„å…·ä½“åœ°å€

åŸºæœ¬æ ¼å¼ï¼š
hosts: ["elasticsearchæœåŠ¡å™¨åœ°å€:ç«¯å£"]
```

**ğŸ“ åŸºç¡€é…ç½®ç¤ºä¾‹ï¼š**
```yaml
output.elasticsearch:
  # å•ä¸ªESèŠ‚ç‚¹
  hosts: ["localhost:9200"]
  
  # å¤šä¸ªESèŠ‚ç‚¹ï¼ˆæ¨èï¼‰
  hosts: 
    - "es1.example.com:9200"
    - "es2.example.com:9200"
    - "es3.example.com:9200"
```

**ğŸ’¡ å¤šèŠ‚ç‚¹é…ç½®çš„å¥½å¤„ï¼š**
- **é«˜å¯ç”¨**ï¼šä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œå…¶ä»–èŠ‚ç‚¹ç»§ç»­å·¥ä½œ
- **è´Ÿè½½å‡è¡¡**ï¼šFilebeatä¼šè‡ªåŠ¨åœ¨å¤šä¸ªèŠ‚ç‚¹é—´åˆ†å‘æ•°æ®
- **æ•…éšœæ¢å¤**ï¼šè‡ªåŠ¨é‡è¯•å’Œæ•…éšœè½¬ç§»

### 2.2 åŸºç¡€è®¤è¯é…ç½®


**ğŸ”¸ ç”¨æˆ·åå¯†ç è®¤è¯ï¼š**
```yaml
output.elasticsearch:
  hosts: ["https://es.example.com:9200"]
  username: "filebeat_user"
  password: "your_password"
  
  # å¦‚æœä½¿ç”¨HTTPS
  protocol: "https"
  ssl.verification_mode: "certificate"
```

**ğŸ”’ API Keyè®¤è¯ï¼ˆæ¨èï¼‰ï¼š**
```yaml
output.elasticsearch:
  hosts: ["https://es.example.com:9200"]
  api_key: "your_api_key_here"
```

> **ğŸ’¡ å®‰å…¨æç¤º**ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨API Keyæˆ–è¯ä¹¦è®¤è¯ï¼Œé¿å…æ˜æ–‡å¯†ç 

---

## 3. ğŸ“ ç´¢å¼•ç®¡ç†é…ç½®


### 3.1 index - ç´¢å¼•åç§°é…ç½®


**ğŸ”¸ ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ**
```
ç´¢å¼•æ¦‚å¿µï¼šå°±åƒå›¾ä¹¦é¦†çš„ä¸åŒä¹¦æ¶ï¼Œç”¨æ¥åˆ†ç±»å­˜æ”¾ä¸åŒçš„æ•°æ®
ä¾‹å¦‚ï¼š
- nginxè®¿é—®æ—¥å¿— â†’ nginx-access-2024.01.01
- åº”ç”¨é”™è¯¯æ—¥å¿— â†’ app-error-2024.01.01
- ç³»ç»Ÿæ—¥å¿— â†’ system-2024.01.01
```

**ğŸ“ ç´¢å¼•å‘½åé…ç½®ï¼š**
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # å›ºå®šç´¢å¼•å
  index: "my-logs"
  
  # æŒ‰æ—¥æœŸåˆ†å‰²ç´¢å¼•ï¼ˆæ¨èï¼‰
  index: "logs-%{+yyyy.MM.dd}"
  
  # æ ¹æ®æ—¥å¿—ç±»å‹åˆ†ç´¢å¼•
  index: "%{[fields.log_type]}-%{+yyyy.MM.dd}"
```

**ğŸ—“ï¸ æ—¶é—´æ ¼å¼è¯´æ˜ï¼š**
| æ ¼å¼ | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| `%{+yyyy}` | å¹´ä»½ | 2024 |
| `%{+MM}` | æœˆä»½ | 01 |
| `%{+dd}` | æ—¥æœŸ | 15 |
| `%{+HH}` | å°æ—¶ | 14 |

### 3.2 ç´¢å¼•å‘½åæœ€ä½³å®è·µ


**ğŸ¯ æ¨èçš„å‘½åè§„åˆ™ï¼š**
```yaml
# æŒ‰æœåŠ¡å’Œæ—¥æœŸåˆ†ç±»
index: "service-%{[fields.service_name]}-%{+yyyy.MM.dd}"
# ç»“æœï¼šservice-nginx-2024.01.15

# æŒ‰ç¯å¢ƒå’Œç±»å‹åˆ†ç±»  
index: "%{[fields.env]}-%{[fields.log_type]}-%{+yyyy.MM.dd}"
# ç»“æœï¼šprod-access-2024.01.15

# æŒ‰ä¸»æœºåˆ†ç±»
index: "host-%{[agent.hostname]}-%{+yyyy.MM.dd}"
# ç»“æœï¼šhost-web01-2024.01.15
```

---

## 4. âš™ï¸ æ¨¡æ¿ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†


### 4.1 template - ç´¢å¼•æ¨¡æ¿é…ç½®


**ğŸ”¸ ä»€ä¹ˆæ˜¯ç´¢å¼•æ¨¡æ¿ï¼Ÿ**
```
æ¨¡æ¿ä½œç”¨ï¼šé¢„å…ˆå®šä¹‰ç´¢å¼•çš„ç»“æ„å’Œè®¾ç½®
å°±åƒï¼šè£…ä¿®æˆ¿å­å‰å…ˆç”»å¥½è®¾è®¡å›¾

åŒ…å«å†…å®¹ï¼š
- å­—æ®µç±»å‹å®šä¹‰ï¼ˆæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸç­‰ï¼‰
- ç´¢å¼•è®¾ç½®ï¼ˆåˆ†ç‰‡æ•°ã€å‰¯æœ¬æ•°ï¼‰
- å­—æ®µæ˜ å°„è§„åˆ™
```

**ğŸ“ æ¨¡æ¿åŸºç¡€é…ç½®ï¼š**
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # å¼€å¯æ¨¡æ¿åŠŸèƒ½
  template.enabled: true
  template.name: "filebeat-logs"
  template.pattern: "logs-*"
  
  # æ¨¡æ¿è®¾ç½®
  template.settings:
    index:
      number_of_shards: 1      # åˆ†ç‰‡æ•°
      number_of_replicas: 1    # å‰¯æœ¬æ•°
      refresh_interval: "5s"   # åˆ·æ–°é—´éš”
```

**ğŸ¯ æ¨¡æ¿åŒ¹é…æ¨¡å¼ï¼š**
```yaml
# åŒ¹é…æ‰€æœ‰ä»¥ logs- å¼€å¤´çš„ç´¢å¼•
template.pattern: "logs-*"

# åŒ¹é…å¤šç§æ¨¡å¼
template.pattern: ["nginx-*", "apache-*", "app-*"]

# ç²¾ç¡®åŒ¹é…
template.pattern: "production-logs-*"
```

### 4.2 ilm - ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†


**ğŸ”¸ ä»€ä¹ˆæ˜¯ILMï¼Ÿ**
```
ILMä½œç”¨ï¼šè‡ªåŠ¨ç®¡ç†ç´¢å¼•çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ
å°±åƒï¼šè‡ªåŠ¨æ¸…ç†æ—§æ–‡ä»¶ï¼Œç®¡ç†ç£ç›˜ç©ºé—´

ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼š
Hotï¼ˆçƒ­æ•°æ®ï¼‰  â†’ é¢‘ç¹è¯»å†™ï¼Œé«˜æ€§èƒ½SSD
Warmï¼ˆæ¸©æ•°æ®ï¼‰ â†’ å¶å°”æŸ¥è¯¢ï¼Œæ™®é€šå­˜å‚¨
Coldï¼ˆå†·æ•°æ®ï¼‰ â†’ å¾ˆå°‘æŸ¥è¯¢ï¼Œä½æˆæœ¬å­˜å‚¨
Deleteï¼ˆåˆ é™¤ï¼‰ â†’ è¶…è¿‡ä¿ç•™æœŸï¼Œè‡ªåŠ¨åˆ é™¤
```

**ğŸ“ ILMåŸºç¡€é…ç½®ï¼š**
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # å¼€å¯ILM
  ilm.enabled: true
  ilm.policy: "filebeat-policy"
  
  # è‡ªå®šä¹‰ILMç­–ç•¥
  ilm.pattern: "logs-*"
  ilm.rollover_alias: "logs"
```

**â° ILMç­–ç•¥ç¤ºä¾‹ï¼š**
```json
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "1GB",
            "max_age": "1d"
          }
        }
      },
      "warm": {
        "min_age": "7d",
        "actions": {
          "allocate": {
            "number_of_replicas": 0
          }
        }
      },
      "delete": {
        "min_age": "30d"
      }
    }
  }
}
```

---

## 5. ğŸš€ æ€§èƒ½ä¼˜åŒ–é…ç½®


### 5.1 bulk_max_size - æ‰¹é‡å‘é€å¤§å°


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ‰¹é‡å‘é€ï¼Ÿ**
```
æ‰¹é‡å‘é€ï¼šæŠŠå¤šæ¡æ—¥å¿—æ‰“åŒ…ä¸€èµ·å‘é€ï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡å‘é€
å¥½å¤„ï¼šå‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œæé«˜ä¼ è¾“æ•ˆç‡

ç±»æ¯”ç†è§£ï¼š
å•æ¡å‘é€ = ä¸€æ¬¡åªå¯„ä¸€ä»¶å¿«é€’ï¼ˆæ•ˆç‡ä½ï¼‰
æ‰¹é‡å‘é€ = ä¸€æ¬¡å¯„ä¸€ç®±å¿«é€’ï¼ˆæ•ˆç‡é«˜ï¼‰
```

**ğŸ“ æ‰¹é‡å¤§å°é…ç½®ï¼š**
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # æ‰¹é‡å¤§å°ï¼ˆæ¨èå€¼ï¼‰
  bulk_max_size: 3200
  
  # å…¶ä»–ç›¸å…³è®¾ç½®
  timeout: 90s              # è¯·æ±‚è¶…æ—¶æ—¶é—´
  max_retries: 3           # é‡è¯•æ¬¡æ•°
  backoff.init: 1s         # åˆå§‹é‡è¯•é—´éš”
  backoff.max: 60s         # æœ€å¤§é‡è¯•é—´éš”
```

**âš–ï¸ æ‰¹é‡å¤§å°è°ƒä¼˜å»ºè®®ï¼š**
| åœºæ™¯ | æ¨èå€¼ | è¯´æ˜ |
|------|--------|------|
| ä½æµé‡ | 50-200 | å‡å°‘å»¶è¿Ÿ |
| ä¸­æµé‡ | 1600-3200 | å¹³è¡¡æ€§èƒ½ |
| é«˜æµé‡ | 3200-5000 | æœ€å¤§åå |

### 5.2 worker - å·¥ä½œçº¿ç¨‹é…ç½®


**ğŸ”¸ ä»€ä¹ˆæ˜¯workerï¼Ÿ**
```
Workerï¼šè´Ÿè´£å‘é€æ•°æ®åˆ°ESçš„å·¥ä½œçº¿ç¨‹
å¤šworkerï¼šå¤šä¸ª"å¿«é€’å‘˜"åŒæ—¶å·¥ä½œï¼Œæé«˜æ•ˆç‡

è°ƒä¼˜åŸåˆ™ï¼š
- CPUæ ¸å¿ƒå°‘ï¼šworkeræ•°é‡ = CPUæ ¸å¿ƒæ•°
- CPUæ ¸å¿ƒå¤šï¼šworkeræ•°é‡ = CPUæ ¸å¿ƒæ•° * 0.75
```

**ğŸ“ Workeré…ç½®ï¼š**
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # å·¥ä½œçº¿ç¨‹æ•°
  worker: 4
  
  # è´Ÿè½½å‡è¡¡æ¨¡å¼
  loadbalance: true
  
  # è¿æ¥æ± è®¾ç½®
  max_retries: 3
  backoff.init: 1s
```

### 5.3 compression - å‹ç¼©é…ç½®


**ğŸ”¸ å‹ç¼©ä¼ è¾“çš„å¥½å¤„ï¼š**
```
å‹ç¼©ä½œç”¨ï¼šå‡å°‘ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡
é€‚ç”¨åœºæ™¯ï¼š
âœ… ç½‘ç»œå¸¦å®½æœ‰é™
âœ… æ—¥å¿—æ•°æ®é‡å¤§
âœ… ESé›†ç¾¤åœ¨è¿œç¨‹

æ³¨æ„äº‹é¡¹ï¼š
âŒ ä¼šå¢åŠ CPUä½¿ç”¨
âŒ å¯èƒ½å¢åŠ å»¶è¿Ÿ
```

**ğŸ“ å‹ç¼©é…ç½®ï¼š**
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # å¼€å¯å‹ç¼©
  compression_level: 1    # å‹ç¼©çº§åˆ« 0-9
  
  # 0 = ä¸å‹ç¼©ï¼ˆæœ€å¿«ï¼‰
  # 1 = æœ€ä½å‹ç¼©ï¼ˆæ¨èï¼‰
  # 9 = æœ€é«˜å‹ç¼©ï¼ˆæœ€æ…¢ï¼‰
```

---

## 6. âš¡ å®æˆ˜é…ç½®ç¤ºä¾‹


### 6.1 ç”Ÿäº§ç¯å¢ƒå®Œæ•´é…ç½®


```yaml
# ===========================================
# ç”Ÿäº§ç¯å¢ƒ Elasticsearch è¾“å‡ºé…ç½®
# ===========================================

output.elasticsearch:
  # ESé›†ç¾¤åœ°å€ï¼ˆé«˜å¯ç”¨é…ç½®ï¼‰
  hosts:
    - "es-node1.prod.com:9200"
    - "es-node2.prod.com:9200"
    - "es-node3.prod.com:9200"
  
  # å®‰å…¨è®¤è¯
  username: "filebeat_user"
  password: "${ELASTIC_PASSWORD}"
  protocol: "https"
  
  # SSLè®¾ç½®
  ssl:
    verification_mode: "certificate"
    certificate_authorities: ["/etc/ssl/certs/ca.crt"]
  
  # ç´¢å¼•é…ç½®
  index: "logs-%{[fields.env]}-%{[fields.service]}-%{+yyyy.MM.dd}"
  
  # æ¨¡æ¿è®¾ç½®
  template:
    enabled: true
    name: "production-logs"
    pattern: "logs-*"
    settings:
      index:
        number_of_shards: 2
        number_of_replicas: 1
        refresh_interval: "10s"
        codec: "best_compression"
  
  # ILMç”Ÿå‘½å‘¨æœŸç®¡ç†
  ilm:
    enabled: true
    policy: "production-policy"
    rollover_alias: "logs"
    pattern: "logs-*"
  
  # æ€§èƒ½ä¼˜åŒ–
  worker: 8
  bulk_max_size: 3200
  timeout: 90s
  max_retries: 5
  backoff.init: 2s
  backoff.max: 120s
  
  # å‹ç¼©ä¼ è¾“
  compression_level: 1
  
  # è´Ÿè½½å‡è¡¡
  loadbalance: true
```

### 6.2 å¼€å‘ç¯å¢ƒç®€åŒ–é…ç½®


```yaml
# ===========================================
# å¼€å‘ç¯å¢ƒ Elasticsearch è¾“å‡ºé…ç½®
# ===========================================

output.elasticsearch:
  # æœ¬åœ°ES
  hosts: ["localhost:9200"]
  
  # ç®€å•ç´¢å¼•å
  index: "dev-logs-%{+yyyy.MM.dd}"
  
  # åŸºç¡€æ¨¡æ¿
  template:
    enabled: true
    name: "dev-logs"
    pattern: "dev-logs-*"
    settings:
      index:
        number_of_shards: 1
        number_of_replicas: 0
  
  # æ€§èƒ½è®¾ç½®
  worker: 2
  bulk_max_size: 1000
  timeout: 30s
```

### 6.3 å¤šç¯å¢ƒé…ç½®ç®¡ç†


**ğŸ“ é…ç½®æ–‡ä»¶ç»„ç»‡ç»“æ„ï¼š**
```
filebeat/
â”œâ”€â”€ filebeat.yml              # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ output-prod.yml       # ç”Ÿäº§ç¯å¢ƒè¾“å‡º
â”‚   â”œâ”€â”€ output-dev.yml        # å¼€å‘ç¯å¢ƒè¾“å‡º
â”‚   â””â”€â”€ output-test.yml       # æµ‹è¯•ç¯å¢ƒè¾“å‡º
â””â”€â”€ scripts/
    â””â”€â”€ deploy.sh             # éƒ¨ç½²è„šæœ¬
```

**ğŸ”„ ç¯å¢ƒåˆ‡æ¢é…ç½®ï¼š**
```yaml
# filebeat.yml ä¸»é…ç½®
filebeat.config.inputs:
  enabled: true
  path: inputs.d/*.yml

# æ ¹æ®ç¯å¢ƒå˜é‡é€‰æ‹©è¾“å‡ºé…ç½®
output.elasticsearch:
  hosts: ["${ES_HOSTS:localhost:9200}"]
  username: "${ES_USERNAME:elastic}"
  password: "${ES_PASSWORD:changeme}"
  index: "${ES_INDEX_PREFIX:logs}-%{+yyyy.MM.dd}"
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„é…ç½®


```
ğŸ”¸ hostsï¼šESé›†ç¾¤åœ°å€ï¼Œæ”¯æŒå¤šèŠ‚ç‚¹é«˜å¯ç”¨
ğŸ”¸ indexï¼šç´¢å¼•å‘½åè§„åˆ™ï¼Œå»ºè®®æŒ‰æ—¶é—´å’Œç±»å‹åˆ†ç±»
ğŸ”¸ templateï¼šç´¢å¼•æ¨¡æ¿ï¼Œå®šä¹‰å­—æ®µç±»å‹å’Œç´¢å¼•è®¾ç½®
ğŸ”¸ ilmï¼šç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®
ğŸ”¸ bulk_max_sizeï¼šæ‰¹é‡å¤§å°ï¼Œå½±å“ä¼ è¾“æ•ˆç‡
ğŸ”¸ workerï¼šå·¥ä½œçº¿ç¨‹æ•°ï¼Œæ§åˆ¶å¹¶å‘æ€§èƒ½
```

### 7.2 é…ç½®æœ€ä½³å®è·µ


**ğŸ¯ ç´¢å¼•è®¾è®¡åŸåˆ™ï¼š**
```
æŒ‰æ—¶é—´åˆ†å‰²ï¼šä¾¿äºæ•°æ®ç®¡ç†å’Œæ¸…ç†
æŒ‰ç±»å‹åˆ†ç±»ï¼šä¸åŒä¸šåŠ¡æ—¥å¿—åˆ†å¼€å­˜å‚¨
åˆç†å‘½åï¼šåŒ…å«ç¯å¢ƒã€æœåŠ¡ã€æ—¶é—´ä¿¡æ¯
æ§åˆ¶å¤§å°ï¼šå•ä¸ªç´¢å¼•ä¸è¶…è¿‡50GB
```

**âš¡ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹ï¼š**
```
æ‰¹é‡å¤§å°ï¼šæ ¹æ®æ•°æ®é‡è°ƒæ•´ï¼Œä¸€èˆ¬1600-3200
å·¥ä½œçº¿ç¨‹ï¼šä¸è¶…è¿‡CPUæ ¸å¿ƒæ•°
å‹ç¼©ä¼ è¾“ï¼šç½‘ç»œå—é™æ—¶å¼€å¯
è´Ÿè½½å‡è¡¡ï¼šå¤šèŠ‚ç‚¹ç¯å¢ƒå¼€å¯
```

**ğŸ”’ å®‰å…¨é…ç½®å»ºè®®ï¼š**
```
ä½¿ç”¨HTTPSï¼šåŠ å¯†æ•°æ®ä¼ è¾“
API Keyè®¤è¯ï¼šé¿å…æ˜æ–‡å¯†ç 
è¯ä¹¦éªŒè¯ï¼šç¡®ä¿è¿æ¥å®‰å…¨
æƒé™æœ€å°åŒ–ï¼šåªæˆäºˆå¿…è¦æƒé™
```

### 7.3 å¸¸è§é—®é¢˜è§£å†³


**ğŸ“Š æ€§èƒ½é—®é¢˜æ’æŸ¥ï¼š**
| ç—‡çŠ¶ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|---------|----------|
| å‘é€æ…¢ | bulk_max_sizeå¤ªå° | å¢å¤§æ‰¹é‡å¤§å° |
| CPUé«˜ | workerå¤ªå¤š | å‡å°‘å·¥ä½œçº¿ç¨‹ |
| å†…å­˜é«˜ | æ‰¹é‡å¤§å°è¿‡å¤§ | é€‚å½“å‡å°æ‰¹é‡ |
| è¿æ¥è¶…æ—¶ | ç½‘ç»œä¸ç¨³å®š | å¢åŠ è¶…æ—¶æ—¶é—´ |

**ğŸš¨ æ•…éšœæ¢å¤ç­–ç•¥ï¼š**
```
é‡è¯•æœºåˆ¶ï¼šé…ç½®åˆç†çš„é‡è¯•æ¬¡æ•°å’Œé—´éš”
æ•…éšœè½¬ç§»ï¼šä½¿ç”¨å¤šèŠ‚ç‚¹é…ç½®
ç›‘æ§å‘Šè­¦ï¼šè®¾ç½®å…³é”®æŒ‡æ ‡ç›‘æ§
å¤‡ä»½ç­–ç•¥ï¼šé‡è¦æ•°æ®å¤šå‰¯æœ¬ä¿å­˜
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹ï¼š**
- Elasticsearchè¾“å‡ºæ˜¯Filebeatçš„æ•°æ®å‡ºå£
- åˆç†çš„ç´¢å¼•è®¾è®¡æ˜¯æ•°æ®ç®¡ç†çš„åŸºç¡€
- æ€§èƒ½ä¼˜åŒ–éœ€è¦æ ¹æ®å®é™…ç¯å¢ƒè°ƒæ•´
- å®‰å…¨é…ç½®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è‡³å…³é‡è¦
- ç›‘æ§å’Œå‘Šè­¦æ˜¯ç¨³å®šè¿è¡Œçš„ä¿éšœ