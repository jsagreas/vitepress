---
title: 9ã€Kafkaè¾“å…¥é…ç½®
---
## ğŸ“š ç›®å½•

1. [Kafkaè¾“å…¥ç±»å‹æ¦‚è¿°](#1-kafkaè¾“å…¥ç±»å‹æ¦‚è¿°)
2. [åŸºç¡€è¿æ¥é…ç½®](#2-åŸºç¡€è¿æ¥é…ç½®)
3. [æ¶ˆæ¯è®¢é˜…ä¸æ¶ˆè´¹é…ç½®](#3-æ¶ˆæ¯è®¢é˜…ä¸æ¶ˆè´¹é…ç½®)
4. [æ€§èƒ½è°ƒä¼˜å‚æ•°](#4-æ€§èƒ½è°ƒä¼˜å‚æ•°)
5. [å®Œæ•´é…ç½®ç¤ºä¾‹](#5-å®Œæ•´é…ç½®ç¤ºä¾‹)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Kafkaè¾“å…¥ç±»å‹æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Kafkaè¾“å…¥


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
```
Kafkaè¾“å…¥ï¼šFilebeatä»Kafkaæ¶ˆæ¯é˜Ÿåˆ—è¯»å–æ•°æ®çš„æ–¹å¼
å·¥ä½œåŸç†ï¼šFilebeatå……å½“Kafkaæ¶ˆè´¹è€…ï¼Œè®¢é˜…æŒ‡å®šä¸»é¢˜è·å–æ¶ˆæ¯
ä½¿ç”¨åœºæ™¯ï¼šå¤„ç†é«˜ååé‡çš„æ—¥å¿—æµï¼Œå®ç°æ—¥å¿—çš„åˆ†å¸ƒå¼é‡‡é›†
```

> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**  
> æƒ³è±¡Kafkaåƒä¸€ä¸ªé‚®å±€çš„ä¿¡ç®±ç³»ç»Ÿï¼Œä¸åŒçš„åº”ç”¨å¾€ä¸åŒçš„ä¿¡ç®±(topic)é‡ŒæŠ•é€’æ¶ˆæ¯ï¼Œè€ŒFilebeatå°±åƒé‚®é€’å‘˜ï¼Œå®šæœŸå»æŒ‡å®šçš„ä¿¡ç®±æ”¶å–é‚®ä»¶å¹¶é€åˆ°ç›®çš„åœ°

### 1.2 ä¸ºä»€ä¹ˆä½¿ç”¨Kafkaè¾“å…¥


**ğŸŒŸ æ ¸å¿ƒä¼˜åŠ¿**
- **é«˜ååé‡**ï¼šå¤„ç†æ¯ç§’æ•°ç™¾ä¸‡æ¡æ¶ˆæ¯
- **å¯é æ€§ä¿è¯**ï¼šæ¶ˆæ¯æŒä¹…åŒ–å­˜å‚¨ï¼Œä¸ä¸¢å¤±æ•°æ®  
- **æ°´å¹³æ‰©å±•**ï¼šæ”¯æŒå¤šä¸ªFilebeatå®ä¾‹ååŒå·¥ä½œ
- **è§£è€¦æ¶æ„**ï¼šæ—¥å¿—ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç‹¬ç«‹éƒ¨ç½²

**ğŸ“Š é€‚ç”¨åœºæ™¯å¯¹æ¯”**

| åœºæ™¯ç±»å‹ | **ä¼ ç»Ÿæ–‡ä»¶è¾“å…¥** | **Kafkaè¾“å…¥** | **æœ€ä½³é€‰æ‹©** |
|---------|----------------|-------------|-------------|
| ğŸ  **å•æœºåº”ç”¨** | `ç›´æ¥è¯»å–æ—¥å¿—æ–‡ä»¶` | `éœ€è¦é¢å¤–éƒ¨ç½²Kafka` | `æ–‡ä»¶è¾“å…¥` |
| ğŸ¢ **å¾®æœåŠ¡é›†ç¾¤** | `éœ€è¦åœ¨æ¯å°æœºå™¨éƒ¨ç½²` | `ç»Ÿä¸€æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†` | `Kafkaè¾“å…¥` |
| âš¡ **é«˜å¹¶å‘ç³»ç»Ÿ** | `æ–‡ä»¶IOå¯èƒ½æˆä¸ºç“¶é¢ˆ` | `æ¶ˆæ¯é˜Ÿåˆ—å¤©ç„¶æ”¯æŒé«˜å¹¶å‘` | `Kafkaè¾“å…¥` |
| ğŸ”„ **å®æ—¶å¤„ç†** | `è½®è¯¢æ–‡ä»¶å˜åŒ–æœ‰å»¶è¿Ÿ` | `æ¶ˆæ¯æ¨é€å®æ—¶æ€§æ›´å¥½` | `Kafkaè¾“å…¥` |

---

## 2. ğŸ”Œ åŸºç¡€è¿æ¥é…ç½®


### 2.1 è¾“å…¥ç±»å‹å£°æ˜


```yaml
filebeat.inputs:
- type: kafka  # å£°æ˜ä½¿ç”¨Kafkaè¾“å…¥ç±»å‹
```

> ğŸ“– **æ ¸å¿ƒæ¦‚å¿µ**  
> `type: kafka` å‘Šè¯‰Filebeatè¿™ä¸ªè¾“å…¥æºè¦ä»Kafkaè¯»å–æ•°æ®ï¼Œè€Œä¸æ˜¯ä»æ–‡ä»¶ç³»ç»Ÿ

### 2.2 Kafkaé›†ç¾¤åœ°å€é…ç½®


**ğŸ”¸ hostså‚æ•°è¯¦è§£**
```yaml
hosts: 
  - "kafka1.example.com:9092"
  - "kafka2.example.com:9092" 
  - "kafka3.example.com:9092"
```

**ğŸ’¡ é…ç½®è¦ç‚¹**
- **å¤šä¸ªåœ°å€**ï¼šæä¾›Kafkaé›†ç¾¤ä¸­å¤šä¸ªèŠ‚ç‚¹åœ°å€ï¼Œæé«˜å¯ç”¨æ€§
- **ç«¯å£å·**ï¼šé»˜è®¤9092ï¼Œå¦‚æœKafkaä½¿ç”¨å…¶ä»–ç«¯å£éœ€è¦æ˜ç¡®æŒ‡å®š
- **åŸŸåvs IP**ï¼šæ¨èä½¿ç”¨åŸŸåï¼Œä¾¿äºåæœŸç»´æŠ¤å’Œè¿ç§»

**ğŸ” å¸¸è§é…ç½®åœºæ™¯**
```yaml
# å¼€å‘ç¯å¢ƒ - å•èŠ‚ç‚¹
hosts: ["localhost:9092"]

# æµ‹è¯•ç¯å¢ƒ - åŒèŠ‚ç‚¹
hosts: 
  - "test-kafka1:9092"
  - "test-kafka2:9092"

# ç”Ÿäº§ç¯å¢ƒ - å¤šèŠ‚ç‚¹é«˜å¯ç”¨
hosts:
  - "prod-kafka1.company.com:9092"
  - "prod-kafka2.company.com:9092" 
  - "prod-kafka3.company.com:9092"
```

---

## 3. ğŸ“¨ æ¶ˆæ¯è®¢é˜…ä¸æ¶ˆè´¹é…ç½®


### 3.1 ä¸»é¢˜è®¢é˜…é…ç½®


**ğŸ”¸ topicså‚æ•°**
```yaml
topics: 
  - "application-logs"      # åº”ç”¨æ—¥å¿—ä¸»é¢˜
  - "system-metrics"        # ç³»ç»ŸæŒ‡æ ‡ä¸»é¢˜
  - "error-alerts"          # é”™è¯¯å‘Šè­¦ä¸»é¢˜
```

> ğŸ§  **è®°å¿†æŠ€å·§**  
> topicså°±åƒè®¢é˜…æŠ¥çº¸ï¼Œä½ å¯ä»¥åŒæ—¶è®¢é˜…å¤šä»½ä¸åŒçš„æŠ¥çº¸(ä¸»é¢˜)ï¼ŒFilebeatä¼šæŠŠæ‰€æœ‰è®¢é˜…çš„å†…å®¹éƒ½æ”¶é›†èµ·æ¥

**ğŸ“‹ ä¸»é¢˜å‘½åå»ºè®®**
- **ç¯å¢ƒå‰ç¼€**ï¼š`prod-app-logs`, `test-app-logs`
- **åº”ç”¨åˆ†ç±»**ï¼š`nginx-access`, `mysql-slow-query`
- **æ—¥å¿—çº§åˆ«**ï¼š`error-logs`, `info-logs`, `debug-logs`

### 3.2 æ¶ˆè´¹è€…ç»„é…ç½®


**ğŸ”¸ group_idå‚æ•°**
```yaml
group_id: "filebeat-log-collectors"
```

**ğŸ“– æ¶ˆè´¹è€…ç»„æ¦‚å¿µè§£é‡Š**
```
æ¶ˆè´¹è€…ç»„çš„ä½œç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Kafka Topic   â”‚    â”‚ Consumer Groupâ”‚
â”‚                 â”‚    â”‚              â”‚
â”‚ Partition 0 â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ Filebeat-1   â”‚
â”‚ Partition 1 â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ Filebeat-2   â”‚  
â”‚ Partition 2 â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ Filebeat-3   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¥½å¤„ï¼šå¤šä¸ªFilebeatå®ä¾‹ååŒå·¥ä½œï¼Œé¿å…é‡å¤æ¶ˆè´¹
```

> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**  
> æ¶ˆè´¹è€…ç»„å°±åƒä¸€ä¸ªå›¢é˜Ÿï¼Œå›¢é˜Ÿé‡Œçš„æ¯ä¸ªäºº(Filebeatå®ä¾‹)è´Ÿè´£å¤„ç†ä¸åŒçš„å·¥ä½œ(åˆ†åŒº)ï¼Œè¿™æ ·æ—¢ä¸ä¼šé‡å¤å·¥ä½œï¼Œåˆèƒ½æé«˜æ•´ä½“æ•ˆç‡

**ğŸ¯ å‘½åè§„èŒƒ**
```yaml
# æŒ‰åŠŸèƒ½å‘½å
group_id: "elk-log-processors"      # ELKæ—¥å¿—å¤„ç†ç»„
group_id: "security-log-analyzers"  # å®‰å…¨æ—¥å¿—åˆ†æç»„
group_id: "business-metric-collectors" # ä¸šåŠ¡æŒ‡æ ‡æ”¶é›†ç»„
```

### 3.3 å®¢æˆ·ç«¯æ ‡è¯†é…ç½®


**ğŸ”¸ client_idå‚æ•°**
```yaml
client_id: "filebeat-server-01"
```

**ğŸ’­ ä½œç”¨è¯´æ˜**
- **ç›‘æ§è¯†åˆ«**ï¼šåœ¨Kafkaç®¡ç†ç•Œé¢ä¸­è¯†åˆ«ä¸åŒçš„å®¢æˆ·ç«¯
- **è°ƒè¯•å¸®åŠ©**ï¼šå‡ºç°é—®é¢˜æ—¶å¿«é€Ÿå®šä½æ˜¯å“ªä¸ªFilebeatå®ä¾‹
- **è¿æ¥ç®¡ç†**ï¼šKafkaæœåŠ¡ç«¯ç®¡ç†å®¢æˆ·ç«¯è¿æ¥çŠ¶æ€

**ğŸ·ï¸ æ¨èå‘½åæ–¹å¼**
```yaml
# æŒ‰æœåŠ¡å™¨å‘½å
client_id: "filebeat-web01"
client_id: "filebeat-app02" 
client_id: "filebeat-db03"

# æŒ‰ç¯å¢ƒ+è§’è‰²å‘½å  
client_id: "prod-filebeat-nginx"
client_id: "test-filebeat-mysql"
```

---

## 4. âš¡ æ€§èƒ½è°ƒä¼˜å‚æ•°


### 4.1 æ¶ˆæ¯è·å–å¤§å°é…ç½®


**ğŸ”¸ fetch.minå‚æ•°**
```yaml
fetch.min: 1024  # æœ€å°è·å–1KBæ•°æ®
```

**ğŸ“Š å‚æ•°å«ä¹‰**
```
Filebeatç­‰å¾…æœºåˆ¶ï¼š
æ—¶é—´è½´ï¼š0s â”€â”€â”€â”€â”€â”€ 1s â”€â”€â”€â”€â”€â”€ 2s â”€â”€â”€â”€â”€â”€> 
æ•°æ®é‡ï¼š0KB â”€â”€â”€â”€ 500B â”€â”€â”€â”€ 1.2KB â”€â”€â”€>
                            â†‘
                      è¾¾åˆ°æœ€å°å€¼ï¼Œå¼€å§‹å¤„ç†
```

> ğŸ” **é€šä¿—è§£é‡Š**  
> å°±åƒç­‰å…¬äº¤è½¦ï¼Œè¦ä¹ˆç­‰å¤Ÿæ—¶é—´ï¼Œè¦ä¹ˆç­‰å¤Ÿäººæ•°æ‰å‘è½¦ã€‚fetch.minå°±æ˜¯"ç­‰å¤Ÿæ•°æ®é‡"çš„æ ‡å‡†

**âš–ï¸ å‚æ•°è°ƒä¼˜å»ºè®®**

| ä¸šåŠ¡åœºæ™¯ | **æ¨èå€¼** | **åŸå› è¯´æ˜** |
|---------|-----------|-------------|
| ğŸš€ **é«˜é¢‘æ—¥å¿—** | `4096-8192` | `å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°` |
| ğŸ“± **å®æ—¶å‘Šè­¦** | `1-512` | `é™ä½å»¶è¿Ÿï¼Œå¿«é€Ÿå“åº”` |
| ğŸ’¾ **æ‰¹é‡å¤„ç†** | `16384-32768` | `æé«˜ååé‡æ•ˆç‡` |

**ğŸ”¸ fetch.maxå‚æ•°**
```yaml
fetch.max: 1048576  # æœ€å¤§è·å–1MBæ•°æ®
```

**ğŸ¯ è®¾ç½®åŸåˆ™**
- **å†…å­˜è€ƒè™‘**ï¼šä¸è¦è®¾ç½®è¿‡å¤§ï¼Œé¿å…å†…å­˜å ç”¨è¿‡å¤š
- **ç½‘ç»œå¸¦å®½**ï¼šæ ¹æ®ç½‘ç»œæƒ…å†µè®¾ç½®åˆç†çš„ä¼ è¾“å¤§å°
- **å¤„ç†èƒ½åŠ›**ï¼šè€ƒè™‘Filebeatçš„å¤„ç†é€Ÿåº¦

### 4.2 æ¶ˆè´¹è€…ç»„é«˜çº§é…ç½®


**ğŸ”¸ consumer_groupé…ç½®å—**
```yaml
consumer_group:
  session.timeout: 30s      # ä¼šè¯è¶…æ—¶æ—¶é—´
  heartbeat.interval: 10s   # å¿ƒè·³é—´éš”
  rebalance.timeout: 60s    # é‡å¹³è¡¡è¶…æ—¶
```

**ğŸ“‹ å‚æ•°è¯¦ç»†è¯´æ˜**

**session.timeout (ä¼šè¯è¶…æ—¶)**
```
ä½œç”¨ï¼šæ£€æµ‹æ¶ˆè´¹è€…æ˜¯å¦è¿˜æ´»ç€
é»˜è®¤ï¼š30ç§’
è°ƒä¼˜ï¼šç½‘ç»œä¸ç¨³å®šæ—¶å¯é€‚å½“å¢åŠ åˆ°60s-120s
```

**heartbeat.interval (å¿ƒè·³é—´éš”)**
```
ä½œç”¨ï¼šå®šæœŸå‘Kafkaå‘é€"æˆ‘è¿˜æ´»ç€"çš„ä¿¡å·
é»˜è®¤ï¼š10ç§’  
è§„åˆ™ï¼šå¿…é¡»å°äºsession.timeoutçš„1/3
```

**rebalance.timeout (é‡å¹³è¡¡è¶…æ—¶)**
```
ä½œç”¨ï¼šå½“æ¶ˆè´¹è€…ç»„æˆå‘˜å˜åŒ–æ—¶ï¼Œé‡æ–°åˆ†é…åˆ†åŒºçš„æœ€å¤§ç­‰å¾…æ—¶é—´
é»˜è®¤ï¼š60ç§’
åœºæ™¯ï¼šæ–°å¢æˆ–ç§»é™¤Filebeatå®ä¾‹æ—¶ç”Ÿæ•ˆ
```

### 4.3 Kafkaç‰ˆæœ¬è®¾ç½®


**ğŸ”¸ versionå‚æ•°**
```yaml
version: "2.8.0"  # æŒ‡å®šKafkaç‰ˆæœ¬
```

**ğŸ“Œ ç‰ˆæœ¬å…¼å®¹æ€§**
```
Kafkaç‰ˆæœ¬å‘å±•ï¼š
2.4.x â”€â”€> 2.6.x â”€â”€> 2.8.x â”€â”€> 3.0.x
  â†“        â†“        â†“        â†“
æ—§åè®®   å¢å¼ºåŠŸèƒ½  ç¨³å®šç‰ˆæœ¬  æ–°ç‰¹æ€§
```

> âš ï¸ **é‡è¦æé†’**  
> ç‰ˆæœ¬ä¸åŒ¹é…å¯èƒ½å¯¼è‡´è¿æ¥å¤±è´¥æˆ–åŠŸèƒ½å¼‚å¸¸ï¼ŒåŠ¡å¿…ç¡®è®¤Kafkaé›†ç¾¤çš„å®é™…ç‰ˆæœ¬

**ğŸ” ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•**
```bash
# æ–¹æ³•1ï¼šåœ¨KafkaæœåŠ¡å™¨ä¸ŠæŸ¥çœ‹
./kafka-broker-api-versions.sh --bootstrap-server localhost:9092

# æ–¹æ³•2ï¼šæŸ¥çœ‹Kafkaé…ç½®æ–‡ä»¶
grep "inter.broker.protocol.version" server.properties
```

---

## 5. ğŸ“„ å®Œæ•´é…ç½®ç¤ºä¾‹


### 5.1 åŸºç¡€ç”Ÿäº§ç¯å¢ƒé…ç½®


```yaml
filebeat.inputs:
- type: kafka
  # åŸºç¡€è¿æ¥é…ç½®
  hosts:
    - "kafka-01.prod.com:9092"
    - "kafka-02.prod.com:9092"
    - "kafka-03.prod.com:9092"
  
  # æ¶ˆæ¯è®¢é˜…é…ç½®
  topics:
    - "application-logs"
    - "nginx-access-logs"
  
  # æ¶ˆè´¹è€…é…ç½®
  group_id: "filebeat-production-logs"
  client_id: "filebeat-web-server-01"
  
  # æ€§èƒ½è°ƒä¼˜
  fetch.min: 4096
  fetch.max: 1048576
  
  # ç‰ˆæœ¬è®¾ç½®
  version: "2.8.0"
  
  # è¾“å‡ºå­—æ®µè®¾ç½®
  fields:
    log_source: "kafka"
    environment: "production"
  fields_under_root: true
```

### 5.2 é«˜æ€§èƒ½åœºæ™¯é…ç½®


```yaml
filebeat.inputs:
- type: kafka
  hosts:
    - "kafka-cluster.internal:9092"
  
  topics: ["high-volume-logs"]
  
  group_id: "filebeat-high-performance"
  client_id: "filebeat-worker-${HOSTNAME}"
  
  # é«˜æ€§èƒ½å‚æ•°
  fetch.min: 16384        # 16KBæœ€å°è·å–
  fetch.max: 5242880      # 5MBæœ€å¤§è·å–
  
  # æ¶ˆè´¹è€…ç»„ä¼˜åŒ–
  consumer_group:
    session.timeout: 60s
    heartbeat.interval: 20s
    rebalance.timeout: 120s
  
  version: "2.8.0"
  
  # æ‰¹é‡å¤„ç†ä¼˜åŒ–
  max_message_size: 10485760  # 10MBæœ€å¤§æ¶ˆæ¯
```

### 5.3 å¤šç¯å¢ƒé…ç½®æ¨¡æ¿


```yaml
# å¼€å‘ç¯å¢ƒ
filebeat.inputs:
- type: kafka
  hosts: ["dev-kafka:9092"]
  topics: ["dev-app-logs"]
  group_id: "filebeat-dev"
  client_id: "filebeat-dev-${HOSTNAME}"
  fetch.min: 1024
  fetch.max: 524288
  version: "2.6.0"

---
# æµ‹è¯•ç¯å¢ƒ  
filebeat.inputs:
- type: kafka
  hosts: 
    - "test-kafka1:9092"
    - "test-kafka2:9092"
  topics: ["test-app-logs", "test-system-logs"]
  group_id: "filebeat-test"
  client_id: "filebeat-test-${HOSTNAME}"
  fetch.min: 2048
  fetch.max: 1048576
  version: "2.8.0"

---
# ç”Ÿäº§ç¯å¢ƒ
filebeat.inputs:
- type: kafka
  hosts:
    - "prod-kafka1:9092"
    - "prod-kafka2:9092"
    - "prod-kafka3:9092"
  topics: ["prod-app-logs", "prod-nginx-logs", "prod-error-logs"]
  group_id: "filebeat-prod-collectors"
  client_id: "filebeat-prod-${HOSTNAME}"
  fetch.min: 8192
  fetch.max: 2097152
  consumer_group:
    session.timeout: 90s
    heartbeat.interval: 30s
    rebalance.timeout: 180s
  version: "2.8.0"
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ Kafkaè¾“å…¥ï¼šFilebeatä½œä¸ºKafkaæ¶ˆè´¹è€…ï¼Œä»æ¶ˆæ¯é˜Ÿåˆ—è¯»å–æ—¥å¿—æ•°æ®
ğŸ”¸ é›†ç¾¤é…ç½®ï¼šhostså‚æ•°é…ç½®å¤šä¸ªKafkaèŠ‚ç‚¹ï¼Œæé«˜å¯ç”¨æ€§
ğŸ”¸ ä¸»é¢˜è®¢é˜…ï¼štopicså‚æ•°æŒ‡å®šè¦æ¶ˆè´¹çš„Kafkaä¸»é¢˜
ğŸ”¸ æ¶ˆè´¹è€…ç»„ï¼šgroup_idå®ç°å¤šFilebeatååŒå·¥ä½œï¼Œé¿å…é‡å¤æ¶ˆè´¹
ğŸ”¸ æ€§èƒ½è°ƒä¼˜ï¼šfetchå‚æ•°æ§åˆ¶æ•°æ®è·å–ç­–ç•¥ï¼Œå¹³è¡¡å»¶è¿Ÿå’Œååé‡
```

### 6.2 å…³é”®é…ç½®å‚æ•°è®°å¿†


**ğŸ§  æ ¸å¿ƒå‚æ•°å£è¯€**
```
ç±»å‹kafkaè¿é›†ç¾¤ï¼Œä¸»é¢˜è®¢é˜…åˆ†ç»„ç®¡
å®¢æˆ·æ ‡è¯†å¥½åŒºåˆ†ï¼Œè·å–å¤§å°æ€§èƒ½å…³
ç‰ˆæœ¬åŒ¹é…å¾ˆé‡è¦ï¼Œå‚æ•°è®¾ç½®è¦åˆç†
```

**ğŸ¯ å‚æ•°ä¼˜å…ˆçº§**
```
å¿…é…å‚æ•°ï¼štype, hosts, topics, group_id
é‡è¦å‚æ•°ï¼šclient_id, version, fetch.min/max
å¯é€‰å‚æ•°ï¼šconsumer_groupå„é¡¹è¶…æ—¶è®¾ç½®
```

### 6.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ é…ç½®é€‰æ‹©ç­–ç•¥**

```
ğŸŸ¢ **è½»é‡çº§åœºæ™¯**
- å°è§„æ¨¡åº”ç”¨ï¼Œæ•°æ®é‡ä¸å¤§
- ä½¿ç”¨åŸºç¡€é…ç½®å³å¯
- fetch.min: 1024, fetch.max: 1MB

ğŸŸ¡ **ä¸­ç­‰è§„æ¨¡åœºæ™¯**  
- å¤šä¸ªåº”ç”¨ï¼Œé€‚ä¸­æ•°æ®é‡
- éœ€è¦é€‚åº¦è°ƒä¼˜
- fetch.min: 4096, fetch.max: 2MB

ğŸ”´ **é«˜è´Ÿè½½åœºæ™¯**
- å¤§è§„æ¨¡é›†ç¾¤ï¼Œæµ·é‡æ•°æ®
- é‡ç‚¹æ€§èƒ½è°ƒä¼˜
- fetch.min: 16384, fetch.max: 5MB
- é…ç½®consumer_groupè¶…æ—¶å‚æ•°
```

### 6.4 å¸¸è§é—®é¢˜é¿å…


**âš ï¸ é…ç½®è¯¯åŒº**
```
âŒ ç‰ˆæœ¬ä¸åŒ¹é…ï¼šå¯¼è‡´è¿æ¥å¤±è´¥
âœ… ç¡®è®¤Kafkaé›†ç¾¤ç‰ˆæœ¬ï¼Œæ­£ç¡®è®¾ç½®versionå‚æ•°

âŒ fetchè®¾ç½®è¿‡å°ï¼šé¢‘ç¹ç½‘ç»œè¯·æ±‚ï¼Œæ€§èƒ½ä½ä¸‹  
âœ… æ ¹æ®æ•°æ®é‡åˆç†è®¾ç½®fetch.min

âŒ æ¶ˆè´¹è€…ç»„IDå†²çªï¼šå¤šä¸ªåº”ç”¨ä½¿ç”¨ç›¸åŒgroup_id
âœ… ä¸ºä¸åŒç”¨é€”è®¾ç½®ä¸åŒçš„group_id

âŒ å®¢æˆ·ç«¯IDé‡å¤ï¼šéš¾ä»¥æ’æŸ¥é—®é¢˜
âœ… ä½¿ç”¨å”¯ä¸€çš„client_idï¼Œå»ºè®®åŒ…å«ä¸»æœºå
```

**ğŸ”§ æ•…éšœæ’æŸ¥æ€è·¯**
```
è¿æ¥é—®é¢˜ï¼š
1. æ£€æŸ¥hostsåœ°å€å’Œç«¯å£æ˜¯å¦æ­£ç¡®
2. éªŒè¯ç½‘ç»œè¿é€šæ€§
3. ç¡®è®¤KafkaæœåŠ¡çŠ¶æ€

æ¶ˆè´¹é—®é¢˜ï¼š
1. æ£€æŸ¥topicsæ˜¯å¦å­˜åœ¨
2. éªŒè¯group_idæ˜¯å¦æœ‰æƒé™
3. æŸ¥çœ‹Kafkaæ—¥å¿—

æ€§èƒ½é—®é¢˜ï¼š  
1. è°ƒæ•´fetchå‚æ•°
2. æ£€æŸ¥consumer_groupè®¾ç½®
3. ç›‘æ§ç½‘ç»œå’ŒCPUä½¿ç”¨ç‡
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- Kafkaè¾“å…¥è®©Filebeatå˜èº«æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹è€…
- é…ç½®é›†ç¾¤åœ°å€æé«˜å¯ç”¨æ€§ï¼Œé¿å…å•ç‚¹æ•…éšœ
- æ¶ˆè´¹è€…ç»„å®ç°ååŒå·¥ä½œï¼Œæå‡å¤„ç†æ•ˆç‡
- æ€§èƒ½å‚æ•°éœ€è¦æ ¹æ®å®é™…æƒ…å†µè°ƒä¼˜å¹³è¡¡