---
title: 3ã€å®‰å…¨è®¤è¯ä¸åŠ å¯†é…ç½®
---
## ğŸ“š ç›®å½•

1. [å®‰å…¨è®¤è¯åŸºç¡€æ¦‚å¿µ](#1-å®‰å…¨è®¤è¯åŸºç¡€æ¦‚å¿µ)
2. [SSL/TLSåŠ å¯†é…ç½®](#2-ssltlsåŠ å¯†é…ç½®)
3. [åŸºç¡€è®¤è¯æ–¹å¼](#3-åŸºç¡€è®¤è¯æ–¹å¼)
4. [é«˜çº§è®¤è¯é…ç½®](#4-é«˜çº§è®¤è¯é…ç½®)
5. [äº‘æœåŠ¡è®¤è¯](#5-äº‘æœåŠ¡è®¤è¯)
6. [å¯†é’¥åº“ç®¡ç†](#6-å¯†é’¥åº“ç®¡ç†)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” å®‰å…¨è®¤è¯åŸºç¡€æ¦‚å¿µ


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦å®‰å…¨è®¤è¯


**ğŸ¤” æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”**
```
å°±åƒä½ å®¶çš„é—¨é”ï¼š
ğŸ  å®¶é—¨ = ElasticsearchæœåŠ¡å™¨
ğŸ—ï¸ é’¥åŒ™ = è®¤è¯è¯ä¹¦/å¯†ç 
ğŸ‘® ä¿å®‰ = SSLåŠ å¯†ä¼ è¾“
ğŸ“¨ å¿«é€’ = æ—¥å¿—æ•°æ®

æ²¡æœ‰è®¤è¯ = ä»»ä½•äººéƒ½èƒ½è¿›ä½ å®¶æ‹¿ä¸œè¥¿
æœ‰äº†è®¤è¯ = åªæœ‰æˆæƒçš„äººæ‰èƒ½è®¿é—®æ•°æ®
```

**ğŸ¯ æ ¸å¿ƒä½œç”¨**
- **èº«ä»½éªŒè¯**ï¼šç¡®è®¤ä½ æ˜¯è°ï¼ˆåƒèº«ä»½è¯ï¼‰
- **æ•°æ®åŠ å¯†**ï¼šä¿æŠ¤ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®ï¼ˆåƒå¯†ç ç®±ï¼‰
- **æƒé™æ§åˆ¶**ï¼šé™åˆ¶èƒ½åšä»€ä¹ˆæ“ä½œï¼ˆåƒé—¨ç¦å¡ï¼‰

### 1.2 Filebeatå®‰å…¨è®¤è¯ä½“ç³»ç»“æ„


```
Filebeatå®¢æˆ·ç«¯                    ElasticsearchæœåŠ¡ç«¯
     |                                    |
   ğŸ“Š æ—¥å¿—æ•°æ®                          ğŸ—„ï¸ å­˜å‚¨æ•°æ®
     |                                    |
   ğŸ”’ åŠ å¯†é…ç½®                          ğŸ›¡ï¸ å®‰å…¨éªŒè¯
     |                                    |
   ğŸŒ ç½‘ç»œä¼ è¾“ â†â†’ ğŸ” SSL/TLS åŠ å¯† â†â†’   ğŸ“¡ æ¥æ”¶å¤„ç†
```

**é‡è¦ç¨‹åº¦æ ‡è¯†**ï¼š
- ğŸ”´ **å¿…é¡»æŒæ¡**ï¼šç”Ÿäº§ç¯å¢ƒå¿…éœ€çš„å®‰å…¨é…ç½®
- ğŸŸ¡ **å»ºè®®äº†è§£**ï¼šæå‡å®‰å…¨æ€§çš„é¢å¤–é…ç½®
- ğŸŸ¢ **æ‹“å±•çŸ¥è¯†**ï¼šç‰¹æ®Šåœºæ™¯ä¸‹çš„é«˜çº§é…ç½®

---

## 2. ğŸ›¡ï¸ SSL/TLSåŠ å¯†é…ç½®


### 2.1 CAè¯ä¹¦é…ç½® (ssl.certificate_authorities)


**ğŸ“– æ¦‚å¿µè§£é‡Š**
> **CAè¯ä¹¦æ˜¯ä»€ä¹ˆï¼Ÿ**
> 
> å°±åƒæ”¿åºœå‘çš„èº«ä»½è¯ï¼ŒCAï¼ˆCertificate Authorityï¼‰æ˜¯è¯ä¹¦é¢å‘æœºæ„
> CAè¯ä¹¦å‘Šè¯‰Filebeatï¼š"ç›¸ä¿¡è¿™ä¸ªè¯ä¹¦çš„æœåŠ¡å™¨æ˜¯å®‰å…¨çš„"

**ğŸ”´ å¿…é¡»æŒæ¡ï¼šåŸºç¡€CAè¯ä¹¦é…ç½®**

```yaml
# æœ€åŸºæœ¬çš„CAè¯ä¹¦é…ç½®
output.elasticsearch:
  hosts: ["https://elasticsearch.example.com:9200"]
  ssl.certificate_authorities: ["/path/to/ca.crt"]
```

**ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯**
```
ç”Ÿäº§ç¯å¢ƒç¤ºä¾‹ï¼š
elasticsearch.yml ä¸­é…ç½®äº†è‡ªç­¾åè¯ä¹¦
â†“
Filebeatéœ€è¦CAè¯ä¹¦æ¥éªŒè¯Elasticsearchçš„èº«ä»½
â†“
é˜²æ­¢ä¸­é—´äººæ”»å‡»å’Œæ•°æ®æ³„éœ²
```

**ğŸ”§ å¤šCAè¯ä¹¦é…ç½®**
```yaml
# æ”¯æŒå¤šä¸ªCAè¯ä¹¦ï¼ˆé€‚ç”¨äºå¤šé›†ç¾¤ç¯å¢ƒï¼‰
output.elasticsearch:
  hosts: ["https://es1.com:9200", "https://es2.com:9200"]
  ssl.certificate_authorities: 
    - "/etc/filebeat/ca/root-ca.crt"
    - "/etc/filebeat/ca/intermediate-ca.crt"
```

### 2.2 å®¢æˆ·ç«¯è¯ä¹¦é…ç½® (ssl.certificate & ssl.key)


**ğŸ“– æ¦‚å¿µè§£é‡Š**
> **å®¢æˆ·ç«¯è¯ä¹¦å°±åƒåŒå‘éªŒè¯**
> 
> ä¸ä»…æœåŠ¡å™¨è¦è¯æ˜èº«ä»½ï¼Œå®¢æˆ·ç«¯ä¹Ÿè¦è¯æ˜èº«ä»½
> å°±åƒé“¶è¡ŒåŠä¸šåŠ¡ï¼Œä½ è¦èº«ä»½è¯ï¼Œé“¶è¡Œä¹Ÿè¦è¥ä¸šæ‰§ç…§

**ğŸ”´ å¿…é¡»æŒæ¡ï¼šåŒå‘è®¤è¯é…ç½®**

```yaml
# å®¢æˆ·ç«¯è¯ä¹¦é…ç½®
output.elasticsearch:
  hosts: ["https://elasticsearch.example.com:9200"]
  ssl.certificate_authorities: ["/path/to/ca.crt"]
  ssl.certificate: "/path/to/client.crt"  # å®¢æˆ·ç«¯è¯ä¹¦
  ssl.key: "/path/to/client.key"          # å®¢æˆ·ç«¯ç§é’¥
```

**âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹**
```
ç§é’¥æ–‡ä»¶æƒé™è®¾ç½®ï¼š
chmod 600 /path/to/client.key  # åªæœ‰æ‰€æœ‰è€…å¯è¯»å†™
chown filebeat:filebeat /path/to/client.key
```

### 2.3 SSLéªŒè¯æ¨¡å¼ (ssl.verification_mode)


**ğŸ“Š éªŒè¯æ¨¡å¼å¯¹æ¯”è¡¨**

| éªŒè¯æ¨¡å¼ | **å®‰å…¨çº§åˆ«** | **ä½¿ç”¨åœºæ™¯** | **éªŒè¯å†…å®¹** |
|---------|------------|-------------|-------------|
| `full` | ğŸ”´ **æœ€é«˜** | `ç”Ÿäº§ç¯å¢ƒæ¨è` | `è¯ä¹¦+ä¸»æœºå` |
| `certificate` | ğŸŸ¡ **ä¸­ç­‰** | `æµ‹è¯•ç¯å¢ƒ` | `ä»…éªŒè¯è¯ä¹¦` |
| `none` | ğŸŸ¢ **æœ€ä½** | `å¼€å‘è°ƒè¯•` | `ä¸éªŒè¯` |

**ğŸ”´ å¿…é¡»æŒæ¡ï¼šç”Ÿäº§ç¯å¢ƒé…ç½®**
```yaml
# ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®
output.elasticsearch:
  hosts: ["https://prod-es.company.com:9200"]
  ssl.verification_mode: "full"  # å®Œæ•´éªŒè¯
  ssl.certificate_authorities: ["/etc/ssl/ca.crt"]
```

**ğŸŸ¡ å»ºè®®äº†è§£ï¼šæµ‹è¯•ç¯å¢ƒé…ç½®**
```yaml
# æµ‹è¯•ç¯å¢ƒå¿«é€Ÿé…ç½®
output.elasticsearch:
  hosts: ["https://test-es.local:9200"]
  ssl.verification_mode: "certificate"  # åªéªŒè¯è¯ä¹¦
  ssl.certificate_authorities: ["/tmp/test-ca.crt"]
```

---

## 3. ğŸ”‘ åŸºç¡€è®¤è¯æ–¹å¼


### 3.1 ç”¨æˆ·åå¯†ç è®¤è¯ (username/password)


**ğŸ“– æ¦‚å¿µè§£é‡Š**
> **æœ€ç®€å•çš„è®¤è¯æ–¹å¼**
> 
> å°±åƒç™»å½•QQä¸€æ ·ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
> é€‚åˆå°å›¢é˜Ÿæˆ–ç®€å•ç¯å¢ƒ

**ğŸ”´ å¿…é¡»æŒæ¡ï¼šåŸºç¡€å¯†ç è®¤è¯**

```yaml
# ç”¨æˆ·åå¯†ç è®¤è¯
output.elasticsearch:
  hosts: ["https://elasticsearch.example.com:9200"]
  username: "filebeat_user"
  password: "your_secure_password"
  ssl.certificate_authorities: ["/path/to/ca.crt"]
```

**ğŸ¯ æœ€ä½³å®è·µç¤ºä¾‹**
```yaml
# ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®
output.elasticsearch:
  hosts: ["${ES_HOSTS}"]  # ä½¿ç”¨ç¯å¢ƒå˜é‡
  username: "${ES_USERNAME}"
  password: "${ES_PASSWORD}"
  ssl.certificate_authorities: ["${ES_CA_CERT}"]
  ssl.verification_mode: "full"
```

**ğŸ’¡ ç¯å¢ƒå˜é‡è®¾ç½®**
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ¨èæ–¹å¼ï¼‰
export ES_HOSTS="https://es1.company.com:9200,https://es2.company.com:9200"
export ES_USERNAME="filebeat_service"
export ES_PASSWORD="complex_password_123"
export ES_CA_CERT="/etc/filebeat/ssl/ca.crt"
```

### 3.2 APIå¯†é’¥è®¤è¯ (api_key)


**ğŸ“– æ¦‚å¿µè§£é‡Š**
> **APIå¯†é’¥è®¤è¯æ›´å®‰å…¨**
> 
> åƒæ‰‹æœºAPPçš„æˆæƒç ï¼Œä¸éœ€è¦çŸ¥é“çœŸå®å¯†ç 
> å¯ä»¥éšæ—¶æ’¤é”€ï¼Œæƒé™æ›´ç²¾ç¡®

**ğŸŸ¡ å»ºè®®äº†è§£ï¼šAPIå¯†é’¥é…ç½®**

```yaml
# APIå¯†é’¥è®¤è¯æ–¹å¼
output.elasticsearch:
  hosts: ["https://elasticsearch.example.com:9200"]
  api_key: "filebeat_api_key_here"  # å•ä¸ªå¯†é’¥
  ssl.certificate_authorities: ["/path/to/ca.crt"]
```

**ğŸ”§ ç”ŸæˆAPIå¯†é’¥ç¤ºä¾‹**
```bash
# åœ¨Elasticsearchä¸­åˆ›å»ºAPIå¯†é’¥
curl -X POST "elasticsearch.example.com:9200/_security/api_key" \
-H "Content-Type: application/json" \
-u "admin:admin_password" \
-d '{
  "name": "filebeat-access",
  "role_descriptors": {
    "filebeat_writer": {
      "cluster": ["monitor"],
      "index": [
        {
          "names": ["filebeat-*"],
          "privileges": ["write", "create_index"]
        }
      ]
    }
  }
}'
```

---

## 4. ğŸ¯ é«˜çº§è®¤è¯é…ç½®


### 4.1 å¤šé‡è®¤è¯ç»„åˆ


**ğŸ’¡ ç”Ÿäº§ç¯å¢ƒå®Œæ•´é…ç½®ç¤ºä¾‹**
```yaml
# ä¼ä¸šçº§å®‰å…¨é…ç½®æ¨¡æ¿
filebeat.yml:
  
# è¾“å‡ºåˆ°Elasticsearch
output.elasticsearch:
  hosts: ["https://es-cluster.company.com:9200"]
  
  # SSLåŠ å¯†é…ç½®
  ssl.certificate_authorities: ["/etc/filebeat/ssl/ca-bundle.crt"]
  ssl.certificate: "/etc/filebeat/ssl/filebeat-client.crt"
  ssl.key: "/etc/filebeat/ssl/filebeat-client.key"
  ssl.verification_mode: "full"
  
  # è®¤è¯é…ç½®
  username: "filebeat_prod"
  password: "${FILEBEAT_PASSWORD}"
  
  # æ€§èƒ½ä¼˜åŒ–
  worker: 2
  bulk_max_size: 3200
  timeout: 90s
```

**ğŸ”’ å®‰å…¨é…ç½®æ£€æŸ¥æ¸…å•**
```
âœ… SSLè¯ä¹¦é…ç½®æ£€æŸ¥ï¼š
- [ ] CAè¯ä¹¦è·¯å¾„æ­£ç¡®
- [ ] å®¢æˆ·ç«¯è¯ä¹¦æƒé™è®¾ç½®ï¼ˆ600ï¼‰
- [ ] ç§é’¥æ–‡ä»¶å®‰å…¨å­˜å‚¨
- [ ] éªŒè¯æ¨¡å¼è®¾ç½®ä¸ºfull

âœ… è®¤è¯é…ç½®æ£€æŸ¥ï¼š
- [ ] å¯†ç ä½¿ç”¨ç¯å¢ƒå˜é‡
- [ ] APIå¯†é’¥æƒé™æœ€å°åŒ–
- [ ] å®šæœŸè½®æ¢è®¤è¯ä¿¡æ¯
```

### 4.2 æ¡ä»¶è®¤è¯é…ç½®


**ğŸŸ¢ æ‹“å±•çŸ¥è¯†ï¼šå¤šç¯å¢ƒè®¤è¯**
```yaml
# æ ¹æ®ç¯å¢ƒä½¿ç”¨ä¸åŒè®¤è¯æ–¹å¼
output.elasticsearch:
  hosts: ["${ES_HOSTS}"]
  
  # å¼€å‘ç¯å¢ƒ
  username: "${DEV_ES_USER:filebeat_dev}"
  password: "${DEV_ES_PASS:dev_password}"
  
  # ç”Ÿäº§ç¯å¢ƒä¼šè¦†ç›–ä¸Šè¿°é…ç½®
  api_key: "${PROD_API_KEY:}"
  
  ssl.certificate_authorities: ["${ES_CA_CERT}"]
  ssl.verification_mode: "${SSL_MODE:certificate}"
```

---

## 5. â˜ï¸ äº‘æœåŠ¡è®¤è¯


### 5.1 Elastic Cloudè®¤è¯ (cloud.id & cloud.auth)


**ğŸ“– æ¦‚å¿µè§£é‡Š**
> **Elastic Cloudæ˜¯å®˜æ–¹äº‘æœåŠ¡**
> 
> å°±åƒä½¿ç”¨è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ä¸€æ ·çš„æ‰˜ç®¡æœåŠ¡
> ä¸éœ€è¦è‡ªå·±ç®¡ç†æœåŠ¡å™¨ï¼Œä½†éœ€è¦ä¸“é—¨çš„è®¤è¯æ–¹å¼

**ğŸ”´ å¿…é¡»æŒæ¡ï¼šElastic Cloudé…ç½®**

```yaml
# Elastic CloudåŸºç¡€é…ç½®
cloud.id: "deployment-name:dXMtZWFzdC0xLmF3cy5mb3VuZC5pbyRjZW..."
cloud.auth: "elastic:your_elastic_password"

# æ³¨æ„ï¼šä½¿ç”¨cloudé…ç½®æ—¶ä¸éœ€è¦output.elasticsearch
# Filebeatä¼šè‡ªåŠ¨è¿æ¥åˆ°äº‘æœåŠ¡
```

**ğŸ’¡ å®é™…é…ç½®ç¤ºä¾‹**
```yaml
# å®Œæ•´çš„Elastic Cloudé…ç½®
filebeat.yml:

# äº‘æœåŠ¡è®¤è¯
cloud.id: "${ELASTIC_CLOUD_ID}"
cloud.auth: "${ELASTIC_CLOUD_AUTH}"

# è¾“å…¥é…ç½®
filebeat.inputs:
- type: log
  enabled: true
  paths:
    - /var/log/nginx/*.log
    
# ä¸éœ€è¦output.elasticsearché…ç½®ï¼
```

### 5.2 äº‘æœåŠ¡ç¯å¢ƒå˜é‡é…ç½®


**ğŸ”§ ç¯å¢ƒå˜é‡æœ€ä½³å®è·µ**
```bash
# æ¨èçš„ç¯å¢ƒå˜é‡è®¾ç½®
export ELASTIC_CLOUD_ID="my-deployment:dXMtZWFzdC0xLmF3cy5mb3VuZC5pbyRjZW..."
export ELASTIC_CLOUD_AUTH="filebeat_user:secure_cloud_password"

# å¯åŠ¨Filebeat
./filebeat -e -c filebeat.yml
```

---

## 6. ğŸ—ï¸ å¯†é’¥åº“ç®¡ç†


### 6.1 Filebeat KeystoreåŸºç¡€


**ğŸ“– æ¦‚å¿µè§£é‡Š**
> **Keystoreæ˜¯åŠ å¯†çš„å¯†ç ä¿é™©ç®±**
> 
> æŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ï¼‰åŠ å¯†å­˜å‚¨
> æ¯”ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶é‡Œå®‰å…¨å¾—å¤š

**ğŸ”´ å¿…é¡»æŒæ¡ï¼šåˆ›å»ºå’Œä½¿ç”¨Keystore**

```bash
# 1. åˆ›å»ºkeystore
./filebeat keystore create

# 2. æ·»åŠ å¯†ç 
./filebeat keystore add ES_PASSWORD
# æç¤ºè¾“å…¥å¯†ç æ—¶è¾“å…¥çœŸå®å¯†ç 

# 3. æ·»åŠ APIå¯†é’¥
./filebeat keystore add ES_API_KEY
```

**é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨Keystore**
```yaml
# åœ¨filebeat.ymlä¸­å¼•ç”¨keystoreä¸­çš„å€¼
output.elasticsearch:
  hosts: ["https://elasticsearch.example.com:9200"]
  password: "${ES_PASSWORD}"     # ä»keystoreè¯»å–
  api_key: "${ES_API_KEY}"       # ä»keystoreè¯»å–
  ssl.certificate_authorities: ["/path/to/ca.crt"]
```

### 6.2 Keystoreé«˜çº§ç®¡ç†


**ğŸŸ¡ å»ºè®®äº†è§£ï¼šKeystoreç®¡ç†å‘½ä»¤**

```bash
# æŸ¥çœ‹keystoreä¸­çš„æ‰€æœ‰é”®å
./filebeat keystore list

# åˆ é™¤æŒ‡å®šé”®
./filebeat keystore remove ES_PASSWORD

# æ›´æ–°å·²å­˜åœ¨çš„é”®
./filebeat keystore add ES_PASSWORD --force
```

**ğŸ”’ Keystoreå®‰å…¨å®è·µ**
```bash
# è®¾ç½®keystoreæ–‡ä»¶æƒé™
chmod 600 /etc/filebeat/filebeat.keystore
chown filebeat:filebeat /etc/filebeat/filebeat.keystore

# å¤‡ä»½keystoreï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
cp /etc/filebeat/filebeat.keystore /backup/filebeat.keystore.backup
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SSL/TLSåŠ å¯†ï¼šä¿æŠ¤æ•°æ®ä¼ è¾“çš„"ä¿¡å°"
ğŸ”¸ CAè¯ä¹¦ï¼šéªŒè¯æœåŠ¡å™¨èº«ä»½çš„"èº«ä»½è¯"
ğŸ”¸ å®¢æˆ·ç«¯è¯ä¹¦ï¼šåŒå‘éªŒè¯çš„"é€šè¡Œè¯"
ğŸ”¸ ç”¨æˆ·åå¯†ç ï¼šæœ€åŸºç¡€çš„"é—¨ç¦å¡"
ğŸ”¸ APIå¯†é’¥ï¼šæ›´å®‰å…¨çš„"æˆæƒä»¤ç‰Œ"
ğŸ”¸ Keystoreï¼šæ•æ„Ÿä¿¡æ¯çš„"ä¿é™©ç®±"
```

### 7.2 å®‰å…¨é…ç½®ä¼˜å…ˆçº§


**ğŸ¯ ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®**
```yaml
# ä¼ä¸šçº§æ ‡å‡†é…ç½®æ¨¡æ¿
output.elasticsearch:
  hosts: ["${ES_HOSTS}"]
  
  # æœ€é«˜çº§åˆ«SSLé…ç½®
  ssl.certificate_authorities: ["${CA_CERT}"]
  ssl.certificate: "${CLIENT_CERT}"
  ssl.key: "${CLIENT_KEY}"
  ssl.verification_mode: "full"
  
  # ä½¿ç”¨keystoreå­˜å‚¨å¯†ç 
  username: "${ES_USERNAME}"
  password: "${ES_PASSWORD}"  # ä»keystoreè¯»å–
```

### 7.3 å¸¸è§å®‰å…¨è¯¯åŒº


**âŒ å¸¸è§é”™è¯¯é…ç½®**
```yaml
# é”™è¯¯ç¤ºä¾‹1ï¼šå…³é—­SSLéªŒè¯
ssl.verification_mode: "none"  # âŒ ç”Ÿäº§ç¯å¢ƒå±é™©

# é”™è¯¯ç¤ºä¾‹2ï¼šç¡¬ç¼–ç å¯†ç 
password: "123456"  # âŒ å¯†ç ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶

# é”™è¯¯ç¤ºä¾‹3ï¼šä½¿ç”¨HTTP
hosts: ["http://elasticsearch:9200"]  # âŒ ä¸åŠ å¯†ä¼ è¾“
```

**âœ… æ­£ç¡®å®‰å…¨é…ç½®**
```yaml
# æ­£ç¡®ç¤ºä¾‹ï¼šå®Œæ•´å®‰å…¨é…ç½®
output.elasticsearch:
  hosts: ["https://es.company.com:9200"]  # âœ… HTTPS
  ssl.verification_mode: "full"           # âœ… å®Œæ•´éªŒè¯
  password: "${ES_PASSWORD}"              # âœ… ç¯å¢ƒå˜é‡æˆ–keystore
```

### 7.4 å®‰å…¨é…ç½®å†³ç­–æ ‘


```
éœ€è¦é…ç½®Elasticsearchè®¤è¯ï¼Ÿ
â”œâ”€ æ˜¯ â†’ é€‰æ‹©è®¤è¯æ–¹å¼
â”‚   â”œâ”€ äº‘æœåŠ¡ â†’ ä½¿ç”¨cloud.id + cloud.auth
â”‚   â”œâ”€ ä¼ä¸šç¯å¢ƒ â†’ ä½¿ç”¨SSLè¯ä¹¦ + ç”¨æˆ·å¯†ç 
â”‚   â””â”€ APIå¯¹æ¥ â†’ ä½¿ç”¨APIå¯†é’¥
â””â”€ å¦ â†’ âš ï¸ ä»…é€‚ç”¨äºå¼€å‘ç¯å¢ƒ
```

### 7.5 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ§ª åŠ¨æ‰‹éªŒè¯ï¼šæµ‹è¯•SSLè¿æ¥**
```bash
# æµ‹è¯•SSLè¿æ¥æ˜¯å¦æ­£å¸¸
./filebeat test output -c filebeat.yml

# æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
openssl x509 -in /path/to/ca.crt -text -noout | grep "Not After"
```

**ğŸ¤” é…ç½®éªŒè¯æ€è€ƒé¢˜**
- SSLè¯ä¹¦è¿‡æœŸäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
- ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨APIå¯†é’¥è€Œä¸æ˜¯å¯†ç ï¼Ÿ
- keystoreæ–‡ä»¶æŸåäº†æ€ä¹ˆæ¢å¤ï¼Ÿ

**ğŸ“Š æŒæ¡åº¦è‡ªè¯„**
```
ç†è®ºç†è§£ï¼šâ­â­â­â­â­ (5/5)
- [ ] ç†è§£SSL/TLSåŠ å¯†åŸç†
- [ ] æŒæ¡å„ç§è®¤è¯æ–¹å¼å·®å¼‚
- [ ] æ˜ç™½keystoreçš„ä½œç”¨

å®è·µèƒ½åŠ›ï¼šâ­â­â­â­â˜† (4/5)  
- [ ] èƒ½é…ç½®åŸºç¡€SSLè®¤è¯
- [ ] èƒ½ä½¿ç”¨keystoreç®¡ç†å¯†ç 
- [ ] èƒ½æ’æŸ¥å¸¸è§è®¤è¯é—®é¢˜
```

**ğŸ¯ ä¸€å¥è¯ç²¾å**ï¼š
Filebeatå®‰å…¨è®¤è¯å°±åƒç»™æ•°æ®ä¼ è¾“ä¸Šä¸‰é“é”ï¼šSSLåŠ å¯†é”ã€èº«ä»½éªŒè¯é”ã€æƒé™æ§åˆ¶é”

**ğŸ§  è®°å¿†é”šç‚¹**ï¼š
çœ‹åˆ°HTTPSæƒ³åˆ°SSLï¼Œçœ‹åˆ°è®¤è¯æƒ³åˆ°å¯†ç ï¼Œçœ‹åˆ°å®‰å…¨æƒ³åˆ°keystore