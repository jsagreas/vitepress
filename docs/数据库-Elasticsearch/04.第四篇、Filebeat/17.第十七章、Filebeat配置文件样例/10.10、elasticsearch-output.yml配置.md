---
title: 10ã€elasticsearch-output.ymlé…ç½®
---
## ğŸ“š ç›®å½•

1. [Elasticsearchè¾“å‡ºåŸºç¡€æ¦‚å¿µ](#1-Elasticsearchè¾“å‡ºåŸºç¡€æ¦‚å¿µ)
2. [åŸºæœ¬è¿æ¥é…ç½®](#2-åŸºæœ¬è¿æ¥é…ç½®)
3. [ç´¢å¼•é…ç½®è¯¦è§£](#3-ç´¢å¼•é…ç½®è¯¦è§£)
4. [æ€§èƒ½ä¼˜åŒ–é…ç½®](#4-æ€§èƒ½ä¼˜åŒ–é…ç½®)
5. [å®‰å…¨è®¤è¯é…ç½®](#5-å®‰å…¨è®¤è¯é…ç½®)
6. [é«˜çº§ç‰¹æ€§é…ç½®](#6-é«˜çº§ç‰¹æ€§é…ç½®)
7. [ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ](#7-ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”Œ Elasticsearchè¾“å‡ºåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Elasticsearchè¾“å‡º


**ç®€å•ç†è§£**ï¼šElasticsearchè¾“å‡ºå°±æ˜¯å‘Šè¯‰Filebeatï¼š"ä½ æ”¶é›†åˆ°çš„æ—¥å¿—æ•°æ®ï¼Œè¯·å‘é€åˆ°è¿™ä¸ªElasticsearché›†ç¾¤é‡Œå­˜å‚¨"ã€‚

**æ ¸å¿ƒä½œç”¨**ï¼š
```
æ—¥å¿—æ–‡ä»¶ â†’ Filebeaté‡‡é›† â†’ Elasticsearchå­˜å‚¨ â†’ Kibanaå¯è§†åŒ–æŸ¥çœ‹

æ¯”å¦‚ï¼š
WebæœåŠ¡å™¨æ—¥å¿— â†’ Filebeat â†’ ESé›†ç¾¤ â†’ åœ¨Kibanaä¸­æŸ¥çœ‹è®¿é—®ç»Ÿè®¡
```

**ä¸ºä»€ä¹ˆé€‰æ‹©Elasticsearch**ï¼š
- **æœç´¢èƒ½åŠ›å¼º**ï¼šå¯ä»¥å¿«é€Ÿæœç´¢æµ·é‡æ—¥å¿—
- **å®æ—¶æ€§å¥½**ï¼šæ—¥å¿—å†™å…¥åç«‹å³å¯æŸ¥è¯¢
- **æ‰©å±•æ€§å¼º**ï¼šæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œå¤„ç†TBçº§æ•°æ®
- **ç”Ÿæ€å®Œæ•´**ï¼šé…åˆKibanaå¯è§†åŒ–ï¼ŒLogstashå¤„ç†

### 1.2 è¾“å‡ºé…ç½®çš„æ ¸å¿ƒè¦ç´ 


```
é…ç½®æ–‡ä»¶ä¸­çš„å…³é”®éƒ¨åˆ†ï¼š
â”œâ”€â”€ hosts: å‘Šè¯‰Filebeat ESé›†ç¾¤åœ°å€
â”œâ”€â”€ index: å®šä¹‰æ—¥å¿—å­˜å‚¨åˆ°å“ªä¸ªç´¢å¼•
â”œâ”€â”€ template: è®¾ç½®ç´¢å¼•çš„å­—æ®µæ˜ å°„è§„åˆ™
â”œâ”€â”€ bulk_max_size: æ‰¹é‡å‘é€ä¼˜åŒ–
â””â”€â”€ authentication: å®‰å…¨è®¤è¯è®¾ç½®
```

---

## 2. ğŸ”— åŸºæœ¬è¿æ¥é…ç½®


### 2.1 æœ€ç®€å•çš„è¿æ¥é…ç½®


**å•èŠ‚ç‚¹ESè¿æ¥**ï¼š
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
```

**å«ä¹‰è§£é‡Š**ï¼š
- `hosts`ï¼šESæœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£
- `localhost:9200`ï¼šæœ¬æœºçš„9200ç«¯å£ï¼ˆESé»˜è®¤ç«¯å£ï¼‰

### 2.2 é›†ç¾¤è¿æ¥é…ç½®


**å¤šèŠ‚ç‚¹ESé›†ç¾¤**ï¼š
```yaml
output.elasticsearch:
  hosts: 
    - "es-node1.company.com:9200"
    - "es-node2.company.com:9200" 
    - "es-node3.company.com:9200"
  
  # è´Ÿè½½å‡è¡¡ç­–ç•¥
  loadbalance: true
  
  # è¿æ¥è¶…æ—¶è®¾ç½®ï¼ˆ5ç§’ï¼‰
  timeout: 5s
```

**é…ç½®è¯´æ˜**ï¼š
- **å¤šä¸ªhosts**ï¼šFilebeatä¼šè‡ªåŠ¨åœ¨è¿™äº›èŠ‚ç‚¹é—´åˆ‡æ¢ï¼Œæé«˜å¯ç”¨æ€§
- **loadbalance: true**ï¼šå¯ç”¨è´Ÿè½½å‡è¡¡ï¼Œé¿å…å•ä¸ªèŠ‚ç‚¹å‹åŠ›è¿‡å¤§
- **timeout**ï¼šç½‘ç»œè¶…æ—¶æ—¶é—´ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…

### 2.3 å®Œæ•´çš„åŸºç¡€è¿æ¥é…ç½®


```yaml
# ===== Elasticsearchè¾“å‡ºé…ç½® =====
output.elasticsearch:
  # ESé›†ç¾¤èŠ‚ç‚¹åœ°å€
  hosts: 
    - "192.168.1.10:9200"
    - "192.168.1.11:9200"
    - "192.168.1.12:9200"
  
  # åè®®è®¾ç½®ï¼ˆhttp/httpsï¼‰
  protocol: "https"
  
  # è¿æ¥è®¾ç½®
  timeout: 10s
  max_retries: 3
  backoff.init: 1s
  backoff.max: 60s
  
  # å¯ç”¨è´Ÿè½½å‡è¡¡
  loadbalance: true
  
  # åŸºæœ¬è®¤è¯
  username: "filebeat_user"
  password: "your_password"
```

**é‡è¦å‚æ•°å«ä¹‰**ï¼š
- **protocol**ï¼šä½¿ç”¨HTTPè¿˜æ˜¯HTTPSåè®®
- **max_retries**ï¼šå‘é€å¤±è´¥æ—¶æœ€å¤šé‡è¯•3æ¬¡
- **backoff.init**ï¼šç¬¬ä¸€æ¬¡é‡è¯•ç­‰å¾…1ç§’
- **backoff.max**ï¼šæœ€é•¿é‡è¯•é—´éš”60ç§’

---

## 3. ğŸ“‹ ç´¢å¼•é…ç½®è¯¦è§£


### 3.1 ç´¢å¼•åç§°é…ç½®


**ä»€ä¹ˆæ˜¯ç´¢å¼•åç§°**ï¼Ÿ
> ç´¢å¼•å°±åƒæ•°æ®åº“ä¸­çš„"è¡¨"ï¼Œç”¨æ¥ç»„ç»‡å’Œå­˜å‚¨ç›¸åŒç±»å‹çš„æ—¥å¿—æ•°æ®

**åŸºæœ¬ç´¢å¼•åç§°**ï¼š
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  index: "filebeat-logs-%{+yyyy.MM.dd}"
```

**ç»“æœç¤ºä¾‹**ï¼š
```
2025-09-21çš„æ—¥å¿—å­˜å‚¨åœ¨ï¼šfilebeat-logs-2025.09.21
2025-09-22çš„æ—¥å¿—å­˜å‚¨åœ¨ï¼šfilebeat-logs-2025.09.22
```

### 3.2 åŠ¨æ€ç´¢å¼•åç§°é…ç½®


**æ ¹æ®æ—¥å¿—ç±»å‹åˆ†ç´¢å¼•**ï¼š
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # æ ¹æ®å­—æ®µå€¼åŠ¨æ€åˆ›å»ºç´¢å¼•å
  index: "%{[fields.log_type]:filebeat}-%{+yyyy.MM.dd}"
  
  # ç´¢å¼•æ¨¡æ¿è®¾ç½®
  template.name: "filebeat"
  template.pattern: "filebeat-*"
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š
```
Nginxè®¿é—®æ—¥å¿— â†’ nginx-2025.09.21
Nginxé”™è¯¯æ—¥å¿— â†’ nginx-error-2025.09.21
åº”ç”¨ç¨‹åºæ—¥å¿— â†’ app-2025.09.21
```

### 3.3 ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†


**ä»€ä¹ˆæ˜¯ç´¢å¼•ç”Ÿå‘½å‘¨æœŸ**ï¼Ÿ
> éšç€æ—¶é—´æ¨ç§»ï¼Œæ—§æ—¥å¿—å¯ä»¥è‡ªåŠ¨åˆ é™¤æˆ–è¿ç§»åˆ°ä¾¿å®œçš„å­˜å‚¨ï¼ŒèŠ‚çœæˆæœ¬

```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  index: "filebeat-logs-%{+yyyy.MM.dd}"
  
  # å¯ç”¨ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†
  ilm.enabled: true
  ilm.rollover_alias: "filebeat-logs"
  ilm.pattern: "000001"
  
  # ç”Ÿå‘½å‘¨æœŸç­–ç•¥
  ilm.policy: |
    {
      "policy": {
        "phases": {
          "hot": {
            "actions": {
              "rollover": {
                "max_size": "5GB",
                "max_age": "1d"
              }
            }
          },
          "delete": {
            "min_age": "30d",
            "actions": {
              "delete": {}
            }
          }
        }
      }
    }
```

**ç”Ÿå‘½å‘¨æœŸç­–ç•¥è¯´æ˜**ï¼š
- **hoté˜¶æ®µ**ï¼šæ–°æ•°æ®å†™å…¥ï¼Œå½“å¤§å°è¶…è¿‡5GBæˆ–æ—¶é—´è¶…è¿‡1å¤©æ—¶æ»šåŠ¨
- **deleteé˜¶æ®µ**ï¼š30å¤©åè‡ªåŠ¨åˆ é™¤æ—§æ•°æ®

---

## 4. âš¡ æ€§èƒ½ä¼˜åŒ–é…ç½®


### 4.1 æ‰¹é‡å†™å…¥ä¼˜åŒ–


**ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡å†™å…¥**ï¼Ÿ
> ä¸€æ¡ä¸€æ¡å‘é€æ—¥å¿—å¾ˆæ…¢ï¼Œæ‰¹é‡å‘é€å¯ä»¥å¤§å¹…æå‡æ€§èƒ½

**åŸºæœ¬æ‰¹é‡é…ç½®**ï¼š
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # æ‰¹é‡å¤§å°è®¾ç½®
  bulk_max_size: 1000        # æ¯æ‰¹æœ€å¤š1000æ¡è®°å½•
  flush_interval: 5s         # æ¯5ç§’å¼ºåˆ¶å‘é€ä¸€æ¬¡
  worker: 2                  # ä½¿ç”¨2ä¸ªå·¥ä½œçº¿ç¨‹
```

**å‚æ•°è°ƒä¼˜å»ºè®®**ï¼š

| åœºæ™¯ | bulk_max_size | flush_interval | worker |
|------|---------------|----------------|--------|
| **è½»é‡åœºæ™¯** | 200-500 | 10s | 1 |
| **ä¸­ç­‰åœºæ™¯** | 1000-2000 | 5s | 2-4 |
| **é‡è½½åœºæ™¯** | 3000-5000 | 1s | 4-8 |

### 4.2 å†…å­˜å’Œé˜Ÿåˆ—ä¼˜åŒ–


```yaml
# Filebeatä¸»é…ç½®ä¸­çš„é˜Ÿåˆ—è®¾ç½®
queue.mem:
  events: 8192              # å†…å­˜é˜Ÿåˆ—æœ€å¤šå­˜å‚¨8192ä¸ªäº‹ä»¶
  flush.min_events: 1000    # è‡³å°‘1000ä¸ªäº‹ä»¶æ‰æ‰¹é‡å‘é€
  flush.timeout: 5s         # æˆ–è€…ç­‰å¾…5ç§’åå‘é€

# Elasticsearchè¾“å‡ºä¼˜åŒ–
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # å·¥ä½œçº¿ç¨‹æ•°
  worker: 4
  
  # æ‰¹é‡è®¾ç½®
  bulk_max_size: 2000
  flush_interval: 3s
  
  # å‹ç¼©ä¼ è¾“ï¼ˆèŠ‚çœå¸¦å®½ï¼‰
  compression_level: 3
```

### 4.3 ç½‘ç»œä¼˜åŒ–é…ç½®


```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # HTTPå®¢æˆ·ç«¯è®¾ç½®
  headers:
    User-Agent: "filebeat-7.17.0"
  
  # è¿æ¥æ± è®¾ç½®
  max_connections_per_host: 10
  
  # ä¼ è¾“å‹ç¼©
  compression_level: 1
  
  # å“åº”ç¼“å†²åŒº
  bulk_max_size: 3000
  
  # ç½‘ç»œè¶…æ—¶
  timeout: 30s
```

---

## 5. ğŸ” å®‰å…¨è®¤è¯é…ç½®


### 5.1 åŸºæœ¬ç”¨æˆ·åå¯†ç è®¤è¯


**é…ç½®ç¤ºä¾‹**ï¼š
```yaml
output.elasticsearch:
  hosts: ["https://elastic.company.com:9200"]
  
  # åŸºæœ¬è®¤è¯
  username: "filebeat_service"
  password: "secure_password_123"
  
  # HTTPSè®¾ç½®
  protocol: "https"
  ssl.verification_mode: "certificate"
```

### 5.2 APIå¯†é’¥è®¤è¯


**ä»€ä¹ˆæ˜¯APIå¯†é’¥**ï¼Ÿ
> æ¯”ç”¨æˆ·åå¯†ç æ›´å®‰å…¨çš„è®¤è¯æ–¹å¼ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶æƒé™

```yaml
output.elasticsearch:
  hosts: ["https://elastic.company.com:9200"]
  
  # APIå¯†é’¥è®¤è¯
  api_key: "your_base64_encoded_api_key"
  
  # æˆ–è€…åˆ†å¼€é…ç½®
  api_key_id: "your_key_id"
  api_key_secret: "your_key_secret"
```

### 5.3 SSL/TLSè¯ä¹¦é…ç½®


**å®Œæ•´çš„HTTPSé…ç½®**ï¼š
```yaml
output.elasticsearch:
  hosts: ["https://elastic.company.com:9200"]
  protocol: "https"
  
  # SSLè¯ä¹¦é…ç½®
  ssl:
    # è¯ä¹¦éªŒè¯æ¨¡å¼
    verification_mode: "certificate"
    
    # CAè¯ä¹¦è·¯å¾„
    certificate_authorities: ["/etc/filebeat/ca.crt"]
    
    # å®¢æˆ·ç«¯è¯ä¹¦ï¼ˆåŒå‘è®¤è¯ï¼‰
    certificate: "/etc/filebeat/client.crt"
    certificate_key: "/etc/filebeat/client.key"
    
    # æ”¯æŒçš„TLSç‰ˆæœ¬
    supported_protocols: ["TLSv1.2", "TLSv1.3"]
```

**è¯ä¹¦éªŒè¯æ¨¡å¼è¯´æ˜**ï¼š
- **none**ï¼šä¸éªŒè¯è¯ä¹¦ï¼ˆä¸æ¨èï¼‰
- **certificate**ï¼šéªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§
- **strict**ï¼šä¸¥æ ¼éªŒè¯è¯ä¹¦å’Œä¸»æœºå

---

## 6. ğŸ› ï¸ é«˜çº§ç‰¹æ€§é…ç½®


### 6.1 ç®¡é“å¤„ç†å™¨é…ç½®


**ä»€ä¹ˆæ˜¯ç®¡é“å¤„ç†å™¨**ï¼Ÿ
> åœ¨æ•°æ®å†™å…¥ESå‰è¿›è¡Œé¢„å¤„ç†ï¼Œæ¯”å¦‚è§£ææ—¥å¿—æ ¼å¼ã€æ·»åŠ å­—æ®µç­‰

```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # æŒ‡å®šé¢„å¤„ç†ç®¡é“
  pipeline: "nginx-access-pipeline"
  
  # åŠ¨æ€ç®¡é“é€‰æ‹©
  pipelines:
    - pipeline: "nginx-access-pipeline"
      when.contains:
        source: "nginx/access.log"
    - pipeline: "nginx-error-pipeline"
      when.contains:
        source: "nginx/error.log"
```

### 6.2 æ¡ä»¶è¾“å‡ºé…ç½®


**æ ¹æ®æ¡ä»¶å‘é€åˆ°ä¸åŒç´¢å¼•**ï¼š
```yaml
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # åŠ¨æ€ç´¢å¼•é€‰æ‹©
  indices:
    # é”™è¯¯æ—¥å¿—å•ç‹¬å­˜å‚¨
    - index: "error-logs-%{+yyyy.MM.dd}"
      when.contains:
        log.level: "ERROR"
    
    # è®¿é—®æ—¥å¿—å­˜å‚¨
    - index: "access-logs-%{+yyyy.MM.dd}"
      when.contains:
        log.file.path: "access.log"
    
    # é»˜è®¤ç´¢å¼•
    - index: "filebeat-%{+yyyy.MM.dd}"
```

### 6.3 å¤šè¾“å‡ºé…ç½®


**åŒæ—¶å‘é€åˆ°å¤šä¸ªESé›†ç¾¤**ï¼š
```yaml
# æ³¨æ„ï¼šéœ€è¦ä½¿ç”¨å¤šä¸ªFilebeatå®ä¾‹æˆ–è€…è¾“å‡ºæ¡ä»¶
output.elasticsearch:
  hosts: ["production-es:9200"]
  index: "prod-logs-%{+yyyy.MM.dd}"
  when.equals:
    environment: "production"

# åœ¨å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­
output.elasticsearch:
  hosts: ["staging-es:9200"]
  index: "staging-logs-%{+yyyy.MM.dd}"
  when.equals:
    environment: "staging"
```

---

## 7. ğŸš€ ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ


### 7.1 å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒé…ç½®


```yaml
# ===== ç”Ÿäº§ç¯å¢ƒElasticsearchè¾“å‡ºé…ç½® =====
output.elasticsearch:
  # === é›†ç¾¤è¿æ¥é…ç½® ===
  hosts:
    - "es-data-01.prod.company.com:9200"
    - "es-data-02.prod.company.com:9200"
    - "es-data-03.prod.company.com:9200"
  
  # === å®‰å…¨é…ç½® ===
  protocol: "https"
  username: "${ES_USERNAME:filebeat}"
  password: "${ES_PASSWORD}"
  
  # === ç´¢å¼•é…ç½® ===
  index: "prod-logs-%{[fields.service]:unknown}-%{+yyyy.MM.dd}"
  
  # === æ€§èƒ½ä¼˜åŒ– ===
  worker: 4
  bulk_max_size: 3000
  flush_interval: 5s
  compression_level: 1
  
  # === å¯é æ€§é…ç½® ===
  max_retries: 5
  backoff.init: 2s
  backoff.max: 300s
  timeout: 60s
  
  # === ç›‘æ§é…ç½® ===
  template.enabled: true
  template.name: "prod-logs"
  template.pattern: "prod-logs-*"
  
  # === ç”Ÿå‘½å‘¨æœŸç®¡ç† ===
  ilm.enabled: true
  ilm.rollover_alias: "prod-logs"
  ilm.policy: "prod-logs-policy"
```

### 7.2 ç›‘æ§å’Œå‘Šè­¦é…ç½®


**å¥åº·æ£€æŸ¥é…ç½®**ï¼š
```yaml
# åœ¨Filebeaté…ç½®ä¸­æ·»åŠ ç›‘æ§
monitoring:
  enabled: true
  elasticsearch:
    hosts: ["monitoring-es:9200"]
    username: "monitoring_user"
    password: "monitoring_pass"

# è¾“å‡ºé…ç½®ä¸­çš„ç›‘æ§å­—æ®µ
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # æ·»åŠ ç›‘æ§æ ‡ç­¾
  headers:
    X-Environment: "production"
    X-Service: "web-logs"
```

### 7.3 æ•…éšœå¤„ç†é…ç½®


```yaml
output.elasticsearch:
  hosts: ["primary-es:9200", "backup-es:9200"]
  
  # === æ•…éšœè½¬ç§»é…ç½® ===
  max_retries: 10
  backoff.init: 1s
  backoff.max: 60s
  
  # === æ­»ä¿¡é˜Ÿåˆ— ===
  # å¤±è´¥çš„æ—¥å¿—å†™å…¥æœ¬åœ°æ–‡ä»¶
  when.not.equals:
    elasticsearch.bulk_response_status: 200
  
  # === æ•°æ®æŒä¹…åŒ– ===
  # ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±
  queue.mem:
    events: 16384
    flush.min_events: 1000
    flush.timeout: 10s
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬é…ç½®


```yaml
# æœ€åŸºç¡€ä½†å®Œæ•´çš„é…ç½®æ¨¡æ¿
output.elasticsearch:
  # 1. è¿æ¥é…ç½®ï¼ˆå¿…éœ€ï¼‰
  hosts: ["your-es:9200"]
  
  # 2. è®¤è¯é…ç½®ï¼ˆç”Ÿäº§å¿…éœ€ï¼‰
  username: "your_user"
  password: "your_password"
  
  # 3. ç´¢å¼•é…ç½®ï¼ˆæ¨èï¼‰
  index: "your-app-%{+yyyy.MM.dd}"
  
  # 4. æ€§èƒ½é…ç½®ï¼ˆæ¨èï¼‰
  bulk_max_size: 1000
  worker: 2
```

### 8.2 å…³é”®é…ç½®å‚æ•°é€ŸæŸ¥


| é…ç½®é¡¹ | ä½œç”¨ | æ¨èå€¼ | æ³¨æ„äº‹é¡¹ |
|--------|------|--------|----------|
| **hosts** | ESé›†ç¾¤åœ°å€ | å¤šä¸ªèŠ‚ç‚¹ | å¿…éœ€é…ç½® |
| **index** | ç´¢å¼•åç§° | å¸¦æ—¥æœŸæ¨¡æ¿ | å½±å“æ•°æ®ç»„ç»‡ |
| **bulk_max_size** | æ‰¹é‡å¤§å° | 1000-3000 | å½±å“æ€§èƒ½ |
| **worker** | å·¥ä½œçº¿ç¨‹ | 2-4 | æ ¹æ®CPUè°ƒæ•´ |
| **timeout** | è¶…æ—¶æ—¶é—´ | 30s-60s | ç½‘ç»œç¨³å®šæ€§ |

### 8.3 å¸¸è§é—®é¢˜æ’æŸ¥


**è¿æ¥é—®é¢˜**ï¼š
```bash
# æµ‹è¯•ESè¿æ¥
curl -u username:password "https://your-es:9200/_cluster/health"

# æ£€æŸ¥Filebeatè¿æ¥çŠ¶æ€
./filebeat test output
```

**æ€§èƒ½é—®é¢˜æ’æŸ¥**ï¼š
- **å‘é€å¤ªæ…¢**ï¼šå¢åŠ `worker`æ•°é‡æˆ–`bulk_max_size`
- **å†…å­˜å ç”¨é«˜**ï¼šå‡å°‘`queue.mem.events`
- **ç½‘ç»œå ç”¨é«˜**ï¼šå¯ç”¨`compression_level`

**è®¤è¯é—®é¢˜æ’æŸ¥**ï¼š
- æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- éªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰å†™å…¥æƒé™
- ç¡®è®¤SSLè¯ä¹¦é…ç½®æ­£ç¡®

### 8.4 é…ç½®ä¼˜åŒ–å»ºè®®


**æ€§èƒ½ä¼˜å…ˆåœºæ™¯**ï¼š
```yaml
# é«˜ååé‡é…ç½®
worker: 8
bulk_max_size: 5000
flush_interval: 1s
compression_level: 1
```

**ç¨³å®šä¼˜å…ˆåœºæ™¯**ï¼š
```yaml
# é«˜å¯é æ€§é…ç½®
max_retries: 10
backoff.max: 300s
timeout: 120s
bulk_max_size: 500
```

**å®‰å…¨ä¼˜å…ˆåœºæ™¯**ï¼š
```yaml
# é«˜å®‰å…¨é…ç½®
protocol: "https"
ssl.verification_mode: "strict"
api_key: "use_api_key_instead_of_password"
```

### 8.5 å®é™…åº”ç”¨æŒ‡å¯¼


**å¼€å‘ç¯å¢ƒ**ï¼š
- ä½¿ç”¨ç®€å•çš„ç”¨æˆ·åå¯†ç è®¤è¯
- è¾ƒå°çš„æ‰¹é‡å¤§å°ï¼ˆä¾¿äºè°ƒè¯•ï¼‰
- è¾ƒçŸ­çš„æ•°æ®ä¿ç•™æœŸ

**æµ‹è¯•ç¯å¢ƒ**ï¼š
- æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒé…ç½®
- é€‚ä¸­çš„æ€§èƒ½å‚æ•°
- å®Œæ•´çš„å®‰å…¨é…ç½®æµ‹è¯•

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
- å®Œæ•´çš„å®‰å…¨è®¤è¯é…ç½®
- ä¼˜åŒ–çš„æ€§èƒ½å‚æ•°
- ç›‘æ§å’Œå‘Šè­¦é…ç½®
- æ•°æ®å¤‡ä»½å’Œæ¢å¤ç­–ç•¥

**è®°å¿†è¦ç‚¹**ï¼š
- ESè¾“å‡ºé…ç½®çš„æ ¸å¿ƒæ˜¯"è¿æ¥ã€è®¤è¯ã€ç´¢å¼•ã€æ€§èƒ½"å››å¤§å—
- å®‰å…¨é…ç½®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸å¯çœç•¥
- æ€§èƒ½å‚æ•°éœ€è¦æ ¹æ®å®é™…è´Ÿè½½è°ƒä¼˜
- ç›‘æ§é…ç½®å¸®åŠ©åŠæ—¶å‘ç°é—®é¢˜