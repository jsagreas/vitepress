---
title: 6ã€æ—¥å¿—è°ƒè¯•
---
## ğŸ“š ç›®å½•

1. [æ—¥å¿—è°ƒè¯•åŸºç¡€æ¦‚å¿µ](#1-æ—¥å¿—è°ƒè¯•åŸºç¡€æ¦‚å¿µ)
2. [æ—¥å¿—çº§åˆ«é…ç½®è¯¦è§£](#2-æ—¥å¿—çº§åˆ«é…ç½®è¯¦è§£)
3. [æ—¥å¿—è¾“å‡ºæ–¹å¼è®¾ç½®](#3-æ—¥å¿—è¾“å‡ºæ–¹å¼è®¾ç½®)
4. [è°ƒè¯•æ¨¡å¼çš„ä½¿ç”¨](#4-è°ƒè¯•æ¨¡å¼çš„ä½¿ç”¨)
5. [å®é™…æ•…éšœæ’æŸ¥å®è·µ](#5-å®é™…æ•…éšœæ’æŸ¥å®è·µ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” æ—¥å¿—è°ƒè¯•åŸºç¡€æ¦‚å¿µ


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—è°ƒè¯•


**ä»€ä¹ˆæ˜¯æ—¥å¿—è°ƒè¯•**ï¼š
å°±åƒåŒ»ç”Ÿç”¨ä½“æ¸©è®¡ã€è¡€å‹è®¡æ£€æŸ¥èº«ä½“çŠ¶å†µä¸€æ ·ï¼Œæ—¥å¿—è°ƒè¯•æ˜¯æˆ‘ä»¬ç”¨æ¥"è¯Šæ–­"Filebeatè¿è¡ŒçŠ¶å†µçš„å·¥å…·ã€‚

**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
```
æƒ³è±¡ä½ å¼€è½¦é‡åˆ°æ•…éšœï¼š
ğŸš— ä»ªè¡¨ç›˜çš„æŒ‡ç¤ºç¯ = Filebeatçš„æ—¥å¿—ä¿¡æ¯
ğŸ“Š æ²¹è¡¨ã€æ°´æ¸©è¡¨ = ä¸åŒçº§åˆ«çš„æ—¥å¿—è¯¦ç»†ç¨‹åº¦
ğŸ”§ æ•…éšœè¯Šæ–­ä»ª = è°ƒè¯•æ¨¡å¼
```

**æ—¥å¿—è°ƒè¯•è§£å†³çš„é—®é¢˜**ï¼š
- **è¿è¡ŒçŠ¶æ€ä¸æ¸…æ¥š**ï¼šä¸çŸ¥é“Filebeatæ˜¯å¦æ­£å¸¸å·¥ä½œ
- **æ•°æ®ä¸¢å¤±åŸå› æœªçŸ¥**ï¼šæ—¥å¿—æ²¡é‡‡é›†åˆ°ï¼Œä½†ä¸çŸ¥é“å“ªé‡Œå‡ºé—®é¢˜
- **æ€§èƒ½é—®é¢˜éš¾å®šä½**ï¼šè¿è¡Œæ…¢ï¼Œä¸çŸ¥é“ç“¶é¢ˆåœ¨å“ª
- **é…ç½®é”™è¯¯éš¾å‘ç°**ï¼šé…ç½®æ–‡ä»¶å†™é”™äº†ï¼Œä½†é”™åœ¨å“ªé‡Œ

### 1.2 æ—¥å¿—è°ƒè¯•çš„æ ¸å¿ƒæ€è·¯


**è°ƒè¯•æ€ç»´æ¨¡å¼**ï¼š
```
é—®é¢˜å‘ç° â†’ ä¿¡æ¯æ”¶é›† â†’ åŸå› åˆ†æ â†’ è§£å†³éªŒè¯

å°±åƒçœ‹ç—…æµç¨‹ï¼š
ç—‡çŠ¶æè¿° â†’ æ£€æŸ¥åŒ–éªŒ â†’ åŒ»ç”Ÿè¯Šæ–­ â†’ æ²»ç–—æ•ˆæœ
```

**Filebeatè°ƒè¯•çš„ä¸‰ä¸ªå±‚æ¬¡**ï¼š
```
ğŸ”¸ åŸºç¡€ç›‘æ§ï¼šç¡®è®¤æœåŠ¡æ˜¯å¦è¿è¡Œ
ğŸ”¸ è¯¦ç»†åˆ†æï¼šæŸ¥çœ‹å…·ä½“å¤„ç†è¿‡ç¨‹
ğŸ”¸ æ·±åº¦è°ƒè¯•ï¼šå®šä½å¤æ‚é—®é¢˜æ ¹å› 
```

---

## 2. ğŸ“Š æ—¥å¿—çº§åˆ«é…ç½®è¯¦è§£


### 2.1 logging.level - æ—¥å¿—çº§åˆ«è®¾ç½®


**æ—¥å¿—çº§åˆ«å°±åƒéŸ³é‡è°ƒèŠ‚å™¨**ï¼š
```
éŸ³é‡è°ƒèŠ‚ï¼šé™éŸ³ â†’ å°å£° â†’ æ­£å¸¸ â†’ å¤§å£° â†’ æœ€å¤§å£°
æ—¥å¿—çº§åˆ«ï¼šerror â†’ warn â†’ info â†’ debug â†’ trace
```

**å„çº§åˆ«è¯¦ç»†è¯´æ˜**ï¼š

| çº§åˆ« | **å«ä¹‰** | **åŒ…å«å†…å®¹** | **é€‚ç”¨åœºæ™¯** |
|------|---------|-------------|-------------|
| `error` | `åªçœ‹é”™è¯¯` | `ä¸¥é‡é—®é¢˜ï¼Œç¨‹åºå¯èƒ½åœæ­¢` | `ç”Ÿäº§ç¯å¢ƒåŸºæœ¬ç›‘æ§` |
| `warn` | `è­¦å‘Šä¿¡æ¯` | `æ½œåœ¨é—®é¢˜ï¼Œéœ€è¦æ³¨æ„` | `ç”Ÿäº§ç¯å¢ƒæ—¥å¸¸ç›‘æ§` |
| `info` | `åŸºæœ¬ä¿¡æ¯` | `æ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œé‡è¦æ“ä½œ` | `å¼€å‘æµ‹è¯•ç¯å¢ƒ` |
| `debug` | `è°ƒè¯•è¯¦æƒ…` | `è¯¦ç»†å¤„ç†è¿‡ç¨‹ï¼Œé…ç½®åŠ è½½` | `é—®é¢˜æ’æŸ¥æ—¶ä½¿ç”¨` |
| `trace` | `æœ€è¯¦ç»†` | `æ¯ä¸€æ­¥æ“ä½œï¼Œæ€§èƒ½æ•°æ®` | `æ·±åº¦é—®é¢˜åˆ†æ` |

**é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# åŸºç¡€é…ç½® - ç”Ÿäº§ç¯å¢ƒæ¨è
logging.level: info

# é—®é¢˜æ’æŸ¥æ—¶
logging.level: debug

# æ·±åº¦è°ƒè¯•æ—¶
logging.level: trace
```

**å®é™…æ•ˆæœå¯¹æ¯”**ï¼š
```
infoçº§åˆ«è¾“å‡ºï¼š
[INFO] Filebeat started
[INFO] Successfully connected to Elasticsearch

debugçº§åˆ«è¾“å‡ºï¼š
[INFO] Filebeat started
[DEBUG] Loading configuration from /etc/filebeat/filebeat.yml
[DEBUG] Configured inputs: [log]
[DEBUG] Output configured: elasticsearch
[INFO] Successfully connected to Elasticsearch
[DEBUG] Harvester started for file: /var/log/app.log
```

### 2.2 ä¸åŒçº§åˆ«çš„é€‰æ‹©ç­–ç•¥


**é€‰æ‹©åŸåˆ™**ï¼š
```
ğŸ”¸ ç”Ÿäº§ç¯å¢ƒï¼šinfoæˆ–warnï¼ˆå¹³è¡¡ä¿¡æ¯é‡å’Œæ€§èƒ½ï¼‰
ğŸ”¸ æµ‹è¯•ç¯å¢ƒï¼šdebugï¼ˆä¾¿äºå‘ç°é—®é¢˜ï¼‰
ğŸ”¸ å¼€å‘è°ƒè¯•ï¼štraceï¼ˆæœ€è¯¦ç»†çš„ä¿¡æ¯ï¼‰
ğŸ”¸ ç´§æ€¥æ’æŸ¥ï¼šdebugæˆ–traceï¼ˆå¿«é€Ÿå®šä½é—®é¢˜ï¼‰
```

**æ€§èƒ½å½±å“è€ƒè™‘**ï¼š
```
trace > debug > info > warn > error
â†‘                              â†‘
ä¿¡æ¯æœ€å¤š                        æ€§èƒ½æœ€å¥½
æ€§èƒ½å½±å“å¤§                      ä¿¡æ¯æœ€å°‘
```

---

## 3. ğŸ“ æ—¥å¿—è¾“å‡ºæ–¹å¼è®¾ç½®


### 3.1 logging.to_files - è¾“å‡ºåˆ°æ–‡ä»¶


**ä¸ºä»€ä¹ˆè¦è¾“å‡ºåˆ°æ–‡ä»¶**ï¼š
```
æ§åˆ¶å°è¾“å‡ºï¼šåƒåœ¨é»‘æ¿ä¸Šå†™å­—ï¼Œä¸€ä¼šå°±æ“¦æ‰äº†
æ–‡ä»¶è¾“å‡ºï¼šåƒå†™åœ¨ç¬”è®°æœ¬é‡Œï¼Œå¯ä»¥åå¤æŸ¥çœ‹
```

**åŸºæœ¬é…ç½®**ï¼š
```yaml
# å¯ç”¨æ–‡ä»¶è¾“å‡º
logging.to_files: true

# å¦‚æœåªæƒ³åœ¨æ§åˆ¶å°çœ‹ï¼Œå¯ä»¥è®¾ä¸ºfalse
logging.to_files: false
```

**ä»€ä¹ˆæ—¶å€™ç”¨æ–‡ä»¶è¾“å‡º**ï¼š
- âœ… **ç”Ÿäº§ç¯å¢ƒ**ï¼šå¿…é¡»ç”¨æ–‡ä»¶ï¼Œä¾¿äºåç»­åˆ†æ
- âœ… **é•¿æœŸè¿è¡Œ**ï¼šæ§åˆ¶å°ä¿¡æ¯ä¼šä¸¢å¤±
- âœ… **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šè„šæœ¬å¯ä»¥åˆ†ææ—¥å¿—æ–‡ä»¶
- âŒ **ä¸´æ—¶æµ‹è¯•**ï¼šç›´æ¥çœ‹æ§åˆ¶å°æ›´æ–¹ä¾¿

### 3.2 logging.files.path - æ—¥å¿—æ–‡ä»¶ä½ç½®


**è·¯å¾„é…ç½®è¯¦è§£**ï¼š
```yaml
logging.files:
  path: /var/log/filebeat    # æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•
  name: filebeat             # æ—¥å¿—æ–‡ä»¶åå‰ç¼€
  keepfiles: 7               # ä¿ç•™æ–‡ä»¶æ•°é‡
  permissions: 0644          # æ–‡ä»¶æƒé™
```

**è·¯å¾„é€‰æ‹©å»ºè®®**ï¼š
```
Linuxç¯å¢ƒæ¨èï¼š
/var/log/filebeat/         # æ ‡å‡†æ—¥å¿—ç›®å½•
/opt/filebeat/logs/        # åº”ç”¨å®‰è£…ç›®å½•ä¸‹

Windowsç¯å¢ƒæ¨èï¼š
C:\ProgramData\Filebeat\Logs\
C:\Filebeat\Logs\

å¼€å‘æµ‹è¯•ç¯å¢ƒï¼š
./logs/                    # å½“å‰ç›®å½•ä¸‹
```

**æ–‡ä»¶ç®¡ç†é…ç½®**ï¼š
```yaml
logging.files:
  path: /var/log/filebeat
  name: filebeat
  rotateeverybytes: 10485760    # 10MBè½®è½¬ä¸€æ¬¡
  keepfiles: 7                  # ä¿ç•™7ä¸ªæ–‡ä»¶
  permissions: 0600             # åªæœ‰ownerå¯è¯»å†™
```

### 3.3 -eå‚æ•° - æ ‡å‡†é”™è¯¯è¾“å‡º


**-eå‚æ•°çš„ä½œç”¨**ï¼š
```bash
# æ™®é€šå¯åŠ¨ï¼ˆæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ï¼‰
./filebeat -c filebeat.yml

# ä½¿ç”¨-eå‚æ•°ï¼ˆæ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ï¼‰
./filebeat -e -c filebeat.yml
```

**ä»€ä¹ˆæ˜¯æ ‡å‡†é”™è¯¯è¾“å‡º**ï¼š
```
è®¡ç®—æœºçš„"è¯´è¯"æ–¹å¼æœ‰ä¸¤ç§ï¼š
stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ï¼šæ­£å¸¸ä¿¡æ¯ï¼Œåƒå¹³æ—¶è¯´è¯
stderrï¼ˆæ ‡å‡†é”™è¯¯ï¼‰ï¼šé”™è¯¯ä¿¡æ¯ï¼Œåƒå¤§å£°å–Šå«

-eå‚æ•°è®©FilebeatæŠŠæ—¥å¿—"å–Šå‡ºæ¥"
```

**ä½¿ç”¨åœºæ™¯å¯¹æ¯”**ï¼š

| åœºæ™¯ | **ä½¿ç”¨æ–¹å¼** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|------|-------------|---------|---------|
| `å¼€å‘è°ƒè¯•` | `./filebeat -e` | `ç«‹å³çœ‹åˆ°ä¿¡æ¯` | `ç¨‹åºé€€å‡ºä¿¡æ¯ä¸¢å¤±` |
| `æµ‹è¯•éªŒè¯` | `./filebeat -e` | `å®æ—¶åé¦ˆ` | `ä¿¡æ¯æ··ä¹±` |
| `ç”Ÿäº§éƒ¨ç½²` | `./filebeat` | `æ—¥å¿—è§„èŒƒç®¡ç†` | `éœ€è¦æŸ¥çœ‹æ–‡ä»¶` |
| `Dockerå®¹å™¨` | `./filebeat -e` | `å®¹å™¨æ—¥å¿—æ”¶é›†` | `æ— æŒä¹…åŒ–` |

---

## 4. ğŸ› è°ƒè¯•æ¨¡å¼çš„ä½¿ç”¨


### 4.1 debugè°ƒè¯•æ¨¡å¼è¯¦è§£


**è°ƒè¯•æ¨¡å¼æ˜¯ä»€ä¹ˆ**ï¼š
```
æ™®é€šæ¨¡å¼ï¼šåƒå¼€è½¦æ—¶åªçœ‹å‰æ–¹
è°ƒè¯•æ¨¡å¼ï¼šåƒå¼€è½¦æ—¶çœ‹ç€ä»ªè¡¨ç›˜çš„æ¯ä¸ªæŒ‡é’ˆ

è°ƒè¯•æ¨¡å¼ä¼šæ˜¾ç¤ºï¼š
â€¢ æ¯ä¸ªæ–‡ä»¶çš„å¤„ç†çŠ¶æ€
â€¢ æ¯æ¡æ—¥å¿—çš„å¤„ç†è¿‡ç¨‹  
â€¢ ç½‘ç»œè¿æ¥çš„è¯¦ç»†ä¿¡æ¯
â€¢ é…ç½®åŠ è½½çš„æ¯ä¸ªæ­¥éª¤
```

**å¯ç”¨è°ƒè¯•æ¨¡å¼çš„æ–¹æ³•**ï¼š

**æ–¹æ³•ä¸€ï¼šé…ç½®æ–‡ä»¶**
```yaml
logging.level: debug

# é’ˆå¯¹ç‰¹å®šæ¨¡å—è°ƒè¯•
logging.selectors: ["harvester", "input"]
```

**æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œå‚æ•°**
```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
./filebeat -e -d "*"

# åªè°ƒè¯•ç‰¹å®šæ¨¡å—
./filebeat -e -d "harvester,input"

# ç»„åˆä½¿ç”¨
./filebeat -e -d "*" -c filebeat.yml
```

### 4.2 é€‰æ‹©æ€§è°ƒè¯• - logging.selectors


**ä»€ä¹ˆæ˜¯é€‰æ‹©æ€§è°ƒè¯•**ï¼š
```
å°±åƒçœ‹åŒ»ç”Ÿæ—¶ï¼ŒåŒ»ç”Ÿä¼šé’ˆå¯¹æ€§æ£€æŸ¥ï¼š
å¤´ç–¼ â†’ æ£€æŸ¥å¤´éƒ¨
èƒƒç–¼ â†’ æ£€æŸ¥è‚ èƒƒ

Filebeatä¹Ÿå¯ä»¥é’ˆå¯¹æ€§è°ƒè¯•ä¸åŒæ¨¡å—
```

**å¸¸ç”¨è°ƒè¯•æ¨¡å—**ï¼š
```yaml
logging.selectors:
  - "harvester"      # æ–‡ä»¶æ”¶é›†å™¨
  - "input"          # è¾“å…¥æ¨¡å—
  - "output"         # è¾“å‡ºæ¨¡å—
  - "elasticsearch"  # ESè¿æ¥
  - "logstash"       # Logstashè¿æ¥
  - "kafka"          # Kafkaè¿æ¥
```

**å®é™…é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# åªè°ƒè¯•æ–‡ä»¶é‡‡é›†é—®é¢˜
logging.level: debug
logging.selectors: ["harvester", "input"]

# åªè°ƒè¯•è¾“å‡ºé—®é¢˜
logging.level: debug  
logging.selectors: ["output", "elasticsearch"]

# å…¨é¢è°ƒè¯•
logging.level: debug
logging.selectors: ["*"]
```

### 4.3 è°ƒè¯•ä¿¡æ¯è§£è¯»


**æ–‡ä»¶é‡‡é›†è°ƒè¯•ä¿¡æ¯**ï¼š
```
[DEBUG] Harvester started for file: /var/log/app.log
å«ä¹‰ï¼šå¼€å§‹ç›‘æ§/var/log/app.logæ–‡ä»¶

[DEBUG] Read 1024 bytes from /var/log/app.log
å«ä¹‰ï¼šä»æ–‡ä»¶è¯»å–äº†1024å­—èŠ‚æ•°æ®

[DEBUG] Harvester stopped for file: /var/log/app.log  
å«ä¹‰ï¼šåœæ­¢ç›‘æ§è¯¥æ–‡ä»¶ï¼ˆå¯èƒ½æ–‡ä»¶è¢«åˆ é™¤æˆ–é‡å‘½åï¼‰
```

**è¾“å‡ºè¿æ¥è°ƒè¯•ä¿¡æ¯**ï¼š
```
[DEBUG] Attempting connection to elasticsearch
å«ä¹‰ï¼šæ­£åœ¨å°è¯•è¿æ¥Elasticsearch

[DEBUG] Connection established to elasticsearch
å«ä¹‰ï¼šè¿æ¥æˆåŠŸå»ºç«‹

[DEBUG] Bulk request with 100 events sent to elasticsearch
å«ä¹‰ï¼šæ‰¹é‡å‘é€100æ¡äº‹ä»¶åˆ°ES
```

---

## 5. ğŸ”§ å®é™…æ•…éšœæ’æŸ¥å®è·µ


### 5.1 å¸¸è§é—®é¢˜çš„æ—¥å¿—ç‰¹å¾


**é—®é¢˜ä¸€ï¼šæ–‡ä»¶ä¸è¢«é‡‡é›†**
```
ç—‡çŠ¶ï¼šæ—¥å¿—æ–‡ä»¶æœ‰æ–°å†…å®¹ï¼Œä½†ESä¸­æ²¡æœ‰æ•°æ®

æ’æŸ¥æ­¥éª¤ï¼š
1. å¯ç”¨è°ƒè¯•æ¨¡å¼
./filebeat -e -d "harvester,input"

2. è§‚å¯Ÿå…³é”®ä¿¡æ¯
[DEBUG] Harvester started for file: xxx  â† ç¡®è®¤æ–‡ä»¶è¢«å‘ç°
[DEBUG] Read xxx bytes from xxx         â† ç¡®è®¤å†…å®¹è¢«è¯»å–
[DEBUG] Event sent to output            â† ç¡®è®¤äº‹ä»¶è¢«å‘é€

3. å¦‚æœæ²¡æœ‰Harvester startedä¿¡æ¯
æ£€æŸ¥ï¼š
- æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ–‡ä»¶æƒé™æ˜¯å¦å¯è¯»
- æ˜¯å¦åŒ¹é…include_linesè§„åˆ™
```

**é—®é¢˜äºŒï¼šè¿æ¥ESå¤±è´¥**
```
ç—‡çŠ¶ï¼šFilebeatå¯åŠ¨æ­£å¸¸ï¼Œä½†æ•°æ®åˆ°ä¸äº†ES

æ’æŸ¥é…ç½®ï¼š
logging.level: debug
logging.selectors: ["output", "elasticsearch"]

å…³é”®æ—¥å¿—ä¿¡æ¯ï¼š
[ERROR] Failed to connect to elasticsearch â† è¿æ¥å¤±è´¥
[DEBUG] Connection timeout                 â† è¶…æ—¶é—®é¢˜  
[DEBUG] Authentication failed             â† è®¤è¯é—®é¢˜
[DEBUG] Index template creation failed    â† æ¨¡æ¿é—®é¢˜
```

### 5.2 å®Œæ•´æ’æŸ¥æµç¨‹ç¤ºä¾‹


**åœºæ™¯ï¼šæ—¥å¿—é‡‡é›†çªç„¶ä¸­æ–­**

**ç¬¬ä¸€æ­¥ï¼šå¯ç”¨è¯¦ç»†æ—¥å¿—**
```yaml
# ä¸´æ—¶è°ƒè¯•é…ç½®
logging.level: debug
logging.to_files: true
logging.files:
  path: /tmp/filebeat-debug
  name: debug
```

**ç¬¬äºŒæ­¥ï¼šé‡å¯å¹¶è§‚å¯Ÿ**
```bash
# åœæ­¢æœåŠ¡
systemctl stop filebeat

# è°ƒè¯•æ¨¡å¼å¯åŠ¨
./filebeat -e -d "*" -c /etc/filebeat/filebeat.yml
```

**ç¬¬ä¸‰æ­¥ï¼šåˆ†ææ—¥å¿—æ¨¡å¼**
```
æ­£å¸¸æ¨¡å¼ï¼š
[DEBUG] Harvester started â†’ [DEBUG] Read bytes â†’ [DEBUG] Event sent

å¼‚å¸¸æ¨¡å¼ï¼š
[DEBUG] Harvester started â†’ [ERROR] Permission denied
[DEBUG] Read bytes â†’ [ERROR] Connection lost
[DEBUG] Event sent â†’ [WARN] Bulk request failed
```

### 5.3 æ—¥å¿—åˆ†æå·¥å…·å’ŒæŠ€å·§


**ä½¿ç”¨grepå¿«é€Ÿç­›é€‰**ï¼š
```bash
# æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
grep -i "error\|failed\|exception" /var/log/filebeat/filebeat

# æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶çš„å¤„ç†
grep "/var/log/app.log" /var/log/filebeat/filebeat

# æŸ¥çœ‹è¿æ¥çŠ¶æ€
grep -i "connect\|disconnect" /var/log/filebeat/filebeat
```

**æ—¶é—´èŒƒå›´åˆ†æ**ï¼š
```bash
# æŸ¥çœ‹æœ€è¿‘10åˆ†é’Ÿçš„æ—¥å¿—
journalctl -u filebeat --since "10 minutes ago"

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µ
journalctl -u filebeat --since "2024-01-01 10:00" --until "2024-01-01 11:00"
```

**å®æ—¶ç›‘æ§æŠ€å·§**ï¼š
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/filebeat/filebeat

# å®æ—¶æŸ¥çœ‹å¹¶è¿‡æ»¤é”™è¯¯
tail -f /var/log/filebeat/filebeat | grep -i error

# å¤šä¸ªæ–‡ä»¶åŒæ—¶ç›‘æ§
tail -f /var/log/filebeat/* | grep -E "(ERROR|WARN|DEBUG)"
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ æ—¥å¿—çº§åˆ«ï¼šerror < warn < info < debug < trace
ğŸ”¸ è¾“å‡ºæ–¹å¼ï¼šæ–‡ä»¶è¾“å‡º(ç”Ÿäº§) vs æ§åˆ¶å°è¾“å‡º(è°ƒè¯•)
ğŸ”¸ è°ƒè¯•æ¨¡å¼ï¼šå…¨å±€è°ƒè¯• vs é€‰æ‹©æ€§è°ƒè¯•
ğŸ”¸ æ•…éšœæ’æŸ¥ï¼šè§‚å¯Ÿæ—¥å¿— â†’ åˆ†ææ¨¡å¼ â†’ å®šä½é—®é¢˜
```

### 6.2 å…³é”®é…ç½®é€ŸæŸ¥


**ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®**ï¼š
```yaml
logging.level: info
logging.to_files: true
logging.files:
  path: /var/log/filebeat
  name: filebeat
  keepfiles: 7
  permissions: 0644
```

**è°ƒè¯•ç¯å¢ƒé…ç½®**ï¼š
```yaml
logging.level: debug
logging.to_files: true
logging.selectors: ["harvester", "input", "output"]
```

**å¿«é€Ÿè°ƒè¯•å‘½ä»¤**ï¼š
```bash
# æœ€å¸¸ç”¨çš„è°ƒè¯•å¯åŠ¨
./filebeat -e -d "*"

# é’ˆå¯¹æ€§è°ƒè¯•
./filebeat -e -d "harvester,input"

# ç”Ÿäº§ç¯å¢ƒè¯Šæ–­
./filebeat -e -d "output,elasticsearch" -c /etc/filebeat/filebeat.yml
```

### 6.3 æ•…éšœæ’æŸ¥æ€è·¯


**ä¸‡èƒ½æ’æŸ¥ä¸‰æ­¥æ³•**ï¼š
```
ç¬¬ä¸€æ­¥ï¼šç¡®è®¤åŸºç¡€çŠ¶æ€
â€¢ Filebeatè¿›ç¨‹æ˜¯å¦è¿è¡Œ
â€¢ é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
â€¢ ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

ç¬¬äºŒæ­¥ï¼šå¯ç”¨è°ƒè¯•æ—¥å¿—
â€¢ è®¾ç½®debugçº§åˆ«
â€¢ é€‰æ‹©ç›¸å…³æ¨¡å—
â€¢ è§‚å¯Ÿå…³é”®ä¿¡æ¯

ç¬¬ä¸‰æ­¥ï¼šåˆ†ææ—¥å¿—æ¨¡å¼
â€¢ æ‰¾åˆ°å¼‚å¸¸æ¨¡å¼
â€¢ å®šä½å…·ä½“åŸå› 
â€¢ éªŒè¯è§£å†³æ–¹æ¡ˆ
```

### 6.4 æœ€ä½³å®è·µå»ºè®®


**æ—¥å¸¸è¿ç»´**ï¼š
- ğŸ”¸ ç”Ÿäº§ç¯å¢ƒä½¿ç”¨`info`çº§åˆ«ï¼Œé¿å…æ—¥å¿—è¿‡å¤š
- ğŸ”¸ å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè®¾ç½®åˆç†è½®è½¬
- ğŸ”¸ å»ºç«‹æ—¥å¿—å‘Šè­¦æœºåˆ¶ï¼ŒåŠæ—¶å‘ç°é—®é¢˜

**é—®é¢˜æ’æŸ¥**ï¼š
- ğŸ”¸ å…ˆç”¨`debug`çº§åˆ«å¿«é€Ÿå®šä½é—®é¢˜åŒºåŸŸ
- ğŸ”¸ ä½¿ç”¨é€‰æ‹©æ€§è°ƒè¯•å‡å°‘æ— å…³ä¿¡æ¯
- ğŸ”¸ ä¿å­˜è°ƒè¯•æ—¥å¿—ï¼Œä¾¿äºé—®é¢˜å¤ç°

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- ğŸ”¸ è°ƒè¯•å®Œæˆåè®°å¾—æ¢å¤æ­£å¸¸æ—¥å¿—çº§åˆ«
- ğŸ”¸ åœ¨é«˜è´Ÿè½½ç¯å¢ƒä¸­é¿å…ä½¿ç”¨`trace`çº§åˆ«
- ğŸ”¸ åˆç†è®¾ç½®æ—¥å¿—æ–‡ä»¶ä¿ç•™ç­–ç•¥

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æ—¥å¿—è°ƒè¯•æœ‰å±‚æ¬¡ï¼Œçº§åˆ«é€‰æ‹©è¦åˆé€‚
æ–‡ä»¶è¾“å‡ºä¾¿å­˜æ¡£ï¼Œæ§åˆ¶å°çœ‹æ›´ç›´æ¥  
è°ƒè¯•æ¨¡å¼å®šé—®é¢˜ï¼Œé€‰æ‹©æ¨¡å—æ›´ç²¾ç¡®
æ•…éšœæ’æŸ¥ä¸‰æ­¥èµ°ï¼Œæ—¥å¿—æ¨¡å¼æ˜¯å…³é”®
```