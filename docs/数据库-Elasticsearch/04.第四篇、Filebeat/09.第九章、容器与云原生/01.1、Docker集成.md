---
title: 1ã€Dockeré›†æˆ
---
## ğŸ“š ç›®å½•

1. [Dockeré›†æˆåŸºç¡€æ¦‚å¿µ](#1-Dockeré›†æˆåŸºç¡€æ¦‚å¿µ)
2. [Filebeatå®¹å™¨éƒ¨ç½²æ–¹å¼](#2-Filebeatå®¹å™¨éƒ¨ç½²æ–¹å¼)
3. [Dockeræ¨¡å—é…ç½®è¯¦è§£](#3-Dockeræ¨¡å—é…ç½®è¯¦è§£)
4. [å®¹å™¨å…ƒæ•°æ®é‡‡é›†](#4-å®¹å™¨å…ƒæ•°æ®é‡‡é›†)
5. [é…ç½®æ–‡ä»¶ä¸æ•°æ®å·ç®¡ç†](#5-é…ç½®æ–‡ä»¶ä¸æ•°æ®å·ç®¡ç†)
6. [ç¯å¢ƒå˜é‡ä¸å‚æ•°è®¾ç½®](#6-ç¯å¢ƒå˜é‡ä¸å‚æ•°è®¾ç½®)
7. [å®¹å™¨æ—¥å¿—è·¯å¾„å¤„ç†](#7-å®¹å™¨æ—¥å¿—è·¯å¾„å¤„ç†)
8. [Dockeré•œåƒä½¿ç”¨æœ€ä½³å®è·µ](#8-Dockeré•œåƒä½¿ç”¨æœ€ä½³å®è·µ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ³ Dockeré›†æˆåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Filebeatçš„Dockeré›†æˆ


**ğŸ” ç®€å•ç†è§£**
```
æƒ³è±¡ä¸€ä¸‹ï¼š
ä¼ ç»Ÿæ–¹å¼ï¼šFilebeatåƒä¸ª"ç®¡å®¶"ï¼Œéœ€è¦ç›´æ¥å®‰è£…åœ¨æ¯å°æœåŠ¡å™¨ä¸Š
Dockeræ–¹å¼ï¼šFilebeatå˜æˆäº†"ä¾¿æºå¼ç®¡å®¶"ï¼Œè£…åœ¨ä¸€ä¸ªç›’å­é‡Œå°±èƒ½å·¥ä½œ

Dockeré›†æˆ = æŠŠFilebeatæ‰“åŒ…æˆå®¹å™¨ + è®©å®ƒèƒ½æ”¶é›†å…¶ä»–å®¹å™¨çš„æ—¥å¿—
```

**ğŸ“‹ æ ¸å¿ƒä»·å€¼**
- **ğŸ¯ ç®€åŒ–éƒ¨ç½²**ï¼šä¸€æ¡å‘½ä»¤å°±èƒ½å¯åŠ¨Filebeat
- **ğŸ”„ ç‰ˆæœ¬ç®¡ç†**ï¼šåƒè½¯ä»¶ç‰ˆæœ¬ä¸€æ ·ç®¡ç†Filebeat
- **âš–ï¸ èµ„æºéš”ç¦»**ï¼šä¸ä¼šå’Œå®¿ä¸»æœºçš„å…¶ä»–ç¨‹åºå†²çª
- **ğŸ“ˆ å¼¹æ€§æ‰©å±•**ï¼šéœ€è¦å‡ ä¸ªå°±å¯åŠ¨å‡ ä¸ª

### 1.2 Dockeré›†æˆçš„å·¥ä½œåŸç†


**ğŸ”§ å·¥ä½œæœºåˆ¶å›¾è§£**
```
å®¿ä¸»æœºç¯å¢ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dockerå®ˆæŠ¤è¿›ç¨‹                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Appå®¹å™¨1    â”‚  â”‚ Appå®¹å™¨2    â”‚       â”‚
â”‚  â”‚ äº§ç”Ÿæ—¥å¿—    â”‚  â”‚ äº§ç”Ÿæ—¥å¿—    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚          â”‚              â”‚               â”‚
â”‚          â–¼              â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Filebeatå®¹å™¨             â”‚       â”‚
â”‚  â”‚ â€¢ è¯»å–å®¹å™¨æ—¥å¿—              â”‚       â”‚
â”‚  â”‚ â€¢ è§£ææ—¥å¿—æ ¼å¼              â”‚       â”‚
â”‚  â”‚ â€¢ å‘é€åˆ°Elasticsearch      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ å…³é”®ç†è§£**
- Filebeatå®¹å™¨èƒ½"çœ‹åˆ°"å…¶ä»–å®¹å™¨çš„æ—¥å¿—æ–‡ä»¶
- é€šè¿‡æŒ‚è½½Dockerçš„æ—¥å¿—ç›®å½•å®ç°æ—¥å¿—æ”¶é›†
- è‡ªåŠ¨å‘ç°æ–°å¯åŠ¨çš„å®¹å™¨å¹¶å¼€å§‹æ”¶é›†æ—¥å¿—

---

## 2. ğŸš€ Filebeatå®¹å™¨éƒ¨ç½²æ–¹å¼


### 2.1 åŸºç¡€éƒ¨ç½²æ–¹æ³•


**â­ æ–¹å¼ä¸€ï¼šDocker Runå‘½ä»¤**
```bash
# æœ€ç®€å•çš„å¯åŠ¨æ–¹å¼
docker run -d \
  --name filebeat \
  --user=root \
  --volume="$(pwd)/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro" \
  --volume="/var/lib/docker/containers:/var/lib/docker/containers:ro" \
  --volume="/var/run/docker.sock:/var/run/docker.sock:ro" \
  docker.elastic.co/beats/filebeat:8.10.0
```

**ğŸ” å‘½ä»¤è§£é‡Š**
| å‚æ•° | ä½œç”¨ | ä¸ºä»€ä¹ˆéœ€è¦ |
|------|------|------------|
| `--user=root` | **ä»¥rootæƒé™è¿è¡Œ** | éœ€è¦è¯»å–Dockeræ—¥å¿—æ–‡ä»¶ |
| `ç¬¬ä¸€ä¸ª--volume` | **æŒ‚è½½é…ç½®æ–‡ä»¶** | å‘Šè¯‰Filebeatæ€ä¹ˆå·¥ä½œ |
| `ç¬¬äºŒä¸ª--volume` | **æŒ‚è½½æ—¥å¿—ç›®å½•** | è®©Filebeatèƒ½è¯»åˆ°å®¹å™¨æ—¥å¿— |
| `ç¬¬ä¸‰ä¸ª--volume` | **æŒ‚è½½Dockerå¥—æ¥å­—** | è·å–å®¹å™¨ä¿¡æ¯å’Œå…ƒæ•°æ® |

**â­ æ–¹å¼äºŒï¼šDocker Compose**
```yaml
version: '3.8'
services:
  filebeat:
    image: docker.elastic.co/beats/filebeat:8.10.0
    user: root
    container_name: filebeat
    restart: unless-stopped
    volumes:
      - ./filebeat.yml:/usr/share/filebeat/filebeat.yml:ro
      - /var/lib/docker/containers:/var/lib/docker/containers:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200
    depends_on:
      - elasticsearch
```

### 2.2 éƒ¨ç½²æ—¶çš„é‡è¦è€ƒè™‘


**ğŸš¨ æƒé™é—®é¢˜**
```
å¸¸è§é”™è¯¯ï¼šæƒé™ä¸è¶³
åŸå› ï¼šFilebeatéœ€è¦è¯»å–Dockerçš„ç³»ç»Ÿæ–‡ä»¶
è§£å†³ï¼šä½¿ç”¨rootç”¨æˆ·æˆ–é…ç½®é€‚å½“çš„ç”¨æˆ·ç»„æƒé™

# æ£€æŸ¥æƒé™çš„æ–¹æ³•
docker logs filebeat  # æŸ¥çœ‹æ˜¯å¦æœ‰æƒé™é”™è¯¯
```

**ğŸ”„ é‡å¯ç­–ç•¥**
- **`unless-stopped`**ï¼šé™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™æ€»æ˜¯é‡å¯
- **`always`**ï¼šæ— è®ºä»€ä¹ˆæƒ…å†µéƒ½é‡å¯
- **`on-failure`**ï¼šåªåœ¨å¤±è´¥æ—¶é‡å¯

---

## 3. ğŸ”§ Dockeræ¨¡å—é…ç½®è¯¦è§£


### 3.1 Dockeræ¨¡å—çš„åŸºæœ¬é…ç½®


**ğŸ“ æœ€ç®€é…ç½®ç¤ºä¾‹**
```yaml
filebeat.inputs:
- type: container
  enabled: true
  paths:
    - '/var/lib/docker/containers/*/*.log'
```

**ğŸ¯ é…ç½®è¯´æ˜**
```
type: container  â† å‘Šè¯‰Filebeatè¿™æ˜¯å®¹å™¨æ—¥å¿—
enabled: true    â† å¯ç”¨è¿™ä¸ªè¾“å…¥æº
paths            â† æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„ä½ç½®
```

### 3.2 é«˜çº§é…ç½®é€‰é¡¹


**ğŸ”§ å®Œæ•´é…ç½®ç¤ºä¾‹**
```yaml
filebeat.inputs:
- type: container
  enabled: true
  paths:
    - '/var/lib/docker/containers/*/*.log'
  
  # ğŸ·ï¸ æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾
  fields:
    env: production
    service_type: web
  fields_under_root: true
  
  # ğŸ“Š å¤šè¡Œæ—¥å¿—å¤„ç†
  multiline.pattern: '^\d{4}-\d{2}-\d{2}'
  multiline.negate: true
  multiline.match: after
  
  # ğŸ¯ å®¹å™¨è¿‡æ»¤
  include_lines: ['^ERR', '^WARN', '^INFO']
  exclude_lines: ['^DEBUG']
  
  # ğŸ“¦ å®¹å™¨æ ‡ç­¾è¿‡æ»¤
  condition: contains(labels.project, "myapp")

# ğŸ” å¤„ç†å™¨é…ç½®
processors:
- add_docker_metadata:
    host: "unix:///var/run/docker.sock"
    match_fields: ["container.id"]
    match_pids: ["process.pid"]
```

**ğŸ’¡ é…ç½®è¦ç‚¹è§£é‡Š**

| é…ç½®é¡¹ | ä½œç”¨ | å®é™…åœºæ™¯ |
|--------|------|----------|
| **fields** | ç»™æ—¥å¿—æ·»åŠ è‡ªå®šä¹‰å­—æ®µ | æ ‡è¯†ç¯å¢ƒï¼šæµ‹è¯•/ç”Ÿäº§ |
| **multiline** | å¤„ç†å¤šè¡Œæ—¥å¿— | Javaå¼‚å¸¸å †æ ˆã€SQLè¯­å¥ |
| **include_lines** | åªæ”¶é›†åŒ¹é…çš„æ—¥å¿— | åªè¦é”™è¯¯å’Œè­¦å‘Šæ—¥å¿— |
| **condition** | æŒ‰å®¹å™¨æ ‡ç­¾è¿‡æ»¤ | åªæ”¶é›†ç‰¹å®šé¡¹ç›®çš„å®¹å™¨ |

### 3.3 å®¹å™¨è‡ªåŠ¨å‘ç°é…ç½®


**ğŸ” è‡ªåŠ¨å‘ç°æœºåˆ¶**
```yaml
filebeat.autodiscover:
  providers:
    - type: docker
      hints.enabled: true
      templates:
        - condition:
            contains:
              docker.container.image: nginx
          config:
            - type: container
              paths:
                - /var/lib/docker/containers/${data.docker.container.id}/*.log
              processors:
                - add_docker_metadata:
                    host: "unix:///var/run/docker.sock"
```

**ğŸ“š è‡ªåŠ¨å‘ç°çš„å¥½å¤„**
- **ğŸ¯ æ™ºèƒ½è¯†åˆ«**ï¼šæ–°å®¹å™¨å¯åŠ¨æ—¶è‡ªåŠ¨å¼€å§‹æ”¶é›†
- **ğŸ·ï¸ çµæ´»é…ç½®**ï¼šä¸åŒç±»å‹å®¹å™¨ç”¨ä¸åŒé…ç½®
- **ğŸ”„ åŠ¨æ€é€‚åº”**ï¼šå®¹å™¨åœæ­¢æ—¶è‡ªåŠ¨åœæ­¢æ”¶é›†

---

## 4. ğŸ“Š å®¹å™¨å…ƒæ•°æ®é‡‡é›†


### 4.1 ä»€ä¹ˆæ˜¯å®¹å™¨å…ƒæ•°æ®


**ğŸ” ç®€å•ç†è§£**
```
æ—¥å¿—å†…å®¹ï¼šåº”ç”¨ç¨‹åºè¾“å‡ºçš„æ–‡å­—ä¿¡æ¯
å…ƒæ•°æ®ï¼šå…³äºè¿™ä¸ªæ—¥å¿—çš„"èº«ä»½è¯ä¿¡æ¯"

æ¯”å¦‚ï¼š
æ—¥å¿—å†…å®¹ï¼š"User login failed"
å…ƒæ•°æ®ï¼šè¿™æ¡æ—¥å¿—æ¥è‡ªå“ªä¸ªå®¹å™¨ã€ä»€ä¹ˆæ—¶é—´ã€å“ªä¸ªé•œåƒç­‰
```

### 4.2 å…ƒæ•°æ®çš„ç±»å‹å’Œç”¨é€”


**ğŸ“‹ ä¸»è¦å…ƒæ•°æ®ç±»å‹**

| å…ƒæ•°æ®ç±»å‹ | åŒ…å«ä¿¡æ¯ | å®é™…ç”¨é€” |
|------------|----------|----------|
| **å®¹å™¨ä¿¡æ¯** | `å®¹å™¨IDã€åç§°ã€é•œåƒ` | å®šä½é—®é¢˜æºå¤´ |
| **æ ‡ç­¾ä¿¡æ¯** | `Docker labels` | åˆ†ç±»å’Œè·¯ç”± |
| **ç½‘ç»œä¿¡æ¯** | `IPåœ°å€ã€ç«¯å£` | ç½‘ç»œé—®é¢˜æ’æŸ¥ |
| **èµ„æºä¿¡æ¯** | `CPUã€å†…å­˜é™åˆ¶` | æ€§èƒ½åˆ†æ |

**ğŸ’» å…ƒæ•°æ®é‡‡é›†é…ç½®**
```yaml
processors:
- add_docker_metadata:
    host: "unix:///var/run/docker.sock"
    # ğŸ¯ æŒ‡å®šåŒ¹é…æ–¹å¼
    match_fields: ["container.id"]
    match_pids: ["process.pid"]
    
    # ğŸ·ï¸ è‡ªå®šä¹‰æ ‡ç­¾æ˜ å°„
    labels.dedot: true
    labels.env: environment
    
    # ğŸ“Š é€‰æ‹©éœ€è¦çš„å…ƒæ•°æ®å­—æ®µ
    default_fields:
      container.id: true
      container.name: true
      container.image: true
      container.labels: true
```

### 4.3 ä½¿ç”¨Hintsç³»ç»Ÿ


**ğŸ¯ Hintsç³»ç»ŸåŸç†**
```
Hints = åœ¨å®¹å™¨æ ‡ç­¾ä¸­å®šä¹‰Filebeaté…ç½®
å¥½å¤„ï¼šä¸ç”¨ä¿®æ”¹Filebeaté…ç½®ï¼Œç›´æ¥åœ¨å®¹å™¨ä¸Šé…ç½®
```

**ğŸ·ï¸ Hintsæ ‡ç­¾ç¤ºä¾‹**
```bash
# å¯åŠ¨åº”ç”¨å®¹å™¨æ—¶æ·»åŠ Hintsæ ‡ç­¾
docker run -d \
  --label co.elastic.logs/enable=true \
  --label co.elastic.logs/multiline.pattern='^\d{4}-\d{2}-\d{2}' \
  --label co.elastic.logs/multiline.negate=true \
  --label co.elastic.logs/processors.add_fields.target=service \
  --label co.elastic.logs/processors.add_fields.fields.name=myapp \
  myapp:latest
```

**ğŸ“š å¸¸ç”¨Hintsæ ‡ç­¾**

| Hintsæ ‡ç­¾ | ä½œç”¨ | ç¤ºä¾‹å€¼ |
|-----------|------|--------|
| `co.elastic.logs/enable` | **å¯ç”¨/ç¦ç”¨æ—¥å¿—æ”¶é›†** | `true/false` |
| `co.elastic.logs/multiline.pattern` | **å¤šè¡Œæ—¥å¿—æ¨¡å¼** | `^\d{4}-\d{2}-\d{2}` |
| `co.elastic.logs/include_lines` | **åŒ…å«ç‰¹å®šè¡Œ** | `^(ERROR\|WARN)` |
| `co.elastic.logs/processors` | **æ·»åŠ å¤„ç†å™¨** | å„ç§å¤„ç†å™¨é…ç½® |

---

## 5. ğŸ“ é…ç½®æ–‡ä»¶ä¸æ•°æ®å·ç®¡ç†


### 5.1 é…ç½®æ–‡ä»¶æŒ‚è½½ç­–ç•¥


**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦æŒ‚è½½é…ç½®æ–‡ä»¶**
```
é—®é¢˜ï¼šå®¹å™¨å†…çš„é…ç½®æ–‡ä»¶æ˜¯åªè¯»çš„
è§£å†³ï¼šæŠŠå¤–éƒ¨é…ç½®æ–‡ä»¶"æŠ•å°„"åˆ°å®¹å™¨å†…éƒ¨
å¥½å¤„ï¼šä¿®æ”¹é…ç½®ä¸ç”¨é‡æ–°æ„å»ºé•œåƒ
```

**ğŸ“‚ é…ç½®æ–‡ä»¶ç»„ç»‡ç»“æ„**
```
project/
â”œâ”€â”€ filebeat.yml          # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ modules.d/             # æ¨¡å—é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ nginx.yml
â”‚   â””â”€â”€ apache.yml
â”œâ”€â”€ docker-compose.yml    # å®¹å™¨ç¼–æ’æ–‡ä»¶
â””â”€â”€ data/                 # æ•°æ®æŒä¹…åŒ–ç›®å½•
    â”œâ”€â”€ registry          # FilebeatçŠ¶æ€æ–‡ä»¶
    â””â”€â”€ logs              # æ—¥å¿—ç¼“å­˜
```

**ğŸ”§ æŒ‚è½½é…ç½®ç¤ºä¾‹**
```yaml
version: '3.8'
services:
  filebeat:
    image: docker.elastic.co/beats/filebeat:8.10.0
    volumes:
      # ğŸ“ ä¸»é…ç½®æ–‡ä»¶
      - ./filebeat.yml:/usr/share/filebeat/filebeat.yml:ro
      
      # ğŸ“‚ æ¨¡å—é…ç½®ç›®å½•
      - ./modules.d/:/usr/share/filebeat/modules.d/:ro
      
      # ğŸ’¾ æ•°æ®æŒä¹…åŒ–
      - ./data/registry:/usr/share/filebeat/data:rw
      
      # ğŸ³ Dockerç›¸å…³æŒ‚è½½
      - /var/lib/docker/containers:/var/lib/docker/containers:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
```

### 5.2 æ•°æ®å·æƒé™ç®¡ç†


**ğŸ” æƒé™é—®é¢˜è§£å†³**
```bash
# åˆ›å»ºæ•°æ®ç›®å½•å¹¶è®¾ç½®æƒé™
mkdir -p ./data/registry
sudo chown -R 1000:1000 ./data/

# è®¾ç½®é…ç½®æ–‡ä»¶æƒé™
chmod 644 filebeat.yml
```

**âš ï¸ å¸¸è§æƒé™é”™è¯¯**
```
é”™è¯¯ä¿¡æ¯ï¼š"permission denied"
åŸå› ï¼šFilebeatç”¨æˆ·æ— æ³•è¯»å†™æŒ‚è½½çš„ç›®å½•
è§£å†³æ–¹æ¡ˆï¼š
1. ä½¿ç”¨rootç”¨æˆ·è¿è¡Œå®¹å™¨
2. ä¿®æ”¹å®¿ä¸»æœºç›®å½•æƒé™
3. ä½¿ç”¨æ­£ç¡®çš„ç”¨æˆ·ID
```

### 5.3 é…ç½®æ–‡ä»¶æ¨¡æ¿


**ğŸ“‹ ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿**
```yaml
# filebeat.yml - ç”Ÿäº§ç¯å¢ƒé…ç½®
filebeat.inputs:
- type: container
  enabled: true
  paths:
    - '/var/lib/docker/containers/*/*.log'
  fields:
    env: ${ENV:production}
    cluster: ${CLUSTER_NAME:default}
  fields_under_root: true

# ğŸ” è‡ªåŠ¨å‘ç°é…ç½®
filebeat.autodiscover:
  providers:
    - type: docker
      hints.enabled: true

# ğŸ“¤ è¾“å‡ºé…ç½®
output.elasticsearch:
  hosts: ["${ELASTICSEARCH_HOSTS:localhost:9200}"]
  username: "${ELASTIC_USERNAME:}"
  password: "${ELASTIC_PASSWORD:}"

# ğŸ“Š ç›‘æ§é…ç½®
monitoring.enabled: true
monitoring.elasticsearch:
  hosts: ["${ELASTICSEARCH_HOSTS:localhost:9200}"]

# ğŸ“‹ æ—¥å¿—é…ç½®
logging.level: ${LOG_LEVEL:info}
logging.to_files: true
logging.files:
  path: /usr/share/filebeat/logs
  name: filebeat
  keepfiles: 7
  permissions: 0644
```

---

## 6. ğŸŒ ç¯å¢ƒå˜é‡ä¸å‚æ•°è®¾ç½®


### 6.1 ç¯å¢ƒå˜é‡çš„ä½œç”¨


**ğŸ¯ ä¸ºä»€ä¹ˆä½¿ç”¨ç¯å¢ƒå˜é‡**
```
é—®é¢˜ï¼šä¸åŒç¯å¢ƒéœ€è¦ä¸åŒé…ç½®ï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªç¯å¢ƒå‡†å¤‡ä¸€ä¸ªé…ç½®æ–‡ä»¶
ç¯å¢ƒå˜é‡æ–¹å¼ï¼šä¸€ä¸ªé…ç½®æ–‡ä»¶ + ä¸åŒçš„ç¯å¢ƒå˜é‡
```

**ğŸ’¡ ç¯å¢ƒå˜é‡çš„ä¼˜åŠ¿**
- **ğŸ”„ çµæ´»åˆ‡æ¢**ï¼šåŒä¸€é•œåƒåœ¨ä¸åŒç¯å¢ƒè¿è¡Œ
- **ğŸ” å®‰å…¨æ€§**ï¼šæ•æ„Ÿä¿¡æ¯ä¸å†™åœ¨é…ç½®æ–‡ä»¶é‡Œ
- **ğŸ“ˆ å¯æ‰©å±•**ï¼šå®¹å™¨ç¼–æ’å·¥å…·æ˜“äºç®¡ç†

### 6.2 å¸¸ç”¨ç¯å¢ƒå˜é‡é…ç½®


**ğŸ“‹ æ ¸å¿ƒç¯å¢ƒå˜é‡**

| ç¯å¢ƒå˜é‡ | ä½œç”¨ | ç¤ºä¾‹å€¼ |
|----------|------|--------|
| `ELASTICSEARCH_HOSTS` | **ESé›†ç¾¤åœ°å€** | `http://es1:9200,http://es2:9200` |
| `ELASTIC_USERNAME` | **ESç”¨æˆ·å** | `filebeat_user` |
| `ELASTIC_PASSWORD` | **ESå¯†ç ** | `your_password` |
| `LOG_LEVEL` | **æ—¥å¿—çº§åˆ«** | `info/debug/error` |
| `ENV` | **ç¯å¢ƒæ ‡è¯†** | `dev/test/prod` |

**ğŸ”§ Docker Composeç¯å¢ƒå˜é‡é…ç½®**
```yaml
version: '3.8'
services:
  filebeat:
    image: docker.elastic.co/beats/filebeat:8.10.0
    environment:
      # ğŸ¯ ESè¿æ¥é…ç½®
      ELASTICSEARCH_HOSTS: "http://elasticsearch:9200"
      ELASTIC_USERNAME: "filebeat_user"
      ELASTIC_PASSWORD: "your_password"
      
      # ğŸ·ï¸ ç¯å¢ƒæ ‡è¯†
      ENV: "production"
      CLUSTER_NAME: "prod-cluster"
      
      # ğŸ“‹ æ—¥å¿—é…ç½®
      LOG_LEVEL: "info"
      
      # ğŸ”§ æ€§èƒ½è°ƒä¼˜
      FILEBEAT_WORKER: "2"
      FILEBEAT_BULK_MAX_SIZE: "1024"
    
    # ğŸ“ ä¹Ÿå¯ä»¥ä»æ–‡ä»¶è¯»å–
    env_file:
      - .env
```

### 6.3 ç¯å¢ƒå˜é‡æ–‡ä»¶ç®¡ç†


**ğŸ“„ .envæ–‡ä»¶ç¤ºä¾‹**
```bash
# .env æ–‡ä»¶ - ç¯å¢ƒå˜é‡é…ç½®
# Elasticsearché…ç½®
ELASTICSEARCH_HOSTS=http://elasticsearch:9200
ELASTIC_USERNAME=filebeat_user
ELASTIC_PASSWORD=your_secure_password

# ç¯å¢ƒé…ç½®
ENV=production
CLUSTER_NAME=prod-cluster-01
LOG_LEVEL=info

# æ€§èƒ½é…ç½®
FILEBEAT_WORKER=2
FILEBEAT_BULK_MAX_SIZE=1024
FILEBEAT_FLUSH_INTERVAL=5s
```

**ğŸ” æ•æ„Ÿä¿¡æ¯ç®¡ç†**
```bash
# ç”Ÿäº§ç¯å¢ƒå¯†ç ç®¡ç†
echo "your_password" | docker secret create elastic_password -

# åœ¨composeä¸­ä½¿ç”¨secrets
version: '3.8'
services:
  filebeat:
    secrets:
      - elastic_password
    environment:
      ELASTIC_PASSWORD_FILE: /run/secrets/elastic_password

secrets:
  elastic_password:
    external: true
```

---

## 7. ğŸ“‚ å®¹å™¨æ—¥å¿—è·¯å¾„å¤„ç†


### 7.1 Dockeræ—¥å¿—é©±åŠ¨æœºåˆ¶


**ğŸ” Dockeræ—¥å¿—å­˜å‚¨æœºåˆ¶**
```
Dockeræ—¥å¿—é©±åŠ¨ç±»å‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ json-file (é»˜è®¤)                â”‚
â”‚ â”œâ”€ å­˜å‚¨ä½ç½®ï¼š/var/lib/docker/... â”‚
â”‚ â”œâ”€ æ ¼å¼ï¼šJSONæ ¼å¼                â”‚
â”‚ â””â”€ è½®è½¬ï¼šå¯é…ç½®å¤§å°å’Œæ•°é‡        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ syslog                          â”‚
â”‚ â”œâ”€ å‘é€åˆ°ç³»ç»Ÿæ—¥å¿—                â”‚
â”‚ â””â”€ é€‚åˆé›†ä¸­å¼æ—¥å¿—ç®¡ç†            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ journald                        â”‚
â”‚ â””â”€ ä½¿ç”¨systemd journal         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“ é»˜è®¤æ—¥å¿—è·¯å¾„ç»“æ„**
```
/var/lib/docker/containers/
â”œâ”€â”€ [å®¹å™¨ID1]/
â”‚   â”œâ”€â”€ [å®¹å™¨ID1]-json.log    # å®é™…æ—¥å¿—æ–‡ä»¶
â”‚   â”œâ”€â”€ config.v2.json        # å®¹å™¨é…ç½®
â”‚   â””â”€â”€ hostconfig.json       # ä¸»æœºé…ç½®
â”œâ”€â”€ [å®¹å™¨ID2]/
â”‚   â””â”€â”€ [å®¹å™¨ID2]-json.log
â””â”€â”€ ...
```

### 7.2 æ—¥å¿—è·¯å¾„é…ç½®ç­–ç•¥


**ğŸ¯ è·¯å¾„é…ç½®æ–¹å¼**

**æ–¹å¼ä¸€ï¼šé€šé…ç¬¦è·¯å¾„**
```yaml
filebeat.inputs:
- type: container
  paths:
    - '/var/lib/docker/containers/*/*.log'
```

**æ–¹å¼äºŒï¼šå¤šè·¯å¾„é…ç½®**
```yaml
filebeat.inputs:
- type: container
  paths:
    - '/var/lib/docker/containers/*/*.log'
    - '/var/log/containers/*.log'  # K8sç¯å¢ƒ
    - '/custom/log/path/*.log'     # è‡ªå®šä¹‰è·¯å¾„
```

**æ–¹å¼ä¸‰ï¼šæ¡ä»¶è·¯å¾„**
```yaml
filebeat.inputs:
- type: container
  paths:
    - '/var/lib/docker/containers/*/*.log'
  condition: |
    equals(docker.container.labels.collect_logs, "true")
```

### 7.3 ç‰¹æ®Šæ—¥å¿—æ ¼å¼å¤„ç†


**ğŸ“Š JSONæ ¼å¼æ—¥å¿—å¤„ç†**
```yaml
filebeat.inputs:
- type: container
  paths:
    - '/var/lib/docker/containers/*/*.log'
  processors:
    # ğŸ” è§£æDocker JSONæ ¼å¼
    - decode_json_fields:
        fields: ["message"]
        target: ""
        overwrite_keys: true
    
    # ğŸ·ï¸ æ·»åŠ å®¹å™¨å…ƒæ•°æ®
    - add_docker_metadata:
        host: "unix:///var/run/docker.sock"
```

**ğŸ“‹ å¤šè¡Œæ—¥å¿—åˆå¹¶**
```yaml
filebeat.inputs:
- type: container
  paths:
    - '/var/lib/docker/containers/*/*.log'
  # ğŸ”— Javaå¼‚å¸¸å †æ ˆå¤„ç†
  multiline.pattern: '^[[:space:]]+(at|\.\.\.)[[:space:]]+.*'
  multiline.negate: false
  multiline.match: after
  multiline.max_lines: 500
```

### 7.4 æ—¥å¿—è½®è½¬ä¸æ¸…ç†


**âš™ï¸ Dockeræ—¥å¿—è½®è½¬é…ç½®**
```bash
# å®¹å™¨å¯åŠ¨æ—¶é…ç½®æ—¥å¿—è½®è½¬
docker run -d \
  --log-driver json-file \
  --log-opt max-size=10m \
  --log-opt max-file=3 \
  myapp:latest
```

**ğŸ”§ Composeæ—¥å¿—è½®è½¬**
```yaml
version: '3.8'
services:
  myapp:
    image: myapp:latest
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
```

---

## 8. ğŸ—ï¸ Dockeré•œåƒä½¿ç”¨æœ€ä½³å®è·µ


### 8.1 å®˜æ–¹é•œåƒvsè‡ªå®šä¹‰é•œåƒ


**ğŸ“Š é•œåƒé€‰æ‹©å¯¹æ¯”**

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **å®˜æ–¹é•œåƒ** | âœ… åŠæ—¶æ›´æ–°<br>âœ… å®‰å…¨æ€§å¥½<br>âœ… é…ç½®æ ‡å‡† | âŒ å®šåˆ¶åŒ–å·®<br>âŒ é•œåƒè¾ƒå¤§ | æ ‡å‡†éƒ¨ç½² |
| **è‡ªå®šä¹‰é•œåƒ** | âœ… é«˜åº¦å®šåˆ¶<br>âœ… é•œåƒç²¾ç®€<br>âœ… é¢„ç½®é…ç½® | âŒ ç»´æŠ¤æˆæœ¬<br>âŒ å®‰å…¨é£é™© | ç‰¹æ®Šéœ€æ±‚ |

### 8.2 å®˜æ–¹é•œåƒä½¿ç”¨


**ğŸ³ å®˜æ–¹é•œåƒæ ‡ç­¾é€‰æ‹©**
```bash
# ğŸ·ï¸ ç‰ˆæœ¬æ ‡ç­¾è¯´æ˜
docker.elastic.co/beats/filebeat:8.10.0     # å…·ä½“ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
docker.elastic.co/beats/filebeat:8.10       # æ¬¡è¦ç‰ˆæœ¬
docker.elastic.co/beats/filebeat:latest     # æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸æ¨èç”Ÿäº§ï¼‰
```

**âš–ï¸ é•œåƒå¤§å°ä¼˜åŒ–**
```bash
# æŸ¥çœ‹é•œåƒå¤§å°
docker images | grep filebeat

# ä½¿ç”¨UBIé•œåƒï¼ˆæ›´å°ï¼‰
docker.elastic.co/beats/filebeat:8.10.0-ubi8
```

### 8.3 è‡ªå®šä¹‰é•œåƒæ„å»º


**ğŸ“ Dockerfileç¤ºä¾‹**
```dockerfile
FROM docker.elastic.co/beats/filebeat:8.10.0

# ğŸ”§ åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œé…ç½®
USER root

# ğŸ“¦ å®‰è£…é¢å¤–ä¾èµ–
RUN yum update -y && \
    yum install -y curl && \
    yum clean all

# ğŸ“ å¤åˆ¶è‡ªå®šä¹‰é…ç½®
COPY filebeat.yml /usr/share/filebeat/filebeat.yml
COPY modules.d/ /usr/share/filebeat/modules.d/

# ğŸ” è®¾ç½®æƒé™
RUN chown -R filebeat:filebeat /usr/share/filebeat/ && \
    chmod 600 /usr/share/filebeat/filebeat.yml

# ğŸ¯ åˆ‡æ¢å›filebeatç”¨æˆ·
USER filebeat

# ğŸ“‹ å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD filebeat test config && filebeat test output

# ğŸš€ å¯åŠ¨å‘½ä»¤
ENTRYPOINT ["/usr/share/filebeat/filebeat"]
CMD ["-e", "-c", "/usr/share/filebeat/filebeat.yml"]
```

### 8.4 é•œåƒå®‰å…¨æœ€ä½³å®è·µ


**ğŸ” å®‰å…¨é…ç½®è¦ç‚¹**

| å®‰å…¨æªæ–½ | å®ç°æ–¹æ³• | ä½œç”¨ |
|----------|----------|------|
| **érootç”¨æˆ·** | `USER filebeat` | å‡å°‘æƒé™é£é™© |
| **åªè¯»æ–‡ä»¶ç³»ç»Ÿ** | `--read-only` | é˜²æ­¢æ–‡ä»¶ç¯¡æ”¹ |
| **èµ„æºé™åˆ¶** | `--memory` `--cpus` | é˜²æ­¢èµ„æºè€—å°½ |
| **ç½‘ç»œéš”ç¦»** | è‡ªå®šä¹‰ç½‘ç»œ | é™åˆ¶ç½‘ç»œè®¿é—® |

**ğŸ›¡ï¸ å®‰å…¨å¯åŠ¨ç¤ºä¾‹**
```bash
docker run -d \
  --name filebeat \
  --user 1000:1000 \
  --read-only \
  --tmpfs /tmp \
  --tmpfs /usr/share/filebeat/data \
  --memory=512m \
  --cpus=0.5 \
  --security-opt no-new-privileges:true \
  -v ./filebeat.yml:/usr/share/filebeat/filebeat.yml:ro \
  docker.elastic.co/beats/filebeat:8.10.0
```

### 8.5 é•œåƒç‰ˆæœ¬ç®¡ç†ç­–ç•¥


**ğŸ“ˆ ç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µ**
```bash
# ğŸ·ï¸ å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨å…·ä½“ç‰ˆæœ¬
image: docker.elastic.co/beats/filebeat:8.10.0

# ğŸ§ª æµ‹è¯•ç¯å¢ƒï¼šé”å®šæ¬¡è¦ç‰ˆæœ¬
image: docker.elastic.co/beats/filebeat:8.10

# ğŸš€ ç”Ÿäº§ç¯å¢ƒï¼šä¸¥æ ¼ç‰ˆæœ¬æ§åˆ¶
image: docker.elastic.co/beats/filebeat:8.10.0

# ğŸ“Š ç‰ˆæœ¬å‡çº§ç­–ç•¥
# 1. å…ˆåœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•æ–°ç‰ˆæœ¬
# 2. æµ‹è¯•ç¯å¢ƒéªŒè¯å…¼å®¹æ€§
# 3. ç”Ÿäº§ç¯å¢ƒåˆ†æ‰¹å‡çº§
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ Dockeré›†æˆæœ¬è´¨ï¼šå°†Filebeatå®¹å™¨åŒ–ï¼Œé€šè¿‡æŒ‚è½½è¯»å–å…¶ä»–å®¹å™¨æ—¥å¿—
ğŸ”¸ æƒé™è¦æ±‚ï¼šéœ€è¦rootæƒé™æˆ–é€‚å½“çš„ç”¨æˆ·ç»„æƒé™è¯»å–Dockeræ–‡ä»¶
ğŸ”¸ æŒ‚è½½åŸç†ï¼šé€šè¿‡volumeæŒ‚è½½Dockeræ—¥å¿—ç›®å½•å’Œå¥—æ¥å­—æ–‡ä»¶
ğŸ”¸ è‡ªåŠ¨å‘ç°ï¼šFilebeatèƒ½è‡ªåŠ¨è¯†åˆ«æ–°å¯åŠ¨çš„å®¹å™¨å¹¶å¼€å§‹æ”¶é›†
ğŸ”¸ å…ƒæ•°æ®é‡‡é›†ï¼šä¸ä»…æ”¶é›†æ—¥å¿—å†…å®¹ï¼Œè¿˜æ”¶é›†å®¹å™¨çš„èº«ä»½ä¿¡æ¯
```

### 9.2 å…³é”®é…ç½®ç†è§£


**ğŸ”¹ ä¸‰ä¸ªæ ¸å¿ƒæŒ‚è½½ç‚¹**
```
/var/lib/docker/containers  â† å®¹å™¨æ—¥å¿—æ–‡ä»¶ä½ç½®
/var/run/docker.sock       â† Docker APIé€šä¿¡æ¥å£  
é…ç½®æ–‡ä»¶æŒ‚è½½                â† å‘Šè¯‰Filebeatå¦‚ä½•å·¥ä½œ
```

**ğŸ”¹ ç¯å¢ƒå˜é‡çš„ä»·å€¼**
```
ä¸€æ¬¡é…ç½®ï¼Œåˆ°å¤„è¿è¡Œï¼š
- åŒä¸€ä¸ªé•œåƒåœ¨ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
- æ•æ„Ÿä¿¡æ¯ä¸æš´éœ²åœ¨é…ç½®æ–‡ä»¶ä¸­
- å®¹å™¨ç¼–æ’å·¥å…·æ˜“äºç®¡ç†å’Œæ‰©å±•
```

**ğŸ”¹ Hintsç³»ç»Ÿçš„ä¾¿åˆ©**
```
åœ¨å®¹å™¨æ ‡ç­¾ä¸­å®šä¹‰æ—¥å¿—æ”¶é›†è§„åˆ™ï¼š
- ä¸ç”¨ä¿®æ”¹Filebeaté…ç½®
- æ¯ä¸ªåº”ç”¨å®¹å™¨è‡ªå®šä¹‰æ—¥å¿—å¤„ç†æ–¹å¼
- å¼€å‘å’Œè¿ç»´èŒè´£åˆ†ç¦»
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ éƒ¨ç½²é€‰æ‹©å»ºè®®**
- **å°è§„æ¨¡ç¯å¢ƒ**ï¼šDocker runå‘½ä»¤å¿«é€Ÿå¯åŠ¨
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šDocker Composeç»Ÿä¸€ç®¡ç†
- **é›†ç¾¤ç¯å¢ƒ**ï¼šKubernetes DaemonSetæ¨¡å¼

**ğŸ”§ é…ç½®ä¼˜åŒ–å»ºè®®**
- **å¼€å‘é˜¶æ®µ**ï¼šå¯ç”¨debugæ—¥å¿—ï¼Œä½¿ç”¨ç®€å•é…ç½®
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä¼˜åŒ–æ€§èƒ½å‚æ•°ï¼Œå¯ç”¨ç›‘æ§
- **å®‰å…¨è¦æ±‚é«˜**ï¼šä½¿ç”¨érootç”¨æˆ·ï¼Œåªè¯»æ–‡ä»¶ç³»ç»Ÿ

**ğŸ“Š ç›‘æ§æŒ‡æ ‡å…³æ³¨**
- **æ”¶é›†çŠ¶æ€**ï¼šç¡®ä¿æ‰€æœ‰å®¹å™¨æ—¥å¿—éƒ½è¢«æ”¶é›†
- **èµ„æºä½¿ç”¨**ï¼šç›‘æ§Filebeatå®¹å™¨çš„CPUå’Œå†…å­˜
- **ç½‘ç»œä¼ è¾“**ï¼šæ£€æŸ¥åˆ°Elasticsearchçš„è¿æ¥çŠ¶æ€

### 9.4 å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³


| é—®é¢˜ç°è±¡ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|----------|----------|
| **æ—¥å¿—æ”¶é›†ä¸åˆ°** | æƒé™ä¸è¶³ | æ£€æŸ¥ç”¨æˆ·æƒé™å’ŒæŒ‚è½½ç‚¹ |
| **å®¹å™¨å¯åŠ¨å¤±è´¥** | é…ç½®æ–‡ä»¶é”™è¯¯ | éªŒè¯YAMLè¯­æ³•å’Œè·¯å¾„ |
| **å…ƒæ•°æ®ç¼ºå¤±** | Dockerå¥—æ¥å­—æœªæŒ‚è½½ | æ·»åŠ docker.sockæŒ‚è½½ |
| **æ€§èƒ½é—®é¢˜** | èµ„æºé™åˆ¶è¿‡å° | è°ƒæ•´å†…å­˜å’ŒCPUé™åˆ¶ |

### 9.5 è¿›é˜¶å­¦ä¹ æ–¹å‘


**ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ ç›®æ ‡**
- **Kubernetesé›†æˆ**ï¼šåœ¨K8sç¯å¢ƒä¸­éƒ¨ç½²Filebeat
- **æ€§èƒ½è°ƒä¼˜**ï¼šå¤§è§„æ¨¡ç¯å¢ƒä¸‹çš„æ€§èƒ½ä¼˜åŒ–
- **å®‰å…¨åŠ å›º**ï¼šä¼ä¸šçº§å®‰å…¨é…ç½®å’Œæƒé™ç®¡ç†
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šCI/CD pipelineä¸­çš„Filebeatéƒ¨ç½²

**ğŸ“š æ¨èå®è·µé¡¹ç›®**
- æ­å»ºå®Œæ•´çš„ELK Stackå®¹å™¨ç¯å¢ƒ
- é…ç½®å¤šåº”ç”¨å®¹å™¨çš„æ—¥å¿—æ”¶é›†
- å®ç°åŸºäºæ ‡ç­¾çš„æ™ºèƒ½æ—¥å¿—è·¯ç”±
- å»ºç«‹æ—¥å¿—æ”¶é›†çš„ç›‘æ§å’Œå‘Šè­¦ä½“ç³»

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- Dockeré›†æˆä¸‰è¦ç´ ï¼šæƒé™ã€æŒ‚è½½ã€é…ç½®
- è‡ªåŠ¨å‘ç°é æ ‡ç­¾ï¼Œå…ƒæ•°æ®é å¥—æ¥å­—
- ç¯å¢ƒå˜é‡ç®¡é…ç½®ï¼Œç‰ˆæœ¬æ§åˆ¶ä¿ç¨³å®š
- å®‰å…¨ç¬¬ä¸€é‡æƒé™ï¼Œç›‘æ§å‘Šè­¦ä¸å¯å°‘