---
title: 6ã€æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—
---
## ğŸ“š ç›®å½•

1. [æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—åŸºç¡€æ¦‚å¿µ](#1-æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—åŸºç¡€æ¦‚å¿µ)
2. [Kafkaæ—¥å¿—é‡‡é›†å®æˆ˜](#2-kafkaæ—¥å¿—é‡‡é›†å®æˆ˜)
3. [RabbitMQæ—¥å¿—å¤„ç†é…ç½®](#3-rabbitmqæ—¥å¿—å¤„ç†é…ç½®)
4. [æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§é…ç½®](#4-æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§é…ç½®)
5. [é˜Ÿåˆ—æ€§èƒ½åˆ†æ](#5-é˜Ÿåˆ—æ€§èƒ½åˆ†æ)
6. [æ¶ˆæ¯æµé‡ç»Ÿè®¡](#6-æ¶ˆæ¯æµé‡ç»Ÿè®¡)
7. [æ•…éšœæ’æŸ¥ä¸ä¼˜åŒ–](#7-æ•…éšœæ’æŸ¥ä¸ä¼˜åŒ–)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—


**é€šä¿—ç†è§£**ï¼š
æƒ³è±¡ä¸€ä¸‹é‚®å±€çš„ä¿¡ä»¶å¤„ç†è¿‡ç¨‹ã€‚é‚®å±€ä¼šè®°å½•æ¯å°ä¿¡çš„æ”¶ä»¶ã€åˆ†æ‹£ã€æ´¾é€ç­‰å„ä¸ªç¯èŠ‚çš„ä¿¡æ¯ï¼Œè¿™äº›è®°å½•å°±åƒ"æ—¥å¿—"ã€‚æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå®ƒä¼šè®°å½•æ¯æ¡æ¶ˆæ¯çš„ç”Ÿäº§ã€å­˜å‚¨ã€æ¶ˆè´¹ç­‰è¿‡ç¨‹ä¿¡æ¯ã€‚

```
ç°å®é‚®å±€å¤„ç†æµç¨‹ï¼š              æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†æµç¨‹ï¼š
å¯„ä»¶äºº â†’ é‚®å±€æ”¶ä»¶ â†’ åˆ†æ‹£ â†’ æ´¾é€     ç”Ÿäº§è€… â†’ é˜Ÿåˆ—å­˜å‚¨ â†’ åˆ†å‘ â†’ æ¶ˆè´¹è€…
   â†“        â†“        â†“        â†“         â†“        â†“        â†“        â†“
è®°å½•å¯„ä»¶   è®°å½•æ”¶ä»¶   è®°å½•åˆ†æ‹£   è®°å½•é€è¾¾   ç”Ÿäº§æ—¥å¿—   å­˜å‚¨æ—¥å¿—   åˆ†å‘æ—¥å¿—   æ¶ˆè´¹æ—¥å¿—
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ“Š **æ€§èƒ½ç›‘æ§**ï¼šäº†è§£æ¶ˆæ¯å¤„ç†é€Ÿåº¦å’Œæ•ˆç‡
- ğŸ” **é—®é¢˜æ’æŸ¥**ï¼šå½“æ¶ˆæ¯ä¸¢å¤±æˆ–å»¶è¿Ÿæ—¶ï¼ŒæŸ¥æ‰¾åŸå› 
- ğŸ“ˆ **å®¹é‡è§„åˆ’**ï¼šæ ¹æ®å†å²æ•°æ®é¢„æµ‹æœªæ¥éœ€æ±‚
- ğŸš¨ **æ•…éšœé¢„è­¦**ï¼šåŠæ—¶å‘ç°ç³»ç»Ÿå¼‚å¸¸

### 1.2 æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—çš„ç±»å‹


| æ—¥å¿—ç±»å‹ | **ä½œç”¨è¯´æ˜** | **åŒ…å«ä¿¡æ¯** | **é‡è¦ç¨‹åº¦** |
|---------|------------|-------------|-------------|
| ğŸŸ¢ **ç³»ç»Ÿæ—¥å¿—** | `è®°å½•é˜Ÿåˆ—æœåŠ¡è¿è¡ŒçŠ¶æ€` | `å¯åŠ¨åœæ­¢ã€é…ç½®å˜æ›´ã€é”™è¯¯ä¿¡æ¯` | `â­â­â­` |
| ğŸ”µ **è®¿é—®æ—¥å¿—** | `è®°å½•å®¢æˆ·ç«¯è¿æ¥æƒ…å†µ` | `è¿æ¥å»ºç«‹ã€è®¤è¯ç»“æœã€æƒé™éªŒè¯` | `â­â­` |
| ğŸŸ¡ **æ¶ˆæ¯æ—¥å¿—** | `è®°å½•æ¶ˆæ¯æµè½¬è¿‡ç¨‹` | `ç”Ÿäº§æ—¶é—´ã€æ¶ˆè´¹æ—¶é—´ã€æ¶ˆæ¯å¤§å°` | `â­â­â­` |
| ğŸŸ  **æ€§èƒ½æ—¥å¿—** | `è®°å½•ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡` | `CPUä½¿ç”¨ç‡ã€å†…å­˜å ç”¨ã€ç£ç›˜IO` | `â­â­â­` |

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦Filebeatæ¥é‡‡é›†


**ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜**ï¼š
```
âŒ æ‰‹å·¥æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š
- éœ€è¦ç™»å½•æ¯å°æœåŠ¡å™¨
- æ—¥å¿—åˆ†æ•£åœ¨ä¸åŒä½ç½®
- æ— æ³•å®æ—¶ç›‘æ§
- éš¾ä»¥ç»Ÿä¸€åˆ†æ

âŒ ç®€å•è„šæœ¬é‡‡é›†ï¼š
- å®¹æ˜“ä¸¢å¤±æ•°æ®
- ç¼ºä¹å®¹é”™æœºåˆ¶
- æ€§èƒ½æ¶ˆè€—å¤§
- ç»´æŠ¤å›°éš¾
```

**Filebeatçš„ä¼˜åŠ¿**ï¼š
```
âœ… è‡ªåŠ¨å‘ç°å’Œé‡‡é›†
âœ… è½»é‡çº§ï¼Œèµ„æºæ¶ˆè€—å°‘
âœ… å…·å¤‡å®¹é”™å’Œé‡è¯•æœºåˆ¶
âœ… æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼
âœ… é…ç½®ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿
```

---

## 2. â˜• Kafkaæ—¥å¿—é‡‡é›†å®æˆ˜


### 2.1 Kafkaæ—¥å¿—æ–‡ä»¶åˆ†å¸ƒ


Kafkaä½œä¸ºåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¼šåœ¨ä¸åŒä½ç½®ç”Ÿæˆå„ç§æ—¥å¿—æ–‡ä»¶ï¼š

```
KafkaæœåŠ¡å™¨ç›®å½•ç»“æ„ï¼š
/opt/kafka/
â”œâ”€â”€ logs/                    â† ä¸»è¦æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ server.log          â† æœåŠ¡å™¨è¿è¡Œæ—¥å¿—ï¼ˆæœ€é‡è¦ï¼‰
â”‚   â”œâ”€â”€ controller.log      â† æ§åˆ¶å™¨æ—¥å¿—
â”‚   â””â”€â”€ state-change.log    â† çŠ¶æ€å˜æ›´æ—¥å¿—
â”œâ”€â”€ kafka-logs/             â† æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ topic1-0/           â† ä¸»é¢˜åˆ†åŒºæ•°æ®
â”‚   â””â”€â”€ __consumer_offsets-0/ â† æ¶ˆè´¹è€…åç§»é‡
â””â”€â”€ config/
    â””â”€â”€ server.properties   â† é…ç½®æ–‡ä»¶
```

### 2.2 åŸºç¡€Kafkaæ—¥å¿—é‡‡é›†é…ç½®


**Step â‘ ï¼šè¯†åˆ«é‡è¦æ—¥å¿—**

ğŸ”¥ **é«˜ä¼˜å…ˆçº§æ—¥å¿—**ï¼ˆå¿…é¡»é‡‡é›†ï¼‰ï¼š
- `server.log`ï¼šåŒ…å«æ‰€æœ‰é‡è¦çš„è¿è¡Œä¿¡æ¯
- `controller.log`ï¼šé›†ç¾¤åè°ƒç›¸å…³ä¿¡æ¯

ğŸŸ¡ **ä¸­ä¼˜å…ˆçº§æ—¥å¿—**ï¼ˆå»ºè®®é‡‡é›†ï¼‰ï¼š
- `state-change.log`ï¼šä¸»é¢˜å’Œåˆ†åŒºçŠ¶æ€å˜åŒ–

**filebeat.yml åŸºç¡€é…ç½®**ï¼š

```yaml
# Kafkaæ—¥å¿—é‡‡é›†é…ç½®
filebeat.inputs:
- type: log
  enabled: true
  paths:
    - /opt/kafka/logs/server.log
    - /opt/kafka/logs/controller.log
  
  # ç»™æ—¥å¿—æ‰“æ ‡ç­¾ï¼Œæ–¹ä¾¿åç»­å¤„ç†
  fields:
    service: kafka
    log_type: server
  fields_under_root: true
  
  # å¤šè¡Œæ—¥å¿—å¤„ç†ï¼ˆJavaå¼‚å¸¸æ ˆï¼‰
  multiline.pattern: '^\d{4}-\d{2}-\d{2}'
  multiline.negate: true
  multiline.match: after

# è¾“å‡ºåˆ°Elasticsearch
output.elasticsearch:
  hosts: ["localhost:9200"]
  index: "kafka-logs-%{+yyyy.MM.dd}"

# æ—¥å¿—çº§åˆ«
logging.level: info
```

### 2.3 é«˜çº§Kafkaç›‘æ§é…ç½®


**è¯†åˆ«å…³é”®æŒ‡æ ‡**ï¼š

```
Kafkaå…³é”®æ€§èƒ½æŒ‡æ ‡ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ååé‡æŒ‡æ ‡ï¼š
   - æ¯ç§’ç”Ÿäº§æ¶ˆæ¯æ•°
   - æ¯ç§’æ¶ˆè´¹æ¶ˆæ¯æ•°
   - ç½‘ç»œIOé€Ÿç‡

âš¡ å»¶è¿ŸæŒ‡æ ‡ï¼š
   - æ¶ˆæ¯ç«¯åˆ°ç«¯å»¶è¿Ÿ
   - ç”Ÿäº§è€…è¯·æ±‚å»¶è¿Ÿ
   - æ¶ˆè´¹è€…fetchå»¶è¿Ÿ

ğŸ”§ èµ„æºä½¿ç”¨ï¼š
   - CPUä½¿ç”¨ç‡
   - å†…å­˜å ç”¨
   - ç£ç›˜ä½¿ç”¨ç‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**å¢å¼ºé…ç½®ç¤ºä¾‹**ï¼š

```yaml
filebeat.inputs:
# KafkaæœåŠ¡å™¨æ—¥å¿—
- type: log
  enabled: true
  paths:
    - /opt/kafka/logs/server.log
  fields:
    service: kafka
    component: server
    environment: production
  
  # è§£æç»“æ„åŒ–ä¿¡æ¯
  processors:
  - dissect:
      tokenizer: "[%{timestamp}] %{level} %{message}"
      field: "message"
  
  # æ·»åŠ ä¸»æœºä¿¡æ¯
  - add_host_metadata:
      when.not.contains.tags: forwarded

# Kafka JMXæŒ‡æ ‡ï¼ˆå¦‚æœå¯ç”¨äº†JMXæ—¥å¿—ï¼‰
- type: log
  enabled: true
  paths:
    - /opt/kafka/logs/kafka-jmx.log
  fields:
    service: kafka
    component: jmx
    metric_type: performance

# è¾“å‡ºé…ç½®
output.elasticsearch:
  hosts: ["es-cluster-01:9200", "es-cluster-02:9200"]
  index: "kafka-logs-%{[fields.component]}-%{+yyyy.MM.dd}"
  
  # æ¨¡æ¿è®¾ç½®
  template.settings:
    index.number_of_shards: 3
    index.number_of_replicas: 1
```

### 2.4 Kafkaæ€§èƒ½æ—¥å¿—åˆ†æ


**ç†è§£Kafkaæ—¥å¿—æ ¼å¼**ï¼š

```
å…¸å‹Kafkaæ—¥å¿—æ¡ç›®ï¼š
[2025-01-22 10:15:30,123] INFO [KafkaServer id=1] Starting... (kafka.server.KafkaServer)
     â†‘                      â†‘    â†‘              â†‘              â†‘
   æ—¶é—´æˆ³               æ—¥å¿—çº§åˆ«  ç»„ä»¶ID      æ“ä½œæè¿°        Javaç±»å
```

**é‡è¦æ—¥å¿—æ¨¡å¼**ï¼š

| æ—¥å¿—æ¨¡å¼ | **å«ä¹‰** | **å…³æ³¨ç‚¹** |
|---------|---------|-----------|
| `ERROR` | `ç³»ç»Ÿé”™è¯¯` | `ğŸš¨ç«‹å³å¤„ç†` |
| `WARN` | `è­¦å‘Šä¿¡æ¯` | `ğŸ”éœ€è¦å…³æ³¨` |
| `Leader elected` | `ä¸»å‰¯æœ¬é€‰ä¸¾` | `ğŸ“Šé›†ç¾¤çŠ¶æ€` |
| `Connection established` | `å®¢æˆ·ç«¯è¿æ¥` | `ğŸ“ˆè¿æ¥ç›‘æ§` |

---

## 3. ğŸ° RabbitMQæ—¥å¿—å¤„ç†é…ç½®


### 3.1 RabbitMQæ—¥å¿—ç‰¹ç‚¹


RabbitMQä½œä¸ºæ¶ˆæ¯ä»£ç†ï¼Œæœ‰ç€ä¸åŒäºKafkaçš„æ—¥å¿—ç‰¹ç‚¹ï¼š

**ä¸»è¦åŒºåˆ«**ï¼š
```
Kafkaæ—¥å¿—ç‰¹ç‚¹ï¼š           RabbitMQæ—¥å¿—ç‰¹ç‚¹ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ åˆ†å¸ƒå¼æ—¥å¿—åˆ†æ•£           â€¢ é›†ä¸­å¼æ—¥å¿—ç®¡ç†
â€¢ ä¸»è¦å…³æ³¨ååé‡           â€¢ é‡ç‚¹å…³æ³¨æ¶ˆæ¯ç¡®è®¤
â€¢ åˆ†åŒºæ¦‚å¿µçªå‡º            â€¢ é˜Ÿåˆ—å’Œäº¤æ¢å™¨æ¦‚å¿µ
â€¢ æ‰¹é‡å¤„ç†ä¸ºä¸»            â€¢ å•æ¡æ¶ˆæ¯å¤„ç†
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 3.2 RabbitMQæ—¥å¿—æ–‡ä»¶ç»“æ„


```
RabbitMQæ—¥å¿—ç›®å½•ï¼š
/var/log/rabbitmq/
â”œâ”€â”€ rabbit@hostname.log              â† ä¸»æœåŠ¡æ—¥å¿—
â”œâ”€â”€ rabbit@hostname-sasl.log         â† è®¤è¯æ—¥å¿—  
â”œâ”€â”€ rabbit@hostname_upgrade.log      â† å‡çº§æ—¥å¿—
â””â”€â”€ crash.log                        â† å´©æºƒæ—¥å¿—
```

### 3.3 RabbitMQæ—¥å¿—é‡‡é›†é…ç½®


**åŸºç¡€é…ç½®**ï¼š

```yaml
filebeat.inputs:
# RabbitMQä¸»æœåŠ¡æ—¥å¿—
- type: log
  enabled: true
  paths:
    - /var/log/rabbitmq/rabbit@*.log
  
  # RabbitMQæ—¥å¿—é€šå¸¸æ˜¯å•è¡Œæ ¼å¼
  fields:
    service: rabbitmq
    log_type: server
  fields_under_root: true
  
  # æ’é™¤è°ƒè¯•ä¿¡æ¯ï¼ˆå‡å°‘å™ªéŸ³ï¼‰
  exclude_lines: ['^.*DEBUG.*$']
  
  # åŒ…å«é‡è¦ä¿¡æ¯
  include_lines: ['^.*ERROR.*$', '^.*WARNING.*$', '^.*INFO.*connection.*$']

# è®¤è¯æ—¥å¿—ï¼ˆå®‰å…¨ç›¸å…³ï¼‰
- type: log
  enabled: true
  paths:
    - /var/log/rabbitmq/*-sasl.log
  fields:
    service: rabbitmq
    log_type: security

# å´©æºƒæ—¥å¿—ï¼ˆç´§æ€¥æƒ…å†µï¼‰
- type: log
  enabled: true
  paths:
    - /var/log/rabbitmq/crash.log
  fields:
    service: rabbitmq
    log_type: crash
    priority: critical
```

### 3.4 RabbitMQæ¶ˆæ¯æµé‡ç›‘æ§


**ç†è§£RabbitMQå…³é”®æŒ‡æ ‡**ï¼š

```
RabbitMQé‡è¦ç›‘æ§æŒ‡æ ‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¢ é˜Ÿåˆ—æŒ‡æ ‡                         â”‚
â”‚   - é˜Ÿåˆ—æ·±åº¦ï¼ˆç§¯å‹æ¶ˆæ¯æ•°ï¼‰           â”‚
â”‚   - æ¶ˆè´¹é€Ÿç‡                       â”‚
â”‚   - å‘å¸ƒé€Ÿç‡                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”— è¿æ¥æŒ‡æ ‡                         â”‚
â”‚   - æ´»è·ƒè¿æ¥æ•°                     â”‚
â”‚   - é€šé“æ•°é‡                       â”‚
â”‚   - è¿æ¥å»ºç«‹/æ–­å¼€é¢‘ç‡               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¾ èµ„æºæŒ‡æ ‡                         â”‚
â”‚   - å†…å­˜ä½¿ç”¨é‡                     â”‚
â”‚   - ç£ç›˜ç©ºé—´                       â”‚
â”‚   - CPUä½¿ç”¨ç‡                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¢å¼ºç›‘æ§é…ç½®**ï¼š

```yaml
filebeat.inputs:
- type: log
  paths:
    - /var/log/rabbitmq/rabbit@*.log
  
  # ä½¿ç”¨å¤„ç†å™¨æå–å…³é”®ä¿¡æ¯
  processors:
  # è§£ææ—¶é—´æˆ³
  - timestamp:
      field: message
      layouts:
        - '2006-01-02 15:04:05.000'
      test:
        - '2025-01-22 10:15:30.123'
  
  # æå–è¿æ¥ä¿¡æ¯
  - dissect:
      tokenizer: "%{timestamp} [%{level}] %{component}: %{details}"
      field: "message"
      when:
        contains:
          message: "connection"
  
  # æ ‡è®°é‡è¦äº‹ä»¶
  - add_tags:
      tags: ["high-priority"]
      when:
        or:
          - contains:
              message: "ERROR"
          - contains:
              message: "connection refused"
          - contains:
              message: "queue full"

output.elasticsearch:
  hosts: ["localhost:9200"]
  index: "rabbitmq-%{[fields.log_type]}-%{+yyyy.MM.dd}"
```

---

## 4. ğŸ“Š æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§é…ç½®


### 4.1 ç»Ÿä¸€ç›‘æ§ç­–ç•¥


**ç›‘æ§å±‚æ¬¡**ï¼š
```
æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§é‡‘å­—å¡”ï¼š
                     â–²
                   /   \
                 /  ğŸš¨  \
               / å‘Šè­¦ç›‘æ§ \              â† å¼‚å¸¸æƒ…å†µç«‹å³é€šçŸ¥
             /_____________\
           /                 \
         /    ğŸ“ˆ æ€§èƒ½ç›‘æ§      \          â† å®æ—¶æ€§èƒ½æŒ‡æ ‡
       /_____________________\
     /                         \
   /     ğŸ“‹ ä¸šåŠ¡ç›‘æ§           \        â† ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡
 /________________________________\
/              ğŸ“Š åŸºç¡€ç›‘æ§              \    â† åŸºç¡€è®¾æ–½çŠ¶æ€
```

### 4.2 å¤šé˜Ÿåˆ—ç»Ÿä¸€é‡‡é›†é…ç½®


**åœºæ™¯è¯´æ˜**ï¼š
é€šå¸¸ç”Ÿäº§ç¯å¢ƒä¼šåŒæ—¶è¿è¡Œå¤šç§æ¶ˆæ¯é˜Ÿåˆ—ï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç†å’Œç›‘æ§ã€‚

```yaml
# å¤šæ¶ˆæ¯é˜Ÿåˆ—ç»Ÿä¸€é‡‡é›†é…ç½®
filebeat.inputs:

# Kafkaé›†ç¾¤æ—¥å¿—
- type: log
  enabled: true
  paths:
    - /opt/kafka*/logs/server.log
    - /opt/kafka*/logs/controller.log
  fields:
    mq_type: kafka
    cluster: kafka-prod
    datacenter: dc1
  
  # Kafkaç‰¹æœ‰å¤„ç†
  multiline.pattern: '^\[\d{4}-\d{2}-\d{2}'
  multiline.negate: true
  multiline.match: after

# RabbitMQé›†ç¾¤æ—¥å¿—  
- type: log
  enabled: true
  paths:
    - /var/log/rabbitmq/rabbit@*.log
  fields:
    mq_type: rabbitmq
    cluster: rmq-prod
    datacenter: dc1

# Redisï¼ˆä¹Ÿå¯ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ï¼‰
- type: log
  enabled: true
  paths:
    - /var/log/redis/redis-server.log
  fields:
    mq_type: redis
    cluster: redis-prod
    datacenter: dc1

# å…¨å±€å¤„ç†å™¨
processors:
# æ·»åŠ ä¸»æœºä¿¡æ¯
- add_host_metadata:
    when.not.contains.tags: forwarded

# è§£ææ—¶é—´æˆ³
- timestamp:
    field: message
    layouts:
      - '2006-01-02 15:04:05'
      - 'Jan 02 15:04:05'

# æ ¹æ®å†…å®¹æ·»åŠ æ ‡ç­¾
- add_tags:
    tags: ["error"]
    when.contains.message: "ERROR"

- add_tags:
    tags: ["connection"]
    when.contains.message: "connection"

# è¾“å‡ºé…ç½®
output.elasticsearch:
  hosts: ["es-node1:9200", "es-node2:9200", "es-node3:9200"]
  
  # æ ¹æ®æ¶ˆæ¯é˜Ÿåˆ—ç±»å‹åˆ†ç´¢å¼•
  indices:
    - index: "mq-kafka-%{+yyyy.MM.dd}"
      when.equals.fields.mq_type: "kafka"
    - index: "mq-rabbitmq-%{+yyyy.MM.dd}"  
      when.equals.fields.mq_type: "rabbitmq"
    - index: "mq-redis-%{+yyyy.MM.dd}"
      when.equals.fields.mq_type: "redis"
```

### 4.3 å®æ—¶å‘Šè­¦é…ç½®


**å‘Šè­¦åˆ†çº§ç­–ç•¥**ï¼š

| å‘Šè­¦çº§åˆ« | **è§¦å‘æ¡ä»¶** | **å“åº”æ—¶é—´** | **å¤„ç†æ–¹å¼** |
|---------|-------------|-------------|-------------|
| ğŸ”´ **ç´§æ€¥** | `æœåŠ¡å®•æœºã€æ•°æ®ä¸¢å¤±` | `< 5åˆ†é’Ÿ` | `ç«‹å³ç”µè¯é€šçŸ¥` |
| ğŸŸ  **é‡è¦** | `æ€§èƒ½ä¸‹é™ã€é˜Ÿåˆ—ç§¯å‹` | `< 15åˆ†é’Ÿ` | `çŸ­ä¿¡+é‚®ä»¶é€šçŸ¥` |
| ğŸŸ¡ **è­¦å‘Š** | `è¿æ¥å¼‚å¸¸ã€èµ„æºä¸è¶³` | `< 30åˆ†é’Ÿ` | `é‚®ä»¶é€šçŸ¥` |
| ğŸŸ¢ **ä¿¡æ¯** | `æ­£å¸¸çŠ¶æ€å˜æ›´` | `æ—¥æŠ¥` | `è®°å½•æ—¥å¿—` |

**Filebeatå‘Šè­¦é…ç½®**ï¼š

```yaml
# é›†æˆå‘Šè­¦å¤„ç†
processors:
# æå–é”™è¯¯ä¿¡æ¯
- script:
    lang: javascript
    source: >
      function(event) {
        var message = event.Get("message");
        
        // æ£€æµ‹ä¸¥é‡é”™è¯¯
        if (message.includes("OutOfMemoryError") || 
            message.includes("Connection refused") ||
            message.includes("No space left")) {
          event.Put("alert_level", "critical");
          event.Put("alert_type", "system_failure");
        }
        
        // æ£€æµ‹æ€§èƒ½é—®é¢˜
        else if (message.includes("slow") || 
                 message.includes("timeout") ||
                 message.includes("queue full")) {
          event.Put("alert_level", "warning");
          event.Put("alert_type", "performance");
        }
        
        return event;
      }

# å‘é€åˆ°å‘Šè­¦ç³»ç»Ÿ
output.logstash:
  hosts: ["alert-system:5044"]
  when.has_fields: ["alert_level"]
```

---

## 5. âš¡ é˜Ÿåˆ—æ€§èƒ½åˆ†æ


### 5.1 æ€§èƒ½æŒ‡æ ‡æå–


**å…³é”®æ€§èƒ½æŒ‡æ ‡**ï¼š

```
æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½æŒ‡æ ‡ä½“ç³»ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ˆ ååé‡æŒ‡æ ‡ï¼ˆThroughput Metricsï¼‰
   â”œâ”€ æ¯ç§’ç”Ÿäº§æ¶ˆæ¯æ•° (Messages/sec produced)
   â”œâ”€ æ¯ç§’æ¶ˆè´¹æ¶ˆæ¯æ•° (Messages/sec consumed)  
   â””â”€ ç½‘ç»œååé‡ (Network throughput)

â±ï¸ å»¶è¿ŸæŒ‡æ ‡ï¼ˆLatency Metricsï¼‰
   â”œâ”€ ç«¯åˆ°ç«¯å»¶è¿Ÿ (End-to-end latency)
   â”œâ”€ ç”Ÿäº§è€…å»¶è¿Ÿ (Producer latency)
   â””â”€ æ¶ˆè´¹è€…å»¶è¿Ÿ (Consumer latency)

ğŸ¯ å¯ç”¨æ€§æŒ‡æ ‡ï¼ˆAvailability Metricsï¼‰
   â”œâ”€ æœåŠ¡è¿è¡Œæ—¶é—´ (Uptime)
   â”œâ”€ é”™è¯¯ç‡ (Error rate)
   â””â”€ è¿æ¥æˆåŠŸç‡ (Connection success rate)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 5.2 æ€§èƒ½æ•°æ®é‡‡é›†é…ç½®


```yaml
filebeat.inputs:
- type: log
  paths:
    - /opt/kafka/logs/server.log
  
  # æ€§èƒ½æŒ‡æ ‡æå–å¤„ç†å™¨
  processors:
  
  # æå–ååé‡ä¿¡æ¯
  - dissect:
      tokenizer: "%{timestamp} [%{level}] %{metric_type}: %{value} %{unit}"
      field: "message"
      when.contains.message: "throughput"
  
  # æå–å»¶è¿Ÿä¿¡æ¯  
  - dissect:
      tokenizer: "%{timestamp} [%{level}] Request latency: %{latency_ms}ms"
      field: "message"
      when.contains.message: "latency"
  
  # è½¬æ¢æ•°å€¼ç±»å‹
  - convert:
      fields:
        - {from: "latency_ms", to: "latency_ms", type: "float"}
        - {from: "value", to: "metric_value", type: "float"}
  
  # è®¡ç®—è¡ç”ŸæŒ‡æ ‡
  - script:
      lang: javascript
      source: >
        function(event) {
          var latency = event.Get("latency_ms");
          if (latency) {
            // å»¶è¿Ÿåˆ†çº§
            if (latency < 10) {
              event.Put("latency_level", "excellent");
            } else if (latency < 50) {
              event.Put("latency_level", "good");
            } else if (latency < 100) {
              event.Put("latency_level", "acceptable");
            } else {
              event.Put("latency_level", "poor");
            }
          }
          return event;
        }

output.elasticsearch:
  hosts: ["localhost:9200"]
  index: "mq-performance-%{+yyyy.MM.dd}"
  
  # æ€§èƒ½æ•°æ®æ¨¡æ¿
  template.settings:
    index.refresh_interval: "5s"
    index.number_of_shards: 1
  
  template.mappings:
    properties:
      latency_ms:
        type: float
      metric_value:
        type: float
      timestamp:
        type: date
```

### 5.3 æ€§èƒ½è¶‹åŠ¿åˆ†æ


**å»ºç«‹æ€§èƒ½åŸºçº¿**ï¼š

â­ **ä¼˜ç§€æ€§èƒ½åŸºçº¿**ï¼š
- æ¶ˆæ¯å»¶è¿Ÿï¼š< 10ms
- ååé‡ï¼š> 1000 msg/s  
- CPUä½¿ç”¨ç‡ï¼š< 60%
- å†…å­˜ä½¿ç”¨ç‡ï¼š< 70%

âš ï¸ **æ€§èƒ½è­¦å‘Šé˜ˆå€¼**ï¼š
- æ¶ˆæ¯å»¶è¿Ÿï¼š> 50ms
- ååé‡ï¼š< 500 msg/s
- CPUä½¿ç”¨ç‡ï¼š> 80%
- å†…å­˜ä½¿ç”¨ç‡ï¼š> 85%

ğŸš¨ **æ€§èƒ½å‘Šè­¦é˜ˆå€¼**ï¼š
- æ¶ˆæ¯å»¶è¿Ÿï¼š> 100ms
- ååé‡ï¼š< 100 msg/s
- CPUä½¿ç”¨ç‡ï¼š> 90%
- å†…å­˜ä½¿ç”¨ç‡ï¼š> 95%

---

## 6. ğŸ“ˆ æ¶ˆæ¯æµé‡ç»Ÿè®¡


### 6.1 æµé‡ç»Ÿè®¡ç­–ç•¥


**ç»Ÿè®¡ç»´åº¦**ï¼š

```
æ¶ˆæ¯æµé‡å¤šç»´åº¦ç»Ÿè®¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ• æ—¶é—´ç»´åº¦                                 â”‚
â”‚   â”œâ”€ å®æ—¶ç»Ÿè®¡ï¼ˆç§’çº§ï¼‰                       â”‚
â”‚   â”œâ”€ çŸ­æœŸç»Ÿè®¡ï¼ˆåˆ†é’Ÿçº§ï¼‰                     â”‚
â”‚   â”œâ”€ ä¸­æœŸç»Ÿè®¡ï¼ˆå°æ—¶çº§ï¼‰                     â”‚
â”‚   â””â”€ é•¿æœŸç»Ÿè®¡ï¼ˆå¤©çº§ï¼‰                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ·ï¸ ä¸šåŠ¡ç»´åº¦                                â”‚
â”‚   â”œâ”€ æŒ‰ä¸»é¢˜/é˜Ÿåˆ—ç»Ÿè®¡                       â”‚
â”‚   â”œâ”€ æŒ‰ç”Ÿäº§è€…ç»Ÿè®¡                         â”‚
â”‚   â”œâ”€ æŒ‰æ¶ˆè´¹è€…ç»Ÿè®¡                         â”‚
â”‚   â””â”€ æŒ‰æ¶ˆæ¯ç±»å‹ç»Ÿè®¡                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ è´¨é‡ç»´åº¦                                â”‚
â”‚   â”œâ”€ æˆåŠŸç‡ç»Ÿè®¡                           â”‚
â”‚   â”œâ”€ é”™è¯¯ç‡ç»Ÿè®¡                           â”‚
â”‚   â”œâ”€ é‡è¯•ç‡ç»Ÿè®¡                           â”‚
â”‚   â””â”€ ä¸¢å¤±ç‡ç»Ÿè®¡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æµé‡ç»Ÿè®¡é…ç½®


```yaml
filebeat.inputs:
- type: log
  paths:
    - /opt/kafka/logs/server.log
    - /var/log/rabbitmq/rabbit@*.log
  
  fields:
    environment: production
    region: asia-east1
  
  # æµé‡ç»Ÿè®¡å¤„ç†å™¨
  processors:
  
  # ç»Ÿè®¡æ¶ˆæ¯ç”Ÿäº§
  - script:
      lang: javascript  
      source: >
        function(event) {
          var message = event.Get("message");
          var timestamp = new Date();
          
          // æå–æ¶ˆæ¯ç”Ÿäº§ä¿¡æ¯
          if (message.includes("produced") || message.includes("published")) {
            event.Put("event_type", "message_produced");
            
            // æå–ä¸»é¢˜/é˜Ÿåˆ—å
            var topicMatch = message.match(/topic[:\s]+([^\s,]+)/i);
            if (topicMatch) {
              event.Put("topic", topicMatch[1]);
            }
            
            // æå–æ¶ˆæ¯æ•°é‡
            var countMatch = message.match(/(\d+)\s+messages?/i);
            if (countMatch) {
              event.Put("message_count", parseInt(countMatch[1]));
            }
          }
          
          // æå–æ¶ˆæ¯æ¶ˆè´¹ä¿¡æ¯
          if (message.includes("consumed") || message.includes("delivered")) {
            event.Put("event_type", "message_consumed");
          }
          
          // æ·»åŠ æ—¶é—´æˆ³
          event.Put("statistics_timestamp", timestamp.toISOString());
          
          return event;
        }
  
  # æ·»åŠ ç»Ÿè®¡æ ‡ç­¾
  - add_tags:
      tags: ["statistics", "flow_analysis"]
      when.has_fields: ["event_type"]

# ä¸“é—¨çš„ç»Ÿè®¡è¾“å‡º
output.elasticsearch:
  hosts: ["localhost:9200"]
  
  # æ ¹æ®äº‹ä»¶ç±»å‹åˆ†åˆ«å­˜å‚¨
  indices:
    - index: "mq-stats-production-%{+yyyy.MM.dd}"
      when.equals.event_type: "message_produced"
    - index: "mq-stats-consumption-%{+yyyy.MM.dd}"
      when.equals.event_type: "message_consumed"
    - index: "mq-logs-general-%{+yyyy.MM.dd}"
      when.not.has_fields: ["event_type"]
```

### 6.3 è‡ªåŠ¨åŒ–ç»Ÿè®¡æŠ¥å‘Š


**æ—¥å¸¸ç»Ÿè®¡éœ€æ±‚**ï¼š

ğŸ”¥ **æ¯æ—¥å¿…çœ‹æŒ‡æ ‡**ï¼š
- æ¶ˆæ¯æ€»é‡ï¼šç”Ÿäº§/æ¶ˆè´¹æ•°é‡å¯¹æ¯”
- å³°å€¼æ—¶æ®µï¼šè¯†åˆ«ä¸šåŠ¡é«˜å³°æœŸ
- å¼‚å¸¸äº‹ä»¶ï¼šé”™è¯¯å’Œå‘Šè­¦ç»Ÿè®¡
- èµ„æºä½¿ç”¨ï¼šCPUã€å†…å­˜ã€ç£ç›˜è¶‹åŠ¿

ğŸ“Š **æ¯å‘¨åˆ†ææŒ‡æ ‡**ï¼š
- å¢é•¿è¶‹åŠ¿ï¼šæ¶ˆæ¯é‡å‘¨ç¯æ¯”
- æ€§èƒ½å˜åŒ–ï¼šå»¶è¿Ÿå’Œååé‡è¶‹åŠ¿
- ç¨³å®šæ€§ï¼šæœåŠ¡å¯ç”¨æ€§ç»Ÿè®¡
- å®¹é‡è§„åˆ’ï¼šé¢„æµ‹æœªæ¥éœ€æ±‚

```yaml
# è‡ªåŠ¨ç»Ÿè®¡é…ç½®
processors:
- script:
    lang: javascript
    source: >
      function(event) {
        var now = new Date();
        var hour = now.getHours();
        var day = now.getDay(); // 0=Sunday, 1=Monday, etc.
        
        // æ ‡è®°ä¸šåŠ¡æ—¶æ®µ
        if (hour >= 9 && hour <= 18 && day >= 1 && day <= 5) {
          event.Put("business_hours", true);
          event.Put("time_category", "business");
        } else if (hour >= 19 && hour <= 23) {
          event.Put("time_category", "evening");
        } else {
          event.Put("time_category", "night");
        }
        
        // æ ‡è®°ä¸€å‘¨ä¸­çš„æ—¥æœŸç±»å‹
        if (day >= 1 && day <= 5) {
          event.Put("day_type", "weekday");
        } else {
          event.Put("day_type", "weekend");
        }
        
        return event;
      }
```

---

## 7. ğŸ”§ æ•…éšœæ’æŸ¥ä¸ä¼˜åŒ–


### 7.1 å¸¸è§é—®é¢˜è¯Šæ–­


**å…¸å‹æ•…éšœåœºæ™¯**ï¼š

```
ğŸš¨ æ•…éšœåœºæ™¯åˆ†ç±»ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ æœåŠ¡çº§æ•…éšœï¼š
   â”œâ”€ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡æ— æ³•å¯åŠ¨
   â”œâ”€ æœåŠ¡è¿è¡Œä¸­çªç„¶å´©æºƒ  
   â”œâ”€ é›†ç¾¤èŠ‚ç‚¹å¤±è”
   â””â”€ ç«¯å£æ— æ³•è®¿é—®

ğŸŸ  æ€§èƒ½çº§æ•…éšœï¼š
   â”œâ”€ æ¶ˆæ¯å¤„ç†å»¶è¿Ÿè¿‡é«˜
   â”œâ”€ é˜Ÿåˆ—ç§¯å‹ä¸¥é‡
   â”œâ”€ å†…å­˜ä¸è¶³å¯¼è‡´æ€§èƒ½ä¸‹é™
   â””â”€ ç£ç›˜IOæˆä¸ºç“¶é¢ˆ

ğŸŸ¡ æ•°æ®çº§æ•…éšœï¼š
   â”œâ”€ æ¶ˆæ¯ä¸¢å¤±
   â”œâ”€ æ¶ˆæ¯é‡å¤
   â”œâ”€ æ¶ˆæ¯ä¹±åº
   â””â”€ æ•°æ®æŸå
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**æ•…éšœæ’æŸ¥é…ç½®**ï¼š

```yaml
filebeat.inputs:
# é”™è¯¯æ—¥å¿—ä¸“é¡¹é‡‡é›†
- type: log
  paths:
    - /opt/kafka/logs/server.log
    - /var/log/rabbitmq/rabbit@*.log
  
  # åªé‡‡é›†é”™è¯¯å’Œè­¦å‘Š
  include_lines: ['ERROR', 'WARN', 'FATAL', 'Exception', 'failed', 'timeout']
  
  fields:
    log_category: troubleshooting
    priority: high
  
  processors:
  # é”™è¯¯åˆ†ç±»
  - script:
      lang: javascript
      source: >
        function(event) {
          var message = event.Get("message").toLowerCase();
          
          // æœåŠ¡çº§é”™è¯¯
          if (message.includes("cannot bind") || 
              message.includes("connection refused") ||
              message.includes("service unavailable")) {
            event.Put("error_category", "service");
            event.Put("severity", "critical");
          }
          
          // æ€§èƒ½çº§é”™è¯¯
          else if (message.includes("timeout") ||
                   message.includes("slow") ||
                   message.includes("queue full")) {
            event.Put("error_category", "performance");
            event.Put("severity", "warning");
          }
          
          // æ•°æ®çº§é”™è¯¯
          else if (message.includes("corrupt") ||
                   message.includes("lost") ||
                   message.includes("duplicate")) {
            event.Put("error_category", "data");
            event.Put("severity", "major");
          }
          
          return event;
        }

output.elasticsearch:
  hosts: ["localhost:9200"]
  index: "mq-troubleshooting-%{+yyyy.MM.dd}"
```

### 7.2 æ€§èƒ½ä¼˜åŒ–ç›‘æ§


**ä¼˜åŒ–å»ºè®®è¿½è¸ª**ï¼š

| ä¼˜åŒ–æ–¹å‘ | **ç›‘æ§æŒ‡æ ‡** | **ä¼˜åŒ–ç›®æ ‡** | **é…ç½®è¦ç‚¹** |
|---------|-------------|-------------|-------------|
| ğŸš€ **ååé‡** | `msg/s, MB/s` | `æå‡å¤„ç†èƒ½åŠ›` | `æ‰¹é‡å¤§å°ã€å¹¶å‘æ•°` |
| âš¡ **å»¶è¿Ÿ** | `å“åº”æ—¶é—´, é˜Ÿåˆ—æ·±åº¦` | `é™ä½å¤„ç†å»¶è¿Ÿ` | `ç¼“å­˜ã€é¢„è¯»å–` |
| ğŸ’¾ **èµ„æº** | `CPU, Memory, Disk` | `åˆç†èµ„æºä½¿ç”¨` | `JVMå‚æ•°ã€ç¼“å†²åŒº` |
| ğŸ”„ **ç¨³å®šæ€§** | `é”™è¯¯ç‡, é‡è¯•ç‡` | `æé«˜ç³»ç»Ÿç¨³å®šæ€§` | `è¶…æ—¶ã€é‡è¯•ç­–ç•¥` |

**ä¼˜åŒ–æ•ˆæœè¿½è¸ªé…ç½®**ï¼š

```yaml
# æ€§èƒ½ä¼˜åŒ–å‰åå¯¹æ¯”
processors:
- script:
    lang: javascript
    source: >
      function(event) {
        var message = event.Get("message");
        var timestamp = event.Get("@timestamp");
        
        // è®°å½•æ€§èƒ½æ”¹è¿›
        if (message.includes("performance improved") ||
            message.includes("optimization applied")) {
          event.Put("event_type", "optimization");
          event.Put("track_changes", true);
        }
        
        // è®°å½•æ€§èƒ½ä¸‹é™
        if (message.includes("performance degraded") ||
            message.includes("slower than expected")) {
          event.Put("event_type", "performance_issue");
          event.Put("needs_attention", true);
        }
        
        return event;
      }
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—æœ¬è´¨ï¼šè®°å½•æ¶ˆæ¯ç”Ÿäº§ã€å­˜å‚¨ã€æ¶ˆè´¹å…¨è¿‡ç¨‹çš„è¿è¡Œä¿¡æ¯
ğŸ”¸ é‡‡é›†ç­–ç•¥ï¼šæ ¹æ®é˜Ÿåˆ—ç±»å‹å’Œä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„é‡‡é›†é…ç½®
ğŸ”¸ æ€§èƒ½ç›‘æ§ï¼šå…³æ³¨ååé‡ã€å»¶è¿Ÿã€èµ„æºä½¿ç”¨ä¸‰å¤§æ ¸å¿ƒæŒ‡æ ‡  
ğŸ”¸ æ•…éšœæ’æŸ¥ï¼šå»ºç«‹åˆ†çº§è¯Šæ–­ä½“ç³»ï¼Œå¿«é€Ÿå®šä½é—®é¢˜æ ¹å› 
ğŸ”¸ æµé‡ç»Ÿè®¡ï¼šå¤šç»´åº¦ç»Ÿè®¡åˆ†æï¼Œæ”¯æŒå®¹é‡è§„åˆ’å’Œæ€§èƒ½ä¼˜åŒ–
```

### 8.2 å…³é”®å®è·µè¦ç‚¹


**ğŸ”¹ é…ç½®æœ€ä½³å®è·µ**ï¼š
```
é‡‡é›†æ•ˆç‡ä¼˜åŒ–ï¼š
âœ… ä½¿ç”¨include_linesè¿‡æ»¤é‡è¦æ—¥å¿—
âœ… åˆç†é…ç½®multilineå¤„ç†è§„åˆ™
âœ… é¿å…é‡‡é›†è¿‡å¤šè°ƒè¯•ä¿¡æ¯
âœ… æ ¹æ®æ—¥å¿—ç±»å‹åˆ†åˆ«å¤„ç†

æ€§èƒ½ç›‘æ§è¦ç‚¹ï¼š
âœ… å»ºç«‹æ€§èƒ½åŸºçº¿å’Œå‘Šè­¦é˜ˆå€¼
âœ… ç›‘æ§å…³é”®ä¸šåŠ¡æŒ‡æ ‡
âœ… å®ç°è‡ªåŠ¨åŒ–å‘Šè­¦
âœ… å®šæœŸç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š
```

**ğŸ”¹ æ•…éšœå¤„ç†ç­–ç•¥**ï¼š
```
åˆ†çº§å“åº”æœºåˆ¶ï¼š
ğŸ”´ ç´§æ€¥æ•…éšœï¼šæœåŠ¡ä¸­æ–­ â†’ ç«‹å³å¤„ç†
ğŸŸ  é‡è¦é—®é¢˜ï¼šæ€§èƒ½ä¸‹é™ â†’ å¿«é€Ÿå“åº”  
ğŸŸ¡ ä¸€èˆ¬å‘Šè­¦ï¼šèµ„æºè­¦å‘Š â†’ è®¡åˆ’å¤„ç†
ğŸŸ¢ ä¿¡æ¯è®°å½•ï¼šçŠ¶æ€å˜æ›´ â†’ è·Ÿè¸ªè®°å½•
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


- **ğŸ¯ ä¸šåŠ¡ä¿éšœ**ï¼šé€šè¿‡å®æ—¶ç›‘æ§ç¡®ä¿æ¶ˆæ¯é˜Ÿåˆ—ç¨³å®šè¿è¡Œ
- **ğŸ“Š æ•°æ®é©±åŠ¨**ï¼šåŸºäºæ—¥å¿—æ•°æ®è¿›è¡Œæ€§èƒ½ä¼˜åŒ–å’Œå®¹é‡è§„åˆ’  
- **ğŸ” é—®é¢˜å®šä½**ï¼šå¿«é€Ÿè¯Šæ–­å’Œè§£å†³æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³é—®é¢˜
- **ğŸ“ˆ æŒç»­æ”¹è¿›**ï¼šé€šè¿‡è¶‹åŠ¿åˆ†æä¸æ–­ä¼˜åŒ–ç³»ç»Ÿæ¶æ„

**æ ¸å¿ƒè®°ä½**ï¼š
- æ¶ˆæ¯é˜Ÿåˆ—æ—¥å¿—é‡‡é›†è¦åˆ†ç±»åˆ†çº§ï¼ŒæŠ“ä½é‡ç‚¹
- æ€§èƒ½ç›‘æ§éœ€è¦å»ºç«‹åŸºçº¿å’Œå‘Šè­¦æœºåˆ¶
- æ•…éšœæ’æŸ¥è¦æœ‰ç³»ç»Ÿæ€§çš„è¯Šæ–­æ€è·¯
- æµé‡ç»Ÿè®¡ä¸ºä¸šåŠ¡å†³ç­–æä¾›æ•°æ®æ”¯æ’‘