---
title: 5ã€å®‰è£…é…ç½®ä¸å¼€å‘ç¯å¢ƒ
---
## ğŸ“š ç›®å½•

1. [Kibanaæ¦‚è¿°ä¸æ ¸å¿ƒä½œç”¨](#1-Kibanaæ¦‚è¿°ä¸æ ¸å¿ƒä½œç”¨)
2. [Kibanaå®‰è£…éƒ¨ç½²è¯¦è§£](#2-Kibanaå®‰è£…éƒ¨ç½²è¯¦è§£)
3. [kibana.ymlæ ¸å¿ƒé…ç½®](#3-kibana-ymlæ ¸å¿ƒé…ç½®)
4. [Dev Toolså¼€å‘å·¥å…·ä½¿ç”¨](#4-DevToolså¼€å‘å·¥å…·ä½¿ç”¨)
5. [ç´¢å¼•æ¨¡å¼ä¸Data Viewsç®¡ç†](#5-ç´¢å¼•æ¨¡å¼ä¸DataViewsç®¡ç†)
6. [å¯è§†åŒ–ç»„ä»¶ä¸Dashboard](#6-å¯è§†åŒ–ç»„ä»¶ä¸Dashboard)
7. [ç›‘æ§é¢æ¿ä¸Webæ§åˆ¶å°](#7-ç›‘æ§é¢æ¿ä¸Webæ§åˆ¶å°)
8. [å¤šç¯å¢ƒéƒ¨ç½²é…ç½®](#8-å¤šç¯å¢ƒéƒ¨ç½²é…ç½®)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŸ Kibanaæ¦‚è¿°ä¸æ ¸å¿ƒä½œç”¨


### 1.1 ä»€ä¹ˆæ˜¯Kibana


**ğŸ¯ é€šä¿—ç†è§£**ï¼š
Kibanaå°±åƒæ˜¯Elasticsearchçš„"**å¯è§†åŒ–çª—å£**"ï¼ŒæŠŠå¤æ‚çš„æ•°æ®æŸ¥è¯¢å˜æˆäº†ç®€å•æ˜“æ‡‚çš„å›¾è¡¨å’Œç•Œé¢ã€‚

```
ç®€å•æ¯”å–»ï¼š
Elasticsearch = å¼ºå¤§çš„æ•°æ®ä»“åº“ï¼ˆå­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼‰
Kibana = ä»“åº“ç®¡ç†å‘˜çš„æ§åˆ¶å°ï¼ˆæŸ¥çœ‹ã€åˆ†æã€ç®¡ç†æ•°æ®ï¼‰

å°±åƒï¼š
æ•°æ®åº“ = å›¾ä¹¦é¦†çš„ä¹¦æ¶
Kibana = å›¾ä¹¦ç®¡ç†ç³»ç»Ÿç•Œé¢
```

**ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½**ï¼š
- **ğŸ” æ•°æ®æ¢ç´¢**ï¼šç”¨å›¾å½¢ç•Œé¢æœç´¢å’Œæµè§ˆElasticsearchä¸­çš„æ•°æ®
- **ğŸ“Š æ•°æ®å¯è§†åŒ–**ï¼šå°†å¤æ‚æ•°æ®è½¬æ¢ä¸ºç›´è§‚çš„å›¾è¡¨å’Œä»ªè¡¨æ¿
- **âš™ï¸ é›†ç¾¤ç®¡ç†**ï¼šç›‘æ§Elasticsearché›†ç¾¤çŠ¶æ€å’Œæ€§èƒ½
- **ğŸ› ï¸ å¼€å‘å·¥å…·**ï¼šæä¾›Dev Toolsè¿›è¡ŒAPIè°ƒè¯•å’Œæ•°æ®æ“ä½œ

### 1.2 Kibanaåœ¨ELKç”Ÿæ€ä¸­çš„ä½ç½®


```
æ•°æ®æµå‘å›¾ï¼š
æ•°æ®æº â†’ Logstash/Beats â†’ Elasticsearch â†’ Kibana â†’ ç”¨æˆ·
 |          |              |             |       |
æ—¥å¿—æ–‡ä»¶   æ•°æ®å¤„ç†        æ•°æ®å­˜å‚¨      æ•°æ®å±•ç¤º  åˆ†æå†³ç­–
ç½‘ç«™è®¿é—®   æ ¼å¼è½¬æ¢        ç´¢å¼•æ£€ç´¢      å›¾è¡¨å±•ç¤º  ä¸šåŠ¡æ´å¯Ÿ
ç³»ç»Ÿç›‘æ§   æ•°æ®æ¸…æ´—        å…¨æ–‡æœç´¢      å®æ—¶ç›‘æ§  è¿ç»´ç®¡ç†
```

**ğŸ”¸ æ ¸å¿ƒä»·å€¼**ï¼š
- **é™ä½é—¨æ§›**ï¼šä¸éœ€è¦å†™å¤æ‚çš„æŸ¥è¯¢è¯­å¥ï¼Œç‚¹å‡»å³å¯åˆ†æ
- **æé«˜æ•ˆç‡**ï¼šå›¾è¡¨æ¯”æ–‡å­—æ›´ç›´è§‚ï¼Œé—®é¢˜ä¸€ç›®äº†ç„¶
- **å®æ—¶ç›‘æ§**ï¼šæ•°æ®å˜åŒ–å®æ—¶åæ˜ ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸
- **å›¢é˜Ÿåä½œ**ï¼šä»ªè¡¨æ¿å¯ä»¥å…±äº«ï¼Œå›¢é˜Ÿç»Ÿä¸€è§†å›¾

---

## 2. ğŸ“¦ Kibanaå®‰è£…éƒ¨ç½²è¯¦è§£


### 2.1 å®‰è£…å‰å‡†å¤‡å·¥ä½œ


**ğŸ¯ ç³»ç»Ÿè¦æ±‚æ£€æŸ¥**ï¼š

| é…ç½®é¡¹ | **æœ€ä½è¦æ±‚** | **æ¨èé…ç½®** | **è¯´æ˜** |
|--------|-------------|-------------|----------|
| **å†…å­˜** | `2GB` | `4GB+` | Kibanaæ¯”è¾ƒè€—å†…å­˜ |
| **CPU** | `2æ ¸` | `4æ ¸+` | å½±å“é¡µé¢å“åº”é€Ÿåº¦ |
| **ç£ç›˜** | `1GB` | `10GB+` | ä¸»è¦å­˜é…ç½®å’Œç¼“å­˜ |
| **ç½‘ç»œ** | `å±€åŸŸç½‘` | `é«˜é€Ÿç½‘ç»œ` | ä¸ESé€šä¿¡é¢‘ç¹ |

**âš ï¸ é‡è¦æé†’**ï¼š
```
ç‰ˆæœ¬å…¼å®¹æ€§ï¼š
âœ… Kibanaç‰ˆæœ¬å¿…é¡»ä¸Elasticsearchç‰ˆæœ¬ä¸€è‡´
âŒ ä¸åŒç‰ˆæœ¬å¯èƒ½å¯¼è‡´åŠŸèƒ½å¼‚å¸¸æˆ–æ— æ³•å¯åŠ¨

ç¤ºä¾‹ï¼š
ES 8.10.0 â†’ Kibana 8.10.0 âœ“
ES 8.10.0 â†’ Kibana 7.17.0 âœ—
```

### 2.2 ä¸åŒå¹³å°å®‰è£…æ–¹å¼


#### ğŸ§ Linuxç³»ç»Ÿå®‰è£…


**æ–¹å¼1ï¼šä½¿ç”¨å®˜æ–¹åŒ…ç®¡ç†å™¨**
```bash
# 1. æ·»åŠ Elasticå®˜æ–¹ä»“åº“
wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
echo "deb https://artifacts.elastic.co/packages/8.x/apt stable main" | sudo tee /etc/apt/sources.list.d/elastic-8.x.list

# 2. æ›´æ–°åŒ…åˆ—è¡¨å¹¶å®‰è£…
sudo apt update
sudo apt install kibana

# 3. å¯åŠ¨æœåŠ¡
sudo systemctl start kibana
sudo systemctl enable kibana
```

**æ–¹å¼2ï¼šä¸‹è½½taråŒ…å®‰è£…**
```bash
# 1. ä¸‹è½½å®‰è£…åŒ…
wget https://artifacts.elastic.co/downloads/kibana/kibana-8.10.0-linux-x86_64.tar.gz

# 2. è§£å‹åˆ°ç›®æ ‡ç›®å½•
tar -xzf kibana-8.10.0-linux-x86_64.tar.gz -C /opt/
cd /opt/kibana-8.10.0

# 3. å¯åŠ¨Kibana
./bin/kibana
```

#### ğŸªŸ Windowsç³»ç»Ÿå®‰è£…


```powershell
# 1. ä¸‹è½½Windowsç‰ˆæœ¬
# è®¿é—®å®˜ç½‘ä¸‹è½½ kibana-8.10.0-windows-x86_64.zip

# 2. è§£å‹åˆ°ç›®å½•ï¼ˆå¦‚ C:\kibanaï¼‰

# 3. å¯åŠ¨Kibana
cd C:\kibana\bin
kibana.bat
```

#### ğŸ³ Dockerå®¹å™¨å®‰è£…


```yaml
# docker-compose.yml
version: '3.8'
services:
  kibana:
    image: docker.elastic.co/kibana/kibana:8.10.0
    container_name: kibana
    ports:
      - "5601:5601"
    environment:
      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200
    depends_on:
      - elasticsearch
    networks:
      - elastic-net

networks:
  elastic-net:
    driver: bridge
```

### 2.3 å®‰è£…éªŒè¯


**ğŸ” å¯åŠ¨çŠ¶æ€æ£€æŸ¥**ï¼š
```bash
# æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œ
ps aux | grep kibana

# æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
netstat -tlnp | grep 5601

# æ£€æŸ¥æ—¥å¿—è¾“å‡º
tail -f /var/log/kibana/kibana.log
```

**ğŸŒ Webç•Œé¢è®¿é—®**ï¼š
```
é»˜è®¤è®¿é—®åœ°å€ï¼šhttp://localhost:5601
é¦–æ¬¡è®¿é—®ä¼šå‡ºç°é…ç½®å‘å¯¼
```

---

## 3. âš™ï¸ kibana.ymlæ ¸å¿ƒé…ç½®


### 3.1 é…ç½®æ–‡ä»¶ä½ç½®


**ğŸ“‚ ä¸åŒå®‰è£…æ–¹å¼çš„é…ç½®æ–‡ä»¶è·¯å¾„**ï¼š
```
åŒ…ç®¡ç†å™¨å®‰è£…ï¼š/etc/kibana/kibana.yml
taråŒ…å®‰è£…ï¼š{å®‰è£…ç›®å½•}/config/kibana.yml
Dockerå®¹å™¨ï¼š/usr/share/kibana/config/kibana.yml
Windowsï¼š{å®‰è£…ç›®å½•}\config\kibana.yml
```

### 3.2 åŸºç¡€è¿æ¥é…ç½®


```yaml
# ==== æœåŠ¡å™¨é…ç½® ====
# Kibanaç›‘å¬çš„åœ°å€ï¼ˆé»˜è®¤åªå…è®¸æœ¬åœ°è®¿é—®ï¼‰
server.host: "0.0.0.0"  # å…è®¸æ‰€æœ‰IPè®¿é—®

# Kibanaç›‘å¬çš„ç«¯å£
server.port: 5601

# Kibanaçš„æ ¹è·¯å¾„ï¼ˆå¦‚æœéƒ¨ç½²åœ¨å­è·¯å¾„ä¸‹ï¼‰
# server.basePath: "/kibana"

# ==== Elasticsearchè¿æ¥é…ç½® ====
# ElasticsearchæœåŠ¡å™¨åœ°å€
elasticsearch.hosts: ["http://localhost:9200"]

# å¦‚æœESå¼€å¯äº†å®‰å…¨è®¤è¯
# elasticsearch.username: "kibana_system"
# elasticsearch.password: "your-password"

# ==== åŸºç¡€è®¾ç½® ====
# Kibanaåœ¨ESä¸­åˆ›å»ºçš„ç´¢å¼•åç§°
# kibana.index: ".kibana"

# é»˜è®¤åº”ç”¨ï¼ˆç”¨æˆ·è®¿é—®Kibanaæ—¶é¦–å…ˆçœ‹åˆ°çš„é¡µé¢ï¼‰
# kibana.defaultAppId: "home"
```

### 3.3 å®‰å…¨ä¸è®¤è¯é…ç½®


```yaml
# ==== å®‰å…¨è®¤è¯è®¾ç½® ====
# å¯ç”¨SSL/TLS
# server.ssl.enabled: true
# server.ssl.certificate: "/path/to/kibana.crt"
# server.ssl.key: "/path/to/kibana.key"

# Elasticsearch SSLé…ç½®
# elasticsearch.ssl.certificateAuthorities: ["/path/to/ca.crt"]
# elasticsearch.ssl.verificationMode: certificate

# ==== ç”¨æˆ·è®¤è¯ ====
# å¦‚æœä½¿ç”¨Elasticçš„å®‰å…¨åŠŸèƒ½
# xpack.security.enabled: true
# xpack.security.encryptionKey: "your-encryption-key"

# LDAPè®¤è¯é…ç½®
# xpack.security.authc.providers:
#   basic.basic1:
#     order: 0
#   ldap.ldap1:
#     order: 1
#     realm: "ldap_realm"
```

### 3.4 æ€§èƒ½ä¼˜åŒ–é…ç½®


```yaml
# ==== å†…å­˜å’Œæ€§èƒ½é…ç½® ====
# Node.jså †å†…å­˜å¤§å°
# node.options: "--max-old-space-size=4096"

# æ—¥å¿—çº§åˆ«
# logging.level: info

# æ—¥å¿—æ–‡ä»¶é…ç½®
# logging.dest: "/var/log/kibana/kibana.log"

# ==== æ•°æ®é…ç½® ====
# Kibanaæ•°æ®ç›®å½•
# path.data: "/var/lib/kibana"

# æœç´¢è¶…æ—¶æ—¶é—´
# elasticsearch.requestTimeout: 30000

# åˆ†ç‰‡è¶…æ—¶æ—¶é—´
# elasticsearch.shardTimeout: 30000
```

### 3.5 å¼€å‘ç¯å¢ƒä¸“ç”¨é…ç½®


```yaml
# ==== å¼€å‘ç¯å¢ƒè®¾ç½® ====
# å¯ç”¨å¼€å‘æ¨¡å¼ï¼ˆæ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼‰
# status.allowAnonymous: true

# å…è®¸è·¨åŸŸè¯·æ±‚
# server.cors.enabled: true
# server.cors.origin: ["http://localhost:3000"]

# å¼€å¯è¯¦ç»†æ—¥å¿—
# logging.level: debug

# ç¦ç”¨ä¸€äº›ç”Ÿäº§ç¯å¢ƒçš„å®‰å…¨æ£€æŸ¥
# csp.strict: false
```

---

## 4. ğŸ› ï¸ Dev Toolså¼€å‘å·¥å…·ä½¿ç”¨


### 4.1 Dev Toolsç•Œé¢ä»‹ç»


**ğŸ¯ Dev Toolsæ˜¯ä»€ä¹ˆ**ï¼š
Dev Toolsæ˜¯Kibanaå†…ç½®çš„**APIè°ƒè¯•å·¥å…·**ï¼Œå°±åƒæµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œä½†ä¸“é—¨ç”¨æ¥ä¸Elasticsearchè¿›è¡Œäº¤äº’ã€‚

```
Dev Toolsç•Œé¢å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Console] [Search Profiler] [Grok Debugger]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                               â”‚
â”‚   è¯·æ±‚ç¼–å†™åŒºåŸŸ    â”‚        å“åº”ç»“æœåŒºåŸŸ            â”‚
â”‚                 â”‚                               â”‚
â”‚ GET _cluster... â”‚   {                          â”‚
â”‚ POST /myindex..â”‚     "cluster_name": "es",    â”‚
â”‚                 â”‚     "status": "yellow"       â”‚
â”‚                 â”‚   }                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ConsoleåŸºç¡€ä½¿ç”¨


**ğŸ”¸ åŸºæœ¬è¯­æ³•æ ¼å¼**ï¼š
```json
HTTPæ–¹æ³• /ç´¢å¼•å/_æ“ä½œ
{
  "è¯·æ±‚ä½“å†…å®¹"
}
```

**ğŸ’¡ å…¥é—¨ç¤ºä¾‹**ï¼š
```json
# 1. æŸ¥çœ‹é›†ç¾¤å¥åº·çŠ¶æ€
GET _cluster/health

# 2. æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•
GET _cat/indices?v

# 3. åˆ›å»ºä¸€ä¸ªç®€å•æ–‡æ¡£
POST /my-first-index/_doc/1
{
  "user": "å¼ ä¸‰",
  "message": "è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¡è®°å½•",
  "timestamp": "2024-01-21"
}

# 4. æœç´¢åˆšåˆ›å»ºçš„æ–‡æ¡£
GET /my-first-index/_search
{
  "query": {
    "match": {
      "user": "å¼ ä¸‰"
    }
  }
}
```

### 4.3 Consoleé«˜çº§åŠŸèƒ½


**âš¡ å¿«æ·é”®æ“ä½œ**ï¼š
```
Ctrl + Enterï¼šæ‰§è¡Œå½“å‰è¯·æ±‚
Ctrl + /ï¼šæ³¨é‡Š/å–æ¶ˆæ³¨é‡Š
Ctrl + Aï¼šå…¨é€‰
Ctrl + Fï¼šæŸ¥æ‰¾æ›¿æ¢
Tabï¼šè‡ªåŠ¨è¡¥å…¨
```

**ğŸ” è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½**ï¼š
- **APIè·¯å¾„è¡¥å…¨**ï¼šè¾“å…¥`GET _c`ä¼šæç¤º`_cluster`, `_cat`ç­‰
- **å­—æ®µåè¡¥å…¨**ï¼šåœ¨æŸ¥è¯¢ä¸­è¾“å…¥å­—æ®µåä¼šè‡ªåŠ¨æç¤º
- **è¯­æ³•æ£€æŸ¥**ï¼šé”™è¯¯çš„JSONæ ¼å¼ä¼šæœ‰çº¢è‰²æ³¢æµªçº¿æç¤º

**ğŸ“‹ è¯·æ±‚å†å²ç®¡ç†**ï¼š
```
æŸ¥çœ‹å†å²ï¼šç‚¹å‡»å³ä¸Šè§’çš„æ—¶é’Ÿå›¾æ ‡
æ”¶è—è¯·æ±‚ï¼šç‚¹å‡»è¯·æ±‚æ—çš„æ˜Ÿæ ‡å›¾æ ‡
åˆ†äº«è¯·æ±‚ï¼šå¤åˆ¶URLåˆ†äº«ç»™åŒäº‹
```

### 4.4 å¸¸ç”¨Dev Toolså‘½ä»¤


```json
# ==== é›†ç¾¤ç®¡ç†å‘½ä»¤ ====
# æŸ¥çœ‹é›†ç¾¤çŠ¶æ€
GET _cluster/health

# æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯
GET _nodes/stats

# æŸ¥çœ‹é›†ç¾¤è®¾ç½®
GET _cluster/settings

# ==== ç´¢å¼•ç®¡ç†å‘½ä»¤ ====
# åˆ›å»ºç´¢å¼•
PUT /products
{
  "mappings": {
    "properties": {
      "name": {"type": "text"},
      "price": {"type": "double"},
      "category": {"type": "keyword"}
    }
  }
}

# æŸ¥çœ‹ç´¢å¼•æ˜ å°„
GET /products/_mapping

# åˆ é™¤ç´¢å¼•
DELETE /products

# ==== æ–‡æ¡£æ“ä½œå‘½ä»¤ ====
# æ‰¹é‡æ’å…¥æ–‡æ¡£
POST /_bulk
{"index": {"_index": "products", "_id": "1"}}
{"name": "iPhone 15", "price": 999.99, "category": "æ‰‹æœº"}
{"index": {"_index": "products", "_id": "2"}}
{"name": "MacBook Pro", "price": 1999.99, "category": "ç”µè„‘"}

# æ›´æ–°æ–‡æ¡£
POST /products/_update/1
{
  "doc": {
    "price": 899.99
  }
}
```

---

## 5. ğŸ“Š ç´¢å¼•æ¨¡å¼ä¸Data Viewsç®¡ç†


### 5.1 ä»€ä¹ˆæ˜¯ç´¢å¼•æ¨¡å¼


**ğŸ¯ é€šä¿—è§£é‡Š**ï¼š
ç´¢å¼•æ¨¡å¼ï¼ˆIndex Patternï¼‰å°±åƒæ˜¯å‘Šè¯‰Kibana"**å»å“ªäº›ç´¢å¼•æ‰¾æ•°æ®**"çš„åœ°å€æœ¬ã€‚

```
ä¸¾ä¸ªä¾‹å­ï¼š
ä½ æœ‰å¤šä¸ªæ—¥å¿—ç´¢å¼•ï¼š
- logs-2024-01-01
- logs-2024-01-02  
- logs-2024-01-03

åˆ›å»ºç´¢å¼•æ¨¡å¼ "logs-*"
â†“
Kibanaå°±çŸ¥é“å»æ‰€æœ‰ä»¥"logs-"å¼€å¤´çš„ç´¢å¼•ä¸­æŸ¥æ‰¾æ•°æ®
```

**ğŸ“‹ ç´¢å¼•æ¨¡å¼çš„ä½œç”¨**ï¼š
- **ğŸ” æ•°æ®å‘ç°**ï¼šå‘Šè¯‰Kibanaåœ¨å“ªäº›ç´¢å¼•ä¸­æœç´¢æ•°æ®
- **ğŸ“… æ—¶é—´å­—æ®µ**ï¼šæŒ‡å®šå“ªä¸ªå­—æ®µä½œä¸ºæ—¶é—´è½´
- **ğŸ·ï¸ å­—æ®µæ˜ å°„**ï¼šå®šä¹‰æ¯ä¸ªå­—æ®µçš„æ•°æ®ç±»å‹å’Œæ˜¾ç¤ºæ–¹å¼
- **ğŸ”§ å­—æ®µæ ¼å¼åŒ–**ï¼šè®¾ç½®æ•°å­—ã€æ—¥æœŸç­‰å­—æ®µçš„æ˜¾ç¤ºæ ¼å¼

### 5.2 åˆ›å»ºç´¢å¼•æ¨¡å¼æ­¥éª¤


**ğŸ› ï¸ è¯¦ç»†æ“ä½œæµç¨‹**ï¼š

```
æ­¥éª¤1ï¼šå¯¼èˆªåˆ°ç®¡ç†é¡µé¢
Kibanaä¸»é¡µ â†’ Management â†’ Stack Management â†’ Index Patterns

æ­¥éª¤2ï¼šåˆ›å»ºæ–°ç´¢å¼•æ¨¡å¼
ç‚¹å‡» "Create index pattern" æŒ‰é’®

æ­¥éª¤3ï¼šå®šä¹‰ç´¢å¼•æ¨¡å¼åç§°
è¾“å…¥ï¼šlogs-*ï¼ˆåŒ¹é…æ‰€æœ‰ä»¥logs-å¼€å¤´çš„ç´¢å¼•ï¼‰
ç³»ç»Ÿä¼šå®æ—¶æ˜¾ç¤ºåŒ¹é…åˆ°çš„ç´¢å¼•

æ­¥éª¤4ï¼šé€‰æ‹©æ—¶é—´å­—æ®µ
ä»ä¸‹æ‹‰èœå•é€‰æ‹©æ—¶é—´å­—æ®µï¼ˆå¦‚@timestampï¼‰
å¦‚æœæ²¡æœ‰æ—¶é—´å­—æ®µï¼Œé€‰æ‹©"I don't want to use the time filter"

æ­¥éª¤5ï¼šå®Œæˆåˆ›å»º
ç‚¹å‡»"Create index pattern"å®Œæˆåˆ›å»º
```

**ğŸ’¡ ç´¢å¼•æ¨¡å¼åç§°ç¤ºä¾‹**ï¼š
```
å•ä¸ªç´¢å¼•ï¼š  my-logs
é€šé…ç¬¦ï¼š    logs-*
å¤šä¸ªé€šé…ç¬¦ï¼šapp-*-logs-*
æ—¥æœŸæ ¼å¼ï¼š  logs-2024-*
æ’é™¤æ¨¡å¼ï¼š  logs-*,-logs-debug-*ï¼ˆæ’é™¤debugæ—¥å¿—ï¼‰
```

### 5.3 Data Viewsæ–°åŠŸèƒ½


**ğŸ†• ä»€ä¹ˆæ˜¯Data Views**ï¼š
Data Viewsæ˜¯Kibana 8.xç‰ˆæœ¬ä¸­ç´¢å¼•æ¨¡å¼çš„å‡çº§ç‰ˆï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚

**ğŸ”¸ Data Views vs ç´¢å¼•æ¨¡å¼å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | **ä¼ ç»Ÿç´¢å¼•æ¨¡å¼** | **Data Views** |
|------|-----------------|----------------|
| **æ•°æ®æº** | ä»…æ”¯æŒESç´¢å¼• | æ”¯æŒå¤šç§æ•°æ®æº |
| **å®æ—¶æ›´æ–°** | æ‰‹åŠ¨åˆ·æ–° | è‡ªåŠ¨æ£€æµ‹å˜åŒ– |
| **å­—æ®µç®¡ç†** | åŸºç¡€åŠŸèƒ½ | é«˜çº§å­—æ®µç¼–è¾‘ |
| **æ€§èƒ½ä¼˜åŒ–** | ä¸€èˆ¬ | æ›´å¥½çš„ç¼“å­˜æœºåˆ¶ |

### 5.4 å­—æ®µç®¡ç†ä¸æ ¼å¼åŒ–


**ğŸ¨ å­—æ®µæ ¼å¼åŒ–é€‰é¡¹**ï¼š
```json
æ•°å­—å­—æ®µæ ¼å¼åŒ–ï¼š
- è´§å¸æ ¼å¼ï¼š$1,234.56
- ç™¾åˆ†æ¯”ï¼š12.34%
- å­—èŠ‚å¤§å°ï¼š1.2 MB
- è‡ªå®šä¹‰æ ¼å¼ï¼šä½¿ç”¨numeral.jsè¯­æ³•

æ—¥æœŸå­—æ®µæ ¼å¼åŒ–ï¼š
- ç›¸å¯¹æ—¶é—´ï¼š2 hours ago
- ç»å¯¹æ—¶é—´ï¼š2024-01-21 10:30:00
- è‡ªå®šä¹‰æ ¼å¼ï¼šYYYY-MM-DD HH:mm

æ–‡æœ¬å­—æ®µå¤„ç†ï¼š
- URLé“¾æ¥ï¼šè‡ªåŠ¨è½¬æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥
- é¢œè‰²æ˜ å°„ï¼šæ ¹æ®å€¼æ˜¾ç¤ºä¸åŒé¢œè‰²
- æˆªæ–­æ˜¾ç¤ºï¼šé•¿æ–‡æœ¬è‡ªåŠ¨æˆªæ–­
```

**âš™ï¸ å­—æ®µè®¾ç½®æ“ä½œ**ï¼š
```
ç¼–è¾‘å­—æ®µï¼š
Index Patterns â†’ é€‰æ‹©æ¨¡å¼ â†’ Fields â†’ ç‚¹å‡»å­—æ®µå â†’ Edit

å¸¸ç”¨è®¾ç½®ï¼š
- Formatï¼šè®¾ç½®æ˜¾ç¤ºæ ¼å¼
- Custom Labelï¼šè‡ªå®šä¹‰å­—æ®µæ˜¾ç¤ºåç§°
- Popularityï¼šè®¾ç½®å­—æ®µé‡è¦æ€§
- Excludeï¼šä»æœç´¢ä¸­æ’é™¤è¯¥å­—æ®µ
```

---

## 6. ğŸ“ˆ å¯è§†åŒ–ç»„ä»¶ä¸Dashboard


### 6.1 å¯è§†åŒ–ç»„ä»¶ç±»å‹æ¦‚è§ˆ


**ğŸ¯ Kibanaæä¾›çš„å›¾è¡¨ç±»å‹**ï¼š

```
åŸºç¡€å›¾è¡¨ï¼š
ğŸ“Š æŸ±çŠ¶å›¾ï¼ˆBar Chartï¼‰     - æ¯”è¾ƒä¸åŒç±»åˆ«çš„æ•°é‡
ğŸ“ˆ çº¿å›¾ï¼ˆLine Chartï¼‰      - æ˜¾ç¤ºè¶‹åŠ¿å˜åŒ–
ğŸ¥§ é¥¼å›¾ï¼ˆPie Chartï¼‰       - æ˜¾ç¤ºå æ¯”å…³ç³»
ğŸ“Š é¢ç§¯å›¾ï¼ˆArea Chartï¼‰    - æ˜¾ç¤ºç´¯ç§¯è¶‹åŠ¿

é«˜çº§å›¾è¡¨ï¼š
ğŸ—ºï¸ åœ°å›¾ï¼ˆMapsï¼‰           - åœ°ç†ä½ç½®æ•°æ®
ğŸ“‹ è¡¨æ ¼ï¼ˆData Tableï¼‰      - ç»“æ„åŒ–æ•°æ®å±•ç¤º
ğŸ›ï¸ ä»ªè¡¨ç›˜ï¼ˆGaugeï¼‰        - æ˜¾ç¤ºå•ä¸€æŒ‡æ ‡
ğŸ”¢ æŒ‡æ ‡ï¼ˆMetricï¼‰         - çªå‡ºæ˜¾ç¤ºé‡è¦æ•°å­—

äº¤äº’ç»„ä»¶ï¼š
ğŸ” è¾“å…¥æ§ä»¶ï¼ˆControlsï¼‰    - ç”¨æˆ·äº¤äº’è¿‡æ»¤
ğŸ“… æ—¶é—´é€‰æ‹©å™¨             - æ—¶é—´èŒƒå›´ç­›é€‰
ğŸ·ï¸ æ ‡ç­¾äº‘ï¼ˆTag Cloudï¼‰    - è¯é¢‘å¯è§†åŒ–
```

### 6.2 åˆ›å»ºç¬¬ä¸€ä¸ªå¯è§†åŒ–å›¾è¡¨


**ğŸ“Š ä»¥æŸ±çŠ¶å›¾ä¸ºä¾‹çš„è¯¦ç»†æ­¥éª¤**ï¼š

```
æ­¥éª¤1ï¼šè¿›å…¥å¯è§†åŒ–é¡µé¢
Kibanaä¸»é¡µ â†’ Visualize â†’ Create visualization

æ­¥éª¤2ï¼šé€‰æ‹©å›¾è¡¨ç±»å‹
ç‚¹å‡» "Vertical Bar"ï¼ˆå‚ç›´æŸ±çŠ¶å›¾ï¼‰

æ­¥éª¤3ï¼šé€‰æ‹©æ•°æ®æº
é€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ç´¢å¼•æ¨¡å¼ï¼ˆå¦‚logs-*ï¼‰

æ­¥éª¤4ï¼šé…ç½®Yè½´ï¼ˆæ•°å€¼è½´ï¼‰
- Aggregation: Countï¼ˆè®¡æ•°ï¼‰
- Custom Label: "æ–‡æ¡£æ•°é‡"

æ­¥éª¤5ï¼šé…ç½®Xè½´ï¼ˆåˆ†ç±»è½´ï¼‰
- Aggregation: Date Histogramï¼ˆæ—¥æœŸç›´æ–¹å›¾ï¼‰
- Field: @timestamp
- Interval: Auto
- Custom Label: "æ—¶é—´"

æ­¥éª¤6ï¼šåº”ç”¨è®¾ç½®å¹¶ä¿å­˜
ç‚¹å‡» "Update" æŸ¥çœ‹å›¾è¡¨
ç‚¹å‡» "Save" ä¿å­˜å¯è§†åŒ–
```

### 6.3 Dashboardä»ªè¡¨æ¿åˆ›å»º


**ğŸ›ï¸ ä»ªè¡¨æ¿å°±æ˜¯å¤šä¸ªå›¾è¡¨çš„ç»„åˆå±•ç¤º**ï¼š

```
ä»ªè¡¨æ¿åˆ›å»ºæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆ›å»ºå¤šä¸ªå¯è§†åŒ–å›¾è¡¨                            â”‚
â”‚    â”œâ”€â”€ ç½‘ç«™è®¿é—®é‡è¶‹åŠ¿å›¾                          â”‚
â”‚    â”œâ”€â”€ ç”¨æˆ·æ¥æºé¥¼å›¾                              â”‚
â”‚    â”œâ”€â”€ é”™è¯¯æ—¥å¿—ç»Ÿè®¡è¡¨                            â”‚
â”‚    â””â”€â”€ å“åº”æ—¶é—´ä»ªè¡¨ç›˜                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. åˆ›å»ºæ–°ä»ªè¡¨æ¿                                  â”‚
â”‚    Dashboard â†’ Create dashboard                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. æ·»åŠ å¯è§†åŒ–ç»„ä»¶                                â”‚
â”‚    Add â†’ é€‰æ‹©å·²ä¿å­˜çš„å¯è§†åŒ–å›¾è¡¨                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. å¸ƒå±€è°ƒæ•´                                      â”‚
â”‚    æ‹–æ‹½è°ƒæ•´ä½ç½®ï¼Œæ‹‰ä¼¸è°ƒæ•´å¤§å°                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. ä¿å­˜ä»ªè¡¨æ¿                                    â”‚
â”‚    Save â†’ è¾“å…¥åç§°å’Œæè¿°                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ ä»ªè¡¨æ¿é«˜çº§åŠŸèƒ½**ï¼š
```
æ—¶é—´è¿‡æ»¤å™¨ï¼š
- æ‰€æœ‰å›¾è¡¨ç»Ÿä¸€æ—¶é—´èŒƒå›´
- æ”¯æŒç›¸å¯¹æ—¶é—´ï¼ˆæœ€è¿‘7å¤©ï¼‰å’Œç»å¯¹æ—¶é—´

æŸ¥è¯¢è¿‡æ»¤å™¨ï¼š
- å…¨å±€è¿‡æ»¤æ¡ä»¶
- å½±å“ä»ªè¡¨æ¿æ‰€æœ‰å›¾è¡¨

è‡ªåŠ¨åˆ·æ–°ï¼š
- è®¾ç½®è‡ªåŠ¨åˆ·æ–°é—´éš”
- å®æ—¶ç›‘æ§æ•°æ®å˜åŒ–

åˆ†äº«åŠŸèƒ½ï¼š
- ç”Ÿæˆåˆ†äº«é“¾æ¥
- å¯¼å‡ºPDFæŠ¥å‘Š
- åµŒå…¥å¤–éƒ¨ç½‘ç«™
```

### 6.4 å¸¸ç”¨å›¾è¡¨é…ç½®æŠ€å·§


**ğŸ“Š æŸ±çŠ¶å›¾ä¼˜åŒ–å»ºè®®**ï¼š
```json
// Yè½´è®¾ç½®æŠ€å·§
{
  "æ˜¾ç¤ºé›¶çº¿": true,
  "è‡ªå®šä¹‰èŒƒå›´": {
    "min": 0,
    "max": "auto"
  },
  "æ ‡ç­¾è§’åº¦": 45
}

// Xè½´æ—¶é—´èšåˆ
{
  "æœ€å°é—´éš”": "1h",
  "æ—¶åŒº": "Asia/Shanghai", 
  "æ ¼å¼": "YYYY-MM-DD HH:mm"
}
```

**ğŸ¥§ é¥¼å›¾æœ€ä½³å®è·µ**ï¼š
```
æ•°æ®å‡†å¤‡ï¼š
- é™åˆ¶åˆ†ç‰‡æ•°é‡ï¼ˆå»ºè®®â‰¤8ä¸ªï¼‰
- ä½¿ç”¨"å…¶ä»–"åˆ†ç»„åˆå¹¶å°æ•°å€¼
- æŒ‰æ•°å€¼å¤§å°æ’åº

è§†è§‰ä¼˜åŒ–ï¼š
- é€‰æ‹©æ˜“åŒºåˆ†çš„é¢œè‰²
- æ·»åŠ æ•°å€¼æ ‡ç­¾
- è€ƒè™‘ç¯å½¢å›¾æ›¿ä»£ä¼ ç»Ÿé¥¼å›¾
```

---

## 7. ğŸ“º ç›‘æ§é¢æ¿ä¸Webæ§åˆ¶å°


### 7.1 é›†ç¾¤ç›‘æ§æ¦‚è¿°


**ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§**ï¼š
ç›‘æ§å°±åƒç»™Elasticsearchè£…äº†"**ä½“æ£€ä»ªå™¨**"ï¼Œéšæ—¶äº†è§£ç³»ç»Ÿçš„å¥åº·çŠ¶å†µã€‚

```
ç›‘æ§çš„æ ¸å¿ƒæŒ‡æ ‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ å¥åº·çŠ¶æ€                                      â”‚
â”‚  â”œâ”€â”€ é›†ç¾¤çŠ¶æ€ï¼šgreen/yellow/red                  â”‚
â”‚  â”œâ”€â”€ èŠ‚ç‚¹åœ¨çº¿ï¼šæ´»è·ƒèŠ‚ç‚¹æ•°é‡                       â”‚
â”‚  â””â”€â”€ åˆ†ç‰‡çŠ¶æ€ï¼šä¸»åˆ†ç‰‡å’Œå‰¯åˆ†ç‰‡å¥åº·æƒ…å†µ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š æ€§èƒ½æŒ‡æ ‡                                      â”‚
â”‚  â”œâ”€â”€ æŸ¥è¯¢å“åº”æ—¶é—´                                â”‚
â”‚  â”œâ”€â”€ ç´¢å¼•é€Ÿåº¦                                    â”‚
â”‚  â”œâ”€â”€ å†…å­˜ä½¿ç”¨ç‡                                  â”‚
â”‚  â””â”€â”€ ç£ç›˜ç©ºé—´ä½¿ç”¨                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” ä¸šåŠ¡æŒ‡æ ‡                                      â”‚
â”‚  â”œâ”€â”€ æ–‡æ¡£æ€»æ•°                                    â”‚
â”‚  â”œâ”€â”€ ç´¢å¼•å¤§å°                                    â”‚
â”‚  â”œâ”€â”€ æŸ¥è¯¢æ¬¡æ•°                                    â”‚
â”‚  â””â”€â”€ é”™è¯¯ç‡ç»Ÿè®¡                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Kibanaå†…ç½®ç›‘æ§åŠŸèƒ½


**ğŸ“ˆ Stack Monitoringä½¿ç”¨**ï¼š
```
è®¿é—®è·¯å¾„ï¼š
Kibanaä¸»é¡µ â†’ Management â†’ Stack Monitoring

ç›‘æ§é¢æ¿åŒ…å«ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é›†ç¾¤æ¦‚è§ˆ   â”‚   èŠ‚ç‚¹è¯¦æƒ…   â”‚   ç´¢å¼•ç»Ÿè®¡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… é›†ç¾¤çŠ¶æ€  â”‚ ğŸ’¾ å†…å­˜ä½¿ç”¨  â”‚ ğŸ“„ æ–‡æ¡£æ•°é‡  â”‚
â”‚ ğŸ–¥ï¸ èŠ‚ç‚¹æ•°é‡  â”‚ ğŸ’½ ç£ç›˜ç©ºé—´  â”‚ ğŸ“ ç´¢å¼•å¤§å°  â”‚
â”‚ ğŸ“Š åˆ†ç‰‡ç»Ÿè®¡  â”‚ âš¡ CPUä½¿ç”¨ç‡ â”‚ ğŸ”„ åˆ·æ–°é¢‘ç‡  â”‚
â”‚ âš ï¸ å‘Šè­¦ä¿¡æ¯  â”‚ ğŸŒ ç½‘ç»œIO   â”‚ ğŸ” æŸ¥è¯¢æ€§èƒ½  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸš¨ å‘Šè­¦é…ç½®**ï¼š
```json
// å‘Šè­¦è§„åˆ™ç¤ºä¾‹
{
  "cluster_health": {
    "condition": "status != 'green'",
    "action": "å‘é€é‚®ä»¶é€šçŸ¥"
  },
  "disk_usage": {
    "condition": "disk_usage > 85%",
    "action": "é’‰é’‰ç¾¤é€šçŸ¥"
  },
  "query_latency": {
    "condition": "avg_response_time > 5s",
    "action": "çŸ­ä¿¡å‘Šè­¦"
  }
}
```

### 7.3 Webæ§åˆ¶å°å¸¸ç”¨åŠŸèƒ½


**ğŸ”§ Index Managementç´¢å¼•ç®¡ç†**ï¼š
```
ç®¡ç†è·¯å¾„ï¼š
Management â†’ Index Management

ä¸»è¦åŠŸèƒ½ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ ç´¢å¼•åˆ—è¡¨                                      â”‚
â”‚  â”œâ”€â”€ æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•çŠ¶æ€                            â”‚
â”‚  â”œâ”€â”€ ç´¢å¼•å¤§å°å’Œæ–‡æ¡£æ•°                            â”‚
â”‚  â””â”€â”€ å¥åº·çŠ¶æ€é¢œè‰²æ ‡è¯†                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš™ï¸ ç´¢å¼•æ“ä½œ                                      â”‚
â”‚  â”œâ”€â”€ æ‰“å¼€/å…³é—­ç´¢å¼•                               â”‚
â”‚  â”œâ”€â”€ åˆ é™¤ç´¢å¼•                                    â”‚
â”‚  â”œâ”€â”€ åˆ·æ–°ç´¢å¼•                                    â”‚
â”‚  â””â”€â”€ å¼ºåˆ¶åˆå¹¶åˆ†ç‰‡                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š è¯¦ç»†ä¿¡æ¯                                      â”‚
â”‚  â”œâ”€â”€ æ˜ å°„ï¼ˆMappingï¼‰æŸ¥çœ‹                         â”‚
â”‚  â”œâ”€â”€ è®¾ç½®ï¼ˆSettingsï¼‰ç¼–è¾‘                        â”‚
â”‚  â””â”€â”€ ç»Ÿè®¡ä¿¡æ¯æŸ¥çœ‹                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ› ï¸ Index Lifecycle Managementç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š
```yaml
# ILMç­–ç•¥ç¤ºä¾‹ï¼šæ—¥å¿—æ•°æ®ç”Ÿå‘½å‘¨æœŸ
policy_name: "logs_policy"
phases:
  hot:      # çƒ­æ•°æ®é˜¶æ®µï¼ˆé¢‘ç¹è¯»å†™ï¼‰
    actions:
      rollover:
        max_size: "10GB"    # è¶…è¿‡10GBè½®è½¬
        max_age: "7d"       # è¶…è¿‡7å¤©è½®è½¬
  warm:     # æ¸©æ•°æ®é˜¶æ®µï¼ˆåªè¯»ï¼Œå¶å°”æŸ¥è¯¢ï¼‰
    min_age: "7d"
    actions:
      allocate:
        number_of_replicas: 0  # å‡å°‘å‰¯æœ¬
  cold:     # å†·æ•°æ®é˜¶æ®µï¼ˆå¾ˆå°‘è®¿é—®ï¼‰
    min_age: "30d"
    actions:
      allocate:
        number_of_replicas: 0
  delete:   # åˆ é™¤é˜¶æ®µ
    min_age: "365d"         # 1å¹´ååˆ é™¤
```

### 7.4 æ€§èƒ½ç›‘æ§å®æˆ˜


**ğŸ“Š å…³é”®æ€§èƒ½æŒ‡æ ‡è§£è¯»**ï¼š
```
ğŸŸ¢ é›†ç¾¤çŠ¶æ€ï¼šGreen
å«ä¹‰ï¼šæ‰€æœ‰ä¸»åˆ†ç‰‡å’Œå‰¯åˆ†ç‰‡éƒ½æ­£å¸¸åˆ†é…
è¡ŒåŠ¨ï¼šæ­£å¸¸è¿è¡Œï¼Œæ— éœ€å¹²é¢„

ğŸŸ¡ é›†ç¾¤çŠ¶æ€ï¼šYellow  
å«ä¹‰ï¼šæ‰€æœ‰ä¸»åˆ†ç‰‡æ­£å¸¸ï¼Œä½†éƒ¨åˆ†å‰¯åˆ†ç‰‡æœªåˆ†é…
è¡ŒåŠ¨ï¼šæ£€æŸ¥èŠ‚ç‚¹æ•°é‡ï¼Œè€ƒè™‘å¢åŠ èŠ‚ç‚¹

ğŸ”´ é›†ç¾¤çŠ¶æ€ï¼šRed
å«ä¹‰ï¼šéƒ¨åˆ†ä¸»åˆ†ç‰‡æœªåˆ†é…ï¼Œæ•°æ®ä¸¢å¤±é£é™©
è¡ŒåŠ¨ï¼šç«‹å³æ£€æŸ¥ï¼Œæ¢å¤æ•…éšœèŠ‚ç‚¹
```

**âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–ï¼š
â˜ ä½¿ç”¨filterä»£æ›¿queryï¼ˆæ›´å¿«çš„ç¼“å­˜ï¼‰
â˜ é¿å…æ·±åº¦åˆ†é¡µï¼ˆä½¿ç”¨scrollæˆ–search_afterï¼‰
â˜ åˆç†è®¾ç½®åˆ†ç‰‡å¤§å°ï¼ˆ20-40GBæ¯åˆ†ç‰‡ï¼‰
â˜ ä½¿ç”¨index templateç»Ÿä¸€è®¾ç½®

ç´¢å¼•æ€§èƒ½ä¼˜åŒ–ï¼š
â˜ æ‰¹é‡ç´¢å¼•è€Œéå•æ¡æ’å…¥
â˜ å…³é—­ä¸å¿…è¦çš„å‰¯æœ¬ï¼ˆä¸´æ—¶ï¼‰
â˜ å¢åŠ refreshé—´éš”
â˜ ä½¿ç”¨SSDå­˜å‚¨
```

---

## 8. ğŸš€ å¤šç¯å¢ƒéƒ¨ç½²é…ç½®


### 8.1 å¼€å‘ç¯å¢ƒé…ç½®


**ğŸ› ï¸ å¼€å‘ç¯å¢ƒç‰¹ç‚¹**ï¼š
```
å¼€å‘ç¯å¢ƒç›®æ ‡ï¼š
- å¿«é€Ÿå¯åŠ¨å’Œè°ƒè¯•
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- å®½æ¾çš„å®‰å…¨è®¾ç½®
- æ–¹ä¾¿çš„æ•°æ®é‡ç½®
```

**ğŸ“ å¼€å‘ç¯å¢ƒkibana.ymlé…ç½®**ï¼š
```yaml
# ==== å¼€å‘ç¯å¢ƒé…ç½® ====
server.host: "0.0.0.0"
server.port: 5601
elasticsearch.hosts: ["http://localhost:9200"]

# å¼€å‘æ¨¡å¼è®¾ç½®
status.allowAnonymous: true
logging.level: debug
logging.dest: stdout

# è·¨åŸŸè®¾ç½®ï¼ˆæ–¹ä¾¿å‰ç«¯å¼€å‘ï¼‰
server.cors.enabled: true
server.cors.origin: ["http://localhost:3000", "http://localhost:8080"]

# å…³é—­ä¸€äº›å®‰å…¨æ£€æŸ¥
csp.strict: false
elasticsearch.ssl.verificationMode: none

# å¿«é€Ÿé‡å¯è®¾ç½®
elasticsearch.requestTimeout: 90000
elasticsearch.pingTimeout: 3000
```

### 8.2 ç”Ÿäº§ç¯å¢ƒé…ç½®


**ğŸ­ ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®**ï¼š
```yaml
# ==== ç”Ÿäº§ç¯å¢ƒé…ç½® ====
server.host: "10.0.1.100"  # å†…ç½‘IP
server.port: 5601

# SSL/TLSé…ç½®
server.ssl.enabled: true
server.ssl.certificate: "/etc/kibana/certs/kibana.crt"
server.ssl.key: "/etc/kibana/certs/kibana.key"

# Elasticsearchè¿æ¥ï¼ˆé›†ç¾¤æ¨¡å¼ï¼‰
elasticsearch.hosts: [
  "https://es-node1:9200",
  "https://es-node2:9200", 
  "https://es-node3:9200"
]

# å®‰å…¨è®¤è¯
elasticsearch.username: "kibana_system"
elasticsearch.password: "${KIBANA_PASSWORD}"
elasticsearch.ssl.certificateAuthorities: ["/etc/kibana/certs/ca.crt"]

# å®‰å…¨è®¾ç½®
xpack.security.enabled: true
xpack.security.encryptionKey: "${KIBANA_ENCRYPTION_KEY}"
server.xsrf.allowlist: ["/api/security/v1/login"]

# æ€§èƒ½ä¼˜åŒ–
node.options: "--max-old-space-size=4096"
elasticsearch.requestTimeout: 30000
elasticsearch.shardTimeout: 30000

# æ—¥å¿—é…ç½®
logging.level: warn
logging.dest: "/var/log/kibana/kibana.log"
logging.rotate.enabled: true
logging.rotate.everyBytes: 100MB
```

### 8.3 é«˜å¯ç”¨éƒ¨ç½²æ¶æ„


**ğŸ”„ è´Ÿè½½å‡è¡¡æ¶æ„å›¾**ï¼š
```
                    ç”¨æˆ·è®¿é—®
                        â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   è´Ÿè½½å‡è¡¡å™¨     â”‚ â† Nginx/HAProxy
                â”‚  (Port: 443)   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â†“           â†“           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Kibana-1   â”‚ â”‚  Kibana-2   â”‚ â”‚  Kibana-3   â”‚
    â”‚ (5601)      â”‚ â”‚ (5601)      â”‚ â”‚ (5601)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“           â†“           â†“
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Elasticsearch   â”‚
                â”‚    Cluster      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ Nginxè´Ÿè½½å‡è¡¡é…ç½®**ï¼š
```nginx
upstream kibana_backend {
    server 10.0.1.101:5601 weight=1 max_fails=3 fail_timeout=30s;
    server 10.0.1.102:5601 weight=1 max_fails=3 fail_timeout=30s;
    server 10.0.1.103:5601 weight=1 max_fails=3 fail_timeout=30s;
}

server {
    listen 443 ssl http2;
    server_name kibana.company.com;
    
    ssl_certificate /etc/ssl/certs/kibana.crt;
    ssl_certificate_key /etc/ssl/private/kibana.key;
    
    location / {
        proxy_pass http://kibana_backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocketæ”¯æŒ
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

### 8.4 Dockerå®¹å™¨é›†ç¾¤éƒ¨ç½²


```yaml
# docker-compose-prod.yml
version: '3.8'
services:
  kibana1:
    image: docker.elastic.co/kibana/kibana:8.10.0
    container_name: kibana1
    environment:
      - SERVER_NAME=kibana1
      - ELASTICSEARCH_HOSTS=http://es-node1:9200,http://es-node2:9200
      - ELASTICSEARCH_USERNAME=kibana_system
      - ELASTICSEARCH_PASSWORD=${ELASTIC_PASSWORD}
    volumes:
      - ./kibana1.yml:/usr/share/kibana/config/kibana.yml:ro
      - kibana1_data:/usr/share/kibana/data
    networks:
      - elastic-net
    deploy:
      resources:
        limits:
          memory: 2G
        reservations:
          memory: 1G

  kibana2:
    image: docker.elastic.co/kibana/kibana:8.10.0
    container_name: kibana2
    environment:
      - SERVER_NAME=kibana2
      - ELASTICSEARCH_HOSTS=http://es-node1:9200,http://es-node2:9200
      - ELASTICSEARCH_USERNAME=kibana_system
      - ELASTICSEARCH_PASSWORD=${ELASTIC_PASSWORD}
    volumes:
      - ./kibana2.yml:/usr/share/kibana/config/kibana.yml:ro
      - kibana2_data:/usr/share/kibana/data
    networks:
      - elastic-net

volumes:
  kibana1_data:
  kibana2_data:

networks:
  elastic-net:
    external: true
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ Kibanaæ ¸å¿ƒä»·å€¼ï¼š
â”œâ”€â”€ ğŸ” æ•°æ®å¯è§†åŒ–ï¼šå¤æ‚æ•°æ®å˜æˆç›´è§‚å›¾è¡¨
â”œâ”€â”€ ğŸ› ï¸ å¼€å‘å·¥å…·ï¼šDev Toolsè¿›è¡ŒAPIè°ƒè¯•
â”œâ”€â”€ ğŸ“Š ç›‘æ§ç®¡ç†ï¼šå®æ—¶ç›‘æ§ESé›†ç¾¤çŠ¶æ€
â””â”€â”€ ğŸ›ï¸ ä»ªè¡¨æ¿ï¼šç»Ÿä¸€å±•ç¤ºå¤šä¸ªæ•°æ®è§†å›¾

ğŸ”§ å…³é”®é…ç½®è¦ç‚¹ï¼š
â”œâ”€â”€ ğŸ“ kibana.ymlï¼šæ ¸å¿ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ”Œ ESè¿æ¥ï¼šç¡®ä¿ç‰ˆæœ¬å…¼å®¹
â”œâ”€â”€ ğŸ”’ å®‰å…¨è®¤è¯ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®
â””â”€â”€ âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šå†…å­˜å’Œè¶…æ—¶è®¾ç½®

ğŸ“‹ å®ç”¨åŠŸèƒ½æ¸…å•ï¼š
â”œâ”€â”€ âœ… ç´¢å¼•æ¨¡å¼ï¼šå®šä¹‰æ•°æ®æ¥æº
â”œâ”€â”€ âœ… Dev Toolsï¼šAPIè°ƒè¯•å¿…å¤‡
â”œâ”€â”€ âœ… å¯è§†åŒ–ï¼šåˆ›å»ºå„ç§å›¾è¡¨
â”œâ”€â”€ âœ… ä»ªè¡¨æ¿ï¼šç»„åˆå±•ç¤ºå›¾è¡¨
â””â”€â”€ âœ… ç›‘æ§é¢æ¿ï¼šé›†ç¾¤å¥åº·ç›‘æ§
```

### 9.2 å­¦ä¹ è¿›é˜¶è·¯å¾„


**ğŸ¯ æ–°æ‰‹å­¦ä¹ é¡ºåº**ï¼š
```
ç¬¬1é˜¶æ®µï¼šåŸºç¡€å…¥é—¨ (1-2å‘¨)
â˜ ç†è§£Kibanaåœ¨ELKä¸­çš„ä½œç”¨
â˜ å®Œæˆå®‰è£…å’ŒåŸºæœ¬é…ç½®
â˜ å­¦ä¼šä½¿ç”¨Dev ToolsåŸºæœ¬å‘½ä»¤
â˜ åˆ›å»ºç¬¬ä¸€ä¸ªç´¢å¼•æ¨¡å¼

ç¬¬2é˜¶æ®µï¼šå¯è§†åŒ–å®è·µ (2-3å‘¨)  
â˜ æŒæ¡å¸¸ç”¨å›¾è¡¨ç±»å‹
â˜ åˆ›å»ºç¬¬ä¸€ä¸ªä»ªè¡¨æ¿
â˜ å­¦ä¼šè®¾ç½®è¿‡æ»¤å™¨å’Œæ—¶é—´èŒƒå›´
â˜ ç†è§£å­—æ®µæ ¼å¼åŒ–

ç¬¬3é˜¶æ®µï¼šé«˜çº§åº”ç”¨ (3-4å‘¨)
â˜ é…ç½®é›†ç¾¤ç›‘æ§
â˜ è®¾è®¡å¤æ‚ä»ªè¡¨æ¿
â˜ å­¦ä¼šç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†
â˜ æŒæ¡é«˜å¯ç”¨éƒ¨ç½²

ç¬¬4é˜¶æ®µï¼šç”Ÿäº§å®æˆ˜ (æŒç»­)
â˜ æ€§èƒ½ä¼˜åŒ–å’Œæ•…éšœæ’é™¤
â˜ å®‰å…¨é…ç½®å’Œæƒé™ç®¡ç†  
â˜ è‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬
â˜ ä¸šåŠ¡æŒ‡æ ‡ä½“ç³»å»ºè®¾
```

### 9.3 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â“ å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š
```
ğŸ”´ é—®é¢˜ï¼šKibanaå¯åŠ¨å¤±è´¥
æ’æŸ¥æ­¥éª¤ï¼š
1ï¸âƒ£ æ£€æŸ¥ESæ˜¯å¦æ­£å¸¸è¿è¡Œ
2ï¸âƒ£ éªŒè¯ç½‘ç»œè¿æ¥å’Œç«¯å£
3ï¸âƒ£ æŸ¥çœ‹Kibanaæ—¥å¿—æ–‡ä»¶
4ï¸âƒ£ ç¡®è®¤ç‰ˆæœ¬å…¼å®¹æ€§

ğŸ”´ é—®é¢˜ï¼šæ— æ³•åˆ›å»ºç´¢å¼•æ¨¡å¼
è§£å†³æ–¹æ¡ˆï¼š
1ï¸âƒ£ ç¡®è®¤ESä¸­å­˜åœ¨åŒ¹é…çš„ç´¢å¼•
2ï¸âƒ£ æ£€æŸ¥ç”¨æˆ·æƒé™è®¾ç½®
3ï¸âƒ£ éªŒè¯æ—¶é—´å­—æ®µæ ¼å¼
4ï¸âƒ£ åˆ·æ–°å­—æ®µåˆ—è¡¨

ğŸ”´ é—®é¢˜ï¼šå›¾è¡¨æ˜¾ç¤ºç©ºç™½
å¸¸è§åŸå› ï¼š
1ï¸âƒ£ æ—¶é—´èŒƒå›´è®¾ç½®é”™è¯¯
2ï¸âƒ£ æŸ¥è¯¢æ¡ä»¶è¿‡äºä¸¥æ ¼
3ï¸âƒ£ æ•°æ®æºæ²¡æœ‰æ•°æ®
4ï¸âƒ£ å­—æ®µæ˜ å°„ç±»å‹é”™è¯¯
```

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**ï¼š
```
ğŸ“Š ä»ªè¡¨æ¿è®¾è®¡åŸåˆ™ï¼š
âœ… ä¸€ä¸ªå±å¹•å±•ç¤ºå…³é”®æŒ‡æ ‡
âœ… ä½¿ç”¨ç»Ÿä¸€çš„é¢œè‰²ä¸»é¢˜
âœ… ä»æ¦‚è§ˆåˆ°è¯¦ç»†çš„å±‚æ¬¡ç»“æ„
âœ… æ·»åŠ æè¿°å’Œä½¿ç”¨è¯´æ˜

ğŸ”§ æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š
âœ… æ§åˆ¶ä»ªè¡¨æ¿å›¾è¡¨æ•°é‡ï¼ˆ<15ä¸ªï¼‰
âœ… ä½¿ç”¨åˆé€‚çš„æ—¶é—´é—´éš”èšåˆ
âœ… é¿å…è¿‡äºå¤æ‚çš„æŸ¥è¯¢
âœ… å®šæœŸæ¸…ç†æ— ç”¨çš„å¯è§†åŒ–

ğŸ›¡ï¸ å®‰å…¨é…ç½®è¦ç‚¹ï¼š
âœ… å¯ç”¨HTTPSåŠ å¯†ä¼ è¾“
âœ… é…ç½®ç”¨æˆ·è®¤è¯å’Œæˆæƒ
âœ… å®šæœŸæ›´æ–°Kibanaç‰ˆæœ¬
âœ… ç›‘æ§å¼‚å¸¸è®¿é—®æ—¥å¿—
```

**ğŸ“ è¿›é˜¶å­¦ä¹ å»ºè®®**ï¼š
- **ğŸ”— å®˜æ–¹æ–‡æ¡£**ï¼šå§‹ç»ˆæ˜¯æœ€æƒå¨çš„å­¦ä¹ èµ„æº
- **ğŸ® å®è·µé¡¹ç›®**ï¼šæ­å»ºå®Œæ•´çš„æ—¥å¿—åˆ†æç³»ç»Ÿ
- **ğŸ‘¥ ç¤¾åŒºäº¤æµ**ï¼šå‚ä¸Elasticå®˜æ–¹è®ºå›è®¨è®º
- **ğŸ“š æ¡ˆä¾‹å­¦ä¹ **ï¼šç ”ç©¶æˆåŠŸçš„Kibanaéƒ¨ç½²æ¡ˆä¾‹

---

> **ğŸ‰ å­¦ä¹ æé†’**ï¼šKibanaçš„å¼ºå¤§åœ¨äºå®ƒçš„ç®€å•æ˜“ç”¨ï¼Œä½†è¦çœŸæ­£æŒæ¡éœ€è¦å¤§é‡å®è·µã€‚å»ºè®®æ­å»ºä¸€ä¸ªæµ‹è¯•ç¯å¢ƒï¼Œå°è¯•å¯¼å…¥ä¸åŒç±»å‹çš„æ•°æ®ï¼Œåˆ›å»ºå„ç§å›¾è¡¨å’Œä»ªè¡¨æ¿ã€‚è®°ä½ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯åŠ¨æ‰‹å®è·µï¼