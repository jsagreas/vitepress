---
title: 1ã€è¿è¡ŒçŠ¶æ€ç›‘æ§
---
## ğŸ“š ç›®å½•

1. [ç›‘æ§åŸºç¡€æ¦‚å¿µ](#1-ç›‘æ§åŸºç¡€æ¦‚å¿µ)
2. [ç›‘æ§APIæ¥å£è¯¦è§£](#2-ç›‘æ§APIæ¥å£è¯¦è§£)
3. [èŠ‚ç‚¹ç»Ÿè®¡ä¿¡æ¯åˆ†æ](#3-èŠ‚ç‚¹ç»Ÿè®¡ä¿¡æ¯åˆ†æ)
4. [ç®¡é“ç»Ÿè®¡æ•°æ®è§£è¯»](#4-ç®¡é“ç»Ÿè®¡æ•°æ®è§£è¯»)
5. [æ’ä»¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§](#5-æ’ä»¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§)
6. [Eventsè®¡æ•°å™¨æœºåˆ¶](#6-Eventsè®¡æ•°å™¨æœºåˆ¶)
7. [é˜Ÿåˆ—çŠ¶æ€ç›‘æ§å®æˆ˜](#7-é˜Ÿåˆ—çŠ¶æ€ç›‘æ§å®æˆ˜)
8. [ç›‘æ§æœ€ä½³å®è·µ](#8-ç›‘æ§æœ€ä½³å®è·µ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç›‘æ§åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Logstashç›‘æ§


> ğŸ’¡ **é€šä¿—ç†è§£**
> æƒ³è±¡ä½ å¼€äº†ä¸€å®¶å·¥å‚ï¼ŒLogstashå°±æ˜¯è¿™ä¸ªå·¥å‚ã€‚ç›‘æ§å°±åƒæ˜¯åœ¨å·¥å‚é‡Œè£…äº†å„ç§ä»ªè¡¨ç›˜å’Œæ‘„åƒå¤´ï¼Œéšæ—¶è§‚å¯Ÿï¼š
> - æœºå™¨è¿è½¬æ˜¯å¦æ­£å¸¸ï¼ˆèŠ‚ç‚¹çŠ¶æ€ï¼‰
> - ç”Ÿäº§çº¿é€Ÿåº¦å¦‚ä½•ï¼ˆç®¡é“æ€§èƒ½ï¼‰  
> - å·¥äººæ•ˆç‡æ€æ ·ï¼ˆæ’ä»¶æ€§èƒ½ï¼‰
> - äº§å“è´¨é‡å¦‚ä½•ï¼ˆæ•°æ®å¤„ç†è´¨é‡ï¼‰

**æ ¸å¿ƒå®šä¹‰**ï¼š
```
Logstashç›‘æ§ = å®æ—¶è§‚å¯Ÿ + æ€§èƒ½åˆ†æ + é—®é¢˜é¢„è­¦
ç›®çš„ï¼šç¡®ä¿æ•°æ®å¤„ç†ç®¡é“ç¨³å®šé«˜æ•ˆè¿è¡Œ
èŒƒå›´ï¼šä»èŠ‚ç‚¹çº§åˆ«åˆ°æ’ä»¶çº§åˆ«çš„å…¨æ–¹ä½ç›‘æ§
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§


**ğŸš¨ æ²¡æœ‰ç›‘æ§çš„ç—›ç‚¹**ï¼š
- ğŸ“‰ æ€§èƒ½é—®é¢˜å‘ç°å¤ªæ™šï¼Œå½±å“ä¸šåŠ¡
- ğŸ” æ•…éšœæ’æŸ¥å›°éš¾ï¼Œæ‰¾ä¸åˆ°æ ¹æœ¬åŸå›   
- âš¡ èµ„æºæµªè´¹ï¼Œä¸çŸ¥é“ç“¶é¢ˆåœ¨å“ªé‡Œ
- ğŸ“Š å®¹é‡è§„åˆ’å›°éš¾ï¼Œæ— æ³•é¢„ä¼°å¢é•¿

**âœ… ç›‘æ§å¸¦æ¥çš„ä»·å€¼**ï¼š
- ğŸ¯ **åŠæ—¶å‘ç°é—®é¢˜**ï¼šæ€§èƒ½ä¸‹é™ã€é”™è¯¯å¢åŠ ç«‹å³çŸ¥æ™“
- ğŸ”§ **å¿«é€Ÿå®šä½æ•…éšœ**ï¼šç²¾ç¡®åˆ°å…·ä½“æ’ä»¶å’Œç®¡é“
- ğŸ“ˆ **ä¼˜åŒ–æ€§èƒ½**ï¼šåŸºäºæ•°æ®è°ƒä¼˜é…ç½®
- ğŸ“‹ **å®¹é‡è§„åˆ’**ï¼šæ ¹æ®è¶‹åŠ¿é¢„æµ‹èµ„æºéœ€æ±‚

### 1.3 ç›‘æ§ä½“ç³»æ¶æ„


```
ç›‘æ§å±‚æ¬¡ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åº”ç”¨å±‚ç›‘æ§                 â”‚  â† ä¸šåŠ¡æŒ‡æ ‡ã€æ—¥å¿—åˆ†æ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Logstashç›‘æ§              â”‚  â† æœ¬ç« é‡ç‚¹
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚èŠ‚ç‚¹ç›‘æ§  â”‚ç®¡é“ç›‘æ§  â”‚æ’ä»¶ç›‘æ§      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ç³»ç»Ÿå±‚ç›‘æ§                 â”‚  â† CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®æµå‘ï¼š
åŸå§‹æŒ‡æ ‡ â†’ ç›‘æ§API â†’ å¯è§†åŒ–å·¥å…· â†’ å‘Šè­¦ç³»ç»Ÿ
```

---

## 2. ğŸ”Œ ç›‘æ§APIæ¥å£è¯¦è§£


### 2.1 APIæ¥å£æ¦‚è§ˆ


Logstashæä¾›äº†ä¸°å¯Œçš„HTTP APIæ¥å£æ¥è·å–å„ç§ç›‘æ§ä¿¡æ¯ï¼š

| APIè·¯å¾„ | **åŠŸèƒ½æè¿°** | **ä½¿ç”¨åœºæ™¯** | **è¿”å›æ ¼å¼** |
|---------|-------------|-------------|-------------|
| `/_node` | `èŠ‚ç‚¹åŸºæœ¬ä¿¡æ¯` | `ç³»ç»Ÿæ¦‚è§ˆ` | `JSON` |
| `/_node/stats` | `èŠ‚ç‚¹è¯¦ç»†ç»Ÿè®¡` | `æ€§èƒ½åˆ†æ` | `JSON` |
| `/_node/hot_threads` | `çƒ­ç‚¹çº¿ç¨‹ä¿¡æ¯` | `æ€§èƒ½è°ƒä¼˜` | `æ–‡æœ¬` |
| `/_node/pipeline` | `ç®¡é“é…ç½®ä¿¡æ¯` | `é…ç½®æ£€æŸ¥` | `JSON` |
| `/_node/pipeline/stats` | `ç®¡é“ç»Ÿè®¡æ•°æ®` | `ç®¡é“ç›‘æ§` | `JSON` |

### 2.2 åŸºç¡€APIä½¿ç”¨


**ğŸ”¸ è·å–èŠ‚ç‚¹åŸºæœ¬ä¿¡æ¯**

```bash
# åŸºç¡€è°ƒç”¨æ–¹å¼
curl -X GET "localhost:9600/_node"

# å®é™…å“åº”ç¤ºä¾‹
{
  "host": "logstash-server-01",
  "version": "8.8.0",
  "http_address": "127.0.0.1:9600",
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "name": "logstash-production",
  "build_date": "2023-05-01T10:30:00.000Z"
}
```

> ğŸ¯ **å®ç”¨æŠ€å·§**
> è¿™ä¸ªæ¥å£ç›¸å½“äºç»™Logstash"çœ‹èº«ä»½è¯"ï¼Œå‘Šè¯‰ä½ è¿™å°æœºå™¨çš„åŸºæœ¬èº«ä»½ä¿¡æ¯

**ğŸ”¸ è·å–è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯**

```bash
# è·å–å®Œæ•´ç»Ÿè®¡æ•°æ®
curl -X GET "localhost:9600/_node/stats"

# æŒ‡å®šç‰¹å®šç»Ÿè®¡ç±»å‹
curl -X GET "localhost:9600/_node/stats/pipeline"
curl -X GET "localhost:9600/_node/stats/process"
curl -X GET "localhost:9600/_node/stats/jvm"
```

### 2.3 APIå“åº”ç»“æ„è§£æ


**ğŸ“Š æ ‡å‡†å“åº”æ ¼å¼**ï¼š
```json
{
  "host": "ä¸»æœºä¿¡æ¯",
  "version": "ç‰ˆæœ¬ä¿¡æ¯", 
  "http_address": "APIåœ°å€",
  "id": "èŠ‚ç‚¹å”¯ä¸€æ ‡è¯†",
  "pipeline": {
    "workers": "å·¥ä½œçº¿ç¨‹æ•°",
    "batch_size": "æ‰¹å¤„ç†å¤§å°",
    "batch_delay": "æ‰¹å¤„ç†å»¶è¿Ÿ"
  },
  "stats": {
    "è¯¦ç»†ç»Ÿè®¡æ•°æ®..."
  }
}
```

---

## 3. ğŸ“Š èŠ‚ç‚¹ç»Ÿè®¡ä¿¡æ¯åˆ†æ


### 3.1 èŠ‚ç‚¹çº§åˆ«æ ¸å¿ƒæŒ‡æ ‡


**ğŸ–¥ï¸ ç³»ç»Ÿèµ„æºæŒ‡æ ‡**

```
å…³é”®æŒ‡æ ‡è¯´æ˜ï¼š

CPUä½¿ç”¨ç‡ (process.cpu.percent)
â”œâ”€ å«ä¹‰ï¼šå½“å‰CPUå ç”¨ç™¾åˆ†æ¯”
â”œâ”€ æ­£å¸¸èŒƒå›´ï¼š< 80%
â”œâ”€ å‘Šè­¦é˜ˆå€¼ï¼š> 90%
â””â”€ ä¼˜åŒ–å»ºè®®ï¼šå¢åŠ workeræ•°é‡æˆ–ä¼˜åŒ–é…ç½®

å†…å­˜ä½¿ç”¨ (jvm.mem.heap_used_percent)  
â”œâ”€ å«ä¹‰ï¼šJVMå †å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯”
â”œâ”€ æ­£å¸¸èŒƒå›´ï¼š< 85%
â”œâ”€ å‘Šè­¦é˜ˆå€¼ï¼š> 95%
â””â”€ ä¼˜åŒ–å»ºè®®ï¼šè°ƒæ•´JVMå †å†…å­˜å¤§å°

æ–‡ä»¶æè¿°ç¬¦ (process.open_file_descriptors)
â”œâ”€ å«ä¹‰ï¼šå½“å‰æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„æ•°
â”œâ”€ æ­£å¸¸èŒƒå›´ï¼š< ç³»ç»Ÿé™åˆ¶çš„70%
â””â”€ æ³¨æ„äº‹é¡¹ï¼šè¾“å…¥æ–‡ä»¶è¿‡å¤šæ—¶æ˜“è¶…é™
```

**ğŸ’¡ å®é™…ç›‘æ§ç¤ºä¾‹**ï¼š
```bash
# è·å–èŠ‚ç‚¹èµ„æºç»Ÿè®¡
curl -s "localhost:9600/_node/stats" | jq '.process'

# è¾“å‡ºè§£è¯»
{
  "cpu": {
    "total_in_millis": 156890000,    # æ€»CPUæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    "percent": 15,                   # å½“å‰CPUä½¿ç”¨ç‡
    "load_average": {
      "1m": 2.5                      # 1åˆ†é’Ÿå¹³å‡è´Ÿè½½
    }
  },
  "mem": {
    "total_virtual_in_bytes": 8589934592  # è™šæ‹Ÿå†…å­˜æ€»é‡
  },
  "open_file_descriptors": 245       # æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡
}
```

### 3.2 JVMæ€§èƒ½æŒ‡æ ‡


**â˜• JVMå…³é”®æŒ‡æ ‡**

| æŒ‡æ ‡åˆ†ç±» | **å…·ä½“æŒ‡æ ‡** | **å«ä¹‰è§£é‡Š** | **å…³æ³¨é‡ç‚¹** |
|---------|-------------|-------------|-------------|
| **å †å†…å­˜** | `heap_used_percent` | `å †å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯”` | `< 85%ä¸ºå¥åº·` |
| **åƒåœ¾å›æ”¶** | `gc.collectors.young.collection_count` | `å¹´è½»ä»£GCæ¬¡æ•°` | `é¢‘ç‡ä¸å®œè¿‡é«˜` |
| **çº¿ç¨‹ç®¡ç†** | `threads.count` | `å½“å‰çº¿ç¨‹æ€»æ•°` | `ç›‘æ§çº¿ç¨‹æ³„éœ²` |
| **ç±»åŠ è½½** | `classes.loaded` | `å·²åŠ è½½ç±»æ•°é‡` | `ç¨³å®šä¸å¢é•¿` |

**ğŸ“ˆ JVMç›‘æ§å®è·µ**ï¼š
```json
{
  "jvm": {
    "mem": {
      "heap_used_percent": 45,        // å †å†…å­˜ä½¿ç”¨ç‡ï¼š45%ï¼ˆå¥åº·ï¼‰
      "heap_committed_in_bytes": 1073741824,  // å·²åˆ†é…å †å†…å­˜
      "heap_max_in_bytes": 2147483648,        // æœ€å¤§å †å†…å­˜
      "non_heap_used_in_bytes": 156890432     // éå †å†…å­˜ä½¿ç”¨
    },
    "gc": {
      "collectors": {
        "young": {
          "collection_count": 234,    // å¹´è½»ä»£GCæ¬¡æ•°
          "collection_time_in_millis": 5670  // GCæ€»è€—æ—¶
        }
      }
    }
  }
}
```

> ğŸš¨ **JVMè°ƒä¼˜æç¤º**
> - å †å†…å­˜ä½¿ç”¨ç‡æŒç»­>85%ï¼šå¢å¤§JVMå †å†…å­˜
> - GCé¢‘ç‡è¿‡é«˜ï¼šä¼˜åŒ–æ•°æ®å¤„ç†é€»è¾‘ï¼Œå‡å°‘å¯¹è±¡åˆ›å»º
> - çº¿ç¨‹æ•°æŒç»­å¢é•¿ï¼šæ£€æŸ¥æ˜¯å¦æœ‰çº¿ç¨‹æ³„éœ²

---

## 4. âš™ï¸ ç®¡é“ç»Ÿè®¡æ•°æ®è§£è¯»


### 4.1 ç®¡é“æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡


**ğŸš° ç®¡é“å°±åƒå·¥å‚çš„ç”Ÿäº§çº¿**ï¼š
```
åŸææ–™(input) â†’ åŠ å·¥è½¦é—´(filter) â†’ æˆå“ä»“åº“(output)
       â†“              â†“              â†“
   events.in    events.filtered   events.out
```

**ğŸ“‹ å…³é”®ç®¡é“æŒ‡æ ‡**ï¼š

```
æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ä½“ç³»ï¼š

ååé‡æŒ‡æ ‡ï¼š
â”œâ”€ events.inï¼šè¾“å…¥äº‹ä»¶æ€»æ•°
â”œâ”€ events.filteredï¼šè¿‡æ»¤å¤„ç†çš„äº‹ä»¶æ•°  
â”œâ”€ events.outï¼šè¾“å‡ºäº‹ä»¶æ€»æ•°
â””â”€ events.duration_in_millisï¼šå¤„ç†æ€»æ—¶é•¿

æ•ˆç‡æŒ‡æ ‡ï¼š
â”œâ”€ events_per_secondï¼šæ¯ç§’å¤„ç†äº‹ä»¶æ•°ï¼ˆEPSï¼‰
â”œâ”€ queue.eventsï¼šé˜Ÿåˆ—ä¸­ç­‰å¾…çš„äº‹ä»¶æ•°
â””â”€ queue.capacityï¼šé˜Ÿåˆ—æ€»å®¹é‡

é”™è¯¯æŒ‡æ ‡ï¼š
â”œâ”€ events.failedï¼šå¤±è´¥äº‹ä»¶æ•°
â”œâ”€ dead_letter_queue.eventsï¼šæ­»ä¿¡é˜Ÿåˆ—äº‹ä»¶æ•°
â””â”€ reloads.failuresï¼šé…ç½®é‡è½½å¤±è´¥æ¬¡æ•°
```

### 4.2 ç®¡é“ç»Ÿè®¡APIå®æˆ˜


**ğŸ” è·å–ç®¡é“ç»Ÿè®¡ä¿¡æ¯**ï¼š

```bash
# è·å–æ‰€æœ‰ç®¡é“ç»Ÿè®¡
curl -s "localhost:9600/_node/stats/pipeline" | jq '.'

# è·å–ç‰¹å®šç®¡é“ç»Ÿè®¡  
curl -s "localhost:9600/_node/stats/pipeline" | jq '.pipeline."main"'
```

**ğŸ“Š å“åº”æ•°æ®è§£æ**ï¼š
```json
{
  "pipeline": {
    "main": {
      "events": {
        "duration_in_millis": 300000,    // ç®¡é“è¿è¡Œæ—¶é•¿ï¼š5åˆ†é’Ÿ
        "in": 150000,                    // è¾“å…¥äº‹ä»¶ï¼š15ä¸‡ä¸ª
        "filtered": 148500,              // è¿‡æ»¤åäº‹ä»¶ï¼š14.85ä¸‡ä¸ª
        "out": 148500,                   // è¾“å‡ºäº‹ä»¶ï¼š14.85ä¸‡ä¸ª
        "queue_push_duration_in_millis": 1500  // é˜Ÿåˆ—æ¨é€è€—æ—¶
      },
      "plugins": {
        "inputs": [...],     // è¾“å…¥æ’ä»¶ç»Ÿè®¡
        "filters": [...],    // è¿‡æ»¤æ’ä»¶ç»Ÿè®¡  
        "outputs": [...]     // è¾“å‡ºæ’ä»¶ç»Ÿè®¡
      }
    }
  }
}
```

### 4.3 ç®¡é“æ€§èƒ½è®¡ç®—


**ğŸ“ˆ å…³é”®æ€§èƒ½æŒ‡æ ‡è®¡ç®—**ï¼š

```
æ€§èƒ½è®¡ç®—å…¬å¼ï¼š

å¤„ç†é€Ÿç‡ = events.out / (duration_in_millis / 1000)
ç¤ºä¾‹ï¼š148500 / (300000 / 1000) = 495 events/second

ä¸¢å¤±ç‡ = (events.in - events.out) / events.in Ã— 100%
ç¤ºä¾‹ï¼š(150000 - 148500) / 150000 Ã— 100% = 1%

é˜Ÿåˆ—ä½¿ç”¨ç‡ = queue.events / queue.capacity Ã— 100%
å®‰å…¨é˜ˆå€¼ï¼š< 80%ï¼Œè¶…è¿‡éœ€è¦æ‰©å®¹æˆ–ä¼˜åŒ–
```

> ğŸ“ **æ€§èƒ½è¯„ä¼°æ ‡å‡†**
> - **ä¼˜ç§€**ï¼š> 1000 EPSï¼Œä¸¢å¤±ç‡ < 0.1%
> - **è‰¯å¥½**ï¼š500-1000 EPSï¼Œä¸¢å¤±ç‡ < 1%  
> - **ä¸€èˆ¬**ï¼š100-500 EPSï¼Œä¸¢å¤±ç‡ < 5%
> - **éœ€ä¼˜åŒ–**ï¼š< 100 EPSï¼Œä¸¢å¤±ç‡ > 5%

---

## 5. ğŸ”§ æ’ä»¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§


### 5.1 æ’ä»¶æ€§èƒ½ç›‘æ§åŸç†


**ğŸ­ æ’ä»¶ç›‘æ§å°±åƒç›‘æ§å·¥å‚é‡Œæ¯å°æœºå™¨**ï¼š
```
ç”Ÿäº§çº¿ç›‘æ§è§†è§’ï¼š

è¾“å…¥è½¦é—´ (Input Plugins)
â”œâ”€ åŸæ–™æ¥æ”¶é€Ÿåº¦
â”œâ”€ æœºå™¨è¿è¡ŒçŠ¶æ€  
â””â”€ æ•…éšœæ¬¡æ•°ç»Ÿè®¡

åŠ å·¥è½¦é—´ (Filter Plugins)
â”œâ”€ åŠ å·¥å¤„ç†é€Ÿåº¦
â”œâ”€ äº§å“è´¨é‡æ£€æŸ¥
â””â”€ è®¾å¤‡æ•ˆç‡åˆ†æ

åŒ…è£…è½¦é—´ (Output Plugins)  
â”œâ”€ åŒ…è£…å‘é€é€Ÿåº¦
â”œâ”€ å‘é€æˆåŠŸç‡
â””â”€ åº“å­˜ç§¯å‹æƒ…å†µ
```

### 5.2 è¾“å…¥æ’ä»¶ç›‘æ§


**ğŸ“¥ Inputæ’ä»¶å…³é”®æŒ‡æ ‡**ï¼š

| æ’ä»¶ç±»å‹ | **æ ¸å¿ƒæŒ‡æ ‡** | **ç›‘æ§é‡ç‚¹** | **ä¼˜åŒ–æ–¹å‘** |
|---------|-------------|-------------|-------------|
| **File** | `current_connections` | `å½“å‰è¯»å–æ–‡ä»¶æ•°` | `æ–‡ä»¶å¥æŸ„é™åˆ¶` |
| **Beats** | `events.in` | `æ¥æ”¶äº‹ä»¶æ•°é‡` | `ç½‘ç»œè¿æ¥æ•°` |
| **HTTP** | `requests.total` | `HTTPè¯·æ±‚æ€»æ•°` | `å¹¶å‘å¤„ç†èƒ½åŠ›` |
| **Kafka** | `events.queue_time_in_millis` | `æ¶ˆæ¯é˜Ÿåˆ—æ—¶é—´` | `æ¶ˆè´¹è€…ç»„é…ç½®` |

**ğŸ’» Inputç›‘æ§ç¤ºä¾‹**ï¼š
```json
{
  "inputs": [
    {
      "id": "input_beats_001",
      "name": "beats",
      "events": {
        "out": 45230,                    // è¾“å‡ºäº‹ä»¶æ•°
        "queue_push_duration_in_millis": 120  // æ¨é€é˜Ÿåˆ—è€—æ—¶
      },
      "current_connections": 15,         // å½“å‰è¿æ¥æ•°
      "peak_connections": 23             // å³°å€¼è¿æ¥æ•°
    }
  ]
}
```

### 5.3 è¿‡æ»¤æ’ä»¶ç›‘æ§


**ğŸ”„ Filteræ’ä»¶æ€§èƒ½åˆ†æ**ï¼š

```
Filteræ’ä»¶æ€§èƒ½ç»´åº¦ï¼š

å¤„ç†é€Ÿåº¦ï¼š
â”œâ”€ events.duration_in_millisï¼šæ€»å¤„ç†æ—¶é—´
â”œâ”€ events.in/outï¼šè¾“å…¥è¾“å‡ºäº‹ä»¶æ•°  
â””â”€ å¹³å‡å¤„ç†æ—¶é—´ = duration / events.in

èµ„æºæ¶ˆè€—ï¼š
â”œâ”€ CPUä½¿ç”¨ç‡ï¼ˆé—´æ¥é€šè¿‡ç³»ç»Ÿç›‘æ§ï¼‰
â”œâ”€ å†…å­˜å ç”¨ï¼ˆJVMå †å†…å­˜å˜åŒ–ï¼‰
â””â”€ æ­£åˆ™è¡¨è¾¾å¼å¤æ‚åº¦å½±å“

å‡†ç¡®æ€§ï¼š
â”œâ”€ åŒ¹é…æˆåŠŸç‡
â”œâ”€ è§£æå¤±è´¥æ¬¡æ•°
â””â”€ å­—æ®µæå–å‡†ç¡®æ€§
```

**ğŸ¯ å¸¸è§Filteræ’ä»¶ç›‘æ§**ï¼š
```json
{
  "filters": [
    {
      "id": "grok_parser_001", 
      "name": "grok",
      "events": {
        "duration_in_millis": 8500,     // å¤„ç†æ€»è€—æ—¶ï¼š8.5ç§’
        "in": 10000,                    // è¾“å…¥1ä¸‡ä¸ªäº‹ä»¶
        "out": 9800                     // è¾“å‡º9800ä¸ªï¼ˆ200ä¸ªè§£æå¤±è´¥ï¼‰
      },
      "matches": 9800,                  // GrokåŒ¹é…æˆåŠŸæ•°
      "failures": 200                   // åŒ¹é…å¤±è´¥æ•°
    }
  ]
}
```

### 5.4 è¾“å‡ºæ’ä»¶ç›‘æ§


**ğŸ“¤ Outputæ’ä»¶æ ¸å¿ƒæŒ‡æ ‡**ï¼š

```
Outputæ’ä»¶ç›‘æ§æ¡†æ¶ï¼š

å‘é€æ€§èƒ½ï¼š
â”œâ”€ events.outï¼šæˆåŠŸå‘é€äº‹ä»¶æ•°
â”œâ”€ events.duration_in_millisï¼šå‘é€æ€»è€—æ—¶
â””â”€ å‘é€é€Ÿç‡ = events.out / duration * 1000

é”™è¯¯å¤„ç†ï¼š
â”œâ”€ ç½‘ç»œè¿æ¥é”™è¯¯
â”œâ”€ è®¤è¯æˆæƒé”™è¯¯  
â”œâ”€ ç›®æ ‡ç³»ç»Ÿé”™è¯¯
â””â”€ é‡è¯•æœºåˆ¶æ•ˆæœ

èµ„æºä½¿ç”¨ï¼š
â”œâ”€ è¿æ¥æ± ä½¿ç”¨æƒ…å†µ
â”œâ”€ æ‰¹é‡å‘é€æ•ˆç‡
â””â”€ ç¼“å­˜é˜Ÿåˆ—çŠ¶æ€
```

**ğŸ“Š Elasticsearchè¾“å‡ºç›‘æ§ç¤ºä¾‹**ï¼š
```json
{
  "outputs": [
    {
      "id": "elasticsearch_output_001",
      "name": "elasticsearch", 
      "events": {
        "duration_in_millis": 15000,    // å‘é€æ€»è€—æ—¶ï¼š15ç§’
        "in": 10000,                    // æ¥æ”¶1ä¸‡ä¸ªäº‹ä»¶
        "out": 9950                     // æˆåŠŸå‘é€9950ä¸ª
      },
      "documents": {
        "successes": 9950,              // ç´¢å¼•æˆåŠŸæ•°
        "failures": 50                  // ç´¢å¼•å¤±è´¥æ•°
      },
      "bulk_requests": {
        "successes": 100,               // æ‰¹é‡è¯·æ±‚æˆåŠŸæ•°
        "failures": 2                   // æ‰¹é‡è¯·æ±‚å¤±è´¥æ•°  
      }
    }
  ]
}
```

---

## 6. ğŸ“ˆ Eventsè®¡æ•°å™¨æœºåˆ¶


### 6.1 Eventsè®¡æ•°å™¨åŸç†


**ğŸ§® Eventsè®¡æ•°å™¨å°±åƒå·¥å‚çš„è®¡ä»¶å™¨**ï¼š
```
æ•°æ®æµç»è·¯å¾„ä¸Šçš„è®¡æ•°ç‚¹ï¼š

è¾“å…¥ç«¯è®¡æ•°å™¨ â†’ å¤„ç†ä¸­è®¡æ•°å™¨ â†’ è¾“å‡ºç«¯è®¡æ•°å™¨
     â†“              â†“              â†“  
 events.in   events.filtered   events.out

å®æ—¶ç›‘æ§æ•°æ®æµï¼š
åŸå§‹æ•°æ® â†’ 10000ä¸ª
æ¸…æ´—å   â†’ 9800ä¸ª  (ä¸¢å¤±200ä¸ªæ— æ•ˆæ•°æ®)
å‘é€æˆåŠŸ â†’ 9750ä¸ª  (50ä¸ªå‘é€å¤±è´¥)
```

### 6.2 è®¡æ•°å™¨ç±»å‹è¯¦è§£


**ğŸ“Š ä¸»è¦è®¡æ•°å™¨ç±»å‹**ï¼š

| è®¡æ•°å™¨åç§° | **ç»Ÿè®¡å†…å®¹** | **å¢é•¿æ–¹å¼** | **ä¸šåŠ¡æ„ä¹‰** |
|-----------|-------------|-------------|-------------|
| `events.in` | `è¿›å…¥ç®¡é“çš„äº‹ä»¶æ€»æ•°` | `ç´¯ç§¯é€’å¢` | `æ•°æ®æºå¥åº·åº¦` |
| `events.filtered` | `é€šè¿‡è¿‡æ»¤å™¨çš„äº‹ä»¶æ•°` | `ç´¯ç§¯é€’å¢` | `è¿‡æ»¤å™¨æ•ˆæœ` |
| `events.out` | `æˆåŠŸè¾“å‡ºçš„äº‹ä»¶æ•°` | `ç´¯ç§¯é€’å¢` | `æœ€ç»ˆå¤„ç†ç»“æœ` |
| `events.failed` | `å¤„ç†å¤±è´¥çš„äº‹ä»¶æ•°` | `ç´¯ç§¯é€’å¢` | `é”™è¯¯ç‡ç›‘æ§` |

**âš¡ è®¡æ•°å™¨ç›‘æ§å®æˆ˜**ï¼š
```bash
# å®æ—¶ç›‘æ§äº‹ä»¶è®¡æ•°å˜åŒ–
watch -n 1 'curl -s "localhost:9600/_node/stats/pipeline" | 
jq ".pipeline.main.events | {in, filtered, out, failed}"'

# è¾“å‡ºç¤ºä¾‹
{
  "in": 156780,        # æ€»è¾“å…¥ï¼š15.6ä¸‡ä¸ªäº‹ä»¶
  "filtered": 155320,  # è¿‡æ»¤åï¼š15.5ä¸‡ä¸ªäº‹ä»¶  
  "out": 155280,       # æˆåŠŸè¾“å‡ºï¼š15.5ä¸‡ä¸ªäº‹ä»¶
  "failed": 40         # å¤±è´¥ï¼š40ä¸ªäº‹ä»¶
}
```

### 6.3 è®¡æ•°å™¨å¼‚å¸¸åˆ†æ


**ğŸš¨ å¼‚å¸¸æ¨¡å¼è¯†åˆ«**ï¼š

```
å¸¸è§å¼‚å¸¸æ¨¡å¼åˆ†æï¼š

è¾“å…¥åœæ»ï¼ševents.in ä¸å†å¢é•¿
â”œâ”€ å¯èƒ½åŸå› ï¼šæ•°æ®æºæ–­è¿ã€æ–‡ä»¶è¯»å–å®Œæ¯•
â”œâ”€ æ’æŸ¥æ–¹æ³•ï¼šæ£€æŸ¥inputæ’ä»¶çŠ¶æ€
â””â”€ è§£å†³æ–¹æ¡ˆï¼šé‡æ–°é…ç½®æ•°æ®æº

å¤„ç†é˜»å¡ï¼ševents.in å¢é•¿ä½† events.out ä¸å˜
â”œâ”€ å¯èƒ½åŸå› ï¼šè¿‡æ»¤å™¨å¤„ç†è¿‡æ…¢ã€é˜Ÿåˆ—å †ç§¯
â”œâ”€ æ’æŸ¥æ–¹æ³•ï¼šæ£€æŸ¥queueçŠ¶æ€å’Œfilteræ€§èƒ½
â””â”€ è§£å†³æ–¹æ¡ˆï¼šä¼˜åŒ–è¿‡æ»¤è§„åˆ™æˆ–å¢åŠ worker

è¾“å‡ºå¼‚å¸¸ï¼ševents.filtered > events.out ä¸”å·®å€¼å¢å¤§
â”œâ”€ å¯èƒ½åŸå› ï¼šç›®æ ‡ç³»ç»Ÿæ•…éšœã€ç½‘ç»œé—®é¢˜
â”œâ”€ æ’æŸ¥æ–¹æ³•ï¼šæ£€æŸ¥outputæ’ä»¶é”™è¯¯æ—¥å¿—
â””â”€ è§£å†³æ–¹æ¡ˆï¼šä¿®å¤ç›®æ ‡ç³»ç»Ÿæˆ–è°ƒæ•´é‡è¯•ç­–ç•¥
```

---

## 7. ğŸ“¦ é˜Ÿåˆ—çŠ¶æ€ç›‘æ§å®æˆ˜


### 7.1 é˜Ÿåˆ—ç›‘æ§åŸºç¡€


**ğŸš› é˜Ÿåˆ—å°±åƒå·¥å‚çš„è´§ç‰©ä¸­è½¬ç«™**ï¼š
```
é˜Ÿåˆ—ä½œç”¨ç¤ºæ„ï¼š

å¿«é€Ÿè¾“å…¥ â†’ [é˜Ÿåˆ—ç¼“å†²åŒº] â†’ ç¨³å®šè¾“å‡º
           â”œâ”€ å½“å‰å®¹é‡
           â”œâ”€ æœ€å¤§å®¹é‡  
           â”œâ”€ å †ç§¯æ•°é‡
           â””â”€ å¤„ç†é€Ÿåº¦

é˜Ÿåˆ—ç±»å‹ï¼š
â”œâ”€ Memory Queueï¼šå†…å­˜é˜Ÿåˆ—ï¼ˆé»˜è®¤ï¼Œå¿«é€Ÿä½†æ˜“ä¸¢å¤±ï¼‰
â””â”€ Persistent Queueï¼šæŒä¹…åŒ–é˜Ÿåˆ—ï¼ˆæ…¢é€Ÿä½†å¯é ï¼‰
```

### 7.2 é˜Ÿåˆ—æ ¸å¿ƒæŒ‡æ ‡


**ğŸ“‹ é˜Ÿåˆ—çŠ¶æ€ç›‘æ§æŒ‡æ ‡**ï¼š

```
é˜Ÿåˆ—ç›‘æ§ç»´åº¦ï¼š

å®¹é‡ç›‘æ§ï¼š
â”œâ”€ queue.capacityï¼šé˜Ÿåˆ—æ€»å®¹é‡
â”œâ”€ queue.dataï¼šé˜Ÿåˆ—å·²ç”¨å®¹é‡  
â”œâ”€ queue.eventsï¼šé˜Ÿåˆ—ä¸­äº‹ä»¶æ•°é‡
â””â”€ ä½¿ç”¨ç‡ = queue.data / queue.capacity

æ€§èƒ½ç›‘æ§ï¼š
â”œâ”€ queue_push_duration_in_millisï¼šå…¥é˜Ÿè€—æ—¶
â”œâ”€ queue_typeï¼šé˜Ÿåˆ—ç±»å‹ï¼ˆmemory/persistedï¼‰
â””â”€ max_queue_eventsï¼šé˜Ÿåˆ—äº‹ä»¶æ•°ä¸Šé™

å¼‚å¸¸ç›‘æ§ï¼š
â”œâ”€ é˜Ÿåˆ—æ»¡å‘Šè­¦ï¼šæ¥è¿‘å®¹é‡ä¸Šé™
â”œâ”€ æŒç»­å †ç§¯ï¼šå…¥é˜Ÿé€Ÿåº¦ > å‡ºé˜Ÿé€Ÿåº¦  
â””â”€ é¢‘ç¹æ»¡è½½ï¼šé˜Ÿåˆ—åå¤è¾¾åˆ°ä¸Šé™
```

### 7.3 é˜Ÿåˆ—ç›‘æ§å®è·µ


**ğŸ“Š è·å–é˜Ÿåˆ—çŠ¶æ€**ï¼š
```bash
# ç›‘æ§é˜Ÿåˆ—çŠ¶æ€
curl -s "localhost:9600/_node/stats/pipeline" | 
jq '.pipeline.main.queue'

# å…¸å‹è¾“å‡º
{
  "type": "memory",              // é˜Ÿåˆ—ç±»å‹ï¼šå†…å­˜é˜Ÿåˆ—
  "events": 1250,               // å½“å‰é˜Ÿåˆ—ä¸­äº‹ä»¶æ•°ï¼š1250ä¸ª
  "capacity": {
    "page_capacity_in_bytes": 67108864,    // é¡µå®¹é‡ï¼š64MB
    "max_queue_events": 0,                 // äº‹ä»¶æ•°ä¸Šé™ï¼šæ— é™åˆ¶
    "max_unread_events": 0                 // æœªè¯»äº‹ä»¶ä¸Šé™
  },
  "data": {
    "path": "/tmp/logstash/queue/main",    // é˜Ÿåˆ—å­˜å‚¨è·¯å¾„
    "free_space_in_bytes": 5368709120,     // å‰©ä½™ç©ºé—´ï¼š5GB
    "storage_type": "memory"               // å­˜å‚¨ç±»å‹
  }
}
```

### 7.4 é˜Ÿåˆ—æ€§èƒ½è°ƒä¼˜


**âš™ï¸ é˜Ÿåˆ—é…ç½®ä¼˜åŒ–ç­–ç•¥**ï¼š

| åœºæ™¯æè¿° | **é—®é¢˜è¡¨ç°** | **è°ƒä¼˜ç­–ç•¥** | **é…ç½®å»ºè®®** |
|---------|-------------|-------------|-------------|
| **é«˜ååé‡** | `é˜Ÿåˆ—ç»å¸¸æ»¡è½½` | `å¢å¤§é˜Ÿåˆ—å®¹é‡` | `queue.max_events: 10000` |
| **æ•°æ®å®‰å…¨** | `æ‹…å¿ƒæ•°æ®ä¸¢å¤±` | `å¯ç”¨æŒä¹…åŒ–é˜Ÿåˆ—` | `queue.type: persisted` |
| **å†…å­˜ç´§å¼ ** | `OOMé”™è¯¯é¢‘å‘` | `å‡å°é˜Ÿåˆ—å¤§å°` | `queue.page_capacity: 32mb` |
| **å»¶è¿Ÿæ•æ„Ÿ** | `å¤„ç†å»¶è¿Ÿè¿‡é«˜` | `å‡å°æ‰¹å¤„ç†å¤§å°` | `pipeline.batch.size: 50` |

**ğŸ”§ é˜Ÿåˆ—é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# logstash.yml é…ç½®
queue:
  type: persisted                    # æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¿è¯æ•°æ®å®‰å…¨
  page_capacity: 64mb               # æ¯é¡µå®¹é‡ï¼š64MB
  max_events: 50000                 # æœ€å¤§äº‹ä»¶æ•°ï¼š5ä¸‡ä¸ª
  max_bytes: 1gb                    # æœ€å¤§å­—èŠ‚æ•°ï¼š1GB
  checkpoint.writes: 1024           # æ£€æŸ¥ç‚¹å†™å…¥é—´éš”

pipeline:
  batch:
    size: 1000                      # æ‰¹å¤„ç†å¤§å°ï¼š1000ä¸ªäº‹ä»¶
    delay: 50                       # æ‰¹å¤„ç†å»¶è¿Ÿï¼š50ms
  workers: 4                        # å·¥ä½œçº¿ç¨‹æ•°ï¼š4ä¸ª
```

---

## 8. ğŸ¯ ç›‘æ§æœ€ä½³å®è·µ


### 8.1 ç›‘æ§ç­–ç•¥åˆ¶å®š


**ğŸ“‹ åˆ†å±‚ç›‘æ§ç­–ç•¥**ï¼š

```
ç›‘æ§å±‚æ¬¡æ¡†æ¶ï¼š

ä¸šåŠ¡å±‚ç›‘æ§ï¼ˆæœ€é‡è¦ï¼‰ï¼š
â”œâ”€ æ•°æ®å¤„ç†å®æ—¶æ€§ï¼šå»¶è¿Ÿ < 30ç§’
â”œâ”€ æ•°æ®å®Œæ•´æ€§ï¼šä¸¢å¤±ç‡ < 0.1%
â”œâ”€ ç³»ç»Ÿå¯ç”¨æ€§ï¼šå¯ç”¨ç‡ > 99.9%
â””â”€ å®¹é‡åˆ©ç”¨ç‡ï¼šèµ„æºä½¿ç”¨ < 80%

åº”ç”¨å±‚ç›‘æ§ï¼ˆæ¬¡é‡è¦ï¼‰ï¼š
â”œâ”€ ç®¡é“å¤„ç†é€Ÿåº¦ï¼š> 1000 EPS
â”œâ”€ æ’ä»¶æ€§èƒ½è¡¨ç°ï¼šæ— æ˜æ˜¾ç“¶é¢ˆ
â”œâ”€ é˜Ÿåˆ—çŠ¶æ€å¥åº·ï¼šä½¿ç”¨ç‡ < 80%
â””â”€ é”™è¯¯ç‡æ§åˆ¶ï¼š< 1%

ç³»ç»Ÿå±‚ç›‘æ§ï¼ˆåŸºç¡€ï¼‰ï¼š
â”œâ”€ CPUä½¿ç”¨ç‡ï¼š< 80%
â”œâ”€ å†…å­˜ä½¿ç”¨ç‡ï¼š< 85%  
â”œâ”€ ç£ç›˜ç©ºé—´ï¼š> 20%å‰©ä½™
â””â”€ ç½‘ç»œè¿æ¥ï¼šç¨³å®šå¯é 
```

### 8.2 å‘Šè­¦è§„åˆ™è®¾ç½®


**ğŸš¨ å…³é”®å‘Šè­¦è§„åˆ™**ï¼š

| å‘Šè­¦çº§åˆ« | **ç›‘æ§æŒ‡æ ‡** | **å‘Šè­¦é˜ˆå€¼** | **å¤„ç†æ—¶é—´** |
|---------|-------------|-------------|-------------|
| **ğŸ”´ ç´§æ€¥** | `ç®¡é“åœæ­¢å¤„ç†` | `EPS = 0 æŒç»­5åˆ†é’Ÿ` | `ç«‹å³å“åº”` |
| **ğŸŸ¡ è­¦å‘Š** | `å¤„ç†å»¶è¿Ÿ** | `å»¶è¿Ÿ > 1åˆ†é’Ÿ` | `30åˆ†é’Ÿå†…å¤„ç†` |
| **ğŸŸ¢ æé†’** | `é”™è¯¯ç‡ä¸Šå‡` | `é”™è¯¯ç‡ > 1%` | `1å°æ—¶å†…å…³æ³¨` |

**ğŸ“§ å‘Šè­¦å®ç°ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
# Logstashç›‘æ§è„šæœ¬

LOGSTASH_API="http://localhost:9600"
ALERT_EMAIL="admin@company.com"

# è·å–å½“å‰EPS
current_eps=$(curl -s "$LOGSTASH_API/_node/stats/pipeline" | 
  jq '.pipeline.main.events.out' | 
  awk '{print int($1/300)}')  # å‡è®¾æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡

# EPSå‘Šè­¦
if [ "$current_eps" -lt 100 ]; then
  echo "WARNING: Logstash EPS dropped to $current_eps" | 
  mail -s "Logstash Performance Alert" $ALERT_EMAIL
fi

# é˜Ÿåˆ—ä½¿ç”¨ç‡å‘Šè­¦
queue_usage=$(curl -s "$LOGSTASH_API/_node/stats/pipeline" | 
  jq '.pipeline.main.queue.events')

if [ "$queue_usage" -gt 8000 ]; then
  echo "WARNING: Queue usage high: $queue_usage events" |
  mail -s "Logstash Queue Alert" $ALERT_EMAIL
fi
```

### 8.3 æ€§èƒ½åŸºçº¿å»ºç«‹


**ğŸ“Š å»ºç«‹æ€§èƒ½åŸºçº¿æ­¥éª¤**ï¼š

```
åŸºçº¿å»ºç«‹æµç¨‹ï¼š

ç¬¬ä¸€å‘¨ï¼šæ•°æ®æ”¶é›†
â”œâ”€ æ¯å°æ—¶è®°å½•å…³é”®æŒ‡æ ‡
â”œâ”€ è®°å½•ä¸šåŠ¡é«˜å³°å’Œä½è°·æ—¶é—´
â”œâ”€ æ”¶é›†å¼‚å¸¸äº‹ä»¶å’Œå¤„ç†æ–¹å¼
â””â”€ å»ºç«‹åˆå§‹æ•°æ®é›†

ç¬¬äºŒå‘¨ï¼šæ¨¡å¼åˆ†æ  
â”œâ”€ è¯†åˆ«æ—¥å¸¸å¤„ç†æ¨¡å¼
â”œâ”€ æ‰¾å‡ºæ€§èƒ½æ³¢åŠ¨è§„å¾‹
â”œâ”€ ç¡®å®šæ­£å¸¸è¿è¡ŒèŒƒå›´
â””â”€ è®¾å®šé¢„è­¦é˜ˆå€¼

ç¬¬ä¸‰å‘¨ï¼šåŸºçº¿éªŒè¯
â”œâ”€ éªŒè¯é˜ˆå€¼è®¾ç½®æ˜¯å¦åˆç†
â”œâ”€ è°ƒæ•´å‘Šè­¦çµæ•åº¦
â”œâ”€ ä¼˜åŒ–ç›‘æ§é¢‘ç‡
â””â”€ ç¡®è®¤ç›‘æ§è¦†ç›–åº¦

æŒç»­ä¼˜åŒ–ï¼š
â”œâ”€ æœˆåº¦åŸºçº¿å›é¡¾
â”œâ”€ å­£åº¦å®¹é‡è§„åˆ’  
â”œâ”€ å¹´åº¦æ¶æ„è¯„ä¼°
â””â”€ æŒç»­æ”¹è¿›ç›‘æ§ç­–ç•¥
```

### 8.4 ç›‘æ§å·¥å…·é›†æˆ


**ğŸ”§ ç›‘æ§å·¥å…·é€‰æ‹©**ï¼š

```
ç›‘æ§å·¥å…·ç”Ÿæ€ï¼š

å¯è§†åŒ–å±‚ï¼š
â”œâ”€ Kibanaï¼šELKæŠ€æœ¯æ ˆåŸç”Ÿæ”¯æŒ
â”œâ”€ Grafanaï¼šæ›´ä¸°å¯Œçš„å›¾è¡¨ç±»å‹
â””â”€ è‡ªç ”Dashboardï¼šå®šåˆ¶åŒ–éœ€æ±‚

æ•°æ®å­˜å‚¨ï¼š
â”œâ”€ Elasticsearchï¼šæ—¥å¿—å’ŒæŒ‡æ ‡å­˜å‚¨
â”œâ”€ InfluxDBï¼šæ—¶é—´åºåˆ—æ•°æ®åº“
â””â”€ Prometheusï¼šäº‘åŸç”Ÿç›‘æ§

å‘Šè­¦ç³»ç»Ÿï¼š
â”œâ”€ ElastAlertï¼šåŸºäºElasticsearchè§„åˆ™
â”œâ”€ Alertmanagerï¼šPrometheusç”Ÿæ€
â””â”€ è‡ªç ”å‘Šè­¦ï¼šä¼ä¸šå†…éƒ¨ç³»ç»Ÿé›†æˆ
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„ç›‘æ§æŠ€èƒ½


```
ğŸ”¸ ç›‘æ§APIä½¿ç”¨ï¼šç†Ÿç»ƒè°ƒç”¨å„ç§ç›‘æ§æ¥å£è·å–æ•°æ®
ğŸ”¸ æŒ‡æ ‡æ•°æ®è§£è¯»ï¼šå‡†ç¡®ç†è§£å„é¡¹æ€§èƒ½æŒ‡æ ‡å«ä¹‰
ğŸ”¸ å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼šå¿«é€Ÿå‘ç°å’Œå®šä½æ€§èƒ½é—®é¢˜
ğŸ”¸ å‘Šè­¦è§„åˆ™è®¾ç½®ï¼šå»ºç«‹æœ‰æ•ˆçš„ç›‘æ§å‘Šè­¦ä½“ç³»
ğŸ”¸ æ€§èƒ½è°ƒä¼˜ç­–ç•¥ï¼šåŸºäºç›‘æ§æ•°æ®ä¼˜åŒ–ç³»ç»Ÿé…ç½®
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç›‘æ§çš„æœ¬è´¨ç›®çš„**
```
ç›‘æ§ä¸æ˜¯ç›®çš„ï¼Œè€Œæ˜¯æ‰‹æ®µï¼š
- å‘ç°é—®é¢˜ï¼šåŠæ—¶æ„ŸçŸ¥ç³»ç»Ÿå¼‚å¸¸
- å®šä½åŸå› ï¼šç²¾ç¡®æ‰¾åˆ°é—®é¢˜æ ¹æº  
- ä¼˜åŒ–æ€§èƒ½ï¼šåŸºäºæ•°æ®åšå‡ºæ”¹è¿›
- é¢„é˜²æ•…éšœï¼šæå‰è¯†åˆ«æ½œåœ¨é£é™©
```

**ğŸ”¹ ç›‘æ§æ•°æ®çš„ä»·å€¼**
```
æ•°æ®é©±åŠ¨å†³ç­–ï¼š
- å®¹é‡è§„åˆ’ï¼šåŸºäºå†å²è¶‹åŠ¿é¢„æµ‹å¢é•¿
- æ¶æ„ä¼˜åŒ–ï¼šè¯†åˆ«ç³»ç»Ÿç“¶é¢ˆå’Œæ”¹è¿›ç‚¹
- æˆæœ¬æ§åˆ¶ï¼šé¿å…èµ„æºæµªè´¹å’Œè¿‡åº¦é…ç½®
- SLAä¿éšœï¼šç¡®ä¿æœåŠ¡è´¨é‡æ‰¿è¯ºè¾¾æˆ
```

**ğŸ”¹ ç›‘æ§ç­–ç•¥çš„å¹³è¡¡**
```
ç›‘æ§ç²’åº¦æƒè¡¡ï¼š
- è¿‡ç»†ï¼šäº§ç”Ÿè¿‡å¤šå‘Šè­¦ï¼Œé€ æˆå‘Šè­¦ç–²åŠ³
- è¿‡ç²—ï¼šé—æ¼é‡è¦é—®é¢˜ï¼Œå»¶è¯¯å¤„ç†æ—¶æœº
- åˆé€‚ï¼šé‡ç‚¹ç›‘æ§å…³é”®æŒ‡æ ‡ï¼Œåˆ†çº§å‘Šè­¦
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†æ—¥å¿—å¤„ç†**ï¼šç›‘æ§è®¢å•å¤„ç†ç®¡é“ï¼Œç¡®ä¿äº¤æ˜“æ•°æ®å®Œæ•´æ€§
- **å®‰å…¨äº‹ä»¶åˆ†æ**ï¼šå®æ—¶ç›‘æ§å®‰å…¨æ—¥å¿—å¤„ç†é€Ÿåº¦ï¼ŒåŠæ—¶å‘ç°å¨èƒ
- **IoTæ•°æ®æ”¶é›†**ï¼šç›‘æ§ä¼ æ„Ÿå™¨æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œä¿è¯æ•°æ®å®æ—¶æ€§
- **ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡**ï¼šç›‘æ§æŠ¥è¡¨ç”Ÿæˆç®¡é“ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®åŠæ—¶

**ğŸ”§ è¿ç»´å®è·µåº”ç”¨**
- **æ•…éšœå¿«é€Ÿå®šä½**ï¼šé€šè¿‡ç›‘æ§APIå¿«é€Ÿæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆ
- **å®¹é‡æå‰è§„åˆ’**ï¼šåŸºäºç›‘æ§è¶‹åŠ¿é¢„æµ‹èµ„æºéœ€æ±‚
- **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šç»“åˆç›‘æ§æ•°æ®å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹
- **è´¨é‡æŒç»­æ”¹è¿›**ï¼šåŸºäºç›‘æ§åé¦ˆä¼˜åŒ–æ•°æ®å¤„ç†æµç¨‹

### 9.4 å­¦ä¹ å»ºè®®


**ğŸ“š æ·±å…¥å­¦ä¹ è·¯å¾„**
- **åŸºç¡€æŒæ¡**ï¼šç†Ÿç»ƒä½¿ç”¨ç›‘æ§APIï¼Œç†è§£å„é¡¹æŒ‡æ ‡å«ä¹‰
- **å®æˆ˜ç»ƒä¹ **ï¼šåœ¨æµ‹è¯•ç¯å¢ƒæ­å»ºå®Œæ•´ç›‘æ§ä½“ç³»
- **å·¥å…·é›†æˆ**ï¼šå­¦ä¹ Grafanaã€Prometheusç­‰ç›‘æ§å·¥å…·
- **è‡ªåŠ¨åŒ–ç›‘æ§**ï¼šç¼–å†™è„šæœ¬å®ç°è‡ªåŠ¨åŒ–ç›‘æ§å’Œå‘Šè­¦

**ğŸ¯ æ ¸å¿ƒè®°å¿†è¦ç‚¹**
```
ç›‘æ§ä¸‰è¦ç´ ï¼šæ”¶é›†æ•°æ®ã€åˆ†æè¶‹åŠ¿ã€åŠæ—¶å‘Šè­¦
å…³é”®å››æŒ‡æ ‡ï¼šååé‡ã€å»¶è¿Ÿã€é”™è¯¯ç‡ã€èµ„æºä½¿ç”¨ç‡
å®æˆ˜äº”æ­¥éª¤ï¼šAPIè°ƒç”¨ã€æ•°æ®è§£è¯»ã€é—®é¢˜è¯†åˆ«ã€å‘Šè­¦è®¾ç½®ã€æŒç»­ä¼˜åŒ–
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> ğŸ“Š **ç›‘æ§å¦‚ä½“æ£€ï¼Œæ•°æ®æ˜¯é•œå­**  
> **APIæ¥å£æŸ¥çŠ¶æ€ï¼ŒæŒ‡æ ‡æ•°æ®çœ‹è¶‹åŠ¿**  
> **é˜Ÿåˆ—ç®¡é“è¦å…³æ³¨ï¼Œå¼‚å¸¸å‘Šè­¦åŠæ—¶æŠ¥**  
> **æ€§èƒ½ä¼˜åŒ–é æ•°æ®ï¼Œè¿ç»´æ— å¿§å¿ƒä¸æ…Œ**