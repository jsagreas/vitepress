---
title: 2、对象的遍历和操作
---
## 📚 目录

1. [对象遍历的核心方法](#1-对象遍历的核心方法)
2. [Object静态方法详解](#2-Object静态方法详解)
3. [属性检查与判断](#3-属性检查与判断)
4. [对象操作实战技巧](#4-对象操作实战技巧)
5. [核心要点总结](#5-核心要点总结)

---

## 1. 🔄 对象遍历的核心方法


### 1.1 for...in循环遍历


**🔸 基本概念**
```javascript
// for...in 是遍历对象最常用的方法
const user = {
  name: '张三',
  age: 25,
  city: '北京'
};

for (let key in user) {
  console.log(key, user[key]);
}
// 输出：
// name 张三
// age 25  
// city 北京
```

**💡 使用场景**
```javascript
// 场景1：输出所有属性
const product = {
  id: 1001,
  title: 'iPhone15',
  price: 5999,
  stock: 100
};

for (let prop in product) {
  console.log(`${prop}: ${product[prop]}`);
}

// 场景2：统计对象属性数量
let count = 0;
for (let key in product) {
  count++;
}
console.log('属性数量:', count); // 4
```

### 1.2 遍历注意事项


**⚠️ 原型链属性问题**
```javascript
// 对象可能继承父级属性
const parent = { type: 'person' };
const child = Object.create(parent);
child.name = '小明';
child.age = 18;

console.log('=== 直接遍历 ===');
for (let key in child) {
  console.log(key); // name, age, type (包含继承的)
}

console.log('=== 只遍历自身属性 ===');
for (let key in child) {
  if (child.hasOwnProperty(key)) {
    console.log(key); // name, age (只有自身的)
  }
}
```

---

## 2. 📋 Object静态方法详解


### 2.1 Object.keys() - 获取所有键名


**🔸 基本用法**
```javascript
const student = {
  name: '李四',
  grade: 95,
  subject: '数学',
  passed: true
};

const keys = Object.keys(student);
console.log(keys); // ['name', 'grade', 'subject', 'passed']
```

**💼 实际应用**
```javascript
// 应用1：检查对象是否为空
function isEmpty(obj) {
  return Object.keys(obj).length === 0;
}

console.log(isEmpty({})); // true
console.log(isEmpty({name: '张三'})); // false

// 应用2：循环处理对象属性
const scores = { 语文: 85, 数学: 92, 英语: 78 };
Object.keys(scores).forEach(subject => {
  console.log(`${subject}: ${scores[subject]}分`);
});
```

### 2.2 Object.values() - 获取所有属性值


**🔸 基本用法**
```javascript
const prices = {
  apple: 5.5,
  banana: 3.2,
  orange: 6.8
};

const values = Object.values(prices);
console.log(values); // [5.5, 3.2, 6.8]
```

**💼 实际应用**
```javascript
// 应用1：计算总价
const cart = {
  商品A: 29.9,
  商品B: 45.0,
  商品C: 12.5
};

const total = Object.values(cart).reduce((sum, price) => sum + price, 0);
console.log('总价:', total); // 87.4

// 应用2：找最大最小值
const testScores = { 张三: 85, 李四: 92, 王五: 78, 赵六: 96 };
const scores = Object.values(testScores);
console.log('最高分:', Math.max(...scores)); // 96
console.log('最低分:', Math.min(...scores)); // 78
```

### 2.3 Object.entries() - 获取键值对数组


**🔸 基本用法**
```javascript
const user = {
  id: 1001,
  username: 'john_doe',
  email: 'john@example.com'
};

const entries = Object.entries(user);
console.log(entries);
// [['id', 1001], ['username', 'john_doe'], ['email', 'john@example.com']]
```

**💼 实际应用**
```javascript
// 应用1：对象转Map
const config = { theme: 'dark', lang: 'zh', version: '1.0' };
const configMap = new Map(Object.entries(config));
console.log(configMap.get('theme')); // 'dark'

// 应用2：过滤对象属性
const products = {
  laptop: 5999,
  mouse: 99,
  keyboard: 299,
  monitor: 1299
};

// 筛选价格大于500的商品
const expensiveItems = Object.entries(products)
  .filter(([name, price]) => price > 500)
  .reduce((obj, [name, price]) => {
    obj[name] = price;
    return obj;
  }, {});

console.log(expensiveItems); // {laptop: 5999, monitor: 1299}
```

---

## 3. 🔍 属性检查与判断


### 3.1 hasOwnProperty() - 检查自身属性


**🔸 基本概念**
```javascript
const person = {
  name: '张三',
  age: 30
};

console.log(person.hasOwnProperty('name')); // true
console.log(person.hasOwnProperty('age'));  // true
console.log(person.hasOwnProperty('toString')); // false (继承的方法)
```

**💡 为什么需要这个方法**
```javascript
// 问题：for...in会遍历继承的属性
function Animal(type) {
  this.type = type;
}
Animal.prototype.speak = function() {
  console.log('动物叫声');
};

const dog = new Animal('狗');
dog.name = '旺财';

console.log('=== 不使用hasOwnProperty ===');
for (let key in dog) {
  console.log(key); // type, name, speak (包含原型方法)
}

console.log('=== 使用hasOwnProperty ===');
for (let key in dog) {
  if (dog.hasOwnProperty(key)) {
    console.log(key); // type, name (只有自身属性)
  }
}
```

### 3.2 属性存在性检查的几种方法


**🔧 不同检查方式对比**
```javascript
const obj = {
  name: '测试',
  value: 0,
  flag: false,
  empty: null
};

console.log('=== 不同检查方式 ===');
// 1. in 操作符 (检查所有可访问属性)
console.log('name' in obj);    // true
console.log('toString' in obj); // true (继承的)

// 2. hasOwnProperty (只检查自身属性)  
console.log(obj.hasOwnProperty('name'));    // true
console.log(obj.hasOwnProperty('toString')); // false

// 3. 直接访问判断 (要注意假值)
console.log(obj.name !== undefined);  // true
console.log(obj.value !== undefined); // true (0不是undefined)
console.log(obj.empty !== undefined); // true (null不是undefined)
```

---

## 4. 🛠️ 对象操作实战技巧


### 4.1 对象属性统计和分析


**📊 统计对象信息**
```javascript
function analyzeObject(obj) {
  const keys = Object.keys(obj);
  const values = Object.values(obj);
  
  return {
    属性数量: keys.length,
    属性名列表: keys,
    数值属性数量: values.filter(v => typeof v === 'number').length,
    字符串属性数量: values.filter(v => typeof v === 'string').length,
    空值数量: values.filter(v => v === null || v === undefined).length
  };
}

const userData = {
  name: '张三',
  age: 25,
  salary: 8000,
  department: '技术部',
  bonus: null,
  level: 3
};

console.log(analyzeObject(userData));
// {
//   属性数量: 6,
//   属性名列表: ['name', 'age', 'salary', 'department', 'bonus', 'level'],
//   数值属性数量: 3,
//   字符串属性数量: 2,
//   空值数量: 1
// }
```

### 4.2 对象属性的批量操作


**🔄 批量处理对象属性**
```javascript
// 工具函数：对象属性值转换
function transformObjectValues(obj, transformer) {
  const result = {};
  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      result[key] = transformer(obj[key], key);
    }
  }
  return result;
}

// 示例：价格添加税费
const prices = {
  商品A: 100,
  商品B: 200,
  商品C: 150
};

const pricesWithTax = transformObjectValues(prices, (price) => price * 1.13);
console.log(pricesWithTax);
// { 商品A: 113, 商品B: 226, 商品C: 169.5 }

// 示例：字符串全部转大写
const userInfo = {
  firstName: 'john',
  lastName: 'doe',
  city: 'beijing'
};

const upperCaseInfo = transformObjectValues(userInfo, (value) => 
  typeof value === 'string' ? value.toUpperCase() : value
);
console.log(upperCaseInfo);
// { firstName: 'JOHN', lastName: 'DOE', city: 'BEIJING' }
```

### 4.3 对象属性的条件筛选


**🎯 根据条件筛选属性**
```javascript
// 工具函数：筛选对象属性
function filterObject(obj, predicate) {
  const result = {};
  Object.entries(obj).forEach(([key, value]) => {
    if (predicate(value, key)) {
      result[key] = value;
    }
  });
  return result;
}

// 示例：筛选学生成绩
const grades = {
  张三: 85,
  李四: 92,
  王五: 76,
  赵六: 95,
  钱七: 68
};

// 筛选及格学生 (≥80分)
const passedStudents = filterObject(grades, (score) => score >= 80);
console.log('及格学生:', passedStudents);
// { 张三: 85, 李四: 92, 赵六: 95 }

// 筛选优秀学生 (≥90分)
const excellentStudents = filterObject(grades, (score) => score >= 90);
console.log('优秀学生:', excellentStudents);
// { 李四: 92, 赵六: 95 }
```

---

## 5. 📋 核心要点总结


### 5.1 必须掌握的核心方法


```
🔸 for...in循环：遍历对象的基本方法
🔸 Object.keys()：获取属性名数组，最常用
🔸 Object.values()：获取属性值数组，统计计算必备
🔸 Object.entries()：获取键值对，复杂操作首选
🔸 hasOwnProperty()：区分自身属性和继承属性
```

### 5.2 核心使用模式


**🔹 遍历对象的最佳实践**
```javascript
// 模式1：安全遍历自身属性
for (let key in obj) {
  if (obj.hasOwnProperty(key)) {
    // 处理属性
  }
}

// 模式2：现代化遍历 (推荐)
Object.keys(obj).forEach(key => {
  // 处理属性，自动过滤继承属性
});

// 模式3：需要键值对时
Object.entries(obj).forEach(([key, value]) => {
  // 同时处理键和值
});
```

**🔹 常见应用场景**
```javascript
// 1. 检查对象是否为空
const isEmpty = obj => Object.keys(obj).length === 0;

// 2. 统计属性数量
const getPropertyCount = obj => Object.keys(obj).length;

// 3. 获取所有数值属性的和
const sumNumbers = obj => Object.values(obj)
  .filter(v => typeof v === 'number')
  .reduce((sum, num) => sum + num, 0);

// 4. 检查属性是否存在
const hasProperty = (obj, prop) => obj.hasOwnProperty(prop);
```

### 5.3 实际开发价值


- **数据处理**：API返回的对象数据遍历和转换
- **表单验证**：遍历表单字段进行批量验证
- **配置管理**：遍历配置对象设置参数
- **状态管理**：遍历状态对象进行更新
- **数据统计**：计算对象中的各种统计信息

**核心记忆**：
- Object.keys()最常用，获取属性名
- Object.values()做计算，获取属性值  
- Object.entries()做转换，获取键值对
- hasOwnProperty()保安全，区分自身属性
- for...in要小心，可能包含继承属性