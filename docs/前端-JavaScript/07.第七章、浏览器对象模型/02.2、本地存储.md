---
title: 2ã€æœ¬åœ°å­˜å‚¨
---
## ğŸ“š ç›®å½•

1. [æœ¬åœ°å­˜å‚¨æ¦‚å¿µ](#1-æœ¬åœ°å­˜å‚¨æ¦‚å¿µ)
2. [localStorageæŒä¹…å­˜å‚¨](#2-localStorageæŒä¹…å­˜å‚¨)
3. [sessionStorageä¼šè¯å­˜å‚¨](#3-sessionStorageä¼šè¯å­˜å‚¨)
4. [CookieåŸºç¡€ä½¿ç”¨](#4-CookieåŸºç¡€ä½¿ç”¨)
5. [ä¸‰ç§å­˜å‚¨æ–¹å¼å¯¹æ¯”](#5-ä¸‰ç§å­˜å‚¨æ–¹å¼å¯¹æ¯”)
6. [å®é™…åº”ç”¨åœºæ™¯](#6-å®é™…åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ’¾ æœ¬åœ°å­˜å‚¨æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æœ¬åœ°å­˜å‚¨


**ğŸ”¸ æ ¸å¿ƒç†è§£**
```
æœ¬åœ°å­˜å‚¨ = åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ä¿å­˜æ•°æ®
ä½œç”¨ï¼šè®©ç½‘é¡µèƒ½å¤Ÿ"è®°ä½"ç”¨æˆ·çš„ä¿¡æ¯å’Œåå¥½
é€šä¿—æ¯”å–»ï¼šå°±åƒç»™æµè§ˆå™¨è£…äº†ä¸ªå°ä»“åº“ï¼Œå¯ä»¥å­˜æ”¾å„ç§æ•°æ®
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦æœ¬åœ°å­˜å‚¨**
```
è§£å†³çš„é—®é¢˜ï¼š
âŒ åˆ·æ–°é¡µé¢åæ•°æ®ä¸¢å¤±
âŒ ç”¨æˆ·è®¾ç½®æ— æ³•ä¿æŒ
âŒ è´­ç‰©è½¦å†…å®¹æ¶ˆå¤±
âŒ ç™»å½•çŠ¶æ€éœ€è¦é‡æ–°è¾“å…¥

æœ¬åœ°å­˜å‚¨çš„å¥½å¤„ï¼š
âœ… ä¿å­˜ç”¨æˆ·åå¥½ï¼ˆä¸»é¢˜ã€è¯­è¨€ï¼‰
âœ… è®°ä½ç™»å½•çŠ¶æ€
âœ… ç¼“å­˜æ•°æ®æé«˜æ€§èƒ½
âœ… ç¦»çº¿åŠŸèƒ½æ”¯æŒ
```

### 1.2 ä¸‰ç§å­˜å‚¨æ–¹å¼ç®€ä»‹


```
å­˜å‚¨ç±»å‹å¯¹æ¯”ï¼š
                localStorage    sessionStorage    Cookie
å­˜å‚¨æ—¶é—´         æ°¸ä¹…ä¿å­˜        å…³é—­æ ‡ç­¾é¡µæ¸…é™¤      å¯è®¾ç½®è¿‡æœŸæ—¶é—´
å­˜å‚¨å¤§å°         ~5-10MB        ~5-10MB          ~4KB
æ•°æ®å…±äº«         åŒåŸŸåæ‰€æœ‰é¡µé¢   ä»…å½“å‰æ ‡ç­¾é¡µ      åŒåŸŸåæ‰€æœ‰é¡µé¢
æœåŠ¡å™¨è®¿é—®       ä¸èƒ½            ä¸èƒ½             è‡ªåŠ¨å‘é€
```

---

## 2. ğŸª localStorageæŒä¹…å­˜å‚¨


### 2.1 localStorageåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒç‰¹ç‚¹**
```
localStorage = æœ¬åœ°æŒä¹…å­˜å‚¨
ç‰¹ç‚¹ï¼š
â€¢ æ•°æ®æ°¸ä¹…ä¿å­˜ï¼ˆé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼‰
â€¢ å®¹é‡å¤§ï¼ˆé€šå¸¸5-10MBï¼‰
â€¢ åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²
â€¢ åŒåŸŸåä¸‹æ‰€æœ‰é¡µé¢å…±äº«
```

### 2.2 åŸºæœ¬æ“ä½œæ–¹æ³•


**ğŸ“ å¢åˆ æ”¹æŸ¥æ“ä½œ**
```javascript
// å­˜å‚¨æ•°æ®
localStorage.setItem('username', 'å¼ ä¸‰');
localStorage.setItem('age', '25');

// è·å–æ•°æ®
let username = localStorage.getItem('username');
let age = localStorage.getItem('age');
console.log(username); // "å¼ ä¸‰"
console.log(age);      // "25"

// åˆ é™¤å•ä¸ªæ•°æ®
localStorage.removeItem('age');

// æ¸…ç©ºæ‰€æœ‰æ•°æ®
localStorage.clear();

// è·å–å­˜å‚¨çš„é”®åæ•°é‡
console.log('å­˜å‚¨é¡¹æ•°é‡ï¼š', localStorage.length);
```

### 2.3 å­˜å‚¨å¤æ‚æ•°æ®


**ğŸ—‚ï¸ å¯¹è±¡å’Œæ•°ç»„å­˜å‚¨**
```javascript
// å­˜å‚¨å¯¹è±¡ï¼ˆéœ€è¦è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼‰
let user = {
    name: 'æå››',
    age: 30,
    hobby: ['è¯»ä¹¦', 'æ¸¸æ³³']
};

// å­˜å‚¨
localStorage.setItem('user', JSON.stringify(user));

// è¯»å–
let savedUser = localStorage.getItem('user');
if (savedUser) {
    let userData = JSON.parse(savedUser);
    console.log(userData.name); // "æå››"
    console.log(userData.hobby); // ['è¯»ä¹¦', 'æ¸¸æ³³']
}
```

**ğŸ’¡ å®ç”¨å°è£…å‡½æ•°**
```javascript
// å°è£…localStorageæ“ä½œ
const storage = {
    // è®¾ç½®æ•°æ®
    set(key, value) {
        try {
            localStorage.setItem(key, JSON.stringify(value));
            return true;
        } catch (e) {
            console.error('å­˜å‚¨å¤±è´¥ï¼š', e);
            return false;
        }
    },
    
    // è·å–æ•°æ®
    get(key) {
        try {
            const value = localStorage.getItem(key);
            return value ? JSON.parse(value) : null;
        } catch (e) {
            console.error('è¯»å–å¤±è´¥ï¼š', e);
            return null;
        }
    },
    
    // åˆ é™¤æ•°æ®
    remove(key) {
        localStorage.removeItem(key);
    },
    
    // æ¸…ç©ºæ•°æ®
    clear() {
        localStorage.clear();
    }
};

// ä½¿ç”¨ç¤ºä¾‹
storage.set('settings', {theme: 'dark', lang: 'zh'});
let settings = storage.get('settings');
console.log(settings.theme); // "dark"
```

### 2.4 å®é™…åº”ç”¨ç¤ºä¾‹


**ğŸ¨ ç”¨æˆ·åå¥½è®¾ç½®**
```javascript
// ä¿å­˜å’Œæ¢å¤ä¸»é¢˜è®¾ç½®
function saveTheme(theme) {
    localStorage.setItem('theme', theme);
    applyTheme(theme);
}

function loadTheme() {
    let theme = localStorage.getItem('theme') || 'light';
    applyTheme(theme);
}

function applyTheme(theme) {
    document.body.className = theme + '-theme';
}

// é¡µé¢åŠ è½½æ—¶æ¢å¤ä¸»é¢˜
window.addEventListener('load', loadTheme);

// ç”¨æˆ·åˆ‡æ¢ä¸»é¢˜
document.getElementById('themeBtn').addEventListener('click', function() {
    let currentTheme = localStorage.getItem('theme') || 'light';
    let newTheme = currentTheme === 'light' ? 'dark' : 'light';
    saveTheme(newTheme);
});
```

---

## 3. ğŸ“‹ sessionStorageä¼šè¯å­˜å‚¨


### 3.1 sessionStorageç‰¹ç‚¹


**ğŸ”¸ æ ¸å¿ƒç†è§£**
```
sessionStorage = ä¼šè¯çº§å­˜å‚¨
ç‰¹ç‚¹ï¼š
â€¢ ä»…åœ¨å½“å‰æ ‡ç­¾é¡µæœ‰æ•ˆ
â€¢ å…³é—­æ ‡ç­¾é¡µæ•°æ®è‡ªåŠ¨æ¸…é™¤
â€¢ å®¹é‡å’ŒlocalStorageç›¸åŒ
â€¢ ä¸èƒ½è·¨é¡µé¢å…±äº«
```

**ğŸ†š ä¸localStorageçš„åŒºåˆ«**
```
ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”ï¼š
localStorageï¼š  [é¡µé¢A] â†â†’ [é¡µé¢B] â†â†’ [é¡µé¢C] ï¼ˆæ•°æ®å…±äº«ï¼‰
sessionStorageï¼š[é¡µé¢A] â†’ [é¡µé¢B] â†’ [å…³é—­] ï¼ˆæ•°æ®æ¶ˆå¤±ï¼‰

ä½¿ç”¨åœºæ™¯ï¼š
localStorageï¼šç”¨æˆ·è®¾ç½®ã€é•¿æœŸç¼“å­˜
sessionStorageï¼šä¸´æ—¶æ•°æ®ã€å•æ¬¡ä¼šè¯
```

### 3.2 åŸºæœ¬æ“ä½œæ–¹æ³•


**ğŸ“ æ“ä½œè¯­æ³•**
```javascript
// å­˜å‚¨æ•°æ®ï¼ˆè¯­æ³•ä¸localStorageå®Œå…¨ç›¸åŒï¼‰
sessionStorage.setItem('currentPage', 'home');
sessionStorage.setItem('formData', JSON.stringify({
    name: 'ç‹äº”',
    email: 'wangwu@email.com'
}));

// è·å–æ•°æ®
let currentPage = sessionStorage.getItem('currentPage');
let formData = JSON.parse(sessionStorage.getItem('formData') || '{}');

// åˆ é™¤æ•°æ®
sessionStorage.removeItem('currentPage');

// æ¸…ç©ºæ‰€æœ‰æ•°æ®
sessionStorage.clear();
```

### 3.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ“‹ è¡¨å•æ•°æ®ä¸´æ—¶ä¿å­˜**
```javascript
// è‡ªåŠ¨ä¿å­˜è¡¨å•æ•°æ®ï¼ˆé˜²æ­¢æ„å¤–ä¸¢å¤±ï¼‰
function autoSaveForm() {
    const form = document.getElementById('userForm');
    const formData = new FormData(form);
    const data = {};
    
    // æ”¶é›†è¡¨å•æ•°æ®
    for (let [key, value] of formData.entries()) {
        data[key] = value;
    }
    
    // ä¿å­˜åˆ°sessionStorage
    sessionStorage.setItem('formBackup', JSON.stringify(data));
}

// æ¢å¤è¡¨å•æ•°æ®
function restoreForm() {
    const backup = sessionStorage.getItem('formBackup');
    if (backup) {
        const data = JSON.parse(backup);
        
        // æ¢å¤åˆ°è¡¨å•
        for (let key in data) {
            const input = document.querySelector(`[name="${key}"]`);
            if (input) {
                input.value = data[key];
            }
        }
    }
}

// ç›‘å¬è¡¨å•è¾“å…¥ï¼Œè‡ªåŠ¨ä¿å­˜
document.getElementById('userForm').addEventListener('input', autoSaveForm);

// é¡µé¢åŠ è½½æ—¶æ¢å¤æ•°æ®
window.addEventListener('load', restoreForm);
```

**ğŸ” æœç´¢å†å²è®°å½•**
```javascript
// æœç´¢å†å²ç®¡ç†
const searchHistory = {
    // æ·»åŠ æœç´¢è®°å½•
    add(keyword) {
        if (!keyword.trim()) return;
        
        let history = this.get();
        
        // å»é‡ï¼šç§»é™¤å·²å­˜åœ¨çš„è®°å½•
        history = history.filter(item => item !== keyword);
        
        // æ·»åŠ åˆ°å¼€å¤´
        history.unshift(keyword);
        
        // é™åˆ¶è®°å½•æ•°é‡ï¼ˆæœ€å¤š10æ¡ï¼‰
        if (history.length > 10) {
            history = history.slice(0, 10);
        }
        
        sessionStorage.setItem('searchHistory', JSON.stringify(history));
    },
    
    // è·å–æœç´¢å†å²
    get() {
        const history = sessionStorage.getItem('searchHistory');
        return history ? JSON.parse(history) : [];
    },
    
    // æ¸…ç©ºå†å²
    clear() {
        sessionStorage.removeItem('searchHistory');
    }
};

// ä½¿ç”¨ç¤ºä¾‹
searchHistory.add('JavaScriptæ•™ç¨‹');
searchHistory.add('CSSå¸ƒå±€');
console.log(searchHistory.get()); // ['CSSå¸ƒå±€', 'JavaScriptæ•™ç¨‹']
```

---

## 4. ğŸª CookieåŸºç¡€ä½¿ç”¨


### 4.1 CookieåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒç†è§£**
```
Cookie = å°å‹æ–‡æœ¬æ–‡ä»¶ï¼Œå­˜å‚¨åœ¨ç”¨æˆ·è®¡ç®—æœºä¸Š
ç‰¹ç‚¹ï¼š
â€¢ å®¹é‡å°ï¼ˆ4KBå·¦å³ï¼‰
â€¢ ä¼šè‡ªåŠ¨å‘é€åˆ°æœåŠ¡å™¨
â€¢ å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´
â€¢ æ”¯æŒè·¨é¡µé¢è®¿é—®
```

**ğŸŒ Cookieçš„å·¥ä½œæµç¨‹**
```
1. æœåŠ¡å™¨å“åº”æ—¶è®¾ç½®Cookie
   æœåŠ¡å™¨ â†’ æµè§ˆå™¨ï¼šSet-Cookie: username=å¼ ä¸‰

2. æµè§ˆå™¨è‡ªåŠ¨å­˜å‚¨Cookie
   æµè§ˆå™¨ï¼šä¿å­˜ username=å¼ ä¸‰

3. åç»­è¯·æ±‚è‡ªåŠ¨æºå¸¦Cookie
   æµè§ˆå™¨ â†’ æœåŠ¡å™¨ï¼šCookie: username=å¼ ä¸‰
```

### 4.2 Cookieæ“ä½œæ–¹æ³•


**ğŸ“ è®¾ç½®å’Œè¯»å–Cookie**
```javascript
// è®¾ç½®Cookieï¼ˆæœ€ç®€å•æ–¹å¼ï¼‰
document.cookie = "username=å¼ ä¸‰";
document.cookie = "theme=dark";

// è®¾ç½®å¸¦è¿‡æœŸæ—¶é—´çš„Cookie
function setCookie(name, value, days) {
    let expires = "";
    if (days) {
        let date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

// è·å–Cookie
function getCookie(name) {
    let nameEQ = name + "=";
    let cookies = document.cookie.split(';');
    
    for (let i = 0; i < cookies.length; i++) {
        let cookie = cookies[i].trim();
        if (cookie.indexOf(nameEQ) == 0) {
            return cookie.substring(nameEQ.length);
        }
    }
    return null;
}

// åˆ é™¤Cookie
function deleteCookie(name) {
    document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
}
```

### 4.3 Cookieå®ç”¨å°è£…


**ğŸ› ï¸ ç®€åŒ–Cookieæ“ä½œ**
```javascript
// Cookieå·¥å…·å¯¹è±¡
const cookie = {
    // è®¾ç½®Cookie
    set(name, value, days = 7) {
        let expires = "";
        if (days) {
            let date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    },
    
    // è·å–Cookie
    get(name) {
        let nameEQ = name + "=";
        let cookies = document.cookie.split(';');
        
        for (let cookie of cookies) {
            cookie = cookie.trim();
            if (cookie.indexOf(nameEQ) === 0) {
                return cookie.substring(nameEQ.length);
            }
        }
        return null;
    },
    
    // åˆ é™¤Cookie
    remove(name) {
        this.set(name, "", -1);
    },
    
    // è·å–æ‰€æœ‰Cookie
    getAll() {
        let cookies = {};
        if (document.cookie) {
            document.cookie.split(';').forEach(cookie => {
                let [name, value] = cookie.trim().split('=');
                cookies[name] = value;
            });
        }
        return cookies;
    }
};

// ä½¿ç”¨ç¤ºä¾‹
cookie.set('user', 'admin', 30);        // ä¿å­˜30å¤©
cookie.set('loginTime', Date.now(), 1); // ä¿å­˜1å¤©
console.log(cookie.get('user'));        // "admin"
cookie.remove('loginTime');              // åˆ é™¤
```

### 4.4 Cookieå®é™…åº”ç”¨


**ğŸ‘¤ è®°ä½ç™»å½•çŠ¶æ€**
```javascript
// ç™»å½•çŠ¶æ€ç®¡ç†
const auth = {
    // ä¿å­˜ç™»å½•ä¿¡æ¯
    login(username, rememberMe = false) {
        if (rememberMe) {
            // è®°ä½ç™»å½•ï¼Œä¿å­˜7å¤©
            cookie.set('isLoggedIn', 'true', 7);
            cookie.set('username', username, 7);
        } else {
            // ä¸è®°ä½ï¼Œå…³é—­æµè§ˆå™¨å°±æ¸…é™¤
            sessionStorage.setItem('isLoggedIn', 'true');
            sessionStorage.setItem('username', username);
        }
    },
    
    // æ£€æŸ¥ç™»å½•çŠ¶æ€
    isLoggedIn() {
        return cookie.get('isLoggedIn') === 'true' || 
               sessionStorage.getItem('isLoggedIn') === 'true';
    },
    
    // è·å–ç”¨æˆ·å
    getUsername() {
        return cookie.get('username') || 
               sessionStorage.getItem('username');
    },
    
    // é€€å‡ºç™»å½•
    logout() {
        cookie.remove('isLoggedIn');
        cookie.remove('username');
        sessionStorage.removeItem('isLoggedIn');
        sessionStorage.removeItem('username');
    }
};

// ä½¿ç”¨ç¤ºä¾‹
auth.login('å¼ ä¸‰', true); // è®°ä½ç™»å½•
if (auth.isLoggedIn()) {
    console.log('æ¬¢è¿å›æ¥ï¼Œ' + auth.getUsername());
}
```

---

## 5. âš–ï¸ ä¸‰ç§å­˜å‚¨æ–¹å¼å¯¹æ¯”


### 5.1 è¯¦ç»†å¯¹æ¯”è¡¨æ ¼


| **ç‰¹æ€§** | **localStorage** | **sessionStorage** | **Cookie** |
|---------|-----------------|-------------------|------------|
| **å­˜å‚¨å¤§å°** | 5-10MB | 5-10MB | ~4KB |
| **ç”Ÿå‘½å‘¨æœŸ** | æ°¸ä¹…ä¿å­˜ | å…³é—­æ ‡ç­¾é¡µæ¸…é™¤ | å¯è®¾è¿‡æœŸæ—¶é—´ |
| **ä½œç”¨åŸŸ** | åŒæºæ‰€æœ‰é¡µé¢ | ä»…å½“å‰æ ‡ç­¾é¡µ | åŒæºæ‰€æœ‰é¡µé¢ |
| **æœåŠ¡å™¨é€šä¿¡** | ä¸å‘é€ | ä¸å‘é€ | è‡ªåŠ¨å‘é€ |
| **APIæ˜“ç”¨æ€§** | ç®€å• | ç®€å• | ç›¸å¯¹å¤æ‚ |
| **å…¼å®¹æ€§** | IE8+ | IE8+ | æ‰€æœ‰æµè§ˆå™¨ |

### 5.2 é€‰æ‹©å»ºè®®


**ğŸ¯ ä»€ä¹ˆæ—¶å€™ç”¨å“ªç§å­˜å‚¨**

```
ä½¿ç”¨localStorageçš„åœºæ™¯ï¼š
âœ… ç”¨æˆ·è®¾ç½®å’Œåå¥½
âœ… è´­ç‰©è½¦æ•°æ®
âœ… ç¼“å­˜çš„åº”ç”¨æ•°æ®
âœ… ç”¨æˆ·çš„é•¿æœŸçŠ¶æ€

ä½¿ç”¨sessionStorageçš„åœºæ™¯ï¼š
âœ… è¡¨å•ä¸´æ—¶æ•°æ®
âœ… å•é¡µé¢åº”ç”¨çš„çŠ¶æ€
âœ… æœç´¢å†å²ï¼ˆå½“å‰ä¼šè¯ï¼‰
âœ… ä¸´æ—¶çš„è®¡ç®—ç»“æœ

ä½¿ç”¨Cookieçš„åœºæ™¯ï¼š
âœ… ç”¨æˆ·ç™»å½•çŠ¶æ€
âœ… æœåŠ¡å™¨éœ€è¦çš„æ ‡è¯†
âœ… è·¨é¡µé¢çš„ç®€å•æ•°æ®
âœ… éœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®
```

### 5.3 æ€§èƒ½å’Œå®‰å…¨è€ƒè™‘


**âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
```javascript
// é¿å…é¢‘ç¹æ“ä½œ
// âŒ ä¸å¥½çš„åšæ³•
for (let i = 0; i < 1000; i++) {
    localStorage.setItem('data' + i, i);
}

// âœ… å¥½çš„åšæ³•
let batchData = {};
for (let i = 0; i < 1000; i++) {
    batchData['data' + i] = i;
}
localStorage.setItem('batchData', JSON.stringify(batchData));
```

**ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹**
```javascript
// ä¸è¦å­˜å‚¨æ•æ„Ÿä¿¡æ¯
// âŒ å±é™©çš„åšæ³•
localStorage.setItem('password', '123456');
localStorage.setItem('creditCard', '1234-5678-9012-3456');

// âœ… å®‰å…¨çš„åšæ³•
localStorage.setItem('userPreferences', JSON.stringify({
    theme: 'dark',
    language: 'zh'
}));
```

---

## 6. ğŸš€ å®é™…åº”ç”¨åœºæ™¯


### 6.1 è´­ç‰©è½¦åŠŸèƒ½å®ç°


**ğŸ›’ å®Œæ•´çš„è´­ç‰©è½¦ç¤ºä¾‹**
```javascript
// è´­ç‰©è½¦ç®¡ç†
const cart = {
    // è·å–è´­ç‰©è½¦æ•°æ®
    getItems() {
        const items = localStorage.getItem('cartItems');
        return items ? JSON.parse(items) : [];
    },
    
    // æ·»åŠ å•†å“
    addItem(product) {
        let items = this.getItems();
        
        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
        let existingItem = items.find(item => item.id === product.id);
        
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            items.push({...product, quantity: 1});
        }
        
        localStorage.setItem('cartItems', JSON.stringify(items));
        this.updateCartCount();
    },
    
    // åˆ é™¤å•†å“
    removeItem(productId) {
        let items = this.getItems();
        items = items.filter(item => item.id !== productId);
        localStorage.setItem('cartItems', JSON.stringify(items));
        this.updateCartCount();
    },
    
    // æ›´æ–°è´­ç‰©è½¦æ•°é‡æ˜¾ç¤º
    updateCartCount() {
        let items = this.getItems();
        let totalCount = items.reduce((sum, item) => sum + item.quantity, 0);
        
        // æ›´æ–°é¡µé¢æ˜¾ç¤º
        let countElement = document.getElementById('cartCount');
        if (countElement) {
            countElement.textContent = totalCount;
        }
    },
    
    // æ¸…ç©ºè´­ç‰©è½¦
    clear() {
        localStorage.removeItem('cartItems');
        this.updateCartCount();
    }
};

// é¡µé¢åŠ è½½æ—¶æ›´æ–°è´­ç‰©è½¦æ•°é‡
window.addEventListener('load', () => cart.updateCartCount());
```

### 6.2 è‡ªåŠ¨ä¿å­˜è‰ç¨¿åŠŸèƒ½


**ğŸ“ æ–‡ç« ç¼–è¾‘å™¨è‡ªåŠ¨ä¿å­˜**
```javascript
// è‡ªåŠ¨ä¿å­˜è‰ç¨¿
const autoSave = {
    timer: null,
    
    // åˆå§‹åŒ–è‡ªåŠ¨ä¿å­˜
    init(textareaId, interval = 30000) { // 30ç§’ä¿å­˜ä¸€æ¬¡
        const textarea = document.getElementById(textareaId);
        if (!textarea) return;
        
        // é¡µé¢åŠ è½½æ—¶æ¢å¤è‰ç¨¿
        this.loadDraft(textarea);
        
        // ç›‘å¬è¾“å…¥ï¼Œå»¶è¿Ÿä¿å­˜
        textarea.addEventListener('input', () => {
            clearTimeout(this.timer);
            this.timer = setTimeout(() => {
                this.saveDraft(textarea.value);
            }, 3000); // åœæ­¢è¾“å…¥3ç§’åä¿å­˜
        });
        
        // å®šæœŸè‡ªåŠ¨ä¿å­˜
        setInterval(() => {
            if (textarea.value.trim()) {
                this.saveDraft(textarea.value);
            }
        }, interval);
    },
    
    // ä¿å­˜è‰ç¨¿
    saveDraft(content) {
        if (content.trim()) {
            localStorage.setItem('articleDraft', JSON.stringify({
                content: content,
                saveTime: new Date().toLocaleString()
            }));
            
            // æ˜¾ç¤ºä¿å­˜æç¤º
            this.showSaveIndicator();
        }
    },
    
    // åŠ è½½è‰ç¨¿
    loadDraft(textarea) {
        const draft = localStorage.getItem('articleDraft');
        if (draft) {
            const draftData = JSON.parse(draft);
            
            if (confirm(`å‘ç°è‰ç¨¿ï¼ˆä¿å­˜æ—¶é—´ï¼š${draftData.saveTime}ï¼‰ï¼Œæ˜¯å¦æ¢å¤ï¼Ÿ`)) {
                textarea.value = draftData.content;
            }
        }
    },
    
    // æ¸…é™¤è‰ç¨¿
    clearDraft() {
        localStorage.removeItem('articleDraft');
    },
    
    // æ˜¾ç¤ºä¿å­˜æŒ‡ç¤ºå™¨
    showSaveIndicator() {
        let indicator = document.getElementById('saveIndicator');
        if (!indicator) {
            indicator = document.createElement('div');
            indicator.id = 'saveIndicator';
            indicator.style.cssText = 'position:fixed;top:10px;right:10px;background:#4CAF50;color:white;padding:8px;border-radius:4px;z-index:1000;';
            document.body.appendChild(indicator);
        }
        
        indicator.textContent = 'è‰ç¨¿å·²ä¿å­˜';
        indicator.style.display = 'block';
        
        setTimeout(() => {
            indicator.style.display = 'none';
        }, 2000);
    }
};

// ä½¿ç”¨ç¤ºä¾‹
autoSave.init('articleEditor', 30000);
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ localStorageï¼šæ°¸ä¹…ä¿å­˜ï¼Œå¤§å®¹é‡ï¼ŒåŒåŸŸå…±äº«
ğŸ”¸ sessionStorageï¼šä¸´æ—¶ä¿å­˜ï¼Œä»…å½“å‰æ ‡ç­¾é¡µ
ğŸ”¸ Cookieï¼šå°å®¹é‡ï¼Œè‡ªåŠ¨å‘é€æœåŠ¡å™¨ï¼Œå¯è®¾è¿‡æœŸ
ğŸ”¸ æ•°æ®æ ¼å¼ï¼šéƒ½åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œå¤æ‚æ•°æ®éœ€JSONè½¬æ¢
ğŸ”¸ å®‰å…¨åŸåˆ™ï¼šä¸å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼Œåšå¥½é”™è¯¯å¤„ç†
```

### 7.2 å®é™…å¼€å‘å»ºè®®


**âœ… æœ€ä½³å®è·µ**
```javascript
// 1. ç»Ÿä¸€å°è£…å­˜å‚¨æ“ä½œ
const store = {
    local: {
        set: (key, val) => localStorage.setItem(key, JSON.stringify(val)),
        get: (key) => JSON.parse(localStorage.getItem(key) || 'null')
    },
    session: {
        set: (key, val) => sessionStorage.setItem(key, JSON.stringify(val)),
        get: (key) => JSON.parse(sessionStorage.getItem(key) || 'null')
    }
};

// 2. åšå¥½é”™è¯¯å¤„ç†
function safeStorage(operation) {
    try {
        return operation();
    } catch (e) {
        console.warn('å­˜å‚¨æ“ä½œå¤±è´¥ï¼š', e);
        return null;
    }
}

// 3. æ£€æŸ¥å­˜å‚¨å¯ç”¨æ€§
function isStorageAvailable(type) {
    try {
        const storage = window[type];
        const test = '__test__';
        storage.setItem(test, test);
        storage.removeItem(test);
        return true;
    } catch (e) {
        return false;
    }
}
```

### 7.3 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


**âŒ é¿å…çš„é”™è¯¯**
```javascript
// 1. å¿˜è®°JSONè½¬æ¢
localStorage.setItem('user', {name: 'å¼ ä¸‰'}); // âŒ é”™è¯¯
localStorage.setItem('user', JSON.stringify({name: 'å¼ ä¸‰'})); // âœ… æ­£ç¡®

// 2. ä¸å¤„ç†nullå€¼
let user = JSON.parse(localStorage.getItem('user')); // âŒ å¯èƒ½æŠ¥é”™
let user = JSON.parse(localStorage.getItem('user') || '{}'); // âœ… å®‰å…¨

// 3. è¶…å‡ºå­˜å‚¨é™åˆ¶ä¸å¤„ç†
localStorage.setItem('bigData', hugDataString); // âŒ å¯èƒ½å¤±è´¥
```

### 7.4 è®°å¿†å£è¯€


**ğŸ§  æ ¸å¿ƒè®°å¿†**
```
æœ¬åœ°å­˜å‚¨ä¸‰å…„å¼Ÿï¼Œå„æœ‰ç‰¹ç‚¹è¦è®°æ¸…
localStorageè€å¤§å“¥ï¼Œæ°¸ä¹…ä¿å­˜å®¹é‡å¤§
sessionStorageè€äºŒå¼Ÿï¼Œä¸´æ—¶å­˜å‚¨å½“å‰é¡µ
Cookieå°å¼Ÿå¾ˆç‰¹æ®Šï¼Œè‡ªåŠ¨å‘é€åˆ°æœåŠ¡å™¨

å­˜å‚¨æ•°æ®è¦å°å¿ƒï¼Œåªèƒ½å­—ç¬¦ä¸²æ ¼å¼
å¤æ‚æ•°æ®JSONè½¬ï¼Œå®‰å…¨é”™è¯¯è¦å¤„ç†
```

**å®ç”¨é€‰æ‹©æŒ‡å—**ï¼š
- **é•¿æœŸæ•°æ®** â†’ localStorage
- **ä¸´æ—¶æ•°æ®** â†’ sessionStorage  
- **æœåŠ¡å™¨éœ€è¦** â†’ Cookie