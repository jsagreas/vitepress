---
title: 1ã€ç¼–ç¨‹æ€æƒ³ä¸æ¶æ„è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [ä»ä»£ç åˆ°æ¶æ„çš„æ€ç»´æ¼”åŒ–](#1-ä»ä»£ç åˆ°æ¶æ„çš„æ€ç»´æ¼”åŒ–)
2. [å¾®æœåŠ¡è®¾è®¡ä¸­çš„ç¼–ç¨‹æ€æƒ³](#2-å¾®æœåŠ¡è®¾è®¡ä¸­çš„ç¼–ç¨‹æ€æƒ³)
3. [æ¶æ„æ¨¡å¼çš„æ¼”åŒ–æ€ç»´](#3-æ¶æ„æ¨¡å¼çš„æ¼”åŒ–æ€ç»´)
4. [è®¾è®¡åŸåˆ™åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨](#4-è®¾è®¡åŸåˆ™åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨)
5. [å®æˆ˜æ¡ˆä¾‹ï¼šæ€ç»´æ¼”è¿›ä¹‹è·¯](#5-å®æˆ˜æ¡ˆä¾‹æ€ç»´æ¼”è¿›ä¹‹è·¯)
6. [ä»æ¨¡å¼åˆ°ç³»ç»Ÿçš„å®è·µæ–¹æ³•](#6-ä»æ¨¡å¼åˆ°ç³»ç»Ÿçš„å®è·µæ–¹æ³•)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ ä»ä»£ç åˆ°æ¶æ„çš„æ€ç»´æ¼”åŒ–


### 1.1 ä»€ä¹ˆæ˜¯ç¼–ç¨‹æ€æƒ³ä¸æ¶æ„è®¾è®¡çš„å…³è”


> **ç®€å•ç†è§£**ï¼šå°±åƒç›–æˆ¿å­ï¼Œç¼–ç¨‹æ€æƒ³æ˜¯ç –ç“¦çš„ç Œæ³•ï¼Œæ¶æ„è®¾è®¡æ˜¯æ•´ä¸ªæˆ¿å­çš„ç»“æ„ã€‚ä»å†™å¥½ä¸€å—ç –ï¼ˆä»£ç ï¼‰åˆ°ç›–å¥½ä¸€æ ‹æ¥¼ï¼ˆç³»ç»Ÿï¼‰ï¼Œæ€ç»´æ–¹å¼åœ¨ä¸æ–­æ”¾å¤§å‡çº§ã€‚

**ğŸ§  æ€ç»´å±‚æ¬¡çš„æ¼”åŒ–è¿‡ç¨‹**

```
ç¼–ç¨‹æ€æƒ³ â†’ æ¶æ„è®¾è®¡çš„æ¼”åŒ–é˜¶æ¢¯ï¼š

å•ä¸ªå‡½æ•°æ€ç»´    â†’    æ¨¡å—è®¾è®¡æ€ç»´    â†’    ç³»ç»Ÿæ¶æ„æ€ç»´
     â†“                   â†“                   â†“
  æ€ä¹ˆå†™ä»£ç          æ€ä¹ˆç»„ç»‡ä»£ç          æ€ä¹ˆè®¾è®¡ç³»ç»Ÿ
     â†“                   â†“                   â†“
  å‡½æ•°ã€å˜é‡          ç±»ã€åŒ…ã€ç»„ä»¶          æœåŠ¡ã€é›†ç¾¤
     â†“                   â†“                   â†“
   å±€éƒ¨ä¼˜åŒ–           æ¨¡å—ä¼˜åŒ–             å…¨å±€ä¼˜åŒ–
```

### 1.2 ä»ä»£ç çº§æ€æƒ³åˆ°æ¶æ„çº§æ€æƒ³


**ğŸ”¸ ä»£ç çº§æ€æƒ³ï¼ˆç –ç“¦çº§åˆ«ï¼‰**

è¿™æ˜¯æœ€åŸºç¡€çš„ç¼–ç¨‹æ€ç»´ï¼Œå…³æ³¨çš„æ˜¯å¦‚ä½•å†™å¥½æ¯ä¸€è¡Œä»£ç ï¼š

```java
// ä»£ç çº§æ€ç»´ï¼šå¦‚ä½•å†™ä¸€ä¸ªå¥½çš„å‡½æ•°
public class UserService {
    // å•ä¸€èŒè´£ï¼šåªå¤„ç†ç”¨æˆ·ç›¸å…³ä¸šåŠ¡
    public User findUserById(Long id) {
        if (id == null || id <= 0) {  // é˜²å¾¡æ€§ç¼–ç¨‹
            throw new IllegalArgumentException("ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–è´Ÿæ•°");
        }
        return userRepository.findById(id);  // èŒè´£åˆ†ç¦»
    }
}
```

**å…³æ³¨ç‚¹**ï¼š
- âœ… å‡½æ•°æ˜¯å¦ç®€æ´æ˜äº†
- âœ… å˜é‡å‘½åæ˜¯å¦åˆç†
- âœ… é€»è¾‘æ˜¯å¦æ­£ç¡®
- âœ… ä»£ç æ˜¯å¦å¯è¯»

**ğŸ”¸ æ¨¡å—çº§æ€æƒ³ï¼ˆæˆ¿é—´çº§åˆ«ï¼‰**

æŠŠå¤šä¸ªç›¸å…³åŠŸèƒ½ç»„ç»‡æˆæ¨¡å—ï¼Œå¼€å§‹è€ƒè™‘ç»„ä»¶ä¹‹é—´çš„å…³ç³»ï¼š

```
ç”¨æˆ·æ¨¡å—çš„è®¾è®¡æ€ç»´ï¼š

UserController  â†â†’  UserService  â†â†’  UserRepository
     â†‘                 â†‘                 â†‘
   å¤„ç†è¯·æ±‚          ä¸šåŠ¡é€»è¾‘           æ•°æ®è®¿é—®
     â†‘                 â†‘                 â†‘
   è¡¨ç°å±‚            ä¸šåŠ¡å±‚             æ•°æ®å±‚
```

**å…³æ³¨ç‚¹**ï¼š
- âœ… æ¨¡å—èŒè´£æ˜¯å¦æ¸…æ™°
- âœ… æ¥å£è®¾è®¡æ˜¯å¦åˆç†
- âœ… ä¾èµ–å…³ç³»æ˜¯å¦ç®€å•
- âœ… æ¨¡å—æ˜¯å¦å¯å¤ç”¨

**ğŸ”¸ ç³»ç»Ÿçº§æ€æƒ³ï¼ˆæ•´æ ‹æ¥¼çº§åˆ«ï¼‰**

å¼€å§‹è€ƒè™‘æ•´ä¸ªç³»ç»Ÿçš„ç»“æ„ï¼Œå¦‚ä½•è®©å¤šä¸ªæ¨¡å—ååŒå·¥ä½œï¼š

```
ç³»ç»Ÿæ¶æ„æ€ç»´çš„å±‚æ¬¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å‰ç«¯ç³»ç»Ÿ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              APIç½‘å…³å±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç”¨æˆ·æœåŠ¡  â”‚  è®¢å•æœåŠ¡  â”‚  æ”¯ä»˜æœåŠ¡  â”‚  åº“å­˜æœåŠ¡  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ•°æ®åº“é›†ç¾¤                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³æ³¨ç‚¹**ï¼š
- âœ… ç³»ç»Ÿå¦‚ä½•æ‹†åˆ†
- âœ… æœåŠ¡å¦‚ä½•é€šä¿¡
- âœ… æ•°æ®å¦‚ä½•æµè½¬
- âœ… æ€§èƒ½å¦‚ä½•ä¿éšœ

### 1.3 æ€ç»´æ–¹å¼çš„æ ¸å¿ƒè½¬å˜


**ğŸ“Š ç¼–ç¨‹æ€æƒ³åˆ°æ¶æ„æ€æƒ³çš„å¯¹æ¯”**

| **ç»´åº¦** | **ç¼–ç¨‹æ€æƒ³** | **æ¶æ„æ€æƒ³** |
|---------|-------------|-------------|
| **å…³æ³¨èŒƒå›´** | `å•ä¸ªåŠŸèƒ½ç‚¹` | `æ•´ä¸ªç³»ç»Ÿ` |
| **æ€è€ƒç²’åº¦** | `å‡½æ•°ã€ç±»` | `æœåŠ¡ã€ç»„ä»¶` |
| **ä¸»è¦é—®é¢˜** | `ä»£ç æ€ä¹ˆå†™` | `ç³»ç»Ÿæ€ä¹ˆç»„ç»‡` |
| **æ ¸å¿ƒç›®æ ‡** | `åŠŸèƒ½æ­£ç¡®` | `ç³»ç»Ÿç¨³å®š` |
| **å¤æ‚åº¦** | `ç®—æ³•å¤æ‚åº¦` | `ç³»ç»Ÿå¤æ‚åº¦` |

**ğŸ¯ å…³é”®æ€ç»´è½¬å˜**

> **ä»"å†™ä»£ç "åˆ°"è®¾è®¡ç³»ç»Ÿ"**ï¼šä¸å†åªè€ƒè™‘å•ä¸ªåŠŸèƒ½å¦‚ä½•å®ç°ï¼Œè€Œæ˜¯è€ƒè™‘æ•´ä¸ªç³»ç»Ÿå¦‚ä½•åè°ƒå·¥ä½œã€‚

```java
// ç¼–ç¨‹æ€æƒ³ï¼šå…³æ³¨å•ä¸ªæ–¹æ³•
public void processOrder(Order order) {
    // éªŒè¯è®¢å•
    validateOrder(order);
    // è®¡ç®—ä»·æ ¼
    calculatePrice(order);
    // ä¿å­˜è®¢å•
    saveOrder(order);
}

// æ¶æ„æ€æƒ³ï¼šå…³æ³¨ç³»ç»Ÿåè°ƒ
/*
è®¢å•å¤„ç†çš„ç³»ç»Ÿè§†è§’ï¼š
1. APIç½‘å…³æ¥æ”¶è¯·æ±‚
2. è®¢å•æœåŠ¡éªŒè¯è®¢å•
3. åº“å­˜æœåŠ¡æ£€æŸ¥åº“å­˜
4. æ”¯ä»˜æœåŠ¡å¤„ç†ä»˜æ¬¾
5. é€šçŸ¥æœåŠ¡å‘é€ç¡®è®¤
*/
```

---

## 2. ğŸŒ å¾®æœåŠ¡è®¾è®¡ä¸­çš„ç¼–ç¨‹æ€æƒ³


### 2.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡è®¾è®¡


> **é€šä¿—è§£é‡Š**ï¼šä¼ ç»Ÿçš„åº”ç”¨å°±åƒä¸€ä¸ªå¤§å·¥å‚ï¼Œæ‰€æœ‰ç”Ÿäº§çº¿éƒ½åœ¨ä¸€ä¸ªå‚æˆ¿é‡Œã€‚å¾®æœåŠ¡å°±åƒæŠŠå·¥å‚æ‹†åˆ†æˆå¤šä¸ªå°è½¦é—´ï¼Œæ¯ä¸ªè½¦é—´ä¸“é—¨ç”Ÿäº§ä¸€ç§äº§å“ï¼Œè½¦é—´ä¹‹é—´é€šè¿‡ä¼ é€å¸¦è¿æ¥ã€‚

**ğŸ­ å•ä½“åº”ç”¨ vs å¾®æœåŠ¡åº”ç”¨**

```
å•ä½“åº”ç”¨ï¼ˆå¤§å·¥å‚æ¨¡å¼ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ç”µå•†åº”ç”¨                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ç”¨æˆ·ç®¡ç†â”‚å•†å“ç®¡ç†â”‚è®¢å•ç®¡ç†â”‚æ”¯ä»˜ç®¡ç†â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              å…±äº«æ•°æ®åº“              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¾®æœåŠ¡åº”ç”¨ï¼ˆå°è½¦é—´æ¨¡å¼ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç”¨æˆ·æœåŠ¡  â”‚  â”‚å•†å“æœåŠ¡  â”‚  â”‚è®¢å•æœåŠ¡  â”‚  â”‚æ”¯ä»˜æœåŠ¡  â”‚
â”‚ç”¨æˆ·æ•°æ®åº“â”‚  â”‚å•†å“æ•°æ®åº“â”‚  â”‚è®¢å•æ•°æ®åº“â”‚  â”‚æ”¯ä»˜æ•°æ®åº“â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘            â†‘            â†‘            â†‘
           é€šè¿‡ç½‘ç»œæ¥å£é€šä¿¡
```

### 2.2 ç¼–ç¨‹æ€æƒ³åœ¨å¾®æœåŠ¡ä¸­çš„æ˜ å°„


**ğŸ”¸ å•ä¸€èŒè´£åŸåˆ™çš„æ”¾å¤§åº”ç”¨**

åœ¨å‡½æ•°çº§åˆ«ï¼Œæˆ‘ä»¬è¯´ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ï¼š

```java
// å‡½æ•°çº§åˆ«çš„å•ä¸€èŒè´£
public boolean validateEmail(String email) {
    return email.contains("@") && email.contains(".");
}
```

åœ¨å¾®æœåŠ¡çº§åˆ«ï¼Œä¸€ä¸ªæœåŠ¡ä¹Ÿåªåšä¸€ç±»äº‹æƒ…ï¼š

```java
// æœåŠ¡çº§åˆ«çš„å•ä¸€èŒè´£
@RestController
public class UserController {
    // ç”¨æˆ·æœåŠ¡åªå¤„ç†ç”¨æˆ·ç›¸å…³çš„æ‰€æœ‰æ“ä½œ
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) { }
    
    @PostMapping("/users")
    public User createUser(@RequestBody User user) { }
    
    @PutMapping("/users/{id}")
    public User updateUser(@PathVariable Long id, @RequestBody User user) { }
}
```

**ğŸ”¸ ä¾èµ–åè½¬åŸåˆ™çš„æœåŠ¡åŒ–åº”ç”¨**

ä»£ç çº§åˆ«çš„ä¾èµ–åè½¬ï¼š

```java
// ä¾èµ–æ¥å£è€Œä¸æ˜¯å…·ä½“å®ç°
public class UserService {
    private final UserRepository repository;  // ä¾èµ–æŠ½è±¡
    
    public UserService(UserRepository repository) {
        this.repository = repository;
    }
}
```

å¾®æœåŠ¡çº§åˆ«çš„ä¾èµ–åè½¬ï¼š

```
æœåŠ¡é—´çš„ä¾èµ–åè½¬ï¼š

è®¢å•æœåŠ¡ â”€â”€â†’ ç”¨æˆ·æ¥å£ â†â”€â”€ ç”¨æˆ·æœåŠ¡
       ä¸ç›´æ¥ä¾èµ–ç”¨æˆ·æœåŠ¡çš„å…·ä½“å®ç°
       é€šè¿‡APIæ¥å£è¿›è¡Œé€šä¿¡
```

### 2.3 å¾®æœåŠ¡è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³


**ğŸ“ è®¾è®¡åŸåˆ™æ˜ å°„è¡¨**

| **ç¼–ç¨‹åŸåˆ™** | **å¾®æœåŠ¡åº”ç”¨** | **å…·ä½“è¡¨ç°** |
|-------------|---------------|-------------|
| **å•ä¸€èŒè´£** | `æœåŠ¡èŒè´£æ˜ç¡®` | `ç”¨æˆ·æœåŠ¡åªç®¡ç”¨æˆ·ï¼Œè®¢å•æœåŠ¡åªç®¡è®¢å•` |
| **å¼€é—­åŸåˆ™** | `æœåŠ¡å¯æ‰©å±•` | `æ–°å¢åŠŸèƒ½æ—¶å¢åŠ æ–°æœåŠ¡ï¼Œä¸ä¿®æ”¹ç°æœ‰æœåŠ¡` |
| **æ¥å£éš”ç¦»** | `APIè®¾è®¡ç²¾ç®€` | `æ¯ä¸ªæœåŠ¡åªæš´éœ²å¿…è¦çš„æ¥å£` |
| **ä¾èµ–åè½¬** | `æœåŠ¡é—´è§£è€¦` | `é€šè¿‡æ¥å£é€šä¿¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°` |

**ğŸš€ å¾®æœåŠ¡çš„æ ¸å¿ƒä¼˜åŠ¿**

```
å¾®æœåŠ¡ä¼˜åŠ¿è§£æï¼š

ç‹¬ç«‹å¼€å‘ â”€â”€â”€â”€â†’ ä¸åŒå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘ä¸åŒæœåŠ¡
ç‹¬ç«‹éƒ¨ç½² â”€â”€â”€â”€â†’ ä¸€ä¸ªæœåŠ¡æ›´æ–°ä¸å½±å“å…¶ä»–æœåŠ¡  
ç‹¬ç«‹æ‰©å±• â”€â”€â”€â”€â†’ çƒ­ç‚¹æœåŠ¡å¯ä»¥å•ç‹¬æ‰©å®¹
æŠ€æœ¯å¤šæ · â”€â”€â”€â”€â†’ ä¸åŒæœåŠ¡å¯ä»¥ç”¨ä¸åŒæŠ€æœ¯æ ˆ
æ•…éšœéš”ç¦» â”€â”€â”€â”€â†’ ä¸€ä¸ªæœåŠ¡æŒ‚äº†ä¸ä¼šæ‹–å®æ•´ä¸ªç³»ç»Ÿ
```

---

## 3. ğŸ—ï¸ æ¶æ„æ¨¡å¼çš„æ¼”åŒ–æ€ç»´


### 3.1 æ¶æ„æ¼”åŒ–çš„å¿…ç„¶æ€§


> **ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒåŸå¸‚å‘å±•ä¸€æ ·ï¼Œæœ€å¼€å§‹æ˜¯å°æ‘åº„ï¼ˆå•ä½“åº”ç”¨ï¼‰ï¼Œäººå¤šäº†å˜æˆå°é•‡ï¼ˆåˆ†å±‚æ¶æ„ï¼‰ï¼Œäººæ›´å¤šäº†å˜æˆå¤§åŸå¸‚ï¼ˆå¾®æœåŠ¡æ¶æ„ï¼‰ã€‚æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å…¶é€‚ç”¨çš„ç®¡ç†æ–¹å¼ã€‚

**ğŸŒ± æ¶æ„æ¼”åŒ–çš„é©±åŠ¨åŠ›**

```
æ¶æ„æ¼”åŒ–çš„æ¨åŠ¨å› ç´ ï¼š

ä¸šåŠ¡å¤æ‚åº¦å¢é•¿ â”€â”€â”€â”€â†’ éœ€è¦æ›´å¥½çš„ä»£ç ç»„ç»‡
ç”¨æˆ·è§„æ¨¡æ‰©å¤§   â”€â”€â”€â”€â†’ éœ€è¦æ›´å¼ºçš„æ€§èƒ½æ”¯æ’‘  
å›¢é˜Ÿè§„æ¨¡æ‰©å¤§   â”€â”€â”€â”€â†’ éœ€è¦æ›´å¥½çš„åä½œæ–¹å¼
æŠ€æœ¯æ ˆæ¼”è¿›     â”€â”€â”€â”€â†’ éœ€è¦æ›´çµæ´»çš„æŠ€æœ¯é€‰æ‹©
```

### 3.2 å•ä½“æ¶æ„ï¼šç®€å•ç›´æ¥çš„èµ·ç‚¹


**ğŸ”¸ ä»€ä¹ˆæ˜¯å•ä½“æ¶æ„**

> **ç®€å•ç†è§£**ï¼šæ‰€æœ‰åŠŸèƒ½éƒ½å†™åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œï¼Œå°±åƒæŠŠæ‰€æœ‰æˆ¿é—´éƒ½å»ºåœ¨ä¸€æ ‹æ¥¼é‡Œã€‚

```java
// å•ä½“æ¶æ„çš„å…¸å‹ç»“æ„
@SpringBootApplication
public class ECommerceApplication {
    public static void main(String[] args) {
        SpringApplication.run(ECommerceApplication.class, args);
    }
}

// æ‰€æœ‰åŠŸèƒ½éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œ
@RestController
public class ECommerceController {
    @Autowired UserService userService;
    @Autowired ProductService productService;
    @Autowired OrderService orderService;
    @Autowired PaymentService paymentService;
    
    // ç”¨æˆ·ç›¸å…³æ¥å£
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) { }
    
    // å•†å“ç›¸å…³æ¥å£
    @GetMapping("/products/{id}")
    public Product getProduct(@PathVariable Long id) { }
    
    // è®¢å•ç›¸å…³æ¥å£
    @PostMapping("/orders")
    public Order createOrder(@RequestBody Order order) { }
}
```

**âœ… å•ä½“æ¶æ„çš„ä¼˜ç‚¹**ï¼š
- ğŸŸ¢ **å¼€å‘ç®€å•**ï¼šæ‰€æœ‰ä»£ç åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œï¼Œè°ƒè¯•æ–¹ä¾¿
- ğŸŸ¢ **éƒ¨ç½²ç®€å•**ï¼šåªéœ€è¦æ‰“åŒ…ä¸€ä¸ªåº”ç”¨
- ğŸŸ¢ **æµ‹è¯•ç®€å•**ï¼šä¸éœ€è¦è€ƒè™‘æœåŠ¡é—´é€šä¿¡
- ğŸŸ¢ **æ€§èƒ½å¥½**ï¼šå†…éƒ¨è°ƒç”¨ï¼Œæ²¡æœ‰ç½‘ç»œå¼€é”€

**âŒ å•ä½“æ¶æ„çš„é—®é¢˜**ï¼š
- ğŸ”´ **ä»£ç è€¦åˆ**ï¼šä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½å¯èƒ½å½±å“å…¶ä»–åŠŸèƒ½
- ğŸ”´ **æ‰©å±•å›°éš¾**ï¼šæ•´ä¸ªåº”ç”¨ä¸€èµ·æ‰©å®¹ï¼Œæµªè´¹èµ„æº
- ğŸ”´ **æŠ€æœ¯é™åˆ¶**ï¼šæ•´ä¸ªåº”ç”¨å¿…é¡»ç”¨åŒä¸€æŠ€æœ¯æ ˆ
- ğŸ”´ **å›¢é˜Ÿå†²çª**ï¼šå¤šäººä¿®æ”¹åŒä¸€ä»£ç åº“å®¹æ˜“å†²çª

### 3.3 åˆ†å±‚æ¶æ„ï¼šèŒè´£åˆ†ç¦»çš„æ™ºæ…§


**ğŸ”¸ ä»€ä¹ˆæ˜¯åˆ†å±‚æ¶æ„**

> **ç®€å•ç†è§£**ï¼šæŠŠåº”ç”¨æŒ‰ç…§åŠŸèƒ½èŒè´£åˆ†æˆå‡ å±‚ï¼Œå°±åƒç›–æ¥¼ä¸€æ ·ï¼Œä¸€æ¥¼æ˜¯åŸºç¡€è®¾æ–½ï¼ŒäºŒæ¥¼æ˜¯ä¸šåŠ¡å¤„ç†ï¼Œä¸‰æ¥¼æ˜¯ç”¨æˆ·ç•Œé¢ã€‚æ¯å±‚åªä¸ç›¸é‚»å±‚äº¤äº’ã€‚

```
ç»å…¸çš„ä¸‰å±‚æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¡¨ç°å±‚(Controller)          â”‚  â† å¤„ç†ç”¨æˆ·è¯·æ±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          ä¸šåŠ¡å±‚(Service)             â”‚  â† å¤„ç†ä¸šåŠ¡é€»è¾‘  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æ•°æ®å±‚(Repository)          â”‚  â† å¤„ç†æ•°æ®è®¿é—®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
// åˆ†å±‚æ¶æ„çš„ä»£ç ç¤ºä¾‹

// è¡¨ç°å±‚ï¼šè´Ÿè´£æ¥æ”¶è¯·æ±‚å’Œè¿”å›å“åº”
@RestController
public class UserController {
    @Autowired
    private UserService userService;
    
    @GetMapping("/users/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        return ResponseEntity.ok(user);
    }
}

// ä¸šåŠ¡å±‚ï¼šè´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘
@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;
    
    public User findById(Long id) {
        if (id == null || id <= 0) {
            throw new IllegalArgumentException("ç”¨æˆ·IDæ— æ•ˆ");
        }
        return userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨"));
    }
}

// æ•°æ®å±‚ï¼šè´Ÿè´£æ•°æ®è®¿é—®
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findById(Long id);
}
```

**ğŸ¯ åˆ†å±‚æ¶æ„çš„æ ¸å¿ƒæ€æƒ³**

| **å±‚æ¬¡** | **èŒè´£** | **åªèƒ½è°ƒç”¨** | **æ ¸å¿ƒåŸåˆ™** |
|---------|---------|-------------|-------------|
| **è¡¨ç°å±‚** | `å¤„ç†HTTPè¯·æ±‚` | `ä¸šåŠ¡å±‚` | `ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘` |
| **ä¸šåŠ¡å±‚** | `å¤„ç†ä¸šåŠ¡è§„åˆ™` | `æ•°æ®å±‚` | `ä¸å…³å¿ƒæ•°æ®å­˜å‚¨` |
| **æ•°æ®å±‚** | `æ•°æ®å­˜å–æ“ä½œ` | `æ•°æ®åº“` | `ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘` |

### 3.4 å¾®æœåŠ¡æ¶æ„ï¼šåˆ†è€Œæ²»ä¹‹çš„è‰ºæœ¯


**ğŸ”¸ å¾®æœåŠ¡æ¶æ„çš„æœ¬è´¨**

> **ç®€å•ç†è§£**ï¼šæŠŠä¸€ä¸ªå¤§åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªå°åº”ç”¨ï¼Œæ¯ä¸ªå°åº”ç”¨è´Ÿè´£ä¸€å—ä¸šåŠ¡ï¼Œé€šè¿‡ç½‘ç»œé€šä¿¡åä½œã€‚å°±åƒæŠŠä¸€ä¸ªå¤§å…¬å¸æ‹†åˆ†æˆå¤šä¸ªå­å…¬å¸ï¼Œå„è‡ªç‹¬ç«‹è¿è¥ä½†äº’ç›¸åˆä½œã€‚

```
å¾®æœåŠ¡æ¶æ„å…¨æ™¯å›¾ï¼š

                    APIç½‘å…³
                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“         â†“             â†“         â†“         â†“
ç”¨æˆ·æœåŠ¡   å•†å“æœåŠ¡     è®¢å•æœåŠ¡   æ”¯ä»˜æœåŠ¡   é€šçŸ¥æœåŠ¡
    â†“         â†“             â†“         â†“         â†“
ç”¨æˆ·æ•°æ®åº“ å•†å“æ•°æ®åº“   è®¢å•æ•°æ®åº“ æ”¯ä»˜æ•°æ®åº“ æ¶ˆæ¯é˜Ÿåˆ—
```

**ğŸ› ï¸ å¾®æœåŠ¡çš„å…³é”®ç»„ä»¶**

```java
// 1. æœåŠ¡æ³¨å†Œä¸å‘ç°
@SpringBootApplication
@EnableEurekaClient  // å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±
public class UserServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }
}

// 2. æœåŠ¡é—´é€šä¿¡
@RestController
public class OrderController {
    @Autowired
    private UserServiceClient userServiceClient;  // è°ƒç”¨å…¶ä»–æœåŠ¡
    
    @PostMapping("/orders")
    public Order createOrder(@RequestBody OrderRequest request) {
        // è°ƒç”¨ç”¨æˆ·æœåŠ¡éªŒè¯ç”¨æˆ·
        User user = userServiceClient.getUser(request.getUserId());
        if (user == null) {
            throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        // åˆ›å»ºè®¢å•é€»è¾‘...
        return orderService.createOrder(request);
    }
}

// 3. é…ç½®ä¸­å¿ƒ
@RefreshScope  // æ”¯æŒé…ç½®åŠ¨æ€åˆ·æ–°
@RestController
public class ConfigController {
    @Value("${app.feature.enabled:false}")
    private boolean featureEnabled;  // ä»é…ç½®ä¸­å¿ƒè¯»å–é…ç½®
}
```

### 3.5 æ¶æ„é€‰æ‹©çš„å†³ç­–æ€ç»´


**ğŸ¤” å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ¶æ„**

```
æ¶æ„é€‰æ‹©å†³ç­–æ ‘ï¼š

å›¢é˜Ÿè§„æ¨¡å°(< 10äºº) â”€â”€â”€â”€â†’ å•ä½“æ¶æ„
     â†“ No
ä¸šåŠ¡å¤æ‚åº¦ä¸­ç­‰ â”€â”€â”€â”€â†’ åˆ†å±‚æ¶æ„  
     â†“ No
éœ€è¦ç‹¬ç«‹éƒ¨ç½²/æ‰©å±• â”€â”€â”€â”€â†’ å¾®æœåŠ¡æ¶æ„
```

**ğŸ“Š æ¶æ„å¯¹æ¯”æ€»ç»“**

| **æ¶æ„ç±»å‹** | **é€‚ç”¨åœºæ™¯** | **å›¢é˜Ÿè§„æ¨¡** | **æŠ€æœ¯å¤æ‚åº¦** | **è¿ç»´å¤æ‚åº¦** |
|-------------|-------------|-------------|---------------|---------------|
| **å•ä½“æ¶æ„** | `å°å‹åº”ç”¨ï¼Œå¿«é€Ÿå¼€å‘` | `< 10äºº` | `ğŸŸ¢ ç®€å•` | `ğŸŸ¢ ç®€å•` |
| **åˆ†å±‚æ¶æ„** | `ä¸­å‹åº”ç”¨ï¼Œä¸šåŠ¡æ¸…æ™°` | `10-50äºº` | `ğŸŸ¡ ä¸­ç­‰` | `ğŸŸ¡ ä¸­ç­‰` |
| **å¾®æœåŠ¡** | `å¤§å‹åº”ç”¨ï¼Œé«˜å¹¶å‘` | `> 50äºº` | `ğŸ”´ å¤æ‚` | `ğŸ”´ å¤æ‚` |

---

## 4. âš–ï¸ è®¾è®¡åŸåˆ™åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨


### 4.1 SOLIDåŸåˆ™çš„æ¶æ„çº§åº”ç”¨


**ğŸ”¸ å•ä¸€èŒè´£åŸåˆ™(SRP)çš„æ”¾å¤§**

ä»å‡½æ•°çº§åˆ«åˆ°ç³»ç»Ÿçº§åˆ«ï¼Œå•ä¸€èŒè´£åŸåˆ™éƒ½åœ¨å‘æŒ¥ä½œç”¨ï¼š

```java
// ä»£ç çº§åˆ«ï¼šä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹
public class EmailService {
    public void sendEmail(String to, String subject, String content) {
        // åªè´Ÿè´£å‘é€é‚®ä»¶
    }
}

public class UserService {
    public User createUser(User user) {
        // åªè´Ÿè´£ç”¨æˆ·ä¸šåŠ¡é€»è¾‘
    }
}
```

```
// æ¶æ„çº§åˆ«ï¼šä¸€ä¸ªæœåŠ¡åªç®¡ä¸€ç±»ä¸šåŠ¡
ç”¨æˆ·æœåŠ¡ â”€â”€â”€â”€â†’ åªå¤„ç†ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†
è®¢å•æœåŠ¡ â”€â”€â”€â”€â†’ åªå¤„ç†è®¢å•åˆ›å»ºã€æŸ¥è¯¢ã€çŠ¶æ€æ›´æ–°  
æ”¯ä»˜æœåŠ¡ â”€â”€â”€â”€â†’ åªå¤„ç†æ”¯ä»˜ã€é€€æ¬¾ã€å¯¹è´¦
é€šçŸ¥æœåŠ¡ â”€â”€â”€â”€â†’ åªå¤„ç†é‚®ä»¶ã€çŸ­ä¿¡ã€æ¨é€é€šçŸ¥
```

**ğŸ”¸ å¼€é—­åŸåˆ™(OCP)çš„ç³»ç»Ÿçº§ä½“ç°**

> **æ ¸å¿ƒæ€æƒ³**ï¼šç³»ç»Ÿåº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚æ–°éœ€æ±‚é€šè¿‡å¢åŠ æ–°ç»„ä»¶æ¥å®ç°ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ç°æœ‰ç»„ä»¶ã€‚

```java
// ä»£ç çº§åˆ«ï¼šé€šè¿‡æ¥å£æ‰©å±•åŠŸèƒ½
public interface PaymentProcessor {
    void processPayment(PaymentRequest request);
}

// æ–°å¢æ”¯ä»˜æ–¹å¼æ—¶ï¼Œä¸ä¿®æ”¹ç°æœ‰ä»£ç ï¼Œåªå¢åŠ æ–°å®ç°
public class AlipayProcessor implements PaymentProcessor { }
public class WechatPayProcessor implements PaymentProcessor { }
public class CreditCardProcessor implements PaymentProcessor { }
```

```
// æ¶æ„çº§åˆ«ï¼šé€šè¿‡æ–°æœåŠ¡æ‰©å±•åŠŸèƒ½
ç°æœ‰ç³»ç»Ÿï¼šç”¨æˆ·æœåŠ¡ + è®¢å•æœåŠ¡ + æ”¯ä»˜æœåŠ¡
æ–°éœ€æ±‚ï¼šæ·»åŠ ç§¯åˆ†åŠŸèƒ½
è§£å†³æ–¹æ¡ˆï¼šæ–°å¢ç§¯åˆ†æœåŠ¡ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ä¸ç°æœ‰æœåŠ¡é€šä¿¡
         ä¸ä¿®æ”¹ç°æœ‰æœåŠ¡çš„ä»£ç 
```

### 4.2 é«˜å†…èšä½è€¦åˆåœ¨æ¶æ„ä¸­çš„ä½“ç°


**ğŸ”¸ ä»€ä¹ˆæ˜¯é«˜å†…èšä½è€¦åˆ**

> **é€šä¿—è§£é‡Š**ï¼šé«˜å†…èšå°±æ˜¯ç›¸å…³çš„åŠŸèƒ½èšåœ¨ä¸€èµ·ï¼Œä½è€¦åˆå°±æ˜¯ä¸ç›¸å…³çš„åŠŸèƒ½åˆ†å¼€ï¼Œå½¼æ­¤ä¾èµ–å°½é‡å°‘ã€‚å°±åƒç»„ç»‡å…¬å¸ä¸€æ ·ï¼Œç›¸å…³éƒ¨é—¨æ”¾åœ¨ä¸€èµ·åŠå…¬ï¼Œä¸åŒéƒ¨é—¨ä¹‹é—´åªé€šè¿‡æ­£å¼æµç¨‹äº¤æµã€‚

**ğŸ“Š å†…èšåº¦å’Œè€¦åˆåº¦çš„è¡¨ç°**

```
é«˜å†…èšçš„æœåŠ¡è®¾è®¡ï¼š

ç”¨æˆ·æœåŠ¡å†…éƒ¨ï¼š
â”œâ”€â”€ ç”¨æˆ·æ³¨å†Œ
â”œâ”€â”€ ç”¨æˆ·ç™»å½•  
â”œâ”€â”€ ç”¨æˆ·ä¿¡æ¯ç®¡ç†
â”œâ”€â”€ ç”¨æˆ·æƒé™éªŒè¯
â””â”€â”€ ç”¨æˆ·çŠ¶æ€ç®¡ç†
æ‰€æœ‰åŠŸèƒ½éƒ½å›´ç»•"ç”¨æˆ·"è¿™ä¸ªæ ¸å¿ƒæ¦‚å¿µ

ä½è€¦åˆçš„æœåŠ¡é€šä¿¡ï¼š
ç”¨æˆ·æœåŠ¡ â”€â”€APIè°ƒç”¨â”€â”€â†’ è®¢å•æœåŠ¡
     â†•                    â†•
æ¶ˆæ¯é˜Ÿåˆ— â†â”€â”€äº‹ä»¶é€šçŸ¥â”€â”€â†’ é€šçŸ¥æœåŠ¡
æœåŠ¡é—´åªé€šè¿‡æ˜ç¡®å®šä¹‰çš„æ¥å£é€šä¿¡
```

```java
// é«˜å†…èšçš„æœåŠ¡è®¾è®¡
@Service
public class UserService {
    // æ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘éƒ½åœ¨è¿™é‡Œ
    public User register(UserRegisterRequest request) { }
    public User login(LoginRequest request) { }
    public User updateProfile(Long userId, UpdateRequest request) { }
    public void changePassword(Long userId, String newPassword) { }
    // è¿™äº›æ–¹æ³•éƒ½å›´ç»•ç”¨æˆ·è¿™ä¸ªæ ¸å¿ƒæ¦‚å¿µ
}

// ä½è€¦åˆçš„æœåŠ¡é€šä¿¡
@RestController
public class OrderController {
    @Autowired
    private OrderService orderService;
    @Autowired
    private UserServiceClient userServiceClient; // é€šè¿‡æ¥å£è°ƒç”¨
    
    @PostMapping("/orders")
    public Order createOrder(@RequestBody OrderRequest request) {
        // é€šè¿‡APIè°ƒç”¨ç”¨æˆ·æœåŠ¡ï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®ç”¨æˆ·æ•°æ®åº“
        User user = userServiceClient.getUser(request.getUserId());
        return orderService.createOrder(user, request);
    }
}
```

### 4.3 DRYåŸåˆ™çš„æ¶æ„çº§åº”ç”¨


**ğŸ”¸ ä»£ç çº§åˆ«çš„DRY(Don't Repeat Yourself)**

```java
// ä¸å¥½çš„åšæ³•ï¼šé‡å¤ä»£ç 
public class UserController {
    public User getUser(Long id) {
        if (id == null || id <= 0) {
            throw new IllegalArgumentException("IDæ— æ•ˆ");
        }
        // æŸ¥è¯¢ç”¨æˆ·...
    }
}

public class OrderController {
    public Order getOrder(Long id) {
        if (id == null || id <= 0) {  // é‡å¤çš„éªŒè¯é€»è¾‘
            throw new IllegalArgumentException("IDæ— æ•ˆ");
        }
        // æŸ¥è¯¢è®¢å•...
    }
}

// å¥½çš„åšæ³•ï¼šæŠ½å–å…¬å…±æ–¹æ³•
public class ValidationUtils {
    public static void validateId(Long id) {
        if (id == null || id <= 0) {
            throw new IllegalArgumentException("IDæ— æ•ˆ");
        }
    }
}
```

**ğŸ”¸ æ¶æ„çº§åˆ«çš„DRYåº”ç”¨**

```
æ¶æ„çº§åˆ«é¿å…é‡å¤ï¼š

ä¸å¥½çš„è®¾è®¡ï¼š
ç”¨æˆ·æœåŠ¡ â”€â”€â†’ è‡ªå·±å®ç°æ—¥å¿—è®°å½•
è®¢å•æœåŠ¡ â”€â”€â†’ è‡ªå·±å®ç°æ—¥å¿—è®°å½•  
æ”¯ä»˜æœåŠ¡ â”€â”€â†’ è‡ªå·±å®ç°æ—¥å¿—è®°å½•
(æ¯ä¸ªæœåŠ¡éƒ½é‡å¤å®ç°ç›¸åŒçš„åŸºç¡€åŠŸèƒ½)

å¥½çš„è®¾è®¡ï¼š
ç”¨æˆ·æœåŠ¡ â”€â”€â†’ è°ƒç”¨æ—¥å¿—æœåŠ¡
è®¢å•æœåŠ¡ â”€â”€â†’ è°ƒç”¨æ—¥å¿—æœåŠ¡
æ”¯ä»˜æœåŠ¡ â”€â”€â†’ è°ƒç”¨æ—¥å¿—æœåŠ¡
     â†“           â†“        â†“
        å…±äº«çš„æ—¥å¿—æœåŠ¡
(å…¬å…±åŠŸèƒ½æŠ½å–æˆç‹¬ç«‹æœåŠ¡)
```

### 4.4 æ¶æ„è®¾è®¡ä¸­çš„å…¶ä»–é‡è¦åŸåˆ™


**ğŸ”§ æœ€å°çŸ¥è¯†åŸåˆ™(è¿ªç±³ç‰¹æ³•åˆ™)**

> **æ ¸å¿ƒæ€æƒ³**ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ã€‚åœ¨æ¶æ„ä¸­è¡¨ç°ä¸ºæœåŠ¡é—´åº”è¯¥æœ€å°åŒ–ä¾èµ–å…³ç³»ã€‚

```java
// è¿åæœ€å°çŸ¥è¯†åŸåˆ™
public class OrderService {
    public void processOrder(Order order) {
        // ç›´æ¥è®¿é—®ç”¨æˆ·çš„å†…éƒ¨å±æ€§
        User user = order.getUser();
        Address address = user.getProfile().getAddress();
        if (address.getCity().equals("åŒ—äº¬")) {
            // å¤„ç†é€»è¾‘...
        }
    }
}

// éµå¾ªæœ€å°çŸ¥è¯†åŸåˆ™
public class OrderService {
    public void processOrder(Order order) {
        // é€šè¿‡ç”¨æˆ·æœåŠ¡æä¾›çš„æ–¹æ³•
        boolean isBeiJingUser = userService.isUserInCity(order.getUserId(), "åŒ—äº¬");
        if (isBeiJingUser) {
            // å¤„ç†é€»è¾‘...
        }
    }
}
```

**âš¡ æ€§èƒ½ä¸å¯ç»´æŠ¤æ€§çš„å¹³è¡¡**

```
æ¶æ„è®¾è®¡ä¸­çš„æƒè¡¡ï¼š

æ€§èƒ½ä¼˜å…ˆ â†â†’ å¯ç»´æŠ¤æ€§ä¼˜å…ˆ
    â†“              â†“
 ç´§è€¦åˆè®¾è®¡      æ¾è€¦åˆè®¾è®¡
    â†“              â†“
 ç›´æ¥è°ƒç”¨        æ¥å£è°ƒç”¨
    â†“              â†“
 æ›´å¿«çš„å“åº”      æ›´å¥½çš„æ‰©å±•æ€§
```

---

## 5. ğŸ¯ å®æˆ˜æ¡ˆä¾‹ï¼šæ€ç»´æ¼”è¿›ä¹‹è·¯


### 5.1 æ¡ˆä¾‹èƒŒæ™¯ï¼šåœ¨çº¿æ•™è‚²å¹³å°çš„æ¶æ„æ¼”è¿›


> **é¡¹ç›®æ¦‚è¿°**ï¼šä¸€ä¸ªåœ¨çº¿æ•™è‚²å¹³å°ï¼Œä»æœ€åˆçš„å°å‹ç½‘ç«™å‘å±•ä¸ºæœåŠ¡ç™¾ä¸‡ç”¨æˆ·çš„å¤§å‹å¹³å°ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„æ¶æ„æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ¼”è¿›çš„ã€‚

**ğŸŒ± ç¬¬ä¸€é˜¶æ®µï¼šç®€å•çš„å•ä½“åº”ç”¨**

**åœºæ™¯**ï¼šåˆšå¼€å§‹åªæœ‰å‡ åƒç”¨æˆ·ï¼ŒåŠŸèƒ½ç®€å•

```java
// æœ€åˆçš„å•ä½“åº”ç”¨ç»“æ„
@SpringBootApplication
public class EducationPlatformApplication {
    public static void main(String[] args) {
        SpringApplication.run(EducationPlatformApplication.class, args);
    }
}

// æ‰€æœ‰åŠŸèƒ½éƒ½åœ¨ä¸€ä¸ªControlleré‡Œ
@RestController
public class PlatformController {
    @Autowired UserService userService;
    @Autowired CourseService courseService;
    @Autowired OrderService orderService;
    
    // ç”¨æˆ·ç›¸å…³
    @PostMapping("/register")
    public User register(@RequestBody RegisterRequest request) {
        return userService.register(request);
    }
    
    // è¯¾ç¨‹ç›¸å…³
    @GetMapping("/courses")
    public List<Course> getCourses() {
        return courseService.getAllCourses();
    }
    
    // è®¢å•ç›¸å…³
    @PostMapping("/orders")
    public Order createOrder(@RequestBody OrderRequest request) {
        return orderService.createOrder(request);
    }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… **å¼€å‘å¿«é€Ÿ**ï¼šä¸€ä¸ªäººå°±èƒ½æå®šæ‰€æœ‰åŠŸèƒ½
- âœ… **éƒ¨ç½²ç®€å•**ï¼šä¸€ä¸ªjaråŒ…æå®š
- âŒ **åŠŸèƒ½æœ‰é™**ï¼šåªæœ‰åŸºæœ¬çš„ç”¨æˆ·ã€è¯¾ç¨‹ã€è®¢å•åŠŸèƒ½

### 5.2 ç¬¬äºŒé˜¶æ®µï¼šåˆ†å±‚æ¶æ„çš„å¼•å…¥


**åœºæ™¯**ï¼šç”¨æˆ·å¢é•¿åˆ°å‡ ä¸‡äººï¼Œå›¢é˜Ÿæ‰©å¤§åˆ°5-6äººï¼Œä»£ç å¼€å§‹æ··ä¹±

**ğŸ—ï¸ é‡æ„ä¸ºåˆ†å±‚æ¶æ„**

```
åˆ†å±‚æ¶æ„è®¾è®¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Webå±‚(Controller)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ä¸šåŠ¡å±‚(Service)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ•°æ®å±‚(Repository)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ•°æ®åº“(MySQL)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
// Webå±‚ï¼šåªå¤„ç†HTTPè¯·æ±‚
@RestController
public class UserController {
    @Autowired
    private UserService userService;
    
    @PostMapping("/users")
    public ResponseEntity<User> createUser(@RequestBody CreateUserRequest request) {
        User user = userService.createUser(request);
        return ResponseEntity.ok(user);
    }
}

// ä¸šåŠ¡å±‚ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
@Service
@Transactional
public class UserService {
    @Autowired
    private UserRepository userRepository;
    @Autowired
    private EmailService emailService;
    
    public User createUser(CreateUserRequest request) {
        // ä¸šåŠ¡éªŒè¯
        if (userRepository.existsByEmail(request.getEmail())) {
            throw new UserAlreadyExistsException("é‚®ç®±å·²å­˜åœ¨");
        }
        
        // åˆ›å»ºç”¨æˆ·
        User user = new User();
        user.setEmail(request.getEmail());
        user.setPassword(hashPassword(request.getPassword()));
        user = userRepository.save(user);
        
        // å‘é€æ¬¢è¿é‚®ä»¶
        emailService.sendWelcomeEmail(user);
        
        return user;
    }
}

// æ•°æ®å±‚ï¼šåªè´Ÿè´£æ•°æ®è®¿é—®
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    boolean existsByEmail(String email);
    Optional<User> findByEmail(String email);
}
```

**æ”¹è¿›æ•ˆæœ**ï¼š
- âœ… **èŒè´£æ¸…æ™°**ï¼šæ¯ä¸€å±‚åªåšè‡ªå·±çš„äº‹
- âœ… **ä¾¿äºæµ‹è¯•**ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•æ¯ä¸€å±‚
- âœ… **ä¾¿äºç»´æŠ¤**ï¼šä¿®æ”¹æ•°æ®åº“ä¸å½±å“ä¸šåŠ¡é€»è¾‘
- âœ… **å›¢é˜Ÿåä½œ**ï¼šä¸åŒäººå¯ä»¥è´Ÿè´£ä¸åŒå±‚

### 5.3 ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å—åŒ–æ‹†åˆ†


**åœºæ™¯**ï¼šç”¨æˆ·è¾¾åˆ°50ä¸‡ï¼Œå›¢é˜Ÿæ‰©å¤§åˆ°20äººï¼Œå¼€å§‹å‡ºç°æ€§èƒ½ç“¶é¢ˆ

**ğŸ”§ æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†**

```
æ¨¡å—åŒ–æ‹†åˆ†ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ¨¡å—    â”‚  è¯¾ç¨‹æ¨¡å—    â”‚  è®¢å•æ¨¡å—    â”‚  æ”¯ä»˜æ¨¡å—    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚UserControllerâ”‚CourseControllerâ”‚OrderControllerâ”‚PayControllerâ”‚
â”‚UserService   â”‚CourseService   â”‚OrderService   â”‚PayService   â”‚
â”‚UserRepositoryâ”‚CourseRepositoryâ”‚OrderRepositoryâ”‚PayRepositoryâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
                   å…±äº«æ•°æ®åº“
```

```java
// ç”¨æˆ·æ¨¡å—
@RestController
@RequestMapping("/api/users")
public class UserController {
    @Autowired private UserService userService;
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}

// è¯¾ç¨‹æ¨¡å—  
@RestController
@RequestMapping("/api/courses")
public class CourseController {
    @Autowired private CourseService courseService;
    
    @GetMapping
    public List<Course> getCourses() {
        return courseService.getAllCourses();
    }
}

// è®¢å•æ¨¡å—
@RestController
@RequestMapping("/api/orders") 
public class OrderController {
    @Autowired private OrderService orderService;
    @Autowired private UserService userService;     // è·¨æ¨¡å—è°ƒç”¨
    @Autowired private CourseService courseService; // è·¨æ¨¡å—è°ƒç”¨
    
    @PostMapping
    public Order createOrder(@RequestBody OrderRequest request) {
        User user = userService.findById(request.getUserId());
        Course course = courseService.findById(request.getCourseId());
        return orderService.createOrder(user, course);
    }
}
```

**é‡åˆ°çš„é—®é¢˜**ï¼š
- âŒ **æ¨¡å—è€¦åˆ**ï¼šè®¢å•æ¨¡å—ä¾èµ–ç”¨æˆ·å’Œè¯¾ç¨‹æ¨¡å—
- âŒ **æ•°æ®åº“å‹åŠ›**ï¼šæ‰€æœ‰æ¨¡å—å…±äº«ä¸€ä¸ªæ•°æ®åº“
- âŒ **éƒ¨ç½²å›°éš¾**ï¼šä¸€ä¸ªæ¨¡å—å‡ºé—®é¢˜ï¼Œæ•´ä¸ªåº”ç”¨éƒ½è¦é‡æ–°éƒ¨ç½²

### 5.4 ç¬¬å››é˜¶æ®µï¼šå¾®æœåŠ¡æ¶æ„


**åœºæ™¯**ï¼šç”¨æˆ·çªç ´100ä¸‡ï¼Œå›¢é˜Ÿè¶…è¿‡50äººï¼Œéœ€è¦ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²

**ğŸŒ æ‹†åˆ†ä¸ºå¾®æœåŠ¡**

```
å¾®æœåŠ¡æ¶æ„å›¾ï¼š

              APIç½‘å…³
                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“         â†“         â†“         â†“       â†“
ç”¨æˆ·æœåŠ¡   è¯¾ç¨‹æœåŠ¡   è®¢å•æœåŠ¡   æ”¯ä»˜æœåŠ¡  é€šçŸ¥æœåŠ¡
    â†“         â†“         â†“         â†“       â†“
ç”¨æˆ·DB    è¯¾ç¨‹DB     è®¢å•DB     æ”¯ä»˜DB   æ¶ˆæ¯é˜Ÿåˆ—
```

```java
// ç”¨æˆ·æœåŠ¡ - ç‹¬ç«‹çš„Spring Bootåº”ç”¨
@SpringBootApplication
@EnableEurekaClient
public class UserServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }
}

@RestController
public class UserController {
    @Autowired private UserService userService;
    
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}

// è®¢å•æœåŠ¡ - é€šè¿‡HTTPè°ƒç”¨å…¶ä»–æœåŠ¡
@RestController
public class OrderController {
    @Autowired private OrderService orderService;
    @Autowired private UserServiceClient userServiceClient;   // Feignå®¢æˆ·ç«¯
    @Autowired private CourseServiceClient courseServiceClient;
    
    @PostMapping("/orders")
    public Order createOrder(@RequestBody OrderRequest request) {
        // è¿œç¨‹è°ƒç”¨ç”¨æˆ·æœåŠ¡
        User user = userServiceClient.getUser(request.getUserId());
        if (user == null) {
            throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        
        // è¿œç¨‹è°ƒç”¨è¯¾ç¨‹æœåŠ¡
        Course course = courseServiceClient.getCourse(request.getCourseId());
        if (course == null) {
            throw new CourseNotFoundException("è¯¾ç¨‹ä¸å­˜åœ¨");
        }
        
        return orderService.createOrder(user, course);
    }
}

// Feignå®¢æˆ·ç«¯å®šä¹‰
@FeignClient(name = "user-service")
public interface UserServiceClient {
    @GetMapping("/users/{id}")
    User getUser(@PathVariable("id") Long id);
}
```

**å¾®æœåŠ¡å¸¦æ¥çš„å¥½å¤„**ï¼š
- âœ… **ç‹¬ç«‹å¼€å‘**ï¼šæ¯ä¸ªå›¢é˜Ÿè´Ÿè´£ä¸€ä¸ªæœåŠ¡
- âœ… **ç‹¬ç«‹éƒ¨ç½²**ï¼šæœåŠ¡å¯ä»¥å•ç‹¬å‘å¸ƒ
- âœ… **æŠ€æœ¯è‡ªç”±**ï¼šä¸åŒæœåŠ¡å¯ä»¥ç”¨ä¸åŒæŠ€æœ¯
- âœ… **æ•…éšœéš”ç¦»**ï¼šä¸€ä¸ªæœåŠ¡æŒ‚äº†ä¸å½±å“å…¶ä»–æœåŠ¡

**å¾®æœåŠ¡é¢ä¸´çš„æŒ‘æˆ˜**ï¼š
- âŒ **åˆ†å¸ƒå¼å¤æ‚æ€§**ï¼šç½‘ç»œè°ƒç”¨ã€æ•°æ®ä¸€è‡´æ€§
- âŒ **è¿ç»´å¤æ‚**ï¼šéœ€è¦ç®¡ç†å¤šä¸ªæœåŠ¡
- âŒ **è°ƒè¯•å›°éš¾**ï¼šé—®é¢˜å¯èƒ½è·¨å¤šä¸ªæœåŠ¡

### 5.5 æ¶æ„æ¼”è¿›çš„å…³é”®å†³ç­–ç‚¹


**ğŸ¯ ä½•æ—¶è¿›è¡Œæ¶æ„å‡çº§**

```
æ¶æ„å‡çº§çš„ä¿¡å·ï¼š

ä»£ç å¤æ‚åº¦ â”€â”€â”€â”€â†’ ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½å½±å“å¤šä¸ªåœ°æ–¹
å›¢é˜Ÿåä½œ   â”€â”€â”€â”€â†’ å¤šäººä¿®æ”¹åŒä¸€ä»£ç å†²çªé¢‘ç¹
æ€§èƒ½ç“¶é¢ˆ   â”€â”€â”€â”€â†’ å•ä¸€æ•°æ®åº“æˆ–æœåŠ¡æ— æ³•æ”¯æ’‘
éƒ¨ç½²å›°éš¾   â”€â”€â”€â”€â†’ å‘å¸ƒå‘¨æœŸé•¿ï¼Œå›æ»šå›°éš¾
æŠ€æœ¯é™åˆ¶   â”€â”€â”€â”€â†’ æ— æ³•é‡‡ç”¨æ–°æŠ€æœ¯æˆ–æ¡†æ¶
```

**ğŸ“Š æ¼”è¿›è¿‡ç¨‹ä¸­çš„æ€ç»´å˜åŒ–**

| **é˜¶æ®µ** | **ä¸»è¦æ€è€ƒ** | **æ ¸å¿ƒæŒ‘æˆ˜** | **è§£å†³æ–¹æ¡ˆ** |
|---------|-------------|-------------|-------------|
| **å•ä½“åº”ç”¨** | `åŠŸèƒ½å¦‚ä½•å®ç°` | `ä»£ç ç»„ç»‡æ··ä¹±` | `å¼•å…¥åˆ†å±‚æ¶æ„` |
| **åˆ†å±‚æ¶æ„** | `èŒè´£å¦‚ä½•åˆ†ç¦»` | `æ¨¡å—é—´è€¦åˆ` | `æ¨¡å—åŒ–æ‹†åˆ†` |
| **æ¨¡å—åŒ–** | `æ¨¡å—å¦‚ä½•è§£è€¦` | `å…±äº«èµ„æºå†²çª` | `æœåŠ¡åŒ–æ‹†åˆ†` |
| **å¾®æœåŠ¡** | `æœåŠ¡å¦‚ä½•åè°ƒ` | `åˆ†å¸ƒå¼å¤æ‚æ€§` | `å¹³å°åŒ–æ”¯æ’‘` |

---

## 6. ğŸ› ï¸ ä»æ¨¡å¼åˆ°ç³»ç»Ÿçš„å®è·µæ–¹æ³•


### 6.1 è®¾è®¡æ¨¡å¼åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨


**ğŸ”¸ å•ä¾‹æ¨¡å¼çš„æ¶æ„çº§åº”ç”¨**

ä»ç±»çº§åˆ«çš„å•ä¾‹åˆ°ç³»ç»Ÿçº§åˆ«çš„å•ä¾‹æœåŠ¡ï¼š

```java
// ç±»çº§åˆ«çš„å•ä¾‹æ¨¡å¼
public class ConfigManager {
    private static ConfigManager instance;
    private static final Object lock = new Object();
    
    private ConfigManager() {}
    
    public static ConfigManager getInstance() {
        if (instance == null) {
            synchronized (lock) {
                if (instance == null) {
                    instance = new ConfigManager();
                }
            }
        }
        return instance;
    }
}
```

```
// ç³»ç»Ÿçº§åˆ«çš„å•ä¾‹æœåŠ¡
é…ç½®æœåŠ¡(Config Service) â”€â”€â”€â”€â†’ æ•´ä¸ªç³»ç»Ÿåªæœ‰ä¸€ä¸ªé…ç½®ä¸­å¿ƒ
æ³¨å†Œä¸­å¿ƒ(Registry) â”€â”€â”€â”€â†’ æ‰€æœ‰æœåŠ¡éƒ½æ³¨å†Œåˆ°åŒä¸€ä¸ªæ³¨å†Œä¸­å¿ƒ
APIç½‘å…³(Gateway) â”€â”€â”€â”€â†’ ç»Ÿä¸€çš„æµé‡å…¥å£
```

**ğŸ”¸ è§‚å¯Ÿè€…æ¨¡å¼çš„äº‹ä»¶é©±åŠ¨æ¶æ„**

```java
// ç±»çº§åˆ«çš„è§‚å¯Ÿè€…æ¨¡å¼
public class OrderService {
    private List<OrderListener> listeners = new ArrayList<>();
    
    public void addListener(OrderListener listener) {
        listeners.add(listener);
    }
    
    public void createOrder(Order order) {
        // åˆ›å»ºè®¢å•
        orderRepository.save(order);
        
        // é€šçŸ¥è§‚å¯Ÿè€…
        for (OrderListener listener : listeners) {
            listener.onOrderCreated(order);
        }
    }
}
```

```
// ç³»ç»Ÿçº§åˆ«çš„äº‹ä»¶é©±åŠ¨æ¶æ„
è®¢å•æœåŠ¡ â”€â”€å‘å¸ƒäº‹ä»¶â”€â”€â†’ æ¶ˆæ¯é˜Ÿåˆ— â”€â”€è®¢é˜…äº‹ä»¶â”€â”€â†’ åº“å­˜æœåŠ¡
                                    â”œâ”€â”€è®¢é˜…äº‹ä»¶â”€â”€â†’ æ”¯ä»˜æœåŠ¡  
                                    â””â”€â”€è®¢é˜…äº‹ä»¶â”€â”€â†’ é€šçŸ¥æœåŠ¡

äº‹ä»¶ï¼šOrderCreatedEvent
è®¢é˜…è€…ï¼šInventoryService(å‡åº“å­˜)ã€PaymentService(åˆ›å»ºæ”¯ä»˜)ã€NotificationService(å‘é€é€šçŸ¥)
```

### 6.2 åˆ†å±‚æ€æƒ³çš„ç³»ç»ŸåŒ–å®è·µ


**ğŸ—ï¸ ä»ä»£ç åˆ†å±‚åˆ°ç³»ç»Ÿåˆ†å±‚**

```java
// ä»£ç å±‚æ¬¡çš„åˆ†å±‚
// Controllerå±‚
@RestController
public class UserController {
    @Autowired private UserService userService;
    
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}

// Serviceå±‚
@Service
public class UserService {
    @Autowired private UserRepository userRepository;
    
    public User findById(Long id) {
        return userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨"));
    }
}

// Repositoryå±‚
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findById(Long id);
}
```

```
// ç³»ç»Ÿå±‚æ¬¡çš„åˆ†å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯å±‚(Frontend)                    â”‚ â† React/Vueåº”ç”¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ç½‘å…³å±‚(Gateway)                     â”‚ â† APIç½‘å…³ã€è´Ÿè½½å‡è¡¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æœåŠ¡å±‚(Services)                    â”‚ â† å¾®æœåŠ¡é›†ç¾¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ•°æ®å±‚(Data)                        â”‚ â† æ•°æ®åº“ã€ç¼“å­˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              åŸºç¡€è®¾æ–½å±‚(Infrastructure)           â”‚ â† æœåŠ¡å™¨ã€ç½‘ç»œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ä»å±€éƒ¨ä¼˜åŒ–åˆ°å…¨å±€ä¼˜åŒ–


**ğŸ”¸ æ€§èƒ½ä¼˜åŒ–æ€ç»´çš„æ¼”è¿›**

```java
// å±€éƒ¨ä¼˜åŒ–ï¼šå•ä¸ªæ–¹æ³•çš„æ€§èƒ½ä¼˜åŒ–
@Service
public class UserService {
    @Cacheable("users")  // ç¼“å­˜ä¼˜åŒ–
    public User findById(Long id) {
        return userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨"));
    }
    
    @Async  // å¼‚æ­¥ä¼˜åŒ–
    public void sendWelcomeEmail(User user) {
        emailService.sendWelcomeEmail(user);
    }
}
```

```
// å…¨å±€ä¼˜åŒ–ï¼šç³»ç»Ÿçº§æ€§èƒ½ä¼˜åŒ–

å®¢æˆ·ç«¯ â”€â”€â†’ CDN â”€â”€â†’ è´Ÿè½½å‡è¡¡ â”€â”€â†’ APIç½‘å…³ â”€â”€â†’ å¾®æœåŠ¡é›†ç¾¤
                                        â†“
                                   Redisç¼“å­˜
                                        â†“
                                   æ•°æ®åº“é›†ç¾¤

ä¼˜åŒ–ç­–ç•¥ï¼š
1. CDNåŠ é€Ÿé™æ€èµ„æº
2. è´Ÿè½½å‡è¡¡åˆ†æ•£è¯·æ±‚  
3. APIç½‘å…³ç»Ÿä¸€é™æµ
4. Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
5. æ•°æ®åº“è¯»å†™åˆ†ç¦»
```

### 6.4 ç»„åˆæ¨¡å¼åœ¨å¾®æœåŠ¡ä¸­çš„åº”ç”¨


**ğŸ”¸ æœåŠ¡ç¼–æ’å’Œç»„åˆ**

```java
// å•ä¸ªæœåŠ¡çš„ç®€å•æ“ä½œ
@RestController
public class UserController {
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}

// å¤æ‚ä¸šåŠ¡çš„æœåŠ¡ç»„åˆ
@RestController
public class OrderController {
    @Autowired private OrderService orderService;
    @Autowired private UserServiceClient userServiceClient;
    @Autowired private CourseServiceClient courseServiceClient;
    @Autowired private PaymentServiceClient paymentServiceClient;
    @Autowired private InventoryServiceClient inventoryServiceClient;
    
    @PostMapping("/orders")
    public OrderResult createOrder(@RequestBody OrderRequest request) {
        // 1. éªŒè¯ç”¨æˆ·
        User user = userServiceClient.getUser(request.getUserId());
        
        // 2. éªŒè¯è¯¾ç¨‹
        Course course = courseServiceClient.getCourse(request.getCourseId());
        
        // 3. æ£€æŸ¥åº“å­˜
        boolean hasStock = inventoryServiceClient.checkStock(request.getCourseId());
        
        // 4. åˆ›å»ºè®¢å•
        Order order = orderService.createOrder(user, course);
        
        // 5. åˆ›å»ºæ”¯ä»˜
        Payment payment = paymentServiceClient.createPayment(order);
        
        return new OrderResult(order, payment);
    }
}
```

### 6.5 å®è·µä¸­çš„å…³é”®å†³ç­–


**ğŸ¯ æŠ€æœ¯é€‰æ‹©çš„å†³ç­–æ¡†æ¶**

```
æŠ€æœ¯é€‰æ‹©å†³ç­–æ ‘ï¼š

æ€§èƒ½è¦æ±‚é«˜ â”€â”€â”€â”€â†’ é€‰æ‹©é«˜æ€§èƒ½è¯­è¨€(Go, Rust)
         No â†“
å¼€å‘æ•ˆç‡é‡è¦ â”€â”€â”€â”€â†’ é€‰æ‹©é«˜æ•ˆè¯­è¨€(Java, Python)
           No â†“
å›¢é˜ŸæŠ€èƒ½åŒ¹é… â”€â”€â”€â”€â†’ é€‰æ‹©å›¢é˜Ÿç†Ÿæ‚‰çš„æŠ€æœ¯
             No â†“
ç”Ÿæ€ç³»ç»Ÿå®Œå–„ â”€â”€â”€â”€â†’ é€‰æ‹©ç”Ÿæ€ä¸°å¯Œçš„æŠ€æœ¯
```

**ğŸ“Š æ¶æ„å†³ç­–è®°å½•(ADR)**

```java
// æ¶æ„å†³ç­–è®°å½•æ¨¡æ¿
/*
ADR-001: é€‰æ‹©Spring Cloudä½œä¸ºå¾®æœåŠ¡æ¡†æ¶

èƒŒæ™¯ï¼š
- éœ€è¦æ„å»ºå¾®æœåŠ¡æ¶æ„
- å›¢é˜Ÿå¯¹Springæ¡†æ¶ç†Ÿæ‚‰
- éœ€è¦å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²

å†³ç­–ï¼š
- ä½¿ç”¨Spring Cloudæ„å»ºå¾®æœåŠ¡
- ä½¿ç”¨Eurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒ
- ä½¿ç”¨Feignè¿›è¡ŒæœåŠ¡é—´é€šä¿¡

åæœï¼š
+ å¼€å‘æ•ˆç‡é«˜ï¼Œå›¢é˜Ÿä¸Šæ‰‹å¿«
+ ç”Ÿæ€å®Œå–„ï¼Œé—®é¢˜å®¹æ˜“è§£å†³
- ä¸Springç»‘å®šè¾ƒç´§
- æ€§èƒ½ç›¸æ¯”Goç­‰è¯­è¨€ç•¥ä½
*/
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ€ç»´æ¼”åŒ–ï¼šä»ä»£ç æ€ç»´åˆ°æ¶æ„æ€ç»´çš„å±‚æ¬¡æå‡
ğŸ”¸ æ¶æ„æ¼”è¿›ï¼šå•ä½“â†’åˆ†å±‚â†’å¾®æœåŠ¡çš„è‡ªç„¶å‘å±•è¿‡ç¨‹
ğŸ”¸ è®¾è®¡åŸåˆ™ï¼šSOLIDåŸåˆ™åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„æ”¾å¤§åº”ç”¨
ğŸ”¸ å¾®æœåŠ¡è®¾è®¡ï¼šç¼–ç¨‹æ€æƒ³åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ˜ å°„
ğŸ”¸ å†³ç­–æ¡†æ¶ï¼šå¦‚ä½•åœ¨ä¸åŒé˜¶æ®µé€‰æ‹©åˆé€‚çš„æ¶æ„
ğŸ”¸ å®è·µæ–¹æ³•ï¼šä»è®¾è®¡æ¨¡å¼åˆ°ç³»ç»Ÿæ¶æ„çš„åº”ç”¨è½¬åŒ–
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç¼–ç¨‹æ€æƒ³ä¸æ¶æ„è®¾è®¡çš„æœ¬è´¨å…³ç³»**

```
ç¼–ç¨‹æ€æƒ³æ˜¯æ¶æ„è®¾è®¡çš„åŸºç¡€ï¼š
å•ä¸€èŒè´£ â”€â”€â”€â”€â†’ æœåŠ¡èŒè´£æ¸…æ™°
å¼€é—­åŸåˆ™ â”€â”€â”€â”€â†’ ç³»ç»Ÿæ˜“äºæ‰©å±•
ä¾èµ–åè½¬ â”€â”€â”€â”€â†’ æœåŠ¡é—´è§£è€¦
æ¥å£éš”ç¦» â”€â”€â”€â”€â†’ APIè®¾è®¡ç²¾ç®€
```

**ğŸ”¹ æ¶æ„æ¼”è¿›çš„é©±åŠ¨å› ç´ **

```
æŠ€æœ¯é©±åŠ¨ â†â†’ ä¸šåŠ¡é©±åŠ¨
    â†“          â†“
æ–°æŠ€æœ¯å‡ºç°   ä¸šåŠ¡å¤æ‚åº¦å¢é•¿
    â†“          â†“  
æ¶æ„ä¼˜åŒ–    æ¶æ„é‡æ„
```

**ğŸ”¹ å¾®æœåŠ¡ä¸æ˜¯é“¶å¼¹**

> **å…³é”®è®¤è¯†**ï¼šå¾®æœåŠ¡è§£å†³äº†ä¸€äº›é—®é¢˜ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ–°çš„å¤æ‚æ€§ã€‚é€‰æ‹©æ¶æ„è¦åŸºäºå®é™…éœ€æ±‚ï¼Œè€Œä¸æ˜¯æŠ€æœ¯æ—¶é«¦ã€‚

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ æ¶æ„é€‰æ‹©æŒ‡å—**

```
å›¢é˜Ÿè§„æ¨¡ < 10äºº â”€â”€â”€â”€â†’ å•ä½“æ¶æ„
ä¸šåŠ¡ç›¸å¯¹ç®€å•      â”€â”€â”€â”€â†’ åˆ†å±‚æ¶æ„  
é«˜å¹¶å‘ã€å¤§å›¢é˜Ÿ    â”€â”€â”€â”€â†’ å¾®æœåŠ¡æ¶æ„
```

**ğŸ”§ å®æ–½å»ºè®®**

- **æ¸è¿›å¼æ¼”è¿›**ï¼šä¸è¦ä¸€æ­¥åˆ°ä½ï¼Œæ ¹æ®å®é™…éœ€è¦é€æ­¥æ¼”è¿›
- **ç›‘æ§å…ˆè¡Œ**ï¼šåœ¨æ¶æ„æ¼”è¿›å‰å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»  
- **å›¢é˜Ÿèƒ½åŠ›**ï¼šæ¶æ„å¤æ‚åº¦ä¸è¦è¶…è¿‡å›¢é˜Ÿçš„é©¾é©­èƒ½åŠ›
- **ä¸šåŠ¡ä¼˜å…ˆ**ï¼šæŠ€æœ¯ä¸ºä¸šåŠ¡æœåŠ¡ï¼Œä¸è¦ä¸ºäº†æŠ€æœ¯è€ŒæŠ€æœ¯

**âš ï¸ å¸¸è§è¯¯åŒº**

```
è¿‡åº¦è®¾è®¡ â”€â”€â”€â”€â†’ å°é¡¹ç›®ä½¿ç”¨å¤æ‚æ¶æ„
æŠ€æœ¯å´‡æ‹œ â”€â”€â”€â”€â†’ ç›²ç›®è¿½æ±‚æ–°æŠ€æœ¯
å¿½è§†æˆæœ¬ â”€â”€â”€â”€â†’ ä¸è€ƒè™‘ç»´æŠ¤å’Œè¿ç»´æˆæœ¬
ä¸€æ­¥åˆ°ä½ â”€â”€â”€â”€â†’ ä¸ç»è¿‡æ¸è¿›å¼æ¼”è¿›
```

### 7.4 å­¦ä¹ æˆé•¿è·¯å¾„


**ğŸ“š çŸ¥è¯†ä½“ç³»å»ºè®¾**

```
åŸºç¡€ç¼–ç¨‹ â”€â”€â”€â”€â†’ è®¾è®¡æ¨¡å¼ â”€â”€â”€â”€â†’ æ¶æ„è®¾è®¡
    â†“              â†“              â†“
å†™å¥½ä»£ç        ç»„ç»‡å¥½ä»£ç        è®¾è®¡å¥½ç³»ç»Ÿ
    â†“              â†“              â†“
å±€éƒ¨ä¼˜åŒ–       æ¨¡å—ä¼˜åŒ–         å…¨å±€ä¼˜åŒ–
```

**ğŸ¯ å®è·µèƒ½åŠ›åŸ¹å…»**

- **åŠ¨æ‰‹å®è·µ**ï¼šä»ç®€å•é¡¹ç›®å¼€å§‹ï¼Œé€æ­¥å®è·µä¸åŒæ¶æ„
- **æ¡ˆä¾‹å­¦ä¹ **ï¼šç ”ç©¶å¼€æºé¡¹ç›®çš„æ¶æ„è®¾è®¡
- **æ€»ç»“åæ€**ï¼šæ¯ä¸ªé¡¹ç›®åæ€»ç»“æ¶æ„å†³ç­–çš„å¾—å¤±
- **æŒç»­å­¦ä¹ **ï¼šè·Ÿä¸ŠæŠ€æœ¯å‘å±•ï¼Œä½†ä¿æŒç†æ€§åˆ¤æ–­

**ğŸ¤ å›¢é˜Ÿåä½œèƒ½åŠ›**

- **æ²Ÿé€šè¡¨è¾¾**ï¼šèƒ½å¤Ÿæ¸…æ™°è¡¨è¾¾æ¶æ„è®¾è®¡æ€è·¯
- **æ–‡æ¡£è®°å½•**ï¼šè®°å½•æ¶æ„å†³ç­–å’Œæ¼”è¿›è¿‡ç¨‹
- **çŸ¥è¯†åˆ†äº«**ï¼šåœ¨å›¢é˜Ÿä¸­åˆ†äº«æ¶æ„ç»éªŒ
- **ä»£ç å®¡æŸ¥**ï¼šé€šè¿‡ä»£ç å®¡æŸ¥ä¼ æ’­æ¶æ„æ€æƒ³

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
ç¼–ç¨‹æ€æƒ³æ˜¯æ ¹åŸºï¼Œæ¶æ„è®¾è®¡æ˜¯å»¶ä¼¸
å•ä½“åˆ†å±‚åˆ°å¾®æœåŠ¡ï¼Œæ¼”è¿›è·¯å¾„è¦æ¸…æ™°
è®¾è®¡åŸåˆ™è¦æ”¾å¤§ï¼Œç³»ç»Ÿå±‚é¢æ¥åº”ç”¨
ä¸šåŠ¡é©±åŠ¨åšå†³ç­–ï¼ŒæŠ€æœ¯æœåŠ¡äºç›®æ ‡
æ¸è¿›æ¼”è¿›æœ€ç¨³å¦¥ï¼Œç›‘æ§å®Œå–„æ˜¯ä¿éšœ
```