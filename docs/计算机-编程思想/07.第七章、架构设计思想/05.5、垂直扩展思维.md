---
title: 5ã€å‚ç›´æ‰©å±•æ€ç»´
---
## ğŸ“š ç›®å½•

1. [å‚ç›´æ‰©å±•åŸºæœ¬æ¦‚å¿µ](#1-å‚ç›´æ‰©å±•åŸºæœ¬æ¦‚å¿µ)
2. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#2-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
3. [èµ„æºåˆ©ç”¨ç‡ä¼˜åŒ–](#3-èµ„æºåˆ©ç”¨ç‡ä¼˜åŒ–)
4. [ç“¶é¢ˆè¯†åˆ«ä¸è§£å†³](#4-ç“¶é¢ˆè¯†åˆ«ä¸è§£å†³)
5. [ç¡¬ä»¶å‡çº§ç­–ç•¥](#5-ç¡¬ä»¶å‡çº§ç­–ç•¥)
6. [æ‰©å±•æ€§è¯„ä¼°](#6-æ‰©å±•æ€§è¯„ä¼°)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ å‚ç›´æ‰©å±•åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å‚ç›´æ‰©å±•


**`å‚ç›´æ‰©å±•ï¼ˆScale Upï¼‰`**ï¼šé€šè¿‡å¢å¼ºå•å°æœåŠ¡å™¨çš„ç¡¬ä»¶é…ç½®æ¥æå‡ç³»ç»Ÿæ€§èƒ½çš„æ–¹æ³•ã€‚

```
å‚ç›´æ‰©å±•ç¤ºæ„å›¾ï¼š

åŸå§‹æœåŠ¡å™¨ï¼š              å‡çº§åæœåŠ¡å™¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPU: 4æ ¸     â”‚    =>     â”‚ CPU: 16æ ¸    â”‚
â”‚ å†…å­˜: 8GB    â”‚           â”‚ å†…å­˜: 64GB   â”‚
â”‚ ç¡¬ç›˜: 500GB  â”‚           â”‚ ç¡¬ç›˜: 2TB SSDâ”‚
â”‚ ç½‘å¡: 1GB    â”‚           â”‚ ç½‘å¡: 10GB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€§èƒ½æå‡ï¼šå¤„ç†èƒ½åŠ›å¢å¼º4-8å€
```

### 1.2 å‚ç›´æ‰©å±• vs æ°´å¹³æ‰©å±•


| å¯¹æ¯”ç»´åº¦ | **å‚ç›´æ‰©å±•(Scale Up)** | **æ°´å¹³æ‰©å±•(Scale Out)** |
|---------|----------------------|------------------------|
| `åŸºæœ¬æ€è·¯` | å‡çº§å•æœºç¡¬ä»¶é…ç½® | å¢åŠ æ›´å¤šæœåŠ¡å™¨ |
| `å®æ–½éš¾åº¦` | â­â­ ç›¸å¯¹ç®€å• | â­â­â­â­ è¾ƒå¤æ‚ |
| `æˆæœ¬ç‰¹ç‚¹` | ğŸ’°ğŸ’°ğŸ’° ç¡¬ä»¶æˆæœ¬é«˜ | ğŸ’°ğŸ’° æ€»ä½“æˆæœ¬å¯æ§ |
| `æ‰©å±•ä¸Šé™` | ğŸ”’ ç¡¬ä»¶ç‰©ç†é™åˆ¶ | â™¾ï¸ ç†è®ºä¸Šæ— é™ |
| `å¯ç”¨æ€§` | âŒ å•ç‚¹æ•…éšœé£é™© | âœ… é«˜å¯ç”¨æ€§ |

### 1.3 å‚ç›´æ‰©å±•çš„é€‚ç”¨åœºæ™¯


**âœ… é€‚åˆå‚ç›´æ‰©å±•çš„æƒ…å†µ**ï¼š
- **å•ä½“åº”ç”¨**ï¼šåº”ç”¨æ¶æ„ä¸æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
- **æ•°æ®åº“ç³»ç»Ÿ**ï¼šéœ€è¦å¼ºä¸€è‡´æ€§ï¼Œéš¾ä»¥æ°´å¹³åˆ†ç‰‡
- **å†…å­˜å¯†é›†å‹åº”ç”¨**ï¼šéœ€è¦å¤§é‡å†…å­˜ç©ºé—´
- **è®¡ç®—å¯†é›†å‹ä»»åŠ¡**ï¼šéœ€è¦å¼ºå¤§çš„å•æœºè®¡ç®—èƒ½åŠ›
- **å¿«é€Ÿè§£å†³æ–¹æ¡ˆ**ï¼šéœ€è¦çŸ­æ—¶é—´å†…æå‡æ€§èƒ½

**âŒ ä¸é€‚åˆå‚ç›´æ‰©å±•çš„æƒ…å†µ**ï¼š
- **é«˜å¹¶å‘Webåº”ç”¨**ï¼šç”¨æˆ·è®¿é—®é‡å·¨å¤§
- **åˆ†å¸ƒå¼ç³»ç»Ÿ**ï¼šæœ¬èº«è®¾è®¡ä¸ºåˆ†å¸ƒå¼æ¶æ„
- **æˆæœ¬æ•æ„Ÿé¡¹ç›®**ï¼šé¢„ç®—æœ‰é™çš„é¡¹ç›®
- **é«˜å¯ç”¨è¦æ±‚**ï¼šä¸èƒ½å®¹å¿å•ç‚¹æ•…éšœ

---

## 2. âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 2.1 å•æœºæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ€è·¯


**ğŸ¯ ä¼˜åŒ–é‡‘å­—å¡”æ¨¡å‹**ï¼š
```
          åº”ç”¨å±‚ä¼˜åŒ–
         /            \
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç®—æ³•ä¸æ•°æ®ç»“æ„     â”‚  â† æœ€é«˜æ€§ä»·æ¯”
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   ä»£ç é€»è¾‘ä¼˜åŒ–       â”‚  â† ä¸­ç­‰æŠ•å…¥
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   ç³»ç»Ÿé…ç½®è°ƒä¼˜       â”‚  â† ä½æˆæœ¬è§æ•ˆ
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   ç¡¬ä»¶é…ç½®å‡çº§       â”‚  â† é«˜æˆæœ¬ä½†ç›´æ¥
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          ç¡¬ä»¶å±‚ä¼˜åŒ–
```

### 2.2 CPUæ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**ğŸ”¸ CPUä¼˜åŒ–çš„å…³é”®ç‚¹**

**å¹¶å‘å¤„ç†ä¼˜åŒ–**ï¼š
```java
// âŒ é”™è¯¯ï¼šå•çº¿ç¨‹å¤„ç†å¤§é‡ä»»åŠ¡
public void processDataSlow(List<String> data) {
    for (String item : data) {
        processItem(item);  // é€ä¸ªå¤„ç†ï¼Œæ•ˆç‡ä½
    }
}

// âœ… æ­£ç¡®ï¼šå¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†
public void processDataFast(List<String> data) {
    data.parallelStream()
        .forEach(this::processItem);  // å……åˆ†åˆ©ç”¨å¤šæ ¸CPU
}
```

**ç¼“å­˜å‹å¥½çš„æ•°æ®è®¿é—®**ï¼š
```java
// âŒ é”™è¯¯ï¼šè·³è·ƒå¼è®¿é—®ï¼Œç¼“å­˜å‘½ä¸­ç‡ä½
for (int i = 0; i < 1000; i++) {
    for (int j = 0; j < 1000; j++) {
        matrix[j][i] = value;  // åˆ—ä¼˜å…ˆè®¿é—®ï¼Œç¼“å­˜ä¸å‹å¥½
    }
}

// âœ… æ­£ç¡®ï¼šè¿ç»­è®¿é—®ï¼Œç¼“å­˜å‘½ä¸­ç‡é«˜
for (int i = 0; i < 1000; i++) {
    for (int j = 0; j < 1000; j++) {
        matrix[i][j] = value;  // è¡Œä¼˜å…ˆè®¿é—®ï¼Œç¼“å­˜å‹å¥½
    }
}
```

### 2.3 å†…å­˜æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**ğŸ”¸ å†…å­˜ä¼˜åŒ–çš„æ ¸å¿ƒæ–¹æ³•**

**å¯¹è±¡å¤ç”¨å‡å°‘GCå‹åŠ›**ï¼š
```java
// âŒ é”™è¯¯ï¼šé¢‘ç¹åˆ›å»ºä¸´æ—¶å¯¹è±¡
public String processStrings(List<String> strings) {
    String result = "";
    for (String s : strings) {
        result += s + ",";  // æ¯æ¬¡éƒ½åˆ›å»ºæ–°Stringå¯¹è±¡
    }
    return result;
}

// âœ… æ­£ç¡®ï¼šå¤ç”¨StringBuilderå¯¹è±¡
public String processStrings(List<String> strings) {
    StringBuilder sb = new StringBuilder();
    for (String s : strings) {
        sb.append(s).append(",");  // å¤ç”¨åŒä¸€ä¸ªå¯¹è±¡
    }
    return sb.toString();
}
```

**å†…å­˜æ± æŠ€æœ¯**ï¼š
```java
// å¯¹è±¡æ± ç¤ºä¾‹
public class ConnectionPool {
    private final Queue<Connection> pool = new ConcurrentLinkedQueue<>();
    private final int maxSize = 10;
    
    public Connection getConnection() {
        Connection conn = pool.poll();
        return conn != null ? conn : createNewConnection();
    }
    
    public void returnConnection(Connection conn) {
        if (pool.size() < maxSize) {
            pool.offer(conn);  // å¤ç”¨è¿æ¥å¯¹è±¡
        } else {
            conn.close();      // è¶…å‡ºé™åˆ¶åˆ™å…³é—­
        }
    }
}
```

### 2.4 I/Oæ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**ğŸ”¸ ç£ç›˜I/Oä¼˜åŒ–**

| ä¼˜åŒ–æŠ€æœ¯ | **åŸç†è¯´æ˜** | **æ€§èƒ½æå‡** | **é€‚ç”¨åœºæ™¯** |
|---------|-------------|-------------|-------------|
| `SSDæ›¿æ¢HDD` | å›ºæ€ç¡¬ç›˜æ— æœºæ¢°å»¶è¿Ÿ | **10-100å€** | æ•°æ®åº“ã€ç¼“å­˜ |
| `æ‰¹é‡è¯»å†™` | å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•° | **2-5å€** | å¤§æ–‡ä»¶å¤„ç† |
| `å¼‚æ­¥I/O` | é¿å…çº¿ç¨‹é˜»å¡ç­‰å¾… | **3-10å€** | é«˜å¹¶å‘åº”ç”¨ |
| `å†…å­˜æ˜ å°„` | å‡å°‘ç”¨æˆ·æ€å†…æ ¸æ€åˆ‡æ¢ | **2-3å€** | å¤§æ–‡ä»¶è¯»å– |

```java
// å¼‚æ­¥I/Oç¤ºä¾‹
public CompletableFuture<String> readFileAsync(String filename) {
    return CompletableFuture.supplyAsync(() -> {
        try {
            return Files.readString(Paths.get(filename));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    });
}
```

---

## 3. ğŸ“Š èµ„æºåˆ©ç”¨ç‡ä¼˜åŒ–


### 3.1 èµ„æºåˆ©ç”¨ç‡çš„é‡è¦æ€§


**ğŸ’¡ ä¸ºä»€ä¹ˆè¦å…³æ³¨èµ„æºåˆ©ç”¨ç‡**ï¼š
- **æˆæœ¬æ§åˆ¶**ï¼šæé«˜åˆ©ç”¨ç‡ = é™ä½å•ä½æˆæœ¬
- **æ€§èƒ½æœ€å¤§åŒ–**ï¼šå……åˆ†å‘æŒ¥ç¡¬ä»¶æ½œåŠ›
- **å®¹é‡è§„åˆ’**ï¼šå‡†ç¡®è¯„ä¼°æ‰©å®¹éœ€æ±‚
- **æ•…éšœé¢„é˜²**ï¼šé¿å…èµ„æºè€—å°½å¯¼è‡´çš„é—®é¢˜

### 3.2 CPUåˆ©ç”¨ç‡ä¼˜åŒ–


**ğŸ”¸ CPUåˆ©ç”¨ç‡ç›‘æ§ä¸åˆ†æ**

```bash
# CPUä½¿ç”¨æƒ…å†µç›‘æ§å‘½ä»¤
top                    # å®æ—¶æŸ¥çœ‹CPUä½¿ç”¨ç‡
htop                   # æ›´å‹å¥½çš„topå·¥å…·
sar -u 1 10           # æ¯ç§’ç»Ÿè®¡CPUä½¿ç”¨ç‡ï¼ŒæŒç»­10æ¬¡
```

**CPUåˆ©ç”¨ç‡ä¼˜åŒ–ç­–ç•¥**ï¼š

```
CPUåˆ©ç”¨ç‡åˆ†æï¼š

ç†æƒ³çŠ¶æ€ï¼š        é—®é¢˜çŠ¶æ€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 75% ä¸šåŠ¡ â”‚      â”‚ 10% ä¸šåŠ¡ â”‚
â”‚ 15% ç³»ç»Ÿ â”‚      â”‚ 80% ç­‰å¾… â”‚ â† I/Oç­‰å¾…è¿‡å¤š
â”‚ 10% ç©ºé—² â”‚      â”‚ 10% ç³»ç»Ÿ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŒ–æ–¹å‘ï¼šå‡å°‘I/Oç­‰å¾…ï¼Œæé«˜CPUæœ‰æ•ˆåˆ©ç”¨ç‡
```

**å®é™…ä¼˜åŒ–æ¡ˆä¾‹**ï¼š
```java
// âŒ é—®é¢˜ï¼šCPUåˆ©ç”¨ç‡ä½ï¼Œå¤§é‡I/Oç­‰å¾…
public void processData() {
    for (int i = 0; i < 1000; i++) {
        String data = readFromDatabase(i);    // åŒæ­¥I/Oï¼ŒCPUç­‰å¾…
        processBusinessLogic(data);
    }
}

// âœ… ä¼˜åŒ–ï¼šå¼‚æ­¥å¤„ç†ï¼Œæé«˜CPUåˆ©ç”¨ç‡
public void processDataOptimized() {
    List<CompletableFuture<String>> futures = new ArrayList<>();
    
    // å¹¶å‘è¯»å–æ•°æ®
    for (int i = 0; i < 1000; i++) {
        futures.add(readFromDatabaseAsync(i));
    }
    
    // å¤„ç†è¿”å›ç»“æœ
    futures.forEach(future -> {
        future.thenAccept(this::processBusinessLogic);
    });
}
```

### 3.3 å†…å­˜åˆ©ç”¨ç‡ä¼˜åŒ–


**ğŸ”¸ å†…å­˜ä½¿ç”¨æ¨¡å¼åˆ†æ**

```
å†…å­˜ä½¿ç”¨æƒ…å†µç›‘æ§ï¼š

å¥åº·çŠ¶æ€ï¼š              é—®é¢˜çŠ¶æ€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨: 60%    â”‚        â”‚ åº”ç”¨: 30%    â”‚
â”‚ ç¼“å­˜: 25%    â”‚        â”‚ ç¼“å­˜: 5%     â”‚ â† ç¼“å­˜å‘½ä¸­ç‡ä½
â”‚ ç³»ç»Ÿ: 10%    â”‚        â”‚ äº¤æ¢: 40%    â”‚ â† å¤§é‡ä½¿ç”¨swap
â”‚ ç©ºé—²: 5%     â”‚        â”‚ ç³»ç»Ÿ: 15%    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ ç©ºé—²: 10%    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å†…å­˜ä¼˜åŒ–å®è·µ**ï¼š
```java
// å†…å­˜ç¼“å­˜ä¼˜åŒ–
public class MemoryEfficientCache<K, V> {
    private final int maxSize;
    private final LinkedHashMap<K, V> cache;
    
    public MemoryEfficientCache(int maxSize) {
        this.maxSize = maxSize;
        this.cache = new LinkedHashMap<K, V>(16, 0.75f, true) {
            @Override
            protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
                return size() > maxSize;  // LRUæ·˜æ±°ç­–ç•¥
            }
        };
    }
    
    public V get(K key) {
        return cache.get(key);  // è‡ªåŠ¨è°ƒæ•´è®¿é—®é¡ºåº
    }
}
```

### 3.4 ç½‘ç»œèµ„æºåˆ©ç”¨ç‡


**ğŸ”¸ ç½‘ç»œå¸¦å®½ä¼˜åŒ–ç­–ç•¥**

| ä¼˜åŒ–æŠ€æœ¯ | **å®ç°æ–¹æ³•** | **æ•ˆæœ** | **é€‚ç”¨åœºæ™¯** |
|---------|-------------|---------|-------------|
| `è¿æ¥æ± ` | å¤ç”¨ç½‘ç»œè¿æ¥ | å‡å°‘å»ºè¿å¼€é”€ | æ•°æ®åº“ã€HTTPè¯·æ±‚ |
| `æ•°æ®å‹ç¼©` | å‹ç¼©ä¼ è¾“å†…å®¹ | èŠ‚çœ30-70%å¸¦å®½ | å¤§æ•°æ®ä¼ è¾“ |
| `æ‰¹é‡ä¼ è¾“` | åˆå¹¶å¤šä¸ªè¯·æ±‚ | å‡å°‘ç½‘ç»œå¾€è¿” | APIè°ƒç”¨ |
| `CDNç¼“å­˜` | å°±è¿‘æä¾›å†…å®¹ | å‡å°‘è¿œç¨‹è®¿é—® | é™æ€èµ„æº |

```java
// ç½‘ç»œè¿æ¥æ± ç¤ºä¾‹
public class HttpConnectionManager {
    private final PoolingHttpClientConnectionManager connectionManager;
    
    public HttpConnectionManager() {
        connectionManager = new PoolingHttpClientConnectionManager();
        connectionManager.setMaxTotal(200);        // æœ€å¤§è¿æ¥æ•°
        connectionManager.setDefaultMaxPerRoute(20); // æ¯ä¸ªè·¯ç”±æœ€å¤§è¿æ¥æ•°
    }
    
    public CloseableHttpClient getHttpClient() {
        return HttpClients.custom()
            .setConnectionManager(connectionManager)
            .build();
    }
}
```

---

## 4. ğŸ” ç“¶é¢ˆè¯†åˆ«ä¸è§£å†³


### 4.1 ç³»ç»Ÿç“¶é¢ˆçš„åŸºæœ¬æ¦‚å¿µ


**ğŸ’¡ ä»€ä¹ˆæ˜¯ç³»ç»Ÿç“¶é¢ˆ**ï¼š
ç³»ç»Ÿä¸­é™åˆ¶æ•´ä½“æ€§èƒ½çš„æœ€è–„å¼±ç¯èŠ‚ï¼Œå°±åƒç“¶å­çš„ç“¶é¢ˆå†³å®šäº†å€’æ°´çš„é€Ÿåº¦ä¸€æ ·ã€‚

```
ç³»ç»Ÿç“¶é¢ˆç¤ºæ„å›¾ï¼š

æ­£å¸¸æµé‡ï¼š          ç“¶é¢ˆå‡ºç°ï¼š
â”Œâ”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”
â”‚ 100 â”‚             â”‚ 100 â”‚
â”‚ req â”‚             â”‚ req â”‚
â””â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”˜
   â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â” â† å¤„ç†èƒ½åŠ›åªæœ‰20
â”‚ CPU â”‚             â”‚ CPU â”‚
â”‚100% â”‚             â”‚ 20% â”‚ â† CPUé—²ç½®ï¼Œç­‰å¾…å…¶ä»–èµ„æº
â””â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”˜
   â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”
â”‚ç£ç›˜I/Oâ”‚           â”‚ç£ç›˜I/Oâ”‚ â† ç“¶é¢ˆåœ¨è¿™é‡Œï¼
â”‚æ­£å¸¸  â”‚            â”‚ 100%â”‚
â””â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”˜
```

### 4.2 ç“¶é¢ˆè¯†åˆ«çš„ç³»ç»Ÿæ–¹æ³•


**ğŸ”¸ ç“¶é¢ˆè¯†åˆ«çš„æ­¥éª¤æµç¨‹**

```
ç“¶é¢ˆè¯†åˆ«æµç¨‹ï¼š

1. æ€§èƒ½åŸºçº¿å»ºç«‹
   â†“
2. ç›‘æ§å…³é”®æŒ‡æ ‡
   â†“
3. è´Ÿè½½æµ‹è¯•åˆ†æ
   â†“
4. ç“¶é¢ˆå®šä½ç¡®è®¤
   â†“
5. åˆ¶å®šè§£å†³æ–¹æ¡ˆ
```

**å…³é”®ç›‘æ§æŒ‡æ ‡**ï¼š

| èµ„æºç±»å‹ | **ç›‘æ§æŒ‡æ ‡** | **æ­£å¸¸èŒƒå›´** | **ç“¶é¢ˆä¿¡å·** |
|---------|-------------|-------------|-------------|
| `CPU` | ä½¿ç”¨ç‡ã€è´Ÿè½½ | <80% | >90%æŒç»­ |
| `å†…å­˜` | ä½¿ç”¨ç‡ã€äº¤æ¢ | <85% | >95%æˆ–å¤§é‡swap |
| `ç£ç›˜` | IOPSã€å»¶è¿Ÿ | <80% | é˜Ÿåˆ—é•¿åº¦>1 |
| `ç½‘ç»œ` | ååé‡ã€ä¸¢åŒ… | <70% | ä¸¢åŒ…>0.1% |

### 4.3 å¸¸è§ç“¶é¢ˆç±»å‹ä¸è§£å†³æ–¹æ¡ˆ


**ğŸ”¸ CPUç“¶é¢ˆè¯†åˆ«ä¸è§£å†³**

```bash
# CPUç“¶é¢ˆè¯†åˆ«å‘½ä»¤
top -p PID           # æŸ¥çœ‹è¿›ç¨‹CPUä½¿ç”¨
perf top             # åˆ†æCPUçƒ­ç‚¹å‡½æ•°
```

```java
// CPUå¯†é›†å‹ä»»åŠ¡ä¼˜åŒ–
public class CpuIntensiveOptimizer {
    
    // âŒ é—®é¢˜ï¼šå•çº¿ç¨‹è®¡ç®—ï¼ŒCPUä½¿ç”¨ç‡ä½
    public long calculateSumSlow(int[] array) {
        long sum = 0;
        for (int value : array) {
            sum += complexCalculation(value);  // å¤æ‚è®¡ç®—
        }
        return sum;
    }
    
    // âœ… ä¼˜åŒ–ï¼šå¹¶è¡Œè®¡ç®—ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPU
    public long calculateSumFast(int[] array) {
        return Arrays.stream(array)
            .parallel()                        // å¹¶è¡Œæµ
            .mapToLong(this::complexCalculation)
            .sum();
    }
}
```

**ğŸ”¸ å†…å­˜ç“¶é¢ˆè¯†åˆ«ä¸è§£å†³**

```java
// å†…å­˜æ³„æ¼æ£€æµ‹ä¸ä¼˜åŒ–
public class MemoryLeakResolver {
    // âŒ é—®é¢˜ï¼šç¼“å­˜æ— é™å¢é•¿ï¼Œå¯¼è‡´å†…å­˜è€—å°½
    private static final Map<String, Object> cache = new HashMap<>();
    
    public Object getFromCache(String key) {
        return cache.computeIfAbsent(key, this::loadData);  // æ°¸ä¸æ¸…ç†
    }
    
    // âœ… ä¼˜åŒ–ï¼šä½¿ç”¨å¸¦æœ‰æ¸…ç†æœºåˆ¶çš„ç¼“å­˜
    private final Cache<String, Object> cache = CacheBuilder.newBuilder()
        .maximumSize(10000)                    // æœ€å¤§æ¡ç›®æ•°
        .expireAfterWrite(30, TimeUnit.MINUTES) // å†™å…¥å30åˆ†é’Ÿè¿‡æœŸ
        .build();
    
    public Object getFromCacheFixed(String key) {
        return cache.get(key, this::loadData);
    }
}
```

**ğŸ”¸ I/Oç“¶é¢ˆè¯†åˆ«ä¸è§£å†³**

```java
// I/Oç“¶é¢ˆä¼˜åŒ–ç­–ç•¥
public class IoBottleneckResolver {
    
    // âŒ é—®é¢˜ï¼šåŒæ­¥I/Oé˜»å¡çº¿ç¨‹
    public List<String> readFilesSync(List<String> filenames) {
        List<String> contents = new ArrayList<>();
        for (String filename : filenames) {
            contents.add(readFile(filename));    // åŒæ­¥è¯»å–ï¼Œä¸²è¡Œå¤„ç†
        }
        return contents;
    }
    
    // âœ… ä¼˜åŒ–ï¼šå¼‚æ­¥I/Oæé«˜å¹¶å‘
    public CompletableFuture<List<String>> readFilesAsync(List<String> filenames) {
        List<CompletableFuture<String>> futures = filenames.stream()
            .map(filename -> CompletableFuture.supplyAsync(() -> readFile(filename)))
            .collect(Collectors.toList());
            
        return CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]))
            .thenApply(v -> futures.stream()
                .map(CompletableFuture::join)
                .collect(Collectors.toList()));
    }
}
```

### 4.4 ç“¶é¢ˆè§£å†³çš„ä¼˜å…ˆçº§ç­–ç•¥


**ğŸ¯ è§£å†³ç“¶é¢ˆçš„é»„é‡‘æ³•åˆ™**ï¼š

```
ç“¶é¢ˆè§£å†³ä¼˜å…ˆçº§ï¼š

1. ğŸ”¥ å½±å“æœ€å¤§çš„ç“¶é¢ˆä¼˜å…ˆ
   â”œâ”€ ç”¨æˆ·ä½“éªŒå½±å“åº¦
   â”œâ”€ ä¸šåŠ¡ä»·å€¼å½±å“åº¦
   â””â”€ ç³»ç»Ÿç¨³å®šæ€§å½±å“åº¦

2. ğŸ’° æˆæœ¬æ•ˆç›Šæ¯”æœ€é«˜çš„ä¼˜å…ˆ
   â”œâ”€ è½¯ä»¶ä¼˜åŒ–ï¼ˆæˆæœ¬ä½ï¼‰
   â”œâ”€ é…ç½®è°ƒä¼˜ï¼ˆæˆæœ¬ä¸­ï¼‰
   â””â”€ ç¡¬ä»¶å‡çº§ï¼ˆæˆæœ¬é«˜ï¼‰

3. â±ï¸ å®æ–½éš¾åº¦æœ€ä½çš„ä¼˜å…ˆ
   â”œâ”€ å‚æ•°è°ƒæ•´ï¼ˆéš¾åº¦ä½ï¼‰
   â”œâ”€ ä»£ç ä¼˜åŒ–ï¼ˆéš¾åº¦ä¸­ï¼‰
   â””â”€ æ¶æ„é‡æ„ï¼ˆéš¾åº¦é«˜ï¼‰
```

---

## 5. ğŸ’° ç¡¬ä»¶å‡çº§ç­–ç•¥


### 5.1 ç¡¬ä»¶å‡çº§çš„æŠ•èµ„å›æŠ¥åˆ†æ


**ğŸ’¡ ç¡¬ä»¶å‡çº§çš„ç»æµå­¦æ€è€ƒ**ï¼š

```
æŠ•èµ„å›æŠ¥åˆ†ææ¨¡å‹ï¼š

æˆæœ¬åˆ†æï¼š                æ”¶ç›Šåˆ†æï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¡¬ä»¶è´­ä¹°æˆæœ¬ â”‚          â”‚ æ€§èƒ½æå‡æ”¶ç›Š â”‚
â”‚ éƒ¨ç½²å®æ–½æˆæœ¬ â”‚    VS    â”‚ è¿ç»´æˆæœ¬é™ä½ â”‚
â”‚ æœºä¼šæˆæœ¬æŸå¤± â”‚          â”‚ ä¸šåŠ¡æœºä¼šæ”¶ç›Š â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROI = (æ”¶ç›Š - æˆæœ¬) / æˆæœ¬ Ã— 100%
```

### 5.2 ä¸åŒç¡¬ä»¶ç»„ä»¶çš„å‡çº§ç­–ç•¥


**ğŸ”¸ CPUå‡çº§ç­–ç•¥**

| åº”ç”¨ç±»å‹ | **CPUé€‰æ‹©å»ºè®®** | **æ€§ä»·æ¯”è¯„ä¼°** | **å‡çº§æ—¶æœº** |
|---------|---------------|---------------|-------------|
| `è®¡ç®—å¯†é›†å‹` | é«˜ä¸»é¢‘ã€å¤šæ ¸å¿ƒ | â­â­â­â­â­ | CPUä½¿ç”¨ç‡>90% |
| `I/Oå¯†é›†å‹` | å¤šçº¿ç¨‹æ”¯æŒå¥½ | â­â­â­ | çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹ |
| `å†…å­˜å¯†é›†å‹` | å¤§ç¼“å­˜ã€å¤šé€šé“ | â­â­â­â­ | ç¼“å­˜å‘½ä¸­ç‡ä½ |
| `æ··åˆè´Ÿè½½` | å‡è¡¡é…ç½® | â­â­â­â­ | æ•´ä½“æ€§èƒ½ç“¶é¢ˆ |

```
CPUå‡çº§å†³ç­–æµç¨‹ï¼š

å½“å‰CPUä½¿ç”¨ç‡ç›‘æ§
         â†“
    æ˜¯å¦>80%æŒç»­ï¼Ÿ
         â†“
   è®¡ç®—å¯†é›†å‹ä»»åŠ¡å æ¯”
         â†“
    å¤šæ ¸å¹¶è¡ŒåŒ–ç¨‹åº¦
         â†“
   åˆ¶å®šCPUå‡çº§æ–¹æ¡ˆ
```

**ğŸ”¸ å†…å­˜å‡çº§ç­–ç•¥**

```java
// å†…å­˜éœ€æ±‚è¯„ä¼°å·¥å…·
public class MemoryRequirementAnalyzer {
    
    public MemoryRecommendation analyzeMemoryNeeds(ApplicationProfile profile) {
        long baseMemory = calculateBaseMemory(profile);
        long cacheMemory = calculateOptimalCache(profile);
        long bufferMemory = calculateBufferSize(profile);
        
        long totalRequired = baseMemory + cacheMemory + bufferMemory;
        long recommendedSize = totalRequired * 1.3;  // 30%ä½™é‡
        
        return new MemoryRecommendation(recommendedSize, getMemoryType(profile));
    }
    
    private long calculateOptimalCache(ApplicationProfile profile) {
        // æ ¹æ®æ•°æ®è®¿é—®æ¨¡å¼è®¡ç®—æœ€ä¼˜ç¼“å­˜å¤§å°
        return profile.getDataSize() * profile.getCacheHitRatio();
    }
}
```

**ğŸ”¸ å­˜å‚¨å‡çº§ç­–ç•¥**

| å­˜å‚¨ç±»å‹ | **IOPS** | **å»¶è¿Ÿ** | **æˆæœ¬** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|---------|---------|-------------|
| `HDD` | 100-200 | 5-10ms | ğŸ’° | å†·æ•°æ®å­˜å‚¨ |
| `SATA SSD` | 50K-90K | 0.1-0.2ms | ğŸ’°ğŸ’°ğŸ’° | ä¸€èˆ¬åº”ç”¨ |
| `NVMe SSD` | 500K-1M | 0.01-0.05ms | ğŸ’°ğŸ’°ğŸ’°ğŸ’° | é«˜æ€§èƒ½æ•°æ®åº“ |
| `Intel Optane` | 550K | 0.01ms | ğŸ’°ğŸ’°ğŸ’°ğŸ’°ğŸ’° | æè‡´æ€§èƒ½è¦æ±‚ |

### 5.3 ç¡¬ä»¶å‡çº§çš„å®æ–½ç­–ç•¥


**ğŸ”¸ åˆ†é˜¶æ®µå‡çº§è®¡åˆ’**

```
ç¡¬ä»¶å‡çº§è·¯çº¿å›¾ï¼š

é˜¶æ®µ1ï¼šå¿«é€Ÿè§æ•ˆå‡çº§ï¼ˆ1-2å‘¨ï¼‰
â”œâ”€ å†…å­˜æ‰©å®¹ï¼ˆæˆæœ¬ä½ï¼Œæ•ˆæœæ˜æ˜¾ï¼‰
â”œâ”€ SSDæ›¿æ¢ç³»ç»Ÿç›˜ï¼ˆå¯åŠ¨é€Ÿåº¦æå‡ï¼‰
â””â”€ ç½‘å¡å‡çº§ï¼ˆç½‘ç»œç“¶é¢ˆè§£å†³ï¼‰

é˜¶æ®µ2ï¼šæ ¸å¿ƒæ€§èƒ½å‡çº§ï¼ˆ1-2æœˆï¼‰
â”œâ”€ CPUå‡çº§ï¼ˆè®¡ç®—èƒ½åŠ›æå‡ï¼‰
â”œâ”€ å­˜å‚¨ç³»ç»Ÿä¼˜åŒ–ï¼ˆI/Oæ€§èƒ½æå‡ï¼‰
â””â”€ æœåŠ¡å™¨æ•´æœºå‡çº§

é˜¶æ®µ3ï¼šæ¶æ„çº§åˆ«å‡çº§ï¼ˆ3-6æœˆï¼‰
â”œâ”€ å¤šæœåŠ¡å™¨é›†ç¾¤
â”œâ”€ è´Ÿè½½å‡è¡¡ç³»ç»Ÿ
â””â”€ åˆ†å¸ƒå¼å­˜å‚¨æ–¹æ¡ˆ
```

### 5.4 å‡çº§æ•ˆæœè¯„ä¼°


```java
// ç¡¬ä»¶å‡çº§æ•ˆæœè¯„ä¼°å·¥å…·
public class UpgradeEffectivenessEvaluator {
    
    public UpgradeReport evaluateUpgrade(PerformanceBaseline before, 
                                       PerformanceBaseline after,
                                       UpgradeCost cost) {
        // è®¡ç®—æ€§èƒ½æå‡æ¯”ä¾‹
        double performanceGain = calculatePerformanceGain(before, after);
        
        // è®¡ç®—æˆæœ¬æ•ˆç›Šæ¯”
        double costEffectiveness = performanceGain / cost.getTotalCost();
        
        // ç”Ÿæˆå‡çº§æŠ¥å‘Š
        return UpgradeReport.builder()
            .performanceImprovement(performanceGain)
            .costEffectiveness(costEffectiveness)
            .recommendation(generateRecommendation(costEffectiveness))
            .build();
    }
    
    private String generateRecommendation(double costEffectiveness) {
        if (costEffectiveness > 2.0) {
            return "å‡çº§æ•ˆæœexcellentï¼Œå»ºè®®ç»§ç»­ç±»ä¼¼å‡çº§";
        } else if (costEffectiveness > 1.0) {
            return "å‡çº§æ•ˆæœè‰¯å¥½ï¼ŒæŠ•èµ„å›æŠ¥åˆç†";
        } else {
            return "å‡çº§æ•ˆæœä¸€èˆ¬ï¼Œéœ€è¦é‡æ–°è¯„ä¼°æ–¹æ¡ˆ";
        }
    }
}
```

---

## 6. ğŸ“ æ‰©å±•æ€§è¯„ä¼°


### 6.1 ç³»ç»Ÿæ‰©å±•æ€§çš„åŸºæœ¬æ¦‚å¿µ


**ğŸ’¡ ä»€ä¹ˆæ˜¯ç³»ç»Ÿæ‰©å±•æ€§**ï¼š
ç³»ç»Ÿåœ¨è´Ÿè½½å¢åŠ æ—¶ï¼Œèƒ½å¤Ÿé€šè¿‡å¢åŠ èµ„æºæ¥çº¿æ€§æå‡æ€§èƒ½çš„èƒ½åŠ›ã€‚

```
æ‰©å±•æ€§è¡¨ç°ç±»å‹ï¼š

çº¿æ€§æ‰©å±•ï¼ˆç†æƒ³ï¼‰ï¼š        éçº¿æ€§æ‰©å±•ï¼ˆç°å®ï¼‰ï¼š
æ€§èƒ½                     æ€§èƒ½
 â†‘                        â†‘     
 â”‚    â•±                   â”‚   â•±â•²
 â”‚   â•±                    â”‚  â•±  â•²
 â”‚  â•±                     â”‚ â•±    â•²
 â”‚ â•±                      â”‚â•±      â•²
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ èµ„æº          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ èµ„æº
  å®Œç¾æ‰©å±•                   æ‰©å±•æ€§é€’å‡
```

### 6.2 æ‰©å±•æ€§è¯„ä¼°çš„æ ¸å¿ƒæŒ‡æ ‡


**ğŸ”¸ æ‰©å±•æ€§æµ‹é‡æ–¹æ³•**

| æŒ‡æ ‡åç§° | **è®¡ç®—å…¬å¼** | **ç†æƒ³å€¼** | **å«ä¹‰è¯´æ˜** |
|---------|-------------|-----------|-------------|
| `çº¿æ€§åº¦` | å®é™…æ€§èƒ½æå‡/ç†è®ºæ€§èƒ½æå‡ | 1.0 | æ¥è¿‘1è¡¨ç¤ºçº¿æ€§æ‰©å±• |
| `æ•ˆç‡æ¯”` | (næ ¸æ€§èƒ½)/(1æ ¸æ€§èƒ½Ã—n) | 1.0 | å¤šæ ¸æ•ˆç‡ |
| `æ‰©å±•ä¸Šé™` | æ€§èƒ½ä¸å†æå‡çš„èµ„æºç‚¹ | è¶Šå¤§è¶Šå¥½ | æ‰©å±•æ€§è¾¹ç•Œ |
| `æˆæœ¬æ•ˆç›Š` | æ€§èƒ½æå‡/æˆæœ¬å¢åŠ  | è¶Šå¤§è¶Šå¥½ | ç»æµæ•ˆç›Š |

```java
// æ‰©å±•æ€§è¯„ä¼°å·¥å…·
public class ScalabilityEvaluator {
    
    public ScalabilityReport evaluate(SystemConfig baseConfig, 
                                    List<SystemConfig> scaledConfigs) {
        List<PerformancePoint> results = new ArrayList<>();
        
        // æµ‹è¯•ä¸åŒé…ç½®ä¸‹çš„æ€§èƒ½
        for (SystemConfig config : scaledConfigs) {
            PerformanceBenchmark benchmark = runBenchmark(config);
            results.add(new PerformancePoint(
                config.getResourceUnits(),
                benchmark.getThroughput(),
                benchmark.getLatency()
            ));
        }
        
        return analyzeScalability(results);
    }
    
    private ScalabilityReport analyzeScalability(List<PerformancePoint> points) {
        double linearityScore = calculateLinearity(points);
        int scalabilityLimit = findScalabilityLimit(points);
        double efficiency = calculateEfficiency(points);
        
        return new ScalabilityReport(linearityScore, scalabilityLimit, efficiency);
    }
}
```

### 6.3 ä¸åŒç±»å‹åº”ç”¨çš„æ‰©å±•æ€§ç‰¹å¾


**ğŸ”¸ CPUå¯†é›†å‹åº”ç”¨æ‰©å±•æ€§**

```
CPUå¯†é›†å‹æ‰©å±•ç‰¹å¾ï¼š

æ ¸å¿ƒæ•°é‡ï¼š  1    2    4    8    16   32
æ€§èƒ½å€æ•°ï¼š  1   1.9  3.6  6.8  11.2  15.6

åˆ†æï¼š
- 2æ ¸æ•ˆç‡ï¼š95%ï¼ˆæ¥è¿‘çº¿æ€§ï¼‰
- 4æ ¸æ•ˆç‡ï¼š90%ï¼ˆè‰¯å¥½ï¼‰
- 8æ ¸æ•ˆç‡ï¼š85%ï¼ˆå¯æ¥å—ï¼‰
- 16æ ¸æ•ˆç‡ï¼š70%ï¼ˆé€’å‡æ˜æ˜¾ï¼‰
- 32æ ¸æ•ˆç‡ï¼š49%ï¼ˆæ•ˆæœæœ‰é™ï¼‰

ç»“è®ºï¼šCPUå¯†é›†å‹åº”ç”¨åœ¨8æ ¸å†…æ‰©å±•æ€§è‰¯å¥½
```

**ğŸ”¸ I/Oå¯†é›†å‹åº”ç”¨æ‰©å±•æ€§**

```java
// I/Oå¯†é›†å‹åº”ç”¨æ‰©å±•æ€§ä¼˜åŒ–
public class IoScalabilityOptimizer {
    
    // âŒ é—®é¢˜ï¼šåŒæ­¥I/Oé™åˆ¶æ‰©å±•æ€§
    public void processFilesSyncBad(List<String> files) {
        for (String file : files) {
            processFile(file);  // ä¸²è¡Œå¤„ç†ï¼Œæ— æ³•åˆ©ç”¨å¤šæ ¸
        }
    }
    
    // âœ… ä¼˜åŒ–ï¼šå¼‚æ­¥I/Oæå‡æ‰©å±•æ€§
    public CompletableFuture<Void> processFilesAsync(List<String> files) {
        int threadCount = Runtime.getRuntime().availableProcessors();
        ExecutorService executor = Executors.newFixedThreadPool(threadCount);
        
        List<CompletableFuture<Void>> futures = files.stream()
            .map(file -> CompletableFuture.runAsync(() -> processFile(file), executor))
            .collect(Collectors.toList());
            
        return CompletableFuture.allOf(futures.toArray(new CompletableFuture[0]));
    }
}
```

### 6.4 æ‰©å±•æ€§ç“¶é¢ˆçš„è¯†åˆ«ä¸è§£å†³


**ğŸ”¸ å¸¸è§æ‰©å±•æ€§ç“¶é¢ˆç±»å‹**

```
æ‰©å±•æ€§ç“¶é¢ˆåˆ†æï¼š

1. ä¸²è¡ŒåŒ–ç“¶é¢ˆï¼ˆAmdahlå®šå¾‹ï¼‰
   å¹¶è¡Œåº¦ = 1 / (ä¸²è¡Œæ¯”ä¾‹ + å¹¶è¡Œæ¯”ä¾‹/å¤„ç†å™¨æ•°)
   
   ç¤ºä¾‹ï¼š10%ä¸²è¡Œä»£ç é™åˆ¶
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å¤„ç†å™¨æ•°ï¼š  1   2   4   8   â”‚
   â”‚ åŠ é€Ÿæ¯”ï¼š   1  1.8  3.1  4.7 â”‚
   â”‚ ç†è®ºæé™ï¼š     10å€        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. ç«äº‰ç“¶é¢ˆï¼ˆé”å†²çªï¼‰
   å¤šçº¿ç¨‹äº‰æŠ¢å…±äº«èµ„æº
   
3. é€šä¿¡ç“¶é¢ˆï¼ˆæ•°æ®ä¼ è¾“ï¼‰
   çº¿ç¨‹é—´æ•°æ®äº¤æ¢å¼€é”€
   
4. å†…å­˜ç“¶é¢ˆï¼ˆå¸¦å®½é™åˆ¶ï¼‰
   å†…å­˜è®¿é—®æˆä¸ºé™åˆ¶å› ç´ 
```

**æ‰©å±•æ€§ä¼˜åŒ–ç­–ç•¥**ï¼š

```java
// æ‰©å±•æ€§ä¼˜åŒ–å®è·µ
public class ScalabilityOptimizer {
    
    // å‡å°‘ä¸²è¡ŒåŒ–ä»£ç 
    public void optimizeSerialCode() {
        // âŒ ä¸²è¡ŒåŒ–ç“¶é¢ˆ
        synchronized(this) {
            // å¤§é‡ä¸šåŠ¡é€»è¾‘åœ¨åŒæ­¥å—ä¸­
            heavyBusinessLogic();
        }
        
        // âœ… å‡å°‘åŒæ­¥èŒƒå›´
        Object result = prepareData();  // å¹¶è¡Œå‡†å¤‡
        synchronized(this) {
            quickUpdate(result);        // æœ€å°åŒ–åŒæ­¥ä»£ç 
        }
    }
    
    // ä½¿ç”¨æ— é”æ•°æ®ç»“æ„
    private final AtomicLong counter = new AtomicLong(0);
    
    public long incrementCounter() {
        return counter.incrementAndGet();  // æ— é”æ“ä½œï¼Œæ‰©å±•æ€§æ›´å¥½
    }
    
    // åˆ†ç‰‡å‡å°‘ç«äº‰
    private final ConcurrentHashMap<Integer, AtomicLong> shardedCounters;
    
    public void incrementSharded(String key) {
        int shard = Math.abs(key.hashCode()) % shardCount;
        shardedCounters.get(shard).incrementAndGet();  // åˆ†ç‰‡å‡å°‘å†²çª
    }
}
```

### 6.5 æ‰©å±•æ€§è¯„ä¼°çš„å®è·µæ–¹æ³•


**ğŸ”¸ è´Ÿè½½æµ‹è¯•è¯„ä¼°æ‰©å±•æ€§**

```java
// æ‰©å±•æ€§è´Ÿè½½æµ‹è¯•æ¡†æ¶
public class ScalabilityLoadTester {
    
    public ScalabilityTestResult runScalabilityTest(int maxThreads) {
        Map<Integer, PerformanceMetrics> results = new HashMap<>();
        
        for (int threads = 1; threads <= maxThreads; threads *= 2) {
            PerformanceMetrics metrics = runLoadTest(threads);
            results.put(threads, metrics);
            
            // å¦‚æœæ€§èƒ½ä¸å†æå‡ï¼Œæå‰ç»“æŸæµ‹è¯•
            if (isPerformancePlateau(results, threads)) {
                break;
            }
        }
        
        return analyzeResults(results);
    }
    
    private boolean isPerformancePlateau(Map<Integer, PerformanceMetrics> results, 
                                       int currentThreads) {
        if (currentThreads < 4) return false;
        
        PerformanceMetrics current = results.get(currentThreads);
        PerformanceMetrics previous = results.get(currentThreads / 2);
        
        double improvement = current.getThroughput() / previous.getThroughput();
        return improvement < 1.1;  // æ€§èƒ½æå‡å°äº10%ï¼Œè®¤ä¸ºè¾¾åˆ°å¹³å°æœŸ
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å‚ç›´æ‰©å±•æ€ç»´çš„æ ¸å¿ƒåŸç†


```
ğŸ”¸ å‚ç›´æ‰©å±•æœ¬è´¨ï¼šé€šè¿‡å¢å¼ºå•æœºç¡¬ä»¶é…ç½®æå‡ç³»ç»Ÿæ€§èƒ½
ğŸ”¸ ä¼˜åŠ¿ç‰¹ç‚¹ï¼šå®æ–½ç®€å•ã€è§æ•ˆå¿«é€Ÿã€é€‚åˆå•ä½“åº”ç”¨
ğŸ”¸ å±€é™æ€§ï¼šæˆæœ¬é«˜æ˜‚ã€å­˜åœ¨ä¸Šé™ã€å•ç‚¹æ•…éšœé£é™©
ğŸ”¸ é€‚ç”¨åœºæ™¯ï¼šæ•°æ®åº“ç³»ç»Ÿã€è®¡ç®—å¯†é›†å‹åº”ç”¨ã€å¿«é€Ÿè§£å†³æ–¹æ¡ˆ
ğŸ”¸ å…³é”®æ€è·¯ï¼šè¯†åˆ«ç“¶é¢ˆâ†’ä¼˜åŒ–é…ç½®â†’ç¡¬ä»¶å‡çº§â†’æ•ˆæœè¯„ä¼°
```

### 7.2 æ€§èƒ½ä¼˜åŒ–çš„å±‚æ¬¡ç»“æ„


```
æ€§èƒ½ä¼˜åŒ–é‡‘å­—å¡”ï¼š

     ç®—æ³•ä¼˜åŒ– â† æœ€é«˜æ€§ä»·æ¯”ï¼Œä¼˜å…ˆè€ƒè™‘
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† ä»£ç é€»è¾‘ä¼˜åŒ–ï¼Œä¸­ç­‰æŠ•å…¥
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† ç³»ç»Ÿé…ç½®è°ƒä¼˜ï¼Œä½æˆæœ¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        ç¡¬ä»¶å‡çº§ â† é«˜æˆæœ¬ä½†ç›´æ¥ï¼Œæœ€åè€ƒè™‘

è®°å¿†å£è¯€ï¼šå…ˆè½¯åç¡¬ï¼Œå…ˆä¼˜åŒ–åå‡çº§
```

### 7.3 ç“¶é¢ˆè¯†åˆ«çš„ç³»ç»Ÿæ–¹æ³•


| ç“¶é¢ˆç±»å‹ | **è¯†åˆ«ä¿¡å·** | **è§£å†³ç­–ç•¥** | **é¢„æœŸæ•ˆæœ** |
|---------|-------------|-------------|-------------|
| `CPUç“¶é¢ˆ` | ä½¿ç”¨ç‡>90%æŒç»­ | å¹¶è¡ŒåŒ–ã€ç®—æ³•ä¼˜åŒ– | â­â­â­â­â­ |
| `å†…å­˜ç“¶é¢ˆ` | å¤§é‡swapã€OOM | ç¼“å­˜ä¼˜åŒ–ã€å†…å­˜æ‰©å®¹ | â­â­â­â­ |
| `I/Oç“¶é¢ˆ` | é˜Ÿåˆ—é•¿åº¦>1 | å¼‚æ­¥I/Oã€SSDå‡çº§ | â­â­â­â­â­ |
| `ç½‘ç»œç“¶é¢ˆ` | ä¸¢åŒ…ç‡>0.1% | è¿æ¥æ± ã€å¸¦å®½å‡çº§ | â­â­â­ |

### 7.4 ç¡¬ä»¶å‡çº§çš„æŠ•èµ„å†³ç­–


```
ç¡¬ä»¶å‡çº§å†³ç­–æ ‘ï¼š

æ€§èƒ½é—®é¢˜å‡ºç°
       â†“
  è½¯ä»¶ä¼˜åŒ–ç©ºé—´ï¼Ÿ
   â†™        â†˜
 æœ‰          æ— 
 â†“           â†“
ä»£ç ä¼˜åŒ–    ç¡¬ä»¶è¯„ä¼°
 â†“           â†“
æ•ˆæœæ»¡æ„ï¼Ÿ   æˆæœ¬åˆç†ï¼Ÿ
 â†“           â†“
å®Œæˆ        ç¡¬ä»¶å‡çº§

å…³é”®è€ƒè™‘å› ç´ ï¼š
â€¢ æŠ•èµ„å›æŠ¥ç‡ï¼ˆROI > 150%ï¼‰
â€¢ å®æ–½å¤æ‚åº¦ï¼ˆå·¥æœŸ<2å‘¨ï¼‰
â€¢ ä¸šåŠ¡å½±å“åº¦ï¼ˆåœæœºæ—¶é—´<4å°æ—¶ï¼‰
```

### 7.5 æ‰©å±•æ€§è¯„ä¼°çš„å…³é”®æŒ‡æ ‡


```java
// æ‰©å±•æ€§å¥åº·åº¦è¯„ä¼°
public class ScalabilityHealthCheck {
    
    public ScalabilityGrade evaluateScalability(SystemMetrics metrics) {
        double linearity = metrics.getLinearityScore();      // çº¿æ€§åº¦
        double efficiency = metrics.getEfficiencyRatio();    // æ•ˆç‡æ¯”
        int scalabilityLimit = metrics.getScalabilityLimit(); // æ‰©å±•ä¸Šé™
        
        if (linearity > 0.9 && efficiency > 0.8) {
            return ScalabilityGrade.EXCELLENT;    // ä¼˜ç§€ï¼šæ¥è¿‘çº¿æ€§æ‰©å±•
        } else if (linearity > 0.7 && efficiency > 0.6) {
            return ScalabilityGrade.GOOD;         // è‰¯å¥½ï¼šå¯æ¥å—çš„æ‰©å±•æ€§
        } else if (linearity > 0.5) {
            return ScalabilityGrade.FAIR;         // ä¸€èˆ¬ï¼šæœ‰æ”¹è¿›ç©ºé—´
        } else {
            return ScalabilityGrade.POOR;         // å·®ï¼šæ‰©å±•æ€§é—®é¢˜ä¸¥é‡
        }
    }
}
```

### 7.6 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ¯ å‚ç›´æ‰©å±•çš„æœ€ä½³å®è·µ**ï¼š

1. **ä¼˜å…ˆçº§ç­–ç•¥**ï¼š`ç®—æ³•ä¼˜åŒ– > é…ç½®è°ƒä¼˜ > ç¡¬ä»¶å‡çº§`
2. **æˆæœ¬æ§åˆ¶**ï¼šè®¾å®šç¡¬ä»¶å‡çº§é¢„ç®—ä¸Šé™ï¼Œé¿å…è¿‡åº¦æŠ•èµ„
3. **æ•ˆæœè¯„ä¼°**ï¼šæ¯æ¬¡å‡çº§åå¿…é¡»è¿›è¡Œæ€§èƒ½æµ‹è¯•éªŒè¯
4. **é£é™©æ§åˆ¶**ï¼šåˆ¶å®šå›æ»šæ–¹æ¡ˆï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
5. **é•¿æœŸè§„åˆ’**ï¼šè€ƒè™‘å‘æ°´å¹³æ‰©å±•æ¶æ„çš„æ¼”è¿›è·¯å¾„

**æ ¸å¿ƒè®°å¿†**ï¼š
- å‚ç›´æ‰©å±•è§£ç‡ƒçœ‰ï¼Œå•æœºæ€§èƒ½å¿«æå‡
- ç“¶é¢ˆè¯†åˆ«æ˜¯å…³é”®ï¼Œå¯¹ç—‡ä¸‹è¯æ•ˆæœæ˜
- è½¯ä»¶ä¼˜åŒ–æ€§ä»·æ¯”ï¼Œç¡¬ä»¶å‡çº§è¦è°¨æ…
- æ‰©å±•è¯„ä¼°åšåœ¨å‰ï¼ŒæŠ•èµ„å›æŠ¥å¿ƒä¸­æ˜