---
title: 18ã€å†…å­˜å¯†é›†ï¼šå†…å­˜å¯†é›†å‹ä¼˜åŒ–ç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [å†…å­˜å¯†é›†å‹åœºæ™¯æ¦‚è¿°](#1-å†…å­˜å¯†é›†å‹åœºæ™¯æ¦‚è¿°)
2. [å†…å­˜æ± ç®¡ç†æŠ€æœ¯](#2-å†…å­˜æ± ç®¡ç†æŠ€æœ¯)
3. [å¯¹è±¡æ± å¤ç”¨ç­–ç•¥](#3-å¯¹è±¡æ± å¤ç”¨ç­–ç•¥)
4. [åƒåœ¾å›æ”¶GCè°ƒä¼˜](#4-åƒåœ¾å›æ”¶GCè°ƒä¼˜)
5. [å†…å­˜åˆ†é…ç®—æ³•ä¼˜åŒ–](#5-å†…å­˜åˆ†é…ç®—æ³•ä¼˜åŒ–)
6. [æ•°æ®ç»“æ„å†…å­˜ä¼˜åŒ–](#6-æ•°æ®ç»“æ„å†…å­˜ä¼˜åŒ–)
7. [å†…å­˜æ³„æ¼æ£€æµ‹ä¸é¢„é˜²](#7-å†…å­˜æ³„æ¼æ£€æµ‹ä¸é¢„é˜²)
8. [é«˜çº§å†…å­˜ä¼˜åŒ–æŠ€æœ¯](#8-é«˜çº§å†…å­˜ä¼˜åŒ–æŠ€æœ¯)
9. [å†…å­˜ç›‘æ§ä¸è°ƒä¼˜å®è·µ](#9-å†…å­˜ç›‘æ§ä¸è°ƒä¼˜å®è·µ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ§  å†…å­˜å¯†é›†å‹åœºæ™¯æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯å†…å­˜å¯†é›†å‹åº”ç”¨


**ğŸ“‹ æ ¸å¿ƒå®šä¹‰**
å†…å­˜å¯†é›†å‹åº”ç”¨å°±æ˜¯é‚£äº›**åƒå†…å­˜å¤§æˆ·**çš„ç¨‹åºï¼Œå®ƒä»¬çš„ç‰¹ç‚¹æ˜¯ï¼š
- **å†…å­˜ä½¿ç”¨é‡å¤§**ï¼šç¨‹åºè¿è¡Œæ—¶éœ€è¦å ç”¨å¤§é‡RAM
- **å†…å­˜è®¿é—®é¢‘ç¹**ï¼šä¸åœåœ°è¯»å†™å†…å­˜æ•°æ®
- **å¯¹å†…å­˜æ€§èƒ½æ•æ„Ÿ**ï¼šå†…å­˜é€Ÿåº¦ç›´æ¥å½±å“ç¨‹åºè¡¨ç°

**ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯**
```
å¸¸è§çš„å†…å­˜å¯†é›†å‹åº”ç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¤§æ•°æ®å¤„ç†     â”‚    â”‚   å›¾åƒè§†é¢‘å¤„ç†   â”‚
â”‚  - æ•°æ®åˆ†æ      â”‚    â”‚  - å›¾ç‰‡ç¼–è¾‘      â”‚
â”‚  - æœºå™¨å­¦ä¹       â”‚    â”‚  - è§†é¢‘æ¸²æŸ“      â”‚
â”‚  - å®æ—¶è®¡ç®—      â”‚    â”‚  - 3Då»ºæ¨¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            å†…å­˜å¯†é›†å‹ç‰¹å¾                â”‚
â”‚  â€¢ å†…å­˜å ç”¨ï¼šå‡ GBåˆ°å‡ åGB               â”‚
â”‚  â€¢ æ•°æ®ç»“æ„ï¼šå¤§é‡å¯¹è±¡ã€æ•°ç»„ã€ç¼“å­˜       â”‚
â”‚  â€¢ è®¿é—®æ¨¡å¼ï¼šéšæœºè®¿é—®ã€æ‰¹é‡å¤„ç†         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å†…å­˜ä½¿ç”¨é—®é¢˜çš„è¡¨ç°


**âš ï¸ å¸¸è§å†…å­˜é—®é¢˜ç—‡çŠ¶**
- **ç¨‹åºå¯åŠ¨æ…¢**ï¼šåŠ è½½å¤§é‡æ•°æ®åˆ°å†…å­˜éœ€è¦æ—¶é—´
- **å“åº”å»¶è¿Ÿé«˜**ï¼šå†…å­˜ä¸è¶³å¯¼è‡´é¢‘ç¹äº¤æ¢åˆ°ç£ç›˜
- **ç³»ç»Ÿå¡é¡¿**ï¼šå†…å­˜å ç”¨è¿‡é«˜å½±å“æ•´ä½“æ€§èƒ½
- **å†…å­˜æº¢å‡º**ï¼š`OutOfMemoryError`ç­‰é”™è¯¯
- **GCåœé¡¿**ï¼šåƒåœ¾å›æ”¶æ—¶é—´è¿‡é•¿å½±å“ç”¨æˆ·ä½“éªŒ

### 1.3 ä¼˜åŒ–çš„æ ¸å¿ƒæ€è·¯


**ğŸ’¡ å†…å­˜ä¼˜åŒ–ä¸‰å¤§åŸåˆ™**
```
ğŸ”¸ å‡å°‘å†…å­˜ä½¿ç”¨ï¼ˆReduceï¼‰
  â””â”€â”€ ä¼˜åŒ–æ•°æ®ç»“æ„ï¼Œå‹ç¼©æ•°æ®ï¼Œå»é™¤å†—ä½™

ğŸ”¸ æé«˜å†…å­˜æ•ˆç‡ï¼ˆReuseï¼‰  
  â””â”€â”€ å¯¹è±¡æ± å¤ç”¨ï¼Œå†…å­˜æ± ç®¡ç†ï¼Œé¿å…é‡å¤åˆ†é…

ğŸ”¸ æ”¹å–„è®¿é—®æ¨¡å¼ï¼ˆReorganizeï¼‰
  â””â”€â”€ å±€éƒ¨æ€§ä¼˜åŒ–ï¼Œç¼“å­˜å‹å¥½ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡
```

---

## 2. ğŸŠ å†…å­˜æ± ç®¡ç†æŠ€æœ¯


### 2.1 ä»€ä¹ˆæ˜¯å†…å­˜æ± 


**ğŸ“– é€šä¿—è§£é‡Š**
å†…å­˜æ± å°±åƒä¸€ä¸ª**é¢„å…ˆå‡†å¤‡å¥½çš„å†…å­˜ä»“åº“**ã€‚æƒ³è±¡ä¸€ä¸‹ï¼š
- **ä¼ ç»Ÿæ–¹å¼**ï¼šéœ€è¦å†…å­˜æ—¶ç°åœºç”³è¯·ï¼Œç”¨å®Œå°±è¿˜å›å»ï¼ˆé¢‘ç¹çš„å€Ÿè¿˜æ“ä½œï¼‰
- **å†…å­˜æ± æ–¹å¼**ï¼šæå‰ç”³è¯·ä¸€å¤§å—å†…å­˜ï¼Œç¨‹åºéœ€è¦æ—¶ç›´æ¥ä»æ± å­é‡Œå–ï¼ˆæ‰¹å‘å¼ç®¡ç†ï¼‰

**ğŸ¯ å†…å­˜æ± çš„ä¼˜åŠ¿**
- **åˆ†é…é€Ÿåº¦å¿«**ï¼šé¿å…é¢‘ç¹çš„ç³»ç»Ÿè°ƒç”¨
- **å‡å°‘å†…å­˜ç¢ç‰‡**ï¼šç»Ÿä¸€ç®¡ç†å¤§å—å†…å­˜
- **å¯é¢„æµ‹æ€§å¼º**ï¼šå†…å­˜ä½¿ç”¨é‡å¯æ§
- **å‡å°‘GCå‹åŠ›**ï¼šé™ä½åƒåœ¾å›æ”¶é¢‘ç‡

### 2.2 å†…å­˜æ± çš„å·¥ä½œåŸç†


**ğŸ”§ åŸºæœ¬å·¥ä½œæµç¨‹**
```
å†…å­˜æ± å·¥ä½œæœºåˆ¶ï¼š

åˆå§‹åŒ–é˜¶æ®µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          é¢„åˆ†é…å¤§å—å†…å­˜                â”‚
â”‚  [    Pool Memory Block 1MB    ]      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ 64B â”‚ 64B â”‚ 64B â”‚ 64B â”‚ ... â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨é˜¶æ®µï¼š
åº”ç”¨è¯·æ±‚64Bå†…å­˜ â†’ ä»æ± ä¸­åˆ†é…ä¸€ä¸ªå— â†’ å¿«é€Ÿè¿”å›åœ°å€
åº”ç”¨é‡Šæ”¾å†…å­˜   â†’ æ ‡è®°å—ä¸ºå¯ç”¨     â†’ ä¸çœŸæ­£é‡Šæ”¾ç»™ç³»ç»Ÿ
```

### 2.3 ç®€å•å†…å­˜æ± å®ç°ç¤ºä¾‹


**ğŸ’» åŸºç¡€å†…å­˜æ± ä»£ç **
```java
public class SimpleMemoryPool {
    private final int blockSize;    // æ¯ä¸ªå†…å­˜å—å¤§å°
    private final Queue<ByteBuffer> freeBlocks;  // ç©ºé—²å†…å­˜å—é˜Ÿåˆ—
    
    public SimpleMemoryPool(int blockSize, int poolSize) {
        this.blockSize = blockSize;
        this.freeBlocks = new ConcurrentLinkedQueue<>();
        
        // é¢„åˆ†é…å†…å­˜å—
        for (int i = 0; i < poolSize; i++) {
            freeBlocks.offer(ByteBuffer.allocateDirect(blockSize));
        }
    }
    
    // åˆ†é…å†…å­˜
    public ByteBuffer allocate() {
        ByteBuffer buffer = freeBlocks.poll();
        if (buffer == null) {
            // æ± å­ç©ºäº†ï¼Œåˆ›å»ºæ–°çš„ï¼ˆå¯é€‰ç­–ç•¥ï¼‰
            return ByteBuffer.allocateDirect(blockSize);
        }
        buffer.clear(); // é‡ç½®ç¼“å†²åŒºçŠ¶æ€
        return buffer;
    }
    
    // é‡Šæ”¾å†…å­˜
    public void deallocate(ByteBuffer buffer) {
        if (buffer.capacity() == blockSize) {
            freeBlocks.offer(buffer);
        }
        // ä¸ç¬¦åˆè§„æ ¼çš„å†…å­˜å—è®©GCå¤„ç†
    }
}
```

### 2.4 å†…å­˜æ± çš„ä½¿ç”¨åœºæ™¯


| åº”ç”¨åœºæ™¯ | **é€‚ç”¨æ€§** | **æ•ˆæœ** | **æ³¨æ„äº‹é¡¹** |
|---------|-----------|---------|-------------|
| ğŸŒ **ç½‘ç»œæœåŠ¡å™¨** | `é«˜é¢‘è¯·æ±‚å¤„ç†` | `å‡å°‘åˆ†é…å»¶è¿Ÿ` | `é¢„ä¼°è¯·æ±‚å¤§å°` |
| ğŸ® **æ¸¸æˆå¼•æ“** | `å®æ—¶æ¸²æŸ“éœ€æ±‚` | `é¿å…GCåœé¡¿` | `å†…å­˜å—å¤§å°è§„åˆ’` |
| ğŸ“Š **æ•°æ®å¤„ç†** | `æ‰¹é‡æ•°æ®æ“ä½œ` | `æé«˜ååé‡` | `æ± å¤§å°è°ƒä¼˜` |
| ğŸ”„ **æ¶ˆæ¯é˜Ÿåˆ—** | `æ¶ˆæ¯ç¼“å†²ç®¡ç†` | `ç¨³å®šæ€§èƒ½` | `å†…å­˜æ³„æ¼ç›‘æ§` |

---

## 3. â™»ï¸ å¯¹è±¡æ± å¤ç”¨ç­–ç•¥


### 3.1 å¯¹è±¡æ± çš„åŸºæœ¬æ¦‚å¿µ


**ğŸ¯ ä»€ä¹ˆæ˜¯å¯¹è±¡æ± **
å¯¹è±¡æ± å°±æ˜¯**å¯¹è±¡çš„å¾ªç¯åˆ©ç”¨ç«™**ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
- **é¿å…é‡å¤åˆ›å»º**ï¼šåˆ›å»ºå¯¹è±¡å¾ˆè€—æ—¶ï¼Œç”¨å®Œä¸æ‰”æ‰
- **å¾ªç¯ä½¿ç”¨**ï¼šé‡ç½®å¯¹è±¡çŠ¶æ€åç»§ç»­ä½¿ç”¨
- **é™ä½GCå‹åŠ›**ï¼šå‡å°‘éœ€è¦åƒåœ¾å›æ”¶çš„å¯¹è±¡æ•°é‡

**âš¡ é€‚åˆå¯¹è±¡æ± çš„å¯¹è±¡ç‰¹å¾**
```
ç†æƒ³çš„æ± åŒ–å¯¹è±¡ç‰¹ç‚¹ï¼š
âœ… åˆ›å»ºæˆæœ¬é«˜ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€çº¿ç¨‹ï¼‰
âœ… å¯é‡ç½®çŠ¶æ€ï¼ˆå¯ä»¥æ¸…ç†åé‡ç”¨ï¼‰  
âœ… ä½¿ç”¨é¢‘ç‡é«˜ï¼ˆç»å¸¸éœ€è¦åˆ›å»ºé”€æ¯ï¼‰
âœ… å¤§å°ç›¸å¯¹å›ºå®šï¼ˆä¾¿äºæ± ç®¡ç†ï¼‰

âŒ ä¸é€‚åˆæ± åŒ–çš„å¯¹è±¡ï¼š
âŒ åˆ›å»ºæˆæœ¬å¾ˆä½ï¼ˆå¦‚ç®€å•çš„POJOï¼‰
âŒ çŠ¶æ€å¤æ‚éš¾é‡ç½®
âŒ ä½¿ç”¨é¢‘ç‡ä½
âŒ ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿
```

### 3.2 å¯¹è±¡æ± å®ç°æ¨¡å¼


**ğŸ”§ é€šç”¨å¯¹è±¡æ± æ¨¡æ¿**
```java
public class ObjectPool<T> {
    private final Queue<T> objects;
    private final ObjectFactory<T> factory;
    private final int maxSize;
    
    public interface ObjectFactory<T> {
        T create();           // åˆ›å»ºæ–°å¯¹è±¡
        void reset(T obj);    // é‡ç½®å¯¹è±¡çŠ¶æ€
        boolean validate(T obj);  // éªŒè¯å¯¹è±¡æœ‰æ•ˆæ€§
    }
    
    public ObjectPool(ObjectFactory<T> factory, int maxSize) {
        this.objects = new ConcurrentLinkedQueue<>();
        this.factory = factory;
        this.maxSize = maxSize;
    }
    
    // è·å–å¯¹è±¡
    public T borrow() {
        T obj = objects.poll();
        if (obj == null) {
            obj = factory.create();
        } else if (!factory.validate(obj)) {
            obj = factory.create();
        }
        return obj;
    }
    
    // å½’è¿˜å¯¹è±¡  
    public void return(T obj) {
        if (obj != null && objects.size() < maxSize) {
            factory.reset(obj);
            objects.offer(obj);
        }
    }
}
```

### 3.3 å®é™…åº”ç”¨ç¤ºä¾‹


**ğŸ“ StringBuilderå¯¹è±¡æ± ç¤ºä¾‹**
```java
// StringBuilderå¯¹è±¡æ± å·¥å‚
public class StringBuilderFactory implements ObjectPool.ObjectFactory<StringBuilder> {
    @Override
    public StringBuilder create() {
        return new StringBuilder(256);  // é¢„è®¾åˆç†å®¹é‡
    }
    
    @Override
    public void reset(StringBuilder sb) {
        sb.setLength(0);  // æ¸…ç©ºå†…å®¹ä½†ä¿ç•™å®¹é‡
    }
    
    @Override
    public boolean validate(StringBuilder sb) {
        return sb.capacity() <= 1024;  // é¿å…å®¹é‡æ— é™å¢é•¿
    }
}

// ä½¿ç”¨ç¤ºä¾‹
ObjectPool<StringBuilder> sbPool = new ObjectPool<>(new StringBuilderFactory(), 10);

public String processData(List<String> data) {
    StringBuilder sb = sbPool.borrow();
    try {
        for (String item : data) {
            sb.append(item).append(",");
        }
        return sb.toString();
    } finally {
        sbPool.return(sb);  // ç¡®ä¿å½’è¿˜åˆ°æ± ä¸­
    }
}
```

---

## 4. ğŸ—‘ï¸ åƒåœ¾å›æ”¶GCè°ƒä¼˜


### 4.1 GCå¯¹å†…å­˜å¯†é›†å‹åº”ç”¨çš„å½±å“


**âš ï¸ GCå¸¦æ¥çš„é—®é¢˜**
GCå°±åƒ**ç¨‹åºè¿è¡Œæ—¶çš„å¤§æ‰«é™¤**ï¼Œä½†æ‰«é™¤æœŸé—´ç¨‹åºè¦åœä¸‹æ¥ï¼š
- **Stop-The-Worldåœé¡¿**ï¼šGCè¿è¡Œæ—¶åº”ç”¨æš‚åœå“åº”
- **ååé‡ä¸‹é™**ï¼šé¢‘ç¹GCå ç”¨CPUæ—¶é—´
- **å“åº”æ—¶é—´ä¸ç¨³å®š**ï¼šGCå¯¼è‡´å»¶è¿Ÿæ³¢åŠ¨å¤§

**ğŸ“Š å†…å­˜åˆ†ä»£ç®¡ç†åŸç†**
```
JVMå†…å­˜åˆ†ä»£ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                å¹´è€ä»£ (Old Gen)              â”‚
â”‚  é•¿æœŸå­˜æ´»çš„å¯¹è±¡ï¼ŒGCé¢‘ç‡ä½ä½†è€—æ—¶é•¿            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Eden Space    â”‚    Survivor 0 & 1       â”‚
â”‚   æ–°å¯¹è±¡è¯ç”Ÿåœ°   â”‚    ä¸´æ—¶ä¸­è½¬ç«™             â”‚
â”‚                â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        å¹´è½»ä»£ (Young Gen)
    
GCè¿‡ç¨‹ï¼š
1. Minor GCï¼šæ¸…ç†å¹´è½»ä»£ï¼Œé¢‘ç¹ä½†å¿«é€Ÿ
2. Major GCï¼šæ¸…ç†å¹´è€ä»£ï¼Œä¸é¢‘ç¹ä½†è€—æ—¶
3. Full GCï¼šæ¸…ç†æ•´ä¸ªå †ï¼Œæœ€è€—æ—¶
```

### 4.2 GCè°ƒä¼˜æ ¸å¿ƒç­–ç•¥


**ğŸ¯ è°ƒä¼˜çš„ä¸‰ä¸ªå±‚æ¬¡**

**Level 1: åŸºç¡€å‚æ•°è°ƒä¼˜**
```bash
# è®¾ç½®å †å†…å­˜å¤§å°
-Xms4g -Xmx8g  # åˆå§‹4Gï¼Œæœ€å¤§8G

# å¹´è½»ä»£å’Œè€å¹´ä»£æ¯”ä¾‹
-XX:NewRatio=3  # è€å¹´ä»£:å¹´è½»ä»£ = 3:1

# Edenå’ŒSurvivoræ¯”ä¾‹  
-XX:SurvivorRatio=8  # Eden:Survivor = 8:1
```

**Level 2: GCç®—æ³•é€‰æ‹©**
```
ä¸åŒåœºæ™¯çš„GCé€‰æ‹©ï¼š

é«˜ååé‡åœºæ™¯ â†’ Parallel GC
-XX:+UseParallelGC

ä½å»¶è¿Ÿåœºæ™¯ â†’ G1 GC  
-XX:+UseG1GC -XX:MaxGCPauseMillis=200

è¶…ä½å»¶è¿Ÿåœºæ™¯ â†’ ZGC/Shenandoah
-XX:+UseZGC
```

**Level 3: åº”ç”¨å±‚ä¼˜åŒ–**
- **å‡å°‘å¯¹è±¡åˆ›å»º**ï¼šå¤ç”¨å¯¹è±¡ï¼Œä½¿ç”¨åŸå§‹ç±»å‹
- **é¿å…å¤§å¯¹è±¡**ï¼šå¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£
- **æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ**ï¼šåŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¼•ç”¨

### 4.3 GCç›‘æ§ä¸åˆ†æ


**ğŸ“ˆ å…³é”®GCæŒ‡æ ‡**
```java
// GCç›‘æ§ç¤ºä¾‹ä»£ç 
public class GCMonitor {
    public void printGCStats() {
        List<GarbageCollectorMXBean> gcBeans = ManagementFactory.getGarbageCollectorMXBeans();
        
        for (GarbageCollectorMXBean gcBean : gcBeans) {
            System.out.println("GCåç§°: " + gcBean.getName());
            System.out.println("GCæ¬¡æ•°: " + gcBean.getCollectionCount());
            System.out.println("GCè€—æ—¶: " + gcBean.getCollectionTime() + "ms");
            System.out.println("å¹³å‡GCæ—¶é—´: " + 
                (gcBean.getCollectionTime() / gcBean.getCollectionCount()) + "ms");
        }
    }
}
```

**ğŸ¯ GCè°ƒä¼˜ç›®æ ‡**
| æŒ‡æ ‡ç±»å‹ | **ç›®æ ‡å€¼** | **è¯´æ˜** | **ä¼˜åŒ–æ‰‹æ®µ** |
|---------|-----------|---------|-------------|
| ğŸ• **åœé¡¿æ—¶é—´** | `< 100ms` | `ç”¨æˆ·æ„ŸçŸ¥å»¶è¿Ÿ` | `é€‰æ‹©ä½å»¶è¿ŸGCï¼Œå‡å°‘å †å¤§å°` |
| ğŸ“Š **ååé‡** | `> 95%` | `åº”ç”¨è¿è¡Œæ—¶é—´æ¯”ä¾‹` | `å¢å¤§å †å†…å­˜ï¼Œé€‰æ‹©å¹¶è¡ŒGC` |
| ğŸ“ˆ **GCé¢‘ç‡** | `Minor GC < 1æ¬¡/ç§’` | `GCè§¦å‘é¢‘ç‡` | `è°ƒæ•´å¹´è½»ä»£å¤§å°ï¼Œå¯¹è±¡æ± åŒ–` |

---

## 5. ğŸ§® å†…å­˜åˆ†é…ç®—æ³•ä¼˜åŒ–


### 5.1 å†…å­˜åˆ†é…ç®—æ³•ç±»å‹


**ğŸ“‹ å¸¸è§åˆ†é…ç®—æ³•**

**ğŸ”¸ é¡ºåºåˆ†é…ï¼ˆSequential Allocationï¼‰**
```
å·¥ä½œåŸç†ï¼šåƒæ’é˜Ÿä¸€æ ·æŒ‰é¡ºåºåˆ†é…å†…å­˜

å†…å­˜å¸ƒå±€ï¼š
â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Obj1â”‚ Obj2â”‚ Obj3â”‚ Obj4â”‚   Free   â”‚
â”œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      å·²åˆ†é…åŒºåŸŸ        ç©ºé—²åŒºåŸŸ

ä¼˜ç‚¹ï¼šåˆ†é…é€Ÿåº¦æå¿«ï¼Œåªéœ€ç§»åŠ¨æŒ‡é’ˆ
ç¼ºç‚¹ï¼šæ— æ³•å›æ”¶ä¸­é—´é‡Šæ”¾çš„å†…å­˜ï¼ˆå†…å­˜ç¢ç‰‡ï¼‰
é€‚ç”¨ï¼šçŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ï¼Œå¦‚å¹´è½»ä»£åˆ†é…
```

**ğŸ”¸ ç©ºé—²é“¾è¡¨ï¼ˆFree Listï¼‰**
```
å·¥ä½œåŸç†ï¼šç»´æŠ¤ç©ºé—²å†…å­˜å—çš„é“¾è¡¨

ç©ºé—²å—é“¾è¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
â”‚ 64B â”‚â”€â”€â”€â–¶â”‚128B â”‚â”€â”€â”€â–¶â”‚256B â”‚ â”€â”€â–¶ NULL
â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜

åˆ†é…ç­–ç•¥ï¼š
â€¢ First Fitï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å—
â€¢ Best Fitï¼šæ‰¾åˆ°æœ€å°çš„è¶³å¤Ÿå¤§çš„å—  
â€¢ Worst Fitï¼šæ‰¾åˆ°æœ€å¤§çš„å—
```

### 5.2 å†…å­˜åˆ†é…å™¨è®¾è®¡åŸåˆ™


**ğŸ’¡ é«˜æ•ˆåˆ†é…å™¨çš„ç‰¹ç‚¹**

**ğŸ¯ åˆ†çº§åˆ†é…ç­–ç•¥**
```java
public class TieredAllocator {
    // å°å¯¹è±¡æ± ï¼ˆ<= 256Bï¼‰
    private final ObjectPool<ByteBuffer> smallPool;
    // ä¸­ç­‰å¯¹è±¡æ± ï¼ˆ256B - 4KBï¼‰
    private final ObjectPool<ByteBuffer> mediumPool;
    // å¤§å¯¹è±¡ç›´æ¥åˆ†é…
    
    public ByteBuffer allocate(int size) {
        if (size <= 256) {
            return smallPool.borrow();
        } else if (size <= 4096) {
            return mediumPool.borrow();
        } else {
            return ByteBuffer.allocate(size);  // ç›´æ¥åˆ†é…
        }
    }
}
```

**ğŸ”§ SLABåˆ†é…å™¨æ€æƒ³**
```
SLABåˆ†é…å™¨æ ¸å¿ƒæ¦‚å¿µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SLAB (1MB)              â”‚
â”œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¤
â”‚64â”‚64â”‚64â”‚64â”‚64â”‚64â”‚64â”‚64â”‚64â”‚64â”‚ â† 64å­—èŠ‚å¯¹è±¡ä¸“ç”¨
â”œâ”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
â€¢ ç›¸åŒå¤§å°å¯¹è±¡å…±äº«ä¸€ä¸ªSLAB
â€¢ å‡å°‘å†…å­˜ç¢ç‰‡
â€¢ æé«˜ç¼“å­˜å±€éƒ¨æ€§
â€¢ é¢„åˆ†é…é¿å…åŠ¨æ€åˆ†é…å¼€é”€
```

### 5.3 å®é™…ä¼˜åŒ–å®è·µ


**âš¡ å†…å­˜åˆ†é…ä¼˜åŒ–æŠ€å·§**

**æŠ€å·§1ï¼šå¯¹è±¡å¤§å°å¯¹é½**
```java
// é¿å…è¿™æ ·çš„ä¸å¯¹é½ç»“æ„
class BadStruct {
    byte b;     // 1å­—èŠ‚
    int i;      // 4å­—èŠ‚ï¼Œä½†å¯èƒ½éœ€è¦3å­—èŠ‚å¡«å……
    byte b2;    // 1å­—èŠ‚ï¼Œå¯èƒ½éœ€è¦7å­—èŠ‚å¡«å……å¯¹é½
}

// ä¼˜åŒ–åçš„å¯¹é½ç»“æ„
class GoodStruct {
    int i;      // 4å­—èŠ‚
    byte b;     // 1å­—èŠ‚
    byte b2;    // 1å­—èŠ‚ï¼Œæ€»å…±8å­—èŠ‚å¯¹é½
}
```

**æŠ€å·§2ï¼šé¢„åˆ†é…ç­–ç•¥**
```java
public class PreAllocationDemo {
    // é¢„åˆ†é…é›†åˆå®¹é‡ï¼Œé¿å…åŠ¨æ€æ‰©å®¹
    private final List<String> dataList = new ArrayList<>(1000);
    
    // é¢„åˆ†é…StringBuilderå®¹é‡
    private final StringBuilder sb = new StringBuilder(512);
    
    // æ‰¹é‡é¢„åˆ†é…å¯¹è±¡
    private final Object[] objectPool = new Object[100];
    
    public void initializePool() {
        for (int i = 0; i < objectPool.length; i++) {
            objectPool[i] = new MyObject();
        }
    }
}
```

---

## 6. ğŸ“Š æ•°æ®ç»“æ„å†…å­˜ä¼˜åŒ–


### 6.1 é€‰æ‹©å†…å­˜å‹å¥½çš„æ•°æ®ç»“æ„


**ğŸ¯ æ•°æ®ç»“æ„å†…å­˜æ•ˆç‡å¯¹æ¯”**

| æ•°æ®ç»“æ„ | **å†…å­˜å¼€é”€** | **è®¿é—®æ€§èƒ½** | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŒ–å»ºè®®** |
|---------|-------------|-------------|-------------|-------------|
| ğŸ”¢ **ArrayList** | `ä½ï¼Œè¿ç»­å­˜å‚¨` | `éšæœºè®¿é—®O(1)` | `é¢‘ç¹éšæœºè®¿é—®` | `é¢„è®¾å®¹é‡ï¼Œé¿å…æ‰©å®¹` |
| ğŸ”— **LinkedList** | `é«˜ï¼Œæ¯èŠ‚ç‚¹é¢å¤–æŒ‡é’ˆ` | `é¡ºåºè®¿é—®O(n)` | `é¢‘ç¹æ’å…¥åˆ é™¤` | `è€ƒè™‘ä½¿ç”¨æ•°ç»„ä»£æ›¿` |
| ğŸ“‹ **HashMap** | `ä¸­ç­‰ï¼Œå“ˆå¸Œè¡¨å¼€é”€` | `æŸ¥æ‰¾O(1)` | `é”®å€¼å¯¹å­˜å‚¨` | `åˆç†è®¾ç½®åˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­` |
| ğŸŒ³ **TreeMap** | `é«˜ï¼Œçº¢é»‘æ ‘èŠ‚ç‚¹` | `æŸ¥æ‰¾O(log n)` | `éœ€è¦æ’åºçš„æ˜ å°„` | `æ•°æ®é‡å¤§æ—¶è€ƒè™‘å…¶ä»–ç»“æ„` |

**ğŸ’¡ å†…å­˜ä¼˜åŒ–é€‰æ‹©åŸåˆ™**
```
é€‰æ‹©æ•°æ®ç»“æ„çš„è€ƒè™‘å› ç´ ï¼š

æ•°æ®è®¿é—®æ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæœºè®¿é—®    â”‚â”€â”€â”€â–¶â”‚  æ•°ç»„ç±»å‹    â”‚
â”‚  é¢‘ç¹æŸ¥æ‰¾    â”‚    â”‚  ArrayList   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Array      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚  é¡ºåºè®¿é—®    â”‚â”€â”€â”€â–¶â”‚  é“¾è¡¨ç±»å‹    â”‚
â”‚  æ’å…¥åˆ é™¤å¤š  â”‚    â”‚  LinkedList â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å†…å­˜é™åˆ¶ä¸¥æ ¼ï¼š
ä¼˜å…ˆé€‰æ‹©ï¼šæ•°ç»„ > ArrayList > HashMap > LinkedList
```

### 6.2 æ•°æ®å‹ç¼©æŠ€æœ¯


**ğŸ”§ åŸºæœ¬æ•°æ®å‹ç¼©ç­–ç•¥**

**ç­–ç•¥1ï¼šåŸå§‹ç±»å‹æ•°ç»„ä»£æ›¿åŒ…è£…ç±»**
```java
// å†…å­˜æ¶ˆè€—å¤§çš„åšæ³•
List<Integer> numbers = new ArrayList<>();  // æ¯ä¸ªIntegerå¯¹è±¡é¢å¤–å¼€é”€

// å†…å­˜å‹å¥½çš„åšæ³•  
int[] numbers = new int[1000];  // ç›´æ¥å­˜å‚¨åŸå§‹å€¼

// å¯¹æ¯”ï¼š1000ä¸ªæ•´æ•°
// IntegeråŒ…è£…ç±»ï¼š1000 * (12å­—èŠ‚å¯¹è±¡å¤´ + 4å­—èŠ‚intå€¼) = 16KB
// intæ•°ç»„ï¼š1000 * 4å­—èŠ‚ = 4KBï¼ŒèŠ‚çœ75%å†…å­˜
```

**ç­–ç•¥2ï¼šä½æ‰“åŒ…æŠ€æœ¯**
```java
public class BitPackedData {
    private int packedValue;
    
    // å°†4ä¸ªbyteå€¼æ‰“åŒ…åˆ°ä¸€ä¸ªintä¸­
    public void setBytes(byte b0, byte b1, byte b2, byte b3) {
        packedValue = (b0 & 0xFF) << 24 |
                     (b1 & 0xFF) << 16 |  
                     (b2 & 0xFF) << 8 |
                     (b3 & 0xFF);
    }
    
    public byte getByte(int index) {
        return (byte) ((packedValue >> (24 - 8 * index)) & 0xFF);
    }
    
    // èŠ‚çœç©ºé—´ï¼š4ä¸ªbyteå­—æ®µ â†’ 1ä¸ªintå­—æ®µ
}
```

### 6.3 å¯¹è±¡å†…å­˜å¸ƒå±€ä¼˜åŒ–


**ğŸ—ï¸ å­—æ®µæ’åˆ—ä¼˜åŒ–**

**ä¼˜åŒ–å‰çš„å¯¹è±¡å¸ƒå±€**
```java
class BadLayout {
    byte a;      // 1å­—èŠ‚
    long b;      // 8å­—èŠ‚ï¼ˆå¯èƒ½éœ€è¦7å­—èŠ‚å¡«å……ï¼‰
    byte c;      // 1å­—èŠ‚  
    int d;       // 4å­—èŠ‚ï¼ˆå¯èƒ½éœ€è¦3å­—èŠ‚å¡«å……ï¼‰
    // æ€»è®¡ï¼šå¯èƒ½éœ€è¦24å­—èŠ‚ï¼ˆåŒ…å«å¡«å……ï¼‰
}
```

**ä¼˜åŒ–åçš„å¯¹è±¡å¸ƒå±€**
```java  
class GoodLayout {
    long b;      // 8å­—èŠ‚ï¼Œå¯¹é½åˆ°8å­—èŠ‚è¾¹ç•Œ
    int d;       // 4å­—èŠ‚
    byte a;      // 1å­—èŠ‚
    byte c;      // 1å­—èŠ‚
    // æ€»è®¡ï¼š16å­—èŠ‚ï¼ŒèŠ‚çœ33%ç©ºé—´
}
```

**ğŸ¯ å­—æ®µæ’åˆ—åŸåˆ™**
```
å†…å­˜å¯¹é½ä¼˜åŒ–è§„åˆ™ï¼š
1. æŒ‰å­—æ®µå¤§å°é™åºæ’åˆ—ï¼šlong â†’ int â†’ short â†’ byte
2. ç›¸åŒç±»å‹å­—æ®µæ”¾åœ¨ä¸€èµ·
3. å¼•ç”¨ç±»å‹å­—æ®µæ”¾åœ¨æœ€å
4. è€ƒè™‘è®¿é—®é¢‘ç‡ï¼Œå¸¸ç”¨å­—æ®µæ”¾å‰é¢
```

---

## 7. ğŸ” å†…å­˜æ³„æ¼æ£€æµ‹ä¸é¢„é˜²


### 7.1 å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯


**âš ï¸ å…¸å‹å†…å­˜æ³„æ¼æ¨¡å¼**

**æ¨¡å¼1ï¼šç›‘å¬å™¨æœªç§»é™¤**
```java
// å†…å­˜æ³„æ¼çš„ä»£ç 
public class LeakyComponent {
    public void setupListener() {
        GlobalEventBus.register(this);  // æ³¨å†Œç›‘å¬å™¨
        // ä½†ç»„ä»¶é”€æ¯æ—¶å¿˜è®°ç§»é™¤ç›‘å¬å™¨ï¼Œå¯¼è‡´thisæ— æ³•è¢«GC
    }
}

// æ­£ç¡®çš„åšæ³•
public class FixedComponent {
    public void setupListener() {
        GlobalEventBus.register(this);
    }
    
    public void cleanup() {
        GlobalEventBus.unregister(this);  // æ˜¾å¼ç§»é™¤ç›‘å¬å™¨
    }
}
```

**æ¨¡å¼2ï¼šé›†åˆç±»å¼•ç”¨å †ç§¯**
```java
// å®¹æ˜“æ³„æ¼çš„ç¼“å­˜
public class LeakyCache {
    private static final Map<String, Object> cache = new HashMap<>();
    
    public void addToCache(String key, Object value) {
        cache.put(key, value);  // åªæ”¾å…¥ï¼Œä»ä¸æ¸…ç†
    }
}

// æ”¹è¿›çš„ç¼“å­˜
public class FixedCache {
    private final Map<String, Object> cache = new LRUCache<>(1000);  // é™åˆ¶å¤§å°
    
    // æˆ–è€…ä½¿ç”¨å¼±å¼•ç”¨
    private final Map<String, WeakReference<Object>> weakCache = new WeakHashMap<>();
}
```

### 7.2 å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·


**ğŸ”§ æ£€æµ‹å·¥å…·å’Œæ–¹æ³•**

**æ–¹æ³•1ï¼šå †è½¬å‚¨åˆ†æ**
```bash
# ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶
jcmd <pid> GC.run_finalization
jcmd <pid> VM.memory_map > heap_dump.hprof

# ä½¿ç”¨MATå·¥å…·åˆ†æ
# 1. æŸ¥çœ‹å¯¹è±¡æ•°é‡æ’è¡Œ
# 2. åˆ†æGC Rootå¼•ç”¨é“¾  
# 3. æ‰¾å‡ºæ— æ³•é‡Šæ”¾çš„å¯¹è±¡
```

**æ–¹æ³•2ï¼šç¨‹åºåŒ–å†…å­˜ç›‘æ§**
```java
public class MemoryMonitor {
    private final MemoryMXBean memoryBean = ManagementFactory.getMemoryMXBean();
    
    public void checkMemoryUsage() {
        MemoryUsage heapUsage = memoryBean.getHeapMemoryUsage();
        
        long used = heapUsage.getUsed();
        long max = heapUsage.getMax();
        double usage = (double) used / max * 100;
        
        if (usage > 85) {  // å†…å­˜ä½¿ç”¨è¶…è¿‡85%
            System.gc();   // å»ºè®®GC
            logMemoryWarning(usage);
        }
    }
    
    private void logMemoryWarning(double usage) {
        System.err.printf("å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜: %.2f%%\n", usage);
        // å¯ä»¥è§¦å‘å‘Šè­¦ã€è®°å½•æ—¥å¿—ç­‰
    }
}
```

### 7.3 å†…å­˜æ³„æ¼é¢„é˜²ç­–ç•¥


**ğŸ›¡ï¸ é¢„é˜²æœ€ä½³å®è·µ**

**å®è·µ1ï¼šä½¿ç”¨å¼±å¼•ç”¨**
```java
public class CacheWithWeakRef {
    // ä½¿ç”¨å¼±å¼•ç”¨ç¼“å­˜ï¼Œå½“å¯¹è±¡ä¸å†è¢«å¼ºå¼•ç”¨æ—¶è‡ªåŠ¨æ¸…ç†
    private final Map<String, WeakReference<ExpensiveObject>> cache = 
        new ConcurrentHashMap<>();
    
    public ExpensiveObject getOrCreate(String key) {
        WeakReference<ExpensiveObject> ref = cache.get(key);
        ExpensiveObject obj = (ref != null) ? ref.get() : null;
        
        if (obj == null) {
            obj = new ExpensiveObject(key);
            cache.put(key, new WeakReference<>(obj));
        }
        
        return obj;
    }
}
```

**å®è·µ2ï¼šèµ„æºè‡ªåŠ¨ç®¡ç†**
```java
// ä½¿ç”¨try-with-resourcesç¡®ä¿èµ„æºé‡Šæ”¾
public class ResourceManager {
    public void processFile(String filename) {
        try (FileInputStream fis = new FileInputStream(filename);
             BufferedReader reader = new BufferedReader(new InputStreamReader(fis))) {
            
            // å¤„ç†æ–‡ä»¶å†…å®¹
            processContent(reader);
            
        } // èµ„æºè‡ªåŠ¨å…³é—­ï¼Œä¸ä¼šæ³„æ¼
    }
}
```

---

## 8. ğŸš€ é«˜çº§å†…å­˜ä¼˜åŒ–æŠ€æœ¯


### 8.1 NUMAäº²å’Œæ€§ä¼˜åŒ–


**ğŸ—ï¸ NUMAæ¶æ„ç†è§£**
NUMAï¼ˆNon-Uniform Memory Accessï¼‰å°±æ˜¯**ä¸åŒå†…å­˜è®¿é—®é€Ÿåº¦ä¸åŒ**çš„æ¶æ„ï¼š
```
NUMAç³»ç»Ÿæ¶æ„ç¤ºæ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CPU 0-3       â”‚    â”‚   CPU 4-7       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ L1/L2   â”‚   â”‚    â”‚   â”‚ L1/L2   â”‚   â”‚
â”‚   â”‚ Cache   â”‚   â”‚    â”‚   â”‚ Cache   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Local Memory   â”‚    â”‚  Local Memory   â”‚
â”‚    (å¿«é€Ÿè®¿é—®)    â”‚    â”‚    (å¿«é€Ÿè®¿é—®)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            è·¨èŠ‚ç‚¹è®¿é—®(æ…¢)
            
æ ¸å¿ƒåŸåˆ™ï¼šCPUè®¿é—®æœ¬åœ°å†…å­˜å¿«ï¼Œè®¿é—®è¿œç¨‹å†…å­˜æ…¢
```

**âš¡ NUMAä¼˜åŒ–ç­–ç•¥**
```bash
# æŸ¥çœ‹NUMAæ‹“æ‰‘
numactl --hardware

# ç»‘å®šè¿›ç¨‹åˆ°ç‰¹å®šNUMAèŠ‚ç‚¹
numactl --cpunodebind=0 --membind=0 java -jar myapp.jar

# JVM NUMAæ„ŸçŸ¥è®¾ç½®
-XX:+UseNUMA
```

### 8.2 å¤§é¡µå†…å­˜åº”ç”¨


**ğŸ“ å¤§é¡µå†…å­˜çš„ä¼˜åŠ¿**
å¤§é¡µå†…å­˜å°±æ˜¯**ç”¨æ›´å¤§çš„å†…å­˜é¡µæ¥ç®¡ç†å†…å­˜**ï¼š
- **æ ‡å‡†é¡µé¢**ï¼š4KBä¸€é¡µï¼Œéœ€è¦æ›´å¤šé¡µè¡¨é¡¹
- **å¤§é¡µé¢**ï¼š2MBæˆ–1GBä¸€é¡µï¼Œå‡å°‘é¡µè¡¨å¼€é”€

**ğŸ”§ å¤§é¡µå†…å­˜é…ç½®**
```bash
# é…ç½®ç³»ç»Ÿå¤§é¡µ
echo 1024 > /proc/sys/vm/nr_hugepages  # åˆ†é…1024ä¸ª2MBå¤§é¡µ

# JVMä½¿ç”¨å¤§é¡µ
-XX:+UseLargePages
-XX:LargePageSizeInBytes=2m

# éªŒè¯å¤§é¡µä½¿ç”¨æƒ…å†µ
cat /proc/meminfo | grep Huge
```

**ğŸ’¡ å¤§é¡µå†…å­˜é€‚ç”¨åœºæ™¯**
- **å¤§å †å†…å­˜åº”ç”¨**ï¼šå †å†…å­˜ > 4GB
- **å†…å­˜å¯†é›†å‹è®¡ç®—**ï¼šé¢‘ç¹å†…å­˜è®¿é—®
- **ä½å»¶è¿Ÿè¦æ±‚**ï¼šå‡å°‘TLBç¼ºå¤±

### 8.3 é›¶æ‹·è´å†…å­˜æ“ä½œ


**ğŸ”„ é›¶æ‹·è´æŠ€æœ¯åŸç†**
é›¶æ‹·è´å°±æ˜¯**å‡å°‘æ•°æ®åœ¨å†…å­˜ä¸­çš„å¤åˆ¶æ¬¡æ•°**ï¼š

```
ä¼ ç»ŸIOæµç¨‹ï¼š
ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒº â†’ ç”¨æˆ·ç¼“å†²åŒº â†’ Socketç¼“å†²åŒº â†’ ç½‘å¡
     (æ‹·è´1)      (æ‹·è´2)        (æ‹·è´3)

é›¶æ‹·è´æµç¨‹ï¼š
ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒº â†’ ç½‘å¡
     (æ‹·è´1ï¼Œæ— æ³•é¿å…)
     
å‡å°‘äº†2æ¬¡å†…å­˜æ‹·è´ï¼
```

**ğŸ’» Javaé›¶æ‹·è´å®ç°**
```java
public class ZeroCopyExample {
    // ä¼ ç»Ÿæ–¹å¼ï¼šå¤šæ¬¡æ‹·è´
    public void traditionalCopy(FileInputStream in, SocketChannel out) throws IOException {
        byte[] buffer = new byte[8192];
        ByteBuffer bb = ByteBuffer.wrap(buffer);
        int bytesRead;
        
        while ((bytesRead = in.read(buffer)) != -1) {
            bb.rewind();
            bb.limit(bytesRead);
            out.write(bb);  // æ•°æ®ç»è¿‡å¤šæ¬¡æ‹·è´
        }
    }
    
    // é›¶æ‹·è´æ–¹å¼ï¼šç›´æ¥ä¼ è¾“
    public void zeroCopy(FileChannel in, SocketChannel out) throws IOException {
        long position = 0;
        long size = in.size();
        
        while (position < size) {
            // transferToä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯
            long transferred = in.transferTo(position, size - position, out);
            position += transferred;
        }
    }
}
```

### 8.4 å†…å­˜å‹ç¼©æŠ€æœ¯


**ğŸ—œï¸ å†…å­˜å‹ç¼©ç­–ç•¥**

**ç­–ç•¥1ï¼šå¯¹è±¡å‹ç¼©å­˜å‚¨**
```java
public class CompressedStorage {
    // ä½¿ç”¨å‹ç¼©ç®—æ³•å­˜å‚¨å¤§é‡å­—ç¬¦ä¸²
    private final Map<String, byte[]> compressedData = new HashMap<>();
    
    public void store(String key, String value) {
        try {
            // ä½¿ç”¨GZIPå‹ç¼©
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            GZIPOutputStream gzos = new GZIPOutputStream(baos);
            gzos.write(value.getBytes("UTF-8"));
            gzos.close();
            
            compressedData.put(key, baos.toByteArray());
        } catch (IOException e) {
            // å¤„ç†å¼‚å¸¸
        }
    }
    
    public String retrieve(String key) {
        byte[] compressed = compressedData.get(key);
        if (compressed == null) return null;
        
        try {
            // è§£å‹æ•°æ®
            GZIPInputStream gzis = new GZIPInputStream(
                new ByteArrayInputStream(compressed));
            return new String(gzis.readAllBytes(), "UTF-8");
        } catch (IOException e) {
            return null;
        }
    }
}
```

**ç­–ç•¥2ï¼šJVMå‹ç¼©æŒ‡é’ˆ**
```bash
# JVMå‹ç¼©æŒ‡é’ˆé…ç½®ï¼ˆé»˜è®¤å¼€å¯ï¼‰
-XX:+UseCompressedOops      # å‹ç¼©å¯¹è±¡æŒ‡é’ˆ
-XX:+UseCompressedClassPointers  # å‹ç¼©ç±»æŒ‡é’ˆ

# æ•ˆæœï¼šåœ¨64ä½JVMä¸­ï¼ŒæŒ‡é’ˆä»8å­—èŠ‚å‹ç¼©åˆ°4å­—èŠ‚
# é€‚ç”¨æ¡ä»¶ï¼šå †å†…å­˜ < 32GB
```

---

## 9. ğŸ“ˆ å†…å­˜ç›‘æ§ä¸è°ƒä¼˜å®è·µ


### 9.1 å†…å­˜ç›‘æ§æŒ‡æ ‡ä½“ç³»


**ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡**

| æŒ‡æ ‡ç±»åˆ« | **å…·ä½“æŒ‡æ ‡** | **æ­£å¸¸èŒƒå›´** | **å¼‚å¸¸ä¿¡å·** | **å¤„ç†å»ºè®®** |
|---------|------------|-------------|-------------|-------------|
| ğŸ§  **å †å†…å­˜** | `å †ä½¿ç”¨ç‡` | `< 80%` | `æŒç»­ > 85%` | `å¢åŠ å †å†…å­˜æˆ–ä¼˜åŒ–ä»£ç ` |
| ğŸ”„ **GCæ€§èƒ½** | `GCé¢‘ç‡` | `< 1æ¬¡/ç§’` | `> 5æ¬¡/ç§’` | `è°ƒæ•´å †å¤§å°ï¼Œä¼˜åŒ–å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ` |
| â±ï¸ **GCå»¶è¿Ÿ** | `åœé¡¿æ—¶é—´` | `< 100ms` | `> 500ms` | `é€‰æ‹©ä½å»¶è¿ŸGCç®—æ³•` |
| ğŸ“ˆ **å†…å­˜å¢é•¿** | `å†…å­˜å¢é•¿ç‡` | `ç¨³å®š` | `æŒç»­å¢é•¿` | `æ£€æŸ¥å†…å­˜æ³„æ¼` |

### 9.2 å®æ—¶å†…å­˜ç›‘æ§å®ç°


**ğŸ”§ ç›‘æ§ç³»ç»Ÿå®ç°**
```java
@Component
public class MemoryMonitor {
    private final ScheduledExecutorService scheduler = 
        Executors.newScheduledThreadPool(1);
    
    private final List<MemoryAlert> alerts = new ArrayList<>();
    
    @PostConstruct
    public void startMonitoring() {
        // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡å†…å­˜çŠ¶æ€
        scheduler.scheduleAtFixedRate(this::checkMemoryStatus, 0, 30, TimeUnit.SECONDS);
    }
    
    private void checkMemoryStatus() {
        MemoryMXBean memoryBean = ManagementFactory.getMemoryMXBean();
        MemoryUsage heapUsage = memoryBean.getHeapMemoryUsage();
        
        long used = heapUsage.getUsed();
        long max = heapUsage.getMax();
        double usagePercent = (double) used / max * 100;
        
        // è®°å½•ç›‘æ§æ•°æ®
        logMemoryMetrics(used, max, usagePercent);
        
        // æ£€æŸ¥å‘Šè­¦æ¡ä»¶
        checkAlertConditions(usagePercent);
    }
    
    private void checkAlertConditions(double usagePercent) {
        if (usagePercent > 90) {
            triggerAlert("CRITICAL", "å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡90%");
        } else if (usagePercent > 80) {
            triggerAlert("WARNING", "å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%");
        }
    }
    
    private void triggerAlert(String level, String message) {
        MemoryAlert alert = new MemoryAlert(level, message, System.currentTimeMillis());
        alerts.add(alert);
        
        // å¯ä»¥å‘é€é‚®ä»¶ã€çŸ­ä¿¡ã€è°ƒç”¨é’©å­ç­‰
        notifyAdministrators(alert);
    }
}
```

### 9.3 å†…å­˜é—®é¢˜è¯Šæ–­æµç¨‹


**ğŸ” é—®é¢˜è¯Šæ–­æ­¥éª¤**

```
å†…å­˜é—®é¢˜è¯Šæ–­æµç¨‹ï¼š

1. ç›‘æ§å‘Šè­¦è§¦å‘
   â†“
2. æ”¶é›†åŸºç¡€ä¿¡æ¯
   â€¢ JVMå‚æ•°é…ç½®
   â€¢ GCæ—¥å¿—åˆ†æ  
   â€¢ å †å†…å­˜å¿«ç…§
   â†“
3. åˆ†æå†…å­˜ä½¿ç”¨æ¨¡å¼
   â€¢ å¯¹è±¡åˆ†å¸ƒåˆ†æ
   â€¢ GCè¡Œä¸ºåˆ†æ
   â€¢ å†…å­˜æ³„æ¼æ’æŸ¥
   â†“  
4. åˆ¶å®šä¼˜åŒ–æ–¹æ¡ˆ
   â€¢ å‚æ•°è°ƒä¼˜
   â€¢ ä»£ç ä¼˜åŒ–
   â€¢ æ¶æ„è°ƒæ•´
   â†“
5. å®æ–½å’ŒéªŒè¯
   â€¢ ç°åº¦å‘å¸ƒ
   â€¢ æ•ˆæœç›‘æ§
   â€¢ æŒç»­ä¼˜åŒ–
```

**ğŸ› ï¸ è¯Šæ–­å·¥å…·ç®±**
```bash
# 1. åŸºç¡€ä¿¡æ¯æ”¶é›†
jinfo <pid>                    # æŸ¥çœ‹JVMå‚æ•°
jstat -gc <pid> 5s             # æ¯5ç§’è¾“å‡ºGCä¿¡æ¯
jmap -histo <pid>              # æŸ¥çœ‹å¯¹è±¡åˆ†å¸ƒ

# 2. å†…å­˜è½¬å‚¨åˆ†æ
jmap -dump:format=b,file=heap.hprof <pid>  # ç”Ÿæˆå †è½¬å‚¨
# ç”¨Eclipse MATåˆ†æheap.hprof

# 3. GCæ—¥å¿—åˆ†æ
-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:gc.log
# ç”¨GCVieweråˆ†ægc.log

# 4. åœ¨çº¿åˆ†æå·¥å…·
jvisualvm                      # å›¾å½¢åŒ–ç›‘æ§å·¥å…·
jhsdb jmap --heap --pid <pid>  # Java 9+çš„å †åˆ†æ
```

### 9.4 è°ƒä¼˜æ•ˆæœéªŒè¯


**ğŸ“ˆ è°ƒä¼˜å‰åå¯¹æ¯”**
```java
public class TuningResult {
    public static class MemoryMetrics {
        public final long heapUsed;
        public final double gcTime;
        public final int gcCount;
        public final double throughput;
        
        // æ„é€ å™¨å’Œå…¶ä»–æ–¹æ³•...
    }
    
    public void compareBeforeAfter() {
        MemoryMetrics before = new MemoryMetrics(
            8_000_000_000L,  // 8GBå †ä½¿ç”¨
            5.2,             // 5.2%æ—¶é—´åœ¨GC
            150,             // 150æ¬¡GC
            94.8             // 94.8%ååé‡
        );
        
        MemoryMetrics after = new MemoryMetrics(
            6_000_000_000L,  // 6GBå †ä½¿ç”¨
            2.1,             // 2.1%æ—¶é—´åœ¨GC  
            80,              // 80æ¬¡GC
            97.9             // 97.9%ååé‡
        );
        
        printComparison(before, after);
    }
    
    private void printComparison(MemoryMetrics before, MemoryMetrics after) {
        System.out.printf("å †å†…å­˜ä½¿ç”¨: %.1fGB â†’ %.1fGB (å‡å°‘%.1f%%)\n",
            before.heapUsed / 1e9, after.heapUsed / 1e9,
            (before.heapUsed - after.heapUsed) * 100.0 / before.heapUsed);
            
        System.out.printf("GCæ—¶é—´å æ¯”: %.1f%% â†’ %.1f%% (æ”¹å–„%.1f%%)\n",
            before.gcTime, after.gcTime,
            (before.gcTime - after.gcTime) * 100.0 / before.gcTime);
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å†…å­˜æ± ç®¡ç†ï¼šé¢„åˆ†é…å¤§å—å†…å­˜ï¼Œé¿å…é¢‘ç¹ç”³è¯·é‡Šæ”¾
ğŸ”¸ å¯¹è±¡æ± å¤ç”¨ï¼šé‡ç”¨å¯¹è±¡å®ä¾‹ï¼Œå‡å°‘åˆ›å»ºé”€æ¯å¼€é”€  
ğŸ”¸ GCè°ƒä¼˜ï¼šé€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨ï¼Œä¼˜åŒ–GCå‚æ•°
ğŸ”¸ å†…å­˜åˆ†é…ä¼˜åŒ–ï¼šé€‰æ‹©é«˜æ•ˆçš„åˆ†é…ç®—æ³•ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡
ğŸ”¸ æ•°æ®ç»“æ„ä¼˜åŒ–ï¼šé€‰æ‹©å†…å­˜å‹å¥½çš„æ•°æ®ç»“æ„ï¼Œé¿å…å†…å­˜æµªè´¹
ğŸ”¸ å†…å­˜æ³„æ¼é˜²èŒƒï¼šåŠæ—¶é‡Šæ”¾å¼•ç”¨ï¼Œä½¿ç”¨å¼±å¼•ç”¨ï¼Œèµ„æºç®¡ç†
ğŸ”¸ é«˜çº§ä¼˜åŒ–æŠ€æœ¯ï¼šNUMAäº²å’Œæ€§ï¼Œå¤§é¡µå†…å­˜ï¼Œé›¶æ‹·è´æŠ€æœ¯
ğŸ”¸ ç›‘æ§è°ƒä¼˜ï¼šå»ºç«‹ç›‘æ§ä½“ç³»ï¼Œå®šä½é—®é¢˜ï¼ŒæŒç»­ä¼˜åŒ–
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å†…å­˜ä¼˜åŒ–çš„æ ¸å¿ƒæ€è·¯**
```
å‡å°‘ä½¿ç”¨ï¼ˆReduceï¼‰ï¼š
â€¢ é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„
â€¢ å‹ç¼©å­˜å‚¨æ ¼å¼
â€¢ å»é™¤å†—ä½™æ•°æ®

æé«˜æ•ˆç‡ï¼ˆReuseï¼‰ï¼š
â€¢ å¯¹è±¡æ± å’Œå†…å­˜æ± 
â€¢ ç¼“å­˜å’Œå¤ç”¨æœºåˆ¶
â€¢ é¿å…é‡å¤åˆ†é…

æ”¹å–„æ¨¡å¼ï¼ˆReorganizeï¼‰ï¼š
â€¢ æé«˜å†…å­˜å±€éƒ¨æ€§
â€¢ å‡å°‘å†…å­˜ç¢ç‰‡
â€¢ ä¼˜åŒ–è®¿é—®æ¨¡å¼
```

**ğŸ”¹ æ€§èƒ½ä¸å†…å­˜çš„å¹³è¡¡**
```
æƒè¡¡è€ƒè™‘ï¼š
æ—¶é—´æ¢ç©ºé—´ â†” ç©ºé—´æ¢æ—¶é—´
ç®€å•æ€§     â†” æ€§èƒ½ä¼˜åŒ–
å¯ç»´æŠ¤æ€§   â†” æè‡´ä¼˜åŒ–

é€‰æ‹©åŸåˆ™ï¼š
â€¢ æ ¹æ®å®é™…éœ€æ±‚ç¡®å®šä¼˜åŒ–ç›®æ ‡
â€¢ å…ˆä¼˜åŒ–ä¸»è¦ç“¶é¢ˆï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–
â€¢ ç›‘æ§éªŒè¯ä¼˜åŒ–æ•ˆæœ
â€¢ ä¿æŒä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ ä¸åŒåœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥**

| åº”ç”¨ç±»å‹ | **ä¸»è¦é—®é¢˜** | **ä¼˜åŒ–é‡ç‚¹** | **æ¨èæŠ€æœ¯** |
|---------|-------------|-------------|-------------|
| ğŸŒ **Webåº”ç”¨** | `è¯·æ±‚å¹¶å‘é«˜` | `å‡å°‘GCåœé¡¿` | `å¯¹è±¡æ± ï¼ŒG1 GC` |
| ğŸ“Š **å¤§æ•°æ®å¤„ç†** | `å†…å­˜å ç”¨å¤§` | `å‹ç¼©å­˜å‚¨` | `å†…å­˜æ± ï¼Œæ•°æ®å‹ç¼©` |
| ğŸ® **æ¸¸æˆæœåŠ¡** | `å®æ—¶æ€§è¦æ±‚` | `é¿å…GCåœé¡¿` | `å†…å­˜é¢„åˆ†é…ï¼ŒZGC` |
| ğŸ”„ **æ¶ˆæ¯é˜Ÿåˆ—** | `ååé‡é«˜` | `å‡å°‘å†…å­˜åˆ†é…` | `é›¶æ‹·è´ï¼ŒNUMAä¼˜åŒ–` |

**ğŸ› ï¸ ä¼˜åŒ–å®æ–½æ­¥éª¤**
```
1. é—®é¢˜è¯†åˆ«
   â€¢ ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
   â€¢ åˆ†ææ€§èƒ½ç“¶é¢ˆ
   â€¢ ç¡®å®šä¼˜åŒ–ç›®æ ‡

2. æ–¹æ¡ˆè®¾è®¡  
   â€¢ é€‰æ‹©é€‚åˆçš„ä¼˜åŒ–æŠ€æœ¯
   â€¢ è¯„ä¼°å®æ–½å¤æ‚åº¦
   â€¢ åˆ¶å®šæµ‹è¯•è®¡åˆ’

3. å®æ–½éªŒè¯
   â€¢ å°èŒƒå›´æµ‹è¯•
   â€¢ æ€§èƒ½å¯¹æ¯”åˆ†æ
   â€¢ é€æ­¥æ¨å¹¿åº”ç”¨

4. æŒç»­ç›‘æ§
   â€¢ å»ºç«‹ç›‘æ§æŒ‡æ ‡
   â€¢ å®šæœŸæ•ˆæœè¯„ä¼°  
   â€¢ åŠ¨æ€è°ƒæ•´ä¼˜åŒ–
```

**âš ï¸ å¸¸è§ä¼˜åŒ–è¯¯åŒº**
- **è¿‡æ—©ä¼˜åŒ–**ï¼šåœ¨é—®é¢˜æ˜ç¡®å‰å°±å¼€å§‹ä¼˜åŒ–
- **ç›²ç›®ä¼˜åŒ–**ï¼šä¸åŸºäºç›‘æ§æ•°æ®çš„ä¼˜åŒ–
- **è¿‡åº¦ä¼˜åŒ–**ï¼šç‰ºç‰²å¯ç»´æŠ¤æ€§è¿½æ±‚æè‡´æ€§èƒ½
- **å•ä¸€ä¼˜åŒ–**ï¼šåªå…³æ³¨æŸä¸€ä¸ªæ–¹é¢ï¼Œå¿½è§†æ•´ä½“å¹³è¡¡

### 10.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ å†…å­˜ä¼˜åŒ–æœ€ä½³å®è·µ**
```
è®¾è®¡é˜¶æ®µï¼š
âœ… é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•
âœ… åˆç†è®¾è®¡å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ
âœ… è€ƒè™‘å†…å­˜ä½¿ç”¨æ¨¡å¼

å¼€å‘é˜¶æ®µï¼š
âœ… åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¼•ç”¨
âœ… ä½¿ç”¨å¯¹è±¡æ± å’Œç¼“å­˜æœºåˆ¶
âœ… é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡

éƒ¨ç½²é˜¶æ®µï¼š
âœ… åˆç†é…ç½®JVMå‚æ•°
âœ… é€‰æ‹©é€‚åˆçš„GCç®—æ³•
âœ… ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ

è¿ç»´é˜¶æ®µï¼š
âœ… å®šæœŸåˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿
âœ… åŠæ—¶å‘ç°å’Œå¤„ç†å†…å­˜é—®é¢˜
âœ… æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
å†…å­˜ä¼˜åŒ–ä¸‰å­—ç»ï¼š
æ± åŒ–ç”¨ï¼Œå¤ç”¨å¥½ï¼Œåˆ†é…å°‘ï¼Œç¢ç‰‡æ¶ˆ
GCè°ƒï¼Œç›‘æ§çœ‹ï¼Œæ³„æ¼é˜²ï¼Œæ€§èƒ½é«˜
æ•°æ®å‹ï¼Œç»“æ„ä¼˜ï¼Œé›¶æ‹·è´ï¼ŒNUMAè·‘
æŒç»­æµ‹ï¼Œæ•ˆæœé‡ï¼Œå¹³è¡¡å–ï¼Œç›®æ ‡åˆ°
```