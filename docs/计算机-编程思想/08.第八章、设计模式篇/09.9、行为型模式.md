---
title: 9ã€è¡Œä¸ºå‹æ¨¡å¼
---
## ğŸ“š ç›®å½•

1. [è¡Œä¸ºå‹æ¨¡å¼æ¦‚è¿°](#1-è¡Œä¸ºå‹æ¨¡å¼æ¦‚è¿°)
2. [ç­–ç•¥æ¨¡å¼ï¼ˆæ›¿ä»£if-elseï¼‰](#2-ç­–ç•¥æ¨¡å¼æ›¿ä»£if-else)
3. [è§‚å¯Ÿè€…æ¨¡å¼](#3-è§‚å¯Ÿè€…æ¨¡å¼)
4. [çŠ¶æ€æœºæ¨¡å¼](#4-çŠ¶æ€æœºæ¨¡å¼)
5. [æ¨¡æ¿æ–¹æ³•æ¨¡å¼](#5-æ¨¡æ¿æ–¹æ³•æ¨¡å¼)
6. [è¡Œä¸ºå‹æ ¸å¿ƒåº”ç”¨](#6-è¡Œä¸ºå‹æ ¸å¿ƒåº”ç”¨)
7. [è¡Œä¸ºå‹æ‰©å±•åº”ç”¨](#7-è¡Œä¸ºå‹æ‰©å±•åº”ç”¨)
8. [ç­–ç•¥æ¨¡å¼å®è·µ](#8-ç­–ç•¥æ¨¡å¼å®è·µ)
9. [çŠ¶æ€æœºå®è·µ](#9-çŠ¶æ€æœºå®è·µ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è¡Œä¸ºå‹æ¨¡å¼æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯è¡Œä¸ºå‹æ¨¡å¼


**ç®€å•ç†è§£**ï¼šè¡Œä¸ºå‹æ¨¡å¼å°±æ˜¯ä¸“é—¨è§£å†³"å¯¹è±¡ä¹‹é—´å¦‚ä½•åä½œ"çš„è®¾è®¡å¥—è·¯ã€‚

```
ç”Ÿæ´»æ¯”å–»ï¼š
å°±åƒä¸€ä¸ªå›¢é˜Ÿå·¥ä½œï¼š
- æ¯ä¸ªäººæœ‰è‡ªå·±çš„èŒè´£ï¼ˆå„å¸å…¶èŒï¼‰
- éœ€è¦ç›¸äº’é…åˆå®Œæˆä»»åŠ¡ï¼ˆåä½œæ²Ÿé€šï¼‰
- æœ‰å›ºå®šçš„å·¥ä½œæµç¨‹ï¼ˆè¡Œä¸ºæ¨¡å¼ï¼‰

ç¼–ç¨‹ä¸­ï¼š
- å¯¹è±¡æœ‰å„è‡ªçš„åŠŸèƒ½ï¼ˆå•ä¸€èŒè´£ï¼‰
- å¯¹è±¡é—´éœ€è¦äº¤äº’ï¼ˆè§£è€¦åä½œï¼‰
- æœ‰è§„èŒƒçš„äº¤äº’æ–¹å¼ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰
```

### 1.2 è¡Œä¸ºå‹æ¨¡å¼è§£å†³çš„æ ¸å¿ƒé—®é¢˜


**ğŸ”¸ å¯¹è±¡é—´çš„èŒè´£åˆ†é…**
```
é—®é¢˜ï¼šå¦‚ä½•è®©å¯¹è±¡å„å¸å…¶èŒï¼Œé¿å…åŠŸèƒ½æ··ä¹±ï¼Ÿ
è§£å†³ï¼šæ˜ç¡®å®šä¹‰æ¯ä¸ªå¯¹è±¡çš„è¡Œä¸ºè¾¹ç•Œ

ä¸¾ä¾‹ï¼š
âŒ åçš„è®¾è®¡ï¼šä¸€ä¸ªç±»æ—¢å¤„ç†æ•°æ®ï¼Œåˆæ˜¾ç¤ºç•Œé¢ï¼Œè¿˜ç®¡ç†ä¸šåŠ¡é€»è¾‘
âœ… å¥½çš„è®¾è®¡ï¼šæ•°æ®ç±»åªç®¡æ•°æ®ï¼Œæ˜¾ç¤ºç±»åªç®¡ç•Œé¢ï¼Œé€»è¾‘ç±»åªç®¡ä¸šåŠ¡
```

**ğŸ”¸ å¯¹è±¡é—´çš„é€šä¿¡æ–¹å¼**
```
é—®é¢˜ï¼šå¯¹è±¡ä¹‹é—´å¦‚ä½•ä¼ é€’ä¿¡æ¯ï¼Œé¿å…ç´§å¯†è€¦åˆï¼Ÿ
è§£å†³ï¼šå»ºç«‹è§„èŒƒçš„é€šä¿¡æœºåˆ¶

ä¸¾ä¾‹ï¼š
âŒ ç›´æ¥è°ƒç”¨ï¼šAç›´æ¥è°ƒç”¨Bçš„æ–¹æ³•ï¼Œä¿®æ”¹Bæ—¶Aä¹Ÿè¦æ”¹
âœ… äº‹ä»¶é€šçŸ¥ï¼šAå‘å‡ºäº‹ä»¶ï¼ŒBç›‘å¬äº‹ä»¶ï¼ŒAå’ŒBè§£è€¦
```

### 1.3 è¡Œä¸ºå‹æ¨¡å¼çš„ç‰¹ç‚¹


```
ğŸ”¸ å…³æ³¨äº¤äº’ï¼šé‡ç‚¹åœ¨å¯¹è±¡é—´å¦‚ä½•åä½œ
ğŸ”¸ è´£ä»»åˆ†ç¦»ï¼šæ¯ä¸ªå¯¹è±¡èŒè´£æ˜ç¡®ï¼Œä¸è¶Šç•Œ
ğŸ”¸ çµæ´»æ‰©å±•ï¼šæ–°å¢è¡Œä¸ºä¸å½±å“ç°æœ‰ä»£ç 
ğŸ”¸ é™ä½è€¦åˆï¼šå¯¹è±¡é—´ä¾èµ–å…³ç³»æœ€å°åŒ–
```

---

## 2. ğŸ”„ ç­–ç•¥æ¨¡å¼ï¼ˆæ›¿ä»£if-elseï¼‰


### 2.1 ç­–ç•¥æ¨¡å¼æ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šç­–ç•¥æ¨¡å¼å°±æ˜¯æŠŠä¸åŒçš„å¤„ç†æ–¹å¼å°è£…æˆç‹¬ç«‹çš„"ç­–ç•¥"ï¼Œéœ€è¦æ—¶é€‰æ‹©åˆé€‚çš„ç­–ç•¥æ¥æ‰§è¡Œã€‚

```
ç”Ÿæ´»æ¯”å–»ï¼š
å‡ºè¡Œæ–¹å¼é€‰æ‹©ï¼š
- è¿‘è·ç¦»ï¼šæ­¥è¡Œç­–ç•¥
- ä¸­è·ç¦»ï¼šéª‘è½¦ç­–ç•¥  
- è¿œè·ç¦»ï¼šå¼€è½¦ç­–ç•¥
- è¶…è¿œè·ç¦»ï¼šé£æœºç­–ç•¥

æ ¹æ®è·ç¦»é€‰æ‹©ä¸åŒçš„å‡ºè¡Œç­–ç•¥ï¼Œæ¯ç§ç­–ç•¥éƒ½æ˜¯ç‹¬ç«‹çš„è§£å†³æ–¹æ¡ˆ
```

### 2.2 ä¸ºä»€ä¹ˆéœ€è¦ç­–ç•¥æ¨¡å¼


**ğŸš« ä¼ ç»Ÿif-elseçš„é—®é¢˜**
```java
// âŒ ç³Ÿç³•çš„if-elseå†™æ³•
public class PaymentProcessor {
    public void processPayment(String type, double amount) {
        if ("wechat".equals(type)) {
            // å¾®ä¿¡æ”¯ä»˜é€»è¾‘ï¼ˆ20è¡Œä»£ç ï¼‰
            System.out.println("å¾®ä¿¡æ”¯ä»˜ï¼š" + amount);
            // ... å¤æ‚çš„å¾®ä¿¡æ”¯ä»˜å¤„ç†
        } else if ("alipay".equals(type)) {
            // æ”¯ä»˜å®æ”¯ä»˜é€»è¾‘ï¼ˆ25è¡Œä»£ç ï¼‰
            System.out.println("æ”¯ä»˜å®æ”¯ä»˜ï¼š" + amount);
            // ... å¤æ‚çš„æ”¯ä»˜å®å¤„ç†
        } else if ("bank".equals(type)) {
            // é“¶è¡Œå¡æ”¯ä»˜é€»è¾‘ï¼ˆ30è¡Œä»£ç ï¼‰
            System.out.println("é“¶è¡Œå¡æ”¯ä»˜ï¼š" + amount);
            // ... å¤æ‚çš„é“¶è¡Œå¡å¤„ç†
        } else {
            throw new IllegalArgumentException("ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼");
        }
    }
}
```

**é—®é¢˜åˆ†æ**ï¼š
- **ä»£ç è†¨èƒ€**ï¼šæ¯å¢åŠ ä¸€ç§æ”¯ä»˜æ–¹å¼ï¼Œæ–¹æ³•å°±æ›´é•¿
- **éš¾ä»¥ç»´æŠ¤**ï¼šä¿®æ”¹ä¸€ç§æ”¯ä»˜æ–¹å¼å¯èƒ½å½±å“å…¶ä»–æ–¹å¼
- **è¿åå¼€é—­åŸåˆ™**ï¼šæ–°å¢æ”¯ä»˜æ–¹å¼å¿…é¡»ä¿®æ”¹åŸæœ‰ä»£ç 
- **æµ‹è¯•å›°éš¾**ï¼šæµ‹è¯•ä¸€ç§æ”¯ä»˜æ–¹å¼è¦åŠ è½½æ‰€æœ‰æ”¯ä»˜é€»è¾‘

### 2.3 ç­–ç•¥æ¨¡å¼çš„è§£å†³æ–¹æ¡ˆ


**ğŸ”¸ ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ç­–ç•¥æ¥å£**
```java
// æ”¯ä»˜ç­–ç•¥æ¥å£
public interface PaymentStrategy {
    void pay(double amount);  // ç»Ÿä¸€çš„æ”¯ä»˜æ–¹æ³•
}
```

**ğŸ”¸ ç¬¬äºŒæ­¥ï¼šå®ç°å…·ä½“ç­–ç•¥**
```java
// å¾®ä¿¡æ”¯ä»˜ç­–ç•¥
public class WechatPayStrategy implements PaymentStrategy {
    @Override
    public void pay(double amount) {
        System.out.println("ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ï¼š" + amount + "å…ƒ");
        // å¾®ä¿¡æ”¯ä»˜çš„å…·ä½“å®ç°
    }
}

// æ”¯ä»˜å®æ”¯ä»˜ç­–ç•¥
public class AlipayStrategy implements PaymentStrategy {
    @Override
    public void pay(double amount) {
        System.out.println("ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ï¼š" + amount + "å…ƒ");
        // æ”¯ä»˜å®æ”¯ä»˜çš„å…·ä½“å®ç°
    }
}

// é“¶è¡Œå¡æ”¯ä»˜ç­–ç•¥
public class BankCardStrategy implements PaymentStrategy {
    @Override
    public void pay(double amount) {
        System.out.println("ä½¿ç”¨é“¶è¡Œå¡æ”¯ä»˜ï¼š" + amount + "å…ƒ");
        // é“¶è¡Œå¡æ”¯ä»˜çš„å…·ä½“å®ç°
    }
}
```

**ğŸ”¸ ç¬¬ä¸‰æ­¥ï¼šç­–ç•¥ä½¿ç”¨è€…**
```java
// æ”¯ä»˜å¤„ç†å™¨ï¼ˆç­–ç•¥çš„ä½¿ç”¨è€…ï¼‰
public class PaymentProcessor {
    private PaymentStrategy strategy;
    
    // è®¾ç½®æ”¯ä»˜ç­–ç•¥
    public void setPaymentStrategy(PaymentStrategy strategy) {
        this.strategy = strategy;
    }
    
    // æ‰§è¡Œæ”¯ä»˜
    public void processPayment(double amount) {
        if (strategy == null) {
            throw new IllegalStateException("è¯·å…ˆè®¾ç½®æ”¯ä»˜ç­–ç•¥");
        }
        strategy.pay(amount);
    }
}
```

**ğŸ”¸ ç¬¬å››æ­¥ï¼šä½¿ç”¨ç¤ºä¾‹**
```java
public class PaymentExample {
    public static void main(String[] args) {
        PaymentProcessor processor = new PaymentProcessor();
        
        // ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜
        processor.setPaymentStrategy(new WechatPayStrategy());
        processor.processPayment(100.0);
        
        // åˆ‡æ¢åˆ°æ”¯ä»˜å®æ”¯ä»˜
        processor.setPaymentStrategy(new AlipayStrategy());
        processor.processPayment(200.0);
        
        // åˆ‡æ¢åˆ°é“¶è¡Œå¡æ”¯ä»˜
        processor.setPaymentStrategy(new BankCardStrategy());
        processor.processPayment(300.0);
    }
}
```

### 2.4 ç­–ç•¥æ¨¡å¼çš„ä¼˜åŠ¿


```
âœ… ä¼˜åŠ¿å¯¹æ¯”

æ‰©å±•æ€§ï¼š
âŒ if-elseï¼šæ–°å¢æ”¯ä»˜æ–¹å¼éœ€è¦ä¿®æ”¹åŸæœ‰æ–¹æ³•
âœ… ç­–ç•¥æ¨¡å¼ï¼šæ–°å¢æ”¯ä»˜æ–¹å¼åªéœ€æ·»åŠ æ–°çš„ç­–ç•¥ç±»

ç»´æŠ¤æ€§ï¼š
âŒ if-elseï¼šä¿®æ”¹ä¸€ç§æ”¯ä»˜æ–¹å¼å¯èƒ½å½±å“å…¶ä»–æ–¹å¼
âœ… ç­–ç•¥æ¨¡å¼ï¼šæ¯ç§æ”¯ä»˜æ–¹å¼ç‹¬ç«‹ï¼Œäº’ä¸å½±å“

æµ‹è¯•æ€§ï¼š
âŒ if-elseï¼šæµ‹è¯•æ—¶éœ€è¦åŠ è½½æ‰€æœ‰æ”¯ä»˜é€»è¾‘
âœ… ç­–ç•¥æ¨¡å¼ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•æ¯ç§æ”¯ä»˜ç­–ç•¥

å¯è¯»æ€§ï¼š
âŒ if-elseï¼šé•¿æ–¹æ³•ï¼Œé€»è¾‘æ··ä¹±
âœ… ç­–ç•¥æ¨¡å¼ï¼šèŒè´£æ¸…æ™°ï¼Œä»£ç ç®€æ´
```

---

## 3. ğŸ‘ï¸ è§‚å¯Ÿè€…æ¨¡å¼


### 3.1 è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šè§‚å¯Ÿè€…æ¨¡å¼å°±åƒ"è®¢é˜…é€šçŸ¥"æœºåˆ¶ï¼Œå½“æŸä»¶äº‹æƒ…å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰å…³å¿ƒè¿™ä»¶äº‹çš„äººã€‚

```
ç”Ÿæ´»æ¯”å–»ï¼š
å¾®ä¿¡å…¬ä¼—å·è®¢é˜…ï¼š
- å…¬ä¼—å·ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ï¼šå‘å¸ƒæ–‡ç« 
- è®¢é˜…è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰ï¼šæ¥æ”¶é€šçŸ¥
- å½“å…¬ä¼—å·å‘å¸ƒæ–°æ–‡ç« æ—¶ï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°æ¨é€é€šçŸ¥

ç¼–ç¨‹ä¸­ï¼š
- æ•°æ®å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰ç›¸å…³çš„ç•Œé¢ç»„ä»¶æ›´æ–°
- ç”¨æˆ·æ“ä½œæ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰ç›¸å…³çš„ä¸šåŠ¡æ¨¡å—å“åº”
```

### 3.2 è§‚å¯Ÿè€…æ¨¡å¼è§£å†³ä»€ä¹ˆé—®é¢˜


**ğŸ”¸ é¿å…ç´§å¯†è€¦åˆ**
```java
// âŒ ç´§å¯†è€¦åˆçš„åä¾‹å­
public class UserService {
    public void updateUser(User user) {
        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
        saveToDatabase(user);
        
        // ç›´æ¥è°ƒç”¨å…¶ä»–æ¨¡å— - ç´§å¯†è€¦åˆï¼
        EmailService.sendUpdateEmail(user);     // å‘é‚®ä»¶
        LogService.logUserUpdate(user);         // è®°å½•æ—¥å¿—
        CacheService.updateUserCache(user);     // æ›´æ–°ç¼“å­˜
        
        // å¦‚æœè¦æ–°å¢çŸ­ä¿¡é€šçŸ¥ï¼Œå°±å¾—ä¿®æ”¹è¿™ä¸ªæ–¹æ³•ï¼
    }
}
```

**é—®é¢˜**ï¼šUserServiceæ‰¿æ‹…äº†å¤ªå¤šè´£ä»»ï¼Œä¸å…¶ä»–æœåŠ¡ç´§å¯†è€¦åˆ

### 3.3 è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°


**ğŸ”¸ ç¬¬ä¸€æ­¥ï¼šå®šä¹‰è§‚å¯Ÿè€…æ¥å£**
```java
// è§‚å¯Ÿè€…æ¥å£
public interface UserObserver {
    void onUserUpdated(User user);  // ç”¨æˆ·æ›´æ–°æ—¶çš„å¤„ç†æ–¹æ³•
}
```

**ğŸ”¸ ç¬¬äºŒæ­¥ï¼šå®ç°å…·ä½“è§‚å¯Ÿè€…**
```java
// é‚®ä»¶é€šçŸ¥è§‚å¯Ÿè€…
public class EmailNotifier implements UserObserver {
    @Override
    public void onUserUpdated(User user) {
        System.out.println("å‘é€é‚®ä»¶é€šçŸ¥ï¼šç”¨æˆ· " + user.getName() + " ä¿¡æ¯å·²æ›´æ–°");
        // é‚®ä»¶å‘é€é€»è¾‘
    }
}

// æ—¥å¿—è®°å½•è§‚å¯Ÿè€…
public class LogRecorder implements UserObserver {
    @Override
    public void onUserUpdated(User user) {
        System.out.println("è®°å½•æ—¥å¿—ï¼šç”¨æˆ· " + user.getName() + " åœ¨ " + new Date() + " æ›´æ–°äº†ä¿¡æ¯");
        // æ—¥å¿—è®°å½•é€»è¾‘
    }
}

// ç¼“å­˜æ›´æ–°è§‚å¯Ÿè€…
public class CacheUpdater implements UserObserver {
    @Override
    public void onUserUpdated(User user) {
        System.out.println("æ›´æ–°ç¼“å­˜ï¼šç”¨æˆ· " + user.getName() + " çš„ç¼“å­˜å·²åˆ·æ–°");
        // ç¼“å­˜æ›´æ–°é€»è¾‘
    }
}
```

**ğŸ”¸ ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰è¢«è§‚å¯Ÿè€…ï¼ˆä¸»é¢˜ï¼‰**
```java
// ç”¨æˆ·æœåŠ¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰
public class UserService {
    private List<UserObserver> observers = new ArrayList<>();
    
    // æ·»åŠ è§‚å¯Ÿè€…
    public void addObserver(UserObserver observer) {
        observers.add(observer);
    }
    
    // ç§»é™¤è§‚å¯Ÿè€…
    public void removeObserver(UserObserver observer) {
        observers.remove(observer);
    }
    
    // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
    private void notifyObservers(User user) {
        for (UserObserver observer : observers) {
            observer.onUserUpdated(user);
        }
    }
    
    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
    public void updateUser(User user) {
        // æ ¸å¿ƒä¸šåŠ¡ï¼šæ›´æ–°ç”¨æˆ·ä¿¡æ¯
        saveToDatabase(user);
        
        // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
        notifyObservers(user);
    }
    
    private void saveToDatabase(User user) {
        System.out.println("ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°æ•°æ®åº“ï¼š" + user.getName());
    }
}
```

**ğŸ”¸ ç¬¬å››æ­¥ï¼šä½¿ç”¨ç¤ºä¾‹**
```java
public class ObserverExample {
    public static void main(String[] args) {
        // åˆ›å»ºç”¨æˆ·æœåŠ¡
        UserService userService = new UserService();
        
        // æ³¨å†Œè§‚å¯Ÿè€…
        userService.addObserver(new EmailNotifier());
        userService.addObserver(new LogRecorder());
        userService.addObserver(new CacheUpdater());
        
        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
        User user = new User("å¼ ä¸‰");
        userService.updateUser(user);
        
        // è¾“å‡ºï¼š
        // ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°æ•°æ®åº“ï¼šå¼ ä¸‰
        // å‘é€é‚®ä»¶é€šçŸ¥ï¼šç”¨æˆ· å¼ ä¸‰ ä¿¡æ¯å·²æ›´æ–°
        // è®°å½•æ—¥å¿—ï¼šç”¨æˆ· å¼ ä¸‰ åœ¨ Sun Aug 17 15:30:00 CST 2025 æ›´æ–°äº†ä¿¡æ¯
        // æ›´æ–°ç¼“å­˜ï¼šç”¨æˆ· å¼ ä¸‰ çš„ç¼“å­˜å·²åˆ·æ–°
    }
}
```

### 3.4 è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜åŠ¿


```
ğŸ”¸ è§£è€¦åˆï¼šUserServiceåªå…³å¿ƒæ ¸å¿ƒä¸šåŠ¡ï¼Œä¸å…³å¿ƒè°è¦æ¥æ”¶é€šçŸ¥
ğŸ”¸ å¯æ‰©å±•ï¼šæ–°å¢çŸ­ä¿¡é€šçŸ¥ï¼Œåªéœ€æ·»åŠ SmsNotifierï¼Œæ— éœ€ä¿®æ”¹UserService
ğŸ”¸ çµæ´»æ€§ï¼šå¯ä»¥åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤è§‚å¯Ÿè€…
ğŸ”¸ å•ä¸€èŒè´£ï¼šæ¯ä¸ªè§‚å¯Ÿè€…åªè´Ÿè´£è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘
```

---

## 4. ğŸ”„ çŠ¶æ€æœºæ¨¡å¼


### 4.1 çŠ¶æ€æœºæ¨¡å¼æ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šçŠ¶æ€æœºæ¨¡å¼å°±æ˜¯ç®¡ç†"å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹çš„ä¸åŒè¡Œä¸º"ï¼Œåƒä¸€ä¸ªæœ‰è§„åˆ™çš„çŠ¶æ€åˆ‡æ¢å™¨ã€‚

```
ç”Ÿæ´»æ¯”å–»ï¼š
ç”µæ¢¯çš„è¿è¡ŒçŠ¶æ€ï¼š
- åœæ­¢çŠ¶æ€ï¼šå¯ä»¥å¼€é—¨ã€å…³é—¨
- ä¸Šå‡çŠ¶æ€ï¼šä¸èƒ½å¼€é—¨ï¼Œå¯ä»¥åœæ­¢
- ä¸‹é™çŠ¶æ€ï¼šä¸èƒ½å¼€é—¨ï¼Œå¯ä»¥åœæ­¢
- æ•…éšœçŠ¶æ€ï¼šä¸èƒ½ç§»åŠ¨ï¼Œåªèƒ½ç»´ä¿®

æ¯ä¸ªçŠ¶æ€ä¸‹èƒ½åšçš„äº‹æƒ…ä¸åŒï¼ŒçŠ¶æ€åˆ‡æ¢æœ‰å›ºå®šè§„åˆ™
```

### 4.2 ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€æœºæ¨¡å¼


**ğŸš« ä¼ ç»Ÿif-elseçš„é—®é¢˜**
```java
// âŒ ç³Ÿç³•çš„çŠ¶æ€ç®¡ç†
public class Order {
    private String status; // "å¾…æ”¯ä»˜", "å·²æ”¯ä»˜", "å·²å‘è´§", "å·²å®Œæˆ", "å·²å–æ¶ˆ"
    
    public void pay() {
        if ("å¾…æ”¯ä»˜".equals(status)) {
            status = "å·²æ”¯ä»˜";
            System.out.println("æ”¯ä»˜æˆåŠŸ");
        } else {
            System.out.println("å½“å‰çŠ¶æ€ä¸èƒ½æ”¯ä»˜");
        }
    }
    
    public void ship() {
        if ("å·²æ”¯ä»˜".equals(status)) {
            status = "å·²å‘è´§";
            System.out.println("è®¢å•å·²å‘è´§");
        } else {
            System.out.println("å½“å‰çŠ¶æ€ä¸èƒ½å‘è´§");
        }
    }
    
    public void cancel() {
        if ("å¾…æ”¯ä»˜".equals(status) || "å·²æ”¯ä»˜".equals(status)) {
            status = "å·²å–æ¶ˆ";
            System.out.println("è®¢å•å·²å–æ¶ˆ");
        } else {
            System.out.println("å½“å‰çŠ¶æ€ä¸èƒ½å–æ¶ˆ");
        }
    }
}
```

**é—®é¢˜**ï¼šçŠ¶æ€åˆ¤æ–­é€»è¾‘åˆ†æ•£ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œå®¹æ˜“å‡ºé”™

### 4.3 çŠ¶æ€æœºæ¨¡å¼çš„å®ç°


**ğŸ”¸ ç¬¬ä¸€æ­¥ï¼šå®šä¹‰çŠ¶æ€æ¥å£**
```java
// è®¢å•çŠ¶æ€æ¥å£
public interface OrderState {
    void pay(OrderContext context);     // æ”¯ä»˜æ“ä½œ
    void ship(OrderContext context);    // å‘è´§æ“ä½œ
    void cancel(OrderContext context);  // å–æ¶ˆæ“ä½œ
    String getStateName();              // è·å–çŠ¶æ€åç§°
}
```

**ğŸ”¸ ç¬¬äºŒæ­¥ï¼šå®ç°å…·ä½“çŠ¶æ€**
```java
// å¾…æ”¯ä»˜çŠ¶æ€
public class PendingPaymentState implements OrderState {
    @Override
    public void pay(OrderContext context) {
        System.out.println("æ”¯ä»˜æˆåŠŸï¼Œè®¢å•çŠ¶æ€å˜ä¸ºå·²æ”¯ä»˜");
        context.setState(new PaidState());
    }
    
    @Override
    public void ship(OrderContext context) {
        System.out.println("è®¢å•æœªæ”¯ä»˜ï¼Œä¸èƒ½å‘è´§");
    }
    
    @Override
    public void cancel(OrderContext context) {
        System.out.println("è®¢å•å·²å–æ¶ˆ");
        context.setState(new CancelledState());
    }
    
    @Override
    public String getStateName() {
        return "å¾…æ”¯ä»˜";
    }
}

// å·²æ”¯ä»˜çŠ¶æ€
public class PaidState implements OrderState {
    @Override
    public void pay(OrderContext context) {
        System.out.println("è®¢å•å·²æ”¯ä»˜ï¼Œæ— éœ€é‡å¤æ”¯ä»˜");
    }
    
    @Override
    public void ship(OrderContext context) {
        System.out.println("è®¢å•å·²å‘è´§");
        context.setState(new ShippedState());
    }
    
    @Override
    public void cancel(OrderContext context) {
        System.out.println("è®¢å•å·²å–æ¶ˆï¼Œå°†é€€æ¬¾");
        context.setState(new CancelledState());
    }
    
    @Override
    public String getStateName() {
        return "å·²æ”¯ä»˜";
    }
}

// å·²å‘è´§çŠ¶æ€
public class ShippedState implements OrderState {
    @Override
    public void pay(OrderContext context) {
        System.out.println("è®¢å•å·²æ”¯ä»˜ä¸”å·²å‘è´§");
    }
    
    @Override
    public void ship(OrderContext context) {
        System.out.println("è®¢å•å·²å‘è´§ï¼Œæ— éœ€é‡å¤å‘è´§");
    }
    
    @Override
    public void cancel(OrderContext context) {
        System.out.println("è®¢å•å·²å‘è´§ï¼Œä¸èƒ½å–æ¶ˆ");
    }
    
    @Override
    public String getStateName() {
        return "å·²å‘è´§";
    }
}

// å·²å–æ¶ˆçŠ¶æ€
public class CancelledState implements OrderState {
    @Override
    public void pay(OrderContext context) {
        System.out.println("è®¢å•å·²å–æ¶ˆï¼Œä¸èƒ½æ”¯ä»˜");
    }
    
    @Override
    public void ship(OrderContext context) {
        System.out.println("è®¢å•å·²å–æ¶ˆï¼Œä¸èƒ½å‘è´§");
    }
    
    @Override
    public void cancel(OrderContext context) {
        System.out.println("è®¢å•å·²å–æ¶ˆ");
    }
    
    @Override
    public String getStateName() {
        return "å·²å–æ¶ˆ";
    }
}
```

**ğŸ”¸ ç¬¬ä¸‰æ­¥ï¼šçŠ¶æ€ä¸Šä¸‹æ–‡**
```java
// è®¢å•ä¸Šä¸‹æ–‡ï¼ˆçŠ¶æ€æœºï¼‰
public class OrderContext {
    private OrderState currentState;
    private String orderId;
    
    public OrderContext(String orderId) {
        this.orderId = orderId;
        this.currentState = new PendingPaymentState(); // åˆå§‹çŠ¶æ€
    }
    
    // è®¾ç½®çŠ¶æ€
    public void setState(OrderState state) {
        this.currentState = state;
        System.out.println("è®¢å• " + orderId + " çŠ¶æ€å˜æ›´ä¸ºï¼š" + state.getStateName());
    }
    
    // æ”¯ä»˜æ“ä½œ
    public void pay() {
        currentState.pay(this);
    }
    
    // å‘è´§æ“ä½œ
    public void ship() {
        currentState.ship(this);
    }
    
    // å–æ¶ˆæ“ä½œ
    public void cancel() {
        currentState.cancel(this);
    }
    
    // è·å–å½“å‰çŠ¶æ€
    public String getCurrentState() {
        return currentState.getStateName();
    }
}
```

**ğŸ”¸ ç¬¬å››æ­¥ï¼šä½¿ç”¨ç¤ºä¾‹**
```java
public class StateExample {
    public static void main(String[] args) {
        // åˆ›å»ºè®¢å•
        OrderContext order = new OrderContext("ORDER-001");
        
        System.out.println("å½“å‰çŠ¶æ€ï¼š" + order.getCurrentState());
        
        // å°è¯•å‘è´§ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
        order.ship();
        
        // æ”¯ä»˜è®¢å•
        order.pay();
        
        // å‘è´§
        order.ship();
        
        // å°è¯•å–æ¶ˆï¼ˆåº”è¯¥å¤±è´¥ï¼‰
        order.cancel();
        
        // è¾“å‡ºï¼š
        // å½“å‰çŠ¶æ€ï¼šå¾…æ”¯ä»˜
        // è®¢å•æœªæ”¯ä»˜ï¼Œä¸èƒ½å‘è´§
        // æ”¯ä»˜æˆåŠŸï¼Œè®¢å•çŠ¶æ€å˜ä¸ºå·²æ”¯ä»˜
        // è®¢å• ORDER-001 çŠ¶æ€å˜æ›´ä¸ºï¼šå·²æ”¯ä»˜
        // è®¢å•å·²å‘è´§
        // è®¢å• ORDER-001 çŠ¶æ€å˜æ›´ä¸ºï¼šå·²å‘è´§
        // è®¢å•å·²å‘è´§ï¼Œä¸èƒ½å–æ¶ˆ
    }
}
```

### 4.4 çŠ¶æ€æœºæ¨¡å¼çš„ä¼˜åŠ¿


```
âœ… çŠ¶æ€é€»è¾‘é›†ä¸­ï¼šæ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºéƒ½åœ¨å¯¹åº”çš„çŠ¶æ€ç±»ä¸­
âœ… æ˜“äºæ‰©å±•ï¼šæ–°å¢çŠ¶æ€åªéœ€æ·»åŠ æ–°çš„çŠ¶æ€ç±»
âœ… é¿å…é”™è¯¯ï¼šçŠ¶æ€è½¬æ¢è§„åˆ™æ¸…æ™°ï¼Œä¸æ˜“å‡ºé”™
âœ… ä¾¿äºæµ‹è¯•ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•æ¯ä¸ªçŠ¶æ€çš„è¡Œä¸º
```

---

## 5. ğŸ“‹ æ¨¡æ¿æ–¹æ³•æ¨¡å¼


### 5.1 æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼å°±åƒä¸€ä¸ª"å·¥ä½œæµç¨‹æ¨¡æ¿"ï¼Œå®šä¹‰äº†åšäº‹çš„æ­¥éª¤ï¼Œä½†å…·ä½“æ¯æ­¥æ€ä¹ˆåšç”±å­ç±»å†³å®šã€‚

```
ç”Ÿæ´»æ¯”å–»ï¼š
æ³¡èŒ¶çš„æ­¥éª¤ï¼š
1. çƒ§æ°´
2. å‡†å¤‡èŒ¶å…·
3. æ”¾èŒ¶å¶
4. å†²æ³¡
5. å“èŒ¶

è¿™ä¸ªæµç¨‹æ˜¯å›ºå®šçš„ï¼Œä½†å…·ä½“æ€ä¹ˆåšæ¯ä¸ªæ­¥éª¤å¯ä»¥ä¸åŒï¼š
- ç»¿èŒ¶ï¼šæ°´æ¸©85åº¦ï¼Œå†²æ³¡3åˆ†é’Ÿ
- çº¢èŒ¶ï¼šæ°´æ¸©100åº¦ï¼Œå†²æ³¡5åˆ†é’Ÿ
```

### 5.2 æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å®ç°


**ğŸ”¸ ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æŠ½è±¡æ¨¡æ¿**
```java
// æ•°æ®å¤„ç†æ¨¡æ¿
public abstract class DataProcessor {
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰å¤„ç†æµç¨‹
    public final void processData() {
        System.out.println("=== å¼€å§‹æ•°æ®å¤„ç† ===");
        
        // æ­¥éª¤1ï¼šè¯»å–æ•°æ®
        readData();
        
        // æ­¥éª¤2ï¼šéªŒè¯æ•°æ®
        if (validateData()) {
            // æ­¥éª¤3ï¼šå¤„ç†æ•°æ®
            processBusinessLogic();
            
            // æ­¥éª¤4ï¼šä¿å­˜ç»“æœ
            saveResult();
        } else {
            System.out.println("æ•°æ®éªŒè¯å¤±è´¥ï¼Œå¤„ç†ç»ˆæ­¢");
        }
        
        System.out.println("=== æ•°æ®å¤„ç†å®Œæˆ ===");
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼šå­ç±»å¿…é¡»å®ç°
    protected abstract void readData();
    protected abstract void processBusinessLogic();
    protected abstract void saveResult();
    
    // é’©å­æ–¹æ³•ï¼šå­ç±»å¯ä»¥é€‰æ‹©é‡å†™
    protected boolean validateData() {
        System.out.println("æ‰§è¡Œé»˜è®¤æ•°æ®éªŒè¯");
        return true;
    }
}
```

**ğŸ”¸ ç¬¬äºŒæ­¥ï¼šå®ç°å…·ä½“å­ç±»**
```java
// Excelæ•°æ®å¤„ç†å™¨
public class ExcelDataProcessor extends DataProcessor {
    
    @Override
    protected void readData() {
        System.out.println("ä»Excelæ–‡ä»¶è¯»å–æ•°æ®");
    }
    
    @Override
    protected void processBusinessLogic() {
        System.out.println("å¤„ç†Excelæ•°æ®ï¼šæ ¼å¼è½¬æ¢ã€æ•°æ®æ¸…æ´—");
    }
    
    @Override
    protected void saveResult() {
        System.out.println("å°†å¤„ç†ç»“æœä¿å­˜åˆ°æ•°æ®åº“");
    }
    
    @Override
    protected boolean validateData() {
        System.out.println("éªŒè¯Excelæ•°æ®æ ¼å¼å’Œå®Œæ•´æ€§");
        return true;
    }
}

// CSVæ•°æ®å¤„ç†å™¨
public class CsvDataProcessor extends DataProcessor {
    
    @Override
    protected void readData() {
        System.out.println("ä»CSVæ–‡ä»¶è¯»å–æ•°æ®");
    }
    
    @Override
    protected void processBusinessLogic() {
        System.out.println("å¤„ç†CSVæ•°æ®ï¼šå­—æ®µæ˜ å°„ã€æ•°æ®è½¬æ¢");
    }
    
    @Override
    protected void saveResult() {
        System.out.println("å°†å¤„ç†ç»“æœå¯¼å‡ºä¸ºJSONæ–‡ä»¶");
    }
    
    // ä½¿ç”¨é»˜è®¤çš„æ•°æ®éªŒè¯ï¼Œä¸é‡å†™validateDataæ–¹æ³•
}

// APIæ•°æ®å¤„ç†å™¨
public class ApiDataProcessor extends DataProcessor {
    
    @Override
    protected void readData() {
        System.out.println("ä»APIæ¥å£è·å–æ•°æ®");
    }
    
    @Override
    protected void processBusinessLogic() {
        System.out.println("å¤„ç†APIæ•°æ®ï¼šæ•°æ®èšåˆã€ç»Ÿè®¡åˆ†æ");
    }
    
    @Override
    protected void saveResult() {
        System.out.println("å°†å¤„ç†ç»“æœæ¨é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—");
    }
    
    @Override
    protected boolean validateData() {
        System.out.println("éªŒè¯APIæ•°æ®çš„æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§");
        // å‡è®¾éªŒè¯å¤±è´¥
        return false;
    }
}
```

**ğŸ”¸ ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ç¤ºä¾‹**
```java
public class TemplateExample {
    public static void main(String[] args) {
        System.out.println("å¤„ç†Excelæ•°æ®ï¼š");
        DataProcessor excelProcessor = new ExcelDataProcessor();
        excelProcessor.processData();
        
        System.out.println("\nå¤„ç†CSVæ•°æ®ï¼š");
        DataProcessor csvProcessor = new CsvDataProcessor();
        csvProcessor.processData();
        
        System.out.println("\nå¤„ç†APIæ•°æ®ï¼š");
        DataProcessor apiProcessor = new ApiDataProcessor();
        apiProcessor.processData();
    }
}
```

### 5.3 æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä¼˜åŠ¿


```
âœ… ä»£ç å¤ç”¨ï¼šå…¬å…±æµç¨‹å†™ä¸€æ¬¡ï¼Œå¤šå¤„ä½¿ç”¨
âœ… æ§åˆ¶ç»“æ„ï¼šçˆ¶ç±»æ§åˆ¶ç®—æ³•ç»“æ„ï¼Œå­ç±»å®ç°ç»†èŠ‚
âœ… æ‰©å±•æ€§å¥½ï¼šæ–°å¢å¤„ç†ç±»å‹åªéœ€ç»§æ‰¿å¹¶å®ç°æŠ½è±¡æ–¹æ³•
âœ… ç¬¦åˆå¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
```

---

## 6. ğŸ¯ è¡Œä¸ºå‹æ ¸å¿ƒåº”ç”¨


### 6.1 è§‚å¯Ÿè€…æ¨¡å¼ï¼šäº‹ä»¶é€šçŸ¥æœºåˆ¶


**ğŸ”¸ æ ¸å¿ƒä»·å€¼**ï¼šè§£è€¦äº‹ä»¶å‘å¸ƒè€…å’Œè®¢é˜…è€…ï¼Œå®ç°æ¾è€¦åˆçš„äº‹ä»¶é©±åŠ¨æ¶æ„ã€‚

**ğŸ“‹ å®é™…åº”ç”¨åœºæ™¯**
```
âœ… ç”¨æˆ·æ³¨å†ŒæˆåŠŸåçš„åç»­å¤„ç†ï¼š
- å‘é€æ¬¢è¿é‚®ä»¶
- èµ é€æ–°ç”¨æˆ·ç§¯åˆ†
- è®°å½•æ³¨å†Œæ—¥å¿—
- æ¨é€åˆ°æ•°æ®åˆ†æç³»ç»Ÿ

âœ… å•†å“åº“å­˜å˜åŒ–é€šçŸ¥ï¼š
- é€šçŸ¥é‡‡è´­ç³»ç»Ÿè¡¥è´§
- æ›´æ–°å•†å“å±•ç¤ºçŠ¶æ€
- å‘é€åº“å­˜é¢„è­¦
- åŒæ­¥ç¬¬ä¸‰æ–¹ç³»ç»Ÿ
```

**ğŸ’¡ é«˜çº§åº”ç”¨ï¼šå¼‚æ­¥äº‹ä»¶å¤„ç†**
```java
// å¼‚æ­¥è§‚å¯Ÿè€…å®ç°
public class AsyncUserObserver implements UserObserver {
    private ExecutorService executor = Executors.newFixedThreadPool(3);
    
    @Override
    public void onUserUpdated(User user) {
        // å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡ä¸»æµç¨‹
        executor.submit(() -> {
            try {
                sendEmail(user);
            } catch (Exception e) {
                System.out.println("é‚®ä»¶å‘é€å¤±è´¥ï¼š" + e.getMessage());
            }
        });
    }
    
    private void sendEmail(User user) {
        // æ¨¡æ‹Ÿè€—æ—¶çš„é‚®ä»¶å‘é€
        try {
            Thread.sleep(2000);
            System.out.println("å¼‚æ­¥å‘é€é‚®ä»¶ç»™ï¼š" + user.getName());
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
}
```

### 6.2 ç­–ç•¥æ¨¡å¼ï¼šæ·±åº¦åº”ç”¨


**ğŸ”¸ æ ¸å¿ƒä»·å€¼**ï¼šå°†ç®—æ³•æ—å°è£…æˆç‹¬ç«‹ç­–ç•¥ï¼Œå®ç°ç®—æ³•çš„å¯æ’æ‹”å’ŒåŠ¨æ€åˆ‡æ¢ã€‚

**ğŸ“‹ é«˜çº§åº”ç”¨ï¼šç­–ç•¥å·¥å‚**
```java
// ç­–ç•¥å·¥å‚ï¼šç®¡ç†ç­–ç•¥çš„åˆ›å»ºå’Œè·å–
public class PaymentStrategyFactory {
    private static final Map<String, PaymentStrategy> strategies = new HashMap<>();
    
    static {
        strategies.put("wechat", new WechatPayStrategy());
        strategies.put("alipay", new AlipayStrategy());
        strategies.put("bank", new BankCardStrategy());
    }
    
    public static PaymentStrategy getStrategy(String type) {
        PaymentStrategy strategy = strategies.get(type);
        if (strategy == null) {
            throw new IllegalArgumentException("ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼ï¼š" + type);
        }
        return strategy;
    }
    
    // æ”¯æŒåŠ¨æ€æ³¨å†Œæ–°ç­–ç•¥
    public static void registerStrategy(String type, PaymentStrategy strategy) {
        strategies.put(type, strategy);
    }
}

// ä½¿ç”¨å·¥å‚ç®€åŒ–ç­–ç•¥è·å–
public class PaymentService {
    public void processPayment(String type, double amount) {
        PaymentStrategy strategy = PaymentStrategyFactory.getStrategy(type);
        strategy.pay(amount);
    }
}
```

**ğŸ’¡ ç»„åˆç­–ç•¥ï¼šå¤šçº§ç­–ç•¥é€‰æ‹©**
```java
// æ”¯ä»˜ç­–ç•¥é€‰æ‹©å™¨ï¼šæ ¹æ®æ¡ä»¶æ™ºèƒ½é€‰æ‹©ç­–ç•¥
public class SmartPaymentSelector {
    
    public PaymentStrategy selectBestStrategy(double amount, String userLevel) {
        // æ ¹æ®é‡‘é¢å’Œç”¨æˆ·ç­‰çº§é€‰æ‹©æœ€ä¼˜æ”¯ä»˜æ–¹å¼
        if (amount > 10000) {
            return new BankCardStrategy(); // å¤§é¢ç”¨é“¶è¡Œå¡
        } else if ("VIP".equals(userLevel)) {
            return new WechatPayStrategy(); // VIPç”¨æˆ·ä¼˜é€‰å¾®ä¿¡
        } else {
            return new AlipayStrategy(); // æ™®é€šç”¨æˆ·é»˜è®¤æ”¯ä»˜å®
        }
    }
}
```

---

## 7. ğŸš€ è¡Œä¸ºå‹æ‰©å±•åº”ç”¨


### 7.1 è§‚å¯Ÿè€…ã€ç­–ç•¥ã€æ¨¡æ¿æ–¹æ³•çš„ç³»ç»ŸåŒ–åº”ç”¨


**ğŸ”¸ åœºæ™¯ï¼šè®¢å•å¤„ç†ç³»ç»Ÿ**

```
ç³»ç»Ÿéœ€æ±‚ï¼š
- ä¸åŒç±»å‹è®¢å•æœ‰ä¸åŒå¤„ç†æµç¨‹ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰
- è®¢å•å¤„ç†è¿‡ç¨‹ä¸­éœ€è¦é€šçŸ¥å¤šä¸ªç³»ç»Ÿï¼ˆè§‚å¯Ÿè€…ï¼‰
- æ ¹æ®è®¢å•ç‰¹å¾é€‰æ‹©ä¸åŒå¤„ç†ç­–ç•¥ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰
```

**ğŸ’¡ ç³»ç»Ÿæ¶æ„è®¾è®¡**
```java
// 1. è®¢å•å¤„ç†æ¨¡æ¿ï¼ˆæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼‰
public abstract class OrderProcessor {
    private List<OrderObserver> observers = new ArrayList<>();
    
    // æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰å¤„ç†æµç¨‹
    public final void processOrder(Order order) {
        notifyObservers("è®¢å•å¤„ç†å¼€å§‹", order);
        
        validateOrder(order);
        processPayment(order);
        prepareGoods(order);
        arrangeShipping(order);
        
        notifyObservers("è®¢å•å¤„ç†å®Œæˆ", order);
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼šå­ç±»å®ç°å…·ä½“é€»è¾‘
    protected abstract void validateOrder(Order order);
    protected abstract void processPayment(Order order);
    protected abstract void prepareGoods(Order order);
    protected abstract void arrangeShipping(Order order);
    
    // è§‚å¯Ÿè€…ç®¡ç†
    public void addObserver(OrderObserver observer) {
        observers.add(observer);
    }
    
    private void notifyObservers(String event, Order order) {
        for (OrderObserver observer : observers) {
            observer.onOrderEvent(event, order);
        }
    }
}

// 2. å…·ä½“è®¢å•å¤„ç†å™¨ï¼ˆç­–ç•¥æ¨¡å¼ + æ¨¡æ¿æ–¹æ³•ï¼‰
public class StandardOrderProcessor extends OrderProcessor {
    @Override
    protected void validateOrder(Order order) {
        System.out.println("æ ‡å‡†è®¢å•éªŒè¯ï¼šæ£€æŸ¥å•†å“åº“å­˜");
    }
    
    @Override
    protected void processPayment(Order order) {
        // ä½¿ç”¨ç­–ç•¥æ¨¡å¼é€‰æ‹©æ”¯ä»˜æ–¹å¼
        PaymentStrategy strategy = PaymentStrategyFactory.getStrategy(order.getPaymentType());
        strategy.pay(order.getAmount());
    }
    
    @Override
    protected void prepareGoods(Order order) {
        System.out.println("æ ‡å‡†è®¢å•å¤‡è´§ï¼šä»æœ€è¿‘ä»“åº“å‘è´§");
    }
    
    @Override
    protected void arrangeShipping(Order order) {
        System.out.println("æ ‡å‡†è®¢å•é…é€ï¼šé€‰æ‹©æ ‡å‡†å¿«é€’");
    }
}

public class VipOrderProcessor extends OrderProcessor {
    @Override
    protected void validateOrder(Order order) {
        System.out.println("VIPè®¢å•éªŒè¯ï¼šä¼˜å…ˆçº§æ£€æŸ¥ + åº“å­˜æ£€æŸ¥");
    }
    
    @Override
    protected void processPayment(Order order) {
        // VIPè®¢å•å¯èƒ½æœ‰ç‰¹æ®Šæ”¯ä»˜é€»è¾‘
        System.out.println("VIPè®¢å•æ”¯ä»˜ï¼šäº«å—ä¼˜æƒ æŠ˜æ‰£");
        PaymentStrategy strategy = PaymentStrategyFactory.getStrategy(order.getPaymentType());
        strategy.pay(order.getAmount() * 0.95); // 95æŠ˜
    }
    
    @Override
    protected void prepareGoods(Order order) {
        System.out.println("VIPè®¢å•å¤‡è´§ï¼šä¸“ç”¨ä»“åº“ï¼Œç²¾ç¾åŒ…è£…");
    }
    
    @Override
    protected void arrangeShipping(Order order) {
        System.out.println("VIPè®¢å•é…é€ï¼šé¡ºä¸°æ¬¡æ—¥è¾¾");
    }
}

// 3. è®¢å•è§‚å¯Ÿè€…ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰
public interface OrderObserver {
    void onOrderEvent(String event, Order order);
}

public class InventoryObserver implements OrderObserver {
    @Override
    public void onOrderEvent(String event, Order order) {
        if ("è®¢å•å¤„ç†å®Œæˆ".equals(event)) {
            System.out.println("åº“å­˜ç³»ç»Ÿï¼šæ‰£å‡åº“å­˜ï¼Œè®¢å•å·ï¼š" + order.getId());
        }
    }
}

public class LoggingObserver implements OrderObserver {
    @Override
    public void onOrderEvent(String event, Order order) {
        System.out.println("æ—¥å¿—è®°å½•ï¼š" + event + "ï¼Œè®¢å•ï¼š" + order.getId() + "ï¼Œæ—¶é—´ï¼š" + new Date());
    }
}

// 4. ä½¿ç”¨ç¤ºä¾‹
public class OrderSystemExample {
    public static void main(String[] args) {
        // åˆ›å»ºè®¢å•å¤„ç†å™¨
        OrderProcessor processor = new VipOrderProcessor();
        
        // æ³¨å†Œè§‚å¯Ÿè€…
        processor.addObserver(new InventoryObserver());
        processor.addObserver(new LoggingObserver());
        
        // å¤„ç†è®¢å•
        Order order = new Order("ORDER-001", "wechat", 1000.0);
        processor.processOrder(order);
    }
}
```

---

## 8. ğŸ› ï¸ ç­–ç•¥æ¨¡å¼å®è·µ


### 8.1 ç”¨æ˜ å°„ä»£æ›¿å¤šå±‚if-elseçš„å…·ä½“å®ç°


**ğŸ”¸ åœºæ™¯ï¼šè®¢å•æŠ˜æ‰£è®¡ç®—**

```java
// âŒ ä¼ ç»Ÿå¤šå±‚if-elseï¼ˆéš¾ä»¥ç»´æŠ¤ï¼‰
public class DiscountCalculator {
    public double calculateDiscount(String userType, String seasonType, double amount) {
        if ("VIP".equals(userType)) {
            if ("SPRING".equals(seasonType)) {
                if (amount > 1000) {
                    return amount * 0.7; // VIPæ˜¥å­£å¤§é¢7æŠ˜
                } else {
                    return amount * 0.8; // VIPæ˜¥å­£8æŠ˜
                }
            } else if ("SUMMER".equals(seasonType)) {
                return amount * 0.75; // VIPå¤å­£75æŠ˜
            } else {
                return amount * 0.85; // VIPå…¶ä»–å­£èŠ‚85æŠ˜
            }
        } else if ("GOLD".equals(userType)) {
            if ("SPRING".equals(seasonType)) {
                return amount * 0.85; // é‡‘ç‰Œæ˜¥å­£85æŠ˜
            } else {
                return amount * 0.9; // é‡‘ç‰Œå…¶ä»–å­£èŠ‚9æŠ˜
            }
        } else {
            return amount * 0.95; // æ™®é€šç”¨æˆ·95æŠ˜
        }
    }
}
```

**âœ… ç­–ç•¥æ¨¡å¼ + æ˜ å°„è¡¨ï¼ˆæ˜“äºç»´æŠ¤å’Œæ‰©å±•ï¼‰**
```java
// 1. æŠ˜æ‰£ç­–ç•¥æ¥å£
public interface DiscountStrategy {
    double calculateDiscount(double amount);
}

// 2. å…·ä½“æŠ˜æ‰£ç­–ç•¥å®ç°
public class VipSpringDiscountStrategy implements DiscountStrategy {
    @Override
    public double calculateDiscount(double amount) {
        return amount > 1000 ? amount * 0.7 : amount * 0.8;
    }
}

public class VipSummerDiscountStrategy implements DiscountStrategy {
    @Override
    public double calculateDiscount(double amount) {
        return amount * 0.75;
    }
}

public class VipDefaultDiscountStrategy implements DiscountStrategy {
    @Override
    public double calculateDiscount(double amount) {
        return amount * 0.85;
    }
}

public class GoldSpringDiscountStrategy implements DiscountStrategy {
    @Override
    public double calculateDiscount(double amount) {
        return amount * 0.85;
    }
}

public class GoldDefaultDiscountStrategy implements DiscountStrategy {
    @Override
    public double calculateDiscount(double amount) {
        return amount * 0.9;
    }
}

public class NormalDiscountStrategy implements DiscountStrategy {
    @Override
    public double calculateDiscount(double amount) {
        return amount * 0.95;
    }
}

// 3. ç­–ç•¥æ˜ å°„ç®¡ç†å™¨
public class DiscountStrategyManager {
    private static final Map<String, DiscountStrategy> strategyMap = new HashMap<>();
    
    static {
        // åˆå§‹åŒ–ç­–ç•¥æ˜ å°„
        strategyMap.put("VIP_SPRING", new VipSpringDiscountStrategy());
        strategyMap.put("VIP_SUMMER", new VipSummerDiscountStrategy());
        strategyMap.put("VIP_DEFAULT", new VipDefaultDiscountStrategy());
        strategyMap.put("GOLD_SPRING", new GoldSpringDiscountStrategy());
        strategyMap.put("GOLD_DEFAULT", new GoldDefaultDiscountStrategy());
        strategyMap.put("NORMAL_DEFAULT", new NormalDiscountStrategy());
    }
    
    public static DiscountStrategy getStrategy(String userType, String seasonType) {
        // æ„å»ºç­–ç•¥é”®
        String key = buildStrategyKey(userType, seasonType);
        
        // è·å–ç­–ç•¥ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™ä½¿ç”¨é»˜è®¤ç­–ç•¥
        DiscountStrategy strategy = strategyMap.get(key);
        if (strategy == null) {
            strategy = strategyMap.get("NORMAL_DEFAULT");
        }
        
        return strategy;
    }
    
    private static String buildStrategyKey(String userType, String seasonType) {
        if ("VIP".equals(userType)) {
            if ("SPRING".equals(seasonType)) return "VIP_SPRING";
            if ("SUMMER".equals(seasonType)) return "VIP_SUMMER";
            return "VIP_DEFAULT";
        } else if ("GOLD".equals(userType)) {
            if ("SPRING".equals(seasonType)) return "GOLD_SPRING";
            return "GOLD_DEFAULT";
        } else {
            return "NORMAL_DEFAULT";
        }
    }
    
    // åŠ¨æ€æ·»åŠ æ–°ç­–ç•¥
    public static void addStrategy(String key, DiscountStrategy strategy) {
        strategyMap.put(key, strategy);
    }
}

// 4. ä¼˜åŒ–åçš„æŠ˜æ‰£è®¡ç®—å™¨
public class OptimizedDiscountCalculator {
    
    public double calculateDiscount(String userType, String seasonType, double amount) {
        DiscountStrategy strategy = DiscountStrategyManager.getStrategy(userType, seasonType);
        return strategy.calculateDiscount(amount);
    }
}

// 5. ä½¿ç”¨ç¤ºä¾‹
public class DiscountExample {
    public static void main(String[] args) {
        OptimizedDiscountCalculator calculator = new OptimizedDiscountCalculator();
        
        // æµ‹è¯•ä¸åŒåœºæ™¯
        System.out.println("VIPæ˜¥å­£1500å…ƒï¼š" + calculator.calculateDiscount("VIP", "SPRING", 1500)); // 1050.0
        System.out.println("VIPæ˜¥å­£800å…ƒï¼š" + calculator.calculateDiscount("VIP", "SPRING", 800));   // 640.0
        System.out.println("é‡‘ç‰Œæ˜¥å­£1000å…ƒï¼š" + calculator.calculateDiscount("GOLD", "SPRING", 1000)); // 850.0
        System.out.println("æ™®é€šç”¨æˆ·1000å…ƒï¼š" + calculator.calculateDiscount("NORMAL", "SUMMER", 1000)); // 950.0
        
        // åŠ¨æ€æ·»åŠ æ–°ç­–ç•¥
        DiscountStrategyManager.addStrategy("VIP_WINTER", amount -> amount * 0.6); // VIPå†¬å­£6æŠ˜
        System.out.println("VIPå†¬å­£1000å…ƒï¼š" + calculator.calculateDiscount("VIP", "WINTER", 1000)); // 600.0
    }
}
```

**ğŸ’¡ ç­–ç•¥æ˜ å°„çš„ä¼˜åŠ¿**
```
âœ… å¯è¯»æ€§å¼ºï¼šæ¯ä¸ªç­–ç•¥é€»è¾‘ç‹¬ç«‹ï¼ŒèŒè´£æ¸…æ™°
âœ… æ˜“äºæ‰©å±•ï¼šæ–°å¢ç­–ç•¥åªéœ€æ·»åŠ ç­–ç•¥ç±»å’Œæ˜ å°„å…³ç³»
âœ… ä¾¿äºæµ‹è¯•ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•æ¯ä¸ªç­–ç•¥
âœ… é…ç½®åŒ–ï¼šç­–ç•¥æ˜ å°„å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†
âœ… åŠ¨æ€æ€§ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ·»åŠ ç­–ç•¥
```

---

## 9. ğŸ“Š çŠ¶æ€æœºå®è·µ


### 9.1 è®¢å•çŠ¶æ€ç®¡ç†çš„å®é™…åº”ç”¨


**ğŸ”¸ è®¢å•çŠ¶æ€æµè½¬å›¾**
```
                    â”Œâ”€ è¶…æ—¶ â”€â”€â†’ [å·²å–æ¶ˆ]
                    â†“
    [å¾…æ”¯ä»˜] â”€â”€æ”¯ä»˜â”€â”€â†’ [å·²æ”¯ä»˜] â”€â”€å‘è´§â”€â”€â†’ [å·²å‘è´§] â”€â”€ç¡®è®¤æ”¶è´§â”€â”€â†’ [å·²å®Œæˆ]
       â†“               â†“                    â†“
    å–æ¶ˆè®¢å•        ç”³è¯·é€€æ¬¾              ç”³è¯·é€€è´§
       â†“               â†“                    â†“  
    [å·²å–æ¶ˆ]        [é€€æ¬¾ä¸­]              [é€€è´§ä¸­]
                       â†“                    â†“
                   å®¡æ ¸é€šè¿‡              å®¡æ ¸é€šè¿‡
                       â†“                    â†“
                    [å·²é€€æ¬¾]              [å·²é€€è´§]
```

**ğŸ’¡ å®Œæ•´çš„è®¢å•çŠ¶æ€æœºå®ç°**
```java
// 1. è®¢å•çŠ¶æ€æšä¸¾
public enum OrderStatus {
    PENDING_PAYMENT("å¾…æ”¯ä»˜"),
    PAID("å·²æ”¯ä»˜"),
    SHIPPED("å·²å‘è´§"),
    COMPLETED("å·²å®Œæˆ"),
    CANCELLED("å·²å–æ¶ˆ"),
    REFUNDING("é€€æ¬¾ä¸­"),
    REFUNDED("å·²é€€æ¬¾"),
    RETURNING("é€€è´§ä¸­"),
    RETURNED("å·²é€€è´§");
    
    private final String description;
    
    OrderStatus(String description) {
        this.description = description;
    }
    
    public String getDescription() {
        return description;
    }
}

// 2. çŠ¶æ€æ¥å£
public interface OrderState {
    void pay(OrderStateMachine context);
    void ship(OrderStateMachine context);
    void confirmReceipt(OrderStateMachine context);
    void cancel(OrderStateMachine context);
    void requestRefund(OrderStateMachine context);
    void approveRefund(OrderStateMachine context);
    void requestReturn(OrderStateMachine context);
    void approveReturn(OrderStateMachine context);
    OrderStatus getStatus();
}

// 3. æŠ½è±¡çŠ¶æ€ç±»ï¼ˆæä¾›é»˜è®¤å®ç°ï¼‰
public abstract class AbstractOrderState implements OrderState {
    
    protected void logInvalidOperation(String operation, OrderStatus currentStatus) {
        System.out.println("è®¢å•çŠ¶æ€ä¸º " + currentStatus.getDescription() + " æ—¶ï¼Œä¸èƒ½æ‰§è¡Œ " + operation);
    }
    
    @Override
    public void pay(OrderStateMachine context) {
        logInvalidOperation("æ”¯ä»˜", getStatus());
    }
    
    @Override
    public void ship(OrderStateMachine context) {
        logInvalidOperation("å‘è´§", getStatus());
    }
    
    @Override
    public void confirmReceipt(OrderStateMachine context) {
        logInvalidOperation("ç¡®è®¤æ”¶è´§", getStatus());
    }
    
    @Override
    public void cancel(OrderStateMachine context) {
        logInvalidOperation("å–æ¶ˆè®¢å•", getStatus());
    }
    
    @Override
    public void requestRefund(OrderStateMachine context) {
        logInvalidOperation("ç”³è¯·é€€æ¬¾", getStatus());
    }
    
    @Override
    public void approveRefund(OrderStateMachine context) {
        logInvalidOperation("æ‰¹å‡†é€€æ¬¾", getStatus());
    }
    
    @Override
    public void requestReturn(OrderStateMachine context) {
        logInvalidOperation("ç”³è¯·é€€è´§", getStatus());
    }
    
    @Override
    public void approveReturn(OrderStateMachine context) {
        logInvalidOperation("æ‰¹å‡†é€€è´§", getStatus());
    }
}

// 4. å…·ä½“çŠ¶æ€å®ç°
public class PendingPaymentState extends AbstractOrderState {
    @Override
    public void pay(OrderStateMachine context) {
        System.out.println("æ”¯ä»˜æˆåŠŸï¼Œè®¢å•çŠ¶æ€å˜ä¸ºå·²æ”¯ä»˜");
        context.setState(new PaidState());
    }
    
    @Override
    public void cancel(OrderStateMachine context) {
        System.out.println("è®¢å•å·²å–æ¶ˆ");
        context.setState(new CancelledState());
    }
    
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.PENDING_PAYMENT;
    }
}

public class PaidState extends AbstractOrderState {
    @Override
    public void ship(OrderStateMachine context) {
        System.out.println("è®¢å•å·²å‘è´§");
        context.setState(new ShippedState());
    }
    
    @Override
    public void requestRefund(OrderStateMachine context) {
        System.out.println("ç”³è¯·é€€æ¬¾ï¼Œç­‰å¾…å®¡æ ¸");
        context.setState(new RefundingState());
    }
    
    @Override
    public void cancel(OrderStateMachine context) {
        System.out.println("è®¢å•å·²å–æ¶ˆï¼Œå°†è‡ªåŠ¨é€€æ¬¾");
        context.setState(new RefundingState());
    }
    
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.PAID;
    }
}

public class ShippedState extends AbstractOrderState {
    @Override
    public void confirmReceipt(OrderStateMachine context) {
        System.out.println("ç¡®è®¤æ”¶è´§ï¼Œè®¢å•å®Œæˆ");
        context.setState(new CompletedState());
    }
    
    @Override
    public void requestReturn(OrderStateMachine context) {
        System.out.println("ç”³è¯·é€€è´§ï¼Œç­‰å¾…å®¡æ ¸");
        context.setState(new ReturningState());
    }
    
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.SHIPPED;
    }
}

public class CompletedState extends AbstractOrderState {
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.COMPLETED;
    }
}

public class CancelledState extends AbstractOrderState {
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.CANCELLED;
    }
}

public class RefundingState extends AbstractOrderState {
    @Override
    public void approveRefund(OrderStateMachine context) {
        System.out.println("é€€æ¬¾å®¡æ ¸é€šè¿‡ï¼Œé€€æ¬¾å®Œæˆ");
        context.setState(new RefundedState());
    }
    
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.REFUNDING;
    }
}

public class RefundedState extends AbstractOrderState {
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.REFUNDED;
    }
}

public class ReturningState extends AbstractOrderState {
    @Override
    public void approveReturn(OrderStateMachine context) {
        System.out.println("é€€è´§å®¡æ ¸é€šè¿‡ï¼Œé€€è´§å®Œæˆ");
        context.setState(new ReturnedState());
    }
    
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.RETURNING;
    }
}

public class ReturnedState extends AbstractOrderState {
    @Override
    public OrderStatus getStatus() {
        return OrderStatus.RETURNED;
    }
}

// 5. è®¢å•çŠ¶æ€æœº
public class OrderStateMachine {
    private OrderState currentState;
    private String orderId;
    private List<String> stateHistory; // çŠ¶æ€å˜æ›´å†å²
    
    public OrderStateMachine(String orderId) {
        this.orderId = orderId;
        this.currentState = new PendingPaymentState();
        this.stateHistory = new ArrayList<>();
        logStateChange("è®¢å•åˆ›å»º", currentState.getStatus());
    }
    
    public void setState(OrderState newState) {
        OrderState oldState = this.currentState;
        this.currentState = newState;
        logStateChange("çŠ¶æ€å˜æ›´", newState.getStatus());
        System.out.println("è®¢å• " + orderId + " çŠ¶æ€ä» " + oldState.getStatus().getDescription() 
                         + " å˜æ›´ä¸º " + newState.getStatus().getDescription());
    }
    
    private void logStateChange(String action, OrderStatus status) {
        String logEntry = String.format("[%s] %s: %s", 
            new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date()),
            action, status.getDescription());
        stateHistory.add(logEntry);
    }
    
    // å…¬å…±æ“ä½œæ–¹æ³•
    public void pay() { currentState.pay(this); }
    public void ship() { currentState.ship(this); }
    public void confirmReceipt() { currentState.confirmReceipt(this); }
    public void cancel() { currentState.cancel(this); }
    public void requestRefund() { currentState.requestRefund(this); }
    public void approveRefund() { currentState.approveRefund(this); }
    public void requestReturn() { currentState.requestReturn(this); }
    public void approveReturn() { currentState.approveReturn(this); }
    
    // çŠ¶æ€æŸ¥è¯¢
    public OrderStatus getCurrentStatus() {
        return currentState.getStatus();
    }
    
    public List<String> getStateHistory() {
        return new ArrayList<>(stateHistory);
    }
    
    public boolean canPay() {
        return currentState.getStatus() == OrderStatus.PENDING_PAYMENT;
    }
    
    public boolean canShip() {
        return currentState.getStatus() == OrderStatus.PAID;
    }
    
    public boolean canCancel() {
        OrderStatus status = currentState.getStatus();
        return status == OrderStatus.PENDING_PAYMENT || status == OrderStatus.PAID;
    }
}

// 6. ä½¿ç”¨ç¤ºä¾‹
public class OrderStateMachineExample {
    public static void main(String[] args) {
        // åˆ›å»ºè®¢å•
        OrderStateMachine order = new OrderStateMachine("ORDER-20250817-001");
        
        System.out.println("=== æ­£å¸¸è®¢å•æµç¨‹ ===");
        System.out.println("å½“å‰çŠ¶æ€ï¼š" + order.getCurrentStatus().getDescription());
        
        // æ”¯ä»˜è®¢å•
        order.pay();
        
        // å‘è´§
        order.ship();
        
        // ç¡®è®¤æ”¶è´§
        order.confirmReceipt();
        
        System.out.println("\n=== é€€è´§æµç¨‹æ¼”ç¤º ===");
        OrderStateMachine order2 = new OrderStateMachine("ORDER-20250817-002");
        order2.pay();
        order2.ship();
        order2.requestReturn(); // ç”³è¯·é€€è´§
        order2.approveReturn(); // å®¡æ ¸é€šè¿‡
        
        System.out.println("\n=== çŠ¶æ€å†å²è®°å½• ===");
        for (String history : order2.getStateHistory()) {
            System.out.println(history);
        }
        
        System.out.println("\n=== æ— æ•ˆæ“ä½œæ¼”ç¤º ===");
        OrderStateMachine order3 = new OrderStateMachine("ORDER-20250817-003");
        order3.ship(); // æœªæ”¯ä»˜çŠ¶æ€ä¸‹å‘è´§ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
        order3.confirmReceipt(); // æœªå‘è´§çŠ¶æ€ä¸‹ç¡®è®¤æ”¶è´§ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
    }
}
```

### 9.2 å·¥å•çŠ¶æ€ç®¡ç†å®è·µ


**ğŸ”¸ å·¥å•çŠ¶æ€æœºç®€åŒ–ç‰ˆ**
```java
// å·¥å•çŠ¶æ€æœº
public class TicketStateMachine {
    public enum TicketStatus {
        CREATED("å·²åˆ›å»º"),
        ASSIGNED("å·²åˆ†é…"),
        IN_PROGRESS("å¤„ç†ä¸­"),
        PENDING("ç­‰å¾…å“åº”"),
        RESOLVED("å·²è§£å†³"),
        CLOSED("å·²å…³é—­");
        
        private final String description;
        TicketStatus(String description) { this.description = description; }
        public String getDescription() { return description; }
    }
    
    private TicketStatus currentStatus;
    private String ticketId;
    private String assignee;
    
    public TicketStateMachine(String ticketId) {
        this.ticketId = ticketId;
        this.currentStatus = TicketStatus.CREATED;
    }
    
    public void assign(String assignee) {
        if (currentStatus == TicketStatus.CREATED) {
            this.assignee = assignee;
            this.currentStatus = TicketStatus.ASSIGNED;
            System.out.println("å·¥å• " + ticketId + " å·²åˆ†é…ç»™ " + assignee);
        } else {
            System.out.println("å·¥å•å½“å‰çŠ¶æ€ä¸å…è®¸åˆ†é…");
        }
    }
    
    public void startProcess() {
        if (currentStatus == TicketStatus.ASSIGNED) {
            this.currentStatus = TicketStatus.IN_PROGRESS;
            System.out.println("å·¥å• " + ticketId + " å¼€å§‹å¤„ç†");
        } else {
            System.out.println("å·¥å•å½“å‰çŠ¶æ€ä¸å…è®¸å¼€å§‹å¤„ç†");
        }
    }
    
    public void resolve() {
        if (currentStatus == TicketStatus.IN_PROGRESS || currentStatus == TicketStatus.PENDING) {
            this.currentStatus = TicketStatus.RESOLVED;
            System.out.println("å·¥å• " + ticketId + " å·²è§£å†³");
        } else {
            System.out.println("å·¥å•å½“å‰çŠ¶æ€ä¸å…è®¸æ ‡è®°ä¸ºå·²è§£å†³");
        }
    }
    
    public void close() {
        if (currentStatus == TicketStatus.RESOLVED) {
            this.currentStatus = TicketStatus.CLOSED;
            System.out.println("å·¥å• " + ticketId + " å·²å…³é—­");
        } else {
            System.out.println("å·¥å•å½“å‰çŠ¶æ€ä¸å…è®¸å…³é—­");
        }
    }
    
    public TicketStatus getCurrentStatus() {
        return currentStatus;
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è¡Œä¸ºå‹æ¨¡å¼æœ¬è´¨ï¼šç®¡ç†å¯¹è±¡é—´çš„åä½œå’ŒèŒè´£åˆ†é…
ğŸ”¸ ç­–ç•¥æ¨¡å¼ï¼šå°è£…ç®—æ³•æ—ï¼Œæ¶ˆé™¤å¤æ‚çš„if-elseç»“æ„
ğŸ”¸ è§‚å¯Ÿè€…æ¨¡å¼ï¼šå»ºç«‹ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå®ç°äº‹ä»¶é€šçŸ¥
ğŸ”¸ çŠ¶æ€æœºæ¨¡å¼ï¼šç®¡ç†å¯¹è±¡çŠ¶æ€å’ŒçŠ¶æ€é—´çš„è½¬æ¢è§„åˆ™
ğŸ”¸ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šå®šä¹‰ç®—æ³•éª¨æ¶ï¼Œå­ç±»å®ç°å…·ä½“æ­¥éª¤
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç­–ç•¥æ¨¡å¼**
```
ä½¿ç”¨åœºæ™¯ï¼š
âœ… å­˜åœ¨å¤§é‡if-elseæˆ–switch-caseåˆ¤æ–­
âœ… éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©ç®—æ³•
âœ… æœ‰å¤šç§å¤„ç†æ–¹å¼ä½†æ¥å£ç›¸åŒ
âœ… éœ€è¦éšè—ç®—æ³•çš„å…·ä½“å®ç°ç»†èŠ‚

ä¸é€‚ç”¨åœºæ™¯ï¼š
âŒ ç­–ç•¥å¾ˆå°‘ä¸”ä¸ä¼šå˜åŒ–
âŒ å®¢æˆ·ç«¯éœ€è¦äº†è§£æ‰€æœ‰ç­–ç•¥çš„å·®å¼‚
âŒ ç­–ç•¥é—´æœ‰å¤æ‚çš„ä¾èµ–å…³ç³»
```

**ğŸ”¹ è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹**
```
ä¼˜ç‚¹ï¼š
âœ… æ¾è€¦åˆï¼šè§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ç‹¬ç«‹å˜åŒ–
âœ… å¹¿æ’­é€šä¿¡ï¼šä¸€æ¬¡æ”¹å˜é€šçŸ¥å¤šä¸ªå¯¹è±¡
âœ… åŠ¨æ€å…³ç³»ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶å»ºç«‹è§‚å¯Ÿå…³ç³»

ç¼ºç‚¹ï¼š
âŒ æ€§èƒ½é—®é¢˜ï¼šè§‚å¯Ÿè€…è¿‡å¤šæ—¶é€šçŸ¥è€—æ—¶
âŒ å†…å­˜æ³„æ¼ï¼šè§‚å¯Ÿè€…æœªæ­£ç¡®ç§»é™¤å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼
âŒ è°ƒè¯•å›°éš¾ï¼šé—´æ¥è°ƒç”¨ä½¿è°ƒè¯•å˜å¾—å›°éš¾

è§£å†³æ–¹æ¡ˆï¼š
ğŸ”§ å¼‚æ­¥é€šçŸ¥ï¼šé¿å…é˜»å¡ä¸»æµç¨‹
ğŸ”§ å¼±å¼•ç”¨ï¼šé˜²æ­¢å†…å­˜æ³„æ¼
ğŸ”§ æ—¥å¿—è®°å½•ï¼šä¾¿äºè°ƒè¯•å’Œè¿½è¸ª
```

**ğŸ”¹ çŠ¶æ€æœºæ¨¡å¼çš„é€‚ç”¨æ€§**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… å¯¹è±¡è¡Œä¸ºä¾èµ–äºå®ƒçš„çŠ¶æ€
âœ… çŠ¶æ€è½¬æ¢è§„åˆ™å¤æ‚
âœ… éœ€è¦é¿å…åºå¤§çš„æ¡ä»¶è¯­å¥
âœ… çŠ¶æ€è½¬æ¢éœ€è¦è®°å½•å’Œè¿½è¸ª

å®æ–½å»ºè®®ï¼š
ğŸ”§ çŠ¶æ€æ•°é‡é€‚ä¸­ï¼ˆ<10ä¸ªçŠ¶æ€ï¼‰
ğŸ”§ çŠ¶æ€è½¬æ¢è§„åˆ™ç›¸å¯¹ç¨³å®š
ğŸ”§ éœ€è¦çŠ¶æ€è½¬æ¢çš„å†å²è®°å½•
ğŸ”§ å¤šä¸ªå¯¹è±¡æœ‰ç›¸ä¼¼çš„çŠ¶æ€è½¬æ¢
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¡ ä¸šåŠ¡åœºæ™¯æ˜ å°„**
```
ç”µå•†ç³»ç»Ÿï¼š
- ç­–ç•¥æ¨¡å¼ï¼šæ”¯ä»˜æ–¹å¼ã€æŠ˜æ‰£è®¡ç®—ã€é…é€ç­–ç•¥
- è§‚å¯Ÿè€…æ¨¡å¼ï¼šè®¢å•çŠ¶æ€å˜åŒ–é€šçŸ¥ã€åº“å­˜é¢„è­¦
- çŠ¶æ€æœºï¼šè®¢å•çŠ¶æ€ç®¡ç†ã€ç”¨æˆ·ç­‰çº§å˜åŒ–
- æ¨¡æ¿æ–¹æ³•ï¼šè®¢å•å¤„ç†æµç¨‹ã€å•†å“ä¸Šæ¶æµç¨‹

å†…å®¹ç®¡ç†ç³»ç»Ÿï¼š
- ç­–ç•¥æ¨¡å¼ï¼šå†…å®¹æ¨èç®—æ³•ã€æœç´¢æ’åº
- è§‚å¯Ÿè€…æ¨¡å¼ï¼šå†…å®¹å‘å¸ƒé€šçŸ¥ã€ç”¨æˆ·è¡Œä¸ºè¿½è¸ª
- çŠ¶æ€æœºï¼šå†…å®¹å®¡æ ¸æµç¨‹ã€ç”¨æˆ·è´¦å·çŠ¶æ€
- æ¨¡æ¿æ–¹æ³•ï¼šå†…å®¹å¤„ç†æµç¨‹ã€æ•°æ®å¯¼å…¥æµç¨‹

å·¥ä½œæµç³»ç»Ÿï¼š
- ç­–ç•¥æ¨¡å¼ï¼šå®¡æ‰¹ç­–ç•¥ã€é€šçŸ¥ç­–ç•¥
- è§‚å¯Ÿè€…æ¨¡å¼ï¼šæµç¨‹çŠ¶æ€å˜åŒ–é€šçŸ¥
- çŠ¶æ€æœºï¼šå·¥ä½œæµçŠ¶æ€ç®¡ç†
- æ¨¡æ¿æ–¹æ³•ï¼šæµç¨‹æ‰§è¡Œæ¨¡æ¿
```

**ğŸ¯ è®¾è®¡åŸåˆ™ä½“ç°**
```
å•ä¸€èŒè´£åŸåˆ™ï¼š
æ¯ä¸ªç­–ç•¥ç±»åªè´Ÿè´£ä¸€ç§ç®—æ³•å®ç°
æ¯ä¸ªè§‚å¯Ÿè€…åªå…³æ³¨ç‰¹å®šçš„äº‹ä»¶å¤„ç†
æ¯ä¸ªçŠ¶æ€ç±»åªç®¡ç†ç‰¹å®šçŠ¶æ€çš„è¡Œä¸º

å¼€é—­åŸåˆ™ï¼š
æ–°å¢ç­–ç•¥æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 
æ–°å¢è§‚å¯Ÿè€…ä¸å½±å“è¢«è§‚å¯Ÿè€…
æ–°å¢çŠ¶æ€ä¸å½±å“ç°æœ‰çŠ¶æ€

ä¾èµ–å€’ç½®åŸåˆ™ï¼š
ä¾èµ–æŠ½è±¡çš„ç­–ç•¥æ¥å£è€Œéå…·ä½“å®ç°
ä¾èµ–æŠ½è±¡çš„è§‚å¯Ÿè€…æ¥å£
ä¾èµ–æŠ½è±¡çš„çŠ¶æ€æ¥å£
```

**ğŸ”§ æœ€ä½³å®è·µå»ºè®®**
```
ç­–ç•¥æ¨¡å¼æœ€ä½³å®è·µï¼š
1. ç»“åˆå·¥å‚æ¨¡å¼ç®¡ç†ç­–ç•¥åˆ›å»º
2. ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†ç­–ç•¥æ˜ å°„
3. è€ƒè™‘ç­–ç•¥çš„çº¿ç¨‹å®‰å…¨æ€§
4. ä¸ºç­–ç•¥æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯

è§‚å¯Ÿè€…æ¨¡å¼æœ€ä½³å®è·µï¼š
1. ä½¿ç”¨å¼‚æ­¥é€šçŸ¥é¿å…æ€§èƒ½é—®é¢˜
2. å®ç°è§‚å¯Ÿè€…çš„ä¼˜å…ˆçº§æœºåˆ¶
3. æä¾›è§‚å¯Ÿè€…æ³¨å†Œ/æ³¨é”€çš„ä¾¿æ·æ–¹æ³•
4. è€ƒè™‘ä½¿ç”¨äº‹ä»¶æ€»çº¿ç®€åŒ–å®ç°

çŠ¶æ€æœºæœ€ä½³å®è·µï¼š
1. è®°å½•çŠ¶æ€å˜æ›´å†å²ä¾¿äºè¿½è¸ª
2. æä¾›çŠ¶æ€æŸ¥è¯¢å’ŒéªŒè¯æ–¹æ³•
3. å®ç°çŠ¶æ€çš„æŒä¹…åŒ–æœºåˆ¶
4. è€ƒè™‘å¹¶å‘çŠ¶æ€å˜æ›´çš„åŒæ­¥é—®é¢˜

æ¨¡æ¿æ–¹æ³•æœ€ä½³å®è·µï¼š
1. åˆç†ä½¿ç”¨æŠ½è±¡æ–¹æ³•å’Œé’©å­æ–¹æ³•
2. åœ¨æ¨¡æ¿æ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—å’Œç›‘æ§
3. æä¾›é»˜è®¤å®ç°å‡å°‘å­ç±»è´Ÿæ‹…
4. æ–‡æ¡£åŒ–æ¨¡æ¿æ–¹æ³•çš„æ‰§è¡Œé¡ºåº
```

### 10.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š å­¦ä¹ é¡ºåº**
```
ç¬¬ä¸€é˜¶æ®µï¼šç†è§£åŸºç¡€æ¦‚å¿µ
1ï¸âƒ£ æŒæ¡æ¯ä¸ªæ¨¡å¼çš„å®šä¹‰å’Œé€‚ç”¨åœºæ™¯
2ï¸âƒ£ ç†è§£æ¨¡å¼è§£å†³çš„å…·ä½“é—®é¢˜
3ï¸âƒ£ èƒ½å¤Ÿè¯†åˆ«ä»£ç ä¸­çš„æ¨¡å¼åº”ç”¨

ç¬¬äºŒé˜¶æ®µï¼šåŠ¨æ‰‹å®è·µ
1ï¸âƒ£ å®ç°ç®€å•çš„ç¤ºä¾‹ä»£ç 
2ï¸âƒ£ é‡æ„ç°æœ‰çš„if-elseä»£ç ä¸ºç­–ç•¥æ¨¡å¼
3ï¸âƒ£ ä¸ºç®€å•çš„ä¸šåŠ¡åœºæ™¯è®¾è®¡çŠ¶æ€æœº

ç¬¬ä¸‰é˜¶æ®µï¼šæ·±å…¥åº”ç”¨
1ï¸âƒ£ ç»“åˆå®é™…é¡¹ç›®åº”ç”¨æ¨¡å¼
2ï¸âƒ£ è€ƒè™‘æ¨¡å¼çš„æ€§èƒ½å’Œæ‰©å±•æ€§
3ï¸âƒ£ å­¦ä¼šæ¨¡å¼çš„ç»„åˆä½¿ç”¨

ç¬¬å››é˜¶æ®µï¼šèä¼šè´¯é€š
1ï¸âƒ£ èƒ½å¤Ÿåœ¨ç³»ç»Ÿè®¾è®¡ä¸­åˆç†é€‰æ‹©æ¨¡å¼
2ï¸âƒ£ ç†è§£æ¨¡å¼èƒŒåçš„è®¾è®¡åŸåˆ™
3ï¸âƒ£ å…·å¤‡åˆ›æ–°å’Œæ”¹è¿›æ¨¡å¼çš„èƒ½åŠ›
```

**ğŸ¯ ç»ƒä¹ å»ºè®®**
```
ç­–ç•¥æ¨¡å¼ç»ƒä¹ ï¼š
ğŸ’» é‡æ„ä¸€ä¸ªåŒ…å«å¤æ‚if-elseçš„è®¡ç®—å™¨
ğŸ’» å®ç°ä¸€ä¸ªå¤šæ¸ é“æ¶ˆæ¯å‘é€ç³»ç»Ÿ
ğŸ’» è®¾è®¡ä¸€ä¸ªæ¸¸æˆè§’è‰²æŠ€èƒ½ç³»ç»Ÿ

è§‚å¯Ÿè€…æ¨¡å¼ç»ƒä¹ ï¼š
ğŸ’» å®ç°ä¸€ä¸ªç®€å•çš„å‘å¸ƒ-è®¢é˜…ç³»ç»Ÿ
ğŸ’» è®¾è®¡ä¸€ä¸ªè‚¡ç¥¨ä»·æ ¼ç›‘æ§ç³»ç»Ÿ
ğŸ’» åˆ›å»ºä¸€ä¸ªç”¨æˆ·è¡Œä¸ºè¿½è¸ªç³»ç»Ÿ

çŠ¶æ€æœºç»ƒä¹ ï¼š
ğŸ’» è®¾è®¡ä¸€ä¸ªATMæœºçŠ¶æ€ç®¡ç†ç³»ç»Ÿ
ğŸ’» å®ç°ä¸€ä¸ªæ¸¸æˆè§’è‰²çŠ¶æ€æœº
ğŸ’» åˆ›å»ºä¸€ä¸ªå®¡æ‰¹æµç¨‹çŠ¶æ€ç®¡ç†

æ¨¡æ¿æ–¹æ³•ç»ƒä¹ ï¼š
ğŸ’» è®¾è®¡ä¸€ä¸ªæ•°æ®å¯¼å…¥å¤„ç†æ¨¡æ¿
ğŸ’» å®ç°ä¸€ä¸ªæµ‹è¯•æ‰§è¡Œæ¡†æ¶
ğŸ’» åˆ›å»ºä¸€ä¸ªæŠ¥è¡¨ç”Ÿæˆæ¨¡æ¿
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
è¡Œä¸ºå‹æ¨¡å¼ç®¡åä½œï¼Œå¯¹è±¡èŒè´£è¦åˆ†æ¸…
ç­–ç•¥å°è£…ç®—æ³•æ—ï¼Œif-elseç»Ÿç»Ÿè¦æ‘’å¼ƒ
è§‚å¯Ÿå‘å¸ƒåŠ è®¢é˜…ï¼Œæ¾è€¦åˆæ¥å¥½è®¾è®¡
çŠ¶æ€æœºç®¡çŠ¶æ€å˜ï¼Œå¤æ‚æµç¨‹ä¸å†ä¹±
æ¨¡æ¿å®šä¹‰å¥½éª¨æ¶ï¼Œå­ç±»å¡«å……å…·ä½“åŒ–
```