---
title: 6ã€ç»“æ„å‹æ¨¡å¼
---
## ğŸ“š ç›®å½•

1. [ç»“æ„å‹æ¨¡å¼æ¦‚è§ˆ](#1-ç»“æ„å‹æ¨¡å¼æ¦‚è§ˆ)
2. [é€‚é…å™¨æ¨¡å¼è¯¦è§£](#2-é€‚é…å™¨æ¨¡å¼è¯¦è§£)
3. [è£…é¥°å™¨æ¨¡å¼è¯¦è§£](#3-è£…é¥°å™¨æ¨¡å¼è¯¦è§£)
4. [ä»£ç†æ¨¡å¼è¯¦è§£](#4-ä»£ç†æ¨¡å¼è¯¦è§£)
5. [ç»„åˆæ¨¡å¼è¯¦è§£](#5-ç»„åˆæ¨¡å¼è¯¦è§£)
6. [ç»“æ„å‹æ ¸å¿ƒå®é™…åº”ç”¨](#6-ç»“æ„å‹æ ¸å¿ƒå®é™…åº”ç”¨)
7. [ç»“æ„å‹æ‰©å±•æ·±åº¦åº”ç”¨](#7-ç»“æ„å‹æ‰©å±•æ·±åº¦åº”ç”¨)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ ç»“æ„å‹æ¨¡å¼æ¦‚è§ˆ


### 1.1 ä»€ä¹ˆæ˜¯ç»“æ„å‹æ¨¡å¼


**ğŸ’¡ ç®€å•ç†è§£**ï¼š
ç»“æ„å‹æ¨¡å¼å°±åƒè£…ä¿®æˆ¿å­æ—¶çš„å„ç§è£…ä¿®æŠ€å·§ï¼Œå¸®ä½ æŠŠä¸åŒçš„ç»„ä»¶å·§å¦™åœ°ç»„åˆåœ¨ä¸€èµ·ï¼Œè®©æ•´ä¸ªç³»ç»Ÿæ›´åŠ åè°ƒã€çµæ´»ã€‚

> **æ ¸å¿ƒæ€æƒ³**ï¼šç»“æ„å‹æ¨¡å¼ä¸“é—¨è§£å†³"å¦‚ä½•ç»„è£…"çš„é—®é¢˜ï¼Œè®©ä¸åŒçš„ç±»å’Œå¯¹è±¡èƒ½å¤Ÿæ›´å¥½åœ°åä½œå·¥ä½œã€‚

### 1.2 ç»“æ„å‹æ¨¡å¼çš„ä½œç”¨


```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š

æ’åº§è½¬æ¢å™¨ â”€â”€ é€‚é…å™¨æ¨¡å¼  (è®©ä¸å…¼å®¹çš„è®¾å¤‡èƒ½è¿æ¥)
æˆ¿å±‹è£…ä¿®   â”€â”€ è£…é¥°å™¨æ¨¡å¼  (åœ¨åŸæœ‰åŸºç¡€ä¸Šå¢åŠ åŠŸèƒ½)
ä¸­ä»‹ä»£ç†   â”€â”€ ä»£ç†æ¨¡å¼    (ä»£æ›¿åˆ«äººå¤„ç†äº‹åŠ¡)
ç»„ç»‡æ¶æ„   â”€â”€ ç»„åˆæ¨¡å¼    (ç»Ÿä¸€ç®¡ç†ä¸ªä½“å’Œç¾¤ä½“)
```

**ğŸ¯ å››å¤§æ ¸å¿ƒæ¨¡å¼å¯¹æ¯”**ï¼š

| **æ¨¡å¼åç§°** | **ä¸»è¦ä½œç”¨** | **ç”Ÿæ´»ç±»æ¯”** | **è§£å†³é—®é¢˜** |
|-------------|-------------|-------------|-------------|
| **é€‚é…å™¨æ¨¡å¼** | `è®©ä¸å…¼å®¹çš„æ¥å£èƒ½å¤Ÿé…åˆå·¥ä½œ` | `æ’åº§è½¬æ¢å™¨` | `æ¥å£ä¸åŒ¹é…` |
| **è£…é¥°å™¨æ¨¡å¼** | `åŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½` | `ç»™æˆ¿å­è£…ä¿®` | `åŠŸèƒ½æ‰©å±•` |
| **ä»£ç†æ¨¡å¼** | `ä¸ºå¯¹è±¡æä¾›è®¿é—®æ§åˆ¶` | `æˆ¿å±‹ä¸­ä»‹` | `è®¿é—®æ§åˆ¶` |
| **ç»„åˆæ¨¡å¼** | `ç»Ÿä¸€å¤„ç†ä¸ªä½“å’Œé›†åˆ` | `å…¬å¸ç»„ç»‡æ¶æ„` | `å±‚æ¬¡ç»“æ„` |

---

## 2. ğŸ”Œ é€‚é…å™¨æ¨¡å¼è¯¦è§£


### 2.1 é€‚é…å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—è§£é‡Š**ï¼š
é€‚é…å™¨æ¨¡å¼å°±åƒå‡ºå›½æ—…è¡Œæ—¶ç”¨çš„æ’åº§è½¬æ¢å™¨ã€‚ä½ çš„æ‰‹æœºå……ç”µå™¨æ˜¯å›½å†…çš„ä¸¤è„šæ’å¤´ï¼Œä½†å›½å¤–æ˜¯ä¸‰è„šæ’åº§ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªè½¬æ¢å™¨æ¥"é€‚é…"ã€‚

```
é€‚é…å™¨æ¨¡å¼è§£å†³çš„é—®é¢˜ï¼š

æ—§ç³»ç»Ÿæ¥å£ â”€â”€[ä¸å…¼å®¹]â”€â”€âœ—â”€â”€[æ–°ç³»ç»Ÿæ¥å£]
                          
æ—§ç³»ç»Ÿæ¥å£ â”€â”€[é€‚é…å™¨]â”€â”€âœ“â”€â”€[æ–°ç³»ç»Ÿæ¥å£]
            è®©å®ƒä»¬èƒ½å¯¹è¯
```

### 2.2 é€‚é…å™¨æ¨¡å¼çš„æ ¸å¿ƒç»„æˆ


```
é€‚é…å™¨æ¨¡å¼ç»“æ„å›¾ï¼š

å®¢æˆ·ç«¯ â”€â”€è°ƒç”¨â”€â”€â†’ é€‚é…å™¨ â”€â”€è½¬æ¢è°ƒç”¨â”€â”€â†’ è¢«é€‚é…è€…
  â†“              â†“                    â†“
 ç”¨æˆ·ä»£ç       è½¬æ¢å™¨é€»è¾‘            åŸæœ‰åŠŸèƒ½
```

**ğŸ”§ ç®€åŒ–ä»£ç ç¤ºä¾‹**ï¼š

```java
// åŸæœ‰çš„è€ç³»ç»Ÿ - åªèƒ½æ’­æ”¾MP3
class MP3Player {
    public void playMp3(String filename) {
        System.out.println("æ’­æ”¾MP3: " + filename);
    }
}

// æ–°çš„éŸ³é¢‘æ ¼å¼ - MP4æ’­æ”¾å™¨
interface MediaPlayer {
    void play(String filename);
}

// é€‚é…å™¨ - è®©è€ç³»ç»Ÿèƒ½æ’­æ”¾æ–°æ ¼å¼
class AudioAdapter implements MediaPlayer {
    private MP3Player mp3Player;
    
    public AudioAdapter() {
        this.mp3Player = new MP3Player();
    }
    
    @Override
    public void play(String filename) {
        if (filename.endsWith(".mp3")) {
            mp3Player.playMp3(filename);  // è½¬æ¢è°ƒç”¨
        } else {
            System.out.println("æš‚ä¸æ”¯æŒ: " + filename);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class AdapterDemo {
    public static void main(String[] args) {
        MediaPlayer player = new AudioAdapter();
        player.play("æ­Œæ›².mp3");  // é€šè¿‡é€‚é…å™¨æ’­æ”¾
    }
}
```

### 2.3 é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯


**âœ… ä»€ä¹ˆæ—¶å€™ç”¨é€‚é…å™¨æ¨¡å¼**ï¼š

1. **ç³»ç»Ÿå‡çº§** - è€ç³»ç»Ÿè¦æ¥å…¥æ–°æ¥å£
2. **ç¬¬ä¸‰æ–¹é›†æˆ** - è¦ç”¨åˆ«äººçš„åº“ï¼Œä½†æ¥å£ä¸åŒ¹é…  
3. **æ•°æ®æ ¼å¼è½¬æ¢** - ä¸åŒæ ¼å¼ä¹‹é—´çš„è½¬æ¢
4. **é—ç•™ä»£ç å¤ç”¨** - è®©è€ä»£ç åœ¨æ–°ç³»ç»Ÿä¸­ç»§ç»­å·¥ä½œ

**ğŸ¯ å®é™…åº”ç”¨ä¸¾ä¾‹**ï¼š

```java
// å®é™…åº”ç”¨ï¼šæ”¯ä»˜ç³»ç»Ÿé€‚é…å™¨
class WeChatPay {
    public void wechatPay(double amount) {
        System.out.println("å¾®ä¿¡æ”¯ä»˜: " + amount + "å…ƒ");
    }
}

class AliPay {
    public void alipay(double amount) {
        System.out.println("æ”¯ä»˜å®æ”¯ä»˜: " + amount + "å…ƒ");
    }
}

// ç»Ÿä¸€æ”¯ä»˜æ¥å£
interface PaymentAdapter {
    void pay(double amount);
}

// å¾®ä¿¡æ”¯ä»˜é€‚é…å™¨
class WeChatAdapter implements PaymentAdapter {
    private WeChatPay weChatPay = new WeChatPay();
    
    @Override
    public void pay(double amount) {
        weChatPay.wechatPay(amount);
    }
}
```

---

## 3. ğŸ¨ è£…é¥°å™¨æ¨¡å¼è¯¦è§£


### 3.1 è£…é¥°å™¨æ¨¡å¼æ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—è§£é‡Š**ï¼š
è£…é¥°å™¨æ¨¡å¼å°±åƒç»™æˆ¿å­è£…ä¿®ã€‚ä½ æœ‰ä¸€å¥—æ¯›å¯æˆ¿ï¼ˆåŸºæœ¬åŠŸèƒ½ï¼‰ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½å°±åŠ ä»€ä¹ˆè£…ä¿®ï¼ˆåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼‰ï¼Œè€Œä¸”å¯ä»¥éšæ—¶æ‹†æ‰é‡è£…ï¼Œä¸ä¼šç ´ååŸæ¥çš„æˆ¿å­ç»“æ„ã€‚

```
è£…é¥°å™¨æ¨¡å¼çš„é­…åŠ›ï¼š

åŸºç¡€å’–å•¡ â”€â”€â”€â†’ åŠ ç‰›å¥¶ â”€â”€â”€â†’ åŠ ç³– â”€â”€â”€â†’ æœ€ç»ˆå’–å•¡
 (5å…ƒ)      (+2å…ƒ)    (+1å…ƒ)    (8å…ƒ)

æ¯ä¸€æ­¥éƒ½æ˜¯åœ¨åŸæœ‰åŸºç¡€ä¸Š"è£…é¥°"ï¼Œè€Œä¸æ˜¯é‡æ–°åšä¸€æ¯å’–å•¡
```

### 3.2 è£…é¥°å™¨æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³


**ğŸ’¡ å…³é”®ç†è§£**ï¼š
è£…é¥°å™¨æ¨¡å¼è®©ä½ å¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·ç»™å¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œæ¯ä¸ªè£…é¥°å™¨éƒ½æ˜¯ä¸€å—ç§¯æœ¨ï¼Œå¯ä»¥è‡ªç”±ç»„åˆã€‚

```
è£…é¥°å™¨ç»„åˆç¤ºä¾‹ï¼š

åŸºç¡€åŠŸèƒ½ â”€â”€è£…é¥°å™¨Aâ”€â”€â†’ åŠŸèƒ½A+åŸºç¡€
             â†“
         è£…é¥°å™¨Bâ”€â”€â†’ åŠŸèƒ½B+A+åŸºç¡€
             â†“  
         è£…é¥°å™¨Câ”€â”€â†’ åŠŸèƒ½C+B+A+åŸºç¡€
```

**ğŸ”§ ç®€åŒ–ä»£ç ç¤ºä¾‹**ï¼š

```java
// åŸºç¡€æ¥å£
interface Coffee {
    String getDescription();
    double getCost();
}

// åŸºç¡€å’–å•¡
class SimpleCoffee implements Coffee {
    @Override
    public String getDescription() {
        return "çº¯å’–å•¡";
    }
    
    @Override
    public double getCost() {
        return 5.0;
    }
}

// è£…é¥°å™¨åŸºç±»
abstract class CoffeeDecorator implements Coffee {
    protected Coffee coffee;
    
    public CoffeeDecorator(Coffee coffee) {
        this.coffee = coffee;
    }
}

// ç‰›å¥¶è£…é¥°å™¨
class MilkDecorator extends CoffeeDecorator {
    public MilkDecorator(Coffee coffee) {
        super(coffee);
    }
    
    @Override
    public String getDescription() {
        return coffee.getDescription() + " + ç‰›å¥¶";
    }
    
    @Override
    public double getCost() {
        return coffee.getCost() + 2.0;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class DecoratorDemo {
    public static void main(String[] args) {
        Coffee coffee = new SimpleCoffee();        // åŸºç¡€å’–å•¡
        coffee = new MilkDecorator(coffee);        // åŠ ç‰›å¥¶
        
        System.out.println(coffee.getDescription()); // "çº¯å’–å•¡ + ç‰›å¥¶"
        System.out.println("ä»·æ ¼: " + coffee.getCost()); // 7.0
    }
}
```

### 3.3 è£…é¥°å™¨æ¨¡å¼ vs ç»§æ‰¿


**ğŸ”„ ä¸ºä»€ä¹ˆä¸ç”¨ç»§æ‰¿**ï¼š

```
ç»§æ‰¿æ–¹å¼çš„é—®é¢˜ï¼š

å’–å•¡åŸºç±»
â”œâ”€â”€ ç‰›å¥¶å’–å•¡
â”œâ”€â”€ ç³–å’–å•¡  
â”œâ”€â”€ ç‰›å¥¶ç³–å’–å•¡
â”œâ”€â”€ å¥¶æ²¹å’–å•¡
â”œâ”€â”€ ç‰›å¥¶å¥¶æ²¹å’–å•¡
â””â”€â”€ ç³–å¥¶æ²¹å’–å•¡
    â””â”€â”€ ç‰›å¥¶ç³–å¥¶æ²¹å’–å•¡ ...

ç±»çˆ†ç‚¸ï¼10ç§é…æ–™å°±è¦1024ä¸ªç±»ï¼
```

**âœ… è£…é¥°å™¨æ–¹å¼çš„ä¼˜åŠ¿**ï¼š

| **å¯¹æ¯”é¡¹** | **ç»§æ‰¿æ–¹å¼** | **è£…é¥°å™¨æ–¹å¼** |
|----------|-------------|--------------|
| **ç±»çš„æ•°é‡** | `æŒ‡æ•°çº§å¢é•¿` | `çº¿æ€§å¢é•¿` |
| **çµæ´»æ€§** | `ç¼–è¯‘æ—¶ç¡®å®š` | `è¿è¡Œæ—¶ç»„åˆ` |
| **æ‰©å±•æ€§** | `ä¿®æ”¹çˆ¶ç±»å½±å“å­ç±»` | `ç‹¬ç«‹æ·»åŠ è£…é¥°å™¨` |
| **å¤ç”¨æ€§** | `åŠŸèƒ½è€¦åˆåœ¨ç±»ä¸­` | `è£…é¥°å™¨å¯éšæ„ç»„åˆ` |

---

## 4. ğŸ›¡ï¸ ä»£ç†æ¨¡å¼è¯¦è§£


### 4.1 ä»£ç†æ¨¡å¼æ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—è§£é‡Š**ï¼š
ä»£ç†æ¨¡å¼å°±åƒæˆ¿å±‹ä¸­ä»‹ã€‚ä½ è¦ä¹°æˆ¿å­ï¼Œä¸ç›´æ¥å’Œæˆ¿ä¸œè°ˆï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹ã€‚ä¸­ä»‹å¯ä»¥å¸®ä½ ç­›é€‰æˆ¿æºã€è°ˆä»·æ ¼ã€å¤„ç†æ‰‹ç»­ï¼Œè¿˜èƒ½åœ¨ä½ ä¸æ–¹ä¾¿çš„æ—¶å€™ä»£è¡¨ä½ å¤„ç†äº‹åŠ¡ã€‚

```
ä»£ç†æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š

æ˜æ˜Ÿ â”€â”€â†’ ç»çºªäºº â”€â”€â†’ ç²‰ä¸
         (æ§åˆ¶è®¿é—®)

è€æ¿ â”€â”€â†’ ç§˜ä¹¦ â”€â”€â†’ å®¢æˆ·  
         (é¢„å¤„ç†)

ç”¨æˆ· â”€â”€â†’ ç¼“å­˜ â”€â”€â†’ æ•°æ®åº“
         (æ€§èƒ½ä¼˜åŒ–)
```

### 4.2 ä»£ç†æ¨¡å¼çš„ç±»å‹


**ğŸ¯ ä¸‰ç§å¸¸è§ä»£ç†ç±»å‹**ï¼š

1. **ä¿æŠ¤ä»£ç†** - æ§åˆ¶è®¿é—®æƒé™ï¼ˆåƒé—¨å«ï¼‰
2. **ç¼“å­˜ä»£ç†** - æå‡æ€§èƒ½ï¼ˆåƒå¿«é€’ä»£æ”¶ç‚¹ï¼‰  
3. **è¿œç¨‹ä»£ç†** - ä»£ç†è¿œç¨‹å¯¹è±¡ï¼ˆåƒå®¢æœï¼‰

**ğŸ”§ ç®€åŒ–ä»£ç ç¤ºä¾‹**ï¼š

```java
// çœŸå®å¯¹è±¡æ¥å£
interface FileDownloader {
    void download(String filename);
}

// çœŸå®çš„ä¸‹è½½å™¨
class RealFileDownloader implements FileDownloader {
    @Override
    public void download(String filename) {
        System.out.println("æ­£åœ¨ä¸‹è½½: " + filename);
        // æ¨¡æ‹Ÿä¸‹è½½è€—æ—¶
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("ä¸‹è½½å®Œæˆ: " + filename);
    }
}

// ç¼“å­˜ä»£ç†
class CacheProxy implements FileDownloader {
    private RealFileDownloader realDownloader;
    private Set<String> cache = new HashSet<>();
    
    @Override
    public void download(String filename) {
        if (cache.contains(filename)) {
            System.out.println("ä»ç¼“å­˜è·å–: " + filename);
            return;
        }
        
        // ç¬¬ä¸€æ¬¡ä¸‹è½½
        if (realDownloader == null) {
            realDownloader = new RealFileDownloader();
        }
        
        realDownloader.download(filename);
        cache.add(filename);  // åŠ å…¥ç¼“å­˜
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class ProxyDemo {
    public static void main(String[] args) {
        FileDownloader downloader = new CacheProxy();
        
        downloader.download("ç”µå½±.mp4");  // çœŸå®ä¸‹è½½
        downloader.download("ç”µå½±.mp4");  // ä»ç¼“å­˜è·å–
    }
}
```

### 4.3 ä»£ç†æ¨¡å¼çš„å®é™…åº”ç”¨


**ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯**ï¼š

```java
// æƒé™æ§åˆ¶ä»£ç†
class AdminProxy implements FileDownloader {
    private RealFileDownloader realDownloader;
    private String userRole;
    
    public AdminProxy(String userRole) {
        this.userRole = userRole;
    }
    
    @Override
    public void download(String filename) {
        if (!"admin".equals(userRole)) {
            System.out.println("æƒé™ä¸è¶³ï¼Œæ— æ³•ä¸‹è½½: " + filename);
            return;
        }
        
        if (realDownloader == null) {
            realDownloader = new RealFileDownloader();
        }
        realDownloader.download(filename);
    }
}
```

---

## 5. ğŸŒ³ ç»„åˆæ¨¡å¼è¯¦è§£


### 5.1 ç»„åˆæ¨¡å¼æ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—è§£é‡Š**ï¼š
ç»„åˆæ¨¡å¼å°±åƒå…¬å¸çš„ç»„ç»‡æ¶æ„ã€‚æ— è®ºæ˜¯ä¸€ä¸ªå‘˜å·¥è¿˜æ˜¯ä¸€ä¸ªéƒ¨é—¨ï¼Œåœ¨å¤„ç†æŸäº›æ“ä½œæ—¶ï¼ˆæ¯”å¦‚å‘å·¥èµ„ã€å¼€ä¼šé€šçŸ¥ï¼‰éƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼å¤„ç†ã€‚

```
å…¬å¸ç»„ç»‡æ¶æ„ï¼š

æ€»å…¬å¸
â”œâ”€â”€ æŠ€æœ¯éƒ¨
â”‚   â”œâ”€â”€ å¼ ä¸‰ (å‘˜å·¥)
â”‚   â””â”€â”€ æå›› (å‘˜å·¥)
â”œâ”€â”€ é”€å”®éƒ¨  
â”‚   â”œâ”€â”€ ç‹äº” (å‘˜å·¥)
â”‚   â””â”€â”€ èµµå…­ (å‘˜å·¥)
â””â”€â”€ åˆ†å…¬å¸
    â””â”€â”€ å¸‚åœºéƒ¨
        â””â”€â”€ å°æ˜ (å‘˜å·¥)

å‘é€šçŸ¥æ—¶ï¼šå¯ä»¥ç»™ä¸ªäººå‘ï¼Œä¹Ÿå¯ä»¥ç»™æ•´ä¸ªéƒ¨é—¨å‘
```

### 5.2 ç»„åˆæ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³


**ğŸ’¡ å…³é”®ç†è§£**ï¼š
ç»„åˆæ¨¡å¼è®©ä½ å¯ä»¥ç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å•ä¸ªå¯¹è±¡å’Œå¯¹è±¡é›†åˆï¼Œå°±åƒç”¨åŒä¸€ä¸ªé¥æ§å™¨å¯ä»¥æ§åˆ¶å•ä¸ªç¯æ³¡ï¼Œä¹Ÿå¯ä»¥æ§åˆ¶æ•´ä¸ªæˆ¿é—´çš„ç¯ã€‚

**ğŸ”§ ç®€åŒ–ä»£ç ç¤ºä¾‹**ï¼š

```java
// ç»Ÿä¸€æ¥å£ - æ— è®ºæ˜¯å‘˜å·¥è¿˜æ˜¯éƒ¨é—¨éƒ½èƒ½æ‰§è¡Œ
interface Employee {
    void showInfo();
    double getSalary();
}

// å¶å­èŠ‚ç‚¹ - å…·ä½“å‘˜å·¥
class Developer implements Employee {
    private String name;
    private double salary;
    
    public Developer(String name, double salary) {
        this.name = name;
        this.salary = salary;
    }
    
    @Override
    public void showInfo() {
        System.out.println("å¼€å‘å‘˜å·¥: " + name);
    }
    
    @Override
    public double getSalary() {
        return salary;
    }
}

// ç»„åˆèŠ‚ç‚¹ - éƒ¨é—¨
class Department implements Employee {
    private String name;
    private List<Employee> employees = new ArrayList<>();
    
    public Department(String name) {
        this.name = name;
    }
    
    public void addEmployee(Employee employee) {
        employees.add(employee);
    }
    
    @Override
    public void showInfo() {
        System.out.println("éƒ¨é—¨: " + name);
        for (Employee emp : employees) {
            emp.showInfo();  // é€’å½’è°ƒç”¨
        }
    }
    
    @Override
    public double getSalary() {
        double total = 0;
        for (Employee emp : employees) {
            total += emp.getSalary();  // é€’å½’è®¡ç®—
        }
        return total;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class CompositeDemo {
    public static void main(String[] args) {
        // åˆ›å»ºå‘˜å·¥
        Employee dev1 = new Developer("å¼ ä¸‰", 8000);
        Employee dev2 = new Developer("æå››", 9000);
        
        // åˆ›å»ºéƒ¨é—¨
        Department techDept = new Department("æŠ€æœ¯éƒ¨");
        techDept.addEmployee(dev1);
        techDept.addEmployee(dev2);
        
        // ç»Ÿä¸€å¤„ç† - æ— è®ºæ˜¯ä¸ªäººè¿˜æ˜¯éƒ¨é—¨
        techDept.showInfo();  // æ˜¾ç¤ºæ•´ä¸ªéƒ¨é—¨ä¿¡æ¯
        System.out.println("éƒ¨é—¨æ€»å·¥èµ„: " + techDept.getSalary());
    }
}
```

### 5.3 ç»„åˆæ¨¡å¼çš„ä½¿ç”¨åœºæ™¯


**âœ… ä»€ä¹ˆæ—¶å€™ç”¨ç»„åˆæ¨¡å¼**ï¼š

1. **æ ‘å½¢ç»“æ„** - æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€èœå•å’Œå­èœå•
2. **å±‚æ¬¡ç®¡ç†** - å…¬å¸ç»„ç»‡æ¶æ„ã€æƒé™ä½“ç³»
3. **ç»Ÿä¸€æ“ä½œ** - éœ€è¦å¯¹ä¸ªä½“å’Œç¾¤ä½“åšåŒæ ·æ“ä½œ

**ğŸŒ² æ–‡ä»¶ç³»ç»Ÿç¤ºä¾‹**ï¼š

```java
// æ–‡ä»¶ç³»ç»Ÿç»„åˆæ¨¡å¼
interface FileSystemItem {
    void display();
    long getSize();
}

class File implements FileSystemItem {
    private String name;
    private long size;
    
    public File(String name, long size) {
        this.name = name;
        this.size = size;
    }
    
    @Override
    public void display() {
        System.out.println("æ–‡ä»¶: " + name + " (" + size + "KB)");
    }
    
    @Override
    public long getSize() {
        return size;
    }
}

class Folder implements FileSystemItem {
    private String name;
    private List<FileSystemItem> items = new ArrayList<>();
    
    public void addItem(FileSystemItem item) {
        items.add(item);
    }
    
    @Override
    public void display() {
        System.out.println("æ–‡ä»¶å¤¹: " + name);
        for (FileSystemItem item : items) {
            item.display();  // é€’å½’æ˜¾ç¤º
        }
    }
    
    @Override
    public long getSize() {
        long total = 0;
        for (FileSystemItem item : items) {
            total += item.getSize();  // é€’å½’è®¡ç®—å¤§å°
        }
        return total;
    }
}
```

---

## 6. ğŸ¯ ç»“æ„å‹æ ¸å¿ƒå®é™…åº”ç”¨


### 6.1 ä»£ç†æ¨¡å¼çš„æ·±åº¦åº”ç”¨


**ğŸ”¥ Spring AOPçš„ä»£ç†æœºåˆ¶**ï¼š

Springæ¡†æ¶å¤§é‡ä½¿ç”¨ä»£ç†æ¨¡å¼æ¥å®ç°AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Œè®©ä½ å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹æ·»åŠ æ—¥å¿—ã€äº‹åŠ¡ã€æƒé™æ§åˆ¶ç­‰åŠŸèƒ½ã€‚

```java
// ä¸šåŠ¡æ¥å£
interface UserService {
    void saveUser(String username);
}

// çœŸå®ä¸šåŠ¡ç±»
class UserServiceImpl implements UserService {
    @Override
    public void saveUser(String username) {
        System.out.println("ä¿å­˜ç”¨æˆ·: " + username);
    }
}

// AOPä»£ç† - æ·»åŠ æ—¥å¿—åŠŸèƒ½
class LoggingProxy implements UserService {
    private UserService target;
    
    public LoggingProxy(UserService target) {
        this.target = target;
    }
    
    @Override
    public void saveUser(String username) {
        System.out.println("[æ—¥å¿—] å¼€å§‹ä¿å­˜ç”¨æˆ·");
        long startTime = System.currentTimeMillis();
        
        target.saveUser(username);  // è°ƒç”¨çœŸå®æ–¹æ³•
        
        long endTime = System.currentTimeMillis();
        System.out.println("[æ—¥å¿—] ä¿å­˜å®Œæˆï¼Œè€—æ—¶: " + (endTime - startTime) + "ms");
    }
}
```

**ğŸš€ å®é™…åº”ç”¨ä»·å€¼**ï¼š
- **æ— ä¾µå…¥æ€§** - ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç å°±èƒ½æ·»åŠ åŠŸèƒ½
- **å¯æ’æ‹”** - å¯ä»¥éšæ—¶å¼€å¯æˆ–å…³é—­ä»£ç†åŠŸèƒ½
- **èŒè´£åˆ†ç¦»** - ä¸šåŠ¡é€»è¾‘å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»

### 6.2 è£…é¥°å™¨æ¨¡å¼çš„æ·±åº¦åº”ç”¨


**ğŸŒŠ Java IOæµçš„è£…é¥°å™¨è®¾è®¡**ï¼š

Javaçš„IOç³»ç»Ÿå°±æ˜¯è£…é¥°å™¨æ¨¡å¼çš„ç»å…¸åº”ç”¨ï¼Œä½ å¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·ç»„åˆå„ç§æµã€‚

```java
// Java IOè£…é¥°å™¨ç¤ºä¾‹
try {
    // åŸºç¡€æ–‡ä»¶æµ
    FileInputStream fileInput = new FileInputStream("data.txt");
    
    // æ·»åŠ ç¼“å†²åŠŸèƒ½
    BufferedInputStream bufferedInput = new BufferedInputStream(fileInput);
    
    // æ·»åŠ æ•°æ®ç±»å‹è¯»å–åŠŸèƒ½  
    DataInputStream dataInput = new DataInputStream(bufferedInput);
    
    // å±‚å±‚è£…é¥°ï¼ŒåŠŸèƒ½å åŠ 
    int number = dataInput.readInt();
    
} catch (IOException e) {
    e.printStackTrace();
}
```

**ğŸ’¡ è‡ªå®šä¹‰è£…é¥°å™¨åº”ç”¨**ï¼š

```java
// è‡ªå®šä¹‰HTTPè¯·æ±‚è£…é¥°å™¨
interface HttpRequest {
    String send();
}

class BasicHttpRequest implements HttpRequest {
    private String url;
    
    public BasicHttpRequest(String url) {
        this.url = url;
    }
    
    @Override
    public String send() {
        return "GET " + url;
    }
}

// æ·»åŠ è®¤è¯è£…é¥°å™¨
class AuthDecorator implements HttpRequest {
    private HttpRequest request;
    private String token;
    
    public AuthDecorator(HttpRequest request, String token) {
        this.request = request;
        this.token = token;
    }
    
    @Override
    public String send() {
        return request.send() + "\nAuthorization: Bearer " + token;
    }
}

// æ·»åŠ å‹ç¼©è£…é¥°å™¨
class CompressionDecorator implements HttpRequest {
    private HttpRequest request;
    
    public CompressionDecorator(HttpRequest request) {
        this.request = request;
    }
    
    @Override
    public String send() {
        return request.send() + "\nAccept-Encoding: gzip";
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class HttpRequestDemo {
    public static void main(String[] args) {
        HttpRequest request = new BasicHttpRequest("https://api.example.com/users");
        
        // æ·»åŠ è®¤è¯
        request = new AuthDecorator(request, "abc123");
        
        // æ·»åŠ å‹ç¼©
        request = new CompressionDecorator(request);
        
        System.out.println(request.send());
        // è¾“å‡ºå¸¦æœ‰è®¤è¯å’Œå‹ç¼©å¤´çš„å®Œæ•´HTTPè¯·æ±‚
    }
}
```

---

## 7. ğŸ¨ ç»“æ„å‹æ‰©å±•æ·±åº¦åº”ç”¨


### 7.1 ä»£ç†æ¨¡å¼çš„é«˜çº§åº”ç”¨


**ğŸ”® åŠ¨æ€ä»£ç†çš„å¨åŠ›**ï¼š

åŠ¨æ€ä»£ç†è®©ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œä¸éœ€è¦æå‰å†™å¥½ä»£ç†ç±»ã€‚

```java
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

// åŠ¨æ€ä»£ç†å¤„ç†å™¨
class PerformanceProxy implements InvocationHandler {
    private Object target;
    
    public PerformanceProxy(Object target) {
        this.target = target;
    }
    
    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("æ–¹æ³• " + method.getName() + " å¼€å§‹æ‰§è¡Œ");
        long startTime = System.currentTimeMillis();
        
        Object result = method.invoke(target, args);  // è°ƒç”¨çœŸå®æ–¹æ³•
        
        long endTime = System.currentTimeMillis();
        System.out.println("æ–¹æ³• " + method.getName() + " æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: " + (endTime - startTime) + "ms");
        
        return result;
    }
    
    // åˆ›å»ºä»£ç†å¯¹è±¡çš„å·¥å‚æ–¹æ³•
    public static <T> T createProxy(T target, Class<T> interfaceType) {
        return (T) Proxy.newProxyInstance(
            interfaceType.getClassLoader(),
            new Class[]{interfaceType},
            new PerformanceProxy(target)
        );
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class DynamicProxyDemo {
    public static void main(String[] args) {
        UserService realService = new UserServiceImpl();
        
        // åŠ¨æ€åˆ›å»ºä»£ç†
        UserService proxyService = PerformanceProxy.createProxy(realService, UserService.class);
        
        proxyService.saveUser("å¼ ä¸‰");  // è‡ªåŠ¨æ·»åŠ æ€§èƒ½ç›‘æ§
    }
}
```

### 7.2 è£…é¥°å™¨æ¨¡å¼çš„ä¼ä¸šçº§åº”ç”¨


**ğŸ¢ ä¼ä¸šçº§ç¼“å­˜è£…é¥°å™¨**ï¼š

```java
// ä¼ä¸šçº§ç¼“å­˜è£…é¥°å™¨
class CacheDecorator<T> implements UserService {
    private UserService userService;
    private Map<String, Object> cache = new ConcurrentHashMap<>();
    private long cacheTimeout = 5000; // 5ç§’è¶…æ—¶
    
    public CacheDecorator(UserService userService) {
        this.userService = userService;
    }
    
    @Override
    public void saveUser(String username) {
        String cacheKey = "save_" + username;
        
        // æ£€æŸ¥ç¼“å­˜
        CacheItem item = (CacheItem) cache.get(cacheKey);
        if (item != null && !item.isExpired()) {
            System.out.println("ä»ç¼“å­˜è·å–ä¿å­˜ç»“æœ: " + username);
            return;
        }
        
        // æ‰§è¡ŒçœŸå®æ“ä½œ
        userService.saveUser(username);
        
        // ç¼“å­˜ç»“æœ
        cache.put(cacheKey, new CacheItem(System.currentTimeMillis()));
        System.out.println("ç»“æœå·²ç¼“å­˜: " + username);
    }
    
    // ç¼“å­˜é¡¹
    private class CacheItem {
        private long timestamp;
        
        public CacheItem(long timestamp) {
            this.timestamp = timestamp;
        }
        
        public boolean isExpired() {
            return System.currentTimeMillis() - timestamp > cacheTimeout;
        }
    }
}
```

### 7.3 é€‚é…å™¨æ¨¡å¼çš„ç³»ç»Ÿé›†æˆåº”ç”¨


**ğŸ”— å¤šç³»ç»Ÿé›†æˆé€‚é…å™¨**ï¼š

```java
// ç»Ÿä¸€æ¶ˆæ¯æ¥å£
interface MessageSender {
    void sendMessage(String to, String content);
}

// é‚®ä»¶ç³»ç»Ÿé€‚é…å™¨
class EmailAdapter implements MessageSender {
    private EmailService emailService = new EmailService();
    
    @Override
    public void sendMessage(String to, String content) {
        emailService.sendEmail(to, "ç³»ç»Ÿé€šçŸ¥", content);
    }
}

// çŸ­ä¿¡ç³»ç»Ÿé€‚é…å™¨  
class SmsAdapter implements MessageSender {
    private SmsService smsService = new SmsService();
    
    @Override
    public void sendMessage(String to, String content) {
        // çŸ­ä¿¡å†…å®¹éœ€è¦é™åˆ¶é•¿åº¦
        String shortContent = content.length() > 70 ? 
            content.substring(0, 67) + "..." : content;
        smsService.sendSms(to, shortContent);
    }
}

// ç»Ÿä¸€æ¶ˆæ¯å‘é€å™¨
class UnifiedMessageSender {
    private List<MessageSender> senders = new ArrayList<>();
    
    public void addSender(MessageSender sender) {
        senders.add(sender);
    }
    
    public void sendToAll(String to, String content) {
        for (MessageSender sender : senders) {
            try {
                sender.sendMessage(to, content);
            } catch (Exception e) {
                System.err.println("å‘é€å¤±è´¥: " + e.getMessage());
            }
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class IntegrationDemo {
    public static void main(String[] args) {
        UnifiedMessageSender messenger = new UnifiedMessageSender();
        
        // æ·»åŠ å„ç§å‘é€æ–¹å¼
        messenger.addSender(new EmailAdapter());
        messenger.addSender(new SmsAdapter());
        
        // ä¸€æ¬¡è°ƒç”¨ï¼Œå¤šæ¸ é“å‘é€
        messenger.sendToAll("user@example.com", "ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ï¼šä»Šæ™š22:00-02:00è¿›è¡Œç³»ç»Ÿå‡çº§");
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å››å¤§ç»“æ„å‹æ¨¡å¼ç²¾é«“


```
ğŸ”¸ é€‚é…å™¨æ¨¡å¼ï¼šè®©ä¸å…¼å®¹çš„æ¥å£ååŒå·¥ä½œï¼Œè§£å†³"æ¥å£ä¸åŒ¹é…"é—®é¢˜
ğŸ”¸ è£…é¥°å™¨æ¨¡å¼ï¼šåŠ¨æ€æ·»åŠ åŠŸèƒ½è€Œä¸æ”¹å˜ç»“æ„ï¼Œè§£å†³"åŠŸèƒ½æ‰©å±•"é—®é¢˜  
ğŸ”¸ ä»£ç†æ¨¡å¼ï¼šæ§åˆ¶å¯¹è±¡è®¿é—®å¹¶æ·»åŠ é¢å¤–æœåŠ¡ï¼Œè§£å†³"è®¿é—®æ§åˆ¶"é—®é¢˜
ğŸ”¸ ç»„åˆæ¨¡å¼ï¼šç»Ÿä¸€å¤„ç†ä¸ªä½“å’Œé›†åˆå¯¹è±¡ï¼Œè§£å†³"å±‚æ¬¡ç»“æ„"é—®é¢˜
```

### 8.2 æ¨¡å¼é€‰æ‹©æŒ‡å—


**ğŸ¯ ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªæ¨¡å¼**ï¼š

| **åœºæ™¯** | **æ¨èæ¨¡å¼** | **åŸå› ** |
|---------|-------------|---------|
| `æ¥å£ä¸åŒ¹é…` | **é€‚é…å™¨æ¨¡å¼** | `è½¬æ¢æ¥å£ï¼Œè®©ä¸å…¼å®¹å˜å…¼å®¹` |
| `éœ€è¦åŠ¨æ€æ·»åŠ åŠŸèƒ½` | **è£…é¥°å™¨æ¨¡å¼** | `çµæ´»ç»„åˆï¼Œä¸ç ´ååŸç»“æ„` |
| `éœ€è¦æ§åˆ¶è®¿é—®` | **ä»£ç†æ¨¡å¼** | `å¢åŠ è®¿é—®æ§åˆ¶å’Œé¢å¤–æœåŠ¡` |
| `æ ‘å½¢å±‚æ¬¡ç»“æ„` | **ç»„åˆæ¨¡å¼** | `ç»Ÿä¸€å¤„ç†ä¸ªä½“å’Œé›†åˆ` |

### 8.3 å®é™…åº”ç”¨çš„å…³é”®ç†è§£


**ğŸ’¡ æ ¸å¿ƒæ€ç»´è½¬å˜**ï¼š

1. **ä»ç»§æ‰¿åˆ°ç»„åˆ** - ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç±»ç»§æ‰¿
2. **ä»é™æ€åˆ°åŠ¨æ€** - è¿è¡Œæ—¶ç»„è£…åŠŸèƒ½è€Œä¸æ˜¯ç¼–è¯‘æ—¶ç¡®å®š
3. **ä»å•ä¸€åˆ°çµæ´»** - ä¸€ä¸ªæ¥å£å¤šç§å®ç°ï¼Œçµæ´»åˆ‡æ¢
4. **ä»ç´§è€¦åˆåˆ°æ¾è€¦åˆ** - é€šè¿‡ä¸­é—´å±‚é™ä½ä¾èµ–å…³ç³»

**ğŸš€ ä¼ä¸šå¼€å‘ä¸­çš„åº”ç”¨ä»·å€¼**ï¼š

- **ç³»ç»Ÿé›†æˆ** - é€‚é…å™¨è®©ä¸åŒç³»ç»Ÿèƒ½å¤Ÿå¯¹æ¥
- **åŠŸèƒ½æ‰©å±•** - è£…é¥°å™¨è®©åŠŸèƒ½å¯æ’æ‹”å¯ç»„åˆ
- **æ€§èƒ½ä¼˜åŒ–** - ä»£ç†æä¾›ç¼“å­˜ã€æ‡’åŠ è½½ç­‰ä¼˜åŒ–
- **æ¶æ„æ¸…æ™°** - ç»„åˆæ¨¡å¼è®©å¤æ‚å±‚æ¬¡ç»“æ„å˜ç®€å•

**âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹**ï¼š

```
é€‚é…å™¨æ¨¡å¼ï¼š
âœ“ é€‚åˆè§£å†³æ¥å£ä¸åŒ¹é…é—®é¢˜
âœ— ä¸è¦æ»¥ç”¨ï¼Œç®€å•è½¬æ¢ç›´æ¥å†™å·¥å…·ç±»å³å¯

è£…é¥°å™¨æ¨¡å¼ï¼š  
âœ“ é€‚åˆéœ€è¦åŠ¨æ€ç»„åˆåŠŸèƒ½çš„åœºæ™¯
âœ— è£…é¥°å±‚å¤ªå¤šä¼šå¯¼è‡´è°ƒè¯•å›°éš¾

ä»£ç†æ¨¡å¼ï¼š
âœ“ é€‚åˆéœ€è¦æ§åˆ¶è®¿é—®æˆ–æ·»åŠ æ¨ªåˆ‡å…³æ³¨ç‚¹
âœ— æ³¨æ„æ€§èƒ½å¼€é”€ï¼Œä¸è¦ä¸ºäº†ä»£ç†è€Œä»£ç†

ç»„åˆæ¨¡å¼ï¼š
âœ“ é€‚åˆæ ‘å½¢ç»“æ„å’Œé€’å½’æ“ä½œ
âœ— å¦‚æœå±‚æ¬¡ç®€å•ï¼Œç›´æ¥ç”¨é›†åˆå³å¯
```

### 8.4 å­¦ä¹ è¿›é˜¶å»ºè®®


**ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„**ï¼š

1. **æ·±å…¥ç†è§£è®¾è®¡åŸåˆ™** - å•ä¸€èŒè´£ã€å¼€é—­åŸåˆ™ã€ä¾èµ–å€’ç½®
2. **å­¦ä¹ æ¡†æ¶æºç ** - Spring AOPã€Java IOã€é›†åˆæ¡†æ¶  
3. **å®è·µé¡¹ç›®åº”ç”¨** - åœ¨å®é™…é¡¹ç›®ä¸­è¿ç”¨è¿™äº›æ¨¡å¼
4. **æ€§èƒ½æµ‹è¯•** - äº†è§£å„ç§æ¨¡å¼çš„æ€§èƒ½ç‰¹ç‚¹
5. **ç»“åˆå…¶ä»–æ¨¡å¼** - å­¦ä¹ æ¨¡å¼ä¹‹é—´çš„ç»„åˆä½¿ç”¨

**ğŸ¯ å®è·µç»ƒä¹ å»ºè®®**ï¼š

- å°è¯•ç”¨è£…é¥°å™¨æ¨¡å¼æ”¹é€ ä¸€ä¸ªç°æœ‰åŠŸèƒ½
- ç”¨ä»£ç†æ¨¡å¼ä¸ºç°æœ‰æœåŠ¡æ·»åŠ æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§
- ç”¨é€‚é…å™¨æ¨¡å¼é›†æˆä¸€ä¸ªç¬¬ä¸‰æ–¹åº“
- ç”¨ç»„åˆæ¨¡å¼è®¾è®¡ä¸€ä¸ªèœå•æˆ–æƒé™ç³»ç»Ÿ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
é€‚é…è½¬æ¢æ¥å£é€šï¼Œè£…é¥°æ·»å½©ä¸æ”¹å½¢
ä»£ç†æ§åˆ¶è®¿é—®è·¯ï¼Œç»„åˆç»Ÿä¸€ä¸ªä¸ç¾¤
ç»“æ„æ¨¡å¼è§£ç»„è£…ï¼Œçµæ´»å¤ç”¨æ˜¯æ ¸å¿ƒ
```