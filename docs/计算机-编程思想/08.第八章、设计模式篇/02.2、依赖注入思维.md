---
title: 2ã€ä¾èµ–æ³¨å…¥æ€ç»´
---
## ğŸ“š ç›®å½•

1. [ä¾èµ–æ³¨å…¥çš„æœ¬è´¨ç†è§£](#1-ä¾èµ–æ³¨å…¥çš„æœ¬è´¨ç†è§£)
2. [æ§åˆ¶åè½¬å®¹å™¨](#2-æ§åˆ¶åè½¬å®¹å™¨)
3. [ä¾èµ–æ³¨å…¥æ–¹å¼](#3-ä¾èµ–æ³¨å…¥æ–¹å¼)
4. [ç”Ÿå‘½å‘¨æœŸç®¡ç†](#4-ç”Ÿå‘½å‘¨æœŸç®¡ç†)
5. [å¾ªç¯ä¾èµ–å¤„ç†](#5-å¾ªç¯ä¾èµ–å¤„ç†)
6. [IoCå®¹å™¨è®¾è®¡](#6-IoCå®¹å™¨è®¾è®¡)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä¾èµ–æ³¨å…¥çš„æœ¬è´¨ç†è§£


### 1.1 ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥


**ğŸ”¸ ç”¨ç™½è¯è§£é‡Š**ï¼š
- **ä¾èµ–**ï¼šå¯¹è±¡Aéœ€è¦ä½¿ç”¨å¯¹è±¡Bï¼Œæˆ‘ä»¬å°±è¯´Aä¾èµ–B
- **æ³¨å…¥**ï¼šä¸è®©Aè‡ªå·±åˆ›å»ºBï¼Œè€Œæ˜¯ä»å¤–éƒ¨æŠŠBä¼ é€’ç»™A
- **å¥½å¤„**ï¼šAå’ŒBçš„å…³ç³»å˜æ¾æ•£ï¼Œæ›´å®¹æ˜“ç»´æŠ¤å’Œæµ‹è¯•

**ä¼ ç»Ÿæ–¹å¼ï¼ˆç¡¬ç¼–ç ä¾èµ–ï¼‰**ï¼š
```java
// æ±½è½¦ç±»ç›´æ¥åˆ›å»ºå¼•æ“ - ç´§è€¦åˆ
class Car {
    private Engine engine;
    
    public Car() {
        this.engine = new V8Engine(); // å†™æ­»äº†å¼•æ“ç±»å‹
    }
}
```

**ä¾èµ–æ³¨å…¥æ–¹å¼ï¼ˆæ¾è€¦åˆï¼‰**ï¼š
```java
// æ±½è½¦æ¥å—å¤–éƒ¨ä¼ å…¥çš„å¼•æ“ - æ¾è€¦åˆ
class Car {
    private Engine engine;
    
    public Car(Engine engine) {
        this.engine = engine; // å¼•æ“ç”±å¤–éƒ¨ä¼ å…¥
    }
}
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š

```
ä¼ ç»Ÿç¼–ç¨‹çš„ç—›ç‚¹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ±½è½¦å·¥å‚     â”‚ â†’ åªèƒ½ç”Ÿäº§å›ºå®šå¼•æ“çš„æ±½è½¦
â”‚ new Car()   â”‚ â†’ æµ‹è¯•å›°éš¾ï¼ˆæ— æ³•æ›¿æ¢å¼•æ“ï¼‰
â”‚             â”‚ â†’ ä»£ç åƒµç¡¬ï¼ˆä¿®æ”¹å¼•æ“è¦æ”¹ä»£ç ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¾èµ–æ³¨å…¥çš„ä¼˜åŠ¿ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼•æ“å·¥å‚     â”‚â”€â”€â”€â”€â†’â”‚ æ±½è½¦å·¥å‚     â”‚
â”‚ ç”Ÿäº§å¼•æ“     â”‚     â”‚ ç»„è£…æ±½è½¦     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                   â†“
   çµæ´»æ›¿æ¢å¼•æ“        å®¹æ˜“æµ‹è¯•å’Œç»´æŠ¤
```

**å®é™…å¥½å¤„**ï¼š
- âœ… **æµ‹è¯•æ›´å®¹æ˜“**ï¼šå¯ä»¥æ³¨å…¥æ¨¡æ‹Ÿå¯¹è±¡
- âœ… **ç»´æŠ¤æ›´æ–¹ä¾¿**ï¼šä¿®æ”¹ä¾èµ–ä¸å½±å“ä¸»ç±»
- âœ… **æ‰©å±•æ›´çµæ´»**ï¼šå¯ä»¥éšæ—¶æ›¿æ¢ä¸åŒå®ç°
- âœ… **å¤ç”¨æ€§æ›´å¼º**ï¼šåŒä¸€ä¸ªç±»å¯ä»¥é…ç½®ä¸åŒä¾èµ–

### 1.3 æ§åˆ¶åè½¬çš„å«ä¹‰


**ğŸ”„ ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼ˆIoCï¼‰**ï¼š

```
ä¼ ç»Ÿæ§åˆ¶æµï¼š
æˆ‘ï¼ˆå¯¹è±¡ï¼‰éœ€è¦ä»€ä¹ˆ â†’ æˆ‘è‡ªå·±å»åˆ›å»º

æ§åˆ¶åè½¬åï¼š
æˆ‘ï¼ˆå¯¹è±¡ï¼‰éœ€è¦ä»€ä¹ˆ â†’ å®¹å™¨å¸®æˆ‘å‡†å¤‡å¥½ â†’ ç›´æ¥ç»™æˆ‘

ä¸¾ä¾‹è¯´æ˜ï¼š
ä¼ ç»Ÿæ–¹å¼ï¼šé¥¿äº†è‡ªå·±ä¸‹å¨åšé¥­
æ§åˆ¶åè½¬ï¼šé¥¿äº†å»é¤å…ï¼ŒæœåŠ¡å‘˜ç«¯èœä¸Šæ¥
```

**å…³é”®ç†è§£**ï¼š
- **æ§åˆ¶æƒè½¬ç§»**ï¼šå¯¹è±¡åˆ›å»ºçš„æ§åˆ¶æƒä»ä½¿ç”¨è€…è½¬ç§»åˆ°å®¹å™¨
- **ä¾èµ–å…³ç³»åè½¬**ï¼šä¸æ˜¯Aä¾èµ–Bï¼Œè€Œæ˜¯Aå’ŒBéƒ½ä¾èµ–æŠ½è±¡æ¥å£
- **HollywoodåŸåˆ™**ï¼š"Don't call us, we'll call you"ï¼ˆåˆ«æ‰¾æˆ‘ï¼Œæˆ‘ä¼šæ‰¾ä½ ï¼‰

---

## 2. ğŸ—ï¸ æ§åˆ¶åè½¬å®¹å™¨


### 2.1 IoCå®¹å™¨æ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—ç†è§£**ï¼š
IoCå®¹å™¨å°±åƒä¸€ä¸ª**ä¸‡èƒ½ç®¡å®¶**ï¼Œå®ƒçŸ¥é“ï¼š
- ç³»ç»Ÿé‡Œæœ‰å“ªäº›å¯¹è±¡éœ€è¦åˆ›å»º
- æ¯ä¸ªå¯¹è±¡éœ€è¦å“ªäº›ä¾èµ–
- ä»€ä¹ˆæ—¶å€™åˆ›å»ºï¼Œä»€ä¹ˆæ—¶å€™é”€æ¯
- å¦‚ä½•æŠŠå¯¹è±¡ç»„è£…èµ·æ¥

```
ä¼ ç»Ÿæ–¹å¼ï¼š
ç¨‹åºå‘˜ â†’ æ‰‹åŠ¨newå„ç§å¯¹è±¡ â†’ æ‰‹åŠ¨ä¼ é€’ä¾èµ–

IoCå®¹å™¨æ–¹å¼ï¼š
ç¨‹åºå‘˜ â†’ å‘Šè¯‰å®¹å™¨é…ç½® â†’ å®¹å™¨è‡ªåŠ¨åˆ›å»ºå’Œæ³¨å…¥
```

### 2.2 IoCå®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½


**ğŸ“‹ å®¹å™¨çš„ä¸»è¦èŒè´£**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            IoC å®¹å™¨                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. å¯¹è±¡å·¥å‚ï¼šåˆ›å»ºå„ç§å¯¹è±¡             â”‚
â”‚ 2. ä¾èµ–åˆ†æï¼šåˆ†æå¯¹è±¡é—´çš„ä¾èµ–å…³ç³»      â”‚
â”‚ 3. è‡ªåŠ¨æ³¨å…¥ï¼šæŠŠä¾èµ–å¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡å¯¹è±¡  â”‚
â”‚ 4. ç”Ÿå‘½å‘¨æœŸï¼šç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯      â”‚
â”‚ 5. ä½œç”¨åŸŸæ§åˆ¶ï¼šå•ä¾‹ã€åŸå‹ç­‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ç®€å•IoCå®¹å™¨å®ç°


**ğŸ’¡ åŸºç¡€ç‰ˆæœ¬ç†è§£**ï¼š
```java
// ç®€åŒ–çš„IoCå®¹å™¨ï¼Œå¸®åŠ©ç†è§£åŸç†
class SimpleContainer {
    private Map<String, Object> instances = new HashMap<>();
    private Map<String, Class<?>> types = new HashMap<>();
    
    // æ³¨å†Œç±»å‹
    public void register(String name, Class<?> type) {
        types.put(name, type);
    }
    
    // è·å–å®ä¾‹ï¼ˆè‡ªåŠ¨åˆ›å»ºå’Œæ³¨å…¥ï¼‰
    public Object getInstance(String name) {
        if (instances.containsKey(name)) {
            return instances.get(name); // å•ä¾‹æ¨¡å¼
        }
        
        Class<?> type = types.get(name);
        Object instance = createInstance(type);
        instances.put(name, instance);
        return instance;
    }
    
    private Object createInstance(Class<?> type) {
        // ç®€åŒ–ç‰ˆï¼šå‡è®¾åªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°
        Constructor<?> constructor = type.getConstructors()[0];
        Class<?>[] paramTypes = constructor.getParameterTypes();
        Object[] params = new Object[paramTypes.length];
        
        // é€’å½’åˆ›å»ºä¾èµ–å¯¹è±¡
        for (int i = 0; i < paramTypes.length; i++) {
            params[i] = getInstance(paramTypes[i].getSimpleName());
        }
        
        return constructor.newInstance(params);
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
// ä½¿ç”¨ç®€å•å®¹å™¨
SimpleContainer container = new SimpleContainer();
container.register("Engine", V8Engine.class);
container.register("Car", Car.class);

Car car = (Car) container.getInstance("Car"); // è‡ªåŠ¨æ³¨å…¥å¼•æ“
```

---

## 3. ğŸ”§ ä¾èµ–æ³¨å…¥æ–¹å¼


### 3.1 æ„é€ å‡½æ•°æ³¨å…¥


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°æ³¨å…¥**ï¼š
é€šè¿‡æ„é€ å‡½æ•°çš„å‚æ•°æ¥ä¼ é€’ä¾èµ–å¯¹è±¡

```java
class Car {
    private final Engine engine;    // ä¾èµ–å¯¹è±¡
    private final Transmission transmission;
    
    // é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public Car(Engine engine, Transmission transmission) {
        this.engine = engine;
        this.transmission = transmission;
    }
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… **å¼ºåˆ¶ä¾èµ–**ï¼šå¯¹è±¡åˆ›å»ºæ—¶å¿…é¡»æä¾›æ‰€æœ‰ä¾èµ–
- âœ… **ä¸å¯å˜æ€§**ï¼šä¾èµ–æ³¨å…¥åä¸èƒ½ä¿®æ”¹ï¼Œæ›´å®‰å…¨
- âœ… **æ¸…æ™°æ˜ç¡®**ï¼šä¸€çœ¼å°±èƒ½çœ‹å‡ºå¯¹è±¡éœ€è¦å“ªäº›ä¾èµ–
- âœ… **æµ‹è¯•å‹å¥½**ï¼šæµ‹è¯•æ—¶å®¹æ˜“æä¾›æ¨¡æ‹Ÿå¯¹è±¡

**ç¼ºç‚¹**ï¼š
- âŒ **å‚æ•°è¿‡å¤š**ï¼šä¾èµ–å¤šæ—¶æ„é€ å‡½æ•°å‚æ•°å¾ˆé•¿
- âŒ **å¾ªç¯ä¾èµ–**ï¼šä¸¤ä¸ªå¯¹è±¡ç›¸äº’ä¾èµ–æ—¶éš¾ä»¥å¤„ç†

### 3.2 å±æ€§æ³¨å…¥ï¼ˆSetteræ³¨å…¥ï¼‰


**ğŸ”¸ ä»€ä¹ˆæ˜¯å±æ€§æ³¨å…¥**ï¼š
é€šè¿‡setteræ–¹æ³•æ¥è®¾ç½®ä¾èµ–å¯¹è±¡

```java
class Car {
    private Engine engine;
    private Transmission transmission;
    
    // é€šè¿‡setteræ–¹æ³•æ³¨å…¥ä¾èµ–
    public void setEngine(Engine engine) {
        this.engine = engine;
    }
    
    public void setTransmission(Transmission transmission) {
        this.transmission = transmission;
    }
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… **å¯é€‰ä¾èµ–**ï¼šå¯ä»¥åªè®¾ç½®éƒ¨åˆ†ä¾èµ–
- âœ… **å¾ªç¯ä¾èµ–**ï¼šæ›´å®¹æ˜“å¤„ç†ç›¸äº’ä¾èµ–çš„æƒ…å†µ
- âœ… **é‡æ–°é…ç½®**ï¼šè¿è¡Œæ—¶å¯ä»¥é‡æ–°è®¾ç½®ä¾èµ–
- âœ… **å‚æ•°åˆ†æ•£**ï¼šä¸ä¼šæœ‰å¾ˆé•¿çš„æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨

**ç¼ºç‚¹**ï¼š
- âŒ **å¯èƒ½é—æ¼**ï¼šå®¹æ˜“å¿˜è®°è®¾ç½®æŸäº›å¿…éœ€çš„ä¾èµ–
- âŒ **çŠ¶æ€ä¸ç¡®å®š**ï¼šå¯¹è±¡åˆ›å»ºåçŠ¶æ€å¯èƒ½ä¸å®Œæ•´
- âŒ **æµ‹è¯•å¤æ‚**ï¼šéœ€è¦è®°ä½è°ƒç”¨æ‰€æœ‰å¿…éœ€çš„setter

### 3.3 æ–¹æ³•æ³¨å…¥


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ–¹æ³•æ³¨å…¥**ï¼š
é€šè¿‡æ™®é€šæ–¹æ³•æ¥ä¼ é€’ä¾èµ–ï¼Œé€šå¸¸ç”¨äºç‰¹æ®Šåœºæ™¯

```java
class Car {
    private Engine engine;
    
    // é€šè¿‡æ–¹æ³•æ³¨å…¥ä¾èµ–
    public void injectEngine(Engine engine) {
        this.engine = engine;
        // å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›åˆå§‹åŒ–å·¥ä½œ
        this.engine.warmUp();
    }
    
    // æˆ–è€…åœ¨éœ€è¦æ—¶ä¸´æ—¶æ³¨å…¥
    public void performMaintenance(MaintenanceService service) {
        service.checkEngine(this.engine);
    }
}
```

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ¯ **ä¸´æ—¶ä¾èµ–**ï¼šåªåœ¨ç‰¹å®šæ“ä½œæ—¶éœ€è¦çš„ä¾èµ–
- ğŸ¯ **å¯é€‰æœåŠ¡**ï¼šä¸æ˜¯æ ¸å¿ƒåŠŸèƒ½çš„é™„åŠ æœåŠ¡
- ğŸ¯ **ç­–ç•¥æ¨¡å¼**ï¼šè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ä¸åŒçš„å®ç°

### 3.4 æ³¨å…¥æ–¹å¼é€‰æ‹©æŒ‡å—


**ğŸ¯ å¦‚ä½•é€‰æ‹©æ³¨å…¥æ–¹å¼**ï¼š

| åœºæ™¯ | **æ¨èæ–¹å¼** | **ç†ç”±** |
|------|------------|---------|
| **å¿…éœ€ä¾èµ–** | `æ„é€ å‡½æ•°æ³¨å…¥` | `ç¡®ä¿å¯¹è±¡å®Œæ•´æ€§` |
| **å¯é€‰ä¾èµ–** | `å±æ€§æ³¨å…¥` | `çµæ´»æ€§æ›´å¥½` |
| **å¾ªç¯ä¾èµ–** | `å±æ€§æ³¨å…¥` | `é¿å…æ„é€ æ­»é”` |
| **ä¸´æ—¶ä¾èµ–** | `æ–¹æ³•æ³¨å…¥` | `æŒ‰éœ€æä¾›` |
| **ä¸å¯å˜å¯¹è±¡** | `æ„é€ å‡½æ•°æ³¨å…¥` | `ä¿è¯çº¿ç¨‹å®‰å…¨` |

**ğŸ”¸ ç»„åˆä½¿ç”¨ç­–ç•¥**ï¼š
```java
class Car {
    // æ ¸å¿ƒä¾èµ–ç”¨æ„é€ å‡½æ•°æ³¨å…¥
    private final Engine engine;
    
    // å¯é€‰ä¾èµ–ç”¨å±æ€§æ³¨å…¥
    private AirConditioner airConditioner;
    
    public Car(Engine engine) {
        this.engine = engine; // å¿…éœ€ä¾èµ–
    }
    
    public void setAirConditioner(AirConditioner ac) {
        this.airConditioner = ac; // å¯é€‰ä¾èµ–
    }
    
    // ä¸´æ—¶ä¾èµ–ç”¨æ–¹æ³•æ³¨å…¥
    public void performMaintenance(MaintenanceService service) {
        service.check(this);
    }
}
```

---

## 4. â° ç”Ÿå‘½å‘¨æœŸç®¡ç†


### 4.1 ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸç®¡ç†


**ğŸ”¸ é€šä¿—ç†è§£**ï¼š
ç”Ÿå‘½å‘¨æœŸç®¡ç†å°±æ˜¯å†³å®šï¼š
- **ä»€ä¹ˆæ—¶å€™**åˆ›å»ºå¯¹è±¡
- **åˆ›å»ºå‡ ä¸ª**å®ä¾‹
- **ä»€ä¹ˆæ—¶å€™**é”€æ¯å¯¹è±¡
- **å¦‚ä½•å¤„ç†**å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†

```
å¯¹è±¡ç”Ÿå‘½å‘¨æœŸï¼š
å‡ºç”Ÿï¼ˆåˆ›å»ºï¼‰ â†’ å·¥ä½œï¼ˆä½¿ç”¨ï¼‰ â†’ æ­»äº¡ï¼ˆé”€æ¯ï¼‰
     â†“              â†“              â†“
   new()        æ­£å¸¸ä½¿ç”¨        dispose()
```

### 4.2 å¸¸è§çš„ä½œç”¨åŸŸç±»å‹


**ğŸ“‹ ä¸»è¦ä½œç”¨åŸŸæ¨¡å¼**ï¼š

**ğŸ”¸ å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰**ï¼š
```java
// æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹
@Singleton
class DatabaseConnection {
    private static DatabaseConnection instance;
    
    // å®¹å™¨ä¿è¯åªåˆ›å»ºä¸€æ¬¡
    public static DatabaseConnection getInstance() {
        if (instance == null) {
            instance = new DatabaseConnection();
        }
        return instance;
    }
}
```

**ğŸ”¸ åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰**ï¼š
```java
// æ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºæ–°å®ä¾‹
@Prototype
class ShoppingCart {
    private List<Item> items = new ArrayList<>();
    
    // æ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„è´­ç‰©è½¦
    public void addItem(Item item) {
        items.add(item);
    }
}
```

**ğŸ”¸ è¯·æ±‚ä½œç”¨åŸŸï¼ˆRequest Scopeï¼‰**ï¼š
```java
// æ¯ä¸ªHTTPè¯·æ±‚ä¸€ä¸ªå®ä¾‹
@RequestScope
class UserContext {
    private String userId;
    private String sessionId;
    
    // åœ¨æ•´ä¸ªè¯·æ±‚å¤„ç†æœŸé—´ä¿æŒåŒä¸€ä¸ªå®ä¾‹
}
```

### 4.3 ç”Ÿå‘½å‘¨æœŸå›è°ƒ


**ğŸ”¸ åˆå§‹åŒ–å’Œé”€æ¯å›è°ƒ**ï¼š
```java
class DatabaseService {
    private Connection connection;
    
    // å¯¹è±¡åˆ›å»ºåçš„åˆå§‹åŒ–
    @PostConstruct
    public void initialize() {
        this.connection = DriverManager.getConnection(url);
        System.out.println("æ•°æ®åº“è¿æ¥å·²å»ºç«‹");
    }
    
    // å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†
    @PreDestroy
    public void cleanup() {
        if (connection != null) {
            connection.close();
            System.out.println("æ•°æ®åº“è¿æ¥å·²å…³é—­");
        }
    }
}
```

### 4.4 ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„å®ç°


**ğŸ’¡ ç®€å•çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨**ï¼š
```java
class LifecycleManager {
    private Map<Object, String> objectScopes = new HashMap<>();
    private Set<Object> singletons = new HashSet<>();
    
    public Object createInstance(Class<?> type, String scope) {
        switch (scope) {
            case "singleton":
                return getSingleton(type);
            case "prototype":
                return createNew(type);
            default:
                throw new IllegalArgumentException("æœªçŸ¥ä½œç”¨åŸŸ: " + scope);
        }
    }
    
    private Object getSingleton(Class<?> type) {
        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨å•ä¾‹
        return singletons.stream()
            .filter(obj -> obj.getClass() == type)
            .findFirst()
            .orElseGet(() -> {
                Object instance = createNew(type);
                singletons.add(instance);
                return instance;
            });
    }
    
    private Object createNew(Class<?> type) {
        Object instance = type.newInstance();
        callInitMethod(instance); // è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•
        return instance;
    }
}
```

---

## 5. ğŸ”„ å¾ªç¯ä¾èµ–å¤„ç†


### 5.1 ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–


**ğŸ”¸ é€šä¿—ç†è§£**ï¼š
å¾ªç¯ä¾èµ–å°±åƒä¸¤ä¸ªäººäº’ç›¸ç­‰å¯¹æ–¹å…ˆå¼€é—¨ï¼š
- Aéœ€è¦Bæ‰èƒ½å·¥ä½œ
- Béœ€è¦Aæ‰èƒ½å·¥ä½œ
- ç»“æœè°éƒ½åˆ›å»ºä¸äº†

```
ç»å…¸å¾ªç¯ä¾èµ–ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœåŠ¡A   â”‚ â”€â”€â”€â”€â†’â”‚ æœåŠ¡B   â”‚
â”‚ éœ€è¦B   â”‚      â”‚ éœ€è¦A   â”‚
â”‚         â”‚â†â”€â”€â”€â”€ â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®é™…ä¾‹å­ï¼š
ç”¨æˆ·æœåŠ¡ â†â†’ è®¢å•æœåŠ¡
ç”¨æˆ·æœåŠ¡éœ€è¦æŸ¥è¯¢ç”¨æˆ·çš„è®¢å•
è®¢å•æœåŠ¡éœ€è¦æŸ¥è¯¢è®¢å•çš„ç”¨æˆ·ä¿¡æ¯
```

### 5.2 å¾ªç¯ä¾èµ–çš„ç±»å‹


**ğŸ“‹ å¸¸è§å¾ªç¯ä¾èµ–åœºæ™¯**ï¼š

**ğŸ”¸ æ„é€ å‡½æ•°å¾ªç¯ä¾èµ–**ï¼š
```java
// è¿™ç§æƒ…å†µæ— æ³•è§£å†³ï¼
class UserService {
    public UserService(OrderService orderService) {
        // åˆ›å»ºUserServiceéœ€è¦OrderService
    }
}

class OrderService {
    public OrderService(UserService userService) {
        // åˆ›å»ºOrderServiceéœ€è¦UserService
        // æ­»é”ï¼è°éƒ½åˆ›å»ºä¸äº†
    }
}
```

**ğŸ”¸ å±æ€§å¾ªç¯ä¾èµ–**ï¼š
```java
// è¿™ç§å¯ä»¥è§£å†³
class UserService {
    private OrderService orderService;
    
    public void setOrderService(OrderService orderService) {
        this.orderService = orderService;
    }
}

class OrderService {
    private UserService userService;
    
    public void setUserService(UserService userService) {
        this.userService = userService;
    }
}
```

### 5.3 å¾ªç¯ä¾èµ–çš„è§£å†³æ–¹æ¡ˆ


**ğŸ”§ æ–¹æ¡ˆä¸€ï¼šä¸‰çº§ç¼“å­˜ï¼ˆæå‰æš´éœ²ï¼‰**

```java
class CircularDependencyResolver {
    // ä¸€çº§ç¼“å­˜ï¼šå®Œæˆå“å¯¹è±¡
    private Map<String, Object> singletonObjects = new HashMap<>();
    
    // äºŒçº§ç¼“å­˜ï¼šåŠæˆå“å¯¹è±¡
    private Map<String, Object> earlySingletonObjects = new HashMap<>();
    
    // ä¸‰çº§ç¼“å­˜ï¼šå¯¹è±¡å·¥å‚
    private Map<String, ObjectFactory> singletonFactories = new HashMap<>();
    
    public Object getBean(String name) {
        // å…ˆä»ä¸€çº§ç¼“å­˜æ‰¾å®Œæˆå“
        Object singleton = singletonObjects.get(name);
        if (singleton != null) {
            return singleton;
        }
        
        // å†ä»äºŒçº§ç¼“å­˜æ‰¾åŠæˆå“
        singleton = earlySingletonObjects.get(name);
        if (singleton != null) {
            return singleton;
        }
        
        // æœ€åä»ä¸‰çº§ç¼“å­˜æ‰¾å·¥å‚
        ObjectFactory factory = singletonFactories.get(name);
        if (factory != null) {
            singleton = factory.getObject();
            earlySingletonObjects.put(name, singleton);
            singletonFactories.remove(name);
            return singleton;
        }
        
        // éƒ½æ²¡æœ‰ï¼Œå¼€å§‹åˆ›å»º
        return createBean(name);
    }
    
    private Object createBean(String name) {
        // 1. åˆ›å»ºå®ä¾‹ï¼ˆä½†è¿˜æ²¡æ³¨å…¥ä¾èµ–ï¼‰
        Object instance = instantiate(name);
        
        // 2. æå‰æš´éœ²åˆ°ä¸‰çº§ç¼“å­˜
        singletonFactories.put(name, () -> instance);
        
        // 3. æ³¨å…¥ä¾èµ–ï¼ˆè¿™æ—¶å¯èƒ½ä¼šé€’å½’è°ƒç”¨getBeanï¼‰
        populateBean(instance);
        
        // 4. åˆå§‹åŒ–å®Œæˆï¼Œæ”¾å…¥ä¸€çº§ç¼“å­˜
        singletonObjects.put(name, instance);
        earlySingletonObjects.remove(name);
        singletonFactories.remove(name);
        
        return instance;
    }
}
```

**ğŸ”§ æ–¹æ¡ˆäºŒï¼šå»¶è¿Ÿæ³¨å…¥**

```java
// ä½¿ç”¨ä»£ç†å»¶è¿ŸçœŸæ­£çš„ä¾èµ–æ³¨å…¥
class LazyDependencyResolver {
    
    class UserService {
        private Lazy<OrderService> orderService;
        
        public UserService(Lazy<OrderService> orderService) {
            this.orderService = orderService; // å…ˆä¸çœŸæ­£åˆ›å»º
        }
        
        public void doSomething() {
            // çœŸæ­£ä½¿ç”¨æ—¶æ‰åˆ›å»º
            orderService.get().processOrder();
        }
    }
    
    // å»¶è¿ŸåŠ è½½åŒ…è£…å™¨
    class Lazy<T> {
        private Supplier<T> supplier;
        private T value;
        
        public Lazy(Supplier<T> supplier) {
            this.supplier = supplier;
        }
        
        public T get() {
            if (value == null) {
                value = supplier.get();
            }
            return value;
        }
    }
}
```

### 5.4 é¿å…å¾ªç¯ä¾èµ–çš„è®¾è®¡åŸåˆ™


**ğŸ¯ è®¾è®¡æŒ‡å¯¼åŸåˆ™**ï¼š

```
1. åˆ†å±‚è®¾è®¡ï¼š
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   æ§åˆ¶å±‚     â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚   æœåŠ¡å±‚     â”‚  â† å•å‘ä¾èµ–ï¼Œé¿å…ç›¸äº’ä¾èµ–
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚   æ•°æ®å±‚     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. æ¥å£éš”ç¦»ï¼š
   UserService â†’ IOrderQueryï¼ˆæŸ¥è¯¢æ¥å£ï¼‰
   OrderService â†’ IUserQueryï¼ˆæŸ¥è¯¢æ¥å£ï¼‰
   é¿å…ç›´æ¥ç›¸äº’ä¾èµ–

3. äº‹ä»¶é©±åŠ¨ï¼š
   UserService â†’ å‘å¸ƒç”¨æˆ·äº‹ä»¶
   OrderService â†’ ç›‘å¬ç”¨æˆ·äº‹ä»¶
   é€šè¿‡äº‹ä»¶è§£è€¦
```

**ğŸ”¸ é‡æ„å»ºè®®**ï¼š
```java
// ä¸å¥½çš„è®¾è®¡ï¼šç›´æ¥ç›¸äº’ä¾èµ–
class UserService {
    private OrderService orderService;
}

// å¥½çš„è®¾è®¡ï¼šé€šè¿‡æ¥å£å’Œäº‹ä»¶è§£è€¦
class UserService {
    private IOrderQuery orderQuery;  // åªä¾èµ–æŸ¥è¯¢æ¥å£
    private EventPublisher eventPublisher;
    
    public void createUser(User user) {
        // ä¿å­˜ç”¨æˆ·
        userRepository.save(user);
        // å‘å¸ƒäº‹ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨è®¢å•æœåŠ¡
        eventPublisher.publish(new UserCreatedEvent(user));
    }
}
```

---

## 6. ğŸ›ï¸ IoCå®¹å™¨è®¾è®¡


### 6.1 å®¹å™¨æ¶æ„è®¾è®¡


**ğŸ”¸ IoCå®¹å™¨çš„æ•´ä½“æ¶æ„**ï¼š

```
                    IoCå®¹å™¨æ¶æ„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åº”ç”¨æ¥å£å±‚                      â”‚
â”‚  getBean() | register() | configure()          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  æ ¸å¿ƒç®¡ç†å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Beanå·¥å‚    â”‚ â”‚ ä¾èµ–è§£æå™¨  â”‚ â”‚ ç”Ÿå‘½å‘¨æœŸ  â”‚ â”‚
â”‚  â”‚ åˆ›å»ºå¯¹è±¡    â”‚ â”‚ åˆ†æä¾èµ–    â”‚ â”‚ ç®¡ç†å™¨    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  é…ç½®è§£æå±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ XMLè§£æå™¨   â”‚ â”‚ æ³¨è§£æ‰«æå™¨  â”‚ â”‚ é…ç½®éªŒè¯  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  å­˜å‚¨ç¼“å­˜å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Beanå®šä¹‰åº“  â”‚ â”‚ å®ä¾‹ç¼“å­˜    â”‚ â”‚ ä¾èµ–å…³ç³»  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ ¸å¿ƒç»„ä»¶è®¾è®¡


**ğŸ”§ Beanå®šä¹‰ï¼ˆBeanDefinitionï¼‰**ï¼š
```java
// æè¿°å¦‚ä½•åˆ›å»ºä¸€ä¸ªBeançš„å…ƒæ•°æ®
class BeanDefinition {
    private String beanName;           // Beanåç§°
    private Class<?> beanClass;        // Beanç±»å‹
    private String scope;              // ä½œç”¨åŸŸ
    private List<String> dependencies; // ä¾èµ–åˆ—è¡¨
    private String initMethod;         // åˆå§‹åŒ–æ–¹æ³•
    private String destroyMethod;      // é”€æ¯æ–¹æ³•
    private boolean lazyInit;          // æ˜¯å¦æ‡’åŠ è½½
    
    // getter/setter æ–¹æ³•...
}
```

**ğŸ”§ Beanå·¥å‚ï¼ˆBeanFactoryï¼‰**ï¼š
```java
// è´Ÿè´£åˆ›å»ºå’Œç®¡ç†Beanå®ä¾‹
interface BeanFactory {
    Object getBean(String name);
    <T> T getBean(String name, Class<T> type);
    boolean containsBean(String name);
    void registerBeanDefinition(String name, BeanDefinition definition);
}

class DefaultBeanFactory implements BeanFactory {
    private Map<String, BeanDefinition> beanDefinitions = new HashMap<>();
    private Map<String, Object> singletonCache = new HashMap<>();
    
    @Override
    public Object getBean(String name) {
        // 1. æ£€æŸ¥ç¼“å­˜
        if (singletonCache.containsKey(name)) {
            return singletonCache.get(name);
        }
        
        // 2. è·å–Beanå®šä¹‰
        BeanDefinition definition = beanDefinitions.get(name);
        if (definition == null) {
            throw new NoSuchBeanException("æ‰¾ä¸åˆ°Bean: " + name);
        }
        
        // 3. åˆ›å»ºå®ä¾‹
        Object instance = createBean(definition);
        
        // 4. ç¼“å­˜å•ä¾‹
        if ("singleton".equals(definition.getScope())) {
            singletonCache.put(name, instance);
        }
        
        return instance;
    }
}
```

### 6.3 ä¾èµ–è§£æå™¨è®¾è®¡


**ğŸ”§ ä¾èµ–åˆ†æå’Œæ³¨å…¥**ï¼š
```java
class DependencyResolver {
    private BeanFactory beanFactory;
    
    // è§£æå¹¶æ³¨å…¥ä¾èµ–
    public void injectDependencies(Object instance, BeanDefinition definition) {
        Class<?> clazz = instance.getClass();
        
        // 1. å¤„ç†å­—æ®µæ³¨å…¥
        for (Field field : clazz.getDeclaredFields()) {
            if (field.isAnnotationPresent(Inject.class)) {
                injectField(instance, field);
            }
        }
        
        // 2. å¤„ç†æ–¹æ³•æ³¨å…¥
        for (Method method : clazz.getDeclaredMethods()) {
            if (method.isAnnotationPresent(Inject.class)) {
                injectMethod(instance, method);
            }
        }
    }
    
    private void injectField(Object instance, Field field) {
        try {
            field.setAccessible(true);
            String beanName = getBeanName(field);
            Object dependency = beanFactory.getBean(beanName);
            field.set(instance, dependency);
        } catch (Exception e) {
            throw new DependencyInjectionException("å­—æ®µæ³¨å…¥å¤±è´¥: " + field.getName(), e);
        }
    }
    
    private String getBeanName(Field field) {
        // æ ¹æ®ç±»å‹æˆ–æ³¨è§£ç¡®å®šBeanåç§°
        Inject inject = field.getAnnotation(Inject.class);
        if (!inject.value().isEmpty()) {
            return inject.value();
        }
        return field.getType().getSimpleName().toLowerCase();
    }
}
```

### 6.4 å®¹å™¨å¯åŠ¨æµç¨‹


**ğŸš€ å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹**ï¼š

```
å®¹å™¨å¯åŠ¨æµç¨‹ï¼š
1. è¯»å–é…ç½® â†’ 2. è§£æBeanå®šä¹‰ â†’ 3. éªŒè¯ä¾èµ– â†’ 4. åˆ›å»ºå®ä¾‹ â†’ 5. æ³¨å…¥ä¾èµ–

è¯¦ç»†æ­¥éª¤ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. é…ç½®è¯»å–   â”‚ â† æ‰«ææ³¨è§£ã€è¯»å–XMLã€åŠ è½½é…ç½®ç±»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Beanæ³¨å†Œ   â”‚ â† è§£æBeanå®šä¹‰ï¼Œæ³¨å†Œåˆ°å®¹å™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. ä¾èµ–åˆ†æ   â”‚ â† åˆ†æBeané—´çš„ä¾èµ–å…³ç³»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. å¾ªç¯æ£€æµ‹   â”‚ â† æ£€æµ‹å¹¶å¤„ç†å¾ªç¯ä¾èµ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. å®ä¾‹åˆ›å»º   â”‚ â† æŒ‰ä¾èµ–é¡ºåºåˆ›å»ºBeanå®ä¾‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. ä¾èµ–æ³¨å…¥   â”‚ â† æ³¨å…¥æ‰€æœ‰ä¾èµ–å¯¹è±¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 7. åˆå§‹åŒ–     â”‚ â† è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 8. å®¹å™¨å°±ç»ª   â”‚ â† å¯¹å¤–æä¾›æœåŠ¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ å¯åŠ¨å™¨å®ç°**ï¼š
```java
class ApplicationContext {
    private BeanFactory beanFactory;
    private DependencyResolver dependencyResolver;
    private LifecycleManager lifecycleManager;
    
    public void start() {
        try {
            // 1. æ‰«æå’Œæ³¨å†ŒBeanå®šä¹‰
            scanAndRegisterBeans();
            
            // 2. éªŒè¯é…ç½®
            validateConfiguration();
            
            // 3. é¢„å®ä¾‹åŒ–å•ä¾‹Bean
            preInstantiateSingletons();
            
            System.out.println("IoCå®¹å™¨å¯åŠ¨å®Œæˆ");
        } catch (Exception e) {
            System.err.println("å®¹å™¨å¯åŠ¨å¤±è´¥: " + e.getMessage());
            throw new ContainerStartupException(e);
        }
    }
    
    private void scanAndRegisterBeans() {
        // æ‰«æ@Componentæ³¨è§£çš„ç±»
        for (Class<?> clazz : scanComponents()) {
            String beanName = getBeanName(clazz);
            BeanDefinition definition = createBeanDefinition(clazz);
            beanFactory.registerBeanDefinition(beanName, definition);
        }
    }
    
    private void preInstantiateSingletons() {
        // æå‰åˆ›å»ºæ‰€æœ‰å•ä¾‹Bean
        for (String beanName : beanFactory.getBeanNames()) {
            BeanDefinition definition = beanFactory.getBeanDefinition(beanName);
            if ("singleton".equals(definition.getScope()) && !definition.isLazyInit()) {
                beanFactory.getBean(beanName);
            }
        }
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ä¾èµ–æ³¨å…¥æœ¬è´¨ï¼šä»å¤–éƒ¨ä¼ é€’ä¾èµ–ï¼Œè€Œä¸æ˜¯å†…éƒ¨åˆ›å»º
ğŸ”¸ æ§åˆ¶åè½¬ï¼šå¯¹è±¡åˆ›å»ºçš„æ§åˆ¶æƒä»ä½¿ç”¨è€…è½¬ç§»åˆ°å®¹å™¨
ğŸ”¸ IoCå®¹å™¨ï¼šç®¡ç†å¯¹è±¡åˆ›å»ºã€ä¾èµ–æ³¨å…¥ã€ç”Ÿå‘½å‘¨æœŸçš„å®¹å™¨
ğŸ”¸ æ³¨å…¥æ–¹å¼ï¼šæ„é€ å‡½æ•°ã€å±æ€§ã€æ–¹æ³•ä¸‰ç§æ³¨å…¥æ–¹å¼
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸï¼šå•ä¾‹ã€åŸå‹ç­‰ä½œç”¨åŸŸçš„ç®¡ç†
ğŸ”¸ å¾ªç¯ä¾èµ–ï¼šç›¸äº’ä¾èµ–é—®é¢˜çš„è¯†åˆ«å’Œè§£å†³
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¾èµ–æ³¨å…¥çš„ä»·å€¼**ï¼š
```
ä¼ ç»Ÿç¼–ç¨‹ vs ä¾èµ–æ³¨å…¥ï¼š
å†™æ­»ä¾èµ– â†’ çµæ´»é…ç½®
ç´§è€¦åˆ   â†’ æ¾è€¦åˆ  
éš¾æµ‹è¯•   â†’ æ˜“æµ‹è¯•
éš¾ç»´æŠ¤   â†’ æ˜“ç»´æŠ¤
```

**ğŸ”¹ æ³¨å…¥æ–¹å¼é€‰æ‹©**ï¼š
```
æ„é€ å‡½æ•°æ³¨å…¥ï¼šå¿…éœ€ä¾èµ–ï¼Œä¿è¯å¯¹è±¡å®Œæ•´æ€§
å±æ€§æ³¨å…¥ï¼šå¯é€‰ä¾èµ–ï¼Œå¤„ç†å¾ªç¯ä¾èµ–
æ–¹æ³•æ³¨å…¥ï¼šä¸´æ—¶ä¾èµ–ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ³¨å…¥
```

**ğŸ”¹ å®¹å™¨è®¾è®¡æ€è·¯**ï¼š
```
åˆ†å±‚æ¶æ„ï¼šæ¥å£å±‚ã€ç®¡ç†å±‚ã€è§£æå±‚ã€å­˜å‚¨å±‚
èŒè´£åˆ†ç¦»ï¼šå·¥å‚åˆ›å»ºã€è§£æå™¨æ³¨å…¥ã€ç®¡ç†å™¨æ§åˆ¶
æ‰©å±•æ€§ï¼šæ”¯æŒå¤šç§é…ç½®æ–¹å¼å’Œæ³¨å…¥æ¨¡å¼
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å¼€å‘å®è·µæŒ‡å¯¼**ï¼š
- **æ¡†æ¶ç†è§£**ï¼šSpringã€Daggerç­‰æ¡†æ¶çš„æ ¸å¿ƒåŸç†
- **æ¶æ„è®¾è®¡**ï¼šå¦‚ä½•è®¾è®¡æ¾è€¦åˆçš„ç³»ç»Ÿæ¶æ„
- **æµ‹è¯•ç­–ç•¥**ï¼šå¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æé«˜ä»£ç å¯æµ‹è¯•æ€§
- **ç»´æŠ¤æ•ˆç‡**ï¼šå¦‚ä½•é€šè¿‡IoCé™ä½ç³»ç»Ÿç»´æŠ¤æˆæœ¬

**ğŸ”§ å·¥ç¨‹å®è·µ**ï¼š
- **é…ç½®ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†å¯¹è±¡åˆ›å»ºå’Œé…ç½®
- **ç¯å¢ƒåˆ‡æ¢**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒçš„é…ç½®åˆ‡æ¢
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œæ‡’åŠ è½½ç­–ç•¥
- **é”™è¯¯å¤„ç†**ï¼šä¾èµ–æ³¨å…¥è¿‡ç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†å’Œè°ƒè¯•

**æ ¸å¿ƒè®°å¿†**ï¼š
- ä¾èµ–æ³¨å…¥æ˜¯æ§åˆ¶åè½¬çš„å…·ä½“å®ç°æ–¹å¼
- IoCå®¹å™¨æ˜¯ä¾èµ–æ³¨å…¥çš„è‡ªåŠ¨åŒ–ç®¡ç†å·¥å…·
- é€‰æ‹©åˆé€‚çš„æ³¨å…¥æ–¹å¼å’Œç”Ÿå‘½å‘¨æœŸç­–ç•¥
- è‰¯å¥½çš„è®¾è®¡å¯ä»¥é¿å…å¤§éƒ¨åˆ†å¾ªç¯ä¾èµ–é—®é¢˜
- ç†è§£å®¹å™¨åŸç†æœ‰åŠ©äºæ›´å¥½åœ°ä½¿ç”¨ç›¸å…³æ¡†æ¶