---
title: 3ã€åˆ›å»ºå‹æ¨¡å¼
---
## ğŸ“š ç›®å½•

1. [åˆ›å»ºå‹æ¨¡å¼æ¦‚è¿°](#1-åˆ›å»ºå‹æ¨¡å¼æ¦‚è¿°)
2. [å•ä¾‹æ¨¡å¼æ·±åº¦è§£æ](#2-å•ä¾‹æ¨¡å¼æ·±åº¦è§£æ)
3. [å·¥å‚æ¨¡å¼å®è·µæŒ‡å—](#3-å·¥å‚æ¨¡å¼å®è·µæŒ‡å—)
4. [å»ºé€ è€…æ¨¡å¼è¯¦è§£](#4-å»ºé€ è€…æ¨¡å¼è¯¦è§£)
5. [ä¾èµ–æ³¨å…¥å®¹å™¨](#5-ä¾èµ–æ³¨å…¥å®¹å™¨)
6. [é«˜é¢‘æ¨¡å¼æ·±åŒ–](#6-é«˜é¢‘æ¨¡å¼æ·±åŒ–)
7. [åˆ›å»ºå‹æ‰©å±•åº”ç”¨](#7-åˆ›å»ºå‹æ‰©å±•åº”ç”¨)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ åˆ›å»ºå‹æ¨¡å¼æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åˆ›å»ºå‹æ¨¡å¼


**ğŸ’¡ é€šä¿—ç†è§£**ï¼šåˆ›å»ºå‹æ¨¡å¼å°±åƒç”Ÿäº§çº¿ä¸Šçš„åˆ¶é€ è§„åˆ™ï¼Œä¸“é—¨è§£å†³"å¦‚ä½•åˆ›å»ºå¯¹è±¡"çš„é—®é¢˜ã€‚

```
ç±»æ¯”ï¼šå¼€é¤å…çš„ä¸åŒæ–¹å¼

ä¼ ç»Ÿæ–¹å¼ï¼š
ç›´æ¥é›‡å¨å¸ˆ â†’ é¡¾å®¢ç‚¹é¤ â†’ å¨å¸ˆåšèœ â†’ ä¸Šèœ
é—®é¢˜ï¼šå¨å¸ˆæŠ€èƒ½ä¸ä¸€ã€æ•ˆç‡ä½ã€æˆæœ¬é«˜

ä½¿ç”¨åˆ›å»ºå‹æ¨¡å¼ï¼š
å»ºç«‹æ ‡å‡†åŒ–å¨æˆ¿ â†’ åŸ¹è®­æ ‡å‡†æµç¨‹ â†’ ç»Ÿä¸€å‡ºå“è´¨é‡
å¥½å¤„ï¼šæ•ˆç‡é«˜ã€è´¨é‡ç¨³å®šã€æˆæœ¬å¯æ§
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦åˆ›å»ºå‹æ¨¡å¼


**ğŸš« ä¸ä½¿ç”¨æ¨¡å¼çš„é—®é¢˜**ï¼š
- **ä»£ç è€¦åˆ**ï¼šåˆ›å»ºå¯¹è±¡çš„ä»£ç æ•£å¸ƒå„å¤„ï¼Œéš¾ä»¥ç»´æŠ¤
- **é‡å¤ä»£ç **ï¼šåŒæ ·çš„åˆ›å»ºé€»è¾‘åœ¨å¤šå¤„é‡å¤
- **æ‰©å±•å›°éš¾**ï¼šæ–°å¢å¯¹è±¡ç±»å‹éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç 
- **æµ‹è¯•å›°éš¾**ï¼šéš¾ä»¥ç”¨æµ‹è¯•å¯¹è±¡æ›¿æ¢çœŸå®å¯¹è±¡

**âœ… ä½¿ç”¨æ¨¡å¼çš„å¥½å¤„**ï¼š
- **è§£è€¦åˆ›å»º**ï¼šå°†å¯¹è±¡åˆ›å»ºé€»è¾‘é›†ä¸­ç®¡ç†
- **æé«˜å¤ç”¨**ï¼šåˆ›å»ºé€»è¾‘å¯ä»¥é‡å¤ä½¿ç”¨
- **æ˜“äºæ‰©å±•**ï¼šæ–°å¢ç±»å‹åªéœ€è¦ä¿®æ”¹åˆ›å»ºéƒ¨åˆ†
- **ä¾¿äºæµ‹è¯•**ï¼šå¯ä»¥è½»æ¾æ³¨å…¥æµ‹è¯•å¯¹è±¡

### 1.3 åˆ›å»ºå‹æ¨¡å¼å®¶æ—æ¦‚è§ˆ


```
åˆ›å»ºå‹æ¨¡å¼å®¶æ—ï¼š

ğŸ  å•ä¾‹æ¨¡å¼    â†’ å…¨å±€å”¯ä¸€å®ä¾‹ï¼ˆæ•°æ®åº“è¿æ¥æ± ï¼‰
ğŸ­ å·¥å‚æ¨¡å¼    â†’ ç»Ÿä¸€åˆ›å»ºæ¥å£ï¼ˆæŒ‰é’®å·¥å‚ï¼‰
ğŸ—ï¸ å»ºé€ è€…æ¨¡å¼  â†’ å¤æ‚å¯¹è±¡æ„å»ºï¼ˆç”µè„‘ç»„è£…ï¼‰
ğŸ’‰ ä¾èµ–æ³¨å…¥    â†’ å¤–éƒ¨æä¾›ä¾èµ–ï¼ˆæœåŠ¡å®¹å™¨ï¼‰
ğŸ“‹ åŸå‹æ¨¡å¼    â†’ å¤åˆ¶ç°æœ‰å¯¹è±¡ï¼ˆæ–‡æ¡£æ¨¡æ¿ï¼‰
```

---

## 2. ğŸ  å•ä¾‹æ¨¡å¼æ·±åº¦è§£æ


### 2.1 å•ä¾‹æ¨¡å¼æœ¬è´¨ç†è§£


**ğŸ¯ æ ¸å¿ƒæ€æƒ³**ï¼šæŸäº›å¯¹è±¡åœ¨æ•´ä¸ªç¨‹åºä¸­åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚

**ğŸŒ° ç”Ÿæ´»ä¸­çš„å•ä¾‹**ï¼š
```
ç°å®ä¾‹å­ï¼š
- ä¸€ä¸ªå›½å®¶åªæœ‰ä¸€ä¸ªæ€»ç»Ÿ
- ä¸€å°ç”µè„‘åªæœ‰ä¸€ä¸ªæ“ä½œç³»ç»Ÿ
- ä¸€ä¸ªå…¬å¸åªæœ‰ä¸€ä¸ªCEO
- ä¸€ä¸ªæ¸¸æˆåªæœ‰ä¸€ä¸ªå…¨å±€è®¾ç½®

ç¨‹åºä¸­çš„å•ä¾‹ï¼š
- æ•°æ®åº“è¿æ¥æ± ï¼ˆé¿å…é‡å¤è¿æ¥ï¼‰
- æ—¥å¿—è®°å½•å™¨ï¼ˆç»Ÿä¸€æ—¥å¿—ç®¡ç†ï¼‰
- é…ç½®ç®¡ç†å™¨ï¼ˆå…¨å±€é…ç½®è®¿é—®ï¼‰
- ç¼“å­˜ç®¡ç†å™¨ï¼ˆå†…å­˜ç»Ÿä¸€ç®¡ç†ï¼‰
```

### 2.2 å•ä¾‹æ¨¡å¼æ ¸å¿ƒç‰¹å¾


**ğŸ“‹ ä¸‰ä¸ªå…³é”®è¦ç´ **ï¼š
1. **ç§æœ‰æ„é€ å‡½æ•°** - é˜²æ­¢å¤–éƒ¨ç›´æ¥åˆ›å»ºå®ä¾‹
2. **ç§æœ‰é™æ€å®ä¾‹** - ä¿å­˜å”¯ä¸€çš„å®ä¾‹
3. **å…¬å…±è®¿é—®æ–¹æ³•** - æä¾›è·å–å®ä¾‹çš„ç»Ÿä¸€å…¥å£

### 2.3 å•ä¾‹æ¨¡å¼å®ç°æ–¹å¼


#### ğŸ”¹ é¥¿æ±‰å¼ï¼ˆæ¨èï¼‰


```java
/**
 * é¥¿æ±‰å¼å•ä¾‹ - ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®ä¾‹
 * ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œå®ç°ç®€å•
 * ç¼ºç‚¹ï¼šå¯èƒ½æµªè´¹å†…å­˜ï¼ˆå¦‚æœä¸ä½¿ç”¨çš„è¯ï¼‰
 */
public class DatabaseManager {
    // åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®ä¾‹
    private static final DatabaseManager instance = new DatabaseManager();
    
    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨åˆ›å»º
    private DatabaseManager() {
        // åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
        System.out.println("åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ± ...");
    }
    
    // æä¾›å…¨å±€è®¿é—®ç‚¹
    public static DatabaseManager getInstance() {
        return instance;
    }
    
    public void executeQuery(String sql) {
        System.out.println("æ‰§è¡ŒSQL: " + sql);
    }
}
```

#### ğŸ”¹ æ‡’æ±‰å¼ï¼ˆåŒé‡æ£€æŸ¥é”å®šï¼‰


```java
/**
 * æ‡’æ±‰å¼å•ä¾‹ - éœ€è¦æ—¶æ‰åˆ›å»ºå®ä¾‹
 * ä¼˜ç‚¹ï¼šèŠ‚çœå†…å­˜ï¼Œå»¶è¿ŸåŠ è½½
 * ç¼ºç‚¹ï¼šå®ç°å¤æ‚ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨
 */
public class ConfigManager {
    private static volatile ConfigManager instance;
    
    private ConfigManager() {
        // åŠ è½½é…ç½®æ–‡ä»¶
        System.out.println("åŠ è½½ç³»ç»Ÿé…ç½®...");
    }
    
    public static ConfigManager getInstance() {
        if (instance == null) {  // ç¬¬ä¸€é‡æ£€æŸ¥
            synchronized (ConfigManager.class) {
                if (instance == null) {  // ç¬¬äºŒé‡æ£€æŸ¥
                    instance = new ConfigManager();
                }
            }
        }
        return instance;
    }
    
    public String getConfig(String key) {
        return "é…ç½®å€¼ï¼š" + key;
    }
}
```

### 2.4 å•ä¾‹æ¨¡å¼åº”ç”¨åœºæ™¯


```
âœ… é€‚åˆä½¿ç”¨å•ä¾‹çš„åœºæ™¯ï¼š

ğŸ—ƒï¸ èµ„æºç®¡ç†ç±»ï¼š
   - æ•°æ®åº“è¿æ¥æ± 
   - æ–‡ä»¶ç³»ç»Ÿç®¡ç†å™¨
   - å†…å­˜ç¼“å­˜ç®¡ç†å™¨

âš™ï¸ é…ç½®ç®¡ç†ç±»ï¼š
   - ç³»ç»Ÿé…ç½®ç®¡ç†å™¨
   - åº”ç”¨è®¾ç½®ç®¡ç†å™¨
   - ç¯å¢ƒå˜é‡ç®¡ç†å™¨

ğŸ“ å·¥å…·ç±»ï¼š
   - æ—¥å¿—è®°å½•å™¨
   - çº¿ç¨‹æ± ç®¡ç†å™¨
   - è®¡æ•°å™¨/åºå·ç”Ÿæˆå™¨

âŒ ä¸é€‚åˆä½¿ç”¨å•ä¾‹ï¼š
   - ä¸šåŠ¡æ•°æ®å¯¹è±¡ï¼ˆUserã€Orderç­‰ï¼‰
   - å€¼å¯¹è±¡ï¼ˆåæ ‡ã€é¢œè‰²ç­‰ï¼‰
   - æœ‰çŠ¶æ€ä¸”ä¼šå˜åŒ–çš„å¯¹è±¡
```

### 2.5 å•ä¾‹æ¨¡å¼æœ€ä½³å®è·µ


```java
/**
 * ç°ä»£Javaå•ä¾‹æœ€ä½³å®è·µ - æšä¸¾å®ç°
 * ä¼˜ç‚¹ï¼šç®€æ´ã€çº¿ç¨‹å®‰å…¨ã€é˜²æ­¢ååºåˆ—åŒ–
 */
public enum LoggerManager {
    INSTANCE;
    
    public void log(String message) {
        System.out.println("[" + getCurrentTime() + "] " + message);
    }
    
    private String getCurrentTime() {
        return java.time.LocalTime.now().toString();
    }
}

// ä½¿ç”¨æ–¹å¼
LoggerManager.INSTANCE.log("ç³»ç»Ÿå¯åŠ¨å®Œæˆ");
```

---

## 3. ğŸ­ å·¥å‚æ¨¡å¼å®è·µæŒ‡å—


### 3.1 å·¥å‚æ¨¡å¼æœ¬è´¨ç†è§£


**ğŸ¯ æ ¸å¿ƒæ€æƒ³**ï¼šä¸ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡å·¥å‚æ¥ç»Ÿä¸€åˆ›å»ºï¼Œå°±åƒè®¢é¤ä¸ç”¨è‡ªå·±åšé¥­ï¼Œè€Œæ˜¯å‘Šè¯‰é¤å…è¦ä»€ä¹ˆèœã€‚

**ğŸŒ° ç”Ÿæ´»ä¸­çš„å·¥å‚**ï¼š
```
ç°å®ä¾‹å­ï¼š
- æ±½è½¦å·¥å‚ï¼šå‘Šè¯‰å·¥å‚è¦SUVï¼Œå·¥å‚è´Ÿè´£ç»„è£…
- é¤å…å¨æˆ¿ï¼šå‘Šè¯‰æœåŠ¡å‘˜è¦çº¢çƒ§è‚‰ï¼Œå¨æˆ¿è´Ÿè´£åˆ¶ä½œ
- æœè£…å·¥å‚ï¼šå‘Šè¯‰å·¥å‚è¦Tæ¤ï¼Œå·¥å‚è´Ÿè´£ç”Ÿäº§

ç¨‹åºä¸­çš„å·¥å‚ï¼š
- UIæ§ä»¶å·¥å‚ï¼šè¦æŒ‰é’®ï¼Œå·¥å‚åˆ›å»ºæŒ‰é’®å¯¹è±¡
- æ•°æ®åº“å·¥å‚ï¼šè¦MySQLè¿æ¥ï¼Œå·¥å‚åˆ›å»ºMySQLè¿æ¥
- è§£æå™¨å·¥å‚ï¼šè¦JSONè§£æå™¨ï¼Œå·¥å‚åˆ›å»ºJSONè§£æå™¨
```

### 3.2 ç®€å•å·¥å‚æ¨¡å¼


```java
/**
 * ç®€å•å·¥å‚ - é›†ä¸­åˆ›å»ºå¯¹è±¡çš„åœ°æ–¹
 */
// äº§å“æ¥å£
interface Button {
    void render();
    void onClick();
}

// å…·ä½“äº§å“
class WindowsButton implements Button {
    public void render() { System.out.println("æ¸²æŸ“Windowsé£æ ¼æŒ‰é’®"); }
    public void onClick() { System.out.println("WindowsæŒ‰é’®è¢«ç‚¹å‡»"); }
}

class MacButton implements Button {
    public void render() { System.out.println("æ¸²æŸ“Macé£æ ¼æŒ‰é’®"); }
    public void onClick() { System.out.println("MacæŒ‰é’®è¢«ç‚¹å‡»"); }
}

// ç®€å•å·¥å‚
class ButtonFactory {
    public static Button createButton(String type) {
        switch (type.toLowerCase()) {
            case "windows":
                return new WindowsButton();
            case "mac":
                return new MacButton();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„æŒ‰é’®ç±»å‹: " + type);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class SimpleFactoryDemo {
    public static void main(String[] args) {
        // ä¸éœ€è¦çŸ¥é“å…·ä½“ç±»åï¼Œåªéœ€è¦å‘Šè¯‰å·¥å‚è¦ä»€ä¹ˆ
        Button winBtn = ButtonFactory.createButton("windows");
        Button macBtn = ButtonFactory.createButton("mac");
        
        winBtn.render();
        macBtn.render();
    }
}
```

### 3.3 å·¥å‚æ–¹æ³•æ¨¡å¼


```java
/**
 * å·¥å‚æ–¹æ³•æ¨¡å¼ - æ¯ç§äº§å“æœ‰ä¸“é—¨çš„å·¥å‚
 */
// æŠ½è±¡å·¥å‚
abstract class UIFactory {
    // å·¥å‚æ–¹æ³•ï¼Œå­ç±»å®ç°å…·ä½“åˆ›å»ºé€»è¾‘
    public abstract Button createButton();
    public abstract TextField createTextField();
    
    // æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰åˆ›å»ºUIçš„æ ‡å‡†æµç¨‹
    public void createUI() {
        Button btn = createButton();
        TextField field = createTextField();
        
        btn.render();
        field.render();
        
        System.out.println("UIç•Œé¢åˆ›å»ºå®Œæˆ");
    }
}

// æ–‡æœ¬æ¡†æ¥å£
interface TextField {
    void render();
}

class WindowsTextField implements TextField {
    public void render() { System.out.println("æ¸²æŸ“Windowsé£æ ¼è¾“å…¥æ¡†"); }
}

class MacTextField implements TextField {
    public void render() { System.out.println("æ¸²æŸ“Macé£æ ¼è¾“å…¥æ¡†"); }
}

// Windowså·¥å‚
class WindowsUIFactory extends UIFactory {
    public Button createButton() {
        return new WindowsButton();
    }
    
    public TextField createTextField() {
        return new WindowsTextField();
    }
}

// Macå·¥å‚
class MacUIFactory extends UIFactory {
    public Button createButton() {
        return new MacButton();
    }
    
    public TextField createTextField() {
        return new MacTextField();
    }
}
```

### 3.4 å·¥å‚æ¨¡å¼å®é™…åº”ç”¨


```java
/**
 * å®é™…åº”ç”¨ï¼šæ•°æ®åº“è¿æ¥å·¥å‚
 */
interface DatabaseConnection {
    void connect();
    void executeQuery(String sql);
    void close();
}

class MySQLConnection implements DatabaseConnection {
    public void connect() { System.out.println("è¿æ¥åˆ°MySQLæ•°æ®åº“"); }
    public void executeQuery(String sql) { System.out.println("MySQLæ‰§è¡Œ: " + sql); }
    public void close() { System.out.println("å…³é—­MySQLè¿æ¥"); }
}

class PostgreSQLConnection implements DatabaseConnection {
    public void connect() { System.out.println("è¿æ¥åˆ°PostgreSQLæ•°æ®åº“"); }
    public void executeQuery(String sql) { System.out.println("PostgreSQLæ‰§è¡Œ: " + sql); }
    public void close() { System.out.println("å…³é—­PostgreSQLè¿æ¥"); }
}

class DatabaseFactory {
    public static DatabaseConnection createConnection(String dbType) {
        switch (dbType.toLowerCase()) {
            case "mysql":
                return new MySQLConnection();
            case "postgresql":
                return new PostgreSQLConnection();
            default:
                throw new RuntimeException("ä¸æ”¯æŒçš„æ•°æ®åº“ç±»å‹: " + dbType);
        }
    }
}

// ä¸šåŠ¡ä»£ç ä½¿ç”¨
public class DatabaseService {
    private DatabaseConnection connection;
    
    public DatabaseService(String dbType) {
        // é€šè¿‡å·¥å‚åˆ›å»ºï¼Œä¸šåŠ¡ä»£ç ä¸ä¾èµ–å…·ä½“å®ç°
        this.connection = DatabaseFactory.createConnection(dbType);
    }
    
    public void performOperation() {
        connection.connect();
        connection.executeQuery("SELECT * FROM users");
        connection.close();
    }
}
```

---

## 4. ğŸ—ï¸ å»ºé€ è€…æ¨¡å¼è¯¦è§£


### 4.1 å»ºé€ è€…æ¨¡å¼æœ¬è´¨ç†è§£


**ğŸ¯ æ ¸å¿ƒæ€æƒ³**ï¼šå½“åˆ›å»ºå¤æ‚å¯¹è±¡æ—¶ï¼Œå°†æ„å»ºè¿‡ç¨‹åˆ†æ­¥éª¤è¿›è¡Œï¼Œå°±åƒå»ºæˆ¿å­éœ€è¦ä¸€æ­¥æ­¥æ¥ã€‚

**ğŸŒ° ç”Ÿæ´»ä¸­çš„å»ºé€ è€…**ï¼š
```
ç°å®ä¾‹å­ï¼š
- å»ºæˆ¿å­ï¼šåœ°åŸº â†’ æ¡†æ¶ â†’ å¢™ä½“ â†’ å±‹é¡¶ â†’ è£…ä¿®
- åšæ±‰å ¡ï¼šé¢åŒ… â†’ è‚‰é¥¼ â†’ è”¬èœ â†’ é…±æ–™ â†’ åŒ…è£…
- ç»„è£…ç”µè„‘ï¼šä¸»æ¿ â†’ CPU â†’ å†…å­˜ â†’ ç¡¬ç›˜ â†’ æ˜¾å¡

ç¨‹åºä¸­çš„å»ºé€ è€…ï¼š
- åˆ›å»ºå¤æ‚é…ç½®å¯¹è±¡ï¼ˆæ•°æ®åº“é…ç½®ï¼‰
- æ„å»ºSQLæŸ¥è¯¢è¯­å¥
- ç”Ÿæˆå¤æ‚çš„HTTPè¯·æ±‚
- åˆ›å»ºæ¸¸æˆè§’è‰²ï¼ˆå±æ€§å¾ˆå¤šï¼‰
```

### 4.2 å»ºé€ è€…æ¨¡å¼åŸºæœ¬å®ç°


```java
/**
 * å»ºé€ è€…æ¨¡å¼ç¤ºä¾‹ï¼šç”µè„‘é…ç½®æ„å»ºå™¨
 */
class Computer {
    // å¿…éœ€å‚æ•°
    private String cpu;
    private String memory;
    
    // å¯é€‰å‚æ•°
    private String graphics;
    private String storage;
    private String monitor;
    private boolean hasWifi;
    private boolean hasBluetooth;
    
    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œåªèƒ½é€šè¿‡Builderåˆ›å»º
    private Computer(Builder builder) {
        this.cpu = builder.cpu;
        this.memory = builder.memory;
        this.graphics = builder.graphics;
        this.storage = builder.storage;
        this.monitor = builder.monitor;
        this.hasWifi = builder.hasWifi;
        this.hasBluetooth = builder.hasBluetooth;
    }
    
    @Override
    public String toString() {
        return String.format(
            "ç”µè„‘é…ç½®ï¼šCPU=%s, å†…å­˜=%s, æ˜¾å¡=%s, å­˜å‚¨=%s, æ˜¾ç¤ºå™¨=%s, WiFi=%s, è“ç‰™=%s",
            cpu, memory, graphics, storage, monitor, hasWifi, hasBluetooth
        );
    }
    
    // é™æ€å†…éƒ¨ç±» Builder
    public static class Builder {
        // å¿…éœ€å‚æ•°
        private String cpu;
        private String memory;
        
        // å¯é€‰å‚æ•° - è®¾ç½®é»˜è®¤å€¼
        private String graphics = "é›†æˆæ˜¾å¡";
        private String storage = "256GB SSD";
        private String monitor = "æ— ";
        private boolean hasWifi = false;
        private boolean hasBluetooth = false;
        
        // å¿…éœ€å‚æ•°é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®
        public Builder(String cpu, String memory) {
            this.cpu = cpu;
            this.memory = memory;
        }
        
        // å¯é€‰å‚æ•°é€šè¿‡æ–¹æ³•è®¾ç½®ï¼Œè¿”å›Builderå®ç°é“¾å¼è°ƒç”¨
        public Builder graphics(String graphics) {
            this.graphics = graphics;
            return this;
        }
        
        public Builder storage(String storage) {
            this.storage = storage;
            return this;
        }
        
        public Builder monitor(String monitor) {
            this.monitor = monitor;
            return this;
        }
        
        public Builder wifi(boolean hasWifi) {
            this.hasWifi = hasWifi;
            return this;
        }
        
        public Builder bluetooth(boolean hasBluetooth) {
            this.hasBluetooth = hasBluetooth;
            return this;
        }
        
        // æ„å»ºæœ€ç»ˆå¯¹è±¡
        public Computer build() {
            return new Computer(this);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class BuilderDemo {
    public static void main(String[] args) {
        // åŸºç¡€é…ç½®
        Computer basicComputer = new Computer.Builder("Intel i5", "8GB")
            .build();
        
        // é«˜ç«¯é…ç½®
        Computer gamingComputer = new Computer.Builder("Intel i9", "32GB")
            .graphics("RTX 4080")
            .storage("1TB NVMe SSD")
            .monitor("4Kæ˜¾ç¤ºå™¨")
            .wifi(true)
            .bluetooth(true)
            .build();
        
        System.out.println(basicComputer);
        System.out.println(gamingComputer);
    }
}
```

### 4.3 å»ºé€ è€…æ¨¡å¼å®é™…åº”ç”¨


```java
/**
 * å®é™…åº”ç”¨ï¼šHTTPè¯·æ±‚æ„å»ºå™¨
 */
class HttpRequest {
    private String url;
    private String method;
    private Map<String, String> headers;
    private Map<String, String> parameters;
    private String body;
    private int timeout;
    
    private HttpRequest(Builder builder) {
        this.url = builder.url;
        this.method = builder.method;
        this.headers = builder.headers;
        this.parameters = builder.parameters;
        this.body = builder.body;
        this.timeout = builder.timeout;
    }
    
    public void execute() {
        System.out.println("æ‰§è¡ŒHTTPè¯·æ±‚:");
        System.out.println("URL: " + url);
        System.out.println("æ–¹æ³•: " + method);
        System.out.println("è¯·æ±‚å¤´: " + headers);
        System.out.println("å‚æ•°: " + parameters);
        System.out.println("è¯·æ±‚ä½“: " + body);
        System.out.println("è¶…æ—¶: " + timeout + "ms");
    }
    
    public static class Builder {
        private String url;
        private String method = "GET";
        private Map<String, String> headers = new HashMap<>();
        private Map<String, String> parameters = new HashMap<>();
        private String body = "";
        private int timeout = 5000;
        
        public Builder(String url) {
            this.url = url;
        }
        
        public Builder method(String method) {
            this.method = method;
            return this;
        }
        
        public Builder header(String key, String value) {
            this.headers.put(key, value);
            return this;
        }
        
        public Builder parameter(String key, String value) {
            this.parameters.put(key, value);
            return this;
        }
        
        public Builder body(String body) {
            this.body = body;
            return this;
        }
        
        public Builder timeout(int timeout) {
            this.timeout = timeout;
            return this;
        }
        
        public HttpRequest build() {
            return new HttpRequest(this);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
HttpRequest request = new HttpRequest.Builder("https://api.example.com/users")
    .method("POST")
    .header("Content-Type", "application/json")
    .header("Authorization", "Bearer token123")
    .parameter("page", "1")
    .parameter("size", "10")
    .body("{\"name\":\"å¼ ä¸‰\",\"age\":25}")
    .timeout(10000)
    .build();

request.execute();
```

### 4.4 å»ºé€ è€…æ¨¡å¼ä¼˜åŠ¿


```
âœ… å»ºé€ è€…æ¨¡å¼çš„å¥½å¤„ï¼š

ğŸ”¹ å‚æ•°æ¸…æ™°ï¼š
   new Computer.Builder("i7", "16GB").graphics("RTX4080")
   æ¯”æ„é€ å‡½æ•° new Computer("i7","16GB",null,null,"RTX4080",...)æ¸…æ™°

ğŸ”¹ çµæ´»æ„å»ºï¼š
   å¯ä»¥é€‰æ‹©æ€§è®¾ç½®å‚æ•°ï¼Œä¸éœ€è¦çš„å‚æ•°å¯ä»¥ä¸è®¾ç½®

ğŸ”¹ ä¸å¯å˜å¯¹è±¡ï¼š
   å¯¹è±¡åˆ›å»ºåä¸èƒ½ä¿®æ”¹ï¼Œä¿è¯æ•°æ®å®‰å…¨

ğŸ”¹ å‚æ•°éªŒè¯ï¼š
   å¯ä»¥åœ¨build()æ–¹æ³•ä¸­éªŒè¯å‚æ•°çš„æœ‰æ•ˆæ€§

âŒ ä»€ä¹ˆæ—¶å€™ä¸ç”¨å»ºé€ è€…ï¼š
   - å‚æ•°å°‘äº4ä¸ª
   - å¯¹è±¡æ¯”è¾ƒç®€å•
   - ä¸éœ€è¦ä¸å¯å˜å¯¹è±¡
```

---

## 5. ğŸ’‰ ä¾èµ–æ³¨å…¥å®¹å™¨


### 5.1 ä¾èµ–æ³¨å…¥æœ¬è´¨ç†è§£


**ğŸ¯ æ ¸å¿ƒæ€æƒ³**ï¼šä¸è¦è‡ªå·±åˆ›å»ºä¾èµ–çš„å¯¹è±¡ï¼Œè€Œæ˜¯ç”±å¤–éƒ¨æä¾›ï¼Œå°±åƒä¸è‡ªå·±åšé¥­è€Œæ˜¯å«å¤–å–ã€‚

**ğŸŒ° ç”Ÿæ´»ä¸­çš„ä¾èµ–æ³¨å…¥**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼ˆè‡ªå·±åšæ‰€æœ‰äº‹ï¼‰ï¼š
è¦å†™ä½œ â†’ è‡ªå·±ä¹°çº¸ç¬” â†’ è‡ªå·±å†™å­— â†’ è‡ªå·±è£…è®¢
é—®é¢˜ï¼šç´¯ã€æ•ˆç‡ä½ã€ä¸ä¸“ä¸š

ä¾èµ–æ³¨å…¥æ–¹å¼ï¼ˆä¸“ä¸šåˆ†å·¥ï¼‰ï¼š
è¦å†™ä½œ â†’ åˆ«äººæä¾›çº¸ç¬” â†’ ä¸“å¿ƒå†™ä½œ â†’ åˆ«äººè´Ÿè´£è£…è®¢
å¥½å¤„ï¼šä¸“æ³¨ã€é«˜æ•ˆã€ä¸“ä¸š

ç¨‹åºä¸­çš„ä¾‹å­ï¼š
- ä¸è‡ªå·±åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼Œç”±å®¹å™¨æä¾›
- ä¸è‡ªå·±åˆ›å»ºæ—¥å¿—å¯¹è±¡ï¼Œç”±å®¹å™¨æ³¨å…¥
- ä¸è‡ªå·±åˆ›å»ºé…ç½®å¯¹è±¡ï¼Œç”±å®¹å™¨ç®¡ç†
```

### 5.2 ä¾èµ–æ³¨å…¥åŸºæœ¬æ¦‚å¿µ


```java
/**
 * æ²¡æœ‰ä¾èµ–æ³¨å…¥çš„é—®é¢˜ä»£ç 
 */
class OrderService {
    private DatabaseConnection db;
    private LoggerManager logger;
    private EmailService emailService;
    
    public OrderService() {
        // è‡ªå·±åˆ›å»ºæ‰€æœ‰ä¾èµ– - ç´§è€¦åˆ
        this.db = new MySQLConnection();
        this.logger = LoggerManager.getInstance();
        this.emailService = new EmailService();
    }
    
    public void createOrder(Order order) {
        logger.log("å¼€å§‹åˆ›å»ºè®¢å•");
        db.save(order);
        emailService.sendConfirmation(order.getEmail());
    }
}

/**
 * ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ”¹è¿›ä»£ç 
 */
class OrderService {
    private DatabaseConnection db;
    private LoggerManager logger;
    private EmailService emailService;
    
    // é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public OrderService(DatabaseConnection db, 
                       LoggerManager logger, 
                       EmailService emailService) {
        this.db = db;
        this.logger = logger;
        this.emailService = emailService;
    }
    
    public void createOrder(Order order) {
        logger.log("å¼€å§‹åˆ›å»ºè®¢å•");
        db.save(order);
        emailService.sendConfirmation(order.getEmail());
    }
}
```

### 5.3 ç®€å•ä¾èµ–æ³¨å…¥å®¹å™¨å®ç°


```java
/**
 * ç®€å•çš„ä¾èµ–æ³¨å…¥å®¹å™¨
 */
class SimpleContainer {
    private Map<Class<?>, Object> instances = new HashMap<>();
    private Map<Class<?>, Class<?>> bindings = new HashMap<>();
    
    // ç»‘å®šæ¥å£å’Œå®ç°ç±»
    public <T> void bind(Class<T> interfaceClass, Class<? extends T> implementClass) {
        bindings.put(interfaceClass, implementClass);
    }
    
    // æ³¨å†Œå•ä¾‹å¯¹è±¡
    public <T> void singleton(Class<T> clazz, T instance) {
        instances.put(clazz, instance);
    }
    
    // è·å–å¯¹è±¡å®ä¾‹
    @SuppressWarnings("unchecked")
    public <T> T get(Class<T> clazz) {
        // å¦‚æœå·²æœ‰å®ä¾‹ï¼Œç›´æ¥è¿”å›
        if (instances.containsKey(clazz)) {
            return (T) instances.get(clazz);
        }
        
        // æŸ¥æ‰¾ç»‘å®šçš„å®ç°ç±»
        Class<?> implementClass = bindings.getOrDefault(clazz, clazz);
        
        try {
            // åˆ›å»ºå®ä¾‹
            Constructor<?> constructor = implementClass.getDeclaredConstructors()[0];
            Class<?>[] paramTypes = constructor.getParameterTypes();
            
            if (paramTypes.length == 0) {
                // æ— å‚æ„é€ å‡½æ•°
                return (T) implementClass.newInstance();
            } else {
                // æœ‰å‚æ„é€ å‡½æ•°ï¼Œé€’å½’è§£æä¾èµ–
                Object[] params = new Object[paramTypes.length];
                for (int i = 0; i < paramTypes.length; i++) {
                    params[i] = get(paramTypes[i]);
                }
                return (T) constructor.newInstance(params);
            }
        } catch (Exception e) {
            throw new RuntimeException("æ— æ³•åˆ›å»ºå®ä¾‹: " + clazz.getName(), e);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class DIContainerDemo {
    public static void main(String[] args) {
        SimpleContainer container = new SimpleContainer();
        
        // é…ç½®ä¾èµ–å…³ç³»
        container.bind(DatabaseConnection.class, MySQLConnection.class);
        container.singleton(LoggerManager.class, LoggerManager.INSTANCE);
        container.bind(EmailService.class, EmailService.class);
        
        // å®¹å™¨è‡ªåŠ¨è§£æä¾èµ–å¹¶åˆ›å»ºå¯¹è±¡
        OrderService orderService = container.get(OrderService.class);
        
        // ä½¿ç”¨æœåŠ¡
        Order order = new Order("user@example.com");
        orderService.createOrder(order);
    }
}
```

### 5.4 ä¾èµ–æ³¨å…¥çš„ä¼˜ç‚¹


```
âœ… ä¾èµ–æ³¨å…¥çš„å¥½å¤„ï¼š

ğŸ”¹ æ¾è€¦åˆï¼š
   ç±»ä¸éœ€è¦çŸ¥é“ä¾èµ–çš„å…·ä½“å®ç°
   OrderServiceä¸å…³å¿ƒç”¨çš„æ˜¯MySQLè¿˜æ˜¯PostgreSQL

ğŸ”¹ æ˜“æµ‹è¯•ï¼š
   å¯ä»¥è½»æ¾æ³¨å…¥Mockå¯¹è±¡è¿›è¡Œå•å…ƒæµ‹è¯•
   
ğŸ”¹ æ˜“é…ç½®ï¼š
   é€šè¿‡é…ç½®æ–‡ä»¶æ”¹å˜ä¾èµ–å…³ç³»ï¼Œä¸ç”¨æ”¹ä»£ç 

ğŸ”¹ æ˜“æ‰©å±•ï¼š
   æ–°å¢å®ç°ç±»ï¼Œåªéœ€è¦ä¿®æ”¹å®¹å™¨é…ç½®

ğŸ“‹ ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼š
   - æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæ¨èï¼‰
   - Setteræ–¹æ³•æ³¨å…¥
   - æ¥å£æ³¨å…¥
   - æ³¨è§£æ³¨å…¥
```

---

## 6. ğŸ”¥ é«˜é¢‘æ¨¡å¼æ·±åŒ–


### 6.1 å•ä¾‹æ¨¡å¼æ·±åº¦åº”ç”¨


**ğŸ† å®æˆ˜åœºæ™¯ï¼šå…¨å±€é…ç½®ç®¡ç†å™¨**

```java
/**
 * ç”Ÿäº§çº§å•ä¾‹ï¼šåº”ç”¨é…ç½®ç®¡ç†å™¨
 */
public class AppConfigManager {
    private static volatile AppConfigManager instance;
    private final Properties config;
    private final String configFile;
    
    private AppConfigManager() {
        this.configFile = "application.properties";
        this.config = new Properties();
        loadConfig();
    }
    
    public static AppConfigManager getInstance() {
        if (instance == null) {
            synchronized (AppConfigManager.class) {
                if (instance == null) {
                    instance = new AppConfigManager();
                }
            }
        }
        return instance;
    }
    
    private void loadConfig() {
        try (InputStream is = getClass().getClassLoader()
                .getResourceAsStream(configFile)) {
            if (is != null) {
                config.load(is);
                System.out.println("é…ç½®æ–‡ä»¶åŠ è½½æˆåŠŸ");
            }
        } catch (IOException e) {
            System.err.println("é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥: " + e.getMessage());
        }
    }
    
    public String getString(String key, String defaultValue) {
        return config.getProperty(key, defaultValue);
    }
    
    public int getInt(String key, int defaultValue) {
        String value = config.getProperty(key);
        try {
            return value != null ? Integer.parseInt(value) : defaultValue;
        } catch (NumberFormatException e) {
            return defaultValue;
        }
    }
    
    public boolean getBoolean(String key, boolean defaultValue) {
        String value = config.getProperty(key);
        return value != null ? Boolean.parseBoolean(value) : defaultValue;
    }
    
    // çƒ­é‡è½½é…ç½®
    public void reloadConfig() {
        config.clear();
        loadConfig();
        System.out.println("é…ç½®å·²é‡æ–°åŠ è½½");
    }
}

// ä½¿ç”¨ç¤ºä¾‹
class DatabaseService {
    private final AppConfigManager config = AppConfigManager.getInstance();
    
    public void connect() {
        String host = config.getString("db.host", "localhost");
        int port = config.getInt("db.port", 3306);
        String database = config.getString("db.name", "myapp");
        
        System.out.printf("è¿æ¥æ•°æ®åº“: %s:%d/%s%n", host, port, database);
    }
}
```

### 6.2 å·¥å‚æ¨¡å¼æ·±åº¦åº”ç”¨


**ğŸ† å®æˆ˜åœºæ™¯ï¼šå¤šæ•°æ®æºå·¥å‚**

```java
/**
 * ç”Ÿäº§çº§å·¥å‚ï¼šå¤šæ•°æ®æºç®¡ç†
 */
interface DataSource {
    Connection getConnection();
    void closeConnection(Connection conn);
    String getType();
}

class MySQLDataSource implements DataSource {
    private final String url;
    private final String username;
    private final String password;
    
    public MySQLDataSource(String url, String username, String password) {
        this.url = url;
        this.username = username;
        this.password = password;
    }
    
    @Override
    public Connection getConnection() {
        System.out.println("åˆ›å»ºMySQLè¿æ¥: " + url);
        // å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šåˆ›å»ºçœŸæ­£çš„æ•°æ®åº“è¿æ¥
        return new MockConnection("MySQL");
    }
    
    @Override
    public void closeConnection(Connection conn) {
        System.out.println("å…³é—­MySQLè¿æ¥");
    }
    
    @Override
    public String getType() {
        return "MySQL";
    }
}

class RedisDataSource implements DataSource {
    private final String host;
    private final int port;
    
    public RedisDataSource(String host, int port) {
        this.host = host;
        this.port = port;
    }
    
    @Override
    public Connection getConnection() {
        System.out.println("åˆ›å»ºRedisè¿æ¥: " + host + ":" + port);
        return new MockConnection("Redis");
    }
    
    @Override
    public void closeConnection(Connection conn) {
        System.out.println("å…³é—­Redisè¿æ¥");
    }
    
    @Override
    public String getType() {
        return "Redis";
    }
}

// æ•°æ®æºå·¥å‚
class DataSourceFactory {
    private static final Map<String, DataSource> dataSources = new HashMap<>();
    
    static {
        // åˆå§‹åŒ–å„ç§æ•°æ®æº
        registerDataSource("primary", 
            new MySQLDataSource("jdbc:mysql://localhost:3306/primary", "root", "password"));
        registerDataSource("secondary", 
            new MySQLDataSource("jdbc:mysql://localhost:3306/secondary", "root", "password"));
        registerDataSource("cache", 
            new RedisDataSource("localhost", 6379));
    }
    
    public static void registerDataSource(String name, DataSource dataSource) {
        dataSources.put(name, dataSource);
        System.out.println("æ³¨å†Œæ•°æ®æº: " + name + " (" + dataSource.getType() + ")");
    }
    
    public static DataSource getDataSource(String name) {
        DataSource dataSource = dataSources.get(name);
        if (dataSource == null) {
            throw new IllegalArgumentException("æœªæ‰¾åˆ°æ•°æ®æº: " + name);
        }
        return dataSource;
    }
    
    public static List<String> getAvailableDataSources() {
        return new ArrayList<>(dataSources.keySet());
    }
}

// æ•°æ®è®¿é—®æœåŠ¡
class DataAccessService {
    public void performQuery(String dataSourceName, String query) {
        DataSource dataSource = DataSourceFactory.getDataSource(dataSourceName);
        Connection conn = dataSource.getConnection();
        
        try {
            System.out.println("åœ¨" + dataSource.getType() + "ä¸Šæ‰§è¡ŒæŸ¥è¯¢: " + query);
            // æ‰§è¡Œå®é™…æŸ¥è¯¢
        } finally {
            dataSource.closeConnection(conn);
        }
    }
}
```

---

## 7. ğŸš€ åˆ›å»ºå‹æ‰©å±•åº”ç”¨


### 7.1 ç»„åˆæ¨¡å¼åº”ç”¨ï¼šUIç»„ä»¶ç³»ç»Ÿ


```java
/**
 * ç»¼åˆåº”ç”¨ï¼šUIç»„ä»¶åˆ›å»ºç³»ç»Ÿ
 * ç»“åˆå•ä¾‹ã€å·¥å‚ã€å»ºé€ è€…æ¨¡å¼
 */

// UIç»„ä»¶æ¥å£
interface UIComponent {
    void render();
    void addChild(UIComponent child);
    void removeChild(UIComponent child);
}

// åŸºç¡€ç»„ä»¶å®ç°
abstract class BaseComponent implements UIComponent {
    protected List<UIComponent> children = new ArrayList<>();
    protected String id;
    protected Map<String, String> styles = new HashMap<>();
    
    public BaseComponent(String id) {
        this.id = id;
    }
    
    @Override
    public void addChild(UIComponent child) {
        children.add(child);
    }
    
    @Override
    public void removeChild(UIComponent child) {
        children.remove(child);
    }
    
    protected void renderChildren() {
        for (UIComponent child : children) {
            child.render();
        }
    }
}

// å…·ä½“ç»„ä»¶
class Panel extends BaseComponent {
    public Panel(String id) {
        super(id);
    }
    
    @Override
    public void render() {
        System.out.println("æ¸²æŸ“é¢æ¿: " + id);
        renderChildren();
    }
}

class Button extends BaseComponent {
    private String text;
    
    public Button(String id, String text) {
        super(id);
        this.text = text;
    }
    
    @Override
    public void render() {
        System.out.println("æ¸²æŸ“æŒ‰é’®: " + text + " (ID: " + id + ")");
    }
}

// UIå·¥å‚ï¼ˆå•ä¾‹ï¼‰
class UIFactory {
    private static volatile UIFactory instance;
    private int componentCounter = 0;
    
    private UIFactory() {}
    
    public static UIFactory getInstance() {
        if (instance == null) {
            synchronized (UIFactory.class) {
                if (instance == null) {
                    instance = new UIFactory();
                }
            }
        }
        return instance;
    }
    
    public Panel createPanel() {
        return new Panel("panel_" + (++componentCounter));
    }
    
    public Button createButton(String text) {
        return new Button("button_" + (++componentCounter), text);
    }
}

// é¡µé¢å»ºé€ è€…
class PageBuilder {
    private Panel rootPanel;
    private UIFactory factory = UIFactory.getInstance();
    
    public PageBuilder() {
        this.rootPanel = factory.createPanel();
    }
    
    public PageBuilder addButton(String text) {
        Button button = factory.createButton(text);
        rootPanel.addChild(button);
        return this;
    }
    
    public PageBuilder addPanel() {
        Panel panel = factory.createPanel();
        rootPanel.addChild(panel);
        return this;
    }
    
    public Panel build() {
        return rootPanel;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class UISystemDemo {
    public static void main(String[] args) {
        // ä½¿ç”¨å»ºé€ è€…åˆ›å»ºé¡µé¢
        Panel page = new PageBuilder()
            .addButton("ç™»å½•")
            .addButton("æ³¨å†Œ")
            .addPanel()
            .addButton("å¿˜è®°å¯†ç ")
            .build();
        
        // æ¸²æŸ“é¡µé¢
        page.render();
    }
}
```

### 7.2 å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨æ¨¡å¼


```java
/**
 * å®é™…é¡¹ç›®ï¼šç”µå•†ç³»ç»Ÿä¸­çš„åˆ›å»ºå‹æ¨¡å¼åº”ç”¨
 */

// è®¢å•çŠ¶æ€ï¼ˆå•ä¾‹æšä¸¾ï¼‰
enum OrderStatus {
    PENDING("å¾…æ”¯ä»˜"),
    PAID("å·²æ”¯ä»˜"),
    SHIPPED("å·²å‘è´§"),
    DELIVERED("å·²é€è¾¾"),
    CANCELLED("å·²å–æ¶ˆ");
    
    private final String description;
    
    OrderStatus(String description) {
        this.description = description;
    }
    
    public String getDescription() {
        return description;
    }
}

// è®¢å•å»ºé€ è€…
class Order {
    private String orderId;
    private String userId;
    private List<OrderItem> items;
    private BigDecimal totalAmount;
    private OrderStatus status;
    private String shippingAddress;
    private Date createTime;
    
    private Order(Builder builder) {
        this.orderId = builder.orderId;
        this.userId = builder.userId;
        this.items = builder.items;
        this.totalAmount = builder.totalAmount;
        this.status = builder.status;
        this.shippingAddress = builder.shippingAddress;
        this.createTime = builder.createTime;
    }
    
    public static class Builder {
        private String orderId;
        private String userId;
        private List<OrderItem> items = new ArrayList<>();
        private BigDecimal totalAmount = BigDecimal.ZERO;
        private OrderStatus status = OrderStatus.PENDING;
        private String shippingAddress;
        private Date createTime = new Date();
        
        public Builder(String userId) {
            this.userId = userId;
            this.orderId = generateOrderId();
        }
        
        public Builder addItem(String productId, int quantity, BigDecimal price) {
            items.add(new OrderItem(productId, quantity, price));
            totalAmount = totalAmount.add(price.multiply(BigDecimal.valueOf(quantity)));
            return this;
        }
        
        public Builder shippingAddress(String address) {
            this.shippingAddress = address;
            return this;
        }
        
        public Builder status(OrderStatus status) {
            this.status = status;
            return this;
        }
        
        public Order build() {
            if (items.isEmpty()) {
                throw new IllegalStateException("è®¢å•å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå•†å“");
            }
            if (shippingAddress == null || shippingAddress.trim().isEmpty()) {
                throw new IllegalStateException("å¿…é¡»æä¾›æ”¶è´§åœ°å€");
            }
            return new Order(this);
        }
        
        private String generateOrderId() {
            return "ORD" + System.currentTimeMillis();
        }
    }
    
    // getteræ–¹æ³•
    public String getOrderId() { return orderId; }
    public String getUserId() { return userId; }
    public List<OrderItem> getItems() { return new ArrayList<>(items); }
    public BigDecimal getTotalAmount() { return totalAmount; }
    public OrderStatus getStatus() { return status; }
    public String getShippingAddress() { return shippingAddress; }
}

// æ”¯ä»˜å¤„ç†å™¨å·¥å‚
interface PaymentProcessor {
    boolean processPayment(String orderId, BigDecimal amount);
    String getPaymentMethod();
}

class AlipayProcessor implements PaymentProcessor {
    @Override
    public boolean processPayment(String orderId, BigDecimal amount) {
        System.out.println("ä½¿ç”¨æ”¯ä»˜å®å¤„ç†è®¢å•: " + orderId + ", é‡‘é¢: " + amount);
        return true;
    }
    
    @Override
    public String getPaymentMethod() {
        return "æ”¯ä»˜å®";
    }
}

class WechatPayProcessor implements PaymentProcessor {
    @Override
    public boolean processPayment(String orderId, BigDecimal amount) {
        System.out.println("ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜å¤„ç†è®¢å•: " + orderId + ", é‡‘é¢: " + amount);
        return true;
    }
    
    @Override
    public String getPaymentMethod() {
        return "å¾®ä¿¡æ”¯ä»˜";
    }
}

class PaymentProcessorFactory {
    public static PaymentProcessor createProcessor(String paymentMethod) {
        switch (paymentMethod.toLowerCase()) {
            case "alipay":
                return new AlipayProcessor();
            case "wechat":
                return new WechatPayProcessor();
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼: " + paymentMethod);
        }
    }
}

// ç”µå•†æœåŠ¡ç±»
class ECommerceService {
    public void createAndPayOrder() {
        // ä½¿ç”¨å»ºé€ è€…åˆ›å»ºè®¢å•
        Order order = new Order.Builder("user123")
            .addItem("product1", 2, new BigDecimal("99.99"))
            .addItem("product2", 1, new BigDecimal("199.99"))
            .shippingAddress("åŒ—äº¬å¸‚æœé˜³åŒºxxxè¡—é“xxxå·")
            .build();
        
        System.out.println("åˆ›å»ºè®¢å•æˆåŠŸ: " + order.getOrderId());
        System.out.println("è®¢å•é‡‘é¢: " + order.getTotalAmount());
        
        // ä½¿ç”¨å·¥å‚åˆ›å»ºæ”¯ä»˜å¤„ç†å™¨
        PaymentProcessor processor = PaymentProcessorFactory.createProcessor("alipay");
        boolean success = processor.processPayment(order.getOrderId(), order.getTotalAmount());
        
        if (success) {
            System.out.println("æ”¯ä»˜æˆåŠŸï¼Œä½¿ç”¨" + processor.getPaymentMethod());
        }
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åˆ›å»ºå‹æ¨¡å¼æœ¬è´¨ï¼šè§£å†³å¯¹è±¡åˆ›å»ºçš„å¤æ‚æ€§ï¼Œæä¾›çµæ´»çš„åˆ›å»ºæœºåˆ¶
ğŸ”¸ å•ä¾‹æ¨¡å¼ï¼šå…¨å±€å”¯ä¸€å®ä¾‹ï¼Œé€‚ç”¨äºèµ„æºç®¡ç†ã€é…ç½®ç®¡ç†ç­‰åœºæ™¯
ğŸ”¸ å·¥å‚æ¨¡å¼ï¼šå¯¹è±¡åˆ›å»ºè§£è€¦ï¼Œé€šè¿‡å·¥å‚ç»Ÿä¸€åˆ›å»ºï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤
ğŸ”¸ å»ºé€ è€…æ¨¡å¼ï¼šå¤æ‚å¯¹è±¡çš„åˆ†æ­¥æ„å»ºï¼Œé“¾å¼è°ƒç”¨ï¼Œå‚æ•°æ¸…æ™°
ğŸ”¸ ä¾èµ–æ³¨å…¥ï¼šç”±å¤–éƒ¨æä¾›ä¾èµ–ï¼Œé™ä½è€¦åˆåº¦ï¼Œæé«˜å¯æµ‹è¯•æ€§
```

### 8.2 æ¨¡å¼é€‰æ‹©æŒ‡å—


| ä½¿ç”¨åœºæ™¯ | **æ¨èæ¨¡å¼** | **æ ¸å¿ƒåŸå› ** | **å…¸å‹åº”ç”¨** |
|---------|------------|-------------|-------------|
| ğŸ  **å…¨å±€å”¯ä¸€èµ„æº** | `å•ä¾‹æ¨¡å¼` | `é¿å…é‡å¤åˆ›å»ºï¼Œç»Ÿä¸€ç®¡ç†` | `æ•°æ®åº“è¿æ¥æ± ã€æ—¥å¿—ç®¡ç†` |
| ğŸ­ **åŒç±»å¯¹è±¡åˆ›å»º** | `å·¥å‚æ¨¡å¼` | `åˆ›å»ºé€»è¾‘é›†ä¸­ï¼Œæ˜“äºæ‰©å±•` | `UIæ§ä»¶ã€æ•°æ®åº“è¿æ¥` |
| ğŸ—ï¸ **å¤æ‚å¯¹è±¡æ„å»º** | `å»ºé€ è€…æ¨¡å¼` | `å‚æ•°æ¸…æ™°ï¼Œåˆ†æ­¥æ„å»º` | `é…ç½®å¯¹è±¡ã€HTTPè¯·æ±‚` |
| ğŸ’‰ **ä¾èµ–å…³ç³»ç®¡ç†** | `ä¾èµ–æ³¨å…¥` | `è§£è€¦ä¾èµ–ï¼Œä¾¿äºæµ‹è¯•` | `æœåŠ¡å¯¹è±¡ã€ä¸šåŠ¡é€»è¾‘` |

### 8.3 å®é™…åº”ç”¨è¦ç‚¹


**ğŸ”¹ å•ä¾‹æ¨¡å¼æœ€ä½³å®è·µ**ï¼š
- ä¼˜å…ˆä½¿ç”¨æšä¸¾å®ç°
- æ‡’åŠ è½½ç”¨åŒé‡æ£€æŸ¥é”å®š
- æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜
- é¿å…æ»¥ç”¨ï¼Œä¸æ˜¯æ‰€æœ‰å…¨å±€å¯¹è±¡éƒ½éœ€è¦å•ä¾‹

**ğŸ”¹ å·¥å‚æ¨¡å¼æœ€ä½³å®è·µ**ï¼š
- ç®€å•æƒ…å†µç”¨ç®€å•å·¥å‚
- éœ€è¦æ‰©å±•ç”¨å·¥å‚æ–¹æ³•
- äº§å“æ—å¤æ‚ç”¨æŠ½è±¡å·¥å‚
- é…åˆé…ç½®æ–‡ä»¶å®ç°åŠ¨æ€åˆ›å»º

**ğŸ”¹ å»ºé€ è€…æ¨¡å¼æœ€ä½³å®è·µ**ï¼š
- å‚æ•°è¶…è¿‡4ä¸ªè€ƒè™‘ä½¿ç”¨
- å¿…éœ€å‚æ•°é€šè¿‡æ„é€ å‡½æ•°
- å¯é€‰å‚æ•°é€šè¿‡æ–¹æ³•è®¾ç½®
- åœ¨build()æ–¹æ³•ä¸­è¿›è¡Œå‚æ•°éªŒè¯

**ğŸ”¹ ä¾èµ–æ³¨å…¥æœ€ä½³å®è·µ**ï¼š
- ä¼˜å…ˆä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥
- é¿å…å¾ªç¯ä¾èµ–
- åˆç†ä½¿ç”¨å®¹å™¨ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ
- é…åˆæ¥å£å®ç°æ¾è€¦åˆ

### 8.4 å¸¸è§è¯¯åŒºé¿å…


```
âŒ å¸¸è§é”™è¯¯ï¼š

ğŸ”¸ å•ä¾‹æ¨¡å¼æ»¥ç”¨ï¼š
   æŠŠæ‰€æœ‰å·¥å…·ç±»éƒ½åšæˆå•ä¾‹ â†’ åº”è¯¥åªæœ‰çœŸæ­£éœ€è¦å…¨å±€å”¯ä¸€çš„æ‰ç”¨

ğŸ”¸ å·¥å‚æ¨¡å¼è¿‡åº¦è®¾è®¡ï¼š
   ç®€å•å¯¹è±¡ä¹Ÿç”¨å·¥å‚åˆ›å»º â†’ å¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§

ğŸ”¸ å»ºé€ è€…æ¨¡å¼ç”¨é”™åœºæ™¯ï¼š
   ç®€å•å¯¹è±¡ç”¨å»ºé€ è€… â†’ åè€Œå¢åŠ ä»£ç é‡

ğŸ”¸ ä¾èµ–æ³¨å…¥ç†è§£åå·®ï¼š
   ä»¥ä¸ºåªæ˜¯ä¼ å‚æ•° â†’ å®é™…æ˜¯æ§åˆ¶åè½¬çš„æ€æƒ³
```

### 8.5 å­¦ä¹ å»ºè®®


**ğŸ“š å­¦ä¹ è·¯å¾„**ï¼š
1. **ç†è§£é—®é¢˜** - å…ˆæ˜ç™½æ¨¡å¼è¦è§£å†³ä»€ä¹ˆé—®é¢˜
2. **æŒæ¡ç»“æ„** - ç†è§£æ¨¡å¼çš„åŸºæœ¬ç»“æ„å’Œè§’è‰²
3. **åŠ¨æ‰‹å®è·µ** - å†™ä»£ç å®ç°åŸºæœ¬ç‰ˆæœ¬
4. **åº”ç”¨åœºæ™¯** - å­¦ä¹ ä»€ä¹ˆæ—¶å€™ç”¨ï¼Œä»€ä¹ˆæ—¶å€™ä¸ç”¨
5. **æ‰©å±•å˜åŒ–** - äº†è§£æ¨¡å¼çš„å˜ç§å’Œç»„åˆä½¿ç”¨

**ğŸ¯ å®è·µå»ºè®®**ï¼š
- ä»ç®€å•ä¾‹å­å¼€å§‹ï¼Œé€æ­¥å¤æ‚åŒ–
- å¤šæ€è€ƒç°å®ç”Ÿæ´»ä¸­çš„ç±»æ¯”
- é‡ç‚¹ç†è§£æ€æƒ³ï¼Œä¸è¦æ­»è®°ä»£ç 
- ç»“åˆå®é™…é¡¹ç›®ç»ƒä¹ ä½¿ç”¨

**æ ¸å¿ƒè®°å¿†**ï¼š
- åˆ›å»ºå‹æ¨¡å¼å…³æ³¨å¯¹è±¡å¦‚ä½•åˆ›å»º
- å•ä¾‹ä¿è¯å…¨å±€å”¯ä¸€ï¼Œå·¥å‚è§£è€¦åˆ›å»ºè¿‡ç¨‹
- å»ºé€ è€…åˆ†æ­¥æ„å»ºå¤æ‚å¯¹è±¡ï¼Œä¾èµ–æ³¨å…¥é™ä½è€¦åˆ
- æ¨¡å¼ä¸æ˜¯é“¶å¼¹ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä½¿ç”¨