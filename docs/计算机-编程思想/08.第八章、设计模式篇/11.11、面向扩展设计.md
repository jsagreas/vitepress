---
title: 11ã€é¢å‘æ‰©å±•è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [å¼€é—­åŸåˆ™åº”ç”¨](#1-å¼€é—­åŸåˆ™åº”ç”¨)
2. [æ’ä»¶åŒ–æ€è·¯](#2-æ’ä»¶åŒ–æ€è·¯)
3. [é…ç½®åŒ–è®¾è®¡](#3-é…ç½®åŒ–è®¾è®¡)
4. [æ‰©å±•ç‚¹è¯†åˆ«](#4-æ‰©å±•ç‚¹è¯†åˆ«)
5. [æ‰©å±•æœºåˆ¶è®¾è®¡](#5-æ‰©å±•æœºåˆ¶è®¾è®¡)
6. [æ’ä»¶åŒ–é…ç½®åŒ–å®ç°](#6-æ’ä»¶åŒ–é…ç½®åŒ–å®ç°)
7. [æ‰©å±•æ€§è®¾è®¡å®è·µ](#7-æ‰©å±•æ€§è®¾è®¡å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” å¼€é—­åŸåˆ™åº”ç”¨


### 1.1 ä»€ä¹ˆæ˜¯å¼€é—­åŸåˆ™


**ğŸ¯ æ ¸å¿ƒå®šä¹‰**
å¼€é—­åŸåˆ™å°±æ˜¯ï¼š**å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­**ã€‚ç®€å•è¯´å°±æ˜¯å½“éœ€è¦æ–°åŠŸèƒ½æ—¶ï¼Œä¸æ”¹åŸæœ‰ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡æ·»åŠ æ–°ä»£ç æ¥å®ç°ã€‚

**ğŸŒ° ç”Ÿæ´»ç±»æ¯”**
å°±åƒæ‰‹æœºå……ç”µå™¨ï¼š
- **å¯¹æ‰©å±•å¼€æ”¾**ï¼šå¯ä»¥æ’å„ç§è®¾å¤‡å……ç”µ
- **å¯¹ä¿®æ”¹å…³é—­**ï¼šå……ç”µå™¨æœ¬èº«ä¸éœ€è¦æ”¹åŠ¨

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¼€é—­åŸåˆ™


**âŒ ä¸éµå¾ªå¼€é—­åŸåˆ™çš„é—®é¢˜**
```java
// åä¾‹å­ï¼šæ¯æ¬¡æ·»åŠ æ–°åŠŸèƒ½éƒ½è¦ä¿®æ”¹åŸæœ‰ä»£ç 
class Calculator {
    public double calculate(String type, double a, double b) {
        if (type.equals("add")) {
            return a + b;
        } else if (type.equals("subtract")) {
            return a - b;
        } else if (type.equals("multiply")) {  // æ–°å¢åŠŸèƒ½éœ€è¦ä¿®æ”¹è¿™é‡Œ
            return a * b;
        }
        // æ¯æ¬¡æ·»åŠ æ–°è¿ç®—éƒ½è¦ä¿®æ”¹è¿™ä¸ªæ–¹æ³•ï¼
        return 0;
    }
}
```

**âœ… éµå¾ªå¼€é—­åŸåˆ™çš„è®¾è®¡**
```java
// å¥½ä¾‹å­ï¼šæ·»åŠ æ–°åŠŸèƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ä»£ç 
interface Operation {
    double execute(double a, double b);
}

class Calculator {
    private Map<String, Operation> operations = new HashMap<>();
    
    public void addOperation(String type, Operation operation) {
        operations.put(type, operation);
    }
    
    public double calculate(String type, double a, double b) {
        Operation operation = operations.get(type);
        return operation.execute(a, b);
    }
}

// æ·»åŠ æ–°åŠŸèƒ½åªéœ€è¦æ–°å¢ç±»ï¼Œä¸ä¿®æ”¹åŸæœ‰ä»£ç 
class AddOperation implements Operation {
    public double execute(double a, double b) { return a + b; }
}

class MultiplyOperation implements Operation {
    public double execute(double a, double b) { return a * b; }
}
```

### 1.3 å¼€é—­åŸåˆ™çš„å®ç°ç­–ç•¥


**ğŸ”¸ ç­–ç•¥æ¨¡å¼å®ç°**
```java
// æ”¯ä»˜ç³»ç»Ÿç¤ºä¾‹
interface PaymentStrategy {
    void pay(double amount);
}

class PaymentProcessor {
    private PaymentStrategy strategy;
    
    public void setStrategy(PaymentStrategy strategy) {
        this.strategy = strategy;
    }
    
    public void processPayment(double amount) {
        strategy.pay(amount);
    }
}

// æ‰©å±•æ–°çš„æ”¯ä»˜æ–¹å¼
class WeChatPay implements PaymentStrategy {
    public void pay(double amount) {
        System.out.println("å¾®ä¿¡æ”¯ä»˜: " + amount);
    }
}
```

> ğŸ’¡ **æ ¸å¿ƒç†è§£**  
> å¼€é—­åŸåˆ™è®©ç³»ç»Ÿåƒä¹é«˜ç§¯æœ¨ä¸€æ ·ï¼Œå¯ä»¥ä¸æ–­æ·»åŠ æ–°ç§¯æœ¨ï¼ˆæ‰©å±•ï¼‰ï¼Œä½†ä¸éœ€è¦æ‹†æ‰å·²æœ‰çš„ç§¯æœ¨ï¼ˆä¿®æ”¹ï¼‰

---

## 2. ğŸ”Œ æ’ä»¶åŒ–æ€è·¯


### 2.1 ä»€ä¹ˆæ˜¯æ’ä»¶åŒ–æ€è·¯


**ğŸ¯ åŸºæœ¬æ¦‚å¿µ**
æ’ä»¶åŒ–å°±æ˜¯æŠŠåŠŸèƒ½åšæˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„"æ’ä»¶"ï¼Œä¸»ç¨‹åºæä¾›ä¸€ä¸ªå¹³å°ï¼Œæ’ä»¶å¯ä»¥éšæ—¶"æ’å…¥"æˆ–"æ‹”å‡º"ã€‚

**ğŸŒ° ç°å®ä¾‹å­**
- **æµè§ˆå™¨æ‰©å±•**ï¼šChromeå¯ä»¥å®‰è£…å„ç§æ’ä»¶
- **IDEæ’ä»¶**ï¼šVSCodeå¯ä»¥å®‰è£…ä¸åŒåŠŸèƒ½çš„æ’ä»¶
- **WordPressæ’ä»¶**ï¼šç½‘ç«™å¯ä»¥å®‰è£…å„ç§åŠŸèƒ½æ’ä»¶

### 2.2 æ’ä»¶åŒ–æ¶æ„è®¾è®¡


**ğŸ—ï¸ æ’ä»¶åŒ–æ¶æ„å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ä¸»åº”ç”¨ç¨‹åº                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æ’ä»¶ç®¡ç†å™¨                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ’ä»¶A   â”‚   æ’ä»¶B   â”‚   æ’ä»¶C     â”‚
â”‚  (æ—¥å¿—)   â”‚  (ç¼“å­˜)   â”‚  (ç›‘æ§)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ æ’ä»¶æ¥å£è®¾è®¡**
```java
// å®šä¹‰æ’ä»¶æ¥å£
interface Plugin {
    String getName();           // æ’ä»¶åç§°
    String getVersion();        // æ’ä»¶ç‰ˆæœ¬
    void initialize();          // åˆå§‹åŒ–
    void execute();            // æ‰§è¡ŒåŠŸèƒ½
    void shutdown();           // å…³é—­æ¸…ç†
}

// æ’ä»¶ç®¡ç†å™¨
class PluginManager {
    private List<Plugin> plugins = new ArrayList<>();
    
    public void loadPlugin(Plugin plugin) {
        plugins.add(plugin);
        plugin.initialize();
        System.out.println("æ’ä»¶åŠ è½½æˆåŠŸ: " + plugin.getName());
    }
    
    public void executeAllPlugins() {
        for (Plugin plugin : plugins) {
            plugin.execute();
        }
    }
}
```

### 2.3 æ’ä»¶å‘ç°æœºåˆ¶


**ğŸ“ åŸºäºé…ç½®æ–‡ä»¶çš„æ’ä»¶å‘ç°**
```java
// plugins.properties
logging.plugin=com.example.LoggingPlugin
cache.plugin=com.example.CachePlugin
monitor.plugin=com.example.MonitorPlugin

// æ’ä»¶åŠ è½½å™¨
class PluginLoader {
    public void loadPluginsFromConfig(String configFile) {
        Properties props = loadProperties(configFile);
        
        for (String key : props.stringPropertyNames()) {
            String className = props.getProperty(key);
            try {
                Class<?> pluginClass = Class.forName(className);
                Plugin plugin = (Plugin) pluginClass.newInstance();
                PluginManager.getInstance().loadPlugin(plugin);
            } catch (Exception e) {
                System.err.println("æ’ä»¶åŠ è½½å¤±è´¥: " + className);
            }
        }
    }
}
```

> ğŸš€ **æ’ä»¶åŒ–ä¼˜åŠ¿**  
> - **çµæ´»æ€§**ï¼šå¯ä»¥éšæ—¶æ·»åŠ æˆ–ç§»é™¤åŠŸèƒ½
> - **è§£è€¦æ€§**ï¼šä¸»ç¨‹åºå’Œæ’ä»¶ç›¸äº’ç‹¬ç«‹
> - **å¯ç»´æŠ¤æ€§**ï¼šæ’ä»¶é—®é¢˜ä¸å½±å“ä¸»ç¨‹åº

---

## 3. âš™ï¸ é…ç½®åŒ–è®¾è®¡


### 3.1 ä»€ä¹ˆæ˜¯é…ç½®åŒ–è®¾è®¡


**ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ**
é…ç½®åŒ–è®¾è®¡å°±æ˜¯æŠŠç¨‹åºçš„è¡Œä¸ºé€šè¿‡é…ç½®æ–‡ä»¶æ¥æ§åˆ¶ï¼Œè€Œä¸æ˜¯å†™æ­»åœ¨ä»£ç é‡Œã€‚å°±åƒé¥æ§å™¨ï¼Œé€šè¿‡æŒ‰ä¸åŒæŒ‰é’®æ§åˆ¶ç”µè§†çš„ä¸åŒåŠŸèƒ½ã€‚

**ğŸ”¸ é…ç½®åŒ– vs ç¡¬ç¼–ç å¯¹æ¯”**
```java
// âŒ ç¡¬ç¼–ç æ–¹å¼
class DatabaseConnection {
    public void connect() {
        String url = "jdbc:mysql://localhost:3306/mydb";  // å†™æ­»äº†
        String username = "root";                         // å†™æ­»äº†
        String password = "123456";                       // å†™æ­»äº†
        // è¿æ¥æ•°æ®åº“...
    }
}

// âœ… é…ç½®åŒ–æ–¹å¼
class DatabaseConnection {
    private String url;
    private String username;
    private String password;
    
    public void loadConfig(String configFile) {
        Properties config = loadProperties(configFile);
        this.url = config.getProperty("db.url");
        this.username = config.getProperty("db.username");
        this.password = config.getProperty("db.password");
    }
    
    public void connect() {
        // ä½¿ç”¨é…ç½®çš„å‚æ•°è¿æ¥æ•°æ®åº“...
    }
}
```

### 3.2 é…ç½®åŒ–è®¾è®¡å±‚æ¬¡


**ğŸ“Š é…ç½®åŒ–å±‚æ¬¡è¡¨**
| é…ç½®ç±»å‹ | **åº”ç”¨åœºæ™¯** | **ç¤ºä¾‹** | **ä¿®æ”¹éš¾åº¦** |
|---------|------------|----------|-------------|
| ğŸ”¸ **ç¯å¢ƒé…ç½®** | `æ•°æ®åº“è¿æ¥ã€æœåŠ¡åœ°å€` | `database.url=localhost` | `ç®€å•` |
| ğŸ”¸ **ä¸šåŠ¡é…ç½®** | `ä¸šåŠ¡è§„åˆ™ã€è®¡ç®—å…¬å¼` | `tax.rate=0.13` | `ä¸­ç­‰` |
| ğŸ”¸ **ç•Œé¢é…ç½®** | `é¡µé¢å¸ƒå±€ã€ä¸»é¢˜é¢œè‰²` | `theme=dark` | `ç®€å•` |
| ğŸ”¸ **åŠŸèƒ½é…ç½®** | `åŠŸèƒ½å¼€å…³ã€æƒé™æ§åˆ¶` | `feature.payment=true` | `ä¸­ç­‰` |

### 3.3 é…ç½®ç®¡ç†ç³»ç»Ÿ


**ğŸ”§ é…ç½®ç®¡ç†å™¨è®¾è®¡**
```java
class ConfigManager {
    private Properties config = new Properties();
    private List<ConfigListener> listeners = new ArrayList<>();
    
    // åŠ è½½é…ç½®
    public void loadConfig(String configFile) {
        try {
            config.load(new FileInputStream(configFile));
            notifyListeners();
        } catch (IOException e) {
            System.err.println("é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥: " + configFile);
        }
    }
    
    // è·å–é…ç½®å€¼
    public String getString(String key, String defaultValue) {
        return config.getProperty(key, defaultValue);
    }
    
    public int getInt(String key, int defaultValue) {
        String value = config.getProperty(key);
        return value != null ? Integer.parseInt(value) : defaultValue;
    }
    
    // é…ç½®å˜æ›´é€šçŸ¥
    public void addListener(ConfigListener listener) {
        listeners.add(listener);
    }
    
    private void notifyListeners() {
        for (ConfigListener listener : listeners) {
            listener.onConfigChanged(config);
        }
    }
}

interface ConfigListener {
    void onConfigChanged(Properties newConfig);
}
```

### 3.4 åŠ¨æ€é…ç½®æ›´æ–°


**ğŸ”„ çƒ­æ›´æ–°æœºåˆ¶**
```java
class DynamicConfigManager {
    private Timer timer = new Timer();
    private long lastModified = 0;
    private String configFile;
    
    public void startWatching(String configFile) {
        this.configFile = configFile;
        
        // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡é…ç½®æ–‡ä»¶æ˜¯å¦ä¿®æ”¹
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                File file = new File(configFile);
                long currentModified = file.lastModified();
                
                if (currentModified > lastModified) {
                    System.out.println("æ£€æµ‹åˆ°é…ç½®å˜æ›´ï¼Œé‡æ–°åŠ è½½...");
                    loadConfig(configFile);
                    lastModified = currentModified;
                }
            }
        }, 0, 5000);
    }
}
```

> âš¡ **é…ç½®åŒ–å¥½å¤„**  
> - **çµæ´»æ€§**ï¼šä¸é‡å¯ç¨‹åºå°±èƒ½æ”¹å˜è¡Œä¸º
> - **ç¯å¢ƒé€‚åº”**ï¼šåŒä¸€å¥—ä»£ç é€‚åº”ä¸åŒç¯å¢ƒ
> - **ä¸šåŠ¡é€‚åº”**ï¼šä¸šåŠ¡è§„åˆ™å˜åŒ–ä¸éœ€è¦æ”¹ä»£ç 

---

## 4. ğŸ¯ æ‰©å±•ç‚¹è¯†åˆ«


### 4.1 ä»€ä¹ˆæ˜¯æ‰©å±•ç‚¹


**ğŸ¯ åŸºæœ¬æ¦‚å¿µ**
æ‰©å±•ç‚¹å°±æ˜¯ç³»ç»Ÿä¸­é¢„ç•™çš„"æ¥å£"ï¼Œå°±åƒç”µè„‘çš„USBæ¥å£ï¼Œå¯ä»¥æ’å…¥ä¸åŒçš„è®¾å¤‡ã€‚åœ¨è½¯ä»¶ä¸­ï¼Œæ‰©å±•ç‚¹æ˜¯é‚£äº›å°†æ¥å¯èƒ½éœ€è¦å˜åŒ–æˆ–æ·»åŠ åŠŸèƒ½çš„åœ°æ–¹ã€‚

**ğŸ” æ‰©å±•ç‚¹è¯†åˆ«åŸåˆ™**
```
å˜åŒ–ç‚¹ = æ‰©å±•ç‚¹
ç»å¸¸ä¿®æ”¹çš„åœ°æ–¹ = éœ€è¦æ‰©å±•ç‚¹çš„åœ°æ–¹
```

### 4.2 å¸¸è§æ‰©å±•ç‚¹ç±»å‹


**ğŸ“‹ æ‰©å±•ç‚¹åˆ†ç±»è¡¨**
| æ‰©å±•ç‚¹ç±»å‹ | **é€‚ç”¨åœºæ™¯** | **å®ç°æ–¹å¼** | **ç¤ºä¾‹** |
|----------|------------|-------------|---------|
| ğŸ”¸ **ä¸šåŠ¡æµç¨‹æ‰©å±•** | `å·¥ä½œæµã€å®¡æ‰¹æµç¨‹` | `Hooké’©å­ã€äº‹ä»¶` | `è®¢å•å¤„ç†æµç¨‹` |
| ğŸ”¸ **æ•°æ®å¤„ç†æ‰©å±•** | `æ•°æ®è½¬æ¢ã€éªŒè¯` | `å¤„ç†å™¨é“¾ã€è¿‡æ»¤å™¨` | `æ–‡ä»¶æ ¼å¼è½¬æ¢` |
| ğŸ”¸ **ç•Œé¢æ‰©å±•** | `èœå•ã€å·¥å…·æ ` | `æ’ä»¶æ¥å£` | `ç¼–è¾‘å™¨åŠŸèƒ½æ‰©å±•` |
| ğŸ”¸ **ç®—æ³•æ‰©å±•** | `è®¡ç®—ã€æ’åº` | `ç­–ç•¥æ¨¡å¼` | `æ¨èç®—æ³•åˆ‡æ¢` |

### 4.3 æ‰©å±•ç‚¹è¯†åˆ«æ–¹æ³•


**ğŸ”¸ éœ€æ±‚åˆ†ææ³•**
```java
// è®¢å•å¤„ç†ç³»ç»Ÿçš„æ‰©å±•ç‚¹è¯†åˆ«
class OrderProcessor {
    
    // æ‰©å±•ç‚¹1ï¼šè®¢å•éªŒè¯è§„åˆ™å¯èƒ½å˜åŒ–
    public boolean validateOrder(Order order) {
        // ç°åœ¨åªéªŒè¯é‡‘é¢ï¼Œå°†æ¥å¯èƒ½éªŒè¯åº“å­˜ã€ç”¨æˆ·ä¿¡ç”¨ç­‰
        return order.getAmount() > 0;
    }
    
    // æ‰©å±•ç‚¹2ï¼šæ”¯ä»˜æ–¹å¼ä¼šå¢åŠ 
    public void processPayment(Order order) {
        // ç°åœ¨åªæ”¯æŒä¿¡ç”¨å¡ï¼Œå°†æ¥å¯èƒ½æ”¯æŒæ”¯ä»˜å®ã€å¾®ä¿¡ç­‰
        if (order.getPaymentType().equals("CREDIT_CARD")) {
            // å¤„ç†ä¿¡ç”¨å¡æ”¯ä»˜
        }
    }
    
    // æ‰©å±•ç‚¹3ï¼šé€šçŸ¥æ–¹å¼å¯èƒ½å¤šæ ·åŒ–
    public void notifyCustomer(Order order) {
        // ç°åœ¨åªå‘é‚®ä»¶ï¼Œå°†æ¥å¯èƒ½å‘çŸ­ä¿¡ã€æ¨é€ç­‰
        sendEmail(order.getCustomerEmail(), "è®¢å•ç¡®è®¤");
    }
}
```

**ğŸ”¸ å˜åŒ–é¢‘ç‡åˆ†ææ³•**
```java
// åˆ†æå“ªäº›åœ°æ–¹ç»å¸¸éœ€è¦ä¿®æ”¹
class ReportGenerator {
    
    // é«˜é¢‘å˜åŒ–ç‚¹ï¼šæŠ¥è¡¨æ ¼å¼ç»å¸¸å˜
    public void generateReport(ReportType type) {
        if (type == ReportType.PDF) {
            // PDFæ ¼å¼
        } else if (type == ReportType.EXCEL) {
            // Excelæ ¼å¼  
        } else if (type == ReportType.CSV) {  // ç»å¸¸æ·»åŠ æ–°æ ¼å¼
            // CSVæ ¼å¼
        }
        // è¿™é‡Œæ˜¯æ˜æ˜¾çš„æ‰©å±•ç‚¹ï¼
    }
    
    // ä½é¢‘å˜åŒ–ç‚¹ï¼šæ•°æ®æºç›¸å¯¹ç¨³å®š
    public List<Data> fetchData() {
        // ä»æ•°æ®åº“è·å–æ•°æ®ï¼Œå˜åŒ–è¾ƒå°‘
        return database.query("SELECT * FROM reports");
    }
}
```

### 4.4 æ‰©å±•ç‚¹è®¾è®¡æ¨¡å¼


**ğŸ”§ æ‰©å±•ç‚¹é‡æ„ç¤ºä¾‹**
```java
// é‡æ„å‰ï¼šç¡¬ç¼–ç çš„æ‰©å±•ç‚¹
class OrderProcessor {
    public void processOrder(Order order) {
        // éªŒè¯è®¢å•
        if (order.getAmount() <= 0) {
            throw new IllegalArgumentException("é‡‘é¢æ— æ•ˆ");
        }
        
        // å¤„ç†æ”¯ä»˜
        if (order.getPaymentType().equals("CREDIT_CARD")) {
            processCreditCard(order);
        } else if (order.getPaymentType().equals("PAYPAL")) {
            processPayPal(order);
        }
        
        // å‘é€é€šçŸ¥
        sendEmail(order.getCustomerEmail(), "è®¢å•ç¡®è®¤");
    }
}

// é‡æ„åï¼šä½¿ç”¨æ‰©å±•ç‚¹
class OrderProcessor {
    private List<OrderValidator> validators = new ArrayList<>();
    private Map<String, PaymentProcessor> paymentProcessors = new HashMap<>();
    private List<NotificationService> notificationServices = new ArrayList<>();
    
    // æ‰©å±•ç‚¹ï¼šæ·»åŠ éªŒè¯å™¨
    public void addValidator(OrderValidator validator) {
        validators.add(validator);
    }
    
    // æ‰©å±•ç‚¹ï¼šæ·»åŠ æ”¯ä»˜å¤„ç†å™¨
    public void addPaymentProcessor(String type, PaymentProcessor processor) {
        paymentProcessors.put(type, processor);
    }
    
    // æ‰©å±•ç‚¹ï¼šæ·»åŠ é€šçŸ¥æœåŠ¡
    public void addNotificationService(NotificationService service) {
        notificationServices.add(service);
    }
    
    public void processOrder(Order order) {
        // ä½¿ç”¨æ‰€æœ‰éªŒè¯å™¨éªŒè¯
        for (OrderValidator validator : validators) {
            validator.validate(order);
        }
        
        // ä½¿ç”¨å¯¹åº”çš„æ”¯ä»˜å¤„ç†å™¨
        PaymentProcessor processor = paymentProcessors.get(order.getPaymentType());
        processor.process(order);
        
        // ä½¿ç”¨æ‰€æœ‰é€šçŸ¥æœåŠ¡
        for (NotificationService service : notificationServices) {
            service.notify(order);
        }
    }
}
```

> ğŸ§  **æ‰©å±•ç‚¹è¯†åˆ«æŠ€å·§**  
> - **çœ‹éœ€æ±‚å˜åŒ–**ï¼šç»å¸¸å˜çš„åœ°æ–¹å°±æ˜¯æ‰©å±•ç‚¹
> - **çœ‹if-else**ï¼šå¾ˆå¤šif-elseé€šå¸¸æ„å‘³ç€éœ€è¦æ‰©å±•ç‚¹
> - **çœ‹æœªæ¥è§„åˆ’**ï¼šé¢„æœŸä¼šå¢åŠ çš„åŠŸèƒ½ç‚¹

---

## 5. ğŸ”— æ‰©å±•æœºåˆ¶è®¾è®¡


### 5.1 Hookæœºåˆ¶å®ç°


**ğŸ¯ ä»€ä¹ˆæ˜¯Hookæœºåˆ¶**
Hookæœºåˆ¶å°±åƒåœ¨ä»£ç é‡Œæ”¾"é’©å­"ï¼Œå…è®¸åœ¨ç‰¹å®šæ—¶åˆ»"æŒ‚è½½"é¢å¤–çš„åŠŸèƒ½ã€‚å°±åƒè¡£æœä¸Šçš„é’©å­ï¼Œå¯ä»¥æŒ‚ä¸åŒçš„è£…é¥°å“ã€‚

**ğŸ”§ Hookæœºåˆ¶åŸºç¡€å®ç°**
```java
// Hookæ¥å£å®šä¹‰
interface Hook {
    void execute(Object context);
}

// Hookç®¡ç†å™¨
class HookManager {
    private Map<String, List<Hook>> hooks = new HashMap<>();
    
    // æ³¨å†ŒHook
    public void addHook(String point, Hook hook) {
        hooks.computeIfAbsent(point, k -> new ArrayList<>()).add(hook);
    }
    
    // æ‰§è¡ŒHook
    public void executeHooks(String point, Object context) {
        List<Hook> hookList = hooks.get(point);
        if (hookList != null) {
            for (Hook hook : hookList) {
                try {
                    hook.execute(context);
                } catch (Exception e) {
                    System.err.println("Hookæ‰§è¡Œå¤±è´¥: " + e.getMessage());
                }
            }
        }
    }
}

// ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨Hook
class UserService {
    private HookManager hookManager = new HookManager();
    
    public void createUser(User user) {
        // ç”¨æˆ·åˆ›å»ºå‰çš„Hookç‚¹
        hookManager.executeHooks("before_user_create", user);
        
        // åˆ›å»ºç”¨æˆ·çš„æ ¸å¿ƒé€»è¾‘
        database.save(user);
        
        // ç”¨æˆ·åˆ›å»ºåçš„Hookç‚¹
        hookManager.executeHooks("after_user_create", user);
    }
}

// Hookä½¿ç”¨ç¤ºä¾‹
class EmailNotificationHook implements Hook {
    public void execute(Object context) {
        User user = (User) context;
        emailService.sendWelcomeEmail(user.getEmail());
    }
}

class LoggingHook implements Hook {
    public void execute(Object context) {
        User user = (User) context;
        logger.info("ç”¨æˆ·åˆ›å»º: " + user.getName());
    }
}
```

### 5.2 äº‹ä»¶æœºåˆ¶è®¾è®¡


**ğŸ“¡ äº‹ä»¶é©±åŠ¨æ¶æ„**
```java
// äº‹ä»¶åŸºç±»
abstract class Event {
    private long timestamp;
    private String source;
    
    public Event(String source) {
        this.source = source;
        this.timestamp = System.currentTimeMillis();
    }
    
    // getteræ–¹æ³•...
}

// å…·ä½“äº‹ä»¶
class UserCreatedEvent extends Event {
    private User user;
    
    public UserCreatedEvent(String source, User user) {
        super(source);
        this.user = user;
    }
    
    public User getUser() { return user; }
}

// äº‹ä»¶ç›‘å¬å™¨
interface EventListener<T extends Event> {
    void onEvent(T event);
}

// äº‹ä»¶ç®¡ç†å™¨
class EventManager {
    private Map<Class<? extends Event>, List<EventListener>> listeners = new HashMap<>();
    
    // æ³¨å†Œç›‘å¬å™¨
    public <T extends Event> void addListener(Class<T> eventType, EventListener<T> listener) {
        listeners.computeIfAbsent(eventType, k -> new ArrayList<>()).add(listener);
    }
    
    // å‘å¸ƒäº‹ä»¶
    public void publishEvent(Event event) {
        List<EventListener> eventListeners = listeners.get(event.getClass());
        if (eventListeners != null) {
            for (EventListener listener : eventListeners) {
                listener.onEvent(event);
            }
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
class UserService {
    private EventManager eventManager = new EventManager();
    
    public void createUser(User user) {
        // åˆ›å»ºç”¨æˆ·
        database.save(user);
        
        // å‘å¸ƒäº‹ä»¶
        eventManager.publishEvent(new UserCreatedEvent("UserService", user));
    }
}

// äº‹ä»¶ç›‘å¬å™¨å®ç°
class EmailNotificationListener implements EventListener<UserCreatedEvent> {
    public void onEvent(UserCreatedEvent event) {
        emailService.sendWelcomeEmail(event.getUser().getEmail());
    }
}
```

### 5.3 ä¸­é—´ä»¶æ¨¡å¼


**ğŸ”„ ä¸­é—´ä»¶é“¾å®ç°**
```java
// ä¸­é—´ä»¶æ¥å£
interface Middleware {
    void handle(Request request, Response response, MiddlewareChain chain);
}

// ä¸­é—´ä»¶é“¾
class MiddlewareChain {
    private List<Middleware> middlewares = new ArrayList<>();
    private int index = 0;
    
    public void addMiddleware(Middleware middleware) {
        middlewares.add(middleware);
    }
    
    public void next(Request request, Response response) {
        if (index < middlewares.size()) {
            Middleware middleware = middlewares.get(index++);
            middleware.handle(request, response, this);
        }
    }
}

// ä¸­é—´ä»¶å®ç°ç¤ºä¾‹
class LoggingMiddleware implements Middleware {
    public void handle(Request request, Response response, MiddlewareChain chain) {
        System.out.println("è¯·æ±‚å¼€å§‹: " + request.getPath());
        chain.next(request, response);  // ç»§ç»­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶
        System.out.println("è¯·æ±‚ç»“æŸ: " + request.getPath());
    }
}

class AuthenticationMiddleware implements Middleware {
    public void handle(Request request, Response response, MiddlewareChain chain) {
        if (!isAuthenticated(request)) {
            response.setStatus(401);
            return;  // ä¸­æ–­é“¾æ¡
        }
        chain.next(request, response);
    }
}
```

> ğŸ”— **æ‰©å±•æœºåˆ¶å¯¹æ¯”**  
> - **Hookæœºåˆ¶**ï¼šç®€å•ç›´æ¥ï¼Œé€‚åˆåŒæ­¥æ‰©å±•
> - **äº‹ä»¶æœºåˆ¶**ï¼šè§£è€¦æ€§å¥½ï¼Œé€‚åˆå¼‚æ­¥å¤„ç†  
> - **ä¸­é—´ä»¶æ¨¡å¼**ï¼šé“¾å¼å¤„ç†ï¼Œé€‚åˆè¯·æ±‚å¤„ç†ç®¡é“

---

## 6. ğŸ§© æ’ä»¶åŒ–é…ç½®åŒ–å®ç°


### 6.1 æ’ä»¶åŒ–å®ç°æ–¹æ¡ˆ


**ğŸ”Œ å®Œæ•´æ’ä»¶ç³»ç»Ÿæ¶æ„**
```java
// æ’ä»¶æ¥å£å®šä¹‰
interface Plugin {
    PluginInfo getInfo();
    void initialize(PluginContext context);
    void start();
    void stop();
    void destroy();
}

// æ’ä»¶ä¿¡æ¯
class PluginInfo {
    private String name;
    private String version;
    private String description;
    private List<String> dependencies;
    
    // æ„é€ å‡½æ•°å’Œgetteræ–¹æ³•...
}

// æ’ä»¶ä¸Šä¸‹æ–‡
class PluginContext {
    private Map<String, Object> attributes = new HashMap<>();
    private ServiceRegistry serviceRegistry;
    
    public void setAttribute(String key, Object value) {
        attributes.put(key, value);
    }
    
    public Object getAttribute(String key) {
        return attributes.get(key);
    }
    
    public <T> T getService(Class<T> serviceType) {
        return serviceRegistry.getService(serviceType);
    }
}

// æ’ä»¶ç®¡ç†å™¨
class PluginManager {
    private Map<String, Plugin> plugins = new HashMap<>();
    private Map<String, PluginStatus> pluginStatus = new HashMap<>();
    private ServiceRegistry serviceRegistry = new ServiceRegistry();
    
    // åŠ è½½æ’ä»¶
    public void loadPlugin(String pluginPath) {
        try {
            // ä»JARæ–‡ä»¶åŠ è½½æ’ä»¶ç±»
            URLClassLoader loader = new URLClassLoader(new URL[]{new File(pluginPath).toURI().toURL()});
            
            // è¯»å–æ’ä»¶é…ç½®
            PluginConfig config = loadPluginConfig(loader);
            
            // å®ä¾‹åŒ–æ’ä»¶
            Class<?> pluginClass = loader.loadClass(config.getMainClass());
            Plugin plugin = (Plugin) pluginClass.newInstance();
            
            // æ£€æŸ¥ä¾èµ–
            if (checkDependencies(plugin.getInfo().getDependencies())) {
                plugins.put(plugin.getInfo().getName(), plugin);
                pluginStatus.put(plugin.getInfo().getName(), PluginStatus.LOADED);
                
                // åˆå§‹åŒ–æ’ä»¶
                PluginContext context = new PluginContext();
                context.setServiceRegistry(serviceRegistry);
                plugin.initialize(context);
                
                System.out.println("æ’ä»¶åŠ è½½æˆåŠŸ: " + plugin.getInfo().getName());
            }
        } catch (Exception e) {
            System.err.println("æ’ä»¶åŠ è½½å¤±è´¥: " + e.getMessage());
        }
    }
    
    // å¯åŠ¨æ’ä»¶
    public void startPlugin(String pluginName) {
        Plugin plugin = plugins.get(pluginName);
        if (plugin != null && pluginStatus.get(pluginName) == PluginStatus.LOADED) {
            plugin.start();
            pluginStatus.put(pluginName, PluginStatus.STARTED);
        }
    }
    
    // åœæ­¢æ’ä»¶
    public void stopPlugin(String pluginName) {
        Plugin plugin = plugins.get(pluginName);
        if (plugin != null && pluginStatus.get(pluginName) == PluginStatus.STARTED) {
            plugin.stop();
            pluginStatus.put(pluginName, PluginStatus.STOPPED);
        }
    }
}

enum PluginStatus {
    LOADED, STARTED, STOPPED, ERROR
}
```

### 6.2 é…ç½®åŒ–å®ç°æ–¹æ¡ˆ


**âš™ï¸ å¤šå±‚é…ç½®ç³»ç»Ÿ**
```java
// é…ç½®æºæ¥å£
interface ConfigSource {
    Properties loadConfig();
    boolean isChanged();
}

// æ–‡ä»¶é…ç½®æº
class FileConfigSource implements ConfigSource {
    private String filePath;
    private long lastModified = 0;
    
    public FileConfigSource(String filePath) {
        this.filePath = filePath;
    }
    
    public Properties loadConfig() {
        Properties props = new Properties();
        try {
            props.load(new FileInputStream(filePath));
            lastModified = new File(filePath).lastModified();
        } catch (IOException e) {
            System.err.println("é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥: " + filePath);
        }
        return props;
    }
    
    public boolean isChanged() {
        return new File(filePath).lastModified() > lastModified;
    }
}

// æ•°æ®åº“é…ç½®æº
class DatabaseConfigSource implements ConfigSource {
    private String tableName;
    
    public DatabaseConfigSource(String tableName) {
        this.tableName = tableName;
    }
    
    public Properties loadConfig() {
        Properties props = new Properties();
        // ä»æ•°æ®åº“è¯»å–é…ç½®
        String sql = "SELECT config_key, config_value FROM " + tableName;
        // æ‰§è¡ŒSQLå¹¶å¡«å……Properties...
        return props;
    }
    
    public boolean isChanged() {
        // æ£€æŸ¥æ•°æ®åº“é…ç½®æ˜¯å¦æœ‰æ›´æ–°
        return false;
    }
}

// é…ç½®ç®¡ç†å™¨
class ConfigManager {
    private List<ConfigSource> sources = new ArrayList<>();
    private Properties mergedConfig = new Properties();
    private List<ConfigChangeListener> listeners = new ArrayList<>();
    
    public void addConfigSource(ConfigSource source) {
        sources.add(source);
        refreshConfig();
    }
    
    public void refreshConfig() {
        Properties newConfig = new Properties();
        
        // æŒ‰ä¼˜å…ˆçº§åˆå¹¶æ‰€æœ‰é…ç½®æº
        for (ConfigSource source : sources) {
            Properties sourceConfig = source.loadConfig();
            newConfig.putAll(sourceConfig);
        }
        
        // æ£€æŸ¥é…ç½®æ˜¯å¦æœ‰å˜åŒ–
        if (!newConfig.equals(mergedConfig)) {
            Properties oldConfig = new Properties();
            oldConfig.putAll(mergedConfig);
            
            mergedConfig = newConfig;
            
            // é€šçŸ¥ç›‘å¬å™¨
            for (ConfigChangeListener listener : listeners) {
                listener.onConfigChanged(oldConfig, newConfig);
            }
        }
    }
    
    public String getString(String key, String defaultValue) {
        return mergedConfig.getProperty(key, defaultValue);
    }
    
    public int getInt(String key, int defaultValue) {
        String value = mergedConfig.getProperty(key);
        return value != null ? Integer.parseInt(value) : defaultValue;
    }
}

interface ConfigChangeListener {
    void onConfigChanged(Properties oldConfig, Properties newConfig);
}
```

### 6.3 æ¥å£æ‰©å±•å®ç°


**ğŸ”— æ‰©å±•ç‚¹æ¥å£è®¾è®¡**
```java
// æ‰©å±•ç‚¹æ³¨å†Œä¸­å¿ƒ
class ExtensionRegistry {
    private Map<Class<?>, List<Object>> extensions = new HashMap<>();
    
    // æ³¨å†Œæ‰©å±•
    public <T> void registerExtension(Class<T> extensionPoint, T implementation) {
        extensions.computeIfAbsent(extensionPoint, k -> new ArrayList<>()).add(implementation);
    }
    
    // è·å–æ‰€æœ‰æ‰©å±•å®ç°
    public <T> List<T> getExtensions(Class<T> extensionPoint) {
        List<Object> impls = extensions.get(extensionPoint);
        if (impls == null) return new ArrayList<>();
        
        List<T> result = new ArrayList<>();
        for (Object impl : impls) {
            result.add((T) impl);
        }
        return result;
    }
    
    // è·å–å•ä¸ªæ‰©å±•å®ç°
    public <T> T getExtension(Class<T> extensionPoint) {
        List<T> extensions = getExtensions(extensionPoint);
        return extensions.isEmpty() ? null : extensions.get(0);
    }
}

// æ‰©å±•ç‚¹ä½¿ç”¨ç¤ºä¾‹
interface DataProcessor {
    boolean canProcess(String dataType);
    Object process(Object data);
}

class DataProcessingService {
    private ExtensionRegistry registry = new ExtensionRegistry();
    
    public Object processData(String dataType, Object data) {
        List<DataProcessor> processors = registry.getExtensions(DataProcessor.class);
        
        for (DataProcessor processor : processors) {
            if (processor.canProcess(dataType)) {
                return processor.process(data);
            }
        }
        
        throw new UnsupportedOperationException("ä¸æ”¯æŒçš„æ•°æ®ç±»å‹: " + dataType);
    }
}

// æ‰©å±•å®ç°
class JsonDataProcessor implements DataProcessor {
    public boolean canProcess(String dataType) {
        return "json".equalsIgnoreCase(dataType);
    }
    
    public Object process(Object data) {
        // JSONæ•°æ®å¤„ç†é€»è¾‘
        return parseJson(data.toString());
    }
}

class XmlDataProcessor implements DataProcessor {
    public boolean canProcess(String dataType) {
        return "xml".equalsIgnoreCase(dataType);
    }
    
    public Object process(Object data) {
        // XMLæ•°æ®å¤„ç†é€»è¾‘
        return parseXml(data.toString());
    }
}
```

> ğŸ§© **æ’ä»¶åŒ–é…ç½®åŒ–æ ¸å¿ƒ**  
> - **æ’ä»¶åŒ–**ï¼šåŠŸèƒ½æ¨¡å—åŒ–ï¼ŒåŠ¨æ€åŠ è½½
> - **é…ç½®åŒ–**ï¼šè¡Œä¸ºå‚æ•°åŒ–ï¼Œè¿è¡Œæ—¶è°ƒæ•´
> - **æ¥å£æ‰©å±•**ï¼šèƒ½åŠ›æ‰©å±•åŒ–ï¼Œå¼€æ”¾å¼æ¶æ„

---

## 7. ğŸ—ï¸ æ‰©å±•æ€§è®¾è®¡å®è·µ


### 7.1 è§£è€¦è®¾è®¡åŸåˆ™


**ğŸ”— ä»€ä¹ˆæ˜¯è§£è€¦**
è§£è€¦å°±æ˜¯å‡å°‘ä»£ç ä¹‹é—´çš„ç›¸äº’ä¾èµ–ï¼Œè®©å„ä¸ªéƒ¨åˆ†å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚å°±åƒç§¯æœ¨ä¸€æ ·ï¼Œæ¯å—ç§¯æœ¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥è‡ªç”±ç»„åˆã€‚

**âŒ ç´§è€¦åˆçš„é—®é¢˜**
```java
// åä¾‹å­ï¼šç´§è€¦åˆè®¾è®¡
class OrderService {
    private EmailService emailService = new EmailService();  // ç›´æ¥ä¾èµ–
    private SmsService smsService = new SmsService();        // ç›´æ¥ä¾èµ–
    private DatabaseService dbService = new DatabaseService(); // ç›´æ¥ä¾èµ–
    
    public void createOrder(Order order) {
        // ä¿å­˜è®¢å•
        dbService.save(order);
        
        // å‘é€é€šçŸ¥
        emailService.sendEmail(order.getCustomerEmail(), "è®¢å•ç¡®è®¤");
        smsService.sendSms(order.getCustomerPhone(), "è®¢å•ç¡®è®¤");
    }
}
// é—®é¢˜ï¼šä¿®æ”¹ä»»ä½•ä¸€ä¸ªServiceéƒ½å¯èƒ½å½±å“OrderService
```

**âœ… è§£è€¦è®¾è®¡**
```java
// å¥½ä¾‹å­ï¼šè§£è€¦è®¾è®¡
interface NotificationService {
    void notify(String recipient, String message);
}

interface StorageService {
    void save(Object data);
}

class OrderService {
    private List<NotificationService> notificationServices;
    private StorageService storageService;
    
    // ä¾èµ–æ³¨å…¥
    public OrderService(StorageService storageService, List<NotificationService> notificationServices) {
        this.storageService = storageService;
        this.notificationServices = notificationServices;
    }
    
    public void createOrder(Order order) {
        // ä¿å­˜è®¢å•
        storageService.save(order);
        
        // å‘é€æ‰€æœ‰ç±»å‹çš„é€šçŸ¥
        for (NotificationService service : notificationServices) {
            service.notify(order.getCustomerContact(), "è®¢å•ç¡®è®¤");
        }
    }
}

// å…·ä½“å®ç°å¯ä»¥éšæ„æ›¿æ¢
class EmailNotificationService implements NotificationService {
    public void notify(String recipient, String message) {
        // å‘é€é‚®ä»¶
    }
}

class SmsNotificationService implements NotificationService {
    public void notify(String recipient, String message) {
        // å‘é€çŸ­ä¿¡
    }
}
```

### 7.2 åˆ†å±‚æ¶æ„è®¾è®¡


**ğŸ—ï¸ åˆ†å±‚æ¶æ„å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        è¡¨ç°å±‚ (Controller)        â”‚  â† å¤„ç†HTTPè¯·æ±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ä¸šåŠ¡å±‚ (Service)          â”‚  â† ä¸šåŠ¡é€»è¾‘å¤„ç†
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        æ•°æ®å±‚ (Repository)       â”‚  â† æ•°æ®è®¿é—®æŠ½è±¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        åŸºç¡€è®¾æ–½å±‚ (Infrastructure) â”‚  â† æŠ€æœ¯å®ç°ç»†èŠ‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ åˆ†å±‚å®ç°ç¤ºä¾‹**
```java
// è¡¨ç°å±‚
@RestController
public class UserController {
    private UserService userService;
    
    @PostMapping("/users")
    public ResponseEntity createUser(@RequestBody UserDto userDto) {
        User user = userService.createUser(userDto);
        return ResponseEntity.ok(user);
    }
}

// ä¸šåŠ¡å±‚
@Service
public class UserService {
    private UserRepository userRepository;
    private NotificationService notificationService;
    
    public User createUser(UserDto userDto) {
        // ä¸šåŠ¡é€»è¾‘ï¼šéªŒè¯ã€è½¬æ¢ã€ä¿å­˜
        User user = convertToUser(userDto);
        validateUser(user);
        
        User savedUser = userRepository.save(user);
        
        // å‘é€æ¬¢è¿é€šçŸ¥
        notificationService.sendWelcomeNotification(savedUser);
        
        return savedUser;
    }
}

// æ•°æ®å±‚æŠ½è±¡
public interface UserRepository {
    User save(User user);
    User findById(Long id);
    List<User> findAll();
}

// åŸºç¡€è®¾æ–½å±‚å®ç°
@Repository
public class JpaUserRepository implements UserRepository {
    @PersistenceContext
    private EntityManager entityManager;
    
    public User save(User user) {
        if (user.getId() == null) {
            entityManager.persist(user);
        } else {
            entityManager.merge(user);
        }
        return user;
    }
}
```

### 7.3 å¯æ‰©å±•æ¶æ„æ¨¡å¼


**ğŸ”„ å‘½ä»¤æ¨¡å¼æ‰©å±•**
```java
// å‘½ä»¤æ¥å£
interface Command {
    void execute();
    void undo();
}

// å‘½ä»¤è°ƒåº¦å™¨
class CommandDispatcher {
    private Map<String, Class<? extends Command>> commandRegistry = new HashMap<>();
    private Stack<Command> history = new Stack<>();
    
    // æ³¨å†Œå‘½ä»¤
    public void registerCommand(String commandName, Class<? extends Command> commandClass) {
        commandRegistry.put(commandName, commandClass);
    }
    
    // æ‰§è¡Œå‘½ä»¤
    public void executeCommand(String commandName, Map<String, Object> params) {
        try {
            Class<? extends Command> commandClass = commandRegistry.get(commandName);
            if (commandClass != null) {
                Command command = commandClass.newInstance();
                // è®¾ç½®å‚æ•°ï¼ˆçœç•¥å‚æ•°æ³¨å…¥é€»è¾‘ï¼‰
                command.execute();
                history.push(command);
            }
        } catch (Exception e) {
            System.err.println("å‘½ä»¤æ‰§è¡Œå¤±è´¥: " + commandName);
        }
    }
    
    // æ’¤é”€å‘½ä»¤
    public void undo() {
        if (!history.isEmpty()) {
            Command lastCommand = history.pop();
            lastCommand.undo();
        }
    }
}

// å…·ä½“å‘½ä»¤å®ç°
class CreateUserCommand implements Command {
    private User user;
    private UserRepository repository;
    
    public void execute() {
        user = repository.save(user);
        System.out.println("ç”¨æˆ·åˆ›å»ºæˆåŠŸ: " + user.getId());
    }
    
    public void undo() {
        repository.delete(user.getId());
        System.out.println("ç”¨æˆ·åˆ›å»ºå·²æ’¤é”€: " + user.getId());
    }
}
```

### 7.4 å®é™…é¡¹ç›®æ‰©å±•å®è·µ


**ğŸ“Š ç”µå•†ç³»ç»Ÿæ‰©å±•è®¾è®¡**
```java
// è®¢å•å¤„ç†æ‰©å±•ç‚¹è®¾è®¡
class OrderProcessingPipeline {
    private List<OrderProcessor> processors = new ArrayList<>();
    
    public void addProcessor(OrderProcessor processor) {
        processors.add(processor);
    }
    
    public OrderResult processOrder(Order order) {
        OrderContext context = new OrderContext(order);
        
        for (OrderProcessor processor : processors) {
            ProcessResult result = processor.process(context);
            if (result.isStop()) {
                break;
            }
        }
        
        return context.getResult();
    }
}

// è®¢å•å¤„ç†å™¨æ¥å£
interface OrderProcessor {
    ProcessResult process(OrderContext context);
    int getOrder();  // å¤„ç†é¡ºåº
}

// å…·ä½“å¤„ç†å™¨å®ç°
class InventoryCheckProcessor implements OrderProcessor {
    public ProcessResult process(OrderContext context) {
        Order order = context.getOrder();
        // æ£€æŸ¥åº“å­˜é€»è¾‘
        if (inventoryService.checkStock(order)) {
            return ProcessResult.CONTINUE;
        } else {
            context.addError("åº“å­˜ä¸è¶³");
            return ProcessResult.STOP;
        }
    }
    
    public int getOrder() { return 100; }
}

class PaymentProcessor implements OrderProcessor {
    public ProcessResult process(OrderContext context) {
        Order order = context.getOrder();
        // æ”¯ä»˜å¤„ç†é€»è¾‘
        PaymentResult result = paymentService.processPayment(order);
        context.setPaymentResult(result);
        return ProcessResult.CONTINUE;
    }
    
    public int getOrder() { return 200; }
}

class NotificationProcessor implements OrderProcessor {
    public ProcessResult process(OrderContext context) {
        Order order = context.getOrder();
        // é€šçŸ¥å¤„ç†é€»è¾‘
        notificationService.notifyOrderCreated(order);
        return ProcessResult.CONTINUE;
    }
    
    public int getOrder() { return 300; }
}
```

> ğŸ—ï¸ **æ‰©å±•æ€§è®¾è®¡è¦ç‚¹**  
> - **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
> - **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡è€Œä¸æ˜¯å…·ä½“å®ç°
> - **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
> - **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šé€šè¿‡ç»„åˆå®ç°æ‰©å±•

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 é¢å‘æ‰©å±•è®¾è®¡æ ¸å¿ƒæ€æƒ³


**ğŸ¯ è®¾è®¡åŸåˆ™æ€»ç»“**
```
å¼€é—­åŸåˆ™ â†’ æ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å…³é—­
æ’ä»¶åŒ–æ€è·¯ â†’ åŠŸèƒ½æ¨¡å—åŒ–ï¼ŒåŠ¨æ€åŠ è½½
é…ç½®åŒ–è®¾è®¡ â†’ è¡Œä¸ºå‚æ•°åŒ–ï¼Œè¿è¡Œæ—¶è°ƒæ•´
æ‰©å±•ç‚¹è¯†åˆ« â†’ å˜åŒ–ç‚¹å°±æ˜¯æ‰©å±•ç‚¹
æ‰©å±•æœºåˆ¶ â†’ Hookã€äº‹ä»¶ã€ä¸­é—´ä»¶
è§£è€¦è®¾è®¡ â†’ å‡å°‘ä¾èµ–ï¼Œç‹¬ç«‹å˜åŒ–
```

### 8.2 å¿…é¡»æŒæ¡çš„å…³é”®æ¦‚å¿µ


**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µç†è§£**
- **å¼€é—­åŸåˆ™**ï¼šç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬åŸåˆ™ï¼Œç¡®ä¿å¯æ‰©å±•æ€§
- **æ’ä»¶åŒ–**ï¼šåŠŸèƒ½æ¨¡å—åŒ–ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å’Œå¸è½½
- **é…ç½®åŒ–**ï¼šé€šè¿‡é…ç½®æ§åˆ¶ç¨‹åºè¡Œä¸ºï¼Œè€Œéç¡¬ç¼–ç 
- **æ‰©å±•ç‚¹**ï¼šç³»ç»Ÿä¸­é¢„ç•™çš„æ‰©å±•æ¥å£å’Œå˜åŒ–ç‚¹
- **Hookæœºåˆ¶**ï¼šåœ¨å…³é”®ç‚¹æ’å…¥è‡ªå®šä¹‰é€»è¾‘çš„æœºåˆ¶
- **äº‹ä»¶é©±åŠ¨**ï¼šé€šè¿‡äº‹ä»¶è§£è€¦ç³»ç»Ÿç»„ä»¶
- **è§£è€¦è®¾è®¡**ï¼šå‡å°‘ç»„ä»¶é—´ä¾èµ–ï¼Œæé«˜ç‹¬ç«‹æ€§

### 8.3 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ“Š æŠ€æœ¯é€‰æ‹©å¯¹æ¯”**
| æ‰©å±•æ–¹å¼ | **é€‚ç”¨åœºæ™¯** | **å¤æ‚åº¦** | **çµæ´»æ€§** | **æ€§èƒ½å½±å“** |
|---------|------------|----------|----------|-------------|
| ğŸ”¸ **Hookæœºåˆ¶** | `ç®€å•æ‰©å±•ç‚¹` | `ä½` | `ä¸­` | `å¾ˆå°` |
| ğŸ”¸ **äº‹ä»¶æœºåˆ¶** | `å¼‚æ­¥å¤„ç†` | `ä¸­` | `é«˜` | `å°` |
| ğŸ”¸ **æ’ä»¶ç³»ç»Ÿ** | `å¤§å‹æ‰©å±•` | `é«˜` | `å¾ˆé«˜` | `ä¸­` |
| ğŸ”¸ **é…ç½®é©±åŠ¨** | `è¡Œä¸ºæ§åˆ¶` | `ä½` | `ä¸­` | `å¾ˆå°` |

**ğŸš€ æœ€ä½³å®è·µå»ºè®®**

1. **ä»ç®€å•å¼€å§‹**ï¼šå…ˆç”¨é…ç½®åŒ–ï¼Œå†è€ƒè™‘æ’ä»¶åŒ–
2. **è¯†åˆ«å˜åŒ–ç‚¹**ï¼šç»å¸¸ä¿®æ”¹çš„åœ°æ–¹å°±éœ€è¦æ‰©å±•ç‚¹
3. **é€‚åº¦è®¾è®¡**ï¼šä¸è¦è¿‡åº¦è®¾è®¡ï¼Œæ ¹æ®å®é™…éœ€è¦
4. **æ–‡æ¡£å®Œå–„**ï¼šæ‰©å±•æ¥å£è¦æœ‰æ¸…æ™°çš„æ–‡æ¡£
5. **æµ‹è¯•è¦†ç›–**ï¼šæ‰©å±•æœºåˆ¶è¦æœ‰å®Œæ•´çš„æµ‹è¯•

### 8.4 å¸¸è§é—®é¢˜é¿å…


**âš ï¸ è®¾è®¡é™·é˜±**
```
è¿‡åº¦è®¾è®¡ï¼šä¸ºäº†æ‰©å±•è€Œæ‰©å±•ï¼Œå¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§
æ€§èƒ½å¿½è§†ï¼šæ‰©å±•æœºåˆ¶å¯èƒ½å¸¦æ¥æ€§èƒ½å¼€é”€
æ–‡æ¡£ç¼ºå¤±ï¼šæ‰©å±•æ¥å£ç¼ºä¹æ¸…æ™°çš„ä½¿ç”¨è¯´æ˜
æµ‹è¯•ä¸è¶³ï¼šæ‰©å±•ç‚¹çš„æµ‹è¯•è¦†ç›–ä¸å……åˆ†
ç‰ˆæœ¬å…¼å®¹ï¼šæ‰©å±•æ¥å£å˜æ›´æ—¶çš„å…¼å®¹æ€§é—®é¢˜
```

**âœ… è§£å†³æ–¹æ¡ˆ**
```
æ¸è¿›å¼è®¾è®¡ï¼šæ ¹æ®å®é™…éœ€æ±‚é€æ­¥å¢åŠ æ‰©å±•èƒ½åŠ›
æ€§èƒ½æµ‹è¯•ï¼šç¡®ä¿æ‰©å±•æœºåˆ¶ä¸å½±å“æ ¸å¿ƒæ€§èƒ½
æ–‡æ¡£å…ˆè¡Œï¼šå…ˆè®¾è®¡æ¥å£æ–‡æ¡£ï¼Œå†å®ç°ä»£ç 
æµ‹è¯•é©±åŠ¨ï¼šä¸ºæ¯ä¸ªæ‰©å±•ç‚¹ç¼–å†™æµ‹è¯•ç”¨ä¾‹
ç‰ˆæœ¬ç®¡ç†ï¼šåˆ¶å®šæ‰©å±•æ¥å£çš„ç‰ˆæœ¬å…¼å®¹ç­–ç•¥
```

### 8.5 å­¦ä¹ è¿›é˜¶è·¯å¾„


**ğŸ—ºï¸ çŸ¥è¯†ä½“ç³»å›¾**
```
åŸºç¡€æ¦‚å¿µ â†’ è®¾è®¡åŸåˆ™ â†’ å®ç°æœºåˆ¶ â†’ æ¶æ„æ¨¡å¼ â†’ å®è·µåº”ç”¨
    â†“           â†“          â†“          â†“          â†“
  å¼€é—­åŸåˆ™    æ‰©å±•ç‚¹      Hook/äº‹ä»¶   åˆ†å±‚æ¶æ„    é¡¹ç›®å®æˆ˜
  æ’ä»¶åŒ–      é…ç½®åŒ–      ä¸­é—´ä»¶      è§£è€¦è®¾è®¡    æ€§èƒ½ä¼˜åŒ–
```

**ğŸ“š æ·±å…¥å­¦ä¹ æ–¹å‘**
- **è®¾è®¡æ¨¡å¼**ï¼šç­–ç•¥ã€è§‚å¯Ÿè€…ã€è£…é¥°å™¨ã€è´£ä»»é“¾æ¨¡å¼
- **æ¶æ„æ¨¡å¼**ï¼šå¾®æœåŠ¡ã€äº‹ä»¶é©±åŠ¨ã€CQRSæ¨¡å¼
- **æ¡†æ¶ç ”ç©¶**ï¼šSpringã€Dubboç­‰æ¡†æ¶çš„æ‰©å±•æœºåˆ¶
- **å¼€æºé¡¹ç›®**ï¼šç ”ç©¶ä¼˜ç§€å¼€æºé¡¹ç›®çš„æ‰©å±•è®¾è®¡

**ğŸ§  è®°å¿†è¦ç‚¹**
- é¢å‘æ‰©å±•è®¾è®¡è®©ç³»ç»Ÿåƒä¹é«˜ç§¯æœ¨ï¼Œå¯ä»¥è‡ªç”±ç»„åˆ
- å¼€é—­åŸåˆ™æ˜¯æ ¸å¿ƒï¼Œæ’ä»¶åŒ–é…ç½®åŒ–æ˜¯æ‰‹æ®µ
- æ‰©å±•ç‚¹è¯†åˆ«çœ‹å˜åŒ–ï¼ŒHookäº‹ä»¶æ˜¯æœºåˆ¶
- è§£è€¦è®¾è®¡å‡ä¾èµ–ï¼Œåˆ†å±‚æ¶æ„å¥½ç»´æŠ¤
- é€‚åº¦è®¾è®¡ä¸è¿‡åº¦ï¼Œæ–‡æ¡£æµ‹è¯•è¦è·Ÿä¸Š