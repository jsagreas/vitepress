---
title: 13ã€åˆ†å±‚æ¶æ„æ€ç»´
---
## ğŸ“š ç›®å½•

1. [åˆ†å±‚æ¶æ„æ€ç»´æ¦‚è¿°](#1-åˆ†å±‚æ¶æ„æ€ç»´æ¦‚è¿°)
2. [Controller-Service-DAOä¸‰å±‚è®¾è®¡](#2-Controller-Service-DAOä¸‰å±‚è®¾è®¡)
3. [èŒè´£è¾¹ç•Œä¸ä¾èµ–æ–¹å‘](#3-èŒè´£è¾¹ç•Œä¸ä¾èµ–æ–¹å‘)
4. [æŠ½è±¡å±‚æ¬¡è¯¦è§£](#4-æŠ½è±¡å±‚æ¬¡è¯¦è§£)
5. [åˆ†å±‚æ€æƒ³æ·±åŒ–](#5-åˆ†å±‚æ€æƒ³æ·±åŒ–)
6. [è§£è€¦ä¸å¯æ›¿æ¢æ€§](#6-è§£è€¦ä¸å¯æ›¿æ¢æ€§)
7. [æ•°æ®ä¸è¡Œä¸ºåˆ†ç¦»](#7-æ•°æ®ä¸è¡Œä¸ºåˆ†ç¦»)
8. [ä¸‰å±‚æ¶æ„å®è·µè¯¦è§£](#8-ä¸‰å±‚æ¶æ„å®è·µè¯¦è§£)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ åˆ†å±‚æ¶æ„æ€ç»´æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åˆ†å±‚æ¶æ„æ€ç»´


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
åˆ†å±‚æ¶æ„æ€ç»´ï¼šå°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼ŒæŠŠå¤æ‚çš„ç¨‹åºåˆ†æˆä¸åŒçš„å±‚æ¬¡
æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±ä¸“é—¨è´Ÿè´£çš„å·¥ä½œï¼Œå±‚ä¸å±‚ä¹‹é—´æœ‰æ˜ç¡®çš„åˆ†å·¥

å°±åƒç›–æˆ¿å­ï¼š
åœ°åŸºå±‚ â†’ åªç®¡æ”¯æ’‘ï¼Œä¸ç®¡è£…ä¿®
æ¡†æ¶å±‚ â†’ åªç®¡ç»“æ„ï¼Œä¸ç®¡ç»†èŠ‚  
è£…ä¿®å±‚ â†’ åªç®¡ç¾è§‚ï¼Œä¸ç®¡ç»“æ„
```

**ğŸ’¡ ä¸ºä»€ä¹ˆè¦åˆ†å±‚**
- **åˆ†å·¥æ˜ç¡®**ï¼šæ¯ä¸ªäººè´Ÿè´£è‡ªå·±æ“…é•¿çš„äº‹
- **æ˜“äºç»´æŠ¤**ï¼šåäº†å“ªå±‚ä¿®å“ªå±‚ï¼Œä¸å½±å“å…¶ä»–å±‚
- **ä¾¿äºæ‰©å±•**ï¼šè¦åŠ æ–°åŠŸèƒ½ï¼ŒçŸ¥é“è¯¥åœ¨å“ªå±‚åŠ 
- **é™ä½å¤æ‚åº¦**ï¼šå¤§é—®é¢˜æ‹†æˆå°é—®é¢˜ï¼Œä¸€å±‚å±‚è§£å†³

### 1.2 åˆ†å±‚æ¶æ„çš„ç°å®ç±»æ¯”


```
ç°å®ä¸­çš„åˆ†å±‚ï¼š                    ç¨‹åºä¸­çš„åˆ†å±‚ï¼š
                                
æœåŠ¡å‘˜ï¼ˆæ¥å¾…å®¢äººï¼‰                Controllerï¼ˆæ¥æ”¶è¯·æ±‚ï¼‰
   â†“                               â†“
å¨å¸ˆï¼ˆåšèœé€»è¾‘ï¼‰                  Serviceï¼ˆä¸šåŠ¡å¤„ç†ï¼‰
   â†“                               â†“
é‡‡è´­å‘˜ï¼ˆä¹°èœææ–™ï¼‰                DAOï¼ˆæ•°æ®è·å–ï¼‰

æ¯ä¸ªäººéƒ½ä¸“æ³¨è‡ªå·±çš„å·¥ä½œï¼Œä¸ä¼šè¶Šç•Œ
```

---

## 2. ğŸ¯ Controller-Service-DAOä¸‰å±‚è®¾è®¡


### 2.1 ä¸‰å±‚æ¶æ„å…¨æ™¯å›¾


```
ç”¨æˆ·è¯·æ±‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Controller å±‚           â”‚ â† æ¥å¾…å‘˜ï¼šæ¥æ”¶è¯·æ±‚ï¼Œå›å¤å“åº”
â”‚     (æ¥å£å±‚/è¡¨ç°å±‚)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Service å±‚             â”‚ â† å¨å¸ˆï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
â”‚        (ä¸šåŠ¡é€»è¾‘å±‚)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DAO å±‚                â”‚ â† é‡‡è´­å‘˜ï¼šè·å–å’Œå­˜å‚¨æ•°æ®
â”‚        (æ•°æ®è®¿é—®å±‚)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“ è®¿é—®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ•°æ®åº“                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¯å±‚çš„ç®€å•ç†è§£


**ğŸ­ Controllerå±‚ - æ¥å¾…å‘˜**
```java
// æƒ³è±¡æˆé¤å…çš„æœåŠ¡å‘˜
@RestController
public class UserController {
    
    // å®¢äººè¯´ï¼šæˆ‘è¦æ³¨å†Œè´¦å·
    @PostMapping("/register")
    public String register(@RequestBody User user) {
        // æœåŠ¡å‘˜ï¼šå¥½çš„ï¼Œæˆ‘å¸®æ‚¨å¤„ç†
        // æŠŠå®¢äººçš„è¦æ±‚è½¬ç»™å¨å¸ˆï¼ˆServiceï¼‰
        boolean success = userService.register(user);
        
        // å¨å¸ˆå¤„ç†å®Œï¼ŒæœåŠ¡å‘˜å›å¤å®¢äºº
        return success ? "æ³¨å†ŒæˆåŠŸ" : "æ³¨å†Œå¤±è´¥";
    }
}
```

**ğŸ³ Serviceå±‚ - å¨å¸ˆ**
```java
// æƒ³è±¡æˆé¤å…çš„å¨å¸ˆ
@Service
public class UserService {
    
    // å¨å¸ˆæ¥åˆ°æœåŠ¡å‘˜çš„è¦æ±‚ï¼šæ³¨å†Œç”¨æˆ·
    public boolean register(User user) {
        // å¨å¸ˆçš„å·¥ä½œï¼šæŒ‰ç…§èœè°±ï¼ˆä¸šåŠ¡è§„åˆ™ï¼‰åšèœ
        
        // 1. æ£€æŸ¥é£Ÿææ˜¯å¦æ–°é²œï¼ˆæ•°æ®æ ¡éªŒï¼‰
        if (user.getEmail() == null) {
            return false;
        }
        
        // 2. çœ‹çœ‹ä»“åº“æœ‰æ²¡æœ‰è¿™ä¸ªèœï¼ˆæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼‰
        if (userDAO.findByEmail(user.getEmail()) != null) {
            return false; // ç”¨æˆ·å·²å­˜åœ¨
        }
        
        // 3. åšèœï¼ˆä¿å­˜ç”¨æˆ·ï¼‰
        return userDAO.save(user);
    }
}
```

**ğŸ“¦ DAOå±‚ - é‡‡è´­å‘˜**
```java
// æƒ³è±¡æˆé¤å…çš„é‡‡è´­å‘˜/ä»“åº“ç®¡ç†å‘˜
@Repository
public class UserDAO {
    
    // é‡‡è´­å‘˜çš„å·¥ä½œï¼šå»ä»“åº“æ‹¿ä¸œè¥¿ï¼Œæˆ–è€…æŠŠä¸œè¥¿æ”¾ä»“åº“
    
    // å»ä»“åº“æ‰¾ç”¨æˆ·ä¿¡æ¯
    public User findByEmail(String email) {
        // å…·ä½“çš„SQLæ“ä½œï¼Œå°±åƒå»ä»“åº“æ‰¾ä¸œè¥¿
        return jdbcTemplate.queryForObject(
            "SELECT * FROM user WHERE email = ?", 
            new Object[]{email}, 
            User.class
        );
    }
    
    // æŠŠç”¨æˆ·ä¿¡æ¯å­˜åˆ°ä»“åº“
    public boolean save(User user) {
        // å…·ä½“çš„å­˜å‚¨æ“ä½œ
        int rows = jdbcTemplate.update(
            "INSERT INTO user (email, name) VALUES (?, ?)",
            user.getEmail(), user.getName()
        );
        return rows > 0;
    }
}
```

---

## 3. âš–ï¸ èŒè´£è¾¹ç•Œä¸ä¾èµ–æ–¹å‘


### 3.1 èŒè´£è¾¹ç•Œæ€ç»´


**ğŸ¯ æ¯å±‚åªåšè‡ªå·±çš„äº‹**

| å±‚æ¬¡ | **ä¸“é—¨è´Ÿè´£** | **ç»å¯¹ä¸åš** | **å°±åƒ** |
|------|-------------|-------------|---------|
| **Controller** | `æ¥æ”¶è¯·æ±‚ã€å‚æ•°æ ¡éªŒã€è¿”å›å“åº”` | `ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åº“æ“ä½œ` | `æœåŠ¡å‘˜ä¸ä¸‹å¨` |
| **Service** | `ä¸šåŠ¡é€»è¾‘ã€è§„åˆ™æ£€æŸ¥ã€æµç¨‹æ§åˆ¶` | `HTTPè¯·æ±‚å¤„ç†ã€SQLè¯­å¥` | `å¨å¸ˆä¸æ¥å®¢` |
| **DAO** | `æ•°æ®å¢åˆ æ”¹æŸ¥ã€SQLæ“ä½œ` | `ä¸šåŠ¡è§„åˆ™ã€æ¥å£å“åº”` | `é‡‡è´­å‘˜ä¸åšèœ` |

**âŒ é”™è¯¯çš„è¶Šç•Œè¡Œä¸º**
```java
// é”™è¯¯ç¤ºä¾‹ï¼šControlleråšäº†Serviceçš„äº‹
@PostMapping("/register")
public String register(@RequestBody User user) {
    // âŒ Controllerä¸åº”è¯¥å†™ä¸šåŠ¡é€»è¾‘
    if (user.getEmail() == null || user.getEmail().isEmpty()) {
        return "é‚®ç®±ä¸èƒ½ä¸ºç©º";
    }
    
    // âŒ Controllerä¸åº”è¯¥ç›´æ¥æ“ä½œæ•°æ®åº“
    User existUser = userDAO.findByEmail(user.getEmail());
    if (existUser != null) {
        return "ç”¨æˆ·å·²å­˜åœ¨";
    }
    
    return "æ³¨å†ŒæˆåŠŸ";
}
```

**âœ… æ­£ç¡®çš„åˆ†å±‚å®ç°**
```java
// âœ… Controlleråªç®¡æ¥å£
@PostMapping("/register") 
public ResponseEntity<String> register(@RequestBody User user) {
    try {
        // åªè´Ÿè´£è°ƒç”¨Serviceï¼Œä¸å†™ä¸šåŠ¡é€»è¾‘
        boolean success = userService.register(user);
        return success ? 
            ResponseEntity.ok("æ³¨å†ŒæˆåŠŸ") : 
            ResponseEntity.badRequest().body("æ³¨å†Œå¤±è´¥");
    } catch (Exception e) {
        return ResponseEntity.status(500).body("ç³»ç»Ÿé”™è¯¯");
    }
}
```

### 3.2 ä¾èµ–æ–¹å‘æ€ç»´


**ğŸ”— ä¾èµ–å…³ç³»å°±åƒå…¬å¸å±‚çº§**

```
ä¾èµ–æ–¹å‘å›¾ï¼š

Controller  â†â”€â”€ ç”¨æˆ·è¯·æ±‚
    â†“ 
Service     â†â”€â”€ Controller è°ƒç”¨
    â†“
DAO         â†â”€â”€ Service è°ƒç”¨
    â†“
Database    â†â”€â”€ DAO è®¿é—®

è§„åˆ™ï¼šä¸Šçº§å¯ä»¥è°ƒç”¨ä¸‹çº§ï¼Œä¸‹çº§ä¸èƒ½è°ƒç”¨ä¸Šçº§
```

**ğŸ¯ ä¾èµ–æ–¹å‘çš„æ ¸å¿ƒåŸåˆ™**

```
âœ… å…è®¸çš„è°ƒç”¨ï¼š
Controller â†’ Service    (è€æ¿æ‰¾ç»ç†)
Service â†’ DAO          (ç»ç†æ‰¾å‘˜å·¥)
Service â†’ Service      (ç»ç†æ‰¾ç»ç†ï¼ŒåŒçº§åä½œ)

âŒ ç¦æ­¢çš„è°ƒç”¨ï¼š
DAO â†’ Service          (å‘˜å·¥æŒ‡æŒ¥ç»ç†)
DAO â†’ Controller       (å‘˜å·¥è¶Šçº§æ‰¾è€æ¿)
Service â†’ Controller   (ç»ç†æ‰¾è€æ¿æ±‡æŠ¥ï¼Œåº”è¯¥é€šè¿‡è¿”å›å€¼)
```

**ğŸ’¡ é¿å…å¾ªç¯ä¾èµ–**
```java
// âŒ é”™è¯¯ï¼šå¾ªç¯ä¾èµ–
class UserService {
    @Autowired
    private OrderService orderService; // Aä¾èµ–B
}

class OrderService {
    @Autowired  
    private UserService userService;   // Båˆä¾èµ–Aï¼Œå½¢æˆå¾ªç¯
}

// âœ… æ­£ç¡®ï¼šé€šè¿‡æ¥å£æˆ–äº‹ä»¶è§£è€¦
class UserService {
    public void createUser(User user) {
        // ç”¨æˆ·åˆ›å»ºå®Œæˆåï¼Œå‘å¸ƒäº‹ä»¶
        applicationEventPublisher.publishEvent(new UserCreatedEvent(user));
    }
}

class OrderService {
    @EventListener
    public void handleUserCreated(UserCreatedEvent event) {
        // ç›‘å¬äº‹ä»¶ï¼Œè¿›è¡Œç›¸åº”å¤„ç†
    }
}
```

---

## 4. ğŸ” æŠ½è±¡å±‚æ¬¡è¯¦è§£


### 4.1 é€»è¾‘æŠ½è±¡


**ğŸ§  ä»€ä¹ˆæ˜¯é€»è¾‘æŠ½è±¡**
```
é€»è¾‘æŠ½è±¡ï¼šæŠŠå¤æ‚çš„ä¸šåŠ¡æµç¨‹æŠ½è±¡æˆç®€å•çš„æ­¥éª¤

å°±åƒåšé¥­çš„æŠ½è±¡ï¼š
å…·ä½“æ“ä½œï¼šåˆ‡èœã€æ´—èœã€ä¸‹é”…ã€æ”¾è°ƒæ–™ã€ç¿»ç‚’ã€èµ·é”…
æŠ½è±¡åï¼šå‡†å¤‡é£Ÿæ â†’ çƒ¹é¥ªå¤„ç† â†’ å®Œæˆè£…ç›˜

ç¼–ç¨‹ä¸­ï¼š
å…·ä½“æ“ä½œï¼šæ ¡éªŒé‚®ç®±æ ¼å¼ã€æ£€æŸ¥ç”¨æˆ·å­˜åœ¨ã€åŠ å¯†å¯†ç ã€æ’å…¥æ•°æ®åº“
æŠ½è±¡åï¼šéªŒè¯æ•°æ® â†’ å¤„ç†ä¸šåŠ¡ â†’ ä¿å­˜ç»“æœ
```

**ğŸ’¡ é€»è¾‘æŠ½è±¡ç¤ºä¾‹**
```java
// å…·ä½“çš„å®ç°ç»†èŠ‚
public boolean register(User user) {
    // ä¸€å¤§å †å…·ä½“æ“ä½œ...
    if (!user.getEmail().contains("@")) return false;
    if (userDAO.findByEmail(user.getEmail()) != null) return false;
    user.setPassword(encrypt(user.getPassword()));
    return userDAO.save(user);
}

// æŠ½è±¡åçš„æ¸…æ™°æµç¨‹
public boolean register(User user) {
    // æŠ½è±¡æˆä¸‰ä¸ªæ¸…æ™°çš„æ­¥éª¤
    if (!validateUser(user)) return false;
    if (!checkUserNotExists(user)) return false;
    return saveUser(user);
}
```

### 4.2 æ•°æ®æŠ½è±¡


**ğŸ“Š ä»€ä¹ˆæ˜¯æ•°æ®æŠ½è±¡**
```
æ•°æ®æŠ½è±¡ï¼šæŠŠå¤æ‚çš„æ•°æ®ç»“æ„ç®€åŒ–ä¸ºæ¦‚å¿µæ¨¡å‹

å°±åƒçœ‹åœ°å›¾ï¼š
ç°å®ä¸–ç•Œï¼šå¤æ‚çš„åœ°å½¢ã€å»ºç­‘ã€é“è·¯
åœ°å›¾æŠ½è±¡ï¼šç®€å•çš„çº¿æ¡ã€ç¬¦å·ã€é¢œè‰²

ç¼–ç¨‹ä¸­ï¼š
æ•°æ®åº“è¡¨ï¼šuser_id, user_name, user_email, create_time, update_time
æŠ½è±¡æ¨¡å‹ï¼šUser { id, name, email }
```

**ğŸ’¡ æ•°æ®æŠ½è±¡ç¤ºä¾‹**
```java
// æ•°æ®åº“å±‚ï¼šè¯¦ç»†çš„å­—æ®µ
CREATE TABLE user (
    user_id BIGINT PRIMARY KEY,
    user_name VARCHAR(50),
    user_email VARCHAR(100),
    password_hash VARCHAR(255),
    create_time TIMESTAMP,
    update_time TIMESTAMP,
    status TINYINT
);

// ä¸šåŠ¡å±‚ï¼šæŠ½è±¡çš„æ¦‚å¿µ
public class User {
    private Long id;        // æŠ½è±¡ï¼šç”¨æˆ·æ ‡è¯†
    private String name;    // æŠ½è±¡ï¼šç”¨æˆ·å§“å  
    private String email;   // æŠ½è±¡ï¼šè”ç³»æ–¹å¼
    // éšè—äº†å¯†ç ã€æ—¶é—´æˆ³ç­‰æŠ€æœ¯ç»†èŠ‚
}
```

### 4.3 è¡Œä¸ºæŠ½è±¡


**ğŸ­ ä»€ä¹ˆæ˜¯è¡Œä¸ºæŠ½è±¡**
```
è¡Œä¸ºæŠ½è±¡ï¼šæŠŠå…·ä½“çš„æ“ä½œæŠ½è±¡ä¸ºé€šç”¨çš„è¡Œä¸º

å°±åƒé¥æ§å™¨ï¼š
å…·ä½“å®ç°ï¼šçº¢å¤–ä¿¡å·ã€ç”µè·¯æ§åˆ¶ã€é¢‘ç‡è°ƒåˆ¶
æŠ½è±¡è¡Œä¸ºï¼šå¼€æœºã€å…³æœºã€æ¢å°ã€è°ƒéŸ³é‡

ç¼–ç¨‹ä¸­ï¼š
å…·ä½“å®ç°ï¼šSQLè¯­å¥ã€ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™
æŠ½è±¡è¡Œä¸ºï¼šæŸ¥è¯¢ã€ä¿å­˜ã€åˆ é™¤ã€æ›´æ–°
```

**ğŸ’¡ è¡Œä¸ºæŠ½è±¡ç¤ºä¾‹**
```java
// å…·ä½“çš„å®ç°
public User findUser(String email) {
    Connection conn = DriverManager.getConnection(url);
    PreparedStatement stmt = conn.prepareStatement("SELECT * FROM user WHERE email = ?");
    stmt.setString(1, email);
    ResultSet rs = stmt.executeQuery();
    // ... ä¸€å¤§å †JDBCä»£ç 
}

// æŠ½è±¡çš„è¡Œä¸º
public interface UserRepository {
    User findByEmail(String email);  // æŠ½è±¡ï¼šæ ¹æ®é‚®ç®±æŸ¥æ‰¾ç”¨æˆ·
    void save(User user);           // æŠ½è±¡ï¼šä¿å­˜ç”¨æˆ·
    void delete(Long id);           // æŠ½è±¡ï¼šåˆ é™¤ç”¨æˆ·
}
```

---

## 5. ğŸ¯ åˆ†å±‚æ€æƒ³æ·±åŒ–


### 5.1 è¡¨ç°å±‚èŒè´£ç»†åˆ†


**ğŸ­ è¡¨ç°å±‚ï¼ˆControllerï¼‰çš„è¯¦ç»†èŒè´£**

```
è¡¨ç°å±‚å°±åƒé¤å…çš„å‰å°æœåŠ¡ï¼š

1. æ¥å¾…å®¢äººï¼ˆæ¥æ”¶è¯·æ±‚ï¼‰
   - è§£æHTTPè¯·æ±‚
   - è·å–è¯·æ±‚å‚æ•°
   
2. ç†è§£éœ€æ±‚ï¼ˆå‚æ•°æ ¡éªŒï¼‰
   - æ£€æŸ¥å‚æ•°æ ¼å¼
   - éªŒè¯å¿…å¡«å­—æ®µ
   
3. è½¬è¾¾éœ€æ±‚ï¼ˆè°ƒç”¨ä¸šåŠ¡å±‚ï¼‰
   - è°ƒç”¨Serviceæ–¹æ³•
   - ä¼ é€’å¤„ç†å‚æ•°
   
4. å›å¤å®¢äººï¼ˆè¿”å›å“åº”ï¼‰
   - æ ¼å¼åŒ–è¿”å›æ•°æ®
   - è®¾ç½®HTTPçŠ¶æ€ç 
```

**ğŸ’¡ è¡¨ç°å±‚æœ€ä½³å®è·µ**
```java
@RestController
public class UserController {
    
    @PostMapping("/users")
    public ResponseEntity<?> createUser(@Valid @RequestBody UserCreateRequest request) {
        
        // 1. å‚æ•°è½¬æ¢ï¼ˆDTO â†’ Domain Objectï¼‰
        User user = convertToUser(request);
        
        // 2. è°ƒç”¨ä¸šåŠ¡å±‚ï¼ˆåªè°ƒç”¨ï¼Œä¸å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼‰
        UserResult result = userService.createUser(user);
        
        // 3. ç»“æœè½¬æ¢ï¼ˆDomain Object â†’ DTOï¼‰
        UserResponse response = convertToResponse(result);
        
        // 4. è¿”å›å“åº”
        return ResponseEntity.ok(response);
    }
    
    // è¡¨ç°å±‚åªåšæ•°æ®è½¬æ¢ï¼Œä¸åšä¸šåŠ¡åˆ¤æ–­
    private User convertToUser(UserCreateRequest request) {
        return User.builder()
            .name(request.getName())
            .email(request.getEmail())
            .build();
    }
}
```

### 5.2 ä¸šåŠ¡å±‚èŒè´£ç»†åˆ†


**ğŸ³ ä¸šåŠ¡å±‚ï¼ˆServiceï¼‰çš„è¯¦ç»†èŒè´£**

```
ä¸šåŠ¡å±‚å°±åƒé¤å…çš„ä¸»å¨ï¼š

1. ç†è§£èœè°±ï¼ˆä¸šåŠ¡è§„åˆ™ï¼‰
   - å®ç°ä¸šåŠ¡é€»è¾‘
   - æ‰§è¡Œä¸šåŠ¡è§„åˆ™
   
2. åè°ƒé…èœï¼ˆæœåŠ¡ç¼–æ’ï¼‰
   - è°ƒç”¨å…¶ä»–Service
   - ç»„åˆå¤šä¸ªæ“ä½œ
   
3. æ§åˆ¶ç«å€™ï¼ˆäº‹åŠ¡ç®¡ç†ï¼‰
   - ç®¡ç†æ•°æ®åº“äº‹åŠ¡
   - å¤„ç†å¼‚å¸¸å›æ»š
   
4. è´¨é‡æŠŠæ§ï¼ˆä¸šåŠ¡æ ¡éªŒï¼‰
   - éªŒè¯ä¸šåŠ¡è§„åˆ™
   - æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
```

**ğŸ’¡ ä¸šåŠ¡å±‚æœ€ä½³å®è·µ**
```java
@Service
@Transactional
public class UserService {
    
    public UserResult createUser(User user) {
        
        // 1. ä¸šåŠ¡è§„åˆ™éªŒè¯
        validateBusinessRules(user);
        
        // 2. æ£€æŸ¥ä¸šåŠ¡æ¡ä»¶
        if (userRepository.existsByEmail(user.getEmail())) {
            throw new BusinessException("ç”¨æˆ·é‚®ç®±å·²å­˜åœ¨");
        }
        
        // 3. æ‰§è¡Œä¸šåŠ¡é€»è¾‘
        user.setPassword(passwordEncoder.encode(user.getPassword()));
        user.setCreateTime(LocalDateTime.now());
        
        // 4. æŒä¹…åŒ–æ•°æ®
        User savedUser = userRepository.save(user);
        
        // 5. è§¦å‘ä¸šåŠ¡äº‹ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰
        eventPublisher.publishEvent(new UserCreatedEvent(savedUser));
        
        return UserResult.success(savedUser);
    }
    
    // ä¸šåŠ¡è§„åˆ™éªŒè¯
    private void validateBusinessRules(User user) {
        if (user.getAge() < 18) {
            throw new BusinessException("ç”¨æˆ·å¹´é¾„å¿…é¡»æ»¡18å²");
        }
    }
}
```

### 5.3 æ•°æ®å±‚èŒè´£ç»†åˆ†


**ğŸ“¦ æ•°æ®å±‚ï¼ˆDAO/Repositoryï¼‰çš„è¯¦ç»†èŒè´£**

```
æ•°æ®å±‚å°±åƒé¤å…çš„ä»“åº“ç®¡ç†ï¼š

1. å­˜å‚¨ç®¡ç†ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰
   - ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“
   - ä»æ•°æ®åº“è¯»å–æ•°æ®
   
2. åº“å­˜æŸ¥è¯¢ï¼ˆæ•°æ®æŸ¥è¯¢ï¼‰
   - æŒ‰æ¡ä»¶æŸ¥æ‰¾æ•°æ®
   - èšåˆç»Ÿè®¡æ•°æ®
   
3. åº“å­˜ç®¡ç†ï¼ˆæ•°æ®ç»´æŠ¤ï¼‰
   - æ›´æ–°æ•°æ®
   - åˆ é™¤æ•°æ®
   
4. ä»“åº“ä¼˜åŒ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
   - SQLä¼˜åŒ–
   - ç´¢å¼•ç®¡ç†
```

**ğŸ’¡ æ•°æ®å±‚æœ€ä½³å®è·µ**
```java
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    
    // ç®€å•æŸ¥è¯¢ï¼šæ ¹æ®é‚®ç®±æŸ¥æ‰¾
    Optional<User> findByEmail(String email);
    
    // æ¡ä»¶æŸ¥è¯¢ï¼šæ ¹æ®çŠ¶æ€æŸ¥æ‰¾
    List<User> findByStatus(UserStatus status);
    
    // è‡ªå®šä¹‰æŸ¥è¯¢ï¼šå¤æ‚æŸ¥è¯¢é€»è¾‘
    @Query("SELECT u FROM User u WHERE u.createTime >= :startTime AND u.status = :status")
    List<User> findActiveUsersAfter(@Param("startTime") LocalDateTime startTime, 
                                   @Param("status") UserStatus status);
    
    // æ•°æ®å±‚åªç®¡æ•°æ®æ“ä½œï¼Œä¸å¤„ç†ä¸šåŠ¡é€»è¾‘
    boolean existsByEmail(String email);
}
```

---

## 6. ğŸ”„ è§£è€¦ä¸å¯æ›¿æ¢æ€§


### 6.1 ä»€ä¹ˆæ˜¯è§£è€¦


**ğŸ”— è§£è€¦å°±åƒç§¯æœ¨è®¾è®¡**
```
ç´§è€¦åˆï¼šç§¯æœ¨ç²˜åœ¨ä¸€èµ·
- æ”¹ä¸€ä¸ªå½±å“å…¶ä»–
- éš¾ä»¥å•ç‹¬æµ‹è¯•
- æ— æ³•çµæ´»ç»„åˆ

æ¾è€¦åˆï¼šç§¯æœ¨å¯ä»¥è‡ªç”±ç»„è£…
- ç‹¬ç«‹ä¿®æ”¹ä¸å½±å“å…¶ä»–
- å¯ä»¥å•ç‹¬æµ‹è¯•
- çµæ´»æ›¿æ¢ç»„ä»¶
```

**ğŸ’¡ è§£è€¦çš„å®ç°æ–¹å¼**

```java
// âŒ ç´§è€¦åˆï¼šç›´æ¥ä¾èµ–å…·ä½“å®ç°
class UserService {
    private MySQLUserDAO userDAO = new MySQLUserDAO(); // å†™æ­»äº†MySQL
    
    public User findUser(String email) {
        return userDAO.findByEmail(email); // æ— æ³•æ¢æˆå…¶ä»–æ•°æ®åº“
    }
}

// âœ… æ¾è€¦åˆï¼šä¾èµ–æŠ½è±¡æ¥å£
class UserService {
    private UserRepository userRepository; // ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
    
    // é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå¯ä»¥æ›¿æ¢ä¸åŒå®ç°
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
    
    public User findUser(String email) {
        return userRepository.findByEmail(email); // å¯ä»¥æ˜¯MySQLã€Redisã€MongoDB...
    }
}
```

### 6.2 å¯æ›¿æ¢æ€§çš„å¨åŠ›


**ğŸ”„ å¯æ›¿æ¢æ€§ç¤ºä¾‹**

```java
// å®šä¹‰ç»Ÿä¸€æ¥å£
interface UserRepository {
    User findByEmail(String email);
    void save(User user);
}

// MySQLå®ç°
@Repository("mysqlUserRepository")
class MySQLUserRepository implements UserRepository {
    public User findByEmail(String email) {
        // MySQLæŸ¥è¯¢é€»è¾‘
        return jdbcTemplate.queryForObject("SELECT * FROM user WHERE email = ?", email);
    }
}

// Rediså®ç°  
@Repository("redisUserRepository")
class RedisUserRepository implements UserRepository {
    public User findByEmail(String email) {
        // RedisæŸ¥è¯¢é€»è¾‘
        return redisTemplate.opsForHash().get("user:email", email);
    }
}

// MongoDBå®ç°
@Repository("mongoUserRepository") 
class MongoUserRepository implements UserRepository {
    public User findByEmail(String email) {
        // MongoDBæŸ¥è¯¢é€»è¾‘
        return mongoTemplate.findOne(Query.where("email").is(email), User.class);
    }
}
```

**ğŸ¯ æ›¿æ¢çš„å¥½å¤„**
```
å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨å†…å­˜æ•°æ®åº“ï¼ˆå¿«é€Ÿï¼‰
æµ‹è¯•ç¯å¢ƒï¼šä½¿ç”¨H2æ•°æ®åº“ï¼ˆç®€å•ï¼‰
ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨MySQLé›†ç¾¤ï¼ˆç¨³å®šï¼‰

åªéœ€è¦æ”¹é…ç½®ï¼Œä»£ç å®Œå…¨ä¸ç”¨åŠ¨ï¼
```

---

## 7. ğŸ“Š æ•°æ®ä¸è¡Œä¸ºåˆ†ç¦»


### 7.1 ä»€ä¹ˆæ˜¯æ•°æ®ä¸è¡Œä¸ºåˆ†ç¦»


**ğŸ­ åˆ†ç¦»çš„æ ¸å¿ƒæ€æƒ³**
```
ä¼ ç»Ÿåšæ³•ï¼šæ•°æ®å’Œè¡Œä¸ºæ··åœ¨ä¸€èµ·
å°±åƒï¼šä¸€ä¸ªäººæ—¢è¦å½“æ¼”å‘˜ï¼Œåˆè¦å½“å¯¼æ¼”ï¼Œè¿˜è¦å½“ç¼–å‰§

åˆ†ç¦»åšæ³•ï¼šæ•°æ®æ˜¯æ•°æ®ï¼Œè¡Œä¸ºæ˜¯è¡Œä¸º  
å°±åƒï¼šæ¼”å‘˜ä¸“é—¨æ¼”æˆï¼Œå¯¼æ¼”ä¸“é—¨æŒ‡å¯¼ï¼Œç¼–å‰§ä¸“é—¨å†™å‰§æœ¬
```

**ğŸ’¡ åˆ†ç¦»çš„å…·ä½“è¡¨ç°**

```java
// âŒ æ•°æ®å’Œè¡Œä¸ºæ··åˆï¼ˆè´«è¡€æ¨¡å‹é—®é¢˜ï¼‰
class User {
    private String name;
    private String email;
    
    // æ•°æ®å¯¹è±¡åŒ…å«äº†ä¸šåŠ¡è¡Œä¸ºï¼ŒèŒè´£ä¸æ¸…
    public boolean isValidForRegistration() {
        return email != null && email.contains("@") && name != null;
    }
    
    public void sendWelcomeEmail() {
        // æ•°æ®å¯¹è±¡ä¸åº”è¯¥çŸ¥é“æ€ä¹ˆå‘é‚®ä»¶
        EmailService.send(this.email, "Welcome!");
    }
}

// âœ… æ•°æ®ä¸è¡Œä¸ºåˆ†ç¦»
// çº¯æ•°æ®å¯¹è±¡
class User {
    private String name;
    private String email;
    // åªåŒ…å«æ•°æ®ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
}

// ä¸“é—¨çš„è¡Œä¸ºç±»
class UserValidator {
    public boolean isValidForRegistration(User user) {
        return user.getEmail() != null && 
               user.getEmail().contains("@") && 
               user.getName() != null;
    }
}

class UserNotificationService {
    public void sendWelcomeEmail(User user) {
        emailService.send(user.getEmail(), "Welcome!");
    }
}
```

### 7.2 åˆ†ç¦»çš„ä¼˜åŠ¿


**ğŸ¯ åˆ†ç¦»å¸¦æ¥çš„å¥½å¤„**

| **æ–¹é¢** | **æ··åˆæ–¹å¼** | **åˆ†ç¦»æ–¹å¼** |
|---------|-------------|-------------|
| **èŒè´£** | `ä¸€ä¸ªç±»å¹²å¤šç§äº‹ï¼ŒèŒè´£ä¸æ¸…` | `æ¯ä¸ªç±»ä¸“æ³¨ä¸€ä»¶äº‹ï¼ŒèŒè´£æ˜ç¡®` |
| **æµ‹è¯•** | `éš¾ä»¥å•ç‹¬æµ‹è¯•æ•°æ®æˆ–è¡Œä¸º` | `å¯ä»¥åˆ†åˆ«æµ‹è¯•æ•°æ®å’Œè¡Œä¸º` |
| **å¤ç”¨** | `æ•°æ®å’Œè¡Œä¸ºç»‘å®šï¼Œéš¾ä»¥å¤ç”¨` | `è¡Œä¸ºå¯ä»¥ä½œç”¨äºä¸åŒæ•°æ®` |
| **ç»´æŠ¤** | `æ”¹æ•°æ®å¯èƒ½å½±å“è¡Œä¸º` | `æ•°æ®å’Œè¡Œä¸ºç‹¬ç«‹ä¿®æ”¹` |

**ğŸ’¡ åˆ†ç¦»çš„å®è·µæŒ‡å¯¼**

```java
// æ•°æ®ä¼ è¾“å±‚ï¼šåªè´Ÿè´£æ•°æ®ä¼ é€’
class UserDTO {
    private String name;
    private String email;
    // åªæœ‰getter/setterï¼Œæ²¡æœ‰ä¸šåŠ¡æ–¹æ³•
}

// é¢†åŸŸå¯¹è±¡ï¼šåªåŒ…å«æ ¸å¿ƒå±æ€§
class User {
    private UserId id;
    private UserName name;
    private Email email;
    // å¯ä»¥æœ‰ç®€å•çš„ä¸šåŠ¡è§„åˆ™éªŒè¯ï¼Œä½†ä¸åŒ…å«å¤æ‚é€»è¾‘
}

// æœåŠ¡å±‚ï¼šä¸“é—¨å¤„ç†ä¸šåŠ¡è¡Œä¸º
class UserService {
    public void registerUser(User user) {
        // ä¸“é—¨å¤„ç†æ³¨å†Œé€»è¾‘
    }
    
    public void updateUserProfile(User user, UserProfile profile) {
        // ä¸“é—¨å¤„ç†æ›´æ–°é€»è¾‘
    }
}
```

---

## 8. ğŸ› ï¸ ä¸‰å±‚æ¶æ„å®è·µè¯¦è§£


### 8.1 Controllerå±‚å®è·µæŒ‡å¯¼


**ğŸ¯ Controllerå±‚çš„æ ¸å¿ƒèŒè´£**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    private final UserService userService;
    
    // 1. æ¥æ”¶è¯·æ±‚ï¼šå¤„ç†HTTPè¯·æ±‚
    @PostMapping
    public ResponseEntity<UserResponse> createUser(
            @Valid @RequestBody UserCreateRequest request) {
        
        // 2. å‚æ•°æ ¡éªŒï¼šåŸºç¡€æ ¼å¼æ ¡éªŒ
        // @Validæ³¨è§£å·²ç»å¤„ç†äº†åŸºæœ¬æ ¡éªŒ
        
        // 3. æ•°æ®è½¬æ¢ï¼šDTOè½¬ä¸ºDomainå¯¹è±¡
        User user = UserMapper.toUser(request);
        
        // 4. è°ƒç”¨ä¸šåŠ¡å±‚ï¼šä¸å†™ä¸šåŠ¡é€»è¾‘
        User createdUser = userService.createUser(user);
        
        // 5. ç»“æœè½¬æ¢ï¼šDomainå¯¹è±¡è½¬ä¸ºDTO
        UserResponse response = UserMapper.toResponse(createdUser);
        
        // 6. è¿”å›å“åº”ï¼šè®¾ç½®é€‚å½“çš„HTTPçŠ¶æ€
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }
    
    // Controllerä¸åº”è¯¥åŒ…å«çš„å†…å®¹ï¼š
    // âŒ ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
    // âŒ æ•°æ®åº“æ“ä½œ
    // âŒ å¤æ‚çš„æ•°æ®å¤„ç†
    // âŒ äº‹åŠ¡ç®¡ç†
}
```

**ğŸ“ Controllerå±‚æœ€ä½³å®è·µæ¸…å•**

> âœ… **åº”è¯¥åšçš„äº‹ï¼š**
> - æ¥æ”¶å’ŒéªŒè¯HTTPè¯·æ±‚å‚æ•°
> - è°ƒç”¨ç›¸åº”çš„Serviceæ–¹æ³•
> - å¤„ç†å¼‚å¸¸å¹¶è¿”å›é€‚å½“çš„é”™è¯¯å“åº”
> - è¿›è¡ŒDTOä¸Domainå¯¹è±¡ä¹‹é—´çš„è½¬æ¢

> âŒ **ä¸åº”è¯¥åšçš„äº‹ï¼š**
> - ç¼–å†™ä¸šåŠ¡é€»è¾‘ä»£ç 
> - ç›´æ¥æ“ä½œæ•°æ®åº“
> - å¤„ç†äº‹åŠ¡
> - è°ƒç”¨å¤šä¸ªServiceè¿›è¡Œå¤æ‚ç¼–æ’

### 8.2 Serviceå±‚å®è·µæŒ‡å¯¼


**ğŸ³ Serviceå±‚çš„æ ¸å¿ƒèŒè´£**

```java
@Service
@Transactional
public class UserService {
    
    private final UserRepository userRepository;
    private final EmailService emailService;
    private final PasswordEncoder passwordEncoder;
    
    public User createUser(User user) {
        
        // 1. ä¸šåŠ¡è§„åˆ™éªŒè¯
        validateBusinessRules(user);
        
        // 2. æ£€æŸ¥ä¸šåŠ¡çº¦æŸ
        if (userRepository.existsByEmail(user.getEmail())) {
            throw new BusinessException("é‚®ç®±å·²è¢«ä½¿ç”¨");
        }
        
        // 3. ä¸šåŠ¡æ•°æ®å¤„ç†
        user.setPassword(passwordEncoder.encode(user.getPassword()));
        user.setStatus(UserStatus.ACTIVE);
        user.setCreateTime(LocalDateTime.now());
        
        // 4. æ•°æ®æŒä¹…åŒ–
        User savedUser = userRepository.save(user);
        
        // 5. åç»­ä¸šåŠ¡å¤„ç†
        emailService.sendWelcomeEmail(savedUser.getEmail());
        
        // 6. è¿”å›ç»“æœ
        return savedUser;
    }
    
    // ä¸šåŠ¡è§„åˆ™éªŒè¯
    private void validateBusinessRules(User user) {
        if (user.getAge() < 18) {
            throw new BusinessException("ç”¨æˆ·å¹´é¾„å¿…é¡»æ»¡18å²");
        }
        
        if (!isValidEmailDomain(user.getEmail())) {
            throw new BusinessException("ä¸æ”¯æŒè¯¥é‚®ç®±åŸŸå");
        }
    }
    
    // Serviceå±‚å¯ä»¥åŒ…å«çš„å†…å®¹ï¼š
    // âœ… ä¸šåŠ¡é€»è¾‘å¤„ç†
    // âœ… ä¸šåŠ¡è§„åˆ™éªŒè¯  
    // âœ… äº‹åŠ¡ç®¡ç†
    // âœ… æœåŠ¡ç¼–æ’
    // âœ… å¼‚å¸¸å¤„ç†
}
```

**ğŸ“ Serviceå±‚æœ€ä½³å®è·µæ¸…å•**

> âœ… **åº”è¯¥åšçš„äº‹ï¼š**
> - å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
> - è¿›è¡Œä¸šåŠ¡è§„åˆ™éªŒè¯
> - ç®¡ç†äº‹åŠ¡è¾¹ç•Œ
> - åè°ƒå¤šä¸ªRepositoryæ“ä½œ
> - å¤„ç†ä¸šåŠ¡å¼‚å¸¸

> âŒ **ä¸åº”è¯¥åšçš„äº‹ï¼š**
> - å¤„ç†HTTPè¯·æ±‚ç»†èŠ‚
> - ç¼–å†™SQLè¯­å¥
> - ç›´æ¥æ“ä½œæ•°æ®åº“è¿æ¥
> - è¿”å›HTTPå“åº”å¯¹è±¡

### 8.3 DAOå±‚å®è·µæŒ‡å¯¼


**ğŸ“¦ DAOå±‚çš„æ ¸å¿ƒèŒè´£**

```java
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    
    // 1. åŸºæœ¬CRUDæ“ä½œï¼ˆç»§æ‰¿è‡ªJpaRepositoryï¼‰
    // save(), findById(), findAll(), delete() ç­‰
    
    // 2. ç®€å•æ¡ä»¶æŸ¥è¯¢
    Optional<User> findByEmail(String email);
    List<User> findByStatus(UserStatus status);
    
    // 3. å¤æ‚æŸ¥è¯¢
    @Query("SELECT u FROM User u WHERE u.createTime >= :startTime " +
           "AND u.status = :status ORDER BY u.createTime DESC")
    List<User> findActiveUsersCreatedAfter(
        @Param("startTime") LocalDateTime startTime,
        @Param("status") UserStatus status
    );
    
    // 4. ç»Ÿè®¡æŸ¥è¯¢
    @Query("SELECT COUNT(u) FROM User u WHERE u.status = :status")
    long countByStatus(@Param("status") UserStatus status);
    
    // 5. æ›´æ–°æ“ä½œ
    @Modifying
    @Query("UPDATE User u SET u.lastLoginTime = :loginTime WHERE u.id = :userId")
    void updateLastLoginTime(@Param("userId") Long userId, 
                           @Param("loginTime") LocalDateTime loginTime);
    
    // DAOå±‚åªå…³æ³¨æ•°æ®æ“ä½œï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
}

// å¤æ‚æŸ¥è¯¢å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å®ç°
@Repository
public class UserRepositoryCustomImpl implements UserRepositoryCustom {
    
    @Autowired
    private EntityManager entityManager;
    
    public List<User> findUsersByComplexConditions(UserSearchCriteria criteria) {
        // å¤æ‚çš„åŠ¨æ€æŸ¥è¯¢é€»è¾‘
        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery<User> query = cb.createQuery(User.class);
        // ... å¤æ‚æŸ¥è¯¢æ„å»º
        return entityManager.createQuery(query).getResultList();
    }
}
```

**ğŸ“ DAOå±‚æœ€ä½³å®è·µæ¸…å•**

> âœ… **åº”è¯¥åšçš„äº‹ï¼š**
> - å®šä¹‰æ•°æ®è®¿é—®æ¥å£
> - ç¼–å†™SQLæŸ¥è¯¢è¯­å¥
> - å¤„ç†æ•°æ®åº“å¼‚å¸¸
> - ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
> - ç®¡ç†æ•°æ®åº“è¿æ¥

> âŒ **ä¸åº”è¯¥åšçš„äº‹ï¼š**
> - åŒ…å«ä¸šåŠ¡é€»è¾‘
> - å¤„ç†ä¸šåŠ¡å¼‚å¸¸
> - è°ƒç”¨å…¶ä»–Service
> - å¤„ç†HTTPè¯·æ±‚

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åˆ†å±‚æ¶æ„ï¼šåƒæ­ç§¯æœ¨ä¸€æ ·åˆ†å±‚æ„å»ºç³»ç»Ÿï¼Œæ¯å±‚ä¸“æ³¨è‡ªå·±çš„èŒè´£
ğŸ”¸ ä¸‰å±‚è®¾è®¡ï¼šControllerï¼ˆæ¥å¾…ï¼‰â†’ Serviceï¼ˆå¤„ç†ï¼‰â†’ DAOï¼ˆå­˜å‚¨ï¼‰
ğŸ”¸ èŒè´£è¾¹ç•Œï¼šæ¯å±‚åªåšè‡ªå·±çš„äº‹ï¼Œä¸è¶Šç•Œä¸æ··æ·†
ğŸ”¸ ä¾èµ–æ–¹å‘ï¼šä¸Šå±‚è°ƒç”¨ä¸‹å±‚ï¼ŒåŒå±‚åä½œï¼Œé¿å…å¾ªç¯ä¾èµ–
ğŸ”¸ æŠ½è±¡æ€ç»´ï¼šé€»è¾‘æŠ½è±¡ã€æ•°æ®æŠ½è±¡ã€è¡Œä¸ºæŠ½è±¡
ğŸ”¸ è§£è€¦è®¾è®¡ï¼šä¾èµ–æ¥å£ä¸ä¾èµ–å®ç°ï¼Œä¾¿äºæ›¿æ¢å’Œæµ‹è¯•
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆè¦åˆ†å±‚**
```
å¤æ‚é—®é¢˜ç®€å•åŒ–ï¼š
- å¤§ç³»ç»Ÿ â†’ åˆ†è§£ä¸ºå°æ¨¡å—
- å¤æ‚é€»è¾‘ â†’ åˆ†å±‚æ¬¡å¤„ç†  
- æ··ä¹±ä»£ç  â†’ èŒè´£æ˜ç¡®

å¯ç»´æŠ¤æ€§æå‡ï¼š
- ä¿®æ”¹æŸå±‚ä¸å½±å“å…¶ä»–å±‚
- æ¯å±‚å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- ä¾¿äºå›¢é˜Ÿåˆ†å·¥åä½œ
```

**ğŸ”¹ èŒè´£è¾¹ç•Œçš„é‡è¦æ€§**
```
å°±åƒç°å®åˆ†å·¥ï¼š
- æœåŠ¡å‘˜ä¸ä¸‹å¨æˆ¿ï¼ˆControllerä¸å†™ä¸šåŠ¡é€»è¾‘ï¼‰
- å¨å¸ˆä¸æ¥å®¢ï¼ˆServiceä¸å¤„ç†HTTPï¼‰
- é‡‡è´­å‘˜ä¸åšèœï¼ˆDAOä¸å¤„ç†ä¸šåŠ¡ï¼‰

è¿åè¾¹ç•Œçš„åæœï¼š
- ä»£ç æ··ä¹±éš¾ä»¥ç»´æŠ¤
- æµ‹è¯•å›°éš¾
- å¤ç”¨æ€§å·®
- å›¢é˜Ÿåä½œå›°éš¾
```

**ğŸ”¹ æŠ½è±¡çš„ä»·å€¼**
```
æŠ½è±¡è®©å¤æ‚å˜ç®€å•ï¼š
- éšè—å®ç°ç»†èŠ‚
- ä¸“æ³¨æ ¸å¿ƒæ¦‚å¿µ
- æé«˜ä»£ç å¤ç”¨æ€§
- ä¾¿äºç†è§£å’Œç»´æŠ¤
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ å¦‚ä½•åˆ¤æ–­åˆ†å±‚æ˜¯å¦åˆç†**
```
çœ‹èŒè´£ï¼šæ¯å±‚æ˜¯å¦åªåšè‡ªå·±è¯¥åšçš„äº‹ï¼Ÿ
çœ‹ä¾èµ–ï¼šä¾èµ–æ–¹å‘æ˜¯å¦æ¸…æ™°ï¼Ÿ
çœ‹å¤ç”¨ï¼šä»£ç æ˜¯å¦å¯ä»¥å¤ç”¨ï¼Ÿ
çœ‹æµ‹è¯•ï¼šæ¯å±‚æ˜¯å¦å¯ä»¥ç‹¬ç«‹æµ‹è¯•ï¼Ÿ
çœ‹ç»´æŠ¤ï¼šä¿®æ”¹ä¸€å±‚æ˜¯å¦å½±å“å…¶ä»–å±‚ï¼Ÿ
```

**ğŸ¯ åˆ†å±‚æ¶æ„çš„å®è·µå»ºè®®**
```
ä»ç®€å•å¼€å§‹ï¼š
- å…ˆæŠŠåŸºæœ¬çš„ä¸‰å±‚åˆ†æ¸…æ¥š
- ä¸è¦è¿‡åº¦è®¾è®¡ï¼Œæ ¹æ®éœ€è¦æ¼”è¿›
- é‡ç‚¹å…³æ³¨èŒè´£è¾¹ç•Œ

å›¢é˜Ÿåä½œï¼š
- åˆ¶å®šåˆ†å±‚è§„èŒƒ
- ä»£ç å®¡æŸ¥æ—¶æ£€æŸ¥åˆ†å±‚
- åŸ¹å…»å›¢é˜Ÿçš„åˆ†å±‚æ€ç»´

æŒç»­ä¼˜åŒ–ï¼š
- å®šæœŸé‡æ„ä¸åˆç†çš„åˆ†å±‚
- æ ¹æ®ä¸šåŠ¡å‘å±•è°ƒæ•´æ¶æ„
- å­¦ä¹ ä¸šç•Œæœ€ä½³å®è·µ
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
åˆ†å±‚æ¶æ„ä¸‰å±‚æ¸…ï¼ŒèŒè´£è¾¹ç•Œè¦åˆ†æ˜
Controllerç®¡æ¥å£ï¼ŒServiceå¤„ç†ä¸šåŠ¡é€»è¾‘
DAOä¸“ç®¡æ•°æ®åº“ï¼Œä¾èµ–æ–¹å‘ä¸èƒ½é€†
æŠ½è±¡æ€ç»´å¾ˆé‡è¦ï¼Œè§£è€¦è®¾è®¡è´¨é‡é«˜
```