---
title: 31ã€é¢„è®¡ç®—è¡¨ï¼šè¡¨æ ¼ç©ºé—´æ¢è®¡ç®—æ—¶é—´
---
## ğŸ“š ç›®å½•

1. [é¢„è®¡ç®—è¡¨çš„æ ¸å¿ƒæ€æƒ³](#1-é¢„è®¡ç®—è¡¨çš„æ ¸å¿ƒæ€æƒ³)
2. [æƒè¡¡ä½“ç°ï¼šç©ºé—´ä¸æ—¶é—´çš„å¹³è¡¡](#2-æƒè¡¡ä½“ç°ç©ºé—´ä¸æ—¶é—´çš„å¹³è¡¡)
3. [æ•°å­¦å‡½æ•°è¡¨çš„é¢„è®¡ç®—](#3-æ•°å­¦å‡½æ•°è¡¨çš„é¢„è®¡ç®—)
4. [ç»„åˆæ•°è¡¨çš„åŠ¨æ€è§„åˆ’æ„å»º](#4-ç»„åˆæ•°è¡¨çš„åŠ¨æ€è§„åˆ’æ„å»º)
5. [ç´ æ•°è¡¨ï¼šåŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•](#5-ç´ æ•°è¡¨åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•)
6. [è·ç¦»çŸ©é˜µï¼šåœ°ç†ä½ç½®é¢„è®¡ç®—](#6-è·ç¦»çŸ©é˜µåœ°ç†ä½ç½®é¢„è®¡ç®—)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ§  é¢„è®¡ç®—è¡¨çš„æ ¸å¿ƒæ€æƒ³


### 1.1 ä»€ä¹ˆæ˜¯é¢„è®¡ç®—è¡¨


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
é¢„è®¡ç®—è¡¨ï¼ˆPrecomputation Tableï¼‰ï¼š
æå‰è®¡ç®—å¹¶å­˜å‚¨å¤æ‚è¿ç®—çš„ç»“æœï¼Œç”¨æŸ¥è¡¨ä»£æ›¿é‡å¤è®¡ç®—çš„æŠ€æœ¯

ç®€å•ç†è§£ï¼šå°±åƒå‡†å¤‡ä¸€æœ¬ç°æˆçš„ç­”æ¡ˆå†Œï¼Œ
éœ€è¦æ—¶ç›´æ¥ç¿»é¡µæŸ¥çœ‹ï¼Œè€Œä¸æ˜¯ç°åœºè®¡ç®—
```

**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> å°±åƒæˆ‘ä»¬å°æ—¶å€™èƒŒä¹˜æ³•å£è¯€è¡¨ï¼š
> - ä¸èƒŒè¡¨ï¼šæ¯æ¬¡éƒ½è¦ 3+3+3+3 = 12
> - èƒŒäº†è¡¨ï¼šç›´æ¥çŸ¥é“ 3Ã—4 = 12
> 
> é¢„è®¡ç®—è¡¨å°±æ˜¯ç¨‹åºç•Œçš„"ä¹˜æ³•å£è¯€è¡¨"ï¼

### 1.2 é¢„è®¡ç®—çš„åŸºæœ¬åŸç†


**âš¡ å·¥ä½œæœºåˆ¶**
```
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯æ¬¡éœ€è¦æ—¶ç°åœºè®¡ç®—
è¾“å…¥ â†’ å¤æ‚è®¡ç®—è¿‡ç¨‹ â†’ è¾“å‡ºç»“æœ
æ—¶é—´ï¼šO(å¤æ‚åº¦) ç©ºé—´ï¼šO(1)

é¢„è®¡ç®—æ–¹å¼ï¼šæå‰ç®—å¥½å­˜èµ·æ¥
å‡†å¤‡é˜¶æ®µï¼šæ‰€æœ‰å¯èƒ½è¾“å…¥ â†’ æ‰¹é‡è®¡ç®— â†’ å­˜å‚¨åˆ°è¡¨
ä½¿ç”¨é˜¶æ®µï¼šè¾“å…¥ â†’ ç›´æ¥æŸ¥è¡¨ â†’ è¾“å‡ºç»“æœ
æ—¶é—´ï¼šO(1) ç©ºé—´ï¼šO(è¡¨å¤§å°)
```

**ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿**
- **æŸ¥è¯¢é€Ÿåº¦å¿«**ï¼šO(1) æ—¶é—´å¤æ‚åº¦ï¼Œç¬é—´è·å¾—ç»“æœ
- **è®¡ç®—é‡å‰ç½®**ï¼šä¸€æ¬¡è®¡ç®—ï¼Œå¤šæ¬¡ä½¿ç”¨
- **CPUèµ„æºèŠ‚çœ**ï¼šé¿å…é‡å¤å¤æ‚è¿ç®—

### 1.3 é€‚ç”¨åœºæ™¯åˆ¤æ–­


**âœ… é€‚åˆé¢„è®¡ç®—çš„æƒ…å†µ**
```
ğŸ”¸ è¾“å…¥èŒƒå›´æœ‰é™ï¼šæ¯”å¦‚0-1000ä¹‹é—´çš„æ•°å­—
ğŸ”¸ è®¡ç®—å¤æ‚åº¦é«˜ï¼šå¤æ‚çš„æ•°å­¦å‡½æ•°ã€é€’å½’è®¡ç®—
ğŸ”¸ æŸ¥è¯¢é¢‘ç‡é«˜ï¼šåŒæ ·çš„è®¡ç®—ä¼šè¢«åå¤è°ƒç”¨
ğŸ”¸ å†…å­˜å……è¶³ï¼šæœ‰è¶³å¤Ÿç©ºé—´å­˜å‚¨é¢„è®¡ç®—ç»“æœ
ğŸ”¸ è®¡ç®—ç¨³å®šï¼šç»“æœä¸ä¼šå› ä¸ºæ—¶é—´è€Œæ”¹å˜
```

**âŒ ä¸é€‚åˆé¢„è®¡ç®—çš„æƒ…å†µ**
```
ğŸ”¸ è¾“å…¥èŒƒå›´å·¨å¤§ï¼šæ¯”å¦‚64ä½æ•´æ•°çš„æ‰€æœ‰å¯èƒ½å€¼
ğŸ”¸ è®¡ç®—ç®€å•ï¼šç®€å•åŠ å‡æ³•ï¼Œç›´æ¥ç®—æ¯”æŸ¥è¡¨è¿˜å¿«
ğŸ”¸ æŸ¥è¯¢å¾ˆå°‘ï¼šè®¡ç®—ç»“æœåªç”¨ä¸€ä¸¤æ¬¡
ğŸ”¸ å†…å­˜ä¸è¶³ï¼šå­˜å‚¨å¼€é”€è¶…è¿‡æ”¶ç›Š
ğŸ”¸ ç»“æœåŠ¨æ€ï¼šè®¡ç®—ç»“æœä¼šå®æ—¶å˜åŒ–
```

---

## 2. âš–ï¸ æƒè¡¡ä½“ç°ï¼šç©ºé—´ä¸æ—¶é—´çš„å¹³è¡¡


### 2.1 æ—¶é—´ä¸ç©ºé—´çš„äº¤æ¢


**ğŸ“Š æƒè¡¡åˆ†æ**
```
æ—¶é—´æ•ˆç›Šï¼š
æŸ¥è¡¨æ—¶é—´ï¼šO(1)
åŸå§‹è®¡ç®—æ—¶é—´ï¼šO(n) åˆ° O(n!)
æ—¶é—´èŠ‚çœå€æ•°ï¼šå‡ åå€åˆ°å‡ ä¸‡å€

ç©ºé—´æˆæœ¬ï¼š
è¡¨æ ¼å¤§å°ï¼šè¾“å…¥èŒƒå›´ Ã— æ¯é¡¹å­˜å‚¨å¤§å°
å†…å­˜å ç”¨ï¼šå¯èƒ½ä»KBåˆ°GBçº§åˆ«
å­˜å‚¨ä»‹è´¨ï¼šå†…å­˜ã€ç£ç›˜ã€ç¼“å­˜
```

**ğŸ’° æˆæœ¬æ”¶ç›Šå¯¹æ¯”**

| ç»´åº¦ | **ä¼ ç»Ÿè®¡ç®—** | **é¢„è®¡ç®—è¡¨** | **æƒè¡¡è¯´æ˜** |
|------|-------------|-------------|-------------|
| ğŸ•’ **æŸ¥è¯¢æ—¶é—´** | `O(å¤æ‚åº¦)` | `O(1)` | `æ—¶é—´å¤§å¹…èŠ‚çœ` |
| ğŸ’¾ **å†…å­˜å ç”¨** | `å¾ˆå°‘` | `å¤§é‡` | `ç©ºé—´æˆæœ¬å¢åŠ ` |
| ğŸ—ï¸ **åˆå§‹åŒ–** | `æ— éœ€å‡†å¤‡` | `é¢„å¤„ç†æ—¶é—´` | `ä¸€æ¬¡æ€§æŠ•å…¥` |
| ğŸ”„ **æ›´æ–°æˆæœ¬** | `æ— ` | `é‡æ–°è®¡ç®—è¡¨` | `ç»´æŠ¤å¤æ‚åº¦` |
| ğŸ¯ **é€‚ç”¨æ€§** | `é€šç”¨` | `ç‰¹å®šèŒƒå›´` | `çµæ´»æ€§é™ä½` |

### 2.2 æƒè¡¡å†³ç­–æ¡†æ¶


**ğŸ¯ å†³ç­–æµç¨‹å›¾**
```
éœ€è¦é¢‘ç¹è®¡ç®—æŸä¸ªå‡½æ•°ï¼Ÿ
         â†“ æ˜¯
è¾“å…¥èŒƒå›´æ˜¯å¦æœ‰é™ä¸”å¯é¢„æµ‹ï¼Ÿ
         â†“ æ˜¯
è®¡ç®—å¤æ‚åº¦æ˜¯å¦è¾ƒé«˜ï¼Ÿ
         â†“ æ˜¯
æœ‰è¶³å¤Ÿå†…å­˜å­˜å‚¨ç»“æœè¡¨å—ï¼Ÿ
         â†“ æ˜¯
ä½¿ç”¨é¢„è®¡ç®—è¡¨ âœ…

ä»»ä½•ç¯èŠ‚ä¸º"å¦" â†’ è€ƒè™‘å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ âŒ
```

**ğŸ’¡ å®é™…è€ƒè™‘å› ç´ **
```
ä¸šåŠ¡åœºæ™¯ï¼š
- æ¸¸æˆï¼šå¸§ç‡è¦æ±‚é«˜ï¼ŒæŸ¥è¡¨æ¯”å®æ—¶è®¡ç®—å¿«
- ç§‘å­¦è®¡ç®—ï¼šå¤æ‚å‡½æ•°ï¼Œé¢„è®¡ç®—èŠ‚çœå¤§é‡æ—¶é—´
- ç½‘ç«™ï¼šè·ç¦»è®¡ç®—ã€æ¨èç®—æ³•çš„ä¸­é—´ç»“æœ

ç¡¬ä»¶æ¡ä»¶ï¼š
- å†…å­˜å……è¶³ï¼šå¯ä»¥ç”¨æ›´å¤§çš„è¡¨
- å†…å­˜ç´§å¼ ï¼šåªé¢„è®¡ç®—æœ€å…³é”®çš„éƒ¨åˆ†
- SSDå­˜å‚¨ï¼šå¯ä»¥è€ƒè™‘ç£ç›˜é¢„è®¡ç®—è¡¨
```

---

## 3. ğŸ“ æ•°å­¦å‡½æ•°è¡¨çš„é¢„è®¡ç®—


### 3.1 ä¸‰è§’å‡½æ•°é¢„è®¡ç®—è¡¨


**ğŸ”¸ ä¸ºä»€ä¹ˆè¦é¢„è®¡ç®—ä¸‰è§’å‡½æ•°**
```
é—®é¢˜èƒŒæ™¯ï¼š
sin(x)ã€cos(x) çš„ç²¾ç¡®è®¡ç®—éœ€è¦æ³°å‹’çº§æ•°å±•å¼€
è®¡ç®—è¿‡ç¨‹ï¼šæ— é™çº§æ•°æ±‚å’Œï¼Œè®¡ç®—é‡å·¨å¤§
åº”ç”¨åœºæ™¯ï¼šæ¸¸æˆå›¾å½¢ã€ä¿¡å·å¤„ç†ã€åŠ¨ç”»è®¡ç®—
```

**ğŸ’» ä¸‰è§’å‡½æ•°è¡¨å®ç°**
```java
public class TrigTable {
    private static final int TABLE_SIZE = 3600;  // 0.1åº¦ç²¾åº¦
    private static final double[] sinTable = new double[TABLE_SIZE + 1];
    private static final double[] cosTable = new double[TABLE_SIZE + 1];
    
    // é™æ€åˆå§‹åŒ–ï¼šç¨‹åºå¯åŠ¨æ—¶é¢„è®¡ç®—
    static {
        for (int i = 0; i <= TABLE_SIZE; i++) {
            double angle = Math.toRadians(i * 0.1);  // è½¬æ¢ä¸ºå¼§åº¦
            sinTable[i] = Math.sin(angle);
            cosTable[i] = Math.cos(angle);
        }
    }
    
    // O(1) æ—¶é—´æŸ¥è¡¨
    public static double fastSin(double degrees) {
        // è§’åº¦å½’ä¸€åŒ–åˆ° [0, 360)
        degrees = degrees % 360;
        if (degrees < 0) degrees += 360;
        
        int index = (int)(degrees * 10);  // 0.1åº¦ç²¾åº¦
        return sinTable[index];
    }
    
    public static double fastCos(double degrees) {
        degrees = degrees % 360;
        if (degrees < 0) degrees += 360;
        
        int index = (int)(degrees * 10);
        return cosTable[index];
    }
}
```

**âš¡ æ€§èƒ½å¯¹æ¯”**
```java
// æ€§èƒ½æµ‹è¯•ä»£ç 
public class TrigPerformanceTest {
    public static void main(String[] args) {
        int testCount = 1000000;
        
        // æµ‹è¯•ç›´æ¥è®¡ç®—
        long start = System.nanoTime();
        for (int i = 0; i < testCount; i++) {
            Math.sin(i * 0.1);
        }
        long directTime = System.nanoTime() - start;
        
        // æµ‹è¯•æŸ¥è¡¨
        start = System.nanoTime();
        for (int i = 0; i < testCount; i++) {
            TrigTable.fastSin(i * 0.1);
        }
        long tableTime = System.nanoTime() - start;
        
        System.out.println("ç›´æ¥è®¡ç®—: " + directTime / 1000000 + "ms");
        System.out.println("æŸ¥è¡¨è®¡ç®—: " + tableTime / 1000000 + "ms");
        System.out.println("åŠ é€Ÿå€æ•°: " + (directTime / tableTime) + "å€");
    }
}

// å…¸å‹ç»“æœï¼š
// ç›´æ¥è®¡ç®—: 45ms
// æŸ¥è¡¨è®¡ç®—: 8ms  
// åŠ é€Ÿå€æ•°: 5.6å€
```

### 3.2 å¯¹æ•°å‡½æ•°é¢„è®¡ç®—


**ğŸ”¸ å¯¹æ•°æŸ¥è¡¨çš„å®é™…åº”ç”¨**
```
åº”ç”¨åœºæ™¯ï¼š
- ä¿¡æ¯è®ºï¼šè®¡ç®—ä¿¡æ¯ç†µ H = -âˆ‘p*logâ‚‚(p)
- æœºå™¨å­¦ä¹ ï¼šé€»è¾‘å›å½’ä¸­çš„å¯¹æ•°ä¼¼ç„¶å‡½æ•°
- æ•°æ®åº“ï¼šB+æ ‘ç´¢å¼•é«˜åº¦ä¼°ç®—

ç²¾åº¦æƒè¡¡ï¼š
- é«˜ç²¾åº¦ï¼šè¡¨æ›´å¤§ï¼Œå†…å­˜å ç”¨å¤š
- ä½ç²¾åº¦ï¼šè¡¨è¾ƒå°ï¼Œä½†å¯èƒ½å½±å“è®¡ç®—å‡†ç¡®æ€§
```

**ğŸ’» å¯¹æ•°è¡¨å®ç°ç¤ºä¾‹**
```java
public class LogTable {
    private static final int TABLE_SIZE = 10000;
    private static final double[] log2Table = new double[TABLE_SIZE + 1];
    private static final double[] log10Table = new double[TABLE_SIZE + 1];
    
    static {
        // é¢„è®¡ç®— [1, 10] èŒƒå›´å†…çš„å¯¹æ•°å€¼
        for (int i = 1; i <= TABLE_SIZE; i++) {
            double x = i / 1000.0;  // 0.001ç²¾åº¦
            log2Table[i] = Math.log(x) / Math.log(2);
            log10Table[i] = Math.log10(x);
        }
    }
    
    public static double fastLog2(double x) {
        if (x <= 0 || x > 10) {
            throw new IllegalArgumentException("è¶…å‡ºé¢„è®¡ç®—èŒƒå›´");
        }
        
        int index = (int)(x * 1000);
        return log2Table[index];
    }
}
```

### 3.3 ç²¾åº¦ä¸æ€§èƒ½çš„å¹³è¡¡


**ğŸ¯ ç²¾åº¦æ§åˆ¶ç­–ç•¥**
```
æ’å€¼ä¼˜åŒ–ï¼š
å½“æŸ¥è¡¨ç²¾åº¦ä¸å¤Ÿæ—¶ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ€§æ’å€¼

double fastSinWithInterpolation(double degrees) {
    int index = (int)(degrees * 10);
    double remainder = (degrees * 10) - index;
    
    if (remainder == 0) {
        return sinTable[index];  // ç²¾ç¡®å‘½ä¸­
    }
    
    // çº¿æ€§æ’å€¼
    return sinTable[index] + remainder * (sinTable[index + 1] - sinTable[index]);
}

ä¼˜åŠ¿ï¼šä¸å¢åŠ è¡¨å¤§å°ï¼Œæé«˜ç²¾åº¦
åŠ£åŠ¿ï¼šå¢åŠ å°‘é‡è®¡ç®—å¼€é”€ï¼Œä½†ä»æ¯”ç›´æ¥è®¡ç®—å¿«
```

---

## 4. ğŸ”¢ ç»„åˆæ•°è¡¨çš„åŠ¨æ€è§„åˆ’æ„å»º


### 4.1 ç»„åˆæ•°çš„è®¡ç®—é—®é¢˜


**ğŸ”¸ ä»€ä¹ˆæ˜¯ç»„åˆæ•°**
```
ç»„åˆæ•° C(n,k)ï¼šä»nä¸ªç‰©å“ä¸­é€‰æ‹©kä¸ªçš„æ–¹æ¡ˆæ•°

æ•°å­¦å®šä¹‰ï¼šC(n,k) = n! / (k! * (n-k)!)

é€’æ¨å…³ç³»ï¼šC(n,k) = C(n-1,k-1) + C(n-1,k)
è¾¹ç•Œæ¡ä»¶ï¼šC(n,0) = C(n,n) = 1

ç”Ÿæ´»ä¾‹å­ï¼šä»10ä¸ªäººä¸­é€‰3ä¸ªäººç»„é˜Ÿ
C(10,3) = 10Ã—9Ã—8 / (3Ã—2Ã—1) = 120ç§æ–¹æ¡ˆ
```

**âš ï¸ ç›´æ¥è®¡ç®—çš„é—®é¢˜**
```
é˜¶ä¹˜è®¡ç®—é—®é¢˜ï¼š
- n! å¢é•¿æå¿«ï¼Œå®¹æ˜“æº¢å‡º
- é‡å¤è®¡ç®—ï¼šC(100,50) éœ€è¦è®¡ç®—ä¸‰ä¸ªå¤§é˜¶ä¹˜
- ç²¾åº¦æŸå¤±ï¼šå¤§æ•°é™¤æ³•å¯èƒ½ä¸¢å¤±ç²¾åº¦

ä¾‹å¦‚è®¡ç®— C(50,25)ï¼š
50! = 30414093201713378043612608166064768844377641568960512000000000000
è®¡ç®—å’Œå­˜å‚¨éƒ½å¾ˆå›°éš¾ï¼
```

### 4.2 åŠ¨æ€è§„åˆ’é¢„è®¡ç®—ç»„åˆæ•°è¡¨


**ğŸ’» ç»„åˆæ•°è¡¨å®ç°**
```java
public class CombinationTable {
    private static final int MAX_N = 1000;
    private static long[][] C = new long[MAX_N + 1][MAX_N + 1];
    
    static {
        buildCombinationTable();
    }
    
    // ä½¿ç”¨åŠ¨æ€è§„åˆ’æ„å»ºç»„åˆæ•°è¡¨
    private static void buildCombinationTable() {
        // åˆå§‹åŒ–è¾¹ç•Œæ¡ä»¶
        for (int n = 0; n <= MAX_N; n++) {
            C[n][0] = 1;  // C(n,0) = 1
            C[n][n] = 1;  // C(n,n) = 1
        }
        
        // ä½¿ç”¨é€’æ¨å…³ç³»å¡«è¡¨
        for (int n = 2; n <= MAX_N; n++) {
            for (int k = 1; k < n; k++) {
                C[n][k] = C[n-1][k-1] + C[n-1][k];
                
                // æº¢å‡ºæ£€æµ‹ï¼ˆå¯é€‰ï¼‰
                if (C[n][k] < 0) {
                    C[n][k] = Long.MAX_VALUE;  // æ ‡è®°æº¢å‡º
                }
            }
        }
    }
    
    // O(1) æŸ¥è¡¨
    public static long getCombination(int n, int k) {
        if (n < 0 || k < 0 || k > n || n > MAX_N) {
            return 0;
        }
        return C[n][k];
    }
    
    // æ‰¹é‡æŸ¥è¯¢ç¤ºä¾‹
    public static void printPascalTriangle(int rows) {
        for (int n = 0; n < rows; n++) {
            for (int k = 0; k <= n; k++) {
                System.out.print(C[n][k] + " ");
            }
            System.out.println();
        }
    }
}
```

**ğŸ¯ å¸•æ–¯å¡ä¸‰è§’å½¢å¯è§†åŒ–**
```
ç»„åˆæ•°è¡¨å°±æ˜¯å¸•æ–¯å¡ä¸‰è§’å½¢ï¼š

    1
   1 1
  1 2 1
 1 3 3 1
1 4 6 4 1

æ¯ä¸ªä½ç½® C[n][k] ç­‰äºä¸Šæ–¹ä¸¤ä¸ªæ•°çš„å’Œ
è¿™å°±æ˜¯åŠ¨æ€è§„åˆ’çš„é€’æ¨å…³ç³»ï¼
```

### 4.3 ç©ºé—´ä¼˜åŒ–æŠ€å·§


**ğŸ”¸ æ»šåŠ¨æ•°ç»„ä¼˜åŒ–**
```java
// å¦‚æœåªéœ€è¦è®¡ç®—å•è¡Œç»„åˆæ•°ï¼Œå¯ä»¥ç”¨ä¸€ç»´æ•°ç»„
public class OptimizedCombination {
    public static long[] getCombinationRow(int n) {
        long[] row = new long[n + 1];
        row[0] = 1;
        
        for (int i = 1; i <= n; i++) {
            // ä»å³åˆ°å·¦æ›´æ–°ï¼Œé¿å…è¦†ç›–
            for (int j = i; j > 0; j--) {
                row[j] += row[j-1];
            }
        }
        
        return row;
    }
}

ç©ºé—´å¤æ‚åº¦ï¼šä»O(nÂ²)ä¼˜åŒ–åˆ°O(n)
é€‚ç”¨åœºæ™¯ï¼šåªéœ€è¦ç‰¹å®šè¡Œçš„ç»„åˆæ•°
```

**ğŸ“Š å†…å­˜ä½¿ç”¨åˆ†æ**
```
å®Œæ•´ç»„åˆæ•°è¡¨ (n=1000)ï¼š
å­˜å‚¨ç©ºé—´ï¼š1000Ã—1000Ã—8å­—èŠ‚ = 8MB
è®¡ç®—æ—¶é—´ï¼šä¸€æ¬¡æ€§é¢„è®¡ç®—çº¦å‡ æ¯«ç§’
æŸ¥è¯¢æ—¶é—´ï¼šO(1)

å•è¡Œè®¡ç®—ï¼š
å­˜å‚¨ç©ºé—´ï¼šnÃ—8å­—èŠ‚ = 8KB (n=1000)
è®¡ç®—æ—¶é—´ï¼šæ¯æ¬¡O(nÂ²)
æŸ¥è¯¢æ—¶é—´ï¼šéœ€è¦é‡æ–°è®¡ç®—

æƒè¡¡é€‰æ‹©ï¼šæŸ¥è¯¢é¢‘ç¹é€‰å®Œæ•´è¡¨ï¼Œå¶å°”æŸ¥è¯¢é€‰å•è¡Œè®¡ç®—
```

---

## 5. ğŸ” ç´ æ•°è¡¨ï¼šåŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•


### 5.1 ç´ æ•°åˆ¤æ–­çš„æŒ‘æˆ˜


**ğŸ”¸ ä»€ä¹ˆæ˜¯ç´ æ•°é—®é¢˜**
```
ç´ æ•°å®šä¹‰ï¼šåªèƒ½è¢«1å’Œè‡ªå·±æ•´é™¤çš„å¤§äº1çš„æ•´æ•°
ä¾‹å¦‚ï¼š2, 3, 5, 7, 11, 13, 17, 19, 23...

å¸¸è§åº”ç”¨ï¼š
- å¯†ç å­¦ï¼šRSAåŠ å¯†ç®—æ³•éœ€è¦å¤§ç´ æ•°
- å“ˆå¸Œå‡½æ•°ï¼šå¥½çš„å“ˆå¸Œå‡½æ•°å¸¸ç”¨ç´ æ•°ä½œå‚æ•°
- æ•°å­¦ç«èµ›ï¼šç´ æ•°ç›¸å…³çš„ç®—æ³•é¢˜
- ç¼–è¯‘å™¨ï¼šç´ æ•°å¤§å°çš„å“ˆå¸Œè¡¨æ€§èƒ½æ›´å¥½
```

**âš ï¸ ç›´æ¥åˆ¤æ–­ç´ æ•°çš„é—®é¢˜**
```java
// æœ´ç´ æ–¹æ³•ï¼šæ¯æ¬¡éƒ½è¦è¯•é™¤
public static boolean isPrime(int n) {
    if (n < 2) return false;
    
    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0) return false;  // æ‰¾åˆ°å› å­ï¼Œä¸æ˜¯ç´ æ•°
    }
    return true;
}

é—®é¢˜ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼šO(âˆšn)
- é‡å¤è®¡ç®—ï¼šåˆ¤æ–­1000æ¬¡æ˜¯å¦ç´ æ•°ï¼Œæ¯æ¬¡éƒ½è¦é‡æ–°è¯•é™¤
- æ•ˆç‡ä½ä¸‹ï¼šå¤§æ•°åˆ¤æ–­æ—¶é—´å¾ˆé•¿
```

### 5.2 åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•åŸç†


**ğŸ§  ç­›æ³•æ ¸å¿ƒæ€æƒ³**
```
åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•ï¼ˆSieve of Eratosthenesï¼‰ï¼š
å¤å¸Œè…Šæ•°å­¦å®¶åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼å‘æ˜çš„æ±‚ç´ æ•°æ–¹æ³•

æ ¸å¿ƒæ€æƒ³ï¼šæ ‡è®°åˆæ•°ï¼Œå‰©ä¸‹çš„å°±æ˜¯ç´ æ•°

å·¥ä½œæµç¨‹ï¼š
1. åˆ—å‡º2åˆ°nçš„æ‰€æœ‰æ•°å­—
2. ä»2å¼€å§‹ï¼Œæ ‡è®°2çš„æ‰€æœ‰å€æ•°ï¼ˆ4,6,8,10...ï¼‰ä¸ºåˆæ•°
3. æ‰¾åˆ°ä¸‹ä¸€ä¸ªæœªæ ‡è®°çš„æ•°ï¼ˆè¿™æ˜¯ç´ æ•°ï¼‰ï¼Œé‡å¤æ­¥éª¤2
4. ç»§ç»­ç›´åˆ°æ‰€æœ‰æ•°éƒ½è¢«å¤„ç†

å°±åƒç”¨ç­›å­ç­›é¢ç²‰ï¼Œç•™ä¸‹çš„éƒ½æ˜¯ç´ æ•°ï¼
```

**ğŸ“ ç­›æ³•è¿‡ç¨‹å›¾ç¤º**
```
åˆå§‹çŠ¶æ€ï¼š2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20

ç¬¬1æ­¥ï¼š2æ˜¯ç´ æ•°ï¼Œç­›æ‰2çš„å€æ•°
ç»“æœï¼š  2 3 X 5 X 7 X 9 X  11 X  13 X  15 X  17 X  19 X

ç¬¬2æ­¥ï¼š3æ˜¯ç´ æ•°ï¼Œç­›æ‰3çš„å€æ•°  
ç»“æœï¼š  2 3 X 5 X 7 X X X  11 X  13 X  X  X  17 X  19 X

ç¬¬3æ­¥ï¼š5æ˜¯ç´ æ•°ï¼Œç­›æ‰5çš„å€æ•°
ç»“æœï¼š  2 3 X 5 X 7 X X X  11 X  13 X  X  X  17 X  19 X

ç»§ç»­å¤„ç†7, 11, 13...

æœ€ç»ˆç´ æ•°ï¼š2 3 5 7 11 13 17 19
```

### 5.3 ç´ æ•°è¡¨çš„é«˜æ•ˆå®ç°


**ğŸ’» æ ‡å‡†ç­›æ³•å®ç°**
```java
public class PrimeTable {
    private static final int MAX_N = 1000000;
    private static boolean[] isPrime = new boolean[MAX_N + 1];
    private static List<Integer> primes = new ArrayList<>();
    
    static {
        sieveOfEratosthenes();
    }
    
    // åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•é¢„è®¡ç®—
    private static void sieveOfEratosthenes() {
        // åˆå§‹åŒ–ï¼šå‡è®¾æ‰€æœ‰æ•°éƒ½æ˜¯ç´ æ•°
        Arrays.fill(isPrime, true);
        isPrime[0] = isPrime[1] = false;  // 0å’Œ1ä¸æ˜¯ç´ æ•°
        
        for (int i = 2; i * i <= MAX_N; i++) {
            if (isPrime[i]) {  // iæ˜¯ç´ æ•°
                primes.add(i);
                
                // æ ‡è®°içš„æ‰€æœ‰å€æ•°ä¸ºåˆæ•°
                for (int j = i * i; j <= MAX_N; j += i) {
                    isPrime[j] = false;
                }
            }
        }
        
        // æ”¶é›†å‰©ä½™çš„ç´ æ•°
        for (int i = (int)Math.sqrt(MAX_N) + 1; i <= MAX_N; i++) {
            if (isPrime[i]) {
                primes.add(i);
            }
        }
    }
    
    // O(1) æ—¶é—´åˆ¤æ–­ç´ æ•°
    public static boolean checkPrime(int n) {
        if (n < 0 || n > MAX_N) {
            throw new IllegalArgumentException("è¶…å‡ºé¢„è®¡ç®—èŒƒå›´");
        }
        return isPrime[n];
    }
    
    // è·å–ç¬¬kä¸ªç´ æ•°
    public static int getKthPrime(int k) {
        if (k < 1 || k > primes.size()) {
            throw new IllegalArgumentException("ç´¢å¼•è¶…å‡ºèŒƒå›´");
        }
        return primes.get(k - 1);
    }
    
    // è·å–å°äºnçš„æ‰€æœ‰ç´ æ•°
    public static List<Integer> getPrimesBelow(int n) {
        List<Integer> result = new ArrayList<>();
        for (int prime : primes) {
            if (prime >= n) break;
            result.add(prime);
        }
        return result;
    }
}
```

**âš¡ ä¼˜åŒ–ç‰ˆæœ¬ï¼šçº¿æ€§ç­›æ³•**
```java
// æ¬§æ‹‰ç­›æ³•ï¼ˆçº¿æ€§ç­›ï¼‰ï¼šæ¯ä¸ªåˆæ•°åªè¢«å…¶æœ€å°ç´ å› å­ç­›ä¸€æ¬¡
public class LinearSieve {
    private static final int MAX_N = 1000000;
    private static boolean[] isPrime = new boolean[MAX_N + 1];
    private static int[] minPrimeFactor = new int[MAX_N + 1];
    private static List<Integer> primes = new ArrayList<>();
    
    static {
        eulerSieve();
    }
    
    private static void eulerSieve() {
        Arrays.fill(isPrime, true);
        isPrime[0] = isPrime[1] = false;
        
        for (int i = 2; i <= MAX_N; i++) {
            if (isPrime[i]) {
                primes.add(i);
                minPrimeFactor[i] = i;
            }
            
            for (int j = 0; j < primes.size() && i * primes.get(j) <= MAX_N; j++) {
                int composite = i * primes.get(j);
                isPrime[composite] = false;
                minPrimeFactor[composite] = primes.get(j);
                
                if (i % primes.get(j) == 0) break;  // å…³é”®ä¼˜åŒ–
            }
        }
    }
    
    // é¢å¤–åŠŸèƒ½ï¼šè·å–æœ€å°ç´ å› å­
    public static int getMinPrimeFactor(int n) {
        return minPrimeFactor[n];
    }
}

ä¼˜åŠ¿ï¼šæ—¶é—´å¤æ‚åº¦O(n)ï¼Œæ¯ä¸ªæ•°åªè¢«ç­›ä¸€æ¬¡
åº”ç”¨ï¼šé€‚åˆéœ€è¦ç´ å› æ•°åˆ†è§£çš„åœºæ™¯
```

### 5.4 ç´ æ•°è¡¨çš„å®é™…åº”ç”¨


**ğŸ¯ å¯†ç å­¦åº”ç”¨**
```java
// RSAå¯†é’¥ç”Ÿæˆä¸­çš„å¤§ç´ æ•°æŸ¥æ‰¾
public class RSAKeyHelper {
    // åœ¨æŒ‡å®šèŒƒå›´å†…æ‰¾åˆ°éšæœºç´ æ•°å¯¹
    public static Pair<Integer, Integer> generatePrimePair(int min, int max) {
        List<Integer> candidates = new ArrayList<>();
        
        for (int p : PrimeTable.getPrimesBelow(max)) {
            if (p >= min) candidates.add(p);
        }
        
        Collections.shuffle(candidates);
        return new Pair<>(candidates.get(0), candidates.get(1));
    }
}
```

**ğŸ”§ å“ˆå¸Œè¡¨ä¼˜åŒ–**
```java
// é€‰æ‹©ç´ æ•°ä½œä¸ºå“ˆå¸Œè¡¨å¤§å°ï¼Œå‡å°‘å†²çª
public class PrimeHashTable<K, V> {
    private int capacity;
    
    public PrimeHashTable(int expectedSize) {
        // æ‰¾åˆ°å¤§äºexpectedSizeçš„æœ€å°ç´ æ•°ä½œä¸ºå®¹é‡
        for (int prime : PrimeTable.getPrimesBelow(expectedSize * 2)) {
            if (prime > expectedSize) {
                this.capacity = prime;
                break;
            }
        }
    }
}
```

---

## 6. ğŸ—ºï¸ è·ç¦»çŸ©é˜µï¼šåœ°ç†ä½ç½®é¢„è®¡ç®—


### 6.1 åœ°ç†è·ç¦»è®¡ç®—çš„å¤æ‚æ€§


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦é¢„è®¡ç®—è·ç¦»**
```
åº”ç”¨åœºæ™¯ï¼š
- å¯¼èˆªè½¯ä»¶ï¼šè®¡ç®—æœ€çŸ­è·¯å¾„éœ€è¦å¤§é‡è·ç¦»æŸ¥è¯¢
- å¤–å–é…é€ï¼šéª‘æ‰‹åˆ°é¤å…ã€é¤å…åˆ°ç”¨æˆ·çš„è·ç¦»è®¡ç®—
- æ—…æ¸¸è§„åˆ’ï¼šæ™¯ç‚¹ä¹‹é—´çš„è·ç¦»å’Œæ—¶é—´é¢„ä¼°
- ç‰©æµä¼˜åŒ–ï¼šè´§è½¦è·¯çº¿è§„åˆ’ï¼Œä»“åº“åˆ°å®¢æˆ·è·ç¦»

è®¡ç®—å¤æ‚åº¦ï¼š
- ç›´çº¿è·ç¦»ï¼šéœ€è¦ç»çº¬åº¦æ¢ç®—å’Œä¸‰è§’å‡½æ•°è®¡ç®—
- å®é™…è·ç¦»ï¼šéœ€è¦è°ƒç”¨åœ°å›¾APIæˆ–è·¯å¾„æœç´¢ç®—æ³•
- åŠ¨æ€æŸ¥è¯¢ï¼šæ¯æ¬¡éƒ½è®¡ç®—ä¼šä¸¥é‡å½±å“å“åº”é€Ÿåº¦
```

**ğŸŒ è·ç¦»è®¡ç®—å…¬å¼**
```java
// å“ˆå¼—è¾›å…¬å¼ï¼šè®¡ç®—åœ°çƒè¡¨é¢ä¸¤ç‚¹é—´çš„ç›´çº¿è·ç¦»
public class GeoDistance {
    private static final double EARTH_RADIUS = 6371; // åœ°çƒåŠå¾„(km)
    
    public static double calculateDistance(double lat1, double lon1, 
                                         double lat2, double lon2) {
        // è½¬æ¢ä¸ºå¼§åº¦
        double dLat = Math.toRadians(lat2 - lat1);
        double dLon = Math.toRadians(lon2 - lon1);
        double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                   Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
                   Math.sin(dLon/2) * Math.sin(dLon/2);
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return EARTH_RADIUS * c;
    }
}

é—®é¢˜ï¼šæ¯æ¬¡è°ƒç”¨æ¶‰åŠå¤šæ¬¡ä¸‰è§’å‡½æ•°è¿ç®—ï¼Œè®¡ç®—å¼€é”€å¤§
```

### 6.2 è·ç¦»çŸ©é˜µçš„æ„å»º


**ğŸ’» åŸå¸‚è·ç¦»çŸ©é˜µå®ç°**
```java
public class CityDistanceMatrix {
    private List<City> cities;
    private double[][] distanceMatrix;
    private Map<String, Integer> cityIndex;
    
    public static class City {
        String name;
        double latitude;
        double longitude;
        
        public City(String name, double lat, double lon) {
            this.name = name;
            this.latitude = lat;
            this.longitude = lon;
        }
    }
    
    public CityDistanceMatrix(List<City> cities) {
        this.cities = cities;
        this.distanceMatrix = new double[cities.size()][cities.size()];
        this.cityIndex = new HashMap<>();
        
        buildCityIndex();
        precomputeDistances();
    }
    
    private void buildCityIndex() {
        for (int i = 0; i < cities.size(); i++) {
            cityIndex.put(cities.get(i).name, i);
        }
    }
    
    // é¢„è®¡ç®—æ‰€æœ‰åŸå¸‚å¯¹ä¹‹é—´çš„è·ç¦»
    private void precomputeDistances() {
        System.out.println("å¼€å§‹é¢„è®¡ç®—è·ç¦»çŸ©é˜µ...");
        long startTime = System.currentTimeMillis();
        
        for (int i = 0; i < cities.size(); i++) {
            for (int j = 0; j < cities.size(); j++) {
                if (i == j) {
                    distanceMatrix[i][j] = 0;  // åŒä¸€åŸå¸‚è·ç¦»ä¸º0
                } else {
                    City city1 = cities.get(i);
                    City city2 = cities.get(j);
                    distanceMatrix[i][j] = GeoDistance.calculateDistance(
                        city1.latitude, city1.longitude,
                        city2.latitude, city2.longitude
                    );
                }
            }
        }
        
        long endTime = System.currentTimeMillis();
        System.out.println("é¢„è®¡ç®—å®Œæˆï¼Œè€—æ—¶: " + (endTime - startTime) + "ms");
    }
    
    // O(1) æ—¶é—´æŸ¥è¯¢è·ç¦»
    public double getDistance(String city1, String city2) {
        Integer index1 = cityIndex.get(city1);
        Integer index2 = cityIndex.get(city2);
        
        if (index1 == null || index2 == null) {
            throw new IllegalArgumentException("åŸå¸‚ä¸å­˜åœ¨");
        }
        
        return distanceMatrix[index1][index2];
    }
    
    // æ‰¾åˆ°è·ç¦»æŸåŸå¸‚æœ€è¿‘çš„kä¸ªåŸå¸‚
    public List<String> findNearestCities(String centerCity, int k) {
        Integer centerIndex = cityIndex.get(centerCity);
        if (centerIndex == null) return new ArrayList<>();
        
        // åˆ›å»ºè·ç¦»-åŸå¸‚å¯¹çš„åˆ—è¡¨
        List<CityDistance> cityDistances = new ArrayList<>();
        for (int i = 0; i < cities.size(); i++) {
            if (i != centerIndex) {  // æ’é™¤è‡ªå·±
                cityDistances.add(new CityDistance(
                    cities.get(i).name, 
                    distanceMatrix[centerIndex][i]
                ));
            }
        }
        
        // æŒ‰è·ç¦»æ’åº
        cityDistances.sort((a, b) -> Double.compare(a.distance, b.distance));
        
        // è¿”å›å‰kä¸ªæœ€è¿‘çš„åŸå¸‚
        return cityDistances.stream()
                           .limit(k)
                           .map(cd -> cd.cityName)
                           .collect(Collectors.toList());
    }
    
    private static class CityDistance {
        String cityName;
        double distance;
        
        CityDistance(String name, double dist) {
            this.cityName = name;
            this.distance = dist;
        }
    }
}
```

### 6.3 åŠ¨æ€è·ç¦»çŸ©é˜µä¼˜åŒ–


**ğŸ”¸ å¤„ç†å¤§è§„æ¨¡åŸå¸‚æ•°æ®**
```java
// åˆ†å—è·ç¦»çŸ©é˜µï¼šå¤„ç†ä¸Šä¸‡ä¸ªåœ°ç‚¹çš„æƒ…å†µ
public class BlockedDistanceMatrix {
    private static final int BLOCK_SIZE = 1000;  // æ¯å—æœ€å¤š1000ä¸ªåœ°ç‚¹
    private List<DistanceBlock> blocks;
    
    // æŒ‰åœ°ç†åŒºåŸŸåˆ†å—
    public static class DistanceBlock {
        String regionName;
        List<Location> locations;
        double[][] distances;
        
        // åªé¢„è®¡ç®—å—å†…è·ç¦»ï¼Œè·¨å—è·ç¦»å®æ—¶è®¡ç®—æˆ–ç¼“å­˜
    }
    
    // æ™ºèƒ½ç¼“å­˜ç­–ç•¥
    private Map<String, Double> crossBlockCache = new LRUCache<>(10000);
    
    public double getDistance(String loc1, String loc2) {
        // 1. æ£€æŸ¥æ˜¯å¦åœ¨åŒä¸€å—å†…
        DistanceBlock block1 = findBlock(loc1);
        DistanceBlock block2 = findBlock(loc2);
        
        if (block1 == block2) {
            return getIntraBlockDistance(loc1, loc2);  // O(1)æŸ¥è¡¨
        }
        
        // 2. è·¨å—æŸ¥è¯¢ï¼Œå…ˆæŸ¥ç¼“å­˜
        String key = loc1 + "-" + loc2;
        Double cached = crossBlockCache.get(key);
        if (cached != null) return cached;
        
        // 3. è®¡ç®—å¹¶ç¼“å­˜
        double distance = calculateCrossBlockDistance(loc1, loc2);
        crossBlockCache.put(key, distance);
        return distance;
    }
}
```

**ğŸ“Š å†…å­˜ä½¿ç”¨ä¼˜åŒ–**
```
å®Œæ•´è·ç¦»çŸ©é˜µï¼šnÃ—nÃ—8å­—èŠ‚
- 1000ä¸ªåŸå¸‚ï¼š8MB
- 10000ä¸ªåŸå¸‚ï¼š800MB  
- 100000ä¸ªåœ°ç‚¹ï¼š80GB (ä¸ç°å®)

ä¼˜åŒ–ç­–ç•¥ï¼š
1. å¯¹ç§°çŸ©é˜µï¼šåªå­˜å‚¨ä¸Šä¸‰è§’ï¼Œç©ºé—´å‡åŠ
2. ç¨€ç–å­˜å‚¨ï¼šåªå­˜å‚¨çƒ­é—¨è·¯çº¿çš„è·ç¦»
3. åˆ†å±‚å­˜å‚¨ï¼šå¸¸ç”¨è·ç¦»åœ¨å†…å­˜ï¼Œå…¶ä»–åœ¨ç£ç›˜
4. è¿‘ä¼¼ç®—æ³•ï¼šè¿œè·ç¦»ä½¿ç”¨è¿‘ä¼¼å€¼

double[][] compressedMatrix = new double[n][];
for (int i = 0; i < n; i++) {
    compressedMatrix[i] = new double[n - i];  // åªå­˜å‚¨ä¸Šä¸‰è§’
}
```

### 6.4 å®é™…åº”ç”¨åœºæ™¯


**ğŸšš ç‰©æµé…é€ä¼˜åŒ–**
```java
public class DeliveryOptimizer {
    private CityDistanceMatrix distanceMatrix;
    
    // æ‰¾åˆ°æœ€ä¼˜é…é€è·¯çº¿ï¼ˆç®€åŒ–ç‰ˆTSPé—®é¢˜ï¼‰
    public List<String> findOptimalRoute(String warehouse, List<String> destinations) {
        if (destinations.isEmpty()) return new ArrayList<>();
        
        List<String> route = new ArrayList<>();
        Set<String> visited = new HashSet<>();
        String current = warehouse;
        
        // è´ªå¿ƒç­–ç•¥ï¼šæ¯æ¬¡é€‰æ‹©æœ€è¿‘çš„æœªè®¿é—®åŸå¸‚
        while (visited.size() < destinations.size()) {
            String nearest = null;
            double minDistance = Double.MAX_VALUE;
            
            for (String dest : destinations) {
                if (!visited.contains(dest)) {
                    double dist = distanceMatrix.getDistance(current, dest);
                    if (dist < minDistance) {
                        minDistance = dist;
                        nearest = dest;
                    }
                }
            }
            
            if (nearest != null) {
                route.add(nearest);
                visited.add(nearest);
                current = nearest;
            }
        }
        
        return route;
    }
    
    // è®¡ç®—æ€»é…é€è·ç¦»
    public double calculateTotalDistance(List<String> route, String start) {
        if (route.isEmpty()) return 0;
        
        double total = 0;
        String current = start;
        
        for (String city : route) {
            total += distanceMatrix.getDistance(current, city);
            current = city;
        }
        
        return total;
    }
}
```

**ğŸ¨ é…’åº—æ¨èç³»ç»Ÿ**
```java
// åŸºäºåœ°ç†ä½ç½®çš„é…’åº—æ¨è
public class HotelRecommender {
    private CityDistanceMatrix distanceMatrix;
    
    public List<Hotel> recommendHotels(String userLocation, 
                                     double maxDistance, 
                                     int maxResults) {
        List<Hotel> recommendations = new ArrayList<>();
        
        // åˆ©ç”¨é¢„è®¡ç®—è·ç¦»çŸ©é˜µå¿«é€Ÿç­›é€‰
        for (Hotel hotel : allHotels) {
            double distance = distanceMatrix.getDistance(userLocation, hotel.location);
            if (distance <= maxDistance) {
                hotel.distanceFromUser = distance;  // è®¾ç½®è·ç¦»ä¿¡æ¯
                recommendations.add(hotel);
            }
        }
        
        // æŒ‰è·ç¦»æ’åºå¹¶é™åˆ¶ç»“æœæ•°é‡
        return recommendations.stream()
                .sorted((a, b) -> Double.compare(a.distanceFromUser, b.distanceFromUser))
                .limit(maxResults)
                .collect(Collectors.toList());
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ é¢„è®¡ç®—è¡¨çš„æœ¬è´¨**
```
æ ¸å¿ƒæ€æƒ³ï¼šç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæå‰è®¡ç®—å­˜å‚¨ç»“æœ
é€‚ç”¨æ¡ä»¶ï¼šè¾“å…¥èŒƒå›´æœ‰é™ã€è®¡ç®—å¤æ‚ã€æŸ¥è¯¢é¢‘ç¹
å…³é”®æ”¶ç›Šï¼šO(1)æŸ¥è¯¢æ—¶é—´ vs O(n)è®¡ç®—æ—¶é—´
å…¸å‹æƒè¡¡ï¼šå†…å­˜å ç”¨å¢åŠ  vs å“åº”é€Ÿåº¦æå‡
```

**ğŸ”¸ äº”å¤§åº”ç”¨åœºæ™¯æ€»ç»“**

| åº”ç”¨ç±»å‹ | **é¢„è®¡ç®—å†…å®¹** | **ç©ºé—´å¼€é”€** | **æ—¶é—´æ”¶ç›Š** | **å…¸å‹åœºæ™¯** |
|---------|-------------|-------------|-------------|-------------|
| ğŸ”¢ **æ•°å­¦å‡½æ•°è¡¨** | `ä¸‰è§’å‡½æ•°ã€å¯¹æ•°å€¼` | `å‡ KBåˆ°å‡ MB` | `5-10å€åŠ é€Ÿ` | `æ¸¸æˆå›¾å½¢ã€ç§‘å­¦è®¡ç®—` |
| ğŸ¯ **ç»„åˆæ•°è¡¨** | `C(n,k)æ‰€æœ‰ç»„åˆ` | `O(nÂ²)` | `é¿å…å¤§æ•°è¿ç®—` | `æ¦‚ç‡è®¡ç®—ã€ç®—æ³•ç«èµ›` |
| ğŸ” **ç´ æ•°è¡¨** | `ç´ æ•°åˆ¤æ–­ç»“æœ` | `O(n)ä½æ•°ç»„` | `O(âˆšn)â†’O(1)` | `å¯†ç å­¦ã€å“ˆå¸Œä¼˜åŒ–` |
| ğŸ—ºï¸ **è·ç¦»çŸ©é˜µ** | `åœ°ç‚¹é—´è·ç¦»` | `O(nÂ²)` | `é¿å…ä¸‰è§’å‡½æ•°` | `å¯¼èˆªã€ç‰©æµã€æ¨è` |

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æƒè¡¡å†³ç­–æ¡†æ¶**
```
ä½•æ—¶ä½¿ç”¨é¢„è®¡ç®—è¡¨ï¼š
âœ… è®¡ç®—å¤æ‚ä¸”è€—æ—¶ï¼ˆå¦‚ä¸‰è§’å‡½æ•°ã€å¤§æ•°è¿ç®—ï¼‰
âœ… è¾“å…¥ç©ºé—´æœ‰é™å¯æšä¸¾ï¼ˆå¦‚è§’åº¦0-360Â°ï¼‰
âœ… æŸ¥è¯¢é¢‘ç‡é«˜äºé¢„è®¡ç®—æˆæœ¬
âœ… æœ‰è¶³å¤Ÿå†…å­˜å­˜å‚¨ç»“æœè¡¨
âœ… ç»“æœç›¸å¯¹ç¨³å®šä¸å¸¸å˜åŒ–

ä½•æ—¶ä¸ä½¿ç”¨ï¼š
âŒ ç®€å•è®¡ç®—ï¼ˆå¦‚åŸºæœ¬å››åˆ™è¿ç®—ï¼‰
âŒ è¾“å…¥ç©ºé—´å·¨å¤§ï¼ˆå¦‚64ä½æ•´æ•°å…¨é›†ï¼‰
âŒ æŸ¥è¯¢é¢‘ç‡å¾ˆä½
âŒ å†…å­˜ä¸¥é‡ä¸è¶³
âŒ ç»“æœåŠ¨æ€å˜åŒ–
```

**ğŸ”¹ å®ç°æŠ€æœ¯è¦ç‚¹**
```
åˆå§‹åŒ–ç­–ç•¥ï¼š
- é™æ€åˆå§‹åŒ–ï¼šç¨‹åºå¯åŠ¨æ—¶é¢„è®¡ç®—
- æ‡’åŠ è½½ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è®¡ç®—
- åˆ†æ‰¹åŠ è½½ï¼šæŒ‰éœ€åŠ è½½éƒ¨åˆ†æ•°æ®

ä¼˜åŒ–æŠ€å·§ï¼š
- å¯¹ç§°çŸ©é˜µï¼šåˆ©ç”¨å¯¹ç§°æ€§å‡å°‘å­˜å‚¨
- ç¨€ç–å­˜å‚¨ï¼šåªå­˜å‚¨éé›¶æˆ–é‡è¦å€¼
- å‹ç¼©æŠ€æœ¯ï¼šä½¿ç”¨æ›´å°çš„æ•°æ®ç±»å‹
- åˆ†å±‚ç¼“å­˜ï¼šçƒ­ç‚¹æ•°æ®åœ¨å†…å­˜ï¼Œå†·æ•°æ®åœ¨ç£ç›˜
```

**ğŸ”¹ æ€§èƒ½è¯„ä¼°æ–¹æ³•**
```
æ—¶é—´æ”¶ç›Šè®¡ç®—ï¼š
åŸå§‹è®¡ç®—æ—¶é—´ / æŸ¥è¡¨æ—¶é—´ = åŠ é€Ÿå€æ•°

ç©ºé—´æˆæœ¬è®¡ç®—ï¼š
è¡¨é¡¹æ•°é‡ Ã— æ¯é¡¹å¤§å° = æ€»å†…å­˜å¼€é”€

ROIè¯„ä¼°ï¼š
(èŠ‚çœçš„è®¡ç®—æ—¶é—´ Ã— æŸ¥è¯¢é¢‘ç‡) / é¢å¤–å†…å­˜æˆæœ¬
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ é€‰æ‹©å†³ç­–æ ‘**
```
éœ€è¦é¢‘ç¹è®¡ç®—æŸä¸ªå‡½æ•°ï¼Ÿ
         â†“ æ˜¯
è¾“å…¥èŒƒå›´æ˜¯å¦å¯é¢„æµ‹ä¸”æœ‰é™ï¼Ÿ
         â†“ æ˜¯  
è®¡ç®—æ˜¯å¦æ¯”ç®€å•æŸ¥è¡¨å¤æ‚ï¼Ÿ
         â†“ æ˜¯
å†…å­˜æ˜¯å¦è¶³å¤Ÿå­˜å‚¨ç»“æœï¼Ÿ
         â†“ æ˜¯
è€ƒè™‘ä½¿ç”¨é¢„è®¡ç®—è¡¨ âœ…

ä»»ä½•ç¯èŠ‚"å¦" â†’ è€ƒè™‘å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆï¼š
- ç®—æ³•ä¼˜åŒ–ï¼šæ›´é«˜æ•ˆçš„è®¡ç®—æ–¹æ³•
- ç¼“å­˜ç­–ç•¥ï¼šLRUç¼“å­˜çƒ­ç‚¹ç»“æœ
- è¿‘ä¼¼ç®—æ³•ï¼šç‰ºç‰²ç²¾åº¦æ¢é€Ÿåº¦
- å¹¶è¡Œè®¡ç®—ï¼šå¤šçº¿ç¨‹åŠ é€Ÿè®¡ç®—
```

**ğŸ¯ å·¥ç¨‹å®è·µå»ºè®®**
```
è®¾è®¡åŸåˆ™ï¼š
1. æ¸è¿›å¼ä¼˜åŒ–ï¼šå…ˆprofileæ‰¾ç“¶é¢ˆï¼Œå†è€ƒè™‘é¢„è®¡ç®—
2. å¯é…ç½®æ€§ï¼šæ”¯æŒä¸åŒç²¾åº¦å’ŒèŒƒå›´çš„é…ç½®
3. ç›‘æ§æŒ‡æ ‡ï¼šè·Ÿè¸ªå‘½ä¸­ç‡å’Œå†…å­˜ä½¿ç”¨
4. é™çº§ç­–ç•¥ï¼šé¢„è®¡ç®—å¤±è´¥æ—¶çš„å¤‡ç”¨æ–¹æ¡ˆ

å¸¸è§é™·é˜±ï¼š
âš ï¸ è¿‡æ—©ä¼˜åŒ–ï¼šæ²¡æœ‰æ€§èƒ½ç“¶é¢ˆå°±ä¸è¦é¢„è®¡ç®—
âš ï¸ èŒƒå›´è¿‡å¤§ï¼šé¢„è®¡ç®—ä¸å¸¸ç”¨çš„æ•°æ®æµªè´¹ç©ºé—´
âš ï¸ ç²¾åº¦ä¸å¤Ÿï¼šè¡¨æ ¼ç²¾åº¦ä¸æ»¡è¶³ä¸šåŠ¡éœ€æ±‚
âš ï¸ ç»´æŠ¤å›°éš¾ï¼šå¿˜è®°åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°é¢„è®¡ç®—è¡¨
```

### 7.4 æ‰©å±•å­¦ä¹ å»ºè®®


**ğŸ“š æ·±å…¥å­¦ä¹ æ–¹å‘**
```
ç®—æ³•ä¼˜åŒ–ï¼š
- åŠ¨æ€è§„åˆ’ï¼šç»„åˆæ•°ã€ç¼–è¾‘è·ç¦»ç­‰é€’æ¨å…³ç³»
- æ•°å€¼è®¡ç®—ï¼šé«˜ç²¾åº¦æ•°å­¦å‡½æ•°çš„å¿«é€Ÿç®—æ³•
- å›¾ç®—æ³•ï¼šæœ€çŸ­è·¯å¾„çš„é¢„è®¡ç®—ï¼ˆFloyd-Warshallï¼‰

ç³»ç»Ÿè®¾è®¡ï¼š
- åˆ†å¸ƒå¼ç¼“å­˜ï¼šRedisä¸­çš„é¢„è®¡ç®—æ•°æ®
- æ•°æ®åº“ç´¢å¼•ï¼šæœ¬è´¨ä¸Šä¹Ÿæ˜¯é¢„è®¡ç®—çš„æŸ¥æ‰¾è¡¨
- CDNæŠ€æœ¯ï¼šé¢„è®¡ç®—å¹¶åˆ†å‘é™æ€èµ„æº

æ€§èƒ½å·¥ç¨‹ï¼š
- CPUç¼“å­˜ä¼˜åŒ–ï¼šæ•°æ®å±€éƒ¨æ€§å’Œç¼“å­˜å‹å¥½çš„è¡¨ç»“æ„
- å†…å­˜ç®¡ç†ï¼šå¤§å‹é¢„è®¡ç®—è¡¨çš„å†…å­˜æ˜ å°„
- å¹¶å‘å®‰å…¨ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„é¢„è®¡ç®—è¡¨è®¿é—®
```

**ğŸš€ å®è·µé¡¹ç›®å»ºè®®**
```
åˆçº§é¡¹ç›®ï¼š
- å®ç°ä¸€ä¸ªä¸‰è§’å‡½æ•°æŸ¥è¡¨å™¨
- æ„å»ºç®€å•çš„ç»„åˆæ•°è®¡ç®—å™¨
- ç¼–å†™ç´ æ•°åˆ¤æ–­ä¼˜åŒ–ç¨‹åº

ä¸­çº§é¡¹ç›®ï¼š
- å¼€å‘ä¸€ä¸ªåœ°ç†è·ç¦»è®¡ç®—æœåŠ¡
- å®ç°æ¸¸æˆä¸­çš„ä¼¤å®³è®¡ç®—é¢„è®¡ç®—è¡¨
- æ„å»ºæ•°å­¦è¡¨è¾¾å¼çš„é¢„ç¼–è¯‘ç¼“å­˜

é«˜çº§é¡¹ç›®ï¼š
- è®¾è®¡åˆ†å¸ƒå¼é¢„è®¡ç®—ç³»ç»Ÿ
- å®ç°è‡ªé€‚åº”ç²¾åº¦çš„åŠ¨æ€è¡¨æ ¼
- å¼€å‘åŸºäºæœºå™¨å­¦ä¹ çš„é¢„è®¡ç®—ç­–ç•¥ä¼˜åŒ–å™¨
```

**ğŸ¯ è®°å¿†è¦ç‚¹**
- **é¢„è®¡ç®—è¡¨ = ç©ºé—´æ¢æ—¶é—´çš„ç»å…¸åº”ç”¨**
- **é€‚ç”¨åœºæ™¯ï¼šæœ‰é™è¾“å…¥ + å¤æ‚è®¡ç®— + é«˜é¢‘æŸ¥è¯¢**
- **æ ¸å¿ƒæ”¶ç›Šï¼šO(å¤æ‚åº¦) â†’ O(1) çš„æŸ¥è¯¢åŠ é€Ÿ**
- **æƒè¡¡è€ƒé‡ï¼šå†…å­˜æˆæœ¬ vs æ—¶é—´æ”¶ç›Š vs ç»´æŠ¤å¤æ‚åº¦**
- **å®ç°è¦ç‚¹ï¼šåˆç†èŒƒå›´ + ä¼˜åŒ–å­˜å‚¨ + é™çº§ç­–ç•¥**

**ğŸ”‘ æ ¸å¿ƒè®°å¿†å£è¯€**
> å¤æ‚è®¡ç®—æå‰åšï¼ŒæŸ¥è¡¨é€Ÿåº¦å¿«å¦‚é£
> ç©ºé—´æ—¶é—´éœ€æƒè¡¡ï¼Œåœºæ™¯åˆé€‚æ‰ä½¿ç”¨
> æ•°å­¦å‡½æ•°ç»„åˆæ•°ï¼Œç´ æ•°è·ç¦»å…¸å‹ä¾‹
> å·¥ç¨‹å®è·µè¦è°¨æ…ï¼Œç›‘æ§ä¼˜åŒ–ä¸èƒ½å°‘