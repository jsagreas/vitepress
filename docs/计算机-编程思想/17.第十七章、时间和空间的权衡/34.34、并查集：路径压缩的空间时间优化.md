---
title: 34ã€å¹¶æŸ¥é›†ï¼šè·¯å¾„å‹ç¼©çš„ç©ºé—´æ—¶é—´ä¼˜åŒ–
---
## ğŸ“š ç›®å½•

1. [å¹¶æŸ¥é›†åŸºæœ¬æ¦‚å¿µ](#1-å¹¶æŸ¥é›†åŸºæœ¬æ¦‚å¿µ)
2. [å¹¶æŸ¥é›†çš„æ ¸å¿ƒåŸç†](#2-å¹¶æŸ¥é›†çš„æ ¸å¿ƒåŸç†)
3. [ç©ºé—´æ—¶é—´æƒè¡¡åˆ†æ](#3-ç©ºé—´æ—¶é—´æƒè¡¡åˆ†æ)
4. [è·¯å¾„å‹ç¼©ä¼˜åŒ–ç­–ç•¥](#4-è·¯å¾„å‹ç¼©ä¼˜åŒ–ç­–ç•¥)
5. [æŒ‰ç§©åˆå¹¶ä¼˜åŒ–](#5-æŒ‰ç§©åˆå¹¶ä¼˜åŒ–)
6. [é«˜çº§å˜ç§ä¸æ‰©å±•](#6-é«˜çº§å˜ç§ä¸æ‰©å±•)
7. [å®é™…åº”ç”¨åœºæ™¯](#7-å®é™…åº”ç”¨åœºæ™¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ² å¹¶æŸ¥é›†åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¹¶æŸ¥é›†


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä½ è¦ç®¡ç†ä¸€ç¾¤æœ‹å‹çš„ç¤¾äº¤å…³ç³»ï¼Œéœ€è¦å¿«é€ŸçŸ¥é“"Aå’ŒBæ˜¯å¦åœ¨åŒä¸€ä¸ªæœ‹å‹åœˆé‡Œï¼Ÿ"

```
ç”Ÿæ´»åœºæ™¯ç±»æ¯”ï¼š
ç­çº§åˆ†ç»„ â†’ å¹¶æŸ¥é›†ç®¡ç†
- æ¯ä¸ªåŒå­¦æœ€åˆæ˜¯ç‹¬ç«‹çš„ç»„ï¼ˆè‡ªå·±ä¸€ç»„ï¼‰
- ä¸¤ä¸ªåŒå­¦æˆä¸ºæœ‹å‹ â†’ unionæ“ä½œï¼ˆåˆå¹¶ç»„ï¼‰
- æŸ¥è¯¢ä¸¤äººæ˜¯å¦åŒç»„ â†’ findæ“ä½œï¼ˆæŸ¥æ‰¾æ ¹èŠ‚ç‚¹ï¼‰

æ•°å­¦å®šä¹‰ï¼š
å¹¶æŸ¥é›† = Union-Find = ä¸ç›¸äº¤é›†åˆæ•°æ®ç»“æ„
ç”¨é€”ï¼šç»´æŠ¤è‹¥å¹²ä¸ªä¸é‡å é›†åˆï¼Œæ”¯æŒå¿«é€Ÿåˆå¹¶å’ŒæŸ¥è¯¢
```

### 1.2 æ ¸å¿ƒæ“ä½œ


**ä¸¤ä¸ªåŸºæœ¬æ“ä½œ**ï¼š
```
ğŸ”¸ Find(æŸ¥æ‰¾)ï¼šæ‰¾åˆ°å…ƒç´ xå±äºå“ªä¸ªé›†åˆçš„ä»£è¡¨
ğŸ”¸ Union(åˆå¹¶)ï¼šå°†ä¸¤ä¸ªä¸åŒé›†åˆåˆå¹¶æˆä¸€ä¸ªé›†åˆ

å®é™…æ„ä¹‰ï¼š
Find â†’ "è¿™ä¸ªäººå±äºå“ªä¸ªæœ‹å‹åœˆï¼Ÿ"
Union â†’ "è®©ä¸¤ä¸ªæœ‹å‹åœˆåˆå¹¶æˆä¸€ä¸ªå¤§åœˆå­"
```

### 1.3 åŸºç¡€å®ç°æ€è·¯


**æ ‘ç»“æ„è¡¨ç¤º**ï¼š
```
åˆå§‹çŠ¶æ€ï¼ˆæ¯ä¸ªå…ƒç´ ç‹¬ç«‹ï¼‰ï¼š
[0] [1] [2] [3] [4]

åˆå¹¶æ“ä½œåï¼š
    0       3
   / \      |
  1   2     4

å«ä¹‰ï¼š
- 0æ˜¯{0,1,2}é›†åˆçš„ä»£è¡¨ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰
- 3æ˜¯{3,4}é›†åˆçš„ä»£è¡¨
- 1,2æŒ‡å‘0è¡¨ç¤ºå®ƒä»¬å±äºä»¥0ä¸ºä»£è¡¨çš„é›†åˆ
```

---

## 2. âš™ï¸ å¹¶æŸ¥é›†çš„æ ¸å¿ƒåŸç†


### 2.1 æœ€åŸºç¡€çš„å®ç°


```java
class BasicUnionFind {
    private int[] parent;  // parent[i]è¡¨ç¤ºiçš„çˆ¶èŠ‚ç‚¹
    
    public BasicUnionFind(int n) {
        parent = new int[n];
        // åˆå§‹åŒ–ï¼šæ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹æ˜¯è‡ªå·±
        for (int i = 0; i < n; i++) {
            parent[i] = i;
        }
    }
    
    // æŸ¥æ‰¾æ“ä½œï¼šæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼ˆé›†åˆä»£è¡¨ï¼‰
    public int find(int x) {
        if (parent[x] != x) {
            // é€’å½’æ‰¾åˆ°æ ¹èŠ‚ç‚¹
            return find(parent[x]);
        }
        return x;
    }
    
    // åˆå¹¶æ“ä½œï¼šå°†ä¸¤ä¸ªé›†åˆåˆå¹¶
    public void union(int x, int y) {
        int rootX = find(x);
        int rootY = find(y);
        
        if (rootX != rootY) {
            parent[rootX] = rootY;  // è®©ä¸€ä¸ªæ ¹æŒ‡å‘å¦ä¸€ä¸ªæ ¹
        }
    }
    
    // åˆ¤æ–­ä¸¤å…ƒç´ æ˜¯å¦åœ¨åŒä¸€é›†åˆ
    public boolean connected(int x, int y) {
        return find(x) == find(y);
    }
}
```

### 2.2 åŸºç¡€å®ç°çš„é—®é¢˜


**æ€§èƒ½é—®é¢˜åˆ†æ**ï¼š
```
æœ€åæƒ…å†µ - é“¾å¼ç»“æ„ï¼š
1 â†’ 2 â†’ 3 â†’ 4 â†’ 5

æŸ¥æ‰¾å…ƒç´ 5éœ€è¦ï¼š
- 5æ‰¾4ï¼Œ4æ‰¾3ï¼Œ3æ‰¾2ï¼Œ2æ‰¾1ï¼Œ1æ˜¯æ ¹
- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œéå¸¸æ…¢ï¼

é—®é¢˜æ ¹æºï¼š
æ ‘å¯èƒ½å˜å¾—å¾ˆ"é«˜"ï¼ŒæŸ¥æ‰¾è·¯å¾„å¾ˆé•¿
```

### 2.3 ä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–


**å®é™…éœ€æ±‚åœºæ™¯**ï¼š
```
ğŸ”¸ ç¤¾äº¤ç½‘ç»œï¼šç™¾ä¸‡ç”¨æˆ·çš„å¥½å‹å…³ç³»æŸ¥è¯¢
ğŸ”¸ ç½‘ç»œè¿é€šï¼šå¤§è§„æ¨¡ç½‘ç»œèŠ‚ç‚¹è¿é€šæ€§æ£€æµ‹
ğŸ”¸ å›¾ç®—æ³•ï¼šKruskalæœ€å°ç”Ÿæˆæ ‘éœ€è¦é¢‘ç¹æŸ¥è¯¢

æ€§èƒ½è¦æ±‚ï¼š
- éœ€è¦æ”¯æŒå¤§é‡çš„findå’Œunionæ“ä½œ
- æ¯æ¬¡æ“ä½œæœ€å¥½æ˜¯æ¥è¿‘å¸¸æ•°æ—¶é—´
- åŸºç¡€å®ç°çš„O(n)æŸ¥æ‰¾æ—¶é—´æ— æ³•æ¥å—
```

---

## 3. âš–ï¸ ç©ºé—´æ—¶é—´æƒè¡¡åˆ†æ


### 3.1 åŸºç¡€å®ç°çš„æƒè¡¡


**ç©ºé—´å¤æ‚åº¦**ï¼š
```
å­˜å‚¨éœ€æ±‚ï¼š
- parentæ•°ç»„ï¼šnä¸ªæ•´æ•° = 4nå­—èŠ‚
- æ€»ç©ºé—´ï¼šO(n)

ç©ºé—´ä¼˜åŠ¿ï¼š
- å­˜å‚¨ç©ºé—´æœ€å°åŒ–
- åªéœ€è¦è®°å½•çˆ¶å­å…³ç³»
```

**æ—¶é—´å¤æ‚åº¦**ï¼š
```
æœ€åæƒ…å†µåˆ†æï¼š
- findæ“ä½œï¼šO(n)
- unionæ“ä½œï¼šO(n)ï¼ˆå› ä¸ºè¦è°ƒç”¨findï¼‰
- mæ¬¡æ“ä½œæ€»æ—¶é—´ï¼šO(mn)

å®é™…é—®é¢˜ï¼š
æ ‘é«˜åº¦ä¸å—æ§åˆ¶ï¼Œå¯èƒ½é€€åŒ–æˆé“¾è¡¨
```

### 2.æƒè¡¡æ€è·¯


**ä¼˜åŒ–ç­–ç•¥çš„æ ¸å¿ƒæ€æƒ³**ï¼š
```
ğŸ¯ è·¯å¾„å‹ç¼©ï¼šç”¨å°‘é‡é¢å¤–è®¡ç®—æ¢å–é•¿æœŸæŸ¥è¯¢åŠ é€Ÿ
ğŸ¯ æŒ‰ç§©åˆå¹¶ï¼šç”¨å°‘é‡é¢å¤–ç©ºé—´æ¢å–æ ‘é«˜åº¦æ§åˆ¶

æƒè¡¡é€»è¾‘ï¼š
- æŠ•å…¥ï¼šä¸€æ¬¡æ€§çš„é¢å¤–è®¡ç®—/å­˜å‚¨æˆæœ¬
- æ”¶ç›Šï¼šåç»­å¤§é‡æ“ä½œçš„æ—¶é—´èŠ‚çœ
- æ•´ä½“æ•ˆæœï¼šå‡æ‘Šæ—¶é—´å¤æ‚åº¦å¤§å¹…é™ä½
```

---

## 4. ğŸš€ è·¯å¾„å‹ç¼©ä¼˜åŒ–ç­–ç•¥


### 4.1 è·¯å¾„å‹ç¼©åŸç†


**æ ¸å¿ƒæ€æƒ³**ï¼šæ—¢ç„¶è¦æ‰¾æ ¹èŠ‚ç‚¹ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è¿åˆ°æ ¹ä¸Šï¼Ÿ

```
å‹ç¼©å‰çš„æŸ¥æ‰¾è·¯å¾„ï¼š
    1
    |
    2
    |
    3  â† find(3)éœ€è¦ç»è¿‡2â†’1
    
å‹ç¼©åçš„ç»“æ„ï¼š
    1
   /|\
  2 3 4  â† æ‰€æœ‰èŠ‚ç‚¹ç›´æ¥è¿åˆ°æ ¹ï¼Œfind(3)ä¸€æ­¥åˆ°ä½ï¼
```

### 4.2 è·¯å¾„å‹ç¼©å®ç°


```java
class PathCompressionUnionFind {
    private int[] parent;
    
    public PathCompressionUnionFind(int n) {
        parent = new int[n];
        for (int i = 0; i < n; i++) {
            parent[i] = i;
        }
    }
    
    // è·¯å¾„å‹ç¼©çš„findæ“ä½œ
    public int find(int x) {
        if (parent[x] != x) {
            // é€’å½’æ‰¾æ ¹ï¼ŒåŒæ—¶å‹ç¼©è·¯å¾„
            parent[x] = find(parent[x]);  // å…³é”®ï¼šç›´æ¥è¿åˆ°æ ¹èŠ‚ç‚¹
        }
        return parent[x];
    }
    
    public void union(int x, int y) {
        int rootX = find(x);
        int rootY = find(y);
        if (rootX != rootY) {
            parent[rootX] = rootY;
        }
    }
}
```

### 4.3 è·¯å¾„å‹ç¼©çš„æƒè¡¡åˆ†æ


**æ—¶é—´æƒè¡¡**ï¼š
```
é¦–æ¬¡æŸ¥æ‰¾æˆæœ¬ï¼š
- éœ€è¦é€’å½’åˆ°æ ¹èŠ‚ç‚¹ï¼šO(æ ‘é«˜)
- å›æº¯æ—¶æ›´æ–°æ‰€æœ‰parentæŒ‡é’ˆï¼šé¢å¤–O(è·¯å¾„é•¿åº¦)è®¡ç®—

é•¿æœŸæ”¶ç›Šï¼š
- è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹ç›´æ¥è¿åˆ°æ ¹
- åç»­æŸ¥æ‰¾è¿™äº›èŠ‚ç‚¹ï¼šO(1)
- æ•´ä½“å‡æ‘Šå¤æ‚åº¦ï¼šæ¥è¿‘O(1)
```

**ç©ºé—´æƒè¡¡**ï¼š
```
ç©ºé—´æˆæœ¬ï¼š
- ä»ç„¶æ˜¯O(n)çš„parentæ•°ç»„
- æ²¡æœ‰é¢å¤–ç©ºé—´å¼€é”€

ç»“æ„å˜åŒ–ï¼š
- æ ‘å˜å¾—æ›´"æ‰å¹³"
- å‡å°‘äº†æ ‘çš„é«˜åº¦
- æœ¬è´¨ä¸Šæ˜¯ç©ºé—´ç»“æ„çš„é‡ç»„ä¼˜åŒ–
```

### 4.4 å‹ç¼©æ•ˆæœæ¼”ç¤º


```
åŸå§‹æ“ä½œåºåˆ—ï¼š
find(6) åœ¨è¿™æ ·çš„æ ‘ä¸­ï¼š

    0
    |
    1
    |
    2
    |
    3
    |
    4
    |
    5
    |
    6

ç¬¬ä¸€æ¬¡find(6)ï¼š
1. 6â†’5â†’4â†’3â†’2â†’1â†’0ï¼ˆæ‰¾åˆ°æ ¹0ï¼‰
2. å›æº¯å‹ç¼©ï¼šparent[6]=0, parent[5]=0, ..., parent[1]=0

å‹ç¼©åç»“æ„ï¼š
      0
   /  |  \  \  \  \  \
  1   2   3  4  5  6

åç»­find(6)ï¼šç›´æ¥è¿”å›parent[6]=0ï¼Œæ—¶é—´O(1)ï¼
```

---

## 5. ğŸ—ï¸ æŒ‰ç§©åˆå¹¶ä¼˜åŒ–


### 5.1 æŒ‰ç§©åˆå¹¶åŸç†


**é—®é¢˜**ï¼šè·¯å¾„å‹ç¼©è§£å†³äº†æŸ¥æ‰¾é—®é¢˜ï¼Œä½†åˆå¹¶æ—¶å¦‚ä½•å†³å®šè°å½“æ ¹ï¼Ÿ

```
ä¸å¥½çš„åˆå¹¶æ–¹å¼ï¼š
å°æ ‘  å¤§æ ‘      åˆå¹¶å
  A     B   â†’      B
        |          |
        C          A  â† Aå˜æˆäº†Bçš„å­èŠ‚ç‚¹ï¼Œå¢åŠ äº†æ ‘é«˜
        |          |
        D          C
                   |
                   D

å¥½çš„åˆå¹¶æ–¹å¼ï¼š
å°æ ‘  å¤§æ ‘      åˆå¹¶å  
  A     B   â†’      A
        |         /|\
        C        B C D  â† Bæ¥åˆ°Aä¸‹é¢ï¼Œæ ‘é«˜æ²¡æœ‰å¢åŠ 
        |
        D
```

**ç§©ï¼ˆRankï¼‰çš„æ¦‚å¿µ**ï¼š
```
ç§© = æ ‘çš„é«˜åº¦çš„ä¸Šç•Œ
- åˆå§‹æ—¶æ¯ä¸ªèŠ‚ç‚¹çš„ç§©ä¸º0
- åˆå¹¶æ—¶å°ç§©çš„æ ‘æ¥åˆ°å¤§ç§©çš„æ ‘ä¸‹é¢
- åªæœ‰ä¸¤ä¸ªç›¸åŒç§©çš„æ ‘åˆå¹¶æ—¶ï¼Œæ ¹çš„ç§©æ‰+1
```

### 5.2 æŒ‰ç§©åˆå¹¶å®ç°


```java
class UnionFindWithRank {
    private int[] parent;
    private int[] rank;    // ç§©æ•°ç»„ï¼šè®°å½•ä»¥iä¸ºæ ¹çš„æ ‘çš„é«˜åº¦ä¸Šç•Œ
    
    public UnionFindWithRank(int n) {
        parent = new int[n];
        rank = new int[n];
        for (int i = 0; i < n; i++) {
            parent[i] = i;
            rank[i] = 0;  // åˆå§‹ç§©ä¸º0
        }
    }
    
    public int find(int x) {
        if (parent[x] != x) {
            parent[x] = find(parent[x]);  // è·¯å¾„å‹ç¼©
        }
        return parent[x];
    }
    
    public void union(int x, int y) {
        int rootX = find(x);
        int rootY = find(y);
        
        if (rootX != rootY) {
            // æŒ‰ç§©åˆå¹¶ï¼šå°ç§©çš„æ ‘æ¥åˆ°å¤§ç§©çš„æ ‘ä¸‹é¢
            if (rank[rootX] < rank[rootY]) {
                parent[rootX] = rootY;
            } else if (rank[rootX] > rank[rootY]) {
                parent[rootY] = rootX;
            } else {
                // ç§©ç›¸ç­‰æ—¶ï¼Œä»»é€‰ä¸€ä¸ªä½œæ ¹ï¼Œæ ¹çš„ç§©+1
                parent[rootY] = rootX;
                rank[rootX]++;
            }
        }
    }
}
```

### 5.3 æŒ‰ç§©åˆå¹¶çš„æƒè¡¡


**ç©ºé—´æƒè¡¡**ï¼š
```
é¢å¤–ç©ºé—´ï¼š
- rankæ•°ç»„ï¼šnä¸ªæ•´æ•° = 4nå­—èŠ‚
- æ€»ç©ºé—´ä»O(n)å¢åŠ åˆ°O(2n)ï¼Œä»ç„¶æ˜¯O(n)

ç©ºé—´æ”¶ç›Šï¼š
- æ§åˆ¶äº†æ ‘çš„é«˜åº¦
- é¿å…äº†é€€åŒ–æˆé“¾è¡¨çš„æœ€åæƒ…å†µ
```

**æ—¶é—´æ”¶ç›Š**ï¼š
```
æ ‘é«˜åº¦æ§åˆ¶ï¼š
- ä¸ä½¿ç”¨æŒ‰ç§©åˆå¹¶ï¼šæ ‘é«˜å¯èƒ½è¾¾åˆ°O(n)
- ä½¿ç”¨æŒ‰ç§©åˆå¹¶ï¼šæ ‘é«˜æœ€å¤šO(log n)

å¤æ‚åº¦æ”¹è¿›ï¼š
- findæ“ä½œï¼šä»O(n)é™åˆ°O(log n)
- ç»“åˆè·¯å¾„å‹ç¼©ï¼šå‡æ‘Šå¤æ‚åº¦æ¥è¿‘O(1)
```

---

## 6. ğŸ”§ é«˜çº§å˜ç§ä¸æ‰©å±•


### 6.1 å¯æŒä¹…åŒ–å¹¶æŸ¥é›†


**åº”ç”¨åœºæ™¯**ï¼šéœ€è¦æŸ¥è¯¢å†å²çŠ¶æ€çš„å¹¶æŸ¥é›†æ“ä½œ

```java
class PersistentUnionFind {
    private List<int[]> parentHistory;  // ä¿å­˜æ¯ä¸ªæ—¶åˆ»çš„parentæ•°ç»„
    private List<int[]> rankHistory;    // ä¿å­˜æ¯ä¸ªæ—¶åˆ»çš„rankæ•°ç»„
    private int currentVersion;
    
    // æ”¯æŒå›åˆ°ä»»æ„å†å²ç‰ˆæœ¬
    public int find(int x, int version) {
        int[] parent = parentHistory.get(version);
        while (parent[x] != x) {
            x = parent[x];
        }
        return x;
    }
    
    // åˆ›å»ºæ–°ç‰ˆæœ¬ï¼ˆåŸºäºå½“å‰ç‰ˆæœ¬çš„unionæ“ä½œï¼‰
    public int union(int x, int y) {
        // å¤åˆ¶å½“å‰çŠ¶æ€ï¼Œæ‰§è¡Œunionï¼Œä¿å­˜æ–°ç‰ˆæœ¬
        // è¿”å›æ–°ç‰ˆæœ¬å·
    }
}
```

**æƒè¡¡åˆ†æ**ï¼š
```
ç©ºé—´æˆæœ¬ï¼š
- æ¯æ¬¡unionæ“ä½œéƒ½ä¿å­˜å®Œæ•´çŠ¶æ€
- ç©ºé—´å¤æ‚åº¦ï¼šO(æ“ä½œæ¬¡æ•° Ã— n)

æ—¶é—´æ”¶ç›Šï¼š
- å¯ä»¥å¿«é€ŸæŸ¥è¯¢ä»»æ„å†å²æ—¶åˆ»
- æ”¯æŒ"æ—¶å…‰å€’æµ"çš„æŸ¥è¯¢éœ€æ±‚
```

### 6.2 åŠ æƒå¹¶æŸ¥é›†


**åº”ç”¨åœºæ™¯**ï¼šä¸ä»…è¦çŸ¥é“è¿é€šæ€§ï¼Œè¿˜è¦çŸ¥é“å…ƒç´ é—´çš„å…³ç³»ï¼ˆè·ç¦»ã€å·®å€¼ç­‰ï¼‰

```java
class WeightedUnionFind {
    private int[] parent;
    private int[] weight;  // weight[x] = xåˆ°æ ¹èŠ‚ç‚¹çš„æƒé‡
    
    public int find(int x) {
        if (parent[x] != x) {
            int originalParent = parent[x];
            parent[x] = find(parent[x]);
            // è·¯å¾„å‹ç¼©æ—¶æ›´æ–°æƒé‡
            weight[x] += weight[originalParent];
        }
        return parent[x];
    }
    
    public void union(int x, int y, int w) {
        // wè¡¨ç¤ºxåˆ°yçš„æƒé‡å…³ç³»
        int rootX = find(x);
        int rootY = find(y);
        if (rootX != rootY) {
            parent[rootX] = rootY;
            weight[rootX] = weight[y] - weight[x] + w;
        }
    }
    
    // æŸ¥è¯¢xåˆ°yçš„æƒé‡å·®
    public int getDistance(int x, int y) {
        if (find(x) != find(y)) return -1;  // ä¸è¿é€š
        return weight[x] - weight[y];
    }
}
```

---

## 7. ğŸ¯ å®é™…åº”ç”¨åœºæ™¯


### 7.1 å›¾çš„è¿é€šæ€§æ£€æµ‹


**é—®é¢˜**ï¼šåˆ¤æ–­æ— å‘å›¾ä¸­ä¸¤ç‚¹æ˜¯å¦è¿é€š

```java
public class GraphConnectivity {
    public boolean isConnected(int[][] edges, int n, int x, int y) {
        UnionFind uf = new UnionFind(n);
        
        // æ„å»ºè¿é€šå…³ç³»
        for (int[] edge : edges) {
            uf.union(edge[0], edge[1]);
        }
        
        return uf.connected(x, y);
    }
}

å®é™…åº”ç”¨ï¼š
- ç½‘ç»œæ‹“æ‰‘ï¼šåˆ¤æ–­ä¸¤å°æœºå™¨æ˜¯å¦å¯è¾¾
- ç¤¾äº¤ç½‘ç»œï¼šåˆ¤æ–­ä¸¤äººæ˜¯å¦åœ¨åŒä¸€ç¤¾äº¤åœˆ
- é“è·¯ç½‘ç»œï¼šåˆ¤æ–­ä¸¤åœ°æ˜¯å¦æœ‰è·¯å¾„è¿é€š
```

### 7.2 åŠ¨æ€è¿é€šæ€§é—®é¢˜


**é—®é¢˜**ï¼šåŠ¨æ€æ·»åŠ è¾¹ï¼Œå®æ—¶æŸ¥è¯¢è¿é€šæ€§

```java
public class DynamicConnectivity {
    private UnionFind uf;
    
    public DynamicConnectivity(int n) {
        uf = new UnionFind(n);
    }
    
    // æ·»åŠ ä¸€æ¡è¾¹
    public void addEdge(int x, int y) {
        uf.union(x, y);
    }
    
    // æŸ¥è¯¢æ˜¯å¦è¿é€š
    public boolean query(int x, int y) {
        return uf.connected(x, y);
    }
    
    // è·å–è¿é€šåˆ†é‡æ•°é‡
    public int getComponents() {
        return uf.getComponentCount();
    }
}

åº”ç”¨åœºæ™¯ï¼š
- å®æ—¶ç½‘ç»œç›‘æ§ï¼šç½‘ç»œè®¾å¤‡ä¸Šä¸‹çº¿æ—¶çš„è¿é€šæ€§
- æ¸¸æˆå¼€å‘ï¼šè§’è‰²ç»„é˜Ÿç³»ç»Ÿçš„åŠ¨æ€ç®¡ç†
- æ•°æ®åˆ†æï¼šå®æ—¶è®¡ç®—æ•°æ®ç‚¹çš„èšç±»æƒ…å†µ
```

### 7.3 Kruskalæœ€å°ç”Ÿæˆæ ‘


**æ ¸å¿ƒåº”ç”¨**ï¼šå¹¶æŸ¥é›†æ˜¯Kruskalç®—æ³•çš„å…³é”®ç»„ä»¶

```java
public class KruskalMST {
    public List<Edge> findMST(List<Edge> edges, int n) {
        // æŒ‰æƒé‡æ’åº
        edges.sort((a, b) -> a.weight - b.weight);
        
        UnionFind uf = new UnionFind(n);
        List<Edge> result = new ArrayList<>();
        
        for (Edge edge : edges) {
            // å¦‚æœä¸¤ç‚¹ä¸è¿é€šï¼Œåˆ™æ·»åŠ è¿™æ¡è¾¹
            if (!uf.connected(edge.u, edge.v)) {
                uf.union(edge.u, edge.v);
                result.add(edge);
                
                // MSTæœ‰n-1æ¡è¾¹
                if (result.size() == n - 1) break;
            }
        }
        return result;
    }
}

ä¸ºä»€ä¹ˆéœ€è¦å¹¶æŸ¥é›†ï¼š
- éœ€è¦å¿«é€Ÿåˆ¤æ–­æ·»åŠ è¾¹æ˜¯å¦ä¼šå½¢æˆç¯
- å¤§è§„æ¨¡å›¾éœ€è¦é«˜æ•ˆçš„è¿é€šæ€§æ£€æµ‹
- å¹¶æŸ¥é›†çš„å‡æ‘ŠO(1)å¤æ‚åº¦ä¿è¯äº†ç®—æ³•æ•ˆç‡
```

### 7.4 æœ‹å‹åœˆé—®é¢˜


**ç»å…¸LeetCodeé—®é¢˜**ï¼šè®¡ç®—æœ‹å‹åœˆçš„æ•°é‡

```java
public class FriendCircles {
    public int findCircleNum(int[][] isConnected) {
        int n = isConnected.length;
        UnionFind uf = new UnionFind(n);
        
        // æ ¹æ®é‚»æ¥çŸ©é˜µå»ºç«‹æœ‹å‹å…³ç³»
        for (int i = 0; i < n; i++) {
            for (int j = i + 1; j < n; j++) {
                if (isConnected[i][j] == 1) {
                    uf.union(i, j);
                }
            }
        }
        
        // è®¡ç®—è¿é€šåˆ†é‡æ•°é‡
        return uf.getComponentCount();
    }
}

å®é™…æ„ä¹‰ï¼š
- ç¤¾äº¤ç½‘ç»œåˆ†æï¼šè¯†åˆ«ä¸åŒçš„ç¤¾äº¤ç¾¤ä½“
- å¸‚åœºç»†åˆ†ï¼šæ ¹æ®ç”¨æˆ·è¡Œä¸ºå°†ç”¨æˆ·åˆ†ç¾¤
- ç”Ÿç‰©ä¿¡æ¯å­¦ï¼šåŸºå› ç›¸ä¼¼æ€§èšç±»åˆ†æ
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¹¶æŸ¥é›†æœ¬è´¨ï¼šç»´æŠ¤ä¸ç›¸äº¤é›†åˆçš„æ ‘å½¢ç»“æ„
ğŸ”¸ åŸºæœ¬æ“ä½œï¼šFindæŸ¥æ‰¾æ ¹èŠ‚ç‚¹ï¼ŒUnionåˆå¹¶é›†åˆ
ğŸ”¸ æ ¸å¿ƒä¼˜åŒ–ï¼šè·¯å¾„å‹ç¼© + æŒ‰ç§©åˆå¹¶
ğŸ”¸ æƒè¡¡æ€æƒ³ï¼šç”¨å°‘é‡ç©ºé—´/è®¡ç®—æ¢å–å¤§å¹…æ—¶é—´æå‡
ğŸ”¸ åº”ç”¨ä»·å€¼ï¼šå›¾è¿é€šæ€§ã€åŠ¨æ€é›†åˆç®¡ç†çš„æœ€ä½³é€‰æ‹©
```

### 8.2 ä¼˜åŒ–ç­–ç•¥çš„æƒè¡¡åˆ†æ


**è·¯å¾„å‹ç¼©**ï¼š
```
æŠ•å…¥æˆæœ¬ï¼š
- é¦–æ¬¡æŸ¥æ‰¾æ—¶çš„é€’å½’å‹ç¼©è®¡ç®—
- æ— é¢å¤–ç©ºé—´å¼€é”€

é•¿æœŸæ”¶ç›Šï¼š
- åç»­æŸ¥æ‰¾æ¥è¿‘O(1)æ—¶é—´
- æ ‘ç»“æ„æ‰å¹³åŒ–ï¼Œé«˜åº¦å¤§å¹…é™ä½
```

**æŒ‰ç§©åˆå¹¶**ï¼š
```
æŠ•å…¥æˆæœ¬ï¼š
- é¢å¤–çš„rankæ•°ç»„ç©ºé—´O(n)
- åˆå¹¶æ—¶çš„ç§©æ¯”è¾ƒè®¡ç®—

é•¿æœŸæ”¶ç›Šï¼š
- æ ‘é«˜åº¦æ§åˆ¶åœ¨O(log n)ä»¥å†…
- é¿å…æœ€åæƒ…å†µçš„é“¾å¼é€€åŒ–
```

**ç»„åˆæ•ˆæœ**ï¼š
```
ç†è®ºå¤æ‚åº¦ï¼š
- è·¯å¾„å‹ç¼© + æŒ‰ç§©åˆå¹¶ = å‡æ‘ŠO(Î±(n))
- Î±(n)æ˜¯åé˜¿å…‹æ›¼å‡½æ•°ï¼Œå®é™…ä¸­å¯è§†ä¸ºå¸¸æ•°

å®é™…è¡¨ç°ï¼š
- ç™¾ä¸‡çº§æ“ä½œä»èƒ½ä¿æŒæé«˜æ•ˆç‡
- æ˜¯å¤„ç†å¤§è§„æ¨¡è¿é€šæ€§é—®é¢˜çš„æœ€ä½³é€‰æ‹©
```

### 8.3 åº”ç”¨åœºæ™¯è®°å¿†è¦ç‚¹


```
ğŸ”¸ å›¾è®ºç®—æ³•ï¼šKruskal MSTã€è¿é€šæ€§æ£€æµ‹
ğŸ”¸ åŠ¨æ€é—®é¢˜ï¼šå®æ—¶æ·»åŠ å…³ç³»ï¼ŒæŸ¥è¯¢è¿é€šçŠ¶æ€  
ğŸ”¸ åˆ†ç±»èšåˆï¼šæœ‹å‹åœˆã€ç¤¾äº¤ç½‘ç»œã€æ•°æ®èšç±»
ğŸ”¸ ç½‘ç»œç®¡ç†ï¼šè®¾å¤‡è¿é€šã€è·¯å¾„å¯è¾¾æ€§åˆ†æ
```

### 8.4 å®ç°è¦ç‚¹


```
åŸºç¡€å®ç°è¦ç‚¹ï¼š
- parentæ•°ç»„è®°å½•çˆ¶å­å…³ç³»
- findé€’å½’æŸ¥æ‰¾æ ¹èŠ‚ç‚¹
- unioné€šè¿‡ä¿®æ”¹æ ¹èŠ‚ç‚¹å®ç°åˆå¹¶

ä¼˜åŒ–å®ç°è¦ç‚¹ï¼š
- è·¯å¾„å‹ç¼©ï¼šparent[x] = find(parent[x])
- æŒ‰ç§©åˆå¹¶ï¼šå°ç§©æ¥åˆ°å¤§ç§©ï¼Œç›¸ç­‰æ—¶ç§©+1
- ç»„åˆä½¿ç”¨è·å¾—æœ€ä½³æ€§èƒ½
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å¹¶æŸ¥é›†ç®¡è¿é€šï¼ŒæŸ¥æ‰¾åˆå¹¶æ˜¯æ ¸å¿ƒ
- è·¯å¾„å‹ç¼©æ‰ç»“æ„ï¼ŒæŒ‰ç§©åˆå¹¶æ§é«˜åº¦  
- ç©ºé—´æ—¶é—´å·§æƒè¡¡ï¼Œå‡æ‘Šå¤æ‚åº¦æ¥è¿‘ä¸€
- å›¾è®ºç½‘ç»œçš†é€‚ç”¨ï¼ŒåŠ¨æ€è¿é€šç¬¬ä¸€é€‰