---
title: 1ã€æ•°æ®å»ºæ¨¡ä¸è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [æ•°æ®å»ºæ¨¡æ€ç»´æ¦‚è¿°](#1-æ•°æ®å»ºæ¨¡æ€ç»´æ¦‚è¿°)
2. [å®ä½“å…³ç³»å»ºæ¨¡æ ¸å¿ƒ](#2-å®ä½“å…³ç³»å»ºæ¨¡æ ¸å¿ƒ)
3. [é¢†åŸŸé©±åŠ¨è®¾è®¡æ€ç»´](#3-é¢†åŸŸé©±åŠ¨è®¾è®¡æ€ç»´)
4. [æ•°æ®åº“èŒƒå¼åº”ç”¨](#4-æ•°æ®åº“èŒƒå¼åº”ç”¨)
5. [æ•°æ®è¡¨è®¾è®¡åŸåˆ™](#5-æ•°æ®è¡¨è®¾è®¡åŸåˆ™)
6. [æ•°æ®æŠ½è±¡æ·±åŒ–](#6-æ•°æ®æŠ½è±¡æ·±åŒ–)
7. [å®æˆ˜å»ºæ¨¡æ¡ˆä¾‹](#7-å®æˆ˜å»ºæ¨¡æ¡ˆä¾‹)
8. [ä¸‰å¤§æ ¸å¿ƒæ€ç»´](#8-ä¸‰å¤§æ ¸å¿ƒæ€ç»´)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ•°æ®å»ºæ¨¡æ€ç»´æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®å»ºæ¨¡æ€ç»´


**æ•°æ®å»ºæ¨¡æ€ç»´**å°±æ˜¯æŠŠç°å®ä¸–ç•Œçš„å¤æ‚ä¸šåŠ¡ï¼Œç”¨ç»“æ„åŒ–çš„æ–¹å¼æè¿°å‡ºæ¥çš„æ€è€ƒæ–¹æ³•ã€‚

```
ç°å®ä¸–ç•Œ                     æ•°æ®æ¨¡å‹
é¡¾å®¢ä¹°å•†å“       â†’        é¡¾å®¢è¡¨ + å•†å“è¡¨ + è®¢å•è¡¨
å­¦ç”Ÿé€‰è¯¾ç¨‹       â†’        å­¦ç”Ÿè¡¨ + è¯¾ç¨‹è¡¨ + é€‰è¯¾è¡¨
å‘˜å·¥å±äºéƒ¨é—¨     â†’        å‘˜å·¥è¡¨ + éƒ¨é—¨è¡¨ + å…³è”å…³ç³»
```

**ğŸ’¡ æ ¸å¿ƒæ€ç»´**ï¼š
- **æŠ½è±¡æ€ç»´**ï¼šä»å¤æ‚ä¸šåŠ¡ä¸­æŠ½å–æ ¸å¿ƒè¦ç´ 
- **ç»“æ„æ€ç»´**ï¼šç”¨è§„èŒƒçš„ç»“æ„æ¥æè¿°ä¸šåŠ¡
- **å…³ç³»æ€ç»´**ï¼šç†æ¸…äº‹ç‰©ä¹‹é—´çš„è”ç³»
- **çº¦æŸæ€ç»´**ï¼šå®šä¹‰ä¸šåŠ¡è§„åˆ™å’Œé™åˆ¶æ¡ä»¶

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å»ºæ¨¡


**è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š
```
ğŸ”¸ ä¸šåŠ¡ç†è§£ï¼šè®©å¤æ‚ä¸šåŠ¡å˜å¾—æ¸…æ™°å¯è§
ğŸ”¸ æ²Ÿé€šæ¡¥æ¢ï¼šæŠ€æœ¯äººå‘˜å’Œä¸šåŠ¡äººå‘˜çš„å…±åŒè¯­è¨€
ğŸ”¸ ç³»ç»Ÿè®¾è®¡ï¼šä¸ºè½¯ä»¶å¼€å‘æä¾›æ•°æ®åŸºç¡€
ğŸ”¸ è´¨é‡ä¿è¯ï¼šé¿å…æ•°æ®å†—ä½™å’Œä¸ä¸€è‡´
```

**ç°å®ä¾‹å­**ï¼š
```
ç”µå•†ç³»ç»Ÿæ²¡æœ‰å¥½çš„æ•°æ®å»ºæ¨¡ï¼š
âŒ ç”¨æˆ·ä¿¡æ¯æ•£è½åœ¨å¤šä¸ªè¡¨ä¸­
âŒ è®¢å•çŠ¶æ€å®šä¹‰ä¸æ¸…æ™°
âŒ å•†å“åˆ†ç±»å±‚æ¬¡æ··ä¹±
âŒ åº“å­˜æ•°æ®ä¸å‡†ç¡®

ç»“æœï¼šç³»ç»Ÿæ¼æ´ç™¾å‡ºï¼Œç»´æŠ¤å›°éš¾
```

### 1.3 æ•°æ®å»ºæ¨¡çš„ä¸‰ä¸ªå±‚æ¬¡


```
æ¦‚å¿µå±‚  â†’  ç°å®ä¸–ç•Œçš„æŠ½è±¡æè¿°
           é‡ç‚¹ï¼šç†è§£ä¸šåŠ¡ï¼Œè¯†åˆ«å®ä½“

é€»è¾‘å±‚  â†’  æ•°æ®çš„é€»è¾‘ç»“æ„è®¾è®¡
           é‡ç‚¹ï¼šè®¾è®¡è¡¨ç»“æ„ï¼Œå®šä¹‰å…³ç³»

ç‰©ç†å±‚  â†’  å…·ä½“æ•°æ®åº“çš„å®ç°
           é‡ç‚¹ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œå®é™…å­˜å‚¨
```

---

## 2. ğŸ—ï¸ å®ä½“å…³ç³»å»ºæ¨¡æ ¸å¿ƒ


### 2.1 ä»€ä¹ˆæ˜¯å®ä½“å…³ç³»å»ºæ¨¡


**å®ä½“å…³ç³»ï¼ˆERï¼‰å»ºæ¨¡**æ˜¯æŠŠç°å®ä¸–ç•Œçš„"ä¸œè¥¿"å’Œå®ƒä»¬ä¹‹é—´çš„"å…³ç³»"ç”¨å›¾å½¢åŒ–æ–¹å¼è¡¨ç¤ºå‡ºæ¥ã€‚

```
å®ä½“(Entity)  ï¼šç°å®ä¸­çš„å…·ä½“äº‹ç‰©
å…³ç³»(Relationship) ï¼šäº‹ç‰©ä¹‹é—´çš„è”ç³»
å±æ€§(Attribute) ï¼šäº‹ç‰©çš„ç‰¹å¾
```

### 2.2 å®ä½“è¯†åˆ«ï¼šæ‰¾å‡ºä¸šåŠ¡ä¸­çš„"ä¸»è§’"


**å®ä½“è¯†åˆ«çš„æ€è€ƒæ–¹æ³•**ï¼š
- **åè¯è¯†åˆ«æ³•**ï¼šä¸šåŠ¡æè¿°ä¸­çš„é‡è¦åè¯é€šå¸¸æ˜¯å®ä½“
- **ç‹¬ç«‹å­˜åœ¨**ï¼šèƒ½å¤Ÿç‹¬ç«‹å­˜åœ¨ï¼Œæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ
- **æœ‰ä»·å€¼å±æ€§**ï¼šæœ‰å¤šä¸ªé‡è¦å±æ€§éœ€è¦è®°å½•

**å®é™…ä¾‹å­**ï¼š
```
ä¸šåŠ¡æè¿°ï¼š"å­¦ç”Ÿå¯ä»¥é€‰æ‹©å¤šé—¨è¯¾ç¨‹ï¼Œæ¯é—¨è¯¾ç¨‹ç”±è€å¸ˆæˆè¯¾"

å®ä½“è¯†åˆ«ï¼š
âœ… å­¦ç”Ÿ - ç‹¬ç«‹å­˜åœ¨ï¼Œæœ‰å­¦å·ã€å§“åç­‰å±æ€§
âœ… è¯¾ç¨‹ - ç‹¬ç«‹å­˜åœ¨ï¼Œæœ‰è¯¾ç¨‹å·ã€è¯¾ç¨‹åç­‰å±æ€§  
âœ… è€å¸ˆ - ç‹¬ç«‹å­˜åœ¨ï¼Œæœ‰å·¥å·ã€å§“åç­‰å±æ€§

éå®ä½“ï¼š
âŒ "é€‰æ‹©" - è¿™æ˜¯å…³ç³»ï¼Œä¸æ˜¯å®ä½“
âŒ "æˆè¯¾" - è¿™æ˜¯å…³ç³»ï¼Œä¸æ˜¯å®ä½“
```

**ğŸ¯ å®ä½“è¯†åˆ«æŠ€å·§**ï¼š
- é—®è‡ªå·±ï¼šè¿™ä¸ªä¸œè¥¿éœ€è¦å•ç‹¬ç®¡ç†å—ï¼Ÿ
- é—®è‡ªå·±ï¼šåˆ é™¤å…¶ä»–ä¸œè¥¿ï¼Œå®ƒè¿˜æœ‰æ„ä¹‰å—ï¼Ÿ
- é—®è‡ªå·±ï¼šå®ƒæœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦å—ï¼Ÿ

### 2.3 å…³ç³»å®šä¹‰ï¼šç†æ¸…äº‹ç‰©é—´çš„è”ç³»


**å…³ç³»çš„åŸºæœ¬ç±»å‹**ï¼š

```
ä¸€å¯¹ä¸€ (1:1)  ï¼šä¸€ä¸ªAå¯¹åº”ä¸€ä¸ªB
ç¤ºä¾‹ï¼šèº«ä»½è¯ â†” äººï¼Œä¸€ä¸ªäººåªæœ‰ä¸€ä¸ªèº«ä»½è¯

ä¸€å¯¹å¤š (1:N)  ï¼šä¸€ä¸ªAå¯¹åº”å¤šä¸ªB
ç¤ºä¾‹ï¼šéƒ¨é—¨ â†” å‘˜å·¥ï¼Œä¸€ä¸ªéƒ¨é—¨æœ‰å¤šä¸ªå‘˜å·¥

å¤šå¯¹å¤š (M:N)  ï¼šå¤šä¸ªAå¯¹åº”å¤šä¸ªB
ç¤ºä¾‹ï¼šå­¦ç”Ÿ â†” è¯¾ç¨‹ï¼Œä¸€ä¸ªå­¦ç”Ÿé€‰å¤šé—¨è¯¾ï¼Œä¸€é—¨è¯¾è¢«å¤šä¸ªå­¦ç”Ÿé€‰
```

**å…³ç³»è®¾è®¡è¦ç‚¹**ï¼š
```java
// ä¸€å¯¹å¤šå…³ç³»ï¼šéƒ¨é—¨-å‘˜å·¥
class Department {
    private String deptId;     // éƒ¨é—¨ID
    private String deptName;   // éƒ¨é—¨åç§°
}

class Employee {
    private String empId;      // å‘˜å·¥ID
    private String empName;    // å‘˜å·¥å§“å
    private String deptId;     // æ‰€å±éƒ¨é—¨IDï¼ˆå¤–é”®ï¼‰
}
```

### 2.4 å±æ€§è®¾è®¡ï¼šæè¿°å®ä½“çš„ç‰¹å¾


**å±æ€§è®¾è®¡åŸåˆ™**ï¼š
- **åŸå­æ€§**ï¼šå±æ€§ä¸èƒ½å†åˆ†å‰²
- **ç›¸å…³æ€§**ï¼šå±æ€§å¿…é¡»ä¸å®ä½“ç›´æ¥ç›¸å…³
- **ç¨³å®šæ€§**ï¼šç»å¸¸å˜åŒ–çš„å€¼è¦è°¨æ…è®¾ä¸ºå±æ€§

**å±æ€§åˆ†ç±»**ï¼š
```
åŸºæœ¬å±æ€§  ï¼šå®ä½“å›ºæœ‰ç‰¹å¾ï¼ˆå§“åã€å¹´é¾„ï¼‰
æ ‡è¯†å±æ€§  ï¼šå”¯ä¸€æ ‡è¯†å®ä½“ï¼ˆå­¦å·ã€èº«ä»½è¯å·ï¼‰
æè¿°å±æ€§  ï¼šæè¿°å®ä½“çŠ¶æ€ï¼ˆè´¦æˆ·ä½™é¢ã€è®¢å•çŠ¶æ€ï¼‰
å…³ç³»å±æ€§  ï¼šè¡¨ç¤ºå…³ç³»çš„å±æ€§ï¼ˆé€‰è¯¾æˆç»©ã€å…¥èŒæ—¶é—´ï¼‰
```

**è®¾è®¡ç¤ºä¾‹**ï¼š
```java
// å­¦ç”Ÿå®ä½“çš„å±æ€§è®¾è®¡
class Student {
    // æ ‡è¯†å±æ€§
    private String studentId;    // å­¦å·
    
    // åŸºæœ¬å±æ€§
    private String name;         // å§“å
    private Date birthDate;      // å‡ºç”Ÿæ—¥æœŸ
    private String gender;       // æ€§åˆ«
    
    // æè¿°å±æ€§
    private String major;        // ä¸“ä¸š
    private int grade;          // å¹´çº§
    private String status;      // å­¦ç±çŠ¶æ€
}
```

### 2.5 çº¦æŸå®šä¹‰ï¼šè§„å®šä¸šåŠ¡è§„åˆ™


**çº¦æŸçš„ä½œç”¨**ï¼šç¡®ä¿æ•°æ®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§

**å¸¸è§çº¦æŸç±»å‹**ï¼š
```
å®ä½“å®Œæ•´æ€§  ï¼šæ¯ä¸ªå®ä½“å¿…é¡»æœ‰å”¯ä¸€æ ‡è¯†
å‚ç…§å®Œæ•´æ€§  ï¼šå¤–é”®å¿…é¡»å¼•ç”¨å­˜åœ¨çš„ä¸»é”®
åŸŸå®Œæ•´æ€§   ï¼šå±æ€§å€¼å¿…é¡»åœ¨åˆç†èŒƒå›´å†…
ç”¨æˆ·å®šä¹‰çº¦æŸï¼šç‰¹å®šçš„ä¸šåŠ¡è§„åˆ™
```

**çº¦æŸç¤ºä¾‹**ï¼š
```sql
-- å­¦ç”Ÿè¡¨çº¦æŸ
CREATE TABLE Student (
    student_id VARCHAR(10) PRIMARY KEY,  -- ä¸»é”®çº¦æŸ
    name VARCHAR(50) NOT NULL,           -- éç©ºçº¦æŸ
    age INT CHECK (age >= 16 AND age <= 25), -- æ£€æŸ¥çº¦æŸ
    gender ENUM('ç”·', 'å¥³'),             -- åŸŸçº¦æŸ
    major_id INT,
    FOREIGN KEY (major_id) REFERENCES Major(major_id) -- å¤–é”®çº¦æŸ
);
```

---

## 3. ğŸ¨ é¢†åŸŸé©±åŠ¨è®¾è®¡æ€ç»´


### 3.1 ä»€ä¹ˆæ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰


**é¢†åŸŸé©±åŠ¨è®¾è®¡**æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œå¼ºè°ƒä»¥ä¸šåŠ¡é¢†åŸŸä¸ºæ ¸å¿ƒæ¥è®¾è®¡è½¯ä»¶ã€‚

```
ä¼ ç»Ÿæ–¹æ³•ï¼šå…ˆè€ƒè™‘æŠ€æœ¯å®ç°ï¼Œå†é€‚é…ä¸šåŠ¡
DDDæ–¹æ³•ï¼šå…ˆæ·±å…¥ç†è§£ä¸šåŠ¡ï¼Œå†ç”¨æŠ€æœ¯å®ç°ä¸šåŠ¡

æ ¸å¿ƒæ€æƒ³ï¼šè®©ä»£ç ç»“æ„åæ˜ ä¸šåŠ¡ç»“æ„
```

### 3.2 é¢†åŸŸåˆ’åˆ†ï¼šæŠŠå¤æ‚ä¸šåŠ¡åˆ†è€Œæ²»ä¹‹


**é¢†åŸŸåˆ’åˆ†çš„æ€è€ƒæ–¹æ³•**ï¼š
- **æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†**ï¼šæ¯ä¸ªé¢†åŸŸè´Ÿè´£ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½
- **æŒ‰ç»„ç»‡ç»“æ„åˆ’åˆ†**ï¼šå¯¹åº”ç°å®ä¸­çš„éƒ¨é—¨èŒè´£
- **æŒ‰æ•°æ®ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†**ï¼šç›¸å…³æ•°æ®ä¸€èµ·ç®¡ç†

**ç”µå•†ç³»ç»Ÿé¢†åŸŸåˆ’åˆ†ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·é¢†åŸŸ    ï¼šç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†
å•†å“é¢†åŸŸ    ï¼šå•†å“ä¿¡æ¯ã€åˆ†ç±»ã€åº“å­˜ç®¡ç†
è®¢å•é¢†åŸŸ    ï¼šä¸‹å•ã€æ”¯ä»˜ã€è®¢å•çŠ¶æ€ç®¡ç†
ç‰©æµé¢†åŸŸ    ï¼šå‘è´§ã€é…é€ã€ç­¾æ”¶ç®¡ç†
```

### 3.3 èšåˆè®¾è®¡ï¼šå®šä¹‰æ•°æ®çš„è¾¹ç•Œ


**ä»€ä¹ˆæ˜¯èšåˆ**ï¼š
èšåˆæ˜¯ä¸€ç»„ç›¸å…³è”çš„å¯¹è±¡é›†åˆï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œæ•°æ®ä¿®æ”¹ã€‚

```
èšåˆçš„ç‰¹ç‚¹ï¼š
âœ… æœ‰æ˜ç¡®çš„è¾¹ç•Œ
âœ… æœ‰å”¯ä¸€çš„èšåˆæ ¹
âœ… å†…éƒ¨æ•°æ®å¼ºä¸€è‡´æ€§
âœ… é€šè¿‡èšåˆæ ¹è®¿é—®å†…éƒ¨å¯¹è±¡
```

**è®¢å•èšåˆç¤ºä¾‹**ï¼š
```java
// è®¢å•èšåˆ
class Order {  // èšåˆæ ¹
    private String orderId;
    private String customerId;
    private List<OrderItem> items;  // èšåˆå†…çš„å®ä½“
    private OrderStatus status;
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šé€šè¿‡èšåˆæ ¹æ“ä½œå†…éƒ¨æ•°æ®
    public void addItem(Product product, int quantity) {
        // æ·»åŠ è®¢å•é¡¹çš„ä¸šåŠ¡é€»è¾‘
    }
    
    public void cancel() {
        // å–æ¶ˆè®¢å•çš„ä¸šåŠ¡é€»è¾‘
    }
}

class OrderItem {  // èšåˆå†…çš„å®ä½“
    private String productId;
    private int quantity;
    private BigDecimal price;
}
```

### 3.4 å€¼å¯¹è±¡ï¼šä¸å¯å˜çš„æ•°æ®å°è£…


**ä»€ä¹ˆæ˜¯å€¼å¯¹è±¡**ï¼š
å€¼å¯¹è±¡æ˜¯é€šè¿‡å±æ€§å€¼æ¥è¯†åˆ«çš„å¯¹è±¡ï¼Œæ²¡æœ‰å”¯ä¸€æ ‡è¯†ï¼Œä¸å¯å˜ã€‚

```
å®ä½“ vs å€¼å¯¹è±¡ï¼š
å®ä½“ï¼šæœ‰å”¯ä¸€æ ‡è¯†ï¼Œå¯å˜ï¼Œé‡è¦çš„æ˜¯"æ˜¯ä»€ä¹ˆ"
å€¼å¯¹è±¡ï¼šæ²¡æœ‰æ ‡è¯†ï¼Œä¸å¯å˜ï¼Œé‡è¦çš„æ˜¯"å€¼æ˜¯å¤šå°‘"
```

**å€¼å¯¹è±¡è®¾è®¡ç¤ºä¾‹**ï¼š
```java
// é‡‘é¢å€¼å¯¹è±¡
public class Money {
    private final BigDecimal amount;  // ä¸å¯å˜
    private final String currency;    // ä¸å¯å˜
    
    public Money(BigDecimal amount, String currency) {
        this.amount = amount;
        this.currency = currency;
    }
    
    // å€¼å¯¹è±¡çš„æ“ä½œè¿”å›æ–°å¯¹è±¡ï¼Œä¸ä¿®æ”¹åŸå¯¹è±¡
    public Money add(Money other) {
        if (!this.currency.equals(other.currency)) {
            throw new IllegalArgumentException("è´§å¸ç±»å‹ä¸åŒ¹é…");
        }
        return new Money(this.amount.add(other.amount), this.currency);
    }
}

// åœ°å€å€¼å¯¹è±¡
public class Address {
    private final String province;
    private final String city;
    private final String street;
    private final String zipCode;
    
    // æ„é€ å‡½æ•°ã€getteræ–¹æ³•...
    // æ³¨æ„ï¼šæ²¡æœ‰setteræ–¹æ³•ï¼Œä¿è¯ä¸å¯å˜æ€§
}
```

### 3.5 é¢†åŸŸæœåŠ¡ï¼šå¤„ç†è·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘


**é¢†åŸŸæœåŠ¡çš„ä½œç”¨**ï¼š
å½“ä¸šåŠ¡é€»è¾‘ä¸å±äºä»»ä½•ä¸€ä¸ªå®ä½“æ—¶ï¼Œæ”¾åœ¨é¢†åŸŸæœåŠ¡ä¸­ã€‚

```java
// è®¢å•å®šä»·é¢†åŸŸæœåŠ¡
public class OrderPricingService {
    
    public Money calculateOrderPrice(Order order, Customer customer) {
        Money basePrice = calculateBasePrice(order);
        Money discount = calculateDiscount(customer, basePrice);
        Money tax = calculateTax(basePrice.subtract(discount));
        
        return basePrice.subtract(discount).add(tax);
    }
    
    private Money calculateDiscount(Customer customer, Money basePrice) {
        // æ ¹æ®å®¢æˆ·ç­‰çº§è®¡ç®—æŠ˜æ‰£çš„å¤æ‚é€»è¾‘
        if (customer.isVip()) {
            return basePrice.multiply(0.1);  // VIPæ‰“9æŠ˜
        }
        return Money.zero();
    }
}
```

### 3.6 é¢†åŸŸäº‹ä»¶ï¼šå“åº”ä¸šåŠ¡å˜åŒ–


**ä»€ä¹ˆæ˜¯é¢†åŸŸäº‹ä»¶**ï¼š
å½“é¢†åŸŸå†…å‘ç”Ÿé‡è¦ä¸šåŠ¡å˜åŒ–æ—¶ï¼Œå‘å¸ƒçš„äº‹ä»¶é€šçŸ¥ã€‚

```java
// è®¢å•çŠ¶æ€å˜æ›´äº‹ä»¶
public class OrderStatusChangedEvent {
    private String orderId;
    private OrderStatus oldStatus;
    private OrderStatus newStatus;
    private Date occurredTime;
    
    // æ„é€ å‡½æ•°ã€getteræ–¹æ³•...
}

// åœ¨è®¢å•å®ä½“ä¸­å‘å¸ƒäº‹ä»¶
class Order {
    public void confirm() {
        OrderStatus oldStatus = this.status;
        this.status = OrderStatus.CONFIRMED;
        
        // å‘å¸ƒé¢†åŸŸäº‹ä»¶
        DomainEvents.publish(new OrderStatusChangedEvent(
            this.orderId, oldStatus, this.status, new Date()
        ));
    }
}
```

---

## 4. ğŸ“Š æ•°æ®åº“èŒƒå¼åº”ç”¨


### 4.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“èŒƒå¼


**æ•°æ®åº“èŒƒå¼**æ˜¯è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„çš„è§„èŒƒï¼Œç›®çš„æ˜¯å‡å°‘æ•°æ®å†—ä½™ï¼Œæé«˜æ•°æ®ä¸€è‡´æ€§ã€‚

```
èŒƒå¼çš„ä½œç”¨ï¼š
âœ… æ¶ˆé™¤æ•°æ®å†—ä½™
âœ… é¿å…æ’å…¥å¼‚å¸¸
âœ… é¿å…åˆ é™¤å¼‚å¸¸
âœ… é¿å…æ›´æ–°å¼‚å¸¸
```

### 4.2 ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼šåŸå­æ€§


**æ ¸å¿ƒè¦æ±‚**ï¼šæ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­å€¼

**é”™è¯¯ç¤ºä¾‹**ï¼š
```sql
-- è¿å1NFçš„è¡¨è®¾è®¡
CREATE TABLE Student (
    student_id VARCHAR(10),
    name VARCHAR(50),
    courses VARCHAR(200)  -- å­˜å‚¨"æ•°å­¦,è‹±è¯­,ç‰©ç†"ï¼Œè¿ååŸå­æ€§
);
```

**æ­£ç¡®ç¤ºä¾‹**ï¼š
```sql
-- ç¬¦åˆ1NFçš„è¡¨è®¾è®¡
CREATE TABLE Student (
    student_id VARCHAR(10),
    name VARCHAR(50)
);

CREATE TABLE Course (
    course_id VARCHAR(10),
    course_name VARCHAR(50)
);

CREATE TABLE StudentCourse (
    student_id VARCHAR(10),
    course_id VARCHAR(10)
);
```

### 4.3 ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ï¼šæ¶ˆé™¤éƒ¨åˆ†ä¾èµ–


**æ ¸å¿ƒè¦æ±‚**ï¼šæ¶ˆé™¤éä¸»é”®å±æ€§å¯¹ä¸»é”®çš„éƒ¨åˆ†ä¾èµ–

**é—®é¢˜åœºæ™¯**ï¼š
```sql
-- è¿å2NFçš„è¡¨è®¾è®¡
CREATE TABLE StudentCourse (
    student_id VARCHAR(10),
    course_id VARCHAR(10),
    student_name VARCHAR(50),  -- åªä¾èµ–student_id
    course_name VARCHAR(50),   -- åªä¾èµ–course_id
    score INT,
    PRIMARY KEY (student_id, course_id)
);
```

**æ­£ç¡®æ‹†åˆ†**ï¼š
```sql
-- å­¦ç”Ÿè¡¨
CREATE TABLE Student (
    student_id VARCHAR(10) PRIMARY KEY,
    student_name VARCHAR(50)
);

-- è¯¾ç¨‹è¡¨
CREATE TABLE Course (
    course_id VARCHAR(10) PRIMARY KEY,
    course_name VARCHAR(50)
);

-- é€‰è¯¾è¡¨
CREATE TABLE StudentCourse (
    student_id VARCHAR(10),
    course_id VARCHAR(10),
    score INT,
    PRIMARY KEY (student_id, course_id)
);
```

### 4.4 ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ï¼šæ¶ˆé™¤ä¼ é€’ä¾èµ–


**æ ¸å¿ƒè¦æ±‚**ï¼šæ¶ˆé™¤éä¸»é”®å±æ€§ä¹‹é—´çš„ä¼ é€’ä¾èµ–

**é—®é¢˜åœºæ™¯**ï¼š
```sql
-- è¿å3NFçš„è¡¨è®¾è®¡
CREATE TABLE Student (
    student_id VARCHAR(10) PRIMARY KEY,
    name VARCHAR(50),
    dept_id VARCHAR(10),
    dept_name VARCHAR(50),    -- ä¼ é€’ä¾èµ–ï¼šdept_nameä¾èµ–dept_id
    dept_location VARCHAR(100) -- ä¼ é€’ä¾èµ–ï¼šdept_locationä¾èµ–dept_id
);
```

**æ­£ç¡®æ‹†åˆ†**ï¼š
```sql
-- å­¦ç”Ÿè¡¨
CREATE TABLE Student (
    student_id VARCHAR(10) PRIMARY KEY,
    name VARCHAR(50),
    dept_id VARCHAR(10)
);

-- éƒ¨é—¨è¡¨
CREATE TABLE Department (
    dept_id VARCHAR(10) PRIMARY KEY,
    dept_name VARCHAR(50),
    dept_location VARCHAR(100)
);
```

### 4.5 èŒƒå¼çš„å¹³è¡¡ä½¿ç”¨


**èŒƒå¼ä¸æ˜¯ä¸‡èƒ½çš„**ï¼š
```
é«˜èŒƒå¼çš„ä»£ä»·ï¼š
âŒ è¡¨æ•°é‡å¢åŠ 
âŒ æŸ¥è¯¢å¤æ‚åº¦æé«˜
âŒ æŸ¥è¯¢æ€§èƒ½å¯èƒ½ä¸‹é™

é€‚åº¦åèŒƒå¼åŒ–ï¼š
âœ… é’ˆå¯¹æŸ¥è¯¢é¢‘ç¹çš„åœºæ™¯
âœ… å¯æ§çš„æ•°æ®å†—ä½™
âœ… æé«˜æŸ¥è¯¢æ€§èƒ½
```

**å®é™…åº”ç”¨ç­–ç•¥**ï¼š
```sql
-- ç”¨æˆ·è®¢å•æ±‡æ€»è¡¨ï¼ˆé€‚åº¦åèŒƒå¼åŒ–ï¼‰
CREATE TABLE UserOrderSummary (
    user_id VARCHAR(10),
    user_name VARCHAR(50),      -- å†—ä½™ç”¨æˆ·åï¼Œé¿å…é¢‘ç¹å…³è”
    total_orders INT,           -- æ€»è®¢å•æ•°
    total_amount DECIMAL(10,2), -- æ€»æ¶ˆè´¹é‡‘é¢
    last_order_date DATE        -- æœ€åä¸‹å•æ—¶é—´
);
```

---

## 5. ğŸ› ï¸ æ•°æ®è¡¨è®¾è®¡åŸåˆ™


### 5.1 è¡¨è®¾è®¡çš„åŸºæœ¬åŸåˆ™


**ğŸ¯ æ ¸å¿ƒè®¾è®¡åŸåˆ™**ï¼š

**å•ä¸€èŒè´£åŸåˆ™**ï¼š
```
æ¯ä¸ªè¡¨åªè´Ÿè´£ä¸€ä¸ªä¸šåŠ¡å®ä½“
âŒ æŠŠç”¨æˆ·ä¿¡æ¯å’Œè®¢å•ä¿¡æ¯æ”¾åœ¨åŒä¸€å¼ è¡¨
âœ… ç”¨æˆ·è¡¨ä¸“é—¨å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œè®¢å•è¡¨ä¸“é—¨å­˜è®¢å•ä¿¡æ¯
```

**å‘½åè§„èŒƒåŸåˆ™**ï¼š
```sql
-- å¥½çš„å‘½åè§„èŒƒ
CREATE TABLE user_info (          -- è¡¨åï¼šå°å†™+ä¸‹åˆ’çº¿
    user_id BIGINT,               -- ä¸»é”®ï¼šå®ä½“å_id
    user_name VARCHAR(50),        -- æ™®é€šå­—æ®µï¼šå°å†™+ä¸‹åˆ’çº¿
    created_time TIMESTAMP,       -- æ—¶é—´å­—æ®µï¼šç»Ÿä¸€åç¼€
    is_active BOOLEAN            -- å¸ƒå°”å­—æ®µï¼šis_å¼€å¤´
);
```

**æ•°æ®ç±»å‹é€‰æ‹©åŸåˆ™**ï¼š
```sql
-- åˆç†çš„æ•°æ®ç±»å‹é€‰æ‹©
CREATE TABLE product (
    product_id BIGINT,           -- ä¸»é”®ç”¨BIGINTï¼Œé¿å…æº¢å‡º
    product_name VARCHAR(100),   -- åç§°é•¿åº¦è¦åˆç†
    price DECIMAL(10,2),         -- é‡‘é¢ç”¨DECIMALï¼Œé¿å…ç²¾åº¦ä¸¢å¤±
    stock_quantity INT,          -- æ•°é‡ç”¨INT
    is_available BOOLEAN,        -- çŠ¶æ€ç”¨BOOLEAN
    created_time TIMESTAMP       -- æ—¶é—´ç”¨TIMESTAMP
);
```

### 5.2 ä¸»é”®è®¾è®¡ç­–ç•¥


**ä¸»é”®è®¾è®¡çš„è€ƒè™‘å› ç´ **ï¼š
```
å”¯ä¸€æ€§  ï¼šç»å¯¹å”¯ä¸€ï¼Œä¸èƒ½é‡å¤
ç¨³å®šæ€§  ï¼šä¸»é”®å€¼ä¸åº”è¯¥ç»å¸¸å˜åŒ–
ç®€å•æ€§  ï¼šå°½é‡ä½¿ç”¨å•ä¸€å­—æ®µä½œä¸ºä¸»é”®
æ— æ„ä¹‰æ€§ï¼šä¸åŒ…å«ä¸šåŠ¡å«ä¹‰ï¼Œé¿å…ä¸šåŠ¡å˜åŒ–å½±å“
```

**ä¸»é”®ç±»å‹å¯¹æ¯”**ï¼š
```sql
-- è‡ªå¢ä¸»é”®ï¼ˆæ¨èï¼‰
CREATE TABLE user (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,  -- ç®€å•ã€é«˜æ•ˆ
    username VARCHAR(50),
    email VARCHAR(100)
);

-- UUIDä¸»é”®
CREATE TABLE user (
    id VARCHAR(36) PRIMARY KEY,  -- å…¨å±€å”¯ä¸€ï¼Œä½†æ€§èƒ½è¾ƒå·®
    username VARCHAR(50),
    email VARCHAR(100)
);

-- ä¸šåŠ¡ä¸»é”®ï¼ˆä¸æ¨èï¼‰
CREATE TABLE user (
    username VARCHAR(50) PRIMARY KEY,  -- ä¸šåŠ¡å¯èƒ½å˜åŒ–ï¼Œä¸ç¨³å®š
    email VARCHAR(100)
);
```

### 5.3 ç´¢å¼•è®¾è®¡ç­–ç•¥


**ç´¢å¼•è®¾è®¡åŸåˆ™**ï¼š
```
æŸ¥è¯¢ä¼˜åŒ–  ï¼šä¸ºç»å¸¸æŸ¥è¯¢çš„å­—æ®µå»ºç´¢å¼•
æ›´æ–°ä»£ä»·  ï¼šç´¢å¼•ä¼šé™ä½å†™å…¥æ€§èƒ½
å­˜å‚¨ç©ºé—´  ï¼šç´¢å¼•å ç”¨é¢å¤–å­˜å‚¨ç©ºé—´
```

**ç´¢å¼•ç±»å‹ä¸ä½¿ç”¨åœºæ™¯**ï¼š
```sql
-- ä¸»é”®ç´¢å¼•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
PRIMARY KEY (user_id)

-- å”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX idx_user_email ON user(email);

-- æ™®é€šç´¢å¼•
CREATE INDEX idx_user_name ON user(user_name);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_order_user_time ON order_info(user_id, created_time);

-- éƒ¨åˆ†ç´¢å¼•
CREATE INDEX idx_active_user ON user(user_name) WHERE is_active = true;
```

### 5.4 å­—æ®µè®¾è®¡è§„èŒƒ


**å­—æ®µè®¾è®¡çš„æœ€ä½³å®è·µ**ï¼š

**NOT NULL çº¦æŸ**ï¼š
```sql
CREATE TABLE user (
    id BIGINT NOT NULL AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL,        -- å¿…å¡«å­—æ®µåŠ NOT NULL
    email VARCHAR(100) NOT NULL,
    nickname VARCHAR(50),                 -- å¯é€‰å­—æ®µå¯ä¸ºNULL
    created_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

**é»˜è®¤å€¼è®¾ç½®**ï¼š
```sql
CREATE TABLE article (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    view_count INT NOT NULL DEFAULT 0,           -- æ•°å€¼é»˜è®¤å€¼
    is_published BOOLEAN NOT NULL DEFAULT false, -- å¸ƒå°”é»˜è®¤å€¼
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**å­—æ®µé•¿åº¦è®¾è®¡**ï¼š
```sql
-- åˆç†çš„å­—æ®µé•¿åº¦è®¾è®¡
CREATE TABLE user_profile (
    user_id BIGINT,
    username VARCHAR(30),     -- ç”¨æˆ·åï¼š30å­—ç¬¦è¶³å¤Ÿ
    real_name VARCHAR(50),    -- çœŸå®å§“åï¼š50å­—ç¬¦
    mobile VARCHAR(11),       -- æ‰‹æœºå·ï¼šå›ºå®š11ä½
    email VARCHAR(320),       -- é‚®ç®±ï¼šRFCæ ‡å‡†æœ€å¤§é•¿åº¦
    bio TEXT                  -- ä¸ªäººç®€ä»‹ï¼šä¸é™é•¿åº¦ç”¨TEXT
);
```

---

## 6. ğŸ§  æ•°æ®æŠ½è±¡æ·±åŒ–


### 6.1 ç”¨ç»“æ„æè¿°ä¸–ç•Œ


**æ•°æ®æŠ½è±¡çš„æœ¬è´¨**ï¼š
æŠŠç°å®ä¸–ç•Œçš„å¤æ‚ç°è±¡ï¼Œç”¨ç¨‹åºå¯ä»¥ç†è§£çš„ç»“æ„æ¥æè¿°ã€‚

```
ç°å®ä¸–ç•Œ        æŠ½è±¡ç»“æ„
äºº         â†’    Personç±»
å›¾ä¹¦       â†’    Bookç±»
å€Ÿé˜…å…³ç³»   â†’    BorrowRecordç±»
å›¾ä¹¦é¦†     â†’    Libraryç³»ç»Ÿ
```

### 6.2 æŠ½è±¡å·¥å…·ï¼šç±»ã€æ¥å£ã€æšä¸¾ã€æ•°æ®è¡¨


**ç±»ï¼ˆClassï¼‰**ï¼šæè¿°å…·ä½“äº‹ç‰©
```java
public class Person {
    private String name;      // å§“å
    private int age;         // å¹´é¾„
    private String gender;   // æ€§åˆ«
    
    public void work() {     // è¡Œä¸ºï¼šå·¥ä½œ
        // å·¥ä½œé€»è¾‘
    }
}
```

**æ¥å£ï¼ˆInterfaceï¼‰**ï¼šæè¿°èƒ½åŠ›å’Œå¥‘çº¦
```java
public interface Readable {
    void read();  // èƒ½å¤Ÿé˜…è¯»çš„èƒ½åŠ›
}

public interface Borrowable {
    boolean canBorrow();  // èƒ½å¦å€Ÿé˜…
    void borrow(Person person);  // å€Ÿé˜…è¡Œä¸º
}
```

**æšä¸¾ï¼ˆEnumï¼‰**ï¼šæè¿°æœ‰é™çš„çŠ¶æ€æˆ–åˆ†ç±»
```java
public enum BookStatus {
    AVAILABLE("å¯å€Ÿé˜…"),
    BORROWED("å·²å€Ÿå‡º"),
    RESERVED("å·²é¢„çº¦"),
    DAMAGED("æŸå"),
    LOST("ä¸¢å¤±");
    
    private String description;
    
    BookStatus(String description) {
        this.description = description;
    }
}
```

**æ•°æ®è¡¨ï¼ˆTableï¼‰**ï¼šæŒä¹…åŒ–å­˜å‚¨ç»“æ„
```sql
CREATE TABLE book (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    author VARCHAR(100),
    isbn VARCHAR(20) UNIQUE,
    status ENUM('AVAILABLE', 'BORROWED', 'RESERVED') DEFAULT 'AVAILABLE',
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 6.3 æ•°æ®æŠ½è±¡åˆ†ç±»


**ç»“æ„åŒ–æ•°æ®æŠ½è±¡**ï¼š
```
ç‰¹ç‚¹ï¼šæœ‰å›ºå®šçš„ç»“æ„å’Œæ¨¡å¼
åº”ç”¨ï¼šå…³ç³»æ•°æ®åº“ã€å¯¹è±¡æ¨¡å‹

ç¤ºä¾‹ï¼š
ç”¨æˆ·è¡¨     ï¼šå›ºå®šçš„å­—æ®µç»“æ„
è®¢å•å¯¹è±¡   ï¼šå›ºå®šçš„å±æ€§å’Œæ–¹æ³•
é…ç½®æ–‡ä»¶   ï¼šå›ºå®šçš„é…ç½®é¡¹
```

**éç»“æ„åŒ–æ•°æ®æŠ½è±¡**ï¼š
```
ç‰¹ç‚¹ï¼šçµæ´»çš„æ•°æ®æ ¼å¼ï¼Œç»“æ„å¯å˜
åº”ç”¨ï¼šæ–‡æ¡£æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—

ç¤ºä¾‹ï¼š
JSONæ–‡æ¡£  ï¼šçµæ´»çš„é”®å€¼å¯¹ç»“æ„
æ—¥å¿—æ–‡ä»¶  ï¼šè‡ªç”±æ ¼å¼çš„æ–‡æœ¬
å›¾ç‰‡è§†é¢‘  ï¼šäºŒè¿›åˆ¶æ•°æ®
```

**åŠç»“æ„åŒ–æ•°æ®æŠ½è±¡**ï¼š
```
ç‰¹ç‚¹ï¼šæœ‰ä¸€å®šç»“æ„ï¼Œä½†ç»“æ„å¯æ‰©å±•
åº”ç”¨ï¼šXMLã€JSON Schema

ç¤ºä¾‹ï¼š
é…ç½®JSON ï¼šåŸºæœ¬ç»“æ„å›ºå®šï¼Œå¯æ‰©å±•å­—æ®µ
APIå“åº”  ï¼šæ ¸å¿ƒå­—æ®µå›ºå®šï¼Œå¯é€‰å­—æ®µçµæ´»
```

### 6.4 ä¸šåŠ¡å®ä½“å»ºæ¨¡å®è·µ


**ç”¨æˆ·å®ä½“å»ºæ¨¡**ï¼š
```java
// ç”¨æˆ·å®ä½“
public class User {
    // æ ‡è¯†å±æ€§
    private Long userId;
    
    // åŸºæœ¬å±æ€§
    private String username;
    private String email;
    private String mobile;
    
    // çŠ¶æ€å±æ€§
    private UserStatus status;
    private Date createdTime;
    private Date lastLoginTime;
    
    // å…³è”å±æ€§
    private UserProfile profile;  // ä¸€å¯¹ä¸€
    private List<Order> orders;   // ä¸€å¯¹å¤š
}

// ç”¨æˆ·æ‰©å±•ä¿¡æ¯ï¼ˆå€¼å¯¹è±¡ï¼‰
public class UserProfile {
    private String realName;
    private String avatar;
    private String bio;
    private Address address;  // åµŒå¥—å€¼å¯¹è±¡
}
```

**è®¢å•å®ä½“å»ºæ¨¡**ï¼š
```java
// è®¢å•èšåˆæ ¹
public class Order {
    private Long orderId;
    private Long userId;
    private List<OrderItem> items;  // èšåˆå†…å®ä½“
    private OrderStatus status;
    private Money totalAmount;      // å€¼å¯¹è±¡
    private Address deliveryAddress; // å€¼å¯¹è±¡
    
    // ä¸šåŠ¡æ–¹æ³•
    public void addItem(Long productId, int quantity) {
        // æ·»åŠ è®¢å•é¡¹ä¸šåŠ¡é€»è¾‘
    }
    
    public void confirm() {
        // ç¡®è®¤è®¢å•ä¸šåŠ¡é€»è¾‘
    }
}

// è®¢å•é¡¹ï¼ˆèšåˆå†…å®ä½“ï¼‰
public class OrderItem {
    private Long productId;
    private String productName;
    private int quantity;
    private Money unitPrice;
    private Money subtotal;
}
```

### 6.5 å®ä½“ä¸å€¼å¯¹è±¡çš„åŒºåˆ†


**åŒºåˆ†æ ‡å‡†**ï¼š

| ç‰¹å¾ | å®ä½“ï¼ˆEntityï¼‰ | å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰ |
|------|----------------|----------------------|
| **æ ‡è¯†æ€§** | æœ‰å”¯ä¸€æ ‡è¯†ç¬¦ | é€šè¿‡å±æ€§å€¼è¯†åˆ« |
| **å¯å˜æ€§** | å¯ä»¥ä¿®æ”¹å±æ€§ | ä¸å¯å˜ |
| **ç”Ÿå‘½å‘¨æœŸ** | æœ‰ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ | ä¾é™„äºå®ä½“ |
| **å…³æ³¨ç‚¹** | èº«ä»½å’Œè¿ç»­æ€§ | å±æ€§å€¼ |

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```java
// å®ä½“ï¼šç”¨æˆ·
public class User {
    private Long userId;        // å”¯ä¸€æ ‡è¯†
    private String username;    // å¯ä»¥ä¿®æ”¹
    private String email;       // å¯ä»¥ä¿®æ”¹
    
    // å®ä½“å¯ä»¥ä¿®æ”¹å±æ€§
    public void updateEmail(String newEmail) {
        this.email = newEmail;
    }
}

// å€¼å¯¹è±¡ï¼šåœ°å€
public class Address {
    private final String province;  // ä¸å¯å˜
    private final String city;      // ä¸å¯å˜
    private final String street;    // ä¸å¯å˜
    
    public Address(String province, String city, String street) {
        this.province = province;
        this.city = city;
        this.street = street;
    }
    
    // å€¼å¯¹è±¡çš„ä¿®æ”¹è¿”å›æ–°å¯¹è±¡
    public Address changeCity(String newCity) {
        return new Address(this.province, newCity, this.street);
    }
}
```

---

## 7. ğŸ“– å®æˆ˜å»ºæ¨¡æ¡ˆä¾‹ï¼šå›¾ä¹¦é¦†å€Ÿé˜…ç³»ç»Ÿ


### 7.1 ä¸šåŠ¡éœ€æ±‚åˆ†æ


**å›¾ä¹¦é¦†å€Ÿé˜…ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡**ï¼š
```
ç”¨æˆ·ç®¡ç†  ï¼šæ³¨å†Œè¯»è€…ï¼Œç®¡ç†è¯»è€…ä¿¡æ¯
å›¾ä¹¦ç®¡ç†  ï¼šå›¾ä¹¦å…¥åº“ï¼Œåˆ†ç±»ç®¡ç†
å€Ÿé˜…ç®¡ç†  ï¼šå€Ÿä¹¦ã€è¿˜ä¹¦ã€ç»­å€Ÿ
é¢„çº¦ç®¡ç†  ï¼šé¢„çº¦å›¾ä¹¦ï¼Œå¤„ç†é¢„çº¦
ç½šé‡‘ç®¡ç†  ï¼šé€¾æœŸç½šé‡‘ï¼Œç¼´è´¹è®°å½•
```

### 7.2 å®ä½“è¯†åˆ«ä¸è®¾è®¡


**æ ¸å¿ƒå®ä½“è¯†åˆ«**ï¼š
```
è¯»è€…(Reader)     ï¼šå€Ÿé˜…å›¾ä¹¦çš„äºº
å›¾ä¹¦(Book)       ï¼šå¯å€Ÿé˜…çš„ä¹¦ç±
å€Ÿé˜…è®°å½•(BorrowRecord) ï¼šå€Ÿé˜…å…³ç³»çš„è®°å½•
é¢„çº¦è®°å½•(Reservation)  ï¼šé¢„çº¦å…³ç³»çš„è®°å½•
ç½šé‡‘è®°å½•(Fine)   ï¼šç½šé‡‘ç›¸å…³è®°å½•
```

**å®ä½“è¯¦ç»†è®¾è®¡**ï¼š
```java
// è¯»è€…å®ä½“
public class Reader {
    private Long readerId;          // è¯»è€…ID
    private String readerNumber;    // è¯»è€…è¯å·
    private String name;           // å§“å
    private String email;          // é‚®ç®±
    private String mobile;         // æ‰‹æœº
    private ReaderType type;       // è¯»è€…ç±»å‹ï¼ˆå­¦ç”Ÿã€æ•™å¸ˆã€æ™®é€šï¼‰
    private ReaderStatus status;   // çŠ¶æ€ï¼ˆæ­£å¸¸ã€å†»ç»“ã€æ³¨é”€ï¼‰
    private Date registrationDate; // æ³¨å†Œæ—¶é—´
    private Date expiryDate;       // æœ‰æ•ˆæœŸ
}

// å›¾ä¹¦å®ä½“
public class Book {
    private Long bookId;           // å›¾ä¹¦ID
    private String isbn;           // ISBNå·
    private String title;          // ä¹¦å
    private String author;         // ä½œè€…
    private String publisher;      // å‡ºç‰ˆç¤¾
    private Date publishDate;      // å‡ºç‰ˆæ—¥æœŸ
    private BookCategory category; // åˆ†ç±»
    private BookStatus status;     // çŠ¶æ€ï¼ˆå¯å€Ÿã€å·²å€Ÿã€ç»´ä¿®ã€ä¸¢å¤±ï¼‰
    private String location;       // å­˜æ”¾ä½ç½®
}

// å€Ÿé˜…è®°å½•å®ä½“
public class BorrowRecord {
    private Long recordId;         // è®°å½•ID
    private Long readerId;         // è¯»è€…ID
    private Long bookId;           // å›¾ä¹¦ID
    private Date borrowDate;       // å€Ÿé˜…æ—¥æœŸ
    private Date dueDate;          // åº”è¿˜æ—¥æœŸ
    private Date returnDate;       // å®é™…å½’è¿˜æ—¥æœŸ
    private BorrowStatus status;   // çŠ¶æ€ï¼ˆå€Ÿé˜…ä¸­ã€å·²å½’è¿˜ã€é€¾æœŸï¼‰
    private int renewCount;        // ç»­å€Ÿæ¬¡æ•°
}
```

### 7.3 å…³ç³»è®¾è®¡


**å®ä½“å…³ç³»åˆ†æ**ï¼š
```
è¯»è€… â†” å€Ÿé˜…è®°å½•ï¼šä¸€å¯¹å¤š
å›¾ä¹¦ â†” å€Ÿé˜…è®°å½•ï¼šä¸€å¯¹å¤š
è¯»è€… â†” é¢„çº¦è®°å½•ï¼šä¸€å¯¹å¤š
å›¾ä¹¦ â†” é¢„çº¦è®°å½•ï¼šä¸€å¯¹å¤š
è¯»è€… â†” ç½šé‡‘è®°å½•ï¼šä¸€å¯¹å¤š
```

**å…³ç³»å®ç°**ï¼š
```sql
-- å€Ÿé˜…è®°å½•è¡¨ï¼ˆå®ç°è¯»è€…å’Œå›¾ä¹¦çš„å¤šå¯¹å¤šå…³ç³»ï¼‰
CREATE TABLE borrow_record (
    record_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    reader_id BIGINT NOT NULL,
    book_id BIGINT NOT NULL,
    borrow_date DATE NOT NULL,
    due_date DATE NOT NULL,
    return_date DATE,
    status ENUM('BORROWED', 'RETURNED', 'OVERDUE') DEFAULT 'BORROWED',
    renew_count INT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (reader_id) REFERENCES reader(reader_id),
    FOREIGN KEY (book_id) REFERENCES book(book_id),
    INDEX idx_reader_status (reader_id, status),
    INDEX idx_book_status (book_id, status)
);
```

### 7.4 ä¸šåŠ¡è§„åˆ™çº¦æŸ


**å€Ÿé˜…è§„åˆ™è®¾è®¡**ï¼š
```java
public class BorrowService {
    
    // å€Ÿé˜…å‰æ£€æŸ¥
    public boolean canBorrow(Reader reader, Book book) {
        // æ£€æŸ¥è¯»è€…çŠ¶æ€
        if (reader.getStatus() != ReaderStatus.ACTIVE) {
            return false;
        }
        
        // æ£€æŸ¥å›¾ä¹¦çŠ¶æ€
        if (book.getStatus() != BookStatus.AVAILABLE) {
            return false;
        }
        
        // æ£€æŸ¥å€Ÿé˜…æ•°é‡é™åˆ¶
        int currentBorrowCount = getCurrentBorrowCount(reader);
        int maxBorrowLimit = getMaxBorrowLimit(reader.getType());
        if (currentBorrowCount >= maxBorrowLimit) {
            return false;
        }
        
        // æ£€æŸ¥æ˜¯å¦æœ‰é€¾æœŸæœªè¿˜
        if (hasOverdueBooks(reader)) {
            return false;
        }
        
        return true;
    }
    
    // å€Ÿé˜…æ“ä½œ
    public BorrowRecord borrowBook(Reader reader, Book book) {
        if (!canBorrow(reader, book)) {
            throw new IllegalStateException("ä¸èƒ½å€Ÿé˜…æ­¤å›¾ä¹¦");
        }
        
        // åˆ›å»ºå€Ÿé˜…è®°å½•
        BorrowRecord record = new BorrowRecord();
        record.setReaderId(reader.getReaderId());
        record.setBookId(book.getBookId());
        record.setBorrowDate(new Date());
        record.setDueDate(calculateDueDate(reader.getType()));
        record.setStatus(BorrowStatus.BORROWED);
        
        // æ›´æ–°å›¾ä¹¦çŠ¶æ€
        book.setStatus(BookStatus.BORROWED);
        
        return record;
    }
}
```

### 7.5 æ•°æ®åº“è¡¨è®¾è®¡


**å®Œæ•´çš„è¡¨ç»“æ„è®¾è®¡**ï¼š
```sql
-- è¯»è€…è¡¨
CREATE TABLE reader (
    reader_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    reader_number VARCHAR(20) UNIQUE NOT NULL,
    name VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    mobile VARCHAR(11),
    type ENUM('STUDENT', 'TEACHER', 'PUBLIC') NOT NULL,
    status ENUM('ACTIVE', 'FROZEN', 'CANCELLED') DEFAULT 'ACTIVE',
    registration_date DATE NOT NULL,
    expiry_date DATE NOT NULL,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å›¾ä¹¦è¡¨
CREATE TABLE book (
    book_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    isbn VARCHAR(20) UNIQUE,
    title VARCHAR(200) NOT NULL,
    author VARCHAR(100),
    publisher VARCHAR(100),
    publish_date DATE,
    category_id INT,
    status ENUM('AVAILABLE', 'BORROWED', 'RESERVED', 'MAINTENANCE', 'LOST') DEFAULT 'AVAILABLE',
    location VARCHAR(50),
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_title (title),
    INDEX idx_author (author),
    INDEX idx_isbn (isbn)
);

-- å€Ÿé˜…è®°å½•è¡¨
CREATE TABLE borrow_record (
    record_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    reader_id BIGINT NOT NULL,
    book_id BIGINT NOT NULL,
    borrow_date DATE NOT NULL,
    due_date DATE NOT NULL,
    return_date DATE,
    status ENUM('BORROWED', 'RETURNED', 'OVERDUE') DEFAULT 'BORROWED',
    renew_count INT DEFAULT 0,
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (reader_id) REFERENCES reader(reader_id),
    FOREIGN KEY (book_id) REFERENCES book(book_id)
);

-- é¢„çº¦è®°å½•è¡¨
CREATE TABLE reservation (
    reservation_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    reader_id BIGINT NOT NULL,
    book_id BIGINT NOT NULL,
    reservation_date DATE NOT NULL,
    expiry_date DATE NOT NULL,
    status ENUM('ACTIVE', 'FULFILLED', 'CANCELLED', 'EXPIRED') DEFAULT 'ACTIVE',
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (reader_id) REFERENCES reader(reader_id),
    FOREIGN KEY (book_id) REFERENCES book(book_id)
);
```

---

## 8. ğŸ¯ ä¸‰å¤§æ ¸å¿ƒæ€ç»´


### 8.1 å®ä½“å…³ç³»æ€ç»´ï¼ˆEntity Relationshipï¼‰


**å®ä½“å…³ç³»æ€ç»´çš„æ ¸å¿ƒæ­¥éª¤**ï¼š

**æ­¥éª¤1ï¼šå®ä½“è¯†åˆ«**
```
æ€è€ƒæ–¹æ³•ï¼š
â€¢ æ‰¾å‡ºä¸šåŠ¡ä¸­çš„é‡è¦"åè¯"
â€¢ åˆ¤æ–­è¿™äº›åè¯æ˜¯å¦éœ€è¦ç‹¬ç«‹ç®¡ç†
â€¢ ç¡®è®¤æ˜¯å¦æœ‰å”¯ä¸€æ ‡è¯†

ç¤ºä¾‹ï¼šç”µå•†ç³»ç»Ÿ
âœ… ç”¨æˆ·ã€å•†å“ã€è®¢å•ã€æ”¯ä»˜è®°å½• â†’ éƒ½æ˜¯å®ä½“
âŒ è´­ä¹°ã€æ”¯ä»˜ã€è¯„ä»· â†’ è¿™äº›æ˜¯å…³ç³»æˆ–è¡Œä¸º
```

**æ­¥éª¤2ï¼šå…³ç³»å®šä¹‰**
```
å…³ç³»ç±»å‹è¯†åˆ«ï¼š
â€¢ ä¸€å¯¹ä¸€ï¼šç”¨æˆ· â†” ç”¨æˆ·è¯¦æƒ…
â€¢ ä¸€å¯¹å¤šï¼šè®¢å• â†” è®¢å•é¡¹
â€¢ å¤šå¯¹å¤šï¼šç”¨æˆ· â†” å•†å“ï¼ˆé€šè¿‡è®¢å•ï¼‰

å…³ç³»å±æ€§ï¼š
â€¢ è´­ä¹°æ—¶é—´ã€è´­ä¹°æ•°é‡ã€è¯„ä»·åˆ†æ•°ç­‰
```

**æ­¥éª¤3ï¼šå±æ€§è®¾è®¡**
```java
// å®ä½“å±æ€§åˆ†ç±»è®¾è®¡
public class Product {
    // æ ‡è¯†å±æ€§
    private Long productId;
    
    // åŸºæœ¬å±æ€§
    private String productName;
    private String description;
    
    // ä¸šåŠ¡å±æ€§
    private BigDecimal price;
    private Integer stock;
    
    // çŠ¶æ€å±æ€§
    private ProductStatus status;
    
    // æ—¶é—´å±æ€§
    private Date createdTime;
    private Date updatedTime;
}
```

**æ­¥éª¤4ï¼šçº¦æŸå®šä¹‰**
```sql
-- ä¸šåŠ¡çº¦æŸç¤ºä¾‹
CREATE TABLE product (
    product_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    product_name VARCHAR(100) NOT NULL,
    price DECIMAL(10,2) CHECK (price > 0),        -- ä»·æ ¼å¿…é¡»å¤§äº0
    stock INT CHECK (stock >= 0),                 -- åº“å­˜ä¸èƒ½ä¸ºè´Ÿ
    status ENUM('ACTIVE', 'INACTIVE') DEFAULT 'ACTIVE',
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**æ­¥éª¤5ï¼šèŒƒå¼åº”ç”¨**
```
åº”ç”¨èŒƒå¼æ¶ˆé™¤å†—ä½™ï¼š
â€¢ ç¡®ä¿æ¯ä¸ªè¡¨ç¬¦åˆ3NF
â€¢ æ¶ˆé™¤æ•°æ®é‡å¤
â€¢ å»ºç«‹åˆç†çš„å¤–é”®å…³ç³»
```

### 8.2 é¢†åŸŸå»ºæ¨¡æ€ç»´ï¼ˆDomain Modelingï¼‰


**é¢†åŸŸå»ºæ¨¡æ€ç»´çš„å®è·µæ–¹æ³•**ï¼š

**æ­¥éª¤1ï¼šé¢†åŸŸåˆ’åˆ†**
```
æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†ï¼š
ç”µå•†ç³»ç»Ÿ = ç”¨æˆ·åŸŸ + å•†å“åŸŸ + è®¢å•åŸŸ + æ”¯ä»˜åŸŸ + ç‰©æµåŸŸ

æ¯ä¸ªåŸŸçš„èŒè´£ï¼š
ç”¨æˆ·åŸŸï¼šç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†
å•†å“åŸŸï¼šå•†å“ç®¡ç†ã€åˆ†ç±»ã€åº“å­˜
è®¢å•åŸŸï¼šä¸‹å•ã€è®¢å•çŠ¶æ€ç®¡ç†
æ”¯ä»˜åŸŸï¼šæ”¯ä»˜å¤„ç†ã€æ”¯ä»˜çŠ¶æ€ç®¡ç†
ç‰©æµåŸŸï¼šå‘è´§ã€ç‰©æµè·Ÿè¸ª
```

**æ­¥éª¤2ï¼šèšåˆè®¾è®¡**
```java
// è®¢å•èšåˆç¤ºä¾‹
public class Order {  // èšåˆæ ¹
    private OrderId orderId;
    private UserId userId;
    private List<OrderItem> orderItems;  // èšåˆå†…å®ä½“
    private OrderStatus status;
    private Money totalAmount;
    
    // èšåˆå†…éƒ¨çš„ä¸šåŠ¡é€»è¾‘
    public void addItem(ProductId productId, Quantity quantity) {
        // æ·»åŠ è®¢å•é¡¹çš„ä¸šåŠ¡è§„åˆ™
        if (this.status != OrderStatus.DRAFT) {
            throw new IllegalStateException("åªèƒ½å‘è‰ç¨¿è®¢å•æ·»åŠ å•†å“");
        }
        
        OrderItem item = new OrderItem(productId, quantity);
        this.orderItems.add(item);
        this.recalculateTotal();
    }
    
    public void confirm() {
        // ç¡®è®¤è®¢å•çš„ä¸šåŠ¡è§„åˆ™
        if (orderItems.isEmpty()) {
            throw new IllegalStateException("ç©ºè®¢å•ä¸èƒ½ç¡®è®¤");
        }
        
        this.status = OrderStatus.CONFIRMED;
        // å‘å¸ƒé¢†åŸŸäº‹ä»¶
        DomainEvents.publish(new OrderConfirmedEvent(this.orderId));
    }
}
```

**æ­¥éª¤3ï¼šå€¼å¯¹è±¡è®¾è®¡**
```java
// å€¼å¯¹è±¡ï¼šè®¢å•é‡‘é¢
public class Money {
    private final BigDecimal amount;
    private final Currency currency;
    
    public Money(BigDecimal amount, Currency currency) {
        if (amount.compareTo(BigDecimal.ZERO) < 0) {
            throw new IllegalArgumentException("é‡‘é¢ä¸èƒ½ä¸ºè´Ÿæ•°");
        }
        this.amount = amount;
        this.currency = currency;
    }
    
    public Money add(Money other) {
        if (!this.currency.equals(other.currency)) {
            throw new IllegalArgumentException("è´§å¸ç±»å‹ä¸åŒ¹é…");
        }
        return new Money(this.amount.add(other.amount), this.currency);
    }
}

// å€¼å¯¹è±¡ï¼šå•†å“æ•°é‡
public class Quantity {
    private final int value;
    
    public Quantity(int value) {
        if (value <= 0) {
            throw new IllegalArgumentException("æ•°é‡å¿…é¡»å¤§äº0");
        }
        this.value = value;
    }
    
    public Quantity multiply(int factor) {
        return new Quantity(this.value * factor);
    }
}
```

**æ­¥éª¤4ï¼šé¢†åŸŸæœåŠ¡**
```java
// å®šä»·é¢†åŸŸæœåŠ¡
public class PricingService {
    
    public Money calculateOrderPrice(Order order, Customer customer) {
        Money basePrice = calculateBasePrice(order);
        Money discount = calculateDiscount(customer, basePrice);
        Money shipping = calculateShipping(order);
        
        return basePrice.subtract(discount).add(shipping);
    }
    
    private Money calculateDiscount(Customer customer, Money basePrice) {
        // å¤æ‚çš„æŠ˜æ‰£è®¡ç®—é€»è¾‘
        if (customer.isVip()) {
            return basePrice.multiply(new BigDecimal("0.1"));
        }
        return Money.zero(basePrice.getCurrency());
    }
}
```

**æ­¥éª¤5ï¼šé¢†åŸŸäº‹ä»¶**
```java
// é¢†åŸŸäº‹ä»¶
public class OrderConfirmedEvent {
    private final OrderId orderId;
    private final Date occurredOn;
    
    public OrderConfirmedEvent(OrderId orderId) {
        this.orderId = orderId;
        this.occurredOn = new Date();
    }
}

// äº‹ä»¶å¤„ç†å™¨
public class OrderConfirmedEventHandler {
    
    public void handle(OrderConfirmedEvent event) {
        // è®¢å•ç¡®è®¤åçš„ä¸šåŠ¡å¤„ç†
        // 1. æ‰£å‡åº“å­˜
        // 2. å‘é€ç¡®è®¤é‚®ä»¶
        // 3. é€šçŸ¥ç‰©æµç³»ç»Ÿ
    }
}
```

### 8.3 æ•°æ®æµæ€ç»´ï¼ˆData Flowï¼‰


**æ•°æ®æµæ€ç»´å…³æ³¨æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸ**ï¼š

**æ•°æ®æ¥æºåˆ†æ**ï¼š
```
ç”¨æˆ·è¾“å…¥æ•°æ®ï¼š
â€¢ æ³¨å†Œä¿¡æ¯ã€è®¢å•ä¿¡æ¯ã€è¯„ä»·å†…å®¹
â€¢ ç‰¹ç‚¹ï¼šç›´æ¥æ¥æºï¼Œéœ€è¦éªŒè¯

ç³»ç»Ÿç”Ÿæˆæ•°æ®ï¼š
â€¢ è®¢å•å·ã€æ—¶é—´æˆ³ã€æ—¥å¿—è®°å½•
â€¢ ç‰¹ç‚¹ï¼šç³»ç»Ÿæ§åˆ¶ï¼Œç›¸å¯¹å¯é 

å¤–éƒ¨ç³»ç»Ÿæ•°æ®ï¼š
â€¢ æ”¯ä»˜ç»“æœã€ç‰©æµä¿¡æ¯ã€æ±‡ç‡æ•°æ®
â€¢ ç‰¹ç‚¹ï¼šéœ€è¦åŒæ­¥ï¼Œå¯èƒ½å»¶è¿Ÿ
```

**æ•°æ®ä¼ è¾“è®¾è®¡**ï¼š
```java
// æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰
public class OrderCreateRequest {
    private List<OrderItemRequest> items;
    private String deliveryAddress;
    private String paymentMethod;
    
    // æ•°æ®éªŒè¯
    public void validate() {
        if (items == null || items.isEmpty()) {
            throw new ValidationException("è®¢å•é¡¹ä¸èƒ½ä¸ºç©º");
        }
        
        for (OrderItemRequest item : items) {
            item.validate();
        }
    }
}

// å†…éƒ¨é¢†åŸŸå¯¹è±¡è½¬æ¢
public class OrderCreateRequestConverter {
    
    public Order convertToDomain(OrderCreateRequest request, UserId userId) {
        request.validate();
        
        Order order = new Order(userId);
        for (OrderItemRequest itemRequest : request.getItems()) {
            ProductId productId = new ProductId(itemRequest.getProductId());
            Quantity quantity = new Quantity(itemRequest.getQuantity());
            order.addItem(productId, quantity);
        }
        
        return order;
    }
}
```

**æ•°æ®è½¬æ¢å¤„ç†**ï¼š
```java
// æ•°æ®è½¬æ¢ç®¡é“
public class DataTransformationPipeline {
    
    public OrderResponse processOrderCreation(OrderCreateRequest request) {
        // ç¬¬1æ­¥ï¼šè¾“å…¥éªŒè¯
        request.validate();
        
        // ç¬¬2æ­¥ï¼šè½¬æ¢ä¸ºé¢†åŸŸå¯¹è±¡
        Order order = converter.convertToDomain(request, getCurrentUserId());
        
        // ç¬¬3æ­¥ï¼šä¸šåŠ¡å¤„ç†
        order.confirm();
        
        // ç¬¬4æ­¥ï¼šæŒä¹…åŒ–
        Order savedOrder = orderRepository.save(order);
        
        // ç¬¬5æ­¥ï¼šè½¬æ¢ä¸ºå“åº”å¯¹è±¡
        return converter.convertToResponse(savedOrder);
    }
}
```

**æ•°æ®å­˜å‚¨ç­–ç•¥**ï¼š
```sql
-- åˆ†å±‚å­˜å‚¨è®¾è®¡
-- æ“ä½œæ•°æ®ï¼šé«˜é¢‘è¯»å†™ï¼ŒSSDå­˜å‚¨
CREATE TABLE order_info (
    order_id BIGINT PRIMARY KEY,
    user_id BIGINT,
    status VARCHAR(20),
    created_time TIMESTAMP,
    INDEX idx_user_status (user_id, status)
) ENGINE=InnoDB;

-- å†å²æ•°æ®ï¼šä½é¢‘è®¿é—®ï¼Œå½’æ¡£å­˜å‚¨
CREATE TABLE order_history (
    order_id BIGINT,
    operation_type VARCHAR(50),
    operation_time TIMESTAMP,
    operation_data JSON
) ENGINE=InnoDB;

-- ç»Ÿè®¡æ•°æ®ï¼šå®šæœŸæ›´æ–°ï¼Œå¿«é€ŸæŸ¥è¯¢
CREATE TABLE order_statistics (
    stat_date DATE PRIMARY KEY,
    total_orders INT,
    total_amount DECIMAL(15,2),
    updated_time TIMESTAMP
) ENGINE=InnoDB;
```

**æ•°æ®æ¶ˆè´¹æ¨¡å¼**ï¼š
```java
// æ•°æ®æ¶ˆè´¹è€…
public class OrderStatisticsService {
    
    // å®æ—¶æ¶ˆè´¹ï¼šè®¢å•åˆ›å»ºæ—¶ç«‹å³æ›´æ–°ç»Ÿè®¡
    @EventListener
    public void onOrderCreated(OrderCreatedEvent event) {
        updateRealTimeStatistics(event.getOrderId());
    }
    
    // æ‰¹é‡æ¶ˆè´¹ï¼šå®šæœŸæ‰¹é‡å¤„ç†å†å²æ•°æ®
    @Scheduled(cron = "0 0 1 * * ?")  // æ¯å¤©å‡Œæ™¨1ç‚¹æ‰§è¡Œ
    public void generateDailyReport() {
        Date yesterday = DateUtils.addDays(new Date(), -1);
        List<Order> orders = orderRepository.findByCreatedDate(yesterday);
        
        OrderDailyReport report = generateReport(orders);
        reportRepository.save(report);
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®å»ºæ¨¡æœ¬è´¨ï¼šç”¨ç»“æ„åŒ–æ–¹å¼æè¿°ç°å®ä¸–ç•Œçš„ä¸šåŠ¡
ğŸ”¸ å®ä½“å…³ç³»æ€ç»´ï¼šè¯†åˆ«å®ä½“ã€å®šä¹‰å…³ç³»ã€è®¾è®¡å±æ€§ã€åº”ç”¨çº¦æŸ
ğŸ”¸ é¢†åŸŸé©±åŠ¨æ€ç»´ï¼šé¢†åŸŸåˆ’åˆ†ã€èšåˆè®¾è®¡ã€å€¼å¯¹è±¡ã€é¢†åŸŸæœåŠ¡
ğŸ”¸ æ•°æ®åº“èŒƒå¼ï¼š1NFåŸå­æ€§ã€2NFæ¶ˆé™¤éƒ¨åˆ†ä¾èµ–ã€3NFæ¶ˆé™¤ä¼ é€’ä¾èµ–
ğŸ”¸ è¡¨è®¾è®¡åŸåˆ™ï¼šå•ä¸€èŒè´£ã€åˆç†å‘½åã€ç±»å‹é€‰æ‹©ã€ç´¢å¼•è®¾è®¡
ğŸ”¸ æ•°æ®æŠ½è±¡åˆ†ç±»ï¼šç»“æ„åŒ–ã€éç»“æ„åŒ–ã€åŠç»“æ„åŒ–æ•°æ®çš„å¤„ç†
ğŸ”¸ æ•°æ®æµæ€ç»´ï¼šå…³æ³¨æ•°æ®çš„äº§ç”Ÿã€ä¼ è¾“ã€è½¬æ¢ã€å­˜å‚¨ã€æ¶ˆè´¹å…¨è¿‡ç¨‹
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å®ä½“vså€¼å¯¹è±¡çš„æœ¬è´¨åŒºåˆ«**
```
å®ä½“ç‰¹å¾ï¼š
â€¢ æœ‰å”¯ä¸€èº«ä»½æ ‡è¯†
â€¢ æœ‰ç”Ÿå‘½å‘¨æœŸ
â€¢ çŠ¶æ€å¯ä»¥æ”¹å˜
â€¢ å…³æ³¨"æ˜¯ä»€ä¹ˆ"

å€¼å¯¹è±¡ç‰¹å¾ï¼š
â€¢ é€šè¿‡å±æ€§å€¼è¯†åˆ«
â€¢ ä¸å¯å˜æ€§
â€¢ æ²¡æœ‰ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ
â€¢ å…³æ³¨"å€¼æ˜¯å¤šå°‘"
```

**ğŸ”¹ èšåˆçš„è®¾è®¡åŸåˆ™**
```
èšåˆè¾¹ç•Œçš„ç¡®å®šï¼š
â€¢ ä¸šåŠ¡ä¸€è‡´æ€§è¾¹ç•Œ
â€¢ äº‹åŠ¡ä¸€è‡´æ€§è¾¹ç•Œ
â€¢ æ•°æ®ä¿®æ”¹çš„å•å…ƒ
â€¢ ä¸åŒèšåˆé—´æœ€ç»ˆä¸€è‡´æ€§
```

**ğŸ”¹ èŒƒå¼ä¸æ€§èƒ½çš„å¹³è¡¡**
```
é«˜èŒƒå¼ä¼˜åŠ¿ï¼š
â€¢ å‡å°‘æ•°æ®å†—ä½™
â€¢ æé«˜æ•°æ®ä¸€è‡´æ€§
â€¢ ä¾¿äºæ•°æ®ç»´æŠ¤

é€‚åº¦åèŒƒå¼åŒ–ï¼š
â€¢ æé«˜æŸ¥è¯¢æ€§èƒ½
â€¢ å‡å°‘è¡¨å…³è”
â€¢ é€‚åˆè¯»å¤šå†™å°‘åœºæ™¯
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ“‹ å»ºæ¨¡æ­¥éª¤æ£€æŸ¥æ¸…å•**
```
â˜‘ï¸ ä¸šåŠ¡éœ€æ±‚åˆ†æï¼šç†è§£ä¸šåŠ¡åœºæ™¯å’Œæµç¨‹
â˜‘ï¸ å®ä½“è¯†åˆ«ï¼šæ‰¾å‡ºæ ¸å¿ƒä¸šåŠ¡å¯¹è±¡
â˜‘ï¸ å…³ç³»åˆ†æï¼šç¡®å®šå®ä½“é—´çš„å…³è”å…³ç³»
â˜‘ï¸ å±æ€§è®¾è®¡ï¼šå®šä¹‰å®ä½“çš„é‡è¦ç‰¹å¾
â˜‘ï¸ çº¦æŸå®šä¹‰ï¼šç¡®å®šä¸šåŠ¡è§„åˆ™å’Œé™åˆ¶
â˜‘ï¸ èŒƒå¼æ£€æŸ¥ï¼šç¡®ä¿è¡¨ç»“æ„åˆç†
â˜‘ï¸ æ€§èƒ½è€ƒè™‘ï¼šè¯„ä¼°æŸ¥è¯¢å’Œæ›´æ–°åœºæ™¯
â˜‘ï¸ æ‰©å±•æ€§è®¾è®¡ï¼šè€ƒè™‘æœªæ¥ä¸šåŠ¡å˜åŒ–
```

**ğŸ› ï¸ è®¾è®¡åŸåˆ™ä¼˜å…ˆçº§**
```
1. ä¸šåŠ¡æ­£ç¡®æ€§ > æŠ€æœ¯æ€§èƒ½
2. æ•°æ®ä¸€è‡´æ€§ > æŸ¥è¯¢ä¾¿åˆ©æ€§
3. æ‰©å±•æ€§ > å½“å‰ä¾¿åˆ©æ€§
4. å¯ç»´æŠ¤æ€§ > å®ç°å¤æ‚æ€§
```

**âš ï¸ å¸¸è§è®¾è®¡é™·é˜±**
```
âŒ è¿‡åº¦èŒƒå¼åŒ–ï¼šè¿‡å¤šçš„è¡¨å…³è”å½±å“æ€§èƒ½
âŒ å¿½ç•¥ä¸šåŠ¡çº¦æŸï¼šç¼ºå°‘å¿…è¦çš„æ•°æ®éªŒè¯
âŒ ä¸‡èƒ½å®ä½“ï¼šä¸€ä¸ªå®ä½“æ‰¿æ‹…è¿‡å¤šèŒè´£
âŒ ç¼ºå°‘å”¯ä¸€æ€§ï¼šé‡è¦å­—æ®µæ²¡æœ‰å”¯ä¸€çº¦æŸ
âŒ å¿½ç•¥æ—¶é—´å±æ€§ï¼šç¼ºå°‘åˆ›å»ºå’Œæ›´æ–°æ—¶é—´
âŒ ç¡¬ç¼–ç æšä¸¾ï¼šçŠ¶æ€å€¼ç›´æ¥å†™æ­»åœ¨ä»£ç ä¸­
```

### 9.4 æŒç»­æ”¹è¿›å»ºè®®


**ğŸ“ˆ å»ºæ¨¡èƒ½åŠ›æå‡è·¯å¾„**
```
åˆçº§é˜¶æ®µï¼š
â€¢ æŒæ¡åŸºæœ¬çš„ERå»ºæ¨¡
â€¢ ç†è§£ä¸‰å¤§èŒƒå¼
â€¢ èƒ½è®¾è®¡ç®€å•çš„ä¸šåŠ¡è¡¨

ä¸­çº§é˜¶æ®µï¼š
â€¢ æŒæ¡DDDå»ºæ¨¡æ€æƒ³
â€¢ èƒ½è¯†åˆ«èšåˆè¾¹ç•Œ
â€¢ ç†è§£é¢†åŸŸäº‹ä»¶æœºåˆ¶

é«˜çº§é˜¶æ®µï¼š
â€¢ èƒ½è®¾è®¡å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ
â€¢ å¹³è¡¡ä¸€è‡´æ€§ä¸æ€§èƒ½
â€¢ æŒ‡å¯¼å›¢é˜Ÿå»ºæ¨¡è§„èŒƒ
```

**ğŸ”§ å®è·µå»ºè®®**
```
å¤šçœ‹ä¼˜ç§€å¼€æºé¡¹ç›®çš„æ•°æ®æ¨¡å‹è®¾è®¡
å‚ä¸å®é™…é¡¹ç›®çš„æ•°æ®åº“è®¾è®¡
å­¦ä¹ ä¸åŒé¢†åŸŸçš„å»ºæ¨¡æ¨¡å¼
å…³æ³¨æ–°çš„å»ºæ¨¡å·¥å…·å’Œæ–¹æ³•
ä¸ä¸šåŠ¡äººå‘˜ä¿æŒæ²Ÿé€šï¼Œç†è§£ä¸šåŠ¡æœ¬è´¨
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç°å®æŠ½è±¡æœ‰ç« æ³•ï¼Œå®ä½“å…³ç³»è¦åˆ†æ¸…
- é¢†åŸŸå»ºæ¨¡çœ‹è¾¹ç•Œï¼Œèšåˆæ ¹é‡Œç®¡ä¸€è‡´
- èŒƒå¼åº”ç”¨æ¶ˆå†—ä½™ï¼Œæ€§èƒ½å¹³è¡¡éœ€æƒè¡¡  
- æ•°æ®æµè½¬æœ‰ç”Ÿå‘½ï¼Œæ¥æºå»å‘è¦æ˜ç¡®