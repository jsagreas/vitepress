---
title: 1ã€å®¹é”™æ€§æ€æƒ³
---
## ğŸ“š ç›®å½•

1. [å¼‚å¸¸å¤„ç†æ€ç»´](#1-å¼‚å¸¸å¤„ç†æ€ç»´)
2. [å®¹é”™è®¾è®¡æ€ç»´](#2-å®¹é”™è®¾è®¡æ€ç»´)
3. [æ¢å¤æ€§æ€ç»´](#3-æ¢å¤æ€§æ€ç»´)
4. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#4-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†æ€ç»´


### 1.1 ä»€ä¹ˆæ˜¯å¼‚å¸¸å¤„ç†æ€ç»´


**ğŸ”¸ åŸºæœ¬ç†è§£**
å¼‚å¸¸å¤„ç†æ€ç»´å°±æ˜¯**é¢„æ–™åˆ°ç¨‹åºä¼šå‡ºé”™**ï¼Œå¹¶æå‰å‡†å¤‡å¥½åº”å¯¹æ–¹æ¡ˆçš„æ€ç»´æ–¹å¼ã€‚å°±åƒå¼€è½¦å‰æ£€æŸ¥åˆ¹è½¦ï¼Œä¸æ˜¯å¸Œæœ›å‡ºäº‹ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨ç´§æ€¥æƒ…å†µä¸‹èƒ½å®‰å…¨åœè½¦ã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
ğŸ  å®¶é‡Œå‡†å¤‡æ€¥æ•‘åŒ… â†’ ç¨‹åºä¸­çš„å¼‚å¸¸å¤„ç†
ğŸš— æ±½è½¦é…å¤‡å®‰å…¨æ°”å›Š â†’ ç³»ç»Ÿçš„å®¹é”™æœºåˆ¶
ğŸ¥ åŒ»é™¢çš„åº”æ€¥é¢„æ¡ˆ â†’ æœåŠ¡çš„é™çº§ç­–ç•¥
```

**ğŸ’¡ æ ¸å¿ƒåŸåˆ™**
- **é¢„æœŸå¤±è´¥**ï¼šä»»ä½•æ“ä½œéƒ½å¯èƒ½å¤±è´¥
- **ä¼˜é›…å¤„ç†**ï¼šå¤±è´¥æ—¶ä¸è¦è®©æ•´ä¸ªç³»ç»Ÿå´©æºƒ
- **ä¿¡æ¯é€æ˜**ï¼šæ¸…æ¥šåœ°çŸ¥é“å“ªé‡Œå‡ºäº†ä»€ä¹ˆé—®é¢˜
- **ç”¨æˆ·å‹å¥½**ï¼šé”™è¯¯ä¿¡æ¯è¦è®©ç”¨æˆ·èƒ½ç†è§£

### 1.2 å¼‚å¸¸åˆ†ç±»ï¼šä¸åŒç±»å‹å¼‚å¸¸çš„åˆ†ç±»å¤„ç†


**ğŸ“‹ å¼‚å¸¸çš„åŸºæœ¬åˆ†ç±»**

```
å¼‚å¸¸ç±»å‹é‡‘å­—å¡”ï¼š

        ç³»ç»Ÿé”™è¯¯ (System Error)
       /                    \
  è¿è¡Œæ—¶é”™è¯¯              ç¼–è¯‘æ—¶é”™è¯¯
 (Runtime Error)        (Compile Error)
     /      \
 ä¸šåŠ¡å¼‚å¸¸   æŠ€æœ¯å¼‚å¸¸
(Business) (Technical)
```

**ğŸ”¸ æŠ€æœ¯å¼‚å¸¸ vs ä¸šåŠ¡å¼‚å¸¸**

| å¼‚å¸¸ç±»å‹ | **ç‰¹ç‚¹** | **å¤„ç†æ–¹å¼** | **ç¤ºä¾‹** |
|---------|---------|-------------|---------|
| **æŠ€æœ¯å¼‚å¸¸** | `ç³»ç»Ÿå±‚é¢é—®é¢˜` | `è®°å½•æ—¥å¿—ï¼Œé€šçŸ¥ç®¡ç†å‘˜` | `æ•°æ®åº“è¿æ¥å¤±è´¥ã€å†…å­˜æº¢å‡º` |
| **ä¸šåŠ¡å¼‚å¸¸** | `ä¸šåŠ¡é€»è¾‘é—®é¢˜` | `å‹å¥½æç¤ºï¼Œå¼•å¯¼ç”¨æˆ·` | `ä½™é¢ä¸è¶³ã€å¯†ç é”™è¯¯` |

**ğŸ’» åˆ†ç±»å¤„ç†ç¤ºä¾‹**
```java
// æŠ€æœ¯å¼‚å¸¸å¤„ç†
try {
    connectToDatabase();
} catch (SQLException e) {
    logger.error("æ•°æ®åº“è¿æ¥å¤±è´¥", e);  // è®°å½•æŠ€æœ¯ç»†èŠ‚
    throw new SystemException("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");  // ç”¨æˆ·å‹å¥½ä¿¡æ¯
}

// ä¸šåŠ¡å¼‚å¸¸å¤„ç†
public void transfer(Account from, Account to, double amount) {
    if (from.getBalance() < amount) {
        throw new BusinessException("ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢ï¼š" + from.getBalance());
    }
}
```

### 1.3 å¼‚å¸¸ä¼ æ’­ï¼šå¼‚å¸¸åœ¨è°ƒç”¨é“¾ä¸­çš„ä¼ æ’­


**ğŸ”¸ å¼‚å¸¸ä¼ æ’­æœºåˆ¶ç†è§£**

å¼‚å¸¸ä¼ æ’­å°±åƒ**å¤šç±³è¯ºéª¨ç‰Œ**ï¼Œä¸€ä¸ªåœ°æ–¹å‡ºé”™ä¼šå½±å“åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹ã€‚

```
è°ƒç”¨é“¾å¼‚å¸¸ä¼ æ’­ç¤ºæ„ï¼š

ç”¨æˆ·ç•Œé¢ (UI)
    â†“ è°ƒç”¨
ä¸šåŠ¡æœåŠ¡ (Service) 
    â†“ è°ƒç”¨
æ•°æ®è®¿é—® (DAO)
    â†“ å¼‚å¸¸å‘ç”Ÿ
æ•°æ®åº“è¿æ¥å¤±è´¥ âŒ

ä¼ æ’­è·¯å¾„ï¼š
æ•°æ®åº“ â†’ DAO â†’ Service â†’ UI
æ¯ä¸€å±‚éƒ½è¦å†³å®šï¼šå¤„ç†è¿˜æ˜¯ç»§ç»­å¾€ä¸Šä¼ ï¼Ÿ
```

**âš¡ ä¼ æ’­ç­–ç•¥é€‰æ‹©**

```java
// ç­–ç•¥1ï¼šç«‹å³å¤„ç†ï¼Œä¸ç»§ç»­ä¼ æ’­
public List<User> getUsers() {
    try {
        return userDao.findAll();
    } catch (DataAccessException e) {
        logger.warn("è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥ï¼Œè¿”å›ç©ºåˆ—è¡¨", e);
        return Collections.emptyList();  // é™çº§å¤„ç†
    }
}

// ç­–ç•¥2ï¼šè½¬æ¢åç»§ç»­ä¼ æ’­
public User getUserById(Long id) {
    try {
        return userDao.findById(id);
    } catch (DataNotFoundException e) {
        throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨ï¼š" + id);  // è½¬æ¢æˆä¸šåŠ¡å¼‚å¸¸
    }
}

// ç­–ç•¥3ï¼šç›´æ¥ä¼ æ’­
public void saveUser(User user) throws DataAccessException {
    userDao.save(user);  // è®©è°ƒç”¨è€…å¤„ç†å¼‚å¸¸
}
```

### 1.4 å¼‚å¸¸æ¢å¤ï¼šå¼‚å¸¸å‘ç”Ÿåçš„æ¢å¤ç­–ç•¥


**ğŸ”¸ æ¢å¤ç­–ç•¥ç±»å‹**

**ğŸ”„ é‡è¯•ç­–ç•¥**
```java
public class RetryHandler {
    public Data fetchData() {
        int maxRetries = 3;
        int delay = 1000; // 1ç§’
        
        for (int i = 0; i < maxRetries; i++) {
            try {
                return httpClient.getData();
            } catch (NetworkException e) {
                if (i == maxRetries - 1) {
                    throw e;  // æœ€åä¸€æ¬¡é‡è¯•å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸
                }
                Thread.sleep(delay * (i + 1));  // æŒ‡æ•°é€€é¿
            }
        }
    }
}
```

**ğŸ”„ é™çº§ç­–ç•¥**
```java
public UserProfile getUserProfile(Long userId) {
    try {
        // å°è¯•ä»ä¸»æœåŠ¡è·å–å®Œæ•´ä¿¡æ¯
        return userService.getFullProfile(userId);
    } catch (ServiceException e) {
        // é™çº§ï¼šåªè¿”å›åŸºæœ¬ä¿¡æ¯
        logger.warn("ç”¨æˆ·æœåŠ¡å¼‚å¸¸ï¼Œä½¿ç”¨ç¼“å­˜æ•°æ®", e);
        return cacheService.getBasicProfile(userId);
    }
}
```

### 1.5 å¼‚å¸¸è®°å½•ï¼šå¼‚å¸¸ä¿¡æ¯çš„è®°å½•å’Œåˆ†æ


**ğŸ“Š å¼‚å¸¸è®°å½•çš„é‡è¦æ€§**

å¼‚å¸¸è®°å½•å°±åƒ**åŒ»é™¢çš„ç—…å†**ï¼Œè®°å½•è¯¦ç»†ä¿¡æ¯å¸®åŠ©è¯Šæ–­é—®é¢˜ã€‚

**ğŸ”¸ è®°å½•å†…å®¹ç»“æ„**
```
å¼‚å¸¸è®°å½•åº”è¯¥åŒ…å«ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… æ—¶é—´ï¼šä½•æ—¶å‘ç”Ÿ               â”‚
â”‚ ğŸ‘¤ ç”¨æˆ·ï¼šè°åœ¨æ“ä½œ               â”‚  
â”‚ ğŸ¯ æ“ä½œï¼šåœ¨åšä»€ä¹ˆ               â”‚
â”‚ ğŸ“ ä½ç½®ï¼šå“ªä¸ªæ–¹æ³•/ç±»            â”‚
â”‚ ğŸ’¥ å¼‚å¸¸ï¼šå…·ä½“é”™è¯¯ä¿¡æ¯           â”‚
â”‚ ğŸ”— ä¸Šä¸‹æ–‡ï¼šç›¸å…³çš„ä¸šåŠ¡æ•°æ®       â”‚
â”‚ ğŸ” å †æ ˆï¼šå®Œæ•´çš„è°ƒç”¨è½¨è¿¹         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’» å®ç”¨çš„å¼‚å¸¸è®°å½•**
```java
public class ExceptionLogger {
    
    public void logException(Exception e, String operation, String userId) {
        LogEntry entry = LogEntry.builder()
            .timestamp(Instant.now())
            .userId(userId)
            .operation(operation)
            .exceptionType(e.getClass().getSimpleName())
            .message(e.getMessage())
            .stackTrace(getStackTrace(e))
            .build();
            
        logger.error("æ“ä½œå¼‚å¸¸ - {}", entry.toString(), e);
        
        // é‡è¦å¼‚å¸¸ç«‹å³é€šçŸ¥
        if (isCritical(e)) {
            alertService.sendAlert(entry);
        }
    }
}
```

### 1.6 ç”¨æˆ·å‹å¥½ï¼šå¼‚å¸¸çš„ç”¨æˆ·å‹å¥½å±•ç¤º


**ğŸ¯ ç”¨æˆ·å‹å¥½çš„åŸåˆ™**

ç”¨æˆ·çœ‹åˆ°çš„é”™è¯¯ä¿¡æ¯åº”è¯¥åƒ**æœåŠ¡å‘˜çš„é“æ­‰**ï¼Œè€Œä¸æ˜¯**æŠ€æœ¯æ–‡æ¡£**ã€‚

**âŒ ä¸å‹å¥½çš„é”™è¯¯ä¿¡æ¯**
```
NullPointerException at line 247 in UserService.java
SQLException: Connection timeout after 30000ms
OutOfMemoryError: Java heap space
```

**âœ… å‹å¥½çš„é”™è¯¯ä¿¡æ¯**
```
"ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤ä¸­ï¼Œè¯·ç¨åå†è¯•"
"ç½‘ç»œè¿æ¥ä¸ç¨³å®šï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®"
"æœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"
```

**ğŸ’» é”™è¯¯ä¿¡æ¯è½¬æ¢ç¤ºä¾‹**
```java
public class UserFriendlyErrorHandler {
    
    public String convertToUserMessage(Exception e) {
        if (e instanceof NetworkException) {
            return "ç½‘ç»œè¿æ¥å‡ºç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®åé‡è¯•";
        } else if (e instanceof DatabaseException) {
            return "ç³»ç»Ÿæ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨åå†è¯•";
        } else if (e instanceof ValidationException) {
            return "è¾“å…¥ä¿¡æ¯æœ‰è¯¯ï¼š" + e.getMessage();
        } else {
            return "ç³»ç»Ÿå‡ºç°äº†å°é—®é¢˜ï¼Œæˆ‘ä»¬æ­£åœ¨ä¿®å¤ä¸­";
        }
    }
}
```

---

## 2. ğŸ›¡ï¸ å®¹é”™è®¾è®¡æ€ç»´


### 2.1 ä»€ä¹ˆæ˜¯å®¹é”™è®¾è®¡æ€ç»´


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
å®¹é”™è®¾è®¡æ€ç»´å°±æ˜¯**å‡è®¾ç³»ç»Ÿä¼šå‡ºé—®é¢˜**ï¼Œæå‰è®¾è®¡å¥½å‡ºé—®é¢˜æ—¶è¯¥æ€ä¹ˆåŠçš„æ€ç»´æ–¹å¼ã€‚å°±åƒå»ºæˆ¿å­æ—¶è€ƒè™‘åœ°éœ‡ï¼Œè®¾è®¡æŠ—éœ‡ç»“æ„ã€‚

```
å®¹é”™è®¾è®¡ç±»æ¯”ï¼š

ğŸ¢ å»ºç­‘æŠ—éœ‡è®¾è®¡ â†’ ç³»ç»Ÿå®¹é”™è®¾è®¡
ğŸš¢ èˆ¹èˆ¶é˜²æ°´èˆ±å®¤ â†’ æ•…éšœéš”ç¦»
âœˆï¸ é£æœºå¤‡ç”¨ç³»ç»Ÿ â†’ ç³»ç»Ÿå¤‡ä»½
ğŸš— æ±½è½¦å®‰å…¨æ°”å›Š â†’ ä¿æŠ¤æœºåˆ¶
```

### 2.2 æ•…éšœéš”ç¦»ï¼šæ•…éšœå½±å“èŒƒå›´çš„éš”ç¦»


**ğŸ”¸ éš”ç¦»çš„åŸºæœ¬æ€æƒ³**

æ•…éšœéš”ç¦»å°±åƒ**é˜²ç«å¢™**ï¼Œè®©ä¸€ä¸ªåœ°æ–¹çš„é—®é¢˜ä¸è¦è”“å»¶åˆ°å…¶ä»–åœ°æ–¹ã€‚

```
éš”ç¦»è®¾è®¡ç¤ºæ„å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·æ¨¡å—   â”‚  â”‚   è®¢å•æ¨¡å—   â”‚  â”‚   æ”¯ä»˜æ¨¡å—   â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚    æ­£å¸¸     â”‚  â”‚   ğŸ”¥æ•…éšœ    â”‚  â”‚    æ­£å¸¸     â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘                â†‘                â†‘
      â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  éš”ç¦»å±‚è®¾è®¡  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ æ•…éšœä¸ä¼ æ’­   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’» éš”ç¦»å®ç°æ–¹å¼**
```java
// çº¿ç¨‹æ± éš”ç¦»
public class ServiceIsolation {
    
    // ç”¨æˆ·æœåŠ¡ä¸“ç”¨çº¿ç¨‹æ± 
    private ThreadPoolExecutor userServicePool = 
        new ThreadPoolExecutor(10, 20, 60, TimeUnit.SECONDS, 
                              new LinkedBlockingQueue<>(100));
    
    // è®¢å•æœåŠ¡ä¸“ç”¨çº¿ç¨‹æ±   
    private ThreadPoolExecutor orderServicePool = 
        new ThreadPoolExecutor(10, 20, 60, TimeUnit.SECONDS, 
                              new LinkedBlockingQueue<>(100));
    
    public Future<User> getUserAsync(Long userId) {
        return userServicePool.submit(() -> userService.getUser(userId));
    }
    
    public Future<Order> getOrderAsync(Long orderId) {
        return orderServicePool.submit(() -> orderService.getOrder(orderId));
    }
}
```

### 2.3 é™çº§ç­–ç•¥ï¼šæœåŠ¡ä¸å¯ç”¨æ—¶çš„é™çº§


**ğŸ”¸ é™çº§çš„ç†è§£**

é™çº§å°±åƒ**åº”æ€¥é¢„æ¡ˆ**ï¼Œä¸»è¦æ–¹æ¡ˆä¸è¡Œæ—¶ï¼Œå¯ç”¨å¤‡ç”¨æ–¹æ¡ˆã€‚è™½ç„¶åŠŸèƒ½å¯èƒ½æ‰“æŠ˜æ‰£ï¼Œä½†ä¿è¯åŸºæœ¬å¯ç”¨ã€‚

```
æœåŠ¡é™çº§ç­–ç•¥å±‚æ¬¡ï¼š

ğŸ¥‡ å®Œæ•´æœåŠ¡ (Full Service)
   â†“ ä¸»æœåŠ¡æ•…éšœ
ğŸ¥ˆ æ ¸å¿ƒæœåŠ¡ (Core Service)  
   â†“ æ ¸å¿ƒæœåŠ¡æ•…éšœ
ğŸ¥‰ åŸºç¡€æœåŠ¡ (Basic Service)
   â†“ åŸºç¡€æœåŠ¡æ•…éšœ
ğŸ†˜ é™æ€é¡µé¢ (Static Page)
```

**ğŸ’» é™çº§å®ç°ç¤ºä¾‹**
```java
public class RecommendationService {
    
    public List<Product> getRecommendations(Long userId) {
        try {
            // ç­‰çº§1ï¼šä¸ªæ€§åŒ–æ¨è
            return aiService.getPersonalizedRecommendations(userId);
        } catch (AiServiceException e) {
            logger.warn("AIæ¨èæœåŠ¡ä¸å¯ç”¨ï¼Œé™çº§åˆ°çƒ­é—¨æ¨è", e);
            
            try {
                // ç­‰çº§2ï¼šçƒ­é—¨å•†å“æ¨è  
                return productService.getPopularProducts();
            } catch (ProductServiceException e2) {
                logger.warn("å•†å“æœåŠ¡ä¸å¯ç”¨ï¼Œé™çº§åˆ°ç¼“å­˜æ¨è", e2);
                
                // ç­‰çº§3ï¼šç¼“å­˜çš„é™æ€æ¨è
                return cacheService.getStaticRecommendations();
            }
        }
    }
}
```

### 2.4 ç†”æ–­æœºåˆ¶ï¼šè‡ªåŠ¨æ–­å¼€æ•…éšœæœåŠ¡


**ğŸ”¸ ç†”æ–­æœºåˆ¶ç†è§£**

ç†”æ–­æœºåˆ¶å°±åƒ**å®¶é‡Œçš„ä¿é™©ä¸**ï¼Œå½“ç”µæµè¿‡å¤§æ—¶è‡ªåŠ¨æ–­å¼€ï¼Œä¿æŠ¤å…¶ä»–è®¾å¤‡ä¸è¢«çƒ§åã€‚

```
ç†”æ–­å™¨çŠ¶æ€è½¬æ¢ï¼š

    æ­£å¸¸è°ƒç”¨
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     é”™è¯¯ç‡è¶…é˜ˆå€¼    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å…³é—­çŠ¶æ€   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚   æ‰“å¼€çŠ¶æ€   â”‚
â”‚ (CLOSED)    â”‚                   â”‚  (OPEN)     â”‚
â”‚   æ­£å¸¸é€šè¡Œ   â”‚                   â”‚   æ‹’ç»è¯·æ±‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                                  â†“
       â”‚                               è¶…æ—¶åå°è¯•
       â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â†“
       â””â”€â”€â”€â”€â”€â”€â”€ â”‚  åŠå¼€çŠ¶æ€    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         æˆåŠŸç‡  â”‚ (HALF-OPEN) â”‚   
         è¾¾æ ‡    â”‚   è¯•æ¢æ€§é€šè¡Œ  â”‚   
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’» ç®€å•ç†”æ–­å™¨å®ç°**
```java
public class CircuitBreaker {
    private State state = State.CLOSED;
    private int failureCount = 0;
    private long lastFailureTime = 0;
    private final int threshold = 5;          // å¤±è´¥é˜ˆå€¼
    private final long timeout = 60000;       // è¶…æ—¶æ—¶é—´(æ¯«ç§’)
    
    public Object call(Supplier<Object> supplier) throws Exception {
        if (state == State.OPEN) {
            // æ£€æŸ¥æ˜¯å¦è¶…è¿‡è¶…æ—¶æ—¶é—´
            if (System.currentTimeMillis() - lastFailureTime > timeout) {
                state = State.HALF_OPEN;
                failureCount = 0;
            } else {
                throw new CircuitBreakerOpenException("æœåŠ¡æš‚æ—¶ä¸å¯ç”¨");
            }
        }
        
        try {
            Object result = supplier.get();
            onSuccess();
            return result;
        } catch (Exception e) {
            onFailure();
            throw e;
        }
    }
    
    private void onSuccess() {
        if (state == State.HALF_OPEN) {
            state = State.CLOSED;
        }
        failureCount = 0;
    }
    
    private void onFailure() {
        failureCount++;
        lastFailureTime = System.currentTimeMillis();
        
        if (failureCount >= threshold) {
            state = State.OPEN;
        }
    }
    
    enum State { CLOSED, OPEN, HALF_OPEN }
}
```

### 2.5 é™æµä¿æŠ¤ï¼šè¿‡è½½ä¿æŠ¤çš„é™æµæœºåˆ¶


**ğŸ”¸ é™æµä¿æŠ¤çš„ç†è§£**

é™æµå°±åƒ**æ™¯åŒºé™åˆ¶æ¸¸å®¢æ•°é‡**ï¼Œé¿å…è¿‡å¤šäººå‘˜é€ æˆæ‹¥æŒ¤å’Œå±é™©ã€‚

```
é™æµç­–ç•¥ç±»å‹ï¼š

ğŸš° ä»¤ç‰Œæ¡¶ç®—æ³•
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ä»¤ç‰Œæ¡¶     â”‚ â† å›ºå®šé€Ÿç‡æ”¾å…¥ä»¤ç‰Œ
   â”‚ ğŸª™ğŸª™ğŸª™ğŸª™   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ è¯·æ±‚æ¥äº†å–ä»¤ç‰Œ
      èƒ½å–åˆ°â†’é€šè¿‡
      å–ä¸åˆ°â†’æ‹’ç»

â±ï¸ æ»‘åŠ¨çª—å£ç®—æ³•  
   æ—¶é—´çª—å£: [1åˆ†é’Ÿ]
   â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”
   â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ—â”‚âœ—â”‚
   â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜
   å·²å¤„ç†8ä¸ªè¯·æ±‚ï¼Œé™åˆ¶10ä¸ª/åˆ†é’Ÿ
   è¿˜èƒ½å¤„ç†2ä¸ª
```

**ğŸ’» ç®€å•é™æµå®ç°**
```java
public class RateLimiter {
    private final int capacity;     // æ¡¶å®¹é‡
    private final int refillRate;   // æ¯ç§’è¡¥å……ä»¤ç‰Œæ•°
    private int tokens;             // å½“å‰ä»¤ç‰Œæ•°
    private long lastRefillTime;    // ä¸Šæ¬¡è¡¥å……æ—¶é—´
    
    public RateLimiter(int capacity, int refillRate) {
        this.capacity = capacity;
        this.refillRate = refillRate;
        this.tokens = capacity;
        this.lastRefillTime = System.currentTimeMillis();
    }
    
    public synchronized boolean tryAcquire() {
        refillTokens();
        
        if (tokens > 0) {
            tokens--;
            return true;  // è·å–æˆåŠŸ
        }
        return false;     // è·å–å¤±è´¥ï¼Œè¢«é™æµ
    }
    
    private void refillTokens() {
        long now = System.currentTimeMillis();
        long timePassed = now - lastRefillTime;
        
        if (timePassed > 1000) { // è¶…è¿‡1ç§’
            int newTokens = (int) (timePassed / 1000 * refillRate);
            tokens = Math.min(capacity, tokens + newTokens);
            lastRefillTime = now;
        }
    }
}
```

### 2.6 å¤‡ä»½æ–¹æ¡ˆï¼šä¸»è¦æ–¹æ¡ˆå¤±è´¥æ—¶çš„å¤‡é€‰


**ğŸ”¸ å¤‡ä»½æ–¹æ¡ˆè®¾è®¡**

å¤‡ä»½æ–¹æ¡ˆå°±åƒ**æ•‘ç”Ÿè‰‡**ï¼Œä¸»èˆ¹å‡ºé—®é¢˜æ—¶çš„æ›¿ä»£é€‰æ‹©ã€‚

```
å¤‡ä»½æ–¹æ¡ˆå±‚æ¬¡è®¾è®¡ï¼š

ä¸»æ–¹æ¡ˆ â†’ å¤‡æ–¹æ¡ˆ1 â†’ å¤‡æ–¹æ¡ˆ2 â†’ å…œåº•æ–¹æ¡ˆ

ğŸ¯ ç”¨æˆ·ç™»å½•ç¤ºä¾‹ï¼š
ä¸»: æ•°æ®åº“éªŒè¯ 
â†“ æ•…éšœ
å¤‡1: Redisç¼“å­˜éªŒè¯
â†“ æ•…éšœ  
å¤‡2: æœ¬åœ°æ–‡ä»¶éªŒè¯
â†“ æ•…éšœ
å…œåº•: ç»´æŠ¤æ¨¡å¼é¡µé¢
```

**ğŸ’» å¤‡ä»½æ–¹æ¡ˆå®ç°**
```java
public class LoginService {
    
    public LoginResult login(String username, String password) {
        // ä¸»æ–¹æ¡ˆï¼šæ•°æ®åº“éªŒè¯
        try {
            return databaseAuth.authenticate(username, password);
        } catch (DatabaseException e) {
            logger.warn("æ•°æ®åº“è®¤è¯å¤±è´¥ï¼Œåˆ‡æ¢åˆ°ç¼“å­˜è®¤è¯", e);
        }
        
        // å¤‡æ–¹æ¡ˆ1ï¼šç¼“å­˜éªŒè¯
        try {
            return cacheAuth.authenticate(username, password);
        } catch (CacheException e) {
            logger.warn("ç¼“å­˜è®¤è¯å¤±è´¥ï¼Œåˆ‡æ¢åˆ°æ–‡ä»¶è®¤è¯", e);
        }
        
        // å¤‡æ–¹æ¡ˆ2ï¼šæœ¬åœ°æ–‡ä»¶éªŒè¯
        try {
            return fileAuth.authenticate(username, password);
        } catch (FileException e) {
            logger.error("æ‰€æœ‰è®¤è¯æ–¹å¼å¤±è´¥", e);
        }
        
        // å…œåº•æ–¹æ¡ˆï¼šç»´æŠ¤æ¨¡å¼
        return LoginResult.maintenanceMode("ç³»ç»Ÿç»´æŠ¤ä¸­ï¼Œè¯·ç¨åå†è¯•");
    }
}
```

---

## 3. ğŸ”„ æ¢å¤æ€§æ€ç»´


### 3.1 ä»€ä¹ˆæ˜¯æ¢å¤æ€§æ€ç»´


**ğŸ”¸ åŸºæœ¬ç†è§£**
æ¢å¤æ€§æ€ç»´å°±æ˜¯**å¿«é€Ÿä»æ•…éšœä¸­æ¢å¤**çš„æ€ç»´æ–¹å¼ã€‚å°±åƒäººç”Ÿç—…åè¦å¿«é€Ÿåº·å¤ï¼Œç³»ç»Ÿå‡ºé—®é¢˜åä¹Ÿè¦å¿«é€Ÿæ¢å¤æ­£å¸¸ã€‚

```
æ¢å¤æ€§æ€ç»´çš„æ ¸å¿ƒï¼š

ğŸ“Š å¿«é€Ÿå‘ç°é—®é¢˜ (Detection)
   â†“
ğŸš¨ åŠæ—¶å“åº”æ•…éšœ (Response)  
   â†“
ğŸ› ï¸ è¿…é€Ÿä¿®å¤é—®é¢˜ (Recovery)
   â†“  
ğŸ“ˆ æ€»ç»“æ”¹è¿›æµç¨‹ (Learning)
```

### 3.2 æ•…éšœæ£€æµ‹ï¼šå¿«é€Ÿå‘ç°ç³»ç»Ÿæ•…éšœ


**ğŸ”¸ æ£€æµ‹çš„é‡è¦æ€§**

æ•…éšœæ£€æµ‹å°±åƒ**èº«ä½“çš„ç¥ç»ç³»ç»Ÿ**ï¼Œå“ªé‡Œæœ‰é—®é¢˜ç«‹åˆ»æ„ŸçŸ¥åˆ°ã€‚å‘ç°è¶Šæ—©ï¼ŒæŸå¤±è¶Šå°ã€‚

```
æ£€æµ‹å±‚æ¬¡ç»“æ„ï¼š

ğŸ” å®æ—¶ç›‘æ§ (Real-time Monitoring)
   â”œâ”€ æ€§èƒ½æŒ‡æ ‡: CPUã€å†…å­˜ã€å“åº”æ—¶é—´  
   â”œâ”€ ä¸šåŠ¡æŒ‡æ ‡: è®¢å•é‡ã€ç™»å½•æˆåŠŸç‡
   â””â”€ é”™è¯¯æŒ‡æ ‡: å¼‚å¸¸ç‡ã€è¶…æ—¶ç‡

âš ï¸ æ™ºèƒ½å‘Šè­¦ (Smart Alerting)  
   â”œâ”€ é˜ˆå€¼å‘Šè­¦: è¶…è¿‡è®¾å®šå€¼å°±è­¦æŠ¥
   â”œâ”€ è¶‹åŠ¿å‘Šè­¦: æŒ‡æ ‡å˜åŒ–è¶‹åŠ¿å¼‚å¸¸
   â””â”€ å¼‚å¸¸æ£€æµ‹: AIè¯†åˆ«å¼‚å¸¸æ¨¡å¼

ğŸ”” å¤šæ¸ é“é€šçŸ¥ (Multi-channel Notification)
   â”œâ”€ é‚®ä»¶é€šçŸ¥: éç´§æ€¥é—®é¢˜  
   â”œâ”€ çŸ­ä¿¡é€šçŸ¥: ç´§æ€¥é—®é¢˜
   â””â”€ ç”µè¯é€šçŸ¥: ä¸¥é‡æ•…éšœ
```

**ğŸ’» ç›‘æ§æ£€æµ‹ç¤ºä¾‹**
```java
public class HealthChecker {
    private final List<HealthIndicator> indicators;
    private final AlertService alertService;
    
    @Scheduled(fixedRate = 30000) // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
    public void performHealthCheck() {
        HealthStatus overallStatus = HealthStatus.UP;
        Map<String, Object> details = new HashMap<>();
        
        for (HealthIndicator indicator : indicators) {
            try {
                Health health = indicator.health();
                details.put(indicator.getName(), health);
                
                if (health.getStatus() == HealthStatus.DOWN) {
                    overallStatus = HealthStatus.DOWN;
                    alertService.sendAlert(
                        "æœåŠ¡å¼‚å¸¸: " + indicator.getName() + 
                        " - " + health.getDetails()
                    );
                }
            } catch (Exception e) {
                overallStatus = HealthStatus.DOWN;
                alertService.sendAlert("å¥åº·æ£€æŸ¥å¤±è´¥: " + indicator.getName(), e);
            }
        }
        
        updateHealthStatus(overallStatus, details);
    }
}
```

### 3.3 è‡ªåŠ¨æ¢å¤ï¼šç³»ç»Ÿçš„è‡ªæ„ˆèƒ½åŠ›


**ğŸ”¸ è‡ªåŠ¨æ¢å¤çš„ç†è§£**

è‡ªåŠ¨æ¢å¤å°±åƒ**äººä½“çš„å…ç–«ç³»ç»Ÿ**ï¼Œå‘ç°é—®é¢˜åè‡ªåŠ¨ä¿®å¤ï¼Œä¸éœ€è¦å¤–ç•Œå¹²é¢„ã€‚

```
è‡ªåŠ¨æ¢å¤ç­–ç•¥ï¼š

ğŸ”„ æœåŠ¡é‡å¯ç­–ç•¥
   â”œâ”€ è¿›ç¨‹æ­»äº† â†’ è‡ªåŠ¨é‡å¯è¿›ç¨‹
   â”œâ”€ å†…å­˜æ³„éœ² â†’ å®šæœŸé‡å¯æ¸…ç†  
   â””â”€ å“åº”è¶…æ—¶ â†’ é‡å¯ç›¸å…³æœåŠ¡

ğŸ”€ æµé‡åˆ‡æ¢ç­–ç•¥  
   â”œâ”€ ä¸»æœåŠ¡å™¨æ•…éšœ â†’ åˆ‡æ¢åˆ°å¤‡æœåŠ¡å™¨
   â”œâ”€ æ•°æ®åº“æ•…éšœ â†’ åˆ‡æ¢åˆ°å¤‡ç”¨æ•°æ®åº“
   â””â”€ ç½‘ç»œæ•…éšœ â†’ åˆ‡æ¢åˆ°å¤‡ç”¨ç½‘ç»œ

ğŸ¥ å¥åº·æ¢å¤ç­–ç•¥
   â”œâ”€ é€æ­¥å¢åŠ æµé‡ â†’ é¿å…æ¢å¤åå†æ¬¡æ•…éšœ  
   â”œâ”€ é¢„çƒ­ç¼“å­˜ â†’ æ¢å¤å‰å‡†å¤‡å¥½æ•°æ®
   â””â”€ éªŒè¯åŠŸèƒ½ â†’ ç¡®è®¤æ¢å¤æ•ˆæœ
```

**ğŸ’» è‡ªåŠ¨æ¢å¤å®ç°**
```java
public class AutoRecoveryService {
    
    @EventListener
    public void handleServiceDown(ServiceDownEvent event) {
        String serviceName = event.getServiceName();
        logger.warn("æ£€æµ‹åˆ°æœåŠ¡æ•…éšœ: {}", serviceName);
        
        // 1. å°è¯•é‡å¯æœåŠ¡
        if (tryRestartService(serviceName)) {
            logger.info("æœåŠ¡é‡å¯æˆåŠŸ: {}", serviceName);
            return;
        }
        
        // 2. åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡
        if (switchToBackupService(serviceName)) {
            logger.info("å·²åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡: {}", serviceName);
            
            // 3. å¼‚æ­¥å°è¯•ä¿®å¤ä¸»æœåŠ¡
            CompletableFuture.runAsync(() -> repairMainService(serviceName));
            return;
        }
        
        // 4. å¯åŠ¨é™çº§æ¨¡å¼
        activateDegradedMode(serviceName);
        logger.error("æœåŠ¡è¿›å…¥é™çº§æ¨¡å¼: {}", serviceName);
    }
    
    private boolean tryRestartService(String serviceName) {
        try {
            serviceManager.restart(serviceName);
            Thread.sleep(5000); // ç­‰å¾…æœåŠ¡å¯åŠ¨
            return healthChecker.isHealthy(serviceName);
        } catch (Exception e) {
            logger.error("æœåŠ¡é‡å¯å¤±è´¥: " + serviceName, e);
            return false;
        }
    }
}
```

### 3.4 äººå·¥æ¢å¤ï¼šéœ€è¦äººå·¥å¹²é¢„çš„æ¢å¤


**ğŸ”¸ äººå·¥æ¢å¤çš„åœºæ™¯**

æœ‰äº›å¤æ‚é—®é¢˜å°±åƒ**éœ€è¦æ‰‹æœ¯çš„ç–¾ç—…**ï¼Œå¿…é¡»è¦ä¸“ä¸šäººå‘˜æ‰‹åŠ¨å¤„ç†ã€‚

```
éœ€è¦äººå·¥æ¢å¤çš„æƒ…å†µï¼š

ğŸ’¾ æ•°æ®æŸå
   â”œâ”€ æ•°æ®æ–‡ä»¶æŸå â†’ éœ€è¦æ•°æ®æ¢å¤ä¸“å®¶
   â”œâ”€ æ•°æ®åº“å´©æºƒ â†’ éœ€è¦DBAå¤„ç†
   â””â”€ å¤‡ä»½æ–‡ä»¶é—®é¢˜ â†’ éœ€è¦è¿ç»´ä»‹å…¥

ğŸ”§ é…ç½®é”™è¯¯  
   â”œâ”€ ç½‘ç»œé…ç½®é”™è¯¯ â†’ éœ€è¦ç½‘ç»œå·¥ç¨‹å¸ˆ
   â”œâ”€ å®‰å…¨é…ç½®é—®é¢˜ â†’ éœ€è¦å®‰å…¨ä¸“å®¶  
   â””â”€ ä¸šåŠ¡é€»è¾‘é”™è¯¯ â†’ éœ€è¦å¼€å‘äººå‘˜

ğŸš¨ å®‰å…¨äº‹ä»¶
   â”œâ”€ é»‘å®¢æ”»å‡» â†’ éœ€è¦å®‰å…¨å›¢é˜Ÿå“åº”
   â”œâ”€ æ•°æ®æ³„éœ² â†’ éœ€è¦æ³•åŠ¡å’ŒPRé…åˆ
   â””â”€ ç³»ç»Ÿå…¥ä¾µ â†’ éœ€è¦åº”æ€¥å“åº”å›¢é˜Ÿ
```

**ğŸ“‹ äººå·¥æ¢å¤æµç¨‹**
```java
public class ManualRecoveryWorkflow {
    
    public void initiateManualRecovery(Incident incident) {
        // 1. é—®é¢˜åˆ†ç±»å’Œåˆ†çº§
        IncidentLevel level = classifyIncident(incident);
        
        // 2. é€šçŸ¥ç›¸å…³äººå‘˜
        notifyResponsibleTeam(incident, level);
        
        // 3. åˆ›å»ºå·¥ä½œå•
        WorkOrder workOrder = createWorkOrder(incident);
        
        // 4. å¼€å§‹æ¢å¤æµç¨‹
        RecoveryPlan plan = generateRecoveryPlan(incident);
        
        // 5. æ‰§è¡Œæ¢å¤æ­¥éª¤
        for (RecoveryStep step : plan.getSteps()) {
            executeStep(step);
            updateProgress(workOrder, step);
            
            // å…³é”®æ­¥éª¤éœ€è¦å®¡æ‰¹
            if (step.requiresApproval()) {
                waitForApproval(step);
            }
        }
        
        // 6. éªŒè¯æ¢å¤æ•ˆæœ
        if (verifyRecovery(incident)) {
            closeWorkOrder(workOrder);
            generatePostMortem(incident);
        }
    }
}
```

### 3.5 æ•°æ®æ¢å¤ï¼šæ•°æ®æŸåæ—¶çš„æ¢å¤


**ğŸ”¸ æ•°æ®æ¢å¤çš„é‡è¦æ€§**

æ•°æ®æ¢å¤å°±åƒ**çè´µæ–‡ç‰©çš„ä¿®å¤**ï¼Œéœ€è¦å°å¿ƒè°¨æ…ï¼Œç¡®ä¿ä¸é€ æˆäºŒæ¬¡æŸå®³ã€‚

```
æ•°æ®æ¢å¤ç­–ç•¥å±‚æ¬¡ï¼š

ğŸ¯ é¢„é˜²ä¸ºä¸» (Prevention First)
   â”œâ”€ å®šæœŸå¤‡ä»½ â†’ å¤šä¸ªæ—¶é—´ç‚¹çš„æ•°æ®å¿«ç…§
   â”œâ”€ å¼‚åœ°å¤‡ä»½ â†’ é˜²æ­¢ç‰©ç†ç¾éš¾
   â””â”€ å®æ—¶åŒæ­¥ â†’ ä¸»ä»æ•°æ®åº“åŒæ­¥

âš¡ å¿«é€Ÿæ¢å¤ (Quick Recovery)  
   â”œâ”€ çƒ­å¤‡åˆ‡æ¢ â†’ ç§’çº§åˆ‡æ¢åˆ°å¤‡ç”¨ç³»ç»Ÿ
   â”œâ”€ å¢é‡æ¢å¤ â†’ åªæ¢å¤å˜åŒ–çš„æ•°æ®
   â””â”€ å¹¶è¡Œæ¢å¤ â†’ å¤šçº¿ç¨‹åŠ é€Ÿæ¢å¤è¿‡ç¨‹

ğŸ” ç²¾ç¡®æ¢å¤ (Precise Recovery)
   â”œâ”€ æ—¶é—´ç‚¹æ¢å¤ â†’ æ¢å¤åˆ°æŒ‡å®šæ—¶é—´
   â”œâ”€ è¡¨çº§æ¢å¤ â†’ åªæ¢å¤æŸåçš„è¡¨
   â””â”€ è®°å½•çº§æ¢å¤ â†’ æ¢å¤ç‰¹å®šçš„æ•°æ®è®°å½•
```

**ğŸ’» æ•°æ®æ¢å¤å®ç°**
```java
public class DataRecoveryService {
    
    public RecoveryResult recoverData(DataLossEvent event) {
        RecoveryPlan plan = createRecoveryPlan(event);
        
        try {
            // 1. è¯„ä¼°æ•°æ®æŸå¤±èŒƒå›´
            DataLossAssessment assessment = assessDataLoss(event);
            
            // 2. é€‰æ‹©æœ€é€‚åˆçš„å¤‡ä»½
            Backup bestBackup = findBestBackup(assessment.getLossTime());
            
            // 3. æ‰§è¡Œæ•°æ®æ¢å¤
            if (assessment.getScope() == DataScope.FULL) {
                return performFullRecovery(bestBackup);
            } else {
                return performPartialRecovery(bestBackup, assessment);
            }
            
        } catch (RecoveryException e) {
            // æ¢å¤å¤±è´¥ï¼Œå°è¯•å…¶ä»–å¤‡ä»½
            logger.error("ä¸»å¤‡ä»½æ¢å¤å¤±è´¥ï¼Œå°è¯•å…¶ä»–å¤‡ä»½", e);
            return tryAlternativeBackups(event);
        }
    }
    
    private RecoveryResult performFullRecovery(Backup backup) {
        // 1. åœæ­¢åº”ç”¨å†™å…¥
        applicationService.enableReadOnlyMode();
        
        try {
            // 2. æ¢å¤æ•°æ®
            backupService.restore(backup);
            
            // 3. éªŒè¯æ•°æ®å®Œæ•´æ€§  
            if (dataValidator.validate()) {
                // 4. æ¢å¤åº”ç”¨æœåŠ¡
                applicationService.enableWriteMode();
                return RecoveryResult.success("æ•°æ®æ¢å¤æˆåŠŸ");
            } else {
                throw new DataCorruptionException("æ¢å¤åæ•°æ®éªŒè¯å¤±è´¥");
            }
            
        } catch (Exception e) {
            // æ¢å¤å¤±è´¥ï¼Œå›æ»š
            applicationService.enableMaintenanceMode();
            throw new RecoveryException("æ•°æ®æ¢å¤å¤±è´¥", e);
        }
    }
}
```

### 3.6 ä¸šåŠ¡æ¢å¤ï¼šä¸šåŠ¡æµç¨‹çš„å¿«é€Ÿæ¢å¤


**ğŸ”¸ ä¸šåŠ¡æ¢å¤çš„ç†è§£**

ä¸šåŠ¡æ¢å¤å°±åƒ**å•†åº—åœç”µåçš„åº”æ€¥æªæ–½**ï¼Œè¦ç¡®ä¿å…³é”®ä¸šåŠ¡èƒ½ç»§ç»­è¿è½¬ã€‚

```
ä¸šåŠ¡æ¢å¤ä¼˜å…ˆçº§ï¼š

ğŸš¨ æ ¸å¿ƒä¸šåŠ¡ (Critical Business)
   â”œâ”€ ç”¨æˆ·ç™»å½• â†’ æœ€é«˜ä¼˜å…ˆçº§æ¢å¤
   â”œâ”€ æ”¯ä»˜åŠŸèƒ½ â†’ ç›´æ¥å½±å“æ”¶å…¥  
   â””â”€ æ ¸å¿ƒAPI â†’ å½±å“å…¶ä»–ç³»ç»Ÿ

âš ï¸ é‡è¦ä¸šåŠ¡ (Important Business)
   â”œâ”€ è®¢å•å¤„ç† â†’ å½±å“ç”¨æˆ·ä½“éªŒ
   â”œâ”€ æ¶ˆæ¯é€šçŸ¥ â†’ ç”¨æˆ·æ„ŸçŸ¥æ˜æ˜¾
   â””â”€ æ•°æ®æŠ¥è¡¨ â†’ å½±å“å†³ç­–åˆ†æ

ğŸ“‹ ä¸€èˆ¬ä¸šåŠ¡ (Normal Business)  
   â”œâ”€ æ¨èç³»ç»Ÿ â†’ å¯ä»¥æš‚æ—¶é™çº§
   â”œâ”€ ç»Ÿè®¡åˆ†æ â†’ å¯ä»¥å»¶åå¤„ç†
   â””â”€ æ—¥å¿—æ”¶é›† â†’ å½±å“ç›¸å¯¹è¾ƒå°
```

**ğŸ’» ä¸šåŠ¡æ¢å¤å®ç°**
```java
public class BusinessRecoveryService {
    
    public void startBusinessRecovery(SystemFailureEvent event) {
        // 1. è¯„ä¼°ä¸šåŠ¡å½±å“
        BusinessImpactAssessment impact = assessBusinessImpact(event);
        
        // 2. æŒ‰ä¼˜å…ˆçº§æ¢å¤ä¸šåŠ¡
        List<BusinessService> services = impact.getAffectedServices();
        services.sort(Comparator.comparing(BusinessService::getPriority));
        
        for (BusinessService service : services) {
            try {
                recoverBusinessService(service);
                logger.info("ä¸šåŠ¡æœåŠ¡æ¢å¤æˆåŠŸ: {}", service.getName());
            } catch (RecoveryException e) {
                // æ¢å¤å¤±è´¥ï¼Œå¯ç”¨æ›¿ä»£æ–¹æ¡ˆ
                activateBusinessWorkaround(service);
                logger.warn("ä¸šåŠ¡æœåŠ¡æ¢å¤å¤±è´¥ï¼Œå·²å¯ç”¨æ›¿ä»£æ–¹æ¡ˆ: {}", service.getName());
            }
        }
        
        // 3. é€šçŸ¥ä¸šåŠ¡å›¢é˜Ÿ
        notifyBusinessTeams(impact);
        
        // 4. ç›‘æ§ä¸šåŠ¡æŒ‡æ ‡
        startBusinessMetricsMonitoring();
    }
    
    private void recoverBusinessService(BusinessService service) {
        // 1. æ£€æŸ¥ä¾èµ–æœåŠ¡
        for (Dependency dep : service.getDependencies()) {
            if (!dep.isHealthy()) {
                throw new RecoveryException("ä¾èµ–æœåŠ¡æœªæ¢å¤: " + dep.getName());
            }
        }
        
        // 2. æ¢å¤æœåŠ¡
        service.start();
        
        // 3. é¢„çƒ­ç¼“å­˜å’Œæ•°æ®
        service.warmup();
        
        // 4. éªŒè¯ä¸šåŠ¡åŠŸèƒ½
        BusinessHealthCheck healthCheck = service.getHealthCheck();
        if (!healthCheck.isHealthy()) {
            throw new RecoveryException("ä¸šåŠ¡åŠŸèƒ½éªŒè¯å¤±è´¥");
        }
        
        // 5. é€æ­¥å¼€æ”¾æµé‡
        service.enableTrafficGradually();
    }
}
```

---

## 4. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 4.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¼‚å¸¸å¤„ç†æ€ç»´ï¼šé¢„æ–™å¤±è´¥ï¼Œä¼˜é›…å¤„ç†ï¼Œä¿¡æ¯é€æ˜ï¼Œç”¨æˆ·å‹å¥½
ğŸ”¸ å®¹é”™è®¾è®¡æ€ç»´ï¼šæ•…éšœéš”ç¦»ï¼ŒæœåŠ¡é™çº§ï¼Œç†”æ–­ä¿æŠ¤ï¼Œé™æµæ§åˆ¶
ğŸ”¸ æ¢å¤æ€§æ€ç»´ï¼šå¿«é€Ÿæ£€æµ‹ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œäººå·¥å¹²é¢„ï¼Œä¸šåŠ¡è¿ç»­
ğŸ”¸ ç¨³å®šæ€§ä¿éšœï¼šé¢„é˜²+æ£€æµ‹+æ¢å¤+æ”¹è¿›çš„å®Œæ•´é—­ç¯
```

### 4.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¼‚å¸¸å¤„ç†çš„å±‚æ¬¡æ€§**
```
æŠ€æœ¯å¼‚å¸¸ â†’ è®°å½•è¯¦æƒ…ï¼Œç”¨æˆ·å‹å¥½æç¤º
ä¸šåŠ¡å¼‚å¸¸ â†’ å¼•å¯¼ç”¨æˆ·ï¼Œæä¾›è§£å†³æ–¹æ¡ˆ  
ç³»ç»Ÿå¼‚å¸¸ â†’ ç«‹å³å‘Šè­¦ï¼Œå¿«é€Ÿå“åº”
```

**ğŸ”¹ å®¹é”™è®¾è®¡çš„å…¨é¢æ€§**
```
é¢„é˜²æ•…éšœ â†’ éš”ç¦»è®¾è®¡ï¼Œé™çº§ç­–ç•¥
æ§åˆ¶æ•…éšœ â†’ ç†”æ–­æœºåˆ¶ï¼Œé™æµä¿æŠ¤
åº”å¯¹æ•…éšœ â†’ å¤‡ä»½æ–¹æ¡ˆï¼Œå¿«é€Ÿåˆ‡æ¢
```

**ğŸ”¹ æ¢å¤ç­–ç•¥çš„æ—¶æ•ˆæ€§**
```
è‡ªåŠ¨æ¢å¤ â†’ ç§’çº§å“åº”ï¼Œæ— äººå¹²é¢„
åŠè‡ªåŠ¨æ¢å¤ â†’ åˆ†é’Ÿçº§å“åº”ï¼Œç¡®è®¤æ‰§è¡Œ  
äººå·¥æ¢å¤ â†’ å°æ—¶çº§å“åº”ï¼Œä¸“å®¶å¤„ç†
```

### 4.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡ä»·å€¼**
- **ç”¨æˆ·ä½“éªŒ**ï¼šç³»ç»Ÿç¨³å®šï¼Œç”¨æˆ·ä¿¡ä»»åº¦é«˜
- **ä¸šåŠ¡è¿ç»­æ€§**ï¼šæ•…éšœå½±å“æœ€å°ï¼ŒæŸå¤±å¯æ§
- **æˆæœ¬æ§åˆ¶**ï¼šé¢„é˜²ä¸ºä¸»ï¼Œé™ä½æ•…éšœæˆæœ¬

**ğŸ”§ æŠ€æœ¯ä»·å€¼**  
- **ç³»ç»Ÿå¯é æ€§**ï¼šæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§æŒ‡æ ‡
- **è¿ç»´æ•ˆç‡**ï¼šè‡ªåŠ¨åŒ–æ¢å¤ï¼Œå‡å°‘äººå·¥å¹²é¢„
- **é—®é¢˜å®šä½**ï¼šå®Œå–„çš„ç›‘æ§å’Œæ—¥å¿—ä½“ç³»

**ğŸ’¡ å›¢é˜Ÿä»·å€¼**
- **æŠ€æœ¯èƒ½åŠ›**ï¼šæå‡å›¢é˜Ÿçš„æŠ€æœ¯æ°´å¹³å’Œç»éªŒ
- **åº”æ€¥å“åº”**ï¼šå»ºç«‹å®Œå–„çš„æ•…éšœåº”æ€¥æµç¨‹
- **æŒç»­æ”¹è¿›**ï¼šä»æ¯æ¬¡æ•…éšœä¸­å­¦ä¹ å’Œæ”¹è¿›

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
å¼‚å¸¸å¤„ç†è¦å‹å¥½ï¼Œåˆ†ç±»ä¼ æ’­è®°å½•å¥½
å®¹é”™è®¾è®¡æƒ³å‘¨å…¨ï¼Œéš”ç¦»é™çº§ç†”æ–­é™
æ¢å¤ç­–ç•¥åˆ†å±‚æ¬¡ï¼Œæ£€æµ‹è‡ªåŠ¨åŠ äººå·¥
ç¨³å®šä¿éšœæ˜¯ç³»ç»Ÿï¼Œé¢„é˜²æ£€æµ‹æ¢å¤è¿›
```