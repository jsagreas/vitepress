---
title: 11ã€IOä¼˜åŒ–æ€ç»´
---
## ğŸ“š ç›®å½•

1. [åŒæ­¥vså¼‚æ­¥IO](#1-åŒæ­¥vså¼‚æ­¥IO)
2. [æ‰¹é‡æ“ä½œä¼˜åŒ–](#2-æ‰¹é‡æ“ä½œä¼˜åŒ–)
3. [ç¼“å†²åŒºç®¡ç†](#3-ç¼“å†²åŒºç®¡ç†)
4. [é›¶æ‹·è´æŠ€æœ¯](#4-é›¶æ‹·è´æŠ€æœ¯)
5. [ç½‘ç»œIOæ¨¡å‹](#5-ç½‘ç»œIOæ¨¡å‹)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ åŒæ­¥vså¼‚æ­¥IO


### 1.1 ä»€ä¹ˆæ˜¯IOæ“ä½œ


**ğŸ“– IOçš„æœ¬è´¨**ï¼š
> ğŸ’¡ **IOï¼ˆInput/Outputï¼‰**ï¼šè¾“å…¥è¾“å‡ºæ“ä½œï¼Œç¨‹åºä¸å¤–éƒ¨ä¸–ç•Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹
> 
> å°±åƒäººä¸å¤–ç•Œäº¤æµéœ€è¦é€šè¿‡çœ¼è€³å£é¼»ï¼Œç¨‹åºä¸å¤–ç•Œäº¤æ¢æ•°æ®éœ€è¦é€šè¿‡IOæ“ä½œ

**å¸¸è§IOæ“ä½œ**ï¼š
- ğŸ“ **æ–‡ä»¶è¯»å†™**ï¼šè¯»å–é…ç½®æ–‡ä»¶ã€ä¿å­˜ç”¨æˆ·æ•°æ®
- ğŸŒ **ç½‘ç»œé€šä¿¡**ï¼šå‘é€HTTPè¯·æ±‚ã€æ¥æ”¶æœåŠ¡å™¨å“åº”
- ğŸ’¾ **æ•°æ®åº“æ“ä½œ**ï¼šæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€æ›´æ–°è®¢å•çŠ¶æ€
- ğŸ–¨ï¸ **è®¾å¤‡äº¤äº’**ï¼šæ‰“å°æ–‡æ¡£ã€è¯»å–æ‘„åƒå¤´æ•°æ®

### 1.2 åŒæ­¥IOï¼šç­‰å¾…å¼æ“ä½œ


**ğŸ”¸ åŒæ­¥IOçš„å·¥ä½œæ–¹å¼**ï¼š
```
ç¨‹åºå‘èµ·IOè¯·æ±‚ â†’ ç­‰å¾…æ“ä½œå®Œæˆ â†’ å¾—åˆ°ç»“æœ â†’ ç»§ç»­æ‰§è¡Œ

å°±åƒå»é“¶è¡ŒåŠä¸šåŠ¡ï¼š
æ’é˜Ÿå–å· â†’ ç­‰å¾…å«å· â†’ åŠç†ä¸šåŠ¡ â†’ æ‹¿åˆ°ç»“æœ â†’ ç¦»å¼€
```

**ğŸ’» åŒæ­¥IOç¤ºä¾‹**ï¼š
```java
// åŒæ­¥è¯»å–æ–‡ä»¶
public void readFileSync() {
    System.out.println("å¼€å§‹è¯»å–æ–‡ä»¶");
    
    // è¿™é‡Œç¨‹åºä¼šåœä¸‹æ¥ç­‰å¾…ï¼Œç›´åˆ°æ–‡ä»¶è¯»å®Œ
    String content = Files.readString(Paths.get("data.txt"));
    
    System.out.println("æ–‡ä»¶å†…å®¹ï¼š" + content);
    System.out.println("ç»§ç»­å…¶ä»–å·¥ä½œ");
}
```

**â±ï¸ æ—¶é—´çº¿å±•ç¤º**ï¼š
```
æ—¶é—´çº¿: 0ms -----> 100ms -----> 200ms -----> 300ms
ä»»åŠ¡:   å¼€å§‹è¯»å–    ç­‰å¾…ä¸­...    ç­‰å¾…ä¸­...    è¯»å–å®Œæˆ,ç»§ç»­å·¥ä½œ
çŠ¶æ€:   [å·¥ä½œä¸­]    [é˜»å¡]      [é˜»å¡]      [å·¥ä½œä¸­]
```

### 1.3 å¼‚æ­¥IOï¼šéç­‰å¾…å¼æ“ä½œ


**ğŸ”¸ å¼‚æ­¥IOçš„å·¥ä½œæ–¹å¼**ï¼š
```
ç¨‹åºå‘èµ·IOè¯·æ±‚ â†’ ç«‹å³è¿”å› â†’ ç»§ç»­å…¶ä»–å·¥ä½œ â†’ æ”¶åˆ°å®Œæˆé€šçŸ¥ â†’ å¤„ç†ç»“æœ

å°±åƒç‚¹å¤–å–ï¼š
ä¸‹å• â†’ ç»§ç»­å·¥ä½œ â†’ åšå…¶ä»–äº‹æƒ… â†’ æ”¶åˆ°é€è¾¾é€šçŸ¥ â†’ å–é¤
```

**ğŸ’» å¼‚æ­¥IOç¤ºä¾‹**ï¼š
```java
// å¼‚æ­¥è¯»å–æ–‡ä»¶
public void readFileAsync() {
    System.out.println("å¼€å§‹è¯»å–æ–‡ä»¶");
    
    // å‘èµ·å¼‚æ­¥è¯»å–ï¼Œç«‹å³è¿”å›
    CompletableFuture<String> future = CompletableFuture.supplyAsync(() -> {
        try {
            return Files.readString(Paths.get("data.txt"));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    });
    
    // ç«‹å³å¯ä»¥åšå…¶ä»–å·¥ä½œ
    System.out.println("å¯ä»¥ç»§ç»­åšå…¶ä»–å·¥ä½œ");
    doOtherWork();
    
    // éœ€è¦ç»“æœæ—¶å†è·å–
    future.thenAccept(content -> {
        System.out.println("æ–‡ä»¶å†…å®¹ï¼š" + content);
    });
}
```

**â±ï¸ æ—¶é—´çº¿å±•ç¤º**ï¼š
```
æ—¶é—´çº¿: 0ms -----> 100ms -----> 200ms -----> 300ms
ä»»åŠ¡:   å¼€å§‹è¯»å–    å…¶ä»–å·¥ä½œ      å…¶ä»–å·¥ä½œ      æ”¶åˆ°ç»“æœ,å¤„ç†
çŠ¶æ€:   [å·¥ä½œä¸­]    [å·¥ä½œä¸­]     [å·¥ä½œä¸­]      [å·¥ä½œä¸­]
```

### 1.4 æ€§èƒ½å¯¹æ¯”åˆ†æ


**ğŸ“Š æ€§èƒ½å·®å¼‚å¯¹æ¯”**ï¼š

| å¯¹æ¯”ç»´åº¦ | **åŒæ­¥IO** | **å¼‚æ­¥IO** |
|---------|-----------|-----------|
| ğŸ• **å“åº”æ—¶é—´** | `é«˜å»¶è¿Ÿï¼Œéœ€ç­‰å¾…å®Œæˆ` | `ä½å»¶è¿Ÿï¼Œç«‹å³è¿”å›` |
| ğŸ”„ **ååé‡** | `ä½ï¼Œä¸²è¡Œå¤„ç†` | `é«˜ï¼Œå¹¶è¡Œå¤„ç†` |
| ğŸ§µ **çº¿ç¨‹ä½¿ç”¨** | `é˜»å¡çº¿ç¨‹` | `ä¸é˜»å¡çº¿ç¨‹` |
| ğŸ’¾ **èµ„æºæ¶ˆè€—** | `çº¿ç¨‹ç­‰å¾…æµªè´¹èµ„æº` | `èµ„æºåˆ©ç”¨ç‡é«˜` |
| ğŸ¯ **é€‚ç”¨åœºæ™¯** | `ç®€å•ä»»åŠ¡ï¼Œé¡ºåºæ‰§è¡Œ` | `é«˜å¹¶å‘ï¼ŒIOå¯†é›†å‹` |

**ğŸ¯ å®é™…åœºæ™¯å¯¹æ¯”**ï¼š
```
åœºæ™¯ï¼šç½‘ç«™åŒæ—¶å¤„ç†1000ä¸ªæ–‡ä»¶ä¸Šä¼ è¯·æ±‚

åŒæ­¥IOæ–¹å¼ï¼š
- éœ€è¦1000ä¸ªçº¿ç¨‹
- æ¯ä¸ªçº¿ç¨‹ç­‰å¾…IOå®Œæˆæ‰èƒ½å¤„ç†ä¸‹ä¸€ä¸ª
- å†…å­˜æ¶ˆè€—ï¼š1000ä¸ªçº¿ç¨‹ Ã— 1MB = 1GB
- å¤„ç†æ—¶é—´ï¼šä¸²è¡Œï¼Œå¾ˆæ…¢

å¼‚æ­¥IOæ–¹å¼ï¼š
- åªéœ€è¦å°‘é‡çº¿ç¨‹ï¼ˆå¦‚8ä¸ªï¼‰
- çº¿ç¨‹ä¸ç­‰å¾…ï¼Œå¯ä»¥å¤„ç†å¤šä¸ªè¯·æ±‚
- å†…å­˜æ¶ˆè€—ï¼š8ä¸ªçº¿ç¨‹ Ã— 1MB = 8MB
- å¤„ç†æ—¶é—´ï¼šå¹¶è¡Œï¼Œå¾ˆå¿«
```

---

## 2. ğŸ“¦ æ‰¹é‡æ“ä½œä¼˜åŒ–


### 2.1 ä»€ä¹ˆæ˜¯æ‰¹é‡æ“ä½œ


**ğŸ”¸ æ‰¹é‡æ“ä½œçš„æ¦‚å¿µ**ï¼š
> ğŸ’¡ **æ‰¹é‡æ“ä½œ**ï¼šå°†å¤šä¸ªå•ç‹¬çš„æ“ä½œåˆå¹¶æˆä¸€æ¬¡æ“ä½œæ‰§è¡Œ
> 
> å°±åƒå»è¶…å¸‚è´­ç‰©ï¼Œä¸æ˜¯ä¹°ä¸€æ ·ä¸œè¥¿è·‘ä¸€è¶Ÿï¼Œè€Œæ˜¯åˆ—å¥½æ¸…å•ä¸€æ¬¡ä¹°é½

### 2.2 ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡æ“ä½œ


**âš ï¸ å•æ¬¡æ“ä½œçš„é—®é¢˜**ï¼š
```
é—®é¢˜åœºæ™¯ï¼šä¿å­˜1000æ¡ç”¨æˆ·æ•°æ®åˆ°æ•°æ®åº“

å•æ¬¡æ“ä½œæ–¹å¼ï¼š
for (User user : users) {
    database.save(user);  // æ‰§è¡Œ1000æ¬¡æ•°æ®åº“è¿æ¥
}

æ—¶é—´æ¶ˆè€—ï¼š
- æ¯æ¬¡æ“ä½œå»ºç«‹è¿æ¥ï¼š10ms
- å®é™…æ•°æ®ä¼ è¾“ï¼š1ms  
- å…³é—­è¿æ¥ï¼š5ms
- æ€»æ—¶é—´ï¼š1000 Ã— (10+1+5) = 16ç§’
```

**âœ… æ‰¹é‡æ“ä½œçš„ä¼˜åŠ¿**ï¼š
```
æ‰¹é‡æ“ä½œæ–¹å¼ï¼š
database.batchSave(users);  // ä¸€æ¬¡æ“ä½œä¿å­˜æ‰€æœ‰æ•°æ®

æ—¶é—´æ¶ˆè€—ï¼š
- å»ºç«‹è¿æ¥ï¼š10ms
- ä¼ è¾“1000æ¡æ•°æ®ï¼š100ms
- å…³é—­è¿æ¥ï¼š5ms
- æ€»æ—¶é—´ï¼š115ms

æ€§èƒ½æå‡ï¼š16ç§’ â†’ 0.115ç§’ï¼Œæå‡çº¦140å€ï¼
```

### 2.3 æ–‡ä»¶IOæ‰¹é‡ä¼˜åŒ–


**ğŸ”¸ è¯»å–æ–‡ä»¶ä¼˜åŒ–**ï¼š
```java
// âŒ ä½æ•ˆï¼šé€è¡Œè¯»å–
public List<String> readFileSlow(String filename) {
    List<String> lines = new ArrayList<>();
    try (BufferedReader reader = Files.newBufferedReader(Paths.get(filename))) {
        String line;
        while ((line = reader.readLine()) != null) {
            processLine(line);  // æ¯è¡Œéƒ½è¦å¤„ç†ä¸€æ¬¡
            lines.add(line);
        }
    }
    return lines;
}

// âœ… é«˜æ•ˆï¼šæ‰¹é‡è¯»å–
public List<String> readFileFast(String filename) {
    try {
        // ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰è¡Œ
        List<String> lines = Files.readAllLines(Paths.get(filename));
        
        // æ‰¹é‡å¤„ç†
        return lines.stream()
                   .map(this::processLine)
                   .collect(Collectors.toList());
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
}
```

### 2.4 æ•°æ®åº“æ‰¹é‡ä¼˜åŒ–


**ğŸ”¸ æ‰¹é‡æ’å…¥ç¤ºä¾‹**ï¼š
```java
// âŒ ä½æ•ˆï¼šå•æ¡æ’å…¥
public void insertUsersSlow(List<User> users) {
    for (User user : users) {
        String sql = "INSERT INTO users (name, email) VALUES (?, ?)";
        jdbcTemplate.update(sql, user.getName(), user.getEmail());
        // æ¯æ¬¡éƒ½è¦ï¼šè§£æSQL â†’ æ‰§è¡Œ â†’ æäº¤
    }
}

// âœ… é«˜æ•ˆï¼šæ‰¹é‡æ’å…¥
public void insertUsersFast(List<User> users) {
    String sql = "INSERT INTO users (name, email) VALUES (?, ?)";
    
    List<Object[]> batchArgs = users.stream()
        .map(user -> new Object[]{user.getName(), user.getEmail()})
        .collect(Collectors.toList());
    
    // ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰æ’å…¥
    jdbcTemplate.batchUpdate(sql, batchArgs);
}
```

### 2.5 ç½‘ç»œè¯·æ±‚æ‰¹é‡ä¼˜åŒ–


**ğŸ”¸ APIè°ƒç”¨ä¼˜åŒ–**ï¼š
```java
// âŒ ä½æ•ˆï¼šå•ä¸ªè¯·æ±‚
public List<UserInfo> getUserInfoSlow(List<String> userIds) {
    List<UserInfo> results = new ArrayList<>();
    for (String userId : userIds) {
        // æ¯æ¬¡éƒ½è¦å»ºç«‹HTTPè¿æ¥
        UserInfo info = httpClient.get("/api/user/" + userId);
        results.add(info);
    }
    return results;
}

// âœ… é«˜æ•ˆï¼šæ‰¹é‡è¯·æ±‚
public List<UserInfo> getUserInfoFast(List<String> userIds) {
    // ä¸€æ¬¡è¯·æ±‚è·å–æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
    String idsParam = String.join(",", userIds);
    return httpClient.post("/api/users/batch", idsParam);
}
```

**ğŸ“Š æ‰¹é‡æ“ä½œæ€§èƒ½å¯¹æ¯”**ï¼š

| æ“ä½œç±»å‹ | **å•æ¬¡æ“ä½œ** | **æ‰¹é‡æ“ä½œ** | **æ€§èƒ½æå‡** |
|---------|-------------|-------------|-------------|
| ğŸ—„ï¸ **æ•°æ®åº“æ’å…¥** | `1000æ¬¡ Ã— 16ms = 16s` | `1æ¬¡ Ã— 200ms = 0.2s` | `80å€` |
| ğŸ“ **æ–‡ä»¶è¯»å–** | `1000æ¬¡ Ã— 5ms = 5s` | `1æ¬¡ Ã— 50ms = 0.05s` | `100å€` |
| ğŸŒ **ç½‘ç»œè¯·æ±‚** | `100æ¬¡ Ã— 100ms = 10s` | `1æ¬¡ Ã— 300ms = 0.3s` | `33å€` |

---

## 3. ğŸ’¾ ç¼“å†²åŒºç®¡ç†


### 3.1 ä»€ä¹ˆæ˜¯ç¼“å†²åŒº


**ğŸ”¸ ç¼“å†²åŒºçš„æ¦‚å¿µ**ï¼š
> ğŸ’¡ **ç¼“å†²åŒºï¼ˆBufferï¼‰**ï¼šå†…å­˜ä¸­çš„ä¸´æ—¶å­˜å‚¨åŒºåŸŸï¼Œç”¨äºæš‚å­˜æ•°æ®
> 
> å°±åƒæ°´åº“ï¼Œå¯ä»¥æ”¶é›†æ°´æµï¼Œè¾¾åˆ°ä¸€å®šé‡å†ç»Ÿä¸€é‡Šæ”¾

**ç¼“å†²åŒºçš„ä½œç”¨**ï¼š
```
æ²¡æœ‰ç¼“å†²åŒºï¼š
ç¨‹åº â†’ ç›´æ¥å†™ç£ç›˜ â†’ æ¯æ¬¡éƒ½è¦ç­‰å¾…ç£ç›˜å“åº”
        â†“
    é¢‘ç¹çš„ç£ç›˜è®¿é—®ï¼Œæ€§èƒ½å¾ˆæ…¢

æœ‰ç¼“å†²åŒºï¼š
ç¨‹åº â†’ å†™å…¥ç¼“å†²åŒº â†’ ç¼“å†²åŒºæ»¡äº† â†’ ä¸€æ¬¡æ€§å†™å…¥ç£ç›˜
        â†“           â†“             â†“
    å†…å­˜æ“ä½œ      å†…å­˜æ“ä½œ        å°‘é‡ç£ç›˜æ“ä½œ
    ï¼ˆå¾ˆå¿«ï¼‰      ï¼ˆå¾ˆå¿«ï¼‰        ï¼ˆç›¸å¯¹æ…¢ï¼Œä½†æ¬¡æ•°å°‘ï¼‰
```

### 3.2 è¯»å–ç¼“å†²åŒºä¼˜åŒ–


**ğŸ”¸ æ–‡ä»¶è¯»å–ç¼“å†²åŒº**ï¼š
```java
// âŒ æ— ç¼“å†²ï¼šæ¯æ¬¡è¯»å–1ä¸ªå­—èŠ‚
public void readFileNobuffer(String filename) {
    try (FileInputStream fis = new FileInputStream(filename)) {
        int data;
        while ((data = fis.read()) != -1) {  // æ¯æ¬¡è¯»1å­—èŠ‚ï¼Œç£ç›˜è®¿é—®é¢‘ç¹
            process((byte) data);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

// âœ… æœ‰ç¼“å†²ï¼šä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚
public void readFileWithBuffer(String filename) {
    try (BufferedInputStream bis = new BufferedInputStream(
            new FileInputStream(filename), 8192)) {  // 8KBç¼“å†²åŒº
        
        int data;
        while ((data = bis.read()) != -1) {  // ä»ç¼“å†²åŒºè¯»å–ï¼Œå‡å°‘ç£ç›˜è®¿é—®
            process((byte) data);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

**ğŸ“Š æ€§èƒ½å¯¹æ¯”**ï¼š
```
è¯»å–1MBæ–‡ä»¶çš„æ€§èƒ½å¯¹æ¯”ï¼š

æ— ç¼“å†²æ–¹å¼ï¼š
- ç£ç›˜è®¿é—®æ¬¡æ•°ï¼š1,048,576æ¬¡ï¼ˆæ¯å­—èŠ‚ä¸€æ¬¡ï¼‰
- å¹³å‡æ¯æ¬¡è®¿é—®æ—¶é—´ï¼š0.01ms
- æ€»æ—¶é—´ï¼š10.48ç§’

8KBç¼“å†²åŒºï¼š
- ç£ç›˜è®¿é—®æ¬¡æ•°ï¼š128æ¬¡ï¼ˆ1MB Ã· 8KBï¼‰
- å¹³å‡æ¯æ¬¡è®¿é—®æ—¶é—´ï¼š0.5ms
- æ€»æ—¶é—´ï¼š0.064ç§’

æ€§èƒ½æå‡ï¼š163å€ï¼
```

### 3.3 å†™å…¥ç¼“å†²åŒºä¼˜åŒ–


**ğŸ”¸ æ–‡ä»¶å†™å…¥ç¼“å†²åŒº**ï¼š
```java
// âŒ æ— ç¼“å†²å†™å…¥
public void writeFileNobuffer(String filename, List<String> lines) {
    try (FileWriter writer = new FileWriter(filename)) {
        for (String line : lines) {
            writer.write(line + "\n");  // æ¯è¡Œéƒ½ç«‹å³å†™å…¥ç£ç›˜
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

// âœ… ç¼“å†²å†™å…¥
public void writeFileWithBuffer(String filename, List<String> lines) {
    try (BufferedWriter writer = new BufferedWriter(
            new FileWriter(filename), 16384)) {  // 16KBç¼“å†²åŒº
        
        for (String line : lines) {
            writer.write(line + "\n");  // å†™å…¥ç¼“å†²åŒºï¼Œæ»¡äº†æ‰å†™ç£ç›˜
        }
        // ç¼“å†²åŒºåœ¨closeæ—¶è‡ªåŠ¨flush
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

### 3.4 ç¼“å†²åŒºå¤§å°ä¼˜åŒ–


**ğŸ”¸ é€‰æ‹©åˆé€‚çš„ç¼“å†²åŒºå¤§å°**ï¼š
```java
public class BufferSizeTest {
    public void testDifferentBufferSizes(String filename) {
        int[] bufferSizes = {1024, 4096, 8192, 16384, 32768, 65536};
        
        for (int bufferSize : bufferSizes) {
            long startTime = System.currentTimeMillis();
            
            try (BufferedInputStream bis = new BufferedInputStream(
                    new FileInputStream(filename), bufferSize)) {
                
                byte[] buffer = new byte[1024];
                while (bis.read(buffer) != -1) {
                    // å¤„ç†æ•°æ®
                }
                
            } catch (IOException e) {
                e.printStackTrace();
            }
            
            long endTime = System.currentTimeMillis();
            System.out.println("ç¼“å†²åŒºå¤§å° " + bufferSize + " è€—æ—¶: " + (endTime - startTime) + "ms");
        }
    }
}
```

**ğŸ“ˆ ç¼“å†²åŒºå¤§å°æ€§èƒ½æ›²çº¿**ï¼š
```
æ€§èƒ½è¡¨ç°ï¼ˆè¯»å–100MBæ–‡ä»¶ï¼‰ï¼š

ç¼“å†²åŒºå¤§å°    è€—æ—¶      æ€§èƒ½
1KB         5000ms    åŸºå‡†
4KB         2000ms    2.5å€æå‡
8KB         1200ms    4.2å€æå‡  â† æ€§ä»·æ¯”æœ€ä½³
16KB        1000ms    5å€æå‡
32KB        950ms     5.3å€æå‡
64KB        940ms     5.3å€æå‡  â† è¾¹é™…æ•ˆç›Šé€’å‡

ç»“è®ºï¼š8KB-16KBé€šå¸¸æ˜¯æœ€ä½³é€‰æ‹©
```

### 3.5 ç¼“å†²åŒºç®¡ç†æœ€ä½³å®è·µ


**ğŸ¯ ç¼“å†²åŒºä½¿ç”¨åŸåˆ™**ï¼š

> âœ… **DO - æ¨èåšæ³•**ï¼š
> - å¯¹é¢‘ç¹çš„å°IOæ“ä½œä½¿ç”¨ç¼“å†²åŒº
> - æ ¹æ®æ•°æ®ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„ç¼“å†²åŒºå¤§å°
> - åŠæ—¶flushç¡®ä¿æ•°æ®ä¸ä¸¢å¤±
> - ä½¿ç”¨try-with-resourcesè‡ªåŠ¨å…³é—­

> âŒ **DON'T - é¿å…åšæ³•**ï¼š
> - å¯¹å¤§å—æ•°æ®ä½¿ç”¨è¿‡å°ç¼“å†²åŒº
> - å¿˜è®°flushå¯¼è‡´æ•°æ®ä¸¢å¤±
> - ç¼“å†²åŒºè¿‡å¤§æµªè´¹å†…å­˜
> - æ‰‹åŠ¨ç®¡ç†ç¼“å†²åŒºç”Ÿå‘½å‘¨æœŸ

---

## 4. ğŸš€ é›¶æ‹·è´æŠ€æœ¯


### 4.1 ä»€ä¹ˆæ˜¯é›¶æ‹·è´


**ğŸ”¸ ä¼ ç»Ÿæ‹·è´çš„é—®é¢˜**ï¼š
```
ä¼ ç»Ÿæ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ï¼š

1. ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒºï¼ˆç¬¬1æ¬¡æ‹·è´ï¼‰
2. å†…æ ¸ç¼“å†²åŒº â†’ ç”¨æˆ·ç©ºé—´ï¼ˆç¬¬2æ¬¡æ‹·è´ï¼‰  
3. ç”¨æˆ·ç©ºé—´ â†’ å†…æ ¸Socketç¼“å†²åŒºï¼ˆç¬¬3æ¬¡æ‹·è´ï¼‰
4. å†…æ ¸Socketç¼“å†²åŒº â†’ ç½‘å¡ï¼ˆç¬¬4æ¬¡æ‹·è´ï¼‰

æ€»å…±4æ¬¡æ•°æ®æ‹·è´ï¼
```

**ğŸ”¸ é›¶æ‹·è´çš„ä¼˜åŒ–**ï¼š
> ğŸ’¡ **é›¶æ‹·è´ï¼ˆZero Copyï¼‰**ï¼šå‡å°‘æˆ–æ¶ˆé™¤æ•°æ®åœ¨å†…å­˜ä¸­çš„æ‹·è´æ¬¡æ•°
> 
> å°±åƒä¼ é€’æ–‡ä»¶ï¼Œä¸ç”¨æ¯ä¸ªäººéƒ½å¤å°ä¸€ä»½ï¼Œç›´æ¥ä¼ é€’åŸä»¶

```
é›¶æ‹·è´æ–‡ä»¶ä¼ è¾“ï¼š

1. ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒº
2. å†…æ ¸ç›´æ¥å°†æ•°æ®æè¿°ç¬¦ä¼ ç»™ç½‘å¡
3. ç½‘å¡ç›´æ¥ä»å†…æ ¸ç¼“å†²åŒºè¯»å–æ•°æ®

åªéœ€è¦1æ¬¡æ‹·è´ï¼
```

### 4.2 Javaä¸­çš„é›¶æ‹·è´å®ç°


**ğŸ”¸ ä¼ ç»Ÿæ–¹å¼ vs é›¶æ‹·è´æ–¹å¼**ï¼š
```java
// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šå¤šæ¬¡æ‹·è´
public void traditionalCopy(String source, String target) {
    try (FileInputStream fis = new FileInputStream(source);
         FileOutputStream fos = new FileOutputStream(target)) {
        
        byte[] buffer = new byte[8192];
        int bytesRead;
        while ((bytesRead = fis.read(buffer)) != -1) {
            fos.write(buffer, 0, bytesRead);  // æ•°æ®ç»è¿‡ç”¨æˆ·ç©ºé—´
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

// âœ… é›¶æ‹·è´æ–¹å¼ï¼šNIO transferTo
public void zeroCopy(String source, String target) {
    try (FileInputStream fis = new FileInputStream(source);
         FileOutputStream fos = new FileOutputStream(target);
         FileChannel sourceChannel = fis.getChannel();
         FileChannel targetChannel = fos.getChannel()) {
        
        // ç›´æ¥åœ¨å†…æ ¸ç©ºé—´ä¼ è¾“ï¼Œä¸ç»è¿‡ç”¨æˆ·ç©ºé—´
        sourceChannel.transferTo(0, sourceChannel.size(), targetChannel);
        
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

### 4.3 ç½‘ç»œä¼ è¾“é›¶æ‹·è´


**ğŸ”¸ æ–‡ä»¶æœåŠ¡å™¨ä¼˜åŒ–**ï¼š
```java
// âŒ ä¼ ç»Ÿæ–‡ä»¶æœåŠ¡å™¨
public void traditionalFileServer(SocketChannel client, String filename) {
    try (FileInputStream fis = new FileInputStream(filename)) {
        byte[] buffer = new byte[8192];
        int bytesRead;
        
        while ((bytesRead = fis.read(buffer)) != -1) {
            // æ•°æ®ï¼šç£ç›˜ â†’ å†…æ ¸ â†’ ç”¨æˆ·ç©ºé—´ â†’ å†…æ ¸ â†’ ç½‘å¡
            ByteBuffer bb = ByteBuffer.wrap(buffer, 0, bytesRead);
            client.write(bb);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

// âœ… é›¶æ‹·è´æ–‡ä»¶æœåŠ¡å™¨
public void zeroCopyFileServer(SocketChannel client, String filename) {
    try (FileInputStream fis = new FileInputStream(filename);
         FileChannel fileChannel = fis.getChannel()) {
        
        // ç›´æ¥ä»æ–‡ä»¶ä¼ è¾“åˆ°Socketï¼Œä¸ç»è¿‡ç”¨æˆ·ç©ºé—´
        fileChannel.transferTo(0, fileChannel.size(), client);
        
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

### 4.4 å†…å­˜æ˜ å°„é›¶æ‹·è´


**ğŸ”¸ Memory-Mapped Files**ï¼š
```java
public class MemoryMappedFile {
    
    // âœ… å†…å­˜æ˜ å°„è¯»å–å¤§æ–‡ä»¶
    public void readLargeFile(String filename) {
        try (RandomAccessFile file = new RandomAccessFile(filename, "r");
             FileChannel channel = file.getChannel()) {
            
            long fileSize = channel.size();
            
            // å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼Œé›¶æ‹·è´è®¿é—®
            MappedByteBuffer buffer = channel.map(
                FileChannel.MapMode.READ_ONLY, 0, fileSize);
            
            // ç›´æ¥è®¿é—®æ˜ å°„çš„å†…å­˜ï¼Œæ— éœ€æ‹·è´
            while (buffer.hasRemaining()) {
                byte data = buffer.get();
                process(data);
            }
            
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### 4.5 é›¶æ‹·è´æ€§èƒ½å¯¹æ¯”


**ğŸ“Š æ€§èƒ½æµ‹è¯•ç»“æœ**ï¼š
```
æµ‹è¯•åœºæ™¯ï¼šä¼ è¾“1GBæ–‡ä»¶

ä¼ ç»Ÿæ‹·è´æ–¹å¼ï¼š
- CPUä½¿ç”¨ç‡ï¼š80%
- å†…å­˜æ‹·è´æ¬¡æ•°ï¼š4æ¬¡
- ä¼ è¾“æ—¶é—´ï¼š15ç§’
- å†…å­˜å ç”¨ï¼šé«˜

é›¶æ‹·è´æ–¹å¼ï¼š
- CPUä½¿ç”¨ç‡ï¼š20%
- å†…å­˜æ‹·è´æ¬¡æ•°ï¼š1æ¬¡
- ä¼ è¾“æ—¶é—´ï¼š5ç§’
- å†…å­˜å ç”¨ï¼šä½

æ€§èƒ½æå‡ï¼š3å€é€Ÿåº¦æå‡ï¼Œ75%çš„CPUèŠ‚çœï¼
```

**ğŸ¯ é›¶æ‹·è´é€‚ç”¨åœºæ™¯**ï¼š

| åœºæ™¯ | **é€‚ç”¨æ€§** | **è¯´æ˜** |
|------|-----------|---------|
| ğŸŒ **æ–‡ä»¶ä¸‹è½½æœåŠ¡** | `â­â­â­â­â­` | `å¤§æ–‡ä»¶ä¼ è¾“ï¼Œæ•ˆæœæ˜¾è‘—` |
| ğŸ“ **æ–‡ä»¶å¤‡ä»½** | `â­â­â­â­â­` | `å‡å°‘IOå¼€é”€` |
| ğŸ¬ **æµåª’ä½“æœåŠ¡** | `â­â­â­â­` | `å®æ—¶ä¼ è¾“è¦æ±‚é«˜` |
| ğŸ“Š **æ•°æ®åº“å¤åˆ¶** | `â­â­â­â­` | `å¤§é‡æ•°æ®åŒæ­¥` |
| ğŸ“ **æ—¥å¿—æ”¶é›†** | `â­â­â­` | `æ‰¹é‡æ—¥å¿—ä¼ è¾“` |

---

## 5. ğŸŒ ç½‘ç»œIOæ¨¡å‹


### 5.1 é˜»å¡IOæ¨¡å‹ï¼ˆBIOï¼‰


**ğŸ”¸ é˜»å¡IOçš„å·¥ä½œæ–¹å¼**ï¼š
> ğŸ’¡ **é˜»å¡IO**ï¼šçº¿ç¨‹å‘èµ·IOè¯·æ±‚åï¼Œä¸€ç›´ç­‰å¾…ç›´åˆ°æ“ä½œå®Œæˆ
> 
> å°±åƒæ‰“ç”µè¯ï¼Œå¿…é¡»ç­‰å¯¹æ–¹æ¥å¬æ‰èƒ½ç»§ç»­

```
é˜»å¡IOæµç¨‹ï¼š
çº¿ç¨‹å‘èµ·read() â†’ ç­‰å¾…æ•°æ®åˆ°è¾¾ â†’ æ‹·è´æ•°æ®åˆ°ç”¨æˆ·ç©ºé—´ â†’ è¿”å›ç»“æœ
       â†“              â†“                â†“            â†“
    ç«‹å³é˜»å¡         ç»§ç»­é˜»å¡         ç»§ç»­é˜»å¡      è§£é™¤é˜»å¡
```

**ğŸ’» BIOæœåŠ¡å™¨ç¤ºä¾‹**ï¼š
```java
public class BIOServer {
    public void start(int port) {
        try (ServerSocket server = new ServerSocket(port)) {
            System.out.println("æœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ï¼š" + port);
            
            while (true) {
                // é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥
                Socket client = server.accept();
                
                // ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹
                new Thread(() -> handleClient(client)).start();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    
    private void handleClient(Socket client) {
        try (BufferedReader reader = new BufferedReader(
                new InputStreamReader(client.getInputStream()))) {
            
            String message;
            // é˜»å¡è¯»å–å®¢æˆ·ç«¯æ¶ˆæ¯
            while ((message = reader.readLine()) != null) {
                System.out.println("æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
                // å¤„ç†æ¶ˆæ¯...
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**âš ï¸ BIOçš„é—®é¢˜**ï¼š
- æ¯ä¸ªè¿æ¥éœ€è¦ä¸€ä¸ªçº¿ç¨‹
- çº¿ç¨‹å¤§éƒ¨åˆ†æ—¶é—´åœ¨ç­‰å¾…IO
- å¤§é‡å¹¶å‘æ—¶çº¿ç¨‹æ•°çˆ†ç‚¸
- å†…å­˜æ¶ˆè€—å·¨å¤§

### 5.2 éé˜»å¡IOæ¨¡å‹ï¼ˆNIOï¼‰


**ğŸ”¸ éé˜»å¡IOçš„å·¥ä½œæ–¹å¼**ï¼š
> ğŸ’¡ **éé˜»å¡IO**ï¼šçº¿ç¨‹å‘èµ·IOè¯·æ±‚åç«‹å³è¿”å›ï¼Œä¸ç­‰å¾…æ“ä½œå®Œæˆ
> 
> å°±åƒå‘çŸ­ä¿¡ï¼Œå‘å‡ºå»å°±ç»§ç»­åšå…¶ä»–äº‹ï¼Œä¸ç”¨ç­‰å¯¹æ–¹å›å¤

```
éé˜»å¡IOæµç¨‹ï¼š
çº¿ç¨‹å‘èµ·read() â†’ ç«‹å³è¿”å›ï¼ˆå¯èƒ½æ— æ•°æ®ï¼‰â†’ ç»§ç»­å…¶ä»–å·¥ä½œ â†’ å†æ¬¡å°è¯•read()
       â†“                    â†“                 â†“              â†“
    ä¸é˜»å¡               ä¸é˜»å¡             ä¸é˜»å¡         ä¸é˜»å¡
```

**ğŸ’» NIOæœåŠ¡å™¨ç¤ºä¾‹**ï¼š
```java
public class NIOServer {
    public void start(int port) {
        try {
            // åˆ›å»ºé€‰æ‹©å™¨
            Selector selector = Selector.open();
            
            // åˆ›å»ºæœåŠ¡ç«¯Channel
            ServerSocketChannel server = ServerSocketChannel.open();
            server.configureBlocking(false);  // è®¾ç½®ä¸ºéé˜»å¡
            server.bind(new InetSocketAddress(port));
            
            // æ³¨å†Œåˆ°é€‰æ‹©å™¨
            server.register(selector, SelectionKey.OP_ACCEPT);
            
            System.out.println("NIOæœåŠ¡å™¨å¯åŠ¨ï¼Œç«¯å£ï¼š" + port);
            
            while (true) {
                // éé˜»å¡æŸ¥è¯¢å°±ç»ªçš„Channel
                int readyChannels = selector.select(1000);
                
                if (readyChannels > 0) {
                    processSelectedKeys(selector);
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    
    private void processSelectedKeys(Selector selector) {
        Iterator<SelectionKey> iterator = selector.selectedKeys().iterator();
        
        while (iterator.hasNext()) {
            SelectionKey key = iterator.next();
            iterator.remove();
            
            if (key.isAcceptable()) {
                handleAccept(key);
            } else if (key.isReadable()) {
                handleRead(key);
            }
        }
    }
}
```

### 5.3 å¼‚æ­¥IOæ¨¡å‹ï¼ˆAIOï¼‰


**ğŸ”¸ å¼‚æ­¥IOçš„å·¥ä½œæ–¹å¼**ï¼š
> ğŸ’¡ **å¼‚æ­¥IO**ï¼šçº¿ç¨‹å‘èµ·IOè¯·æ±‚åç«‹å³è¿”å›ï¼Œæ“ä½œå®Œæˆæ—¶é€šè¿‡å›è°ƒé€šçŸ¥
> 
> å°±åƒç½‘è´­ï¼Œä¸‹å•åç»§ç»­ç”Ÿæ´»ï¼Œå¿«é€’åˆ°äº†ä¼šä¸»åŠ¨é€šçŸ¥ä½ 

**ğŸ’» AIOæœåŠ¡å™¨ç¤ºä¾‹**ï¼š
```java
public class AIOServer {
    public void start(int port) {
        try {
            AsynchronousServerSocketChannel server = 
                AsynchronousServerSocketChannel.open();
            server.bind(new InetSocketAddress(port));
            
            System.out.println("AIOæœåŠ¡å™¨å¯åŠ¨ï¼Œç«¯å£ï¼š" + port);
            
            // å¼‚æ­¥æ¥å—è¿æ¥
            server.accept(null, new CompletionHandler<AsynchronousSocketChannel, Void>() {
                @Override
                public void completed(AsynchronousSocketChannel client, Void attachment) {
                    // ç»§ç»­æ¥å—æ–°è¿æ¥
                    server.accept(null, this);
                    
                    // å¤„ç†å½“å‰è¿æ¥
                    handleClient(client);
                }
                
                @Override
                public void failed(Throwable exc, Void attachment) {
                    exc.printStackTrace();
                }
            });
            
            // ä¸»çº¿ç¨‹ä¸é˜»å¡ï¼Œå¯ä»¥åšå…¶ä»–å·¥ä½œ
            Thread.sleep(Integer.MAX_VALUE);
            
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    
    private void handleClient(AsynchronousSocketChannel client) {
        ByteBuffer buffer = ByteBuffer.allocate(1024);
        
        // å¼‚æ­¥è¯»å–æ•°æ®
        client.read(buffer, null, new CompletionHandler<Integer, Void>() {
            @Override
            public void completed(Integer bytesRead, Void attachment) {
                if (bytesRead > 0) {
                    buffer.flip();
                    String message = new String(buffer.array(), 0, bytesRead);
                    System.out.println("æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
                    
                    // ç»§ç»­è¯»å–
                    buffer.clear();
                    client.read(buffer, null, this);
                }
            }
            
            @Override
            public void failed(Throwable exc, Void attachment) {
                exc.printStackTrace();
            }
        });
    }
}
```

### 5.4 IOæ¨¡å‹æ€§èƒ½å¯¹æ¯”


**ğŸ“Š ä¸‰ç§IOæ¨¡å‹å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | **BIO** | **NIO** | **AIO** |
|------|---------|---------|---------|
| ğŸ§µ **çº¿ç¨‹æ¨¡å‹** | `ä¸€è¿æ¥ä¸€çº¿ç¨‹` | `ä¸€çº¿ç¨‹å¤„ç†å¤šè¿æ¥` | `å®Œå…¨å¼‚æ­¥` |
| ğŸ”„ **é˜»å¡æ€§** | `å®Œå…¨é˜»å¡` | `éé˜»å¡` | `éé˜»å¡` |
| ğŸ“Š **å¹¶å‘èƒ½åŠ›** | `ä½ï¼ˆå—çº¿ç¨‹æ•°é™åˆ¶ï¼‰` | `é«˜` | `å¾ˆé«˜` |
| ğŸ’¾ **å†…å­˜ä½¿ç”¨** | `é«˜ï¼ˆå¤§é‡çº¿ç¨‹ï¼‰` | `ä¸­ç­‰` | `ä½` |
| ğŸ¯ **é€‚ç”¨åœºæ™¯** | `è¿æ¥æ•°å°‘ï¼Œè¿æ¥æŒä¹…` | `è¿æ¥æ•°å¤šï¼Œè¿æ¥çŸ­` | `é«˜æ€§èƒ½æœåŠ¡å™¨` |
| ğŸ”§ **ç¼–ç¨‹å¤æ‚åº¦** | `ç®€å•` | `ä¸­ç­‰` | `å¤æ‚` |

**ğŸš€ æ€§èƒ½æµ‹è¯•å¯¹æ¯”**ï¼š
```
æµ‹è¯•åœºæ™¯ï¼š10000ä¸ªå¹¶å‘è¿æ¥ï¼Œæ¯ç§’1000ä¸ªè¯·æ±‚

BIOè¡¨ç°ï¼š
- çº¿ç¨‹æ•°ï¼š10000ä¸ª
- å†…å­˜ä½¿ç”¨ï¼š~10GBï¼ˆæ¯çº¿ç¨‹1MBï¼‰
- CPUä½¿ç”¨ç‡ï¼š95%ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹ï¼‰
- å“åº”æ—¶é—´ï¼š200ms

NIOè¡¨ç°ï¼š
- çº¿ç¨‹æ•°ï¼š8ä¸ª
- å†…å­˜ä½¿ç”¨ï¼š~100MB  
- CPUä½¿ç”¨ç‡ï¼š60%
- å“åº”æ—¶é—´ï¼š50ms

AIOè¡¨ç°ï¼š
- çº¿ç¨‹æ•°ï¼š4ä¸ª
- å†…å­˜ä½¿ç”¨ï¼š~50MB
- CPUä½¿ç”¨ç‡ï¼š30%
- å“åº”æ—¶é—´ï¼š20ms
```

### 5.5 é€‰æ‹©åˆé€‚çš„IOæ¨¡å‹


**ğŸ¯ IOæ¨¡å‹é€‰æ‹©æŒ‡å—**ï¼š

```
é€‰æ‹©BIOçš„æƒ…å†µï¼š
âœ… è¿æ¥æ•°å°‘äº1000
âœ… è¿æ¥æŒç»­æ—¶é—´é•¿
âœ… æ¯ä¸ªè¿æ¥æ•°æ®ä¼ è¾“é‡å¤§
âœ… å¼€å‘æ—¶é—´ç´§ï¼Œè¦æ±‚ç®€å•

é€‰æ‹©NIOçš„æƒ…å†µï¼š
âœ… è¿æ¥æ•°åœ¨1000-10000
âœ… è¿æ¥æ—¶é—´ä¸å›ºå®š  
âœ… éœ€è¦æ›´å¥½çš„èµ„æºåˆ©ç”¨ç‡
âœ… å¯ä»¥æ¥å—ä¸€å®šçš„ç¼–ç¨‹å¤æ‚åº¦

é€‰æ‹©AIOçš„æƒ…å†µï¼š
âœ… è¿æ¥æ•°è¶…è¿‡10000
âœ… å¯¹æ€§èƒ½è¦æ±‚æé«˜
âœ… æœåŠ¡å™¨èµ„æºå®è´µ
âœ… å›¢é˜Ÿæœ‰ç»éªŒå¤„ç†å¼‚æ­¥ç¼–ç¨‹
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ IOä¼˜åŒ–çš„æœ¬è´¨ï¼šå‡å°‘ç­‰å¾…æ—¶é—´ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡
ğŸ”¸ åŒæ­¥vså¼‚æ­¥ï¼šåŒæ­¥ç­‰å¾…ç»“æœï¼Œå¼‚æ­¥ç«‹å³è¿”å›
ğŸ”¸ æ‰¹é‡æ“ä½œï¼šåˆå¹¶å¤šä¸ªæ“ä½œï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨å¼€é”€
ğŸ”¸ ç¼“å†²åŒºï¼šå†…å­˜ä¸´æ—¶å­˜å‚¨ï¼Œå‡å°‘é¢‘ç¹çš„IOæ“ä½œ
ğŸ”¸ é›¶æ‹·è´ï¼šå‡å°‘æ•°æ®åœ¨å†…å­˜ä¸­çš„æ‹·è´æ¬¡æ•°
ğŸ”¸ IOæ¨¡å‹ï¼šBIOç®€å•ä½†æ€§èƒ½å·®ï¼ŒNIOå¹³è¡¡ï¼ŒAIOæ€§èƒ½æœ€ä½³
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ IOæ€§èƒ½ä¼˜åŒ–çš„å±‚æ¬¡**ï¼š
```
åº”ç”¨å±‚ä¼˜åŒ–ï¼š
- ä½¿ç”¨å¼‚æ­¥IOé¿å…é˜»å¡
- æ‰¹é‡æ“ä½œå‡å°‘è°ƒç”¨æ¬¡æ•°
- é€‰æ‹©åˆé€‚çš„ç¼“å†²åŒºå¤§å°

ç³»ç»Ÿå±‚ä¼˜åŒ–ï¼š
- ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯
- é€‰æ‹©é«˜æ•ˆçš„IOæ¨¡å‹
- åˆç†é…ç½®ç³»ç»Ÿå‚æ•°

ç¡¬ä»¶å±‚ä¼˜åŒ–ï¼š
- ä½¿ç”¨SSDæ›¿ä»£æœºæ¢°ç¡¬ç›˜
- å¢åŠ å†…å­˜å‡å°‘ç£ç›˜IO
- ä½¿ç”¨é«˜é€Ÿç½‘ç»œè®¾å¤‡
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–çš„æƒè¡¡**ï¼š
```
æ€§èƒ½ vs å¤æ‚åº¦ï¼š
- ç®€å•çš„BIOæ˜“äºå¼€å‘å’Œç»´æŠ¤
- å¤æ‚çš„AIOæ€§èƒ½ä¼˜å¼‚ä½†éš¾ä»¥è°ƒè¯•

å†…å­˜ vs é€Ÿåº¦ï¼š
- å¤§ç¼“å†²åŒºé€Ÿåº¦å¿«ä½†å ç”¨å†…å­˜å¤š
- å°ç¼“å†²åŒºèŠ‚çœå†…å­˜ä½†é€Ÿåº¦æ…¢

é€šç”¨æ€§ vs ç‰¹åŒ–ï¼š
- é€šç”¨æ–¹æ¡ˆé€‚åº”æ€§å¼ºä½†æ€§èƒ½ä¸€èˆ¬
- ç‰¹åŒ–æ–¹æ¡ˆæ€§èƒ½å“è¶Šä½†é€‚ç”¨é¢çª„
```

### 6.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ**ï¼š

> âœ… **é«˜æ•ˆåšæ³•**ï¼š
> - ä¼˜å…ˆè€ƒè™‘å¼‚æ­¥IOï¼Œé¿å…çº¿ç¨‹é˜»å¡
> - å¯¹é¢‘ç¹çš„å°æ“ä½œä½¿ç”¨æ‰¹é‡å¤„ç†
> - åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼ˆ8KB-16KBï¼‰
> - å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯
> - æ ¹æ®å¹¶å‘é‡é€‰æ‹©åˆé€‚çš„IOæ¨¡å‹

> âŒ **é¿å…åšæ³•**ï¼š
> - åœ¨é«˜å¹¶å‘åœºæ™¯ä½¿ç”¨BIO
> - å¯¹å¤§é‡æ•°æ®è¿›è¡Œé€æ¡å¤„ç†
> - ä½¿ç”¨è¿‡å°æˆ–è¿‡å¤§çš„ç¼“å†²åŒº
> - å¿½ç•¥å†…å­˜æ‹·è´çš„æ€§èƒ½å¼€é”€
> - ç›²ç›®è¿½æ±‚å¤æ‚çš„IOæ¨¡å‹

**ğŸ¯ å¸¸è§åº”ç”¨åœºæ™¯**ï¼š
- **WebæœåŠ¡å™¨**ï¼šä½¿ç”¨NIO+å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒé«˜å¹¶å‘
- **æ–‡ä»¶ä¼ è¾“**ï¼šä½¿ç”¨é›¶æ‹·è´+æ‰¹é‡æ“ä½œï¼Œæé«˜ä¼ è¾“æ•ˆç‡
- **æ•°æ®åº“æ“ä½œ**ï¼šä½¿ç”¨æ‰¹é‡æ’å…¥+ç¼“å†²å†™å…¥ï¼Œå‡å°‘IOå¼€é”€
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šä½¿ç”¨å¼‚æ­¥å†™å…¥+ç¼“å†²åŒºï¼Œé¿å…é˜»å¡ä¸»ä¸šåŠ¡
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šä½¿ç”¨å¼‚æ­¥IO+å†…å­˜æ˜ å°„ï¼Œæé«˜ååé‡

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- å¼‚æ­¥æ‰¹é‡ç¼“å†²åŒºï¼Œé›¶æ‹·è´æ¨¡å‹è¦é€‰å¯¹
- IOä¼˜åŒ–çœ‹åœºæ™¯ï¼Œæ€§èƒ½å¤æ‚è¦å¹³è¡¡
- å°æ“ä½œè¦åˆå¹¶ï¼Œå¤§æ–‡ä»¶èµ°ç›´é€š
- èµ„æºåˆ©ç”¨æœ€å¤§åŒ–ï¼Œç”¨æˆ·ä½“éªŒæ˜¯ç‹é“