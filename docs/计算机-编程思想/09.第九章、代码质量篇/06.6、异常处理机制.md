---
title: 6ã€å¼‚å¸¸å¤„ç†æœºåˆ¶
---
## ğŸ“š ç›®å½•

1. [å¼‚å¸¸å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ](#1-å¼‚å¸¸å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ)
2. [å¼‚å¸¸vsé”™è¯¯ç ](#2-å¼‚å¸¸vsé”™è¯¯ç )
3. [å¼‚å¸¸ä¼ æ’­æœºåˆ¶](#3-å¼‚å¸¸ä¼ æ’­æœºåˆ¶)
4. [è‡ªå®šä¹‰å¼‚å¸¸è®¾è®¡](#4-è‡ªå®šä¹‰å¼‚å¸¸è®¾è®¡)
5. [å¼‚å¸¸å®‰å…¨ä¿è¯](#5-å¼‚å¸¸å®‰å…¨ä¿è¯)
6. [å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ](#6-å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å¼‚å¸¸å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¼‚å¸¸å¤„ç†


**é€šä¿—è§£é‡Š**ï¼šå¼‚å¸¸å¤„ç†å°±åƒç”Ÿæ´»ä¸­çš„"åº”æ€¥é¢„æ¡ˆ"ã€‚å½“ç¨‹åºè¿è¡Œæ—¶é‡åˆ°æ„å¤–æƒ…å†µï¼ˆæ¯”å¦‚æ–‡ä»¶æ‰¾ä¸åˆ°ã€ç½‘ç»œæ–­å¼€ã€å†…å­˜ä¸è¶³ï¼‰ï¼Œä¸è®©ç¨‹åºç›´æ¥å´©æºƒï¼Œè€Œæ˜¯æœ‰æ¡ç†åœ°å¤„ç†è¿™äº›é—®é¢˜ã€‚

```
ç”Ÿæ´»ä¾‹å­ï¼š
åšé¥­æ—¶å‘ç°æ²¡æœ‰ç›äº†
âŒ å´©æºƒåšæ³•ï¼šç›´æ¥ä¸åšäº†ï¼Œé¥¿è‚šå­
âœ… å¼‚å¸¸å¤„ç†ï¼šå»è¶…å¸‚ä¹°ç›ï¼Œæˆ–è€…ç”¨å…¶ä»–è°ƒæ–™ä»£æ›¿
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ›¡ï¸ **ç¨‹åºä¿æŠ¤**ï¼šé˜²æ­¢ç¨‹åºå› æ„å¤–è€Œå´©æºƒ
- ğŸ“‹ **é—®é¢˜è®°å½•**ï¼šè®°å½•å‡ºé”™çš„å…·ä½“ä¿¡æ¯
- ğŸ”„ **ä¼˜é›…æ¢å¤**ï¼šå°è¯•ä¿®å¤é—®é¢˜æˆ–ç»™å‡ºæ›¿ä»£æ–¹æ¡ˆ
- ğŸ‘¥ **ç”¨æˆ·å‹å¥½**ï¼šç»™ç”¨æˆ·æ¸…æ™°çš„é”™è¯¯æç¤º

### 1.2 å¼‚å¸¸çš„æœ¬è´¨ç†è§£


**å¼‚å¸¸ä¸æ˜¯bug**ï¼š
```
Bugï¼šç¨‹åºé€»è¾‘é”™è¯¯ï¼Œæ¯”å¦‚æ•°ç»„è¶Šç•Œ
å¼‚å¸¸ï¼šç¨‹åºè¿è¡Œæ—¶çš„æ„å¤–æƒ…å†µï¼Œæ¯”å¦‚ç½‘ç»œè¶…æ—¶

Bugéœ€è¦ä¿®å¤ä»£ç ï¼Œå¼‚å¸¸éœ€è¦ä¼˜é›…å¤„ç†
```

**å¼‚å¸¸çš„ç‰¹ç‚¹**ï¼š
- **å¯é¢„æœŸä½†ä¸å¯é¿å…**ï¼šçŸ¥é“å¯èƒ½å‡ºç°ï¼Œä½†æ— æ³•å®Œå…¨é¿å…
- **è¿è¡Œæ—¶å‘ç”Ÿ**ï¼šç¼–è¯‘æ—¶æ­£å¸¸ï¼Œè¿è¡Œæ—¶æ‰å‡ºç°
- **éœ€è¦å¤„ç†ç­–ç•¥**ï¼šä¸èƒ½å¿½è§†ï¼Œå¿…é¡»æœ‰åº”å¯¹æ–¹æ¡ˆ

### 1.3 å¼‚å¸¸å¤„ç†çš„åŸºæœ¬è¯­æ³•


```java
// Javaå¼‚å¸¸å¤„ç†åŸºæœ¬ç»“æ„
try {
    // å¯èƒ½å‡ºé”™çš„ä»£ç 
    String content = readFile("config.txt");
    
} catch (FileNotFoundException e) {
    // æ–‡ä»¶æ‰¾ä¸åˆ°æ—¶çš„å¤„ç†
    System.out.println("é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤é…ç½®");
    
} catch (IOException e) {
    // å…¶ä»–IOé”™è¯¯çš„å¤„ç†
    System.out.println("è¯»å–æ–‡ä»¶å¤±è´¥ï¼š" + e.getMessage());
    
} finally {
    // æ— è®ºå¦‚ä½•éƒ½è¦æ‰§è¡Œçš„ä»£ç 
    System.out.println("æ¸…ç†èµ„æº");
}
```

---

## 2. âš–ï¸ å¼‚å¸¸vsé”™è¯¯ç 


### 2.1 é”™è¯¯ç æ–¹å¼çš„ç†è§£


**ä»€ä¹ˆæ˜¯é”™è¯¯ç **ï¼š
```
é”™è¯¯ç å°±åƒåŒ»é™¢çš„æ£€æŸ¥æŠ¥å‘Šç¼–å·
åŒ»ç”Ÿçœ‹åˆ°"E001"å°±çŸ¥é“æ˜¯"è¡€å‹åé«˜"
ç¨‹åºçœ‹åˆ°è¿”å›å€¼"-1"å°±çŸ¥é“æ˜¯"æ–‡ä»¶æ‰“å¼€å¤±è´¥"
```

**é”™è¯¯ç ç¤ºä¾‹**ï¼š
```java
// ä¼ ç»Ÿé”™è¯¯ç æ–¹å¼
public int divide(int a, int b) {
    if (b == 0) {
        return -1; // é”™è¯¯ç ï¼šé™¤é›¶é”™è¯¯
    }
    return a / b;
}

// è°ƒç”¨æ—¶éœ€è¦æ£€æŸ¥è¿”å›å€¼
int result = divide(10, 0);
if (result == -1) {
    System.out.println("é™¤é›¶é”™è¯¯");
} else {
    System.out.println("ç»“æœï¼š" + result);
}
```

### 2.2 å¼‚å¸¸æ–¹å¼çš„ç†è§£


**å¼‚å¸¸çš„ä¼˜åŠ¿**ï¼š
```java
// å¼‚å¸¸æ–¹å¼
public int divide(int a, int b) {
    if (b == 0) {
        throw new ArithmeticException("é™¤æ•°ä¸èƒ½ä¸ºé›¶");
    }
    return a / b;
}

// è°ƒç”¨æ—¶æ›´æ¸…æ™°
try {
    int result = divide(10, 0);
    System.out.println("ç»“æœï¼š" + result);
} catch (ArithmeticException e) {
    System.out.println("è®¡ç®—é”™è¯¯ï¼š" + e.getMessage());
}
```

### 2.3 ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”åˆ†æ


| ç‰¹æ€§ | **é”™è¯¯ç æ–¹å¼** | **å¼‚å¸¸æ–¹å¼** |
|------|--------------|-------------|
| ğŸ¯ **å¼ºåˆ¶æ€§** | `å®¹æ˜“è¢«å¿½ç•¥` | `å¿…é¡»å¤„ç†æˆ–å£°æ˜` |
| ğŸ“ **ä¿¡æ¯é‡** | `ä¿¡æ¯æœ‰é™` | `å¯æºå¸¦è¯¦ç»†ä¿¡æ¯` |
| ğŸ”„ **ä¼ æ’­æ€§** | `éœ€è¦å±‚å±‚ä¼ é€’` | `è‡ªåŠ¨å‘ä¸Šä¼ æ’­` |
| ğŸ’» **ä»£ç é‡** | `æ£€æŸ¥ä»£ç å¤š` | `ä¸»é€»è¾‘æ›´æ¸…æ™°` |
| âš¡ **æ€§èƒ½** | `å‡ ä¹æ— å¼€é”€` | `æœ‰ä¸€å®šå¼€é”€` |

**é€‰æ‹©å»ºè®®**ï¼š
```
é”™è¯¯ç é€‚ç”¨åœºæ™¯ï¼š
âœ… æ€§èƒ½è¦æ±‚æé«˜çš„ç³»ç»Ÿ
âœ… åµŒå…¥å¼ç³»ç»Ÿ
âœ… é”™è¯¯å¤„ç†ç®€å•çš„åœºæ™¯

å¼‚å¸¸é€‚ç”¨åœºæ™¯ï¼š
âœ… ä¸šåŠ¡é€»è¾‘å¤æ‚çš„åº”ç”¨
âœ… éœ€è¦è¯¦ç»†é”™è¯¯ä¿¡æ¯çš„åœºæ™¯  
âœ… å¤šå±‚è°ƒç”¨çš„ç³»ç»Ÿ
âœ… é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡
```

### 2.4 å®é™…é€‰æ‹©ç­–ç•¥


**æ··åˆä½¿ç”¨ç­–ç•¥**ï¼š
```java
// æ ¸å¿ƒä¸šåŠ¡ç”¨å¼‚å¸¸
public User findUser(String id) throws UserNotFoundException {
    User user = database.find(id);
    if (user == null) {
        throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨ï¼š" + id);
    }
    return user;
}

// ç®€å•éªŒè¯ç”¨é”™è¯¯ç 
public boolean isValidEmail(String email) {
    return email != null && email.contains("@");
}
```

---

## 3. ğŸ”„ å¼‚å¸¸ä¼ æ’­æœºåˆ¶


### 3.1 å¼‚å¸¸ä¼ æ’­çš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯å¼‚å¸¸ä¼ æ’­**ï¼š
```
å¼‚å¸¸ä¼ æ’­å°±åƒ"å‡»é¼“ä¼ èŠ±"
å¼‚å¸¸ä»æœ€åº•å±‚çš„æ–¹æ³•å¼€å§‹ï¼Œä¸€å±‚å±‚å‘ä¸Šä¼ é€’
ç›´åˆ°æ‰¾åˆ°èƒ½å¤„ç†å®ƒçš„åœ°æ–¹ï¼Œæˆ–è€…ä¼ åˆ°ç¨‹åºé¡¶å±‚
```

**ä¼ æ’­è·¯å¾„å›¾ç¤º**ï¼š
```
main() æ–¹æ³•                 â† æœ€ç»ˆå¤„ç†æˆ–ç¨‹åºç»ˆæ­¢
    â†‘
businessLogic() æ–¹æ³•        â† å¯èƒ½å¤„ç†æˆ–ç»§ç»­ä¼ æ’­  
    â†‘
dataAccess() æ–¹æ³•          â† å¯èƒ½å¤„ç†æˆ–ç»§ç»­ä¼ æ’­
    â†‘
fileRead() æ–¹æ³•            â† å¼‚å¸¸å‘ç”Ÿç‚¹
```

### 3.2 ä¼ æ’­æœºåˆ¶çš„è¯¦ç»†è¿‡ç¨‹


**æ­¥éª¤è§£æ**ï¼š
```java
// ç¬¬1å±‚ï¼šæœ€åº•å±‚æ–¹æ³•
public String readConfig() throws IOException {
    // è¿™é‡Œå‘ç”Ÿäº†IOException
    throw new IOException("é…ç½®æ–‡ä»¶æŸå");
}

// ç¬¬2å±‚ï¼šä¸­é—´å±‚æ–¹æ³•
public AppConfig loadConfig() throws ConfigException {
    try {
        return new AppConfig(readConfig());
    } catch (IOException e) {
        // å¯ä»¥é€‰æ‹©ï¼šå¤„ç†ã€åŒ…è£…åé‡æ–°æŠ›å‡ºã€æˆ–ç›´æ¥ä¼ æ’­
        throw new ConfigException("é…ç½®åŠ è½½å¤±è´¥", e);
    }
}

// ç¬¬3å±‚ï¼šä¸šåŠ¡å±‚æ–¹æ³•
public void startApp() {
    try {
        AppConfig config = loadConfig();
        // ä½¿ç”¨é…ç½®å¯åŠ¨åº”ç”¨
    } catch (ConfigException e) {
        // æœ€ç»ˆå¤„ç†å¼‚å¸¸
        System.out.println("åº”ç”¨å¯åŠ¨å¤±è´¥ï¼š" + e.getMessage());
        useDefaultConfig(); // ä½¿ç”¨é»˜è®¤é…ç½®
    }
}
```

### 3.3 å¼‚å¸¸ä¼ æ’­çš„æ§åˆ¶æ–¹å¼


**ä¼ æ’­æ§åˆ¶ç­–ç•¥**ï¼š

**ğŸ”¸ ç›´æ¥ä¼ æ’­**ï¼ˆthrowså£°æ˜ï¼‰ï¼š
```java
public void method1() throws IOException {
    method2(); // ä¸å¤„ç†ï¼Œç›´æ¥å‘ä¸Šä¼ æ’­
}

public void method2() throws IOException {
    throw new IOException("IOé”™è¯¯");
}
```

**ğŸ”¸ åŒ…è£…ä¼ æ’­**ï¼ˆå¼‚å¸¸è½¬æ¢ï¼‰ï¼š
```java
public void businessMethod() throws BusinessException {
    try {
        technicalMethod();
    } catch (TechnicalException e) {
        // å°†æŠ€æœ¯å¼‚å¸¸åŒ…è£…æˆä¸šåŠ¡å¼‚å¸¸
        throw new BusinessException("ä¸šåŠ¡æ“ä½œå¤±è´¥", e);
    }
}
```

**ğŸ”¸ å¤„ç†åç»§ç»­**ï¼š
```java
public void robustMethod() {
    try {
        riskyOperation();
    } catch (Exception e) {
        log.error("æ“ä½œå¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ", e);
        useBackupPlan(); // ä¸å†å‘ä¸Šä¼ æ’­
    }
}
```

### 3.4 å¼‚å¸¸é“¾çš„æ¦‚å¿µ


**å¼‚å¸¸é“¾ç¤ºä¾‹**ï¼š
```java
public class ExceptionChainDemo {
    public void demonstrateChain() {
        try {
            level1();
        } catch (Exception e) {
            // æ‰“å°å®Œæ•´çš„å¼‚å¸¸é“¾
            e.printStackTrace();
        }
    }
    
    private void level1() throws Exception {
        try {
            level2();
        } catch (Exception e) {
            throw new Exception("Level1å‡ºé”™", e);
        }
    }
    
    private void level2() throws Exception {
        try {
            level3();
        } catch (Exception e) {
            throw new Exception("Level2å‡ºé”™", e);
        }
    }
    
    private void level3() throws Exception {
        throw new Exception("Level3å‡ºé”™ï¼šåŸå§‹é—®é¢˜");
    }
}
```

**è¾“å‡ºçš„å¼‚å¸¸é“¾**ï¼š
```
Exception: Level1å‡ºé”™
    at level1(...)
Caused by: Exception: Level2å‡ºé”™  
    at level2(...)
Caused by: Exception: Level3å‡ºé”™ï¼šåŸå§‹é—®é¢˜
    at level3(...)
```

---

## 4. ğŸ¨ è‡ªå®šä¹‰å¼‚å¸¸è®¾è®¡


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰å¼‚å¸¸


**ä½¿ç”¨ç³»ç»Ÿå¼‚å¸¸çš„é—®é¢˜**ï¼š
```java
// ä¸å¥½çš„åšæ³•ï¼šç”¨é€šç”¨å¼‚å¸¸
public User login(String username, String password) throws Exception {
    if (username == null) {
        throw new Exception("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
    }
    if (password == null) {
        throw new Exception("å¯†ç ä¸èƒ½ä¸ºç©º");
    }
    if (!isValidUser(username, password)) {
        throw new Exception("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
    }
    return findUser(username);
}

// é—®é¢˜ï¼šè°ƒç”¨è€…æ— æ³•åŒºåˆ†å…·ä½“æ˜¯ä»€ä¹ˆé”™è¯¯
```

**è‡ªå®šä¹‰å¼‚å¸¸çš„ä¼˜åŠ¿**ï¼š
```java
// å¥½çš„åšæ³•ï¼šè‡ªå®šä¹‰å¼‚å¸¸
public User login(String username, String password) 
    throws EmptyUsernameException, EmptyPasswordException, InvalidCredentialsException {
    
    if (username == null) {
        throw new EmptyUsernameException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
    }
    if (password == null) {
        throw new EmptyPasswordException("å¯†ç ä¸èƒ½ä¸ºç©º");
    }
    if (!isValidUser(username, password)) {
        throw new InvalidCredentialsException("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
    }
    return findUser(username);
}

// ä¼˜åŠ¿ï¼šè°ƒç”¨è€…å¯ä»¥é’ˆå¯¹ä¸åŒé”™è¯¯åšä¸åŒå¤„ç†
```

### 4.2 è‡ªå®šä¹‰å¼‚å¸¸çš„è®¾è®¡åŸåˆ™


**ğŸ”¸ å‘½ååŸåˆ™**ï¼š
```java
// å¥½çš„å‘½åï¼šæ¸…æ™°è¡¨è¾¾å¼‚å¸¸å«ä¹‰
public class UserNotFoundException extends Exception { }
public class InvalidEmailFormatException extends Exception { }
public class InsufficientBalanceException extends Exception { }

// ä¸å¥½çš„å‘½åï¼šå«ä¹‰æ¨¡ç³Š
public class UserException extends Exception { }
public class DataException extends Exception { }
```

**ğŸ”¸ ç»§æ‰¿é€‰æ‹©**ï¼š
```
é€‰æ‹©Exceptionï¼ˆæ£€æŸ¥å‹å¼‚å¸¸ï¼‰ï¼š
âœ… è°ƒç”¨è€…å¿…é¡»å¤„ç†çš„ä¸šåŠ¡å¼‚å¸¸
âœ… å¯æ¢å¤çš„é”™è¯¯æƒ…å†µ

é€‰æ‹©RuntimeExceptionï¼ˆéæ£€æŸ¥å‹å¼‚å¸¸ï¼‰ï¼š
âœ… ç¼–ç¨‹é”™è¯¯ï¼Œå¦‚å‚æ•°éªŒè¯
âœ… é€šå¸¸ä¸å¯æ¢å¤çš„é”™è¯¯
```

### 4.3 å¼‚å¸¸å±‚æ¬¡è®¾è®¡


**ä¸šåŠ¡å¼‚å¸¸ä½“ç³»ç¤ºä¾‹**ï¼š
```java
// æ ¹å¼‚å¸¸ç±»
public abstract class BusinessException extends Exception {
    private String errorCode;
    private String userMessage;
    
    public BusinessException(String errorCode, String message, String userMessage) {
        super(message);
        this.errorCode = errorCode;
        this.userMessage = userMessage;
    }
    
    // getteræ–¹æ³•...
}

// ç”¨æˆ·ç›¸å…³å¼‚å¸¸
public class UserException extends BusinessException {
    public UserException(String errorCode, String message, String userMessage) {
        super(errorCode, message, userMessage);
    }
}

// å…·ä½“çš„ç”¨æˆ·å¼‚å¸¸
public class UserNotFoundException extends UserException {
    public UserNotFoundException(String userId) {
        super("USER_001", 
              "User not found: " + userId,
              "ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·ID");
    }
}

public class DuplicateUserException extends UserException {
    public DuplicateUserException(String username) {
        super("USER_002",
              "Duplicate username: " + username,
              "ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·é€‰æ‹©å…¶ä»–ç”¨æˆ·å");
    }
}
```

### 4.4 å¼‚å¸¸ä¿¡æ¯è®¾è®¡


**å¤šå±‚æ¬¡ä¿¡æ¯è®¾è®¡**ï¼š
```java
public class OrderException extends BusinessException {
    private String orderId;
    private String customerId;
    
    public OrderException(String orderId, String customerId, String reason) {
        super(
            generateErrorCode(reason),
            String.format("Order processing failed. OrderId=%s, CustomerId=%s, Reason=%s", 
                         orderId, customerId, reason),
            generateUserMessage(reason)
        );
        this.orderId = orderId;
        this.customerId = customerId;
    }
    
    private static String generateUserMessage(String reason) {
        switch (reason) {
            case "insufficient_stock":
                return "å•†å“åº“å­˜ä¸è¶³ï¼Œè¯·ç¨åå†è¯•";
            case "payment_failed":
                return "æ”¯ä»˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ”¯ä»˜æ–¹å¼";
            default:
                return "è®¢å•å¤„ç†å¤±è´¥ï¼Œè¯·è”ç³»å®¢æœ";
        }
    }
}
```

---

## 5. ğŸ›¡ï¸ å¼‚å¸¸å®‰å…¨ä¿è¯


### 5.1 å¼‚å¸¸å®‰å…¨çš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯å¼‚å¸¸å®‰å…¨**ï¼š
```
å¼‚å¸¸å®‰å…¨å°±åƒå¼€è½¦æ—¶çš„å®‰å…¨ä¿éšœ
å³ä½¿å‡ºç°æ„å¤–æƒ…å†µï¼ˆå¼‚å¸¸ï¼‰ï¼Œä¹Ÿè¦ä¿è¯ï¼š
- ä¸ä¼šé€ æˆæ•°æ®æŸåï¼ˆå¼ºä¿è¯ï¼‰
- èµ„æºä¸ä¼šæ³„æ¼ï¼ˆåŸºæœ¬ä¿è¯ï¼‰
- ç¨‹åºçŠ¶æ€ä¿æŒä¸€è‡´ï¼ˆæ— å¼‚å¸¸ä¿è¯ï¼‰
```

**å¼‚å¸¸å®‰å…¨çš„ä¸‰ä¸ªçº§åˆ«**ï¼š

**ğŸŸ¢ åŸºæœ¬ä¿è¯ï¼ˆBasic Guaranteeï¼‰**ï¼š
- ä¸ä¼šé€ æˆèµ„æºæ³„æ¼
- å¯¹è±¡ä¿æŒæœ‰æ•ˆçŠ¶æ€
- ç¨‹åºå¯ä»¥ç»§ç»­è¿è¡Œ

**ğŸŸ¡ å¼ºä¿è¯ï¼ˆStrong Guaranteeï¼‰**ï¼š
- æ“ä½œè¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆå®Œå…¨å¤±è´¥
- å¤±è´¥æ—¶çŠ¶æ€å›æ»šåˆ°æ“ä½œå‰
- ç±»ä¼¼æ•°æ®åº“çš„äº‹åŠ¡

**ğŸ”´ æ— å¼‚å¸¸ä¿è¯ï¼ˆNo-throw Guaranteeï¼‰**ï¼š
- æ“ä½œç»å¯¹ä¸ä¼šæŠ›å‡ºå¼‚å¸¸
- é€šå¸¸ç”¨äºææ„å‡½æ•°ã€swapæ“ä½œ

### 5.2 èµ„æºç®¡ç†çš„å¼‚å¸¸å®‰å…¨


**é—®é¢˜ç¤ºä¾‹**ï¼š
```java
// ä¸å®‰å…¨çš„åšæ³•
public void processFile(String filename) throws IOException {
    FileInputStream file = new FileInputStream(filename);
    // å¦‚æœè¿™é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œæ–‡ä»¶æµä¸ä¼šè¢«å…³é—­
    processData(file);
    file.close(); // å¯èƒ½æ‰§è¡Œä¸åˆ°
}
```

**å®‰å…¨çš„è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// ä½¿ç”¨try-with-resourcesï¼ˆæ¨èï¼‰
public void processFile(String filename) throws IOException {
    try (FileInputStream file = new FileInputStream(filename)) {
        processData(file);
        // æ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œå³ä½¿å‡ºç°å¼‚å¸¸
    }
}

// ä¼ ç»Ÿçš„finallyæ–¹å¼
public void processFileTraditional(String filename) throws IOException {
    FileInputStream file = null;
    try {
        file = new FileInputStream(filename);
        processData(file);
    } finally {
        if (file != null) {
            try {
                file.close();
            } catch (IOException e) {
                // è®°å½•å…³é—­å¤±è´¥ï¼Œä½†ä¸å½±å“ä¸»è¦å¼‚å¸¸
                log.warn("æ–‡ä»¶å…³é—­å¤±è´¥", e);
            }
        }
    }
}
```

### 5.3 äº‹åŠ¡æ€§æ“ä½œçš„å¼‚å¸¸å®‰å…¨


**å¼ºå¼‚å¸¸å®‰å…¨ç¤ºä¾‹**ï¼š
```java
public class BankAccount {
    private double balance;
    
    // å¼ºå¼‚å¸¸å®‰å…¨ï¼šè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆçŠ¶æ€ä¸å˜
    public void transfer(BankAccount target, double amount) 
            throws InsufficientFundsException {
        
        // 1. æ£€æŸ¥å‰ç½®æ¡ä»¶
        if (amount <= 0) {
            throw new IllegalArgumentException("è½¬è´¦é‡‘é¢å¿…é¡»å¤§äº0");
        }
        if (this.balance < amount) {
            throw new InsufficientFundsException("ä½™é¢ä¸è¶³");
        }
        
        // 2. æ‰§è¡Œæ“ä½œï¼ˆåŸå­æ€§ï¼‰
        double oldBalance = this.balance;
        try {
            this.balance -= amount;
            target.deposit(amount); // å¦‚æœè¿™é‡Œå¤±è´¥...
        } catch (Exception e) {
            // 3. å›æ»šæ“ä½œ
            this.balance = oldBalance;
            throw new TransferException("è½¬è´¦å¤±è´¥", e);
        }
    }
    
    private void deposit(double amount) {
        this.balance += amount;
    }
}
```

### 5.4 å¼‚å¸¸å®‰å…¨çš„è®¾è®¡æ¨¡å¼


**RAIIæ¨¡å¼ï¼ˆResource Acquisition Is Initializationï¼‰**ï¼š
```java
public class DatabaseTransaction implements AutoCloseable {
    private Connection connection;
    private boolean committed = false;
    
    public DatabaseTransaction() throws SQLException {
        this.connection = DriverManager.getConnection("...");
        this.connection.setAutoCommit(false);
    }
    
    public void commit() throws SQLException {
        connection.commit();
        committed = true;
    }
    
    @Override
    public void close() throws SQLException {
        try {
            if (!committed) {
                connection.rollback(); // æœªæäº¤åˆ™å›æ»š
            }
        } finally {
            connection.close();
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
try (DatabaseTransaction tx = new DatabaseTransaction()) {
    // æ‰§è¡Œæ•°æ®åº“æ“ä½œ
    performDatabaseOperations();
    tx.commit();
    // å¦‚æœcommitä¹‹å‰å‡ºç°å¼‚å¸¸ï¼Œä¼šè‡ªåŠ¨å›æ»š
}
```

---

## 6. ğŸ† å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ


### 6.1 å¼‚å¸¸å¤„ç†çš„åŸºæœ¬åŸåˆ™


**ğŸ”¸ å°½æ—©å‘ç°ï¼Œå°±è¿‘å¤„ç†**ï¼š
```java
// å¥½åšæ³•ï¼šåœ¨åˆé€‚çš„å±‚æ¬¡å¤„ç†å¼‚å¸¸
public class UserService {
    public User createUser(String username, String email) {
        try {
            validateInput(username, email); // è¾“å…¥éªŒè¯å±‚
            return userRepository.save(username, email); // æ•°æ®å±‚
        } catch (ValidationException e) {
            // åœ¨ä¸šåŠ¡å±‚å¤„ç†éªŒè¯å¼‚å¸¸
            throw new UserCreationException("ç”¨æˆ·åˆ›å»ºå¤±è´¥ï¼š" + e.getMessage());
        } catch (DataAccessException e) {
            // åœ¨ä¸šåŠ¡å±‚å¤„ç†æ•°æ®è®¿é—®å¼‚å¸¸
            log.error("æ•°æ®åº“æ“ä½œå¤±è´¥", e);
            throw new UserCreationException("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
        }
    }
}
```

**ğŸ”¸ å¼‚å¸¸ä¿¡æ¯è¦æœ‰æ„ä¹‰**ï¼š
```java
// ä¸å¥½çš„å¼‚å¸¸ä¿¡æ¯
throw new Exception("error");
throw new Exception("something went wrong");

// å¥½çš„å¼‚å¸¸ä¿¡æ¯
throw new OrderProcessingException(
    String.format("è®¢å•å¤„ç†å¤±è´¥ï¼šå•†å“[%s]åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜[%d]ï¼Œéœ€è¦[%d]", 
                  productName, currentStock, requiredQuantity));
```

### 6.2 å¸¸è§çš„å¼‚å¸¸å¤„ç†åæ¨¡å¼


**âŒ åæ‰å¼‚å¸¸**ï¼š
```java
// é”™è¯¯åšæ³•ï¼šå¿½ç•¥å¼‚å¸¸
try {
    riskyOperation();
} catch (Exception e) {
    // ä»€ä¹ˆéƒ½ä¸åšï¼Œå¼‚å¸¸è¢«"åæ‰"äº†
}

// æ­£ç¡®åšæ³•ï¼šè‡³å°‘è®°å½•æ—¥å¿—
try {
    riskyOperation();
} catch (Exception e) {
    log.error("æ“ä½œå¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å¤„ç†", e);
    handleWithDefault();
}
```

**âŒ è¿‡åº¦æ•è·**ï¼š
```java
// é”™è¯¯åšæ³•ï¼šæ•è·è¿‡äºå®½æ³›çš„å¼‚å¸¸
try {
    complexOperation();
} catch (Exception e) { // æ•è·äº†æ‰€æœ‰å¼‚å¸¸
    handleError(e);
}

// æ­£ç¡®åšæ³•ï¼šæ•è·å…·ä½“çš„å¼‚å¸¸
try {
    complexOperation();
} catch (NetworkException e) {
    handleNetworkError(e);
} catch (DataException e) {
    handleDataError(e);
}
```

### 6.3 å¼‚å¸¸å¤„ç†çš„åˆ†å±‚ç­–ç•¥


**å¼‚å¸¸å¤„ç†åˆ†å±‚å›¾ç¤º**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¡¨ç°å±‚ (Controller)         â”‚ â† è½¬æ¢ä¸ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          ä¸šåŠ¡å±‚ (Service)            â”‚ â† å¤„ç†ä¸šåŠ¡å¼‚å¸¸ï¼Œè®°å½•æ—¥å¿—
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          æ•°æ®å±‚ (Repository)         â”‚ â† å¤„ç†æ•°æ®è®¿é—®å¼‚å¸¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          åŸºç¡€è®¾æ–½å±‚ (Network/File)    â”‚ â† åŸå§‹å¼‚å¸¸å‘ç”Ÿç‚¹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å„å±‚çš„å¼‚å¸¸å¤„ç†èŒè´£**ï¼š
```java
// æ•°æ®å±‚ï¼šè½¬æ¢æŠ€æœ¯å¼‚å¸¸ä¸ºä¸šåŠ¡å¼‚å¸¸
@Repository
public class UserRepository {
    public User findById(String id) throws UserNotFoundException {
        try {
            return database.queryUser(id);
        } catch (SQLException e) {
            if (e.getErrorCode() == 404) {
                throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨ï¼š" + id);
            }
            throw new DataAccessException("æ•°æ®æŸ¥è¯¢å¤±è´¥", e);
        }
    }
}

// ä¸šåŠ¡å±‚ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘å¼‚å¸¸
@Service
public class UserService {
    public User getUser(String id) throws UserNotFoundException {
        try {
            return userRepository.findById(id);
        } catch (DataAccessException e) {
            log.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼š" + id, e);
            throw new ServiceException("æœåŠ¡æš‚æ—¶ä¸å¯ç”¨", e);
        }
    }
}

// è¡¨ç°å±‚ï¼šè½¬æ¢ä¸ºç”¨æˆ·å‹å¥½çš„å“åº”
@Controller
public class UserController {
    @ExceptionHandler(UserNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleUserNotFound(UserNotFoundException e) {
        return ResponseEntity.status(404).body(
            new ErrorResponse("USER_NOT_FOUND", "ç”¨æˆ·ä¸å­˜åœ¨")
        );
    }
}
```

### 6.4 å¼‚å¸¸å¤„ç†çš„æ€§èƒ½è€ƒè™‘


**å¼‚å¸¸å¤„ç†çš„æ€§èƒ½å½±å“**ï¼š
```java
// æ€§èƒ½å‹å¥½çš„éªŒè¯æ–¹å¼
public boolean isValidUser(String username) {
    // è¿”å›booleanè€Œä¸æ˜¯æŠ›å¼‚å¸¸
    return username != null && username.length() > 0;
}

// é¿å…ç”¨å¼‚å¸¸æ§åˆ¶æ­£å¸¸æµç¨‹
public User findUser(String id) {
    User user = cache.get(id);
    if (user != null) {
        return user; // æ­£å¸¸æƒ…å†µï¼Œä¸ç”¨å¼‚å¸¸
    }
    
    try {
        user = database.findUser(id);
        cache.put(id, user);
        return user;
    } catch (SQLException e) {
        // åªåœ¨çœŸæ­£çš„å¼‚å¸¸æƒ…å†µä¸‹æ‰æŠ›å¼‚å¸¸
        throw new UserNotFoundException("ç”¨æˆ·æŸ¥è¯¢å¤±è´¥", e);
    }
}
```

### 6.5 å¼‚å¸¸å¤„ç†çš„ç›‘æ§å’Œè¯Šæ–­


**å¼‚å¸¸ç›‘æ§æœ€ä½³å®è·µ**ï¼š
```java
public class ExceptionMonitor {
    private static final Logger log = LoggerFactory.getLogger(ExceptionMonitor.class);
    private MetricsCollector metrics;
    
    public void handleException(Exception e, String operation, String userId) {
        // 1. è®°å½•è¯¦ç»†æ—¥å¿—
        log.error("æ“ä½œå¤±è´¥ï¼šoperation={}, userId={}, error={}", 
                  operation, userId, e.getMessage(), e);
        
        // 2. æ”¶é›†æŒ‡æ ‡
        metrics.incrementCounter("exception.count", 
                                "type", e.getClass().getSimpleName(),
                                "operation", operation);
        
        // 3. å…³é”®å¼‚å¸¸å‘Šè­¦
        if (isCriticalException(e)) {
            alertService.sendAlert("ä¸¥é‡å¼‚å¸¸ï¼š" + e.getMessage());
        }
    }
    
    private boolean isCriticalException(Exception e) {
        return e instanceof OutOfMemoryError 
            || e instanceof DatabaseConnectionException
            || e instanceof SecurityException;
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¼‚å¸¸å¤„ç†æœ¬è´¨ï¼šç¨‹åºçš„åº”æ€¥é¢„æ¡ˆï¼Œä¿è¯ç¨‹åºç¨³å®šæ€§
ğŸ”¸ å¼‚å¸¸vsé”™è¯¯ç ï¼šå¼‚å¸¸æ›´é€‚åˆå¤æ‚ä¸šåŠ¡ï¼Œé”™è¯¯ç é€‚åˆé«˜æ€§èƒ½åœºæ™¯
ğŸ”¸ å¼‚å¸¸ä¼ æ’­æœºåˆ¶ï¼šå¼‚å¸¸è‡ªåŠ¨å‘ä¸Šä¼ æ’­ï¼Œç›´åˆ°è¢«å¤„ç†æˆ–å¯¼è‡´ç¨‹åºç»ˆæ­¢
ğŸ”¸ è‡ªå®šä¹‰å¼‚å¸¸è®¾è®¡ï¼šæ¸…æ™°çš„å‘½åã€åˆç†çš„ç»§æ‰¿ã€ä¸°å¯Œçš„ä¿¡æ¯
ğŸ”¸ å¼‚å¸¸å®‰å…¨ä¿è¯ï¼šåŸºæœ¬ä¿è¯ã€å¼ºä¿è¯ã€æ— å¼‚å¸¸ä¿è¯ä¸‰ä¸ªçº§åˆ«
ğŸ”¸ æœ€ä½³å®è·µï¼šåˆ†å±‚å¤„ç†ã€æœ‰æ„ä¹‰çš„ä¿¡æ¯ã€é¿å…åæ¨¡å¼
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒæ€ç»´**ï¼š
```
å¼‚å¸¸ä¸æ˜¯é”™è¯¯ï¼Œæ˜¯æ„å¤–æƒ…å†µçš„ç®¡ç†
ç›®æ ‡ï¼šè®©ç¨‹åºåœ¨æ„å¤–æƒ…å†µä¸‹ä»èƒ½ä¼˜é›…è¿è¡Œ
æ‰‹æ®µï¼šé¢„æœŸå¼‚å¸¸ã€åˆ†ç±»å¤„ç†ã€ä¼˜é›…æ¢å¤
```

**ğŸ”¹ é€‰æ‹©å¼‚å¸¸è¿˜æ˜¯é”™è¯¯ç çš„åˆ¤æ–­æ ‡å‡†**ï¼š
```
è€ƒè™‘å› ç´ ï¼š
- æ€§èƒ½è¦æ±‚ï¼ˆé”™è¯¯ç æ›´å¿«ï¼‰
- é”™è¯¯ä¿¡æ¯ä¸°å¯Œç¨‹åº¦ï¼ˆå¼‚å¸¸æ›´è¯¦ç»†ï¼‰
- è°ƒç”¨é“¾å¤æ‚åº¦ï¼ˆå¼‚å¸¸ä¼ æ’­æ›´æ–¹ä¾¿ï¼‰
- å›¢é˜ŸæŠ€æœ¯æ°´å¹³ï¼ˆå¼‚å¸¸éœ€è¦æ›´å¥½çš„è®¾è®¡ï¼‰
```

**ğŸ”¹ å¼‚å¸¸å®‰å…¨çš„å®è·µæ„ä¹‰**ï¼š
```
ä¸åªæ˜¯"èƒ½å¤„ç†å¼‚å¸¸"ï¼Œæ›´è¦ä¿è¯ï¼š
- èµ„æºä¸æ³„æ¼ï¼ˆæ–‡ä»¶ã€å†…å­˜ã€è¿æ¥ç­‰ï¼‰
- æ•°æ®ä¸æŸåï¼ˆäº‹åŠ¡å®Œæ•´æ€§ï¼‰
- çŠ¶æ€ä¿æŒä¸€è‡´ï¼ˆå¯¹è±¡çŠ¶æ€æœ‰æ•ˆï¼‰
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**å¼‚å¸¸å¤„ç†çš„è®¾è®¡æ£€æŸ¥æ¸…å•**ï¼š
```
è®¾è®¡é˜¶æ®µï¼š
âœ… è¯†åˆ«æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸æƒ…å†µ
âœ… è®¾è®¡åˆç†çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„
âœ… ç¡®å®šå„å±‚çš„å¼‚å¸¸å¤„ç†èŒè´£

ç¼–ç é˜¶æ®µï¼š
âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å¼‚å¸¸ç±»å‹å’Œä¿¡æ¯
âœ… ç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾
âœ… é¿å…åæ‰å¼‚å¸¸æˆ–è¿‡åº¦æ•è·

æµ‹è¯•é˜¶æ®µï¼š
âœ… æµ‹è¯•å„ç§å¼‚å¸¸åœºæ™¯
âœ… éªŒè¯å¼‚å¸¸å®‰å…¨æ€§
âœ… æ£€æŸ¥å¼‚å¸¸ä¿¡æ¯çš„å‡†ç¡®æ€§

è¿ç»´é˜¶æ®µï¼š
âœ… ç›‘æ§å¼‚å¸¸å‘ç”Ÿé¢‘ç‡
âœ… åˆ†æå¼‚å¸¸æ ¹æœ¬åŸå› 
âœ… æŒç»­ä¼˜åŒ–å¼‚å¸¸å¤„ç†ç­–ç•¥
```

**è®°å¿†è¦ç‚¹**ï¼š
- **å¼‚å¸¸æ˜¯æ„å¤–çš„ç®¡ç†ï¼Œä¸æ˜¯é”™è¯¯çš„æ©ç›–**
- **å¥½çš„å¼‚å¸¸å¤„ç†è®©ç¨‹åºæ›´ç¨³å®šï¼Œè€Œä¸æ˜¯æ›´å¤æ‚**
- **å¼‚å¸¸å®‰å…¨æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ä¿è¯**
- **åˆ†å±‚å¤„ç†å¼‚å¸¸ï¼Œè®©æ¯ä¸€å±‚ä¸“æ³¨è‡ªå·±çš„èŒè´£**