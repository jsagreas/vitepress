---
title: 4ã€è‡ªå®šä¹‰å¼‚å¸¸
---
## ğŸ“š ç›®å½•


1. [è‡ªå®šä¹‰å¼‚å¸¸åŸºæœ¬æ¦‚å¿µ](#1-è‡ªå®šä¹‰å¼‚å¸¸åŸºæœ¬æ¦‚å¿µ)
2. [å¼‚å¸¸ç±»ç»§æ‰¿é€‰æ‹©](#2-å¼‚å¸¸ç±»ç»§æ‰¿é€‰æ‹©)
3. [å¼‚å¸¸ä¿¡æ¯è®¾è®¡](#3-å¼‚å¸¸ä¿¡æ¯è®¾è®¡)
4. [å¼‚å¸¸å±æ€§æ·»åŠ ](#4-å¼‚å¸¸å±æ€§æ·»åŠ )
5. [raiseè¯­å¥ä½¿ç”¨](#5-raiseè¯­å¥ä½¿ç”¨)
6. [å¼‚å¸¸é“¾åˆ›å»º](#6-å¼‚å¸¸é“¾åˆ›å»º)
7. [å¼‚å¸¸æ¨¡å—ç»„ç»‡](#7-å¼‚å¸¸æ¨¡å—ç»„ç»‡)
8. [å¼‚å¸¸æ–‡æ¡£ç¼–å†™](#8-å¼‚å¸¸æ–‡æ¡£ç¼–å†™)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ› ï¸ è‡ªå®šä¹‰å¼‚å¸¸åŸºæœ¬æ¦‚å¿µ



### 1.1 ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰å¼‚å¸¸



**ğŸ”¸ ç®€å•ç†è§£**
```
è‡ªå®šä¹‰å¼‚å¸¸å°±æ˜¯ä½ è‡ªå·±åˆ›å»ºçš„é”™è¯¯ç±»å‹
å°±åƒç»™ç¨‹åºä¸­çš„é”™è¯¯æƒ…å†µèµ·ä¸ªä¸“é—¨çš„åå­—
è®©åˆ«äººä¸€çœ‹å°±çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆé—®é¢˜
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰å¼‚å¸¸**
- **æ›´æ˜ç¡®çš„é”™è¯¯æç¤º**ï¼šä¸€çœ‹å¼‚å¸¸åå°±çŸ¥é“å‡ºäº†ä»€ä¹ˆé—®é¢˜
- **æ›´å¥½çš„é”™è¯¯åˆ†ç±»**ï¼šä¸åŒç±»å‹çš„é”™è¯¯ç”¨ä¸åŒçš„å¼‚å¸¸ç±»
- **æ›´çµæ´»çš„é”™è¯¯å¤„ç†**ï¼šå¯ä»¥é’ˆå¯¹ç‰¹å®šå¼‚å¸¸åšç‰¹æ®Šå¤„ç†
- **æ›´ä¸“ä¸šçš„ä»£ç **ï¼šè®©ä»£ç çœ‹èµ·æ¥æ›´ä¸“ä¸šå’Œè§„èŒƒ

### 1.2 è‡ªå®šä¹‰å¼‚å¸¸çš„æœ¬è´¨



**ğŸ”¸ æ ¸å¿ƒåŸç†**
```python
# æœ€ç®€å•çš„è‡ªå®šä¹‰å¼‚å¸¸

class MyError(Exception):
    pass

# ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸

try:
    raise MyError("å‡ºé”™äº†ï¼")
except MyError as e:
    print(f"æ•è·åˆ°è‡ªå®šä¹‰å¼‚å¸¸ï¼š{e}")
```

**ğŸ“‹ è‡ªå®šä¹‰å¼‚å¸¸çš„ç‰¹ç‚¹**
- **ç»§æ‰¿è‡ªException**ï¼šæ‰€æœ‰è‡ªå®šä¹‰å¼‚å¸¸éƒ½è¦ç»§æ‰¿Exceptionç±»
- **å¯ä»¥æ·»åŠ é¢å¤–ä¿¡æ¯**ï¼šæ¯”å†…ç½®å¼‚å¸¸æºå¸¦æ›´å¤šæœ‰ç”¨ä¿¡æ¯
- **å¯ä»¥è‡ªå®šä¹‰è¡Œä¸º**ï¼šå®šä¹‰å¼‚å¸¸å‘ç”Ÿæ—¶çš„ç‰¹æ®Šè¡Œä¸º

### 1.3 ä½¿ç”¨åœºæ™¯ç¤ºä¾‹



**ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯**
```
é“¶è¡Œç³»ç»Ÿï¼š
- ä½™é¢ä¸è¶³å¼‚å¸¸ â†’ InsufficientFundsError
- è´¦æˆ·å†»ç»“å¼‚å¸¸ â†’ AccountFrozenError
- å¯†ç é”™è¯¯å¼‚å¸¸ â†’ InvalidPasswordError

ç½‘ç»œçˆ¬è™«ï¼š
- é¡µé¢åŠ è½½å¤±è´¥ â†’ PageLoadError
- æ•°æ®è§£æå¤±è´¥ â†’ DataParseError
- åçˆ¬è™«æ£€æµ‹ â†’ AntiCrawlerError
```

---

## 2. ğŸ—ï¸ å¼‚å¸¸ç±»ç»§æ‰¿é€‰æ‹©



### 2.1 ç»§æ‰¿å±‚æ¬¡ç»“æ„



**ğŸ“Š Pythonå¼‚å¸¸ç»§æ‰¿æ ‘**
```
BaseException
 â””â”€â”€ Exception
     â”œâ”€â”€ ValueError
     â”œâ”€â”€ TypeError
     â”œâ”€â”€ FileNotFoundError
     â”œâ”€â”€ ConnectionError
     â””â”€â”€ ä½ çš„è‡ªå®šä¹‰å¼‚å¸¸
```

**ğŸ¯ é€‰æ‹©ç»§æ‰¿çš„åŸºæœ¬åŸåˆ™**
- **å¤§éƒ¨åˆ†æƒ…å†µ**ï¼šç›´æ¥ç»§æ‰¿`Exception`
- **ç‰¹å®šç±»å‹é”™è¯¯**ï¼šç»§æ‰¿ç›¸å…³çš„å†…ç½®å¼‚å¸¸
- **ç³»ç»Ÿçº§é”™è¯¯**ï¼šè°¨æ…è€ƒè™‘ç»§æ‰¿`BaseException`

### 2.2 å¸¸è§ç»§æ‰¿é€‰æ‹©



**ğŸ”¸ ç›´æ¥ç»§æ‰¿Exceptionï¼ˆæ¨èï¼‰**
```python
class BusinessError(Exception):
    """ä¸šåŠ¡é€»è¾‘é”™è¯¯åŸºç±»"""
    pass

class UserNotFoundError(BusinessError):
    """ç”¨æˆ·ä¸å­˜åœ¨é”™è¯¯"""
    pass
```

**ğŸ”¸ ç»§æ‰¿ç‰¹å®šå†…ç½®å¼‚å¸¸**
```python
# å‚æ•°å€¼æœ‰é—®é¢˜æ—¶ï¼Œç»§æ‰¿ValueError

class InvalidAgeError(ValueError):
    """å¹´é¾„å€¼æ— æ•ˆ"""
    pass

# æ–‡ä»¶æ“ä½œé—®é¢˜æ—¶ï¼Œç»§æ‰¿OSError

class ConfigFileError(OSError):
    """é…ç½®æ–‡ä»¶é”™è¯¯"""
    pass
```

### 2.3 ç»§æ‰¿é€‰æ‹©å®è·µæŒ‡å—



| é”™è¯¯ç±»å‹ | **æ¨èç»§æ‰¿** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|---------|------------|-------------|---------|
| ğŸ”¸ **ä¸šåŠ¡é€»è¾‘é”™è¯¯** | `Exception` | `ç”¨æˆ·æ“ä½œè¿åä¸šåŠ¡è§„åˆ™` | `ä½™é¢ä¸è¶³ã€æƒé™ä¸å¤Ÿ` |
| ğŸ”¸ **å‚æ•°é”™è¯¯** | `ValueError` | `ä¼ å…¥å‚æ•°å€¼ä¸ç¬¦åˆè¦æ±‚` | `å¹´é¾„è´Ÿæ•°ã€é‚®ç®±æ ¼å¼é”™è¯¯` |
| ğŸ”¸ **ç±»å‹é”™è¯¯** | `TypeError` | `å‚æ•°ç±»å‹ä¸æ­£ç¡®` | `æœŸæœ›æ•°å­—å´ä¼ å…¥å­—ç¬¦ä¸²` |
| ğŸ”¸ **æ–‡ä»¶é”™è¯¯** | `OSError` | `æ–‡ä»¶æ“ä½œç›¸å…³é—®é¢˜` | `é…ç½®æ–‡ä»¶æŸåã€æƒé™ä¸è¶³` |
| ğŸ”¸ **ç½‘ç»œé”™è¯¯** | `ConnectionError` | `ç½‘ç»œè¿æ¥ç›¸å…³é—®é¢˜` | `APIè°ƒç”¨å¤±è´¥ã€è¶…æ—¶` |

---

## 3. ğŸ’¬ å¼‚å¸¸ä¿¡æ¯è®¾è®¡



### 3.1 æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯



**ğŸ”¸ å¥½çš„é”™è¯¯æ¶ˆæ¯ç‰¹ç‚¹**
- **æè¿°æ€§å¼º**ï¼šä¸€çœ‹å°±çŸ¥é“ä»€ä¹ˆé—®é¢˜
- **åŒ…å«ä¸Šä¸‹æ–‡**ï¼šæä¾›ç›¸å…³çš„å…·ä½“ä¿¡æ¯
- **ç»™å‡ºå»ºè®®**ï¼šå‘Šè¯‰ç”¨æˆ·å¦‚ä½•è§£å†³

**âœ… å¥½çš„å¼‚å¸¸æ¶ˆæ¯ç¤ºä¾‹**
```python
class InvalidEmailError(ValueError):
    def __init__(self, email):
        message = f"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼š'{email}'ï¼Œè¯·æ£€æŸ¥æ˜¯å¦åŒ…å«@ç¬¦å·å’ŒåŸŸå"
        super().__init__(message)
        self.email = email

# ä½¿ç”¨ç¤ºä¾‹

try:
    raise InvalidEmailError("user.com")
except InvalidEmailError as e:
    print(e)  # é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼š'user.com'ï¼Œè¯·æ£€æŸ¥æ˜¯å¦åŒ…å«@ç¬¦å·å’ŒåŸŸå
```

### 3.2 å¤šè¯­è¨€æ”¯æŒè®¾è®¡



**ğŸŒ å›½é™…åŒ–è€ƒè™‘**
```python
class InsufficientFundsError(Exception):
    def __init__(self, balance, amount, language='zh'):
        self.balance = balance
        self.amount = amount
        
        messages = {
            'zh': f"ä½™é¢ä¸è¶³ï¼šå½“å‰ä½™é¢{balance}å…ƒï¼Œå°è¯•æ‰£é™¤{amount}å…ƒ",
            'en': f"Insufficient funds: balance {balance}, trying to deduct {amount}"
        }
        
        super().__init__(messages.get(language, messages['zh']))
```

### 3.3 é”™è¯¯æ¶ˆæ¯æ¨¡æ¿



**ğŸ“ æ¶ˆæ¯æ¨¡æ¿è®¾è®¡**
```python
class ValidationError(Exception):
    def __init__(self, field, value, reason):
        self.field = field
        self.value = value
        self.reason = reason
        
        message = f"å­—æ®µ '{field}' éªŒè¯å¤±è´¥ï¼šå€¼ '{value}' {reason}"
        super().__init__(message)

# ä½¿ç”¨ç¤ºä¾‹

raise ValidationError("age", -5, "ä¸èƒ½ä¸ºè´Ÿæ•°")
```

---

## 4. ğŸ·ï¸ å¼‚å¸¸å±æ€§æ·»åŠ 



### 4.1 æ·»åŠ æœ‰ç”¨çš„å±æ€§



**ğŸ”¸ ä¸ºä»€ä¹ˆè¦æ·»åŠ å±æ€§**
```
å¼‚å¸¸å±æ€§å°±åƒç»™é”™è¯¯è´´æ ‡ç­¾
è®©ç¨‹åºèƒ½å¤Ÿè·å–æ›´å¤šé”™è¯¯ç›¸å…³çš„ä¿¡æ¯
æ–¹ä¾¿åšæ›´ç²¾ç¡®çš„é”™è¯¯å¤„ç†
```

**ğŸ’¡ å¸¸è§å±æ€§ç±»å‹**
```python
class UserLoginError(Exception):
    def __init__(self, username, error_code, retry_count=0):
        self.username = username      # å‡ºé”™çš„ç”¨æˆ·å
        self.error_code = error_code  # é”™è¯¯ä»£ç 
        self.retry_count = retry_count # é‡è¯•æ¬¡æ•°
        
        message = f"ç”¨æˆ· {username} ç™»å½•å¤±è´¥ï¼Œé”™è¯¯ä»£ç ï¼š{error_code}"
        super().__init__(message)
```

### 4.2 å±æ€§ä½¿ç”¨ç¤ºä¾‹



**ğŸ”§ å®é™…åº”ç”¨åœºæ™¯**
```python
class DatabaseConnectionError(Exception):
    def __init__(self, host, port, database, original_error=None):
        self.host = host
        self.port = port  
        self.database = database
        self.original_error = original_error
        
        message = f"æ— æ³•è¿æ¥åˆ°æ•°æ®åº“ {database} at {host}:{port}"
        if original_error:
            message += f"ï¼ŒåŸå› ï¼š{original_error}"
        
        super().__init__(message)

# ä½¿ç”¨å¼‚å¸¸å±æ€§è¿›è¡Œç²¾ç¡®å¤„ç†

try:
#    # å‡è®¾è¿™é‡Œæ˜¯æ•°æ®åº“è¿æ¥ä»£ç 
    raise DatabaseConnectionError("localhost", 5432, "mydb", "è¿æ¥è¶…æ—¶")
except DatabaseConnectionError as e:
    print(f"æ•°æ®åº“ï¼š{e.database}")
    print(f"æœåŠ¡å™¨ï¼š{e.host}:{e.port}")
    
#    # æ ¹æ®ä¸åŒæƒ…å†µåšä¸åŒå¤„ç†
    if "è¶…æ—¶" in str(e.original_error):
        print("å»ºè®®æ£€æŸ¥ç½‘ç»œè¿æ¥")
    elif "æ‹’ç»" in str(e.original_error):
        print("å»ºè®®æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€")
```

### 4.3 å±æ€§è®¾è®¡æœ€ä½³å®è·µ



**ğŸ¯ è®¾è®¡åŸåˆ™**
- **æœ‰æ„ä¹‰çš„å±æ€§å**ï¼šä¸€çœ‹å°±çŸ¥é“æ˜¯ä»€ä¹ˆ
- **åˆé€‚çš„æ•°æ®ç±»å‹**ï¼šé€‰æ‹©æœ€é€‚åˆçš„æ•°æ®ç±»å‹
- **æ–‡æ¡£åŒ–è¯´æ˜**ï¼šä¸ºæ¯ä¸ªå±æ€§å†™æ¸…æ¥šè¯´æ˜

**ğŸ“‹ å±æ€§è®¾è®¡æ¨¡æ¿**
```python
class PaymentError(Exception):
    """æ”¯ä»˜å¤„ç†å¼‚å¸¸
    
    Attributes:
        order_id (str): è®¢å•ID
        amount (float): æ”¯ä»˜é‡‘é¢
        payment_method (str): æ”¯ä»˜æ–¹å¼
        error_type (str): é”™è¯¯ç±»å‹
        timestamp (datetime): å‘ç”Ÿæ—¶é—´
    """
    
    def __init__(self, order_id, amount, payment_method, error_type, timestamp=None):
        from datetime import datetime
        
        self.order_id = order_id
        self.amount = amount
        self.payment_method = payment_method  
        self.error_type = error_type
        self.timestamp = timestamp or datetime.now()
        
        message = f"è®¢å• {order_id} æ”¯ä»˜å¤±è´¥ï¼š{error_type}"
        super().__init__(message)
```

---

## 5. ğŸš€ raiseè¯­å¥ä½¿ç”¨



### 5.1 åŸºæœ¬raiseç”¨æ³•



**ğŸ”¸ raiseè¯­å¥çš„ä½œç”¨**
```
raiseå°±æ˜¯"æŠ›å‡ºå¼‚å¸¸"çš„å‘½ä»¤
å‘Šè¯‰ç¨‹åºï¼šè¿™é‡Œå‡ºé”™äº†ï¼Œåœä¸‹æ¥å¤„ç†é”™è¯¯
```

**ğŸ’¡ åŸºæœ¬è¯­æ³•å½¢å¼**
```python
# 1. æŠ›å‡ºå¼‚å¸¸ç±»

raise ValueError()

# 2. æŠ›å‡ºå¼‚å¸¸å®ä¾‹

raise ValueError("è¿™æ˜¯é”™è¯¯æ¶ˆæ¯")

# 3. é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸

try:
    1 / 0
except:
    print("è®°å½•é”™è¯¯æ—¥å¿—")
    raise  # é‡æ–°æŠ›å‡ºZeroDivisionError
```

### 5.2 åœ¨å‡½æ•°ä¸­ä½¿ç”¨raise



**ğŸ”§ å®é™…åº”ç”¨ç¤ºä¾‹**
```python
def withdraw_money(balance, amount):
    """å–é’±å‡½æ•°"""
    if amount <= 0:
        raise ValueError("å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0")
    
    if amount > balance:
        raise InsufficientFundsError(balance, amount)
    
    return balance - amount

# ä½¿ç”¨ç¤ºä¾‹

try:
    new_balance = withdraw_money(100, 150)
except ValueError as e:
    print(f"å‚æ•°é”™è¯¯ï¼š{e}")
except InsufficientFundsError as e:
    print(f"ä½™é¢ä¸è¶³ï¼š{e}")
```

### 5.3 æ¡ä»¶æ€§raise



**âš ï¸ æ ¹æ®æ¡ä»¶æŠ›å‡ºå¼‚å¸¸**
```python
def process_user_age(age):
    """å¤„ç†ç”¨æˆ·å¹´é¾„"""
    if not isinstance(age, int):
        raise TypeError(f"å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°ï¼Œè€Œä¸æ˜¯ {type(age).__name__}")
    
    if age < 0:
        raise ValueError("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
    
    if age > 150:
        raise ValueError("å¹´é¾„ä¸èƒ½è¶…è¿‡150å²")
    
#    # æ ¹æ®å¹´é¾„èŒƒå›´ç»™å‡ºä¸åŒå»ºè®®
    if age < 18:
        return "æœªæˆå¹´ç”¨æˆ·"
    elif age < 60:
        return "æˆå¹´ç”¨æˆ·"
    else:
        return "è€å¹´ç”¨æˆ·"
```

---

## 6. ğŸ”— å¼‚å¸¸é“¾åˆ›å»º



### 6.1 ä»€ä¹ˆæ˜¯å¼‚å¸¸é“¾



**ğŸ”¸ å¼‚å¸¸é“¾çš„æ¦‚å¿µ**
```
å¼‚å¸¸é“¾å°±æ˜¯æŠŠå¤šä¸ªç›¸å…³çš„å¼‚å¸¸è¿æ¥èµ·æ¥
è®°å½•é”™è¯¯å‘ç”Ÿçš„å®Œæ•´è¿‡ç¨‹
å°±åƒå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ï¼Œä¸€ä¸ªé”™è¯¯å¼•å‘å¦ä¸€ä¸ªé”™è¯¯
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦å¼‚å¸¸é“¾**
- **ä¿ç•™é”™è¯¯å†å²**ï¼šçŸ¥é“é”™è¯¯æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥å‘ç”Ÿçš„
- **æ›´å¥½çš„è°ƒè¯•**ï¼šèƒ½è¿½æº¯åˆ°æœ€æ ¹æœ¬çš„åŸå› 
- **å®Œæ•´çš„é”™è¯¯ä¿¡æ¯**ï¼šä¸ä¸¢å¤±ä»»ä½•é‡è¦ä¿¡æ¯

### 6.2 ä½¿ç”¨raise fromåˆ›å»ºå¼‚å¸¸é“¾



**ğŸ”§ åŸºæœ¬è¯­æ³•**
```python
try:
#    # åŸå§‹æ“ä½œ
    result = 1 / 0
except ZeroDivisionError as e:
#    # æŠ›å‡ºæ–°å¼‚å¸¸ï¼ŒåŒæ—¶ä¿ç•™åŸå¼‚å¸¸
    raise ValueError("è®¡ç®—è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯") from e
```

**ğŸ“‹ å®é™…åº”ç”¨ç¤ºä¾‹**
```python
class ConfigLoadError(Exception):
    """é…ç½®åŠ è½½é”™è¯¯"""
    pass

def load_config(filename):
    """åŠ è½½é…ç½®æ–‡ä»¶"""
    try:
        with open(filename, 'r') as f:
            import json
            return json.load(f)
    except FileNotFoundError as e:
        raise ConfigLoadError(f"é…ç½®æ–‡ä»¶ {filename} ä¸å­˜åœ¨") from e
    except json.JSONDecodeError as e:
        raise ConfigLoadError(f"é…ç½®æ–‡ä»¶ {filename} æ ¼å¼é”™è¯¯") from e

# ä½¿ç”¨ç¤ºä¾‹

try:
    config = load_config("config.json")
except ConfigLoadError as e:
    print(f"é…ç½®åŠ è½½å¤±è´¥ï¼š{e}")
    print(f"æ ¹æœ¬åŸå› ï¼š{e.__cause__}")  # æ˜¾ç¤ºåŸå§‹å¼‚å¸¸
```

### 6.3 å¼‚å¸¸é“¾çš„æœ€ä½³å®è·µ



**ğŸ¯ ä½¿ç”¨æŒ‡å¯¼åŸåˆ™**
```python
def process_data(data):
    """æ•°æ®å¤„ç†å‡½æ•°"""
    try:
#        # ç¬¬ä¸€æ­¥ï¼šéªŒè¯æ•°æ®
        validate_data(data)
        
#        # ç¬¬äºŒæ­¥ï¼šè½¬æ¢æ•°æ®
        transformed = transform_data(data)
        
#        # ç¬¬ä¸‰æ­¥ï¼šä¿å­˜æ•°æ®
        save_data(transformed)
        
    except ValidationError as e:
#        # éªŒè¯é”™è¯¯ï¼Œç›´æ¥ä¼ æ’­
        raise
    except TransformError as e:
#        # è½¬æ¢é”™è¯¯ï¼ŒåŒ…è£…åä¼ æ’­
        raise ProcessingError("æ•°æ®è½¬æ¢å¤±è´¥") from e
    except DatabaseError as e:
#        # æ•°æ®åº“é”™è¯¯ï¼ŒåŒ…è£…åä¼ æ’­
        raise ProcessingError("æ•°æ®ä¿å­˜å¤±è´¥") from e
```

---

## 7. ğŸ“¦ å¼‚å¸¸æ¨¡å—ç»„ç»‡



### 7.1 å¼‚å¸¸æ¨¡å—ç»“æ„è®¾è®¡



**ğŸ—ï¸ æ¨èçš„ç»„ç»‡æ–¹å¼**
```
project/
â”œâ”€â”€ exceptions/
â”‚   â”œâ”€â”€ __init__.py       # å¯¼å…¥æ‰€æœ‰å¼‚å¸¸
â”‚   â”œâ”€â”€ base.py           # åŸºç¡€å¼‚å¸¸ç±»
â”‚   â”œâ”€â”€ business.py       # ä¸šåŠ¡é€»è¾‘å¼‚å¸¸
â”‚   â”œâ”€â”€ network.py        # ç½‘ç»œç›¸å…³å¼‚å¸¸
â”‚   â””â”€â”€ validation.py     # éªŒè¯ç›¸å…³å¼‚å¸¸
```

**ğŸ“ base.py - åŸºç¡€å¼‚å¸¸**
```python
"""åŸºç¡€å¼‚å¸¸æ¨¡å—"""

class AppBaseError(Exception):
    """åº”ç”¨ç¨‹åºåŸºç¡€å¼‚å¸¸ç±»"""
    
    def __init__(self, message, error_code=None):
        super().__init__(message)
        self.error_code = error_code
        self.message = message

class ConfigurationError(AppBaseError):
    """é…ç½®ç›¸å…³é”™è¯¯"""
    pass

class ResourceError(AppBaseError):
    """èµ„æºç›¸å…³é”™è¯¯"""
    pass
```

### 7.2 æ¨¡å—åŒ–å¼‚å¸¸è®¾è®¡



**ğŸ“‹ business.py - ä¸šåŠ¡å¼‚å¸¸**
```python
"""ä¸šåŠ¡é€»è¾‘å¼‚å¸¸æ¨¡å—"""

from .base import AppBaseError

class BusinessError(AppBaseError):
    """ä¸šåŠ¡é€»è¾‘é”™è¯¯åŸºç±»"""
    pass

class UserError(BusinessError):
    """ç”¨æˆ·ç›¸å…³é”™è¯¯"""
    
    def __init__(self, user_id, message, error_code=None):
        super().__init__(message, error_code)
        self.user_id = user_id

class OrderError(BusinessError):
    """è®¢å•ç›¸å…³é”™è¯¯"""
    
    def __init__(self, order_id, message, error_code=None):
        super().__init__(message, error_code)
        self.order_id = order_id

# å…·ä½“çš„ä¸šåŠ¡å¼‚å¸¸

class InsufficientFundsError(UserError):
    """ä½™é¢ä¸è¶³"""
    
    def __init__(self, user_id, balance, required):
        self.balance = balance
        self.required = required
        message = f"ç”¨æˆ· {user_id} ä½™é¢ä¸è¶³ï¼šå½“å‰ {balance}ï¼Œéœ€è¦ {required}"
        super().__init__(user_id, message, "INSUFFICIENT_FUNDS")
```

### 7.3 å¼‚å¸¸æ¨¡å—åˆå§‹åŒ–



**ğŸ“ __init__.py - ç»Ÿä¸€å¯¼å…¥**
```python
"""å¼‚å¸¸æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶"""

# å¯¼å…¥åŸºç¡€å¼‚å¸¸

from .base import (
    AppBaseError,
    ConfigurationError,
    ResourceError,
)

# å¯¼å…¥ä¸šåŠ¡å¼‚å¸¸

from .business import (
    BusinessError,
    UserError,
    OrderError,
    InsufficientFundsError,
)

# å¯¼å…¥ç½‘ç»œå¼‚å¸¸

from .network import (
    NetworkError,
    APIError,
    TimeoutError,
)

# å®šä¹‰å…¬å¼€çš„å¼‚å¸¸åˆ—è¡¨

__all__ = [
    'AppBaseError',
    'ConfigurationError',
    'ResourceError',
    'BusinessError',
    'UserError',
    'OrderError',
    'InsufficientFundsError',
    'NetworkError',
    'APIError',
    'TimeoutError',
]
```

---

## 8. ğŸ“– å¼‚å¸¸æ–‡æ¡£ç¼–å†™



### 8.1 å¼‚å¸¸ç±»æ–‡æ¡£è§„èŒƒ



**ğŸ“ æ–‡æ¡£ç¼–å†™è¦ç´ **
- **ç±»çš„ç”¨é€”è¯´æ˜**ï¼šè¿™ä¸ªå¼‚å¸¸æ˜¯å¹²ä»€ä¹ˆçš„
- **å±æ€§è¯´æ˜**ï¼šå¼‚å¸¸åŒ…å«å“ªäº›é¢å¤–ä¿¡æ¯
- **ä½¿ç”¨ç¤ºä¾‹**ï¼šæ€ä¹ˆä½¿ç”¨è¿™ä¸ªå¼‚å¸¸
- **ç›¸å…³å¼‚å¸¸**ï¼šä¸å…¶ä»–å¼‚å¸¸çš„å…³ç³»

**âœ¨ æ–‡æ¡£æ¨¡æ¿ç¤ºä¾‹**
```python
class PaymentProcessingError(Exception):
    """æ”¯ä»˜å¤„ç†å¼‚å¸¸
    
    å½“æ”¯ä»˜å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚
    
    Attributes:
        transaction_id (str): äº¤æ˜“ID
        amount (Decimal): æ”¯ä»˜é‡‘é¢
        payment_method (str): æ”¯ä»˜æ–¹å¼ï¼ˆ'card', 'alipay', 'wechat'ç­‰ï¼‰
        error_code (str): é”™è¯¯ä»£ç 
        retry_count (int): å·²é‡è¯•æ¬¡æ•°
        
    Example:
        >>> try:
        ...     process_payment("12345", 100.00, "card")
        ... except PaymentProcessingError as e:
        ...     print(f"æ”¯ä»˜å¤±è´¥ï¼š{e}")
        ...     print(f"äº¤æ˜“IDï¼š{e.transaction_id}")
        
    See Also:
        InsufficientFundsError: ä½™é¢ä¸è¶³æ—¶çš„å¼‚å¸¸
        InvalidCardError: é“¶è¡Œå¡ä¿¡æ¯é”™è¯¯æ—¶çš„å¼‚å¸¸
    """
    
    def __init__(self, transaction_id, amount, payment_method, 
                 error_code, message=None, retry_count=0):
        self.transaction_id = transaction_id
        self.amount = amount
        self.payment_method = payment_method
        self.error_code = error_code
        self.retry_count = retry_count
        
        if message is None:
            message = f"æ”¯ä»˜å¤„ç†å¤±è´¥ï¼šäº¤æ˜“ {transaction_id}ï¼Œ" \
                     f"é‡‘é¢ {amount}ï¼Œæ–¹å¼ {payment_method}ï¼Œ" \
                     f"é”™è¯¯ {error_code}"
        
        super().__init__(message)
```

### 8.2 ä½¿ç”¨æŒ‡å—æ–‡æ¡£



**ğŸ“š ä½¿ç”¨æŒ‡å—ç¤ºä¾‹**
```python
"""
å¼‚å¸¸ä½¿ç”¨æŒ‡å—

# åŸºæœ¬ä½¿ç”¨



## 1. æŠ›å‡ºå¼‚å¸¸


```python
if user.balance < amount:
    raise InsufficientFundsError(
        user_id=user.id,
        balance=user.balance,
        required=amount
    )
```

## 2. æ•è·å¼‚å¸¸


```python
try:
    transfer_money(from_user, to_user, 100)
except InsufficientFundsError as e:
    logger.error(f"è½¬è´¦å¤±è´¥ï¼š{e}")
    notify_user(e.user_id, "ä½™é¢ä¸è¶³")
except UserError as e:
    logger.error(f"ç”¨æˆ·é”™è¯¯ï¼š{e}")
```

# å¼‚å¸¸å±‚æ¬¡



```
AppBaseError
â”œâ”€â”€ ConfigurationError
â”œâ”€â”€ ResourceError
â””â”€â”€ BusinessError
    â”œâ”€â”€ UserError
    â”‚   â”œâ”€â”€ InsufficientFundsError
    â”‚   â””â”€â”€ AccountFrozenError
    â””â”€â”€ OrderError
        â”œâ”€â”€ OrderNotFoundError
        â””â”€â”€ OrderCancelledError
```

# æœ€ä½³å®è·µ



1. **æ˜ç¡®çš„å¼‚å¸¸æ¶ˆæ¯**ï¼šè®©é”™è¯¯ä¿¡æ¯ä¸€ç›®äº†ç„¶
2. **åˆé€‚çš„å¼‚å¸¸ç±»å‹**ï¼šé€‰æ‹©æœ€åˆé€‚çš„çˆ¶ç±»
3. **æœ‰ç”¨çš„å±æ€§**ï¼šæä¾›è°ƒè¯•å’Œå¤„ç†éœ€è¦çš„ä¿¡æ¯
4. **å¼‚å¸¸é“¾**ï¼šä¿ç•™åŸå§‹é”™è¯¯ä¿¡æ¯
"""
```

### 8.3 APIæ–‡æ¡£ç”Ÿæˆ



**ğŸ”§ è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£é…ç½®**
```python
# sphinxé…ç½®ç¤ºä¾‹

# docs/conf.py


extensions = [
    'sphinx.ext.autodoc',
    'sphinx.ext.viewcode',
    'sphinx.ext.napoleon',
]

# Napoleonè®¾ç½®

napoleon_google_docstring = True
napoleon_numpy_docstring = True
napoleon_include_init_with_doc = False
napoleon_include_private_with_doc = False

# è‡ªåŠ¨æ–‡æ¡£è®¾ç½®

autodoc_default_options = {
    'members': True,
    'member-order': 'bysource',
    'special-members': '__init__',
    'undoc-members': True,
    'exclude-members': '__weakref__'
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ è‡ªå®šä¹‰å¼‚å¸¸æœ¬è´¨ï¼šç»§æ‰¿Exceptionç±»ï¼Œåˆ›å»ºä¸“ç”¨çš„é”™è¯¯ç±»å‹
ğŸ”¸ ç»§æ‰¿é€‰æ‹©åŸåˆ™ï¼šå¤§å¤šæ•°æƒ…å†µç»§æ‰¿Exceptionï¼Œç‰¹æ®Šæƒ…å†µç»§æ‰¿ç›¸å…³å†…ç½®å¼‚å¸¸
ğŸ”¸ å¼‚å¸¸ä¿¡æ¯è®¾è®¡ï¼šæ¸…æ™°æè¿°ã€åŒ…å«ä¸Šä¸‹æ–‡ã€ç»™å‡ºè§£å†³å»ºè®®
ğŸ”¸ å¼‚å¸¸å±æ€§æ·»åŠ ï¼šæºå¸¦æ›´å¤šé”™è¯¯ç›¸å…³ä¿¡æ¯ï¼Œä¾¿äºç²¾ç¡®å¤„ç†
ğŸ”¸ raiseè¯­å¥ä½¿ç”¨ï¼šæ­£ç¡®æŠ›å‡ºå¼‚å¸¸ï¼Œæ”¯æŒå¼‚å¸¸é“¾å’Œé‡æ–°æŠ›å‡º
ğŸ”¸ å¼‚å¸¸é“¾åˆ›å»ºï¼šä½¿ç”¨raise fromä¿ç•™å®Œæ•´é”™è¯¯å†å²
ğŸ”¸ æ¨¡å—åŒ–ç»„ç»‡ï¼šæŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡å¼‚å¸¸ï¼Œä¾¿äºç»´æŠ¤å’Œä½¿ç”¨
ğŸ”¸ æ–‡æ¡£ç¼–å†™ï¼šå®Œæ•´è®°å½•å¼‚å¸¸ç”¨é€”ã€å±æ€§å’Œä½¿ç”¨æ–¹æ³•
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ è‡ªå®šä¹‰å¼‚å¸¸çš„ä»·å€¼**
```
å¥½å¤„ï¼š
- é”™è¯¯ç±»å‹æ›´æ˜ç¡®ï¼šä¸€çœ‹å¼‚å¸¸åå°±çŸ¥é“é—®é¢˜ç±»å‹
- é”™è¯¯å¤„ç†æ›´ç²¾ç¡®ï¼šå¯ä»¥é’ˆå¯¹ä¸åŒå¼‚å¸¸åšä¸åŒå¤„ç†
- ä»£ç æ›´ä¸“ä¸šï¼šä½“ç°è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯
- è°ƒè¯•æ›´å®¹æ˜“ï¼šå¼‚å¸¸ä¿¡æ¯æ›´ä¸°å¯Œå’Œå‡†ç¡®

æ³¨æ„ï¼š
- ä¸è¦è¿‡åº¦è®¾è®¡ï¼šä¸éœ€è¦ä¸ºæ¯ä¸ªå°é”™è¯¯éƒ½åˆ›å»ºå¼‚å¸¸ç±»
- ä¿æŒç»§æ‰¿å…³ç³»æ¸…æ™°ï¼šä¾¿äºcatchæ—¶çš„å±‚æ¬¡å¤„ç†
- å¼‚å¸¸æ¶ˆæ¯è¦å‹å¥½ï¼šé¢å‘ä½¿ç”¨è€…è€Œä¸æ˜¯å¼€å‘è€…
```

**ğŸ”¹ å¼‚å¸¸è®¾è®¡åŸåˆ™**
```
è®¾è®¡è¦ç‚¹ï¼š
- å¼‚å¸¸åç§°è¦è§åçŸ¥æ„
- ç»§æ‰¿å…³ç³»è¦åˆç†
- å¼‚å¸¸æ¶ˆæ¯è¦æ¸…æ™°å‹å¥½
- å¼‚å¸¸å±æ€§è¦æœ‰å®é™…ä»·å€¼
- æ–‡æ¡£è¦å®Œæ•´å‡†ç¡®

é¿å…é—®é¢˜ï¼š
- å¼‚å¸¸åç§°ä¸æ¸…æ¥š
- ç»§æ‰¿å…³ç³»æ··ä¹±
- å¼‚å¸¸æ¶ˆæ¯è¿‡äºæŠ€æœ¯åŒ–
- å±æ€§è®¾è®¡ä¸åˆç†
- ç¼ºå°‘ä½¿ç”¨æ–‡æ¡£
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼



**ğŸ¯ ä½¿ç”¨åœºæ™¯åˆ¤æ–­**
```
é€‚åˆè‡ªå®šä¹‰å¼‚å¸¸ï¼š
âœ… ä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼ˆä½™é¢ä¸è¶³ã€æƒé™ä¸å¤Ÿï¼‰
âœ… å¤–éƒ¨æœåŠ¡è°ƒç”¨å¤±è´¥ï¼ˆAPIé”™è¯¯ã€ç½‘ç»œè¶…æ—¶ï¼‰
âœ… æ•°æ®éªŒè¯å¤±è´¥ï¼ˆæ ¼å¼é”™è¯¯ã€èŒƒå›´è¶…é™ï¼‰
âœ… é…ç½®é—®é¢˜ï¼ˆæ–‡ä»¶ç¼ºå¤±ã€æ ¼å¼é”™è¯¯ï¼‰

ä¸éœ€è¦è‡ªå®šä¹‰å¼‚å¸¸ï¼š
âŒ ç®€å•çš„å‚æ•°æ£€æŸ¥ï¼ˆç›´æ¥ç”¨ValueErrorï¼‰
âŒ ä¸€æ¬¡æ€§ä½¿ç”¨çš„é”™è¯¯
âŒ ä¸å†…ç½®å¼‚å¸¸åŠŸèƒ½é‡å¤
âŒ è¿‡äºç»†åˆ†çš„é”™è¯¯ç±»å‹
```

**ğŸ”§ ä»£ç ç»„ç»‡å»ºè®®**
```
é¡¹ç›®ç»“æ„ï¼š
- å°é¡¹ç›®ï¼šå•ä¸ªexceptions.pyæ–‡ä»¶
- ä¸­é¡¹ç›®ï¼šexceptionsåŒ…ï¼ŒæŒ‰åŠŸèƒ½åˆ†æ¨¡å—
- å¤§é¡¹ç›®ï¼šæ¯ä¸ªåº”ç”¨æ¨¡å—æœ‰è‡ªå·±çš„å¼‚å¸¸

å‘½åè§„èŒƒï¼š
- å¼‚å¸¸ç±»åä»¥Errorç»“å°¾
- ä½¿ç”¨é©¼å³°å‘½åæ³•
- åç§°è¦æè¿°æ€§å¼º

æ–‡æ¡£è¦æ±‚ï¼š
- ç±»æ–‡æ¡£è¯´æ˜ç”¨é€”
- å±æ€§æ–‡æ¡£è¯´æ˜å«ä¹‰
- æä¾›ä½¿ç”¨ç¤ºä¾‹
- è¯´æ˜ç›¸å…³å¼‚å¸¸
```

**ğŸ’¡ è°ƒè¯•å’Œç»´æŠ¤**
```
è°ƒè¯•æŠ€å·§ï¼š
- å¼‚å¸¸æ¶ˆæ¯åŒ…å«è¶³å¤Ÿä¸Šä¸‹æ–‡ä¿¡æ¯
- ä½¿ç”¨å¼‚å¸¸é“¾ä¿ç•™åŸå§‹é”™è¯¯
- æ·»åŠ æœ‰ç”¨çš„å¼‚å¸¸å±æ€§
- è®°å½•å¼‚å¸¸å‘ç”Ÿçš„æ—¥å¿—

ç»´æŠ¤è€ƒè™‘ï¼š
- å¼‚å¸¸ç±»è¦å‘åå…¼å®¹
- å¼‚å¸¸æ¶ˆæ¯å¯ä»¥å›½é™…åŒ–
- å¼‚å¸¸æ–‡æ¡£è¦åŠæ—¶æ›´æ–°
- å®šæœŸreviewå¼‚å¸¸è®¾è®¡çš„åˆç†æ€§
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- è‡ªå®šä¹‰å¼‚å¸¸è®©é”™è¯¯å¤„ç†æ›´ä¸“ä¸šå’Œç²¾ç¡®
- å¥½çš„å¼‚å¸¸è®¾è®¡èƒ½å¤§å¤§æé«˜ä»£ç è´¨é‡å’Œè°ƒè¯•æ•ˆç‡
- å¼‚å¸¸ä¸ä»…è¦èƒ½ç”¨ï¼Œè¿˜è¦å¥½ç”¨ã€æ˜“æ‡‚ã€å¥½ç»´æŠ¤
- æ–‡æ¡£å’Œç»„ç»‡ç»“æ„åŒæ ·é‡è¦ï¼Œä½“ç°ä¸“ä¸šæ°´å‡†