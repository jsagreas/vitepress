---
title: 7、Python语法基础规则
---
## 📚 目录

1. [代码结构与缩进规则](#1-代码结构与缩进规则)
2. [语句与表达式区别](#2-语句与表达式区别)
3. [行继续符与多行语句](#3-行继续符与多行语句)
4. [代码块概念](#4-代码块概念)
5. [语法错误类型](#5-语法错误类型)
6. [编码声明UTF-8](#6-编码声明utf-8)
7. [文件执行方式](#7-文件执行方式)
8. [脚本vs模块执行](#8-脚本vs模块执行)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🏗️ 代码结构与缩进规则


### 1.1 Python缩进的重要性


**🔸 什么是缩进？**

缩进就是**代码行前面的空白**。在其他编程语言中，缩进只是为了让代码看起来整齐，但在Python中，缩进**决定了代码的逻辑结构**。

```
简单理解：
- 缩进 = 代码的"层级关系"
- 同一层级的代码，缩进要相同
- 下一层级的代码，缩进要增加
```

**💡 缩进的作用**

```python
# 没有缩进 - 顶级代码
print("我是主程序")

# 有缩进 - 属于if语句内部
if True:
    print("我在if语句里面")
    print("我也在if语句里面")

# 回到没有缩进 - 又是主程序了
print("我又回到主程序了")
```

### 1.2 缩进规则详解


**🔸 标准缩进方式**

```
推荐方式：4个空格 ✅
可以用：1个Tab键 ✅
不推荐：2个空格、8个空格
绝对禁止：空格和Tab混用 ❌
```

**🔹 正确的缩进示例**

```python
# 第一层：主程序（0个空格）
name = "小明"

# 第二层：if语句内（4个空格）
if name == "小明":
    print("你好，小明")
    age = 18
    
    # 第三层：嵌套if语句内（8个空格）
    if age >= 18:
        print("你已经成年了")
        print("可以投票了")
    
    # 回到第二层（4个空格）
    print("if语句结束")

# 回到第一层（0个空格）
print("程序结束")
```

**⚠️ 错误的缩进示例**

```python
# 错误1：缩进不一致
if True:
    print("这行用4个空格")
   print("这行用3个空格")  # 错误！缩进不一致

# 错误2：不必要的缩进
print("主程序")
    print("这行不应该有缩进")  # 错误！

# 错误3：缺少缩进
if True:
print("这行应该有缩进")  # 错误！
```

### 1.3 缩进层级图示


```
代码层级结构图：

主程序级别
├── if语句
│   ├── if内的语句1
│   ├── if内的语句2
│   └── 嵌套的for循环
│       ├── for内的语句1
│       └── for内的语句2
└── 主程序继续

对应缩进：
0空格：主程序级别
4空格：if语句内
8空格：嵌套for循环内
```

---

## 2. 📝 语句与表达式区别


### 2.1 基本概念理解


**🔸 什么是表达式？**

表达式就是**能算出结果的代码**，就像数学公式一样。

```python
# 这些都是表达式（都能算出结果）
3 + 5          # 结果是8
"Hello"        # 结果是字符串"Hello"
len("Python")  # 结果是6
x > 10         # 结果是True或False
```

**🔸 什么是语句？**

语句就是**让Python做某件事的指令**，它不一定有返回值。

```python
# 这些都是语句（执行某个动作）
print("Hello")      # 打印动作
x = 10             # 赋值动作
if x > 5:          # 判断动作
    pass
import math        # 导入动作
```

### 2.2 区别对比表格


| 特征 | **表达式** | **语句** |
|------|------------|----------|
| **作用** | `计算并返回结果` | `执行某个动作` |
| **返回值** | `总是有返回值` | `不一定有返回值` |
| **使用方式** | `可以赋值给变量` | `直接执行` |
| **举例** | `3+5, len("abc")` | `print(), if语句` |

### 2.3 实际使用示例


**💡 表达式的使用**

```python
# 表达式可以赋值给变量
result = 3 + 5 * 2        # 表达式：3 + 5 * 2
name_length = len("Tom")   # 表达式：len("Tom")
is_adult = age >= 18       # 表达式：age >= 18

# 表达式可以作为函数参数
print(3 + 5)              # 3 + 5是表达式
print(len("Hello"))       # len("Hello")是表达式
```

**💡 语句的使用**

```python
# 语句执行动作，不能赋值
print("Hello")            # 语句：执行打印动作

# 这样是错误的！
# result = print("Hello")  # 错误！print语句没有返回值

# 控制语句
if x > 10:               # if语句：执行判断动作
    print("x很大")
    
for i in range(5):       # for语句：执行循环动作
    print(i)
```

### 2.4 混合使用场景


```python
# 在语句中使用表达式
age = 20
if age >= 18:           # age >= 18 是表达式，if是语句
    print("成年人")      # print是语句，"成年人"是表达式

# 表达式中嵌套表达式
result = (3 + 5) * (10 - 2)  # 整体是表达式，内部也有表达式

# 复杂示例
numbers = [1, 2, 3, 4, 5]
total = sum(x * 2 for x in numbers if x > 2)
#       ↑表达式: x * 2
#           ↑表达式: x in numbers  
#                    ↑表达式: x > 2
#   ↑整体是表达式
```

---

## 3. ➡️ 行继续符与多行语句


### 3.1 为什么需要多行语句


**🔸 问题场景**

有时候一行代码太长了，在屏幕上显示不完整，或者看起来很混乱：

```python
# 这行太长了，难以阅读
very_long_variable_name = some_function(parameter1, parameter2, parameter3, parameter4, parameter5)

# 数学计算太长
result = first_number + second_number + third_number + fourth_number + fifth_number + sixth_number
```

### 3.2 行继续符的使用


**🔸 反斜杠 `\` 继续符**

反斜杠告诉Python："这行还没写完，下一行继续"

```python
# 使用反斜杠分割长语句
total = 1 + 2 + 3 + 4 + 5 + \
        6 + 7 + 8 + 9 + 10

# 长字符串分割
message = "这是一个很长很长的消息，" + \
          "需要分成多行来写，" + \
          "这样更容易阅读"

# 长条件判断
if name == "小明" and age >= 18 and \
   city == "北京" and has_license == True:
    print("条件满足")
```

**⚠️ 使用注意事项**

```python
# 正确：反斜杠后面不能有任何字符（包括空格）
result = 1 + 2 + \
         3 + 4

# 错误：反斜杠后面有空格
result = 1 + 2 + \ 
         3 + 4      # 这会报错！
```

### 3.3 自然多行语句


**🔸 括号内的自然换行**

在括号 `()` 、方括号 `[]` 、花括号 `{}` 内，Python允许自然换行，不需要反斜杠。

```python
# 函数调用的自然换行
print("第一个参数",
      "第二个参数", 
      "第三个参数")

# 列表的自然换行
fruits = ["苹果",
          "香蕉", 
          "橙子",
          "葡萄"]

# 字典的自然换行
person = {
    "姓名": "小明",
    "年龄": 20,
    "城市": "北京"
}

# 复杂表达式的自然换行
result = (first_value + second_value +
          third_value + fourth_value)
```

### 3.4 多行语句的最佳实践


**📋 推荐的写法**

```python
# ✅ 好的多行写法
def calculate_total(
    price,
    quantity, 
    tax_rate,
    discount
):
    return (price * quantity * 
            (1 + tax_rate) * 
            (1 - discount))

# ✅ 清晰的条件判断
if (user.is_authenticated() and 
    user.has_permission('read') and
    document.is_published()):
    show_document()
```

**❌ 不推荐的写法**

```python
# ❌ 不一致的缩进
result = first_value + \
    second_value + \
        third_value  # 缩进不一致

# ❌ 不必要的换行
x = 5  # 这么短没必要换行
```

---

## 4. 📦 代码块概念


### 4.1 什么是代码块


**🔸 代码块的定义**

代码块就是**一组相关的代码语句**，它们被组织在一起，作为一个整体执行。

```
类比理解：
代码块 = 一个房间
- 房间里的所有东西都属于这个房间
- 房间有明确的边界（缩进）
- 可以有房间套房间（嵌套）
```

### 4.2 代码块的标识


**🔸 冒号 `:` 的作用**

冒号是代码块的"开始信号"，告诉Python："下面要开始一个新的代码块了"

```python
# 冒号后面就是代码块
if age >= 18:           # 冒号表示代码块开始
    print("成年人")      # 这行属于if代码块
    print("可以投票")    # 这行也属于if代码块

print("程序继续")       # 这行不属于if代码块
```

### 4.3 常见代码块类型


**🔸 条件代码块**

```python
# if代码块
score = 85
if score >= 90:
    print("优秀")
    grade = "A"
elif score >= 80:
    print("良好") 
    grade = "B"
else:
    print("需要努力")
    grade = "C"
```

**🔸 循环代码块**

```python
# for循环代码块
fruits = ["苹果", "香蕉", "橙子"]
for fruit in fruits:
    print(f"我喜欢{fruit}")
    print("真好吃")

# while循环代码块
count = 0
while count < 3:
    print(f"第{count + 1}次")
    count += 1
```

**🔸 函数代码块**

```python
# 函数代码块
def greet(name):
    print(f"你好，{name}")
    print("欢迎来到Python世界")
    return "问候完成"
```

### 4.4 代码块的嵌套


**🔹 嵌套结构图示**

```
代码块嵌套示例：

主程序
├── if代码块（第一层）
│   ├── 语句1
│   ├── for代码块（第二层）
│   │   ├── 语句2
│   │   └── if代码块（第三层）
│   │       └── 语句3
│   └── 语句4
└── 主程序继续
```

**💡 实际嵌套示例**

```python
# 多层嵌套的代码块
students = ["小明", "小红", "小刚"]
for student in students:                    # 第一层代码块
    print(f"检查学生：{student}")
    
    if len(student) >= 2:                   # 第二层代码块
        print("姓名长度合适")
        
        for char in student:                # 第三层代码块
            if char.isalpha():              # 第四层代码块
                print(f"'{char}'是字母")
            else:
                print(f"'{char}'不是字母")
    
    print(f"{student}检查完毕")
    print("---")
```

---

## 5. ⚠️ 语法错误类型


### 5.1 缩进相关错误


**🔸 IndentationError（缩进错误）**

```python
# 错误示例1：忘记缩进
if True:
print("应该缩进")  # IndentationError: expected an indented block

# 正确写法
if True:
    print("正确缩进")

# 错误示例2：缩进不一致  
if True:
    print("4个空格")
   print("3个空格")  # IndentationError: unindent does not match any outer indentation level

# 正确写法
if True:
    print("4个空格")
    print("4个空格")
```

### 5.2 语法结构错误


**🔸 SyntaxError（语法错误）**

```python
# 错误示例1：忘记冒号
if x > 5        # SyntaxError: invalid syntax
    print("大于5")

# 正确写法
if x > 5:
    print("大于5")

# 错误示例2：括号不匹配
print("Hello"   # SyntaxError: unexpected EOF while parsing

# 正确写法  
print("Hello")

# 错误示例3：字符串引号不匹配
message = "Hello'  # SyntaxError: EOL while scanning string literal

# 正确写法
message = "Hello"
```

### 5.3 名称相关错误


**🔸 NameError（名称错误）**

```python
# 错误示例：使用未定义的变量
print(username)  # NameError: name 'username' is not defined

# 正确写法：先定义再使用
username = "小明"
print(username)
```

### 5.4 类型相关错误


**🔸 TypeError（类型错误）**

```python
# 错误示例：类型不匹配的操作
result = "5" + 3  # TypeError: can only concatenate str (not "int") to str

# 正确写法：统一类型
result = "5" + "3"    # 字符串连接
# 或者
result = 5 + 3        # 数字相加
```

### 5.5 错误信息解读技巧


**📋 读懂错误信息**

```
错误信息的结构：
文件位置 → 错误行号 → 错误类型 → 错误描述

示例：
File "test.py", line 5, in <module>
    print("Hello"
                ^
SyntaxError: unexpected EOF while parsing

解读：
- 文件：test.py
- 行号：第5行  
- 错误类型：SyntaxError
- 描述：解析时遇到意外的文件结尾
```

---

## 6. 🌍 编码声明UTF-8


### 6.1 什么是编码声明


**🔸 编码的作用**

编码告诉计算机如何理解文件中的字符，特别是中文、日文等非英文字符。

```
简单理解：
编码 = 字符的"翻译规则"
UTF-8 = 一种能处理全世界文字的翻译规则
```

### 6.2 为什么需要UTF-8编码


**🔹 问题场景**

```python
# 如果没有正确的编码声明，这些中文可能显示为乱码
name = "张三"
message = "你好，世界！"
print(f"{name}说：{message}")
```

**💡 UTF-8的优势**

```
UTF-8编码的好处：
✅ 支持中文、英文、日文、韩文等所有语言
✅ 是Python 3的默认编码
✅ 互联网标准编码
✅ 兼容ASCII码
```

### 6.3 编码声明的写法


**🔸 标准编码声明**

```python
# 方法1：标准写法（推荐）
# -*- coding: utf-8 -*-

# 方法2：简化写法
# coding: utf-8

# 方法3：vim风格
# vim: set fileencoding=utf-8 :

# 写完编码声明后，就可以安全使用中文了
name = "李小明"
print(f"你好，{name}！")
```

**📝 编码声明位置规则**

```python
#!/usr/bin/env python3          # 第1行：shebang（可选）
# -*- coding: utf-8 -*-        # 第2行：编码声明
"""
这是模块的文档字符串
描述这个模块的作用
"""

# 这里开始写正式代码
import sys
name = "中文变量名也没问题"
```

### 6.4 常见编码问题


**⚠️ 编码错误示例**

```python
# 错误：没有编码声明，又使用了中文
print("你好")  # 可能报错：SyntaxError: Non-UTF-8 code starting with...

# 错误：编码声明位置不对
import sys
# -*- coding: utf-8 -*-  # 错误！应该在文件开头

# 正确：编码声明在文件开头
# -*- coding: utf-8 -*-
import sys
print("你好，世界！")
```

---

## 7. 🚀 文件执行方式


### 7.1 Python文件的执行方法


**🔸 方法一：命令行执行**

```bash
# 在终端/命令行中执行
python hello.py
python3 hello.py  # 在某些系统上需要用python3

# 示例文件：hello.py
print("Hello, World!")
print("这是我的第一个Python程序")
```

**🔸 方法二：交互式执行**

```python
# 在Python解释器中执行
>>> print("Hello")
Hello
>>> name = "小明"
>>> print(f"你好，{name}")
你好，小明
```

**🔸 方法三：IDE执行**

```
在开发环境中执行：
- PyCharm：点击绿色三角形运行按钮
- VS Code：按F5或右键"Run Python File"
- IDLE：按F5或菜单"Run → Run Module"
```

### 7.2 让Python文件可直接执行


**🔸 添加Shebang行**

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

print("这个文件可以直接执行")
```

**💡 在Linux/Mac上直接执行**

```bash
# 给文件执行权限
chmod +x hello.py

# 直接执行（不需要输入python）
./hello.py
```

### 7.3 文件执行过程图示


```
Python文件执行流程：

源代码文件(.py)
        ↓
    Python解释器
        ↓
    词法分析（分词）
        ↓
    语法分析（构建语法树）
        ↓
    编译成字节码(.pyc)
        ↓
    Python虚拟机执行
        ↓
    输出结果
```

---

## 8. 📜 脚本vs模块执行


### 8.1 基本概念区别


**🔸 脚本执行**

脚本就是**直接运行的Python文件**，像一个完整的程序。

```python
# hello_script.py - 这是一个脚本
print("程序开始")
name = input("请输入你的姓名：")
print(f"你好，{name}！")
print("程序结束")

# 执行方式：python hello_script.py
```

**🔸 模块执行**

模块就是**被其他Python文件导入使用的文件**，提供功能给别人用。

```python
# math_tools.py - 这是一个模块
def add(a, b):
    """加法函数"""
    return a + b

def multiply(a, b):
    """乘法函数"""
    return a * b

PI = 3.14159

# 这个文件主要是给别人import用的
```

### 8.2 `__name__` 的作用


**🔸 `__name__` 是什么**

`__name__` 是Python的一个特殊变量，告诉我们文件是如何被执行的。

```python
# test_name.py
print(f"当前 __name__ 的值是：{__name__}")

# 直接执行：python test_name.py
# 输出：当前 __name__ 的值是：__main__

# 被导入：import test_name  
# 输出：当前 __name__ 的值是：test_name
```

**🔸 `if __name__ == "__main__":` 的用途**

这个语句让文件既可以当脚本用，也可以当模块用。

```python
# calculator.py - 既是模块又是脚本
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

# 这部分只在直接执行时运行，导入时不运行
if __name__ == "__main__":
    print("计算器程序启动")
    x = float(input("输入第一个数字："))
    y = float(input("输入第二个数字："))
    
    print(f"{x} + {y} = {add(x, y)}")
    print(f"{x} - {y} = {subtract(x, y)}")
```

### 8.3 使用场景对比


**📋 脚本 vs 模块对比表**

| 特征 | **脚本** | **模块** |
|------|----------|----------|
| **主要用途** | `直接运行，完成特定任务` | `提供功能给其他文件使用` |
| **执行方式** | `python script.py` | `import module` |
| **代码特点** | `有主程序逻辑` | `主要是函数和类的定义` |
| **典型内容** | `用户交互、文件处理等` | `工具函数、数据结构等` |

### 8.4 实际应用示例


**💡 纯脚本文件**

```python
# backup.py - 纯脚本
import shutil
import datetime

# 脚本功能：备份文件
source = input("请输入要备份的文件路径：")
timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
backup_name = f"backup_{timestamp}.txt"

shutil.copy(source, backup_name)
print(f"备份完成：{backup_name}")
```

**💡 纯模块文件**

```python
# utils.py - 纯模块
def format_time(timestamp):
    """格式化时间戳"""
    return timestamp.strftime("%Y-%m-%d %H:%M:%S")

def validate_email(email):
    """验证邮箱格式"""
    return "@" in email and "." in email

class Logger:
    """简单的日志记录器"""
    def __init__(self, filename):
        self.filename = filename
    
    def log(self, message):
        with open(self.filename, "a") as f:
            f.write(f"{message}\n")
```

**💡 混合文件（推荐方式）**

```python
# file_manager.py - 既是模块又是脚本
import os

def list_files(directory):
    """列出目录中的所有文件"""
    return [f for f in os.listdir(directory) if os.path.isfile(os.path.join(directory, f))]

def file_count(directory):
    """统计目录中的文件数量"""
    return len(list_files(directory))

# 作为脚本运行时的功能
if __name__ == "__main__":
    print("文件管理器")
    dir_path = input("请输入目录路径：")
    
    if os.path.exists(dir_path):
        files = list_files(dir_path)
        print(f"找到 {len(files)} 个文件：")
        for file in files:
            print(f"  - {file}")
    else:
        print("目录不存在")

# 作为模块使用：
# import file_manager
# files = file_manager.list_files("/home/user")
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 缩进规则：Python用缩进表示代码层级，必须一致
🔸 语句vs表达式：语句执行动作，表达式计算结果
🔸 代码块：用冒号开始，用缩进组织的代码组
🔸 多行语句：用反斜杠或括号实现代码换行
🔸 编码声明：文件开头声明UTF-8支持中文
🔸 执行方式：脚本直接运行，模块被导入使用
```

### 9.2 关键理解要点


**🔹 缩进是语法，不是格式**
```
重点理解：
- 缩进决定代码的逻辑结构
- 缩进错误会导致程序无法运行
- 同一级别的代码必须有相同的缩进
```

**🔹 冒号开启代码块**
```
记忆方法：
- 看到冒号，下一行就要缩进
- if, for, while, def, class后面都有冒号
- 冒号 = "开始"的信号
```

**🔹 `__name__` 变量的作用**
```
实用技巧：
- 直接运行时：__name__ == "__main__"
- 被导入时：__name__ == 模块名
- 用这个特性让文件既能独立运行，又能被导入
```

### 9.3 实际编程建议


**📝 良好的编程习惯**

```python
# ✅ 推荐的文件开头格式
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
模块功能描述
"""

def main():
    """主函数"""
    # 主程序逻辑
    pass

if __name__ == "__main__":
    main()
```

**⚠️ 常见错误避免**

```
避免的错误：
❌ 空格和Tab混用
❌ 忘记加冒号
❌ 缩进不一致
❌ 使用中文但没有编码声明
❌ 在全局空间写太多代码
```

**💡 调试技巧**

```python
# 调试缩进问题：显示空白字符
# 在编辑器中开启"显示空白字符"功能

# 调试执行流程：添加打印语句
print(f"当前执行：{__name__}")
print("这里执行了")

# 检查语法：使用Python检查
# python -m py_compile filename.py
```

### 9.4 学习路径建议


```
学习顺序：
1️⃣ 先掌握缩进规则
2️⃣ 理解语句和表达式的区别  
3️⃣ 学会使用代码块
4️⃣ 掌握文件执行方式
5️⃣ 理解脚本和模块的区别

实践建议：
🔸 多写小程序练习缩进
🔸 尝试编写既能运行又能导入的文件
🔸 养成规范的代码格式习惯
🔸 使用好的代码编辑器帮助检查语法
```

**核心记忆口诀**：
- 缩进决定层级，冒号开启代码块
- 语句执行动作，表达式算结果  
- UTF-8支持中文，反斜杠连接长行
- `__main__`是直接运行，模块名是被导入