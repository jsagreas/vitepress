---
title: 1、函数定义与调用
---
## 📚 目录


1. [函数基础概念](#1-函数基础概念)
2. [函数定义语法](#2-函数定义语法)
3. [函数调用机制](#3-函数调用机制)
4. [函数参数详解](#4-函数参数详解)
5. [默认参数设置](#5-默认参数设置)
6. [可变参数详解](#6-可变参数详解)
7. [参数解包操作](#7-参数解包操作)
8. [仅限关键字参数](#8-仅限关键字参数)
9. [仅限位置参数](#9-仅限位置参数)
10. [核心要点总结](#10-核心要点总结)

---

# 🎯 **学习路径导航**


**前置知识**：Python基础语法、变量和数据类型 → **当前内容**：函数定义与调用 → **后续学习**：函数高级特性、装饰器

⏱️ **预计学习时间**：本章预计45分钟 | 实践练习30分钟

🏷️ **知识标签**：`#核心概念` `#必掌握` `#编程基础`

---

## 1. 🎪 函数基础概念



### 1.1 什么是函数



**🔸 生活化理解**
```
函数就像生活中的"万能工具箱"：
• 榨汁机：把水果(输入) → 果汁(输出)
• 洗衣机：把脏衣服(输入) → 干净衣服(输出)  
• 计算器：把数字(输入) → 计算结果(输出)
```

**💡 编程中的函数**
函数是一段**可重复使用的代码块**，它接收输入（参数），处理数据，然后返回结果。

### 1.2 为什么需要函数



**🚫 没有函数的烦恼**
```python
# 计算圆面积 - 重复代码很多

radius1 = 5
area1 = 3.14159 * radius1 * radius1
print(f"圆1面积: {area1}")

radius2 = 8  
area2 = 3.14159 * radius2 * radius2
print(f"圆2面积: {area2}")

radius3 = 12
area3 = 3.14159 * radius3 * radius3  
print(f"圆3面积: {area3}")
```

**✅ 使用函数的优雅**
```python
def calculate_circle_area(radius):
    """计算圆的面积"""
    return 3.14159 * radius * radius

# 简洁明了

print(f"圆1面积: {calculate_circle_area(5)}")
print(f"圆2面积: {calculate_circle_area(8)}")
print(f"圆3面积: {calculate_circle_area(12)}")
```

### 1.3 函数的核心作用



| **作用** | **说明** | **类比** |
|---------|---------|---------|
| **代码复用** | 写一次，用多次 | 制作模具，批量生产 |
| **逻辑分离** | 把复杂问题分解 | 流水线作业，分工明确 |
| **易于维护** | 修改一处，全部生效 | 总开关控制，统一管理 |
| **提高可读性** | 代码更清晰易懂 | 说明书分章节，层次分明 |

---

## 2. 🔧 函数定义语法



### 2.1 基本定义语法



**📝 标准语法格式**
```python
def 函数名(参数列表):
    """函数说明文档"""
    函数体
    return 返回值  # 可选
```

**🎯 语法要点解析**
- **`def`关键字**：告诉Python"我要定义一个函数"
- **函数名**：给函数起个好记的名字（命名规则同变量）
- **圆括号()**：必须有，里面放参数
- **冒号:**：语法要求，不能省略
- **缩进**：函数体必须缩进（通常4个空格）

### 2.2 简单函数示例



**👋 无参数函数**
```python
def say_hello():
    """打招呼函数 - 不需要任何输入"""
    print("你好！欢迎学习Python函数")

# 调用函数

say_hello()  # 输出: 你好！欢迎学习Python函数
```

**🧮 有参数函数**
```python
def add_numbers(a, b):
    """加法函数 - 需要两个数字作为输入"""
    result = a + b
    return result

# 调用函数

sum_result = add_numbers(10, 20)
print(f"10 + 20 = {sum_result}")  # 输出: 10 + 20 = 30
```

### 2.3 函数命名最佳实践



**✅ 好的函数名示例**
```python
def calculate_age(birth_year):          # 动词开头，描述功能
    pass

def is_valid_email(email):              # 布尔函数用is开头
    pass

def get_user_info(user_id):             # 获取数据用get开头
    pass

def convert_celsius_to_fahrenheit(c):   # 转换用convert
    pass
```

**❌ 避免的命名方式**
```python
def a():           # 太简短，不知道干什么
def data():        # 太模糊
def DoSomething(): # 首字母大写（违反Python规范）
def get-name():    # 不能用连字符
```

---

## 3. 🔄 函数调用机制



### 3.1 函数调用的内部过程



**🎬 调用过程详解**
```
当你调用 result = add_numbers(5, 3) 时：

1. 🎯 Python找到函数定义
2. 📦 创建新的执行空间
3. 📥 把参数值传给函数（5给a，3给b）
4. ▶️ 执行函数内部代码
5. 📤 返回结果给调用者
6. 🧹 清理函数执行空间
```

### 3.2 参数传递机制



**📋 Python的参数传递特点**
Python使用**"传对象引用"**的方式，这听起来复杂，其实很简单：

```python
def modify_list(my_list):
    """修改列表内容"""
    my_list.append("新元素")
    print(f"函数内部: {my_list}")

def modify_number(my_num):
    """尝试修改数字"""
    my_num = my_num + 10
    print(f"函数内部: {my_num}")

# 测试列表传递

original_list = ["a", "b", "c"]
modify_list(original_list)
print(f"原始列表: {original_list}")  # 列表被修改了！

# 测试数字传递  

original_number = 5
modify_number(original_number)
print(f"原始数字: {original_number}")  # 数字没有变化
```

**💡 简单记忆方法**
- **可变对象**（列表、字典）：函数内修改会影响原对象
- **不可变对象**（数字、字符串）：函数内修改不影响原对象

### 3.3 返回值机制



**📤 return语句详解**
```python
def divide_numbers(a, b):
    """除法函数 - 演示不同返回情况"""
    if b == 0:
        return None  # 返回None表示出错
    
    if a < b:
        return 0, f"{a}小于{b}"  # 返回多个值
    
    return a / b  # 返回单个值

# 测试不同情况

result1 = divide_numbers(10, 2)   # 返回: 5.0
result2 = divide_numbers(3, 7)    # 返回: (0, '3小于7')  
result3 = divide_numbers(8, 0)    # 返回: None
```

**🎯 return重要特点**
- 函数遇到`return`立即结束
- 没有`return`的函数默认返回`None`
- 可以返回任何类型的数据
- 可以同时返回多个值（自动打包成元组）

---

## 4. 📋 函数参数详解



### 4.1 位置参数（必需参数）



**🎯 最基础的参数类型**
位置参数就是按**顺序**传递的参数，必须提供，不能缺少。

```python
def introduce_person(name, age, city):
    """介绍一个人 - 三个位置参数"""
    print(f"大家好，我是{name}，今年{age}岁，来自{city}")

# 必须按顺序传递参数

introduce_person("小明", 25, "北京")  
# 输出: 大家好，我是小明，今年25岁，来自北京


# 顺序错了就会出问题

introduce_person(25, "小明", "北京")  
# 输出: 大家好，我是25，今年小明岁，来自北京 (明显错误)

```

### 4.2 关键字参数



**🏷️ 指名道姓的参数传递**
关键字参数允许你**指定参数名**来传递值，顺序就不重要了。

```python
def order_coffee(size, coffee_type, milk, sugar):
    """点咖啡函数"""
    print(f"您点的是{size}杯{coffee_type}")
    print(f"加奶: {'是' if milk else '否'}")
    print(f"加糖: {'是' if sugar else '否'}")

# 使用关键字参数，顺序随意

order_coffee(
    coffee_type="拿铁",
    size="大",  
    sugar=True,
    milk=True
)

# 混合使用位置参数和关键字参数

order_coffee("中", coffee_type="美式", milk=False, sugar=True)
```

**⚠️ 混合使用的规则**
- 位置参数必须在关键字参数**前面**
- 同一个参数不能既用位置又用关键字传递

```python
# ✅ 正确用法

order_coffee("大", coffee_type="拿铁", milk=True, sugar=False)

# ❌ 错误用法

order_coffee(coffee_type="拿铁", "大", milk=True, sugar=False)
# 关键字参数后面不能有位置参数

```

---

## 5. ⚙️ 默认参数设置



### 5.1 默认参数的基本概念



**🎯 什么是默认参数**
默认参数就是给参数设定一个**"默认值"**，调用时如果不提供这个参数，就使用默认值。

```python
def greet_user(name, greeting="你好"):
    """问候用户 - greeting有默认值"""
    print(f"{greeting}, {name}!")

# 使用默认问候语

greet_user("小张")  # 输出: 你好, 小张!

# 自定义问候语

greet_user("小李", "早上好")  # 输出: 早上好, 小李!
greet_user("小王", greeting="晚上好")  # 输出: 晚上好, 小王!
```

### 5.2 默认参数的实际应用



**💼 实用示例：文件读取函数**
```python
def read_file(filename, encoding="utf-8", max_lines=None):
    """读取文件函数 - 多个默认参数"""
    print(f"正在读取文件: {filename}")
    print(f"使用编码: {encoding}")
    
    if max_lines:
        print(f"最多读取: {max_lines}行")
    else:
        print("读取全部内容")

# 各种调用方式

read_file("data.txt")                    # 全用默认值
read_file("data.txt", "gbk")             # 自定义编码
read_file("data.txt", max_lines=100)     # 限制行数
read_file("data.txt", "utf-8", 50)       # 全部自定义
```

### 5.3 默认参数的注意事项



**⚠️ 可变对象作为默认值的陷阱**
```python
# ❌ 危险的写法

def add_item(item, item_list=[]):
    """添加物品到列表 - 错误示例"""
    item_list.append(item)
    return item_list

# 看似正常的调用

result1 = add_item("苹果")
print(result1)  # ['苹果']

result2 = add_item("香蕉")  
print(result2)  # ['苹果', '香蕉'] ← 竟然有上次的苹果！

# ✅ 正确的写法

def add_item_correct(item, item_list=None):
    """添加物品到列表 - 正确示例"""
    if item_list is None:
        item_list = []  # 每次都创建新列表
    item_list.append(item)
    return item_list
```

**🔑 默认参数最佳实践**
- 只用**不可变对象**（数字、字符串、None）作默认值
- 需要可变对象时，用`None`作默认值，在函数内创建

---

## 6. 🎁 可变参数详解



### 6.1 *args - 可变位置参数



**🎯 什么是*args**
`*args`让函数能接收**任意数量**的位置参数，就像一个能装无限个东西的袋子。

```python
def calculate_sum(*numbers):
    """计算任意多个数字的和"""
    print(f"收到了 {len(numbers)} 个数字")
    print(f"这些数字是: {numbers}")
    
    total = 0
    for num in numbers:
        total += num
    return total

# 传入不同数量的参数

print(calculate_sum(1, 2, 3))           # 6
print(calculate_sum(10, 20, 30, 40))    # 100  
print(calculate_sum(5))                 # 5
print(calculate_sum())                  # 0
```

**💡 *args的工作原理**
- `*args`会把所有位置参数收集到一个**元组**里
- 在函数内部，`args`就是一个普通元组
- 参数名不一定叫`args`，`*`号才是关键

### 6.2 **kwargs - 可变关键字参数



**🏷️ 什么是**kwargs**
`**kwargs`让函数能接收**任意数量**的关键字参数，像一个能存放各种标签物品的仓库。

```python
def create_profile(name, **details):
    """创建用户档案"""
    print(f"正在为 {name} 创建档案")
    print("详细信息:")
    
    for key, value in details.items():
        print(f"  {key}: {value}")

# 传入不同的关键字参数

create_profile("小明", age=25, city="上海", hobby="编程")
create_profile("小红", age=30, job="设计师", email="xiaohong@email.com")
```

**💡 **kwargs的工作原理**
- `**kwargs`会把所有关键字参数收集到一个**字典**里
- 在函数内部，`kwargs`就是一个普通字典
- 参数名不一定叫`kwargs`，`**`号才是关键

### 6.3 混合使用可变参数



**🎪 完整的参数组合**
```python
def flexible_function(required_arg, default_arg="默认值", *args, **kwargs):
    """演示各种参数类型的组合"""
    print(f"必需参数: {required_arg}")
    print(f"默认参数: {default_arg}")
    print(f"额外位置参数: {args}")
    print(f"额外关键字参数: {kwargs}")

# 测试调用

flexible_function(
    "必须有的",
    "自定义默认值", 
    "额外1", "额外2", "额外3",
    name="小明", age=25, city="北京"
)
```

**📋 参数顺序规则**
函数定义时，参数必须按以下顺序：
1. 位置参数
2. 默认参数  
3. `*args`
4. `**kwargs`

---

## 7. 📦 参数解包操作



### 7.1 什么是参数解包



**🎯 解包的核心概念**
参数解包是把**集合类型**（列表、元组、字典）的数据"拆开"，分别传给函数的各个参数。

```python
def introduce(name, age, city):
    """自我介绍函数"""
    print(f"我是{name}，{age}岁，来自{city}")

# 有一个包含信息的列表

person_info = ["小明", 25, "北京"]

# 不解包的麻烦写法

introduce(person_info[0], person_info[1], person_info[2])

# 解包的优雅写法

introduce(*person_info)  # 一个*号解包列表/元组
```

### 7.2 *号解包 - 位置参数解包



**📋 列表/元组解包示例**
```python
def calculate_rectangle_area(length, width):
    """计算长方形面积"""
    return length * width

# 准备数据

measurements = [10, 5]        # 列表
dimensions = (8, 6)           # 元组

# 解包传参

area1 = calculate_rectangle_area(*measurements)  # 相当于(10, 5)
area2 = calculate_rectangle_area(*dimensions)    # 相当于(8, 6)

print(f"面积1: {area1}")  # 50
print(f"面积2: {area2}")  # 48
```

**🎁 实际应用场景**
```python
def find_max_min(*numbers):
    """找出最大值和最小值"""
    return max(numbers), min(numbers)

# 有一堆成绩数据

scores = [85, 92, 78, 96, 88]

# 解包传入所有成绩

max_score, min_score = find_max_min(*scores)
print(f"最高分: {max_score}, 最低分: {min_score}")
```

### 7.3 **号解包 - 关键字参数解包



**🏷️ 字典解包示例**
```python
def send_email(to, subject, content, cc=None):
    """发送邮件函数"""
    print(f"收件人: {to}")
    print(f"主题: {subject}")  
    print(f"内容: {content}")
    if cc:
        print(f"抄送: {cc}")

# 准备邮件信息字典

email_data = {
    "to": "friend@email.com",
    "subject": "Python学习心得", 
    "content": "今天学了函数，太有趣了！",
    "cc": "teacher@email.com"
}

# 解包传参

send_email(**email_data)  # 两个*号解包字典
```

### 7.4 解包的高级用法



**🎪 混合解包示例**
```python
def complex_function(a, b, c=10, *args, **kwargs):
    """复杂参数函数"""
    print(f"a={a}, b={b}, c={c}")
    print(f"args={args}")  
    print(f"kwargs={kwargs}")

# 准备各种数据

numbers = [1, 2]          # 前两个位置参数
extra_numbers = [3, 4, 5] # 额外位置参数  
options = {"debug": True, "verbose": False}  # 关键字参数

# 混合解包

complex_function(*numbers, c=20, *extra_numbers, **options)
```

---

## 8. 🔒 仅限关键字参数



### 8.1 什么是仅限关键字参数



**🎯 Python 3的新特性**
仅限关键字参数是指**只能通过关键字**传递的参数，不能用位置方式传递。使用`*`号来分隔。

```python
def create_user(name, *, email, age, active=True):
    """创建用户 - email和age必须用关键字传递"""
    print(f"用户名: {name}")
    print(f"邮箱: {email}")
    print(f"年龄: {age}")
    print(f"状态: {'激活' if active else '未激活'}")

# ✅ 正确调用方式

create_user("小明", email="ming@email.com", age=25)
create_user("小红", age=30, email="hong@email.com", active=False)

# ❌ 错误调用方式

# create_user("小明", "ming@email.com", 25)  # 报错！

```

### 8.2 为什么需要仅限关键字参数



**💡 提高代码可读性**
```python
# 不清楚每个参数的含义

connect_database("localhost", 5432, "mydb", "user", "pass", True, 30)

# 使用仅限关键字参数后

def connect_database(host, *, port, database, username, password, ssl=False, timeout=30):
    """连接数据库"""
    pass

# 现在调用时意图很清楚

connect_database(
    "localhost",
    port=5432,
    database="mydb", 
    username="user",
    password="pass",
    ssl=True,
    timeout=30
)
```

### 8.3 仅限关键字参数的应用场景



**🛡️ 防止参数传递错误**
```python
def transfer_money(from_account, to_account, *, amount, confirm=False):
    """转账函数 - 金额必须明确指定"""
    if not confirm:
        print("请确认转账操作")
        return False
        
    print(f"从账户 {from_account} 向账户 {to_account} 转账 {amount} 元")
    return True

# 必须明确指定金额和确认

transfer_money("账户A", "账户B", amount=1000, confirm=True)

# 防止意外的位置参数传递

# transfer_money("账户A", "账户B", 1000, True)  # 这样会报错

```

---

## 9. 📍 仅限位置参数



### 9.1 Python 3.8的新特性



**🎯 什么是仅限位置参数**
仅限位置参数是指**只能通过位置**传递的参数，不能使用关键字。使用`/`号来分隔。

```python
def calculate_power(base, exponent, /):
    """计算幂次 - 只能用位置参数"""
    return base ** exponent

# ✅ 正确调用方式

result1 = calculate_power(2, 3)    # 2的3次方 = 8
result2 = calculate_power(5, 2)    # 5的2次方 = 25

# ❌ 错误调用方式  

# calculate_power(base=2, exponent=3)  # 报错！

# calculate_power(2, exponent=3)       # 报错！

```

### 9.2 仅限位置参数的应用场景



**🔧 保护内部实现**
```python
def process_data(data, func, /, *, debug=False):
    """处理数据函数
    data和func只能用位置传递，debug只能用关键字传递
    """
    if debug:
        print(f"正在处理数据: {data}")
        
    result = func(data)
    
    if debug:
        print(f"处理结果: {result}")
        
    return result

# 使用示例

numbers = [1, 2, 3, 4, 5]
doubled = process_data(numbers, lambda x: [i*2 for i in x], debug=True)
```

### 9.3 完整的参数类型组合



**🎪 所有参数类型的终极示例**
```python
def ultimate_function(pos_only, /, pos_or_kw, *, kw_only, **kwargs):
    """展示所有参数类型
    pos_only: 仅限位置参数
    pos_or_kw: 位置或关键字参数  
    kw_only: 仅限关键字参数
    **kwargs: 可变关键字参数
    """
    print(f"仅限位置: {pos_only}")
    print(f"位置或关键字: {pos_or_kw}")
    print(f"仅限关键字: {kw_only}")
    print(f"额外关键字: {kwargs}")

# 调用示例

ultimate_function(
    "只能位置",                    # pos_only
    pos_or_kw="可位置可关键字",     # pos_or_kw  
    kw_only="只能关键字",          # kw_only
    extra1="额外参数1",           # **kwargs
    extra2="额外参数2"            # **kwargs
)
```

---

## 10. 📋 核心要点总结



### 10.1 必须掌握的核心概念



```
🔸 函数定义：用def关键字创建可重用的代码块
🔸 参数传递：位置参数按顺序，关键字参数指名传递
🔸 默认参数：提供默认值，调用时可省略
🔸 可变参数：*args收集位置参数，**kwargs收集关键字参数
🔸 参数解包：用*和**把集合数据拆开传给函数
🔸 参数限制：/限制位置传递，*限制关键字传递
```

### 10.2 关键理解要点



**🔹 函数就是工具箱**
```
把函数想象成专用工具：
- 榨汁机：输入水果，输出果汁
- 计算器：输入数字，输出结果  
- 翻译器：输入中文，输出英文

每个函数都有明确的输入和输出
```

**🔹 参数类型选择指南**
```
位置参数：参数含义明确，顺序固定
关键字参数：增加代码可读性
默认参数：常用值作默认，特殊情况可覆盖
可变参数：参数数量不确定时使用
```

### 10.3 实际应用场景



**🎯 日常编程应用**
- **数据处理**：编写处理文件、计算统计的函数
- **用户交互**：创建获取输入、显示结果的函数
- **代码组织**：把重复逻辑提取成函数
- **API设计**：设计清晰易用的函数接口

**🛠️ 最佳实践建议**
```
函数设计原则：
- 单一职责：一个函数只做一件事
- 命名清晰：函数名要能表达功能
- 参数合理：不要超过5个参数
- 文档完整：写好函数说明

参数使用技巧：
- 必需参数放前面
- 可选参数用默认值
- 可变参数要慎用
- 关键字参数增可读性
```

### 10.4 学习检查清单



**📝 基础技能检查**
- [ ] 能够定义简单函数
- [ ] 理解位置参数和关键字参数的区别
- [ ] 会使用默认参数
- [ ] 掌握*args和**kwargs的用法
- [ ] 能进行参数解包操作

**🚀 进阶技能检查** 
- [ ] 理解仅限关键字参数的作用
- [ ] 了解仅限位置参数的使用场景
- [ ] 能设计清晰的函数接口
- [ ] 会避免默认参数的常见陷阱

**🎯 实践练习建议**
```
动手练习：
1. 写一个计算器函数，支持多种运算
2. 创建用户管理函数，使用各种参数类型
3. 实现文件处理函数，体验参数解包
4. 设计配置函数，练习仅限关键字参数
```

**🔑 核心记忆口诀**
> 函数定义用def，参数传递有门道
> 位置顺序要记牢，关键字参数更明了
> 默认参数很方便，可变参数装得多
> 解包操作一个星，两星解包字典好

**💡 学习路线建议**
- **下一步学习**：函数作用域、lambda表达式
- **相关主题**：装饰器、生成器、闭包  
- **实践项目**：简单计算器、文本处理工具