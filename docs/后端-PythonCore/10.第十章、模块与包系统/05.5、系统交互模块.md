---
title: 5ã€ç³»ç»Ÿäº¤äº’æ¨¡å—
---
## ğŸ“š ç›®å½•

1. [æ¨¡å—æ¦‚è¿°ä¸åº”ç”¨åœºæ™¯](#1-æ¨¡å—æ¦‚è¿°ä¸åº”ç”¨åœºæ™¯)
2. [sysæ¨¡å— - ç³»ç»Ÿå‚æ•°ä¸åŠŸèƒ½](#2-sysæ¨¡å—-ç³»ç»Ÿå‚æ•°ä¸åŠŸèƒ½)
3. [osæ¨¡å— - æ“ä½œç³»ç»Ÿæ¥å£](#3-osæ¨¡å—-æ“ä½œç³»ç»Ÿæ¥å£)
4. [platformæ¨¡å— - å¹³å°è¯†åˆ«](#4-platformæ¨¡å—-å¹³å°è¯†åˆ«)
5. [subprocessæ¨¡å— - å­è¿›ç¨‹ç®¡ç†](#5-subprocessæ¨¡å—-å­è¿›ç¨‹ç®¡ç†)
6. [argparseæ¨¡å— - å‘½ä»¤è¡Œå‚æ•°è§£æ](#6-argparseæ¨¡å—-å‘½ä»¤è¡Œå‚æ•°è§£æ)
7. [getoptæ¨¡å— - ç®€å•å‚æ•°è§£æ](#7-getoptæ¨¡å—-ç®€å•å‚æ•°è§£æ)
8. [ç¯å¢ƒå˜é‡å¤„ç†](#8-ç¯å¢ƒå˜é‡å¤„ç†)
9. [ç³»ç»Ÿä¿¡æ¯è·å–](#9-ç³»ç»Ÿä¿¡æ¯è·å–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŸ æ¨¡å—æ¦‚è¿°ä¸åº”ç”¨åœºæ™¯


### 1.1 ä»€ä¹ˆæ˜¯ç³»ç»Ÿäº¤äº’æ¨¡å—


**ç®€å•ç†è§£**ï¼šå°±åƒä½ çš„Pythonç¨‹åºéœ€è¦å’Œç”µè„‘"å¯¹è¯"ä¸€æ ·ï¼Œç³»ç»Ÿäº¤äº’æ¨¡å—å°±æ˜¯è¿™ä¸ª"ç¿»è¯‘å®˜"ã€‚

```
ç°å®æ¯”å–»ï¼š
ä½ ï¼ˆPythonç¨‹åºï¼‰ â†â†’ ç¿»è¯‘å®˜ï¼ˆç³»ç»Ÿæ¨¡å—ï¼‰ â†â†’ ç”µè„‘ç³»ç»Ÿ

å…·ä½“ä½œç”¨ï¼š
â€¢ è·å–ç³»ç»Ÿä¿¡æ¯ï¼ˆç”µè„‘é…ç½®ã€æ“ä½œç³»ç»Ÿç‰ˆæœ¬ç­‰ï¼‰
â€¢ æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆè¿è¡Œå…¶ä»–ç¨‹åºã€å¤„ç†æ–‡ä»¶ç­‰ï¼‰
â€¢ å¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼ˆè®©ç¨‹åºæ›´çµæ´»ï¼‰
â€¢ ç®¡ç†ç¯å¢ƒå˜é‡ï¼ˆç¨‹åºè¿è¡Œç¯å¢ƒè®¾ç½®ï¼‰
```

### 1.2 æ ¸å¿ƒæ¨¡å—åŠŸèƒ½å¯¹æ¯”


| æ¨¡å—å | **ä¸»è¦ç”¨é€”** | **å…¸å‹åœºæ™¯** | **éš¾åº¦** |
|---------|-------------|-------------|----------|
| ğŸ–¥ï¸ **sys** | `Pythonè§£é‡Šå™¨ç›¸å…³` | `è·å–å‘½ä»¤è¡Œå‚æ•°ã€é€€å‡ºç¨‹åº` | `ğŸŒ± å…¥é—¨` |
| ğŸ“ **os** | `æ“ä½œç³»ç»ŸåŠŸèƒ½` | `æ–‡ä»¶æ“ä½œã€ç›®å½•ç®¡ç†` | `ğŸŒ¿ è¿›é˜¶` |
| ğŸ” **platform** | `å¹³å°ä¿¡æ¯è¯†åˆ«` | `è·¨å¹³å°å…¼å®¹æ€§æ£€æŸ¥` | `ğŸŒ± å…¥é—¨` |
| âš™ï¸ **subprocess** | `æ‰§è¡Œå¤–éƒ¨ç¨‹åº` | `è°ƒç”¨ç³»ç»Ÿå‘½ä»¤ã€è¿è¡Œè„šæœ¬` | `ğŸŒ³ ä¸“å®¶` |
| ğŸ“‹ **argparse** | `é«˜çº§å‚æ•°è§£æ` | `å¤æ‚å‘½ä»¤è¡Œå·¥å…·` | `ğŸŒ¿ è¿›é˜¶` |
| ğŸ“ **getopt** | `ç®€å•å‚æ•°è§£æ` | `ç®€å•å‘½ä»¤è¡Œé€‰é¡¹` | `ğŸŒ± å…¥é—¨` |

### 1.3 å­¦ä¹ è·¯å¾„å»ºè®®


```
ğŸ“š æ¨èå­¦ä¹ é¡ºåºï¼š
ç¬¬1æ­¥ï¼šsys + os        â† åŸºç¡€å¿…å­¦ï¼Œæ—¥å¸¸ä½¿ç”¨é¢‘ç‡æœ€é«˜
ç¬¬2æ­¥ï¼šplatform        â† äº†è§£ç³»ç»Ÿä¿¡æ¯ï¼Œè·¨å¹³å°å¼€å‘å¿…å¤‡
ç¬¬3æ­¥ï¼šargparse        â† å¼€å‘å‘½ä»¤è¡Œå·¥å…·å¿…å­¦
ç¬¬4æ­¥ï¼šsubprocess      â† é«˜çº§åŠŸèƒ½ï¼Œéœ€è¦æ—¶æ·±å…¥å­¦ä¹ 
ç¬¬5æ­¥ï¼šgetopt + ç¯å¢ƒå˜é‡ â† è¡¥å……çŸ¥è¯†ï¼Œç‰¹å®šåœºæ™¯ä½¿ç”¨
```

---

## 2. ğŸ–¥ï¸ sysæ¨¡å— - ç³»ç»Ÿå‚æ•°ä¸åŠŸèƒ½


### 2.1 sysæ¨¡å—æ ¸å¿ƒæ¦‚å¿µ


**ä»€ä¹ˆæ˜¯sysæ¨¡å—**ï¼šå¯ä»¥ç†è§£ä¸ºPythonè§£é‡Šå™¨çš„"æ§åˆ¶é¢æ¿"ï¼Œè®©ä½ èƒ½å¤ŸæŸ¥çœ‹å’Œæ§åˆ¶Pythonç¨‹åºçš„è¿è¡Œç¯å¢ƒã€‚

> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> sys = systemçš„ç¼©å†™ï¼Œä½†è¿™é‡Œçš„systemæŒ‡çš„æ˜¯Pythonç³»ç»Ÿï¼Œä¸æ˜¯æ“ä½œç³»ç»Ÿï¼

### 2.2 å‘½ä»¤è¡Œå‚æ•°å¤„ç†


**æœ€å¸¸ç”¨åŠŸèƒ½**ï¼šè·å–ç”¨æˆ·åœ¨å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•°

```python
# script.py
import sys

# è·å–æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°
print("æ‰€æœ‰å‚æ•°ï¼š", sys.argv)
print("è„šæœ¬åç§°ï¼š", sys.argv[0])

# æ£€æŸ¥å‚æ•°æ•°é‡
if len(sys.argv) < 2:
    print("ä½¿ç”¨æ–¹æ³•: python script.py <å‚æ•°>")
    sys.exit(1)  # é€€å‡ºç¨‹åº

# è·å–ç”¨æˆ·è¾“å…¥çš„å‚æ•°
user_input = sys.argv[1]
print(f"ä½ è¾“å…¥çš„å‚æ•°æ˜¯ï¼š{user_input}")
```

**è¿è¡Œç¤ºä¾‹**ï¼š
```bash
$ python script.py hello world
æ‰€æœ‰å‚æ•°ï¼š ['script.py', 'hello', 'world']
è„šæœ¬åç§°ï¼š script.py
ä½ è¾“å…¥çš„å‚æ•°æ˜¯ï¼šhello
```

### 2.3 Pythonè·¯å¾„ç®¡ç†


**sys.pathçš„ä½œç”¨**ï¼šå‘Šè¯‰Pythonå»å“ªé‡Œæ‰¾æ¨¡å—ï¼Œå°±åƒå‘Šè¯‰å¿«é€’å‘˜é…é€è·¯çº¿ã€‚

```python
import sys

# æŸ¥çœ‹å½“å‰Pythonæœç´¢è·¯å¾„
print("Pythonæ¨¡å—æœç´¢è·¯å¾„ï¼š")
for path in sys.path:
    print(f"  ğŸ“ {path}")

# åŠ¨æ€æ·»åŠ æ–°è·¯å¾„ï¼ˆä¸´æ—¶ï¼‰
sys.path.append('/my/custom/modules')
print("âœ… å·²æ·»åŠ è‡ªå®šä¹‰æ¨¡å—è·¯å¾„")

# æ’å…¥åˆ°å¼€å¤´ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
sys.path.insert(0, '/priority/path')
```

### 2.4 ç³»ç»Ÿä¿¡æ¯è·å–


```python
import sys

# Pythonç‰ˆæœ¬ä¿¡æ¯
print(f"Pythonç‰ˆæœ¬: {sys.version}")
print(f"ç‰ˆæœ¬ç®€åŒ–: {sys.version_info}")
print(f"å¹³å°ä¿¡æ¯: {sys.platform}")

# å†…å­˜å’Œæ€§èƒ½ä¿¡æ¯
print(f"æœ€å¤§æ•´æ•°å€¼: {sys.maxsize}")
print(f"é»˜è®¤ç¼–ç : {sys.getdefaultencoding()}")

# ç¨‹åºé€€å‡º
print("ç¨‹åºå³å°†é€€å‡º...")
sys.exit(0)  # 0è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œé0è¡¨ç¤ºå¼‚å¸¸é€€å‡º
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
Pythonç‰ˆæœ¬: 3.9.7 (default, Sep 16 2021, 16:59:28) 
ç‰ˆæœ¬ç®€åŒ–: sys.version_info(major=3, minor=9, micro=7, ...)
å¹³å°ä¿¡æ¯: darwin
æœ€å¤§æ•´æ•°å€¼: 9223372036854775807
é»˜è®¤ç¼–ç : utf-8
```

### 2.5 æ ‡å‡†è¾“å…¥è¾“å‡ºé‡å®šå‘


```python
import sys

# æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶
original_stdout = sys.stdout  # ä¿å­˜åŸå§‹è¾“å‡º

with open('output.txt', 'w') as f:
    sys.stdout = f  # é‡å®šå‘åˆ°æ–‡ä»¶
    print("è¿™è¡Œæ–‡å­—ä¼šå†™å…¥æ–‡ä»¶")
    print("è¿™è¡Œä¹Ÿä¼šå†™å…¥æ–‡ä»¶")

sys.stdout = original_stdout  # æ¢å¤åŸå§‹è¾“å‡º
print("è¿™è¡Œä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤º")
```

---

## 3. ğŸ“ osæ¨¡å— - æ“ä½œç³»ç»Ÿæ¥å£


### 3.1 osæ¨¡å—æ ¸å¿ƒæ¦‚å¿µ


**ä»€ä¹ˆæ˜¯osæ¨¡å—**ï¼šå¯ä»¥ç†è§£ä¸ºPythonä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„"æ¡¥æ¢"ï¼Œè®©Pythonèƒ½å¤Ÿæ“ä½œæ–‡ä»¶ã€ç›®å½•ï¼Œæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚

> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> osæ¨¡å—å°±åƒç»™Pythonè£…äº†"æ‰‹è„š"ï¼Œè®©å®ƒèƒ½å¤Ÿåœ¨ç”µè„‘ä¸Šåšå„ç§æ–‡ä»¶æ“ä½œ

### 3.2 ç›®å½•æ“ä½œ


**åŸºç¡€ç›®å½•æ“ä½œ**ï¼š
```python
import os

# è·å–å½“å‰å·¥ä½œç›®å½•
current_dir = os.getcwd()
print(f"å½“å‰ç›®å½•: {current_dir}")

# åˆ—å‡ºç›®å½•å†…å®¹
files = os.listdir('.')  # '.'è¡¨ç¤ºå½“å‰ç›®å½•
print("å½“å‰ç›®å½•æ–‡ä»¶:")
for file in files:
    print(f"  ğŸ“„ {file}")

# åˆ›å»ºç›®å½•
if not os.path.exists('test_folder'):
    os.mkdir('test_folder')
    print("âœ… åˆ›å»ºç›®å½•æˆåŠŸ")

# æ”¹å˜å·¥ä½œç›®å½•
os.chdir('test_folder')
print(f"æ–°çš„å½“å‰ç›®å½•: {os.getcwd()}")

# è¿”å›ä¸Šçº§ç›®å½•
os.chdir('..')  # '..'è¡¨ç¤ºä¸Šçº§ç›®å½•
```

**é«˜çº§ç›®å½•æ“ä½œ**ï¼š
```python
import os

# é€’å½’åˆ›å»ºå¤šçº§ç›®å½•
os.makedirs('project/src/modules', exist_ok=True)
print("âœ… åˆ›å»ºå¤šçº§ç›®å½•æˆåŠŸ")

# éå†ç›®å½•æ ‘
for root, dirs, files in os.walk('.'):
    print(f"ğŸ“ ç›®å½•: {root}")
    for file in files:
        print(f"  ğŸ“„ æ–‡ä»¶: {file}")
```

### 3.3 æ–‡ä»¶è·¯å¾„å¤„ç†


**è·¯å¾„æ“ä½œçš„è‰ºæœ¯**ï¼š
```python
import os

# è·¯å¾„æ‹¼æ¥ï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰
path = os.path.join('project', 'data', 'config.txt')
print(f"æ‹¼æ¥è·¯å¾„: {path}")

# è·¯å¾„åˆ†è§£
directory = os.path.dirname(path)   # ç›®å½•éƒ¨åˆ†
filename = os.path.basename(path)   # æ–‡ä»¶åéƒ¨åˆ†
name, ext = os.path.splitext(filename)  # æ–‡ä»¶åå’Œæ‰©å±•å

print(f"ç›®å½•: {directory}")
print(f"æ–‡ä»¶å: {filename}")
print(f"åç§°: {name}, æ‰©å±•å: {ext}")

# ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„
abs_path = os.path.abspath('.')  # è·å–ç»å¯¹è·¯å¾„
print(f"ç»å¯¹è·¯å¾„: {abs_path}")

# è·¯å¾„å­˜åœ¨æ€§æ£€æŸ¥
if os.path.exists(path):
    print("âœ… è·¯å¾„å­˜åœ¨")
    if os.path.isfile(path):
        print("ğŸ“„ è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶")
    elif os.path.isdir(path):
        print("ğŸ“ è¿™æ˜¯ä¸€ä¸ªç›®å½•")
else:
    print("âŒ è·¯å¾„ä¸å­˜åœ¨")
```

### 3.4 æ–‡ä»¶æ“ä½œ


```python
import os
import stat

# æ–‡ä»¶ä¿¡æ¯è·å–
file_path = 'example.txt'
if os.path.exists(file_path):
    file_stat = os.stat(file_path)
    print(f"æ–‡ä»¶å¤§å°: {file_stat.st_size} å­—èŠ‚")
    print(f"ä¿®æ”¹æ—¶é—´: {file_stat.st_mtime}")
    print(f"æƒé™: {stat.filemode(file_stat.st_mode)}")

# æ–‡ä»¶é‡å‘½å
if os.path.exists('old_name.txt'):
    os.rename('old_name.txt', 'new_name.txt')
    print("âœ… æ–‡ä»¶é‡å‘½åæˆåŠŸ")

# åˆ é™¤æ–‡ä»¶
if os.path.exists('unwanted_file.txt'):
    os.remove('unwanted_file.txt')
    print("âœ… æ–‡ä»¶åˆ é™¤æˆåŠŸ")
```

### 3.5 æ‰§è¡Œç³»ç»Ÿå‘½ä»¤


```python
import os

# æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆç®€å•æ–¹å¼ï¼‰
result = os.system('ls -la')  # Linux/Mac
# result = os.system('dir')    # Windows
print(f"å‘½ä»¤æ‰§è¡Œç»“æœ: {result}")  # 0è¡¨ç¤ºæˆåŠŸ

# è·å–å‘½ä»¤è¾“å‡º
output = os.popen('python --version').read()
print(f"Pythonç‰ˆæœ¬: {output.strip()}")
```

---

## 4. ğŸ” platformæ¨¡å— - å¹³å°è¯†åˆ«


### 4.1 platformæ¨¡å—çš„ä½œç”¨


**ä¸ºä»€ä¹ˆéœ€è¦platformæ¨¡å—**ï¼šä¸åŒæ“ä½œç³»ç»Ÿæœ‰ä¸åŒç‰¹æ€§ï¼Œplatformæ¨¡å—å°±åƒ"èº«ä»½è¯†åˆ«å™¨"ï¼Œå‘Šè¯‰ä½ ç¨‹åºè¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒã€‚

> ğŸ’¡ **å®ç”¨æŠ€å·§**  
> å¼€å‘è·¨å¹³å°è½¯ä»¶æ—¶ï¼Œplatformæ¨¡å—æ˜¯å¿…å¤‡å·¥å…·ï¼

### 4.2 ç³»ç»Ÿå¹³å°è¯†åˆ«


```python
import platform

# åŸºæœ¬å¹³å°ä¿¡æ¯
print(f"ç³»ç»Ÿåç§°: {platform.system()}")       # Windows/Linux/Darwin
print(f"ç³»ç»Ÿç‰ˆæœ¬: {platform.release()}")      # 10/5.4.0/21.1.0
print(f"æœºå™¨ç±»å‹: {platform.machine()}")      # x86_64/AMD64
print(f"å¤„ç†å™¨: {platform.processor()}")       # å¤„ç†å™¨ä¿¡æ¯

# è¯¦ç»†å¹³å°ä¿¡æ¯
print(f"å¹³å°æ ‡è¯†: {platform.platform()}")     # å®Œæ•´å¹³å°æè¿°
print(f"æ¶æ„ä¿¡æ¯: {platform.architecture()}")  # 32ä½/64ä½
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ç³»ç»Ÿåç§°: Darwin
ç³»ç»Ÿç‰ˆæœ¬: 21.1.0  
æœºå™¨ç±»å‹: x86_64
å¤„ç†å™¨: i386
å¹³å°æ ‡è¯†: Darwin-21.1.0-x86_64-i386-64bit
æ¶æ„ä¿¡æ¯: ('64bit', '')
```

### 4.3 è·¨å¹³å°ä»£ç ç¼–å†™


```python
import platform
import os

def clear_screen():
    """è·¨å¹³å°æ¸…å±å‡½æ•°"""
    system_name = platform.system()
    
    if system_name == "Windows":
        os.system('cls')
    else:  # Linux, macOS
        os.system('clear')
    
    print("âœ… å±å¹•å·²æ¸…ç©º")

def get_home_directory():
    """è·¨å¹³å°è·å–ç”¨æˆ·ä¸»ç›®å½•"""
    system_name = platform.system()
    
    if system_name == "Windows":
        return os.environ.get('USERPROFILE')
    else:  # Linux, macOS
        return os.environ.get('HOME')

# ä½¿ç”¨ç¤ºä¾‹
home = get_home_directory()
print(f"ç”¨æˆ·ä¸»ç›®å½•: {home}")

# æ ¹æ®ç³»ç»Ÿé€‰æ‹©ä¸åŒè¡Œä¸º
if platform.system() == "Windows":
    print("ğŸªŸ è¿è¡Œåœ¨Windowsç³»ç»Ÿ")
    # Windowsç‰¹å®šä»£ç 
elif platform.system() == "Darwin":
    print("ğŸ è¿è¡Œåœ¨macOSç³»ç»Ÿ")
    # macOSç‰¹å®šä»£ç 
else:
    print("ğŸ§ è¿è¡Œåœ¨Linuxç³»ç»Ÿ")
    # Linuxç‰¹å®šä»£ç 
```

### 4.4 Pythonç‰ˆæœ¬æ£€æŸ¥


```python
import platform
import sys

# Pythonç‰ˆæœ¬è¯¦ç»†ä¿¡æ¯
print(f"Pythonç‰ˆæœ¬: {platform.python_version()}")
print(f"Pythonæ„å»º: {platform.python_build()}")
print(f"Pythonç¼–è¯‘å™¨: {platform.python_compiler()}")

# ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥
def check_python_version():
    """æ£€æŸ¥Pythonç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚"""
    major, minor = sys.version_info[:2]
    
    if major < 3:
        print("âŒ éœ€è¦Python 3.xç‰ˆæœ¬")
        return False
    elif major == 3 and minor < 6:
        print("âš ï¸ å»ºè®®ä½¿ç”¨Python 3.6+ç‰ˆæœ¬")
        return True
    else:
        print("âœ… Pythonç‰ˆæœ¬ç¬¦åˆè¦æ±‚")
        return True

check_python_version()
```

---

## 5. âš™ï¸ subprocessæ¨¡å— - å­è¿›ç¨‹ç®¡ç†


### 5.1 subprocessæ¨¡å—æ ¸å¿ƒæ¦‚å¿µ


**ä»€ä¹ˆæ˜¯subprocess**ï¼šæƒ³è±¡ä½ æ˜¯é¡¹ç›®ç»ç†ï¼Œéœ€è¦å®‰æ’å…¶ä»–äººï¼ˆç¨‹åºï¼‰å¹²æ´»ï¼Œsubprocesså°±æ˜¯ä½ çš„"åŠ©æ‰‹"ï¼Œå¸®ä½ ç®¡ç†è¿™äº›"å‘˜å·¥"ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> subprocessæ¯”os.system()æ›´å®‰å…¨ã€æ›´å¼ºå¤§ï¼Œæ˜¯æ‰§è¡Œå¤–éƒ¨å‘½ä»¤çš„æ¨èæ–¹å¼

### 5.2 åŸºç¡€å‘½ä»¤æ‰§è¡Œ


```python
import subprocess

# ç®€å•å‘½ä»¤æ‰§è¡Œ
result = subprocess.run(['python', '--version'], 
                       capture_output=True, text=True)

print(f"è¿”å›ç : {result.returncode}")  # 0è¡¨ç¤ºæˆåŠŸ
print(f"æ ‡å‡†è¾“å‡º: {result.stdout}")
print(f"é”™è¯¯è¾“å‡º: {result.stderr}")

# ç­‰ä»·äºå‘½ä»¤è¡Œ: python --version
```

**æ›´å®ç”¨çš„ä¾‹å­**ï¼š
```python
import subprocess

def run_command(command):
    """å®‰å…¨æ‰§è¡Œç³»ç»Ÿå‘½ä»¤"""
    try:
        result = subprocess.run(
            command.split(),  # è‡ªåŠ¨åˆ†å‰²å‘½ä»¤
            capture_output=True, 
            text=True, 
            timeout=30  # 30ç§’è¶…æ—¶
        )
        
        if result.returncode == 0:
            print("âœ… å‘½ä»¤æ‰§è¡ŒæˆåŠŸ")
            print(f"è¾“å‡º: {result.stdout}")
        else:
            print("âŒ å‘½ä»¤æ‰§è¡Œå¤±è´¥")
            print(f"é”™è¯¯: {result.stderr}")
            
    except subprocess.TimeoutExpired:
        print("â° å‘½ä»¤æ‰§è¡Œè¶…æ—¶")
    except Exception as e:
        print(f"ğŸ’¥ æ‰§è¡Œå‡ºé”™: {e}")

# ä½¿ç”¨ç¤ºä¾‹
run_command("pip list")
```

### 5.3 é«˜çº§è¿›ç¨‹ç®¡ç†


```python
import subprocess
import time

# å¯åŠ¨é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹
def start_background_process():
    """å¯åŠ¨åå°è¿›ç¨‹"""
    process = subprocess.Popen(
        ['python', '-c', 'import time; time.sleep(10); print("å®Œæˆ!")'],
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE,
        text=True
    )
    
    print(f"è¿›ç¨‹ID: {process.pid}")
    print("è¿›ç¨‹å·²å¯åŠ¨ï¼Œç­‰å¾…å®Œæˆ...")
    
    # ç­‰å¾…è¿›ç¨‹å®Œæˆ
    stdout, stderr = process.communicate()
    
    print(f"è¿›ç¨‹ç»“æŸï¼Œè¿”å›ç : {process.returncode}")
    print(f"è¾“å‡º: {stdout}")

# è¿›ç¨‹ç›‘æ§
def monitor_process():
    """ç›‘æ§è¿›ç¨‹çŠ¶æ€"""
    process = subprocess.Popen(['ping', 'google.com'])
    
    print("è¿›ç¨‹è¿è¡Œä¸­...")
    time.sleep(3)
    
    # æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿˜åœ¨è¿è¡Œ
    if process.poll() is None:
        print("è¿›ç¨‹ä»åœ¨è¿è¡Œï¼Œå‡†å¤‡ç»ˆæ­¢...")
        process.terminate()  # æ¸©å’Œåœ°ç»ˆæ­¢
        process.wait()       # ç­‰å¾…è¿›ç¨‹ç»“æŸ
        print("âœ… è¿›ç¨‹å·²ç»ˆæ­¢")
    else:
        print("è¿›ç¨‹å·²è‡ªç„¶ç»“æŸ")

monitor_process()
```

### 5.4 ç®¡é“å’Œé‡å®šå‘


```python
import subprocess

# ç®¡é“æ“ä½œï¼ˆå°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼‰
def pipe_commands():
    """æ¼”ç¤ºç®¡é“æ“ä½œ"""
    # ç›¸å½“äºå‘½ä»¤è¡Œ: ps aux | grep python
    ps_process = subprocess.Popen(['ps', 'aux'], stdout=subprocess.PIPE)
    grep_process = subprocess.Popen(['grep', 'python'], 
                                   stdin=ps_process.stdout, 
                                   stdout=subprocess.PIPE, 
                                   text=True)
    
    ps_process.stdout.close()  # å…è®¸psè¿›ç¨‹æ¥æ”¶SIGPIPE
    output, error = grep_process.communicate()
    
    print("Pythonè¿›ç¨‹åˆ—è¡¨:")
    print(output)

# Windowså…¼å®¹ç‰ˆæœ¬
def safe_pipe_example():
    """è·¨å¹³å°å®‰å…¨çš„ç®¡é“ç¤ºä¾‹"""
    try:
        # å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤
        result1 = subprocess.run(['python', '-c', 'print("Hello\\nWorld\\nPython")'], 
                                capture_output=True, text=True)
        
        # å°†ç¬¬ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºç¬¬äºŒä¸ªå‘½ä»¤çš„è¾“å…¥
        result2 = subprocess.run(['grep', 'Python'], 
                                input=result1.stdout, 
                                capture_output=True, text=True)
        
        print(f"è¿‡æ»¤ç»“æœ: {result2.stdout}")
        
    except FileNotFoundError:
        print("âŒ æŸäº›å‘½ä»¤åœ¨æ­¤ç³»ç»Ÿä¸Šä¸å¯ç”¨")

safe_pipe_example()
```

---

## 6. ğŸ“‹ argparseæ¨¡å— - å‘½ä»¤è¡Œå‚æ•°è§£æ


### 6.1 argparseæ¨¡å—çš„ä¼˜åŠ¿


**ä¸ºä»€ä¹ˆé€‰æ‹©argparse**ï¼šå¦‚æœè¯´getoptæ˜¯"æ‰‹åŠ¨æŒ¡æ±½è½¦"ï¼Œé‚£argparseå°±æ˜¯"è‡ªåŠ¨æŒ¡è±ªè½¦" - åŠŸèƒ½å¼ºå¤§ã€ä½¿ç”¨ç®€å•ã€‚

> ğŸ’¡ **å®ç”¨æŠ€å·§**  
> argparseä¼šè‡ªåŠ¨ç”Ÿæˆå¸®åŠ©ä¿¡æ¯ï¼Œç”¨æˆ·è¾“å…¥ `--help` å°±èƒ½çœ‹åˆ°ä½¿ç”¨è¯´æ˜

### 6.2 åŸºç¡€å‚æ•°è§£æ


```python
import argparse

def create_basic_parser():
    """åˆ›å»ºåŸºç¡€å‚æ•°è§£æå™¨"""
    parser = argparse.ArgumentParser(
        description='è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åº',
        epilog='ä½¿ç”¨ç¤ºä¾‹: python script.py input.txt -o output.txt'
    )
    
    # ä½ç½®å‚æ•°ï¼ˆå¿…é¡»æä¾›ï¼‰
    parser.add_argument('input_file', 
                       help='è¾“å…¥æ–‡ä»¶è·¯å¾„')
    
    # å¯é€‰å‚æ•°
    parser.add_argument('-o', '--output', 
                       help='è¾“å‡ºæ–‡ä»¶è·¯å¾„',
                       default='result.txt')
    
    # å¼€å…³å‚æ•°
    parser.add_argument('-v', '--verbose', 
                       action='store_true',
                       help='æ˜¾ç¤ºè¯¦ç»†è¾“å‡º')
    
    return parser

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    parser = create_basic_parser()
    args = parser.parse_args()
    
    print(f"è¾“å…¥æ–‡ä»¶: {args.input_file}")
    print(f"è¾“å‡ºæ–‡ä»¶: {args.output}")
    print(f"è¯¦ç»†æ¨¡å¼: {args.verbose}")
    
    if args.verbose:
        print("ğŸ” è¯¦ç»†æ¨¡å¼å·²å¯ç”¨")
```

**è¿è¡Œç¤ºä¾‹**ï¼š
```bash
$ python script.py data.txt -o results.txt -v
è¾“å…¥æ–‡ä»¶: data.txt
è¾“å‡ºæ–‡ä»¶: results.txt
è¯¦ç»†æ¨¡å¼: True
ğŸ” è¯¦ç»†æ¨¡å¼å·²å¯ç”¨

$ python script.py --help
usage: script.py [-h] [-o OUTPUT] [-v] input_file
è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åº
positional arguments:
  input_file            è¾“å…¥æ–‡ä»¶è·¯å¾„
optional arguments:
  -h, --help            show this help message and exit
  -o OUTPUT, --output OUTPUT
                        è¾“å‡ºæ–‡ä»¶è·¯å¾„
  -v, --verbose         æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
ä½¿ç”¨ç¤ºä¾‹: python script.py input.txt -o output.txt
```

### 6.3 é«˜çº§å‚æ•°ç±»å‹


```python
import argparse

def create_advanced_parser():
    """åˆ›å»ºé«˜çº§å‚æ•°è§£æå™¨"""
    parser = argparse.ArgumentParser()
    
    # æ•°å­—å‚æ•°
    parser.add_argument('-n', '--number', 
                       type=int, 
                       default=10,
                       help='æ•°å­—å‚æ•°')
    
    # æµ®ç‚¹æ•°å‚æ•°
    parser.add_argument('--threshold', 
                       type=float, 
                       default=0.5,
                       help='é˜ˆå€¼å‚æ•°')
    
    # é€‰æ‹©å‚æ•°
    parser.add_argument('--format', 
                       choices=['json', 'csv', 'xml'],
                       default='json',
                       help='è¾“å‡ºæ ¼å¼')
    
    # å¤šå€¼å‚æ•°
    parser.add_argument('--files', 
                       nargs='+',  # ä¸€ä¸ªæˆ–å¤šä¸ª
                       help='å¤šä¸ªæ–‡ä»¶è·¯å¾„')
    
    # è®¡æ•°å‚æ•°
    parser.add_argument('-q', '--quiet', 
                       action='count',
                       default=0,
                       help='å®‰é™æ¨¡å¼ (-q è¾ƒå°‘è¾“å‡º, -qq æœ€å°‘è¾“å‡º)')
    
    return parser

# ä½¿ç”¨ç¤ºä¾‹
parser = create_advanced_parser()
args = parser.parse_args(['-n', '20', '--threshold', '0.8', 
                         '--format', 'csv', '--files', 'a.txt', 'b.txt', 
                         '-qq'])

print(f"æ•°å­—: {args.number}")
print(f"é˜ˆå€¼: {args.threshold}")
print(f"æ ¼å¼: {args.format}")
print(f"æ–‡ä»¶: {args.files}")
print(f"å®‰é™çº§åˆ«: {args.quiet}")
```

### 6.4 å‚æ•°åˆ†ç»„å’Œå­å‘½ä»¤


```python
import argparse

def create_grouped_parser():
    """åˆ›å»ºå¸¦åˆ†ç»„çš„å‚æ•°è§£æå™¨"""
    parser = argparse.ArgumentParser(description='æ–‡ä»¶å¤„ç†å·¥å…·')
    
    # åˆ›å»ºå‚æ•°ç»„
    input_group = parser.add_argument_group('è¾“å…¥é€‰é¡¹')
    input_group.add_argument('-i', '--input', required=True, help='è¾“å…¥æ–‡ä»¶')
    input_group.add_argument('--encoding', default='utf-8', help='æ–‡ä»¶ç¼–ç ')
    
    output_group = parser.add_argument_group('è¾“å‡ºé€‰é¡¹')
    output_group.add_argument('-o', '--output', help='è¾“å‡ºæ–‡ä»¶')
    output_group.add_argument('--compress', action='store_true', help='å‹ç¼©è¾“å‡º')
    
    # äº’æ–¥å‚æ•°ç»„
    mode_group = parser.add_mutually_exclusive_group()
    mode_group.add_argument('--verbose', action='store_true', help='è¯¦ç»†æ¨¡å¼')
    mode_group.add_argument('--quiet', action='store_true', help='å®‰é™æ¨¡å¼')
    
    return parser

def create_subcommand_parser():
    """åˆ›å»ºå¸¦å­å‘½ä»¤çš„è§£æå™¨"""
    parser = argparse.ArgumentParser(description='Gité£æ ¼çš„å‘½ä»¤è¡Œå·¥å…·')
    subparsers = parser.add_subparsers(dest='command', help='å¯ç”¨å‘½ä»¤')
    
    # åˆ›å»ºå­å‘½ä»¤: add
    add_parser = subparsers.add_parser('add', help='æ·»åŠ æ–‡ä»¶')
    add_parser.add_argument('files', nargs='+', help='è¦æ·»åŠ çš„æ–‡ä»¶')
    add_parser.add_argument('-v', '--verbose', action='store_true')
    
    # åˆ›å»ºå­å‘½ä»¤: remove
    remove_parser = subparsers.add_parser('remove', help='åˆ é™¤æ–‡ä»¶')
    remove_parser.add_argument('files', nargs='+', help='è¦åˆ é™¤çš„æ–‡ä»¶')
    remove_parser.add_argument('-f', '--force', action='store_true')
    
    return parser

# ä½¿ç”¨å­å‘½ä»¤ç¤ºä¾‹
if __name__ == '__main__':
    parser = create_subcommand_parser()
    args = parser.parse_args(['add', 'file1.txt', 'file2.txt', '-v'])
    
    print(f"å‘½ä»¤: {args.command}")
    print(f"æ–‡ä»¶: {args.files}")
    print(f"è¯¦ç»†æ¨¡å¼: {args.verbose}")
```

---

## 7. ğŸ“ getoptæ¨¡å— - ç®€å•å‚æ•°è§£æ


### 7.1 getoptæ¨¡å—ç‰¹ç‚¹


**ä»€ä¹ˆæ—¶å€™ç”¨getopt**ï¼šå½“ä½ éœ€è¦ç®€å•ã€è½»é‡çº§çš„å‚æ•°è§£æï¼Œæˆ–è€…è¦å…¼å®¹è€ç‰ˆæœ¬Pythonæ—¶ã€‚

> ğŸ“Œ **å¯¹æ¯”ç†è§£**  
> getoptåƒ"æ‰‹åŠ¨å·¥å…·"ï¼Œéœ€è¦è‡ªå·±å¤„ç†ç»†èŠ‚ï¼›argparseåƒ"ç”µåŠ¨å·¥å…·"ï¼Œè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜

### 7.2 åŸºç¡€ä½¿ç”¨æ–¹æ³•


```python
import getopt
import sys

def parse_simple_args():
    """ä½¿ç”¨getoptè§£æç®€å•å‚æ•°"""
    try:
        # çŸ­é€‰é¡¹: h (help), v (verbose), o: (output, éœ€è¦å‚æ•°)
        # é•¿é€‰é¡¹: help, verbose, output= (éœ€è¦å‚æ•°)
        opts, args = getopt.getopt(sys.argv[1:], "hvo:", 
                                 ["help", "verbose", "output="])
    except getopt.GetoptError as err:
        print(f"å‚æ•°é”™è¯¯: {err}")
        print("ä½¿ç”¨ -h æŸ¥çœ‹å¸®åŠ©")
        sys.exit(2)
    
    # é»˜è®¤å€¼
    verbose = False
    output_file = None
    
    # è§£æé€‰é¡¹
    for opt, arg in opts:
        if opt in ('-h', '--help'):
            print("ä½¿ç”¨æ–¹æ³•: script.py [-v] [-o output_file] input_files...")
            print("  -v, --verbose    è¯¦ç»†è¾“å‡º")
            print("  -o, --output     è¾“å‡ºæ–‡ä»¶")
            print("  -h, --help       æ˜¾ç¤ºå¸®åŠ©")
            sys.exit()
        elif opt in ('-v', '--verbose'):
            verbose = True
        elif opt in ('-o', '--output'):
            output_file = arg
    
    # å‰©ä½™çš„å‚æ•°æ˜¯è¾“å…¥æ–‡ä»¶
    input_files = args
    
    print(f"è¯¦ç»†æ¨¡å¼: {verbose}")
    print(f"è¾“å‡ºæ–‡ä»¶: {output_file}")
    print(f"è¾“å…¥æ–‡ä»¶: {input_files}")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    parse_simple_args()
```

**è¿è¡Œç¤ºä¾‹**ï¼š
```bash
$ python script.py -v -o result.txt file1.txt file2.txt
è¯¦ç»†æ¨¡å¼: True
è¾“å‡ºæ–‡ä»¶: result.txt
è¾“å…¥æ–‡ä»¶: ['file1.txt', 'file2.txt']
```

### 7.3 å®ç”¨çš„getoptå°è£…


```python
import getopt
import sys

class SimpleArgParser:
    """ç®€å•çš„å‚æ•°è§£æå™¨å°è£…"""
    
    def __init__(self, short_opts="", long_opts=None):
        self.short_opts = short_opts
        self.long_opts = long_opts or []
        self.options = {}
        self.arguments = []
    
    def parse(self, argv=None):
        """è§£æå‘½ä»¤è¡Œå‚æ•°"""
        if argv is None:
            argv = sys.argv[1:]
        
        try:
            opts, args = getopt.getopt(argv, self.short_opts, self.long_opts)
        except getopt.GetoptError as err:
            raise ValueError(f"å‚æ•°è§£æé”™è¯¯: {err}")
        
        # å­˜å‚¨é€‰é¡¹
        for opt, arg in opts:
            # ç§»é™¤å¼€å¤´çš„ - æˆ– --
            clean_opt = opt.lstrip('-')
            self.options[clean_opt] = arg if arg else True
        
        # å­˜å‚¨ä½ç½®å‚æ•°
        self.arguments = args
        return self
    
    def get_option(self, name, default=None):
        """è·å–é€‰é¡¹å€¼"""
        return self.options.get(name, default)
    
    def has_option(self, name):
        """æ£€æŸ¥é€‰é¡¹æ˜¯å¦å­˜åœ¨"""
        return name in self.options

# ä½¿ç”¨ç¤ºä¾‹
def demo_simple_parser():
    """æ¼”ç¤ºç®€å•è§£æå™¨çš„ä½¿ç”¨"""
    parser = SimpleArgParser("hvo:", ["help", "verbose", "output="])
    
    try:
        parser.parse(["-v", "-o", "test.txt", "input1.txt", "input2.txt"])
        
        if parser.has_option('h') or parser.has_option('help'):
            print("æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯...")
            return
        
        verbose = parser.has_option('v') or parser.has_option('verbose')
        output = parser.get_option('o') or parser.get_option('output')
        
        print(f"è¯¦ç»†æ¨¡å¼: {verbose}")
        print(f"è¾“å‡ºæ–‡ä»¶: {output}")
        print(f"è¾“å…¥æ–‡ä»¶: {parser.arguments}")
        
    except ValueError as e:
        print(f"é”™è¯¯: {e}")

demo_simple_parser()
```

---

## 8. ğŸŒ ç¯å¢ƒå˜é‡å¤„ç†


### 8.1 ç¯å¢ƒå˜é‡åŸºç¡€æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡**ï¼šå¯ä»¥ç†è§£ä¸ºç³»ç»Ÿçš„"å…¨å±€è®¾ç½®"ï¼Œæ‰€æœ‰ç¨‹åºéƒ½èƒ½è®¿é—®çš„é…ç½®ä¿¡æ¯ã€‚

```
ç°å®æ¯”å–»ï¼š
ç¯å¢ƒå˜é‡ = åŠå…¬å®¤çš„"å…¬å‘Šæ¿"
ä»»ä½•å‘˜å·¥ï¼ˆç¨‹åºï¼‰éƒ½èƒ½æŸ¥çœ‹ä¸Šé¢çš„ä¿¡æ¯ï¼ˆé…ç½®ï¼‰

å¸¸è§ç¯å¢ƒå˜é‡ï¼š
PATH      â† å‘Šè¯‰ç³»ç»Ÿåœ¨å“ªé‡Œæ‰¾å¯æ‰§è¡Œç¨‹åº
HOME      â† ç”¨æˆ·ä¸»ç›®å½•è·¯å¾„
PYTHONPATH â† Pythonæ¨¡å—æœç´¢è·¯å¾„
```

### 8.2 è¯»å–ç¯å¢ƒå˜é‡


```python
import os

# è·å–å•ä¸ªç¯å¢ƒå˜é‡
path = os.environ.get('PATH')
print(f"PATHç¯å¢ƒå˜é‡: {path[:100]}...")  # åªæ˜¾ç¤ºå‰100ä¸ªå­—ç¬¦

home = os.environ.get('HOME')  # Linux/Mac
user_profile = os.environ.get('USERPROFILE')  # Windows
print(f"ç”¨æˆ·ç›®å½•: {home or user_profile}")

# ä½¿ç”¨é»˜è®¤å€¼
database_url = os.environ.get('DATABASE_URL', 'sqlite:///default.db')
print(f"æ•°æ®åº“URL: {database_url}")

# è·å–æ‰€æœ‰ç¯å¢ƒå˜é‡
print("æ‰€æœ‰ç¯å¢ƒå˜é‡:")
for key, value in sorted(os.environ.items()):
    print(f"  {key} = {value[:50]}...")  # é™åˆ¶æ˜¾ç¤ºé•¿åº¦
```

### 8.3 è®¾ç½®ç¯å¢ƒå˜é‡


```python
import os

# ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä»…å½“å‰ç¨‹åºæœ‰æ•ˆï¼‰
os.environ['MY_APP_CONFIG'] = 'production'
os.environ['DEBUG_MODE'] = 'False'

print(f"é…ç½®: {os.environ.get('MY_APP_CONFIG')}")
print(f"è°ƒè¯•æ¨¡å¼: {os.environ.get('DEBUG_MODE')}")

# å®‰å…¨åœ°è·å–ç¯å¢ƒå˜é‡
def get_env_var(name, default=None, required=False):
    """å®‰å…¨è·å–ç¯å¢ƒå˜é‡"""
    value = os.environ.get(name, default)
    
    if required and value is None:
        raise ValueError(f"å¿…éœ€çš„ç¯å¢ƒå˜é‡ {name} æœªè®¾ç½®")
    
    return value

# ä½¿ç”¨ç¤ºä¾‹
try:
    api_key = get_env_var('API_KEY', required=True)
    print(f"APIå¯†é’¥: {api_key[:10]}...")
except ValueError as e:
    print(f"é…ç½®é”™è¯¯: {e}")
    print("è¯·è®¾ç½® API_KEY ç¯å¢ƒå˜é‡")
```

### 8.4 é…ç½®æ–‡ä»¶ä¸ç¯å¢ƒå˜é‡ç»“åˆ


```python
import os
import json

class Config:
    """é…ç½®ç®¡ç†ç±»"""
    
    def __init__(self, config_file=None):
        self.config = {}
        
        # åŠ è½½é…ç½®æ–‡ä»¶
        if config_file and os.path.exists(config_file):
            with open(config_file, 'r') as f:
                self.config = json.load(f)
    
    def get(self, key, default=None):
        """è·å–é…ç½®å€¼ï¼ˆç¯å¢ƒå˜é‡ä¼˜å…ˆï¼‰"""
        # 1. ä¼˜å…ˆä»ç¯å¢ƒå˜é‡è·å–
        env_value = os.environ.get(key.upper())
        if env_value is not None:
            return env_value
        
        # 2. ä»é…ç½®æ–‡ä»¶è·å–
        if key in self.config:
            return self.config[key]
        
        # 3. è¿”å›é»˜è®¤å€¼
        return default
    
    def get_bool(self, key, default=False):
        """è·å–å¸ƒå°”é…ç½®"""
        value = self.get(key, default)
        if isinstance(value, str):
            return value.lower() in ('true', '1', 'yes', 'on')
        return bool(value)
    
    def get_int(self, key, default=0):
        """è·å–æ•´æ•°é…ç½®"""
        value = self.get(key, default)
        return int(value) if value is not None else default

# ä½¿ç”¨ç¤ºä¾‹
config = Config('app_config.json')

# ä¼˜å…ˆçº§: ç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼
debug = config.get_bool('debug', False)
port = config.get_int('port', 8080)
database_url = config.get('database_url', 'sqlite:///app.db')

print(f"è°ƒè¯•æ¨¡å¼: {debug}")
print(f"ç«¯å£: {port}")
print(f"æ•°æ®åº“: {database_url}")
```

---

## 9. ğŸ“Š ç³»ç»Ÿä¿¡æ¯è·å–


### 9.1 ç³»ç»Ÿä¿¡æ¯è·å–æ¦‚è¿°


**ä¸ºä»€ä¹ˆè¦è·å–ç³»ç»Ÿä¿¡æ¯**ï¼šå°±åƒåŒ»ç”Ÿçœ‹ç—…å‰è¦äº†è§£ç—…äººåŸºæœ¬æƒ…å†µï¼Œç¨‹åºè¿è¡Œå‰ä¹Ÿéœ€è¦äº†è§£"è¿è¡Œç¯å¢ƒ"ã€‚

```
ç³»ç»Ÿä¿¡æ¯çš„ç”¨é€”ï¼š
â€¢ ğŸ” æ•…éšœè¯Šæ–­ï¼šäº†è§£è¿è¡Œç¯å¢ƒï¼Œå¿«é€Ÿå®šä½é—®é¢˜
â€¢ âš–ï¸ æ€§èƒ½ä¼˜åŒ–ï¼šæ ¹æ®ç¡¬ä»¶é…ç½®è°ƒæ•´ç¨‹åºè¡Œä¸º
â€¢ ğŸ›¡ï¸ å…¼å®¹æ€§æ£€æŸ¥ï¼šç¡®ä¿ç¨‹åºåœ¨å½“å‰ç¯å¢ƒèƒ½æ­£å¸¸è¿è¡Œ
â€¢ ğŸ“Š ç›‘æ§å‘Šè­¦ï¼šè·Ÿè¸ªèµ„æºä½¿ç”¨æƒ…å†µ
```

### 9.2 ç»¼åˆç³»ç»Ÿä¿¡æ¯æ”¶é›†


```python
import sys
import os
import platform
import subprocess
import time

class SystemInfo:
    """ç³»ç»Ÿä¿¡æ¯æ”¶é›†å™¨"""
    
    def __init__(self):
        self.info = {}
        self.collect_all_info()
    
    def collect_all_info(self):
        """æ”¶é›†æ‰€æœ‰ç³»ç»Ÿä¿¡æ¯"""
        self.info.update({
            'python': self._get_python_info(),
            'system': self._get_system_info(),
            'hardware': self._get_hardware_info(),
            'environment': self._get_env_info(),
            'performance': self._get_performance_info()
        })
    
    def _get_python_info(self):
        """è·å–Pythonä¿¡æ¯"""
        return {
            'version': platform.python_version(),
            'implementation': platform.python_implementation(),
            'compiler': platform.python_compiler(),
            'build': platform.python_build(),
            'executable': sys.executable,
            'path': sys.path[:3]  # åªæ˜¾ç¤ºå‰3ä¸ªè·¯å¾„
        }
    
    def _get_system_info(self):
        """è·å–ç³»ç»Ÿä¿¡æ¯"""
        return {
            'platform': platform.platform(),
            'system': platform.system(),
            'release': platform.release(),
            'version': platform.version(),
            'machine': platform.machine(),
            'processor': platform.processor(),
            'architecture': platform.architecture()[0]
        }
    
    def _get_hardware_info(self):
        """è·å–ç¡¬ä»¶ä¿¡æ¯"""
        info = {
            'cpu_count': os.cpu_count(),
        }
        
        # å°è¯•è·å–å†…å­˜ä¿¡æ¯
        try:
            if platform.system() == "Linux":
                with open('/proc/meminfo', 'r') as f:
                    meminfo = f.read()
                    for line in meminfo.split('\n'):
                        if 'MemTotal' in line:
                            memory_kb = int(line.split()[1])
                            info['memory_gb'] = round(memory_kb / 1024 / 1024, 2)
                            break
        except:
            info['memory_gb'] = 'N/A'
        
        return info
    
    def _get_env_info(self):
        """è·å–ç¯å¢ƒä¿¡æ¯"""
        important_vars = ['PATH', 'HOME', 'USER', 'SHELL', 'PYTHONPATH']
        env_info = {}
        
        for var in important_vars:
            value = os.environ.get(var)
            if value:
                # æˆªæ–­è¿‡é•¿çš„å€¼
                env_info[var] = value[:100] + '...' if len(value) > 100 else value
        
        return env_info
    
    def _get_performance_info(self):
        """è·å–æ€§èƒ½ä¿¡æ¯"""
        start_time = time.time()
        
        # ç®€å•çš„æ€§èƒ½æµ‹è¯•
        test_list = list(range(100000))
        list_time = time.time() - start_time
        
        return {
            'current_time': time.strftime('%Y-%m-%d %H:%M:%S'),
            'uptime_seconds': time.time() - start_time,
            'simple_benchmark': f"{list_time:.4f}s"
        }
    
    def print_report(self):
        """æ‰“å°ç³»ç»Ÿä¿¡æ¯æŠ¥å‘Š"""
        print("ğŸ–¥ï¸ " + "="*50)
        print("    ç³»ç»Ÿä¿¡æ¯æŠ¥å‘Š")
        print("="*52)
        
        for category, data in self.info.items():
            print(f"\nğŸ“Š {category.upper()}:")
            for key, value in data.items():
                print(f"  {key:20} : {value}")
    
    def save_report(self, filename='system_info.txt'):
        """ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶"""
        with open(filename, 'w', encoding='utf-8') as f:
            f.write("ç³»ç»Ÿä¿¡æ¯æŠ¥å‘Š\n")
            f.write("="*50 + "\n\n")
            
            for category, data in self.info.items():
                f.write(f"{category.upper()}:\n")
                for key, value in data.items():
                    f.write(f"  {key}: {value}\n")
                f.write("\n")
        
        print(f"âœ… æŠ¥å‘Šå·²ä¿å­˜åˆ°: {filename}")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    system = SystemInfo()
    system.print_report()
    system.save_report()
```

### 9.3 ç‰¹å®šä¿¡æ¯æŸ¥è¯¢


```python
import psutil  # éœ€è¦å®‰è£…: pip install psutil

def get_detailed_system_info():
    """è·å–è¯¦ç»†çš„ç³»ç»Ÿä¿¡æ¯ï¼ˆéœ€è¦psutilåº“ï¼‰"""
    print("ğŸ’¾ å†…å­˜ä¿¡æ¯:")
    memory = psutil.virtual_memory()
    print(f"  æ€»å†…å­˜: {memory.total / (1024**3):.2f} GB")
    print(f"  å¯ç”¨å†…å­˜: {memory.available / (1024**3):.2f} GB")
    print(f"  ä½¿ç”¨ç‡: {memory.percent}%")
    
    print("\nğŸ’½ ç£ç›˜ä¿¡æ¯:")
    disk = psutil.disk_usage('/')
    print(f"  æ€»ç©ºé—´: {disk.total / (1024**3):.2f} GB")
    print(f"  å¯ç”¨ç©ºé—´: {disk.free / (1024**3):.2f} GB")
    print(f"  ä½¿ç”¨ç‡: {(disk.used / disk.total) * 100:.1f}%")
    
    print("\nğŸ”„ CPUä¿¡æ¯:")
    print(f"  CPUæ ¸å¿ƒæ•°: {psutil.cpu_count()}")
    print(f"  CPUä½¿ç”¨ç‡: {psutil.cpu_percent(interval=1)}%")

def simple_system_check():
    """æ— éœ€é¢å¤–åº“çš„ç®€å•ç³»ç»Ÿæ£€æŸ¥"""
    print("ğŸ” ç®€å•ç³»ç»Ÿæ£€æŸ¥:")
    
    # æ£€æŸ¥Pythonç‰ˆæœ¬
    major, minor = sys.version_info[:2]
    if major >= 3 and minor >= 6:
        print("  âœ… Pythonç‰ˆæœ¬ç¬¦åˆè¦æ±‚")
    else:
        print("  âš ï¸ Pythonç‰ˆæœ¬å¯èƒ½è¿‡ä½")
    
    # æ£€æŸ¥å¯ç”¨ç©ºé—´
    import shutil
    free_space = shutil.disk_usage('.').free / (1024**3)
    if free_space > 1:
        print(f"  âœ… ç£ç›˜ç©ºé—´å……è¶³: {free_space:.1f} GB")
    else:
        print(f"  âš ï¸ ç£ç›˜ç©ºé—´ä¸è¶³: {free_space:.1f} GB")
    
    # æ£€æŸ¥å†…å­˜ï¼ˆLinuxï¼‰
    try:
        if platform.system() == "Linux":
            with open('/proc/meminfo') as f:
                for line in f:
                    if 'MemAvailable' in line:
                        available_mb = int(line.split()[1]) / 1024
                        if available_mb > 512:
                            print(f"  âœ… å†…å­˜å……è¶³: {available_mb:.0f} MB")
                        else:
                            print(f"  âš ï¸ å†…å­˜ä¸è¶³: {available_mb:.0f} MB")
                        break
    except:
        print("  â„¹ï¸ æ— æ³•æ£€æŸ¥å†…å­˜ä¿¡æ¯")

simple_system_check()
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç³»ç»Ÿäº¤äº’æ¨¡å—æœ¬è´¨ï¼šPythonç¨‹åºä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„"æ¡¥æ¢"
ğŸ”¸ æ¨¡å—åˆ†å·¥æ˜ç¡®ï¼šæ¯ä¸ªæ¨¡å—éƒ½æœ‰ç‰¹å®šç”¨é€”ï¼Œä¸è¦æ··ç”¨
ğŸ”¸ è·¨å¹³å°å…¼å®¹ï¼šç¼–å†™ä»£ç æ—¶è¦è€ƒè™‘ä¸åŒæ“ä½œç³»ç»Ÿçš„å·®å¼‚
ğŸ”¸ å®‰å…¨æ€§åŸåˆ™ï¼šä½¿ç”¨subprocessä»£æ›¿os.systemï¼ŒéªŒè¯ç”¨æˆ·è¾“å…¥
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šç³»ç»Ÿæ“ä½œå®¹æ˜“å‡ºé”™ï¼Œå¿…é¡»åšå¥½å¼‚å¸¸å¤„ç†
```

### 10.2 æ¨¡å—é€‰æ‹©æŒ‡å—


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªæ¨¡å—**ï¼š
```
ğŸ“Œ è·å–å‘½ä»¤è¡Œå‚æ•°ï¼š
â€¢ ç®€å•åœºæ™¯ â†’ sys.argv
â€¢ å¤æ‚åœºæ™¯ â†’ argparse
â€¢ å…¼å®¹è€ä»£ç  â†’ getopt

ğŸ“Œ æ–‡ä»¶æ“ä½œï¼š
â€¢ è·¯å¾„å¤„ç† â†’ os.path
â€¢ ç›®å½•æ“ä½œ â†’ os (mkdir, listdirç­‰)
â€¢ é«˜çº§æ“ä½œ â†’ pathlib (Python 3.4+)

ğŸ“Œ æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼š
â€¢ ç®€å•å‘½ä»¤ â†’ subprocess.run()
â€¢ å¤æ‚äº¤äº’ â†’ subprocess.Popen()
â€¢ é¿å…ä½¿ç”¨ â†’ os.system() (ä¸å®‰å…¨)

ğŸ“Œ ç³»ç»Ÿä¿¡æ¯ï¼š
â€¢ åŸºæœ¬ä¿¡æ¯ â†’ platform
â€¢ Pythonä¿¡æ¯ â†’ sys
â€¢ è¯¦ç»†ä¿¡æ¯ â†’ psutil (ç¬¬ä¸‰æ–¹åº“)
```

### 10.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ”¹ ä»£ç è§„èŒƒ**ï¼š
```python
# âœ… æ¨èåšæ³•
import subprocess
import os.path
import argparse

# âŒ é¿å…åšæ³•
from os import *  # æ±¡æŸ“å‘½åç©ºé—´
import os, sys, platform  # ä¸€è¡Œå¯¼å…¥å¤šä¸ªæ¨¡å—
```

**ğŸ”¹ é”™è¯¯å¤„ç†**ï¼š
```python
# âœ… æ¨èåšæ³•
try:
    result = subprocess.run(['command'], check=True, capture_output=True)
except subprocess.CalledProcessError as e:
    print(f"å‘½ä»¤æ‰§è¡Œå¤±è´¥: {e}")
except FileNotFoundError:
    print("å‘½ä»¤ä¸å­˜åœ¨")

# âŒ é¿å…åšæ³•
result = subprocess.run(['command'])  # ä¸å¤„ç†é”™è¯¯
```

**ğŸ”¹ è·¨å¹³å°å…¼å®¹**ï¼š
```python
# âœ… æ¨èåšæ³•
if platform.system() == "Windows":
    # Windowsç‰¹å®šä»£ç 
else:
    # Unix/Linuxç‰¹å®šä»£ç 

# âŒ é¿å…åšæ³•
os.system('cls')  # åªåœ¨Windowsæœ‰æ•ˆ
```

### 10.4 å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ


**ğŸ”¹ æƒé™é—®é¢˜**ï¼š
```python
# é—®é¢˜ï¼šæ²¡æœ‰æƒé™æ‰§è¡ŒæŸäº›æ“ä½œ
# è§£å†³ï¼šæ£€æŸ¥æƒé™ï¼Œæä¾›å‹å¥½æç¤º
try:
    os.mkdir('/root/test')
except PermissionError:
    print("âŒ æƒé™ä¸è¶³ï¼Œè¯·ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ")
```

**ğŸ”¹ è·¯å¾„é—®é¢˜**ï¼š
```python
# é—®é¢˜ï¼šç¡¬ç¼–ç è·¯å¾„å¯¼è‡´è·¨å¹³å°é—®é¢˜
# âŒ é”™è¯¯åšæ³•
path = "C:\\Users\\data\\file.txt"

# âœ… æ­£ç¡®åšæ³•
path = os.path.join(os.path.expanduser("~"), "data", "file.txt")
```

**ğŸ”¹ ç¼–ç é—®é¢˜**ï¼š
```python
# é—®é¢˜ï¼šä¸åŒç³»ç»Ÿé»˜è®¤ç¼–ç ä¸åŒ
# âœ… è§£å†³æ–¹æ¡ˆ
result = subprocess.run(['command'], 
                       capture_output=True, 
                       text=True,           # é‡è¦ï¼šæŒ‡å®šæ–‡æœ¬æ¨¡å¼
                       encoding='utf-8')    # æ˜ç¡®æŒ‡å®šç¼–ç 
```

### 10.5 å­¦ä¹ è¿›é˜¶è·¯å¾„


```
ğŸ“š è¿›é˜¶å­¦ä¹ å»ºè®®ï¼š

ç¬¬ä¸€é˜¶æ®µ - åŸºç¡€æŒæ¡ï¼š
âœ… ç†Ÿç»ƒä½¿ç”¨ sys.argv å’Œ os.path
âœ… æŒæ¡åŸºæœ¬çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œ
âœ… ç†è§£ç¯å¢ƒå˜é‡çš„æ¦‚å¿µå’Œä½¿ç”¨

ç¬¬äºŒé˜¶æ®µ - å·¥å…·å¼€å‘ï¼š
âœ… ä½¿ç”¨ argparse å¼€å‘å‘½ä»¤è¡Œå·¥å…·
âœ… æŒæ¡ subprocess æ‰§è¡Œå¤–éƒ¨ç¨‹åº
âœ… å­¦ä¼šè·¨å¹³å°å…¼å®¹æ€§å¤„ç†

ç¬¬ä¸‰é˜¶æ®µ - ä¸“ä¸šåº”ç”¨ï¼š
âœ… å­¦ä¹  pathlib æ¨¡å—ï¼ˆç°ä»£è·¯å¾„å¤„ç†ï¼‰
âœ… æŒæ¡ psutil åº“ï¼ˆé«˜çº§ç³»ç»Ÿç›‘æ§ï¼‰
âœ… äº†è§£ asyncio.subprocessï¼ˆå¼‚æ­¥å­è¿›ç¨‹ï¼‰

å®æˆ˜é¡¹ç›®æ¨èï¼š
ğŸ¯ æ–‡ä»¶æ‰¹å¤„ç†å·¥å…·
ğŸ¯ ç³»ç»Ÿç›‘æ§è„šæœ¬
ğŸ¯ è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·
ğŸ¯ æ—¥å¿—åˆ†æç¨‹åº
```

### 10.6 å®ç”¨é€ŸæŸ¥è¡¨


| éœ€æ±‚ | **æ¨èæ¨¡å—** | **æ ¸å¿ƒå‡½æ•°** | **ç¤ºä¾‹ä»£ç ** |
|------|-------------|-------------|-------------|
| ğŸ“ **å‘½ä»¤è¡Œå‚æ•°** | `argparse` | `ArgumentParser()` | `parser.add_argument()` |
| ğŸ“ **è·¯å¾„æ“ä½œ** | `os.path` | `join(), exists()` | `os.path.join('a', 'b')` |
| ğŸ” **ç³»ç»Ÿä¿¡æ¯** | `platform` | `system(), version()` | `platform.system()` |
| âš™ï¸ **æ‰§è¡Œå‘½ä»¤** | `subprocess` | `run(), Popen()` | `subprocess.run(['ls'])` |
| ğŸŒ **ç¯å¢ƒå˜é‡** | `os.environ` | `get(), setdefault()` | `os.environ.get('PATH')` |

**ğŸ¯ æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- sysç®¡Pythonå†…ï¼Œosç®¡ç³»ç»Ÿå¤–
- argparseè§£å‚æ•°ï¼Œsubprocessè·‘å‘½ä»¤
- platformè¯†ç³»ç»Ÿï¼Œenvironç®¡ç¯å¢ƒ
- å®‰å…¨ç¬¬ä¸€æ¡ï¼Œå¼‚å¸¸è¦å¤„ç†

**ğŸ’¡ æœ€åæé†’**ï¼š
- ç³»ç»Ÿæ¨¡å—åŠŸèƒ½å¼ºå¤§ï¼Œä½†è¦è°¨æ…ä½¿ç”¨
- å§‹ç»ˆè€ƒè™‘è·¨å¹³å°å…¼å®¹æ€§
- åšå¥½é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- ä»ç®€å•åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥æŒæ¡å¤æ‚ç‰¹æ€§