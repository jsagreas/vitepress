---
title: 2ã€æ¯”è¾ƒè¿ç®—ç¬¦è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [æ¯”è¾ƒè¿ç®—ç¬¦åŸºç¡€æ¦‚å¿µ](#1-æ¯”è¾ƒè¿ç®—ç¬¦åŸºç¡€æ¦‚å¿µ)
2. [ç›¸ç­‰æ¯”è¾ƒè¯¦è§£](#2-ç›¸ç­‰æ¯”è¾ƒè¯¦è§£)
3. [å¤§å°æ¯”è¾ƒè¿ç®—](#3-å¤§å°æ¯”è¾ƒè¿ç®—)
4. [èº«ä»½æ¯”è¾ƒæ·±å…¥ç†è§£](#4-èº«ä»½æ¯”è¾ƒæ·±å…¥ç†è§£)
5. [æˆå‘˜æ¯”è¾ƒå®æˆ˜åº”ç”¨](#5-æˆå‘˜æ¯”è¾ƒå®æˆ˜åº”ç”¨)
6. [é“¾å¼æ¯”è¾ƒçš„å·§å¦™ç”¨æ³•](#6-é“¾å¼æ¯”è¾ƒçš„å·§å¦™ç”¨æ³•)
7. [æ¯”è¾ƒè¿ç®—è¿”å›å€¼æœºåˆ¶](#7-æ¯”è¾ƒè¿ç®—è¿”å›å€¼æœºåˆ¶)
8. [è‡ªå®šä¹‰æ¯”è¾ƒè¡Œä¸º](#8-è‡ªå®šä¹‰æ¯”è¾ƒè¡Œä¸º)
9. [æ¯”è¾ƒè¿ç®—æ€§èƒ½ä¼˜åŒ–](#9-æ¯”è¾ƒè¿ç®—æ€§èƒ½ä¼˜åŒ–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ¯”è¾ƒè¿ç®—ç¬¦åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ¯”è¾ƒè¿ç®—ç¬¦

ğŸ¤” **ç®€å•ç†è§£**ï¼šæ¯”è¾ƒè¿ç®—ç¬¦å°±åƒç”Ÿæ´»ä¸­çš„"æ¯”ä¸€æ¯”"

```
ç”Ÿæ´»ä¸­çš„æ¯”è¾ƒï¼š
"å°æ˜çš„èº«é«˜æ¯”å°çº¢é«˜" â†’ å¤§å°æ¯”è¾ƒ
"è¿™ä¸¤ä¸ªè‹¹æœä¸€æ ·é‡" â†’ ç›¸ç­‰æ¯”è¾ƒ
"è¿™æ˜¯æˆ‘çš„ä¹¦åŒ…" â†’ èº«ä»½æ¯”è¾ƒ
"å°ç‹åœ¨æˆ‘ä»¬ç­" â†’ æˆå‘˜æ¯”è¾ƒ

Pythonä¸­çš„æ¯”è¾ƒï¼š
a > b  â†’ æ•°å€¼å¤§å°æ¯”è¾ƒ
a == b â†’ å€¼æ˜¯å¦ç›¸ç­‰
a is b â†’ æ˜¯å¦åŒä¸€ä¸ªå¯¹è±¡
a in b â†’ æ˜¯å¦åœ¨å®¹å™¨ä¸­
```

**ğŸ”¸ æ¯”è¾ƒè¿ç®—ç¬¦çš„æ ¸å¿ƒä½œç”¨**
```
åˆ¤æ–­å…³ç³»ï¼šæ¯”è¾ƒä¸¤ä¸ªå€¼ä¹‹é—´çš„å…³ç³»
è¿”å›å¸ƒå°”å€¼ï¼šç»“æœæ€»æ˜¯Trueæˆ–False
å†³ç­–åŸºç¡€ï¼šæ˜¯ifè¯­å¥ç­‰æ¡ä»¶åˆ¤æ–­çš„åŸºç¡€
é€»è¾‘æ§åˆ¶ï¼šæ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹
```

### 1.2 Pythonæ¯”è¾ƒè¿ç®—ç¬¦å®¶æ—

**ğŸ“Š æ¯”è¾ƒè¿ç®—ç¬¦åˆ†ç±»è¡¨**

| ç±»å‹ | **è¿ç®—ç¬¦** | **å«ä¹‰** | **ç¤ºä¾‹** | **è¿”å›å€¼** |
|------|-----------|---------|---------|-----------|
| ğŸ”¸ **ç›¸ç­‰æ¯”è¾ƒ** | `==, !=` | å€¼æ˜¯å¦ç›¸ç­‰ | `5 == 5` | `True` |
| ğŸ”¸ **å¤§å°æ¯”è¾ƒ** | `>, <, >=, <=` | å¤§å°å…³ç³» | `5 > 3` | `True` |
| ğŸ”¸ **èº«ä»½æ¯”è¾ƒ** | `is, is not` | åŒä¸€å¯¹è±¡ | `a is b` | `True/False` |
| ğŸ”¸ **æˆå‘˜æ¯”è¾ƒ** | `in, not in` | åŒ…å«å…³ç³» | `'a' in 'abc'` | `True` |

### 1.3 æ¯”è¾ƒç»“æœçš„æœ¬è´¨

**ğŸ’¡ æ·±å…¥ç†è§£æ¯”è¾ƒè¿ç®—**

```python
# æ¯”è¾ƒè¿ç®—çš„æœ¬è´¨æ˜¯è°ƒç”¨å¯¹è±¡çš„ç‰¹æ®Šæ–¹æ³•
a = 5
b = 3

# è¿™äº›å†™æ³•æ˜¯ç­‰ä»·çš„
result1 = a > b          # ç®€æ´å†™æ³•
result2 = a.__gt__(b)    # åº•å±‚å®ç°
result3 = type(a).__gt__(a, b)  # å®Œæ•´å½¢å¼

print(result1, result2, result3)  # éƒ½æ˜¯ True
```

**ğŸ” æ¯”è¾ƒè¿ç®—çš„æ‰§è¡Œè¿‡ç¨‹**
```
æ¯”è¾ƒæ‰§è¡Œæ­¥éª¤ï¼š
1. PythonæŸ¥æ‰¾å·¦æ“ä½œæ•°çš„æ¯”è¾ƒæ–¹æ³•
2. å¦‚æœå·¦æ“ä½œæ•°ä¸æ”¯æŒï¼Œå°è¯•å³æ“ä½œæ•°çš„åå‘æ–¹æ³•
3. æ‰§è¡Œæ¯”è¾ƒé€»è¾‘ï¼Œè¿”å›å¸ƒå°”å€¼
4. å¦‚æœéƒ½ä¸æ”¯æŒï¼ŒæŠ›å‡ºTypeErrorå¼‚å¸¸

ç¤ºä¾‹ç†è§£ï¼š
a == b çš„æ‰§è¡Œè¿‡ç¨‹ï¼š
â”œâ”€â”€ å°è¯• a.__eq__(b)
â”œâ”€â”€ å¦‚æœå¤±è´¥ï¼Œå°è¯• b.__eq__(a)
â”œâ”€â”€ å¦‚æœè¿˜å¤±è´¥ï¼Œå°è¯• a.__ne__(b) çš„åå‘
â””â”€â”€ æœ€åè¿”å› NotImplemented æˆ–æŠ›å‡ºå¼‚å¸¸
```

---

## 2. âš–ï¸ ç›¸ç­‰æ¯”è¾ƒè¯¦è§£


### 2.1 ç›¸ç­‰ï¼ˆ==ï¼‰vs ä¸ç­‰ï¼ˆ!=ï¼‰çš„æœ¬è´¨

**ğŸ¯ ç†è§£å€¼ç›¸ç­‰çš„æ¦‚å¿µ**

```python
# åŸºæœ¬çš„ç›¸ç­‰æ¯”è¾ƒ
name1 = "å¼ ä¸‰"
name2 = "å¼ ä¸‰"
name3 = "æå››"

print(name1 == name2)  # True - å†…å®¹ç›¸åŒ
print(name1 == name3)  # False - å†…å®¹ä¸åŒ
print(name1 != name3)  # True - å†…å®¹ç¡®å®ä¸åŒ
```

**ğŸ’¡ ä¸åŒç±»å‹çš„ç›¸ç­‰æ¯”è¾ƒ**
```python
# æ•°å­—ç±»å‹çš„ç›¸ç­‰æ¯”è¾ƒ
age_int = 25
age_float = 25.0
age_str = "25"

print(age_int == age_float)  # True - Pythonè‡ªåŠ¨ç±»å‹è½¬æ¢
print(age_int == age_str)    # False - ä¸åŒç±»å‹ï¼Œä¸ç›¸ç­‰
print(int(age_str) == age_int)  # True - æ‰‹åŠ¨è½¬æ¢åç›¸ç­‰

# é›†åˆç±»å‹çš„ç›¸ç­‰æ¯”è¾ƒ
list1 = [1, 2, 3]
list2 = [1, 2, 3]
list3 = [3, 2, 1]

print(list1 == list2)  # True - é¡ºåºå’Œå†…å®¹éƒ½ç›¸åŒ
print(list1 == list3)  # False - é¡ºåºä¸åŒ
```

### 2.2 ç›¸ç­‰æ¯”è¾ƒçš„ç‰¹æ®Šæƒ…å†µ

**âš ï¸ éœ€è¦æ³¨æ„çš„é™·é˜±**

```python
# æµ®ç‚¹æ•°æ¯”è¾ƒçš„é™·é˜±
a = 0.1 + 0.2
b = 0.3

print(a == b)  # False - æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
print(f"a = {a}")  # a = 0.30000000000000004
print(f"b = {b}")  # b = 0.3

# æ­£ç¡®çš„æµ®ç‚¹æ•°æ¯”è¾ƒæ–¹æ³•
import math
print(math.isclose(a, b))  # True - ä½¿ç”¨å®¹å·®æ¯”è¾ƒ
print(abs(a - b) < 1e-10)  # True - æ‰‹åŠ¨è®¾ç½®ç²¾åº¦
```

**ğŸ”§ Noneå€¼çš„æ¯”è¾ƒ**
```python
# Noneçš„æ¯”è¾ƒ
value1 = None
value2 = None
value3 = 0
value4 = ""
value5 = []

print(value1 == value2)  # True - ä¸¤ä¸ªNoneç›¸ç­‰
print(value1 == value3)  # False - Noneä¸ç­‰äº0
print(value1 == value4)  # False - Noneä¸ç­‰äºç©ºå­—ç¬¦ä¸²
print(value1 == value5)  # False - Noneä¸ç­‰äºç©ºåˆ—è¡¨

# æ¨èçš„Noneæ£€æŸ¥æ–¹å¼
if value1 is None:  # æ¨èç”¨ is æ£€æŸ¥None
    print("å€¼ä¸ºNone")
```

### 2.3 è‡ªå®šä¹‰ç±»çš„ç›¸ç­‰æ¯”è¾ƒ

**ğŸ› ï¸ è®©è‡ªå·±çš„ç±»æ”¯æŒç›¸ç­‰æ¯”è¾ƒ**

```python
class Student:
    def __init__(self, name, student_id):
        self.name = name
        self.student_id = student_id
    
    # å®šä¹‰ç›¸ç­‰æ¯”è¾ƒçš„è§„åˆ™
    def __eq__(self, other):
        if not isinstance(other, Student):
            return False
        return self.student_id == other.student_id
    
    # å®šä¹‰ä¸ç­‰æ¯”è¾ƒï¼ˆPython3ä¸­é€šå¸¸ä¸éœ€è¦ï¼‰
    def __ne__(self, other):
        return not self.__eq__(other)
    
    def __repr__(self):
        return f"Student('{self.name}', '{self.student_id}')"

# ä½¿ç”¨è‡ªå®šä¹‰çš„ç›¸ç­‰æ¯”è¾ƒ
student1 = Student("å¼ ä¸‰", "S001")
student2 = Student("å¼ ä¸‰", "S001")  # ç›¸åŒå­¦å·
student3 = Student("æå››", "S001")  # åŒå­¦å·ä¸åŒå§“å
student4 = Student("å¼ ä¸‰", "S002")  # åŒå§“åä¸åŒå­¦å·

print(student1 == student2)  # True - å­¦å·ç›¸åŒ
print(student1 == student3)  # True - åªçœ‹å­¦å·
print(student1 == student4)  # False - å­¦å·ä¸åŒ
```

---

## 3. ğŸ“ å¤§å°æ¯”è¾ƒè¿ç®—


### 3.1 æ•°å€¼å¤§å°æ¯”è¾ƒåŸºç¡€

**ğŸ”¢ æ•°å­—ä¹‹é—´çš„å¤§å°å…³ç³»**

```python
# åŸºæœ¬çš„æ•°å€¼æ¯”è¾ƒ
score1 = 85
score2 = 92
score3 = 85

print(score2 > score1)   # True - 92å¤§äº85
print(score1 < score2)   # True - 85å°äº92
print(score1 >= score3)  # True - 85å¤§äºç­‰äº85
print(score1 <= score3)  # True - 85å°äºç­‰äº85

# ä¸åŒæ•°å€¼ç±»å‹çš„æ¯”è¾ƒ
int_num = 10
float_num = 10.5
complex_num = 10 + 0j

print(int_num < float_num)     # True - æ•´æ•°å¯ä»¥å’Œæµ®ç‚¹æ•°æ¯”è¾ƒ
# print(int_num < complex_num)  # TypeError - å¤æ•°ä¸èƒ½æ¯”è¾ƒå¤§å°
```

**ğŸ’° å®é™…åº”ç”¨ï¼šä»·æ ¼æ¯”è¾ƒç³»ç»Ÿ**
```python
def compare_prices(price1, price2):
    """æ¯”è¾ƒä¸¤ä¸ªä»·æ ¼ï¼Œè¿”å›æ›´ä¾¿å®œçš„é€‰æ‹©"""
    if price1 < price2:
        return f"é€‰æ‹©ä»·æ ¼{price1}çš„å•†å“ï¼Œä¾¿å®œ{price2 - price1}å…ƒ"
    elif price1 > price2:
        return f"é€‰æ‹©ä»·æ ¼{price2}çš„å•†å“ï¼Œä¾¿å®œ{price1 - price2}å…ƒ"
    else:
        return f"ä¸¤ä¸ªå•†å“ä»·æ ¼ç›¸åŒï¼Œéƒ½æ˜¯{price1}å…ƒ"

# ä½¿ç”¨ä»·æ ¼æ¯”è¾ƒ
print(compare_prices(199.9, 259.0))  # é€‰æ‹©æ›´ä¾¿å®œçš„
print(compare_prices(100, 100))      # ä»·æ ¼ç›¸åŒ
```

### 3.2 å­—ç¬¦ä¸²çš„å¤§å°æ¯”è¾ƒ

**ğŸ“ å­—ç¬¦ä¸²æŒ‰å­—å…¸åºæ¯”è¾ƒ**

```python
# å­—ç¬¦ä¸²çš„å­—å…¸åºæ¯”è¾ƒ
name1 = "apple"
name2 = "banana"
name3 = "Apple"  # æ³¨æ„å¤§å†™

print(name1 < name2)  # True - 'a' < 'b'
print(name1 > name3)  # True - å°å†™å­—æ¯ASCIIå€¼å¤§äºå¤§å†™

# å®é™…åº”ç”¨ï¼šå§“åæ’åº
names = ["å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­"]
names.sort()  # ä½¿ç”¨é»˜è®¤çš„å­—ç¬¦ä¸²æ¯”è¾ƒ
print("æŒ‰å§“æ°æ’åº:", names)

# å­—ç¬¦ä¸²é•¿åº¦ä¸å½±å“å­—å…¸åº
short_str = "z"
long_str = "apple"
print(short_str > long_str)  # True - 'z' > 'a'
```

**ğŸ”¤ ä¸­æ–‡å­—ç¬¦ä¸²æ¯”è¾ƒçš„æ³¨æ„äº‹é¡¹**
```python
# ä¸­æ–‡å­—ç¬¦ä¸²çš„æ¯”è¾ƒ
chinese1 = "è‹¹æœ"
chinese2 = "é¦™è•‰"
english = "apple"

print(chinese1 < chinese2)  # æŒ‰Unicodeç¼–ç æ¯”è¾ƒ
print(chinese1 < english)   # ä¸­æ–‡Unicodeå€¼é€šå¸¸å¾ˆå¤§

# æ›´å®ç”¨çš„ä¸­æ–‡æ’åºæ–¹æ³•
import locale
# locale.setlocale(locale.LC_ALL, 'zh_CN.UTF-8')  # è®¾ç½®ä¸­æ–‡ç¯å¢ƒ

names_cn = ["å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­"]
# åœ¨å®é™…é¡¹ç›®ä¸­å¯èƒ½éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚pypinyinè¿›è¡Œæ‹¼éŸ³æ’åº
```

### 3.3 åˆ—è¡¨å’Œå…ƒç»„çš„å¤§å°æ¯”è¾ƒ

**ğŸ“‹ åºåˆ—ç±»å‹çš„å­—å…¸åºæ¯”è¾ƒ**

```python
# åˆ—è¡¨çš„å­—å…¸åºæ¯”è¾ƒ
list1 = [1, 2, 3]
list2 = [1, 2, 4]
list3 = [1, 2]
list4 = [2, 1]

print(list1 < list2)  # True - ç¬¬ä¸‰ä¸ªå…ƒç´  3 < 4
print(list1 > list3)  # True - æ›´é•¿çš„åˆ—è¡¨"æ›´å¤§"
print(list1 < list4)  # True - ç¬¬ä¸€ä¸ªå…ƒç´  1 < 2

# å®é™…åº”ç”¨ï¼šç‰ˆæœ¬å·æ¯”è¾ƒ
version1 = [1, 2, 3]  # ç‰ˆæœ¬ 1.2.3
version2 = [1, 2, 10] # ç‰ˆæœ¬ 1.2.10
version3 = [1, 3, 0]  # ç‰ˆæœ¬ 1.3.0

print(version1 < version2)  # True - 1.2.3 < 1.2.10
print(version1 < version3)  # True - 1.2.3 < 1.3.0

def is_newer_version(v1, v2):
    """åˆ¤æ–­v1æ˜¯å¦æ¯”v2æ›´æ–°"""
    return v1 > v2

print(is_newer_version([2, 0, 0], [1, 9, 9]))  # True
```

---

## 4. ğŸ” èº«ä»½æ¯”è¾ƒæ·±å…¥ç†è§£


### 4.1 èº«ä»½æ¯”è¾ƒï¼ˆisï¼‰çš„æœ¬è´¨

**ğŸ¯ ç†è§£å¯¹è±¡èº«ä»½vså¯¹è±¡å€¼**

```python
# èº«ä»½æ¯”è¾ƒçš„åŸºæœ¬æ¦‚å¿µ
a = [1, 2, 3]
b = [1, 2, 3]
c = a

print(a == b)  # True - å€¼ç›¸ç­‰
print(a is b)  # False - ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡
print(a is c)  # True - æ˜¯åŒä¸€ä¸ªå¯¹è±¡

# æŸ¥çœ‹å¯¹è±¡çš„èº«ä»½ï¼ˆå†…å­˜åœ°å€ï¼‰
print(f"açš„åœ°å€: {id(a)}")
print(f"bçš„åœ°å€: {id(b)}")
print(f"cçš„åœ°å€: {id(c)}")
```

**ğŸ’¡ èº«ä»½æ¯”è¾ƒçš„å®é™…å«ä¹‰**
```
èº«ä»½æ¯”è¾ƒçš„æœ¬è´¨ï¼š
- is æ£€æŸ¥ä¸¤ä¸ªå˜é‡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå†…å­˜å¯¹è±¡
- == æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰
- èº«ä»½ç›¸åŒä¸€å®šå€¼ç›¸ç­‰ï¼Œä½†å€¼ç›¸ç­‰ä¸ä¸€å®šèº«ä»½ç›¸åŒ

ç”Ÿæ´»ç±»æ¯”ï¼š
åŒèƒèƒå…„å¼Ÿ â†’ é•¿å¾—ä¸€æ ·ï¼ˆå€¼ç›¸ç­‰==ï¼‰ä½†æ˜¯ä¸åŒçš„äººï¼ˆèº«ä»½ä¸åŒisï¼‰
åŒä¸€ä¸ªäººçš„ä¸¤ä¸ªåå­— â†’ åŒä¸€ä¸ªäººï¼ˆèº«ä»½ç›¸åŒisï¼‰å€¼ä¹Ÿä¸€æ ·ï¼ˆ==ï¼‰
```

### 4.2 å°æ•´æ•°å’Œå­—ç¬¦ä¸²çš„ç¼“å­˜æœºåˆ¶

**âš¡ Pythonçš„å†…å­˜ä¼˜åŒ–ç­–ç•¥**

```python
# å°æ•´æ•°çš„ç¼“å­˜ï¼ˆ-5 åˆ° 256ï¼‰
a = 100
b = 100
print(a is b)  # True - å°æ•´æ•°è¢«ç¼“å­˜

x = 1000
y = 1000
print(x is y)  # å¯èƒ½æ˜¯False - å¤§æ•´æ•°ä¸ç¼“å­˜

# çŸ­å­—ç¬¦ä¸²çš„ç¼“å­˜
str1 = "hello"
str2 = "hello"
print(str1 is str2)  # True - çŸ­å­—ç¬¦ä¸²ç¼“å­˜

# é•¿å­—ç¬¦ä¸²æˆ–ç‰¹æ®Šå­—ç¬¦ä¸²
long_str1 = "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²" * 100
long_str2 = "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²" * 100
print(long_str1 is long_str2)  # å¯èƒ½æ˜¯False
```

**ğŸ”§ å®é™…ç¼–ç¨‹ä¸­çš„æœ€ä½³å®è·µ**
```python
# é”™è¯¯çš„åšæ³• - ä¸è¦ç”¨isæ¯”è¾ƒå€¼
def bad_check_empty(data):
    if data is "":  # é”™è¯¯ï¼åº”è¯¥ç”¨ ==
        return True
    return False

# æ­£ç¡®çš„åšæ³•
def good_check_empty(data):
    if data == "":  # æ­£ç¡® - æ¯”è¾ƒå€¼
        return True
    return False

# isçš„æ­£ç¡®ç”¨æ³• - æ£€æŸ¥None
def process_data(data=None):
    if data is None:  # æ­£ç¡® - Noneæ£€æŸ¥ç”¨is
        data = []
    return data

# isçš„å¦ä¸€ä¸ªæ­£ç¡®ç”¨æ³• - æ£€æŸ¥å…·ä½“å¯¹è±¡
class Singleton:
    _instance = None
    
    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
        return cls._instance

obj1 = Singleton()
obj2 = Singleton()
print(obj1 is obj2)  # True - å•ä¾‹æ¨¡å¼
```

### 4.3 èº«ä»½æ¯”è¾ƒçš„åº”ç”¨åœºæ™¯

**ğŸª èº«ä»½æ¯”è¾ƒçš„å®é™…ç”¨é€”**

```python
# åœºæ™¯1ï¼šæ£€æŸ¥é»˜è®¤å‚æ•°
def append_to_list(item, target_list=None):
    if target_list is None:  # æ­£ç¡®ç”¨æ³•
        target_list = []
    target_list.append(item)
    return target_list

# åœºæ™¯2ï¼šæ£€æŸ¥å¯¹è±¡ç±»å‹
def process_special_list(data):
    special_list = [1, 2, 3]
    
    if data is special_list:  # æ£€æŸ¥æ˜¯å¦æ˜¯ç‰¹å®šå¯¹è±¡
        return "è¿™æ˜¯ç‰¹æ®Šåˆ—è¡¨"
    elif data == special_list:  # æ£€æŸ¥å€¼æ˜¯å¦ç›¸åŒ
        return "å€¼ç›¸åŒä½†ä¸æ˜¯ç‰¹æ®Šåˆ—è¡¨"
    else:
        return "æ™®é€šæ•°æ®"

# åœºæ™¯3ï¼šç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–
class Calculator:
    def __init__(self):
        self._cache = {}
    
    def expensive_calculation(self, data):
        # ä½¿ç”¨å¯¹è±¡èº«ä»½ä½œä¸ºç¼“å­˜é”®
        cache_key = id(data)
        
        if cache_key in self._cache:
            return self._cache[cache_key]
        
        # æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
        result = sum(data) * len(data)
        self._cache[cache_key] = result
        return result
```

---

## 5. ğŸ“¦ æˆå‘˜æ¯”è¾ƒå®æˆ˜åº”ç”¨


### 5.1 æˆå‘˜æ¯”è¾ƒï¼ˆin/not inï¼‰åŸºç¡€

**ğŸ” æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨å®¹å™¨ä¸­**

```python
# åŸºæœ¬çš„æˆå‘˜æ£€æŸ¥
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­", "è‘¡è„"]
favorite = "è‹¹æœ"
dislike = "æ¦´è²"

print(favorite in fruits)     # True - è‹¹æœåœ¨æ°´æœåˆ—è¡¨ä¸­
print(dislike not in fruits)  # True - æ¦´è²ä¸åœ¨æ°´æœåˆ—è¡¨ä¸­

# å­—ç¬¦ä¸²ä¸­çš„æˆå‘˜æ£€æŸ¥
text = "Pythonæ˜¯ä¸€é—¨å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€"
keyword = "Python"
other = "Java"

print(keyword in text)  # True - å­å­—ç¬¦ä¸²åŒ…å«
print(other in text)    # False - ä¸åŒ…å«Java
```

**ğŸ“š å®é™…åº”ç”¨ï¼šæƒé™æ£€æŸ¥ç³»ç»Ÿ**
```python
# æƒé™ç®¡ç†ç¤ºä¾‹
class UserPermission:
    def __init__(self, username):
        self.username = username
        self.permissions = set()  # ä½¿ç”¨é›†åˆæé«˜æŸ¥æ‰¾æ•ˆç‡
    
    def add_permission(self, permission):
        self.permissions.add(permission)
    
    def has_permission(self, permission):
        return permission in self.permissions
    
    def can_access(self, required_permissions):
        # æ£€æŸ¥æ˜¯å¦æ‹¥æœ‰æ‰€æœ‰å¿…éœ€æƒé™
        return all(perm in self.permissions for perm in required_permissions)

# ä½¿ç”¨æƒé™ç³»ç»Ÿ
admin = UserPermission("admin")
admin.add_permission("read")
admin.add_permission("write") 
admin.add_permission("delete")

user = UserPermission("user001")
user.add_permission("read")

print(admin.has_permission("delete"))  # True
print(user.has_permission("delete"))   # False
print(admin.can_access(["read", "write"]))  # True
```

### 5.2 ä¸åŒå®¹å™¨ç±»å‹çš„æˆå‘˜æ£€æŸ¥

**ğŸ“Š å„ç§æ•°æ®ç»“æ„çš„æˆå‘˜æ£€æŸ¥æ€§èƒ½**

```python
import time

# å‡†å¤‡æµ‹è¯•æ•°æ®
test_data = list(range(10000))
test_set = set(test_data)
test_dict = {i: f"value_{i}" for i in test_data}
search_item = 9999

# åˆ—è¡¨ä¸­çš„æˆå‘˜æ£€æŸ¥ï¼ˆO(n)ï¼‰
start = time.time()
result1 = search_item in test_data  # éœ€è¦éå†
list_time = time.time() - start

# é›†åˆä¸­çš„æˆå‘˜æ£€æŸ¥ï¼ˆO(1)ï¼‰
start = time.time()
result2 = search_item in test_set   # å“ˆå¸ŒæŸ¥æ‰¾
set_time = time.time() - start

# å­—å…¸é”®çš„æˆå‘˜æ£€æŸ¥ï¼ˆO(1)ï¼‰
start = time.time()
result3 = search_item in test_dict  # æ£€æŸ¥é”®
dict_time = time.time() - start

print(f"åˆ—è¡¨æŸ¥æ‰¾è€—æ—¶: {list_time:.6f}ç§’")
print(f"é›†åˆæŸ¥æ‰¾è€—æ—¶: {set_time:.6f}ç§’")
print(f"å­—å…¸æŸ¥æ‰¾è€—æ—¶: {dict_time:.6f}ç§’")
```

**âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
```python
# æ€§èƒ½å¯¹æ¯”æ€»ç»“
performance_table = """
å®¹å™¨ç±»å‹    æˆå‘˜æ£€æŸ¥æ—¶é—´å¤æ‚åº¦    é€‚ç”¨åœºæ™¯
åˆ—è¡¨(list)      O(n)           å°æ•°æ®é‡ï¼Œéœ€è¦ä¿æŒé¡ºåº
å…ƒç»„(tuple)     O(n)           ä¸å¯å˜çš„å°æ•°æ®é‡
é›†åˆ(set)       O(1)           å¤§æ•°æ®é‡ï¼Œä¸éœ€è¦é¡ºåº
å­—å…¸(dict)      O(1)           éœ€è¦é”®å€¼å¯¹åº”å…³ç³»
"""

# å®é™…åº”ç”¨ï¼šé€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„
class FastUserChecker:
    def __init__(self):
        # ä½¿ç”¨é›†åˆè€Œä¸æ˜¯åˆ—è¡¨æ¥å­˜å‚¨ç”¨æˆ·ID
        self.valid_users = set()
        self.banned_users = set()
    
    def add_user(self, user_id):
        self.valid_users.add(user_id)
    
    def ban_user(self, user_id):
        self.banned_users.add(user_id)
    
    def is_valid_user(self, user_id):
        return (user_id in self.valid_users and 
                user_id not in self.banned_users)

# æ‰¹é‡æ£€æŸ¥ç”¨æˆ·
checker = FastUserChecker()
for i in range(1000):
    checker.add_user(f"user_{i}")

checker.ban_user("user_500")

# å¿«é€Ÿæ£€æŸ¥ï¼ˆO(1)æ“ä½œï¼‰
print(checker.is_valid_user("user_100"))  # True
print(checker.is_valid_user("user_500"))  # False
```

### 5.3 è‡ªå®šä¹‰æˆå‘˜æ£€æŸ¥è¡Œä¸º

**ğŸ› ï¸ è®©è‡ªå·±çš„ç±»æ”¯æŒæˆå‘˜æ£€æŸ¥**

```python
class CustomContainer:
    def __init__(self):
        self.data = {}
        self.aliases = {}  # åˆ«åæ˜ å°„
    
    def add_item(self, key, value, aliases=None):
        self.data[key] = value
        if aliases:
            for alias in aliases:
                self.aliases[alias] = key
    
    def __contains__(self, item):
        """è‡ªå®šä¹‰æˆå‘˜æ£€æŸ¥é€»è¾‘"""
        # æ£€æŸ¥ç›´æ¥é”®
        if item in self.data:
            return True
        
        # æ£€æŸ¥åˆ«å
        if item in self.aliases:
            return True
        
        # æ£€æŸ¥å€¼
        if item in self.data.values():
            return True
        
        return False
    
    def get(self, key):
        """è·å–å€¼ï¼Œæ”¯æŒåˆ«å"""
        if key in self.data:
            return self.data[key]
        elif key in self.aliases:
            real_key = self.aliases[key]
            return self.data[real_key]
        else:
            return None

# ä½¿ç”¨è‡ªå®šä¹‰å®¹å™¨
container = CustomContainer()
container.add_item("python", "ç¼–ç¨‹è¯­è¨€", ["py", "èŸ’è›‡"])
container.add_item("java", "å’–å•¡", ["coffee"])

print("python" in container)    # True - ç›´æ¥é”®
print("py" in container)        # True - åˆ«å
print("ç¼–ç¨‹è¯­è¨€" in container)   # True - å€¼
print("javascript" in container) # False - ä¸å­˜åœ¨
```

---

## 6. ğŸ”— é“¾å¼æ¯”è¾ƒçš„å·§å¦™ç”¨æ³•


### 6.1 é“¾å¼æ¯”è¾ƒçš„è¯­æ³•å’Œé€»è¾‘

**â›“ï¸ å¤šä¸ªæ¯”è¾ƒæ¡ä»¶çš„ç®€æ´å†™æ³•**

```python
# ä¼ ç»Ÿçš„å¤šé‡æ¯”è¾ƒ
age = 25
if age >= 18 and age <= 65:
    print("å·¥ä½œå¹´é¾„æ®µ")

# é“¾å¼æ¯”è¾ƒ - æ›´ç®€æ´ç›´è§‚
if 18 <= age <= 65:
    print("å·¥ä½œå¹´é¾„æ®µ")

# æ›´å¤æ‚çš„é“¾å¼æ¯”è¾ƒ
score = 85
if 60 <= score < 80:
    print("è‰¯å¥½")
elif 80 <= score < 90:
    print("ä¼˜ç§€")
elif 90 <= score <= 100:
    print("å“è¶Š")
```

**ğŸ¯ é“¾å¼æ¯”è¾ƒçš„æ‰§è¡Œé€»è¾‘**
```python
# é“¾å¼æ¯”è¾ƒçš„ç­‰ä»·å½¢å¼
x, y, z = 3, 5, 7

# è¿™ä¸¤ç§å†™æ³•å®Œå…¨ç­‰ä»·
result1 = x < y < z
result2 = x < y and y < z

print(f"é“¾å¼æ¯”è¾ƒ: {result1}")
print(f"ä¼ ç»Ÿæ¯”è¾ƒ: {result2}")

# é“¾å¼æ¯”è¾ƒçš„ä¼˜åŠ¿ï¼šä¸­é—´å€¼åªè®¡ç®—ä¸€æ¬¡
def expensive_calculation():
    print("æ‰§è¡Œå¤æ‚è®¡ç®—...")
    return 10

# é“¾å¼æ¯”è¾ƒä¸­ï¼Œexpensive_calculation()åªæ‰§è¡Œä¸€æ¬¡
if 5 < expensive_calculation() < 15:
    print("åœ¨èŒƒå›´å†…")
```

### 6.2 å®é™…åº”ç”¨åœºæ™¯

**ğŸ“Š æ•°æ®éªŒè¯å’ŒåŒºé—´åˆ¤æ–­**

```python
# åœºæ™¯1ï¼šæˆç»©ç­‰çº§åˆ’åˆ†
def get_grade(score):
    """æ ¹æ®åˆ†æ•°è·å–ç­‰çº§"""
    if not 0 <= score <= 100:
        return "æ— æ•ˆåˆ†æ•°"
    elif 90 <= score <= 100:
        return "A"
    elif 80 <= score < 90:
        return "B"
    elif 70 <= score < 80:
        return "C"
    elif 60 <= score < 70:
        return "D"
    else:
        return "F"

# æµ‹è¯•æˆç»©ç­‰çº§
test_scores = [95, 85, 75, 65, 45, 105]
for score in test_scores:
    grade = get_grade(score)
    print(f"åˆ†æ•° {score}: ç­‰çº§ {grade}")

# åœºæ™¯2ï¼šæ¸©åº¦èˆ’é€‚åº¦åˆ¤æ–­
def comfort_level(temperature):
    """åˆ¤æ–­æ¸©åº¦èˆ’é€‚åº¦"""
    if temperature < 0:
        return "ä¸¥å¯’"
    elif 0 <= temperature < 10:
        return "å¯’å†·"
    elif 10 <= temperature < 20:
        return "å‡‰çˆ½"
    elif 20 <= temperature <= 26:
        return "èˆ’é€‚"
    elif 26 < temperature <= 35:
        return "æ¸©çƒ­"
    else:
        return "ç‚çƒ­"

# åœºæ™¯3ï¼šå¯†ç å¼ºåº¦æ£€æŸ¥
def check_password_strength(password):
    """æ£€æŸ¥å¯†ç å¼ºåº¦"""
    length = len(password)
    
    if length < 6:
        return "å¤ªçŸ­"
    elif 6 <= length < 8:
        return "ä¸€èˆ¬"
    elif 8 <= length <= 12:
        return "è‰¯å¥½"
    elif 12 < length <= 20:
        return "å¾ˆå¼º"
    else:
        return "è¿‡é•¿"

passwords = ["123", "abc123", "mypassword", "very_secure_password_2024", "a" * 25]
for pwd in passwords:
    strength = check_password_strength(pwd)
    print(f"å¯†ç  '{pwd[:10]}...' å¼ºåº¦: {strength}")
```

### 6.3 é“¾å¼æ¯”è¾ƒçš„æ³¨æ„äº‹é¡¹

**âš ï¸ é¿å…å¸¸è§é™·é˜±**

```python
# é™·é˜±1ï¼šé”™è¯¯çš„ä¸ç­‰å¼é“¾
a, b, c = 1, 2, 1

# è¿™ä¸æ˜¯æ•°å­¦ä¸Šçš„ a < b > c
result = a < b > c  # ç­‰ä»·äº (a < b) and (b > c)
print(f"1 < 2 > 1 = {result}")  # True

# é™·é˜±2ï¼šå‰¯ä½œç”¨å‡½æ•°çš„é‡å¤è°ƒç”¨
call_count = 0

def side_effect_function():
    global call_count
    call_count += 1
    print(f"å‡½æ•°è¢«è°ƒç”¨ç¬¬ {call_count} æ¬¡")
    return call_count

# åœ¨é“¾å¼æ¯”è¾ƒä¸­ï¼Œæ¯ä¸ªè¡¨è¾¾å¼åªè®¡ç®—ä¸€æ¬¡
if 0 < side_effect_function() < 3:
    print("åœ¨èŒƒå›´å†…")

print(f"æ€»è°ƒç”¨æ¬¡æ•°: {call_count}")  # åªè°ƒç”¨äº†1æ¬¡

# é™·é˜±3ï¼šç±»å‹ä¸å…¼å®¹çš„æ¯”è¾ƒ
try:
    result = 1 < "2" < 3  # TypeError
except TypeError as e:
    print(f"ç±»å‹é”™è¯¯: {e}")

# æ­£ç¡®çš„åšæ³•ï¼šç¡®ä¿ç±»å‹å…¼å®¹
numbers = ["1", "2", "3"]
# è½¬æ¢ä¸ºæ•°å­—åæ¯”è¾ƒ
num_values = [int(x) for x in numbers]
if 0 < num_values[1] < 5:
    print("ä¸­é—´å€¼åœ¨èŒƒå›´å†…")
```

---

## 7. âœ… æ¯”è¾ƒè¿ç®—è¿”å›å€¼æœºåˆ¶


### 7.1 å¸ƒå°”å€¼è¿”å›çš„åŸºæœ¬è§„åˆ™

**ğŸ”„ æ¯”è¾ƒè¿ç®—çš„ç»“æœç±»å‹**

```python
# æ¯”è¾ƒè¿ç®—æ€»æ˜¯è¿”å›å¸ƒå°”å€¼
comparisons = [
    5 > 3,           # True
    "hello" == "hi", # False
    [1, 2] in [[1, 2], [3, 4]], # True
    None is None,    # True
]

for i, result in enumerate(comparisons):
    print(f"æ¯”è¾ƒ {i+1}: {result}, ç±»å‹: {type(result)}")

# å¸ƒå°”å€¼åœ¨æ•°å€¼è¿ç®—ä¸­çš„è¡¨ç°
print(f"True + True = {True + True}")    # 2
print(f"False * 10 = {False * 10}")      # 0
print(f"True == 1: {True == 1}")         # True
print(f"False == 0: {False == 0}")       # True
```

**ğŸ’¡ å¸ƒå°”å€¼çš„å®é™…åº”ç”¨**
```python
# ç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ä¸ªæ•°
scores = [85, 92, 78, 96, 88, 73]
high_scores = sum(score >= 90 for score in scores)
print(f"é«˜åˆ†(>=90)å­¦ç”Ÿæ•°é‡: {high_scores}")

# å¸ƒå°”å€¼ä½œä¸ºè¿‡æ»¤æ¡ä»¶
def filter_adults(ages):
    """ç­›é€‰æˆå¹´äººå¹´é¾„"""
    return [age for age in ages if age >= 18]

def count_valid_emails(emails):
    """ç»Ÿè®¡æœ‰æ•ˆé‚®ç®±æ•°é‡"""
    return sum("@" in email and "." in email for email in emails)

ages = [15, 22, 17, 25, 30, 16]
emails = ["user@example.com", "invalid-email", "test@site.org", "bad@"]

print(f"æˆå¹´äººå¹´é¾„: {filter_adults(ages)}")
print(f"æœ‰æ•ˆé‚®ç®±æ•°é‡: {count_valid_emails(emails)}")
```

### 7.2 æ¯”è¾ƒé“¾çš„çŸ­è·¯ç‰¹æ€§

**âš¡ æå‰ç»ˆæ­¢çš„ä¼˜åŒ–æœºåˆ¶**

```python
# çŸ­è·¯æ±‚å€¼æ¼”ç¤º
def expensive_check(name, value):
    """æ¨¡æ‹Ÿè€—æ—¶çš„æ£€æŸ¥æ“ä½œ"""
    print(f"æ­£åœ¨æ£€æŸ¥ {name}...")
    import time
    time.sleep(0.1)  # æ¨¡æ‹Ÿå»¶è¿Ÿ
    return value

# and è¿ç®—çš„çŸ­è·¯ç‰¹æ€§
print("=== AND çŸ­è·¯æµ‹è¯• ===")
result1 = expensive_check("æ¡ä»¶1", False) and expensive_check("æ¡ä»¶2", True)
print(f"ç»“æœ: {result1}")  # æ¡ä»¶2ä¸ä¼šè¢«æ£€æŸ¥

print("\n=== OR çŸ­è·¯æµ‹è¯• ===")
result2 = expensive_check("æ¡ä»¶1", True) or expensive_check("æ¡ä»¶2", False)
print(f"ç»“æœ: {result2}")  # æ¡ä»¶2ä¸ä¼šè¢«æ£€æŸ¥

# åœ¨æ¯”è¾ƒé“¾ä¸­åº”ç”¨çŸ­è·¯ç‰¹æ€§
def validate_user_input(data):
    """éªŒè¯ç”¨æˆ·è¾“å…¥ï¼Œåˆ©ç”¨çŸ­è·¯ç‰¹æ€§æé«˜æ•ˆç‡"""
    return (
        data is not None and           # é¦–å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºNone
        len(data) > 0 and             # ç„¶åæ£€æŸ¥é•¿åº¦
        data.strip() != "" and        # å†æ£€æŸ¥æ˜¯å¦éç©º
        len(data) <= 100              # æœ€åæ£€æŸ¥é•¿åº¦é™åˆ¶
    )

test_inputs = [None, "", "  ", "valid input", "x" * 101]
for inp in test_inputs:
    try:
        is_valid = validate_user_input(inp)
        print(f"è¾“å…¥ '{inp}' éªŒè¯ç»“æœ: {is_valid}")
    except AttributeError:
        print(f"è¾“å…¥ '{inp}' éªŒè¯å¤±è´¥: ç±»å‹é”™è¯¯")
```

### 7.3 æ¯”è¾ƒç»“æœçš„ç»„åˆåº”ç”¨

**ğŸ”„ å¤æ‚æ¡ä»¶çš„æ„å»º**

```python
# å¤æ‚æ¡ä»¶åˆ¤æ–­çš„å®é™…åº”ç”¨
class StudentGradeSystem:
    def __init__(self):
        self.passing_score = 60
        self.excellent_score = 90
        self.max_score = 100
    
    def evaluate_student(self, name, math, english, science):
        """è¯„ä¼°å­¦ç”Ÿæˆç»©"""
        # å•ç§‘æˆç»©æ£€æŸ¥
        all_valid = all(0 <= score <= self.max_score 
                       for score in [math, english, science])
        
        if not all_valid:
            return f"{name}: æˆç»©æ•°æ®æ— æ•ˆ"
        
        # è®¡ç®—å¹³å‡åˆ†
        average = (math + english + science) / 3
        
        # å¤åˆæ¡ä»¶åˆ¤æ–­
        all_passed = all(score >= self.passing_score 
                        for score in [math, english, science])
        
        has_excellent = any(score >= self.excellent_score 
                           for score in [math, english, science])
        
        # ç”Ÿæˆè¯„ä»·
        if not all_passed:
            status = "éœ€è¦è¡¥è€ƒ"
        elif average >= self.excellent_score and all_passed:
            status = "ä¼˜ç§€å­¦ç”Ÿ"
        elif has_excellent:
            status = "éƒ¨åˆ†ä¼˜ç§€"
        else:
            status = "æˆç»©åˆæ ¼"
        
        return f"{name}: å¹³å‡åˆ†{average:.1f}, {status}"

# ä½¿ç”¨æˆç»©ç³»ç»Ÿ
grade_system = StudentGradeSystem()
students = [
    ("å¼ ä¸‰", 95, 88, 92),
    ("æå››", 78, 65, 82),
    ("ç‹äº”", 55, 60, 58),
    ("èµµå…­", 88, 95, 87),
]

for student_data in students:
    evaluation = grade_system.evaluate_student(*student_data)
    print(evaluation)
```

---

## 8. ğŸ¨ è‡ªå®šä¹‰æ¯”è¾ƒè¡Œä¸º


### 8.1 å®ç°æ¯”è¾ƒé­”æ³•æ–¹æ³•

**ğŸ”® è®©è‡ªå®šä¹‰ç±»æ”¯æŒå„ç§æ¯”è¾ƒ**

```python
class Student:
    def __init__(self, name, score):
        self.name = name
        self.score = score
    
    # ç›¸ç­‰æ¯”è¾ƒ
    def __eq__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score == other.score
    
    # å°äºæ¯”è¾ƒ
    def __lt__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score < other.score
    
    # å°äºç­‰äºæ¯”è¾ƒ
    def __le__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score <= other.score
    
    # å¤§äºæ¯”è¾ƒ
    def __gt__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score > other.score
    
    # å¤§äºç­‰äºæ¯”è¾ƒ
    def __ge__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score >= other.score
    
    # ä¸ç­‰æ¯”è¾ƒ
    def __ne__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score != other.score
    
    def __repr__(self):
        return f"Student('{self.name}', {self.score})"

# æµ‹è¯•è‡ªå®šä¹‰æ¯”è¾ƒ
student1 = Student("å¼ ä¸‰", 85)
student2 = Student("æå››", 92)
student3 = Student("ç‹äº”", 85)

print(f"{student1} == {student3}: {student1 == student3}")  # True
print(f"{student1} < {student2}: {student1 < student2}")    # True
print(f"{student2} > {student1}: {student2 > student1}")    # True

# æ’åºåŠŸèƒ½è‡ªåŠ¨å¯ç”¨
students = [student1, student2, student3]
students.sort()  # æŒ‰åˆ†æ•°æ’åº
print("æŒ‰åˆ†æ•°æ’åº:", students)
```

### 8.2 ä½¿ç”¨functools.total_orderingç®€åŒ–

**âš¡ è‡ªåŠ¨ç”Ÿæˆæ¯”è¾ƒæ–¹æ³•çš„è£…é¥°å™¨**

```python
from functools import total_ordering

@total_ordering
class Book:
    def __init__(self, title, pages):
        self.title = title
        self.pages = pages
    
    # åªéœ€å®ç° __eq__ å’Œä¸€ä¸ªæ’åºæ–¹æ³•
    def __eq__(self, other):
        if not isinstance(other, Book):
            return NotImplemented
        return self.pages == other.pages
    
    def __lt__(self, other):
        if not isinstance(other, Book):
            return NotImplemented
        return self.pages < other.pages
    
    def __repr__(self):
        return f"Book('{self.title}', {self.pages}é¡µ)"

# è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æ¯”è¾ƒæ–¹æ³•
book1 = Book("Pythonå…¥é—¨", 200)
book2 = Book("Pythonè¿›é˜¶", 350)
book3 = Book("Pythonå®æˆ˜", 200)

print(f"{book1} == {book3}: {book1 == book3}")  # True
print(f"{book1} <= {book2}: {book1 <= book2}")  # True
print(f"{book1} >= {book3}: {book1 >= book3}")  # True
print(f"{book2} != {book1}: {book2 != book1}")  # True

# æ’åºå’Œå…¶ä»–æ“ä½œ
books = [book2, book1, book3]
books.sort()
print("æŒ‰é¡µæ•°æ’åº:", books)
```

### 8.3 å¤æ‚å¯¹è±¡çš„å¤šå­—æ®µæ¯”è¾ƒ

**ğŸ”„ åŸºäºå¤šä¸ªå±æ€§çš„å¤åˆæ¯”è¾ƒ**

```python
from functools import total_ordering

@total_ordering
class Employee:
    def __init__(self, name, department, salary, hire_date):
        self.name = name
        self.department = department
        self.salary = salary
        self.hire_date = hire_date
    
    def __eq__(self, other):
        if not isinstance(other, Employee):
            return NotImplemented
        # å¤šå­—æ®µæ¯”è¾ƒï¼šéƒ¨é—¨ > å·¥èµ„ > å…¥èŒæ—¥æœŸ
        return (self.department, self.salary, self.hire_date) == \
               (other.department, other.salary, other.hire_date)
    
    def __lt__(self, other):
        if not isinstance(other, Employee):
            return NotImplemented
        # å…ƒç»„çš„è‡ªç„¶æ’åºï¼šå…ˆæŒ‰éƒ¨é—¨ï¼Œå†æŒ‰å·¥èµ„ï¼Œæœ€åæŒ‰å…¥èŒæ—¥æœŸ
        return (self.department, self.salary, self.hire_date) < \
               (other.department, other.salary, other.hire_date)
    
    def __repr__(self):
        return f"Employee('{self.name}', '{self.department}', {self.salary})"

# åˆ›å»ºå‘˜å·¥æ•°æ®
from datetime import date

employees = [
    Employee("å¼ ä¸‰", "æŠ€æœ¯éƒ¨", 8000, date(2020, 1, 15)),
    Employee("æå››", "æŠ€æœ¯éƒ¨", 12000, date(2019, 3, 10)),
    Employee("ç‹äº”", "é”€å”®éƒ¨", 6000, date(2021, 5, 20)),
    Employee("èµµå…­", "æŠ€æœ¯éƒ¨", 8000, date(2020, 6, 1)),
]

# æ’åºï¼šæŒ‰éƒ¨é—¨ > å·¥èµ„ > å…¥èŒæ—¥æœŸ
employees.sort()
print("å‘˜å·¥æ’åºç»“æœ:")
for emp in employees:
    print(f"  {emp}")

# è‡ªå®šä¹‰æ’åºé”®
def by_salary_desc(employee):
    """æŒ‰å·¥èµ„é™åºæ’åˆ—"""
    return -employee.salary

employees_by_salary = sorted(employees, key=by_salary_desc)
print("\næŒ‰å·¥èµ„é™åº:")
for emp in employees_by_salary:
    print(f"  {emp}")
```

---

## 9. âš¡ æ¯”è¾ƒè¿ç®—æ€§èƒ½ä¼˜åŒ–


### 9.1 ä¸åŒæ¯”è¾ƒæ–¹å¼çš„æ€§èƒ½å·®å¼‚

**ğŸ“Š æ€§èƒ½æµ‹è¯•å’Œå¯¹æ¯”åˆ†æ**

```python
import time
from typing import List

def performance_test():
    """æ¯”è¾ƒä¸åŒæŸ¥æ‰¾æ–¹å¼çš„æ€§èƒ½"""
    
    # å‡†å¤‡æµ‹è¯•æ•°æ®
    data_sizes = [100, 1000, 10000]
    results = {}
    
    for size in data_sizes:
        print(f"\n=== æ•°æ®è§„æ¨¡: {size} ===")
        
        # å‡†å¤‡æ•°æ®
        test_list = list(range(size))
        test_set = set(test_list)
        test_dict = {i: f"value_{i}" for i in test_list}
        search_item = size - 1  # æœç´¢æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆæœ€åæƒ…å†µï¼‰
        
        # æµ‹è¯•åˆ—è¡¨æŸ¥æ‰¾
        start = time.time()
        for _ in range(1000):  # é‡å¤1000æ¬¡
            result = search_item in test_list
        list_time = time.time() - start
        
        # æµ‹è¯•é›†åˆæŸ¥æ‰¾
        start = time.time()
        for _ in range(1000):
            result = search_item in test_set
        set_time = time.time() - start
        
        # æµ‹è¯•å­—å…¸æŸ¥æ‰¾
        start = time.time()
        for _ in range(1000):
            result = search_item in test_dict
        dict_time = time.time() - start
        
        results[size] = {
            'list': list_time,
            'set': set_time,
            'dict': dict_time
        }
        
        print(f"åˆ—è¡¨æŸ¥æ‰¾: {list_time:.4f}ç§’")
        print(f"é›†åˆæŸ¥æ‰¾: {set_time:.4f}ç§’")
        print(f"å­—å…¸æŸ¥æ‰¾: {dict_time:.4f}ç§’")
        print(f"é›†åˆæ¯”åˆ—è¡¨å¿«: {list_time/set_time:.1f}å€")
    
    return results

# è¿è¡Œæ€§èƒ½æµ‹è¯•
# performance_results = performance_test()
```

### 9.2 æ¯”è¾ƒæ“ä½œçš„ä¼˜åŒ–ç­–ç•¥

**ğŸš€ æå‡æ¯”è¾ƒæ€§èƒ½çš„æŠ€å·§**

```python
# ä¼˜åŒ–ç­–ç•¥1ï¼šæå‰é€€å‡º
def find_first_match_slow(data, condition):
    """ä½æ•ˆçš„æŸ¥æ‰¾æ–¹å¼"""
    matches = []
    for item in data:
        if condition(item):
            matches.append(item)
    return matches[0] if matches else None

def find_first_match_fast(data, condition):
    """é«˜æ•ˆçš„æŸ¥æ‰¾æ–¹å¼ - æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°±è¿”å›"""
    for item in data:
        if condition(item):
            return item
    return None

# ä¼˜åŒ–ç­–ç•¥2ï¼šä½¿ç”¨é€‚å½“çš„æ•°æ®ç»“æ„
class OptimizedUserManager:
    def __init__(self):
        self.users_by_id = {}      # O(1) æŒ‰IDæŸ¥æ‰¾
        self.users_by_email = {}   # O(1) æŒ‰é‚®ç®±æŸ¥æ‰¾
        self.active_users = set()  # O(1) æ£€æŸ¥æ˜¯å¦æ´»è·ƒ
    
    def add_user(self, user_id, email, is_active=True):
        user_data = {'id': user_id, 'email': email, 'active': is_active}
        
        self.users_by_id[user_id] = user_data
        self.users_by_email[email] = user_data
        
        if is_active:
            self.active_users.add(user_id)
    
    def is_active_user(self, user_id):
        """O(1) æ—¶é—´å¤æ‚åº¦æ£€æŸ¥"""
        return user_id in self.active_users
    
    def find_by_email(self, email):
        """O(1) æ—¶é—´å¤æ‚åº¦æŸ¥æ‰¾"""
        return self.users_by_email.get(email)

# ä¼˜åŒ–ç­–ç•¥3ï¼šå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€
def slow_filter(numbers):
    """æ¯æ¬¡éƒ½è°ƒç”¨å‡½æ•°"""
    return [x for x in numbers if expensive_function(x) > 50]

def fast_filter(numbers):
    """é¢„è®¡ç®—å‡å°‘è°ƒç”¨"""
    threshold = 50
    func = expensive_function  # å‡å°‘å±æ€§æŸ¥æ‰¾
    return [x for x in numbers if func(x) > threshold]

def expensive_function(x):
    """æ¨¡æ‹Ÿå¤æ‚è®¡ç®—"""
    return sum(range(x % 10))

# æµ‹è¯•æ•°æ®
test_numbers = list(range(1000))
# åœ¨å®é™…åº”ç”¨ä¸­ï¼Œfast_filterä¼šæ˜æ˜¾æ›´å¿«
```

### 9.3 å†…å­˜å’Œæ—¶é—´çš„æƒè¡¡

**âš–ï¸ ç©ºé—´æ¢æ—¶é—´çš„ä¼˜åŒ–ç­–ç•¥**

```python
class SmartComparator:
    """æ™ºèƒ½æ¯”è¾ƒå™¨ - ç¼“å­˜æ¯”è¾ƒç»“æœ"""
    
    def __init__(self):
        self._comparison_cache = {}
        self._cache_hits = 0
        self._cache_misses = 0
    
    def compare_expensive_objects(self, obj1, obj2):
        """æ¯”è¾ƒå¤æ‚å¯¹è±¡ï¼Œä½¿ç”¨ç¼“å­˜ä¼˜åŒ–"""
        # åˆ›å»ºç¼“å­˜é”®
        cache_key = (id(obj1), id(obj2))
        reverse_key = (id(obj2), id(obj1))
        
        # æ£€æŸ¥ç¼“å­˜
        if cache_key in self._comparison_cache:
            self._cache_hits += 1
            return self._comparison_cache[cache_key]
        
        if reverse_key in self._comparison_cache:
            self._cache_hits += 1
            # è¿”å›ç›¸åçš„ç»“æœ
            return -self._comparison_cache[reverse_key]
        
        # æ‰§è¡Œå®é™…æ¯”è¾ƒ
        self._cache_misses += 1
        result = self._expensive_compare(obj1, obj2)
        
        # ç¼“å­˜ç»“æœ
        self._comparison_cache[cache_key] = result
        
        return result
    
    def _expensive_compare(self, obj1, obj2):
        """æ¨¡æ‹Ÿå¤æ‚çš„æ¯”è¾ƒæ“ä½œ"""
        # å‡è®¾è¿™æ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„æ¯”è¾ƒ
        import time
        time.sleep(0.001)  # æ¨¡æ‹Ÿ1æ¯«ç§’çš„è®¡ç®—æ—¶é—´
        
        return len(str(obj1)) - len(str(obj2))
    
    def get_cache_stats(self):
        """è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯"""
        total = self._cache_hits + self._cache_misses
        hit_rate = self._cache_hits / total if total > 0 else 0
        return {
            'hits': self._cache_hits,
            'misses': self._cache_misses,
            'hit_rate': f"{hit_rate:.2%}"
        }

# ä½¿ç”¨æ™ºèƒ½æ¯”è¾ƒå™¨
comparator = SmartComparator()
objects = [f"object_{i}" for i in range(100)]

# è¿›è¡Œå¤§é‡æ¯”è¾ƒæ“ä½œ
for i in range(len(objects)):
    for j in range(i+1, len(objects)):
        comparator.compare_expensive_objects(objects[i], objects[j])

print("ç¼“å­˜ç»Ÿè®¡:", comparator.get_cache_stats())

# æ€§èƒ½ä¼˜åŒ–æ€»ç»“
optimization_tips = """
æ¯”è¾ƒè¿ç®—æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼š

1. æ•°æ®ç»“æ„é€‰æ‹©
   - é¢‘ç¹æŸ¥æ‰¾ï¼šä½¿ç”¨setæˆ–dict
   - æœ‰åºæŸ¥æ‰¾ï¼šä½¿ç”¨sorted list + bisect
   - å°æ•°æ®é‡ï¼šlistè¶³å¤Ÿ

2. ç®—æ³•ä¼˜åŒ–
   - æå‰é€€å‡ºï¼šæ‰¾åˆ°ç»“æœç«‹å³è¿”å›
   - ç¼“å­˜ç»“æœï¼šé¿å…é‡å¤è®¡ç®—
   - é¢„è®¡ç®—ï¼šå‡å°‘è¿è¡Œæ—¶è®¡ç®—

3. å†…å­˜æƒè¡¡
   - ç©ºé—´æ¢æ—¶é—´ï¼šç”¨å†…å­˜å­˜å‚¨ä¸­é—´ç»“æœ
   - æ—¶é—´æ¢ç©ºé—´ï¼šæŒ‰éœ€è®¡ç®—ï¼Œå‡å°‘å†…å­˜ä½¿ç”¨
   - å¹³è¡¡ç­–ç•¥ï¼šæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©
"""

print(optimization_tips)
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ¯”è¾ƒè¿ç®—ç¬¦åˆ†ç±»ï¼šç›¸ç­‰(==,!=)ã€å¤§å°(>,<,>=,<=)ã€èº«ä»½(is,is not)ã€æˆå‘˜(in,not in)
ğŸ”¸ ç›¸ç­‰vsèº«ä»½ï¼š==æ¯”è¾ƒå€¼ï¼Œisæ¯”è¾ƒå¯¹è±¡èº«ä»½ï¼ˆå†…å­˜åœ°å€ï¼‰
ğŸ”¸ é“¾å¼æ¯”è¾ƒï¼ša < b < c ç­‰ä»·äº (a < b) and (b < c)
ğŸ”¸ è¿”å›å€¼æœºåˆ¶ï¼šæ¯”è¾ƒè¿ç®—æ€»æ˜¯è¿”å›Trueæˆ–False
ğŸ”¸ è‡ªå®šä¹‰æ¯”è¾ƒï¼šé€šè¿‡é­”æ³•æ–¹æ³•è®©è‡ªå®šä¹‰ç±»æ”¯æŒæ¯”è¾ƒ
ğŸ”¸ æ€§èƒ½è€ƒè™‘ï¼šä¸åŒæ•°æ®ç»“æ„çš„æŸ¥æ‰¾æ•ˆç‡å·®å¼‚å¾ˆå¤§
ğŸ”¸ ç±»å‹å…¼å®¹æ€§ï¼šä¸åŒç±»å‹ä¹‹é—´çš„æ¯”è¾ƒè§„åˆ™
ğŸ”¸ çŸ­è·¯æ±‚å€¼ï¼šand/orè¿ç®—çš„æå‰ç»ˆæ­¢ç‰¹æ€§
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç›¸ç­‰æ¯”è¾ƒçš„æ·±å…¥ç†è§£**
```
å€¼ç›¸ç­‰(==)ï¼š
- æ¯”è¾ƒå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒ
- å¯ä»¥è·¨ç±»å‹æ¯”è¾ƒï¼ˆå¦‚ 5 == 5.0ï¼‰
- å¯ä»¥è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘

èº«ä»½ç›¸åŒ(is)ï¼š
- æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªå†…å­˜å¯¹è±¡
- ä¸»è¦ç”¨äºNoneæ£€æŸ¥å’Œå•ä¾‹æ¨¡å¼
- å°æ•´æ•°å’ŒçŸ­å­—ç¬¦ä¸²æœ‰ç¼“å­˜æœºåˆ¶
```

**ğŸ”¹ æˆå‘˜æ¯”è¾ƒçš„æ€§èƒ½å·®å¼‚**
```
æ—¶é—´å¤æ‚åº¦å¯¹æ¯”ï¼š
- list/tuple ä¸­çš„ inï¼šO(n) - éœ€è¦éå†
- set/dict ä¸­çš„ inï¼šO(1) - å“ˆå¸ŒæŸ¥æ‰¾
- é€‰æ‹©åŸåˆ™ï¼šå¤§æ•°æ®é‡ç”¨setï¼Œå°æ•°æ®é‡ç”¨list

å®é™…åº”ç”¨å»ºè®®ï¼š
- é¢‘ç¹æŸ¥æ‰¾çš„æ•°æ®ç”¨setå­˜å‚¨
- éœ€è¦ä¿æŒé¡ºåºçš„ç”¨list
- éœ€è¦é”®å€¼å¯¹åº”çš„ç”¨dict
```

**ğŸ”¹ é“¾å¼æ¯”è¾ƒçš„ä¼˜é›…åº”ç”¨**
```
è¯­æ³•ä¼˜åŠ¿ï¼š
- æ›´æ¥è¿‘æ•°å­¦è¡¨è¾¾ä¹ æƒ¯
- ä»£ç æ›´ç®€æ´æ˜“è¯»
- ä¸­é—´å€¼åªè®¡ç®—ä¸€æ¬¡

é€‚ç”¨åœºæ™¯ï¼š
- èŒƒå›´æ£€æŸ¥ï¼š18 <= age <= 65
- åŒºé—´åˆ¤æ–­ï¼š0 <= score < 60
- å¤šæ¡ä»¶éªŒè¯ï¼šmin_val <= input <= max_val
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ç¼–ç¨‹ä¸­çš„å¸¸è§åº”ç”¨**
- **æ•°æ®éªŒè¯**ï¼šæ£€æŸ¥ç”¨æˆ·è¾“å…¥æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…
- **æ¡ä»¶åˆ¤æ–­**ï¼šæ ¹æ®æ¯”è¾ƒç»“æœæ‰§è¡Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘
- **æ’åºå’Œæœç´¢**ï¼šè‡ªå®šä¹‰å¯¹è±¡çš„æ’åºè§„åˆ™
- **æƒé™æ£€æŸ¥**ï¼šä½¿ç”¨æˆå‘˜æ¯”è¾ƒéªŒè¯ç”¨æˆ·æƒé™
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„æé«˜æŸ¥æ‰¾æ•ˆç‡

**ğŸ”§ æœ€ä½³å®è·µå»ºè®®**
- **ç±»å‹å®‰å…¨**ï¼šæ¯”è¾ƒå‰ç¡®ä¿ç±»å‹å…¼å®¹ï¼Œé¿å…æ„å¤–é”™è¯¯
- **Noneæ£€æŸ¥**ï¼šä½¿ç”¨ `is None` è€Œä¸æ˜¯ `== None`
- **æµ®ç‚¹æ•°æ¯”è¾ƒ**ï¼šä½¿ç”¨ `math.isclose()` å¤„ç†ç²¾åº¦é—®é¢˜
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§æ•°æ®é›†åˆä½¿ç”¨setè¿›è¡Œæˆå‘˜æ£€æŸ¥
- **ä»£ç å¯è¯»æ€§**ï¼šåˆ©ç”¨é“¾å¼æ¯”è¾ƒç®€åŒ–å¤æ‚æ¡ä»¶

**ğŸ“ˆ è¿›é˜¶å­¦ä¹ æ–¹å‘**
- **è‡ªå®šä¹‰æ¯”è¾ƒç±»**ï¼šå®ç°å¤æ‚å¯¹è±¡çš„æ’åºé€»è¾‘
- **æ€§èƒ½è°ƒä¼˜**ï¼šåˆ†æå’Œä¼˜åŒ–æ¯”è¾ƒå¯†é›†çš„ä»£ç 
- **å‡½æ•°å¼ç¼–ç¨‹**ï¼šç»“åˆfilterã€mapç­‰ä½¿ç”¨æ¯”è¾ƒå‡½æ•°
- **æ•°æ®ç»“æ„**ï¼šæ·±å…¥ç†è§£å“ˆå¸Œè¡¨ã€äºŒå‰æœç´¢æ ‘ç­‰

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç›¸ç­‰çœ‹å€¼ç”¨åŒç­‰ï¼Œèº«ä»½æ£€æŸ¥ç”¨iså¥½
- å¤§å°æ¯”è¾ƒåˆ†ç±»æ¸…ï¼Œé“¾å¼å†™æ³•æ›´ä¼˜é›…  
- æˆå‘˜æŸ¥æ‰¾é€‰ç»“æ„ï¼Œé›†åˆå­—å…¸æ•ˆç‡é«˜
- è‡ªå®šä¹‰ç±»åŠ é­”æ³•ï¼Œæ¯”è¾ƒåŠŸèƒ½å…¨éƒ½æœ‰