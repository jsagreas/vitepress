---
title: 12ã€æè¿°ç¬¦åè®®
---
## ğŸ“š ç›®å½•

1. [æè¿°ç¬¦åè®®åŸºç¡€æ¦‚å¿µ](#1-æè¿°ç¬¦åè®®åŸºç¡€æ¦‚å¿µ)
2. [ä¸‰å¤§æè¿°ç¬¦æ–¹æ³•è¯¦è§£](#2-ä¸‰å¤§æè¿°ç¬¦æ–¹æ³•è¯¦è§£)
3. [æ•°æ®æè¿°ç¬¦ä¸éæ•°æ®æè¿°ç¬¦](#3-æ•°æ®æè¿°ç¬¦ä¸éæ•°æ®æè¿°ç¬¦)
4. [propertyå®ç°åŸç†](#4-propertyå®ç°åŸç†)
5. [æè¿°ç¬¦åº”ç”¨åœºæ™¯](#5-æè¿°ç¬¦åº”ç”¨åœºæ™¯)
6. [æè¿°ç¬¦æœ€ä½³å®è·µ](#6-æè¿°ç¬¦æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æè¿°ç¬¦åè®®åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æè¿°ç¬¦


**ç®€å•ç†è§£**ï¼šæè¿°ç¬¦å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œå®ƒå¯ä»¥æ§åˆ¶å…¶ä»–ç±»ä¸­å±æ€§çš„è®¿é—®è¡Œä¸º

```
æƒ³è±¡ä¸€ä¸ªç°å®åœºæ™¯ï¼š
ä¿é™©ç®±ï¼ˆç±»ï¼‰ + å¯†ç é”ï¼ˆæè¿°ç¬¦ï¼‰
- ä½ æƒ³å–é’±æ—¶ï¼Œå¯†ç é”ä¼šæ£€æŸ¥ä½ çš„æƒé™
- ä½ å­˜é’±æ—¶ï¼Œå¯†ç é”ä¼šéªŒè¯é‡‘é¢æ˜¯å¦åˆæ³•
- æè¿°ç¬¦å°±åƒè¿™ä¸ª"æ™ºèƒ½å¯†ç é”"ï¼Œæ§åˆ¶å±æ€§çš„è¯»å†™
```

### 1.2 æè¿°ç¬¦çš„å·¥ä½œåŸç†


**æ ¸å¿ƒæœºåˆ¶**ï¼šå½“ä½ è®¿é—®ä¸€ä¸ªå±æ€§æ—¶ï¼ŒPythonä¼šæ£€æŸ¥è¿™ä¸ªå±æ€§æ˜¯å¦æ˜¯æè¿°ç¬¦

```
å±æ€§è®¿é—®æµç¨‹ï¼š
ç”¨æˆ·ä»£ç : obj.name
    â†“
Pythonæ£€æŸ¥: nameæ˜¯æè¿°ç¬¦å—ï¼Ÿ
    â†“
æ˜¯ â†’ è°ƒç”¨æè¿°ç¬¦æ–¹æ³•
å¦ â†’ æ­£å¸¸å±æ€§è®¿é—®
```

### 1.3 æè¿°ç¬¦åè®®å®šä¹‰


æè¿°ç¬¦åè®®åŒ…å«ä¸‰ä¸ªç‰¹æ®Šæ–¹æ³•ï¼š

| æ–¹æ³• | **ä½œç”¨** | **è§¦å‘æ—¶æœº** |
|------|---------|-------------|
| `__get__` | **è·å–å±æ€§å€¼** | `obj.attr` æˆ– `Class.attr` |
| `__set__` | **è®¾ç½®å±æ€§å€¼** | `obj.attr = value` |
| `__delete__` | **åˆ é™¤å±æ€§** | `del obj.attr` |

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šåªè¦å®šä¹‰äº†å…¶ä¸­ä»»ä½•ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªç±»å°±æ˜¯æè¿°ç¬¦

---

## 2. ğŸ”§ ä¸‰å¤§æè¿°ç¬¦æ–¹æ³•è¯¦è§£


### 2.1 `__get__` æ–¹æ³• - å±æ€§è·å–


**æ–¹æ³•ç­¾å**ï¼š`__get__(self, obj, objtype=None)`

```python
class SimpleDescriptor:
    def __get__(self, obj, objtype=None):
        print(f"è·å–å±æ€§: obj={obj}, objtype={objtype}")
        return "è¿™æ˜¯æè¿°ç¬¦è¿”å›çš„å€¼"

class MyClass:
    attr = SimpleDescriptor()

# ä½¿ç”¨ç¤ºä¾‹
obj = MyClass()
print(obj.attr)        # é€šè¿‡å®ä¾‹è®¿é—®
print(MyClass.attr)    # é€šè¿‡ç±»è®¿é—®
```

**å‚æ•°å«ä¹‰è§£é‡Š**ï¼š
- `self`ï¼šæè¿°ç¬¦å®ä¾‹æœ¬èº«
- `obj`ï¼šæ‹¥æœ‰è¿™ä¸ªæè¿°ç¬¦çš„å¯¹è±¡å®ä¾‹ï¼ˆå¦‚æœé€šè¿‡ç±»è®¿é—®åˆ™ä¸º `None`ï¼‰
- `objtype`ï¼šæ‹¥æœ‰è¿™ä¸ªæè¿°ç¬¦çš„ç±»

```
è®¿é—®æ–¹å¼å¯¹æ¯”ï¼š
obj.attr     â†’ obj=<å®ä¾‹å¯¹è±¡>, objtype=<ç±»>
MyClass.attr â†’ obj=None,      objtype=<ç±»>
```

### 2.2 `__set__` æ–¹æ³• - å±æ€§è®¾ç½®


**æ–¹æ³•ç­¾å**ï¼š`__set__(self, obj, value)`

```python
class ValidatedAttribute:
    def __get__(self, obj, objtype=None):
        return obj._value if obj else self
    
    def __set__(self, obj, value):
        if not isinstance(value, str):
            raise TypeError("å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹")
        if len(value) < 2:
            raise ValueError("å­—ç¬¦ä¸²é•¿åº¦ä¸èƒ½å°‘äº2")
        obj._value = value

class Person:
    name = ValidatedAttribute()

# ä½¿ç”¨ç¤ºä¾‹
person = Person()
person.name = "å¼ ä¸‰"      # âœ… æ­£ç¡®
print(person.name)       # è¾“å‡º: å¼ ä¸‰

# person.name = 123      # âŒ é”™è¯¯ï¼šTypeError
# person.name = "A"      # âŒ é”™è¯¯ï¼šValueError
```

### 2.3 `__delete__` æ–¹æ³• - å±æ€§åˆ é™¤


**æ–¹æ³•ç­¾å**ï¼š`__delete__(self, obj)`

```python
class ProtectedAttribute:
    def __init__(self, initial_value=None):
        self.initial_value = initial_value
    
    def __get__(self, obj, objtype=None):
        return getattr(obj, '_value', self.initial_value) if obj else self
    
    def __set__(self, obj, value):
        obj._value = value
    
    def __delete__(self, obj):
        print("âš ï¸ æ³¨æ„ï¼šæ­£åœ¨åˆ é™¤å—ä¿æŠ¤çš„å±æ€§")
        if hasattr(obj, '_value'):
            delattr(obj, '_value')

class Config:
    setting = ProtectedAttribute("é»˜è®¤å€¼")

# ä½¿ç”¨ç¤ºä¾‹
config = Config()
config.setting = "æ–°å€¼"
print(config.setting)    # è¾“å‡º: æ–°å€¼
del config.setting       # è¾“å‡ºè­¦å‘Šå¹¶åˆ é™¤
print(config.setting)    # è¾“å‡º: é»˜è®¤å€¼
```

---

## 3. ğŸ“Š æ•°æ®æè¿°ç¬¦ä¸éæ•°æ®æè¿°ç¬¦


### 3.1 åˆ†ç±»æ ‡å‡†


**ç®€å•åŒºåˆ†æ–¹æ³•**ï¼š
- **æ•°æ®æè¿°ç¬¦**ï¼šåŒæ—¶å®šä¹‰äº† `__get__` å’Œ `__set__` æ–¹æ³•
- **éæ•°æ®æè¿°ç¬¦**ï¼šåªå®šä¹‰äº† `__get__` æ–¹æ³•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ•°æ®æè¿°ç¬¦     â”‚    â”‚  éæ•°æ®æè¿°ç¬¦    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ __get__       â”‚    â”‚ âœ“ __get__       â”‚
â”‚ âœ“ __set__       â”‚    â”‚ âœ— __set__       â”‚
â”‚ Â± __delete__    â”‚    â”‚ Â± __delete__    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä¼˜å…ˆçº§å·®å¼‚


**å±æ€§è®¿é—®ä¼˜å…ˆçº§**ï¼š

```
é«˜ä¼˜å…ˆçº§  æ•°æ®æè¿°ç¬¦
    â†“
ä¸­ä¼˜å…ˆçº§  å®ä¾‹å­—å…¸ obj.__dict__
    â†“
ä½ä¼˜å…ˆçº§  éæ•°æ®æè¿°ç¬¦
    â†“
æœ€ä½çº§    ç±»å­—å…¸ Class.__dict__
```

### 3.3 å®é™…æ¼”ç¤º


```python
class DataDescriptor:
    """æ•°æ®æè¿°ç¬¦ - é«˜ä¼˜å…ˆçº§"""
    def __get__(self, obj, objtype=None):
        return "æ¥è‡ªæ•°æ®æè¿°ç¬¦"
    
    def __set__(self, obj, value):
        print(f"æ•°æ®æè¿°ç¬¦è®¾ç½®å€¼: {value}")

class NonDataDescriptor:
    """éæ•°æ®æè¿°ç¬¦ - ä½ä¼˜å…ˆçº§"""
    def __get__(self, obj, objtype=None):
        return "æ¥è‡ªéæ•°æ®æè¿°ç¬¦"

class TestClass:
    data_attr = DataDescriptor()
    non_data_attr = NonDataDescriptor()

# ä¼˜å…ˆçº§æµ‹è¯•
obj = TestClass()

# æ•°æ®æè¿°ç¬¦ï¼šæ€»æ˜¯ä¼˜å…ˆ
print(obj.data_attr)                    # æ¥è‡ªæ•°æ®æè¿°ç¬¦
obj.__dict__['data_attr'] = "å®ä¾‹å€¼"     # è®¾ç½®å®ä¾‹å±æ€§
print(obj.data_attr)                    # ä»ç„¶æ˜¯ï¼šæ¥è‡ªæ•°æ®æè¿°ç¬¦

# éæ•°æ®æè¿°ç¬¦ï¼šå®ä¾‹å±æ€§ä¼˜å…ˆ
print(obj.non_data_attr)                # æ¥è‡ªéæ•°æ®æè¿°ç¬¦
obj.__dict__['non_data_attr'] = "å®ä¾‹å€¼" # è®¾ç½®å®ä¾‹å±æ€§
print(obj.non_data_attr)                # å˜æˆï¼šå®ä¾‹å€¼
```

> âš ï¸ **é‡è¦ç†è§£**ï¼šæ•°æ®æè¿°ç¬¦çš„ä¼˜å…ˆçº§æ¯”å®ä¾‹å±æ€§æ›´é«˜ï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®éªŒè¯å’Œä¿æŠ¤æœºåˆ¶ä¸è¢«ç»•è¿‡

---

## 4. ğŸ—ï¸ propertyå®ç°åŸç†


### 4.1 propertyæœ¬è´¨


**æ­ç§˜çœŸç›¸**ï¼š`property` å…¶å®å°±æ˜¯ä¸€ä¸ªå†…ç½®çš„æ•°æ®æè¿°ç¬¦ï¼

```python
# propertyçš„ç®€åŒ–å®ç°åŸç†
class MyProperty:
    def __init__(self, fget=None, fset=None, fdel=None):
        self.fget = fget
        self.fset = fset
        self.fdel = fdel
    
    def __get__(self, obj, objtype=None):
        if obj is None:
            return self
        if self.fget is None:
            raise AttributeError("æ— æ³•è¯»å–å±æ€§")
        return self.fget(obj)
    
    def __set__(self, obj, value):
        if self.fset is None:
            raise AttributeError("æ— æ³•è®¾ç½®å±æ€§")
        self.fset(obj, value)
    
    def __delete__(self, obj):
        if self.fdel is None:
            raise AttributeError("æ— æ³•åˆ é™¤å±æ€§")
        self.fdel(obj)
```

### 4.2 propertyè£…é¥°å™¨åŸç†


```python
class Circle:
    def __init__(self, radius):
        self._radius = radius
    
    @property
    def radius(self):
        """è·å–åŠå¾„"""
        return self._radius
    
    @radius.setter
    def radius(self, value):
        """è®¾ç½®åŠå¾„ï¼Œæ·»åŠ éªŒè¯"""
        if value <= 0:
            raise ValueError("åŠå¾„å¿…é¡»å¤§äº0")
        self._radius = value
    
    @property
    def area(self):
        """è®¡ç®—é¢ç§¯ï¼ˆåªè¯»å±æ€§ï¼‰"""
        return 3.14159 * self._radius ** 2

# ç­‰ä»·çš„ä¼ ç»Ÿå†™æ³•
class CircleTraditional:
    def __init__(self, radius):
        self._radius = radius
    
    def get_radius(self):
        return self._radius
    
    def set_radius(self, value):
        if value <= 0:
            raise ValueError("åŠå¾„å¿…é¡»å¤§äº0")
        self._radius = value
    
    def get_area(self):
        return 3.14159 * self._radius ** 2
    
    # ä½¿ç”¨propertyå‡½æ•°
    radius = property(get_radius, set_radius)
    area = property(get_area)
```

### 4.3 propertyå·¥ä½œæµç¨‹


```
è£…é¥°å™¨å·¥ä½œæµç¨‹ï¼š

@property
def radius(self): ...
    â†“
radius = property(radius)
    â†“
@radius.setter  
def radius(self, value): ...
    â†“
radius = radius.setter(æ–°çš„setterå‡½æ•°)
```

---

## 5. ğŸ¯ æè¿°ç¬¦åº”ç”¨åœºæ™¯


### 5.1 å±æ€§éªŒè¯


```python
class PositiveNumber:
    """æ­£æ•°éªŒè¯æè¿°ç¬¦"""
    def __init__(self, name):
        self.name = name
    
    def __get__(self, obj, objtype=None):
        if obj is None:
            return self
        return obj.__dict__.get(self.name, 0)
    
    def __set__(self, obj, value):
        if not isinstance(value, (int, float)):
            raise TypeError(f"{self.name} å¿…é¡»æ˜¯æ•°å­—")
        if value <= 0:
            raise ValueError(f"{self.name} å¿…é¡»æ˜¯æ­£æ•°")
        obj.__dict__[self.name] = value

class Product:
    price = PositiveNumber('price')
    quantity = PositiveNumber('quantity')
    
    def __init__(self, name, price, quantity):
        self.name = name
        self.price = price
        self.quantity = quantity
    
    def total_value(self):
        return self.price * self.quantity

# ä½¿ç”¨ç¤ºä¾‹
product = Product("ç¬”è®°æœ¬", 5000, 10)
print(f"æ€»ä»·å€¼: {product.total_value()}")  # 50000

# product.price = -100  # âŒ ValueError: price å¿…é¡»æ˜¯æ­£æ•°
```

### 5.2 æ‡’åŠ è½½å±æ€§


```python
class LazyProperty:
    """æ‡’åŠ è½½æè¿°ç¬¦ - åªåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶è®¡ç®—"""
    def __init__(self, func):
        self.func = func
        self.name = func.__name__
    
    def __get__(self, obj, objtype=None):
        if obj is None:
            return self
        
        # æ£€æŸ¥æ˜¯å¦å·²ç»è®¡ç®—è¿‡
        if self.name not in obj.__dict__:
            print(f"ğŸ”„ é¦–æ¬¡è®¡ç®— {self.name}")
            # è®¡ç®—å¹¶ç¼“å­˜ç»“æœ
            obj.__dict__[self.name] = self.func(obj)
        else:
            print(f"ğŸ“‹ ä½¿ç”¨ç¼“å­˜çš„ {self.name}")
        
        return obj.__dict__[self.name]

class DataProcessor:
    def __init__(self, data):
        self.data = data
    
    @LazyProperty
    def expensive_calculation(self):
        """æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—"""
        import time
        time.sleep(1)  # æ¨¡æ‹Ÿ1ç§’çš„è®¡ç®—æ—¶é—´
        return sum(x**2 for x in self.data)

# ä½¿ç”¨ç¤ºä¾‹
processor = DataProcessor([1, 2, 3, 4, 5])
print(processor.expensive_calculation)  # ç¬¬ä¸€æ¬¡ï¼šè®¡ç®— + ç¼“å­˜
print(processor.expensive_calculation)  # ç¬¬äºŒæ¬¡ï¼šç›´æ¥ä½¿ç”¨ç¼“å­˜
```

### 5.3 ç±»å‹è½¬æ¢


```python
class TypedAttribute:
    """è‡ªåŠ¨ç±»å‹è½¬æ¢æè¿°ç¬¦"""
    def __init__(self, expected_type, name):
        self.expected_type = expected_type
        self.name = name
    
    def __get__(self, obj, objtype=None):
        if obj is None:
            return self
        return obj.__dict__.get(self.name)
    
    def __set__(self, obj, value):
        try:
            # å°è¯•ç±»å‹è½¬æ¢
            converted_value = self.expected_type(value)
            obj.__dict__[self.name] = converted_value
            print(f"âœ… {value} â†’ {converted_value} ({self.expected_type.__name__})")
        except (ValueError, TypeError) as e:
            raise TypeError(f"æ— æ³•å°† {value} è½¬æ¢ä¸º {self.expected_type.__name__}")

class UserProfile:
    age = TypedAttribute(int, 'age')
    score = TypedAttribute(float, 'score')
    active = TypedAttribute(bool, 'active')
    
    def __init__(self, age, score, active):
        self.age = age
        self.score = score
        self.active = active

# ä½¿ç”¨ç¤ºä¾‹
user = UserProfile("25", "95.5", "True")
print(f"å¹´é¾„: {user.age} (ç±»å‹: {type(user.age)})")      # 25 <class 'int'>
print(f"åˆ†æ•°: {user.score} (ç±»å‹: {type(user.score)})")  # 95.5 <class 'float'>
print(f"æ¿€æ´»: {user.active} (ç±»å‹: {type(user.active)})") # True <class 'bool'>
```

---

## 6. ğŸ’¡ æè¿°ç¬¦æœ€ä½³å®è·µ


### 6.1 å‘½åçº¦å®š


```python
class ManagedAttribute:
    """æ¨èçš„æè¿°ç¬¦å‘½åå’Œå®ç°æ–¹å¼"""
    def __init__(self, name=None, default=None, validator=None):
        # ä½¿ç”¨ç§æœ‰åç§°å­˜å‚¨å€¼
        self.name = name
        self.default = default
        self.validator = validator
    
    def __set_name__(self, owner, name):
        """Python 3.6+ è‡ªåŠ¨è®¾ç½®å±æ€§å"""
        if self.name is None:
            self.name = f'_{name}'  # ç§æœ‰å±æ€§å
    
    def __get__(self, obj, objtype=None):
        if obj is None:
            return self
        return getattr(obj, self.name, self.default)
    
    def __set__(self, obj, value):
        if self.validator:
            value = self.validator(value)
        setattr(obj, self.name, value)

# éªŒè¯å‡½æ•°
def positive_validator(value):
    if value <= 0:
        raise ValueError("å€¼å¿…é¡»ä¸ºæ­£æ•°")
    return value

def string_validator(value):
    if not isinstance(value, str):
        raise TypeError("å€¼å¿…é¡»ä¸ºå­—ç¬¦ä¸²")
    return value.strip()

class BankAccount:
    balance = ManagedAttribute(validator=positive_validator)
    account_name = ManagedAttribute(validator=string_validator)
    
    def __init__(self, account_name, initial_balance):
        self.account_name = account_name
        self.balance = initial_balance
```

### 6.2 æ€§èƒ½ä¼˜åŒ–è€ƒè™‘


**æ€§èƒ½å¯¹æ¯”æµ‹è¯•**ï¼š

```python
import time

class SimpleAttribute:
    """ç®€å•å±æ€§è®¿é—®"""
    pass

class DescriptorAttribute:
    """æè¿°ç¬¦å±æ€§è®¿é—®"""
    def __get__(self, obj, objtype=None):
        return obj._value if obj else self
    
    def __set__(self, obj, value):
        obj._value = value

class TestClass:
    normal_attr = None
    descriptor_attr = DescriptorAttribute()

# æ€§èƒ½æµ‹è¯•
def performance_test():
    obj = TestClass()
    iterations = 1000000
    
    # æµ‹è¯•æ™®é€šå±æ€§
    start = time.time()
    for i in range(iterations):
        obj.normal_attr = i
        _ = obj.normal_attr
    normal_time = time.time() - start
    
    # æµ‹è¯•æè¿°ç¬¦å±æ€§
    start = time.time()
    for i in range(iterations):
        obj.descriptor_attr = i
        _ = obj.descriptor_attr
    descriptor_time = time.time() - start
    
    print(f"æ™®é€šå±æ€§è€—æ—¶: {normal_time:.4f}ç§’")
    print(f"æè¿°ç¬¦è€—æ—¶: {descriptor_time:.4f}ç§’")
    print(f"æ€§èƒ½å·®å¼‚: {descriptor_time/normal_time:.2f}å€")

performance_test()
```

> ğŸ“Š **æ€§èƒ½å»ºè®®**ï¼šæè¿°ç¬¦æ¯”æ™®é€šå±æ€§è®¿é—®æ…¢çº¦2-3å€ï¼Œä»…åœ¨éœ€è¦ç‰¹æ®ŠåŠŸèƒ½æ—¶ä½¿ç”¨

### 6.3 é¿å…å¸¸è§é™·é˜±


**é™·é˜±1ï¼šæè¿°ç¬¦å®ä¾‹å…±äº«**

```python
# âŒ é”™è¯¯æ–¹å¼ - æ‰€æœ‰å®ä¾‹å…±äº«æè¿°ç¬¦çŠ¶æ€
class BadDescriptor:
    def __init__(self):
        self.value = None  # é—®é¢˜ï¼šæ‰€æœ‰å®ä¾‹å…±äº«è¿™ä¸ªå€¼
    
    def __get__(self, obj, objtype=None):
        return self.value
    
    def __set__(self, obj, value):
        self.value = value

# âœ… æ­£ç¡®æ–¹å¼ - åœ¨å¯¹è±¡å®ä¾‹ä¸­å­˜å‚¨å€¼
class GoodDescriptor:
    def __init__(self, name):
        self.name = name
    
    def __get__(self, obj, objtype=None):
        return getattr(obj, self.name, None)
    
    def __set__(self, obj, value):
        setattr(obj, self.name, value)
```

**é™·é˜±2ï¼šå¾ªç¯å¼•ç”¨**

```python
class CircularDescriptor:
    def __get__(self, obj, objtype=None):
        return obj.attr  # âŒ å¦‚æœè¿™ä¸ªæè¿°ç¬¦ç»‘å®šåˆ° attrï¼Œä¼šæ— é™é€’å½’
    
    def __set__(self, obj, value):
        obj.attr = value  # âŒ åŒæ ·çš„é—®é¢˜

# âœ… æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨ä¸åŒçš„å­˜å‚¨å
class SafeDescriptor:
    def __get__(self, obj, objtype=None):
        return getattr(obj, '_attr_value', None)
    
    def __set__(self, obj, value):
        setattr(obj, '_attr_value', value)
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æè¿°ç¬¦æœ¬è´¨ï¼šæ§åˆ¶å±æ€§è®¿é—®è¡Œä¸ºçš„ç‰¹æ®Šç±»
ğŸ”¸ ä¸‰å¤§æ–¹æ³•ï¼š__get__ã€__set__ã€__delete__
ğŸ”¸ ä¸¤ç§ç±»å‹ï¼šæ•°æ®æè¿°ç¬¦ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰vs éæ•°æ®æè¿°ç¬¦ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
ğŸ”¸ propertyåŸç†ï¼šå†…ç½®çš„æ•°æ®æè¿°ç¬¦å®ç°
ğŸ”¸ åº”ç”¨åœºæ™¯ï¼šå±æ€§éªŒè¯ã€æ‡’åŠ è½½ã€ç±»å‹è½¬æ¢
ğŸ”¸ æœ€ä½³å®è·µï¼šæ­£ç¡®å‘½åã€æ€§èƒ½è€ƒè™‘ã€é¿å…é™·é˜±
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æè¿°ç¬¦ vs æ™®é€šå±æ€§çš„åŒºåˆ«**
```
æ™®é€šå±æ€§ï¼šç›´æ¥å­˜å–å€¼
obj.name = "å¼ ä¸‰"  # ç›´æ¥è®¾ç½®
print(obj.name)    # ç›´æ¥è·å–

æè¿°ç¬¦å±æ€§ï¼šé€šè¿‡æ–¹æ³•æ§åˆ¶å­˜å–
obj.name = "å¼ ä¸‰"  # è°ƒç”¨ __set__ æ–¹æ³•
print(obj.name)    # è°ƒç”¨ __get__ æ–¹æ³•
```

**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æè¿°ç¬¦**
```
âœ… éœ€è¦éªŒè¯å±æ€§å€¼
âœ… éœ€è¦è®¡ç®—å±æ€§å€¼
âœ… éœ€è¦ç¼“å­˜æ˜‚è´µçš„è®¡ç®—
âœ… éœ€è¦ç±»å‹è½¬æ¢
âœ… éœ€è¦æ—¥å¿—è®°å½•å±æ€§è®¿é—®

âŒ ç®€å•çš„æ•°æ®å­˜å‚¨
âŒ å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯
âŒ é€»è¾‘è¿‡äºå¤æ‚çš„æƒ…å†µ
```

**ğŸ”¹ æè¿°ç¬¦ä¼˜å…ˆçº§è®°å¿†æ³•**
```
æ•°æ®æè¿°ç¬¦ > å®ä¾‹å­—å…¸ > éæ•°æ®æè¿°ç¬¦ > ç±»å­—å…¸

è®°å¿†å£è¯€ï¼š
"æ•°æ®æè¿°ç¬¦æœ€éœ¸é“ï¼Œå®ä¾‹å±æ€§æ’ç¬¬äºŒ
éæ•°æ®æè¿°ç¬¦å¾ˆæ¸©å’Œï¼Œç±»å±æ€§å«åº•"
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ é€‰æ‹©åˆé€‚çš„å®ç°æ–¹å¼**

| éœ€æ±‚ | **æ¨èæ–¹æ¡ˆ** | **åŸå› ** |
|------|-------------|---------|
| ç®€å•å±æ€§éªŒè¯ | `property` | è¯­æ³•ç®€æ´ï¼Œå†…ç½®æ”¯æŒ |
| å¤æ‚å±æ€§éªŒè¯ | è‡ªå®šä¹‰æè¿°ç¬¦ | åŠŸèƒ½å¼ºå¤§ï¼Œå¯å¤ç”¨ |
| è®¡ç®—å±æ€§ | `property` | è£…é¥°å™¨è¯­æ³•ç›´è§‚ |
| æ‡’åŠ è½½ | è‡ªå®šä¹‰æè¿°ç¬¦ | éœ€è¦ç¼“å­˜æ§åˆ¶ |
| ç±»å‹è½¬æ¢ | è‡ªå®šä¹‰æè¿°ç¬¦ | éœ€è¦å¤æ‚é€»è¾‘ |

**ğŸ”§ å®ç°æ­¥éª¤æŒ‡å—**

```
1. ç¡®å®šéœ€æ±‚ï¼šéªŒè¯ï¼Ÿè®¡ç®—ï¼Ÿç¼“å­˜ï¼Ÿ
2. é€‰æ‹©ç±»å‹ï¼šæ•°æ®æè¿°ç¬¦ vs éæ•°æ®æè¿°ç¬¦
3. å®ç°æ–¹æ³•ï¼šå¿…éœ€çš„ __get__ã€å¯é€‰çš„ __set__/__delete__
4. å­˜å‚¨ç­–ç•¥ï¼šä½¿ç”¨å®ä¾‹å­—å…¸å­˜å‚¨å®é™…å€¼
5. é”™è¯¯å¤„ç†ï¼šæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
6. æ€§èƒ½ä¼˜åŒ–ï¼šé¿å…ä¸å¿…è¦çš„è®¡ç®—å’ŒéªŒè¯
7. æµ‹è¯•éªŒè¯ï¼šç¡®ä¿å„ç§è¾¹ç•Œæƒ…å†µ
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æè¿°ç¬¦åè®®æ§å±æ€§ï¼Œä¸‰ä¸ªæ–¹æ³•è¦ç‰¢è®°
getå–å€¼setèµ‹å€¼ï¼Œdeleteåˆ é™¤å¾ˆç»™åŠ›
æ•°æ®éæ•°æ®åˆ†æ¸…æ¥šï¼Œä¼˜å…ˆçº§åˆ«æœ‰å·®å¼‚
propertyæœ¬è´¨æ˜¯æè¿°ç¬¦ï¼Œè£…é¥°å™¨ç”¨æ³•æœ€ä¾¿åˆ©
```