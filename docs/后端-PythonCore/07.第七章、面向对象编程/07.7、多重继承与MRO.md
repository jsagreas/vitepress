---
title: 7ã€å¤šé‡ç»§æ‰¿ä¸MRO
---
## ğŸ“š ç›®å½•

1. [å¤šé‡ç»§æ‰¿åŸºç¡€æ¦‚å¿µ](#1-å¤šé‡ç»§æ‰¿åŸºç¡€æ¦‚å¿µ)
2. [è±å½¢ç»§æ‰¿é—®é¢˜](#2-è±å½¢ç»§æ‰¿é—®é¢˜)
3. [MROæ–¹æ³•è§£æé¡ºåº](#3-MROæ–¹æ³•è§£æé¡ºåº)
4. [C3çº¿æ€§åŒ–ç®—æ³•](#4-C3çº¿æ€§åŒ–ç®—æ³•)
5. [mro()æ–¹æ³•å®æˆ˜](#5-mroæ–¹æ³•å®æˆ˜)
6. [Mixinæ··å…¥æ¨¡å¼](#6-Mixinæ··å…¥æ¨¡å¼)
7. [å¤šé‡ç»§æ‰¿é™·é˜±ä¸æœ€ä½³å®è·µ](#7-å¤šé‡ç»§æ‰¿é™·é˜±ä¸æœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ³ å¤šé‡ç»§æ‰¿åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¤šé‡ç»§æ‰¿


**ç®€å•ç†è§£**ï¼šå¤šé‡ç»§æ‰¿å°±æ˜¯ä¸€ä¸ªå­ç±»å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶ç±»çš„ç‰¹æ€§

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
ä¸€ä¸ªäººå¯èƒ½åŒæ—¶ç»§æ‰¿ï¼š
â€¢ çˆ¶äº²çš„èº«é«˜
â€¢ æ¯äº²çš„çœ¼ç›é¢œè‰²  
â€¢ çˆ·çˆ·çš„æ€§æ ¼ç‰¹ç‚¹

Pythonä¸­çš„å¤šé‡ç»§æ‰¿ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ï¼
```

**åŸºç¡€è¯­æ³•**ï¼š
```python
class å­ç±»å(çˆ¶ç±»1, çˆ¶ç±»2, çˆ¶ç±»3):
    pass
```

### 1.2 å¤šé‡ç»§æ‰¿çš„åŸºæœ¬ç”¨æ³•


```python
# ğŸƒâ€â™‚ï¸ è¿åŠ¨å‘˜ç±»
class Athlete:
    def __init__(self, name):
        self.name = name
        self.stamina = 100
    
    def train(self):
        print(f"{self.name}æ­£åœ¨è®­ç»ƒï¼Œæå‡ä½“èƒ½...")

# ğŸ“ å­¦ç”Ÿç±»  
class Student:
    def __init__(self, name):
        self.name = name
        self.grades = []
    
    def study(self):
        print(f"{self.name}æ­£åœ¨å­¦ä¹ ï¼Œè·å–çŸ¥è¯†...")

# ğŸ† ä½“è‚²ç”Ÿç±»ï¼ˆå¤šé‡ç»§æ‰¿ï¼‰
class SportStudent(Athlete, Student):
    def __init__(self, name, sport):
        # éœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–
        Athlete.__init__(self, name)
        Student.__init__(self, name)
        self.sport = sport
    
    def daily_routine(self):
        self.train()    # æ¥è‡ªAthlete
        self.study()    # æ¥è‡ªStudent
        print(f"ä¸“æ³¨äº{self.sport}è®­ç»ƒ")

# ä½¿ç”¨ç¤ºä¾‹
xiaoming = SportStudent("å°æ˜", "ç¯®çƒ")
xiaoming.daily_routine()
```

**è¾“å‡ºç»“æœ**ï¼š
```
å°æ˜æ­£åœ¨è®­ç»ƒï¼Œæå‡ä½“èƒ½...
å°æ˜æ­£åœ¨å­¦ä¹ ï¼Œè·å–çŸ¥è¯†...
ä¸“æ³¨äºç¯®çƒè®­ç»ƒ
```

### 1.3 å¤šé‡ç»§æ‰¿çš„ä¼˜åŠ¿


**ğŸ”¸ ä»£ç å¤ç”¨æœ€å¤§åŒ–**
```python
# ä¸ç”¨å¤šé‡ç»§æ‰¿ï¼Œéœ€è¦é‡å¤å†™ä»£ç 
class SportStudent_Old:
    def train(self):      # é‡å¤Athleteçš„ä»£ç 
        print("è®­ç»ƒ...")
    def study(self):      # é‡å¤Studentçš„ä»£ç   
        print("å­¦ä¹ ...")

# ç”¨å¤šé‡ç»§æ‰¿ï¼Œç›´æ¥ç»§æ‰¿ç°æœ‰åŠŸèƒ½
class SportStudent(Athlete, Student):
    pass  # è‡ªåŠ¨æ‹¥æœ‰ä¸¤ä¸ªçˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½
```

**ğŸ”¸ æ¨¡å—åŒ–è®¾è®¡**
```
åŠŸèƒ½æ‹†åˆ†ï¼š
ğŸƒâ€â™‚ï¸ Athleteï¼šè´Ÿè´£è¿åŠ¨ç›¸å…³åŠŸèƒ½
ğŸ“ Studentï¼šè´Ÿè´£å­¦ä¹ ç›¸å…³åŠŸèƒ½
ğŸ† SportStudentï¼šç»„åˆä¸¤ç§èƒ½åŠ›
```

---

## 2. ğŸ’ è±å½¢ç»§æ‰¿é—®é¢˜


### 2.1 è±å½¢ç»§æ‰¿æ˜¯ä»€ä¹ˆ


**é—®é¢˜åœºæ™¯**ï¼šå½“ç»§æ‰¿å…³ç³»å½¢æˆè±å½¢ç»“æ„æ—¶ï¼Œä¼šäº§ç”Ÿæ–¹æ³•è°ƒç”¨çš„æ­§ä¹‰

```
è±å½¢ç»§æ‰¿ç»“æ„å›¾ï¼š
       Animal (é¡¶å±‚ç¥–å…ˆ)
      /              \
   Mammal          Bird
      \              /
       Bat (è™è ç±»)

é—®é¢˜ï¼šBatç»§æ‰¿Mammalå’ŒBirdï¼Œè€Œå®ƒä»¬éƒ½ç»§æ‰¿è‡ªAnimal
å¦‚æœAnimalæœ‰ä¸ªæ–¹æ³•ï¼ŒBatè°ƒç”¨æ—¶è¯¥èµ°å“ªæ¡è·¯å¾„ï¼Ÿ
```

### 2.2 è±å½¢ç»§æ‰¿ä»£ç ç¤ºä¾‹


```python
# ğŸ¾ åŠ¨ç‰©åŸºç±»
class Animal:
    def __init__(self):
        print("Animalåˆå§‹åŒ–")
        self.species = "åŠ¨ç‰©"
    
    def move(self):
        print("åŠ¨ç‰©åœ¨ç§»åŠ¨")

# ğŸº å“ºä¹³åŠ¨ç‰©
class Mammal(Animal):
    def __init__(self):
        super().__init__()
        print("Mammalåˆå§‹åŒ–")
        self.warm_blooded = True
    
    def move(self):
        print("å“ºä¹³åŠ¨ç‰©åœ¨é™†åœ°ä¸Šç§»åŠ¨")

# ğŸ¦… é¸Ÿç±»
class Bird(Animal):
    def __init__(self):
        super().__init__()
        print("Birdåˆå§‹åŒ–")
        self.has_wings = True
    
    def move(self):
        print("é¸Ÿç±»åœ¨ç©ºä¸­é£è¡Œ")

# ğŸ¦‡ è™è ï¼ˆè±å½¢ç»§æ‰¿ï¼‰
class Bat(Mammal, Bird):
    def __init__(self):
        super().__init__()
        print("Batåˆå§‹åŒ–")
```

**æµ‹è¯•è±å½¢ç»§æ‰¿**ï¼š
```python
# åˆ›å»ºè™è å¯¹è±¡
batman = Bat()
print("=" * 30)
batman.move()  # ä¼šè°ƒç”¨å“ªä¸ªmoveæ–¹æ³•ï¼Ÿ
```

**å®é™…è¾“å‡º**ï¼š
```
Animalåˆå§‹åŒ–
Mammalåˆå§‹åŒ–
Batåˆå§‹åŒ–
==============================
å“ºä¹³åŠ¨ç‰©åœ¨é™†åœ°ä¸Šç§»åŠ¨
```

> ğŸ¤” **ä¸ºä»€ä¹ˆåªè°ƒç”¨äº†Mammalçš„æ–¹æ³•ï¼Ÿ**
> è¿™å°±æ¶‰åŠåˆ°Pythonçš„MROï¼ˆæ–¹æ³•è§£æé¡ºåºï¼‰æœºåˆ¶ï¼

### 2.3 è±å½¢ç»§æ‰¿çš„æ ¸å¿ƒé—®é¢˜


```
é—®é¢˜åˆ†æï¼š
â“ åŸºç±»Animalè¢«åˆå§‹åŒ–å‡ æ¬¡ï¼Ÿ
â“ è°ƒç”¨move()æ–¹æ³•æ—¶èµ°å“ªæ¡è·¯å¾„ï¼Ÿ  
â“ å¦‚ä½•ç¡®ä¿æ¯ä¸ªåŸºç±»åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Ÿ
â“ å¦‚ä½•æ§åˆ¶æ–¹æ³•è°ƒç”¨çš„ä¼˜å…ˆçº§ï¼Ÿ

Pythonçš„è§£å†³æ–¹æ¡ˆï¼šMROï¼ˆMethod Resolution Orderï¼‰
```

---

## 3. ğŸ” MROæ–¹æ³•è§£æé¡ºåº


### 3.1 MROæ˜¯ä»€ä¹ˆ


**MROå®šä¹‰**ï¼šMethod Resolution Orderï¼ˆæ–¹æ³•è§£æé¡ºåºï¼‰ï¼Œå®ƒå†³å®šäº†Pythonåœ¨å¤šé‡ç»§æ‰¿ä¸­æŸ¥æ‰¾æ–¹æ³•çš„é¡ºåº

```
ç®€å•ç†è§£ï¼š
å½“ä½ è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼ŒPythonä¼šæŒ‰ç…§MROçš„é¡ºåºä¾æ¬¡æŸ¥æ‰¾ï¼š
1. é¦–å…ˆåœ¨å½“å‰ç±»ä¸­æ‰¾
2. æ‰¾ä¸åˆ°å°±æŒ‰MROé¡ºåºåœ¨çˆ¶ç±»ä¸­æ‰¾
3. æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–¹æ³•å°±åœæ­¢
```

### 3.2 æŸ¥çœ‹MROé¡ºåº


**æ–¹æ³•ä¸€ï¼šä½¿ç”¨`mro()`æ–¹æ³•**
```python
class A: pass
class B(A): pass  
class C(A): pass
class D(B, C): pass

# æŸ¥çœ‹MRO
print(D.mro())
# è¾“å‡ºï¼š[<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <class 'object'>]
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨`__mro__`å±æ€§**
```python
print(D.__mro__)
# è¾“å‡ºï¼š(<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <class 'object'>)
```

**æ–¹æ³•ä¸‰ï¼šæ›´å‹å¥½çš„æ˜¾ç¤º**
```python
def show_mro(cls):
    print(f"{cls.__name__}çš„MROé¡ºåºï¼š")
    for i, c in enumerate(cls.mro()):
        print(f"  {i+1}. {c.__name__}")

show_mro(D)
```

**è¾“å‡º**ï¼š
```
Dçš„MROé¡ºåºï¼š
  1. D
  2. B  
  3. C
  4. A
  5. object
```

### 3.3 MROçš„æŸ¥æ‰¾è¿‡ç¨‹


```python
class Animal:
    def speak(self): print("Animalè¯´è¯")

class Dog(Animal):
    def speak(self): print("ç‹—æ±ªæ±ªå«")

class Cat(Animal):  
    def speak(self): print("çŒ«å–µå–µå«")

class DogCat(Dog, Cat):
    pass  # æ²¡æœ‰é‡å†™speakæ–¹æ³•

# æŸ¥çœ‹MRO
print("DogCatçš„MROï¼š", [c.__name__ for c in DogCat.mro()])
# è¾“å‡ºï¼š['DogCat', 'Dog', 'Cat', 'Animal', 'object']

# è°ƒç”¨æ–¹æ³•
pet = DogCat()
pet.speak()  # è¾“å‡ºï¼šç‹—æ±ªæ±ªå«
```

**æŸ¥æ‰¾è¿‡ç¨‹åˆ†æ**ï¼š
```
è°ƒç”¨pet.speak()æ—¶çš„æŸ¥æ‰¾é¡ºåºï¼š
1ï¸âƒ£ DogCatç±»ä¸­æŸ¥æ‰¾speakæ–¹æ³• â†’ æ²¡æ‰¾åˆ°
2ï¸âƒ£ Dogç±»ä¸­æŸ¥æ‰¾speakæ–¹æ³• â†’ æ‰¾åˆ°äº†ï¼
3ï¸âƒ£ æ‰§è¡ŒDog.speak()ï¼Œè¾“å‡º"ç‹—æ±ªæ±ªå«"
4ï¸âƒ£ åœæ­¢æŸ¥æ‰¾

Cat.speak()å’ŒAnimal.speak()éƒ½ä¸ä¼šè¢«è°ƒç”¨
```

---

## 4. âš™ï¸ C3çº¿æ€§åŒ–ç®—æ³•


### 4.1 C3ç®—æ³•ç®€ä»‹


**C3ç®—æ³•**ï¼šPythonç”¨æ¥è®¡ç®—MROçš„ç®—æ³•ï¼Œç¡®ä¿ç»§æ‰¿çš„ä¸€è‡´æ€§å’Œåˆç†æ€§

```
C3ç®—æ³•çš„æ ¸å¿ƒåŸåˆ™ï¼š
âœ… ä¿æŒå±€éƒ¨ä¼˜å…ˆçº§ï¼ˆå­ç±»ä¼˜å…ˆäºçˆ¶ç±»ï¼‰
âœ… ä¿æŒå•è°ƒæ€§ï¼ˆçˆ¶ç±»é—´çš„ç›¸å¯¹é¡ºåºä¸å˜ï¼‰
âœ… ç¡®ä¿çº¿æ€§åŒ–ï¼ˆå½¢æˆä¸€æ¡å”¯ä¸€çš„æŸ¥æ‰¾é“¾ï¼‰
```

### 4.2 C3ç®—æ³•è®¡ç®—è¿‡ç¨‹


**æ­¥éª¤ä¸€ï¼šå‡†å¤‡çº¿æ€§åŒ–åˆ—è¡¨**
```python
class A: pass
class B: pass  
class C(A, B): pass
class D(A): pass
class E(C, D): pass

# æ‰‹åŠ¨è®¡ç®—Eçš„MRO
# 1. Eçš„ç›´æ¥çˆ¶ç±»ï¼šC, D
# 2. Cçš„MROï¼šC, A, B, object
# 3. Dçš„MROï¼šD, A, object
```

**æ­¥éª¤äºŒï¼šåº”ç”¨C3åˆå¹¶è§„åˆ™**
```
åˆå¹¶è¿‡ç¨‹ï¼š
L(E) = E + merge(L(C), L(D), [C,D])
     = E + merge([C,A,B,object], [D,A,object], [C,D])

mergeè§„åˆ™ï¼š
- å–ç¬¬ä¸€ä¸ªåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ C
- æ£€æŸ¥Cæ˜¯å¦åœ¨å…¶ä»–åˆ—è¡¨çš„å°¾éƒ¨å‡ºç° â†’ æ²¡æœ‰
- Cå¯ä»¥å–å‡ºï¼ŒåŠ å…¥ç»“æœ

ç»§ç»­merge...
æœ€ç»ˆç»“æœï¼šE, C, D, A, B, object
```

**éªŒè¯ç»“æœ**ï¼š
```python
print([c.__name__ for c in E.mro()])
# è¾“å‡ºï¼š['E', 'C', 'D', 'A', 'B', 'object']
```

### 4.3 C3ç®—æ³•å®é™…åº”ç”¨


**ä¸ºä»€ä¹ˆéœ€è¦C3ç®—æ³•ï¼Ÿ**
```python
# ğŸš« é”™è¯¯çš„ç»§æ‰¿é¡ºåºç¤ºä¾‹
class X: pass
class Y(X): pass
class Z(X, Y): pass  # TypeError!

# è¿™ä¼šå¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºï¼š
# Yå·²ç»ç»§æ‰¿äº†Xï¼Œå¦‚æœZå†åŒæ—¶ç»§æ‰¿Xå’ŒY
# å°±ä¼šç ´åç»§æ‰¿çš„ä¸€è‡´æ€§
```

**æ­£ç¡®çš„å†™æ³•**ï¼š
```python
class X: pass
class Y(X): pass  
class Z(Y): pass  # âœ… æ­£ç¡®ï¼šZ â†’ Y â†’ X

# æˆ–è€…
class Z(Y, X): pass  # âŒ è¿™æ ·å†™ä¹Ÿä¸è¡Œï¼Œå› ä¸ºYå·²ç»åŒ…å«äº†X
```

---

## 5. ğŸ› ï¸ mro()æ–¹æ³•å®æˆ˜


### 5.1 ä½¿ç”¨mro()è°ƒè¯•ç»§æ‰¿é—®é¢˜


```python
# ğŸ”§ å®ç”¨çš„MROè°ƒè¯•å·¥å…·
class MROHelper:
    @staticmethod
    def analyze_class(cls):
        print(f"\nğŸ“Š {cls.__name__}ç±»çš„ç»§æ‰¿åˆ†æ")
        print("=" * 40)
        
        # æ˜¾ç¤ºMROé“¾
        print("ğŸ” MROæŸ¥æ‰¾é¡ºåºï¼š")
        for i, c in enumerate(cls.mro()):
            print(f"  {i+1}. {c.__name__}")
        
        # æ˜¾ç¤ºç›´æ¥çˆ¶ç±»
        print(f"\nğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ç›´æ¥çˆ¶ç±»ï¼š{[p.__name__ for p in cls.__bases__]}")
        
        # æ˜¾ç¤ºæ‰€æœ‰æ–¹æ³•æ¥æº
        print(f"\nğŸ¯ æ–¹æ³•æ¥æºåˆ†æï¼š")
        for method_name in dir(cls):
            if not method_name.startswith('_'):
                for parent in cls.mro():
                    if hasattr(parent, method_name):
                        method = getattr(parent, method_name)
                        if callable(method):
                            print(f"  {method_name}() â†’ {parent.__name__}")
                            break

# ä½¿ç”¨ç¤ºä¾‹
class Vehicle:
    def start(self): return "å¯åŠ¨è½¦è¾†"
    def stop(self): return "åœæ­¢è½¦è¾†"

class Car(Vehicle):
    def drive(self): return "åœ¨è·¯ä¸Šå¼€è½¦"

class Boat(Vehicle):  
    def sail(self): return "åœ¨æ°´ä¸Šèˆªè¡Œ"

class AmphibiousCar(Car, Boat):
    def transform(self): return "å˜å½¢æ¨¡å¼"

# åˆ†ææ°´é™†ä¸¤ç”¨è½¦
MROHelper.analyze_class(AmphibiousCar)
```

### 5.2 åŠ¨æ€ä¿®æ”¹MRO


```python
# ğŸ“‹ è™½ç„¶ä¸èƒ½ç›´æ¥ä¿®æ”¹MROï¼Œä½†å¯ä»¥é€šè¿‡æ”¹å˜ç»§æ‰¿é¡ºåºæ¥å½±å“MRO
class A:
    def method(self): return "Açš„æ–¹æ³•"

class B:  
    def method(self): return "Bçš„æ–¹æ³•"

# ä¸åŒçš„ç»§æ‰¿é¡ºåºäº§ç”Ÿä¸åŒçš„MRO
class Test1(A, B): pass
class Test2(B, A): pass

print("Test1çš„MROï¼š", [c.__name__ for c in Test1.mro()])
print("Test2çš„MROï¼š", [c.__name__ for c in Test2.mro()])

print("Test1().method()ï¼š", Test1().method())  # Açš„æ–¹æ³•
print("Test2().method()ï¼š", Test2().method())  # Bçš„æ–¹æ³•
```

### 5.3 super()ä¸MROçš„å…³ç³»


```python
class A:
    def __init__(self):
        print("Aåˆå§‹åŒ–")
    
    def method(self):
        print("A.method")

class B(A):
    def __init__(self):
        super().__init__()  # è°ƒç”¨MROä¸­çš„ä¸‹ä¸€ä¸ªç±»
        print("Båˆå§‹åŒ–")
    
    def method(self):
        print("B.methodå¼€å§‹")
        super().method()    # è°ƒç”¨MROä¸­çš„ä¸‹ä¸€ä¸ªmethod
        print("B.methodç»“æŸ")

class C(A):
    def __init__(self):
        super().__init__()
        print("Cåˆå§‹åŒ–")
    
    def method(self):
        print("C.methodå¼€å§‹")  
        super().method()
        print("C.methodç»“æŸ")

class D(B, C):
    def __init__(self):
        super().__init__()
        print("Dåˆå§‹åŒ–")

# æµ‹è¯•super()çš„è°ƒç”¨é“¾
print("Dçš„MROï¼š", [c.__name__ for c in D.mro()])
print("\nåˆ›å»ºDå®ä¾‹ï¼š")
d = D()
print("\nè°ƒç”¨d.method()ï¼š")
d.method()
```

**è¾“å‡ºç»“æœ**ï¼š
```
Dçš„MROï¼š['D', 'B', 'C', 'A', 'object']

åˆ›å»ºDå®ä¾‹ï¼š
Aåˆå§‹åŒ–
Cåˆå§‹åŒ–  
Båˆå§‹åŒ–
Dåˆå§‹åŒ–

è°ƒç”¨d.method()ï¼š
B.methodå¼€å§‹
C.methodå¼€å§‹
A.method
C.methodç»“æŸ
B.methodç»“æŸ
```

---

## 6. ğŸ­ Mixinæ··å…¥æ¨¡å¼


### 6.1 ä»€ä¹ˆæ˜¯Mixin


**Mixinå®šä¹‰**ï¼šä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡å¤šé‡ç»§æ‰¿æ¥"æ··å…¥"åŠŸèƒ½ï¼Œè€Œä¸æ˜¯å»ºç«‹"æ˜¯ä¸€ä¸ª"çš„å…³ç³»

```
ç†è§£Mixinï¼š
ğŸ• Dog "æ˜¯ä¸€ä¸ª" Animal     â† è¿™æ˜¯ä¼ ç»Ÿç»§æ‰¿
ğŸƒâ€â™‚ï¸ Runner "æ··å…¥" è·‘æ­¥èƒ½åŠ›  â† è¿™æ˜¯Mixinæ¨¡å¼

Mixinç±»é€šå¸¸ï¼š
â€¢ ä¸å•ç‹¬å®ä¾‹åŒ–
â€¢ æä¾›ç‰¹å®šåŠŸèƒ½  
â€¢ å¯ä»¥è¢«å¤šä¸ªç±»æ··å…¥
â€¢ ç±»åé€šå¸¸ä»¥Mixinç»“å°¾
```

### 6.2 Mixinå®æˆ˜ç¤ºä¾‹


```python
# ğŸµ éŸ³é¢‘åŠŸèƒ½Mixin
class AudioMixin:
    def play_sound(self, sound):
        print(f"ğŸ”Š æ’­æ”¾å£°éŸ³ï¼š{sound}")
    
    def set_volume(self, level):
        print(f"ğŸ”‰ éŸ³é‡è°ƒèŠ‚åˆ°ï¼š{level}%")

# ğŸ“± é€šçŸ¥åŠŸèƒ½Mixin  
class NotificationMixin:
    def send_notification(self, message):
        print(f"ğŸ“¢ å‘é€é€šçŸ¥ï¼š{message}")
    
    def show_badge(self, count):
        print(f"ğŸ”´ æ˜¾ç¤ºå¾½ç« ï¼š{count}æ¡æœªè¯»")

# ğŸ’¾ å­˜å‚¨åŠŸèƒ½Mixin
class StorageMixin:
    def __init__(self):
        self._data = {}
    
    def save_data(self, key, value):
        self._data[key] = value
        print(f"ğŸ’¾ ä¿å­˜æ•°æ®ï¼š{key} = {value}")
    
    def load_data(self, key):
        return self._data.get(key, "æ— æ•°æ®")

# ğŸ“± æ™ºèƒ½æ‰‹æœºç±»ï¼ˆæ··å…¥å¤šç§åŠŸèƒ½ï¼‰
class SmartPhone(AudioMixin, NotificationMixin, StorageMixin):
    def __init__(self, brand):
        super().__init__()  # è°ƒç”¨StorageMixinçš„åˆå§‹åŒ–
        self.brand = brand
        print(f"ğŸ“± {brand}æ‰‹æœºåˆ›å»ºæˆåŠŸ")
    
    def make_call(self, number):
        self.play_sound("æ‹¨å·éŸ³")
        print(f"ğŸ“ æ‹¨æ‰“ç”µè¯ï¼š{number}")
        self.send_notification(f"æ­£åœ¨é€šè¯ï¼š{number}")

# ğŸ® æ¸¸æˆæœºç±»ï¼ˆåªæ··å…¥éƒ¨åˆ†åŠŸèƒ½ï¼‰
class GameConsole(AudioMixin, StorageMixin):
    def __init__(self, name):
        super().__init__()
        self.name = name
        print(f"ğŸ® {name}æ¸¸æˆæœºåˆ›å»ºæˆåŠŸ")
    
    def play_game(self, game_name):
        self.save_data("last_game", game_name)
        self.play_sound("æ¸¸æˆéŸ³æ•ˆ")
        print(f"ğŸ¯ å¼€å§‹æ¸¸æˆï¼š{game_name}")

# ä½¿ç”¨ç¤ºä¾‹
print("=" * 40)
phone = SmartPhone("iPhone")
phone.make_call("10086")
phone.set_volume(80)
phone.save_data("è”ç³»äºº", "å°æ˜")

print("\n" + "=" * 40)  
console = GameConsole("PlayStation")
console.play_game("å¡å°”è¾¾ä¼ è¯´")
console.set_volume(60)
# console.send_notification("test")  # âŒ è¿™ä¼šæŠ¥é”™ï¼Œå› ä¸ºGameConsoleæ²¡æœ‰æ··å…¥NotificationMixin
```

### 6.3 Mixinè®¾è®¡åŸåˆ™


```python
# âœ… å¥½çš„Mixinè®¾è®¡
class TimeStampMixin:
    """æ—¶é—´æˆ³åŠŸèƒ½æ··å…¥"""
    def __init__(self):
        from datetime import datetime
        self.created_at = datetime.now()
        super().__init__()  # é‡è¦ï¼šè°ƒç”¨ä¸‹ä¸€ä¸ªç±»çš„åˆå§‹åŒ–
    
    def get_age(self):
        from datetime import datetime
        return (datetime.now() - self.created_at).seconds

class ValidatorMixin:
    """éªŒè¯åŠŸèƒ½æ··å…¥"""
    def validate_email(self, email):
        return "@" in email and "." in email
    
    def validate_phone(self, phone):
        return phone.isdigit() and len(phone) >= 10

# ğŸª ç”¨æˆ·ç±»æ··å…¥å¤šç§åŠŸèƒ½
class User(TimeStampMixin, ValidatorMixin):
    def __init__(self, name, email):
        self.name = name
        self.email = email
        super().__init__()  # åˆå§‹åŒ–æ‰€æœ‰Mixin
    
    def register(self):
        if self.validate_email(self.email):
            print(f"âœ… {self.name}æ³¨å†ŒæˆåŠŸ")
            print(f"â° æ³¨å†Œæ—¶é—´ï¼š{self.created_at}")
        else:
            print("âŒ é‚®ç®±æ ¼å¼é”™è¯¯")

# æµ‹è¯•
user = User("å¼ ä¸‰", "zhangsan@qq.com")
user.register()
print(f"è´¦æˆ·å­˜åœ¨æ—¶é—´ï¼š{user.get_age()}ç§’")
```

**Mixinæœ€ä½³å®è·µ**ï¼š
```
ğŸ¯ Mixinè®¾è®¡åŸåˆ™ï¼š
âœ… åŠŸèƒ½å•ä¸€ï¼šæ¯ä¸ªMixinåªè´Ÿè´£ä¸€ç§åŠŸèƒ½
âœ… æ— çŠ¶æ€ä¼˜å…ˆï¼šå°½é‡ä¸ç»´æŠ¤çŠ¶æ€ï¼Œæä¾›è¡Œä¸º
âœ… å¯ç»„åˆï¼šå¯ä»¥å’Œå…¶ä»–Mixinè‡ªç”±ç»„åˆ
âœ… å‘½åæ¸…æ™°ï¼šç±»åä»¥Mixinç»“å°¾
âœ… æ–‡æ¡£å®Œå–„ï¼šè¯´æ˜Mixinçš„ç”¨é€”å’Œä¾èµ–
```

---

## 7. âš ï¸ å¤šé‡ç»§æ‰¿é™·é˜±ä¸æœ€ä½³å®è·µ


### 7.1 å¸¸è§é™·é˜±


**é™·é˜±ä¸€ï¼šæ–¹æ³•è°ƒç”¨æ··ä¹±**
```python
# ğŸš« å®¹æ˜“æ··ä¹±çš„è®¾è®¡
class Parent1:
    def method(self): print("Parent1")

class Parent2:  
    def method(self): print("Parent2")

class Child(Parent1, Parent2):
    pass

# ä½ è§‰å¾—ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ
Child().method()  # è¾“å‡ºï¼šParent1
# å¾ˆå¤šäººå¯èƒ½æœŸæœ›æ˜¯Parent2ï¼Œä½†å®é™…æ˜¯Parent1
```

**é™·é˜±äºŒï¼šåˆå§‹åŒ–é—®é¢˜**
```python
# ğŸš« é”™è¯¯çš„åˆå§‹åŒ–æ–¹å¼
class A:
    def __init__(self):
        print("Aåˆå§‹åŒ–")

class B(A):
    def __init__(self):
        A.__init__(self)  # âŒ ç›´æ¥è°ƒç”¨å¯èƒ½å¯¼è‡´é‡å¤åˆå§‹åŒ–
        print("Båˆå§‹åŒ–")

class C(A):
    def __init__(self):
        A.__init__(self)  # âŒ åŒä¸Š
        print("Cåˆå§‹åŒ–")

class D(B, C):
    def __init__(self):
        B.__init__(self)
        C.__init__(self)  # Aä¼šè¢«åˆå§‹åŒ–ä¸¤æ¬¡ï¼
        print("Dåˆå§‹åŒ–")
```

**æ­£ç¡®çš„åˆå§‹åŒ–æ–¹å¼**ï¼š
```python
# âœ… ä½¿ç”¨super()ç¡®ä¿æ­£ç¡®åˆå§‹åŒ–
class A:
    def __init__(self):
        print("Aåˆå§‹åŒ–")

class B(A):
    def __init__(self):
        super().__init__()  # âœ… ä½¿ç”¨super()
        print("Båˆå§‹åŒ–")

class C(A):
    def __init__(self):
        super().__init__()  # âœ… ä½¿ç”¨super()
        print("Cåˆå§‹åŒ–")

class D(B, C):
    def __init__(self):
        super().__init__()  # âœ… ä½¿ç”¨super()
        print("Dåˆå§‹åŒ–")

# æµ‹è¯•ï¼šAåªä¼šåˆå§‹åŒ–ä¸€æ¬¡
D()
```

### 7.2 æœ€ä½³å®è·µ


**å®è·µä¸€ï¼šä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿**
```python
# ğŸ¯ ç»„åˆä¼˜äºç»§æ‰¿çš„ä¾‹å­
class Engine:
    def start(self): return "å¼•æ“å¯åŠ¨"
    def stop(self): return "å¼•æ“åœæ­¢"

class GPS:
    def navigate(self, destination): 
        return f"å¯¼èˆªåˆ°{destination}"

# âœ… ä½¿ç”¨ç»„åˆ
class Car:
    def __init__(self):
        self.engine = Engine()    # ç»„åˆ
        self.gps = GPS()         # ç»„åˆ
    
    def start_journey(self, destination):
        print(self.engine.start())
        print(self.gps.navigate(destination))

# è€Œä¸æ˜¯å¤šé‡ç»§æ‰¿
# class Car(Engine, GPS):  # âŒ ä¸æ¨è
```

**å®è·µäºŒï¼šé™åˆ¶ç»§æ‰¿å±‚æ¬¡**
```python
# âœ… æ¨èçš„ç»§æ‰¿æ·±åº¦
class Animal:           # ç¬¬1å±‚
    pass

class Mammal(Animal):   # ç¬¬2å±‚  
    pass

class Dog(Mammal):      # ç¬¬3å±‚ - é€šå¸¸åˆ°è¿™é‡Œå°±å¤Ÿäº†
    pass

# âŒ é¿å…è¿‡æ·±çš„ç»§æ‰¿
# class Poodle(Dog):    # ç¬¬4å±‚ - è¿‡æ·±äº†
```

**å®è·µä¸‰ï¼šä½¿ç”¨æŠ½è±¡åŸºç±»è§„èŒƒæ¥å£**
```python
from abc import ABC, abstractmethod

# ğŸ¨ å®šä¹‰è§„èŒƒçš„æŠ½è±¡åŸºç±»
class DrawableMixin(ABC):
    @abstractmethod
    def draw(self):
        pass

class MovableMixin(ABC):
    @abstractmethod  
    def move(self, x, y):
        pass

# âœ… å®ç°å®Œæ•´çš„ç±»
class Circle(DrawableMixin, MovableMixin):
    def __init__(self, radius):
        self.radius = radius
        self.x = 0
        self.y = 0
    
    def draw(self):
        print(f"ç»˜åˆ¶åŠå¾„ä¸º{self.radius}çš„åœ†")
    
    def move(self, x, y):
        self.x, self.y = x, y
        print(f"åœ†ç§»åŠ¨åˆ°({x}, {y})")
```

### 7.3 å¤šé‡ç»§æ‰¿æ£€æŸ¥æ¸…å•


```
ğŸ” å¤šé‡ç»§æ‰¿è®¾è®¡æ£€æŸ¥æ¸…å•ï¼š

è®¾è®¡é˜¶æ®µï¼š
â˜‘ï¸ æ˜¯å¦çœŸçš„éœ€è¦å¤šé‡ç»§æ‰¿ï¼Ÿèƒ½ç”¨ç»„åˆå—ï¼Ÿ
â˜‘ï¸ ç»§æ‰¿å…³ç³»æ˜¯å¦åˆç†ï¼Ÿï¼ˆæ˜¯å¦ç¬¦åˆ"æ˜¯ä¸€ä¸ª"å…³ç³»ï¼‰
â˜‘ï¸ Mixinæ˜¯å¦å•ä¸€èŒè´£ï¼Ÿ
â˜‘ï¸ æ˜¯å¦é¿å…äº†è±å½¢ç»§æ‰¿ï¼Ÿ

å®ç°é˜¶æ®µï¼š
â˜‘ï¸ æ˜¯å¦ä½¿ç”¨super()è€Œéç›´æ¥è°ƒç”¨çˆ¶ç±»ï¼Ÿ
â˜‘ï¸ æ˜¯å¦æ£€æŸ¥äº†MROé¡ºåºï¼Ÿ
â˜‘ï¸ æ˜¯å¦æœ‰å®Œæ•´çš„æ–‡æ¡£è¯´æ˜ï¼Ÿ
â˜‘ï¸ æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•è¦†ç›–ï¼Ÿ

ç»´æŠ¤é˜¶æ®µï¼š
â˜‘ï¸ ä¿®æ”¹çˆ¶ç±»æ—¶æ˜¯å¦è€ƒè™‘äº†å½±å“ï¼Ÿ
â˜‘ï¸ æ–°å¢æ–¹æ³•æ—¶æ˜¯å¦æ£€æŸ¥äº†å†²çªï¼Ÿ
â˜‘ï¸ æ˜¯å¦å®šæœŸé‡æ„ç®€åŒ–ç»§æ‰¿å…³ç³»ï¼Ÿ
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¤šé‡ç»§æ‰¿ï¼šä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»çš„ç‰¹æ€§
ğŸ”¸ è±å½¢ç»§æ‰¿ï¼šç»§æ‰¿å…³ç³»å½¢æˆè±å½¢æ—¶çš„æ­§ä¹‰é—®é¢˜
ğŸ”¸ MROï¼šæ–¹æ³•è§£æé¡ºåºï¼Œå†³å®šæ–¹æ³•æŸ¥æ‰¾çš„è·¯å¾„
ğŸ”¸ C3ç®—æ³•ï¼šPythonè®¡ç®—MROçš„ç®—æ³•ï¼Œç¡®ä¿ç»§æ‰¿ä¸€è‡´æ€§
ğŸ”¸ Mixinæ¨¡å¼ï¼šé€šè¿‡æ··å…¥åŠŸèƒ½è€Œéå»ºç«‹"æ˜¯ä¸€ä¸ª"å…³ç³»
ğŸ”¸ super()ï¼šæŒ‰MROé¡ºåºè°ƒç”¨ä¸‹ä¸€ä¸ªç±»çš„æ–¹æ³•
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ MROçš„å·¥ä½œåŸç†**
```
æŸ¥æ‰¾é¡ºåºï¼šå½“å‰ç±» â†’ ç¬¬ä¸€ä¸ªçˆ¶ç±» â†’ ... â†’ æœ€åä¸€ä¸ªçˆ¶ç±» â†’ object
æŸ¥æ‰¾è§„åˆ™ï¼šä»å·¦åˆ°å³ï¼Œæ·±åº¦ä¼˜å…ˆï¼Œä½†ä¿è¯çˆ¶ç±»åªå‡ºç°ä¸€æ¬¡
å®é™…åº”ç”¨ï¼šç†è§£ä¸ºä»€ä¹ˆæŸä¸ªæ–¹æ³•è¢«è°ƒç”¨ï¼Œè°ƒè¯•ç»§æ‰¿é—®é¢˜
```

**ğŸ”¹ ä½•æ—¶ä½¿ç”¨å¤šé‡ç»§æ‰¿**
```
é€‚åˆä½¿ç”¨ï¼š
âœ… Mixinæ¨¡å¼ï¼šæ··å…¥ç‹¬ç«‹çš„åŠŸèƒ½
âœ… æ¥å£å®ç°ï¼šå®ç°å¤šä¸ªæŠ½è±¡åŸºç±»
âœ… è£…é¥°å™¨æ¨¡å¼ï¼šä¸ºç±»æ·»åŠ é¢å¤–åŠŸèƒ½

ä¸é€‚åˆä½¿ç”¨ï¼š
âŒ æ·±å±‚ç»§æ‰¿ï¼šè¶…è¿‡3å±‚çš„ç»§æ‰¿å…³ç³»
âŒ ç´§è€¦åˆï¼šçˆ¶ç±»ä¹‹é—´æœ‰å¼ºä¾èµ–å…³ç³»
âŒ å¤æ‚é€»è¾‘ï¼šéš¾ä»¥ç†è§£å’Œç»´æŠ¤çš„ç»§æ‰¿ç»“æ„
```

**ğŸ”¹ super()çš„æ­£ç¡®ä½¿ç”¨**
```
æ ¸å¿ƒç†å¿µï¼š
- super()ä¸æ˜¯è°ƒç”¨çˆ¶ç±»ï¼Œè€Œæ˜¯è°ƒç”¨MROä¸­çš„ä¸‹ä¸€ä¸ªç±»
- ç¡®ä¿æ¯ä¸ªç±»çš„æ–¹æ³•åªè¢«è°ƒç”¨ä¸€æ¬¡
- åœ¨å¤šé‡ç»§æ‰¿ä¸­å°¤å…¶é‡è¦ï¼Œé¿å…é‡å¤åˆå§‹åŒ–
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ“± Webå¼€å‘åº”ç”¨**
```python
# Djangoä¸­çš„Mixinä½¿ç”¨
class LoginRequiredMixin:    # ç™»å½•éªŒè¯
class PermissionMixin:       # æƒé™æ£€æŸ¥  
class AuditMixin:           # å®¡è®¡æ—¥å¿—

class ArticleView(LoginRequiredMixin, PermissionMixin, AuditMixin, View):
    pass  # ç»„åˆå¤šç§åŠŸèƒ½
```

**ğŸ® æ¸¸æˆå¼€å‘åº”ç”¨**
```python
# æ¸¸æˆè§’è‰²èƒ½åŠ›ç³»ç»Ÿ
class FlyableMixin:     # é£è¡Œèƒ½åŠ›
class SwimmableMixin:   # æ¸¸æ³³èƒ½åŠ›
class MagicMixin:       # é­”æ³•èƒ½åŠ›

class Dragon(FlyableMixin, MagicMixin, Monster):
    pass  # é¾™ï¼šä¼šé£ï¼Œä¼šé­”æ³•çš„æ€ªç‰©

class Fish(SwimmableMixin, Animal):  
    pass  # é±¼ï¼šä¼šæ¸¸æ³³çš„åŠ¨ç‰©
```

**ğŸ”§ å·¥å…·åº“è®¾è®¡**
```python
# åŠŸèƒ½æ€§å·¥å…·Mixin
class SerializableMixin:    # åºåˆ—åŒ–åŠŸèƒ½
class CacheableMixin:       # ç¼“å­˜åŠŸèƒ½
class ValidatableMixin:     # éªŒè¯åŠŸèƒ½

class User(SerializableMixin, CacheableMixin, ValidatableMixin):
    pass  # ç”¨æˆ·ç±»å…·å¤‡å¤šç§é€šç”¨åŠŸèƒ½
```

### 8.4 å­¦ä¹ å»ºè®®


**ğŸ¯ å­¦ä¹ è·¯å¾„**
```
1ï¸âƒ£ æŒæ¡åŸºç¡€ï¼šå…ˆç†Ÿæ‚‰å•ç»§æ‰¿ï¼Œç†è§£ç»§æ‰¿çš„æ¦‚å¿µ
2ï¸âƒ£ ç†è§£MROï¼šé€šè¿‡å®ä¾‹å­¦ä¹ æ–¹æ³•æŸ¥æ‰¾é¡ºåº
3ï¸âƒ£ å­¦ä¹ super()ï¼šæŒæ¡æ­£ç¡®çš„çˆ¶ç±»æ–¹æ³•è°ƒç”¨
4ï¸âƒ£ å®è·µMixinï¼šä»ç®€å•çš„åŠŸèƒ½æ··å…¥å¼€å§‹
5ï¸âƒ£ è®¾è®¡æ¨¡å¼ï¼šå­¦ä¹ ä½•æ—¶ä½¿ç”¨ï¼Œä½•æ—¶é¿å…
```

**ğŸ› ï¸ å®è·µå»ºè®®**
```
è¾¹å­¦è¾¹ç»ƒï¼š
- å†™ä»£ç æ—¶ä¸»åŠ¨ä½¿ç”¨mro()æŸ¥çœ‹ç»§æ‰¿é¡ºåº
- é‡åˆ°é—®é¢˜æ—¶åˆ†æMROï¼Œç†è§£æ–¹æ³•è°ƒç”¨è·¯å¾„
- å¤šå®è·µMixinæ¨¡å¼ï¼Œä½“ä¼šç»„åˆçš„å¨åŠ›
- é˜…è¯»ä¼˜ç§€åº“çš„æºç ï¼Œå­¦ä¹ æœ€ä½³å®è·µ
```

**ğŸ’¡ è®°å¿†æŠ€å·§**
```
MROè®°å¿†æ³•ï¼š
"Pythonæ‰¾æ–¹æ³•ï¼Œä»å·¦åˆ°å³è¦è®°ç‰¢ï¼Œ
æ·±åº¦ä¼˜å…ˆä¸é‡å¤ï¼ŒC3ç®—æ³•è§„åˆ™å¥½ã€‚
superè°ƒç”¨æŒ‰é¡ºåºï¼Œä¸æ˜¯çˆ¶ç±»è¦æ˜äº†ï¼Œ
Mixinæ¨¡å¼åŠŸèƒ½å¤šï¼Œç»„åˆä¼˜äºç»§æ‰¿å¥½ã€‚"
```

**æ ¸å¿ƒè¦ç‚¹**ï¼š
- å¤šé‡ç»§æ‰¿è™½ç„¶å¼ºå¤§ï¼Œä½†è¦è°¨æ…ä½¿ç”¨
- ç†è§£MROæ˜¯ä½¿ç”¨å¤šé‡ç»§æ‰¿çš„å…³é”®
- Mixinæ¨¡å¼æ˜¯å¤šé‡ç»§æ‰¿çš„æœ€ä½³å®è·µ
- ç»„åˆå¾€å¾€æ¯”ç»§æ‰¿æ›´çµæ´»ã€æ›´æ˜“ç»´æŠ¤