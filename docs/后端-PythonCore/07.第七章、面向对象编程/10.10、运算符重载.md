---
title: 10ã€è¿ç®—ç¬¦é‡è½½
---
## ğŸ“š ç›®å½•

1. [è¿ç®—ç¬¦é‡è½½åŸºæœ¬æ¦‚å¿µ](#1-è¿ç®—ç¬¦é‡è½½åŸºæœ¬æ¦‚å¿µ)
2. [ç®—æœ¯è¿ç®—ç¬¦é‡è½½](#2-ç®—æœ¯è¿ç®—ç¬¦é‡è½½)
3. [æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½](#3-æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½)
4. [ä½è¿ç®—ç¬¦é‡è½½](#4-ä½è¿ç®—ç¬¦é‡è½½)
5. [å¢å¼ºèµ‹å€¼è¿ç®—ç¬¦é‡è½½](#5-å¢å¼ºèµ‹å€¼è¿ç®—ç¬¦é‡è½½)
6. [ä¸€å…ƒè¿ç®—ç¬¦é‡è½½](#6-ä¸€å…ƒè¿ç®—ç¬¦é‡è½½)
7. [è¿ç®—ç¬¦é‡è½½æœ€ä½³å®è·µ](#7-è¿ç®—ç¬¦é‡è½½æœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è¿ç®—ç¬¦é‡è½½åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è¿ç®—ç¬¦é‡è½½


**ç®€å•ç†è§£**ï¼šè¿ç®—ç¬¦é‡è½½å°±æ˜¯è®©è‡ªå®šä¹‰çš„ç±»èƒ½å¤Ÿä½¿ç”¨`+`ã€`-`ã€`*`ç­‰è¿ç®—ç¬¦ï¼Œå°±åƒå†…ç½®ç±»å‹ä¸€æ ·ã€‚

```
æƒ³è±¡ä¸€ä¸‹ï¼š
æ•°å­—ç›¸åŠ ï¼š3 + 5 = 8
å­—ç¬¦ä¸²ç›¸åŠ ï¼š"hello" + "world" = "helloworld"
åˆ—è¡¨ç›¸åŠ ï¼š[1,2] + [3,4] = [1,2,3,4]

é‚£ä¹ˆæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ç±»èƒ½ä¸èƒ½ä¹Ÿæ”¯æŒè¿™æ ·çš„æ“ä½œå‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯ï¼šå¯ä»¥ï¼è¿™å°±æ˜¯è¿ç®—ç¬¦é‡è½½è¦è§£å†³çš„é—®é¢˜
```

**è¿ç®—ç¬¦é‡è½½çš„æœ¬è´¨**ï¼š
- ä¸ºç±»å®šä¹‰ç‰¹æ®Šæ–¹æ³•ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰
- å½“ä½¿ç”¨è¿ç®—ç¬¦æ—¶ï¼ŒPythonè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„ç‰¹æ®Šæ–¹æ³•
- è®©è‡ªå®šä¹‰ç±»çš„å¯¹è±¡è¡¨ç°å¾—åƒå†…ç½®ç±»å‹ä¸€æ ·è‡ªç„¶

### 1.2 ç‰¹æ®Šæ–¹æ³•å‘½åè§„åˆ™


```
è¿ç®—ç¬¦é‡è½½çš„è§„å¾‹å¾ˆç®€å•ï¼š
è¿ç®—ç¬¦ â†’ å¯¹åº”çš„ç‰¹æ®Šæ–¹æ³•å

+   â†’  __add__     (åŠ æ³•)
-   â†’  __sub__     (å‡æ³•)  
*   â†’  __mul__     (ä¹˜æ³•)
==  â†’  __eq__      (ç­‰äº)
<   â†’  __lt__      (å°äº)
```

### 1.3 è¿ç®—ç¬¦é‡è½½å·¥ä½œåŸç†


```
å½“ä½ å†™ a + b æ—¶ï¼ŒPythonå®é™…ä¸Šåšçš„æ˜¯ï¼š

æ­¥éª¤1ï¼šæ£€æŸ¥ a æ˜¯å¦æœ‰ __add__ æ–¹æ³•
æ­¥éª¤2ï¼šå¦‚æœæœ‰ï¼Œè°ƒç”¨ a.__add__(b)
æ­¥éª¤3ï¼šå¦‚æœæ²¡æœ‰æˆ–è¿”å›NotImplementedï¼Œæ£€æŸ¥ b çš„ __radd__ æ–¹æ³•
æ­¥éª¤4ï¼šè°ƒç”¨ b.__radd__(a)

ç®€å•æ¥è¯´ï¼š
a + b  ç­‰ä»·äº  a.__add__(b)
```

**åŸºç¡€ç¤ºä¾‹**ï¼š
```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __add__(self, other):
        """å®šä¹‰åŠ æ³•è¿ç®—"""
        return Point(self.x + other.x, self.y + other.y)
    
    def __str__(self):
        return f"Point({self.x}, {self.y})"

# ä½¿ç”¨è¿ç®—ç¬¦é‡è½½
p1 = Point(1, 2)
p2 = Point(3, 4)
p3 = p1 + p2  # ç­‰ä»·äº p1.__add__(p2)
print(p3)     # Point(4, 6)
```

---

## 2. â• ç®—æœ¯è¿ç®—ç¬¦é‡è½½


### 2.1 åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦


**æ ¸å¿ƒç®—æœ¯è¿ç®—ç¬¦å¯¹ç…§è¡¨**ï¼š

| è¿ç®—ç¬¦ | æ–¹æ³•å | åå‘æ–¹æ³• | è¯´æ˜ |
|--------|--------|----------|------|
| `+` | `__add__` | `__radd__` | åŠ æ³• |
| `-` | `__sub__` | `__rsub__` | å‡æ³• |
| `*` | `__mul__` | `__rmul__` | ä¹˜æ³• |
| `/` | `__truediv__` | `__rtruediv__` | é™¤æ³• |
| `//` | `__floordiv__` | `__rfloordiv__` | æ•´é™¤ |
| `%` | `__mod__` | `__rmod__` | å–æ¨¡ |
| `**` | `__pow__` | `__rpow__` | å¹‚è¿ç®— |

### 2.2 å®ç°ä¸€ä¸ªå‘é‡ç±»


```python
class Vector:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __add__(self, other):
        """å‘é‡åŠ æ³•ï¼šä¸¤ä¸ªå‘é‡å¯¹åº”åæ ‡ç›¸åŠ """
        if isinstance(other, Vector):
            return Vector(self.x + other.x, self.y + other.y)
        return NotImplemented
    
    def __sub__(self, other):
        """å‘é‡å‡æ³•"""
        if isinstance(other, Vector):
            return Vector(self.x - other.x, self.y - other.y)
        return NotImplemented
    
    def __mul__(self, other):
        """å‘é‡ä¹˜æ³•ï¼šå¯ä»¥ä¹˜ä»¥æ•°å­—(æ ‡é‡ä¹˜æ³•)"""
        if isinstance(other, (int, float)):
            return Vector(self.x * other, self.y * other)
        return NotImplemented
    
    def __rmul__(self, other):
        """åå‘ä¹˜æ³•ï¼šæ”¯æŒ 3 * vector"""
        return self.__mul__(other)
    
    def __str__(self):
        return f"Vector({self.x}, {self.y})"

# ä½¿ç”¨ç¤ºä¾‹
v1 = Vector(2, 3)
v2 = Vector(1, 4)

# å‘é‡åŠ æ³•
v3 = v1 + v2
print(v3)  # Vector(3, 7)

# å‘é‡å‡æ³•  
v4 = v1 - v2
print(v4)  # Vector(1, -1)

# æ ‡é‡ä¹˜æ³•
v5 = v1 * 3
print(v5)  # Vector(6, 9)

# åå‘ä¹˜æ³•
v6 = 2 * v1
print(v6)  # Vector(4, 6)
```

### 2.3 é™¤æ³•è¿ç®—ç¬¦çš„ç‰¹æ®Šæ€§


> ğŸ’¡ **é‡è¦æé†’**ï¼šPython 3ä¸­æœ‰ä¸¤ç§é™¤æ³•è¿ç®—ç¬¦

```python
class Fraction:
    """åˆ†æ•°ç±»ç¤ºä¾‹"""
    def __init__(self, numerator, denominator):
        self.num = numerator      # åˆ†å­
        self.den = denominator    # åˆ†æ¯
    
    def __truediv__(self, other):
        """çœŸé™¤æ³• /ï¼šè¿”å›æµ®ç‚¹æ•°ç»“æœ"""
        if isinstance(other, Fraction):
            return Fraction(self.num * other.den, self.den * other.num)
        elif isinstance(other, (int, float)):
            return Fraction(self.num, self.den * other)
        return NotImplemented
    
    def __floordiv__(self, other):
        """æ•´é™¤ //ï¼šè¿”å›æ•´æ•°éƒ¨åˆ†"""
        if isinstance(other, (int, float)):
            result = (self.num / self.den) // other
            return int(result)
        return NotImplemented
    
    def __str__(self):
        return f"{self.num}/{self.den}"

# ä½¿ç”¨ç¤ºä¾‹
f1 = Fraction(3, 4)
f2 = Fraction(1, 2)

print(f1 / f2)   # çœŸé™¤æ³•
print(f1 // 2)   # æ•´é™¤
```

---

## 3. âš–ï¸ æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½


### 3.1 æ¯”è¾ƒè¿ç®—ç¬¦å¯¹ç…§è¡¨


| è¿ç®—ç¬¦ | æ–¹æ³•å | å«ä¹‰ |
|--------|--------|------|
| `==` | `__eq__` | ç­‰äº |
| `!=` | `__ne__` | ä¸ç­‰äº |
| `<` | `__lt__` | å°äº |
| `<=` | `__le__` | å°äºç­‰äº |
| `>` | `__gt__` | å¤§äº |
| `>=` | `__ge__` | å¤§äºç­‰äº |

### 3.2 å®ç°ä¸€ä¸ªå­¦ç”Ÿæˆç»©ç±»


```python
class Student:
    def __init__(self, name, score):
        self.name = name
        self.score = score
    
    def __eq__(self, other):
        """æˆç»©ç›¸ç­‰"""
        if isinstance(other, Student):
            return self.score == other.score
        return False
    
    def __lt__(self, other):
        """æˆç»©å°äº"""
        if isinstance(other, Student):
            return self.score < other.score
        return NotImplemented
    
    def __le__(self, other):
        """æˆç»©å°äºç­‰äº"""
        if isinstance(other, Student):
            return self.score <= other.score
        return NotImplemented
    
    def __gt__(self, other):
        """æˆç»©å¤§äº"""
        if isinstance(other, Student):
            return self.score > other.score
        return NotImplemented
    
    def __ge__(self, other):
        """æˆç»©å¤§äºç­‰äº"""
        if isinstance(other, Student):
            return self.score >= other.score
        return NotImplemented
    
    def __str__(self):
        return f"{self.name}({self.score}åˆ†)"

# ä½¿ç”¨ç¤ºä¾‹
alice = Student("Alice", 85)
bob = Student("Bob", 92)
charlie = Student("Charlie", 85)

print(alice == charlie)  # True (æˆç»©ç›¸åŒ)
print(alice < bob)       # True (Aliceæˆç»©ä½äºBob)
print(bob >= alice)      # True (Bobæˆç»©é«˜äºç­‰äºAlice)

# å¯ä»¥ç”¨äºæ’åº
students = [bob, alice, charlie]
sorted_students = sorted(students)  # æŒ‰æˆç»©ä»ä½åˆ°é«˜æ’åº
for student in sorted_students:
    print(student)
```

### 3.3 åˆ©ç”¨functools.total_orderingç®€åŒ–æ¯”è¾ƒ


> ğŸ’¡ **å®ç”¨æŠ€å·§**ï¼šåªéœ€è¦å®šä¹‰`__eq__`å’Œä¸€ä¸ªæ’åºæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ

```python
from functools import total_ordering

@total_ordering
class Student:
    def __init__(self, name, score):
        self.name = name
        self.score = score
    
    def __eq__(self, other):
        """åªéœ€è¦å®šä¹‰ç­‰äº"""
        if isinstance(other, Student):
            return self.score == other.score
        return False
    
    def __lt__(self, other):
        """åªéœ€è¦å®šä¹‰å°äºï¼Œå…¶ä»–æ¯”è¾ƒæ–¹æ³•è‡ªåŠ¨ç”Ÿæˆ"""
        if isinstance(other, Student):
            return self.score < other.score
        return NotImplemented
    
    def __str__(self):
        return f"{self.name}({self.score}åˆ†)"

# ç°åœ¨æ‰€æœ‰æ¯”è¾ƒè¿ç®—ç¬¦éƒ½å¯ä»¥ä½¿ç”¨äº†ï¼
alice = Student("Alice", 85)
bob = Student("Bob", 92)
print(alice <= bob)  # True (è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•)
print(alice >= bob)  # False (è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•)
```

---

## 4. ğŸ”¢ ä½è¿ç®—ç¬¦é‡è½½


### 4.1 ä½è¿ç®—ç¬¦å¯¹ç…§è¡¨


| è¿ç®—ç¬¦ | æ–¹æ³•å | åå‘æ–¹æ³• | å«ä¹‰ |
|--------|--------|----------|------|
| `&` | `__and__` | `__rand__` | æŒ‰ä½ä¸ |
| `\|` | `__or__` | `__ror__` | æŒ‰ä½æˆ– |
| `^` | `__xor__` | `__rxor__` | æŒ‰ä½å¼‚æˆ– |
| `<<` | `__lshift__` | `__rlshift__` | å·¦ç§» |
| `>>` | `__rshift__` | `__rrshift__` | å³ç§» |
| `~` | `__invert__` | æ—  | æŒ‰ä½å–å |

### 4.2 å®ç°ä¸€ä¸ªé›†åˆç±»


```python
class MySet:
    """ç®€å•çš„é›†åˆç±»ï¼Œæ¼”ç¤ºä½è¿ç®—ç¬¦é‡è½½"""
    def __init__(self, items=None):
        self.items = set(items or [])
    
    def __and__(self, other):
        """& è¿ç®—ç¬¦ï¼šé›†åˆäº¤é›†"""
        if isinstance(other, MySet):
            return MySet(self.items & other.items)
        return NotImplemented
    
    def __or__(self, other):
        """| è¿ç®—ç¬¦ï¼šé›†åˆå¹¶é›†"""
        if isinstance(other, MySet):
            return MySet(self.items | other.items)
        return NotImplemented
    
    def __xor__(self, other):
        """^ è¿ç®—ç¬¦ï¼šé›†åˆå¯¹ç§°å·®"""
        if isinstance(other, MySet):
            return MySet(self.items ^ other.items)
        return NotImplemented
    
    def __sub__(self, other):
        """- è¿ç®—ç¬¦ï¼šé›†åˆå·®"""
        if isinstance(other, MySet):
            return MySet(self.items - other.items)
        return NotImplemented
    
    def __str__(self):
        return f"MySet({sorted(list(self.items))})"

# ä½¿ç”¨ç¤ºä¾‹
set1 = MySet([1, 2, 3, 4])
set2 = MySet([3, 4, 5, 6])

print(set1 & set2)  # MySet([3, 4]) - äº¤é›†
print(set1 | set2)  # MySet([1, 2, 3, 4, 5, 6]) - å¹¶é›†
print(set1 ^ set2)  # MySet([1, 2, 5, 6]) - å¯¹ç§°å·®
print(set1 - set2)  # MySet([1, 2]) - å·®é›†
```

### 4.3 ä½ç§»è¿ç®—ç¬¦çš„åˆ›æ„ç”¨æ³•


```python
class BitPattern:
    """ä½æ¨¡å¼ç±»ï¼Œæ¼”ç¤ºä½ç§»è¿ç®—"""
    def __init__(self, pattern):
        self.pattern = pattern
    
    def __lshift__(self, n):
        """å·¦ç§»ï¼šåœ¨æ¨¡å¼åé¢åŠ nä¸ª0"""
        return BitPattern(self.pattern + '0' * n)
    
    def __rshift__(self, n):
        """å³ç§»ï¼šä»æ¨¡å¼åé¢å»æ‰nä¸ªå­—ç¬¦"""
        if n >= len(self.pattern):
            return BitPattern('')
        return BitPattern(self.pattern[:-n] if n > 0 else self.pattern)
    
    def __str__(self):
        return self.pattern

# ä½¿ç”¨ç¤ºä¾‹
pattern = BitPattern("101")
print(pattern << 2)  # "10100" (å·¦ç§»2ä½)
print(pattern >> 1)  # "10" (å³ç§»1ä½)
```

---

## 5. ğŸ”„ å¢å¼ºèµ‹å€¼è¿ç®—ç¬¦é‡è½½


### 5.1 å¢å¼ºèµ‹å€¼è¿ç®—ç¬¦å¯¹ç…§è¡¨


| è¿ç®—ç¬¦ | æ–¹æ³•å | å«ä¹‰ |
|--------|--------|------|
| `+=` | `__iadd__` | å°±åœ°åŠ æ³• |
| `-=` | `__isub__` | å°±åœ°å‡æ³• |
| `*=` | `__imul__` | å°±åœ°ä¹˜æ³• |
| `/=` | `__itruediv__` | å°±åœ°é™¤æ³• |
| `//=` | `__ifloordiv__` | å°±åœ°æ•´é™¤ |
| `%=` | `__imod__` | å°±åœ°å–æ¨¡ |
| `**=` | `__ipow__` | å°±åœ°å¹‚è¿ç®— |

### 5.2 å°±åœ°è¿ç®—vsæ™®é€šè¿ç®—


> âš ï¸ **é‡è¦åŒºåˆ«**ï¼šå¢å¼ºèµ‹å€¼è¿ç®—ç¬¦ä¿®æ”¹åŸå¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°å¯¹è±¡

```python
class Counter:
    def __init__(self, value=0):
        self.value = value
    
    def __add__(self, other):
        """æ™®é€šåŠ æ³•ï¼šè¿”å›æ–°å¯¹è±¡"""
        if isinstance(other, (int, Counter)):
            other_value = other if isinstance(other, int) else other.value
            return Counter(self.value + other_value)
        return NotImplemented
    
    def __iadd__(self, other):
        """å°±åœ°åŠ æ³•ï¼šä¿®æ”¹å½“å‰å¯¹è±¡"""
        if isinstance(other, (int, Counter)):
            other_value = other if isinstance(other, int) else other.value
            self.value += other_value
            return self  # è¿”å›selfå¾ˆé‡è¦ï¼
        return NotImplemented
    
    def __str__(self):
        return f"Counter({self.value})"

# å¯¹æ¯”æ¼”ç¤º
c1 = Counter(5)
c2 = Counter(3)

# æ™®é€šåŠ æ³•ï¼šåˆ›å»ºæ–°å¯¹è±¡
c3 = c1 + c2
print(f"c1: {c1}")  # Counter(5) - åŸå¯¹è±¡ä¸å˜
print(f"c3: {c3}")  # Counter(8) - æ–°å¯¹è±¡

# å°±åœ°åŠ æ³•ï¼šä¿®æ”¹åŸå¯¹è±¡
c1 += c2
print(f"c1: {c1}")  # Counter(8) - åŸå¯¹è±¡è¢«ä¿®æ”¹
```

### 5.3 å®ç°ä¸€ä¸ªè´­ç‰©è½¦ç±»


```python
class ShoppingCart:
    def __init__(self):
        self.items = {}  # {å•†å“å: æ•°é‡}
        self.total = 0
    
    def __iadd__(self, item_info):
        """æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦"""
        if isinstance(item_info, tuple) and len(item_info) == 2:
            item_name, quantity = item_info
            if item_name in self.items:
                self.items[item_name] += quantity
            else:
                self.items[item_name] = quantity
            self.total += quantity
        return self
    
    def __isub__(self, item_info):
        """ä»è´­ç‰©è½¦ç§»é™¤å•†å“"""
        if isinstance(item_info, tuple) and len(item_info) == 2:
            item_name, quantity = item_info
            if item_name in self.items:
                self.items[item_name] -= quantity
                self.total -= quantity
                if self.items[item_name] <= 0:
                    del self.items[item_name]
        return self
    
    def __str__(self):
        items_str = ", ".join([f"{name}Ã—{count}" for name, count in self.items.items()])
        return f"è´­ç‰©è½¦[{items_str}] æ€»æ•°:{self.total}"

# ä½¿ç”¨ç¤ºä¾‹
cart = ShoppingCart()

# æ·»åŠ å•†å“
cart += ("è‹¹æœ", 3)
cart += ("é¦™è•‰", 2)
cart += ("è‹¹æœ", 1)  # ç´¯åŠ 
print(cart)  # è´­ç‰©è½¦[è‹¹æœÃ—4, é¦™è•‰Ã—2] æ€»æ•°:6

# ç§»é™¤å•†å“
cart -= ("è‹¹æœ", 2)
print(cart)  # è´­ç‰©è½¦[è‹¹æœÃ—2, é¦™è•‰Ã—2] æ€»æ•°:4
```

---

## 6. â•â– ä¸€å…ƒè¿ç®—ç¬¦é‡è½½


### 6.1 ä¸€å…ƒè¿ç®—ç¬¦å¯¹ç…§è¡¨


| è¿ç®—ç¬¦ | æ–¹æ³•å | å«ä¹‰ |
|--------|--------|------|
| `+` | `__pos__` | æ­£å· |
| `-` | `__neg__` | è´Ÿå· |
| `~` | `__invert__` | æŒ‰ä½å–å |
| `abs()` | `__abs__` | ç»å¯¹å€¼ |

### 6.2 å®ç°ä¸€ä¸ªæ¸©åº¦ç±»


```python
class Temperature:
    def __init__(self, celsius):
        self.celsius = celsius
    
    def __pos__(self):
        """æ­£å·ï¼šè¿”å›ç»å¯¹æ¸©åº¦ï¼ˆå¼€å°”æ–‡ï¼‰"""
        return Temperature(self.celsius + 273.15)
    
    def __neg__(self):
        """è´Ÿå·ï¼šè¿”å›ç›¸åçš„æ¸©åº¦"""
        return Temperature(-self.celsius)
    
    def __abs__(self):
        """ç»å¯¹å€¼ï¼šè¿”å›æ¸©åº¦çš„ç»å¯¹å€¼"""
        return Temperature(abs(self.celsius))
    
    def __str__(self):
        return f"{self.celsius}Â°C"

# ä½¿ç”¨ç¤ºä¾‹
temp = Temperature(-10)
print(temp)        # -10Â°C
print(-temp)       # 10Â°C (è´Ÿå·è¿ç®—)
print(abs(temp))   # 10Â°C (ç»å¯¹å€¼)
print(+temp)       # 263.15Â°C (è½¬æ¢ä¸ºå¼€å°”æ–‡)
```

### 6.3 å®ç°ä¸€ä¸ªå‘é‡ç±»çš„å®Œæ•´ç‰ˆ


```python
class Vector2D:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __neg__(self):
        """å‘é‡å–å"""
        return Vector2D(-self.x, -self.y)
    
    def __abs__(self):
        """å‘é‡çš„æ¨¡é•¿ï¼ˆé•¿åº¦ï¼‰"""
        return (self.x ** 2 + self.y ** 2) ** 0.5
    
    def __pos__(self):
        """è¿”å›å‘é‡çš„å•ä½å‘é‡"""
        length = abs(self)
        if length == 0:
            return Vector2D(0, 0)
        return Vector2D(self.x / length, self.y / length)
    
    def __str__(self):
        return f"Vector2D({self.x}, {self.y})"

# ä½¿ç”¨ç¤ºä¾‹
v = Vector2D(3, 4)
print(v)         # Vector2D(3, 4)
print(-v)        # Vector2D(-3, -4) åå‘é‡
print(abs(v))    # 5.0 å‘é‡é•¿åº¦
print(+v)        # Vector2D(0.6, 0.8) å•ä½å‘é‡
```

---

## 7. ğŸ¯ è¿ç®—ç¬¦é‡è½½æœ€ä½³å®è·µ


### 7.1 è¿ç®—ç¬¦å¯¹ç§°æ€§åŸåˆ™


> ğŸ’¡ **å¯¹ç§°æ€§**ï¼šå¦‚æœ `a + b` æœ‰æ„ä¹‰ï¼Œé‚£ä¹ˆ `b + a` ä¹Ÿåº”è¯¥æœ‰æ„ä¹‰

```python
class Money:
    def __init__(self, amount):
        self.amount = amount
    
    def __add__(self, other):
        """é‡‘é’±åŠ æ³•"""
        if isinstance(other, Money):
            return Money(self.amount + other.amount)
        elif isinstance(other, (int, float)):
            return Money(self.amount + other)
        return NotImplemented
    
    def __radd__(self, other):
        """åå‘åŠ æ³•ï¼šæ”¯æŒ æ•°å­— + Money"""
        if isinstance(other, (int, float)):
            return Money(other + self.amount)
        return NotImplemented
    
    def __str__(self):
        return f"${self.amount}"

# å¯¹ç§°æ€§æ¼”ç¤º
money = Money(100)
print(money + 50)    # $150 (Money + æ•°å­—)
print(50 + money)    # $150 (æ•°å­— + Money)
```

### 7.2 ç±»å‹æ£€æŸ¥æœ€ä½³å®è·µ


```python
class SafeNumber:
    def __init__(self, value):
        self.value = value
    
    def __add__(self, other):
        # ğŸ¯ å¥½çš„åšæ³•ï¼šæ˜ç¡®æ£€æŸ¥æ”¯æŒçš„ç±»å‹
        if isinstance(other, SafeNumber):
            return SafeNumber(self.value + other.value)
        elif isinstance(other, (int, float)):
            return SafeNumber(self.value + other)
        else:
            # è¿”å›NotImplementedè®©Pythonå°è¯•å…¶ä»–æ–¹æ³•
            return NotImplemented
    
    def __str__(self):
        return f"SafeNumber({self.value})"

# âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥è®¿é—®å±æ€§å¯èƒ½å‡ºé”™
class UnsafeNumber:
    def __init__(self, value):
        self.value = value
    
    def __add__(self, other):
        # å±é™©ï¼šå¦‚æœotheræ²¡æœ‰valueå±æ€§ä¼šæŠ¥é”™
        return UnsafeNumber(self.value + other.value)
```

### 7.3 æ€§èƒ½è€ƒè™‘


```python
class EfficientVector:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __add__(self, other):
        """é«˜æ•ˆçš„å‘é‡åŠ æ³•"""
        if isinstance(other, EfficientVector):
            # ğŸ¯ å¥½çš„åšæ³•ï¼šç›´æ¥åˆ›å»ºç»“æœï¼Œé¿å…ä¸å¿…è¦çš„ä¸­é—´æ­¥éª¤
            return EfficientVector(self.x + other.x, self.y + other.y)
        return NotImplemented
    
    def __iadd__(self, other):
        """å°±åœ°åŠ æ³•ï¼šæ›´é«˜æ•ˆçš„ä¿®æ”¹æ“ä½œ"""
        if isinstance(other, EfficientVector):
            self.x += other.x
            self.y += other.y
            return self
        return NotImplemented

# æ€§èƒ½å¯¹æ¯”
v1 = EfficientVector(1, 2)
v2 = EfficientVector(3, 4)

# æ™®é€šåŠ æ³•ï¼šåˆ›å»ºæ–°å¯¹è±¡
v3 = v1 + v2

# å°±åœ°åŠ æ³•ï¼šä¿®æ”¹ç°æœ‰å¯¹è±¡ï¼ˆæ›´é«˜æ•ˆï¼‰
v1 += v2
```

### 7.4 è¿ç®—ç¬¦é‡è½½ä½¿ç”¨æŒ‡å—


| âœ… æ¨èåšæ³• | âŒ é¿å…åšæ³• |
|------------|------------|
| ä¿æŒè¿ç®—ç¬¦çš„ç›´è§‚è¯­ä¹‰ | è®©è¿ç®—ç¬¦åšæ„æƒ³ä¸åˆ°çš„äº‹ |
| å®ç°ç›¸å…³çš„è¿ç®—ç¬¦ç»„åˆ | åªå®ç°éƒ¨åˆ†è¿ç®—ç¬¦ |
| è€ƒè™‘ç±»å‹è½¬æ¢å’Œå¯¹ç§°æ€§ | å¿½ç•¥è¾¹ç•Œæƒ…å†µ |
| è¿”å›åˆé€‚çš„ç±»å‹ | è¿”å›æ„å¤–çš„ç±»å‹ |
| ä½¿ç”¨NotImplemented | ç›´æ¥æŠ›å‡ºå¼‚å¸¸ |

```python
# âœ… å¥½çš„ä¾‹å­ï¼šç›´è§‚çš„è¿ç®—ç¬¦è¯­ä¹‰
class Point:
    def __add__(self, other):
        # ç‚¹ + ç‚¹ = æ–°ç‚¹ï¼ˆç›´è§‚ï¼‰
        return Point(self.x + other.x, self.y + other.y)

# âŒ ä¸å¥½çš„ä¾‹å­ï¼šä»¤äººå›°æƒ‘çš„è¿ç®—ç¬¦è¯­ä¹‰  
class Point:
    def __add__(self, other):
        # ç‚¹ + ç‚¹ = åˆ é™¤ç‚¹ï¼Ÿï¼Ÿï¼ˆä»¤äººå›°æƒ‘ï¼‰
        self.delete()
        return None
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è¿ç®—ç¬¦é‡è½½æœ¬è´¨ï¼šé€šè¿‡ç‰¹æ®Šæ–¹æ³•è®©è‡ªå®šä¹‰ç±»æ”¯æŒè¿ç®—ç¬¦
ğŸ”¸ ç‰¹æ®Šæ–¹æ³•å‘½åï¼š__add__ã€__sub__ã€__mul__ç­‰åŒä¸‹åˆ’çº¿æ–¹æ³•
ğŸ”¸ å·¥ä½œåŸç†ï¼ša + b å®é™…è°ƒç”¨ a.__add__(b)
ğŸ”¸ åå‘æ–¹æ³•ï¼šå½“æ­£å‘æ–¹æ³•ä¸å¯ç”¨æ—¶çš„å¤‡é€‰æ–¹æ¡ˆ
ğŸ”¸ å°±åœ°è¿ç®—ï¼š+=ã€-=ç­‰ä¿®æ”¹åŸå¯¹è±¡è€Œéåˆ›å»ºæ–°å¯¹è±¡
```

### 8.2 è¿ç®—ç¬¦åˆ†ç±»æ€»ç»“


**ğŸ”¹ ç®—æœ¯è¿ç®—ç¬¦**
```
åŸºæœ¬è¿ç®—ï¼š+ - * / // % **
å…³é”®ç‚¹ï¼šè€ƒè™‘ç±»å‹å…¼å®¹æ€§å’Œæ•°å­¦æ„ä¹‰
å®ç”¨åœºæ™¯ï¼šæ•°å€¼ç±»ã€å‘é‡ç±»ã€çŸ©é˜µç±»
```

**ğŸ”¹ æ¯”è¾ƒè¿ç®—ç¬¦**
```
æ¯”è¾ƒè¿ç®—ï¼š== != < <= > >=
å…³é”®ç‚¹ï¼šä¿æŒé€»è¾‘ä¸€è‡´æ€§ï¼Œå¯ç”¨total_orderingç®€åŒ–
å®ç”¨åœºæ™¯ï¼šå¯æ’åºçš„è‡ªå®šä¹‰ç±»
```

**ğŸ”¹ ä½è¿ç®—ç¬¦**
```
ä½è¿ç®—ï¼š& | ^ << >> ~
å…³é”®ç‚¹ï¼šé€šå¸¸ç”¨äºé›†åˆæ“ä½œæˆ–ä½æ¨¡å¼å¤„ç†
å®ç”¨åœºæ™¯ï¼šé›†åˆç±»ã€æ ‡å¿—ä½ç®¡ç†
```

**ğŸ”¹ å¢å¼ºèµ‹å€¼è¿ç®—ç¬¦**
```
å°±åœ°è¿ç®—ï¼š+= -= *= /=ç­‰
å…³é”®ç‚¹ï¼šä¿®æ”¹åŸå¯¹è±¡ï¼Œæé«˜æ€§èƒ½
å®ç”¨åœºæ™¯ï¼šå¯å˜å¯¹è±¡çš„æ‰¹é‡æ“ä½œ
```

### 8.3 æœ€ä½³å®è·µè¦ç‚¹


**ğŸ”¹ è®¾è®¡åŸåˆ™**
- **ç›´è§‚æ€§**ï¼šè¿ç®—ç¬¦çš„è¡Œä¸ºåº”è¯¥ç¬¦åˆç›´è§‰
- **ä¸€è‡´æ€§**ï¼šç›¸å…³è¿ç®—ç¬¦åº”è¯¥ä¸€èµ·å®ç°
- **å¯¹ç§°æ€§**ï¼šè€ƒè™‘è¿ç®—çš„å¯äº¤æ¢æ€§

**ğŸ”¹ å®ç°æŠ€å·§**
- **ç±»å‹æ£€æŸ¥**ï¼šä½¿ç”¨isinstance()æ£€æŸ¥ç±»å‹
- **é”™è¯¯å¤„ç†**ï¼šè¿”å›NotImplementedè€ŒéæŠ›å‡ºå¼‚å¸¸
- **æ€§èƒ½ä¼˜åŒ–**ï¼šè€ƒè™‘å°±åœ°è¿ç®—çš„æ•ˆç‡ä¼˜åŠ¿

**ğŸ”¹ å¸¸è§é™·é˜±**
- å¿˜è®°å®ç°åå‘æ–¹æ³•ï¼ˆ__radd__ç­‰ï¼‰
- å°±åœ°è¿ç®—å¿˜è®°è¿”å›self
- è¿ç®—ç¬¦è¯­ä¹‰ä¸å¸¸è¯†ä¸ç¬¦

### 8.4 å®é™…åº”ç”¨ä»·å€¼


**æ•°å­¦è®¡ç®—ç±»**ï¼š
- å‘é‡ã€çŸ©é˜µã€å¤æ•°è¿ç®—
- ç»Ÿè®¡æ•°æ®å¤„ç†
- ç§‘å­¦è®¡ç®—åº“

**æ•°æ®ç»“æ„ç±»**ï¼š
- è‡ªå®šä¹‰é›†åˆæ“ä½œ
- æ ‘å½¢ç»“æ„åˆå¹¶
- å›¾ç®—æ³•å®ç°

**ä¸šåŠ¡é€»è¾‘ç±»**ï¼š
- é‡‘é’±è®¡ç®—
- æ—¶é—´æ—¥æœŸè¿ç®—
- æ¸¸æˆå¼€å‘ä¸­çš„åæ ‡è®¡ç®—

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- è¿ç®—ç¬¦é‡è½½å¾ˆç¥å¥‡ï¼Œç‰¹æ®Šæ–¹æ³•æ˜¯å…³é”®
- åŠ å‡ä¹˜é™¤è¦å®ç°ï¼Œæ¯”è¾ƒè¿ç®—åˆ«å¿˜è®°  
- ç±»å‹æ£€æŸ¥è¦ä»”ç»†ï¼ŒNotImplementedæ˜¯å¥½ä¹ æƒ¯
- å¯¹ç§°æ€§è¦è€ƒè™‘ï¼Œå°±åœ°è¿ç®—æ•ˆç‡é«˜