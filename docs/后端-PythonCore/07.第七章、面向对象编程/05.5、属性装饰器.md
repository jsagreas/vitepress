---
title: 5ã€å±æ€§è£…é¥°å™¨
---
## ğŸ“š ç›®å½•

1. [å±æ€§è£…é¥°å™¨æ¦‚å¿µç†è§£](#1-å±æ€§è£…é¥°å™¨æ¦‚å¿µç†è§£)
2. [propertyè£…é¥°å™¨è¯¦è§£](#2-propertyè£…é¥°å™¨è¯¦è§£)
3. [getteræ–¹æ³•è®¾è®¡](#3-getteræ–¹æ³•è®¾è®¡)
4. [setteræ–¹æ³•å®ç°](#4-setteræ–¹æ³•å®ç°)
5. [deleteræ–¹æ³•ä½¿ç”¨](#5-deleteræ–¹æ³•ä½¿ç”¨)
6. [åªè¯»å±æ€§å®ç°](#6-åªè¯»å±æ€§å®ç°)
7. [å±æ€§éªŒè¯æœºåˆ¶](#7-å±æ€§éªŒè¯æœºåˆ¶)
8. [å±æ€§è®¡ç®—ç¼“å­˜](#8-å±æ€§è®¡ç®—ç¼“å­˜)
9. [å±æ€§è£…é¥°å™¨æœ€ä½³å®è·µ](#9-å±æ€§è£…é¥°å™¨æœ€ä½³å®è·µ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å±æ€§è£…é¥°å™¨æ¦‚å¿µç†è§£


### 1.1 ä»€ä¹ˆæ˜¯å±æ€§è£…é¥°å™¨


**ğŸ”¸ ç®€å•ç†è§£**
å±æ€§è£…é¥°å™¨å°±åƒç»™æ™®é€šæ–¹æ³•**ç©¿ä¸Šäº†ä¸€ä»¶ç‰¹æ®Šçš„å¤–è¡£**ï¼Œè®©å®ƒä»¬çœ‹èµ·æ¥åƒæ™®é€šçš„å±æ€§ä¸€æ ·ä½¿ç”¨ã€‚

```
æƒ³è±¡ä¸€ä¸‹ï¼š
æ™®é€šæ–¹æ³•è°ƒç”¨ï¼šperson.get_age()     # éœ€è¦åŠ æ‹¬å·
å±æ€§è£…é¥°å™¨åï¼šperson.age          # ç›´æ¥è®¿é—®ï¼Œåƒå˜é‡ä¸€æ ·
```

**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µ**
- **propertyè£…é¥°å™¨**ï¼šæŠŠæ–¹æ³•ä¼ªè£…æˆå±æ€§çš„é­”æ³•å·¥å…·
- **å°è£…æ•°æ®**ï¼šéšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œæä¾›ç®€æ´çš„è®¿é—®æ–¹å¼
- **æ§åˆ¶è®¿é—®**ï¼šå¯ä»¥åœ¨è·å–æˆ–è®¾ç½®å±æ€§æ—¶æ·»åŠ é¢å¤–çš„é€»è¾‘

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å±æ€§è£…é¥°å™¨


**ğŸ¤” æ—¥å¸¸é—®é¢˜åœºæ™¯**

```
å‡è®¾ä½ æœ‰ä¸€ä¸ªæ¸©åº¦ç±»ï¼š
- éœ€è¦å­˜å‚¨æ‘„æ°åº¦
- ä½†ç”¨æˆ·å¯èƒ½è¾“å…¥åæ°åº¦
- è¿˜è¦éªŒè¯æ¸©åº¦æ˜¯å¦åˆç†
- è®¡ç®—æ—¶å¯èƒ½éœ€è¦è½¬æ¢

å¦‚æœç”¨æ™®é€šæ–¹æ³•ï¼šget_temp()ã€set_temp()
å¦‚æœç”¨å±æ€§è£…é¥°å™¨ï¼šç›´æ¥ temp = 25
```

**ğŸ’¡ å±æ€§è£…é¥°å™¨çš„ä¼˜åŠ¿**

| æ–¹é¢ | **æ™®é€šæ–¹æ³•** | **å±æ€§è£…é¥°å™¨** |
|------|-------------|---------------|
| ğŸ¯ **ä½¿ç”¨æ–¹å¼** | `obj.get_value()` | `obj.value` |
| ğŸ”’ **æ•°æ®ä¿æŠ¤** | æ‰‹åŠ¨è°ƒç”¨æ–¹æ³• | è‡ªåŠ¨éªŒè¯æ§åˆ¶ |
| ğŸ“ **ä»£ç ç®€æ´** | å†—é•¿çš„æ–¹æ³•è°ƒç”¨ | ç®€æ´çš„å±æ€§è®¿é—® |
| ğŸ”§ **åæœŸä¿®æ”¹** | ä¿®æ”¹æ‰€æœ‰è°ƒç”¨å¤„ | å†…éƒ¨ä¿®æ”¹å³å¯ |

### 1.3 å±æ€§è£…é¥°å™¨çš„å·¥ä½œåŸç†


**ğŸ” åº•å±‚æœºåˆ¶å›¾è§£**

```
æ™®é€šå±æ€§è®¿é—®ï¼š
obj.name â†’ ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„å€¼

å±æ€§è£…é¥°å™¨è®¿é—®ï¼š
obj.name â†’ propertyçš„getteræ–¹æ³• â†’ æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ â†’ è¿”å›å€¼

è®¾ç½®å±æ€§ï¼š
obj.name = "new" â†’ propertyçš„setteræ–¹æ³• â†’ éªŒè¯é€»è¾‘ â†’ å­˜å‚¨å€¼
```

---

## 2. ğŸ—ï¸ propertyè£…é¥°å™¨è¯¦è§£


### 2.1 propertyè£…é¥°å™¨çš„åŸºæœ¬è¯­æ³•


**ğŸ”¸ æ ¸å¿ƒè¯­æ³•ç»“æ„**

```python
class Person:
    def __init__(self, name):
        self._name = name  # ç§æœ‰å±æ€§ï¼Œç”¨ä¸‹åˆ’çº¿è¡¨ç¤ºå†…éƒ¨ä½¿ç”¨
    
    @property  # è¿™å°±æ˜¯ç¥å¥‡çš„è£…é¥°å™¨
    def name(self):
        """è·å–å§“åçš„æ–¹æ³•ï¼Œä½†ç”¨èµ·æ¥åƒå±æ€§"""
        return self._name
```

**ğŸ“‹ è¯­æ³•è¦ç‚¹è¯´æ˜**
- `@property`ï¼šå‘Šè¯‰Pythonè¿™ä¸ªæ–¹æ³•è¦å½“ä½œå±æ€§ä½¿ç”¨
- `self._name`ï¼šå†…éƒ¨å­˜å‚¨ï¼Œä¸‹åˆ’çº¿è¡¨ç¤º"è¿™æ˜¯å†…éƒ¨å˜é‡ï¼Œå¤–éƒ¨åˆ«ç›´æ¥ç”¨"
- `return self._name`ï¼šè¿”å›å®é™…å­˜å‚¨çš„å€¼

### 2.2 propertyçš„å®Œæ•´ç”¨æ³•


**ğŸ”§ ä¸‰ç§è£…é¥°å™¨æ­é…ä½¿ç”¨**

```python
class Temperature:
    def __init__(self, celsius=0):
        self._celsius = celsius
    
    @property
    def celsius(self):
        """è·å–æ‘„æ°åº¦ - getteræ–¹æ³•"""
        print("æ­£åœ¨è·å–æ¸©åº¦...")  # å¯ä»¥æ·»åŠ æ—¥å¿—
        return self._celsius
    
    @celsius.setter
    def celsius(self, value):
        """è®¾ç½®æ‘„æ°åº¦ - setteræ–¹æ³•"""
        if value < -273.15:
            raise ValueError("æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦ï¼")
        print(f"æ­£åœ¨è®¾ç½®æ¸©åº¦ä¸º {value}Â°C...")
        self._celsius = value
    
    @celsius.deleter
    def celsius(self):
        """åˆ é™¤æ¸©åº¦ - deleteræ–¹æ³•"""
        print("æ­£åœ¨é‡ç½®æ¸©åº¦...")
        self._celsius = 0
```

**ğŸ“ ä½¿ç”¨ç¤ºä¾‹**

```python
# åˆ›å»ºæ¸©åº¦å¯¹è±¡
temp = Temperature(25)

# è·å–æ¸©åº¦ï¼ˆè°ƒç”¨getterï¼‰
print(temp.celsius)  # è¾“å‡ºï¼šæ­£åœ¨è·å–æ¸©åº¦... 25

# è®¾ç½®æ¸©åº¦ï¼ˆè°ƒç”¨setterï¼‰
temp.celsius = 30    # è¾“å‡ºï¼šæ­£åœ¨è®¾ç½®æ¸©åº¦ä¸º 30Â°C...

# åˆ é™¤æ¸©åº¦ï¼ˆè°ƒç”¨deleterï¼‰
del temp.celsius     # è¾“å‡ºï¼šæ­£åœ¨é‡ç½®æ¸©åº¦...
```

### 2.3 propertyè£…é¥°å™¨çš„å†…éƒ¨å·¥ä½œæµç¨‹


**ğŸ”„ æ‰§è¡Œæµç¨‹å›¾**

```
ç”¨æˆ·æ“ä½œ          Pythonå†…éƒ¨å¤„ç†           å®é™…æ‰§è¡Œ
    |                   |                   |
obj.temp         â†’  æŸ¥æ‰¾propertyå¯¹è±¡   â†’   è°ƒç”¨getteræ–¹æ³•
    |                   |                   |
obj.temp = 25    â†’  æŸ¥æ‰¾setterè£…é¥°å™¨   â†’   è°ƒç”¨setteræ–¹æ³•
    |                   |                   |
del obj.temp     â†’  æŸ¥æ‰¾deleterè£…é¥°å™¨  â†’   è°ƒç”¨deleteræ–¹æ³•
```

---

## 3. ğŸ“– getteræ–¹æ³•è®¾è®¡


### 3.1 getteræ–¹æ³•çš„ä½œç”¨å’Œè®¾è®¡åŸåˆ™


**ğŸ¯ getteræ–¹æ³•çš„æ ¸å¿ƒä½œç”¨**
- **æ•°æ®è·å–**ï¼šè¿”å›å¯¹è±¡çš„å±æ€§å€¼
- **æ•°æ®è½¬æ¢**ï¼šåœ¨è¿”å›å‰å¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–
- **è®¿é—®æ§åˆ¶**ï¼šæ§åˆ¶è°å¯ä»¥è®¿é—®è¿™ä¸ªå±æ€§
- **è®¡ç®—å±æ€§**ï¼šåŸºäºå…¶ä»–å±æ€§è®¡ç®—å‡ºæ–°å€¼

### 3.2 ç®€å•getteræ–¹æ³•å®ç°


```python
class Student:
    def __init__(self, first_name, last_name):
        self._first_name = first_name
        self._last_name = last_name
        self._birth_year = None
    
    @property
    def first_name(self):
        """è·å–åå­—"""
        return self._first_name
    
    @property
    def last_name(self):
        """è·å–å§“æ°"""
        return self._last_name
    
    @property
    def full_name(self):
        """è®¡ç®—å…¨å - è¿™æ˜¯è®¡ç®—å±æ€§"""
        return f"{self._first_name} {self._last_name}"
```

### 3.3 å¤æ‚getteræ–¹æ³•è®¾è®¡


```python
from datetime import datetime

class Person:
    def __init__(self, name, birth_year):
        self._name = name
        self._birth_year = birth_year
        self._access_count = 0  # ç»Ÿè®¡è®¿é—®æ¬¡æ•°
    
    @property
    def age(self):
        """è®¡ç®—å¹´é¾„ - åŠ¨æ€è®¡ç®—å±æ€§"""
        self._access_count += 1  # è®°å½•è®¿é—®æ¬¡æ•°
        current_year = datetime.now().year
        calculated_age = current_year - self._birth_year
        print(f"å¹´é¾„è¢«è®¿é—®äº† {self._access_count} æ¬¡")
        return calculated_age
    
    @property
    def age_group(self):
        """æ ¹æ®å¹´é¾„è®¡ç®—å¹´é¾„æ®µ"""
        age = self.age  # è¿™é‡Œä¼šè°ƒç”¨ä¸Šé¢çš„ageå±æ€§
        if age < 18:
            return "æœªæˆå¹´"
        elif age < 60:
            return "æˆå¹´äºº"
        else:
            return "è€å¹´äºº"
```

**ğŸ“Š ä½¿ç”¨æ•ˆæœå±•ç¤º**

```python
person = Person("å¼ ä¸‰", 1990)

print(person.age)        # è¾“å‡ºï¼šå¹´é¾„è¢«è®¿é—®äº† 1 æ¬¡ 34
print(person.age_group)  # è¾“å‡ºï¼šå¹´é¾„è¢«è®¿é—®äº† 2 æ¬¡ æˆå¹´äºº
print(person.age)        # è¾“å‡ºï¼šå¹´é¾„è¢«è®¿é—®äº† 3 æ¬¡ 34
```

### 3.4 getteræ–¹æ³•çš„æœ€ä½³å®è·µ


**âœ… å¥½çš„getterè®¾è®¡**
```python
class BankAccount:
    def __init__(self, balance):
        self._balance = balance
    
    @property
    def balance(self):
        """è·å–è´¦æˆ·ä½™é¢ - ç®€å•ç›´æ¥"""
        return round(self._balance, 2)  # ä¿ç•™ä¸¤ä½å°æ•°
    
    @property
    def balance_formatted(self):
        """è·å–æ ¼å¼åŒ–çš„ä½™é¢æ˜¾ç¤º"""
        return f"Â¥{self.balance:,.2f}"  # æ ¼å¼åŒ–æ˜¾ç¤º
```

**âŒ è¦é¿å…çš„getterè®¾è®¡**
```python
class BadExample:
    @property
    def value(self):
        # âŒ ä¸è¦åœ¨getterä¸­åšè€—æ—¶æ“ä½œ
        time.sleep(1)  # è¿™ä¼šè®©æ¯æ¬¡è®¿é—®éƒ½å¾ˆæ…¢
        return self._value
    
    @property
    def random_value(self):
        # âŒ ä¸è¦åœ¨getterä¸­è¿”å›éšæœºå€¼
        return random.randint(1, 100)  # æ¯æ¬¡è®¿é—®ç»“æœéƒ½ä¸åŒ
```

---

## 4. âœï¸ setteræ–¹æ³•å®ç°


### 4.1 setteræ–¹æ³•çš„æ ¸å¿ƒä½œç”¨


**ğŸ¯ setteræ–¹æ³•çš„ä¸»è¦åŠŸèƒ½**
- **æ•°æ®éªŒè¯**ï¼šæ£€æŸ¥è¾“å…¥çš„æ•°æ®æ˜¯å¦åˆæ³•
- **æ•°æ®è½¬æ¢**ï¼šå°†è¾“å…¥è½¬æ¢ä¸ºåˆé€‚çš„æ ¼å¼
- **è§¦å‘äº‹ä»¶**ï¼šåœ¨æ•°æ®æ”¹å˜æ—¶æ‰§è¡Œé¢å¤–æ“ä½œ
- **ä¿æŠ¤æ•°æ®**ï¼šé˜²æ­¢éæ³•å€¼ç ´åå¯¹è±¡çŠ¶æ€

### 4.2 åŸºç¡€setteræ–¹æ³•å®ç°


```python
class Rectangle:
    def __init__(self, width, height):
        self._width = width
        self._height = height
    
    @property
    def width(self):
        return self._width
    
    @width.setter
    def width(self, value):
        """è®¾ç½®å®½åº¦ - å¸¦éªŒè¯"""
        if not isinstance(value, (int, float)):
            raise TypeError("å®½åº¦å¿…é¡»æ˜¯æ•°å­—")
        if value <= 0:
            raise ValueError("å®½åº¦å¿…é¡»å¤§äº0")
        
        print(f"å®½åº¦ä» {self._width} æ”¹ä¸º {value}")
        self._width = value
    
    @property
    def area(self):
        """é¢ç§¯æ˜¯è®¡ç®—å±æ€§ï¼Œæ²¡æœ‰setter"""
        return self._width * self._height
```

### 4.3 å¤æ‚éªŒè¯çš„setteræ–¹æ³•


```python
import re

class User:
    def __init__(self, username, email):
        self.username = username  # è¿™é‡Œä¼šè°ƒç”¨setter
        self.email = email        # è¿™é‡Œä¹Ÿä¼šè°ƒç”¨setter
    
    @property
    def username(self):
        return self._username
    
    @username.setter
    def username(self, value):
        """ç”¨æˆ·åsetter - å¤æ‚éªŒè¯"""
        # ç±»å‹æ£€æŸ¥
        if not isinstance(value, str):
            raise TypeError("ç”¨æˆ·åå¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        # é•¿åº¦æ£€æŸ¥
        if len(value) < 3:
            raise ValueError("ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦")
        if len(value) > 20:
            raise ValueError("ç”¨æˆ·åé•¿åº¦ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦")
        
        # æ ¼å¼æ£€æŸ¥
        if not re.match("^[a-zA-Z0-9_]+$", value):
            raise ValueError("ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿")
        
        self._username = value
    
    @property
    def email(self):
        return self._email
    
    @email.setter
    def email(self, value):
        """é‚®ç®±setter - æ­£åˆ™éªŒè¯"""
        email_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        if not re.match(email_pattern, value):
            raise ValueError("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
        
        self._email = value
```

### 4.4 setteræ–¹æ³•çš„æ•°æ®è½¬æ¢åŠŸèƒ½


```python
class Temperature:
    def __init__(self, celsius=0):
        self.celsius = celsius
    
    @property
    def celsius(self):
        return self._celsius
    
    @celsius.setter
    def celsius(self, value):
        """æ‘„æ°åº¦setter - è‡ªåŠ¨ç±»å‹è½¬æ¢"""
        # å°è¯•è½¬æ¢ä¸ºæ•°å­—
        try:
            value = float(value)
        except (ValueError, TypeError):
            raise ValueError("æ¸©åº¦å¿…é¡»æ˜¯æ•°å­—")
        
        # èŒƒå›´éªŒè¯
        if value < -273.15:
            raise ValueError("æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦(-273.15Â°C)")
        
        self._celsius = round(value, 2)  # ä¿ç•™ä¸¤ä½å°æ•°
    
    @property
    def fahrenheit(self):
        """åæ°åº¦getter"""
        return self._celsius * 9/5 + 32
    
    @fahrenheit.setter
    def fahrenheit(self, value):
        """åæ°åº¦setter - è‡ªåŠ¨è½¬æ¢ä¸ºæ‘„æ°åº¦å­˜å‚¨"""
        try:
            value = float(value)
        except (ValueError, TypeError):
            raise ValueError("æ¸©åº¦å¿…é¡»æ˜¯æ•°å­—")
        
        # è½¬æ¢ä¸ºæ‘„æ°åº¦
        celsius = (value - 32) * 5/9
        self.celsius = celsius  # è°ƒç”¨æ‘„æ°åº¦çš„setterè¿›è¡ŒéªŒè¯
```

**ğŸ“ ä½¿ç”¨ç¤ºä¾‹**

```python
temp = Temperature()

# è®¾ç½®æ‘„æ°åº¦
temp.celsius = "25.5"    # å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å­—
print(temp.celsius)      # è¾“å‡ºï¼š25.5

# è®¾ç½®åæ°åº¦ï¼ˆè‡ªåŠ¨è½¬æ¢ä¸ºæ‘„æ°åº¦ï¼‰
temp.fahrenheit = 86     # 30æ‘„æ°åº¦
print(temp.celsius)      # è¾“å‡ºï¼š30.0
print(temp.fahrenheit)   # è¾“å‡ºï¼š86.0
```

---

## 5. ğŸ—‘ï¸ deleteræ–¹æ³•ä½¿ç”¨


### 5.1 deleteræ–¹æ³•çš„ä½œç”¨ç†è§£


**ğŸ¤” ä»€ä¹ˆæ—¶å€™éœ€è¦deleteræ–¹æ³•ï¼Ÿ**
- **é‡ç½®å±æ€§**ï¼šå°†å±æ€§æ¢å¤åˆ°é»˜è®¤çŠ¶æ€
- **æ¸…ç†èµ„æº**ï¼šé‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æº
- **è§¦å‘æ¸…ç†**ï¼šåœ¨å±æ€§è¢«åˆ é™¤æ—¶æ‰§è¡Œç‰¹å®šæ“ä½œ
- **å®‰å…¨æ§åˆ¶**ï¼šæ§åˆ¶æŸäº›å±æ€§æ˜¯å¦å…è®¸åˆ é™¤

### 5.2 åŸºç¡€deleteræ–¹æ³•å®ç°


```python
class StudentRecord:
    def __init__(self, name, score):
        self._name = name
        self._score = score
        self._score_history = []  # å†å²æˆç»©è®°å½•
    
    @property
    def score(self):
        return self._score
    
    @score.setter
    def score(self, value):
        if not 0 <= value <= 100:
            raise ValueError("æˆç»©å¿…é¡»åœ¨0-100ä¹‹é—´")
        
        # ä¿å­˜å†å²è®°å½•
        if hasattr(self, '_score'):
            self._score_history.append(self._score)
        
        self._score = value
    
    @score.deleter
    def score(self):
        """åˆ é™¤æˆç»© - é‡ç½®ä¸ºé»˜è®¤å€¼"""
        print(f"æ­£åœ¨æ¸…é™¤ {self._name} çš„æˆç»©è®°å½•...")
        self._score_history.append(self._score)  # ä¿å­˜åˆ°å†å²
        self._score = 0  # é‡ç½®ä¸º0
        print("æˆç»©å·²é‡ç½®ä¸º0")
```

### 5.3 å¤æ‚deleteræ–¹æ³•å®ç°


```python
import os
import tempfile

class FileManager:
    def __init__(self, filename):
        self._filename = filename
        self._temp_file = None
        self._file_content = ""
    
    @property
    def temp_file(self):
        """ä¸´æ—¶æ–‡ä»¶å±æ€§"""
        if self._temp_file is None:
            # åˆ›å»ºä¸´æ—¶æ–‡ä»¶
            self._temp_file = tempfile.NamedTemporaryFile(mode='w+', delete=False)
            print(f"åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼š{self._temp_file.name}")
        return self._temp_file
    
    @temp_file.deleter
    def temp_file(self):
        """åˆ é™¤ä¸´æ—¶æ–‡ä»¶ - æ¸…ç†èµ„æº"""
        if self._temp_file is not None:
            try:
                self._temp_file.close()
                os.unlink(self._temp_file.name)  # åˆ é™¤æ–‡ä»¶
                print(f"ä¸´æ—¶æ–‡ä»¶å·²åˆ é™¤ï¼š{self._temp_file.name}")
            except Exception as e:
                print(f"åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¤±è´¥ï¼š{e}")
            finally:
                self._temp_file = None
    
    def cleanup(self):
        """æ‰‹åŠ¨æ¸…ç†èµ„æº"""
        del self.temp_file
```

### 5.4 deleteræ–¹æ³•çš„å®‰å…¨æ§åˆ¶


```python
class SecureData:
    def __init__(self, data):
        self._data = data
        self._is_locked = False
        self._deletion_count = 0
    
    @property
    def data(self):
        return self._data
    
    @data.setter
    def data(self, value):
        if self._is_locked:
            raise RuntimeError("æ•°æ®å·²é”å®šï¼Œæ— æ³•ä¿®æ”¹")
        self._data = value
    
    @data.deleter
    def data(self):
        """å®‰å…¨åˆ é™¤æ•°æ®"""
        if self._is_locked:
            raise RuntimeError("æ•°æ®å·²é”å®šï¼Œæ— æ³•åˆ é™¤")
        
        self._deletion_count += 1
        
        # é™åˆ¶åˆ é™¤æ¬¡æ•°
        if self._deletion_count > 3:
            raise RuntimeError("åˆ é™¤æ¬¡æ•°è¿‡å¤šï¼Œæ“ä½œè¢«æ‹’ç»")
        
        print(f"ç¬¬ {self._deletion_count} æ¬¡åˆ é™¤æ“ä½œ")
        self._data = None
    
    def lock(self):
        """é”å®šæ•°æ®"""
        self._is_locked = True
        print("æ•°æ®å·²é”å®š")
```

**ğŸ“ ä½¿ç”¨ç¤ºä¾‹**

```python
# æ–‡ä»¶ç®¡ç†ç¤ºä¾‹
fm = FileManager("test.txt")
temp = fm.temp_file  # åˆ›å»ºä¸´æ—¶æ–‡ä»¶
del fm.temp_file     # åˆ é™¤ä¸´æ—¶æ–‡ä»¶

# å®‰å…¨æ•°æ®ç¤ºä¾‹
secure = SecureData("æœºå¯†ä¿¡æ¯")
del secure.data      # ç¬¬ 1 æ¬¡åˆ é™¤æ“ä½œ
secure.data = "æ–°æ•°æ®"
del secure.data      # ç¬¬ 2 æ¬¡åˆ é™¤æ“ä½œ
```

---

## 6. ğŸ”’ åªè¯»å±æ€§å®ç°


### 6.1 åªè¯»å±æ€§çš„æ¦‚å¿µå’Œç”¨é€”


**ğŸ” ä»€ä¹ˆæ˜¯åªè¯»å±æ€§ï¼Ÿ**
åªè¯»å±æ€§å°±åƒ**å•å‘ç»ç’ƒ**ä¸€æ ·ï¼Œä½ åªèƒ½çœ‹åˆ°é‡Œé¢ï¼ˆè¯»å–ï¼‰ï¼Œä½†ä¸èƒ½ä»å¤–é¢å½±å“é‡Œé¢ï¼ˆä¿®æ”¹ï¼‰ã€‚

**ğŸ¯ åªè¯»å±æ€§çš„åº”ç”¨åœºæ™¯**
- **é…ç½®ä¿¡æ¯**ï¼šç¨‹åºå¯åŠ¨åä¸åº”è¯¥æ”¹å˜çš„è®¾ç½®
- **è®¡ç®—ç»“æœ**ï¼šåŸºäºå…¶ä»–å±æ€§è®¡ç®—çš„å€¼
- **ç³»ç»Ÿä¿¡æ¯**ï¼šç‰ˆæœ¬å·ã€åˆ›å»ºæ—¶é—´ç­‰
- **å”¯ä¸€æ ‡è¯†**ï¼šIDã€åºåˆ—å·ç­‰

### 6.2 æœ€ç®€å•çš„åªè¯»å±æ€§å®ç°


```python
from datetime import datetime

class Product:
    def __init__(self, name, price):
        self._name = name
        self._price = price
        self._created_time = datetime.now()  # åˆ›å»ºæ—¶é—´
        self._id = id(self)  # ä½¿ç”¨å¯¹è±¡å†…å­˜åœ°å€ä½œä¸ºID
    
    @property
    def name(self):
        """äº§å“åç§° - åªè¯»"""
        return self._name
    
    @property
    def created_time(self):
        """åˆ›å»ºæ—¶é—´ - åªè¯»"""
        return self._created_time
    
    @property
    def product_id(self):
        """äº§å“ID - åªè¯»"""
        return self._id
    
    # æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰å¯¹åº”çš„setteræ–¹æ³•ï¼Œæ‰€ä»¥æ˜¯åªè¯»çš„
```

### 6.3 å¸¦è®¡ç®—çš„åªè¯»å±æ€§


```python
class ShoppingCart:
    def __init__(self):
        self._items = []  # å•†å“åˆ—è¡¨
    
    def add_item(self, name, price, quantity):
        """æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦"""
        self._items.append({
            'name': name,
            'price': price,
            'quantity': quantity
        })
    
    @property
    def total_items(self):
        """æ€»å•†å“æ•°é‡ - åªè¯»è®¡ç®—å±æ€§"""
        return sum(item['quantity'] for item in self._items)
    
    @property
    def total_price(self):
        """æ€»ä»·æ ¼ - åªè¯»è®¡ç®—å±æ€§"""
        total = 0
        for item in self._items:
            total += item['price'] * item['quantity']
        return round(total, 2)
    
    @property
    def items_summary(self):
        """å•†å“æ‘˜è¦ - åªè¯»å±æ€§"""
        if not self._items:
            return "è´­ç‰©è½¦ä¸ºç©º"
        
        summary = f"å…± {self.total_items} ä»¶å•†å“ï¼Œæ€»ä»· Â¥{self.total_price}"
        return summary
```

### 6.4 ä¿æŠ¤åªè¯»å±æ€§çš„é«˜çº§æŠ€å·§


```python
class ReadOnlyConfig:
    def __init__(self, **config):
        # ä½¿ç”¨__dict__ç›´æ¥è®¾ç½®ï¼Œé¿å…è°ƒç”¨setter
        for key, value in config.items():
            object.__setattr__(self, f'_config_{key}', value)
        
        # æ ‡è®°é…ç½®å·²å®Œæˆ
        object.__setattr__(self, '_initialized', True)
    
    def __setattr__(self, name, value):
        """é‡å†™è®¾ç½®å±æ€§çš„æ–¹æ³•ï¼Œé˜²æ­¢ä¿®æ”¹"""
        if hasattr(self, '_initialized'):
            raise AttributeError("é…ç½®å¯¹è±¡æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹å±æ€§")
        super().__setattr__(name, value)
    
    @property
    def database_url(self):
        """æ•°æ®åº“è¿æ¥ - åªè¯»"""
        return getattr(self, '_config_database_url', None)
    
    @property
    def api_key(self):
        """APIå¯†é’¥ - åªè¯»"""
        return getattr(self, '_config_api_key', None)
    
    @property
    def debug_mode(self):
        """è°ƒè¯•æ¨¡å¼ - åªè¯»"""
        return getattr(self, '_config_debug_mode', False)
```

**ğŸ“ ä½¿ç”¨ç¤ºä¾‹å’Œæ•ˆæœ**

```python
# æ™®é€šåªè¯»å±æ€§
cart = ShoppingCart()
cart.add_item("è‹¹æœ", 5.0, 3)
cart.add_item("é¦™è•‰", 3.0, 2)

print(cart.total_items)    # è¾“å‡ºï¼š5
print(cart.total_price)    # è¾“å‡ºï¼š21.0
print(cart.items_summary)  # è¾“å‡ºï¼šå…± 5 ä»¶å•†å“ï¼Œæ€»ä»· Â¥21.0

# å°è¯•ä¿®æ”¹åªè¯»å±æ€§ï¼ˆä¼šæŠ¥é”™ï¼‰
try:
    cart.total_price = 100  # AttributeError: can't set attribute
except AttributeError as e:
    print(f"é”™è¯¯ï¼š{e}")

# é«˜çº§åªè¯»é…ç½®
config = ReadOnlyConfig(
    database_url="localhost:5432",
    api_key="secret123",
    debug_mode=True
)

print(config.database_url)  # è¾“å‡ºï¼šlocalhost:5432

# å°è¯•ä¿®æ”¹é…ç½®ï¼ˆä¼šæŠ¥é”™ï¼‰
try:
    config.database_url = "new_url"  # AttributeError: é…ç½®å¯¹è±¡æ˜¯åªè¯»çš„
except AttributeError as e:
    print(f"é”™è¯¯ï¼š{e}")
```

---

## 7. âœ… å±æ€§éªŒè¯æœºåˆ¶


### 7.1 å±æ€§éªŒè¯çš„é‡è¦æ€§


**ğŸ›¡ï¸ ä¸ºä»€ä¹ˆéœ€è¦å±æ€§éªŒè¯ï¼Ÿ**
- **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿å¯¹è±¡å§‹ç»ˆå¤„äºæœ‰æ•ˆçŠ¶æ€
- **é”™è¯¯é¢„é˜²**ï¼šåœ¨é”™è¯¯æ•°æ®è¿›å…¥ç³»ç»Ÿå‰å°±æ‹¦æˆª
- **ç”¨æˆ·ä½“éªŒ**ï¼šæä¾›æ¸…æ™°çš„é”™è¯¯æç¤º
- **ç³»ç»Ÿç¨³å®š**ï¼šé˜²æ­¢éæ³•æ•°æ®å¯¼è‡´ç¨‹åºå´©æºƒ

### 7.2 åŸºç¡€æ•°æ®ç±»å‹éªŒè¯


```python
class Person:
    def __init__(self, name, age, height):
        self.name = name      # é€šè¿‡setteréªŒè¯
        self.age = age        # é€šè¿‡setteréªŒè¯
        self.height = height  # é€šè¿‡setteréªŒè¯
    
    @property
    def name(self):
        return self._name
    
    @name.setter
    def name(self, value):
        """å§“åéªŒè¯"""
        # ç±»å‹éªŒè¯
        if not isinstance(value, str):
            raise TypeError(f"å§“åå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œä¸èƒ½æ˜¯ {type(value).__name__}")
        
        # ç©ºå€¼éªŒè¯
        if not value or not value.strip():
            raise ValueError("å§“åä¸èƒ½ä¸ºç©º")
        
        # é•¿åº¦éªŒè¯
        if len(value) > 50:
            raise ValueError("å§“åé•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦")
        
        self._name = value.strip()  # å»é™¤é¦–å°¾ç©ºæ ¼
    
    @property
    def age(self):
        return self._age
    
    @age.setter
    def age(self, value):
        """å¹´é¾„éªŒè¯"""
        # ç±»å‹éªŒè¯ï¼ˆå…è®¸æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼‰
        if not isinstance(value, (int, float)):
            raise TypeError("å¹´é¾„å¿…é¡»æ˜¯æ•°å­—")
        
        # è½¬æ¢ä¸ºæ•´æ•°
        value = int(value)
        
        # èŒƒå›´éªŒè¯
        if value < 0:
            raise ValueError("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
        if value > 150:
            raise ValueError("å¹´é¾„ä¸èƒ½è¶…è¿‡150å²")
        
        self._age = value
    
    @property
    def height(self):
        return self._height
    
    @height.setter
    def height(self, value):
        """èº«é«˜éªŒè¯ï¼ˆå•ä½ï¼šå˜ç±³ï¼‰"""
        try:
            value = float(value)
        except (ValueError, TypeError):
            raise TypeError("èº«é«˜å¿…é¡»æ˜¯æ•°å­—")
        
        if value <= 0:
            raise ValueError("èº«é«˜å¿…é¡»å¤§äº0")
        if value > 300:
            raise ValueError("èº«é«˜ä¸èƒ½è¶…è¿‡300å˜ç±³")
        
        self._height = round(value, 1)  # ä¿ç•™ä¸€ä½å°æ•°
```

### 7.3 å¤æ‚ä¸šåŠ¡é€»è¾‘éªŒè¯


```python
import re
from datetime import datetime, date

class Employee:
    def __init__(self, employee_id, email, phone, salary, hire_date):
        self.employee_id = employee_id
        self.email = email
        self.phone = phone
        self.salary = salary
        self.hire_date = hire_date
    
    @property
    def employee_id(self):
        return self._employee_id
    
    @employee_id.setter
    def employee_id(self, value):
        """å‘˜å·¥IDéªŒè¯ - æ ¼å¼ï¼šEMP2024001"""
        if not isinstance(value, str):
            raise TypeError("å‘˜å·¥IDå¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        # æ­£åˆ™è¡¨è¾¾å¼éªŒè¯æ ¼å¼
        pattern = r'^EMP\d{7}$'
        if not re.match(pattern, value):
            raise ValueError("å‘˜å·¥IDæ ¼å¼é”™è¯¯ï¼Œåº”ä¸ºï¼šEMP + 7ä½æ•°å­—")
        
        self._employee_id = value
    
    @property
    def email(self):
        return self._email
    
    @email.setter
    def email(self, value):
        """é‚®ç®±éªŒè¯"""
        if not isinstance(value, str):
            raise TypeError("é‚®ç®±å¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        # é‚®ç®±æ ¼å¼éªŒè¯
        email_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        if not re.match(email_pattern, value):
            raise ValueError("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
        
        # å…¬å¸é‚®ç®±éªŒè¯ï¼ˆå‡è®¾åªå…è®¸å…¬å¸é‚®ç®±ï¼‰
        if not value.endswith('@company.com'):
            raise ValueError("åªå…è®¸ä½¿ç”¨å…¬å¸é‚®ç®±")
        
        self._email = value.lower()  # ç»Ÿä¸€è½¬ä¸ºå°å†™
    
    @property
    def phone(self):
        return self._phone
    
    @phone.setter
    def phone(self, value):
        """æ‰‹æœºå·éªŒè¯"""
        if not isinstance(value, str):
            value = str(value)  # å…è®¸æ•°å­—è¾“å…¥ï¼Œè‡ªåŠ¨è½¬æ¢
        
        # ç§»é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦
        clean_phone = re.sub(r'\D', '', value)
        
        # ä¸­å›½æ‰‹æœºå·éªŒè¯
        if not re.match(r'^1[3-9]\d{9}$', clean_phone):
            raise ValueError("æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®ï¼ˆè¯·è¾“å…¥ä¸­å›½å¤§é™†æ‰‹æœºå·ï¼‰")
        
        self._phone = clean_phone
    
    @property
    def salary(self):
        return self._salary
    
    @salary.setter
    def salary(self, value):
        """è–ªèµ„éªŒè¯"""
        try:
            value = float(value)
        except (ValueError, TypeError):
            raise TypeError("è–ªèµ„å¿…é¡»æ˜¯æ•°å­—")
        
        if value < 0:
            raise ValueError("è–ªèµ„ä¸èƒ½ä¸ºè´Ÿæ•°")
        if value > 1000000:  # å‡è®¾å…¬å¸è–ªèµ„ä¸Šé™
            raise ValueError("è–ªèµ„ä¸èƒ½è¶…è¿‡100ä¸‡")
        
        self._salary = round(value, 2)
    
    @property
    def hire_date(self):
        return self._hire_date
    
    @hire_date.setter
    def hire_date(self, value):
        """å…¥èŒæ—¥æœŸéªŒè¯"""
        if isinstance(value, str):
            try:
                # å°è¯•è§£æå­—ç¬¦ä¸²æ—¥æœŸ
                value = datetime.strptime(value, '%Y-%m-%d').date()
            except ValueError:
                raise ValueError("æ—¥æœŸæ ¼å¼é”™è¯¯ï¼Œè¯·ä½¿ç”¨ YYYY-MM-DD æ ¼å¼")
        
        if not isinstance(value, date):
            raise TypeError("å…¥èŒæ—¥æœŸå¿…é¡»æ˜¯æ—¥æœŸç±»å‹")
        
        # æ—¥æœŸåˆç†æ€§éªŒè¯
        today = date.today()
        if value > today:
            raise ValueError("å…¥èŒæ—¥æœŸä¸èƒ½æ˜¯æœªæ¥æ—¥æœŸ")
        
        # å‡è®¾å…¬å¸æˆç«‹äº2020å¹´
        company_founded = date(2020, 1, 1)
        if value < company_founded:
            raise ValueError("å…¥èŒæ—¥æœŸä¸èƒ½æ—©äºå…¬å¸æˆç«‹æ—¥æœŸ")
        
        self._hire_date = value
```

### 7.4 è‡ªå®šä¹‰éªŒè¯å™¨è®¾è®¡


```python
class Validator:
    """é€šç”¨éªŒè¯å™¨ç±»"""
    
    @staticmethod
    def validate_range(value, min_val=None, max_val=None, field_name="å€¼"):
        """èŒƒå›´éªŒè¯"""
        if min_val is not None and value < min_val:
            raise ValueError(f"{field_name}ä¸èƒ½å°äº{min_val}")
        if max_val is not None and value > max_val:
            raise ValueError(f"{field_name}ä¸èƒ½å¤§äº{max_val}")
        return True
    
    @staticmethod
    def validate_length(value, min_len=None, max_len=None, field_name="å­—ç¬¦ä¸²"):
        """é•¿åº¦éªŒè¯"""
        length = len(value)
        if min_len is not None and length < min_len:
            raise ValueError(f"{field_name}é•¿åº¦ä¸èƒ½å°‘äº{min_len}ä¸ªå­—ç¬¦")
        if max_len is not None and length > max_len:
            raise ValueError(f"{field_name}é•¿åº¦ä¸èƒ½è¶…è¿‡{max_len}ä¸ªå­—ç¬¦")
        return True
    
    @staticmethod
    def validate_regex(value, pattern, error_msg, field_name="å­—æ®µ"):
        """æ­£åˆ™è¡¨è¾¾å¼éªŒè¯"""
        if not re.match(pattern, value):
            raise ValueError(f"{field_name}{error_msg}")
        return True

class Student:
    def __init__(self, student_id, name, grade):
        self.student_id = student_id
        self.name = name
        self.grade = grade
    
    @property
    def student_id(self):
        return self._student_id
    
    @student_id.setter
    def student_id(self, value):
        """ä½¿ç”¨è‡ªå®šä¹‰éªŒè¯å™¨"""
        if not isinstance(value, str):
            raise TypeError("å­¦å·å¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        # ä½¿ç”¨éªŒè¯å™¨éªŒè¯é•¿åº¦
        Validator.validate_length(value, 8, 10, "å­¦å·")
        
        # ä½¿ç”¨éªŒè¯å™¨éªŒè¯æ ¼å¼
        Validator.validate_regex(
            value, 
            r'^\d{8,10}$', 
            "æ ¼å¼é”™è¯¯ï¼Œåº”ä¸º8-10ä½æ•°å­—", 
            "å­¦å·"
        )
        
        self._student_id = value
    
    @property
    def grade(self):
        return self._grade
    
    @grade.setter
    def grade(self, value):
        """ä½¿ç”¨è‡ªå®šä¹‰éªŒè¯å™¨éªŒè¯æˆç»©"""
        try:
            value = float(value)
        except (ValueError, TypeError):
            raise TypeError("æˆç»©å¿…é¡»æ˜¯æ•°å­—")
        
        # ä½¿ç”¨éªŒè¯å™¨éªŒè¯èŒƒå›´
        Validator.validate_range(value, 0, 100, "æˆç»©")
        
        self._grade = round(value, 1)
```

**ğŸ“ éªŒè¯æ•ˆæœæ¼”ç¤º**

```python
# åˆ›å»ºå‘˜å·¥ï¼ˆæ‰€æœ‰éªŒè¯éƒ½ä¼šæ‰§è¡Œï¼‰
try:
    emp = Employee(
        employee_id="EMP2024001",
        email="zhang.san@company.com",
        phone="13812345678",
        salary=50000,
        hire_date="2024-01-15"
    )
    print("å‘˜å·¥åˆ›å»ºæˆåŠŸï¼")
except Exception as e:
    print(f"åˆ›å»ºå¤±è´¥ï¼š{e}")

# å°è¯•è®¾ç½®æ— æ•ˆæ•°æ®
try:
    emp.salary = -1000  # è´Ÿæ•°è–ªèµ„
except ValueError as e:
    print(f"è–ªèµ„éªŒè¯å¤±è´¥ï¼š{e}")

try:
    emp.email = "invalid-email"  # æ— æ•ˆé‚®ç®±
except ValueError as e:
    print(f"é‚®ç®±éªŒè¯å¤±è´¥ï¼š{e}")
```

---

## 8. ğŸ’¾ å±æ€§è®¡ç®—ç¼“å­˜


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦å±æ€§è®¡ç®—ç¼“å­˜


**ğŸ¤” è®¡ç®—ç¼“å­˜è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ**

æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š
```
ä½ æœ‰ä¸€ä¸ªå¤§æ•°æ®åˆ†æç±»ï¼Œæ¯æ¬¡è®¡ç®—å¹³å‡å€¼éƒ½è¦å¤„ç†ç™¾ä¸‡æ¡è®°å½•
å¦‚æœç”¨æˆ·é¢‘ç¹è®¿é—®averageå±æ€§ï¼Œæ¯æ¬¡éƒ½é‡æ–°è®¡ç®—ä¼šå¾ˆæ…¢
ç¼“å­˜æœºåˆ¶ï¼šç¬¬ä¸€æ¬¡è®¡ç®—åä¿å­˜ç»“æœï¼Œæ•°æ®ä¸å˜æ—¶ç›´æ¥è¿”å›ç¼“å­˜
```

**âš¡ ç¼“å­˜çš„ä¼˜åŠ¿**
- **æ€§èƒ½æå‡**ï¼šé¿å…é‡å¤çš„é‡è®¡ç®—
- **å“åº”é€Ÿåº¦**ï¼šå¿«é€Ÿè¿”å›å·²è®¡ç®—çš„ç»“æœ
- **èµ„æºèŠ‚çœ**ï¼šå‡å°‘CPUå’Œå†…å­˜ä½¿ç”¨

### 8.2 ç®€å•ç¼“å­˜æœºåˆ¶å®ç°


```python
class DataAnalyzer:
    def __init__(self, data):
        self._data = data
        self._average_cache = None  # ç¼“å­˜å¹³å‡å€¼
        self._cache_valid = False   # ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ
    
    @property
    def data(self):
        return self._data
    
    @data.setter
    def data(self, value):
        """è®¾ç½®æ•°æ®æ—¶ï¼Œæ¸…é™¤ç¼“å­˜"""
        self._data = value
        self._invalidate_cache()  # æ•°æ®å˜åŒ–ï¼Œç¼“å­˜å¤±æ•ˆ
    
    def _invalidate_cache(self):
        """ä½¿ç¼“å­˜å¤±æ•ˆ"""
        self._cache_valid = False
        self._average_cache = None
        print("ç¼“å­˜å·²æ¸…é™¤")
    
    @property
    def average(self):
        """è®¡ç®—å¹³å‡å€¼ - å¸¦ç¼“å­˜"""
        if self._cache_valid and self._average_cache is not None:
            print("ä½¿ç”¨ç¼“å­˜ç»“æœ")
            return self._average_cache
        
        print("æ­£åœ¨è®¡ç®—å¹³å‡å€¼...")
        # æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
        if not self._data:
            result = 0
        else:
            result = sum(self._data) / len(self._data)
        
        # ä¿å­˜åˆ°ç¼“å­˜
        self._average_cache = round(result, 2)
        self._cache_valid = True
        print(f"è®¡ç®—å®Œæˆï¼Œç»“æœå·²ç¼“å­˜ï¼š{self._average_cache}")
        
        return self._average_cache
```

### 8.3 é«˜çº§ç¼“å­˜æœºåˆ¶ï¼šè£…é¥°å™¨å®ç°


```python
from functools import wraps
from time import time

def cached_property(expire_time=None):
    """ç¼“å­˜å±æ€§è£…é¥°å™¨"""
    def decorator(func):
        cache_name = f'_cache_{func.__name__}'
        time_name = f'_cache_time_{func.__name__}'
        
        @property
        @wraps(func)
        def wrapper(self):
            # æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜
            if hasattr(self, cache_name):
                # æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ
                if expire_time is None:
                    print(f"ä½¿ç”¨ {func.__name__} çš„ç¼“å­˜ç»“æœ")
                    return getattr(self, cache_name)
                
                cache_time = getattr(self, time_name, 0)
                if time() - cache_time < expire_time:
                    print(f"ä½¿ç”¨ {func.__name__} çš„ç¼“å­˜ç»“æœ")
                    return getattr(self, cache_name)
                else:
                    print(f"{func.__name__} ç¼“å­˜å·²è¿‡æœŸ")
            
            # æ‰§è¡ŒåŸå‡½æ•°è®¡ç®—
            print(f"æ­£åœ¨è®¡ç®— {func.__name__}...")
            result = func(self)
            
            # ä¿å­˜ç¼“å­˜
            setattr(self, cache_name, result)
            if expire_time is not None:
                setattr(self, time_name, time())
            
            print(f"{func.__name__} è®¡ç®—å®Œæˆå¹¶ç¼“å­˜")
            return result
        
        return wrapper
    return decorator

class ComplexCalculator:
    def __init__(self, numbers):
        self._numbers = numbers
    
    @property
    def numbers(self):
        return self._numbers
    
    @numbers.setter
    def numbers(self, value):
        """è®¾ç½®æ–°æ•°æ®æ—¶æ¸…é™¤æ‰€æœ‰ç¼“å­˜"""
        self._numbers = value
        self._clear_all_cache()
    
    def _clear_all_cache(self):
        """æ¸…é™¤æ‰€æœ‰ç¼“å­˜"""
        cache_attrs = [attr for attr in dir(self) if attr.startswith('_cache_')]
        for attr in cache_attrs:
            delattr(self, attr)
        print("æ‰€æœ‰ç¼“å­˜å·²æ¸…é™¤")
    
    @cached_property()  # æ°¸ä¹…ç¼“å­˜
    def sum_value(self):
        """è®¡ç®—æ€»å’Œ - æ°¸ä¹…ç¼“å­˜"""
        return sum(self._numbers)
    
    @cached_property(expire_time=5)  # 5ç§’è¿‡æœŸ
    def average_value(self):
        """è®¡ç®—å¹³å‡å€¼ - 5ç§’ç¼“å­˜"""
        if not self._numbers:
            return 0
        return round(sum(self._numbers) / len(self._numbers), 2)
    
    @cached_property()  # æ°¸ä¹…ç¼“å­˜
    def statistics(self):
        """å¤æ‚ç»Ÿè®¡è®¡ç®— - æ°¸ä¹…ç¼“å­˜"""
        if not self._numbers:
            return {"count": 0, "sum": 0, "avg": 0, "min": 0, "max": 0}
        
        # æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
        import time
        time.sleep(1)  # æ¨¡æ‹Ÿ1ç§’çš„è®¡ç®—æ—¶é—´
        
        return {
            "count": len(self._numbers),
            "sum": sum(self._numbers),
            "avg": sum(self._numbers) / len(self._numbers),
            "min": min(self._numbers),
            "max": max(self._numbers)
        }
```

### 8.4 æ™ºèƒ½ç¼“å­˜ï¼šåŸºäºæ•°æ®ç‰ˆæœ¬


```python
import hashlib
import json

class SmartCache:
    def __init__(self, data):
        self._data = data
        self._data_version = self._calculate_version()
        self._cache = {}
    
    def _calculate_version(self):
        """è®¡ç®—æ•°æ®ç‰ˆæœ¬å·"""
        data_str = json.dumps(self._data, sort_keys=True)
        return hashlib.md5(data_str.encode()).hexdigest()[:8]
    
    @property
    def data(self):
        return self._data
    
    @data.setter
    def data(self, value):
        """æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬"""
        old_version = self._data_version
        self._data = value
        self._data_version = self._calculate_version()
        
        if old_version != self._data_version:
            print(f"æ•°æ®ç‰ˆæœ¬ä» {old_version} æ›´æ–°åˆ° {self._data_version}")
            self._cache.clear()  # æ¸…é™¤æ‰€æœ‰ç¼“å­˜
            print("ç¼“å­˜å·²æ¸…ç©º")
    
    def _get_cached_result(self, operation_name):
        """è·å–ç¼“å­˜ç»“æœ"""
        cache_key = f"{operation_name}_{self._data_version}"
        return self._cache.get(cache_key)
    
    def _set_cached_result(self, operation_name, result):
        """è®¾ç½®ç¼“å­˜ç»“æœ"""
        cache_key = f"{operation_name}_{self._data_version}"
        self._cache[cache_key] = result
        print(f"ç»“æœå·²ç¼“å­˜ï¼š{cache_key}")
    
    @property
    def total(self):
        """æ€»è®¡ - æ™ºèƒ½ç¼“å­˜"""
        cached = self._get_cached_result('total')
        if cached is not None:
            print("ä½¿ç”¨ç¼“å­˜çš„æ€»è®¡ç»“æœ")
            return cached
        
        print("æ­£åœ¨è®¡ç®—æ€»è®¡...")
        result = sum(self._data)
        self._set_cached_result('total', result)
        return result
    
    @property
    def average(self):
        """å¹³å‡å€¼ - æ™ºèƒ½ç¼“å­˜"""
        cached = self._get_cached_result('average')
        if cached is not None:
            print("ä½¿ç”¨ç¼“å­˜çš„å¹³å‡å€¼ç»“æœ")
            return cached
        
        print("æ­£åœ¨è®¡ç®—å¹³å‡å€¼...")
        result = self.total / len(self._data) if self._data else 0
        result = round(result, 2)
        self._set_cached_result('average', result)
        return result
```

**ğŸ“ ç¼“å­˜æ•ˆæœæ¼”ç¤º**

```python
# ç®€å•ç¼“å­˜ç¤ºä¾‹
analyzer = DataAnalyzer([1, 2, 3, 4, 5])
print(analyzer.average)  # ç¬¬ä¸€æ¬¡è®¡ç®—
print(analyzer.average)  # ä½¿ç”¨ç¼“å­˜
analyzer.data = [10, 20, 30]  # æ›´æ–°æ•°æ®ï¼Œç¼“å­˜å¤±æ•ˆ
print(analyzer.average)  # é‡æ–°è®¡ç®—

print("\n" + "="*50 + "\n")

# é«˜çº§ç¼“å­˜ç¤ºä¾‹
calc = ComplexCalculator([1, 2, 3, 4, 5])
print(calc.statistics)  # ç¬¬ä¸€æ¬¡è®¡ç®—ï¼ˆè€—æ—¶1ç§’ï¼‰
print(calc.statistics)  # ä½¿ç”¨ç¼“å­˜ï¼ˆç«‹å³è¿”å›ï¼‰

print("\n" + "="*50 + "\n")

# æ™ºèƒ½ç¼“å­˜ç¤ºä¾‹
smart = SmartCache([1, 2, 3, 4, 5])
print(smart.total)      # ç¬¬ä¸€æ¬¡è®¡ç®—
print(smart.average)    # ç¬¬ä¸€æ¬¡è®¡ç®—å¹³å‡å€¼
print(smart.total)      # ä½¿ç”¨ç¼“å­˜
smart.data = [10, 20]   # æ•°æ®ç‰ˆæœ¬å˜åŒ–ï¼Œç¼“å­˜å¤±æ•ˆ
print(smart.total)      # é‡æ–°è®¡ç®—
```

---

## 9. ğŸ† å±æ€§è£…é¥°å™¨æœ€ä½³å®è·µ


### 9.1 è®¾è®¡åŸåˆ™å’Œè§„èŒƒ


**ğŸ“‹ å±æ€§è£…é¥°å™¨è®¾è®¡çš„é»„é‡‘æ³•åˆ™**

| åŸåˆ™ | **è¯´æ˜** | **å¥½çš„ç¤ºä¾‹** | **é¿å…çš„åšæ³•** |
|------|---------|-------------|---------------|
| ğŸ¯ **å•ä¸€èŒè´£** | æ¯ä¸ªå±æ€§åªè´Ÿè´£ä¸€ä»¶äº‹ | `age`å±æ€§åªç®¡å¹´é¾„ | ä¸€ä¸ªå±æ€§ç®¡å¹´é¾„åˆç®¡æƒé™ |
| ğŸ”’ **æ•°æ®ä¿æŠ¤** | å†…éƒ¨æ•°æ®ç”¨ä¸‹åˆ’çº¿å¼€å¤´ | `self._name` | `self.name`ç›´æ¥æš´éœ² |
| âš¡ **æ€§èƒ½ä¼˜åŒ–** | é¿å…åœ¨getterä¸­åšé‡è®¡ç®— | ç¼“å­˜å¤æ‚è®¡ç®—ç»“æœ | æ¯æ¬¡è®¿é—®éƒ½é‡æ–°è®¡ç®— |
| ğŸ“ **æ¸…æ™°å‘½å** | å±æ€§åè¦è§åçŸ¥æ„ | `is_valid`ã€`total_price` | `flag`ã€`val` |
| ğŸ›¡ï¸ **é”™è¯¯å¤„ç†** | æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯ | "å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´" | "å€¼æ— æ•ˆ" |

### 9.2 å¸¸è§ä½¿ç”¨æ¨¡å¼æ€»ç»“


```python
class BestPracticeExample:
    """å±æ€§è£…é¥°å™¨æœ€ä½³å®è·µç¤ºä¾‹"""
    
    def __init__(self, name, age, email):
        # é€šè¿‡setterè¿›è¡Œåˆå§‹éªŒè¯
        self.name = name
        self.age = age
        self.email = email
        
        # ç§æœ‰å±æ€§ï¼Œä¸é€šè¿‡setter
        self._created_at = datetime.now()
        self._access_count = 0
    
    # æ¨¡å¼1ï¼šç®€å•å±æ€§ - åŸºç¡€éªŒè¯
    @property
    def name(self):
        """å§“åå±æ€§ - åªè¯»æ˜¾ç¤º"""
        self._access_count += 1  # ç»Ÿè®¡è®¿é—®æ¬¡æ•°
        return self._name
    
    @name.setter
    def name(self, value):
        """å§“åè®¾ç½® - åŸºç¡€éªŒè¯"""
        if not isinstance(value, str) or not value.strip():
            raise ValueError("å§“åå¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²")
        self._name = value.strip().title()  # æ ‡å‡†åŒ–æ ¼å¼
    
    # æ¨¡å¼2ï¼šè®¡ç®—å±æ€§ - åŸºäºå…¶ä»–å±æ€§è®¡ç®—
    @property
    def display_name(self):
        """æ˜¾ç¤ºåç§° - è®¡ç®—å±æ€§"""
        return f"{self.name} ({self.age}å²)"
    
    # æ¨¡å¼3ï¼šéªŒè¯å±æ€§ - å¤æ‚ä¸šåŠ¡é€»è¾‘
    @property
    def age(self):
        return self._age
    
    @age.setter
    def age(self, value):
        """å¹´é¾„éªŒè¯ - ä¸šåŠ¡é€»è¾‘"""
        try:
            value = int(value)
        except (ValueError, TypeError):
            raise TypeError("å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°")
        
        if not 0 <= value <= 150:
            raise ValueError("å¹´é¾„å¿…é¡»åœ¨0-150å²ä¹‹é—´")
        
        self._age = value
    
    # æ¨¡å¼4ï¼šæ ¼å¼åŒ–å±æ€§ - è‡ªåŠ¨æ ¼å¼è½¬æ¢
    @property
    def email(self):
        return self._email
    
    @email.setter
    def email(self, value):
        """é‚®ç®±è®¾ç½® - æ ¼å¼åŒ–"""
        if not isinstance(value, str):
            raise TypeError("é‚®ç®±å¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        import re
        pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        if not re.match(pattern, value):
            raise ValueError("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
        
        self._email = value.lower()  # ç»Ÿä¸€å°å†™
    
    # æ¨¡å¼5ï¼šåªè¯»å±æ€§ - ç³»ç»Ÿä¿¡æ¯
    @property
    def created_at(self):
        """åˆ›å»ºæ—¶é—´ - åªè¯»"""
        return self._created_at
    
    @property
    def access_count(self):
        """è®¿é—®æ¬¡æ•° - åªè¯»ç»Ÿè®¡"""
        return self._access_count
    
    # æ¨¡å¼6ï¼šçŠ¶æ€å±æ€§ - åŸºäºæ¡ä»¶åˆ¤æ–­
    @property
    def is_adult(self):
        """æ˜¯å¦æˆå¹´ - çŠ¶æ€å±æ€§"""
        return self.age >= 18
    
    @property
    def age_group(self):
        """å¹´é¾„ç»„åˆ« - åˆ†ç±»å±æ€§"""
        if self.age < 13:
            return "å„¿ç«¥"
        elif self.age < 18:
            return "é’å°‘å¹´"
        elif self.age < 60:
            return "æˆå¹´äºº"
        else:
            return "è€å¹´äºº"
```

### 9.3 é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–


```python
class UserFriendlyClass:
    """ç”¨æˆ·å‹å¥½çš„å±æ€§è®¾è®¡"""
    
    def __init__(self):
        self._balance = 0.0
        self._transactions = []
    
    @property
    def balance(self):
        """è´¦æˆ·ä½™é¢"""
        return self._balance
    
    @balance.setter
    def balance(self, value):
        """ä½™é¢è®¾ç½® - å‹å¥½çš„é”™è¯¯å¤„ç†"""
        # é˜¶æ®µ1ï¼šç±»å‹è½¬æ¢å°è¯•
        if isinstance(value, str):
            try:
                value = float(value.replace(',', '').replace('Â¥', ''))
            except ValueError:
                raise ValueError(
                    f"æ— æ³•å°† '{value}' è½¬æ¢ä¸ºæœ‰æ•ˆçš„é‡‘é¢æ•°å­—ã€‚\n"
                    "è¯·è¾“å…¥æ•°å­—ï¼Œä¾‹å¦‚ï¼š100.50 æˆ– '1,000.00'"
                )
        
        # é˜¶æ®µ2ï¼šç±»å‹éªŒè¯
        if not isinstance(value, (int, float)):
            raise TypeError(
                f"ä½™é¢å¿…é¡»æ˜¯æ•°å­—ç±»å‹ï¼Œå½“å‰ç±»å‹ï¼š{type(value).__name__}\n"
                "æ­£ç¡®ç¤ºä¾‹ï¼šbalance = 100.50"
            )
        
        # é˜¶æ®µ3ï¼šä¸šåŠ¡éªŒè¯
        if value < 0:
            raise ValueError(
                f"ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå½“å‰å€¼ï¼š{value}\n"
                "å¦‚éœ€æ‰£æ¬¾ï¼Œè¯·ä½¿ç”¨ withdraw() æ–¹æ³•"
            )
        
        if value > 10000000:  # 1åƒä¸‡é™é¢
            raise ValueError(
                f"å•æ¬¡ä½™é¢ä¸èƒ½è¶…è¿‡1åƒä¸‡ï¼Œå½“å‰å€¼ï¼š{value:,.2f}\n"
                "å¦‚éœ€å­˜å…¥å¤§é¢èµ„é‡‘ï¼Œè¯·è”ç³»å®¢æœ"
            )
        
        # é˜¶æ®µ4ï¼šæˆåŠŸè®¾ç½®
        old_balance = self._balance
        self._balance = round(float(value), 2)
        
        # è®°å½•å˜åŒ–
        if old_balance != self._balance:
            self._transactions.append({
                'type': 'balance_update',
                'old': old_balance,
                'new': self._balance,
                'time': datetime.now()
            })
    
    def deposit(self, amount):
        """å­˜æ¬¾æ–¹æ³• - ä¸šåŠ¡é€»è¾‘å°è£…"""
        if amount <= 0:
            raise ValueError("å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0")
        
        self.balance = self._balance + amount
        print(f"å­˜æ¬¾æˆåŠŸï¼å­˜å…¥ Â¥{amount:,.2f}ï¼Œå½“å‰ä½™é¢ Â¥{self.balance:,.2f}")
    
    def withdraw(self, amount):
        """å–æ¬¾æ–¹æ³• - ä¸šåŠ¡é€»è¾‘å°è£…"""
        if amount <= 0:
            raise ValueError("å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0")
        
        if amount > self._balance:
            raise ValueError(
                f"ä½™é¢ä¸è¶³ï¼å½“å‰ä½™é¢ Â¥{self.balance:,.2f}ï¼Œ"
                f"å°è¯•å–æ¬¾ Â¥{amount:,.2f}"
            )
        
        self.balance = self._balance - amount
        print(f"å–æ¬¾æˆåŠŸï¼å–å‡º Â¥{amount:,.2f}ï¼Œå½“å‰ä½™é¢ Â¥{self.balance:,.2f}")
```

### 9.4 æ€§èƒ½ä¼˜åŒ–å’Œå†…å­˜ç®¡ç†


```python
class PerformanceOptimized:
    """æ€§èƒ½ä¼˜åŒ–çš„å±æ€§è®¾è®¡"""
    
    __slots__ = ['_data', '_cache', '_cache_time']  # é™åˆ¶å±æ€§ï¼ŒèŠ‚çœå†…å­˜
    
    def __init__(self, data):
        self._data = data
        self._cache = {}
        self._cache_time = {}
    
    def _should_recalculate(self, cache_key, max_age=60):
        """åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—"""
        if cache_key not in self._cache:
            return True
        
        if cache_key not in self._cache_time:
            return True
        
        age = time.time() - self._cache_time[cache_key]
        return age > max_age
    
    def _get_or_calculate(self, cache_key, calculate_func, max_age=60):
        """é€šç”¨ç¼“å­˜è·å–æ–¹æ³•"""
        if self._should_recalculate(cache_key, max_age):
            result = calculate_func()
            self._cache[cache_key] = result
            self._cache_time[cache_key] = time.time()
            return result
        
        return self._cache[cache_key]
    
    @property
    def expensive_calculation(self):
        """æ˜‚è´µè®¡ç®— - å¸¦ç¼“å­˜"""
        def calculate():
            # æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
            import time
            time.sleep(0.1)  # æ¨¡æ‹Ÿ100msè®¡ç®—æ—¶é—´
            return sum(x ** 2 for x in self._data)
        
        return self._get_or_calculate('expensive', calculate, max_age=30)
    
    @property
    def data_summary(self):
        """æ•°æ®æ‘˜è¦ - å¸¦ç¼“å­˜"""
        def calculate():
            if not self._data:
                return {"count": 0, "sum": 0, "avg": 0}
            
            return {
                "count": len(self._data),
                "sum": sum(self._data),
                "avg": sum(self._data) / len(self._data),
                "min": min(self._data),
                "max": max(self._data)
            }
        
        return self._get_or_calculate('summary', calculate, max_age=120)
```

### 9.5 å›¢é˜Ÿåä½œå’Œæ–‡æ¡£è§„èŒƒ


```python
class DocumentedClass:
    """è‰¯å¥½æ–‡æ¡£çš„å±æ€§è®¾è®¡ç¤ºä¾‹"""
    
    def __init__(self, name: str, price: float):
        """
        åˆå§‹åŒ–äº§å“
        
        Args:
            name: äº§å“åç§°ï¼Œéç©ºå­—ç¬¦ä¸²
            price: äº§å“ä»·æ ¼ï¼Œéè´Ÿæ•°
        
        Raises:
            ValueError: å½“å‚æ•°ä¸ç¬¦åˆè¦æ±‚æ—¶
        """
        self.name = name
        self.price = price
    
    @property
    def name(self) -> str:
        """
        äº§å“åç§°
        
        Returns:
            str: äº§å“çš„æ ‡å‡†åŒ–åç§°ï¼ˆå»é™¤é¦–å°¾ç©ºæ ¼ï¼Œé¦–å­—æ¯å¤§å†™ï¼‰
        
        Examples:
            >>> product = DocumentedClass("apple", 5.0)
            >>> product.name
            'Apple'
        """
        return self._name
    
    @name.setter
    def name(self, value: str) -> None:
        """
        è®¾ç½®äº§å“åç§°
        
        Args:
            value: äº§å“åç§°ï¼Œå¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²
        
        Raises:
            TypeError: å½“valueä¸æ˜¯å­—ç¬¦ä¸²æ—¶
            ValueError: å½“valueä¸ºç©ºæˆ–åªåŒ…å«ç©ºæ ¼æ—¶
        
        Examples:
            >>> product.name = "banana"  # æ­£ç¡®
            >>> product.name = ""        # ValueError
            >>> product.name = 123       # TypeError
        """
        if not isinstance(value, str):
            raise TypeError(f"äº§å“åç§°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œå¾—åˆ° {type(value).__name__}")
        
        if not value.strip():
            raise ValueError("äº§å“åç§°ä¸èƒ½ä¸ºç©º")
        
        self._name = value.strip().title()
    
    @property
    def price(self) -> float:
        """
        äº§å“ä»·æ ¼
        
        Returns:
            float: äº§å“ä»·æ ¼ï¼Œä¿ç•™2ä½å°æ•°
        """
        return self._price
    
    @price.setter
    def price(self, value: float) -> None:
        """
        è®¾ç½®äº§å“ä»·æ ¼
        
        Args:
            value: äº§å“ä»·æ ¼ï¼Œå¿…é¡»æ˜¯éè´Ÿæ•°
        
        Raises:
            TypeError: å½“valueä¸æ˜¯æ•°å­—æ—¶
            ValueError: å½“valueä¸ºè´Ÿæ•°æ—¶
        """
        if not isinstance(value, (int, float)):
            raise TypeError("ä»·æ ¼å¿…é¡»æ˜¯æ•°å­—")
        
        if value < 0:
            raise ValueError("ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿæ•°")
        
        self._price = round(float(value), 2)
    
    @property
    def formatted_price(self) -> str:
        """
        æ ¼å¼åŒ–çš„ä»·æ ¼å­—ç¬¦ä¸²
        
        Returns:
            str: å¸¦è´§å¸ç¬¦å·çš„ä»·æ ¼å­—ç¬¦ä¸²
        
        Examples:
            >>> product = DocumentedClass("apple", 5.99)
            >>> product.formatted_price
            'Â¥5.99'
        """
        return f"Â¥{self.price:.2f}"
```

**ğŸ“ æœ€ä½³å®è·µä½¿ç”¨ç¤ºä¾‹**

```python
# æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼
try:
    # åˆ›å»ºç”¨æˆ·å‹å¥½çš„å¯¹è±¡
    account = UserFriendlyClass()
    account.deposit(1000)     # å­˜æ¬¾æˆåŠŸï¼å­˜å…¥ Â¥1,000.00ï¼Œå½“å‰ä½™é¢ Â¥1,000.00
    account.withdraw(200)     # å–æ¬¾æˆåŠŸï¼å–å‡º Â¥200.00ï¼Œå½“å‰ä½™é¢ Â¥800.00
    
    # æ€§èƒ½ä¼˜åŒ–å¯¹è±¡
    perf = PerformanceOptimized([1, 2, 3, 4, 5])
    print(perf.data_summary)  # ç¬¬ä¸€æ¬¡è®¡ç®—
    print(perf.data_summary)  # ä½¿ç”¨ç¼“å­˜
    
    # æ–‡æ¡£å®Œå–„çš„å¯¹è±¡
    product = DocumentedClass("apple", 5.99)
    print(product.formatted_price)  # Â¥5.99
    
except Exception as e:
    print(f"æ“ä½œå¤±è´¥ï¼š{e}")
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ propertyè£…é¥°å™¨ï¼šæŠŠæ–¹æ³•ä¼ªè£…æˆå±æ€§çš„é­”æ³•å·¥å…·
ğŸ”¸ getteræ–¹æ³•ï¼šæ§åˆ¶å±æ€§çš„è·å–è¡Œä¸ºï¼Œå¯ä»¥æ·»åŠ è®¡ç®—å’Œæ ¼å¼åŒ–
ğŸ”¸ setteræ–¹æ³•ï¼šæ§åˆ¶å±æ€§çš„è®¾ç½®è¡Œä¸ºï¼Œå¯ä»¥æ·»åŠ éªŒè¯å’Œè½¬æ¢
ğŸ”¸ deleteræ–¹æ³•ï¼šæ§åˆ¶å±æ€§çš„åˆ é™¤è¡Œä¸ºï¼Œç”¨äºèµ„æºæ¸…ç†
ğŸ”¸ åªè¯»å±æ€§ï¼šåªæœ‰getteræ²¡æœ‰setterçš„å±æ€§
ğŸ”¸ å±æ€§éªŒè¯ï¼šåœ¨setterä¸­æ£€æŸ¥æ•°æ®åˆæ³•æ€§
ğŸ”¸ å±æ€§ç¼“å­˜ï¼šé¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ€§èƒ½
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å±æ€§è£…é¥°å™¨çš„æœ¬è´¨**
```
æ™®é€šæ–¹æ³•è°ƒç”¨ï¼šobj.get_value()  # æ˜æ˜¾æ˜¯æ–¹æ³•è°ƒç”¨
å±æ€§è£…é¥°å™¨åï¼šobj.value        # çœ‹èµ·æ¥åƒç›´æ¥è®¿é—®å˜é‡

å®é™…ä¸Šï¼šPythonåœ¨èƒŒåè°ƒç”¨äº†ä½ å®šä¹‰çš„getter/setteræ–¹æ³•
å¥½å¤„ï¼šå¤–éƒ¨ä½¿ç”¨ç®€å•ï¼Œå†…éƒ¨å¯ä»¥æ·»åŠ å¤æ‚é€»è¾‘
```

**ğŸ”¹ ç§æœ‰å±æ€§å‘½åçº¦å®š**
```
self._name    # å•ä¸‹åˆ’çº¿ï¼šå†…éƒ¨ä½¿ç”¨ï¼Œå¤–éƒ¨å¯ä»¥è®¿é—®ä½†ä¸å»ºè®®
self.__name   # åŒä¸‹åˆ’çº¿ï¼šPythonä¼šè‡ªåŠ¨æ”¹åï¼Œæ›´ä¸¥æ ¼çš„ç§æœ‰
self.name     # æ— ä¸‹åˆ’çº¿ï¼šå…¬å¼€å±æ€§ï¼Œå¤–éƒ¨ç›´æ¥ä½¿ç”¨

æœ€ä½³å®è·µï¼šç”¨å•ä¸‹åˆ’çº¿ä½œä¸ºå†…éƒ¨å­˜å‚¨ï¼Œpropertyä½œä¸ºå¯¹å¤–æ¥å£
```

**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å±æ€§è£…é¥°å™¨**
```
âœ… é€‚åˆä½¿ç”¨çš„åœºæ™¯ï¼š
- éœ€è¦éªŒè¯æ•°æ®çš„å±æ€§
- éœ€è¦è®¡ç®—å¾—å‡ºçš„å±æ€§
- éœ€è¦æ ¼å¼åŒ–çš„å±æ€§
- éœ€è¦æ§åˆ¶è®¿é—®çš„å±æ€§

âŒ ä¸éœ€è¦ä½¿ç”¨çš„åœºæ™¯ï¼š
- ç®€å•çš„æ•°æ®å­˜å‚¨
- ä¸éœ€è¦éªŒè¯çš„å±æ€§
- é¢‘ç¹ä¿®æ”¹çš„å†…éƒ¨å˜é‡
```

### 10.3 å®é™…åº”ç”¨åœºæ™¯æ€»ç»“


**ğŸ¯ Webå¼€å‘ä¸­çš„åº”ç”¨**
```python
class User:
    @property
    def email(self):
        return self._email
    
    @email.setter
    def email(self, value):
        # é‚®ç®±æ ¼å¼éªŒè¯
        if not re.match(r'^[^@]+@[^@]+\.[^@]+, value):
            raise ValueError("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
        self._email = value.lower()
    
    @property
    def is_admin(self):
        # åŸºäºè§’è‰²è®¡ç®—æ˜¯å¦ä¸ºç®¡ç†å‘˜
        return 'admin' in self.roles
```

**ğŸ¯ æ•°æ®ç§‘å­¦ä¸­çš„åº”ç”¨**
```python
class Dataset:
    @property
    def mean(self):
        # ç¼“å­˜å‡å€¼è®¡ç®—ç»“æœ
        if self._mean_cache is None:
            self._mean_cache = sum(self.data) / len(self.data)
        return self._mean_cache
    
    @property
    def normalized_data(self):
        # æ ‡å‡†åŒ–æ•°æ®
        mean_val = self.mean
        return [(x - mean_val) for x in self.data]
```

**ğŸ¯ æ¸¸æˆå¼€å‘ä¸­çš„åº”ç”¨**
```python
class Player:
    @property
    def health(self):
        return self._health
    
    @health.setter
    def health(self, value):
        # è¡€é‡èŒƒå›´é™åˆ¶
        self._health = max(0, min(100, value))
        if self._health == 0:
            self.trigger_death()  # è§¦å‘æ­»äº¡äº‹ä»¶
    
    @property
    def level(self):
        # æ ¹æ®ç»éªŒå€¼è®¡ç®—ç­‰çº§
        return int(self.experience / 1000) + 1
```

### 10.4 å¸¸è§é”™è¯¯å’Œé¿å…æ–¹æ³•


**âŒ å¸¸è§é”™è¯¯1ï¼šåœ¨getterä¸­åšé‡è®¡ç®—**
```python
# é”™è¯¯ç¤ºä¾‹
@property
def expensive_value(self):
    return sum(x**2 for x in range(1000000))  # æ¯æ¬¡è®¿é—®éƒ½é‡æ–°è®¡ç®—

# æ­£ç¡®åšæ³•
@property
def expensive_value(self):
    if not hasattr(self, '_cached_value'):
        self._cached_value = sum(x**2 for x in range(1000000))
    return self._cached_value
```

**âŒ å¸¸è§é”™è¯¯2ï¼šå¿˜è®°å¤„ç†å¼‚å¸¸**
```python
# é”™è¯¯ç¤ºä¾‹
@age.setter
def age(self, value):
    self._age = int(value)  # å¦‚æœvalueä¸æ˜¯æ•°å­—ä¼šå´©æºƒ

# æ­£ç¡®åšæ³•
@age.setter
def age(self, value):
    try:
        value = int(value)
    except (ValueError, TypeError):
        raise ValueError("å¹´é¾„å¿…é¡»æ˜¯æ•°å­—")
    if value < 0:
        raise ValueError("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
    self._age = value
```

**âŒ å¸¸è§é”™è¯¯3ï¼šå¾ªç¯å¼•ç”¨**
```python
# é”™è¯¯ç¤ºä¾‹
@property
def name(self):
    return self.name  # ä¼šå¯¼è‡´æ— é™é€’å½’ï¼

# æ­£ç¡®åšæ³•
@property
def name(self):
    return self._name  # è®¿é—®å†…éƒ¨å­˜å‚¨
```

### 10.5 è¿›é˜¶å­¦ä¹ å»ºè®®


**ğŸ“š æ·±å…¥å­¦ä¹ æ–¹å‘**
```
1. æè¿°ç¬¦åè®® (Descriptor Protocol)
   - æ›´åº•å±‚çš„å±æ€§æ§åˆ¶æœºåˆ¶
   - propertyè£…é¥°å™¨çš„å®ç°åŸç†

2. å…ƒç±» (Metaclass) 
   - åŠ¨æ€åˆ›å»ºç±»å’Œå±æ€§
   - æ‰¹é‡æ·»åŠ å±æ€§è£…é¥°å™¨

3. æ•°æ®ç±» (Data Class)
   - Python 3.7+ çš„ç®€åŒ–å±æ€§å®šä¹‰
   - è‡ªåŠ¨ç”Ÿæˆgetter/setter

4. Pydantic åº“
   - å¼ºå¤§çš„æ•°æ®éªŒè¯åº“
   - ç±»å‹æ³¨è§£é©±åŠ¨çš„éªŒè¯
```

**ğŸ”§ å®è·µé¡¹ç›®å»ºè®®**
```
åˆçº§é¡¹ç›®ï¼š
- å­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼šå§“åã€å¹´é¾„ã€æˆç»©éªŒè¯
- å•†å“åº“å­˜ç³»ç»Ÿï¼šä»·æ ¼ã€æ•°é‡æ§åˆ¶
- ç”¨æˆ·æ³¨å†Œç³»ç»Ÿï¼šé‚®ç®±ã€å¯†ç éªŒè¯

ä¸­çº§é¡¹ç›®ï¼š
- é…ç½®ç®¡ç†ç³»ç»Ÿï¼šåªè¯»é…ç½®å±æ€§
- æ•°æ®åˆ†æå·¥å…·ï¼šå¸¦ç¼“å­˜çš„è®¡ç®—å±æ€§
- æ¸¸æˆè§’è‰²ç³»ç»Ÿï¼šå±æ€§è”åŠ¨å’Œäº‹ä»¶è§¦å‘

é«˜çº§é¡¹ç›®ï¼š
- ORMæ˜ å°„ç³»ç»Ÿï¼šæ•°æ®åº“å­—æ®µå±æ€§åŒ–
- APIå®¢æˆ·ç«¯ï¼šå“åº”æ•°æ®å±æ€§åŒ–
- ç›‘æ§ç³»ç»Ÿï¼šå®æ—¶è®¡ç®—å±æ€§
```

### 10.6 æ€§èƒ½ä¼˜åŒ–æ€»ç»“


**âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§å¯¹æ¯”**

| æŠ€å·§ | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŒ–æ•ˆæœ** | **å®ç°éš¾åº¦** |
|------|------------|-------------|-------------|
| ğŸš€ **ç®€å•ç¼“å­˜** | è®¡ç®—ç»“æœä¸å˜ | â­â­â­ | â­ |
| ğŸ§  **æ™ºèƒ½ç¼“å­˜** | æ•°æ®å¯èƒ½å˜åŒ– | â­â­â­â­ | â­â­â­ |
| â° **æ—¶é—´ç¼“å­˜** | å…è®¸çŸ­æš‚è¿‡æœŸ | â­â­â­ | â­â­ |
| ğŸƒ **æ‡’åŠ è½½** | ä¸ä¸€å®šä¼šè®¿é—® | â­â­ | â­â­ |
| ğŸ“¦ **æ‰¹é‡å¤„ç†** | å¤šä¸ªå±æ€§è”åŠ¨ | â­â­â­â­ | â­â­â­â­ |

**ğŸ“Š å†…å­˜ä½¿ç”¨ä¼˜åŒ–**
```python
# ä½¿ç”¨ __slots__ å‡å°‘å†…å­˜å ç”¨
class OptimizedClass:
    __slots__ = ['_name', '_age', '_cache']
    
    def __init__(self, name, age):
        self._name = name
        self._age = age
        self._cache = {}

# æ™®é€šç±»æ¯ä¸ªå®ä¾‹çº¦å ç”¨ 1KB å†…å­˜
# ä½¿ç”¨ __slots__ å¯ä»¥å‡å°‘åˆ°çº¦ 200 å­—èŠ‚
```

### 10.7 å›¢é˜Ÿå¼€å‘è§„èŒƒ


**ğŸ“ ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•**
```
âœ… å±æ€§å‘½åæ˜¯å¦æ¸…æ™°æ˜“æ‡‚ï¼Ÿ
âœ… æ˜¯å¦æä¾›äº†é€‚å½“çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Ÿ
âœ… éªŒè¯é€»è¾‘æ˜¯å¦å®Œæ•´ï¼Ÿ
âœ… é”™è¯¯ä¿¡æ¯æ˜¯å¦ç”¨æˆ·å‹å¥½ï¼Ÿ
âœ… æ˜¯å¦è€ƒè™‘äº†æ€§èƒ½é—®é¢˜ï¼Ÿ
âœ… æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•è¦†ç›–ï¼Ÿ
âœ… æ˜¯å¦éµå¾ªäº†é¡¹ç›®ç¼–ç è§„èŒƒï¼Ÿ
```

**ğŸ¯ æœ€ä½³å®è·µæ£€æŸ¥è¡¨**
```
åŸºç¡€è¦æ±‚ï¼š
â–¡ ä½¿ç”¨å•ä¸‹åˆ’çº¿ä½œä¸ºå†…éƒ¨å±æ€§å‰ç¼€
â–¡ æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
â–¡ åœ¨ __init__ ä¸­é€šè¿‡setteråˆå§‹åŒ–
â–¡ ä¸ºè®¡ç®—å±æ€§æ·»åŠ ç¼“å­˜æœºåˆ¶

è¿›é˜¶è¦æ±‚ï¼š
â–¡ æ·»åŠ ç±»å‹æ³¨è§£
â–¡ ç¼–å†™å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
â–¡ æä¾›ä½¿ç”¨ç¤ºä¾‹
â–¡ è€ƒè™‘è¾¹ç•Œæƒ…å†µå¤„ç†

ä¸“ä¸šè¦æ±‚ï¼š
â–¡ æ€§èƒ½åŸºå‡†æµ‹è¯•
â–¡ å†…å­˜ä½¿ç”¨åˆ†æ
â–¡ å¹¶å‘å®‰å…¨è€ƒè™‘
â–¡ å‘åå…¼å®¹æ€§è®¾è®¡
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- propertyè£…é¥°å™¨è®©æ–¹æ³•çœ‹èµ·æ¥åƒå±æ€§ä½¿ç”¨
- getteræ§åˆ¶è·å–ï¼Œsetteræ§åˆ¶è®¾ç½®ï¼Œdeleteræ§åˆ¶åˆ é™¤
- éªŒè¯è¦å‹å¥½ï¼Œç¼“å­˜è¦æ™ºèƒ½ï¼Œæ–‡æ¡£è¦æ¸…æ™°
- ç®€å•åœºæ™¯ç”¨ç®€å•æ–¹æ¡ˆï¼Œå¤æ‚åœºæ™¯ç”¨å¤æ‚è®¾è®¡
- æ€§èƒ½å’Œå¯è¯»æ€§è¦å¹³è¡¡ï¼Œå›¢é˜Ÿåä½œè¦è§„èŒƒ

**å­¦ä¹ å»ºè®®**ï¼šä»ç®€å•çš„éªŒè¯å±æ€§å¼€å§‹ï¼Œé€æ­¥æŒæ¡ç¼“å­˜ã€è®¡ç®—å±æ€§ç­‰é«˜çº§ç‰¹æ€§ï¼Œæœ€ç»ˆèƒ½å¤Ÿè®¾è®¡å‡ºæ—¢æ˜“ç”¨åˆé«˜æ•ˆçš„å±æ€§æ¥å£ã€‚