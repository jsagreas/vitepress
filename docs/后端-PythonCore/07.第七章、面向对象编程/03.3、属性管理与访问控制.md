---
title: 3ã€å±æ€§ç®¡ç†ä¸è®¿é—®æ§åˆ¶
---
## ğŸ“š ç›®å½•

1. [å±æ€§çš„åŸºæœ¬æ¦‚å¿µ](#1-å±æ€§çš„åŸºæœ¬æ¦‚å¿µ)
2. [å®ä¾‹å±æ€§æ“ä½œ](#2-å®ä¾‹å±æ€§æ“ä½œ)
3. [ç±»å±æ€§å…±äº«æœºåˆ¶](#3-ç±»å±æ€§å…±äº«æœºåˆ¶)
4. [å±æ€§åŠ¨æ€ç®¡ç†](#4-å±æ€§åŠ¨æ€ç®¡ç†)
5. [__dict__å±æ€§å­—å…¸](#5-__dict__å±æ€§å­—å…¸)
6. [__slots__å†…å­˜ä¼˜åŒ–](#6-__slots__å†…å­˜ä¼˜åŒ–)
7. [å±æ€§è®¿é—®æ‹¦æˆª](#7-å±æ€§è®¿é—®æ‹¦æˆª)
8. [å±æ€§è®¡ç®—ä¸ç¼“å­˜](#8-å±æ€§è®¡ç®—ä¸ç¼“å­˜)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ’¡ å±æ€§çš„åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å±æ€§


**ğŸ”¸ é€šä¿—ç†è§£**
```
å±æ€§å°±åƒæ˜¯å¯¹è±¡çš„"ç‰¹å¾"æˆ–"ä¿¡æ¯"
- äººæœ‰å§“åã€å¹´é¾„ã€èº«é«˜ç­‰å±æ€§
- æ±½è½¦æœ‰å“ç‰Œã€é¢œè‰²ã€é€Ÿåº¦ç­‰å±æ€§
- æ–‡ä»¶æœ‰åç§°ã€å¤§å°ã€åˆ›å»ºæ—¶é—´ç­‰å±æ€§

å±æ€§å­˜å‚¨å¯¹è±¡çš„æ•°æ®ï¼Œæ–¹æ³•å®šä¹‰å¯¹è±¡çš„è¡Œä¸º
```

**ğŸ  æˆ¿å­ç±»æ¯”**
```
æŠŠå¯¹è±¡æƒ³è±¡æˆä¸€æ ‹æˆ¿å­ï¼š
- å®ä¾‹å±æ€§ï¼šæ¯ä¸ªæˆ¿å­ç‹¬æœ‰çš„ï¼ˆé—¨ç‰Œå·ã€è£…ä¿®é£æ ¼ã€å®¶å…·ï¼‰
- ç±»å±æ€§ï¼šæ‰€æœ‰æˆ¿å­å…±æœ‰çš„ï¼ˆå»ºç­‘æ ‡å‡†ã€å°åŒºåç§°ã€ç‰©ä¸šå…¬å¸ï¼‰

æ¯ä¸ªæˆ¿å­ï¼ˆå¯¹è±¡ï¼‰éƒ½æœ‰è‡ªå·±çš„é—¨ç‰Œå·ï¼Œä½†å±äºåŒä¸€ä¸ªå°åŒº
```

### 1.2 å±æ€§çš„åˆ†ç±»


**ğŸ“Š å±æ€§ç±»å‹å¯¹æ¯”**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å±æ€§åˆ†ç±»                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®ä¾‹å±æ€§     â”‚ æ¯ä¸ªå¯¹è±¡ç‹¬æœ‰çš„æ•°æ®     â”‚
â”‚ (Instance)   â”‚ obj.name = "å¼ ä¸‰"     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç±»å±æ€§       â”‚ æ‰€æœ‰å¯¹è±¡å…±äº«çš„æ•°æ®     â”‚
â”‚ (Class)      â”‚ Student.school = "XX" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ¯ ç†è§£è¦ç‚¹**
- **å®ä¾‹å±æ€§**ï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½å‰¯æœ¬
- **ç±»å±æ€§**ï¼šæ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®
- **åŠ¨æ€å±æ€§**ï¼šè¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤çš„å±æ€§

---

## 2. ğŸ‘¤ å®ä¾‹å±æ€§æ“ä½œ


### 2.1 å®ä¾‹å±æ€§çš„åˆ›å»ºå’Œè®¿é—®


**ğŸ”¸ åŸºæœ¬æ“ä½œ**
```python
class Student:
    def __init__(self, name, age):
        # åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºå®ä¾‹å±æ€§
        self.name = name        # å®ä¾‹å±æ€§
        self.age = age          # å®ä¾‹å±æ€§
        self.grade = None       # å¯ä»¥è®¾ç½®é»˜è®¤å€¼

# åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨åˆ›å»ºå®ä¾‹å±æ€§
student1 = Student("å°æ˜", 18)
student2 = Student("å°çº¢", 17)

# è®¿é—®å®ä¾‹å±æ€§
print(student1.name)    # å°æ˜
print(student2.age)     # 17

# ä¿®æ”¹å®ä¾‹å±æ€§
student1.age = 19
print(student1.age)     # 19ï¼ˆåªå½±å“student1ï¼‰
print(student2.age)     # 17ï¼ˆstudent2ä¸å—å½±å“ï¼‰
```

### 2.2 å±æ€§çš„çµæ´»æ“ä½œ


**âš™ï¸ å¤šç§æ“ä½œæ–¹å¼**
```python
class Person:
    def __init__(self, name):
        self.name = name

person = Person("å¼ ä¸‰")

# 1. ç›´æ¥è®¿é—®
print(person.name)              # å¼ ä¸‰

# 2. getattr()å‡½æ•°ï¼ˆå®‰å…¨è®¿é—®ï¼‰
age = getattr(person, 'age', 0)  # å¦‚æœæ²¡æœ‰ageå±æ€§ï¼Œè¿”å›é»˜è®¤å€¼0
print(age)                      # 0

# 3. setattr()å‡½æ•°ï¼ˆåŠ¨æ€è®¾ç½®ï¼‰
setattr(person, 'age', 25)      # ç›¸å½“äº person.age = 25
print(person.age)               # 25

# 4. hasattr()å‡½æ•°ï¼ˆæ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨ï¼‰
print(hasattr(person, 'name'))  # True
print(hasattr(person, 'height')) # False

# 5. delattr()å‡½æ•°ï¼ˆåˆ é™¤å±æ€§ï¼‰
delattr(person, 'age')          # ç›¸å½“äº del person.age
print(hasattr(person, 'age'))   # False
```

### 2.3 å®ä¾‹å±æ€§çš„å®é™…åº”ç”¨


**ğŸ® æ¸¸æˆè§’è‰²ç¤ºä¾‹**
```python
class GameCharacter:
    def __init__(self, name, character_class):
        # åŸºç¡€å±æ€§
        self.name = name
        self.character_class = character_class
        
        # æ¸¸æˆå±æ€§
        self.level = 1
        self.hp = 100
        self.mp = 50
        self.experience = 0
        
        # è£…å¤‡å±æ€§ï¼ˆå¯ä»¥åŠ¨æ€å˜åŒ–ï¼‰
        self.weapon = None
        self.armor = None
    
    def level_up(self):
        """å‡çº§"""
        self.level += 1
        self.hp += 20
        self.mp += 10
        print(f"{self.name}å‡çº§äº†ï¼ç°åœ¨æ˜¯{self.level}çº§")
    
    def equip_weapon(self, weapon_name, attack_power):
        """è£…å¤‡æ­¦å™¨"""
        self.weapon = weapon_name
        self.attack_power = attack_power  # åŠ¨æ€æ·»åŠ å±æ€§
        print(f"{self.name}è£…å¤‡äº†{weapon_name}")

# åˆ›å»ºä¸åŒçš„è§’è‰²
warrior = GameCharacter("å‹‡å£«", "æˆ˜å£«")
mage = GameCharacter("æ³•å¸ˆ", "é­”æ³•å¸ˆ")

# æ¯ä¸ªè§’è‰²éƒ½æœ‰ç‹¬ç«‹çš„å±æ€§
warrior.level_up()
mage.hp = 80  # æ³•å¸ˆè¡€é‡è¾ƒå°‘

warrior.equip_weapon("é¾™å‰‘", 150)
mage.equip_weapon("æ³•æ–", 80)

print(f"å‹‡å£«ç­‰çº§: {warrior.level}, è¡€é‡: {warrior.hp}")
print(f"æ³•å¸ˆç­‰çº§: {mage.level}, è¡€é‡: {mage.hp}")
```

---

## 3. ğŸ›ï¸ ç±»å±æ€§å…±äº«æœºåˆ¶


### 3.1 ç±»å±æ€§çš„å®šä¹‰å’Œç‰¹ç‚¹


**ğŸ”¸ ç±»å±æ€§åŸºç¡€**
```python
class School:
    # ç±»å±æ€§ï¼šæ‰€æœ‰å®ä¾‹å…±äº«
    school_name = "é˜³å…‰ä¸­å­¦"
    total_students = 0
    
    def __init__(self, student_name):
        self.student_name = student_name    # å®ä¾‹å±æ€§
        School.total_students += 1          # ä¿®æ”¹ç±»å±æ€§

# ç±»å±æ€§çš„è®¿é—®æ–¹å¼
print(School.school_name)       # é€šè¿‡ç±»è®¿é—®ï¼šé˜³å…‰ä¸­å­¦

# åˆ›å»ºå®ä¾‹
student1 = School("å°æ˜")
student2 = School("å°çº¢")

# é€šè¿‡å®ä¾‹ä¹Ÿå¯ä»¥è®¿é—®ç±»å±æ€§
print(student1.school_name)     # é˜³å…‰ä¸­å­¦
print(student2.school_name)     # é˜³å…‰ä¸­å­¦

# æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªç±»å±æ€§
print(School.total_students)    # 2
print(student1.total_students)  # 2
print(student2.total_students)  # 2
```

### 3.2 ç±»å±æ€§ä¸å®ä¾‹å±æ€§çš„å…³ç³»


**âš–ï¸ å±æ€§æŸ¥æ‰¾é¡ºåº**
```
å½“è®¿é—® obj.attr æ—¶ï¼ŒPythonçš„æŸ¥æ‰¾é¡ºåºï¼š
1. å…ˆåœ¨å®ä¾‹å±æ€§ä¸­æŸ¥æ‰¾
2. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå†åœ¨ç±»å±æ€§ä¸­æŸ¥æ‰¾
3. å¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼ŒæŠ¥AttributeErroré”™è¯¯

è¿™å«åš"å±æ€§æŸ¥æ‰¾é“¾"
```

**ğŸ’¡ é‡è¦ç¤ºä¾‹**
```python
class Demo:
    shared_value = "æˆ‘æ˜¯ç±»å±æ€§"
    
    def __init__(self, name):
        self.name = name

obj1 = Demo("å¯¹è±¡1")
obj2 = Demo("å¯¹è±¡2")

# 1. è®¿é—®ç±»å±æ€§
print(obj1.shared_value)    # æˆ‘æ˜¯ç±»å±æ€§
print(obj2.shared_value)    # æˆ‘æ˜¯ç±»å±æ€§

# 2. ä¿®æ”¹ç±»å±æ€§
Demo.shared_value = "ç±»å±æ€§è¢«ä¿®æ”¹äº†"
print(obj1.shared_value)    # ç±»å±æ€§è¢«ä¿®æ”¹äº†
print(obj2.shared_value)    # ç±»å±æ€§è¢«ä¿®æ”¹äº†

# 3. ç»™å®ä¾‹åˆ›å»ºåŒåå±æ€§ï¼ˆé®è”½ç±»å±æ€§ï¼‰
obj1.shared_value = "æˆ‘æ˜¯obj1çš„å®ä¾‹å±æ€§"
print(obj1.shared_value)    # æˆ‘æ˜¯obj1çš„å®ä¾‹å±æ€§ï¼ˆå®ä¾‹å±æ€§ä¼˜å…ˆï¼‰
print(obj2.shared_value)    # ç±»å±æ€§è¢«ä¿®æ”¹äº†ï¼ˆä»ç„¶æ˜¯ç±»å±æ€§ï¼‰

# 4. åˆ é™¤å®ä¾‹å±æ€§åï¼Œç±»å±æ€§é‡æ–°æ˜¾ç°
del obj1.shared_value
print(obj1.shared_value)    # ç±»å±æ€§è¢«ä¿®æ”¹äº†ï¼ˆé‡æ–°è®¿é—®åˆ°ç±»å±æ€§ï¼‰
```

### 3.3 ç±»å±æ€§çš„å®é™…åº”ç”¨


**ğŸ“Š é…ç½®ç®¡ç†å’Œç»Ÿè®¡**
```python
class DatabaseConnection:
    # é…ç½®ç±»å±æ€§
    host = "localhost"
    port = 3306
    max_connections = 100
    
    # ç»Ÿè®¡ç±»å±æ€§
    active_connections = 0
    total_created = 0
    
    def __init__(self, database_name):
        self.database_name = database_name
        self.connection_id = DatabaseConnection.total_created + 1
        
        # æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        DatabaseConnection.total_created += 1
        DatabaseConnection.active_connections += 1
    
    def close(self):
        DatabaseConnection.active_connections -= 1
        print(f"è¿æ¥ {self.connection_id} å·²å…³é—­")
    
    @classmethod
    def get_statistics(cls):
        return {
            'active': cls.active_connections,
            'total_created': cls.total_created,
            'host': cls.host
        }

# ä½¿ç”¨ç¤ºä¾‹
db1 = DatabaseConnection("user_db")
db2 = DatabaseConnection("product_db")
db3 = DatabaseConnection("order_db")

print(DatabaseConnection.get_statistics())
# {'active': 3, 'total_created': 3, 'host': 'localhost'}

db1.close()
print(f"å½“å‰æ´»è·ƒè¿æ¥æ•°: {DatabaseConnection.active_connections}")  # 2
```

---

## 4. ğŸ”„ å±æ€§åŠ¨æ€ç®¡ç†


### 4.1 åŠ¨æ€æ·»åŠ å±æ€§


**ğŸ”¸ è¿è¡Œæ—¶æ·»åŠ å±æ€§**
```python
class FlexibleClass:
    def __init__(self, name):
        self.name = name

obj = FlexibleClass("æµ‹è¯•å¯¹è±¡")

# æ–¹å¼1ï¼šç›´æ¥èµ‹å€¼æ·»åŠ 
obj.new_attribute = "åŠ¨æ€æ·»åŠ çš„å±æ€§"
print(obj.new_attribute)    # åŠ¨æ€æ·»åŠ çš„å±æ€§

# æ–¹å¼2ï¼šä½¿ç”¨setattr()æ·»åŠ 
setattr(obj, 'another_attr', 42)
print(obj.another_attr)     # 42

# æ–¹å¼3ï¼šæ‰¹é‡æ·»åŠ å±æ€§
attributes = {
    'color': 'red',
    'size': 'large',
    'price': 99.9
}

for key, value in attributes.items():
    setattr(obj, key, value)

print(f"é¢œè‰²: {obj.color}, å°ºå¯¸: {obj.size}, ä»·æ ¼: {obj.price}")
```

### 4.2 åŠ¨æ€åˆ é™¤å±æ€§


**ğŸ—‘ï¸ åˆ é™¤å±æ€§çš„æ–¹æ³•**
```python
class Student:
    def __init__(self, name, age):
        self.name = name
        self.age = age
        self.grade = "æœªè®¾ç½®"

student = Student("å°æ˜", 18)

# æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨
print(hasattr(student, 'grade'))    # True

# æ–¹å¼1ï¼šä½¿ç”¨delè¯­å¥
del student.grade
print(hasattr(student, 'grade'))    # False

# æ–¹å¼2ï¼šä½¿ç”¨delattr()å‡½æ•°
student.temp_attr = "ä¸´æ—¶å±æ€§"
delattr(student, 'temp_attr')

# å®‰å…¨åˆ é™¤ï¼ˆå¦‚æœå±æ€§ä¸å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™ï¼‰
def safe_delete_attr(obj, attr_name):
    if hasattr(obj, attr_name):
        delattr(obj, attr_name)
        print(f"å±æ€§ {attr_name} å·²åˆ é™¤")
    else:
        print(f"å±æ€§ {attr_name} ä¸å­˜åœ¨")

safe_delete_attr(student, 'height')  # å±æ€§ height ä¸å­˜åœ¨
```

### 4.3 å±æ€§çš„æ‰¹é‡ç®¡ç†


**ğŸ”§ å®ç”¨çš„å±æ€§ç®¡ç†ç±»**
```python
class AttributeManager:
    def __init__(self):
        pass
    
    def set_attributes(self, **kwargs):
        """æ‰¹é‡è®¾ç½®å±æ€§"""
        for key, value in kwargs.items():
            setattr(self, key, value)
        return self
    
    def get_all_attributes(self):
        """è·å–æ‰€æœ‰å±æ€§"""
        return {key: value for key, value in self.__dict__.items() 
                if not key.startswith('_')}
    
    def copy_attributes_from(self, other_obj):
        """ä»å¦ä¸€ä¸ªå¯¹è±¡å¤åˆ¶å±æ€§"""
        for key, value in other_obj.__dict__.items():
            if not key.startswith('_'):
                setattr(self, key, value)
    
    def clear_attributes(self):
        """æ¸…é™¤æ‰€æœ‰è‡ªå®šä¹‰å±æ€§"""
        keys_to_delete = list(self.__dict__.keys())
        for key in keys_to_delete:
            if not key.startswith('_'):
                delattr(self, key)

# ä½¿ç”¨ç¤ºä¾‹
manager = AttributeManager()

# é“¾å¼è°ƒç”¨è®¾ç½®å±æ€§
manager.set_attributes(name="äº§å“A", price=100, category="ç”µå­")

print(manager.get_all_attributes())
# {'name': 'äº§å“A', 'price': 100, 'category': 'ç”µå­'}

# å¤åˆ¶å±æ€§
another_manager = AttributeManager()
another_manager.copy_attributes_from(manager)
print(another_manager.name)  # äº§å“A
```

---

## 5. ğŸ“– __dict__å±æ€§å­—å…¸


### 5.1 __dict__çš„åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯__dict__**
```
__dict__ æ˜¯Pythonå¯¹è±¡çš„å†…ç½®å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—å…¸
- å­˜å‚¨å¯¹è±¡çš„æ‰€æœ‰å®ä¾‹å±æ€§
- keyæ˜¯å±æ€§åï¼Œvalueæ˜¯å±æ€§å€¼
- å¯ä»¥ç›´æ¥æ“ä½œè¿™ä¸ªå­—å…¸æ¥ç®¡ç†å±æ€§

æŠŠ__dict__æƒ³è±¡æˆå¯¹è±¡çš„"æ¡£æ¡ˆè¢‹"ï¼Œé‡Œé¢è£…ç€æ‰€æœ‰ä¿¡æ¯
```

**ğŸ’¡ __dict__ç¤ºä¾‹**
```python
class Person:
    species = "äººç±»"  # ç±»å±æ€§ï¼Œä¸åœ¨å®ä¾‹çš„__dict__ä¸­
    
    def __init__(self, name, age):
        self.name = name
        self.age = age

person = Person("å¼ ä¸‰", 25)

# æŸ¥çœ‹å®ä¾‹çš„__dict__
print(person.__dict__)          # {'name': 'å¼ ä¸‰', 'age': 25}

# æ·»åŠ å±æ€§ä¼šè‡ªåŠ¨æ›´æ–°__dict__
person.job = "ç¨‹åºå‘˜"
print(person.__dict__)          # {'name': 'å¼ ä¸‰', 'age': 25, 'job': 'ç¨‹åºå‘˜'}

# æŸ¥çœ‹ç±»çš„__dict__ï¼ˆåŒ…å«ç±»å±æ€§å’Œæ–¹æ³•ï¼‰
print(Person.__dict__.keys())   # åŒ…å«speciesã€__init__ç­‰
```

### 5.2 é€šè¿‡__dict__æ“ä½œå±æ€§


**ğŸ”§ ç›´æ¥æ“ä½œå­—å…¸**
```python
class Product:
    def __init__(self, name, price):
        self.name = name
        self.price = price

product = Product("ç¬”è®°æœ¬", 5000)

# é€šè¿‡__dict__è®¿é—®å±æ€§
print(product.__dict__['name'])     # ç¬”è®°æœ¬

# é€šè¿‡__dict__ä¿®æ”¹å±æ€§
product.__dict__['price'] = 4500
print(product.price)                # 4500

# é€šè¿‡__dict__æ·»åŠ å±æ€§
product.__dict__['brand'] = "è”æƒ³"
print(product.brand)                # è”æƒ³

# æ‰¹é‡æ›´æ–°å±æ€§
new_attrs = {'color': 'é“¶è‰²', 'weight': '2.1kg'}
product.__dict__.update(new_attrs)
print(product.__dict__)
```

### 5.3 __dict__çš„å®é™…åº”ç”¨


**ğŸ“‹ å¯¹è±¡åºåˆ—åŒ–ä¸ååºåˆ—åŒ–**
```python
import json

class User:
    def __init__(self, username, email, age):
        self.username = username
        self.email = email
        self.age = age
        self.created_at = "2025-09-21"
    
    def to_dict(self):
        """è½¬æ¢ä¸ºå­—å…¸ï¼ˆç”¨äºåºåˆ—åŒ–ï¼‰"""
        return self.__dict__.copy()
    
    @classmethod
    def from_dict(cls, data):
        """ä»å­—å…¸åˆ›å»ºå¯¹è±¡ï¼ˆç”¨äºååºåˆ—åŒ–ï¼‰"""
        obj = cls.__new__(cls)  # åˆ›å»ºå¯¹è±¡ä½†ä¸è°ƒç”¨__init__
        obj.__dict__.update(data)
        return obj
    
    def to_json(self):
        """è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²"""
        return json.dumps(self.__dict__, ensure_ascii=False)
    
    @classmethod
    def from_json(cls, json_str):
        """ä»JSONå­—ç¬¦ä¸²åˆ›å»ºå¯¹è±¡"""
        data = json.loads(json_str)
        return cls.from_dict(data)

# ä½¿ç”¨ç¤ºä¾‹
user1 = User("å¼ ä¸‰", "zhangsan@qq.com", 28)

# åºåˆ—åŒ–
json_str = user1.to_json()
print(json_str)

# ååºåˆ—åŒ–
user2 = User.from_json(json_str)
print(f"æ¢å¤çš„ç”¨æˆ·: {user2.username}, {user2.email}")
```

**ğŸ” å¯¹è±¡è°ƒè¯•å’Œæ£€æŸ¥**
```python
def debug_object(obj):
    """è°ƒè¯•å¯¹è±¡çš„å±æ€§ä¿¡æ¯"""
    print(f"å¯¹è±¡ç±»å‹: {type(obj).__name__}")
    print(f"å±æ€§æ•°é‡: {len(obj.__dict__)}")
    print("å±æ€§åˆ—è¡¨:")
    
    for name, value in obj.__dict__.items():
        value_type = type(value).__name__
        print(f"  {name}: {value} ({value_type})")

class Example:
    def __init__(self):
        self.string_attr = "æ–‡æœ¬"
        self.number_attr = 42
        self.list_attr = [1, 2, 3]
        self.dict_attr = {'key': 'value'}

obj = Example()
debug_object(obj)
```

---

## 6. âš¡ __slots__å†…å­˜ä¼˜åŒ–


### 6.1 __slots__çš„æ¦‚å¿µå’Œä½œç”¨


**ğŸ”¸ ä»€ä¹ˆæ˜¯__slots__**
```
__slots__ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»å±æ€§ï¼Œç”¨äºé™åˆ¶å®ä¾‹å¯ä»¥æ‹¥æœ‰çš„å±æ€§
- èŠ‚çœå†…å­˜ï¼šä¸ä½¿ç”¨__dict__å­˜å‚¨å±æ€§
- æé«˜è®¿é—®é€Ÿåº¦ï¼šç›´æ¥é€šè¿‡ç´¢å¼•è®¿é—®
- é™åˆ¶å±æ€§ï¼šåªèƒ½æœ‰æŒ‡å®šçš„å±æ€§

æŠŠ__slots__æƒ³è±¡æˆ"é¢„å®šä¹‰çš„æ ¼å­"ï¼Œåªèƒ½æ”¾æŒ‡å®šçš„ä¸œè¥¿
```

**ğŸ’¾ å†…å­˜å¯¹æ¯”**
```
æ™®é€šç±»ï¼ˆä½¿ç”¨__dict__ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è±¡    â”‚â”€â”€â”€â†’â”‚ __dict__ å­—å…¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ {'name': '...'} â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨__slots__çš„ç±»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è±¡    â”‚ ç›´æ¥å­˜å‚¨å±æ€§å€¼
â”‚ name    â”‚ 
â”‚ age     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 __slots__çš„ä½¿ç”¨æ–¹æ³•


**ğŸ”§ åŸºæœ¬ç”¨æ³•**
```python
class OptimizedStudent:
    __slots__ = ['name', 'age', 'grade']  # åªå…è®¸è¿™äº›å±æ€§
    
    def __init__(self, name, age, grade):
        self.name = name
        self.age = age
        self.grade = grade

# æ­£å¸¸ä½¿ç”¨
student = OptimizedStudent("å°æ˜", 18, "é«˜ä¸‰")
print(student.name)     # å°æ˜

# ä¿®æ”¹å·²æœ‰å±æ€§
student.age = 19
print(student.age)      # 19

# å°è¯•æ·»åŠ æ–°å±æ€§ä¼šæŠ¥é”™
try:
    student.height = 175
except AttributeError as e:
    print(f"é”™è¯¯: {e}")  # 'OptimizedStudent' object has no attribute 'height'

# æ²¡æœ‰__dict__å±æ€§
print(hasattr(student, '__dict__'))  # False
```

### 6.3 __slots__çš„é™åˆ¶å’Œæ³¨æ„äº‹é¡¹


**âš ï¸ ä½¿ç”¨é™åˆ¶**
```python
class RestrictedClass:
    __slots__ = ['x', 'y']
    
    def __init__(self, x, y):
        self.x = x
        self.y = y

obj = RestrictedClass(10, 20)

# 1. æ— æ³•åŠ¨æ€æ·»åŠ å±æ€§
# obj.z = 30  # ä¼šæŠ¥é”™

# 2. æ— æ³•ä½¿ç”¨æŸäº›åŸºäº__dict__çš„åŠŸèƒ½
# print(obj.__dict__)  # ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰__dict__

# 3. æ— æ³•ä½¿ç”¨vars()å‡½æ•°
try:
    print(vars(obj))
except TypeError as e:
    print(f"vars()ä¸å¯ç”¨: {e}")

# 4. å¯ä»¥ä½¿ç”¨getattr, setattr, hasattr
print(hasattr(obj, 'x'))        # True
setattr(obj, 'y', 25)           # å¯ä»¥ä¿®æ”¹ç°æœ‰å±æ€§
print(getattr(obj, 'y'))        # 25
```

### 6.4 __slots__çš„å®é™…åº”ç”¨åœºæ™¯


**ğŸš€ æ€§èƒ½ä¼˜åŒ–åœºæ™¯**
```python
import sys
from typing import List

class Point2D_Normal:
    """æ™®é€šçš„ç‚¹ç±»"""
    def __init__(self, x: float, y: float):
        self.x = x
        self.y = y

class Point2D_Slots:
    """ä½¿ç”¨__slots__ä¼˜åŒ–çš„ç‚¹ç±»"""
    __slots__ = ['x', 'y']
    
    def __init__(self, x: float, y: float):
        self.x = x
        self.y = y

# åˆ›å»ºå¤§é‡å¯¹è±¡è¿›è¡Œæµ‹è¯•
def create_points(point_class, count=100000):
    points = []
    for i in range(count):
        points.append(point_class(i, i + 1))
    return points

# æ¯”è¾ƒå†…å­˜ä½¿ç”¨
normal_point = Point2D_Normal(1, 2)
slots_point = Point2D_Slots(1, 2)

print(f"æ™®é€šç‚¹å¯¹è±¡å¤§å°: {sys.getsizeof(normal_point) + sys.getsizeof(normal_point.__dict__)} bytes")
print(f"slotsç‚¹å¯¹è±¡å¤§å°: {sys.getsizeof(slots_point)} bytes")

# åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå½“ä½ éœ€è¦åˆ›å»ºå¤§é‡ç®€å•å¯¹è±¡æ—¶ï¼Œ__slots__å¾ˆæœ‰ç”¨
```

**ğŸ® æ¸¸æˆå¼€å‘ç¤ºä¾‹**
```python
class GameEntity:
    """æ¸¸æˆå®ä½“åŸºç±»ï¼ˆå†…å­˜æ•æ„Ÿï¼‰"""
    __slots__ = ['x', 'y', 'health', 'speed', 'entity_id']
    
    def __init__(self, x, y, health=100, speed=1.0):
        self.x = x
        self.y = y
        self.health = health
        self.speed = speed
        self.entity_id = id(self)
    
    def move(self, dx, dy):
        self.x += dx * self.speed
        self.y += dy * self.speed
    
    def take_damage(self, damage):
        self.health -= damage
        return self.health <= 0

# åœ¨æ¸¸æˆä¸­å¯èƒ½æœ‰æˆåƒä¸Šä¸‡ä¸ªå®ä½“ï¼Œä½¿ç”¨__slots__å¯ä»¥æ˜¾è‘—èŠ‚çœå†…å­˜
entities = [GameEntity(i % 100, i // 100) for i in range(10000)]
print(f"åˆ›å»ºäº† {len(entities)} ä¸ªæ¸¸æˆå®ä½“")
```

---

## 7. ğŸ›¡ï¸ å±æ€§è®¿é—®æ‹¦æˆª


### 7.1 é­”æ³•æ–¹æ³•æ¦‚è¿°


**ğŸ”¸ å±æ€§è®¿é—®çš„é­”æ³•æ–¹æ³•**
```
Pythonæä¾›äº†ç‰¹æ®Šæ–¹æ³•æ¥æ‹¦æˆªå±æ€§è®¿é—®ï¼š
- __getattr__: è·å–ä¸å­˜åœ¨çš„å±æ€§æ—¶è°ƒç”¨
- __setattr__: è®¾ç½®ä»»ä½•å±æ€§æ—¶è°ƒç”¨
- __delattr__: åˆ é™¤å±æ€§æ—¶è°ƒç”¨
- __getattribute__: è·å–ä»»ä½•å±æ€§æ—¶è°ƒç”¨ï¼ˆæœ€åº•å±‚ï¼‰

è¿™äº›æ–¹æ³•è®©ä½ å¯ä»¥"ç›‘å¬"å±æ€§çš„æ“ä½œ
```

### 7.2 __getattr__å’Œ__setattr__


**ğŸ”§ åŸºæœ¬æ‹¦æˆªç¤ºä¾‹**
```python
class SmartObject:
    def __init__(self):
        # æ³¨æ„ï¼šåœ¨__init__ä¸­è®¾ç½®å±æ€§ä¹Ÿä¼šè§¦å‘__setattr__
        self._data = {}
    
    def __getattr__(self, name):
        """å½“è®¿é—®ä¸å­˜åœ¨çš„å±æ€§æ—¶è°ƒç”¨"""
        print(f"å°è¯•è®¿é—®å±æ€§: {name}")
        if name in self._data:
            return self._data[name]
        return f"å±æ€§ {name} ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼"
    
    def __setattr__(self, name, value):
        """å½“è®¾ç½®ä»»ä½•å±æ€§æ—¶è°ƒç”¨"""
        print(f"è®¾ç½®å±æ€§: {name} = {value}")
        if name.startswith('_'):
            # å†…éƒ¨å±æ€§ç›´æ¥è®¾ç½®
            super().__setattr__(name, value)
        else:
            # å…¶ä»–å±æ€§å­˜å‚¨åœ¨_dataä¸­
            if not hasattr(self, '_data'):
                super().__setattr__('_data', {})
            self._data[name] = value
    
    def __delattr__(self, name):
        """å½“åˆ é™¤å±æ€§æ—¶è°ƒç”¨"""
        print(f"åˆ é™¤å±æ€§: {name}")
        if name in self._data:
            del self._data[name]
        else:
            super().__delattr__(name)

# ä½¿ç”¨ç¤ºä¾‹
obj = SmartObject()

# è®¾ç½®å±æ€§ï¼ˆè§¦å‘__setattr__ï¼‰
obj.name = "æµ‹è¯•å¯¹è±¡"       # è®¾ç½®å±æ€§: name = æµ‹è¯•å¯¹è±¡
obj.value = 42            # è®¾ç½®å±æ€§: value = 42

# è®¿é—®å­˜åœ¨çš„å±æ€§
print(obj.name)           # æµ‹è¯•å¯¹è±¡

# è®¿é—®ä¸å­˜åœ¨çš„å±æ€§ï¼ˆè§¦å‘__getattr__ï¼‰
print(obj.unknown)        # å°è¯•è®¿é—®å±æ€§: unknown
                          # å±æ€§ unknown ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼

# åˆ é™¤å±æ€§ï¼ˆè§¦å‘__delattr__ï¼‰
del obj.value             # åˆ é™¤å±æ€§: value
```

### 7.3 å®é™…åº”ç”¨ï¼šé…ç½®ç®¡ç†å™¨


**âš™ï¸ åŠ¨æ€é…ç½®ç±»**
```python
class ConfigManager:
    """æ™ºèƒ½é…ç½®ç®¡ç†å™¨"""
    
    def __init__(self):
        self._config = {}
        self._defaults = {
            'debug': False,
            'timeout': 30,
            'max_retries': 3
        }
        self._read_only = {'version', 'app_name'}
    
    def __getattr__(self, name):
        """è·å–é…ç½®é¡¹"""
        if name in self._config:
            return self._config[name]
        elif name in self._defaults:
            return self._defaults[name]
        else:
            raise AttributeError(f"é…ç½®é¡¹ '{name}' ä¸å­˜åœ¨")
    
    def __setattr__(self, name, value):
        """è®¾ç½®é…ç½®é¡¹"""
        # å†…éƒ¨å±æ€§æ­£å¸¸è®¾ç½®
        if name.startswith('_'):
            super().__setattr__(name, value)
            return
        
        # æ£€æŸ¥åªè¯»å±æ€§
        if hasattr(self, '_read_only') and name in self._read_only:
            raise AttributeError(f"é…ç½®é¡¹ '{name}' æ˜¯åªè¯»çš„")
        
        # ç±»å‹éªŒè¯
        if name == 'timeout' and not isinstance(value, (int, float)):
            raise TypeError("timeout å¿…é¡»æ˜¯æ•°å­—")
        if name == 'debug' and not isinstance(value, bool):
            raise TypeError("debug å¿…é¡»æ˜¯å¸ƒå°”å€¼")
        
        # è®¾ç½®é…ç½®
        if not hasattr(self, '_config'):
            super().__setattr__('_config', {})
        self._config[name] = value
        print(f"é…ç½®é¡¹ {name} å·²è®¾ç½®ä¸º {value}")
    
    def get_all_config(self):
        """è·å–æ‰€æœ‰é…ç½®"""
        result = self._defaults.copy()
        result.update(self._config)
        return result

# ä½¿ç”¨ç¤ºä¾‹
config = ConfigManager()

# è®¿é—®é»˜è®¤é…ç½®
print(config.debug)         # False
print(config.timeout)       # 30

# è®¾ç½®æ–°é…ç½®
config.database_url = "mysql://localhost:3306/mydb"
config.debug = True

# ç±»å‹éªŒè¯
try:
    config.timeout = "invalid"
except TypeError as e:
    print(f"é”™è¯¯: {e}")

# æŸ¥çœ‹æ‰€æœ‰é…ç½®
print(config.get_all_config())
```

### 7.4 é«˜çº§æ‹¦æˆªï¼šä»£ç†æ¨¡å¼


**ğŸ­ ä»£ç†å¯¹è±¡ç¤ºä¾‹**
```python
class LoggingProxy:
    """è®°å½•æ‰€æœ‰å±æ€§è®¿é—®çš„ä»£ç†å¯¹è±¡"""
    
    def __init__(self, target):
        # ä½¿ç”¨super().__setattr__é¿å…è§¦å‘è‡ªå·±çš„__setattr__
        super().__setattr__('_target', target)
        super().__setattr__('_access_log', [])
    
    def __getattribute__(self, name):
        """æ‹¦æˆªæ‰€æœ‰å±æ€§è®¿é—®"""
        # å†…éƒ¨å±æ€§ç›´æ¥è¿”å›
        if name.startswith('_'):
            return super().__getattribute__(name)
        
        # è®°å½•è®¿é—®æ—¥å¿—
        access_log = super().__getattribute__('_access_log')
        access_log.append(f"GET: {name}")
        
        # ä»ç›®æ ‡å¯¹è±¡è·å–å±æ€§
        target = super().__getattribute__('_target')
        return getattr(target, name)
    
    def __setattr__(self, name, value):
        """æ‹¦æˆªæ‰€æœ‰å±æ€§è®¾ç½®"""
        if name.startswith('_'):
            super().__setattr__(name, value)
            return
        
        self._access_log.append(f"SET: {name} = {value}")
        setattr(self._target, name, value)
    
    def get_access_log(self):
        """è·å–è®¿é—®æ—¥å¿—"""
        return self._access_log.copy()

class User:
    def __init__(self, name):
        self.name = name
        self.email = ""

# ä½¿ç”¨ä»£ç†
user = User("å¼ ä¸‰")
proxy = LoggingProxy(user)

# é€šè¿‡ä»£ç†æ“ä½œå¯¹è±¡
proxy.email = "zhangsan@qq.com"
print(proxy.name)
proxy.age = 25

# æŸ¥çœ‹è®¿é—®æ—¥å¿—
for log in proxy.get_access_log():
    print(log)
```

---

## 8. ğŸ’¾ å±æ€§è®¡ç®—ä¸ç¼“å­˜


### 8.1 è®¡ç®—å±æ€§çš„æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯è®¡ç®—å±æ€§**
```
è®¡ç®—å±æ€§ï¼šä¸ç›´æ¥å­˜å‚¨å€¼ï¼Œè€Œæ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°çš„å±æ€§
- æ ¹æ®å…¶ä»–å±æ€§è®¡ç®—å¾—å‡º
- å¯ä»¥ç¼“å­˜è®¡ç®—ç»“æœæé«˜æ€§èƒ½
- ç±»ä¼¼äºExcelä¸­çš„å…¬å¼å•å…ƒæ ¼

ä¾‹å¦‚ï¼šæ ¹æ®å‡ºç”Ÿæ—¥æœŸè®¡ç®—å¹´é¾„ï¼Œæ ¹æ®é•¿å®½è®¡ç®—é¢ç§¯
```

### 8.2 ä½¿ç”¨propertyè£…é¥°å™¨


**ğŸ”§ propertyåŸºæœ¬ç”¨æ³•**
```python
class Rectangle:
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    @property
    def area(self):
        """è®¡ç®—é¢ç§¯ï¼ˆåªè¯»å±æ€§ï¼‰"""
        print("æ­£åœ¨è®¡ç®—é¢ç§¯...")
        return self.width * self.height
    
    @property
    def perimeter(self):
        """è®¡ç®—å‘¨é•¿ï¼ˆåªè¯»å±æ€§ï¼‰"""
        return 2 * (self.width + self.height)
    
    @property
    def diagonal(self):
        """è®¡ç®—å¯¹è§’çº¿é•¿åº¦"""
        return (self.width ** 2 + self.height ** 2) ** 0.5

# ä½¿ç”¨ç¤ºä¾‹
rect = Rectangle(5, 3)

# åƒè®¿é—®æ™®é€šå±æ€§ä¸€æ ·è®¿é—®è®¡ç®—å±æ€§
print(f"é¢ç§¯: {rect.area}")        # æ­£åœ¨è®¡ç®—é¢ç§¯... é¢ç§¯: 15
print(f"å‘¨é•¿: {rect.perimeter}")   # å‘¨é•¿: 16
print(f"å¯¹è§’çº¿: {rect.diagonal:.2f}")  # å¯¹è§’çº¿: 5.83

# ä¿®æ”¹åŸºç¡€å±æ€§ï¼Œè®¡ç®—å±æ€§ä¼šè‡ªåŠ¨æ›´æ–°
rect.width = 10
print(f"æ–°é¢ç§¯: {rect.area}")      # æ­£åœ¨è®¡ç®—é¢ç§¯... æ–°é¢ç§¯: 30
```

### 8.3 å¯è¯»å†™çš„è®¡ç®—å±æ€§


**âš™ï¸ getterå’Œsetter**
```python
import datetime

class Person:
    def __init__(self, name, birth_year):
        self.name = name
        self._birth_year = birth_year
    
    @property
    def age(self):
        """æ ¹æ®å‡ºç”Ÿå¹´ä»½è®¡ç®—å¹´é¾„"""
        current_year = datetime.datetime.now().year
        return current_year - self._birth_year
    
    @age.setter
    def age(self, value):
        """é€šè¿‡å¹´é¾„åæ¨å‡ºç”Ÿå¹´ä»½"""
        if value < 0 or value > 150:
            raise ValueError("å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´")
        current_year = datetime.datetime.now().year
        self._birth_year = current_year - value
    
    @property
    def birth_year(self):
        """å‡ºç”Ÿå¹´ä»½ï¼ˆåªè¯»ï¼‰"""
        return self._birth_year
    
    @property
    def generation(self):
        """æ ¹æ®å‡ºç”Ÿå¹´ä»½åˆ¤æ–­ä¸–ä»£"""
        if self._birth_year >= 1997:
            return "Zä¸–ä»£"
        elif self._birth_year >= 1981:
            return "åƒç¦§ä¸€ä»£"
        elif self._birth_year >= 1965:
            return "Xä¸–ä»£"
        else:
            return "å©´å„¿æ½®ä¸€ä»£"

# ä½¿ç”¨ç¤ºä¾‹
person = Person("å°æ˜", 1995)

print(f"å¹´é¾„: {person.age}")           # å¹´é¾„: 30ï¼ˆå‡è®¾ç°åœ¨æ˜¯2025å¹´ï¼‰
print(f"ä¸–ä»£: {person.generation}")    # ä¸–ä»£: åƒç¦§ä¸€ä»£

# é€šè¿‡setterä¿®æ”¹å¹´é¾„
person.age = 25
print(f"ä¿®æ”¹åå‡ºç”Ÿå¹´ä»½: {person.birth_year}")  # 2000

# å°è¯•è®¾ç½®æ— æ•ˆå¹´é¾„
try:
    person.age = -5
except ValueError as e:
    print(f"é”™è¯¯: {e}")
```

### 8.4 å±æ€§ç¼“å­˜æœºåˆ¶


**ğŸš€ ç¼“å­˜æé«˜æ€§èƒ½**
```python
import time
import functools

class ExpensiveCalculation:
    def __init__(self, data):
        self.data = data
        self._cache = {}
    
    @property
    def expensive_result(self):
        """æ˜‚è´µçš„è®¡ç®—ï¼ˆæ¯æ¬¡éƒ½é‡æ–°è®¡ç®—ï¼‰"""
        print("æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—...")
        time.sleep(0.1)  # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
        return sum(x ** 2 for x in self.data)
    
    @property
    def cached_result(self):
        """å¸¦ç¼“å­˜çš„è®¡ç®—"""
        if 'cached_result' not in self._cache:
            print("é¦–æ¬¡è®¡ç®—ï¼Œç¼“å­˜ç»“æœ...")
            time.sleep(0.1)  # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
            self._cache['cached_result'] = sum(x ** 2 for x in self.data)
        else:
            print("ä½¿ç”¨ç¼“å­˜ç»“æœ")
        return self._cache['cached_result']
    
    def clear_cache(self):
        """æ¸…é™¤ç¼“å­˜"""
        self._cache.clear()
        print("ç¼“å­˜å·²æ¸…é™¤")

# ä½¿ç”¨functools.cached_propertyï¼ˆPython 3.8+ï¼‰
class ModernCaching:
    def __init__(self, data):
        self.data = data
    
    @functools.cached_property
    def expensive_calculation(self):
        """ä½¿ç”¨æ ‡å‡†åº“çš„ç¼“å­˜å±æ€§"""
        print("æ‰§è¡Œè®¡ç®—å¹¶ç¼“å­˜...")
        time.sleep(0.1)
        return sum(x ** 3 for x in self.data)

# æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹
calc = ExpensiveCalculation([1, 2, 3, 4, 5])

# æ— ç¼“å­˜ï¼šæ¯æ¬¡éƒ½é‡æ–°è®¡ç®—
start = time.time()
result1 = calc.expensive_result  # æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—...
result2 = calc.expensive_result  # æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—...
print(f"æ— ç¼“å­˜è€—æ—¶: {time.time() - start:.2f}ç§’")

# æœ‰ç¼“å­˜ï¼šåªè®¡ç®—ä¸€æ¬¡
start = time.time()
result3 = calc.cached_result     # é¦–æ¬¡è®¡ç®—ï¼Œç¼“å­˜ç»“æœ...
result4 = calc.cached_result     # ä½¿ç”¨ç¼“å­˜ç»“æœ
print(f"æœ‰ç¼“å­˜è€—æ—¶: {time.time() - start:.2f}ç§’")
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å±æ€§ç±»å‹å¯¹æ¯”è¡¨


| å±æ€§ç±»å‹ | **å­˜å‚¨ä½ç½®** | **å…±äº«æ€§** | **å†…å­˜å ç”¨** | **è®¿é—®é€Ÿåº¦** |
|---------|-------------|-----------|-------------|-------------|
| **å®ä¾‹å±æ€§** | `å¯¹è±¡.__dict__` | `æ¯ä¸ªå¯¹è±¡ç‹¬æœ‰` | `è¾ƒé«˜` | `è¾ƒå¿«` |
| **ç±»å±æ€§** | `ç±».__dict__` | `æ‰€æœ‰å¯¹è±¡å…±äº«` | `ä½` | `å¿«` |
| **__slots__å±æ€§** | `å¯¹è±¡å†…éƒ¨` | `æ¯ä¸ªå¯¹è±¡ç‹¬æœ‰` | `æœ€ä½` | `æœ€å¿«` |
| **è®¡ç®—å±æ€§** | `åŠ¨æ€è®¡ç®—` | `æ¯ä¸ªå¯¹è±¡ç‹¬æœ‰` | `æ— å­˜å‚¨` | `å–å†³äºè®¡ç®—` |

### 9.2 å±æ€§è®¿é—®æœºåˆ¶


**ğŸ” å±æ€§æŸ¥æ‰¾é¡ºåº**
```
è®¿é—® obj.attr æ—¶çš„æŸ¥æ‰¾é¡ºåºï¼š
1. è°ƒç”¨ __getattribute__ï¼ˆå¦‚æœæœ‰é‡å†™ï¼‰
2. åœ¨ obj.__dict__ ä¸­æŸ¥æ‰¾å®ä¾‹å±æ€§
3. åœ¨ type(obj).__dict__ ä¸­æŸ¥æ‰¾ç±»å±æ€§
4. åœ¨çˆ¶ç±»ä¸­æŸ¥æ‰¾ï¼ˆæŒ‰MROé¡ºåºï¼‰
5. è°ƒç”¨ __getattr__ï¼ˆå¦‚æœå‰é¢éƒ½æ²¡æ‰¾åˆ°ï¼‰
6. æŠ›å‡º AttributeError å¼‚å¸¸
```

### 9.3 é€‰æ‹©æŒ‡å—


**ğŸ¯ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ä»€ä¹ˆ**

```
å®ä¾‹å±æ€§ï¼š
âœ… æ¯ä¸ªå¯¹è±¡éœ€è¦ä¸åŒçš„å€¼
âœ… æ•°æ®ä¼šå‘ç”Ÿå˜åŒ–
âœ… å¯¹è±¡çŠ¶æ€çš„åŸºç¡€

ç±»å±æ€§ï¼š
âœ… æ‰€æœ‰å¯¹è±¡å…±äº«ç›¸åŒçš„å€¼
âœ… é…ç½®ä¿¡æ¯å’Œå¸¸é‡
âœ… ç»Ÿè®¡ä¿¡æ¯

__slots__ï¼š
âœ… éœ€è¦åˆ›å»ºå¤§é‡ç®€å•å¯¹è±¡
âœ… å†…å­˜ä½¿ç”¨æ˜¯å…³é”®å› ç´ 
âœ… å±æ€§å›ºå®šä¸”è¾ƒå°‘

è®¡ç®—å±æ€§ï¼š
âœ… å€¼éœ€è¦æ ¹æ®å…¶ä»–å±æ€§è®¡ç®—
âœ… å¸Œæœ›åƒå±æ€§ä¸€æ ·è®¿é—®æ–¹æ³•
âœ… éœ€è¦æ§åˆ¶å±æ€§çš„è¯»å†™
```

### 9.4 æœ€ä½³å®è·µ


**âœ… æ¨èåšæ³•**
- ä¼˜å…ˆä½¿ç”¨å®ä¾‹å±æ€§å­˜å‚¨å¯¹è±¡çŠ¶æ€
- ç”¨ç±»å±æ€§å­˜å‚¨å…±äº«çš„é…ç½®å’Œå¸¸é‡
- åœ¨éœ€è¦å¤§é‡å¯¹è±¡æ—¶è€ƒè™‘ä½¿ç”¨ `__slots__`
- ç”¨ `property` åˆ›å»ºè®¡ç®—å±æ€§å’Œæ§åˆ¶è®¿é—®
- åˆç†ä½¿ç”¨å±æ€§æ‹¦æˆªï¼Œé¿å…è¿‡åº¦å¤æ‚åŒ–

**âš ï¸ æ³¨æ„äº‹é¡¹**
- `__slots__` ä¼šç¦ç”¨ `__dict__`ï¼ŒæŸäº›åŠŸèƒ½ä¸å¯ç”¨
- å±æ€§æ‹¦æˆªæ–¹æ³•è¦å°å¿ƒé¿å…æ— é™é€’å½’
- ç¼“å­˜è®¡ç®—å±æ€§æ—¶è¦æ³¨æ„å†…å­˜æ³„æ¼
- åŠ¨æ€æ·»åŠ å±æ€§è¦è€ƒè™‘ä»£ç çš„å¯ç»´æŠ¤æ€§

### 9.5 è°ƒè¯•æŠ€å·§


**ğŸ”§ å¸¸ç”¨è°ƒè¯•æ–¹æ³•**
```python
# æŸ¥çœ‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§
def inspect_object(obj):
    print(f"ç±»å‹: {type(obj).__name__}")
    
    # å®ä¾‹å±æ€§
    if hasattr(obj, '__dict__'):
        print(f"å®ä¾‹å±æ€§: {list(obj.__dict__.keys())}")
    
    # ç±»å±æ€§
    class_attrs = [attr for attr in dir(type(obj)) 
                   if not attr.startswith('__')]
    print(f"ç±»å±æ€§/æ–¹æ³•: {class_attrs}")
    
    # __slots__
    if hasattr(type(obj), '__slots__'):
        print(f"__slots__: {type(obj).__slots__}")

# ä½¿ç”¨ç¤ºä¾‹
class Example:
    class_attr = "å…±äº«å€¼"
    __slots__ = ['name', 'value']
    
    def __init__(self, name):
        self.name = name

obj = Example("æµ‹è¯•")
inspect_object(obj)
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- å±æ€§æ˜¯å¯¹è±¡çš„æ•°æ®ï¼Œæ–¹æ³•æ˜¯å¯¹è±¡çš„è¡Œä¸º
- å®ä¾‹å±æ€§æ¯å¯¹è±¡ç‹¬æœ‰ï¼Œç±»å±æ€§å…¨ä½“å…±äº«
- `__dict__` æ˜¯å±æ€§çš„å­˜å‚¨ä»“åº“ï¼Œ`__slots__` æ˜¯å†…å­˜ä¼˜åŒ–å·¥å…·
- è®¡ç®—å±æ€§è®©æ–¹æ³•åƒå±æ€§ä¸€æ ·ä½¿ç”¨
- å±æ€§æ‹¦æˆªæä¾›äº†å¼ºå¤§çš„æ§åˆ¶èƒ½åŠ›