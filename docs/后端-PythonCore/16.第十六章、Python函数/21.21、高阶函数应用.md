---
title: 21ã€é«˜é˜¶å‡½æ•°åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [lambdaåŒ¿åå‡½æ•°è¯¦è§£](#1-lambdaåŒ¿åå‡½æ•°è¯¦è§£)
2. [mapæ˜ å°„åº”ç”¨](#2-mapæ˜ å°„åº”ç”¨)
3. [filterè¿‡æ»¤åº”ç”¨](#3-filterè¿‡æ»¤åº”ç”¨)
4. [reduceå½’çº¦æ“ä½œ](#4-reduceå½’çº¦æ“ä½œ)
5. [partialåå‡½æ•°](#5-partialåå‡½æ•°)
6. [é«˜é˜¶å‡½æ•°ç»¼åˆåº”ç”¨](#6-é«˜é˜¶å‡½æ•°ç»¼åˆåº”ç”¨)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ lambdaåŒ¿åå‡½æ•°è¯¦è§£


### 1.1 ä»€ä¹ˆæ˜¯lambdaå‡½æ•°

ğŸ”¸ **ç®€å•ç†è§£**ï¼šlambdaå°±åƒæ•°å­¦ä¸­çš„ä¸´æ—¶å…¬å¼ï¼Œç”¨å®Œå°±æ‰”

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
æ­£å¼å‡½æ•° = å…¬å¸é‡Œçš„æ­£å¼å‘˜å·¥ï¼ˆæœ‰åå­—ï¼Œé•¿æœŸå·¥ä½œï¼‰
lambdaå‡½æ•° = ä¸´æ—¶å·¥ï¼ˆæ²¡åå­—ï¼Œå¹²å®Œæ´»å°±èµ°ï¼‰

ä½¿ç”¨åœºæ™¯ï¼š
éœ€è¦ä¸€ä¸ªç®€å•åŠŸèƒ½ï¼Œä½†ä¸æƒ³ä¸“é—¨å®šä¹‰å‡½æ•°
```

**åŸºæœ¬è¯­æ³•å¯¹æ¯”**
```python
# ä¼ ç»Ÿå‡½æ•°å®šä¹‰
def add_two(x):
    return x + 2

# lambdaç­‰ä»·å†™æ³•
add_two = lambda x: x + 2

# ä½¿ç”¨æ–¹å¼å®Œå…¨ç›¸åŒ
result = add_two(5)  # ç»“æœéƒ½æ˜¯7
```

### 1.2 lambdaçš„ä½¿ç”¨åœºæ™¯

**ğŸ¯ æœ€é€‚åˆlambdaçš„ä¸‰ç§æƒ…å†µ**

**æƒ…å†µ1ï¼šç®€å•çš„æ•°å­¦è¿ç®—**
```python
# è®¡ç®—å¹³æ–¹
square = lambda x: x ** 2
print(square(4))  # è¾“å‡ºï¼š16

# è®¡ç®—ä¸¤æ•°ä¹‹å’Œ
add = lambda a, b: a + b
print(add(3, 5))  # è¾“å‡ºï¼š8

# åˆ¤æ–­å¥‡å¶
is_even = lambda x: x % 2 == 0
print(is_even(6))  # è¾“å‡ºï¼šTrue
```

**æƒ…å†µ2ï¼šé…åˆå…¶ä»–å‡½æ•°ä½¿ç”¨**
```python
numbers = [1, 2, 3, 4, 5]

# é…åˆmapä½¿ç”¨
squared = list(map(lambda x: x**2, numbers))
print(squared)  # [1, 4, 9, 16, 25]

# é…åˆfilterä½¿ç”¨
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(evens)  # [2, 4]
```

**æƒ…å†µ3ï¼šäº‹ä»¶å¤„ç†å’Œå›è°ƒ**
```python
# æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆç¤ºæ„ï¼‰
button.on_click(lambda: print("æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼"))

# æ’åºçš„è‡ªå®šä¹‰è§„åˆ™
students = [('å¼ ä¸‰', 85), ('æå››', 92), ('ç‹äº”', 78)]
# æŒ‰æˆç»©æ’åº
sorted_students = sorted(students, key=lambda x: x[1])
print(sorted_students)  # [('ç‹äº”', 78), ('å¼ ä¸‰', 85), ('æå››', 92)]
```

### 1.3 lambdaçš„é™åˆ¶ä¸æ³¨æ„äº‹é¡¹

**âš ï¸ lambdaä¸èƒ½åšä»€ä¹ˆ**

```python
# âŒ ä¸èƒ½åŒ…å«printè¯­å¥
# wrong = lambda x: print(x)  # è¯­æ³•é”™è¯¯

# âŒ ä¸èƒ½æœ‰å¤šè¡Œä»£ç 
# wrong = lambda x: 
#     result = x * 2
#     return result

# âŒ ä¸èƒ½åŒ…å«èµ‹å€¼è¯­å¥
# wrong = lambda x: y = x + 1  # è¯­æ³•é”™è¯¯

# âœ… æ­£ç¡®çš„å†™æ³•éƒ½æ˜¯å•è¡¨è¾¾å¼
correct = lambda x: x * 2 if x > 0 else 0
```

**ğŸ”¸ ä»€ä¹ˆæ—¶å€™ä¸ç”¨lambda**
```
ä»£ç è¶…è¿‡ä¸€è¡Œï¼šæ”¹ç”¨defå‡½æ•°
éœ€è¦æ–‡æ¡£è¯´æ˜ï¼šç”¨defåŠ æ³¨é‡Š
é€»è¾‘å¤æ‚ï¼šç”¨defä¾¿äºè°ƒè¯•
ä¼šé‡å¤ä½¿ç”¨ï¼šç”¨defä¾¿äºç»´æŠ¤
```

---

## 2. ğŸ—ºï¸ mapæ˜ å°„åº”ç”¨


### 2.1 mapå‡½æ•°çš„å·¥ä½œåŸç†

ğŸ¯ **ç®€å•ç†è§£**ï¼šmapå°±åƒæµæ°´çº¿å·¥äººï¼Œç»™æ¯ä¸ªäº§å“åšåŒæ ·çš„å¤„ç†

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
æœ‰ä¸€å †è‹¹æœ [è‹¹æœ1, è‹¹æœ2, è‹¹æœ3]
mapå°±æ˜¯ï¼šç»™æ¯ä¸ªè‹¹æœéƒ½å‰Šçš®
ç»“æœï¼š[å‰Šå¥½çš„è‹¹æœ1, å‰Šå¥½çš„è‹¹æœ2, å‰Šå¥½çš„è‹¹æœ3]

ç¼–ç¨‹ä¸­ï¼š
æœ‰ä¸€å †æ•°å­— [1, 2, 3]
mapå¤„ç†ï¼šç»™æ¯ä¸ªæ•°å­—éƒ½å¹³æ–¹
ç»“æœï¼š[1, 4, 9]
```

### 2.2 mapçš„åŸºç¡€åº”ç”¨

**ğŸ”¸ æ•°å€¼è½¬æ¢åº”ç”¨**

```python
# åŸºæœ¬ç”¨æ³•ï¼šæ•°å­—å¹³æ–¹
numbers = [1, 2, 3, 4, 5]
squares = list(map(lambda x: x**2, numbers))
print(f"åŸæ•°å­—: {numbers}")
print(f"å¹³æ–¹å: {squares}")

# å­—ç¬¦ä¸²å¤„ç†
names = ['alice', 'bob', 'charlie']
capitalized = list(map(str.upper, names))
print(f"åŸåå­—: {names}")
print(f"å¤§å†™å: {capitalized}")

# ç±»å‹è½¬æ¢
str_numbers = ['1', '2', '3', '4']
int_numbers = list(map(int, str_numbers))
print(f"å­—ç¬¦ä¸²: {str_numbers}")
print(f"æ•´æ•°: {int_numbers}")
```

**ğŸ“Š å®ç”¨æ•°æ®å¤„ç†ç¤ºä¾‹**
```python
# å¤„ç†å­¦ç”Ÿæˆç»©
scores = [78, 85, 92, 67, 88]

# ç»™æ¯ä¸ªæˆç»©åŠ 5åˆ†
bonus_scores = list(map(lambda x: x + 5, scores))
print(f"åŠ åˆ†å: {bonus_scores}")

# è½¬æ¢ä¸ºç­‰çº§
def score_to_grade(score):
    if score >= 90: return 'A'
    elif score >= 80: return 'B'
    elif score >= 70: return 'C'
    else: return 'D'

grades = list(map(score_to_grade, scores))
print(f"æˆç»©ç­‰çº§: {grades}")
```

### 2.3 mapçš„é«˜çº§åº”ç”¨

**ğŸ”§ å¤šä¸ªå‚æ•°çš„map**

```python
# å¤„ç†ä¸¤ä¸ªåˆ—è¡¨
numbers1 = [1, 2, 3, 4]
numbers2 = [5, 6, 7, 8]

# å¯¹åº”ç›¸åŠ 
sums = list(map(lambda x, y: x + y, numbers1, numbers2))
print(f"ç›¸åŠ ç»“æœ: {sums}")  # [6, 8, 10, 12]

# å¤„ç†å­—å…¸æ•°æ®
students = [
    {'name': 'å¼ ä¸‰', 'chinese': 85, 'math': 90},
    {'name': 'æå››', 'chinese': 78, 'math': 95},
    {'name': 'ç‹äº”', 'chinese': 92, 'math': 88}
]

# è®¡ç®—æ€»åˆ†
totals = list(map(lambda s: s['chinese'] + s['math'], students))
print(f"æ€»åˆ†: {totals}")  # [175, 173, 180]

# æå–å§“å
names = list(map(lambda s: s['name'], students))
print(f"å§“å: {names}")  # ['å¼ ä¸‰', 'æå››', 'ç‹äº”']
```

---

## 3. ğŸ” filterè¿‡æ»¤åº”ç”¨


### 3.1 filterå‡½æ•°çš„å·¥ä½œåŸç†

ğŸ¯ **ç®€å•ç†è§£**ï¼šfilterå°±åƒç­›å­ï¼Œåªè®©ç¬¦åˆæ¡ä»¶çš„ä¸œè¥¿é€šè¿‡

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
æœ‰ä¸€å †æ°´æœ [è‹¹æœ, é¦™è•‰, çƒ‚è‹¹æœ, å¥½é¦™è•‰]
filterå°±æ˜¯ï¼šåªè¦æ–°é²œçš„æ°´æœ
ç»“æœï¼š[è‹¹æœ, é¦™è•‰, å¥½é¦™è•‰]

ç¼–ç¨‹ä¸­ï¼š
æœ‰ä¸€å †æ•°å­— [1, 2, 3, 4, 5, 6]
filteræ¡ä»¶ï¼šåªè¦å¶æ•°
ç»“æœï¼š[2, 4, 6]
```

### 3.2 filterçš„åŸºç¡€åº”ç”¨

**ğŸ”¸ æ•°å€¼ç­›é€‰**

```python
# ç­›é€‰å¶æ•°
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(f"å¶æ•°: {evens}")  # [2, 4, 6, 8, 10]

# ç­›é€‰å¤§äº5çš„æ•°
big_numbers = list(filter(lambda x: x > 5, numbers))
print(f"å¤§äº5: {big_numbers}")  # [6, 7, 8, 9, 10]

# ç­›é€‰æ­£æ•°
mixed_numbers = [-3, -1, 0, 2, 5, -2, 8]
positives = list(filter(lambda x: x > 0, mixed_numbers))
print(f"æ­£æ•°: {positives}")  # [2, 5, 8]
```

**ğŸ“ å­—ç¬¦ä¸²ç­›é€‰**
```python
# ç­›é€‰é•¿å•è¯
words = ['cat', 'elephant', 'dog', 'hippopotamus', 'bird']
long_words = list(filter(lambda w: len(w) > 4, words))
print(f"é•¿å•è¯: {long_words}")  # ['elephant', 'hippopotamus']

# ç­›é€‰åŒ…å«ç‰¹å®šå­—æ¯çš„å•è¯
a_words = list(filter(lambda w: 'a' in w, words))
print(f"åŒ…å«açš„å•è¯: {a_words}")  # ['cat', 'elephant']

# ç­›é€‰éç©ºå­—ç¬¦ä¸²
strings = ['hello', '', 'world', '   ', 'python', '']
non_empty = list(filter(lambda s: s.strip(), strings))
print(f"éç©ºå­—ç¬¦ä¸²: {non_empty}")  # ['hello', 'world', 'python']
```

### 3.3 filterçš„å®ç”¨åœºæ™¯

**ğŸ“Š å®é™…æ•°æ®ç­›é€‰**

```python
# å­¦ç”Ÿæˆç»©ç­›é€‰
students = [
    {'name': 'å¼ ä¸‰', 'age': 20, 'score': 85},
    {'name': 'æå››', 'age': 19, 'score': 92},
    {'name': 'ç‹äº”', 'age': 21, 'score': 67},
    {'name': 'èµµå…­', 'age': 20, 'score': 78}
]

# ç­›é€‰åŠæ ¼å­¦ç”Ÿ
passed = list(filter(lambda s: s['score'] >= 70, students))
print("åŠæ ¼å­¦ç”Ÿ:")
for student in passed:
    print(f"  {student['name']}: {student['score']}åˆ†")

# ç­›é€‰æˆå¹´å­¦ç”Ÿ
adults = list(filter(lambda s: s['age'] >= 20, students))
print(f"\n20å²åŠä»¥ä¸Šå­¦ç”Ÿ: {[s['name'] for s in adults]}")

# ç»„åˆæ¡ä»¶ï¼šå¹´é¾„20å²ä¸”æˆç»©ä¼˜ç§€
excellent_adults = list(filter(
    lambda s: s['age'] >= 20 and s['score'] >= 85, 
    students
))
print(f"ä¼˜ç§€æˆå¹´å­¦ç”Ÿ: {[s['name'] for s in excellent_adults]}")
```

---

## 4. â¬‡ï¸ reduceå½’çº¦æ“ä½œ


### 4.1 reduceå‡½æ•°çš„å·¥ä½œåŸç†

ğŸ¯ **ç®€å•ç†è§£**ï¼šreduceå°±åƒå¤šç±³è¯ºéª¨ç‰Œï¼Œä¸€ä¸ªç»“æœå½±å“ä¸‹ä¸€ä¸ª

```python
from functools import reduce

# ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
# æœ‰ä¸€ä¸²æ•°å­— [1, 2, 3, 4]
# reduceæ±‚å’Œè¿‡ç¨‹ï¼š
# æ­¥éª¤1: 1 + 2 = 3
# æ­¥éª¤2: 3 + 3 = 6  
# æ­¥éª¤3: 6 + 4 = 10
# æœ€ç»ˆç»“æœ: 10
```

**ğŸ”¸ reduceçš„æ‰§è¡Œè¿‡ç¨‹**
```python
numbers = [1, 2, 3, 4, 5]

# æ‰‹åŠ¨æ¨¡æ‹Ÿreduceè¿‡ç¨‹
def manual_reduce():
    result = numbers[0]  # ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹
    for i in range(1, len(numbers)):
        result = result + numbers[i]
        print(f"æ­¥éª¤{i}: {result}")
    return result

print("æ‰‹åŠ¨reduceè¿‡ç¨‹:")
manual_result = manual_reduce()

# ä½¿ç”¨reduceå‡½æ•°
reduce_result = reduce(lambda x, y: x + y, numbers)
print(f"reduceç»“æœ: {reduce_result}")
```

### 4.2 reduceçš„å¸¸ç”¨æ“ä½œ

**ğŸ”¢ æ•°å­¦è¿ç®—**

```python
from functools import reduce

numbers = [1, 2, 3, 4, 5]

# æ±‚å’Œ
sum_result = reduce(lambda x, y: x + y, numbers)
print(f"æ±‚å’Œ: {sum_result}")  # 15

# æ±‚ç§¯
product_result = reduce(lambda x, y: x * y, numbers)
print(f"æ±‚ç§¯: {product_result}")  # 120

# æ±‚æœ€å¤§å€¼
max_result = reduce(lambda x, y: x if x > y else y, numbers)
print(f"æœ€å¤§å€¼: {max_result}")  # 5

# æ±‚æœ€å°å€¼
min_result = reduce(lambda x, y: x if x < y else y, numbers)
print(f"æœ€å°å€¼: {min_result}")  # 1
```

**ğŸ“ å­—ç¬¦ä¸²æ“ä½œ**
```python
# è¿æ¥å­—ç¬¦ä¸²
words = ['Python', 'æ˜¯', 'ä¸€é—¨', 'ç¼–ç¨‹', 'è¯­è¨€']
sentence = reduce(lambda x, y: x + y, words)
print(f"è¿æ¥ç»“æœ: {sentence}")  # Pythonæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€

# å¸¦åˆ†éš”ç¬¦è¿æ¥
sentence_with_space = reduce(lambda x, y: x + ' ' + y, words)
print(f"å¸¦ç©ºæ ¼: {sentence_with_space}")  # Python æ˜¯ ä¸€é—¨ ç¼–ç¨‹ è¯­è¨€

# æŸ¥æ‰¾æœ€é•¿çš„å•è¯
words_en = ['cat', 'elephant', 'dog', 'hippopotamus']
longest = reduce(lambda x, y: x if len(x) > len(y) else y, words_en)
print(f"æœ€é•¿å•è¯: {longest}")  # hippopotamus
```

### 4.3 reduceçš„é«˜çº§åº”ç”¨

**ğŸ“Š å¤æ‚æ•°æ®å¤„ç†**

```python
# ç»Ÿè®¡è¯é¢‘
texts = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple']

def count_words(counter, word):
    counter[word] = counter.get(word, 0) + 1
    return counter

word_count = reduce(count_words, texts, {})
print(f"è¯é¢‘ç»Ÿè®¡: {word_count}")

# è®¡ç®—å­¦ç”Ÿæ€»åˆ†
students_scores = [
    {'name': 'å¼ ä¸‰', 'score': 85},
    {'name': 'æå››', 'score': 92},
    {'name': 'ç‹äº”', 'score': 78}
]

total_score = reduce(lambda total, student: total + student['score'], 
                    students_scores, 0)
print(f"æ€»åˆ†: {total_score}")

# åµŒå¥—åˆ—è¡¨æ‰å¹³åŒ–
nested_list = [[1, 2], [3, 4], [5, 6]]
flattened = reduce(lambda x, y: x + y, nested_list)
print(f"æ‰å¹³åŒ–: {flattened}")  # [1, 2, 3, 4, 5, 6]
```

---

## 5. ğŸ”§ partialåå‡½æ•°


### 5.1 ä»€ä¹ˆæ˜¯åå‡½æ•°

ğŸ¯ **ç®€å•ç†è§£**ï¼špartialå°±åƒé¢„è®¾æŒ‰é’®ï¼Œæå‰è®¾å¥½ä¸€äº›å‚æ•°

```python
from functools import partial

# ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
# å’–å•¡æœºæœ‰ä¸‰ä¸ªæŒ‰é’®ï¼šç³–é‡ã€å¥¶é‡ã€å’–å•¡æµ“åº¦
# partialå°±æ˜¯é¢„è®¾ä¸€ä¸ª"æˆ‘çš„å’–å•¡"æŒ‰é’®
# ç³–é‡=2ï¼Œå¥¶é‡=1ï¼Œåªéœ€è¦é€‰æ‹©å’–å•¡æµ“åº¦
```

**ğŸ”¸ åŸºæœ¬æ¦‚å¿µæ¼”ç¤º**
```python
# åŸå§‹å‡½æ•°ï¼šè®¡ç®—å¹‚æ¬¡
def power(base, exponent):
    return base ** exponent

# åˆ›å»ºåå‡½æ•°ï¼šä¸“é—¨è®¡ç®—å¹³æ–¹
square = partial(power, exponent=2)
print(f"5çš„å¹³æ–¹: {square(5)}")  # 25

# åˆ›å»ºåå‡½æ•°ï¼šä¸“é—¨è®¡ç®—ç«‹æ–¹
cube = partial(power, exponent=3)
print(f"3çš„ç«‹æ–¹: {cube(3)}")  # 27

# åˆ›å»ºåå‡½æ•°ï¼šä»¥2ä¸ºåº•çš„å¹‚
power_of_2 = partial(power, base=2)
print(f"2çš„8æ¬¡æ–¹: {power_of_2(8)}")  # 256
```

### 5.2 partialçš„å®ç”¨åœºæ™¯

**ğŸ”¢ æ•°å­¦è®¡ç®—ç®€åŒ–**

```python
from functools import partial

# ç¨ç‡è®¡ç®—
def calculate_tax(amount, rate):
    return amount * rate

# åˆ›å»ºä¸åŒç¨ç‡çš„è®¡ç®—å™¨
vat_calculator = partial(calculate_tax, rate=0.2)  # 20%å¢å€¼ç¨
income_tax = partial(calculate_tax, rate=0.15)     # 15%æ‰€å¾—ç¨

print(f"1000å…ƒçš„å¢å€¼ç¨: {vat_calculator(1000)}")  # 200.0
print(f"5000å…ƒçš„æ‰€å¾—ç¨: {income_tax(5000)}")      # 750.0

# æŠ˜æ‰£è®¡ç®—
def discount_price(original, discount_rate):
    return original * (1 - discount_rate)

# ä¼šå‘˜æŠ˜æ‰£
vip_discount = partial(discount_price, discount_rate=0.2)  # 8æŠ˜
student_discount = partial(discount_price, discount_rate=0.1)  # 9æŠ˜

print(f"VIPä»·æ ¼: {vip_discount(100)}")      # 80.0
print(f"å­¦ç”Ÿä»·æ ¼: {student_discount(100)}")  # 90.0
```

**ğŸ“ å­—ç¬¦ä¸²å¤„ç†**
```python
# æ—¥å¿—æ ¼å¼åŒ–
def log_message(level, message, timestamp=None):
    if timestamp is None:
        from datetime import datetime
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    return f"[{timestamp}] {level}: {message}"

# åˆ›å»ºä¸åŒçº§åˆ«çš„æ—¥å¿—å‡½æ•°
info_log = partial(log_message, level="INFO")
error_log = partial(log_message, level="ERROR")
warning_log = partial(log_message, level="WARNING")

print(info_log("ç³»ç»Ÿå¯åŠ¨"))
print(error_log("æ–‡ä»¶æœªæ‰¾åˆ°"))
print(warning_log("å†…å­˜ä½¿ç”¨ç‡è¾ƒé«˜"))
```

### 5.3 partialåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„åº”ç”¨

**ğŸ”— ä¸mapã€filterç»“åˆä½¿ç”¨**

```python
from functools import partial

# æ•°æ®éªŒè¯
def validate_range(value, min_val, max_val):
    return min_val <= value <= max_val

# åˆ›å»ºä¸åŒèŒƒå›´çš„éªŒè¯å™¨
age_validator = partial(validate_range, min_val=0, max_val=120)
score_validator = partial(validate_range, min_val=0, max_val=100)

ages = [25, 150, -5, 30, 200]
scores = [85, 105, -10, 92, 67]

# ä½¿ç”¨filteréªŒè¯æ•°æ®
valid_ages = list(filter(age_validator, ages))
valid_scores = list(filter(score_validator, scores))

print(f"æœ‰æ•ˆå¹´é¾„: {valid_ages}")    # [25, 30]
print(f"æœ‰æ•ˆåˆ†æ•°: {valid_scores}")  # [85, 92, 67]

# å­—ç¬¦ä¸²å¤„ç†
def format_string(text, prefix="", suffix=""):
    return f"{prefix}{text}{suffix}"

# åˆ›å»ºç‰¹å®šæ ¼å¼åŒ–å™¨
html_bold = partial(format_string, prefix="<b>", suffix="</b>")
parentheses = partial(format_string, prefix="(", suffix=")")

words = ["é‡è¦", "æé†’", "æ³¨æ„"]
bold_words = list(map(html_bold, words))
paren_words = list(map(parentheses, words))

print(f"åŠ ç²—æ ¼å¼: {bold_words}")
print(f"æ‹¬å·æ ¼å¼: {paren_words}")
```

---

## 6. ğŸ­ é«˜é˜¶å‡½æ•°ç»¼åˆåº”ç”¨


### 6.1 å‡½æ•°ç»„åˆä½¿ç”¨

**ğŸ”— é“¾å¼æ•°æ®å¤„ç†**

```python
from functools import partial, reduce

# æ•°æ®å¤„ç†ç®¡é“ç¤ºä¾‹
sales_data = [
    {'product': 'iPhone', 'price': 999, 'quantity': 5, 'category': 'electronics'},
    {'product': 'Book', 'price': 25, 'quantity': 10, 'category': 'books'},
    {'product': 'Laptop', 'price': 1299, 'quantity': 3, 'category': 'electronics'},
    {'product': 'Pen', 'price': 2, 'quantity': 50, 'category': 'office'},
    {'product': 'iPad', 'price': 599, 'quantity': 8, 'category': 'electronics'}
]

# æ­¥éª¤1ï¼šç­›é€‰ç”µå­äº§å“
electronics = list(filter(lambda x: x['category'] == 'electronics', sales_data))
print("ç”µå­äº§å“:")
for item in electronics:
    print(f"  {item['product']}: {item['price']}å…ƒ")

# æ­¥éª¤2ï¼šè®¡ç®—æ¯ä¸ªäº§å“çš„æ€»é”€å”®é¢
def calculate_revenue(item):
    return item['price'] * item['quantity']

revenues = list(map(calculate_revenue, electronics))
print(f"\né”€å”®é¢: {revenues}")

# æ­¥éª¤3ï¼šè®¡ç®—æ€»æ”¶å…¥
total_revenue = reduce(lambda x, y: x + y, revenues)
print(f"ç”µå­äº§å“æ€»æ”¶å…¥: {total_revenue}å…ƒ")
```

**ğŸ“Š å¤æ‚æ•°æ®åˆ†æ**
```python
# å­¦ç”Ÿæˆç»©åˆ†æç³»ç»Ÿ
students_data = [
    {'name': 'å¼ ä¸‰', 'chinese': 85, 'math': 92, 'english': 78, 'class': 'A'},
    {'name': 'æå››', 'chinese': 78, 'math': 88, 'english': 85, 'class': 'A'},
    {'name': 'ç‹äº”', 'chinese': 92, 'math': 95, 'english': 89, 'class': 'B'},
    {'name': 'èµµå…­', 'chinese': 67, 'math': 72, 'english': 70, 'class': 'B'},
    {'name': 'å­™ä¸ƒ', 'chinese': 88, 'math': 90, 'english': 92, 'class': 'A'}
]

# è®¡ç®—æ€»åˆ†
add_total_score = lambda student: {
    **student, 
    'total': student['chinese'] + student['math'] + student['english']
}

# åˆ¤æ–­æ˜¯å¦ä¼˜ç§€ï¼ˆæ€»åˆ†>=250ï¼‰
is_excellent = lambda student: student['total'] >= 250

# æ•°æ®å¤„ç†ç®¡é“
def analyze_students(students):
    # 1. æ·»åŠ æ€»åˆ†
    with_totals = list(map(add_total_score, students))
    
    # 2. ç­›é€‰ä¼˜ç§€å­¦ç”Ÿ
    excellent_students = list(filter(is_excellent, with_totals))
    
    # 3. æŒ‰æ€»åˆ†æ’åº
    sorted_students = sorted(excellent_students, 
                           key=lambda x: x['total'], reverse=True)
    
    return sorted_students

excellent_list = analyze_students(students_data)
print("ä¼˜ç§€å­¦ç”Ÿæ’å:")
for i, student in enumerate(excellent_list, 1):
    print(f"{i}. {student['name']}: {student['total']}åˆ†")
```

### 6.2 å®é™…é¡¹ç›®åº”ç”¨ç¤ºä¾‹

**ğŸ›’ ç”µå•†æ•°æ®å¤„ç†**

```python
from functools import partial, reduce
from datetime import datetime

# è®¢å•æ•°æ®
orders = [
    {'id': 1, 'amount': 299, 'status': 'completed', 'date': '2024-01-15'},
    {'id': 2, 'amount': 599, 'status': 'pending', 'date': '2024-01-16'},
    {'id': 3, 'amount': 199, 'status': 'completed', 'date': '2024-01-17'},
    {'id': 4, 'amount': 799, 'status': 'cancelled', 'date': '2024-01-18'},
    {'id': 5, 'amount': 399, 'status': 'completed', 'date': '2024-01-19'}
]

# ä¸šåŠ¡å‡½æ•°
def is_completed(order):
    return order['status'] == 'completed'

def is_high_value(order, threshold=300):
    return order['amount'] >= threshold

def calculate_commission(order, rate=0.05):
    return order['amount'] * rate

# åˆ›å»ºåå‡½æ•°
high_value_filter = partial(is_high_value, threshold=500)
commission_calculator = partial(calculate_commission, rate=0.08)

# æ•°æ®åˆ†ææµç¨‹
print("=== è®¢å•æ•°æ®åˆ†æ ===")

# 1. å·²å®Œæˆè®¢å•
completed_orders = list(filter(is_completed, orders))
print(f"å·²å®Œæˆè®¢å•æ•°: {len(completed_orders)}")

# 2. å·²å®Œæˆè®¢å•æ€»é¢
completed_amounts = list(map(lambda x: x['amount'], completed_orders))
total_sales = reduce(lambda x, y: x + y, completed_amounts)
print(f"æ€»é”€å”®é¢: {total_sales}å…ƒ")

# 3. é«˜ä»·å€¼è®¢å•
high_value_orders = list(filter(high_value_filter, completed_orders))
print(f"é«˜ä»·å€¼è®¢å•æ•°: {len(high_value_orders)}")

# 4. è®¡ç®—ä½£é‡‘
commissions = list(map(commission_calculator, completed_orders))
total_commission = reduce(lambda x, y: x + y, commissions)
print(f"æ€»ä½£é‡‘: {total_commission:.2f}å…ƒ")
```

### 6.3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§

**âš¡ æå‡å¤„ç†æ•ˆç‡**

```python
# ä½¿ç”¨ç”Ÿæˆå™¨ä¼˜åŒ–å†…å­˜ä½¿ç”¨
def process_large_dataset():
    # æ¨¡æ‹Ÿå¤§æ•°æ®é›†
    large_numbers = range(1000000)
    
    # âŒ å†…å­˜å ç”¨å¤§çš„å†™æ³•
    # squared = list(map(lambda x: x**2, large_numbers))
    # evens = list(filter(lambda x: x % 2 == 0, squared))
    
    # âœ… å†…å­˜å‹å¥½çš„å†™æ³•
    squared_gen = map(lambda x: x**2, large_numbers)
    evens_gen = filter(lambda x: x % 2 == 0, squared_gen)
    
    # åªåœ¨éœ€è¦æ—¶è®¡ç®—
    first_10_evens = []
    for i, num in enumerate(evens_gen):
        if i >= 10:
            break
        first_10_evens.append(num)
    
    return first_10_evens

result = process_large_dataset()
print(f"å‰10ä¸ªå¹³æ–¹åçš„å¶æ•°: {result}")

# å‡½æ•°ç¼“å­˜ä¼˜åŒ–
from functools import lru_cache

@lru_cache(maxsize=128)
def expensive_calculation(n):
    """æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—"""
    print(f"è®¡ç®— {n} çš„ç»“æœ...")
    return sum(range(n * 1000))

# ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šè®¡ç®—
result1 = expensive_calculation(5)
# ç¬¬äºŒæ¬¡è°ƒç”¨ç›´æ¥è¿”å›ç¼“å­˜ç»“æœ
result2 = expensive_calculation(5)  # ä¸ä¼šæ‰“å°è®¡ç®—ä¿¡æ¯
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ lambdaï¼šä¸´æ—¶çš„å•è¡Œå‡½æ•°ï¼Œé€‚åˆç®€å•æ“ä½œ
ğŸ”¸ mapï¼šå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŒæ“ä½œï¼Œè¿”å›æ–°åˆ—è¡¨
ğŸ”¸ filterï¼šæ ¹æ®æ¡ä»¶ç­›é€‰å…ƒç´ ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶çš„åˆ—è¡¨
ğŸ”¸ reduceï¼šå°†åˆ—è¡¨å½’çº¦ä¸ºå•ä¸ªå€¼ï¼Œéœ€è¦import
ğŸ”¸ partialï¼šå›ºå®šå‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼Œåˆ›å»ºæ–°å‡½æ•°
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä½•æ—¶ä½¿ç”¨æ¯ä¸ªå‡½æ•°**
```
lambdaä½¿ç”¨æ—¶æœºï¼š
âœ… ç®€å•çš„æ•°å­¦è¿ç®—
âœ… é…åˆmap/filterä½¿ç”¨
âœ… æ’åºçš„keyå‚æ•°
âŒ å¤æ‚é€»è¾‘ï¼ˆç”¨defï¼‰
âŒ éœ€è¦è°ƒè¯•ï¼ˆç”¨defï¼‰

mapä½¿ç”¨æ—¶æœºï¼š
âœ… å¯¹æ‰€æœ‰å…ƒç´ åšç›¸åŒå˜æ¢
âœ… ç±»å‹è½¬æ¢
âœ… æ ¼å¼åŒ–è¾“å‡º
âŒ éœ€è¦ç´¢å¼•ä¿¡æ¯ï¼ˆç”¨enumerateï¼‰
âŒ æ¡ä»¶å¤„ç†ï¼ˆç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼‰

filterä½¿ç”¨æ—¶æœºï¼š
âœ… æ ¹æ®æ¡ä»¶ç­›é€‰æ•°æ®
âœ… å»é™¤æ— æ•ˆå€¼
âœ… æ•°æ®æ¸…æ´—
âŒ éœ€è¦ç´¢å¼•ï¼ˆç”¨enumerateï¼‰
âŒ å¤æ‚æ¡ä»¶ï¼ˆç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼‰
```

**ğŸ”¹ æ€§èƒ½å’Œå†…å­˜è€ƒè™‘**
```
å†…å­˜ä¼˜åŒ–ï¼š
- å¤§æ•°æ®é›†ç”¨ç”Ÿæˆå™¨è€Œä¸æ˜¯åˆ—è¡¨
- map/filterè¿”å›è¿­ä»£å™¨ï¼Œéœ€è¦æ—¶æ‰è®¡ç®—
- é¿å…ä¸å¿…è¦çš„list()è½¬æ¢

æ€§èƒ½ä¼˜åŒ–ï¼š
- ç®€å•æ“ä½œä¼˜å…ˆç”¨åˆ—è¡¨æ¨å¯¼å¼
- å¤æ‚æ“ä½œç”¨å‡½æ•°å¼ç¼–ç¨‹
- é‡å¤è®¡ç®—ç”¨@lru_cacheè£…é¥°å™¨
```

**ğŸ”¹ ä»£ç å¯è¯»æ€§å¹³è¡¡**
```
å¯è¯»æ€§åŸåˆ™ï¼š
- lambdaä¸è¶…è¿‡ä¸€è¡Œ
- å¤æ‚é€»è¾‘ç”¨æ™®é€šå‡½æ•°
- é“¾å¼è°ƒç”¨ä¸è¶…è¿‡3å±‚
- é€‚å½“æ·»åŠ æ³¨é‡Šè¯´æ˜æ„å›¾

å›¢é˜Ÿåä½œï¼š
- ç»Ÿä¸€ç¼–ç é£æ ¼
- é¿å…è¿‡åº¦ä½¿ç”¨é«˜é˜¶å‡½æ•°
- è€ƒè™‘å›¢é˜Ÿæˆå‘˜æŠ€èƒ½æ°´å¹³
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ æ•°æ®å¤„ç†åœºæ™¯**
- **æ—¥å¿—åˆ†æ**ï¼šè¿‡æ»¤ã€è½¬æ¢ã€èšåˆæ—¥å¿—æ•°æ®
- **æŠ¥è¡¨ç”Ÿæˆ**ï¼šè®¡ç®—ç»Ÿè®¡æŒ‡æ ‡ã€æ ¼å¼åŒ–è¾“å‡º
- **æ•°æ®æ¸…æ´—**ï¼šå»é™¤æ— æ•ˆæ•°æ®ã€æ ‡å‡†åŒ–æ ¼å¼
- **APIå¤„ç†**ï¼šè½¬æ¢æ•°æ®ç»“æ„ã€å‚æ•°é¢„è®¾

**ğŸ”§ å¼€å‘æ•ˆç‡æå‡**
- **ä»£ç ç®€æ´**ï¼šå‡å°‘å¾ªç¯ä»£ç ï¼Œæé«˜è¡¨è¾¾åŠ›
- **å‡½æ•°å¤ç”¨**ï¼špartialåˆ›å»ºä¸“ç”¨å‡½æ•°
- **ç®¡é“å¤„ç†**ï¼šé“¾å¼æ“ä½œå¤„ç†å¤æ‚æ•°æ®æµ
- **æµ‹è¯•å‹å¥½**ï¼šçº¯å‡½æ•°æ˜“äºå•å…ƒæµ‹è¯•

**ğŸ“ˆ è¿›é˜¶å­¦ä¹ è·¯å¾„**
```
åŸºç¡€é˜¶æ®µï¼š
- ç†Ÿç»ƒä½¿ç”¨map/filter/reduce
- ç†è§£lambdaçš„é€‚ç”¨åœºæ™¯
- æŒæ¡partialçš„åŸºæœ¬ç”¨æ³•

è¿›é˜¶é˜¶æ®µï¼š
- ç»„åˆä½¿ç”¨å¤šä¸ªé«˜é˜¶å‡½æ•°
- å­¦ä¹ è£…é¥°å™¨å’Œé—­åŒ…
- äº†è§£å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³

é«˜çº§é˜¶æ®µï¼š
- è‡ªå®šä¹‰é«˜é˜¶å‡½æ•°
- å‡½æ•°å¼ç¼–ç¨‹åº“ï¼ˆtoolzã€funcyï¼‰
- å“åº”å¼ç¼–ç¨‹æ¦‚å¿µ
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- lambdaå°å‡½æ•°ï¼Œä¸€è¡Œæå®šä¸´æ—¶ç”¨
- mapåƒæµæ°´çº¿ï¼Œæ¯ä¸ªéƒ½å¤„ç†ä¸€é  
- filteråƒç­›å­ï¼Œæ¡ä»¶ç¬¦åˆæ‰é€šè¿‡
- reduceåƒæ»šé›ªçƒï¼Œè¶Šæ»šç»“æœè¶Šå¤§
- partialé¢„è®¾å‚æ•°ï¼Œä¸“ç”¨å‡½æ•°å¾ˆæ–¹ä¾¿