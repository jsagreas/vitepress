---
title: 23ã€å¼‚å¸¸å¤„ç†å‡½æ•°
---
## ğŸ“š ç›®å½•

1. [å¼‚å¸¸å¤„ç†åŸºç¡€æ¦‚å¿µ](#1-å¼‚å¸¸å¤„ç†åŸºç¡€æ¦‚å¿µ)
2. [raiseæŠ›å‡ºå¼‚å¸¸](#2-raiseæŠ›å‡ºå¼‚å¸¸)
3. [assertæ–­è¨€éªŒè¯](#3-assertæ–­è¨€éªŒè¯)
4. [Exceptionå¼‚å¸¸ç±»](#4-Exceptionå¼‚å¸¸ç±»)
5. [BaseExceptionåŸºç¡€å¼‚å¸¸ç±»](#5-BaseExceptionåŸºç¡€å¼‚å¸¸ç±»)
6. [å®é™…åº”ç”¨åœºæ™¯](#6-å®é™…åº”ç”¨åœºæ™¯)
7. [æœ€ä½³å®è·µæŒ‡å—](#7-æœ€ä½³å®è·µæŒ‡å—)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” å¼‚å¸¸å¤„ç†åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¼‚å¸¸å¤„ç†


**é€šä¿—ç†è§£**ï¼šå¼‚å¸¸å¤„ç†å°±åƒæ˜¯ç»™ä½ çš„ç¨‹åºå®‰è£…"ä¿é™©ä¸"å’Œ"æŠ¥è­¦å™¨"ã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
ğŸ  å®¶ç”¨ç”µå™¨
â”œâ”€â”€ ä¿é™©ä¸ â†’ ç”µæµè¿‡å¤§æ—¶è‡ªåŠ¨æ–­ç”µï¼ˆé˜²æ­¢æŸåï¼‰
â”œâ”€â”€ æŠ¥è­¦å™¨ â†’ å‘ç°é—®é¢˜æ—¶ç«‹å³æé†’
â””â”€â”€ è¯´æ˜ä¹¦ â†’ å‘Šè¯‰ä½ é‡åˆ°é—®é¢˜æ€ä¹ˆåŠ

ğŸ Pythonç¨‹åº
â”œâ”€â”€ try-except â†’ æ•è·é”™è¯¯ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒ  
â”œâ”€â”€ raise â†’ ä¸»åŠ¨æŠ¥å‘Šå‘ç°çš„é—®é¢˜
â”œâ”€â”€ assert â†’ æ£€æŸ¥ç¨‹åºçŠ¶æ€æ˜¯å¦æ­£å¸¸
â””â”€â”€ å¼‚å¸¸ç±» â†’ è¯¦ç»†æè¿°å‡ºäº†ä»€ä¹ˆé—®é¢˜
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¼‚å¸¸å¤„ç†


**é—®é¢˜åœºæ™¯**ï¼šæƒ³è±¡ä½ åœ¨åšé¥­ï¼Œå¯èƒ½é‡åˆ°è¿™äº›æƒ…å†µ

```
ğŸ³ åšé¥­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š
âŒ æ²¡æœ‰é£Ÿæäº† â†’ FileNotFoundErrorï¼ˆæ–‡ä»¶ä¸å­˜åœ¨ï¼‰
âŒ ç«å¼€å¾—å¤ªå¤§çƒ§ç„¦äº† â†’ ValueErrorï¼ˆæ•°å€¼é”™è¯¯ï¼‰  
âŒ ç”µæ–­äº† â†’ IOErrorï¼ˆè¾“å…¥è¾“å‡ºé”™è¯¯ï¼‰
âŒ å¿˜è®°æ”¾ç›äº† â†’ é€»è¾‘é”™è¯¯

ä¸å¤„ç†çš„åæœï¼š
â€¢ åšé¥­å¤±è´¥ï¼Œå…¨å®¶é¥¿è‚šå­ â†’ ç¨‹åºå´©æºƒï¼Œç”¨æˆ·ä½“éªŒç³Ÿç³•
â€¢ ä¸çŸ¥é“å“ªé‡Œå‡ºé”™ â†’ éš¾ä»¥è°ƒè¯•å’Œä¿®å¤

å¤„ç†åçš„å¥½å¤„ï¼š
âœ… å‡ºé”™æ—¶æœ‰å¤‡ç”¨æ–¹æ¡ˆ â†’ ç¨‹åºç»§ç»­è¿è¡Œ
âœ… çŸ¥é“å…·ä½“å“ªé‡Œå‡ºé”™ â†’ ä¾¿äºä¿®å¤é—®é¢˜  
âœ… ç»™ç”¨æˆ·å‹å¥½çš„æç¤º â†’ æå‡ç”¨æˆ·ä½“éªŒ
```

### 1.3 å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒæ€æƒ³


**åŸºæœ¬åŸç†**ï¼šé¢„æ–™å¯èƒ½å‡ºé”™çš„åœ°æ–¹ï¼Œæå‰å‡†å¤‡åº”å¯¹æ–¹æ¡ˆ

```
ğŸ¯ å¼‚å¸¸å¤„ç†ä¸‰æ­¥èµ°ï¼š
1. é¢„é˜² â†’ æå‰æ£€æŸ¥å¯èƒ½çš„é—®é¢˜ï¼ˆassertæ–­è¨€ï¼‰
2. å‘ç° â†’ ä¸»åŠ¨æŠ¥å‘Šå‘ç°çš„é”™è¯¯ï¼ˆraiseæŠ›å‡ºï¼‰  
3. åº”å¯¹ â†’ ä¼˜é›…å¤„ç†å‡ºç°çš„å¼‚å¸¸ï¼ˆtry-exceptæ•è·ï¼‰

å¼‚å¸¸å¤„ç† vs æ™®é€šæ¡ä»¶åˆ¤æ–­ï¼š
æ™®é€šåˆ¤æ–­ï¼šif...elseï¼Œå¤„ç†é¢„æœŸçš„æƒ…å†µ
å¼‚å¸¸å¤„ç†ï¼štry...exceptï¼Œå¤„ç†æ„å¤–çš„æƒ…å†µ
```

---

## 2. ğŸš¨ raiseæŠ›å‡ºå¼‚å¸¸


### 2.1 raiseåŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯raiseï¼Ÿ**
raiseå°±åƒæ˜¯ç¨‹åºä¸­çš„"æŠ¥è­¦å™¨"ï¼Œå½“ç¨‹åºå‘ç°ä¸å¯¹åŠ²çš„æƒ…å†µæ—¶ï¼Œä¸»åŠ¨å¤§å£°å–Š"å‡ºé—®é¢˜äº†ï¼"

**åŸºæœ¬è¯­æ³•**ï¼š
```python
# æœ€ç®€å•çš„ç”¨æ³•
raise Exception("å‡ºé”™äº†ï¼")

# æŠ›å‡ºç‰¹å®šç±»å‹çš„å¼‚å¸¸
raise ValueError("æ•°å€¼ä¸å¯¹ï¼")

# é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸
raise
```

### 2.2 raiseçš„å¸¸è§ç”¨æ³•


#### ğŸ“¢ ä¸»åŠ¨æŠ¥å‘Šé”™è¯¯


**åœºæ™¯ä¸€ï¼šæ£€æŸ¥è¾“å…¥å‚æ•°**
```python
def calculate_age(birth_year):
    """è®¡ç®—å¹´é¾„çš„å‡½æ•°"""
    current_year = 2024
    
    # æ£€æŸ¥å¹´ä»½æ˜¯å¦åˆç†
    if birth_year > current_year:
        raise ValueError(f"å‡ºç”Ÿå¹´ä»½ {birth_year} ä¸èƒ½å¤§äºå½“å‰å¹´ä»½ {current_year}")
    
    if birth_year < 1900:
        raise ValueError(f"å‡ºç”Ÿå¹´ä»½ {birth_year} å¤ªæ—©äº†ï¼Œè¯·æ£€æŸ¥è¾“å…¥")
    
    return current_year - birth_year

# æ­£å¸¸ä½¿ç”¨
try:
    age = calculate_age(1990)
    print(f"å¹´é¾„ï¼š{age}")
except ValueError as e:
    print(f"è¾“å…¥é”™è¯¯ï¼š{e}")
```

**åœºæ™¯äºŒï¼šä¸šåŠ¡é€»è¾‘æ£€æŸ¥**
```python
def withdraw_money(account_balance, amount):
    """é“¶è¡Œå–æ¬¾å‡½æ•°"""
    if amount <= 0:
        raise ValueError("å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0")
    
    if amount > account_balance:
        raise Exception(f"ä½™é¢ä¸è¶³ï¼å½“å‰ä½™é¢ï¼š{account_balance}ï¼Œå°è¯•å–æ¬¾ï¼š{amount}")
    
    return account_balance - amount

# ä½¿ç”¨ç¤ºä¾‹
try:
    balance = 1000
    new_balance = withdraw_money(balance, 1500)
except Exception as e:
    print(f"å–æ¬¾å¤±è´¥ï¼š{e}")
```

#### ğŸ”„ é‡æ–°æŠ›å‡ºå¼‚å¸¸


**ä»€ä¹ˆæ—¶å€™é‡æ–°æŠ›å‡ºï¼Ÿ**
æœ‰æ—¶å€™ä½ æ•è·äº†å¼‚å¸¸ï¼Œåšäº†ä¸€äº›å¤„ç†ï¼ˆæ¯”å¦‚è®°å½•æ—¥å¿—ï¼‰ï¼Œä½†è¿˜æ˜¯å¸Œæœ›ä¸Šå±‚ä»£ç çŸ¥é“å‡ºé”™äº†ã€‚

```python
def safe_divide(a, b):
    """å®‰å…¨é™¤æ³•å‡½æ•°"""
    try:
        result = a / b
        return result
    except ZeroDivisionError:
        print("é”™è¯¯æ—¥å¿—ï¼šå‘ç”Ÿäº†é™¤é›¶é”™è¯¯")  # è®°å½•æ—¥å¿—
        raise  # é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œè®©è°ƒç”¨è€…çŸ¥é“

# ä½¿ç”¨ç¤ºä¾‹
try:
    result = safe_divide(10, 0)
except ZeroDivisionError:
    print("ç”¨æˆ·æç¤ºï¼šä¸èƒ½é™¤ä»¥é›¶ï¼Œè¯·é‡æ–°è¾“å…¥")
```

### 2.3 è‡ªå®šä¹‰å¼‚å¸¸ç±»


**ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰å¼‚å¸¸ï¼Ÿ**
å°±åƒåŒ»é™¢æœ‰ä¸åŒç§‘å®¤å¤„ç†ä¸åŒç–¾ç—…ï¼Œç¨‹åºä¹Ÿéœ€è¦ä¸åŒç±»å‹çš„å¼‚å¸¸æ¥æè¿°ä¸åŒé—®é¢˜ã€‚

```python
# è‡ªå®šä¹‰å¼‚å¸¸ç±»
class PasswordTooShortError(Exception):
    """å¯†ç å¤ªçŸ­çš„å¼‚å¸¸"""
    def __init__(self, length, min_length=8):
        self.length = length
        self.min_length = min_length
        super().__init__(f"å¯†ç é•¿åº¦ {length} å¤ªçŸ­ï¼Œè‡³å°‘éœ€è¦ {min_length} ä½")

class PasswordTooSimpleError(Exception):
    """å¯†ç å¤ªç®€å•çš„å¼‚å¸¸"""
    pass

def check_password(password):
    """æ£€æŸ¥å¯†ç å¼ºåº¦"""
    if len(password) < 8:
        raise PasswordTooShortError(len(password))
    
    if password.isdigit() or password.isalpha():
        raise PasswordTooSimpleError("å¯†ç ä¸èƒ½åªåŒ…å«æ•°å­—æˆ–å­—æ¯")
    
    return True

# ä½¿ç”¨ç¤ºä¾‹
passwords = ["123", "abc123def", "12345678"]

for pwd in passwords:
    try:
        check_password(pwd)
        print(f"å¯†ç  '{pwd}' ç¬¦åˆè¦æ±‚")
    except PasswordTooShortError as e:
        print(f"å¯†ç å¤ªçŸ­ï¼š{e}")
    except PasswordTooSimpleError as e:
        print(f"å¯†ç å¤ªç®€å•ï¼š{e}")
```

### 2.4 raiseä½¿ç”¨æŠ€å·§


**ğŸ’¡ å®ç”¨æŠ€å·§æ±‡æ€»**ï¼š

```python
# æŠ€å·§1ï¼šé“¾å¼å¼‚å¸¸ï¼ˆæ˜¾ç¤ºåŸå› ï¼‰
def process_file(filename):
    try:
        with open(filename) as f:
            data = f.read()
            return int(data)  # å¯èƒ½å‡ºé”™çš„åœ°æ–¹
    except FileNotFoundError:
        raise FileNotFoundError(f"æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶ï¼š{filename}")
    except ValueError as e:
        raise ValueError(f"é…ç½®æ–‡ä»¶ {filename} æ ¼å¼é”™è¯¯") from e

# æŠ€å·§2ï¼šæ¡ä»¶æŠ›å‡º
def validate_user_input(value, min_val=0, max_val=100):
    """éªŒè¯ç”¨æˆ·è¾“å…¥"""
    if not isinstance(value, (int, float)):
        raise TypeError(f"æœŸæœ›æ•°å­—ç±»å‹ï¼Œå¾—åˆ° {type(value).__name__}")
    
    if not min_val <= value <= max_val:
        raise ValueError(f"æ•°å€¼ {value} è¶…å‡ºèŒƒå›´ [{min_val}, {max_val}]")
    
    return True
```

---

## 3. âœ… assertæ–­è¨€éªŒè¯


### 3.1 assertåŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯assertï¼Ÿ**
assertå°±åƒæ˜¯ç¨‹åºçš„"ä½“æ£€åŒ»ç”Ÿ"ï¼Œå®šæœŸæ£€æŸ¥ç¨‹åºçš„"å¥åº·çŠ¶å†µ"ã€‚å¦‚æœå‘ç°ä¸æ­£å¸¸ï¼Œç«‹å³åœä¸‹æ¥æŠ¥å‘Šé—®é¢˜ã€‚

**åŸºæœ¬è¯­æ³•**ï¼š
```python
# åŸºæœ¬ç”¨æ³•
assert æ¡ä»¶, "é”™è¯¯ä¿¡æ¯"

# ç­‰ä»·äº
if not æ¡ä»¶:
    raise AssertionError("é”™è¯¯ä¿¡æ¯")
```

### 3.2 assertçš„å…¸å‹åº”ç”¨


#### ğŸ” å‚æ•°éªŒè¯


**æ£€æŸ¥å‡½æ•°è¾“å…¥**ï¼š
```python
def calculate_triangle_area(base, height):
    """è®¡ç®—ä¸‰è§’å½¢é¢ç§¯"""
    # æ–­è¨€æ£€æŸ¥è¾“å…¥å‚æ•°
    assert isinstance(base, (int, float)), f"åº•è¾¹å¿…é¡»æ˜¯æ•°å­—ï¼Œå¾—åˆ° {type(base)}"
    assert isinstance(height, (int, float)), f"é«˜å¿…é¡»æ˜¯æ•°å­—ï¼Œå¾—åˆ° {type(height)}"
    assert base > 0, f"åº•è¾¹å¿…é¡»å¤§äº0ï¼Œå¾—åˆ° {base}"
    assert height > 0, f"é«˜å¿…é¡»å¤§äº0ï¼Œå¾—åˆ° {height}"
    
    return 0.5 * base * height

# æµ‹è¯•
try:
    area = calculate_triangle_area(5, 3)
    print(f"ä¸‰è§’å½¢é¢ç§¯ï¼š{area}")
    
    # è¿™ä¼šè§¦å‘æ–­è¨€é”™è¯¯
    area = calculate_triangle_area(-5, 3)
except AssertionError as e:
    print(f"å‚æ•°é”™è¯¯ï¼š{e}")
```

#### ğŸ§ª çŠ¶æ€éªŒè¯


**æ£€æŸ¥ç¨‹åºçŠ¶æ€**ï¼š
```python
class BankAccount:
    """é“¶è¡Œè´¦æˆ·ç±»"""
    def __init__(self, initial_balance=0):
        self.balance = initial_balance
        # æ–­è¨€ï¼šåˆå§‹ä½™é¢ä¸èƒ½ä¸ºè´Ÿ
        assert self.balance >= 0, "è´¦æˆ·ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°"
    
    def deposit(self, amount):
        """å­˜æ¬¾"""
        assert amount > 0, "å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0"
        
        old_balance = self.balance
        self.balance += amount
        
        # æ–­è¨€ï¼šå­˜æ¬¾åä½™é¢åº”è¯¥å¢åŠ 
        assert self.balance == old_balance + amount, "ä½™é¢è®¡ç®—é”™è¯¯"
        
    def withdraw(self, amount):
        """å–æ¬¾"""
        assert amount > 0, "å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0"
        assert amount <= self.balance, "ä½™é¢ä¸è¶³"
        
        old_balance = self.balance
        self.balance -= amount
        
        # æ–­è¨€ï¼šå–æ¬¾åä½™é¢åº”è¯¥å‡å°‘
        assert self.balance == old_balance - amount, "ä½™é¢è®¡ç®—é”™è¯¯"

# ä½¿ç”¨ç¤ºä¾‹
account = BankAccount(1000)
account.deposit(500)
print(f"å­˜æ¬¾åä½™é¢ï¼š{account.balance}")

try:
    account.withdraw(2000)  # ä¼šè§¦å‘æ–­è¨€é”™è¯¯
except AssertionError as e:
    print(f"æ“ä½œå¤±è´¥ï¼š{e}")
```

#### ğŸ“‹ ä¸å˜é‡æ£€æŸ¥


**æ£€æŸ¥æ•°æ®ç»“æ„çš„å®Œæ•´æ€§**ï¼š
```python
class SortedList:
    """æœ‰åºåˆ—è¡¨ç±»"""
    def __init__(self):
        self._items = []
    
    def add(self, item):
        """æ·»åŠ å…ƒç´ å¹¶ä¿æŒæœ‰åº"""
        self._items.append(item)
        self._items.sort()
        
        # æ–­è¨€ï¼šåˆ—è¡¨åº”è¯¥ä¿æŒæœ‰åº
        assert self._is_sorted(), "åˆ—è¡¨å¤±å»æœ‰åºæ€§"
    
    def _is_sorted(self):
        """æ£€æŸ¥åˆ—è¡¨æ˜¯å¦æœ‰åº"""
        for i in range(1, len(self._items)):
            if self._items[i] < self._items[i-1]:
                return False
        return True
    
    def get_items(self):
        """è·å–æ‰€æœ‰å…ƒç´ """
        # è¿”å›å‰å†æ¬¡æ£€æŸ¥
        assert self._is_sorted(), "è¿”å›çš„åˆ—è¡¨ä¸æ˜¯æœ‰åºçš„"
        return self._items.copy()

# ä½¿ç”¨ç¤ºä¾‹
sorted_list = SortedList()
sorted_list.add(3)
sorted_list.add(1)
sorted_list.add(4)
print(f"æœ‰åºåˆ—è¡¨ï¼š{sorted_list.get_items()}")
```

### 3.3 assert vs raiseçš„é€‰æ‹©


**ä»€ä¹ˆæ—¶å€™ç”¨assertï¼Œä»€ä¹ˆæ—¶å€™ç”¨raiseï¼Ÿ**

| åœºæ™¯ | **ä½¿ç”¨assert** | **ä½¿ç”¨raise** |
|------|---------------|---------------|
| **ç›®çš„** | `è°ƒè¯•å’Œå¼€å‘æ—¶æ£€æŸ¥` | `å¤„ç†è¿è¡Œæ—¶é”™è¯¯` |
| **ç”¨æˆ·è¾“å…¥** | `âŒ ä¸é€‚åˆ` | `âœ… é€‚åˆ` |
| **å†…éƒ¨é€»è¾‘æ£€æŸ¥** | `âœ… é€‚åˆ` | `âŒ ä¸é€‚åˆ` |
| **ç”Ÿäº§ç¯å¢ƒ** | `å¯èƒ½è¢«ç¦ç”¨` | `å§‹ç»ˆæœ‰æ•ˆ` |
| **é”™è¯¯ç±»å‹** | `ç¨‹åºå‘˜é”™è¯¯` | `ç”¨æˆ·/ç¯å¢ƒé”™è¯¯` |

**å¯¹æ¯”ç¤ºä¾‹**ï¼š
```python
def process_user_data(user_input, internal_state):
    """å¤„ç†ç”¨æˆ·æ•°æ®"""
    
    # ç”¨raiseå¤„ç†ç”¨æˆ·è¾“å…¥é”™è¯¯
    if not isinstance(user_input, str):
        raise TypeError("ç”¨æˆ·è¾“å…¥å¿…é¡»æ˜¯å­—ç¬¦ä¸²")
    
    if len(user_input) == 0:
        raise ValueError("ç”¨æˆ·è¾“å…¥ä¸èƒ½ä¸ºç©º")
    
    # ç”¨assertæ£€æŸ¥å†…éƒ¨çŠ¶æ€
    assert internal_state is not None, "å†…éƒ¨çŠ¶æ€ä¸åº”è¯¥ä¸ºNone"
    assert hasattr(internal_state, 'process'), "å†…éƒ¨çŠ¶æ€ç¼ºå°‘processæ–¹æ³•"
    
    # å¤„ç†é€»è¾‘...
    result = internal_state.process(user_input)
    
    # ç”¨assertæ£€æŸ¥ç»“æœçš„åˆç†æ€§
    assert result is not None, "å¤„ç†ç»“æœä¸åº”è¯¥ä¸ºNone"
    
    return result
```

### 3.4 assertå®ç”¨æŠ€å·§


**ğŸ¯ é«˜æ•ˆä½¿ç”¨assertçš„æŠ€å·§**ï¼š

```python
# æŠ€å·§1ï¼šä½¿ç”¨assertæ£€æŸ¥å‡½æ•°å‰ç½®æ¡ä»¶
def fibonacci(n):
    """è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬né¡¹"""
    assert isinstance(n, int), "å‚æ•°å¿…é¡»æ˜¯æ•´æ•°"
    assert n >= 0, "å‚æ•°å¿…é¡»éè´Ÿ"
    
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# æŠ€å·§2ï¼šä½¿ç”¨assertæ£€æŸ¥å‡½æ•°åç½®æ¡ä»¶
def factorial(n):
    """è®¡ç®—é˜¶ä¹˜"""
    assert isinstance(n, int) and n >= 0, "å‚æ•°å¿…é¡»æ˜¯éè´Ÿæ•´æ•°"
    
    if n <= 1:
        result = 1
    else:
        result = n * factorial(n-1)
    
    # åç½®æ¡ä»¶ï¼šç»“æœåº”è¯¥å¤§äºç­‰äº1
    assert result >= 1, "é˜¶ä¹˜ç»“æœåº”è¯¥å¤§äºç­‰äº1"
    return result

# æŠ€å·§3ï¼šä½¿ç”¨assertæ£€æŸ¥å¾ªç¯ä¸å˜é‡
def binary_search(arr, target):
    """äºŒåˆ†æŸ¥æ‰¾"""
    assert len(arr) > 0, "æ•°ç»„ä¸èƒ½ä¸ºç©º"
    
    left, right = 0, len(arr) - 1
    
    while left <= right:
        # å¾ªç¯ä¸å˜é‡ï¼šå¦‚æœtargetå­˜åœ¨ï¼Œä¸€å®šåœ¨[left, right]èŒƒå›´å†…
        assert 0 <= left <= len(arr), "å·¦è¾¹ç•Œè¶Šç•Œ"
        assert 0 <= right < len(arr), "å³è¾¹ç•Œè¶Šç•Œ"
        
        mid = (left + right) // 2
        
        if arr[mid] == target:
            return mid
        elif arr[mid] < target:
            left = mid + 1
        else:
            right = mid - 1
    
    return -1  # æœªæ‰¾åˆ°
```

---

## 4. ğŸ”§ Exceptionå¼‚å¸¸ç±»


### 4.1 Exceptionç±»åŸºç¡€


**ä»€ä¹ˆæ˜¯Exceptionç±»ï¼Ÿ**
Exceptionç±»å°±åƒæ˜¯"é”™è¯¯æŠ¥å‘Šå•"çš„æ ‡å‡†æ ¼å¼ï¼Œå®ƒå®šä¹‰äº†æè¿°é”™è¯¯ä¿¡æ¯çš„æ ‡å‡†æ–¹å¼ã€‚

**Exceptionçš„å±‚æ¬¡ç»“æ„**ï¼š
```
BaseException (æ‰€æœ‰å¼‚å¸¸çš„ç¥–å®—)
 â””â”€â”€ Exception (ä¸€èˆ¬å¼‚å¸¸çš„çˆ¶ç±»)
     â”œâ”€â”€ ValueError (å€¼é”™è¯¯)
     â”œâ”€â”€ TypeError (ç±»å‹é”™è¯¯)  
     â”œâ”€â”€ FileNotFoundError (æ–‡ä»¶æœªæ‰¾åˆ°)
     â”œâ”€â”€ ZeroDivisionError (é™¤é›¶é”™è¯¯)
     â””â”€â”€ ... (è¿˜æœ‰å¾ˆå¤šå…¶ä»–å¼‚å¸¸)
```

### 4.2 åˆ›å»ºExceptionå®ä¾‹


**åŸºæœ¬åˆ›å»ºæ–¹å¼**ï¼š
```python
# æ–¹å¼1ï¼šæ— å‚æ•°åˆ›å»º
error = Exception()
print(error)  # è¾“å‡ºç©ºå­—ç¬¦ä¸²

# æ–¹å¼2ï¼šå¸¦æ¶ˆæ¯åˆ›å»º
error = Exception("å‡ºç°äº†æœªçŸ¥é”™è¯¯")
print(error)  # è¾“å‡ºï¼šå‡ºç°äº†æœªçŸ¥é”™è¯¯

# æ–¹å¼3ï¼šå¸¦å¤šä¸ªå‚æ•°åˆ›å»º
error = Exception("é”™è¯¯ç ", 500, "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯")
print(error.args)  # è¾“å‡ºï¼š('é”™è¯¯ç ', 500, 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯')

# æ–¹å¼4ï¼šç›´æ¥æŠ›å‡º
raise Exception("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å¼‚å¸¸")
```

### 4.3 Exceptionçš„å±æ€§å’Œæ–¹æ³•


**å¸¸ç”¨å±æ€§**ï¼š
```python
try:
    raise Exception("æµ‹è¯•å¼‚å¸¸", 404, "è¯¦ç»†ä¿¡æ¯")
except Exception as e:
    print(f"å¼‚å¸¸æ¶ˆæ¯ï¼š{e}")           # ç¬¬ä¸€ä¸ªå‚æ•°
    print(f"æ‰€æœ‰å‚æ•°ï¼š{e.args}")      # æ‰€æœ‰å‚æ•°ç»„æˆçš„å…ƒç»„
    print(f"å¼‚å¸¸ç±»å‹ï¼š{type(e)}")     # å¼‚å¸¸ç±»å‹
    print(f"å¼‚å¸¸åç§°ï¼š{e.__class__.__name__}")  # å¼‚å¸¸åç§°
```

**å¤„ç†å¼‚å¸¸ä¿¡æ¯**ï¼š
```python
import traceback

def problematic_function():
    """æœ‰é—®é¢˜çš„å‡½æ•°"""
    x = 1 / 0  # æ•…æ„åˆ¶é€ é”™è¯¯

def caller_function():
    """è°ƒç”¨æœ‰é—®é¢˜å‡½æ•°çš„å‡½æ•°"""
    try:
        problematic_function()
    except Exception as e:
        # è·å–è¯¦ç»†çš„å¼‚å¸¸ä¿¡æ¯
        print(f"å¼‚å¸¸ç±»å‹ï¼š{type(e).__name__}")
        print(f"å¼‚å¸¸æ¶ˆæ¯ï¼š{str(e)}")
        print(f"å¼‚å¸¸å‚æ•°ï¼š{e.args}")
        
        # æ‰“å°å®Œæ•´çš„å †æ ˆè·Ÿè¸ª
        print("\nå®Œæ•´å †æ ˆè·Ÿè¸ªï¼š")
        traceback.print_exc()

caller_function()
```

### 4.4 Exceptionçš„å¸¸è§å­ç±»


**å¸¸ç”¨å¼‚å¸¸ç±»å‹**ï¼š

```python
# ValueError - å€¼é”™è¯¯
def set_age(age):
    if not isinstance(age, int):
        raise TypeError(f"å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°ï¼Œå¾—åˆ° {type(age).__name__}")
    if age < 0 or age > 150:
        raise ValueError(f"å¹´é¾„ {age} ä¸åœ¨åˆç†èŒƒå›´å†…")

# TypeError - ç±»å‹é”™è¯¯  
def add_numbers(a, b):
    if not isinstance(a, (int, float)) or not isinstance(b, (int, float)):
        raise TypeError("å‚æ•°å¿…é¡»æ˜¯æ•°å­—ç±»å‹")
    return a + b

# FileNotFoundError - æ–‡ä»¶æœªæ‰¾åˆ°
def read_config(filename):
    try:
        with open(filename, 'r') as f:
            return f.read()
    except FileNotFoundError:
        raise FileNotFoundError(f"é…ç½®æ–‡ä»¶ {filename} ä¸å­˜åœ¨")

# IndexError - ç´¢å¼•é”™è¯¯
def get_list_item(lst, index):
    if not isinstance(lst, list):
        raise TypeError("ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯åˆ—è¡¨")
    if index >= len(lst):
        raise IndexError(f"ç´¢å¼• {index} è¶…å‡ºåˆ—è¡¨èŒƒå›´ [0, {len(lst)-1}]")
    return lst[index]

# ä½¿ç”¨ç¤ºä¾‹
test_cases = [
    lambda: set_age("25"),      # TypeError
    lambda: set_age(-5),        # ValueError  
    lambda: add_numbers("1", 2), # TypeError
    lambda: read_config("not_exist.txt"), # FileNotFoundError
    lambda: get_list_item([1,2,3], 5)     # IndexError
]

for i, test in enumerate(test_cases):
    try:
        test()
        print(f"æµ‹è¯• {i+1} é€šè¿‡")
    except Exception as e:
        print(f"æµ‹è¯• {i+1} å¤±è´¥ï¼š{type(e).__name__}: {e}")
```

### 4.5 è‡ªå®šä¹‰Exceptionå­ç±»


**åˆ›å»ºä¸“ä¸šçš„è‡ªå®šä¹‰å¼‚å¸¸**ï¼š
```python
class ValidationError(Exception):
    """æ•°æ®éªŒè¯å¼‚å¸¸åŸºç±»"""
    def __init__(self, message, field_name=None, error_code=None):
        super().__init__(message)
        self.field_name = field_name
        self.error_code = error_code
        self.message = message
    
    def __str__(self):
        if self.field_name:
            return f"å­—æ®µ '{self.field_name}' éªŒè¯å¤±è´¥: {self.message}"
        return self.message

class EmailValidationError(ValidationError):
    """é‚®ç®±éªŒè¯å¼‚å¸¸"""
    def __init__(self, email):
        super().__init__(
            f"æ— æ•ˆçš„é‚®ç®±æ ¼å¼: {email}",
            field_name="email",
            error_code="INVALID_EMAIL"
        )
        self.email = email

class PhoneValidationError(ValidationError):
    """ç”µè¯éªŒè¯å¼‚å¸¸"""
    def __init__(self, phone):
        super().__init__(
            f"æ— æ•ˆçš„ç”µè¯å·ç : {phone}",
            field_name="phone", 
            error_code="INVALID_PHONE"
        )
        self.phone = phone

# éªŒè¯å‡½æ•°
def validate_user_info(email, phone):
    """éªŒè¯ç”¨æˆ·ä¿¡æ¯"""
    if "@" not in email or "." not in email:
        raise EmailValidationError(email)
    
    if not phone.isdigit() or len(phone) != 11:
        raise PhoneValidationError(phone)
    
    return True

# ä½¿ç”¨ç¤ºä¾‹
test_data = [
    ("user@example.com", "13812345678"),  # æ­£ç¡®æ•°æ®
    ("invalid-email", "13812345678"),     # é‚®ç®±é”™è¯¯
    ("user@example.com", "123"),          # ç”µè¯é”™è¯¯
]

for email, phone in test_data:
    try:
        validate_user_info(email, phone)
        print(f"âœ… éªŒè¯é€šè¿‡ï¼š{email}, {phone}")
    except ValidationError as e:
        print(f"âŒ {e} (é”™è¯¯ç : {e.error_code})")
```

---

## 5. ğŸ—ï¸ BaseExceptionåŸºç¡€å¼‚å¸¸ç±»


### 5.1 BaseExceptionæ¦‚å¿µ


**ä»€ä¹ˆæ˜¯BaseExceptionï¼Ÿ**
BaseExceptionæ˜¯Pythonä¸­æ‰€æœ‰å¼‚å¸¸çš„"è€ç¥–å®—"ï¼Œå°±åƒå®¶æ—æ—è°±çš„æœ€é¡¶ç«¯ã€‚

**ä¸ºä»€ä¹ˆéœ€è¦BaseExceptionï¼Ÿ**
```
å¼‚å¸¸å®¶æ—å…³ç³»ï¼š
BaseException (æ‰€æœ‰å¼‚å¸¸çš„æ ¹)
â”œâ”€â”€ SystemExit (ç¨‹åºé€€å‡º)
â”œâ”€â”€ KeyboardInterrupt (ç”¨æˆ·ä¸­æ–­ï¼Œå¦‚Ctrl+C)  
â”œâ”€â”€ GeneratorExit (ç”Ÿæˆå™¨é€€å‡º)
â””â”€â”€ Exception (æ™®é€šå¼‚å¸¸)
    â”œâ”€â”€ ValueError
    â”œâ”€â”€ TypeError
    â””â”€â”€ ... (å…¶ä»–å¸¸è§å¼‚å¸¸)
```

### 5.2 BaseException vs Exception


**é‡è¦åŒºåˆ«**ï¼š
```python
# Exception å¯ä»¥è¢« except Exception æ•è·
try:
    raise ValueError("è¿™æ˜¯ä¸ªå€¼é”™è¯¯")
except Exception as e:
    print(f"æ•è·åˆ°æ™®é€šå¼‚å¸¸ï¼š{e}")

# æŸäº›BaseExceptionå­ç±»ä¸åº”è¯¥è¢«æ™®é€šçš„except Exceptionæ•è·
try:
    import sys
    sys.exit(1)  # è¿™ä¼šå¼•å‘SystemExit
except Exception as e:
    print("è¿™é‡Œä¸ä¼šæ‰§è¡Œ")  # SystemExitä¸ä¼šè¢«æ•è·
except BaseException as e:
    print(f"æ•è·åˆ°ç³»ç»Ÿå¼‚å¸¸ï¼š{e}")
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**
```
è®¾è®¡ç†å¿µï¼š
âœ… Exceptionï¼šç¨‹åºå¯ä»¥å¤„ç†çš„é”™è¯¯
   - ç”¨æˆ·è¾“å…¥é”™è¯¯
   - æ–‡ä»¶æ“ä½œå¤±è´¥  
   - ç½‘ç»œè¿æ¥é—®é¢˜

ğŸš« BaseExceptionä½†éExceptionï¼šä¸åº”è¯¥è¢«æ™®é€šä»£ç æ•è·
   - SystemExitï¼šç¨‹åºè¦é€€å‡º
   - KeyboardInterruptï¼šç”¨æˆ·è¦ä¸­æ–­ç¨‹åº
   - GeneratorExitï¼šç”Ÿæˆå™¨è¦ç»“æŸ
```

### 5.3 BaseExceptionçš„ç‰¹æ®Šå­ç±»


#### ğŸšª SystemExit


**ç¨‹åºé€€å‡ºå¼‚å¸¸**ï¼š
```python
import sys

def safe_exit_demo():
    """å®‰å…¨é€€å‡ºæ¼”ç¤º"""
    try:
        print("ç¨‹åºå¼€å§‹è¿è¡Œ...")
        
        # æ£€æŸ¥æŸä¸ªæ¡ä»¶
        if True:  # å‡è®¾éœ€è¦é€€å‡º
            print("å‘ç°é€€å‡ºæ¡ä»¶ï¼Œå‡†å¤‡é€€å‡º...")
            sys.exit(0)  # æ­£å¸¸é€€å‡º
            
    except SystemExit as e:
        print(f"ç¨‹åºé€€å‡ºï¼šé€€å‡ºç  {e.code}")
        # å¯ä»¥åœ¨è¿™é‡Œåšæ¸…ç†å·¥ä½œ
        print("æ‰§è¡Œæ¸…ç†å·¥ä½œ...")
        raise  # é‡æ–°æŠ›å‡ºï¼Œç¡®ä¿ç¨‹åºçœŸçš„é€€å‡º

# safe_exit_demo()  # è¿è¡Œæ—¶ä¼šé€€å‡ºç¨‹åº
```

#### âŒ¨ï¸ KeyboardInterrupt


**ç”¨æˆ·ä¸­æ–­å¼‚å¸¸**ï¼š
```python
import time

def interruptible_task():
    """å¯ä¸­æ–­çš„ä»»åŠ¡"""
    try:
        print("ä»»åŠ¡å¼€å§‹ï¼ŒæŒ‰ Ctrl+C å¯ä»¥ä¸­æ–­...")
        for i in range(10):
            print(f"æ‰§è¡Œæ­¥éª¤ {i+1}/10")
            time.sleep(1)  # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
        print("ä»»åŠ¡å®Œæˆï¼")
        
    except KeyboardInterrupt:
        print("\nç”¨æˆ·ä¸­æ–­äº†ä»»åŠ¡")
        choice = input("æ˜¯å¦ä¿å­˜è¿›åº¦? (y/n): ")
        if choice.lower() == 'y':
            print("è¿›åº¦å·²ä¿å­˜")
        print("ä»»åŠ¡å·²å–æ¶ˆ")

# interruptible_task()  # è¿è¡Œåå¯ä»¥ç”¨Ctrl+Cæµ‹è¯•
```

### 5.4 BaseExceptionçš„ä½¿ç”¨åœºæ™¯


**ä»€ä¹ˆæ—¶å€™ç›´æ¥ä½¿ç”¨BaseExceptionï¼Ÿ**

```python
class CriticalSystemError(BaseException):
    """ä¸¥é‡ç³»ç»Ÿé”™è¯¯ï¼Œä¸åº”è¯¥è¢«æ™®é€šå¼‚å¸¸å¤„ç†æ•è·"""
    def __init__(self, message, system_state=None):
        super().__init__(message)
        self.system_state = system_state

def check_system_health():
    """æ£€æŸ¥ç³»ç»Ÿå¥åº·çŠ¶æ€"""
    # æ¨¡æ‹Ÿæ£€æŸ¥ç³»ç»Ÿå…³é”®ç»„ä»¶
    memory_usage = 95  # å†…å­˜ä½¿ç”¨ç‡
    disk_space = 1     # å‰©ä½™ç£ç›˜ç©ºé—´(GB)
    
    if memory_usage > 90:
        raise CriticalSystemError(
            "å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œç³»ç»Ÿå¯èƒ½å´©æºƒ",
            {"memory": memory_usage, "disk": disk_space}
        )

def application_main():
    """åº”ç”¨ä¸»å‡½æ•°"""
    try:
        # åº”ç”¨é€»è¾‘
        check_system_health()
        print("åº”ç”¨æ­£å¸¸è¿è¡Œ...")
        
    except Exception as e:
        # æ™®é€šå¼‚å¸¸å¤„ç†
        print(f"åº”ç”¨é”™è¯¯ï¼š{e}")
        
    except CriticalSystemError as e:
        # ä¸¥é‡é”™è¯¯å¤„ç†
        print(f"ä¸¥é‡ç³»ç»Ÿé”™è¯¯ï¼š{e}")
        print(f"ç³»ç»ŸçŠ¶æ€ï¼š{e.system_state}")
        print("åº”ç”¨å°†ç«‹å³é€€å‡º")
        return False
        
    return True

# application_main()
```

### 5.5 å¼‚å¸¸æ•è·çš„æœ€ä½³å®è·µ


**æ­£ç¡®çš„å¼‚å¸¸æ•è·é¡ºåº**ï¼š
```python
def comprehensive_error_handling():
    """å…¨é¢çš„é”™è¯¯å¤„ç†ç¤ºä¾‹"""
    try:
        # å¯èƒ½å‡ºé”™çš„ä»£ç 
        result = risky_operation()
        return result
        
    except KeyboardInterrupt:
        # æœ€å…ˆå¤„ç†ç”¨æˆ·ä¸­æ–­
        print("ç”¨æˆ·ä¸­æ–­æ“ä½œ")
        raise  # é‡æ–°æŠ›å‡ºï¼Œè®©ç¨‹åºé€€å‡º
        
    except ValueError as e:
        # å¤„ç†å…·ä½“çš„å¼‚å¸¸ç±»å‹
        print(f"æ•°å€¼é”™è¯¯ï¼š{e}")
        return None
        
    except FileNotFoundError as e:
        # å¤„ç†æ–‡ä»¶ç›¸å…³é”™è¯¯
        print(f"æ–‡ä»¶é”™è¯¯ï¼š{e}")
        return None
        
    except Exception as e:
        # å¤„ç†å…¶ä»–æ‰€æœ‰æ™®é€šå¼‚å¸¸
        print(f"æœªçŸ¥é”™è¯¯ï¼š{e}")
        return None
        
    except BaseException as e:
        # å¤„ç†ç³»ç»Ÿçº§å¼‚å¸¸ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
        print(f"ç³»ç»Ÿçº§é”™è¯¯ï¼š{e}")
        raise  # é€šå¸¸åº”è¯¥é‡æ–°æŠ›å‡º

def risky_operation():
    """æ¨¡æ‹Ÿå¯èƒ½å‡ºé”™çš„æ“ä½œ"""
    import random
    error_type = random.choice([0, 1, 2, 3])
    
    if error_type == 0:
        return "æ“ä½œæˆåŠŸ"
    elif error_type == 1:
        raise ValueError("éšæœºå€¼é”™è¯¯")
    elif error_type == 2:
        raise FileNotFoundError("éšæœºæ–‡ä»¶é”™è¯¯")
    else:
        raise RuntimeError("éšæœºè¿è¡Œæ—¶é”™è¯¯")

# æµ‹è¯•
for i in range(5):
    print(f"\n--- æµ‹è¯• {i+1} ---")
    result = comprehensive_error_handling()
    print(f"ç»“æœï¼š{result}")
```

---

## 6. ğŸ¯ å®é™…åº”ç”¨åœºæ™¯


### 6.1 æ–‡ä»¶æ“ä½œå¼‚å¸¸å¤„ç†


**å®Œæ•´çš„æ–‡ä»¶å¤„ç†ç¤ºä¾‹**ï¼š
```python
import json
import os

class ConfigManager:
    """é…ç½®æ–‡ä»¶ç®¡ç†å™¨"""
    
    def __init__(self, config_file="config.json"):
        self.config_file = config_file
        self.config_data = {}
    
    def load_config(self):
        """åŠ è½½é…ç½®æ–‡ä»¶"""
        try:
            # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
            if not os.path.exists(self.config_file):
                raise FileNotFoundError(f"é…ç½®æ–‡ä»¶ {self.config_file} ä¸å­˜åœ¨")
            
            # æ£€æŸ¥æ–‡ä»¶æƒé™
            if not os.access(self.config_file, os.R_OK):
                raise PermissionError(f"æ²¡æœ‰æƒé™è¯»å–é…ç½®æ–‡ä»¶ {self.config_file}")
            
            with open(self.config_file, 'r', encoding='utf-8') as f:
                self.config_data = json.load(f)
            
            # éªŒè¯é…ç½®æ•°æ®
            self._validate_config()
            print("âœ… é…ç½®æ–‡ä»¶åŠ è½½æˆåŠŸ")
            
        except FileNotFoundError as e:
            print(f"âŒ æ–‡ä»¶é”™è¯¯ï¼š{e}")
            self._create_default_config()
            
        except PermissionError as e:
            print(f"âŒ æƒé™é”™è¯¯ï¼š{e}")
            raise  # æƒé™é—®é¢˜éœ€è¦ç”¨æˆ·è§£å†³
            
        except json.JSONDecodeError as e:
            print(f"âŒ JSONæ ¼å¼é”™è¯¯ï¼š{e}")
            backup_file = f"{self.config_file}.backup"
            print(f"æ­£åœ¨åˆ›å»ºå¤‡ä»½æ–‡ä»¶ï¼š{backup_file}")
            os.rename(self.config_file, backup_file)
            self._create_default_config()
            
        except Exception as e:
            print(f"âŒ æœªçŸ¥é”™è¯¯ï¼š{e}")
            raise
    
    def _validate_config(self):
        """éªŒè¯é…ç½®æ•°æ®"""
        required_keys = ['app_name', 'version', 'settings']
        
        for key in required_keys:
            if key not in self.config_data:
                raise ValueError(f"é…ç½®æ–‡ä»¶ç¼ºå°‘å¿…éœ€å­—æ®µï¼š{key}")
        
        # éªŒè¯ç‰ˆæœ¬æ ¼å¼
        version = self.config_data['version']
        if not isinstance(version, str) or not version.count('.') == 2:
            raise ValueError(f"ç‰ˆæœ¬æ ¼å¼é”™è¯¯ï¼š{version}ï¼Œåº”è¯¥æ˜¯ x.y.z æ ¼å¼")
    
    def _create_default_config(self):
        """åˆ›å»ºé»˜è®¤é…ç½®"""
        default_config = {
            "app_name": "MyApp",
            "version": "1.0.0", 
            "settings": {
                "debug": False,
                "max_connections": 100
            }
        }
        
        try:
            with open(self.config_file, 'w', encoding='utf-8') as f:
                json.dump(default_config, f, indent=2, ensure_ascii=False)
            
            self.config_data = default_config
            print(f"âœ… å·²åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶ï¼š{self.config_file}")
            
        except Exception as e:
            print(f"âŒ åˆ›å»ºé»˜è®¤é…ç½®å¤±è´¥ï¼š{e}")
            raise

# ä½¿ç”¨ç¤ºä¾‹
config_manager = ConfigManager("app_config.json")
config_manager.load_config()
```

### 6.2 ç½‘ç»œè¯·æ±‚å¼‚å¸¸å¤„ç†


**ç½‘ç»œæ“ä½œçš„å¼‚å¸¸å¤„ç†**ï¼š
```python
import time
import random

class NetworkClient:
    """ç½‘ç»œå®¢æˆ·ç«¯æ¨¡æ‹Ÿ"""
    
    def __init__(self, max_retries=3, timeout=30):
        self.max_retries = max_retries
        self.timeout = timeout
    
    def fetch_data(self, url):
        """è·å–ç½‘ç»œæ•°æ®"""
        for attempt in range(self.max_retries):
            try:
                print(f"å°è¯•è¿æ¥ {url} (ç¬¬ {attempt + 1} æ¬¡)")
                
                # æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
                data = self._simulate_request(url)
                
                print("âœ… è¯·æ±‚æˆåŠŸ")
                return data
                
            except ConnectionError as e:
                print(f"âŒ è¿æ¥é”™è¯¯ï¼š{e}")
                if attempt < self.max_retries - 1:
                    wait_time = 2 ** attempt  # æŒ‡æ•°é€€é¿
                    print(f"ç­‰å¾… {wait_time} ç§’åé‡è¯•...")
                    time.sleep(wait_time)
                else:
                    print("âŒ è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œè¯·æ±‚å¤±è´¥")
                    raise
                    
            except TimeoutError as e:
                print(f"âŒ è¯·æ±‚è¶…æ—¶ï¼š{e}")
                if attempt < self.max_retries - 1:
                    print("é‡æ–°å°è¯•...")
                else:
                    raise
                    
            except ValueError as e:
                # æ•°æ®æ ¼å¼é”™è¯¯ï¼Œä¸éœ€è¦é‡è¯•
                print(f"âŒ æ•°æ®æ ¼å¼é”™è¯¯ï¼š{e}")
                raise
                
            except Exception as e:
                print(f"âŒ æœªçŸ¥ç½‘ç»œé”™è¯¯ï¼š{e}")
                raise
    
    def _simulate_request(self, url):
        """æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚"""
        # æ¨¡æ‹Ÿå„ç§å¯èƒ½çš„æƒ…å†µ
        outcome = random.choice([0, 1, 2, 3, 4])
        
        if outcome == 0:
            # æˆåŠŸ
            return {"status": "success", "data": "æ¨¡æ‹Ÿæ•°æ®"}
        elif outcome == 1:
            # è¿æ¥é”™è¯¯
            raise ConnectionError("æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨")
        elif outcome == 2:
            # è¶…æ—¶
            raise TimeoutError("è¯·æ±‚è¶…æ—¶")
        elif outcome == 3:
            # æ•°æ®æ ¼å¼é”™è¯¯
            raise ValueError("æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼é”™è¯¯")
        else:
            # å…¶ä»–é”™è¯¯
            raise RuntimeError("æœåŠ¡å™¨å†…éƒ¨é”™è¯¯")

# ä½¿ç”¨ç¤ºä¾‹
client = NetworkClient(max_retries=3)

try:
    result = client.fetch_data("https://api.example.com/data")
    print(f"è·å–åˆ°æ•°æ®ï¼š{result}")
except Exception as e:
    print(f"æœ€ç»ˆå¤±è´¥ï¼š{e}")
```

### 6.3 æ•°æ®éªŒè¯å¼‚å¸¸å¤„ç†


**ç”¨æˆ·è¾“å…¥éªŒè¯**ï¼š
```python
class UserValidator:
    """ç”¨æˆ·æ•°æ®éªŒè¯å™¨"""
    
    @staticmethod
    def validate_username(username):
        """éªŒè¯ç”¨æˆ·å"""
        if not isinstance(username, str):
            raise TypeError("ç”¨æˆ·åå¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        if len(username) < 3:
            raise ValueError("ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦")
        
        if len(username) > 20:
            raise ValueError("ç”¨æˆ·åä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦")
        
        if not username.replace('_', '').isalnum():
            raise ValueError("ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿")
        
        return True
    
    @staticmethod 
    def validate_password(password):
        """éªŒè¯å¯†ç """
        if not isinstance(password, str):
            raise TypeError("å¯†ç å¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        if len(password) < 8:
            raise ValueError("å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦")
        
        has_upper = any(c.isupper() for c in password)
        has_lower = any(c.islower() for c in password)
        has_digit = any(c.isdigit() for c in password)
        
        if not (has_upper and has_lower and has_digit):
            raise ValueError("å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯ã€å°å†™å­—æ¯å’Œæ•°å­—")
        
        return True
    
    @staticmethod
    def validate_email(email):
        """éªŒè¯é‚®ç®±"""
        if not isinstance(email, str):
            raise TypeError("é‚®ç®±å¿…é¡»æ˜¯å­—ç¬¦ä¸²")
        
        if '@' not in email:
            raise ValueError("é‚®ç®±å¿…é¡»åŒ…å«@ç¬¦å·")
        
        parts = email.split('@')
        if len(parts) != 2:
            raise ValueError("é‚®ç®±æ ¼å¼é”™è¯¯")
        
        username_part, domain_part = parts
        
        if len(username_part) == 0:
            raise ValueError("é‚®ç®±ç”¨æˆ·åéƒ¨åˆ†ä¸èƒ½ä¸ºç©º")
        
        if '.' not in domain_part:
            raise ValueError("é‚®ç®±åŸŸåå¿…é¡»åŒ…å«ç‚¹å·")
        
        return True

def register_user(username, password, email):
    """ç”¨æˆ·æ³¨å†Œ"""
    errors = []
    
    # éªŒè¯ç”¨æˆ·å
    try:
        UserValidator.validate_username(username)
        print("âœ… ç”¨æˆ·åéªŒè¯é€šè¿‡")
    except (TypeError, ValueError) as e:
        errors.append(f"ç”¨æˆ·åé”™è¯¯ï¼š{e}")
    
    # éªŒè¯å¯†ç 
    try:
        UserValidator.validate_password(password)
        print("âœ… å¯†ç éªŒè¯é€šè¿‡")
    except (TypeError, ValueError) as e:
        errors.append(f"å¯†ç é”™è¯¯ï¼š{e}")
    
    # éªŒè¯é‚®ç®±
    try:
        UserValidator.validate_email(email)
        print("âœ… é‚®ç®±éªŒè¯é€šè¿‡")
    except (TypeError, ValueError) as e:
        errors.append(f"é‚®ç®±é”™è¯¯ï¼š{e}")
    
    # å¦‚æœæœ‰é”™è¯¯ï¼ŒæŠ›å‡ºç»¼åˆå¼‚å¸¸
    if errors:
        error_message = "\n".join(errors)
        raise ValueError(f"ç”¨æˆ·æ³¨å†Œæ•°æ®éªŒè¯å¤±è´¥ï¼š\n{error_message}")
    
    print("ğŸ‰ ç”¨æˆ·æ³¨å†ŒæˆåŠŸï¼")
    return True

# æµ‹è¯•ä¸åŒçš„ç”¨æˆ·æ•°æ®
test_users = [
    ("john", "Password123", "john@example.com"),      # æ­£ç¡®æ•°æ®
    ("jo", "pass", "invalid-email"),                  # å¤šä¸ªé”™è¯¯
    ("valid_user", "ValidPass123", "user@domain.com") # æ­£ç¡®æ•°æ®
]

for username, password, email in test_users:
    try:
        print(f"\n--- æ³¨å†Œç”¨æˆ·ï¼š{username} ---")
        register_user(username, password, email)
    except ValueError as e:
        print(f"âŒ æ³¨å†Œå¤±è´¥ï¼š\n{e}")
```

---

## 7. ğŸ“š æœ€ä½³å®è·µæŒ‡å—


### 7.1 å¼‚å¸¸å¤„ç†è®¾è®¡åŸåˆ™


**ğŸ¯ æ ¸å¿ƒåŸåˆ™**ï¼š

```
1. ğŸ¯ æ˜ç¡®æ€§åŸåˆ™ï¼šå¼‚å¸¸ä¿¡æ¯è¦æ¸…æ¥šå…·ä½“
   âŒ åçš„ï¼šraise Exception("é”™è¯¯")
   âœ… å¥½çš„ï¼šraise ValueError(f"å¹´é¾„ {age} å¿…é¡»åœ¨ 0-150 ä¹‹é—´")

2. ğŸ” å…·ä½“æ€§åŸåˆ™ï¼šæ•è·å…·ä½“çš„å¼‚å¸¸ç±»å‹
   âŒ åçš„ï¼šexcept Exception:
   âœ… å¥½çš„ï¼šexcept (ValueError, TypeError):

3. ğŸ›¡ï¸ æœ€å°èŒƒå›´åŸåˆ™ï¼šåªæ•è·èƒ½å¤„ç†çš„å¼‚å¸¸
   âŒ åçš„ï¼šåœ¨mainå‡½æ•°æ•è·æ‰€æœ‰å¼‚å¸¸
   âœ… å¥½çš„ï¼šåœ¨å…·ä½“æ“ä½œå¤„æ•è·ç›¸å…³å¼‚å¸¸

4. ğŸ“ è®°å½•åŸåˆ™ï¼šé‡è¦å¼‚å¸¸è¦è®°å½•æ—¥å¿—
   âœ… è®°å½•å¼‚å¸¸å‘ç”Ÿçš„æ—¶é—´ã€åœ°ç‚¹ã€åŸå› 
```

### 7.2 å¼‚å¸¸å¤„ç†æ¨¡å¼


**å¸¸ç”¨çš„å¼‚å¸¸å¤„ç†æ¨¡å¼**ï¼š

```python
import logging

# é…ç½®æ—¥å¿—
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# æ¨¡å¼1ï¼štry-except-else-finally
def file_operation_pattern(filename):
    """æ–‡ä»¶æ“ä½œæ¨¡å¼"""
    file_handle = None
    try:
        file_handle = open(filename, 'r')
        data = file_handle.read()
        
    except FileNotFoundError:
        logger.error(f"æ–‡ä»¶ {filename} ä¸å­˜åœ¨")
        return None
        
    except PermissionError:
        logger.error(f"æ²¡æœ‰æƒé™è¯»å–æ–‡ä»¶ {filename}")
        return None
        
    else:
        # åªæœ‰tryå—æˆåŠŸæ—¶æ‰æ‰§è¡Œ
        logger.info(f"æˆåŠŸè¯»å–æ–‡ä»¶ {filename}")
        return data
        
    finally:
        # æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ
        if file_handle:
            file_handle.close()
            logger.info("æ–‡ä»¶å·²å…³é—­")

# æ¨¡å¼2ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¨¡å¼ï¼ˆæ¨èï¼‰
def context_manager_pattern(filename):
    """ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¨¡å¼"""
    try:
        with open(filename, 'r') as f:
            data = f.read()
        logger.info(f"æˆåŠŸè¯»å–æ–‡ä»¶ {filename}")
        return data
        
    except FileNotFoundError:
        logger.error(f"æ–‡ä»¶ {filename} ä¸å­˜åœ¨")
        return None
    except PermissionError:
        logger.error(f"æ²¡æœ‰æƒé™è¯»å–æ–‡ä»¶ {filename}")
        return None

# æ¨¡å¼3ï¼šå¼‚å¸¸è½¬æ¢æ¨¡å¼
def exception_conversion_pattern(user_input):
    """å¼‚å¸¸è½¬æ¢æ¨¡å¼"""
    try:
        number = int(user_input)
        return number
    except ValueError:
        # å°†åº•å±‚å¼‚å¸¸è½¬æ¢ä¸ºæ›´æœ‰æ„ä¹‰çš„å¼‚å¸¸
        raise ValueError(f"'{user_input}' ä¸æ˜¯æœ‰æ•ˆçš„æ•°å­—") from None

# æ¨¡å¼4ï¼šå¼‚å¸¸é“¾æ¨¡å¼
def exception_chaining_pattern(data):
    """å¼‚å¸¸é“¾æ¨¡å¼"""
    try:
        processed_data = complex_processing(data)
        return processed_data
    except ValueError as e:
        # ä¿ç•™åŸå§‹å¼‚å¸¸ä¿¡æ¯
        raise RuntimeError(f"æ•°æ®å¤„ç†å¤±è´¥") from e

def complex_processing(data):
    """å¤æ‚æ•°æ®å¤„ç†"""
    if not isinstance(data, list):
        raise ValueError("æ•°æ®å¿…é¡»æ˜¯åˆ—è¡¨ç±»å‹")
    return data
```

### 7.3 å¼‚å¸¸å¤„ç†åæ¨¡å¼ï¼ˆè¦é¿å…çš„åšæ³•ï¼‰


**âŒ å¸¸è§é”™è¯¯åšæ³•**ï¼š

```python
# åæ¨¡å¼1ï¼šç©ºçš„exceptå—
def bad_pattern_1():
    try:
        risky_operation()
    except:
        pass  # âŒ å¿½ç•¥æ‰€æœ‰å¼‚å¸¸ï¼Œå¾ˆå±é™©

# æ­£ç¡®åšæ³•
def good_pattern_1():
    try:
        risky_operation()
    except SpecificException as e:
        logger.error(f"æ“ä½œå¤±è´¥ï¼š{e}")
        # é‡‡å–é€‚å½“çš„åº”å¯¹æªæ–½

# åæ¨¡å¼2ï¼šæ•è·è¿‡äºå®½æ³›çš„å¼‚å¸¸
def bad_pattern_2():
    try:
        calculate_something()
    except Exception:  # âŒ æ•è·æ‰€æœ‰å¼‚å¸¸
        return None

# æ­£ç¡®åšæ³•
def good_pattern_2():
    try:
        return calculate_something()
    except (ValueError, ZeroDivisionError) as e:  # âœ… æ•è·å…·ä½“å¼‚å¸¸
        logger.error(f"è®¡ç®—é”™è¯¯ï¼š{e}")
        return None

# åæ¨¡å¼3ï¼šå¼‚å¸¸ç”¨äºæ§åˆ¶æµç¨‹
def bad_pattern_3(items):
    try:
        for i in range(1000):  # âŒ ç”¨å¼‚å¸¸æ¥é€€å‡ºå¾ªç¯
            print(items[i])
    except IndexError:
        pass

# æ­£ç¡®åšæ³•
def good_pattern_3(items):
    for item in items:  # âœ… ç”¨æ­£å¸¸çš„å¾ªç¯æ§åˆ¶
        print(item)

def risky_operation():
    """æ¨¡æ‹Ÿå¯èƒ½å‡ºé”™çš„æ“ä½œ"""
    pass

def calculate_something():
    """æ¨¡æ‹Ÿè®¡ç®—æ“ä½œ"""
    return 42
```

### 7.4 æ€§èƒ½è€ƒè™‘


**å¼‚å¸¸å¤„ç†çš„æ€§èƒ½å½±å“**ï¼š

```python
import time

def performance_comparison():
    """å¼‚å¸¸å¤„ç†æ€§èƒ½æ¯”è¾ƒ"""
    
    # æ–¹æ³•1ï¼šä½¿ç”¨å¼‚å¸¸å¤„ç†ï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰
    def with_exception(numbers):
        results = []
        for item in numbers:
            try:
                results.append(int(item))
            except ValueError:
                results.append(0)
        return results
    
    # æ–¹æ³•2ï¼šä½¿ç”¨æ¡ä»¶åˆ¤æ–­ï¼ˆæ€§èƒ½è¾ƒå¥½ï¼‰
    def with_condition(numbers):
        results = []
        for item in numbers:
            if item.isdigit():
                results.append(int(item))
            else:
                results.append(0)
        return results
    
    # æµ‹è¯•æ•°æ®ï¼ˆå¤§éƒ¨åˆ†æ˜¯æœ‰æ•ˆæ•°å­—ï¼‰
    test_data = ['1', '2', '3', '4', '5'] * 10000 + ['abc'] * 100
    
    # æµ‹è¯•å¼‚å¸¸å¤„ç†æ–¹æ³•
    start_time = time.time()
    result1 = with_exception(test_data)
    time1 = time.time() - start_time
    
    # æµ‹è¯•æ¡ä»¶åˆ¤æ–­æ–¹æ³•
    start_time = time.time()
    result2 = with_condition(test_data)
    time2 = time.time() - start_time
    
    print(f"å¼‚å¸¸å¤„ç†æ–¹æ³•ç”¨æ—¶ï¼š{time1:.4f}ç§’")
    print(f"æ¡ä»¶åˆ¤æ–­æ–¹æ³•ç”¨æ—¶ï¼š{time2:.4f}ç§’")
    print(f"æ€§èƒ½å·®å¼‚ï¼š{time1/time2:.2f}å€")

# performance_comparison()

# æ€§èƒ½å»ºè®®
performance_tips = """
ğŸš€ å¼‚å¸¸å¤„ç†æ€§èƒ½å»ºè®®ï¼š

1. å¼‚å¸¸æ˜¯å¼‚å¸¸æƒ…å†µï¼Œä¸æ˜¯æ­£å¸¸æµç¨‹æ§åˆ¶
   âœ… ç”¨äºå¤„ç†æ–‡ä»¶ä¸å­˜åœ¨ã€ç½‘ç»œé”™è¯¯ç­‰
   âŒ ä¸è¦ç”¨äºå¾ªç¯æ§åˆ¶ã€æ•°æ®éªŒè¯ç­‰

2. é¢„é˜²èƒœäºå¤„ç†
   âœ… å…ˆæ£€æŸ¥æ¡ä»¶ï¼Œå†æ‰§è¡Œæ“ä½œ
   âŒ ä¸è¦ä¾èµ–å¼‚å¸¸æ¥å¤„ç†å¯é¢„è§çš„æƒ…å†µ

3. å¼‚å¸¸æ•è·èŒƒå›´å°½é‡å°
   âœ… åªåœ¨å¯èƒ½å‡ºé”™çš„ä»£ç å‘¨å›´ä½¿ç”¨try
   âŒ ä¸è¦æŠŠæ•´ä¸ªå‡½æ•°éƒ½æ”¾åœ¨tryå—ä¸­

4. é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹æ•è·å¼‚å¸¸
   âœ… æŠŠtry-exceptæ”¾åœ¨å¾ªç¯å¤–éƒ¨
   âŒ ä¸è¦åœ¨æ¯æ¬¡å¾ªç¯éƒ½æ•è·å¼‚å¸¸
"""

print(performance_tips)
```

### 7.5 è°ƒè¯•å’Œæµ‹è¯•


**å¼‚å¸¸ç›¸å…³çš„è°ƒè¯•æŠ€å·§**ï¼š

```python
import traceback
import sys

def debugging_techniques():
    """å¼‚å¸¸è°ƒè¯•æŠ€å·§"""
    
    def problematic_function(data):
        """æœ‰é—®é¢˜çš„å‡½æ•°"""
        return data['key']['subkey']  # å¯èƒ½å‡ºé”™
    
    # æŠ€å·§1ï¼šè·å–è¯¦ç»†å †æ ˆä¿¡æ¯
    def get_detailed_error_info():
        test_data = {'key': None}
        try:
            result = problematic_function(test_data)
        except Exception as e:
            # è·å–å¼‚å¸¸ç±»å‹ã€å€¼å’Œå †æ ˆè·Ÿè¸ª
            exc_type, exc_value, exc_traceback = sys.exc_info()
            
            print("=== è¯¦ç»†é”™è¯¯ä¿¡æ¯ ===")
            print(f"å¼‚å¸¸ç±»å‹ï¼š{exc_type.__name__}")
            print(f"å¼‚å¸¸å€¼ï¼š{exc_value}")
            print(f"å‘ç”Ÿä½ç½®ï¼š{exc_traceback.tb_frame.f_code.co_filename}")
            print(f"è¡Œå·ï¼š{exc_traceback.tb_lineno}")
            
            print("\n=== å®Œæ•´å †æ ˆè·Ÿè¸ª ===")
            traceback.print_exc()
    
    # æŠ€å·§2ï¼šè‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨
    def custom_exception_handler(exc_type, exc_value, exc_traceback):
        """è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨"""
        if issubclass(exc_type, KeyboardInterrupt):
            # å¯¹äºç”¨æˆ·ä¸­æ–­ï¼Œç®€å•å¤„ç†
            print("ç¨‹åºè¢«ç”¨æˆ·ä¸­æ–­")
            return
        
        print("=== æœªå¤„ç†çš„å¼‚å¸¸ ===")
        print(f"ç±»å‹ï¼š{exc_type.__name__}")
        print(f"æ¶ˆæ¯ï¼š{exc_value}")
        traceback.print_exception(exc_type, exc_value, exc_traceback)
    
    # è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†å™¨
    # sys.excepthook = custom_exception_handler
    
    # æŠ€å·§3ï¼šå¼‚å¸¸æµ‹è¯•
    def test_exception_handling():
        """æµ‹è¯•å¼‚å¸¸å¤„ç†"""
        test_cases = [
            {'key': {'subkey': 'value'}},  # æ­£å¸¸æƒ…å†µ
            {'key': None},                 # TypeError
            {},                           # KeyError
            None                          # AttributeError
        ]
        
        for i, test_data in enumerate(test_cases):
            print(f"\n--- æµ‹è¯•ç”¨ä¾‹ {i+1} ---")
            print(f"è¾“å…¥ï¼š{test_data}")
            
            try:
                result = problematic_function(test_data)
                print(f"âœ… æˆåŠŸï¼š{result}")
            except Exception as e:
                print(f"âŒ å¼‚å¸¸ï¼š{type(e).__name__}: {e}")
    
    get_detailed_error_info()
    test_exception_handling()

debugging_techniques()
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ å¼‚å¸¸å¤„ç†æœ¬è´¨ï¼šé¢„é˜²ç¨‹åºå´©æºƒï¼Œæä¾›é”™è¯¯ä¿¡æ¯å’Œæ¢å¤æœºåˆ¶
ğŸ”¸ raiseä½œç”¨ï¼šä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼ŒæŠ¥å‘Šå‘ç°çš„é—®é¢˜
ğŸ”¸ assertä½œç”¨ï¼šå¼€å‘æ—¶æ£€æŸ¥ç¨‹åºçŠ¶æ€ï¼Œç±»ä¼¼ç¨‹åº"ä½“æ£€"
ğŸ”¸ Exceptionç±»ï¼šé€šç”¨å¼‚å¸¸ç±»ï¼Œæè¿°ç¨‹åºè¿è¡Œæ—¶çš„é”™è¯¯
ğŸ”¸ BaseExceptionç±»ï¼šæ‰€æœ‰å¼‚å¸¸çš„åŸºç±»ï¼ŒåŒ…æ‹¬ç³»ç»Ÿçº§å¼‚å¸¸
ğŸ”¸ å¼‚å¸¸å±‚æ¬¡ï¼šBaseException > Exception > å…·ä½“å¼‚å¸¸ç±»å‹
ğŸ”¸ ä½¿ç”¨åŸåˆ™ï¼šå…·ä½“å¼‚å¸¸å…·ä½“å¤„ç†ï¼Œé¿å…è¿‡äºå®½æ³›çš„æ•è·
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¼‚å¸¸å¤„ç†çš„è®¾è®¡æ€æƒ³**ï¼š
```
é¢„é˜²ä¸ºä¸»ï¼š
â€¢ ç”¨assertæ£€æŸ¥ç¨‹åºå†…éƒ¨çŠ¶æ€
â€¢ ç”¨æ¡ä»¶åˆ¤æ–­å¤„ç†å¯é¢„è§çš„æƒ…å†µ
â€¢ ç”¨å¼‚å¸¸å¤„ç†æ„å¤–çš„é”™è¯¯æƒ…å†µ

åˆ†å±‚å¤„ç†ï¼š
â€¢ åº•å±‚å‡½æ•°ï¼šæŠ›å‡ºå…·ä½“å¼‚å¸¸
â€¢ ä¸­å±‚å‡½æ•°ï¼šè½¬æ¢æˆ–åŒ…è£…å¼‚å¸¸
â€¢ é¡¶å±‚å‡½æ•°ï¼šæ•è·å¹¶å¤„ç†å¼‚å¸¸

ç”¨æˆ·å‹å¥½ï¼š
â€¢ å¯¹å†…ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
â€¢ å¯¹å¤–ï¼šæä¾›å‹å¥½çš„é”™è¯¯æç¤º
```

**ğŸ”¹ raise vs assertçš„ä½¿ç”¨åœºæ™¯**ï¼š
```
ä½¿ç”¨raiseçš„æƒ…å†µï¼š
âœ… ç”¨æˆ·è¾“å…¥é”™è¯¯
âœ… å¤–éƒ¨èµ„æºé—®é¢˜ï¼ˆæ–‡ä»¶ã€ç½‘ç»œï¼‰
âœ… ä¸šåŠ¡é€»è¾‘é”™è¯¯
âœ… è¿è¡Œæ—¶é”™è¯¯

ä½¿ç”¨assertçš„æƒ…å†µï¼š
âœ… æ£€æŸ¥å‡½æ•°å‚æ•°çš„ç±»å‹å’ŒèŒƒå›´
âœ… éªŒè¯ç¨‹åºå†…éƒ¨çŠ¶æ€
âœ… æ£€æŸ¥æ•°æ®ç»“æ„çš„å®Œæ•´æ€§
âœ… å¼€å‘å’Œè°ƒè¯•é˜¶æ®µçš„éªŒè¯
```

**ğŸ”¹ Exception vs BaseExceptionçš„åŒºåˆ«**ï¼š
```
Exceptionç‰¹ç‚¹ï¼š
â€¢ ç”¨äºä¸€èˆ¬çš„ç¨‹åºé”™è¯¯
â€¢ å¯ä»¥è¢« except Exception æ•è·
â€¢ åº”è¯¥è¢«åº”ç”¨ç¨‹åºå¤„ç†

BaseExceptionç‰¹ç‚¹ï¼š
â€¢ åŒ…æ‹¬ç³»ç»Ÿçº§å¼‚å¸¸
â€¢ SystemExitã€KeyboardInterruptç­‰ä¸ä¼šè¢«Exceptionæ•è·
â€¢ é€šå¸¸ä¸åº”è¯¥è¢«æ™®é€šä»£ç å¤„ç†
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ æ—¥å¸¸ç¼–ç¨‹å»ºè®®**ï¼š
```
å¼‚å¸¸å¤„ç†ç­–ç•¥ï¼š
1. ğŸ¯ æ˜ç¡®å¼‚å¸¸è¾¹ç•Œï¼šå“ªäº›æ˜¯ä½ çš„ä»£ç èƒ½å¤„ç†çš„
2. ğŸ” é€‰æ‹©åˆé€‚çš„å¼‚å¸¸ç±»å‹ï¼šValueErrorã€TypeErrorç­‰
3. ğŸ“ æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼šåŒ…å«ä¸Šä¸‹æ–‡å’Œè§£å†³å»ºè®®
4. ğŸ›¡ï¸ ä¿æŒç¨‹åºç¨³å®šï¼šå¼‚å¸¸ä¸åº”è¯¥å¯¼è‡´ç¨‹åºå´©æºƒ
5. ğŸ”§ ä¾¿äºè°ƒè¯•ï¼šè®°å½•è¶³å¤Ÿçš„ä¿¡æ¯ç”¨äºé—®é¢˜å®šä½
```

**ğŸ¯ ä»£ç è´¨é‡æå‡**ï¼š
```
å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µï¼š
â€¢ å¼‚å¸¸ä¿¡æ¯è¦è¯¦ç»†å…·ä½“
â€¢ æ•è·å¼‚å¸¸è¦æœ‰é’ˆå¯¹æ€§
â€¢ å¤„ç†å¼‚å¸¸è¦æœ‰æ„ä¹‰
â€¢ æ—¥å¿—è®°å½•è¦å®Œæ•´
â€¢ æµ‹è¯•è¦è¦†ç›–å¼‚å¸¸æƒ…å†µ
```

**ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
æ€§èƒ½è€ƒè™‘ï¼š
â€¢ å¼‚å¸¸å¤„ç†æœ‰æ€§èƒ½å¼€é”€ï¼Œä¸è¦ç”¨äºæ­£å¸¸æµç¨‹
â€¢ æ¡ä»¶åˆ¤æ–­é€šå¸¸æ¯”å¼‚å¸¸æ•è·æ›´å¿«
â€¢ å¼‚å¸¸ä¿¡æ¯çš„æ„é€ ä¹Ÿæœ‰æˆæœ¬
â€¢ é¢‘ç¹å¼‚å¸¸ä¼šå½±å“ç¨‹åºæ€§èƒ½
```

### 8.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š å­¦ä¹ é˜¶æ®µ**ï¼š
```
é˜¶æ®µä¸€ï¼šåŸºç¡€ç†è§£
â€¢ ç†è§£å¼‚å¸¸å¤„ç†çš„åŸºæœ¬æ¦‚å¿µ
â€¢ æŒæ¡try-exceptçš„åŸºæœ¬ç”¨æ³•
â€¢ å­¦ä¼šä½¿ç”¨raiseæŠ›å‡ºå¼‚å¸¸
â€¢ äº†è§£å¸¸è§çš„å¼‚å¸¸ç±»å‹

é˜¶æ®µäºŒï¼šè¿›é˜¶åº”ç”¨  
â€¢ æŒæ¡assertçš„ä½¿ç”¨åœºæ™¯
â€¢ å­¦ä¼šåˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»
â€¢ ç†è§£å¼‚å¸¸å±‚æ¬¡ç»“æ„
â€¢ æŒæ¡å¼‚å¸¸å¤„ç†çš„æœ€ä½³å®è·µ

é˜¶æ®µä¸‰ï¼šä¸“ä¸šåº”ç”¨
â€¢ è®¾è®¡å¼‚å¸¸å¤„ç†æ¶æ„
â€¢ æ€§èƒ½ä¼˜åŒ–å’Œè°ƒè¯•æŠ€å·§
â€¢ å¤æ‚é¡¹ç›®çš„å¼‚å¸¸å¤„ç†ç­–ç•¥
â€¢ ä¸æ—¥å¿—ç³»ç»Ÿçš„é›†æˆ
```

**ğŸ¯ å®è·µå»ºè®®**ï¼š
```
åŠ¨æ‰‹ç»ƒä¹ ï¼š
1. ç¼–å†™æ–‡ä»¶æ“ä½œçš„å®Œæ•´å¼‚å¸¸å¤„ç†
2. å®ç°ç”¨æˆ·è¾“å…¥éªŒè¯ç³»ç»Ÿ
3. è®¾è®¡ç½‘ç»œè¯·æ±‚çš„é‡è¯•æœºåˆ¶
4. åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»å±‚æ¬¡
5. ç¼–å†™å¼‚å¸¸å¤„ç†çš„å•å…ƒæµ‹è¯•
```

### 8.5 å¸¸è§é—®é¢˜è§£ç­”


**â“ ä»€ä¹ˆæ—¶å€™ç”¨assertï¼Œä»€ä¹ˆæ—¶å€™ç”¨ifåˆ¤æ–­ï¼Ÿ**
```
ç­”ï¼š
assertç”¨äºï¼šç¨‹åºå‘˜é”™è¯¯ï¼Œå¼€å‘é˜¶æ®µæ£€æŸ¥
ifç”¨äºï¼šç”¨æˆ·é”™è¯¯ï¼Œè¿è¡Œæ—¶å¤„ç†

ç¤ºä¾‹ï¼š
assert len(password) >= 8  # å†…éƒ¨æ£€æŸ¥ï¼Œç¡®ä¿ä¼ å…¥çš„å¯†ç ç¬¦åˆé¢„æœŸ
if len(user_input) < 8:    # å¤–éƒ¨æ£€æŸ¥ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥é”™è¯¯
    raise ValueError("å¯†ç å¤ªçŸ­")
```

**â“ åº”è¯¥æ•è·Exceptionè¿˜æ˜¯å…·ä½“çš„å¼‚å¸¸ç±»å‹ï¼Ÿ**
```
ç­”ï¼šä¼˜å…ˆæ•è·å…·ä½“å¼‚å¸¸ç±»å‹

åŸå› ï¼š
â€¢ æ›´ç²¾ç¡®çš„é”™è¯¯å¤„ç†
â€¢ é¿å…éšè—æœªé¢„æœŸçš„é”™è¯¯
â€¢ æä¾›æ›´å¥½çš„é”™è¯¯ä¿¡æ¯
â€¢ ä¾¿äºè°ƒè¯•å’Œç»´æŠ¤
```

**â“ ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Ÿ**
```
ç­”ï¼šä»¥ä¸‹æƒ…å†µè€ƒè™‘è‡ªå®šä¹‰å¼‚å¸¸ï¼š
â€¢ éœ€è¦ä¼ é€’é¢å¤–çš„é”™è¯¯ä¿¡æ¯
â€¢ ä¸šåŠ¡é€»è¾‘éœ€è¦åŒºåˆ†ä¸åŒç±»å‹çš„é”™è¯¯
â€¢ å¸Œæœ›è°ƒç”¨è€…èƒ½å¤Ÿåˆ†åˆ«å¤„ç†ä¸åŒé”™è¯¯
â€¢ æ„å»ºå¼‚å¸¸å¤„ç†å±‚æ¬¡ç»“æ„
```

**ğŸ§  è®°å¿†è¦ç‚¹**ï¼š
- å¼‚å¸¸å¤„ç†è®©ç¨‹åºæ›´å¥å£®ï¼Œé”™è¯¯ä¿¡æ¯æ›´æ¸…æ™°
- raiseä¸»åŠ¨æŠ¥é”™ï¼Œassertæ£€æŸ¥çŠ¶æ€ï¼ŒExceptionæè¿°é”™è¯¯
- å…·ä½“å¼‚å¸¸å…·ä½“å¤„ç†ï¼Œä¸è¦ä¸€ç½‘æ‰“å°½
- å¼‚å¸¸æ˜¯å¼‚å¸¸æƒ…å†µï¼Œä¸æ˜¯æ­£å¸¸æµç¨‹æ§åˆ¶
- æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯æ˜¯å¥½ç¨‹åºçš„é‡è¦æ ‡å¿—

**æ ¸å¿ƒç†å¿µ**ï¼šå¼‚å¸¸å¤„ç†ä¸æ˜¯ä¸ºäº†éšè—é”™è¯¯ï¼Œè€Œæ˜¯ä¸ºäº†æ›´å¥½åœ°ç†è§£å’Œå¤„ç†é”™è¯¯ï¼Œè®©ç¨‹åºåœ¨é¢å¯¹æ„å¤–æƒ…å†µæ—¶èƒ½å¤Ÿä¼˜é›…åœ°å“åº”ï¼