---
title: 2ã€æµ‹è¯•é«˜çº§æŠ€å·§
---
## ğŸ“š ç›®å½•

1. [å‚æ•°åŒ–æµ‹è¯•è¯¦è§£](#1-å‚æ•°åŒ–æµ‹è¯•è¯¦è§£)
2. [æ•°æ®é©±åŠ¨æµ‹è¯•å®è·µ](#2-æ•°æ®é©±åŠ¨æµ‹è¯•å®è·µ)
3. [æµ‹è¯•æ¨¡æ‹Ÿï¼ˆMockï¼‰æ·±å…¥ç†è§£](#3-æµ‹è¯•æ¨¡æ‹Ÿmockæ·±å…¥ç†è§£)
4. [æµ‹è¯•æ›¿èº«æ¨¡å¼åº”ç”¨](#4-æµ‹è¯•æ›¿èº«æ¨¡å¼åº”ç”¨)
5. [æµ‹è¯•è¦†ç›–ç‡åˆ†æ](#5-æµ‹è¯•è¦†ç›–ç‡åˆ†æ)
6. [é›†æˆæµ‹è¯•ç­–ç•¥](#6-é›†æˆæµ‹è¯•ç­–ç•¥)
7. [ç«¯åˆ°ç«¯æµ‹è¯•å®ç°](#7-ç«¯åˆ°ç«¯æµ‹è¯•å®ç°)
8. [Coverage.pyå·¥å…·è¯¦è§£](#8-coveragepyå·¥å…·è¯¦è§£)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å‚æ•°åŒ–æµ‹è¯•è¯¦è§£


### 1.1 ä»€ä¹ˆæ˜¯å‚æ•°åŒ–æµ‹è¯•


**ç®€å•ç†è§£**ï¼šå°±åƒç”¨åŒä¸€ä¸ªæ¨¡æ¿æµ‹è¯•ä¸åŒçš„æ•°æ®ï¼Œé¿å…é‡å¤å†™ç›¸ä¼¼çš„æµ‹è¯•ä»£ç ã€‚

```
æƒ³è±¡åœºæ™¯ï¼šæµ‹è¯•ä¸€ä¸ªåŠ æ³•å‡½æ•°
æ™®é€šæ–¹å¼ï¼šå†™3ä¸ªæµ‹è¯•æ–¹æ³•æµ‹è¯• 1+1, 2+2, 3+3
å‚æ•°åŒ–æ–¹å¼ï¼šå†™1ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œä¼ å…¥3ç»„ä¸åŒå‚æ•°

å¥½å¤„ï¼šä»£ç ç®€æ´ï¼Œæµ‹è¯•å…¨é¢ï¼Œç»´æŠ¤æ–¹ä¾¿
```

### 1.2 pytestå‚æ•°åŒ–æµ‹è¯•


**ğŸ”¸ åŸºç¡€è¯­æ³•**
```python
import pytest

# å‚æ•°åŒ–æµ‹è¯•ï¼šä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œå¤šç»„æ•°æ®
@pytest.mark.parametrize("è¾“å…¥å‚æ•°å", [å‚æ•°å€¼åˆ—è¡¨])
def test_å‡½æ•°å(è¾“å…¥å‚æ•°å):
    # æµ‹è¯•é€»è¾‘
```

**ğŸ’¡ å®é™…ç¤ºä¾‹**
```python
import pytest

def add_numbers(a, b):
    """ç®€å•çš„åŠ æ³•å‡½æ•°"""
    return a + b

# æµ‹è¯•å¤šç»„åŠ æ³•è¿ç®—
@pytest.mark.parametrize("a, b, expected", [
    (1, 1, 2),      # ç¬¬1ç»„ï¼š1+1=2
    (2, 3, 5),      # ç¬¬2ç»„ï¼š2+3=5  
    (0, 0, 0),      # ç¬¬3ç»„ï¼š0+0=0
    (-1, 1, 0),     # ç¬¬4ç»„ï¼š-1+1=0
])
def test_add_numbers(a, b, expected):
    result = add_numbers(a, b)
    assert result == expected
```

### 1.3 å¤šå‚æ•°ç»„åˆæµ‹è¯•


**ğŸ”¸ å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•**
```python
# æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†å‡½æ•°
def clean_string(text, remove_spaces=False, to_upper=False):
    if remove_spaces:
        text = text.replace(" ", "")
    if to_upper:
        text = text.upper()
    return text

@pytest.mark.parametrize("input_text, remove_spaces, to_upper, expected", [
    ("hello world", False, False, "hello world"),     # ä¸å¤„ç†
    ("hello world", True, False, "helloworld"),       # åªå»ç©ºæ ¼
    ("hello world", False, True, "HELLO WORLD"),      # åªè½¬å¤§å†™
    ("hello world", True, True, "HELLOWORLD"),        # ä¸¤ç§éƒ½å¤„ç†
])
def test_clean_string(input_text, remove_spaces, to_upper, expected):
    result = clean_string(input_text, remove_spaces, to_upper)
    assert result == expected
```

### 1.4 å¼‚å¸¸æµ‹è¯•å‚æ•°åŒ–


**ğŸ”¸ æµ‹è¯•é¢„æœŸå¼‚å¸¸**
```python
def divide_numbers(a, b):
    if b == 0:
        raise ValueError("é™¤æ•°ä¸èƒ½ä¸º0")
    return a / b

@pytest.mark.parametrize("a, b, expected_exception", [
    (10, 0, ValueError),           # é™¤é›¶å¼‚å¸¸
    ("10", 2, TypeError),          # ç±»å‹é”™è¯¯
])
def test_divide_numbers_exceptions(a, b, expected_exception):
    with pytest.raises(expected_exception):
        divide_numbers(a, b)
```

---

## 2. ğŸ“Š æ•°æ®é©±åŠ¨æµ‹è¯•å®è·µ


### 2.1 æ•°æ®é©±åŠ¨æµ‹è¯•çš„æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šæµ‹è¯•æ•°æ®å’Œæµ‹è¯•é€»è¾‘åˆ†ç¦»ï¼Œæ•°æ®æ¥æºäºå¤–éƒ¨æ–‡ä»¶ï¼ˆå¦‚CSVã€JSONï¼‰ã€‚

```
ä¼ ç»Ÿæµ‹è¯•ï¼šæµ‹è¯•ä»£ç  + æµ‹è¯•æ•°æ® æ··åœ¨ä¸€èµ·
æ•°æ®é©±åŠ¨ï¼šæµ‹è¯•ä»£ç ï¼ˆé€»è¾‘ï¼‰ + å¤–éƒ¨æ•°æ®æ–‡ä»¶

ä¼˜åŠ¿ï¼š
âœ… æµ‹è¯•æ•°æ®æ˜“äºç»´æŠ¤
âœ… éç¨‹åºå‘˜ä¹Ÿèƒ½ç®¡ç†æµ‹è¯•æ•°æ®  
âœ… å¤§é‡æµ‹è¯•æ•°æ®ä¸ä¼šæ±¡æŸ“ä»£ç 
âœ… æ•°æ®ä¸é€»è¾‘èŒè´£åˆ†ç¦»
```

### 2.2 ä»CSVæ–‡ä»¶è¯»å–æµ‹è¯•æ•°æ®


**ğŸ”¸ å‡†å¤‡æµ‹è¯•æ•°æ®æ–‡ä»¶**
```csv
# test_data.csv
username,password,expected_result
admin,123456,True
user1,password,True
guest,,False
,admin,False
admin,wrong_pass,False
```

**ğŸ”¸ è¯»å–CSVæ•°æ®è¿›è¡Œæµ‹è¯•**
```python
import csv
import pytest

def validate_login(username, password):
    """ç®€å•çš„ç™»å½•éªŒè¯å‡½æ•°"""
    if not username or not password:
        return False
    if username == "admin" and password == "123456":
        return True
    if username == "user1" and password == "password":
        return True
    return False

def load_test_data_from_csv(filename):
    """ä»CSVæ–‡ä»¶åŠ è½½æµ‹è¯•æ•°æ®"""
    test_data = []
    with open(filename, 'r', encoding='utf-8') as file:
        reader = csv.DictReader(file)
        for row in reader:
            test_data.append((
                row['username'], 
                row['password'], 
                row['expected_result'] == 'True'
            ))
    return test_data

# ä½¿ç”¨CSVæ•°æ®è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•
@pytest.mark.parametrize("username, password, expected", 
                        load_test_data_from_csv("test_data.csv"))
def test_login_from_csv(username, password, expected):
    result = validate_login(username, password)
    assert result == expected
```

### 2.3 ä»JSONæ–‡ä»¶è¯»å–æµ‹è¯•æ•°æ®


**ğŸ”¸ JSONæ ¼å¼æµ‹è¯•æ•°æ®**
```json
{
  "user_tests": [
    {
      "name": "valid_admin",
      "input": {"username": "admin", "password": "123456"},
      "expected": true
    },
    {
      "name": "empty_username", 
      "input": {"username": "", "password": "123456"},
      "expected": false
    },
    {
      "name": "wrong_password",
      "input": {"username": "admin", "password": "wrong"},
      "expected": false
    }
  ]
}
```

**ğŸ”¸ JSONæ•°æ®æµ‹è¯•å®ç°**
```python
import json
import pytest

def load_json_test_data(filename):
    """ä»JSONæ–‡ä»¶åŠ è½½æµ‹è¯•æ•°æ®"""
    with open(filename, 'r', encoding='utf-8') as file:
        data = json.load(file)
    
    test_cases = []
    for test in data['user_tests']:
        test_cases.append((
            test['input']['username'],
            test['input']['password'], 
            test['expected']
        ))
    return test_cases

@pytest.mark.parametrize("username, password, expected",
                        load_json_test_data("user_tests.json"))
def test_login_from_json(username, password, expected):
    result = validate_login(username, password)
    assert result == expected
```

---

## 3. ğŸ­ æµ‹è¯•æ¨¡æ‹Ÿï¼ˆMockï¼‰æ·±å…¥ç†è§£


### 3.1 Mockçš„æ ¸å¿ƒæ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šMockå°±åƒç”µå½±ä¸­çš„"æ›¿èº«æ¼”å‘˜"ï¼Œä»£æ›¿çœŸå®å¯¹è±¡å‚ä¸æµ‹è¯•ã€‚

```
ç°å®åœºæ™¯ç±»æ¯”ï¼š
æ‹ç”µå½±æ—¶ï¼š
- å±é™©åŠ¨ä½œ â†’ ç”¨æ›¿èº«æ¼”å‘˜
- æ˜‚è´µé“å…· â†’ ç”¨æ¨¡å‹é“å…·

è½¯ä»¶æµ‹è¯•æ—¶ï¼š
- æ•°æ®åº“æ“ä½œ â†’ ç”¨Mockå¯¹è±¡
- ç½‘ç»œè¯·æ±‚ â†’ ç”¨Mockå“åº”
- æ–‡ä»¶è¯»å†™ â†’ ç”¨Mockæ–‡ä»¶
```

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦Mock**
```
çœŸå®ç¯å¢ƒçš„é—®é¢˜ï¼š
âŒ æ•°æ®åº“å¯èƒ½ä¸å¯ç”¨
âŒ ç½‘ç»œè¯·æ±‚è€—æ—¶ä¸”ä¸ç¨³å®š
âŒ å¤–éƒ¨æœåŠ¡å¯èƒ½è¿”å›ä¸åŒç»“æœ
âŒ æŸäº›æ“ä½œæœ‰å‰¯ä½œç”¨ï¼ˆå¦‚åˆ é™¤æ–‡ä»¶ï¼‰

Mockçš„ä¼˜åŠ¿ï¼š
âœ… æµ‹è¯•é€Ÿåº¦å¿«
âœ… ç»“æœå¯é¢„æµ‹
âœ… éš”ç¦»å¤–éƒ¨ä¾èµ–
âœ… æ¨¡æ‹Ÿå„ç§æƒ…å†µï¼ˆæˆåŠŸã€å¤±è´¥ã€å¼‚å¸¸ï¼‰
```

### 3.2 unittest.mockåŸºç¡€ä½¿ç”¨


**ğŸ”¸ Mockå¯¹è±¡åˆ›å»º**
```python
from unittest.mock import Mock

# åˆ›å»ºä¸€ä¸ªMockå¯¹è±¡
mock_obj = Mock()

# Mockå¯¹è±¡å¯ä»¥"å‡è£…"æ‹¥æœ‰ä»»ä½•å±æ€§å’Œæ–¹æ³•
mock_obj.any_method()           # ä¸ä¼šæŠ¥é”™
mock_obj.any_attribute          # ä¸ä¼šæŠ¥é”™
mock_obj.foo.bar.baz()         # é“¾å¼è°ƒç”¨ä¹Ÿä¸ä¼šæŠ¥é”™

# è®¾ç½®Mockå¯¹è±¡çš„è¿”å›å€¼
mock_obj.get_data.return_value = "æ¨¡æ‹Ÿçš„æ•°æ®"
result = mock_obj.get_data()    # è¿”å› "æ¨¡æ‹Ÿçš„æ•°æ®"
```

**ğŸ”¸ patchè£…é¥°å™¨ä½¿ç”¨**
```python
from unittest.mock import patch
import requests

def get_user_info(user_id):
    """è·å–ç”¨æˆ·ä¿¡æ¯çš„å‡½æ•°ï¼ˆä¾èµ–ç½‘ç»œè¯·æ±‚ï¼‰"""
    response = requests.get(f"https://api.example.com/users/{user_id}")
    if response.status_code == 200:
        return response.json()
    return None

# ä½¿ç”¨patchæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
@patch('requests.get')
def test_get_user_info_success(mock_get):
    # è®¾ç½®Mockçš„è¿”å›å€¼
    mock_response = Mock()
    mock_response.status_code = 200
    mock_response.json.return_value = {"id": 1, "name": "å¼ ä¸‰"}
    mock_get.return_value = mock_response
    
    # æ‰§è¡Œæµ‹è¯•
    result = get_user_info(1)
    
    # éªŒè¯ç»“æœ
    assert result == {"id": 1, "name": "å¼ ä¸‰"}
    # éªŒè¯requests.getè¢«è°ƒç”¨äº†
    mock_get.assert_called_once_with("https://api.example.com/users/1")
```

### 3.3 Mockçš„é«˜çº§åº”ç”¨


**ğŸ”¸ æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œ**
```python
class UserService:
    def __init__(self, db_connection):
        self.db = db_connection
    
    def create_user(self, username, email):
        # æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
        if self.db.find_user(username):
            raise ValueError("ç”¨æˆ·å·²å­˜åœ¨")
        
        # åˆ›å»ºæ–°ç”¨æˆ·
        user_id = self.db.insert_user(username, email)
        return {"id": user_id, "username": username, "email": email}

# æµ‹è¯•ç”¨æˆ·åˆ›å»º
@patch('database.Connection')
def test_create_user_success(mock_db_class):
    # åˆ›å»ºæ•°æ®åº“è¿æ¥çš„Mock
    mock_db = Mock()
    mock_db.find_user.return_value = None  # ç”¨æˆ·ä¸å­˜åœ¨
    mock_db.insert_user.return_value = 123 # è¿”å›æ–°ç”¨æˆ·ID
    mock_db_class.return_value = mock_db
    
    # æµ‹è¯•ç”¨æˆ·æœåŠ¡
    service = UserService(mock_db)
    result = service.create_user("testuser", "test@example.com")
    
    # éªŒè¯ç»“æœ
    assert result["id"] == 123
    assert result["username"] == "testuser"
    
    # éªŒè¯æ•°æ®åº“æ–¹æ³•è¢«æ­£ç¡®è°ƒç”¨
    mock_db.find_user.assert_called_once_with("testuser")
    mock_db.insert_user.assert_called_once_with("testuser", "test@example.com")
```

### 3.4 Mockçš„éªŒè¯æ–¹æ³•


**ğŸ”¸ å¸¸ç”¨éªŒè¯æ–¹æ³•**
```python
from unittest.mock import Mock

mock_obj = Mock()

# è°ƒç”¨æ–¹æ³•
mock_obj.some_method("å‚æ•°1", "å‚æ•°2")
mock_obj.some_method("å‚æ•°3")

# éªŒè¯è°ƒç”¨æ¬¡æ•°
mock_obj.some_method.assert_called()              # è‡³å°‘è¢«è°ƒç”¨1æ¬¡
mock_obj.some_method.assert_called_once()         # åªè¢«è°ƒç”¨1æ¬¡ï¼ˆä¼šå¤±è´¥ï¼‰
mock_obj.some_method.assert_called_with("å‚æ•°3")   # æœ€åä¸€æ¬¡è°ƒç”¨çš„å‚æ•°

# éªŒè¯æ‰€æœ‰è°ƒç”¨
calls = mock_obj.some_method.call_args_list
assert len(calls) == 2  # è¢«è°ƒç”¨äº†2æ¬¡

# éªŒè¯ä»æœªè¢«è°ƒç”¨
mock_obj.other_method.assert_not_called()
```

---

## 4. ğŸª æµ‹è¯•æ›¿èº«æ¨¡å¼åº”ç”¨


### 4.1 æµ‹è¯•æ›¿èº«çš„åˆ†ç±»


**ğŸ”¸ æµ‹è¯•æ›¿èº«ç±»å‹å¯¹æ¯”**

| ç±»å‹ | ä½œç”¨ | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|------|------|------|----------|
| **Dummy** | å ä½ç¬¦ | ä¸å®ç°ä»»ä½•é€»è¾‘ | æ»¡è¶³å‚æ•°è¦æ±‚ |
| **Stub** | è¿”å›é¢„è®¾å€¼ | ç®€å•çš„è¾“å…¥è¾“å‡º | æ¨¡æ‹Ÿç®€å•è°ƒç”¨ |
| **Spy** | è®°å½•è°ƒç”¨ä¿¡æ¯ | å¯éªŒè¯è°ƒç”¨è¿‡ç¨‹ | éªŒè¯äº¤äº’è¡Œä¸º |
| **Mock** | å®Œæ•´æ¨¡æ‹Ÿ | éªŒè¯æœŸæœ›è¡Œä¸º | å¤æ‚äº¤äº’æµ‹è¯• |
| **Fake** | ç®€åŒ–å®ç° | æœ‰å®é™…é€»è¾‘ä½†ç®€åŒ– | æ›¿ä»£å¤æ‚ç»„ä»¶ |

### 4.2 Stubï¼ˆå­˜æ ¹ï¼‰æ¨¡å¼


**ğŸ”¸ Stubçš„æ¦‚å¿µ**
```python
# Stubï¼šæä¾›é¢„è®¾çš„è¿”å›å€¼ï¼Œä¸å…³å¿ƒè°ƒç”¨è¿‡ç¨‹
class WeatherServiceStub:
    """å¤©æ°”æœåŠ¡çš„Stubå®ç°"""
    def get_temperature(self, city):
        # ä¸ç®¡è¾“å…¥ä»€ä¹ˆåŸå¸‚ï¼Œéƒ½è¿”å›å›ºå®šæ¸©åº¦
        return 25
    
    def get_forecast(self, city, days):
        # è¿”å›é¢„è®¾çš„å¤©æ°”é¢„æŠ¥
        return ["æ™´å¤©"] * days

def test_temperature_display():
    weather_service = WeatherServiceStub()
    temp = weather_service.get_temperature("åŒ—äº¬")
    assert temp == 25  # æ€»æ˜¯è¿”å›25åº¦
```

### 4.3 Spyï¼ˆé—´è°ï¼‰æ¨¡å¼


**ğŸ”¸ Spyçš„æ¦‚å¿µ**
```python
class EmailServiceSpy:
    """é‚®ä»¶æœåŠ¡çš„Spyå®ç°"""
    def __init__(self):
        self.sent_emails = []  # è®°å½•å‘é€çš„é‚®ä»¶
        self.call_count = 0
    
    def send_email(self, to, subject, body):
        self.call_count += 1
        self.sent_emails.append({
            'to': to,
            'subject': subject, 
            'body': body
        })
        return True  # å‡è£…å‘é€æˆåŠŸ

def test_notification_system():
    email_spy = EmailServiceSpy()
    
    # ä½¿ç”¨é—´è°å¯¹è±¡
    send_welcome_email(email_spy, "user@example.com")
    
    # éªŒè¯é‚®ä»¶æ˜¯å¦è¢«å‘é€
    assert email_spy.call_count == 1
    assert len(email_spy.sent_emails) == 1
    assert email_spy.sent_emails[0]['to'] == "user@example.com"
    assert "æ¬¢è¿" in email_spy.sent_emails[0]['subject']
```

### 4.4 Fakeï¼ˆä¼ªé€ ï¼‰æ¨¡å¼


**ğŸ”¸ Fakeçš„æ¦‚å¿µ**
```python
class InMemoryUserRepository:
    """ç”¨æˆ·ä»“åº“çš„Fakeå®ç°ï¼ˆå†…å­˜ç‰ˆæœ¬ï¼‰"""
    def __init__(self):
        self.users = {}  # ç”¨å­—å…¸æ¨¡æ‹Ÿæ•°æ®åº“
        self.next_id = 1
    
    def save_user(self, user):
        user['id'] = self.next_id
        self.users[self.next_id] = user.copy()
        self.next_id += 1
        return user['id']
    
    def find_user(self, user_id):
        return self.users.get(user_id)
    
    def find_by_email(self, email):
        for user in self.users.values():
            if user.get('email') == email:
                return user
        return None

def test_user_registration():
    # ä½¿ç”¨Fakeå¯¹è±¡ä»£æ›¿çœŸå®æ•°æ®åº“
    user_repo = InMemoryUserRepository()
    
    # æ³¨å†Œç”¨æˆ·
    user_id = user_repo.save_user({
        'name': 'å¼ ä¸‰',
        'email': 'zhangsan@example.com'
    })
    
    # éªŒè¯ç”¨æˆ·ä¿å­˜æˆåŠŸ
    saved_user = user_repo.find_user(user_id)
    assert saved_user['name'] == 'å¼ ä¸‰'
    assert saved_user['email'] == 'zhangsan@example.com'
```

---

## 5. ğŸ“ˆ æµ‹è¯•è¦†ç›–ç‡åˆ†æ


### 5.1 æµ‹è¯•è¦†ç›–ç‡çš„æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šæµ‹è¯•è¦†ç›–ç‡å°±æ˜¯"æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œäº†å¤šå°‘ä»£ç "çš„ç™¾åˆ†æ¯”ã€‚

```
ä»£ç è¦†ç›–ç‡ç±»å‹ï¼š

ğŸ”¸ è¡Œè¦†ç›–ç‡ï¼ˆLine Coverageï¼‰
ç»Ÿè®¡ï¼šæ‰§è¡Œè¿‡çš„ä»£ç è¡Œæ•° / æ€»ä»£ç è¡Œæ•°
ç›®æ ‡ï¼šç¡®ä¿æ¯è¡Œä»£ç éƒ½è¢«æµ‹è¯•æ‰§è¡Œ

ğŸ”¸ åˆ†æ”¯è¦†ç›–ç‡ï¼ˆBranch Coverageï¼‰  
ç»Ÿè®¡ï¼šæ‰§è¡Œè¿‡çš„åˆ†æ”¯æ•° / æ€»åˆ†æ”¯æ•°
ç›®æ ‡ï¼šç¡®ä¿if/elseç­‰åˆ†æ”¯éƒ½è¢«æµ‹è¯•

ğŸ”¸ å‡½æ•°è¦†ç›–ç‡ï¼ˆFunction Coverageï¼‰
ç»Ÿè®¡ï¼šè°ƒç”¨è¿‡çš„å‡½æ•°æ•° / æ€»å‡½æ•°æ•°
ç›®æ ‡ï¼šç¡®ä¿æ¯ä¸ªå‡½æ•°éƒ½è¢«æµ‹è¯•è°ƒç”¨
```

### 5.2 è¦†ç›–ç‡çš„æ„ä¹‰


**ğŸ”¸ è¦†ç›–ç‡æŒ‡æ ‡è§£è¯»**

| è¦†ç›–ç‡èŒƒå›´ | è´¨é‡è¯„ä»· | è¯´æ˜ |
|------------|----------|------|
| **90-100%** | ä¼˜ç§€ | æµ‹è¯•éå¸¸å…¨é¢ï¼Œä»£ç è´¨é‡é«˜ |
| **80-90%** | è‰¯å¥½ | æµ‹è¯•æ¯”è¾ƒå…¨é¢ï¼Œå¯æ¥å—èŒƒå›´ |
| **70-80%** | ä¸€èˆ¬ | éœ€è¦è¡¥å……æ›´å¤šæµ‹è¯•ç”¨ä¾‹ |
| **<70%** | è¾ƒå·® | æµ‹è¯•ä¸å……åˆ†ï¼Œå­˜åœ¨é£é™© |

**âš ï¸ é‡è¦æé†’**
```
è¦†ç›–ç‡é«˜ â‰  æµ‹è¯•è´¨é‡é«˜

å¯èƒ½çš„é—®é¢˜ï¼š
âŒ åªæµ‹è¯•æ­£å¸¸æƒ…å†µï¼Œä¸æµ‹è¯•å¼‚å¸¸
âŒ åªéªŒè¯ä»£ç æ‰§è¡Œï¼Œä¸éªŒè¯ç»“æœæ­£ç¡®æ€§
âŒ æµ‹è¯•ç”¨ä¾‹è´¨é‡å·®ï¼Œåªæ˜¯"è·‘äº†ä¸€éä»£ç "

æ­£ç¡®ç†è§£ï¼š
âœ… è¦†ç›–ç‡æ˜¯æµ‹è¯•è´¨é‡çš„å‚è€ƒæŒ‡æ ‡
âœ… é«˜è¦†ç›–ç‡æ˜¯å¿…è¦æ¡ä»¶ï¼Œä¸æ˜¯å……åˆ†æ¡ä»¶
âœ… é‡ç‚¹å…³æ³¨æœªè¦†ç›–çš„å…³é”®ä»£ç è·¯å¾„
```

### 5.3 æé«˜æµ‹è¯•è¦†ç›–ç‡çš„ç­–ç•¥


**ğŸ”¸ è¯†åˆ«æœªè¦†ç›–çš„ä»£ç **
```python
def process_user_data(user_data):
    """å¤„ç†ç”¨æˆ·æ•°æ®"""
    if not user_data:
        return {"error": "æ•°æ®ä¸ºç©º"}     # åˆ†æ”¯1ï¼šç©ºæ•°æ®
    
    if 'age' not in user_data:
        return {"error": "ç¼ºå°‘å¹´é¾„"}     # åˆ†æ”¯2ï¼šç¼ºå°‘å¹´é¾„
    
    age = user_data['age']
    if age < 0:
        return {"error": "å¹´é¾„æ— æ•ˆ"}     # åˆ†æ”¯3ï¼šå¹´é¾„è´Ÿæ•°
    elif age < 18:
        return {"status": "æœªæˆå¹´"}     # åˆ†æ”¯4ï¼šæœªæˆå¹´
    else:
        return {"status": "æˆå¹´"}       # åˆ†æ”¯5ï¼šæˆå¹´

# è¦†ç›–æ‰€æœ‰åˆ†æ”¯çš„æµ‹è¯•
def test_process_user_data_complete():
    # æµ‹è¯•åˆ†æ”¯1ï¼šç©ºæ•°æ®
    result1 = process_user_data(None)
    assert result1["error"] == "æ•°æ®ä¸ºç©º"
    
    # æµ‹è¯•åˆ†æ”¯2ï¼šç¼ºå°‘å¹´é¾„
    result2 = process_user_data({"name": "å¼ ä¸‰"})
    assert result2["error"] == "ç¼ºå°‘å¹´é¾„"
    
    # æµ‹è¯•åˆ†æ”¯3ï¼šå¹´é¾„è´Ÿæ•°
    result3 = process_user_data({"age": -5})
    assert result3["error"] == "å¹´é¾„æ— æ•ˆ"
    
    # æµ‹è¯•åˆ†æ”¯4ï¼šæœªæˆå¹´
    result4 = process_user_data({"age": 16})
    assert result4["status"] == "æœªæˆå¹´"
    
    # æµ‹è¯•åˆ†æ”¯5ï¼šæˆå¹´
    result5 = process_user_data({"age": 25})
    assert result5["status"] == "æˆå¹´"
```

---

## 6. ğŸ”— é›†æˆæµ‹è¯•ç­–ç•¥


### 6.1 é›†æˆæµ‹è¯•çš„æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šé›†æˆæµ‹è¯•å°±æ˜¯æµ‹è¯•å¤šä¸ªæ¨¡å—ç»„åˆåœ¨ä¸€èµ·å·¥ä½œæ˜¯å¦æ­£å¸¸ã€‚

```
æµ‹è¯•é‡‘å­—å¡”ï¼š

        /\
       /ç«¯åˆ°\        å°‘é‡ï¼šå®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
      /ç«¯æµ‹è¯•\
     /________\
    /          \      
   /  é›†æˆæµ‹è¯•  \     ä¸­ç­‰æ•°é‡ï¼šæ¨¡å—åä½œæµ‹è¯•
  /______________\
 /                \
/    å•å…ƒæµ‹è¯•      \   å¤§é‡ï¼šå•ä¸ªå‡½æ•°/ç±»æµ‹è¯•
/________________\

é›†æˆæµ‹è¯•å…³æ³¨ï¼šæ¨¡å—é—´çš„æ¥å£å’Œæ•°æ®ä¼ é€’
```

### 6.2 é›†æˆæµ‹è¯•çš„åˆ†ç±»


**ğŸ”¸ å¤§çˆ†ç‚¸é›†æˆï¼ˆBig Bangï¼‰**
```python
# ä¸€æ¬¡æ€§é›†æˆæ‰€æœ‰æ¨¡å—
class OrderIntegrationTest:
    def test_complete_order_process(self):
        """æµ‹è¯•å®Œæ•´è®¢å•æµç¨‹"""
        # é›†æˆï¼šç”¨æˆ·æœåŠ¡ + å•†å“æœåŠ¡ + æ”¯ä»˜æœåŠ¡ + åº“å­˜æœåŠ¡
        user = UserService().create_user("å¼ ä¸‰", "zhangsan@example.com")
        product = ProductService().get_product(123)
        order = OrderService().create_order(user.id, product.id, quantity=2)
        payment = PaymentService().process_payment(order.id, "credit_card")
        
        assert order.status == "confirmed"
        assert payment.status == "success"
```

**ğŸ”¸ å¢é‡é›†æˆï¼ˆIncrementalï¼‰**
```python
# é€æ­¥é›†æˆï¼Œæ¯æ¬¡æ·»åŠ ä¸€ä¸ªæ¨¡å—
class IncrementalIntegrationTest:
    def test_user_and_order_integration(self):
        """å…ˆæµ‹è¯•ç”¨æˆ·æœåŠ¡+è®¢å•æœåŠ¡"""
        user_service = UserService()
        order_service = OrderService()
        
        user = user_service.create_user("å¼ ä¸‰", "zhangsan@example.com")
        order = order_service.create_order(user.id, product_id=123)
        
        assert order.user_id == user.id
    
    def test_order_and_payment_integration(self):
        """å†æµ‹è¯•è®¢å•æœåŠ¡+æ”¯ä»˜æœåŠ¡"""
        order_service = OrderService()
        payment_service = PaymentService()
        
        # ä½¿ç”¨æ¨¡æ‹Ÿçš„è®¢å•
        order = order_service.create_order(user_id=1, product_id=123)
        payment = payment_service.process_payment(order.id)
        
        assert payment.order_id == order.id
```

### 6.3 æ•°æ®åº“é›†æˆæµ‹è¯•


**ğŸ”¸ ä½¿ç”¨æµ‹è¯•æ•°æ®åº“**
```python
import pytest
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

@pytest.fixture
def test_db():
    """åˆ›å»ºæµ‹è¯•æ•°æ®åº“"""
    # ä½¿ç”¨å†…å­˜æ•°æ®åº“è¿›è¡Œæµ‹è¯•
    engine = create_engine("sqlite:///:memory:")
    
    # åˆ›å»ºè¡¨ç»“æ„
    Base.metadata.create_all(engine)
    
    # åˆ›å»ºä¼šè¯
    SessionLocal = sessionmaker(bind=engine)
    session = SessionLocal()
    
    yield session
    
    # æ¸…ç†
    session.close()

def test_user_crud_operations(test_db):
    """æµ‹è¯•ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥æ“ä½œ"""
    user_repo = UserRepository(test_db)
    
    # æµ‹è¯•åˆ›å»ºç”¨æˆ·
    user = user_repo.create_user("å¼ ä¸‰", "zhangsan@example.com")
    assert user.id is not None
    
    # æµ‹è¯•æŸ¥è¯¢ç”¨æˆ·
    found_user = user_repo.get_user(user.id)
    assert found_user.name == "å¼ ä¸‰"
    
    # æµ‹è¯•æ›´æ–°ç”¨æˆ·
    user_repo.update_user(user.id, name="æå››")
    updated_user = user_repo.get_user(user.id)
    assert updated_user.name == "æå››"
    
    # æµ‹è¯•åˆ é™¤ç”¨æˆ·
    user_repo.delete_user(user.id)
    deleted_user = user_repo.get_user(user.id)
    assert deleted_user is None
```

---

## 7. ğŸŒ ç«¯åˆ°ç«¯æµ‹è¯•å®ç°


### 7.1 ç«¯åˆ°ç«¯æµ‹è¯•çš„æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šç«¯åˆ°ç«¯æµ‹è¯•æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œï¼Œæµ‹è¯•æ•´ä¸ªç³»ç»Ÿçš„å®Œæ•´ä¸šåŠ¡æµç¨‹ã€‚

```
ç«¯åˆ°ç«¯æµ‹è¯•ç‰¹ç‚¹ï¼š

ğŸ”¸ ä»ç”¨æˆ·è§’åº¦æµ‹è¯•
ç”¨æˆ·ç™»å½• â†’ æµè§ˆå•†å“ â†’ åŠ å…¥è´­ç‰©è½¦ â†’ ç»“ç®—æ”¯ä»˜ â†’ ç¡®è®¤è®¢å•

ğŸ”¸ æµ‹è¯•å®Œæ•´æµç¨‹
æ¶‰åŠå‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰æ‰€æœ‰ç»„ä»¶

ğŸ”¸ æ¥è¿‘çœŸå®ç¯å¢ƒ
ä½¿ç”¨çœŸå®æ•°æ®åº“ã€çœŸå®é…ç½®ï¼ˆæˆ–æ¥è¿‘çœŸå®çš„æµ‹è¯•ç¯å¢ƒï¼‰
```

### 7.2 Webåº”ç”¨ç«¯åˆ°ç«¯æµ‹è¯•


**ğŸ”¸ ä½¿ç”¨Seleniumè¿›è¡Œç½‘é¡µæµ‹è¯•**
```python
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

class ECommerceE2ETest:
    def setup_method(self):
        """æµ‹è¯•å‰å‡†å¤‡"""
        self.driver = webdriver.Chrome()
        self.wait = WebDriverWait(self.driver, 10)
    
    def teardown_method(self):
        """æµ‹è¯•åæ¸…ç†"""
        self.driver.quit()
    
    def test_complete_shopping_flow(self):
        """æµ‹è¯•å®Œæ•´è´­ç‰©æµç¨‹"""
        # 1. æ‰“å¼€ç½‘ç«™é¦–é¡µ
        self.driver.get("http://localhost:8000")
        
        # 2. ç”¨æˆ·ç™»å½•
        self.driver.find_element(By.ID, "login-btn").click()
        self.driver.find_element(By.NAME, "username").send_keys("testuser")
        self.driver.find_element(By.NAME, "password").send_keys("password123")
        self.driver.find_element(By.ID, "submit-login").click()
        
        # 3. ç­‰å¾…ç™»å½•æˆåŠŸ
        self.wait.until(EC.presence_of_element_located((By.ID, "user-menu")))
        
        # 4. æœç´¢å•†å“
        search_box = self.driver.find_element(By.NAME, "search")
        search_box.send_keys("iPhone")
        search_box.submit()
        
        # 5. é€‰æ‹©å•†å“
        product_link = self.wait.until(
            EC.element_to_be_clickable((By.CLASS_NAME, "product-item"))
        )
        product_link.click()
        
        # 6. æ·»åŠ åˆ°è´­ç‰©è½¦
        add_to_cart_btn = self.wait.until(
            EC.element_to_be_clickable((By.ID, "add-to-cart"))
        )
        add_to_cart_btn.click()
        
        # 7. æŸ¥çœ‹è´­ç‰©è½¦
        cart_icon = self.driver.find_element(By.ID, "cart-icon")
        cart_icon.click()
        
        # 8. éªŒè¯å•†å“åœ¨è´­ç‰©è½¦ä¸­
        cart_items = self.driver.find_elements(By.CLASS_NAME, "cart-item")
        assert len(cart_items) > 0
        
        # 9. ç»“ç®—
        checkout_btn = self.driver.find_element(By.ID, "checkout-btn")
        checkout_btn.click()
        
        # 10. å¡«å†™é…é€ä¿¡æ¯
        self.driver.find_element(By.NAME, "address").send_keys("åŒ—äº¬å¸‚æœé˜³åŒºxxx")
        self.driver.find_element(By.NAME, "phone").send_keys("13812345678")
        
        # 11. æäº¤è®¢å•
        submit_order_btn = self.driver.find_element(By.ID, "submit-order")
        submit_order_btn.click()
        
        # 12. éªŒè¯è®¢å•æˆåŠŸ
        success_message = self.wait.until(
            EC.presence_of_element_located((By.CLASS_NAME, "order-success"))
        )
        assert "è®¢å•æäº¤æˆåŠŸ" in success_message.text
```

### 7.3 APIç«¯åˆ°ç«¯æµ‹è¯•


**ğŸ”¸ æµ‹è¯•REST APIå®Œæ•´æµç¨‹**
```python
import requests
import pytest

class APIE2ETest:
    def setup_method(self):
        """å‡†å¤‡æµ‹è¯•ç¯å¢ƒ"""
        self.base_url = "http://localhost:8000/api"
        self.session = requests.Session()
        
    def test_user_lifecycle_api(self):
        """æµ‹è¯•ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸAPI"""
        
        # 1. ç”¨æˆ·æ³¨å†Œ
        register_data = {
            "username": "testuser123",
            "email": "test@example.com", 
            "password": "password123"
        }
        register_response = self.session.post(
            f"{self.base_url}/register",
            json=register_data
        )
        assert register_response.status_code == 201
        user_id = register_response.json()["user_id"]
        
        # 2. ç”¨æˆ·ç™»å½•
        login_data = {
            "username": "testuser123",
            "password": "password123"
        }
        login_response = self.session.post(
            f"{self.base_url}/login",
            json=login_data
        )
        assert login_response.status_code == 200
        token = login_response.json()["access_token"]
        
        # 3. è®¾ç½®è®¤è¯å¤´
        self.session.headers.update({"Authorization": f"Bearer {token}"})
        
        # 4. è·å–ç”¨æˆ·ä¿¡æ¯
        profile_response = self.session.get(f"{self.base_url}/profile")
        assert profile_response.status_code == 200
        profile = profile_response.json()
        assert profile["username"] == "testuser123"
        
        # 5. æ›´æ–°ç”¨æˆ·ä¿¡æ¯
        update_data = {"email": "newemail@example.com"}
        update_response = self.session.put(
            f"{self.base_url}/profile",
            json=update_data
        )
        assert update_response.status_code == 200
        
        # 6. éªŒè¯æ›´æ–°æˆåŠŸ
        updated_profile = self.session.get(f"{self.base_url}/profile").json()
        assert updated_profile["email"] == "newemail@example.com"
        
        # 7. ç”¨æˆ·æ³¨é”€
        logout_response = self.session.post(f"{self.base_url}/logout")
        assert logout_response.status_code == 200
```

---

## 8. ğŸ“Š Coverage.pyå·¥å…·è¯¦è§£


### 8.1 Coverage.pyå®‰è£…å’ŒåŸºç¡€ä½¿ç”¨


**ğŸ”¸ å®‰è£…Coverage.py**
```bash
# å®‰è£…coverage
pip install coverage

# æˆ–è€…åŒæ—¶å®‰è£…pytest-covï¼ˆpytestæ’ä»¶ï¼‰
pip install pytest-cov
```

**ğŸ”¸ åŸºæœ¬ä½¿ç”¨æ–¹æ³•**
```bash
# æ–¹æ³•1ï¼šç›´æ¥ä½¿ç”¨coverageå‘½ä»¤
coverage run -m pytest                 # è¿è¡Œæµ‹è¯•å¹¶æ”¶é›†è¦†ç›–ç‡
coverage report                        # æ˜¾ç¤ºè¦†ç›–ç‡æŠ¥å‘Š
coverage html                          # ç”ŸæˆHTMLæŠ¥å‘Š

# æ–¹æ³•2ï¼šä½¿ç”¨pytest-covæ’ä»¶
pytest --cov=my_module                 # æµ‹è¯•my_moduleçš„è¦†ç›–ç‡
pytest --cov=my_module --cov-report=html   # ç”ŸæˆHTMLæŠ¥å‘Š
```

### 8.2 Coverage.pyé…ç½®


**ğŸ”¸ é…ç½®æ–‡ä»¶ï¼ˆ.coveragercï¼‰**
```ini
[run]
# æŒ‡å®šè¦æµ‹è¯•è¦†ç›–ç‡çš„æºç ç›®å½•
source = src

# æ’é™¤ä¸éœ€è¦æµ‹è¯•çš„æ–‡ä»¶
omit = 
    */tests/*
    */venv/*
    setup.py
    manage.py

# åŒ…å«åˆ†æ”¯è¦†ç›–ç‡
branch = True

[report]
# è®¾ç½®è¦†ç›–ç‡é˜ˆå€¼
fail_under = 80

# æ’é™¤æŸäº›è¡Œä¸è®¡å…¥è¦†ç›–ç‡
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError

[html]
# HTMLæŠ¥å‘Šè¾“å‡ºç›®å½•
directory = htmlcov
```

### 8.3 è§£è¯»è¦†ç›–ç‡æŠ¥å‘Š


**ğŸ”¸ å‘½ä»¤è¡ŒæŠ¥å‘Šè§£è¯»**
```bash
$ coverage report

Name                Stmts   Miss  Cover   Missing
-------------------------------------------------
src/calculator.py      25      3    88%   45-47
src/utils.py           15      0   100%
src/models.py          30      8    73%   23, 45-52
-------------------------------------------------
TOTAL                  70     11    84%
```

**æŠ¥å‘Šè§£é‡Šï¼š**
- **Stmts**ï¼šæ€»è¯­å¥æ•°
- **Miss**ï¼šæœªè¦†ç›–çš„è¯­å¥æ•°
- **Cover**ï¼šè¦†ç›–ç‡ç™¾åˆ†æ¯”
- **Missing**ï¼šæœªè¦†ç›–çš„å…·ä½“è¡Œå·

**ğŸ”¸ HTMLæŠ¥å‘Šåˆ†æ**
```python
# ç¤ºä¾‹ï¼šæŸ¥çœ‹HTMLæŠ¥å‘Šçš„å¥½å¤„
"""
HTMLæŠ¥å‘Šæä¾›ï¼š
1. å½©è‰²é«˜äº®æ˜¾ç¤ºè¦†ç›–æƒ…å†µ
   - ç»¿è‰²ï¼šå·²è¦†ç›–çš„ä»£ç 
   - çº¢è‰²ï¼šæœªè¦†ç›–çš„ä»£ç 
   - é»„è‰²ï¼šéƒ¨åˆ†è¦†ç›–çš„åˆ†æ”¯

2. è¯¦ç»†çš„åˆ†æ”¯åˆ†æ
   - æ˜¾ç¤ºæ¯ä¸ªif/elseåˆ†æ”¯çš„è¦†ç›–æƒ…å†µ
   - æ ‡å‡ºå“ªäº›æ¡ä»¶ç»„åˆæœªè¢«æµ‹è¯•

3. æ–‡ä»¶çº§åˆ«çš„å¯¼èˆª
   - ç‚¹å‡»æ–‡ä»¶åæŸ¥çœ‹è¯¦ç»†è¦†ç›–æƒ…å†µ
   - å¿«é€Ÿå®šä½éœ€è¦è¡¥å……æµ‹è¯•çš„ä»£ç 
"""

# ä½¿ç”¨ç¤ºä¾‹
def divide_numbers(a, b):
    if b == 0:                    # åˆ†æ”¯1ï¼šéœ€è¦æµ‹è¯•
        raise ValueError("é™¤æ•°ä¸èƒ½ä¸º0")
    
    if a < 0:                     # åˆ†æ”¯2ï¼šéœ€è¦æµ‹è¯•  
        return -(abs(a) / b)      # è¿™è¡Œå¯èƒ½æœªè¦†ç›–
    else:
        return a / b              # è¿™è¡Œå¯èƒ½å·²è¦†ç›–

# è¡¥å……æµ‹è¯•ç”¨ä¾‹è¦†ç›–æœªæµ‹è¯•åˆ†æ”¯
def test_divide_negative_numbers():
    result = divide_numbers(-10, 2)
    assert result == -5.0

def test_divide_by_zero():
    with pytest.raises(ValueError):
        divide_numbers(10, 0)
```

### 8.4 é›†æˆåˆ°CI/CDæµç¨‹


**ğŸ”¸ GitHub Actionsé…ç½®**
```yaml
# .github/workflows/test.yml
name: Test and Coverage

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        pip install pytest-cov
    
    - name: Run tests with coverage
      run: |
        pytest --cov=src --cov-report=xml --cov-fail-under=80
    
    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v1
      with:
        file: ./coverage.xml
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å‚æ•°åŒ–æµ‹è¯•ï¼šä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œå¤šç»„æ•°æ®ï¼Œé¿å…é‡å¤ä»£ç 
ğŸ”¸ æ•°æ®é©±åŠ¨æµ‹è¯•ï¼šæµ‹è¯•æ•°æ®ä¸æµ‹è¯•é€»è¾‘åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤
ğŸ”¸ Mockæµ‹è¯•ï¼šç”¨"æ›¿èº«"å¯¹è±¡éš”ç¦»å¤–éƒ¨ä¾èµ–ï¼Œæé«˜æµ‹è¯•å¯é æ€§
ğŸ”¸ æµ‹è¯•æ›¿èº«ï¼šDummyã€Stubã€Spyã€Mockã€Fakeå„æœ‰ç”¨é€”
ğŸ”¸ æµ‹è¯•è¦†ç›–ç‡ï¼šè¡¡é‡æµ‹è¯•å®Œæ•´æ€§çš„é‡è¦æŒ‡æ ‡ï¼Œä½†ä¸æ˜¯å”¯ä¸€æ ‡å‡†
ğŸ”¸ é›†æˆæµ‹è¯•ï¼šéªŒè¯æ¨¡å—é—´åä½œï¼Œä»‹äºå•å…ƒæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ä¹‹é—´
ğŸ”¸ ç«¯åˆ°ç«¯æµ‹è¯•ï¼šæ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œï¼Œæµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹
ğŸ”¸ Coverage.pyï¼šPythonç”Ÿæ€åœˆæœ€é‡è¦çš„ä»£ç è¦†ç›–ç‡å·¥å…·
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æµ‹è¯•ç­–ç•¥çš„é€‰æ‹©**
```
å°é¡¹ç›®ï¼š
- é‡ç‚¹ï¼šå•å…ƒæµ‹è¯• + å°‘é‡é›†æˆæµ‹è¯•
- è¦†ç›–ç‡ç›®æ ‡ï¼š80%ä»¥ä¸Š
- Mockä½¿ç”¨ï¼šé€‚åº¦ä½¿ç”¨ï¼Œé‡ç‚¹éš”ç¦»å¤–éƒ¨æœåŠ¡

å¤§é¡¹ç›®ï¼š
- ç­–ç•¥ï¼šæµ‹è¯•é‡‘å­—å¡”ï¼ˆå•å…ƒ > é›†æˆ > ç«¯åˆ°ç«¯ï¼‰
- è¦†ç›–ç‡ç›®æ ‡ï¼š90%ä»¥ä¸Šï¼Œå…³é”®æ¨¡å—100%
- Mockä½¿ç”¨ï¼šå¹¿æ³›ä½¿ç”¨ï¼Œå»ºç«‹æµ‹è¯•éš”ç¦»
```

**ğŸ”¹ Mockä½¿ç”¨çš„å¹³è¡¡**
```
ä½•æ—¶ä½¿ç”¨Mockï¼š
âœ… å¤–éƒ¨APIè°ƒç”¨
âœ… æ•°æ®åº“æ“ä½œ
âœ… æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
âœ… æ—¶é—´ç›¸å…³çš„é€»è¾‘
âœ… éšæœºæ•°ç”Ÿæˆ

ä½•æ—¶é¿å…Mockï¼š
âŒ ç®€å•çš„çº¯å‡½æ•°
âŒ ä¸šåŠ¡æ ¸å¿ƒé€»è¾‘
âŒ æ•°æ®ç»“æ„æ“ä½œ
âŒ è¿‡åº¦Mockå¯¼è‡´æµ‹è¯•å¤±çœŸ
```

### 9.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ¯ æµ‹è¯•å¼€å‘æµç¨‹**
```
1. ç¼–å†™åŠŸèƒ½ä»£ç 
2. ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆå‚æ•°åŒ–æµ‹è¯•ï¼‰
3. ä½¿ç”¨Mockéš”ç¦»å¤–éƒ¨ä¾èµ–
4. ç¼–å†™é›†æˆæµ‹è¯•éªŒè¯æ¨¡å—åä½œ
5. è¿è¡Œè¦†ç›–ç‡åˆ†æï¼Œè¡¥å……ç¼ºå¤±æµ‹è¯•
6. ç¼–å†™å…³é”®æµç¨‹çš„ç«¯åˆ°ç«¯æµ‹è¯•
7. æŒç»­ç›‘æ§å’Œæ”¹è¿›æµ‹è¯•è´¨é‡
```

**ğŸ› ï¸ å·¥å…·é“¾æ¨è**
```
æµ‹è¯•æ¡†æ¶ï¼špytestï¼ˆåŠŸèƒ½å¼ºå¤§ï¼Œæ’ä»¶ä¸°å¯Œï¼‰
Mockå·¥å…·ï¼šunittest.mockï¼ˆæ ‡å‡†åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰
è¦†ç›–ç‡å·¥å…·ï¼šcoverage.py + pytest-cov
å‚æ•°åŒ–æµ‹è¯•ï¼špytest.mark.parametrize
æ•°æ®é©±åŠ¨ï¼šCSV/JSON + pytest fixtures
ç«¯åˆ°ç«¯æµ‹è¯•ï¼šSeleniumï¼ˆWebï¼‰+ requestsï¼ˆAPIï¼‰
```

**ğŸš€ æœ€ä½³å®è·µæ€»ç»“**
```
ä»£ç è´¨é‡ï¼š
- ä¿æŒæµ‹è¯•ä»£ç ç®€æ´æ¸…æ™°
- ä¸€ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä¸ªè¡Œä¸º
- æµ‹è¯•å‘½åè¦æ¸…æ¥šè¡¨è¾¾æ„å›¾
- é¿å…æµ‹è¯•ä¹‹é—´çš„ä¾èµ–å…³ç³»

æ•ˆç‡æå‡ï¼š
- ä½¿ç”¨å‚æ•°åŒ–å‡å°‘é‡å¤ä»£ç 
- åˆç†ä½¿ç”¨Mockæé«˜æµ‹è¯•é€Ÿåº¦
- å…³æ³¨è¦†ç›–ç‡ä½†ä¸ç›²ç›®è¿½æ±‚100%
- å»ºç«‹è‡ªåŠ¨åŒ–çš„æµ‹è¯•æ‰§è¡Œæµç¨‹
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
å‚æ•°åŒ–æµ‹è¯•çœä»£ç ï¼Œæ•°æ®é©±åŠ¨å¥½ç»´æŠ¤
Mockéš”ç¦»å¤–ä¾èµ–ï¼Œæ›¿èº«æ¨¡å¼å„æœ‰ç”¨
è¦†ç›–ç‡é«˜è´¨é‡å¥½ï¼Œé›†æˆç«¯åˆ°ç«¯æµ‹æµç¨‹
Coverageå·¥å…·å¸®åˆ†æï¼ŒæŒç»­æ”¹è¿›æ˜¯å…³é”®
```