---
title: 13ã€ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†æ¦‚è¿°](#1-ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†æ¦‚è¿°)
2. [ä¼˜åŒ–å™¨å†…å­˜ä½¿ç”¨æœºåˆ¶](#2-ä¼˜åŒ–å™¨å†…å­˜ä½¿ç”¨æœºåˆ¶)
3. [æ‰§è¡Œè®¡åˆ’ç¼“å­˜ç®¡ç†](#3-æ‰§è¡Œè®¡åˆ’ç¼“å­˜ç®¡ç†)
4. [ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜æœºåˆ¶](#4-ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜æœºåˆ¶)
5. [ä¼˜åŒ–å™¨ä¼šè¯å†…å­˜](#5-ä¼˜åŒ–å™¨ä¼šè¯å†…å­˜)
6. [å†…å­˜æ± ç®¡ç†ç­–ç•¥](#6-å†…å­˜æ± ç®¡ç†ç­–ç•¥)
7. [å†…å­˜æ³„æ¼æ£€æµ‹ä¸å¤„ç†](#7-å†…å­˜æ³„æ¼æ£€æµ‹ä¸å¤„ç†)
8. [ä¼˜åŒ–å™¨å†…å­˜ä¼˜åŒ–ç­–ç•¥](#8-ä¼˜åŒ–å™¨å†…å­˜ä¼˜åŒ–ç­–ç•¥)
9. [å†…å­˜ä½¿ç”¨ç›‘æ§é¢„è­¦](#9-å†…å­˜ä½¿ç”¨ç›‘æ§é¢„è­¦)
10. [å†…å­˜èµ„æºè°ƒåº¦ç®—æ³•](#10-å†…å­˜èµ„æºè°ƒåº¦ç®—æ³•)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ§  ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†


**ğŸ”¸ ç®€å•ç†è§£**
ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†å°±åƒä¸€ä¸ª**æ™ºèƒ½çš„å›¾ä¹¦ç®¡ç†å‘˜**ï¼Œå®ƒéœ€è¦å†³å®šï¼šå“ªäº›ä¹¦ï¼ˆæ‰§è¡Œè®¡åˆ’ï¼‰è¦æ”¾åœ¨æœ€å®¹æ˜“æ‹¿åˆ°çš„åœ°æ–¹ï¼Ÿå“ªäº›å‚è€ƒèµ„æ–™ï¼ˆç»Ÿè®¡ä¿¡æ¯ï¼‰è¦å¸¸é©»å†…å­˜ï¼Ÿä»€ä¹ˆæ—¶å€™æ¸…ç†è¿‡æœŸçš„èµ„æ–™ï¼Ÿ

**ğŸ”¸ ä¼˜åŒ–å™¨å†…å­˜çš„æ ¸å¿ƒèŒè´£**
- **å­˜å‚¨æ‰§è¡Œè®¡åˆ’**ï¼šç¼“å­˜å·²ç¼–è¯‘çš„SQLæ‰§è¡Œè®¡åˆ’
- **ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯**ï¼šä¿å­˜è¡¨ã€ç´¢å¼•çš„ç»Ÿè®¡æ•°æ®
- **ç®¡ç†å·¥ä½œå†…å­˜**ï¼šä¸ºä¼˜åŒ–è¿‡ç¨‹åˆ†é…ä¸´æ—¶å†…å­˜
- **æ§åˆ¶å†…å­˜ä½¿ç”¨**ï¼šé˜²æ­¢å†…å­˜æº¢å‡ºå’Œæ³„æ¼

### 1.2 ä¼˜åŒ–å™¨å†…å­˜æ¶æ„


```
MySQLä¼˜åŒ–å™¨å†…å­˜æ¶æ„ï¼š

                    MySQL Server Memory
                           |
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        |                 |                 |
   Global Memory      Per-Thread         Optimizer
   (å…±äº«å†…å­˜æ± )        Memory             Memory Pool
        |              (ä¼šè¯å†…å­˜)            |
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”           |           â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
   â”‚         â”‚           |           â”‚           â”‚
Query Cache  InnoDB   Session      Plan     Statistics
   Pool    Buffer Pool  Buffer     Cache      Cache
   (æŸ¥è¯¢ç¼“å­˜) (å­˜å‚¨å¼•æ“)  (ä¼šè¯ç¼“å­˜)  (è®¡åˆ’ç¼“å­˜)  (ç»Ÿè®¡ç¼“å­˜)
```

### 1.3 ä¼˜åŒ–å™¨å†…å­˜çš„é‡è¦æ€§


**ğŸ“Š æ€§èƒ½å½±å“**
```
å†…å­˜ç®¡ç†å¥½åå¯¹æ€§èƒ½çš„å½±å“ï¼š

è‰¯å¥½çš„å†…å­˜ç®¡ç†ï¼š
â€¢ æ‰§è¡Œè®¡åˆ’é‡ç”¨ç‡ > 95%
â€¢ ç»Ÿè®¡ä¿¡æ¯å‘½ä¸­ç‡ > 90%  
â€¢ ä¼˜åŒ–æ—¶é—´ < 10ms
â€¢ å†…å­˜ä½¿ç”¨ç¨³å®š

ç³Ÿç³•çš„å†…å­˜ç®¡ç†ï¼š
â€¢ é¢‘ç¹é‡æ–°ç¼–è¯‘è®¡åˆ’
â€¢ ç»Ÿè®¡ä¿¡æ¯é‡å¤åŠ è½½
â€¢ ä¼˜åŒ–æ—¶é—´ > 100ms  
â€¢ å†…å­˜ä½¿ç”¨ä¸æ–­å¢é•¿
```

**ğŸ”¸ ä¸šåŠ¡å½±å“**
- **æŸ¥è¯¢å“åº”æ—¶é—´**ï¼šå¥½çš„ç¼“å­˜èƒ½å¤§å¹…å‡å°‘ä¼˜åŒ–æ—¶é—´
- **ç³»ç»Ÿååé‡**ï¼šå‡å°‘é‡å¤è®¡ç®—ï¼Œæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›
- **èµ„æºæ¶ˆè€—**ï¼šåˆç†çš„å†…å­˜ä½¿ç”¨é¿å…ç³»ç»Ÿèµ„æºæµªè´¹
- **ç³»ç»Ÿç¨³å®šæ€§**ï¼šé˜²æ­¢å†…å­˜æ³„æ¼å¯¼è‡´çš„ç³»ç»Ÿå´©æºƒ

---

## 2. ğŸ’¾ ä¼˜åŒ–å™¨å†…å­˜ä½¿ç”¨æœºåˆ¶


### 2.1 å†…å­˜åˆ†é…æ¨¡å¼


**ğŸ”¸ å†…å­˜åˆ†é…çš„åŸºæœ¬åŸåˆ™**
ä¼˜åŒ–å™¨å†…å­˜åˆ†é…éµå¾ª**åˆ†å±‚åˆ†ç±»**çš„åŸåˆ™ï¼šä¸åŒç±»å‹çš„æ•°æ®ä½¿ç”¨ä¸åŒçš„å†…å­˜æ± ï¼Œä¸åŒä¼˜å…ˆçº§çš„æ•°æ®æœ‰ä¸åŒçš„ä¿ç•™ç­–ç•¥ã€‚

**ğŸ”¥ å†…å­˜æ± åˆ†ç±»**
```sql
-- æŸ¥çœ‹ä¼˜åŒ–å™¨ç›¸å…³å†…å­˜ä½¿ç”¨æƒ…å†µ
SHOW VARIABLES LIKE '%optimizer%memory%';
SHOW VARIABLES LIKE '%query_cache%';

-- ä¸»è¦å†…å­˜æ± é…ç½®
SET query_cache_size = 128M;           -- æŸ¥è¯¢ç¼“å­˜å¤§å°
SET query_cache_limit = 4M;            -- å•ä¸ªæŸ¥è¯¢ç¼“å­˜é™åˆ¶
SET optimizer_search_depth = 62;       -- ä¼˜åŒ–æœç´¢æ·±åº¦ï¼ˆå½±å“å†…å­˜ä½¿ç”¨ï¼‰
```

**ğŸ“Š å†…å­˜ä½¿ç”¨å±‚æ¬¡**
```
ä¼˜åŒ–å™¨å†…å­˜ä½¿ç”¨å±‚æ¬¡ï¼š

Level 1: æ ¸å¿ƒå†…å­˜æ± 
â”œâ”€â”€ æ‰§è¡Œè®¡åˆ’ç¼“å­˜ (Plan Cache)
â”œâ”€â”€ ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜ (Stats Cache)  
â””â”€â”€ ä¼˜åŒ–å™¨å·¥ä½œå†…å­˜ (Working Memory)

Level 2: ä¼šè¯å†…å­˜æ± 
â”œâ”€â”€ ä¸´æ—¶è¡¨å†…å­˜ (Temp Table Memory)
â”œâ”€â”€ æ’åºç¼“å†²åŒº (Sort Buffer)
â””â”€â”€ è¿æ¥ç¼“å†²åŒº (Join Buffer)

Level 3: ä¸´æ—¶å†…å­˜æ± 
â”œâ”€â”€ è§£ææ ‘å†…å­˜ (Parse Tree Memory)
â”œâ”€â”€ æˆæœ¬è®¡ç®—å†…å­˜ (Cost Calculation Memory)
â””â”€â”€ ä¼˜åŒ–è·¯å¾„å†…å­˜ (Path Memory)
```

### 2.2 å†…å­˜åˆ†é…ç­–ç•¥


**ğŸ”¸ åŠ¨æ€å†…å­˜åˆ†é…**
```sql
-- ç›‘æ§ä¼˜åŒ–å™¨å†…å­˜åˆ†é…
SELECT 
    EVENT_NAME,
    COUNT_ALLOC,
    COUNT_FREE,
    SUM_NUMBER_OF_BYTES_ALLOC,
    SUM_NUMBER_OF_BYTES_FREE,
    LOW_COUNT_USED,
    HIGH_COUNT_USED
FROM performance_schema.memory_summary_global_by_event_name
WHERE EVENT_NAME LIKE '%optimizer%' OR EVENT_NAME LIKE '%sql%parse%'
ORDER BY SUM_NUMBER_OF_BYTES_ALLOC DESC;
```

**ğŸ”¸ å†…å­˜åˆ†é…æ—¶æœº**
- **è¿æ¥å»ºç«‹æ—¶**ï¼šåˆ†é…åŸºç¡€ä¼šè¯å†…å­˜
- **SQLè§£ææ—¶**ï¼šåˆ†é…è§£ææ ‘å’Œè¯­æ³•åˆ†æå†…å­˜
- **ä¼˜åŒ–é˜¶æ®µ**ï¼šåˆ†é…æˆæœ¬è®¡ç®—å’Œè·¯å¾„æœç´¢å†…å­˜
- **æ‰§è¡Œå‡†å¤‡**ï¼šåˆ†é…æ‰§è¡Œç›¸å…³çš„ç¼“å†²åŒºå†…å­˜

### 2.3 å†…å­˜å›æ”¶æœºåˆ¶


**ğŸ”¸ å†…å­˜å›æ”¶ç­–ç•¥**
```
è‡ªåŠ¨å›æ”¶æœºåˆ¶ï¼š

å³æ—¶å›æ”¶ï¼š
â€¢ SQLæ‰§è¡Œå®Œæˆåç«‹å³å›æ”¶ä¸´æ—¶å†…å­˜
â€¢ è§£ææ ‘å†…å­˜åœ¨ä¼˜åŒ–å®Œæˆåå›æ”¶
â€¢ é”™è¯¯æŸ¥è¯¢çš„ç›¸å…³å†…å­˜ç«‹å³æ¸…ç†

å»¶è¿Ÿå›æ”¶ï¼š  
â€¢ æ‰§è¡Œè®¡åˆ’åœ¨ç¼“å­˜æ»¡æ—¶æŒ‰LRUç®—æ³•å›æ”¶
â€¢ ç»Ÿè®¡ä¿¡æ¯åœ¨è¿‡æœŸåå»¶è¿Ÿæ¸…ç†
â€¢ ä¼šè¯å†…å­˜åœ¨è¿æ¥å…³é—­æ—¶å›æ”¶

å‘¨æœŸå›æ”¶ï¼š
â€¢ å®šæœŸæ¸…ç†è¿‡æœŸçš„ç¼“å­˜é¡¹
â€¢ ç¢ç‰‡æ•´ç†å’Œå†…å­˜å‹ç¼©
â€¢ ç»Ÿè®¡ä¿¡æ¯çš„å®šæœŸæ›´æ–°æ¸…ç†
```

---

## 3. ğŸ“‹ æ‰§è¡Œè®¡åˆ’ç¼“å­˜ç®¡ç†


### 3.1 æ‰§è¡Œè®¡åˆ’ç¼“å­˜åŸç†


**ğŸ”¸ è®¡åˆ’ç¼“å­˜çš„å·¥ä½œæœºåˆ¶**
æ‰§è¡Œè®¡åˆ’ç¼“å­˜å°±åƒä¸€ä¸ª**æ™ºèƒ½çš„é£Ÿè°±åº“**ã€‚å½“ä½ è¦åšä¸€é“èœï¼ˆæ‰§è¡ŒSQLï¼‰æ—¶ï¼Œå…ˆæŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰ç°æˆçš„é£Ÿè°±ï¼ˆç¼“å­˜çš„è®¡åˆ’ï¼‰ï¼Œå¦‚æœæœ‰å°±ç›´æ¥ä½¿ç”¨ï¼Œé¿å…é‡æ–°ç ”ç©¶æ€ä¹ˆåšã€‚

**ğŸ”¥ è®¡åˆ’ç¼“å­˜çš„å…³é”®è¦ç´ **
```sql
-- MySQLçš„æŸ¥è¯¢ç¼“å­˜ï¼ˆç±»ä¼¼æ‰§è¡Œè®¡åˆ’ç¼“å­˜çš„æ¦‚å¿µï¼‰
SHOW VARIABLES LIKE 'query_cache%';

-- æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜ä½¿ç”¨æƒ…å†µ
SHOW STATUS LIKE 'Qcache%';

-- å…¸å‹è¾“å‡ºè§£è¯»ï¼š
-- Qcache_hits: ç¼“å­˜å‘½ä¸­æ¬¡æ•°
-- Qcache_inserts: ç¼“å­˜æ’å…¥æ¬¡æ•°  
-- Qcache_queries_in_cache: å½“å‰ç¼“å­˜çš„æŸ¥è¯¢æ•°
-- Qcache_free_memory: å¯ç”¨ç¼“å­˜å†…å­˜
```

### 3.2 è®¡åˆ’ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸ


**ğŸ”¸ ç¼“å­˜ç”Ÿå‘½å‘¨æœŸç®¡ç†**
```
æ‰§è¡Œè®¡åˆ’ç¼“å­˜ç”Ÿå‘½å‘¨æœŸï¼š

1. ç”Ÿæˆé˜¶æ®µ (Generation)
   â”œâ”€â”€ SQLè§£æå’Œä¼˜åŒ–å®Œæˆ
   â”œâ”€â”€ ç”Ÿæˆæœ€ä¼˜æ‰§è¡Œè®¡åˆ’
   â””â”€â”€ è®¡ç®—ç¼“å­˜é”®å€¼

2. å­˜å‚¨é˜¶æ®µ (Storage)  
   â”œâ”€â”€ æ£€æŸ¥ç¼“å­˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿ
   â”œâ”€â”€ æŒ‰LRUç­–ç•¥æ¸…ç†æ—§è®¡åˆ’
   â””â”€â”€ å­˜å‚¨æ–°çš„æ‰§è¡Œè®¡åˆ’

3. æ£€ç´¢é˜¶æ®µ (Retrieval)
   â”œâ”€â”€ æ¥æ”¶æ–°çš„SQLè¯·æ±‚
   â”œâ”€â”€ è®¡ç®—æŸ¥è¯¢çš„ç¼“å­˜é”®
   â””â”€â”€ æŸ¥æ‰¾åŒ¹é…çš„æ‰§è¡Œè®¡åˆ’

4. éªŒè¯é˜¶æ®µ (Validation)
   â”œâ”€â”€ æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯æ˜¯å¦è¿‡æœŸ
   â”œâ”€â”€ éªŒè¯è¡¨ç»“æ„æ˜¯å¦å˜åŒ–
   â””â”€â”€ ç¡®è®¤è®¡åˆ’ä»ç„¶æœ‰æ•ˆ

5. æ¸…ç†é˜¶æ®µ (Cleanup)
   â”œâ”€â”€ è¿‡æœŸè®¡åˆ’è‡ªåŠ¨æ¸…ç†
   â”œâ”€â”€ è¡¨ç»“æ„å˜åŒ–å¯¼è‡´å¤±æ•ˆ
   â””â”€â”€ å†…å­˜å‹åŠ›å¯¼è‡´çš„å¼ºåˆ¶æ¸…ç†
```

### 3.3 è®¡åˆ’ç¼“å­˜ä¼˜åŒ–ç­–ç•¥


**ğŸ”¥ ç¼“å­˜æ•ˆç‡ä¼˜åŒ–**
```sql
-- ä¼˜åŒ–è®¡åˆ’ç¼“å­˜ç›¸å…³å‚æ•°
SET GLOBAL query_cache_size = 256M;        -- å¢åŠ ç¼“å­˜å¤§å°
SET GLOBAL query_cache_min_res_unit = 2048; -- ä¼˜åŒ–å†…å­˜åˆ†é…å•å…ƒ
SET GLOBAL query_cache_limit = 8M;         -- æé«˜å•æŸ¥è¯¢ç¼“å­˜é™åˆ¶

-- ç›‘æ§ç¼“å­˜æ•ˆç‡
SELECT 
    ROUND(Qcache_hits / (Qcache_hits + Com_select) * 100, 2) AS hit_ratio,
    Qcache_hits,
    Com_select,
    Qcache_queries_in_cache AS cached_queries,
    ROUND(Qcache_free_memory / 1024 / 1024, 2) AS free_memory_mb
FROM 
    (SELECT VARIABLE_VALUE AS Qcache_hits FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Qcache_hits') h,
    (SELECT VARIABLE_VALUE AS Com_select FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Com_select') s,
    (SELECT VARIABLE_VALUE AS Qcache_queries_in_cache FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Qcache_queries_in_cache') c,
    (SELECT VARIABLE_VALUE AS Qcache_free_memory FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Qcache_free_memory') f;
```

**ğŸ“Š ç¼“å­˜æ€§èƒ½æŒ‡æ ‡**
```
å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼š

ç¼“å­˜å‘½ä¸­ç‡ (Hit Ratio):
â€¢ ä¼˜ç§€: > 90%
â€¢ è‰¯å¥½: 70% - 90%  
â€¢ ä¸€èˆ¬: 50% - 70%
â€¢ å·®: < 50%

å†…å­˜ä½¿ç”¨ç‡ (Memory Usage):
â€¢ å¥åº·: 60% - 80%
â€¢ è­¦å‘Š: > 85%
â€¢ å±é™©: > 95%

å¹³å‡æŸ¥æ‰¾æ—¶é—´ (Lookup Time):
â€¢ ä¼˜ç§€: < 0.1ms
â€¢ è‰¯å¥½: 0.1 - 0.5ms
â€¢ éœ€ä¼˜åŒ–: > 0.5ms
```

---

## 4. ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜æœºåˆ¶


### 4.1 ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜**
ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜å°±åƒæ•°æ®åº“çš„**ä½“æ£€æŠ¥å‘Šå­˜æ¡£**ã€‚æ¯å¼ è¡¨çš„è¡Œæ•°ã€ç´¢å¼•åˆ†å¸ƒã€æ•°æ®ç‰¹å¾ç­‰ä¿¡æ¯éƒ½ä¼šç¼“å­˜èµ·æ¥ï¼Œä¼˜åŒ–å™¨ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥åˆ¶å®šæœ€ä½³çš„æ‰§è¡Œè®¡åˆ’ã€‚

**ğŸ”¸ ç»Ÿè®¡ä¿¡æ¯çš„ç±»å‹**
```sql
-- æŸ¥çœ‹è¡¨çš„ç»Ÿè®¡ä¿¡æ¯
SELECT 
    table_name,
    table_rows,
    avg_row_length,
    data_length,
    index_length,
    update_time
FROM information_schema.tables 
WHERE table_schema = 'your_database'
AND table_name = 'your_table';

-- æŸ¥çœ‹ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯
SELECT 
    table_name,
    index_name,
    cardinality,
    nullable
FROM information_schema.statistics 
WHERE table_schema = 'your_database'
ORDER BY table_name, index_name;
```

### 4.2 ç»Ÿè®¡ä¿¡æ¯æ›´æ–°æœºåˆ¶


**ğŸ”¥ è‡ªåŠ¨æ›´æ–°ç­–ç•¥**
```sql
-- é…ç½®ç»Ÿè®¡ä¿¡æ¯è‡ªåŠ¨æ›´æ–°
SET GLOBAL innodb_stats_auto_recalc = ON;           -- è‡ªåŠ¨é‡æ–°è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
SET GLOBAL innodb_stats_persistent = ON;            -- æŒä¹…åŒ–ç»Ÿè®¡ä¿¡æ¯
SET GLOBAL innodb_stats_persistent_sample_pages = 20; -- é‡‡æ ·é¡µæ•°

-- æ‰‹åŠ¨æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
ANALYZE TABLE your_table;

-- æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯æ›´æ–°çŠ¶æ€
SELECT 
    schema_name,
    table_name,
    last_update,
    n_rows,
    clustered_index_size,
    sum_of_other_index_sizes
FROM mysql.innodb_table_stats
WHERE schema_name = 'your_database';
```

**ğŸ“Š æ›´æ–°è§¦å‘æ¡ä»¶**
```
ç»Ÿè®¡ä¿¡æ¯æ›´æ–°è§¦å‘æœºåˆ¶ï¼š

è‡ªåŠ¨è§¦å‘æ¡ä»¶ï¼š
â€¢ è¡¨æ•°æ®å˜åŒ–è¶…è¿‡10%
â€¢ æ–°åˆ›å»ºçš„ç´¢å¼•  
â€¢ è¡¨ç»“æ„å‘ç”Ÿå˜åŒ–
â€¢ ç³»ç»Ÿé‡å¯åé¦–æ¬¡è®¿é—®

æ‰‹åŠ¨è§¦å‘åœºæ™¯ï¼š
â€¢ å¤§æ‰¹é‡æ•°æ®å¯¼å…¥å
â€¢ æ•°æ®åˆ†å¸ƒå‘ç”Ÿæ˜¾è‘—å˜åŒ–
â€¢ æŸ¥è¯¢æ€§èƒ½çªç„¶ä¸‹é™
â€¢ å®šæœŸç»´æŠ¤ä»»åŠ¡
```

### 4.3 ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜ç­–ç•¥


**ğŸ”¸ ç¼“å­˜ç”Ÿå‘½å‘¨æœŸç®¡ç†**
```sql
-- ç›‘æ§ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜ä½¿ç”¨
SELECT 
    EVENT_NAME,
    COUNT_READ,
    COUNT_WRITE,
    SUM_TIMER_READ,
    SUM_TIMER_WRITE
FROM performance_schema.file_summary_by_event_name
WHERE EVENT_NAME LIKE '%innodb%stats%';

-- ç»Ÿè®¡ä¿¡æ¯å†…å­˜ä½¿ç”¨ç›‘æ§
SELECT 
    ROUND(SUM(data_length + index_length) / 1024 / 1024, 2) AS total_size_mb,
    COUNT(*) AS table_count,
    AVG(table_rows) AS avg_rows_per_table
FROM information_schema.tables
WHERE table_schema NOT IN ('information_schema', 'mysql', 'performance_schema');
```

---

## 5. ğŸ’» ä¼˜åŒ–å™¨ä¼šè¯å†…å­˜


### 5.1 ä¼šè¯å†…å­˜åˆ†é…åŸç†


**ğŸ”¸ ä»€ä¹ˆæ˜¯ä¼šè¯å†…å­˜**
ä¼šè¯å†…å­˜å°±åƒæ¯ä¸ªç”¨æˆ·çš„**ä¸“å±å·¥ä½œå°**ã€‚æ¯ä¸ªæ•°æ®åº“è¿æ¥éƒ½æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾å½“å‰ä¼šè¯çš„ä¸´æ—¶æ•°æ®ã€æ’åºç¼“å†²ã€è¿æ¥ç¼“å†²ç­‰ã€‚

**ğŸ”¥ ä¼šè¯å†…å­˜çš„ä¸»è¦ç»„æˆ**
```sql
-- æŸ¥çœ‹ä¼šè¯çº§å†…å­˜é…ç½®
SHOW VARIABLES LIKE '%buffer_size';
SHOW VARIABLES LIKE '%tmp_table_size';
SHOW VARIABLES LIKE '%max_heap_table_size';

-- ä¸»è¦ä¼šè¯å†…å­˜å‚æ•°
SET SESSION sort_buffer_size = 2M;          -- æ’åºç¼“å†²åŒº
SET SESSION join_buffer_size = 1M;          -- è¿æ¥ç¼“å†²åŒº  
SET SESSION tmp_table_size = 32M;           -- ä¸´æ—¶è¡¨å¤§å°
SET SESSION max_heap_table_size = 32M;      -- MEMORYå¼•æ“è¡¨å¤§å°
```

### 5.2 ä¼šè¯å†…å­˜ä½¿ç”¨ç›‘æ§


**ğŸ”¸ å†…å­˜ä½¿ç”¨è·Ÿè¸ª**
```sql
-- ç›‘æ§å½“å‰ä¼šè¯å†…å­˜ä½¿ç”¨
SELECT 
    EVENT_NAME,
    CURRENT_COUNT_USED,
    HIGH_COUNT_USED,
    SUM_NUMBER_OF_BYTES_ALLOC,
    SUM_NUMBER_OF_BYTES_FREE
FROM performance_schema.memory_summary_by_thread_by_event_name
WHERE THREAD_ID = CONNECTION_ID()
AND EVENT_NAME LIKE '%sql%'
ORDER BY SUM_NUMBER_OF_BYTES_ALLOC DESC;

-- æŸ¥çœ‹æ‰€æœ‰ä¼šè¯çš„å†…å­˜ä½¿ç”¨æ€»è§ˆ
SELECT 
    t.THREAD_ID,
    t.PROCESSLIST_ID,
    t.PROCESSLIST_USER,
    t.PROCESSLIST_DB,
    ROUND(SUM(m.SUM_NUMBER_OF_BYTES_ALLOC) / 1024 / 1024, 2) AS memory_used_mb
FROM performance_schema.threads t
JOIN performance_schema.memory_summary_by_thread_by_event_name m ON t.THREAD_ID = m.THREAD_ID
WHERE t.PROCESSLIST_ID IS NOT NULL
GROUP BY t.THREAD_ID
ORDER BY memory_used_mb DESC
LIMIT 10;
```

### 5.3 ä¼šè¯å†…å­˜ä¼˜åŒ–


**ğŸ”¸ å†…å­˜å‚æ•°è°ƒä¼˜ç­–ç•¥**
```sql
-- æ ¹æ®æŸ¥è¯¢ç‰¹å¾è°ƒæ•´ä¼šè¯å†…å­˜
-- å¤§é‡æ’åºæ“ä½œçš„ä¼šè¯
SET SESSION sort_buffer_size = 8M;

-- å¤æ‚JOINæŸ¥è¯¢çš„ä¼šè¯  
SET SESSION join_buffer_size = 4M;

-- éœ€è¦å¤§ä¸´æ—¶è¡¨çš„ä¼šè¯
SET SESSION tmp_table_size = 128M;
SET SESSION max_heap_table_size = 128M;

-- æ‰¹é‡æ’å…¥æ“ä½œçš„ä¼šè¯
SET SESSION bulk_insert_buffer_size = 64M;
```

**ğŸ“Š å†…å­˜ä½¿ç”¨ä¼˜åŒ–å»ºè®®**
```
ä¼šè¯å†…å­˜ä¼˜åŒ–æŒ‡å¯¼åŸåˆ™ï¼š

å°å‹OLTPç³»ç»Ÿï¼š
â€¢ sort_buffer_size: 1-2MB
â€¢ join_buffer_size: 512KB-1MB  
â€¢ tmp_table_size: 16-32MB

å¤§å‹OLAPç³»ç»Ÿï¼š
â€¢ sort_buffer_size: 4-16MB
â€¢ join_buffer_size: 2-8MB
â€¢ tmp_table_size: 128-512MB

æ··åˆè´Ÿè½½ç³»ç»Ÿï¼š
â€¢ åŠ¨æ€è°ƒæ•´ï¼ŒæŒ‰æŸ¥è¯¢ç‰¹å¾è®¾ç½®
â€¢ ç›‘æ§å†…å­˜ä½¿ç”¨ï¼Œé¿å…è¿‡åº¦åˆ†é…
â€¢ è®¾ç½®åˆç†çš„è¿æ¥æ•°ä¸Šé™
```

---

## 6. ğŸŠ å†…å­˜æ± ç®¡ç†ç­–ç•¥


### 6.1 å†…å­˜æ± æ¶æ„è®¾è®¡


**ğŸ”¸ å†…å­˜æ± çš„åŸºæœ¬æ¦‚å¿µ**
å†…å­˜æ± å°±åƒä¸€ä¸ª**æ™ºèƒ½ä»“åº“ç®¡ç†ç³»ç»Ÿ**ï¼Œå®ƒé¢„å…ˆåˆ†é…ä¸€å¤§å—å†…å­˜ï¼Œç„¶åæ ¹æ®éœ€è¦åˆ†é…ç»™ä¸åŒçš„ç»„ä»¶ä½¿ç”¨ï¼Œé¿å…é¢‘ç¹çš„å†…å­˜ç”³è¯·å’Œé‡Šæ”¾æ“ä½œã€‚

**ğŸ”¸ å†…å­˜æ± åˆ†å±‚æ¶æ„**
```
MySQLå†…å­˜æ± åˆ†å±‚æ¶æ„ï¼š

Global Memory Pools (å…¨å±€å†…å­˜æ± )
â”œâ”€â”€ InnoDB Buffer Pool (å­˜å‚¨å¼•æ“ç¼“å†²æ± )
â”œâ”€â”€ Query Cache Pool (æŸ¥è¯¢ç¼“å­˜æ± )  
â”œâ”€â”€ Table Cache Pool (è¡¨ç¼“å­˜æ± )
â””â”€â”€ Thread Cache Pool (çº¿ç¨‹ç¼“å­˜æ± )

Session Memory Pools (ä¼šè¯å†…å­˜æ± )
â”œâ”€â”€ Sort Buffer Pool (æ’åºç¼“å†²æ± )
â”œâ”€â”€ Join Buffer Pool (è¿æ¥ç¼“å†²æ± )
â”œâ”€â”€ Temp Table Pool (ä¸´æ—¶è¡¨å†…å­˜æ± )  
â””â”€â”€ Binary Log Cache (äºŒè¿›åˆ¶æ—¥å¿—ç¼“å­˜)

Optimizer Memory Pools (ä¼˜åŒ–å™¨å†…å­˜æ± )
â”œâ”€â”€ Parse Tree Pool (è§£ææ ‘å†…å­˜æ± )
â”œâ”€â”€ Cost Model Pool (æˆæœ¬æ¨¡å‹å†…å­˜æ± )
â”œâ”€â”€ Statistics Cache Pool (ç»Ÿè®¡ç¼“å­˜æ± )
â””â”€â”€ Plan Cache Pool (è®¡åˆ’ç¼“å­˜æ± )
```

### 6.2 å†…å­˜æ± åˆ†é…ç®—æ³•


**ğŸ”¥ å†…å­˜åˆ†é…ç­–ç•¥**
```sql
-- é…ç½®ä¸»è¦å†…å­˜æ± å¤§å°
SET GLOBAL innodb_buffer_pool_size = '4G';        -- InnoDBç¼“å†²æ± 
SET GLOBAL innodb_buffer_pool_instances = 4;       -- ç¼“å†²æ± å®ä¾‹æ•°
SET GLOBAL table_open_cache = 4000;               -- è¡¨ç¼“å­˜
SET GLOBAL thread_cache_size = 50;                -- çº¿ç¨‹ç¼“å­˜

-- ç›‘æ§å†…å­˜æ± ä½¿ç”¨æƒ…å†µ
SELECT 
    POOL_ID,
    POOL_SIZE,
    FREE_BUFFERS,
    DATABASE_PAGES,
    OLD_DATABASE_PAGES,
    PENDING_READS
FROM information_schema.innodb_buffer_pool_stats;
```

**ğŸ”¸ å†…å­˜åˆ†é…ç®—æ³•ç±»å‹**
```
å†…å­˜åˆ†é…ç®—æ³•æ¯”è¾ƒï¼š

Fixed-Size Allocation (å›ºå®šå¤§å°åˆ†é…):
âœ… åˆ†é…é€Ÿåº¦å¿«
âœ… å†…å­˜ç¢ç‰‡å°‘  
âŒ å†…å­˜ä½¿ç”¨æ•ˆç‡å¯èƒ½ä¸é«˜

Variable-Size Allocation (å¯å˜å¤§å°åˆ†é…):
âœ… å†…å­˜ä½¿ç”¨æ•ˆç‡é«˜
âŒ å¯èƒ½äº§ç”Ÿå†…å­˜ç¢ç‰‡
âŒ åˆ†é…ç®—æ³•ç›¸å¯¹å¤æ‚

Buddy System (ä¼™ä¼´ç³»ç»Ÿ):
âœ… å¹³è¡¡åˆ†é…é€Ÿåº¦å’Œç¢ç‰‡æ§åˆ¶
âœ… é€‚åˆå†…å­˜æ± ç®¡ç†
âŒ å®ç°å¤æ‚åº¦ä¸­ç­‰
```

### 6.3 å†…å­˜æ± ç›‘æ§ä¸è°ƒä¼˜


**ğŸ”¸ å†…å­˜æ± å¥åº·ç›‘æ§**
```sql
-- InnoDBç¼“å†²æ± å‘½ä¸­ç‡ç›‘æ§
SELECT 
    ROUND(
        (1 - (Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests)) * 100, 2
    ) AS buffer_pool_hit_ratio
FROM 
    (SELECT VARIABLE_VALUE AS Innodb_buffer_pool_reads 
     FROM performance_schema.global_status 
     WHERE VARIABLE_NAME = 'Innodb_buffer_pool_reads') reads,
    (SELECT VARIABLE_VALUE AS Innodb_buffer_pool_read_requests 
     FROM performance_schema.global_status 
     WHERE VARIABLE_NAME = 'Innodb_buffer_pool_read_requests') requests;

-- å†…å­˜æ± ç¢ç‰‡åŒ–ç¨‹åº¦æ£€æŸ¥
SELECT 
    ROUND(FREE_BUFFERS / POOL_SIZE * 100, 2) AS free_buffer_ratio,
    ROUND((POOL_SIZE - DATABASE_PAGES - FREE_BUFFERS) / POOL_SIZE * 100, 2) AS other_pages_ratio
FROM information_schema.innodb_buffer_pool_stats;
```

---

## 7. ğŸ” å†…å­˜æ³„æ¼æ£€æµ‹ä¸å¤„ç†


### 7.1 å†…å­˜æ³„æ¼æ£€æµ‹æœºåˆ¶


**ğŸ”¸ ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼**
å†…å­˜æ³„æ¼å°±åƒ**æ°´ç®¡æ¼æ°´**ï¼Œç¨‹åºç”³è¯·äº†å†…å­˜ä½†å¿˜è®°é‡Šæ”¾ï¼Œä¹…è€Œä¹…ä¹‹ç³»ç»Ÿå¯ç”¨å†…å­˜è¶Šæ¥è¶Šå°‘ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚

**ğŸ”¥ å†…å­˜æ³„æ¼æ£€æµ‹æ–¹æ³•**
```sql
-- æ£€æµ‹é•¿æœŸå¢é•¿çš„å†…å­˜ä½¿ç”¨
SELECT 
    EVENT_NAME,
    COUNT_ALLOC - COUNT_FREE AS net_alloc_count,
    SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE AS net_bytes_used,
    ROUND(
        (SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) / 1024 / 1024, 2
    ) AS net_mb_used
FROM performance_schema.memory_summary_global_by_event_name
WHERE (COUNT_ALLOC - COUNT_FREE) > 0
OR (SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) > 10485760  -- 10MB
ORDER BY net_bytes_used DESC;

-- ç›‘æ§ä¼šè¯çº§å†…å­˜æ³„æ¼
SELECT 
    t.PROCESSLIST_ID,
    t.PROCESSLIST_USER,
    t.PROCESSLIST_TIME,
    ROUND(SUM(m.SUM_NUMBER_OF_BYTES_ALLOC - m.SUM_NUMBER_OF_BYTES_FREE) / 1024 / 1024, 2) AS net_memory_mb
FROM performance_schema.threads t
JOIN performance_schema.memory_summary_by_thread_by_event_name m ON t.THREAD_ID = m.THREAD_ID
WHERE t.PROCESSLIST_ID IS NOT NULL
AND (m.SUM_NUMBER_OF_BYTES_ALLOC - m.SUM_NUMBER_OF_BYTES_FREE) > 0
GROUP BY t.THREAD_ID
HAVING net_memory_mb > 50  -- è¶…è¿‡50MBçš„ä¼šè¯
ORDER BY net_memory_mb DESC;
```

### 7.2 å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯


**ğŸ”¸ å…¸å‹å†…å­˜æ³„æ¼æ¨¡å¼**
```
å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯ï¼š

1. é•¿æ—¶é—´è¿è¡Œçš„æŸ¥è¯¢
   â€¢ å¤æ‚çš„åˆ†ææŸ¥è¯¢é•¿æ—¶é—´å ç”¨å†…å­˜
   â€¢ ä¸´æ—¶è¡¨æ²¡æœ‰åŠæ—¶æ¸…ç†
   â€¢ æ’åºç¼“å†²åŒºæ²¡æœ‰é‡Šæ”¾

2. è¿æ¥æ± ç®¡ç†ä¸å½“
   â€¢ è¿æ¥æ²¡æœ‰æ­£ç¡®å…³é—­
   â€¢ ä¼šè¯å†…å­˜æ²¡æœ‰å›æ”¶
   â€¢ é¢„å¤„ç†è¯­å¥ç¼“å­˜è¿‡å¤š

3. å­˜å‚¨è¿‡ç¨‹å†…å­˜æ³„æ¼
   â€¢ æ¸¸æ ‡æ²¡æœ‰æ­£ç¡®å…³é—­
   â€¢ ä¸´æ—¶å˜é‡æ²¡æœ‰æ¸…ç†
   â€¢ é€’å½’è°ƒç”¨æ·±åº¦è¿‡å¤§

4. ç¼“å­˜ç®¡ç†é—®é¢˜
   â€¢ ç¼“å­˜æ¸…ç†ç­–ç•¥å¤±æ•ˆ
   â€¢ LRUç®—æ³•å·¥ä½œå¼‚å¸¸
   â€¢ è¿‡æœŸæ•°æ®æ²¡æœ‰æ¸…ç†
```

### 7.3 å†…å­˜æ³„æ¼ä¿®å¤ç­–ç•¥


**ğŸ”¸ é¢„é˜²å’Œä¿®å¤æ–¹æ³•**
```sql
-- å®šæœŸæ¸…ç†æŸ¥è¯¢ç¼“å­˜
FLUSH QUERY CACHE;
RESET QUERY CACHE;

-- æ¸…ç†è¿‡æœŸçš„è¿æ¥
SHOW PROCESSLIST;
-- æ ¹æ®éœ€è¦ç»ˆæ­¢é•¿æ—¶é—´è¿è¡Œçš„æŸ¥è¯¢
KILL QUERY thread_id;

-- é‡ç½®ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜
FLUSH TABLES;
FLUSH STATUS;

-- æ£€æŸ¥å¹¶ä¿®å¤è¡¨
CHECK TABLE table_name;
REPAIR TABLE table_name;
```

**ğŸ“Š å†…å­˜æ³„æ¼é¢„è­¦é˜ˆå€¼**
```
å†…å­˜æ³„æ¼é¢„è­¦æŒ‡æ ‡ï¼š

è½»å¾®è­¦å‘Š (éœ€å…³æ³¨):
â€¢ å•ä¼šè¯å†…å­˜ä½¿ç”¨ > 100MB
â€¢ å…¨å±€å†…å­˜å¢é•¿ç‡ > 5%/å°æ—¶
â€¢ ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™ > 10%

ä¸­ç­‰è­¦å‘Š (éœ€å¤„ç†):
â€¢ å•ä¼šè¯å†…å­˜ä½¿ç”¨ > 500MB  
â€¢ å…¨å±€å†…å­˜å¢é•¿ç‡ > 10%/å°æ—¶
â€¢ ç³»ç»Ÿå¯ç”¨å†…å­˜ < 20%

ä¸¥é‡è­¦å‘Š (ç«‹å³å¤„ç†):
â€¢ å•ä¼šè¯å†…å­˜ä½¿ç”¨ > 1GB
â€¢ ç³»ç»Ÿå¯ç”¨å†…å­˜ < 10%
â€¢ OOM (Out of Memory) é”™è¯¯
```

---

## 8. ğŸš€ ä¼˜åŒ–å™¨å†…å­˜ä¼˜åŒ–ç­–ç•¥


### 8.1 å†…å­˜ä¼˜åŒ–åŸºæœ¬åŸåˆ™


**ğŸ”¸ ä¼˜åŒ–å™¨å†…å­˜ä¼˜åŒ–çš„æ ¸å¿ƒæ€è·¯**
å†…å­˜ä¼˜åŒ–å°±åƒ**æ•´ç†æˆ¿é—´**ï¼šæŠŠæœ€å¸¸ç”¨çš„ä¸œè¥¿æ”¾åœ¨æœ€æ–¹ä¾¿çš„åœ°æ–¹ï¼Œå®šæœŸæ¸…ç†ä¸éœ€è¦çš„ç‰©å“ï¼Œåˆç†è§„åˆ’ç©ºé—´ä½¿ç”¨ã€‚

**ğŸ”¥ å†…å­˜ä¼˜åŒ–ç­–ç•¥æ¡†æ¶**
```
å†…å­˜ä¼˜åŒ–å››å¤§ç­–ç•¥ï¼š

1. å‡å°‘å†…å­˜ä½¿ç”¨ (Reduce Usage)
   â”œâ”€â”€ ä¼˜åŒ–æŸ¥è¯¢ï¼Œå‡å°‘ä¸´æ—¶å†…å­˜éœ€æ±‚
   â”œâ”€â”€ åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°
   â””â”€â”€ é¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…

2. æé«˜å†…å­˜æ•ˆç‡ (Improve Efficiency)  
   â”œâ”€â”€ æé«˜ç¼“å­˜å‘½ä¸­ç‡
   â”œâ”€â”€ å‡å°‘å†…å­˜ç¢ç‰‡
   â””â”€â”€ ä¼˜åŒ–å†…å­˜è®¿é—®æ¨¡å¼

3. æ™ºèƒ½å†…å­˜ç®¡ç† (Smart Management)
   â”œâ”€â”€ åŠ¨æ€å†…å­˜åˆ†é…
   â”œâ”€â”€ è‡ªé€‚åº”ç¼“å­˜å¤§å°
   â””â”€â”€ é¢„æµ‹æ€§å†…å­˜é¢„åˆ†é…

4. ä¸»åŠ¨å†…å­˜æ¸…ç† (Proactive Cleanup)
   â”œâ”€â”€ å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜  
   â”œâ”€â”€ è‡ªåŠ¨å›æ”¶ç©ºé—²å†…å­˜
   â””â”€â”€ é¢„é˜²å†…å­˜æ³„æ¼
```

### 8.2 æŸ¥è¯¢çº§å†…å­˜ä¼˜åŒ–


**ğŸ”¸ ä¼˜åŒ–æŸ¥è¯¢å‡å°‘å†…å­˜ä½¿ç”¨**
```sql
-- ä¼˜åŒ–å‰ï¼šå†…å­˜ä½¿ç”¨å¤§çš„æŸ¥è¯¢
SELECT * FROM large_table 
ORDER BY some_column 
LIMIT 10;

-- ä¼˜åŒ–åï¼šå‡å°‘æ’åºå†…å­˜ä½¿ç”¨
SELECT id, name, create_time 
FROM large_table 
WHERE create_time > '2024-01-01'
ORDER BY id  -- ä½¿ç”¨ç´¢å¼•æ’åº
LIMIT 10;

-- ä¼˜åŒ–å¤æ‚JOINæŸ¥è¯¢
-- ä¼˜åŒ–å‰ï¼šå¯èƒ½äº§ç”Ÿå¤§ä¸´æ—¶è¡¨
SELECT a.*, b.*, c.*
FROM table_a a
JOIN table_b b ON a.id = b.a_id
JOIN table_c c ON b.id = c.b_id;

-- ä¼˜åŒ–åï¼šåˆ†æ­¥æŸ¥è¯¢æˆ–ç´¢å¼•ä¼˜åŒ–
SELECT a.id, a.name, b.value, c.description
FROM table_a a
JOIN table_b b ON a.id = b.a_id
JOIN table_c c ON b.id = c.b_id
WHERE a.status = 'active'  -- æ·»åŠ è¿‡æ»¤æ¡ä»¶å‡å°‘æ•°æ®é‡
AND b.create_time > '2024-01-01';
```

### 8.3 ç³»ç»Ÿçº§å†…å­˜ä¼˜åŒ–


**ğŸ”¥ å†…å­˜å‚æ•°è°ƒä¼˜**
```sql
-- æ ¹æ®ç³»ç»Ÿè´Ÿè½½ç‰¹å¾è°ƒæ•´å†…å­˜å‚æ•°

-- OLTPç³»ç»Ÿä¼˜åŒ–ï¼ˆé«˜å¹¶å‘ï¼Œå°æŸ¥è¯¢ï¼‰
SET GLOBAL innodb_buffer_pool_size = '70%';  -- ç³»ç»Ÿå†…å­˜çš„70%
SET GLOBAL query_cache_size = 64M;           -- é€‚ä¸­çš„æŸ¥è¯¢ç¼“å­˜
SET GLOBAL table_open_cache = 4000;         -- è¾ƒå¤§çš„è¡¨ç¼“å­˜
SET GLOBAL thread_cache_size = 50;          -- é€‚ä¸­çš„çº¿ç¨‹ç¼“å­˜

-- OLAPç³»ç»Ÿä¼˜åŒ–ï¼ˆä½å¹¶å‘ï¼Œå¤§æŸ¥è¯¢ï¼‰  
SET GLOBAL innodb_buffer_pool_size = '80%';  -- æ›´å¤§çš„ç¼“å†²æ± 
SET GLOBAL sort_buffer_size = 16M;          -- æ›´å¤§çš„æ’åºç¼“å†²
SET GLOBAL join_buffer_size = 8M;           -- æ›´å¤§çš„è¿æ¥ç¼“å†²
SET GLOBAL tmp_table_size = 256M;           -- æ›´å¤§çš„ä¸´æ—¶è¡¨ç©ºé—´

-- æ··åˆè´Ÿè½½ä¼˜åŒ–
SET GLOBAL innodb_buffer_pool_size = '75%';
SET GLOBAL innodb_buffer_pool_instances = 8; -- å¤šå®ä¾‹å‡å°‘é”ç«äº‰
```

**ğŸ“Š å†…å­˜ä¼˜åŒ–æ•ˆæœè¯„ä¼°**
```sql
-- å†…å­˜ä¼˜åŒ–æ•ˆæœç›‘æ§
WITH memory_metrics AS (
    SELECT 
        'Buffer Pool Hit Ratio' AS metric,
        CONCAT(
            ROUND((1 - (
                SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_reads'
            ) / (
                SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_read_requests'
            )) * 100, 2), '%'
        ) AS value
    UNION ALL
    SELECT 
        'Query Cache Hit Ratio' AS metric,
        CONCAT(
            ROUND((
                SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Qcache_hits'
            ) / ((
                SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Qcache_hits'
            ) + (
                SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Com_select'
            )) * 100, 2), '%'
        ) AS value
)
SELECT * FROM memory_metrics;
```

---

## 9. ğŸ“Š å†…å­˜ä½¿ç”¨ç›‘æ§é¢„è­¦


### 9.1 å†…å­˜ç›‘æ§æŒ‡æ ‡ä½“ç³»


**ğŸ”¸ å†…å­˜ç›‘æ§çš„é‡è¦æ€§**
å†…å­˜ç›‘æ§å°±åƒç»™æ•°æ®åº“åš**å¥åº·ä½“æ£€**ï¼Œé€šè¿‡å„ç§æŒ‡æ ‡åŠæ—¶å‘ç°é—®é¢˜ï¼Œé¢„é˜²ç³»ç»Ÿæ•…éšœã€‚

**ğŸ”¥ æ ¸å¿ƒç›‘æ§æŒ‡æ ‡**
```sql
-- ç»¼åˆå†…å­˜ä½¿ç”¨ç›‘æ§è§†å›¾
CREATE VIEW memory_monitoring AS
SELECT 
    'Total Memory Usage' AS metric_name,
    ROUND(
        (SELECT SUM(SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) 
         FROM performance_schema.memory_summary_global_by_event_name) / 1024 / 1024 / 1024, 2
    ) AS value_gb,
    'GB' AS unit
UNION ALL
SELECT 
    'Buffer Pool Usage',
    ROUND(
        (SELECT (POOL_SIZE - FREE_BUFFERS) * $$innodb_page_size 
         FROM information_schema.innodb_buffer_pool_stats LIMIT 1) / 1024 / 1024 / 1024, 2
    ) AS value_gb,
    'GB' AS unit
UNION ALL  
SELECT 
    'Query Cache Usage',
    ROUND(
        (SELECT VARIABLE_VALUE FROM performance_schema.global_status 
         WHERE VARIABLE_NAME = 'Qcache_queries_in_cache') / 1000, 2
    ) AS value_gb,
    'K Queries' AS unit;

-- æŸ¥çœ‹ç›‘æ§ç»“æœ
SELECT * FROM memory_monitoring;
```

### 9.2 è‡ªåŠ¨é¢„è­¦ç³»ç»Ÿ


**ğŸ”¸ é¢„è­¦é˜ˆå€¼è®¾è®¡**
```sql
-- å†…å­˜ä½¿ç”¨é¢„è­¦å­˜å‚¨è¿‡ç¨‹
DELIMITER //
CREATE PROCEDURE CheckMemoryUsage()
BEGIN
    DECLARE total_memory_gb DECIMAL(10,2);
    DECLARE buffer_pool_usage_pct DECIMAL(5,2);
    DECLARE warning_msg TEXT DEFAULT '';
    
    -- è·å–æ€»å†…å­˜ä½¿ç”¨æƒ…å†µ
    SELECT 
        ROUND(SUM(SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) / 1024 / 1024 / 1024, 2)
    INTO total_memory_gb
    FROM performance_schema.memory_summary_global_by_event_name;
    
    -- è·å–ç¼“å†²æ± ä½¿ç”¨ç‡
    SELECT 
        ROUND((POOL_SIZE - FREE_BUFFERS) / POOL_SIZE * 100, 2)
    INTO buffer_pool_usage_pct
    FROM information_schema.innodb_buffer_pool_stats LIMIT 1;
    
    -- æ£€æŸ¥é¢„è­¦æ¡ä»¶
    IF total_memory_gb > 8 THEN
        SET warning_msg = CONCAT(warning_msg, 'HIGH MEMORY USAGE: ', total_memory_gb, 'GB; ');
    END IF;
    
    IF buffer_pool_usage_pct > 90 THEN
        SET warning_msg = CONCAT(warning_msg, 'BUFFER POOL USAGE HIGH: ', buffer_pool_usage_pct, '%; ');
    END IF;
    
    -- è¾“å‡ºé¢„è­¦ä¿¡æ¯
    IF LENGTH(warning_msg) > 0 THEN
        SELECT CONCAT('MEMORY WARNING: ', warning_msg) AS alert_message;
    ELSE
        SELECT 'Memory usage normal' AS status_message;
    END IF;
    
END //
DELIMITER ;

-- å®šæœŸæ‰§è¡Œé¢„è­¦æ£€æŸ¥
CALL CheckMemoryUsage();
```

### 9.3 å®æ—¶ç›‘æ§ä»ªè¡¨æ¿


**ğŸ”¸ å…³é”®æŒ‡æ ‡ç›‘æ§**
```sql
-- å®æ—¶å†…å­˜ç›‘æ§ä»ªè¡¨æ¿æŸ¥è¯¢
SELECT 
    'Memory Usage Summary' AS dashboard_section,
    JSON_OBJECT(
        'total_allocated_gb', ROUND(
            (SELECT SUM(SUM_NUMBER_OF_BYTES_ALLOC) 
             FROM performance_schema.memory_summary_global_by_event_name) / 1024 / 1024 / 1024, 2
        ),
        'total_freed_gb', ROUND(
            (SELECT SUM(SUM_NUMBER_OF_BYTES_FREE) 
             FROM performance_schema.memory_summary_global_by_event_name) / 1024 / 1024 / 1024, 2
        ),
        'net_usage_gb', ROUND(
            (SELECT SUM(SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) 
             FROM performance_schema.memory_summary_global_by_event_name) / 1024 / 1024 / 1024, 2
        )
    ) AS metrics
UNION ALL
SELECT 
    'Cache Performance',
    JSON_OBJECT(
        'buffer_pool_hit_ratio', CONCAT(
            ROUND((1 - (
                SELECT VARIABLE_VALUE FROM performance_schema.global_status 
                WHERE VARIABLE_NAME = 'Innodb_buffer_pool_reads'
            ) / (
                SELECT VARIABLE_VALUE FROM performance_schema.global_status 
                WHERE VARIABLE_NAME = 'Innodb_buffer_pool_read_requests'  
            )) * 100, 2), '%'
        ),
        'query_cache_hit_ratio', CONCAT(
            ROUND((
                SELECT VARIABLE_VALUE FROM performance_schema.global_status 
                WHERE VARIABLE_NAME = 'Qcache_hits'
            ) / ((
                SELECT VARIABLE_VALUE FROM performance_schema.global_status 
                WHERE VARIABLE_NAME = 'Qcache_hits'
            ) + (
                SELECT VARIABLE_VALUE FROM performance_schema.global_status 
                WHERE VARIABLE_NAME = 'Com_select'
            )) * 100, 2), '%'
        )
    ) AS metrics;
```

**ğŸ“Š ç›‘æ§é¢„è­¦çº§åˆ«**
```
å†…å­˜ç›‘æ§é¢„è­¦çº§åˆ«å®šä¹‰ï¼š

ğŸŸ¢ æ­£å¸¸ (Normal):
â€¢ å†…å­˜ä½¿ç”¨ç‡ < 70%
â€¢ ç¼“å­˜å‘½ä¸­ç‡ > 95%
â€¢ æ— å†…å­˜æ³„æ¼è¿¹è±¡

ğŸŸ¡ è­¦å‘Š (Warning):  
â€¢ å†…å­˜ä½¿ç”¨ç‡ 70% - 85%
â€¢ ç¼“å­˜å‘½ä¸­ç‡ 90% - 95%
â€¢ è½»å¾®å†…å­˜å¢é•¿è¶‹åŠ¿

ğŸŸ  é‡è¦ (Critical):
â€¢ å†…å­˜ä½¿ç”¨ç‡ 85% - 95%
â€¢ ç¼“å­˜å‘½ä¸­ç‡ 80% - 90%  
â€¢ æ˜æ˜¾å†…å­˜æ³„æ¼

ğŸ”´ ç´§æ€¥ (Emergency):
â€¢ å†…å­˜ä½¿ç”¨ç‡ > 95%
â€¢ ç¼“å­˜å‘½ä¸­ç‡ < 80%
â€¢ ç³»ç»Ÿå³å°†OOM
```

---

## 10. âš–ï¸ å†…å­˜èµ„æºè°ƒåº¦ç®—æ³•


### 10.1 å†…å­˜è°ƒåº¦ç®—æ³•åŸç†


**ğŸ”¸ å†…å­˜è°ƒåº¦çš„æ ¸å¿ƒç›®æ ‡**
å†…å­˜è°ƒåº¦ç®—æ³•å°±åƒä¸€ä¸ª**æ™ºèƒ½çš„èµ„æºåˆ†é…ç®¡å®¶**ï¼Œå®ƒè¦ç¡®ä¿ï¼šé‡è¦çš„ä»»åŠ¡ä¼˜å…ˆå¾—åˆ°å†…å­˜èµ„æºï¼Œç³»ç»Ÿæ•´ä½“æ€§èƒ½æœ€ä¼˜ï¼Œé¿å…å†…å­˜æµªè´¹å’Œé¥¥é¥¿é—®é¢˜ã€‚

**ğŸ”¸ è°ƒåº¦ç®—æ³•åˆ†ç±»**
```
å†…å­˜è°ƒåº¦ç®—æ³•ç±»å‹ï¼š

ä¼˜å…ˆçº§è°ƒåº¦ (Priority Scheduling):
â”œâ”€â”€ é«˜ä¼˜å…ˆçº§ï¼šOLTPäº‹åŠ¡æŸ¥è¯¢
â”œâ”€â”€ ä¸­ä¼˜å…ˆçº§ï¼šæ‰¹é‡æ•°æ®å¤„ç†  
â””â”€â”€ ä½ä¼˜å…ˆçº§ï¼šåå°ç»´æŠ¤ä»»åŠ¡

å…¬å¹³è°ƒåº¦ (Fair Scheduling):
â”œâ”€â”€ æ—¶é—´ç‰‡è½®è½¬åˆ†é…å†…å­˜
â”œâ”€â”€ ä¿è¯æ¯ä¸ªä¼šè¯åŸºæœ¬èµ„æº
â””â”€â”€ é˜²æ­¢èµ„æºé¥¥é¥¿é—®é¢˜

è‡ªé€‚åº”è°ƒåº¦ (Adaptive Scheduling):
â”œâ”€â”€ æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´
â”œâ”€â”€ å­¦ä¹ å†å²ä½¿ç”¨æ¨¡å¼
â””â”€â”€ é¢„æµ‹æ€§èµ„æºåˆ†é…
```

### 10.2 åŠ¨æ€å†…å­˜åˆ†é…ç®—æ³•


**ğŸ”¥ æ™ºèƒ½å†…å­˜åˆ†é…å®ç°**
```sql
-- åŸºäºæŸ¥è¯¢ç‰¹å¾çš„åŠ¨æ€å†…å­˜åˆ†é…
DELIMITER //
CREATE PROCEDURE OptimizeSessionMemory(
    IN query_type VARCHAR(20),
    IN estimated_rows INT,
    IN join_tables INT
)
BEGIN
    DECLARE sort_buffer_mb INT DEFAULT 2;
    DECLARE join_buffer_mb INT DEFAULT 1;
    DECLARE tmp_table_mb INT DEFAULT 32;
    
    -- æ ¹æ®æŸ¥è¯¢ç±»å‹è°ƒæ•´å†…å­˜åˆ†é…
    CASE query_type
        WHEN 'OLTP' THEN
            SET sort_buffer_mb = 1;
            SET join_buffer_mb = 1;
            SET tmp_table_mb = 16;
        WHEN 'OLAP' THEN
            SET sort_buffer_mb = LEAST(16, GREATEST(4, estimated_rows / 100000));
            SET join_buffer_mb = LEAST(8, join_tables * 2);
            SET tmp_table_mb = LEAST(512, estimated_rows / 1000);
        WHEN 'BATCH' THEN
            SET sort_buffer_mb = 32;
            SET join_buffer_mb = 16;
            SET tmp_table_mb = 1024;
    END CASE;
    
    -- åº”ç”¨å†…å­˜è®¾ç½®
    SET SESSION sort_buffer_size = sort_buffer_mb * 1024 * 1024;
    SET SESSION join_buffer_size = join_buffer_mb * 1024 * 1024;
    SET SESSION tmp_table_size = tmp_table_mb * 1024 * 1024;
    
    SELECT 
        CONCAT('Optimized for ', query_type, ' workload') AS message,
        sort_buffer_mb AS sort_buffer_mb,
        join_buffer_mb AS join_buffer_mb,
        tmp_table_mb AS tmp_table_mb;
END //
DELIMITER ;

-- ä½¿ç”¨ç¤ºä¾‹
CALL OptimizeSessionMemory('OLAP', 1000000, 3);
```

### 10.3 è´Ÿè½½å‡è¡¡è°ƒåº¦


**ğŸ”¸ å…¨å±€å†…å­˜è´Ÿè½½å‡è¡¡**
```sql
-- å†…å­˜ä½¿ç”¨è´Ÿè½½å‡è¡¡ç›‘æ§
WITH session_memory_usage AS (
    SELECT 
        t.PROCESSLIST_ID,
        t.PROCESSLIST_USER,
        t.PROCESSLIST_COMMAND,
        ROUND(SUM(m.SUM_NUMBER_OF_BYTES_ALLOC - m.SUM_NUMBER_OF_BYTES_FREE) / 1024 / 1024, 2) AS memory_mb
    FROM performance_schema.threads t
    JOIN performance_schema.memory_summary_by_thread_by_event_name m ON t.THREAD_ID = m.THREAD_ID
    WHERE t.PROCESSLIST_ID IS NOT NULL
    GROUP BY t.THREAD_ID
),
memory_distribution AS (
    SELECT 
        COUNT(*) AS total_sessions,
        AVG(memory_mb) AS avg_memory_per_session,
        STDDEV(memory_mb) AS memory_stddev,
        MAX(memory_mb) AS max_session_memory,
        SUM(memory_mb) AS total_memory_used
    FROM session_memory_usage
)
SELECT 
    total_sessions,
    ROUND(avg_memory_per_session, 2) AS avg_memory_mb,
    ROUND(memory_stddev, 2) AS memory_variance,
    max_session_memory AS max_session_mb,
    ROUND(total_memory_used, 2) AS total_used_mb,
    -- è´Ÿè½½å‡è¡¡æŒ‡æ ‡
    CASE 
        WHEN memory_stddev / avg_memory_per_session < 0.5 THEN 'Well Balanced'
        WHEN memory_stddev / avg_memory_per_session < 1.0 THEN 'Moderately Balanced'
        ELSE 'Poorly Balanced'
    END AS balance_status
FROM memory_distribution;
```

### 10.4 é¢„æµ‹æ€§å†…å­˜ç®¡ç†


**ğŸ”¸ åŸºäºå†å²æ¨¡å¼çš„å†…å­˜é¢„åˆ†é…**
```sql
-- å†å²å†…å­˜ä½¿ç”¨æ¨¡å¼åˆ†æ
CREATE VIEW memory_usage_patterns AS
SELECT 
    HOUR(NOW()) AS current_hour,
    DAYOFWEEK(NOW()) AS current_weekday,
    -- å†å²åŒæ—¶æ®µå¹³å‡å†…å­˜ä½¿ç”¨
    (SELECT AVG(memory_used) 
     FROM (
         SELECT 
             SUM(SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) AS memory_used
         FROM performance_schema.memory_summary_global_by_event_name_history  -- å‡è®¾çš„å†å²è¡¨
         WHERE HOUR(sample_time) = HOUR(NOW())
         AND DAYOFWEEK(sample_time) = DAYOFWEEK(NOW())
         GROUP BY DATE(sample_time), HOUR(sample_time)
     ) hist
    ) AS predicted_memory_gb,
    -- å½“å‰å†…å­˜ä½¿ç”¨
    ROUND(
        (SELECT SUM(SUM_NUMBER_OF_BYTES_ALLOC - SUM_NUMBER_OF_BYTES_FREE) 
         FROM performance_schema.memory_summary_global_by_event_name) / 1024 / 1024 / 1024, 2
    ) AS current_memory_gb;

-- æŸ¥çœ‹é¢„æµ‹ç»“æœ
SELECT 
    current_hour,
    current_weekday,
    ROUND(predicted_memory_gb, 2) AS predicted_gb,
    current_memory_gb,
    CASE 
        WHEN current_memory_gb > predicted_memory_gb * 1.2 THEN 'Higher than expected'
        WHEN current_memory_gb < predicted_memory_gb * 0.8 THEN 'Lower than expected'
        ELSE 'Within expected range'
    END AS usage_status
FROM memory_usage_patterns;
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ä¼˜åŒ–å™¨å†…å­˜æœ¬è´¨ï¼šä¸ºæŸ¥è¯¢ä¼˜åŒ–è¿‡ç¨‹æä¾›é«˜æ•ˆçš„å†…å­˜ç®¡ç†æœåŠ¡
ğŸ”¸ å†…å­˜æ± æ¶æ„ï¼šå…¨å±€å†…å­˜æ± ã€ä¼šè¯å†…å­˜æ± ã€ä¼˜åŒ–å™¨ä¸“ç”¨å†…å­˜æ± åˆ†å±‚ç®¡ç†
ğŸ”¸ æ‰§è¡Œè®¡åˆ’ç¼“å­˜ï¼šé¿å…é‡å¤ä¼˜åŒ–ï¼Œæé«˜æŸ¥è¯¢å“åº”é€Ÿåº¦
ğŸ”¸ ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜ï¼šä¸ºæˆæœ¬ä¼°ç®—æä¾›å‡†ç¡®çš„æ•°æ®åŸºç¡€
ğŸ”¸ ä¼šè¯å†…å­˜ç®¡ç†ï¼šæ¯ä¸ªè¿æ¥çš„ä¸“å±å†…å­˜ç©ºé—´å’Œèµ„æºæ§åˆ¶
ğŸ”¸ å†…å­˜æ³„æ¼é˜²æŠ¤ï¼šæ£€æµ‹å’Œé¢„é˜²å†…å­˜æ— æ³•é‡Šæ”¾çš„é—®é¢˜
ğŸ”¸ åŠ¨æ€è°ƒåº¦ç®—æ³•ï¼šæ ¹æ®è´Ÿè½½ç‰¹å¾æ™ºèƒ½åˆ†é…å†…å­˜èµ„æº
```

### 11.2 å…³é”®æŠ€æœ¯è¦ç‚¹


**ğŸ”¹ å†…å­˜ä½¿ç”¨ä¼˜åŒ–ç­–ç•¥**
```
å››å±‚ä¼˜åŒ–ç­–ç•¥ï¼š

åº”ç”¨å±‚ä¼˜åŒ–ï¼š
â€¢ ä¼˜åŒ–SQLæŸ¥è¯¢ï¼Œå‡å°‘å†…å­˜éœ€æ±‚
â€¢ åˆç†ä½¿ç”¨ä¸´æ—¶è¡¨å’Œæ’åº
â€¢ æ§åˆ¶ç»“æœé›†å¤§å°

ä¼šè¯å±‚ä¼˜åŒ–ï¼š  
â€¢ æ ¹æ®æŸ¥è¯¢ç‰¹å¾è°ƒæ•´ç¼“å†²åŒºå¤§å°
â€¢ åŠæ—¶å…³é—­ä¸éœ€è¦çš„è¿æ¥
â€¢ åˆç†è®¾ç½®ä¼šè¯è¶…æ—¶

ç³»ç»Ÿå±‚ä¼˜åŒ–ï¼š
â€¢ è°ƒæ•´å…¨å±€å†…å­˜æ± é…ç½®
â€¢ ä¼˜åŒ–ç¼“å­˜å‘½ä¸­ç‡
â€¢ å®æ–½å†…å­˜ä½¿ç”¨ç›‘æ§

ç®—æ³•å±‚ä¼˜åŒ–ï¼š
â€¢ é‡‡ç”¨æ™ºèƒ½å†…å­˜è°ƒåº¦ç®—æ³•
â€¢ å®ç°é¢„æµ‹æ€§å†…å­˜åˆ†é…
â€¢ å»ºç«‹è‡ªé€‚åº”è°ƒæ•´æœºåˆ¶
```

**ğŸ”¹ ç›‘æ§å’Œé¢„è­¦ä½“ç³»**
```
ç›‘æ§æŒ‡æ ‡ä½“ç³»ï¼š

åŸºç¡€ç›‘æ§æŒ‡æ ‡ï¼š
â€¢ æ€»å†…å­˜ä½¿ç”¨é‡å’Œå¢é•¿è¶‹åŠ¿
â€¢ å„å†…å­˜æ± çš„ä½¿ç”¨ç‡
â€¢ ç¼“å­˜å‘½ä¸­ç‡ç»Ÿè®¡

æ€§èƒ½ç›‘æ§æŒ‡æ ‡ï¼š
â€¢ å†…å­˜åˆ†é…å’Œé‡Šæ”¾é¢‘ç‡  
â€¢ å†…å­˜ç¢ç‰‡åŒ–ç¨‹åº¦
â€¢ åƒåœ¾å›æ”¶æ•ˆç‡

é¢„è­¦ç›‘æ§æŒ‡æ ‡ï¼š
â€¢ å†…å­˜æ³„æ¼æ£€æµ‹
â€¢ å¼‚å¸¸å†…å­˜å¢é•¿  
â€¢ ç³»ç»Ÿå†…å­˜å‹åŠ›
```

### 11.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ ä¼˜åŒ–å®æ–½è·¯å¾„**
```
æ¸è¿›å¼ä¼˜åŒ–æ–¹æ³•ï¼š

ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç›‘æ§
âœ… å»ºç«‹å†…å­˜ä½¿ç”¨ç›‘æ§ä½“ç³»
âœ… è¯†åˆ«å†…å­˜ä½¿ç”¨çƒ­ç‚¹
âœ… è®¾ç½®åŸºæœ¬é¢„è­¦é˜ˆå€¼

ç¬¬äºŒé˜¶æ®µï¼šå‚æ•°è°ƒä¼˜
âœ… æ ¹æ®è´Ÿè½½ç‰¹å¾è°ƒæ•´å†…å­˜å‚æ•°  
âœ… ä¼˜åŒ–ç¼“å­˜é…ç½®
âœ… å®æ–½ä¼šè¯å†…å­˜ç®¡ç†

ç¬¬ä¸‰é˜¶æ®µï¼šæ™ºèƒ½ä¼˜åŒ–
âœ… éƒ¨ç½²åŠ¨æ€å†…å­˜è°ƒåº¦
âœ… å®ç°é¢„æµ‹æ€§åˆ†é…
âœ… å»ºç«‹è‡ªé€‚åº”æœºåˆ¶

ç¬¬å››é˜¶æ®µï¼šæŒç»­æ”¹è¿›  
âœ… åŸºäºç›‘æ§æ•°æ®æŒç»­è°ƒä¼˜
âœ… åº”ç”¨æœºå™¨å­¦ä¹ ä¼˜åŒ–ç®—æ³•
âœ… æ„å»ºå®Œæ•´çš„å†…å­˜æ²»ç†ä½“ç³»
```

**ğŸ”¹ ä¸åŒåœºæ™¯çš„ä¼˜åŒ–é‡ç‚¹**
```
OLTPç³»ç»Ÿï¼š
â€¢ é‡ç‚¹ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’ç¼“å­˜å‘½ä¸­ç‡
â€¢ æ§åˆ¶ä¼šè¯å†…å­˜ä½¿ç”¨ä¸Šé™
â€¢ å¿«é€Ÿå†…å­˜åˆ†é…å’Œå›æ”¶

OLAPç³»ç»Ÿï¼š  
â€¢ é‡ç‚¹ä¼˜åŒ–å¤§æŸ¥è¯¢çš„å†…å­˜åˆ†é…
â€¢ æä¾›å……è¶³çš„æ’åºå’Œä¸´æ—¶è¡¨å†…å­˜
â€¢ æ™ºèƒ½çš„å†…å­˜è°ƒåº¦ç­–ç•¥

æ··åˆè´Ÿè½½ï¼š
â€¢ å®æ–½åˆ†çº§å†…å­˜ç®¡ç†
â€¢ åŠ¨æ€èµ„æºåˆ†é…æœºåˆ¶  
â€¢ è´Ÿè½½æ„ŸçŸ¥çš„ä¼˜åŒ–ç­–ç•¥
```

### 11.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ è¿ç»´æœ€ä½³å®è·µ**
- **å®šæœŸç›‘æ§**ï¼šå»ºç«‹è‡ªåŠ¨åŒ–å†…å­˜ç›‘æ§å’ŒæŠ¥è­¦æœºåˆ¶
- **å‚æ•°è°ƒä¼˜**ï¼šæ ¹æ®å®é™…è´Ÿè½½ç‰¹å¾è°ƒæ•´å†…å­˜å‚æ•°
- **å®¹é‡è§„åˆ’**ï¼šåŸºäºå¢é•¿è¶‹åŠ¿è¿›è¡Œå†…å­˜å®¹é‡è§„åˆ’
- **æ•…éšœé¢„é˜²**ï¼šä¸»åŠ¨æ£€æµ‹å’Œé¢„é˜²å†…å­˜ç›¸å…³é—®é¢˜

**âš ï¸ å¸¸è§é—®é¢˜é¿å…**
- **è¿‡åº¦åˆ†é…**ï¼šé¿å…åˆ†é…è¿‡å¤šå†…å­˜å¯¼è‡´èµ„æºæµªè´¹
- **å†…å­˜ç¢ç‰‡**ï¼šå®šæœŸæ¸…ç†å’Œæ•´ç†å†…å­˜ç¢ç‰‡
- **ç›‘æ§ç›²åŒº**ï¼šç¡®ä¿ç›‘æ§è¦†ç›–æ‰€æœ‰é‡è¦å†…å­˜ç»„ä»¶  
- **å‚æ•°å›ºåŒ–**ï¼šé¿å…å†…å­˜å‚æ•°é•¿æœŸä¸è°ƒæ•´

**ğŸ”¹ æ€§èƒ½è°ƒä¼˜æŒ‡å¯¼åŸåˆ™**
```
å†…å­˜ä¼˜åŒ–é»„é‡‘æ³•åˆ™ï¼š

80/20åŸåˆ™ï¼š
â€¢ 80%çš„å†…å­˜é—®é¢˜æ¥è‡ª20%çš„æŸ¥è¯¢
â€¢ é‡ç‚¹ä¼˜åŒ–é«˜é¢‘æŸ¥è¯¢çš„å†…å­˜ä½¿ç”¨

æ¸è¿›ä¼˜åŒ–ï¼š
â€¢ å…ˆè§£å†³æ˜æ˜¾çš„å†…å­˜æµªè´¹
â€¢ å†è¿›è¡Œç»†ç²’åº¦çš„å‚æ•°è°ƒä¼˜
â€¢ æœ€åå®æ–½æ™ºèƒ½åŒ–ç®¡ç†

ç›‘æ§é©±åŠ¨ï¼š
â€¢ æ‰€æœ‰ä¼˜åŒ–å†³ç­–åŸºäºç›‘æ§æ•°æ®
â€¢ å»ºç«‹ä¼˜åŒ–æ•ˆæœè¯„ä¼°æœºåˆ¶
â€¢ æŒç»­æ”¹è¿›å’Œè°ƒæ•´ç­–ç•¥
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- ä¼˜åŒ–å™¨å†…å­˜ç®¡ç†æ˜¯æŸ¥è¯¢æ€§èƒ½çš„å…³é”®åŸºç¡€è®¾æ–½
- åˆ†å±‚æ¶æ„å’Œæ™ºèƒ½è°ƒåº¦æ˜¯ç°ä»£å†…å­˜ç®¡ç†çš„æ ¸å¿ƒ
- ç›‘æ§é¢„è­¦ä½“ç³»æ˜¯ä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œçš„é‡è¦æ‰‹æ®µ  
- æŒç»­ä¼˜åŒ–å’Œè‡ªé€‚åº”è°ƒæ•´æ˜¯å†…å­˜ç®¡ç†çš„å‘å±•æ–¹å‘