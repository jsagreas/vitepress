---
title: 7ã€Maxwellè¾“å‡ºé€‚é…å™¨
---
## ğŸ“š ç›®å½•

1. [Maxwellè¾“å‡ºé€‚é…å™¨æ¦‚è¿°](#1-Maxwellè¾“å‡ºé€‚é…å™¨æ¦‚è¿°)
2. [Kafkaè¾“å‡ºé…ç½®è¯¦è§£](#2-Kafkaè¾“å‡ºé…ç½®è¯¦è§£)
3. [RabbitMQé›†æˆå®ç°](#3-RabbitMQé›†æˆå®ç°)
4. [Rediså‘å¸ƒè®¢é˜…æ¨¡å¼](#4-Rediså‘å¸ƒè®¢é˜…æ¨¡å¼)
5. [Kinesisé€‚é…å™¨é…ç½®](#5-Kinesisé€‚é…å™¨é…ç½®)
6. [è‡ªå®šä¹‰è¾“å‡ºå™¨å¼€å‘](#6-è‡ªå®šä¹‰è¾“å‡ºå™¨å¼€å‘)
7. [æ¶ˆæ¯æ ¼å¼å®šåˆ¶](#7-æ¶ˆæ¯æ ¼å¼å®šåˆ¶)
8. [è¾“å‡ºè¿‡æ»¤è§„åˆ™](#8-è¾“å‡ºè¿‡æ»¤è§„åˆ™)
9. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#9-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Maxwellè¾“å‡ºé€‚é…å™¨æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Maxwellè¾“å‡ºé€‚é…å™¨


**å®šä¹‰**ï¼šMaxwellè¾“å‡ºé€‚é…å™¨æ˜¯Maxwellæ•°æ®åŒæ­¥ä¸­é—´ä»¶ä¸­è´Ÿè´£å°†æ•è·åˆ°çš„MySQLå˜æ›´æ•°æ®å‘é€åˆ°ä¸åŒç›®æ ‡ç³»ç»Ÿçš„ç»„ä»¶ã€‚

```
Maxwellæ•°æ®æµï¼š
MySQL binlog â†’ Maxwell â†’ è¾“å‡ºé€‚é…å™¨ â†’ ç›®æ ‡ç³»ç»Ÿ
                          â†“
                    æ ¼å¼åŒ–ã€è¿‡æ»¤ã€è·¯ç”±
```

**ğŸ”¸ æ ¸å¿ƒä½œç”¨**
- **æ•°æ®è½¬æ¢**ï¼šå°†binlogäº‹ä»¶è½¬æ¢ä¸ºç›®æ ‡ç³»ç»Ÿæ”¯æŒçš„æ ¼å¼
- **æ¶ˆæ¯è·¯ç”±**ï¼šæ ¹æ®è§„åˆ™å°†ä¸åŒçš„æ•°æ®å˜æ›´å‘é€åˆ°å¯¹åº”çš„ç›®æ ‡
- **æ ¼å¼å®šåˆ¶**ï¼šæ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯æ ¼å¼å’Œå­—æ®µæ˜ å°„
- **é”™è¯¯å¤„ç†**ï¼šå¤„ç†å‘é€å¤±è´¥å’Œé‡è¯•æœºåˆ¶

### 1.2 æ”¯æŒçš„è¾“å‡ºç›®æ ‡


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Maxwell   â”‚â”€â”€â”€â”€â”‚   è¾“å‡ºé€‚é…å™¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Kafka  â”‚      â”‚  RabbitMQ   â”‚    â”‚    Redis    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Kinesis â”‚      â”‚    File     â”‚    â”‚   Custom    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **æç¤º**ï¼šæ¯ç§è¾“å‡ºé€‚é…å™¨éƒ½æœ‰å…¶ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼Œé€‰æ‹©æ—¶éœ€è¦è€ƒè™‘æ•°æ®é‡ã€å®æ—¶æ€§è¦æ±‚å’Œåç»­å¤„ç†éœ€æ±‚ã€‚

### 1.3 é€‚é…å™¨é€‰æ‹©æŒ‡å—


| è¾“å‡ºç›®æ ‡ | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŠ¿** | **æ³¨æ„äº‹é¡¹** |
|---------|-------------|---------|-------------|
| ğŸš€ **Kafka** | `å¤§æ•°æ®é‡ã€é«˜åå` | `é«˜æ€§èƒ½ã€æŒä¹…åŒ–ã€åˆ†åŒº` | `éœ€è¦é›†ç¾¤ç®¡ç†` |
| ğŸ° **RabbitMQ** | `å¤æ‚è·¯ç”±ã€å¯é æŠ•é€’` | `çµæ´»è·¯ç”±ã€äº‹åŠ¡æ”¯æŒ` | `ååé‡ç›¸å¯¹è¾ƒä½` |
| ğŸ“¦ **Redis** | `å®æ—¶é€šçŸ¥ã€ç¼“å­˜æ›´æ–°` | `æä½å»¶è¿Ÿã€å†…å­˜å­˜å‚¨` | `æ•°æ®å¯èƒ½ä¸¢å¤±` |
| ğŸŒŠ **Kinesis** | `AWSç”Ÿæ€ã€æµå¤„ç†` | `æ‰˜ç®¡æœåŠ¡ã€å¼¹æ€§æ‰©å±•` | `ä»…é™AWSç¯å¢ƒ` |

---

## 2. ğŸš€ Kafkaè¾“å‡ºé…ç½®è¯¦è§£


### 2.1 åŸºç¡€Kafkaé…ç½®


**æ ¸å¿ƒé…ç½®æ–‡ä»¶**ï¼š`config.properties`

```properties
# KafkaåŸºç¡€é…ç½®
producer=kafka
kafka.bootstrap.servers=localhost:9092
kafka.topic=maxwell

# å®‰å…¨é…ç½®
kafka.security.protocol=PLAINTEXT
kafka.sasl.mechanism=PLAIN

# æ€§èƒ½è°ƒä¼˜
kafka.compression.type=gzip
kafka.batch.size=16384
kafka.linger.ms=5
```

**ğŸ”¸ é…ç½®å‚æ•°è¯¦è§£**
- **bootstrap.servers**ï¼šKafkaé›†ç¾¤åœ°å€åˆ—è¡¨
- **topic**ï¼šé»˜è®¤å‘é€ä¸»é¢˜åç§°
- **compression.type**ï¼šæ¶ˆæ¯å‹ç¼©ç®—æ³•ï¼ˆgzipã€snappyã€lz4ï¼‰
- **batch.size**ï¼šæ‰¹é‡å‘é€å¤§å°ï¼Œå½±å“ååé‡
- **linger.ms**ï¼šæ¶ˆæ¯ç­‰å¾…æ—¶é—´ï¼Œå¹³è¡¡å»¶è¿Ÿå’Œååé‡

### 2.2 é«˜çº§Kafkaé…ç½®


```properties
# åˆ†åŒºç­–ç•¥
kafka.partition.hash=database
kafka.partition.columns=id,user_id

# ä¸»é¢˜è·¯ç”±
kafka.topic.prefix=mysql_
kafka.topic.suffix=_changes
kafka.topic.format=%{database}_%{table}

# é‡è¯•å’Œå®¹é”™
kafka.retries=3
kafka.retry.backoff.ms=1000
kafka.request.timeout.ms=30000
```

**ğŸ¯ åˆ†åŒºç­–ç•¥é…ç½®**
```
æŒ‰æ•°æ®åº“åˆ†åŒºï¼š
database1 â†’ partition 0
database2 â†’ partition 1

æŒ‰è¡¨åˆ†åŒºï¼š
usersè¡¨ â†’ partition 0  
ordersè¡¨ â†’ partition 1

æŒ‰å­—æ®µå“ˆå¸Œåˆ†åŒºï¼š
user_id % partition_count
```

### 2.3 Kafkaæ¶ˆæ¯æ ¼å¼ç¤ºä¾‹


```json
{
  "database": "ecommerce",
  "table": "users",
  "type": "insert",
  "ts": 1673895234,
  "xid": 12345,
  "data": {
    "id": 1001,
    "username": "john_doe",
    "email": "john@example.com",
    "created_at": "2025-01-16 10:30:00"
  },
  "old": null
}
```

> ğŸ“ **è¯´æ˜**ï¼štypeå­—æ®µè¡¨ç¤ºæ“ä½œç±»å‹ï¼ˆinsertã€updateã€deleteï¼‰ï¼ŒdataåŒ…å«å˜æ›´åçš„æ•°æ®ï¼ŒoldåŒ…å«å˜æ›´å‰çš„æ•°æ®ï¼ˆä»…updateæ—¶å­˜åœ¨ï¼‰ã€‚

---

## 3. ğŸ° RabbitMQé›†æˆå®ç°


### 3.1 RabbitMQåŸºç¡€é…ç½®


```properties
# RabbitMQè¿æ¥é…ç½®
producer=rabbitmq
rabbitmq.host=localhost
rabbitmq.port=5672
rabbitmq.user=maxwell
rabbitmq.pass=maxwell123
rabbitmq.virtual_host=/

# äº¤æ¢æœºå’Œé˜Ÿåˆ—é…ç½®
rabbitmq.exchange=maxwell_exchange
rabbitmq.exchange_type=topic
rabbitmq.routing_key_template=%{database}.%{table}.%{type}
rabbitmq.queue=maxwell_queue
rabbitmq.declare_exchange=true
rabbitmq.declare_queue=true
```

### 3.2 RabbitMQè·¯ç”±è§„åˆ™


**ğŸ”¸ Topicäº¤æ¢æœºè·¯ç”±ç¤ºä¾‹**
```
è·¯ç”±é”®æ¨¡å¼ï¼š{database}.{table}.{operation}

å®é™…è·¯ç”±é”®ï¼š
ecommerce.users.insert
ecommerce.orders.update  
inventory.products.delete

æ¶ˆè´¹è€…ç»‘å®šï¼š
é˜Ÿåˆ—Aç»‘å®šï¼šecommerce.users.*     # åªæ¥æ”¶ç”¨æˆ·è¡¨å˜æ›´
é˜Ÿåˆ—Bç»‘å®šï¼š*.orders.*           # åªæ¥æ”¶è®¢å•è¡¨å˜æ›´  
é˜Ÿåˆ—Cç»‘å®šï¼šecommerce.*.*        # æ¥æ”¶ecommerceåº“æ‰€æœ‰å˜æ›´
```

### 3.3 RabbitMQé«˜çº§ç‰¹æ€§


```properties
# æ¶ˆæ¯æŒä¹…åŒ–
rabbitmq.durable=true
rabbitmq.persistent=true

# ç¡®è®¤æœºåˆ¶
rabbitmq.mandatory=true
rabbitmq.publisher_confirms=true

# è¿æ¥æ± é…ç½®
rabbitmq.connection_timeout=60000
rabbitmq.heartbeat=60
```

**ğŸ”§ é˜Ÿåˆ—å£°æ˜ç¤ºä¾‹**
```json
{
  "queue": "maxwell_users",
  "durable": true,
  "exclusive": false,
  "auto_delete": false,
  "arguments": {
    "x-message-ttl": 3600000,
    "x-max-length": 10000
  }
}
```

---

## 4. ğŸ“¦ Rediså‘å¸ƒè®¢é˜…æ¨¡å¼


### 4.1 Redisé…ç½®åŸºç¡€


```properties
# RedisåŸºç¡€é…ç½®
producer=redis
redis.host=localhost
redis.port=6379
redis.auth=redis_password
redis.database=0

# å‘å¸ƒè®¢é˜…é…ç½®
redis.pub_channel=maxwell_changes
redis.key_format=maxwell:%{database}:%{table}
redis.type=pubsub
```

### 4.2 Rediså‘å¸ƒæ¨¡å¼å¯¹æ¯”


**ğŸ”¸ å‘å¸ƒè®¢é˜…æ¨¡å¼ vs åˆ—è¡¨æ¨¡å¼**

```
å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼š
ä¼˜ç‚¹ï¼šå®æ—¶æ€§æé«˜ã€æ”¯æŒå¤šè®¢é˜…è€…
ç¼ºç‚¹ï¼šæ¶ˆæ¯ä¸æŒä¹…åŒ–ã€è®¢é˜…è€…ç¦»çº¿ä¼šä¸¢å¤±

åˆ—è¡¨æ¨¡å¼ï¼š
ä¼˜ç‚¹ï¼šæ¶ˆæ¯æŒä¹…åŒ–ã€æ”¯æŒæ‰¹é‡å¤„ç†
ç¼ºç‚¹ï¼šéœ€è¦è½®è¯¢ã€å•ä¸€æ¶ˆè´¹è€…
```

### 4.3 Redisæ¶ˆæ¯é€šé“è®¾è®¡


```properties
# åˆ†é€šé“é…ç½®
redis.channel.database_pattern=db:%{database}
redis.channel.table_pattern=table:%{database}:%{table}
redis.channel.type_pattern=type:%{type}

# å®é™…é€šé“åç§°ï¼š
# db:ecommerce
# table:ecommerce:users  
# type:insert
```

**ğŸ’¡ è®¢é˜…è€…ç¤ºä¾‹ä»£ç **
```python
import redis

r = redis.Redis(host='localhost', port=6379, db=0)
pubsub = r.pubsub()

# è®¢é˜…ç‰¹å®šæ•°æ®åº“çš„å˜æ›´
pubsub.subscribe('db:ecommerce')

for message in pubsub.listen():
    if message['type'] == 'message':
        data = json.loads(message['data'])
        print(f"æ”¶åˆ°å˜æ›´: {data['table']} - {data['type']}")
```

---

## 5. ğŸŒŠ Kinesisé€‚é…å™¨é…ç½®


### 5.1 KinesisåŸºç¡€é…ç½®


```properties
# KinesisåŸºç¡€é…ç½®
producer=kinesis
kinesis.stream=maxwell-stream
kinesis.region=us-west-2

# AWSå‡­è¯é…ç½®
kinesis.access_key_id=AKIAIOSFODNN7EXAMPLE
kinesis.secret_key=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# åˆ†åŒºé…ç½®
kinesis.partition_key=%{database}_%{table}
kinesis.partition_key_fallback=maxwell
```

### 5.2 Kinesisæ€§èƒ½è°ƒä¼˜


```properties
# æ‰¹å¤„ç†é…ç½®
kinesis.buffer_record_max_count=500
kinesis.buffer_max_time=2000

# é‡è¯•é…ç½®  
kinesis.record_max_buffer_time=10000
kinesis.max_connections=50
kinesis.request_timeout=60000
```

**ğŸ¯ åˆ†åŒºé”®ç­–ç•¥**
```
å‡åŒ€åˆ†å¸ƒç­–ç•¥ï¼š
partition_key = hash(database + table + primary_key) % shard_count

æ—¶é—´çª—å£ç­–ç•¥ï¼š
partition_key = database + "_" + (timestamp / 3600)

ä¸šåŠ¡é€»è¾‘ç­–ç•¥ï¼š
partition_key = business_type + "_" + region_code
```

---

## 6. ğŸ”§ è‡ªå®šä¹‰è¾“å‡ºå™¨å¼€å‘


### 6.1 Produceræ’ä»¶æ¶æ„


**ğŸ—ï¸ æ’ä»¶æ¥å£ç»“æ„**
```
AbstractProducer (æŠ½è±¡åŸºç±»)
    â†“
KafkaProducer, RabbitMQProducer, RedisProducer
    â†“
CustomProducer (è‡ªå®šä¹‰å®ç°)
```

### 6.2 è‡ªå®šä¹‰Producerå¼€å‘


```java
public class CustomProducer extends AbstractProducer {
    
    private String targetUrl;
    private HttpClient httpClient;
    
    @Override
    public void push(RowMap rowMap) throws Exception {
        // 1. æ ¼å¼åŒ–æ¶ˆæ¯
        String jsonMessage = formatMessage(rowMap);
        
        // 2. æ„å»ºHTTPè¯·æ±‚
        HttpPost request = new HttpPost(targetUrl);
        request.setEntity(new StringEntity(jsonMessage, "UTF-8"));
        request.setHeader("Content-Type", "application/json");
        
        // 3. å‘é€è¯·æ±‚
        HttpResponse response = httpClient.execute(request);
        
        // 4. å¤„ç†å“åº”
        if (response.getStatusLine().getStatusCode() != 200) {
            throw new RuntimeException("å‘é€å¤±è´¥: " + response.getStatusLine());
        }
    }
    
    private String formatMessage(RowMap rowMap) {
        Map<String, Object> message = new HashMap<>();
        message.put("database", rowMap.getDatabase());
        message.put("table", rowMap.getTable());
        message.put("type", rowMap.getType());
        message.put("data", rowMap.getData());
        
        return gson.toJson(message);
    }
}
```

### 6.3 æ’ä»¶é…ç½®æ³¨å†Œ


```properties
# è‡ªå®šä¹‰Produceré…ç½®
producer=custom
custom.class=com.example.CustomProducer
custom.target_url=http://api.example.com/webhook
custom.timeout=30000
custom.retry_count=3
```

---

## 7. ğŸ¨ æ¶ˆæ¯æ ¼å¼å®šåˆ¶


### 7.1 æ ¼å¼åŒ–å™¨é…ç½®


```properties
# æ¶ˆæ¯æ ¼å¼å®šåˆ¶
output_format=json
json_formatter=com.zendesk.maxwell.formatter.CustomJsonFormatter

# å­—æ®µåŒ…å«/æ’é™¤
exclude_columns=password,secret_key
include_columns=id,name,email,updated_at

# å­—æ®µé‡å‘½å
column_renames=user_id:userId,created_at:createdTime
```

### 7.2 è‡ªå®šä¹‰æ ¼å¼åŒ–å™¨


```java
public class CustomJsonFormatter implements MessageFormatter {
    
    @Override
    public String format(RowMap rowMap) {
        Map<String, Object> output = new HashMap<>();
        
        // åŸºç¡€ä¿¡æ¯
        output.put("source", "mysql");
        output.put("timestamp", System.currentTimeMillis());
        output.put("schema", rowMap.getDatabase());
        output.put("table", rowMap.getTable());
        output.put("operation", mapOperationType(rowMap.getType()));
        
        // æ•°æ®å†…å®¹
        if (rowMap.getData() != null) {
            output.put("after", formatData(rowMap.getData()));
        }
        
        if (rowMap.getOldData() != null) {
            output.put("before", formatData(rowMap.getOldData()));
        }
        
        return gson.toJson(output);
    }
    
    private String mapOperationType(String type) {
        switch (type) {
            case "insert": return "CREATE";
            case "update": return "UPDATE"; 
            case "delete": return "DELETE";
            default: return type.toUpperCase();
        }
    }
}
```

### 7.3 æ¶ˆæ¯æ ¼å¼ç¤ºä¾‹å¯¹æ¯”


**ğŸ”¸ æ ‡å‡†æ ¼å¼ vs è‡ªå®šä¹‰æ ¼å¼**

```json
// æ ‡å‡†Maxwellæ ¼å¼
{
  "database": "shop",
  "table": "users", 
  "type": "insert",
  "ts": 1673895234,
  "data": {"id": 1, "name": "John"}
}

// è‡ªå®šä¹‰æ ¼å¼
{
  "source": "mysql",
  "timestamp": 1673895234000,
  "schema": "shop",
  "table": "users",
  "operation": "CREATE", 
  "after": {"id": 1, "name": "John"},
  "metadata": {
    "version": "1.0",
    "format": "custom"
  }
}
```

---

## 8. ğŸ¯ è¾“å‡ºè¿‡æ»¤è§„åˆ™


### 8.1 åŸºç¡€è¿‡æ»¤é…ç½®


```properties
# æ•°æ®åº“è¿‡æ»¤
filter_database=ecommerce,inventory
exclude_database=test,temp

# è¡¨è¿‡æ»¤
filter_table=users,orders,products
exclude_table=logs,cache

# æ“ä½œç±»å‹è¿‡æ»¤
filter_type=insert,update
exclude_type=delete
```

### 8.2 é«˜çº§è¿‡æ»¤è§„åˆ™


```properties
# å­—æ®µå€¼è¿‡æ»¤
filter_column_value=status:active,type:premium
exclude_column_value=deleted:true,hidden:1

# æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤
filter_table_regex=user_.*,order_.*
exclude_table_regex=.*_temp,.*_backup

# è‡ªå®šä¹‰è¿‡æ»¤å™¨
filter_class=com.example.CustomRowFilter
```

**ğŸ”§ è‡ªå®šä¹‰è¿‡æ»¤å™¨å®ç°**
```java
public class CustomRowFilter implements RowFilter {
    
    @Override
    public boolean filter(RowMap rowMap) {
        // åªå¤„ç†å·¥ä½œæ—¶é—´çš„æ•°æ®å˜æ›´
        LocalTime now = LocalTime.now();
        if (now.isBefore(LocalTime.of(9, 0)) || 
            now.isAfter(LocalTime.of(18, 0))) {
            return false;
        }
        
        // åªå¤„ç†é‡è¦è¡¨çš„å˜æ›´
        String table = rowMap.getTable();
        return Arrays.asList("users", "orders", "payments")
                    .contains(table);
    }
}
```

### 8.3 è¿‡æ»¤è§„åˆ™ç»„åˆ


```
è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºï¼š
1. æ•°æ®åº“çº§åˆ«è¿‡æ»¤
2. è¡¨çº§åˆ«è¿‡æ»¤  
3. æ“ä½œç±»å‹è¿‡æ»¤
4. å­—æ®µå€¼è¿‡æ»¤
5. è‡ªå®šä¹‰è¿‡æ»¤å™¨

ä»»ä¸€ç¯èŠ‚è¿‡æ»¤å¤±è´¥ï¼Œæ¶ˆæ¯å°†è¢«ä¸¢å¼ƒ
```

---

## 9. âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 9.1 å¹¶å‘è¾“å‡ºé…ç½®


```properties
# è¾“å‡ºçº¿ç¨‹æ± é…ç½®
producer_thread_pool_size=10
producer_queue_size=10000

# æ‰¹å¤„ç†é…ç½®
producer_batch_size=100
producer_batch_timeout=1000

# å¼‚æ­¥å¤„ç†
producer_async=true
producer_async_buffer_size=50000
```

### 9.2 å¤šç›®æ ‡å¹¶å‘è¾“å‡º


```properties
# å¤šProduceré…ç½®
producers=kafka,redis,webhook

# Kafkaé…ç½®
kafka.bootstrap.servers=localhost:9092
kafka.topic=maxwell_kafka

# Redisé…ç½®  
redis.host=localhost
redis.pub_channel=maxwell_redis

# Webhooké…ç½®
webhook.url=http://api.example.com/webhook
```

**ğŸš€ æ€§èƒ½ç›‘æ§æŒ‡æ ‡**
```
è¾“å‡ºæ€§èƒ½æŒ‡æ ‡ï¼š
- æ¶ˆæ¯å‘é€é€Ÿç‡ (messages/second)
- å‘é€å»¶è¿Ÿ (latency)
- é”™è¯¯ç‡ (error_rate)  
- é˜Ÿåˆ—ç§¯å‹ (queue_depth)
- é‡è¯•æ¬¡æ•° (retry_count)
```

### 9.3 é”™è¯¯å¤„ç†æœºåˆ¶


```properties
# é‡è¯•é…ç½®
producer_retry_count=3
producer_retry_delay=1000
producer_retry_backoff_multiplier=2

# æ­»ä¿¡é˜Ÿåˆ—
producer_dead_letter_enabled=true
producer_dead_letter_topic=maxwell_dead_letter

# å¤±è´¥å¤„ç†ç­–ç•¥
producer_failure_strategy=retry_then_skip
```

**âš ï¸ é”™è¯¯å¤„ç†æµç¨‹**
```
æ¶ˆæ¯å‘é€å¤±è´¥ 
    â†“
é‡è¯•æœºåˆ¶ (æŒ‡æ•°é€€é¿)
    â†“
è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°
    â†“
æ ¹æ®ç­–ç•¥å¤„ç†ï¼š
- skip: è·³è¿‡æ¶ˆæ¯
- stop: åœæ­¢Maxwell
- dead_letter: å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è¾“å‡ºé€‚é…å™¨æœ¬è´¨ï¼šMaxwellä¸ç›®æ ‡ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢
ğŸ”¸ æ”¯æŒç›®æ ‡ï¼šKafkaã€RabbitMQã€Redisã€Kinesisã€è‡ªå®šä¹‰
ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½ï¼šæ¶ˆæ¯è·¯ç”±ã€æ ¼å¼è½¬æ¢ã€è¿‡æ»¤è§„åˆ™ã€é”™è¯¯å¤„ç†
ğŸ”¸ é…ç½®è¦ç‚¹ï¼šè¿æ¥å‚æ•°ã€æ€§èƒ½è°ƒä¼˜ã€å®‰å…¨è®¤è¯
ğŸ”¸ è‡ªå®šä¹‰å¼€å‘ï¼šProduceræ¥å£ã€æ ¼å¼åŒ–å™¨ã€è¿‡æ»¤å™¨
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‚é…å™¨é€‰æ‹©ç­–ç•¥**
```
é«˜ååé‡åœºæ™¯ â†’ Kafka
å¤æ‚è·¯ç”±éœ€æ±‚ â†’ RabbitMQ  
å®æ—¶é€šçŸ¥åœºæ™¯ â†’ Redis
AWSç”Ÿæ€ç¯å¢ƒ â†’ Kinesis
ç‰¹æ®Šéœ€æ±‚ â†’ è‡ªå®šä¹‰å¼€å‘
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–é‡ç‚¹**
```
æ‰¹å¤„ç†ï¼šå‡å°‘ç½‘ç»œå¼€é”€
å¼‚æ­¥å¤„ç†ï¼šæé«˜å¹¶å‘èƒ½åŠ›
è¿æ¥æ± ï¼šå¤ç”¨ç½‘ç»œè¿æ¥
å‹ç¼©ï¼šå‡å°‘æ•°æ®ä¼ è¾“é‡
åˆ†åŒºï¼šæé«˜å¹¶è¡Œå¤„ç†èƒ½åŠ›
```

**ğŸ”¹ å¯é æ€§ä¿éšœ**
```
é‡è¯•æœºåˆ¶ï¼šå¤„ç†ä¸´æ—¶å¤±è´¥
æ­»ä¿¡é˜Ÿåˆ—ï¼šå¤„ç†æŒç»­å¤±è´¥
ç›‘æ§å‘Šè­¦ï¼šåŠæ—¶å‘ç°é—®é¢˜
å¤‡ä»½ç­–ç•¥ï¼šé¿å…æ•°æ®ä¸¢å¤±
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**âœ… æœ€ä½³å®è·µ**
- æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„è¾“å‡ºç›®æ ‡
- åˆç†é…ç½®æ‰¹å¤„ç†å’Œç¼“å†²å‚æ•°
- å®æ–½å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
- è®¾è®¡åˆç†çš„æ¶ˆæ¯æ ¼å¼å’Œè¿‡æ»¤è§„åˆ™
- å®šæœŸæµ‹è¯•æ•…éšœæ¢å¤æµç¨‹

**âš ï¸ å¸¸è§é™·é˜±**
- å¿½ç•¥ç½‘ç»œå»¶è¿Ÿå¯¹æ€§èƒ½çš„å½±å“
- è¿‡åº¦ä½¿ç”¨åŒæ­¥å‘é€å¯¼è‡´æ€§èƒ½ä¸‹é™
- ç¼ºå°‘é”™è¯¯å¤„ç†å¯¼è‡´æ•°æ®ä¸¢å¤±
- æ¶ˆæ¯æ ¼å¼è®¾è®¡ä¸å½“å½±å“ä¸‹æ¸¸å¤„ç†
- è¿‡æ»¤è§„åˆ™è¿‡äºå¤æ‚å½±å“æ€§èƒ½

**ğŸ¯ åº”ç”¨åœºæ™¯**
- **å®æ—¶æ•°æ®åŒæ­¥**ï¼šå°†MySQLå˜æ›´å®æ—¶åŒæ­¥åˆ°Elasticsearch
- **äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼šé€šè¿‡Kafkaæ„å»ºå¾®æœåŠ¡é—´çš„äº‹ä»¶é€šä¿¡
- **ç¼“å­˜æ›´æ–°**ï¼šé€šè¿‡Rediså‘å¸ƒè®¢é˜…æ›´æ–°åº”ç”¨ç¼“å­˜
- **æ•°æ®ä»“åº“ETL**ï¼šå°†ä¸šåŠ¡æ•°æ®å˜æ›´åŒæ­¥åˆ°æ•°æ®ä»“åº“
- **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰æ•°æ®å˜æ›´ç”¨äºåˆè§„å®¡è®¡

**æ ¸å¿ƒè®°å¿†**ï¼š
- Maxwellè¾“å‡ºé€‚é…å™¨æ˜¯æ•°æ®åŒæ­¥çš„æœ€åä¸€å…¬é‡Œ
- é€‰æ‹©åˆé€‚çš„è¾“å‡ºç›®æ ‡æ˜¯æˆåŠŸçš„å…³é”®
- æ€§èƒ½ä¼˜åŒ–éœ€è¦å¹³è¡¡å»¶è¿Ÿå’Œååé‡
- å¯é æ€§ä¿éšœéœ€è¦å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶