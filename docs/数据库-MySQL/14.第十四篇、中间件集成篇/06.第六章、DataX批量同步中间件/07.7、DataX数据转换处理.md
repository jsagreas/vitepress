---
title: 7ã€DataXæ•°æ®è½¬æ¢å¤„ç†
---
## ğŸ“š ç›®å½•

1. [DataXæ•°æ®è½¬æ¢åŸºç¡€](#1-DataXæ•°æ®è½¬æ¢åŸºç¡€)
2. [Transformæ’ä»¶å¼€å‘](#2-Transformæ’ä»¶å¼€å‘)
3. [æ•°æ®æ¸…æ´—è§„åˆ™](#3-æ•°æ®æ¸…æ´—è§„åˆ™)
4. [å­—æ®µæ ¼å¼è½¬æ¢](#4-å­—æ®µæ ¼å¼è½¬æ¢)
5. [æ•°æ®è´¨é‡æ ¡éªŒ](#5-æ•°æ®è´¨é‡æ ¡éªŒ)
6. [ç©ºå€¼å¤„ç†ç­–ç•¥](#6-ç©ºå€¼å¤„ç†ç­–ç•¥)
7. [æ•°æ®è„±æ•è½¬æ¢](#7-æ•°æ®è„±æ•è½¬æ¢)
8. [è‡ªå®šä¹‰è½¬æ¢å‡½æ•°](#8-è‡ªå®šä¹‰è½¬æ¢å‡½æ•°)
9. [Transformeræ’ä»¶æ¶æ„](#9-Transformeræ’ä»¶æ¶æ„)
10. [å¤æ‚æ•°æ®è½¬æ¢é€»è¾‘](#10-å¤æ‚æ•°æ®è½¬æ¢é€»è¾‘)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ DataXæ•°æ®è½¬æ¢åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯DataXæ•°æ®è½¬æ¢


**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µ**
DataXæ•°æ®è½¬æ¢æ˜¯æŒ‡åœ¨æ•°æ®åŒæ­¥è¿‡ç¨‹ä¸­ï¼Œå¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œå®æ—¶å¤„ç†å’Œè½¬æ¢çš„æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŠŠä»æºå¤´è¯»å–çš„æ•°æ®æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¿›è¡Œ"åŠ å·¥"ï¼Œç„¶åå†™å…¥ç›®æ ‡ç³»ç»Ÿã€‚

```
æ•°æ®æµå‘ç¤ºæ„å›¾ï¼š
æºæ•°æ®åº“ â†’ [è¯»å–] â†’ [è½¬æ¢å¤„ç†] â†’ [å†™å…¥] â†’ ç›®æ ‡æ•°æ®åº“
    â†“           â†“          â†“           â†“
   åŸå§‹æ•°æ®   Readeræ’ä»¶  Transform  Writeræ’ä»¶
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®è½¬æ¢**
- **æ ¼å¼ç»Ÿä¸€**ï¼šä¸åŒç³»ç»Ÿçš„æ•°æ®æ ¼å¼å¯èƒ½ä¸åŒ
- **ä¸šåŠ¡éœ€æ±‚**ï¼šéœ€è¦å¯¹æ•°æ®è¿›è¡Œè®¡ç®—ã€æ‹¼æ¥ç­‰æ“ä½œ
- **æ•°æ®æ¸…æ´—**ï¼šå»é™¤è„æ•°æ®ã€è¡¥å……ç¼ºå¤±å€¼
- **å®‰å…¨è¦æ±‚**ï¼šæ•æ„Ÿæ•°æ®éœ€è¦è„±æ•å¤„ç†

### 1.2 DataXè½¬æ¢æ¶æ„


**ğŸ—ï¸ è½¬æ¢å¤„ç†ä½ç½®**
```
DataXæ‰§è¡Œæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Reader    â”‚â”€â”€â”€â†’â”‚ Transformer â”‚â”€â”€â”€â†’â”‚   Writer    â”‚
â”‚   è¯»å–æ•°æ®   â”‚    â”‚   è½¬æ¢æ•°æ®   â”‚    â”‚   å†™å…¥æ•°æ®   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è½¬æ¢å¤„ç†å‘ç”Ÿåœ¨Readerè¯»å–æ•°æ®ä¹‹åã€Writerå†™å…¥æ•°æ®ä¹‹å‰ï¼Œè¿™æ ·æ—¢ä¿è¯äº†æºæ•°æ®çš„å®Œæ•´æ€§ï¼Œåˆæ»¡è¶³äº†ç›®æ ‡ç³»ç»Ÿçš„æ ¼å¼è¦æ±‚ã€‚

### 1.3 è½¬æ¢ç±»å‹åˆ†ç±»


| è½¬æ¢ç±»å‹ | **è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** |
|---------|---------|-------------|
| ğŸ”¤ **å­—æ®µè½¬æ¢** | `æ”¹å˜å­—æ®µåç§°ã€ç±»å‹` | `æ•°æ®åº“å­—æ®µæ˜ å°„` |
| ğŸ§¹ **æ•°æ®æ¸…æ´—** | `å»é™¤æ— æ•ˆã€é‡å¤æ•°æ®` | `è´¨é‡æ§åˆ¶` |
| ğŸ” **æ•°æ®è„±æ•** | `éšè—æ•æ„Ÿä¿¡æ¯` | `å®‰å…¨åˆè§„` |
| ğŸ§® **è®¡ç®—è½¬æ¢** | `åŸºäºç°æœ‰å­—æ®µè®¡ç®—æ–°å€¼` | `ä¸šåŠ¡é€»è¾‘å¤„ç†` |
| ğŸ“ **æ ¼å¼è½¬æ¢** | `ç»Ÿä¸€æ•°æ®æ ¼å¼` | `ç³»ç»Ÿé›†æˆ` |

---

## 2. ğŸ”§ Transformæ’ä»¶å¼€å‘


### 2.1 Transformæ’ä»¶åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯Transformæ’ä»¶**
Transformæ’ä»¶æ˜¯DataXæ¡†æ¶ä¸­ä¸“é—¨è´Ÿè´£æ•°æ®è½¬æ¢çš„ç»„ä»¶ã€‚å®ƒæ¥æ”¶Readerä¼ æ¥çš„æ•°æ®ï¼Œè¿›è¡Œå¤„ç†åä¼ é€’ç»™Writerã€‚æ¯ä¸ªTransformæ’ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¤„ç†å•å…ƒã€‚

**ğŸ—ï¸ æ’ä»¶å·¥ä½œåŸç†**
```
æ•°æ®å¤„ç†æµç¨‹ï¼š
è¾“å…¥Record â†’ Transformå¤„ç† â†’ è¾“å‡ºRecord

Recordç»“æ„ï¼š
{
  "column1": "å€¼1",
  "column2": "å€¼2", 
  "column3": "å€¼3"
}
```

### 2.2 å¼€å‘Transformæ’ä»¶


**ğŸ“‹ å¼€å‘æ­¥éª¤**

**ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ’ä»¶ç›®å½•ç»“æ„**
```
transformæ’ä»¶ç›®å½•ï¼š
â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ com/alibaba/datax/plugin/transformer/
â”‚       â””â”€â”€ MyTransformer.java
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ plugin.json
â””â”€â”€ pom.xml
```

**ç¬¬äºŒæ­¥ï¼šå®ç°Transformeræ¥å£**
```java
public class MyTransformer extends Transformer {
    
    public MyTransformer() {
        // è®¾ç½®è½¬æ¢å™¨åç§°
        setTransformerName("mytransformer");
    }
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        // è·å–å‚æ•°
        String columnName = (String) paras[0];
        
        // è·å–å­—æ®µå€¼
        Column column = record.getColumn(columnName);
        String originalValue = column.asString();
        
        // æ‰§è¡Œè½¬æ¢é€»è¾‘
        String transformedValue = transform(originalValue);
        
        // è®¾ç½®æ–°å€¼
        column.setRawData(transformedValue);
        
        return record;
    }
    
    private String transform(String value) {
        // å…·ä½“çš„è½¬æ¢é€»è¾‘
        return value.toUpperCase();
    }
}
```

**ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ’ä»¶æè¿°æ–‡ä»¶**
```json
{
    "name": "mytransformer",
    "developer": "ä½ çš„åå­—",
    "description": "è‡ªå®šä¹‰æ•°æ®è½¬æ¢æ’ä»¶",
    "class": "com.alibaba.datax.plugin.transformer.MyTransformer"
}
```

### 2.3 æ’ä»¶é…ç½®ä½¿ç”¨


**ğŸ”§ åœ¨DataXä½œä¸šä¸­ä½¿ç”¨**
```json
{
    "job": {
        "content": [{
            "reader": {
                // Readeré…ç½®
            },
            "transformer": [{
                "name": "mytransformer",
                "parameter": {
                    "columnIndex": 0,
                    "paras": ["column_name"]
                }
            }],
            "writer": {
                // Writeré…ç½®  
            }
        }]
    }
}
```

---

## 3. ğŸ§¹ æ•°æ®æ¸…æ´—è§„åˆ™


### 3.1 æ•°æ®æ¸…æ´—åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ•°æ®æ¸…æ´—**
æ•°æ®æ¸…æ´—æ˜¯æŒ‡è¯†åˆ«å¹¶ä¿®æ­£æ•°æ®ä¸­çš„é”™è¯¯ã€ä¸ä¸€è‡´ã€é‡å¤æˆ–ä¸å®Œæ•´çš„éƒ¨åˆ†ï¼Œç¡®ä¿æ•°æ®è´¨é‡ç¬¦åˆä¸šåŠ¡è¦æ±‚çš„è¿‡ç¨‹ã€‚

**å¸¸è§æ•°æ®è´¨é‡é—®é¢˜**ï¼š
- **ç©ºå€¼/ç¼ºå¤±å€¼**ï¼šæŸäº›å­—æ®µä¸ºç©ºæˆ–null
- **é‡å¤æ•°æ®**ï¼šç›¸åŒçš„è®°å½•å‡ºç°å¤šæ¬¡
- **æ ¼å¼é”™è¯¯**ï¼šæ—¥æœŸæ ¼å¼ä¸ç»Ÿä¸€ã€æ‰‹æœºå·æ ¼å¼é”™è¯¯
- **å¼‚å¸¸å€¼**ï¼šå¹´é¾„ä¸º-1ã€å·¥èµ„ä¸º0ç­‰ä¸åˆç†æ•°æ®

### 3.2 ç©ºå€¼å¤„ç†è§„åˆ™


**ğŸ“‹ ç©ºå€¼å¤„ç†ç­–ç•¥**

| å¤„ç†æ–¹å¼ | **é€‚ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|---------|-------------|---------|
| ğŸ”„ **é»˜è®¤å€¼å¡«å……** | `å¿…å¡«å­—æ®µ` | `æ€§åˆ«é»˜è®¤ä¸º"æœªçŸ¥"` |
| âŒ **è·³è¿‡è®°å½•** | `å…³é”®å­—æ®µä¸ºç©º` | `ä¸»é”®ä¸ºç©ºçš„è®°å½•` |
| ğŸ§® **è®¡ç®—å¡«å……** | `å¯æ¨å¯¼å­—æ®µ` | `æ€»ä»·=å•ä»·Ã—æ•°é‡` |
| ğŸ“Š **ç»Ÿè®¡å¡«å……** | `æ•°å€¼å­—æ®µ` | `ç”¨å¹³å‡å€¼å¡«å……å¹´é¾„` |

**ä»£ç ç¤ºä¾‹ï¼šç©ºå€¼å¤„ç†**
```java
public class NullValueTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        String defaultValue = (String) paras[1];
        
        Column column = record.getColumn(columnName);
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºç©º
        if (column.getRawData() == null || 
            column.asString().trim().isEmpty()) {
            // ä½¿ç”¨é»˜è®¤å€¼
            column.setRawData(defaultValue);
        }
        
        return record;
    }
}
```

### 3.3 é‡å¤æ•°æ®æ¸…æ´—


**ğŸ”„ å»é‡ç­–ç•¥**

**åŸºäºå­—æ®µç»„åˆå»é‡**ï¼š
```java
public class DeduplicationTransformer extends Transformer {
    private Set<String> processedKeys = new HashSet<>();
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        // æ„å»ºå”¯ä¸€é”®
        String key = buildUniqueKey(record, paras);
        
        // æ£€æŸ¥æ˜¯å¦é‡å¤
        if (processedKeys.contains(key)) {
            // è¿”å›nullè¡¨ç¤ºè·³è¿‡è¿™æ¡è®°å½•
            return null;
        }
        
        processedKeys.add(key);
        return record;
    }
    
    private String buildUniqueKey(Record record, Object[] columns) {
        StringBuilder key = new StringBuilder();
        for (Object col : columns) {
            key.append(record.getColumn((String)col).asString()).append("|");
        }
        return key.toString();
    }
}
```

### 3.4 æ•°æ®æ ¼å¼æ¸…æ´—


**ğŸ“ æ ¼å¼è§„èŒƒåŒ–ç¤ºä¾‹**

**æ‰‹æœºå·æ ¼å¼æ¸…æ´—**ï¼š
```java
public class PhoneFormatTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        Column column = record.getColumn(columnName);
        
        String phone = column.asString();
        if (phone != null) {
            // ç§»é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦
            phone = phone.replaceAll("[^0-9]", "");
            
            // éªŒè¯æ‰‹æœºå·æ ¼å¼
            if (isValidPhone(phone)) {
                column.setRawData(phone);
            } else {
                // æ— æ•ˆæ‰‹æœºå·è®¾ä¸ºç©º
                column.setRawData(null);
            }
        }
        
        return record;
    }
    
    private boolean isValidPhone(String phone) {
        return phone != null && phone.matches("^1[3-9]\\d{9}$");
    }
}
```

---

## 4. ğŸ”¤ å­—æ®µæ ¼å¼è½¬æ¢


### 4.1 åŸºæœ¬æ ¼å¼è½¬æ¢


**ğŸ”¸ æ ¼å¼è½¬æ¢ç±»å‹**

å­—æ®µæ ¼å¼è½¬æ¢ä¸»è¦åŒ…æ‹¬æ•°æ®ç±»å‹è½¬æ¢ã€æ—¥æœŸæ ¼å¼è½¬æ¢ã€å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢ç­‰ã€‚è¿™äº›è½¬æ¢å¸®åŠ©æˆ‘ä»¬ç»Ÿä¸€ä¸åŒç³»ç»Ÿé—´çš„æ•°æ®æ ¼å¼ã€‚

### 4.2 æ—¥æœŸæ ¼å¼è½¬æ¢


**ğŸ“… æ—¥æœŸè½¬æ¢ç¤ºä¾‹**

**é—®é¢˜åœºæ™¯**ï¼šæºç³»ç»Ÿä½¿ç”¨"yyyy/MM/dd"æ ¼å¼ï¼Œç›®æ ‡ç³»ç»Ÿéœ€è¦"yyyy-MM-dd"æ ¼å¼

```java
public class DateFormatTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        String sourceFormat = (String) paras[1]; // yyyy/MM/dd
        String targetFormat = (String) paras[2]; // yyyy-MM-dd
        
        Column column = record.getColumn(columnName);
        String dateStr = column.asString();
        
        if (dateStr != null && !dateStr.trim().isEmpty()) {
            try {
                // è§£ææºæ ¼å¼
                SimpleDateFormat sourceFormatter = new SimpleDateFormat(sourceFormat);
                Date date = sourceFormatter.parse(dateStr);
                
                // è½¬æ¢ä¸ºç›®æ ‡æ ¼å¼
                SimpleDateFormat targetFormatter = new SimpleDateFormat(targetFormat);
                String formattedDate = targetFormatter.format(date);
                
                column.setRawData(formattedDate);
            } catch (ParseException e) {
                // æ ¼å¼é”™è¯¯æ—¶çš„å¤„ç†
                column.setRawData(null);
            }
        }
        
        return record;
    }
}
```

**é…ç½®ä½¿ç”¨**ï¼š
```json
{
    "name": "dateformat",
    "parameter": {
        "columnIndex": 2,
        "paras": ["create_date", "yyyy/MM/dd", "yyyy-MM-dd"]
    }
}
```

### 4.3 æ•°å€¼æ ¼å¼è½¬æ¢


**ğŸ§® æ•°å€¼å¤„ç†ç¤ºä¾‹**

**é‡‘é¢æ ¼å¼è½¬æ¢**ï¼š
```java
public class MoneyFormatTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        int scale = Integer.parseInt((String) paras[1]); // å°æ•°ä½æ•°
        
        Column column = record.getColumn(columnName);
        String valueStr = column.asString();
        
        if (valueStr != null) {
            try {
                // è½¬æ¢ä¸ºBigDecimalç¡®ä¿ç²¾åº¦
                BigDecimal value = new BigDecimal(valueStr);
                
                // è®¾ç½®å°æ•°ä½æ•°
                BigDecimal formatted = value.setScale(scale, RoundingMode.HALF_UP);
                
                column.setRawData(formatted.toString());
            } catch (NumberFormatException e) {
                column.setRawData("0.00");
            }
        }
        
        return record;
    }
}
```

### 4.4 å­—ç¬¦ä¸²æ ¼å¼è½¬æ¢


**ğŸ“ å­—ç¬¦ä¸²å¤„ç†å¸¸è§éœ€æ±‚**

| è½¬æ¢ç±»å‹ | **è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** |
|---------|---------|-------------|
| ğŸ”¤ **å¤§å°å†™è½¬æ¢** | `ç»Ÿä¸€å­—æ¯å¤§å°å†™` | `ç”¨æˆ·åè§„èŒƒåŒ–` |
| âœ‚ï¸ **å»é™¤ç©ºæ ¼** | `å»æ‰é¦–å°¾ç©ºæ ¼` | `æ•°æ®æ¸…ç†` |
| ğŸ”— **å­—æ®µæ‹¼æ¥** | `ç»„åˆå¤šä¸ªå­—æ®µ` | `ç”Ÿæˆå®Œæ•´åœ°å€` |
| âœ‚ï¸ **å­—ç¬¦ä¸²æˆªå–** | `æå–éƒ¨åˆ†å†…å®¹` | `æå–åŒºå·` |

**ç¤ºä¾‹ï¼šå§“åæ ¼å¼è§„èŒƒåŒ–**
```java
public class NameFormatTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String firstNameCol = (String) paras[0];
        String lastNameCol = (String) paras[1];
        String fullNameCol = (String) paras[2];
        
        String firstName = record.getColumn(firstNameCol).asString();
        String lastName = record.getColumn(lastNameCol).asString();
        
        // æ‹¼æ¥å…¨å
        String fullName = "";
        if (firstName != null && lastName != null) {
            fullName = firstName.trim() + " " + lastName.trim();
        }
        
        // è®¾ç½®å…¨åå­—æ®µ
        record.getColumn(fullNameCol).setRawData(fullName);
        
        return record;
    }
}
```

---

## 5. âœ… æ•°æ®è´¨é‡æ ¡éªŒ


### 5.1 æ•°æ®è´¨é‡æ ¡éªŒæ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ•°æ®è´¨é‡æ ¡éªŒ**
æ•°æ®è´¨é‡æ ¡éªŒæ˜¯åœ¨æ•°æ®è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œæ£€æŸ¥æ•°æ®æ˜¯å¦ç¬¦åˆé¢„å®šä¹‰çš„ä¸šåŠ¡è§„åˆ™å’Œè´¨é‡æ ‡å‡†ã€‚ä¸ç¬¦åˆæ ‡å‡†çš„æ•°æ®ä¼šè¢«æ ‡è®°ã€ä¿®æ­£æˆ–æ‹’ç»ã€‚

**ğŸ¯ æ ¡éªŒç»´åº¦**
- **å®Œæ•´æ€§**ï¼šå¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º
- **å‡†ç¡®æ€§**ï¼šæ•°æ®æ ¼å¼å’Œå–å€¼èŒƒå›´æ­£ç¡®
- **ä¸€è‡´æ€§**ï¼šç›¸å…³å­—æ®µé—´é€»è¾‘ä¸€è‡´
- **å”¯ä¸€æ€§**ï¼šä¸»é”®å­—æ®µä¸èƒ½é‡å¤

### 5.2 å­—æ®µå®Œæ•´æ€§æ ¡éªŒ


**ğŸ“‹ å¿…å¡«å­—æ®µæ£€æŸ¥**
```java
public class RequiredFieldValidator extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        // è·å–å¿…å¡«å­—æ®µåˆ—è¡¨
        List<String> requiredFields = Arrays.asList((String[]) paras);
        
        for (String fieldName : requiredFields) {
            Column column = record.getColumn(fieldName);
            
            // æ£€æŸ¥å­—æ®µæ˜¯å¦ä¸ºç©º
            if (column.getRawData() == null || 
                column.asString().trim().isEmpty()) {
                
                // è®°å½•æ ¡éªŒå¤±è´¥ä¿¡æ¯
                logValidationError(record, fieldName, "å­—æ®µä¸èƒ½ä¸ºç©º");
                
                // è¿”å›nullè¡¨ç¤ºè·³è¿‡è¿™æ¡è®°å½•
                return null;
            }
        }
        
        return record;
    }
    
    private void logValidationError(Record record, String field, String error) {
        System.err.println("æ•°æ®æ ¡éªŒå¤±è´¥ - å­—æ®µ: " + field + ", é”™è¯¯: " + error);
    }
}
```

### 5.3 æ•°æ®èŒƒå›´æ ¡éªŒ


**ğŸ”¢ æ•°å€¼èŒƒå›´æ£€æŸ¥**
```java
public class RangeValidator extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String fieldName = (String) paras[0];
        double minValue = Double.parseDouble((String) paras[1]);
        double maxValue = Double.parseDouble((String) paras[2]);
        
        Column column = record.getColumn(fieldName);
        
        try {
            double value = column.asDouble();
            
            // æ£€æŸ¥å–å€¼èŒƒå›´
            if (value < minValue || value > maxValue) {
                logValidationError(record, fieldName, 
                    "å–å€¼è¶…å‡ºèŒƒå›´ [" + minValue + ", " + maxValue + "]");
                return null;
            }
            
        } catch (Exception e) {
            logValidationError(record, fieldName, "æ•°å€¼æ ¼å¼é”™è¯¯");
            return null;
        }
        
        return record;
    }
}
```

### 5.4 ä¸šåŠ¡é€»è¾‘æ ¡éªŒ


**ğŸ§® å…³è”å­—æ®µæ ¡éªŒ**

**ç¤ºä¾‹ï¼šè®¢å•é‡‘é¢é€»è¾‘æ ¡éªŒ**
```java
public class OrderValidator extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        // è·å–ç›¸å…³å­—æ®µ
        double quantity = record.getColumn("quantity").asDouble();
        double unitPrice = record.getColumn("unit_price").asDouble(); 
        double totalAmount = record.getColumn("total_amount").asDouble();
        
        // è®¡ç®—æœŸæœ›çš„æ€»é‡‘é¢
        double expectedTotal = quantity * unitPrice;
        
        // å…è®¸çš„è¯¯å·®èŒƒå›´ï¼ˆ0.01å…ƒï¼‰
        double tolerance = 0.01;
        
        // æ ¡éªŒæ€»é‡‘é¢æ˜¯å¦æ­£ç¡®
        if (Math.abs(totalAmount - expectedTotal) > tolerance) {
            logValidationError(record, "total_amount", 
                "æ€»é‡‘é¢ä¸åŒ¹é…ï¼šæœŸæœ› " + expectedTotal + "ï¼Œå®é™… " + totalAmount);
            
            // å¯ä»¥é€‰æ‹©ä¿®æ­£æˆ–æ‹’ç»
            record.getColumn("total_amount").setRawData(expectedTotal);
        }
        
        return record;
    }
}
```

---

## 6. ğŸš« ç©ºå€¼å¤„ç†ç­–ç•¥


### 6.1 ç©ºå€¼å¤„ç†ç­–ç•¥æ¦‚è¿°


**ğŸ”¸ ç©ºå€¼çš„ä¸šåŠ¡å½±å“**
ç©ºå€¼ï¼ˆNULLï¼‰åœ¨æ•°æ®å¤„ç†ä¸­æ˜¯å¸¸è§é—®é¢˜ï¼Œä¸åŒçš„å¤„ç†ç­–ç•¥ä¼šç›´æ¥å½±å“æ•°æ®åˆ†æç»“æœå’Œä¸šåŠ¡é€»è¾‘ã€‚é€‰æ‹©åˆé€‚çš„ç©ºå€¼å¤„ç†ç­–ç•¥æ˜¯æ•°æ®è´¨é‡æ§åˆ¶çš„é‡è¦ç¯èŠ‚ã€‚

### 6.2 å¸¸è§ç©ºå€¼å¤„ç†æ–¹æ³•


**ğŸ“Š å¤„ç†ç­–ç•¥å¯¹æ¯”**

| ç­–ç•¥ | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|------|-------------|---------|---------|
| ğŸ”„ **é»˜è®¤å€¼å¡«å……** | `éå…³é”®å­—æ®µ` | `ä¿æŒæ•°æ®å®Œæ•´æ€§` | `å¯èƒ½å¼•å…¥åå·®` |
| âŒ **åˆ é™¤è®°å½•** | `å…³é”®å­—æ®µä¸ºç©º` | `ä¿è¯æ•°æ®è´¨é‡` | `æ•°æ®ä¸¢å¤±` |
| ğŸ“Š **ç»Ÿè®¡å€¼å¡«å……** | `æ•°å€¼å‹å­—æ®µ` | `å‡å°‘åå·®å½±å“` | `éœ€è¦é¢å¤–è®¡ç®—` |
| ğŸ” **ä¿æŒåŸå€¼** | `åˆ†æåœºæ™¯` | `ä¿ç•™çœŸå®çŠ¶æ€` | `ä¸‹æ¸¸éœ€å¤„ç†` |

### 6.3 æ™ºèƒ½ç©ºå€¼å¤„ç†


**ğŸ§  åŸºäºå­—æ®µç±»å‹çš„å¤„ç†ç­–ç•¥**
```java
public class SmartNullHandler extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        String strategy = (String) paras[1]; // å¤„ç†ç­–ç•¥
        
        Column column = record.getColumn(columnName);
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºç©ºå€¼
        if (isNull(column)) {
            switch (strategy.toLowerCase()) {
                case "default":
                    handleWithDefault(column, paras);
                    break;
                case "skip":
                    return null; // è·³è¿‡æ•´æ¡è®°å½•
                case "calculate":
                    handleWithCalculation(record, column, paras);
                    break;
                default:
                    // ä¿æŒç©ºå€¼ä¸å˜
                    break;
            }
        }
        
        return record;
    }
    
    private boolean isNull(Column column) {
        Object rawData = column.getRawData();
        return rawData == null || 
               "".equals(rawData) || 
               "null".equalsIgnoreCase(String.valueOf(rawData));
    }
    
    private void handleWithDefault(Column column, Object[] paras) {
        String defaultValue = (String) paras[2];
        column.setRawData(defaultValue);
    }
    
    private void handleWithCalculation(Record record, Column column, Object[] paras) {
        // åŸºäºå…¶ä»–å­—æ®µè®¡ç®—å€¼
        String calcField1 = (String) paras[2];
        String calcField2 = (String) paras[3];
        
        try {
            double val1 = record.getColumn(calcField1).asDouble();
            double val2 = record.getColumn(calcField2).asDouble();
            double result = val1 * val2; // ç®€å•ä¹˜æ³•ç¤ºä¾‹
            
            column.setRawData(result);
        } catch (Exception e) {
            column.setRawData(0); // è®¡ç®—å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼
        }
    }
}
```

### 6.4 æ¡ä»¶ç©ºå€¼å¤„ç†


**ğŸ”€ åŸºäºä¸šåŠ¡æ¡ä»¶çš„å¤„ç†**
```java
public class ConditionalNullHandler extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String targetColumn = (String) paras[0];
        String conditionColumn = (String) paras[1];
        String conditionValue = (String) paras[2];
        String fillValue = (String) paras[3];
        
        Column target = record.getColumn(targetColumn);
        Column condition = record.getColumn(conditionColumn);
        
        // å½“ç›®æ ‡å­—æ®µä¸ºç©ºä¸”æ»¡è¶³æ¡ä»¶æ—¶æ‰å¡«å……
        if (isNull(target) && 
            conditionValue.equals(condition.asString())) {
            target.setRawData(fillValue);
        }
        
        return record;
    }
}
```

**ä½¿ç”¨é…ç½®ç¤ºä¾‹**ï¼š
```json
{
    "name": "conditionalnull",
    "parameter": {
        "paras": ["salary", "department", "é”€å”®éƒ¨", "5000"]
    }
}
```
> ğŸ’¡ **è¯´æ˜**ï¼šå½“è–ªèµ„å­—æ®µä¸ºç©ºä¸”éƒ¨é—¨æ˜¯"é”€å”®éƒ¨"æ—¶ï¼Œå°†è–ªèµ„è®¾ä¸º5000

---

## 7. ğŸ” æ•°æ®è„±æ•è½¬æ¢


### 7.1 æ•°æ®è„±æ•åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ•°æ®è„±æ•**
æ•°æ®è„±æ•æ˜¯æŒ‡å¯¹æ•æ„Ÿæ•°æ®è¿›è¡Œå˜æ¢å¤„ç†ï¼Œä½¿å…¶åœ¨ä¿æŒæ•°æ®å¯ç”¨æ€§çš„åŒæ—¶ï¼Œæ— æ³•è¯†åˆ«å‡ºçœŸå®çš„æ•æ„Ÿä¿¡æ¯ã€‚è¿™æ˜¯æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤çš„é‡è¦æ‰‹æ®µã€‚

**ğŸ¯ è„±æ•åœºæ™¯**
- **å¼€å‘æµ‹è¯•**ï¼šç”Ÿäº§æ•°æ®ç”¨äºæµ‹è¯•ç¯å¢ƒ
- **æ•°æ®åˆ†æ**ï¼šä¿æŠ¤ç”¨æˆ·éšç§è¿›è¡Œç»Ÿè®¡åˆ†æ  
- **ç¬¬ä¸‰æ–¹åˆä½œ**ï¼šå‘åˆä½œä¼™ä¼´æä¾›è„±æ•æ•°æ®
- **åˆè§„è¦æ±‚**ï¼šæ»¡è¶³æ³•å¾‹æ³•è§„è¦æ±‚

### 7.2 å¸¸è§è„±æ•æ–¹æ³•


**ğŸ“‹ è„±æ•æŠ€æœ¯å¯¹æ¯”**

| è„±æ•æ–¹æ³• | **è¯´æ˜** | **é€‚ç”¨åœºæ™¯** | **å®‰å…¨çº§åˆ«** |
|---------|---------|-------------|-------------|
| ğŸ­ **æ©ç é®è”½** | `éƒ¨åˆ†å­—ç¬¦ç”¨*æ›¿æ¢` | `æ‰‹æœºå·ã€èº«ä»½è¯` | â­â­â­ |
| ğŸ”„ **æ›¿æ¢æ˜ å°„** | `ç”¨å‡æ•°æ®æ›¿æ¢çœŸæ•°æ®` | `å§“åã€åœ°å€` | â­â­â­â­ |
| ğŸ”€ **æ•°æ®æ‰“ä¹±** | `é‡æ–°æ’åˆ—æ•°æ®é¡ºåº` | `ç»Ÿè®¡åˆ†æ` | â­â­ |
| ğŸ§® **ç®—æ³•è½¬æ¢** | `ç”¨ç®—æ³•è½¬æ¢æ•°æ®` | `é«˜å®‰å…¨è¦æ±‚` | â­â­â­â­â­ |

### 7.3 æ‰‹æœºå·è„±æ•ç¤ºä¾‹


**ğŸ“± æ‰‹æœºå·æ©ç å¤„ç†**
```java
public class PhoneMaskTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        Column column = record.getColumn(columnName);
        
        String phone = column.asString();
        if (phone != null && phone.length() >= 11) {
            // ä¿ç•™å‰3ä½å’Œå4ä½ï¼Œä¸­é—´ç”¨****æ›¿æ¢
            String masked = phone.substring(0, 3) + "****" + 
                          phone.substring(phone.length() - 4);
            column.setRawData(masked);
        }
        
        return record;
    }
}
```

**è„±æ•æ•ˆæœ**ï¼š
```
åŸå§‹æ•°æ®: 13812345678
è„±æ•å:   138****5678
```

### 7.4 èº«ä»½è¯å·è„±æ•


**ğŸ†” èº«ä»½è¯æ©ç å¤„ç†**
```java
public class IdCardMaskTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        Column column = record.getColumn(columnName);
        
        String idCard = column.asString();
        if (idCard != null && idCard.length() >= 15) {
            // ä¿ç•™å‰6ä½å’Œå4ä½
            String masked = idCard.substring(0, 6) + 
                          "********" + 
                          idCard.substring(idCard.length() - 4);
            column.setRawData(masked);
        }
        
        return record;
    }
}
```

### 7.5 å§“åè„±æ•


**ğŸ‘¤ å§“åæ›¿æ¢è„±æ•**
```java
public class NameMaskTransformer extends Transformer {
    private final String[] FAKE_SURNAMES = {"å¼ ", "ç‹", "æ", "èµµ", "é™ˆ"};
    private final String[] FAKE_NAMES = {"ä¼Ÿ", "èŠ³", "å¨œ", "æ•", "é™"};
    private Random random = new Random();
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        Column column = record.getColumn(columnName);
        
        String name = column.asString();
        if (name != null && name.length() > 0) {
            // ç”Ÿæˆå‡åå­—
            String fakeName = generateFakeName();
            column.setRawData(fakeName);
        }
        
        return record;
    }
    
    private String generateFakeName() {
        String surname = FAKE_SURNAMES[random.nextInt(FAKE_SURNAMES.length)];
        String givenName = FAKE_NAMES[random.nextInt(FAKE_NAMES.length)];
        return surname + givenName;
    }
}
```

### 7.6 å¯é€†è„±æ•æ–¹æ¡ˆ


**ğŸ”„ åŸºäºæ˜ å°„è¡¨çš„è„±æ•**
```java
public class ReversibleMaskTransformer extends Transformer {
    private Map<String, String> mappingTable = new HashMap<>();
    private int counter = 10000;
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String columnName = (String) paras[0];
        String prefix = (String) paras[1]; // è„±æ•å‰ç¼€
        
        Column column = record.getColumn(columnName);
        String originalValue = column.asString();
        
        if (originalValue != null) {
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰æ˜ å°„
            String maskedValue = mappingTable.get(originalValue);
            if (maskedValue == null) {
                // åˆ›å»ºæ–°çš„æ˜ å°„å…³ç³»
                maskedValue = prefix + (++counter);
                mappingTable.put(originalValue, maskedValue);
                
                // ä¿å­˜æ˜ å°„å…³ç³»åˆ°æ–‡ä»¶ï¼ˆå®é™…åº”ç”¨ä¸­ï¼‰
                saveMappingToFile(originalValue, maskedValue);
            }
            
            column.setRawData(maskedValue);
        }
        
        return record;
    }
    
    private void saveMappingToFile(String original, String masked) {
        // å®é™…åº”ç”¨ä¸­åº”è¯¥ä¿å­˜åˆ°åŠ å¯†çš„æ˜ å°„è¡¨æ–‡ä»¶
        // ä»¥ä¾¿åç»­èƒ½å¤Ÿè¿˜åŸæ•°æ®
    }
}
```

---

## 8. âš™ï¸ è‡ªå®šä¹‰è½¬æ¢å‡½æ•°


### 8.1 è‡ªå®šä¹‰å‡½æ•°å¼€å‘æ¦‚å¿µ


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰è½¬æ¢å‡½æ•°**
è™½ç„¶DataXæä¾›äº†å¾ˆå¤šå†…ç½®çš„è½¬æ¢å™¨ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­å¸¸å¸¸é‡åˆ°ç‰¹æ®Šçš„è½¬æ¢éœ€æ±‚ï¼Œæ¯”å¦‚å¤æ‚çš„ä¸šåŠ¡è®¡ç®—ã€ç‰¹å®šçš„æ ¼å¼è½¬æ¢ç­‰ã€‚è¿™æ—¶å°±éœ€è¦å¼€å‘è‡ªå®šä¹‰çš„è½¬æ¢å‡½æ•°ã€‚

### 8.2 å‡½æ•°å¼è½¬æ¢å™¨


**ğŸ§® ç®€å•è®¡ç®—å‡½æ•°**
```java
public class BusinessCalculateTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String operation = (String) paras[0]; // æ“ä½œç±»å‹
        
        switch (operation) {
            case "discount_price":
                return calculateDiscountPrice(record, paras);
            case "age_group":
                return calculateAgeGroup(record, paras);
            case "grade_level":
                return calculateGradeLevel(record, paras);
            default:
                return record;
        }
    }
    
    // è®¡ç®—æŠ˜æ‰£ä»·æ ¼
    private Record calculateDiscountPrice(Record record, Object[] paras) {
        String priceColumn = (String) paras[1];
        String discountColumn = (String) paras[2];
        String resultColumn = (String) paras[3];
        
        double price = record.getColumn(priceColumn).asDouble();
        double discount = record.getColumn(discountColumn).asDouble();
        
        double discountPrice = price * discount / 100;
        record.getColumn(resultColumn).setRawData(discountPrice);
        
        return record;
    }
    
    // è®¡ç®—å¹´é¾„æ®µ
    private Record calculateAgeGroup(Record record, Object[] paras) {
        String ageColumn = (String) paras[1];
        String groupColumn = (String) paras[2];
        
        int age = record.getColumn(ageColumn).asLong().intValue();
        
        String ageGroup;
        if (age < 18) {
            ageGroup = "æœªæˆå¹´";
        } else if (age < 30) {
            ageGroup = "é’å¹´";
        } else if (age < 50) {
            ageGroup = "ä¸­å¹´";
        } else {
            ageGroup = "ä¸­è€å¹´";
        }
        
        record.getColumn(groupColumn).setRawData(ageGroup);
        return record;
    }
}
```

### 8.3 å­—ç¬¦ä¸²å¤„ç†å‡½æ•°


**ğŸ“ æ–‡æœ¬å¤„ç†è½¬æ¢å™¨**
```java
public class StringProcessTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String function = (String) paras[0];
        String columnName = (String) paras[1];
        
        Column column = record.getColumn(columnName);
        String value = column.asString();
        
        if (value != null) {
            String result = processString(value, function, paras);
            column.setRawData(result);
        }
        
        return record;
    }
    
    private String processString(String value, String function, Object[] paras) {
        switch (function) {
            case "extract_domain":
                // ä»é‚®ç®±ä¸­æå–åŸŸå
                return extractEmailDomain(value);
                
            case "format_address":
                // æ ¼å¼åŒ–åœ°å€
                return formatAddress(value);
                
            case "extract_phone_area":
                // æå–æ‰‹æœºå·åŒºåŸŸ
                return extractPhoneArea(value);
                
            default:
                return value;
        }
    }
    
    private String extractEmailDomain(String email) {
        if (email.contains("@")) {
            return email.substring(email.indexOf("@") + 1);
        }
        return "";
    }
    
    private String formatAddress(String address) {
        // ç®€å•çš„åœ°å€æ ¼å¼åŒ–ï¼šå»é™¤å¤šä½™ç©ºæ ¼ï¼Œç»Ÿä¸€åˆ†éš”ç¬¦
        return address.trim()
                     .replaceAll("\\s+", " ")
                     .replace("ï¼Œ", ",")
                     .replace("ã€‚", "");
    }
    
    private String extractPhoneArea(String phone) {
        // æ ¹æ®æ‰‹æœºå·å‰ä¸‰ä½åˆ¤æ–­è¿è¥å•†
        if (phone.length() >= 3) {
            String prefix = phone.substring(0, 3);
            if (prefix.startsWith("13") || prefix.startsWith("15") || prefix.startsWith("18")) {
                return "ç§»åŠ¨";
            } else if (prefix.startsWith("17") || prefix.startsWith("19")) {
                return "ç”µä¿¡";
            } else {
                return "è”é€š";
            }
        }
        return "æœªçŸ¥";
    }
}
```

### 8.4 å¤åˆè½¬æ¢å‡½æ•°


**ğŸ”§ å¤šæ­¥éª¤è½¬æ¢å¤„ç†**
```java
public class CompositeTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        // æ‰§è¡Œå¤šä¸ªè½¬æ¢æ­¥éª¤
        record = stepDataValidation(record);
        record = stepDataFormat(record);
        record = stepBusinessLogic(record);
        
        return record;
    }
    
    // æ­¥éª¤1ï¼šæ•°æ®éªŒè¯
    private Record stepDataValidation(Record record) {
        // éªŒè¯å¿…å¡«å­—æ®µ
        String[] requiredFields = {"user_id", "order_amount"};
        for (String field : requiredFields) {
            if (record.getColumn(field).getRawData() == null) {
                return null; // éªŒè¯å¤±è´¥ï¼Œè·³è¿‡è®°å½•
            }
        }
        return record;
    }
    
    // æ­¥éª¤2ï¼šæ•°æ®æ ¼å¼åŒ–
    private Record stepDataFormat(Record record) {
        // æ ¼å¼åŒ–é‡‘é¢å­—æ®µï¼ˆä¿ç•™2ä½å°æ•°ï¼‰
        Column amountColumn = record.getColumn("order_amount");
        double amount = amountColumn.asDouble();
        String formattedAmount = String.format("%.2f", amount);
        amountColumn.setRawData(formattedAmount);
        
        return record;
    }
    
    // æ­¥éª¤3ï¼šä¸šåŠ¡é€»è¾‘å¤„ç†
    private Record stepBusinessLogic(Record record) {
        // è®¡ç®—ä¼šå‘˜ç­‰çº§
        double amount = record.getColumn("order_amount").asDouble();
        String memberLevel;
        
        if (amount >= 10000) {
            memberLevel = "é’»çŸ³ä¼šå‘˜";
        } else if (amount >= 5000) {
            memberLevel = "é»„é‡‘ä¼šå‘˜";
        } else if (amount >= 1000) {
            memberLevel = "é“¶ç‰Œä¼šå‘˜";
        } else {
            memberLevel = "æ™®é€šä¼šå‘˜";
        }
        
        // æ·»åŠ æ–°å­—æ®µ
        record.getColumn("member_level").setRawData(memberLevel);
        
        return record;
    }
}
```

---

## 9. ğŸ—ï¸ Transformeræ’ä»¶æ¶æ„


### 9.1 æ’ä»¶æ¶æ„æ¦‚è¿°


**ğŸ”¸ DataX Transformeræ¶æ„è®¾è®¡**
DataXçš„Transformeré‡‡ç”¨äº†æ’ä»¶åŒ–æ¶æ„ï¼Œæ¯ä¸ªè½¬æ¢å™¨éƒ½æ˜¯ç‹¬ç«‹çš„æ’ä»¶ï¼Œå¯ä»¥çµæ´»ç»„åˆä½¿ç”¨ã€‚è¿™ç§è®¾è®¡è®©ç³»ç»Ÿå…·æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚

```
Transformeræ¶æ„å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DataX Engine              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TransformerManager(è½¬æ¢å™¨ç®¡ç†å™¨)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚Transformâ”‚ â”‚Transformâ”‚ â”‚Transformâ”‚â”‚
â”‚  â”‚Plugin A â”‚ â”‚Plugin B â”‚ â”‚Plugin C â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Recordæµå¤„ç†              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 æ’ä»¶ç”Ÿå‘½å‘¨æœŸ


**â³ æ’ä»¶æ‰§è¡Œæµç¨‹**

| é˜¶æ®µ | **è¯´æ˜** | **ä¸»è¦å·¥ä½œ** |
|------|---------|-------------|
| ğŸ”§ **åˆå§‹åŒ–** | `æ’ä»¶åŠ è½½å’Œé…ç½®` | `è¯»å–é…ç½®å‚æ•°ï¼Œåˆå§‹åŒ–èµ„æº` |
| ğŸ“Š **é¢„å¤„ç†** | `æ•°æ®å¤„ç†å‰å‡†å¤‡` | `å»ºç«‹è¿æ¥ï¼Œé¢„åŠ è½½æ•°æ®` |
| ğŸ”„ **æ‰§è¡Œè½¬æ¢** | `å¤„ç†æ¯æ¡è®°å½•` | `æ‰§è¡Œå…·ä½“è½¬æ¢é€»è¾‘` |
| ğŸ§¹ **æ¸…ç†** | `é‡Šæ”¾èµ„æº` | `å…³é—­è¿æ¥ï¼Œæ¸…ç†ä¸´æ—¶æ•°æ®` |

**æ’ä»¶åŸºç±»å®ç°**ï¼š
```java
public abstract class BaseTransformer extends Transformer {
    protected Map<String, Object> configuration;
    
    // åˆå§‹åŒ–æ–¹æ³•
    public void init(Map<String, Object> config) {
        this.configuration = config;
        // å­ç±»å¯ä»¥é‡å†™è¿›è¡Œç‰¹å®šåˆå§‹åŒ–
        onInit();
    }
    
    // é¢„å¤„ç†æ–¹æ³•
    public void prepare() {
        // å­ç±»å¯ä»¥é‡å†™è¿›è¡Œé¢„å¤„ç†
        onPrepare();
    }
    
    // æ¸…ç†æ–¹æ³•
    public void destroy() {
        // å­ç±»å¯ä»¥é‡å†™è¿›è¡Œæ¸…ç†
        onDestroy();
    }
    
    // å­ç±»å®ç°çš„é’©å­æ–¹æ³•
    protected void onInit() {}
    protected void onPrepare() {}
    protected void onDestroy() {}
}
```

### 9.3 æ’ä»¶é…ç½®ç®¡ç†


**ğŸ”§ é…ç½®æ–‡ä»¶ç»“æ„**
```json
{
    "name": "custom-transformer",
    "class": "com.example.CustomTransformer",
    "description": "è‡ªå®šä¹‰æ•°æ®è½¬æ¢æ’ä»¶",
    "developer": "å¼€å‘è€…åç§°",
    "parameters": {
        "required": ["input_column", "output_column"],
        "optional": ["default_value", "validation_rules"]
    },
    "dependencies": [
        "commons-lang3-3.12.0.jar",
        "fastjson-1.2.83.jar"
    ]
}
```

**é…ç½®è¯»å–å’ŒéªŒè¯**ï¼š
```java
public class ConfigurableTransformer extends BaseTransformer {
    private String inputColumn;
    private String outputColumn;
    private String defaultValue;
    
    @Override
    protected void onInit() {
        // è¯»å–å¿…éœ€å‚æ•°
        inputColumn = getRequiredConfig("input_column");
        outputColumn = getRequiredConfig("output_column");
        
        // è¯»å–å¯é€‰å‚æ•°
        defaultValue = getOptionalConfig("default_value", "");
        
        // éªŒè¯é…ç½®
        validateConfiguration();
    }
    
    private String getRequiredConfig(String key) {
        Object value = configuration.get(key);
        if (value == null) {
            throw new IllegalArgumentException("å¿…éœ€å‚æ•°ç¼ºå¤±: " + key);
        }
        return value.toString();
    }
    
    private String getOptionalConfig(String key, String defaultVal) {
        Object value = configuration.get(key);
        return value != null ? value.toString() : defaultVal;
    }
    
    private void validateConfiguration() {
        if (inputColumn.equals(outputColumn)) {
            throw new IllegalArgumentException("è¾“å…¥åˆ—å’Œè¾“å‡ºåˆ—ä¸èƒ½ç›¸åŒ");
        }
    }
}
```

### 9.4 æ’ä»¶æ³¨å†Œæœºåˆ¶


**ğŸ“‹ æ’ä»¶è‡ªåŠ¨å‘ç°**
```java
public class TransformerPluginManager {
    private Map<String, Class<? extends Transformer>> transformerRegistry;
    
    public TransformerPluginManager() {
        this.transformerRegistry = new HashMap<>();
        // è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œæ’ä»¶
        scanAndRegisterPlugins();
    }
    
    private void scanAndRegisterPlugins() {
        try {
            // æ‰«ææ’ä»¶ç›®å½•
            File pluginDir = new File("plugins/transformer");
            if (pluginDir.exists()) {
                File[] pluginFiles = pluginDir.listFiles(file -> 
                    file.getName().endsWith(".jar"));
                
                for (File pluginFile : pluginFiles) {
                    registerPlugin(pluginFile);
                }
            }
        } catch (Exception e) {
            throw new RuntimeException("æ’ä»¶æ³¨å†Œå¤±è´¥", e);
        }
    }
    
    private void registerPlugin(File pluginFile) throws Exception {
        // è¯»å–æ’ä»¶é…ç½®
        JsonObject config = readPluginConfig(pluginFile);
        String pluginName = config.get("name").getAsString();
        String className = config.get("class").getAsString();
        
        // åŠ è½½æ’ä»¶ç±»
        Class<? extends Transformer> transformerClass = 
            loadTransformerClass(pluginFile, className);
        
        // æ³¨å†Œåˆ°ç®¡ç†å™¨
        transformerRegistry.put(pluginName, transformerClass);
    }
    
    public Transformer createTransformer(String name) {
        Class<? extends Transformer> clazz = transformerRegistry.get(name);
        if (clazz == null) {
            throw new IllegalArgumentException("æœªæ‰¾åˆ°è½¬æ¢å™¨: " + name);
        }
        
        try {
            return clazz.newInstance();
        } catch (Exception e) {
            throw new RuntimeException("åˆ›å»ºè½¬æ¢å™¨å¤±è´¥: " + name, e);
        }
    }
}
```

---

## 10. ğŸ§© å¤æ‚æ•°æ®è½¬æ¢é€»è¾‘


### 10.1 å¤šè¡¨å…³è”è½¬æ¢


**ğŸ”— åŸºäºå¤–éƒ¨æ•°æ®çš„è½¬æ¢**

**åœºæ™¯è¯´æ˜**ï¼šéœ€è¦æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·ç­‰çº§ï¼Œç„¶ååŸºäºç­‰çº§è®¡ç®—æŠ˜æ‰£

```java
public class UserLevelTransformer extends BaseTransformer {
    private Map<String, String> userLevelCache;
    private DatabaseConnection dbConnection;
    
    @Override
    protected void onPrepare() {
        // è¿æ¥æ•°æ®åº“
        dbConnection = createDatabaseConnection();
        
        // é¢„åŠ è½½ç”¨æˆ·ç­‰çº§æ•°æ®åˆ°å†…å­˜
        loadUserLevelCache();
    }
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String userIdColumn = (String) paras[0];
        String discountColumn = (String) paras[1];
        
        String userId = record.getColumn(userIdColumn).asString();
        
        // æŸ¥è¯¢ç”¨æˆ·ç­‰çº§
        String userLevel = userLevelCache.get(userId);
        if (userLevel == null) {
            userLevel = queryUserLevelFromDB(userId);
        }
        
        // æ ¹æ®ç­‰çº§è®¡ç®—æŠ˜æ‰£
        double discount = calculateDiscountByLevel(userLevel);
        record.getColumn(discountColumn).setRawData(discount);
        
        return record;
    }
    
    private void loadUserLevelCache() {
        userLevelCache = new HashMap<>();
        
        String sql = "SELECT user_id, user_level FROM user_info";
        // æ‰§è¡ŒæŸ¥è¯¢å¹¶å¡«å……ç¼“å­˜
        // å®é™…å®ç°ä¸­åº”è¯¥åˆ†æ‰¹åŠ è½½ï¼Œé¿å…å†…å­˜æº¢å‡º
    }
    
    private double calculateDiscountByLevel(String level) {
        switch (level) {
            case "VIP": return 0.8;  // 8æŠ˜
            case "GOLD": return 0.85; // 8.5æŠ˜
            case "SILVER": return 0.9; // 9æŠ˜
            default: return 1.0;     // æ— æŠ˜æ‰£
        }
    }
    
    @Override
    protected void onDestroy() {
        // å…³é—­æ•°æ®åº“è¿æ¥
        if (dbConnection != null) {
            dbConnection.close();
        }
    }
}
```

### 10.2 æ¡ä»¶åˆ†æ”¯è½¬æ¢


**ğŸ”€ åŸºäºå¤šæ¡ä»¶çš„å¤æ‚è½¬æ¢**
```java
public class ConditionalTransformer extends Transformer {
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        // è·å–æ¡ä»¶å­—æ®µ
        String ageStr = record.getColumn("age").asString();
        String gender = record.getColumn("gender").asString();
        String income = record.getColumn("income").asString();
        
        // æ‰§è¡Œå¤æ‚çš„æ¡ä»¶åˆ¤æ–­
        String customerCategory = categorizeCustomer(
            Integer.parseInt(ageStr),
            gender,
            Double.parseDouble(income)
        );
        
        // è®¾ç½®å®¢æˆ·åˆ†ç±»ç»“æœ
        record.getColumn("customer_category").setRawData(customerCategory);
        
        // æ ¹æ®åˆ†ç±»è®¾ç½®è¥é”€ç­–ç•¥
        String marketingStrategy = getMarketingStrategy(customerCategory);
        record.getColumn("marketing_strategy").setRawData(marketingStrategy);
        
        return record;
    }
    
    private String categorizeCustomer(int age, String gender, double income) {
        // å¤æ‚çš„åˆ†ç±»é€»è¾‘
        if (age < 25) {
            if (income < 5000) {
                return "å¹´è½»ä½æ”¶å…¥";
            } else {
                return "å¹´è½»é«˜æ”¶å…¥";
            }
        } else if (age < 40) {
            if ("M".equals(gender)) {
                return income > 10000 ? "ä¸­å¹´ç”·æ€§é«˜æ”¶å…¥" : "ä¸­å¹´ç”·æ€§ä¸­æ”¶å…¥";
            } else {
                return income > 8000 ? "ä¸­å¹´å¥³æ€§é«˜æ”¶å…¥" : "ä¸­å¹´å¥³æ€§ä¸­æ”¶å…¥";
            }
        } else {
            return "æˆç†Ÿå®¢æˆ·";
        }
    }
    
    private String getMarketingStrategy(String category) {
        Map<String, String> strategies = new HashMap<>();
        strategies.put("å¹´è½»ä½æ”¶å…¥", "ä¼˜æƒ åˆ¸ç­–ç•¥");
        strategies.put("å¹´è½»é«˜æ”¶å…¥", "æ–°å“æ¨è");
        strategies.put("ä¸­å¹´ç”·æ€§é«˜æ”¶å…¥", "é«˜ç«¯äº§å“");
        strategies.put("ä¸­å¹´å¥³æ€§é«˜æ”¶å…¥", "å®šåˆ¶æœåŠ¡");
        strategies.put("æˆç†Ÿå®¢æˆ·", "ç¨³å®šç»´æŠ¤");
        
        return strategies.getOrDefault(category, "æ ‡å‡†è¥é”€");
    }
}
```

### 10.3 æ—¶é—´åºåˆ—è½¬æ¢


**ğŸ“… åŸºäºæ—¶é—´çš„æ•°æ®å¤„ç†**
```java
public class TimeSeriesTransformer extends Transformer {
    private Map<String, List<OrderInfo>> userOrderHistory;
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String userId = record.getColumn("user_id").asString();
        String orderDate = record.getColumn("order_date").asString();
        double orderAmount = record.getColumn("order_amount").asDouble();
        
        // åˆ†æç”¨æˆ·å†å²è®¢å•æ¨¡å¼
        OrderAnalysis analysis = analyzeOrderPattern(userId, orderDate, orderAmount);
        
        // è®¾ç½®åˆ†æç»“æœ
        record.getColumn("is_repeat_customer").setRawData(analysis.isRepeatCustomer);
        record.getColumn("avg_order_amount").setRawData(analysis.avgOrderAmount);
        record.getColumn("order_frequency").setRawData(analysis.orderFrequency);
        record.getColumn("customer_lifetime_value").setRawData(analysis.lifetimeValue);
        
        return record;
    }
    
    private OrderAnalysis analyzeOrderPattern(String userId, String orderDate, double amount) {
        OrderAnalysis analysis = new OrderAnalysis();
        
        // è·å–ç”¨æˆ·å†å²è®¢å•
        List<OrderInfo> history = userOrderHistory.getOrDefault(userId, new ArrayList<>());
        
        // åˆ¤æ–­æ˜¯å¦ä¸ºé‡å¤å®¢æˆ·
        analysis.isRepeatCustomer = history.size() > 0;
        
        // è®¡ç®—å¹³å‡è®¢å•é‡‘é¢
        double totalAmount = history.stream().mapToDouble(o -> o.amount).sum() + amount;
        analysis.avgOrderAmount = totalAmount / (history.size() + 1);
        
        // è®¡ç®—è®¢å•é¢‘ç‡ï¼ˆå¤©æ•°ï¼‰
        if (history.size() > 0) {
            long daysDiff = calculateDaysBetween(history.get(0).date, orderDate);
            analysis.orderFrequency = (double) daysDiff / history.size();
        } else {
            analysis.orderFrequency = 0;
        }
        
        // è®¡ç®—å®¢æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼
        analysis.lifetimeValue = calculateLifetimeValue(totalAmount, analysis.orderFrequency);
        
        // æ›´æ–°å†å²è®°å½•
        history.add(new OrderInfo(orderDate, amount));
        userOrderHistory.put(userId, history);
        
        return analysis;
    }
    
    private double calculateLifetimeValue(double totalAmount, double frequency) {
        // ç®€å•çš„CLVè®¡ç®—ï¼šæ€»é‡‘é¢ * é¢„æœŸé¢‘ç‡ç³»æ•°
        double frequencyFactor = frequency > 0 ? Math.min(365 / frequency, 12) : 1;
        return totalAmount * frequencyFactor * 0.1; // ç®€åŒ–è®¡ç®—
    }
    
    // å†…éƒ¨ç±»
    private static class OrderInfo {
        String date;
        double amount;
        
        OrderInfo(String date, double amount) {
            this.date = date;
            this.amount = amount;
        }
    }
    
    private static class OrderAnalysis {
        boolean isRepeatCustomer;
        double avgOrderAmount;
        double orderFrequency;
        double lifetimeValue;
    }
}
```

### 10.4 æ•°æ®èšåˆè½¬æ¢


**ğŸ“Š å®æ—¶èšåˆç»Ÿè®¡**
```java
public class AggregationTransformer extends Transformer {
    private Map<String, AggregateData> aggregateMap = new HashMap<>();
    
    @Override
    public Record evaluate(Record record, Object... paras) {
        String groupByColumn = (String) paras[0]; // åˆ†ç»„å­—æ®µ
        String aggregateColumn = (String) paras[1]; // èšåˆå­—æ®µ
        String aggregateType = (String) paras[2]; // èšåˆç±»å‹: sum, count, avg
        
        String groupKey = record.getColumn(groupByColumn).asString();
        double value = record.getColumn(aggregateColumn).asDouble();
        
        // æ›´æ–°èšåˆæ•°æ®
        AggregateData aggData = aggregateMap.computeIfAbsent(groupKey, 
            k -> new AggregateData());
        aggData.update(value);
        
        // æ ¹æ®èšåˆç±»å‹è®¾ç½®ç»“æœ
        double result = getAggregateResult(aggData, aggregateType);
        record.getColumn("aggregate_result").setRawData(result);
        
        // è®¾ç½®ç»Ÿè®¡ä¿¡æ¯
        record.getColumn("group_count").setRawData(aggData.count);
        record.getColumn("group_total").setRawData(aggData.sum);
        
        return record;
    }
    
    private double getAggregateResult(AggregateData data, String type) {
        switch (type.toLowerCase()) {
            case "sum": return data.sum;
            case "count": return data.count;
            case "avg": return data.count > 0 ? data.sum / data.count : 0;
            case "max": return data.max;
            case "min": return data.min;
            default: return data.sum;
        }
    }
    
    private static class AggregateData {
        double sum = 0;
        int count = 0;
        double max = Double.MIN_VALUE;
        double min = Double.MAX_VALUE;
        
        void update(double value) {
            sum += value;
            count++;
            max = Math.max(max, value);
            min = Math.min(min, value);
        }
    }
}
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®è½¬æ¢æœ¬è´¨ï¼šåœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­å¯¹æ•°æ®è¿›è¡Œå®æ—¶åŠ å·¥å¤„ç†
ğŸ”¸ Transformæ’ä»¶ï¼šDataXæ¡†æ¶ä¸­çš„ç‹¬ç«‹è½¬æ¢ç»„ä»¶ï¼Œå¯çµæ´»ç»„åˆ
ğŸ”¸ æ•°æ®æ¸…æ´—ï¼šè¯†åˆ«å’Œä¿®æ­£æ•°æ®è´¨é‡é—®é¢˜ï¼Œç¡®ä¿æ•°æ®å¯ç”¨æ€§
ğŸ”¸ å­—æ®µè½¬æ¢ï¼šç»Ÿä¸€æ•°æ®æ ¼å¼ï¼Œæ»¡è¶³ç›®æ ‡ç³»ç»Ÿè¦æ±‚
ğŸ”¸ è´¨é‡æ ¡éªŒï¼šéªŒè¯æ•°æ®æ˜¯å¦ç¬¦åˆä¸šåŠ¡è§„åˆ™å’Œè´¨é‡æ ‡å‡†
ğŸ”¸ ç©ºå€¼å¤„ç†ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç©ºå€¼å¤„ç†ç­–ç•¥
ğŸ”¸ æ•°æ®è„±æ•ï¼šä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼Œæ»¡è¶³å®‰å…¨åˆè§„è¦æ±‚
ğŸ”¸ è‡ªå®šä¹‰å‡½æ•°ï¼šæ»¡è¶³ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚çš„è½¬æ¢é€»è¾‘
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ•°æ®è½¬æ¢çš„æ ¸å¿ƒä»·å€¼**
```
ä¸šåŠ¡ä»·å€¼ï¼š
- æé«˜æ•°æ®è´¨é‡ï¼šæ¸…æ´—è„æ•°æ®ï¼Œè¡¥å……ç¼ºå¤±å€¼
- ç»Ÿä¸€æ•°æ®æ ¼å¼ï¼šæ¶ˆé™¤ç³»ç»Ÿé—´çš„å·®å¼‚
- ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼šæ»¡è¶³å®‰å…¨åˆè§„è¦æ±‚
- å¢å¼ºæ•°æ®ä»·å€¼ï¼šé€šè¿‡è®¡ç®—ç”Ÿæˆæ–°çš„ä¸šåŠ¡å­—æ®µ

æŠ€æœ¯ä»·å€¼ï¼š
- å‡å°‘ä¸‹æ¸¸å¤„ç†è´Ÿæ‹…ï¼šæ•°æ®åˆ°è¾¾ç›®æ ‡ç³»ç»Ÿæ—¶å·²ç»ç¬¦åˆè¦æ±‚
- æé«˜æ•°æ®ä¸€è‡´æ€§ï¼šç»Ÿä¸€çš„è½¬æ¢è§„åˆ™ç¡®ä¿æ•°æ®ä¸€è‡´
- æ”¯æŒå¤æ‚ä¸šåŠ¡ï¼šæ»¡è¶³å„ç§ä¸šåŠ¡åœºæ™¯çš„è½¬æ¢éœ€æ±‚
```

**ğŸ”¹ è½¬æ¢ç­–ç•¥é€‰æ‹©åŸåˆ™**
```
æ•°æ®æ¸…æ´—ç­–ç•¥ï¼š
âœ… å…³é”®å­—æ®µä¸ºç©º â†’ è·³è¿‡è®°å½•æˆ–ä½¿ç”¨é»˜è®¤å€¼
âœ… æ ¼å¼é”™è¯¯ â†’ å°è¯•ä¿®æ­£æˆ–æ ‡è®°ä¸ºå¼‚å¸¸
âœ… é‡å¤æ•°æ® â†’ æ ¹æ®ä¸šåŠ¡è§„åˆ™å»é‡æˆ–ä¿ç•™
âœ… å¼‚å¸¸å€¼ â†’ åŸºäºç»Ÿè®¡æ–¹æ³•è¯†åˆ«å’Œå¤„ç†

è„±æ•ç­–ç•¥é€‰æ‹©ï¼š
âœ… å¼€å‘æµ‹è¯•ç¯å¢ƒ â†’ ä½¿ç”¨æ©ç æˆ–æ›¿æ¢æ–¹æ³•
âœ… æ•°æ®åˆ†æåœºæ™¯ â†’ ä¿æŒæ•°æ®åˆ†å¸ƒç‰¹å¾çš„è„±æ•
âœ… ç¬¬ä¸‰æ–¹å…±äº« â†’ ä½¿ç”¨ä¸å¯é€†çš„è„±æ•æ–¹æ³•
âœ… åˆè§„è¦æ±‚ â†’ ä¸¥æ ¼æŒ‰ç…§æ³•å¾‹æ³•è§„æ‰§è¡Œ
```

### 11.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ å¼€å‘å®è·µå»ºè®®**

**æ’ä»¶å¼€å‘è§„èŒƒ**ï¼š
```java
// 1. ç»§æ‰¿åŸºç±»ï¼Œå®ç°æ ‡å‡†æ¥å£
public class MyTransformer extends BaseTransformer {
    
    // 2. é‡å†™ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
    @Override
    protected void onInit() {
        // è¯»å–é…ç½®ï¼ŒéªŒè¯å‚æ•°
    }
    
    // 3. å®ç°æ ¸å¿ƒè½¬æ¢é€»è¾‘
    @Override
    public Record evaluate(Record record, Object... paras) {
        // å…·ä½“è½¬æ¢å¤„ç†
        return record;
    }
    
    // 4. æ¸…ç†èµ„æº
    @Override
    protected void onDestroy() {
        // å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æº
    }
}
```

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
å†…å­˜ä¼˜åŒ–ï¼š
- ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤æŸ¥è¯¢
- åŠæ—¶é‡Šæ”¾ä¸ç”¨çš„å¯¹è±¡
- æ§åˆ¶ç¼“å­˜å¤§å°ï¼Œé¿å…å†…å­˜æº¢å‡º

å¤„ç†æ•ˆç‡ï¼š
- æ‰¹é‡å¤„ç†å‡å°‘IOå¼€é”€
- é¢„åŠ è½½å¸¸ç”¨æ•°æ®åˆ°å†…å­˜
- é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºé‡å¤å¯¹è±¡

é”™è¯¯å¤„ç†ï¼š
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- æä¾›é™çº§å¤„ç†æ–¹æ¡ˆ
- è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
```

### 11.4 å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ


**ğŸš¨ å¸¸è§é—®é¢˜å¤„ç†**

| é—®é¢˜ç±»å‹ | **å¸¸è§åŸå› ** | **è§£å†³æ–¹æ¡ˆ** |
|---------|-------------|-------------|
| ğŸŒ **æ€§èƒ½ç¼“æ…¢** | `é¢‘ç¹æ•°æ®åº“æŸ¥è¯¢` | `ä½¿ç”¨ç¼“å­˜ï¼Œæ‰¹é‡æŸ¥è¯¢` |
| ğŸ’¾ **å†…å­˜æº¢å‡º** | `ç¼“å­˜æ•°æ®è¿‡å¤§` | `åˆ†æ‰¹å¤„ç†ï¼Œå®šæœŸæ¸…ç†` |
| âŒ **è½¬æ¢å¤±è´¥** | `æ•°æ®æ ¼å¼å¼‚å¸¸` | `å¢åŠ æ•°æ®éªŒè¯ï¼Œæä¾›é»˜è®¤å€¼` |
| ğŸ”„ **æ•°æ®ä¸ä¸€è‡´** | `å¹¶å‘å¤„ç†å†²çª` | `ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„` |

**é…ç½®æœ€ä½³å®è·µ**ï¼š
```json
{
    "transformer": [{
        "name": "custom-transformer",
        "parameter": {
            "columnIndex": 0,
            "paras": ["input_field", "output_field"],
            "errorHandling": "skip",  // skip/default/stop
            "cacheSize": 10000,
            "timeoutSeconds": 30
        }
    }]
}
```

### 11.5 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š å­¦ä¹ è¿›é˜¶è·¯çº¿**

**ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æŒæ¡**
- [x] ç†è§£DataXè½¬æ¢æ¶æ„å’Œå·¥ä½œåŸç†
- [x] æŒæ¡å†…ç½®è½¬æ¢å™¨çš„ä½¿ç”¨æ–¹æ³•
- [x] å­¦ä¼šé…ç½®ç®€å•çš„è½¬æ¢è§„åˆ™

**ç¬¬äºŒé˜¶æ®µï¼šå®è·µåº”ç”¨**
- [x] å¼€å‘ç®€å•çš„è‡ªå®šä¹‰è½¬æ¢å™¨
- [x] æŒæ¡å¸¸è§çš„æ•°æ®æ¸…æ´—æŠ€æœ¯
- [x] å®ç°åŸºæœ¬çš„æ•°æ®è„±æ•åŠŸèƒ½

**ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åº”ç”¨**
- [x] å¼€å‘å¤æ‚çš„ä¸šåŠ¡è½¬æ¢é€»è¾‘
- [x] å®ç°é«˜æ€§èƒ½çš„è½¬æ¢å™¨
- [x] æŒæ¡åˆ†å¸ƒå¼è½¬æ¢æŠ€æœ¯

**å®æˆ˜é¡¹ç›®å»ºè®®**ï¼š
1. **ç”¨æˆ·æ•°æ®è„±æ•é¡¹ç›®**ï¼šå®ç°å®Œæ•´çš„ç”¨æˆ·æ•°æ®è„±æ•æ–¹æ¡ˆ
2. **è®¢å•æ•°æ®æ¸…æ´—é¡¹ç›®**ï¼šæ„å»ºç”µå•†è®¢å•æ•°æ®è´¨é‡æ§åˆ¶ç³»ç»Ÿ
3. **å¤šæºæ•°æ®æ•´åˆé¡¹ç›®**ï¼šæ•´åˆå¤šä¸ªä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®æ ¼å¼

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- æ•°æ®è½¬æ¢æ˜¯æ•°æ®åŒæ­¥çš„æ ¸å¿ƒç¯èŠ‚ï¼Œç›´æ¥å½±å“æ•°æ®è´¨é‡
- é€‰æ‹©åˆé€‚çš„è½¬æ¢ç­–ç•¥æ¯”å¤æ‚çš„è½¬æ¢é€»è¾‘æ›´é‡è¦
- æ’ä»¶åŒ–æ¶æ„è®©è½¬æ¢åŠŸèƒ½å…·æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§
- æ€§èƒ½å’Œæ•°æ®è´¨é‡éœ€è¦å¹³è¡¡ï¼Œä¸èƒ½ä¸ºäº†æ€§èƒ½ç‰ºç‰²æ•°æ®å‡†ç¡®æ€§
- å®é™…åº”ç”¨ä¸­è¦è€ƒè™‘é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–