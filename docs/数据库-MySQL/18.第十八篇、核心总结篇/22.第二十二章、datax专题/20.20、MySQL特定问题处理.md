---
title: 20ã€MySQLç‰¹å®šé—®é¢˜å¤„ç†
---
## ðŸ“š ç›®å½•

1. [MySQLè¿žæŽ¥ä¸Žé…ç½®é—®é¢˜](#1-MySQLè¿žæŽ¥ä¸Žé…ç½®é—®é¢˜)
2. [æ€§èƒ½è°ƒä¼˜ä¸Žä¼˜åŒ–](#2-æ€§èƒ½è°ƒä¼˜ä¸Žä¼˜åŒ–)
3. [æ•°æ®åŒæ­¥é—®é¢˜å¤„ç†](#3-æ•°æ®åŒæ­¥é—®é¢˜å¤„ç†)
4. [å­—ç¬¦é›†ä¸Žç¼–ç é—®é¢˜](#4-å­—ç¬¦é›†ä¸Žç¼–ç é—®é¢˜)
5. [å¹¶å‘ä¸Žé”é—®é¢˜](#5-å¹¶å‘ä¸Žé”é—®é¢˜)
6. [æ•°æ®ç±»åž‹ä¸Žå…¼å®¹æ€§](#6-æ•°æ®ç±»åž‹ä¸Žå…¼å®¹æ€§)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ”Œ MySQLè¿žæŽ¥ä¸Žé…ç½®é—®é¢˜


### 1.1 è¿žæŽ¥æ± é—®é¢˜è¯Šæ–­ä¸Žè§£å†³


**ðŸ”¸ ä»€ä¹ˆæ˜¯è¿žæŽ¥æ± é—®é¢˜ï¼Ÿ**
```
ç®€å•ç†è§£ï¼šå°±åƒé¤åŽ…çš„åº§ä½ä¸€æ ·
- è¿žæŽ¥æ±  = é¤åŽ…æ€»åº§ä½æ•°
- æ¯ä¸ªDataXä»»åŠ¡ = ä¸€ä¸ªç”¨é¤å®¢äºº
- è¿žæŽ¥æ± æ»¡äº† = é¤åŽ…åº§ä½æ»¡äº†ï¼Œæ–°å®¢äººè¦ç­‰ä½
```

**ðŸ’¡ å¸¸è§è¿žæŽ¥æ± é—®é¢˜è¡¨çŽ°**
```
é”™è¯¯ä¿¡æ¯ï¼š
"Too many connections"
"Connection pool exhausted"
"Unable to get connection from pool"

å®žé™…å«ä¹‰ï¼š
MySQLè¿žæŽ¥æ•°ç”¨å®Œäº†ï¼Œæ–°çš„DataXä»»åŠ¡è¿žä¸ä¸Šæ•°æ®åº“
```

**ðŸ”§ è¿žæŽ¥æ± ä¼˜åŒ–é…ç½®**
```json
{
  "parameter": {
    "connection": [
      {
        "jdbcUrl": [
          "jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8&autoReconnect=true&rewriteBatchedStatements=true"
        ],
        "username": "root",
        "password": "password"
      }
    ],
    "connectionPoolSize": 10,    // è¿žæŽ¥æ± å¤§å°ï¼Œæ ¹æ®å¹¶å‘è°ƒæ•´
    "maxWait": 60000,           // æœ€å¤§ç­‰å¾…æ—¶é—´60ç§’
    "validationQuery": "SELECT 1" // è¿žæŽ¥æœ‰æ•ˆæ€§æ£€æŸ¥
  }
}
```

**âš¡ è§£å†³æ­¥éª¤**
```
æ­¥éª¤1ï¼šæ£€æŸ¥MySQLæœ€å¤§è¿žæŽ¥æ•°
SHOW VARIABLES LIKE 'max_connections';

æ­¥éª¤2ï¼šæŸ¥çœ‹å½“å‰è¿žæŽ¥ä½¿ç”¨æƒ…å†µ  
SHOW STATUS LIKE 'Threads_connected';

æ­¥éª¤3ï¼šè°ƒæ•´è¿žæŽ¥æ± é…ç½®
- å‡å°‘connectionPoolSize
- å¢žåŠ maxWaitæ—¶é—´
- å¯ç”¨è¿žæŽ¥å¤ç”¨

æ­¥éª¤4ï¼šä¼˜åŒ–MySQLé…ç½®
SET GLOBAL max_connections = 1000;
```

### 1.2 ä¸»ä»Žå»¶è¿Ÿå½±å“å¤„ç†


**ðŸ”¸ ä»€ä¹ˆæ˜¯ä¸»ä»Žå»¶è¿Ÿï¼Ÿ**
```
ç”Ÿæ´»ä¾‹å­ï¼šå°±åƒå¾®ä¿¡ç¾¤èŠä¸€æ ·
- ä¸»åº“ = ç¾¤ä¸»å‘æ¶ˆæ¯
- ä»Žåº“ = ç¾¤æˆå‘˜æ”¶åˆ°æ¶ˆæ¯
- å»¶è¿Ÿ = ç¾¤æˆå‘˜æ™šå‡ ç§’æ‰çœ‹åˆ°æ¶ˆæ¯

DataXé—®é¢˜ï¼š
ä»Žä»Žåº“è¯»æ•°æ®æ—¶ï¼Œå¯èƒ½è¯»åˆ°çš„æ˜¯"æ—§æ•°æ®"
```

**ðŸ“Š å»¶è¿Ÿæ£€æµ‹æ–¹æ³•**
```sql
-- åœ¨ä»Žåº“æ‰§è¡Œï¼Œæ£€æŸ¥å»¶è¿Ÿæƒ…å†µ
SHOW SLAVE STATUS\G

å…³é”®æŒ‡æ ‡ï¼š
Seconds_Behind_Master: 0    -- å»¶è¿Ÿç§’æ•°ï¼Œ0è¡¨ç¤ºæ— å»¶è¿Ÿ
Slave_IO_Running: Yes       -- IOçº¿ç¨‹æ­£å¸¸
Slave_SQL_Running: Yes      -- SQLçº¿ç¨‹æ­£å¸¸
```

**ðŸ› ï¸ è§£å†³æ–¹æ¡ˆ**
```json
{
  "name": "mysqlreader",
  "parameter": {
    "connection": [
      {
        "jdbcUrl": [
          "jdbc:mysql://master-host:3306/db?readFromMasterWhenNoSlaves=true"
        ]
      }
    ],
    "slaveDelay": 5,          // å®¹å¿5ç§’å»¶è¿Ÿ
    "preferSlave": false      // ä¼˜å…ˆè¯»ä¸»åº“
  }
}
```

---

## 2. âš¡ æ€§èƒ½è°ƒä¼˜ä¸Žä¼˜åŒ–


### 2.1 æ…¢æŸ¥è¯¢ä¼˜åŒ–


**ðŸ”¸ ä»€ä¹ˆæ˜¯æ…¢æŸ¥è¯¢ï¼Ÿ**
```
é€šä¿—ç†è§£ï¼šå°±åƒæŽ’é˜Ÿä¹°ç¥¨ä¸€æ ·
- æ­£å¸¸æŸ¥è¯¢ = å¿«é€Ÿçª—å£ï¼Œå‡ ç§’æžå®š
- æ…¢æŸ¥è¯¢ = ä¸šåŠ¡å¤æ‚ï¼ŒæŽ’é˜Ÿå¾ˆä¹…æ‰è½®åˆ°

DataXå½±å“ï¼š
æ…¢æŸ¥è¯¢ä¼šè®©æ•´ä¸ªæ•°æ®åŒæ­¥ä»»åŠ¡å˜æ…¢ï¼Œç”šè‡³è¶…æ—¶
```

**ðŸ“ˆ æ…¢æŸ¥è¯¢è¯†åˆ«**
```sql
-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 2;    -- è¶…è¿‡2ç§’è®°å½•

-- æŸ¥çœ‹æ…¢æŸ¥è¯¢ç»Ÿè®¡
SHOW STATUS LIKE 'Slow_queries';

-- åˆ†æžå…·ä½“æ…¢æŸ¥è¯¢
EXPLAIN SELECT * FROM large_table WHERE condition;
```

**ðŸŽ¯ DataXæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥**
```json
{
  "name": "mysqlreader",
  "parameter": {
    "querySql": [
      "SELECT id, name, create_time FROM user_table WHERE id BETWEEN ? AND ? AND create_time >= '2024-01-01'"
    ],
    "splitPk": "id",           // ä½¿ç”¨ä¸»é”®åˆ†ç‰‡
    "fetchSize": 1024,         // æ¯æ¬¡èŽ·å–1024æ¡
    "queryTimeOut": 3600       // æŸ¥è¯¢è¶…æ—¶1å°æ—¶
  }
}
```

**âš¡ ä¼˜åŒ–è¦ç‚¹**
```
ç´¢å¼•ä¼˜åŒ–ï¼š
âœ… ç¡®ä¿splitPkå­—æ®µæœ‰ç´¢å¼•
âœ… WHEREæ¡ä»¶å­—æ®µè¦æœ‰ç´¢å¼•
âœ… é¿å…SELECT *ï¼Œåªé€‰éœ€è¦çš„å­—æ®µ

æŸ¥è¯¢æ”¹å†™ï¼š
âŒ é¿å…ï¼šSELECT * FROM table WHERE YEAR(date_col) = 2024
âœ… æŽ¨èï¼šSELECT * FROM table WHERE date_col >= '2024-01-01' AND date_col < '2025-01-01'

åˆ†é¡µç­–ç•¥ï¼š
ä½¿ç”¨LIMITåˆ†é¡µï¼Œé¿å…å¤§ç»“æžœé›†ä¸€æ¬¡æ€§åŠ è½½
```

### 2.2 è¡¨é”äº‰ç”¨é—®é¢˜


**ðŸ”¸ ä»€ä¹ˆæ˜¯è¡¨é”äº‰ç”¨ï¼Ÿ**
```
å®žé™…åœºæ™¯ï¼šå°±åƒåœè½¦åœºä¸€æ ·
- MyISAMè¡¨ = æ•´ä¸ªåœè½¦åœºåªæœ‰ä¸€ä¸ªå…¥å£
- è¯»æ“ä½œ = å¤šä¸ªäººå¯ä»¥åŒæ—¶å‚è§‚
- å†™æ“ä½œ = åªèƒ½ä¸€ä¸ªäººè¿›å…¥ç»´æŠ¤ï¼Œå…¶ä»–äººç­‰å¾…

DataXé—®é¢˜ï¼š
è¯»å–æ•°æ®æ—¶è¢«å…¶ä»–å†™æ“ä½œé˜»å¡žï¼Œä»»åŠ¡å¡ä½
```

**ðŸ“Š é”äº‰ç”¨æ£€æµ‹**
```sql
-- æŸ¥çœ‹å½“å‰é”ç­‰å¾…æƒ…å†µ
SHOW PROCESSLIST;

-- æŸ¥çœ‹é”çŠ¶æ€
SHOW STATUS LIKE 'Table_locks%';

å…³é”®æŒ‡æ ‡ï¼š
Table_locks_immediate: ç«‹å³èŽ·å¾—é”çš„æ¬¡æ•°
Table_locks_waited: ç­‰å¾…é”çš„æ¬¡æ•°
```

**ðŸ”§ è§£å†³æ–¹æ¡ˆ**
```json
{
  "name": "mysqlreader", 
  "parameter": {
    "connection": [
      {
        "jdbcUrl": [
          "jdbc:mysql://localhost:3306/db?useServerPrepStmts=false&rewriteBatchedStatements=true"
        ]
      }
    ],
    "readMode": "snapshot",     // ä½¿ç”¨å¿«ç…§è¯»
    "isolationLevel": "READ_UNCOMMITTED"  // é™ä½Žéš”ç¦»çº§åˆ«
  }
}
```

**ðŸ’¡ æœ€ä½³å®žè·µ**
```
æ—¶é—´è§„åˆ’ï¼š
- é¿å¼€ä¸šåŠ¡é«˜å³°æœŸè¿è¡ŒDataX
- é€‰æ‹©å‡Œæ™¨æˆ–ä¸šåŠ¡ä½Žè°·æœŸåŒæ­¥

æŠ€æœ¯æ–¹æ¡ˆï¼š
- ä¼˜å…ˆä½¿ç”¨InnoDBå¼•æ“Žï¼ˆè¡Œé”ï¼‰
- é¿å¼€MyISAMè¡¨ï¼ˆè¡¨é”ï¼‰
- ä½¿ç”¨åªè¯»ä»Žåº“è¿›è¡Œæ•°æ®åŒæ­¥
```

---

## 3. ðŸ”„ æ•°æ®åŒæ­¥é—®é¢˜å¤„ç†


### 3.1 è‡ªå¢žIDå†²çªå¤„ç†


**ðŸ”¸ ä»€ä¹ˆæ˜¯è‡ªå¢žIDå†²çªï¼Ÿ**
```
ç”Ÿæ´»ä¾‹å­ï¼šå°±åƒæŽ’é˜Ÿå–å·ä¸€æ ·
- æºåº“ = Açª—å£ï¼Œå·ç ä»Ž1å¼€å§‹
- ç›®æ ‡åº“ = Bçª—å£ï¼Œä¹Ÿä»Ž1å¼€å§‹
- å†²çª = ä¸¤ä¸ªçª—å£éƒ½æœ‰ç›¸åŒå·ç çš„äºº

DataXé—®é¢˜ï¼š
åŒæ­¥æ•°æ®æ—¶ï¼Œç›®æ ‡åº“å·²æœ‰ç›¸åŒIDï¼Œæ’å…¥å¤±è´¥
```

**âš ï¸ å¸¸è§é”™è¯¯ä¿¡æ¯**
```
Duplicate entry '123' for key 'PRIMARY'
Cannot add or update a child row: a foreign key constraint fails
```

**ðŸ› ï¸ è§£å†³ç­–ç•¥**

**æ–¹æ¡ˆ1ï¼šé‡ç½®è‡ªå¢žå€¼**
```sql
-- åœ¨ç›®æ ‡åº“æ‰§è¡Œï¼Œè®¾ç½®è‡ªå¢žèµ·å§‹å€¼
ALTER TABLE target_table AUTO_INCREMENT = 1000000;
```

**æ–¹æ¡ˆ2ï¼šDataXé…ç½®å¿½ç•¥å†²çª**
```json
{
  "name": "mysqlwriter",
  "parameter": {
    "writeMode": "replace",     // æ›¿æ¢æ¨¡å¼ï¼Œé‡åˆ°å†²çªå°±æ›¿æ¢
    "preSql": [
      "SET SESSION sql_mode=''"  // æ”¾å®½SQLæ¨¡å¼
    ]
  }
}
```

**æ–¹æ¡ˆ3ï¼šä½¿ç”¨UUIDæ›¿ä»£è‡ªå¢žID**
```sql
-- ä¿®æ”¹è¡¨ç»“æž„ä½¿ç”¨UUID
ALTER TABLE user_table ADD COLUMN uuid VARCHAR(36) UNIQUE;
UPDATE user_table SET uuid = UUID() WHERE uuid IS NULL;
```

### 3.2 å¤–é”®çº¦æŸé—®é¢˜


**ðŸ”¸ ä»€ä¹ˆæ˜¯å¤–é”®çº¦æŸï¼Ÿ**
```
å®žé™…ä¾‹å­ï¼šå°±åƒèº«ä»½è¯å’Œäººçš„å…³ç³»
- ä¸»è¡¨(person) = äººå‘˜ä¿¡æ¯è¡¨
- ä»Žè¡¨(order) = è®¢å•è¡¨  
- å¤–é”® = è®¢å•å¿…é¡»å±žäºŽçœŸå®žå­˜åœ¨çš„äºº

DataXé—®é¢˜ï¼š
åŒæ­¥æ—¶å¦‚æžœäººå‘˜ä¿¡æ¯è¿˜æ²¡åŒæ­¥ï¼Œè®¢å•å°±åŒæ­¥ä¸äº†
```

**ðŸ“‹ å¤„ç†æ­¥éª¤**
```
æ­¥éª¤1ï¼šç¡®å®šè¡¨ä¾èµ–å…³ç³»
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¡¨     â”‚    â”‚   è®¢å•è¡¨    â”‚
â”‚  (ä¸»è¡¨)     â”‚ â†  â”‚   (ä»Žè¡¨)    â”‚  
â”‚  user_id    â”‚    â”‚  user_id(FK)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤2ï¼šæŒ‰ä¾èµ–é¡ºåºåŒæ­¥
1. å…ˆåŒæ­¥ç”¨æˆ·è¡¨
2. å†åŒæ­¥è®¢å•è¡¨
```

**ðŸ”§ é…ç½®è§£å†³æ–¹æ¡ˆ**
```json
{
  "name": "mysqlwriter",
  "parameter": {
    "preSql": [
      "SET FOREIGN_KEY_CHECKS = 0"    // ä¸´æ—¶ç¦ç”¨å¤–é”®æ£€æŸ¥
    ],
    "postSql": [
      "SET FOREIGN_KEY_CHECKS = 1"    // åŒæ­¥å®ŒæˆåŽé‡æ–°å¯ç”¨
    ]
  }
}
```

---

## 4. ðŸ”¤ å­—ç¬¦é›†ä¸Žç¼–ç é—®é¢˜


### 4.1 å­—ç¬¦é›†ä¸åŒ¹é…å¤„ç†


**ðŸ”¸ ä»€ä¹ˆæ˜¯å­—ç¬¦é›†é—®é¢˜ï¼Ÿ**
```
ç”Ÿæ´»ä¾‹å­ï¼šå°±åƒç¿»è¯‘è½¯ä»¶ä¸€æ ·
- UTF8 = å›½é™…é€šç”¨è¯­è¨€ï¼Œæ”¯æŒå„å›½æ–‡å­—
- GBK = ä¸­æ–‡ä¸“ç”¨ï¼Œåªæ”¯æŒä¸­æ–‡
- ä¹±ç  = ç”¨é”™äº†ç¿»è¯‘æ–¹å¼

DataXé—®é¢˜ï¼š
ä¸­æ–‡æ•°æ®åŒæ­¥åŽå˜æˆ???æˆ–ä¹±ç 
```

**ðŸ“Š å­—ç¬¦é›†æ£€æŸ¥**
```sql
-- æ£€æŸ¥æ•°æ®åº“å­—ç¬¦é›†
SHOW VARIABLES LIKE 'character_set%';

-- æ£€æŸ¥è¡¨å­—ç¬¦é›†
SHOW CREATE TABLE your_table;

-- æ£€æŸ¥åˆ—å­—ç¬¦é›†
SHOW FULL COLUMNS FROM your_table;
```

**ðŸ”§ è§£å†³é…ç½®**
```json
{
  "name": "mysqlreader",
  "parameter": {
    "connection": [
      {
        "jdbcUrl": [
          "jdbc:mysql://localhost:3306/db?useUnicode=true&characterEncoding=utf8mb4&serverTimezone=Asia/Shanghai"
        ]
      }
    ]
  }
}
```

**âš¡ æœ€ä½³å®žè·µ**
```
æŽ¨èé…ç½®ï¼š
âœ… ç»Ÿä¸€ä½¿ç”¨utf8mb4å­—ç¬¦é›†
âœ… è¿žæŽ¥å‚æ•°åŠ ä¸ŠcharacterEncoding=utf8mb4
âœ… ç¡®ä¿æºåº“å’Œç›®æ ‡åº“å­—ç¬¦é›†ä¸€è‡´

é¿å…é—®é¢˜ï¼š
âŒ ä¸è¦æ··ç”¨ä¸åŒå­—ç¬¦é›†
âŒ é¿å…ä½¿ç”¨utf8ï¼ˆä¸å®Œæ•´çš„UTF-8ï¼‰
âŒ ä¸è¦å¿½ç•¥è¿žæŽ¥å‚æ•°ä¸­çš„ç¼–ç è®¾ç½®
```

### 4.2 æ—¶é—´æˆ³å¤„ç†é—®é¢˜


**ðŸ”¸ æ—¶é—´æˆ³é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ**
```
å¸¸è§åœºæ™¯ï¼šå°±åƒä¸åŒåœ°åŒºçš„æ—¶é—´ä¸€æ ·
- åŒ—äº¬æ—¶é—´ = ä¸œ8åŒº
- UTCæ—¶é—´ = æ ‡å‡†æ—¶é—´
- é—®é¢˜ = åŒæ­¥åŽæ—¶é—´å·®äº†8å°æ—¶

DataXè¡¨çŽ°ï¼š
åŽŸæœ¬2024-09-11 15:30:00å˜æˆ2024-09-11 07:30:00
```

**ðŸ• æ—¶åŒºé…ç½®è§£å†³**
```json
{
  "parameter": {
    "connection": [
      {
        "jdbcUrl": [
          "jdbc:mysql://localhost:3306/db?serverTimezone=Asia/Shanghai&useLegacyDatetimeCode=false"
        ]
      }
    ]
  }
}
```

**ðŸ“ æ—¶é—´å­—æ®µå¤„ç†**
```sql
-- æ£€æŸ¥æ—¶åŒºè®¾ç½®
SHOW VARIABLES LIKE '%time_zone%';

-- è®¾ç½®æ—¶åŒº
SET time_zone = '+8:00';

-- æ—¶é—´è½¬æ¢ç¤ºä¾‹
SELECT 
  create_time,
  CONVERT_TZ(create_time, '+00:00', '+08:00') AS beijing_time
FROM your_table;
```

---

## 5. ðŸ”’ å¹¶å‘ä¸Žé”é—®é¢˜


### 5.1 æ­»é”é—®é¢˜å¤„ç†


**ðŸ”¸ ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ**
```
ç”Ÿæ´»ä¾‹å­ï¼šå°±åƒä¸¤ä¸ªäººè¿‡çª„æ¡¥
- Aç­‰Bè®©è·¯ï¼ŒBç­‰Aè®©è·¯
- ç»“æžœï¼šä¸¤ä¸ªäººéƒ½è¿‡ä¸åŽ»ï¼Œå¡ä½äº†

MySQLæ­»é”ï¼š
- äº‹åŠ¡1ç­‰äº‹åŠ¡2é‡Šæ”¾é”
- äº‹åŠ¡2ç­‰äº‹åŠ¡1é‡Šæ”¾é”  
- ç»“æžœï¼šä¸¤ä¸ªäº‹åŠ¡éƒ½å¡ä½ï¼Œç³»ç»Ÿæ£€æµ‹åˆ°åŽè‡ªåŠ¨å›žæ»šä¸€ä¸ª
```

**âš ï¸ æ­»é”é”™è¯¯ä¿¡æ¯**
```
Deadlock found when trying to get lock; try restarting transaction
Lock wait timeout exceeded; try restarting transaction
```

**ðŸ“Š æ­»é”æ£€æµ‹ä¸Žåˆ†æž**
```sql
-- æŸ¥çœ‹æœ€è¿‘çš„æ­»é”ä¿¡æ¯
SHOW ENGINE INNODB STATUS\G

-- æŸ¥çœ‹é”ç­‰å¾…æƒ…å†µ
SELECT * FROM information_schema.INNODB_LOCKS;
SELECT * FROM information_schema.INNODB_LOCK_WAITS;
```

**ðŸ› ï¸ DataXæ­»é”é¢„é˜²**
```json
{
  "name": "mysqlwriter",
  "parameter": {
    "writeMode": "insert",
    "batchSize": 1024,          // å‡å°æ‰¹æ¬¡å¤§å°
    "retryTimes": 3,            // æ­»é”æ—¶é‡è¯•3æ¬¡
    "retryInterval": 1000,      // é‡è¯•é—´éš”1ç§’
    "preSql": [
      "SET SESSION innodb_lock_wait_timeout = 60"
    ]
  }
}
```

**ðŸ’¡ é¢„é˜²ç­–ç•¥**
```
æŠ€æœ¯å±‚é¢ï¼š
1. æŒ‰ç›¸åŒé¡ºåºè®¿é—®è¡¨å’Œè¡Œ
2. å‡å°äº‹åŠ¡å¤§å°å’ŒæŒæœ‰é”çš„æ—¶é—´
3. ä½¿ç”¨è¾ƒä½Žçš„éš”ç¦»çº§åˆ«

DataXé…ç½®ï¼š
1. é™ä½Žå¹¶å‘åº¦ï¼ˆå‡å°‘channelæ•°é‡ï¼‰
2. å‡å°batchSizeé¿å…é•¿äº‹åŠ¡
3. è®¾ç½®åˆç†çš„è¶…æ—¶å’Œé‡è¯•
```

### 5.2 NULLå€¼å¤„ç†ç­–ç•¥


**ðŸ”¸ NULLå€¼çš„ç‰¹æ®Šæ€§**
```
NULLçš„å«ä¹‰ï¼šè¡¨ç¤º"æœªçŸ¥"æˆ–"ä¸å­˜åœ¨"
- ä¸ç­‰äºŽç©ºå­—ç¬¦ä¸² ''
- ä¸ç­‰äºŽæ•°å­— 0
- ä»»ä½•ä¸ŽNULLçš„æ¯”è¾ƒéƒ½è¿”å›žNULL

DataXé—®é¢˜ï¼š
NULLå€¼åœ¨ä¸åŒæ•°æ®åº“é—´åŒæ­¥å¯èƒ½äº§ç”Ÿå…¼å®¹æ€§é—®é¢˜
```

**ðŸ”§ NULLå€¼å¤„ç†é…ç½®**
```json
{
  "name": "mysqlreader",
  "parameter": {
    "querySql": [
      "SELECT id, IFNULL(name, 'default_name') as name, IFNULL(age, 0) as age FROM user_table"
    ],
    "nullMode": "skip"          // è·³è¿‡NULLå€¼
  }
}
```

**ðŸ“ å¸¸ç”¨NULLå¤„ç†å‡½æ•°**
```sql
-- IFNULLï¼šNULLå€¼æ›¿æ¢
SELECT IFNULL(column_name, 'default_value') FROM table;

-- COALESCEï¼šè¿”å›žç¬¬ä¸€ä¸ªéžNULLå€¼  
SELECT COALESCE(col1, col2, 'default') FROM table;

-- CASE WHENï¼šæ¡ä»¶åˆ¤æ–­
SELECT 
  CASE 
    WHEN column_name IS NULL THEN 'empty'
    ELSE column_name
  END as result
FROM table;
```

---

## 6. ðŸ”„ æ•°æ®ç±»åž‹ä¸Žå…¼å®¹æ€§


### 6.1 å¤§å­—æ®µå¤„ç†ä¼˜åŒ–


**ðŸ”¸ ä»€ä¹ˆæ˜¯å¤§å­—æ®µï¼Ÿ**
```
å¤§å­—æ®µç±»åž‹ï¼šTEXTã€LONGTEXTã€BLOBã€LONGBLOB
å…¸åž‹åº”ç”¨ï¼šæ–‡ç« å†…å®¹ã€å›¾ç‰‡æ•°æ®ã€JSONé…ç½®

é—®é¢˜è¡¨çŽ°ï¼š
- åŒæ­¥é€Ÿåº¦æ…¢
- å†…å­˜å ç”¨é«˜  
- å¯èƒ½è¶…æ—¶
```

**ðŸ“Š å¤§å­—æ®µè¯†åˆ«**
```sql
-- æŸ¥æ‰¾å¤§å­—æ®µåˆ—
SELECT 
  TABLE_NAME, 
  COLUMN_NAME, 
  DATA_TYPE,
  CHARACTER_MAXIMUM_LENGTH
FROM information_schema.COLUMNS 
WHERE DATA_TYPE IN ('TEXT', 'LONGTEXT', 'BLOB', 'LONGBLOB')
AND TABLE_SCHEMA = 'your_database';
```

**âš¡ ä¼˜åŒ–ç­–ç•¥**
```json
{
  "name": "mysqlreader",
  "parameter": {
    "fetchSize": 256,           // å¤§å­—æ®µæ—¶å‡å°fetchSize
    "queryTimeOut": 7200,       // å¢žåŠ è¶…æ—¶æ—¶é—´
    "querySql": [
      "SELECT id, title, SUBSTRING(content, 1, 1000) as content_preview FROM article"
    ]
  }
}
```

**ðŸ’¡ å¤„ç†å»ºè®®**
```
åˆ†ç¦»ç­–ç•¥ï¼š
1. å¤§å­—æ®µå•ç‹¬å­˜å‚¨ï¼Œä¸»è¡¨åªå­˜IDå¼•ç”¨
2. ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼Œæ•°æ®åº“å­˜è·¯å¾„
3. åŽ‹ç¼©å­˜å‚¨å‡å°‘ç©ºé—´å ç”¨

åŒæ­¥ç­–ç•¥ï¼š
1. å¤§å­—æ®µè¡¨å•ç‹¬åŒæ­¥
2. å¢žåŠ å†…å­˜å’Œè¶…æ—¶é…ç½®
3. è€ƒè™‘åˆ†æ‰¹å¤„ç†
```

### 6.2 MySQLç‰ˆæœ¬å…¼å®¹æ€§


**ðŸ”¸ ç‰ˆæœ¬å·®å¼‚å¸¸è§é—®é¢˜**
```
MySQL 5.7 vs 8.0ä¸»è¦å·®å¼‚ï¼š
- é»˜è®¤å­—ç¬¦é›†ï¼šlatin1 vs utf8mb4
- SQLæ¨¡å¼ï¼šè¾ƒå®½æ¾ vs ä¸¥æ ¼æ¨¡å¼
- æ—¶é—´å¤„ç†ï¼šä¸åŒçš„é»˜è®¤è¡Œä¸º
- æ–°ç‰¹æ€§ï¼šJSONç±»åž‹ã€çª—å£å‡½æ•°ç­‰
```

**ðŸ“‹ ç‰ˆæœ¬æ£€æŸ¥**
```sql
-- æŸ¥çœ‹MySQLç‰ˆæœ¬
SELECT VERSION();

-- æŸ¥çœ‹SQLæ¨¡å¼
SELECT $$sql_mode;

-- æŸ¥çœ‹å­—ç¬¦é›†è®¾ç½®
SHOW VARIABLES LIKE 'character_set%';
```

**ðŸ”§ å…¼å®¹æ€§é…ç½®**
```json
{
  "parameter": {
    "connection": [
      {
        "jdbcUrl": [
          "jdbc:mysql://localhost:3306/db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai"
        ]
      }
    ],
    "preSql": [
      "SET SESSION sql_mode = 'NO_ENGINE_SUBSTITUTION'",
      "SET SESSION character_set_results = utf8mb4"
    ]
  }
}
```

**âš ï¸ æ³¨æ„äº‹é¡¹**
```
é«˜ç‰ˆæœ¬åˆ°ä½Žç‰ˆæœ¬ï¼š
- æ£€æŸ¥æ–°ç‰¹æ€§å…¼å®¹æ€§
- æ³¨æ„JSONç±»åž‹ç­‰æ–°æ•°æ®ç±»åž‹
- éªŒè¯å‡½æ•°å’Œè¯­æ³•å…¼å®¹æ€§

ä½Žç‰ˆæœ¬åˆ°é«˜ç‰ˆæœ¬ï¼š
- æ³¨æ„ä¸¥æ ¼æ¨¡å¼å½±å“
- å­—ç¬¦é›†é»˜è®¤å€¼å˜åŒ–
- æ—¶åŒºå¤„ç†å·®å¼‚
```

---

## 7. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŽŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ðŸ”¸ è¿žæŽ¥ç®¡ç†ï¼šè¿žæŽ¥æ± é…ç½®ã€ä¸»ä»Žæž¶æž„ã€è¶…æ—¶è®¾ç½®
ðŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šç´¢å¼•ä½¿ç”¨ã€æŸ¥è¯¢ä¼˜åŒ–ã€æ‰¹æ¬¡å¤§å°è°ƒæ•´
ðŸ”¸ æ•°æ®ä¸€è‡´æ€§ï¼šäº‹åŠ¡æŽ§åˆ¶ã€é”æœºåˆ¶ã€å†²çªå¤„ç†
ðŸ”¸ å­—ç¬¦ç¼–ç ï¼šå­—ç¬¦é›†ç»Ÿä¸€ã€æ—¶åŒºå¤„ç†ã€ç¼–ç é…ç½®
ðŸ”¸ é”™è¯¯å¤„ç†ï¼šé‡è¯•æœºåˆ¶ã€å¼‚å¸¸æ•èŽ·ã€æ•…éšœæ¢å¤
```

### 7.2 å…³é”®æŽ’æŸ¥æ€è·¯


**ðŸ”¹ é—®é¢˜å®šä½æµç¨‹**
```
æ­¥éª¤1ï¼šç¡®è®¤é”™è¯¯ç±»åž‹
- è¿žæŽ¥é—®é¢˜ â†’ æ£€æŸ¥ç½‘ç»œã€é…ç½®ã€æƒé™
- æ€§èƒ½é—®é¢˜ â†’ åˆ†æžæ…¢æŸ¥è¯¢ã€ç´¢å¼•ã€é”ç­‰å¾…
- æ•°æ®é—®é¢˜ â†’ æ ¡éªŒå­—ç¬¦é›†ã€ç±»åž‹ã€çº¦æŸ

æ­¥éª¤2ï¼šæ”¶é›†å…³é”®ä¿¡æ¯  
- DataXä»»åŠ¡æ—¥å¿—
- MySQLé”™è¯¯æ—¥å¿—
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

æ­¥éª¤3ï¼šé€æ­¥æŽ’é™¤
- ç®€åŒ–é…ç½®æµ‹è¯•
- åˆ†æ®µéªŒè¯åŠŸèƒ½
- å¯¹æ¯”æ­£å¸¸çŽ¯å¢ƒ
```

**ðŸ”¹ å¸¸ç”¨æŽ’æŸ¥å‘½ä»¤**
```sql
-- è¿žæŽ¥çŠ¶æ€æ£€æŸ¥
SHOW PROCESSLIST;
SHOW STATUS LIKE 'Threads%';

-- æ€§èƒ½åˆ†æž
EXPLAIN SELECT ...;
SHOW STATUS LIKE 'Slow_queries';

-- é”çŠ¶æ€æ£€æŸ¥
SHOW ENGINE INNODB STATUS\G;
SELECT * FROM information_schema.INNODB_LOCKS;
```

### 7.3 æœ€ä½³å®žè·µæŒ‡å—


**ðŸŽ¯ é…ç½®ä¼˜åŒ–**
```
è¿žæŽ¥é…ç½®ï¼š
âœ… åˆç†è®¾ç½®è¿žæŽ¥æ± å¤§å°
âœ… å¯ç”¨è¿žæŽ¥å¤ç”¨å’Œè‡ªåŠ¨é‡è¿ž
âœ… é…ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´

æŸ¥è¯¢ä¼˜åŒ–ï¼š
âœ… ä½¿ç”¨åˆé€‚çš„splitPkè¿›è¡Œåˆ†ç‰‡
âœ… é¿å…SELECT *ï¼Œåªé€‰æ‹©éœ€è¦å­—æ®µ
âœ… åˆç†è®¾ç½®fetchSizeå’ŒbatchSize

ç›‘æŽ§å‘Šè­¦ï¼š
âœ… ç›‘æŽ§åŒæ­¥ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
âœ… è®¾ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦
âœ… å»ºç«‹æ•…éšœå¤„ç†æµç¨‹
```

**ðŸ”§ æ•…éšœé¢„é˜²**
```
çŽ¯å¢ƒå‡†å¤‡ï¼š
1. ç»Ÿä¸€å­—ç¬¦é›†ä¸ºutf8mb4
2. é…ç½®ä¸»ä»Žå»¶è¿Ÿç›‘æŽ§
3. é¢„ç•™è¶³å¤Ÿçš„è¿žæŽ¥æ•°

é…ç½®æ£€æŸ¥ï¼š
1. éªŒè¯è¿žæŽ¥å‚æ•°æ­£ç¡®æ€§
2. æµ‹è¯•å°‘é‡æ•°æ®åŒæ­¥
3. ç¡®è®¤æ—¶åŒºå’Œç¼–ç è®¾ç½®

è¿è¡Œç›‘æŽ§ï¼š
1. å®žæ—¶ç›‘æŽ§ä»»åŠ¡çŠ¶æ€
2. å®šæœŸæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
3. ä¿å­˜è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- è¿žæŽ¥æ± é…ç½®è¦åˆç†ï¼Œè¶…æ—¶é‡è¯•ä¸èƒ½å°‘
- ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢å¿«ï¼Œåˆ†ç‰‡å­—æ®µé€‰æ‹©å¥½  
- å­—ç¬¦ç¼–ç è¦ç»Ÿä¸€ï¼Œæ—¶åŒºè®¾ç½®ä¸èƒ½é”™
- é”äº‰ç”¨è¦é¢„é˜²ï¼Œæ­»é”é‡è¯•æœ‰å¦™æ‹›
- å¤§å­—æ®µå•ç‹¬å¤„ç†ï¼Œç‰ˆæœ¬å…¼å®¹è¦ç¡®ä¿