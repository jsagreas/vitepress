---
title: 7ã€Otter NodeèŠ‚ç‚¹å®‰è£…é…ç½®
---
## ğŸ“š ç›®å½•

1. [Otter NodeåŸºç¡€æ¦‚å¿µ](#1-otter-nodeåŸºç¡€æ¦‚å¿µ)
2. [NodeèŠ‚ç‚¹å®‰è£…éƒ¨ç½²](#2-nodeèŠ‚ç‚¹å®‰è£…éƒ¨ç½²)
3. [èŠ‚ç‚¹é…ç½®æ–‡ä»¶è¯¦è§£](#3-èŠ‚ç‚¹é…ç½®æ–‡ä»¶è¯¦è§£)
4. [Managerè¿æ¥é…ç½®](#4-managerè¿æ¥é…ç½®)
5. [æ€§èƒ½ä¼˜åŒ–é…ç½®](#5-æ€§èƒ½ä¼˜åŒ–é…ç½®)
6. [å¤šèŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²](#6-å¤šèŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²)
7. [èŠ‚ç‚¹ç›‘æ§ä¸ç»´æŠ¤](#7-èŠ‚ç‚¹ç›‘æ§ä¸ç»´æŠ¤)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ Otter NodeåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Otter Node


**ğŸ”¸ NodeèŠ‚ç‚¹å®šä¹‰**
```
Otter Nodeæ˜¯Otteræ•°æ®åŒæ­¥ç³»ç»Ÿçš„å·¥ä½œèŠ‚ç‚¹
ä½œç”¨ï¼šå®é™…æ‰§è¡Œæ•°æ®åŒæ­¥ä»»åŠ¡çš„æ‰§è¡Œå™¨
åœ°ä½ï¼šManagerè´Ÿè´£è°ƒåº¦ï¼ŒNodeè´Ÿè´£å¹²æ´»
```

**ğŸ’¡ Nodeå·¥ä½œåŸç†**
```
æ•°æ®åŒæ­¥æµç¨‹ä¸­çš„è§’è‰²ï¼š
Manager â”€â”€è°ƒåº¦ä»»åŠ¡â”€â”€> Node â”€â”€æ‰§è¡ŒåŒæ­¥â”€â”€> ç›®æ ‡æ•°æ®åº“

Managerï¼šå¤§è„‘ï¼Œè´Ÿè´£ä»»åŠ¡åˆ†é…å’Œç›‘æ§
Nodeï¼š   æ‰‹è„šï¼Œè´Ÿè´£å…·ä½“çš„æ•°æ®æŠ½å–ã€è½¬æ¢ã€åŠ è½½
```

### 1.2 NodeèŠ‚ç‚¹æ ¸å¿ƒåŠŸèƒ½


**ğŸ¯ ä¸»è¦èŒè´£**
```
æ•°æ®æŠ½å–(Extract)ï¼š
â€¢ ä»æºæ•°æ®åº“è¯»å–å˜æ›´æ•°æ®
â€¢ æ”¯æŒMySQL binlogè§£æ
â€¢ å¤„ç†å¢é‡å’Œå…¨é‡æ•°æ®

æ•°æ®è½¬æ¢(Transform)ï¼š
â€¢ æ•°æ®æ ¼å¼è½¬æ¢
â€¢ å­—æ®µæ˜ å°„è½¬æ¢
â€¢ ä¸šåŠ¡é€»è¾‘å¤„ç†

æ•°æ®åŠ è½½(Load)ï¼š
â€¢ å°†æ•°æ®å†™å…¥ç›®æ ‡åº“
â€¢ ä¿è¯æ•°æ®ä¸€è‡´æ€§
â€¢ å¤„ç†å†²çªå’Œå¼‚å¸¸
```

### 1.3 Nodeä¸Managerçš„å…³ç³»


**ğŸ”— æ¶æ„å…³ç³»å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    è°ƒåº¦æŒ‡ä»¤    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Otter Manager  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚   Otter Node    â”‚
â”‚   (ç®¡ç†ä¸­å¿ƒ)     â”‚              â”‚   (å·¥ä½œèŠ‚ç‚¹)     â”‚
â”‚                 â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    çŠ¶æ€æ±‡æŠ¥    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                   â”‚
        â”‚                                   â”‚
        â–¼                                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ä»»åŠ¡è°ƒåº¦  â”‚                        â”‚ ä»»åŠ¡æ‰§è¡Œ  â”‚
  â”‚ ç›‘æ§ç®¡ç†  â”‚                        â”‚ æ•°æ®åŒæ­¥  â”‚
  â”‚ é…ç½®ç®¡ç†  â”‚                        â”‚ çŠ¶æ€æ±‡æŠ¥  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. âš™ï¸ NodeèŠ‚ç‚¹å®‰è£…éƒ¨ç½²


### 2.1 ç¯å¢ƒå‡†å¤‡


**ğŸ“‹ ç³»ç»Ÿè¦æ±‚**
```
æ“ä½œç³»ç»Ÿï¼šLinux (æ¨èCentOS 7+/Ubuntu 16+)
Javaç‰ˆæœ¬ï¼šJDK 1.8+
å†…å­˜è¦æ±‚ï¼šæœ€å°2GBï¼Œæ¨è4GB+
ç£ç›˜ç©ºé—´ï¼šæœ€å°10GBï¼Œç”¨äºæ—¥å¿—å’Œç¼“å­˜
ç½‘ç»œè¦æ±‚ï¼šä¸Managerå’Œæ•°æ®åº“ç½‘ç»œäº’é€š
```

**ğŸ” ç¯å¢ƒæ£€æŸ¥å‘½ä»¤**
```bash
# æ£€æŸ¥Javaç‰ˆæœ¬
java -version

# æ£€æŸ¥å†…å­˜
free -h

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
ping manager-server-ip
telnet mysql-server-ip 3306
```

### 2.2 å®‰è£…åŒ…ä¸‹è½½


**ğŸ“¦ è·å–å®‰è£…åŒ…**
```bash
# åˆ›å»ºå®‰è£…ç›®å½•
mkdir -p /opt/otter
cd /opt/otter

# ä¸‹è½½Nodeå®‰è£…åŒ…
wget http://dl.alisz.org/otter/releases/otter.deployer-4.2.18.tar.gz

# è§£å‹å®‰è£…åŒ…
tar -zxvf otter.deployer-4.2.18.tar.gz
```

**ğŸ“ ç›®å½•ç»“æ„è¯´æ˜**
```
otter.deployer/
â”œâ”€â”€ bin/           # å¯åŠ¨è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ startup.sh    # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ stop.sh       # åœæ­¢è„šæœ¬
â”œâ”€â”€ conf/          # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ otter.properties  # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ lib/           # ä¾èµ–åº“ç›®å½•
â”œâ”€â”€ logs/          # æ—¥å¿—æ–‡ä»¶ç›®å½•
â””â”€â”€ tmp/           # ä¸´æ—¶æ–‡ä»¶ç›®å½•
```

### 2.3 åŸºç¡€å®‰è£…æ­¥éª¤


**ğŸ”§ å®‰è£…è¿‡ç¨‹**
```bash
# 1. è¿›å…¥è§£å‹ç›®å½•
cd otter.deployer

# 2. ç»™å¯åŠ¨è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x bin/*.sh

# 3. åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p logs

# 4. è®¾ç½®ç¯å¢ƒå˜é‡(å¯é€‰)
echo 'export OTTER_HOME=/opt/otter/otter.deployer' >> ~/.bashrc
source ~/.bashrc
```

---

## 3. ğŸ“ èŠ‚ç‚¹é…ç½®æ–‡ä»¶è¯¦è§£


### 3.1 ä¸»é…ç½®æ–‡ä»¶otter.properties


**ğŸ“‹ é…ç½®æ–‡ä»¶ä½ç½®**
```bash
# ä¸»é…ç½®æ–‡ä»¶è·¯å¾„
vim conf/otter.properties
```

**ğŸ”¸ åŸºç¡€é…ç½®é¡¹**
```properties
# ================================
# Managerè¿æ¥é…ç½®
# ================================
# ManageræœåŠ¡å™¨åœ°å€å’Œç«¯å£
otter.manager.address = 192.168.1.100:1099

# ================================  
# NodeèŠ‚ç‚¹æ ‡è¯†é…ç½®
# ================================
# èŠ‚ç‚¹å”¯ä¸€æ ‡è¯†ID(å¿…é¡»å”¯ä¸€)
otter.node.nid = 1

# èŠ‚ç‚¹åç§°(å»ºè®®ä½¿ç”¨ä¸»æœºå)
otter.node.name = node-server-01

# èŠ‚ç‚¹æè¿°ä¿¡æ¯
otter.node.desc = æ•°æ®åŒæ­¥èŠ‚ç‚¹1å·æœºå™¨
```

### 3.2 æœ¬åœ°ç¼“å­˜é…ç½®


**ğŸ’¾ ç¼“å­˜ç›¸å…³é…ç½®**
```properties
# ================================
# æœ¬åœ°ç¼“å­˜é…ç½®
# ================================
# æœ¬åœ°ç¼“å­˜ç›®å½•
otter.node.cache.dir = ${user.dir}/tmp

# ç¼“å­˜å¤§å°é™åˆ¶(MB)
otter.node.cache.size = 1024

# ç¼“å­˜æ¸…ç†æ—¶é—´é—´éš”(ç§’)
otter.node.cache.cleanup.interval = 3600
```

**ğŸ’¡ ç¼“å­˜é…ç½®è¯´æ˜**
```
ç¼“å­˜ä½œç”¨ï¼š
â€¢ å­˜å‚¨åŒæ­¥è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®
â€¢ æé«˜æ•°æ®å¤„ç†æ€§èƒ½
â€¢ å‡å°‘ç½‘ç»œä¼ è¾“å¼€é”€

ç¼“å­˜å¤§å°å»ºè®®ï¼š
â€¢ å°è§„æ¨¡åŒæ­¥ï¼š512MB
â€¢ ä¸­ç­‰è§„æ¨¡åŒæ­¥ï¼š1-2GB  
â€¢ å¤§è§„æ¨¡åŒæ­¥ï¼š4GB+
```

### 3.3 å¹¶å‘å‚æ•°é…ç½®


**âš¡ å¹¶å‘æ§åˆ¶é…ç½®**
```properties
# ================================
# å¹¶å‘å‚æ•°é…ç½®
# ================================
# å¹¶å‘çº¿ç¨‹æ•°
otter.node.thread.size = 5

# ä»»åŠ¡é˜Ÿåˆ—å¤§å°
otter.node.queue.size = 1000

# æ‰¹å¤„ç†å¤§å°
otter.node.batch.size = 50

# å¤„ç†è¶…æ—¶æ—¶é—´(ç§’)
otter.node.timeout = 300
```

**ğŸ“Š å¹¶å‘å‚æ•°è°ƒä¼˜æŒ‡å¯¼**

| å‚æ•° | **å»ºè®®å€¼** | **è¯´æ˜** | **è°ƒä¼˜åŸåˆ™** |
|------|----------|---------|-------------|
| `thread.size` | `5-20` | `å¹¶å‘çº¿ç¨‹æ•°` | `CPUæ ¸æ•°çš„1-2å€` |
| `queue.size` | `500-2000` | `ä»»åŠ¡é˜Ÿåˆ—å¤§å°` | `æ ¹æ®å†…å­˜å’Œä»»åŠ¡é‡è°ƒæ•´` |
| `batch.size` | `50-200` | `æ‰¹å¤„ç†å¤§å°` | `å¹³è¡¡æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨` |
| `timeout` | `300-600` | `è¶…æ—¶æ—¶é—´(ç§’)` | `æ ¹æ®ç½‘ç»œå’Œæ•°æ®é‡è°ƒæ•´` |

---

## 4. ğŸ”— Managerè¿æ¥é…ç½®


### 4.1 è¿æ¥å‚æ•°é…ç½®


**ğŸŒ Managerè¿æ¥è®¾ç½®**
```properties
# ================================
# Managerè¿æ¥è¯¦ç»†é…ç½®
# ================================
# Manager RMIæœåŠ¡åœ°å€
otter.manager.address = 192.168.1.100:1099

# è¿æ¥è¶…æ—¶æ—¶é—´(æ¯«ç§’)
otter.manager.connect.timeout = 30000

# è¯»å–è¶…æ—¶æ—¶é—´(æ¯«ç§’)  
otter.manager.read.timeout = 60000

# å¿ƒè·³é—´éš”(ç§’)
otter.manager.heartbeat.interval = 30

# é‡è¿é—´éš”(ç§’)
otter.manager.reconnect.interval = 10
```

### 4.2 è¿æ¥å®‰å…¨é…ç½®


**ğŸ”’ å®‰å…¨ç›¸å…³è®¾ç½®**
```properties
# ================================
# è¿æ¥å®‰å…¨é…ç½®
# ================================
# æ˜¯å¦å¯ç”¨SSL(å¯é€‰)
otter.manager.ssl.enable = false

# SSLè¯ä¹¦è·¯å¾„(å¯ç”¨SSLæ—¶é…ç½®)
otter.manager.ssl.keystore = 
otter.manager.ssl.truststore = 

# è®¿é—®ç”¨æˆ·å(å¦‚æœManagerå¯ç”¨äº†è®¤è¯)
otter.manager.username = 
otter.manager.password = 
```

### 4.3 è¿æ¥çŠ¶æ€ç›‘æ§


**ğŸ“Š è¿æ¥çŠ¶æ€æ£€æŸ¥**
```bash
# æ£€æŸ¥Managerè¿æ¥çŠ¶æ€
netstat -an | grep 1099

# æŸ¥çœ‹è¿æ¥æ—¥å¿—
tail -f logs/node.log | grep "manager"

# æµ‹è¯•Managerè¿æ¥
telnet 192.168.1.100 1099
```

---

## 5. ğŸš€ æ€§èƒ½ä¼˜åŒ–é…ç½®


### 5.1 å†…å­˜é…ç½®ä¼˜åŒ–


**ğŸ’¾ JVMå†…å­˜è®¾ç½®**
```bash
# ç¼–è¾‘å¯åŠ¨è„šæœ¬
vim bin/startup.sh

# ä¿®æ”¹JVMå‚æ•°
JAVA_OPTS="-server \
           -Xms2g \
           -Xmx4g \
           -XX:NewRatio=1 \
           -XX:SurvivorRatio=8 \
           -XX:+UseG1GC \
           -XX:MaxGCPauseMillis=200"
```

**ğŸ“ˆ å†…å­˜é…ç½®å»ºè®®**
```
å°è§„æ¨¡åŒæ­¥(QPS < 1000)ï¼š
â€¢ å †å†…å­˜ï¼š2GB-4GB
â€¢ æ–°ç”Ÿä»£æ¯”ä¾‹ï¼š1:1
â€¢ GCï¼šä½¿ç”¨G1GC

ä¸­ç­‰è§„æ¨¡åŒæ­¥(QPS 1000-5000)ï¼š
â€¢ å †å†…å­˜ï¼š4GB-8GB  
â€¢ æ–°ç”Ÿä»£æ¯”ä¾‹ï¼š1:1
â€¢ GCï¼šä½¿ç”¨G1GC

å¤§è§„æ¨¡åŒæ­¥(QPS > 5000)ï¼š
â€¢ å †å†…å­˜ï¼š8GB+
â€¢ æ–°ç”Ÿä»£æ¯”ä¾‹ï¼š1:1
â€¢ GCï¼šä½¿ç”¨G1GCï¼Œè°ƒä¼˜GCå‚æ•°
```

### 5.2 ç½‘ç»œé…ç½®è°ƒä¼˜


**ğŸŒ ç½‘ç»œä¼˜åŒ–è®¾ç½®**
```properties
# ================================
# ç½‘ç»œä¼˜åŒ–é…ç½®
# ================================
# ç½‘ç»œè¿æ¥æ± å¤§å°
otter.node.network.pool.size = 10

# Socketç¼“å†²åŒºå¤§å°(KB)
otter.node.network.socket.buffer = 64

# ç½‘ç»œIOè¶…æ—¶(æ¯«ç§’)
otter.node.network.io.timeout = 30000

# è¿æ¥ä¿æ´»
otter.node.network.keepalive = true
```

### 5.3 ç£ç›˜IOä¼˜åŒ–


**ğŸ’¿ ç£ç›˜æ€§èƒ½é…ç½®**
```properties
# ================================
# ç£ç›˜IOä¼˜åŒ–é…ç½®  
# ================================
# æ•°æ®æ–‡ä»¶ç¼“å†²åŒºå¤§å°(KB)
otter.node.file.buffer.size = 256

# æ‰¹é‡å†™å…¥å¤§å°
otter.node.file.batch.write = 1000

# æ•°æ®å‹ç¼©å¯ç”¨
otter.node.file.compress = true

# ä¸´æ—¶æ–‡ä»¶æ¸…ç†é—´éš”(ç§’)
otter.node.file.cleanup.interval = 1800
```

---

## 6. ğŸ—ï¸ å¤šèŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²


### 6.1 é›†ç¾¤æ¶æ„è®¾è®¡


**ğŸ”— é›†ç¾¤éƒ¨ç½²æ¶æ„**
```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Otter Manager  â”‚
                  â”‚  (ç®¡ç†ä¸­å¿ƒ)      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚             â”‚
              â–¼             â–¼             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Otter Node1 â”‚ â”‚ Otter Node2 â”‚ â”‚ Otter Node3 â”‚
    â”‚ 192.168.1.10â”‚ â”‚ 192.168.1.11â”‚ â”‚ 192.168.1.12â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 èŠ‚ç‚¹æ ‡è¯†é…ç½®


**ğŸ·ï¸ å¤šèŠ‚ç‚¹é…ç½®å·®å¼‚**
```bash
# Node1é…ç½® (192.168.1.10)
echo "otter.node.nid = 1" >> conf/otter.properties
echo "otter.node.name = node-01" >> conf/otter.properties

# Node2é…ç½® (192.168.1.11)  
echo "otter.node.nid = 2" >> conf/otter.properties
echo "otter.node.name = node-02" >> conf/otter.properties

# Node3é…ç½® (192.168.1.12)
echo "otter.node.nid = 3" >> conf/otter.properties  
echo "otter.node.name = node-03" >> conf/otter.properties
```

> ğŸ’¡ **é‡è¦æé†’**ï¼šæ¯ä¸ªNodeèŠ‚ç‚¹çš„nidå¿…é¡»å”¯ä¸€ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†²çª

### 6.3 è´Ÿè½½å‡è¡¡é…ç½®


**âš–ï¸ ä»»åŠ¡åˆ†é…ç­–ç•¥**
```properties
# ================================
# è´Ÿè½½å‡è¡¡é…ç½®
# ================================
# èŠ‚ç‚¹æƒé‡(æ•°å€¼è¶Šå¤§ï¼Œåˆ†é…ä»»åŠ¡è¶Šå¤š)
otter.node.weight = 100

# æœ€å¤§ä»»åŠ¡æ•°é™åˆ¶
otter.node.max.tasks = 10

# èŠ‚ç‚¹çŠ¶æ€æ±‡æŠ¥é—´éš”(ç§’)
otter.node.status.report.interval = 60
```

### 6.4 é›†ç¾¤å¯åŠ¨é¡ºåº


**ğŸš€ æ­£ç¡®çš„å¯åŠ¨æµç¨‹**
```bash
# 1. é¦–å…ˆå¯åŠ¨Manager
# (åœ¨ManageræœåŠ¡å™¨ä¸Šæ‰§è¡Œ)

# 2. ç„¶åä¾æ¬¡å¯åŠ¨å„ä¸ªNodeèŠ‚ç‚¹
# Node1
ssh root@192.168.1.10 "cd /opt/otter/otter.deployer && bin/startup.sh"

# Node2  
ssh root@192.168.1.11 "cd /opt/otter/otter.deployer && bin/startup.sh"

# Node3
ssh root@192.168.1.12 "cd /opt/otter/otter.deployer && bin/startup.sh"
```

---

## 7. ğŸ“Š èŠ‚ç‚¹ç›‘æ§ä¸ç»´æŠ¤


### 7.1 èŠ‚ç‚¹æ³¨å†Œæµç¨‹


**ğŸ“ æ³¨å†Œè¿‡ç¨‹è¯´æ˜**
```
Nodeå¯åŠ¨åçš„æ³¨å†Œæµç¨‹ï¼š
1. Nodeå¯åŠ¨ â†’ è¯»å–é…ç½®æ–‡ä»¶
2. è¿æ¥Manager â†’ å»ºç«‹RMIè¿æ¥  
3. æ³¨å†ŒèŠ‚ç‚¹ä¿¡æ¯ â†’ å‘é€èŠ‚ç‚¹IDå’ŒåŸºæœ¬ä¿¡æ¯
4. Managerç¡®è®¤ â†’ è¿”å›æ³¨å†ŒæˆåŠŸä¿¡æ¯
5. å¼€å§‹å·¥ä½œ â†’ ç­‰å¾…ä»»åŠ¡åˆ†é…
```

**ğŸ” æ³¨å†ŒçŠ¶æ€æ£€æŸ¥**
```bash
# æ£€æŸ¥èŠ‚ç‚¹æ³¨å†Œæ—¥å¿—
grep "register" logs/node.log

# æŸ¥çœ‹Managerä¸­çš„èŠ‚ç‚¹çŠ¶æ€
# (åœ¨Managerçš„Webç•Œé¢ä¸­æŸ¥çœ‹)
```

### 7.2 èŠ‚ç‚¹çŠ¶æ€ç›‘æ§


**ğŸ“ˆ ç›‘æ§æŒ‡æ ‡è¯´æ˜**
```
å…³é”®ç›‘æ§æŒ‡æ ‡ï¼š
â€¢ èŠ‚ç‚¹çŠ¶æ€ï¼šåœ¨çº¿/ç¦»çº¿
â€¢ CPUä½¿ç”¨ç‡ï¼šå¤„ç†èƒ½åŠ›æŒ‡æ ‡
â€¢ å†…å­˜ä½¿ç”¨ç‡ï¼šèµ„æºæ¶ˆè€—æŒ‡æ ‡  
â€¢ ä»»åŠ¡æ‰§è¡Œæ•°ï¼šå·¥ä½œè´Ÿè½½æŒ‡æ ‡
â€¢ é”™è¯¯ç‡ï¼šç¨³å®šæ€§æŒ‡æ ‡
```

**ğŸ“Š çŠ¶æ€ç›‘æ§å‘½ä»¤**
```bash
# æŸ¥çœ‹Nodeè¿›ç¨‹çŠ¶æ€
ps aux | grep otter

# æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€
netstat -tlnp | grep java

# æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨
top -p `pgrep -f otter`

# æŸ¥çœ‹æ—¥å¿—å®æ—¶è¾“å‡º
tail -f logs/node.log
```

### 7.3 æ—¥å¿—ç®¡ç†ä¸åˆ†æ


**ğŸ“‹ æ—¥å¿—æ–‡ä»¶è¯´æ˜**
```
logs/
â”œâ”€â”€ node.log        # ä¸»æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ error.log       # é”™è¯¯æ—¥å¿—  
â”œâ”€â”€ performance.log # æ€§èƒ½æ—¥å¿—
â””â”€â”€ gc.log         # GCæ—¥å¿—(å¦‚æœå¯ç”¨)
```

**ğŸ” å¸¸ç”¨æ—¥å¿—åˆ†æ**
```bash
# æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
grep -i "error\|exception" logs/node.log

# æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡
grep "performance" logs/performance.log

# æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œæƒ…å†µ
grep "task" logs/node.log | tail -20

# ç»Ÿè®¡é”™è¯¯æ¬¡æ•°
grep -c "ERROR" logs/node.log
```

### 7.4 èŠ‚ç‚¹ç»´æŠ¤æ“ä½œ


**ğŸ”§ å¸¸è§ç»´æŠ¤ä»»åŠ¡**
```bash
# é‡å¯èŠ‚ç‚¹
bin/stop.sh
sleep 5
bin/startup.sh

# æ¸…ç†æ—¥å¿—æ–‡ä»¶
find logs/ -name "*.log" -mtime +7 -delete

# æ¸…ç†ç¼“å­˜æ–‡ä»¶
rm -rf tmp/*

# å¤‡ä»½é…ç½®æ–‡ä»¶
cp conf/otter.properties conf/otter.properties.backup
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ NodeèŠ‚ç‚¹ä½œç”¨ï¼šOtterç³»ç»Ÿçš„å®é™…å·¥ä½œæ‰§è¡Œå™¨
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼šotter.propertiesæ˜¯æ ¸å¿ƒé…ç½®æ–‡ä»¶
ğŸ”¸ èŠ‚ç‚¹æ ‡è¯†ï¼šæ¯ä¸ªNodeçš„nidå¿…é¡»å…¨å±€å”¯ä¸€
ğŸ”¸ Managerè¿æ¥ï¼šNodeéœ€è¦ä¸Managerä¿æŒç¨³å®šè¿æ¥
ğŸ”¸ æ€§èƒ½è°ƒä¼˜ï¼šåˆç†é…ç½®å†…å­˜ã€å¹¶å‘ã€ç½‘ç»œå‚æ•°
```

### 8.2 å…³é”®é…ç½®è¦ç‚¹


**ğŸ”¹ åŸºç¡€é…ç½®æ¸…å•**
```
å¿…é…é¡¹ç›®ï¼š
âœ… Manageråœ°å€ (otter.manager.address)
âœ… èŠ‚ç‚¹ID (otter.node.nid) 
âœ… èŠ‚ç‚¹åç§° (otter.node.name)
âœ… ç¼“å­˜ç›®å½• (otter.node.cache.dir)

æ€§èƒ½é…ç½®ï¼š
âœ… çº¿ç¨‹æ•° (otter.node.thread.size)
âœ… æ‰¹å¤„ç†å¤§å° (otter.node.batch.size)  
âœ… JVMå†…å­˜å‚æ•°
âœ… ç½‘ç»œè¶…æ—¶è®¾ç½®
```

**ğŸ”¹ å¸¸è§é—®é¢˜é¿å…**
```
é…ç½®é”™è¯¯ï¼š
âŒ å¤šä¸ªNodeä½¿ç”¨ç›¸åŒçš„nid
âŒ Manageråœ°å€é…ç½®é”™è¯¯
âŒ å†…å­˜é…ç½®è¿‡å°å¯¼è‡´OOM
âŒ ç½‘ç»œè¶…æ—¶è®¾ç½®è¿‡çŸ­

éƒ¨ç½²é”™è¯¯ï¼š
âŒ æœªå…ˆå¯åŠ¨Managerå°±å¯åŠ¨Node
âŒ é˜²ç«å¢™é˜»æ–­Managerè¿æ¥
âŒ Javaç‰ˆæœ¬ä¸å…¼å®¹
âŒ æƒé™é…ç½®ä¸æ­£ç¡®
```

### 8.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ éƒ¨ç½²å®è·µ**
- **ç¯å¢ƒéš”ç¦»**ï¼šç”Ÿäº§ã€æµ‹è¯•ç¯å¢ƒåˆ†ç¦»éƒ¨ç½²
- **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨é…ç½®æ¨¡æ¿ï¼Œç»Ÿä¸€ç®¡ç†
- **ç›‘æ§å‘Šè­¦**ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»
- **å®šæœŸç»´æŠ¤**ï¼šå®šæœŸæ¸…ç†æ—¥å¿—å’Œç¼“å­˜æ–‡ä»¶

**ğŸ”§ æ€§èƒ½ä¼˜åŒ–**
- **èµ„æºè§„åˆ’**ï¼šæ ¹æ®åŒæ­¥é‡åˆç†åˆ†é…èµ„æº
- **å‚æ•°è°ƒä¼˜**ï¼šæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´å¹¶å‘å‚æ•°
- **è´Ÿè½½å‡è¡¡**ï¼šå¤šèŠ‚ç‚¹éƒ¨ç½²æ—¶æ³¨æ„è´Ÿè½½åˆ†é…
- **å®¹é‡è§„åˆ’**ï¼šé¢„ç•™è¶³å¤Ÿçš„æ‰©å±•ç©ºé—´

**ğŸ“Š è¿ç»´ç®¡ç†**
- **æ—¥å¿—ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥é”™è¯¯æ—¥å¿—
- **æ€§èƒ½ç›‘æ§**ï¼šå…³æ³¨CPUã€å†…å­˜ã€ç½‘ç»œæŒ‡æ ‡
- **å¤‡ä»½ç­–ç•¥**ï¼šé‡è¦é…ç½®æ–‡ä»¶è¦å¤‡ä»½
- **æ•…éšœå¤„ç†**ï¼šå»ºç«‹æ•…éšœå¤„ç†æµç¨‹

**æ ¸å¿ƒè®°å¿†**ï¼š
- Nodeæ˜¯Otterçš„å·¥ä½œèŠ‚ç‚¹ï¼Œè´Ÿè´£å®é™…çš„æ•°æ®åŒæ­¥æ‰§è¡Œ
- é…ç½®æ–‡ä»¶æ˜¯å…³é”®ï¼Œç‰¹åˆ«æ˜¯Managerè¿æ¥å’ŒèŠ‚ç‚¹æ ‡è¯†
- æ€§èƒ½ä¼˜åŒ–è¦ç»¼åˆè€ƒè™‘å†…å­˜ã€å¹¶å‘ã€ç½‘ç»œç­‰å› ç´ 
- å¤šèŠ‚ç‚¹éƒ¨ç½²æ—¶è¦æ³¨æ„èŠ‚ç‚¹å”¯ä¸€æ€§å’Œè´Ÿè½½å‡è¡¡