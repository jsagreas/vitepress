---
title: 10ã€Canalè¿‡æ»¤è§„åˆ™é…ç½®
---
## ğŸ“š ç›®å½•

1. [Canalè¿‡æ»¤æœºåˆ¶æ¦‚è¿°](#1-Canalè¿‡æ»¤æœºåˆ¶æ¦‚è¿°)
2. [æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•åŸºç¡€](#2-æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•åŸºç¡€)
3. [æ•°æ®åº“çº§åˆ«è¿‡æ»¤](#3-æ•°æ®åº“çº§åˆ«è¿‡æ»¤)
4. [è¡¨çº§åˆ«è¿‡æ»¤è§„åˆ™](#4-è¡¨çº§åˆ«è¿‡æ»¤è§„åˆ™)
5. [å­—æ®µçº§åˆ«è¿‡æ»¤](#5-å­—æ®µçº§åˆ«è¿‡æ»¤)
6. [æ“ä½œç±»å‹è¿‡æ»¤](#6-æ“ä½œç±»å‹è¿‡æ»¤)
7. [å¤šè¡¨è”åˆè¿‡æ»¤](#7-å¤šè¡¨è”åˆè¿‡æ»¤)
8. [åŠ¨æ€è¿‡æ»¤è§„åˆ™](#8-åŠ¨æ€è¿‡æ»¤è§„åˆ™)
9. [è¿‡æ»¤è§„åˆ™æµ‹è¯•](#9-è¿‡æ»¤è§„åˆ™æµ‹è¯•)
10. [è¿‡æ»¤æ€§èƒ½ä¼˜åŒ–](#10-è¿‡æ»¤æ€§èƒ½ä¼˜åŒ–)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Canalè¿‡æ»¤æœºåˆ¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Canalè¿‡æ»¤


**ç®€å•ç†è§£**ï¼šCanalè¿‡æ»¤å°±åƒä¸€ä¸ª**ç­›å­**ï¼Œå¸®ä½ ä»MySQLçš„æ‰€æœ‰æ•°æ®å˜åŒ–ä¸­ï¼ŒåªæŒ‘å‡ºä½ çœŸæ­£éœ€è¦çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚

```
MySQLæ•°æ®åº“å˜åŒ–ï¼š        Canalè¿‡æ»¤å™¨ï¼š           æœ€ç»ˆè¾“å‡ºï¼š
ç”¨æˆ·è¡¨æ›´æ–°    â”€â”€â”                        â”Œâ”€â”€ ç”¨æˆ·è¡¨æ›´æ–°
è®¢å•è¡¨æ–°å¢    â”€â”€â”¤â”€â”€ [è¿‡æ»¤è§„åˆ™å¤„ç†] â”€â”€â”¤â”€â”€ è®¢å•è¡¨æ–°å¢  
æ—¥å¿—è¡¨åˆ é™¤    â”€â”€â”¤                        â”‚   (æ—¥å¿—è¡¨è¢«è¿‡æ»¤æ‰)
ç³»ç»Ÿè¡¨ä¿®æ”¹    â”€â”€â”˜                        â””â”€â”€ (ç³»ç»Ÿè¡¨è¢«è¿‡æ»¤æ‰)
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦è¿‡æ»¤


**å®é™…åœºæ™¯ä¸¾ä¾‹**ï¼š
- ğŸª **ç”µå•†ç³»ç»Ÿ**ï¼šåªå…³å¿ƒç”¨æˆ·ã€è®¢å•ã€å•†å“è¡¨çš„å˜åŒ–ï¼Œä¸éœ€è¦ç›‘æ§ç³»ç»Ÿæ—¥å¿—è¡¨
- ğŸ“Š **æ•°æ®åˆ†æ**ï¼šåªéœ€è¦ç»Ÿè®¡ç›¸å…³çš„è¡¨ï¼Œè¿‡æ»¤æ‰ä¸´æ—¶è¡¨å’Œé…ç½®è¡¨
- ğŸ”„ **æ•°æ®åŒæ­¥**ï¼šåªåŒæ­¥æ ¸å¿ƒä¸šåŠ¡æ•°æ®ï¼Œé¿å…åŒæ­¥æ— å…³æ•°æ®

**ä¸è¿‡æ»¤çš„é—®é¢˜**ï¼š
- âŒ **æ€§èƒ½æµªè´¹**ï¼šå¤„ç†å¤§é‡æ— ç”¨æ•°æ®
- âŒ **å­˜å‚¨å‹åŠ›**ï¼šå­˜å‚¨ä¸éœ€è¦çš„å˜æ›´è®°å½•
- âŒ **ç½‘ç»œå¼€é”€**ï¼šä¼ è¾“å†—ä½™æ•°æ®

### 1.3 Canalè¿‡æ»¤çš„å·¥ä½œåŸç†


```
MySQL Binlog â†’ Canal Server â†’ è¿‡æ»¤è§„åˆ™åŒ¹é… â†’ è¾“å‡ºåˆ°ä¸‹æ¸¸

è¿‡æ»¤åˆ¤æ–­æµç¨‹ï¼š
1. è¯»å–binlogäº‹ä»¶
2. æå–åº“åã€è¡¨åã€å­—æ®µåã€æ“ä½œç±»å‹
3. ä¸é…ç½®çš„è¿‡æ»¤è§„åˆ™è¿›è¡ŒåŒ¹é…
4. åŒ¹é…æˆåŠŸ â†’ æ”¾è¡Œï¼ŒåŒ¹é…å¤±è´¥ â†’ ä¸¢å¼ƒ
```

---

## 2. ğŸ“ æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•åŸºç¡€


### 2.1 æ­£åˆ™è¡¨è¾¾å¼åœ¨Canalä¸­çš„ä½œç”¨


Canalçš„è¿‡æ»¤è§„åˆ™ä¸»è¦åŸºäº**æ­£åˆ™è¡¨è¾¾å¼**æ¥åŒ¹é…æ•°æ®åº“åã€è¡¨åç­‰ã€‚æ­£åˆ™è¡¨è¾¾å¼å°±åƒä¸€ä¸ª**æ¨¡å¼åŒ¹é…å™¨**ï¼Œèƒ½å¤Ÿçµæ´»åœ°æè¿°ä½ æƒ³è¦çš„æ•°æ®è§„å¾‹ã€‚

### 2.2 Canalå¸¸ç”¨æ­£åˆ™è¯­æ³•


| ç¬¦å· | å«ä¹‰ | ç¤ºä¾‹ | åŒ¹é…ç»“æœ |
|------|------|------|----------|
| `.` | åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ | `user.` | user1, userA, user_ |
| `*` | å‰é¢å­—ç¬¦å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ | `user.*` | user, user123, user_info |
| `+` | å‰é¢å­—ç¬¦å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ | `user.+` | user1, user123 (ä¸åŒ…æ‹¬user) |
| `?` | å‰é¢å­—ç¬¦å‡ºç°0æ¬¡æˆ–1æ¬¡ | `users?` | user, users |
| `^` | è¡Œçš„å¼€å§‹ | `^user` | userå¼€å¤´çš„å­—ç¬¦ä¸² |
| `$` | è¡Œçš„ç»“æŸ | `user$` | userç»“å°¾çš„å­—ç¬¦ä¸² |
| `[]` | å­—ç¬¦é›†åˆ | `user[0-9]` | user0, user1, user9 |
| `|` | æˆ–è¿ç®— | `user|order` | user æˆ– order |

### 2.3 Canalè¿‡æ»¤ä¸­çš„å®ç”¨æ­£åˆ™


**å¸¸è§è¿‡æ»¤æ¨¡å¼**ï¼š
```java
// åŒ¹é…æ‰€æœ‰è¡¨
.*\\..*

// åŒ¹é…ç‰¹å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨
shop_db\\..*

// åŒ¹é…å¤šä¸ªæ•°æ®åº“
(shop_db|user_db)\\..*

// åŒ¹é…è¡¨ååŒ…å«ç‰¹å®šå‰ç¼€
.*\\.user_.*

// åŒ¹é…ç‰¹å®šè¡¨
shop_db\\.(user|order|product)

// æ’é™¤ç‰¹å®šè¡¨ï¼ˆåœ¨canal.propertiesä¸­é…ç½®ï¼‰
^(?!.*\\.(log_|temp_|backup_)).*
```

> **ğŸ’¡ æ³¨æ„**ï¼šåœ¨Canalé…ç½®ä¸­ï¼Œç‚¹å·ï¼ˆ.ï¼‰éœ€è¦ç”¨åŒåæ–œæ è½¬ä¹‰ï¼š`\\.`

---

## 3. ğŸ—„ï¸ æ•°æ®åº“çº§åˆ«è¿‡æ»¤


### 3.1 æ•°æ®åº“çº§åˆ«è¿‡æ»¤çš„æ¦‚å¿µ


æ•°æ®åº“çº§åˆ«è¿‡æ»¤æ˜¯**æœ€ç²—ç²’åº¦**çš„è¿‡æ»¤æ–¹å¼ï¼Œå†³å®šCanalç›‘æ§å“ªäº›æ•°æ®åº“ï¼Œå¿½ç•¥å“ªäº›æ•°æ®åº“ã€‚

### 3.2 é…ç½®æ•°æ®åº“è¿‡æ»¤


åœ¨`instance.properties`æ–‡ä»¶ä¸­é…ç½®ï¼š

```properties
# ç›‘æ§å•ä¸ªæ•°æ®åº“
canal.instance.filter.regex=shop_db\\..*

# ç›‘æ§å¤šä¸ªæ•°æ®åº“
canal.instance.filter.regex=(shop_db|user_db|order_db)\\..*

# ç›‘æ§æ‰€æœ‰æ•°æ®åº“ï¼ˆé»˜è®¤ï¼‰
canal.instance.filter.regex=.*\\..*

# æ’é™¤ç‰¹å®šæ•°æ®åº“
canal.instance.filter.black.regex=(mysql|information_schema|performance_schema|sys)\\..*
```

### 3.3 æ•°æ®åº“è¿‡æ»¤çš„å®é™…åº”ç”¨


**åœºæ™¯1ï¼šç”µå•†ç³»ç»Ÿæ•°æ®åº“åˆ’åˆ†**
```
æ•°æ®åº“ç»“æ„ï¼š
â”œâ”€â”€ shop_core     (æ ¸å¿ƒä¸šåŠ¡åº“)
â”œâ”€â”€ shop_log      (æ—¥å¿—åº“)
â”œâ”€â”€ shop_temp     (ä¸´æ—¶åº“)
â”œâ”€â”€ shop_backup   (å¤‡ä»½åº“)
â””â”€â”€ mysql         (ç³»ç»Ÿåº“)

è¿‡æ»¤é…ç½®ï¼š
# åªç›‘æ§æ ¸å¿ƒä¸šåŠ¡åº“
canal.instance.filter.regex=shop_core\\..*

# æ’é™¤ç³»ç»Ÿå’Œä¸´æ—¶åº“
canal.instance.filter.black.regex=(shop_log|shop_temp|shop_backup|mysql|information_schema)\\..*
```

**åœºæ™¯2ï¼šå¤šç§Ÿæˆ·ç³»ç»Ÿ**
```
æ•°æ®åº“ç»“æ„ï¼š
â”œâ”€â”€ tenant_001    (ç§Ÿæˆ·1)
â”œâ”€â”€ tenant_002    (ç§Ÿæˆ·2)
â”œâ”€â”€ tenant_003    (ç§Ÿæˆ·3)
â””â”€â”€ platform      (å¹³å°åº“)

è¿‡æ»¤é…ç½®ï¼š
# ç›‘æ§æ‰€æœ‰ç§Ÿæˆ·åº“
canal.instance.filter.regex=tenant_.*\\..*

# åªç›‘æ§ç‰¹å®šç§Ÿæˆ·
canal.instance.filter.regex=(tenant_001|tenant_002)\\..*
```

---

## 4. ğŸ“‹ è¡¨çº§åˆ«è¿‡æ»¤è§„åˆ™


### 4.1 è¡¨çº§åˆ«è¿‡æ»¤çš„é‡è¦æ€§


è¡¨çº§åˆ«è¿‡æ»¤æ˜¯æœ€å¸¸ç”¨çš„è¿‡æ»¤æ–¹å¼ï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬åªå…³å¿ƒæ•°æ®åº“ä¸­çš„**ç‰¹å®šä¸šåŠ¡è¡¨**ï¼Œè€Œä¸æ˜¯æ‰€æœ‰è¡¨ã€‚

### 4.2 åŸºç¡€è¡¨è¿‡æ»¤é…ç½®


```properties
# ç›‘æ§ç‰¹å®šè¡¨
canal.instance.filter.regex=shop_db\\.(user|order|product)

# ç›‘æ§è¡¨ååŒ…å«ç‰¹å®šå‰ç¼€çš„è¡¨
canal.instance.filter.regex=shop_db\\.t_.*

# ç›‘æ§è¡¨ååŒ…å«ç‰¹å®šåç¼€çš„è¡¨
canal.instance.filter.regex=shop_db\\..*_info

# æ’é™¤ç‰¹å®šè¡¨
canal.instance.filter.black.regex=shop_db\\.(log_.*|temp_.*|backup_.*)
```

### 4.3 å¤æ‚è¡¨è¿‡æ»¤è§„åˆ™


**æŒ‰è¡¨åæ¨¡å¼è¿‡æ»¤**ï¼š
```properties
# ç›‘æ§ç”¨æˆ·ç›¸å…³çš„æ‰€æœ‰è¡¨
canal.instance.filter.regex=shop_db\\.user.*

# ç›‘æ§æ ¸å¿ƒä¸šåŠ¡è¡¨ï¼ˆç”¨æˆ·ã€è®¢å•ã€å•†å“ã€æ”¯ä»˜ï¼‰
canal.instance.filter.regex=shop_db\\.(user|order|product|payment).*

# æ’é™¤æ—¥å¿—ã€ä¸´æ—¶ã€ç»Ÿè®¡è¡¨
canal.instance.filter.black.regex=shop_db\\.(.*_log|.*_temp|.*_stat|.*_backup)
```

**æŒ‰ä¸šåŠ¡æ¨¡å—è¿‡æ»¤**ï¼š
```
ä¸šåŠ¡è¡¨åˆ†ç±»ï¼š
ç”¨æˆ·æ¨¡å—ï¼šuser, user_profile, user_auth
è®¢å•æ¨¡å—ï¼šorder, order_item, order_payment
å•†å“æ¨¡å—ï¼šproduct, product_category, product_inventory
ç³»ç»Ÿæ¨¡å—ï¼šsys_config, sys_log, sys_monitor

é…ç½®ç¤ºä¾‹ï¼š
# åªç›‘æ§ç”¨æˆ·å’Œè®¢å•æ¨¡å—
canal.instance.filter.regex=shop_db\\.(user.*|order.*)

# æ’é™¤ç³»ç»Ÿæ¨¡å—
canal.instance.filter.black.regex=shop_db\\.sys_.*
```

### 4.4 è¡¨è¿‡æ»¤çš„æœ€ä½³å®è·µ


**å®è·µåŸåˆ™**ï¼š
```
âœ… æ˜ç¡®ä¸šåŠ¡è¾¹ç•Œï¼šæ¸…æ¥šå“ªäº›è¡¨æ˜¯æ ¸å¿ƒä¸šåŠ¡è¡¨
âœ… ä½¿ç”¨ç™½åå•ï¼šä¼˜å…ˆé…ç½®éœ€è¦ç›‘æ§çš„è¡¨
âœ… åˆç†åˆ†ç»„ï¼šæŒ‰ä¸šåŠ¡æ¨¡å—ç»„ç»‡è¿‡æ»¤è§„åˆ™
âœ… å®šæœŸç»´æŠ¤ï¼šéšç€ä¸šåŠ¡å‘å±•è°ƒæ•´è¿‡æ»¤è§„åˆ™
```

**é…ç½®æ¨¡æ¿**ï¼š
```properties
# æ¨èé…ç½®æ¨¡å¼
# 1. æ˜ç¡®æŒ‡å®šéœ€è¦ç›‘æ§çš„æ ¸å¿ƒè¡¨
canal.instance.filter.regex=shop_db\\.(user|user_profile|order|order_item|product|product_inventory)

# 2. æˆ–è€…æ’é™¤æ˜ç¡®ä¸éœ€è¦çš„è¡¨
canal.instance.filter.black.regex=shop_db\\.(.*_log|.*_temp|.*_backup|.*_cache|sys_.*)
```

---

## 5. ğŸ” å­—æ®µçº§åˆ«è¿‡æ»¤


### 5.1 å­—æ®µè¿‡æ»¤çš„åº”ç”¨åœºæ™¯


å­—æ®µçº§åˆ«è¿‡æ»¤ç”¨äºåœ¨è¡¨çº§åˆ«ä¹‹ä¸‹è¿›ä¸€æ­¥**ç²¾ç»†åŒ–æ§åˆ¶**ï¼Œåªå…³æ³¨è¡¨ä¸­çš„ç‰¹å®šå­—æ®µå˜åŒ–ã€‚

**å…¸å‹åº”ç”¨**ï¼š
- ğŸ” **æ•æ„Ÿæ•°æ®è¿‡æ»¤**ï¼šè¿‡æ»¤æ‰å¯†ç ã€èº«ä»½è¯ç­‰æ•æ„Ÿå­—æ®µ
- ğŸ“Š **æ ¸å¿ƒæŒ‡æ ‡ç›‘æ§**ï¼šåªç›‘æ§è®¢å•é‡‘é¢ã€ç”¨æˆ·çŠ¶æ€ç­‰å…³é”®å­—æ®µ
- ğŸ¯ **å‡å°‘æ•°æ®ä¼ è¾“**ï¼šåªä¼ è¾“å¿…è¦å­—æ®µï¼Œå‡å°‘ç½‘ç»œå¼€é”€

### 5.2 Canalä¸­çš„å­—æ®µè¿‡æ»¤å®ç°


Canalæœ¬èº«åœ¨é…ç½®æ–‡ä»¶å±‚é¢**ä¸ç›´æ¥æ”¯æŒå­—æ®µçº§è¿‡æ»¤**ï¼Œä½†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

**æ–¹æ³•1ï¼šåœ¨å®¢æˆ·ç«¯å¤„ç†**
```java
// åœ¨Canalå®¢æˆ·ç«¯ä»£ç ä¸­è¿‡æ»¤å­—æ®µ
public void processEntry(Entry entry) {
    if (entry.getEntryType() == EntryType.ROWDATA) {
        RowChange rowChange = RowChange.parseFrom(entry.getStoreValue());
        
        for (RowData rowData : rowChange.getRowDatasList()) {
            // è¿‡æ»¤æ•æ„Ÿå­—æ®µ
            List<Column> filteredColumns = rowData.getAfterColumnsList()
                .stream()
                .filter(column -> !isSensitiveField(column.getName()))
                .collect(Collectors.toList());
            
            // å¤„ç†è¿‡æ»¤åçš„å­—æ®µ
            processFilteredColumns(filteredColumns);
        }
    }
}

private boolean isSensitiveField(String fieldName) {
    // å®šä¹‰éœ€è¦è¿‡æ»¤çš„æ•æ„Ÿå­—æ®µ
    Set<String> sensitiveFields = Set.of("password", "id_card", "phone", "email");
    return sensitiveFields.contains(fieldName.toLowerCase());
}
```

**æ–¹æ³•2ï¼šä½¿ç”¨Canal Adminçš„è¿‡æ»¤åŠŸèƒ½**
```json
{
  "name": "example",
  "topic": "example",
  "groupId": "g1",
  "servers": "127.0.0.1:9092",
  "retries": 0,
  "fieldsFilterMap": {
    "shop_db.user": ["id", "name", "status"],  // åªä¿ç•™è¿™äº›å­—æ®µ
    "shop_db.order": ["order_id", "user_id", "amount", "status"]
  },
  "fieldsBlackFilterMap": {
    "shop_db.user": ["password", "id_card"]  // æ’é™¤è¿™äº›å­—æ®µ
  }
}
```

### 5.3 å­—æ®µè¿‡æ»¤çš„å®ç°ç­–ç•¥


**ç™½åå•ç­–ç•¥**ï¼ˆæ¨èï¼‰ï¼š
```java
// å®šä¹‰æ¯ä¸ªè¡¨éœ€è¦å…³æ³¨çš„å­—æ®µ
Map<String, Set<String>> whiteListFields = Map.of(
    "user", Set.of("id", "name", "email", "status", "created_time"),
    "order", Set.of("order_id", "user_id", "amount", "status", "created_time"),
    "product", Set.of("id", "name", "price", "stock", "status")
);

private List<Column> filterColumnsByWhitelist(String tableName, List<Column> columns) {
    Set<String> allowedFields = whiteListFields.get(tableName);
    if (allowedFields == null) {
        return columns; // å¦‚æœæ²¡æœ‰é…ç½®ï¼Œè¿”å›æ‰€æœ‰å­—æ®µ
    }
    
    return columns.stream()
        .filter(column -> allowedFields.contains(column.getName()))
        .collect(Collectors.toList());
}
```

**é»‘åå•ç­–ç•¥**ï¼š
```java
// å®šä¹‰éœ€è¦æ’é™¤çš„æ•æ„Ÿå­—æ®µ
Map<String, Set<String>> blackListFields = Map.of(
    "user", Set.of("password", "id_card", "phone"),
    "order", Set.of("payment_info", "delivery_address"),
    "product", Set.of("cost_price", "supplier_info")
);

private List<Column> filterColumnsByBlacklist(String tableName, List<Column> columns) {
    Set<String> blockedFields = blackListFields.getOrDefault(tableName, Set.of());
    
    return columns.stream()
        .filter(column -> !blockedFields.contains(column.getName()))
        .collect(Collectors.toList());
}
```

---

## 6. âš™ï¸ æ“ä½œç±»å‹è¿‡æ»¤


### 6.1 DMLæ“ä½œè¿‡æ»¤


**DMLæ“ä½œç±»å‹**åŒ…æ‹¬ï¼š`INSERT`ï¼ˆæ–°å¢ï¼‰ã€`UPDATE`ï¼ˆæ›´æ–°ï¼‰ã€`DELETE`ï¼ˆåˆ é™¤ï¼‰

**åº”ç”¨åœºæ™¯**ï¼š
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**ï¼šåªå…³å¿ƒæ–°å¢å’Œåˆ é™¤ï¼Œä¸å…³å¿ƒæ›´æ–°
- ğŸ”„ **æ•°æ®åŒæ­¥**ï¼šåªåŒæ­¥æ–°å¢æ•°æ®ï¼Œå¿½ç•¥ä¿®æ”¹å’Œåˆ é™¤
- ğŸ“ˆ **å®æ—¶ç›‘æ§**ï¼šåªç›‘æ§åˆ é™¤æ“ä½œï¼Œé˜²æ­¢è¯¯åˆ 

```java
// åœ¨Canalå®¢æˆ·ç«¯è¿‡æ»¤DMLæ“ä½œç±»å‹
public void processRowChange(RowChange rowChange) {
    EventType eventType = rowChange.getEventType();
    
    switch (eventType) {
        case INSERT:
            if (shouldProcessInsert()) {
                processInsertEvent(rowChange);
            }
            break;
        case UPDATE:
            if (shouldProcessUpdate()) {
                processUpdateEvent(rowChange);
            }
            break;
        case DELETE:
            if (shouldProcessDelete()) {
                processDeleteEvent(rowChange);
            }
            break;
        default:
            // å¿½ç•¥å…¶ä»–æ“ä½œç±»å‹
            break;
    }
}

// é…ç½®å“ªäº›æ“ä½œç±»å‹éœ€è¦å¤„ç†
private boolean shouldProcessInsert() {
    return config.isMonitorInsert();  // é€šè¿‡é…ç½®å†³å®š
}

private boolean shouldProcessUpdate() {
    return config.isMonitorUpdate();
}

private boolean shouldProcessDelete() {
    return config.isMonitorDelete();
}
```

### 6.2 DDLæ“ä½œè¿‡æ»¤


**DDLæ“ä½œç±»å‹**åŒ…æ‹¬ï¼š`CREATE`ï¼ˆåˆ›å»ºï¼‰ã€`ALTER`ï¼ˆä¿®æ”¹ï¼‰ã€`DROP`ï¼ˆåˆ é™¤ï¼‰ã€`TRUNCATE`ï¼ˆæ¸…ç©ºï¼‰

**åº”ç”¨åœºæ™¯**ï¼š
- ğŸ—ï¸ **æ¶æ„åŒæ­¥**ï¼šç›‘æ§è¡¨ç»“æ„å˜æ›´ï¼ŒåŒæ­¥åˆ°å…¶ä»–ç¯å¢ƒ
- âš ï¸ **å®‰å…¨ç›‘æ§**ï¼šç›‘æ§DROPå’ŒTRUNCATEæ“ä½œï¼Œé˜²æ­¢è¯¯æ“ä½œ
- ğŸ“‹ **å˜æ›´è®°å½•**ï¼šè®°å½•æ‰€æœ‰DDLæ“ä½œï¼Œç”¨äºå®¡è®¡

```java
public void processDDLEvent(Entry entry) {
    if (entry.getEntryType() == EntryType.ROWDATA) {
        return; // è¿™æ˜¯DMLäº‹ä»¶ï¼Œè·³è¿‡
    }
    
    // å¤„ç†DDLäº‹ä»¶
    String sql = entry.getHeader().getExecuteTime() + ":" + 
                entry.getHeader().getEventType();
    
    EventType eventType = entry.getHeader().getEventType();
    
    switch (eventType) {
        case CREATE:
            if (shouldMonitorCreate()) {
                processCreateEvent(entry);
            }
            break;
        case ALTER:
            if (shouldMonitorAlter()) {
                processAlterEvent(entry);
            }
            break;
        case DROP:
            if (shouldMonitorDrop()) {
                processDropEvent(entry);  // é‡è¦ï¼šç›‘æ§åˆ é™¤æ“ä½œ
            }
            break;
        case TRUNCATE:
            if (shouldMonitorTruncate()) {
                processTruncateEvent(entry);  // é‡è¦ï¼šç›‘æ§æ¸…ç©ºæ“ä½œ
            }
            break;
    }
}
```

### 6.3 æ“ä½œè¿‡æ»¤é…ç½®ç¤ºä¾‹


**é…ç½®æ–‡ä»¶æ–¹å¼**ï¼š
```properties
# è‡ªå®šä¹‰é…ç½®ï¼šå®šä¹‰éœ€è¦ç›‘æ§çš„æ“ä½œç±»å‹
monitor.dml.insert=true
monitor.dml.update=true
monitor.dml.delete=true

monitor.ddl.create=false
monitor.ddl.alter=true
monitor.ddl.drop=true
monitor.ddl.truncate=true

# æŒ‰è¡¨é…ç½®ä¸åŒçš„ç›‘æ§ç­–ç•¥
monitor.table.user.operations=INSERT,UPDATE
monitor.table.order.operations=INSERT,UPDATE,DELETE
monitor.table.log.operations=INSERT
```

**ä»£ç é…ç½®æ–¹å¼**ï¼š
```java
@Configuration
public class CanalFilterConfig {
    
    // é…ç½®ä¸åŒè¡¨çš„æ“ä½œè¿‡æ»¤è§„åˆ™
    public Map<String, Set<EventType>> getTableOperationFilters() {
        Map<String, Set<EventType>> filters = new HashMap<>();
        
        // ç”¨æˆ·è¡¨ï¼šåªå…³å¿ƒæ–°å¢å’ŒçŠ¶æ€æ›´æ–°
        filters.put("user", Set.of(EventType.INSERT, EventType.UPDATE));
        
        // è®¢å•è¡¨ï¼šå…³å¿ƒæ‰€æœ‰æ“ä½œ
        filters.put("order", Set.of(EventType.INSERT, EventType.UPDATE, EventType.DELETE));
        
        // æ—¥å¿—è¡¨ï¼šåªå…³å¿ƒæ–°å¢
        filters.put("log", Set.of(EventType.INSERT));
        
        return filters;
    }
    
    // æ£€æŸ¥æ˜¯å¦åº”è¯¥å¤„ç†è¯¥æ“ä½œ
    public boolean shouldProcessOperation(String tableName, EventType eventType) {
        Set<EventType> allowedOps = getTableOperationFilters().get(tableName);
        return allowedOps != null && allowedOps.contains(eventType);
    }
}
```

---

## 7. ğŸ”— å¤šè¡¨è”åˆè¿‡æ»¤


### 7.1 å¤šè¡¨è”åˆè¿‡æ»¤çš„æ¦‚å¿µ


å¤šè¡¨è”åˆè¿‡æ»¤æ˜¯æŒ‡æ ¹æ®**å¤šä¸ªç›¸å…³è¡¨çš„æ¡ä»¶**æ¥å†³å®šæ˜¯å¦å¤„ç†æŸä¸ªè¡¨çš„æ•°æ®å˜æ›´ã€‚è¿™ç§è¿‡æ»¤æ–¹å¼é€‚ç”¨äºæœ‰**å…³è”å…³ç³»**çš„ä¸šåŠ¡åœºæ™¯ã€‚

**åº”ç”¨åœºæ™¯**ï¼š
- ğŸ‘¥ **ä¸»ä»è¡¨å…³è”**ï¼šåªå¤„ç†æœ‰æœ‰æ•ˆä¸»è¡¨è®°å½•çš„ä»è¡¨æ•°æ®
- ğŸª **ä¸šåŠ¡çŠ¶æ€å…³è”**ï¼šåªå¤„ç†ç‰¹å®šçŠ¶æ€ä¸‹çš„è®¢å•ç›¸å…³æ•°æ®
- ğŸ“Š **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿å…³è”æ•°æ®çš„ä¸€è‡´æ€§

### 7.2 å®ç°å¤šè¡¨è”åˆè¿‡æ»¤


```java
@Component
public class MultiTableFilter {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    // ç”¨æˆ·-è®¢å•è”åˆè¿‡æ»¤ï¼šåªå¤„ç†æ´»è·ƒç”¨æˆ·çš„è®¢å•
    public boolean shouldProcessOrder(RowData orderData) {
        // ä»è®¢å•æ•°æ®ä¸­è·å–ç”¨æˆ·ID
        String userId = getColumnValue(orderData, "user_id");
        
        // æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
        String userStatus = redisTemplate.opsForValue().get("user:status:" + userId);
        
        // åªå¤„ç†æ´»è·ƒç”¨æˆ·çš„è®¢å•
        return "ACTIVE".equals(userStatus);
    }
    
    // å•†å“-åº“å­˜è”åˆè¿‡æ»¤ï¼šåªå¤„ç†æœ‰åº“å­˜çš„å•†å“è®¢å•
    public boolean shouldProcessProductOrder(RowData orderData) {
        String productId = getColumnValue(orderData, "product_id");
        
        // æ£€æŸ¥å•†å“åº“å­˜
        String stock = redisTemplate.opsForValue().get("product:stock:" + productId);
        
        // åªå¤„ç†æœ‰åº“å­˜çš„å•†å“è®¢å•
        return stock != null && Integer.parseInt(stock) > 0;
    }
    
    // åˆ†ç±»-å•†å“è”åˆè¿‡æ»¤ï¼šåªå¤„ç†ç‰¹å®šåˆ†ç±»çš„å•†å“
    public boolean shouldProcessProductByCategory(RowData productData) {
        String categoryId = getColumnValue(productData, "category_id");
        
        // æ£€æŸ¥åˆ†ç±»æ˜¯å¦åœ¨ç›‘æ§èŒƒå›´å†…
        Set<String> monitoredCategories = Set.of("electronics", "books", "clothing");
        
        return monitoredCategories.contains(categoryId);
    }
    
    private String getColumnValue(RowData rowData, String columnName) {
        return rowData.getAfterColumnsList().stream()
            .filter(column -> column.getName().equals(columnName))
            .findFirst()
            .map(Column::getValue)
            .orElse(null);
    }
}
```

### 7.3 è”åˆè¿‡æ»¤çš„å®é™…åº”ç”¨


**åœºæ™¯1ï¼šç”µå•†è®¢å•å¤„ç†**
```java
// è®¢å•è¡¨å˜æ›´æ—¶ï¼Œéœ€è¦æ£€æŸ¥ç”¨æˆ·ã€å•†å“ã€ä¿ƒé”€æ´»åŠ¨ç­‰å¤šä¸ªæ¡ä»¶
public class OrderProcessFilter {
    
    public boolean shouldProcessOrderChange(RowData orderData) {
        String userId = getColumnValue(orderData, "user_id");
        String productId = getColumnValue(orderData, "product_id");
        String promotionId = getColumnValue(orderData, "promotion_id");
        
        // å¤šæ¡ä»¶è”åˆåˆ¤æ–­
        return isValidUser(userId) && 
               isValidProduct(productId) && 
               isValidPromotion(promotionId);
    }
    
    private boolean isValidUser(String userId) {
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºVIPæˆ–æ´»è·ƒç”¨æˆ·
        String userLevel = redisTemplate.opsForValue().get("user:level:" + userId);
        return "VIP".equals(userLevel) || "ACTIVE".equals(userLevel);
    }
    
    private boolean isValidProduct(String productId) {
        // æ£€æŸ¥å•†å“æ˜¯å¦åœ¨å”®ä¸”æœ‰åº“å­˜
        Map<Object, Object> productInfo = redisTemplate.opsForHash()
            .entries("product:" + productId);
        
        return "ON_SALE".equals(productInfo.get("status")) && 
               Integer.parseInt((String)productInfo.get("stock")) > 0;
    }
    
    private boolean isValidPromotion(String promotionId) {
        if (promotionId == null) return true; // æ— ä¿ƒé”€æ´»åŠ¨æ—¶é€šè¿‡
        
        // æ£€æŸ¥ä¿ƒé”€æ´»åŠ¨æ˜¯å¦æœ‰æ•ˆ
        Long expireTime = redisTemplate.getExpire("promotion:" + promotionId);
        return expireTime > 0; // ä¿ƒé”€æ´»åŠ¨æœªè¿‡æœŸ
    }
}
```

**åœºæ™¯2ï¼šæ•°æ®åŒæ­¥å®Œæ•´æ€§æ§åˆ¶**
```java
public class DataSyncFilter {
    
    // ç¡®ä¿ä¸»ä»è¡¨æ•°æ®åŒæ­¥çš„å®Œæ•´æ€§
    public boolean shouldSyncDetailTable(String tableName, RowData rowData) {
        switch (tableName) {
            case "order_item":
                return hasValidOrder(getColumnValue(rowData, "order_id"));
            case "user_profile":
                return hasValidUser(getColumnValue(rowData, "user_id"));
            case "product_inventory":
                return hasValidProduct(getColumnValue(rowData, "product_id"));
            default:
                return true;
        }
    }
    
    private boolean hasValidOrder(String orderId) {
        // æ£€æŸ¥ä¸»è®¢å•è¡¨ä¸­æ˜¯å¦å­˜åœ¨è¯¥è®¢å•
        return redisTemplate.hasKey("order:exists:" + orderId);
    }
    
    private boolean hasValidUser(String userId) {
        // æ£€æŸ¥ç”¨æˆ·è¡¨ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç”¨æˆ·
        return redisTemplate.hasKey("user:exists:" + userId);
    }
    
    private boolean hasValidProduct(String productId) {
        // æ£€æŸ¥å•†å“è¡¨ä¸­æ˜¯å¦å­˜åœ¨è¯¥å•†å“
        return redisTemplate.hasKey("product:exists:" + productId);
    }
}
```

---

## 8. ğŸ”„ åŠ¨æ€è¿‡æ»¤è§„åˆ™


### 8.1 åŠ¨æ€è¿‡æ»¤çš„é‡è¦æ€§


**é™æ€è¿‡æ»¤çš„å±€é™æ€§**ï¼š
- âŒ è§„åˆ™å†™æ­»åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹éœ€è¦é‡å¯
- âŒ æ— æ³•æ ¹æ®ä¸šåŠ¡çŠ¶æ€åŠ¨æ€è°ƒæ•´
- âŒ æ— æ³•æ ¹æ®æ—¶é—´ã€è´Ÿè½½ç­‰æ¡ä»¶çµæ´»è¿‡æ»¤

**åŠ¨æ€è¿‡æ»¤çš„ä¼˜åŠ¿**ï¼š
- âœ… å®æ—¶è°ƒæ•´è¿‡æ»¤è§„åˆ™ï¼Œæ— éœ€é‡å¯
- âœ… æ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»é…ç½®
- âœ… æ”¯æŒåŸºäºæ—¶é—´ã€çŠ¶æ€ã€è´Ÿè½½çš„æ™ºèƒ½è¿‡æ»¤

### 8.2 å®ç°åŠ¨æ€è¿‡æ»¤è§„åˆ™


**æ–¹æ³•1ï¼šåŸºäºRedisçš„åŠ¨æ€é…ç½®**
```java
@Component
public class DynamicFilterManager {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    // è·å–å½“å‰ç”Ÿæ•ˆçš„è¿‡æ»¤è§„åˆ™
    public FilterRule getCurrentFilterRule() {
        String ruleJson = redisTemplate.opsForValue().get("canal:filter:rule");
        
        if (ruleJson != null) {
            return JSON.parseObject(ruleJson, FilterRule.class);
        }
        
        // è¿”å›é»˜è®¤è§„åˆ™
        return getDefaultFilterRule();
    }
    
    // åŠ¨æ€æ›´æ–°è¿‡æ»¤è§„åˆ™
    public void updateFilterRule(FilterRule newRule) {
        String ruleJson = JSON.toJSONString(newRule);
        redisTemplate.opsForValue().set("canal:filter:rule", ruleJson);
        
        // é€šçŸ¥æ‰€æœ‰Canalå®¢æˆ·ç«¯æ›´æ–°è§„åˆ™
        redisTemplate.convertAndSend("canal:filter:update", ruleJson);
    }
    
    // æ£€æŸ¥è¡¨æ˜¯å¦åº”è¯¥è¢«è¿‡æ»¤
    public boolean shouldProcessTable(String database, String table) {
        FilterRule rule = getCurrentFilterRule();
        
        // æ£€æŸ¥æ•°æ®åº“è¿‡æ»¤
        if (!rule.getDatabasePatterns().stream()
                .anyMatch(pattern -> database.matches(pattern))) {
            return false;
        }
        
        // æ£€æŸ¥è¡¨è¿‡æ»¤
        String fullTableName = database + "." + table;
        return rule.getTablePatterns().stream()
                .anyMatch(pattern -> fullTableName.matches(pattern));
    }
}

// è¿‡æ»¤è§„åˆ™æ•°æ®ç»“æ„
@Data
public class FilterRule {
    private List<String> databasePatterns;  // æ•°æ®åº“åŒ¹é…æ¨¡å¼
    private List<String> tablePatterns;     // è¡¨åŒ¹é…æ¨¡å¼
    private List<String> excludePatterns;   // æ’é™¤æ¨¡å¼
    private Map<String, List<String>> tableFieldFilters; // å­—æ®µè¿‡æ»¤
    private boolean enableTimeFilter;       // æ˜¯å¦å¯ç”¨æ—¶é—´è¿‡æ»¤
    private String timeFilterStart;         // æ—¶é—´è¿‡æ»¤å¼€å§‹æ—¶é—´
    private String timeFilterEnd;           // æ—¶é—´è¿‡æ»¤ç»“æŸæ—¶é—´
}
```

**æ–¹æ³•2ï¼šåŸºäºé…ç½®ä¸­å¿ƒçš„åŠ¨æ€è§„åˆ™**
```java
@Component
public class ConfigCenterFilterManager {
    
    @Autowired
    private NacosConfigManager nacosConfig;
    
    private volatile FilterRule currentRule;
    
    @PostConstruct
    public void init() {
        // åˆå§‹åŒ–æ—¶åŠ è½½é…ç½®
        loadFilterRule();
        
        // ç›‘å¬é…ç½®å˜æ›´
        nacosConfig.addListener("canal-filter-rule", this::onConfigChange);
    }
    
    private void loadFilterRule() {
        try {
            String config = nacosConfig.getConfig("canal-filter-rule");
            this.currentRule = JSON.parseObject(config, FilterRule.class);
        } catch (Exception e) {
            this.currentRule = getDefaultFilterRule();
        }
    }
    
    private void onConfigChange(String newConfig) {
        try {
            FilterRule newRule = JSON.parseObject(newConfig, FilterRule.class);
            this.currentRule = newRule;
            log.info("è¿‡æ»¤è§„åˆ™å·²æ›´æ–°: {}", newConfig);
        } catch (Exception e) {
            log.error("æ›´æ–°è¿‡æ»¤è§„åˆ™å¤±è´¥", e);
        }
    }
    
    public boolean shouldProcess(String database, String table, EventType eventType) {
        FilterRule rule = this.currentRule;
        
        // æ—¶é—´è¿‡æ»¤
        if (rule.isEnableTimeFilter() && !isInTimeRange(rule)) {
            return false;
        }
        
        // è¡¨è¿‡æ»¤
        if (!matchesTablePattern(database, table, rule)) {
            return false;
        }
        
        // æ“ä½œç±»å‹è¿‡æ»¤
        return matchesEventType(database, table, eventType, rule);
    }
}
```

### 8.3 æ™ºèƒ½åŠ¨æ€è¿‡æ»¤


**åŸºäºè´Ÿè½½çš„åŠ¨æ€è¿‡æ»¤**ï¼š
```java
@Component
public class LoadBasedFilter {
    
    @Autowired
    private SystemMonitor systemMonitor;
    
    public boolean shouldProcessBasedOnLoad(String table, EventType eventType) {
        double cpuUsage = systemMonitor.getCpuUsage();
        double memoryUsage = systemMonitor.getMemoryUsage();
        
        // ç³»ç»Ÿè´Ÿè½½é«˜æ—¶ï¼Œåªå¤„ç†æ ¸å¿ƒè¡¨çš„æ ¸å¿ƒæ“ä½œ
        if (cpuUsage > 0.8 || memoryUsage > 0.8) {
            return isHighPriorityOperation(table, eventType);
        }
        
        // ç³»ç»Ÿè´Ÿè½½ä¸­ç­‰æ—¶ï¼Œå¤„ç†é‡è¦è¡¨çš„æ‰€æœ‰æ“ä½œ
        if (cpuUsage > 0.6 || memoryUsage > 0.6) {
            return isImportantTable(table);
        }
        
        // ç³»ç»Ÿè´Ÿè½½ä½æ—¶ï¼Œå¤„ç†æ‰€æœ‰æ“ä½œ
        return true;
    }
    
    private boolean isHighPriorityOperation(String table, EventType eventType) {
        // æ ¸å¿ƒè¡¨çš„å…³é”®æ“ä½œ
        Set<String> coreTables = Set.of("user", "order", "payment");
        Set<EventType> coreOperations = Set.of(EventType.INSERT, EventType.DELETE);
        
        return coreTables.contains(table) && coreOperations.contains(eventType);
    }
    
    private boolean isImportantTable(String table) {
        Set<String> importantTables = Set.of("user", "order", "product", "payment", "inventory");
        return importantTables.contains(table);
    }
}
```

**åŸºäºä¸šåŠ¡çŠ¶æ€çš„åŠ¨æ€è¿‡æ»¤**ï¼š
```java
@Component
public class BusinessStateFilter {
    
    public boolean shouldProcessBasedOnBusinessState(String table, RowData rowData) {
        // æ ¹æ®ä¸šåŠ¡æ—¶é—´æ®µåŠ¨æ€è°ƒæ•´
        if (isPromotionPeriod()) {
            return shouldProcessDuringPromotion(table, rowData);
        }
        
        if (isMaintenancePeriod()) {
            return shouldProcessDuringMaintenance(table, rowData);
        }
        
        return shouldProcessDuringNormalPeriod(table, rowData);
    }
    
    private boolean isPromotionPeriod() {
        // åˆ¤æ–­æ˜¯å¦åœ¨ä¿ƒé”€æœŸé—´ï¼ˆå¦‚åŒ11ã€618ç­‰ï¼‰
        LocalDateTime now = LocalDateTime.now();
        // å®é™…ä¸šåŠ¡é€»è¾‘...
        return false;
    }
    
    private boolean shouldProcessDuringPromotion(String table, RowData rowData) {
        // ä¿ƒé”€æœŸé—´ï¼šé‡ç‚¹å…³æ³¨è®¢å•ã€æ”¯ä»˜ã€åº“å­˜å˜åŒ–
        Set<String> promotionTables = Set.of("order", "payment", "inventory", "promotion");
        return promotionTables.contains(table);
    }
    
    private boolean shouldProcessDuringMaintenance(String table, RowData rowData) {
        // ç»´æŠ¤æœŸé—´ï¼šåªå…³æ³¨æ ¸å¿ƒä¸šåŠ¡è¡¨
        Set<String> coreTables = Set.of("user", "order");
        return coreTables.contains(table);
    }
    
    private boolean shouldProcessDuringNormalPeriod(String table, RowData rowData) {
        // æ­£å¸¸æœŸé—´ï¼šå¤„ç†æ‰€æœ‰é…ç½®çš„è¡¨
        return true;
    }
}
```

---

## 9. ğŸ§ª è¿‡æ»¤è§„åˆ™æµ‹è¯•


### 9.1 è¿‡æ»¤è§„åˆ™æµ‹è¯•çš„é‡è¦æ€§


è¿‡æ»¤è§„åˆ™é…ç½®é”™è¯¯å¯èƒ½å¯¼è‡´ï¼š
- âŒ **æ•°æ®ä¸¢å¤±**ï¼šé‡è¦æ•°æ®è¢«è¯¯è¿‡æ»¤
- âŒ **æ€§èƒ½é—®é¢˜**ï¼šä¸å¿…è¦çš„æ•°æ®æ²¡æœ‰è¢«è¿‡æ»¤
- âŒ **ä¸šåŠ¡å¼‚å¸¸**ï¼šä¸‹æ¸¸ç³»ç»Ÿæ”¶ä¸åˆ°æœŸæœ›çš„æ•°æ®

å› æ­¤ï¼Œæµ‹è¯•è¿‡æ»¤è§„åˆ™æ˜¯**å¿…ä¸å¯å°‘**çš„æ­¥éª¤ã€‚

### 9.2 å•å…ƒæµ‹è¯•è¿‡æ»¤è§„åˆ™


```java
@SpringBootTest
public class FilterRuleTest {
    
    @Autowired
    private DynamicFilterManager filterManager;
    
    @Test
    public void testDatabaseFilter() {
        // æµ‹è¯•æ•°æ®åº“çº§åˆ«è¿‡æ»¤
        assertTrue(filterManager.shouldProcessTable("shop_db", "user"));
        assertTrue(filterManager.shouldProcessTable("shop_db", "order"));
        assertFalse(filterManager.shouldProcessTable("log_db", "access_log"));
        assertFalse(filterManager.shouldProcessTable("temp_db", "temp_table"));
    }
    
    @Test
    public void testTableFilter() {
        // æµ‹è¯•è¡¨çº§åˆ«è¿‡æ»¤
        assertTrue(filterManager.shouldProcessTable("shop_db", "user"));
        assertTrue(filterManager.shouldProcessTable("shop_db", "order"));
        assertTrue(filterManager.shouldProcessTable("shop_db", "product"));
        
        // æµ‹è¯•æ’é™¤è§„åˆ™
        assertFalse(filterManager.shouldProcessTable("shop_db", "user_log"));
        assertFalse(filterManager.shouldProcessTable("shop_db", "temp_data"));
        assertFalse(filterManager.shouldProcessTable("shop_db", "backup_user"));
    }
    
    @Test
    public void testRegexPattern() {
        // æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
        FilterRule rule = new FilterRule();
        rule.setTablePatterns(Arrays.asList(
            "shop_db\\.(user|order|product)",  // ç²¾ç¡®åŒ¹é…
            "shop_db\\..*_info",               // åç¼€åŒ¹é…
            ".*_db\\.core_.*"                  // å‰åç¼€åŒ¹é…
        ));
        
        assertTrue(matchesAnyPattern("shop_db.user", rule.getTablePatterns()));
        assertTrue(matchesAnyPattern("shop_db.user_info", rule.getTablePatterns()));
        assertTrue(matchesAnyPattern("crm_db.core_customer", rule.getTablePatterns()));
        
        assertFalse(matchesAnyPattern("shop_db.log_table", rule.getTablePatterns()));
        assertFalse(matchesAnyPattern("other_db.user", rule.getTablePatterns()));
    }
    
    private boolean matchesAnyPattern(String tableName, List<String> patterns) {
        return patterns.stream().anyMatch(tableName::matches);
    }
}
```

### 9.3 é›†æˆæµ‹è¯•


```java
@SpringBootTest
@TestMethodOrder(OrderAnnotation.class)
public class CanalFilterIntegrationTest {
    
    @Autowired
    private CanalClient canalClient;
    
    @Autowired
    private TestDataProducer testDataProducer;
    
    @Test
    @Order(1)
    public void testBasicFiltering() throws InterruptedException {
        // å¯åŠ¨Canalå®¢æˆ·ç«¯
        canalClient.start();
        
        // ç”Ÿæˆæµ‹è¯•æ•°æ®
        testDataProducer.insertUserData("test_user", "test@example.com");
        testDataProducer.insertOrderData("order_001", "test_user", 100.0);
        testDataProducer.insertLogData("access", "user login");  // åº”è¯¥è¢«è¿‡æ»¤
        
        // ç­‰å¾…æ•°æ®å¤„ç†
        Thread.sleep(2000);
        
        // éªŒè¯è¿‡æ»¤ç»“æœ
        List<ProcessedEvent> events = canalClient.getProcessedEvents();
        
        // åº”è¯¥æœ‰2ä¸ªäº‹ä»¶ï¼ˆuserå’Œorderï¼‰ï¼Œlogäº‹ä»¶åº”è¯¥è¢«è¿‡æ»¤
        assertEquals(2, events.size());
        
        assertTrue(events.stream().anyMatch(e -> e.getTableName().equals("user")));
        assertTrue(events.stream().anyMatch(e -> e.getTableName().equals("order")));
        assertFalse(events.stream().anyMatch(e -> e.getTableName().equals("log")));
    }
    
    @Test
    @Order(2)
    public void testDynamicFilterUpdate() throws InterruptedException {
        // æ›´æ–°è¿‡æ»¤è§„åˆ™ï¼šåªå¤„ç†orderè¡¨
        FilterRule newRule = new FilterRule();
        newRule.setTablePatterns(Arrays.asList("shop_db\\.order"));
        
        filterManager.updateFilterRule(newRule);
        
        // ç­‰å¾…è§„åˆ™ç”Ÿæ•ˆ
        Thread.sleep(1000);
        
        // ç”Ÿæˆæµ‹è¯•æ•°æ®
        testDataProducer.insertUserData("test_user2", "test2@example.com");  // åº”è¯¥è¢«è¿‡æ»¤
        testDataProducer.insertOrderData("order_002", "test_user2", 200.0);
        
        Thread.sleep(2000);
        
        List<ProcessedEvent> events = canalClient.getProcessedEvents();
        
        // åªåº”è¯¥æœ‰1ä¸ªorderäº‹ä»¶ï¼Œuseräº‹ä»¶åº”è¯¥è¢«è¿‡æ»¤
        assertEquals(1, events.size());
        assertEquals("order", events.get(0).getTableName());
    }
}
```

### 9.4 è¿‡æ»¤è§„åˆ™éªŒè¯å·¥å…·


```java
@Component
public class FilterRuleValidator {
    
    // éªŒè¯è¿‡æ»¤è§„åˆ™é…ç½®çš„æ­£ç¡®æ€§
    public ValidationResult validateFilterRule(FilterRule rule) {
        ValidationResult result = new ValidationResult();
        
        // éªŒè¯æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•
        for (String pattern : rule.getTablePatterns()) {
            try {
                Pattern.compile(pattern);
            } catch (PatternSyntaxException e) {
                result.addError("æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼: " + pattern + ", é”™è¯¯: " + e.getMessage());
            }
        }
        
        // éªŒè¯æ˜¯å¦æœ‰å†²çªçš„è§„åˆ™
        validateConflictingRules(rule, result);
        
        // éªŒè¯æ˜¯å¦æœ‰è¿‡äºå®½æ³›çš„è§„åˆ™
        validateOverlyBroadRules(rule, result);
        
        return result;
    }
    
    private void validateConflictingRules(FilterRule rule, ValidationResult result) {
        // æ£€æŸ¥åŒ…å«å’Œæ’é™¤è§„åˆ™æ˜¯å¦å†²çª
        for (String includePattern : rule.getTablePatterns()) {
            for (String excludePattern : rule.getExcludePatterns()) {
                if (patternsOverlap(includePattern, excludePattern)) {
                    result.addWarning("åŒ…å«è§„åˆ™å’Œæ’é™¤è§„åˆ™å¯èƒ½å†²çª: " + 
                                    includePattern + " vs " + excludePattern);
                }
            }
        }
    }
    
    private void validateOverlyBroadRules(FilterRule rule, ValidationResult result) {
        for (String pattern : rule.getTablePatterns()) {
            if (".*\\..*".equals(pattern)) {
                result.addWarning("è¿‡äºå®½æ³›çš„è§„åˆ™ï¼Œå¯èƒ½å½±å“æ€§èƒ½: " + pattern);
            }
        }
    }
    
    // æµ‹è¯•ç‰¹å®šè¡¨æ˜¯å¦åŒ¹é…è§„åˆ™
    public boolean testTableMatch(FilterRule rule, String database, String table) {
        String fullTableName = database + "." + table;
        
        // æ£€æŸ¥æ˜¯å¦åŒ¹é…åŒ…å«è§„åˆ™
        boolean matches = rule.getTablePatterns().stream()
            .anyMatch(pattern -> fullTableName.matches(pattern));
        
        if (!matches) {
            return false;
        }
        
        // æ£€æŸ¥æ˜¯å¦åŒ¹é…æ’é™¤è§„åˆ™
        boolean excluded = rule.getExcludePatterns().stream()
            .anyMatch(pattern -> fullTableName.matches(pattern));
        
        return !excluded;
    }
}

@Data
public class ValidationResult {
    private List<String> errors = new ArrayList<>();
    private List<String> warnings = new ArrayList<>();
    
    public void addError(String error) {
        errors.add(error);
    }
    
    public void addWarning(String warning) {
        warnings.add(warning);
    }
    
    public boolean isValid() {
        return errors.isEmpty();
    }
}
```

---

## 10. âš¡ è¿‡æ»¤æ€§èƒ½ä¼˜åŒ–


### 10.1 æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ€§


è¿‡æ»¤è§„åˆ™çš„æ€§èƒ½ç›´æ¥å½±å“Canalçš„æ•´ä½“æ€§èƒ½ï¼š
- ğŸŒ **ä½æ•ˆè¿‡æ»¤**ï¼šæ¯æ¡è®°å½•éƒ½éœ€è¦å¤æ‚çš„åŒ¹é…è®¡ç®—
- ğŸ“ˆ **é«˜å¹¶å‘å‹åŠ›**ï¼šå¤§é‡æ•°æ®å˜æ›´æ—¶è¿‡æ»¤æˆä¸ºç“¶é¢ˆ
- ğŸ’¾ **å†…å­˜æ¶ˆè€—**ï¼šå¤æ‚è§„åˆ™å¯èƒ½æ¶ˆè€—å¤§é‡å†…å­˜

### 10.2 è¿‡æ»¤è§„åˆ™ä¼˜åŒ–ç­–ç•¥


**ä¼˜åŒ–1ï¼šè§„åˆ™é¢„ç¼–è¯‘**
```java
@Component
public class OptimizedFilterManager {
    
    // é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œé¿å…é‡å¤ç¼–è¯‘
    private Map<String, Pattern> compiledPatterns = new ConcurrentHashMap<>();
    
    public void updateFilterRule(FilterRule rule) {
        // æ¸…ç©ºæ—§çš„ç¼–è¯‘ç»“æœ
        compiledPatterns.clear();
        
        // é¢„ç¼–è¯‘æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼
        for (String patternStr : rule.getTablePatterns()) {
            try {
                Pattern pattern = Pattern.compile(patternStr);
                compiledPatterns.put(patternStr, pattern);
            } catch (PatternSyntaxException e) {
                log.error("æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼: {}", patternStr, e);
            }
        }
    }
    
    public boolean shouldProcessTable(String fullTableName) {
        // ä½¿ç”¨é¢„ç¼–è¯‘çš„Patternè¿›è¡ŒåŒ¹é…ï¼Œæ€§èƒ½æ›´å¥½
        return compiledPatterns.values().stream()
            .anyMatch(pattern -> pattern.matcher(fullTableName).matches());
    }
}
```

**ä¼˜åŒ–2ï¼šåˆ†å±‚è¿‡æ»¤**
```java
@Component
public class LayeredFilterManager {
    
    // ç¬¬ä¸€å±‚ï¼šå¿«é€Ÿå­—ç¬¦ä¸²åŒ¹é…ï¼ˆæœ€å¿«ï¼‰
    private Set<String> exactMatches = new HashSet<>();
    
    // ç¬¬äºŒå±‚ï¼šå‰ç¼€åŒ¹é…ï¼ˆè¾ƒå¿«ï¼‰
    private Set<String> prefixMatches = new HashSet<>();
    
    // ç¬¬ä¸‰å±‚ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼ˆè¾ƒæ…¢ï¼‰
    private List<Pattern> regexPatterns = new ArrayList<>();
    
    public void buildOptimizedRules(FilterRule rule) {
        exactMatches.clear();
        prefixMatches.clear();
        regexPatterns.clear();
        
        for (String patternStr : rule.getTablePatterns()) {
            if (isExactMatch(patternStr)) {
                // ç²¾ç¡®åŒ¹é…ï¼šç›´æ¥æ·»åŠ åˆ°Setä¸­
                exactMatches.add(patternStr);
            } else if (isPrefixMatch(patternStr)) {
                // å‰ç¼€åŒ¹é…ï¼šæå–å‰ç¼€
                String prefix = extractPrefix(patternStr);
                prefixMatches.add(prefix);
            } else {
                // å¤æ‚æ­£åˆ™ï¼šç¼–è¯‘åæ·»åŠ 
                regexPatterns.add(Pattern.compile(patternStr));
            }
        }
    }
    
    public boolean shouldProcessTable(String fullTableName) {
        // ç¬¬ä¸€å±‚ï¼šç²¾ç¡®åŒ¹é…æ£€æŸ¥ï¼ˆO(1)ï¼‰
        if (exactMatches.contains(fullTableName)) {
            return true;
        }
        
        // ç¬¬äºŒå±‚ï¼šå‰ç¼€åŒ¹é…æ£€æŸ¥ï¼ˆO(n)ï¼Œä½†nå¾ˆå°ï¼‰
        for (String prefix : prefixMatches) {
            if (fullTableName.startsWith(prefix)) {
                return true;
            }
        }
        
        // ç¬¬ä¸‰å±‚ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼ˆæœ€æ…¢ï¼‰
        return regexPatterns.stream()
            .anyMatch(pattern -> pattern.matcher(fullTableName).matches());
    }
    
    private boolean isExactMatch(String pattern) {
        // åˆ¤æ–­æ˜¯å¦ä¸ºç²¾ç¡®åŒ¹é…ï¼ˆä¸åŒ…å«æ­£åˆ™ç‰¹æ®Šå­—ç¬¦ï¼‰
        return !pattern.contains("*") && !pattern.contains(".") && 
               !pattern.contains("+") && !pattern.contains("?");
    }
    
    private boolean isPrefixMatch(String pattern) {
        // åˆ¤æ–­æ˜¯å¦ä¸ºç®€å•å‰ç¼€åŒ¹é…ï¼ˆå¦‚ "shop_db.*"ï¼‰
        return pattern.endsWith(".*") && isExactMatch(pattern.substring(0, pattern.length() - 2));
    }
}
```

**ä¼˜åŒ–3ï¼šç¼“å­˜åŒ¹é…ç»“æœ**
```java
@Component
public class CachedFilterManager {
    
    // ä½¿ç”¨LRUç¼“å­˜å­˜å‚¨åŒ¹é…ç»“æœ
    private Cache<String, Boolean> matchCache = CacheBuilder.newBuilder()
        .maximumSize(10000)  // æœ€å¤§ç¼“å­˜10000ä¸ªç»“æœ
        .expireAfterWrite(5, TimeUnit.MINUTES)  // 5åˆ†é’Ÿè¿‡æœŸ
        .recordStats()  // è®°å½•ç»Ÿè®¡ä¿¡æ¯
        .build();
    
    public boolean shouldProcessTable(String fullTableName) {
        // å…ˆæŸ¥ç¼“å­˜
        Boolean cachedResult = matchCache.getIfPresent(fullTableName);
        if (cachedResult != null) {
            return cachedResult;
        }
        
        // ç¼“å­˜æœªå‘½ä¸­ï¼Œè®¡ç®—ç»“æœ
        boolean result = computeFilterResult(fullTableName);
        
        // å­˜å…¥ç¼“å­˜
        matchCache.put(fullTableName, result);
        
        return result;
    }
    
    private boolean computeFilterResult(String fullTableName) {
        // å®é™…çš„è¿‡æ»¤é€»è¾‘
        return compiledPatterns.values().stream()
            .anyMatch(pattern -> pattern.matcher(fullTableName).matches());
    }
    
    // ç›‘æ§ç¼“å­˜æ€§èƒ½
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿæ‰“å°ä¸€æ¬¡
    public void printCacheStats() {
        CacheStats stats = matchCache.stats();
        log.info("è¿‡æ»¤ç¼“å­˜ç»Ÿè®¡ - å‘½ä¸­ç‡: {:.2f}%, ç¼“å­˜å¤§å°: {}", 
                stats.hitRate() * 100, matchCache.size());
    }
}
```

### 10.3 æ‰¹é‡è¿‡æ»¤ä¼˜åŒ–


```java
@Component
public class BatchFilterProcessor {
    
    // æ‰¹é‡å¤„ç†å¤šä¸ªè¡¨çš„è¿‡æ»¤åˆ¤æ–­
    public Map<String, Boolean> batchShouldProcess(List<String> tableNames) {
        Map<String, Boolean> results = new HashMap<>();
        
        // æ‰¹é‡ç²¾ç¡®åŒ¹é…
        Set<String> exactMatches = getExactMatches();
        for (String tableName : tableNames) {
            if (exactMatches.contains(tableName)) {
                results.put(tableName, true);
            }
        }
        
        // æ‰¹é‡å‰ç¼€åŒ¹é…
        Set<String> prefixes = getPrefixMatches();
        for (String tableName : tableNames) {
            if (!results.containsKey(tableName)) {
                boolean matches = prefixes.stream()
                    .anyMatch(tableName::startsWith);
                if (matches) {
                    results.put(tableName, true);
                }
            }
        }
        
        // æ‰¹é‡æ­£åˆ™åŒ¹é…ï¼ˆå‰©ä½™çš„è¡¨åï¼‰
        List<String> remainingTables = tableNames.stream()
            .filter(name -> !results.containsKey(name))
            .collect(Collectors.toList());
        
        for (String tableName : remainingTables) {
            boolean matches = getRegexPatterns().stream()
                .anyMatch(pattern -> pattern.matcher(tableName).matches());
            results.put(tableName, matches);
        }
        
        // æœªåŒ¹é…çš„é»˜è®¤ä¸ºfalse
        for (String tableName : tableNames) {
            results.putIfAbsent(tableName, false);
        }
        
        return results;
    }
}
```

### 10.4 æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜


```java
@Component
public class FilterPerformanceMonitor {
    
    private final MeterRegistry meterRegistry;
    private final Timer filterTimer;
    private final Counter filterCounter;
    
    public FilterPerformanceMonitor(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
        this.filterTimer = Timer.builder("canal.filter.duration")
            .description("Canalè¿‡æ»¤è€—æ—¶")
            .register(meterRegistry);
        this.filterCounter = Counter.builder("canal.filter.count")
            .description("Canalè¿‡æ»¤æ¬¡æ•°")
            .register(meterRegistry);
    }
    
    public boolean shouldProcessTableWithMetrics(String tableName) {
        Timer.Sample sample = Timer.start(meterRegistry);
        try {
            filterCounter.increment();
            return actualFilterLogic(tableName);
        } finally {
            sample.stop(filterTimer);
        }
    }
    
    // æ€§èƒ½åˆ†ææŠ¥å‘Š
    @Scheduled(fixedRate = 300000)  // æ¯5åˆ†é’Ÿ
    public void performanceReport() {
        double avgFilterTime = filterTimer.mean(TimeUnit.MICROSECONDS);
        long totalFilterCount = (long) filterCounter.count();
        
        log.info("è¿‡æ»¤æ€§èƒ½æŠ¥å‘Š - å¹³å‡è€—æ—¶: {}Î¼s, æ€»è¿‡æ»¤æ¬¡æ•°: {}", 
                avgFilterTime, totalFilterCount);
        
        // å¦‚æœå¹³å‡è€—æ—¶è¶…è¿‡é˜ˆå€¼ï¼Œå‘å‡ºå‘Šè­¦
        if (avgFilterTime > 1000) {  // è¶…è¿‡1ms
            log.warn("è¿‡æ»¤æ€§èƒ½å‘Šè­¦ï¼šå¹³å‡è€—æ—¶è¿‡é•¿ {}Î¼s", avgFilterTime);
        }
    }
}
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Canalè¿‡æ»¤æœ¬è´¨ï¼šä»MySQL binlogä¸­ç­›é€‰å‡ºéœ€è¦çš„æ•°æ®å˜æ›´
ğŸ”¸ è¿‡æ»¤å±‚æ¬¡ï¼šæ•°æ®åº“çº§ â†’ è¡¨çº§ â†’ å­—æ®µçº§ â†’ æ“ä½œç±»å‹çº§
ğŸ”¸ æ­£åˆ™è¡¨è¾¾å¼ï¼šCanalè¿‡æ»¤è§„åˆ™çš„åŸºç¡€è¯­æ³•å·¥å…·
ğŸ”¸ åŠ¨æ€è¿‡æ»¤ï¼šæ ¹æ®ä¸šåŠ¡çŠ¶æ€ã€ç³»ç»Ÿè´Ÿè½½ç­‰æ¡ä»¶å®æ—¶è°ƒæ•´è§„åˆ™
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šé¢„ç¼–è¯‘ã€åˆ†å±‚åŒ¹é…ã€ç¼“å­˜ç­‰æå‡è¿‡æ»¤æ•ˆç‡
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ è¿‡æ»¤è§„åˆ™çš„è®¾è®¡åŸåˆ™**
```
æ˜ç¡®æ€§ï¼šæ¸…æ¥šå®šä¹‰éœ€è¦ç›‘æ§çš„æ•°æ®èŒƒå›´
å®Œæ•´æ€§ï¼šç¡®ä¿é‡è¦æ•°æ®ä¸è¢«è¯¯è¿‡æ»¤
æ•ˆç‡æ€§ï¼šä¼˜åŒ–è§„åˆ™ä»¥æå‡å¤„ç†æ€§èƒ½
çµæ´»æ€§ï¼šæ”¯æŒæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€è°ƒæ•´
```

**ğŸ”¹ æ­£åˆ™è¡¨è¾¾å¼çš„å®ç”¨æŠ€å·§**
```
ç²¾ç¡®åŒ¹é…ï¼šshop_db\\.user
å‰ç¼€åŒ¹é…ï¼šshop_db\\.user.*  
åç¼€åŒ¹é…ï¼š.*\\.user_info
å¤šé€‰åŒ¹é…ï¼šshop_db\\.(user|order|product)
æ’é™¤åŒ¹é…ï¼š^(?!.*\\.(log_|temp_)).*
```

**ğŸ”¹ è¿‡æ»¤æ€§èƒ½çš„ä¼˜åŒ–æ€è·¯**
```
é¢„ç¼–è¯‘æ­£åˆ™ï¼šé¿å…é‡å¤ç¼–è¯‘å¼€é”€
åˆ†å±‚è¿‡æ»¤ï¼šç²¾ç¡®åŒ¹é… â†’ å‰ç¼€åŒ¹é… â†’ æ­£åˆ™åŒ¹é…
ç»“æœç¼“å­˜ï¼šç¼“å­˜å¸¸ç”¨è¡¨çš„åŒ¹é…ç»“æœ
æ‰¹é‡å¤„ç†ï¼šä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªè¿‡æ»¤åˆ¤æ–­
```

### 11.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†ç³»ç»Ÿ**ï¼šåªç›‘æ§æ ¸å¿ƒä¸šåŠ¡è¡¨ï¼Œè¿‡æ»¤æ—¥å¿—å’Œä¸´æ—¶è¡¨
- **æ•°æ®åŒæ­¥**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æ€§åŒæ­¥ç‰¹å®šæ•°æ®
- **å®æ—¶åˆ†æ**ï¼šåªå¤„ç†åˆ†æç›¸å…³çš„æ•°æ®å˜æ›´
- **å®¡è®¡ç›‘æ§**ï¼šé‡ç‚¹ç›‘æ§æ•æ„Ÿæ“ä½œå’Œæ ¸å¿ƒæ•°æ®å˜æ›´

**ğŸ”§ è¿ç»´å®è·µ**
- **è§„åˆ™ç®¡ç†**ï¼šå»ºç«‹è§„åˆ™ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»šæœºåˆ¶
- **æ€§èƒ½ç›‘æ§**ï¼šæŒç»­ç›‘æ§è¿‡æ»¤æ€§èƒ½ï¼ŒåŠæ—¶ä¼˜åŒ–
- **æµ‹è¯•éªŒè¯**ï¼šé€šè¿‡å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•éªŒè¯è§„åˆ™æ­£ç¡®æ€§
- **æ•…éšœå¤„ç†**ï¼šå»ºç«‹è¿‡æ»¤è§„åˆ™å¼‚å¸¸çš„å¿«é€Ÿå®šä½å’Œæ¢å¤æœºåˆ¶

**æ ¸å¿ƒè®°å¿†**ï¼š
- Canalè¿‡æ»¤æ˜¯æ•°æ®åŒæ­¥çš„ç¬¬ä¸€é“é—¨ï¼Œé…ç½®éœ€è°¨æ…
- æ­£åˆ™è¡¨è¾¾å¼æ˜¯è¿‡æ»¤è§„åˆ™çš„æ ¸å¿ƒï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡
- åŠ¨æ€è¿‡æ»¤æä¾›çµæ´»æ€§ï¼Œä½†è¦æ³¨æ„è§„åˆ™æ›´æ–°çš„æ—¶æ•ˆæ€§
- æ€§èƒ½ä¼˜åŒ–æ˜¯å¤§æ•°æ®é‡åœºæ™¯ä¸‹çš„å¿…è¦æªæ–½
- å……åˆ†æµ‹è¯•æ˜¯ç¡®ä¿è¿‡æ»¤è§„åˆ™æ­£ç¡®æ€§çš„å…³é”®

> **âš ï¸ é‡è¦æé†’**ï¼šè¿‡æ»¤è§„åˆ™ä¸€æ—¦é…ç½®é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´é‡è¦æ•°æ®ä¸¢å¤±æˆ–æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼ŒåŠ¡å¿…åœ¨æµ‹è¯•ç¯å¢ƒè¿›è¡Œå……åˆ†éªŒè¯ï¼