---
title: 3ã€my.cnfæ–‡ä»¶ç»“æ„ä¸è¯­æ³•è§„åˆ™
---
## ğŸ“š ç›®å½•

1. [my.cnfé…ç½®æ–‡ä»¶åŸºç¡€æ¦‚å¿µ](#1-mycnfé…ç½®æ–‡ä»¶åŸºç¡€æ¦‚å¿µ)
2. [é…ç½®æ–‡ä»¶åŸºæœ¬è¯­æ³•ç»“æ„](#2-é…ç½®æ–‡ä»¶åŸºæœ¬è¯­æ³•ç»“æ„)
3. [é…ç½®ç»„è¯¦è§£](#3-é…ç½®ç»„è¯¦è§£)
4. [é…ç½®å‚æ•°æ ¼å¼è§„èŒƒ](#4-é…ç½®å‚æ•°æ ¼å¼è§„èŒƒ)
5. [å‚æ•°å€¼ç±»å‹ä¸è¡¨ç¤ºæ–¹æ³•](#5-å‚æ•°å€¼ç±»å‹ä¸è¡¨ç¤ºæ–¹æ³•)
6. [æ³¨é‡Šè¯­æ³•ä¸æ–‡æ¡£åŒ–](#6-æ³¨é‡Šè¯­æ³•ä¸æ–‡æ¡£åŒ–)
7. [é…ç½®æ–‡ä»¶ç¼–ç ä¸æ£€æµ‹](#7-é…ç½®æ–‡ä»¶ç¼–ç ä¸æ£€æµ‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ my.cnfé…ç½®æ–‡ä»¶åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯my.cnfæ–‡ä»¶


**my.cnfæ–‡ä»¶** æ˜¯MySQLæ•°æ®åº“ç³»ç»Ÿçš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œå°±åƒæ˜¯MySQLçš„"è®¾ç½®é¢æ¿"ã€‚

```
ç®€å•ç†è§£ï¼š
my.cnf = MySQLçš„é…ç½®è¯´æ˜ä¹¦
å‘Šè¯‰MySQLï¼šæ€ä¹ˆå¯åŠ¨ã€ç”¨å¤šå°‘å†…å­˜ã€å­˜å‚¨åœ¨å“ªé‡Œç­‰ç­‰
```

**ä¸ºä»€ä¹ˆéœ€è¦é…ç½®æ–‡ä»¶ï¼Ÿ**
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰MySQLè®¾ç½®é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹
- **æŒä¹…ä¿å­˜**ï¼šé‡å¯åé…ç½®ä¾ç„¶æœ‰æ•ˆ
- **çµæ´»è°ƒæ•´**ï¼šä¸ç”¨æ”¹ä»£ç å°±èƒ½è°ƒä¼˜æ€§èƒ½
- **æ ‡å‡†åŒ–**ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ç›¸åŒçš„é…ç½®æ ‡å‡†

### 1.2 my.cnfæ–‡ä»¶çš„ä½œç”¨èŒƒå›´


```
my.cnfå½±å“èŒƒå›´ï¼š
â”œâ”€â”€ ğŸ“Š æœåŠ¡å™¨ç«¯é…ç½® - MySQLæœåŠ¡å™¨å¦‚ä½•è¿è¡Œ
â”œâ”€â”€ ğŸ–¥ï¸ å®¢æˆ·ç«¯é…ç½® - mysqlå‘½ä»¤è¡Œå·¥å…·å¦‚ä½•è¿æ¥
â”œâ”€â”€ ğŸ”§ å·¥å…·é…ç½® - mysqldumpã€mysqlcheckç­‰å·¥å…·
â””â”€â”€ ğŸ¯ ç¨‹åºé…ç½® - è‡ªå®šä¹‰MySQLç¨‹åºçš„è¡Œä¸º
```

### 1.3 é…ç½®æ–‡ä»¶ä½ç½®å±‚çº§


MySQLæŒ‰ä»¥ä¸‹**ä¼˜å…ˆçº§é¡ºåº**è¯»å–é…ç½®æ–‡ä»¶ï¼š

```
é…ç½®æ–‡ä»¶è¯»å–é¡ºåºï¼ˆLinuxï¼‰ï¼š
1. /etc/my.cnf                    â† ç³»ç»Ÿå…¨å±€é…ç½®
2. /etc/mysql/my.cnf              â† MySQLä¸“ç”¨ç›®å½•  
3. /usr/etc/my.cnf                â† ç”¨æˆ·çº§é…ç½®
4. ~/.my.cnf                      â† ä¸ªäººé…ç½®æ–‡ä»¶
5. å‘½ä»¤è¡Œå‚æ•° --defaults-file      â† æŒ‡å®šé…ç½®æ–‡ä»¶

âš ï¸ é‡è¦ï¼šåè¯»å–çš„é…ç½®ä¼šè¦†ç›–å…ˆè¯»å–çš„é…ç½®
```

**Windowsç³»ç»Ÿé…ç½®æ–‡ä»¶ä½ç½®ï¼š**
```
Windowsé…ç½®æ–‡ä»¶é¡ºåºï¼š
1. C:\Windows\my.ini
2. C:\Windows\my.cnf  
3. C:\my.ini
4. C:\my.cnf
5. MySQLå®‰è£…ç›®å½•\my.ini
```

---

## 2. ğŸ“ é…ç½®æ–‡ä»¶åŸºæœ¬è¯­æ³•ç»“æ„


### 2.1 é…ç½®æ–‡ä»¶æ•´ä½“ç»“æ„


my.cnfæ–‡ä»¶é‡‡ç”¨**INIæ–‡ä»¶æ ¼å¼**ï¼Œç»“æ„æ¸…æ™°æ˜“æ‡‚ï¼š

```ini
# è¿™æ˜¯æ³¨é‡Šè¡Œ
[é…ç½®ç»„å]
å‚æ•°å = å‚æ•°å€¼
å‚æ•°å = å‚æ•°å€¼

[å¦ä¸€ä¸ªé…ç½®ç»„]
å‚æ•°å = å‚æ•°å€¼
```

**åŸºæœ¬è¯­æ³•è§„åˆ™ï¼š**

| è¯­æ³•å…ƒç´  | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `[ç»„å]` | **é…ç½®ç»„æ ‡è¯†** | `[mysqld]` |
| `å‚æ•°=å€¼` | **å‚æ•°è®¾ç½®** | `port=3306` |
| `#æ³¨é‡Š` | **æ³¨é‡Šè¯´æ˜** | `# è¿™æ˜¯ç«¯å£è®¾ç½®` |
| `ç©ºè¡Œ` | **ç»“æ„åˆ†éš”** | ç”¨äºåˆ†éš”ä¸åŒéƒ¨åˆ† |

### 2.2 å®Œæ•´é…ç½®æ–‡ä»¶ç¤ºä¾‹


```ini
# MySQLé…ç½®æ–‡ä»¶ç¤ºä¾‹
# åˆ›å»ºæ—¥æœŸï¼š2025-01-09

# ==========================================
# æœåŠ¡å™¨ç«¯é…ç½®
# ==========================================
[mysqld]
# åŸºç¡€è¿æ¥è®¾ç½®
port = 3306
bind-address = 127.0.0.1
socket = /var/run/mysqld/mysqld.sock

# å­˜å‚¨å¼•æ“è®¾ç½®  
default-storage-engine = InnoDB

# å†…å­˜è®¾ç½®
innodb_buffer_pool_size = 1G
key_buffer_size = 256M

# ==========================================
# å®¢æˆ·ç«¯é…ç½®
# ==========================================
[mysql]
# é»˜è®¤å­—ç¬¦é›†
default-character-set = utf8mb4

# ==========================================
# é€šç”¨å®¢æˆ·ç«¯é…ç½®
# ==========================================
[client]
port = 3306
socket = /var/run/mysqld/mysqld.sock
default-character-set = utf8mb4
```

### 2.3 è¯­æ³•ç»†èŠ‚è¯´æ˜


**âœ… æ­£ç¡®çš„è¯­æ³•æ ¼å¼ï¼š**
```ini
# ä»¥ä¸‹éƒ½æ˜¯æ­£ç¡®çš„å†™æ³•
port = 3306                    # æ ‡å‡†æ ¼å¼
port=3306                     # æ— ç©ºæ ¼ä¹Ÿå¯ä»¥
port = "3306"                 # å­—ç¬¦ä¸²å¯ä»¥åŠ å¼•å·
skip-networking               # å¸ƒå°”å€¼å¯ä»¥åªå†™å‚æ•°å
```

**âŒ é”™è¯¯çš„è¯­æ³•æ ¼å¼ï¼š**
```ini
# ä»¥ä¸‹æ˜¯é”™è¯¯å†™æ³•
port 3306                     # ç¼ºå°‘ç­‰å·
[mysqld                       # ç¼ºå°‘å³æ‹¬å·
port = = 3306                 # å¤šä½™çš„ç­‰å·
port = 3306 3307             # å¤šä¸ªå€¼æ²¡æœ‰å¼•å·
```

---

## 3. ğŸ¯ é…ç½®ç»„è¯¦è§£


### 3.1 [mysqld] æœåŠ¡å™¨ç«¯é…ç½®ç»„


`[mysqld]` æ˜¯**æœ€é‡è¦çš„é…ç½®ç»„**ï¼Œæ§åˆ¶MySQLæœåŠ¡å™¨çš„æ ¸å¿ƒè¡Œä¸ºã€‚

**ä¸»è¦é…ç½®ç±»åˆ«ï¼š**

```ini
[mysqld]
# ğŸ”Œ ç½‘ç»œè¿æ¥é…ç½®
port = 3306                        # ç›‘å¬ç«¯å£
bind-address = 0.0.0.0             # ç»‘å®šIPåœ°å€
max_connections = 200              # æœ€å¤§è¿æ¥æ•°

# ğŸ’¾ å­˜å‚¨é…ç½®  
datadir = /var/lib/mysql           # æ•°æ®å­˜å‚¨ç›®å½•
tmpdir = /tmp                      # ä¸´æ—¶æ–‡ä»¶ç›®å½•
default-storage-engine = InnoDB    # é»˜è®¤å­˜å‚¨å¼•æ“

# ğŸ§  å†…å­˜é…ç½®
innodb_buffer_pool_size = 1G       # InnoDBç¼“å†²æ± å¤§å°
key_buffer_size = 256M             # MyISAMç´¢å¼•ç¼“å†²åŒº
sort_buffer_size = 2M              # æ’åºç¼“å†²åŒº

# ğŸ“ æ—¥å¿—é…ç½®
log-error = /var/log/mysql/error.log    # é”™è¯¯æ—¥å¿—
slow_query_log = 1                      # å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—
long_query_time = 2                     # æ…¢æŸ¥è¯¢é˜ˆå€¼(ç§’)
```

**é…ç½®ç»„ä½œç”¨èŒƒå›´ï¼š**
```
[mysqld] å½±å“ï¼š
âœ… MySQLæœåŠ¡å™¨è¿›ç¨‹ (mysqld)
âŒ ä¸å½±å“å®¢æˆ·ç«¯å·¥å…·
âŒ ä¸å½±å“mysqlå‘½ä»¤è¡Œ
```

### 3.2 [mysql] å®¢æˆ·ç«¯é…ç½®ç»„


`[mysql]` ä¸“é—¨é…ç½® **mysqlå‘½ä»¤è¡Œå®¢æˆ·ç«¯å·¥å…·**ã€‚

```ini
[mysql]
# ğŸ¨ æ˜¾ç¤ºé…ç½®
default-character-set = utf8mb4    # å­—ç¬¦é›†è®¾ç½®
prompt = "MySQL [\\d]> "           # å‘½ä»¤æç¤ºç¬¦æ ¼å¼  
pager = less                       # åˆ†é¡µå·¥å…·
tee = /tmp/mysql.log              # åŒæ—¶è¾“å‡ºåˆ°æ–‡ä»¶

# âš¡ è¡Œä¸ºé…ç½®
auto-rehash                       # å¯ç”¨è‡ªåŠ¨è¡¥å…¨
safe-updates                      # å®‰å…¨æ›´æ–°æ¨¡å¼
show-warnings                     # æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯
```

**å®é™…ä½¿ç”¨æ•ˆæœï¼š**
```bash
# é…ç½®å‰çš„mysqlå®¢æˆ·ç«¯
$ mysql -u root -p
mysql> 

# é…ç½®åçš„mysqlå®¢æˆ·ç«¯  
$ mysql -u root -p
MySQL [test]> SELECT * FROM users;  # æœ‰æ•°æ®åº“åæç¤º
```

### 3.3 [client] é€šç”¨å®¢æˆ·ç«¯é…ç½®ç»„


`[client]` é…ç½®**æ‰€æœ‰MySQLå®¢æˆ·ç«¯å·¥å…·**çš„å…±åŒè®¾ç½®ã€‚

```ini
[client]
# ğŸ”— è¿æ¥é…ç½®ï¼ˆæ‰€æœ‰å®¢æˆ·ç«¯å·¥å…·éƒ½ä¼šä½¿ç”¨ï¼‰
port = 3306                        # é»˜è®¤è¿æ¥ç«¯å£
socket = /var/run/mysqld/mysqld.sock  # Unixå¥—æ¥å­—è·¯å¾„
host = localhost                   # é»˜è®¤è¿æ¥ä¸»æœº
user = root                        # é»˜è®¤ç”¨æˆ·å
password = your_password           # é»˜è®¤å¯†ç ï¼ˆä¸æ¨èï¼‰

# ğŸŒ å­—ç¬¦é›†é…ç½®
default-character-set = utf8mb4    # å­—ç¬¦é›†è®¾ç½®
```

**å½±å“çš„å®¢æˆ·ç«¯å·¥å…·ï¼š**
```
[client] å½±å“çš„å·¥å…·ï¼š
â”œâ”€â”€ mysql          â† å‘½ä»¤è¡Œå®¢æˆ·ç«¯
â”œâ”€â”€ mysqldump      â† æ•°æ®å¯¼å‡ºå·¥å…·  
â”œâ”€â”€ mysqlcheck     â† è¡¨æ£€æŸ¥å·¥å…·
â”œâ”€â”€ mysqladmin     â† ç®¡ç†å·¥å…·
â”œâ”€â”€ mysqlimport    â† æ•°æ®å¯¼å…¥å·¥å…·
â””â”€â”€ å…¶ä»–MySQLå®¢æˆ·ç«¯å·¥å…·
```

### 3.4 é…ç½®ç»„ä¼˜å…ˆçº§ä¸ç»§æ‰¿


**ä¼˜å…ˆçº§è§„åˆ™ï¼š**
```
é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
1. å‘½ä»¤è¡Œå‚æ•°          â† æœ€é«˜ä¼˜å…ˆçº§
2. ä¸“ç”¨é…ç½®ç»„ [mysql]   â† å·¥å…·ä¸“ç”¨é…ç½®  
3. é€šç”¨é…ç½®ç»„ [client]  â† é€šç”¨å®¢æˆ·ç«¯é…ç½®
4. é»˜è®¤å€¼              â† ç³»ç»Ÿé»˜è®¤å€¼
```

**é…ç½®ç»§æ‰¿ç¤ºä¾‹ï¼š**
```ini
# é…ç½®æ–‡ä»¶å†…å®¹
[client]
port = 3306                    # æ‰€æœ‰å®¢æˆ·ç«¯é»˜è®¤ç«¯å£
default-character-set = utf8

[mysql]  
port = 3307                    # mysqlå®¢æˆ·ç«¯ä¸“ç”¨ç«¯å£
prompt = "MySQL> "

# ç»“æœï¼š
# mysqlå·¥å…·è¿æ¥ç«¯å£: 3307 (ä¸“ç”¨é…ç½®è¦†ç›–é€šç”¨é…ç½®)
# mysqldumpå·¥å…·è¿æ¥ç«¯å£: 3306 (ä½¿ç”¨é€šç”¨é…ç½®)
```

---

## 4. âš™ï¸ é…ç½®å‚æ•°æ ¼å¼è§„èŒƒ


### 4.1 å‚æ•°åæ ¼å¼è§„åˆ™


**å‚æ•°åå‘½åè§„èŒƒï¼š**
- ä½¿ç”¨ **å°å†™å­—æ¯**
- å•è¯é—´ç”¨ **è¿å­—ç¬¦(-)** æˆ– **ä¸‹åˆ’çº¿(_)** åˆ†éš”
- **è¿å­—ç¬¦å’Œä¸‹åˆ’çº¿ç­‰æ•ˆ**ï¼ˆMySQLè‡ªåŠ¨è½¬æ¢ï¼‰

```ini
# ä»¥ä¸‹å†™æ³•å®Œå…¨ç­‰æ•ˆ
max-connections = 200
max_connections = 200

# æ¨èä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆæ›´å¸¸è§ï¼‰
innodb_buffer_pool_size = 1G
key_buffer_size = 256M
```

### 4.2 å‚æ•°å€¼èµ‹å€¼è¯­æ³•


**åŸºæœ¬èµ‹å€¼æ ¼å¼ï¼š**
```ini
# æ ‡å‡†æ ¼å¼
å‚æ•°å = å‚æ•°å€¼

# å¯é€‰çš„ç©ºæ ¼
å‚æ•°å=å‚æ•°å€¼              # æ— ç©ºæ ¼
å‚æ•°å = å‚æ•°å€¼            # æ ‡å‡†ç©ºæ ¼  
å‚æ•°å   =   å‚æ•°å€¼        # å¤šä¸ªç©ºæ ¼ä¹Ÿå¯ä»¥
```

**ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼š**
```ini
# åŒ…å«ç©ºæ ¼çš„å€¼å¿…é¡»ç”¨å¼•å·
datadir = "/var/lib/mysql data"   # è·¯å¾„åŒ…å«ç©ºæ ¼
user = "mysql user"               # ç”¨æˆ·ååŒ…å«ç©ºæ ¼

# åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å€¼
password = "p@ssw0rd!123"         # å¯†ç åŒ…å«ç‰¹æ®Šå­—ç¬¦
socket = "/tmp/mysql.sock"        # è·¯å¾„åŒ…å«ç‚¹å·
```

### 4.3 å‚æ•°å€¼çš„å¤§å°å†™è§„åˆ™


```ini
# ğŸ”¸ æ•°å€¼ï¼šå¤§å°å†™æ— å…³
port = 3306
PORT = 3306              # ç­‰æ•ˆ

# ğŸ”¸ å¸ƒå°”å€¼ï¼šå¤§å°å†™æ— å…³  
skip-networking = true
skip-networking = TRUE   # ç­‰æ•ˆ
skip-networking = 1      # ç­‰æ•ˆ

# ğŸ”¸ å­—ç¬¦ä¸²ï¼šå¤§å°å†™æ•æ„Ÿ
default-storage-engine = InnoDB     # æ­£ç¡®
default-storage-engine = innodb     # å¯èƒ½é”™è¯¯ï¼ˆå–å†³äºå…·ä½“å‚æ•°ï¼‰

# ğŸ”¸ æ–‡ä»¶è·¯å¾„ï¼šå–å†³äºæ“ä½œç³»ç»Ÿ
datadir = /var/lib/mysql            # Linux: å¤§å°å†™æ•æ„Ÿ
datadir = C:\MySQL\Data             # Windows: å¤§å°å†™ä¸æ•æ„Ÿ
```

---

## 5. ğŸ“Š å‚æ•°å€¼ç±»å‹ä¸è¡¨ç¤ºæ–¹æ³•


### 5.1 å¸ƒå°”å€¼å‚æ•°è¡¨ç¤ºæ–¹æ³•


å¸ƒå°”å€¼å‚æ•°ç”¨äºå¼€å¯æˆ–å…³é—­æŸä¸ªåŠŸèƒ½ï¼Œæœ‰å¤šç§è¡¨ç¤ºæ–¹æ³•ï¼š

**âœ… è¡¨ç¤º"çœŸ"çš„å†™æ³•ï¼š**
```ini
# æ–¹æ³•1ï¼šåªå†™å‚æ•°åï¼ˆæ¨èï¼‰
skip-networking                    # å¼€å¯skip-networking

# æ–¹æ³•2ï¼šæ˜ç¡®èµ‹å€¼
skip-networking = 1               # æ•°å­—1è¡¨ç¤ºçœŸ
skip-networking = ON              # ONè¡¨ç¤ºçœŸ  
skip-networking = TRUE            # TRUEè¡¨ç¤ºçœŸ
skip-networking = YES             # YESè¡¨ç¤ºçœŸ
```

**âŒ è¡¨ç¤º"å‡"çš„å†™æ³•ï¼š**
```ini
# æ–¹æ³•1ï¼šæ³¨é‡Šæ‰å‚æ•°ï¼ˆæ¨èï¼‰
# skip-networking                  # æ³¨é‡Šæ‰å°±æ˜¯å…³é—­

# æ–¹æ³•2ï¼šæ˜ç¡®èµ‹å€¼ä¸ºå‡
skip-networking = 0               # æ•°å­—0è¡¨ç¤ºå‡
skip-networking = OFF             # OFFè¡¨ç¤ºå‡
skip-networking = FALSE           # FALSEè¡¨ç¤ºå‡  
skip-networking = NO              # NOè¡¨ç¤ºå‡
```

**å®é™…ä½¿ç”¨å»ºè®®ï¼š**
```ini
# ğŸ“ æ¨èå†™æ³•ï¼ˆæ›´æ¸…æ™°ï¼‰
# å¼€å¯åŠŸèƒ½ï¼šç›´æ¥å†™å‚æ•°å
slow_query_log                    # å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—
log_bin                          # å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—

# å…³é—­åŠŸèƒ½ï¼šæ³¨é‡Šæ‰
# skip-networking                 # ä¸è·³è¿‡ç½‘ç»œï¼ˆå…è®¸è¿œç¨‹è¿æ¥ï¼‰
# read_only                       # ä¸å¯ç”¨åªè¯»æ¨¡å¼
```

### 5.2 æ•°å€¼å‹å‚æ•°å•ä½è®¾ç½®


MySQLæ”¯æŒå¤šç§æ•°å€¼å•ä½ï¼Œè®©é…ç½®æ›´ç›´è§‚ï¼š

**ğŸ“ å†…å­˜å¤§å°å•ä½ï¼š**
```ini
# å­—èŠ‚å•ä½ï¼ˆé»˜è®¤ï¼‰
innodb_buffer_pool_size = 1073741824    # 1GB = 1073741824å­—èŠ‚

# ä½¿ç”¨å•ä½åç¼€ï¼ˆæ¨èï¼‰
innodb_buffer_pool_size = 1G             # 1å‰å­—èŠ‚
key_buffer_size = 256M                   # 256å…†å­—èŠ‚  
read_buffer_size = 128K                  # 128åƒå­—èŠ‚

# æ”¯æŒçš„å†…å­˜å•ä½
innodb_buffer_pool_size = 1024           # å­—èŠ‚ï¼ˆæ— å•ä½ï¼‰
innodb_buffer_pool_size = 1K             # åƒå­—èŠ‚ (1024å­—èŠ‚)
innodb_buffer_pool_size = 1M             # å…†å­—èŠ‚ (1024K)  
innodb_buffer_pool_size = 1G             # å‰å­—èŠ‚ (1024M)
innodb_buffer_pool_size = 1T             # å¤ªå­—èŠ‚ (1024G)
```

**â° æ—¶é—´å•ä½ï¼š**
```ini
# æ—¶é—´å•ä½ç¤ºä¾‹
long_query_time = 2                      # ç§’ï¼ˆé»˜è®¤å•ä½ï¼‰
connect_timeout = 10                     # 10ç§’
wait_timeout = 8h                        # 8å°æ—¶
interactive_timeout = 1d                 # 1å¤©

# æ”¯æŒçš„æ—¶é—´å•ä½
wait_timeout = 3600                      # ç§’ï¼ˆæ— å•ä½ï¼‰
wait_timeout = 60m                       # åˆ†é’Ÿ
wait_timeout = 1h                        # å°æ—¶  
wait_timeout = 1d                        # å¤©
```

**å•ä½æ¢ç®—å¯¹ç…§è¡¨ï¼š**

| å†…å­˜å•ä½ | æ¢ç®—å…³ç³» | ç¤ºä¾‹ |
|---------|---------|------|
| **K** | 1K = 1024å­—èŠ‚ | `1K = 1024` |
| **M** | 1M = 1024K | `1M = 1048576` |  
| **G** | 1G = 1024M | `1G = 1073741824` |
| **T** | 1T = 1024G | `1T = 1099511627776` |

### 5.3 å­—ç¬¦ä¸²å‚æ•°å¼•å·è§„åˆ™


**ä»€ä¹ˆæ—¶å€™éœ€è¦å¼•å·ï¼š**

```ini
# âœ… ä¸éœ€è¦å¼•å·çš„æƒ…å†µ
datadir = /var/lib/mysql              # ç®€å•è·¯å¾„
user = mysql                          # ç®€å•ç”¨æˆ·å
port = 3306                          # æ•°å€¼

# âš ï¸ éœ€è¦å¼•å·çš„æƒ…å†µ  
datadir = "/var/lib/mysql data"       # åŒ…å«ç©ºæ ¼
password = "p@ssw0rd!#"              # åŒ…å«ç‰¹æ®Šå­—ç¬¦
socket = "/tmp/mysql.sock"           # æŸäº›ç‰¹æ®Šå­—ç¬¦
log_error = "/var/log/mysql/error.log"  # å¤æ‚è·¯å¾„

# ğŸ”¸ å¯é€‰å¼•å·çš„æƒ…å†µ
default_storage_engine = InnoDB      # ä¸åŠ å¼•å·
default_storage_engine = "InnoDB"    # åŠ å¼•å·ä¹Ÿå¯ä»¥
```

**å¼•å·ä½¿ç”¨è§„èŒƒï¼š**
```ini
# å•å¼•å·å’ŒåŒå¼•å·éƒ½å¯ä»¥ä½¿ç”¨
password = "my_password"              # åŒå¼•å·
password = 'my_password'              # å•å¼•å·

# å¼•å·å†…çš„å¼•å·éœ€è¦è½¬ä¹‰
password = "my\"password"             # åŒ…å«åŒå¼•å·
password = 'my\'password'             # åŒ…å«å•å¼•å·

# æ¨èï¼šç»Ÿä¸€ä½¿ç”¨åŒå¼•å·
socket = "/var/run/mysqld/mysqld.sock"
log_error = "/var/log/mysql/error.log"
```

---

## 6. ğŸ“ æ³¨é‡Šè¯­æ³•ä¸æ–‡æ¡£åŒ–


### 6.1 æ³¨é‡Šè¯­æ³•è§„åˆ™


my.cnfæ”¯æŒä¸¤ç§æ³¨é‡Šæ–¹å¼ï¼š

**ğŸ”¸ äº•å·æ³¨é‡Šï¼ˆæ¨èï¼‰ï¼š**
```ini
# è¿™æ˜¯å•è¡Œæ³¨é‡Š
port = 3306                    # è¡Œå°¾æ³¨é‡Š

# è¿™æ˜¯å¤šè¡Œæ³¨é‡Šçš„ç¬¬ä¸€è¡Œ
# è¿™æ˜¯å¤šè¡Œæ³¨é‡Šçš„ç¬¬äºŒè¡Œ  
# è¿™æ˜¯å¤šè¡Œæ³¨é‡Šçš„ç¬¬ä¸‰è¡Œ
bind-address = 127.0.0.1
```

**ğŸ”¸ åˆ†å·æ³¨é‡Šï¼š**
```ini
; è¿™ä¹Ÿæ˜¯æ³¨é‡Šï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰
port = 3306                    ; è¡Œå°¾æ³¨é‡Š
```

### 6.2 æ–‡æ¡£åŒ–æœ€ä½³å®è·µ


**ç»“æ„åŒ–æ³¨é‡Šæ¨¡æ¿ï¼š**
```ini
# ================================================================
# MySQLé…ç½®æ–‡ä»¶
# ç‰ˆæœ¬ï¼šMySQL 8.0
# åˆ›å»ºæ—¶é—´ï¼š2025-01-09
# ç»´æŠ¤è€…ï¼šDBA Team
# ç”¨é€”ï¼šç”Ÿäº§ç¯å¢ƒä¸»åº“é…ç½®
# ================================================================

# ----------------------------------------------------------------
# åŸºç¡€é…ç½®æ®µ
# ----------------------------------------------------------------
[mysqld]
# ç½‘ç»œè¿æ¥è®¾ç½®
port = 3306                    # ç›‘å¬ç«¯å£
bind-address = 0.0.0.0         # ç›‘å¬æ‰€æœ‰IPåœ°å€
max_connections = 200          # æœ€å¤§è¿æ¥æ•°

# å­˜å‚¨å¼•æ“é…ç½®
default-storage-engine = InnoDB  # é»˜è®¤å­˜å‚¨å¼•æ“

# ----------------------------------------------------------------  
# æ€§èƒ½ä¼˜åŒ–æ®µ
# ----------------------------------------------------------------
# InnoDBé…ç½®
innodb_buffer_pool_size = 2G   # ç¼“å†²æ± å¤§å°ï¼ˆç‰©ç†å†…å­˜çš„70%ï¼‰
innodb_log_file_size = 256M    # æ—¥å¿—æ–‡ä»¶å¤§å°
innodb_flush_log_at_trx_commit = 1  # äº‹åŠ¡æäº¤æ—¶åˆ·æ–°æ—¥å¿—

# MyISAMé…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
key_buffer_size = 128M         # ç´¢å¼•ç¼“å†²åŒºå¤§å°
```

**å‚æ•°è¯´æ˜æ³¨é‡Šï¼š**
```ini
# æ¯ä¸ªé‡è¦å‚æ•°éƒ½åº”è¯¥æœ‰è¯´æ˜æ³¨é‡Š
innodb_buffer_pool_size = 2G   # ç¼“å†²æ± å¤§å°ï¼Œå»ºè®®è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„70-80%
max_connections = 200          # æœ€å¤§è¿æ¥æ•°ï¼Œæ ¹æ®å¹¶å‘éœ€æ±‚è®¾ç½®
wait_timeout = 28800           # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆ8å°æ—¶ï¼‰ï¼Œé˜²æ­¢è¿æ¥æ³„éœ²
```

### 6.3 é…ç½®åˆ†ç»„ä¸æ³¨é‡Šç»“æ„


**æ¨èçš„æ³¨é‡Šç»“æ„ï¼š**
```ini
# ================================================================
# é…ç½®æ–‡ä»¶å¤´éƒ¨ä¿¡æ¯
# ================================================================

# ----------------------------------------------------------------
# æœåŠ¡å™¨åŸºç¡€é…ç½®
# ----------------------------------------------------------------
[mysqld]
# ç½‘ç»œè®¾ç½®
port = 3306
bind-address = 127.0.0.1

# å­˜å‚¨è®¾ç½®  
datadir = /var/lib/mysql
tmpdir = /tmp

# ----------------------------------------------------------------
# æ€§èƒ½è°ƒä¼˜é…ç½®
# ----------------------------------------------------------------
# å†…å­˜åˆ†é…
innodb_buffer_pool_size = 1G
key_buffer_size = 256M

# å¹¶å‘æ§åˆ¶
max_connections = 200
thread_cache_size = 50

# ----------------------------------------------------------------
# æ—¥å¿—é…ç½®
# ----------------------------------------------------------------
# é”™è¯¯æ—¥å¿—
log-error = /var/log/mysql/error.log

# æ…¢æŸ¥è¯¢æ—¥å¿—
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2

# ================================================================
# å®¢æˆ·ç«¯é…ç½®
# ================================================================
[client]
default-character-set = utf8mb4
```

---

## 7. ğŸ” é…ç½®æ–‡ä»¶ç¼–ç ä¸æ£€æµ‹


### 7.1 é…ç½®æ–‡ä»¶ç¼–ç è¦æ±‚


**æ¨èç¼–ç æ ¼å¼ï¼š**
```
âœ… UTF-8ï¼ˆæ¨èï¼‰          - æ”¯æŒå¤šè¯­è¨€ï¼Œé€šç”¨æ€§å¥½
âœ… ASCII                  - åŸºç¡€ç¼–ç ï¼Œå…¼å®¹æ€§æœ€å¥½  
âš ï¸ UTF-8 with BOM        - å¯èƒ½åœ¨æŸäº›ç³»ç»Ÿæœ‰é—®é¢˜
âŒ GBK/GB2312            - å¯èƒ½å¯¼è‡´å­—ç¬¦é—®é¢˜
âŒ UTF-16                - MySQLä¸å»ºè®®ä½¿ç”¨
```

**æ£€æŸ¥æ–‡ä»¶ç¼–ç ï¼š**
```bash
# Linux/Macæ£€æŸ¥ç¼–ç 
$ file -i /etc/mysql/my.cnf
/etc/mysql/my.cnf: text/plain; charset=utf-8

# è½¬æ¢ç¼–ç ï¼ˆå¦‚æœéœ€è¦ï¼‰
$ iconv -f gbk -t utf-8 my.cnf > my_utf8.cnf
```

### 7.2 è¯­æ³•é”™è¯¯æ£€æµ‹æ–¹æ³•


**æ–¹æ³•1ï¼šä½¿ç”¨mysqldæ£€æŸ¥è¯­æ³•**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®
$ mysqld --defaults-file=/path/to/my.cnf --help --verbose > /dev/null

# å¦‚æœæœ‰è¯­æ³•é”™è¯¯ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
$ mysqld --defaults-file=/etc/mysql/my.cnf --help --verbose > /dev/null
mysqld: [ERROR] Found option without preceding group in config file /etc/mysql/my.cnf at line: 15
```

**æ–¹æ³•2ï¼šæµ‹è¯•å¯åŠ¨MySQL**
```bash
# ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨ï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰
$ mysqld --defaults-file=/path/to/my.cnf --help

# æŸ¥çœ‹MySQLé”™è¯¯æ—¥å¿—
$ tail -f /var/log/mysql/error.log
```

**æ–¹æ³•3ï¼šä½¿ç”¨my_print_defaultså·¥å…·**
```bash
# æŸ¥çœ‹MySQLå®é™…è¯»å–çš„é…ç½®
$ my_print_defaults mysqld
--port=3306
--bind-address=127.0.0.1
--datadir=/var/lib/mysql

# æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®
$ my_print_defaults client mysql
--port=3306
--socket=/var/run/mysqld/mysqld.sock
--default-character-set=utf8mb4
```

### 7.3 å¸¸è§è¯­æ³•é”™è¯¯ä¸è§£å†³


**é”™è¯¯ç±»å‹å¯¹ç…§è¡¨ï¼š**

| é”™è¯¯ç±»å‹ | é”™è¯¯ç¤ºä¾‹ | æ­£ç¡®å†™æ³• | è¯´æ˜ |
|---------|---------|---------|------|
| **ç¼ºå°‘é…ç½®ç»„** | `port = 3306` | `[mysqld]`<br/>`port = 3306` | å‚æ•°å¿…é¡»åœ¨é…ç½®ç»„å†… |
| **æ‹¬å·ä¸åŒ¹é…** | `[mysqld` | `[mysqld]` | é…ç½®ç»„åéœ€è¦é—­åˆæ‹¬å· |
| **ç­‰å·é”™è¯¯** | `port 3306` | `port = 3306` | å‚æ•°èµ‹å€¼éœ€è¦ç­‰å· |
| **å€¼æ ¼å¼é”™è¯¯** | `max_connections = 200 300` | `max_connections = 200` | å•ä¸ªå‚æ•°åªèƒ½æœ‰ä¸€ä¸ªå€¼ |
| **å¼•å·ä¸åŒ¹é…** | `datadir = "/var/lib/mysql` | `datadir = "/var/lib/mysql"` | å¼•å·å¿…é¡»æˆå¯¹å‡ºç° |

**è¯­æ³•æ£€æŸ¥æ¸…å•ï¼š**
```ini
# âœ… æ£€æŸ¥æ¸…å•
â˜‘ï¸ æ¯ä¸ªå‚æ•°éƒ½åœ¨æŸä¸ª[é…ç½®ç»„]å†…
â˜‘ï¸ é…ç½®ç»„åç”¨æ–¹æ‹¬å·åŒ…å›´
â˜‘ï¸ å‚æ•°èµ‹å€¼ä½¿ç”¨ç­‰å·  
â˜‘ï¸ å¼•å·é…å¯¹æ­£ç¡®
â˜‘ï¸ æ²¡æœ‰é‡å¤çš„å‚æ•°å
â˜‘ï¸ æ–‡ä»¶ç¼–ç ä¸ºUTF-8
â˜‘ï¸ æ²¡æœ‰éæ³•å­—ç¬¦
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ my.cnfæœ¬è´¨ï¼šMySQLçš„"è®¾ç½®é¢æ¿"ï¼Œæ§åˆ¶æ‰€æœ‰MySQLè¡Œä¸º
ğŸ”¸ æ–‡ä»¶ç»“æ„ï¼š[é…ç½®ç»„] + å‚æ•°=å€¼ + æ³¨é‡Šçš„INIæ ¼å¼
ğŸ”¸ ä¸‰å¤§é…ç½®ç»„ï¼š[mysqld]æœåŠ¡å™¨ç«¯ã€[mysql]å®¢æˆ·ç«¯ã€[client]é€šç”¨å®¢æˆ·ç«¯
ğŸ”¸ è¯­æ³•è§„åˆ™ï¼šå‚æ•°åç”¨ä¸‹åˆ’çº¿ã€å€¼ç±»å‹ä¸°å¯Œã€æ”¯æŒå•ä½åç¼€
ğŸ”¸ ä¼˜å…ˆçº§ï¼šå‘½ä»¤è¡Œ > ä¸“ç”¨é…ç½®ç»„ > é€šç”¨é…ç½®ç»„ > é»˜è®¤å€¼
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é…ç½®ç»„çš„ä½œç”¨åŸŸ**
```
ç†è§£è¦ç‚¹ï¼š
- [mysqld]ï¼šåªå½±å“MySQLæœåŠ¡å™¨è¿›ç¨‹
- [mysql]ï¼šåªå½±å“mysqlå‘½ä»¤è¡Œå·¥å…·  
- [client]ï¼šå½±å“æ‰€æœ‰MySQLå®¢æˆ·ç«¯å·¥å…·
- é…ç½®ç»„ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå„å¸å…¶èŒ
```

**ğŸ”¹ å‚æ•°å€¼çš„è¡¨ç¤ºæ–¹æ³•**
```
è®°å¿†æ–¹æ³•ï¼š
- å¸ƒå°”å€¼ï¼šç›´æ¥å†™å‚æ•°åè¡¨ç¤ºå¼€å¯ï¼Œæ³¨é‡Šæ‰è¡¨ç¤ºå…³é—­
- æ•°å€¼ï¼šæ”¯æŒK/M/G/Tå•ä½ï¼Œ1G = 1024M
- å­—ç¬¦ä¸²ï¼šåŒ…å«ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦æ—¶éœ€è¦å¼•å·
- æ—¶é—´ï¼šæ”¯æŒm/h/då•ä½ï¼Œé»˜è®¤ä¸ºç§’
```

**ğŸ”¹ è¯­æ³•æ£€æŸ¥çš„é‡è¦æ€§**
```
å®é™…æ„ä¹‰ï¼š
- è¯­æ³•é”™è¯¯ä¼šå¯¼è‡´MySQLå¯åŠ¨å¤±è´¥
- ä½¿ç”¨mysqld --helpæ£€æŸ¥è¯­æ³•
- ä½¿ç”¨my_print_defaultsæŸ¥çœ‹å®é™…é…ç½®
- é…ç½®æ–‡ä»¶ç¼–ç å¿…é¡»æ˜¯UTF-8
```

### 8.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ“ é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š**
```ini
# ç”Ÿäº§ç¯å¢ƒæ ‡å‡†é…ç½®æ¨¡æ¿
[mysqld]
# åŸºç¡€è®¾ç½®
port = 3306
bind-address = 0.0.0.0
socket = /var/run/mysqld/mysqld.sock
datadir = /var/lib/mysql

# å­˜å‚¨å¼•æ“
default-storage-engine = InnoDB

# å†…å­˜é…ç½®
innodb_buffer_pool_size = 1G    # æ ¹æ®æœåŠ¡å™¨å†…å­˜è°ƒæ•´
key_buffer_size = 256M

# è¿æ¥é…ç½®  
max_connections = 200
connect_timeout = 10
wait_timeout = 28800

# æ—¥å¿—é…ç½®
log-error = /var/log/mysql/error.log
slow_query_log = 1
long_query_time = 2

[client]
default-character-set = utf8mb4
```

**ğŸ”§ é…ç½®ä¼˜åŒ–å»ºè®®ï¼š**
- **å¼€å‘ç¯å¢ƒ**ï¼šé‡ç‚¹å…³æ³¨ä¾¿äºè°ƒè¯•ï¼ˆå¼€å¯æ‰€æœ‰æ—¥å¿—ï¼‰
- **æµ‹è¯•ç¯å¢ƒ**ï¼šæ¥è¿‘ç”Ÿäº§é…ç½®ï¼ˆéªŒè¯æ€§èƒ½å‚æ•°ï¼‰
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šé‡ç‚¹å…³æ³¨æ€§èƒ½å’Œç¨³å®šæ€§
- **å®šæœŸå¤‡ä»½**ï¼šé…ç½®æ–‡ä»¶ä¿®æ”¹å‰å…ˆå¤‡ä»½

### 8.4 å¸¸è§é—®é¢˜ä¸è§£å†³


**Q1ï¼šé…ç½®ä¿®æ”¹åä¸ç”Ÿæ•ˆï¼Ÿ**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
$ mysql --help | grep "Default options"

# é‡å¯MySQLæœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ
$ systemctl restart mysql
```

**Q2ï¼šå¦‚ä½•ç¡®è®¤MySQLè¯»å–äº†å“ªä¸ªé…ç½®æ–‡ä»¶ï¼Ÿ**
```bash
# æŸ¥çœ‹MySQLå®é™…è¯»å–çš„é…ç½®
$ my_print_defaults --defaults-file=/etc/mysql/my.cnf mysqld
```

**Q3ï¼šé…ç½®å‚æ•°å¤§å°å†™æ•æ„Ÿå—ï¼Ÿ**
```
- å‚æ•°åï¼šå¤§å°å†™ä¸æ•æ„Ÿï¼ˆmax_connections = MAX_CONNECTIONSï¼‰
- é…ç½®ç»„åï¼šå¤§å°å†™ä¸æ•æ„Ÿï¼ˆ[mysqld] = [MYSQLD]ï¼‰  
- å‚æ•°å€¼ï¼šéƒ¨åˆ†æ•æ„Ÿï¼ˆInnoDB â‰  innodbï¼Œè·¯å¾„åœ¨Linuxä¸‹æ•æ„Ÿï¼‰
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹ï¼š**
- my.cnfæ˜¯MySQLçš„é…ç½®ä¸­å¿ƒï¼Œé‡‡ç”¨INIæ ¼å¼
- [mysqld]é…æœåŠ¡å™¨ï¼Œ[client]é…å®¢æˆ·ç«¯ï¼Œ[mysql]é…å‘½ä»¤è¡Œ
- å‚æ•°å€¼æ”¯æŒå•ä½åç¼€ï¼Œå¸ƒå°”å€¼ç›´æ¥å†™å‚æ•°å  
- è¯­æ³•æ£€æŸ¥ç”¨mysqld --helpï¼Œé…ç½®æŸ¥çœ‹ç”¨my_print_defaults
- ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯MySQLæ‰èƒ½ç”Ÿæ•ˆ