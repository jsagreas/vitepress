---
title: 42ã€åŠ¨æ€é…ç½®ç®¡ç†å®žæˆ˜
---
## ðŸ“š ç›®å½•

1. [åŠ¨æ€é…ç½®ç®¡ç†æ¦‚è¿°](#1-åŠ¨æ€é…ç½®ç®¡ç†æ¦‚è¿°)
2. [SETè¯­å¥è¯¦è§£](#2-SETè¯­å¥è¯¦è§£)
3. [æŒä¹…åŒ–é…ç½®ç®¡ç†](#3-æŒä¹…åŒ–é…ç½®ç®¡ç†)
4. [é…ç½®éªŒè¯ä¸Žå›žæ»š](#4-é…ç½®éªŒè¯ä¸Žå›žæ»š)
5. [é…ç½®å®‰å…¨ä¸Žç›‘æŽ§](#5-é…ç½®å®‰å…¨ä¸Žç›‘æŽ§)
6. [å®žæˆ˜åº”ç”¨ä¸Žæœ€ä½³å®žè·µ](#6-å®žæˆ˜åº”ç”¨ä¸Žæœ€ä½³å®žè·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸš€ åŠ¨æ€é…ç½®ç®¡ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åŠ¨æ€é…ç½®ç®¡ç†


**ðŸ”¸ åŸºæœ¬æ¦‚å¿µ**
```
åŠ¨æ€é…ç½®ï¼šåœ¨MySQLè¿è¡Œæ—¶ç›´æŽ¥ä¿®æ”¹å‚æ•°ï¼Œæ— éœ€é‡å¯æœåŠ¡
ä¼ ç»Ÿæ–¹å¼ï¼šä¿®æ”¹my.cnfæ–‡ä»¶ â†’ é‡å¯MySQL â†’ é…ç½®ç”Ÿæ•ˆ
åŠ¨æ€æ–¹å¼ï¼šæ‰§è¡ŒSETè¯­å¥ â†’ ç«‹å³ç”Ÿæ•ˆ â†’ å¯é€‰æ‹©æ˜¯å¦æŒä¹…åŒ–
```

> ðŸ’¡ **ç®€å•ç†è§£**ï¼šå°±åƒè°ƒèŠ‚æ±½è½¦ç©ºè°ƒæ¸©åº¦ï¼Œä¸ç”¨åœè½¦ç†„ç«ï¼Œç›´æŽ¥åœ¨é©¾é©¶æ—¶è°ƒæ•´

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€é…ç½®


**ðŸŽ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**
- **é›¶åœæœºè°ƒä¼˜**ï¼šä¸šåŠ¡è¿è¡Œä¸­è°ƒæ•´æ€§èƒ½å‚æ•°
- **å¿«é€Ÿå“åº”**ï¼šç´§æ€¥æƒ…å†µä¸‹ç«‹å³è°ƒæ•´é…ç½®
- **å®žéªŒæµ‹è¯•**ï¼šåœ¨çº¿æµ‹è¯•ä¸åŒå‚æ•°æ•ˆæžœ
- **æ¸è¿›ä¼˜åŒ–**ï¼šé€æ­¥è°ƒæ•´æ‰¾åˆ°æœ€ä½³é…ç½®

**ðŸ“Š ä¼ ç»Ÿ vs åŠ¨æ€é…ç½®å¯¹æ¯”**

| æ–¹é¢ | ä¼ ç»Ÿæ–¹å¼ | åŠ¨æ€é…ç½® |
|------|---------|---------|
| **ç”Ÿæ•ˆæ—¶é—´** | éœ€è¦é‡å¯(åˆ†é’Ÿçº§) | ç«‹å³ç”Ÿæ•ˆ(ç§’çº§) |
| **ä¸šåŠ¡å½±å“** | æœåŠ¡ä¸­æ–­ | é›¶åœæœº |
| **æµ‹è¯•æˆæœ¬** | é«˜(é¢‘ç¹é‡å¯) | ä½Ž(åœ¨çº¿æµ‹è¯•) |
| **å›žæ»šé€Ÿåº¦** | æ…¢(é‡å¯) | å¿«(ç«‹å³) |

### 1.3 é…ç½®ä½œç”¨åŸŸåˆ†ç±»


**ðŸ” ä¸‰ç§ä½œç”¨åŸŸè¯´æ˜Ž**

```
Globalçº§åˆ«(å…¨å±€)ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å½±å“æ•´ä¸ªMySQLå®žä¾‹   â”‚  â† æ‰€æœ‰æ–°è¿žæŽ¥éƒ½ä½¿ç”¨æ–°å€¼
â”‚  æ–°è¿žæŽ¥ä½¿ç”¨æ–°é…ç½®   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sessionçº§åˆ«(ä¼šè¯)ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åªå½±å“å½“å‰è¿žæŽ¥     â”‚  â† å…¶ä»–è¿žæŽ¥ä¸å—å½±å“
â”‚  è¿žæŽ¥æ–­å¼€åŽå¤±æ•ˆ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ··åˆçº§åˆ«ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—¢æœ‰Globalåˆæœ‰     â”‚  â† å¤§éƒ¨åˆ†å‚æ•°éƒ½æ˜¯è¿™ç§
â”‚  Sessionä¸¤ç§ä½œç”¨åŸŸ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. âš™ï¸ SETè¯­å¥è¯¦è§£


### 2.1 SET GLOBALè¯­å¥ä½¿ç”¨


**ðŸ”¸ åŸºæœ¬è¯­æ³•ä¸Žå«ä¹‰**

```sql
-- åŸºæœ¬è¯­æ³•
SET GLOBAL å‚æ•°å = å€¼;
SET $$GLOBAL.å‚æ•°å = å€¼;

-- å®žé™…ç¤ºä¾‹
SET GLOBAL max_connections = 1000;
SET $$GLOBAL.innodb_buffer_pool_size = '1G';
```

> ðŸ“– **é€šä¿—è§£é‡Š**ï¼š`SET GLOBAL`å°±åƒä¿®æ”¹"å…¬å¸è§„å®š"ï¼Œæ‰€æœ‰æ–°å…¥èŒå‘˜å·¥éƒ½æŒ‰æ–°è§„å®šæ‰§è¡Œï¼Œä½†å·²åœ¨èŒçš„å‘˜å·¥æŒ‰åŽŸè§„å®šç»§ç»­å·¥ä½œ

**ðŸ’¡ å…¸åž‹åº”ç”¨åœºæ™¯**

```sql
-- è°ƒæ•´è¿žæŽ¥æ•°é™åˆ¶
SET GLOBAL max_connections = 500;

-- ä¿®æ”¹æŸ¥è¯¢ç¼“å­˜å¤§å°
SET GLOBAL query_cache_size = 268435456;  -- 256MB

-- è°ƒæ•´æ…¢æŸ¥è¯¢æ—¶é—´é˜ˆå€¼
SET GLOBAL long_query_time = 2.0;

-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—
SET GLOBAL slow_query_log = ON;
```

**âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹**
```
ç”Ÿæ•ˆè§„åˆ™ï¼š
âœ… æ–°å»ºè¿žæŽ¥ï¼šç«‹å³ä½¿ç”¨æ–°å€¼
âŒ çŽ°æœ‰è¿žæŽ¥ï¼šç»§ç»­ä½¿ç”¨æ—§å€¼(é™¤éžæ”¯æŒåŠ¨æ€åˆ‡æ¢)
ðŸ”„ é‡å¯åŽï¼šæ¢å¤åˆ°my.cnfä¸­çš„å€¼(é™¤éžæŒä¹…åŒ–)
```

### 2.2 SET SESSIONè¯­å¥åº”ç”¨


**ðŸ”¸ ä¼šè¯çº§é…ç½®è¯´æ˜Ž**

```sql
-- åŸºæœ¬è¯­æ³•
SET SESSION å‚æ•°å = å€¼;
SET $$SESSION.å‚æ•°å = å€¼;
SET å‚æ•°å = å€¼;  -- é»˜è®¤æ˜¯SESSIONçº§åˆ«

-- å®žé™…ç¤ºä¾‹
SET SESSION sql_mode = 'STRICT_TRANS_TABLES';
SET autocommit = 0;  -- å…³é—­è‡ªåŠ¨æäº¤
```

> ðŸ“– **é€šä¿—è§£é‡Š**ï¼š`SET SESSION`å°±åƒæ¯ä¸ªäººè®¾ç½®è‡ªå·±çš„å·¥ä½œä¹ æƒ¯ï¼Œåªå½±å“è‡ªå·±ï¼Œä¸å½±å“å…¶ä»–äºº

**ðŸ› ï¸ å¸¸ç”¨SESSIONé…ç½®ç¤ºä¾‹**

```sql
-- è®¾ç½®SQLæ¨¡å¼(å½±å“æ•°æ®æ ¡éªŒ)
SET SESSION sql_mode = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER';

-- è®¾ç½®å­—ç¬¦é›†
SET SESSION character_set_client = 'utf8mb4';

-- è°ƒæ•´æŽ’åºç¼“å†²åŒºå¤§å°
SET SESSION sort_buffer_size = 2097152;  -- 2MB

-- è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«
SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;

-- å¼€å¯profileåˆ†æž
SET SESSION profiling = ON;
```

**ðŸ“Š SESSIONé…ç½®ç”Ÿæ•ˆèŒƒå›´**

```
å½“å‰è¿žæŽ¥ç”Ÿå‘½å‘¨æœŸï¼š
è¿žæŽ¥å»ºç«‹ â†’ SESSIONé…ç½®ç”Ÿæ•ˆ â†’ æ‰§è¡ŒSQL â†’ è¿žæŽ¥æ–­å¼€
    â†“           â†“              â†“          â†“
  ä½¿ç”¨é»˜è®¤å€¼   ä½¿ç”¨æ–°é…ç½®å€¼    æŒç»­ç”Ÿæ•ˆ    é…ç½®å¤±æ•ˆ
```

### 2.3 Global vs Sessionä¼˜å…ˆçº§


**ðŸ” ä¼˜å…ˆçº§è§„åˆ™è¯´æ˜Ž**

```
å‚æ•°å€¼çš„æŸ¥æ‰¾é¡ºåºï¼š
1. SESSIONçº§åˆ«æœ‰å€¼ â†’ ä½¿ç”¨SESSIONå€¼
2. SESSIONçº§åˆ«æ— å€¼ â†’ ä½¿ç”¨GLOBALå€¼
3. GLOBALçº§åˆ«æ— å€¼ â†’ ä½¿ç”¨é»˜è®¤å€¼

ç¤ºä¾‹æ¼”ç¤ºï¼š
- GLOBAL: max_join_size = 1000000
- SESSION: max_join_size = 500000  
- å®žé™…ä½¿ç”¨: 500000 (SESSIONä¼˜å…ˆ)
```

**ðŸ’» å®žé™…éªŒè¯ç¤ºä¾‹**

```sql
-- æŸ¥çœ‹å½“å‰å€¼
SELECT $$GLOBAL.max_join_size, $$SESSION.max_join_size;

-- è®¾ç½®ä¸åŒçº§åˆ«çš„å€¼
SET GLOBAL max_join_size = 1000000;
SET SESSION max_join_size = 500000;

-- éªŒè¯ç”Ÿæ•ˆæƒ…å†µ
SELECT $$GLOBAL.max_join_size, $$SESSION.max_join_size;
-- ç»“æžœ: 1000000, 500000

-- é‡ç½®SESSIONçº§åˆ«
SET SESSION max_join_size = DEFAULT;
SELECT $$SESSION.max_join_size;
-- ç»“æžœ: 1000000 (ç»§æ‰¿GLOBALå€¼)
```

---

## 3. ðŸ’¾ æŒä¹…åŒ–é…ç½®ç®¡ç†


### 3.1 SET PERSISTæŒä¹…åŒ–é…ç½®


**ðŸ”¸ æŒä¹…åŒ–çš„æ ¸å¿ƒæ¦‚å¿µ**

```
SET PERSISTçš„ä½œç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç«‹å³ç”Ÿæ•ˆ      â”‚ ï¼‹ â”‚   æŒä¹…åŒ–ä¿å­˜      â”‚
â”‚ (ç±»ä¼¼SET GLOBAL) â”‚    â”‚ (é‡å¯åŽä»æœ‰æ•ˆ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                    ä¿å­˜åˆ°mysqld-auto.cnf
```

> ðŸ’¡ **é€šä¿—ç†è§£**ï¼š`SET PERSIST`å°±åƒä¿®æ”¹å…¬å¸åˆ¶åº¦å¹¶å†™å…¥å‘˜å·¥æ‰‹å†Œï¼Œç«‹å³ç”Ÿæ•ˆä¸”æ°¸ä¹…ä¿å­˜

**ðŸ’» åŸºæœ¬ä½¿ç”¨æ–¹æ³•**

```sql
-- åŸºæœ¬è¯­æ³•
SET PERSIST å‚æ•°å = å€¼;

-- å®žé™…ç¤ºä¾‹
SET PERSIST max_connections = 1000;
SET PERSIST innodb_buffer_pool_size = 2147483648;  -- 2GB
SET PERSIST slow_query_log = ON;

-- éªŒè¯æŒä¹…åŒ–é…ç½®
SELECT * FROM performance_schema.persisted_variables;
```

**ðŸ“‚ æŒä¹…åŒ–æ–‡ä»¶è¯´æ˜Ž**

```
æ–‡ä»¶ä½ç½®ï¼šdatadir/mysqld-auto.cnf
æ–‡ä»¶æ ¼å¼ï¼šJSONæ ¼å¼å­˜å‚¨
æ–‡ä»¶ä½œç”¨ï¼šMySQLå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½

æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š
{
  "Version": 1,
  "mysql_server": {
    "max_connections": {
      "Value": "1000",
      "Metadata": {
        "Timestamp": "2025-09-11 15:30:00.123456",
        "User": "root",
        "Host": "localhost"
      }
    }
  }
}
```

### 3.2 SET PERSIST_ONLYä»…æŒä¹…åŒ–


**ðŸ”¸ ä»…æŒä¹…åŒ–çš„ä½¿ç”¨åœºæ™¯**

```
é€‚ç”¨äºŽåªè¯»å‚æ•°ï¼š
- innodb_buffer_pool_size (éœ€è¦é‡å¯ç”Ÿæ•ˆ)
- innodb_log_file_size (éœ€è¦é‡å¯ç”Ÿæ•ˆ)
- ç­‰ç­‰...

è¯­æ³•ç¤ºä¾‹ï¼š
SET PERSIST_ONLY innodb_buffer_pool_size = 4294967296;  -- 4GB
-- æ³¨æ„ï¼šä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œé‡å¯åŽæ‰ç”Ÿæ•ˆ
```

> ðŸ“– **é€šä¿—è§£é‡Š**ï¼š`PERSIST_ONLY`åƒå†™è´­ç‰©æ¸…å•ï¼Œè®°å½•ä¸‹æ¥ä½†ä¸ç«‹å³æ‰§è¡Œï¼Œç­‰ä¸‹æ¬¡"é‡å¯"(åŽ»è´­ç‰©)æ—¶æ‰æ‰§è¡Œ

**ðŸ”§ å®žé™…åº”ç”¨ç¤ºä¾‹**

```sql
-- è®¾ç½®ç¼“å†²æ± å¤§å°(åªè¯»å‚æ•°ï¼Œéœ€é‡å¯)
SET PERSIST_ONLY innodb_buffer_pool_size = 4294967296;

-- è®¾ç½®æ—¥å¿—æ–‡ä»¶å¤§å°(åªè¯»å‚æ•°ï¼Œéœ€é‡å¯)  
SET PERSIST_ONLY innodb_log_file_size = 1073741824;

-- æŸ¥çœ‹ä»…æŒä¹…åŒ–çš„é…ç½®
SELECT * FROM performance_schema.persisted_variables 
WHERE VARIABLE_NAME IN ('innodb_buffer_pool_size', 'innodb_log_file_size');
```

### 3.3 RESET PERSISTé‡ç½®æŒä¹…åŒ–


**ðŸ”¸ é‡ç½®æŒä¹…åŒ–é…ç½®**

```sql
-- é‡ç½®å•ä¸ªå‚æ•°
RESET PERSIST max_connections;

-- é‡ç½®æ‰€æœ‰æŒä¹…åŒ–é…ç½®
RESET PERSIST;

-- é‡ç½®åŽéªŒè¯
SELECT * FROM performance_schema.persisted_variables;
-- åº”è¯¥ä¸ºç©ºæˆ–ä¸åŒ…å«è¢«é‡ç½®çš„å‚æ•°
```

**âš ï¸ é‡ç½®æ“ä½œæ³¨æ„äº‹é¡¹**

```
é‡ç½®æ•ˆæžœï¼š
âœ… åˆ é™¤mysqld-auto.cnfä¸­çš„å¯¹åº”é…ç½®
âœ… ä¸‹æ¬¡é‡å¯æ—¶ä½¿ç”¨my.cnfä¸­çš„å€¼
âŒ ä¸å½±å“å½“å‰è¿è¡Œä¸­çš„å‚æ•°å€¼

é‡ç½®æµç¨‹ï¼š
å½“å‰å€¼ä¿æŒä¸å˜ â†’ åˆ é™¤æŒä¹…åŒ–è®°å½• â†’ é‡å¯åŽæ¢å¤é»˜è®¤
```

---

## 4. âœ… é…ç½®éªŒè¯ä¸Žå›žæ»š


### 4.1 åŠ¨æ€é…ç½®ç”Ÿæ•ˆéªŒè¯


**ðŸ” éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ**

```sql
-- æ–¹æ³•1ï¼šç›´æŽ¥æŸ¥çœ‹å‚æ•°å€¼
SELECT $$GLOBAL.max_connections;
SELECT $$SESSION.sql_mode;

-- æ–¹æ³•2ï¼šä½¿ç”¨SHOW VARIABLES
SHOW GLOBAL VARIABLES LIKE 'max_connections';
SHOW SESSION VARIABLES LIKE 'sql_mode';

-- æ–¹æ³•3ï¼šæŸ¥çœ‹é…ç½®å˜æ›´åŽ†å²
SELECT * FROM performance_schema.variables_info 
WHERE VARIABLE_NAME = 'max_connections';
```

**ðŸ“Š é…ç½®ç”Ÿæ•ˆçŠ¶æ€æ£€æŸ¥**

```sql
-- æ£€æŸ¥å‚æ•°æ˜¯å¦æ”¯æŒåŠ¨æ€ä¿®æ”¹
SELECT VARIABLE_NAME, VARIABLE_SCOPE, SET_TIME, SET_USER, SET_HOST
FROM performance_schema.variables_info 
WHERE VARIABLE_NAME IN ('max_connections', 'innodb_buffer_pool_size');

-- å¯¹æ¯”å½“å‰å€¼ä¸Žé»˜è®¤å€¼
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE as 'Current Value',
    DEFAULT_VALUE as 'Default Value',
    CASE WHEN VARIABLE_VALUE = DEFAULT_VALUE 
         THEN 'Same' ELSE 'Modified' END as 'Status'
FROM performance_schema.global_variables g
JOIN performance_schema.global_status s ON g.VARIABLE_NAME = s.VARIABLE_NAME
WHERE g.VARIABLE_NAME = 'max_connections';
```

### 4.2 åŠ¨æ€é…ç½®å›žæ»šç­–ç•¥


**ðŸ”„ å¿«é€Ÿå›žæ»šæ–¹æ³•**

```sql
-- æ–¹æ³•1ï¼šè®¾ç½®ä¸ºé»˜è®¤å€¼
SET GLOBAL max_connections = DEFAULT;

-- æ–¹æ³•2ï¼šè®°å½•åŽŸå§‹å€¼å¹¶å›žæ»š
-- ä¿®æ”¹å‰è®°å½•
SET @original_max_conn = $$GLOBAL.max_connections;
-- è¿›è¡Œä¿®æ”¹
SET GLOBAL max_connections = 2000;
-- å‘çŽ°é—®é¢˜ï¼Œç«‹å³å›žæ»š
SET GLOBAL max_connections = @original_max_conn;

-- æ–¹æ³•3ï¼šä½¿ç”¨æŒä¹…åŒ–å›žæ»š
RESET PERSIST max_connections;  -- åˆ é™¤æŒä¹…åŒ–
-- ç„¶åŽé‡å¯MySQLæ¢å¤åˆ°my.cnfé…ç½®
```

**ðŸ“‹ å›žæ»šç­–ç•¥å®žè·µ**

```
å®‰å…¨å›žæ»šæµç¨‹ï¼š
1. ðŸ“ ä¿®æ”¹å‰è®°å½•åŽŸå§‹å€¼
2. ðŸ”§ å°å¹…åº¦è°ƒæ•´æµ‹è¯•
3. ðŸ“Š ç›‘æŽ§ç³»ç»Ÿå½±å“
4. âœ… ç¡®è®¤æ— è¯¯åŽå¤§å¹…è°ƒæ•´
5. ðŸš¨ å‡ºçŽ°é—®é¢˜ç«‹å³å›žæ»š

å›žæ»šè„šæœ¬ç¤ºä¾‹ï¼š
-- åˆ›å»ºå›žæ»šè„šæœ¬
CREATE TABLE config_backup (
    change_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    variable_name VARCHAR(64),
    old_value TEXT,
    new_value TEXT,
    change_reason VARCHAR(255)
);

-- è®°å½•å˜æ›´
INSERT INTO config_backup (variable_name, old_value, new_value, change_reason)
VALUES ('max_connections', 
        (SELECT $$GLOBAL.max_connections), 
        '1000', 
        'increase for high traffic');
```

### 4.3 é…ç½®å˜æ›´æ—¥å¿—è®°å½•


**ðŸ“ å˜æ›´æ—¥å¿—çš„é‡è¦æ€§**

```
ä¸ºä»€ä¹ˆè¦è®°å½•å˜æ›´æ—¥å¿—ï¼š
ðŸ” é—®é¢˜è¿½è¸ªï¼šå‡ºçŽ°é—®é¢˜æ—¶èƒ½å¿«é€Ÿå®šä½åŽŸå› 
ðŸ“Š æ€§èƒ½åˆ†æžï¼šå¯¹æ¯”å˜æ›´å‰åŽçš„æ€§èƒ½å·®å¼‚  
ðŸ”„ å›žæ»šä¾æ®ï¼šå‡†ç¡®å›žæ»šåˆ°ä¹‹å‰çš„é…ç½®
ðŸ“ˆ ä¼˜åŒ–åŽ†å²ï¼šè®°å½•è°ƒä¼˜è¿‡ç¨‹å’Œæ•ˆæžœ
```

**ðŸ’» æ—¥å¿—è®°å½•å®žçŽ°**

```sql
-- åˆ›å»ºé…ç½®å˜æ›´æ—¥å¿—è¡¨
CREATE TABLE mysql_config_log (
    id INT AUTO_INCREMENT PRIMARY KEY,
    change_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    variable_name VARCHAR(64) NOT NULL,
    variable_scope ENUM('GLOBAL', 'SESSION', 'PERSIST') NOT NULL,
    old_value TEXT,
    new_value TEXT,
    change_user VARCHAR(32),
    change_reason VARCHAR(255),
    is_rollback BOOLEAN DEFAULT FALSE,
    INDEX idx_change_time (change_time),
    INDEX idx_variable_name (variable_name)
);

-- è®°å½•å˜æ›´çš„å­˜å‚¨è¿‡ç¨‹
DELIMITER //
CREATE PROCEDURE log_config_change(
    IN p_variable_name VARCHAR(64),
    IN p_scope ENUM('GLOBAL', 'SESSION', 'PERSIST'),
    IN p_old_value TEXT,
    IN p_new_value TEXT,
    IN p_reason VARCHAR(255)
)
BEGIN
    INSERT INTO mysql_config_log 
    (variable_name, variable_scope, old_value, new_value, 
     change_user, change_reason)
    VALUES 
    (p_variable_name, p_scope, p_old_value, p_new_value,
     USER(), p_reason);
END //
DELIMITER ;
```

---

## 5. ðŸ”’ é…ç½®å®‰å…¨ä¸Žç›‘æŽ§


### 5.1 åŠ¨æ€é…ç½®å®‰å…¨æŽ§åˆ¶


**ðŸ›¡ï¸ æƒé™æŽ§åˆ¶æœºåˆ¶**

```sql
-- åŠ¨æ€é…ç½®éœ€è¦çš„æƒé™
GRANT SYSTEM_VARIABLES_ADMIN ON *.* TO 'dba_user'@'%';
-- æˆ–è€…ä½¿ç”¨ä¼ ç»Ÿæƒé™
GRANT SUPER ON *.* TO 'dba_user'@'%';

-- æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™
SHOW GRANTS FOR CURRENT_USER();

-- åˆ›å»ºä¸“é—¨çš„é…ç½®ç®¡ç†è§’è‰²
CREATE ROLE 'config_admin';
GRANT SYSTEM_VARIABLES_ADMIN ON *.* TO 'config_admin';
GRANT 'config_admin' TO 'dba_user'@'%';
```

**âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹**

```
å®‰å…¨é£Žé™©æŽ§åˆ¶ï¼š
âŒ é¿å…ç»™æ™®é€šç”¨æˆ·SUPERæƒé™
âŒ ä¸è¦åœ¨ç”Ÿäº§çŽ¯å¢ƒéšæ„è°ƒæ•´æ ¸å¿ƒå‚æ•°
âœ… ä½¿ç”¨ä¸“é—¨çš„é…ç½®ç®¡ç†è´¦å·
âœ… è®°å½•æ‰€æœ‰é…ç½®å˜æ›´æ“ä½œ
âœ… è®¾ç½®å‚æ•°å˜æ›´çš„å®¡æ‰¹æµç¨‹

å±é™©å‚æ•°ç¤ºä¾‹ï¼š
- innodb_flush_log_at_trx_commit
- innodb_buffer_pool_size  
- max_connections
- query_cache_size
```

### 5.2 é…ç½®å˜æ›´é€šçŸ¥æœºåˆ¶


**ðŸ“¢ å˜æ›´é€šçŸ¥çš„å®žçŽ°**

```sql
-- åˆ›å»ºé…ç½®å˜æ›´è§¦å‘å™¨
DELIMITER //
CREATE TRIGGER config_change_notify
AFTER INSERT ON mysql_config_log
FOR EACH ROW
BEGIN
    -- å‘é€é‚®ä»¶é€šçŸ¥(éœ€è¦é…ç½®é‚®ä»¶æ’ä»¶)
    -- æˆ–è€…å†™å…¥ä¸“é—¨çš„é€šçŸ¥è¡¨
    INSERT INTO config_change_alerts 
    (alert_time, message, severity)
    VALUES 
    (NOW(), 
     CONCAT('Config changed: ', NEW.variable_name, 
            ' from ', IFNULL(NEW.old_value, 'NULL'), 
            ' to ', NEW.new_value,
            ' by ', NEW.change_user),
     CASE 
         WHEN NEW.variable_name IN ('innodb_buffer_pool_size', 'max_connections') 
         THEN 'HIGH'
         ELSE 'MEDIUM'
     END);
END //
DELIMITER ;
```

### 5.3 åŠ¨æ€é…ç½®ç›‘æŽ§æ–¹æ³•


**ðŸ“Š ç›‘æŽ§å…³é”®æŒ‡æ ‡**

```sql
-- ç›‘æŽ§è„šæœ¬ï¼šæ£€æŸ¥å…³é”®å‚æ•°å˜åŒ–
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE,
    SET_TIME,
    SET_USER,
    SET_HOST
FROM performance_schema.variables_info 
WHERE SET_TIME IS NOT NULL 
  AND SET_TIME > DATE_SUB(NOW(), INTERVAL 24 HOUR)
ORDER BY SET_TIME DESC;

-- ç›‘æŽ§æŒä¹…åŒ–é…ç½®
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE,
    'PERSISTED' as TYPE
FROM performance_schema.persisted_variables
UNION ALL
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE,
    'GLOBAL' as TYPE
FROM performance_schema.global_variables 
WHERE VARIABLE_NAME IN (
    SELECT VARIABLE_NAME FROM performance_schema.persisted_variables
);
```

**ðŸš¨ å¼‚å¸¸ç›‘æŽ§å‘Šè­¦**

```sql
-- åˆ›å»ºç›‘æŽ§è§†å›¾
CREATE VIEW config_monitoring AS
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE as current_value,
    CASE 
        WHEN VARIABLE_NAME = 'max_connections' AND CAST(VARIABLE_VALUE AS UNSIGNED) > 1000 
        THEN 'WARNING: High connection limit'
        WHEN VARIABLE_NAME = 'innodb_buffer_pool_size' AND CAST(VARIABLE_VALUE AS UNSIGNED) < 134217728 
        THEN 'WARNING: Buffer pool too small'
        ELSE 'OK'
    END as status,
    SET_TIME,
    SET_USER
FROM performance_schema.variables_info
WHERE VARIABLE_NAME IN ('max_connections', 'innodb_buffer_pool_size', 'query_cache_size');

-- æŸ¥çœ‹å½“å‰çŠ¶æ€
SELECT * FROM config_monitoring WHERE status != 'OK';
```

---

## 6. ðŸ› ï¸ å®žæˆ˜åº”ç”¨ä¸Žæœ€ä½³å®žè·µ


### 6.1 åœ¨çº¿é…ç½®è°ƒä¼˜å®žè·µ


**ðŸŽ¯ å¸¸è§è°ƒä¼˜åœºæ™¯**

**åœºæ™¯1ï¼šè¿žæŽ¥æ•°ä¸è¶³è°ƒä¼˜**
```sql
-- 1. æŸ¥çœ‹å½“å‰è¿žæŽ¥æƒ…å†µ
SHOW STATUS LIKE 'Threads_connected';
SHOW STATUS LIKE 'Max_used_connections';
SELECT $$GLOBAL.max_connections;

-- 2. åŠ¨æ€è°ƒæ•´è¿žæŽ¥æ•°
SET PERSIST max_connections = 500;

-- 3. éªŒè¯è°ƒæ•´æ•ˆæžœ
SHOW STATUS LIKE 'Threads_connected';
-- ç›‘æŽ§ä¸€æ®µæ—¶é—´åŽç¡®è®¤æ˜¯å¦è¶³å¤Ÿ
```

**åœºæ™¯2ï¼šæŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–**
```sql
-- 1. å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—è¿›è¡Œåˆ†æž
SET PERSIST slow_query_log = ON;
SET PERSIST long_query_time = 1.0;

-- 2. è°ƒæ•´æŸ¥è¯¢ç¼“å­˜(MySQL 5.7åŠä»¥å‰)
SET PERSIST query_cache_size = 268435456;  -- 256MB
SET PERSIST query_cache_type = ON;

-- 3. è°ƒæ•´æŽ’åºç¼“å†²åŒº
SET PERSIST sort_buffer_size = 4194304;    -- 4MB
```

**åœºæ™¯3ï¼šå†…å­˜ä½¿ç”¨ä¼˜åŒ–**
```sql
-- 1. InnoDBç¼“å†²æ± è°ƒæ•´(éœ€è¦é‡å¯)
SET PERSIST_ONLY innodb_buffer_pool_size = 2147483648;  -- 2GB

-- 2. è¿žæŽ¥ç¼“å†²åŒºè°ƒæ•´
SET PERSIST join_buffer_size = 1048576;     -- 1MB
SET PERSIST read_buffer_size = 1048576;     -- 1MB

-- 3. ä¸´æ—¶è¡¨å¤§å°è°ƒæ•´
SET PERSIST tmp_table_size = 67108864;      -- 64MB
SET PERSIST max_heap_table_size = 67108864; -- 64MB
```

### 6.2 æ¸è¿›å¼è°ƒä¼˜ç­–ç•¥


**ðŸ“ˆ è°ƒä¼˜æ­¥éª¤ä¸Žæ–¹æ³•**

```
æ¸è¿›å¼è°ƒä¼˜æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åŸºçº¿æµ‹è¯•  â”‚ â† è®°å½•è°ƒä¼˜å‰çš„æ€§èƒ½æŒ‡æ ‡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å°å¹…è°ƒæ•´  â”‚ â† å‚æ•°å˜åŒ–ä¸è¶…è¿‡50%
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æ€§èƒ½éªŒè¯  â”‚ â† è¿è¡Œä¸€æ®µæ—¶é—´è§‚å¯Ÿæ•ˆæžœ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. å†³ç­–åˆ†æ”¯  â”‚ â† æ•ˆæžœå¥½ç»§ç»­ï¼Œæ•ˆæžœå·®å›žæ»š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ðŸ’» è°ƒä¼˜å®žæˆ˜ç¤ºä¾‹**

```sql
-- è°ƒä¼˜è„šæœ¬æ¨¡æ¿
-- ç¬¬1æ­¥ï¼šè®°å½•åŸºçº¿
CREATE TABLE performance_baseline AS
SELECT 
    NOW() as test_time,
    'before_tuning' as phase,
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Queries') as queries,
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Threads_connected') as connections,
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_read_requests') as bp_reads;

-- ç¬¬2æ­¥ï¼šå°å¹…è°ƒæ•´
SET @original_buffer = $$GLOBAL.innodb_buffer_pool_size;
-- å‡è®¾å½“å‰1GBï¼Œè°ƒæ•´ä¸º1.5GB
SET PERSIST_ONLY innodb_buffer_pool_size = 1610612736;

-- ç¬¬3æ­¥ï¼šé‡å¯åŽæµ‹è¯•(é‡å¯åŽæ‰§è¡Œ)
INSERT INTO performance_baseline 
SELECT 
    NOW(),
    'after_tuning',
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Queries'),
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Threads_connected'),
    (SELECT VARIABLE_VALUE FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_read_requests');

-- ç¬¬4æ­¥ï¼šå¯¹æ¯”åˆ†æž
SELECT 
    phase,
    queries,
    connections,
    bp_reads,
    LAG(queries) OVER (ORDER BY test_time) as prev_queries,
    queries - LAG(queries) OVER (ORDER BY test_time) as query_diff
FROM performance_baseline 
ORDER BY test_time;
```

### 6.3 åº”æ€¥å“åº”é…ç½®


**ðŸš¨ ç´§æ€¥æƒ…å†µå¤„ç†**

**æƒ…å†µ1ï¼šè¿žæŽ¥æ•°çˆ†æ»¡**
```sql
-- ç«‹å³è¯Šæ–­
SHOW PROCESSLIST;
SELECT COUNT(*) FROM information_schema.PROCESSLIST;
SELECT $$GLOBAL.max_connections;

-- ç´§æ€¥å¤„ç†
SET GLOBAL max_connections = 2000;  -- ä¸´æ—¶æé«˜é™åˆ¶
-- æ€æŽ‰å¼‚å¸¸è¿žæŽ¥
KILL CONNECTION_ID;  -- æ›¿æ¢ä¸ºå®žé™…çš„è¿žæŽ¥ID

-- æŒä¹…åŒ–(ç¡®è®¤æ— é—®é¢˜åŽ)
SET PERSIST max_connections = 1500;
```

**æƒ…å†µ2ï¼šå†…å­˜ä¸è¶³**
```sql
-- æŸ¥çœ‹å†…å­˜ä½¿ç”¨
SELECT 
    $$GLOBAL.innodb_buffer_pool_size / 1024 / 1024 / 1024 as 'Buffer Pool GB',
    $$GLOBAL.query_cache_size / 1024 / 1024 as 'Query Cache MB',
    $$GLOBAL.tmp_table_size / 1024 / 1024 as 'Tmp Table MB';

-- ç´§æ€¥é™ä½Žå†…å­˜ä½¿ç”¨
SET GLOBAL query_cache_size = 0;      -- å…³é—­æŸ¥è¯¢ç¼“å­˜
SET GLOBAL tmp_table_size = 16777216; -- é™ä½Žä¸´æ—¶è¡¨å¤§å°
```

**æƒ…å†µ3ï¼šæ€§èƒ½æ€¥å‰§ä¸‹é™**
```sql
-- å¼€å¯æ€§èƒ½åˆ†æž
SET GLOBAL slow_query_log = ON;
SET GLOBAL long_query_time = 0.1;  -- è®°å½•100msä»¥ä¸Šçš„æŸ¥è¯¢

-- æŸ¥çœ‹å½“å‰è¿è¡Œçš„æŸ¥è¯¢
SELECT 
    ID,
    USER,
    HOST,
    DB,
    COMMAND,
    TIME,
    STATE,
    INFO
FROM information_schema.PROCESSLIST 
WHERE COMMAND != 'Sleep' 
ORDER BY TIME DESC;

-- å¿…è¦æ—¶æ€æŽ‰é•¿æ—¶é—´è¿è¡Œçš„æŸ¥è¯¢
-- KILL QUERY connection_id;
```

### 6.4 é…ç½®æ¨¡æ¿ä¸Žæ ‡å‡†åŒ–


**ðŸ“‹ ä¸åŒåœºæ™¯çš„é…ç½®æ¨¡æ¿**

**Webåº”ç”¨å…¸åž‹é…ç½®**
```sql
-- Webåº”ç”¨ä¼˜åŒ–é…ç½®æ¨¡æ¿
SET PERSIST max_connections = 500;
SET PERSIST innodb_buffer_pool_size = 2147483648;  -- 2GB
SET PERSIST query_cache_type = ON;
SET PERSIST query_cache_size = 268435456;          -- 256MB
SET PERSIST slow_query_log = ON;
SET PERSIST long_query_time = 2.0;
SET PERSIST innodb_flush_log_at_trx_commit = 2;
```

**é«˜å¹¶å‘OLTPé…ç½®**
```sql
-- é«˜å¹¶å‘äº‹åŠ¡å¤„ç†é…ç½®
SET PERSIST max_connections = 1000;
SET PERSIST innodb_buffer_pool_size = 4294967296;  -- 4GB
SET PERSIST innodb_log_file_size = 268435456;      -- 256MB
SET PERSIST innodb_flush_log_at_trx_commit = 2;
SET PERSIST innodb_thread_concurrency = 16;
SET PERSIST query_cache_type = OFF;  -- é«˜å¹¶å‘æ—¶å…³é—­æŸ¥è¯¢ç¼“å­˜
```

**æ•°æ®åˆ†æžOLAPé…ç½®**
```sql
-- åˆ†æžåž‹åº”ç”¨é…ç½®
SET PERSIST max_connections = 200;
SET PERSIST innodb_buffer_pool_size = 8589934592;  -- 8GB
SET PERSIST sort_buffer_size = 8388608;            -- 8MB
SET PERSIST join_buffer_size = 8388608;            -- 8MB
SET PERSIST tmp_table_size = 268435456;            -- 256MB
SET PERSIST max_heap_table_size = 268435456;       -- 256MB
```

---

## 7. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸ”¸ åŠ¨æ€é…ç½®ï¼šè¿è¡Œæ—¶ä¿®æ”¹å‚æ•°ï¼Œæ— éœ€é‡å¯
ðŸ”¸ ä½œç”¨åŸŸï¼šGLOBALå½±å“æ–°è¿žæŽ¥ï¼ŒSESSIONå½±å“å½“å‰è¿žæŽ¥
ðŸ”¸ æŒä¹…åŒ–ï¼šPERSISTç«‹å³ç”Ÿæ•ˆ+æ°¸ä¹…ä¿å­˜ï¼ŒPERSIST_ONLYä»…ä¿å­˜
ðŸ”¸ å›žæ»šï¼šè®°å½•åŽŸå€¼ï¼Œæ”¯æŒå¿«é€Ÿæ¢å¤
ðŸ”¸ ç›‘æŽ§ï¼šè·Ÿè¸ªé…ç½®å˜æ›´ï¼ŒåŠæ—¶å‘çŽ°é—®é¢˜
```

### 7.2 å…³é”®æ“ä½œå‘½ä»¤


**ðŸ”§ å¸¸ç”¨å‘½ä»¤æ€»ç»“**
```sql
-- åŸºæœ¬æ“ä½œ
SET GLOBAL å‚æ•° = å€¼;           -- å…¨å±€ç”Ÿæ•ˆ
SET SESSION å‚æ•° = å€¼;          -- ä¼šè¯ç”Ÿæ•ˆ  
SET PERSIST å‚æ•° = å€¼;          -- æŒä¹…åŒ–+ç«‹å³ç”Ÿæ•ˆ
SET PERSIST_ONLY å‚æ•° = å€¼;     -- ä»…æŒä¹…åŒ–

-- æŸ¥çœ‹é…ç½®
SELECT $$GLOBAL.å‚æ•°å;          -- æŸ¥çœ‹å…¨å±€å€¼
SELECT $$SESSION.å‚æ•°å;         -- æŸ¥çœ‹ä¼šè¯å€¼
SHOW VARIABLES LIKE 'å‚æ•°%';     -- æ¨¡ç³ŠæŸ¥æ‰¾å‚æ•°

-- é‡ç½®æ“ä½œ
RESET PERSIST å‚æ•°å;           -- é‡ç½®å•ä¸ªæŒä¹…åŒ–å‚æ•°
RESET PERSIST;                 -- é‡ç½®æ‰€æœ‰æŒä¹…åŒ–å‚æ•°
```

### 7.3 æœ€ä½³å®žè·µè¦ç‚¹


**âœ… æŽ¨èåšæ³•**
- ðŸ” **ä¿®æ”¹å‰è®°å½•**ï¼šä¿å­˜åŽŸå§‹å€¼ä¾¿äºŽå›žæ»š
- ðŸ“Š **æ¸è¿›è°ƒæ•´**ï¼šå°å¹…åº¦ä¿®æ”¹ï¼Œè§‚å¯Ÿæ•ˆæžœ
- ðŸ“ **è®°å½•å˜æ›´**ï¼šè¯¦ç»†è®°å½•ä¿®æ”¹åŽŸå› å’Œæ•ˆæžœ
- ðŸ”’ **æƒé™æŽ§åˆ¶**ï¼šåªç»™å¿…è¦äººå‘˜é…ç½®ä¿®æ”¹æƒé™
- ðŸ“ˆ **æŒç»­ç›‘æŽ§**ï¼šè·Ÿè¸ªé…ç½®å˜æ›´çš„å½±å“

**âŒ é¿å…åšæ³•**
- ðŸš« **ç›²ç›®è°ƒæ•´**ï¼šä¸äº†è§£å‚æ•°ä½œç”¨å°±ä¿®æ”¹
- ðŸš« **å¤§å¹…å˜æ›´**ï¼šä¸€æ¬¡æ€§å¤§å¹…åº¦è°ƒæ•´å‚æ•°
- ðŸš« **å¿½ç•¥ç›‘æŽ§**ï¼šä¿®æ”¹åŽä¸è§‚å¯Ÿç³»ç»Ÿå½±å“
- ðŸš« **ç¼ºå°‘è®°å½•**ï¼šä¸è®°å½•ä¿®æ”¹åŽ†å²
- ðŸš« **æƒé™æ³›æ»¥**ï¼šç»™è¿‡å¤šç”¨æˆ·é…ç½®ä¿®æ”¹æƒé™

### 7.4 åº”æ€¥å¤„ç†è¦ç‚¹


**ðŸš¨ ç´§æ€¥æƒ…å†µå¤„ç†æµç¨‹**
```
1. å¿«é€Ÿè¯Šæ–­ï¼šç¡®å®šé—®é¢˜åŽŸå› 
2. ç«‹å³ç¼“è§£ï¼šè°ƒæ•´ç›¸å…³å‚æ•°
3. ç›‘æŽ§éªŒè¯ï¼šè§‚å¯Ÿè°ƒæ•´æ•ˆæžœ
4. è®°å½•åˆ†æžï¼šæ€»ç»“é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
5. é¢„é˜²æŽªæ–½ï¼šé¿å…é—®é¢˜å†æ¬¡å‘ç”Ÿ
```

**ðŸ”§ å¸¸è§åº”æ€¥æ“ä½œ**
- **è¿žæŽ¥æ•°ä¸è¶³**ï¼š`SET GLOBAL max_connections = æ›´å¤§å€¼`
- **å†…å­˜ä¸è¶³**ï¼šå…³é—­æŸ¥è¯¢ç¼“å­˜ï¼Œé™ä½Žç¼“å†²åŒºå¤§å°
- **æ€§èƒ½ä¸‹é™**ï¼šå¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œåˆ†æžé—®é¢˜SQL
- **å‚æ•°é”™è¯¯**ï¼šç«‹å³å›žæ»šåˆ°åŽŸå§‹å€¼

### 7.5 å­¦ä¹ å»ºè®®


**ðŸ“š è¿›é˜¶å­¦ä¹ æ–¹å‘**
- **æ€§èƒ½è°ƒä¼˜**ï¼šæ·±å…¥å­¦ä¹ MySQLæ€§èƒ½ä¼˜åŒ–
- **ç›‘æŽ§ä½“ç³»**ï¼šå»ºç«‹å®Œå–„çš„æ•°æ®åº“ç›‘æŽ§
- **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šç¼–å†™é…ç½®ç®¡ç†è„šæœ¬
- **æ•…éšœå¤„ç†**ï¼šç§¯ç´¯æ•…éšœè¯Šæ–­ç»éªŒ

**ðŸŽ¯ æ ¸å¿ƒè®°å¿†å£è¯€**
```
åŠ¨æ€é…ç½®ä¸‰è¦ç´ ï¼šä½œç”¨åŸŸã€ç”Ÿæ•ˆæ—¶é—´ã€æŒä¹…åŒ–
SETè¯­å¥å››å…„å¼Ÿï¼šGLOBALã€SESSIONã€PERSISTã€PERSIST_ONLY  
æ“ä½œä¸‰æ­¥éª¤ï¼šè®°å½•åŽŸå€¼ã€å°å¿ƒè°ƒæ•´ã€éªŒè¯æ•ˆæžœ
åº”æ€¥ä¸‰åŽŸåˆ™ï¼šå¿«é€Ÿè¯Šæ–­ã€ç«‹å³ç¼“è§£ã€æŒç»­ç›‘æŽ§
```

**å®žè·µä»·å€¼**ï¼š
- ðŸš€ **é›¶åœæœºè°ƒä¼˜**ï¼šä¸šåŠ¡ä¸ä¸­æ–­ä¼˜åŒ–æ€§èƒ½
- ðŸ”§ **å¿«é€Ÿå“åº”**ï¼šç´§æ€¥æƒ…å†µå¿«é€Ÿå¤„ç†
- ðŸ“Š **å®žéªŒæµ‹è¯•**ï¼šå®‰å…¨æµ‹è¯•ä¸åŒé…ç½®
- ðŸ›¡ï¸ **é£Žé™©æŽ§åˆ¶**ï¼šå¯å¿«é€Ÿå›žæ»šé”™è¯¯é…ç½®

è¿™å¥—åŠ¨æ€é…ç½®ç®¡ç†æŠ€èƒ½æ˜¯DBAå’Œè¿ç»´äººå‘˜çš„å¿…å¤‡æŠ€èƒ½ï¼ŒæŽŒæ¡åŽèƒ½æ˜¾è‘—æå‡æ•°æ®åº“è¿ç»´æ•ˆçŽ‡å’Œç³»ç»Ÿç¨³å®šæ€§ï¼