---
title: 22ã€è¡¨ç»“æž„è®¾è®¡ä¼˜åŒ–
---
## ðŸ“š ç›®å½•

1. [è¡¨ç»“æž„è®¾è®¡åŸºç¡€](#1-è¡¨ç»“æž„è®¾è®¡åŸºç¡€)
2. [å­—æ®µç±»åž‹é€‰æ‹©ä¼˜åŒ–](#2-å­—æ®µç±»åž‹é€‰æ‹©ä¼˜åŒ–)
3. [è¡¨åˆ†åŒºè®¾è®¡ç­–ç•¥](#3-è¡¨åˆ†åŒºè®¾è®¡ç­–ç•¥)
4. [åž‚ç›´åˆ†è¡¨ä¸Žæ°´å¹³åˆ†è¡¨](#4-åž‚ç›´åˆ†è¡¨ä¸Žæ°´å¹³åˆ†è¡¨)
5. [å†—ä½™å­—æ®µè®¾è®¡åŽŸåˆ™](#5-å†—ä½™å­—æ®µè®¾è®¡åŽŸåˆ™)
6. [èŒƒå¼åŒ–vsåèŒƒå¼åŒ–](#6-èŒƒå¼åŒ–vsåèŒƒå¼åŒ–)
7. [å­˜å‚¨å¼•æ“Žé€‰æ‹©æŒ‡å—](#7-å­˜å‚¨å¼•æ“Žé€‰æ‹©æŒ‡å—)
8. [å­—ç¬¦é›†ä¸Žè¡¨ç©ºé—´ä¼˜åŒ–](#8-å­—ç¬¦é›†ä¸Žè¡¨ç©ºé—´ä¼˜åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸŽ¯ è¡¨ç»“æž„è®¾è®¡åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯è¡¨ç»“æž„ä¼˜åŒ–


**ç®€å•æ¥è¯´**ï¼Œè¡¨ç»“æž„ä¼˜åŒ–å°±æ˜¯è®¾è®¡å‡ºæ—¢çœå­˜å‚¨ç©ºé—´ï¼ŒåˆæŸ¥è¯¢é€Ÿåº¦å¿«çš„æ•°æ®è¡¨ã€‚å°±åƒç›–æˆ¿å­ï¼Œåœ°åŸºæ‰“å¾—å¥½ï¼ŒåŽé¢ä½èµ·æ¥æ‰èˆ’æœã€‚

**æ ¸å¿ƒç›®æ ‡**ï¼š
- ðŸŽ¯ **å‡å°‘å­˜å‚¨ç©ºé—´** - é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»åž‹ï¼Œä¸æµªè´¹ç©ºé—´
- ðŸš€ **æå‡æŸ¥è¯¢æ€§èƒ½** - åˆç†çš„è¡¨ç»“æž„è®©æŸ¥è¯¢æ›´å¿«
- ðŸ”§ **é™ä½Žç»´æŠ¤æˆæœ¬** - å¥½çš„è®¾è®¡å‡å°‘åŽæœŸæ”¹åŠ¨

### 1.2 è¡¨ç»“æž„è®¾è®¡çš„å½±å“


```
è¡¨è®¾è®¡çš„å¥½åç›´æŽ¥å½±å“ï¼š

æŸ¥è¯¢æ€§èƒ½ï¼š
å·®è®¾è®¡ â†’ å…¨è¡¨æ‰«æ â†’ å‡ åç§’
å¥½è®¾è®¡ â†’ ç´¢å¼•å‘½ä¸­ â†’ å‡ æ¯«ç§’

å­˜å‚¨æˆæœ¬ï¼š
å·®è®¾è®¡ â†’ æ•°æ®å†—ä½™ â†’ æµªè´¹ç©ºé—´
å¥½è®¾è®¡ â†’ ç²¾ç®€é«˜æ•ˆ â†’ èŠ‚çœæˆæœ¬

ç»´æŠ¤éš¾åº¦ï¼š
å·®è®¾è®¡ â†’ ä¿®æ”¹å›°éš¾ â†’ å½±å“ä¸šåŠ¡
å¥½è®¾è®¡ â†’ æ‰©å±•çµæ´» â†’ è½»æ¾ç»´æŠ¤
```

### 1.3 è®¾è®¡åŽŸåˆ™æ¦‚è§ˆ


```
è®¾è®¡ä¸‰å¤§åŽŸåˆ™ï¼š

1. åˆé€‚æ€§åŽŸåˆ™
   â””â”€â”€ ç”¨æœ€åˆé€‚çš„ç±»åž‹å­˜å‚¨æ•°æ®

2. æ€§èƒ½ä¼˜åŒ–åŽŸåˆ™  
   â””â”€â”€ è€ƒè™‘æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½

3. å¯ç»´æŠ¤æ€§åŽŸåˆ™
   â””â”€â”€ æ–¹ä¾¿åŽæœŸä¿®æ”¹å’Œæ‰©å±•
```

---

## 2. ðŸ“Š å­—æ®µç±»åž‹é€‰æ‹©ä¼˜åŒ–


### 2.1 ä¸ºä»€ä¹ˆå­—æ®µç±»åž‹å¾ˆé‡è¦


**é€šä¿—è§£é‡Š**ï¼šå­—æ®µç±»åž‹å°±åƒé€‰æ‹©åˆé€‚çš„å®¹å™¨è£…ä¸œè¥¿ã€‚ç”¨å¤§ç®±å­è£…ä¸€ä¸ªè‹¹æžœæµªè´¹ç©ºé—´ï¼Œç”¨å°ç›’å­è£…å¤§è¥¿ç“œè£…ä¸ä¸‹ã€‚é€‰å¯¹äº†ç±»åž‹ï¼Œæ—¢ä¸æµªè´¹ç©ºé—´ï¼ŒæŸ¥è¯¢ä¹Ÿæ›´å¿«ã€‚

### 2.2 æ•°å€¼ç±»åž‹ä¼˜åŒ–


**æ•´æ•°ç±»åž‹é€‰æ‹©**

| ç±»åž‹ | å­˜å‚¨å­—èŠ‚ | å–å€¼èŒƒå›´ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|----------|
| `TINYINT` | 1å­—èŠ‚ | -128~127 | å¹´é¾„ã€çŠ¶æ€å€¼ |
| `SMALLINT` | 2å­—èŠ‚ | -32,768~32,767 | å•†å“åˆ†ç±»ID |
| `INT` | 4å­—èŠ‚ | -21äº¿~21äº¿ | ç”¨æˆ·IDã€è®¢å•å· |
| `BIGINT` | 8å­—èŠ‚ | å·¨å¤§èŒƒå›´ | é‡‘é¢(åˆ†)ã€æ—¶é—´æˆ³ |

**ðŸ’¡ å®žé™…åº”ç”¨ç¤ºä¾‹**

```sql
-- âŒ é”™è¯¯ï¼šç”¨INTå­˜å‚¨å¹´é¾„ï¼Œæµªè´¹3ä¸ªå­—èŠ‚
CREATE TABLE user (
    age INT  -- æµªè´¹ç©ºé—´
);

-- âœ… æ­£ç¡®ï¼šç”¨TINYINTå­˜å‚¨å¹´é¾„
CREATE TABLE user (
    age TINYINT UNSIGNED  -- 0-255ï¼Œå¤Ÿç”¨ä¸”çœç©ºé—´
);
```

**å°æ•°ç±»åž‹é€‰æ‹©**

```sql
-- é‡‘é¢å­˜å‚¨ï¼šç”¨DECIMALä¿è¯ç²¾åº¦
CREATE TABLE order (
    id INT PRIMARY KEY,
    amount DECIMAL(10,2)  -- 99999999.99ï¼Œç²¾ç¡®åˆ°åˆ†
);

-- è¯„åˆ†å­˜å‚¨ï¼šç”¨FLOATèŠ‚çœç©ºé—´
CREATE TABLE review (
    id INT PRIMARY KEY,
    rating FLOAT(2,1)  -- 0.0-9.9ï¼Œå¤Ÿç”¨
);
```

### 2.3 å­—ç¬¦ä¸²ç±»åž‹ä¼˜åŒ–


**å­—ç¬¦ä¸²ç±»åž‹å¯¹æ¯”**

```
VARCHAR vs CHAR é€‰æ‹©åŽŸåˆ™ï¼š

VARCHARï¼šå˜é•¿å­˜å‚¨
â”œâ”€â”€ é•¿åº¦ä¸å›ºå®šæ—¶ä½¿ç”¨
â”œâ”€â”€ èŠ‚çœå­˜å‚¨ç©ºé—´
â””â”€â”€ é€‚åˆï¼šå§“åã€æè¿°ã€åœ°å€

CHARï¼šå®šé•¿å­˜å‚¨  
â”œâ”€â”€ é•¿åº¦å›ºå®šæ—¶ä½¿ç”¨
â”œâ”€â”€ æŸ¥è¯¢æ€§èƒ½æ›´å¥½
â””â”€â”€ é€‚åˆï¼šæ‰‹æœºå·ã€èº«ä»½è¯å·ã€çŠ¶æ€ç 
```

**ðŸ’¡ å®žè·µç¤ºä¾‹**

```sql
-- âœ… æ­£ç¡®çš„å­—ç¬¦ä¸²ç±»åž‹é€‰æ‹©
CREATE TABLE user (
    id INT PRIMARY KEY,
    phone CHAR(11),           -- æ‰‹æœºå·å›ºå®š11ä½
    name VARCHAR(50),         -- å§“åé•¿åº¦ä¸å®š
    gender CHAR(1),           -- æ€§åˆ«ï¼šM/F
    address VARCHAR(200),     -- åœ°å€é•¿åº¦ä¸å®š
    status TINYINT           -- çŠ¶æ€ç”¨æ•°å­—æ›´çœç©ºé—´
);
```

### 2.4 æ—¥æœŸæ—¶é—´ç±»åž‹ä¼˜åŒ–


**æ—¥æœŸç±»åž‹é€‰æ‹©æŒ‡å—**

```sql
-- æ—¶é—´ç±»åž‹é€‰æ‹©
CREATE TABLE event (
    id INT PRIMARY KEY,
    
    -- åªéœ€è¦æ—¥æœŸï¼šç”¨DATE
    birthday DATE,
    
    -- éœ€è¦ç²¾ç¡®æ—¶é—´ï¼šç”¨DATETIME  
    created_at DATETIME,
    
    -- é«˜å¹¶å‘åœºæ™¯ï¼šç”¨æ—¶é—´æˆ³
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**âš ï¸ å¸¸è§è¯¯åŒº**

```sql
-- âŒ é”™è¯¯ï¼šç”¨å­—ç¬¦ä¸²å­˜å‚¨æ—¶é—´
CREATE TABLE log (
    create_time VARCHAR(20)  -- '2024-01-01 10:30:00'
);

-- âœ… æ­£ç¡®ï¼šç”¨DATETIMEå­˜å‚¨æ—¶é—´
CREATE TABLE log (
    create_time DATETIME     -- æ”¯æŒæ—¶é—´è®¡ç®—å’Œç´¢å¼•
);
```

---

## 3. ðŸ—‚ï¸ è¡¨åˆ†åŒºè®¾è®¡ç­–ç•¥


### 3.1 ä»€ä¹ˆæ˜¯è¡¨åˆ†åŒº


**é€šä¿—ç†è§£**ï¼šè¡¨åˆ†åŒºå°±åƒæŠŠä¸€ä¸ªå¤§æŸœå­åˆ†æˆå¾ˆå¤šå°æŠ½å±‰ã€‚æŸ¥æ‰¾ä¸œè¥¿æ—¶ï¼Œåªéœ€è¦æ‰“å¼€å¯¹åº”çš„æŠ½å±‰ï¼Œè€Œä¸ç”¨ç¿»éæ•´ä¸ªæŸœå­ã€‚

```
åˆ†åŒºå‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2019å¹´æ•°æ® 2020å¹´æ•°æ® 2021å¹´æ•°æ® â”‚  â† ä¸€ä¸ªå¤§è¡¨
â”‚ 2022å¹´æ•°æ® 2023å¹´æ•°æ® 2024å¹´æ•°æ® â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†åŒºåŽï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚2019å¹´åˆ†åŒºâ”‚â”‚2020å¹´åˆ†åŒºâ”‚â”‚2021å¹´åˆ†åŒºâ”‚  â† å¤šä¸ªå°åˆ†åŒº
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚2022å¹´åˆ†åŒºâ”‚â”‚2023å¹´åˆ†åŒºâ”‚â”‚2024å¹´åˆ†åŒºâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä½•æ—¶ä½¿ç”¨åˆ†åŒº


**é€‚ç”¨åœºæ™¯åˆ¤æ–­**

```
éœ€è¦åˆ†åŒºçš„æƒ…å†µï¼š
âœ… è¡¨æ•°æ®é‡è¶…è¿‡500ä¸‡è¡Œ
âœ… æœ‰æ˜Žæ˜¾çš„æ•°æ®åˆ’åˆ†ç»´åº¦ï¼ˆæ—¶é—´ã€åœ°åŒºç­‰ï¼‰
âœ… ç»å¸¸æŒ‰æŸä¸ªå­—æ®µèŒƒå›´æŸ¥è¯¢
âœ… éœ€è¦å®šæœŸåˆ é™¤æ—§æ•°æ®

ä¸éœ€è¦åˆ†åŒºçš„æƒ…å†µï¼š
âŒ æ•°æ®é‡å°äºŽ100ä¸‡è¡Œ
âŒ æ²¡æœ‰æ˜Žç¡®çš„åˆ’åˆ†ä¾æ®
âŒ æŸ¥è¯¢æ¡ä»¶å¾ˆéšæœº
âŒ é¢‘ç¹è·¨åˆ†åŒºæŸ¥è¯¢
```

### 3.3 åˆ†åŒºç±»åž‹ä¸Žåº”ç”¨


**æ—¶é—´åˆ†åŒºï¼ˆæœ€å¸¸ç”¨ï¼‰**

```sql
-- æŒ‰æœˆåˆ†åŒºï¼šé€‚åˆæ—¥å¿—è¡¨
CREATE TABLE access_log (
    id BIGINT AUTO_INCREMENT,
    user_id INT,
    visit_time DATETIME,
    url VARCHAR(500),
    PRIMARY KEY (id, visit_time)
) PARTITION BY RANGE (YEAR(visit_time) * 100 + MONTH(visit_time)) (
    PARTITION p202401 VALUES LESS THAN (202402),
    PARTITION p202402 VALUES LESS THAN (202403),
    PARTITION p202403 VALUES LESS THAN (202404),
    PARTITION p_future VALUES LESS THAN MAXVALUE
);
```

**èŒƒå›´åˆ†åŒºï¼šæŒ‰æ•°å€¼èŒƒå›´**

```sql
-- æŒ‰ç”¨æˆ·IDåˆ†åŒºï¼šé€‚åˆå¤§ç”¨æˆ·è¡¨
CREATE TABLE user_info (
    user_id INT PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100)
) PARTITION BY RANGE (user_id) (
    PARTITION p1 VALUES LESS THAN (100000),
    PARTITION p2 VALUES LESS THAN (200000),
    PARTITION p3 VALUES LESS THAN (300000),
    PARTITION p_max VALUES LESS THAN MAXVALUE
);
```

### 3.4 åˆ†åŒºä¼˜åŒ–æŠ€å·§


**æŸ¥è¯¢ä¼˜åŒ–**

```sql
-- âœ… åˆ†åŒºé”®åœ¨WHEREæ¡ä»¶ä¸­ï¼ˆåˆ†åŒºå‰ªæžï¼‰
SELECT * FROM access_log 
WHERE visit_time >= '2024-01-01' 
  AND visit_time < '2024-02-01';
-- åªæ‰«æ2024å¹´1æœˆåˆ†åŒº

-- âŒ åˆ†åŒºé”®ä¸åœ¨WHEREæ¡ä»¶ä¸­ï¼ˆå…¨åˆ†åŒºæ‰«æï¼‰
SELECT * FROM access_log 
WHERE user_id = 12345;
-- éœ€è¦æ‰«ææ‰€æœ‰åˆ†åŒº
```

---

## 4. âœ‚ï¸ åž‚ç›´åˆ†è¡¨ä¸Žæ°´å¹³åˆ†è¡¨


### 4.1 ä»€ä¹ˆæ˜¯åˆ†è¡¨


**å½¢è±¡æ¯”å–»**ï¼š
- **åž‚ç›´åˆ†è¡¨**ï¼šæŠŠä¸€å¼ å®½æ¡Œå­åˆ‡æˆå‡ å¼ çª„æ¡Œå­
- **æ°´å¹³åˆ†è¡¨**ï¼šæŠŠä¸€å¼ é•¿æ¡Œå­åˆ‡æˆå‡ å¼ çŸ­æ¡Œå­

```
åŽŸå§‹å¤§è¡¨ï¼š
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚IDâ”‚å§“å â”‚æ‰‹æœº â”‚é‚®ç®± â”‚è¯¦ç»†ä¿¡æ¯  â”‚
â”œâ”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚1 â”‚å¼ ä¸‰ â”‚138..â”‚xx@â”‚å¾ˆé•¿çš„æ–‡æœ¬â”‚
â”‚2 â”‚æŽå›› â”‚139..â”‚yy@â”‚å¾ˆé•¿çš„æ–‡æœ¬â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åž‚ç›´åˆ†è¡¨åŽï¼š
åŸºç¡€è¡¨ï¼š              æ‰©å±•è¡¨ï¼š
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚IDâ”‚å§“å â”‚æ‰‹æœº â”‚    â”‚IDâ”‚è¯¦ç»†ä¿¡æ¯  â”‚
â”œâ”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤    â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚1 â”‚å¼ ä¸‰ â”‚138..â”‚    â”‚1 â”‚å¾ˆé•¿çš„æ–‡æœ¬â”‚
â”‚2 â”‚æŽå›› â”‚139..â”‚    â”‚2 â”‚å¾ˆé•¿çš„æ–‡æœ¬â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ°´å¹³åˆ†è¡¨åŽï¼š
è¡¨1ï¼š                è¡¨2ï¼š
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”Œâ”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚1 â”‚å¼ ä¸‰ â”‚138..â”‚    â”‚2 â”‚æŽå›› â”‚139..â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

### 4.2 åž‚ç›´åˆ†è¡¨æ–¹æ¡ˆ


**ä»€ä¹ˆæ—¶å€™ç”¨åž‚ç›´åˆ†è¡¨**

```
é€‚ç”¨åœºæ™¯ï¼š
âœ… è¡¨å­—æ®µå¤ªå¤šï¼ˆè¶…è¿‡20ä¸ªï¼‰
âœ… æœ‰äº›å­—æ®µå¾ˆå¤§ï¼ˆTEXTã€BLOBï¼‰
âœ… è®¿é—®é¢‘çŽ‡å·®å¼‚å¤§
âœ… ä¸åŒå­—æ®µçš„æŸ¥è¯¢åœºæ™¯ä¸åŒ

åˆ†è¡¨åŽŸåˆ™ï¼š
ðŸ“ é«˜é¢‘è®¿é—®å­—æ®µ â†’ ä¸»è¡¨
ðŸ“ ä½Žé¢‘è®¿é—®å­—æ®µ â†’ æ‰©å±•è¡¨
ðŸ“ å¤§å­—æ®µå•ç‹¬å­˜å‚¨ â†’ è¯¦æƒ…è¡¨
```

**å®žè·µç¤ºä¾‹**

```sql
-- âŒ åŽŸå§‹å¤§è¡¨ï¼šå­—æ®µå¤ªå¤šï¼ŒæŸ¥è¯¢æ…¢
CREATE TABLE user_all (
    id INT PRIMARY KEY,
    username VARCHAR(50),      -- å¸¸ç”¨
    email VARCHAR(100),        -- å¸¸ç”¨
    phone CHAR(11),           -- å¸¸ç”¨
    profile TEXT,             -- å¾ˆå¤§ï¼Œå¾ˆå°‘è®¿é—®
    preferences JSON,         -- å¾ˆå¤§ï¼Œå¾ˆå°‘è®¿é—®
    last_login DATETIME,      -- å¸¸ç”¨
    created_at DATETIME       -- å¸¸ç”¨
);

-- âœ… åž‚ç›´åˆ†è¡¨åŽï¼šæå‡æŸ¥è¯¢æ€§èƒ½
-- ä¸»è¡¨ï¼šå­˜å‚¨å¸¸ç”¨å­—æ®µ
CREATE TABLE user (
    id INT PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100),
    phone CHAR(11),
    last_login DATETIME,
    created_at DATETIME
);

-- æ‰©å±•è¡¨ï¼šå­˜å‚¨å¤§å­—æ®µå’Œä½Žé¢‘å­—æ®µ
CREATE TABLE user_profile (
    user_id INT PRIMARY KEY,
    profile TEXT,
    preferences JSON,
    FOREIGN KEY (user_id) REFERENCES user(id)
);
```

### 4.3 æ°´å¹³åˆ†è¡¨æ–¹æ¡ˆ


**ä»€ä¹ˆæ—¶å€™ç”¨æ°´å¹³åˆ†è¡¨**

```
é€‚ç”¨åœºæ™¯ï¼š
âœ… å•è¡¨æ•°æ®é‡è¿‡å¤§ï¼ˆè¶…è¿‡åƒä¸‡çº§ï¼‰
âœ… æŸ¥è¯¢æ€§èƒ½æ˜Žæ˜¾ä¸‹é™
âœ… æœ‰æ˜Žç¡®çš„åˆ†è¡¨ç»´åº¦

åˆ†è¡¨ç­–ç•¥ï¼š
ðŸ“Š æŒ‰æ—¶é—´åˆ†è¡¨ï¼šè®¢å•è¡¨ã€æ—¥å¿—è¡¨
ðŸ“Š æŒ‰åœ°åŒºåˆ†è¡¨ï¼šç”¨æˆ·è¡¨ã€å•†æˆ·è¡¨  
ðŸ“Š æŒ‰å“ˆå¸Œåˆ†è¡¨ï¼šå¹³å‡åˆ†å¸ƒæ•°æ®
```

**æŒ‰æ—¶é—´åˆ†è¡¨ç¤ºä¾‹**

```sql
-- è®¢å•è¡¨æŒ‰å¹´åˆ†è¡¨
CREATE TABLE order_2023 (
    id BIGINT PRIMARY KEY,
    user_id INT,
    amount DECIMAL(10,2),
    created_at DATETIME
);

CREATE TABLE order_2024 (
    id BIGINT PRIMARY KEY,
    user_id INT,
    amount DECIMAL(10,2),
    created_at DATETIME
);
```

**æŒ‰å“ˆå¸Œåˆ†è¡¨ç¤ºä¾‹**

```sql
-- ç”¨æˆ·è¡¨æŒ‰user_idå“ˆå¸Œåˆ†è¡¨
CREATE TABLE user_0 (
    id INT PRIMARY KEY,
    username VARCHAR(50)
    -- user_id % 4 = 0 çš„ç”¨æˆ·
);

CREATE TABLE user_1 (
    id INT PRIMARY KEY,
    username VARCHAR(50)
    -- user_id % 4 = 1 çš„ç”¨æˆ·
);
```

---

## 5. ðŸ”„ å†—ä½™å­—æ®µè®¾è®¡åŽŸåˆ™


### 5.1 ä»€ä¹ˆæ˜¯å­—æ®µå†—ä½™


**é€šä¿—è§£é‡Š**ï¼šå­—æ®µå†—ä½™å°±æ˜¯æ•…æ„åœ¨å¤šä¸ªè¡¨ä¸­å­˜å‚¨ç›¸åŒçš„æ•°æ®ã€‚è™½ç„¶è¿åäº†æ•°æ®åº“è§„èŒƒï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹èƒ½å¤§å¹…æå‡æŸ¥è¯¢æ€§èƒ½ã€‚

```
ä¸å†—ä½™çš„è®¾è®¡ï¼š
è®¢å•è¡¨                 ç”¨æˆ·è¡¨
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚è®¢å•IDâ”‚ç”¨æˆ·IDâ”‚é‡‘é¢ â”‚    â”‚ç”¨æˆ·IDâ”‚å§“å â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚1001â”‚ 100 â”‚199 â”‚    â”‚100 â”‚å¼ ä¸‰ â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
æŸ¥è¯¢è®¢å•å’Œç”¨æˆ·åéœ€è¦JOIN

å†—ä½™è®¾è®¡ï¼š
è®¢å•è¡¨
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚è®¢å•IDâ”‚ç”¨æˆ·IDâ”‚é‡‘é¢ â”‚ç”¨æˆ·åâ”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚1001â”‚ 100 â”‚199 â”‚å¼ ä¸‰ â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
ç›´æŽ¥æŸ¥è¯¢ï¼Œæ— éœ€JOIN
```

### 5.2 ä½•æ—¶ä½¿ç”¨å†—ä½™å­—æ®µ


**ä½¿ç”¨åœºæ™¯åˆ¤æ–­**

```
å»ºè®®ä½¿ç”¨å†—ä½™ï¼š
âœ… é¢‘ç¹JOINæŸ¥è¯¢çš„å­—æ®µ
âœ… å‡ ä¹Žä¸å˜çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åï¼‰
âœ… å¯¹æ€§èƒ½è¦æ±‚æžé«˜çš„åœºæ™¯
âœ… ç»Ÿè®¡ç±»å­—æ®µï¼ˆå¦‚è®¢å•æ€»æ•°ï¼‰

é¿å…å†—ä½™ï¼š
âŒ ç»å¸¸å˜åŒ–çš„æ•°æ®
âŒ æ•°æ®ä¸€è‡´æ€§è¦æ±‚æžé«˜
âŒ å­˜å‚¨ç©ºé—´ç´§å¼ 
âŒ æ›´æ–°é¢‘ç¹çš„å­—æ®µ
```

### 5.3 å†—ä½™å­—æ®µå®žè·µ


**è®¢å•è¡¨å†—ä½™ç”¨æˆ·ä¿¡æ¯**

```sql
-- åŽŸå§‹è®¾è®¡ï¼šéœ€è¦JOINæŸ¥è¯¢
CREATE TABLE orders (
    id INT PRIMARY KEY,
    user_id INT,
    amount DECIMAL(10,2),
    created_at DATETIME
);

CREATE TABLE users (
    id INT PRIMARY KEY,
    username VARCHAR(50),
    phone CHAR(11)
);

-- æŸ¥è¯¢è®¢å•éœ€è¦JOIN
SELECT o.id, o.amount, u.username 
FROM orders o 
JOIN users u ON o.user_id = u.id;
```

```sql
-- å†—ä½™è®¾è®¡ï¼šæå‡æŸ¥è¯¢æ€§èƒ½
CREATE TABLE orders (
    id INT PRIMARY KEY,
    user_id INT,
    username VARCHAR(50),    -- å†—ä½™ç”¨æˆ·å
    user_phone CHAR(11),     -- å†—ä½™æ‰‹æœºå·
    amount DECIMAL(10,2),
    created_at DATETIME
);

-- ç›´æŽ¥æŸ¥è¯¢ï¼Œæ— éœ€JOIN
SELECT id, amount, username FROM orders;
```

### 5.4 å†—ä½™æ•°æ®ç»´æŠ¤


**ä¿æŒæ•°æ®ä¸€è‡´æ€§**

```sql
-- ç”¨è§¦å‘å™¨ç»´æŠ¤å†—ä½™æ•°æ®
DELIMITER $$
CREATE TRIGGER update_order_username
AFTER UPDATE ON users
FOR EACH ROW
BEGIN
    IF OLD.username != NEW.username THEN
        UPDATE orders 
        SET username = NEW.username 
        WHERE user_id = NEW.id;
    END IF;
END$$
DELIMITER ;
```

---

## 6. âš–ï¸ èŒƒå¼åŒ–vsåèŒƒå¼åŒ–


### 6.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“èŒƒå¼


**èŒƒå¼çš„é€šä¿—è§£é‡Š**ï¼š
- **èŒƒå¼åŒ–**ï¼šæ•°æ®åˆ†é—¨åˆ«ç±»å­˜æ”¾ï¼Œé¿å…é‡å¤ï¼Œåƒå›¾ä¹¦é¦†åˆ†ç±»ç®¡ç†
- **åèŒƒå¼åŒ–**ï¼šä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå…è®¸ä¸€äº›é‡å¤ï¼Œåƒåœ¨å®¶é‡Œå¤‡å‡ æœ¬å¸¸ç”¨ä¹¦

```
èŒƒå¼åŒ–è®¾è®¡ï¼ˆç¬¬ä¸‰èŒƒå¼ï¼‰ï¼š
ç”¨æˆ·è¡¨        è®¢å•è¡¨        å•†å“è¡¨
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ç”¨æˆ·IDâ”‚å§“å â”‚  â”‚è®¢å•IDâ”‚ç”¨æˆ·IDâ”‚å•†å“IDâ”‚  â”‚å•†å“IDâ”‚å•†å“åâ”‚ä»·æ ¼ â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚001 â”‚å¼ ä¸‰ â”‚  â”‚1001â”‚ 001 â”‚ A01 â”‚  â”‚ A01 â”‚æ‰‹æœº â”‚2999â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜

åèŒƒå¼åŒ–è®¾è®¡ï¼š
è®¢å•è¯¦æƒ…è¡¨
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚è®¢å•IDâ”‚ç”¨æˆ·å â”‚å•†å“åâ”‚ä»·æ ¼ â”‚æ•°é‡ â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚1001â”‚å¼ ä¸‰  â”‚æ‰‹æœº â”‚2999â”‚ 1  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

### 6.2 èŒƒå¼åŒ–çš„ä¼˜ç¼ºç‚¹


**èŒƒå¼åŒ–ä¼˜åŠ¿**

```
âœ… æ•°æ®ä¸é‡å¤ï¼šèŠ‚çœå­˜å‚¨ç©ºé—´
âœ… æ›´æ–°ç®€å•ï¼šä¿®æ”¹ä¸€ä¸ªåœ°æ–¹å³å¯
âœ… æ•°æ®ä¸€è‡´ï¼šé¿å…æ•°æ®å†²çª
âœ… ç»“æž„æ¸…æ™°ï¼šé€»è¾‘å…³ç³»æ˜Žç¡®
```

**èŒƒå¼åŒ–åŠ£åŠ¿**

```
âŒ æŸ¥è¯¢å¤æ‚ï¼šéœ€è¦å¤šè¡¨JOIN
âŒ æ€§èƒ½è¾ƒä½Žï¼šJOINæ“ä½œè€—æ—¶
âŒ ç†è§£å›°éš¾ï¼šè¡¨å…³ç³»å¤æ‚
âŒ å¼€å‘å¤æ‚ï¼šéœ€è¦å¤„ç†å¤šè¡¨å…³ç³»
```

### 6.3 åèŒƒå¼åŒ–çš„ä¼˜ç¼ºç‚¹


**åèŒƒå¼åŒ–ä¼˜åŠ¿**

```
âœ… æŸ¥è¯¢ç®€å•ï¼šå•è¡¨æŸ¥è¯¢å³å¯
âœ… æ€§èƒ½æ›´é«˜ï¼šé¿å…JOINæ“ä½œ
âœ… å¼€å‘ç®€å•ï¼šé€»è¾‘ç›´è§‚
âœ… ç¼“å­˜å‹å¥½ï¼šæ•°æ®é›†ä¸­å­˜å‚¨
```

**åèŒƒå¼åŒ–åŠ£åŠ¿**

```
âŒ æ•°æ®å†—ä½™ï¼šæµªè´¹å­˜å‚¨ç©ºé—´
âŒ æ›´æ–°å¤æ‚ï¼šéœ€è¦æ›´æ–°å¤šä¸ªåœ°æ–¹
âŒ ä¸€è‡´æ€§é£Žé™©ï¼šå¯èƒ½å‡ºçŽ°æ•°æ®ä¸ä¸€è‡´
âŒ ç»´æŠ¤å›°éš¾ï¼šå­—æ®µä¿®æ”¹å½±å“é¢å¤§
```

### 6.4 é€‰æ‹©ç­–ç•¥


**åœºæ™¯é€‰æ‹©æŒ‡å—**

```
é€‰æ‹©èŒƒå¼åŒ–ï¼š
ðŸ“š æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜ï¼ˆé‡‘èžç³»ç»Ÿï¼‰
ðŸ“š å­˜å‚¨ç©ºé—´æœ‰é™
ðŸ“š æ›´æ–°æ“ä½œé¢‘ç¹
ðŸ“š æ•°æ®å…³ç³»å¤æ‚

é€‰æ‹©åèŒƒå¼åŒ–ï¼š
ðŸš€ æŸ¥è¯¢æ€§èƒ½è¦æ±‚é«˜ï¼ˆæŠ¥è¡¨ç³»ç»Ÿï¼‰
ðŸš€ è¯»å¤šå†™å°‘çš„åœºæ™¯
ðŸš€ ç®€åŒ–å¼€å‘å¤æ‚åº¦
ðŸš€ æå‡ç”¨æˆ·ä½“éªŒ
```

**æ··åˆç­–ç•¥**

```sql
-- æ ¸å¿ƒä¸šåŠ¡è¡¨ï¼šä¿æŒèŒƒå¼åŒ–
CREATE TABLE users (
    id INT PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100)
);

CREATE TABLE orders (
    id INT PRIMARY KEY,
    user_id INT,
    amount DECIMAL(10,2),
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- æŠ¥è¡¨æŸ¥è¯¢è¡¨ï¼šä½¿ç”¨åèŒƒå¼åŒ–
CREATE TABLE order_report (
    order_id INT,
    user_id INT,
    username VARCHAR(50),   -- å†—ä½™
    user_email VARCHAR(100), -- å†—ä½™
    amount DECIMAL(10,2),
    order_date DATE
);
```

---

## 7. ðŸ”§ å­˜å‚¨å¼•æ“Žé€‰æ‹©æŒ‡å—


### 7.1 ä»€ä¹ˆæ˜¯å­˜å‚¨å¼•æ“Ž


**é€šä¿—ç†è§£**ï¼šå­˜å‚¨å¼•æ“Žå°±åƒæ±½è½¦çš„å‘åŠ¨æœºï¼Œå†³å®šäº†æ•°æ®å¦‚ä½•å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚ä¸åŒçš„å¼•æ“Žæœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼Œé€‚åˆä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚

```
MySQLä¸»è¦å­˜å‚¨å¼•æ“Žï¼š

InnoDBï¼š
â”œâ”€â”€ åƒè±ªåŽè½¿è½¦ â†’ åŠŸèƒ½å…¨é¢ï¼Œæ€§èƒ½å‡è¡¡
â”œâ”€â”€ æ”¯æŒäº‹åŠ¡ â†’ æ•°æ®å®‰å…¨å¯é 
â”œâ”€â”€ è¡Œçº§é” â†’ å¹¶å‘æ€§èƒ½å¥½
â””â”€â”€ å¤–é”®çº¦æŸ â†’ æ•°æ®å®Œæ•´æ€§

MyISAMï¼š
â”œâ”€â”€ åƒè½½è´§å¡è½¦ â†’ è¯»å–é€Ÿåº¦å¿«
â”œâ”€â”€ è¡¨çº§é” â†’ ç®€å•ç²—æš´
â”œâ”€â”€ ä¸æ”¯æŒäº‹åŠ¡ â†’ è½»é‡çº§
â””â”€â”€ åŽ‹ç¼©å­˜å‚¨ â†’ èŠ‚çœç©ºé—´

Memoryï¼š
â”œâ”€â”€ åƒè·‘è½¦ â†’ é€Ÿåº¦æžå¿«
â”œâ”€â”€ å†…å­˜å­˜å‚¨ â†’ é‡å¯ä¸¢å¤±
â”œâ”€â”€ å“ˆå¸Œç´¢å¼• â†’ ç­‰å€¼æŸ¥è¯¢å¿«
â””â”€â”€ é€‚åˆä¸´æ—¶æ•°æ®
```

### 7.2 InnoDBå¼•æ“Žç‰¹ç‚¹


**InnoDBä¼˜åŠ¿**

```sql
-- InnoDBï¼šçŽ°ä»£åº”ç”¨çš„é»˜è®¤é€‰æ‹©
CREATE TABLE user_orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    amount DECIMAL(10,2),
    status TINYINT DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_user_id (user_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**InnoDBæ ¸å¿ƒç‰¹æ€§**

```
ðŸ”’ äº‹åŠ¡æ”¯æŒï¼ˆACIDï¼‰ï¼š
   â”œâ”€â”€ åŽŸå­æ€§ï¼šè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å¤±è´¥
   â”œâ”€â”€ ä¸€è‡´æ€§ï¼šæ•°æ®çŠ¶æ€ä¸€è‡´
   â”œâ”€â”€ éš”ç¦»æ€§ï¼šå¹¶å‘ä¸äº’ç›¸å½±å“
   â””â”€â”€ æŒä¹…æ€§ï¼šæäº¤åŽæ°¸ä¹…ä¿å­˜

ðŸš€ å¹¶å‘æ€§èƒ½ï¼š
   â”œâ”€â”€ è¡Œçº§é”ï¼šåªé”å®šéœ€è¦çš„è¡Œ
   â”œâ”€â”€ å¤šç‰ˆæœ¬æŽ§åˆ¶ï¼šè¯»å†™ä¸å†²çª
   â””â”€â”€ å¤–é”®çº¦æŸï¼šç»´æŠ¤æ•°æ®å®Œæ•´æ€§

ðŸ’¾ å­˜å‚¨ç‰¹ç‚¹ï¼š
   â”œâ”€â”€ èšç°‡ç´¢å¼•ï¼šæ•°æ®å’Œç´¢å¼•ä¸€èµ·å­˜å‚¨
   â”œâ”€â”€ è‡ªåŠ¨æ¢å¤ï¼šå´©æºƒåŽè‡ªåŠ¨ä¿®å¤
   â””â”€â”€ æ”¯æŒåŽ‹ç¼©ï¼šèŠ‚çœå­˜å‚¨ç©ºé—´
```

### 7.3 MyISAMå¼•æ“Žç‰¹ç‚¹


**MyISAMé€‚ç”¨åœºæ™¯**

```sql
-- MyISAMï¼šé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯
CREATE TABLE article_archive (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    view_count INT DEFAULT 0,
    created_at DATETIME,
    
    INDEX idx_title (title),
    FULLTEXT idx_content (content)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4;
```

**MyISAMç‰¹ç‚¹å¯¹æ¯”**

| ç‰¹æ€§ | InnoDB | MyISAM |
|------|--------|--------|
| **äº‹åŠ¡æ”¯æŒ** | âœ…æ”¯æŒ | âŒä¸æ”¯æŒ |
| **é”ç²’åº¦** | è¡Œçº§é” | è¡¨çº§é” |
| **å¤–é”®** | âœ…æ”¯æŒ | âŒä¸æ”¯æŒ |
| **å´©æºƒæ¢å¤** | âœ…è‡ªåŠ¨ | âŒæ‰‹åŠ¨ |
| **è¯»æ€§èƒ½** | é«˜ | æžé«˜ |
| **å†™æ€§èƒ½** | é«˜ | ä¸­ç­‰ |
| **å­˜å‚¨ç©ºé—´** | å¤§ | å° |

### 7.4 Memoryå¼•æ“Žåº”ç”¨


**Memoryå¼•æ“Žä½¿ç”¨åœºæ™¯**

```sql
-- Memoryï¼šä¸´æ—¶æ•°æ®ã€ç¼“å­˜è¡¨
CREATE TABLE session_cache (
    session_id VARCHAR(32) PRIMARY KEY,
    user_id INT,
    data TEXT,
    expire_time INT,
    
    INDEX idx_user_id (user_id),
    INDEX idx_expire (expire_time)
) ENGINE=Memory;

-- ç”¨äºŽå­˜å‚¨ä¸´æ—¶ç»Ÿè®¡ç»“æžœ
CREATE TABLE temp_report (
    date_key DATE,
    user_count INT,
    order_count INT,
    revenue DECIMAL(12,2)
) ENGINE=Memory;
```

### 7.5 å­˜å‚¨å¼•æ“Žé€‰æ‹©ç­–ç•¥


**é€‰æ‹©å†³ç­–æ ‘**

```
ä¸šåŠ¡åœºæ™¯åˆ†æžï¼š

éœ€è¦äº‹åŠ¡æ”¯æŒï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ InnoDB
â””â”€â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­

å¹¶å‘å†™å…¥å¤šï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ InnoDBï¼ˆè¡Œçº§é”ï¼‰
â””â”€â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­

ä¸»è¦æ˜¯æŸ¥è¯¢ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ MyISAMï¼ˆè¯»æ€§èƒ½å¥½ï¼‰
â””â”€â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­

ä¸´æ—¶æ•°æ®ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ Memoryï¼ˆå†…å­˜å­˜å‚¨ï¼‰
â””â”€â”€ å¦ â†’ InnoDBï¼ˆé»˜è®¤é€‰æ‹©ï¼‰
```

**å®žé™…åº”ç”¨å»ºè®®**

```sql
-- ä¸šåŠ¡æ ¸å¿ƒè¡¨ï¼šä½¿ç”¨InnoDB
CREATE TABLE users (...) ENGINE=InnoDB;
CREATE TABLE orders (...) ENGINE=InnoDB;
CREATE TABLE products (...) ENGINE=InnoDB;

-- æ—¥å¿—ç»Ÿè®¡è¡¨ï¼šä½¿ç”¨MyISAM
CREATE TABLE access_logs (...) ENGINE=MyISAM;
CREATE TABLE error_logs (...) ENGINE=MyISAM;

-- ä¸´æ—¶ç¼“å­˜è¡¨ï¼šä½¿ç”¨Memory
CREATE TABLE temp_cache (...) ENGINE=Memory;
CREATE TABLE session_data (...) ENGINE=Memory;
```

---

## 8. ðŸŒ å­—ç¬¦é›†ä¸Žè¡¨ç©ºé—´ä¼˜åŒ–


### 8.1 å­—ç¬¦é›†ç¼–ç é€‰æ‹©


**ä¸ºä»€ä¹ˆå­—ç¬¦é›†å¾ˆé‡è¦**

å­—ç¬¦é›†å†³å®šäº†èƒ½å­˜å‚¨ä»€ä¹ˆå­—ç¬¦ï¼Œä»¥åŠæ¯ä¸ªå­—ç¬¦å ç”¨å¤šå°‘ç©ºé—´ã€‚é€‰é”™äº†å­—ç¬¦é›†ï¼Œè¦ä¹ˆæ— æ³•å­˜å‚¨æŸäº›å­—ç¬¦ï¼ˆå¦‚emojiï¼‰ï¼Œè¦ä¹ˆæµªè´¹å­˜å‚¨ç©ºé—´ã€‚

```
å­—ç¬¦é›†å¯¹æ¯”ï¼š

latin1ï¼š
â”œâ”€â”€ 1å­—èŠ‚/å­—ç¬¦
â”œâ”€â”€ åªæ”¯æŒè‹±æ–‡
â””â”€â”€ çŽ°åœ¨å¾ˆå°‘ç”¨

utf8ï¼š
â”œâ”€â”€ 1-3å­—èŠ‚/å­—ç¬¦  
â”œâ”€â”€ æ”¯æŒå¤§éƒ¨åˆ†å­—ç¬¦
â””â”€â”€ ä¸æ”¯æŒemojiï¼ˆ4å­—èŠ‚å­—ç¬¦ï¼‰

utf8mb4ï¼š
â”œâ”€â”€ 1-4å­—èŠ‚/å­—ç¬¦
â”œâ”€â”€ æ”¯æŒæ‰€æœ‰Unicodeå­—ç¬¦
â””â”€â”€ åŒ…æ‹¬emojiã€ç‰¹æ®Šç¬¦å·
```

### 8.2 utf8mb4è¯¦ç»†è¯´æ˜Ž


**utf8mb4çš„ä¼˜åŠ¿**

```sql
-- âœ… æŽ¨èï¼šä½¿ç”¨utf8mb4
CREATE TABLE posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    emoji_reaction VARCHAR(50)  -- å¯ä»¥å­˜å‚¨ðŸ˜€ðŸ˜ƒðŸ˜„
) ENGINE=InnoDB 
DEFAULT CHARSET=utf8mb4 
COLLATE=utf8mb4_unicode_ci;
```

**å­—ç¬¦é›†ç©ºé—´å¯¹æ¯”**

```
ç›¸åŒå†…å®¹çš„å­˜å‚¨ç©ºé—´ï¼š

'Hello'ï¼ˆçº¯è‹±æ–‡ï¼‰ï¼š
â”œâ”€â”€ latin1: 5å­—èŠ‚
â”œâ”€â”€ utf8: 5å­—èŠ‚  
â””â”€â”€ utf8mb4: 5å­—èŠ‚

'ä½ å¥½'ï¼ˆä¸­æ–‡ï¼‰ï¼š
â”œâ”€â”€ latin1: æ— æ³•å­˜å‚¨
â”œâ”€â”€ utf8: 6å­—èŠ‚ï¼ˆæ¯ä¸ªä¸­æ–‡3å­—èŠ‚ï¼‰
â””â”€â”€ utf8mb4: 6å­—èŠ‚

'HelloðŸ˜€'ï¼ˆå«emojiï¼‰ï¼š
â”œâ”€â”€ latin1: æ— æ³•å­˜å‚¨
â”œâ”€â”€ utf8: æ— æ³•å­˜å‚¨emoji
â””â”€â”€ utf8mb4: 9å­—èŠ‚ï¼ˆHello5å­—èŠ‚+ðŸ˜€4å­—èŠ‚ï¼‰
```

### 8.3 æŽ’åºè§„åˆ™é€‰æ‹©


**å¸¸ç”¨æŽ’åºè§„åˆ™**

```sql
-- ä¸åŒæŽ’åºè§„åˆ™çš„æ•ˆæžœ
CREATE TABLE test_collate (
    id INT,
    name VARCHAR(50)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- å¤§å°å†™æ•æ„Ÿ
ALTER TABLE test_collate COLLATE=utf8mb4_bin;
-- 'ABC' â‰  'abc'

-- å¤§å°å†™ä¸æ•æ„Ÿï¼ˆæŽ¨èï¼‰
ALTER TABLE test_collate COLLATE=utf8mb4_unicode_ci;
-- 'ABC' = 'abc'
```

**æŽ’åºè§„åˆ™é€‰æ‹©å»ºè®®**

| æŽ’åºè§„åˆ™ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|----------|------|----------|
| `utf8mb4_unicode_ci` | å¤§å°å†™ä¸æ•æ„Ÿï¼Œæ”¯æŒå¤šè¯­è¨€ | ç”¨æˆ·è¾“å…¥ã€æœç´¢ |
| `utf8mb4_bin` | äºŒè¿›åˆ¶æ¯”è¾ƒï¼Œå¤§å°å†™æ•æ„Ÿ | å¯†ç ã€ä»£ç  |
| `utf8mb4_general_ci` | æ€§èƒ½è¾ƒå¥½ï¼Œç²¾åº¦ç¨ä½Ž | æ€§èƒ½æ•æ„Ÿåœºæ™¯ |

### 8.4 è¡¨ç©ºé—´ç®¡ç†


**ä»€ä¹ˆæ˜¯è¡¨ç©ºé—´**

è¡¨ç©ºé—´å°±æ˜¯å­˜å‚¨æ•°æ®æ–‡ä»¶çš„åœ°æ–¹ï¼Œåˆç†ç®¡ç†è¡¨ç©ºé—´å¯ä»¥æå‡I/Oæ€§èƒ½ï¼Œä¾¿äºŽç»´æŠ¤ã€‚

```
è¡¨ç©ºé—´ç±»åž‹ï¼š

ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆibdata1ï¼‰ï¼š
â”œâ”€â”€ å­˜å‚¨ç³»ç»Ÿä¿¡æ¯
â”œâ”€â”€ é»˜è®¤å­˜å‚¨æ‰€æœ‰è¡¨
â””â”€â”€ æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§

ç‹¬ç«‹è¡¨ç©ºé—´ï¼ˆ.ibdæ–‡ä»¶ï¼‰ï¼š
â”œâ”€â”€ æ¯ä¸ªè¡¨å•ç‹¬æ–‡ä»¶
â”œâ”€â”€ ä¾¿äºŽå¤‡ä»½å’Œè¿ç§»
â””â”€â”€ æŽ¨èä½¿ç”¨
```

**é…ç½®ç‹¬ç«‹è¡¨ç©ºé—´**

```sql
-- æŸ¥çœ‹å½“å‰é…ç½®
SHOW VARIABLES LIKE 'innodb_file_per_table';

-- å¯ç”¨ç‹¬ç«‹è¡¨ç©ºé—´ï¼ˆæŽ¨èï¼‰
SET GLOBAL innodb_file_per_table = ON;

-- åˆ›å»ºè¡¨æ—¶æŒ‡å®šè¡¨ç©ºé—´
CREATE TABLE large_table (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    data LONGTEXT
) ENGINE=InnoDB 
DATA DIRECTORY = '/data/mysql/tables/';
```

### 8.5 ä¼˜åŒ–é…ç½®ç¤ºä¾‹


**å®Œæ•´çš„è¡¨åˆ›å»ºç¤ºä¾‹**

```sql
-- ä¼˜åŒ–åŽçš„å®Œæ•´å»ºè¡¨è¯­å¥
CREATE TABLE user_orders (
    -- ä¸»é”®ï¼šä½¿ç”¨BIGINTï¼Œæ”¯æŒæ›´å¤§æ•°æ®é‡
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    
    -- ç”¨æˆ·IDï¼šæ™®é€šINTå¤Ÿç”¨
    user_id INT NOT NULL,
    
    -- è®¢å•å·ï¼šå›ºå®šé•¿åº¦ç”¨CHAR
    order_no CHAR(20) NOT NULL,
    
    -- é‡‘é¢ï¼šDECIMALä¿è¯ç²¾åº¦
    amount DECIMAL(12,2) NOT NULL DEFAULT 0.00,
    
    -- çŠ¶æ€ï¼šTINYINTèŠ‚çœç©ºé—´
    status TINYINT NOT NULL DEFAULT 1,
    
    -- æ—¶é—´ï¼šDATETIMEä¾¿äºŽæŸ¥è¯¢
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ç´¢å¼•ä¼˜åŒ–
    UNIQUE KEY uk_order_no (order_no),
    INDEX idx_user_id (user_id),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at)
    
) ENGINE=InnoDB 
DEFAULT CHARSET=utf8mb4 
COLLATE=utf8mb4_unicode_ci
COMMENT='ç”¨æˆ·è®¢å•è¡¨';
```

---

## 9. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 è¡¨ç»“æž„ä¼˜åŒ–è¦ç‚¹


**ðŸŽ¯ å­—æ®µç±»åž‹é€‰æ‹©åŽŸåˆ™**
```
é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»åž‹ï¼š
âœ… èƒ½ç”¨å°çš„ä¸ç”¨å¤§çš„ï¼ˆTINYINT vs INTï¼‰
âœ… å®šé•¿ä¼˜äºŽå˜é•¿ï¼ˆCHAR vs VARCHARï¼‰
âœ… æ•°å€¼ä¼˜äºŽå­—ç¬¦ä¸²ï¼ˆINT vs VARCHARå­˜IDï¼‰
âœ… é¿å…NULLå€¼ï¼ˆå½±å“ç´¢å¼•æ•ˆçŽ‡ï¼‰
```

**ðŸ—‚ï¸ åˆ†è¡¨åˆ†åŒºç­–ç•¥**
```
åˆ†åŒºä½¿ç”¨åœºæ™¯ï¼š
âœ… å¤§è¡¨ï¼ˆ500ä¸‡+è¡Œï¼‰æŒ‰æ—¶é—´åˆ†åŒº
âœ… åŽ†å²æ•°æ®å®šæœŸæ¸…ç†
âœ… æå‡æŸ¥è¯¢æ€§èƒ½

åˆ†è¡¨ä½¿ç”¨åœºæ™¯ï¼š
âœ… åž‚ç›´åˆ†è¡¨ï¼šå­—æ®µå¤ªå¤šæˆ–æœ‰å¤§å­—æ®µ
âœ… æ°´å¹³åˆ†è¡¨ï¼šæ•°æ®é‡è¿‡å¤§
```

**âš–ï¸ èŒƒå¼åŒ–å¹³è¡¡**
```
è®¾è®¡åŽŸåˆ™ï¼š
ðŸ“š æ ¸å¿ƒä¸šåŠ¡ä¿æŒèŒƒå¼åŒ–ï¼ˆæ•°æ®ä¸€è‡´æ€§ï¼‰
ðŸš€ æŸ¥è¯¢å¯†é›†åœºæ™¯é€‚åº¦åèŒƒå¼åŒ–ï¼ˆæ€§èƒ½ä¼˜å…ˆï¼‰
ðŸ”„ åˆç†ä½¿ç”¨å†—ä½™å­—æ®µï¼ˆå‡å°‘JOINï¼‰
```

### 9.2 å­˜å‚¨å¼•æ“Žé€‰æ‹©


**å¼•æ“Žé€‰æ‹©å†³ç­–**
```
InnoDBï¼ˆæŽ¨èï¼‰ï¼š
âœ… äº‹åŠ¡è¦æ±‚é«˜çš„ä¸šåŠ¡è¡¨
âœ… å¹¶å‘å†™å…¥å¤šçš„è¡¨
âœ… éœ€è¦å¤–é”®çº¦æŸ

MyISAMï¼š
âœ… è¯»å¤šå†™å°‘çš„æ—¥å¿—è¡¨
âœ… åŽ†å²æ•°æ®å½’æ¡£è¡¨
âœ… å…¨æ–‡æœç´¢éœ€æ±‚

Memoryï¼š
âœ… ä¸´æ—¶è®¡ç®—ç»“æžœ
âœ… ä¼šè¯ç¼“å­˜æ•°æ®
âœ… å®žæ—¶ç»Ÿè®¡æ•°æ®
```

### 9.3 å­—ç¬¦é›†å’Œé…ç½®


**å­—ç¬¦é›†æœ€ä½³å®žè·µ**
```
ç»Ÿä¸€ä½¿ç”¨utf8mb4ï¼š
âœ… æ”¯æŒemojiå’Œç‰¹æ®Šå­—ç¬¦
âœ… å›½é™…åŒ–åº”ç”¨æ ‡å‡†é€‰æ‹©
âœ… é…åˆutf8mb4_unicode_ciæŽ’åºè§„åˆ™

è¡¨ç©ºé—´é…ç½®ï¼š
âœ… å¯ç”¨ç‹¬ç«‹è¡¨ç©ºé—´
âœ… ä¾¿äºŽå¤‡ä»½å’Œç»´æŠ¤
âœ… æ”¯æŒå•è¡¨åŽ‹ç¼©
```

### 9.4 å®žè·µå»ºè®®


**è®¾è®¡æ£€æŸ¥æ¸…å•**

```
è¡¨ç»“æž„è®¾è®¡æ£€æŸ¥ï¼š
â˜‘ï¸ å­—æ®µç±»åž‹æ˜¯å¦æœ€ä¼˜ï¼Ÿ
â˜‘ï¸ æ˜¯å¦æœ‰ä¸å¿…è¦çš„NULLå­—æ®µï¼Ÿ
â˜‘ï¸ ç´¢å¼•è®¾è®¡æ˜¯å¦åˆç†ï¼Ÿ
â˜‘ï¸ æ˜¯å¦éœ€è¦åˆ†åŒºåˆ†è¡¨ï¼Ÿ
â˜‘ï¸ å†—ä½™å­—æ®µæ˜¯å¦å¿…è¦ï¼Ÿ
â˜‘ï¸ å­—ç¬¦é›†æ˜¯å¦ç»Ÿä¸€ï¼Ÿ
â˜‘ï¸ å­˜å‚¨å¼•æ“Žé€‰æ‹©æ˜¯å¦åˆé€‚ï¼Ÿ

æ€§èƒ½éªŒè¯ï¼š
â˜‘ï¸ å•è¡¨æ•°æ®é‡æ˜¯å¦å¯æŽ§ï¼Ÿ
â˜‘ï¸ å¸¸ç”¨æŸ¥è¯¢æ˜¯å¦èƒ½å‘½ä¸­ç´¢å¼•ï¼Ÿ
â˜‘ï¸ JOINæ“ä½œæ˜¯å¦è¿‡äºŽå¤æ‚ï¼Ÿ
â˜‘ï¸ æ˜¯å¦æœ‰æ€§èƒ½æµ‹è¯•éªŒè¯ï¼Ÿ
```

**è®°å¿†å£è¯€**
```
è¡¨ç»“æž„ä¼˜åŒ–è®°å¿ƒé—´ï¼š
ç±»åž‹é€‰æ‹©è¦ç²¾å‡†ï¼Œåˆ†åŒºåˆ†è¡¨çœ‹åœºæ™¯
èŒƒå¼å†—ä½™è¦å¹³è¡¡ï¼Œå¼•æ“Žå­—ç¬¦é›†ç»Ÿä¸€
ç´¢å¼•è®¾è®¡ç´§è·Ÿä¸Šï¼Œæ€§èƒ½æµ‹è¯•ä¸èƒ½å¿˜
```

**å…³é”®ç†è§£**ï¼šè¡¨ç»“æž„è®¾è®¡æ˜¯æ•°æ®åº“æ€§èƒ½çš„åŸºç¡€ï¼Œå¥½çš„è®¾è®¡äº‹åŠåŠŸå€ï¼Œå·®çš„è®¾è®¡åŽæ‚£æ— ç©·ã€‚åœ¨è®¾è®¡æ—¶è¦ç»¼åˆè€ƒè™‘ä¸šåŠ¡éœ€æ±‚ã€æ€§èƒ½è¦æ±‚å’Œç»´æŠ¤æˆæœ¬ï¼Œæ‰¾åˆ°æœ€é€‚åˆçš„å¹³è¡¡ç‚¹ã€‚