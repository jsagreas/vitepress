---
title: 35ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å®æˆ˜
---
## ğŸ“š ç›®å½•


1. [ç”Ÿäº§ç¯å¢ƒæ…¢æŸ¥è¯¢é—®é¢˜æ¦‚è¿°](#1-ç”Ÿäº§ç¯å¢ƒæ…¢æŸ¥è¯¢é—®é¢˜æ¦‚è¿°)
2. [åº”æ€¥å¤„ç†æµç¨‹ä¸æ“ä½œæ­¥éª¤](#2-åº”æ€¥å¤„ç†æµç¨‹ä¸æ“ä½œæ­¥éª¤)
3. [é£é™©è¯„ä¼°ä¸æ§åˆ¶ç­–ç•¥](#3-é£é™©è¯„ä¼°ä¸æ§åˆ¶ç­–ç•¥)
4. [åœ¨çº¿ä¼˜åŒ–å®æˆ˜æŠ€å·§](#4-åœ¨çº¿ä¼˜åŒ–å®æˆ˜æŠ€å·§)
5. [å›æ»šæ–¹æ¡ˆè®¾è®¡ä¸å‡†å¤‡](#5-å›æ»šæ–¹æ¡ˆè®¾è®¡ä¸å‡†å¤‡)
6. [ä¼˜åŒ–æ•ˆæœéªŒè¯æ–¹æ³•](#6-ä¼˜åŒ–æ•ˆæœéªŒè¯æ–¹æ³•)
7. [æ€§èƒ½åŸºçº¿å»ºç«‹ä¸ç›‘æ§](#7-æ€§èƒ½åŸºçº¿å»ºç«‹ä¸ç›‘æ§)
8. [æŒç»­æ”¹è¿›ä¸ç»éªŒæ²‰æ·€](#8-æŒç»­æ”¹è¿›ä¸ç»éªŒæ²‰æ·€)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš¨ ç”Ÿäº§ç¯å¢ƒæ…¢æŸ¥è¯¢é—®é¢˜æ¦‚è¿°



### 1.1 ä»€ä¹ˆæ˜¯ç”Ÿäº§ç¯å¢ƒæ…¢æŸ¥è¯¢é—®é¢˜



**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> å°±åƒå®¶é‡Œçš„æ°´é¾™å¤´çªç„¶å‡ºæ°´å¾ˆæ…¢ï¼Œå½±å“äº†å…¨å®¶äººçš„æ­£å¸¸ç”Ÿæ´»ã€‚ç”Ÿäº§ç¯å¢ƒçš„æ…¢æŸ¥è¯¢å°±æ˜¯æ•°æ®åº“çš„"æ°´é¾™å¤´å µå¡"ï¼Œå½±å“æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚

**ğŸ“ æ ¸å¿ƒå®šä¹‰**
```
ç”Ÿäº§æ…¢æŸ¥è¯¢é—®é¢˜ï¼šåœ¨çœŸå®ä¸šåŠ¡ç¯å¢ƒä¸­ï¼ŒSQLæŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¶…è¿‡é¢„æœŸé˜ˆå€¼ï¼Œ
å¯¼è‡´ç”¨æˆ·ä½“éªŒä¸‹é™ã€ç³»ç»Ÿå“åº”ç¼“æ…¢ï¼Œç”šè‡³æœåŠ¡ä¸å¯ç”¨çš„é—®é¢˜ã€‚

å…³é”®ç‰¹å¾ï¼š
â€¢ å½±å“èŒƒå›´ï¼šçœŸå®ç”¨æˆ·å’Œä¸šåŠ¡
â€¢ æ—¶æ•ˆæ€§è¦æ±‚ï¼šéœ€è¦å¿«é€Ÿè§£å†³
â€¢ é£é™©æ€§ï¼šæ“ä½œéœ€è¦è°¨æ…
â€¢ å¤æ‚æ€§ï¼šæ¶‰åŠå¤šä¸ªç³»ç»Ÿç»„ä»¶
```

### 1.2 ç”Ÿäº§ç¯å¢ƒçš„ç‰¹æ®Šæ€§



**âš ï¸ ç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒçš„åŒºåˆ«**

| ç‰¹æ€§ | **å¼€å‘ç¯å¢ƒ** | **ç”Ÿäº§ç¯å¢ƒ** | **å½±å“** |
|------|-------------|-------------|----------|
| æ•°æ®é‡ | å°è§„æ¨¡æµ‹è¯•æ•°æ® | æµ·é‡çœŸå®æ•°æ® | æŸ¥è¯¢æ€§èƒ½å·®å¼‚å·¨å¤§ |
| å¹¶å‘é‡ | å•äººæˆ–å°‘é‡å¹¶å‘ | å¤§é‡ç”¨æˆ·å¹¶å‘è®¿é—® | é”ç«äº‰å’Œèµ„æºäº‰æŠ¢ |
| å®¹é”™æ€§ | å¯ä»¥éšæ„é‡å¯ | å¿…é¡»ä¿è¯è¿ç»­æ€§ | æ“ä½œéœ€è¦æå…¶è°¨æ… |
| å½±å“é¢ | ä»…å½±å“å¼€å‘ | å½±å“çœŸå®ä¸šåŠ¡ | æ¯ç§’éƒ½æ˜¯æŸå¤± |

**ğŸ” å¸¸è§æ…¢æŸ¥è¯¢åœºæ™¯**
```
çªå‘æ€§æ…¢æŸ¥è¯¢ï¼š
â€¢ æ•°æ®é‡çªç„¶å¢é•¿ï¼ˆå¦‚ä¿ƒé”€æ´»åŠ¨ï¼‰
â€¢ æ–°åŠŸèƒ½ä¸Šçº¿å¼•å…¥çš„å¤æ‚æŸ¥è¯¢
â€¢ ç´¢å¼•å¤±æ•ˆæˆ–ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸ

æ¸è¿›æ€§æ…¢æŸ¥è¯¢ï¼š
â€¢ æ•°æ®é‡ç¼“æ…¢å¢é•¿å¯¼è‡´çš„æ€§èƒ½ä¸‹é™
â€¢ å†å²æ•°æ®ç´¯ç§¯å½±å“æŸ¥è¯¢æ•ˆç‡
â€¢ ç¡¬ä»¶èµ„æºé€æ¸ä¸è¶³

å‘¨æœŸæ€§æ…¢æŸ¥è¯¢ï¼š
â€¢ å®šæ—¶ä»»åŠ¡å¼•èµ·çš„æ‰¹é‡æŸ¥è¯¢
â€¢ æŠ¥è¡¨ç”Ÿæˆæ—¶çš„å¤æ‚ç»Ÿè®¡
â€¢ æ•°æ®åŒæ­¥å’Œå¤‡ä»½æ“ä½œ
```

### 1.3 é—®é¢˜å½±å“è¯„ä¼°



**ğŸ“Š å½±å“çº§åˆ«åˆ†ç±»**
```
ğŸ”´ ç´§æ€¥çº§åˆ«ï¼ˆP0ï¼‰ï¼š
âœ“ æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½å®Œå…¨ä¸å¯ç”¨
âœ“ å¤§é‡ç”¨æˆ·æ— æ³•æ­£å¸¸ä½¿ç”¨
âœ“ é€ æˆç›´æ¥ç»æµæŸå¤±
âœ“ å¤„ç†æ—¶é™ï¼š30åˆ†é’Ÿå†…

ğŸŸ¡ é‡è¦çº§åˆ«ï¼ˆP1ï¼‰ï¼š
âœ“ æ ¸å¿ƒåŠŸèƒ½å—åˆ°æ˜æ˜¾å½±å“
âœ“ ç”¨æˆ·ä½“éªŒä¸¥é‡ä¸‹é™
âœ“ éƒ¨åˆ†ä¸šåŠ¡æµç¨‹å—é˜»
âœ“ å¤„ç†æ—¶é™ï¼š2å°æ—¶å†…

ğŸŸ¢ ä¸€èˆ¬çº§åˆ«ï¼ˆP2ï¼‰ï¼š
âœ“ éæ ¸å¿ƒåŠŸèƒ½å—å½±å“
âœ“ ç”¨æˆ·ä½“éªŒæœ‰æ‰€ä¸‹é™
âœ“ ä¸å½±å“ä¸»è¦ä¸šåŠ¡æµç¨‹
âœ“ å¤„ç†æ—¶é™ï¼š1å¤©å†…
```

---

## 2. ğŸš€ åº”æ€¥å¤„ç†æµç¨‹ä¸æ“ä½œæ­¥éª¤



### 2.1 åº”æ€¥å“åº”æµç¨‹å›¾



```
é—®é¢˜å‘ç°
    â†“
åˆæ­¥è¯„ä¼° â”€â†’ å½±å“çº§åˆ«åˆ¤å®š â”€â†’ é€šçŸ¥ç›¸å…³äººå‘˜
    â†“                         â†“
å¿«é€Ÿæ’æŸ¥ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»„å»ºåº”æ€¥å›¢é˜Ÿ
    â†“
ä¸´æ—¶ç¼“è§£æªæ–½ â”€â†’ ç›‘æ§æ•ˆæœ â”€â†’ æ˜¯å¦æœ‰æ•ˆï¼Ÿ
    â†“                         â†“ No
æ ¹æœ¬åŸå› åˆ†æ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è°ƒæ•´ç­–ç•¥
    â†“
åˆ¶å®šä¼˜åŒ–æ–¹æ¡ˆ â”€â†’ é£é™©è¯„ä¼° â”€â†’ å®æ–½ä¼˜åŒ–
    â†“
æ•ˆæœéªŒè¯ â”€â†’ æ–‡æ¡£è®°å½• â”€â†’ å¤ç›˜æ€»ç»“
```

### 2.2 å¿«é€Ÿè¯Šæ–­æ­¥éª¤



**ğŸ” ç¬¬ä¸€æ­¥ï¼šé—®é¢˜ç°è±¡ç¡®è®¤**
```sql
-- 1. æŸ¥çœ‹å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ…¢æŸ¥è¯¢
SHOW PROCESSLIST;

-- 2. æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—çŠ¶æ€
SHOW VARIABLES LIKE 'slow_query%';
SHOW VARIABLES LIKE 'long_query_time';
```

**ğŸ’¡ å…³é”®ä¿¡æ¯è§£è¯»**
```
PROCESSLISTå­—æ®µå«ä¹‰ï¼š
â€¢ Idï¼šè¿æ¥IDï¼Œå¯ç”¨äºåç»­æ“ä½œ
â€¢ Userï¼šæ‰§è¡Œç”¨æˆ·
â€¢ Hostï¼šæ¥æºä¸»æœº
â€¢ dbï¼šæ“ä½œæ•°æ®åº“
â€¢ Commandï¼šå‘½ä»¤ç±»å‹ï¼ˆQueryæœ€å…³é”®ï¼‰
â€¢ Timeï¼šå·²æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
â€¢ Stateï¼šå½“å‰çŠ¶æ€
â€¢ Infoï¼šSQLè¯­å¥å†…å®¹
```

**ğŸ” ç¬¬äºŒæ­¥ï¼šç³»ç»Ÿèµ„æºæ£€æŸ¥**
```sql
-- æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
SHOW STATUS LIKE 'Threads_%';
SHOW STATUS LIKE 'Questions';
SHOW STATUS LIKE 'Slow_queries';

-- æŸ¥çœ‹é”ç­‰å¾…æƒ…å†µ
SHOW ENGINE INNODB STATUS\G
```

**ğŸ“Š ç³»ç»Ÿç›‘æ§æŒ‡æ ‡**
```bash
# CPUä½¿ç”¨ç‡

top -p $(pgrep mysqld)

# å†…å­˜ä½¿ç”¨æƒ…å†µ

free -h

# ç£ç›˜IOçŠ¶æ€

iostat -x 1

# ç½‘ç»œè¿æ¥æ•°

ss -ant | grep :3306 | wc -l
```

### 2.3 ä¸´æ—¶ç¼“è§£æªæ–½



**âš¡ ç«‹å³ç”Ÿæ•ˆçš„æ“ä½œ**

**1. ç»ˆæ­¢æ…¢æŸ¥è¯¢**
```sql
-- æŸ¥æ‰¾æœ€è€—æ—¶çš„æŸ¥è¯¢
SELECT Id, User, Host, db, Command, Time, Info 
FROM information_schema.PROCESSLIST 
WHERE Command = 'Query' AND Time > 10
ORDER BY Time DESC;

-- ç»ˆæ­¢ç‰¹å®šæŸ¥è¯¢ï¼ˆè°¨æ…æ“ä½œï¼‰
KILL 12345;  -- 12345æ˜¯æŸ¥è¯¢çš„Id
```

**âš ï¸ æ³¨æ„äº‹é¡¹**
- åªç»ˆæ­¢éå…³é”®ä¸šåŠ¡çš„æŸ¥è¯¢
- é¿å…ç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„äº‹åŠ¡æ€§æ“ä½œ
- è®°å½•è¢«ç»ˆæ­¢çš„æŸ¥è¯¢ï¼Œåç»­åˆ†æ

**2. è°ƒæ•´æŸ¥è¯¢ä¼˜å…ˆçº§**
```sql
-- é™ä½æ…¢æŸ¥è¯¢çš„ä¼˜å…ˆçº§
SET SESSION sql_low_priority_updates = 1;

-- é™åˆ¶æŸ¥è¯¢æ‰§è¡Œæ—¶é—´
SET SESSION max_execution_time = 30000; -- 30ç§’
```

**3. ä¸´æ—¶ç´¢å¼•åˆ›å»º**
```sql
-- ä¸ºç´§æ€¥æŸ¥è¯¢å¿«é€Ÿåˆ›å»ºç´¢å¼•
-- æ³¨æ„ï¼šåœ¨å¤§è¡¨ä¸Šåˆ›å»ºç´¢å¼•ä¼šæ¶ˆè€—å¤§é‡èµ„æº
ALTER TABLE user_orders 
ADD INDEX idx_temp_order_date (order_date);
```

### 2.4 åº”æ€¥å¤„ç†æ£€æŸ¥æ¸…å•



**ğŸ“‹ å¤„ç†å‰æ£€æŸ¥**
- [ ] ç¡®è®¤é—®é¢˜å½±å“èŒƒå›´å’Œä¸¥é‡ç¨‹åº¦
- [ ] è¯†åˆ«æ­£åœ¨æ‰§è¡Œçš„æ…¢æŸ¥è¯¢
- [ ] æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- [ ] ç¡®è®¤æ˜¯å¦æœ‰é”ç­‰å¾…æˆ–æ­»é”
- [ ] å¤‡ä»½å½“å‰æ•°æ®åº“çŠ¶æ€ä¿¡æ¯

**ğŸ“‹ å¤„ç†ä¸­ç›‘æ§**
- [ ] å®æ—¶ç›‘æ§æŸ¥è¯¢æ‰§è¡Œæƒ…å†µ
- [ ] è§‚å¯Ÿç³»ç»Ÿèµ„æºå˜åŒ–
- [ ] è®°å½•é‡‡å–çš„æ¯ä¸ªæ“ä½œ
- [ ] ç›‘æ§ä¸šåŠ¡æŒ‡æ ‡å˜åŒ–
- [ ] å‡†å¤‡å›æ»šæ–¹æ¡ˆ

**ğŸ“‹ å¤„ç†åéªŒè¯**
- [ ] ç¡®è®¤æ…¢æŸ¥è¯¢é—®é¢˜å·²è§£å†³
- [ ] éªŒè¯ä¸šåŠ¡åŠŸèƒ½æ­£å¸¸
- [ ] æ£€æŸ¥æ˜¯å¦å¼•å…¥æ–°é—®é¢˜
- [ ] æ›´æ–°ç›‘æ§å‘Šè­¦é˜ˆå€¼
- [ ] æ–‡æ¡£åŒ–å¤„ç†è¿‡ç¨‹

---

## 3. âš–ï¸ é£é™©è¯„ä¼°ä¸æ§åˆ¶ç­–ç•¥



### 3.1 é£é™©è¯†åˆ«æ¡†æ¶



**ğŸ¯ é£é™©åˆ†ç±»çŸ©é˜µ**

| é£é™©ç±»å‹ | **é«˜æ¦‚ç‡/é«˜å½±å“** | **ä½æ¦‚ç‡/é«˜å½±å“** | **é«˜æ¦‚ç‡/ä½å½±å“** | **ä½æ¦‚ç‡/ä½å½±å“** |
|---------|------------------|------------------|------------------|------------------|
| **æ•°æ®é£é™©** | æ•°æ®ä¸¢å¤±/æŸå | ä¸»ä»åŒæ­¥å¼‚å¸¸ | æ•°æ®ä¸ä¸€è‡´ | ç»Ÿè®¡åå·® |
| **æœåŠ¡é£é™©** | ç³»ç»Ÿå®•æœº | çº§è”æ•…éšœ | å“åº”å˜æ…¢ | éƒ¨åˆ†åŠŸèƒ½å¼‚å¸¸ |
| **æ“ä½œé£é™©** | è¯¯åˆ å…³é”®æ•°æ® | é…ç½®é”™è¯¯é‡å¯ | ç´¢å¼•åˆ›å»ºå¤±è´¥ | ç›‘æ§è¯¯æŠ¥ |

**ğŸ” å…·ä½“é£é™©åœºæ™¯**
```
æ•°æ®å®Œæ•´æ€§é£é™©ï¼š
â€¢ åœ¨çº¿DDLæ“ä½œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
â€¢ æ‰¹é‡æ•°æ®ä¿®æ”¹å¯èƒ½å½±å“ä¸šåŠ¡é€»è¾‘
â€¢ ç´¢å¼•é‡å»ºè¿‡ç¨‹ä¸­çš„æ•°æ®è®¿é—®å¼‚å¸¸

æ€§èƒ½å½±å“é£é™©ï¼š
â€¢ æ–°å¢ç´¢å¼•å¯¼è‡´å†™å…¥æ€§èƒ½ä¸‹é™
â€¢ æŸ¥è¯¢ä¼˜åŒ–åå…¶ä»–æŸ¥è¯¢æ€§èƒ½å—å½±å“
â€¢ ç³»ç»Ÿèµ„æºäº‰æŠ¢åŠ å‰§

ä¸šåŠ¡è¿ç»­æ€§é£é™©ï¼š
â€¢ ä¼˜åŒ–æ“ä½œå¯¼è‡´çŸ­æš‚æœåŠ¡ä¸­æ–­
â€¢ ä¸»ä»å»¶è¿Ÿå¢åŠ å½±å“è¯»å–ä¸€è‡´æ€§
â€¢ è¿æ¥æ•°è€—å°½å¯¼è‡´æ–°è¯·æ±‚è¢«æ‹’ç»
```

### 3.2 é£é™©è¯„ä¼°æ–¹æ³•



**ğŸ“Š é£é™©è¯„ä¼°æ¨¡å‹**
```
é£é™©å€¼ = å½±å“ç¨‹åº¦ Ã— å‘ç”Ÿæ¦‚ç‡ Ã— æ¢å¤éš¾åº¦

å½±å“ç¨‹åº¦è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ï¼š
5åˆ†ï¼šç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨ï¼Œä¸¥é‡ç»æµæŸå¤±
4åˆ†ï¼šæ ¸å¿ƒåŠŸèƒ½å—é˜»ï¼Œç”¨æˆ·å¤§é‡æµå¤±  
3åˆ†ï¼šéƒ¨åˆ†åŠŸèƒ½å¼‚å¸¸ï¼Œç”¨æˆ·ä½“éªŒä¸‹é™
2åˆ†ï¼šéå…³é”®åŠŸèƒ½å½±å“ï¼Œè½»å¾®ä¸ä¾¿
1åˆ†ï¼šå‡ ä¹æ— å½±å“ï¼Œä»…æŠ€æœ¯å±‚é¢

å‘ç”Ÿæ¦‚ç‡è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ï¼š
5åˆ†ï¼šå‡ ä¹ç¡®å®šå‘ç”Ÿï¼ˆ90%ä»¥ä¸Šï¼‰
4åˆ†ï¼šå¾ˆå¯èƒ½å‘ç”Ÿï¼ˆ70-90%ï¼‰
3åˆ†ï¼šå¯èƒ½å‘ç”Ÿï¼ˆ30-70%ï¼‰
2åˆ†ï¼šä¸å¤ªå¯èƒ½ï¼ˆ10-30%ï¼‰
1åˆ†ï¼šæä¸å¯èƒ½ï¼ˆ10%ä»¥ä¸‹ï¼‰

æ¢å¤éš¾åº¦è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ï¼š
5åˆ†ï¼šéœ€è¦æ•°æ®æ¢å¤ï¼Œå½±å“æ•°å°æ—¶
4åˆ†ï¼šéœ€è¦å›æ»šæ“ä½œï¼Œå½±å“1å°æ—¶
3åˆ†ï¼šéœ€è¦é‡æ–°é…ç½®ï¼Œå½±å“30åˆ†é’Ÿ
2åˆ†ï¼šç®€å•é‡å¯ï¼Œå½±å“10åˆ†é’Ÿ
1åˆ†ï¼šç«‹å³æ¢å¤ï¼Œå½±å“5åˆ†é’Ÿå†…
```

**ğŸ’¼ é£é™©è¯„ä¼°å®ä¾‹**

**æ¡ˆä¾‹ï¼šåœ¨æ ¸å¿ƒè®¢å•è¡¨ä¸Šæ·»åŠ ç´¢å¼•**
```
åœºæ™¯ï¼šç”µå•†ç½‘ç«™è®¢å•è¡¨ï¼ˆ1000ä¸‡æ¡è®°å½•ï¼‰éœ€è¦æ·»åŠ æŸ¥è¯¢ç´¢å¼•

é£é™©åˆ†æï¼š
å½±å“ç¨‹åº¦ï¼š4åˆ†ï¼ˆå¯èƒ½å¯¼è‡´è®¢å•å¤„ç†ç¼“æ…¢ï¼‰
å‘ç”Ÿæ¦‚ç‡ï¼š3åˆ†ï¼ˆå¤§è¡¨åŠ ç´¢å¼•æœ‰ä¸€å®šé£é™©ï¼‰
æ¢å¤éš¾åº¦ï¼š3åˆ†ï¼ˆéœ€è¦åˆ é™¤ç´¢å¼•é‡æ–°å¤„ç†ï¼‰
é£é™©å€¼ï¼š4 Ã— 3 Ã— 3 = 36åˆ†

é£é™©ç­‰çº§ï¼šé«˜é£é™©ï¼ˆéœ€è¦è¯¦ç»†çš„ç¼“è§£æªæ–½ï¼‰
```

### 3.3 é£é™©æ§åˆ¶ç­–ç•¥



**ğŸ›¡ï¸ é¢„é˜²æ€§æ§åˆ¶æªæ–½**

**1. æ“ä½œå‰å‡†å¤‡**
```bash
# 1. åˆ›å»ºæ•°æ®å¤‡ä»½

mysqldump --single-transaction --routines --triggers \
  database_name > backup_$(date +%Y%m%d_%H%M%S).sql

# 2. ç¡®è®¤ä¸»ä»åŒæ­¥çŠ¶æ€

mysql -e "SHOW SLAVE STATUS\G" | grep -E "(Slave_IO_Running|Slave_SQL_Running|Seconds_Behind_Master)"

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´

df -h | grep mysql

# 4. ç¡®è®¤å½“å‰è¿æ¥æ•°

mysql -e "SHOW STATUS LIKE 'Threads_connected';"
```

**2. åˆ†é˜¶æ®µæ‰§è¡Œç­–ç•¥**
```sql
-- å¤§è¡¨ç´¢å¼•åˆ†é˜¶æ®µåˆ›å»ºç¤ºä¾‹
-- ç¬¬ä¸€é˜¶æ®µï¼šåœ¨ä»åº“ä¸Šåˆ›å»ºç´¢å¼•
ALTER TABLE orders ADD INDEX idx_status_date (status, order_date);

-- ç¬¬äºŒé˜¶æ®µï¼šéªŒè¯ä»åº“ç´¢å¼•æ•ˆæœ
EXPLAIN SELECT * FROM orders WHERE status = 'pending' AND order_date > '2025-01-01';

-- ç¬¬ä¸‰é˜¶æ®µï¼šä¸»ä»åˆ‡æ¢
-- ç¬¬å››é˜¶æ®µï¼šåœ¨æ–°ä»åº“ï¼ˆåŸä¸»åº“ï¼‰åˆ›å»ºç´¢å¼•
```

**ğŸ”§ å®æ—¶ç›‘æ§æ§åˆ¶**

**ç›‘æ§è„šæœ¬ç¤ºä¾‹**
```bash
#!/bin/bash

# ä¼˜åŒ–è¿‡ç¨‹ç›‘æ§è„šæœ¬


while true; do
#    # æ£€æŸ¥æ…¢æŸ¥è¯¢æ•°é‡
    SLOW_QUERIES=$(mysql -e "SHOW STATUS LIKE 'Slow_queries';" | tail -1 | awk '{print $2}')
    
#    # æ£€æŸ¥è¿æ¥æ•°
    CONNECTIONS=$(mysql -e "SHOW STATUS LIKE 'Threads_connected';" | tail -1 | awk '{print $2}')
    
#    # æ£€æŸ¥CPUä½¿ç”¨ç‡
    CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1}')
    
    echo "$(date): Slow_queries=$SLOW_QUERIES, Connections=$CONNECTIONS, CPU=$CPU_USAGE%"
    
#    # è®¾ç½®å‘Šè­¦é˜ˆå€¼
    if [ $(echo "$CPU_USAGE > 80" | bc) -eq 1 ]; then
        echo "WARNING: High CPU usage detected!"
    fi
    
    sleep 30
done
```

---

## 4. ğŸ”§ åœ¨çº¿ä¼˜åŒ–å®æˆ˜æŠ€å·§



### 4.1 åœ¨çº¿DDLæ“ä½œæŠ€å·§



**ğŸ¯ MySQL 5.7+ åœ¨çº¿DDLæœ€ä½³å®è·µ**

**1. ç´¢å¼•åˆ›å»ºä¼˜åŒ–**
```sql
-- ä½¿ç”¨åœ¨çº¿DDLåˆ›å»ºç´¢å¼•
ALTER TABLE user_orders 
ADD INDEX idx_user_status (user_id, status),
ALGORITHM=INPLACE, 
LOCK=NONE;

-- æ£€æŸ¥DDLè¿›åº¦
SELECT 
    EVENT_NAME,
    WORK_COMPLETED,
    WORK_ESTIMATED,
    ROUND(100*WORK_COMPLETED/WORK_ESTIMATED, 2) AS PCT_COMPLETED
FROM performance_schema.events_stages_current;
```

**ğŸ’¡ DDLæ“ä½œç±»å‹é€‰æ‹©**
```
ALGORITHMé€‰é¡¹ï¼š
â€¢ COPYï¼šåˆ›å»ºä¸´æ—¶è¡¨ï¼Œæ•°æ®å…¨é‡å¤åˆ¶ï¼ˆæœ€æ…¢ï¼Œæœ€å®‰å…¨ï¼‰
â€¢ INPLACEï¼šåŸåœ°ä¿®æ”¹ï¼Œä¸å¤åˆ¶æ•°æ®ï¼ˆè¾ƒå¿«ï¼‰
â€¢ DEFAULTï¼šMySQLè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç®—æ³•

LOCKé€‰é¡¹ï¼š
â€¢ NONEï¼šå…è®¸å¹¶å‘è¯»å†™ï¼ˆæœ€ä½³æ€§èƒ½ï¼‰
â€¢ SHAREDï¼šå…è®¸å¹¶å‘è¯»ï¼Œé˜»å¡å†™
â€¢ EXCLUSIVEï¼šé˜»å¡æ‰€æœ‰å¹¶å‘æ“ä½œ
â€¢ DEFAULTï¼šMySQLè‡ªåŠ¨é€‰æ‹©æœ€å°é”çº§åˆ«
```

**2. åˆ†æ‰¹å¤„ç†å¤§è¡¨ä¿®æ”¹**
```sql
-- åˆ†æ‰¹æ›´æ–°å¤§è¡¨æ•°æ®
DELIMITER //
CREATE PROCEDURE BatchUpdateOrders()
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE batch_size INT DEFAULT 1000;
    DECLARE affected_rows INT;
    
    REPEAT
        UPDATE user_orders 
        SET status = 'processed' 
        WHERE status = 'pending' 
        AND updated_at < DATE_SUB(NOW(), INTERVAL 1 DAY)
        LIMIT batch_size;
        
        SET affected_rows = ROW_COUNT();
        
        -- é¿å…ä¸»ä»å»¶è¿Ÿè¿‡å¤§
        SELECT SLEEP(0.1);
        
    UNTIL affected_rows < batch_size END REPEAT;
END //
DELIMITER ;

CALL BatchUpdateOrders();
```

### 4.2 æŸ¥è¯¢ä¼˜åŒ–å®æˆ˜æŠ€å·§



**ğŸ” SQLé‡å†™ä¼˜åŒ–**

**1. å­æŸ¥è¯¢ä¼˜åŒ–**
```sql
-- âŒ æ•ˆç‡ä½ä¸‹çš„å­æŸ¥è¯¢
SELECT * FROM users 
WHERE user_id IN (
    SELECT user_id FROM orders 
    WHERE order_date > '2025-01-01'
);

-- âœ… ä¼˜åŒ–ä¸ºJOIN
SELECT DISTINCT u.* FROM users u
INNER JOIN orders o ON u.user_id = o.user_id
WHERE o.order_date > '2025-01-01';

-- âœ… è¿›ä¸€æ­¥ä¼˜åŒ–ï¼šä½¿ç”¨EXISTS
SELECT * FROM users u
WHERE EXISTS (
    SELECT 1 FROM orders o 
    WHERE o.user_id = u.user_id 
    AND o.order_date > '2025-01-01'
);
```

**2. åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–**
```sql
-- âŒ ä¼ ç»Ÿåˆ†é¡µï¼ˆæ·±åº¦åˆ†é¡µæ€§èƒ½å·®ï¼‰
SELECT * FROM orders 
ORDER BY order_id 
LIMIT 100000, 20;

-- âœ… æ¸¸æ ‡åˆ†é¡µä¼˜åŒ–
SELECT * FROM orders 
WHERE order_id > 100000
ORDER BY order_id 
LIMIT 20;

-- âœ… å¤åˆç´¢å¼•åˆ†é¡µä¼˜åŒ–
SELECT * FROM orders 
WHERE (order_date, order_id) > ('2025-01-01', 100000)
ORDER BY order_date, order_id 
LIMIT 20;
```

**ğŸ“Š å®æ—¶ä¼˜åŒ–æ•ˆæœå¯¹æ¯”**
```sql
-- ä¼˜åŒ–å‰åæ‰§è¡Œè®¡åˆ’å¯¹æ¯”
EXPLAIN FORMAT=JSON
SELECT * FROM orders o
JOIN users u ON o.user_id = u.user_id
WHERE o.order_date BETWEEN '2025-01-01' AND '2025-01-31'
AND u.status = 'active';

-- æŸ¥çœ‹æŸ¥è¯¢æˆæœ¬
SHOW STATUS LIKE 'Last_query_cost';
```

### 4.3 å‚æ•°è°ƒä¼˜æŠ€å·§



**âš™ï¸ åŠ¨æ€å‚æ•°è°ƒæ•´**

**1. å†…å­˜ç›¸å…³å‚æ•°**
```sql
-- æŸ¥çœ‹å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µ
SHOW STATUS LIKE 'Innodb_buffer_pool_pages_%';

-- åŠ¨æ€è°ƒæ•´ç¼“å†²æ± å¤§å°ï¼ˆMySQL 5.7+ï¼‰
SET GLOBAL innodb_buffer_pool_size = 8589934592; -- 8GB

-- æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–ï¼ˆå¦‚æœå¯ç”¨ï¼‰
SHOW VARIABLES LIKE 'query_cache%';
SET GLOBAL query_cache_size = 268435456; -- 256MB
```

**2. è¿æ¥å’Œå¹¶å‘å‚æ•°**
```sql
-- è°ƒæ•´æœ€å¤§è¿æ¥æ•°
SHOW VARIABLES LIKE 'max_connections';
SET GLOBAL max_connections = 1000;

-- è°ƒæ•´çº¿ç¨‹ç¼“å­˜
SHOW STATUS LIKE 'Threads_%';
SET GLOBAL thread_cache_size = 100;

-- InnoDBå¹¶å‘æ§åˆ¶
SET GLOBAL innodb_thread_concurrency = 16;
```

**ğŸ”„ å‚æ•°è°ƒæ•´ç›‘æ§**
```bash
#!/bin/bash

# å‚æ•°è°ƒæ•´æ•ˆæœç›‘æ§


echo "ç›‘æ§å‚æ•°è°ƒæ•´æ•ˆæœ..."
while true; do
#    # è¿æ¥æ•°ç»Ÿè®¡
    CURRENT_CONN=$(mysql -e "SHOW STATUS LIKE 'Threads_connected';" | tail -1 | awk '{print $2}')
    MAX_CONN=$(mysql -e "SHOW VARIABLES LIKE 'max_connections';" | tail -1 | awk '{print $2}')
    CONN_USAGE=$(echo "scale=2; $CURRENT_CONN * 100 / $MAX_CONN" | bc)
    
#    # ç¼“å†²æ± å‘½ä¸­ç‡
    POOL_READS=$(mysql -e "SHOW STATUS LIKE 'Innodb_buffer_pool_reads';" | tail -1 | awk '{print $2}')
    POOL_READ_REQUESTS=$(mysql -e "SHOW STATUS LIKE 'Innodb_buffer_pool_read_requests';" | tail -1 | awk '{print $2}')
    HIT_RATE=$(echo "scale=4; (1 - $POOL_READS / $POOL_READ_REQUESTS) * 100" | bc)
    
    echo "$(date): è¿æ¥ä½¿ç”¨ç‡=${CONN_USAGE}%, ç¼“å†²æ± å‘½ä¸­ç‡=${HIT_RATE}%"
    sleep 60
done
```

---

## 5. ğŸ”„ å›æ»šæ–¹æ¡ˆè®¾è®¡ä¸å‡†å¤‡



### 5.1 å›æ»šç­–ç•¥è®¾è®¡



**ğŸ¯ å›æ»šæ–¹æ¡ˆåˆ†ç±»**

```
å¿«é€Ÿå›æ»šï¼ˆ5åˆ†é’Ÿå†…ï¼‰ï¼š
â”œâ”€â”€ å‚æ•°å›æ»šï¼šæ¢å¤é…ç½®å‚æ•°
â”œâ”€â”€ æŸ¥è¯¢ç»ˆæ­¢ï¼šåœæ­¢é—®é¢˜æŸ¥è¯¢
â”œâ”€â”€ è¿æ¥é™åˆ¶ï¼šä¸´æ—¶é™åˆ¶è¿æ¥æ•°
â””â”€â”€ ç¼“å­˜æ¸…ç†ï¼šæ¸…é™¤æŸ¥è¯¢ç¼“å­˜

æ ‡å‡†å›æ»šï¼ˆ30åˆ†é’Ÿå†…ï¼‰ï¼š
â”œâ”€â”€ ç´¢å¼•åˆ é™¤ï¼šåˆ é™¤æ–°åˆ›å»ºçš„ç´¢å¼•
â”œâ”€â”€ æ•°æ®å›æ»šï¼šæ¢å¤ä¿®æ”¹çš„æ•°æ®
â”œâ”€â”€ é…ç½®å›æ»šï¼šæ¢å¤é…ç½®æ–‡ä»¶
â””â”€â”€ æœåŠ¡é‡å¯ï¼šé‡å¯æ•°æ®åº“æœåŠ¡

å®Œæ•´å›æ»šï¼ˆ2å°æ—¶å†…ï¼‰ï¼š
â”œâ”€â”€ æ•°æ®æ¢å¤ï¼šä»å¤‡ä»½æ¢å¤æ•°æ®
â”œâ”€â”€ ä¸»ä»é‡å»ºï¼šé‡æ–°é…ç½®ä¸»ä»å…³ç³»
â”œâ”€â”€ åº”ç”¨å›æ»šï¼šå›æ»šåº”ç”¨ä»£ç 
â””â”€â”€ å…¨é¢éªŒè¯ï¼šå®Œæ•´ä¸šåŠ¡éªŒè¯
```

### 5.2 è‡ªåŠ¨å›æ»šè„šæœ¬



**ğŸ”§ å‚æ•°å›æ»šè„šæœ¬**
```bash
#!/bin/bash

# MySQLå‚æ•°å›æ»šè„šæœ¬


BACKUP_FILE="/tmp/mysql_params_backup_$(date +%Y%m%d_%H%M%S).sql"
ROLLBACK_FILE="/tmp/mysql_rollback.sql"

# 1. å¤‡ä»½å½“å‰å‚æ•°

echo "-- MySQLå‚æ•°å¤‡ä»½ $(date)" > $BACKUP_FILE
mysql -e "SHOW VARIABLES;" | while read var value; do
    if [[ "$var" != "Variable_name" ]]; then
        echo "SET GLOBAL $var = '$value';" >> $BACKUP_FILE
    fi
done

# 2. åˆ›å»ºå›æ»šè„šæœ¬

cat > $ROLLBACK_FILE << 'EOF'
-- å…³é”®å‚æ•°å›æ»š
SET GLOBAL max_connections = 200;
SET GLOBAL innodb_buffer_pool_size = 2147483648;
SET GLOBAL query_cache_size = 0;
SET GLOBAL innodb_thread_concurrency = 0;

-- éªŒè¯å›æ»šæ•ˆæœ
SHOW VARIABLES LIKE 'max_connections';
SHOW VARIABLES LIKE 'innodb_buffer_pool_size';
EOF

echo "å›æ»šè„šæœ¬å·²å‡†å¤‡ï¼š$ROLLBACK_FILE"
echo "å‚æ•°å¤‡ä»½æ–‡ä»¶ï¼š$BACKUP_FILE"
```

**ğŸ—‚ï¸ ç´¢å¼•å›æ»šæ–¹æ¡ˆ**
```sql
-- ç´¢å¼•å›æ»šé¢„æ¡ˆ
-- è®°å½•ä¼˜åŒ–å‰çš„è¡¨ç»“æ„
CREATE TABLE index_rollback_log (
    table_name VARCHAR(64),
    index_name VARCHAR(64),
    index_definition TEXT,
    operation_type ENUM('ADD', 'DROP'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ·»åŠ ç´¢å¼•æ—¶è®°å½•å›æ»šä¿¡æ¯
INSERT INTO index_rollback_log 
VALUES ('user_orders', 'idx_user_status', 'KEY idx_user_status (user_id, status)', 'ADD', NOW());

-- å›æ»šè„šæœ¬ç”Ÿæˆ
SELECT CONCAT('ALTER TABLE ', table_name, ' DROP INDEX ', index_name, ';') AS rollback_sql
FROM index_rollback_log 
WHERE operation_type = 'ADD' 
AND created_at > DATE_SUB(NOW(), INTERVAL 1 DAY);
```

### 5.3 å›æ»šæ‰§è¡Œæµç¨‹



**ğŸ“‹ å›æ»šæ£€æŸ¥æ¸…å•**

**å›æ»šå‰æ£€æŸ¥ï¼š**
- [ ] ç¡®è®¤å½“å‰ç³»ç»ŸçŠ¶æ€
- [ ] éªŒè¯å›æ»šè„šæœ¬æ­£ç¡®æ€§
- [ ] å‡†å¤‡å¿…è¦çš„å¤‡ä»½æ–‡ä»¶
- [ ] é€šçŸ¥ç›¸å…³å›¢é˜Ÿæˆå‘˜
- [ ] å‡†å¤‡ç›‘æ§å’ŒéªŒè¯æ–¹æ³•

**å›æ»šæ‰§è¡Œé¡ºåºï¼š**
```
1. åœæ­¢é—®é¢˜æ“ä½œ
   â”œâ”€â”€ ç»ˆæ­¢æ…¢æŸ¥è¯¢
   â”œâ”€â”€ æš‚åœæ‰¹é‡ä»»åŠ¡
   â””â”€â”€ é™åˆ¶æ–°è¿æ¥

2. åº”ç”¨å±‚å›æ»š
   â”œâ”€â”€ å›æ»šåº”ç”¨ä»£ç 
   â”œâ”€â”€ æ¢å¤é…ç½®æ–‡ä»¶
   â””â”€â”€ é‡å¯åº”ç”¨æœåŠ¡

3. æ•°æ®åº“å›æ»š
   â”œâ”€â”€ åˆ é™¤æ–°å¢ç´¢å¼•
   â”œâ”€â”€ æ¢å¤å‚æ•°é…ç½®
   â”œâ”€â”€ å›æ»šæ•°æ®ä¿®æ”¹
   â””â”€â”€ é‡å¯æ•°æ®åº“ï¼ˆå¦‚éœ€è¦ï¼‰

4. éªŒè¯å›æ»šæ•ˆæœ
   â”œâ”€â”€ æ£€æŸ¥æŸ¥è¯¢æ€§èƒ½
   â”œâ”€â”€ éªŒè¯ä¸šåŠ¡åŠŸèƒ½
   â”œâ”€â”€ ç›‘æ§ç³»ç»ŸæŒ‡æ ‡
   â””â”€â”€ ç¡®è®¤ç”¨æˆ·ä½“éªŒ
```

**âš¡ ç´§æ€¥å›æ»šæ“ä½œ**
```sql
-- ç«‹å³ç»ˆæ­¢æ‰€æœ‰æ…¢æŸ¥è¯¢
SELECT CONCAT('KILL ', Id, ';') AS kill_sql
FROM information_schema.PROCESSLIST 
WHERE Command = 'Query' 
AND Time > 30
AND User != 'system user';

-- å¿«é€Ÿåˆ é™¤é—®é¢˜ç´¢å¼•
DROP INDEX idx_temp_optimization ON user_orders;

-- æ¢å¤å…³é”®å‚æ•°
SET GLOBAL max_connections = 200;
SET GLOBAL innodb_thread_concurrency = 0;

-- æ¸…ç†æŸ¥è¯¢ç¼“å­˜
RESET QUERY CACHE;
```

---

## 6. âœ… ä¼˜åŒ–æ•ˆæœéªŒè¯æ–¹æ³•



### 6.1 æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”



**ğŸ“Š å…³é”®æ€§èƒ½æŒ‡æ ‡**

**æŸ¥è¯¢æ€§èƒ½æŒ‡æ ‡**
```sql
-- ä¼˜åŒ–å‰åæŸ¥è¯¢æ—¶é—´å¯¹æ¯”
-- 1. æ‰§è¡Œè®¡åˆ’å¯¹æ¯”
EXPLAIN FORMAT=JSON SELECT * FROM orders 
WHERE user_id = 12345 AND status = 'pending';

-- 2. æŸ¥è¯¢æˆæœ¬å¯¹æ¯”
FLUSH STATUS;
SELECT * FROM orders WHERE user_id = 12345 AND status = 'pending';
SHOW STATUS LIKE 'Last_query_cost';

-- 3. æ‰§è¡Œæ—¶é—´ç»Ÿè®¡
SELECT 
    SCHEMA_NAME,
    DIGEST_TEXT,
    COUNT_STAR,
    AVG_TIMER_WAIT/1000000000 AS avg_time_sec,
    MAX_TIMER_WAIT/1000000000 AS max_time_sec
FROM performance_schema.events_statements_summary_by_digest
WHERE SCHEMA_NAME = 'your_database'
ORDER BY AVG_TIMER_WAIT DESC
LIMIT 10;
```

**ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡**
```sql
-- æ•´ä½“æ•°æ®åº“æ€§èƒ½æŒ‡æ ‡
SHOW STATUS LIKE 'Questions';           -- æ€»æŸ¥è¯¢æ•°
SHOW STATUS LIKE 'Slow_queries';        -- æ…¢æŸ¥è¯¢æ•°
SHOW STATUS LIKE 'Threads_connected';   -- å½“å‰è¿æ¥æ•°
SHOW STATUS LIKE 'Threads_running';     -- æ´»è·ƒçº¿ç¨‹æ•°

-- InnoDBæ€§èƒ½æŒ‡æ ‡
SHOW STATUS LIKE 'Innodb_buffer_pool_read_requests';  -- ç¼“å†²æ± è¯»è¯·æ±‚
SHOW STATUS LIKE 'Innodb_buffer_pool_reads';          -- ç£ç›˜è¯»æ¬¡æ•°
SHOW STATUS LIKE 'Innodb_rows_read';                  -- è¯»å–è¡Œæ•°
SHOW STATUS LIKE 'Innodb_rows_inserted';              -- æ’å…¥è¡Œæ•°
```

### 6.2 ä¸šåŠ¡æŒ‡æ ‡éªŒè¯



**ğŸ“ˆ ä¸šåŠ¡æ€§èƒ½ç›‘æ§**

**å“åº”æ—¶é—´ç›‘æ§**
```python
# Pythonç›‘æ§è„šæœ¬ç¤ºä¾‹

import time
import mysql.connector
import statistics

def monitor_query_performance():
    """ç›‘æ§æŸ¥è¯¢æ€§èƒ½"""
    
#    # æµ‹è¯•æŸ¥è¯¢åˆ—è¡¨
    test_queries = [
        "SELECT * FROM orders WHERE user_id = %s",
        "SELECT COUNT(*) FROM orders WHERE status = %s",
        "SELECT * FROM users WHERE email = %s"
    ]
    
    results = {}
    
    for query in test_queries:
        times = []
        for _ in range(10):  # æ‰§è¡Œ10æ¬¡å–å¹³å‡å€¼
            start_time = time.time()
            
#            # æ‰§è¡ŒæŸ¥è¯¢
            cursor.execute(query, (12345,))  # ç¤ºä¾‹å‚æ•°
            cursor.fetchall()
            
            end_time = time.time()
            times.append(end_time - start_time)
        
        results[query] = {
            'avg_time': statistics.mean(times),
            'max_time': max(times),
            'min_time': min(times)
        }
    
    return results

# ä¼˜åŒ–å‰åå¯¹æ¯”

before_optimization = monitor_query_performance()
# ... æ‰§è¡Œä¼˜åŒ–æ“ä½œ ...

after_optimization = monitor_query_performance()

# æ€§èƒ½æå‡è®¡ç®—

for query in before_optimization:
    improvement = (before_optimization[query]['avg_time'] - 
                  after_optimization[query]['avg_time']) / \
                  before_optimization[query]['avg_time'] * 100
    print(f"æŸ¥è¯¢æ€§èƒ½æå‡: {improvement:.2f}%")
```

**ğŸ“Š ç”¨æˆ·ä½“éªŒæŒ‡æ ‡**
```
é¡µé¢åŠ è½½æ—¶é—´ï¼š
â€¢ é¦–é¡µåŠ è½½æ—¶é—´ < 2ç§’
â€¢ æœç´¢ç»“æœå±•ç¤º < 3ç§’  
â€¢ è®¢å•æŸ¥è¯¢å“åº” < 1ç§’

ç³»ç»Ÿå¯ç”¨æ€§ï¼š
â€¢ ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ—¶é—´ > 99.9%
â€¢ é”™è¯¯ç‡ < 0.1%
â€¢ è¶…æ—¶è¯·æ±‚æ¯”ä¾‹ < 1%

ä¸šåŠ¡å¤„ç†èƒ½åŠ›ï¼š
â€¢ è®¢å•å¤„ç†é€Ÿåº¦
â€¢ ç”¨æˆ·æ³¨å†ŒæˆåŠŸç‡
â€¢ æ”¯ä»˜æˆåŠŸç‡
```

### 6.3 éªŒè¯è‡ªåŠ¨åŒ–è„šæœ¬



**ğŸ”§ è‡ªåŠ¨åŒ–éªŒè¯å·¥å…·**
```bash
#!/bin/bash

# ä¼˜åŒ–æ•ˆæœè‡ªåŠ¨éªŒè¯è„šæœ¬


REPORT_FILE="/tmp/optimization_report_$(date +%Y%m%d_%H%M%S).txt"

echo "=== MySQLä¼˜åŒ–æ•ˆæœéªŒè¯æŠ¥å‘Š ===" > $REPORT_FILE
echo "éªŒè¯æ—¶é—´: $(date)" >> $REPORT_FILE
echo "" >> $REPORT_FILE

# 1. æ…¢æŸ¥è¯¢ç»Ÿè®¡

echo "=== æ…¢æŸ¥è¯¢ç»Ÿè®¡ ===" >> $REPORT_FILE
mysql -e "
SELECT 
    COUNT(*) as slow_query_count,
    AVG(query_time) as avg_query_time,
    MAX(query_time) as max_query_time
FROM mysql.slow_log 
WHERE start_time > DATE_SUB(NOW(), INTERVAL 1 HOUR);
" >> $REPORT_FILE

# 2. ç³»ç»Ÿèµ„æºä½¿ç”¨

echo "=== ç³»ç»Ÿèµ„æºä½¿ç”¨ ===" >> $REPORT_FILE
echo "CPUä½¿ç”¨ç‡:" >> $REPORT_FILE
top -bn1 | grep "Cpu(s)" >> $REPORT_FILE
echo "å†…å­˜ä½¿ç”¨:" >> $REPORT_FILE
free -h >> $REPORT_FILE
echo "ç£ç›˜IO:" >> $REPORT_FILE
iostat -x 1 1 >> $REPORT_FILE

# 3. æ•°æ®åº“è¿æ¥çŠ¶æ€

echo "=== æ•°æ®åº“è¿æ¥ç»Ÿè®¡ ===" >> $REPORT_FILE
mysql -e "
SHOW STATUS LIKE 'Threads_connected';
SHOW STATUS LIKE 'Threads_running';
SHOW STATUS LIKE 'Max_used_connections';
" >> $REPORT_FILE

# 4. ç¼“å†²æ± æ•ˆç‡

echo "=== InnoDBç¼“å†²æ± æ•ˆç‡ ===" >> $REPORT_FILE
mysql -e "
SELECT 
    ROUND((1 - (reads/read_requests)) * 100, 2) AS buffer_pool_hit_rate
FROM (
    SELECT 
        variable_value AS reads
    FROM information_schema.global_status 
    WHERE variable_name = 'Innodb_buffer_pool_reads'
) AS reads
CROSS JOIN (
    SELECT 
        variable_value AS read_requests
    FROM information_schema.global_status 
    WHERE variable_name = 'Innodb_buffer_pool_read_requests'
) AS read_requests;
" >> $REPORT_FILE

echo "éªŒè¯æŠ¥å‘Šå·²ç”Ÿæˆ: $REPORT_FILE"

# 5. å‘é€æŠ¥å‘Šï¼ˆå¯é€‰ï¼‰

# mail -s "MySQLä¼˜åŒ–éªŒè¯æŠ¥å‘Š" admin@company.com < $REPORT_FILE

```

---

## 7. ğŸ“Š æ€§èƒ½åŸºçº¿å»ºç«‹ä¸ç›‘æ§



### 7.1 åŸºçº¿æŒ‡æ ‡å®šä¹‰



**ğŸ¯ æ€§èƒ½åŸºçº¿çš„é‡è¦æ€§**

**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> å°±åƒä½“æ£€æ—¶è¦æœ‰æ­£å¸¸çš„è¡€å‹ã€å¿ƒç‡æŒ‡æ ‡ä½œä¸ºå‚è€ƒï¼Œæ•°æ®åº“ä¹Ÿéœ€è¦å»ºç«‹æ­£å¸¸è¿è¡Œçš„æ€§èƒ½åŸºçº¿ï¼Œè¿™æ ·æ‰èƒ½åŠæ—¶å‘ç°å¼‚å¸¸ã€‚

**ğŸ“‹ æ ¸å¿ƒåŸºçº¿æŒ‡æ ‡**
```
æŸ¥è¯¢æ€§èƒ½åŸºçº¿ï¼š
â€¢ å¹³å‡æŸ¥è¯¢å“åº”æ—¶é—´ < 100ms
â€¢ 95%åˆ†ä½æŸ¥è¯¢æ—¶é—´ < 500ms  
â€¢ 99%åˆ†ä½æŸ¥è¯¢æ—¶é—´ < 1000ms
â€¢ æ…¢æŸ¥è¯¢æ¯”ä¾‹ < 1%

ç³»ç»Ÿèµ„æºåŸºçº¿ï¼š
â€¢ CPUä½¿ç”¨ç‡å¹³å‡å€¼ < 70%
â€¢ å†…å­˜ä½¿ç”¨ç‡ < 80%
â€¢ ç£ç›˜IOä½¿ç”¨ç‡ < 80%
â€¢ ç½‘ç»œå¸¦å®½ä½¿ç”¨ç‡ < 60%

æ•°æ®åº“è¿æ¥åŸºçº¿ï¼š
â€¢ å¹³å‡è¿æ¥æ•° < æœ€å¤§è¿æ¥æ•°çš„50%
â€¢ æ´»è·ƒè¿æ¥æ•° < æ€»è¿æ¥æ•°çš„30%
â€¢ è¿æ¥ç­‰å¾…æ—¶é—´ < 1ç§’
â€¢ è¿æ¥å¤±è´¥ç‡ < 0.1%
```

### 7.2 åŸºçº¿å»ºç«‹æ–¹æ³•



**ğŸ“Š æ•°æ®æ”¶é›†ç­–ç•¥**
```sql
-- åˆ›å»ºæ€§èƒ½åŸºçº¿è¡¨
CREATE TABLE performance_baseline (
    metric_name VARCHAR(64),
    metric_value DECIMAL(15,4),
    metric_unit VARCHAR(32),
    baseline_type ENUM('avg', 'p50', 'p95', 'p99', 'max'),
    collection_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_metric_date (metric_name, collection_date)
);

-- æ”¶é›†æŸ¥è¯¢æ€§èƒ½æ•°æ®
INSERT INTO performance_baseline 
SELECT 
    'query_response_time' as metric_name,
    AVG(AVG_TIMER_WAIT)/1000000000 as metric_value,
    'seconds' as metric_unit,
    'avg' as baseline_type,
    CURDATE() as collection_date,
    NOW() as created_at
FROM performance_schema.events_statements_summary_by_digest
WHERE LAST_SEEN > DATE_SUB(NOW(), INTERVAL 1 DAY);
```

**ğŸ“ˆ åŸºçº¿æ•°æ®åˆ†æ**
```python
# PythonåŸºçº¿åˆ†æè„šæœ¬

import pandas as pd
import numpy as np
from scipy import stats

def establish_baseline(data_points, confidence_level=0.95):
    """å»ºç«‹æ€§èƒ½åŸºçº¿"""
    
#    # ç§»é™¤å¼‚å¸¸å€¼ï¼ˆä½¿ç”¨IQRæ–¹æ³•ï¼‰
    Q1 = np.percentile(data_points, 25)
    Q3 = np.percentile(data_points, 75)
    IQR = Q3 - Q1
    lower_bound = Q1 - 1.5 * IQR
    upper_bound = Q3 + 1.5 * IQR
    
    clean_data = [x for x in data_points if lower_bound <= x <= upper_bound]
    
#    # è®¡ç®—åŸºçº¿æŒ‡æ ‡
    baseline = {
        'mean': np.mean(clean_data),
        'median': np.median(clean_data),
        'p95': np.percentile(clean_data, 95),
        'p99': np.percentile(clean_data, 99),
        'std': np.std(clean_data),
        'confidence_interval': stats.t.interval(
            confidence_level, 
            len(clean_data)-1, 
            loc=np.mean(clean_data), 
            scale=stats.sem(clean_data)
        )
    }
    
    return baseline

# ä½¿ç”¨ç¤ºä¾‹

query_times = [0.1, 0.15, 0.12, 0.08, 0.2, 0.11, 0.13, 0.09, 0.16, 0.14]
baseline = establish_baseline(query_times)
print(f"æŸ¥è¯¢æ—¶é—´åŸºçº¿: {baseline}")
```

### 7.3 ç›‘æ§ç³»ç»Ÿè®¾è®¡



**ğŸ”” å‘Šè­¦é˜ˆå€¼è®¾è®¡**
```
å‘Šè­¦çº§åˆ«è®¾è®¡ï¼š

ğŸŸ¢ æ­£å¸¸çŠ¶æ€ï¼ˆç»¿è‰²ï¼‰ï¼š
â€¢ æŒ‡æ ‡åœ¨åŸºçº¿èŒƒå›´å†…
â€¢ ç³»ç»Ÿè¿è¡Œç¨³å®š
â€¢ æ— éœ€äººå·¥å¹²é¢„

ğŸŸ¡ æ³¨æ„çŠ¶æ€ï¼ˆé»„è‰²ï¼‰ï¼š
â€¢ æŒ‡æ ‡è¶…å‡ºåŸºçº¿20%
â€¢ éœ€è¦å…³æ³¨ä½†ä¸ç´§æ€¥
â€¢ å»ºè®®è¿›è¡Œé¢„é˜²æ€§æ£€æŸ¥

ğŸŸ  è­¦å‘ŠçŠ¶æ€ï¼ˆæ©™è‰²ï¼‰ï¼š
â€¢ æŒ‡æ ‡è¶…å‡ºåŸºçº¿50%
â€¢ å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ
â€¢ éœ€è¦åŠæ—¶å¤„ç†

ğŸ”´ ä¸¥é‡çŠ¶æ€ï¼ˆçº¢è‰²ï¼‰ï¼š
â€¢ æŒ‡æ ‡è¶…å‡ºåŸºçº¿100%æˆ–æœåŠ¡ä¸å¯ç”¨
â€¢ ä¸¥é‡å½±å“ä¸šåŠ¡è¿è¡Œ
â€¢ éœ€è¦ç«‹å³å¤„ç†
```

**ğŸ“± è‡ªåŠ¨å‘Šè­¦è„šæœ¬**
```bash
#!/bin/bash

# MySQLæ€§èƒ½ç›‘æ§å‘Šè­¦è„šæœ¬


# é…ç½®é˜ˆå€¼

SLOW_QUERY_THRESHOLD=10          # æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆæ¯åˆ†é’Ÿï¼‰
CPU_THRESHOLD=80                 # CPUä½¿ç”¨ç‡é˜ˆå€¼
CONNECTION_THRESHOLD=80          # è¿æ¥ä½¿ç”¨ç‡é˜ˆå€¼
BUFFER_POOL_HIT_THRESHOLD=95     # ç¼“å†²æ± å‘½ä¸­ç‡é˜ˆå€¼

# è·å–å½“å‰æŒ‡æ ‡

SLOW_QUERIES=$(mysql -e "
    SELECT COUNT(*) FROM mysql.slow_log 
    WHERE start_time > DATE_SUB(NOW(), INTERVAL 1 MINUTE)
" | tail -1)

CURRENT_CONN=$(mysql -e "SHOW STATUS LIKE 'Threads_connected';" | tail -1 | awk '{print $2}')
MAX_CONN=$(mysql -e "SHOW VARIABLES LIKE 'max_connections';" | tail -1 | awk '{print $2}')
CONN_USAGE=$(echo "scale=0; $CURRENT_CONN * 100 / $MAX_CONN" | bc)

CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1}' | cut -d. -f1)

# ç¼“å†²æ± å‘½ä¸­ç‡è®¡ç®—

BUFFER_POOL_HIT=$(mysql -e "
    SELECT ROUND((1 - (
        (SELECT variable_value FROM information_schema.global_status WHERE variable_name = 'Innodb_buffer_pool_reads') /
        (SELECT variable_value FROM information_schema.global_status WHERE variable_name = 'Innodb_buffer_pool_read_requests')
    )) * 100, 2)
" | tail -1)

# å‘Šè­¦æ£€æŸ¥å’Œå‘é€

send_alert() {
    local message="$1"
    local severity="$2"
    
    echo "[$(date)] $severity: $message"
    
#    # å‘é€é‚®ä»¶å‘Šè­¦ï¼ˆéœ€è¦é…ç½®é‚®ä»¶æœåŠ¡ï¼‰
#    # echo "$message" | mail -s "MySQLç›‘æ§å‘Šè­¦ - $severity" admin@company.com
    
#    # å‘é€é’‰é’‰æˆ–ä¼å¾®å‘Šè­¦ï¼ˆéœ€è¦é…ç½®webhookï¼‰
#    # curl -X POST webhook_url -d "{\"text\":\"$message\"}"
}

# æ…¢æŸ¥è¯¢æ£€æŸ¥

if [ "$SLOW_QUERIES" -gt "$SLOW_QUERY_THRESHOLD" ]; then
    send_alert "æ…¢æŸ¥è¯¢æ•°é‡å¼‚å¸¸: ${SLOW_QUERIES}/åˆ†é’Ÿï¼Œè¶…è¿‡é˜ˆå€¼${SLOW_QUERY_THRESHOLD}" "WARNING"
fi

# CPUä½¿ç”¨ç‡æ£€æŸ¥

if [ "$CPU_USAGE" -gt "$CPU_THRESHOLD" ]; then
    send_alert "CPUä½¿ç”¨ç‡è¿‡é«˜: ${CPU_USAGE}%ï¼Œè¶…è¿‡é˜ˆå€¼${CPU_THRESHOLD}%" "WARNING"
fi

# è¿æ¥æ•°æ£€æŸ¥

if [ "$CONN_USAGE" -gt "$CONNECTION_THRESHOLD" ]; then
    send_alert "æ•°æ®åº“è¿æ¥ä½¿ç”¨ç‡è¿‡é«˜: ${CONN_USAGE}%ï¼Œè¶…è¿‡é˜ˆå€¼${CONNECTION_THRESHOLD}%" "WARNING"
fi

# ç¼“å†²æ± å‘½ä¸­ç‡æ£€æŸ¥

if [ $(echo "$BUFFER_POOL_HIT < $BUFFER_POOL_HIT_THRESHOLD" | bc) -eq 1 ]; then
    send_alert "ç¼“å†²æ± å‘½ä¸­ç‡è¿‡ä½: ${BUFFER_POOL_HIT}%ï¼Œä½äºé˜ˆå€¼${BUFFER_POOL_HIT_THRESHOLD}%" "WARNING"
fi

echo "[$(date)] ç›‘æ§æ£€æŸ¥å®Œæˆ"
```

---

## 8. ğŸ”„ æŒç»­æ”¹è¿›ä¸ç»éªŒæ²‰æ·€



### 8.1 æŒç»­æ”¹è¿›æµç¨‹



**ğŸ”„ PDCAæ”¹è¿›å¾ªç¯**

```
Planï¼ˆè®¡åˆ’ï¼‰
â”œâ”€â”€ æ€§èƒ½é—®é¢˜è¯†åˆ«
â”œâ”€â”€ ä¼˜åŒ–ç›®æ ‡è®¾å®š  
â”œâ”€â”€ è§£å†³æ–¹æ¡ˆè®¾è®¡
â””â”€â”€ å®æ–½è®¡åˆ’åˆ¶å®š

Doï¼ˆæ‰§è¡Œï¼‰
â”œâ”€â”€ ä¼˜åŒ–æ–¹æ¡ˆå®æ–½
â”œâ”€â”€ è¿‡ç¨‹ç›‘æ§è®°å½•
â”œâ”€â”€ é—®é¢˜åŠæ—¶å“åº”
â””â”€â”€ æ•°æ®æ”¶é›†æ•´ç†

Checkï¼ˆæ£€æŸ¥ï¼‰
â”œâ”€â”€ æ•ˆæœéªŒè¯è¯„ä¼°
â”œâ”€â”€ ç›®æ ‡è¾¾æˆåˆ†æ
â”œâ”€â”€ å‰¯ä½œç”¨è¯†åˆ«
â””â”€â”€ æ”¹è¿›ç©ºé—´å‘ç°

Actï¼ˆè¡ŒåŠ¨ï¼‰
â”œâ”€â”€ æˆåŠŸç»éªŒå›ºåŒ–
â”œâ”€â”€ å¤±è´¥æ•™è®­æ€»ç»“
â”œâ”€â”€ æµç¨‹æ ‡å‡†æ›´æ–°
â””â”€â”€ ä¸‹è½®æ”¹è¿›è§„åˆ’
```

### 8.2 ç»éªŒæ–‡æ¡£åŒ–



**ğŸ“š çŸ¥è¯†ç®¡ç†ä½“ç³»**

**1. é—®é¢˜å¤„ç†æ¡ˆä¾‹åº“**
```markdown
# æ¡ˆä¾‹æ¨¡æ¿



## é—®é¢˜æè¿°


- **å‘ç”Ÿæ—¶é—´**: 2025-09-11 14:30
- **å½±å“èŒƒå›´**: è®¢å•æŸ¥è¯¢åŠŸèƒ½
- **ä¸¥é‡ç¨‹åº¦**: P1ï¼ˆé‡è¦ï¼‰
- **ç—‡çŠ¶è¡¨ç°**: æŸ¥è¯¢å“åº”æ—¶é—´ä»100mså¢åŠ åˆ°5ç§’

## é—®é¢˜åˆ†æ


- **ç›´æ¥åŸå› **: ç´¢å¼•å¤±æ•ˆ
- **æ ¹æœ¬åŸå› **: æ•°æ®ç±»å‹éšå¼è½¬æ¢
- **è§¦å‘æ¡ä»¶**: ç”¨æˆ·IDæŸ¥è¯¢ä½¿ç”¨äº†å­—ç¬¦ä¸²ç±»å‹

## è§£å†³æ–¹æ¡ˆ


- **ä¸´æ—¶æªæ–½**: æ·»åŠ ä¸´æ—¶ç´¢å¼•
- **æ ¹æœ¬è§£å†³**: ä¿®æ”¹æŸ¥è¯¢æ¡ä»¶ï¼Œç¡®ä¿æ•°æ®ç±»å‹ä¸€è‡´
- **ä»£ç ä¿®æ”¹**: WHERE user_id = 12345 è€Œä¸æ˜¯ WHERE user_id = '12345'

## æ•ˆæœéªŒè¯


- **æ€§èƒ½æå‡**: æŸ¥è¯¢æ—¶é—´ä»5ç§’é™ä½åˆ°80ms
- **ä¸šåŠ¡å½±å“**: ç”¨æˆ·ä½“éªŒæ˜¾è‘—æ”¹å–„
- **å‰¯ä½œç”¨**: æ— 

## ç»éªŒæ€»ç»“


- **é¢„é˜²æªæ–½**: æŸ¥è¯¢æ¡ä»¶æ•°æ®ç±»å‹æ£€æŸ¥
- **ç›‘æ§å®Œå–„**: æ·»åŠ ç´¢å¼•ä½¿ç”¨ç‡ç›‘æ§
- **æµç¨‹æ”¹è¿›**: SQL reviewæµç¨‹åŠ å¼º
```

**2. æœ€ä½³å®è·µæ–‡æ¡£**
```yaml
# MySQLä¼˜åŒ–æœ€ä½³å®è·µ


ç´¢å¼•è®¾è®¡åŸåˆ™:
  - é€‰æ‹©æ€§é«˜çš„åˆ—ä¼˜å…ˆ
  - å¤åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™
  - é¿å…å†—ä½™ç´¢å¼•
  - å®šæœŸæ¸…ç†æ— æ•ˆç´¢å¼•

æŸ¥è¯¢ä¼˜åŒ–æŒ‡å—:
  - é¿å…SELECT *
  - ä½¿ç”¨LIMITé™åˆ¶ç»“æœé›†
  - ä¼˜åŒ–JOINé¡ºåº
  - åˆç†ä½¿ç”¨å­æŸ¥è¯¢

å‚æ•°è°ƒä¼˜å»ºè®®:
  - innodb_buffer_pool_size: ç‰©ç†å†…å­˜çš„70-80%
  - max_connections: æ ¹æ®å¹¶å‘éœ€æ±‚è®¾ç½®
  - query_cache_size: å°å‹åº”ç”¨å¯å¼€å¯
  - slow_query_log: ç”Ÿäº§ç¯å¢ƒå»ºè®®å¼€å¯

ç›‘æ§å‘Šè­¦é…ç½®:
  - æ…¢æŸ¥è¯¢æ•°é‡: >10/åˆ†é’Ÿå‘Šè­¦
  - CPUä½¿ç”¨ç‡: >80%å‘Šè­¦  
  - è¿æ¥ä½¿ç”¨ç‡: >80%å‘Šè­¦
  - ç¼“å†²æ± å‘½ä¸­ç‡: <95%å‘Šè­¦
```

### 8.3 å›¢é˜Ÿèƒ½åŠ›å»ºè®¾



**ğŸ‘¥ æŠ€èƒ½æå‡è®¡åˆ’**

**æŠ€èƒ½åˆ†çº§æ ‡å‡†**
```
åˆçº§DBAï¼ˆLevel 1ï¼‰ï¼š
âœ“ æŒæ¡åŸºæœ¬SQLä¼˜åŒ–æŠ€å·§
âœ“ èƒ½å¤Ÿè¯†åˆ«å¸¸è§æ…¢æŸ¥è¯¢é—®é¢˜
âœ“ ç†Ÿæ‚‰åŸºç¡€ç›‘æ§å·¥å…·ä½¿ç”¨
âœ“ èƒ½å¤Ÿæ‰§è¡Œæ ‡å‡†ä¼˜åŒ–æµç¨‹

ä¸­çº§DBAï¼ˆLevel 2ï¼‰ï¼š
âœ“ æŒæ¡å¤æ‚æŸ¥è¯¢ä¼˜åŒ–æ–¹æ³•
âœ“ èƒ½å¤Ÿè¿›è¡Œå‚æ•°è°ƒä¼˜
âœ“ å…·å¤‡åœ¨çº¿DDLæ“ä½œèƒ½åŠ›
âœ“ èƒ½å¤Ÿè®¾è®¡ç›‘æ§å‘Šè­¦æ–¹æ¡ˆ

é«˜çº§DBAï¼ˆLevel 3ï¼‰ï¼š
âœ“ èƒ½å¤Ÿå¤„ç†å¤æ‚æ€§èƒ½é—®é¢˜
âœ“ å…·å¤‡æ¶æ„ä¼˜åŒ–èƒ½åŠ›
âœ“ èƒ½å¤Ÿåˆ¶å®šä¼˜åŒ–æ ‡å‡†å’Œæµç¨‹
âœ“ å…·å¤‡å›¢é˜ŸåŸ¹è®­å’ŒæŒ‡å¯¼èƒ½åŠ›
```

**ğŸ“– å­¦ä¹ èµ„æºè§„åˆ’**
```
ç†è®ºå­¦ä¹ ï¼š
â€¢ MySQLå®˜æ–¹æ–‡æ¡£æ·±åº¦é˜…è¯»
â€¢ ã€Šé«˜æ€§èƒ½MySQLã€‹ç»å…¸æ•™æ
â€¢ ã€ŠMySQLæŠ€æœ¯å†…å¹•ã€‹ç³»åˆ—ä¹¦ç±
â€¢ æŠ€æœ¯åšå®¢å’Œç¤¾åŒºæ–‡ç« 

å®è·µè®­ç»ƒï¼š
â€¢ æ­å»ºæµ‹è¯•ç¯å¢ƒè¿›è¡Œå®éªŒ
â€¢ å‚ä¸å¼€æºé¡¹ç›®è´¡çŒ®ä»£ç 
â€¢ å®šæœŸè¿›è¡ŒæŠ€æœ¯åˆ†äº«
â€¢ å‚åŠ æŠ€æœ¯ä¼šè®®å’ŒåŸ¹è®­

ç»éªŒç§¯ç´¯ï¼š
â€¢ å»ºç«‹ä¸ªäººçŸ¥è¯†åº“
â€¢ å‚ä¸å¤æ‚é—®é¢˜å¤„ç†
â€¢ æŒ‡å¯¼æ–°äººå­¦ä¹ æˆé•¿
â€¢ æ€»ç»“æœ€ä½³å®è·µç»éªŒ
```

**ğŸ¯ è€ƒæ ¸è¯„ä¼°ä½“ç³»**
```sql
-- æŠ€èƒ½è€ƒæ ¸è®°å½•è¡¨
CREATE TABLE skill_assessment (
    employee_id INT,
    skill_category VARCHAR(64),
    skill_level ENUM('åˆçº§', 'ä¸­çº§', 'é«˜çº§'),
    assessment_score INT,
    assessment_date DATE,
    assessor VARCHAR(64),
    improvement_plan TEXT,
    next_assessment DATE
);

-- æŠ€èƒ½æå‡è·Ÿè¸ª
INSERT INTO skill_assessment VALUES 
(1001, 'SQLä¼˜åŒ–', 'ä¸­çº§', 85, '2025-09-01', 'æŠ€æœ¯ç»ç†', 'åŠ å¼ºå¤æ‚æŸ¥è¯¢ä¼˜åŒ–ç»ƒä¹ ', '2025-12-01'),
(1001, 'æ€§èƒ½è°ƒä¼˜', 'åˆçº§', 70, '2025-09-01', 'æŠ€æœ¯ç»ç†', 'å­¦ä¹ å‚æ•°è°ƒä¼˜ç†è®º', '2025-11-01');
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæŠ€èƒ½



**ğŸ¯ æŠ€æœ¯èƒ½åŠ›è¦æ±‚**
```
ğŸ”¸ é—®é¢˜è¯Šæ–­èƒ½åŠ›ï¼šå¿«é€Ÿå®šä½æ…¢æŸ¥è¯¢æ ¹æœ¬åŸå› 
ğŸ”¸ ä¼˜åŒ–å®æ–½èƒ½åŠ›ï¼šå®‰å…¨æœ‰æ•ˆåœ°æ‰§è¡Œä¼˜åŒ–æ“ä½œ  
ğŸ”¸ é£é™©æ§åˆ¶èƒ½åŠ›ï¼šè¯„ä¼°å’Œæ§åˆ¶ä¼˜åŒ–è¿‡ç¨‹é£é™©
ğŸ”¸ æ•ˆæœéªŒè¯èƒ½åŠ›ï¼šç§‘å­¦éªŒè¯ä¼˜åŒ–æ•ˆæœ
ğŸ”¸ ç›‘æ§é¢„è­¦èƒ½åŠ›ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»
```

### 9.2 å…³é”®æ“ä½œæµç¨‹



**ğŸ“‹ æ ‡å‡†æ“ä½œæµç¨‹**
```
åº”æ€¥å“åº”æµç¨‹ï¼š
é—®é¢˜å‘ç° â†’ å½±å“è¯„ä¼° â†’ å¿«é€Ÿè¯Šæ–­ â†’ ä¸´æ—¶ç¼“è§£ â†’ æ ¹æœ¬è§£å†³

ä¼˜åŒ–å®æ–½æµç¨‹ï¼š  
æ–¹æ¡ˆè®¾è®¡ â†’ é£é™©è¯„ä¼° â†’ å¤‡ä»½å‡†å¤‡ â†’ åˆ†æ­¥å®æ–½ â†’ æ•ˆæœéªŒè¯

å›æ»šå¤„ç†æµç¨‹ï¼š
å¼‚å¸¸æ£€æµ‹ â†’ å›æ»šå†³ç­– â†’ å¿«é€Ÿå›æ»š â†’ çŠ¶æ€æ¢å¤ â†’ é—®é¢˜åˆ†æ

æŒç»­æ”¹è¿›æµç¨‹ï¼š
é—®é¢˜æ€»ç»“ â†’ ç»éªŒæ²‰æ·€ â†’ æµç¨‹ä¼˜åŒ– â†’ èƒ½åŠ›æå‡ â†’ é¢„é˜²æ”¹è¿›
```

### 9.3 å®æˆ˜ç»éªŒæ€»ç»“



**ğŸ’¡ å…³é”®æˆåŠŸè¦ç´ **
```
å……åˆ†å‡†å¤‡ï¼š
âœ“ è¯¦ç»†çš„ä¼˜åŒ–è®¡åˆ’
âœ“ å®Œæ•´çš„å¤‡ä»½æ–¹æ¡ˆ  
âœ“ æ˜ç¡®çš„å›æ»šç­–ç•¥
âœ“ å……è¶³çš„æ—¶é—´çª—å£

è°¨æ…æ“ä½œï¼š
âœ“ åˆ†æ­¥éª¤å®æ–½
âœ“ å®æ—¶ç›‘æ§
âœ“ åŠæ—¶è°ƒæ•´
âœ“ è®°å½•è¿‡ç¨‹

æ•ˆæœéªŒè¯ï¼š
âœ“ å¤šç»´åº¦éªŒè¯
âœ“ ä¸šåŠ¡åŠŸèƒ½æ£€æŸ¥
âœ“ æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”
âœ“ ç”¨æˆ·ä½“éªŒç¡®è®¤
```

**âš ï¸ å¸¸è§è¯¯åŒºé¿å…**
```
âŒ é”™è¯¯åšæ³•ï¼š
â€¢ åœ¨é«˜å³°æœŸè¿›è¡Œä¼˜åŒ–æ“ä½œ
â€¢ æ²¡æœ‰å¤‡ä»½å°±ç›´æ¥ä¿®æ”¹
â€¢ ä¸€æ¬¡æ€§è¿›è¡Œå¤§è§„æ¨¡æ›´æ”¹
â€¢ ä¼˜åŒ–åä¸éªŒè¯æ•ˆæœ

âœ… æ­£ç¡®åšæ³•ï¼š  
â€¢ é€‰æ‹©ä¸šåŠ¡ä½å³°æœŸæ“ä½œ
â€¢ åˆ¶å®šè¯¦ç»†çš„å¤‡ä»½å’Œå›æ»šè®¡åˆ’
â€¢ åˆ†é˜¶æ®µå°æ­¥éª¤å®æ–½
â€¢ å…¨é¢éªŒè¯ä¼˜åŒ–æ•ˆæœ
```

### 9.4 æŒç»­æå‡å»ºè®®



**ğŸš€ èƒ½åŠ›æå‡è·¯å¾„**
```
æŠ€æœ¯æ·±åº¦æå‡ï¼š
â€¢ æ·±å…¥å­¦ä¹ MySQLå†…æ ¸åŸç†
â€¢ æŒæ¡æ›´å¤šæ€§èƒ½è°ƒä¼˜æŠ€å·§
â€¢ å­¦ä¹ æ–°ç‰ˆæœ¬ç‰¹æ€§å’ŒåŠŸèƒ½
â€¢ å…³æ³¨è¡Œä¸šæœ€ä½³å®è·µ

ç»éªŒç§¯ç´¯æ–¹å¼ï¼š
â€¢ å‚ä¸å¤æ‚é—®é¢˜å¤„ç†
â€¢ å»ºç«‹ä¸ªäººçŸ¥è¯†åº“
â€¢ å®šæœŸæŠ€æœ¯åˆ†äº«
â€¢ ä¸åŒè¡Œäº¤æµå­¦ä¹ 

å·¥å…·å’Œæ–¹æ³•ï¼š
â€¢ æŒæ¡ä¸“ä¸šç›‘æ§å·¥å…·
â€¢ å¼€å‘è‡ªåŠ¨åŒ–è„šæœ¬
â€¢ å»ºç«‹æ ‡å‡†åŒ–æµç¨‹
â€¢ å®Œå–„æ–‡æ¡£ä½“ç³»
```

**ğŸ“š æŒç»­å­¦ä¹ èµ„æº**
- **å®˜æ–¹æ–‡æ¡£**ï¼šMySQLå®˜æ–¹æ–‡æ¡£æ˜¯æœ€æƒå¨çš„å­¦ä¹ èµ„æº
- **ç»å…¸ä¹¦ç±**ï¼šã€Šé«˜æ€§èƒ½MySQLã€‹ç­‰ç»å…¸æ•™æ
- **æŠ€æœ¯ç¤¾åŒº**ï¼šæ´»è·ƒå‚ä¸æŠ€æœ¯ç¤¾åŒºè®¨è®º
- **å®æˆ˜é¡¹ç›®**ï¼šé€šè¿‡å®é™…é¡¹ç›®ç§¯ç´¯ç»éªŒ

**ğŸ¯ ä¸€åˆ†é’ŸæŒæ¡**
æœ€æ ¸å¿ƒçš„3ä¸ªè¦ç‚¹ï¼š
1. **å®‰å…¨ç¬¬ä¸€**ï¼šä»»ä½•ä¼˜åŒ–æ“ä½œéƒ½è¦æœ‰å¤‡ä»½å’Œå›æ»šæ–¹æ¡ˆ
2. **å¾ªåºæ¸è¿›**ï¼šåˆ†æ­¥éª¤å®æ–½ï¼Œå®æ—¶ç›‘æ§ï¼ŒåŠæ—¶è°ƒæ•´
3. **æ•ˆæœéªŒè¯**ï¼šä¼˜åŒ–åå¿…é¡»å…¨é¢éªŒè¯æ•ˆæœï¼Œç¡®ä¿è¾¾åˆ°é¢„æœŸç›®æ ‡

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> ç”Ÿäº§ä¼˜åŒ–éœ€è°¨æ…ï¼Œå¤‡ä»½å›æ»šè¦å…ˆè¡Œ  
> åˆ†æ­¥å®æ–½å‹¤ç›‘æ§ï¼Œæ•ˆæœéªŒè¯ä¿æˆåŠŸ  
> ç»éªŒæ²‰æ·€æˆæ–‡æ¡£ï¼ŒæŒç»­æ”¹è¿›ä¿ƒæå‡