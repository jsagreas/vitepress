---
title: 3、gh-ost安装部署实战
---
## 📚 目录

1. [gh-ost安装方式概览](#1-gh-ost安装方式概览)
2. [二进制包安装方式](#2-二进制包安装方式)
3. [源码编译安装](#3-源码编译安装)
4. [Docker容器部署](#4-Docker容器部署)
5. [系统环境配置](#5-系统环境配置)
6. [安装验证与测试](#6-安装验证与测试)
7. [版本管理与维护](#7-版本管理与维护)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🚀 gh-ost安装方式概览


### 1.1 什么是gh-ost

**gh-ost** 是GitHub开源的MySQL在线DDL工具，全称是 **"GitHub's Online Schema Transmogrifier"**（GitHub的在线表结构变形器）。

**核心作用**：
```
传统DDL问题：
ALTER TABLE users ADD COLUMN age INT;
↓ 
🔒 表被锁住，业务中断

gh-ost解决方案：
✅ 创建影子表进行结构变更
✅ 实时同步数据变化  
✅ 原子切换，零停机时间
✅ 可随时回滚，风险可控
```

### 1.2 安装方式选择

| 安装方式 | 🎯 适用场景 | ⏱️ 安装时间 | 🔧 难度 | 📦 依赖 |
|---------|-----------|-----------|--------|-------|
| **二进制包** | `生产环境推荐` | `5分钟` | `⭐` | `最少` |
| **源码编译** | `定制需求` | `15-30分钟` | `⭐⭐⭐` | `Go环境` |
| **Docker部署** | `测试、开发` | `3分钟` | `⭐⭐` | `Docker` |

**💡 选择建议**：
```
生产环境：二进制包安装 → 稳定可靠，便于管理
开发测试：Docker部署 → 快速部署，环境隔离  
特殊需求：源码编译 → 自定义功能，深度定制
```

### 1.3 系统要求

**基础环境要求**：
```
操作系统：Linux (CentOS/Ubuntu/RHEL)
架构支持：x86_64, ARM64
内存要求：≥ 2GB (推荐4GB+)
磁盘空间：≥ 100MB
网络要求：能访问MySQL实例
```

---

## 2. 📦 二进制包安装方式


### 2.1 下载gh-ost二进制包


**🔍 获取最新版本**：
```bash
# 方法1：访问GitHub获取最新版本
curl -s https://api.github.com/repos/github/gh-ost/releases/latest | grep "browser_download_url.*linux-amd64" | cut -d '"' -f 4

# 方法2：直接下载指定版本 (以v1.1.5为例)
wget https://github.com/github/gh-ost/releases/download/v1.1.5/gh-ost-binary-linux-20230228140219.tar.gz
```

**📊 版本选择指南**：
```
稳定版本建议：
v1.1.5 → 2023年发布，功能稳定
v1.1.4 → 长期验证版本
v1.1.0 → 里程碑版本

选择原则：
🟢 生产环境：选择已验证的稳定版本
🟡 测试环境：可尝试最新版本
🔴 避免：Beta版本和RC版本
```

### 2.2 安装配置步骤


**步骤 1️⃣：解压安装包**
```bash
# 创建安装目录
sudo mkdir -p /opt/gh-ost
cd /opt/gh-ost

# 解压下载的包
tar -xzf gh-ost-binary-linux-20230228140219.tar.gz

# 查看解压内容
ls -la
# -rwxr-xr-x 1 root root 8.2M gh-ost
```

**步骤 2️⃣：设置执行权限**
```bash
# 确保二进制文件有执行权限
chmod +x gh-ost

# 验证文件
file gh-ost
# gh-ost: ELF 64-bit LSB executable, x86-64
```

**步骤 3️⃣：创建系统链接**
```bash
# 创建软链接到系统路径
sudo ln -s /opt/gh-ost/gh-ost /usr/local/bin/gh-ost

# 或者复制到系统路径
sudo cp gh-ost /usr/local/bin/

# 验证全局访问
which gh-ost
# /usr/local/bin/gh-ost
```

### 2.3 环境变量配置


**配置系统环境**：
```bash
# 编辑环境变量文件
sudo vim /etc/profile.d/gh-ost.sh

# 添加以下内容
export GHOST_HOME="/opt/gh-ost"
export PATH="$GHOST_HOME:$PATH"

# 使配置生效
source /etc/profile.d/gh-ost.sh
```

**用户级配置**：
```bash
# 编辑用户配置文件
vim ~/.bashrc

# 添加以下行
alias ghost='/opt/gh-ost/gh-ost'
export PATH="/opt/gh-ost:$PATH"

# 重新加载配置
source ~/.bashrc
```

---

## 3. 🛠️ 源码编译安装


### 3.1 Go环境准备


**安装Go语言环境**：
```bash
# CentOS/RHEL系统
sudo yum install golang -y

# Ubuntu/Debian系统  
sudo apt-get install golang-go -y

# 验证Go版本 (需要Go 1.16+)
go version
# go version go1.19.2 linux/amd64
```

**🔧 Go环境配置**：
```bash
# 设置Go工作目录
mkdir -p $HOME/go/{bin,src,pkg}

# 配置环境变量
export GOROOT=/usr/lib/golang
export GOPATH=$HOME/go
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin

# 配置Go模块代理 (国内用户推荐)
export GOPROXY=https://goproxy.cn,direct
```

### 3.2 获取源码编译


**步骤 1️⃣：克隆源码**
```bash
# 克隆gh-ost仓库
git clone https://github.com/github/gh-ost.git
cd gh-ost

# 查看可用版本标签
git tag | tail -5
# v1.1.3
# v1.1.4  
# v1.1.5

# 切换到稳定版本
git checkout v1.1.5
```

**步骤 2️⃣：编译构建**
```bash
# 下载依赖
go mod download

# 编译二进制文件
go build -o gh-ost go/cmd/gh-ost/main.go

# 或使用Makefile构建
make build

# 验证编译结果
./gh-ost --version
```

**步骤 3️⃣：安装部署**
```bash
# 复制到系统路径
sudo cp gh-ost /usr/local/bin/

# 或安装到Go bin目录
go install ./go/cmd/gh-ost

# 验证安装
gh-ost --help
```

### 3.3 编译优化配置


**性能优化编译**：
```bash
# 带优化参数的编译
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build \
  -ldflags="-w -s" \
  -a -installsuffix cgo \
  -o gh-ost go/cmd/gh-ost/main.go

# 参数说明：
# -ldflags="-w -s"  → 去除调试信息，减小文件大小
# CGO_ENABLED=0     → 禁用CGO，生成静态链接
# -a                → 强制重新构建所有包
```

---

## 4. 🐳 Docker容器部署


### 4.1 Docker环境准备


**安装Docker**：
```bash
# CentOS/RHEL 系统
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce docker-ce-cli containerd.io

# Ubuntu系统
sudo apt-get update
sudo apt-get install docker.io

# 启动Docker服务
sudo systemctl start docker
sudo systemctl enable docker
```

### 4.2 使用官方镜像


**拉取gh-ost镜像**：
```bash
# 拉取最新版本
docker pull github/gh-ost:latest

# 拉取指定版本
docker pull github/gh-ost:v1.1.5

# 查看镜像信息
docker images | grep gh-ost
```

**基础运行示例**：
```bash
# 运行gh-ost容器
docker run --rm \
  --name gh-ost-tool \
  github/gh-ost:latest \
  --version

# 交互式运行
docker run -it --rm \
  --name gh-ost-cli \
  github/gh-ost:latest \
  /bin/bash
```

### 4.3 生产环境Docker部署


**创建Docker Compose文件**：
```yaml
# docker-compose.yml
version: '3.8'

services:
  gh-ost:
    image: github/gh-ost:v1.1.5
    container_name: gh-ost-production  
    restart: unless-stopped
    volumes:
      - ./config:/etc/gh-ost:ro
      - ./logs:/var/log/gh-ost
      - /etc/localtime:/etc/localtime:ro
    networks:
      - mysql-network
    environment:
      - TZ=Asia/Shanghai
    command: ["tail", "-f", "/dev/null"]  # 保持容器运行

networks:
  mysql-network:
    external: true
```

**启动服务**：
```bash
# 启动容器
docker-compose up -d

# 查看运行状态
docker-compose ps

# 进入容器执行操作
docker-compose exec gh-ost bash
```

### 4.4 自定义Docker镜像


**Dockerfile示例**：
```dockerfile
FROM golang:1.19-alpine AS builder

WORKDIR /app
COPY . .
RUN go mod download
RUN CGO_ENABLED=0 GOOS=linux go build -o gh-ost go/cmd/gh-ost/main.go

FROM alpine:latest
RUN apk --no-cache add ca-certificates tzdata
WORKDIR /root/

COPY --from=builder /app/gh-ost .
COPY --from=builder /app/resources/ghost-template.sh .

EXPOSE 8080
CMD ["./gh-ost"]
```

**构建自定义镜像**：
```bash
# 构建镜像
docker build -t my-gh-ost:v1.0 .

# 运行自定义镜像
docker run --rm my-gh-ost:v1.0 --version
```

---

## 5. ⚙️ 系统环境配置


### 5.1 系统依赖检查


**必要系统工具检查**：
```bash
# 检查必需的系统命令
command -v mysql >/dev/null 2>&1 || echo "❌ MySQL客户端未安装"
command -v netstat >/dev/null 2>&1 || echo "❌ net-tools未安装"  
command -v ss >/dev/null 2>&1 || echo "✅ iproute2可用"

# 安装缺失工具
# CentOS/RHEL
sudo yum install mysql net-tools -y

# Ubuntu/Debian  
sudo apt-get install mysql-client net-tools -y
```

**系统资源检查**：
```bash
# 检查内存
free -h
#               total        used        free
# Mem:           7.7Gi       2.1Gi       3.8Gi

# 检查磁盘空间
df -h /opt
# /dev/sda1      50G   15G   33G  32% /

# 检查CPU核心数
nproc
# 4
```

### 5.2 MySQL权限配置


**创建gh-ost专用用户**：
```sql
-- 连接到MySQL
mysql -u root -p

-- 创建专用用户
CREATE USER 'ghost'@'%' IDENTIFIED BY 'ghost_password_2024';

-- 授予必要权限
GRANT SELECT, INSERT, UPDATE, DELETE ON *.* TO 'ghost'@'%';
GRANT CREATE, DROP, ALTER ON *.* TO 'ghost'@'%';
GRANT REPLICATION CLIENT, REPLICATION SLAVE ON *.* TO 'ghost'@'%';

-- 刷新权限
FLUSH PRIVILEGES;

-- 验证用户权限
SHOW GRANTS FOR 'ghost'@'%';
```

**权限要求说明**：
```
核心权限解释：

SELECT, INSERT, UPDATE, DELETE
→ 数据读取和同步操作

CREATE, DROP, ALTER  
→ 创建影子表和触发器

REPLICATION CLIENT, REPLICATION SLAVE
→ 读取binlog进行数据同步

SUPER (可选)
→ 某些MySQL版本需要，用于设置会话参数
```

### 5.3 MySQL配置优化


**binlog配置检查**：
```sql
-- 检查binlog是否开启
SHOW VARIABLES LIKE 'log_bin';
-- +---------------+-------+
-- | Variable_name | Value |
-- +---------------+-------+
-- | log_bin       | ON    |
-- +---------------+-------+

-- 检查binlog格式
SHOW VARIABLES LIKE 'binlog_format';
-- +---------------+-------+
-- | Variable_name | Value |
-- +---------------+-------+
-- | binlog_format | ROW   |  ← 必须是ROW格式
-- +---------------+-------+
```

**必要的MySQL配置**：
```ini
# /etc/mysql/my.cnf 或 /etc/my.cnf
[mysqld]
# binlog配置
log-bin = mysql-bin
binlog-format = ROW
server-id = 1

# gh-ost相关优化
innodb_lock_wait_timeout = 120
lock_wait_timeout = 120
slave_net_timeout = 60

# 性能调优
innodb_buffer_pool_size = 2G
max_connections = 1000
```

### 5.4 网络连接测试


**数据库连通性测试**：
```bash
# 测试MySQL连接
mysql -h 127.0.0.1 -P 3306 -u ghost -p -e "SELECT VERSION();"

# 测试从库连接 (如果使用主从架构)
mysql -h slave-host -P 3306 -u ghost -p -e "SHOW SLAVE STATUS\G"

# 网络延迟测试
ping -c 4 mysql-host

# 端口连通性测试
telnet mysql-host 3306
```

---

## 6. ✅ 安装验证与测试


### 6.1 基础功能验证


**版本信息检查**：
```bash
# 查看gh-ost版本
gh-ost --version
# 1.1.5

# 查看帮助信息
gh-ost --help | head -10

# 查看所有可用参数
gh-ost --help | grep -E "^\s+--" | wc -l
# 50+个参数可用
```

**基础连接测试**：
```bash
# 测试数据库连接
gh-ost \
  --host="127.0.0.1" \
  --port=3306 \
  --user="ghost" \
  --password="ghost_password_2024" \
  --database="test_db" \
  --table="test_table" \
  --alter="ADD COLUMN age INT" \
  --dry-run \
  --verbose

# 参数说明：
# --dry-run  → 只检查不执行
# --verbose  → 显示详细信息
```

### 6.2 创建测试环境


**准备测试数据**：
```sql
-- 创建测试数据库
CREATE DATABASE gh_ost_test;
USE gh_ost_test;

-- 创建测试表
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 插入测试数据
INSERT INTO users (name, email) VALUES
('Alice', 'alice@example.com'),
('Bob', 'bob@example.com'),
('Charlie', 'charlie@example.com');

-- 查看表结构
DESCRIBE users;
```

### 6.3 执行安装验证测试


**小规模DDL测试**：
```bash
# 执行一个简单的列添加操作
gh-ost \
  --host="127.0.0.1" \
  --port=3306 \
  --user="ghost" \
  --password="ghost_password_2024" \
  --database="gh_ost_test" \
  --table="users" \
  --alter="ADD COLUMN age INT DEFAULT 0" \
  --execute \
  --allow-on-master \
  --concurrent-rowcount \
  --default-retries=120 \
  --verbose

# 关键参数解释：
# --execute           → 真正执行迁移
# --allow-on-master   → 允许在主库执行
# --concurrent-rowcount → 并发统计行数
# --default-retries   → 重试次数
```

**验证结果**：
```sql
-- 检查表结构变更
USE gh_ost_test;
DESCRIBE users;
-- +------------+--------------+------+-----+-------------------+----------------+
-- | Field      | Type         | Null | Key | Default           | Extra          |
-- +------------+--------------+------+-----+-------------------+----------------+
-- | id         | int(11)      | NO   | PRI | NULL              | auto_increment |
-- | name       | varchar(50)  | NO   |     | NULL              |                |
-- | email      | varchar(100) | YES  |     | NULL              |                |
-- | created_at | timestamp    | NO   |     | CURRENT_TIMESTAMP |                |
-- | age        | int(11)      | YES  |     | 0                 |  ← 新添加的列
-- +------------+--------------+------+-----+-------------------+----------------+

-- 检查数据完整性
SELECT COUNT(*) FROM users;
-- +----------+
-- | COUNT(*) |
-- +----------+
-- |        3 |  ← 数据完整
-- +----------+
```

### 6.4 性能基准测试


**创建性能测试数据**：
```sql
-- 创建大一点的测试表
CREATE TABLE performance_test (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    uuid VARCHAR(36) NOT NULL,
    data TEXT,
    status TINYINT DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_uuid (uuid),
    INDEX idx_status (status)
);

-- 插入测试数据 (可以写脚本批量插入)
-- 这里插入10万条记录用于测试
```

**性能测试命令**：
```bash
# 监控系统资源使用
htop &

# 执行性能测试
time gh-ost \
  --host="127.0.0.1" \
  --port=3306 \
  --user="ghost" \
  --password="ghost_password_2024" \
  --database="gh_ost_test" \
  --table="performance_test" \
  --alter="ADD COLUMN updated_at TIMESTAMP NULL" \
  --execute \
  --allow-on-master \
  --max-load="Threads_running=25" \
  --critical-load="Threads_running=50" \
  --chunk-size=1000 \
  --max-lag-millis=1500 \
  --verbose

# 性能参数说明：
# --max-load         → 系统负载阈值
# --critical-load    → 紧急停止阈值  
# --chunk-size       → 每次处理的行数
# --max-lag-millis   → 最大复制延迟
```

---

## 7. 🔄 版本管理与维护


### 7.1 多版本管理


**版本管理目录结构**：
```
/opt/gh-ost/
├── v1.1.3/
│   └── gh-ost
├── v1.1.4/  
│   └── gh-ost
├── v1.1.5/
│   └── gh-ost
├── current -> v1.1.5/  ← 当前使用版本的软链接
└── bin/
    └── gh-ost -> ../current/gh-ost
```

**版本切换脚本**：
```bash
#!/bin/bash
# switch-gh-ost-version.sh

VERSION=$1
INSTALL_DIR="/opt/gh-ost"

if [ -z "$VERSION" ]; then
    echo "用法: $0 <版本号>"
    echo "可用版本:"
    ls -1 $INSTALL_DIR | grep "^v"
    exit 1
fi

if [ ! -d "$INSTALL_DIR/$VERSION" ]; then
    echo "❌ 版本 $VERSION 未安装"
    exit 1
fi

# 更新软链接
rm -f $INSTALL_DIR/current
ln -s $VERSION $INSTALL_DIR/current

# 验证切换
echo "✅ 已切换到版本: $($INSTALL_DIR/bin/gh-ost --version)"
```

### 7.2 升级更新操作


**自动升级脚本**：
```bash
#!/bin/bash
# upgrade-gh-ost.sh

CURRENT_VERSION=$(gh-ost --version 2>/dev/null || echo "未安装")
echo "当前版本: $CURRENT_VERSION"

# 获取最新版本信息
LATEST_VERSION=$(curl -s https://api.github.com/repos/github/gh-ost/releases/latest | grep '"tag_name"' | sed -E 's/.*"([^"]+)".*/\1/')
echo "最新版本: $LATEST_VERSION"

if [ "$CURRENT_VERSION" = "$LATEST_VERSION" ]; then
    echo "✅ 已经是最新版本"
    exit 0
fi

# 下载最新版本
echo "📥 下载最新版本..."
DOWNLOAD_URL="https://github.com/github/gh-ost/releases/download/$LATEST_VERSION/gh-ost-binary-linux-$(date +%Y%m%d%H%M%S).tar.gz"

# 备份当前版本
echo "💾 备份当前版本..."
cp /usr/local/bin/gh-ost /usr/local/bin/gh-ost.backup.$(date +%Y%m%d)

# 安装新版本
echo "📦 安装新版本..."
wget -O /tmp/gh-ost-latest.tar.gz $DOWNLOAD_URL
tar -xzf /tmp/gh-ost-latest.tar.gz -C /tmp/
sudo cp /tmp/gh-ost /usr/local/bin/

echo "✅ 升级完成: $(gh-ost --version)"
```

### 7.3 卸载清理步骤


**完整卸载脚本**：
```bash
#!/bin/bash
# uninstall-gh-ost.sh

echo "🗑️ 开始卸载 gh-ost..."

# 停止相关进程
echo "停止gh-ost进程..."
pkill -f gh-ost || true

# 删除二进制文件
echo "删除二进制文件..."
sudo rm -f /usr/local/bin/gh-ost
sudo rm -f /usr/bin/gh-ost

# 删除安装目录
echo "删除安装目录..."
sudo rm -rf /opt/gh-ost

# 删除环境变量配置
echo "清理环境变量..."
sudo rm -f /etc/profile.d/gh-ost.sh

# 清理用户配置
echo "清理用户配置..."
sed -i '/gh-ost\|ghost/d' ~/.bashrc ~/.profile 2>/dev/null || true

# 清理Docker镜像 (如果使用Docker)
echo "清理Docker镜像..."
docker rmi $(docker images | grep gh-ost | awk '{print $3}') 2>/dev/null || true

# 清理MySQL用户 (可选)
read -p "是否删除MySQL中的ghost用户? (y/N): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    mysql -u root -p -e "DROP USER IF EXISTS 'ghost'@'%'; FLUSH PRIVILEGES;"
    echo "✅ 已删除MySQL用户"
fi

echo "✅ gh-ost 卸载完成"
```

### 7.4 日常维护任务


**监控脚本**：
```bash
#!/bin/bash
# monitor-gh-ost.sh

# 检查gh-ost是否可用
if ! command -v gh-ost &> /dev/null; then
    echo "❌ gh-ost 未安装或不在PATH中"
    exit 1
fi

# 检查版本信息
VERSION=$(gh-ost --version)
echo "📋 当前版本: $VERSION"

# 检查MySQL连接
echo "🔗 测试MySQL连接..."
mysql -h 127.0.0.1 -u ghost -p -e "SELECT 1" 2>/dev/null && echo "✅ MySQL连接正常" || echo "❌ MySQL连接失败"

# 检查系统资源
echo "💾 系统资源状况:"
echo "内存使用: $(free -h | awk '/Mem:/ {print $3 "/" $2}')"
echo "磁盘使用: $(df -h / | awk '/\// {print $3 "/" $2 " (" $5 ")"}')"

# 检查是否有运行中的gh-ost进程
RUNNING_PROCESSES=$(ps aux | grep gh-ost | grep -v grep | wc -l)
if [ $RUNNING_PROCESSES -gt 0 ]; then
    echo "⚠️ 发现 $RUNNING_PROCESSES 个运行中的gh-ost进程"
    ps aux | grep gh-ost | grep -v grep
else
    echo "✅ 没有运行中的gh-ost进程"
fi
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的安装要点


```
🔸 安装方式选择：生产环境推荐二进制包，开发测试可用Docker
🔸 系统要求：Linux系统，2GB+内存，需要MySQL客户端
🔸 权限配置：MySQL用户需要SELECT、ALTER、REPLICATION等权限
🔸 环境依赖：binlog必须开启且格式为ROW
🔸 连接测试：安装后必须验证数据库连通性和基础功能
```

### 8.2 关键理解要点


**🔹 为什么选择二进制包安装**：
```
优势对比：
✅ 部署简单：解压即用，无需编译环境
✅ 稳定可靠：官方编译，经过充分测试  
✅ 依赖较少：不需要Go环境和编译工具
✅ 版本管理：便于多版本并存和切换
```

**🔹 权限配置的重要性**：
```
MySQL权限说明：
- REPLICATION权限：读取binlog实现数据同步
- ALTER权限：创建和修改影子表结构
- SELECT/INSERT/UPDATE/DELETE：数据迁移操作
- CREATE/DROP：管理临时表和触发器

⚠️ 权限过高或过低都会影响gh-ost正常工作
```

**🔹 Docker部署的适用场景**：
```
推荐场景：
✅ 开发测试环境：快速部署，环境隔离
✅ CI/CD流水线：标准化部署流程
✅ 多环境管理：不同版本并行测试

不推荐场景：  
❌ 生产环境大表：性能损耗，排查困难
❌ 网络复杂环境：容器网络可能影响连接
```

### 8.3 实际应用指导


**🎯 安装规划建议**：
```
目录规划：
/opt/gh-ost/           ← 主安装目录
├── versions/          ← 多版本存放
├── config/            ← 配置文件  
├── logs/              ← 日志文件
└── scripts/           ← 维护脚本

用户规划：
ghost 用户：专用于gh-ost操作
权限最小化：只给必需的权限
密码管理：使用强密码，定期更换
```

**🔧 维护最佳实践**：
```
日常检查：
- 定期检查gh-ost版本和安全更新
- 监控MySQL连接和权限状态
- 验证binlog配置和格式
- 检查系统资源和磁盘空间

升级策略：
- 先在测试环境验证新版本
- 生产环境选择稳定版本
- 升级前备份当前版本
- 升级后进行完整功能测试
```

**💡 故障排查指南**：
```
常见问题：
1. "Access denied" → 检查MySQL用户权限
2. "Binary log disabled" → 确认binlog配置
3. "Connection refused" → 验证网络连通性
4. "Command not found" → 检查PATH环境变量

排查步骤：
1️⃣ 检查基础环境 (MySQL、网络、权限)
2️⃣ 验证gh-ost版本和配置
3️⃣ 查看详细错误日志
4️⃣ 使用--dry-run模式测试
```

**核心记忆**：
- gh-ost安装简单但环境要求严格
- MySQL权限和binlog配置是成功的关键
- 生产环境优选二进制包，测试环境可用Docker
- 安装后的验证测试不可省略
- 版本管理和日常维护同样重要