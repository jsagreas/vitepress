---
title: 46ã€å¢é‡æ¢å¤ä¸éƒ¨åˆ†æ•°æ®æ¢å¤
---
## ğŸ“š ç›®å½•

1. [å¢é‡æ¢å¤åŸºæœ¬æ¦‚å¿µ](#1-å¢é‡æ¢å¤åŸºæœ¬æ¦‚å¿µ)
2. [å¢é‡æ¢å¤åŸºæœ¬æµç¨‹](#2-å¢é‡æ¢å¤åŸºæœ¬æµç¨‹)
3. [å¤‡ä»½é“¾æ¢å¤é¡ºåº](#3-å¤‡ä»½é“¾æ¢å¤é¡ºåº)
4. [æ¢å¤ç‚¹é€‰æ‹©ç­–ç•¥](#4-æ¢å¤ç‚¹é€‰æ‹©ç­–ç•¥)
5. [éƒ¨åˆ†æ•°æ®æ¢å¤æŠ€æœ¯](#5-éƒ¨åˆ†æ•°æ®æ¢å¤æŠ€æœ¯)
6. [ç²¾ç¡®æ¢å¤æŠ€æœ¯](#6-ç²¾ç¡®æ¢å¤æŠ€æœ¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ å¢é‡æ¢å¤åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¢é‡æ¢å¤


**ğŸ“– å®šä¹‰è¯´æ˜**
å¢é‡æ¢å¤æ˜¯æŒ‡åŸºäºä¸€ä¸ªå®Œæ•´å¤‡ä»½ï¼ˆå…¨é‡å¤‡ä»½ï¼‰ï¼Œç„¶ååº”ç”¨ä¸€ç³»åˆ—å¢é‡å¤‡ä»½æ¥æ¢å¤æ•°æ®åº“åˆ°æŸä¸ªç‰¹å®šæ—¶é—´ç‚¹çš„è¿‡ç¨‹ã€‚

**ğŸ  ç”Ÿæ´»åŒ–ç†è§£**
```
å°±åƒç»™æˆ¿å­è£…ä¿®ä¸€æ ·ï¼š
- å…¨é‡å¤‡ä»½ = æˆ¿å­çš„åŸºç¡€ç»“æ„ï¼ˆåœ°åŸºã€å¢™ä½“ï¼‰
- å¢é‡å¤‡ä»½ = æ¯å¤©çš„è£…ä¿®è¿›åº¦ï¼ˆä»Šå¤©è´´ç“·ç –ã€æ˜å¤©åˆ·å¢™ï¼‰
- å¢é‡æ¢å¤ = æŒ‰ç…§è£…ä¿®æ—¥å¿—ï¼Œä¸€æ­¥æ­¥è¿˜åŸåˆ°æŸå¤©çš„è£…ä¿®çŠ¶æ€
```

**âš¡ æ ¸å¿ƒç‰¹ç‚¹**
- **èŠ‚çœç©ºé—´**ï¼šåªå¤‡ä»½å˜åŒ–çš„æ•°æ®ï¼Œå¤§å¤§å‡å°‘å­˜å‚¨éœ€æ±‚
- **æ¢å¤çµæ´»**ï¼šå¯ä»¥ç²¾ç¡®æ¢å¤åˆ°ä»»æ„æ—¶é—´ç‚¹
- **æ“ä½œå¤æ‚**ï¼šéœ€è¦æŒ‰é¡ºåºåº”ç”¨å¤šä¸ªå¤‡ä»½æ–‡ä»¶
- **ä¾èµ–æ€§å¼º**ï¼šç¼ºå°‘ä»»ä½•ä¸€ä¸ªç¯èŠ‚éƒ½å¯èƒ½å¯¼è‡´æ¢å¤å¤±è´¥

### 1.2 å¢é‡æ¢å¤çš„å·¥ä½œåŸç†


**ğŸ”§ åŸºæœ¬æœºåˆ¶**
```
å…¨é‡å¤‡ä»½ä½œä¸ºåŸºç¡€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®Œæ•´æ•°æ®åº“    â”‚ â† å…¨é‡å¤‡ä»½ï¼ˆåŸºç¡€æ•°æ®ï¼‰
â”‚    (å‘¨æ—¥)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¢é‡å¤‡ä»½è®°å½•å˜åŒ–ï¼š
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚å¢é‡1â”‚ â”‚å¢é‡2â”‚ â”‚å¢é‡3â”‚ â”‚å¢é‡4â”‚ â† æ¯æ—¥å˜åŒ–æ•°æ®
â”‚(å‘¨ä¸€)â”‚ â”‚(å‘¨äºŒ)â”‚ â”‚(å‘¨ä¸‰)â”‚ â”‚(å‘¨å››)â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

æ¢å¤åˆ°å‘¨ä¸‰çŠ¶æ€ = å…¨é‡ + å¢é‡1 + å¢é‡2 + å¢é‡3
```

**ğŸ’¾ æ•°æ®å±‚é¢ç†è§£**
- **å…¨é‡å¤‡ä»½**ï¼šåŒ…å«æ‰€æœ‰è¡¨çš„å®Œæ•´æ•°æ®
- **å¢é‡å¤‡ä»½**ï¼šåªåŒ…å«è‡ªä¸Šæ¬¡å¤‡ä»½ä»¥æ¥å‘ç”Ÿå˜åŒ–çš„æ•°æ®
- **æ¢å¤è¿‡ç¨‹**ï¼šå…ˆæ¢å¤å…¨é‡ï¼Œå†æŒ‰æ—¶é—´é¡ºåºåº”ç”¨å¢é‡

---

## 2. ğŸ“‹ å¢é‡æ¢å¤åŸºæœ¬æµç¨‹


### 2.1 æ¢å¤å‰çš„å‡†å¤‡å·¥ä½œ


> ğŸ’¡ **é‡è¦æé†’**ï¼šå¢é‡æ¢å¤å‰å¿…é¡»ç¡®ä¿å¤‡ä»½é“¾çš„å®Œæ•´æ€§ï¼Œç¼ºå°‘ä»»ä½•ä¸€ä¸ªç¯èŠ‚éƒ½å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼

**ğŸ” å¤‡ä»½å®Œæ•´æ€§æ£€æŸ¥**
```bash
# 1. æ£€æŸ¥å…¨é‡å¤‡ä»½æ–‡ä»¶
ls -la /backup/full/
-rw-r--r-- 1 mysql mysql 1.2G Jan 01 02:00 full_backup_20250101.sql

# 2. æ£€æŸ¥å¢é‡å¤‡ä»½æ–‡ä»¶åºåˆ—
ls -la /backup/incremental/
-rw-r--r-- 1 mysql mysql 50M Jan 02 02:00 inc_backup_20250102.sql
-rw-r--r-- 1 mysql mysql 45M Jan 03 02:00 inc_backup_20250103.sql
-rw-r--r-- 1 mysql mysql 60M Jan 04 02:00 inc_backup_20250104.sql

# 3. éªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
mysqldump --single-transaction --routines --triggers \
  --all-databases > /dev/null < full_backup_20250101.sql
```

**ğŸ“Š æ¢å¤å‰çŠ¶æ€ç¡®è®¤**
```sql
-- è®°å½•å½“å‰æ•°æ®åº“çŠ¶æ€ï¼ˆæ¢å¤å‰ï¼‰
SELECT 
    table_schema,
    COUNT(*) as table_count,
    SUM(data_length + index_length)/1024/1024 as size_mb
FROM information_schema.tables 
WHERE table_schema NOT IN ('information_schema','mysql','performance_schema')
GROUP BY table_schema;
```

### 2.2 åŸºç¡€å¤‡ä»½æ¢å¤


**ğŸ—ï¸ æ¢å¤å…¨é‡å¤‡ä»½ï¼ˆç¬¬ä¸€æ­¥ï¼‰**
```bash
# 1. åœæ­¢MySQLæœåŠ¡ï¼ˆç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼‰
sudo systemctl stop mysql

# 2. æ¸…ç†ç°æœ‰æ•°æ®ï¼ˆå°å¿ƒæ“ä½œï¼ï¼‰
sudo rm -rf /var/lib/mysql/*

# 3. å¯åŠ¨MySQLæœåŠ¡
sudo systemctl start mysql

# 4. æ¢å¤å…¨é‡å¤‡ä»½
mysql -u root -p < /backup/full/full_backup_20250101.sql
```

**âœ… éªŒè¯å…¨é‡æ¢å¤ç»“æœ**
```sql
-- æ£€æŸ¥æ¢å¤åçš„æ•°æ®çŠ¶æ€
SHOW DATABASES;

-- æ£€æŸ¥å…³é”®è¡¨çš„æ•°æ®é‡
SELECT COUNT(*) FROM your_database.important_table;

-- æ£€æŸ¥æ•°æ®çš„æ—¶é—´æˆ³ï¼ˆç¡®è®¤æ¢å¤åˆ°æ­£ç¡®æ—¶é—´ç‚¹ï¼‰
SELECT MAX(created_time) FROM your_database.important_table;
```

### 2.3 å¢é‡æ–‡ä»¶åº”ç”¨


**ğŸ”„ æŒ‰é¡ºåºåº”ç”¨å¢é‡å¤‡ä»½**
```bash
# åº”ç”¨å¢é‡å¤‡ä»½çš„æ­£ç¡®é¡ºåº
echo "å¼€å§‹åº”ç”¨å¢é‡å¤‡ä»½..."

# å¢é‡1ï¼ˆ1æœˆ2æ—¥çš„å˜åŒ–ï¼‰
mysql -u root -p < /backup/incremental/inc_backup_20250102.sql
echo "å¢é‡1åº”ç”¨å®Œæˆ"

# å¢é‡2ï¼ˆ1æœˆ3æ—¥çš„å˜åŒ–ï¼‰
mysql -u root -p < /backup/incremental/inc_backup_20250103.sql
echo "å¢é‡2åº”ç”¨å®Œæˆ"

# å¢é‡3ï¼ˆ1æœˆ4æ—¥çš„å˜åŒ–ï¼‰
mysql -u root -p < /backup/incremental/inc_backup_20250104.sql
echo "å¢é‡3åº”ç”¨å®Œæˆ"
```

**âš ï¸ å¸¸è§é”™è¯¯åŠå¤„ç†**
```bash
# é”™è¯¯1ï¼šé¡ºåºé”™è¯¯
# âŒ é”™è¯¯åšæ³•ï¼šå…ˆåº”ç”¨1æœˆ4æ—¥ï¼Œå†åº”ç”¨1æœˆ2æ—¥
# âœ… æ­£ç¡®åšæ³•ï¼šä¸¥æ ¼æŒ‰æ—¶é—´é¡ºåºåº”ç”¨

# é”™è¯¯2ï¼šé—æ¼ä¸­é—´å¤‡ä»½
# âŒ é”™è¯¯åšæ³•ï¼šå…¨é‡ + å¢é‡1 + å¢é‡3ï¼ˆè·³è¿‡å¢é‡2ï¼‰
# âœ… æ­£ç¡®åšæ³•ï¼šå¿…é¡»åŒ…å«å®Œæ•´çš„å¤‡ä»½é“¾

# é”™è¯¯3ï¼šé‡å¤åº”ç”¨
# âŒ é”™è¯¯åšæ³•ï¼šåº”ç”¨åŒä¸€ä¸ªå¢é‡å¤‡ä»½ä¸¤æ¬¡
# âœ… æ­£ç¡®åšæ³•ï¼šæ¯ä¸ªå¢é‡å¤‡ä»½åªåº”ç”¨ä¸€æ¬¡
```

---

## 3. ğŸ”— å¤‡ä»½é“¾æ¢å¤é¡ºåº


### 3.1 ç†è§£å¤‡ä»½é“¾çš„ä¾èµ–å…³ç³»


**ğŸ“Š å¤‡ä»½é“¾ç¤ºæ„å›¾**
```
æ—¶é—´è½´æ¢å¤é¡ºåºï¼š
å‘¨æ—¥        å‘¨ä¸€        å‘¨äºŒ        å‘¨ä¸‰        å‘¨å››
â”‚           â”‚           â”‚           â”‚           â”‚
â–¼           â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
â”‚å…¨é‡ â”‚â”€â”€â”€â–¶â”‚å¢é‡1â”‚â”€â”€â”€â–¶â”‚å¢é‡2â”‚â”€â”€â”€â–¶â”‚å¢é‡3â”‚â”€â”€â”€â–¶â”‚å¢é‡4â”‚
â”‚å¤‡ä»½ â”‚    â”‚å¤‡ä»½ â”‚    â”‚å¤‡ä»½ â”‚    â”‚å¤‡ä»½ â”‚    â”‚å¤‡ä»½ â”‚
â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜
  100%      +5%        +3%        +7%        +4%

æ¢å¤åˆ°å‘¨ä¸‰çŠ¶æ€ï¼šå…¨é‡ + å¢é‡1 + å¢é‡2 + å¢é‡3
```

**ğŸ”„ ä¾èµ–å…³ç³»è¯¦è§£**
- **å¢é‡1** ä¾èµ–äº **å…¨é‡å¤‡ä»½**
- **å¢é‡2** ä¾èµ–äº **å…¨é‡å¤‡ä»½ + å¢é‡1**
- **å¢é‡3** ä¾èµ–äº **å…¨é‡å¤‡ä»½ + å¢é‡1 + å¢é‡2**
- ä»»ä½•ä¸€ä¸ªç¯èŠ‚ç¼ºå¤±ï¼Œåç»­æ¢å¤éƒ½ä¼šå¤±è´¥

### 3.2 ä¸åŒæ¢å¤åœºæ™¯çš„é¡ºåºç­–ç•¥


**ğŸ¯ åœºæ™¯1ï¼šæ¢å¤åˆ°æœ€æ–°çŠ¶æ€**
```bash
# ç›®æ ‡ï¼šæ¢å¤åˆ°æœ€æ–°çš„æ•°æ®çŠ¶æ€
# éœ€è¦ï¼šå…¨é‡ + æ‰€æœ‰å¢é‡å¤‡ä»½

restore_order=(
    "full_backup_20250101.sql"      # åŸºç¡€æ•°æ®
    "inc_backup_20250102.sql"       # ç¬¬1å¤©å˜åŒ–
    "inc_backup_20250103.sql"       # ç¬¬2å¤©å˜åŒ–
    "inc_backup_20250104.sql"       # ç¬¬3å¤©å˜åŒ–
    "inc_backup_20250105.sql"       # ç¬¬4å¤©å˜åŒ–
)

for backup_file in "${restore_order[@]}"; do
    echo "æ­£åœ¨åº”ç”¨: $backup_file"
    mysql -u root -p < /backup/$backup_file
    echo "å®Œæˆ: $backup_file"
done
```

**ğŸ¯ åœºæ™¯2ï¼šæ¢å¤åˆ°ç‰¹å®šæ—¶é—´ç‚¹**
```bash
# ç›®æ ‡ï¼šæ¢å¤åˆ°1æœˆ3æ—¥çš„çŠ¶æ€
# éœ€è¦ï¼šå…¨é‡ + å¢é‡1 + å¢é‡2ï¼ˆåœæ­¢åœ¨è¿™é‡Œï¼‰

restore_order=(
    "full_backup_20250101.sql"      # åŸºç¡€æ•°æ®
    "inc_backup_20250102.sql"       # ç¬¬1å¤©å˜åŒ–
    "inc_backup_20250103.sql"       # ç¬¬2å¤©å˜åŒ–
    # ä¸åº”ç”¨åç»­çš„å¢é‡å¤‡ä»½
)

echo "æ¢å¤åˆ°2025-01-03çŠ¶æ€"
for backup_file in "${restore_order[@]}"; do
    mysql -u root -p < /backup/$backup_file
done
```

### 3.3 å¤‡ä»½é“¾å®Œæ•´æ€§éªŒè¯


**ğŸ” è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬**
```bash
#!/bin/bash
# å¤‡ä»½é“¾å®Œæ•´æ€§æ£€æŸ¥è„šæœ¬

verify_backup_chain() {
    local backup_dir="/backup"
    local full_backup=""
    local inc_backups=()
    
    # æŸ¥æ‰¾å…¨é‡å¤‡ä»½
    full_backup=$(ls $backup_dir/full_backup_*.sql 2>/dev/null | head -1)
    if [[ -z "$full_backup" ]]; then
        echo "âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ°å…¨é‡å¤‡ä»½æ–‡ä»¶"
        return 1
    fi
    
    # æŸ¥æ‰¾å¢é‡å¤‡ä»½ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰
    mapfile -t inc_backups < <(ls $backup_dir/inc_backup_*.sql 2>/dev/null | sort)
    
    echo "ğŸ“‹ å¤‡ä»½é“¾æ£€æŸ¥ç»“æœï¼š"
    echo "âœ… å…¨é‡å¤‡ä»½: $(basename $full_backup)"
    
    if [[ ${#inc_backups[@]} -eq 0 ]]; then
        echo "âš ï¸  è­¦å‘Šï¼šæœªæ‰¾åˆ°å¢é‡å¤‡ä»½æ–‡ä»¶"
        return 0
    fi
    
    echo "ğŸ“ å¢é‡å¤‡ä»½åºåˆ—:"
    for ((i=0; i<${#inc_backups[@]}; i++)); do
        echo "  $((i+1)). $(basename ${inc_backups[i]})"
    done
    
    echo "âœ… å¤‡ä»½é“¾å®Œæ•´æ€§æ£€æŸ¥é€šè¿‡"
    return 0
}

# æ‰§è¡Œæ£€æŸ¥
verify_backup_chain
```

---

## 4. ğŸ¯ æ¢å¤ç‚¹é€‰æ‹©ç­–ç•¥


### 4.1 æ—¶é—´ç‚¹æ¢å¤çš„åŸç†


**â° ç²¾ç¡®æ—¶é—´ç‚¹æ¢å¤ï¼ˆPITRï¼‰**
```
é—®é¢˜åœºæ™¯ï¼š
10:00 - å…¨é‡å¤‡ä»½å®Œæˆ
14:00 - å¢é‡å¤‡ä»½å®Œæˆ
16:30 - è¯¯åˆ é™¤é‡è¦æ•°æ® â† éœ€è¦æ¢å¤åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹å‰
18:00 - å‘ç°é—®é¢˜

è§£å†³æ–¹æ¡ˆï¼šæ¢å¤åˆ°16:25ï¼ˆè¯¯åˆ é™¤å‰5åˆ†é’Ÿï¼‰
```

**ğŸ“Š æ—¶é—´ç‚¹é€‰æ‹©ç­–ç•¥å›¾**
```
å¤‡ä»½æ—¶é—´è½´ï¼š
10:00      14:00      16:30      18:00
  â”‚          â”‚         â”‚          â”‚
  â–¼          â–¼         â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”
â”‚å…¨é‡ â”‚   â”‚å¢é‡1â”‚   â”‚ è¯¯åˆ  â”‚   â”‚å‘ç° â”‚
â”‚å¤‡ä»½ â”‚   â”‚å¤‡ä»½ â”‚   â”‚äº‹ä»¶ â”‚   â”‚é—®é¢˜ â”‚
â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜

å®‰å…¨æ¢å¤ç‚¹ï¼š16:25ï¼ˆåœ¨è¯¯åˆ é™¤ä¹‹å‰ï¼‰
```

### 4.2 é€‰æ‹©æ¢å¤ç‚¹çš„è€ƒè™‘å› ç´ 


**ğŸ¯ ä¸šåŠ¡è¿ç»­æ€§è€ƒè™‘**
```sql
-- æŸ¥çœ‹ä¸šåŠ¡å…³é”®æ—¶é—´ç‚¹
SELECT 
    DATE(created_time) as date,
    HOUR(created_time) as hour,
    COUNT(*) as transaction_count
FROM important_transactions 
WHERE created_time >= '2025-01-01'
GROUP BY DATE(created_time), HOUR(created_time)
ORDER BY date, hour;

-- ç»“æœç¤ºä¾‹ï¼š
-- +------------+------+-------------------+
-- | date       | hour | transaction_count |
-- +------------+------+-------------------+
-- | 2025-01-04 |   14 |               245 | â† ä¸šåŠ¡é«˜å³°æœŸ
-- | 2025-01-04 |   15 |               180 |
-- | 2025-01-04 |   16 |                12 | â† ä¸šåŠ¡ä½è°·æœŸï¼Œé€‚åˆæ¢å¤
-- +------------+------+-------------------+
```

**ğŸ“‹ æ¢å¤ç‚¹é€‰æ‹©å†³ç­–è¡¨**
| åœºæ™¯ç±»å‹ | **é€‰æ‹©ç­–ç•¥** | **è€ƒè™‘å› ç´ ** | **é£é™©è¯„ä¼°** |
|---------|------------|------------|------------|
| ğŸš¨ **æ•°æ®è¯¯åˆ ** | `åˆ é™¤å‰æœ€è¿‘æ—¶é—´ç‚¹` | `æœ€å°åŒ–æ•°æ®ä¸¢å¤±` | `ä½é£é™©` |
| ğŸ’¥ **ç³»ç»Ÿæ•…éšœ** | `æ•…éšœå‰ç¨³å®šç‚¹` | `é¿å…ä¸ä¸€è‡´çŠ¶æ€` | `ä¸­ç­‰é£é™©` |
| ğŸ”„ **ç‰ˆæœ¬å›æ»š** | `ä¸Šä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒç‚¹` | `åŠŸèƒ½å®Œæ•´æ€§` | `ä½é£é™©` |
| ğŸ› **æ•°æ®æŸå** | `æŸåæ£€æµ‹å‰æ—¶é—´ç‚¹` | `æ•°æ®å®Œæ•´æ€§` | `ä¸­ç­‰é£é™©` |

### 4.3 æ¢å¤ç‚¹éªŒè¯ç­–ç•¥


**ğŸ” æ¢å¤å‰æ•°æ®çŠ¶æ€éªŒè¯**
```sql
-- 1. æ£€æŸ¥ç›®æ ‡æ—¶é—´ç‚¹çš„æ•°æ®é‡
SELECT 
    table_name,
    table_rows,
    ROUND((data_length + index_length)/1024/1024, 2) as size_mb
FROM information_schema.tables 
WHERE table_schema = 'your_database'
AND create_time <= '2025-01-04 16:25:00';

-- 2. æ£€æŸ¥å…³é”®ä¸šåŠ¡æ•°æ®
SELECT 
    COUNT(*) as total_orders,
    SUM(amount) as total_amount,
    MAX(created_time) as latest_order
FROM orders 
WHERE created_time <= '2025-01-04 16:25:00';

-- 3. æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
SELECT 
    COUNT(*) as orphaned_records
FROM order_items oi
LEFT JOIN orders o ON oi.order_id = o.id
WHERE o.id IS NULL
AND oi.created_time <= '2025-01-04 16:25:00';
```

---

## 5. ğŸ—‚ï¸ éƒ¨åˆ†æ•°æ®æ¢å¤æŠ€æœ¯


### 5.1 è¡¨çº§æ•°æ®æ¢å¤


**ğŸ“Š ä»€ä¹ˆæ˜¯è¡¨çº§æ¢å¤**
è¡¨çº§æ¢å¤æ˜¯æŒ‡åªæ¢å¤æ•°æ®åº“ä¸­çš„æŸäº›ç‰¹å®šè¡¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°æ®åº“ã€‚è¿™åœ¨ä»¥ä¸‹æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ï¼š
- åªæœ‰æŸä¸ªè¡¨çš„æ•°æ®æŸå
- éœ€è¦æ¢å¤ç‰¹å®šè¡¨åˆ°æŸä¸ªæ—¶é—´ç‚¹
- å‡å°‘æ¢å¤æ—¶é—´å’Œèµ„æºæ¶ˆè€—

**ğŸ”§ è¡¨çº§æ¢å¤å®æ–½æ­¥éª¤**
```bash
# 1. ä»å…¨é‡å¤‡ä»½ä¸­æå–ç‰¹å®šè¡¨
mysql -u root -p -e "
    DROP TABLE IF EXISTS temp_users;
    CREATE TABLE temp_users LIKE users;
"

# 2. åªæ¢å¤usersè¡¨çš„ç»“æ„å’Œæ•°æ®
sed -n '/^-- Table structure for table \`users\`/,/^-- Table structure for table/p' \
    /backup/full_backup_20250101.sql | \
    head -n -1 | \
    mysql -u root -p your_database

# 3. åº”ç”¨å¢é‡å¤‡ä»½ä¸­usersè¡¨çš„å˜åŒ–
grep -A 1000 "INSERT INTO \`users\`" /backup/inc_backup_20250102.sql | \
    mysql -u root -p your_database
```

**ğŸ’¡ æ™ºèƒ½è¡¨çº§æ¢å¤è„šæœ¬**
```bash
#!/bin/bash
# è¡¨çº§æ¢å¤å·¥å…·

restore_specific_table() {
    local database=$1
    local table=$2
    local backup_file=$3
    
    echo "ğŸ”„ å¼€å§‹æ¢å¤è¡¨: $database.$table"
    
    # å¤‡ä»½å½“å‰è¡¨ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰
    mysqldump -u root -p$MYSQL_PASSWORD $database $table > \
        "/backup/temp/backup_${table}_$(date +%Y%m%d_%H%M%S).sql"
    
    # åˆ é™¤å½“å‰è¡¨
    mysql -u root -p$MYSQL_PASSWORD -e "DROP TABLE IF EXISTS $database.$table"
    
    # ä»å¤‡ä»½ä¸­æ¢å¤è¡¨ç»“æ„
    grep -A 1000 "CREATE TABLE \`$table\`" $backup_file | \
        grep -B 1000 "^$" | head -n -1 | \
        mysql -u root -p$MYSQL_PASSWORD $database
    
    # ä»å¤‡ä»½ä¸­æ¢å¤è¡¨æ•°æ®
    grep -A 10000 "INSERT INTO \`$table\`" $backup_file | \
        mysql -u root -p$MYSQL_PASSWORD $database
    
    echo "âœ… è¡¨æ¢å¤å®Œæˆ: $database.$table"
}

# ä½¿ç”¨ç¤ºä¾‹
restore_specific_table "ecommerce" "users" "/backup/full_backup_20250101.sql"
```

### 5.2 æ•°æ®åº“çº§åˆ«æ¢å¤


**ğŸ—ï¸ æ•°æ®åº“çº§æ¢å¤é€‚ç”¨åœºæ™¯**
- æŸä¸ªä¸šåŠ¡æ•°æ®åº“å‡ºç°é—®é¢˜ï¼Œå…¶ä»–æ•°æ®åº“æ­£å¸¸
- å¼€å‘ç¯å¢ƒéœ€è¦æ¢å¤ç”Ÿäº§æ•°æ®åº“çš„æŸä¸ªå‰¯æœ¬
- æ•°æ®è¿ç§»å’Œæµ‹è¯•ç¯å¢ƒæ­å»º

**ğŸ“‹ æ•°æ®åº“çº§æ¢å¤æ“ä½œæµç¨‹**
```sql
-- 1. åˆ›å»ºç›®æ ‡æ•°æ®åº“
CREATE DATABASE ecommerce_restored 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- 2. åˆ‡æ¢åˆ°ç›®æ ‡æ•°æ®åº“
USE ecommerce_restored;

-- 3. æ¢å¤æ•°æ®åº“ç»“æ„å’Œæ•°æ®
-- ï¼ˆé€šè¿‡shellå‘½ä»¤æ‰§è¡Œï¼‰
```

```bash
# æå–ç‰¹å®šæ•°æ®åº“çš„å¤‡ä»½å†…å®¹
sed -n '/^-- Current Database: `ecommerce`/,/^-- Current Database:/p' \
    /backup/full_backup_20250101.sql | \
    head -n -1 | \
    mysql -u root -p ecommerce_restored

# éªŒè¯æ¢å¤ç»“æœ
mysql -u root -p -e "
    USE ecommerce_restored;
    SHOW TABLES;
    SELECT COUNT(*) as table_count FROM information_schema.tables 
    WHERE table_schema = 'ecommerce_restored';
"
```

### 5.3 é€‰æ‹©æ€§æ•°æ®æ¢å¤


**ğŸ¯ åŸºäºæ¡ä»¶çš„æ•°æ®æ¢å¤**
æœ‰æ—¶å€™æˆ‘ä»¬åªéœ€è¦æ¢å¤æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ•°æ®ï¼Œæ¯”å¦‚æŸä¸ªæ—¶é—´æ®µçš„è®¢å•ã€ç‰¹å®šç”¨æˆ·çš„æ•°æ®ç­‰ã€‚

**ğŸ’¾ æ¡ä»¶è¿‡æ»¤æ¢å¤ç¤ºä¾‹**
```sql
-- åœºæ™¯ï¼šåªæ¢å¤2025å¹´1æœˆçš„è®¢å•æ•°æ®

-- 1. åˆ›å»ºä¸´æ—¶è¡¨ç»“æ„
CREATE TABLE orders_temp LIKE orders;

-- 2. æ¢å¤å…¨éƒ¨æ•°æ®åˆ°ä¸´æ—¶è¡¨
-- ï¼ˆä»å¤‡ä»½æ–‡ä»¶å¯¼å…¥åˆ°orders_tempï¼‰

-- 3. é€‰æ‹©æ€§è¿ç§»æ•°æ®
INSERT INTO orders 
SELECT * FROM orders_temp 
WHERE created_time >= '2025-01-01' 
  AND created_time < '2025-02-01';

-- 4. æ¸…ç†ä¸´æ—¶è¡¨
DROP TABLE orders_temp;
```

**ğŸ”§ è‡ªåŠ¨åŒ–é€‰æ‹©æ€§æ¢å¤å·¥å…·**
```bash
#!/bin/bash
# é€‰æ‹©æ€§æ•°æ®æ¢å¤å·¥å…·

selective_restore() {
    local table=$1
    local condition=$2
    local backup_file=$3
    
    echo "ğŸ¯ å¼€å§‹é€‰æ‹©æ€§æ¢å¤: $table"
    echo "ğŸ“‹ è¿‡æ»¤æ¡ä»¶: $condition"
    
    # åˆ›å»ºä¸´æ—¶è¡¨
    mysql -u root -p -e "
        DROP TABLE IF EXISTS ${table}_temp;
        CREATE TABLE ${table}_temp LIKE $table;
        TRUNCATE TABLE $table;
    "
    
    # æ¢å¤æ•°æ®åˆ°ä¸´æ—¶è¡¨
    grep -A 10000 "INSERT INTO \`$table\`" $backup_file | \
        sed "s/INSERT INTO \`$table\`/INSERT INTO \`${table}_temp\`/g" | \
        mysql -u root -p
    
    # é€‰æ‹©æ€§è¿ç§»æ•°æ®
    mysql -u root -p -e "
        INSERT INTO $table 
        SELECT * FROM ${table}_temp 
        WHERE $condition;
        
        DROP TABLE ${table}_temp;
    "
    
    echo "âœ… é€‰æ‹©æ€§æ¢å¤å®Œæˆ"
}

# ä½¿ç”¨ç¤ºä¾‹ï¼šåªæ¢å¤VIPç”¨æˆ·çš„æ•°æ®
selective_restore "users" "user_level = 'VIP'" "/backup/full_backup_20250101.sql"
```

---

## 6. ğŸ¯ ç²¾ç¡®æ¢å¤æŠ€æœ¯


### 6.1 ç»“æ„æ¢å¤ä¸æ•°æ®æ¢å¤åˆ†ç¦»


**ğŸ—ï¸ ä¸ºä»€ä¹ˆè¦åˆ†ç¦»æ¢å¤**
åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦æ¢å¤è¡¨ç»“æ„ï¼ˆæ¯”å¦‚å¼€å‘ç¯å¢ƒï¼‰ï¼Œæˆ–è€…åªéœ€è¦æ¢å¤æ•°æ®ï¼ˆæ¯”å¦‚è¡¨ç»“æ„å·²å­˜åœ¨ä½†æ•°æ®æŸåï¼‰ã€‚

**ğŸ“Š åˆ†ç¦»æ¢å¤ç­–ç•¥å›¾**
```
å®Œæ•´å¤‡ä»½æ–‡ä»¶ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ•°æ®åº“åˆ›å»ºè¯­å¥                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. è¡¨ç»“æ„å®šä¹‰ (CREATE TABLE)    â”‚ â† ç»“æ„æ¢å¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. ç´¢å¼•å’Œçº¦æŸå®šä¹‰               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. è¡¨æ•°æ® (INSERT INTO)         â”‚ â† æ•°æ®æ¢å¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ åªæ¢å¤è¡¨ç»“æ„**
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨mysqldumpçš„--no-dataé€‰é¡¹åˆ›å»ºæ— æ•°æ®å¤‡ä»½
mysqldump -u root -p --no-data --routines --triggers your_database > schema_only.sql

# æ–¹æ³•2ï¼šä»ç°æœ‰å¤‡ä»½ä¸­æå–ç»“æ„
grep -E "(CREATE TABLE|CREATE DATABASE|CREATE INDEX|CREATE TRIGGER)" \
    /backup/full_backup_20250101.sql > schema_only.sql

# æ¢å¤ç»“æ„
mysql -u root -p < schema_only.sql
```

**ğŸ’¾ åªæ¢å¤æ•°æ®**
```bash
# ä»å¤‡ä»½ä¸­æå–æ•°æ®éƒ¨åˆ†
grep -E "(INSERT INTO|LOCK TABLES|UNLOCK TABLES)" \
    /backup/full_backup_20250101.sql > data_only.sql

# æ¢å¤æ•°æ®ï¼ˆç¡®ä¿è¡¨ç»“æ„å·²å­˜åœ¨ï¼‰
mysql -u root -p your_database < data_only.sql
```

### 6.2 æ¢å¤æ•°æ®è¿‡æ»¤æŠ€æœ¯


**ğŸ›ï¸ é«˜çº§æ•°æ®è¿‡æ»¤æ¢å¤**
```bash
#!/bin/bash
# é«˜çº§æ•°æ®è¿‡æ»¤æ¢å¤å·¥å…·

filtered_restore() {
    local database=$1
    local table=$2
    local filter_condition=$3
    local backup_file=$4
    
    echo "ğŸ” å¼€å§‹è¿‡æ»¤æ¢å¤: $database.$table"
    echo "ğŸ“‹ è¿‡æ»¤æ¡ä»¶: $filter_condition"
    
    # æå–è¡¨çš„INSERTè¯­å¥
    grep -A 10000 "INSERT INTO \`$table\`" $backup_file | \
        grep "INSERT INTO" > temp_inserts.sql
    
    # åˆ›å»ºä¸´æ—¶æ¢å¤è„šæœ¬
    cat > filtered_restore.sql << EOF
USE $database;
DROP TABLE IF EXISTS ${table}_filtered;
CREATE TABLE ${table}_filtered LIKE $table;

-- æ¢å¤æ‰€æœ‰æ•°æ®åˆ°ä¸´æ—¶è¡¨
SOURCE temp_inserts.sql;

-- åº”ç”¨è¿‡æ»¤æ¡ä»¶
INSERT INTO $table 
SELECT * FROM ${table}_filtered 
WHERE $filter_condition;

-- æ¸…ç†ä¸´æ—¶è¡¨
DROP TABLE ${table}_filtered;
EOF
    
    # æ‰§è¡Œè¿‡æ»¤æ¢å¤
    mysql -u root -p < filtered_restore.sql
    
    # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    rm -f temp_inserts.sql filtered_restore.sql
    
    echo "âœ… è¿‡æ»¤æ¢å¤å®Œæˆ"
}

# ä½¿ç”¨ç¤ºä¾‹
filtered_restore "shop" "orders" "order_date >= '2025-01-01'" "/backup/full_backup.sql"
```

### 6.3 ç²¾ç¡®æ—¶é—´ç‚¹æ•°æ®æ¢å¤


**â° åŸºäºäºŒè¿›åˆ¶æ—¥å¿—çš„ç²¾ç¡®æ¢å¤**
MySQLçš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰è®°å½•äº†æ‰€æœ‰æ•°æ®å˜æ›´æ“ä½œï¼Œå¯ä»¥å®ç°ç§’çº§ç”šè‡³æ›´ç²¾ç¡®çš„æ—¶é—´ç‚¹æ¢å¤ã€‚

**ğŸ“Š binlogç²¾ç¡®æ¢å¤æµç¨‹**
```
æ¢å¤æµç¨‹ï¼š
1. æ¢å¤æœ€è¿‘çš„å…¨é‡å¤‡ä»½
2. åº”ç”¨å¢é‡å¤‡ä»½åˆ°æ¥è¿‘ç›®æ ‡æ—¶é—´
3. ä½¿ç”¨binlogæ¢å¤åˆ°ç²¾ç¡®æ—¶é—´ç‚¹

æ—¶é—´çº¿ç¤ºä¾‹ï¼š
10:00        14:00        16:28:45     16:30        18:00
  â”‚            â”‚             â”‚           â”‚            â”‚
å…¨é‡å¤‡ä»½    å¢é‡å¤‡ä»½      ç›®æ ‡æ—¶é—´ç‚¹   è¯¯åˆ é™¤      å‘ç°é—®é¢˜
  â”‚            â”‚             â”‚           â”‚            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚           â”‚
                         binlogæ¢å¤    åœæ­¢ç‚¹
```

**ğŸ”§ binlogæ—¶é—´ç‚¹æ¢å¤æ“ä½œ**
```bash
# 1. æŸ¥çœ‹å¯ç”¨çš„binlogæ–‡ä»¶
mysql -u root -p -e "SHOW BINARY LOGS;"

# 2. æŸ¥æ‰¾ç›®æ ‡æ—¶é—´ç‚¹çš„binlogä½ç½®
mysqlbinlog --start-datetime="2025-01-04 16:25:00" \
            --stop-datetime="2025-01-04 16:28:45" \
            /var/log/mysql/mysql-bin.000123 > recovery_statements.sql

# 3. æ£€æŸ¥æ¢å¤è¯­å¥ï¼ˆç¡®ä¿å®‰å…¨ï¼‰
less recovery_statements.sql

# 4. åº”ç”¨ç²¾ç¡®çš„æ—¶é—´ç‚¹æ¢å¤
mysql -u root -p < recovery_statements.sql

echo "âœ… ç²¾ç¡®æ—¶é—´ç‚¹æ¢å¤å®Œæˆï¼š2025-01-04 16:28:45"
```

**âš ï¸ ç²¾ç¡®æ¢å¤æ³¨æ„äº‹é¡¹**
```bash
# é‡è¦å®‰å…¨æ£€æŸ¥æ¸…å•
echo "ğŸ“‹ ç²¾ç¡®æ¢å¤å®‰å…¨æ£€æŸ¥ï¼š"
echo "âœ… 1. å¤‡ä»½å½“å‰æ•°æ®åº“çŠ¶æ€"
echo "âœ… 2. ç¡®è®¤ç›®æ ‡æ—¶é—´ç‚¹çš„å‡†ç¡®æ€§"
echo "âœ… 3. éªŒè¯binlogæ–‡ä»¶çš„å®Œæ•´æ€§"
echo "âœ… 4. åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯æ¢å¤è¿‡ç¨‹"
echo "âœ… 5. å‡†å¤‡å›æ»šæ–¹æ¡ˆ"
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ¯ å¢é‡æ¢å¤æ ¸å¿ƒè¦ç‚¹**
```
ğŸ”¸ åŸºæœ¬åŸç†ï¼šå…¨é‡å¤‡ä»½ + æœ‰åºå¢é‡å¤‡ä»½ = å®Œæ•´æ•°æ®æ¢å¤
ğŸ”¸ å…³é”®ä¾èµ–ï¼šå¤‡ä»½é“¾çš„å®Œæ•´æ€§å’Œé¡ºåºæ€§è‡³å…³é‡è¦
ğŸ”¸ æ¢å¤æµç¨‹ï¼šå‡†å¤‡æ£€æŸ¥ â†’ åŸºç¡€æ¢å¤ â†’ å¢é‡åº”ç”¨ â†’ ç»“æœéªŒè¯
ğŸ”¸ æ—¶é—´æ§åˆ¶ï¼šå¯ä»¥ç²¾ç¡®æ¢å¤åˆ°ä»»æ„å†å²æ—¶é—´ç‚¹
ğŸ”¸ çµæ´»åº”ç”¨ï¼šæ”¯æŒå…¨åº“ã€å•åº“ã€å•è¡¨ã€æ¡ä»¶è¿‡æ»¤ç­‰å¤šç§æ¢å¤æ–¹å¼
```

### 7.2 å…³é”®æ“ä½œè¦ç‚¹


**ğŸ“‹ æ“ä½œæµç¨‹æ£€æŸ¥æ¸…å•**
- âœ… **æ¢å¤å‰æ£€æŸ¥**ï¼šéªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§å’Œå¯ç”¨æ€§
- âœ… **é¡ºåºæ§åˆ¶**ï¼šä¸¥æ ¼æŒ‰ç…§æ—¶é—´é¡ºåºåº”ç”¨å¤‡ä»½æ–‡ä»¶
- âœ… **å®‰å…¨æªæ–½**ï¼šæ¢å¤å‰å¤‡ä»½å½“å‰çŠ¶æ€ï¼Œå‡†å¤‡å›æ»šæ–¹æ¡ˆ
- âœ… **ç»“æœéªŒè¯**ï¼šæ¢å¤åæ£€æŸ¥æ•°æ®å®Œæ•´æ€§å’Œä¸šåŠ¡é€»è¾‘æ­£ç¡®æ€§
- âœ… **æ–‡æ¡£è®°å½•**ï¼šè®°å½•æ¢å¤è¿‡ç¨‹ã€æ—¶é—´ç‚¹ã€å½±å“èŒƒå›´

**âš ï¸ å¸¸è§é™·é˜±ä¸é¿å…æ–¹æ³•**
| é™·é˜±ç±»å‹ | **é—®é¢˜æè¿°** | **é¿å…æ–¹æ³•** | **è¡¥æ•‘æªæ–½** |
|---------|------------|------------|------------|
| ğŸ”— **é¡ºåºé”™è¯¯** | `å¤‡ä»½åº”ç”¨é¡ºåºé”™ä¹±` | `ä¸¥æ ¼æŒ‰æ—¶é—´æ’åº` | `é‡æ–°ä»å…¨é‡å¼€å§‹` |
| ğŸ“ **æ–‡ä»¶ç¼ºå¤±** | `å¤‡ä»½é“¾ä¸­æ–­` | `æ¢å¤å‰å®Œæ•´æ€§æ£€æŸ¥` | `å¯»æ‰¾æ›¿ä»£å¤‡ä»½æº` |
| â° **æ—¶é—´ç‚¹é”™è¯¯** | `æ¢å¤åˆ°é”™è¯¯æ—¶é—´` | `å¤šæ¬¡ç¡®è®¤ç›®æ ‡æ—¶é—´` | `ä½¿ç”¨binlogå¾®è°ƒ` |
| ğŸ’¾ **ç©ºé—´ä¸è¶³** | `æ¢å¤è¿‡ç¨‹ç£ç›˜æ»¡` | `é¢„å…ˆæ£€æŸ¥ç©ºé—´éœ€æ±‚` | `æ¸…ç†ä¸´æ—¶æ–‡ä»¶` |

### 7.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ æ¢å¤ç­–ç•¥é€‰æ‹©**
```
å…¨é‡æ¢å¤åœºæ™¯ï¼š
â€¢ ç³»ç»Ÿå®Œå…¨å´©æºƒ
â€¢ ç¡¬ä»¶æ•…éšœå¯¼è‡´æ•°æ®ä¸¢å¤±
â€¢ æ¶æ„æ”»å‡»éœ€è¦å®Œæ•´å›æ»š

éƒ¨åˆ†æ¢å¤åœºæ™¯ï¼š
â€¢ è¯¯åˆ é™¤ç‰¹å®šè¡¨æˆ–æ•°æ®
â€¢ æŸä¸ªåŠŸèƒ½æ¨¡å—æ•°æ®æŸå
â€¢ å¼€å‘æµ‹è¯•ç¯å¢ƒæ•°æ®å‡†å¤‡

ç²¾ç¡®æ¢å¤åœºæ™¯ï¼š
â€¢ éœ€è¦å›æ»šåˆ°å…·ä½“æ“ä½œä¹‹å‰
â€¢ è¯¯æ“ä½œå½±å“èŒƒå›´æ˜ç¡®
â€¢ æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜
```

**ğŸ”§ è‡ªåŠ¨åŒ–æ¢å¤å»ºè®®**
```bash
# åˆ›å»ºæ¢å¤æ“ä½œæ ‡å‡†åŒ–è„šæœ¬
cat > /scripts/mysql_recovery_toolkit.sh << 'EOF'
#!/bin/bash
# MySQLæ¢å¤å·¥å…·åŒ…

# å…¨é‡æ¢å¤å‡½æ•°
full_recovery() { ... }

# å¢é‡æ¢å¤å‡½æ•°  
incremental_recovery() { ... }

# ç²¾ç¡®æ—¶é—´ç‚¹æ¢å¤å‡½æ•°
point_in_time_recovery() { ... }

# éƒ¨åˆ†æ•°æ®æ¢å¤å‡½æ•°
partial_recovery() { ... }

# æ¢å¤éªŒè¯å‡½æ•°
verify_recovery() { ... }
EOF
```

### 7.4 æ€§èƒ½ä¼˜åŒ–è¦ç‚¹


**âš¡ æ¢å¤æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
- **å¹¶è¡Œæ¢å¤**ï¼šå¯¹äºå¤§å‹æ•°æ®åº“ï¼Œè€ƒè™‘åˆ†è¡¨å¹¶è¡Œæ¢å¤
- **ç£ç›˜IOä¼˜åŒ–**ï¼šä½¿ç”¨SSDå­˜å‚¨å¤‡ä»½æ–‡ä»¶ï¼Œæé«˜è¯»å–é€Ÿåº¦
- **ç½‘ç»œä¼˜åŒ–**ï¼šæœ¬åœ°æ¢å¤ä¼˜äºç½‘ç»œä¼ è¾“æ¢å¤
- **å†…å­˜è°ƒä¼˜**ï¼šè°ƒæ•´MySQLå†…å­˜å‚æ•°ï¼ŒåŠ é€Ÿæ•°æ®å¯¼å…¥

**ğŸ“Š æ¢å¤æ—¶é—´ä¼°ç®—**
```
æ¢å¤æ—¶é—´å½±å“å› ç´ ï¼š
â€¢ å¤‡ä»½æ–‡ä»¶å¤§å° â† ä¸»è¦å› ç´ 
â€¢ ç£ç›˜è¯»å†™é€Ÿåº¦ â† ç¡¬ä»¶å› ç´   
â€¢ ç½‘ç»œä¼ è¾“é€Ÿåº¦ â† ç¯å¢ƒå› ç´ 
â€¢ æ•°æ®åº“é…ç½® â† ä¼˜åŒ–å› ç´ 

ä¸€èˆ¬ç»éªŒå€¼ï¼š
â€¢ 1GBå¤‡ä»½æ–‡ä»¶ â‰ˆ 5-15åˆ†é’Ÿæ¢å¤æ—¶é—´
â€¢ å¢é‡å¤‡ä»½ â‰ˆ æ¯”å…¨é‡å¿«3-5å€
â€¢ SSD vs HDD â‰ˆ é€Ÿåº¦æå‡2-3å€
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ğŸ”„ å¢é‡æ¢å¤è®²é¡ºåºï¼Œå…¨é‡åŸºç¡€ä¸èƒ½ä¸¢
- ğŸ“‹ å¤‡ä»½é“¾æ¡ç¯ç¯æ‰£ï¼Œç¼ºä¸€ä¸å¯å…¨ç™½æ­  
- â° æ—¶é—´ç‚¹é€‰è¦ç²¾å‡†ï¼Œä¸šåŠ¡å½±å“é™æœ€ä½
- ğŸ¯ éƒ¨åˆ†æ¢å¤æ›´çµæ´»ï¼Œç²¾ç¡®è¿‡æ»¤çœæ—¶é—´
- âœ… æ¢å¤ä¹‹å‰å…ˆå¤‡ä»½ï¼ŒéªŒè¯ç»“æœä¿å®‰å…¨