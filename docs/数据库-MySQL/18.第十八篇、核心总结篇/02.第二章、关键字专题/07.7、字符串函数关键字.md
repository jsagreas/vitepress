---
title: 7、字符串函数关键字
---
## 📚 目录

1. [字符串连接函数](#1-字符串连接函数)
2. [字符串截取函数](#2-字符串截取函数)
3. [字符串长度函数](#3-字符串长度函数)
4. [字符串去空格函数](#4-字符串去空格函数)
5. [字符串大小写转换](#5-字符串大小写转换)
6. [字符串查找替换](#6-字符串查找替换)
7. [字符串位置操作](#7-字符串位置操作)
8. [字符串特殊操作](#8-字符串特殊操作)
9. [字符串填充函数](#9-字符串填充函数)
10. [字符串比较编码](#10-字符串比较编码)
11. [字符编码转换](#11-字符编码转换)
12. [进制转换函数](#12-进制转换函数)
13. [字符串格式化](#13-字符串格式化)
14. [集合操作函数](#14-集合操作函数)
15. [核心要点总结](#15-核心要点总结)

---

## 1. 🔗 字符串连接函数


### 1.1 CONCAT - 基础字符串连接


**🔸 概念含义**
`CONCAT`函数就像胶水一样，把多个字符串粘贴在一起，形成一个新的长字符串。

**💡 作用用途**
- 将多个字段或字符串合并成一个完整的字符串
- 拼接用户姓名、地址信息等常见场景
- 动态生成文本内容

**🔧 语法格式**
```sql
CONCAT(字符串1, 字符串2, ..., 字符串N)
```

**📋 实践示例**
```sql
-- 基本用法：连接姓名
SELECT CONCAT('张', '三') AS 姓名;
-- 结果: 张三

-- 连接多个字段
SELECT CONCAT(last_name, first_name) AS 完整姓名 
FROM users;

-- 添加固定文本
SELECT CONCAT('用户ID:', user_id, ' 姓名:', username) AS 用户信息
FROM users;
```

> ⚠️ **重要提醒**：如果任何一个参数是NULL，整个结果就是NULL

### 1.2 CONCAT_WS - 带分隔符连接


**🔸 概念含义**
`CONCAT_WS`中的`WS`意思是"With Separator"，就是用指定的分隔符把字符串连接起来，比CONCAT更智能。

**💡 作用用途**
- 用统一的分隔符连接多个字符串
- 自动忽略NULL值，不会让整个结果变成NULL
- 适合生成格式化的文本，如CSV格式

**🔧 语法格式**
```sql
CONCAT_WS(分隔符, 字符串1, 字符串2, ..., 字符串N)
```

**📋 实践示例**
```sql
-- 用逗号分隔
SELECT CONCAT_WS(',', '苹果', '香蕉', '橘子') AS 水果列表;
-- 结果: 苹果,香蕉,橘子

-- 连接地址信息
SELECT CONCAT_WS('-', province, city, district) AS 完整地址
FROM addresses;

-- 处理NULL值的优势
SELECT CONCAT_WS(' ', '张', NULL, '三') AS 姓名;
-- 结果: 张 三 (CONCAT会返回NULL，但CONCAT_WS会忽略NULL)
```

---

## 2. ✂️ 字符串截取函数


### 2.1 SUBSTRING/SUBSTR - 通用截取函数


**🔸 概念含义**
`SUBSTRING`和`SUBSTR`是一回事，就像剪刀一样，可以从长字符串中剪出你需要的部分。

**💡 作用用途**
- 提取字符串的一部分内容
- 获取特定位置的字符
- 处理固定格式的数据提取

**🔧 语法格式**
```sql
SUBSTRING(字符串, 起始位置, 长度)
SUBSTRING(字符串, 起始位置)  -- 从起始位置到结尾
```

**📋 实践示例**
```sql
-- 从第2个字符开始，取3个字符
SELECT SUBSTRING('Hello World', 2, 3) AS 结果;
-- 结果: ell

-- 从第7个字符开始到结尾
SELECT SUBSTRING('Hello World', 7) AS 结果;
-- 结果: World

-- 提取手机号的后4位
SELECT SUBSTRING(phone, -4) AS 手机尾号
FROM users;
```

> 💡 **小贴士**：MySQL中字符串位置从1开始计数，不是0！

### 2.2 MID - 中间截取


**🔸 概念含义**
`MID`函数专门用来获取字符串中间的部分，功能和SUBSTRING完全一样，只是名字不同。

**📋 实践示例**
```sql
-- MID和SUBSTRING用法完全相同
SELECT MID('Hello World', 3, 5) AS 结果;
-- 结果: llo W
```

### 2.3 LEFT/RIGHT - 左右截取


**🔸 概念含义**
- `LEFT`：从字符串左边（开头）取指定个数的字符
- `RIGHT`：从字符串右边（结尾）取指定个数的字符

**🔧 语法格式**
```sql
LEFT(字符串, 字符个数)
RIGHT(字符串, 字符个数)
```

**📋 实践示例**
```sql
-- 取前3个字符
SELECT LEFT('Hello World', 3) AS 左截取;
-- 结果: Hel

-- 取后3个字符
SELECT RIGHT('Hello World', 3) AS 右截取;
-- 结果: rld

-- 实际应用：提取年份和月份
SELECT LEFT(create_date, 4) AS 年份,
       RIGHT(phone, 4) AS 手机尾号
FROM orders;
```

---

## 3. 📏 字符串长度函数


### 3.1 LENGTH - 字节长度


**🔸 概念含义**
`LENGTH`函数计算字符串占用多少个字节。在UTF-8编码中，中文字符通常占3个字节。

**💡 作用用途**
- 检查数据存储空间
- 验证字符串是否符合字节限制
- 数据库性能优化时了解存储大小

**📋 实践示例**
```sql
SELECT LENGTH('Hello') AS 英文字节数;
-- 结果: 5

SELECT LENGTH('你好') AS 中文字节数;
-- 结果: 6 (UTF-8编码下每个中文字符3字节)
```

### 3.2 CHAR_LENGTH/CHARACTER_LENGTH - 字符长度


**🔸 概念含义**
`CHAR_LENGTH`和`CHARACTER_LENGTH`是同一个函数，计算字符串包含多少个字符，不管是中文还是英文都按1个字符计算。

**💡 作用用途**
- 统计文字数量
- 验证用户输入长度
- 字符数限制检查

**📋 实践示例**
```sql
SELECT CHAR_LENGTH('Hello') AS 英文字符数;
-- 结果: 5

SELECT CHAR_LENGTH('你好世界') AS 中文字符数;
-- 结果: 4

-- 实际应用：检查用户名长度
SELECT username 
FROM users 
WHERE CHAR_LENGTH(username) BETWEEN 3 AND 20;
```

### 3.3 特殊长度函数


**🔸 OCTET_LENGTH - 字节长度**
功能和LENGTH相同，计算字节数。

**🔸 BIT_LENGTH - 位长度**
计算字符串占用多少位（字节数×8）。

**📋 实践示例**
```sql
SELECT 
    LENGTH('A') AS 字节长度,
    OCTET_LENGTH('A') AS 八位字节长度,
    BIT_LENGTH('A') AS 位长度;
-- 结果: 1, 1, 8
```

---

## 4. 🧹 字符串去空格函数


### 4.1 TRIM - 去除两端空格


**🔸 概念含义**
`TRIM`就像橡皮擦，可以擦掉字符串开头和结尾的空格，让字符串变得干净整洁。

**💡 作用用途**
- 清理用户输入的数据
- 数据导入时处理多余空格
- 字符串比较前的预处理

**🔧 语法格式**
```sql
TRIM(字符串)                    -- 去除两端空格
TRIM(要删除的字符 FROM 字符串)   -- 去除指定字符
```

**📋 实践示例**
```sql
-- 去除空格
SELECT TRIM('  Hello World  ') AS 清理后;
-- 结果: Hello World

-- 去除指定字符
SELECT TRIM('x' FROM 'xxxHello Worldxxx') AS 去除x;
-- 结果: Hello World

-- 实际应用：清理用户输入
UPDATE users SET username = TRIM(username);
```

### 4.2 LTRIM - 左去空格


**🔸 概念含义**
`LTRIM`只清理字符串左边（开头）的空格。

**📋 实践示例**
```sql
SELECT LTRIM('   Hello World   ') AS 左清理;
-- 结果: Hello World   (右边空格保留)
```

### 4.3 RTRIM - 右去空格


**🔸 概念含义**
`RTRIM`只清理字符串右边（结尾）的空格。

**📋 实践示例**
```sql
SELECT RTRIM('   Hello World   ') AS 右清理;
-- 结果:    Hello World (左边空格保留)
```

---

## 5. 🔄 字符串大小写转换


### 5.1 UPPER/UCASE - 转大写


**🔸 概念含义**
`UPPER`和`UCASE`功能完全相同，将所有字母转换为大写，就像按了键盘的大写锁定键。

**💡 作用用途**
- 统一数据格式
- 不区分大小写的比较
- 数据标准化处理

**📋 实践示例**
```sql
SELECT UPPER('Hello World') AS 大写;
-- 结果: HELLO WORLD

-- 实际应用：统一邮箱格式
SELECT UPPER(email) AS 标准邮箱 FROM users;
```

### 5.2 LOWER/LCASE - 转小写


**🔸 概念含义**
`LOWER`和`LCASE`将所有字母转换为小写。

**📋 实践示例**
```sql
SELECT LOWER('Hello World') AS 小写;
-- 结果: hello world

-- 实际应用：用户名标准化
UPDATE users SET username = LOWER(username);
```

---

## 6. 🔍 字符串查找替换


### 6.1 REPLACE - 字符串替换


**🔸 概念含义**
`REPLACE`函数就像文本编辑器的"查找替换"功能，找到所有指定的子字符串并替换成新内容。

**💡 作用用途**
- 批量修改数据内容
- 清理和标准化数据
- 敏感信息脱敏处理

**🔧 语法格式**
```sql
REPLACE(原字符串, 要替换的部分, 新内容)
```

**📋 实践示例**
```sql
-- 基本替换
SELECT REPLACE('Hello World', 'World', 'MySQL') AS 替换后;
-- 结果: Hello MySQL

-- 实际应用：电话号码脱敏
SELECT REPLACE(phone, SUBSTRING(phone, 4, 4), '****') AS 脱敏电话
FROM users;

-- 清理数据
UPDATE products SET description = REPLACE(description, '特价', '优惠');
```

### 6.2 INSERT - 插入字符串


**🔸 概念含义**
`INSERT`函数在指定位置插入新字符串，同时可以替换原有的一部分内容。

**🔧 语法格式**
```sql
INSERT(原字符串, 插入位置, 替换长度, 新字符串)
```

**📋 实践示例**
```sql
-- 在第6个位置插入，替换5个字符
SELECT INSERT('Hello World', 6, 5, ' MySQL') AS 插入后;
-- 结果: Hello MySQL

-- 插入而不替换（替换长度为0）
SELECT INSERT('Hello World', 6, 0, ' Beautiful') AS 插入后;
-- 结果: Hello Beautiful World
```

---

## 7. 📍 字符串位置操作


### 7.1 LOCATE/POSITION/INSTR - 查找位置


**🔸 概念含义**
这三个函数功能相似，都是在字符串中查找子字符串的位置，就像用放大镜找东西一样。

**💡 作用用途**
- 检查字符串是否包含特定内容
- 获取子字符串的位置进行后续处理
- 数据验证和清理

**🔧 语法对比**
```
LOCATE(要查找的字符串, 在哪个字符串中查找, 从第几个位置开始)
POSITION(要查找的字符串 IN 在哪个字符串中查找)
INSTR(在哪个字符串中查找, 要查找的字符串)
```

**📋 实践示例**
```sql
-- LOCATE用法
SELECT LOCATE('o', 'Hello World') AS 位置1;
-- 结果: 5 (第一个'o'的位置)

SELECT LOCATE('o', 'Hello World', 6) AS 位置2;
-- 结果: 8 (从第6位开始找的第一个'o')

-- POSITION用法  
SELECT POSITION('World' IN 'Hello World') AS 位置;
-- 结果: 7

-- INSTR用法
SELECT INSTR('Hello World', 'o') AS 位置;
-- 结果: 5

-- 实际应用：检查邮箱格式
SELECT email FROM users 
WHERE LOCATE('@', email) > 0 AND LOCATE('.', email) > LOCATE('@', email);
```

> 💡 **记忆技巧**：如果找不到，这些函数都返回0，而不是-1

---

## 8. 🎭 字符串特殊操作


### 8.1 REVERSE - 字符串反转


**🔸 概念含义**
`REVERSE`函数将字符串完全颠倒，就像照镜子一样。

**💡 作用用途**
- 数据混淆处理
- 特殊算法需求
- 趣味数据处理

**📋 实践示例**
```sql
SELECT REVERSE('Hello') AS 反转后;
-- 结果: olleH

-- 检查回文字符串
SELECT word FROM dictionary 
WHERE word = REVERSE(word);
```

### 8.2 REPEAT - 重复字符串


**🔸 概念含义**
`REPEAT`函数将字符串重复指定次数，就像复印机一样。

**💡 作用用途**
- 生成测试数据
- 创建分隔线或装饰
- 数据填充

**🔧 语法格式**
```sql
REPEAT(字符串, 重复次数)
```

**📋 实践示例**
```sql
SELECT REPEAT('*', 10) AS 分隔线;
-- 结果: **********

-- 生成测试数据
SELECT CONCAT('test', REPEAT('0', 3), id) AS 测试编号
FROM users;
```

### 8.3 SPACE - 生成空格


**🔸 概念含义**
`SPACE`函数生成指定数量的空格字符。

**📋 实践示例**
```sql
SELECT CONCAT('Hello', SPACE(5), 'World') AS 带空格;
-- 结果: Hello     World

-- 格式化输出
SELECT CONCAT(name, SPACE(20 - CHAR_LENGTH(name)), price) AS 商品列表
FROM products;
```

---

## 9. 📝 字符串填充函数


### 9.1 LPAD - 左填充


**🔸 概念含义**
`LPAD`在字符串左边填充指定字符，直到达到指定长度，就像给数字前面加0。

**💡 作用用途**
- 格式化数字（如订单号）
- 对齐显示
- 数据标准化

**🔧 语法格式**
```sql
LPAD(字符串, 总长度, 填充字符)
```

**📋 实践示例**
```sql
-- 数字前补0
SELECT LPAD('123', 6, '0') AS 订单号;
-- 结果: 000123

-- 右对齐显示
SELECT LPAD(name, 20, ' ') AS 右对齐姓名
FROM users;
```

### 9.2 RPAD - 右填充


**🔸 概念含义**
`RPAD`在字符串右边填充指定字符。

**📋 实践示例**
```sql
-- 左对齐并填充
SELECT RPAD(name, 20, '.') AS 左对齐姓名
FROM users;
-- 结果类似: 张三................
```

---

## 10. 🔤 字符串比较编码


### 10.1 STRCMP - 字符串比较


**🔸 概念含义**
`STRCMP`函数比较两个字符串的大小关系，返回数字结果。

**💡 返回值含义**
```
返回0：两个字符串相等
返回-1：第一个字符串小于第二个
返回1：第一个字符串大于第二个
```

**📋 实践示例**
```sql
SELECT STRCMP('abc', 'abc') AS 相等;     -- 结果: 0
SELECT STRCMP('abc', 'def') AS 小于;     -- 结果: -1
SELECT STRCMP('def', 'abc') AS 大于;     -- 结果: 1
```

### 10.2 SOUNDEX - 语音编码


**🔸 概念含义**
`SOUNDEX`将字符串转换为语音编码，发音相似的词会得到相同编码。

**💡 作用用途**
- 模糊匹配相似发音的姓名
- 数据去重中的辅助工具

**📋 实践示例**
```sql
SELECT SOUNDEX('Smith') AS 编码1, SOUNDEX('Smyth') AS 编码2;
-- 两个编码可能相同，因为发音相似
```

### 10.3 QUOTE - 添加引号


**🔸 概念含义**
`QUOTE`函数为字符串添加引号，并转义其中的特殊字符。

**📋 实践示例**
```sql
SELECT QUOTE("It's a test") AS 加引号;
-- 结果: 'It\'s a test'
```

---

## 11. 🔢 字符编码转换


### 11.1 ASCII/ORD - 获取字符编码


**🔸 概念含义**
- `ASCII`：获取字符的ASCII码值
- `ORD`：功能相同，获取字符的数字编码

**📋 实践示例**
```sql
SELECT ASCII('A') AS A的编码;    -- 结果: 65
SELECT ORD('B') AS B的编码;      -- 结果: 66
```

### 11.2 CHAR - 编码转字符


**🔸 概念含义**
`CHAR`函数将数字编码转换回字符。

**📋 实践示例**
```sql
SELECT CHAR(65, 66, 67) AS 字符;
-- 结果: ABC
```

---

## 12. 🔄 进制转换函数


### 12.1 HEX/UNHEX - 十六进制转换


**🔸 概念含义**
- `HEX`：将字符串或数字转换为十六进制
- `UNHEX`：将十六进制转换回原始形式

**📋 实践示例**
```sql
SELECT HEX('ABC') AS 十六进制;      -- 结果: 414243
SELECT UNHEX('414243') AS 原字符;   -- 结果: ABC
```

### 12.2 BIN/OCT - 二进制八进制


**🔸 概念含义**
- `BIN`：转换为二进制
- `OCT`：转换为八进制

**📋 实践示例**
```sql
SELECT BIN(10) AS 二进制;    -- 结果: 1010
SELECT OCT(10) AS 八进制;    -- 结果: 12
```

### 12.3 CONV - 通用进制转换


**🔸 概念含义**
`CONV`函数可以在任意进制之间转换。

**🔧 语法格式**
```sql
CONV(数值, 源进制, 目标进制)
```

**📋 实践示例**
```sql
-- 十进制转十六进制
SELECT CONV(255, 10, 16) AS 十六进制;  -- 结果: FF

-- 二进制转十进制
SELECT CONV(1010, 2, 10) AS 十进制;   -- 结果: 10
```

---

## 13. 📊 字符串格式化


### 13.1 FORMAT - 数字格式化


**🔸 概念含义**
`FORMAT`函数将数字格式化为带千位分隔符的字符串。

**🔧 语法格式**
```sql
FORMAT(数字, 小数位数)
```

**📋 实践示例**
```sql
SELECT FORMAT(12345.6789, 2) AS 格式化;
-- 结果: 12,345.68

-- 实际应用：格式化价格显示
SELECT FORMAT(price, 2) AS 显示价格 FROM products;
```

---

## 14. 🗂️ 集合操作函数


### 14.1 FIELD - 查找字段位置


**🔸 概念含义**
`FIELD`函数在一组值中查找指定值的位置。

**🔧 语法格式**
```sql
FIELD(要查找的值, 值1, 值2, ..., 值N)
```

**📋 实践示例**
```sql
SELECT FIELD('b', 'a', 'b', 'c', 'd') AS 位置;
-- 结果: 2

-- 实际应用：自定义排序
SELECT * FROM products 
ORDER BY FIELD(category, '热销', '新品', '特价', '普通');
```

### 14.2 FIND_IN_SET - 集合中查找


**🔸 概念含义**
`FIND_IN_SET`在逗号分隔的字符串集合中查找指定值。

**📋 实践示例**
```sql
SELECT FIND_IN_SET('b', 'a,b,c,d') AS 位置;
-- 结果: 2

-- 实际应用：查找标签
SELECT * FROM articles 
WHERE FIND_IN_SET('技术', tags) > 0;
```

### 14.3 MAKE_SET - 创建集合


**🔸 概念含义**
`MAKE_SET`根据位掩码从给定值中创建集合。

**🔧 语法格式**
```sql
MAKE_SET(位掩码, 值1, 值2, ..., 值N)
```

**📋 实践示例**
```sql
-- 位掩码5 (二进制101) 选择第1和第3个值
SELECT MAKE_SET(5, 'a', 'b', 'c', 'd') AS 集合;
-- 结果: a,c
```

---

## 15. 📋 核心要点总结


### 15.1 必须掌握的函数分类


```
🔗 字符串连接：
• CONCAT：基础连接，任一NULL则全NULL
• CONCAT_WS：智能连接，自动忽略NULL

✂️ 字符串截取：
• SUBSTRING/SUBSTR：万能截取函数
• LEFT/RIGHT：左右定长截取
• MID：中间截取（同SUBSTRING）

📏 长度计算：
• LENGTH：字节长度（存储空间）
• CHAR_LENGTH：字符长度（字符个数）

🧹 空格处理：
• TRIM：去除两端空格或指定字符
• LTRIM/RTRIM：单侧空格清理
```

### 15.2 关键理解要点


**🔹 长度函数的区别**
```
LENGTH('你好')        = 6  (字节数，UTF-8中文3字节)
CHAR_LENGTH('你好')   = 2  (字符数，实际字符个数)

使用场景：
• 数据库存储限制 → 使用LENGTH
• 用户界面字符限制 → 使用CHAR_LENGTH
```

**🔹 查找函数的选择**
```
查找功能对比：
LOCATE(子串, 字符串, 起始位置)  ← 最灵活，支持起始位置
INSTR(字符串, 子串)           ← 最简洁，参数顺序直观  
POSITION(子串 IN 字符串)      ← SQL标准语法

推荐：日常使用INSTR，需要指定起始位置用LOCATE
```

**🔹 填充函数的实用技巧**
```
LPAD应用场景：
• 订单号：LPAD(order_id, 8, '0')  → 00001234
• 货币对齐：LPAD(amount, 10, ' ') → "    99.99"

RPAD应用场景：
• 商品名对齐：RPAD(product_name, 20, '.')
• 进度条显示：RPAD('█', progress/5, '─')
```

### 15.3 性能优化建议


**🚀 性能优化技巧**
```
高效使用原则：
1. 能用索引尽量用索引
   WHERE name LIKE 'ABC%'  ← 可用索引
   WHERE UPPER(name) = 'ABC'  ← 不能用索引

2. 批量操作减少函数调用
   UPDATE users SET name = TRIM(name)  ← 一次性清理

3. 复杂字符串处理考虑程序处理
   简单替换用REPLACE，复杂处理用程序代码
```

### 15.4 常见应用场景


**📋 实际应用模板**
```sql
-- 用户数据清理
UPDATE users SET 
    username = TRIM(LOWER(username)),
    email = TRIM(LOWER(email)),
    phone = REPLACE(phone, '-', '');

-- 数据脱敏显示
SELECT 
    name,
    CONCAT(LEFT(phone, 3), '****', RIGHT(phone, 4)) AS 脱敏手机,
    CONCAT(LEFT(email, 2), '***', RIGHT(email, 10)) AS 脱敏邮箱
FROM users;

-- 格式化输出
SELECT 
    LPAD(id, 6, '0') AS 编号,
    RPAD(name, 20, '.') AS 商品名,
    FORMAT(price, 2) AS 价格
FROM products;

-- 条件查找
SELECT * FROM articles 
WHERE FIND_IN_SET('MySQL', tags) > 0
   OR LOCATE('数据库', title) > 0;
```

### 15.5 学习记忆口诀


**🎯 记忆要诀**
```
连接字符用CONCAT，分隔符用CONCAT_WS
截取字符SUBSTRING，左右定长LEFT和RIGHT
长度区分很重要，LENGTH字节CHAR_LENGTH字符数
空格清理用TRIM族，LTRIM左来RTRIM右
大小写转换UPPER/LOWER，查找替换REPLACE强
位置查找LOCATE灵活，INSTR简单POSITION标准
填充对齐LPAD/RPAD，格式数字用FORMAT
```

**核心记忆**：
- 字符串函数是数据处理的瑞士军刀
- 区分字节长度和字符长度是关键
- 合理选择函数提升查询性能
- 数据清理和格式化是主要应用场景