---
title: 8、数值函数关键字
---
## 📚 目录

1. [数值函数概述](#1-数值函数概述)
2. [基础数值运算函数](#2-基础数值运算函数)
3. [取整与截断函数](#3-取整与截断函数)
4. [幂运算与根运算函数](#4-幂运算与根运算函数)
5. [对数运算函数](#5-对数运算函数)
6. [三角函数系列](#6-三角函数系列)
7. [随机数与常量函数](#7-随机数与常量函数)
8. [比较与极值函数](#8-比较与极值函数)
9. [特殊运算函数](#9-特殊运算函数)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 🧮 数值函数概述


### 1.1 什么是SQL数值函数


**简单理解**：SQL数值函数就像是数据库里的"计算器"，专门用来对数字进行各种数学运算。

```
想象一下：
你有一堆数字数据，需要计算、处理、转换
数值函数就是帮你完成这些工作的工具

比如：
- 计算绝对值：-5 → 5
- 四舍五入：3.7 → 4  
- 开平方：16 → 4
```

### 1.2 数值函数的作用


**🔸 数据处理**：清理和转换原始数据
**🔸 统计计算**：进行各种数学统计
**🔸 业务逻辑**：实现具体的业务计算需求
**🔸 数据展示**：格式化数字显示

### 1.3 使用场景举例


```
实际业务场景：
💰 金融系统：计算利息、汇率转换
📊 电商平台：价格计算、折扣处理
📈 数据分析：统计指标、趋势计算
🎯 工程计算：物理公式、几何运算
```

---

## 2. 🔢 基础数值运算函数


### 2.1 ABS - 绝对值函数


**含义**：ABS就是"绝对值"的意思，把负数变成正数，正数保持不变。

```sql
-- 基础用法
SELECT ABS(-10);        -- 结果：10
SELECT ABS(15);         -- 结果：15
SELECT ABS(-3.14);      -- 结果：3.14
```

**实际应用**：
```sql
-- 计算温度差的绝对值
SELECT 
    city_name,
    ABS(max_temp - min_temp) AS temp_difference
FROM weather_data;

-- 计算账户余额的绝对值（不管正负）
SELECT 
    account_id,
    ABS(balance) AS abs_balance
FROM accounts;
```

> 💡 **通俗理解**：就像量体重，不管你说"-5公斤"还是"5公斤"，绝对值都是5公斤。

### 2.2 SIGN - 符号判断函数


**含义**：SIGN告诉你数字是正数、负数还是零。

```sql
SELECT SIGN(-10);       -- 结果：-1 (负数)
SELECT SIGN(0);         -- 结果：0  (零)
SELECT SIGN(15);        -- 结果：1  (正数)
```

**实际应用**：
```sql
-- 判断盈亏状态
SELECT 
    company_name,
    profit,
    CASE SIGN(profit)
        WHEN 1 THEN '盈利'
        WHEN 0 THEN '持平'
        WHEN -1 THEN '亏损'
    END AS profit_status
FROM financial_report;
```

### 2.3 MOD - 取模运算


**含义**：MOD就是"取余数"，比如10除以3等于3余1，MOD(10,3)就是1。

```sql
SELECT MOD(10, 3);      -- 结果：1 (10÷3=3余1)
SELECT MOD(15, 4);      -- 结果：3 (15÷4=3余3)
SELECT MOD(8, 2);       -- 结果：0 (8÷2=4余0)
```

**实际应用**：
```sql
-- 判断奇偶数
SELECT 
    employee_id,
    CASE MOD(employee_id, 2)
        WHEN 0 THEN '偶数工号'
        ELSE '奇数工号'
    END AS id_type
FROM employees;

-- 按固定间隔分组
SELECT 
    order_id,
    MOD(order_id, 10) AS group_number
FROM orders;
```

---

## 3. 🔄 取整与截断函数


### 3.1 ROUND - 四舍五入


**含义**：ROUND按照四舍五入规则对数字进行取整，就像小学数学学的那样。

```sql
-- 基础用法
SELECT ROUND(3.4);      -- 结果：3
SELECT ROUND(3.6);      -- 结果：4
SELECT ROUND(3.5);      -- 结果：4

-- 指定小数位数
SELECT ROUND(3.14159, 2);   -- 结果：3.14
SELECT ROUND(3.14159, 3);   -- 结果：3.142
```

**实际应用**：
```sql
-- 价格四舍五入到分
SELECT 
    product_name,
    ROUND(price, 2) AS rounded_price
FROM products;

-- 计算平均分并四舍五入
SELECT 
    student_name,
    ROUND(total_score / subject_count) AS avg_score
FROM student_grades;
```

### 3.2 CEIL/CEILING - 向上取整


**含义**：CEIL就是"天花板"的意思，总是往上取整，哪怕只超过一点点。

```sql
SELECT CEIL(3.1);       -- 结果：4
SELECT CEIL(3.9);       -- 结果：4
SELECT CEIL(3.0);       -- 结果：3
SELECT CEILING(2.1);    -- 结果：3 (与CEIL功能相同)
```

**实际应用**：
```sql
-- 计算需要多少页来显示数据
SELECT CEIL(total_records / 20) AS total_pages
FROM (SELECT COUNT(*) AS total_records FROM products) t;

-- 计算需要多少个包装盒
SELECT 
    product_name,
    quantity,
    CEIL(quantity / 12) AS boxes_needed
FROM inventory;
```

### 3.3 FLOOR - 向下取整


**含义**：FLOOR就是"地板"的意思，总是往下取整，直接丢掉小数部分。

```sql
SELECT FLOOR(3.1);      -- 结果：3
SELECT FLOOR(3.9);      -- 结果：3
SELECT FLOOR(-2.1);     -- 结果：-3
```

**实际应用**：
```sql
-- 计算完整的年龄（不算不满一岁的）
SELECT 
    name,
    FLOOR(DATEDIFF(CURDATE(), birth_date) / 365) AS age
FROM users;
```

### 3.4 TRUNCATE - 截断函数


**含义**：TRUNCATE就是"截断"，直接砍掉指定位数后的部分，不进行四舍五入。

```sql
SELECT TRUNCATE(3.14159, 2);    -- 结果：3.14
SELECT TRUNCATE(3.19999, 2);    -- 结果：3.19 (不是3.20)
SELECT TRUNCATE(123.456, 0);    -- 结果：123
SELECT TRUNCATE(123.456, -1);   -- 结果：120
```

**对比理解**：
```sql
-- ROUND vs TRUNCATE 的区别
SELECT 
    3.19999 AS original,
    ROUND(3.19999, 2) AS rounded,      -- 3.20 (四舍五入)
    TRUNCATE(3.19999, 2) AS truncated; -- 3.19 (直接截断)
```

---

## 4. ⚡ 幂运算与根运算函数


### 4.1 POWER/POW - 幂运算


**含义**：POWER就是"乘方"运算，比如2的3次方就是2×2×2=8。

```sql
SELECT POWER(2, 3);     -- 结果：8 (2的3次方)
SELECT POW(5, 2);       -- 结果：25 (5的2次方，即5平方)
SELECT POWER(10, 3);    -- 结果：1000 (10的3次方)
```

**实际应用**：
```sql
-- 计算复利
SELECT 
    initial_amount,
    POWER(1 + interest_rate/100, years) AS growth_factor,
    initial_amount * POWER(1 + interest_rate/100, years) AS final_amount
FROM investments;

-- 计算面积（平方）
SELECT 
    room_name,
    width,
    POW(width, 2) AS area
FROM square_rooms;
```

### 4.2 SQRT - 平方根


**含义**：SQRT就是"开平方根"，找到一个数乘以自己等于原数的那个数。

```sql
SELECT SQRT(16);        -- 结果：4 (因为4×4=16)
SELECT SQRT(25);        -- 结果：5
SELECT SQRT(2);         -- 结果：1.414...
```

**实际应用**：
```sql
-- 根据面积计算正方形边长
SELECT 
    plot_id,
    area,
    SQRT(area) AS side_length
FROM square_plots;

-- 计算两点间距离（勾股定理）
SELECT 
    SQRT(POW(x2-x1, 2) + POW(y2-y1, 2)) AS distance
FROM point_pairs;
```

---

## 5. 📈 对数运算函数


### 5.1 EXP - 自然指数函数


**含义**：EXP是以自然常数e(≈2.718)为底的指数函数，EXP(x)就是e的x次方。

```sql
SELECT EXP(1);          -- 结果：2.718... (e的1次方)
SELECT EXP(0);          -- 结果：1
SELECT EXP(2);          -- 结果：7.389... (e的2次方)
```

### 5.2 LN - 自然对数


**含义**：LN是EXP的反运算，求以e为底的对数。

```sql
SELECT LN(2.718);       -- 结果：约1
SELECT LN(1);           -- 结果：0
SELECT LN(7.389);       -- 结果：约2
```

### 5.3 LOG - 对数函数


**含义**：LOG可以计算不同底数的对数。

```sql
-- 以10为底的对数
SELECT LOG(100);        -- 结果：2 (10的2次方=100)
SELECT LOG(1000);       -- 结果：3

-- 指定底数的对数
SELECT LOG(2, 8);       -- 结果：3 (2的3次方=8)
SELECT LOG(3, 27);      -- 结果：3 (3的3次方=27)
```

### 5.4 LOG2/LOG10 - 特定底数对数


```sql
SELECT LOG2(8);         -- 结果：3 (2的3次方=8)
SELECT LOG2(16);        -- 结果：4

SELECT LOG10(100);      -- 结果：2 (10的2次方=100)
SELECT LOG10(1000);     -- 结果：3
```

**实际应用场景**：
```sql
-- 计算数据增长率（对数尺度）
SELECT 
    year,
    revenue,
    LOG10(revenue) AS log_revenue
FROM annual_revenue
ORDER BY year;
```

---

## 6. 🔺 三角函数系列


### 6.1 基础三角函数


**含义**：三角函数主要用于角度相关的计算，在工程和科学计算中很常用。

```sql
-- SIN - 正弦函数
SELECT SIN(PI()/2);     -- 结果：1 (90度的正弦值)
SELECT SIN(0);          -- 结果：0

-- COS - 余弦函数  
SELECT COS(0);          -- 结果：1 (0度的余弦值)
SELECT COS(PI());       -- 结果：-1

-- TAN - 正切函数
SELECT TAN(PI()/4);     -- 结果：1 (45度的正切值)
SELECT TAN(0);          -- 结果：0
```

### 6.2 反三角函数


```sql
-- ASIN - 反正弦
SELECT ASIN(1);         -- 结果：π/2 ≈ 1.571

-- ACOS - 反余弦
SELECT ACOS(0);         -- 结果：π/2 ≈ 1.571

-- ATAN - 反正切
SELECT ATAN(1);         -- 结果：π/4 ≈ 0.785

-- ATAN2 - 两参数反正切
SELECT ATAN2(1, 1);     -- 结果：π/4 ≈ 0.785
```

### 6.3 角度转换函数


**含义**：在数学计算中，有时需要在角度和弧度之间转换。

```sql
-- RADIANS - 角度转弧度
SELECT RADIANS(90);     -- 结果：π/2 ≈ 1.571
SELECT RADIANS(180);    -- 结果：π ≈ 3.142

-- DEGREES - 弧度转角度  
SELECT DEGREES(PI());   -- 结果：180
SELECT DEGREES(PI()/2); -- 结果：90
```

**实际应用**：
```sql
-- 计算建筑物的阴影长度
SELECT 
    building_height,
    sun_angle_degrees,
    building_height / TAN(RADIANS(sun_angle_degrees)) AS shadow_length
FROM buildings;
```

---

## 7. 🎲 随机数与常量函数


### 7.1 RAND - 随机数生成


**含义**：RAND生成0到1之间的随机小数，用于需要随机性的场景。

```sql
SELECT RAND();          -- 结果：0.xxx（每次不同）
SELECT RAND() * 100;    -- 结果：0-100之间的随机数
SELECT FLOOR(RAND() * 6) + 1;  -- 结果：1-6之间的随机整数（模拟骰子）
```

**实际应用**：
```sql
-- 随机抽取样本
SELECT * FROM products 
ORDER BY RAND() 
LIMIT 10;

-- 生成随机折扣
SELECT 
    product_name,
    price,
    price * (1 - RAND() * 0.3) AS discounted_price  -- 随机0-30%折扣
FROM products;
```

### 7.2 PI - 圆周率常量


**含义**：PI()返回圆周率π的值，约等于3.14159。

```sql
SELECT PI();            -- 结果：3.141593

-- 计算圆的面积
SELECT 
    radius,
    PI() * POW(radius, 2) AS area
FROM circles;

-- 计算圆的周长
SELECT 
    radius,
    2 * PI() * radius AS circumference  
FROM circles;
```

---

## 8. ⚖️ 比较与极值函数


### 8.1 GREATEST - 求最大值


**含义**：GREATEST从多个数值中找出最大的那个。

```sql
SELECT GREATEST(10, 5, 8, 15, 3);      -- 结果：15
SELECT GREATEST(3.14, 2.71, 1.41);     -- 结果：3.14
```

**实际应用**：
```sql
-- 找出每月最高销售额
SELECT 
    product_id,
    GREATEST(jan_sales, feb_sales, mar_sales) AS max_monthly_sales
FROM quarterly_sales;

-- 计算最高价格
SELECT 
    product_name,
    GREATEST(cost_price, market_price, competitor_price) AS highest_price
FROM product_pricing;
```

### 8.2 LEAST - 求最小值


**含义**：LEAST从多个数值中找出最小的那个。

```sql
SELECT LEAST(10, 5, 8, 15, 3);         -- 结果：3
SELECT LEAST(3.14, 2.71, 1.41);        -- 结果：1.41
```

**实际应用**：
```sql
-- 找出最低成本
SELECT 
    supplier_name,
    LEAST(quote1, quote2, quote3) AS lowest_quote
FROM supplier_quotes;

-- 计算最小库存
SELECT 
    product_id,
    LEAST(warehouse1_stock, warehouse2_stock, warehouse3_stock) AS min_stock
FROM inventory_summary;
```

---

## 9. 🔧 特殊运算函数


### 9.1 DIV - 整除运算


**含义**：DIV执行整数除法，只保留整数部分，丢弃余数。

```sql
SELECT 10 DIV 3;        -- 结果：3 (10÷3=3余1，只要3)
SELECT 15 DIV 4;        -- 结果：3 (15÷4=3余3，只要3)
SELECT 20 DIV 5;        -- 结果：4 (20÷5=4余0)
```

**对比理解**：
```sql
-- DIV vs 普通除法 vs MOD
SELECT 
    13 / 4 AS normal_division,    -- 结果：3.25
    13 DIV 4 AS integer_division, -- 结果：3
    13 MOD 4 AS remainder;        -- 结果：1
```

**实际应用**：
```sql
-- 计算能装多少整箱
SELECT 
    product_name,
    total_quantity,
    total_quantity DIV 12 AS full_boxes,
    total_quantity MOD 12 AS remaining_items
FROM inventory;
```

### 9.2 CRC32 - 循环冗余校验


**含义**：CRC32生成数据的校验码，主要用于检测数据是否发生变化。

```sql
SELECT CRC32('hello');          -- 结果：907060870
SELECT CRC32('world');          -- 结果：1159765084
SELECT CRC32('hello world');    -- 结果：不同的数值
```

**实际应用**：
```sql
-- 数据完整性检查
SELECT 
    user_id,
    username,
    CRC32(CONCAT(username, email)) AS data_checksum
FROM users;

-- 生成唯一标识符
SELECT 
    order_id,
    CRC32(CONCAT(order_id, customer_id, order_date)) AS order_hash
FROM orders;
```

---

## 10. 📋 核心要点总结


### 10.1 函数分类速记


```
📊 基础运算：
🔸 ABS：负数变正数
🔸 SIGN：判断正负零  
🔸 MOD：取余数

🔄 取整处理：
🔸 ROUND：四舍五入
🔸 CEIL/CEILING：向上取整（天花板）
🔸 FLOOR：向下取整（地板）
🔸 TRUNCATE：直接截断

⚡ 指数对数：
🔸 POWER/POW：乘方运算
🔸 SQRT：开平方根
🔸 EXP/LN/LOG：指数对数运算

🎯 实用工具：
🔸 GREATEST/LEAST：多值比较
🔸 RAND：随机数生成
🔸 PI：圆周率常量
```

### 10.2 记忆口诀


```
ABS绝对值，负变正来正不变
ROUND四舍五入很常见  
CEIL天花板，向上取整不会错
FLOOR是地板，向下取整要记牢
MOD取余数，除法剩余它来算
POWER是乘方，底数指数要分清
```

### 10.3 实际应用场景


| **业务场景** | **常用函数** | **典型用法** |
|-------------|-------------|-------------|
| 🏦 **金融计算** | `ROUND, ABS, POWER` | 利息计算、汇率转换、风险评估 |
| 📊 **数据统计** | `GREATEST, LEAST, MOD` | 最值比较、数据分组、奇偶判断 |
| 🏗️ **工程计算** | `SQRT, POW, SIN, COS` | 面积计算、角度运算、物理公式 |
| 🎮 **随机系统** | `RAND, FLOOR, MOD` | 抽奖系统、随机分配、游戏机制 |
| 📦 **库存管理** | `DIV, MOD, CEIL` | 包装计算、批次处理、容量规划 |

### 10.4 注意事项


> ⚠️ **精度问题**：浮点数运算可能有精度误差
> 💡 **空值处理**：大多数函数遇到NULL会返回NULL  
> 🚨 **除零错误**：除数为零时要特别注意
> 📝 **数据类型**：注意输入输出的数据类型转换

### 10.5 学习建议


**🎯 学习路径**：
1. **先掌握基础**：ABS、ROUND、MOD等常用函数
2. **理解含义**：每个函数是做什么的，解决什么问题
3. **动手练习**：结合实际数据多写SQL语句  
4. **组合使用**：学会函数嵌套和组合运算

**🛠️ 实践技巧**：
- 用简单数据测试每个函数的行为
- 对比相似函数的区别（如CEIL vs FLOOR）
- 结合业务场景思考应用方式
- 注意边界情况和异常处理

**核心记忆**：
- SQL数值函数是数据库的计算器
- 每个函数都有特定的用途和场景
- 理解含义比记住语法更重要
- 实际应用中常常组合使用多个函数