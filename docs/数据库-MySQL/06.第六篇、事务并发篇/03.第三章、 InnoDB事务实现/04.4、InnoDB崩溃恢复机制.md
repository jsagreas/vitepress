---
title: 4ã€InnoDBå´©æºƒæ¢å¤æœºåˆ¶
---
## ğŸ“š ç›®å½•

1. [InnoDBå´©æºƒæ¢å¤æ¦‚è¿°](#1-innodbå´©æºƒæ¢å¤æ¦‚è¿°)
2. [å´©æºƒæ¢å¤æ ¸å¿ƒè¿‡ç¨‹](#2-å´©æºƒæ¢å¤æ ¸å¿ƒè¿‡ç¨‹)
3. [Redoæ—¥å¿—é‡æ”¾æœºåˆ¶](#3-redoæ—¥å¿—é‡æ”¾æœºåˆ¶)
4. [Undoæ—¥å¿—å›æ»šå¤„ç†](#4-undoæ—¥å¿—å›æ»šå¤„ç†)
5. [æœªæäº¤äº‹åŠ¡å¤„ç†](#5-æœªæäº¤äº‹åŠ¡å¤„ç†)
6. [æ¢å¤æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#6-æ¢å¤æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
7. [æ¢å¤è¿‡ç¨‹ç›‘æ§ä¸å¼‚å¸¸å¤„ç†](#7-æ¢å¤è¿‡ç¨‹ç›‘æ§ä¸å¼‚å¸¸å¤„ç†)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ InnoDBå´©æºƒæ¢å¤æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯å´©æºƒæ¢å¤


**ğŸ’¡ åŸºæœ¬æ¦‚å¿µ**
```
å´©æºƒæ¢å¤ï¼šæ•°æ®åº“åœ¨å¼‚å¸¸å…³é—­åï¼Œé‡å¯æ—¶è‡ªåŠ¨è¿›è¡Œçš„æ•°æ®ä¸€è‡´æ€§æ¢å¤è¿‡ç¨‹

å½¢è±¡ç†è§£ï¼š
å°±åƒç”µè„‘çªç„¶æ–­ç”µï¼Œé‡å¯åç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥å’Œä¿®å¤æ–‡ä»¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   å´©æºƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   é‡å¯   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­£å¸¸è¿è¡Œ   â”‚ â”€â”€â”€â”€â”€â”€â†’ â”‚  æ•°æ®ä¸ä¸€è‡´  â”‚ â”€â”€â”€â”€â”€â”€â†’ â”‚  è‡ªåŠ¨æ¢å¤   â”‚
â”‚ äº‹åŠ¡å¤„ç†ä¸­  â”‚         â”‚  å†…å­˜ä¸¢å¤±   â”‚         â”‚  æ•°æ®ä¸€è‡´   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¸å¿ƒç›®æ ‡ï¼š
ğŸ”¸ å·²æäº¤äº‹åŠ¡çš„æ•°æ®ä¸èƒ½ä¸¢å¤±ï¼ˆæŒä¹…æ€§ï¼‰
ğŸ”¸ æœªæäº¤äº‹åŠ¡çš„æ•°æ®è¦å®Œå…¨æ’¤é”€ï¼ˆåŸå­æ€§ï¼‰
ğŸ”¸ æ•°æ®åº“çŠ¶æ€å¿…é¡»ä¿æŒä¸€è‡´ï¼ˆä¸€è‡´æ€§ï¼‰
```

### 1.2 å´©æºƒåœºæ™¯åˆ†æ


**âš¡ å¸¸è§å´©æºƒæƒ…å†µ**
```
ç¡¬ä»¶æ•…éšœï¼š
- æœåŠ¡å™¨çªç„¶æ–­ç”µ
- ç£ç›˜ç¡¬ä»¶æŸå
- å†…å­˜æ•…éšœå¯¼è‡´ç³»ç»Ÿé‡å¯

è½¯ä»¶é—®é¢˜ï¼š
- æ“ä½œç³»ç»Ÿå´©æºƒ
- MySQLè¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢
- ç½‘ç»œè¿æ¥ä¸­æ–­

äººä¸ºå› ç´ ï¼š
- å¼ºåˆ¶æ€æ­»è¿›ç¨‹ï¼ˆkill -9ï¼‰
- æœåŠ¡å™¨æ„å¤–é‡å¯
- å­˜å‚¨ç©ºé—´ä¸è¶³

å…³é”®ç†è§£ï¼š
âœ… å´©æºƒæ—¶å†…å­˜ä¸­çš„æ•°æ®ä¼šä¸¢å¤±
âœ… åªæœ‰å†™å…¥ç£ç›˜çš„æ•°æ®æ‰èƒ½ä¿è¯ä¸ä¸¢
âœ… äº‹åŠ¡å¯èƒ½å¤„äºå„ç§ä¸­é—´çŠ¶æ€
```

### 1.3 æ¢å¤çš„æ ¸å¿ƒæŒ‘æˆ˜


**ğŸš§ æŠ€æœ¯éš¾ç‚¹**
```
1ï¸âƒ£ æ•°æ®ä¸€è‡´æ€§é—®é¢˜
   - ç¼“å†²æ± ä¸­çš„ä¿®æ”¹å¯èƒ½æœªåˆ·ç›˜
   - äº‹åŠ¡å¯èƒ½æ‰§è¡Œäº†ä¸€åŠ
   - ç´¢å¼•å’Œæ•°æ®å¯èƒ½ä¸åŒæ­¥

2ï¸âƒ£ æ—¶é—´ç‚¹ç¡®å®šé—®é¢˜
   - å“ªäº›äº‹åŠ¡å·²ç»æäº¤ï¼Ÿ
   - å“ªäº›ä¿®æ”¹éœ€è¦é‡åšï¼Ÿ
   - å“ªäº›æ“ä½œéœ€è¦æ’¤é”€ï¼Ÿ

3ï¸âƒ£ æ€§èƒ½å¹³è¡¡é—®é¢˜
   - æ¢å¤é€Ÿåº¦ vs æ•°æ®å®‰å…¨
   - å†…å­˜ä½¿ç”¨ vs æ¢å¤æ•ˆç‡
   - æ—¥å¿—å¤§å° vs æ¢å¤æ—¶é—´

è§£å†³ç­–ç•¥ï¼š
WALï¼ˆWrite-Ahead Loggingï¼‰+ æ£€æŸ¥ç‚¹æœºåˆ¶
```

---

## 2. âš™ï¸ å´©æºƒæ¢å¤æ ¸å¿ƒè¿‡ç¨‹


### 2.1 æ¢å¤ç®—æ³•æ¦‚è§ˆ


**ğŸ“‹ ARIESæ¢å¤ç®—æ³•**
```
InnoDBä½¿ç”¨çš„ARIESï¼ˆAlgorithm for Recovery and Isolation Exploiting Semanticsï¼‰ç®—æ³•

ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ†æé˜¶æ®µ     â”‚ â†’ â”‚ é‡åšé˜¶æ®µ     â”‚ â†’ â”‚ æ’¤é”€é˜¶æ®µ     â”‚
â”‚ Analysis    â”‚   â”‚ Redo        â”‚   â”‚ Undo        â”‚
â”‚ ç¡®å®šæ¢å¤ç‚¹   â”‚   â”‚ é‡æ”¾æ—¥å¿—     â”‚   â”‚ å›æ»šäº‹åŠ¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¸å¿ƒåŸç†ï¼š
ğŸ”¸ å…ˆé‡åšæ‰€æœ‰å·²è®°å½•çš„æ“ä½œï¼ˆä¸ç®¡äº‹åŠ¡æ˜¯å¦æäº¤ï¼‰
ğŸ”¸ å†æ’¤é”€æ‰€æœ‰æœªæäº¤äº‹åŠ¡çš„æ“ä½œ
ğŸ”¸ ç¡®ä¿æ•°æ®åº“å›åˆ°ä¸€è‡´çŠ¶æ€
```

### 2.2 æ¢å¤è¿‡ç¨‹è¯¦ç»†æ­¥éª¤


**ğŸ“Š å®Œæ•´æ¢å¤æµç¨‹**
```
å¯åŠ¨æ¢å¤æµç¨‹ï¼š
MySQLå¯åŠ¨ â†’ æ£€æµ‹å¼‚å¸¸å…³é—­ â†’ å¼€å§‹å´©æºƒæ¢å¤

Step 1: åˆ†æé˜¶æ®µï¼ˆAnalysis Phaseï¼‰
â”œâ”€ è¯»å–æœ€åä¸€ä¸ªæ£€æŸ¥ç‚¹ä½ç½®
â”œâ”€ æ‰«æRedoæ—¥å¿—ç¡®å®šè„é¡µ
â”œâ”€ æ„å»ºæ´»è·ƒäº‹åŠ¡åˆ—è¡¨
â””â”€ ç¡®å®šæ¢å¤èµ·å§‹ç‚¹

Step 2: é‡åšé˜¶æ®µï¼ˆRedo Phaseï¼‰  
â”œâ”€ ä»æ¢å¤èµ·å§‹ç‚¹å¼€å§‹
â”œâ”€ é‡æ”¾æ‰€æœ‰Redoæ—¥å¿—è®°å½•
â”œâ”€ æ¢å¤æ‰€æœ‰å·²ä¿®æ”¹çš„é¡µé¢
â””â”€ ä¸åŒºåˆ†äº‹åŠ¡æ˜¯å¦æäº¤

Step 3: æ’¤é”€é˜¶æ®µï¼ˆUndo Phaseï¼‰
â”œâ”€ è¯†åˆ«æœªæäº¤çš„äº‹åŠ¡
â”œâ”€ ä½¿ç”¨Undoæ—¥å¿—å›æ»šæ“ä½œ
â”œâ”€ é‡Šæ”¾äº‹åŠ¡æŒæœ‰çš„é”
â””â”€ æ¸…ç†äº‹åŠ¡çŠ¶æ€ä¿¡æ¯
```

### 2.3 æ£€æŸ¥ç‚¹æœºåˆ¶


**ğŸ¯ æ£€æŸ¥ç‚¹çš„ä½œç”¨**
```
æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰ï¼šå®šæœŸå°†å†…å­˜ä¸­çš„è„é¡µåˆ·å†™åˆ°ç£ç›˜

ä½œç”¨æœºåˆ¶ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” åˆ·ç›˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†…å­˜è„é¡µ â”‚ â”€â”€â”€â†’ â”‚ ç£ç›˜æ–‡ä»¶ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘               â†‘
   æ ‡è®°æ£€æŸ¥ç‚¹      è®°å½•LSNä½ç½®

æ¢å¤æ—¶çš„ä»·å€¼ï¼š
âœ… ç¼©çŸ­æ¢å¤æ—¶é—´ï¼šåªéœ€ä»æœ€è¿‘æ£€æŸ¥ç‚¹å¼€å§‹
âœ… å‡å°‘æ—¥å¿—æ‰«æï¼šä¸ç”¨è¯»å–å…¨éƒ¨Redoæ—¥å¿—
âœ… é™ä½å†…å­˜éœ€æ±‚ï¼šå‡å°‘éœ€è¦é‡æ”¾çš„æ“ä½œæ•°é‡
```

**âš™ï¸ æ£€æŸ¥ç‚¹è§¦å‘æ¡ä»¶**
```sql
-- æŸ¥çœ‹æ£€æŸ¥ç‚¹ç›¸å…³å‚æ•°
SHOW VARIABLES LIKE '%checkpoint%';
SHOW VARIABLES LIKE '%flush%';

-- ä¸»è¦è§¦å‘æ—¶æœºï¼š
-- 1. å®šæ—¶è§¦å‘ï¼ˆinnodb_io_capacityå½±å“é¢‘ç‡ï¼‰
-- 2. Redoæ—¥å¿—ç©ºé—´ä¸è¶³
-- 3. è„é¡µæ¯”ä¾‹è¿‡é«˜ï¼ˆinnodb_max_dirty_pages_pctï¼‰
-- 4. æ‰‹åŠ¨æ‰§è¡ŒFLUSHå‘½ä»¤
```

---

## 3. ğŸ” Redoæ—¥å¿—é‡æ”¾æœºåˆ¶


### 3.1 Redoæ—¥å¿—çš„ä½œç”¨åŸç†


**ğŸ’¾ WALæœºåˆ¶æ ¸å¿ƒ**
```
Write-Ahead LoggingåŸåˆ™ï¼šä¿®æ”¹æ•°æ®å‰å…ˆè®°å½•æ—¥å¿—

å·¥ä½œæµç¨‹ï¼š
äº‹åŠ¡ä¿®æ”¹ â†’ å†™Redoæ—¥å¿— â†’ ä¿®æ”¹ç¼“å†²æ±  â†’ åå°åˆ·ç›˜
    â†“           â†“           â†“           â†“
  å¼€å§‹æ“ä½œ    ä¿è¯æŒä¹…æ€§   æé«˜æ€§èƒ½    å¼‚æ­¥å†™å…¥

å…³é”®ç‰¹ç‚¹ï¼š
ğŸ”¸ æ—¥å¿—å…ˆè¡Œï¼šæ—¥å¿—å¿…é¡»å…ˆäºæ•°æ®å†™å…¥ç£ç›˜
ğŸ”¸ é¡ºåºå†™å…¥ï¼šæ—¥å¿—ä»¥è¿½åŠ æ–¹å¼é¡ºåºå†™å…¥
ğŸ”¸ ç‰©ç†è®°å½•ï¼šè®°å½•é¡µé¢çš„ç‰©ç†ä¿®æ”¹
```

### 3.2 Redoæ—¥å¿—æ ¼å¼


**ğŸ“ æ—¥å¿—è®°å½•ç»“æ„**
```
Redoæ—¥å¿—è®°å½•æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ—¥å¿—å¤´    â”‚  ç©ºé—´ID     â”‚   é¡µå·      â”‚  æ•°æ®å†…å®¹   â”‚
â”‚  Header     â”‚ Space ID    â”‚  Page No    â”‚   Data      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç±»å‹ã€é•¿åº¦  â”‚  è¡¨ç©ºé—´æ ‡è¯†  â”‚  é¡µé¢ç¼–å·   â”‚  ä¿®æ”¹çš„æ•°æ®  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸»è¦å­—æ®µè¯´æ˜ï¼š
- LSNï¼šæ—¥å¿—åºåˆ—å·ï¼Œå…¨å±€å”¯ä¸€é€’å¢
- Typeï¼šæ“ä½œç±»å‹ï¼ˆæ’å…¥ã€åˆ é™¤ã€æ›´æ–°ç­‰ï¼‰
- Lengthï¼šè®°å½•é•¿åº¦
- Space IDï¼šè¡¨ç©ºé—´æ ‡è¯†
- Page Noï¼šé¡µé¢å·
- Dataï¼šå…·ä½“çš„ä¿®æ”¹å†…å®¹
```

### 3.3 é‡æ”¾è¿‡ç¨‹å®ç°


**ğŸ”„ æ—¥å¿—é‡æ”¾ç®—æ³•**
```
é‡æ”¾æ ¸å¿ƒé€»è¾‘ï¼š
for each redo_log_record in log_file:
    if record.lsn > page.lsn:  # é¡µé¢LSNå°äºæ—¥å¿—LSN
        apply_redo_record(record)  # åº”ç”¨æ—¥å¿—è®°å½•
        update_page_lsn(record.lsn)  # æ›´æ–°é¡µé¢LSN
    else:
        skip_record()  # è·³è¿‡å·²åº”ç”¨çš„è®°å½•

å…³é”®åˆ¤æ–­ï¼šé¡µé¢LSN vs æ—¥å¿—LSN
âœ… é¡µé¢LSN < æ—¥å¿—LSNï¼šéœ€è¦é‡æ”¾
âŒ é¡µé¢LSN â‰¥ æ—¥å¿—LSNï¼šå·²ç»åº”ç”¨ï¼Œè·³è¿‡
```

**ğŸ“Š é‡æ”¾æ€§èƒ½ä¼˜åŒ–**
```sql
-- æŸ¥çœ‹é‡æ”¾è¿›åº¦
SHOW ENGINE INNODB STATUS\G

-- å…³é”®ä¿¡æ¯ï¼š
-- Log sequence number: å½“å‰æ—¥å¿—LSN
-- Log flushed up to: å·²åˆ·ç›˜çš„æ—¥å¿—LSN  
-- Last checkpoint at: æœ€åæ£€æŸ¥ç‚¹LSN
-- Recovery progress: æ¢å¤è¿›åº¦ä¿¡æ¯

-- æ€§èƒ½è°ƒä¼˜å‚æ•°
SET GLOBAL innodb_io_capacity = 2000;        -- æé«˜IOèƒ½åŠ›
SET GLOBAL innodb_io_capacity_max = 4000;    -- æœ€å¤§IOèƒ½åŠ›
SET GLOBAL innodb_read_io_threads = 8;       -- è¯»çº¿ç¨‹æ•°
```

---

## 4. ğŸ”™ Undoæ—¥å¿—å›æ»šå¤„ç†


### 4.1 Undoæ—¥å¿—çš„åŸºæœ¬ä½œç”¨


**ğŸ¯ å›æ»šæœºåˆ¶åŸç†**
```
Undoæ—¥å¿—ï¼šè®°å½•äº‹åŠ¡ä¿®æ”¹å‰çš„åŸå§‹æ•°æ®ï¼Œç”¨äºå›æ»š

å·¥ä½œæœºåˆ¶ï¼š
ä¿®æ”¹å‰è®°å½• â†’ æ‰§è¡Œä¿®æ”¹ â†’ æäº¤æˆ–å›æ»š
     â†“           â†“          â†“
  ä¿å­˜åŸå€¼    æ›´æ–°æ–°å€¼   å†³å®šä¿ç•™å“ªä¸ª

åº”ç”¨åœºæ™¯ï¼š
1ï¸âƒ£ äº‹åŠ¡å›æ»šï¼šROLLBACKæ—¶æ¢å¤åŸå§‹æ•°æ®
2ï¸âƒ£ å´©æºƒæ¢å¤ï¼šå›æ»šæœªæäº¤äº‹åŠ¡
3ï¸âƒ£ MVCCæ”¯æŒï¼šä¸ºå…¶ä»–äº‹åŠ¡æä¾›å†å²ç‰ˆæœ¬
```

### 4.2 Undoæ—¥å¿—ç±»å‹


**ğŸ“‹ ä¸åŒæ“ä½œçš„Undoè®°å½•**
```
INSERTæ“ä½œçš„Undoï¼š
- è®°å½•ç±»å‹ï¼šTRX_UNDO_INSERT_REC
- è®°å½•å†…å®¹ï¼šä¸»é”®ä¿¡æ¯
- å›æ»šæ“ä½œï¼šDELETEå¯¹åº”è®°å½•

UPDATEæ“ä½œçš„Undoï¼š
- è®°å½•ç±»å‹ï¼šTRX_UNDO_UPD_EXIST_REC  
- è®°å½•å†…å®¹ï¼šä¿®æ”¹å‰çš„å®Œæ•´è¡Œæ•°æ®
- å›æ»šæ“ä½œï¼šè¿˜åŸä¸ºåŸå§‹å€¼

DELETEæ“ä½œçš„Undoï¼š
- è®°å½•ç±»å‹ï¼šTRX_UNDO_DEL_MARK_REC
- è®°å½•å†…å®¹ï¼šè¢«åˆ é™¤çš„å®Œæ•´è¡Œ
- å›æ»šæ“ä½œï¼šå–æ¶ˆåˆ é™¤æ ‡è®°ï¼Œæ¢å¤æ•°æ®
```

### 4.3 å›æ»šå®ç°è¿‡ç¨‹


**ğŸ”„ äº‹åŠ¡å›æ»šç®—æ³•**
```
å›æ»šå¤„ç†æµç¨‹ï¼š
1. è·å–äº‹åŠ¡çš„Undoæ—¥å¿—é“¾è¡¨
2. ä»æœ€æ–°çš„Undoè®°å½•å¼€å§‹
3. æŒ‰é€†åºåº”ç”¨æ¯ä¸ªUndoæ“ä½œ
4. é‡Šæ”¾äº‹åŠ¡ç›¸å…³èµ„æº

ä»£ç é€»è¾‘ï¼š
transaction = get_active_transaction(trx_id)
undo_list = transaction.undo_log_list

while undo_list.has_more():
    undo_record = undo_list.get_prev()  # é€†åºè·å–
    apply_undo_operation(undo_record)   # åº”ç”¨å›æ»š
    
release_transaction_locks(transaction)
cleanup_transaction_state(transaction)
```

**âš ï¸ å›æ»šæ³¨æ„äº‹é¡¹**
```
å›æ»šçš„åŸå­æ€§ï¼š
- å›æ»šæ“ä½œæœ¬èº«ä¹Ÿä¼šç”ŸæˆRedoæ—¥å¿—
- ç¡®ä¿å›æ»šè¿‡ç¨‹ä¸ä¼šå› ä¸ºå†æ¬¡å´©æºƒè€Œä¸­æ–­
- å›æ»šå®Œæˆåæ‰é‡Šæ”¾é”èµ„æº

æ€§èƒ½è€ƒè™‘ï¼š
- å¤§äº‹åŠ¡å›æ»šå¯èƒ½è€—æ—¶å¾ˆé•¿
- å›æ»šè¿‡ç¨‹ä¼šé˜»å¡å…¶ä»–æ“ä½œ
- å»ºè®®é¿å…é•¿æ—¶é—´è¿è¡Œçš„å¤§äº‹åŠ¡

ç›‘æ§å›æ»šï¼š
SHOW ENGINE INNODB STATUS\G
-- æŸ¥çœ‹ "TRANSACTIONS" éƒ¨åˆ†çš„å›æ»šä¿¡æ¯
```

---

## 5. ğŸš« æœªæäº¤äº‹åŠ¡å¤„ç†


### 5.1 è¯†åˆ«æœªæäº¤äº‹åŠ¡


**ğŸ” äº‹åŠ¡çŠ¶æ€åˆ¤æ–­**
```
äº‹åŠ¡çŠ¶æ€ç±»å‹ï¼š
- TRX_STATE_ACTIVEï¼šæ´»è·ƒçŠ¶æ€ï¼Œæ­£åœ¨æ‰§è¡Œ
- TRX_STATE_PREPAREDï¼šå·²å‡†å¤‡ï¼Œç­‰å¾…æäº¤å†³å®š
- TRX_STATE_COMMITTED_IN_MEMORYï¼šå·²æäº¤ï¼Œä½†æœªæŒä¹…åŒ–
- TRX_STATE_NOT_STARTEDï¼šæœªå¼€å§‹

å´©æºƒæ¢å¤æ—¶çš„åˆ¤æ–­ï¼š
if transaction.state == TRX_STATE_ACTIVE:
    add_to_rollback_list(transaction)  # éœ€è¦å›æ»š
elif transaction.state == TRX_STATE_PREPARED:
    check_binlog_commit_status()       # æ£€æŸ¥äºŒè¿›åˆ¶æ—¥å¿—
elif transaction.state == TRX_STATE_COMMITTED_IN_MEMORY:
    complete_commit_process()          # å®Œæˆæäº¤
```

### 5.2 åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†


**ğŸŒ XAäº‹åŠ¡æ¢å¤**
```sql
-- æŸ¥çœ‹å¤„äºPREPAREDçŠ¶æ€çš„XAäº‹åŠ¡
XA RECOVER;

-- å¯èƒ½çš„å¤„ç†æ–¹å¼ï¼š
XA COMMIT 'xid';    -- æäº¤äº‹åŠ¡
XA ROLLBACK 'xid';  -- å›æ»šäº‹åŠ¡

-- æ¢å¤æ—¶çš„å†³ç­–é€»è¾‘ï¼š
-- 1. æ£€æŸ¥äº‹åŠ¡ç®¡ç†å™¨çš„å†³å®š
-- 2. å¦‚æœæ— æ³•ç¡®å®šï¼Œé€šå¸¸é€‰æ‹©å›æ»š
-- 3. ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¼˜å…ˆ
```

### 5.3 é•¿äº‹åŠ¡å¤„ç†ç­–ç•¥


**â° å¤§äº‹åŠ¡å›æ»šä¼˜åŒ–**
```
é—®é¢˜ï¼šé•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡å›æ»šè€—æ—¶å·¨å¤§

ä¼˜åŒ–ç­–ç•¥ï¼š
1ï¸âƒ£ å¹¶è¡Œå›æ»šï¼š
   - åˆ©ç”¨å¤šä¸ªçº¿ç¨‹å¹¶è¡Œå¤„ç†Undoè®°å½•
   - æ³¨æ„ä¿æŒæ“ä½œçš„é€»è¾‘é¡ºåº

2ï¸âƒ£ å¢é‡å›æ»šï¼š
   - æŒ‰æ‰¹æ¬¡å¤„ç†Undoè®°å½•
   - é¿å…é•¿æ—¶é—´é˜»å¡å…¶ä»–æ“ä½œ

3ï¸âƒ£ èµ„æºæ§åˆ¶ï¼š
   - é™åˆ¶å›æ»šè¿‡ç¨‹çš„èµ„æºä½¿ç”¨
   - å¹³è¡¡æ¢å¤é€Ÿåº¦å’Œç³»ç»Ÿå“åº”

é…ç½®ç¤ºä¾‹ï¼š
innodb_rollback_segments = 128        -- å›æ»šæ®µæ•°é‡
innodb_undo_log_truncate = ON         -- è‡ªåŠ¨æˆªæ–­Undoæ—¥å¿—
innodb_max_undo_log_size = 1G         -- Undoæ—¥å¿—æœ€å¤§å¤§å°
```

---

## 6. âš¡ æ¢å¤æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 6.1 IOæ€§èƒ½ä¼˜åŒ–


**ğŸ’¾ ç£ç›˜IOä¼˜åŒ–**
```sql
-- å…³é”®æ€§èƒ½å‚æ•°
SET GLOBAL innodb_io_capacity = 2000;          -- åŸºç¡€IOèƒ½åŠ›
SET GLOBAL innodb_io_capacity_max = 4000;      -- å³°å€¼IOèƒ½åŠ›
SET GLOBAL innodb_read_io_threads = 8;         -- è¯»çº¿ç¨‹æ•°
SET GLOBAL innodb_write_io_threads = 8;        -- å†™çº¿ç¨‹æ•°

-- åˆ·ç›˜ç­–ç•¥ä¼˜åŒ–
SET GLOBAL innodb_flush_method = 'O_DIRECT';   -- é¿å…åŒé‡ç¼“å†²
SET GLOBAL innodb_flush_neighbors = 0;         -- SSDç¯å¢ƒä¸‹å…³é—­
```

**ğŸ“ˆ IOä¼˜åŒ–åŸç†**
```
é¡ºåºIO vs éšæœºIOï¼š
- Redoæ—¥å¿—ï¼šé¡ºåºå†™å…¥ï¼Œæ€§èƒ½å¥½
- æ•°æ®é¡µé¢ï¼šéšæœºIOï¼Œç›¸å¯¹è¾ƒæ…¢
- ä¼˜åŒ–ç­–ç•¥ï¼šæ‰¹é‡åˆ·ç›˜ï¼Œå‡å°‘éšæœºIO

é¢„è¯»ä¼˜åŒ–ï¼š
- æ¢å¤æ—¶å¯èƒ½éœ€è¦è¯»å–å¤§é‡é¡µé¢
- å¼€å¯é¢„è¯»æœºåˆ¶æé«˜æ•ˆç‡
- å¹³è¡¡é¢„è¯»é‡å’Œå†…å­˜ä½¿ç”¨
```

### 6.2 å†…å­˜ä½¿ç”¨ä¼˜åŒ–


**ğŸ§  ç¼“å†²æ± é…ç½®**
```sql
-- ç¼“å†²æ± å¤§å°ï¼ˆé€šå¸¸è®¾ä¸ºç‰©ç†å†…å­˜çš„70-80%ï¼‰
SET GLOBAL innodb_buffer_pool_size = '8G';

-- ç¼“å†²æ± å®ä¾‹æ•°ï¼ˆå¤§å†…å­˜ç¯å¢ƒä¸‹åˆ†ç‰‡ç®¡ç†ï¼‰
SET GLOBAL innodb_buffer_pool_instances = 8;

-- é¢„çƒ­ç¼“å†²æ± ï¼ˆæ¢å¤åå¿«é€ŸåŠ è½½çƒ­æ•°æ®ï¼‰
SET GLOBAL innodb_buffer_pool_dump_at_shutdown = ON;
SET GLOBAL innodb_buffer_pool_load_at_startup = ON;
```

### 6.3 å¹¶è¡Œæ¢å¤ä¼˜åŒ–


**ğŸ”€ å¤šçº¿ç¨‹æ¢å¤**
```
å¹¶è¡Œå¤„ç†ç­–ç•¥ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redoçº¿ç¨‹1  â”‚  â”‚  Redoçº¿ç¨‹2  â”‚  â”‚  Redoçº¿ç¨‹3  â”‚
â”‚  å¤„ç†è¡¨A    â”‚  â”‚  å¤„ç†è¡¨B    â”‚  â”‚  å¤„ç†è¡¨C    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                â†“                â†“
   å¹¶è¡Œé‡æ”¾æ—¥å¿—è®°å½•ï¼Œæé«˜æ¢å¤æ•ˆç‡

å®ç°è¦ç‚¹ï¼š
ğŸ”¸ æŒ‰è¡¨æˆ–é¡µé¢åˆ†åŒºå¹¶è¡Œ
ğŸ”¸ é¿å…å¹¶å‘å†²çªå’Œæ­»é”
ğŸ”¸ ä¿æŒä¾èµ–å…³ç³»çš„æ­£ç¡®æ€§

é…ç½®å‚æ•°ï¼š
innodb_recovery_update_relay_log = ON  -- å¹¶è¡Œåº”ç”¨æ—¥å¿—
innodb_parallel_read_threads = 4       -- å¹¶è¡Œè¯»å–çº¿ç¨‹
```

---

## 7. ğŸ“Š æ¢å¤è¿‡ç¨‹ç›‘æ§ä¸å¼‚å¸¸å¤„ç†


### 7.1 æ¢å¤è¿‡ç¨‹ç›‘æ§


**ğŸ“ˆ ç›‘æ§å…³é”®æŒ‡æ ‡**
```sql
-- æŸ¥çœ‹æ¢å¤çŠ¶æ€
SHOW ENGINE INNODB STATUS\G

-- å…³é”®ç›‘æ§ä¿¡æ¯ï¼š
-- 1. æ¢å¤è¿›åº¦
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE 
FROM performance_schema.global_status 
WHERE VARIABLE_NAME LIKE '%recovery%';

-- 2. æ—¥å¿—çŠ¶æ€
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE
FROM performance_schema.global_status 
WHERE VARIABLE_NAME LIKE '%log%';
```

**ğŸ” æ¢å¤è¿›åº¦è·Ÿè¸ª**
```
ç›‘æ§ç»´åº¦ï¼š

æ—¶é—´ç»´åº¦ï¼š
- æ¢å¤å¼€å§‹æ—¶é—´
- å½“å‰è¿›åº¦ç™¾åˆ†æ¯”  
- é¢„è®¡å®Œæˆæ—¶é—´

æ•°æ®ç»´åº¦ï¼š
- å·²å¤„ç†æ—¥å¿—é‡
- å‰©ä½™æ—¥å¿—é‡
- å¤„ç†é€Ÿåº¦ï¼ˆMB/sï¼‰

èµ„æºç»´åº¦ï¼š
- CPUä½¿ç”¨ç‡
- IOåˆ©ç”¨ç‡
- å†…å­˜ä½¿ç”¨æƒ…å†µ
```

### 7.2 å¸¸è§å¼‚å¸¸å¤„ç†


**â— æ¢å¤å¼‚å¸¸æƒ…å†µ**
```
1ï¸âƒ£ æ—¥å¿—æ–‡ä»¶æŸå
é”™è¯¯ä¿¡æ¯ï¼šInnoDB: Log file corruption detected
å¤„ç†æ–¹æ³•ï¼š
- å°è¯•ä»å¤‡ä»½æ¢å¤
- ä½¿ç”¨ innodb_force_recovery å¼ºåˆ¶å¯åŠ¨
- é‡å»ºå®ä¾‹ï¼ˆæ•°æ®å¯èƒ½ä¸¢å¤±ï¼‰

2ï¸âƒ£ æ•°æ®æ–‡ä»¶æŸå  
é”™è¯¯ä¿¡æ¯ï¼šInnoDB: Tablespace corruption detected
å¤„ç†æ–¹æ³•ï¼š
- æ£€æŸ¥ç¡¬ä»¶æ•…éšœ
- ä»å¤‡ä»½æ¢å¤å—å½±å“çš„è¡¨
- é‡å»ºæŸåçš„è¡¨ç©ºé—´

3ï¸âƒ£ æ¢å¤è¶…æ—¶
ç°è±¡ï¼šæ¢å¤è¿‡ç¨‹é•¿æ—¶é—´æ— å“åº”
å¤„ç†æ–¹æ³•ï¼š
- æ£€æŸ¥IOæ€§èƒ½
- è°ƒæ•´æ¢å¤å‚æ•°
- è€ƒè™‘ç¡¬ä»¶å‡çº§
```

**ğŸ› ï¸ å¼ºåˆ¶æ¢å¤æ¨¡å¼**
```sql
-- åœ¨my.cnfä¸­è®¾ç½®å¼ºåˆ¶æ¢å¤çº§åˆ«
[mysqld]
innodb_force_recovery = 1

-- æ¢å¤çº§åˆ«è¯´æ˜ï¼š
-- 0: æ­£å¸¸æ¨¡å¼
-- 1: å¿½ç•¥æŸåçš„é¡µé¢  
-- 2: é˜»æ­¢åå°çº¿ç¨‹è¿è¡Œ
-- 3: ä¸è¿›è¡Œäº‹åŠ¡å›æ»š
-- 4: ä¸è¿›è¡Œæ’å…¥ç¼“å†²åˆå¹¶
-- 5: ä¸æŸ¥çœ‹æ’¤é”€æ—¥å¿—
-- 6: ä¸è¿›è¡Œå‰æ»šæ“ä½œ

-- âš ï¸ è­¦å‘Šï¼šçº§åˆ«è¶Šé«˜æ•°æ®ä¸¢å¤±é£é™©è¶Šå¤§
```

### 7.3 é¢„é˜²æ€§æªæ–½


**ğŸ›¡ï¸ é™ä½æ¢å¤é£é™©**
```
æ—¥å¸¸ç»´æŠ¤ï¼š
âœ… å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶çŠ¶æ€
âœ… ç›‘æ§ç£ç›˜ç©ºé—´å’Œå¥åº·çŠ¶æ€  
âœ… é…ç½®åˆé€‚çš„æ£€æŸ¥ç‚¹é¢‘ç‡
âœ… å®šæœŸæµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹

æ¶æ„ä¼˜åŒ–ï¼š
âœ… ä½¿ç”¨RAIDæé«˜å¯é æ€§
âœ… é…ç½®åŒæœºçƒ­å¤‡
âœ… å®æ–½å®šæœŸå¤‡ä»½ç­–ç•¥
âœ… ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨

å‚æ•°è°ƒä¼˜ï¼š
innodb_log_file_size = 512M         -- é€‚å½“çš„æ—¥å¿—æ–‡ä»¶å¤§å°
innodb_log_files_in_group = 2       -- æ—¥å¿—æ–‡ä»¶ç»„æ•°é‡
innodb_flush_log_at_trx_commit = 1  -- ä¸¥æ ¼çš„æŒä¹…æ€§ä¿è¯
```

---

## 8. ğŸ¯ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å´©æºƒæ¢å¤æœ¬è´¨ï¼šé€šè¿‡æ—¥å¿—é‡æ”¾å’Œäº‹åŠ¡å›æ»šæ¢å¤æ•°æ®ä¸€è‡´æ€§
ğŸ”¸ ARIESç®—æ³•ï¼šåˆ†æâ†’é‡åšâ†’æ’¤é”€çš„ä¸‰é˜¶æ®µæ¢å¤æµç¨‹
ğŸ”¸ WALæœºåˆ¶ï¼šæ—¥å¿—å…ˆè¡Œå†™å…¥ï¼Œä¿è¯æ•°æ®æŒä¹…æ€§
ğŸ”¸ æ£€æŸ¥ç‚¹ä½œç”¨ï¼šç¼©çŸ­æ¢å¤æ—¶é—´ï¼Œå‡å°‘æ—¥å¿—æ‰«æé‡
ğŸ”¸ äº‹åŠ¡çŠ¶æ€ï¼šåŒºåˆ†å·²æäº¤ã€æœªæäº¤ã€å‡†å¤‡çŠ¶æ€çš„ä¸åŒå¤„ç†
```

### 8.2 å…³é”®æŠ€æœ¯è¦ç‚¹


**ğŸ”¹ æ¢å¤è¿‡ç¨‹æ ¸å¿ƒåŸç†**
```
é‡åšé˜¶æ®µï¼ˆRedoï¼‰ï¼š
- é‡æ”¾æ‰€æœ‰æ—¥å¿—è®°å½•ï¼Œä¸ç®¡äº‹åŠ¡æ˜¯å¦æäº¤
- åˆ©ç”¨LSNæ¯”è¾ƒé¿å…é‡å¤åº”ç”¨
- æ¢å¤åˆ°å´©æºƒå‰çš„æœ€æ–°çŠ¶æ€

æ’¤é”€é˜¶æ®µï¼ˆUndoï¼‰ï¼š
- è¯†åˆ«å¹¶å›æ»šæ‰€æœ‰æœªæäº¤äº‹åŠ¡
- æŒ‰é€†åºåº”ç”¨Undoæ—¥å¿—è®°å½•
- ç¡®ä¿äº‹åŠ¡çš„åŸå­æ€§

è®°å¿†è¦ç‚¹ï¼šå…ˆæ¢å¤å†æ¸…ç†ï¼Œå®å¤šå‹¿å°‘ï¼Œç¡®ä¿ä¸€è‡´
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
```
IOä¼˜åŒ–ï¼š
- æé«˜ç£ç›˜IOèƒ½åŠ›é…ç½®
- ä½¿ç”¨SSDæå‡éšæœºè¯»æ€§èƒ½
- ä¼˜åŒ–åˆ·ç›˜ç­–ç•¥å’Œé¢‘ç‡

å¹¶è¡Œä¼˜åŒ–ï¼š
- å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†æ—¥å¿—
- åˆ†åŒºå¤„ç†é¿å…å†²çª
- å¹³è¡¡å¹¶å‘åº¦å’Œèµ„æºç«äº‰

å†…å­˜ä¼˜åŒ–ï¼š
- åˆç†é…ç½®ç¼“å†²æ± å¤§å°
- å¯ç”¨ç¼“å†²æ± é¢„çƒ­æœºåˆ¶
- æ§åˆ¶å†…å­˜ä½¿ç”¨é¿å…OOM
```

**ğŸ”¹ ç›‘æ§ä¸å¼‚å¸¸å¤„ç†**
```
ç›‘æ§é‡ç‚¹ï¼š
- æ¢å¤è¿›åº¦å’Œè€—æ—¶
- èµ„æºä½¿ç”¨æƒ…å†µ
- é”™è¯¯æ—¥å¿—ä¿¡æ¯

å¼‚å¸¸å¤„ç†ï¼š
- åˆ†çº§å¤„ç†ä¸åŒä¸¥é‡ç¨‹åº¦çš„é”™è¯¯
- å¼ºåˆ¶æ¢å¤æ¨¡å¼çš„è°¨æ…ä½¿ç”¨
- å¤‡ä»½æ¢å¤çš„åº”æ€¥é¢„æ¡ˆ

é¢„é˜²æªæ–½ï¼š
- ç¡¬ä»¶å¯é æ€§ä¿éšœ
- å®šæœŸå¤‡ä»½éªŒè¯
- å‚æ•°åˆç†é…ç½®
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ—ºï¸ è¿ç»´æœ€ä½³å®è·µ**
```
æ—¥å¸¸è¿ç»´ï¼š
1ï¸âƒ£ ç›‘æ§æ¢å¤ç›¸å…³æŒ‡æ ‡
2ï¸âƒ£ å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¥åº·çŠ¶æ€
3ï¸âƒ£ ä¼˜åŒ–æ£€æŸ¥ç‚¹é¢‘ç‡å’ŒIOå‚æ•°
4ï¸âƒ£ å»ºç«‹å®Œå–„çš„å¤‡ä»½æ¢å¤æµç¨‹

æ•…éšœå¤„ç†ï¼š
1ï¸âƒ£ å¿«é€Ÿåˆ¤æ–­æ¢å¤ç±»å‹å’Œé¢„æœŸæ—¶é—´
2ï¸âƒ£ ç›‘æ§æ¢å¤è¿›åº¦å’Œèµ„æºä½¿ç”¨
3ï¸âƒ£ å‡†å¤‡åº”æ€¥æ–¹æ¡ˆå’Œå›é€€ç­–ç•¥
4ï¸âƒ£ è®°å½•é—®é¢˜åŸå› å’Œå¤„ç†è¿‡ç¨‹

æ€§èƒ½è°ƒä¼˜ï¼š
1ï¸âƒ£ æ ¹æ®ç¡¬ä»¶é…ç½®ä¼˜åŒ–å‚æ•°
2ï¸âƒ£ å¹³è¡¡æ¢å¤é€Ÿåº¦å’Œç³»ç»Ÿè´Ÿè½½
3ï¸âƒ£ æµ‹è¯•éªŒè¯ä¼˜åŒ–æ•ˆæœ
4ï¸âƒ£ å»ºç«‹åŸºçº¿å’Œç›‘æ§ä½“ç³»
```

**âš ï¸ å¸¸è§è¯¯åŒºé¿å…**
```
âŒ è¯¯åŒº1ï¼šè®¤ä¸ºæ¢å¤æ—¶é—´åªå’Œæ•°æ®é‡ç›¸å…³
âœ… æ­£ç¡®ï¼šæ¢å¤æ—¶é—´ä¸»è¦å–å†³äºæ—¥å¿—é‡å’ŒIOæ€§èƒ½

âŒ è¯¯åŒº2ï¼šç›²ç›®æé«˜å¼ºåˆ¶æ¢å¤çº§åˆ«
âœ… æ­£ç¡®ï¼šåº”è¯¥å…ˆåˆ†æé—®é¢˜åŸå› ï¼Œè¯„ä¼°æ•°æ®ä¸¢å¤±é£é™©

âŒ è¯¯åŒº3ï¼šå¿½è§†æ¢å¤è¿‡ç¨‹çš„ç›‘æ§
âœ… æ­£ç¡®ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸

âŒ è¯¯åŒº4ï¼šæ¢å¤å®Œæˆåç«‹å³æŠ•å…¥ç”Ÿäº§
âœ… æ­£ç¡®ï¼šéœ€è¦å……åˆ†éªŒè¯æ•°æ®å®Œæ•´æ€§å’Œä¸šåŠ¡åŠŸèƒ½
```

### 8.4 æ ¸å¿ƒçŸ¥è¯†è®°å¿†


**ğŸ¯ å…³é”®è®°å¿†ç‚¹**
> InnoDBå´©æºƒæ¢å¤æ˜¯ä¿è¯æ•°æ®ACIDç‰¹æ€§çš„æœ€åä¸€é“é˜²çº¿ï¼Œç†è§£å…¶åŸç†å¯¹æ•°æ®åº“è¿ç»´è‡³å…³é‡è¦ã€‚

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> å´©æºƒæ¢å¤ä¸‰æ­¥èµ°ï¼šåˆ†æé‡åšå†æ’¤é”€  
> æ—¥å¿—å…ˆè¡ŒWALå¥½ï¼šé‡æ”¾å›æ»šä¿ä¸€è‡´  
> æ£€æŸ¥ç‚¹æ¥å¸®å¿™ï¼šç¼©çŸ­æ—¶é—´ææ•ˆç‡  
> ç›‘æ§ä¼˜åŒ–ä¸å¯å°‘ï¼šé¢„é˜²èƒœè¿‡æ•‘ç«æ€¥