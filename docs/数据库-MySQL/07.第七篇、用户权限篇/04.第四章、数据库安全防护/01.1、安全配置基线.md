---
title: 1ã€å®‰å…¨é…ç½®åŸºçº¿
---
## ğŸ“š ç›®å½•

1. [å®‰å…¨å¨èƒæ¦‚è¿°](#1-å®‰å…¨å¨èƒæ¦‚è¿°)
2. [å®‰å…¨é…ç½®åŸºçº¿](#2-å®‰å…¨é…ç½®åŸºçº¿)
3. [è´¦æˆ·å®‰å…¨ç­–ç•¥](#3-è´¦æˆ·å®‰å…¨ç­–ç•¥)
4. [ç½‘ç»œè®¿é—®æ§åˆ¶](#4-ç½‘ç»œè®¿é—®æ§åˆ¶)
5. [æ–‡ä»¶æƒé™é…ç½®](#5-æ–‡ä»¶æƒé™é…ç½®)
6. [æ—¥å¿—å®‰å…¨é…ç½®](#6-æ—¥å¿—å®‰å…¨é…ç½®)
7. [å®‰å…¨æ£€æŸ¥è‡ªåŠ¨åŒ–](#7-å®‰å…¨æ£€æŸ¥è‡ªåŠ¨åŒ–)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›¡ï¸ å®‰å…¨å¨èƒæ¦‚è¿°


### 1.1 æ•°æ®åº“å®‰å…¨å¨èƒåˆ†ç±»


æ•°æ®åº“é¢ä¸´çš„å®‰å…¨å¨èƒå°±åƒæˆ¿å­é¢ä¸´çš„å„ç§é£é™©ä¸€æ ·ï¼Œéœ€è¦åˆ†ç±»é˜²èŒƒã€‚

**ğŸ”¸ å¤–éƒ¨å¨èƒ**
```
ç½‘ç»œæ”»å‡»ï¼š
â€¢ SQLæ³¨å…¥æ”»å‡» - æ¶æ„SQLä»£ç æ³¨å…¥
â€¢ æš´åŠ›ç ´è§£ - å¯†ç çŒœæµ‹æ”»å‡»
â€¢ æ‹’ç»æœåŠ¡ - æ¶ˆè€—ç³»ç»Ÿèµ„æº
â€¢ æ•°æ®çªƒå– - æœªæˆæƒæ•°æ®è®¿é—®

æ¸—é€æ”»å‡»ï¼š
â€¢ ç«¯å£æ‰«æ - å¯»æ‰¾å¼€æ”¾ç«¯å£
â€¢ æƒé™æå‡ - è·å–æ›´é«˜æƒé™
â€¢ åé—¨æ¤å…¥ - æŒä¹…åŒ–è®¿é—®
```

**ğŸ”¸ å†…éƒ¨å¨èƒ**
```
äººå‘˜é£é™©ï¼š
â€¢ è¯¯æ“ä½œ - æ„å¤–åˆ é™¤é‡è¦æ•°æ®
â€¢ æƒé™æ»¥ç”¨ - è¶…è¶ŠèŒè´£èŒƒå›´è®¿é—®
â€¢ å†…éƒ¨æ³„éœ² - æ•…æ„æ•°æ®å¤–æ³„
â€¢ ç¦»èŒé£é™© - è´¦æˆ·æœªåŠæ—¶æ¸…ç†

ç³»ç»Ÿé£é™©ï¼š
â€¢ é…ç½®é”™è¯¯ - å®‰å…¨å‚æ•°è®¾ç½®ä¸å½“
â€¢ è¡¥ä¸æ»å - æœªåŠæ—¶æ›´æ–°å®‰å…¨è¡¥ä¸
â€¢ å¤‡ä»½æ³„éœ² - å¤‡ä»½æ–‡ä»¶ç®¡ç†ä¸å½“
```

### 1.2 æ”»å‡»æ‰‹æ®µæ¼”å˜è¶‹åŠ¿


ç°ä»£æ•°æ®åº“æ”»å‡»è¶Šæ¥è¶Šæ™ºèƒ½åŒ–ï¼Œå°±åƒç—…æ¯’ä¼šå˜å¼‚ä¸€æ ·ã€‚

**ğŸ“ˆ æ”»å‡»ç‰¹ç‚¹å˜åŒ–**
```
ä¼ ç»Ÿæ”»å‡»ï¼š
å•ä¸€æ‰‹æ®µ â†’ ç»„åˆæ”»å‡»
æ‰‹å·¥æ“ä½œ â†’ è‡ªåŠ¨åŒ–å·¥å…·
ç›´æ¥æ”»å‡» â†’ è¿‚å›æ¸—é€

ç°ä»£æ”»å‡»ï¼š
â€¢ APTæ”»å‡» - é«˜çº§æŒç»­å¨èƒ
â€¢ é›¶æ—¥æ¼æ´ - æœªçŸ¥å®‰å…¨æ¼æ´
â€¢ ç¤¾ä¼šå·¥ç¨‹ - å¿ƒç†æ¬ºéª—æ‰‹æ®µ
â€¢ ä¾›åº”é“¾æ”»å‡» - ç¬¬ä¸‰æ–¹ç»„ä»¶æ¼æ´
```

---

## 2. âš™ï¸ å®‰å…¨é…ç½®åŸºçº¿


### 2.1 CISåŸºå‡†é…ç½®æ ‡å‡†


CISï¼ˆCenter for Internet Securityï¼‰åŸºå‡†å°±åƒå»ºç­‘å®‰å…¨è§„èŒƒï¼Œæä¾›äº†æƒå¨çš„å®‰å…¨é…ç½®æ ‡å‡†ã€‚

**ğŸŸ¢ åŸºç¡€å¿…ä¼š**ï¼šä»€ä¹ˆæ˜¯CISåŸºå‡†
```
CISåŸºå‡†å®šä¹‰ï¼š
â€¢ å›½é™…å…¬è®¤çš„å®‰å…¨é…ç½®æ ‡å‡†
â€¢ æ¶µç›–æ“ä½œç³»ç»Ÿã€æ•°æ®åº“ã€ç½‘ç»œè®¾å¤‡
â€¢ åŸºäºå®æˆ˜ç»éªŒå’Œå¨èƒæƒ…æŠ¥
â€¢ åˆ†ä¸ºLevel 1ï¼ˆåŸºç¡€ï¼‰å’ŒLevel 2ï¼ˆé«˜çº§ï¼‰
```

### 2.2 æ ¸å¿ƒå®‰å…¨å‚æ•°è¯¦è§£


è¿™äº›å‚æ•°å°±åƒæˆ¿é—¨çš„é”ï¼Œè®¾ç½®ä¸å½“å°±ä¼šç•™ä¸‹å®‰å…¨éšæ‚£ã€‚

**ğŸ”¸ å…³é”®å®‰å…¨å‚æ•°**
```sql
-- ç¦ç”¨æœ¬åœ°æ–‡ä»¶åŠ è½½ï¼ˆé˜²æ­¢æ–‡ä»¶è¯»å–æ”»å‡»ï¼‰
SET GLOBAL local_infile = OFF;

-- ç¦ç”¨ç¬¦å·é“¾æ¥ï¼ˆé˜²æ­¢æ–‡ä»¶ç³»ç»Ÿæ”»å‡»ï¼‰
SET GLOBAL symbolic_links = OFF;

-- å¯ç”¨å®‰å…¨æ–‡ä»¶æƒé™æ“ä½œ
SET GLOBAL secure_file_priv = '/var/lib/mysql-files/';

-- è®¾ç½®æœ€å¤§è¿æ¥æ•°ï¼ˆé˜²æ­¢èµ„æºè€—å°½ï¼‰
SET GLOBAL max_connections = 200;

-- å¯ç”¨æŸ¥è¯¢æ—¥å¿—ï¼ˆè®°å½•æ‰€æœ‰SQLæ“ä½œï¼‰
SET GLOBAL general_log = ON;
SET GLOBAL general_log_file = '/var/log/mysql/general.log';
```

**ğŸ’¡ å‚æ•°å®‰å…¨é…ç½®å»ºè®®**
```
local_infile = OFFï¼š
ä½œç”¨ï¼šç¦æ­¢LOAD DATA LOCAL INFILEå‘½ä»¤
é£é™©ï¼šå¯èƒ½è¢«ç”¨æ¥è¯»å–æœåŠ¡å™¨æ–‡ä»¶
å»ºè®®ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»å…³é—­

symbolic_links = OFFï¼š
ä½œç”¨ï¼šç¦ç”¨ç¬¦å·é“¾æ¥æ”¯æŒ
é£é™©ï¼šå¯èƒ½ç»•è¿‡æ–‡ä»¶ç³»ç»Ÿæƒé™
å»ºè®®ï¼šLinuxç¯å¢ƒå»ºè®®å…³é—­

secure_file_privï¼š
ä½œç”¨ï¼šé™åˆ¶æ–‡ä»¶æ“ä½œç›®å½•
è®¾ç½®ï¼šæŒ‡å®šå®‰å…¨ç›®å½•æˆ–è®¾ä¸ºNULLå®Œå…¨ç¦ç”¨
å»ºè®®ï¼šè®¾ç½®ä¸“ç”¨å®‰å…¨ç›®å½•
```

### 2.3 å±é™©å‚æ•°è¯†åˆ«æ’æŸ¥


å°±åƒä½“æ£€è¦é‡ç‚¹æ£€æŸ¥é«˜å±æŒ‡æ ‡ï¼Œæ•°æ®åº“ä¹Ÿæœ‰éœ€è¦é‡ç‚¹å…³æ³¨çš„å±é™©å‚æ•°ã€‚

**âš ï¸ é«˜å±å‚æ•°æ£€æŸ¥**
```sql
-- æ£€æŸ¥å½“å‰å®‰å…¨å‚æ•°çŠ¶æ€
SELECT 
    variable_name AS 'å‚æ•°å',
    variable_value AS 'å½“å‰å€¼',
    CASE 
        WHEN variable_name = 'local_infile' AND variable_value = 'ON' THEN 'é«˜å±'
        WHEN variable_name = 'symbolic_links' AND variable_value = 'YES' THEN 'é«˜å±'
        WHEN variable_name = 'secure_file_priv' AND variable_value = '' THEN 'ä¸­å±'
        ELSE 'å®‰å…¨'
    END AS 'é£é™©çº§åˆ«'
FROM information_schema.global_variables 
WHERE variable_name IN (
    'local_infile', 
    'symbolic_links', 
    'secure_file_priv',
    'general_log',
    'log_bin'
);
```

**ğŸ” å‚æ•°é£é™©è¯„ä¼°è¡¨**

| å‚æ•°å | **å®‰å…¨å€¼** | **å±é™©å€¼** | **é£é™©è¯´æ˜** | **ä¿®å¤å»ºè®®** |
|--------|-----------|-----------|-------------|-------------|
| `local_infile` | `OFF` | `ON` | `æ–‡ä»¶è¯»å–æ”»å‡»` | `ç«‹å³å…³é—­` |
| `symbolic_links` | `OFF` | `ON` | `æƒé™ç»•è¿‡` | `Linuxä¸‹å…³é—­` |
| `secure_file_priv` | `æŒ‡å®šç›®å½•` | `ç©ºå€¼` | `ä»»æ„æ–‡ä»¶æ“ä½œ` | `è®¾ç½®å®‰å…¨ç›®å½•` |
| `general_log` | `ON` | `OFF` | `æ“ä½œä¸å¯è¿½æº¯` | `å¼€å¯å®¡è®¡æ—¥å¿—` |
| `max_connections` | `200-1000` | `>2000` | `èµ„æºè€—å°½æ”»å‡»` | `åˆç†é™åˆ¶è¿æ¥æ•°` |

---

## 3. ğŸ‘¤ è´¦æˆ·å®‰å…¨ç­–ç•¥


### 3.1 è´¦æˆ·ç®¡ç†åŸåˆ™


è´¦æˆ·ç®¡ç†å°±åƒç®¡ç†å…¬å¸å‘˜å·¥æƒé™ï¼Œæ—¢è¦ä¿è¯å·¥ä½œéœ€è¦ï¼Œåˆè¦é˜²æ­¢æƒé™æ»¥ç”¨ã€‚

**ğŸ”¸ æœ€å°æƒé™åŸåˆ™**
```sql
-- åˆ›å»ºåªè¯»ç”¨æˆ·ï¼ˆé€‚ç”¨äºæŠ¥è¡¨æŸ¥è¯¢ï¼‰
CREATE USER 'readonly'@'%' IDENTIFIED BY 'Complex@Pass123';
GRANT SELECT ON company_db.* TO 'readonly'@'%';

-- åˆ›å»ºåº”ç”¨ç”¨æˆ·ï¼ˆé€‚ç”¨äºä¸šåŠ¡ç³»ç»Ÿï¼‰
CREATE USER 'app_user'@'192.168.1.%' IDENTIFIED BY 'App@Secret456';
GRANT SELECT, INSERT, UPDATE, DELETE ON app_db.* TO 'app_user'@'192.168.1.%';

-- åˆ›å»ºå¤‡ä»½ç”¨æˆ·ï¼ˆä»…ç”¨äºæ•°æ®å¤‡ä»½ï¼‰
CREATE USER 'backup_user'@'localhost' IDENTIFIED BY 'Backup@Key789';
GRANT SELECT, LOCK TABLES, SHOW VIEW ON *.* TO 'backup_user'@'localhost';
```

**ğŸ’¡ å¯†ç å®‰å…¨ç­–ç•¥**
```sql
-- æ£€æŸ¥å¯†ç ç­–ç•¥è®¾ç½®
SELECT $$validate_password.policy;
SELECT $$validate_password.length;

-- é…ç½®å¯†ç å¤æ‚åº¦ï¼ˆéœ€è¦å®‰è£…validate_passwordæ’ä»¶ï¼‰
SET GLOBAL validate_password.policy = 'STRONG';
SET GLOBAL validate_password.length = 12;
SET GLOBAL validate_password.mixed_case_count = 1;
SET GLOBAL validate_password.number_count = 1;
SET GLOBAL validate_password.special_char_count = 1;
```

### 3.2 è´¦æˆ·å®‰å…¨å®¡è®¡


å®šæœŸæ£€æŸ¥è´¦æˆ·å°±åƒå®šæœŸä½“æ£€ï¼ŒåŠæ—¶å‘ç°å®‰å…¨éšæ‚£ã€‚

**ğŸ” è´¦æˆ·å®‰å…¨æ£€æŸ¥è„šæœ¬**
```sql
-- æ£€æŸ¥ç©ºå¯†ç è´¦æˆ·ï¼ˆæé«˜é£é™©ï¼‰
SELECT user, host, authentication_string 
FROM mysql.user 
WHERE authentication_string = '' OR authentication_string IS NULL;

-- æ£€æŸ¥è¶…çº§ç”¨æˆ·è´¦æˆ·
SELECT user, host, Super_priv, Grant_priv 
FROM mysql.user 
WHERE Super_priv = 'Y' OR Grant_priv = 'Y';

-- æ£€æŸ¥é€šé…ç¬¦ä¸»æœºè´¦æˆ·ï¼ˆå®‰å…¨é£é™©ï¼‰
SELECT user, host, authentication_string
FROM mysql.user 
WHERE host = '%' AND user != 'readonly';

-- æ£€æŸ¥é•¿æœŸæœªä½¿ç”¨è´¦æˆ·
SELECT user, host, password_last_changed,
       DATEDIFF(NOW(), password_last_changed) AS days_since_change
FROM mysql.user 
WHERE password_last_changed < DATE_SUB(NOW(), INTERVAL 90 DAY);
```

---

## 4. ğŸŒ ç½‘ç»œè®¿é—®æ§åˆ¶


### 4.1 ç½‘ç»œè®¿é—®æ§åˆ¶ç­–ç•¥


ç½‘ç»œè®¿é—®æ§åˆ¶å°±åƒè®¾ç½®é—¨ç¦å¡ï¼Œåªæœ‰æˆæƒçš„äººæ‰èƒ½ä»æŒ‡å®šåœ°ç‚¹è¿›å…¥ã€‚

**ğŸ”¸ IPåœ°å€ç™½åå•ç®¡ç†**
```sql
-- é™åˆ¶ç®¡ç†å‘˜åªèƒ½ä»åŠå…¬ç½‘è®¿é—®
CREATE USER 'admin'@'192.168.1.%' IDENTIFIED BY 'Admin@Pass123';
GRANT ALL PRIVILEGES ON *.* TO 'admin'@'192.168.1.%' WITH GRANT OPTION;

-- åº”ç”¨æœåŠ¡å™¨ä¸“ç”¨è´¦æˆ·
CREATE USER 'webapp'@'10.0.1.100' IDENTIFIED BY 'WebApp@Secret456';
GRANT SELECT, INSERT, UPDATE, DELETE ON webapp_db.* TO 'webapp'@'10.0.1.100';

-- ç¦æ­¢rootè¿œç¨‹ç™»å½•
UPDATE mysql.user SET host='localhost' WHERE user='root' AND host='%';
FLUSH PRIVILEGES;
```

### 4.2 ç«¯å£å®‰å…¨é…ç½®


æ•°æ®åº“ç«¯å£å°±åƒæˆ¿å­çš„é—¨ï¼Œéœ€è¦åˆç†è®¾ç½®å’Œä¿æŠ¤ã€‚

**âš™ï¸ ç«¯å£å®‰å…¨é…ç½®ç¤ºä¾‹**
```ini
# my.cnf é…ç½®æ–‡ä»¶
[mysqld]
# ä¿®æ”¹é»˜è®¤ç«¯å£ï¼ˆé¿å…è‡ªåŠ¨æ‰«æï¼‰
port = 33060

# ç»‘å®šç‰¹å®šIPï¼ˆåªç›‘å¬å†…ç½‘ï¼‰
bind-address = 192.168.1.10

# ç¦ç”¨ç½‘ç»œè¿æ¥ï¼ˆä»…æœ¬åœ°è®¿é—®ï¼‰
# skip-networking = 1

# è®¾ç½®è¿æ¥è¶…æ—¶
connect_timeout = 10
wait_timeout = 600
interactive_timeout = 600
```

**ğŸ”’ é˜²ç«å¢™é…ç½®å»ºè®®**
```bash
# åªå…è®¸ç‰¹å®šIPè®¿é—®MySQLç«¯å£
iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 3306 -j ACCEPT
iptables -A INPUT -p tcp --dport 3306 -j DROP

# é™åˆ¶è¿æ¥é¢‘ç‡ï¼ˆé˜²æ­¢æš´åŠ›ç ´è§£ï¼‰
iptables -A INPUT -p tcp --dport 3306 -m limit --limit 10/min -j ACCEPT
```

---

## 5. ğŸ“ æ–‡ä»¶æƒé™é…ç½®


### 5.1 MySQLæ–‡ä»¶æƒé™è®¾ç½®


æ–‡ä»¶æƒé™å°±åƒä¿é™©ç®±çš„å¯†ç ï¼Œè®¾ç½®ä¸å½“å°±å¯èƒ½è¢«éæ³•è®¿é—®ã€‚

**ğŸ”¸ å…³é”®ç›®å½•æƒé™é…ç½®**
```bash
# MySQLæ•°æ®ç›®å½•æƒé™ï¼ˆåªæœ‰mysqlç”¨æˆ·å¯è®¿é—®ï¼‰
chmod 750 /var/lib/mysql
chown mysql:mysql /var/lib/mysql

# é…ç½®æ–‡ä»¶æƒé™ï¼ˆé˜²æ­¢å¯†ç æ³„éœ²ï¼‰
chmod 644 /etc/mysql/my.cnf
chown root:root /etc/mysql/my.cnf

# æ—¥å¿—æ–‡ä»¶æƒé™
chmod 640 /var/log/mysql/*.log
chown mysql:adm /var/log/mysql/*.log

# å¤‡ä»½ç›®å½•æƒé™
chmod 700 /backup/mysql
chown mysql:mysql /backup/mysql
```

**âš ï¸ æ–‡ä»¶æƒé™å®‰å…¨æ£€æŸ¥**
```bash
# æ£€æŸ¥MySQLç›¸å…³æ–‡ä»¶æƒé™
find /var/lib/mysql -type f -perm /o+rwx -exec ls -la {} \;
find /etc/mysql -name "*.cnf" -perm /o+rwx -exec ls -la {} \;

# æ£€æŸ¥æ˜¯å¦å­˜åœ¨å…¨å±€å¯å†™æ–‡ä»¶
find /var/lib/mysql -type f -perm -002 -exec ls -la {} \;
```

### 5.2 å®‰å…¨æ–‡ä»¶ç®¡ç†


**ğŸ”’ æ•æ„Ÿæ–‡ä»¶ä¿æŠ¤**
```sql
-- è®¾ç½®å®‰å…¨æ–‡ä»¶ç›®å½•
SET GLOBAL secure_file_priv = '/var/lib/mysql-files/';

-- åˆ›å»ºå®‰å…¨ç›®å½•å¹¶è®¾ç½®æƒé™
```

```bash
mkdir -p /var/lib/mysql-files
chmod 755 /var/lib/mysql-files
chown mysql:mysql /var/lib/mysql-files
```

---

## 6. ğŸ“ æ—¥å¿—å®‰å…¨é…ç½®


### 6.1 å®¡è®¡æ—¥å¿—é…ç½®


æ—¥å¿—å°±åƒç›‘æ§æ‘„åƒå¤´ï¼Œè®°å½•æ‰€æœ‰é‡è¦æ“ä½œï¼Œå¸®åŠ©è¿½è¸ªå®‰å…¨äº‹ä»¶ã€‚

**ğŸ”¸ å¯ç”¨å…³é”®æ—¥å¿—**
```sql
-- å¯ç”¨é€šç”¨æŸ¥è¯¢æ—¥å¿—ï¼ˆè®°å½•æ‰€æœ‰SQLï¼‰
SET GLOBAL general_log = ON;
SET GLOBAL general_log_file = '/var/log/mysql/general.log';

-- å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆæ€§èƒ½ç›‘æ§ï¼‰
SET GLOBAL slow_query_log = ON;
SET GLOBAL slow_query_log_file = '/var/log/mysql/slow.log';
SET GLOBAL long_query_time = 2;

-- å¯ç”¨é”™è¯¯æ—¥å¿—
SET GLOBAL log_error = '/var/log/mysql/error.log';

-- å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆæ•°æ®æ¢å¤å’Œå¤åˆ¶ï¼‰
SET GLOBAL log_bin = ON;
SET GLOBAL binlog_format = 'ROW';
```

### 6.2 æ—¥å¿—å®‰å…¨åˆ†æ


**ğŸ” å®‰å…¨äº‹ä»¶æ£€æµ‹**
```bash
# æ£€æµ‹ç™»å½•å¤±è´¥å°è¯•
grep "Access denied" /var/log/mysql/error.log | tail -20

# æ£€æµ‹å¯ç–‘SQLæ“ä½œ
grep -E "(DROP|DELETE|TRUNCATE)" /var/log/mysql/general.log | grep -v "WHERE"

# æ£€æµ‹æƒé™æå‡å°è¯•
grep -E "(GRANT|CREATE USER|ALTER USER)" /var/log/mysql/general.log

# ç»Ÿè®¡è¿æ¥æ¥æºIP
awk '/Connect/ {print $NF}' /var/log/mysql/general.log | sort | uniq -c | sort -nr
```

---

## 7. ğŸ¤– å®‰å…¨æ£€æŸ¥è‡ªåŠ¨åŒ–


### 7.1 å®‰å…¨é…ç½®è‡ªåŠ¨åŒ–æ£€æŸ¥


è‡ªåŠ¨åŒ–æ£€æŸ¥å°±åƒå®šæ—¶ä½“æ£€ï¼Œå®šæœŸå‘ç°å’Œä¿®å¤å®‰å…¨é—®é¢˜ã€‚

**ğŸ”¸ å®‰å…¨æ£€æŸ¥è„šæœ¬ç¤ºä¾‹**
```bash
#!/bin/bash
# MySQLå®‰å…¨é…ç½®æ£€æŸ¥è„šæœ¬

echo "=== MySQLå®‰å…¨é…ç½®æ£€æŸ¥æŠ¥å‘Š ==="
echo "æ£€æŸ¥æ—¶é—´: $(date)"
echo ""

# æ£€æŸ¥å±é™©å‚æ•°
echo "1. å±é™©å‚æ•°æ£€æŸ¥:"
mysql -u root -p -e "
SELECT 
    variable_name,
    variable_value,
    CASE 
        WHEN variable_name = 'local_infile' AND variable_value = 'ON' THEN 'RISK'
        WHEN variable_name = 'symbolic_links' AND variable_value = 'YES' THEN 'RISK'
        ELSE 'OK'
    END as status
FROM information_schema.global_variables 
WHERE variable_name IN ('local_infile', 'symbolic_links');"

# æ£€æŸ¥ç©ºå¯†ç è´¦æˆ·
echo "2. ç©ºå¯†ç è´¦æˆ·æ£€æŸ¥:"
mysql -u root -p -e "
SELECT user, host FROM mysql.user 
WHERE authentication_string = '' OR authentication_string IS NULL;"

# æ£€æŸ¥æ–‡ä»¶æƒé™
echo "3. æ–‡ä»¶æƒé™æ£€æŸ¥:"
ls -la /var/lib/mysql/ | head -5
ls -la /etc/mysql/my.cnf
```

### 7.2 å®‰å…¨åŸºçº¿ç®¡ç†ç­–ç•¥


**ğŸ“‹ é…ç½®åˆè§„æ£€æŸ¥æœºåˆ¶**
```yaml
# å®‰å…¨æ£€æŸ¥é…ç½®æ–‡ä»¶ security_baseline.yml
mysql_security_baseline:
  parameters:
    local_infile: "OFF"
    symbolic_links: "OFF"
    secure_file_priv: "/var/lib/mysql-files/"
    general_log: "ON"
    max_connections: "200"
  
  accounts:
    no_empty_passwords: true
    no_wildcard_hosts_for_privileged: true
    password_policy: "STRONG"
    password_min_length: 12
  
  file_permissions:
    data_directory: "750"
    config_file: "644"
    log_files: "640"
  
  network:
    bind_specific_ip: true
    non_default_port: true
    firewall_enabled: true
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„å®‰å…¨é…ç½®


```
ğŸŸ¢ åŸºç¡€å¿…ä¼šï¼š
â€¢ å…³é—­local_infileå‚æ•°
â€¢ ç¦ç”¨symbolic_links
â€¢ è®¾ç½®secure_file_privå®‰å…¨ç›®å½•
â€¢ å¯ç”¨å®¡è®¡æ—¥å¿—è®°å½•
â€¢ é…ç½®æœ€å°æƒé™è´¦æˆ·

ğŸŸ¡ è¿›é˜¶é…ç½®ï¼š
â€¢ å®æ–½IPç™½åå•ç­–ç•¥
â€¢ é…ç½®å¯†ç å¤æ‚åº¦ç­–ç•¥
â€¢ è®¾ç½®åˆç†çš„è¿æ¥é™åˆ¶
â€¢ å®ç°æ–‡ä»¶æƒé™ç®¡æ§
â€¢ å»ºç«‹å®‰å…¨ç›‘æ§æœºåˆ¶
```

### 8.2 å®‰å…¨é…ç½®æ£€æŸ¥æ¸…å•


**ğŸ“ æ—¥å¸¸å®‰å…¨æ£€æŸ¥**
- [ ] æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç©ºå¯†ç è´¦æˆ·
- [ ] éªŒè¯å±é™©å‚æ•°æ˜¯å¦å·²å…³é—­
- [ ] ç¡®è®¤æ—¥å¿—è®°å½•åŠŸèƒ½æ­£å¸¸
- [ ] æ£€æŸ¥æ–‡ä»¶æƒé™è®¾ç½®
- [ ] å®¡æŸ¥è´¦æˆ·æƒé™åˆ†é…
- [ ] ç›‘æ§å¼‚å¸¸ç™»å½•å°è¯•
- [ ] éªŒè¯ç½‘ç»œè®¿é—®æ§åˆ¶
- [ ] æ£€æŸ¥ç³»ç»Ÿå®‰å…¨è¡¥ä¸

### 8.3 å®‰å…¨é˜²æŠ¤æœ€ä½³å®è·µ


**ğŸ¯ å®æˆ˜æŒ‡å¯¼**
```
é˜²æŠ¤ç­–ç•¥ï¼š
â€¢ çºµæ·±é˜²å¾¡ - å¤šå±‚å®‰å…¨æ§åˆ¶
â€¢ æœ€å°æƒé™ - æŒ‰éœ€åˆ†é…æƒé™
â€¢ å®šæœŸå®¡è®¡ - æŒç»­å®‰å…¨æ£€æŸ¥
â€¢ è‡ªåŠ¨åŒ– - å‡å°‘äººä¸ºé”™è¯¯
â€¢ åº”æ€¥å“åº” - å¿«é€Ÿå¤„ç†å®‰å…¨äº‹ä»¶

ç›‘æ§é‡ç‚¹ï¼š
â€¢ ç™»å½•å¤±è´¥å°è¯•è¶…è¿‡é˜ˆå€¼
â€¢ æƒé™æå‡æ“ä½œ
â€¢ å¼‚å¸¸æ—¶é—´æ®µçš„è®¿é—®
â€¢ å¤§é‡æ•°æ®å¯¼å‡ºæ“ä½œ
â€¢ æ•æ„Ÿè¡¨çš„è®¿é—®è¡Œä¸º
```

**ğŸ’¡ è®°å¿†è¦ç‚¹**
- å®‰å…¨é…ç½®å¦‚å»ºæˆ¿åŸºç¡€ï¼ŒåŸºç¡€ä¸ç‰¢åœ°åŠ¨å±±æ‘‡
- æƒé™ç®¡ç†å¦‚é—¨ç¦æ§åˆ¶ï¼Œæœ€å°å¤Ÿç”¨æ˜¯åŸåˆ™  
- æ—¥å¿—ç›‘æ§å¦‚å®‰å…¨çœ¼ç›ï¼Œæ—¶åˆ»è­¦æƒ•æœ‰å¼‚å¸¸
- å®šæœŸæ£€æŸ¥å¦‚ä½“æ£€ä¿å¥ï¼Œé¢„é˜²èƒœè¿‡äº‹åè¡¥æ•‘

**ğŸ”’ æ ¸å¿ƒåŸåˆ™**ï¼šæ•°æ®åº“å®‰å…¨ä¸æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼Œè€Œæ˜¯éœ€è¦æŒç»­ç»´æŠ¤å’Œæ”¹è¿›çš„ç³»ç»Ÿå·¥ç¨‹ã€‚é€šè¿‡å»ºç«‹å®Œå–„çš„å®‰å…¨åŸºçº¿ã€å®æ–½æœ‰æ•ˆçš„è®¿é—®æ§åˆ¶ã€ä¿æŒæŒç»­çš„å®‰å…¨ç›‘æ§ï¼Œæ‰èƒ½æ„å»ºåšå›ºçš„æ•°æ®å®‰å…¨é˜²çº¿ã€‚