---
title: 9ã€äº‹åŠ¡åè°ƒå™¨ä¸ç›‘æ§
---
## ğŸ“š ç›®å½•

1. [äº‹åŠ¡åè°ƒå™¨è®¾è®¡åŸç†](#1-äº‹åŠ¡åè°ƒå™¨è®¾è®¡åŸç†)
2. [äº‹åŠ¡çŠ¶æ€è·Ÿè¸ªæœºåˆ¶](#2-äº‹åŠ¡çŠ¶æ€è·Ÿè¸ªæœºåˆ¶)
3. [åˆ†å¸ƒå¼äº‹åŠ¡ç›‘æ§ä½“ç³»](#3-åˆ†å¸ƒå¼äº‹åŠ¡ç›‘æ§ä½“ç³»)
4. [æ€§èƒ½æŒ‡æ ‡é‡‡é›†ä¸åˆ†æ](#4-æ€§èƒ½æŒ‡æ ‡é‡‡é›†ä¸åˆ†æ)
5. [å¼‚å¸¸æ£€æµ‹ä¸å‘Šè­¦æœºåˆ¶](#5-å¼‚å¸¸æ£€æµ‹ä¸å‘Šè­¦æœºåˆ¶)
6. [äº‹åŠ¡é“¾è·¯è¿½è¸ªç³»ç»Ÿ](#6-äº‹åŠ¡é“¾è·¯è¿½è¸ªç³»ç»Ÿ)
7. [è¿ç»´ç®¡ç†å¹³å°å»ºè®¾](#7-è¿ç»´ç®¡ç†å¹³å°å»ºè®¾)
8. [é«˜å¯ç”¨æ¶æ„è®¾è®¡](#8-é«˜å¯ç”¨æ¶æ„è®¾è®¡)
9. [å¯è§†åŒ–ç®¡ç†ä¸ä¼˜åŒ–](#9-å¯è§†åŒ–ç®¡ç†ä¸ä¼˜åŒ–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ äº‹åŠ¡åè°ƒå™¨è®¾è®¡åŸç†


### 1.1 ä»€ä¹ˆæ˜¯äº‹åŠ¡åè°ƒå™¨


**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> äº‹åŠ¡åè°ƒå™¨å°±åƒä¸€ä¸ªé¡¹ç›®ç»ç†ï¼Œè´Ÿè´£åè°ƒå¤šä¸ªå›¢é˜Ÿï¼ˆåˆ†å¸ƒå¼èŠ‚ç‚¹ï¼‰å…±åŒå®Œæˆä¸€ä¸ªå¤§é¡¹ç›®ï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ã€‚é¡¹ç›®ç»ç†è¦è·Ÿè¸ªæ¯ä¸ªå›¢é˜Ÿçš„è¿›åº¦ï¼Œç¡®ä¿æ‰€æœ‰å›¢é˜Ÿè¦ä¹ˆéƒ½æˆåŠŸå®Œæˆä»»åŠ¡ï¼Œè¦ä¹ˆéƒ½åœæ­¢å·¥ä½œã€‚

**æ ¸å¿ƒå®šä¹‰**
```
äº‹åŠ¡åè°ƒå™¨ï¼ˆTransaction Coordinatorï¼‰ï¼š
- ä½œç”¨ï¼šç»Ÿä¸€ç®¡ç†åˆ†å¸ƒå¼äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ
- èŒè´£ï¼šåè°ƒå„ä¸ªå‚ä¸èŠ‚ç‚¹çš„äº‹åŠ¡æ“ä½œ
- ç›®æ ‡ï¼šä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„ACIDç‰¹æ€§
```

### 1.2 åè°ƒå™¨æ ¸å¿ƒæ¶æ„


**ğŸ”§ åŸºç¡€æ¶æ„è®¾è®¡**
```
                    å®¢æˆ·ç«¯åº”ç”¨
                         |
                  [äº‹åŠ¡å¼€å§‹è¯·æ±‚]
                         |
                         â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   äº‹åŠ¡åè°ƒå™¨     â”‚
                 â”‚  (Coordinator)  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         |
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            |            |            |
            â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å‚ä¸è€…èŠ‚ç‚¹1  â”‚ â”‚  å‚ä¸è€…èŠ‚ç‚¹2  â”‚ â”‚  å‚ä¸è€…èŠ‚ç‚¹3  â”‚
    â”‚ (Participant)â”‚ â”‚ (Participant)â”‚ â”‚ (Participant)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         æ•°æ®åº“A         æ•°æ®åº“B         æ¶ˆæ¯é˜Ÿåˆ—
```

**ğŸ’¡ åè°ƒå™¨è®¾è®¡è¦ç‚¹**
```
æ ¸å¿ƒç»„ä»¶ï¼š
ğŸ”¸ äº‹åŠ¡ç®¡ç†å™¨ï¼šè´Ÿè´£äº‹åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
ğŸ”¸ èµ„æºç®¡ç†å™¨ï¼šç®¡ç†å„ä¸ªå‚ä¸èµ„æº
ğŸ”¸ çŠ¶æ€å­˜å‚¨ï¼šæŒä¹…åŒ–äº‹åŠ¡çŠ¶æ€ä¿¡æ¯
ğŸ”¸ é€šä¿¡æ¨¡å—ï¼šä¸å‚ä¸èŠ‚ç‚¹é€šä¿¡åè°ƒ
ğŸ”¸ æ¢å¤æ¨¡å—ï¼šå¤„ç†å´©æºƒåçš„äº‹åŠ¡æ¢å¤
```

### 1.3 åè°ƒå™¨å·¥ä½œæµç¨‹


**âš¡ 2PCåè°ƒæµç¨‹**
```
é˜¶æ®µä¸€ï¼šå‡†å¤‡é˜¶æ®µï¼ˆPrepare Phaseï¼‰
åè°ƒå™¨                    å‚ä¸è€…ä»¬
   |                         |
   |---[1]å‘é€Prepare------->|
   |                         |æ‰§è¡Œäº‹åŠ¡æ“ä½œ
   |<--[2]è¿”å›Vote(Yes/No)---|ä¿ç•™èµ„æºé”å®š
   |                         |
   
é˜¶æ®µäºŒï¼šæäº¤é˜¶æ®µï¼ˆCommit Phaseï¼‰  
   |                         |
   |---[3]å‘é€Commit-------->|
   |                         |æ­£å¼æäº¤äº‹åŠ¡
   |<--[4]è¿”å›Ack------------|é‡Šæ”¾èµ„æºé”
   |                         |
```

**ğŸ“‹ Javaå®ç°ç¤ºä¾‹**
```java
public class TransactionCoordinator {
    private Map<String, Transaction> transactions = new ConcurrentHashMap<>();
    private List<Participant> participants = new ArrayList<>();
    
    // å¼€å§‹åˆ†å¸ƒå¼äº‹åŠ¡
    public String beginTransaction() {
        String txId = generateTransactionId();
        Transaction tx = new Transaction(txId, TransactionState.ACTIVE);
        transactions.put(txId, tx);
        
        log.info("å¼€å§‹åˆ†å¸ƒå¼äº‹åŠ¡: {}", txId);
        return txId;
    }
    
    // 2PCåè®®å®ç°
    public boolean commit(String txId) {
        Transaction tx = transactions.get(txId);
        if (tx == null) return false;
        
        // é˜¶æ®µ1ï¼šå‡†å¤‡é˜¶æ®µ
        if (!preparePhase(tx)) {
            abort(txId);
            return false;
        }
        
        // é˜¶æ®µ2ï¼šæäº¤é˜¶æ®µ
        return commitPhase(tx);
    }
    
    private boolean preparePhase(Transaction tx) {
        tx.setState(TransactionState.PREPARING);
        
        for (Participant participant : participants) {
            try {
                VoteResult vote = participant.prepare(tx.getId());
                if (vote == VoteResult.NO) {
                    log.warn("å‚ä¸è€…æŠ•ç¥¨å¦å†³: {}", participant.getId());
                    return false;
                }
            } catch (Exception e) {
                log.error("å‡†å¤‡é˜¶æ®µå¤±è´¥: {}", e.getMessage());
                return false;
            }
        }
        return true;
    }
}
```

---

## 2. ğŸ“Š äº‹åŠ¡çŠ¶æ€è·Ÿè¸ªæœºåˆ¶


### 2.1 äº‹åŠ¡çŠ¶æ€æ¨¡å‹


**ğŸ”„ çŠ¶æ€è½¬æ¢å›¾**
```
                    å¼€å§‹äº‹åŠ¡
                        |
                        â–¼
                   [ACTIVE]
                   /       \
              å‡†å¤‡é˜¶æ®µ    ç›´æ¥å›æ»š
                 /           \
                â–¼             â–¼
          [PREPARING]      [ABORTING]
             /    \             |
        æˆåŠŸ/      \å¤±è´¥        |
           /        \           |
          â–¼          â–¼          â–¼
    [COMMITTING]  [ABORTING]  [ABORTED]
          |           |
          â–¼           â–¼
     [COMMITTED]   [ABORTED]
```

**ğŸ“ çŠ¶æ€å«ä¹‰è¯´æ˜**
```
ACTIVE: äº‹åŠ¡æ´»è·ƒçŠ¶æ€ï¼Œæ­£åœ¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘
PREPARING: å‡†å¤‡é˜¶æ®µï¼Œç­‰å¾…æ‰€æœ‰å‚ä¸è€…æŠ•ç¥¨
COMMITTING: æäº¤é˜¶æ®µï¼Œå‘æ‰€æœ‰å‚ä¸è€…å‘é€æäº¤æŒ‡ä»¤
ABORTING: å›æ»šé˜¶æ®µï¼Œå‘æ‰€æœ‰å‚ä¸è€…å‘é€å›æ»šæŒ‡ä»¤
COMMITTED: äº‹åŠ¡æˆåŠŸæäº¤å®Œæˆ
ABORTED: äº‹åŠ¡å·²å›æ»šå®Œæˆ
```

### 2.2 çŠ¶æ€æŒä¹…åŒ–å­˜å‚¨


**ğŸ’¾ çŠ¶æ€å­˜å‚¨è®¾è®¡**
```java
public class TransactionStateStore {
    private final JdbcTemplate jdbcTemplate;
    
    // åˆ›å»ºäº‹åŠ¡çŠ¶æ€è¡¨
    public void initStateTable() {
        String sql = """
            CREATE TABLE tx_state (
                tx_id VARCHAR(64) PRIMARY KEY,
                state VARCHAR(20) NOT NULL,
                participants TEXT,
                created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                timeout_time TIMESTAMP,
                retry_count INT DEFAULT 0
            )
            """;
        jdbcTemplate.execute(sql);
    }
    
    // ä¿å­˜äº‹åŠ¡çŠ¶æ€
    public void saveTransactionState(Transaction tx) {
        String sql = """
            INSERT INTO tx_state (tx_id, state, participants, timeout_time) 
            VALUES (?, ?, ?, ?)
            ON DUPLICATE KEY UPDATE 
                state = VALUES(state),
                updated_time = CURRENT_TIMESTAMP,
                retry_count = retry_count + 1
            """;
        
        String participantsJson = JsonUtils.toJson(tx.getParticipants());
        jdbcTemplate.update(sql, 
            tx.getId(), 
            tx.getState().name(), 
            participantsJson,
            tx.getTimeoutTime()
        );
    }
    
    // æŸ¥è¯¢è¶…æ—¶äº‹åŠ¡
    public List<Transaction> findTimeoutTransactions() {
        String sql = """
            SELECT * FROM tx_state 
            WHERE timeout_time < CURRENT_TIMESTAMP 
            AND state IN ('PREPARING', 'COMMITTING', 'ABORTING')
            """;
        
        return jdbcTemplate.query(sql, this::mapToTransaction);
    }
}
```

### 2.3 çŠ¶æ€åŒæ­¥æœºåˆ¶


**ğŸ“¡ çŠ¶æ€åŒæ­¥ç­–ç•¥**
```
åŒæ­¥è§¦å‘æ—¶æœºï¼š
ğŸ”¸ çŠ¶æ€å˜æ›´æ—¶ï¼šç«‹å³åŒæ­¥åˆ°æŒä¹…åŒ–å­˜å‚¨
ğŸ”¸ å®šæ—¶æ£€æŸ¥ï¼šå‘¨æœŸæ€§æ£€æŸ¥çŠ¶æ€ä¸€è‡´æ€§
ğŸ”¸ æ¢å¤å¯åŠ¨ï¼šç³»ç»Ÿé‡å¯æ—¶åŠ è½½æœªå®Œæˆäº‹åŠ¡
ğŸ”¸ å¼‚å¸¸å¤„ç†ï¼šç½‘ç»œåˆ†åŒºåçš„çŠ¶æ€ä¿®å¤
```

**âš¡ çŠ¶æ€åŒæ­¥å®ç°**
```java
@Component
public class TransactionStateSynchronizer {
    
    @Scheduled(fixedDelay = 5000) // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
    public void syncPendingTransactions() {
        List<Transaction> pendingTx = stateStore.findPendingTransactions();
        
        for (Transaction tx : pendingTx) {
            switch (tx.getState()) {
                case PREPARING:
                    handlePreparingTransaction(tx);
                    break;
                case COMMITTING:
                    handleCommittingTransaction(tx);
                    break;
                case ABORTING:
                    handleAbortingTransaction(tx);
                    break;
            }
        }
    }
    
    private void handlePreparingTransaction(Transaction tx) {
        if (tx.isTimeout()) {
            log.warn("äº‹åŠ¡å‡†å¤‡è¶…æ—¶ï¼Œå¼€å§‹å›æ»š: {}", tx.getId());
            coordinator.abort(tx.getId());
        } else {
            // é‡æ–°æ£€æŸ¥å‚ä¸è€…çŠ¶æ€
            checkParticipantStates(tx);
        }
    }
}
```

---

## 3. ğŸ¯ åˆ†å¸ƒå¼äº‹åŠ¡ç›‘æ§ä½“ç³»


### 3.1 ç›‘æ§ä½“ç³»æ¶æ„


**ğŸ—ï¸ ç›‘æ§ç³»ç»Ÿæ•´ä½“æ¶æ„**
```
                    ç›‘æ§æ§åˆ¶å°
                         |
                   [Web Dashboard]
                         |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              |          |          |
              â–¼          â–¼          â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   æŒ‡æ ‡æ”¶é›†   â”‚ â”‚   æ—¥å¿—åˆ†æ   â”‚ â”‚   å‘Šè­¦ä¸­å¿ƒ   â”‚
      â”‚  (Metrics)  â”‚ â”‚   (Logs)    â”‚ â”‚  (Alerts)   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              |          |          |
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              |          |          |
              â–¼          â–¼          â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ äº‹åŠ¡åè°ƒå™¨1  â”‚ â”‚ äº‹åŠ¡åè°ƒå™¨2  â”‚ â”‚ äº‹åŠ¡åè°ƒå™¨3  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç›‘æ§æ•°æ®æ”¶é›†


**ğŸ“Š æ ¸å¿ƒç›‘æ§æŒ‡æ ‡**
```
äº‹åŠ¡é‡æŒ‡æ ‡ï¼š
- æ¯ç§’äº‹åŠ¡æ•° (TPS)
- æ¯åˆ†é’Ÿäº‹åŠ¡æ•° (TPM)  
- ç´¯è®¡äº‹åŠ¡æ€»æ•°

æˆåŠŸç‡æŒ‡æ ‡ï¼š
- äº‹åŠ¡æˆåŠŸç‡ = æˆåŠŸäº‹åŠ¡æ•° / æ€»äº‹åŠ¡æ•°
- äº‹åŠ¡å¤±è´¥ç‡ = å¤±è´¥äº‹åŠ¡æ•° / æ€»äº‹åŠ¡æ•°
- è¶…æ—¶ç‡ = è¶…æ—¶äº‹åŠ¡æ•° / æ€»äº‹åŠ¡æ•°

æ€§èƒ½æŒ‡æ ‡ï¼š
- äº‹åŠ¡å¹³å‡å“åº”æ—¶é—´
- äº‹åŠ¡P99å“åº”æ—¶é—´
- ä¸¤é˜¶æ®µæäº¤è€—æ—¶
- èµ„æºé”å®šæ—¶é—´
```

**ğŸ”§ æŒ‡æ ‡æ”¶é›†å®ç°**
```java
@Component
public class TransactionMetricsCollector {
    private final MeterRegistry meterRegistry;
    private final Counter transactionCounter;
    private final Timer transactionTimer;
    
    public TransactionMetricsCollector(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
        this.transactionCounter = Counter.builder("tx.total")
            .description("æ€»äº‹åŠ¡æ•°")
            .register(meterRegistry);
        this.transactionTimer = Timer.builder("tx.duration")
            .description("äº‹åŠ¡è€—æ—¶")
            .register(meterRegistry);
    }
    
    // è®°å½•äº‹åŠ¡å¼€å§‹
    public Timer.Sample startTransaction(String txId) {
        transactionCounter.increment(
            Tags.of("tx_id", txId, "status", "started")
        );
        return Timer.start(meterRegistry);
    }
    
    // è®°å½•äº‹åŠ¡å®Œæˆ
    public void recordTransactionComplete(Timer.Sample sample, 
                                        String txId, 
                                        TransactionResult result) {
        sample.stop(transactionTimer.tag("result", result.name()));
        
        transactionCounter.increment(
            Tags.of("tx_id", txId, "status", result.name().toLowerCase())
        );
        
        // è®°å½•è‡ªå®šä¹‰æŒ‡æ ‡
        Gauge.builder("tx.active.count")
            .description("æ´»è·ƒäº‹åŠ¡æ•°")
            .register(meterRegistry, this, obj -> getActiveTransactionCount());
    }
}
```

---

## 4. ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡é‡‡é›†ä¸åˆ†æ


### 4.1 å…³é”®æ€§èƒ½æŒ‡æ ‡


**â­ åˆ†å¸ƒå¼äº‹åŠ¡æ€§èƒ½æŒ‡æ ‡ä½“ç³»**

| æŒ‡æ ‡ç±»åˆ« | **æŒ‡æ ‡åç§°** | **è®¡ç®—æ–¹å¼** | **æ­£å¸¸èŒƒå›´** | **å‘Šè­¦é˜ˆå€¼** |
|---------|-------------|-------------|-------------|-------------|
| ğŸš€ **ååé‡** | `TPS` | `æˆåŠŸäº‹åŠ¡æ•°/æ—¶é—´` | `>1000` | `<500` |
| â±ï¸ **å»¶è¿Ÿ** | `å¹³å‡å“åº”æ—¶é—´` | `æ€»è€—æ—¶/äº‹åŠ¡æ•°` | `<100ms` | `>500ms` |
| â±ï¸ **å»¶è¿Ÿ** | `P99å“åº”æ—¶é—´` | `99%äº‹åŠ¡è€—æ—¶` | `<200ms` | `>1000ms` |
| âœ… **å¯é æ€§** | `æˆåŠŸç‡` | `æˆåŠŸæ•°/æ€»æ•°Ã—100%` | `>99.9%` | `<99%` |
| âš ï¸ **å¼‚å¸¸** | `è¶…æ—¶ç‡` | `è¶…æ—¶æ•°/æ€»æ•°Ã—100%` | `<0.1%` | `>1%` |

### 4.2 æ€§èƒ½æ•°æ®é‡‡é›†


**ğŸ“Š å¤šç»´åº¦æŒ‡æ ‡é‡‡é›†**
```java
@Service
public class PerformanceMetricsService {
    private final Map<String, TransactionMetrics> txMetrics = new ConcurrentHashMap<>();
    
    @EventListener
    public void handleTransactionEvent(TransactionEvent event) {
        String txId = event.getTransactionId();
        TransactionMetrics metrics = txMetrics.computeIfAbsent(txId, 
            k -> new TransactionMetrics(k));
        
        switch (event.getType()) {
            case TRANSACTION_STARTED:
                metrics.markStart(event.getTimestamp());
                break;
            case PREPARE_PHASE_STARTED:
                metrics.markPrepareStart(event.getTimestamp());
                break;
            case PREPARE_PHASE_COMPLETED:
                metrics.markPrepareEnd(event.getTimestamp());
                break;
            case COMMIT_PHASE_STARTED:
                metrics.markCommitStart(event.getTimestamp());
                break;
            case TRANSACTION_COMPLETED:
                metrics.markEnd(event.getTimestamp(), event.getResult());
                processCompletedTransaction(metrics);
                txMetrics.remove(txId);
                break;
        }
    }
    
    private void processCompletedTransaction(TransactionMetrics metrics) {
        // è®¡ç®—å„é˜¶æ®µè€—æ—¶
        long totalDuration = metrics.getTotalDuration();
        long prepareDuration = metrics.getPrepareDuration();
        long commitDuration = metrics.getCommitDuration();
        
        // æ›´æ–°ç»Ÿè®¡æŒ‡æ ‡
        updateStatistics(totalDuration, prepareDuration, commitDuration);
        
        // æ£€æŸ¥æ€§èƒ½å¼‚å¸¸
        checkPerformanceAnomalies(metrics);
    }
}
```

### 4.3 æ€§èƒ½åˆ†æä¸ä¼˜åŒ–


**ğŸ” æ€§èƒ½ç“¶é¢ˆåˆ†æ**
```
å¸¸è§æ€§èƒ½é—®é¢˜ï¼š
ğŸ”¸ ç½‘ç»œå»¶è¿Ÿï¼šå‚ä¸è€…èŠ‚ç‚¹é—´é€šä¿¡å»¶è¿Ÿé«˜
ğŸ”¸ èµ„æºç«äº‰ï¼šæ•°æ®åº“é”ç«äº‰æ¿€çƒˆ
ğŸ”¸ åè°ƒå™¨ç“¶é¢ˆï¼šå•ç‚¹åè°ƒå™¨å¤„ç†èƒ½åŠ›ä¸è¶³
ğŸ”¸ çŠ¶æ€æŒä¹…åŒ–ï¼šäº‹åŠ¡çŠ¶æ€å†™å…¥ç£ç›˜è€—æ—¶
ğŸ”¸ å‚ä¸è€…è¶…æ—¶ï¼šéƒ¨åˆ†èŠ‚ç‚¹å“åº”æ…¢å¯¼è‡´æ•´ä½“è¶…æ—¶
```

**ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®ç³»ç»Ÿ**
```java
@Component
public class PerformanceOptimizationAdvisor {
    
    public List<OptimizationSuggestion> analyzePerformance(
            PerformanceReport report) {
        List<OptimizationSuggestion> suggestions = new ArrayList<>();
        
        // åˆ†æå¹³å‡å“åº”æ—¶é—´
        if (report.getAverageResponseTime() > 500) {
            suggestions.add(new OptimizationSuggestion(
                "å“åº”æ—¶é—´è¿‡é•¿",
                "å»ºè®®æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿå’Œæ•°æ®åº“æ€§èƒ½",
                Priority.HIGH
            ));
        }
        
        // åˆ†ææˆåŠŸç‡
        if (report.getSuccessRate() < 0.99) {
            suggestions.add(new OptimizationSuggestion(
                "æˆåŠŸç‡åä½", 
                "å»ºè®®å¢åŠ é‡è¯•æœºåˆ¶å’Œè¶…æ—¶æ—¶é—´è°ƒä¼˜",
                Priority.CRITICAL
            ));
        }
        
        // åˆ†æååé‡
        if (report.getTps() < 100) {
            suggestions.add(new OptimizationSuggestion(
                "ååé‡ä¸è¶³",
                "å»ºè®®è€ƒè™‘åè°ƒå™¨é›†ç¾¤åŒ–æˆ–åˆ†ç‰‡ç­–ç•¥", 
                Priority.MEDIUM
            ));
        }
        
        return suggestions;
    }
}
```

---

## 5. ğŸš¨ å¼‚å¸¸æ£€æµ‹ä¸å‘Šè­¦æœºåˆ¶


### 5.1 å¼‚å¸¸æ£€æµ‹ç­–ç•¥


**ğŸ” å¤šå±‚æ¬¡å¼‚å¸¸æ£€æµ‹**
```
å®æ—¶æ£€æµ‹ï¼š
â”œâ”€â”€ äº‹åŠ¡è¶…æ—¶æ£€æµ‹ï¼šè¶…è¿‡é¢„è®¾æ—¶é—´æœªå®Œæˆ
â”œâ”€â”€ å‚ä¸è€…å¤±è”æ£€æµ‹ï¼šèŠ‚ç‚¹æ— å“åº”æˆ–ç½‘ç»œåˆ†åŒº
â”œâ”€â”€ çŠ¶æ€å¼‚å¸¸æ£€æµ‹ï¼šçŠ¶æ€æœºè½¬æ¢å¼‚å¸¸
â””â”€â”€ æ€§èƒ½é™çº§æ£€æµ‹ï¼šå“åº”æ—¶é—´çªç„¶å¢é•¿

è¶‹åŠ¿æ£€æµ‹ï¼š
â”œâ”€â”€ æˆåŠŸç‡ä¸‹é™ï¼šç›¸æ¯”å†å²åŸºçº¿æ˜æ˜¾ä¸‹é™
â”œâ”€â”€ ååé‡å¼‚å¸¸ï¼šTPSå¼‚å¸¸æ³¢åŠ¨
â”œâ”€â”€ é”™è¯¯ç‡é£™å‡ï¼šé”™è¯¯äº‹åŠ¡æ¯”ä¾‹å¢åŠ 
â””â”€â”€ èµ„æºä½¿ç”¨å¼‚å¸¸ï¼šCPUã€å†…å­˜ã€ç£ç›˜å¼‚å¸¸
```

**âš¡ å¼‚å¸¸æ£€æµ‹å®ç°**
```java
@Component
public class TransactionAnomalyDetector {
    private final AlertManager alertManager;
    private final SlidingWindow<TransactionResult> resultWindow;
    
    @EventListener
    public void detectAnomalies(TransactionCompletedEvent event) {
        resultWindow.add(event.getResult());
        
        // æ£€æµ‹æˆåŠŸç‡å¼‚å¸¸
        detectSuccessRateAnomaly();
        
        // æ£€æµ‹å“åº”æ—¶é—´å¼‚å¸¸  
        detectResponseTimeAnomaly(event.getDuration());
        
        // æ£€æµ‹é”™è¯¯æ¨¡å¼
        detectErrorPattern(event.getResult());
    }
    
    private void detectSuccessRateAnomaly() {
        double currentSuccessRate = resultWindow.getSuccessRate();
        double baselineSuccessRate = getBaselineSuccessRate();
        
        if (currentSuccessRate < baselineSuccessRate * 0.95) {
            alertManager.sendAlert(new Alert(
                AlertLevel.CRITICAL,
                "åˆ†å¸ƒå¼äº‹åŠ¡æˆåŠŸç‡å¼‚å¸¸",
                String.format("å½“å‰æˆåŠŸç‡%.2f%%ï¼Œä½äºåŸºçº¿%.2f%%", 
                    currentSuccessRate * 100, 
                    baselineSuccessRate * 100)
            ));
        }
    }
    
    private void detectResponseTimeAnomaly(long duration) {
        long avgResponseTime = getAverageResponseTime();
        
        if (duration > avgResponseTime * 3) {
            alertManager.sendAlert(new Alert(
                AlertLevel.WARNING,
                "äº‹åŠ¡å“åº”æ—¶é—´å¼‚å¸¸",
                String.format("äº‹åŠ¡è€—æ—¶%dmsï¼Œè¶…è¿‡å¹³å‡å€¼%dmsçš„3å€", 
                    duration, avgResponseTime)
            ));
        }
    }
}
```

### 5.2 æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ


**ğŸ“¢ å‘Šè­¦çº§åˆ«ä¸ç­–ç•¥**
```
å‘Šè­¦çº§åˆ«ï¼š
ğŸ”´ CRITICAL: ç³»ç»Ÿä¸å¯ç”¨ï¼Œéœ€è¦ç«‹å³å¤„ç†
ğŸŸ¡ WARNING: æ€§èƒ½é™çº§ï¼Œéœ€è¦å…³æ³¨
ğŸ”µ INFO: ä¸€èˆ¬ä¿¡æ¯ï¼Œè®°å½•å¤‡æ¡ˆ

å‘Šè­¦ç­–ç•¥ï¼š
- é¢‘ç‡æ§åˆ¶ï¼šç›¸åŒå‘Šè­¦5åˆ†é’Ÿå†…æœ€å¤šå‘é€1æ¬¡
- å‡çº§æœºåˆ¶ï¼šWARNINGçº§åˆ«å‘Šè­¦æŒç»­10åˆ†é’Ÿå‡çº§ä¸ºCRITICAL
- æ¢å¤é€šçŸ¥ï¼šé—®é¢˜è§£å†³åå‘é€æ¢å¤é€šçŸ¥
- æŠ‘åˆ¶è§„åˆ™ï¼šä¸‹æ¸¸å‘Šè­¦å¯æŠ‘åˆ¶ä¸Šæ¸¸åŒç±»å‘Šè­¦
```

**ğŸ“± å¤šæ¸ é“å‘Šè­¦å®ç°**
```java
@Service
public class AlertManager {
    private final Map<AlertChannel, AlertSender> senders;
    private final AlertRuleEngine ruleEngine;
    
    public void sendAlert(Alert alert) {
        // åº”ç”¨å‘Šè­¦è§„åˆ™
        if (!ruleEngine.shouldSendAlert(alert)) {
            log.debug("å‘Šè­¦è¢«è§„åˆ™æŠ‘åˆ¶: {}", alert.getMessage());
            return;
        }
        
        // æ ¹æ®å‘Šè­¦çº§åˆ«é€‰æ‹©æ¸ é“
        List<AlertChannel> channels = selectChannels(alert.getLevel());
        
        for (AlertChannel channel : channels) {
            try {
                senders.get(channel).send(alert);
            } catch (Exception e) {
                log.error("å‘Šè­¦å‘é€å¤±è´¥, channel: {}, error: {}", 
                    channel, e.getMessage());
            }
        }
        
        // è®°å½•å‘Šè­¦å†å²
        alertHistoryService.record(alert);
    }
    
    private List<AlertChannel> selectChannels(AlertLevel level) {
        return switch (level) {
            case CRITICAL -> List.of(
                AlertChannel.SMS, 
                AlertChannel.PHONE, 
                AlertChannel.EMAIL,
                AlertChannel.SLACK
            );
            case WARNING -> List.of(
                AlertChannel.EMAIL, 
                AlertChannel.SLACK
            );
            case INFO -> List.of(
                AlertChannel.SLACK
            );
        };
    }
}
```

---

## 6. ğŸ”— äº‹åŠ¡é“¾è·¯è¿½è¸ªç³»ç»Ÿ


### 6.1 é“¾è·¯è¿½è¸ªåŸç†


**ğŸ¯ åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæ¦‚å¿µ**
> é“¾è·¯è¿½è¸ªå°±åƒç»™åŒ…è£¹è´´ä¸Šè·Ÿè¸ªæ ‡ç­¾ï¼Œæ— è®ºåŒ…è£¹ç»è¿‡å¤šå°‘ä¸ªè½¬è¿ç«™ï¼ˆæœåŠ¡èŠ‚ç‚¹ï¼‰ï¼Œæˆ‘ä»¬éƒ½èƒ½å®Œæ•´åœ°è¿½è¸ªå®ƒçš„è¿è¾“è½¨è¿¹ã€‚

**ğŸ” è¿½è¸ªæ•°æ®æ¨¡å‹**
```
Traceï¼ˆè°ƒç”¨é“¾ï¼‰: ä¸€æ¬¡å®Œæ•´çš„åˆ†å¸ƒå¼äº‹åŠ¡
â”œâ”€â”€ Spanï¼ˆè°ƒç”¨æ®µï¼‰: äº‹åŠ¡ä¸­çš„ä¸€ä¸ªæ“ä½œå•å…ƒ  
â”‚   â”œâ”€â”€ TraceId: å…¨å±€å”¯ä¸€çš„è¿½è¸ªæ ‡è¯†
â”‚   â”œâ”€â”€ SpanId: å½“å‰æ“ä½œçš„å”¯ä¸€æ ‡è¯†
â”‚   â”œâ”€â”€ ParentSpanId: çˆ¶æ“ä½œçš„æ ‡è¯†
â”‚   â”œâ”€â”€ StartTime: æ“ä½œå¼€å§‹æ—¶é—´
â”‚   â”œâ”€â”€ EndTime: æ“ä½œç»“æŸæ—¶é—´
â”‚   â””â”€â”€ Tags: æ“ä½œç›¸å…³çš„å…ƒæ•°æ®
â””â”€â”€ è°ƒç”¨å…³ç³»: Parent-Childå±‚æ¬¡ç»“æ„
```

### 6.2 é“¾è·¯æ•°æ®é‡‡é›†


**ğŸ“Š é“¾è·¯æ•°æ®é‡‡é›†å®ç°**
```java
@Component
public class DistributedTraceCollector {
    private final TraceContext traceContext;
    
    // å¼€å§‹äº‹åŠ¡è¿½è¸ª
    public Span startTransactionTrace(String txId) {
        String traceId = TraceIdGenerator.generate();
        
        Span rootSpan = Span.builder()
            .traceId(traceId)
            .spanId(SpanIdGenerator.generate())
            .operationName("distributed-transaction")
            .tag("tx.id", txId)
            .tag("tx.type", "2PC")
            .startTime(System.currentTimeMillis())
            .build();
            
        traceContext.setCurrentSpan(rootSpan);
        return rootSpan;
    }
    
    // è¿½è¸ªå‡†å¤‡é˜¶æ®µ
    public Span tracePreparPhase(String txId, String participantId) {
        Span parentSpan = traceContext.getCurrentSpan();
        
        Span prepareSpan = Span.builder()
            .traceId(parentSpan.getTraceId())
            .spanId(SpanIdGenerator.generate())  
            .parentSpanId(parentSpan.getSpanId())
            .operationName("prepare-phase")
            .tag("tx.id", txId)
            .tag("participant.id", participantId)
            .tag("phase", "prepare")
            .startTime(System.currentTimeMillis())
            .build();
            
        return prepareSpan;
    }
    
    // å®ŒæˆSpanè¿½è¸ª
    public void finishSpan(Span span, boolean success, String errorMsg) {
        span.setEndTime(System.currentTimeMillis());
        span.setTag("success", success);
        
        if (!success && errorMsg != null) {
            span.setTag("error.message", errorMsg);
        }
        
        // å‘é€åˆ°è¿½è¸ªç³»ç»Ÿ
        traceReporter.report(span);
    }
}
```

### 6.3 é“¾è·¯åˆ†æä¸å¯è§†åŒ–


**ğŸ“ˆ è°ƒç”¨é“¾å¯è§†åŒ–å±•ç¤º**
```
äº‹åŠ¡é“¾è·¯å›¾ç¤ºä¾‹ï¼š
                    [åˆ†å¸ƒå¼äº‹åŠ¡] (200ms)
                          |
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               |          |          |
               â–¼          â–¼          â–¼
        [å‡†å¤‡é˜¶æ®µA]  [å‡†å¤‡é˜¶æ®µB]  [å‡†å¤‡é˜¶æ®µC]
          (50ms)     (80ms)     (45ms)
               |          |          |
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          |
                          â–¼
                    [æäº¤é˜¶æ®µ] (25ms)
                          |
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               |          |          |
               â–¼          â–¼          â–¼
        [æäº¤èŠ‚ç‚¹A]  [æäº¤èŠ‚ç‚¹B]  [æäº¤èŠ‚ç‚¹C]  
          (8ms)      (12ms)     (9ms)
```

**ğŸ”§ é“¾è·¯åˆ†æå·¥å…·**
```java
@Service
public class TraceAnalysisService {
    
    // åˆ†æäº‹åŠ¡è°ƒç”¨é“¾
    public TraceAnalysisResult analyzeTrace(String traceId) {
        List<Span> spans = traceRepository.findByTraceId(traceId);
        
        // æ„å»ºè°ƒç”¨å…³ç³»æ ‘
        SpanTree spanTree = buildSpanTree(spans);
        
        // è®¡ç®—å…³é”®æŒ‡æ ‡
        TraceMetrics metrics = calculateTraceMetrics(spanTree);
        
        // è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
        List<PerformanceIssue> issues = identifyPerformanceIssues(spanTree);
        
        return TraceAnalysisResult.builder()
            .traceId(traceId)
            .spanTree(spanTree)
            .metrics(metrics)
            .performanceIssues(issues)
            .build();
    }
    
    private List<PerformanceIssue> identifyPerformanceIssues(SpanTree tree) {
        List<PerformanceIssue> issues = new ArrayList<>();
        
        // æ£€æŸ¥æ…¢æ“ä½œ
        tree.getSpans().forEach(span -> {
            if (span.getDuration() > 1000) { // è¶…è¿‡1ç§’
                issues.add(new PerformanceIssue(
                    IssueType.SLOW_OPERATION,
                    span.getOperationName(),
                    "æ“ä½œè€—æ—¶è¿‡é•¿: " + span.getDuration() + "ms"
                ));
            }
        });
        
        // æ£€æŸ¥å¹¶è¡Œåº¦ä¸è¶³
        if (tree.getMaxConcurrency() < tree.getExpectedConcurrency()) {
            issues.add(new PerformanceIssue(
                IssueType.LOW_CONCURRENCY,
                "parallel-execution",
                "å¹¶è¡Œåº¦ä¸è¶³ï¼Œå»ºè®®ä¼˜åŒ–å¹¶è¡Œæ‰§è¡Œç­–ç•¥"
            ));
        }
        
        return issues;
    }
}
```

---

## 7. ğŸ› ï¸ è¿ç»´ç®¡ç†å¹³å°å»ºè®¾


### 7.1 è¿ç»´å¹³å°åŠŸèƒ½æ¶æ„


**ğŸ—ï¸ è¿ç»´å¹³å°æ•´ä½“æ¶æ„**
```
                     è¿ç»´ç®¡ç†æ§åˆ¶å°
                           |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              |            |            |
              â–¼            â–¼            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  äº‹åŠ¡ç®¡ç†   â”‚ â”‚  ç›‘æ§å‘Šè­¦   â”‚ â”‚  é…ç½®ç®¡ç†   â”‚
      â”‚  æ¨¡å—       â”‚ â”‚  æ¨¡å—       â”‚ â”‚  æ¨¡å—       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              |            |            |
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              |            |            |
              â–¼            â–¼            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  é“¾è·¯è¿½è¸ª   â”‚ â”‚  æ€§èƒ½åˆ†æ   â”‚ â”‚  æ•…éšœè¯Šæ–­   â”‚
      â”‚  æ¨¡å—       â”‚ â”‚  æ¨¡å—       â”‚ â”‚  æ¨¡å—       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 äº‹åŠ¡ç®¡ç†åŠŸèƒ½


**ğŸ›ï¸ äº‹åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†**
```java
@RestController
@RequestMapping("/api/transaction")
public class TransactionManagementController {
    
    // æŸ¥è¯¢æ´»è·ƒäº‹åŠ¡åˆ—è¡¨
    @GetMapping("/active")
    public PageResult<TransactionInfo> getActiveTransactions(
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "20") int size) {
        
        Page<Transaction> transactions = transactionService
            .findActiveTransactions(PageRequest.of(page, size));
            
        return PageResult.of(transactions.map(this::toTransactionInfo));
    }
    
    // å¼ºåˆ¶ç»ˆæ­¢äº‹åŠ¡
    @PostMapping("/{txId}/abort")
    public ApiResponse<String> abortTransaction(@PathVariable String txId) {
        try {
            transactionService.forceAbort(txId);
            return ApiResponse.success("äº‹åŠ¡å·²å¼ºåˆ¶ç»ˆæ­¢");
        } catch (Exception e) {
            return ApiResponse.error("ç»ˆæ­¢äº‹åŠ¡å¤±è´¥: " + e.getMessage());
        }
    }
    
    // äº‹åŠ¡è¯¦æƒ…æŸ¥çœ‹
    @GetMapping("/{txId}/detail")  
    public ApiResponse<TransactionDetail> getTransactionDetail(
            @PathVariable String txId) {
        
        TransactionDetail detail = TransactionDetail.builder()
            .basicInfo(transactionService.getBasicInfo(txId))
            .participantStates(transactionService.getParticipantStates(txId))
            .operationLogs(transactionService.getOperationLogs(txId))
            .performanceMetrics(metricsService.getTransactionMetrics(txId))
            .build();
            
        return ApiResponse.success(detail);
    }
}
```

### 7.3 é…ç½®ç®¡ç†åŠŸèƒ½


**âš™ï¸ åŠ¨æ€é…ç½®ç®¡ç†**
```java
@Component
public class TransactionConfigManager {
    private final ConfigurationRepository configRepository;
    
    // äº‹åŠ¡è¶…æ—¶é…ç½®
    @ConfigProperty(key = "tx.timeout.default", defaultValue = "30000")
    private volatile long defaultTimeoutMs;
    
    // é‡è¯•é…ç½®
    @ConfigProperty(key = "tx.retry.maxAttempts", defaultValue = "3")
    private volatile int maxRetryAttempts;
    
    // æ‰¹é‡å¤„ç†é…ç½®
    @ConfigProperty(key = "tx.batch.size", defaultValue = "100")
    private volatile int batchSize;
    
    // åŠ¨æ€æ›´æ–°é…ç½®
    @EventListener
    public void handleConfigChange(ConfigChangeEvent event) {
        String key = event.getKey();
        String newValue = event.getNewValue();
        
        switch (key) {
            case "tx.timeout.default":
                this.defaultTimeoutMs = Long.parseLong(newValue);
                log.info("æ›´æ–°é»˜è®¤è¶…æ—¶æ—¶é—´: {}ms", defaultTimeoutMs);
                break;
            case "tx.retry.maxAttempts":
                this.maxRetryAttempts = Integer.parseInt(newValue);
                log.info("æ›´æ–°æœ€å¤§é‡è¯•æ¬¡æ•°: {}", maxRetryAttempts);
                break;
            case "tx.batch.size":
                this.batchSize = Integer.parseInt(newValue);
                log.info("æ›´æ–°æ‰¹å¤„ç†å¤§å°: {}", batchSize);
                break;
        }
        
        // å¹¿æ’­é…ç½®å˜æ›´åˆ°æ‰€æœ‰èŠ‚ç‚¹
        configBroadcaster.broadcast(event);
    }
}
```

---

## 8. ğŸ—ï¸ é«˜å¯ç”¨æ¶æ„è®¾è®¡


### 8.1 åè°ƒå™¨é›†ç¾¤æ¶æ„


**ğŸ”§ é«˜å¯ç”¨æ¶æ„è®¾è®¡**
```
                     è´Ÿè½½å‡è¡¡å™¨
                          |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              |           |           |
              â–¼           â–¼           â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ åè°ƒå™¨èŠ‚ç‚¹1  â”‚ â”‚ åè°ƒå™¨èŠ‚ç‚¹2  â”‚ â”‚ åè°ƒå™¨èŠ‚ç‚¹3  â”‚
      â”‚  (Master)   â”‚ â”‚  (Standby)  â”‚ â”‚  (Standby)  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              |           |           |
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              |           |           |
              â–¼           â–¼           â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   çŠ¶æ€å­˜å‚¨   â”‚ â”‚   çŠ¶æ€å­˜å‚¨   â”‚ â”‚   çŠ¶æ€å­˜å‚¨   â”‚
      â”‚ (MySQLä¸»)   â”‚ â”‚ (MySQLä»1)  â”‚ â”‚ (MySQLä»2)  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 æ•…éšœæ£€æµ‹ä¸åˆ‡æ¢


**ğŸ” å¥åº·æ£€æŸ¥æœºåˆ¶**
```java
@Component
public class CoordinatorHealthChecker {
    private final List<CoordinatorNode> coordinatorNodes;
    private volatile CoordinatorNode masterNode;
    
    @Scheduled(fixedDelay = 5000) // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
    public void performHealthCheck() {
        for (CoordinatorNode node : coordinatorNodes) {
            HealthStatus status = checkNodeHealth(node);
            node.setHealthStatus(status);
            
            if (node.isMaster() && status != HealthStatus.HEALTHY) {
                log.warn("ä¸»åè°ƒå™¨èŠ‚ç‚¹ä¸å¥åº·: {}", node.getId());
                triggerFailover();
            }
        }
    }
    
    private HealthStatus checkNodeHealth(CoordinatorNode node) {
        try {
            // æ£€æŸ¥èŠ‚ç‚¹å“åº”
            HealthCheckResponse response = node.healthCheck();
            
            // æ£€æŸ¥CPUä½¿ç”¨ç‡
            if (response.getCpuUsage() > 90) {
                return HealthStatus.DEGRADED;
            }
            
            // æ£€æŸ¥å†…å­˜ä½¿ç”¨ç‡
            if (response.getMemoryUsage() > 85) {
                return HealthStatus.DEGRADED;  
            }
            
            // æ£€æŸ¥æ•°æ®åº“è¿æ¥
            if (!response.isDatabaseConnected()) {
                return HealthStatus.UNHEALTHY;
            }
            
            return HealthStatus.HEALTHY;
        } catch (Exception e) {
            log.error("å¥åº·æ£€æŸ¥å¤±è´¥: {}", e.getMessage());
            return HealthStatus.UNHEALTHY;
        }
    }
    
    private void triggerFailover() {
        // é€‰æ‹©æ–°çš„ä¸»èŠ‚ç‚¹
        CoordinatorNode newMaster = selectNewMaster();
        
        if (newMaster != null) {
            // æ‰§è¡Œä¸»å¤‡åˆ‡æ¢
            performMasterFailover(newMaster);
        } else {
            // æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¸å¯ç”¨ï¼Œè§¦å‘ç´§æ€¥å‘Šè­¦
            alertManager.sendCriticalAlert(
                "æ‰€æœ‰åè°ƒå™¨èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œç³»ç»Ÿè¿›å…¥åªè¯»æ¨¡å¼"
            );
        }
    }
}
```

### 8.3 æ•°æ®ä¸€è‡´æ€§ä¿éšœ


**ğŸ“Š çŠ¶æ€åŒæ­¥æœºåˆ¶**
```java
@Service
public class StateReplicationService {
    
    // åŒæ­¥äº‹åŠ¡çŠ¶æ€åˆ°å¤‡èŠ‚ç‚¹
    public void replicateTransactionState(Transaction tx) {
        List<CoordinatorNode> replicaNodes = getReplicaNodes();
        
        CountDownLatch latch = new CountDownLatch(replicaNodes.size());
        AtomicInteger successCount = new AtomicInteger(0);
        
        for (CoordinatorNode node : replicaNodes) {
            CompletableFuture.runAsync(() -> {
                try {
                    node.syncTransactionState(tx);
                    successCount.incrementAndGet();
                } catch (Exception e) {
                    log.error("çŠ¶æ€åŒæ­¥å¤±è´¥: node={}, error={}", 
                        node.getId(), e.getMessage());
                } finally {
                    latch.countDown();
                }
            });
        }
        
        try {
            // ç­‰å¾…åŒæ­¥å®Œæˆï¼Œæœ€å¤šç­‰å¾…1ç§’
            latch.await(1, TimeUnit.SECONDS);
            
            // æ£€æŸ¥åŒæ­¥æˆåŠŸç‡
            int requiredReplicas = (replicaNodes.size() / 2) + 1;
            if (successCount.get() < requiredReplicas) {
                log.warn("çŠ¶æ€åŒæ­¥æˆåŠŸèŠ‚ç‚¹ä¸è¶³: required={}, actual={}", 
                    requiredReplicas, successCount.get());
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            log.error("çŠ¶æ€åŒæ­¥è¢«ä¸­æ–­");
        }
    }
}
```

---

## 9. ğŸ“Š å¯è§†åŒ–ç®¡ç†ä¸ä¼˜åŒ–


### 9.1 ç›‘æ§å¤§å±è®¾è®¡


**ğŸ“ˆ å®æ—¶ç›‘æ§å¤§å±å¸ƒå±€**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 åˆ†å¸ƒå¼äº‹åŠ¡ç›‘æ§å¤§å±                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç³»ç»Ÿæ¦‚è§ˆ      â”‚    æ€§èƒ½æŒ‡æ ‡     â”‚     å‘Šè­¦ä¿¡æ¯        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ€»äº‹åŠ¡æ•°    â”‚ â”‚ â”‚å¹³å‡å“åº”æ—¶é—´ â”‚ â”‚ â”‚ğŸ”´ Critical: 2   â”‚ â”‚
â”‚ â”‚ 1,234,567   â”‚ â”‚ â”‚   156ms     â”‚ â”‚ â”‚ğŸŸ¡ Warning: 5    â”‚ â”‚
â”‚ â”‚             â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ğŸ”µ Info: 12      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   äº‹åŠ¡çŠ¶æ€åˆ†å¸ƒ   â”‚   TPSè¶‹åŠ¿å›¾     â”‚    èŠ‚ç‚¹å¥åº·çŠ¶æ€     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚âœ…æˆåŠŸ: 98.5% â”‚ â”‚ â”‚    /\  /\   â”‚ â”‚ â”‚Node1: ğŸŸ¢ å¥åº·   â”‚ â”‚
â”‚ â”‚âš ï¸å¤±è´¥: 1.2%  â”‚ â”‚ â”‚   /  \/  \  â”‚ â”‚ â”‚Node2: ğŸŸ¢ å¥åº·   â”‚ â”‚
â”‚ â”‚ğŸ”„è¿›è¡Œ: 0.3%  â”‚ â”‚ â”‚  /        \ â”‚ â”‚ â”‚Node3: ğŸŸ¡ å‘Šè­¦   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 å¯è§†åŒ–ç»„ä»¶å®ç°


**ğŸ“Š æ ¸å¿ƒå¯è§†åŒ–ç»„ä»¶**
```java
@RestController
@RequestMapping("/api/dashboard")
public class DashboardController {
    
    // è·å–ç³»ç»Ÿæ¦‚è§ˆæ•°æ®
    @GetMapping("/overview")
    public SystemOverview getSystemOverview() {
        return SystemOverview.builder()
            .totalTransactions(metricsService.getTotalTransactionCount())
            .activeTransactions(metricsService.getActiveTransactionCount())
            .successRate(metricsService.getSuccessRate())
            .averageResponseTime(metricsService.getAverageResponseTime())
            .currentTps(metricsService.getCurrentTps())
            .build();
    }
    
    // è·å–æ€§èƒ½è¶‹åŠ¿æ•°æ®
    @GetMapping("/performance-trend")
    public List<PerformancePoint> getPerformanceTrend(
            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME) 
            LocalDateTime startTime,
            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME) 
            LocalDateTime endTime) {
        
        return metricsService.getPerformanceTrend(startTime, endTime);
    }
    
    // è·å–äº‹åŠ¡åˆ†å¸ƒæ•°æ®
    @GetMapping("/transaction-distribution")
    public TransactionDistribution getTransactionDistribution() {
        Map<TransactionState, Long> stateCount = 
            transactionService.getTransactionCountByState();
            
        return TransactionDistribution.builder()
            .successful(stateCount.getOrDefault(TransactionState.COMMITTED, 0L))
            .failed(stateCount.getOrDefault(TransactionState.ABORTED, 0L))
            .active(stateCount.getOrDefault(TransactionState.ACTIVE, 0L))
            .preparing(stateCount.getOrDefault(TransactionState.PREPARING, 0L))
            .build();
    }
}
```

### 9.3 æ™ºèƒ½ä¼˜åŒ–å»ºè®®


**ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®å¼•æ“**
```java
@Service
public class IntelligentOptimizationService {
    
    public OptimizationReport generateOptimizationReport() {
        // æ”¶é›†ç³»ç»ŸæŒ‡æ ‡
        SystemMetrics metrics = collectSystemMetrics();
        
        // åˆ†ææ€§èƒ½ç“¶é¢ˆ
        List<PerformanceBottleneck> bottlenecks = analyzeBottlenecks(metrics);
        
        // ç”Ÿæˆä¼˜åŒ–å»ºè®®
        List<OptimizationSuggestion> suggestions = 
            generateSuggestions(bottlenecks);
        
        return OptimizationReport.builder()
            .generatedTime(LocalDateTime.now())
            .systemMetrics(metrics)
            .bottlenecks(bottlenecks)
            .suggestions(suggestions)
            .build();
    }
    
    private List<OptimizationSuggestion> generateSuggestions(
            List<PerformanceBottleneck> bottlenecks) {
        
        List<OptimizationSuggestion> suggestions = new ArrayList<>();
        
        for (PerformanceBottleneck bottleneck : bottlenecks) {
            switch (bottleneck.getType()) {
                case HIGH_RESPONSE_TIME:
                    suggestions.add(new OptimizationSuggestion(
                        "å“åº”æ—¶é—´ä¼˜åŒ–",
                        "å»ºè®®å¯ç”¨è¿æ¥æ± å¤ç”¨ï¼Œå‡å°‘ç½‘ç»œå¼€é”€",
                        Priority.HIGH,
                        "è°ƒæ•´è¿æ¥æ± é…ç½®: pool.maxActive=20, pool.maxWait=3000"
                    ));
                    break;
                    
                case LOW_THROUGHPUT:
                    suggestions.add(new OptimizationSuggestion(
                        "ååé‡ä¼˜åŒ–", 
                        "å»ºè®®å¯ç”¨æ‰¹é‡å¤„ç†ï¼Œæé«˜å¹¶å‘åº¦",
                        Priority.MEDIUM,
                        "é…ç½®æ‰¹é‡å¤§å°: tx.batch.size=50"
                    ));
                    break;
                    
                case HIGH_FAILURE_RATE:
                    suggestions.add(new OptimizationSuggestion(
                        "å¯é æ€§ä¼˜åŒ–",
                        "å»ºè®®å¢åŠ é‡è¯•æœºåˆ¶å’Œè¶…æ—¶é…ç½®",
                        Priority.CRITICAL,
                        "å¢åŠ é‡è¯•æ¬¡æ•°: tx.retry.maxAttempts=5"
                    ));
                    break;
            }
        }
        
        return suggestions;
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ¯ äº‹åŠ¡åè°ƒå™¨æ ¸å¿ƒè¦ç‚¹**
```
ğŸ”¸ åè°ƒå™¨ä½œç”¨ï¼šç»Ÿä¸€ç®¡ç†åˆ†å¸ƒå¼äº‹åŠ¡ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿ACIDç‰¹æ€§
ğŸ”¸ å·¥ä½œåŸç†ï¼šé€šè¿‡2PCåè®®åè°ƒå¤šä¸ªå‚ä¸è€…è¾¾æˆä¸€è‡´æ€§
ğŸ”¸ çŠ¶æ€è·Ÿè¸ªï¼šæŒä¹…åŒ–äº‹åŠ¡çŠ¶æ€ï¼Œæ”¯æŒå´©æºƒæ¢å¤
ğŸ”¸ é«˜å¯ç”¨æ€§ï¼šé›†ç¾¤éƒ¨ç½²ï¼Œä¸»å¤‡åˆ‡æ¢ï¼ŒçŠ¶æ€åŒæ­¥
ğŸ”¸ ç›‘æ§ä½“ç³»ï¼šå…¨æ–¹ä½ç›‘æ§äº‹åŠ¡æ€§èƒ½å’Œå¥åº·çŠ¶å†µ
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡åè°ƒå™¨**
```
åˆ†å¸ƒå¼ç¯å¢ƒçš„æŒ‘æˆ˜ï¼š
- å¤šä¸ªç‹¬ç«‹èŠ‚ç‚¹éœ€è¦åè°ƒ
- ç½‘ç»œå¯èƒ½å‡ºç°åˆ†åŒºå’Œå»¶è¿Ÿ
- èŠ‚ç‚¹å¯èƒ½å‘ç”Ÿæ•…éšœ
- éœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§

åè°ƒå™¨çš„ä»·å€¼ï¼š
- ä¸­å¤®æ§åˆ¶ï¼šç»Ÿä¸€å†³ç­–ç‚¹
- çŠ¶æ€ç®¡ç†ï¼šå¯é çš„çŠ¶æ€è·Ÿè¸ª  
- æ•…éšœæ¢å¤ï¼šè‡ªåŠ¨å¤„ç†å¼‚å¸¸æƒ…å†µ
- è¿ç»´ç®¡ç†ï¼šå¯è§†åŒ–ç›‘æ§å’Œç®¡ç†
```

**ğŸ”¹ ç›‘æ§ä½“ç³»çš„é‡è¦æ€§**
```
ç›‘æ§çš„å¿…è¦æ€§ï¼š
- åŠæ—¶å‘ç°æ€§èƒ½é—®é¢˜
- å¿«é€Ÿå®šä½æ•…éšœåŸå› 
- æä¾›ä¼˜åŒ–æ”¹è¿›ä¾æ®
- ä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œ

ç›‘æ§çš„å±‚æ¬¡ï¼š
- ç³»ç»Ÿå±‚ï¼šCPUã€å†…å­˜ã€ç½‘ç»œ
- åº”ç”¨å±‚ï¼šTPSã€å“åº”æ—¶é—´ã€æˆåŠŸç‡
- ä¸šåŠ¡å±‚ï¼šäº‹åŠ¡é‡ã€å¼‚å¸¸ç‡ã€é“¾è·¯è¿½è¸ª
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**
```
æ¶æ„è®¾è®¡ï¼š
âœ… åè°ƒå™¨é›†ç¾¤éƒ¨ç½²ï¼Œé¿å…å•ç‚¹æ•…éšœ
âœ… çŠ¶æ€æŒä¹…åŒ–åˆ°å¯é å­˜å‚¨
âœ… è®¾è®¡åˆç†çš„è¶…æ—¶å’Œé‡è¯•æœºåˆ¶
âœ… å®ç°å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦

æ€§èƒ½ä¼˜åŒ–ï¼š
âœ… å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°
âœ… ä½¿ç”¨æ‰¹é‡æ“ä½œæé«˜ååé‡
âœ… ä¼˜åŒ–æ•°æ®åº“è¿æ¥æ± é…ç½®
âœ… åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´

è¿ç»´ç®¡ç†ï¼š
âœ… å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»
âœ… åˆ¶å®šæ•…éšœåº”æ€¥é¢„æ¡ˆ
âœ… å®šæœŸè¿›è¡Œæ€§èƒ½åˆ†æ
âœ… æŒç»­ä¼˜åŒ–ç³»ç»Ÿé…ç½®
```

### 10.4 é¿å…å¸¸è§é™·é˜±


**âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**
```
æ€§èƒ½é™·é˜±ï¼š
âŒ è¶…æ—¶æ—¶é—´è®¾ç½®è¿‡çŸ­ â†’ å¢åŠ åˆç†çš„è¶…æ—¶ç¼“å†²
âŒ è¿æ¥æ± é…ç½®ä¸å½“ â†’ æ ¹æ®è´Ÿè½½è°ƒæ•´è¿æ¥æ•°
âŒ ç¼ºä¹æ‰¹é‡å¤„ç† â†’ å®ç°æ‰¹é‡æ“ä½œå‡å°‘å¼€é”€

å¯é æ€§é™·é˜±ï¼š
âŒ ç¼ºä¹çŠ¶æ€æŒä¹…åŒ– â†’ å®ç°å¯é çš„çŠ¶æ€å­˜å‚¨
âŒ æ²¡æœ‰æ•…éšœæ¢å¤ â†’ è®¾è®¡å®Œå–„çš„æ¢å¤æœºåˆ¶
âŒ ç›‘æ§è¦†ç›–ä¸è¶³ â†’ å»ºç«‹å…¨é¢çš„ç›‘æ§ä½“ç³»

è¿ç»´é™·é˜±ï¼š
âŒ ç¼ºä¹å¯è§†åŒ–ç®¡ç† â†’ æ„å»ºè¿ç»´ç®¡ç†å¹³å°
âŒ å‘Šè­¦è§„åˆ™ä¸å½“ â†’ è®¾è®¡æ™ºèƒ½å‘Šè­¦ç­–ç•¥
âŒ ç¼ºä¹æ€§èƒ½åˆ†æ â†’ å®ç°æ€§èƒ½æŒ‡æ ‡é‡‡é›†å’Œåˆ†æ
```

### 10.5 æŠ€æœ¯å‘å±•è¶‹åŠ¿


**ğŸš€ æœªæ¥å‘å±•æ–¹å‘**
```
æŠ€æœ¯æ¼”è¿›ï¼š
- æ›´è½»é‡çš„åè°ƒåè®®ï¼ˆå¦‚Sagaæ¨¡å¼ï¼‰
- åŸºäºäº‹ä»¶é©±åŠ¨çš„äº‹åŠ¡ç®¡ç†
- æ™ºèƒ½åŒ–çš„æ€§èƒ½ä¼˜åŒ–
- äº‘åŸç”Ÿçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ

ç›‘æ§è¿›åŒ–ï¼š
- AIé©±åŠ¨çš„å¼‚å¸¸æ£€æµ‹
- è‡ªåŠ¨åŒ–çš„æ€§èƒ½è°ƒä¼˜
- æ›´ç²¾ç¡®çš„é“¾è·¯è¿½è¸ª
- å®æ—¶çš„æ•…éšœé¢„æµ‹
```

**ğŸ¯ å­¦ä¹ å»ºè®®**
- ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ¬è´¨å’ŒæŒ‘æˆ˜
- æŒæ¡ä¸»æµçš„äº‹åŠ¡åè°ƒåè®®
- å®è·µç›‘æ§å’Œè¿ç»´ç®¡ç†
- å…³æ³¨æ–°æŠ€æœ¯å’Œæœ€ä½³å®è·µçš„å‘å±•

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> åè°ƒå™¨ç®¡äº‹åŠ¡ï¼ŒçŠ¶æ€è·Ÿè¸ªè¦æŒä¹…
> ç›‘æ§å‘Šè­¦å…¨è¦†ç›–ï¼Œé“¾è·¯è¿½è¸ªæŸ¥é—®é¢˜  
> é«˜å¯ç”¨é é›†ç¾¤ï¼Œæ€§èƒ½ä¼˜åŒ–çœ‹æŒ‡æ ‡
> å¯è§†åŒ–åŠ©è¿ç»´ï¼Œæ™ºèƒ½å»ºè®®ä¿ƒä¼˜åŒ–