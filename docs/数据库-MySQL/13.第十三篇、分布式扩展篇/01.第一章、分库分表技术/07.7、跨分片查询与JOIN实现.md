---
title: 7ã€è·¨åˆ†ç‰‡æŸ¥è¯¢ä¸JOINå®ç°
---
## ğŸ“š ç›®å½•

1. [è·¨åˆ†ç‰‡æŸ¥è¯¢åŸºç¡€æ¦‚å¿µ](#1-è·¨åˆ†ç‰‡æŸ¥è¯¢åŸºç¡€æ¦‚å¿µ)
2. [è·¨åˆ†ç‰‡æŸ¥è¯¢ç­–ç•¥](#2-è·¨åˆ†ç‰‡æŸ¥è¯¢ç­–ç•¥)
3. [åˆ†ç‰‡é—´JOINå®ç°](#3-åˆ†ç‰‡é—´JOINå®ç°)
4. [è·¨åº“äº‹åŠ¡æŸ¥è¯¢](#4-è·¨åº“äº‹åŠ¡æŸ¥è¯¢)
5. [æ•°æ®èšåˆè®¡ç®—](#5-æ•°æ®èšåˆè®¡ç®—)
6. [å…¨å±€æ’åºåˆ†é¡µ](#6-å…¨å±€æ’åºåˆ†é¡µ)
7. [æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–](#7-æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–)
8. [åˆ†å¸ƒå¼æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’](#8-åˆ†å¸ƒå¼æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’)
9. [é«˜çº§æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥](#9-é«˜çº§æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ è·¨åˆ†ç‰‡æŸ¥è¯¢åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è·¨åˆ†ç‰‡æŸ¥è¯¢


**å®šä¹‰**ï¼šè·¨åˆ†ç‰‡æŸ¥è¯¢æ˜¯æŒ‡åœ¨åˆ†åº“åˆ†è¡¨ç¯å¢ƒä¸­ï¼Œéœ€è¦æŸ¥è¯¢å¤šä¸ªåˆ†ç‰‡æ•°æ®åº“æˆ–åˆ†ç‰‡è¡¨çš„æ•°æ®æ“ä½œã€‚

```
å•ç‰‡æŸ¥è¯¢ vs è·¨åˆ†ç‰‡æŸ¥è¯¢ï¼š

å•ç‰‡æŸ¥è¯¢ï¼š
ç”¨æˆ·1æŸ¥è¯¢ â†’ åˆ†ç‰‡1(user_0001è¡¨) â†’ ç›´æ¥è¿”å›ç»“æœ

è·¨åˆ†ç‰‡æŸ¥è¯¢ï¼š
æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· â†’ åˆ†ç‰‡1(user_0001) + åˆ†ç‰‡2(user_0002) + ... 
            â†’ åˆå¹¶ç»“æœ â†’ è¿”å›æœ€ç»ˆç»“æœ
```

### 1.2 è·¨åˆ†ç‰‡æŸ¥è¯¢çš„æŒ‘æˆ˜


**ğŸš¨ ä¸»è¦éš¾ç‚¹**ï¼š

- **æ•°æ®åˆ†æ•£**ï¼šæ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Š
- **ç½‘ç»œå»¶è¿Ÿ**ï¼šå¤šæ¬¡ç½‘ç»œé€šä¿¡å¢åŠ å“åº”æ—¶é—´
- **äº‹åŠ¡ä¸€è‡´æ€§**ï¼šè·¨åº“äº‹åŠ¡å¤„ç†å¤æ‚
- **æ€§èƒ½é—®é¢˜**ï¼šæŸ¥è¯¢æ•ˆç‡å¯èƒ½å¤§å¹…ä¸‹é™
- **å¤æ‚åº¦å¢åŠ **ï¼šæŸ¥è¯¢é€»è¾‘å˜å¾—å¤æ‚

### 1.3 è·¨åˆ†ç‰‡æŸ¥è¯¢åœºæ™¯åˆ†ç±»


```
æŒ‰æŸ¥è¯¢å¤æ‚åº¦åˆ†ç±»ï¼š

ç®€å•æŸ¥è¯¢ï¼š
â€¢ WHEREæ¡ä»¶æŸ¥è¯¢
â€¢ åŸºç¡€èšåˆå‡½æ•°ï¼ˆCOUNTã€SUMç­‰ï¼‰
â€¢ ç®€å•æ’åº

å¤æ‚æŸ¥è¯¢ï¼š
â€¢ å¤šè¡¨JOIN
â€¢ å¤æ‚èšåˆï¼ˆGROUP BYã€HAVINGï¼‰
â€¢ å­æŸ¥è¯¢
â€¢ çª—å£å‡½æ•°
```

---

## 2. ğŸ¯ è·¨åˆ†ç‰‡æŸ¥è¯¢ç­–ç•¥


### 2.1 åˆ†ç‰‡è·¯ç”±ç­–ç•¥


**ğŸ”¸ åŸºäºåˆ†ç‰‡é”®çš„è·¯ç”±**

åˆ†ç‰‡é”®èƒ½ç¡®å®šæ•°æ®ä½ç½®æ—¶ï¼Œå¯ä»¥ç²¾ç¡®è·¯ç”±åˆ°ç‰¹å®šåˆ†ç‰‡ï¼š

```sql
-- æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ï¼ˆç”¨æˆ·IDæ˜¯åˆ†ç‰‡é”®ï¼‰
SELECT * FROM user WHERE user_id = 12345;

-- è·¯ç”±é€»è¾‘ï¼šuser_id % 4 = 1 â†’ è·¯ç”±åˆ°åˆ†ç‰‡1
```

**ğŸ”¸ å¹¿æ’­æŸ¥è¯¢ç­–ç•¥**

å½“æ— æ³•ç¡®å®šæ•°æ®ä½ç½®æ—¶ï¼Œéœ€è¦å‘æ‰€æœ‰åˆ†ç‰‡å‘é€æŸ¥è¯¢ï¼š

```sql
-- æŒ‰ç”¨æˆ·åæŸ¥è¯¢ï¼ˆç”¨æˆ·åä¸æ˜¯åˆ†ç‰‡é”®ï¼‰
SELECT * FROM user WHERE username = 'zhangsan';

-- éœ€è¦æŸ¥è¯¢æ‰€æœ‰åˆ†ç‰‡ï¼Œç„¶ååˆå¹¶ç»“æœ
```

### 2.2 æŸ¥è¯¢æ‰§è¡Œæ¨¡å¼


```
æ‰§è¡Œæ¨¡å¼å¯¹æ¯”ï¼š

ä¸²è¡Œæ‰§è¡Œï¼š
åˆ†ç‰‡1 â†’ åˆ†ç‰‡2 â†’ åˆ†ç‰‡3 â†’ åˆ†ç‰‡4
ä¼˜ç‚¹ï¼šèµ„æºå ç”¨å°‘
ç¼ºç‚¹ï¼šå“åº”æ—¶é—´é•¿

å¹¶è¡Œæ‰§è¡Œï¼š
åˆ†ç‰‡1 â†˜
åˆ†ç‰‡2 â†’ åˆå¹¶ç»“æœ
åˆ†ç‰‡3 â†—
åˆ†ç‰‡4 â†—
ä¼˜ç‚¹ï¼šå“åº”æ—¶é—´çŸ­
ç¼ºç‚¹ï¼šèµ„æºå ç”¨å¤š
```

### 2.3 ç»“æœåˆå¹¶ç­–ç•¥


**ğŸ”§ ç®€å•åˆå¹¶**

```java
// ç®€å•çš„ç»“æœé›†åˆå¹¶
public List<User> mergeResults(List<List<User>> shardResults) {
    List<User> finalResult = new ArrayList<>();
    for (List<User> result : shardResults) {
        finalResult.addAll(result);
    }
    return finalResult;
}
```

**ğŸ”§ å¸¦æ’åºçš„åˆå¹¶**

```java
// éœ€è¦å…¨å±€æ’åºçš„ç»“æœåˆå¹¶
public List<User> mergeSortedResults(List<List<User>> shardResults) {
    return shardResults.stream()
        .flatMap(List::stream)
        .sorted((u1, u2) -> u1.getCreateTime().compareTo(u2.getCreateTime()))
        .collect(Collectors.toList());
}
```

---

## 3. ğŸ”— åˆ†ç‰‡é—´JOINå®ç°


### 3.1 JOINæ“ä½œçš„æŒ‘æˆ˜


åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä¼ ç»Ÿçš„JOINæ“ä½œé¢ä¸´å·¨å¤§æŒ‘æˆ˜ï¼š

```
ä¼ ç»ŸJOINï¼š
SELECT u.*, p.* 
FROM user u 
JOIN profile p ON u.user_id = p.user_id;

åˆ†ç‰‡ç¯å¢ƒé—®é¢˜ï¼š
â€¢ userè¡¨åˆ†ç‰‡åœ¨æ•°æ®åº“Aã€Bã€C
â€¢ profileè¡¨åˆ†ç‰‡åœ¨æ•°æ®åº“Xã€Yã€Z  
â€¢ æ— æ³•ç›´æ¥ä½¿ç”¨æ•°æ®åº“JOIN
```

### 3.2 åˆ†å¸ƒå¼JOINå®ç°æ–¹æ¡ˆ


**ğŸ”¸ åº”ç”¨å±‚JOIN**

åœ¨åº”ç”¨å±‚æ”¶é›†æ•°æ®åè¿›è¡ŒJOINæ“ä½œï¼š

```java
public class ApplicationJoin {
    
    public List<UserProfile> joinUserAndProfile(List<Integer> userIds) {
        // æ­¥éª¤1ï¼šæŸ¥è¯¢ç”¨æˆ·æ•°æ®
        List<User> users = userService.batchGetUsers(userIds);
        
        // æ­¥éª¤2ï¼šæå–ç”¨æˆ·ID
        List<Integer> ids = users.stream()
            .map(User::getUserId)
            .collect(Collectors.toList());
        
        // æ­¥éª¤3ï¼šæŸ¥è¯¢profileæ•°æ®
        List<Profile> profiles = profileService.batchGetProfiles(ids);
        
        // æ­¥éª¤4ï¼šåœ¨å†…å­˜ä¸­æ‰§è¡ŒJOIN
        Map<Integer, Profile> profileMap = profiles.stream()
            .collect(Collectors.toMap(Profile::getUserId, p -> p));
        
        return users.stream()
            .map(user -> new UserProfile(user, profileMap.get(user.getUserId())))
            .collect(Collectors.toList());
    }
}
```

**ğŸ”¸ æ•°æ®é‡åˆ†å¸ƒJOIN**

æ ¹æ®JOINé”®é‡æ–°åˆ†å¸ƒæ•°æ®ï¼š

```
æ•°æ®é‡åˆ†å¸ƒç¤ºä¾‹ï¼š

åŸå§‹åˆ†ç‰‡ï¼š
åˆ†ç‰‡Aï¼šuser(1,3,5) | profile(2,4,6)
åˆ†ç‰‡Bï¼šuser(2,4,6) | profile(1,3,5)

æŒ‰user_idé‡åˆ†å¸ƒï¼š
åˆ†ç‰‡Aï¼šuser(1,3,5) | profile(1,3,5)  
åˆ†ç‰‡Bï¼šuser(2,4,6) | profile(2,4,6)

ç„¶ååœ¨å„åˆ†ç‰‡å†…æ‰§è¡ŒJOIN
```

### 3.3 JOINç®—æ³•é€‰æ‹©


| JOINç±»å‹ | **é€‚ç”¨åœºæ™¯** | **æ€§èƒ½ç‰¹ç‚¹** | **å®ç°å¤æ‚åº¦** |
|---------|------------|-------------|---------------|
| **åµŒå¥—å¾ªç¯JOIN** | `å°æ•°æ®é›†` | `O(mÃ—n)` | `ç®€å•` |
| **å“ˆå¸ŒJOIN** | `å¤§æ•°æ®é›†ï¼Œå†…å­˜å……è¶³` | `O(m+n)` | `ä¸­ç­‰` |
| **æ’åºåˆå¹¶JOIN** | `æ•°æ®å·²æ’åº` | `O(m log m + n log n)` | `ä¸­ç­‰` |
| **å¹¿æ’­JOIN** | `ä¸€å¼ è¡¨å¾ˆå°` | `O(m+n)` | `å¤æ‚` |

---

## 4. ğŸ’¼ è·¨åº“äº‹åŠ¡æŸ¥è¯¢


### 4.1 è·¨åº“äº‹åŠ¡çš„å¤æ‚æ€§


**ğŸš¨ æ ¸å¿ƒé—®é¢˜**ï¼š
- **ä¸€è‡´æ€§ä¿è¯**ï¼šç¡®ä¿æ‰€æœ‰åˆ†ç‰‡æ•°æ®ä¸€è‡´
- **å¹¶å‘æ§åˆ¶**ï¼šå¤„ç†åˆ†å¸ƒå¼é”å’Œæ­»é”
- **æ•…éšœæ¢å¤**ï¼šéƒ¨åˆ†åˆ†ç‰‡å¤±è´¥æ—¶çš„å¤„ç†

### 4.2 åˆ†å¸ƒå¼äº‹åŠ¡å®ç°


**ğŸ”¸ ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰**

```
2PCæ‰§è¡Œæµç¨‹ï¼š

é˜¶æ®µ1-å‡†å¤‡é˜¶æ®µï¼š
åè°ƒè€… â†’ åˆ†ç‰‡Aï¼šå‡†å¤‡æäº¤äº‹åŠ¡1
åè°ƒè€… â†’ åˆ†ç‰‡Bï¼šå‡†å¤‡æäº¤äº‹åŠ¡2  
åè°ƒè€… â†’ åˆ†ç‰‡Cï¼šå‡†å¤‡æäº¤äº‹åŠ¡3

å„åˆ†ç‰‡è¿”å›ï¼šå‡†å¤‡å°±ç»ª/å¤±è´¥

é˜¶æ®µ2-æäº¤é˜¶æ®µï¼š
å¦‚æœæ‰€æœ‰åˆ†ç‰‡éƒ½å‡†å¤‡å°±ç»ªï¼š
åè°ƒè€… â†’ æ‰€æœ‰åˆ†ç‰‡ï¼šæäº¤äº‹åŠ¡

å¦‚æœæœ‰åˆ†ç‰‡å¤±è´¥ï¼š
åè°ƒè€… â†’ æ‰€æœ‰åˆ†ç‰‡ï¼šå›æ»šäº‹åŠ¡
```

**ğŸ”¸ äº‹åŠ¡è¡¥å¿æ¨¡å¼ï¼ˆTCCï¼‰**

```java
public class TCCTransactionExample {
    
    // Tryé˜¶æ®µï¼šå°è¯•æ‰§è¡Œä¸šåŠ¡
    public boolean tryTransfer(String fromAccount, String toAccount, BigDecimal amount) {
        // å†»ç»“è½¬å‡ºè´¦æˆ·èµ„é‡‘
        boolean tryResult1 = accountService.freeze(fromAccount, amount);
        // é¢„ç•™è½¬å…¥è´¦æˆ·é¢åº¦
        boolean tryResult2 = accountService.reserve(toAccount, amount);
        
        return tryResult1 && tryResult2;
    }
    
    // Confirmé˜¶æ®µï¼šç¡®è®¤æ‰§è¡Œ
    public void confirmTransfer(String fromAccount, String toAccount, BigDecimal amount) {
        // æ‰£å‡è½¬å‡ºè´¦æˆ·èµ„é‡‘
        accountService.deduct(fromAccount, amount);
        // å¢åŠ è½¬å…¥è´¦æˆ·èµ„é‡‘
        accountService.add(toAccount, amount);
    }
    
    // Cancelé˜¶æ®µï¼šå–æ¶ˆæ‰§è¡Œ
    public void cancelTransfer(String fromAccount, String toAccount, BigDecimal amount) {
        // è§£å†»è½¬å‡ºè´¦æˆ·èµ„é‡‘
        accountService.unfreeze(fromAccount, amount);
        // é‡Šæ”¾è½¬å…¥è´¦æˆ·é¢åº¦
        accountService.release(toAccount, amount);
    }
}
```

### 4.3 æŸ¥è¯¢äº‹åŠ¡éš”ç¦»


**äº‹åŠ¡éš”ç¦»çº§åˆ«åœ¨åˆ†ç‰‡ç¯å¢ƒä¸‹çš„æŒ‘æˆ˜**ï¼š

```sql
-- åœ¨åˆ†ç‰‡ç¯å¢ƒä¸‹ï¼Œè¿™ä¸ªæŸ¥è¯¢å¯èƒ½çœ‹åˆ°ä¸ä¸€è‡´çš„æ•°æ®
BEGIN;
SELECT COUNT(*) FROM order WHERE status = 'pending';
-- å¦‚æœæ­¤æ—¶æœ‰å…¶ä»–äº‹åŠ¡åœ¨ä¿®æ”¹ä¸åŒåˆ†ç‰‡çš„è®¢å•çŠ¶æ€
-- å¯èƒ½å¯¼è‡´è¯»å–åˆ°éƒ¨åˆ†æ–°æ•°æ®å’Œéƒ¨åˆ†æ—§æ•°æ®
COMMIT;
```

---

## 5. ğŸ“Š æ•°æ®èšåˆè®¡ç®—


### 5.1 èšåˆå‡½æ•°çš„åˆ†å¸ƒå¼å®ç°


**ğŸ”¸ å¯åˆ†è§£èšåˆå‡½æ•°**

è¿™äº›å‡½æ•°å¯ä»¥åœ¨å„åˆ†ç‰‡å…ˆè®¡ç®—ï¼Œå†åˆå¹¶ç»“æœï¼š

```sql
-- COUNTï¼šå„åˆ†ç‰‡è®¡ç®—countï¼Œæœ€åæ±‚å’Œ
SELECT COUNT(*) FROM user WHERE age > 18;

åˆ†ç‰‡1: COUNT = 100
åˆ†ç‰‡2: COUNT = 150  
åˆ†ç‰‡3: COUNT = 200
æœ€ç»ˆç»“æœ: 100 + 150 + 200 = 450
```

```sql
-- SUMï¼šå„åˆ†ç‰‡è®¡ç®—sumï¼Œæœ€åæ±‚å’Œ
SELECT SUM(amount) FROM order WHERE date = '2025-01-01';

åˆ†ç‰‡1: SUM = 10000
åˆ†ç‰‡2: SUM = 15000
åˆ†ç‰‡3: SUM = 20000  
æœ€ç»ˆç»“æœ: 10000 + 15000 + 20000 = 45000
```

**ğŸ”¸ ä¸å¯åˆ†è§£èšåˆå‡½æ•°**

è¿™äº›å‡½æ•°éœ€è¦æ±‡æ€»æ‰€æœ‰æ•°æ®åé‡æ–°è®¡ç®—ï¼š

```sql
-- AVGï¼šéœ€è¦æ”¶é›†æ‰€æœ‰SUMå’ŒCOUNTï¼Œé‡æ–°è®¡ç®—
SELECT AVG(amount) FROM order;

åˆ†ç‰‡1: SUM=10000, COUNT=100
åˆ†ç‰‡2: SUM=15000, COUNT=150
åˆ†ç‰‡3: SUM=20000, COUNT=200
æœ€ç»ˆç»“æœ: (10000+15000+20000)/(100+150+200) = 100
```

### 5.2 åˆ†å¸ƒå¼GROUP BYå®ç°


**ğŸ”§ GROUP BYå®ç°ç­–ç•¥**

```java
public class DistributedGroupBy {
    
    public Map<String, Integer> groupByRegion() {
        // æ­¥éª¤1ï¼šå„åˆ†ç‰‡æ‰§è¡ŒGROUP BY
        List<Map<String, Integer>> shardResults = new ArrayList<>();
        
        for (DataSource shard : shards) {
            String sql = "SELECT region, COUNT(*) as cnt FROM user GROUP BY region";
            Map<String, Integer> result = executeQuery(shard, sql);
            shardResults.add(result);
        }
        
        // æ­¥éª¤2ï¼šåˆå¹¶åˆ†ç»„ç»“æœ
        Map<String, Integer> finalResult = new HashMap<>();
        for (Map<String, Integer> result : shardResults) {
            for (Map.Entry<String, Integer> entry : result.entrySet()) {
                finalResult.merge(entry.getKey(), entry.getValue(), Integer::sum);
            }
        }
        
        return finalResult;
    }
}
```

### 5.3 è·¨åˆ†ç‰‡èšåˆå‡½æ•°ä¼˜åŒ–


**æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**ï¼š

> ğŸ’¡ **æç¤º**ï¼šé¢„èšåˆç­–ç•¥
> åœ¨åˆ†ç‰‡å†…é¢„å…ˆè®¡ç®—éƒ¨åˆ†èšåˆç»“æœï¼Œå‡å°‘ç½‘ç»œä¼ è¾“æ•°æ®é‡

> âš ï¸ **æ³¨æ„**ï¼šå†…å­˜é™åˆ¶
> å¤§æ•°æ®é‡èšåˆæ—¶è¦æ³¨æ„å†…å­˜æº¢å‡ºé—®é¢˜ï¼Œè€ƒè™‘åˆ†æ‰¹å¤„ç†

```java
// åˆ†æ‰¹èšåˆå¤„ç†
public BigDecimal calculateLargeSum(String tableName) {
    BigDecimal totalSum = BigDecimal.ZERO;
    int batchSize = 10000;
    int offset = 0;
    
    while (true) {
        String sql = String.format(
            "SELECT SUM(amount) FROM %s LIMIT %d OFFSET %d", 
            tableName, batchSize, offset
        );
        
        BigDecimal batchSum = executeAggregateQuery(sql);
        if (batchSum == null) break;
        
        totalSum = totalSum.add(batchSum);
        offset += batchSize;
    }
    
    return totalSum;
}
```

---

## 6. ğŸ“„ å…¨å±€æ’åºåˆ†é¡µ


### 6.1 åˆ†å¸ƒå¼æ’åºçš„æŒ‘æˆ˜


**æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•åœ¨å¤šä¸ªåˆ†ç‰‡ä¸­å®ç°å…¨å±€æœ‰åºçš„ç»“æœé›†ï¼Ÿ

```
å•æœºæ’åº vs åˆ†å¸ƒå¼æ’åºï¼š

å•æœºæ’åºï¼š
[3,1,4,2,5] â†’ æ’åº â†’ [1,2,3,4,5]

åˆ†å¸ƒå¼æ’åºï¼š
åˆ†ç‰‡1: [3,1,7] â†’ æ’åº â†’ [1,3,7]
åˆ†ç‰‡2: [4,2,6] â†’ æ’åº â†’ [2,4,6]  
åˆ†ç‰‡3: [9,5,8] â†’ æ’åº â†’ [5,8,9]

å¦‚ä½•åˆå¹¶æˆå…¨å±€æœ‰åºï¼Ÿ[1,2,3,4,5,6,7,8,9]
```

### 6.2 å½’å¹¶æ’åºå®ç°


**ğŸ”§ å¤šè·¯å½’å¹¶ç®—æ³•**

```java
public class DistributedSort {
    
    public List<Order> globalSort(List<String> shardSqls, int limit) {
        // æ­¥éª¤1ï¼šä»å„åˆ†ç‰‡è·å–æ’åºç»“æœ
        List<Iterator<Order>> iterators = new ArrayList<>();
        for (String sql : shardSqls) {
            List<Order> shardResult = executeQuery(sql);
            iterators.add(shardResult.iterator());
        }
        
        // æ­¥éª¤2ï¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œå½’å¹¶
        PriorityQueue<OrderWithShard> pq = new PriorityQueue<>(
            Comparator.comparing(o -> o.order.getCreateTime())
        );
        
        // åˆå§‹åŒ–ä¼˜å…ˆé˜Ÿåˆ—
        for (int i = 0; i < iterators.size(); i++) {
            Iterator<Order> iter = iterators.get(i);
            if (iter.hasNext()) {
                pq.offer(new OrderWithShard(iter.next(), i, iter));
            }
        }
        
        // æ­¥éª¤3ï¼šå½’å¹¶æ’åº
        List<Order> result = new ArrayList<>();
        while (!pq.isEmpty() && result.size() < limit) {
            OrderWithShard current = pq.poll();
            result.add(current.order);
            
            // ä»å¯¹åº”åˆ†ç‰‡ç»§ç»­å–ä¸‹ä¸€ä¸ªå…ƒç´ 
            if (current.iterator.hasNext()) {
                pq.offer(new OrderWithShard(
                    current.iterator.next(), 
                    current.shardIndex, 
                    current.iterator
                ));
            }
        }
        
        return result;
    }
}
```

### 6.3 åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–


**ğŸ¯ LIMIT OFFSETä¼˜åŒ–**

```java
public class DistributedPagination {
    
    // ä¼˜åŒ–å‰ï¼šç®€å•ç²—æš´çš„æ–¹å¼
    public List<Order> getPageNaive(int page, int size) {
        int offset = page * size;
        int limit = size;
        
        // é—®é¢˜ï¼šæ¯ä¸ªåˆ†ç‰‡éƒ½è¦è¿”å›offset+limitæ¡è®°å½•
        String sql = String.format(
            "SELECT * FROM order ORDER BY create_time LIMIT %d OFFSET %d",
            limit, offset
        );
        
        // å¦‚æœæœ‰10ä¸ªåˆ†ç‰‡ï¼Œpage=100, size=20
        // æ¯ä¸ªåˆ†ç‰‡éœ€è¦è¿”å›2020æ¡è®°å½•ï¼Œæ€»å…±20200æ¡
        // æœ€ååªå–20æ¡ï¼Œæµªè´¹ä¸¥é‡ï¼
    }
    
    // ä¼˜åŒ–åï¼šåŸºäºæ¸¸æ ‡çš„åˆ†é¡µ
    public List<Order> getPageOptimized(String cursor, int size) {
        List<List<Order>> shardResults = new ArrayList<>();
        
        for (DataSource shard : shards) {
            String sql;
            if (cursor == null) {
                sql = String.format(
                    "SELECT * FROM order ORDER BY create_time LIMIT %d", 
                    size
                );
            } else {
                sql = String.format(
                    "SELECT * FROM order WHERE create_time > '%s' " +
                    "ORDER BY create_time LIMIT %d",
                    cursor, size
                );
            }
            shardResults.add(executeQuery(shard, sql));
        }
        
        // å½’å¹¶æ’åºå–å‰sizeæ¡
        return mergeSort(shardResults, size);
    }
}
```

**åˆ†é¡µæ€§èƒ½å¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | **ç¬¬1é¡µ** | **ç¬¬100é¡µ** | **ç¬¬1000é¡µ** |
|------|----------|-------------|-------------|
| **OFFSETæ–¹å¼** | `å¿«` | `è¾ƒæ…¢` | `å¾ˆæ…¢` |
| **æ¸¸æ ‡æ–¹å¼** | `å¿«` | `å¿«` | `å¿«` |
| **ç½‘ç»œä¼ è¾“é‡** | `å°` | `å¤§` | `å·¨å¤§` |

---

## 7. âš¡ æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–


### 7.1 ç´¢å¼•ä¼˜åŒ–ç­–ç•¥


**ğŸ”¸ å…¨å±€ç´¢å¼•vsæœ¬åœ°ç´¢å¼•**

```
æœ¬åœ°ç´¢å¼•ï¼š
åˆ†ç‰‡1: userè¡¨(id, name) + ç´¢å¼•(name)
åˆ†ç‰‡2: userè¡¨(id, name) + ç´¢å¼•(name)  
åˆ†ç‰‡3: userè¡¨(id, name) + ç´¢å¼•(name)

æŸ¥è¯¢WHERE name='å¼ ä¸‰'ï¼š
éœ€è¦æŸ¥è¯¢æ‰€æœ‰3ä¸ªåˆ†ç‰‡

å…¨å±€ç´¢å¼•ï¼š
å…¨å±€ç´¢å¼•è¡¨: name â†’ åˆ†ç‰‡ä½ç½®
å¼ ä¸‰ â†’ åˆ†ç‰‡2
æå›› â†’ åˆ†ç‰‡1

æŸ¥è¯¢WHERE name='å¼ ä¸‰'ï¼š
å…ˆæŸ¥å…¨å±€ç´¢å¼•æ‰¾åˆ°åˆ†ç‰‡2ï¼Œå†æŸ¥åˆ†ç‰‡2
```

### 7.2 æŸ¥è¯¢ç¼“å­˜ç­–ç•¥


**ğŸ”§ å¤šå±‚ç¼“å­˜æ¶æ„**

```
ç¼“å­˜å±‚æ¬¡ï¼š

L1ç¼“å­˜ (åº”ç”¨å†…å­˜)ï¼š
HashMap<String, Object> localCache
â€¢ å“åº”æ—¶é—´ï¼š1-5ms
â€¢ å®¹é‡ï¼šæœ‰é™
â€¢ ä¸€è‡´æ€§ï¼šæœ€ç»ˆä¸€è‡´

L2ç¼“å­˜ (Redisé›†ç¾¤)ï¼š  
Redis Cluster
â€¢ å“åº”æ—¶é—´ï¼š5-50ms
â€¢ å®¹é‡ï¼šå¤§
â€¢ ä¸€è‡´æ€§ï¼šå¼ºä¸€è‡´

L3ç¼“å­˜ (åˆ†ç‰‡ç»“æœç¼“å­˜)ï¼š
æ¯ä¸ªåˆ†ç‰‡ç»´æŠ¤æŸ¥è¯¢ç»“æœç¼“å­˜
â€¢ å‡å°‘é‡å¤è®¡ç®—
â€¢ æé«˜èšåˆæŸ¥è¯¢æ€§èƒ½
```

```java
public class QueryCache {
    
    private final Map<String, Object> l1Cache = new ConcurrentHashMap<>();
    private final RedisTemplate<String, Object> l2Cache;
    
    public <T> T query(String key, Supplier<T> dataLoader) {
        // L1ç¼“å­˜æŸ¥è¯¢
        T result = (T) l1Cache.get(key);
        if (result != null) {
            return result;
        }
        
        // L2ç¼“å­˜æŸ¥è¯¢
        result = (T) l2Cache.opsForValue().get(key);
        if (result != null) {
            l1Cache.put(key, result);
            return result;
        }
        
        // æŸ¥è¯¢æ•°æ®åº“
        result = dataLoader.get();
        if (result != null) {
            l2Cache.opsForValue().set(key, result, Duration.ofMinutes(30));
            l1Cache.put(key, result);
        }
        
        return result;
    }
}
```

### 7.3 å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–


**ğŸš€ æŸ¥è¯¢å¹¶è¡ŒåŒ–**

```java
public class ParallelQuery {
    
    private final ExecutorService executor = Executors.newFixedThreadPool(20);
    
    public List<User> parallelQuery(List<String> sqls) {
        // åˆ›å»ºå¹¶è¡Œä»»åŠ¡
        List<CompletableFuture<List<User>>> futures = sqls.stream()
            .map(sql -> CompletableFuture.supplyAsync(() -> {
                return executeQuery(sql);
            }, executor))
            .collect(Collectors.toList());
        
        // ç­‰å¾…æ‰€æœ‰æŸ¥è¯¢å®Œæˆ
        CompletableFuture<Void> allQueries = CompletableFuture.allOf(
            futures.toArray(new CompletableFuture[0])
        );
        
        try {
            // è®¾ç½®è¶…æ—¶æ—¶é—´
            allQueries.get(5, TimeUnit.SECONDS);
            
            // æ”¶é›†ç»“æœ
            return futures.stream()
                .map(CompletableFuture::join)
                .flatMap(List::stream)
                .collect(Collectors.toList());
                
        } catch (TimeoutException e) {
            // å¤„ç†è¶…æ—¶
            futures.forEach(f -> f.cancel(true));
            throw new RuntimeException("æŸ¥è¯¢è¶…æ—¶");
        }
    }
}
```

---

## 8. ğŸ“‹ åˆ†å¸ƒå¼æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’


### 8.1 æŸ¥è¯¢è§£æä¸ä¼˜åŒ–


**ğŸ”§ SQLè§£ææµç¨‹**

```
SQLè§£ææµç¨‹ï¼š

åŸå§‹SQL:
SELECT u.name, COUNT(o.id) 
FROM user u 
JOIN order o ON u.id = o.user_id 
WHERE u.age > 25 
GROUP BY u.name 
ORDER BY COUNT(o.id) DESC 
LIMIT 10

æ­¥éª¤1: è¯­æ³•è§£æ
æ„å»ºASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰

æ­¥éª¤2: è¯­ä¹‰åˆ†æ  
â€¢ è¡¨å­˜åœ¨æ€§æ£€æŸ¥
â€¢ å­—æ®µå­˜åœ¨æ€§æ£€æŸ¥
â€¢ ç±»å‹å…¼å®¹æ€§æ£€æŸ¥

æ­¥éª¤3: æŸ¥è¯¢ä¼˜åŒ–
â€¢ è°“è¯ä¸‹æ¨
â€¢ æŠ•å½±ä¸‹æ¨  
â€¢ JOINé‡æ’åº

æ­¥éª¤4: æ‰§è¡Œè®¡åˆ’ç”Ÿæˆ
ç”Ÿæˆåˆ†å¸ƒå¼æ‰§è¡Œè®¡åˆ’
```

### 8.2 æ‰§è¡Œè®¡åˆ’ä¼˜åŒ–


**ğŸ¯ æŸ¥è¯¢é‡å†™ç­–ç•¥**

```java
public class QueryOptimizer {
    
    // è°“è¯ä¸‹æ¨ä¼˜åŒ–
    public String pushDownPredicate(String originalSql) {
        // åŸSQL: SELECT * FROM user WHERE age > 25
        // ä¼˜åŒ–å: åœ¨å„åˆ†ç‰‡å…ˆæ‰§è¡ŒWHEREæ¡ä»¶ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“
        
        if (originalSql.contains("WHERE")) {
            return originalSql; // å·²ç»æœ‰WHEREæ¡ä»¶
        }
        
        // æ·»åŠ åˆ†ç‰‡é”®è¿‡æ»¤
        return originalSql + " WHERE shard_key = " + getCurrentShardKey();
    }
    
    // JOINé‡æ’åºä¼˜åŒ–
    public ExecutionPlan optimizeJoinOrder(List<String> tables) {
        // åŸºäºæˆæœ¬æ¨¡å‹é€‰æ‹©æœ€ä¼˜JOINé¡ºåº
        // å°è¡¨ä¼˜å…ˆã€ç´¢å¼•è¡¨ä¼˜å…ˆ
        
        tables.sort((t1, t2) -> {
            int size1 = getTableSize(t1);
            int size2 = getTableSize(t2);
            return Integer.compare(size1, size2);
        });
        
        return new ExecutionPlan(tables);
    }
}
```

### 8.3 æ‰§è¡Œè®¡åˆ’ç›‘æ§


**ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡**

```java
public class QueryMetrics {
    
    public void recordQueryExecution(String sql, long duration, int shardCount) {
        // è®°å½•æŸ¥è¯¢æŒ‡æ ‡
        MetricsRegistry.timer("query.duration")
            .record(duration, TimeUnit.MILLISECONDS);
            
        MetricsRegistry.counter("query.shard.count")
            .increment(shardCount);
            
        // æ…¢æŸ¥è¯¢å‘Šè­¦
        if (duration > 5000) { // è¶…è¿‡5ç§’
            AlertManager.sendAlert("æ…¢æŸ¥è¯¢å‘Šè­¦", sql, duration);
        }
    }
    
    // æŸ¥è¯¢æ€§èƒ½åˆ†æ
    public QueryAnalysis analyzeQuery(String sql) {
        return QueryAnalysis.builder()
            .sql(sql)
            .estimatedCost(calculateCost(sql))
            .recommendedIndexes(suggestIndexes(sql))
            .optimizationHints(getOptimizationHints(sql))
            .build();
    }
}
```

---

## 9. ğŸ¯ é«˜çº§æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥


### 9.1 åˆ†å¸ƒå¼å­æŸ¥è¯¢ä¼˜åŒ–


**ğŸ”¸ å­æŸ¥è¯¢é‡å†™**

```sql
-- åŸå§‹SQLï¼ˆæ€§èƒ½å·®ï¼‰
SELECT * FROM user 
WHERE user_id IN (
    SELECT user_id FROM order WHERE amount > 1000
);

-- ä¼˜åŒ–åï¼ˆJOINæ–¹å¼ï¼‰
SELECT DISTINCT u.* FROM user u 
JOIN order o ON u.user_id = o.user_id 
WHERE o.amount > 1000;
```

**ğŸ”§ EXISTSå­æŸ¥è¯¢ä¼˜åŒ–**

```java
public class SubqueryOptimizer {
    
    public List<User> optimizeExistsQuery(BigDecimal minAmount) {
        // åŸå§‹æ–¹æ¡ˆï¼šå¯¹æ¯ä¸ªç”¨æˆ·éƒ½æ‰§è¡Œå­æŸ¥è¯¢
        // SELECT * FROM user u WHERE EXISTS (
        //   SELECT 1 FROM order o WHERE o.user_id = u.user_id AND o.amount > 1000
        // )
        
        // ä¼˜åŒ–æ–¹æ¡ˆï¼šå…ˆæŸ¥è®¢å•ï¼Œå†å…³è”ç”¨æˆ·
        Set<Integer> userIds = orderService.getUserIdsWithHighAmount(minAmount);
        return userService.batchGetUsers(new ArrayList<>(userIds));
    }
}
```

### 9.2 UNIONæŸ¥è¯¢ä¼˜åŒ–


**ğŸ”§ åˆ†å¸ƒå¼UNIONå®ç°**

```java
public class DistributedUnion {
    
    public List<Object> executeUnionQuery(List<String> sqls) {
        // å¹¶è¡Œæ‰§è¡Œå„ä¸ªå­æŸ¥è¯¢
        List<CompletableFuture<List<Object>>> futures = sqls.stream()
            .map(sql -> CompletableFuture.supplyAsync(() -> executeQuery(sql)))
            .collect(Collectors.toList());
        
        // åˆå¹¶ç»“æœå¹¶å»é‡ï¼ˆUNIONï¼‰
        Set<Object> unionResult = futures.stream()
            .map(CompletableFuture::join)
            .flatMap(List::stream)
            .collect(Collectors.toSet());
        
        return new ArrayList<>(unionResult);
    }
    
    public List<Object> executeUnionAllQuery(List<String> sqls) {
        // UNION ALLï¼šä¸å»é‡ï¼Œç›´æ¥åˆå¹¶
        return sqls.stream()
            .map(this::executeQuery)
            .flatMap(List::stream)
            .collect(Collectors.toList());
    }
}
```

### 9.3 çª—å£å‡½æ•°åˆ†å¸ƒå¼å®ç°


**ğŸ”§ ROW_NUMBERåˆ†å¸ƒå¼å®ç°**

```java
public class DistributedWindowFunction {
    
    public List<OrderWithRowNum> rowNumberOverPartition() {
        // SQL: SELECT *, ROW_NUMBER() OVER (PARTITION BY user_id ORDER BY create_time) 
        //      FROM order
        
        // æ­¥éª¤1ï¼šå„åˆ†ç‰‡æ‰§è¡Œçª—å£å‡½æ•°
        List<List<OrderWithRowNum>> shardResults = new ArrayList<>();
        for (DataSource shard : shards) {
            String sql = "SELECT *, ROW_NUMBER() OVER (PARTITION BY user_id ORDER BY create_time) as rn FROM order";
            shardResults.add(executeQuery(shard, sql));
        }
        
        // æ­¥éª¤2ï¼šæŒ‰partitioné‡æ–°åˆ†ç»„å’Œæ’åº
        Map<Integer, List<OrderWithRowNum>> partitionMap = shardResults.stream()
            .flatMap(List::stream)
            .collect(Collectors.groupingBy(o -> o.getUserId()));
        
        List<OrderWithRowNum> result = new ArrayList<>();
        for (List<OrderWithRowNum> partition : partitionMap.values()) {
            // é‡æ–°è®¡ç®—ROW_NUMBER
            partition.sort(Comparator.comparing(o -> o.getCreateTime()));
            for (int i = 0; i < partition.size(); i++) {
                partition.get(i).setRowNumber(i + 1);
            }
            result.addAll(partition);
        }
        
        return result;
    }
}
```

### 9.4 æŸ¥è¯¢ç»“æœç¼“å­˜ä¼˜åŒ–


**ğŸš€ æ™ºèƒ½ç¼“å­˜ç­–ç•¥**

```java
public class IntelligentCache {
    
    private final LoadingCache<String, Object> queryCache;
    
    public IntelligentCache() {
        this.queryCache = Caffeine.newBuilder()
            .maximumSize(10000)
            .expireAfterWrite(Duration.ofMinutes(30))
            .refreshAfterWrite(Duration.ofMinutes(10))
            .buildAsync(this::loadFromDatabase);
    }
    
    public <T> T smartQuery(String sql, Class<T> resultType) {
        // åˆ†æSQLï¼Œåˆ¤æ–­æ˜¯å¦é€‚åˆç¼“å­˜
        if (shouldCache(sql)) {
            String cacheKey = generateCacheKey(sql);
            return (T) queryCache.get(cacheKey);
        }
        
        // ä¸é€‚åˆç¼“å­˜ï¼Œç›´æ¥æŸ¥è¯¢
        return executeQuery(sql, resultType);
    }
    
    private boolean shouldCache(String sql) {
        // åˆ¤æ–­ç¼“å­˜é€‚ç”¨æ€§
        return !sql.toLowerCase().contains("rand()")     // ä¸åŒ…å«éšæœºå‡½æ•°
            && !sql.toLowerCase().contains("now()")      // ä¸åŒ…å«æ—¶é—´å‡½æ•°
            && sql.toLowerCase().contains("select")      // åªç¼“å­˜æŸ¥è¯¢
            && !sql.toLowerCase().contains("limit");     // ä¸ç¼“å­˜åˆ†é¡µæŸ¥è¯¢
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è·¨åˆ†ç‰‡æŸ¥è¯¢ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„å¤šåˆ†ç‰‡æ•°æ®æŸ¥è¯¢æ“ä½œ
ğŸ”¸ æŸ¥è¯¢è·¯ç”±ï¼šæ ¹æ®åˆ†ç‰‡é”®ç¡®å®šæŸ¥è¯¢ç›®æ ‡åˆ†ç‰‡çš„ç­–ç•¥
ğŸ”¸ ç»“æœåˆå¹¶ï¼šå°†å¤šä¸ªåˆ†ç‰‡çš„æŸ¥è¯¢ç»“æœè¿›è¡Œèšåˆå¤„ç†
ğŸ”¸ åˆ†å¸ƒå¼JOINï¼šåœ¨åˆ†ç‰‡ç¯å¢ƒä¸‹å®ç°è¡¨å…³è”æŸ¥è¯¢
ğŸ”¸ å…¨å±€æ’åºï¼šè·¨åˆ†ç‰‡å®ç°å…¨å±€æœ‰åºçš„æŸ¥è¯¢ç»“æœ
ğŸ”¸ äº‹åŠ¡ä¸€è‡´æ€§ï¼šä¿è¯è·¨åˆ†ç‰‡æ“ä½œçš„æ•°æ®ä¸€è‡´æ€§
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ€§èƒ½ä¸å¤æ‚åº¦çš„æƒè¡¡**
```
ç®€å•æŸ¥è¯¢ç­–ç•¥ï¼š
â€¢ å®ç°ç®€å•ï¼Œå¼€å‘æˆæœ¬ä½
â€¢ æ€§èƒ½å¯èƒ½ä¸æ˜¯æœ€ä¼˜
â€¢ é€‚åˆä¸šåŠ¡åˆæœŸ

å¤æ‚ä¼˜åŒ–ç­–ç•¥ï¼š
â€¢ æ€§èƒ½æ›´å¥½ï¼Œèµ„æºåˆ©ç”¨ç‡é«˜  
â€¢ å®ç°å¤æ‚ï¼Œç»´æŠ¤æˆæœ¬é«˜
â€¢ é€‚åˆé«˜å¹¶å‘å¤§æ•°æ®é‡åœºæ™¯
```

**ğŸ”¹ ä¸€è‡´æ€§ä¸æ€§èƒ½çš„å¹³è¡¡**
```
å¼ºä¸€è‡´æ€§ï¼š
â€¢ æ•°æ®ç»å¯¹å‡†ç¡®
â€¢ æ€§èƒ½å¼€é”€å¤§
â€¢ é€‚åˆé‡‘èç­‰å…³é”®ä¸šåŠ¡

æœ€ç»ˆä¸€è‡´æ€§ï¼š
â€¢ å…è®¸çŸ­æš‚ä¸ä¸€è‡´
â€¢ æ€§èƒ½æ›´å¥½
â€¢ é€‚åˆå¯¹ä¸€è‡´æ€§è¦æ±‚ä¸ä¸¥æ ¼çš„åœºæ™¯
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†å¹³å°**ï¼šè®¢å•æŸ¥è¯¢ã€ç”¨æˆ·ç”»åƒåˆ†æã€å•†å“æ¨è
- **é‡‘èç³»ç»Ÿ**ï¼šäº¤æ˜“è®°å½•æŸ¥è¯¢ã€é£æ§åˆ†æã€æŠ¥è¡¨ç»Ÿè®¡  
- **ç¤¾äº¤åº”ç”¨**ï¼šç”¨æˆ·å…³ç³»æŸ¥è¯¢ã€å†…å®¹æ¨èã€æ•°æ®åˆ†æ
- **ç‰©æµç³»ç»Ÿ**ï¼šåŒ…è£¹è·Ÿè¸ªã€è·¯å¾„ä¼˜åŒ–ã€é…é€åˆ†æ

**ğŸ”§ æŠ€æœ¯é€‰å‹æŒ‡å¯¼**

> ğŸ’¡ **æ•°æ®é‡å°äº1TB**ï¼šè€ƒè™‘è¯»å†™åˆ†ç¦»ï¼Œæš‚ä¸åˆ†ç‰‡
> 
> âš ï¸ **æ•°æ®é‡1-10TB**ï¼šæŒ‰ä¸šåŠ¡ç»´åº¦å‚ç›´åˆ†ç‰‡
> 
> ğŸš¨ **æ•°æ®é‡å¤§äº10TB**ï¼šè€ƒè™‘æ°´å¹³åˆ†ç‰‡+å‚ç›´åˆ†ç‰‡ç»„åˆ

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š

| åœºæ™¯ | **æ¨èç­–ç•¥** | **æ³¨æ„äº‹é¡¹** |
|------|-------------|-------------|
| **ç®€å•æŸ¥è¯¢** | `åˆ†ç‰‡é”®è·¯ç”± + æœ¬åœ°ç´¢å¼•` | `é¿å…è·¨åˆ†ç‰‡æŸ¥è¯¢` |
| **å¤æ‚èšåˆ** | `é¢„èšåˆ + ç¼“å­˜` | `æ§åˆ¶å†…å­˜ä½¿ç”¨` |
| **å¤§é‡JOIN** | `æ•°æ®å†—ä½™ + åº”ç”¨å±‚JOIN` | `ä¿è¯æ•°æ®ä¸€è‡´æ€§` |
| **å®æ—¶åˆ†æ** | `OLAPå¼•æ“ + æ•°æ®åŒæ­¥` | `é€‰æ‹©åˆé€‚çš„åˆ†æå·¥å…·` |

**ğŸš€ å‘å±•è¶‹åŠ¿**
- **è‡ªåŠ¨åŒ–åˆ†ç‰‡**ï¼šåŸºäºAIçš„æ™ºèƒ½åˆ†ç‰‡ç­–ç•¥
- **äº‘åŸç”Ÿ**ï¼šå®¹å™¨åŒ–éƒ¨ç½²å’Œå¼¹æ€§æ‰©ç¼©å®¹
- **å®æ—¶è®¡ç®—**ï¼šæµå¼è®¡ç®—å’Œå®æ—¶OLAP
- **ç»Ÿä¸€æ¥å£**ï¼šSQLæ ‡å‡†åŒ–çš„åˆ†å¸ƒå¼æŸ¥è¯¢å¼•æ“

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- åˆ†ç‰‡æŸ¥è¯¢æ ¸å¿ƒæ˜¯è·¯ç”±å’Œåˆå¹¶ï¼Œè¦å¹³è¡¡æ€§èƒ½ä¸å¤æ‚åº¦
- JOINæ“ä½œæ˜¯åˆ†å¸ƒå¼æŸ¥è¯¢çš„æœ€å¤§æŒ‘æˆ˜ï¼Œä¼˜å…ˆè€ƒè™‘æ•°æ®å†—ä½™
- èšåˆè®¡ç®—è¦åŒºåˆ†å¯åˆ†è§£å’Œä¸å¯åˆ†è§£å‡½æ•°ï¼Œé€‰æ‹©åˆé€‚ç­–ç•¥
- æ’åºåˆ†é¡µä¼˜åŒ–é‡ç‚¹æ˜¯å‡å°‘ç½‘ç»œä¼ è¾“ï¼Œé¿å…å¤§é‡æ— æ•ˆæ•°æ®
- ç¼“å­˜æ˜¯æå‡æ€§èƒ½çš„å…³é”®ï¼Œè¦æ ¹æ®æŸ¥è¯¢ç‰¹ç‚¹è®¾è®¡ç¼“å­˜ç­–ç•¥