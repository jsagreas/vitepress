---
title: 3ã€åŠ¨æ€SQLæ„å»ºæŠ€æœ¯
---
## ğŸ“š ç›®å½•

1. [åŠ¨æ€SQLåŸºç¡€æ¦‚å¿µ](#1-åŠ¨æ€sqlåŸºç¡€æ¦‚å¿µ)
2. [åŠ¨æ€SQLæ‹¼æ¥æ–¹æ³•](#2-åŠ¨æ€sqlæ‹¼æ¥æ–¹æ³•)
3. [å­—ç¬¦ä¸²æ„å»ºæŠ€æœ¯](#3-å­—ç¬¦ä¸²æ„å»ºæŠ€æœ¯)
4. [æ¡ä»¶åˆ†æ”¯æ„å»º](#4-æ¡ä»¶åˆ†æ”¯æ„å»º)
5. [è¡¨åå­—æ®µååŠ¨æ€åŒ–](#5-è¡¨åå­—æ®µååŠ¨æ€åŒ–)
6. [SQLæ¨¡æ¿å¼•æ“](#6-sqlæ¨¡æ¿å¼•æ“)
7. [SQLæ„å»ºå™¨Builderæ¨¡å¼](#7-sqlæ„å»ºå™¨builderæ¨¡å¼)
8. [åŠ¨æ€SQLæ€§èƒ½ä¼˜åŒ–](#8-åŠ¨æ€sqlæ€§èƒ½ä¼˜åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ åŠ¨æ€SQLåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯åŠ¨æ€SQL


**ç®€å•ç†è§£**ï¼šåŠ¨æ€SQLå°±æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œæ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥å‡ºä¸åŒçš„SQLè¯­å¥ã€‚

```
é™æ€SQLï¼ˆå›ºå®šä¸å˜ï¼‰ï¼š
SELECT * FROM users WHERE id = 1

åŠ¨æ€SQLï¼ˆæ ¹æ®æ¡ä»¶å˜åŒ–ï¼‰ï¼š
å¦‚æœç”¨æˆ·è¾“å…¥äº†å§“åï¼šSELECT * FROM users WHERE name = 'å¼ ä¸‰'
å¦‚æœç”¨æˆ·è¾“å…¥äº†å¹´é¾„ï¼šSELECT * FROM users WHERE age > 25
å¦‚æœä¸¤ä¸ªéƒ½è¾“å…¥äº†ï¼šSELECT * FROM users WHERE name = 'å¼ ä¸‰' AND age > 25
```

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€SQLï¼Ÿ**
- **çµæ´»æŸ¥è¯¢**ï¼šç”¨æˆ·å¯èƒ½æœç´¢ä¸åŒå­—æ®µç»„åˆ
- **æ¡ä»¶å¯å˜**ï¼šæŸ¥è¯¢æ¡ä»¶æ•°é‡å’Œç±»å‹ä¸å›ºå®š
- **ä¸šåŠ¡å¤æ‚æ€§**ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘éœ€è¦ä¸åŒçš„SQL

### 1.2 åŠ¨æ€SQLçš„åº”ç”¨åœºæ™¯


**ğŸ’¡ å…¸å‹ä½¿ç”¨åœºæ™¯**ï¼š
```
ğŸ“‹ æœç´¢åŠŸèƒ½ï¼š
- å•†å“æœç´¢ï¼šæŒ‰åç§°ã€ä»·æ ¼ã€åˆ†ç±»ç­‰å¤šæ¡ä»¶ç­›é€‰
- ç”¨æˆ·æŸ¥è¯¢ï¼šæŒ‰å§“åã€å¹´é¾„ã€éƒ¨é—¨ç­‰æ¡ä»¶æŸ¥æ‰¾

ğŸ“Š æŠ¥è¡¨æŸ¥è¯¢ï¼š
- æŒ‰æ—¶é—´èŒƒå›´ã€éƒ¨é—¨ã€é¡¹ç›®ç­‰ç»´åº¦ç»Ÿè®¡
- ä¸åŒç»´åº¦çš„æ•°æ®åˆ†æ

ğŸ”§ æ‰¹é‡æ“ä½œï¼š
- æ‰¹é‡æ’å…¥ä¸å®šæ•°é‡çš„æ•°æ®
- æ ¹æ®æ¡ä»¶æ‰¹é‡æ›´æ–°ä¸åŒå­—æ®µ
```

---

## 2. ğŸ”§ åŠ¨æ€SQLæ‹¼æ¥æ–¹æ³•


### 2.1 åŸºç¡€å­—ç¬¦ä¸²æ‹¼æ¥


æœ€ç®€å•çš„åŠ¨æ€SQLæ„å»ºæ–¹å¼ï¼Œå°±æ˜¯ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ã€‚

```java
// åŸºç¡€æ‹¼æ¥ç¤ºä¾‹
public String buildQuery(String name, Integer age) {
    StringBuilder sql = new StringBuilder("SELECT * FROM users WHERE 1=1");
    
    if (name != null && !name.isEmpty()) {
        sql.append(" AND name = '").append(name).append("'");
    }
    
    if (age != null) {
        sql.append(" AND age = ").append(age);
    }
    
    return sql.toString();
}

// è°ƒç”¨ç¤ºä¾‹
String sql1 = buildQuery("å¼ ä¸‰", null);  
// ç»“æœï¼šSELECT * FROM users WHERE 1=1 AND name = 'å¼ ä¸‰'

String sql2 = buildQuery(null, 25);     
// ç»“æœï¼šSELECT * FROM users WHERE 1=1 AND age = 25
```

**âš ï¸ åŸºç¡€æ‹¼æ¥çš„é—®é¢˜**ï¼š
- **SQLæ³¨å…¥é£é™©**ï¼šç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥å¾ˆå±é™©
- **ä»£ç æ··ä¹±**ï¼šå¤æ‚æ¡ä»¶ä¸‹ä»£ç éš¾ä»¥ç»´æŠ¤
- **æ€§èƒ½é—®é¢˜**ï¼šæ¯æ¬¡éƒ½è¦é‡æ–°æ‹¼æ¥å­—ç¬¦ä¸²

### 2.2 é¢„å¤„ç†è¯­å¥æ‹¼æ¥


ä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰æ›´å®‰å…¨çš„æ–¹å¼ã€‚

```java
public class SafeDynamicSQL {
    
    public List<User> searchUsers(String name, Integer age) {
        List<String> conditions = new ArrayList<>();
        List<Object> params = new ArrayList<>();
        
        // æ„å»ºæ¡ä»¶å’Œå‚æ•°
        if (name != null && !name.isEmpty()) {
            conditions.add("name = ?");
            params.add(name);
        }
        
        if (age != null) {
            conditions.add("age >= ?");
            params.add(age);
        }
        
        // æ‹¼æ¥æœ€ç»ˆSQL
        String sql = "SELECT * FROM users";
        if (!conditions.isEmpty()) {
            sql += " WHERE " + String.join(" AND ", conditions);
        }
        
        // æ‰§è¡ŒæŸ¥è¯¢
        return executeQuery(sql, params);
    }
    
    private List<User> executeQuery(String sql, List<Object> params) {
        try (PreparedStatement ps = connection.prepareStatement(sql)) {
            // è®¾ç½®å‚æ•°
            for (int i = 0; i < params.size(); i++) {
                ps.setObject(i + 1, params.get(i));
            }
            
            ResultSet rs = ps.executeQuery();
            return mapToUsers(rs);
        } catch (SQLException e) {
            throw new RuntimeException("æŸ¥è¯¢å¤±è´¥", e);
        }
    }
}
```

---

## 3. ğŸ“ å­—ç¬¦ä¸²æ„å»ºæŠ€æœ¯


### 3.1 StringBuilderä¼˜åŒ–æŠ€æœ¯


**ä¸ºä»€ä¹ˆç”¨StringBuilder**ï¼šå­—ç¬¦ä¸²æ‹¼æ¥æ—¶ï¼Œæ™®é€šStringä¼šåˆ›å»ºå¾ˆå¤šä¸´æ—¶å¯¹è±¡ï¼Œå½±å“æ€§èƒ½ã€‚

```java
public class OptimizedSQLBuilder {
    
    // âŒ ä½æ•ˆçš„æ‹¼æ¥æ–¹å¼
    public String buildSqlBad(List<String> fields, String table, Map<String, Object> conditions) {
        String sql = "SELECT ";
        for (String field : fields) {
            sql += field + ",";  // æ¯æ¬¡éƒ½åˆ›å»ºæ–°å­—ç¬¦ä¸²å¯¹è±¡
        }
        sql = sql.substring(0, sql.length() - 1);  // å»æ‰æœ€åçš„é€—å·
        sql += " FROM " + table;
        return sql;
    }
    
    // âœ… é«˜æ•ˆçš„æ‹¼æ¥æ–¹å¼
    public String buildSqlGood(List<String> fields, String table, Map<String, Object> conditions) {
        StringBuilder sql = new StringBuilder();
        
        // æ„å»ºSELECTå­å¥
        sql.append("SELECT ");
        for (int i = 0; i < fields.size(); i++) {
            if (i > 0) sql.append(", ");
            sql.append(fields.get(i));
        }
        
        // æ„å»ºFROMå­å¥
        sql.append(" FROM ").append(table);
        
        // æ„å»ºWHEREå­å¥
        if (!conditions.isEmpty()) {
            sql.append(" WHERE ");
            boolean first = true;
            for (String key : conditions.keySet()) {
                if (!first) sql.append(" AND ");
                sql.append(key).append(" = ?");
                first = false;
            }
        }
        
        return sql.toString();
    }
}
```

### 3.2 SQLç‰‡æ®µæ¨¡æ¿æŠ€æœ¯


å°†å¸¸ç”¨çš„SQLç‰‡æ®µåšæˆæ¨¡æ¿ï¼Œæé«˜å¤ç”¨æ€§ã€‚

```java
public class SQLTemplate {
    
    // SQLç‰‡æ®µå¸¸é‡
    public static final String SELECT_TEMPLATE = "SELECT %s FROM %s";
    public static final String WHERE_TEMPLATE = " WHERE %s";
    public static final String ORDER_TEMPLATE = " ORDER BY %s %s";
    public static final String LIMIT_TEMPLATE = " LIMIT %d, %d";
    
    // æ¡ä»¶æ„å»ºå™¨
    public static class ConditionBuilder {
        private List<String> conditions = new ArrayList<>();
        
        public ConditionBuilder eq(String field, Object value) {
            conditions.add(field + " = '" + value + "'");
            return this;
        }
        
        public ConditionBuilder gt(String field, Object value) {
            conditions.add(field + " > " + value);
            return this;
        }
        
        public ConditionBuilder like(String field, String pattern) {
            conditions.add(field + " LIKE '%" + pattern + "%'");
            return this;
        }
        
        public String build() {
            return String.join(" AND ", conditions);
        }
    }
    
    // ä½¿ç”¨ç¤ºä¾‹
    public String buildUserQuery(String name, Integer minAge) {
        String fields = "id, name, age, email";
        String table = "users";
        
        ConditionBuilder conditions = new ConditionBuilder();
        if (name != null) conditions.eq("name", name);
        if (minAge != null) conditions.gt("age", minAge);
        
        String sql = String.format(SELECT_TEMPLATE, fields, table);
        
        String whereClause = conditions.build();
        if (!whereClause.isEmpty()) {
            sql += String.format(WHERE_TEMPLATE, whereClause);
        }
        
        return sql;
    }
}
```

---

## 4. ğŸ”€ æ¡ä»¶åˆ†æ”¯æ„å»º


### 4.1 å¤šæ¡ä»¶ç»„åˆå¤„ç†


**çœŸå®ä¸šåŠ¡åœºæ™¯**ï¼šç”¨æˆ·æœç´¢é¡µé¢æœ‰å¤šä¸ªç­›é€‰æ¡ä»¶ï¼Œç”¨æˆ·å¯èƒ½é€‰æ‹©å…¶ä¸­å‡ ä¸ªã€‚

```java
public class ConditionalQueryBuilder {
    
    // ç”¨æˆ·æœç´¢æ¡ä»¶ç±»
    public static class UserSearchCriteria {
        private String name;
        private Integer minAge;
        private Integer maxAge;
        private String department;
        private Boolean isActive;
        
        // getters and setters...
    }
    
    public String buildSearchSQL(UserSearchCriteria criteria) {
        StringBuilder sql = new StringBuilder("SELECT * FROM users");
        List<String> conditions = new ArrayList<>();
        
        // å§“åæ¨¡ç³ŠæŸ¥è¯¢
        if (hasValue(criteria.getName())) {
            conditions.add("name LIKE ?");
        }
        
        // å¹´é¾„èŒƒå›´æŸ¥è¯¢
        if (criteria.getMinAge() != null) {
            conditions.add("age >= ?");
        }
        if (criteria.getMaxAge() != null) {
            conditions.add("age <= ?");
        }
        
        // éƒ¨é—¨ç²¾ç¡®æŸ¥è¯¢
        if (hasValue(criteria.getDepartment())) {
            conditions.add("department = ?");
        }
        
        // çŠ¶æ€æŸ¥è¯¢
        if (criteria.getIsActive() != null) {
            conditions.add("is_active = ?");
        }
        
        // æ‹¼æ¥WHEREå­å¥
        if (!conditions.isEmpty()) {
            sql.append(" WHERE ").append(String.join(" AND ", conditions));
        }
        
        return sql.toString();
    }
    
    // è¾…åŠ©æ–¹æ³•ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æœ‰å€¼
    private boolean hasValue(String str) {
        return str != null && !str.trim().isEmpty();
    }
}
```

### 4.2 å¤æ‚é€»è¾‘åˆ†æ”¯å¤„ç†


å¤„ç†æ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚ä¸åŒç”¨æˆ·è§’è‰²çœ‹åˆ°ä¸åŒæ•°æ®ã€‚

```java
public class RoleBasedQueryBuilder {
    
    public enum UserRole {
        ADMIN, MANAGER, EMPLOYEE
    }
    
    public String buildRoleBasedQuery(UserRole role, String targetUserId) {
        StringBuilder sql = new StringBuilder();
        sql.append("SELECT id, name, email");
        
        switch (role) {
            case ADMIN:
                // ç®¡ç†å‘˜ï¼šçœ‹åˆ°æ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯
                sql.append(", phone, salary, department FROM users");
                break;
                
            case MANAGER:
                // ç»ç†ï¼šçœ‹åˆ°æœ¬éƒ¨é—¨ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
                sql.append(", department FROM users WHERE department = ");
                sql.append("(SELECT department FROM users WHERE id = ?)");
                break;
                
            case EMPLOYEE:
                // æ™®é€šå‘˜å·¥ï¼šåªèƒ½çœ‹åˆ°è‡ªå·±çš„ä¿¡æ¯
                sql.append(" FROM users WHERE id = ?");
                break;
        }
        
        return sql.toString();
    }
    
    // æ ¹æ®ä¸åŒæ¡ä»¶æ„å»ºä¸åŒçš„æ’åº
    public String addSortingClause(String baseSql, String sortField, String sortDirection) {
        StringBuilder sql = new StringBuilder(baseSql);
        
        // éªŒè¯æ’åºå­—æ®µï¼ˆé˜²æ­¢SQLæ³¨å…¥ï¼‰
        Set<String> allowedFields = Set.of("name", "age", "created_at", "department");
        if (!allowedFields.contains(sortField)) {
            sortField = "created_at";  // é»˜è®¤æ’åº
        }
        
        // éªŒè¯æ’åºæ–¹å‘
        if (!"ASC".equalsIgnoreCase(sortDirection) && !"DESC".equalsIgnoreCase(sortDirection)) {
            sortDirection = "DESC";  // é»˜è®¤é™åº
        }
        
        sql.append(" ORDER BY ").append(sortField).append(" ").append(sortDirection);
        return sql.toString();
    }
}
```

---

## 5. ğŸ”„ è¡¨åå­—æ®µååŠ¨æ€åŒ–


### 5.1 åŠ¨æ€è¡¨åå¤„ç†


**åº”ç”¨åœºæ™¯**ï¼šåˆ†è¡¨å­˜å‚¨ã€å†å²æ•°æ®å½’æ¡£ã€å¤šç§Ÿæˆ·ç³»ç»Ÿç­‰ã€‚

```java
public class DynamicTableQuery {
    
    // æŒ‰æ—¥æœŸåˆ†è¡¨çš„æ—¥å¿—æŸ¥è¯¢
    public String buildLogQuery(LocalDate date, String level) {
        // æ ¹æ®æ—¥æœŸç”Ÿæˆè¡¨åï¼šlog_2024_01_15
        String tableName = "log_" + date.format(DateTimeFormatter.ofPattern("yyyy_MM_dd"));
        
        StringBuilder sql = new StringBuilder();
        sql.append("SELECT timestamp, level, message, user_id FROM ");
        sql.append(escapeTableName(tableName));  // å®‰å…¨åœ°æ·»åŠ è¡¨å
        
        if (level != null && !level.isEmpty()) {
            sql.append(" WHERE level = ?");
        }
        
        sql.append(" ORDER BY timestamp DESC LIMIT 100");
        return sql.toString();
    }
    
    // å¤šç§Ÿæˆ·æŸ¥è¯¢ï¼ˆæ¯ä¸ªç§Ÿæˆ·ä¸€ä¸ªè¡¨ï¼‰
    public String buildTenantQuery(String tenantId, Map<String, Object> filters) {
        String tableName = "tenant_" + tenantId + "_data";
        
        StringBuilder sql = new StringBuilder();
        sql.append("SELECT * FROM ").append(escapeTableName(tableName));
        
        if (!filters.isEmpty()) {
            sql.append(" WHERE ");
            List<String> conditions = new ArrayList<>();
            
            for (String field : filters.keySet()) {
                // åªå…è®¸ç‰¹å®šå­—æ®µæŸ¥è¯¢
                if (isAllowedField(field)) {
                    conditions.add(escapeFieldName(field) + " = ?");
                }
            }
            
            sql.append(String.join(" AND ", conditions));
        }
        
        return sql.toString();
    }
    
    // å®‰å…¨åœ°å¤„ç†è¡¨åï¼ˆé˜²æ­¢SQLæ³¨å…¥ï¼‰
    private String escapeTableName(String tableName) {
        // åªå…è®¸å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿
        if (!tableName.matches("^[a-zA-Z_][a-zA-Z0-9_]*$")) {
            throw new IllegalArgumentException("éæ³•è¡¨å: " + tableName);
        }
        return "`" + tableName + "`";  // ç”¨åå¼•å·åŒ…å›´
    }
    
    // å®‰å…¨åœ°å¤„ç†å­—æ®µå
    private String escapeFieldName(String fieldName) {
        if (!fieldName.matches("^[a-zA-Z_][a-zA-Z0-9_]*$")) {
            throw new IllegalArgumentException("éæ³•å­—æ®µå: " + fieldName);
        }
        return "`" + fieldName + "`";
    }
    
    // æ£€æŸ¥æ˜¯å¦ä¸ºå…è®¸çš„å­—æ®µ
    private boolean isAllowedField(String field) {
        Set<String> allowedFields = Set.of("name", "status", "created_at", "updated_at");
        return allowedFields.contains(field);
    }
}
```

### 5.2 åŠ¨æ€å­—æ®µé€‰æ‹©


æ ¹æ®ç”¨æˆ·æƒé™æˆ–éœ€æ±‚ï¼ŒåŠ¨æ€é€‰æ‹©è¦æŸ¥è¯¢çš„å­—æ®µã€‚

```java
public class DynamicFieldSelector {
    
    // æ ¹æ®ç”¨æˆ·è§’è‰²åŠ¨æ€é€‰æ‹©å­—æ®µ
    public String buildFieldSelectSQL(UserRole role, List<String> requestedFields) {
        Set<String> allowedFields = getAllowedFields(role);
        List<String> finalFields = new ArrayList<>();
        
        // è¿‡æ»¤è¯·æ±‚çš„å­—æ®µï¼Œåªä¿ç•™å…è®¸çš„
        for (String field : requestedFields) {
            if (allowedFields.contains(field)) {
                finalFields.add(escapeFieldName(field));
            }
        }
        
        // å¦‚æœæ²¡æœ‰å…è®¸çš„å­—æ®µï¼Œä½¿ç”¨é»˜è®¤å­—æ®µ
        if (finalFields.isEmpty()) {
            finalFields.addAll(getDefaultFields(role));
        }
        
        return "SELECT " + String.join(", ", finalFields) + " FROM users";
    }
    
    private Set<String> getAllowedFields(UserRole role) {
        switch (role) {
            case ADMIN:
                return Set.of("id", "name", "email", "phone", "salary", "department", "created_at");
            case MANAGER:
                return Set.of("id", "name", "email", "department", "created_at");
            case EMPLOYEE:
                return Set.of("id", "name", "email");
            default:
                return Set.of("id", "name");
        }
    }
    
    private List<String> getDefaultFields(UserRole role) {
        return Arrays.asList("id", "name", "email");
    }
}
```

---

## 6. ğŸ¨ SQLæ¨¡æ¿å¼•æ“


### 6.1 è‡ªå®šä¹‰ç®€å•æ¨¡æ¿å¼•æ“


åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¼•æ“æ¥å¤„ç†åŠ¨æ€SQLã€‚

```java
public class SimpleSQLTemplate {
    
    private String template;
    private Map<String, Object> parameters;
    
    public SimpleSQLTemplate(String template) {
        this.template = template;
        this.parameters = new HashMap<>();
    }
    
    // è®¾ç½®å‚æ•°
    public SimpleSQLTemplate set(String key, Object value) {
        parameters.put(key, value);
        return this;
    }
    
    // æ¸²æŸ“æ¨¡æ¿
    public String render() {
        String result = template;
        
        // å¤„ç†æ¡ä»¶å— {{#if condition}}...{{/if}}
        result = processConditionalBlocks(result);
        
        // æ›¿æ¢å˜é‡ {{variable}}
        result = replaceVariables(result);
        
        return result.trim();
    }
    
    private String processConditionalBlocks(String template) {
        Pattern pattern = Pattern.compile("\\{\\{#if\\s+(\\w+)\\}\\}(.*?)\\{\\{/if\\}\\}", Pattern.DOTALL);
        Matcher matcher = pattern.matcher(template);
        
        StringBuffer sb = new StringBuffer();
        while (matcher.find()) {
            String condition = matcher.group(1);
            String content = matcher.group(2);
            
            // æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºçœŸ
            Object value = parameters.get(condition);
            if (isTrue(value)) {
                matcher.appendReplacement(sb, content);
            } else {
                matcher.appendReplacement(sb, "");
            }
        }
        matcher.appendTail(sb);
        
        return sb.toString();
    }
    
    private String replaceVariables(String template) {
        Pattern pattern = Pattern.compile("\\{\\{(\\w+)\\}\\}");
        Matcher matcher = pattern.matcher(template);
        
        StringBuffer sb = new StringBuffer();
        while (matcher.find()) {
            String varName = matcher.group(1);
            Object value = parameters.get(varName);
            String replacement = value != null ? value.toString() : "";
            matcher.appendReplacement(sb, replacement);
        }
        matcher.appendTail(sb);
        
        return sb.toString();
    }
    
    private boolean isTrue(Object value) {
        if (value == null) return false;
        if (value instanceof Boolean) return (Boolean) value;
        if (value instanceof String) return !((String) value).isEmpty();
        if (value instanceof Number) return ((Number) value).doubleValue() != 0;
        return true;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class TemplateUsageExample {
    
    public String buildQueryWithTemplate(String name, Integer age, boolean includeEmail) {
        String template = """
            SELECT id, name
            {{#if includeEmail}}, email{{/if}}
            {{#if includePhone}}, phone{{/if}}
            FROM users
            WHERE 1=1
            {{#if name}} AND name = '{{name}}'{{/if}}
            {{#if age}} AND age >= {{age}}{{/if}}
            """;
        
        return new SimpleSQLTemplate(template)
                .set("name", name)
                .set("age", age)
                .set("includeEmail", includeEmail)
                .set("includePhone", false)
                .render();
    }
}
```

### 6.2 é›†æˆç°æœ‰æ¨¡æ¿å¼•æ“


ä½¿ç”¨æˆç†Ÿçš„æ¨¡æ¿å¼•æ“ï¼ˆå¦‚FreeMarkerï¼‰å¤„ç†å¤æ‚SQLæ¨¡æ¿ã€‚

```java
// ä½¿ç”¨FreeMarkeræ¨¡æ¿çš„ç¤ºä¾‹é…ç½®
public class FreemarkerSQLTemplate {
    
    private Configuration cfg;
    
    public FreemarkerSQLTemplate() {
        cfg = new Configuration(Configuration.VERSION_2_3_31);
        cfg.setClassForTemplateLoading(this.getClass(), "/sql-templates");
        cfg.setDefaultEncoding("UTF-8");
    }
    
    public String processTemplate(String templateName, Map<String, Object> data) {
        try {
            Template template = cfg.getTemplate(templateName);
            StringWriter writer = new StringWriter();
            template.process(data, writer);
            return writer.toString();
        } catch (Exception e) {
            throw new RuntimeException("æ¨¡æ¿å¤„ç†å¤±è´¥: " + templateName, e);
        }
    }
}
```

**å¯¹åº”çš„SQLæ¨¡æ¿æ–‡ä»¶ï¼ˆuser-search.ftlï¼‰**ï¼š
```sql
SELECT 
    u.id,
    u.name,
    <#if includeContactInfo>
    u.email,
    u.phone,
    </#if>
    u.department
FROM users u
<#if filters?has_content>
WHERE 1=1
    <#if filters.name??>
    AND u.name LIKE '%${filters.name}%'
    </#if>
    <#if filters.minAge??>
    AND u.age >= ${filters.minAge}
    </#if>
    <#if filters.department??>
    AND u.department = '${filters.department}'
    </#if>
</#if>
ORDER BY u.created_at DESC
<#if limit??>
LIMIT ${limit}
</#if>
```

---

## 7. ğŸ—ï¸ SQLæ„å»ºå™¨Builderæ¨¡å¼


### 7.1 é“¾å¼è°ƒç”¨SQLæ„å»ºå™¨


ä½¿ç”¨Builderæ¨¡å¼åˆ›å»ºä¸€ä¸ªæµç•…çš„SQLæ„å»ºå™¨ã€‚

```java
public class FluentSQLBuilder {
    
    private StringBuilder selectClause = new StringBuilder();
    private StringBuilder fromClause = new StringBuilder();
    private StringBuilder whereClause = new StringBuilder();
    private StringBuilder orderClause = new StringBuilder();
    private StringBuilder limitClause = new StringBuilder();
    
    private List<Object> parameters = new ArrayList<>();
    private boolean hasWhereCondition = false;
    
    // å¼€å§‹æ„å»º
    public static FluentSQLBuilder select(String... fields) {
        FluentSQLBuilder builder = new FluentSQLBuilder();
        builder.selectClause.append("SELECT ");
        if (fields.length == 0) {
            builder.selectClause.append("*");
        } else {
            builder.selectClause.append(String.join(", ", fields));
        }
        return builder;
    }
    
    // FROMå­å¥
    public FluentSQLBuilder from(String table) {
        fromClause.append(" FROM ").append(table);
        return this;
    }
    
    // WHEREæ¡ä»¶
    public FluentSQLBuilder where(String condition, Object... params) {
        if (!hasWhereCondition) {
            whereClause.append(" WHERE ");
            hasWhereCondition = true;
        }
        whereClause.append(condition);
        Collections.addAll(parameters, params);
        return this;
    }
    
    // ANDæ¡ä»¶
    public FluentSQLBuilder and(String condition, Object... params) {
        if (hasWhereCondition) {
            whereClause.append(" AND ");
        } else {
            whereClause.append(" WHERE ");
            hasWhereCondition = true;
        }
        whereClause.append(condition);
        Collections.addAll(parameters, params);
        return this;
    }
    
    // ORæ¡ä»¶
    public FluentSQLBuilder or(String condition, Object... params) {
        if (hasWhereCondition) {
            whereClause.append(" OR ");
        } else {
            whereClause.append(" WHERE ");
            hasWhereCondition = true;
        }
        whereClause.append(condition);
        Collections.addAll(parameters, params);
        return this;
    }
    
    // æ¡ä»¶æ–¹æ³•ï¼ˆåªæœ‰æ¡ä»¶ä¸ºçœŸæ—¶æ‰æ·»åŠ ï¼‰
    public FluentSQLBuilder whereIf(boolean condition, String whereCondition, Object... params) {
        if (condition) {
            where(whereCondition, params);
        }
        return this;
    }
    
    public FluentSQLBuilder andIf(boolean condition, String whereCondition, Object... params) {
        if (condition) {
            and(whereCondition, params);
        }
        return this;
    }
    
    // ORDER BYå­å¥
    public FluentSQLBuilder orderBy(String field, String direction) {
        if (orderClause.length() == 0) {
            orderClause.append(" ORDER BY ");
        } else {
            orderClause.append(", ");
        }
        orderClause.append(field).append(" ").append(direction);
        return this;
    }
    
    public FluentSQLBuilder orderByAsc(String field) {
        return orderBy(field, "ASC");
    }
    
    public FluentSQLBuilder orderByDesc(String field) {
        return orderBy(field, "DESC");
    }
    
    // LIMITå­å¥
    public FluentSQLBuilder limit(int offset, int count) {
        limitClause.append(" LIMIT ").append(offset).append(", ").append(count);
        return this;
    }
    
    public FluentSQLBuilder limit(int count) {
        limitClause.append(" LIMIT ").append(count);
        return this;
    }
    
    // æ„å»ºæœ€ç»ˆSQL
    public String build() {
        StringBuilder sql = new StringBuilder();
        sql.append(selectClause);
        sql.append(fromClause);
        sql.append(whereClause);
        sql.append(orderClause);
        sql.append(limitClause);
        return sql.toString();
    }
    
    // è·å–å‚æ•°
    public List<Object> getParameters() {
        return new ArrayList<>(parameters);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public class BuilderUsageExample {
    
    public void searchUsers(String name, Integer minAge, String department) {
        String sql = FluentSQLBuilder
                .select("id", "name", "email", "age", "department")
                .from("users")
                .whereIf(name != null, "name LIKE ?", "%" + name + "%")
                .andIf(minAge != null, "age >= ?", minAge)
                .andIf(department != null, "department = ?", department)
                .orderByDesc("created_at")
                .limit(20)
                .build();
        
        List<Object> params = builder.getParameters();
        
        // æ‰§è¡ŒæŸ¥è¯¢...
        System.out.println("SQL: " + sql);
        System.out.println("å‚æ•°: " + params);
    }
}
```

### 7.2 ç‰¹å®šæŸ¥è¯¢ç±»å‹çš„æ„å»ºå™¨


ä¸ºä¸åŒç±»å‹çš„æŸ¥è¯¢åˆ›å»ºä¸“é—¨çš„æ„å»ºå™¨ã€‚

```java
// UPDATEè¯­å¥æ„å»ºå™¨
public class UpdateBuilder {
    
    private String table;
    private Map<String, Object> setValues = new LinkedHashMap<>();
    private List<String> whereConditions = new ArrayList<>();
    private List<Object> parameters = new ArrayList<>();
    
    public static UpdateBuilder table(String table) {
        UpdateBuilder builder = new UpdateBuilder();
        builder.table = table;
        return builder;
    }
    
    public UpdateBuilder set(String field, Object value) {
        setValues.put(field, value);
        return this;
    }
    
    public UpdateBuilder setIf(boolean condition, String field, Object value) {
        if (condition) {
            set(field, value);
        }
        return this;
    }
    
    public UpdateBuilder where(String condition, Object... params) {
        whereConditions.add(condition);
        Collections.addAll(parameters, params);
        return this;
    }
    
    public String build() {
        if (setValues.isEmpty()) {
            throw new IllegalStateException("UPDATEè¯­å¥å¿…é¡»æœ‰SETå­å¥");
        }
        
        StringBuilder sql = new StringBuilder();
        sql.append("UPDATE ").append(table).append(" SET ");
        
        // æ„å»ºSETå­å¥
        List<String> setParts = new ArrayList<>();
        for (String field : setValues.keySet()) {
            setParts.add(field + " = ?");
            parameters.add(0, setValues.get(field));  // å‚æ•°è¦æ”¾åœ¨å‰é¢
        }
        sql.append(String.join(", ", setParts));
        
        // æ„å»ºWHEREå­å¥
        if (!whereConditions.isEmpty()) {
            sql.append(" WHERE ").append(String.join(" AND ", whereConditions));
        }
        
        return sql.toString();
    }
    
    public List<Object> getParameters() {
        return new ArrayList<>(parameters);
    }
}

// INSERTè¯­å¥æ„å»ºå™¨
public class InsertBuilder {
    
    private String table;
    private List<String> fields = new ArrayList<>();
    private List<List<Object>> valuesList = new ArrayList<>();
    
    public static InsertBuilder into(String table) {
        InsertBuilder builder = new InsertBuilder();
        builder.table = table;
        return builder;
    }
    
    public InsertBuilder fields(String... fields) {
        this.fields = Arrays.asList(fields);
        return this;
    }
    
    public InsertBuilder values(Object... values) {
        if (fields.isEmpty()) {
            throw new IllegalStateException("å¿…é¡»å…ˆè®¾ç½®å­—æ®µå");
        }
        if (values.length != fields.size()) {
            throw new IllegalArgumentException("å€¼çš„æ•°é‡å¿…é¡»ä¸å­—æ®µæ•°é‡ä¸€è‡´");
        }
        valuesList.add(Arrays.asList(values));
        return this;
    }
    
    public String build() {
        if (fields.isEmpty() || valuesList.isEmpty()) {
            throw new IllegalStateException("INSERTè¯­å¥å¿…é¡»æœ‰å­—æ®µå’Œå€¼");
        }
        
        StringBuilder sql = new StringBuilder();
        sql.append("INSERT INTO ").append(table);
        sql.append(" (").append(String.join(", ", fields)).append(")");
        sql.append(" VALUES ");
        
        // æ„å»ºVALUESå­å¥
        List<String> valueParts = new ArrayList<>();
        for (int i = 0; i < valuesList.size(); i++) {
            String valuePart = "(" + String.join(", ", Collections.nCopies(fields.size(), "?")) + ")";
            valueParts.add(valuePart);
        }
        sql.append(String.join(", ", valueParts));
        
        return sql.toString();
    }
    
    public List<Object> getParameters() {
        List<Object> allParams = new ArrayList<>();
        for (List<Object> values : valuesList) {
            allParams.addAll(values);
        }
        return allParams;
    }
}
```

---

## 8. âš¡ åŠ¨æ€SQLæ€§èƒ½ä¼˜åŒ–


### 8.1 SQLç¼“å­˜æœºåˆ¶


ç¼“å­˜å¸¸ç”¨çš„SQLæ¨¡æ¿ï¼Œé¿å…é‡å¤æ„å»ºã€‚

```java
public class SQLCache {
    
    private static final ConcurrentHashMap<String, String> sqlCache = new ConcurrentHashMap<>();
    private static final int MAX_CACHE_SIZE = 1000;
    
    // ç”Ÿæˆç¼“å­˜é”®
    private String generateCacheKey(String template, Map<String, Object> params) {
        StringBuilder key = new StringBuilder(template);
        
        // åªæŠŠå½±å“SQLç»“æ„çš„å‚æ•°åŠ å…¥ç¼“å­˜é”®
        Set<String> structuralParams = Set.of("includeEmail", "includePhone", "hasName", "hasAge");
        for (String param : structuralParams) {
            if (params.containsKey(param)) {
                key.append("|").append(param).append("=").append(params.get(param));
            }
        }
        
        return key.toString();
    }
    
    // è·å–ç¼“å­˜çš„SQL
    public String getCachedSQL(String template, Map<String, Object> params) {
        String cacheKey = generateCacheKey(template, params);
        return sqlCache.get(cacheKey);
    }
    
    // ç¼“å­˜SQL
    public void cacheSQL(String template, Map<String, Object> params, String sql) {
        if (sqlCache.size() >= MAX_CACHE_SIZE) {
            // ç®€å•çš„æ¸…ç†ç­–ç•¥ï¼šæ¸…ç©ºä¸€åŠ
            sqlCache.clear();
        }
        
        String cacheKey = generateCacheKey(template, params);
        sqlCache.put(cacheKey, sql);
    }
    
    // å¸¦ç¼“å­˜çš„SQLæ„å»º
    public String buildWithCache(String template, Map<String, Object> params) {
        String cached = getCachedSQL(template, params);
        if (cached != null) {
            return cached;
        }
        
        // æ„å»ºæ–°çš„SQL
        String sql = new SimpleSQLTemplate(template)
                .setAll(params)
                .render();
        
        // ç¼“å­˜ç»“æœ
        cacheSQL(template, params, sql);
        return sql;
    }
}
```

### 8.2 SQLæ„å»ºæ€§èƒ½ä¼˜åŒ–


ä¼˜åŒ–SQLæ„å»ºè¿‡ç¨‹çš„æ€§èƒ½ã€‚

```java
public class OptimizedSQLBuilder {
    
    // ä½¿ç”¨é¢„åˆ†é…çš„StringBuilder
    private static final ThreadLocal<StringBuilder> THREAD_LOCAL_BUILDER = 
            ThreadLocal.withInitial(() -> new StringBuilder(256));
    
    // é¢„ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼
    private static final Pattern CONDITION_PATTERN = 
            Pattern.compile("\\{\\{#if\\s+(\\w+)\\}\\}(.*?)\\{\\{/if\\}\\}", Pattern.DOTALL);
    
    // å¸¸ç”¨SQLç‰‡æ®µç¼“å­˜
    private static final Map<String, String> FRAGMENT_CACHE = new ConcurrentHashMap<>();
    
    static {
        // é¢„ç¼“å­˜å¸¸ç”¨ç‰‡æ®µ
        FRAGMENT_CACHE.put("selectUser", "SELECT id, name, email FROM users");
        FRAGMENT_CACHE.put("selectProduct", "SELECT id, name, price, category FROM products");
        FRAGMENT_CACHE.put("orderByDate", " ORDER BY created_at DESC");
    }
    
    public String buildOptimizedSQL(QueryRequest request) {
        StringBuilder sql = THREAD_LOCAL_BUILDER.get();
        sql.setLength(0);  // æ¸…ç©ºä½†ä¿ç•™å®¹é‡
        
        // ä½¿ç”¨ç¼“å­˜çš„ç‰‡æ®µ
        String selectFragment = FRAGMENT_CACHE.get("selectUser");
        sql.append(selectFragment);
        
        // é«˜æ•ˆçš„æ¡ä»¶æ„å»º
        if (hasConditions(request)) {
            sql.append(" WHERE ");
            buildConditions(sql, request);
        }
        
        // æ·»åŠ æ’åº
        if (request.needsOrdering()) {
            sql.append(FRAGMENT_CACHE.get("orderByDate"));
        }
        
        return sql.toString();
    }
    
    private void buildConditions(StringBuilder sql, QueryRequest request) {
        boolean first = true;
        
        if (request.getName() != null) {
            if (!first) sql.append(" AND ");
            sql.append("name LIKE ?");
            first = false;
        }
        
        if (request.getAge() != null) {
            if (!first) sql.append(" AND ");
            sql.append("age >= ?");
            first = false;
        }
        
        if (request.getDepartment() != null) {
            if (!first) sql.append(" AND ");
            sql.append("department = ?");
        }
    }
    
    private boolean hasConditions(QueryRequest request) {
        return request.getName() != null || 
               request.getAge() != null || 
               request.getDepartment() != null;
    }
}
```

### 8.3 åŠ¨æ€SQLè¯­æ³•éªŒè¯


åœ¨è¿è¡Œæ—¶éªŒè¯åŠ¨æ€ç”Ÿæˆçš„SQLè¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚

```java
public class SQLValidator {
    
    // åŸºæœ¬SQLå…³é”®å­—
    private static final Set<String> SQL_KEYWORDS = Set.of(
        "SELECT", "FROM", "WHERE", "AND", "OR", "ORDER", "BY", "GROUP", "HAVING",
        "INSERT", "UPDATE", "DELETE", "JOIN", "LEFT", "RIGHT", "INNER", "OUTER"
    );
    
    // å±é™©çš„SQLæ“ä½œ
    private static final Set<String> DANGEROUS_KEYWORDS = Set.of(
        "DROP", "TRUNCATE", "DELETE", "EXEC", "EXECUTE", "SHUTDOWN"
    );
    
    public ValidationResult validateSQL(String sql) {
        ValidationResult result = new ValidationResult();
        
        // åŸºæœ¬è¯­æ³•æ£€æŸ¥
        if (!hasBasicSQLStructure(sql)) {
            result.addError("SQLè¯­å¥ç¼ºå°‘åŸºæœ¬ç»“æ„");
        }
        
        // å®‰å…¨æ£€æŸ¥
        if (containsDangerousKeywords(sql)) {
            result.addError("SQLåŒ…å«å±é™©æ“ä½œ");
        }
        
        // æ‹¬å·åŒ¹é…æ£€æŸ¥
        if (!isParenthesesBalanced(sql)) {
            result.addError("æ‹¬å·ä¸åŒ¹é…");
        }
        
        // å¼•å·åŒ¹é…æ£€æŸ¥
        if (!isQuotesBalanced(sql)) {
            result.addError("å¼•å·ä¸åŒ¹é…");
        }
        
        return result;
    }
    
    private boolean hasBasicSQLStructure(String sql) {
        String upperSQL = sql.toUpperCase().trim();
        return upperSQL.startsWith("SELECT") || 
               upperSQL.startsWith("INSERT") || 
               upperSQL.startsWith("UPDATE") || 
               upperSQL.startsWith("DELETE");
    }
    
    private boolean containsDangerousKeywords(String sql) {
        String upperSQL = sql.toUpperCase();
        return DANGEROUS_KEYWORDS.stream()
                .anyMatch(keyword -> upperSQL.contains(keyword));
    }
    
    private boolean isParenthesesBalanced(String sql) {
        int count = 0;
        for (char c : sql.toCharArray()) {
            if (c == '(') count++;
            else if (c == ')') count--;
            if (count < 0) return false;
        }
        return count == 0;
    }
    
    private boolean isQuotesBalanced(String sql) {
        boolean inSingleQuote = false;
        boolean inDoubleQuote = false;
        
        for (int i = 0; i < sql.length(); i++) {
            char c = sql.charAt(i);
            
            if (c == '\'' && !inDoubleQuote) {
                inSingleQuote = !inSingleQuote;
            } else if (c == '"' && !inSingleQuote) {
                inDoubleQuote = !inDoubleQuote;
            }
        }
        
        return !inSingleQuote && !inDoubleQuote;
    }
    
    public static class ValidationResult {
        private List<String> errors = new ArrayList<>();
        
        public void addError(String error) {
            errors.add(error);
        }
        
        public boolean isValid() {
            return errors.isEmpty();
        }
        
        public List<String> getErrors() {
            return new ArrayList<>(errors);
        }
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åŠ¨æ€SQLæœ¬è´¨ï¼šè¿è¡Œæ—¶æ ¹æ®æ¡ä»¶æ„å»ºä¸åŒçš„SQLè¯­å¥
ğŸ”¸ å®‰å…¨æ‹¼æ¥ï¼šä½¿ç”¨PreparedStatementé¿å…SQLæ³¨å…¥
ğŸ”¸ Builderæ¨¡å¼ï¼šç”¨é“¾å¼è°ƒç”¨æ„å»ºå¤æ‚SQL
ğŸ”¸ æ¨¡æ¿å¼•æ“ï¼šç”¨æ¨¡æ¿åˆ†ç¦»SQLç»“æ„å’Œä¸šåŠ¡é€»è¾‘
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šç¼“å­˜SQLæ¨¡æ¿ï¼Œå¤ç”¨æ„å»ºå™¨
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€SQL**
```
ä¸šåŠ¡çµæ´»æ€§ï¼š
- æœç´¢æ¡ä»¶ä¸å›ºå®š
- æŸ¥è¯¢å­—æ®µå¯å˜
- è¡¨ååŠ¨æ€å˜åŒ–

ä»£ç å¤ç”¨æ€§ï¼š
- é¿å…å†™å¤§é‡ç›¸ä¼¼çš„SQL
- ç»Ÿä¸€å¤„ç†æŸ¥è¯¢é€»è¾‘
- æé«˜å¼€å‘æ•ˆç‡
```

**ğŸ”¹ å®‰å…¨æ€§è€ƒè™‘**
```
SQLæ³¨å…¥é˜²æŠ¤ï¼š
- æ°¸è¿œä½¿ç”¨PreparedStatement
- éªŒè¯åŠ¨æ€è¡¨åå’Œå­—æ®µå
- é™åˆ¶å…è®¸çš„æ“ä½œç±»å‹

è¾“å…¥éªŒè¯ï¼š
- æ£€æŸ¥å‚æ•°åˆæ³•æ€§
- é™åˆ¶æŸ¥è¯¢èŒƒå›´
- éªŒè¯ç”¨æˆ·æƒé™
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
```
æ„å»ºæ•ˆç‡ï¼š
- ä½¿ç”¨StringBuilderè€ŒéStringæ‹¼æ¥
- ç¼“å­˜å¸¸ç”¨SQLæ¨¡æ¿
- é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼

æ‰§è¡Œæ•ˆç‡ï¼š
- é¿å…è¿‡åº¦å¤æ‚çš„åŠ¨æ€SQL
- åˆç†ä½¿ç”¨ç´¢å¼•
- æ§åˆ¶æŸ¥è¯¢ç»“æœæ•°é‡
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ æœ€ä½³å®è·µ**
```
1. å®‰å…¨ç¬¬ä¸€ï¼šæ°¸è¿œä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
2. æ€§èƒ½ä¼˜å…ˆï¼šç¼“å­˜å’Œå¤ç”¨SQLæ¨¡æ¿
3. å¯è¯»æ€§ï¼šä½¿ç”¨Builderæ¨¡å¼æˆ–æ¨¡æ¿å¼•æ“
4. å¯ç»´æŠ¤æ€§ï¼šå°†SQLé€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»
5. å¯æµ‹è¯•æ€§ï¼šç‹¬ç«‹æµ‹è¯•SQLæ„å»ºé€»è¾‘
```

**âš ï¸ å¸¸è§é™·é˜±**
```
1. ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥ â†’ SQLæ³¨å…¥é£é™©
2. è¿‡åº¦å¤æ‚çš„åŠ¨æ€é€»è¾‘ â†’ éš¾ä»¥ç»´æŠ¤
3. ä¸éªŒè¯åŠ¨æ€è¡¨å/å­—æ®µå â†’ å®‰å…¨é£é™©
4. æ¯æ¬¡é‡æ–°æ„å»ºSQL â†’ æ€§èƒ½é—®é¢˜
5. æ··åˆä¸šåŠ¡é€»è¾‘å’ŒSQLæ„å»º â†’ è€¦åˆè¿‡å¼º
```

**ğŸ¯ åº”ç”¨åœºæ™¯**
- **æœç´¢åŠŸèƒ½**ï¼šå¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢
- **æŠ¥è¡¨ç³»ç»Ÿ**ï¼šåŠ¨æ€ç»Ÿè®¡ç»´åº¦
- **æƒé™æ§åˆ¶**ï¼šæ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒæ•°æ®
- **åˆ†è¡¨åˆ†åº“**ï¼šåŠ¨æ€è·¯ç”±åˆ°ä¸åŒè¡¨
- **APIæ¥å£**ï¼šæ ¹æ®å‚æ•°è¿”å›ä¸åŒå­—æ®µ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- åŠ¨æ€æ‹¼æ¥è¦å®‰å…¨ï¼Œå‚æ•°åŒ–æŸ¥è¯¢æ˜¯å…³é”®
- Builderæ¨¡å¼é“¾å¼è°ƒï¼Œæ¨¡æ¿å¼•æ“åˆ†ç¦»å¥½
- ç¼“å­˜å¤ç”¨ææ€§èƒ½ï¼ŒéªŒè¯æ£€æŸ¥ä¿å®‰å…¨
- æ¡ä»¶åˆ†æ”¯è¦æ¸…æ™°ï¼Œè¡¨åå­—æ®µéœ€è½¬ä¹‰