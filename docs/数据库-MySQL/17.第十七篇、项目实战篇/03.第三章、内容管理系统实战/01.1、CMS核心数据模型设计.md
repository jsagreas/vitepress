---
title: 1ã€CMSæ ¸å¿ƒæ•°æ®æ¨¡å‹è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [å†…å®¹ç®¡ç†ç³»ç»Ÿæ•°æ®æ¨¡å‹æ¦‚è¿°](#1-å†…å®¹ç®¡ç†ç³»ç»Ÿæ•°æ®æ¨¡å‹æ¦‚è¿°)
2. [å†…å®¹å®ä½“å»ºæ¨¡ç­–ç•¥](#2-å†…å®¹å®ä½“å»ºæ¨¡ç­–ç•¥)
3. [åŠ¨æ€å­—æ®µæ‰©å±•æœºåˆ¶](#3-åŠ¨æ€å­—æ®µæ‰©å±•æœºåˆ¶)
4. [å†…å®¹å…³è”å…³ç³»è®¾è®¡](#4-å†…å®¹å…³è”å…³ç³»è®¾è®¡)
5. [å†…å®¹æ¨¡å‹ç»§æ‰¿ä¸ç‰ˆæœ¬æ§åˆ¶](#5-å†…å®¹æ¨¡å‹ç»§æ‰¿ä¸ç‰ˆæœ¬æ§åˆ¶)
6. [æ€§èƒ½ä¼˜åŒ–ä¸å®æˆ˜ç­–ç•¥](#6-æ€§èƒ½ä¼˜åŒ–ä¸å®æˆ˜ç­–ç•¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å†…å®¹ç®¡ç†ç³»ç»Ÿæ•°æ®æ¨¡å‹æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯CMSæ•°æ®æ¨¡å‹


**ğŸ“‹ æ ¸å¿ƒå®šä¹‰**
> CMSæ•°æ®æ¨¡å‹å°±æ˜¯è®¾è®¡å¦‚ä½•åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å’Œç»„ç»‡å„ç§ç±»å‹çš„å†…å®¹ã€‚å°±åƒè®¾è®¡ä¸€ä¸ªä¸‡èƒ½çš„å‚¨ç‰©ç®±ç³»ç»Ÿï¼Œæ—¢è¦èƒ½æ”¾ä¸åŒå½¢çŠ¶çš„ç‰©å“ï¼Œåˆè¦æ–¹ä¾¿æŸ¥æ‰¾å’Œç®¡ç†ã€‚

**ğŸ”¸ æ•°æ®æ¨¡å‹è§£å†³çš„æ ¸å¿ƒé—®é¢˜**
```
ä¼ ç»Ÿç½‘ç«™çš„ç—›ç‚¹ï¼š
- æ–°å¢å†…å®¹ç±»å‹éœ€è¦æ”¹æ•°æ®åº“ç»“æ„ âŒ
- ä¸åŒå†…å®¹ç±»å‹éœ€è¦ä¸åŒçš„å­˜å‚¨è¡¨ âŒ  
- å­—æ®µå›ºå®šï¼Œæ— æ³•çµæ´»æ‰©å±• âŒ
- å†…å®¹ä¹‹é—´å…³ç³»å¤æ‚éš¾ç®¡ç† âŒ

CMSæ•°æ®æ¨¡å‹çš„ä¼˜åŠ¿ï¼š
- ç»Ÿä¸€çš„å†…å®¹å­˜å‚¨ç»“æ„ âœ…
- çµæ´»çš„å­—æ®µæ‰©å±•æœºåˆ¶ âœ…
- å¼ºå¤§çš„å†…å®¹å…³è”èƒ½åŠ› âœ…
- ç‰ˆæœ¬æ§åˆ¶å’Œç”Ÿå‘½å‘¨æœŸç®¡ç† âœ…
```

### 1.2 å†…å®¹æ¨¡å‹æŠ½è±¡è®¾è®¡


**ğŸ—ï¸ å†…å®¹æŠ½è±¡å±‚æ¬¡ç»“æ„**

```
å†…å®¹æ¨¡å‹æŠ½è±¡å±‚æ¬¡å›¾ï¼š

åº”ç”¨å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å…·ä½“å†…å®¹å®ä¾‹ï¼ˆæ–‡ç« ã€äº§å“ã€ç”¨æˆ·ï¼‰
   â†“
æ¨¡å‹å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å†…å®¹ç±»å‹å®šä¹‰ï¼ˆArticleã€Productã€Userï¼‰
   â†“  
ç»“æ„å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å­—æ®µæ¨¡æ¿ï¼ˆtitleã€priceã€avatarï¼‰
   â†“
å­˜å‚¨å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç‰©ç†æ•°æ®è¡¨ï¼ˆcontentsã€fieldsã€relationsï¼‰
```

**ğŸ’¡ å†…å®¹æ¨¡å‹æ ¸å¿ƒç»„ä»¶**

| **ç»„ä»¶** | **ä½œç”¨** | **é€šä¿—ç†è§£** | **å®é™…ä¾‹å­** |
|---------|---------|-------------|-------------|
| **å†…å®¹ç±»å‹** | `å®šä¹‰å†…å®¹çš„ç§ç±»` | `å°±åƒå•†å“åˆ†ç±»` | `æ–‡ç« ã€äº§å“ã€ç”¨æˆ·èµ„æ–™` |
| **å†…å®¹å®ä¾‹** | `å…·ä½“çš„å†…å®¹æ•°æ®` | `å°±åƒå…·ä½“å•†å“` | `æŸç¯‡æ–‡ç« ã€æŸä¸ªäº§å“` |
| **å­—æ®µæ¨¡æ¿** | `å†…å®¹çš„å±æ€§å®šä¹‰` | `å°±åƒå•†å“è§„æ ¼` | `æ ‡é¢˜ã€ä»·æ ¼ã€æè¿°` |
| **å…³è”å…³ç³»** | `å†…å®¹é—´çš„è¿æ¥` | `å°±åƒå•†å“æ¨è` | `ç›¸å…³æ–‡ç« ã€åŒç±»äº§å“` |

### 1.3 å†…å®¹ç±»å‹å®šä¹‰æœºåˆ¶


**ğŸ“ å†…å®¹ç±»å‹çš„æœ¬è´¨**

å†…å®¹ç±»å‹å°±æ˜¯ç»™ä¸åŒç§ç±»çš„å†…å®¹åˆ¶å®š"æ¨¡æ¿"ï¼Œå°±åƒè¡¨å•æ¨¡æ¿ä¸€æ ·ï¼š

```sql
-- å†…å®¹ç±»å‹å®šä¹‰è¡¨
CREATE TABLE content_types (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL COMMENT 'ç±»å‹åç§°ï¼šarticleã€product',
    display_name VARCHAR(100) COMMENT 'æ˜¾ç¤ºåç§°ï¼šæ–‡ç« ã€å•†å“',
    description TEXT COMMENT 'ç±»å‹æè¿°',
    template VARCHAR(100) COMMENT 'å±•ç¤ºæ¨¡æ¿',
    status ENUM('active','inactive') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç¤ºä¾‹æ•°æ®
INSERT INTO content_types VALUES 
(1, 'article', 'æ–‡ç« ', 'æ–°é—»æ–‡ç« å†…å®¹ç±»å‹', 'article.html', 'active', NOW()),
(2, 'product', 'å•†å“', 'ç”µå•†å•†å“å†…å®¹ç±»å‹', 'product.html', 'active', NOW()),
(3, 'page', 'é¡µé¢', 'é™æ€é¡µé¢å†…å®¹ç±»å‹', 'page.html', 'active', NOW());
```

**ğŸ¨ å†…å®¹æ¨¡æ¿ç³»ç»Ÿ**

æ¨¡æ¿ç³»ç»Ÿå°±æ˜¯å®šä¹‰å†…å®¹åœ¨å‰ç«¯å¦‚ä½•å±•ç¤ºï¼š

```
å†…å®¹æ¨¡æ¿æ˜ å°„å…³ç³»ï¼š

å†…å®¹ç±»å‹(article) â†’ æ¨¡æ¿æ–‡ä»¶(article.html) â†’ å‰ç«¯å±•ç¤º
     â†“                    â†“                    â†“
   å­—æ®µå®šä¹‰          æ¨¡æ¿å˜é‡              å®é™…å†…å®¹
 {title, content}   {{title}}{{content}}   å…·ä½“æ–‡ç« å†…å®¹
```

---

## 2. ğŸ› ï¸ å†…å®¹å®ä½“å»ºæ¨¡ç­–ç•¥


### 2.1 EAVæ¨¡å‹ vs ä¼ ç»Ÿå…³ç³»æ¨¡å‹


**ğŸ¤” ä¸¤ç§å»ºæ¨¡æ–¹å¼çš„å¯¹æ¯”**

**ä¼ ç»Ÿå…³ç³»æ¨¡å‹ï¼ˆç®€å•ç›´æ¥ï¼‰ï¼š**
```sql
-- æ¯ç§å†…å®¹ç±»å‹ä¸€å¼ è¡¨
CREATE TABLE articles (
    id INT PRIMARY KEY,
    title VARCHAR(200),
    content TEXT,
    author_id INT,
    created_at TIMESTAMP
);

CREATE TABLE products (
    id INT PRIMARY KEY,
    name VARCHAR(200),
    price DECIMAL(10,2),
    category_id INT,
    stock INT
);
```

**EAVæ¨¡å‹ï¼ˆå®ä½“-å±æ€§-å€¼ï¼‰ï¼š**
```sql
-- ç»Ÿä¸€çš„å†…å®¹å®ä½“è¡¨
CREATE TABLE contents (
    id INT PRIMARY KEY,
    content_type_id INT,
    title VARCHAR(200) COMMENT 'é€šç”¨æ ‡é¢˜å­—æ®µ',
    status ENUM('draft','published','archived'),
    created_at TIMESTAMP
);

-- åŠ¨æ€å±æ€§å€¼è¡¨
CREATE TABLE content_attributes (
    id INT PRIMARY KEY,
    content_id INT,
    field_name VARCHAR(50),
    field_value TEXT,
    field_type ENUM('string','number','date','boolean')
);
```

**ğŸ“Š ä¸¤ç§æ¨¡å‹å¯¹æ¯”åˆ†æ**

| **å¯¹æ¯”ç»´åº¦** | **ä¼ ç»Ÿå…³ç³»æ¨¡å‹** | **EAVæ¨¡å‹** |
|-------------|-----------------|-------------|
| **çµæ´»æ€§** | `ä½ - éœ€æ”¹è¡¨ç»“æ„` | `é«˜ - åŠ¨æ€æ‰©å±•å­—æ®µ` |
| **æ€§èƒ½** | `é«˜ - ç›´æ¥æŸ¥è¯¢` | `ä¸­ - éœ€è¦JOINæ“ä½œ` |
| **ç»´æŠ¤å¤æ‚åº¦** | `ä¸­ - å¤šè¡¨ç®¡ç†` | `é«˜ - æŸ¥è¯¢å¤æ‚` |
| **é€‚ç”¨åœºæ™¯** | `å›ºå®šå­—æ®µçš„å†…å®¹` | `çµæ´»å¤šå˜çš„å†…å®¹` |

### 2.2 æ··åˆå»ºæ¨¡ç­–ç•¥ï¼ˆæ¨èæ–¹æ¡ˆï¼‰


**ğŸ’¡ æœ€ä½³å®è·µï¼šæ ¸å¿ƒå­—æ®µ + æ‰©å±•å±æ€§**

```sql
-- ä¸»å†…å®¹è¡¨ï¼ˆå­˜å‚¨æ ¸å¿ƒå…¬å…±å­—æ®µï¼‰
CREATE TABLE contents (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_type_id INT NOT NULL COMMENT 'å†…å®¹ç±»å‹ID',
    title VARCHAR(500) NOT NULL COMMENT 'æ ‡é¢˜ï¼ˆæ‰€æœ‰å†…å®¹éƒ½æœ‰ï¼‰',
    slug VARCHAR(200) UNIQUE COMMENT 'URLåˆ«å',
    summary TEXT COMMENT 'æ‘˜è¦',
    status ENUM('draft','published','archived','deleted') DEFAULT 'draft',
    author_id BIGINT COMMENT 'ä½œè€…ID',
    publish_time DATETIME COMMENT 'å‘å¸ƒæ—¶é—´',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_type_status (content_type_id, status),
    INDEX idx_publish_time (publish_time),
    FOREIGN KEY (content_type_id) REFERENCES content_types(id)
);

-- æ‰©å±•å±æ€§è¡¨ï¼ˆå­˜å‚¨ç‰¹æ®Šå­—æ®µï¼‰
CREATE TABLE content_attributes (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_id BIGINT NOT NULL,
    attribute_key VARCHAR(100) NOT NULL COMMENT 'å±æ€§åï¼špriceã€colorã€size',
    attribute_value TEXT COMMENT 'å±æ€§å€¼',
    value_type ENUM('string','integer','decimal','boolean','date','json') DEFAULT 'string',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_content_attribute (content_id, attribute_key),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);
```

**ğŸ” æ··åˆæ¨¡å‹ä½¿ç”¨ç¤ºä¾‹**

```sql
-- æ’å…¥ä¸€ä¸ªå•†å“å†…å®¹
INSERT INTO contents (content_type_id, title, summary, status, author_id) 
VALUES (2, 'iPhone 15 Pro', 'æœ€æ–°æ¬¾iPhoneæ‰‹æœº', 'published', 1001);

-- æ’å…¥å•†å“çš„æ‰©å±•å±æ€§
INSERT INTO content_attributes (content_id, attribute_key, attribute_value, value_type) VALUES
(1, 'price', '9999.00', 'decimal'),
(1, 'color', 'iPhoneè“è‰²', 'string'),
(1, 'storage', '256', 'integer'),
(1, 'in_stock', 'true', 'boolean');

-- æŸ¥è¯¢å¸¦æ‰©å±•å±æ€§çš„å•†å“ä¿¡æ¯
SELECT 
    c.id,
    c.title,
    c.summary,
    GROUP_CONCAT(
        CONCAT(ca.attribute_key, ':', ca.attribute_value) 
        SEPARATOR ';'
    ) as attributes
FROM contents c
LEFT JOIN content_attributes ca ON c.id = ca.content_id
WHERE c.content_type_id = 2 AND c.status = 'published'
GROUP BY c.id;
```

### 2.3 å†…å®¹å…ƒæ•°æ®ç®¡ç†


**ğŸ“‹ å…ƒæ•°æ®çš„ä½œç”¨**

å…ƒæ•°æ®å°±æ˜¯"å…³äºæ•°æ®çš„æ•°æ®"ï¼Œè®°å½•å†…å®¹çš„é¢å¤–ä¿¡æ¯ï¼š

```sql
CREATE TABLE content_metadata (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_id BIGINT NOT NULL,
    meta_key VARCHAR(100) NOT NULL COMMENT 'å…ƒæ•°æ®é”®ï¼šseo_titleã€keywords',
    meta_value TEXT COMMENT 'å…ƒæ•°æ®å€¼',
    meta_group VARCHAR(50) DEFAULT 'general' COMMENT 'åˆ†ç»„ï¼šseoã€socialã€custom',
    is_public BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å…¬å¼€æ˜¾ç¤º',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_content_meta (content_id, meta_key),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);
```

**ğŸ’¡ å…ƒæ•°æ®åº”ç”¨å®ä¾‹**

```sql
-- SEOç›¸å…³å…ƒæ•°æ®
INSERT INTO content_metadata (content_id, meta_key, meta_value, meta_group) VALUES
(1, 'seo_title', 'iPhone 15 Pro - æœ€æ–°æ¬¾æ™ºèƒ½æ‰‹æœº | å®˜æ–¹å•†åŸ', 'seo'),
(1, 'meta_description', 'è´­ä¹°æœ€æ–°iPhone 15 Proï¼Œ128GBèµ·ï¼Œæ”¯æŒ5Gç½‘ç»œ...', 'seo'),
(1, 'keywords', 'iPhone,æ‰‹æœº,è‹¹æœ,5G,æ™ºèƒ½æ‰‹æœº', 'seo');

-- ç¤¾äº¤åª’ä½“å…ƒæ•°æ®
INSERT INTO content_metadata (content_id, meta_key, meta_value, meta_group) VALUES
(1, 'og_title', 'iPhone 15 Pro éœ‡æ’¼ä¸Šå¸‚', 'social'),
(1, 'og_image', '/images/iphone15-social.jpg', 'social');
```

---

## 3. ğŸ”§ åŠ¨æ€å­—æ®µæ‰©å±•æœºåˆ¶


### 3.1 å­—æ®µæ¨¡æ¿å®šä¹‰


**ğŸ“ ä»€ä¹ˆæ˜¯å­—æ®µæ¨¡æ¿**

å­—æ®µæ¨¡æ¿å°±æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„"è¾“å…¥æ¡†ç±»å‹"ï¼Œå°±åƒç½‘é¡µè¡¨å•ä¸­çš„ä¸åŒè¾“å…¥æ§ä»¶ï¼š

```sql
CREATE TABLE field_templates (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL COMMENT 'å­—æ®µåç§°ï¼štitleã€priceã€image',
    display_name VARCHAR(200) COMMENT 'æ˜¾ç¤ºåç§°ï¼šå•†å“æ ‡é¢˜ã€å•†å“ä»·æ ¼',
    field_type ENUM('text','textarea','number','decimal','date','boolean','select','file','image','rich_text') NOT NULL,
    default_value TEXT COMMENT 'é»˜è®¤å€¼',
    validation_rules JSON COMMENT 'éªŒè¯è§„åˆ™ï¼š{"required":true,"max_length":200}',
    options JSON COMMENT 'é€‰é¡¹æ•°æ®ï¼šç”¨äºselectç±»å‹',
    help_text VARCHAR(500) COMMENT 'å¸®åŠ©è¯´æ˜',
    is_required BOOLEAN DEFAULT FALSE,
    sort_order INT DEFAULT 0,
    status ENUM('active','inactive') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ğŸ¨ å­—æ®µç±»å‹é…ç½®ç¤ºä¾‹**

```sql
-- æ–‡æœ¬å­—æ®µ
INSERT INTO field_templates (name, display_name, field_type, validation_rules, help_text, is_required) VALUES
('title', 'æ ‡é¢˜', 'text', '{"required":true,"max_length":200}', 'è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜ï¼Œæœ€å¤š200å­—', true),
('summary', 'æ‘˜è¦', 'textarea', '{"max_length":500}', 'è¯·è¾“å…¥æ–‡ç« æ‘˜è¦ï¼Œæœ€å¤š500å­—', false);

-- æ•°å€¼å­—æ®µ  
INSERT INTO field_templates (name, display_name, field_type, validation_rules, help_text, is_required) VALUES
('price', 'ä»·æ ¼', 'decimal', '{"required":true,"min":0,"precision":2}', 'è¯·è¾“å…¥å•†å“ä»·æ ¼ï¼Œç²¾ç¡®åˆ°åˆ†', true),
('stock', 'åº“å­˜', 'number', '{"min":0}', 'è¯·è¾“å…¥åº“å­˜æ•°é‡', false);

-- é€‰æ‹©å­—æ®µ
INSERT INTO field_templates (name, display_name, field_type, options, help_text) VALUES
('status', 'çŠ¶æ€', 'select', '["draft","published","archived"]', 'è¯·é€‰æ‹©æ–‡ç« çŠ¶æ€'),
('category', 'åˆ†ç±»', 'select', '["electronics","clothing","books"]', 'è¯·é€‰æ‹©å•†å“åˆ†ç±»');
```

### 3.2 å†…å®¹ç±»å‹å­—æ®µå…³è”


**ğŸ”— å†…å®¹ç±»å‹ä¸å­—æ®µçš„ç»‘å®šå…³ç³»**

ä¸åŒçš„å†…å®¹ç±»å‹éœ€è¦ä¸åŒçš„å­—æ®µç»„åˆï¼š

```sql
CREATE TABLE content_type_fields (
    id INT PRIMARY KEY AUTO_INCREMENT,
    content_type_id INT NOT NULL COMMENT 'å†…å®¹ç±»å‹ID',
    field_template_id INT NOT NULL COMMENT 'å­—æ®µæ¨¡æ¿ID', 
    field_name VARCHAR(100) NOT NULL COMMENT 'å­—æ®µåç§°ï¼ˆå¯é‡å‘½åï¼‰',
    field_label VARCHAR(200) COMMENT 'æ˜¾ç¤ºæ ‡ç­¾',
    is_required BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¿…å¡«',
    default_value TEXT COMMENT 'é»˜è®¤å€¼ï¼ˆè¦†ç›–æ¨¡æ¿é»˜è®¤å€¼ï¼‰',
    sort_order INT DEFAULT 0 COMMENT 'æ˜¾ç¤ºé¡ºåº',
    is_searchable BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¯æœç´¢',
    is_filterable BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¯ç­›é€‰',
    group_name VARCHAR(50) DEFAULT 'basic' COMMENT 'å­—æ®µåˆ†ç»„ï¼šbasicã€advancedã€seo',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_type_field (content_type_id, field_name),
    FOREIGN KEY (content_type_id) REFERENCES content_types(id),
    FOREIGN KEY (field_template_id) REFERENCES field_templates(id)
);
```

**ğŸ’¡ å­—æ®µå…³è”é…ç½®ç¤ºä¾‹**

```sql
-- ä¸º"å•†å“"å†…å®¹ç±»å‹é…ç½®å­—æ®µ
INSERT INTO content_type_fields 
(content_type_id, field_template_id, field_name, field_label, is_required, sort_order, group_name) VALUES
-- åŸºç¡€å­—æ®µç»„
(2, 1, 'name', 'å•†å“åç§°', true, 1, 'basic'),
(2, 2, 'description', 'å•†å“æè¿°', false, 2, 'basic'),
(2, 3, 'price', 'é”€å”®ä»·æ ¼', true, 3, 'basic'),
(2, 4, 'stock', 'åº“å­˜æ•°é‡', true, 4, 'basic'),
-- é«˜çº§å­—æ®µç»„
(2, 5, 'category', 'å•†å“åˆ†ç±»', true, 5, 'advanced'),
(2, 6, 'brand', 'å“ç‰Œ', false, 6, 'advanced'),
(2, 7, 'weight', 'é‡é‡(kg)', false, 7, 'advanced');

-- ä¸º"æ–‡ç« "å†…å®¹ç±»å‹é…ç½®å­—æ®µ
INSERT INTO content_type_fields 
(content_type_id, field_template_id, field_name, field_label, is_required, sort_order, group_name) VALUES
(1, 1, 'title', 'æ–‡ç« æ ‡é¢˜', true, 1, 'basic'),
(1, 2, 'content', 'æ–‡ç« å†…å®¹', true, 2, 'basic'),
(1, 8, 'author', 'ä½œè€…', false, 3, 'basic'),
(1, 9, 'tags', 'æ ‡ç­¾', false, 4, 'basic');
```

### 3.3 è‡ªå®šä¹‰å­—æ®µç®¡ç†ç•Œé¢


**ğŸ¯ åŠ¨æ€è¡¨å•ç”Ÿæˆé€»è¾‘**

æ ¹æ®å†…å®¹ç±»å‹åŠ¨æ€ç”Ÿæˆç¼–è¾‘è¡¨å•ï¼š

```sql
-- æŸ¥è¯¢æŸä¸ªå†…å®¹ç±»å‹çš„æ‰€æœ‰å­—æ®µé…ç½®
SELECT 
    ctf.field_name,
    ctf.field_label,
    ctf.is_required,
    ctf.default_value,
    ctf.group_name,
    ctf.sort_order,
    ft.field_type,
    ft.validation_rules,
    ft.options,
    ft.help_text
FROM content_type_fields ctf
JOIN field_templates ft ON ctf.field_template_id = ft.id
WHERE ctf.content_type_id = 2 -- å•†å“ç±»å‹
  AND ft.status = 'active'
ORDER BY ctf.sort_order ASC;
```

**ğŸ“‹ å­—æ®µéªŒè¯è§„åˆ™ç¤ºä¾‹**

```json
{
  "validation_rules": {
    "title": {
      "required": true,
      "max_length": 200,
      "min_length": 5
    },
    "price": {
      "required": true,
      "type": "decimal",
      "min": 0.01,
      "precision": 2
    },
    "email": {
      "required": false,
      "format": "email",
      "max_length": 100
    },
    "phone": {
      "required": false,
      "format": "regex",
      "pattern": "^1[3-9]\\d{9}$"
    }
  }
}
```

---

## 4. ğŸ”— å†…å®¹å…³è”å…³ç³»è®¾è®¡


### 4.1 ä¸€å¯¹ä¸€å…³ç³»è®¾è®¡


**ğŸ’¡ ä¸€å¯¹ä¸€å…³ç³»çš„åº”ç”¨åœºæ™¯**

ä¸€å¯¹ä¸€å…³ç³»é€šå¸¸ç”¨äºå†…å®¹çš„æ‰©å±•ä¿¡æ¯å­˜å‚¨ï¼š

```sql
-- å†…å®¹è¯¦æƒ…è¡¨ï¼ˆä¸€å¯¹ä¸€æ‰©å±•ï¼‰
CREATE TABLE content_details (
    content_id BIGINT PRIMARY KEY,
    full_content LONGTEXT COMMENT 'å®Œæ•´å†…å®¹ï¼ˆå¤§æ–‡æœ¬ï¼‰',
    view_count INT DEFAULT 0 COMMENT 'æµè§ˆæ¬¡æ•°',
    like_count INT DEFAULT 0 COMMENT 'ç‚¹èµæ•°',
    comment_count INT DEFAULT 0 COMMENT 'è¯„è®ºæ•°',
    seo_config JSON COMMENT 'SEOé…ç½®ä¿¡æ¯',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);

-- å†…å®¹ç»Ÿè®¡è¡¨ï¼ˆä¸€å¯¹ä¸€ï¼‰
CREATE TABLE content_statistics (
    content_id BIGINT PRIMARY KEY,
    total_views INT DEFAULT 0,
    unique_views INT DEFAULT 0,
    avg_read_time INT DEFAULT 0 COMMENT 'å¹³å‡é˜…è¯»æ—¶é—´ï¼ˆç§’ï¼‰',
    bounce_rate DECIMAL(5,2) DEFAULT 0.00 COMMENT 'è·³å‡ºç‡',
    last_viewed_at TIMESTAMP NULL,
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);
```

### 4.2 ä¸€å¯¹å¤šå…³ç³»è®¾è®¡


**ğŸ“š ä¸€å¯¹å¤šå…³ç³»çš„å…¸å‹åœºæ™¯**

```sql
-- å†…å®¹åˆ†ç±»è¡¨ï¼ˆä¸€ä¸ªåˆ†ç±»å¯¹åº”å¤šä¸ªå†…å®¹ï¼‰
CREATE TABLE categories (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    slug VARCHAR(100) UNIQUE,
    description TEXT,
    parent_id INT NULL COMMENT 'çˆ¶åˆ†ç±»IDï¼Œæ”¯æŒå¤šçº§åˆ†ç±»',
    sort_order INT DEFAULT 0,
    status ENUM('active','inactive') DEFAULT 'active',
    FOREIGN KEY (parent_id) REFERENCES categories(id)
);

-- å†…å®¹åˆ†ç±»å…³è”è¡¨
ALTER TABLE contents ADD COLUMN category_id INT,
ADD FOREIGN KEY (category_id) REFERENCES categories(id);

-- å†…å®¹è¯„è®ºè¡¨ï¼ˆä¸€ä¸ªå†…å®¹å¯¹åº”å¤šæ¡è¯„è®ºï¼‰
CREATE TABLE content_comments (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_id BIGINT NOT NULL,
    parent_id BIGINT NULL COMMENT 'çˆ¶è¯„è®ºIDï¼Œæ”¯æŒåµŒå¥—è¯„è®º',
    user_id BIGINT NOT NULL,
    user_name VARCHAR(100),
    user_email VARCHAR(150),
    comment_text TEXT NOT NULL,
    status ENUM('pending','approved','rejected','spam') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_content_status (content_id, status),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_id) REFERENCES content_comments(id) ON DELETE CASCADE
);
```

### 4.3 å¤šå¯¹å¤šå…³ç³»è®¾è®¡


**ğŸ·ï¸ å†…å®¹æ ‡ç­¾ç³»ç»Ÿï¼ˆå¤šå¯¹å¤šï¼‰**

```sql
-- æ ‡ç­¾è¡¨
CREATE TABLE tags (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL UNIQUE,
    slug VARCHAR(50) NOT NULL UNIQUE,
    color VARCHAR(7) DEFAULT '#3498db' COMMENT 'æ ‡ç­¾é¢œè‰²',
    description TEXT,
    usage_count INT DEFAULT 0 COMMENT 'ä½¿ç”¨æ¬¡æ•°',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å†…å®¹æ ‡ç­¾å…³è”è¡¨ï¼ˆå¤šå¯¹å¤šä¸­é—´è¡¨ï¼‰
CREATE TABLE content_tags (
    content_id BIGINT NOT NULL,
    tag_id INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (content_id, tag_id),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);

-- å†…å®¹ç›¸å…³æ¨èï¼ˆå¤šå¯¹å¤šè‡ªå…³è”ï¼‰
CREATE TABLE content_relations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    source_content_id BIGINT NOT NULL COMMENT 'æºå†…å®¹ID',
    related_content_id BIGINT NOT NULL COMMENT 'ç›¸å…³å†…å®¹ID',
    relation_type ENUM('related','similar','next','prev','series') DEFAULT 'related',
    weight DECIMAL(3,2) DEFAULT 1.00 COMMENT 'å…³è”æƒé‡ï¼ˆç”¨äºæ’åºï¼‰',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY uk_content_relation (source_content_id, related_content_id, relation_type),
    FOREIGN KEY (source_content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (related_content_id) REFERENCES contents(id) ON DELETE CASCADE
);
```

**ğŸ” å¤šå¯¹å¤šå…³ç³»æŸ¥è¯¢ç¤ºä¾‹**

```sql
-- æŸ¥è¯¢æ–‡ç« çš„æ‰€æœ‰æ ‡ç­¾
SELECT c.title, GROUP_CONCAT(t.name) as tags
FROM contents c
LEFT JOIN content_tags ct ON c.id = ct.content_id
LEFT JOIN tags t ON ct.tag_id = t.id
WHERE c.id = 1;

-- æŸ¥è¯¢åŒ…å«æŒ‡å®šæ ‡ç­¾çš„æ‰€æœ‰æ–‡ç« 
SELECT c.id, c.title, c.summary
FROM contents c
JOIN content_tags ct ON c.id = ct.content_id
JOIN tags t ON ct.tag_id = t.id
WHERE t.slug IN ('mysql', 'database', 'tutorial')
  AND c.status = 'published'
GROUP BY c.id
HAVING COUNT(DISTINCT t.id) = 3; -- å¿…é¡»åŒ…å«æ‰€æœ‰3ä¸ªæ ‡ç­¾
```

### 4.4 è·¨æ¨¡å‹å†…å®¹å…³è”


**ğŸŒ ä¸åŒå†…å®¹ç±»å‹ä¹‹é—´çš„å…³è”**

```sql
-- é€šç”¨å†…å®¹å…³è”è¡¨
CREATE TABLE content_associations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    source_content_id BIGINT NOT NULL,
    target_content_id BIGINT NOT NULL,
    association_type VARCHAR(50) NOT NULL COMMENT 'å…³è”ç±»å‹ï¼šauthorã€productã€attachment',
    association_data JSON COMMENT 'å…³è”æ‰©å±•æ•°æ®',
    sort_order INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_source_type (source_content_id, association_type),
    FOREIGN KEY (source_content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (target_content_id) REFERENCES contents(id) ON DELETE CASCADE
);

-- ä½¿ç”¨ç¤ºä¾‹ï¼šæ–‡ç« å…³è”å•†å“
INSERT INTO content_associations 
(source_content_id, target_content_id, association_type, association_data) VALUES
(1, 10, 'featured_product', '{"description":"æ–‡ç« ä¸­æ¨èçš„ä¸»æ‰“å•†å“","position":"top"}'),
(1, 11, 'related_product', '{"description":"ç›¸å…³æ¨èå•†å“","position":"sidebar"}');

-- æŸ¥è¯¢æ–‡ç« å…³è”çš„å•†å“
SELECT 
    ca.association_type,
    c.title as product_name,
    ca.association_data
FROM content_associations ca
JOIN contents c ON ca.target_content_id = c.id
WHERE ca.source_content_id = 1 -- æ–‡ç« ID
  AND ca.association_type LIKE '%product%';
```

---

## 5. ğŸ“ˆ å†…å®¹æ¨¡å‹ç»§æ‰¿ä¸ç‰ˆæœ¬æ§åˆ¶


### 5.1 å†…å®¹ç±»å‹ç»§æ‰¿æœºåˆ¶


**ğŸ—ï¸ ç»§æ‰¿å…³ç³»çš„è®¾è®¡æ€è·¯**

å†…å®¹ç±»å‹ç»§æ‰¿å°±åƒé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ç±»ç»§æ‰¿ï¼š

```sql
-- æ”¯æŒç»§æ‰¿çš„å†…å®¹ç±»å‹è¡¨
ALTER TABLE content_types 
ADD COLUMN parent_type_id INT NULL COMMENT 'çˆ¶ç±»å‹ID',
ADD COLUMN is_abstract BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ä¸ºæŠ½è±¡ç±»å‹',
ADD COLUMN inheritance_type ENUM('single','multiple') DEFAULT 'single',
ADD FOREIGN KEY (parent_type_id) REFERENCES content_types(id);

-- ç»§æ‰¿ç¤ºä¾‹æ•°æ®
INSERT INTO content_types VALUES
-- åŸºç¡€å†…å®¹ç±»å‹ï¼ˆæŠ½è±¡ï¼‰
(10, 'base_content', 'åŸºç¡€å†…å®¹', 'æ‰€æœ‰å†…å®¹çš„åŸºç±»', null, 'active', true, 'single', NOW()),
-- æ–‡ç« ç±»å‹ç»§æ‰¿åŸºç¡€å†…å®¹
(11, 'article', 'æ–‡ç« ', 'æ–°é—»æ–‡ç« ç±»å‹', 'article.html', 'active', false, 'single', NOW()),
-- æ–°é—»ç»§æ‰¿æ–‡ç« ç±»å‹  
(12, 'news', 'æ–°é—»', 'æ–°é—»èµ„è®¯ç±»å‹', 'news.html', 'active', false, 'single', NOW());

-- è®¾ç½®ç»§æ‰¿å…³ç³»
UPDATE content_types SET parent_type_id = 10 WHERE id = 11; -- æ–‡ç« ç»§æ‰¿åŸºç¡€å†…å®¹
UPDATE content_types SET parent_type_id = 11 WHERE id = 12; -- æ–°é—»ç»§æ‰¿æ–‡ç« 
```

**ğŸ“‹ å­—æ®µç»§æ‰¿æŸ¥è¯¢**

```sql
-- é€’å½’æŸ¥è¯¢ç»§æ‰¿çš„å­—æ®µï¼ˆMySQL 8.0+ WITH RECURSIVEï¼‰
WITH RECURSIVE inherited_fields AS (
    -- åŸºç¡€æŸ¥è¯¢ï¼šç›´æ¥å­—æ®µ
    SELECT ctf.*, ct.name as type_name, 0 as inherit_level
    FROM content_type_fields ctf
    JOIN content_types ct ON ctf.content_type_id = ct.id
    WHERE ct.id = 12  -- æ–°é—»ç±»å‹
    
    UNION ALL
    
    -- é€’å½’æŸ¥è¯¢ï¼šç»§æ‰¿çš„å­—æ®µ
    SELECT ctf.*, ct.name as type_name, if.inherit_level + 1
    FROM content_type_fields ctf
    JOIN content_types ct ON ctf.content_type_id = ct.id
    JOIN content_types child ON ct.id = child.parent_type_id
    JOIN inherited_fields if ON child.id = if.content_type_id
    WHERE if.inherit_level < 5  -- é™åˆ¶ç»§æ‰¿å±‚æ•°
)
SELECT * FROM inherited_fields 
ORDER BY inherit_level ASC, sort_order ASC;
```

### 5.2 å†…å®¹ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ


**ğŸ“š ç‰ˆæœ¬æ§åˆ¶çš„æ ¸å¿ƒéœ€æ±‚**

ç‰ˆæœ¬æ§åˆ¶å°±æ˜¯è®°å½•å†…å®¹çš„ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿å›æº¯å’Œæ¯”è¾ƒï¼š

```sql
-- å†…å®¹ç‰ˆæœ¬è¡¨
CREATE TABLE content_versions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_id BIGINT NOT NULL,
    version_number INT NOT NULL DEFAULT 1 COMMENT 'ç‰ˆæœ¬å·',
    title VARCHAR(500) COMMENT 'ç‰ˆæœ¬æ ‡é¢˜',
    content_snapshot JSON NOT NULL COMMENT 'å†…å®¹å¿«ç…§ï¼ˆåŒ…å«æ‰€æœ‰å­—æ®µï¼‰',
    change_summary VARCHAR(1000) COMMENT 'å˜æ›´è¯´æ˜',
    version_type ENUM('draft','minor','major','rollback') DEFAULT 'draft',
    author_id BIGINT COMMENT 'ä¿®æ”¹è€…ID',
    parent_version_id BIGINT NULL COMMENT 'åŸºäºå“ªä¸ªç‰ˆæœ¬ä¿®æ”¹',
    is_current BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ä¸ºå½“å‰ç‰ˆæœ¬',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_content_version (content_id, version_number),
    INDEX idx_current_version (content_id, is_current),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_version_id) REFERENCES content_versions(id)
);

-- ç‰ˆæœ¬å˜æ›´æ—¥å¿—
CREATE TABLE version_changes (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    version_id BIGINT NOT NULL,
    field_name VARCHAR(100) NOT NULL,
    old_value TEXT COMMENT 'ä¿®æ”¹å‰çš„å€¼',
    new_value TEXT COMMENT 'ä¿®æ”¹åçš„å€¼',
    change_type ENUM('add','modify','delete') NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (version_id) REFERENCES content_versions(id) ON DELETE CASCADE
);
```

**ğŸ’¡ ç‰ˆæœ¬æ§åˆ¶è§¦å‘å™¨ç¤ºä¾‹**

```sql
-- å†…å®¹æ›´æ–°æ—¶è‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬
DELIMITER //
CREATE TRIGGER content_version_trigger
AFTER UPDATE ON contents
FOR EACH ROW
BEGIN
    DECLARE next_version INT;
    
    -- è·å–ä¸‹ä¸€ä¸ªç‰ˆæœ¬å·
    SELECT COALESCE(MAX(version_number), 0) + 1 INTO next_version
    FROM content_versions 
    WHERE content_id = NEW.id;
    
    -- å°†å½“å‰ç‰ˆæœ¬æ ‡è®°ä¸ºéå½“å‰
    UPDATE content_versions 
    SET is_current = FALSE 
    WHERE content_id = NEW.id AND is_current = TRUE;
    
    -- åˆ›å»ºæ–°ç‰ˆæœ¬è®°å½•
    INSERT INTO content_versions (
        content_id, version_number, title, content_snapshot, 
        version_type, author_id, is_current
    ) VALUES (
        NEW.id, 
        next_version,
        NEW.title,
        JSON_OBJECT(
            'title', NEW.title,
            'summary', NEW.summary, 
            'status', NEW.status,
            'updated_at', NEW.updated_at
        ),
        'minor',
        NEW.author_id,
        TRUE
    );
END //
DELIMITER ;
```

### 5.3 å†…å®¹ç”Ÿå‘½å‘¨æœŸç®¡ç†


**â° ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº**

```
å†…å®¹ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ï¼š

è‰ç¨¿(draft) â†’ å¾…å®¡æ ¸(pending) â†’ å·²å‘å¸ƒ(published) â†’ å·²å½’æ¡£(archived)
    â†“              â†“                â†“                 â†“
 å¯ç¼–è¾‘åˆ é™¤    å¯å®¡æ ¸æ‹’ç»        å¯ä¸‹çº¿å½’æ¡£          å¯æ¢å¤åˆ é™¤
    â†‘              â†‘                â†‘                 â†‘
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è¢«æ‹’ç»(rejected) â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```sql
-- å†…å®¹ç”Ÿå‘½å‘¨æœŸè¡¨
CREATE TABLE content_lifecycle (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_id BIGINT NOT NULL,
    from_status VARCHAR(20) NOT NULL,
    to_status VARCHAR(20) NOT NULL,
    action_type VARCHAR(50) NOT NULL COMMENT 'æ“ä½œç±»å‹ï¼šcreateã€submitã€approveã€rejectã€publishã€archive',
    action_user_id BIGINT COMMENT 'æ“ä½œäººID',
    action_reason TEXT COMMENT 'æ“ä½œåŸå› ',
    scheduled_at DATETIME NULL COMMENT 'è®¡åˆ’æ‰§è¡Œæ—¶é—´ï¼ˆå®šæ—¶å‘å¸ƒï¼‰',
    executed_at DATETIME NULL COMMENT 'å®é™…æ‰§è¡Œæ—¶é—´',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_content_lifecycle (content_id, created_at),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);

-- å®šæ—¶å‘å¸ƒä»»åŠ¡
CREATE TABLE scheduled_tasks (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_id BIGINT NOT NULL,
    task_type ENUM('publish','unpublish','archive','delete') NOT NULL,
    scheduled_time DATETIME NOT NULL,
    status ENUM('pending','completed','failed','cancelled') DEFAULT 'pending',
    retry_count INT DEFAULT 0,
    error_message TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_scheduled_time (scheduled_time, status),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);
```

---

## 6. âš¡ æ€§èƒ½ä¼˜åŒ–ä¸å®æˆ˜ç­–ç•¥


### 6.1 å†…å®¹å±æ€§ç´¢å¼•ä¼˜åŒ–ç­–ç•¥


**ğŸ” åŠ¨æ€å­—æ®µæŸ¥è¯¢ä¼˜åŒ–**

EAVæ¨¡å‹æœ€å¤§çš„é—®é¢˜æ˜¯æŸ¥è¯¢æ€§èƒ½ï¼Œéœ€è¦é€šè¿‡ç´¢å¼•ä¼˜åŒ–ï¼š

```sql
-- ä¸ºåŠ¨æ€å±æ€§åˆ›å»ºå¤åˆç´¢å¼•
ALTER TABLE content_attributes 
ADD INDEX idx_key_value (attribute_key, attribute_value(100)),
ADD INDEX idx_content_key (content_id, attribute_key),
ADD INDEX idx_value_type (value_type, attribute_value(50));

-- ä¸ºJSONç±»å‹å±æ€§åˆ›å»ºè™šæ‹Ÿåˆ—ç´¢å¼•ï¼ˆMySQL 5.7+ï¼‰
ALTER TABLE content_attributes 
ADD COLUMN value_numeric DECIMAL(15,4) AS (
    CASE 
        WHEN value_type = 'decimal' THEN CAST(attribute_value AS DECIMAL(15,4))
        WHEN value_type = 'integer' THEN CAST(attribute_value AS SIGNED)
        ELSE NULL 
    END
) STORED,
ADD INDEX idx_numeric_value (value_numeric);

-- ä¸ºå¸¸ç”¨å±æ€§åˆ›å»ºä¸“ç”¨ç´¢å¼•
ALTER TABLE content_attributes 
ADD INDEX idx_price (attribute_key, value_numeric) 
WHERE attribute_key = 'price',
ADD INDEX idx_category (attribute_key, attribute_value(50)) 
WHERE attribute_key = 'category';
```

### 6.2 å†…å®¹å…³ç³»æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–


**ğŸš€ å…³è”æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§**

```sql
-- å†…å®¹æ ‡ç­¾æŸ¥è¯¢ä¼˜åŒ–ï¼ˆé¿å…å¤šæ¬¡JOINï¼‰
-- âŒ ä½æ•ˆæŸ¥è¯¢æ–¹å¼
SELECT c.*, GROUP_CONCAT(t.name) as tags
FROM contents c
LEFT JOIN content_tags ct ON c.id = ct.content_id  
LEFT JOIN tags t ON ct.tag_id = t.id
WHERE c.status = 'published'
GROUP BY c.id
ORDER BY c.created_at DESC;

-- âœ… ä¼˜åŒ–æŸ¥è¯¢æ–¹å¼ï¼šåˆ†æ­¥æŸ¥è¯¢
-- ç¬¬ä¸€æ­¥ï¼šæŸ¥è¯¢å†…å®¹åŸºç¡€ä¿¡æ¯
SELECT id, title, summary, created_at
FROM contents 
WHERE status = 'published' 
ORDER BY created_at DESC 
LIMIT 20;

-- ç¬¬äºŒæ­¥ï¼šæ‰¹é‡æŸ¥è¯¢æ ‡ç­¾ï¼ˆåœ¨åº”ç”¨å±‚åˆå¹¶ï¼‰
SELECT ct.content_id, GROUP_CONCAT(t.name) as tags
FROM content_tags ct
JOIN tags t ON ct.tag_id = t.id  
WHERE ct.content_id IN (1,2,3,4,5...) -- ç¬¬ä¸€æ­¥æŸ¥è¯¢çš„IDåˆ—è¡¨
GROUP BY ct.content_id;
```

**ğŸ“Š ç¼“å­˜ç­–ç•¥ä¼˜åŒ–**

```sql
-- å†…å®¹ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜è¡¨
CREATE TABLE content_cache (
    content_id BIGINT PRIMARY KEY,
    cache_key VARCHAR(100) NOT NULL,
    cache_data JSON NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_cache_key (cache_key),
    INDEX idx_expires (expires_at),
    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE
);

-- çƒ­é—¨å†…å®¹ç¼“å­˜ç¤ºä¾‹
INSERT INTO content_cache (content_id, cache_key, cache_data, expires_at) VALUES
(1, 'popular_articles', JSON_OBJECT(
    'view_count', 1500,
    'like_count', 89,
    'comment_count', 23,
    'tags', JSON_ARRAY('MySQL', 'Database', 'Tutorial')
), DATE_ADD(NOW(), INTERVAL 1 HOUR));
```

### 6.3 å†…å®¹æ¨¡å‹çµæ´»æ€§ä¸æ€§èƒ½å¹³è¡¡


**âš–ï¸ åˆ†å±‚å­˜å‚¨ç­–ç•¥**

```sql
-- é«˜é¢‘è®¿é—®å­—æ®µï¼šå­˜å‚¨åœ¨ä¸»è¡¨
-- ä½é¢‘è®¿é—®å­—æ®µï¼šå­˜å‚¨åœ¨æ‰©å±•è¡¨  
-- å¤æ‚æ•°æ®ï¼šä½¿ç”¨JSONå­˜å‚¨

-- ä¸»è¡¨ï¼ˆé«˜é¢‘å­—æ®µï¼‰
CREATE TABLE contents_core (
    id BIGINT PRIMARY KEY,
    content_type_id INT NOT NULL,
    title VARCHAR(500) NOT NULL,
    slug VARCHAR(200) UNIQUE,
    status ENUM('draft','published','archived') DEFAULT 'draft',
    author_id BIGINT,
    publish_time DATETIME,
    view_count INT DEFAULT 0,
    like_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    -- æ ¸å¿ƒç´¢å¼•
    INDEX idx_type_status_publish (content_type_id, status, publish_time),
    INDEX idx_author_time (author_id, created_at),
    INDEX idx_popular (view_count DESC, like_count DESC)
);

-- æ‰©å±•è¡¨ï¼ˆä½é¢‘å­—æ®µï¼‰
CREATE TABLE contents_extended (
    content_id BIGINT PRIMARY KEY,
    summary TEXT,
    meta_title VARCHAR(300),
    meta_description VARCHAR(500),
    meta_keywords VARCHAR(300),
    custom_fields JSON,
    seo_config JSON,
    FOREIGN KEY (content_id) REFERENCES contents_core(id) ON DELETE CASCADE
);

-- å†…å®¹ä¸»ä½“ï¼ˆå¤§æ–‡æœ¬ï¼‰
CREATE TABLE contents_body (
    content_id BIGINT PRIMARY KEY,
    body_content LONGTEXT,
    body_format ENUM('html','markdown','plain') DEFAULT 'html',
    word_count INT GENERATED ALWAYS AS (
        CHAR_LENGTH(TRIM(body_content)) - CHAR_LENGTH(REPLACE(TRIM(body_content), ' ', '')) + 1
    ) STORED,
    reading_time INT GENERATED ALWAYS AS (CEIL(word_count / 200)) STORED,
    FOREIGN KEY (content_id) REFERENCES contents_core(id) ON DELETE CASCADE,
    FULLTEXT INDEX idx_body_search (body_content)
);
```

### 6.4 å‘åå…¼å®¹æœºåˆ¶è®¾è®¡


**ğŸ”„ æ•°æ®è¿ç§»ä¸å…¼å®¹æ€§**

```sql
-- æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
CREATE TABLE schema_versions (
    id INT PRIMARY KEY AUTO_INCREMENT,
    version VARCHAR(20) NOT NULL UNIQUE,
    description TEXT,
    migration_script TEXT,
    rollback_script TEXT,
    applied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å­—æ®µè¿ç§»è®°å½•
CREATE TABLE field_migrations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    content_type_id INT NOT NULL,
    old_field_name VARCHAR(100),
    new_field_name VARCHAR(100), 
    migration_type ENUM('add','rename','delete','modify') NOT NULL,
    migration_data JSON COMMENT 'è¿ç§»é…ç½®æ•°æ®',
    status ENUM('pending','completed','failed') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å…¼å®¹æ€§å¤„ç†ç¤ºä¾‹
INSERT INTO field_migrations (content_type_id, old_field_name, new_field_name, migration_type, migration_data) VALUES
(2, 'product_price', 'price', 'rename', JSON_OBJECT(
    'backup_old_field', true,
    'update_references', true,
    'validation_rules', JSON_OBJECT('required', true, 'min', 0)
));
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å†…å®¹æ¨¡å‹è®¾è®¡ï¼šç»Ÿä¸€å­˜å‚¨ç»“æ„ï¼Œæ”¯æŒå¤šæ ·åŒ–å†…å®¹ç±»å‹
ğŸ”¸ EAV vs å…³ç³»æ¨¡å‹ï¼šçµæ´»æ€§ä¸æ€§èƒ½çš„æƒè¡¡é€‰æ‹©  
ğŸ”¸ åŠ¨æ€å­—æ®µæ‰©å±•ï¼šå­—æ®µæ¨¡æ¿æœºåˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰å±æ€§
ğŸ”¸ å†…å®¹å…³è”å…³ç³»ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šå…³ç³»è®¾è®¡
ğŸ”¸ ç»§æ‰¿ä¸ç‰ˆæœ¬æ§åˆ¶ï¼šå†…å®¹ç±»å‹ç»§æ‰¿ã€ç‰ˆæœ¬å†å²ç®¡ç†
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šç´¢å¼•ç­–ç•¥ã€ç¼“å­˜æœºåˆ¶ã€æŸ¥è¯¢ä¼˜åŒ–
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šå†…å®¹çŠ¶æ€æµè½¬ã€å®šæ—¶ä»»åŠ¡å¤„ç†
```

### 7.2 å…³é”®è®¾è®¡åŸåˆ™


**ğŸ”¹ çµæ´»æ€§ä¸æ€§èƒ½å¹³è¡¡**
```
æ ¸å¿ƒå­—æ®µå­˜ä¸»è¡¨ï¼štitleã€statusã€author_idç­‰é«˜é¢‘å­—æ®µ
æ‰©å±•å­—æ®µå­˜å±æ€§è¡¨ï¼špriceã€colorã€sizeç­‰ç‰¹æ®Šå­—æ®µ  
å¤§æ–‡æœ¬å•ç‹¬å­˜å‚¨ï¼šcontentã€descriptionç­‰å¤§æ•°æ®
ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼šview_countã€popular_tagsç­‰ç»Ÿè®¡ä¿¡æ¯
```

**ğŸ”¹ æ•°æ®ä¸€è‡´æ€§ä¿éšœ**
```
å¤–é”®çº¦æŸï¼šä¿è¯å…³è”å…³ç³»çš„å®Œæ•´æ€§
äº‹åŠ¡æ§åˆ¶ï¼šç¡®ä¿å¤æ‚æ“ä½œçš„åŸå­æ€§  
è§¦å‘å™¨ï¼šè‡ªåŠ¨ç»´æŠ¤ç»Ÿè®¡æ•°æ®å’Œç‰ˆæœ¬ä¿¡æ¯
å®šæœŸæ¸…ç†ï¼šåˆ é™¤è¿‡æœŸç¼“å­˜å’Œæ— ç”¨æ•°æ®
```

**ğŸ”¹ å¯æ‰©å±•æ€§è®¾è®¡**
```
æ¨¡å—åŒ–è®¾è®¡ï¼šå†…å®¹ç±»å‹ã€å­—æ®µæ¨¡æ¿ã€å…³è”å…³ç³»ç‹¬ç«‹
æ’ä»¶æœºåˆ¶ï¼šæ”¯æŒè‡ªå®šä¹‰å†…å®¹ç±»å‹å’Œå­—æ®µç±»å‹
APIæ¥å£ï¼šæä¾›æ ‡å‡†åŒ–çš„å†…å®¹æ“ä½œæ¥å£
ç‰ˆæœ¬æ§åˆ¶ï¼šæ”¯æŒæ¨¡å‹ç»“æ„çš„å¹³æ»‘å‡çº§
```

### 7.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ’¼ ä¼ä¸šçº§CMSåº”ç”¨**
- **æ–°é—»é—¨æˆ·**ï¼šæ–‡ç« ã€ä¸“é¢˜ã€å›¾é›†ã€è§†é¢‘å¤šåª’ä½“å†…å®¹
- **ç”µå•†å¹³å°**ï¼šå•†å“ã€å“ç‰Œã€åˆ†ç±»ã€ä¿ƒé”€æ´»åŠ¨å†…å®¹  
- **ä¼ä¸šå®˜ç½‘**ï¼šäº§å“ä»‹ç»ã€è§£å†³æ–¹æ¡ˆã€å®¢æˆ·æ¡ˆä¾‹
- **çŸ¥è¯†åº“ç³»ç»Ÿ**ï¼šæ–‡æ¡£ã€æ•™ç¨‹ã€FAQã€èµ„æºä¸‹è½½

**ğŸ¯ æŠ€æœ¯é€‰å‹å»ºè®®**
- **å°å‹é¡¹ç›®**ï¼šä¼ ç»Ÿå…³ç³»æ¨¡å‹ + é¢„å®šä¹‰å­—æ®µ
- **ä¸­å‹é¡¹ç›®**ï¼šæ··åˆæ¨¡å‹ï¼ˆæ ¸å¿ƒå­—æ®µ + æ‰©å±•å±æ€§ï¼‰
- **å¤§å‹é¡¹ç›®**ï¼šåˆ†å±‚å­˜å‚¨ + ç¼“å­˜ä¼˜åŒ– + æœç´¢å¼•æ“
- **è¶…å¤§è§„æ¨¡**ï¼šå¾®æœåŠ¡æ¶æ„ + åˆ†å¸ƒå¼å­˜å‚¨

### 7.4 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**âš ï¸ æ€§èƒ½é—®é¢˜**
```
é—®é¢˜ï¼šEAVæ¨¡å‹æŸ¥è¯¢æ…¢
è§£å†³ï¼šåˆ›å»ºå¤åˆç´¢å¼•ã€ä½¿ç”¨ç¼“å­˜ã€åˆ†æ­¥æŸ¥è¯¢

é—®é¢˜ï¼šJOINæ“ä½œè¿‡å¤š
è§£å†³ï¼šé€‚åº¦åèŒƒå¼åŒ–ã€é¢„è®¡ç®—çƒ­ç‚¹æ•°æ®

é—®é¢˜ï¼šå…¨æ–‡æœç´¢æ•ˆç‡ä½  
è§£å†³ï¼šä½¿ç”¨Elasticsearchã€åˆ›å»ºå…¨æ–‡ç´¢å¼•
```

**ğŸ’¡ è®¾è®¡æœ€ä½³å®è·µ**
```
å­—æ®µè®¾è®¡ï¼šæ ¸å¿ƒå­—æ®µå›ºå®šï¼Œæ‰©å±•å­—æ®µçµæ´»
å…³ç³»è®¾è®¡ï¼šé¿å…è¿‡åº¦å…³è”ï¼Œæ§åˆ¶JOINå±‚æ¬¡
ç´¢å¼•è®¾è®¡ï¼šåŸºäºæŸ¥è¯¢æ¨¡å¼åˆ›å»ºåˆé€‚ç´¢å¼•  
ç¼“å­˜è®¾è®¡ï¼šå¤šå±‚ç¼“å­˜ç­–ç•¥ï¼Œå®šæœŸæ›´æ–°æœºåˆ¶
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
```
CMSæ•°æ®æ¨¡å‹è¦çµæ´»ï¼Œæ ¸å¿ƒæ‰©å±•è¦åˆ†ç¦»
å†…å®¹ç±»å‹å®šæ¨¡æ¿ï¼Œå­—æ®µå±æ€§å¯æ‰©å±•
ä¸€å¯¹ä¸€æ‰©å±•è¯¦æƒ…ï¼Œä¸€å¯¹å¤šåˆ†ç±»è¯„è®º
å¤šå¯¹å¤šæ ‡ç­¾å…³è”ï¼Œç‰ˆæœ¬æ§åˆ¶è®°å†å²
ç´¢å¼•ä¼˜åŒ–ææ€§èƒ½ï¼Œç¼“å­˜å‡å°‘æ•°æ®åº“å‹åŠ›
ç”Ÿå‘½å‘¨æœŸç®¡çŠ¶æ€ï¼Œå®šæ—¶ä»»åŠ¡è‡ªåŠ¨åŒ–
```