---
title: 13ã€ç”µç«æ•°æ®åˆ†æå¹³å°
---
## ğŸ“š ç›®å½•

1. [ç”µç«æ•°æ®åˆ†æå¹³å°æ¦‚è¿°](#1-ç”µç«æ•°æ®åˆ†æå¹³å°æ¦‚è¿°)
2. [æ¯”èµ›æ•°æ®é‡‡é›†ç³»ç»Ÿ](#2-æ¯”èµ›æ•°æ®é‡‡é›†ç³»ç»Ÿ)
3. [é€‰æ‰‹è¡¨ç°åˆ†ææ¨¡å—](#3-é€‰æ‰‹è¡¨ç°åˆ†ææ¨¡å—)
4. [æˆ˜æœ¯æ•°æ®æŒ–æ˜](#4-æˆ˜æœ¯æ•°æ®æŒ–æ˜)
5. [å®æ—¶æ¯”èµ›ç»Ÿè®¡](#5-å®æ—¶æ¯”èµ›ç»Ÿè®¡)
6. [æˆ˜é˜Ÿæ•°æ®å¯¹æ¯”åˆ†æ](#6-æˆ˜é˜Ÿæ•°æ®å¯¹æ¯”åˆ†æ)
7. [èµ›äº‹æ•°æ®å¯è§†åŒ–](#7-èµ›äº‹æ•°æ®å¯è§†åŒ–)
8. [é¢„æµ‹æ¨¡å‹æ„å»º](#8-é¢„æµ‹æ¨¡å‹æ„å»º)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ® ç”µç«æ•°æ®åˆ†æå¹³å°æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ç”µç«æ•°æ®åˆ†æå¹³å°


**ç®€å•ç†è§£**ï¼šå°±åƒä½“è‚²æ¯”èµ›æœ‰æ•°æ®ç»Ÿè®¡ä¸€æ ·ï¼Œç”µç«æ¯”èµ›ä¹Ÿéœ€è¦è®°å½•å’Œåˆ†æå„ç§æ•°æ®ï¼Œå¸®åŠ©æˆ˜é˜Ÿã€é€‰æ‰‹å’Œè§‚ä¼—æ›´å¥½åœ°ç†è§£æ¯”èµ›ã€‚

```
ä¼ ç»Ÿä½“è‚² vs ç”µç«æ•°æ®å¯¹æ¯”ï¼š
ç¯®çƒç»Ÿè®¡ï¼šå¾—åˆ†ã€åŠ©æ”»ã€ç¯®æ¿ã€å¤±è¯¯
ç”µç«ç»Ÿè®¡ï¼šå‡»æ€ã€æ­»äº¡ã€åŠ©æ”»ã€ç»æµã€ä¼¤å®³è¾“å‡º

ç›¸åŒç‚¹ï¼šéƒ½éœ€è¦é‡åŒ–é€‰æ‰‹/é˜Ÿä¼è¡¨ç°
ä¸åŒç‚¹ï¼šç”µç«æ•°æ®æ›´å¤æ‚ã€æ›´å®æ—¶ã€æ›´å¤šç»´åº¦
```

**å¹³å°æ ¸å¿ƒä»·å€¼**ï¼š
- **æˆ˜é˜Ÿç®¡ç†**ï¼šå¸®åŠ©æ•™ç»ƒåˆ†æé˜Ÿå‘˜è¡¨ç°ï¼Œåˆ¶å®šè®­ç»ƒè®¡åˆ’
- **é€‰æ‰‹æå‡**ï¼šè®©é€‰æ‰‹çœ‹åˆ°è‡ªå·±çš„å¼ºé¡¹å’Œå¼±ç‚¹
- **èµ›äº‹è¿è¥**ï¼šä¸ºè§‚ä¼—æä¾›æ›´ä¸°å¯Œçš„è§‚èµ›ä½“éªŒ
- **å•†ä¸šå†³ç­–**ï¼šå¸®åŠ©ä¿±ä¹éƒ¨åšè½¬ä¼šã€æŠ•èµ„å†³ç­–

### 1.2 ç”µç«æ•°æ®çš„ç‰¹ç‚¹


**ğŸ”¸ æ•°æ®é‡å¤§ä¸”å®æ—¶**
```
ä¸€åœºMOBAæ¸¸æˆï¼ˆå¦‚LOL/DOTAï¼‰äº§ç”Ÿçš„æ•°æ®ï¼š
- æ¯ç§’é’Ÿè®°å½•ä¸Šç™¾ä¸ªæ•°æ®ç‚¹
- ä¸€åœº40åˆ†é’Ÿæ¯”èµ› = çº¦240,000ä¸ªæ•°æ®ç‚¹
- ä¸€å¤©çš„èŒä¸šèµ›äº‹ = æ•°ç™¾ä¸‡æ¡è®°å½•
```

**ğŸ”¸ æ•°æ®ç»´åº¦å¤æ‚**
```
é€‰æ‰‹ç»´åº¦ï¼šå‡»æ€ã€æ­»äº¡ã€åŠ©æ”»ã€è¡¥åˆ€ã€ä¼¤å®³ã€æ²»ç–—...
è£…å¤‡ç»´åº¦ï¼šè£…å¤‡è´­ä¹°æ—¶é—´ã€è£…å¤‡é€‰æ‹©ã€è£…å¤‡æ•ˆç‡...
åœ°å›¾ç»´åº¦ï¼šè§†é‡æ§åˆ¶ã€èµ„æºäº‰å¤ºã€å›¢æˆ˜ä½ç½®...
ç»æµç»´åº¦ï¼šé‡‘é’±è·å–ã€èµ„æºåˆ†é…ã€ç»æµæ•ˆç‡...
```

**ğŸ”¸ ä¸šåŠ¡éœ€æ±‚å¤šæ ·**
- **å®æ—¶éœ€æ±‚**ï¼šæ¯”èµ›è¿›è¡Œæ—¶çš„æ•°æ®å±•ç¤º
- **å†å²åˆ†æ**ï¼šé€‰æ‰‹/æˆ˜é˜Ÿé•¿æœŸè¡¨ç°è¶‹åŠ¿
- **é¢„æµ‹åˆ†æ**ï¼šæ¯”èµ›ç»“æœé¢„æµ‹ã€é€‰æ‰‹æ½œåŠ›è¯„ä¼°

---

## 2. ğŸ“Š æ¯”èµ›æ•°æ®é‡‡é›†ç³»ç»Ÿ


### 2.1 æ•°æ®é‡‡é›†çš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯æ•°æ®é‡‡é›†**ï¼šå°±åƒè®°è€…ç°åœºé‡‡è®¿ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ä»æ¸¸æˆæœåŠ¡å™¨å®æ—¶"é‡‡è®¿"å„ç§æ•°æ®ã€‚

**æ•°æ®æ¥æº**ï¼š
```
â”Œâ”€ æ¸¸æˆæœåŠ¡å™¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ æ¸¸æˆAPIæ¥å£                â”‚
â”‚ â€¢ æ¯”èµ›å›æ”¾æ–‡ä»¶               â”‚
â”‚ â€¢ ç›´æ’­æµæ•°æ®è§£æ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€ æ•°æ®é‡‡é›†ç³»ç»Ÿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ å®æ—¶æ•°æ®æŠ“å–               â”‚
â”‚ â€¢ æ•°æ®æ¸…æ´—å’ŒéªŒè¯             â”‚
â”‚ â€¢ ç»“æ„åŒ–å­˜å‚¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒæ•°æ®è¡¨è®¾è®¡


**ğŸ¯ æ¯”èµ›åŸºç¡€ä¿¡æ¯è¡¨**
```sql
CREATE TABLE matches (
    match_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    tournament_id INT NOT NULL,
    team_a_id INT NOT NULL,
    team_b_id INT NOT NULL,
    game_type ENUM('LOL', 'DOTA2', 'CSGO', 'VALORANT'),
    match_date DATETIME NOT NULL,
    duration_seconds INT,
    winner_team_id INT,
    map_name VARCHAR(50),
    patch_version VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ğŸ”¸ è¡¨è®¾è®¡è¦ç‚¹è§£é‡Š**ï¼š
- `match_id`ï¼šæ¯åœºæ¯”èµ›çš„å”¯ä¸€æ ‡è¯†ï¼Œç”¨è‡ªå¢IDä¿è¯å”¯ä¸€æ€§
- `game_type`ï¼šæ¸¸æˆç±»å‹ï¼Œä¸åŒæ¸¸æˆæ•°æ®ç»“æ„ä¸åŒ
- `duration_seconds`ï¼šæ¯”èµ›æ—¶é•¿ï¼Œç”¨äºè®¡ç®—æ•ˆç‡ç±»æŒ‡æ ‡
- `patch_version`ï¼šæ¸¸æˆç‰ˆæœ¬ï¼Œä¸åŒç‰ˆæœ¬å¹³è¡¡æ€§ä¸åŒï¼Œå½±å“æ•°æ®åˆ†æ

**ğŸ¯ å®æ—¶æ•°æ®é‡‡é›†è¡¨**
```sql
CREATE TABLE match_events (
    event_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    match_id BIGINT NOT NULL,
    player_id INT NOT NULL,
    event_type ENUM('kill', 'death', 'assist', 'item_purchase', 'objective'),
    event_time_seconds INT NOT NULL,
    event_data JSON,
    position_x FLOAT,
    position_y FLOAT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_match_player (match_id, player_id),
    INDEX idx_event_time (match_id, event_time_seconds)
);
```

**ğŸ’¡ ä¸ºä»€ä¹ˆç”¨JSONå­˜å‚¨äº‹ä»¶æ•°æ®**ï¼š
- ä¸åŒäº‹ä»¶ç±»å‹æœ‰ä¸åŒçš„å±æ€§ï¼ˆå‡»æ€äº‹ä»¶æœ‰æ­¦å™¨ä¿¡æ¯ï¼Œè´­ä¹°äº‹ä»¶æœ‰ç‰©å“ä¿¡æ¯ï¼‰
- JSONçµæ´»å­˜å‚¨ï¼Œé¿å…åˆ›å»ºè¿‡å¤šå­—æ®µ
- MySQL 5.7+å¯¹JSONæœ‰å¾ˆå¥½çš„æŸ¥è¯¢æ”¯æŒ

**ğŸ¯ é€‰æ‰‹è¡¨ç°å¿«ç…§è¡¨**
```sql
CREATE TABLE player_snapshots (
    snapshot_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    match_id BIGINT NOT NULL,
    player_id INT NOT NULL,
    snapshot_time_seconds INT NOT NULL,
    level INT,
    kills INT,
    deaths INT,
    assists INT,
    gold_earned INT,
    damage_dealt INT,
    damage_taken INT,
    items_owned JSON,
    
    INDEX idx_match_time (match_id, snapshot_time_seconds)
);
```

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦å¿«ç…§è¡¨**ï¼š
- **å®æ—¶åˆ†æ**ï¼šæ¯”èµ›è¿›è¡Œä¸­å±•ç¤ºé€‰æ‰‹å½“å‰çŠ¶æ€
- **è¶‹åŠ¿åˆ†æ**ï¼šçœ‹é€‰æ‰‹åœ¨æ¯”èµ›ä¸­çš„å‘å±•æ›²çº¿
- **å…³é”®æ—¶åˆ»åˆ†æ**ï¼šå›¢æˆ˜å‰åé€‰æ‰‹çŠ¶æ€å¯¹æ¯”

### 2.3 æ•°æ®é‡‡é›†å®ç°


**ğŸ“ ç®€å•çš„æ•°æ®é‡‡é›†ç¤ºä¾‹**
```python
# æ¨¡æ‹Ÿæ¸¸æˆAPIæ•°æ®é‡‡é›†
class GameDataCollector:
    def __init__(self, match_id):
        self.match_id = match_id
        
    def collect_match_events(self):
        """é‡‡é›†æ¯”èµ›äº‹ä»¶æ•°æ®"""
        # ä»æ¸¸æˆAPIè·å–æ•°æ®ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
        events = self.fetch_from_game_api()
        
        for event in events:
            # æ•°æ®æ¸…æ´—å’ŒéªŒè¯
            clean_event = self.clean_event_data(event)
            
            # å­˜å‚¨åˆ°æ•°æ®åº“
            self.save_event_to_db(clean_event)
    
    def clean_event_data(self, raw_event):
        """æ•°æ®æ¸…æ´—ï¼šå¤„ç†å¼‚å¸¸å€¼å’Œæ ¼å¼åŒ–"""
        return {
            'match_id': self.match_id,
            'player_id': raw_event['player_id'],
            'event_type': raw_event['type'],
            'event_time_seconds': raw_event['timestamp'],
            'event_data': json.dumps(raw_event['details'])
        }
```

---

## 3. ğŸ‘¤ é€‰æ‰‹è¡¨ç°åˆ†ææ¨¡å—


### 3.1 é€‰æ‰‹è¡¨ç°åˆ†ææ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šå°±åƒç»™å­¦ç”Ÿåšæˆç»©å•ä¸€æ ·ï¼Œæˆ‘ä»¬è¦ç»™ç”µç«é€‰æ‰‹åš"æ¯”èµ›æˆç»©å•"ï¼Œçœ‹ä»–ä»¬å„æ–¹é¢è¡¨ç°å¦‚ä½•ã€‚

**æ ¸å¿ƒåˆ†æç»´åº¦**ï¼š
```
â”Œâ”€ åŸºç¡€æ•°æ® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KDAï¼ˆæ€æ­»/æ­»äº¡/åŠ©æ”»ï¼‰æ¯”ç‡      â”‚
â”‚ ç»æµæ•ˆç‡ï¼ˆé‡‘é’±è·å–èƒ½åŠ›ï¼‰       â”‚
â”‚ ä¼¤å®³è¾“å‡ºï¼ˆå¯¹æ•Œäººé€ æˆä¼¤å®³ï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€ é«˜çº§æŒ‡æ ‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å›¢æˆ˜è´¡çŒ®ç‡                     â”‚
â”‚ å…³é”®æ—¶åˆ»è¡¨ç°                   â”‚
â”‚ ç¨³å®šæ€§è¯„åˆ†                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 é€‰æ‰‹èƒ½åŠ›è¯„ä¼°æ¨¡å‹


**ğŸ¯ é€‰æ‰‹ç»Ÿè®¡è¡¨è®¾è®¡**
```sql
CREATE TABLE player_statistics (
    stat_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    player_id INT NOT NULL,
    season_id INT NOT NULL,
    games_played INT DEFAULT 0,
    avg_kills DECIMAL(4,2),
    avg_deaths DECIMAL(4,2),
    avg_assists DECIMAL(4,2),
    kda_ratio DECIMAL(4,2),
    avg_damage_per_minute DECIMAL(8,2),
    win_rate DECIMAL(4,2),
    performance_score DECIMAL(6,2),
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY uk_player_season (player_id, season_id)
);
```

**ğŸ’¡ KDAè®¡ç®—é€»è¾‘**
```sql
-- è®¡ç®—é€‰æ‰‹KDAæ¯”ç‡çš„SQLç¤ºä¾‹
UPDATE player_statistics ps
SET 
    kda_ratio = CASE 
        WHEN ps.avg_deaths = 0 THEN (ps.avg_kills + ps.avg_assists)
        ELSE (ps.avg_kills + ps.avg_assists) / ps.avg_deaths
    END
WHERE ps.season_id = 2024;
```

**ğŸ”¸ ä¸ºä»€ä¹ˆè¿™æ ·è®¡ç®—KDA**ï¼š
- **KDA = (K + A) / D**ï¼šå‡»æ€å’ŒåŠ©æ”»éƒ½æ˜¯æ­£é¢è´¡çŒ®ï¼Œæ­»äº¡æ˜¯è´Ÿé¢
- **æ­»äº¡ä¸º0æ—¶ç‰¹æ®Šå¤„ç†**ï¼šé¿å…é™¤é›¶é”™è¯¯ï¼Œç›´æ¥ç”¨å‡»æ€+åŠ©æ”»
- **å°æ•°ä½æ§åˆ¶**ï¼šä¿æŒ2ä½å°æ•°ï¼Œä¾¿äºæ¯”è¾ƒå’Œå±•ç¤º

### 3.3 é€‰æ‰‹èƒ½åŠ›é›·è¾¾å›¾æ•°æ®


**ğŸ¯ é€‰æ‰‹èƒ½åŠ›ç»´åº¦è¡¨**
```sql
CREATE TABLE player_abilities (
    ability_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    player_id INT NOT NULL,
    season_id INT NOT NULL,
    mechanical_skill DECIMAL(3,1), -- æ“ä½œæŠ€æœ¯ (0-10)
    game_sense DECIMAL(3,1),       -- æ¸¸æˆç†è§£ (0-10)  
    teamwork DECIMAL(3,1),         -- å›¢é˜Ÿé…åˆ (0-10)
    leadership DECIMAL(3,1),       -- æŒ‡æŒ¥èƒ½åŠ› (0-10)
    stability DECIMAL(3,1),        -- å‘æŒ¥ç¨³å®šæ€§ (0-10)
    clutch_performance DECIMAL(3,1), -- å…³é”®æ—¶åˆ»è¡¨ç° (0-10)
    
    UNIQUE KEY uk_player_season (player_id, season_id)
);
```

**ğŸ“Š èƒ½åŠ›è¯„åˆ†è®¡ç®—ç¤ºä¾‹**
```python
def calculate_player_abilities(player_id, season_id):
    """è®¡ç®—é€‰æ‰‹å„é¡¹èƒ½åŠ›è¯„åˆ†"""
    
    # è·å–é€‰æ‰‹æ¯”èµ›æ•°æ®
    match_data = get_player_matches(player_id, season_id)
    
    abilities = {
        'mechanical_skill': calculate_mechanical_score(match_data),
        'game_sense': calculate_game_sense_score(match_data),
        'teamwork': calculate_teamwork_score(match_data),
        'stability': calculate_stability_score(match_data)
    }
    
    return abilities

def calculate_mechanical_score(match_data):
    """è®¡ç®—æ“ä½œæŠ€æœ¯è¯„åˆ†"""
    # åŸºäºAPM(æ¯åˆ†é’Ÿæ“ä½œæ•°)ã€å‡†ç¡®ç‡ç­‰è®¡ç®—
    avg_apm = sum(m['actions_per_minute'] for m in match_data) / len(match_data)
    # è½¬æ¢ä¸º0-10è¯„åˆ†
    return min(10, avg_apm / 300 * 10)
```

---

## 4. ğŸ§  æˆ˜æœ¯æ•°æ®æŒ–æ˜


### 4.1 ä»€ä¹ˆæ˜¯æˆ˜æœ¯æ•°æ®æŒ–æ˜


**ç”Ÿæ´»åŒ–ç†è§£**ï¼šå°±åƒè¶³çƒæ•™ç»ƒç ”ç©¶å¯¹æ‰‹å½•åƒæ‰¾è§„å¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬åˆ†æç”µç«æ¯”èµ›æ•°æ®ï¼Œå‘ç°å›¢é˜Ÿçš„æˆ˜æœ¯ä¹ æƒ¯å’Œè§„å¾‹ã€‚

**æˆ˜æœ¯æ•°æ®çš„ä»·å€¼**ï¼š
- **å·±çŸ¥å½¼**ï¼šäº†è§£å¯¹æ‰‹çš„æˆ˜æœ¯åå¥½
- **è‡ªæˆ‘æå‡**ï¼šå‘ç°è‡ªå·±æˆ˜æœ¯çš„ä¼˜ç¼ºç‚¹
- **é¢„æµ‹å¯¹å±€**ï¼šæ ¹æ®å†å²æ•°æ®é¢„æµ‹æ¯”èµ›èµ°å‘

### 4.2 æˆ˜æœ¯æ¨¡å¼è¯†åˆ«


**ğŸ¯ æˆ˜æœ¯äº‹ä»¶è¡¨è®¾è®¡**
```sql
CREATE TABLE tactical_events (
    tactical_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    match_id BIGINT NOT NULL,
    team_id INT NOT NULL,
    event_type ENUM('dragon', 'baron', 'tower', 'teamfight', 'gank'),
    event_time_seconds INT NOT NULL,
    success BOOLEAN NOT NULL,
    participants JSON, -- å‚ä¸çš„é€‰æ‰‹IDåˆ—è¡¨
    map_region VARCHAR(20),
    pre_conditions JSON, -- äº‹ä»¶å‘ç”Ÿå‰çš„æ¡ä»¶
    result_impact JSON,  -- äº‹ä»¶å¯¹æ¯”èµ›çš„å½±å“
    
    INDEX idx_team_event (team_id, event_type),
    INDEX idx_match_time (match_id, event_time_seconds)
);
```

**ğŸ’¡ ä¸ºä»€ä¹ˆè¦è®°å½•æˆ˜æœ¯äº‹ä»¶**ï¼š
- **æ¨¡å¼å‘ç°**ï¼šæŸé˜Ÿæ˜¯å¦æ€»åœ¨20åˆ†é’Ÿæ‰“å¤§é¾™ï¼Ÿ
- **æˆåŠŸç‡åˆ†æ**ï¼šå“ªç§æˆ˜æœ¯æˆåŠŸç‡æœ€é«˜ï¼Ÿ
- **æ—¶é—´èŠ‚ç‚¹åˆ†æ**ï¼šå…³é”®æ—¶é—´ç‚¹çš„æˆ˜æœ¯é€‰æ‹©

**ğŸ¯ æˆ˜æœ¯æˆåŠŸç‡ç»Ÿè®¡**
```sql
-- æŸ¥è¯¢å„é˜Ÿæˆ˜æœ¯æˆåŠŸç‡çš„SQL
SELECT 
    t.team_name,
    te.event_type,
    COUNT(*) as total_attempts,
    SUM(CASE WHEN te.success = 1 THEN 1 ELSE 0 END) as successful_attempts,
    ROUND(AVG(te.success) * 100, 2) as success_rate
FROM tactical_events te
JOIN teams t ON te.team_id = t.team_id
WHERE te.event_time_seconds > 1200 -- 20åˆ†é’Ÿåçš„æˆ˜æœ¯
GROUP BY te.team_id, te.event_type
HAVING total_attempts >= 5 -- è‡³å°‘å°è¯•5æ¬¡æ‰æœ‰ç»Ÿè®¡æ„ä¹‰
ORDER BY success_rate DESC;
```

### 4.3 æˆ˜æœ¯åå¥½åˆ†æ


**ğŸ“Š æˆ˜é˜Ÿé£æ ¼åˆ†æè¡¨**
```sql
CREATE TABLE team_playstyles (
    style_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    team_id INT NOT NULL,
    season_id INT NOT NULL,
    aggression_score DECIMAL(3,1),     -- æ¿€è¿›åº¦è¯„åˆ†
    early_game_focus DECIMAL(3,1),     -- å‰æœŸä¾§é‡åº¦
    teamfight_preference DECIMAL(3,1), -- å›¢æˆ˜åå¥½
    objective_priority DECIMAL(3,1),   -- èµ„æºäº‰å¤ºä¼˜å…ˆçº§
    adaptation_ability DECIMAL(3,1),   -- æˆ˜æœ¯é€‚åº”èƒ½åŠ›
    
    UNIQUE KEY uk_team_season (team_id, season_id)
);
```

**ğŸ”¸ æˆ˜æœ¯é£æ ¼è®¡ç®—é€»è¾‘**
```python
def analyze_team_playstyle(team_id, season_id):
    """åˆ†ææˆ˜é˜Ÿæ¯”èµ›é£æ ¼"""
    
    # è·å–æˆ˜é˜Ÿæ‰€æœ‰æ¯”èµ›çš„æˆ˜æœ¯äº‹ä»¶
    tactical_data = get_team_tactical_events(team_id, season_id)
    
    # è®¡ç®—æ¿€è¿›åº¦ï¼šæ—©æœŸå‡»æ€/å†’é™©è¡Œä¸ºé¢‘ç‡
    aggression = calculate_aggression_score(tactical_data)
    
    # è®¡ç®—å‰æœŸä¾§é‡ï¼šå‰15åˆ†é’Ÿäº‹ä»¶å æ¯”
    early_focus = calculate_early_game_focus(tactical_data)
    
    return {
        'aggression_score': aggression,
        'early_game_focus': early_focus,
        # ... å…¶ä»–æŒ‡æ ‡
    }
```

---

## 5. ğŸ“ˆ å®æ—¶æ¯”èµ›ç»Ÿè®¡


### 5.1 å®æ—¶ç»Ÿè®¡çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆéœ€è¦å®æ—¶ç»Ÿè®¡**ï¼š
- **è§‚ä¼—ä½“éªŒ**ï¼šè®©è§‚çœ‹ç›´æ’­çš„è§‚ä¼—å®æ—¶äº†è§£æ¯”èµ›å±€åŠ¿
- **è§£è¯´æ”¯æŒ**ï¼šä¸ºè§£è¯´å‘˜æä¾›æ•°æ®æ”¯æ’‘
- **æˆ˜é˜Ÿå†³ç­–**ï¼šæ•™ç»ƒå¯ä»¥å®æ—¶è°ƒæ•´ç­–ç•¥

**å®æ—¶æ€§æŒ‘æˆ˜**ï¼š
```
æŒ‘æˆ˜1ï¼šæ•°æ®å»¶è¿Ÿ - ä»æ¸¸æˆäº§ç”Ÿåˆ°å±•ç¤º < 3ç§’
æŒ‘æˆ˜2ï¼šé«˜å¹¶å‘ - å¤§å‹èµ›äº‹å¯èƒ½æœ‰ç™¾ä¸‡è§‚ä¼—
æŒ‘æˆ˜3ï¼šæ•°æ®å‡†ç¡®æ€§ - å®æ—¶å¤„ç†ä¸­é¿å…é”™è¯¯
```

### 5.2 å®æ—¶ç»Ÿè®¡ç³»ç»Ÿæ¶æ„


**ğŸ“Š å®æ—¶æ•°æ®æµè®¾è®¡**
```
æ¸¸æˆæœåŠ¡å™¨ â†’ æ•°æ®é‡‡é›† â†’ å®æ—¶å¤„ç† â†’ æ•°æ®åº“ â†’ API â†’ å‰ç«¯å±•ç¤º
     â†“           â†“          â†“         â†“      â†“        â†“
   åŸå§‹æ•°æ®   æ•°æ®æ¸…æ´—   å®æ—¶è®¡ç®—   æŒä¹…åŒ–   æ¥å£   ç”¨æˆ·ç•Œé¢
```

**ğŸ¯ å®æ—¶ç»Ÿè®¡è¡¨è®¾è®¡**
```sql
CREATE TABLE live_match_stats (
    match_id BIGINT PRIMARY KEY,
    current_time_seconds INT NOT NULL,
    team_a_kills INT DEFAULT 0,
    team_b_kills INT DEFAULT 0,
    team_a_gold INT DEFAULT 0,
    team_b_gold INT DEFAULT 0,
    team_a_towers INT DEFAULT 0,
    team_b_towers INT DEFAULT 0,
    gold_difference INT DEFAULT 0,
    kill_difference INT DEFAULT 0,
    match_phase ENUM('early', 'mid', 'late') DEFAULT 'early',
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_updated (last_updated)
);
```

**ğŸ’¡ å®æ—¶æ›´æ–°é€»è¾‘**
```python
class LiveStatsUpdater:
    def __init__(self, match_id):
        self.match_id = match_id
        
    def update_live_stats(self, event):
        """æ ¹æ®æ¸¸æˆäº‹ä»¶æ›´æ–°å®æ—¶ç»Ÿè®¡"""
        
        if event['type'] == 'kill':
            self.update_kill_stats(event)
        elif event['type'] == 'gold_earned':
            self.update_economy_stats(event)
        elif event['type'] == 'objective_taken':
            self.update_objective_stats(event)
            
        # è®¡ç®—è¡ç”ŸæŒ‡æ ‡
        self.calculate_derived_stats()
        
        # æ¨é€åˆ°å‰ç«¯
        self.push_to_frontend()
    
    def calculate_derived_stats(self):
        """è®¡ç®—è¡ç”Ÿç»Ÿè®¡æŒ‡æ ‡"""
        stats = self.get_current_stats()
        
        # è®¡ç®—ç»æµå·®è·
        gold_diff = stats['team_a_gold'] - stats['team_b_gold']
        
        # æ›´æ–°æ¯”èµ›é˜¶æ®µ
        phase = self.determine_match_phase(stats)
        
        self.update_database(gold_difference=gold_diff, match_phase=phase)
```

### 5.3 å®æ—¶æ•°æ®APIè®¾è®¡


**ğŸ”— APIæ¥å£è®¾è®¡**
```python
# Flask APIç¤ºä¾‹
@app.route('/api/live/match/<int:match_id>')
def get_live_stats(match_id):
    """è·å–æ¯”èµ›å®æ—¶ç»Ÿè®¡"""
    
    stats = db.query("""
        SELECT * FROM live_match_stats 
        WHERE match_id = %s
    """, [match_id])
    
    if not stats:
        return {'error': 'æ¯”èµ›ä¸å­˜åœ¨'}, 404
        
    return {
        'match_id': match_id,
        'current_time': f"{stats['current_time_seconds'] // 60}:{stats['current_time_seconds'] % 60:02d}",
        'team_stats': {
            'team_a': {
                'kills': stats['team_a_kills'],
                'gold': stats['team_a_gold'],
                'towers': stats['team_a_towers']
            },
            'team_b': {
                'kills': stats['team_b_kills'], 
                'gold': stats['team_b_gold'],
                'towers': stats['team_b_towers']
            }
        },
        'differences': {
            'gold': stats['gold_difference'],
            'kills': stats['kill_difference']
        }
    }
```

---

## 6. âš”ï¸ æˆ˜é˜Ÿæ•°æ®å¯¹æ¯”åˆ†æ


### 6.1 æˆ˜é˜Ÿå¯¹æ¯”çš„æ„ä¹‰


**ä¸ºä»€ä¹ˆè¦å¯¹æ¯”æˆ˜é˜Ÿæ•°æ®**ï¼š
- **èµ›å‰åˆ†æ**ï¼šé¢„æµ‹æ¯”èµ›ç»“æœï¼Œäº†è§£åŒæ–¹å®åŠ›
- **è½¬ä¼šå‚è€ƒ**ï¼šä¿±ä¹éƒ¨å¼•æ´æ—¶çš„æ•°æ®æ”¯æ’‘  
- **ç²‰ä¸éœ€æ±‚**ï¼šç”µç«çˆ±å¥½è€…å–œæ¬¢æ¯”è¾ƒä¸åŒæˆ˜é˜Ÿ

### 6.2 æˆ˜é˜Ÿç»¼åˆå®åŠ›è¯„ä¼°


**ğŸ¯ æˆ˜é˜Ÿèµ›å­£ç»Ÿè®¡è¡¨**
```sql
CREATE TABLE team_season_stats (
    team_id INT,
    season_id INT,
    games_played INT DEFAULT 0,
    wins INT DEFAULT 0,
    losses INT DEFAULT 0,
    win_rate DECIMAL(4,2),
    avg_game_duration_seconds INT,
    avg_kills_per_game DECIMAL(4,1),
    avg_deaths_per_game DECIMAL(4,1),
    avg_gold_per_minute INT,
    avg_damage_per_minute INT,
    baron_control_rate DECIMAL(4,2), -- å¤§é¾™æ§åˆ¶ç‡
    first_blood_rate DECIMAL(4,2),   -- ä¸€è¡€è·å¾—ç‡
    teamfight_win_rate DECIMAL(4,2), -- å›¢æˆ˜èƒœç‡
    
    PRIMARY KEY (team_id, season_id)
);
```

**ğŸ“Š æˆ˜é˜Ÿå¯¹æ¯”æŸ¥è¯¢ç¤ºä¾‹**
```sql
-- å¯¹æ¯”ä¸¤ä¸ªæˆ˜é˜Ÿçš„å…³é”®æŒ‡æ ‡
SELECT 
    'æˆ˜é˜ŸA' as team_name,
    win_rate,
    avg_kills_per_game,
    baron_control_rate,
    teamfight_win_rate
FROM team_season_stats 
WHERE team_id = 1 AND season_id = 2024

UNION ALL

SELECT 
    'æˆ˜é˜ŸB' as team_name,
    win_rate,
    avg_kills_per_game, 
    baron_control_rate,
    teamfight_win_rate
FROM team_season_stats 
WHERE team_id = 2 AND season_id = 2024;
```

### 6.3 å†å²äº¤é”‹è®°å½•


**ğŸ¯ äº¤é”‹å†å²è¡¨**
```sql
CREATE TABLE head_to_head_stats (
    h2h_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    team_a_id INT NOT NULL,
    team_b_id INT NOT NULL,
    season_id INT NOT NULL,
    total_matches INT DEFAULT 0,
    team_a_wins INT DEFAULT 0,
    team_b_wins INT DEFAULT 0,
    avg_match_duration_seconds INT,
    last_match_date DATE,
    
    UNIQUE KEY uk_teams_season (team_a_id, team_b_id, season_id)
);
```

**ğŸ’¡ äº¤é”‹æ•°æ®æ›´æ–°é€»è¾‘**
```python
def update_head_to_head(match_result):
    """æ›´æ–°æˆ˜é˜Ÿäº¤é”‹è®°å½•"""
    
    team_a = match_result['team_a_id']
    team_b = match_result['team_b_id']
    winner = match_result['winner_team_id']
    
    # ç¡®ä¿team_a_id < team_b_idï¼Œé¿å…é‡å¤è®°å½•
    if team_a > team_b:
        team_a, team_b = team_b, team_a
    
    # æ›´æ–°äº¤é”‹ç»Ÿè®¡
    sql = """
        INSERT INTO head_to_head_stats 
        (team_a_id, team_b_id, season_id, total_matches, team_a_wins, team_b_wins)
        VALUES (%s, %s, %s, 1, %s, %s)
        ON DUPLICATE KEY UPDATE
        total_matches = total_matches + 1,
        team_a_wins = team_a_wins + %s,
        team_b_wins = team_b_wins + %s,
        last_match_date = %s
    """
    
    team_a_win = 1 if winner == team_a else 0
    team_b_win = 1 if winner == team_b else 0
    
    execute_sql(sql, [team_a, team_b, 2024, team_a_win, team_b_win, 
                     team_a_win, team_b_win, match_result['match_date']])
```

---

## 7. ğŸ“Š èµ›äº‹æ•°æ®å¯è§†åŒ–


### 7.1 æ•°æ®å¯è§†åŒ–çš„ä»·å€¼


**ä¸ºä»€ä¹ˆéœ€è¦å¯è§†åŒ–**ï¼š
- **ç›´è§‚ç†è§£**ï¼šå¤æ‚æ•°æ®é€šè¿‡å›¾è¡¨æ›´å®¹æ˜“ç†è§£
- **è¶‹åŠ¿å‘ç°**ï¼šé€šè¿‡æ›²çº¿å›¾å‘ç°é€‰æ‰‹/æˆ˜é˜Ÿå‘å±•è¶‹åŠ¿
- **å¯¹æ¯”åˆ†æ**ï¼šé›·è¾¾å›¾ã€æŸ±çŠ¶å›¾è®©å¯¹æ¯”æ›´æ¸…æ™°

**å¸¸è§å¯è§†åŒ–ç±»å‹**ï¼š
```
æŠ˜çº¿å›¾ â†’ é€‰æ‰‹è¡¨ç°è¶‹åŠ¿ã€æˆ˜é˜Ÿèƒœç‡å˜åŒ–
æŸ±çŠ¶å›¾ â†’ æˆ˜é˜Ÿæ•°æ®å¯¹æ¯”ã€é€‰æ‰‹èƒ½åŠ›å¯¹æ¯”  
é¥¼å›¾ â†’ ä¼¤å®³æ„æˆåˆ†æã€ç»æµæ¥æºåˆ†æ
çƒ­åŠ›å›¾ â†’ åœ°å›¾æ§åˆ¶åŒºåŸŸã€å›¢æˆ˜å‘ç”Ÿä½ç½®
é›·è¾¾å›¾ â†’ é€‰æ‰‹/æˆ˜é˜Ÿç»¼åˆèƒ½åŠ›å±•ç¤º
```

### 7.2 å¯è§†åŒ–æ•°æ®å‡†å¤‡


**ğŸ¯ å¯è§†åŒ–æ•°æ®èšåˆè¡¨**
```sql
CREATE TABLE visualization_data (
    viz_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    data_type ENUM('player_trend', 'team_comparison', 'match_timeline'),
    entity_id INT NOT NULL, -- é€‰æ‰‹IDæˆ–æˆ˜é˜ŸID
    time_period VARCHAR(20), -- '2024-Q1', '2024-03', 'Week-12'
    metric_name VARCHAR(50),
    metric_value DECIMAL(10,2),
    additional_data JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_type_entity (data_type, entity_id),
    INDEX idx_time_period (time_period)
);
```

**ğŸ“ˆ é€‰æ‰‹è¡¨ç°è¶‹åŠ¿æ•°æ®**
```python
def prepare_player_trend_data(player_id, season_id):
    """å‡†å¤‡é€‰æ‰‹è¡¨ç°è¶‹åŠ¿å¯è§†åŒ–æ•°æ®"""
    
    # æŒ‰æœˆç»Ÿè®¡é€‰æ‰‹è¡¨ç°
    monthly_stats = db.query("""
        SELECT 
            DATE_FORMAT(m.match_date, '%Y-%m') as month,
            AVG(ps.kills) as avg_kills,
            AVG(ps.deaths) as avg_deaths,
            AVG(ps.assists) as avg_assists,
            AVG((ps.kills + ps.assists) / GREATEST(ps.deaths, 1)) as avg_kda
        FROM player_match_stats ps
        JOIN matches m ON ps.match_id = m.match_id
        WHERE ps.player_id = %s 
        AND YEAR(m.match_date) = %s
        GROUP BY month
        ORDER BY month
    """, [player_id, 2024])
    
    # è½¬æ¢ä¸ºå¯è§†åŒ–æ ¼å¼
    trend_data = []
    for stat in monthly_stats:
        trend_data.append({
            'month': stat['month'],
            'kda': float(stat['avg_kda']),
            'kills': float(stat['avg_kills']),
            'deaths': float(stat['avg_deaths']),
            'assists': float(stat['avg_assists'])
        })
    
    return trend_data
```

### 7.3 å‰ç«¯å¯è§†åŒ–å®ç°


**ğŸ“Š ç®€å•çš„å›¾è¡¨æ•°æ®API**
```python
@app.route('/api/viz/player/<int:player_id>/trend')
def get_player_trend_viz(player_id):
    """è·å–é€‰æ‰‹è¡¨ç°è¶‹åŠ¿å¯è§†åŒ–æ•°æ®"""
    
    data = prepare_player_trend_data(player_id, 2024)
    
    # è½¬æ¢ä¸ºå‰ç«¯å›¾è¡¨åº“éœ€è¦çš„æ ¼å¼
    chart_data = {
        'type': 'line',
        'data': {
            'labels': [item['month'] for item in data],
            'datasets': [{
                'label': 'KDAè¶‹åŠ¿',
                'data': [item['kda'] for item in data],
                'borderColor': 'rgb(75, 192, 192)',
                'tension': 0.1
            }, {
                'label': 'å‡»æ€è¶‹åŠ¿', 
                'data': [item['kills'] for item in data],
                'borderColor': 'rgb(255, 99, 132)',
                'tension': 0.1
            }]
        },
        'options': {
            'responsive': True,
            'plugins': {
                'title': {
                    'display': True,
                    'text': f'é€‰æ‰‹{player_id}è¡¨ç°è¶‹åŠ¿'
                }
            }
        }
    }
    
    return chart_data
```

---

## 8. ğŸ”® é¢„æµ‹æ¨¡å‹æ„å»º


### 8.1 é¢„æµ‹æ¨¡å‹çš„ä½œç”¨


**é¢„æµ‹ä»€ä¹ˆ**ï¼š
- **æ¯”èµ›ç»“æœ**ï¼šå“ªä¸ªé˜Ÿä¼æ›´å¯èƒ½è·èƒœ
- **é€‰æ‰‹è¡¨ç°**ï¼šæŸé€‰æ‰‹ä¸‹åœºæ¯”èµ›å¯èƒ½çš„KDA
- **å…³é”®äº‹ä»¶**ï¼šå“ªä¸ªæ—¶é—´æ®µå¯èƒ½å‘ç”Ÿå›¢æˆ˜

**ä¸ºä»€ä¹ˆè¦é¢„æµ‹**ï¼š
- **åšå½©åˆ†æ**ï¼šä¸ºä½“è‚²åšå½©æä¾›æ•°æ®æ”¯æŒ
- **æˆ˜æœ¯å‡†å¤‡**ï¼šå¸®åŠ©é˜Ÿä¼åˆ¶å®šé’ˆå¯¹æ€§ç­–ç•¥
- **è§‚ä¼—å¨±ä¹**ï¼šå¢åŠ è§‚èµ›çš„è¶£å‘³æ€§

### 8.2 æ¯”èµ›ç»“æœé¢„æµ‹æ¨¡å‹


**ğŸ¯ é¢„æµ‹ç‰¹å¾è¡¨è®¾è®¡**
```sql
CREATE TABLE prediction_features (
    feature_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    match_id BIGINT NOT NULL,
    team_a_recent_winrate DECIMAL(4,2), -- æœ€è¿‘10åœºèƒœç‡
    team_b_recent_winrate DECIMAL(4,2),
    team_a_avg_game_duration INT,       -- å¹³å‡æ¯”èµ›æ—¶é•¿
    team_b_avg_game_duration INT,
    h2h_advantage DECIMAL(4,2),         -- å†å²äº¤é”‹ä¼˜åŠ¿
    team_a_momentum DECIMAL(4,2),       -- çŠ¶æ€è¶‹åŠ¿
    team_b_momentum DECIMAL(4,2),
    patch_adaptation_a DECIMAL(4,2),    -- ç‰ˆæœ¬é€‚åº”èƒ½åŠ›
    patch_adaptation_b DECIMAL(4,2),
    
    UNIQUE KEY uk_match (match_id)
);
```

**ğŸ§® ç‰¹å¾è®¡ç®—ç¤ºä¾‹**
```python
def calculate_prediction_features(match_id, team_a_id, team_b_id):
    """è®¡ç®—æ¯”èµ›é¢„æµ‹ç‰¹å¾"""
    
    features = {}
    
    # è®¡ç®—æœ€è¿‘èƒœç‡
    features['team_a_recent_winrate'] = get_recent_winrate(team_a_id, days=30)
    features['team_b_recent_winrate'] = get_recent_winrate(team_b_id, days=30)
    
    # è®¡ç®—å†å²äº¤é”‹ä¼˜åŠ¿
    h2h_stats = get_head_to_head_stats(team_a_id, team_b_id)
    total_matches = h2h_stats['team_a_wins'] + h2h_stats['team_b_wins']
    if total_matches > 0:
        features['h2h_advantage'] = h2h_stats['team_a_wins'] / total_matches
    else:
        features['h2h_advantage'] = 0.5  # æ²¡æœ‰äº¤é”‹å†å²ï¼Œé»˜è®¤äº”äº”å¼€
    
    # è®¡ç®—çŠ¶æ€è¶‹åŠ¿ï¼ˆæœ€è¿‘5åœº vs æœ€è¿‘20åœºèƒœç‡å¯¹æ¯”ï¼‰
    recent_5_wr_a = get_recent_winrate(team_a_id, days=15)
    recent_20_wr_a = get_recent_winrate(team_a_id, days=60)
    features['team_a_momentum'] = recent_5_wr_a - recent_20_wr_a
    
    return features

def get_recent_winrate(team_id, days):
    """è·å–æˆ˜é˜Ÿæœ€è¿‘ä¸€æ®µæ—¶é—´çš„èƒœç‡"""
    result = db.query("""
        SELECT 
            COUNT(*) as total_games,
            SUM(CASE WHEN winner_team_id = %s THEN 1 ELSE 0 END) as wins
        FROM matches 
        WHERE (team_a_id = %s OR team_b_id = %s)
        AND match_date >= DATE_SUB(NOW(), INTERVAL %s DAY)
    """, [team_id, team_id, team_id, days])
    
    if result['total_games'] == 0:
        return 0.5  # æ²¡æœ‰æ¯”èµ›æ•°æ®ï¼Œé»˜è®¤50%
    
    return result['wins'] / result['total_games']
```

### 8.3 é¢„æµ‹ç»“æœå­˜å‚¨


**ğŸ¯ é¢„æµ‹ç»“æœè¡¨**
```sql
CREATE TABLE match_predictions (
    prediction_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    match_id BIGINT NOT NULL,
    model_version VARCHAR(20),
    team_a_win_probability DECIMAL(4,3), -- èƒœç‡é¢„æµ‹
    team_b_win_probability DECIMAL(4,3),
    confidence_score DECIMAL(4,3),       -- é¢„æµ‹ç½®ä¿¡åº¦
    predicted_duration_seconds INT,      -- é¢„æµ‹æ¯”èµ›æ—¶é•¿
    key_factors JSON,                    -- å½±å“é¢„æµ‹çš„å…³é”®å› ç´ 
    prediction_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    actual_winner_team_id INT,           -- å®é™…è·èƒœé˜Ÿä¼ï¼ˆæ¯”èµ›ç»“æŸåæ›´æ–°ï¼‰
    prediction_accuracy BOOLEAN,        -- é¢„æµ‹æ˜¯å¦å‡†ç¡®
    
    UNIQUE KEY uk_match_model (match_id, model_version)
);
```

**ğŸ”® ç®€å•é¢„æµ‹ç®—æ³•ç¤ºä¾‹**
```python
def predict_match_result(match_id, team_a_id, team_b_id):
    """ç®€å•çš„æ¯”èµ›ç»“æœé¢„æµ‹"""
    
    # è·å–é¢„æµ‹ç‰¹å¾
    features = calculate_prediction_features(match_id, team_a_id, team_b_id)
    
    # åŸºäºå¤šä¸ªå› ç´ çš„åŠ æƒé¢„æµ‹
    weights = {
        'recent_winrate': 0.4,      # æœ€è¿‘èƒœç‡æƒé‡40%
        'h2h_advantage': 0.3,       # å†å²äº¤é”‹æƒé‡30% 
        'momentum': 0.2,            # çŠ¶æ€è¶‹åŠ¿æƒé‡20%
        'patch_adaptation': 0.1     # ç‰ˆæœ¬é€‚åº”æƒé‡10%
    }
    
    # è®¡ç®—team_aè·èƒœæ¦‚ç‡
    team_a_score = (
        features['team_a_recent_winrate'] * weights['recent_winrate'] +
        features['h2h_advantage'] * weights['h2h_advantage'] +
        features['team_a_momentum'] * weights['momentum'] +
        features['patch_adaptation_a'] * weights['patch_adaptation']
    )
    
    team_b_score = (
        features['team_b_recent_winrate'] * weights['recent_winrate'] +
        (1 - features['h2h_advantage']) * weights['h2h_advantage'] +
        features['team_b_momentum'] * weights['momentum'] +
        features['patch_adaptation_b'] * weights['patch_adaptation']
    )
    
    # å½’ä¸€åŒ–ä¸ºæ¦‚ç‡
    total_score = team_a_score + team_b_score
    team_a_prob = team_a_score / total_score
    team_b_prob = team_b_score / total_score
    
    # è®¡ç®—ç½®ä¿¡åº¦ï¼ˆä¸¤é˜Ÿå®åŠ›å·®è·è¶Šå¤§ï¼Œç½®ä¿¡åº¦è¶Šé«˜ï¼‰
    confidence = abs(team_a_prob - team_b_prob)
    
    return {
        'team_a_win_probability': round(team_a_prob, 3),
        'team_b_win_probability': round(team_b_prob, 3),
        'confidence_score': round(confidence, 3),
        'key_factors': {
            'recent_form_advantage': 'team_a' if features['team_a_recent_winrate'] > features['team_b_recent_winrate'] else 'team_b',
            'historical_advantage': 'team_a' if features['h2h_advantage'] > 0.5 else 'team_b'
        }
    }
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®é‡‡é›†ï¼šå®æ—¶ä»æ¸¸æˆè·å–æ¯”èµ›æ•°æ®ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„åŸºç¡€
ğŸ”¸ é€‰æ‰‹åˆ†æï¼šé€šè¿‡KDAã€ä¼¤å®³ç­‰æŒ‡æ ‡è¯„ä¼°é€‰æ‰‹è¡¨ç°
ğŸ”¸ æˆ˜æœ¯æŒ–æ˜ï¼šåˆ†æå›¢é˜Ÿæˆ˜æœ¯ä¹ æƒ¯ï¼Œå‘ç°è§„å¾‹å’Œæ¨¡å¼
ğŸ”¸ å®æ—¶ç»Ÿè®¡ï¼šæ¯”èµ›è¿›è¡Œä¸­çš„æ•°æ®å±•ç¤ºï¼Œæå‡è§‚èµ›ä½“éªŒ
ğŸ”¸ æ•°æ®å¯¹æ¯”ï¼šæˆ˜é˜Ÿé—´çš„å®åŠ›æ¯”è¾ƒå’Œå†å²äº¤é”‹åˆ†æ
ğŸ”¸ å¯è§†åŒ–ï¼šå°†å¤æ‚æ•°æ®è½¬æ¢ä¸ºç›´è§‚çš„å›¾è¡¨å±•ç¤º
ğŸ”¸ é¢„æµ‹æ¨¡å‹ï¼šåŸºäºå†å²æ•°æ®é¢„æµ‹æ¯”èµ›ç»“æœ
```

### 9.2 æ•°æ®åº“è®¾è®¡å…³é”®è¦ç‚¹


**ğŸ”¹ è¡¨è®¾è®¡åŸåˆ™**
```
æ—¶é—´ç»´åº¦ï¼šæ‰€æœ‰æ ¸å¿ƒè¡¨éƒ½è¦æœ‰æ—¶é—´å­—æ®µï¼Œæ”¯æŒå†å²åˆ†æ
ç´¢å¼•ä¼˜åŒ–ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼å»ºç«‹åˆç†ç´¢å¼•
JSONå­—æ®µï¼šçµæ´»å­˜å‚¨å¤æ‚æ•°æ®ç»“æ„
åˆ†åŒºç­–ç•¥ï¼šæŒ‰æ—¶é—´åˆ†åŒºå¤„ç†å¤§é‡å†å²æ•°æ®
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
```
å®æ—¶æ€§è¦æ±‚ï¼šæ ¸å¿ƒç»Ÿè®¡è¡¨è¦æ”¯æŒé«˜é¢‘æ›´æ–°
æŸ¥è¯¢æ•ˆç‡ï¼šå¸¸ç”¨æŸ¥è¯¢è·¯å¾„è¦æœ‰å¯¹åº”ç´¢å¼•
æ•°æ®èšåˆï¼šé¢„è®¡ç®—å¸¸ç”¨ç»Ÿè®¡æŒ‡æ ‡
ç¼“å­˜ç­–ç•¥ï¼šçƒ­ç‚¹æ•°æ®ä½¿ç”¨Redisç¼“å­˜
```

### 9.3 ä¸šåŠ¡ä»·å€¼ä½“ç°


**ğŸ¯ å¯¹ç”µç«è¡Œä¸šçš„ä»·å€¼**ï¼š
- **æˆ˜é˜Ÿæå‡**ï¼šé€šè¿‡æ•°æ®åˆ†ææé«˜ç«æŠ€æ°´å¹³
- **ç²‰ä¸ä½“éªŒ**ï¼šä¸°å¯Œçš„æ•°æ®è®©è§‚èµ›æ›´æœ‰è¶£
- **å•†ä¸šå†³ç­–**ï¼šä¸ºä¿±ä¹éƒ¨è¿è¥æä¾›æ•°æ®æ”¯æ’‘  
- **åª’ä½“å†…å®¹**ï¼šä¸ºè§£è¯´å’Œåª’ä½“æä¾›ç´ æ

**ğŸ’¡ å­¦ä¹ è¦ç‚¹**ï¼š
- **ç†è§£ä¸šåŠ¡åœºæ™¯**ï¼šç”µç«æ•°æ®æœ‰å…¶ç‰¹æ®Šæ€§ï¼Œè¦ç»“åˆè¡Œä¸šç†è§£
- **å¹³è¡¡å®æ—¶ä¸å‡†ç¡®**ï¼šå®æ—¶æ•°æ®å¤„ç†ä¸­å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§çš„æƒè¡¡
- **æ‰©å±•æ€§è®¾è®¡**ï¼šç”µç«è¡Œä¸šå‘å±•å¿«ï¼Œæ•°æ®ç»“æ„è¦è€ƒè™‘æ‰©å±•æ€§
- **ç”¨æˆ·å¯¼å‘**ï¼šè®¾è®¡è¦è€ƒè™‘æœ€ç»ˆç”¨æˆ·ï¼ˆé€‰æ‰‹ã€æ•™ç»ƒã€è§‚ä¼—ï¼‰çš„éœ€æ±‚

**æ ¸å¿ƒè®°å¿†**ï¼š
- ç”µç«æ•°æ®åˆ†ææ˜¯ä¼ ç»Ÿä½“è‚²æ•°æ®åˆ†æåœ¨ç”µç«é¢†åŸŸçš„åº”ç”¨
- å®æ—¶æ€§å’Œå‡†ç¡®æ€§æ˜¯ç”µç«æ•°æ®å¹³å°çš„æ ¸å¿ƒè¦æ±‚
- å¥½çš„æ•°æ®åˆ†æå¹³å°èƒ½æ˜¾è‘—æå‡ç”µç«è¡Œä¸šçš„ä¸“ä¸šåº¦å’Œè§‚èµæ€§
- æ•°æ®åº“è®¾è®¡è¦å……åˆ†è€ƒè™‘ç”µç«ä¸šåŠ¡çš„ç‰¹æ®Šéœ€æ±‚å’Œå¿«é€Ÿå‘å±•ç‰¹ç‚¹