---
title: 2ã€æ¸¸æˆæ•°æ®å­˜å‚¨
---
## ğŸ“š ç›®å½•

1. [æ¸¸æˆä¸–ç•Œæ•°æ®ç»“æ„](#1-æ¸¸æˆä¸–ç•Œæ•°æ®ç»“æ„)
2. [åœ°å›¾åœºæ™¯å­˜å‚¨ç³»ç»Ÿ](#2-åœ°å›¾åœºæ™¯å­˜å‚¨ç³»ç»Ÿ)
3. [NPCæ•°æ®ç®¡ç†](#3-NPCæ•°æ®ç®¡ç†)
4. [ä»»åŠ¡ç³»ç»Ÿæ•°æ®è®¾è®¡](#4-ä»»åŠ¡ç³»ç»Ÿæ•°æ®è®¾è®¡)
5. [å‰¯æœ¬å…³å¡è®¾è®¡](#5-å‰¯æœ¬å…³å¡è®¾è®¡)
6. [æ¸¸æˆé…ç½®è¡¨ç®¡ç†](#6-æ¸¸æˆé…ç½®è¡¨ç®¡ç†)
7. [ç‰ˆæœ¬æ•°æ®ç®¡ç†](#7-ç‰ˆæœ¬æ•°æ®ç®¡ç†)
8. [æ¸¸æˆæ•°æ®çƒ­æ›´æ–°æœºåˆ¶](#8-æ¸¸æˆæ•°æ®çƒ­æ›´æ–°æœºåˆ¶)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ æ¸¸æˆä¸–ç•Œæ•°æ®ç»“æ„


### 1.1 ä¸–ç•Œæ•°æ®åˆ†å±‚è®¾è®¡


**æ¸¸æˆä¸–ç•Œå°±åƒæ´‹è‘±ä¸€æ ·åˆ†å±‚å­˜å‚¨**ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ä¸åŒçš„èŒè´£ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å…¨å±€ä¸–ç•Œè®¾å®š              â”‚  â† ä¸–ç•Œè§„åˆ™ã€åŸºç¡€é…ç½®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          åŒºåŸŸæ•°æ®               â”‚  â† å¤§é™†ã€ç‹å›½ã€åŸå¸‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        åœºæ™¯åœ°å›¾æ•°æ®             â”‚  â† å…·ä½“åœ°å›¾ã€å»ºç­‘
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        åŠ¨æ€å¯¹è±¡æ•°æ®             â”‚  â† NPCã€é“å…·ã€ç‰¹æ•ˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¸–ç•Œæ•°æ®è¡¨è®¾è®¡


**ä¸–ç•Œé…ç½®è¡¨**ï¼šå­˜å‚¨æ¸¸æˆä¸–ç•Œçš„åŸºç¡€è®¾å®š
```sql
-- æ¸¸æˆä¸–ç•Œé…ç½®è¡¨
CREATE TABLE game_world_config (
    world_id INT PRIMARY KEY,
    world_name VARCHAR(100) NOT NULL COMMENT 'ä¸–ç•Œåç§°',
    world_type ENUM('PVE', 'PVP', 'MIXED') COMMENT 'ä¸–ç•Œç±»å‹',
    max_players INT DEFAULT 1000 COMMENT 'æœ€å¤§ç©å®¶æ•°',
    weather_system JSON COMMENT 'å¤©æ°”ç³»ç»Ÿé…ç½®',
    day_night_cycle JSON COMMENT 'æ˜¼å¤œå¾ªç¯é…ç½®',
    physics_config JSON COMMENT 'ç‰©ç†å¼•æ“é…ç½®',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ğŸ’¡ è®¾è®¡è¦ç‚¹è§£é‡Š**ï¼š
- `world_type`ï¼šåŒºåˆ†ä¸åŒç±»å‹çš„æ¸¸æˆä¸–ç•Œï¼ŒPVEé€‚åˆåˆä½œï¼ŒPVPé€‚åˆç«æŠ€
- `JSONå­—æ®µ`ï¼šå­˜å‚¨å¤æ‚é…ç½®ï¼Œæ¯”å¦‚å¤©æ°”å˜åŒ–è§„å¾‹ã€æ˜¼å¤œæ—¶é•¿ç­‰
- `max_players`ï¼šæ§åˆ¶æœåŠ¡å™¨è´Ÿè½½ï¼Œé¿å…å¡é¡¿

### 1.3 åŒºåŸŸå±‚çº§ç®¡ç†


**åŒºåŸŸæ•°æ®è¡¨**ï¼šç®¡ç†æ¸¸æˆä¸–ç•Œçš„åœ°ç†å±‚çº§
```sql
-- åŒºåŸŸå±‚çº§è¡¨
CREATE TABLE game_regions (
    region_id INT PRIMARY KEY,
    parent_id INT DEFAULT NULL COMMENT 'çˆ¶åŒºåŸŸID',
    region_name VARCHAR(100) NOT NULL,
    region_level TINYINT COMMENT 'å±‚çº§ï¼š1-å¤§é™† 2-ç‹å›½ 3-åŸå¸‚ 4-è¡—åŒº',
    coordinates JSON COMMENT 'åŒºåŸŸåæ ‡èŒƒå›´',
    background_music VARCHAR(200) COMMENT 'èƒŒæ™¯éŸ³ä¹æ–‡ä»¶',
    region_rules JSON COMMENT 'åŒºåŸŸç‰¹æ®Šè§„åˆ™',
    INDEX idx_parent (parent_id),
    INDEX idx_level (region_level)
);
```

**ğŸ™ï¸ å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```
è‰¾æ³½æ‹‰æ–¯å¤§é™† (level=1)
â”œâ”€â”€ æš´é£ç‹å›½ (level=2)
â”‚   â”œâ”€â”€ æš´é£åŸ (level=3)
â”‚   â”‚   â”œâ”€â”€ è´¸æ˜“åŒº (level=4)
â”‚   â”‚   â””â”€â”€ æ³•å¸ˆåŒº (level=4)
â”‚   â””â”€â”€ é—ªé‡‘é•‡ (level=3)
â””â”€â”€ é“ç‚‰å ¡ç‹å›½ (level=2)
```

---

## 2. ğŸ—ºï¸ åœ°å›¾åœºæ™¯å­˜å‚¨ç³»ç»Ÿ


### 2.1 åœºæ™¯æ•°æ®åˆ†ç¦»ç­–ç•¥


**åœºæ™¯æ•°æ®å°±åƒç”µå½±æ‹æ‘„**ï¼Œéœ€è¦æŠŠ"å¸ƒæ™¯"å’Œ"æ¼”å‘˜"åˆ†å¼€ç®¡ç†ï¼š

```
åœºæ™¯é™æ€æ•°æ®ï¼šåœ°å½¢ã€å»ºç­‘ã€å›ºå®šè£…é¥°ï¼ˆä¸ç»å¸¸å˜åŒ–ï¼‰
     â†“
åœºæ™¯åŠ¨æ€æ•°æ®ï¼šç©å®¶ã€NPCã€ä¸´æ—¶ç‰©å“ï¼ˆé¢‘ç¹å˜åŒ–ï¼‰
```

**åœºæ™¯åŸºç¡€è¡¨**ï¼šå­˜å‚¨åœ°å›¾çš„åŸºæœ¬ä¿¡æ¯
```sql
-- åœºæ™¯åŸºç¡€é…ç½®
CREATE TABLE game_scenes (
    scene_id INT PRIMARY KEY,
    scene_name VARCHAR(100) NOT NULL,
    scene_type ENUM('TOWN', 'DUNGEON', 'BATTLEFIELD', 'WILD') COMMENT 'åœºæ™¯ç±»å‹',
    map_file VARCHAR(200) COMMENT 'åœ°å›¾æ–‡ä»¶è·¯å¾„',
    scene_size JSON COMMENT 'åœºæ™¯å°ºå¯¸ {width, height}',
    spawn_points JSON COMMENT 'å‡ºç”Ÿç‚¹åæ ‡',
    safe_zones JSON COMMENT 'å®‰å…¨åŒºåŸŸé…ç½®',
    level_range JSON COMMENT 'é€‚åˆç­‰çº§èŒƒå›´ {min, max}',
    max_capacity INT DEFAULT 100 COMMENT 'æœ€å¤§æ‰¿è½½ç©å®¶æ•°',
    load_priority TINYINT DEFAULT 1 COMMENT 'åŠ è½½ä¼˜å…ˆçº§'
);
```

### 2.2 åœºæ™¯æ•°æ®LODï¼ˆç»†èŠ‚å±‚æ¬¡ï¼‰æœºåˆ¶


**LODå°±åƒçœ‹é£æ™¯**ï¼šè·ç¦»è¿‘çœ‹å¾—æ¸…æ¥šï¼Œè·ç¦»è¿œåªçœ‹è½®å»“ã€‚

```sql
-- åœºæ™¯ç»†èŠ‚å±‚æ¬¡è¡¨
CREATE TABLE scene_lod_config (
    lod_id INT PRIMARY KEY,
    scene_id INT NOT NULL,
    distance_range JSON COMMENT 'è·ç¦»èŒƒå›´ {min, max}',
    detail_level ENUM('HIGH', 'MEDIUM', 'LOW') COMMENT 'ç»†èŠ‚çº§åˆ«',
    texture_quality TINYINT COMMENT 'è´´å›¾è´¨é‡ 1-5',
    model_complexity TINYINT COMMENT 'æ¨¡å‹å¤æ‚åº¦ 1-5',
    effect_enabled BOOLEAN COMMENT 'æ˜¯å¦å¯ç”¨ç‰¹æ•ˆ',
    FOREIGN KEY (scene_id) REFERENCES game_scenes(scene_id)
);
```

**ğŸ¯ LODé…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "HIGH": {"distance": "0-50m", "texture": 5, "effects": true},
  "MEDIUM": {"distance": "50-200m", "texture": 3, "effects": false},
  "LOW": {"distance": "200m+", "texture": 1, "effects": false}
}
```

### 2.3 åŠ¨æ€åŠ è½½æœºåˆ¶


**åœºæ™¯å—åŠ è½½è¡¨**ï¼šå®ç°æŒ‰éœ€åŠ è½½ï¼ŒèŠ‚çœå†…å­˜
```sql
-- åœºæ™¯åˆ†å—åŠ è½½é…ç½®
CREATE TABLE scene_chunks (
    chunk_id INT PRIMARY KEY,
    scene_id INT NOT NULL,
    chunk_x INT COMMENT 'Xè½´å—åæ ‡',
    chunk_z INT COMMENT 'Zè½´å—åæ ‡', 
    chunk_data LONGTEXT COMMENT 'å—æ•°æ®ï¼ˆå‹ç¼©å­˜å‚¨ï¼‰',
    preload_priority TINYINT DEFAULT 1 COMMENT 'é¢„åŠ è½½ä¼˜å…ˆçº§',
    memory_size INT COMMENT 'å ç”¨å†…å­˜å¤§å°KB',
    last_accessed TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_scene_coord (scene_id, chunk_x, chunk_z)
);
```

**ğŸ’­ åŠ è½½ç­–ç•¥è¯´æ˜**ï¼š
- ç©å®¶å‘¨å›´`3Ã—3`çš„å—ç«‹å³åŠ è½½ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
- ç©å®¶è§†é‡èŒƒå›´`5Ã—5`çš„å—é¢„åŠ è½½ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
- è·ç¦»æ›´è¿œçš„å—å»¶è¿ŸåŠ è½½æˆ–å¸è½½ï¼ˆä½ä¼˜å…ˆçº§ï¼‰

---

## 3. ğŸ¤– NPCæ•°æ®ç®¡ç†


### 3.1 NPCåˆ†ç±»ä½“ç³»


**NPCå°±åƒæ¸¸æˆä¸–ç•Œé‡Œçš„"æ¼”å‘˜"**ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„è§’è‰²å®šä½ï¼š

```
åŠŸèƒ½å‹NPCï¼šå•†åº—è€æ¿ã€ä»»åŠ¡å‘å¸ƒè€…ã€ä¼ é€é—¨å®ˆå«
æˆ˜æ–—å‹NPCï¼šæ€ªç‰©ã€å®ˆå«ã€ç«æŠ€åœºå¯¹æ‰‹  
å‰§æƒ…å‹NPCï¼šé‡è¦è§’è‰²ã€å¯¹è¯ä¼™ä¼´ã€å¼•å¯¼å‘˜
è£…é¥°å‹NPCï¼šè·¯äººã€èƒŒæ™¯è§’è‰²ã€æ°›å›´è¥é€ 
```

**NPCåŸºç¡€é…ç½®è¡¨**ï¼š
```sql
-- NPCåŸºç¡€ä¿¡æ¯è¡¨
CREATE TABLE npc_templates (
    npc_id INT PRIMARY KEY,
    npc_name VARCHAR(100) NOT NULL,
    npc_type ENUM('FUNCTIONAL', 'COMBAT', 'STORY', 'DECORATIVE') COMMENT 'NPCç±»å‹',
    model_id VARCHAR(50) COMMENT '3Dæ¨¡å‹ID',
    ai_behavior VARCHAR(100) COMMENT 'AIè¡Œä¸ºè„šæœ¬',
    dialogue_tree_id INT COMMENT 'å¯¹è¯æ ‘ID',
    shop_id INT COMMENT 'å•†åº—IDï¼ˆå¦‚æœæ˜¯å•†äººï¼‰',
    combat_stats JSON COMMENT 'æˆ˜æ–—å±æ€§',
    spawn_rules JSON COMMENT 'åˆ·æ–°è§„åˆ™',
    interaction_range FLOAT DEFAULT 3.0 COMMENT 'äº¤äº’è·ç¦»',
    respawn_time INT DEFAULT 300 COMMENT 'å¤æ´»æ—¶é—´ï¼ˆç§’ï¼‰'
);
```

### 3.2 NPCå®ä¾‹ç®¡ç†


**NPCå®ä¾‹è¡¨**ï¼šç®¡ç†æ¸¸æˆä¸­çš„å…·ä½“NPC
```sql
-- NPCå®ä¾‹è¡¨ï¼ˆè¿è¡Œæ—¶æ•°æ®ï¼‰
CREATE TABLE npc_instances (
    instance_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    template_id INT NOT NULL COMMENT 'æ¨¡æ¿ID',
    scene_id INT NOT NULL COMMENT 'æ‰€åœ¨åœºæ™¯',
    position_x FLOAT NOT NULL,
    position_y FLOAT NOT NULL, 
    position_z FLOAT NOT NULL,
    rotation FLOAT DEFAULT 0 COMMENT 'æœå‘è§’åº¦',
    current_hp INT COMMENT 'å½“å‰è¡€é‡',
    current_status ENUM('ALIVE', 'DEAD', 'SLEEPING') DEFAULT 'ALIVE',
    last_interaction TIMESTAMP COMMENT 'æœ€åäº¤äº’æ—¶é—´',
    spawn_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_scene (scene_id),
    INDEX idx_template (template_id),
    FOREIGN KEY (template_id) REFERENCES npc_templates(npc_id)
);
```

### 3.3 æ™ºèƒ½NPCè¡Œä¸ºé…ç½®


**NPCè¡Œä¸ºè„šæœ¬è¡¨**ï¼šå®šä¹‰NPCçš„æ™ºèƒ½è¡Œä¸º
```sql
-- NPCè¡Œä¸ºé…ç½®è¡¨
CREATE TABLE npc_behaviors (
    behavior_id INT PRIMARY KEY,
    behavior_name VARCHAR(100),
    trigger_conditions JSON COMMENT 'è§¦å‘æ¡ä»¶',
    action_sequence JSON COMMENT 'è¡Œä¸ºåºåˆ—',
    cooldown_time INT DEFAULT 0 COMMENT 'å†·å´æ—¶é—´',
    priority_level TINYINT DEFAULT 1 COMMENT 'ä¼˜å…ˆçº§'
);
```

**ğŸ­ è¡Œä¸ºé…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "patrol_behavior": {
    "trigger": "player_distance > 10m",
    "actions": ["move_to_waypoint", "wait_3s", "next_waypoint"],
    "cooldown": 0
  },
  "alert_behavior": {
    "trigger": "player_distance < 5m", 
    "actions": ["face_player", "play_animation_wave", "say_greeting"],
    "cooldown": 10
  }
}
```

---

## 4. ğŸ“œ ä»»åŠ¡ç³»ç»Ÿæ•°æ®è®¾è®¡


### 4.1 ä»»åŠ¡æ•°æ®ç»“æ„


**ä»»åŠ¡ç³»ç»Ÿå°±åƒä¸€æœ¬"å‰§æœ¬é›†"**ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªå°æ•…äº‹ï¼š

```
ä»»åŠ¡æ¨¡æ¿ï¼šå®šä¹‰ä»»åŠ¡çš„åŸºæœ¬ä¿¡æ¯å’Œè§„åˆ™
    â†“
ä»»åŠ¡å®ä¾‹ï¼šç©å®¶æ¥å—çš„å…·ä½“ä»»åŠ¡ï¼Œè®°å½•è¿›åº¦
    â†“  
ä»»åŠ¡æ­¥éª¤ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå°ç›®æ ‡
```

**ä»»åŠ¡æ¨¡æ¿è¡¨**ï¼š
```sql
-- ä»»åŠ¡æ¨¡æ¿è¡¨
CREATE TABLE quest_templates (
    quest_id INT PRIMARY KEY,
    quest_name VARCHAR(200) NOT NULL,
    quest_desc TEXT COMMENT 'ä»»åŠ¡æè¿°',
    quest_type ENUM('MAIN', 'SIDE', 'DAILY', 'WEEKLY', 'ACHIEVEMENT') COMMENT 'ä»»åŠ¡ç±»å‹',
    level_requirement INT DEFAULT 1 COMMENT 'æ¥å–ç­‰çº§è¦æ±‚',
    prerequisite_quests JSON COMMENT 'å‰ç½®ä»»åŠ¡IDåˆ—è¡¨',
    rewards JSON COMMENT 'ä»»åŠ¡å¥–åŠ±é…ç½®',
    time_limit INT COMMENT 'æ—¶é—´é™åˆ¶ï¼ˆåˆ†é’Ÿï¼‰',
    repeatable BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¯é‡å¤',
    auto_accept BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦è‡ªåŠ¨æ¥å–',
    quest_steps JSON COMMENT 'ä»»åŠ¡æ­¥éª¤é…ç½®'
);
```

### 4.2 ä»»åŠ¡æ­¥éª¤è®¾è®¡


**ä»»åŠ¡æ­¥éª¤é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "steps": [
    {
      "step_id": 1,
      "step_type": "KILL",
      "target": "goblin_warrior",
      "required_count": 10,
      "description": "å‡»è´¥10åªå“¥å¸ƒæ—æˆ˜å£«"
    },
    {
      "step_id": 2, 
      "step_type": "COLLECT",
      "target": "goblin_ear",
      "required_count": 5,
      "drop_rate": 0.8,
      "description": "æ”¶é›†5ä¸ªå“¥å¸ƒæ—è€³æœµ"
    },
    {
      "step_id": 3,
      "step_type": "TALK_TO_NPC", 
      "target": "village_elder",
      "description": "ä¸æ‘é•¿å¯¹è¯"
    }
  ]
}
```

**ç©å®¶ä»»åŠ¡è¿›åº¦è¡¨**ï¼š
```sql
-- ç©å®¶ä»»åŠ¡è¿›åº¦è¡¨
CREATE TABLE player_quest_progress (
    progress_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    player_id BIGINT NOT NULL,
    quest_id INT NOT NULL,
    current_step INT DEFAULT 1 COMMENT 'å½“å‰æ­¥éª¤',
    step_progress JSON COMMENT 'å„æ­¥éª¤å®Œæˆæƒ…å†µ',
    quest_status ENUM('ACCEPTED', 'IN_PROGRESS', 'COMPLETED', 'ABANDONED') DEFAULT 'ACCEPTED',
    accept_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    complete_time TIMESTAMP NULL,
    INDEX idx_player_quest (player_id, quest_id)
);
```

---

## 5. ğŸ° å‰¯æœ¬å…³å¡è®¾è®¡


### 5.1 å‰¯æœ¬é…ç½®ä½“ç³»


**å‰¯æœ¬å°±åƒ"å¯†å®¤é€ƒè„±"**ï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡æ¯ä¸ªå…³å¡çš„æŒ‘æˆ˜ï¼š

**å‰¯æœ¬åŸºç¡€è¡¨**ï¼š
```sql
-- å‰¯æœ¬é…ç½®è¡¨
CREATE TABLE dungeon_templates (
    dungeon_id INT PRIMARY KEY,
    dungeon_name VARCHAR(100) NOT NULL,
    dungeon_type ENUM('SOLO', 'TEAM', 'RAID', 'PVP') COMMENT 'å‰¯æœ¬ç±»å‹',
    min_level INT DEFAULT 1 COMMENT 'æœ€ä½ç­‰çº§è¦æ±‚',
    max_level INT DEFAULT 100 COMMENT 'æœ€é«˜ç­‰çº§é™åˆ¶',
    min_players INT DEFAULT 1 COMMENT 'æœ€å°‘ç©å®¶æ•°',
    max_players INT DEFAULT 5 COMMENT 'æœ€å¤šç©å®¶æ•°',
    time_limit INT COMMENT 'æ—¶é—´é™åˆ¶ï¼ˆåˆ†é’Ÿï¼‰',
    difficulty_modes JSON COMMENT 'éš¾åº¦é…ç½®',
    entry_cost JSON COMMENT 'è¿›å…¥æ¶ˆè€—',
    daily_limit INT DEFAULT 3 COMMENT 'æ¯æ—¥æ¬¡æ•°é™åˆ¶',
    rewards_table JSON COMMENT 'å¥–åŠ±é…ç½®è¡¨'
);
```

### 5.2 å…³å¡æ³¢æ¬¡è®¾è®¡


**å‰¯æœ¬å…³å¡è¡¨**ï¼šå®šä¹‰å‰¯æœ¬å†…çš„å…·ä½“å…³å¡
```sql
-- å‰¯æœ¬å…³å¡é…ç½®
CREATE TABLE dungeon_stages (
    stage_id INT PRIMARY KEY,
    dungeon_id INT NOT NULL,
    stage_order INT NOT NULL COMMENT 'å…³å¡é¡ºåº',
    stage_name VARCHAR(100),
    stage_type ENUM('COMBAT', 'PUZZLE', 'BOSS', 'TREASURE') COMMENT 'å…³å¡ç±»å‹',
    enemy_waves JSON COMMENT 'æ•Œäººæ³¢æ¬¡é…ç½®',
    special_mechanics JSON COMMENT 'ç‰¹æ®Šæœºåˆ¶',
    completion_conditions JSON COMMENT 'é€šå…³æ¡ä»¶',
    stage_rewards JSON COMMENT 'å…³å¡å¥–åŠ±',
    FOREIGN KEY (dungeon_id) REFERENCES dungeon_templates(dungeon_id),
    UNIQUE KEY uk_dungeon_order (dungeon_id, stage_order)
);
```

**ğŸ¯ æ•Œäººæ³¢æ¬¡é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "waves": [
    {
      "wave_id": 1,
      "enemies": [
        {"enemy_id": 101, "count": 3, "spawn_delay": 0},
        {"enemy_id": 102, "count": 2, "spawn_delay": 5}
      ]
    },
    {
      "wave_id": 2, 
      "enemies": [
        {"enemy_id": 103, "count": 1, "spawn_delay": 0, "is_boss": true}
      ],
      "trigger_condition": "all_wave1_dead"
    }
  ]
}
```

---

## 6. ğŸ“Š æ¸¸æˆé…ç½®è¡¨ç®¡ç†


### 6.1 é…ç½®è¡¨åˆ†ç±»ä½“ç³»


**æ¸¸æˆé…ç½®è¡¨å°±åƒ"è¯´æ˜ä¹¦"**ï¼Œå‘Šè¯‰æ¸¸æˆå„ä¸ªç³»ç»Ÿæ€ä¹ˆè¿è¡Œï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ•°å€¼é…ç½®è¡¨               â”‚  â† ç­‰çº§ã€ç»éªŒã€å±æ€§æˆé•¿
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ç‰©å“é…ç½®è¡¨               â”‚  â† è£…å¤‡ã€é“å…·ã€ææ–™
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚        æŠ€èƒ½é…ç½®è¡¨               â”‚  â† æŠ€èƒ½æ•ˆæœã€å†·å´ã€æ¶ˆè€—
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        å•†åº—é…ç½®è¡¨               â”‚  â† å•†å“ã€ä»·æ ¼ã€åˆ·æ–°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€šç”¨é…ç½®è¡¨ç»“æ„**ï¼š
```sql
-- æ¸¸æˆé…ç½®åŸºç¡€è¡¨
CREATE TABLE game_configs (
    config_id VARCHAR(100) PRIMARY KEY COMMENT 'é…ç½®ID',
    config_category VARCHAR(50) NOT NULL COMMENT 'é…ç½®åˆ†ç±»',
    config_name VARCHAR(200) COMMENT 'é…ç½®åç§°',
    config_value JSON NOT NULL COMMENT 'é…ç½®å†…å®¹',
    version VARCHAR(20) DEFAULT '1.0.0' COMMENT 'é…ç½®ç‰ˆæœ¬',
    is_active BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦å¯ç”¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_category (config_category),
    INDEX idx_version (version)
);
```

### 6.2 é…ç½®è¡¨ç‰ˆæœ¬æ§åˆ¶


**é…ç½®ç‰ˆæœ¬ç®¡ç†è¡¨**ï¼š
```sql
-- é…ç½®ç‰ˆæœ¬æ§åˆ¶è¡¨
CREATE TABLE config_versions (
    version_id VARCHAR(20) PRIMARY KEY,
    version_name VARCHAR(100),
    release_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    change_log TEXT COMMENT 'å˜æ›´æ—¥å¿—',
    rollback_version VARCHAR(20) COMMENT 'å›æ»šç‰ˆæœ¬',
    is_stable BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ç¨³å®šç‰ˆæœ¬',
    affected_configs JSON COMMENT 'å½±å“çš„é…ç½®é¡¹åˆ—è¡¨'
);
```

### 6.3 é…ç½®çƒ­æ›´æ–°æœºåˆ¶


**é…ç½®æ›´æ–°è®°å½•è¡¨**ï¼š
```sql
-- é…ç½®çƒ­æ›´æ–°è®°å½•
CREATE TABLE config_hotfix_logs (
    log_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    config_id VARCHAR(100) NOT NULL,
    old_value JSON COMMENT 'æ—§å€¼',
    new_value JSON COMMENT 'æ–°å€¼',
    update_reason TEXT COMMENT 'æ›´æ–°åŸå› ',
    operator VARCHAR(50) COMMENT 'æ“ä½œäººå‘˜',
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    rollback_time TIMESTAMP NULL COMMENT 'å›æ»šæ—¶é—´'
);
```

**ğŸ”„ çƒ­æ›´æ–°æµç¨‹**ï¼š
```
é…ç½®ä¿®æ”¹ â†’ éªŒè¯æ ¼å¼ â†’ æ¨é€åˆ°æœåŠ¡å™¨ â†’ é€šçŸ¥å®¢æˆ·ç«¯ â†’ ç”Ÿæ•ˆç¡®è®¤
     â†‘                                             â†“
   å¤±è´¥å›æ»š â† ç›‘æ§å¼‚å¸¸ â† å½±å“è¯„ä¼° â† ç°åº¦æµ‹è¯• â† å¤‡ä»½åŸå€¼
```

---

## 7. ğŸ“¦ ç‰ˆæœ¬æ•°æ®ç®¡ç†


### 7.1 æ¸¸æˆç‰ˆæœ¬æ§åˆ¶ä½“ç³»


**ç‰ˆæœ¬ç®¡ç†å°±åƒ"æ—¶å…‰æœº"**ï¼Œè®°å½•æ¸¸æˆçš„æ¯ä¸€æ¬¡å˜åŒ–ï¼š

**ç‰ˆæœ¬ä¿¡æ¯è¡¨**ï¼š
```sql
-- æ¸¸æˆç‰ˆæœ¬ä¿¡æ¯è¡¨
CREATE TABLE game_versions (
    version_id VARCHAR(20) PRIMARY KEY,
    version_name VARCHAR(100) NOT NULL,
    version_type ENUM('MAJOR', 'MINOR', 'HOTFIX', 'BETA') COMMENT 'ç‰ˆæœ¬ç±»å‹',
    release_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    min_client_version VARCHAR(20) COMMENT 'æœ€ä½å®¢æˆ·ç«¯ç‰ˆæœ¬è¦æ±‚',
    force_update BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¼ºåˆ¶æ›´æ–°',
    update_size BIGINT COMMENT 'æ›´æ–°åŒ…å¤§å°ï¼ˆå­—èŠ‚ï¼‰',
    download_url VARCHAR(500) COMMENT 'ä¸‹è½½åœ°å€',
    changelog TEXT COMMENT 'æ›´æ–°æ—¥å¿—',
    is_rollback_safe BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦æ”¯æŒå›æ»š'
);
```

### 7.2 è·¨ç‰ˆæœ¬å…¼å®¹æ€§


**ç‰ˆæœ¬å…¼å®¹é…ç½®è¡¨**ï¼š
```sql
-- ç‰ˆæœ¬å…¼å®¹æ€§é…ç½®
CREATE TABLE version_compatibility (
    compat_id INT PRIMARY KEY AUTO_INCREMENT,
    server_version VARCHAR(20) NOT NULL,
    client_version VARCHAR(20) NOT NULL, 
    compatibility_level ENUM('FULL', 'PARTIAL', 'NONE') COMMENT 'å…¼å®¹çº§åˆ«',
    supported_features JSON COMMENT 'æ”¯æŒçš„åŠŸèƒ½åˆ—è¡¨',
    deprecated_features JSON COMMENT 'åºŸå¼ƒçš„åŠŸèƒ½åˆ—è¡¨',
    migration_rules JSON COMMENT 'æ•°æ®è¿ç§»è§„åˆ™'
);
```

**ğŸ’¡ å…¼å®¹æ€§è®¾è®¡åŸåˆ™**ï¼š
- **å‘å‰å…¼å®¹**ï¼šæ–°ç‰ˆæœ¬æœåŠ¡å™¨æ”¯æŒè€ç‰ˆæœ¬å®¢æˆ·ç«¯
- **åŠŸèƒ½é™çº§**ï¼šè€å®¢æˆ·ç«¯è‡ªåŠ¨å±è”½æ–°åŠŸèƒ½
- **æ•°æ®è¿ç§»**ï¼šè‡ªåŠ¨è½¬æ¢è€ç‰ˆæœ¬æ•°æ®æ ¼å¼

---

## 8. ğŸ”¥ æ¸¸æˆæ•°æ®çƒ­æ›´æ–°æœºåˆ¶


### 8.1 çƒ­æ›´æ–°ç³»ç»Ÿæ¶æ„


**çƒ­æ›´æ–°å°±åƒ"ä¸åœè½¦æ¢è½®èƒ"**ï¼Œåœ¨æ¸¸æˆè¿è¡Œæ—¶æ›´æ–°å†…å®¹ï¼š

```
å®¢æˆ·ç«¯è¯·æ±‚ â†’ ç‰ˆæœ¬æ£€æŸ¥ â†’ å·®å¼‚è®¡ç®— â†’ å¢é‡ä¸‹è½½ â†’ çƒ­åŠ è½½ç”Ÿæ•ˆ
     â†‘                                        â†“
   éªŒè¯å®Œæ•´æ€§ â† å¤‡ä»½æ•°æ® â† åº”ç”¨è¡¥ä¸ â† è§£å‹æ›´æ–°åŒ…
```

**çƒ­æ›´æ–°ä»»åŠ¡è¡¨**ï¼š
```sql
-- çƒ­æ›´æ–°ä»»åŠ¡è¡¨
CREATE TABLE hotupdate_tasks (
    task_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_name VARCHAR(200) NOT NULL,
    target_version VARCHAR(20) NOT NULL,
    update_type ENUM('CONFIG', 'RESOURCE', 'SCRIPT', 'FULL') COMMENT 'æ›´æ–°ç±»å‹',
    file_list JSON COMMENT 'éœ€è¦æ›´æ–°çš„æ–‡ä»¶åˆ—è¡¨',
    update_priority TINYINT DEFAULT 1 COMMENT 'æ›´æ–°ä¼˜å…ˆçº§',
    schedule_time TIMESTAMP COMMENT 'è®¡åˆ’æ›´æ–°æ—¶é—´',
    task_status ENUM('PENDING', 'RUNNING', 'SUCCESS', 'FAILED', 'ROLLBACK'),
    affected_players INT DEFAULT 0 COMMENT 'å½±å“ç©å®¶æ•°é‡',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 8.2 åŠ¨æ€å†…å®¹ç”Ÿæˆç³»ç»Ÿ


**åŠ¨æ€å†…å®¹é…ç½®è¡¨**ï¼š
```sql
-- åŠ¨æ€å†…å®¹ç”Ÿæˆè§„åˆ™
CREATE TABLE dynamic_content_rules (
    rule_id INT PRIMARY KEY,
    content_type ENUM('QUEST', 'EVENT', 'REWARD', 'ENEMY') COMMENT 'å†…å®¹ç±»å‹',
    generation_algorithm VARCHAR(100) COMMENT 'ç”Ÿæˆç®—æ³•',
    parameters JSON COMMENT 'ç”Ÿæˆå‚æ•°',
    trigger_conditions JSON COMMENT 'è§¦å‘æ¡ä»¶',
    validity_period INT COMMENT 'æœ‰æ•ˆæœŸï¼ˆå°æ—¶ï¼‰',
    max_instances INT DEFAULT 100 COMMENT 'æœ€å¤§å®ä¾‹æ•°é‡',
    is_active BOOLEAN DEFAULT TRUE
);
```

**ğŸ² éšæœºç”Ÿæˆç¤ºä¾‹é…ç½®**ï¼š
```json
{
  "random_quest_rule": {
    "algorithm": "weighted_random",
    "parameters": {
      "quest_types": [
        {"type": "kill", "weight": 40},
        {"type": "collect", "weight": 30}, 
        {"type": "escort", "weight": 20},
        {"type": "exploration", "weight": 10}
      ],
      "level_range": {"min": 10, "max": 50},
      "reward_multiplier": 1.2
    },
    "trigger": "player_daily_quest_completed < 3"
  }
}
```

### 8.3 æ¸¸æˆå†…ç»æµç³»ç»Ÿæ•°æ®


**ç»æµç³»ç»Ÿç›‘æ§è¡¨**ï¼š
```sql
-- æ¸¸æˆç»æµç›‘æ§è¡¨
CREATE TABLE economy_monitor (
    monitor_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    item_id INT NOT NULL COMMENT 'ç‰©å“ID',
    server_id INT NOT NULL COMMENT 'æœåŠ¡å™¨ID',
    total_supply BIGINT COMMENT 'æ€»ä¾›åº”é‡',
    total_demand BIGINT COMMENT 'æ€»éœ€æ±‚é‡',
    avg_price DECIMAL(10,2) COMMENT 'å¹³å‡ä»·æ ¼',
    price_trend ENUM('RISING', 'STABLE', 'FALLING') COMMENT 'ä»·æ ¼è¶‹åŠ¿',
    inflation_rate DECIMAL(5,4) COMMENT 'é€šèƒ€ç‡',
    record_date DATE NOT NULL,
    UNIQUE KEY uk_item_server_date (item_id, server_id, record_date)
);
```

### 8.4 é…ç½®å˜æ›´å½±å“è¯„ä¼°


**å˜æ›´å½±å“è¯„ä¼°è¡¨**ï¼š
```sql
-- é…ç½®å˜æ›´å½±å“è¯„ä¼°
CREATE TABLE config_impact_analysis (
    analysis_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    config_change_id VARCHAR(100) NOT NULL,
    impact_scope ENUM('LOW', 'MEDIUM', 'HIGH', 'CRITICAL') COMMENT 'å½±å“èŒƒå›´',
    affected_systems JSON COMMENT 'å½±å“çš„ç³»ç»Ÿåˆ—è¡¨',
    risk_assessment TEXT COMMENT 'é£é™©è¯„ä¼°',
    rollback_plan TEXT COMMENT 'å›æ»šæ–¹æ¡ˆ',
    test_results JSON COMMENT 'æµ‹è¯•ç»“æœ',
    approval_status ENUM('PENDING', 'APPROVED', 'REJECTED'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„è®¾è®¡åŸåˆ™


```
ğŸ¯ åˆ†å±‚è®¾è®¡ï¼šä¸–ç•Œâ†’åŒºåŸŸâ†’åœºæ™¯â†’å¯¹è±¡ï¼Œå±‚æ¬¡æ¸…æ™°
ğŸ¯ åŠ¨é™åˆ†ç¦»ï¼šé™æ€é…ç½®ä¸åŠ¨æ€æ•°æ®åˆ†å¼€å­˜å‚¨
ğŸ¯ æŒ‰éœ€åŠ è½½ï¼šLODæœºåˆ¶å’Œåˆ†å—åŠ è½½èŠ‚çœèµ„æº
ğŸ¯ ç‰ˆæœ¬æ§åˆ¶ï¼šæ”¯æŒçƒ­æ›´æ–°å’Œå›æ»šæœºåˆ¶
ğŸ¯ æ€§èƒ½ä¼˜åŒ–ï¼šç´¢å¼•è®¾è®¡å’ŒæŸ¥è¯¢ä¼˜åŒ–
```

### 9.2 å…³é”®æŠ€æœ¯è¦ç‚¹


**ğŸ”¸ æ•°æ®åˆ†ç±»åŸåˆ™**
```
é…ç½®æ•°æ®ï¼šæ¸¸æˆè§„åˆ™ã€æ•°å€¼å¹³è¡¡ï¼ˆç›¸å¯¹ç¨³å®šï¼‰
å®ä¾‹æ•°æ®ï¼šç©å®¶çŠ¶æ€ã€NPCå®ä¾‹ï¼ˆé¢‘ç¹å˜åŒ–ï¼‰
æ¨¡æ¿æ•°æ®ï¼šå¯å¤ç”¨çš„åŸºç¡€é…ç½®ï¼ˆç‰ˆæœ¬æ§åˆ¶ï¼‰
ä¸´æ—¶æ•°æ®ï¼šç¼“å­˜ã€ä¼šè¯çŠ¶æ€ï¼ˆå¯ä¸¢å¤±ï¼‰
```

**ğŸ”¸ çƒ­æ›´æ–°ç­–ç•¥**
```
é…ç½®çƒ­æ›´ï¼šæ— éœ€é‡å¯ï¼Œå®æ—¶ç”Ÿæ•ˆ
èµ„æºçƒ­æ›´ï¼šå¢é‡ä¸‹è½½ï¼Œåå°æ›¿æ¢  
è„šæœ¬çƒ­æ›´ï¼šåŠ¨æ€åŠ è½½ï¼Œç‰ˆæœ¬éš”ç¦»
æ•°æ®çƒ­æ›´ï¼šå…¼å®¹æ€§æ£€æŸ¥ï¼Œå¹³æ»‘è¿ç§»
```

**ğŸ”¸ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
```
ç´¢å¼•ä¼˜åŒ–ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼å»ºç«‹å¤åˆç´¢å¼•
åˆ†åº“åˆ†è¡¨ï¼šæŒ‰æœåŠ¡å™¨ã€ç©å®¶ç­‰ç»´åº¦åˆ†ç‰‡
ç¼“å­˜ç­–ç•¥ï¼šçƒ­ç‚¹æ•°æ®å†…å­˜ç¼“å­˜
å¼‚æ­¥å¤„ç†ï¼šéå…³é”®æ•°æ®å¼‚æ­¥å†™å…¥
```

### 9.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ’¡ å¼€å‘é˜¶æ®µå»ºè®®**ï¼š
- **åŸå‹é˜¶æ®µ**ï¼šç®€åŒ–æ•°æ®ç»“æ„ï¼Œå¿«é€ŸéªŒè¯ç©æ³•
- **å¼€å‘é˜¶æ®µ**ï¼šå»ºç«‹å®Œæ•´æ•°æ®æ¨¡å‹ï¼Œé¢„ç•™æ‰©å±•ç©ºé—´  
- **æµ‹è¯•é˜¶æ®µ**ï¼šå‹åŠ›æµ‹è¯•æ•°æ®åº“æ€§èƒ½ï¼Œä¼˜åŒ–æŸ¥è¯¢
- **ä¸Šçº¿é˜¶æ®µ**ï¼šç›‘æ§æ•°æ®å¢é•¿ï¼ŒåŠæ—¶æ‰©å®¹

**âš ï¸ å¸¸è§è¯¯åŒºé¿å…**ï¼š
- è¿‡åº¦èŒƒå¼åŒ–å¯¼è‡´æŸ¥è¯¢æ€§èƒ½å·®
- ç¼ºä¹ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶å¯¼è‡´æ›´æ–°å›°éš¾
- å¿½ç•¥æ•°æ®å¤‡ä»½å’Œæ¢å¤æœºåˆ¶
- æ²¡æœ‰è€ƒè™‘è·¨ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

**ğŸš€ æœ€ä½³å®è·µ**ï¼š
- å»ºç«‹å®Œæ•´çš„é…ç½®ç®¡ç†æµç¨‹
- å®ç°è‡ªåŠ¨åŒ–çš„æ•°æ®è¿ç§»å·¥å…·
- è®¾ç½®å…¨é¢çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
- å®šæœŸè¿›è¡Œæ•°æ®åº“æ€§èƒ½ä¼˜åŒ–

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> åˆ†å±‚å­˜å‚¨ç»“æ„æ¸…ï¼ŒåŠ¨é™åˆ†ç¦»æ€§èƒ½å¥½  
> ç‰ˆæœ¬æ§åˆ¶çƒ­æ›´æ–°ï¼Œç›‘æ§å‘Šè­¦ä¿ç¨³å®š  
> é…ç½®æ¨¡æ¿å®ä¾‹åˆ†ï¼Œç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢å¿«