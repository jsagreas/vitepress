---
title: 20ã€åŒºå—é“¾é‡‘èåº”ç”¨æ•°æ®è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [åŒºå—é“¾æ•°æ®ç»“æ„åŸºç¡€](#1-åŒºå—é“¾æ•°æ®ç»“æ„åŸºç¡€)
2. [æ™ºèƒ½åˆçº¦çŠ¶æ€å­˜å‚¨](#2-æ™ºèƒ½åˆçº¦çŠ¶æ€å­˜å‚¨)
3. [é“¾ä¸Šé“¾ä¸‹æ•°æ®åŒæ­¥](#3-é“¾ä¸Šé“¾ä¸‹æ•°æ®åŒæ­¥)
4. [æ•°å­—è´§å¸é’±åŒ…è®¾è®¡](#4-æ•°å­—è´§å¸é’±åŒ…è®¾è®¡)
5. [å»ä¸­å¿ƒåŒ–èº«ä»½ç®¡ç†](#5-å»ä¸­å¿ƒåŒ–èº«ä»½ç®¡ç†)
6. [åŒºå—é“¾å®¡è®¡è¿½è¸ª](#6-åŒºå—é“¾å®¡è®¡è¿½è¸ª)
7. [è·¨é“¾æ•°æ®äº¤äº’](#7-è·¨é“¾æ•°æ®äº¤äº’)
8. [æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ](#8-æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”— åŒºå—é“¾æ•°æ®ç»“æ„åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯åŒºå—é“¾æ•°æ®ç»“æ„


**é€šä¿—ç†è§£**ï¼šåŒºå—é“¾å°±åƒä¸€æœ¬**æ°¸è¿œä¸èƒ½æ’•é¡µçš„è´¦æœ¬**ï¼Œæ¯ä¸€é¡µéƒ½è®°å½•ç€äº¤æ˜“ä¿¡æ¯ï¼Œè€Œä¸”æ¯é¡µéƒ½å’Œå‰ä¸€é¡µç´§å¯†ç›¸è¿ã€‚

```
ä¼ ç»Ÿæ•°æ®åº“ vs åŒºå—é“¾å­˜å‚¨ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼š                  åŒºå—é“¾æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®è¡¨  â”‚               â”‚  åŒºå—1  â”‚â”€â”€â”€>â”‚  åŒºå—2  â”‚â”€â”€â”€>â”‚  åŒºå—3  â”‚
â”‚å¯ä¿®æ”¹åˆ é™¤â”‚               â”‚ä¸å¯ç¯¡æ”¹ â”‚    â”‚ä¸å¯ç¯¡æ”¹ â”‚    â”‚ä¸å¯ç¯¡æ”¹ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- ğŸ”¸ **ä¸å¯ç¯¡æ”¹**ï¼šä¸€æ—¦å†™å…¥å°±æ— æ³•ä¿®æ”¹
- ğŸ”¸ **é“¾å¼ç»“æ„**ï¼šæ¯ä¸ªåŒºå—éƒ½æŒ‡å‘å‰ä¸€ä¸ªåŒºå—
- ğŸ”¸ **åˆ†å¸ƒå¼å­˜å‚¨**ï¼šæ•°æ®å­˜å‚¨åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Š
- ğŸ”¸ **é€æ˜å¯éªŒè¯**ï¼šæ‰€æœ‰äº¤æ˜“éƒ½å¯ä»¥è¿½æº¯éªŒè¯

### 1.2 MySQLä¸­çš„åŒºå—é“¾æ•°æ®è¡¨è®¾è®¡


**åŒºå—è¡¨è®¾è®¡**ï¼š
```sql
-- åŒºå—åŸºç¡€ä¿¡æ¯è¡¨
CREATE TABLE `blockchain_blocks` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `block_number` bigint NOT NULL COMMENT 'åŒºå—é«˜åº¦',
  `block_hash` varchar(66) NOT NULL COMMENT 'åŒºå—å“ˆå¸Œ',
  `previous_hash` varchar(66) NOT NULL COMMENT 'ä¸Šä¸€åŒºå—å“ˆå¸Œ',
  `merkle_root` varchar(66) NOT NULL COMMENT 'é»˜å…‹å°”æ ‘æ ¹',
  `timestamp` bigint NOT NULL COMMENT 'æ—¶é—´æˆ³',
  `transaction_count` int DEFAULT 0 COMMENT 'äº¤æ˜“æ•°é‡',
  `block_size` int DEFAULT 0 COMMENT 'åŒºå—å¤§å°(å­—èŠ‚)',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_block_number` (`block_number`),
  UNIQUE KEY `uk_block_hash` (`block_hash`),
  KEY `idx_timestamp` (`timestamp`)
) COMMENT='åŒºå—é“¾åŒºå—ä¿¡æ¯è¡¨';
```

**äº¤æ˜“è¡¨è®¾è®¡**ï¼š
```sql
-- äº¤æ˜“è®°å½•è¡¨
CREATE TABLE `blockchain_transactions` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `tx_hash` varchar(66) NOT NULL COMMENT 'äº¤æ˜“å“ˆå¸Œ',
  `block_number` bigint NOT NULL COMMENT 'æ‰€å±åŒºå—',
  `from_address` varchar(42) NOT NULL COMMENT 'å‘é€åœ°å€',
  `to_address` varchar(42) NOT NULL COMMENT 'æ¥æ”¶åœ°å€',
  `amount` decimal(36,18) NOT NULL COMMENT 'äº¤æ˜“é‡‘é¢',
  `gas_used` bigint DEFAULT 0 COMMENT 'æ¶ˆè€—Gas',
  `gas_price` bigint DEFAULT 0 COMMENT 'Gasä»·æ ¼',
  `tx_status` tinyint DEFAULT 1 COMMENT 'äº¤æ˜“çŠ¶æ€:1æˆåŠŸ,0å¤±è´¥',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_tx_hash` (`tx_hash`),
  KEY `idx_block_number` (`block_number`),
  KEY `idx_from_address` (`from_address`),
  KEY `idx_to_address` (`to_address`)
) COMMENT='åŒºå—é“¾äº¤æ˜“è®°å½•è¡¨';
```

### 1.3 åŒºå—é“¾æ•°æ®ä¸€è‡´æ€§ä¿è¯


**ä»€ä¹ˆæ˜¯æ•°æ®ä¸€è‡´æ€§**ï¼šå°±æ˜¯ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰çŸ›ç›¾ã€‚

```
æ•°æ®åŒæ­¥æµç¨‹ï¼š
æ–°äº¤æ˜“äº§ç”Ÿ â†’ å¹¿æ’­åˆ°ç½‘ç»œ â†’ å„èŠ‚ç‚¹éªŒè¯ â†’ æ‰“åŒ…æˆåŒºå— â†’ å…¨ç½‘ç¡®è®¤ â†’ MySQLæ›´æ–°

éªŒè¯æ­¥éª¤ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.äº¤æ˜“æ ¼å¼æ£€æŸ¥ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2.æ•°å­—ç­¾åéªŒè¯ â”‚  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3.ä½™é¢å……è¶³æ£€æŸ¥ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4.åŒèŠ±æ£€æµ‹    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MySQLä¸­çš„ä¸€è‡´æ€§æ£€æŸ¥**ï¼š
```sql
-- æ£€æŸ¥åŒºå—é“¾å®Œæ•´æ€§
DELIMITER //
CREATE PROCEDURE CheckBlockchainIntegrity()
BEGIN
    DECLARE done INT DEFAULT 0;
    DECLARE current_block_number BIGINT;
    DECLARE current_hash VARCHAR(66);
    DECLARE expected_previous_hash VARCHAR(66);
    
    -- æ£€æŸ¥åŒºå—é“¾æ˜¯å¦è¿ç»­
    SELECT block_number, block_hash 
    INTO current_block_number, expected_previous_hash
    FROM blockchain_blocks 
    WHERE block_number = 0;
    
    -- é€å—éªŒè¯
    block_loop: LOOP
        SELECT block_number, block_hash, previous_hash
        INTO current_block_number, current_hash, expected_previous_hash
        FROM blockchain_blocks 
        WHERE block_number = current_block_number + 1;
        
        IF done THEN
            LEAVE block_loop;
        END IF;
        
        -- éªŒè¯å‰ååŒºå—å“ˆå¸Œè¿æ¥
        IF expected_previous_hash != current_hash THEN
            SIGNAL SQLSTATE '45000' 
            SET MESSAGE_TEXT = 'åŒºå—é“¾å®Œæ•´æ€§éªŒè¯å¤±è´¥';
        END IF;
    END LOOP;
END //
DELIMITER ;
```

---

## 2. ğŸ“œ æ™ºèƒ½åˆçº¦çŠ¶æ€å­˜å‚¨


### 2.1 ä»€ä¹ˆæ˜¯æ™ºèƒ½åˆçº¦çŠ¶æ€


**ç®€å•ç†è§£**ï¼šæ™ºèƒ½åˆçº¦å°±åƒä¸€ä¸ª**è‡ªåŠ¨æ‰§è¡Œçš„ç¨‹åº**ï¼Œå®ƒæœ‰è‡ªå·±çš„"è®°å¿†"ï¼ˆçŠ¶æ€ï¼‰ï¼Œä¼šæ ¹æ®æ¡ä»¶è‡ªåŠ¨æ‰§è¡Œæ“ä½œã€‚

```
æ™ºèƒ½åˆçº¦çŠ¶æ€ç¤ºä¾‹ï¼š
æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ä»£å¸åˆçº¦ï¼š

çŠ¶æ€å˜é‡ï¼š
â”œâ”€ totalSupply: 1000000      (æ€»å‘è¡Œé‡)
â”œâ”€ balances: {               (æ¯ä¸ªåœ°å€çš„ä½™é¢)
â”‚    "0x123...": 5000,
â”‚    "0x456...": 3000
â”‚  }
â””â”€ allowances: {             (æˆæƒé¢åº¦)
     "0x123..." -> "0x789...": 1000
   }
```

### 2.2 åˆçº¦çŠ¶æ€è¡¨è®¾è®¡


**æ™ºèƒ½åˆçº¦è¡¨**ï¼š
```sql
-- æ™ºèƒ½åˆçº¦åŸºç¡€ä¿¡æ¯è¡¨
CREATE TABLE `smart_contracts` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `contract_address` varchar(42) NOT NULL COMMENT 'åˆçº¦åœ°å€',
  `contract_name` varchar(100) DEFAULT NULL COMMENT 'åˆçº¦åç§°',
  `creator_address` varchar(42) NOT NULL COMMENT 'åˆ›å»ºè€…åœ°å€',
  `bytecode` longtext COMMENT 'åˆçº¦å­—èŠ‚ç ',
  `abi` longtext COMMENT 'åˆçº¦ABI',
  `deploy_block` bigint NOT NULL COMMENT 'éƒ¨ç½²åŒºå—',
  `deploy_tx_hash` varchar(66) NOT NULL COMMENT 'éƒ¨ç½²äº¤æ˜“å“ˆå¸Œ',
  `contract_type` varchar(50) DEFAULT 'CUSTOM' COMMENT 'åˆçº¦ç±»å‹',
  `status` tinyint DEFAULT 1 COMMENT 'çŠ¶æ€:1æ­£å¸¸,0ç¦ç”¨',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_contract_address` (`contract_address`)
) COMMENT='æ™ºèƒ½åˆçº¦ä¿¡æ¯è¡¨';
```

**åˆçº¦çŠ¶æ€å­˜å‚¨è¡¨**ï¼š
```sql
-- åˆçº¦çŠ¶æ€å˜é‡å­˜å‚¨è¡¨
CREATE TABLE `contract_states` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `contract_address` varchar(42) NOT NULL COMMENT 'åˆçº¦åœ°å€',
  `state_key` varchar(100) NOT NULL COMMENT 'çŠ¶æ€å˜é‡å',
  `state_value` longtext COMMENT 'çŠ¶æ€å€¼(JSONæ ¼å¼)',
  `data_type` varchar(50) DEFAULT 'string' COMMENT 'æ•°æ®ç±»å‹',
  `last_block` bigint NOT NULL COMMENT 'æœ€åæ›´æ–°åŒºå—',
  `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_contract_state` (`contract_address`, `state_key`),
  KEY `idx_last_block` (`last_block`)
) COMMENT='æ™ºèƒ½åˆçº¦çŠ¶æ€å­˜å‚¨è¡¨';
```

### 2.3 åˆçº¦äº‹ä»¶æ—¥å¿—å­˜å‚¨


**ä»€ä¹ˆæ˜¯åˆçº¦äº‹ä»¶**ï¼šå°±æ˜¯åˆçº¦æ‰§è¡Œæ—¶äº§ç”Ÿçš„"æ—¥å¿—è®°å½•"ï¼Œç±»ä¼¼äºç¨‹åºè¿è¡Œæ—¶çš„logè¾“å‡ºã€‚

```sql
-- åˆçº¦äº‹ä»¶æ—¥å¿—è¡¨
CREATE TABLE `contract_events` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `tx_hash` varchar(66) NOT NULL COMMENT 'äº¤æ˜“å“ˆå¸Œ',
  `contract_address` varchar(42) NOT NULL COMMENT 'åˆçº¦åœ°å€',
  `event_name` varchar(100) NOT NULL COMMENT 'äº‹ä»¶åç§°',
  `event_signature` varchar(100) NOT NULL COMMENT 'äº‹ä»¶ç­¾å',
  `block_number` bigint NOT NULL COMMENT 'åŒºå—å·',
  `log_index` int NOT NULL COMMENT 'æ—¥å¿—ç´¢å¼•',
  `event_data` longtext COMMENT 'äº‹ä»¶æ•°æ®(JSON)',
  `topics` longtext COMMENT 'äº‹ä»¶ä¸»é¢˜',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_tx_hash` (`tx_hash`),
  KEY `idx_contract_event` (`contract_address`, `event_name`),
  KEY `idx_block_number` (`block_number`)
) COMMENT='æ™ºèƒ½åˆçº¦äº‹ä»¶æ—¥å¿—è¡¨';
```

---

## 3. ğŸ”„ é“¾ä¸Šé“¾ä¸‹æ•°æ®åŒæ­¥


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦é“¾ä¸Šé“¾ä¸‹åŒæ­¥


**é—®é¢˜èƒŒæ™¯**ï¼šåŒºå—é“¾ä¸Šçš„æ•°æ®æŸ¥è¯¢å¾ˆæ…¢ï¼Œè€Œä¸”æˆæœ¬é«˜ã€‚æˆ‘ä»¬éœ€è¦æŠŠé‡è¦æ•°æ®**å¤åˆ¶**åˆ°MySQLä¸­ï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥è¯¢ã€‚

```
æ•°æ®åŒæ­¥çš„æ„ä¹‰ï¼š
é“¾ä¸Šæ•°æ®ï¼š               é“¾ä¸‹æ•°æ®ï¼š
â”œâ”€ æ•°æ®æƒå¨æ€§ âœ“          â”œâ”€ æŸ¥è¯¢é€Ÿåº¦å¿« âœ“
â”œâ”€ ä¸å¯ç¯¡æ”¹ âœ“            â”œâ”€ å­˜å‚¨æˆæœ¬ä½ âœ“  
â”œâ”€ æŸ¥è¯¢é€Ÿåº¦æ…¢ âœ—          â”œâ”€ å¤æ‚æŸ¥è¯¢æ”¯æŒ âœ“
â””â”€ æŸ¥è¯¢æˆæœ¬é«˜ âœ—          â””â”€ æ•°æ®å¯èƒ½å»¶è¿Ÿ âš ï¸
```

### 3.2 åŒæ­¥çŠ¶æ€ç®¡ç†è¡¨


```sql
-- åŒºå—é“¾åŒæ­¥çŠ¶æ€è¡¨
CREATE TABLE `blockchain_sync_status` (
  `id` int NOT NULL AUTO_INCREMENT,
  `chain_name` varchar(50) NOT NULL COMMENT 'é“¾åç§°',
  `latest_synced_block` bigint DEFAULT 0 COMMENT 'å·²åŒæ­¥çš„æœ€æ–°åŒºå—',
  `target_block` bigint DEFAULT 0 COMMENT 'ç›®æ ‡åŒºå—é«˜åº¦',
  `sync_status` varchar(20) DEFAULT 'SYNCING' COMMENT 'SYNCING,COMPLETED,ERROR',
  `error_message` text COMMENT 'é”™è¯¯ä¿¡æ¯',
  `last_sync_time` timestamp NULL COMMENT 'æœ€ååŒæ­¥æ—¶é—´',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_chain_name` (`chain_name`)
) COMMENT='åŒºå—é“¾æ•°æ®åŒæ­¥çŠ¶æ€è¡¨';
```

### 3.3 åŒæ­¥å¼‚å¸¸å¤„ç†


**åŒæ­¥å¤±è´¥çš„å¤„ç†æ–¹æ¡ˆ**ï¼š
```sql
-- åŒæ­¥å¼‚å¸¸è®°å½•è¡¨
CREATE TABLE `sync_error_logs` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `chain_name` varchar(50) NOT NULL COMMENT 'é“¾åç§°',
  `block_number` bigint NOT NULL COMMENT 'å‡ºé”™åŒºå—',
  `error_type` varchar(50) NOT NULL COMMENT 'é”™è¯¯ç±»å‹',
  `error_message` text COMMENT 'é”™è¯¯è¯¦æƒ…',
  `retry_count` int DEFAULT 0 COMMENT 'é‡è¯•æ¬¡æ•°',
  `resolved` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦å·²è§£å†³',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_chain_block` (`chain_name`, `block_number`),
  KEY `idx_resolved` (`resolved`)
) COMMENT='åŒæ­¥å¼‚å¸¸æ—¥å¿—è¡¨';
```

**åŒæ­¥ç›‘æ§æŸ¥è¯¢**ï¼š
```sql
-- æŸ¥çœ‹åŒæ­¥è¿›åº¦
SELECT 
    chain_name,
    latest_synced_block,
    target_block,
    ROUND((latest_synced_block / target_block) * 100, 2) AS sync_progress,
    sync_status,
    last_sync_time
FROM blockchain_sync_status;

-- æŸ¥çœ‹åŒæ­¥å»¶è¿Ÿæƒ…å†µ
SELECT 
    chain_name,
    (target_block - latest_synced_block) AS blocks_behind,
    TIMESTAMPDIFF(MINUTE, last_sync_time, NOW()) AS minutes_since_last_sync
FROM blockchain_sync_status
WHERE sync_status = 'SYNCING';
```

---

## 4. ğŸ’° æ•°å­—è´§å¸é’±åŒ…è®¾è®¡


### 4.1 ä»€ä¹ˆæ˜¯æ•°å­—è´§å¸é’±åŒ…


**ç®€å•ç†è§£**ï¼šæ•°å­—é’±åŒ…å°±åƒé“¶è¡Œè´¦æˆ·ï¼Œä½†å®ƒæ˜¯å»ä¸­å¿ƒåŒ–çš„ã€‚é’±åŒ…æœ¬èº«ä¸å­˜é’±ï¼Œè€Œæ˜¯å­˜å‚¨**è®¿é—®åŒºå—é“¾ä¸Šèµ„äº§çš„é’¥åŒ™**ã€‚

```
é’±åŒ…çš„ç»„æˆéƒ¨åˆ†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    é’±åŒ…åœ°å€      â”‚ â† åƒé“¶è¡Œè´¦å·ï¼Œå…¬å¼€çš„
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ç§é’¥        â”‚ â† åƒå¯†ç ï¼Œç»å¯¹ä¿å¯†
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    å…¬é’¥        â”‚ â† ç”¨äºéªŒè¯ç­¾å
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…³ç³»ï¼šç§é’¥ â†’ å…¬é’¥ â†’ é’±åŒ…åœ°å€
```

### 4.2 é’±åŒ…æ•°æ®è¡¨è®¾è®¡


**é’±åŒ…ä¿¡æ¯è¡¨**ï¼š
```sql
-- ç”¨æˆ·é’±åŒ…è¡¨
CREATE TABLE `user_wallets` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL COMMENT 'ç”¨æˆ·ID',
  `wallet_address` varchar(42) NOT NULL COMMENT 'é’±åŒ…åœ°å€',
  `wallet_name` varchar(100) DEFAULT NULL COMMENT 'é’±åŒ…åç§°',
  `wallet_type` varchar(20) DEFAULT 'HOT' COMMENT 'é’±åŒ…ç±»å‹:HOTçƒ­é’±åŒ…,COLDå†·é’±åŒ…',
  `encrypted_private_key` text COMMENT 'åŠ å¯†åçš„ç§é’¥',
  `public_key` varchar(130) DEFAULT NULL COMMENT 'å…¬é’¥',
  `derivation_path` varchar(100) DEFAULT NULL COMMENT 'HDé’±åŒ…æ´¾ç”Ÿè·¯å¾„',
  `balance_cache` decimal(36,18) DEFAULT 0 COMMENT 'ä½™é¢ç¼“å­˜',
  `last_balance_update` timestamp NULL COMMENT 'ä½™é¢æœ€åæ›´æ–°æ—¶é—´',
  `status` tinyint DEFAULT 1 COMMENT 'çŠ¶æ€:1æ­£å¸¸,0ç¦ç”¨',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_wallet_address` (`wallet_address`),
  KEY `idx_user_id` (`user_id`)
) COMMENT='ç”¨æˆ·é’±åŒ…è¡¨';
```

**é’±åŒ…ä½™é¢è¡¨**ï¼š
```sql
-- é’±åŒ…èµ„äº§ä½™é¢è¡¨
CREATE TABLE `wallet_balances` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `wallet_address` varchar(42) NOT NULL COMMENT 'é’±åŒ…åœ°å€',
  `token_address` varchar(42) DEFAULT '0x0' COMMENT 'ä»£å¸åˆçº¦åœ°å€,ETHä¸º0x0',
  `token_symbol` varchar(20) NOT NULL COMMENT 'ä»£å¸ç¬¦å·',
  `token_name` varchar(100) DEFAULT NULL COMMENT 'ä»£å¸åç§°',
  `balance` decimal(36,18) DEFAULT 0 COMMENT 'ä½™é¢',
  `locked_balance` decimal(36,18) DEFAULT 0 COMMENT 'é”å®šä½™é¢',
  `decimals` tinyint DEFAULT 18 COMMENT 'ä»£å¸ç²¾åº¦',
  `last_updated_block` bigint DEFAULT 0 COMMENT 'æœ€åæ›´æ–°åŒºå—',
  `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_wallet_token` (`wallet_address`, `token_address`),
  KEY `idx_token_symbol` (`token_symbol`)
) COMMENT='é’±åŒ…èµ„äº§ä½™é¢è¡¨';
```

### 4.3 é’±åŒ…å®‰å…¨è®¾è®¡


**ç§é’¥åŠ å¯†å­˜å‚¨**ï¼š
```sql
-- é’±åŒ…å®‰å…¨é…ç½®è¡¨
CREATE TABLE `wallet_security` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `wallet_address` varchar(42) NOT NULL COMMENT 'é’±åŒ…åœ°å€',
  `encryption_method` varchar(50) DEFAULT 'AES-256' COMMENT 'åŠ å¯†æ–¹å¼',
  `salt` varchar(100) NOT NULL COMMENT 'åŠ å¯†ç›å€¼',
  `password_hash` varchar(128) NOT NULL COMMENT 'å¯†ç å“ˆå¸Œ',
  `backup_phrase_encrypted` text COMMENT 'åŠ å¯†åŠ©è®°è¯',
  `two_fa_enabled` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦å¼€å¯åŒé‡è®¤è¯',
  `two_fa_secret` varchar(100) DEFAULT NULL COMMENT 'åŒé‡è®¤è¯å¯†é’¥',
  `last_password_change` timestamp NULL COMMENT 'æœ€åä¿®æ”¹å¯†ç æ—¶é—´',
  `login_attempts` int DEFAULT 0 COMMENT 'ç™»å½•å°è¯•æ¬¡æ•°',
  `locked_until` timestamp NULL COMMENT 'é”å®šåˆ°æœŸæ—¶é—´',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_wallet_address` (`wallet_address`)
) COMMENT='é’±åŒ…å®‰å…¨é…ç½®è¡¨';
```

> âš ï¸ **é‡è¦æé†’**ï¼šç§é’¥æ˜¯è®¿é—®é’±åŒ…èµ„äº§çš„å”¯ä¸€å‡­è¯ï¼Œå¿…é¡»é‡‡ç”¨å¼ºåŠ å¯†ç®—æ³•ä¿æŠ¤ï¼Œå»ºè®®ä½¿ç”¨ç¡¬ä»¶å®‰å…¨æ¨¡å—(HSM)å­˜å‚¨å…³é”®ä¿¡æ¯ã€‚

---

## 5. ğŸ†” å»ä¸­å¿ƒåŒ–èº«ä»½ç®¡ç†


### 5.1 ä»€ä¹ˆæ˜¯å»ä¸­å¿ƒåŒ–èº«ä»½ï¼ˆDIDï¼‰


**ä¼ ç»Ÿèº«ä»½ vs å»ä¸­å¿ƒåŒ–èº«ä»½**ï¼š

```
ä¼ ç»Ÿèº«ä»½ç®¡ç†ï¼š
ç”¨æˆ· â†’ æ³¨å†Œ â†’ ç¬¬ä¸‰æ–¹å¹³å° â†’ éªŒè¯èº«ä»½ â†’ ä½¿ç”¨æœåŠ¡
        â†“
   èº«ä»½è¢«å¹³å°æ§åˆ¶ï¼Œç”¨æˆ·æ²¡æœ‰è‡ªä¸»æƒ

å»ä¸­å¿ƒåŒ–èº«ä»½ï¼š
ç”¨æˆ· â†’ åˆ›å»ºDID â†’ åŒºå—é“¾è®°å½• â†’ è‡ªæˆ‘æ§åˆ¶ â†’ ä»»æ„æœåŠ¡éªŒè¯
        â†“
   ç”¨æˆ·å®Œå…¨æŒæ§è‡ªå·±çš„èº«ä»½æ•°æ®
```

**DIDçš„ç‰¹ç‚¹**ï¼š
- ğŸ”¸ **è‡ªä¸»æ§åˆ¶**ï¼šç”¨æˆ·å®Œå…¨æŒæ§è‡ªå·±çš„èº«ä»½
- ğŸ”¸ **å¯éªŒè¯**ï¼šèº«ä»½ä¿¡æ¯å¯ä»¥è¢«ç‹¬ç«‹éªŒè¯
- ğŸ”¸ **éšç§ä¿æŠ¤**ï¼šé€‰æ‹©æ€§æŠ«éœ²èº«ä»½ä¿¡æ¯
- ğŸ”¸ **è·¨å¹³å°**ï¼šä¸€ä¸ªèº«ä»½åœ¨å¤šä¸ªæœåŠ¡é—´é€šç”¨

### 5.2 DIDæ•°æ®è¡¨è®¾è®¡


**å»ä¸­å¿ƒåŒ–èº«ä»½è¡¨**ï¼š
```sql
-- DIDèº«ä»½è¡¨
CREATE TABLE `decentralized_identities` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `did` varchar(200) NOT NULL COMMENT 'DIDæ ‡è¯†ç¬¦',
  `did_document` longtext COMMENT 'DIDæ–‡æ¡£(JSONæ ¼å¼)',
  `controller` varchar(200) NOT NULL COMMENT 'æ§åˆ¶è€…DID',
  `public_keys` longtext COMMENT 'å…¬é’¥ä¿¡æ¯(JSONæ•°ç»„)',
  `services` longtext COMMENT 'æœåŠ¡ç«¯ç‚¹ä¿¡æ¯(JSONæ•°ç»„)',
  `proof` longtext COMMENT 'è¯æ˜ä¿¡æ¯',
  `version` int DEFAULT 1 COMMENT 'æ–‡æ¡£ç‰ˆæœ¬',
  `status` varchar(20) DEFAULT 'ACTIVE' COMMENT 'çŠ¶æ€:ACTIVE,REVOKED,DEACTIVATED',
  `created_block` bigint DEFAULT NULL COMMENT 'åˆ›å»ºåŒºå—',
  `updated_block` bigint DEFAULT NULL COMMENT 'æ›´æ–°åŒºå—',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_did` (`did`),
  KEY `idx_controller` (`controller`),
  KEY `idx_status` (`status`)
) COMMENT='å»ä¸­å¿ƒåŒ–èº«ä»½è¡¨';
```

**å¯éªŒè¯å‡­è¯è¡¨**ï¼š
```sql
-- å¯éªŒè¯å‡­è¯è¡¨ï¼ˆç±»ä¼¼äºæ•°å­—åŒ–çš„è¯ä¹¦ï¼‰
CREATE TABLE `verifiable_credentials` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `credential_id` varchar(200) NOT NULL COMMENT 'å‡­è¯ID',
  `issuer_did` varchar(200) NOT NULL COMMENT 'ç­¾å‘è€…DID',
  `subject_did` varchar(200) NOT NULL COMMENT 'æŒæœ‰è€…DID',
  `credential_type` varchar(100) NOT NULL COMMENT 'å‡­è¯ç±»å‹',
  `credential_data` longtext COMMENT 'å‡­è¯æ•°æ®(JSON)',
  `proof` longtext COMMENT 'æ•°å­—ç­¾åè¯æ˜',
  `issue_date` timestamp NOT NULL COMMENT 'ç­¾å‘æ—¥æœŸ',
  `expiry_date` timestamp DEFAULT NULL COMMENT 'è¿‡æœŸæ—¥æœŸ',
  `revoked` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦å·²æ’¤é”€',
  `revoke_date` timestamp DEFAULT NULL COMMENT 'æ’¤é”€æ—¥æœŸ',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_credential_id` (`credential_id`),
  KEY `idx_issuer_did` (`issuer_did`),
  KEY `idx_subject_did` (`subject_did`),
  KEY `idx_credential_type` (`credential_type`)
) COMMENT='å¯éªŒè¯å‡­è¯è¡¨';
```

### 5.3 èº«ä»½éªŒè¯è®°å½•


```sql
-- DIDè®¤è¯æ—¥å¿—è¡¨
CREATE TABLE `did_authentication_logs` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `did` varchar(200) NOT NULL COMMENT 'è®¤è¯çš„DID',
  `service_name` varchar(100) NOT NULL COMMENT 'æœåŠ¡åç§°',
  `challenge` varchar(200) NOT NULL COMMENT 'è®¤è¯æŒ‘æˆ˜',
  `signature` text NOT NULL COMMENT 'ç­¾åå“åº”',
  `auth_result` tinyint NOT NULL COMMENT 'è®¤è¯ç»“æœ:1æˆåŠŸ,0å¤±è´¥',
  `ip_address` varchar(45) DEFAULT NULL COMMENT 'IPåœ°å€',
  `user_agent` text COMMENT 'ç”¨æˆ·ä»£ç†',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_did` (`did`),
  KEY `idx_service_auth` (`service_name`, `auth_result`),
  KEY `idx_created_at` (`created_at`)
) COMMENT='DIDè®¤è¯æ—¥å¿—è¡¨';
```

---

## 6. ğŸ“Š åŒºå—é“¾å®¡è®¡è¿½è¸ª


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦å®¡è®¡è¿½è¸ª


**å®¡è®¡çš„æ„ä¹‰**ï¼šåœ¨é‡‘èç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ç¬”äº¤æ˜“éƒ½è¦èƒ½**è¿½æ ¹æº¯æº**ï¼Œç¡®ä¿åˆè§„æ€§å’Œé€æ˜åº¦ã€‚

```
å®¡è®¡è¿½è¸ªçš„ä»·å€¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åˆè§„è¦æ±‚      â”‚ â† é‡‘èç›‘ç®¡éƒ¨é—¨è¦æ±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   é£é™©æ§åˆ¶      â”‚ â† è¯†åˆ«å¼‚å¸¸äº¤æ˜“æ¨¡å¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   äº‰è®®è§£å†³      â”‚ â† äº¤æ˜“çº çº·æ—¶çš„è¯æ®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ€§èƒ½åˆ†æ      â”‚ â† ç³»ç»Ÿè¿è¡ŒçŠ¶å†µç›‘æ§
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å®¡è®¡æ•°æ®è¡¨è®¾è®¡


**äº¤æ˜“å®¡è®¡è¡¨**ï¼š
```sql
-- äº¤æ˜“å®¡è®¡è·Ÿè¸ªè¡¨
CREATE TABLE `transaction_audit_trail` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `audit_id` varchar(100) NOT NULL COMMENT 'å®¡è®¡è·Ÿè¸ªID',
  `tx_hash` varchar(66) NOT NULL COMMENT 'äº¤æ˜“å“ˆå¸Œ',
  `audit_type` varchar(50) NOT NULL COMMENT 'å®¡è®¡ç±»å‹',
  `from_address` varchar(42) NOT NULL COMMENT 'å‘èµ·åœ°å€',
  `to_address` varchar(42) NOT NULL COMMENT 'æ¥æ”¶åœ°å€',
  `amount` decimal(36,18) DEFAULT NULL COMMENT 'äº¤æ˜“é‡‘é¢',
  `token_symbol` varchar(20) DEFAULT NULL COMMENT 'ä»£å¸ç¬¦å·',
  `operation_type` varchar(50) NOT NULL COMMENT 'æ“ä½œç±»å‹',
  `business_context` longtext COMMENT 'ä¸šåŠ¡ä¸Šä¸‹æ–‡(JSON)',
  `risk_level` tinyint DEFAULT 0 COMMENT 'é£é™©ç­‰çº§:0ä½,1ä¸­,2é«˜',
  `compliance_status` varchar(20) DEFAULT 'PENDING' COMMENT 'åˆè§„çŠ¶æ€',
  `auditor_notes` text COMMENT 'å®¡è®¡å‘˜å¤‡æ³¨',
  `block_number` bigint NOT NULL COMMENT 'åŒºå—å·',
  `block_timestamp` bigint NOT NULL COMMENT 'åŒºå—æ—¶é—´æˆ³',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_audit_id` (`audit_id`),
  KEY `idx_tx_hash` (`tx_hash`),
  KEY `idx_from_to` (`from_address`, `to_address`),
  KEY `idx_risk_level` (`risk_level`),
  KEY `idx_compliance_status` (`compliance_status`)
) COMMENT='äº¤æ˜“å®¡è®¡è·Ÿè¸ªè¡¨';
```

**é£é™©ç›‘æ§è¡¨**ï¼š
```sql
-- é£é™©äº‹ä»¶ç›‘æ§è¡¨
CREATE TABLE `risk_monitoring_events` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `event_id` varchar(100) NOT NULL COMMENT 'äº‹ä»¶ID',
  `event_type` varchar(50) NOT NULL COMMENT 'äº‹ä»¶ç±»å‹',
  `severity` varchar(20) NOT NULL COMMENT 'ä¸¥é‡ç¨‹åº¦:LOW,MEDIUM,HIGH,CRITICAL',
  `address_involved` varchar(42) NOT NULL COMMENT 'æ¶‰åŠåœ°å€',
  `rule_triggered` varchar(100) NOT NULL COMMENT 'è§¦å‘çš„è§„åˆ™',
  `event_data` longtext COMMENT 'äº‹ä»¶è¯¦ç»†æ•°æ®',
  `auto_action` varchar(50) DEFAULT NULL COMMENT 'è‡ªåŠ¨å¤„ç†åŠ¨ä½œ',
  `manual_review` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦éœ€è¦äººå·¥å®¡æ ¸',
  `resolved` tinyint DEFAULT 0 COMMENT 'æ˜¯å¦å·²å¤„ç†',
  `resolver` varchar(100) DEFAULT NULL COMMENT 'å¤„ç†äºº',
  `resolution_notes` text COMMENT 'å¤„ç†è¯´æ˜',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  `resolved_at` timestamp DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_event_id` (`event_id`),
  KEY `idx_severity` (`severity`),
  KEY `idx_address` (`address_involved`),
  KEY `idx_resolved` (`resolved`)
) COMMENT='é£é™©äº‹ä»¶ç›‘æ§è¡¨';
```

### 6.3 å®¡è®¡æŸ¥è¯¢ç¤ºä¾‹


**èµ„é‡‘æµå‘è¿½è¸ª**ï¼š
```sql
-- è¿½è¸ªç‰¹å®šåœ°å€çš„èµ„é‡‘æµå‘
WITH RECURSIVE money_flow AS (
  -- èµ·å§‹äº¤æ˜“
  SELECT 
    tx_hash, from_address, to_address, amount, 
    block_number, 1 as level
  FROM transaction_audit_trail 
  WHERE from_address = '0x1234567890123456789012345678901234567890'
  
  UNION ALL
  
  -- é€’å½’æŸ¥æ‰¾ä¸‹çº§äº¤æ˜“
  SELECT 
    t.tx_hash, t.from_address, t.to_address, t.amount,
    t.block_number, mf.level + 1
  FROM transaction_audit_trail t
  JOIN money_flow mf ON t.from_address = mf.to_address
  WHERE mf.level < 5  -- é™åˆ¶è¿½è¸ªå±‚æ•°
)
SELECT 
  CONCAT(REPEAT('  ', level-1), 'â†’ ') as flow_level,
  from_address,
  to_address,
  amount,
  block_number
FROM money_flow
ORDER BY level, block_number;
```

---

## 7. ğŸŒ‰ è·¨é“¾æ•°æ®äº¤äº’


### 7.1 ä»€ä¹ˆæ˜¯è·¨é“¾äº¤äº’


**ç®€å•ç†è§£**ï¼šè·¨é“¾å°±åƒ**ä¸åŒé“¶è¡Œé—´çš„è½¬è´¦**ï¼Œéœ€è¦ç‰¹æ®Šçš„åè®®æ¥ç¡®ä¿èµ„äº§èƒ½åœ¨ä¸åŒåŒºå—é“¾ä¹‹é—´å®‰å…¨æµåŠ¨ã€‚

```
è·¨é“¾åœºæ™¯ä¸¾ä¾‹ï¼š
ä»¥å¤ªåŠ â†â”€â”€â†’ å¸å®‰æ™ºèƒ½é“¾ â†â”€â”€â†’ æ³¢å¡é“¾
   â”‚              â”‚              â”‚
BTCæ˜ å°„        USDTæµåŠ¨      DOTè´¨æŠ¼
   â†“              â†“              â†“
éœ€è¦è·¨é“¾æ¡¥    éœ€è¦åŸå­äº¤æ¢   éœ€è¦ä¸­ç»§é“¾
```

### 7.2 è·¨é“¾æ•°æ®è¡¨è®¾è®¡


**è·¨é“¾æ¡¥æ¥è®°å½•è¡¨**ï¼š
```sql
-- è·¨é“¾æ¡¥æ¥äº¤æ˜“è¡¨
CREATE TABLE `cross_chain_transactions` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `bridge_tx_id` varchar(100) NOT NULL COMMENT 'è·¨é“¾äº¤æ˜“ID',
  `source_chain` varchar(50) NOT NULL COMMENT 'æºé“¾åç§°',
  `target_chain` varchar(50) NOT NULL COMMENT 'ç›®æ ‡é“¾åç§°',
  `source_tx_hash` varchar(66) NOT NULL COMMENT 'æºé“¾äº¤æ˜“å“ˆå¸Œ',
  `target_tx_hash` varchar(66) DEFAULT NULL COMMENT 'ç›®æ ‡é“¾äº¤æ˜“å“ˆå¸Œ',
  `source_address` varchar(42) NOT NULL COMMENT 'æºåœ°å€',
  `target_address` varchar(42) NOT NULL COMMENT 'ç›®æ ‡åœ°å€',
  `token_symbol` varchar(20) NOT NULL COMMENT 'ä»£å¸ç¬¦å·',
  `amount` decimal(36,18) NOT NULL COMMENT 'è½¬ç§»æ•°é‡',
  `bridge_fee` decimal(36,18) DEFAULT 0 COMMENT 'æ¡¥æ¥æ‰‹ç»­è´¹',
  `status` varchar(20) DEFAULT 'PENDING' COMMENT 'çŠ¶æ€',
  `confirmations` int DEFAULT 0 COMMENT 'ç¡®è®¤æ•°',
  `required_confirmations` int DEFAULT 12 COMMENT 'æ‰€éœ€ç¡®è®¤æ•°',
  `initiated_at` timestamp NOT NULL COMMENT 'å‘èµ·æ—¶é—´',
  `completed_at` timestamp DEFAULT NULL COMMENT 'å®Œæˆæ—¶é—´',
  `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_bridge_tx_id` (`bridge_tx_id`),
  KEY `idx_source_chain` (`source_chain`),
  KEY `idx_target_chain` (`target_chain`),
  KEY `idx_status` (`status`)
) COMMENT='è·¨é“¾æ¡¥æ¥äº¤æ˜“è¡¨';
```

### 7.3 è·¨é“¾çŠ¶æ€ç›‘æ§


```sql
-- è·¨é“¾æ¡¥çŠ¶æ€ç›‘æ§è¡¨
CREATE TABLE `bridge_monitoring` (
  `id` int NOT NULL AUTO_INCREMENT,
  `bridge_name` varchar(50) NOT NULL COMMENT 'è·¨é“¾æ¡¥åç§°',
  `source_chain` varchar(50) NOT NULL COMMENT 'æºé“¾',
  `target_chain` varchar(50) NOT NULL COMMENT 'ç›®æ ‡é“¾',
  `total_locked` decimal(36,18) DEFAULT 0 COMMENT 'é”å®šæ€»é‡',
  `total_minted` decimal(36,18) DEFAULT 0 COMMENT 'é“¸é€ æ€»é‡',
  `daily_volume` decimal(36,18) DEFAULT 0 COMMENT 'æ—¥äº¤æ˜“é‡',
  `success_rate` decimal(5,2) DEFAULT 0 COMMENT 'æˆåŠŸç‡',
  `avg_completion_time` int DEFAULT 0 COMMENT 'å¹³å‡å®Œæˆæ—¶é—´(ç§’)',
  `bridge_status` varchar(20) DEFAULT 'ACTIVE' COMMENT 'æ¡¥çŠ¶æ€',
  `last_update` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_bridge_chains` (`bridge_name`, `source_chain`, `target_chain`)
) COMMENT='è·¨é“¾æ¡¥çŠ¶æ€ç›‘æ§è¡¨';
```

---

## 8. âš¡ æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ


### 8.1 æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–


**å¸¸è§æ€§èƒ½é—®é¢˜**ï¼š
- ğŸ”¸ åŒºå—é“¾æ•°æ®é‡å·¨å¤§ï¼ŒæŸ¥è¯¢ç¼“æ…¢
- ğŸ”¸ å®æ—¶æ•°æ®åŒæ­¥å‹åŠ›å¤§
- ğŸ”¸ å¤æ‚å…³è”æŸ¥è¯¢è€—æ—¶é•¿

**ä¼˜åŒ–ç­–ç•¥**ï¼š

```sql
-- 1. åˆ›å»ºåˆé€‚çš„ç´¢å¼•
-- é’ˆå¯¹äº¤æ˜“æŸ¥è¯¢çš„å¤åˆç´¢å¼•
CREATE INDEX idx_tx_block_time ON blockchain_transactions (block_number, timestamp, tx_status);

-- é’ˆå¯¹åœ°å€æŸ¥è¯¢çš„ç´¢å¼•
CREATE INDEX idx_address_time ON blockchain_transactions (from_address, timestamp);
CREATE INDEX idx_to_address_time ON blockchain_transactions (to_address, timestamp);

-- 2. åˆ†åŒºè¡¨è®¾è®¡ï¼ˆæŒ‰æ—¶é—´åˆ†åŒºï¼‰
ALTER TABLE blockchain_transactions
PARTITION BY RANGE (UNIX_TIMESTAMP(created_at)) (
  PARTITION p2024_01 VALUES LESS THAN (UNIX_TIMESTAMP('2024-02-01')),
  PARTITION p2024_02 VALUES LESS THAN (UNIX_TIMESTAMP('2024-03-01')),
  PARTITION p2024_03 VALUES LESS THAN (UNIX_TIMESTAMP('2024-04-01'))
  -- ... ç»§ç»­æŒ‰æœˆåˆ†åŒº
);
```

### 8.2 æ•°æ®å½’æ¡£ç­–ç•¥


```sql
-- å†å²æ•°æ®å½’æ¡£è¡¨
CREATE TABLE `blockchain_transactions_archive` (
  -- ä¸ä¸»è¡¨ç»“æ„ç›¸åŒ
  `id` bigint NOT NULL,
  `tx_hash` varchar(66) NOT NULL,
  -- ... å…¶ä»–å­—æ®µ
  `archived_at` timestamp DEFAULT CURRENT_TIMESTAMP
) COMMENT='åŒºå—é“¾äº¤æ˜“å†å²å½’æ¡£è¡¨';

-- å½’æ¡£å­˜å‚¨è¿‡ç¨‹
DELIMITER //
CREATE PROCEDURE ArchiveOldTransactions()
BEGIN
    DECLARE done INT DEFAULT 0;
    DECLARE archive_date DATE;
    
    -- å½’æ¡£90å¤©å‰çš„æ•°æ®
    SET archive_date = DATE_SUB(CURDATE(), INTERVAL 90 DAY);
    
    -- ç§»åŠ¨æ•°æ®åˆ°å½’æ¡£è¡¨
    INSERT INTO blockchain_transactions_archive 
    SELECT *, NOW() as archived_at
    FROM blockchain_transactions 
    WHERE DATE(created_at) < archive_date;
    
    -- åˆ é™¤å·²å½’æ¡£çš„æ•°æ®
    DELETE FROM blockchain_transactions 
    WHERE DATE(created_at) < archive_date;
END //
DELIMITER ;
```

### 8.3 ç¼“å­˜ç­–ç•¥è®¾è®¡


**Redisç¼“å­˜è®¾è®¡**ï¼š
```sql
-- ç¼“å­˜é…ç½®è¡¨
CREATE TABLE `cache_strategies` (
  `id` int NOT NULL AUTO_INCREMENT,
  `cache_key_pattern` varchar(100) NOT NULL COMMENT 'ç¼“å­˜é”®æ¨¡å¼',
  `cache_type` varchar(20) NOT NULL COMMENT 'ç¼“å­˜ç±»å‹',
  `ttl_seconds` int DEFAULT 300 COMMENT 'ç¼“å­˜æ—¶é—´(ç§’)',
  `refresh_strategy` varchar(20) DEFAULT 'LAZY' COMMENT 'åˆ·æ–°ç­–ç•¥',
  `enabled` tinyint DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_cache_pattern` (`cache_key_pattern`)
) COMMENT='ç¼“å­˜ç­–ç•¥é…ç½®è¡¨';

-- æ’å…¥å¸¸ç”¨ç¼“å­˜é…ç½®
INSERT INTO cache_strategies VALUES 
(1, 'balance:*', 'HASH', 60, 'EAGER', 1),
(2, 'tx:*', 'STRING', 3600, 'LAZY', 1),
(3, 'block:*', 'STRING', 1800, 'LAZY', 1);
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åŒºå—é“¾æ•°æ®ç»“æ„ï¼šé“¾å¼å­˜å‚¨ï¼Œä¸å¯ç¯¡æ”¹ï¼Œåˆ†å¸ƒå¼ç‰¹æ€§
ğŸ”¸ æ™ºèƒ½åˆçº¦çŠ¶æ€ï¼šç¨‹åºåŒ–æ‰§è¡Œï¼ŒçŠ¶æ€æŒä¹…åŒ–å­˜å‚¨
ğŸ”¸ é“¾ä¸Šé“¾ä¸‹åŒæ­¥ï¼šæ•°æ®å¤åˆ¶ï¼Œæ€§èƒ½ä¸æƒå¨æ€§å¹³è¡¡
ğŸ”¸ æ•°å­—é’±åŒ…è®¾è®¡ï¼šç§é’¥ç®¡ç†ï¼Œèµ„äº§å®‰å…¨ï¼Œå¤šå¸ç§æ”¯æŒ
ğŸ”¸ å»ä¸­å¿ƒåŒ–èº«ä»½ï¼šç”¨æˆ·è‡ªä¸»ï¼Œå¯éªŒè¯å‡­è¯ï¼Œéšç§ä¿æŠ¤
ğŸ”¸ å®¡è®¡è¿½è¸ªï¼šåˆè§„è¦æ±‚ï¼Œé£é™©æ§åˆ¶ï¼Œå®Œæ•´è®°å½•
ğŸ”¸ è·¨é“¾äº¤äº’ï¼šå¤šé“¾åä½œï¼Œèµ„äº§æµåŠ¨ï¼Œæ¡¥æ¥æœºåˆ¶
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šç´¢å¼•è®¾è®¡ï¼Œæ•°æ®åˆ†åŒºï¼Œç¼“å­˜ç­–ç•¥
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ åŒºå—é“¾æ•°æ®çš„ç‰¹æ®Šæ€§**
- æ•°æ®ä¸€æ—¦å†™å…¥æ— æ³•ä¿®æ”¹ï¼Œè®¾è®¡æ—¶è¦è€ƒè™‘æ‰©å±•æ€§
- æŸ¥è¯¢æˆæœ¬é«˜ï¼Œéœ€è¦é“¾ä¸‹æ•°æ®åº“é…åˆ
- æ•°æ®é€æ˜æ€§å¼ºï¼Œéšç§ä¿æŠ¤éœ€è¦ç‰¹æ®Šè®¾è®¡

**ğŸ”¹ é‡‘èç³»ç»Ÿçš„ä¸¥æ ¼è¦æ±‚**
- æ¯ç¬”äº¤æ˜“éƒ½è¦å¯è¿½æº¯
- ç³»ç»Ÿå®‰å…¨æ€§è¦æ±‚æé«˜
- åˆè§„æ€§æ˜¯ç¡¬æ€§è¦æ±‚

**ğŸ”¹ æ€§èƒ½ä¸å®‰å…¨çš„æƒè¡¡**
- çƒ­é’±åŒ…æ–¹ä¾¿ä½†é£é™©é«˜
- å†·é’±åŒ…å®‰å…¨ä½†ä½¿ç”¨ä¸ä¾¿
- é“¾ä¸Šæ•°æ®æƒå¨ä½†æŸ¥è¯¢æ…¢
- é“¾ä¸‹æ•°æ®å¿«é€Ÿä½†éœ€è¦åŒæ­¥

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¸šåŠ¡åº”ç”¨åœºæ™¯**
- **æ•°å­—èµ„äº§ç®¡ç†**ï¼šå¤šå¸ç§é’±åŒ…ï¼Œèµ„äº§è·¨é“¾è½¬ç§»
- **ä¾›åº”é“¾é‡‘è**ï¼šå•†å“æº¯æºï¼Œè´¸æ˜“èèµ„
- **æ•°å­—èº«ä»½è®¤è¯**ï¼šKYCéªŒè¯ï¼Œä¿¡ç”¨è¯„ä¼°
- **å»ä¸­å¿ƒåŒ–é‡‘è**ï¼šå€Ÿè´·åè®®ï¼ŒæµåŠ¨æ€§æŒ–çŸ¿

**ğŸ”§ æŠ€æœ¯å®è·µè¦ç‚¹**
- æ•°æ®åº“è®¾è®¡è¦è€ƒè™‘åŒºå—é“¾çš„ç‰¹æ®Šæ€§
- å®‰å…¨è®¾è®¡æ˜¯é‡ä¸­ä¹‹é‡ï¼Œä¸èƒ½æœ‰ä»»ä½•ç–æ¼
- æ€§èƒ½ä¼˜åŒ–è¦ä»ç´¢å¼•ã€åˆ†åŒºã€ç¼“å­˜å¤šç»´åº¦è€ƒè™‘
- ç›‘æ§å’Œå®¡è®¡æ˜¯ç³»ç»Ÿç¨³å®šè¿è¡Œçš„ä¿éšœ

### 9.4 å‘å±•è¶‹åŠ¿å±•æœ›


```
ğŸš€ æŠ€æœ¯å‘å±•æ–¹å‘ï¼š
â”œâ”€ Layer2è§£å†³æ–¹æ¡ˆ â†’ æå‡åŒºå—é“¾æ€§èƒ½
â”œâ”€ è·¨é“¾åè®®æ ‡å‡†åŒ– â†’ å®ç°çœŸæ­£çš„äº’æ“ä½œæ€§  
â”œâ”€ éšç§ä¿æŠ¤æŠ€æœ¯ â†’ é›¶çŸ¥è¯†è¯æ˜åº”ç”¨
â”œâ”€ ç›‘ç®¡ç§‘æŠ€èåˆ â†’ åˆè§„è‡ªåŠ¨åŒ–
â””â”€ AIæ™ºèƒ½é£æ§ â†’ å¼‚å¸¸æ£€æµ‹å’Œé¢„è­¦
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- åŒºå—é“¾é‡‘èä¸æ˜¯ä¼ ç»Ÿé‡‘èçš„ç®€å•æ•°å­—åŒ–
- æ•°æ®è®¾è®¡è¦åŒæ—¶è€ƒè™‘é“¾ä¸Šå’Œé“¾ä¸‹çš„ç‰¹ç‚¹
- å®‰å…¨æ€§æ°¸è¿œæ˜¯ç¬¬ä¸€ä½çš„ï¼Œå…¶æ¬¡æ‰æ˜¯æ€§èƒ½
- åˆè§„å’Œå®¡è®¡æ˜¯é‡‘èç³»ç»Ÿä¸å¯ç¼ºå°‘çš„ç»„æˆéƒ¨åˆ†
- æŠ€æœ¯åœ¨å¿«é€Ÿå‘å±•ï¼Œè®¾è®¡è¦æœ‰å‰ç»æ€§å’Œæ‰©å±•æ€§