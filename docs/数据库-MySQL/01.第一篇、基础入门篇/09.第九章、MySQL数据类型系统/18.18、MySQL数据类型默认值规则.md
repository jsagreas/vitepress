---
title: 18、MySQL数据类型默认值规则
---
## 📚 目录

1. [数据类型默认值概述](#1-数据类型默认值概述)
2. [数值类型默认值规则](#2-数值类型默认值规则)
3. [字符串类型默认值规则](#3-字符串类型默认值规则)
4. [日期时间类型默认值规则](#4-日期时间类型默认值规则)
5. [NOT NULL字段默认值处理](#5-not-null字段默认值处理)
6. [TIMESTAMP特殊默认值行为](#6-timestamp特殊默认值行为)
7. [默认值设置最佳实践](#7-默认值设置最佳实践)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 数据类型默认值概述


### 1.1 什么是默认值


**简单理解**：默认值就像表格中的"预填信息"，当你不填写某个字段时，MySQL自动帮你填入的值

```
生活中的例子：
注册表单中，"国家"字段默认值是"中国"
如果用户不选择，系统自动使用"中国"

MySQL中的例子：
CREATE TABLE users (
    id INT AUTO_INCREMENT,
    name VARCHAR(50),
    age INT DEFAULT 18,        ← 默认值是18
    status VARCHAR(10) DEFAULT 'active'  ← 默认值是'active'
);
```

### 1.2 默认值的作用


**为什么需要默认值？**
- 🎯 **简化插入**：不用为每个字段都指定值
- 🎯 **保证数据完整性**：避免重要字段为空
- 🎯 **提高开发效率**：减少重复的数据填写
- 🎯 **业务逻辑支持**：体现常见的业务场景

**插入数据时的行为**：
```sql
-- 不指定age和status字段
INSERT INTO users (name) VALUES ('张三');

-- 实际插入的数据：
-- name: '张三', age: 18, status: 'active'
```

### 1.3 默认值的类型


**🔑 数据类型默认值体系**

MySQL的默认值分为两大类：
```
显式默认值：
CREATE TABLE test (
    name VARCHAR(50) DEFAULT '匿名用户',  ← 明确指定默认值
    age INT DEFAULT 0                   ← 明确指定默认值  
);

隐式默认值：
CREATE TABLE test (
    name VARCHAR(50),    ← 没有指定默认值，MySQL自动分配
    age INT              ← 没有指定默认值，MySQL自动分配
);
```

---

## 2. 🔢 数值类型默认值规则


### 2.1 整数类型默认值


**🔥 数值类型默认值0**

**基本规则**：所有数值类型的隐式默认值都是`0`

```sql
-- 整数类型默认值
CREATE TABLE number_test (
    tiny_col TINYINT,        -- 默认值：0
    small_col SMALLINT,      -- 默认值：0
    medium_col MEDIUMINT,    -- 默认值：0
    int_col INT,             -- 默认值：0
    big_col BIGINT          -- 默认值：0
);

-- 插入测试
INSERT INTO number_test () VALUES ();

-- 查看结果：所有字段都是0
SELECT * FROM number_test;
```

### 2.2 浮点数类型默认值


**小数类型的默认值处理**：
```sql
CREATE TABLE float_test (
    float_col FLOAT,         -- 默认值：0
    double_col DOUBLE,       -- 默认值：0  
    decimal_col DECIMAL(10,2) -- 默认值：0.00
);

-- 插入空记录
INSERT INTO float_test () VALUES ();

-- 结果展示
```

| 字段类型 | 默认值显示 | 说明 |
|----------|-----------|------|
| FLOAT | 0 | 浮点数的零值 |
| DOUBLE | 0 | 双精度浮点数的零值 |
| DECIMAL(10,2) | 0.00 | 按照精度显示的零值 |

### 2.3 特殊数值类型


**BIT类型默认值**：
```sql
CREATE TABLE bit_test (
    flag BIT(1),           -- 默认值：b'0' (二进制0)
    status BIT(8)          -- 默认值：b'00000000'
);
```

**UNSIGNED属性的影响**：
```sql
CREATE TABLE unsigned_test (
    normal_int INT,                    -- 默认值：0
    unsigned_int INT UNSIGNED         -- 默认值：0
);

-- UNSIGNED不影响默认值，仍然是0
```

> 📌 **记忆要点**  
> 数值类型默认值记住一个字：**零**！无论什么数值类型，默认都是0

---

## 3. 📝 字符串类型默认值规则


### 3.1 基本字符串类型默认值


**🔥 字符串类型默认值空串**

**核心规则**：字符串类型的隐式默认值是**空字符串**（不是NULL）

```sql
-- 字符串类型默认值测试
CREATE TABLE string_test (
    char_col CHAR(10),       -- 默认值：'' (空字符串)
    varchar_col VARCHAR(50), -- 默认值：'' (空字符串)
    text_col TEXT,           -- 默认值：'' (空字符串)
    blob_col BLOB           -- 默认值：'' (空字符串)
);

-- 插入空记录
INSERT INTO string_test () VALUES ();

-- 查看结果
SELECT 
    char_col,
    varchar_col,
    LENGTH(char_col) as char_len,        -- 长度：0
    LENGTH(varchar_col) as varchar_len   -- 长度：0
FROM string_test;
```

### 3.2 字符集对默认值的影响


**不同字符集的空串**：
```sql
-- 不同字符集的表
CREATE TABLE charset_test (
    utf8_col VARCHAR(50) CHARACTER SET utf8mb4,    -- 默认值：''
    latin1_col VARCHAR(50) CHARACTER SET latin1    -- 默认值：''
);

-- 空字符串在不同字符集中都是相同的
-- 占用存储空间都是0字节
```

### 3.3 TEXT和BLOB类型


**大对象类型的默认值**：
```sql
CREATE TABLE large_object_test (
    tiny_text TINYTEXT,      -- 默认值：''
    text_col TEXT,           -- 默认值：''
    medium_text MEDIUMTEXT,  -- 默认值：''
    long_text LONGTEXT,      -- 默认值：''
    tiny_blob TINYBLOB,      -- 默认值：''
    blob_col BLOB,           -- 默认值：''
    medium_blob MEDIUMBLOB,  -- 默认值：''
    long_blob LONGBLOB      -- 默认值：''
);
```

> 💡 **理解要点**  
> 字符串默认值是**空字符串**而不是**NULL**，空字符串是有值的（只是值为空），NULL是没有值

---

## 4. 📅 日期时间类型默认值规则


### 4.1 基本日期类型默认值


**🔥 日期类型默认值零值**

**核心概念**：日期时间类型的默认值是各自的"零值"，类似于数值类型的0

```sql
-- 日期时间类型默认值
CREATE TABLE datetime_test (
    date_col DATE,           -- 默认值：'0000-00-00'
    time_col TIME,           -- 默认值：'00:00:00'
    datetime_col DATETIME,   -- 默认值：'0000-00-00 00:00:00'
    year_col YEAR           -- 默认值：0000
);

-- 插入空记录
INSERT INTO datetime_test () VALUES ();

-- 查看结果
SELECT * FROM datetime_test;
```

**各类型零值对照表**：
| 数据类型 | 零值显示 | 含义 |
|----------|----------|------|
| DATE | '0000-00-00' | 表示"无效日期" |
| TIME | '00:00:00' | 表示0点0分0秒 |
| DATETIME | '0000-00-00 00:00:00' | 表示"无效日期时间" |
| YEAR | 0000 | 表示"无效年份" |

### 4.2 零值的实际意义


**零值不等于NULL**：
```sql
-- 零值和NULL的区别
SELECT 
    '0000-00-00' IS NULL,           -- 结果：0 (FALSE)
    '0000-00-00' = '',              -- 结果：0 (FALSE)
    LENGTH('0000-00-00')            -- 结果：10 (有长度)
;

-- 零值是一个特殊的有效值，表示"未设置的日期"
```

### 4.3 日期类型的实际应用


**零值在业务中的应用**：
```sql
-- 用户注册表
CREATE TABLE user_profile (
    user_id INT PRIMARY KEY,
    username VARCHAR(50),
    birthday DATE,                    -- 默认'0000-00-00'
    last_login DATETIME              -- 默认'0000-00-00 00:00:00'
);

-- 查询从未登录的用户
SELECT username FROM user_profile 
WHERE last_login = '0000-00-00 00:00:00';
```

> ⚠️ **注意事项**  
> MySQL 5.7+默认启用严格模式，零值可能被拒绝。建议明确设置合理的默认值

---

## 5. 🚫 NOT NULL字段默认值处理


### 5.1 NOT NULL约束的含义


**🔥 NOT NULL字段默认值处理**

**简单理解**：NOT NULL就像"必填项"，这个字段必须有值，不能留空

```sql
-- NOT NULL字段的默认值设置
CREATE TABLE required_fields (
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL DEFAULT '匿名用户',  -- 显式默认值
    email VARCHAR(100) NOT NULL,                   -- 没有默认值
    age INT NOT NULL DEFAULT 0,                    -- 显式默认值
    create_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

### 5.2 NOT NULL字段的插入行为


**不同情况下的行为对比**：

```sql
-- 情况1：指定了默认值的NOT NULL字段
INSERT INTO required_fields (email) VALUES ('test@example.com');
-- 结果：name使用默认值'匿名用户'，age使用默认值0

-- 情况2：没有默认值的NOT NULL字段
INSERT INTO required_fields (name) VALUES ('张三');
-- 结果：ERROR! email字段是NOT NULL但没有默认值
```

**NOT NULL字段默认值规则总结**：

| 情况 | 行为 | 结果 |
|------|------|------|
| NOT NULL + DEFAULT | 使用指定的默认值 | ✅ 插入成功 |
| NOT NULL + 无DEFAULT | 必须显式提供值 | ❌ 插入失败 |
| 允许NULL + DEFAULT | 使用指定的默认值 | ✅ 插入成功 |
| 允许NULL + 无DEFAULT | 使用隐式默认值或NULL | ✅ 插入成功 |

### 5.3 严格模式对默认值的影响


**MySQL严格模式的影响**：
```sql
-- 查看当前SQL模式
SELECT $$sql_mode;

-- 严格模式下的行为
SET sql_mode = 'STRICT_TRANS_TABLES';

-- 非严格模式下的行为  
SET sql_mode = '';
```

**模式差异对比**：
```sql
CREATE TABLE strict_test (
    id INT NOT NULL,
    name VARCHAR(50) NOT NULL
);

-- 严格模式下：
INSERT INTO strict_test () VALUES ();
-- 结果：ERROR 1364 - Field 'id' doesn't have a default value

-- 非严格模式下：
INSERT INTO strict_test () VALUES ();  
-- 结果：插入成功，id=0, name=''
```

> 📌 **重要理解**  
> 严格模式下，NOT NULL字段没有默认值时会报错；非严格模式下会自动使用隐式默认值

---

## 6. ⏰ TIMESTAMP特殊默认值行为


### 6.1 TIMESTAMP的特殊性


**🔥 TIMESTAMP特殊默认值行为**

**为什么TIMESTAMP特殊？**
TIMESTAMP类型有自己独特的默认值规则，与其他日期类型不同

```sql
-- TIMESTAMP的特殊行为
CREATE TABLE timestamp_test (
    id INT AUTO_INCREMENT PRIMARY KEY,
    created_at TIMESTAMP,                    -- 第一个TIMESTAMP字段
    updated_at TIMESTAMP,                    -- 第二个TIMESTAMP字段
    other_time TIMESTAMP                     -- 其他TIMESTAMP字段
);
```

**自动默认值规则**：
- 🔸 **第一个TIMESTAMP字段**：自动设置 `DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`
- 🔸 **其他TIMESTAMP字段**：默认值为 `'0000-00-00 00:00:00'`

### 6.2 TIMESTAMP自动更新机制


**自动时间戳的工作原理**：
```sql
-- 完整的TIMESTAMP配置示例
CREATE TABLE auto_timestamp (
    id INT PRIMARY KEY,
    content TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,                    -- 创建时自动设置
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP  -- 更新时自动修改
);

-- 插入数据
INSERT INTO auto_timestamp (id, content) VALUES (1, '第一条记录');
-- created_at 和 updated_at 都自动设置为当前时间

-- 更新数据  
UPDATE auto_timestamp SET content = '修改后的记录' WHERE id = 1;
-- updated_at 自动更新为当前时间，created_at 保持不变
```

### 6.3 控制TIMESTAMP行为


**禁用自动行为**：
```sql
-- 禁用自动时间戳行为
SET sql_mode = 'NO_ZERO_DATE';

CREATE TABLE manual_timestamp (
    id INT PRIMARY KEY,
    created_at TIMESTAMP NULL DEFAULT NULL,     -- 明确设置为NULL
    updated_at TIMESTAMP DEFAULT '2025-01-01 00:00:00'  -- 明确设置固定默认值
);
```

**TIMESTAMP行为对比**：

| 配置方式 | 插入时行为 | 更新时行为 | 适用场景 |
|----------|-----------|-----------|----------|
| `DEFAULT CURRENT_TIMESTAMP` | 自动设置当前时间 | 保持不变 | 记录创建时间 |
| `ON UPDATE CURRENT_TIMESTAMP` | 需要手动设置 | 自动更新当前时间 | 记录最后修改时间 |
| `DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | 自动设置当前时间 | 自动更新当前时间 | 同时记录创建和修改时间 |
| `DEFAULT NULL` | 设置为NULL | 保持不变 | 可选的时间字段 |

> 💡 **实用技巧**  
> 实际开发中，创建时间用 `DEFAULT CURRENT_TIMESTAMP`，更新时间用 `DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`

---

## 7. 🔧 默认值设置最佳实践


### 7.1 合理的默认值设计


**🔑 默认值设置基本规则**

**选择默认值的原则**：
- 🎯 **业务合理性**：默认值要符合业务逻辑
- 🎯 **数据完整性**：避免无意义的空值
- 🎯 **性能考虑**：避免复杂的默认值计算
- 🎯 **维护简便**：默认值应该易于理解和维护

### 7.2 常见默认值设计模式


**用户表的最佳实践**：
```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,                           -- 必填，不设默认值
    email VARCHAR(100) NOT NULL,                             -- 必填，不设默认值
    nickname VARCHAR(50) DEFAULT '新用户',                    -- 有意义的默认值
    age INT DEFAULT 0,                                       -- 数值默认值
    gender ENUM('男', '女', '未知') DEFAULT '未知',            -- 枚举默认值
    status ENUM('active', 'inactive') DEFAULT 'active',      -- 状态默认值
    avatar VARCHAR(255) DEFAULT '/default/avatar.jpg',       -- 默认头像
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,          -- 创建时间
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  -- 更新时间
    is_deleted BOOLEAN DEFAULT FALSE                         -- 软删除标记
);
```

### 7.3 特殊默认值处理方法


**🔑 特殊默认值处理方法**

**函数作为默认值**：
```sql
-- 支持的函数默认值
CREATE TABLE function_defaults (
    id INT AUTO_INCREMENT PRIMARY KEY,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,         -- 当前时间
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    uuid_col CHAR(36) DEFAULT (UUID()),                      -- MySQL 8.0+ 支持
    random_num INT DEFAULT (RAND() * 100)                    -- MySQL 8.0+ 支持表达式
);
```

**JSON类型默认值**：
```sql
-- JSON类型的默认值（MySQL 5.7+）
CREATE TABLE json_test (
    id INT PRIMARY KEY,
    config JSON DEFAULT ('{}'),                    -- 默认空JSON对象
    settings JSON DEFAULT ('[{"theme":"light"}]')   -- 默认JSON数组
);
```

### 7.4 默认值的修改


**修改已存在表的默认值**：
```sql
-- 为现有字段添加默认值
ALTER TABLE users MODIFY COLUMN age INT DEFAULT 18;

-- 修改现有默认值
ALTER TABLE users MODIFY COLUMN status VARCHAR(10) DEFAULT 'pending';

-- 删除默认值
ALTER TABLE users MODIFY COLUMN nickname VARCHAR(50);
```

---

## 8. ⚙️ 默认值配置实战


### 8.1 业务场景默认值设计


**电商订单表示例**：
```sql
CREATE TABLE orders (
    order_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,                                    -- 必须有用户ID
    order_no VARCHAR(32) NOT NULL,                           -- 必须有订单号
    total_amount DECIMAL(10,2) NOT NULL DEFAULT 0.00,       -- 金额默认0
    status ENUM('pending','paid','shipped','completed','cancelled') DEFAULT 'pending',  -- 状态默认待处理
    payment_method VARCHAR(20) DEFAULT 'alipay',             -- 默认支付方式
    shipping_address TEXT DEFAULT '请填写收货地址',            -- 提示性默认值
    remark TEXT DEFAULT '',                                  -- 备注默认空
    is_urgent BOOLEAN DEFAULT FALSE,                         -- 是否紧急默认否
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,          -- 创建时间自动
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  -- 更新时间自动
    deleted_at TIMESTAMP NULL DEFAULT NULL                   -- 软删除时间默认NULL
);
```

### 8.2 配置参数对默认值的影响


**相关系统变量**：
```sql
-- 查看影响默认值的系统参数
SHOW VARIABLES LIKE 'sql_mode';           -- SQL模式影响默认值行为
SHOW VARIABLES LIKE 'explicit_defaults_for_timestamp';  -- TIMESTAMP默认值行为
```

**关键配置说明**：
```ini
[mysqld]
# 严格模式，影响默认值处理
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE

# TIMESTAMP显式默认值（MySQL 5.6+）
explicit_defaults_for_timestamp = ON
```

### 8.3 默认值的性能考虑


**默认值对性能的影响**：
- ✅ **简单常量默认值**：如数字、字符串，性能开销极小
- ⚠️ **函数默认值**：如`NOW()`、`UUID()`，每次插入都要计算
- ❌ **复杂表达式默认值**：避免使用复杂的计算表达式

**性能优化建议**：
```sql
-- 推荐：使用简单常量
created_at TIMESTAMP DEFAULT '2025-01-01 00:00:00'

-- 可以接受：使用内置函数
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP

-- 避免：复杂计算（MySQL 8.0+才支持）
score INT DEFAULT (RAND() * 100 + some_complex_calculation())
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 默认值本质：字段没有明确值时MySQL自动填入的预设值
🔸 数值类型：隐式默认值都是0，可设置自定义默认值
🔸 字符串类型：隐式默认值都是空字符串''，不是NULL
🔸 日期类型：隐式默认值都是对应的零值
🔸 NOT NULL约束：必须有值，要么设默认值，要么插入时必须指定
🔸 TIMESTAMP特殊：第一个字段自动设置当前时间戳默认值和自动更新
```

### 9.2 关键理解要点


**🔹 默认值的使用时机**
```
什么时候使用默认值：
- INSERT语句中没有明确指定该字段的值
- INSERT语句中明确指定该字段为DEFAULT

什么时候不使用默认值：
- INSERT语句中明确指定了字段的值（包括NULL）
- UPDATE语句不会触发默认值
```

**🔹 隐式默认值 vs 显式默认值**
```
隐式默认值（MySQL自动分配）：
- 数值类型：0
- 字符串类型：空字符串''
- 日期类型：零值

显式默认值（开发者指定）：
- 可以是任何符合类型要求的值
- 可以是函数调用（如CURRENT_TIMESTAMP）
- 可以是表达式（MySQL 8.0+）
```

**🔹 NULL vs 默认值的区别**
```
NULL的含义：
- 表示"没有值"、"未知"、"不适用"
- 需要特殊处理（IS NULL / IS NOT NULL）
- 在计算中会产生NULL结果

默认值的含义：
- 表示"有值，这个值是预设的"
- 可以正常参与计算和比较
- 是一个具体的、有意义的值
```

### 9.3 实际应用价值


**🎯 开发应用场景**
- 📍 **表设计阶段**：合理设置默认值，减少插入数据时的字段指定
- 📍 **数据迁移**：理解默认值规则，避免数据迁移时的错误
- 📍 **业务逻辑**：利用默认值实现业务规则（如订单状态、用户权限）
- 📍 **性能优化**：合理使用默认值，减少应用层的数据处理

**🎯 运维管理场景**
- 📍 **故障排查**：理解默认值行为，分析数据异常原因
- 📍 **数据清理**：识别使用默认值的记录，进行数据质量分析
- 📍 **表结构变更**：修改默认值时理解对现有数据的影响
- 📍 **备份恢复**：确保默认值配置在恢复后保持一致

**🎯 安全管理场景**
- 📍 **权限控制**：利用默认值设置合理的权限等级
- 📍 **数据保护**：通过NOT NULL + DEFAULT保证关键字段有值
- 📍 **审计跟踪**：利用TIMESTAMP默认值自动记录操作时间

**核心记忆口诀**：
```
数字默认零，字符默认空
日期零值要记清，时间戳有特殊功
NOT NULL必有值，要么默认要么填
严格模式更严格，默认规则要弄懂
```

**实战检查清单**：
- [ ] 理解不同数据类型的默认值规则
- [ ] 掌握NOT NULL字段的默认值处理
- [ ] 了解TIMESTAMP的特殊默认值行为
- [ ] 能够根据业务需求设计合理的默认值
- [ ] 理解严格模式对默认值的影响
- [ ] 会修改和维护表的默认值配置