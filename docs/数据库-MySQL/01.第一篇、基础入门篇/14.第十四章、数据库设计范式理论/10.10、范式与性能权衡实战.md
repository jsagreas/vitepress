---
title: 10ã€èŒƒå¼ä¸æ€§èƒ½æƒè¡¡å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [èŒƒå¼ä¸æ€§èƒ½å…³ç³»æ¦‚è¿°](#1-èŒƒå¼ä¸æ€§èƒ½å…³ç³»æ¦‚è¿°)
2. [OLTP vs OLAPèŒƒå¼ç­–ç•¥](#2-oltp-vs-olapèŒƒå¼ç­–ç•¥)
3. [èŒƒå¼åŒ–æ€§èƒ½åŸºå‡†æµ‹è¯•](#3-èŒƒå¼åŒ–æ€§èƒ½åŸºå‡†æµ‹è¯•)
4. [å®æ—¶vsæ‰¹å¤„ç†åœºæ™¯ä¼˜åŒ–](#4-å®æ—¶vsæ‰¹å¤„ç†åœºæ™¯ä¼˜åŒ–)
5. [æ€§èƒ½æµ‹è¯•æ–¹æ³•ä¸å·¥å…·](#5-æ€§èƒ½æµ‹è¯•æ–¹æ³•ä¸å·¥å…·)
6. [èŒƒå¼ä¼˜åŒ–å®æˆ˜æŠ€å·§](#6-èŒƒå¼ä¼˜åŒ–å®æˆ˜æŠ€å·§)
7. [æ€§èƒ½ç›‘æ§æŒ‡æ ‡ä½“ç³»](#7-æ€§èƒ½ç›‘æ§æŒ‡æ ‡ä½“ç³»)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. âš–ï¸ èŒƒå¼ä¸æ€§èƒ½å…³ç³»æ¦‚è¿°


### 1.1 èŒƒå¼ä¸æ€§èƒ½çš„æ ¹æœ¬çŸ›ç›¾


**èŒƒå¼åŒ–ä¸æ€§èƒ½çš„å¤©å¹³**ï¼š

```
èŒƒå¼åŒ–ç¨‹åº¦                     æ€§èƒ½è¡¨ç°
    é«˜                           å¤æ‚æŸ¥è¯¢
    â†‘                              â†“
ç¬¬ä¸‰èŒƒå¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘
ç¬¬äºŒèŒƒå¼ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘
ç¬¬ä¸€èŒƒå¼ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
åèŒƒå¼   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    â†“                              â†‘
    ä½                           ç®€å•æŸ¥è¯¢
```

**æ ¸å¿ƒçŸ›ç›¾åˆ†æ**ï¼š

> ğŸ’¡ **åŸºæœ¬çŸ›ç›¾**
> 
> **èŒƒå¼åŒ–ä¼˜åŠ¿**ï¼šæ•°æ®ä¸€è‡´æ€§ã€å­˜å‚¨æ•ˆç‡ã€ç»´æŠ¤ç®€å•
> **æ€§èƒ½æŒ‘æˆ˜**ï¼šæŸ¥è¯¢å¤æ‚ã€è¿æ¥æ“ä½œå¤šã€ç´¢å¼•å¼€é”€å¤§

### 1.2 æ€§èƒ½å½±å“çš„æ ¹æœ¬åŸå› 


**ğŸ“Š æ€§èƒ½å½±å“å› ç´ åˆ†è§£**ï¼š

| å½±å“å› ç´  | **èŒƒå¼åŒ–å½±å“** | **æ€§èƒ½è¡¨ç°** | **è§£å†³æ€è·¯** |
|---------|---------------|-------------|-------------|
| **ğŸ”— è¡¨è¿æ¥** | `å¢åŠ JOINæ“ä½œ` | `CPUå¼€é”€å¤§` | ä¼˜åŒ–è¿æ¥ç®—æ³• |
| **ğŸ’¾ å­˜å‚¨åˆ†æ•£** | `æ•°æ®åˆ†å¸ƒå¤šè¡¨` | `I/Oæ¬¡æ•°å¢å¤š` | åˆç†ç´¢å¼•è®¾è®¡ |
| **ğŸ” æŸ¥è¯¢å¤æ‚** | `SQLè¯­å¥å¤æ‚` | `è§£æå¼€é”€å¤§` | æŸ¥è¯¢ä¼˜åŒ–å™¨ |
| **ğŸ“ˆ ç´¢å¼•ç»´æŠ¤** | `å¤šè¡¨ç´¢å¼•åŒæ­¥` | `å†™å…¥æ€§èƒ½å·®` | ç´¢å¼•ç­–ç•¥è°ƒæ•´ |

**å®é™…æ¡ˆä¾‹å¯¹æ¯”**ï¼š

```sql
-- èŒƒå¼åŒ–æŸ¥è¯¢ï¼ˆ3NFï¼‰- éœ€è¦å¤šè¡¨JOIN
SELECT u.name, p.title, c.name as category
FROM users u
JOIN posts p ON u.id = p.user_id  
JOIN categories c ON p.category_id = c.id
WHERE u.active = 1 AND p.published = 1;

-- åèŒƒå¼åŒ–æŸ¥è¯¢ - å•è¡¨æŸ¥è¯¢
SELECT name, title, category_name
FROM posts_denormalized  
WHERE user_active = 1 AND published = 1;
```

### 1.3 æƒè¡¡å†³ç­–æ¡†æ¶


**ğŸ¯ å†³ç­–çŸ©é˜µ**ï¼š

```
ä¸šåŠ¡åœºæ™¯æƒè¡¡å›¾ï¼š
        é«˜ä¸€è‡´æ€§è¦æ±‚
            â†‘
        é‡‘èç³»ç»Ÿ â”‚ å†…å®¹ç®¡ç†
    OLTPåº”ç”¨ â”€â”€â”€â”¼â”€â”€â”€ æ•°æ®ä»“åº“ 
        ç”µå•†ç½‘ç«™ â”‚ æŠ¥è¡¨ç³»ç»Ÿ  
            â†“
        é«˜æ€§èƒ½è¦æ±‚
```

**å†³ç­–å› å­è¯„ä¼°**ï¼š

| å› å­ | **æƒé‡** | **èŒƒå¼åŒ–** | **åèŒƒå¼åŒ–** | **æ··åˆæ–¹æ¡ˆ** |
|------|---------|------------|-------------|-------------|
| **æ•°æ®ä¸€è‡´æ€§** | `25%` | â­â­â­â­â­ | â­â­ | â­â­â­â­ |
| **æŸ¥è¯¢æ€§èƒ½** | `30%` | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| **å­˜å‚¨æ•ˆç‡** | `15%` | â­â­â­â­â­ | â­â­ | â­â­â­ |
| **ç»´æŠ¤æˆæœ¬** | `20%` | â­â­â­â­ | â­â­ | â­â­â­ |
| **å¼€å‘æ•ˆç‡** | `10%` | â­â­â­ | â­â­â­â­ | â­â­â­ |

---

## 2. ğŸ¯ OLTP vs OLAPèŒƒå¼ç­–ç•¥


### 2.1 OLTPç³»ç»ŸèŒƒå¼ç­–ç•¥


**OLTPï¼ˆåœ¨çº¿äº‹åŠ¡å¤„ç†ï¼‰ç‰¹ç‚¹**ï¼š
- å¤§é‡å¹¶å‘çš„çŸ­äº‹åŠ¡
- è¯»å†™æ“ä½œé¢‘ç¹ä¸”éšæœº
- æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜
- å“åº”æ—¶é—´è¦æ±‚ä½ï¼ˆæ¯«ç§’çº§ï¼‰

**ğŸ“‹ OLTPèŒƒå¼åŒ–ç­–ç•¥**ï¼š

```
OLTPç³»ç»Ÿè®¾è®¡åŸåˆ™ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ ¸å¿ƒè¡¨: ä¸¥æ ¼3NF             â”‚
â”‚ â”œâ”€ ç”¨æˆ·è¡¨                   â”‚
â”‚ â”œâ”€ è®¢å•è¡¨                   â”‚  
â”‚ â””â”€ å•†å“è¡¨                   â”‚
â”‚                            â”‚
â”‚ è¾…åŠ©è¡¨: é€‚åº¦åèŒƒå¼           â”‚
â”‚ â”œâ”€ ç»Ÿè®¡ç¼“å­˜è¡¨               â”‚
â”‚ â”œâ”€ æœç´¢å†—ä½™è¡¨               â”‚
â”‚ â””â”€ ä¼šè¯çŠ¶æ€è¡¨               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†è®¢å•ç³»ç»Ÿ**ï¼š

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹OLTPè®¾è®¡è¯¦æƒ…</summary>

```sql
-- æ ¸å¿ƒäº‹åŠ¡è¡¨ï¼ˆä¸¥æ ¼èŒƒå¼åŒ–ï¼‰
CREATE TABLE orders (
    id BIGINT PRIMARY KEY,
    user_id INT NOT NULL,
    status TINYINT NOT NULL,
    created_at TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE order_items (
    id BIGINT PRIMARY KEY,
    order_id BIGINT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(id)
);

-- æ€§èƒ½ä¼˜åŒ–è¡¨ï¼ˆé€‚åº¦åèŒƒå¼ï¼‰
CREATE TABLE order_summary (
    order_id BIGINT PRIMARY KEY,
    user_name VARCHAR(50),        -- å†—ä½™å­—æ®µ
    item_count INT,               -- è®¡ç®—å­—æ®µ
    total_amount DECIMAL(10,2),   -- æ±‡æ€»å­—æ®µ
    status_text VARCHAR(20),      -- å†—ä½™å­—æ®µ
    INDEX idx_user_status (user_name, status_text)
);
```

**æ€§èƒ½å¯¹æ¯”æµ‹è¯•**ï¼š
```
æŸ¥è¯¢è®¢å•åˆ—è¡¨æ€§èƒ½ï¼š
èŒƒå¼åŒ–æŸ¥è¯¢:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 180ms (3è¡¨JOIN)
åèŒƒå¼æŸ¥è¯¢:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 25ms  (å•è¡¨æŸ¥è¯¢)
```

</details>

### 2.2 OLAPç³»ç»ŸèŒƒå¼ç­–ç•¥


**OLAPï¼ˆåœ¨çº¿åˆ†æå¤„ç†ï¼‰ç‰¹ç‚¹**ï¼š
- å¤æ‚çš„åˆ†ææŸ¥è¯¢
- å¤§é‡æ•°æ®èšåˆè®¡ç®—
- è¯»å¤šå†™å°‘
- å“åº”æ—¶é—´è¦æ±‚ç›¸å¯¹å®½æ¾

**ğŸ—ï¸ OLAPæ•°æ®ä»“åº“è®¾è®¡**ï¼š

```
OLAPæ˜Ÿå‹æ¨¡å‹è®¾è®¡ï¼š
        ç»´åº¦è¡¨(èŒƒå¼åŒ–)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ æ—¶é—´ç»´åº¦ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
ç»´åº¦è¡¨ â”€â”€â”€â”€â”€â”€â”€äº‹å®è¡¨â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»´åº¦è¡¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äº§å“ç»´åº¦ â”‚â”€â”‚é”€å”®äº‹å®è¡¨â”‚â”€â”‚ å®¢æˆ·ç»´åº¦ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ åœ°åŒºç»´åº¦ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
äº‹å®è¡¨: é«˜åº¦åèŒƒå¼åŒ–
ç»´åº¦è¡¨: é€‚åº¦èŒƒå¼åŒ–
```

**OLAPä¼˜åŒ–ç­–ç•¥**ï¼š

| è¡¨ç±»å‹ | **èŒƒå¼ç¨‹åº¦** | **è®¾è®¡åŸåˆ™** | **æ€§èƒ½è€ƒé‡** |
|--------|-------------|-------------|-------------|
| **äº‹å®è¡¨** | `å®Œå…¨åèŒƒå¼` | åŒ…å«æ‰€æœ‰åº¦é‡å€¼å’Œå¤–é”® | æœ€å¤§åŒ–æŸ¥è¯¢æ€§èƒ½ |
| **ç»´åº¦è¡¨** | `è½»åº¦èŒƒå¼åŒ–` | å¯æ¥å—å°‘é‡å†—ä½™ | å¹³è¡¡æ€§èƒ½å’Œç»´æŠ¤ |
| **èšåˆè¡¨** | `å®Œå…¨åèŒƒå¼` | é¢„è®¡ç®—ç»“æœå­˜å‚¨ | æè‡´æŸ¥è¯¢é€Ÿåº¦ |

### 2.3 æ··åˆè´Ÿè½½ç³»ç»Ÿç­–ç•¥


**ğŸ”„ HTAPç³»ç»Ÿè®¾è®¡æ€è·¯**ï¼š

```
æ··åˆäº‹åŠ¡åˆ†æå¤„ç†æ¶æ„ï¼š
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   åº”ç”¨å±‚     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OLTPå¼•æ“ â”‚        â”‚ OLAPå¼•æ“ â”‚
â”‚(è¡Œå­˜å‚¨)  â”‚        â”‚(åˆ—å­˜å‚¨)  â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ç»Ÿä¸€å­˜å‚¨    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®æ—¶åŒæ­¥ç­–ç•¥**ï¼š

> âš ï¸ **æŠ€æœ¯è¦ç‚¹**
> 
> - **CDCï¼ˆå˜æ›´æ•°æ®æ•è·ï¼‰**ï¼šå®æ—¶åŒæ­¥OLTPåˆ°OLAP
> - **åˆ†åŒºå­˜å‚¨**ï¼šçƒ­æ•°æ®èŒƒå¼åŒ–ï¼Œå†·æ•°æ®åèŒƒå¼åŒ–  
> - **æ™ºèƒ½è·¯ç”±**ï¼šæ ¹æ®æŸ¥è¯¢ç±»å‹è‡ªåŠ¨é€‰æ‹©å¼•æ“

---

## 3. ğŸ“Š èŒƒå¼åŒ–æ€§èƒ½åŸºå‡†æµ‹è¯•


### 3.1 æµ‹è¯•ç¯å¢ƒä¸æ–¹æ³•


**ğŸ§ª æµ‹è¯•ç¯å¢ƒé…ç½®**ï¼š

```
ç¡¬ä»¶é…ç½®ï¼š
â”œâ”€ CPU: Intel Xeon E5-2680 v4 (28æ ¸)
â”œâ”€ å†…å­˜: 128GB DDR4  
â”œâ”€ å­˜å‚¨: NVMe SSD 1TB
â””â”€ ç½‘ç»œ: 10Gbps

è½¯ä»¶ç¯å¢ƒï¼š
â”œâ”€ MySQL 8.0.28
â”œâ”€ InnoDBå­˜å‚¨å¼•æ“
â”œâ”€ ç¼“å†²æ± : 64GB
â””â”€ æµ‹è¯•å·¥å…·: sysbench + custom scripts
```

**ğŸ“‹ æµ‹è¯•æ•°æ®è§„æ¨¡**ï¼š

| æ•°æ®é›† | **ç”¨æˆ·æ•°** | **è®¢å•æ•°** | **å•†å“æ•°** | **æ•°æ®é‡** |
|--------|-----------|-----------|-----------|------------|
| **å°è§„æ¨¡** | `10ä¸‡` | `100ä¸‡` | `1ä¸‡` | `1GB` |
| **ä¸­è§„æ¨¡** | `100ä¸‡` | `1000ä¸‡` | `10ä¸‡` | `10GB` |
| **å¤§è§„æ¨¡** | `1000ä¸‡` | `1äº¿` | `100ä¸‡` | `100GB` |

### 3.2 æŸ¥è¯¢æ€§èƒ½å¯¹æ¯”æµ‹è¯•


**âš¡ å…¸å‹æŸ¥è¯¢åœºæ™¯æµ‹è¯•**ï¼š

```sql
-- æµ‹è¯•åœºæ™¯1: ç”¨æˆ·è®¢å•æŸ¥è¯¢
-- èŒƒå¼åŒ–ç‰ˆæœ¬ï¼ˆ3NFï¼‰
SELECT u.name, o.order_date, oi.quantity, p.product_name
FROM users u
JOIN orders o ON u.id = o.user_id
JOIN order_items oi ON o.id = oi.order_id  
JOIN products p ON oi.product_id = p.id
WHERE u.id = ? AND o.status = 'completed';

-- åèŒƒå¼ç‰ˆæœ¬
SELECT user_name, order_date, quantity, product_name
FROM order_details_flat
WHERE user_id = ? AND status = 'completed';
```

**æ€§èƒ½æµ‹è¯•ç»“æœ**ï¼š

```
æŸ¥è¯¢å“åº”æ—¶é—´å¯¹æ¯”ï¼ˆæ¯«ç§’ï¼‰ï¼š
åœºæ™¯              3NF    2NF    1NF    åèŒƒå¼
ç®€å•æŸ¥è¯¢         12     8      6      4
å¤æ‚JOIN         85     45     25     8  
èšåˆæŸ¥è¯¢         156    89     52     15
åˆ†é¡µæŸ¥è¯¢         28     18     12     6

QPSå¯¹æ¯”ï¼š
3NF:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 8,500
2NF:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12,000  
1NF:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 14,500
åèŒƒå¼:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 16,800
```

### 3.3 å¹¶å‘æ€§èƒ½æµ‹è¯•


**ğŸ”„ å¹¶å‘è®¿é—®å‹åŠ›æµ‹è¯•**ï¼š

| å¹¶å‘æ•° | **3NF TPS** | **åèŒƒå¼ TPS** | **CPUä½¿ç”¨ç‡** | **å†…å­˜ä½¿ç”¨** |
|--------|-------------|----------------|---------------|-------------|
| **50** | `4,200` | `5,800` | `45% vs 35%` | `ç›¸è¿‘` |
| **100** | `6,800` | `9,500` | `65% vs 50%` | `ç›¸è¿‘` |
| **200** | `8,200` | `12,800` | `85% vs 70%` | `ç›¸è¿‘` |
| **500** | `7,500` | `14,200` | `95% vs 85%` | `ç›¸è¿‘` |

**ğŸ”’ é”ç«äº‰åˆ†æ**ï¼š

```
é”ç­‰å¾…æ—¶é—´å¯¹æ¯”ï¼š
3NF(å¤šè¡¨é”):    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45ms
åèŒƒå¼(å•è¡¨é”): â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 18ms

æ­»é”å‘ç”Ÿç‡ï¼š
3NF:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 0.8%
åèŒƒå¼:   â–ˆâ–ˆ 0.1%
```

### 3.4 å­˜å‚¨æ•ˆç‡å¯¹æ¯”


**ğŸ’¾ å­˜å‚¨ç©ºé—´ä½¿ç”¨**ï¼š

```
æ•°æ®å­˜å‚¨å¯¹æ¯”ï¼ˆ1000ä¸‡è®¢å•ï¼‰ï¼š
3NFèŒƒå¼åŒ–:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12GB
â”œâ”€ æ•°æ®æ–‡ä»¶:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8GB  
â”œâ”€ ç´¢å¼•æ–‡ä»¶:    â–ˆâ–ˆâ–ˆâ–ˆ 4GB
â””â”€ å†—ä½™åº¦:      0%

åèŒƒå¼åŒ–:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 20GB
â”œâ”€ æ•°æ®æ–‡ä»¶:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 16GB
â”œâ”€ ç´¢å¼•æ–‡ä»¶:    â–ˆâ–ˆâ–ˆâ–ˆ 4GB  
â””â”€ å†—ä½™åº¦:      40%

å‹ç¼©æ¯”è¾ƒ:
3NFå‹ç¼©ç‡:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 60%
åèŒƒå¼å‹ç¼©ç‡:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45%
```

---

## 4. âš¡ å®æ—¶vsæ‰¹å¤„ç†åœºæ™¯ä¼˜åŒ–


### 4.1 å®æ—¶å¤„ç†åœºæ™¯ä¼˜åŒ–


**å®æ—¶ç³»ç»Ÿç‰¹å¾**ï¼š
- ä½å»¶è¿Ÿè¦æ±‚ï¼ˆ< 100msï¼‰
- é«˜å¹¶å‘è®¿é—®
- æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜
- å†…å­˜å¯†é›†å‹æ“ä½œ

**ğŸš€ å®æ—¶åœºæ™¯ä¼˜åŒ–ç­–ç•¥**ï¼š

```
å®æ—¶ç³»ç»Ÿæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç¼“å­˜å±‚     â”‚    â”‚   è®¡ç®—å±‚     â”‚    â”‚   å­˜å‚¨å±‚     â”‚
â”‚ Redis/      â”‚ -> â”‚ åº”ç”¨æœåŠ¡     â”‚ -> â”‚ MySQLä¸»åº“    â”‚
â”‚ Memcached   â”‚    â”‚ (å†…å­˜è®¡ç®—)   â”‚    â”‚ (èŒƒå¼åŒ–)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                    â”‚                    â”‚
      â†“                    â†“                    â†“
   äºšæ¯«ç§’çº§              æ¯«ç§’çº§              åæ¯«ç§’çº§
```

**ç¼“å­˜ç­–ç•¥è®¾è®¡**ï¼š

| ç¼“å­˜ç±»å‹ | **æ•°æ®ç»“æ„** | **é€‚ç”¨åœºæ™¯** | **èŒƒå¼å¤„ç†** |
|---------|------------|-------------|-------------|
| **çƒ­ç‚¹æ•°æ®** | `åèŒƒå¼JSON` | ç”¨æˆ·ä¿¡æ¯ã€å•†å“è¯¦æƒ… | å®Œå…¨åèŒƒå¼ |
| **ä¼šè¯æ•°æ®** | `é”®å€¼å¯¹` | ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ | ç®€å•ç»“æ„ |
| **è®¡æ•°å™¨** | `åŸå­æ“ä½œ` | ç‚¹èµæ•°ã€åº“å­˜ | å•å­—æ®µ |
| **æ’è¡Œæ¦œ** | `æœ‰åºé›†åˆ` | çƒ­é—¨å•†å“ã€ç”¨æˆ·æ’å | é¢„èšåˆ |

**å®æ—¶ä¼˜åŒ–æ¡ˆä¾‹**ï¼š

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹å®æ—¶ä¼˜åŒ–å®ç°</summary>

```python
# å®æ—¶å•†å“æ¨èç³»ç»Ÿ
class RealTimeRecommendation:
    def __init__(self):
        self.redis = Redis()
        self.mysql = MySQLConnection()
    
    def get_recommendations(self, user_id, count=10):
        # 1. å°è¯•ä»ç¼“å­˜è·å–ï¼ˆåèŒƒå¼æ•°æ®ï¼‰
        cache_key = f"rec:{user_id}"
        cached = self.redis.hgetall(cache_key)
        
        if cached:
            return self._parse_cached_data(cached)
        
        # 2. ä»æ•°æ®åº“è®¡ç®—ï¼ˆèŒƒå¼åŒ–æŸ¥è¯¢ï¼‰
        recommendations = self._compute_recommendations(user_id, count)
        
        # 3. ç¼“å­˜ç»“æœï¼ˆåèŒƒå¼å­˜å‚¨ï¼‰
        self.redis.hmset(cache_key, {
            'products': json.dumps([{
                'id': p['id'],
                'name': p['name'],
                'price': p['price'],
                'category': p['category_name'],  # å†—ä½™å­—æ®µ
                'score': p['score']
            } for p in recommendations])
        })
        self.redis.expire(cache_key, 1800)  # 30åˆ†é’Ÿè¿‡æœŸ
        
        return recommendations
    
    def _compute_recommendations(self, user_id, count):
        # å¤æ‚çš„èŒƒå¼åŒ–æŸ¥è¯¢
        sql = """
        SELECT p.id, p.name, p.price, c.name as category_name,
               (u.preference_score * p.rating * p.popularity) as score
        FROM products p
        JOIN categories c ON p.category_id = c.id
        JOIN user_preferences up ON up.category_id = c.id
        JOIN users u ON up.user_id = u.id
        WHERE u.id = %s AND p.status = 'active'
        ORDER BY score DESC
        LIMIT %s
        """
        return self.mysql.execute(sql, (user_id, count))
```

**æ€§èƒ½å¯¹æ¯”**ï¼š
```
å®æ—¶æ¨èå“åº”æ—¶é—´ï¼š
ç¼“å­˜å‘½ä¸­:    â–ˆâ–ˆâ–ˆâ–ˆ 3ms
ç¼“å­˜æœªå‘½ä¸­:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45ms
çº¯æ•°æ®åº“:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 120ms
```

</details>

### 4.2 æ‰¹å¤„ç†åœºæ™¯ä¼˜åŒ–


**æ‰¹å¤„ç†ç³»ç»Ÿç‰¹å¾**ï¼š
- é«˜ååé‡è¦æ±‚
- å»¶è¿Ÿå®¹å¿åº¦é«˜
- å¤§é‡æ•°æ®å¤„ç†
- I/Oå¯†é›†å‹æ“ä½œ

**ğŸ“Š æ‰¹å¤„ç†ä¼˜åŒ–æ¶æ„**ï¼š

```
æ‰¹å¤„ç†æ•°æ®æµï¼š
æºæ•°æ®(èŒƒå¼)  â†’  ETLå¤„ç†  â†’  æ•°æ®ä»“åº“(åèŒƒå¼)  â†’  åˆ†æç»“æœ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OLTPåº“  â”‚ --> â”‚ ETL â”‚ --> â”‚ æ•°æ®ä»“åº“ â”‚   -->  â”‚ BIæŠ¥è¡¨  â”‚
â”‚(3NF)    â”‚     â”‚å·¥å…· â”‚     â”‚(æ˜Ÿå‹)   â”‚        â”‚(èšåˆè¡¨) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚               â”‚           â”‚                   â”‚
 å®æ—¶æ•°æ®        æ•°æ®æ¸…æ´—     å†å²æ•°æ®           åˆ†æç»“æœ
```

**æ‰¹å¤„ç†è¡¨è®¾è®¡ç­–ç•¥**ï¼š

| é˜¶æ®µ | **è¡¨ç»“æ„** | **èŒƒå¼ç¨‹åº¦** | **ä¼˜åŒ–é‡ç‚¹** |
|------|-----------|-------------|-------------|
| **æ•°æ®é‡‡é›†** | `ä¸´æ—¶è¡¨` | `åŸå§‹æ ¼å¼` | å¿«é€Ÿå†™å…¥ |
| **æ•°æ®æ¸…æ´—** | `ä¸­é—´è¡¨` | `2NF-3NF` | æ•°æ®è´¨é‡ |
| **æ•°æ®å­˜å‚¨** | `äº‹å®ç»´åº¦è¡¨` | `åèŒƒå¼åŒ–` | æŸ¥è¯¢æ€§èƒ½ |
| **ç»“æœè¾“å‡º** | `èšåˆè¡¨` | `å®Œå…¨åèŒƒå¼` | æè‡´æ€§èƒ½ |

### 4.3 æ··åˆåœºæ™¯å¹³è¡¡ç­–ç•¥


**ğŸ”„ Lambdaæ¶æ„è®¾è®¡**ï¼š

```
Lambdaæ¶æ„æ•°æ®æµï¼š
                 æ•°æ®æº
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚
      æ‰¹å¤„ç†å±‚              å®æ—¶å±‚
    (å†å²æ•°æ®)            (å®æ—¶æ•°æ®)  
         â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚æ‰¹å¤„ç†ç»“æœâ”‚         â”‚å®æ—¶ç»“æœ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚æœåŠ¡å±‚   â”‚
              â”‚(åˆå¹¶ç»“æœ)â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•°æ®ä¸€è‡´æ€§ä¿è¯**ï¼š

> âš ï¸ **é‡è¦è€ƒè™‘**
> 
> - **æœ€ç»ˆä¸€è‡´æ€§**ï¼šå…è®¸çŸ­æœŸä¸ä¸€è‡´ï¼Œä¿è¯æœ€ç»ˆæ”¶æ•›
> - **ç‰ˆæœ¬æ§åˆ¶**ï¼šå®æ—¶å’Œæ‰¹å¤„ç†ç»“æœå¸¦æ—¶é—´æˆ³
> - **å†²çªè§£å†³**ï¼šå®šä¹‰ä¼˜å…ˆçº§ç­–ç•¥ï¼ˆé€šå¸¸å®æ—¶ä¼˜å…ˆï¼‰

---

## 5. ğŸ”§ æ€§èƒ½æµ‹è¯•æ–¹æ³•ä¸å·¥å…·


### 5.1 æ€§èƒ½æµ‹è¯•æ–¹æ³•è®º


**ğŸ“‹ æµ‹è¯•æ–¹æ³•åˆ†ç±»**ï¼š

```
æ€§èƒ½æµ‹è¯•é‡‘å­—å¡”ï¼š
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  å‹åŠ›æµ‹è¯•    â”‚  æé™åœºæ™¯
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚  è´Ÿè½½æµ‹è¯•    â”‚  é¢„æœŸè´Ÿè½½  
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
      â”‚  åŸºå‡†æµ‹è¯•    â”‚  åŸºç¡€æ€§èƒ½
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æµ‹è¯•åœºæ™¯è®¾è®¡**ï¼š

| æµ‹è¯•ç±»å‹ | **ç›®æ ‡** | **å…³é”®æŒ‡æ ‡** | **èŒƒå¼å½±å“** |
|---------|----------|-------------|-------------|
| **åŸºå‡†æµ‹è¯•** | `å»ºç«‹æ€§èƒ½åŸºçº¿` | TPSã€å“åº”æ—¶é—´ | ç›´æ¥å¯¹æ¯” |
| **è´Ÿè½½æµ‹è¯•** | `éªŒè¯è®¾è®¡è´Ÿè½½` | ååé‡ã€ç¨³å®šæ€§ | å¹¶å‘å½±å“ |
| **å‹åŠ›æµ‹è¯•** | `æ‰¾åˆ°æ€§èƒ½æé™` | æœ€å¤§TPSã€æ•…éšœç‚¹ | èµ„æºç“¶é¢ˆ |
| **å®¹é‡æµ‹è¯•** | `éªŒè¯æ‰©å±•èƒ½åŠ›` | æ•°æ®é‡å½±å“ | å­˜å‚¨æ•ˆç‡ |

### 5.2 ä¸“ä¸šæµ‹è¯•å·¥å…·


**ğŸ› ï¸ æµ‹è¯•å·¥å…·é€‰æ‹©**ï¼š

```sql
-- sysbench OLTPæµ‹è¯•
sysbench oltp_read_write \
  --db-driver=mysql \
  --mysql-host=localhost \
  --mysql-user=test \
  --mysql-password=test \
  --mysql-db=testdb \
  --tables=10 \
  --table-size=1000000 \
  --threads=16 \
  --time=300 \
  run
```

**å·¥å…·å¯¹æ¯”çŸ©é˜µ**ï¼š

| å·¥å…· | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **æ¨èåº¦** |
|------|------------|----------|----------|------------|
| **sysbench** | `æ ‡å‡†åŸºå‡†æµ‹è¯•` | ç®€å•æ˜“ç”¨ã€ç»“æœæ ‡å‡†åŒ– | åœºæ™¯å›ºå®š | â­â­â­â­â­ |
| **JMeter** | `Webåº”ç”¨æµ‹è¯•` | å›¾å½¢ç•Œé¢ã€åœºæ™¯ä¸°å¯Œ | èµ„æºå ç”¨å¤§ | â­â­â­â­ |
| **wrk** | `HTTPæ€§èƒ½æµ‹è¯•` | è½»é‡é«˜æ•ˆ | åŠŸèƒ½å•ä¸€ | â­â­â­â­ |
| **HammerDB** | `æ•°æ®åº“ä¸“ä¸šæµ‹è¯•` | TPCæ ‡å‡†ã€ç»“æœæƒå¨ | é…ç½®å¤æ‚ | â­â­â­â­â­ |

### 5.3 è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬


**ğŸ“Š èŒƒå¼å¯¹æ¯”æµ‹è¯•æ¡†æ¶**ï¼š

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹æµ‹è¯•æ¡†æ¶ä»£ç </summary>

```python
import time
import threading
from concurrent.futures import ThreadPoolExecutor
import mysql.connector
import statistics

class NormalizationPerformanceTest:
    def __init__(self, config):
        self.config = config
        self.results = {
            'normalized': [],
            'denormalized': []
        }
    
    def run_test_suite(self):
        """è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶"""
        test_cases = [
            ('simple_select', self.test_simple_select),
            ('complex_join', self.test_complex_join),
            ('aggregate_query', self.test_aggregate_query),
            ('concurrent_read', self.test_concurrent_read)
        ]
        
        for test_name, test_func in test_cases:
            print(f"æ‰§è¡Œæµ‹è¯•: {test_name}")
            normalized_time = test_func('normalized')
            denormalized_time = test_func('denormalized')
            
            self.results[test_name] = {
                'normalized': normalized_time,
                'denormalized': denormalized_time,
                'improvement': (normalized_time - denormalized_time) / normalized_time * 100
            }
            
            print(f"èŒƒå¼åŒ–: {normalized_time:.2f}ms")
            print(f"åèŒƒå¼: {denormalized_time:.2f}ms")  
            print(f"æ€§èƒ½æå‡: {self.results[test_name]['improvement']:.1f}%\n")
    
    def test_simple_select(self, table_type):
        """ç®€å•æŸ¥è¯¢æµ‹è¯•"""
        if table_type == 'normalized':
            sql = """
            SELECT u.name, o.total_amount, o.created_at
            FROM users u 
            JOIN orders o ON u.id = o.user_id
            WHERE u.id = %s
            """
        else:
            sql = """
            SELECT user_name, total_amount, created_at  
            FROM orders_denormalized
            WHERE user_id = %s
            """
        
        return self._execute_timed_query(sql, (1001,))
    
    def test_complex_join(self, table_type):
        """å¤æ‚è¿æ¥æµ‹è¯•"""
        if table_type == 'normalized':
            sql = """
            SELECT u.name, p.name, oi.quantity, c.name
            FROM users u
            JOIN orders o ON u.id = o.user_id
            JOIN order_items oi ON o.id = oi.order_id
            JOIN products p ON oi.product_id = p.id  
            JOIN categories c ON p.category_id = c.id
            WHERE o.status = 'completed'
            LIMIT 100
            """
        else:
            sql = """
            SELECT user_name, product_name, quantity, category_name
            FROM order_details_flat
            WHERE status = 'completed'
            LIMIT 100
            """
        
        return self._execute_timed_query(sql)
    
    def _execute_timed_query(self, sql, params=None):
        """æ‰§è¡Œè®¡æ—¶æŸ¥è¯¢"""
        conn = mysql.connector.connect(**self.config)
        cursor = conn.cursor()
        
        start_time = time.time()
        cursor.execute(sql, params or ())
        results = cursor.fetchall()
        end_time = time.time()
        
        cursor.close()
        conn.close()
        
        return (end_time - start_time) * 1000  # è¿”å›æ¯«ç§’
```

</details>

---

## 6. ğŸ’¡ èŒƒå¼ä¼˜åŒ–å®æˆ˜æŠ€å·§


### 6.1 æ™ºèƒ½æ··åˆèŒƒå¼ç­–ç•¥


**ğŸ¯ åˆ†å±‚èŒƒå¼è®¾è®¡**ï¼š

```
åº”ç”¨åˆ†å±‚èŒƒå¼ç­–ç•¥ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å±•ç¤ºå±‚                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç¼“å­˜å±‚(åèŒƒå¼)â”‚ â”‚ æœç´¢å±‚(åèŒƒå¼)â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          ä¸šåŠ¡å±‚                  â”‚  
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ ¸å¿ƒè¡¨(3NF) â”‚ â”‚ ç»Ÿè®¡è¡¨(1NF) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          å­˜å‚¨å±‚                  â”‚
â”‚        å…¨é‡æ•°æ®(3NF)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä¼˜åŒ–åŸåˆ™**ï¼š

> ğŸ’¡ **é»„é‡‘æ³•åˆ™**
> 
> 1. **çƒ­æ•°æ®åèŒƒå¼** - é¢‘ç¹è®¿é—®çš„æ•°æ®é€‚åº¦å†—ä½™
> 2. **å†·æ•°æ®èŒƒå¼åŒ–** - å½’æ¡£æ•°æ®ä¿æŒè§„èŒƒ
> 3. **è¯»å†™åˆ†ç¦»** - å†™å…¥èŒƒå¼åŒ–ï¼ŒæŸ¥è¯¢åèŒƒå¼åŒ–
> 4. **åˆ†å±‚å¤„ç†** - ä¸åŒå±‚æ¬¡é‡‡ç”¨ä¸åŒç­–ç•¥

### 6.2 åŠ¨æ€èŒƒå¼è°ƒæ•´æŠ€å·§


**ğŸ“Š è‡ªé€‚åº”èŒƒå¼è°ƒæ•´**ï¼š

| è®¿é—®æ¨¡å¼ | **æ¨èç­–ç•¥** | **è°ƒæ•´è§¦å‘æ¡ä»¶** | **å®æ–½æ–¹æ³•** |
|---------|-------------|-----------------|-------------|
| **è¯»å¤šå†™å°‘** | `åèŒƒå¼åŒ–` | è¯»å†™æ¯” > 10:1 | å¢åŠ å†—ä½™å­—æ®µ |
| **å†™å¤šè¯»å°‘** | `èŒƒå¼åŒ–` | å†™å…¥TPS > é˜ˆå€¼ | æ‹†åˆ†è¡¨ç»“æ„ |
| **å¤æ‚æŸ¥è¯¢** | `åèŒƒå¼åŒ–` | JOINè¡¨æ•° > 4 | å®½è¡¨è®¾è®¡ |
| **ç®€å•CRUD** | `èŒƒå¼åŒ–` | æŸ¥è¯¢å¤æ‚åº¦ä½ | ä¿æŒè§„èŒƒ |

**å®æ—¶ç›‘æ§æŒ‡æ ‡**ï¼š

```
æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æŸ¥è¯¢æ€§èƒ½       â”‚   å­˜å‚¨æ•ˆç‡       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚å¹³å‡å“åº”æ—¶é—´  â”‚ â”‚ â”‚å­˜å‚¨ç©ºé—´å ç”¨  â”‚ â”‚
â”‚ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 45msâ”‚ â”‚ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 85%â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å¹¶å‘å¤„ç†       â”‚   ç´¢å¼•æ•ˆç‡       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚å½“å‰TPS      â”‚ â”‚ â”‚ç´¢å¼•å‘½ä¸­ç‡    â”‚ â”‚
â”‚ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8.2Kâ”‚ â”‚ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 94%â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ç´¢å¼•ç­–ç•¥ä¼˜åŒ–


**ğŸ” èŒƒå¼åŒ–ç´¢å¼•è®¾è®¡**ï¼š

```sql
-- 3NFè¡¨çš„å¤åˆç´¢å¼•ç­–ç•¥
CREATE TABLE orders (
    id BIGINT PRIMARY KEY,
    user_id INT NOT NULL,
    status TINYINT NOT NULL,  
    created_at TIMESTAMP,
    
    -- è¦†ç›–ç´¢å¼• - é¿å…å›è¡¨æŸ¥è¯¢
    INDEX idx_user_status_time (user_id, status, created_at, id),
    
    -- éƒ¨åˆ†ç´¢å¼• - åªç´¢å¼•æ´»è·ƒæ•°æ®  
    INDEX idx_active_orders (user_id, created_at) 
    WHERE status IN (1, 2, 3)
);

-- åèŒƒå¼è¡¨çš„é€‰æ‹©æ€§ç´¢å¼•
CREATE TABLE order_summary (
    order_id BIGINT PRIMARY KEY,
    user_name VARCHAR(50),
    total_amount DECIMAL(10,2),
    status_text VARCHAR(20),
    created_at TIMESTAMP,
    
    -- å‰ç¼€ç´¢å¼• - èŠ‚çœç©ºé—´
    INDEX idx_user_prefix (user_name(10)),
    
    -- å‡½æ•°ç´¢å¼• - æ”¯æŒè®¡ç®—æŸ¥è¯¢
    INDEX idx_amount_range ((CASE 
        WHEN total_amount < 100 THEN 'low'
        WHEN total_amount < 1000 THEN 'medium' 
        ELSE 'high'
    END))
);
```

### 6.4 ç¼“å­˜å‘½ä¸­ç‡ä¼˜åŒ–


**âš¡ å¤šå±‚ç¼“å­˜ç­–ç•¥**ï¼š

```
ç¼“å­˜å±‚æ¬¡ç»“æ„ï¼š
L1ç¼“å­˜(åº”ç”¨å†…å­˜)  â†â†’  åèŒƒå¼JSONå¯¹è±¡
     â†• 95% å‘½ä¸­ç‡
L2ç¼“å­˜(Redis)     â†â†’  ç»“æ„åŒ–æ•°æ®  
     â†• 85% å‘½ä¸­ç‡
L3ç¼“å­˜(MySQLæŸ¥è¯¢) â†â†’  èŒƒå¼åŒ–è¡¨
     â†• æœ€ç»ˆæ•°æ®æº
```

**ç¼“å­˜æ›´æ–°ç­–ç•¥**ï¼š

| æ›´æ–°æ–¹å¼ | **é€‚ç”¨åœºæ™¯** | **ä¸€è‡´æ€§** | **æ€§èƒ½å½±å“** |
|---------|-------------|-----------|-------------|
| **Cache-Aside** | `è¯»å¤šå†™å°‘` | `æœ€ç»ˆä¸€è‡´` | `ä½` |
| **Write-Through** | `å¼ºä¸€è‡´æ€§è¦æ±‚` | `å¼ºä¸€è‡´` | `ä¸­` |
| **Write-Behind** | `å†™å¯†é›†` | `æœ€ç»ˆä¸€è‡´` | `ä½` |
| **Refresh-Ahead** | `å¯é¢„æµ‹è®¿é—®` | `æœ€ç»ˆä¸€è‡´` | `ä½` |

---

## 7. ğŸ“ˆ æ€§èƒ½ç›‘æ§æŒ‡æ ‡ä½“ç³»


### 7.1 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ¯ å…³é”®æ€§èƒ½æŒ‡æ ‡(KPI)**ï¼š

```
æ€§èƒ½æŒ‡æ ‡é‡‘å­—å¡”ï¼š
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ä¸šåŠ¡æŒ‡æ ‡     â”‚ â† ç”¨æˆ·ä½“éªŒã€è½¬æ¢ç‡
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ åº”ç”¨æŒ‡æ ‡     â”‚ â† å“åº”æ—¶é—´ã€ååé‡
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ æ•°æ®åº“æŒ‡æ ‡   â”‚ â† QPSã€è¿æ¥æ•°ã€é”ç­‰å¾…
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
        â”‚ ç³»ç»ŸæŒ‡æ ‡     â”‚ â† CPUã€å†…å­˜ã€I/Oã€ç½‘ç»œ
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“Š ç›‘æ§æŒ‡æ ‡çŸ©é˜µ**ï¼š

| æŒ‡æ ‡ç±»åˆ« | **æ ¸å¿ƒæŒ‡æ ‡** | **æ­£å¸¸èŒƒå›´** | **å‘Šè­¦é˜ˆå€¼** | **èŒƒå¼å½±å“** |
|---------|-------------|-------------|-------------|-------------|
| **å“åº”æ—¶é—´** | å¹³å‡å“åº”æ—¶é—´ | `< 50ms` | `> 100ms` | åèŒƒå¼æ›´ä¼˜ |
| **ååé‡** | QPS/TPS | `> 1000` | `< 500` | åèŒƒå¼æ›´ä¼˜ |  
| **å¹¶å‘æ•°** | æ´»è·ƒè¿æ¥æ•° | `< 200` | `> 500` | èŒƒå¼åŒ–å½±å“å¤§ |
| **ç¼“å­˜** | å‘½ä¸­ç‡ | `> 90%` | `< 80%` | åèŒƒå¼å‘½ä¸­ç‡é«˜ |
| **å­˜å‚¨** | è¡¨ç©ºé—´å¢é•¿ | `< 10%/æœˆ` | `> 20%/æœˆ` | èŒƒå¼åŒ–æ›´ä¼˜ |

### 7.2 å®æ—¶ç›‘æ§ç³»ç»Ÿ


**ğŸ” ç›‘æ§æ¶æ„è®¾è®¡**ï¼š

```
ç›‘æ§æ•°æ®æµï¼š
æ•°æ®åº“æ€§èƒ½æŒ‡æ ‡ â†’ é‡‡é›†å™¨ â†’ æ—¶åºæ•°æ®åº“ â†’ å¯è§†åŒ– â†’ å‘Šè­¦
     â†“            â†“         â†“          â†“       â†“
MySQL Status   Prometheus  InfluxDB   Grafana  AlertManager
     â†“            â†“         â†“          â†“       â†“  
æ…¢æŸ¥è¯¢æ—¥å¿—     Node Export  å­˜å‚¨30å¤©   ä»ªè¡¨æ¿   é‚®ä»¶/å¾®ä¿¡
```

**ç›‘æ§æŒ‡æ ‡æ”¶é›†**ï¼š

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹ç›‘æ§é…ç½®</summary>

```yaml
# Prometheus MySQLç›‘æ§é…ç½®
global:
  scrape_interval: 15s
  
scrape_configs:
- job_name: 'mysql'
  static_configs:
  - targets: ['localhost:3306']
  metrics_path: /metrics
  params:
    collect[]:
    - info_schema.innodb_metrics
    - info_schema.processlist  
    - performance_schema.table_io_waits_summary_by_table
    
# å…³é”®æŒ‡æ ‡å®šä¹‰
rules:
- name: mysql.rules
  rules:
  - alert: MySQLSlowQueries
    expr: rate(mysql_global_status_slow_queries[5m]) > 0.1
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "MySQLæ…¢æŸ¥è¯¢å¢å¤š"
      description: "æ…¢æŸ¥è¯¢ç‡: {{ $value }}/s"
      
  - alert: MySQLHighConnections  
    expr: mysql_global_status_threads_connected / mysql_global_variables_max_connections > 0.8
    for: 1m
    labels:
      severity: critical
    annotations:
      summary: "MySQLè¿æ¥æ•°è¿‡é«˜"
      description: "è¿æ¥ä½¿ç”¨ç‡: {{ $value }}%"
```

</details>

### 7.3 æ€§èƒ½åŸºçº¿ä¸è¶‹åŠ¿åˆ†æ


**ğŸ“ˆ æ€§èƒ½è¶‹åŠ¿ç›‘æ§**ï¼š

```
æ€§èƒ½è¶‹åŠ¿å›¾ï¼ˆ7å¤©ï¼‰ï¼š
å“åº”æ—¶é—´(ms)
100 â”¤                              
 80 â”¤     â—                        
 60 â”¤   â—   â—                      
 40 â”¤ â—       â—   â—                
 20 â”¤           â—   â—â—â—â—â—â—         
  0 â””â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€
   å‘¨ä¸€ äºŒ ä¸‰ å›› äº” å…­ æ—¥

èŒƒå¼åŒ–è¡¨ç°: å¹³å‡65msï¼Œæ³¢åŠ¨è¾ƒå¤§
åèŒƒå¼è¡¨ç°: å¹³å‡25msï¼Œæ³¢åŠ¨è¾ƒå°
```

**å¼‚å¸¸æ£€æµ‹ç®—æ³•**ï¼š

> âš ï¸ **æ™ºèƒ½å‘Šè­¦**
> 
> - **åŸºçº¿åç§»æ£€æµ‹**ï¼šæ€§èƒ½æŒ‡æ ‡åç¦»å†å²åŸºçº¿è¶…è¿‡2ä¸ªæ ‡å‡†å·®
> - **è¶‹åŠ¿å¼‚å¸¸æ£€æµ‹**ï¼šä½¿ç”¨ç§»åŠ¨å¹³å‡å’ŒæŒ‡æ•°å¹³æ»‘æ£€æµ‹è¶‹åŠ¿å˜åŒ–  
> - **å‘¨æœŸæ€§åˆ†æ**ï¼šè¯†åˆ«ä¸šåŠ¡å‘¨æœŸæ€§æ¨¡å¼ï¼Œé¿å…è¯¯æŠ¥
> - **å¤šç»´åº¦å…³è”**ï¼šç»“åˆCPUã€å†…å­˜ã€I/Oç­‰æŒ‡æ ‡ç»¼åˆåˆ¤æ–­

### 7.4 è‡ªåŠ¨åŒ–ä¼˜åŒ–å»ºè®®


**ğŸ¤– æ™ºèƒ½ä¼˜åŒ–å¼•æ“**ï¼š

| æ£€æµ‹åœºæ™¯ | **è§¦å‘æ¡ä»¶** | **ä¼˜åŒ–å»ºè®®** | **è‡ªåŠ¨æ‰§è¡Œ** |
|---------|-------------|-------------|-------------|
| **æ…¢æŸ¥è¯¢å¢å¤š** | æ…¢æŸ¥è¯¢ç‡ > 5% | æ·»åŠ ç´¢å¼•ã€æŸ¥è¯¢é‡å†™ | âš ï¸ äººå·¥ç¡®è®¤ |
| **è¿æ¥æ•°è¿‡é«˜** | è¿æ¥ä½¿ç”¨ç‡ > 80% | è¿æ¥æ± è°ƒä¼˜ | âœ… è‡ªåŠ¨æ‰§è¡Œ |
| **ç¼“å­˜å‘½ä¸­ç‡ä½** | å‘½ä¸­ç‡ < 85% | ç¼“å­˜é¢„çƒ­ã€TTLè°ƒæ•´ | âœ… è‡ªåŠ¨æ‰§è¡Œ |
| **å­˜å‚¨ç©ºé—´ä¸è¶³** | ä½¿ç”¨ç‡ > 85% | æ•°æ®æ¸…ç†ã€åˆ†åŒºè¡¨ | âš ï¸ äººå·¥ç¡®è®¤ |

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ èŒƒå¼ä¸æ€§èƒ½æƒè¡¡ï¼šèŒƒå¼åŒ–ä¿è¯ä¸€è‡´æ€§ï¼ŒåèŒƒå¼åŒ–æå‡æ€§èƒ½
ğŸ”¸ OLTP vs OLAPç­–ç•¥ï¼šäº‹åŠ¡ç³»ç»ŸåèŒƒå¼åŒ–ï¼Œåˆ†æç³»ç»ŸååèŒƒå¼åŒ–  
ğŸ”¸ æ··åˆæ¶æ„è®¾è®¡ï¼šåˆ†å±‚å¤„ç†ï¼Œæ ¸å¿ƒæ•°æ®èŒƒå¼åŒ–ï¼Œå±•ç¤ºæ•°æ®åèŒƒå¼åŒ–
ğŸ”¸ æ€§èƒ½æµ‹è¯•æ–¹æ³•ï¼šåŸºå‡†æµ‹è¯•ã€è´Ÿè½½æµ‹è¯•ã€å‹åŠ›æµ‹è¯•çš„ç³»ç»Ÿåº”ç”¨
ğŸ”¸ ç›‘æ§æŒ‡æ ‡ä½“ç³»ï¼šå…¨æ–¹ä½ç›‘æ§ï¼ŒåŠæ—¶å‘ç°æ€§èƒ½é—®é¢˜
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æƒè¡¡å†³ç­–åŸåˆ™**
```
å†³ç­–æ¡†æ¶ï¼š
- æ•°æ®ä¸€è‡´æ€§è¦æ±‚ vs æŸ¥è¯¢æ€§èƒ½éœ€æ±‚
- å­˜å‚¨æˆæœ¬ vs è®¡ç®—æˆæœ¬  
- å¼€å‘å¤æ‚åº¦ vs è¿ç»´å¤æ‚åº¦
- çŸ­æœŸæ”¶ç›Š vs é•¿æœŸç»´æŠ¤
```

**ğŸ”¹ ä¼˜åŒ–å®æ–½ç­–ç•¥**
```
æ¸è¿›å¼ä¼˜åŒ–ï¼š
1. å»ºç«‹æ€§èƒ½åŸºçº¿
2. è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ  
3. å±€éƒ¨èŒƒå¼è°ƒæ•´
4. éªŒè¯ä¼˜åŒ–æ•ˆæœ
5. æŒç»­ç›‘æ§æ”¹è¿›
```

**ğŸ”¹ ç›‘æ§ä½“ç³»å»ºè®¾**
```
ç›‘æ§å±‚æ¬¡ï¼š
- ä¸šåŠ¡å±‚ï¼šç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- åº”ç”¨å±‚ï¼šæ¥å£å“åº”æ—¶é—´
- æ•°æ®å±‚ï¼šæŸ¥è¯¢æ€§èƒ½æŒ‡æ ‡  
- ç³»ç»Ÿå±‚ï¼šèµ„æºä½¿ç”¨æƒ…å†µ
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¡ é¡¹ç›®å®æ–½æŒ‡å¯¼**

> ğŸ¯ **å®æ–½è·¯å¾„å»ºè®®**
> 
> **é˜¶æ®µä¸€**ï¼šæ€§èƒ½åŸºçº¿å»ºç«‹
> - æ”¶é›†ç°æœ‰ç³»ç»Ÿæ€§èƒ½æ•°æ®
> - å»ºç«‹ç›‘æ§æŒ‡æ ‡ä½“ç³»
> - è¯†åˆ«æ€§èƒ½ç“¶é¢ˆç‚¹
> 
> **é˜¶æ®µäºŒ**ï¼šèŒƒå¼ç­–ç•¥è°ƒæ•´  
> - çƒ­ç‚¹æ•°æ®è¯†åˆ«å’Œä¼˜åŒ–
> - ç¼“å­˜ç­–ç•¥è®¾è®¡å®æ–½
> - ç´¢å¼•ç­–ç•¥ä¼˜åŒ–è°ƒæ•´
> 
> **é˜¶æ®µä¸‰**ï¼šæŒç»­ä¼˜åŒ–æ”¹è¿›
> - è‡ªåŠ¨åŒ–ç›‘æ§å‘Šè­¦
> - å®šæœŸæ€§èƒ½è¯„ä¼°  
> - ç­–ç•¥åŠ¨æ€è°ƒæ•´

**ğŸš€ æœ€ä½³å®è·µæ€»ç»“**

```markdown
âœ… **æˆåŠŸè¦ç´ **
â€¢ åŸºäºæ•°æ®é©±åŠ¨çš„å†³ç­–
â€¢ æ¸è¿›å¼çš„ä¼˜åŒ–ç­–ç•¥
â€¢ å®Œå–„çš„ç›‘æ§ä½“ç³»
â€¢ å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›å»ºè®¾

âš ï¸ **å¸¸è§é™·é˜±**
â€¢ è¿‡åº¦ä¼˜åŒ–å¯¼è‡´å¤æ‚åŒ–
â€¢ å¿½è§†æ•°æ®ä¸€è‡´æ€§è¦æ±‚
â€¢ ç¼ºä¹é•¿æœŸç»´æŠ¤è€ƒè™‘
â€¢ ç›²ç›®è¿½æ±‚æ€§èƒ½æŒ‡æ ‡

ğŸ¯ **æˆåŠŸæ ‡å‡†**
â€¢ æŸ¥è¯¢å“åº”æ—¶é—´è¾¾æ ‡
â€¢ ç³»ç»Ÿç¨³å®šæ€§æå‡
â€¢ å¼€å‘ç»´æŠ¤æ•ˆç‡æ”¹å–„  
â€¢ ç”¨æˆ·ä½“éªŒæ˜æ˜¾ä¼˜åŒ–
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- èŒƒå¼ä¸æ€§èƒ½æ˜¯å¤©å¹³ï¼Œéœ€è¦åŸºäºåœºæ™¯å¹³è¡¡
- OLTPé‡ä¸€è‡´æ€§ï¼ŒOLAPé‡æ€§èƒ½ï¼Œæ··åˆç³»ç»Ÿåˆ†å±‚å¤„ç†
- æ€§èƒ½ä¼˜åŒ–è¦æœ‰æ•°æ®æ”¯æ’‘ï¼Œç›‘æ§å…ˆè¡Œ
- æ¸è¿›å¼ä¼˜åŒ–æ¯”ä¸€æ¬¡æ€§é‡æ„é£é™©æ›´ä½
- æŠ€æœ¯é€‰å‹è¦è€ƒè™‘å›¢é˜Ÿèƒ½åŠ›å’Œé•¿æœŸç»´æŠ¤