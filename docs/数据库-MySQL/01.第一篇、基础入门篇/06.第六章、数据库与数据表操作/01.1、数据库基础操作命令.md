---
title: 1、数据库基础操作命令
---
## 📚 目录

1. [数据库基础操作概述](#1-数据库基础操作概述)
2. [数据库切换与查询](#2-数据库切换与查询)
3. [数据库信息查询方法](#3-数据库信息查询方法)
4. [数据库状态监控](#4-数据库状态监控)
5. [权限验证与安全检查](#5-权限验证与安全检查)
6. [数据库活跃度分析](#6-数据库活跃度分析)
7. [跨库操作管理](#7-跨库操作管理)
8. [实用操作技巧](#8-实用操作技巧)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🎯 数据库基础操作概述


### 1.1 什么是数据库基础操作


**简单理解**：数据库基础操作就是管理和查看MySQL中各个数据库的基本命令，就像在电脑上管理文件夹一样。

```
现实对比：
文件系统中: 查看文件夹 → 进入文件夹 → 查看文件夹属性
MySQL中:   查看数据库 → 切换数据库 → 查看数据库信息
```

### 1.2 为什么要掌握这些命令


**实际价值**：
- **日常管理**：快速查看和切换不同的数据库
- **问题排查**：检查数据库状态，定位问题根源
- **性能监控**：了解数据库使用情况和负载状态
- **权限管控**：确保操作安全，避免误操作

### 1.3 基础操作命令分类


```
数据库基础操作分类：
┌─────────────────────────────────────┐
│ 查询类命令                           │
│ ├─ SHOW DATABASES (查看数据库列表)    │
│ ├─ SHOW CREATE DATABASE (查看创建语法) │
│ └─ SELECT schema_name (信息查询)     │
├─────────────────────────────────────┤
│ 切换类命令                           │  
│ ├─ USE database_name (切换数据库)     │
│ └─ SELECT DATABASE() (查看当前库)     │
├─────────────────────────────────────┤
│ 状态类命令                           │
│ ├─ SHOW PROCESSLIST (连接状态)       │
│ ├─ SHOW STATUS (数据库状态)          │
│ └─ SHOW VARIABLES (配置参数)         │
└─────────────────────────────────────┘
```

---

## 2. 🔄 数据库切换与查询


### 2.1 USE DATABASE切换详解


**USE命令的作用**：指定当前操作的目标数据库，类似于在命令行中切换工作目录。

```sql
-- 基本语法
USE database_name;

-- 实际例子
USE company_db;  -- 切换到company_db数据库
-- 以后的SQL操作都在company_db中进行，除非再次切换
```

**切换后的影响**：
```sql
-- 切换前：需要指定完整路径
SELECT * FROM company_db.employees;
SELECT * FROM company_db.departments;

-- 使用USE company_db后：可以省略数据库名
SELECT * FROM employees;     -- 自动在company_db中查找
SELECT * FROM departments;   -- 自动在company_db中查找
```

> 💡 **实用技巧**：如果忘记当前在哪个数据库，使用`SELECT DATABASE();`查看当前数据库。

### 2.2 SHOW DATABASES查询详解


**查看所有数据库**：
```sql
-- 查看有权限访问的所有数据库
SHOW DATABASES;

-- 典型输出
+--------------------+
| Database           |
+--------------------+
| information_schema |  -- 系统信息库
| mysql             |  -- MySQL系统库  
| performance_schema |  -- 性能监控库
| sys               |  -- 系统辅助库
| company_db        |  -- 用户业务库
| test_db           |  -- 测试库
+--------------------+
```

**带条件的数据库查询**：
```sql
-- 查找特定模式的数据库
SHOW DATABASES LIKE 'company%';  -- 查找以company开头的数据库
SHOW DATABASES LIKE '%test%';    -- 查找包含test的数据库

-- 使用信息模式表查询
SELECT SCHEMA_NAME as '数据库名' 
FROM information_schema.SCHEMATA 
WHERE SCHEMA_NAME NOT IN ('mysql', 'information_schema', 'performance_schema', 'sys');
```

### 2.3 数据库存在性检查


**检查数据库是否存在**：
```sql
-- 方法1：使用SHOW语句
SHOW DATABASES LIKE 'company_db';
-- 如果存在会返回结果，不存在返回空

-- 方法2：使用information_schema查询
SELECT COUNT(*) as exists_flag
FROM information_schema.SCHEMATA 
WHERE SCHEMA_NAME = 'company_db';
-- 返回1表示存在，返回0表示不存在

-- 方法3：在程序中的安全检查
SELECT 1 FROM information_schema.SCHEMATA 
WHERE SCHEMA_NAME = 'company_db' 
LIMIT 1;
```

**实际应用场景**：
```sql
-- 创建数据库前先检查是否存在（避免报错）
CREATE DATABASE IF NOT EXISTS company_db 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- 删除数据库前先检查（避免误删不存在的库）
DROP DATABASE IF EXISTS old_test_db;
```

---

## 3. 📊 数据库信息查询方法


### 3.1 SHOW CREATE DATABASE语法详解


**查看数据库创建语法**：
```sql
-- 查看数据库的完整创建语句
SHOW CREATE DATABASE company_db;

-- 典型输出
+------------+-------------------------------------------------------------------+
| Database   | Create Database                                                   |
+------------+-------------------------------------------------------------------+
| company_db | CREATE DATABASE `company_db` /*!40100 DEFAULT CHARACTER SET     |
|            | utf8mb4 COLLATE utf8mb4_unicode_ci */ /*!80016 DEFAULT          |
|            | ENCRYPTION='N' */                                                |
+------------+-------------------------------------------------------------------+
```

**输出信息解读**：
- **字符集**：`utf8mb4` - 支持完整的UTF-8编码（包括emoji）
- **排序规则**：`utf8mb4_unicode_ci` - Unicode标准排序，忽略大小写
- **加密选项**：`ENCRYPTION='N'` - 未启用静态加密
- **版本注释**：`/*!40100 ... */` - 特定MySQL版本的语法

### 3.2 数据库大小统计


**查询单个数据库大小**：
```sql
-- 查询指定数据库的大小
SELECT 
    SCHEMA_NAME as '数据库名',
    ROUND(SUM(DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024, 2) as '大小(MB)'
FROM information_schema.TABLES 
WHERE SCHEMA_NAME = 'company_db'
GROUP BY SCHEMA_NAME;
```

**查询所有数据库大小排行**：
```sql
-- 统计所有数据库大小，按大小排序
SELECT 
    SCHEMA_NAME as '数据库名',
    COUNT(TABLE_NAME) as '表数量',
    ROUND(SUM(DATA_LENGTH) / 1024 / 1024, 2) as '数据大小(MB)',
    ROUND(SUM(INDEX_LENGTH) / 1024 / 1024, 2) as '索引大小(MB)',
    ROUND(SUM(DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024, 2) as '总大小(MB)'
FROM information_schema.TABLES 
WHERE SCHEMA_NAME NOT IN ('information_schema', 'mysql', 'performance_schema', 'sys')
GROUP BY SCHEMA_NAME
ORDER BY SUM(DATA_LENGTH + INDEX_LENGTH) DESC;
```

### 3.3 数据库详细信息查询


**查看数据库配置信息**：
```sql
-- 查看数据库字符集和排序规则
SELECT 
    SCHEMA_NAME as '数据库名',
    DEFAULT_CHARACTER_SET_NAME as '默认字符集',
    DEFAULT_COLLATION_NAME as '默认排序规则'
FROM information_schema.SCHEMATA 
WHERE SCHEMA_NAME = 'company_db';
```

**查看数据库表统计**：
```sql
-- 查看数据库中表的详细统计
SELECT 
    TABLE_NAME as '表名',
    ENGINE as '存储引擎',
    TABLE_ROWS as '行数',
    ROUND(DATA_LENGTH / 1024 / 1024, 2) as '数据大小(MB)',
    ROUND(INDEX_LENGTH / 1024 / 1024, 2) as '索引大小(MB)',
    CREATE_TIME as '创建时间',
    UPDATE_TIME as '更新时间'
FROM information_schema.TABLES 
WHERE TABLE_SCHEMA = 'company_db'
ORDER BY DATA_LENGTH DESC;
```

---

## 4. 📈 数据库状态监控


### 4.1 数据库连接状态查询


**查看当前连接状况**：
```sql
-- 查看所有活跃连接
SHOW PROCESSLIST;

-- 输出解读
+----+------+-----------+----------+---------+------+-------+------------------+
| Id | User | Host      | db       | Command | Time | State | Info             |
+----+------+-----------+----------+---------+------+-------+------------------+
| 1  | root | localhost | company  | Query   | 0    | init  | SHOW PROCESSLIST |
| 2  | app  | 10.1.1.5  | company  | Sleep   | 300  | -     | NULL             |
| 3  | app  | 10.1.1.6  | company  | Query   | 5    | Sending data | SELECT... |
+----+------+-----------+----------+---------+------+-------+------------------+
```

**字段含义解释**：
- **Id**：连接的唯一标识号
- **User**：连接的用户名
- **Host**：客户端IP地址和端口
- **db**：当前使用的数据库
- **Command**：当前执行的命令类型（Query、Sleep等）
- **Time**：命令执行的时间（秒）
- **State**：当前连接的状态
- **Info**：正在执行的SQL语句（可能被截断）

**详细连接信息查询**：
```sql
-- 查看完整的连接信息
SELECT 
    ID as '连接ID',
    USER as '用户',
    HOST as '客户端',
    DB as '数据库',
    COMMAND as '命令',
    TIME as '执行时间(秒)',
    STATE as '状态',
    LEFT(INFO, 50) as 'SQL语句'
FROM information_schema.PROCESSLIST 
WHERE COMMAND != 'Sleep'  -- 过滤空闲连接
ORDER BY TIME DESC;       -- 按执行时间排序
```

### 4.2 数据库锁状态监控


**查看表锁情况**：
```sql
-- 查看当前表锁状态
SHOW OPEN TABLES WHERE In_use > 0;

-- 输出示例
+----------+------------+--------+-------------+
| Database | Table      | In_use | Name_locked |
+----------+------------+--------+-------------+
| company  | employees  | 1      | 0           |
| company  | orders     | 2      | 0           |
+----------+------------+--------+-------------+
```

**查看事务锁等待情况**（MySQL 5.7+）：
```sql
-- 查看当前锁等待情况
SELECT 
    r.trx_id as '等待事务ID',
    r.trx_mysql_thread_id as '等待线程ID',
    r.trx_query as '等待SQL',
    b.trx_id as '阻塞事务ID', 
    b.trx_mysql_thread_id as '阻塞线程ID',
    b.trx_query as '阻塞SQL'
FROM information_schema.INNODB_LOCK_WAITS w
INNER JOIN information_schema.INNODB_TRX r ON r.trx_id = w.requesting_trx_id
INNER JOIN information_schema.INNODB_TRX b ON b.trx_id = w.blocking_trx_id;
```

### 4.3 数据库活跃度统计


**查看数据库访问频率**：
```sql
-- 按数据库统计连接数
SELECT 
    DB as '数据库名',
    COUNT(*) as '连接数',
    COUNT(CASE WHEN COMMAND != 'Sleep' THEN 1 END) as '活跃连接数'
FROM information_schema.PROCESSLIST 
WHERE DB IS NOT NULL
GROUP BY DB 
ORDER BY COUNT(*) DESC;
```

**查看数据库操作统计**：
```sql
-- 查看各数据库的查询统计（需要开启performance_schema）
SELECT 
    OBJECT_SCHEMA as '数据库名',
    SUM(COUNT_READ) as '读操作次数',
    SUM(COUNT_WRITE) as '写操作次数', 
    SUM(COUNT_READ + COUNT_WRITE) as '总操作次数'
FROM performance_schema.table_io_waits_summary_by_table
WHERE OBJECT_SCHEMA NOT IN ('mysql', 'information_schema', 'performance_schema', 'sys')
GROUP BY OBJECT_SCHEMA
ORDER BY SUM(COUNT_READ + COUNT_WRITE) DESC;
```

**数据库使用热度分析**：
```sql
-- 分析各数据库的使用热度
SELECT 
    table_schema as '数据库名',
    COUNT(table_name) as '表数量',
    SUM(table_rows) as '总行数',
    ROUND(SUM(data_length) / 1024 / 1024, 2) as '数据大小(MB)',
    CASE 
        WHEN SUM(table_rows) > 1000000 THEN '🔥 高活跃'
        WHEN SUM(table_rows) > 100000 THEN '🔸 中活跃'  
        ELSE '🔹 低活跃'
    END as '活跃度'
FROM information_schema.tables
WHERE table_schema NOT IN ('information_schema', 'mysql', 'performance_schema', 'sys')
GROUP BY table_schema
ORDER BY SUM(table_rows) DESC;
```

---

## 5. 🛡️ 权限验证与安全检查


### 5.1 操作权限验证


**检查当前用户权限**：
```sql
-- 查看当前用户信息
SELECT USER(), CURRENT_USER(), DATABASE();

-- 输出示例
+----------------+----------------+------------+
| USER()         | CURRENT_USER() | DATABASE() |
+----------------+----------------+------------+
| app@10.1.1.100 | app@%          | company_db |
+----------------+----------------+------------+
```

**查看用户数据库权限**：
```sql
-- 查看当前用户对各数据库的权限
SHOW GRANTS;

-- 典型输出
+--------------------------------------------------------+
| Grants for app@%                                      |
+--------------------------------------------------------+
| GRANT USAGE ON *.* TO `app`@`%`                      |
| GRANT SELECT, INSERT, UPDATE, DELETE ON `company_db`.* TO `app`@`%` |
| GRANT SELECT ON `logs_db`.* TO `app`@`%`             |
+--------------------------------------------------------+
```

**权限级别解释**：
```
MySQL权限层级：
全局权限 (*.*) ← 最高级别，影响所有数据库
    ↓
数据库权限 (database.*) ← 影响指定数据库的所有表  
    ↓
表权限 (database.table) ← 影响指定表
    ↓
字段权限 (database.table.column) ← 最细粒度
```

### 5.2 跨库操作权限验证


**跨库查询权限检查**：
```sql
-- 检查是否有跨库查询权限
SELECT 
    SCHEMA_NAME as '可访问数据库',
    CASE 
        WHEN SCHEMA_NAME IN (
            SELECT DISTINCT TABLE_SCHEMA 
            FROM information_schema.USER_PRIVILEGES 
            WHERE PRIVILEGE_TYPE = 'SELECT'
        ) THEN '✅ 有SELECT权限'
        ELSE '❌ 无SELECT权限'
    END as '权限状态'
FROM information_schema.SCHEMATA
WHERE SCHEMA_NAME NOT IN ('information_schema', 'mysql', 'performance_schema', 'sys');
```

**安全的跨库操作模式**：
```sql
-- 明确指定数据库名的跨库查询
SELECT 
    u.name,
    o.order_total
FROM company_db.users u
LEFT JOIN orders_db.orders o ON u.id = o.user_id
WHERE u.status = 'active';

-- 使用别名简化跨库操作  
SELECT 
    u.name,
    COUNT(o.id) as order_count
FROM company_db.users u
LEFT JOIN orders_db.orders o ON u.id = o.user_id  
GROUP BY u.id, u.name;
```

---

## 6. 📊 数据库活跃度分析


### 6.1 连接活跃度监控


**实时连接状态分析**：
```sql
-- 按用户分组统计连接情况
SELECT 
    USER as '用户名',
    COUNT(*) as '总连接数',
    COUNT(CASE WHEN COMMAND = 'Query' THEN 1 END) as '执行中',
    COUNT(CASE WHEN COMMAND = 'Sleep' THEN 1 END) as '空闲中',
    ROUND(AVG(TIME), 2) as '平均连接时间(秒)'
FROM information_schema.PROCESSLIST 
GROUP BY USER 
ORDER BY COUNT(*) DESC;
```

**按数据库分析连接分布**：
```sql
-- 统计各数据库的连接使用情况
SELECT 
    IFNULL(DB, '未指定') as '数据库',
    COUNT(*) as '连接数',
    GROUP_CONCAT(DISTINCT USER) as '访问用户',
    GROUP_CONCAT(DISTINCT HOST) as '来源主机'
FROM information_schema.PROCESSLIST 
GROUP BY DB
ORDER BY COUNT(*) DESC;
```

### 6.2 数据库使用统计分析


**表访问热度统计**（需要Performance Schema）：
```sql
-- 查看各数据库中最活跃的表
SELECT 
    OBJECT_SCHEMA as '数据库',
    OBJECT_NAME as '表名',
    COUNT_READ as '读取次数',
    COUNT_WRITE as '写入次数',
    COUNT_READ + COUNT_WRITE as '总访问次数',
    CASE 
        WHEN COUNT_READ + COUNT_WRITE > 10000 THEN '🔥 热点表'
        WHEN COUNT_READ + COUNT_WRITE > 1000 THEN '🔸 活跃表'
        ELSE '🔹 冷门表'
    END as '热度等级'
FROM performance_schema.table_io_waits_summary_by_table
WHERE OBJECT_SCHEMA NOT IN ('mysql', 'information_schema', 'performance_schema', 'sys')
ORDER BY COUNT_READ + COUNT_WRITE DESC
LIMIT 20;
```

### 6.3 数据库健康度评估


**综合健康度检查**：
```sql
-- 数据库健康度综合评估
SELECT 
    s.SCHEMA_NAME as '数据库名',
    COUNT(t.TABLE_NAME) as '表数量',
    ROUND(SUM(t.DATA_LENGTH + t.INDEX_LENGTH) / 1024 / 1024, 2) as '大小(MB)',
    -- 连接数统计
    IFNULL(p.connection_count, 0) as '当前连接数',
    -- 健康度评级
    CASE 
        WHEN COUNT(t.TABLE_NAME) = 0 THEN '⚠️ 空数据库'
        WHEN SUM(t.DATA_LENGTH + t.INDEX_LENGTH) / 1024 / 1024 > 1000 THEN '🔴 大型库'
        WHEN IFNULL(p.connection_count, 0) > 50 THEN '🟡 高负载'
        ELSE '🟢 正常'
    END as '健康状态'
FROM information_schema.SCHEMATA s
LEFT JOIN information_schema.TABLES t ON s.SCHEMA_NAME = t.TABLE_SCHEMA
LEFT JOIN (
    SELECT DB, COUNT(*) as connection_count
    FROM information_schema.PROCESSLIST 
    WHERE DB IS NOT NULL GROUP BY DB
) p ON s.SCHEMA_NAME = p.DB
WHERE s.SCHEMA_NAME NOT IN ('information_schema', 'mysql', 'performance_schema', 'sys')
GROUP BY s.SCHEMA_NAME
ORDER BY SUM(t.DATA_LENGTH + t.INDEX_LENGTH) DESC;
```

---

## 7. 🔀 跨库操作管理


### 7.1 跨库查询最佳实践


**跨库JOIN操作**：
```sql
-- 标准的跨库关联查询
SELECT 
    u.name as '用户名',
    u.email as '邮箱',
    COUNT(o.id) as '订单数量',
    SUM(o.amount) as '订单总额'
FROM user_db.users u
LEFT JOIN order_db.orders o ON u.id = o.user_id
WHERE u.status = 'active'
GROUP BY u.id, u.name, u.email
HAVING COUNT(o.id) > 0
ORDER BY SUM(o.amount) DESC;
```

**跨库操作性能注意事项**：
```
跨库操作性能影响：
┌─────────────────────────────────────┐
│ 同一实例跨库：                       │
│ ├─ 性能影响：较小                    │  
│ ├─ 事务支持：完整支持                │
│ └─ 推荐场景：相关业务数据            │
├─────────────────────────────────────┤
│ 跨实例跨库：                         │
│ ├─ 性能影响：较大（网络开销）         │
│ ├─ 事务支持：不支持分布式事务         │  
│ └─ 推荐场景：只读查询或数据同步       │
└─────────────────────────────────────┘
```

### 7.2 跨库操作权限控制


**细粒度权限设置**：
```sql
-- 为用户设置特定数据库的权限
GRANT SELECT ON user_db.* TO 'report_user'@'%';
GRANT SELECT ON order_db.orders TO 'report_user'@'%';  -- 只能查看orders表
GRANT SELECT ON log_db.access_logs TO 'report_user'@'%';

-- 查看设置的权限
SHOW GRANTS FOR 'report_user'@'%';
```

**权限验证脚本**：
```sql
-- 检查用户是否有跨库查询权限
SELECT 
    GRANTEE as '用户',
    TABLE_SCHEMA as '数据库',
    TABLE_NAME as '表名',
    PRIVILEGE_TYPE as '权限类型',
    IS_GRANTABLE as '可授权'
FROM information_schema.TABLE_PRIVILEGES 
WHERE GRANTEE = "'app'@'%'"
ORDER BY TABLE_SCHEMA, TABLE_NAME;
```

---

## 8. 🔧 实用操作技巧


### 8.1 数据库操作常用脚本


**快速切换和信息查看**：
```sql
-- 创建便捷的数据库信息查看函数
DELIMITER //
CREATE PROCEDURE ShowDBInfo(IN db_name VARCHAR(64))
BEGIN
    -- 显示数据库基本信息
    SELECT 
        SCHEMA_NAME as '数据库名',
        DEFAULT_CHARACTER_SET_NAME as '字符集',
        DEFAULT_COLLATION_NAME as '排序规则'
    FROM information_schema.SCHEMATA 
    WHERE SCHEMA_NAME = db_name;
    
    -- 显示表统计信息
    SELECT 
        COUNT(*) as '表数量',
        ROUND(SUM(DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024, 2) as '总大小(MB)'
    FROM information_schema.TABLES 
    WHERE TABLE_SCHEMA = db_name;
    
    -- 显示当前连接情况
    SELECT COUNT(*) as '当前连接数'
    FROM information_schema.PROCESSLIST 
    WHERE DB = db_name;
END //
DELIMITER ;

-- 使用示例
CALL ShowDBInfo('company_db');
```

### 8.2 批量数据库操作


**批量查看多个数据库状态**：
```sql
-- 一次性查看所有业务数据库的状态摘要
SELECT 
    s.SCHEMA_NAME as '数据库名',
    IFNULL(t.table_count, 0) as '表数量',
    IFNULL(t.total_size_mb, 0) as '大小(MB)',
    IFNULL(p.conn_count, 0) as '连接数',
    CASE 
        WHEN IFNULL(t.table_count, 0) = 0 THEN '⚪ 空库'
        WHEN IFNULL(p.conn_count, 0) > 10 THEN '🔥 高负载'
        WHEN IFNULL(t.total_size_mb, 0) > 100 THEN '📊 大数据'
        ELSE '✅ 正常'
    END as '状态标识'
FROM information_schema.SCHEMATA s
LEFT JOIN (
    SELECT 
        TABLE_SCHEMA,
        COUNT(*) as table_count,
        ROUND(SUM(DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024, 2) as total_size_mb
    FROM information_schema.TABLES 
    GROUP BY TABLE_SCHEMA
) t ON s.SCHEMA_NAME = t.TABLE_SCHEMA
LEFT JOIN (
    SELECT DB, COUNT(*) as conn_count
    FROM information_schema.PROCESSLIST 
    WHERE DB IS NOT NULL 
    GROUP BY DB
) p ON s.SCHEMA_NAME = p.DB
WHERE s.SCHEMA_NAME NOT IN ('information_schema', 'mysql', 'performance_schema', 'sys')
ORDER BY t.total_size_mb DESC;
```

### 8.3 数据库维护脚本


**定期检查脚本**：
```sql
-- 数据库健康检查脚本
-- 检查1：长时间运行的查询
SELECT '长时间查询检查' as '检查项';
SELECT 
    ID, USER, HOST, DB, TIME, LEFT(INFO, 100) as SQL_TEXT
FROM information_schema.PROCESSLIST 
WHERE COMMAND = 'Query' AND TIME > 30  -- 超过30秒的查询
ORDER BY TIME DESC;

-- 检查2：锁等待情况
SELECT '锁等待检查' as '检查项'; 
SHOW OPEN TABLES WHERE In_use > 0;

-- 检查3：连接数统计
SELECT '连接数检查' as '检查项';
SELECT 
    COUNT(*) as '总连接数',
    COUNT(CASE WHEN COMMAND != 'Sleep' THEN 1 END) as '活跃连接数',
    COUNT(CASE WHEN TIME > 300 THEN 1 END) as '长时间连接数'
FROM information_schema.PROCESSLIST;
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的基础命令


```
🔸 数据库切换：USE database_name; SELECT DATABASE();
🔸 数据库查看：SHOW DATABASES; SHOW CREATE DATABASE db_name;
🔸 连接状态：SHOW PROCESSLIST; 查看活跃连接情况
🔸 权限检查：SHOW GRANTS; 确认操作权限范围
🔸 锁状态：SHOW OPEN TABLES; 监控表锁情况
🔸 跨库操作：明确指定数据库名，注意权限控制
```

### 9.2 关键理解要点


**🔹 数据库操作的本质**
```
理解要点：
- 数据库是表的容器，类似文件夹管理文件
- 切换数据库只是改变默认的操作上下文
- 跨库操作需要明确指定完整路径
```

**🔹 权限系统的重要性**
```
安全原则：
- 最小权限原则：只授予必需的权限
- 权限分离：不同用户不同权限级别
- 定期审查：及时回收不需要的权限
```

**🔹 监控的价值**
```
监控意义：
- 及时发现性能问题和安全风险
- 为容量规划提供数据支撑  
- 优化数据库使用效率
```

### 9.3 实际应用场景


**🎯 日常运维场景**：
- **环境切换**：开发、测试、生产环境的数据库切换
- **权限审查**：定期检查用户权限，确保安全合规
- **性能监控**：监控连接数、锁状态，预防性能问题

**🔍 问题排查场景**：
- **连接异常**：通过PROCESSLIST查看连接状态和执行情况
- **权限报错**：通过GRANTS查看用户权限，定位权限问题
- **跨库查询失败**：检查目标数据库是否存在及权限是否足够

**🏗️ 系统设计场景**：
- **数据库规划**：基于业务特点设计数据库分割策略
- **权限设计**：为不同角色设置合适的数据库访问权限  
- **监控体系**：建立数据库状态监控和告警机制

### 9.4 最佳实践建议


**🔸 安全使用建议**：
```
操作安全：
├─ 生产环境谨慎使用USE命令，避免误操作
├─ 重要操作前先检查当前数据库：SELECT DATABASE()
├─ 跨库操作明确指定数据库名，不依赖默认库
└─ 定期审查用户权限，及时回收不必要权限
```

**🔸 性能优化建议**：
```
性能考虑：
├─ 避免频繁的跨实例跨库查询
├─ 合理设计数据库拆分，减少跨库需求
├─ 监控连接数，避免连接池耗尽
└─ 定期分析慢查询，优化跨库查询性能
```

**🔸 运维管理建议**：
```
管理规范：
├─ 建立数据库命名规范，便于识别和管理
├─ 定期备份重要数据库的结构和数据
├─ 建立监控告警，及时发现异常情况  
└─ 记录重要操作日志，便于问题追溯
```

**核心记忆口诀**：
```
切换查看是基础，USE命令要记住
SHOW命令查信息，权限状态要清楚
跨库操作需谨慎，权限检查不马虎
监控分析助运维，问题定位有门路
```