---
title: 11、SQL语句结构与语法基础
---
## 📚 目录

1. [SQL语言概述与基础框架](#1-sql语言概述与基础框架)
2. [SQL语句基本结构详解](#2-sql语句基本结构详解)
3. [SELECT语句完整语法结构](#3-select语句完整语法结构)
4. [SQL语句执行顺序机制](#4-sql语句执行顺序机制)
5. [子句clause概念与分类](#5-子句clause概念与分类)
6. [表达式expression基本构成](#6-表达式expression基本构成)
7. [SQL语法学习路径指导](#7-sql语法学习路径指导)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 SQL语言概述与基础框架


### 1.1 SQL是什么？


**🔸 SQL基本概念**
```
SQL = Structured Query Language（结构化查询语言）
本质：专门用来操作关系型数据库的语言
特点：声明式语言，告诉数据库"要什么"，不用管"怎么做"
```

**💡 通俗理解**
SQL就像是和数据库对话的**标准语言**，比如：
- 你对数据库说："给我所有年龄大于20的学生信息"
- 数据库就会按照你的要求返回结果
- 你不需要告诉它具体怎么找，它自己会优化查找方式

### 1.2 SQL语法基础框架


**🔑 SQL语法学习路径**
```
SQL学习的三个层次：

1️⃣ 语法结构层：
   • 了解SQL语句的基本组成
   • 掌握各种子句的作用
   • 理解执行顺序

2️⃣ 功能操作层：
   • 数据查询（SELECT）
   • 数据修改（INSERT/UPDATE/DELETE）
   • 结构定义（CREATE/ALTER/DROP）

3️⃣ 高级应用层：
   • 复杂查询和子查询
   • 存储过程和函数
   • 事务和并发控制
```

### 1.3 SQL语言分类


**🔸 按功能分类**
```
📊 DQL（Data Query Language）- 数据查询语言
• 核心：SELECT语句
• 作用：从数据库中检索数据
• 使用频率：最高（80%以上的操作）

📝 DML（Data Manipulation Language）- 数据操作语言  
• 包括：INSERT、UPDATE、DELETE
• 作用：增加、修改、删除数据
• 使用频率：日常操作

🏗️ DDL（Data Definition Language）- 数据定义语言
• 包括：CREATE、ALTER、DROP
• 作用：定义数据库结构
• 使用频率：建表阶段

🔧 DCL（Data Control Language）- 数据控制语言
• 包括：GRANT、REVOKE
• 作用：控制数据访问权限
• 使用频率：管理员操作
```

---

## 2. 🏗️ SQL语句基本结构详解


### 2.1 SQL语句的基本组成


**🔸 语句结构理解方法**
把SQL语句想象成**人类的句子结构**：

```
人类语句：我要从学生中找出年龄大于20的人的姓名
SQL语句：SELECT 姓名 FROM 学生表 WHERE 年龄 > 20;

对应关系：
• "我要...的" → SELECT（选择什么）
• "从...中" → FROM（从哪里选）  
• "找出..." → WHERE（什么条件）
```

**🔸 SQL语句基本格式**
```sql
-- SQL语句基本结构
[动词] [对象] [条件/修饰]

示例：
SELECT 列名 FROM 表名 WHERE 条件;
  ↑     ↑      ↑       ↑
 动词   对象   来源    条件
```

### 2.2 SQL语句的组成元素


**🔸 关键字（Keywords）**
```
定义：SQL预定义的具有特殊含义的单词
特点：不区分大小写，但建议大写以便阅读

常用关键字：
• 查询：SELECT, FROM, WHERE, ORDER BY
• 修改：INSERT, UPDATE, DELETE
• 定义：CREATE, ALTER, DROP
• 控制：BEGIN, COMMIT, ROLLBACK
```

**🔸 标识符（Identifiers）**
```
定义：用户自定义的名称（表名、列名、索引名等）
规则：
✅ 以字母开头
✅ 可包含字母、数字、下划线
✅ 长度通常不超过30字符
❌ 不能是SQL关键字
❌ 不能包含空格（除非用引号包围）

示例：
✅ student_info, user_id, order_2023
❌ select, 123abc, user info
```

**🔸 字面值（Literals）**
```
字符串字面值：'Hello World', '张三'
数字字面值：123, 3.14, -456
日期字面值：'2023-12-25', '2023-12-25 14:30:00'
布尔字面值：TRUE, FALSE, NULL
```

### 2.3 SQL语句结构层次


**🔸 语句层次结构**
```
SQL语句结构层次：

完整SQL语句
    │
    ├── 主子句（必需）
    │   ├── SELECT子句（选择什么）
    │   └── FROM子句（从哪里选）
    │
    └── 可选子句
        ├── WHERE子句（过滤条件）
        ├── GROUP BY子句（分组）
        ├── HAVING子句（分组过滤）
        └── ORDER BY子句（排序）
```

---

## 3. 📋 SELECT语句完整语法结构


### 3.1 SELECT语句完整语法


**🔸 完整语法结构**
```sql
SELECT [DISTINCT] 列名列表
FROM 表名列表
[WHERE 过滤条件]
[GROUP BY 分组列表]
[HAVING 分组过滤条件]
[ORDER BY 排序列表]
[LIMIT 限制行数];
```

**💡 记忆口诀**
```
选择 从哪 条件 分组 分组条件 排序 限制
SELECT FROM WHERE GROUP BY HAVING ORDER BY LIMIT
```

### 3.2 SELECT子句详解


**🔸 SELECT子句的作用**
```
作用：指定要查询的列（投影操作）
语法：SELECT 列名1, 列名2, ...

选择方式：
• 具体列名：SELECT 姓名, 年龄
• 所有列：SELECT *
• 计算列：SELECT 姓名, 年龄+1 AS 明年年龄
• 常量：SELECT '学生' AS 类型, 姓名
```

**🔸 DISTINCT关键字**
```sql
-- 去除重复行
SELECT DISTINCT 专业 FROM 学生表;

对比：
SELECT 专业 FROM 学生表;
-- 结果：计算机, 数学, 计算机, 物理, 数学

SELECT DISTINCT 专业 FROM 学生表;  
-- 结果：计算机, 数学, 物理
```

### 3.3 FROM子句详解


**🔸 FROM子句的作用**
```
作用：指定数据来源（表、视图、子查询）
语法：FROM 表名 [别名]

数据源类型：
• 单表：FROM 学生表
• 多表：FROM 学生表, 课程表
• 子查询：FROM (SELECT ...)
• 视图：FROM 学生视图
```

**🔸 表别名使用**
```sql
-- 表别名简化查询
SELECT s.姓名, s.年龄 
FROM 学生表 AS s
WHERE s.年龄 > 20;

-- 多表查询中的别名
SELECT s.姓名, c.课程名
FROM 学生表 s, 选课表 sc, 课程表 c
WHERE s.学号 = sc.学号 AND sc.课程号 = c.课程号;
```

---

## 4. ⚡ SQL语句执行顺序机制


### 4.1 SQL语句执行顺序


**🔥 关键执行顺序：FROM → WHERE → GROUP BY → HAVING → SELECT → ORDER BY**

```
执行顺序图示：

数据源              过滤                分组                投影                排序
┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐
│  FROM   │───▶│  WHERE  │───▶│GROUP BY │───▶│ SELECT  │───▶│ORDER BY │
│(获取表) │    │(行过滤) │    │(数据分组)│    │(列选择) │    │(结果排序)│
└─────────┘    └─────────┘    └─────────┘    └─────────┘    └─────────┘
                                    │
                                    ▼
                              ┌─────────┐
                              │ HAVING  │
                              │(分组过滤)│
                              └─────────┘
```

### 4.2 执行顺序详细说明


**🔸 步骤1：FROM子句**
```
作用：确定数据来源，加载表数据到内存
处理：表连接、子查询执行
结果：产生一个虚拟表VT1

示例理解：
FROM 学生表, 成绩表
↓
先把学生表和成绩表的数据都加载进来
```

**🔸 步骤2：WHERE子句**
```
作用：对VT1中的行进行过滤
处理：逐行检查条件，保留满足条件的行
结果：产生虚拟表VT2

示例理解：
WHERE 年龄 > 20 AND 成绩 > 80
↓
只保留年龄大于20且成绩大于80的学生记录
```

**🔸 步骤3：GROUP BY子句**
```
作用：将VT2中的行按指定列分组
处理：相同值的行归为一组
结果：产生虚拟表VT3

示例理解：
GROUP BY 专业
↓
计算机专业的学生归为一组
数学专业的学生归为一组
物理专业的学生归为一组
```

**🔸 步骤4：HAVING子句**
```
作用：对分组后的结果进行过滤
处理：对每个分组应用条件
结果：产生虚拟表VT4

示例理解：
HAVING COUNT(*) > 3
↓
只保留学生人数大于3的专业分组
```

**🔸 步骤5：SELECT子句**
```
作用：选择要显示的列
处理：投影操作，计算表达式
结果：产生虚拟表VT5

示例理解：
SELECT 专业, COUNT(*) AS 人数
↓
只显示专业名称和该专业的人数
```

**🔸 步骤6：ORDER BY子句**
```
作用：对最终结果排序
处理：按指定列对行进行排序
结果：产生最终结果集

示例理解：
ORDER BY 人数 DESC
↓
按人数从多到少排列专业
```

### 4.3 执行顺序实例演示


**🔸 完整SQL示例**
```sql
SELECT 专业, COUNT(*) AS 人数, AVG(年龄) AS 平均年龄
FROM 学生表
WHERE 年龄 >= 18
GROUP BY 专业
HAVING COUNT(*) >= 2
ORDER BY 人数 DESC;
```

**🔸 执行过程分析**
```
执行步骤详解：

1. FROM 学生表
   → 加载学生表所有数据

2. WHERE 年龄 >= 18  
   → 过滤掉年龄小于18的学生

3. GROUP BY 专业
   → 按专业分组：
     计算机组：{张三, 李四, 王五}
     数学组：{赵六, 钱七}
     物理组：{孙八}

4. HAVING COUNT(*) >= 2
   → 过滤掉人数少于2的分组：
     保留：计算机组(3人), 数学组(2人)
     排除：物理组(1人)

5. SELECT 专业, COUNT(*), AVG(年龄)
   → 计算每组的专业名、人数、平均年龄

6. ORDER BY 人数 DESC
   → 按人数降序排列最终结果
```

---

## 5. 📄 子句clause概念与分类


### 5.1 什么是子句？


**🔸 子句clause概念**
```
定义：子句是SQL语句的组成部分，完成特定功能
理解：就像句子中的短语，每个短语有特定作用

英语句子：I want to buy a red car from the shop.
  主语   谓语    宾语      状语

SQL语句：SELECT 姓名 FROM 学生表 WHERE 年龄 > 20;
        SELECT子句 FROM子句   WHERE子句
```

### 5.2 子句分类详解


**🔸 数据源子句**
```
FROM子句：
• 作用：指定数据来源
• 位置：必须紧跟SELECT
• 内容：表名、视图名、子查询

语法形式：
FROM 表名                    -- 单表
FROM 表名1, 表名2            -- 多表（笛卡尔积）
FROM 表名1 JOIN 表名2        -- 连接
FROM (子查询) AS 别名        -- 子查询作为数据源
```

**🔸 条件子句**
```
WHERE子句：
• 作用：过滤行数据
• 时机：分组之前过滤
• 条件：不能使用聚合函数

HAVING子句：
• 作用：过滤分组结果
• 时机：分组之后过滤  
• 条件：可以使用聚合函数
```

**🔸 分组与排序子句**
```
GROUP BY子句：
• 作用：将数据按指定列分组
• 效果：相同值的行归为一组
• 配合：通常与聚合函数一起使用

ORDER BY子句：
• 作用：对结果进行排序
• 位置：总是在最后执行
• 选项：ASC（升序）、DESC（降序）
```

### 5.3 子句使用规则


**🔸 子句顺序规则**
```
固定顺序（不能颠倒）：
SELECT → FROM → WHERE → GROUP BY → HAVING → ORDER BY

记忆方法：
"选择 从哪 条件 分组 分组条件 排序"
"S-F-W-G-H-O"
```

**🔸 子句依赖关系**
```
必需子句：
• SELECT：必须有（指定要查询什么）
• FROM：查询表数据时必须有

可选子句：
• WHERE：需要过滤时使用
• GROUP BY：需要分组统计时使用
• HAVING：需要过滤分组时使用（依赖GROUP BY）
• ORDER BY：需要排序时使用
```

---

## 6. 🧮 表达式expression基本构成


### 6.1 什么是表达式？


**🔸 表达式基本概念**
```
定义：能够计算出值的代码片段
位置：可以出现在SELECT、WHERE、HAVING等子句中
结果：总是返回一个值

表达式类型：
🔢 算术表达式：年龄 + 1, 价格 * 0.8
🔤 字符串表达式：CONCAT(姓, 名)
📅 日期表达式：DATEADD(day, 30, 出生日期)
✅ 逻辑表达式：年龄 > 18 AND 性别 = '男'
```

### 6.2 表达式的基本构成


**🔸 操作数（Operands）**
```
列名：student.age, 年龄
常量：20, '张三', '2023-12-25'
函数：COUNT(*), SUM(成绩), NOW()
子查询：(SELECT MAX(年龄) FROM 学生表)
```

**🔸 操作符（Operators）**
```
算术操作符：
+ - * / %（加减乘除模）

比较操作符：
= != < > <= >= 
LIKE（模糊匹配）
IN（包含）
BETWEEN（范围）
IS NULL（空值判断）

逻辑操作符：
AND OR NOT
```

### 6.3 表达式使用示例


**🔸 在SELECT中使用表达式**
```sql
-- 计算表达式
SELECT 
    姓名,
    年龄,
    年龄 + 1 AS 明年年龄,
    CASE 
        WHEN 年龄 >= 18 THEN '成年'
        ELSE '未成年'
    END AS 年龄段
FROM 学生表;
```

**🔸 在WHERE中使用表达式**
```sql
-- 条件表达式
SELECT *
FROM 学生表
WHERE 年龄 BETWEEN 18 AND 25
  AND 专业 IN ('计算机', '软件工程')
  AND 姓名 LIKE '张%';
```

**🔸 聚合表达式**
```sql
-- 聚合函数表达式
SELECT 
    专业,
    COUNT(*) AS 学生数量,
    AVG(年龄) AS 平均年龄,
    MAX(年龄) - MIN(年龄) AS 年龄跨度
FROM 学生表
GROUP BY 专业;
```

---

## 7. 🎓 SQL语法学习路径指导


### 7.1 SQL学习的三个阶段


**🔸 阶段1：基础语法（1-2周）**
```
掌握目标：
✅ 理解SQL语句基本结构
✅ 掌握SELECT基本查询
✅ 理解执行顺序概念
✅ 熟悉常用数据类型

学习重点：
• 单表查询语法
• WHERE条件的写法
• 基本函数使用
• 数据类型理解

实践建议：
每天写10-15个简单查询语句
从最简单的 SELECT * FROM 表名 开始
```

**🔸 阶段2：进阶应用（2-3周）**
```
掌握目标：
✅ 熟练使用分组和聚合
✅ 掌握多表连接查询
✅ 理解子查询概念
✅ 熟悉数据修改操作

学习重点：
• GROUP BY和聚合函数
• JOIN各种连接方式
• INSERT/UPDATE/DELETE操作
• 简单子查询

实践建议：
设计小型数据库，实际操作
练习复杂的多表查询
```

**🔸 阶段3：高级特性（3-4周）**
```
掌握目标：
✅ 复杂子查询和窗口函数
✅ 存储过程和函数
✅ 视图和索引管理
✅ 事务和并发控制

学习重点：
• 相关子查询和EXISTS
• 窗口函数应用
• DDL语句熟练使用
• 性能优化基础
```

### 7.2 语句结构理解方法


**🔸 理解SQL的思维方式**
```
从人类思维到SQL思维：

人类思维：
"我想知道每个班级有多少个学生，而且只看人数超过30的班级，按人数排序"

SQL思维转换：
1. 数据源：FROM 学生表
2. 分组：GROUP BY 班级  
3. 统计：COUNT(*) AS 人数
4. 过滤：HAVING COUNT(*) > 30
5. 排序：ORDER BY COUNT(*) DESC

最终SQL：
SELECT 班级, COUNT(*) AS 人数
FROM 学生表  
GROUP BY 班级
HAVING COUNT(*) > 30
ORDER BY COUNT(*) DESC;
```

**🔸 常见理解误区**
```
❌ 误区1：WHERE和HAVING搞混
错误理解：WHERE用于过滤列，HAVING用于过滤行

✅ 正确理解：
WHERE：分组前过滤行（不能用聚合函数）
HAVING：分组后过滤组（可以用聚合函数）

❌ 误区2：以为SELECT最先执行
错误理解：先选择列，再从表中查找

✅ 正确理解：
先确定数据源(FROM)，再选择列(SELECT)
就像先决定从哪个书架找书，再决定要什么书
```

---

## 8. 📋 核心要点总结


### 8.1 SQL语句结构核心


```
🔥 SQL语句基本结构：
• 关键字 + 标识符 + 字面值 + 操作符
• 声明式语言：说明要什么，不说明怎么做
• 结构化语法：固定的子句顺序

🔥 SELECT语句是核心：
• 最常用的SQL语句类型
• 包含最完整的子句类型
• 掌握SELECT就掌握了SQL语法基础
```

### 8.2 执行顺序记忆要点


```
🔥 关键执行顺序：
FROM → WHERE → GROUP BY → HAVING → SELECT → ORDER BY

🔑 记忆口诀：
"从哪里找，什么条件，如何分组，组的条件，选什么，怎么排"

💡 理解要点：
• FROM确定数据源（先要有数据）
• WHERE过滤行（在分组前筛选）
• GROUP BY分组（相同的归一类）
• HAVING过滤组（分组后再筛选）
• SELECT投影（选择要显示的列）
• ORDER BY排序（最后整理结果）
```

### 8.3 子句与表达式要点


```
🔸 子句clause理解：
• SQL语句的功能模块
• 每个子句完成特定任务
• 子句有固定的出现顺序
• 有些子句是必需的，有些是可选的

🔸 表达式expression理解：
• 能计算出值的代码片段
• 可以是简单的列名，也可以是复杂计算
• 出现在子句内部，为子句提供具体值
• 理解表达式是写复杂查询的基础
```

### 8.4 学习方法建议


```
🎯 学习策略：
• 从简单到复杂：先单表后多表
• 从理解到应用：先理解语法再写代码
• 从模仿到创新：先照着例子写，再独立思考

🔧 实践方法：
• 准备测试数据：创建学生、课程、成绩等测试表
• 循序渐进练习：每天练习不同子句的使用
• 对比分析：写出查询后分析执行过程
• 错误调试：故意写错语法，观察错误信息

🧠 理解要点：
• SQL是声明式：关注"要什么"而不是"怎么做"
• 执行顺序很重要：理解顺序才能写对复杂查询
• 表达式是基础：掌握表达式是进阶的前提
• 多练习应用：理论要结合实践才能真正掌握
```

**核心记忆**：
- SQL语句结构清，子句顺序要牢记
- 执行顺序有逻辑，从源到果步步析
- 表达式构成多样化，操作数与操作符
- 理论实践相结合，循序渐进最有益