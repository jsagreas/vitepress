---
title: 12、MySQL字面量与操作符
---
## 📚 目录

1. [字面量基础概念](#1-字面量基础概念)
2. [数值字面量详解](#2-数值字面量详解)
3. [字符串字面量规则](#3-字符串字面量规则)
4. [日期时间字面量](#4-日期时间字面量)
5. [算术操作符应用](#5-算术操作符应用)
6. [比较操作符详解](#6-比较操作符详解)
7. [逻辑操作符使用](#7-逻辑操作符使用)
8. [位操作符应用](#8-位操作符应用)
9. [操作符优先级与表达式](#9-操作符优先级与表达式)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 📖 字面量基础概念


### 1.1 什么是字面量


**字面量**就是在SQL语句中直接写出的具体数值或文本，相当于编程中的"常量"。比如数字`123`、字符串`'hello'`、日期`'2025-01-20'`等。

**🔑 字面量基本语法规则**

```
字面量的本质理解：
┌─────────────────────────────────────┐
│ 字面量 = 直接写在SQL中的固定值        │
│                                     │
│ 数值型：123, 3.14, -456             │
│ 字符型：'hello', "world"             │
│ 日期型：'2025-01-20'                │
│ 布尔型：TRUE, FALSE                 │
│ 空值型：NULL                        │
└─────────────────────────────────────┘
```

### 1.2 字面量的作用


字面量在SQL中无处不在，就像做菜时的调料一样必不可少：

```sql
-- 查询中的条件值
SELECT * FROM users WHERE age > 18;    -- 18是数值字面量

-- 插入数据时的具体值
INSERT INTO users (name, age) VALUES ('张三', 25);  -- '张三'和25都是字面量

-- 更新时的新值
UPDATE products SET price = 99.99;    -- 99.99是数值字面量
```

---

## 2. 🔢 数值字面量详解


### 2.1 🔥 数值字面量表示法


数值字面量就是直接写数字，MySQL支持多种格式来适应不同需求。

**整数表示法**

```sql
-- ✅ 基本整数
SELECT 123;           -- 正整数
SELECT -456;          -- 负整数
SELECT +789;          -- 显式正数（+号可选）

-- ✅ 科学计数法
SELECT 1E3;           -- 1000（1×10³）
SELECT 2.5E-2;        -- 0.025（2.5×10⁻²）
SELECT -1.23E+4;      -- -12300
```

**小数表示法**

```sql
-- ✅ 标准小数
SELECT 3.14159;       -- 圆周率
SELECT 0.5;           -- 零点五
SELECT .5;            -- 省略前导零（等同于0.5）
SELECT 5.;            -- 省略小数部分（等同于5.0）

-- ✅ 货币金额示例
SELECT 1999.99;       -- 商品价格
SELECT 0.01;          -- 一分钱
```

**🔸 数值类型自动识别规则**

| 字面量格式 | **MySQL识别类型** | **示例** | **说明** |
|-----------|------------------|---------|----------|
| 🔢 **纯整数** | `BIGINT` | `123`, `-456` | `最大19位数字` |
| 💰 **带小数点** | `DECIMAL` | `3.14`, `99.99` | `精确小数` |
| 🔬 **科学计数法** | `DOUBLE` | `1E10`, `2.5E-3` | `浮点数` |
| 📏 **超大数值** | `DOUBLE` | `9999999999999999999` | `超出整数范围` |

### 2.2 特殊数值字面量


```sql
-- 布尔值字面量
SELECT TRUE;          -- 等同于1
SELECT FALSE;         -- 等同于0

-- 十六进制字面量
SELECT 0xFF;          -- 255（十六进制）
SELECT 0x41;          -- 65（字符'A'的ASCII码）

-- 二进制字面量（MySQL 5.0.3+）
SELECT b'1010';       -- 10（二进制1010 = 十进制10）
SELECT 0b1111;        -- 15
```

---

## 3. 📝 字符串字面量规则


### 3.1 🔥 字符串字面量引号规则


字符串字面量的引号使用有严格规则，选错了可能导致语法错误或安全问题。

**基本引号规则**

```sql
-- ✅ 单引号（推荐，标准SQL）
SELECT 'Hello World';
SELECT '这是中文字符串';

-- ✅ 双引号（MySQL兼容模式）
SELECT "Hello World";
SELECT "这也是字符串";

-- ❌ 反引号（用于标识符，不是字符串）
SELECT `Hello World`;  -- 错误！这会被当作列名
```

**🔸 引号选择最佳实践**

| 场景 | **推荐引号** | **原因** | **示例** |
|------|-------------|---------|----------|
| 🔤 **普通字符串** | `单引号 ''` | `SQL标准，兼容性好` | `'用户名'` |
| 🆔 **包含单引号** | `双引号 ""` | `避免转义复杂` | `"It's a book"` |
| 🏷️ **表名列名** | `反引号 ``| `标识符专用` | `` `user_name` `` |
| 📋 **JSON数据** | `单引号外层` | `JSON内部用双引号` | `'{"name":"张三"}'` |

### 3.2 字符串转义处理


当字符串中包含特殊字符时，需要进行转义处理：

```sql
-- ✅ 单引号转义
SELECT 'Don''t worry';      -- Don't worry（两个单引号表示一个）
SELECT 'It\'s fine';        -- It's fine（反斜杠转义）

-- ✅ 双引号转义
SELECT "He said ""Hello"""; -- He said "Hello"
SELECT "She\'s here";       -- She's here

-- ✅ 反斜杠转义
SELECT 'Line1\nLine2';      -- 换行符
SELECT 'Tab\tSeparated';    -- 制表符
SELECT 'C:\\Windows\\';     -- Windows路径
```

**常用转义字符清单**

```
\n  → 换行符
\t  → 制表符  
\r  → 回车符
\\  → 反斜杠本身
\'  → 单引号
\"  → 双引号
\0  → NULL字符
\%  → 百分号（LIKE中使用）
\_  → 下划线（LIKE中使用）
```

### 3.3 字符串拼接与处理


```sql
-- 字符串拼接
SELECT CONCAT('Hello', ' ', 'World');     -- Hello World
SELECT 'Hello' ' ' 'World';               -- 直接相邻拼接

-- 字符集和排序规则
SELECT 'hello' COLLATE utf8mb4_bin;       -- 区分大小写比较
SELECT _utf8mb4'你好世界';                -- 指定字符集
```

---

## 4. 📅 日期时间字面量


### 4.1 🔥 日期时间字面量格式


日期时间字面量必须按照MySQL认识的格式来写，就像填表格要按照指定格式一样。

**标准日期时间格式**

```sql
-- ✅ 日期格式 (DATE)
SELECT '2025-01-20';          -- 标准格式：YYYY-MM-DD
SELECT '25-01-20';            -- 简化格式：YY-MM-DD
SELECT '2025/01/20';          -- 斜杠分隔也支持
SELECT '20250120';            -- 紧凑格式

-- ✅ 时间格式 (TIME)  
SELECT '14:30:25';            -- 标准格式：HH:MM:SS
SELECT '14:30';               -- 省略秒：HH:MM
SELECT '143025';              -- 紧凑格式

-- ✅ 日期时间格式 (DATETIME)
SELECT '2025-01-20 14:30:25'; -- 完整格式
SELECT '2025-01-20T14:30:25'; -- ISO格式（T分隔）
```

### 4.2 时区处理


```sql
-- 时间戳格式 (TIMESTAMP)
SELECT '2025-01-20 14:30:25';            -- 本地时区
SELECT '2025-01-20 14:30:25+08:00';      -- 指定时区偏移

-- 年份格式 (YEAR)
SELECT '2025';                           -- 四位年份
SELECT '25';                             -- 两位年份（20世纪）
```

### 4.3 日期时间计算示例


```sql
-- 日期运算
SELECT DATE_ADD('2025-01-20', INTERVAL 30 DAY);     -- 30天后
SELECT DATE_SUB('2025-01-20', INTERVAL 1 MONTH);    -- 1个月前
SELECT DATEDIFF('2025-12-31', '2025-01-01');        -- 计算天数差

-- 当前时间函数
SELECT NOW();                   -- 当前日期时间
SELECT CURDATE();              -- 当前日期
SELECT CURTIME();              -- 当前时间
```

---

## 5. ➕ 算术操作符应用


### 5.1 🔥 算术操作符+-*/DIV MOD


算术操作符就是数学运算符号，用来做加减乘除等计算。

**基本算术操作符**

```sql
-- ✅ 加法运算
SELECT 10 + 5;                 -- 结果：15
SELECT price + tax FROM orders; -- 价格加税费

-- ✅ 减法运算  
SELECT 20 - 8;                 -- 结果：12
SELECT end_date - start_date;  -- 日期相减

-- ✅ 乘法运算
SELECT 6 * 7;                  -- 结果：42
SELECT quantity * unit_price;  -- 数量乘单价

-- ✅ 除法运算
SELECT 15 / 3;                 -- 结果：5.0000（返回小数）
SELECT 15.0 / 3;               -- 结果：5.0000
SELECT 16 / 3;                 -- 结果：5.3333
```

### 5.2 整除和取余运算


```sql
-- ✅ 整除运算（DIV）- 只取整数部分
SELECT 15 DIV 3;               -- 结果：5
SELECT 16 DIV 3;               -- 结果：5（丢弃余数）
SELECT 17 DIV 3;               -- 结果：5

-- ✅ 取余运算（MOD 或 %）- 只取余数部分
SELECT 15 MOD 3;               -- 结果：0
SELECT 16 MOD 3;               -- 结果：1  
SELECT 17 % 3;                 -- 结果：2（%符号等同于MOD）
```

**实际应用示例**

```sql
-- 判断奇偶数
SELECT id, id % 2 AS is_odd FROM users;
-- is_odd为1表示奇数，0表示偶数

-- 分页计算
SELECT CEIL(total_count / page_size) AS total_pages;
-- 计算总页数

-- 按批次处理
SELECT id, (id - 1) DIV 1000 + 1 AS batch_number FROM records;
-- 每1000条记录分为一批
```

### 5.3 算术运算注意事项


```sql
-- ⚠️ 除零处理
SELECT 10 / 0;                 -- 结果：NULL（不报错）
SELECT 10 DIV 0;               -- 结果：NULL

-- ⚠️ NULL值参与运算
SELECT 10 + NULL;              -- 结果：NULL
SELECT price * quantity FROM orders WHERE price IS NOT NULL;

-- ✅ 安全计算方式
SELECT IFNULL(price, 0) * IFNULL(quantity, 1) AS total;
```

---

## 6. 🔍 比较操作符详解


### 6.1 🔥 比较操作符= != < > <= >= <=>


比较操作符用来比较两个值的大小关系，是SQL查询的核心工具。

**基本比较操作符**

| 操作符 | **含义** | **示例** | **结果** |
|-------|---------|---------|----------|
| `=` | **等于** | `5 = 5` | `TRUE(1)` |
| `!=` | **不等于** | `5 != 3` | `TRUE(1)` |
| `<>` | **不等于** | `5 <> 3` | `TRUE(1)` |
| `<` | **小于** | `3 < 5` | `TRUE(1)` |
| `>` | **大于** | `5 > 3` | `TRUE(1)` |
| `<=` | **小于等于** | `5 <= 5` | `TRUE(1)` |
| `>=` | **大于等于** | `5 >= 3` | `TRUE(1)` |
| `<=>` | **安全等于** | `NULL <=> NULL` | `TRUE(1)` |

### 6.2 特殊比较操作符详解


**🔸 安全等于操作符（<=>）**

普通等于操作符遇到NULL会"懵圈"，安全等于操作符能正确处理NULL值：

```sql
-- 普通等于操作符的问题
SELECT NULL = NULL;             -- 结果：NULL（不是TRUE！）
SELECT 5 = NULL;                -- 结果：NULL
SELECT NULL = 5;                -- 结果：NULL

-- ✅ 安全等于操作符的优势
SELECT NULL <=> NULL;           -- 结果：TRUE(1)
SELECT 5 <=> NULL;              -- 结果：FALSE(0)
SELECT 5 <=> 5;                 -- 结果：TRUE(1)

-- 实际应用场景
SELECT * FROM users WHERE phone <=> NULL;  -- 查找电话为空的用户
```

### 6.3 字符串比较规则


```sql
-- 字符串比较（按字典序）
SELECT 'apple' < 'banana';      -- TRUE（a在b前面）
SELECT 'Apple' = 'apple';       -- TRUE（默认不区分大小写）

-- 区分大小写比较
SELECT 'Apple' = 'apple' COLLATE utf8mb4_bin;  -- FALSE
SELECT BINARY 'Apple' = 'apple';               -- FALSE

-- 数字字符串比较
SELECT '10' > '9';              -- FALSE（按字符比较，'1' < '9'）
SELECT 10 > '9';                -- TRUE（数值比较）
```

### 6.4 日期时间比较


```sql
-- 日期比较
SELECT '2025-01-20' > '2025-01-15';        -- TRUE
SELECT NOW() > '2025-01-01';               -- TRUE

-- 时间范围查询
SELECT * FROM orders 
WHERE order_date >= '2025-01-01' 
  AND order_date < '2025-02-01';

-- 年龄计算比较
SELECT * FROM users 
WHERE TIMESTAMPDIFF(YEAR, birth_date, NOW()) >= 18;
```

---

## 7. 🧠 逻辑操作符使用


### 7.1 🔥 逻辑操作符AND OR NOT


逻辑操作符用来组合多个条件，就像用"并且"、"或者"、"不是"来连接句子。

**AND操作符（并且）**

```sql
-- 所有条件都必须为真
SELECT * FROM products 
WHERE price > 100 AND category = 'electronics';
-- 价格大于100 并且 类别是电子产品

-- 多条件组合
SELECT * FROM users 
WHERE age >= 18 
  AND age <= 65 
  AND status = 'active';
-- 年龄在18-65岁 并且 状态为活跃
```

**OR操作符（或者）**

```sql
-- 任一条件为真即可
SELECT * FROM orders 
WHERE status = 'pending' OR status = 'processing';
-- 状态是待处理 或者 正在处理

-- 等价的IN写法（更简洁）
SELECT * FROM orders 
WHERE status IN ('pending', 'processing');
```

**NOT操作符（不是）**

```sql
-- 条件取反
SELECT * FROM users WHERE NOT age < 18;
-- 等同于：WHERE age >= 18

SELECT * FROM products WHERE NOT category = 'toys';
-- 等同于：WHERE category != 'toys'

-- 与IS NULL配合使用
SELECT * FROM users WHERE phone IS NOT NULL;
-- 电话号码不为空的用户
```

### 7.2 逻辑操作符组合


**🔸 复杂逻辑表达式**

```sql
-- 组合逻辑：年轻用户或VIP用户
SELECT * FROM users 
WHERE (age < 25) OR (vip_level > 0);

-- 优惠条件：大额订单且首次购买
SELECT * FROM orders 
WHERE amount > 1000 AND is_first_order = TRUE;

-- 排除条件：非禁用且非测试用户
SELECT * FROM users 
WHERE NOT (status = 'disabled' OR is_test = TRUE);
```

### 7.3 逻辑运算的三值逻辑


MySQL使用三值逻辑：TRUE(1)、FALSE(0)、NULL（未知）

**🔸 三值逻辑真值表**

| A | B | **A AND B** | **A OR B** | **NOT A** |
|---|---|------------|-----------|----------|
| `TRUE` | `TRUE` | `TRUE` | `TRUE` | `FALSE` |
| `TRUE` | `FALSE` | `FALSE` | `TRUE` | `FALSE` |
| `TRUE` | `NULL` | `NULL` | `TRUE` | `FALSE` |
| `FALSE` | `FALSE` | `FALSE` | `FALSE` | `TRUE` |
| `FALSE` | `NULL` | `FALSE` | `NULL` | `TRUE` |
| `NULL` | `NULL` | `NULL` | `NULL` | `NULL` |

```sql
-- 实际示例
SELECT * FROM users WHERE age > 18 AND phone IS NOT NULL;
-- 如果age为NULL，整个条件结果为NULL，该行不会被选中
```

---

## 8. 💾 位操作符应用


### 8.1 🔥 位操作符& | ^ ~ << >>


位操作符直接操作数字的二进制位，主要用于权限控制、状态标记等场景。

**基本位操作符**

| 操作符 | **名称** | **作用** | **示例** | **二进制说明** |
|-------|---------|---------|---------|---------------|
| `&` | **位与** | `都为1才为1` | `5 & 3 = 1` | `101 & 011 = 001` |
| `\|` | **位或** | `有1就为1` | `5 \| 3 = 7` | `101 \| 011 = 111` |
| `^` | **位异或** | `不同为1` | `5 ^ 3 = 6` | `101 ^ 011 = 110` |
| `~` | **位取反** | `0变1，1变0` | `~5 = -6` | `~101 = ...11010` |
| `<<` | **左移** | `向左移位` | `5 << 1 = 10` | `101 << 1 = 1010` |
| `>>` | **右移** | `向右移位` | `5 >> 1 = 2` | `101 >> 1 = 10` |

### 8.2 位操作符实际应用


**权限控制系统**

```sql
-- 用户权限定义（二进制位表示）
-- 1(001): 读权限    2(010): 写权限    4(100): 执行权限

-- 赋予读写权限
UPDATE users SET permissions = 1 | 2 WHERE id = 123;  -- 结果：3

-- 检查是否有写权限
SELECT * FROM users WHERE permissions & 2 > 0;

-- 移除执行权限
UPDATE users SET permissions = permissions & ~4;

-- 权限示例表
CREATE TABLE user_permissions (
    user_id INT,
    permissions TINYINT COMMENT '1=读,2=写,4=执行,8=管理'
);

-- 查询有管理权限的用户
SELECT * FROM user_permissions WHERE permissions & 8 > 0;
```

**状态标记应用**

```sql
-- 商品状态标记（可组合多个状态）
-- 1:上架 2:促销 4:新品 8:热销 16:缺货

-- 设置商品为上架+促销
UPDATE products SET status = 1 | 2;          -- 状态值：3

-- 检查是否在促销
SELECT * FROM products WHERE status & 2 > 0;

-- 添加热销标记
UPDATE products SET status = status | 8 WHERE sales > 1000;

-- 移除缺货标记
UPDATE products SET status = status & ~16 WHERE stock > 0;
```

---

## 9. 🎯 操作符优先级与表达式


### 9.1 🔑 操作符优先级表


操作符优先级决定计算顺序，就像数学中先乘除后加减的规则。

**🔸 MySQL操作符优先级排序（从高到低）**

```
优先级排序（记忆要点）：

1️⃣ 最高优先级：
   └── () 括号                    # 最优先执行

2️⃣ 一元操作符：
   └── + - ~ NOT                  # 正负号、取反

3️⃣ 算术操作符：
   ├── * / DIV % MOD              # 乘除运算
   └── + -                        # 加减运算

4️⃣ 位操作符：
   ├── << >>                      # 位移运算
   ├── &                          # 位与
   ├── |                          # 位或
   └── ^                          # 位异或

5️⃣ 比较操作符：
   └── = != < > <= >= <=> LIKE    # 比较运算

6️⃣ 逻辑操作符：
   ├── AND                        # 逻辑与
   └── OR                         # 逻辑或（最低优先级）
```

### 9.2 🔑 表达式计算基础


**表达式计算顺序示例**

```sql
-- 示例1：算术运算优先级
SELECT 2 + 3 * 4;               -- 结果：14（不是20）
-- 计算过程：3 * 4 = 12，然后 2 + 12 = 14

-- 示例2：比较运算优先级
SELECT 1 + 2 > 2;               -- 结果：TRUE(1)
-- 计算过程：1 + 2 = 3，然后 3 > 2 = TRUE

-- 示例3：逻辑运算优先级
SELECT 1 OR 0 AND 0;            -- 结果：TRUE(1)
-- 计算过程：0 AND 0 = FALSE，然后 1 OR FALSE = TRUE
```

**使用括号明确优先级**

```sql
-- ❌ 容易混淆的写法
SELECT price + tax * 0.1;       -- 税费乘以0.1，然后加价格

-- ✅ 明确意图的写法
SELECT price + (tax * 0.1);     -- 计算含税价格
SELECT (price + tax) * 0.1;     -- 总金额的10%折扣

-- 复杂条件查询
SELECT * FROM orders 
WHERE (status = 'paid' OR status = 'shipped') 
  AND amount > 100;
```

### 9.3 类型转换与计算


**🔸 自动类型转换规则**

```sql
-- 数值与字符串比较
SELECT '123' = 123;             -- TRUE（字符串转为数值）
SELECT '123abc' = 123;          -- TRUE（提取数值部分）
SELECT 'abc123' = 123;          -- FALSE（无法转换）

-- 日期与字符串比较
SELECT '2025-01-20' = DATE('2025-01-20');  -- TRUE

-- 布尔值转换
SELECT TRUE + 1;                -- 结果：2
SELECT FALSE * 10;              -- 结果：0
```

**强制类型转换**

```sql
-- 显式转换函数
SELECT CAST('123' AS SIGNED);   -- 转为整数
SELECT CAST('3.14' AS DECIMAL(10,2));  -- 转为小数
SELECT CONVERT('123', SIGNED);  -- 另一种转换语法

-- 字符串转换
SELECT CONCAT(user_id, '_', username) FROM users;
SELECT CAST(price AS CHAR) FROM products;
```

---

## 10. 📋 核心要点总结


### 10.1 必须掌握的核心概念


```
🔸 字面量规则：正确使用引号，掌握各种数据类型的字面量格式
🔸 算术操作符：掌握+、-、*、/、DIV、MOD的区别和应用
🔸 比较操作符：理解=、!=、<=>的差异，特别是NULL值处理
🔸 逻辑操作符：掌握AND、OR、NOT的组合使用和三值逻辑
🔸 位操作符：了解权限控制和状态标记的应用场景
🔸 优先级规则：理解操作符优先级，正确使用括号
```

### 10.2 关键理解要点


**🔹 字面量使用的核心原则**
```
数值字面量：
• 整数直接写，小数注意精度
• 科学计数法适用于极大或极小数值
• 布尔值TRUE/FALSE等同于1/0

字符串字面量：
• 优先使用单引号，保持SQL标准兼容
• 包含单引号时用双引号或转义
• 反引号专用于标识符（表名、列名）

日期时间字面量：
• 严格按照'YYYY-MM-DD HH:MM:SS'格式
• 可以省略时间部分，不能省略日期部分
• 时区信息需要特别注意
```

**🔹 操作符使用的实践技巧**
```
算术操作符：
• 除法运算返回小数，整除用DIV
• 取余运算用于判断奇偶、分批处理
• 注意NULL值会让整个表达式为NULL

比较操作符：
• 普通等于(=)无法处理NULL，用<=>安全等于
• 字符串比较默认不区分大小写
• 不同类型比较时会自动类型转换

逻辑操作符：
• AND优先级高于OR，复杂条件用括号
• 任何值与NULL的逻辑运算结果都是NULL
• WHERE条件中NULL被当作FALSE处理
```

**🔹 优先级记忆口诀**
```
括号最优先，一元紧跟随
乘除先算术，加减后计算  
位移位运算，比较在中间
逻辑AND优先，OR最后站
```

### 10.3 实际应用价值


- **📊 数据查询**：精确构造查询条件，获取目标数据
- **🔢 数据计算**：在SQL中直接进行数学运算和统计
- **🎯 条件过滤**：组合多个条件实现复杂的业务逻辑
- **🔐 权限控制**：使用位操作符实现灵活的权限系统
- **📈 性能优化**：正确使用操作符避免全表扫描

**最佳实践要点**：
- 字面量格式要规范，避免隐式转换
- 复杂表达式用括号明确优先级
- NULL值处理要特别小心
- 位操作符多用于系统设计中的状态管理

**核心记忆**：
- 字面量是SQL中的"调料"，格式要正确
- 操作符是SQL中的"动词"，组合要合理  
- 优先级是SQL中的"语法"，顺序要清楚
- NULL值是SQL中的"陷阱"，处理要小心