---
title: 23ã€è¡¨è¾¾å¼é»˜è®¤å€¼
---
## ðŸ“š ç›®å½•

1. [è¡¨è¾¾å¼é»˜è®¤å€¼æ¦‚è¿°](#1-è¡¨è¾¾å¼é»˜è®¤å€¼æ¦‚è¿°)
2. [åŸºæœ¬è¯­æ³•ä¸Žä½¿ç”¨](#2-åŸºæœ¬è¯­æ³•ä¸Žä½¿ç”¨)
3. [æ—¶é—´å‡½æ•°é»˜è®¤å€¼](#3-æ—¶é—´å‡½æ•°é»˜è®¤å€¼)
4. [è¡¨è¾¾å¼æ±‚å€¼æœºåˆ¶](#4-è¡¨è¾¾å¼æ±‚å€¼æœºåˆ¶)
5. [é™åˆ¶ä¸Žçº¦æŸ](#5-é™åˆ¶ä¸Žçº¦æŸ)
6. [æ€§èƒ½ä¸Žä¼˜åŒ–](#6-æ€§èƒ½ä¸Žä¼˜åŒ–)
7. [å¤åˆ¶ä¸Žæ›´æ–°è¡Œä¸º](#7-å¤åˆ¶ä¸Žæ›´æ–°è¡Œä¸º)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸš€ è¡¨è¾¾å¼é»˜è®¤å€¼æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼é»˜è®¤å€¼


åœ¨MySQL 8.0ä¹‹å‰ï¼Œåˆ—çš„é»˜è®¤å€¼åªèƒ½æ˜¯**é™æ€å¸¸é‡**ï¼Œæ¯”å¦‚å›ºå®šçš„æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ã€‚è¿™å°±åƒç»™ç›’å­è´´ä¸Šå›ºå®šæ ‡ç­¾ - æ¯æ¬¡éƒ½æ˜¯ä¸€æ ·çš„ã€‚

**MySQL 8.0çš„é©æ–°**ï¼šçŽ°åœ¨å¯ä»¥ç”¨**è¡¨è¾¾å¼**ä½œä¸ºé»˜è®¤å€¼ï¼Œå°±åƒç»™ç›’å­è£…ä¸Šäº†"æ™ºèƒ½æ ‡ç­¾ç”Ÿæˆå™¨"ï¼Œæ¯æ¬¡æ’å…¥æ•°æ®æ—¶éƒ½èƒ½åŠ¨æ€è®¡ç®—å‡ºä¸åŒçš„å€¼ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆMySQL 5.7åŠä»¥å‰ï¼‰ï¼š
name VARCHAR(50) DEFAULT 'Anonymous'    â† æ°¸è¿œæ˜¯'Anonymous'
age INT DEFAULT 0                       â† æ°¸è¿œæ˜¯0

æ–°æ–¹å¼ï¼ˆMySQL 8.0ï¼‰ï¼š
created_at DATETIME DEFAULT (NOW())               â† æ¯æ¬¡æ’å…¥æ—¶çš„å½“å‰æ—¶é—´
order_no VARCHAR(20) DEFAULT (CONCAT('ORD', UUID_SHORT())) â† åŠ¨æ€ç”Ÿæˆè®¢å•å·
```

### 1.2 è§£å†³çš„å®žé™…é—®é¢˜


**ðŸ”¸ é—®é¢˜åœºæ™¯**ï¼š
```
è®¢å•è¡¨éœ€æ±‚ï¼š
- æ¯ä¸ªè®¢å•è¦æœ‰å”¯ä¸€ç¼–å·
- åˆ›å»ºæ—¶é—´è¦è®°å½•ç²¾ç¡®æ—¶åˆ»  
- è®¢å•çŠ¶æ€é»˜è®¤ä¸º'å¾…å¤„ç†'

ä¼ ç»Ÿåšæ³•çš„ç—›ç‚¹ï¼š
âœ— åº”ç”¨ç¨‹åºè¦è´Ÿè´£ç”Ÿæˆè®¢å•å·
âœ— åˆ›å»ºæ—¶é—´éœ€è¦ç¨‹åºä¼ å…¥
âœ— å¤šä¸ªåº”ç”¨æ’å…¥æ•°æ®æ—¶å®¹æ˜“ä¸ä¸€è‡´
```

**ðŸ”¸ æ–°æ–¹æ¡ˆçš„ä¼˜åŠ¿**ï¼š
```
æ•°æ®åº“å±‚é¢ç»Ÿä¸€å¤„ç†ï¼š
âœ“ è®¢å•å·ç”±æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆï¼Œä¿è¯å”¯ä¸€æ€§
âœ“ æ—¶é—´æˆ³è‡ªåŠ¨è®°å½•ï¼Œæ— éœ€åº”ç”¨ä¼ å…¥
âœ“ é»˜è®¤å€¼é€»è¾‘é›†ä¸­ç®¡ç†ï¼Œå‡å°‘å‡ºé”™
```

### 1.3 æ”¯æŒçš„è¡¨è¾¾å¼ç±»åž‹


**ðŸ“‹ è¡¨è¾¾å¼åˆ†ç±»**ï¼š
```
æ—¶é—´å‡½æ•°ï¼š
NOW()ã€CURRENT_TIMESTAMP()ã€UTC_TIMESTAMP()

å­—ç¬¦ä¸²å‡½æ•°ï¼š
CONCAT()ã€UPPER()ã€LOWER()ã€UUID()

æ•°å­¦å‡½æ•°ï¼š
ROUND()ã€ABS()ã€RAND()

ç³»ç»Ÿå‡½æ•°ï¼š
USER()ã€CONNECTION_ID()ã€UUID_SHORT()
```

---

## 2. ðŸ’» åŸºæœ¬è¯­æ³•ä¸Žä½¿ç”¨


### 2.1 åŸºæœ¬è¯­æ³•ç»“æž„


**ðŸ”¸ è¯­æ³•æ ¼å¼**ï¼š
```sql
column_name data_type DEFAULT (expression)
```

**é‡è¦è¯´æ˜Ž**ï¼š
- è¡¨è¾¾å¼**å¿…é¡»**ç”¨å°æ‹¬å·`()`åŒ…å›´
- å°±åƒç»™è¡¨è¾¾å¼ç©¿ä¸Š"é˜²æŠ¤æœ"ï¼Œå‘Šè¯‰MySQLè¿™æ˜¯è¦è®¡ç®—çš„è¡¨è¾¾å¼ï¼Œä¸æ˜¯å­—é¢å€¼

### 2.2 åˆ›å»ºè¡¨æ—¶å®šä¹‰è¡¨è¾¾å¼é»˜è®¤å€¼


```sql
-- ç”¨æˆ·è¡¨ç¤ºä¾‹
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50),
    -- è‡ªåŠ¨è®°å½•åˆ›å»ºæ—¶é—´
    created_at DATETIME DEFAULT (NOW()),
    -- é»˜è®¤ç”¨æˆ·ç¼–å·ï¼šU+æ—¶é—´æˆ³åŽ6ä½
    user_code VARCHAR(20) DEFAULT (CONCAT('U', RIGHT(UNIX_TIMESTAMP(), 6))),
    -- é»˜è®¤çŠ¶æ€ä¸ºæ¿€æ´»
    status VARCHAR(10) DEFAULT ('active')
);
```

### 2.3 ä¿®æ”¹çŽ°æœ‰è¡¨æ·»åŠ è¡¨è¾¾å¼é»˜è®¤å€¼


```sql
-- ç»™çŽ°æœ‰è¡¨æ·»åŠ åˆ—
ALTER TABLE orders 
ADD COLUMN order_time TIMESTAMP DEFAULT (CURRENT_TIMESTAMP());

-- ä¿®æ”¹çŽ°æœ‰åˆ—çš„é»˜è®¤å€¼
ALTER TABLE products 
ALTER COLUMN update_time SET DEFAULT (NOW());
```

### 2.4 å®žé™…æ’å…¥æµ‹è¯•


```sql
-- æ’å…¥æ•°æ®æ—¶ä¸æŒ‡å®šæœ‰é»˜è®¤å€¼çš„åˆ—
INSERT INTO users (username) VALUES ('å¼ ä¸‰');

-- æŸ¥çœ‹ç»“æžœ
SELECT * FROM users;
/*
ç»“æžœç¤ºä¾‹ï¼š
id | username | created_at           | user_code | status
1  | å¼ ä¸‰     | 2025-09-10 15:30:25  | U123456   | active
*/
```

---

## 3. â° æ—¶é—´å‡½æ•°é»˜è®¤å€¼


### 3.1 å¸¸ç”¨æ—¶é—´å‡½æ•°


**ðŸ”¸ NOW() å‡½æ•°**ï¼š
```sql
-- åŸºæœ¬ç”¨æ³•
CREATE TABLE logs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    message TEXT,
    log_time DATETIME DEFAULT (NOW())
);

-- NOW()çš„ç‰¹ç‚¹ï¼š
-- â€¢ è¿”å›žå½“å‰æ—¥æœŸå’Œæ—¶é—´
-- â€¢ æ ¼å¼ï¼šYYYY-MM-DD HH:MM:SS
-- â€¢ æ¯æ¬¡æ’å…¥æ—¶é‡æ–°è®¡ç®—
```

**ðŸ”¸ CURRENT_TIMESTAMP() å‡½æ•°**ï¼š
```sql
-- ç­‰ä»·äºŽNOW()ï¼Œä½†æ›´æ ‡å‡†
CREATE TABLE events (
    event_id INT PRIMARY KEY,
    event_name VARCHAR(100),
    created_at TIMESTAMP DEFAULT (CURRENT_TIMESTAMP())
);
```

**ðŸ”¸ UTC_TIMESTAMP() å‡½æ•°**ï¼š
```sql
-- ä½¿ç”¨UTCæ—¶é—´ï¼Œé¿å…æ—¶åŒºé—®é¢˜
CREATE TABLE global_events (
    id INT PRIMARY KEY,
    title VARCHAR(200),
    -- ç»Ÿä¸€ä½¿ç”¨UTCæ—¶é—´
    utc_time DATETIME DEFAULT (UTC_TIMESTAMP())
);
```

### 3.2 æ—¶é—´å‡½æ•°çš„å®žé™…åº”ç”¨åœºæ™¯


**ðŸ“… å®¡è®¡æ—¥å¿—è¡¨**ï¼š
```sql
CREATE TABLE audit_log (
    log_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    table_name VARCHAR(50),
    operation VARCHAR(10), -- INSERT, UPDATE, DELETE
    user_id INT,
    -- æ“ä½œæ—¶é—´è‡ªåŠ¨è®°å½•
    operation_time DATETIME DEFAULT (NOW()),
    -- è®°å½•å½“å¤©æ—¥æœŸï¼Œä¾¿äºŽåˆ†åŒº
    operation_date DATE DEFAULT (CURDATE())
);
```

**ðŸ“Š æ•°æ®ç»Ÿè®¡è¡¨**ï¼š
```sql
CREATE TABLE daily_stats (
    stat_id INT PRIMARY KEY AUTO_INCREMENT,
    stat_type VARCHAR(50),
    stat_value DECIMAL(15,2),
    -- è‡ªåŠ¨è®°å½•ç»Ÿè®¡æ—¶é—´
    stat_time TIMESTAMP DEFAULT (CURRENT_TIMESTAMP()),
    -- è®¡ç®—ç»Ÿè®¡æ—¥æœŸ
    stat_date DATE DEFAULT (DATE(NOW()))
);
```

### 3.3 æ—¶é—´å‡½æ•°çš„æ³¨æ„äº‹é¡¹


**âš ï¸ æ—¶åŒºè€ƒè™‘**ï¼š
```sql
-- ä¸åŒæ—¶é—´å‡½æ•°çš„æ—¶åŒºè¡Œä¸º
NOW()                -- ä½¿ç”¨ç³»ç»Ÿæ—¶åŒº
CURRENT_TIMESTAMP()  -- ä½¿ç”¨ç³»ç»Ÿæ—¶åŒº  
UTC_TIMESTAMP()      -- ä½¿ç”¨UTCæ—¶åŒº

-- å»ºè®®ï¼šå…¨çƒåŒ–åº”ç”¨ä¼˜å…ˆä½¿ç”¨UTC_TIMESTAMP()
```

---

## 4. âš™ï¸ è¡¨è¾¾å¼æ±‚å€¼æœºåˆ¶


### 4.1 æ±‚å€¼æ—¶æœº


**ðŸ”¸ ä»€ä¹ˆæ—¶å€™è®¡ç®—è¡¨è¾¾å¼**ï¼š
```
è¡¨è¾¾å¼çš„è®¡ç®—æ—¶æœºï¼š
â€¢ INSERTè¯­å¥æ‰§è¡Œæ—¶
â€¢ æ²¡æœ‰æ˜Žç¡®æŒ‡å®šè¯¥åˆ—çš„å€¼æ—¶
â€¢ æ¯æ¬¡æ’å…¥éƒ½é‡æ–°è®¡ç®—ï¼ˆä¸æ˜¯å»ºè¡¨æ—¶è®¡ç®—ä¸€æ¬¡ï¼‰
```

**ðŸ”¸ æ±‚å€¼æ—¶æœºæ¼”ç¤º**ï¼š
```sql
-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE test_timing (
    id INT PRIMARY KEY AUTO_INCREMENT,
    insert_time DATETIME DEFAULT (NOW()),
    random_num INT DEFAULT (FLOOR(RAND() * 1000))
);

-- ç¬¬ä¸€æ¬¡æ’å…¥
INSERT INTO test_timing () VALUES ();
-- ç­‰å¾…5ç§’åŽç¬¬äºŒæ¬¡æ’å…¥
INSERT INTO test_timing () VALUES ();

-- æŸ¥çœ‹ç»“æžœï¼Œæ—¶é—´å’Œéšæœºæ•°éƒ½ä¸åŒ
SELECT * FROM test_timing;
/*
id | insert_time          | random_num
1  | 2025-09-10 15:30:25  | 456
2  | 2025-09-10 15:30:30  | 789
*/
```

### 4.2 è¡¨è¾¾å¼æ±‚å€¼é¡ºåº


**ðŸ”¸ å¤šä¸ªè¡¨è¾¾å¼çš„è®¡ç®—é¡ºåº**ï¼š
```sql
CREATE TABLE order_test (
    order_id INT PRIMARY KEY AUTO_INCREMENT,
    -- å…ˆè®¡ç®—åŸºç¡€æ—¶é—´
    base_time DATETIME DEFAULT (NOW()),
    -- å†åŸºäºŽå…¶ä»–å‡½æ•°è®¡ç®—ï¼ˆä¸èƒ½å¼•ç”¨base_timeåˆ—ï¼‰
    order_code VARCHAR(50) DEFAULT (CONCAT('ORD', DATE_FORMAT(NOW(), '%Y%m%d'), UUID_SHORT())),
    -- çŠ¶æ€é»˜è®¤å€¼ï¼ˆé™æ€å€¼ï¼‰
    status VARCHAR(20) DEFAULT ('pending')
);
```

**âš ï¸ é‡è¦é™åˆ¶**ï¼š
- è¡¨è¾¾å¼**ä¸èƒ½å¼•ç”¨**åŒä¸€è¡Œçš„å…¶ä»–åˆ—
- æ¯ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯**ç‹¬ç«‹è®¡ç®—**çš„
- ä¸èƒ½åƒ`DEFAULT (CONCAT('ORD', base_time))`è¿™æ ·å¼•ç”¨å…¶ä»–åˆ—

### 4.3 NULLå€¼å¤„ç†


**ðŸ”¸ å½“è¡¨è¾¾å¼ç»“æžœä¸ºNULLæ—¶**ï¼š
```sql
-- æµ‹è¯•NULLæƒ…å†µ
CREATE TABLE null_test (
    id INT PRIMARY KEY AUTO_INCREMENT,
    -- å¯èƒ½è¿”å›žNULLçš„è¡¨è¾¾å¼
    nullable_col VARCHAR(50) DEFAULT (NULLIF('', '')),
    -- ç¡®ä¿éžNULLçš„è¡¨è¾¾å¼
    sure_col VARCHAR(50) DEFAULT (IFNULL(NULL, 'default_value'))
);

INSERT INTO null_test () VALUES ();
-- nullable_colä¼šæ˜¯NULLï¼Œsure_colæ˜¯'default_value'
```

---

## 5. ðŸš« é™åˆ¶ä¸Žçº¦æŸ


### 5.1 ä¸æ”¯æŒçš„è¡¨è¾¾å¼ç±»åž‹


**ðŸ”¸ ä¸èƒ½ä½¿ç”¨çš„å‡½æ•°**ï¼š
```sql
-- âŒ ä»¥ä¸‹è¡¨è¾¾å¼ä¸è¢«æ”¯æŒï¼š

-- å­æŸ¥è¯¢
column1 DEFAULT ((SELECT MAX(id) FROM other_table))

-- éžç¡®å®šæ€§çš„å¤æ‚å‡½æ•°
column2 DEFAULT (LOAD_FILE('/path/to/file'))

-- å¼•ç”¨å…¶ä»–åˆ—
column3 DEFAULT (CONCAT(column1, '_suffix'))

-- èšåˆå‡½æ•°
column4 DEFAULT (COUNT(*))
```

**ðŸ”¸ æ”¯æŒçš„è¡¨è¾¾å¼èŒƒå›´**ï¼š
```sql
-- âœ… ä»¥ä¸‹è¡¨è¾¾å¼è¢«æ”¯æŒï¼š

-- ç¡®å®šæ€§å†…ç½®å‡½æ•°
user_id VARCHAR(36) DEFAULT (UUID())

-- æ•°å­¦è®¡ç®—
score DECIMAL(5,2) DEFAULT (ROUND(RAND() * 100, 2))

-- å­—ç¬¦ä¸²æ“ä½œ
code VARCHAR(20) DEFAULT (UPPER(LEFT(UUID(), 8)))

-- ç³»ç»Ÿä¿¡æ¯å‡½æ•°
creator VARCHAR(100) DEFAULT (USER())
```

### 5.2 æ•°æ®ç±»åž‹å…¼å®¹æ€§


**ðŸ”¸ è¡¨è¾¾å¼ç»“æžœå¿…é¡»ä¸Žåˆ—ç±»åž‹å…¼å®¹**ï¼š
```sql
-- âœ… æ­£ç¡®çš„ç±»åž‹åŒ¹é…
CREATE TABLE type_match (
    -- æ—¶é—´å‡½æ•°åŒ¹é…DATETIMEç±»åž‹
    created_at DATETIME DEFAULT (NOW()),
    -- å­—ç¬¦ä¸²å‡½æ•°åŒ¹é…VARCHARç±»åž‹
    uuid_str VARCHAR(36) DEFAULT (UUID()),
    -- æ•°å­—å‡½æ•°åŒ¹é…æ•°å€¼ç±»åž‹
    random_int INT DEFAULT (FLOOR(RAND() * 100))
);

-- âŒ é”™è¯¯çš„ç±»åž‹åŒ¹é…ä¼šæŠ¥é”™
CREATE TABLE type_error (
    -- æ—¶é—´å‡½æ•°ä¸èƒ½ç”¨äºŽINTç±»åž‹
    created_at INT DEFAULT (NOW())  -- ä¼šæŠ¥é”™
);
```

### 5.3 çº¦æŸæ¡ä»¶é™åˆ¶


**ðŸ”¸ ä¸Žå…¶ä»–çº¦æŸçš„é…åˆ**ï¼š
```sql
CREATE TABLE constraint_test (
    id INT PRIMARY KEY AUTO_INCREMENT,
    -- âœ… å¯ä»¥ä¸ŽNOT NULLé…åˆ
    created_at DATETIME NOT NULL DEFAULT (NOW()),
    
    -- âœ… å¯ä»¥ä¸ŽUNIQUEé…åˆï¼ˆä½†è¦ç¡®ä¿è¡¨è¾¾å¼èƒ½äº§ç”Ÿå”¯ä¸€å€¼ï¼‰
    uuid_col VARCHAR(36) UNIQUE DEFAULT (UUID()),
    
    -- âš ï¸ ä¸ŽCHECKçº¦æŸé…åˆéœ€è¦å°å¿ƒ
    score INT DEFAULT (FLOOR(RAND() * 100)) CHECK (score >= 0 AND score <= 100)
);
```

---

## 6. ðŸ“Š æ€§èƒ½ä¸Žä¼˜åŒ–


### 6.1 è¡¨è¾¾å¼è®¡ç®—çš„æ€§èƒ½å½±å“


**ðŸ”¸ æ€§èƒ½å¼€é”€åˆ†æž**ï¼š
```
ç®€å•è¡¨è¾¾å¼ï¼ˆå¦‚NOW()ï¼‰ï¼š
â€¢ è®¡ç®—æ—¶é—´ï¼šå¾®ç§’çº§
â€¢ å¯¹INSERTæ€§èƒ½å½±å“ï¼šå¾ˆå°
â€¢ æŽ¨èä½¿ç”¨ï¼šâœ“

å¤æ‚è¡¨è¾¾å¼ï¼ˆå¦‚å¤šå±‚åµŒå¥—å‡½æ•°ï¼‰ï¼š
â€¢ è®¡ç®—æ—¶é—´ï¼šæ¯«ç§’çº§
â€¢ å¯¹INSERTæ€§èƒ½å½±å“ï¼šä¸­ç­‰
â€¢ å»ºè®®ä¼˜åŒ–ï¼šé€‚åº¦ä½¿ç”¨

éšæœºå‡½æ•°ï¼ˆå¦‚RAND()ï¼‰ï¼š
â€¢ è®¡ç®—æ—¶é—´ï¼šå¾®ç§’çº§ï¼Œä½†ä¸å¯é¢„æµ‹
â€¢ å¯¹INSERTæ€§èƒ½å½±å“ï¼šå°
â€¢ ç‰¹æ®Šæ³¨æ„ï¼šå¯èƒ½å½±å“å¤åˆ¶ä¸€è‡´æ€§
```

### 6.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**ðŸ”¸ ä¼˜åŒ–ç­–ç•¥**ï¼š
```sql
-- âŒ é¿å…è¿‡äºŽå¤æ‚çš„è¡¨è¾¾å¼
CREATE TABLE complex_bad (
    id INT PRIMARY KEY,
    complex_col VARCHAR(200) DEFAULT (
        CONCAT(
            UPPER(LEFT(UUID(), 8)), 
            '-', 
            DATE_FORMAT(NOW(), '%Y%m%d'), 
            '-',
            LPAD(FLOOR(RAND() * 10000), 4, '0')
        )
    )
);

-- âœ… ç®€åŒ–è¡¨è¾¾å¼ï¼Œæˆ–æ‹†åˆ†åˆ°åº”ç”¨å±‚
CREATE TABLE simple_good (
    id INT PRIMARY KEY,
    uuid_part VARCHAR(10) DEFAULT (LEFT(UUID(), 8)),
    date_part DATE DEFAULT (CURDATE()),
    random_part INT DEFAULT (FLOOR(RAND() * 10000))
);
```

### 6.3 æ‰¹é‡æ’å…¥çš„æ€§èƒ½è€ƒè™‘


**ðŸ”¸ æ‰¹é‡æ“ä½œæ—¶çš„è¡¨çŽ°**ï¼š
```sql
-- æµ‹è¯•æ‰¹é‡æ’å…¥æ€§èƒ½
INSERT INTO test_table () VALUES (), (), (), ();
-- æ¯è¡Œçš„é»˜è®¤å€¼è¡¨è¾¾å¼éƒ½ä¼šç‹¬ç«‹è®¡ç®—

-- æ€§èƒ½å¯¹æ¯”æµ‹è¯•
-- æ–¹æ¡ˆ1ï¼šä½¿ç”¨è¡¨è¾¾å¼é»˜è®¤å€¼
INSERT INTO table_with_defaults (data) VALUES ('test1'), ('test2'), ('test3');

-- æ–¹æ¡ˆ2ï¼šåº”ç”¨å±‚æä¾›å€¼  
INSERT INTO table_no_defaults (data, created_at) 
VALUES ('test1', NOW()), ('test2', NOW()), ('test3', NOW());

-- ç»“è®ºï¼šè¡¨è¾¾å¼é»˜è®¤å€¼é€šå¸¸æ›´é«˜æ•ˆï¼Œå› ä¸ºå‡å°‘äº†æ•°æ®ä¼ è¾“é‡
```

---

## 7. ðŸ”„ å¤åˆ¶ä¸Žæ›´æ–°è¡Œä¸º


### 7.1 ä¸»ä»Žå¤åˆ¶è¡Œä¸º


**ðŸ”¸ å¤åˆ¶ä¸€è‡´æ€§é—®é¢˜**ï¼š
```sql
-- é—®é¢˜åœºæ™¯ï¼šä½¿ç”¨éšæœºå‡½æ•°
CREATE TABLE replication_test (
    id INT PRIMARY KEY AUTO_INCREMENT,
    data VARCHAR(50),
    random_val INT DEFAULT (FLOOR(RAND() * 1000)),
    created_at DATETIME DEFAULT (NOW())
);

-- åœ¨ä¸»åº“æ’å…¥
INSERT INTO replication_test (data) VALUES ('test');

-- å¯èƒ½çš„é—®é¢˜ï¼š
-- â€¢ ä¸»åº“ï¼šrandom_val = 456, created_at = '2025-09-10 15:30:25'
-- â€¢ ä»Žåº“ï¼šrandom_val = 789, created_at = '2025-09-10 15:30:26'
-- â€¢ æ•°æ®ä¸ä¸€è‡´ï¼
```

**ðŸ”¸ è§£å†³æ–¹æ¡ˆ**ï¼š
```sql
-- æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç¡®å®šæ€§å‡½æ•°
CREATE TABLE replication_safe (
    id INT PRIMARY KEY AUTO_INCREMENT,
    data VARCHAR(50),
    -- ä½¿ç”¨è‡ªå¢žIDç›¸å…³çš„"ä¼ªéšæœº"å€¼
    pseudo_random INT DEFAULT (MOD(CONNECTION_ID() * UNIX_TIMESTAMP(), 1000)),
    created_at DATETIME DEFAULT (NOW())
);

-- æ–¹æ¡ˆ2ï¼šåœ¨åº”ç”¨å±‚ç”Ÿæˆéšæœºå€¼
INSERT INTO replication_test (data, random_val) VALUES ('test', FLOOR(RAND() * 1000));
```

### 7.2 é»˜è®¤å€¼æ›´æ–°æœºåˆ¶


**ðŸ”¸ ON UPDATEè¡Œä¸º**ï¼š
```sql
-- è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³
CREATE TABLE auto_update (
    id INT PRIMARY KEY AUTO_INCREMENT,
    content TEXT,
    created_at DATETIME DEFAULT (NOW()),
    -- åˆ›å»ºæ—¶å’Œæ›´æ–°æ—¶éƒ½è‡ªåŠ¨è®¾ç½®æ—¶é—´
    updated_at DATETIME DEFAULT (NOW()) ON UPDATE NOW()
);

-- æµ‹è¯•æ›´æ–°è¡Œä¸º
INSERT INTO auto_update (content) VALUES ('åŽŸå§‹å†…å®¹');
-- created_atå’Œupdated_atéƒ½è®¾ç½®ä¸ºå½“å‰æ—¶é—´

UPDATE auto_update SET content = 'ä¿®æ”¹å†…å®¹' WHERE id = 1;
-- åªæœ‰updated_atæ›´æ–°ä¸ºæ–°çš„å½“å‰æ—¶é—´
```

### 7.3 é»˜è®¤å€¼çš„è¦†ç›–è§„åˆ™


**ðŸ”¸ æ˜¾å¼æŒ‡å®šå€¼æ—¶çš„è¡Œä¸º**ï¼š
```sql
CREATE TABLE override_test (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(100),
    created_at DATETIME DEFAULT (NOW())
);

-- æƒ…å†µ1ï¼šä¸æŒ‡å®šcreated_atï¼Œä½¿ç”¨é»˜è®¤å€¼
INSERT INTO override_test (title) VALUES ('æµ‹è¯•1');
-- created_atä½¿ç”¨NOW()çš„ç»“æžœ

-- æƒ…å†µ2ï¼šæ˜¾å¼æŒ‡å®šcreated_at
INSERT INTO override_test (title, created_at) VALUES ('æµ‹è¯•2', '2020-01-01 00:00:00');
-- created_atä½¿ç”¨æŒ‡å®šå€¼ï¼Œå¿½ç•¥é»˜è®¤è¡¨è¾¾å¼

-- æƒ…å†µ3ï¼šæ˜¾å¼æŒ‡å®šä¸ºNULL
INSERT INTO override_test (title, created_at) VALUES ('æµ‹è¯•3', NULL);
-- created_atä¸ºNULLï¼ˆå¦‚æžœåˆ—å…è®¸NULLçš„è¯ï¼‰
```

---

## 8. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸ”¸ è¡¨è¾¾å¼é»˜è®¤å€¼ï¼šMySQL 8.0æ–°ç‰¹æ€§ï¼Œå…è®¸ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ä½œä¸ºåˆ—é»˜è®¤å€¼
ðŸ”¸ è¯­æ³•è¦æ±‚ï¼šè¡¨è¾¾å¼å¿…é¡»ç”¨å°æ‹¬å·()åŒ…å›´
ðŸ”¸ è®¡ç®—æ—¶æœºï¼šæ¯æ¬¡INSERTæ—¶å®žæ—¶è®¡ç®—ï¼Œä¸æ˜¯å»ºè¡¨æ—¶è®¡ç®—
ðŸ”¸ ç‹¬ç«‹æ€§ï¼šè¡¨è¾¾å¼ä¸èƒ½å¼•ç”¨åŒä¸€è¡Œçš„å…¶ä»–åˆ—
ðŸ”¸ ç±»åž‹å…¼å®¹ï¼šè¡¨è¾¾å¼ç»“æžœå¿…é¡»ä¸Žåˆ—æ•°æ®ç±»åž‹å…¼å®¹
```

### 8.2 å®žç”¨åœºæ™¯æ€»ç»“


**ðŸ“Š æœ€ä½³åº”ç”¨åœºæ™¯**ï¼š
```
æ—¶é—´æˆ³è®°å½•ï¼š
â€¢ åˆ›å»ºæ—¶é—´ï¼šDEFAULT (NOW())
â€¢ æ›´æ–°æ—¶é—´ï¼šDEFAULT (NOW()) ON UPDATE NOW()
â€¢ UTCæ—¶é—´ï¼šDEFAULT (UTC_TIMESTAMP())

å”¯ä¸€æ ‡è¯†ç”Ÿæˆï¼š
â€¢ UUIDï¼šDEFAULT (UUID())
â€¢ çŸ­IDï¼šDEFAULT (UUID_SHORT())
â€¢ ç»„åˆç¼–ç ï¼šDEFAULT (CONCAT('PREFIX', UUID_SHORT()))

ç³»ç»Ÿä¿¡æ¯è®°å½•ï¼š
â€¢ æ“ä½œç”¨æˆ·ï¼šDEFAULT (USER())
â€¢ è¿žæŽ¥IDï¼šDEFAULT (CONNECTION_ID())
```

### 8.3 å…³é”®æ³¨æ„äº‹é¡¹


**âš ï¸ é‡è¦é™åˆ¶**ï¼š
- ä¸æ”¯æŒå­æŸ¥è¯¢å’Œèšåˆå‡½æ•°
- ä¸èƒ½å¼•ç”¨å…¶ä»–åˆ—çš„å€¼
- éšæœºå‡½æ•°å¯èƒ½å½±å“ä¸»ä»Žå¤åˆ¶ä¸€è‡´æ€§
- å¤æ‚è¡¨è¾¾å¼ä¼šå½±å“INSERTæ€§èƒ½

**ðŸ’¡ æœ€ä½³å®žè·µ**ï¼š
- ä¼˜å…ˆä½¿ç”¨ç®€å•ã€ç¡®å®šæ€§çš„è¡¨è¾¾å¼
- æ—¶é—´ç›¸å…³å­—æ®µå¤šä½¿ç”¨NOW()ç­‰æ—¶é—´å‡½æ•°
- é¿å…åœ¨é»˜è®¤å€¼ä¸­ä½¿ç”¨RAND()ç­‰éšæœºå‡½æ•°
- æ‰¹é‡æ’å…¥æ—¶è€ƒè™‘è¡¨è¾¾å¼è®¡ç®—å¼€é”€

### 8.4 å­¦ä¹ éªŒè¯


**ðŸ§ª åŠ¨æ‰‹éªŒè¯**ï¼š
```sql
-- åˆ›å»ºæµ‹è¯•è¡¨éªŒè¯å„ç§è¡¨è¾¾å¼
CREATE TABLE expression_test (
    id INT PRIMARY KEY AUTO_INCREMENT,
    uuid_col VARCHAR(36) DEFAULT (UUID()),
    time_col DATETIME DEFAULT (NOW()),
    user_col VARCHAR(100) DEFAULT (USER()),
    concat_col VARCHAR(50) DEFAULT (CONCAT('TEST_', LEFT(UUID(), 8)))
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO expression_test () VALUES (), ();

-- è§‚å¯Ÿç»“æžœ
SELECT * FROM expression_test;
```

**ðŸŽ¯ æ ¸å¿ƒè®°å¿†**ï¼š
- è¡¨è¾¾å¼é»˜è®¤å€¼ = æ•°æ®åº“å±‚é¢çš„æ™ºèƒ½é»˜è®¤å€¼ç”Ÿæˆ
- å°æ‹¬å·å¿…é¡» = å‘Šè¯‰MySQLè¿™æ˜¯è¡¨è¾¾å¼ä¸æ˜¯å­—é¢å€¼  
- å®žæ—¶è®¡ç®— = æ¯æ¬¡INSERTéƒ½é‡æ–°è®¡ç®—
- ç±»åž‹åŒ¹é… = è¡¨è¾¾å¼ç»“æžœè¦ä¸Žåˆ—ç±»åž‹å…¼å®¹
- æ€§èƒ½è€ƒè™‘ = ç®€å•è¡¨è¾¾å¼ä¼˜äºŽå¤æ‚è¡¨è¾¾å¼

---

**å®žé™…åº”ç”¨ä»·å€¼**ï¼š
- **å¼€å‘æ•ˆçŽ‡**ï¼šå‡å°‘åº”ç”¨å±‚é»˜è®¤å€¼å¤„ç†é€»è¾‘
- **æ•°æ®ä¸€è‡´æ€§**ï¼šæ•°æ®åº“å±‚ç»Ÿä¸€ç®¡ç†é»˜è®¤å€¼è§„åˆ™  
- **ç³»ç»Ÿç»´æŠ¤**ï¼šé›†ä¸­åŒ–çš„é»˜è®¤å€¼é…ç½®ä¾¿äºŽç®¡ç†
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘ç½‘ç»œä¼ è¾“å’Œåº”ç”¨å±‚è®¡ç®—å¼€é”€