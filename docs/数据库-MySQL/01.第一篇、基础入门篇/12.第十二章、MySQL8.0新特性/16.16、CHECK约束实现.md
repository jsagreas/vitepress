---
title: 16ã€CHECKçº¦æŸå®žçŽ°
---
## ðŸ“š ç›®å½•

1. [CHECKçº¦æŸåŸºæœ¬æ¦‚å¿µ](#1-CHECKçº¦æŸåŸºæœ¬æ¦‚å¿µ)
2. [CHECKçº¦æŸè¯­æ³•è¯¦è§£](#2-CHECKçº¦æŸè¯­æ³•è¯¦è§£)
3. [è¡¨çº§ä¸Žåˆ—çº§çº¦æŸ](#3-è¡¨çº§ä¸Žåˆ—çº§çº¦æŸ)
4. [çº¦æŸéªŒè¯æœºåˆ¶](#4-çº¦æŸéªŒè¯æœºåˆ¶)
5. [çº¦æŸç®¡ç†æ“ä½œ](#5-çº¦æŸç®¡ç†æ“ä½œ)
6. [ä¸šåŠ¡åœºæ™¯åº”ç”¨](#6-ä¸šåŠ¡åœºæ™¯åº”ç”¨)
7. [æ€§èƒ½ä¸Žæœ€ä½³å®žè·µ](#7-æ€§èƒ½ä¸Žæœ€ä½³å®žè·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ” CHECKçº¦æŸåŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯CHECKçº¦æŸ

**ç®€å•ç†è§£**ï¼šCHECKçº¦æŸå°±æ˜¯ç»™æ•°æ®åº“è¡¨åŠ ä¸Šä¸€ä¸ª"æ£€æŸ¥å‘˜"ï¼Œæ¯æ¬¡æ’å…¥æˆ–æ›´æ–°æ•°æ®æ—¶ï¼Œéƒ½è¦æ£€æŸ¥æ•°æ®æ˜¯å¦ç¬¦åˆæˆ‘ä»¬è®¾å®šçš„è§„åˆ™ã€‚

```
å°±åƒè€ƒè¯•äº¤å·æ—¶ï¼Œè€å¸ˆä¼šæ£€æŸ¥ï¼š
- å§“åæ˜¯å¦å¡«å†™ âœ“
- åˆ†æ•°æ˜¯å¦åœ¨0-100ä¹‹é—´ âœ“
- è€ƒè¯•æ—¥æœŸæ˜¯å¦åˆç† âœ“

CHECKçº¦æŸå°±æ˜¯æ•°æ®åº“çš„"è€å¸ˆ"ï¼Œå¸®æˆ‘ä»¬æ£€æŸ¥æ•°æ®ï¼
```

### 1.2 CHECKçº¦æŸçš„ä½œç”¨

**ðŸŽ¯ æ ¸å¿ƒåŠŸèƒ½**ï¼š
- **æ•°æ®éªŒè¯**ï¼šç¡®ä¿æ’å…¥çš„æ•°æ®ç¬¦åˆä¸šåŠ¡è§„åˆ™
- **å®Œæ•´æ€§ä¿è¯**ï¼šç»´æŠ¤æ•°æ®çš„é€»è¾‘æ­£ç¡®æ€§
- **é”™è¯¯é¢„é˜²**ï¼šåœ¨æ•°æ®è¿›å…¥è¡¨ä¹‹å‰å°±å‘çŽ°é—®é¢˜
- **ä¸šåŠ¡è§„åˆ™å®žçŽ°**ï¼šå°†ä¸šåŠ¡é€»è¾‘ç›´æŽ¥å†™è¿›æ•°æ®åº“

### 1.3 MySQL 8.0çš„é‡å¤§æ”¹è¿›

**ðŸ“ˆ åŽ†å²å¯¹æ¯”**ï¼š
```
MySQL 5.7åŠä¹‹å‰ï¼š
- è¯­æ³•æ”¯æŒCHECKï¼Œä½†ä¸ç”Ÿæ•ˆ âŒ
- åªæ˜¯"æ‘†è®¾"ï¼Œä¸åšå®žé™…æ£€æŸ¥
- éœ€è¦ç”¨è§¦å‘å™¨ç­‰å¤æ‚æ–¹å¼å®žçŽ°

MySQL 8.0å¼€å§‹ï¼š
- å®Œæ•´æ”¯æŒCHECKçº¦æŸ âœ…
- çœŸæ­£æ‰§è¡Œçº¦æŸæ£€æŸ¥
- è¯­æ³•ç®€æ´ï¼ŒåŠŸèƒ½å¼ºå¤§
```

---

## 2. ðŸ“ CHECKçº¦æŸè¯­æ³•è¯¦è§£


### 2.1 åŸºç¡€è¯­æ³•ç»“æž„

```sql
-- åˆ›å»ºè¡¨æ—¶æ·»åŠ CHECKçº¦æŸ
CREATE TABLE è¡¨å (
    åˆ—å æ•°æ®ç±»åž‹ CHECK (æ¡ä»¶è¡¨è¾¾å¼),
    -- æˆ–è€…è¡¨çº§çº¦æŸ
    CONSTRAINT çº¦æŸå CHECK (æ¡ä»¶è¡¨è¾¾å¼)
);
```

### 2.2 æ¡ä»¶è¡¨è¾¾å¼è§„åˆ™

**ðŸ’¡ è¡¨è¾¾å¼è¦æ±‚**ï¼š
- å¿…é¡»è¿”å›žå¸ƒå°”å€¼ï¼ˆTRUE/FALSE/NULLï¼‰
- å¯ä»¥å¼•ç”¨å½“å‰è¡Œçš„ä»»æ„åˆ—
- ä¸èƒ½åŒ…å«å­æŸ¥è¯¢
- ä¸èƒ½è°ƒç”¨éžç¡®å®šæ€§å‡½æ•°ï¼ˆå¦‚NOW()ã€RAND()ï¼‰

```sql
-- âœ… æœ‰æ•ˆçš„CHECKè¡¨è¾¾å¼
CHECK (age >= 0 AND age <= 150)
CHECK (salary > 0)
CHECK (email LIKE '%@%.%')
CHECK (status IN ('active', 'inactive', 'pending'))

-- âŒ æ— æ•ˆçš„CHECKè¡¨è¾¾å¼
CHECK (created_time = NOW())  -- éžç¡®å®šæ€§å‡½æ•°
CHECK (EXISTS (SELECT...))    -- å­æŸ¥è¯¢
```

### 2.3 å®Œæ•´è¯­æ³•ç¤ºä¾‹

```sql
-- å‘˜å·¥è¡¨ç¤ºä¾‹ï¼Œå±•ç¤ºå„ç§CHECKçº¦æŸ
CREATE TABLE employees (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL,
    age INT CHECK (age >= 18 AND age <= 65),  -- åˆ—çº§çº¦æŸ
    salary DECIMAL(10,2),
    email VARCHAR(100),
    status ENUM('active', 'inactive', 'pending'),
    hire_date DATE,
    
    -- è¡¨çº§çº¦æŸ
    CONSTRAINT chk_salary_positive CHECK (salary > 0),
    CONSTRAINT chk_email_format CHECK (email REGEXP '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'),
    CONSTRAINT chk_hire_date_valid CHECK (hire_date >= '2000-01-01')
);
```

---

## 3. ðŸ—ï¸ è¡¨çº§ä¸Žåˆ—çº§çº¦æŸ


### 3.1 åˆ—çº§çº¦æŸè¯¦è§£

**ðŸ”¸ å®šä¹‰æ–¹å¼**ï¼šç›´æŽ¥å†™åœ¨åˆ—å®šä¹‰åŽé¢

```sql
CREATE TABLE products (
    id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    price DECIMAL(8,2) CHECK (price > 0),           -- ä»·æ ¼å¿…é¡»ä¸ºæ­£æ•°
    discount_rate DECIMAL(5,4) CHECK (discount_rate BETWEEN 0 AND 1), -- æŠ˜æ‰£çŽ‡0-1
    stock_quantity INT CHECK (stock_quantity >= 0)   -- åº“å­˜ä¸èƒ½ä¸ºè´Ÿ
);
```

**âœ… åˆ—çº§çº¦æŸç‰¹ç‚¹**ï¼š
- è¯­æ³•ç®€æ´ï¼Œç›´è§‚æ˜“æ‡‚
- åªèƒ½å¼•ç”¨å½“å‰åˆ—
- é€‚åˆç®€å•çš„å•åˆ—éªŒè¯

### 3.2 è¡¨çº§çº¦æŸè¯¦è§£

**ðŸ”¸ å®šä¹‰æ–¹å¼**ï¼šåœ¨æ‰€æœ‰åˆ—å®šä¹‰å®ŒæˆåŽæ·»åŠ 

```sql
CREATE TABLE orders (
    id INT PRIMARY KEY,
    customer_id INT NOT NULL,
    order_date DATE NOT NULL,
    ship_date DATE,
    total_amount DECIMAL(10,2) NOT NULL,
    status VARCHAR(20) NOT NULL,
    
    -- è¡¨çº§çº¦æŸï¼Œå¯ä»¥å¼•ç”¨å¤šä¸ªåˆ—
    CONSTRAINT chk_ship_after_order CHECK (ship_date IS NULL OR ship_date >= order_date),
    CONSTRAINT chk_amount_positive CHECK (total_amount > 0),
    CONSTRAINT chk_status_valid CHECK (status IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled'))
);
```

**âœ… è¡¨çº§çº¦æŸç‰¹ç‚¹**ï¼š
- å¯ä»¥å¼•ç”¨å¤šä¸ªåˆ—è¿›è¡Œå¤åˆéªŒè¯
- å¿…é¡»æœ‰çº¦æŸåç§°
- é€‚åˆå¤æ‚çš„ä¸šåŠ¡é€»è¾‘

### 3.3 çº¦æŸå‘½åè§„èŒƒ

```sql
-- ðŸŽ¯ æŽ¨èçš„å‘½åè§„èŒƒ
CONSTRAINT chk_è¡¨å_åˆ—å_æè¿° CHECK (...)

-- å®žé™…ç¤ºä¾‹
CONSTRAINT chk_employees_age_range CHECK (age BETWEEN 18 AND 65)
CONSTRAINT chk_products_price_positive CHECK (price > 0)
CONSTRAINT chk_orders_dates_logic CHECK (ship_date >= order_date)
```

---

## 4. âš¡ çº¦æŸéªŒè¯æœºåˆ¶


### 4.1 éªŒè¯è§¦å‘æ—¶æœº

**ðŸ• éªŒè¯æ—¶é—´ç‚¹**ï¼š
```
INSERT æ“ä½œï¼šæ’å…¥æ•°æ®æ—¶ç«‹å³éªŒè¯
UPDATE æ“ä½œï¼šæ›´æ–°æ•°æ®æ—¶ç«‹å³éªŒè¯
LOAD DATAï¼šæ‰¹é‡å¯¼å…¥æ—¶éªŒè¯æ¯ä¸€è¡Œ
```

**ðŸ’¡ éªŒè¯è¿‡ç¨‹**ï¼š
```
æ•°æ®æ“ä½œè¯·æ±‚
    â†“
æ£€æŸ¥æ‰€æœ‰CHECKçº¦æŸ
    â†“
    â”œâ”€ æ‰€æœ‰çº¦æŸé€šè¿‡ â†’ æ“ä½œæˆåŠŸ
    â””â”€ ä»»ä¸€çº¦æŸå¤±è´¥ â†’ æ“ä½œå›žæ»šï¼ŒæŠ¥é”™
```

### 4.2 éªŒè¯ç¤ºä¾‹æ¼”ç¤º

```sql
-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE students (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    age INT CHECK (age BETWEEN 6 AND 18),
    grade VARCHAR(10) CHECK (grade IN ('1å¹´çº§', '2å¹´çº§', '3å¹´çº§', '4å¹´çº§', '5å¹´çº§', '6å¹´çº§')),
    score DECIMAL(5,2) CHECK (score BETWEEN 0 AND 100)
);

-- âœ… æˆåŠŸçš„æ’å…¥
INSERT INTO students VALUES (1, 'å°æ˜Ž', 12, '6å¹´çº§', 95.5);

-- âŒ å¤±è´¥çš„æ’å…¥ç¤ºä¾‹
INSERT INTO students VALUES (2, 'å°çº¢', 20, '6å¹´çº§', 85.0);  
-- ERROR: Check constraint 'students_chk_1' is violated.

INSERT INTO students VALUES (3, 'å°æŽ', 10, '7å¹´çº§', 90.0);  
-- ERROR: Check constraint 'students_chk_2' is violated.

INSERT INTO students VALUES (4, 'å°çŽ‹', 8, '3å¹´çº§', 105.0); 
-- ERROR: Check constraint 'students_chk_3' is violated.
```

### 4.3 çº¦æŸè¿åå¤„ç†

**ðŸ”¸ é”™è¯¯ä¿¡æ¯æ ¼å¼**ï¼š
```
Error Code: 3819
Check constraint 'çº¦æŸå' is violated.
```

**ðŸ”¸ å¤„ç†ç­–ç•¥**ï¼š
```sql
-- åœ¨åº”ç”¨ç¨‹åºä¸­æ•èŽ·çº¦æŸè¿åé”™è¯¯
BEGIN;
    INSERT INTO students VALUES (5, 'å¼ ä¸‰', 25, '6å¹´çº§', 88.0);
ROLLBACK; -- å¦‚æžœè¿åçº¦æŸï¼Œè‡ªåŠ¨å›žæ»š
```

---

## 5. ðŸ”§ çº¦æŸç®¡ç†æ“ä½œ


### 5.1 æ·»åŠ CHECKçº¦æŸ

```sql
-- ç»™çŽ°æœ‰è¡¨æ·»åŠ CHECKçº¦æŸ
ALTER TABLE employees 
ADD CONSTRAINT chk_emp_age_valid CHECK (age >= 18 AND age <= 65);

-- æ·»åŠ å¤šä¸ªçº¦æŸ
ALTER TABLE products 
ADD CONSTRAINT chk_prod_price_positive CHECK (price > 0),
ADD CONSTRAINT chk_prod_name_not_empty CHECK (LENGTH(TRIM(name)) > 0);
```

### 5.2 åˆ é™¤CHECKçº¦æŸ

```sql
-- åˆ é™¤æŒ‡å®šçš„CHECKçº¦æŸ
ALTER TABLE employees 
DROP CHECK chk_emp_age_valid;

-- æ³¨æ„ï¼šåˆ é™¤çº¦æŸéœ€è¦çŸ¥é“çº¦æŸåç§°
```

### 5.3 ç¦ç”¨å’Œå¯ç”¨çº¦æŸ

```sql
-- MySQL 8.0æ”¯æŒçº¦æŸçš„ç¦ç”¨å’Œå¯ç”¨
ALTER TABLE employees ALTER CHECK chk_emp_age_valid NOT ENFORCED;  -- ç¦ç”¨
ALTER TABLE employees ALTER CHECK chk_emp_age_valid ENFORCED;      -- å¯ç”¨
```

**âš ï¸ ç¦ç”¨çº¦æŸçš„ä½¿ç”¨åœºæ™¯**ï¼š
- æ‰¹é‡æ•°æ®å¯¼å…¥æ—¶ä¸´æ—¶ç¦ç”¨
- æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­çš„ä¸´æ—¶å¤„ç†
- ç´§æ€¥æƒ…å†µä¸‹çš„æ•°æ®ä¿®å¤

### 5.4 æŸ¥çœ‹çº¦æŸä¿¡æ¯

```sql
-- æŸ¥çœ‹è¡¨çš„æ‰€æœ‰CHECKçº¦æŸ
SELECT 
    CONSTRAINT_NAME,
    CHECK_CLAUSE,
    ENFORCED
FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS 
WHERE CONSTRAINT_SCHEMA = 'your_database' 
AND TABLE_NAME = 'your_table';

-- æŸ¥çœ‹çº¦æŸæ˜¯å¦å¯ç”¨
SHOW CREATE TABLE employees;
```

---

## 6. ðŸ’¼ ä¸šåŠ¡åœºæ™¯åº”ç”¨


### 6.1 ç”¨æˆ·æ³¨å†Œç³»ç»Ÿ

```sql
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL,
    age INT,
    phone VARCHAR(20),
    gender ENUM('ç”·', 'å¥³', 'å…¶ä»–'),
    register_date DATE NOT NULL,
    
    -- ä¸šåŠ¡è§„åˆ™çº¦æŸ
    CONSTRAINT chk_user_age_valid CHECK (age IS NULL OR (age >= 13 AND age <= 120)),
    CONSTRAINT chk_user_email_format CHECK (email REGEXP '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'),
    CONSTRAINT chk_user_phone_format CHECK (phone IS NULL OR phone REGEXP '^1[3-9][0-9]{9}$'),
    CONSTRAINT chk_user_register_date CHECK (register_date >= '2020-01-01' AND register_date <= CURDATE())
);
```

### 6.2 ç”µå•†å•†å“ç®¡ç†

```sql
CREATE TABLE products (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(200) NOT NULL,
    category VARCHAR(50) NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    original_price DECIMAL(10,2),
    discount_rate DECIMAL(5,4),
    stock INT NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'active',
    
    -- ç”µå•†ä¸šåŠ¡çº¦æŸ
    CONSTRAINT chk_prod_price_positive CHECK (price > 0),
    CONSTRAINT chk_prod_original_price_logic CHECK (original_price IS NULL OR original_price >= price),
    CONSTRAINT chk_prod_discount_valid CHECK (discount_rate IS NULL OR (discount_rate >= 0 AND discount_rate <= 1)),
    CONSTRAINT chk_prod_stock_nonnegative CHECK (stock >= 0),
    CONSTRAINT chk_prod_status_valid CHECK (status IN ('active', 'inactive', 'discontinued', 'out_of_stock'))
);
```

### 6.3 è´¢åŠ¡ç³»ç»Ÿçº¦æŸ

```sql
CREATE TABLE financial_records (
    id INT PRIMARY KEY AUTO_INCREMENT,
    transaction_type ENUM('income', 'expense', 'transfer') NOT NULL,
    amount DECIMAL(15,2) NOT NULL,
    currency VARCHAR(3) NOT NULL DEFAULT 'CNY',
    transaction_date DATE NOT NULL,
    description VARCHAR(500),
    status VARCHAR(20) NOT NULL DEFAULT 'pending',
    
    -- è´¢åŠ¡ä¸šåŠ¡çº¦æŸ
    CONSTRAINT chk_fin_amount_positive CHECK (amount > 0),
    CONSTRAINT chk_fin_currency_valid CHECK (currency IN ('CNY', 'USD', 'EUR', 'JPY')),
    CONSTRAINT chk_fin_date_reasonable CHECK (transaction_date >= '2000-01-01' AND transaction_date <= CURDATE()),
    CONSTRAINT chk_fin_status_valid CHECK (status IN ('pending', 'confirmed', 'cancelled', 'failed'))
);
```

---

## 7. ðŸ“Š æ€§èƒ½ä¸Žæœ€ä½³å®žè·µ


### 7.1 æ€§èƒ½å½±å“åˆ†æž

**âš¡ CHECKçº¦æŸçš„æ€§èƒ½å¼€é”€**ï¼š
```
è½»é‡çº§æ£€æŸ¥ï¼šå¯¹æ€§èƒ½å½±å“å¾ˆå°
â”œâ”€ æ•°å€¼èŒƒå›´æ£€æŸ¥ (age > 0)
â”œâ”€ æžšä¸¾å€¼æ£€æŸ¥ (status IN (...))  
â””â”€ ç®€å•è¡¨è¾¾å¼ (price > cost)

é‡é‡çº§æ£€æŸ¥ï¼šéœ€è¦æ³¨æ„æ€§èƒ½
â”œâ”€ å¤æ‚æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
â”œâ”€ å¤šåˆ—å¤åˆæ¡ä»¶æ£€æŸ¥
â””â”€ å­—ç¬¦ä¸²å‡½æ•°å¯†é›†è¿ç®—
```

### 7.2 æœ€ä½³å®žè·µæŒ‡å—


**ðŸŽ¯ çº¦æŸè®¾è®¡åŽŸåˆ™**ï¼š
```sql
-- âœ… æŽ¨èï¼šç®€å•æ˜Žç¡®çš„çº¦æŸ
CHECK (age BETWEEN 0 AND 150)
CHECK (status IN ('active', 'inactive'))
CHECK (price > 0)

-- âš ï¸ è°¨æ…Žä½¿ç”¨ï¼šå¤æ‚çš„çº¦æŸ
CHECK (email REGEXP '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$')
CHECK (CHAR_LENGTH(TRIM(description)) BETWEEN 10 AND 500)
```

**ðŸ“‹ å‘½åè§„èŒƒå»ºè®®**ï¼š
```sql
-- ç»Ÿä¸€çš„å‘½åæ¨¡å¼
chk_{table}_{column}_{condition}

-- å®žé™…ç¤ºä¾‹
chk_users_age_range        -- ç”¨æˆ·å¹´é¾„èŒƒå›´æ£€æŸ¥
chk_products_price_positive -- å•†å“ä»·æ ¼æ­£æ•°æ£€æŸ¥  
chk_orders_status_valid    -- è®¢å•çŠ¶æ€æœ‰æ•ˆæ€§æ£€æŸ¥
```

### 7.3 ç›‘æŽ§å’Œç»´æŠ¤

```sql
-- æ£€æŸ¥çº¦æŸè¿åçš„ç»Ÿè®¡ä¿¡æ¯
SELECT 
    TABLE_SCHEMA,
    TABLE_NAME,
    CONSTRAINT_NAME,
    ENFORCED
FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS
WHERE TABLE_SCHEMA = DATABASE();

-- æŸ¥çœ‹çº¦æŸç›¸å…³çš„é”™è¯¯æ—¥å¿—
SHOW ENGINE INNODB STATUS;
```

---

## 8. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ

```
ðŸ”¸ CHECKçº¦æŸæœ¬è´¨ï¼šæ•°æ®åº“çº§åˆ«çš„ä¸šåŠ¡è§„åˆ™éªŒè¯å™¨
ðŸ”¸ éªŒè¯æ—¶æœºï¼šINSERTå’ŒUPDATEæ“ä½œæ—¶ç«‹å³æ£€æŸ¥
ðŸ”¸ çº¦æŸç±»åž‹ï¼šåˆ—çº§çº¦æŸï¼ˆå•åˆ—ï¼‰å’Œè¡¨çº§çº¦æŸï¼ˆå¤šåˆ—ï¼‰
ðŸ”¸ ç®¡ç†æ“ä½œï¼šæ·»åŠ ã€åˆ é™¤ã€ç¦ç”¨ã€å¯ç”¨çº¦æŸ
ðŸ”¸ æ€§èƒ½è€ƒè™‘ï¼šç®€å•çº¦æŸæ€§èƒ½å¥½ï¼Œå¤æ‚çº¦æŸè¦è°¨æ…Ž
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ CHECKçº¦æŸçš„ä»·å€¼**ï¼š
```
æ•°æ®è´¨é‡ä¿è¯ï¼š
- åœ¨æ•°æ®è¿›å…¥è¡¨ä¹‹å‰å°±å‘çŽ°é—®é¢˜
- é¿å…æ— æ•ˆæ•°æ®æ±¡æŸ“æ•°æ®åº“
- æé«˜æ•°æ®çš„å¯ä¿¡åº¦å’Œä¸€è‡´æ€§

ä¸šåŠ¡è§„åˆ™å®žçŽ°ï¼š
- å°†ä¸šåŠ¡é€»è¾‘å†™å…¥æ•°æ®åº“å±‚
- å‡å°‘åº”ç”¨ç¨‹åºçš„éªŒè¯è´Ÿæ‹…
- ç¡®ä¿è§„åˆ™çš„å¼ºåˆ¶æ‰§è¡Œ
```

**ðŸ”¹ ä½¿ç”¨æ—¶æœºåˆ¤æ–­**ï¼š
```
é€‚åˆä½¿ç”¨CHECKçº¦æŸï¼š
âœ… æ•°å€¼èŒƒå›´éªŒè¯ (age > 0)
âœ… æžšä¸¾å€¼æ£€æŸ¥ (status IN (...))
âœ… æ ¼å¼ç®€å•éªŒè¯ (length > 0)
âœ… è·¨åˆ—é€»è¾‘æ£€æŸ¥ (start_date <= end_date)

ä¸é€‚åˆCHECKçº¦æŸï¼š
âŒ å¤æ‚ä¸šåŠ¡é€»è¾‘éªŒè¯
âŒ éœ€è¦æŸ¥è¯¢å…¶ä»–è¡¨çš„éªŒè¯  
âŒ åŠ¨æ€å˜åŒ–çš„éªŒè¯è§„åˆ™
âŒ æ€§èƒ½æ•æ„Ÿçš„é«˜é¢‘æ“ä½œ
```

**ðŸ”¹ ä¸Žå…¶ä»–çº¦æŸçš„é…åˆ**ï¼š
```
å®Œæ•´çš„æ•°æ®å®Œæ•´æ€§ä½“ç³»ï¼š
NOT NULL      â†’ å¿…å¡«å­—æ®µä¿è¯
PRIMARY KEY   â†’ å”¯ä¸€æ€§ä¿è¯  
FOREIGN KEY   â†’ å¼•ç”¨å®Œæ•´æ€§ä¿è¯
UNIQUE        â†’ å”¯ä¸€æ€§ä¿è¯
CHECK         â†’ ä¸šåŠ¡è§„åˆ™ä¿è¯
```

### 8.3 å®žé™…åº”ç”¨æŒ‡å¯¼

- **è®¾è®¡é˜¶æ®µ**ï¼šåœ¨è¡¨è®¾è®¡æ—¶å°±è€ƒè™‘CHECKçº¦æŸ
- **å¼€å‘é˜¶æ®µ**ï¼šé…åˆåº”ç”¨ç¨‹åºçš„å‰ç«¯éªŒè¯ä½¿ç”¨
- **ç»´æŠ¤é˜¶æ®µ**ï¼šå®šæœŸæ£€æŸ¥çº¦æŸçš„æœ‰æ•ˆæ€§å’Œæ€§èƒ½å½±å“
- **è¿ç§»é˜¶æ®µ**ï¼šæ‰¹é‡æ•°æ®å¯¼å…¥æ—¶å¯ä¸´æ—¶ç¦ç”¨çº¦æŸ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
CHECKçº¦æŸå¦‚é—¨å«ï¼Œæ•°æ®è¿›é—¨å…ˆæ£€æŸ¥
åˆ—çº§è¡¨çº§ä¸¤ç§å¼ï¼Œç®€å•å¤æ‚å„æœ‰æ³•  
è¿åè§„åˆ™æ“ä½œåœï¼Œä¸šåŠ¡è§„åˆ™æ•°æ®åº“
æ€§èƒ½å½±å“è¦è€ƒè™‘ï¼Œç®€å•çº¦æŸæ•ˆæžœä½³
```