---
title: 14ã€MGRå®‰å…¨é…ç½®ä¸å®¡è®¡
---
## ğŸ“š ç›®å½•


1. [MGRå®‰å…¨åŸºç¡€æ¦‚å¿µ](#1-MGRå®‰å…¨åŸºç¡€æ¦‚å¿µ)
2. [SSL/TLSé€šä¿¡åŠ å¯†é…ç½®](#2-SSL-TLSé€šä¿¡åŠ å¯†é…ç½®)
3. [ç»„å¤åˆ¶ç”¨æˆ·æƒé™ç®¡ç†](#3-ç»„å¤åˆ¶ç”¨æˆ·æƒé™ç®¡ç†)
4. [ç½‘ç»œè®¿é—®æ§åˆ¶ä¸é˜²æŠ¤](#4-ç½‘ç»œè®¿é—®æ§åˆ¶ä¸é˜²æŠ¤)
5. [è¯ä¹¦ç®¡ç†ä¸è½®æ¢ç­–ç•¥](#5-è¯ä¹¦ç®¡ç†ä¸è½®æ¢ç­–ç•¥)
6. [èº«ä»½è®¤è¯æœºåˆ¶è¯¦è§£](#6-èº«ä»½è®¤è¯æœºåˆ¶è¯¦è§£)
7. [å®‰å…¨å®¡è®¡ä¸ç›‘æ§](#7-å®‰å…¨å®¡è®¡ä¸ç›‘æ§)
8. [æ•…éšœæ’æŸ¥ä¸æ€§èƒ½ä¼˜åŒ–](#8-æ•…éšœæ’æŸ¥ä¸æ€§èƒ½ä¼˜åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

# 1. ğŸ” MGRå®‰å…¨åŸºç¡€æ¦‚å¿µ



## 1.1 ä»€ä¹ˆæ˜¯MGRå®‰å…¨



**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
MGRå®‰å…¨ï¼šMySQL Group Replicationç¾¤ç»„å¤åˆ¶çš„å®‰å…¨ä¿éšœæœºåˆ¶
ç›®æ ‡ï¼šç¡®ä¿é›†ç¾¤èŠ‚ç‚¹é—´é€šä¿¡çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’Œèº«ä»½è®¤è¯
æœ¬è´¨ï¼šé€šè¿‡å¤šå±‚å®‰å…¨æªæ–½ä¿æŠ¤æ•°æ®ä¼ è¾“å’Œè®¿é—®æ§åˆ¶
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦MGRå®‰å…¨**
åœ¨æ²¡æœ‰å®‰å…¨é…ç½®çš„MGRé›†ç¾¤ä¸­ï¼Œå­˜åœ¨ä»¥ä¸‹é£é™©ï¼š
- **æ•°æ®æ³„éœ²**ï¼šèŠ‚ç‚¹é—´ä¼ è¾“çš„æ•°æ®å¯èƒ½è¢«çªƒå¬
- **èº«ä»½ä¼ªé€ **ï¼šæ¶æ„èŠ‚ç‚¹å¯èƒ½å†’å……åˆæ³•èŠ‚ç‚¹åŠ å…¥é›†ç¾¤
- **æ•°æ®ç¯¡æ”¹**ï¼šä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®å¯èƒ½è¢«æ¶æ„ä¿®æ”¹
- **æœªæˆæƒè®¿é—®**ï¼šç¼ºä¹æƒé™æ§åˆ¶çš„èŠ‚ç‚¹è®¿é—®

## 1.2 MGRå®‰å…¨æ¶æ„æ¦‚è§ˆ



```
MGRå®‰å…¨æ¶æ„å›¾ï¼š

          åº”ç”¨å±‚
             |
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   æƒé™éªŒè¯å±‚     â”‚ â† ç”¨æˆ·æƒé™ã€è§’è‰²ç®¡ç†
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   SSL/TLSåŠ å¯†å±‚ â”‚ â† æ•°æ®ä¼ è¾“åŠ å¯†
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   èº«ä»½è®¤è¯å±‚     â”‚ â† èŠ‚ç‚¹èº«ä»½éªŒè¯
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   ç½‘ç»œæ§åˆ¶å±‚     â”‚ â† IPç™½åå•ã€é˜²ç«å¢™
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             |
          ç‰©ç†ç½‘ç»œ
```

## 1.3 å®‰å…¨å¨èƒæ¨¡å‹



**ğŸ¯ ä¸»è¦å®‰å…¨å¨èƒ**
```
ç½‘ç»œå±‚å¨èƒï¼š
âœ— ä¸­é—´äººæ”»å‡»ï¼ˆMan-in-the-Middleï¼‰
âœ— æ•°æ®åŒ…å—…æ¢ï¼ˆPacket Sniffingï¼‰
âœ— ç½‘ç»œé‡æ”¾æ”»å‡»ï¼ˆReplay Attackï¼‰

åº”ç”¨å±‚å¨èƒï¼š
âœ— æƒé™æå‡æ”»å‡»
âœ— SQLæ³¨å…¥æ”»å‡»
âœ— æ¶æ„èŠ‚ç‚¹åŠ å…¥

ç³»ç»Ÿå±‚å¨èƒï¼š
âœ— è¯ä¹¦æ³„éœ²
âœ— ç§é’¥æš´éœ²
âœ— é…ç½®æ–‡ä»¶ç¯¡æ”¹
```

---

# 2. ğŸ”’ SSL/TLSé€šä¿¡åŠ å¯†é…ç½®



## 2.1 SSL/TLSåŸºç¡€åŸç†



**ğŸ”¸ åŠ å¯†é€šä¿¡åŸç†**
```
SSL/TLSå·¥ä½œæµç¨‹ï¼š

å®¢æˆ·ç«¯                    æœåŠ¡ç«¯
   |                        |
   |------ æ¡æ‰‹è¯·æ±‚ -------->|
   |                        |
   |<----- è¯ä¹¦éªŒè¯ --------|
   |                        |
   |------ å¯†é’¥äº¤æ¢ -------->|
   |                        |
   |<==== åŠ å¯†é€šä¿¡ ========>|
```

**ğŸ’¡ ä¸ºä»€ä¹ˆä½¿ç”¨SSL/TLS**
- **æ•°æ®åŠ å¯†**ï¼šé˜²æ­¢ä¼ è¾“æ•°æ®è¢«çªƒå¬
- **èº«ä»½éªŒè¯**ï¼šç¡®è®¤é€šä¿¡å¯¹æ–¹çš„çœŸå®èº«ä»½
- **æ•°æ®å®Œæ•´æ€§**ï¼šæ£€æµ‹æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹
- **æ ‡å‡†åè®®**ï¼šä¸šç•Œæˆç†Ÿçš„å®‰å…¨é€šä¿¡æ ‡å‡†

## 2.2 ç”ŸæˆSSLè¯ä¹¦



**ğŸ”§ åˆ›å»ºCAè¯ä¹¦ï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰**
```bash
# 1. ç”ŸæˆCAç§é’¥

openssl genrsa -aes256 -out ca-key.pem 4096

# 2. ç”ŸæˆCAè¯ä¹¦

openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem \
  -subj "/C=CN/ST=Beijing/L=Beijing/O=MyOrg/OU=DBA/CN=MySQL-CA"
```

**ğŸ”§ ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç”Ÿæˆè¯ä¹¦**
```bash
# èŠ‚ç‚¹1è¯ä¹¦ç”Ÿæˆ

# 1. ç”Ÿæˆç§é’¥

openssl genrsa -out server-key-node1.pem 4096

# 2. ç”Ÿæˆè¯ä¹¦è¯·æ±‚

openssl req -new -key server-key-node1.pem -out server-node1.csr \
  -subj "/C=CN/ST=Beijing/L=Beijing/O=MyOrg/OU=DBA/CN=mysql-node1"

# 3. ç”¨CAç­¾å‘è¯ä¹¦

openssl x509 -req -days 365 -in server-node1.csr -CA ca.pem \
  -CAkey ca-key.pem -out server-cert-node1.pem -sha256 -CAcreateserial
```

## 2.3 MGR SSLé…ç½®



**ğŸ“ my.cnfé…ç½®ç¤ºä¾‹**
```ini
[mysqld]
# åŸºç¡€MGRé…ç½®

server_id = 1
gtid_mode = ON
enforce_gtid_consistency = ON
binlog_checksum = NONE

# SSLåŸºç¡€é…ç½®

ssl_ca = /etc/mysql/ssl/ca.pem
ssl_cert = /etc/mysql/ssl/server-cert-node1.pem  
ssl_key = /etc/mysql/ssl/server-key-node1.pem

# MGR SSLé…ç½®

group_replication_ssl_mode = REQUIRED
group_replication_recovery_use_ssl = 1
group_replication_recovery_ssl_ca = /etc/mysql/ssl/ca.pem
group_replication_recovery_ssl_cert = /etc/mysql/ssl/server-cert-node1.pem
group_replication_recovery_ssl_key = /etc/mysql/ssl/server-key-node1.pem

# å¼ºåˆ¶SSLè¿æ¥

require_secure_transport = ON
```

**âš ï¸ é…ç½®æ³¨æ„äº‹é¡¹**
- ç¡®ä¿è¯ä¹¦æ–‡ä»¶æƒé™ä¸º`600`ï¼Œä»…MySQLç”¨æˆ·å¯è¯»
- è¯ä¹¦CNåç§°åº”ä¸å®é™…ä¸»æœºåæˆ–IPåŒ¹é…
- æ‰€æœ‰èŠ‚ç‚¹å¿…é¡»ä½¿ç”¨ç›¸åŒçš„CAè¯ä¹¦
- å®šæœŸæ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ

## 2.4 éªŒè¯SSLé…ç½®



**ğŸ” æ£€æŸ¥SSLçŠ¶æ€**
```sql
-- æŸ¥çœ‹SSLé…ç½®çŠ¶æ€
SHOW VARIABLES LIKE '%ssl%';

-- æŸ¥çœ‹å½“å‰è¿æ¥çš„SSLä¿¡æ¯
SHOW STATUS LIKE 'Ssl%';

-- éªŒè¯MGR SSLé…ç½®
SELECT * FROM performance_schema.replication_group_members;
```

**ğŸ“Š SSLé…ç½®éªŒè¯æ¸…å•**
```
éªŒè¯é¡¹ç›®æ¸…å•ï¼š
â˜ SSLè¯ä¹¦æ–‡ä»¶å­˜åœ¨ä¸”æƒé™æ­£ç¡®
â˜ CAè¯ä¹¦åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šä¸€è‡´
â˜ MGR SSLæ¨¡å¼è®¾ç½®ä¸ºREQUIRED
â˜ æ¢å¤è¿‡ç¨‹å¯ç”¨SSL
â˜ å®¢æˆ·ç«¯è¿æ¥å¼ºåˆ¶SSL
â˜ è¯ä¹¦æœ‰æ•ˆæœŸå……è¶³ï¼ˆ>30å¤©ï¼‰
```

---

# 3. ğŸ‘¥ ç»„å¤åˆ¶ç”¨æˆ·æƒé™ç®¡ç†



## 3.1 MGRä¸“ç”¨ç”¨æˆ·åˆ›å»º



**ğŸ”¸ å¤åˆ¶ç”¨æˆ·æƒé™éœ€æ±‚**
```
MGRå¤åˆ¶ç”¨æˆ·éœ€è¦çš„æƒé™ï¼š
â€¢ REPLICATION SLAVEï¼šåŸºç¡€å¤åˆ¶æƒé™
â€¢ BACKUP_ADMINï¼šæ¢å¤è¿‡ç¨‹æƒé™
â€¢ GROUP_REPLICATION_STREAMï¼šç»„å¤åˆ¶æµæƒé™
â€¢ CONNECTION_ADMINï¼šè¿æ¥ç®¡ç†æƒé™
```

**ğŸ”§ åˆ›å»ºå¤åˆ¶ç”¨æˆ·**
```sql
-- åˆ›å»ºMGRä¸“ç”¨å¤åˆ¶ç”¨æˆ·
CREATE USER 'mgr_user'@'%' IDENTIFIED BY 'StrongP@ssw0rd123!' 
  REQUIRE SSL;

-- æˆäºˆå¿…è¦æƒé™
GRANT REPLICATION SLAVE ON *.* TO 'mgr_user'@'%';
GRANT BACKUP_ADMIN ON *.* TO 'mgr_user'@'%';
GRANT GROUP_REPLICATION_STREAM ON *.* TO 'mgr_user'@'%';
GRANT CONNECTION_ADMIN ON *.* TO 'mgr_user'@'%';

-- åˆ·æ–°æƒé™
FLUSH PRIVILEGES;
```

## 3.2 æƒé™æœ€å°åŒ–åŸåˆ™



**ğŸ“‹ æƒé™åˆ†çº§ç®¡ç†**
```
ç”¨æˆ·ç±»å‹          æƒé™èŒƒå›´              åº”ç”¨åœºæ™¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mgr_repl_user    å¤åˆ¶ç›¸å…³æƒé™          èŠ‚ç‚¹é—´å¤åˆ¶
mgr_monitor_user åªè¯»ç›‘æ§æƒé™          çŠ¶æ€ç›‘æ§
mgr_admin_user   é›†ç¾¤ç®¡ç†æƒé™          è¿ç»´ç®¡ç†
app_read_user    åº”ç”¨åªè¯»æƒé™          æŸ¥è¯¢ä¸šåŠ¡
app_write_user   åº”ç”¨è¯»å†™æƒé™          ä¸šåŠ¡æ“ä½œ
```

**ğŸ”§ ç›‘æ§ç”¨æˆ·åˆ›å»º**
```sql
-- åˆ›å»ºç›‘æ§ä¸“ç”¨ç”¨æˆ·
CREATE USER 'mgr_monitor'@'localhost' IDENTIFIED BY 'MonitorP@ss123!';

-- æˆäºˆç›‘æ§æƒé™
GRANT SELECT ON performance_schema.* TO 'mgr_monitor'@'localhost';
GRANT SELECT ON information_schema.* TO 'mgr_monitor'@'localhost';
GRANT SHOW DATABASES ON *.* TO 'mgr_monitor'@'localhost';
GRANT PROCESS ON *.* TO 'mgr_monitor'@'localhost';
```

## 3.3 å¯†ç ç­–ç•¥é…ç½®



**ğŸ”’ å¼ºå¯†ç ç­–ç•¥**
```sql
-- å¯ç”¨å¯†ç éªŒè¯æ’ä»¶
INSTALL PLUGIN validate_password SONAME 'validate_password.so';

-- é…ç½®å¯†ç ç­–ç•¥
SET GLOBAL validate_password.policy = STRONG;
SET GLOBAL validate_password.length = 12;
SET GLOBAL validate_password.mixed_case_count = 2;
SET GLOBAL validate_password.number_count = 2;
SET GLOBAL validate_password.special_char_count = 2;
```

**â° å¯†ç è¿‡æœŸç­–ç•¥**
```sql
-- è®¾ç½®å¯†ç è¿‡æœŸç­–ç•¥
ALTER USER 'mgr_user'@'%' PASSWORD EXPIRE INTERVAL 90 DAY;
ALTER USER 'mgr_user'@'%' PASSWORD HISTORY 5;
ALTER USER 'mgr_user'@'%' PASSWORD REUSE INTERVAL 365 DAY;
```

---

# 4. ğŸ›¡ï¸ ç½‘ç»œè®¿é—®æ§åˆ¶ä¸é˜²æŠ¤



## 4.1 IPç™½åå•é…ç½®



**ğŸ”¸ bind-addressé…ç½®**
```ini
[mysqld]
# ç»‘å®šåˆ°ç‰¹å®šç½‘ç»œæ¥å£

bind-address = 192.168.100.10

# å…è®¸çš„å®¢æˆ·ç«¯IPèŒƒå›´

# åœ¨é˜²ç«å¢™çº§åˆ«é…ç½®ï¼Œä¸æ˜¯MySQLé…ç½®

```

**ğŸ”§ åŸºäºç”¨æˆ·çš„IPé™åˆ¶**
```sql
-- åˆ›å»ºé™åˆ¶IPçš„ç”¨æˆ·
CREATE USER 'app_user'@'192.168.100.%' IDENTIFIED BY 'AppP@ss123!';
CREATE USER 'mgr_user'@'192.168.100.%' IDENTIFIED BY 'MgrP@ss123!';

-- åˆ é™¤ä¸å®‰å…¨çš„é€šé…ç¬¦ç”¨æˆ·
DROP USER 'root'@'%';
DROP USER ''@'%';
```

## 4.2 é˜²ç«å¢™é…ç½®



**ğŸ›¡ï¸ Linuxé˜²ç«å¢™è§„åˆ™**
```bash
# å…è®¸MGRé€šä¿¡ç«¯å£ï¼ˆé»˜è®¤33061ï¼‰

firewall-cmd --permanent --add-port=33061/tcp

# å…è®¸MySQLè¿æ¥ç«¯å£

firewall-cmd --permanent --add-port=3306/tcp

# é™åˆ¶æ¥æºIPèŒƒå›´

firewall-cmd --permanent --add-rich-rule='rule family="ipv4" 
  source address="192.168.100.0/24" port protocol="tcp" port="3306" accept'

# é‡è½½é˜²ç«å¢™è§„åˆ™

firewall-cmd --reload
```

**ğŸ“Š ç½‘ç»œå®‰å…¨æ£€æŸ¥æ¸…å•**
```
ç½‘ç»œå®‰å…¨éªŒè¯ï¼š
â˜ MySQLç»‘å®šåˆ°å®‰å…¨çš„ç½‘ç»œæ¥å£
â˜ é˜²ç«å¢™åªå¼€æ”¾å¿…è¦ç«¯å£
â˜ IPç™½åå•æ­£ç¡®é…ç½®
â˜ ç¦ç”¨ä¸å¿…è¦çš„ç½‘ç»œæœåŠ¡
â˜ å®šæœŸæ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€
â˜ ç›‘æ§å¼‚å¸¸ç½‘ç»œè®¿é—®
```

## 4.3 ç½‘ç»œåˆ†æ®µéš”ç¦»



**ğŸ—ï¸ ç½‘ç»œæ‹“æ‰‘è®¾è®¡**
```
ç½‘ç»œåˆ†æ®µæ¶æ„ï¼š

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ä¸šåŠ¡ç½‘æ®µ   â”‚ â† åº”ç”¨æœåŠ¡å™¨
    â”‚ 172.16.1.0  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ•°æ®åº“ç½‘æ®µ  â”‚ â† MGRé›†ç¾¤
    â”‚ 192.168.100 â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç®¡ç†ç½‘æ®µ   â”‚ â† è¿ç»´ç®¡ç†
    â”‚ 10.0.1.0    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 5. ğŸ“œ è¯ä¹¦ç®¡ç†ä¸è½®æ¢ç­–ç•¥



## 5.1 è¯ä¹¦ç”Ÿå‘½å‘¨æœŸç®¡ç†



**ğŸ“Š è¯ä¹¦çŠ¶æ€ç›‘æ§**
```sql
-- åˆ›å»ºè¯ä¹¦ç›‘æ§è§†å›¾
CREATE VIEW certificate_status AS
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE,
    CASE 
        WHEN VARIABLE_NAME LIKE '%ssl_cert%' THEN 'Certificate File'
        WHEN VARIABLE_NAME LIKE '%ssl_key%' THEN 'Private Key'
        WHEN VARIABLE_NAME LIKE '%ssl_ca%' THEN 'CA Certificate'
    END AS cert_type
FROM performance_schema.global_variables 
WHERE VARIABLE_NAME LIKE '%ssl%' AND VARIABLE_VALUE != '';
```

**ğŸ” è¯ä¹¦æœ‰æ•ˆæœŸæ£€æŸ¥è„šæœ¬**
```bash
#!/bin/bash

# check_cert_expiry.sh


CERT_PATH="/etc/mysql/ssl"
WARNING_DAYS=30

for cert in ${CERT_PATH}/*.pem; do
    if [[ $cert == *"cert"* ]]; then
        expiry_date=$(openssl x509 -in "$cert" -noout -enddate | cut -d= -f2)
        expiry_epoch=$(date -d "$expiry_date" +%s)
        current_epoch=$(date +%s)
        days_left=$(( (expiry_epoch - current_epoch) / 86400 ))
        
        if [ $days_left -lt $WARNING_DAYS ]; then
            echo "WARNING: Certificate $cert expires in $days_left days"
        fi
    fi
done
```

## 5.2 è¯ä¹¦è‡ªåŠ¨è½®æ¢æµç¨‹



**ğŸ”„ è¯ä¹¦è½®æ¢ç­–ç•¥**
```
è¯ä¹¦è½®æ¢è®¡åˆ’ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é˜¶æ®µ      â”‚   æ“ä½œ      â”‚   éªŒè¯      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‡†å¤‡é˜¶æ®µ     â”‚ ç”Ÿæˆæ–°è¯ä¹¦   â”‚ éªŒè¯è¯ä¹¦æ ¼å¼ â”‚
â”‚ åˆ†å‘é˜¶æ®µ     â”‚ åˆ†å‘åˆ°èŠ‚ç‚¹   â”‚ æ–‡ä»¶æƒé™æ£€æŸ¥ â”‚
â”‚ é…ç½®é˜¶æ®µ     â”‚ æ›´æ–°é…ç½®æ–‡ä»¶ â”‚ é…ç½®è¯­æ³•æ£€æŸ¥ â”‚
â”‚ é‡å¯é˜¶æ®µ     â”‚ æ»šåŠ¨é‡å¯æœåŠ¡ â”‚ æœåŠ¡çŠ¶æ€æ£€æŸ¥ â”‚
â”‚ éªŒè¯é˜¶æ®µ     â”‚ åŠŸèƒ½æµ‹è¯•     â”‚ è¿æ¥æµ‹è¯•    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ è‡ªåŠ¨åŒ–è½®æ¢è„šæœ¬**
```bash
#!/bin/bash

# certificate_rotation.sh


# é…ç½®å˜é‡

CA_KEY="/etc/mysql/ssl/ca-key.pem"
CA_CERT="/etc/mysql/ssl/ca.pem"
NODE_LIST=("node1" "node2" "node3")

# ç”Ÿæˆæ–°è¯ä¹¦å‡½æ•°

generate_new_certs() {
    local node=$1
    echo "ç”ŸæˆèŠ‚ç‚¹ $node çš„æ–°è¯ä¹¦..."
    
#    # ç”Ÿæˆæ–°ç§é’¥
    openssl genrsa -out "server-key-${node}-new.pem" 4096
    
#    # ç”Ÿæˆè¯ä¹¦è¯·æ±‚
    openssl req -new -key "server-key-${node}-new.pem" \
        -out "server-${node}-new.csr" \
        -subj "/C=CN/ST=Beijing/L=Beijing/O=MyOrg/OU=DBA/CN=mysql-${node}"
    
#    # ç­¾å‘æ–°è¯ä¹¦
    openssl x509 -req -days 365 -in "server-${node}-new.csr" \
        -CA "$CA_CERT" -CAkey "$CA_KEY" \
        -out "server-cert-${node}-new.pem" -sha256 -CAcreateserial
}

# éƒ¨ç½²æ–°è¯ä¹¦å‡½æ•°

deploy_new_certs() {
    local node=$1
    echo "éƒ¨ç½²èŠ‚ç‚¹ $node çš„æ–°è¯ä¹¦..."
    
#    # å¤‡ä»½æ—§è¯ä¹¦
    cp "server-cert-${node}.pem" "server-cert-${node}.pem.backup"
    cp "server-key-${node}.pem" "server-key-${node}.pem.backup"
    
#    # å®‰è£…æ–°è¯ä¹¦
    mv "server-cert-${node}-new.pem" "server-cert-${node}.pem"
    mv "server-key-${node}-new.pem" "server-key-${node}.pem"
    
#    # è®¾ç½®æƒé™
    chmod 600 "server-cert-${node}.pem" "server-key-${node}.pem"
    chown mysql:mysql "server-cert-${node}.pem" "server-key-${node}.pem"
}
```

## 5.3 è¯ä¹¦è½®æ¢æœ€ä½³å®è·µ



**âœ… è½®æ¢å‰æ£€æŸ¥æ¸…å•**
```
è½®æ¢å‡†å¤‡å·¥ä½œï¼š
â˜ å¤‡ä»½å½“å‰æ‰€æœ‰è¯ä¹¦æ–‡ä»¶
â˜ éªŒè¯æ–°è¯ä¹¦çš„æœ‰æ•ˆæ€§
â˜ ç¡®è®¤é›†ç¾¤çŠ¶æ€æ­£å¸¸
â˜ å‡†å¤‡å›æ»šæ–¹æ¡ˆ
â˜ é€šçŸ¥ç›¸å…³äººå‘˜ç»´æŠ¤çª—å£
â˜ å‡†å¤‡ç›‘æ§å’Œæ—¥å¿—æ”¶é›†
```

**âš ï¸ è½®æ¢é£é™©æ§åˆ¶**
- **é€ä¸ªèŠ‚ç‚¹è½®æ¢**ï¼šé¿å…æ•´ä¸ªé›†ç¾¤åŒæ—¶ä¸å¯ç”¨
- **éªŒè¯åç»§ç»­**ï¼šæ¯ä¸ªèŠ‚ç‚¹è½®æ¢åéªŒè¯æ­£å¸¸å†ç»§ç»­
- **ä¿ç•™å¤‡ä»½**ï¼šä¿ç•™æ—§è¯ä¹¦æ–‡ä»¶ä»¥ä¾¿å¿«é€Ÿå›æ»š
- **ç›‘æ§å‘Šè­¦**ï¼šå®æ—¶ç›‘æ§é›†ç¾¤çŠ¶æ€å’Œè¿æ¥æƒ…å†µ

---

# 6. ğŸ”‘ èº«ä»½è®¤è¯æœºåˆ¶è¯¦è§£



## 6.1 åŒå‘è®¤è¯é…ç½®



**ğŸ”¸ åŒå‘è®¤è¯åŸç†**
```
åŒå‘è®¤è¯æµç¨‹ï¼š

å®¢æˆ·ç«¯                    æœåŠ¡ç«¯
   |                        |
   |------ å®¢æˆ·ç«¯è¯ä¹¦ ------>|
   |                        | éªŒè¯å®¢æˆ·ç«¯è¯ä¹¦
   |<----- æœåŠ¡ç«¯è¯ä¹¦ -------|
éªŒè¯æœåŠ¡ç«¯è¯ä¹¦                |
   |                        |
   |<==== å»ºç«‹å®‰å…¨è¿æ¥ =====>|
```

**ğŸ”§ é…ç½®å®¢æˆ·ç«¯è¯ä¹¦è®¤è¯**
```sql
-- è¦æ±‚ç‰¹å®šç”¨æˆ·ä½¿ç”¨è¯ä¹¦è®¤è¯
CREATE USER 'secure_user'@'%' IDENTIFIED BY 'P@ssw0rd123!' 
  REQUIRE X509;

-- è¦æ±‚ç‰¹å®šè¯ä¹¦
CREATE USER 'cert_user'@'%' IDENTIFIED BY 'P@ssw0rd123!' 
  REQUIRE SUBJECT '/C=CN/ST=Beijing/L=Beijing/O=MyOrg/OU=DBA/CN=cert_user';

-- è¦æ±‚è¯ä¹¦é¢å‘è€…
CREATE USER 'ca_user'@'%' IDENTIFIED BY 'P@ssw0rd123!' 
  REQUIRE ISSUER '/C=CN/ST=Beijing/L=Beijing/O=MyOrg/OU=DBA/CN=MySQL-CA';
```

## 6.2 è®¤è¯æ’ä»¶é…ç½®



**ğŸ”§ é…ç½®è®¤è¯æ’ä»¶**
```sql
-- å®‰è£…è®¤è¯æ’ä»¶
INSTALL PLUGIN authentication_ldap_sasl SONAME 'authentication_ldap_sasl.so';

-- é…ç½®LDAPè®¤è¯
SET GLOBAL authentication_ldap_sasl_server_host = 'ldap.company.com';
SET GLOBAL authentication_ldap_sasl_server_port = 389;
SET GLOBAL authentication_ldap_sasl_bind_base_dn = 'dc=company,dc=com';

-- åˆ›å»ºLDAPè®¤è¯ç”¨æˆ·
CREATE USER 'ldap_user'@'%' IDENTIFIED WITH authentication_ldap_sasl;
```

**ğŸ“Š è®¤è¯æ–¹å¼å¯¹æ¯”**
```
è®¤è¯æ–¹å¼        å®‰å…¨çº§åˆ«    å¤æ‚åº¦    é€‚ç”¨åœºæ™¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¯†ç è®¤è¯        â­â­       â­       å¼€å‘æµ‹è¯•ç¯å¢ƒ
è¯ä¹¦è®¤è¯        â­â­â­â­    â­â­â­    ç”Ÿäº§ç¯å¢ƒ
åŒå› å­è®¤è¯      â­â­â­â­â­   â­â­â­â­   é«˜å®‰å…¨è¦æ±‚
LDAPé›†æˆ        â­â­â­     â­â­â­â­   ä¼ä¸šç¯å¢ƒ
```

## 6.3 è®¤è¯å¤±è´¥å¤„ç†



**ğŸ” è®¤è¯å¤±è´¥æ—¥å¿—åˆ†æ**
```sql
-- æŸ¥çœ‹è®¤è¯å¤±è´¥è®°å½•
SELECT 
    EVENT_TIME,
    USER_HOST,
    CONNECTION_TYPE,
    PRIV_USER,
    PROXY_PRIV
FROM performance_schema.events_statements_history_long 
WHERE SQL_TEXT LIKE '%ACCESS DENIED%'
ORDER BY EVENT_TIME DESC 
LIMIT 10;
```

**âš ï¸ è®¤è¯å¤±è´¥å“åº”ç­–ç•¥**
- **è®°å½•è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•å¤±è´¥çš„IPã€ç”¨æˆ·åã€æ—¶é—´
- **è‡ªåŠ¨å°ç¦**ï¼šå¤šæ¬¡å¤±è´¥åä¸´æ—¶å°ç¦IP
- **å‘Šè­¦é€šçŸ¥**ï¼šå¼‚å¸¸è®¤è¯æ´»åŠ¨å®æ—¶å‘Šè­¦
- **å®‰å…¨å®¡è®¡**ï¼šå®šæœŸåˆ†æè®¤è¯å¤±è´¥æ¨¡å¼

---

# 7. ğŸ“Š å®‰å…¨å®¡è®¡ä¸ç›‘æ§



## 7.1 å®¡è®¡æ—¥å¿—é…ç½®



**ğŸ”§ å¯ç”¨å®¡è®¡æ’ä»¶**
```sql
-- å®‰è£…å®¡è®¡æ—¥å¿—æ’ä»¶
INSTALL PLUGIN audit_log SONAME 'audit_log.so';

-- é…ç½®å®¡è®¡ç­–ç•¥
SET GLOBAL audit_log_policy = ALL;
SET GLOBAL audit_log_format = JSON;
SET GLOBAL audit_log_file = '/var/log/mysql/audit.log';
```

**ğŸ“ å®¡è®¡é…ç½®ç¤ºä¾‹**
```ini
[mysqld]
# å®¡è®¡æ—¥å¿—é…ç½®

plugin-load-add = audit_log.so
audit_log_policy = ALL
audit_log_format = JSON
audit_log_rotate_on_size = 100M
audit_log_rotations = 10

# å®¡è®¡è¿‡æ»¤è§„åˆ™

audit_log_connection_policy = ALL
audit_log_statement_policy = ERRORS
```

## 7.2 å®‰å…¨äº‹ä»¶ç›‘æ§



**ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡**
```sql
-- åˆ›å»ºå®‰å…¨ç›‘æ§è§†å›¾
CREATE VIEW security_monitoring AS
SELECT 
    'Failed_Logins' as metric_name,
    COUNT(*) as metric_value,
    DATE(NOW()) as metric_date
FROM information_schema.events_statements_history_long 
WHERE SQL_TEXT LIKE '%ACCESS DENIED%'
AND EVENT_TIME >= DATE_SUB(NOW(), INTERVAL 1 DAY)

UNION ALL

SELECT 
    'SSL_Connections' as metric_name,
    SUM(CASE WHEN SSL_TYPE != '' THEN 1 ELSE 0 END) as metric_value,
    DATE(NOW()) as metric_date
FROM information_schema.processlist;
```

**ğŸš¨ å‘Šè­¦è§„åˆ™é…ç½®**
```bash
# monitoring_alerts.sh

#!/bin/bash


# ç›‘æ§å¤±è´¥ç™»å½•æ¬¡æ•°

FAILED_LOGINS=$(mysql -e "
SELECT COUNT(*) FROM information_schema.events_statements_history_long 
WHERE SQL_TEXT LIKE '%ACCESS DENIED%' 
AND EVENT_TIME >= DATE_SUB(NOW(), INTERVAL 1 HOUR);" --skip-column-names)

if [ "$FAILED_LOGINS" -gt 10 ]; then
    echo "ALERT: $FAILED_LOGINS failed login attempts in the last hour"
#    # å‘é€å‘Šè­¦é€šçŸ¥
fi

# ç›‘æ§SSLè¿æ¥æ¯”ä¾‹

SSL_RATIO=$(mysql -e "
SELECT ROUND(
    SUM(CASE WHEN SSL_TYPE != '' THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2
) FROM information_schema.processlist;" --skip-column-names)

if (( $(echo "$SSL_RATIO < 95" | bc -l) )); then
    echo "ALERT: SSL connection ratio is only $SSL_RATIO%"
fi
```

## 7.3 åˆè§„æ€§æ£€æŸ¥



**ğŸ“‹ å®‰å…¨åˆè§„æ£€æŸ¥æ¸…å•**
```
å®‰å…¨é…ç½®åˆè§„æ£€æŸ¥ï¼š
â˜ æ‰€æœ‰è¿æ¥å¼ºåˆ¶ä½¿ç”¨SSL
â˜ é»˜è®¤ç”¨æˆ·å·²åˆ é™¤æˆ–ç¦ç”¨
â˜ rootç”¨æˆ·ä»…å…è®¸æœ¬åœ°ç™»å½•
â˜ å¯†ç ç­–ç•¥ç¬¦åˆå®‰å…¨è¦æ±‚
â˜ å®¡è®¡æ—¥å¿—æ­£å¸¸è®°å½•
â˜ è¯ä¹¦åœ¨æœ‰æ•ˆæœŸå†…
â˜ é˜²ç«å¢™è§„åˆ™æ­£ç¡®é…ç½®
â˜ æ–‡ä»¶æƒé™è®¾ç½®æ­£ç¡®
```

**ğŸ” è‡ªåŠ¨åŒ–åˆè§„æ£€æŸ¥è„šæœ¬**
```bash
#!/bin/bash

# security_compliance_check.sh


echo "=== MySQL MGRå®‰å…¨åˆè§„æ£€æŸ¥ ==="

# æ£€æŸ¥SSLé…ç½®

SSL_STATUS=$(mysql -e "SHOW VARIABLES LIKE 'have_ssl';" --skip-column-names | awk '{print $2}')
if [ "$SSL_STATUS" = "YES" ]; then
    echo "âœ… SSLå·²å¯ç”¨"
else
    echo "âŒ SSLæœªå¯ç”¨"
fi

# æ£€æŸ¥å¼ºåˆ¶SSL

REQUIRE_SSL=$(mysql -e "SHOW VARIABLES LIKE 'require_secure_transport';" --skip-column-names | awk '{print $2}')
if [ "$REQUIRE_SSL" = "ON" ]; then
    echo "âœ… å¼ºåˆ¶SSLè¿æ¥å·²å¯ç”¨"
else
    echo "âš ï¸  å¼ºåˆ¶SSLè¿æ¥æœªå¯ç”¨"
fi

# æ£€æŸ¥å±é™©ç”¨æˆ·

DANGEROUS_USERS=$(mysql -e "SELECT COUNT(*) FROM mysql.user WHERE User='' OR (User='root' AND Host='%');" --skip-column-names)
if [ "$DANGEROUS_USERS" -eq 0 ]; then
    echo "âœ… æ— å±é™©ç”¨æˆ·è´¦æˆ·"
else
    echo "âŒ å­˜åœ¨å±é™©ç”¨æˆ·è´¦æˆ·"
fi
```

---

# 8. ğŸ› ï¸ æ•…éšœæ’æŸ¥ä¸æ€§èƒ½ä¼˜åŒ–



## 8.1 å¸¸è§SSL/TLSé—®é¢˜æ’æŸ¥



**ğŸ” SSLè¿æ¥é—®é¢˜è¯Šæ–­**
```sql
-- æ£€æŸ¥SSLçŠ¶æ€
SHOW STATUS LIKE 'Ssl%';

-- æŸ¥çœ‹SSLé”™è¯¯
SHOW GLOBAL STATUS LIKE 'Ssl_accept_renegotiates';
SHOW GLOBAL STATUS LIKE 'Ssl_accepts';
```

**ğŸ“Š å¸¸è§SSLé”™è¯¯åŠè§£å†³æ–¹æ¡ˆ**
```
é”™è¯¯ç±»å‹                 åŸå› åˆ†æ              è§£å†³æ–¹æ¡ˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SSLè¿æ¥è¢«æ‹’ç»           è¯ä¹¦é…ç½®é”™è¯¯          æ£€æŸ¥è¯ä¹¦è·¯å¾„å’Œæƒé™
è¯ä¹¦éªŒè¯å¤±è´¥           CAè¯ä¹¦ä¸åŒ¹é…          ç¡®ä¿CAè¯ä¹¦ä¸€è‡´
æ¡æ‰‹è¶…æ—¶               ç½‘ç»œå»¶è¿Ÿè¿‡é«˜          è°ƒæ•´è¶…æ—¶å‚æ•°
è¯ä¹¦è¿‡æœŸ               è¯ä¹¦å·²è¿‡æœŸ            æ›´æ–°è¯ä¹¦
```

## 8.2 è®¤è¯æ€§èƒ½ä¼˜åŒ–



**âš¡ SSLæ€§èƒ½ä¼˜åŒ–é…ç½®**
```ini
[mysqld]
# SSLæ€§èƒ½ä¼˜åŒ–

ssl_cipher = 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384'
ssl_protocols = 'TLSv1.2,TLSv1.3'

# è¿æ¥å¤ç”¨

ssl_session_cache_mode = ON
ssl_session_cache_timeout = 7200
```

**ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡**
```sql
-- SSLæ€§èƒ½ç›‘æ§
SELECT 
    'SSL_Handshakes' as metric,
    VARIABLE_VALUE as value
FROM performance_schema.global_status 
WHERE VARIABLE_NAME = 'Ssl_accepts'

UNION ALL

SELECT 
    'SSL_Errors' as metric,
    VARIABLE_VALUE as value
FROM performance_schema.global_status 
WHERE VARIABLE_NAME LIKE 'Ssl_%error%';
```

## 8.3 æ€§èƒ½vså®‰å…¨å¹³è¡¡



**âš–ï¸ æ€§èƒ½å½±å“è¯„ä¼°**
```
å®‰å…¨æªæ–½              æ€§èƒ½å½±å“    å»ºè®®é…ç½®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SSL/TLSåŠ å¯†          5-15%       å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ
è¯ä¹¦éªŒè¯             1-3%        ä¼˜åŒ–è¯ä¹¦é“¾
å¯†ç å“ˆå¸Œ             2-5%        ä½¿ç”¨é«˜æ•ˆç®—æ³•
å®¡è®¡æ—¥å¿—             3-8%        é€‰æ‹©æ€§è®°å½•
é˜²ç«å¢™æ£€æŸ¥           1-2%        ä¼˜åŒ–è§„åˆ™
```

**ğŸ¯ ä¼˜åŒ–å»ºè®®**
- **ç¡¬ä»¶åŠ é€Ÿ**ï¼šä½¿ç”¨æ”¯æŒAES-NIçš„CPU
- **è¯ä¹¦ä¼˜åŒ–**ï¼šä½¿ç”¨æ¤­åœ†æ›²çº¿è¯ä¹¦ï¼ˆECCï¼‰
- **è¿æ¥å¤ç”¨**ï¼šå¯ç”¨SSLä¼šè¯ç¼“å­˜
- **é€‰æ‹©æ€§å®¡è®¡**ï¼šåªè®°å½•å…³é”®å®‰å…¨äº‹ä»¶

---

# 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



## 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



**ğŸ”¸ MGRå®‰å…¨åŸºç¡€**
```
å®‰å…¨ç›®æ ‡ï¼šæœºå¯†æ€§ã€å®Œæ•´æ€§ã€èº«ä»½è®¤è¯
å®‰å…¨å±‚æ¬¡ï¼šç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€åº”ç”¨å±‚ã€æ•°æ®å±‚
æ ¸å¿ƒæŠ€æœ¯ï¼šSSL/TLSã€è¯ä¹¦è®¤è¯ã€æƒé™æ§åˆ¶ã€å®¡è®¡ç›‘æ§
```

**ğŸ”¸ å…³é”®é…ç½®è¦ç‚¹**
- **SSL/TLSé…ç½®**ï¼šè¯ä¹¦ç”Ÿæˆã€é…ç½®æ–‡ä»¶ã€éªŒè¯æµ‹è¯•
- **ç”¨æˆ·æƒé™ç®¡ç†**ï¼šæœ€å°æƒé™åŸåˆ™ã€è§’è‰²åˆ†ç¦»ã€å¯†ç ç­–ç•¥
- **ç½‘ç»œå®‰å…¨**ï¼šIPç™½åå•ã€é˜²ç«å¢™ã€ç½‘ç»œåˆ†æ®µ
- **å®¡è®¡ç›‘æ§**ï¼šæ—¥å¿—è®°å½•ã€å®‰å…¨ç›‘æ§ã€åˆè§„æ£€æŸ¥

## 9.2 æœ€ä½³å®è·µæ€»ç»“



**âœ… å®‰å…¨é…ç½®æ¸…å•**
```
SSL/TLSå®‰å…¨ï¼š
â˜ å¼ºåˆ¶å¯ç”¨SSLè¿æ¥
â˜ ä½¿ç”¨å¼ºåŠ å¯†ç®—æ³•
â˜ å®šæœŸæ›´æ–°è¯ä¹¦
â˜ ç›‘æ§è¯ä¹¦æœ‰æ•ˆæœŸ

ç”¨æˆ·å®‰å…¨ï¼š
â˜ åˆ é™¤é»˜è®¤ç”¨æˆ·
â˜ å®æ–½å¼ºå¯†ç ç­–ç•¥
â˜ å®šæœŸè½®æ¢å¯†ç 
â˜ é™åˆ¶ç”¨æˆ·IPèŒƒå›´

ç½‘ç»œå®‰å…¨ï¼š
â˜ é…ç½®é˜²ç«å¢™è§„åˆ™
â˜ å¯ç”¨ç½‘ç»œåˆ†æ®µ
â˜ ç›‘æ§ç½‘ç»œè¿æ¥
â˜ é™åˆ¶ç®¡ç†è®¿é—®

å®¡è®¡å®‰å…¨ï¼š
â˜ å¯ç”¨å®¡è®¡æ—¥å¿—
â˜ ç›‘æ§å®‰å…¨äº‹ä»¶
â˜ å®šæœŸå®‰å…¨æ£€æŸ¥
â˜ äº‹ä»¶å“åº”æµç¨‹
```

## 9.3 æ•…éšœå¤„ç†è¦ç‚¹



**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³æ€è·¯**
1. **SSLè¿æ¥é—®é¢˜**ï¼šæ£€æŸ¥è¯ä¹¦é…ç½®â†’éªŒè¯ç½‘ç»œè¿æ¥â†’æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. **è®¤è¯å¤±è´¥**ï¼šç¡®è®¤ç”¨æˆ·æƒé™â†’æ£€æŸ¥å¯†ç ç­–ç•¥â†’åˆ†æè®¤è¯æ—¥å¿—
3. **æ€§èƒ½é—®é¢˜**ï¼šç›‘æ§SSLå¼€é”€â†’ä¼˜åŒ–åŠ å¯†ç®—æ³•â†’è°ƒæ•´ç¼“å­˜é…ç½®
4. **è¯ä¹¦è¿‡æœŸ**ï¼šæ£€æŸ¥æœ‰æ•ˆæœŸâ†’ç”Ÿæˆæ–°è¯ä¹¦â†’æ»šåŠ¨æ›´æ–°éƒ¨ç½²

## 9.4 è¿ç»´ç®¡ç†å»ºè®®



**ğŸ“Š æ—¥å¸¸ç»´æŠ¤å·¥ä½œ**
- **æ¯æ—¥**ï¼šæ£€æŸ¥å®‰å…¨å‘Šè­¦ã€ç›‘æ§è¿æ¥çŠ¶æ€
- **æ¯å‘¨**ï¼šåˆ†æå®¡è®¡æ—¥å¿—ã€æ£€æŸ¥ç”¨æˆ·æ´»åŠ¨
- **æ¯æœˆ**ï¼šéªŒè¯è¯ä¹¦æœ‰æ•ˆæœŸã€æ›´æ–°å®‰å…¨é…ç½®
- **æ¯å­£åº¦**ï¼šå®‰å…¨åˆè§„æ£€æŸ¥ã€æ¸—é€æµ‹è¯•è¯„ä¼°

**ğŸ¯ æŒç»­æ”¹è¿›æ–¹å‘**
- **è‡ªåŠ¨åŒ–**ï¼šè¯ä¹¦ç®¡ç†ã€å®‰å…¨æ£€æŸ¥ã€äº‹ä»¶å“åº”
- **ç›‘æ§å¢å¼º**ï¼šå®æ—¶å‘Šè­¦ã€å¼‚å¸¸æ£€æµ‹ã€è¶‹åŠ¿åˆ†æ
- **åˆè§„æ ‡å‡†**ï¼šéµå¾ªè¡Œä¸šæ ‡å‡†ã€å®šæœŸå®¡è®¡è¯„ä¼°
- **å›¢é˜ŸåŸ¹è®­**ï¼šå®‰å…¨æ„è¯†ã€æŠ€èƒ½æå‡ã€åº”æ€¥å“åº”

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- MGRå®‰å…¨æ˜¯å¤šå±‚é˜²æŠ¤ä½“ç³»ï¼ŒSSL/TLSæ˜¯åŸºç¡€
- è¯ä¹¦ç®¡ç†æ˜¯æŒç»­æ€§å·¥ä½œï¼Œéœ€è¦è‡ªåŠ¨åŒ–æµç¨‹
- æƒé™æ§åˆ¶éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œå®šæœŸå®¡æŸ¥æ¸…ç†
- å®‰å…¨ç›‘æ§è¦å…¨é¢è¦†ç›–ï¼Œå¿«é€Ÿå“åº”å¼‚å¸¸äº‹ä»¶