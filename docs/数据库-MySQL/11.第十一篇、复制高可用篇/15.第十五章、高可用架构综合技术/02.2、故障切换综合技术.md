---
title: 2ã€æ•…éšœåˆ‡æ¢ç»¼åˆæŠ€æœ¯
---
## ğŸ“š ç›®å½•

1. [åº”ç”¨å±‚æ•…éšœåˆ‡æ¢æŠ€æœ¯](#1-åº”ç”¨å±‚æ•…éšœåˆ‡æ¢æŠ€æœ¯)
2. [æ™ºèƒ½åˆ‡æ¢å†³ç­–æœºåˆ¶](#2-æ™ºèƒ½åˆ‡æ¢å†³ç­–æœºåˆ¶)
3. [æ•…éšœå›æ»šç»¼åˆç­–ç•¥](#3-æ•…éšœå›æ»šç»¼åˆç­–ç•¥)
4. [æ•°æ®ä¸€è‡´æ€§ä¿éšœæŠ€æœ¯](#4-æ•°æ®ä¸€è‡´æ€§ä¿éšœæŠ€æœ¯)
5. [ä¸šåŠ¡æ— æ„ŸçŸ¥åˆ‡æ¢å®ç°](#5-ä¸šåŠ¡æ— æ„ŸçŸ¥åˆ‡æ¢å®ç°)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ åº”ç”¨å±‚æ•…éšœåˆ‡æ¢æŠ€æœ¯


### 1.1 ä»€ä¹ˆæ˜¯åº”ç”¨å±‚åˆ‡æ¢


**æ ¸å¿ƒæ¦‚å¿µ**ï¼šåº”ç”¨å±‚åˆ‡æ¢å°±æ˜¯åœ¨åº”ç”¨ç¨‹åºè¿™ä¸€å±‚è¿›è¡Œæ•°æ®åº“çš„æ•…éšœåˆ‡æ¢ï¼Œè€Œä¸æ˜¯ä¾èµ–åº•å±‚çš„æ•°æ®åº“é›†ç¾¤è‡ªåŠ¨åˆ‡æ¢ã€‚

**é€šä¿—ç†è§£**ï¼š
```
æƒ³è±¡ä½ æœ‰ä¸¤ä¸ªé“¶è¡ŒATMæœºï¼š
- ä¸»ATMæœºï¼ˆä¸»æ•°æ®åº“ï¼‰ï¼šå¹³æ—¶å¤§å®¶éƒ½ç”¨è¿™ä¸ª
- å¤‡ç”¨ATMæœºï¼ˆä»æ•°æ®åº“ï¼‰ï¼šä¸»ATMåäº†å°±ç”¨è¿™ä¸ª

åº”ç”¨å±‚åˆ‡æ¢ = ä½ çš„æ‰‹æœºé“¶è¡ŒAPPè‡ªå·±åˆ¤æ–­ä¸»ATMåäº†ï¼Œ
è‡ªåŠ¨å¸®ä½ è¿æ¥åˆ°å¤‡ç”¨ATMï¼Œè€Œä½ æ„Ÿè§‰ä¸åˆ°ä»»ä½•å˜åŒ–
```

### 1.2 åº”ç”¨æ„ŸçŸ¥åˆ‡æ¢æœºåˆ¶


**ğŸ”¸ ä»€ä¹ˆæ˜¯åº”ç”¨æ„ŸçŸ¥**
åº”ç”¨æ„ŸçŸ¥å°±æ˜¯è®©ä½ çš„åº”ç”¨ç¨‹åº"èªæ˜"èµ·æ¥ï¼Œèƒ½å¤Ÿè‡ªå·±åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å¥åº·ï¼Œä¸»åŠ¨è¿›è¡Œåˆ‡æ¢ã€‚

```java
// ç®€å•çš„åº”ç”¨æ„ŸçŸ¥åˆ‡æ¢ç¤ºä¾‹
public class SmartDataSource {
    private DataSource primaryDB;    // ä¸»æ•°æ®åº“
    private DataSource secondaryDB;  // å¤‡æ•°æ®åº“
    private boolean isPrimaryHealthy = true;
    
    // è·å–æ•°æ®åº“è¿æ¥æ—¶è‡ªåŠ¨åˆ¤æ–­
    public Connection getConnection() {
        if (checkPrimaryHealth()) {
            return primaryDB.getConnection();
        } else {
            // ä¸»åº“ä¸å¥åº·ï¼Œåˆ‡æ¢åˆ°å¤‡åº“
            return secondaryDB.getConnection();
        }
    }
    
    // æ£€æŸ¥ä¸»æ•°æ®åº“å¥åº·çŠ¶æ€
    private boolean checkPrimaryHealth() {
        try {
            // å‘é€ä¸€ä¸ªç®€å•çš„å¿ƒè·³æŸ¥è¯¢
            primaryDB.getConnection().prepareStatement("SELECT 1").execute();
            return true;
        } catch (Exception e) {
            // ä¸»åº“æœ‰é—®é¢˜ï¼Œè¿”å›false
            return false;
        }
    }
}
```

**ğŸ”¸ åº”ç”¨æ„ŸçŸ¥çš„ä¼˜åŠ¿**
```
å¿«é€Ÿå“åº”ï¼šåº”ç”¨ç›´æ¥æ£€æµ‹ï¼Œä¸ç”¨ç­‰å¾…ä¸­é—´ä»¶é€šçŸ¥
çµæ´»æ§åˆ¶ï¼šå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶åˆ‡æ¢é€»è¾‘
é™ä½å»¶è¿Ÿï¼šå‡å°‘äº†ä¸­é—´ç¯èŠ‚ï¼Œåˆ‡æ¢æ›´å¿«
```

### 1.3 è¿æ¥æ± åˆ‡æ¢æŠ€æœ¯


**è¿æ¥æ± åˆ‡æ¢åŸç†**ï¼šè¿æ¥æ± å°±åƒä¸€ä¸ª"æ•°æ®åº“è¿æ¥çš„ä»“åº“"ï¼Œé‡Œé¢é¢„å…ˆå‡†å¤‡å¥½äº†å¾ˆå¤šåˆ°æ•°æ®åº“çš„è¿æ¥ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼š
åº”ç”¨ â†’ è¿æ¥æ±  â†’ ä¸»æ•°æ®åº“
åº”ç”¨ â†’ è¿æ¥æ±  â†’ å¤‡æ•°æ®åº“ï¼ˆä¸»åº“æ•…éšœæ—¶ï¼‰

æ™ºèƒ½è¿æ¥æ± åˆ‡æ¢ï¼š
åº”ç”¨ â†’ æ™ºèƒ½è¿æ¥æ±  â”€â”¬â”€ ä¸»æ•°æ®åº“ï¼ˆä¼˜å…ˆï¼‰
                 â””â”€ å¤‡æ•°æ®åº“ï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰
```

**è¿æ¥æ± åˆ‡æ¢é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# æ•°æ®åº“è¿æ¥æ± é…ç½®
datasource:
  primary:
    url: jdbc:mysql://192.168.1.10:3306/mydb
    username: root
    password: password
    max-connections: 20
  
  secondary: 
    url: jdbc:mysql://192.168.1.11:3306/mydb
    username: root  
    password: password
    max-connections: 20
    
  failover:
    health-check-interval: 5s    # æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡å¥åº·çŠ¶æ€
    failover-timeout: 10s        # 10ç§’è¶…æ—¶å°±åˆ‡æ¢
    retry-interval: 30s          # 30ç§’åå°è¯•åˆ‡å›ä¸»åº“
```

### 1.4 æœåŠ¡å‘ç°ä¸åˆ‡æ¢é…åˆ


**æœåŠ¡å‘ç°æœºåˆ¶**ï¼šå°±åƒç”µè¯é»„é¡µä¸€æ ·ï¼Œå¸®åŠ©åº”ç”¨æ‰¾åˆ°å¯ç”¨çš„æ•°æ®åº“æœåŠ¡ã€‚

```
æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨æœåŠ¡      â”‚â”€â”€â”€â”€â”‚  æœåŠ¡å‘ç°ä¸­å¿ƒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         â”‚         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
            â”‚ MySQLä¸»åº“ â”‚ â”‚MySQLä»åº“â”‚ â”‚ ç›‘æ§  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœåŠ¡å‘ç°åˆ‡æ¢æµç¨‹**ï¼š
```
1. æ•°æ®åº“èŠ‚ç‚¹å¯åŠ¨ â†’ å‘æœåŠ¡å‘ç°ä¸­å¿ƒæ³¨å†Œ
2. åº”ç”¨å¯åŠ¨ â†’ ä»æœåŠ¡å‘ç°ä¸­å¿ƒè·å–æ•°æ®åº“åˆ—è¡¨
3. ä¸»åº“æ•…éšœ â†’ ç›‘æ§å‘ç°é—®é¢˜ â†’ æ›´æ–°æœåŠ¡å‘ç°ä¸­å¿ƒ
4. åº”ç”¨æŸ¥è¯¢ â†’ è·å–æ–°çš„å¯ç”¨æ•°æ®åº“åˆ—è¡¨ â†’ è‡ªåŠ¨åˆ‡æ¢
```

### 1.5 è´Ÿè½½å‡è¡¡å™¨åœ¨åˆ‡æ¢ä¸­çš„ä½œç”¨


**è´Ÿè½½å‡è¡¡å™¨é…ç½®**ï¼š
```nginx
# Nginxè´Ÿè½½å‡è¡¡é…ç½®ç¤ºä¾‹
upstream mysql_cluster {
    # ä¸»æ•°æ®åº“æœåŠ¡å™¨ï¼ˆæƒé‡æ›´é«˜ï¼‰
    server 192.168.1.10:3306 weight=3 max_fails=2 fail_timeout=10s;
    # å¤‡æ•°æ®åº“æœåŠ¡å™¨
    server 192.168.1.11:3306 weight=1 max_fails=2 fail_timeout=10s backup;
    
    # å¥åº·æ£€æŸ¥
    check interval=3000 rise=2 fall=5 timeout=1000;
}
```

**åˆ‡æ¢é€»è¾‘è¯´æ˜**ï¼š
- `weight=3`ï¼šä¸»åº“å¤„ç†æ›´å¤šè¯·æ±‚
- `backup`ï¼šåªæœ‰ä¸»åº“ä¸å¯ç”¨æ—¶æ‰ä½¿ç”¨å¤‡åº“
- `max_fails=2`ï¼šè¿ç»­å¤±è´¥2æ¬¡å°±è®¤ä¸ºæœåŠ¡å™¨ä¸å¯ç”¨
- `fail_timeout=10s`ï¼š10ç§’åé‡æ–°å°è¯•è¿æ¥

---

## 2. ğŸ§  æ™ºèƒ½åˆ‡æ¢å†³ç­–æœºåˆ¶


### 2.1 æ™ºèƒ½å†³ç­–ç³»ç»Ÿæ¦‚è¿°


**ä»€ä¹ˆæ˜¯æ™ºèƒ½å†³ç­–**ï¼šä¸æ˜¯ç®€å•çš„"ä¸»åº“åäº†å°±åˆ‡å¤‡åº“"ï¼Œè€Œæ˜¯ç»¼åˆè€ƒè™‘å¤šç§å› ç´ ï¼Œåšå‡ºæœ€ä½³çš„åˆ‡æ¢å†³ç­–ã€‚

```
ä¼ ç»Ÿåˆ‡æ¢ï¼šä¸»åº“æ•…éšœ â†’ ç«‹å³åˆ‡æ¢å¤‡åº“

æ™ºèƒ½å†³ç­–ï¼šä¸»åº“æ•…éšœ â†’ åˆ†ææ•…éšœç±»å‹ â†’ è¯„ä¼°åˆ‡æ¢é£é™© â†’ 
         é€‰æ‹©æœ€ä½³ç­–ç•¥ â†’ æ‰§è¡Œåˆ‡æ¢ â†’ æŒç»­ç›‘æ§
```

### 2.2 å¤šç»´åº¦æ•…éšœæ£€æµ‹


**ğŸ”¸ æ£€æµ‹ç»´åº¦**ï¼š
```
ç½‘ç»œå±‚é¢ï¼š
- ç½‘ç»œè¿é€šæ€§ï¼šèƒ½å¦pingé€šæ•°æ®åº“æœåŠ¡å™¨
- ç½‘ç»œå»¶è¿Ÿï¼šå“åº”æ—¶é—´æ˜¯å¦æ­£å¸¸
- ç½‘ç»œä¸¢åŒ…ï¼šæ˜¯å¦å­˜åœ¨æ•°æ®åŒ…ä¸¢å¤±

æœåŠ¡å±‚é¢ï¼š
- ç«¯å£å¯è¾¾æ€§ï¼šMySQLçš„3306ç«¯å£æ˜¯å¦å¯è®¿é—®
- æœåŠ¡å“åº”ï¼šæ˜¯å¦èƒ½æ­£å¸¸å¤„ç†SQLæŸ¥è¯¢
- è¿æ¥æ•°ï¼šå½“å‰è¿æ¥æ•°æ˜¯å¦è¶…é™

æ•°æ®å±‚é¢ï¼š
- æ•°æ®ä¸€è‡´æ€§ï¼šä¸»ä»æ•°æ®æ˜¯å¦åŒæ­¥
- å¤åˆ¶å»¶è¿Ÿï¼šä»åº“è½åä¸»åº“å¤šé•¿æ—¶é—´
- é”ç­‰å¾…ï¼šæ˜¯å¦å­˜åœ¨å¤§é‡é”ç­‰å¾…
```

**æ£€æµ‹ä»£ç ç¤ºä¾‹**ï¼š
```python
class HealthChecker:
    def check_database_health(self, db_host):
        scores = {}
        
        # ç½‘ç»œæ£€æµ‹ï¼ˆæƒé‡ï¼š30%ï¼‰
        scores['network'] = self.check_network(db_host) * 0.3
        
        # æœåŠ¡æ£€æµ‹ï¼ˆæƒé‡ï¼š40%ï¼‰  
        scores['service'] = self.check_service(db_host) * 0.4
        
        # æ•°æ®æ£€æµ‹ï¼ˆæƒé‡ï¼š30%ï¼‰
        scores['data'] = self.check_data_consistency(db_host) * 0.3
        
        # ç»¼åˆè¯„åˆ†
        total_score = sum(scores.values())
        
        # è¯„åˆ†ä½äº80åˆ†å°±è®¤ä¸ºä¸å¥åº·
        return total_score >= 0.8
```

### 2.3 æ™ºèƒ½è·¯ç”±ç­–ç•¥


**ğŸ”¸ è¯»å†™åˆ†ç¦»è·¯ç”±**ï¼š
```
æ™ºèƒ½è·¯ç”±å†³ç­–ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†™æ“ä½œè¯·æ±‚  â”‚â”€â”€â”€â†’â”‚   ä¸»æ•°æ®åº“    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ï¼ˆæ•°æ®åŒæ­¥ï¼‰
â”‚ è¯»æ“ä½œè¯·æ±‚  â”‚â”€â”€â”€â†’â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   ä»æ•°æ®åº“    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è·¯ç”±ç­–ç•¥é…ç½®**ï¼š
```yaml
routing_rules:
  write_operations:
    target: primary_db
    fallback: none  # å†™æ“ä½œä¸èƒ½é™çº§
    
  read_operations:
    target: secondary_db
    fallback: primary_db  # ä»åº“ä¸å¯ç”¨æ—¶è¯»ä¸»åº“
    load_balance: round_robin  # å¤šä¸ªä»åº“æ—¶è½®è¯¢
    
  critical_reads:
    target: primary_db  # é‡è¦è¯»æ“ä½œç›´æ¥è¯»ä¸»åº“
    timeout: 5s
```

### 2.4 åˆ‡æ¢æ¡ä»¶ä¸é˜ˆå€¼è®¾ç½®


**å¤šçº§åˆ‡æ¢é˜ˆå€¼**ï¼š
```
Level 1 - è­¦å‘Šçº§åˆ«ï¼š
- å“åº”æ—¶é—´ > 1ç§’ï¼šå‘é€å‘Šè­¦ï¼Œä½†ä¸åˆ‡æ¢
- CPUä½¿ç”¨ç‡ > 80%ï¼šå¼€å§‹å‡†å¤‡åˆ‡æ¢

Level 2 - åˆ‡æ¢çº§åˆ«ï¼š
- å“åº”æ—¶é—´ > 5ç§’ï¼šæ‰§è¡Œè‡ªåŠ¨åˆ‡æ¢
- è¿ç»­3æ¬¡å¥åº·æ£€æŸ¥å¤±è´¥ï¼šç«‹å³åˆ‡æ¢

Level 3 - ç´§æ€¥çº§åˆ«ï¼š
- å®Œå…¨æ— å“åº”ï¼šç«‹å³åˆ‡æ¢å¹¶å‘Šè­¦
- æ•°æ®æŸåï¼šåˆ‡æ¢å¹¶åœæ­¢å†™å…¥
```

---

## 3. ğŸ”„ æ•…éšœå›æ»šç»¼åˆç­–ç•¥


### 3.1 ä»€ä¹ˆæ˜¯æ•…éšœå›æ»š


**å›æ»šæ¦‚å¿µ**ï¼šå½“åˆ‡æ¢åˆ°å¤‡åº“åï¼Œå¦‚æœä¸»åº“æ¢å¤äº†ï¼Œéœ€è¦è€ƒè™‘æ˜¯å¦è¦åˆ‡æ¢å›å»ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«å›æ»šã€‚

**ä¸ºä»€ä¹ˆéœ€è¦å›æ»š**ï¼š
```
æ€§èƒ½è€ƒè™‘ï¼šä¸»åº“é€šå¸¸é…ç½®æ›´å¥½ï¼Œæ€§èƒ½æ›´å¼º
èµ„æºåˆ†é…ï¼šé¿å…å¤‡åº“é•¿æœŸæ‰¿æ‹…ä¸»åº“å‹åŠ›
æ¶æ„ä¸€è‡´æ€§ï¼šç»´æŒåŸæœ‰çš„ä¸»ä»æ¶æ„è®¾è®¡
```

### 3.2 å›æ»šå†³ç­–é€»è¾‘


**ğŸ”¸ è‡ªåŠ¨å›æ»šæ¡ä»¶**ï¼š
```python
def should_rollback_to_primary():
    conditions = [
        check_primary_stable_time() >= 300,      # ä¸»åº“ç¨³å®šè¿è¡Œ5åˆ†é’Ÿ
        check_primary_performance() > 0.9,       # ä¸»åº“æ€§èƒ½æ¢å¤åˆ°90%ä»¥ä¸Š
        check_data_sync_complete(),              # æ•°æ®å·²å®Œå…¨åŒæ­¥
        check_no_active_transactions(),          # å½“å‰æ²¡æœ‰é‡è¦äº‹åŠ¡
        is_low_traffic_period()                  # å½“å‰æ˜¯ä½æµé‡æ—¶æ®µ
    ]
    
    # æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ‰å›æ»š
    return all(conditions)
```

**ğŸ”¸ æ‰‹åŠ¨å›æ»šè¯„ä¼°**ï¼š
```
ä¸šåŠ¡å½±å“è¯„ä¼°ï¼š
- å½“å‰ä¸šåŠ¡æµé‡å¤§å°
- å›æ»šè¿‡ç¨‹å¯èƒ½çš„ä¸­æ–­æ—¶é—´
- ç”¨æˆ·ä½“éªŒå½±å“ç¨‹åº¦

æŠ€æœ¯é£é™©è¯„ä¼°ï¼š
- æ•°æ®ä¸€è‡´æ€§çŠ¶å†µ
- ç³»ç»Ÿç¨³å®šæ€§è¯„åˆ†
- å›æ»šå¤±è´¥çš„åæœ
```

### 3.3 åŒå‘åˆ‡æ¢è®¾è®¡


**åŒå‘åˆ‡æ¢æ¶æ„**ï¼š
```
æ­£å¸¸çŠ¶æ€ï¼š
åº”ç”¨ â†’ ä¸»åº“ï¼ˆè¯»å†™ï¼‰ + ä»åº“ï¼ˆåªè¯»ï¼‰

æ•…éšœåˆ‡æ¢ï¼š
åº”ç”¨ â†’ ä»åº“ï¼ˆè¯»å†™ï¼‰ + ä¸»åº“ï¼ˆæ•…éšœï¼‰

æ•…éšœæ¢å¤ï¼š
åº”ç”¨ â†’ ä¸»åº“ï¼ˆè¯»å†™ï¼‰ + ä»åº“ï¼ˆåªè¯»ï¼‰  // å›æ»šå®Œæˆ
```

**åŒå‘åˆ‡æ¢å®ç°**ï¼š
```java
public class BidirectionalFailover {
    private DatabaseNode primary;
    private DatabaseNode secondary;
    private DatabaseNode current;  // å½“å‰æ´»è·ƒèŠ‚ç‚¹
    
    // åˆ‡æ¢åˆ°å¤‡åº“
    public void failoverToSecondary() {
        if (validateSecondaryReady()) {
            current = secondary;
            updateApplicationConfig();
            logSwitchEvent("Failover to secondary");
        }
    }
    
    // å›æ»šåˆ°ä¸»åº“
    public void rollbackToPrimary() {
        if (validatePrimaryRecovered() && isRollbackSafe()) {
            current = primary;
            updateApplicationConfig();
            logSwitchEvent("Rollback to primary");
        }
    }
}
```

### 3.4 å›æ»šæ—¶é—´çª—å£ç­–ç•¥


**æ—¶é—´çª—å£é€‰æ‹©**ï¼š
```
ä¸šåŠ¡ä½å³°æœŸå›æ»šï¼š
- å‡Œæ™¨2-6ç‚¹ï¼šç”¨æˆ·æ´»è·ƒåº¦æœ€ä½
- å‘¨æœ«æ—¶æ®µï¼šä¸šåŠ¡æµé‡è¾ƒå°‘
- èŠ‚å‡æ—¥ï¼šé¿å¼€ä¸šåŠ¡é«˜å³°

å³æ—¶å›æ»šåœºæ™¯ï¼š
- å¤‡åº“æ€§èƒ½ä¸¥é‡ä¸è¶³
- å¤‡åº“å‡ºç°æ•…éšœ
- æ•°æ®ä¸€è‡´æ€§é—®é¢˜
```

### 3.5 å›æ»šåŸå­æ€§ä¿è¯


**åŸå­æ€§æ“ä½œè®¾è®¡**ï¼š
```sql
-- å›æ»šæ“ä½œçš„äº‹åŠ¡åŒ–å¤„ç†
BEGIN;

-- 1. åœæ­¢æ–°è¿æ¥
UPDATE connection_pool SET accept_new = false;

-- 2. ç­‰å¾…å½“å‰äº‹åŠ¡å®Œæˆ
SELECT wait_for_active_transactions();

-- 3. åˆ‡æ¢é…ç½®
UPDATE database_config SET active_node = 'primary';

-- 4. é‡å¯è¿æ¥æ± 
UPDATE connection_pool SET target_node = 'primary', accept_new = true;

COMMIT;
```

---

## 4. âœ… æ•°æ®ä¸€è‡´æ€§ä¿éšœæŠ€æœ¯


### 4.1 æ•°æ®ä¸€è‡´æ€§çš„é‡è¦æ€§


**ä¸€è‡´æ€§æ¦‚å¿µ**ï¼šç¡®ä¿ä¸»åº“å’Œä»åº“çš„æ•°æ®å®Œå…¨ç›¸åŒï¼Œæ²¡æœ‰ä¸¢å¤±æˆ–é”™è¯¯çš„æ•°æ®ã€‚

**ä¸€è‡´æ€§é—®é¢˜çš„å±å®³**ï¼š
```
æ•°æ®ä¸¢å¤±ï¼šç”¨æˆ·çš„è®¢å•ã€è´¦æˆ·ä¿¡æ¯å¯èƒ½ä¸¢å¤±
æ•°æ®é”™è¯¯ï¼šæŸ¥è¯¢ç»“æœä¸å‡†ç¡®ï¼Œå½±å“ä¸šåŠ¡å†³ç­–
ä¸šåŠ¡æ··ä¹±ï¼šåŒä¸€æ•°æ®åœ¨ä¸åŒåº“ä¸­ä¸ä¸€è‡´ï¼Œå¯¼è‡´ä¸šåŠ¡é€»è¾‘é”™è¯¯
```

### 4.2 ä¸»ä»æ•°æ®å¯¹æ¯”æŠ€æœ¯


**ğŸ”¸ å®æ—¶å¯¹æ¯”æœºåˆ¶**ï¼š
```python
class DataConsistencyChecker:
    def compare_tables(self, primary_db, secondary_db, table_name):
        # è·å–ä¸¤ä¸ªåº“ä¸­è¡¨çš„è¡Œæ•°
        primary_count = self.get_row_count(primary_db, table_name)
        secondary_count = self.get_row_count(secondary_db, table_name)
        
        if primary_count != secondary_count:
            return False, f"è¡Œæ•°ä¸ä¸€è‡´: ä¸»åº“{primary_count}, ä»åº“{secondary_count}"
        
        # ä½¿ç”¨æ ¡éªŒå’Œå¯¹æ¯”æ•°æ®å†…å®¹
        primary_checksum = self.calculate_checksum(primary_db, table_name)
        secondary_checksum = self.calculate_checksum(secondary_db, table_name)
        
        if primary_checksum != secondary_checksum:
            return False, "æ•°æ®å†…å®¹ä¸ä¸€è‡´"
            
        return True, "æ•°æ®ä¸€è‡´"
```

**ğŸ”¸ æ ¡éªŒå’ŒéªŒè¯**ï¼š
```sql
-- è®¡ç®—è¡¨çš„æ•°æ®æ ¡éªŒå’Œ
SELECT 
    TABLE_NAME,
    CHECKSUM TABLE table_name,
    COUNT(*) as row_count
FROM information_schema.tables 
WHERE table_schema = 'your_database';
```

### 4.3 ä¸€è‡´æ€§ç›‘æ§ç³»ç»Ÿ


**ç›‘æ§æ¶æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸»æ•°æ®åº“   â”‚â”€â”€â”€â”€â”‚  ä¸€è‡´æ€§ç›‘æ§å™¨    â”‚â”€â”€â”€â”€â”‚   ä»æ•°æ®åº“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   å‘Šè­¦ç³»ç»Ÿ   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç›‘æ§æŒ‡æ ‡é…ç½®**ï¼š
```yaml
consistency_monitoring:
  check_interval: 60s          # æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
  
  checks:
    row_count_diff:
      threshold: 0             # è¡Œæ•°å·®å¼‚ä¸èƒ½è¶…è¿‡0
      action: alert
      
    replication_lag:
      threshold: 5s            # å¤åˆ¶å»¶è¿Ÿä¸èƒ½è¶…è¿‡5ç§’
      action: alert_and_log
      
    data_checksum:
      interval: 300s           # æ¯5åˆ†é’Ÿåšä¸€æ¬¡å®Œæ•´æ ¡éªŒ
      action: detailed_report
```

### 4.4 ä¸ä¸€è‡´æ•°æ®è‡ªåŠ¨ä¿®å¤


**ä¿®å¤ç­–ç•¥**ï¼š
```python
class AutoRepair:
    def repair_inconsistent_data(self, primary_db, secondary_db):
        # 1. è¯†åˆ«ä¸ä¸€è‡´çš„è¡¨
        inconsistent_tables = self.find_inconsistent_tables()
        
        for table in inconsistent_tables:
            # 2. ç¡®å®šä¿®å¤æ–¹å‘ï¼ˆé€šå¸¸ä»¥ä¸»åº“ä¸ºå‡†ï¼‰
            repair_plan = self.create_repair_plan(table)
            
            # 3. æ‰§è¡Œä¿®å¤æ“ä½œ
            if repair_plan.is_safe():
                self.execute_repair(repair_plan)
                self.log_repair_action(table, repair_plan)
            else:
                # é£é™©å¤ªå¤§ï¼Œéœ€è¦äººå·¥å¹²é¢„
                self.alert_manual_intervention(table)
```

**ä¿®å¤æ–¹æ³•**ï¼š
```sql
-- ç¤ºä¾‹ï¼šä¿®å¤ä»åº“ç¼ºå¤±çš„æ•°æ®
INSERT INTO secondary_db.orders 
SELECT * FROM primary_db.orders 
WHERE id NOT IN (SELECT id FROM secondary_db.orders);

-- ç¤ºä¾‹ï¼šä¿®å¤ä»åº“å¤šä½™çš„æ•°æ®  
DELETE FROM secondary_db.orders 
WHERE id NOT IN (SELECT id FROM primary_db.orders);
```

---

## 5. ğŸ‘» ä¸šåŠ¡æ— æ„ŸçŸ¥åˆ‡æ¢å®ç°


### 5.1 ä»€ä¹ˆæ˜¯ä¸šåŠ¡æ— æ„ŸçŸ¥


**æ— æ„ŸçŸ¥æ¦‚å¿µ**ï¼šç”¨æˆ·åœ¨ä½¿ç”¨ç³»ç»Ÿæ—¶ï¼Œå®Œå…¨æ„Ÿè§‰ä¸åˆ°åå°æ•°æ®åº“å‘ç”Ÿäº†åˆ‡æ¢ï¼Œå°±åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿä¸€æ ·ã€‚

**æ— æ„ŸçŸ¥çš„å…³é”®è¦ç´ **ï¼š
```
é›¶ä¸­æ–­ï¼šåˆ‡æ¢è¿‡ç¨‹ä¸­ç”¨æˆ·æ“ä½œä¸å—å½±å“
é›¶æ„ŸçŸ¥ï¼šç”¨æˆ·ç•Œé¢æ²¡æœ‰ä»»ä½•å¼‚å¸¸æç¤º
é›¶ä¸¢å¤±ï¼šç”¨æˆ·çš„æ“ä½œå’Œæ•°æ®å®Œå…¨ä¿ç•™
å¿«é€Ÿæ¢å¤ï¼šåˆ‡æ¢æ—¶é—´æ§åˆ¶åœ¨ç§’çº§
```

### 5.2 è¿æ¥ä¿æŒæœºåˆ¶


**è¿æ¥ä¿æŒåŸç†**ï¼š
```
ä¼ ç»Ÿåˆ‡æ¢ï¼š
ç”¨æˆ·è¿æ¥ â†’ æ•°æ®åº“Aï¼ˆæ–­å¼€ï¼‰â†’ é‡æ–°è¿æ¥æ•°æ®åº“B

æ— æ„ŸçŸ¥åˆ‡æ¢ï¼š
ç”¨æˆ·è¿æ¥ â†’ è¿æ¥ä»£ç† â†’ æ•°æ®åº“A
                â†“
ç”¨æˆ·è¿æ¥ â†’ è¿æ¥ä»£ç† â†’ æ•°æ®åº“Bï¼ˆé€æ˜åˆ‡æ¢ï¼‰
```

**è¿æ¥ä»£ç†å®ç°**ï¼š
```java
public class ConnectionProxy {
    private Connection activeConnection;
    private DataSource primaryDS;
    private DataSource secondaryDS;
    private boolean usePrimary = true;
    
    // é€æ˜çš„æ•°æ®åº“æ“ä½œ
    public ResultSet executeQuery(String sql) {
        try {
            return getActiveConnection().executeQuery(sql);
        } catch (SQLException e) {
            // æ£€æµ‹åˆ°è¿æ¥é—®é¢˜ï¼Œå°è¯•åˆ‡æ¢
            if (shouldFailover(e)) {
                switchDataSource();
                return getActiveConnection().executeQuery(sql);
            }
            throw e;
        }
    }
    
    private void switchDataSource() {
        usePrimary = !usePrimary;
        // é‡æ–°å»ºç«‹è¿æ¥ï¼Œä½†å¯¹ä¸Šå±‚åº”ç”¨é€æ˜
        activeConnection = getActiveConnection();
    }
}
```

### 5.3 äº‹åŠ¡å®Œæ•´æ€§ä¿è¯


**äº‹åŠ¡å¤„ç†ç­–ç•¥**ï¼š
```
åœºæ™¯1ï¼šäº‹åŠ¡è¿›è¡Œä¸­å‘ç”Ÿåˆ‡æ¢
- ç­‰å¾…å½“å‰äº‹åŠ¡å®Œæˆåå†åˆ‡æ¢
- æˆ–è€…å°†äº‹åŠ¡çŠ¶æ€è¿ç§»åˆ°æ–°æ•°æ®åº“

åœºæ™¯2ï¼šé•¿äº‹åŠ¡å¤„ç†
- è®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´
- å°†é•¿äº‹åŠ¡æ‹†åˆ†ä¸ºçŸ­äº‹åŠ¡
- ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§
```

**äº‹åŠ¡çŠ¶æ€ä¿æŒ**ï¼š
```java
public class TransactionManager {
    private Map<String, TransactionState> activeTransactions;
    
    public void handleFailover() {
        // 1. æš‚åœæ–°äº‹åŠ¡
        pauseNewTransactions();
        
        // 2. ç­‰å¾…æ´»è·ƒäº‹åŠ¡å®Œæˆ
        waitForActiveTransactions();
        
        // 3. æ‰§è¡Œæ•°æ®åº“åˆ‡æ¢
        performDatabaseSwitch();
        
        // 4. æ¢å¤äº‹åŠ¡å¤„ç†
        resumeTransactions();
    }
    
    private void waitForActiveTransactions() {
        while (!activeTransactions.isEmpty()) {
            Thread.sleep(100); // ç­‰å¾…100msåå†æ£€æŸ¥
        }
    }
}
```

### 5.4 åº”ç”¨å±‚ç¼“å­˜åˆ‡æ¢å¤„ç†


**ç¼“å­˜å¤„ç†ç­–ç•¥**ï¼š
```
æ•°æ®åº“åˆ‡æ¢æ—¶çš„ç¼“å­˜å¤„ç†ï¼š

æ–¹æ¡ˆ1ï¼šæ¸…ç©ºç¼“å­˜
ä¼˜ç‚¹ï¼šç®€å•å®‰å…¨
ç¼ºç‚¹ï¼šåˆ‡æ¢åæ€§èƒ½ä¸‹é™

æ–¹æ¡ˆ2ï¼šç¼“å­˜é¢„çƒ­
ä¼˜ç‚¹ï¼šæ€§èƒ½å½±å“å°
ç¼ºç‚¹ï¼šå®ç°å¤æ‚

æ–¹æ¡ˆ3ï¼šåˆ†çº§ç¼“å­˜
ä¼˜ç‚¹ï¼šå…¼é¡¾æ€§èƒ½å’Œå®‰å…¨
ç¼ºç‚¹ï¼šæ¶æ„å¤æ‚
```

**ç¼“å­˜åˆ‡æ¢å®ç°**ï¼š
```java
public class CacheManager {
    private RedisTemplate cache;
    
    public void handleDatabaseFailover() {
        // æ ‡è®°ç¼“å­˜ä¸ºä¸å¯ä¿¡çŠ¶æ€
        cache.opsForValue().set("db_failover_flag", "true", 300);
        
        // æ¸…ç†å¯èƒ½ä¸ä¸€è‡´çš„ç¼“å­˜
        clearSuspiciousCache();
        
        // é¢„çƒ­å…³é”®æ•°æ®åˆ°ç¼“å­˜
        preloadCriticalData();
    }
    
    private void clearSuspiciousCache() {
        // æ¸…ç†å¯èƒ½å› ä¸ºä¸»ä»å»¶è¿Ÿå¯¼è‡´ä¸ä¸€è‡´çš„ç¼“å­˜
        String[] patterns = {"user:*", "order:*", "product:*"};
        for (String pattern : patterns) {
            cache.delete(cache.keys(pattern));
        }
    }
}
```

### 5.5 å¾®æœåŠ¡æ¶æ„ä¸‹çš„çº§è”åˆ‡æ¢


**å¾®æœåŠ¡åˆ‡æ¢æ¶æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æœåŠ¡    â”‚    â”‚  è®¢å•æœåŠ¡    â”‚    â”‚  æ”¯ä»˜æœåŠ¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ•°æ®åº“  â”‚    â”‚  è®¢å•æ•°æ®åº“  â”‚    â”‚  æ”¯ä»˜æ•°æ®åº“  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çº§è”åˆ‡æ¢åè°ƒ**ï¼š
```java
public class MicroserviceFailoverCoordinator {
    private List<ServiceFailoverManager> services;
    
    public void coordinatedFailover() {
        // 1. æŒ‰ä¾èµ–å…³ç³»æ’åºæœåŠ¡
        List<ServiceFailoverManager> sortedServices = 
            sortByDependency(services);
        
        // 2. ä¾æ¬¡æ‰§è¡Œåˆ‡æ¢
        for (ServiceFailoverManager service : sortedServices) {
            service.executeFailover();
            
            // 3. éªŒè¯åˆ‡æ¢ç»“æœ
            if (!service.verifyFailover()) {
                // åˆ‡æ¢å¤±è´¥ï¼Œæ‰§è¡Œå›æ»š
                rollbackFailover(service);
                break;
            }
        }
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 æ•…éšœåˆ‡æ¢æŠ€æœ¯æ ¸å¿ƒè¦ç‚¹


**ğŸ”¸ åº”ç”¨å±‚åˆ‡æ¢ä¼˜åŠ¿**
```
âœ… å“åº”é€Ÿåº¦å¿«ï¼šåº”ç”¨ç›´æ¥æ£€æµ‹ï¼Œæ— éœ€ç­‰å¾…å¤–éƒ¨é€šçŸ¥
âœ… æ§åˆ¶çµæ´»ï¼šå¯æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹å®šåˆ¶åˆ‡æ¢ç­–ç•¥
âœ… å®ç°ç®€å•ï¼šä¸ä¾èµ–å¤æ‚çš„å¤–éƒ¨ç»„ä»¶
âœ… æˆæœ¬è¾ƒä½ï¼šä¸»è¦æ˜¯ä»£ç å±‚é¢çš„æ”¹åŠ¨
```

**ğŸ”¸ æ™ºèƒ½å†³ç­–å…³é”®å› ç´ **
```
å¤šç»´æ£€æµ‹ï¼šç½‘ç»œã€æœåŠ¡ã€æ•°æ®ä¸‰ä¸ªå±‚é¢ç»¼åˆåˆ¤æ–­
é˜ˆå€¼è®¾ç½®ï¼šè®¾ç½®åˆç†çš„å‘Šè­¦å’Œåˆ‡æ¢é˜ˆå€¼
è·¯ç”±ç­–ç•¥ï¼šè¯»å†™åˆ†ç¦»ã€è´Ÿè½½å‡è¡¡ç­‰æ™ºèƒ½è·¯ç”±
é£é™©è¯„ä¼°ï¼šè¯„ä¼°åˆ‡æ¢é£é™©ï¼Œé¿å…è¯¯åˆ‡æ¢
```

**ğŸ”¸ æ•°æ®ä¸€è‡´æ€§ä¿éšœ**
```
å®æ—¶ç›‘æ§ï¼šæŒç»­ç›‘æ§ä¸»ä»æ•°æ®ä¸€è‡´æ€§
è‡ªåŠ¨ä¿®å¤ï¼šå‘ç°ä¸ä¸€è‡´æ—¶è‡ªåŠ¨ä¿®å¤æ•°æ®
æ ¡éªŒæœºåˆ¶ï¼šä½¿ç”¨æ ¡éªŒå’Œç­‰æŠ€æœ¯éªŒè¯æ•°æ®å®Œæ•´æ€§
å‘Šè­¦ä½“ç³»ï¼šåŠæ—¶å‘ç°å’Œå¤„ç†ä¸€è‡´æ€§é—®é¢˜
```

### 6.2 å®æ–½å»ºè®®ä¸æœ€ä½³å®è·µ


**ğŸ”¹ æŠ€æœ¯é€‰å‹å»ºè®®**
```
å°å‹ç³»ç»Ÿï¼š
- ä½¿ç”¨ç®€å•çš„è¿æ¥æ± åˆ‡æ¢
- é…ç½®åŸºæœ¬çš„å¥åº·æ£€æŸ¥
- æ‰‹åŠ¨å›æ»šæœºåˆ¶

ä¸­å‹ç³»ç»Ÿï¼š
- å®ç°åº”ç”¨å±‚æ™ºèƒ½åˆ‡æ¢
- é…ç½®æœåŠ¡å‘ç°æœºåˆ¶
- è‡ªåŠ¨åŒ–å›æ»šç­–ç•¥

å¤§å‹ç³»ç»Ÿï¼š
- æ„å»ºå®Œæ•´çš„æ™ºèƒ½å†³ç­–ç³»ç»Ÿ
- å®ç°å¾®æœåŠ¡çº§è”åˆ‡æ¢
- ä¸šåŠ¡æ— æ„ŸçŸ¥åˆ‡æ¢
```

**ğŸ”¹ é£é™©æ§åˆ¶è¦ç‚¹**
```
âš ï¸ é¿å…é¢‘ç¹åˆ‡æ¢ï¼šè®¾ç½®åˆ‡æ¢å†·å´æ—¶é—´
âš ï¸ é˜²æ­¢è„‘è£‚é—®é¢˜ï¼šç¡®ä¿åŒæ—¶åªæœ‰ä¸€ä¸ªä¸»åº“
âš ï¸ æ•°æ®å¤‡ä»½ï¼šåˆ‡æ¢å‰ç¡®ä¿æ•°æ®å·²å¤‡ä»½
âš ï¸ ç›‘æ§å‘Šè­¦ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
```
è¿æ¥é¢„çƒ­ï¼šæå‰å»ºç«‹æ•°æ®åº“è¿æ¥
ç¼“å­˜ç­–ç•¥ï¼šåˆç†ä½¿ç”¨ç¼“å­˜å‡å°‘æ•°æ®åº“å‹åŠ›
æ‰¹é‡æ“ä½œï¼šå‡å°‘ç½‘ç»œå¼€é”€
å¼‚æ­¥å¤„ç†ï¼šéå…³é”®æ“ä½œä½¿ç”¨å¼‚æ­¥æ–¹å¼
```

### 6.3 æ•…éšœåˆ‡æ¢æˆç†Ÿåº¦æ¨¡å‹


| æˆç†Ÿåº¦ç­‰çº§ | **ç‰¹å¾** | **æŠ€æœ¯è¦æ±‚** | **é€‚ç”¨åœºæ™¯** |
|-----------|---------|-------------|-------------|
| **Level 1** | `æ‰‹åŠ¨åˆ‡æ¢` | `åŸºç¡€ç›‘æ§+äººå·¥æ“ä½œ` | `å°å‹åº”ç”¨ï¼Œå®¹å¿ä¸­æ–­` |
| **Level 2** | `è‡ªåŠ¨åˆ‡æ¢` | `å¥åº·æ£€æŸ¥+è‡ªåŠ¨åˆ‡æ¢` | `ä¸­å‹åº”ç”¨ï¼Œå‡å°‘ä¸­æ–­` |
| **Level 3** | `æ™ºèƒ½åˆ‡æ¢` | `å¤šç»´æ£€æµ‹+æ™ºèƒ½å†³ç­–` | `å¤§å‹åº”ç”¨ï¼Œå¿«é€Ÿæ¢å¤` |
| **Level 4** | `æ— æ„Ÿåˆ‡æ¢` | `è¿æ¥ä¿æŒ+äº‹åŠ¡å®Œæ•´` | `å…³é”®åº”ç”¨ï¼Œé›¶ä¸­æ–­` |
| **Level 5** | `é¢„æµ‹åˆ‡æ¢` | `æœºå™¨å­¦ä¹ +é¢„æµ‹åˆ†æ` | `æ ¸å¿ƒåº”ç”¨ï¼Œé¢„é˜²æ•…éšœ` |

### 6.4 å®é™…åº”ç”¨åœºæ™¯


**ç”µå•†ç³»ç»Ÿ**ï¼š
- è®¢å•å¤„ç†ä¸èƒ½ä¸­æ–­ï¼Œéœ€è¦Level 4æ— æ„Ÿåˆ‡æ¢
- å•†å“æŸ¥è¯¢å¯ä»¥å®¹å¿çŸ­æš‚å»¶è¿Ÿï¼Œä½¿ç”¨Level 2è‡ªåŠ¨åˆ‡æ¢

**é‡‘èç³»ç»Ÿ**ï¼š
- äº¤æ˜“ç³»ç»Ÿéœ€è¦Level 5é¢„æµ‹åˆ‡æ¢
- æŠ¥è¡¨ç³»ç»Ÿå¯ä»¥ä½¿ç”¨Level 3æ™ºèƒ½åˆ‡æ¢

**å†…å®¹ç³»ç»Ÿ**ï¼š
- å†…å®¹å‘å¸ƒä½¿ç”¨Level 2è‡ªåŠ¨åˆ‡æ¢
- ç”¨æˆ·è¯„è®ºå¯ä»¥ä½¿ç”¨Level 1æ‰‹åŠ¨åˆ‡æ¢

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- åº”ç”¨å±‚åˆ‡æ¢å“åº”å¿«ï¼Œæ™ºèƒ½å†³ç­–ä¿å®‰å…¨
- æ•°æ®ä¸€è‡´æ€§æ˜¯æ ¹æœ¬ï¼Œä¸šåŠ¡æ— æ„ŸçŸ¥æ˜¯ç›®æ ‡  
- åˆ†çº§å®æ–½é™é£é™©ï¼Œç›‘æ§å‘Šè­¦è¦åˆ°ä½
- æŠ€æœ¯æœåŠ¡äºä¸šåŠ¡ï¼Œé€‰æ‹©åˆé€‚æœ€é‡è¦