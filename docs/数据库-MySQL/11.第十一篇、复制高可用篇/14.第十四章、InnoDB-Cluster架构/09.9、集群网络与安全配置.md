---
title: 9ã€é›†ç¾¤ç½‘ç»œä¸å®‰å…¨é…ç½®
---
## ğŸ“š ç›®å½•

1. [é›†ç¾¤ç½‘ç»œè§„åˆ’åŸºç¡€](#1-é›†ç¾¤ç½‘ç»œè§„åˆ’åŸºç¡€)
2. [SSLè¯ä¹¦é…ç½®è¯¦è§£](#2-SSLè¯ä¹¦é…ç½®è¯¦è§£)
3. [ç»„å¤åˆ¶SSLè®¾ç½®](#3-ç»„å¤åˆ¶SSLè®¾ç½®)
4. [MySQL Router SSLé…ç½®](#4-MySQL-Router-SSLé…ç½®)
5. [é˜²ç«å¢™ç«¯å£é…ç½®](#5-é˜²ç«å¢™ç«¯å£é…ç½®)
6. [ç½‘ç»œåˆ†åŒºå¤„ç†ç­–ç•¥](#6-ç½‘ç»œåˆ†åŒºå¤„ç†ç­–ç•¥)
7. [IPç™½åå•ä¸è®¤è¯é…ç½®](#7-IPç™½åå•ä¸è®¤è¯é…ç½®)
8. [å®‰å…¨ä¼ è¾“åè®®ä¼˜åŒ–](#8-å®‰å…¨ä¼ è¾“åè®®ä¼˜åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ é›†ç¾¤ç½‘ç»œè§„åˆ’åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯é›†ç¾¤ç½‘ç»œè§„åˆ’


**é€šä¿—ç†è§£**ï¼šé›†ç¾¤ç½‘ç»œè§„åˆ’å°±åƒç»™ä¸€ä¸ªå…¬å¸çš„å„ä¸ªéƒ¨é—¨è®¾è®¡é€šä¿¡æ–¹æ¡ˆï¼Œæ¯ä¸ªMySQLèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªéƒ¨é—¨ï¼Œéœ€è¦ç¡®ä¿å®ƒä»¬èƒ½å¤Ÿå®‰å…¨ã€ç¨³å®šåœ°äº’ç›¸é€šä¿¡ã€‚

```
é›†ç¾¤ç½‘ç»œæ¶æ„ç¤ºæ„å›¾ï¼š
                    åº”ç”¨å±‚
                      |
               MySQL Router (è·¯ç”±å™¨)
                   /  |  \
                  /   |   \
              Node1  Node2  Node3
             (ä¸»èŠ‚ç‚¹) (ä»èŠ‚ç‚¹) (ä»èŠ‚ç‚¹)
                  \   |   /
                   \  |  /
                 å†…éƒ¨é€šä¿¡ç½‘ç»œ
```

### 1.2 ç½‘ç»œè§„åˆ’çš„æ ¸å¿ƒè¦ç´ 


**ğŸ”¸ ç½‘ç»œå±‚æ¬¡è®¾è®¡**
```
å‰ç«¯ç½‘ç»œå±‚ï¼š
â€¢ ä½œç”¨ï¼šåº”ç”¨ç¨‹åºè¿æ¥MySQL Router
â€¢ ç‰¹ç‚¹ï¼šé¢å‘å¤–éƒ¨ï¼Œéœ€è¦é«˜å¯ç”¨æ€§
â€¢ å®‰å…¨è¦æ±‚ï¼šSSLåŠ å¯†ï¼Œè®¿é—®æ§åˆ¶

åç«¯ç½‘ç»œå±‚ï¼š
â€¢ ä½œç”¨ï¼šé›†ç¾¤èŠ‚ç‚¹é—´çš„å†…éƒ¨é€šä¿¡
â€¢ ç‰¹ç‚¹ï¼šé«˜é¢‘ç‡æ•°æ®åŒæ­¥
â€¢ å®‰å…¨è¦æ±‚ï¼šç»„å¤åˆ¶åŠ å¯†ï¼ŒèŠ‚ç‚¹è®¤è¯

ç®¡ç†ç½‘ç»œå±‚ï¼š
â€¢ ä½œç”¨ï¼šé›†ç¾¤ç®¡ç†å’Œç›‘æ§
â€¢ ç‰¹ç‚¹ï¼šç®¡ç†å‘˜ä¸“ç”¨é€šé“
â€¢ å®‰å…¨è¦æ±‚ï¼šVPNè®¿é—®ï¼Œæƒé™æ§åˆ¶
```

**ğŸ’¡ ç½‘ç»œè§„åˆ’æœ€ä½³å®è·µ**
```markdown
> ğŸ”¥ **æ ¸å¿ƒåŸåˆ™**ï¼š
> - **ç½‘ç»œéš”ç¦»**ï¼šç”Ÿäº§ã€æµ‹è¯•ã€ç®¡ç†ç½‘ç»œåˆ†ç¦»
> - **å†—ä½™è®¾è®¡**ï¼šé¿å…å•ç‚¹ç½‘ç»œæ•…éšœ
> - **å®‰å…¨ä¼˜å…ˆ**ï¼šæ‰€æœ‰é€šä¿¡éƒ½è¦åŠ å¯†
> - **æ€§èƒ½è€ƒè™‘**ï¼šä½å»¶è¿Ÿã€é«˜å¸¦å®½ä¿éšœ
```

### 1.3 IPåœ°å€è§„åˆ’ç¤ºä¾‹


**å®é™…åœºæ™¯è§„åˆ’**ï¼š
```
ç”Ÿäº§ç¯å¢ƒç½‘ç»œè§„åˆ’ï¼š

å‰ç«¯ç½‘ç»œï¼ˆåº”ç”¨è®¿é—®ï¼‰ï¼š
â€¢ ç½‘æ®µï¼š192.168.100.0/24
â€¢ Router1ï¼š192.168.100.10
â€¢ Router2ï¼š192.168.100.11 (é«˜å¯ç”¨)

åç«¯ç½‘ç»œï¼ˆé›†ç¾¤é€šä¿¡ï¼‰ï¼š
â€¢ ç½‘æ®µï¼š10.0.1.0/24  
â€¢ Node1ï¼š10.0.1.101 (Primary)
â€¢ Node2ï¼š10.0.1.102 (Secondary)
â€¢ Node3ï¼š10.0.1.103 (Secondary)

ç®¡ç†ç½‘ç»œï¼š
â€¢ ç½‘æ®µï¼š172.16.1.0/24
â€¢ ç®¡ç†æœåŠ¡å™¨ï¼š172.16.1.10
â€¢ ç›‘æ§æœåŠ¡å™¨ï¼š172.16.1.20
```

---

## 2. ğŸ” SSLè¯ä¹¦é…ç½®è¯¦è§£


### 2.1 SSLè¯ä¹¦çš„ä½œç”¨åŸç†


**é€šä¿—è§£é‡Š**ï¼šSSLè¯ä¹¦å°±åƒèº«ä»½è¯ï¼Œç”¨æ¥è¯æ˜"æˆ‘æ˜¯è°"ï¼ŒåŒæ—¶åƒå¯†ç æœ¬ï¼Œç”¨æ¥åŠ å¯†é€šä¿¡å†…å®¹ã€‚åœ¨MySQLé›†ç¾¤ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦æœ‰è¯ä¹¦æ¥è¯æ˜èº«ä»½ï¼Œç¡®ä¿åªæœ‰åˆæ³•çš„èŠ‚ç‚¹æ‰èƒ½åŠ å…¥é›†ç¾¤ã€‚

```
SSLé€šä¿¡æµç¨‹ï¼š
å®¢æˆ·ç«¯                          æœåŠ¡ç«¯
  |                              |
  |--[1]è¯·æ±‚è¿æ¥----------------->|
  |                              |
  |<--[2]è¿”å›æœåŠ¡å™¨è¯ä¹¦----------|
  |                              |
  |--[3]éªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆå¯†é’¥------>|
  |                              |
  |<--[4]ç¡®è®¤ï¼Œå»ºç«‹åŠ å¯†é€šé“------|
  |                              |
  |====åŠ å¯†æ•°æ®ä¼ è¾“============|
```

### 2.2 ç”ŸæˆSSLè¯ä¹¦


**æ­¥éª¤è¯¦è§£**ï¼š

**ğŸ”§ åˆ›å»ºCAæ ¹è¯ä¹¦**
```bash
# 1. ç”ŸæˆCAç§é’¥
openssl genrsa -out ca-key.pem 4096

# 2. ç”ŸæˆCAæ ¹è¯ä¹¦
openssl req -new -x509 -days 3650 -key ca-key.pem -out ca.pem -subj "/CN=MySQL_CA"

# è§£é‡Šï¼š
# -days 3650ï¼šè¯ä¹¦æœ‰æ•ˆæœŸ10å¹´
# -subjï¼šè¯ä¹¦ä¸»é¢˜ï¼ŒCNæ˜¯é€šç”¨åç§°
```

**ğŸ”§ ä¸ºæ¯ä¸ªMySQLèŠ‚ç‚¹ç”Ÿæˆè¯ä¹¦**
```bash
# ä¸ºèŠ‚ç‚¹1ç”Ÿæˆè¯ä¹¦
# 1. ç”Ÿæˆç§é’¥
openssl genrsa -out server-key.pem 4096

# 2. ç”Ÿæˆè¯ä¹¦è¯·æ±‚
openssl req -new -key server-key.pem -out server-req.pem -subj "/CN=mysql-node1"

# 3. ç”¨CAç­¾å‘è¯ä¹¦
openssl x509 -req -days 3650 -in server-req.pem -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem

# 4. éªŒè¯è¯ä¹¦
openssl verify -CAfile ca.pem server-cert.pem
```

### 2.3 è¯ä¹¦ç›®å½•ç»“æ„


**æ ‡å‡†ç›®å½•å¸ƒå±€**ï¼š
```
/etc/mysql/ssl/
â”œâ”€â”€ ca.pem              # CAæ ¹è¯ä¹¦
â”œâ”€â”€ ca-key.pem          # CAç§é’¥
â”œâ”€â”€ server-cert.pem     # æœåŠ¡å™¨è¯ä¹¦
â”œâ”€â”€ server-key.pem      # æœåŠ¡å™¨ç§é’¥
â”œâ”€â”€ client-cert.pem     # å®¢æˆ·ç«¯è¯ä¹¦
â””â”€â”€ client-key.pem      # å®¢æˆ·ç«¯ç§é’¥

æƒé™è®¾ç½®ï¼š
chmod 644 *.pem         # è¯ä¹¦æ–‡ä»¶å¯è¯»
chmod 600 *-key.pem     # ç§é’¥æ–‡ä»¶ä»…æ‰€æœ‰è€…å¯è¯»
chown mysql:mysql *.pem # æ–‡ä»¶æ‰€æœ‰è€…è®¾ä¸ºmysql
```

**ğŸ”¸ è¯ä¹¦æƒé™é…ç½®è¦ç‚¹**
```markdown
> âš ï¸ **å®‰å…¨æé†’**ï¼š
> - ç§é’¥æ–‡ä»¶æƒé™å¿…é¡»æ˜¯600ï¼ˆä»…æ‰€æœ‰è€…å¯è¯»å†™ï¼‰
> - è¯ä¹¦æ–‡ä»¶æƒé™è®¾ä¸º644ï¼ˆæ‰€æœ‰è€…å¯è¯»å†™ï¼Œå…¶ä»–ç”¨æˆ·åªè¯»ï¼‰
> - æ–‡ä»¶æ‰€æœ‰è€…å¿…é¡»æ˜¯mysqlç”¨æˆ·
> - å®šæœŸå¤‡ä»½è¯ä¹¦æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®
```

---

## 3. ğŸ”— ç»„å¤åˆ¶SSLè®¾ç½®


### 3.1 ç»„å¤åˆ¶SSLçš„å¿…è¦æ€§


**ä¸ºä»€ä¹ˆéœ€è¦SSL**ï¼š
ç»„å¤åˆ¶æ˜¯MySQLé›†ç¾¤èŠ‚ç‚¹é—´è¿›è¡Œæ•°æ®åŒæ­¥çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°±åƒå‡ ä¸ªäººåœ¨å¼€ä¼šè®¨è®ºé‡è¦äº‹æƒ…ï¼Œéœ€è¦ç¡®ä¿ï¼š
- **èº«ä»½éªŒè¯**ï¼šç¡®è®¤å‚ä¸è€…éƒ½æ˜¯åˆæ³•æˆå‘˜
- **æ•°æ®åŠ å¯†**ï¼šé˜²æ­¢æœºå¯†ä¿¡æ¯è¢«çªƒå¬
- **å®Œæ•´æ€§æ ¡éªŒ**ï¼šç¡®ä¿ä¿¡æ¯ä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹

### 3.2 é…ç½®ç»„å¤åˆ¶SSL


**æ ¸å¿ƒé…ç½®å‚æ•°**ï¼š
```ini
# /etc/mysql/mysql.conf.d/mysqld.cnf

[mysqld]
# å¯ç”¨ç»„å¤åˆ¶SSL
group_replication_ssl_mode = REQUIRED

# æŒ‡å®šSSLè¯ä¹¦æ–‡ä»¶
ssl_ca = /etc/mysql/ssl/ca.pem
ssl_cert = /etc/mysql/ssl/server-cert.pem  
ssl_key = /etc/mysql/ssl/server-key.pem

# ç»„å¤åˆ¶ä¸“ç”¨SSLè®¾ç½®
group_replication_recovery_use_ssl = ON
group_replication_recovery_ssl_ca = /etc/mysql/ssl/ca.pem
group_replication_recovery_ssl_cert = /etc/mysql/ssl/server-cert.pem
group_replication_recovery_ssl_key = /etc/mysql/ssl/server-key.pem

# éªŒè¯è¯ä¹¦ä¸»é¢˜åç§°
group_replication_recovery_ssl_verify_server_cert = ON
```

**ğŸ“‹ SSLæ¨¡å¼è¯´æ˜**
| SSLæ¨¡å¼ | **è¯´æ˜** | **é€‚ç”¨åœºæ™¯** |
|---------|----------|-------------|
| `DISABLED` | ä¸ä½¿ç”¨SSL | ä»…å†…ç½‘æµ‹è¯•ç¯å¢ƒ |
| `PREFERRED` | ä¼˜å…ˆä½¿ç”¨SSLï¼Œå¯é™çº§ | å…¼å®¹æ€§è¦æ±‚é«˜çš„ç¯å¢ƒ |
| `REQUIRED` | å¼ºåˆ¶ä½¿ç”¨SSL | **ç”Ÿäº§ç¯å¢ƒæ¨è** |
| `VERIFY_CA` | éªŒè¯CAè¯ä¹¦ | é«˜å®‰å…¨è¦æ±‚ |
| `VERIFY_IDENTITY` | éªŒè¯è¯ä¹¦èº«ä»½ | æœ€é«˜å®‰å…¨çº§åˆ« |

### 3.3 éªŒè¯SSLé…ç½®


**æ£€æŸ¥SSLçŠ¶æ€**ï¼š
```sql
-- æŸ¥çœ‹SSLé…ç½®çŠ¶æ€
SHOW VARIABLES LIKE 'have_ssl';
SHOW VARIABLES LIKE '%ssl%';

-- æŸ¥çœ‹ç»„å¤åˆ¶SSLçŠ¶æ€  
SELECT * FROM performance_schema.replication_group_members;

-- æ£€æŸ¥SSLè¿æ¥
SHOW STATUS LIKE 'Ssl_cipher';
```

**ğŸ”§ æ•…éšœæ’æŸ¥å‘½ä»¤**
```bash
# æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæ€§
openssl x509 -in /etc/mysql/ssl/server-cert.pem -text -noout

# æµ‹è¯•SSLè¿æ¥
mysql --ssl-ca=/etc/mysql/ssl/ca.pem \
      --ssl-cert=/etc/mysql/ssl/client-cert.pem \
      --ssl-key=/etc/mysql/ssl/client-key.pem \
      --ssl-mode=REQUIRED \
      -h 10.0.1.101 -u root -p

# æŸ¥çœ‹MySQLé”™è¯¯æ—¥å¿—
tail -f /var/log/mysql/error.log
```

---

## 4. ğŸ›¡ï¸ MySQL Router SSLé…ç½®


### 4.1 Router SSLé…ç½®åŸç†


**é€šä¿—ç†è§£**ï¼šMySQL Routerå°±åƒä¸€ä¸ªæ™ºèƒ½çš„"é—¨å«"ï¼Œå®ƒéœ€è¦ï¼š
- **å¯¹å¤–**ï¼šå‘åº”ç”¨ç¨‹åºæä¾›å®‰å…¨çš„è¿æ¥å…¥å£
- **å¯¹å†…**ï¼šä¸åç«¯MySQLèŠ‚ç‚¹å»ºç«‹å®‰å…¨è¿æ¥
- **ä¸­è½¬**ï¼šå®‰å…¨åœ°è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚åˆ°åˆé€‚çš„æ•°æ®åº“èŠ‚ç‚¹

```
åº”ç”¨ç¨‹åº â†--SSL--> Router â†--SSL--> MySQLèŠ‚ç‚¹
    |                 |               |
  å®¢æˆ·ç«¯è¯ä¹¦        Routerè¯ä¹¦      æœåŠ¡å™¨è¯ä¹¦
```

### 4.2 Routeré…ç½®æ–‡ä»¶


**å®Œæ•´é…ç½®ç¤ºä¾‹**ï¼š
```ini
# /etc/mysqlrouter/mysqlrouter.conf

[DEFAULT]
# åŸºç¡€é…ç½®
user = mysqlrouter
logging_folder = /var/log/mysqlrouter
runtime_folder = /var/run/mysqlrouter
config_folder = /etc/mysqlrouter

# SSLè¯ä¹¦é…ç½®
ssl_cert = /etc/mysqlrouter/ssl/router-cert.pem
ssl_key = /etc/mysqlrouter/ssl/router-key.pem
ssl_ca = /etc/mysqlrouter/ssl/ca.pem
ssl_mode = REQUIRED

[metadata_cache:myCluster]
# é›†ç¾¤å…ƒæ•°æ®é…ç½®
router_id = 1
user = mysql_router1_user
metadata_cluster = myCluster
ttl = 0.5
ssl_mode = REQUIRED
ssl_ca = /etc/mysqlrouter/ssl/ca.pem

[routing:myCluster_rw]
# è¯»å†™è¿æ¥è·¯ç”±
bind_address = 0.0.0.0
bind_port = 6446
destinations = metadata-cache://myCluster/default?role=PRIMARY
routing_strategy = first-available
protocol = classic

# SSLé…ç½®
ssl_mode = REQUIRED
ssl_cert = /etc/mysqlrouter/ssl/router-cert.pem
ssl_key = /etc/mysqlrouter/ssl/router-key.pem
ssl_ca = /etc/mysqlrouter/ssl/ca.pem

[routing:myCluster_ro] 
# åªè¯»è¿æ¥è·¯ç”±
bind_address = 0.0.0.0
bind_port = 6447
destinations = metadata-cache://myCluster/default?role=SECONDARY
routing_strategy = round-robin
protocol = classic

# SSLé…ç½®
ssl_mode = REQUIRED
ssl_cert = /etc/mysqlrouter/ssl/router-cert.pem
ssl_key = /etc/mysqlrouter/ssl/router-key.pem
ssl_ca = /etc/mysqlrouter/ssl/ca.pem
```

### 4.3 Routerå¯åŠ¨ä¸éªŒè¯


**å¯åŠ¨Router**ï¼š
```bash
# å¯åŠ¨MySQL Router
systemctl start mysqlrouter
systemctl enable mysqlrouter

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status mysqlrouter

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/mysqlrouter/mysqlrouter.log
```

**ğŸ”§ è¿æ¥éªŒè¯**
```bash
# æµ‹è¯•è¯»å†™è¿æ¥ï¼ˆç«¯å£6446ï¼‰
mysql --ssl-mode=REQUIRED \
      --ssl-ca=/etc/mysql/ssl/ca.pem \
      -h 192.168.100.10 -P 6446 -u app_user -p

# æµ‹è¯•åªè¯»è¿æ¥ï¼ˆç«¯å£6447ï¼‰  
mysql --ssl-mode=REQUIRED \
      --ssl-ca=/etc/mysql/ssl/ca.pem \
      -h 192.168.100.10 -P 6447 -u app_user -p
```

---

## 5. ğŸ”¥ é˜²ç«å¢™ç«¯å£é…ç½®


### 5.1 MySQLé›†ç¾¤ç«¯å£è§„åˆ’


**ç«¯å£ç”¨é€”è¯´æ˜**ï¼š
```
MySQLé›†ç¾¤å…³é”®ç«¯å£ï¼š

3306ï¼š
â€¢ ç”¨é€”ï¼šMySQLæ ‡å‡†è¿æ¥ç«¯å£
â€¢ æµé‡ï¼šåº”ç”¨ç¨‹åºæ•°æ®åº“è¿æ¥
â€¢ å®‰å…¨ï¼šéœ€è¦ä¸¥æ ¼è®¿é—®æ§åˆ¶

33061ï¼š
â€¢ ç”¨é€”ï¼šç»„å¤åˆ¶é€šä¿¡ç«¯å£  
â€¢ æµé‡ï¼šèŠ‚ç‚¹é—´æ•°æ®åŒæ­¥
â€¢ å®‰å…¨ï¼šä»…é›†ç¾¤å†…éƒ¨è®¿é—®

6446ï¼š
â€¢ ç”¨é€”ï¼šRouterè¯»å†™è¿æ¥
â€¢ æµé‡ï¼šåº”ç”¨ç¨‹åºå†™æ“ä½œ
â€¢ å®‰å…¨ï¼šè´Ÿè½½å‡è¡¡è®¿é—®

6447ï¼š
â€¢ ç”¨é€”ï¼šRouteråªè¯»è¿æ¥
â€¢ æµé‡ï¼šåº”ç”¨ç¨‹åºè¯»æ“ä½œ  
â€¢ å®‰å…¨ï¼šè¯»å–è´Ÿè½½åˆ†å‘

8443ï¼š
â€¢ ç”¨é€”ï¼šMySQL Shellç®¡ç†ç«¯å£
â€¢ æµé‡ï¼šé›†ç¾¤ç®¡ç†æ“ä½œ
â€¢ å®‰å…¨ï¼šç®¡ç†å‘˜ä¸“ç”¨
```

### 5.2 é˜²ç«å¢™é…ç½®å®ä¾‹


**Ubuntu/CentOSé˜²ç«å¢™é…ç½®**ï¼š
```bash
# CentOS/RHEL (firewalld)
# å¼€æ”¾MySQLåŸºç¡€ç«¯å£
firewall-cmd --permanent --add-port=3306/tcp
firewall-cmd --permanent --add-port=33061/tcp

# å¼€æ”¾Routerç«¯å£
firewall-cmd --permanent --add-port=6446/tcp  
firewall-cmd --permanent --add-port=6447/tcp

# å¼€æ”¾ç®¡ç†ç«¯å£ï¼ˆé™åˆ¶æ¥æºIPï¼‰
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="172.16.1.0/24" port protocol="tcp" port="8443" accept'

# é‡æ–°åŠ è½½é…ç½®
firewall-cmd --reload
```

```bash
# Ubuntu (ufw)
# MySQLç«¯å£
ufw allow from 10.0.1.0/24 to any port 3306
ufw allow from 10.0.1.0/24 to any port 33061

# Routerç«¯å£  
ufw allow from 192.168.100.0/24 to any port 6446
ufw allow from 192.168.100.0/24 to any port 6447

# ç®¡ç†ç«¯å£
ufw allow from 172.16.1.0/24 to any port 8443

# å¯ç”¨é˜²ç«å¢™
ufw enable
```

### 5.3 ç«¯å£å®‰å…¨ç­–ç•¥


**ğŸ”¸ åˆ†å±‚å®‰å…¨ç­–ç•¥**
```markdown
> ğŸ’¡ **å®‰å…¨åˆ†å±‚åŸåˆ™**ï¼š
> 
> **åº”ç”¨å±‚å®‰å…¨**ï¼š
> - åªå¼€æ”¾å¿…è¦ç«¯å£ç»™åº”ç”¨æœåŠ¡å™¨
> - ä½¿ç”¨SSLåŠ å¯†æ‰€æœ‰è¿æ¥
> - å®æ–½è¿æ¥æ•°é™åˆ¶
> 
> **ç½‘ç»œå±‚å®‰å…¨**ï¼š
> - ä¸åŒç½‘ç»œæ®µä¹‹é—´è®¿é—®æ§åˆ¶
> - ç¦æ­¢å¤–ç½‘ç›´æ¥è®¿é—®æ•°æ®åº“ç«¯å£
> - ä½¿ç”¨VPNè¿›è¡Œç®¡ç†è®¿é—®
> 
> **ä¸»æœºå±‚å®‰å…¨**ï¼š
> - æœ€å°æƒé™åŸåˆ™
> - å®šæœŸå®‰å…¨è¡¥ä¸æ›´æ–°
> - å…¥ä¾µæ£€æµ‹ç³»ç»Ÿéƒ¨ç½²
```

**ç«¯å£ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# check_mysql_ports.sh - æ£€æŸ¥MySQLé›†ç¾¤ç«¯å£çŠ¶æ€

echo "=== MySQLé›†ç¾¤ç«¯å£æ£€æŸ¥ ==="

# æ£€æŸ¥MySQLç«¯å£
netstat -tlnp | grep :3306 && echo "âœ… MySQLç«¯å£ 3306 æ­£å¸¸" || echo "âŒ MySQLç«¯å£ 3306 å¼‚å¸¸"

# æ£€æŸ¥ç»„å¤åˆ¶ç«¯å£  
netstat -tlnp | grep :33061 && echo "âœ… ç»„å¤åˆ¶ç«¯å£ 33061 æ­£å¸¸" || echo "âŒ ç»„å¤åˆ¶ç«¯å£ 33061 å¼‚å¸¸"

# æ£€æŸ¥Routerç«¯å£
netstat -tlnp | grep :6446 && echo "âœ… Routerè¯»å†™ç«¯å£ 6446 æ­£å¸¸" || echo "âŒ Routerè¯»å†™ç«¯å£ 6446 å¼‚å¸¸"
netstat -tlnp | grep :6447 && echo "âœ… Routeråªè¯»ç«¯å£ 6447 æ­£å¸¸" || echo "âŒ Routeråªè¯»ç«¯å£ 6447 å¼‚å¸¸"

echo "=== ç«¯å£æ£€æŸ¥å®Œæˆ ==="
```

---

## 6. ğŸŒŠ ç½‘ç»œåˆ†åŒºå¤„ç†ç­–ç•¥


### 6.1 ä»€ä¹ˆæ˜¯ç½‘ç»œåˆ†åŒº


**é€šä¿—è§£é‡Š**ï¼šç½‘ç»œåˆ†åŒºå°±åƒå…¬å¸é‡Œçš„ç”µè¯çº¿è·¯å‡ºäº†æ•…éšœï¼Œå¯¼è‡´ä¸åŒéƒ¨é—¨ä¹‹é—´æ— æ³•é€šä¿¡ã€‚åœ¨MySQLé›†ç¾¤ä¸­ï¼Œå¦‚æœç½‘ç»œå‡ºç°é—®é¢˜ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œå°±ä¼šå‡ºç°"è„‘è£‚"ç°è±¡ã€‚

```
æ­£å¸¸æƒ…å†µï¼š
Node1 â†--â†’ Node2 â†--â†’ Node3
  â†‘                   â†“
  â””------ å…¨è¿é€š ------â”˜

ç½‘ç»œåˆ†åŒºï¼š
Node1 â†-X-â†’ Node2 â†--â†’ Node3
  |           |        |
å­¤ç«‹èŠ‚ç‚¹    åˆ†åŒºA     åˆ†åŒºB
```

### 6.2 åˆ†åŒºæ£€æµ‹æœºåˆ¶


**ç»„å¤åˆ¶çš„åˆ†åŒºæ£€æµ‹**ï¼š
```sql
-- æŸ¥çœ‹é›†ç¾¤æˆå‘˜çŠ¶æ€
SELECT 
    MEMBER_ID,
    MEMBER_HOST,
    MEMBER_PORT, 
    MEMBER_STATE,
    MEMBER_ROLE
FROM performance_schema.replication_group_members;

-- æ£€æŸ¥ç»„å¤åˆ¶çŠ¶æ€
SHOW STATUS LIKE 'group_replication%';

-- æŸ¥çœ‹é›†ç¾¤è§†å›¾å˜åŒ–
SELECT * FROM performance_schema.replication_group_member_stats;
```

**ğŸ”¸ å…³é”®çŠ¶æ€è¯´æ˜**
| çŠ¶æ€ | **å«ä¹‰** | **å¤„ç†æ–¹å¼** |
|------|----------|-------------|
| `ONLINE` | èŠ‚ç‚¹æ­£å¸¸åœ¨çº¿ | æ— éœ€å¤„ç† |
| `RECOVERING` | èŠ‚ç‚¹æ­£åœ¨æ¢å¤ | ç­‰å¾…æ¢å¤å®Œæˆ |
| `UNREACHABLE` | èŠ‚ç‚¹ä¸å¯è¾¾ | **æ£€æŸ¥ç½‘ç»œè¿æ¥** |
| `OFFLINE` | èŠ‚ç‚¹ç¦»çº¿ | **æ‰‹åŠ¨é‡æ–°åŠ å…¥** |
| `ERROR` | èŠ‚ç‚¹é”™è¯¯çŠ¶æ€ | **æ•…éšœæ’æŸ¥** |

### 6.3 è‡ªåŠ¨æ•…éšœåˆ‡æ¢é…ç½®


**é…ç½®è‡ªåŠ¨æ•…éšœæ£€æµ‹**ï¼š
```sql
-- è®¾ç½®æ•…éšœæ£€æµ‹è¶…æ—¶æ—¶é—´
SET GLOBAL group_replication_member_expel_timeout = 5;

-- é…ç½®ç½‘ç»œåˆ†åŒºå®¹å¿åº¦
SET GLOBAL group_replication_autorejoin_tries = 3;

-- è®¾ç½®å¿ƒè·³æ£€æµ‹é—´éš”
SET GLOBAL group_replication_member_weight = 50;
```

**æ•…éšœæ¢å¤è„šæœ¬**ï¼š
```bash
#!/bin/bash
# mysql_cluster_recovery.sh - é›†ç¾¤æ•…éšœæ¢å¤è„šæœ¬

MYSQL_USER="root"
MYSQL_PASSWORD="your_password"
LOG_FILE="/var/log/mysql_cluster_recovery.log"

log_message() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> $LOG_FILE
}

check_node_status() {
    local node_ip=$1
    local node_port=${2:-3306}
    
    mysql -h $node_ip -P $node_port -u $MYSQL_USER -p$MYSQL_PASSWORD \
          -e "SELECT 1" >/dev/null 2>&1
    return $?
}

rejoin_cluster() {
    local node_ip=$1
    
    log_message "å°è¯•å°†èŠ‚ç‚¹ $node_ip é‡æ–°åŠ å…¥é›†ç¾¤"
    
    mysql -h $node_ip -u $MYSQL_USER -p$MYSQL_PASSWORD <<EOF
STOP GROUP_REPLICATION;
START GROUP_REPLICATION;
EOF
    
    if [ $? -eq 0 ]; then
        log_message "èŠ‚ç‚¹ $node_ip æˆåŠŸé‡æ–°åŠ å…¥é›†ç¾¤"
        return 0
    else
        log_message "èŠ‚ç‚¹ $node_ip é‡æ–°åŠ å…¥é›†ç¾¤å¤±è´¥"
        return 1
    fi
}

# ä¸»é€»è¾‘
NODES=("10.0.1.101" "10.0.1.102" "10.0.1.103")

for node in "${NODES[@]}"; do
    if ! check_node_status $node; then
        log_message "æ£€æµ‹åˆ°èŠ‚ç‚¹ $node ç¦»çº¿ï¼Œå°è¯•æ¢å¤"
        rejoin_cluster $node
    fi
done
```

---

## 7. ğŸ›¡ï¸ IPç™½åå•ä¸è®¤è¯é…ç½®


### 7.1 IPç™½åå•æœºåˆ¶


**è®¿é—®æ§åˆ¶åŸç†**ï¼šIPç™½åå•å°±åƒé—¨å«çš„æ¥è®¿ç™»è®°è¡¨ï¼Œåªæœ‰åå•ä¸Šçš„IPåœ°å€æ‰èƒ½è¿æ¥åˆ°MySQLæœåŠ¡å™¨ï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„å®‰å…¨é˜²æŠ¤æªæ–½ã€‚

```
è®¿é—®æ§åˆ¶å±‚æ¬¡ï¼š
                åº”ç”¨æœåŠ¡å™¨
                192.168.100.50 âœ…
                     |
                   Router
                192.168.100.10
                     |
    â”Œ----------------â”¼----------------â”
    |                |                |
  Node1            Node2            Node3
10.0.1.101       10.0.1.102       10.0.1.103

å…è®¸è®¿é—®çš„IPï¼š
âœ… 192.168.100.0/24  (åº”ç”¨ç½‘æ®µ)
âœ… 10.0.1.0/24       (é›†ç¾¤ç½‘æ®µ)  
âœ… 172.16.1.0/24     (ç®¡ç†ç½‘æ®µ)
âŒ å…¶ä»–æ‰€æœ‰IP
```

### 7.2 MySQLç”¨æˆ·æƒé™é…ç½®


**åˆ›å»ºä¸“ç”¨ç”¨æˆ·**ï¼š
```sql
-- 1. åˆ›å»ºåº”ç”¨ç¨‹åºç”¨æˆ·ï¼ˆé™åˆ¶IPèŒƒå›´ï¼‰
CREATE USER 'app_user'@'192.168.100.%' 
IDENTIFIED WITH mysql_native_password BY 'StrongPassword123!';

-- æˆäºˆåº”ç”¨ç¨‹åºæƒé™
GRANT SELECT, INSERT, UPDATE, DELETE ON app_db.* TO 'app_user'@'192.168.100.%';

-- 2. åˆ›å»ºRouterç”¨æˆ·ï¼ˆé›†ç¾¤å†…éƒ¨è®¿é—®ï¼‰
CREATE USER 'mysql_router1_user'@'10.0.1.%' 
IDENTIFIED WITH mysql_native_password BY 'RouterPassword456!';

-- æˆäºˆRouteræƒé™
GRANT SELECT ON mysql_innodb_cluster_metadata.* TO 'mysql_router1_user'@'10.0.1.%';
GRANT SELECT ON performance_schema.replication_group_members TO 'mysql_router1_user'@'10.0.1.%';
GRANT SELECT ON performance_schema.replication_group_member_stats TO 'mysql_router1_user'@'10.0.1.%';

-- 3. åˆ›å»ºç›‘æ§ç”¨æˆ·ï¼ˆç®¡ç†ç½‘æ®µï¼‰
CREATE USER 'monitor_user'@'172.16.1.%' 
IDENTIFIED WITH mysql_native_password BY 'MonitorPassword789!';

-- æˆäºˆç›‘æ§æƒé™ï¼ˆåªè¯»ï¼‰
GRANT SELECT ON *.* TO 'monitor_user'@'172.16.1.%';
GRANT REPLICATION CLIENT ON *.* TO 'monitor_user'@'172.16.1.%';

-- åˆ·æ–°æƒé™
FLUSH PRIVILEGES;
```

### 7.3 è®¤è¯æ’ä»¶é…ç½®


**å¼ºåŒ–è®¤è¯æœºåˆ¶**ï¼š
```sql
-- æŸ¥çœ‹å½“å‰è®¤è¯æ’ä»¶
SELECT user, host, plugin FROM mysql.user;

-- é…ç½®å¼ºå¯†ç éªŒè¯
INSTALL COMPONENT 'file://component_validate_password';

-- è®¾ç½®å¯†ç ç­–ç•¥
SET GLOBAL validate_password.policy = 'STRONG';
SET GLOBAL validate_password.length = 12;
SET GLOBAL validate_password.mixed_case_count = 1;
SET GLOBAL validate_password.number_count = 1;
SET GLOBAL validate_password.special_char_count = 1;

-- å¯ç”¨è¿æ¥å¤±è´¥é”å®š
SET GLOBAL connection_control_failed_connections_threshold = 3;
SET GLOBAL connection_control_min_connection_delay = 1000;
```

**ğŸ”§ ç”¨æˆ·æƒé™æ£€æŸ¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# check_mysql_users.sh - æ£€æŸ¥MySQLç”¨æˆ·æƒé™

MYSQL_ROOT_PASSWORD="your_root_password"

echo "=== MySQLç”¨æˆ·æƒé™æ£€æŸ¥ ==="

# æ£€æŸ¥ç”¨æˆ·åˆ—è¡¨
mysql -u root -p$MYSQL_ROOT_PASSWORD -e "
SELECT 
    user,
    host,
    plugin,
    ssl_type,
    account_locked
FROM mysql.user
ORDER BY user, host;" 2>/dev/null

echo ""
echo "=== å±é™©æƒé™æ£€æŸ¥ ==="

# æ£€æŸ¥å…·æœ‰ALLæƒé™çš„ç”¨æˆ·
mysql -u root -p$MYSQL_ROOT_PASSWORD -e "
SELECT 
    user,
    host,
    'ALL PRIVILEGES' as privilege_type
FROM mysql.user 
WHERE 
    Select_priv='Y' AND Insert_priv='Y' AND Update_priv='Y' 
    AND Delete_priv='Y' AND Create_priv='Y' AND Drop_priv='Y'
    AND user != 'root';" 2>/dev/null

echo ""
echo "=== ç©ºå¯†ç ç”¨æˆ·æ£€æŸ¥ ==="

# æ£€æŸ¥ç©ºå¯†ç ç”¨æˆ·
mysql -u root -p$MYSQL_ROOT_PASSWORD -e "
SELECT user, host 
FROM mysql.user 
WHERE authentication_string = '' OR authentication_string IS NULL;" 2>/dev/null

echo "=== æ£€æŸ¥å®Œæˆ ==="
```

---

## 8. ğŸ”’ å®‰å…¨ä¼ è¾“åè®®ä¼˜åŒ–


### 8.1 TLSåè®®ç‰ˆæœ¬æ§åˆ¶


**åè®®å®‰å…¨ç­‰çº§**ï¼š
```
TLSåè®®å‘å±•å†ç¨‹ï¼š
SSL 3.0    âŒ å·²åºŸå¼ƒï¼ˆå®‰å…¨æ¼æ´ï¼‰
TLS 1.0    âŒ å·²åºŸå¼ƒï¼ˆå®‰å…¨æ¼æ´ï¼‰
TLS 1.1    âŒ å·²åºŸå¼ƒï¼ˆå®‰å…¨æ¼æ´ï¼‰
TLS 1.2    âœ… æ¨èä½¿ç”¨ï¼ˆå…¼å®¹æ€§å¥½ï¼‰
TLS 1.3    âœ… æœ€æ–°æ ‡å‡†ï¼ˆæ€§èƒ½æœ€ä½³ï¼‰
```

**MySQL TLSé…ç½®**ï¼š
```ini
# /etc/mysql/mysql.conf.d/mysqld.cnf

[mysqld]
# å¼ºåˆ¶ä½¿ç”¨å®‰å…¨çš„TLSç‰ˆæœ¬
tls_version = TLSv1.2,TLSv1.3

# ç¦ç”¨ä¸å®‰å…¨çš„SSLç‰ˆæœ¬
ssl_cipher = ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384

# è¯ä¹¦æ–‡ä»¶é…ç½®
ssl_ca = /etc/mysql/ssl/ca.pem
ssl_cert = /etc/mysql/ssl/server-cert.pem
ssl_key = /etc/mysql/ssl/server-key.pem

# å¯ç”¨è¯ä¹¦éªŒè¯
ssl_crl = /etc/mysql/ssl/crl.pem
ssl_crlpath = /etc/mysql/ssl/crl/

# å®¢æˆ·ç«¯è¯ä¹¦éªŒè¯ï¼ˆå¯é€‰ï¼‰
require_secure_transport = ON
```

### 8.2 åŠ å¯†ç®—æ³•ä¼˜åŒ–


**æ¨èåŠ å¯†å¥—ä»¶**ï¼š
```sql
-- æŸ¥çœ‹å½“å‰æ”¯æŒçš„åŠ å¯†ç®—æ³•
SHOW STATUS LIKE 'Ssl_cipher_list';

-- æŸ¥çœ‹å½“å‰è¿æ¥ä½¿ç”¨çš„åŠ å¯†ç®—æ³•
SHOW STATUS LIKE 'Ssl_cipher';

-- æ¨èçš„å®‰å…¨é…ç½®
SET GLOBAL ssl_cipher = 
'ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256';
```

**ğŸ”¸ åŠ å¯†ç®—æ³•å®‰å…¨ç­‰çº§**
| ç®—æ³•ç±»å‹ | **å®‰å…¨ç­‰çº§** | **æ€§èƒ½** | **æ¨èåº¦** |
|----------|-------------|----------|-----------|
| `AES-256-GCM` | æé«˜ | é«˜ | â­â­â­â­â­ |
| `AES-128-GCM` | é«˜ | æé«˜ | â­â­â­â­â­ |
| `AES-256-CBC` | é«˜ | ä¸­ | â­â­â­â­ |
| `AES-128-CBC` | ä¸­ | é«˜ | â­â­â­ |
| `DES` | ä½ | é«˜ | âŒ ä¸æ¨è |

### 8.3 æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–


**SSLæ€§èƒ½ç›‘æ§**ï¼š
```sql
-- ç›‘æ§SSLè¿æ¥ç»Ÿè®¡
SELECT 
    VARIABLE_NAME,
    VARIABLE_VALUE
FROM performance_schema.global_status 
WHERE VARIABLE_NAME LIKE 'Ssl%';

-- æŸ¥çœ‹è¿æ¥åŠ å¯†çŠ¶æ€
SELECT 
    processlist_id,
    processlist_host,
    connection_type,
    ssl_version,
    ssl_cipher
FROM performance_schema.threads 
WHERE connection_type IS NOT NULL;
```

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```markdown
> ğŸ’¡ **SSLæ€§èƒ½ä¼˜åŒ–æŠ€å·§**ï¼š
> 
> **ç¡¬ä»¶å±‚é¢**ï¼š
> - ä½¿ç”¨æ”¯æŒAES-NIæŒ‡ä»¤é›†çš„CPU
> - é…ç½®è¶³å¤Ÿçš„å†…å­˜é¿å…swap
> - ä½¿ç”¨SSDæå‡è¯ä¹¦è¯»å–é€Ÿåº¦
> 
> **è½¯ä»¶å±‚é¢**ï¼š
> - ä¼˜å…ˆé€‰æ‹©GCMæ¨¡å¼çš„åŠ å¯†ç®—æ³•
> - å¯ç”¨TLSä¼šè¯å¤ç”¨
> - è°ƒæ•´SSLç¼“å†²åŒºå¤§å°
> 
> **ç½‘ç»œå±‚é¢**ï¼š
> - å‡å°‘TLSæ¡æ‰‹é¢‘ç‡
> - ä½¿ç”¨è¿æ¥æ± å¤ç”¨è¿æ¥
> - é…ç½®åˆé€‚çš„keepaliveå‚æ•°
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```markdown
ğŸ”¸ **ç½‘ç»œè§„åˆ’**ï¼šåˆ†å±‚è®¾è®¡ï¼Œå‰ç«¯ã€åç«¯ã€ç®¡ç†ç½‘ç»œåˆ†ç¦»
ğŸ”¸ **SSLè¯ä¹¦**ï¼šèº«ä»½è®¤è¯+æ•°æ®åŠ å¯†çš„åŒé‡ä¿éšœ
ğŸ”¸ **ç»„å¤åˆ¶SSL**ï¼šç¡®ä¿é›†ç¾¤å†…éƒ¨é€šä¿¡å®‰å…¨
ğŸ”¸ **Router SSL**ï¼šåº”ç”¨ç¨‹åºè®¿é—®çš„å®‰å…¨ç½‘å…³
ğŸ”¸ **é˜²ç«å¢™é…ç½®**ï¼šæœ€å°æƒé™åŸåˆ™ï¼Œåªå¼€æ”¾å¿…è¦ç«¯å£
ğŸ”¸ **ç½‘ç»œåˆ†åŒº**ï¼šæ•…éšœæ£€æµ‹+è‡ªåŠ¨æ¢å¤æœºåˆ¶
ğŸ”¸ **è®¿é—®æ§åˆ¶**ï¼šIPç™½åå•+ç”¨æˆ·æƒé™çš„åŒé‡éªŒè¯
ğŸ”¸ **ä¼ è¾“åŠ å¯†**ï¼šä½¿ç”¨å¼ºåŠ å¯†ç®—æ³•ä¿æŠ¤æ•°æ®ä¼ è¾“
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å®‰å…¨å±‚çº§è®¾è®¡**ï¼š
```
ç½‘ç»œå±‚å®‰å…¨ï¼šé˜²ç«å¢™ + IPç™½åå•
ä¼ è¾“å±‚å®‰å…¨ï¼šSSL/TLSåŠ å¯†
åº”ç”¨å±‚å®‰å…¨ï¼šç”¨æˆ·è®¤è¯ + æƒé™æ§åˆ¶
æ•°æ®å±‚å®‰å…¨ï¼šæ•°æ®åŠ å¯† + è®¿é—®å®¡è®¡
```

**ğŸ”¹ æ•…éšœæ¢å¤ç­–ç•¥**ï¼š
```
é¢„é˜²ä¸ºä¸»ï¼š
â€¢ å†—ä½™ç½‘ç»œè®¾è®¡
â€¢ è‡ªåŠ¨æ•…éšœæ£€æµ‹
â€¢ å®æ—¶ç›‘æ§å‘Šè­¦

å¿«é€Ÿæ¢å¤ï¼š  
â€¢ è‡ªåŠ¨é‡è¿æœºåˆ¶
â€¢ æ•…éšœåˆ‡æ¢è„šæœ¬
â€¢ äººå·¥å¹²é¢„é¢„æ¡ˆ
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ£€æŸ¥æ¸…å•**ï¼š

```markdown
> ğŸ“‹ **éƒ¨ç½²å‰æ£€æŸ¥**ï¼š
> 
> **ç½‘ç»œé…ç½®**ï¼š
> - [ ] ç½‘ç»œè§„åˆ’æ–‡æ¡£å®Œæˆ
> - [ ] IPåœ°å€åˆ†é…è¡¨ç¡®è®¤
> - [ ] é˜²ç«å¢™è§„åˆ™é…ç½®
> - [ ] ç½‘ç»œè¿é€šæ€§æµ‹è¯•
> 
> **SSLè¯ä¹¦**ï¼š
> - [ ] CAæ ¹è¯ä¹¦åˆ›å»º
> - [ ] æœåŠ¡å™¨è¯ä¹¦ç”Ÿæˆ
> - [ ] å®¢æˆ·ç«¯è¯ä¹¦é…ç½®
> - [ ] è¯ä¹¦æƒé™è®¾ç½®
> 
> **å®‰å…¨é…ç½®**ï¼š
> - [ ] ç”¨æˆ·æƒé™è®¾ç½®
> - [ ] è®¿é—®æ§åˆ¶é…ç½®
> - [ ] åŠ å¯†ç®—æ³•é€‰æ‹©
> - [ ] ç›‘æ§è„šæœ¬éƒ¨ç½²
> 
> **æ•…éšœæ¢å¤**ï¼š
> - [ ] è‡ªåŠ¨æ¢å¤è„šæœ¬
> - [ ] ç›‘æ§å‘Šè­¦é…ç½®
> - [ ] åº”æ€¥å“åº”é¢„æ¡ˆ
> - [ ] å¤‡ä»½æ¢å¤æµ‹è¯•
```

**ğŸ”§ å¸¸ç”¨è¿ç»´å‘½ä»¤**ï¼š
```bash
# å¿«é€Ÿæ£€æŸ¥é›†ç¾¤çŠ¶æ€
mysql -e "SELECT * FROM performance_schema.replication_group_members;"

# æ£€æŸ¥SSLé…ç½®
mysql -e "SHOW STATUS LIKE 'Ssl%';"

# éªŒè¯è¯ä¹¦
openssl verify -CAfile ca.pem server-cert.pem

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep -E '(3306|33061|6446|6447)'

# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
firewall-cmd --list-all  # CentOS
ufw status verbose       # Ubuntu
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- **å®‰å…¨ç¬¬ä¸€**ï¼šæ‰€æœ‰é€šä¿¡éƒ½è¦åŠ å¯†ï¼Œæ‰€æœ‰è®¿é—®éƒ½è¦è®¤è¯
- **åˆ†å±‚é˜²æŠ¤**ï¼šç½‘ç»œ+ä¼ è¾“+åº”ç”¨+æ•°æ®å¤šå±‚å®‰å…¨
- **æ•…éšœé¢„æ¡ˆ**ï¼šé¢„é˜²ä¸ºä¸»ï¼Œå¿«é€Ÿæ¢å¤ä¸ºè¾…
- **æŒç»­ç›‘æ§**ï¼šå®æ—¶ç›‘æ§+å®šæœŸæ£€æŸ¥+åº”æ€¥å“åº”