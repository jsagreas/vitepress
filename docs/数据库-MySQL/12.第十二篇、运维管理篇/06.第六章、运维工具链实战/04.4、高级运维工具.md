---
title: 4ã€é«˜çº§è¿ç»´å·¥å…·
---
## ðŸ“š ç›®å½•

1. [é«˜çº§è¿ç»´å·¥å…·æ¦‚è¿°](#1-é«˜çº§è¿ç»´å·¥å…·æ¦‚è¿°)
2. [å¹¶è¡Œå¤‡ä»½å·¥å…·](#2-å¹¶è¡Œå¤‡ä»½å·¥å…·)
3. [åœ¨çº¿DDLå·¥å…·](#3-åœ¨çº¿DDLå·¥å…·)
4. [é«˜å¯ç”¨ç®¡ç†å·¥å…·](#4-é«˜å¯ç”¨ç®¡ç†å·¥å…·)
5. [åˆ†ç‰‡ç®¡ç†å·¥å…·](#5-åˆ†ç‰‡ç®¡ç†å·¥å…·)
6. [æ•°æ®åŒæ­¥å·¥å…·](#6-æ•°æ®åŒæ­¥å·¥å…·)
7. [è´Ÿè½½å‡è¡¡å™¨](#7-è´Ÿè½½å‡è¡¡å™¨)
8. [ç‰©ç†å¤‡ä»½å·¥å…·](#8-ç‰©ç†å¤‡ä»½å·¥å…·)
9. [æ•°æ®æ¢å¤å·¥å…·](#9-æ•°æ®æ¢å¤å·¥å…·)
10. [å®˜æ–¹å·¥å…·é›†](#10-å®˜æ–¹å·¥å…·é›†)
11. [æ–°ä¸€ä»£è¿ç»´å·¥å…·](#11-æ–°ä¸€ä»£è¿ç»´å·¥å…·)
12. [å·¥å…·é€‰æ‹©å¯¹æ¯”](#12-å·¥å…·é€‰æ‹©å¯¹æ¯”)
13. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#13-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ› ï¸ é«˜çº§è¿ç»´å·¥å…·æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯MySQLè¿ç»´å·¥å…·


**åŸºæœ¬æ¦‚å¿µ**ï¼šMySQLè¿ç»´å·¥å…·å°±æ˜¯**å¸®æˆ‘ä»¬ç®¡ç†å’Œç»´æŠ¤MySQLæ•°æ®åº“çš„ä¸“ä¸šè½¯ä»¶**ï¼Œå°±åƒåŒ»ç”Ÿæœ‰å¬è¯Šå™¨ã€å·¥äººæœ‰æ‰³æ‰‹ä¸€æ ·ï¼Œè¿™äº›å·¥å…·è®©æˆ‘ä»¬çš„è¿ç»´å·¥ä½œå˜å¾—æ›´ç®€å•ã€æ›´é«˜æ•ˆã€‚

```
ä¼ ç»Ÿæ‰‹å·¥è¿ç»´ï¼š
æ‰‹åŠ¨å¤‡ä»½ â†’ åœæœºç»´æŠ¤ â†’ äººå·¥ç›‘æŽ§ â†’ å‡ºé—®é¢˜å†å¤„ç†

çŽ°ä»£å·¥å…·åŒ–è¿ç»´ï¼š  
è‡ªåŠ¨åŒ–å¤‡ä»½ â†’ åœ¨çº¿ç»´æŠ¤ â†’ æ™ºèƒ½ç›‘æŽ§ â†’ é¢„é˜²æ€§å¤„ç†
```

### 1.2 è¿ç»´å·¥å…·çš„åˆ†ç±»


**ðŸ’¡ æŒ‰åŠŸèƒ½åˆ†ç±»**ï¼š
- **ðŸ”„ å¤‡ä»½æ¢å¤ç±»**ï¼šä¿è¯æ•°æ®å®‰å…¨ï¼Œå¿«é€Ÿæ¢å¤
- **âš¡ æ€§èƒ½ä¼˜åŒ–ç±»**ï¼šæå‡æ•°æ®åº“è¿è¡Œæ•ˆçŽ‡  
- **ðŸ”§ æž¶æž„ç®¡ç†ç±»**ï¼šç®¡ç†å¤æ‚çš„æ•°æ®åº“é›†ç¾¤
- **ðŸ“Š ç›‘æŽ§å‘Šè­¦ç±»**ï¼šå®žæ—¶æŽŒæ¡æ•°æ®åº“çŠ¶æ€
- **ðŸ”€ æ•°æ®åŒæ­¥ç±»**ï¼šä¿è¯æ•°æ®ä¸€è‡´æ€§

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦é«˜çº§è¿ç»´å·¥å…·


**ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹**ï¼š
```
ðŸ“ äººå·¥æ“ä½œå®¹æ˜“å‡ºé”™
â° ç»´æŠ¤æ—¶é—´é•¿ï¼Œå½±å“ä¸šåŠ¡
ðŸ” é—®é¢˜å‘çŽ°ä¸åŠæ—¶
ðŸ“ˆ æ— æ³•åº”å¯¹å¤§è§„æ¨¡æ•°æ®
```

**é«˜çº§å·¥å…·çš„ä¼˜åŠ¿**ï¼š
```
âœ… è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼Œå‡å°‘äººä¸ºé”™è¯¯
âš¡ æ•ˆçŽ‡æå‡æ•°å€ç”šè‡³æ•°åå€
ðŸ” å®žæ—¶ç›‘æŽ§ï¼Œé—®é¢˜æ—©å‘çŽ°
ðŸ“Š æ”¯æŒå¤§è§„æ¨¡ã€é«˜å¹¶å‘åœºæ™¯
```

---

## 2. âš¡ å¹¶è¡Œå¤‡ä»½å·¥å…·


### 2.1 mydumper - å¤šçº¿ç¨‹å¤‡ä»½ç¥žå™¨


#### 2.1.1 ä»€ä¹ˆæ˜¯mydumper


**ç®€å•ç†è§£**ï¼šmydumperå°±æ˜¯**MySQLå¤‡ä»½çš„"å¤šçº¿ç¨‹åŠ é€Ÿå™¨"**ï¼ŒæŠŠåŽŸæœ¬ä¸€ä¸ªäººå¹²çš„æ´»åˆ†ç»™å¤šä¸ªäººåŒæ—¶å¹²ï¼Œå¤§å¤§æé«˜å¤‡ä»½é€Ÿåº¦ã€‚

```
ä¼ ç»Ÿmysqldumpï¼š
ä¸€ä¸ªçº¿ç¨‹ â†’ ä¸€å¼ è¡¨ä¸€å¼ è¡¨æ…¢æ…¢å¤‡ä»½ â†’ è€—æ—¶å¾ˆé•¿

mydumperï¼š
å¤šä¸ªçº¿ç¨‹ â†’ åŒæ—¶å¤‡ä»½å¤šå¼ è¡¨ â†’ é€Ÿåº¦æå‡5-10å€
```

#### 2.1.2 æ ¸å¿ƒä¼˜åŠ¿


**ðŸ”¥ ä¸»è¦ç‰¹ç‚¹**ï¼š
- **å¹¶è¡Œå¤„ç†**ï¼šå¤šçº¿ç¨‹åŒæ—¶å·¥ä½œï¼Œé€Ÿåº¦å¿«
- **ä¸€è‡´æ€§ä¿è¯**ï¼šç¡®ä¿å¤‡ä»½æ•°æ®çš„å®Œæ•´æ€§
- **åŽ‹ç¼©æ”¯æŒ**ï¼šè‡ªåŠ¨åŽ‹ç¼©ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´
- **å¢žé‡å¤‡ä»½**ï¼šåªå¤‡ä»½å˜åŒ–çš„æ•°æ®

**â­ æ€§èƒ½å¯¹æ¯”**ï¼š
```
1TBæ•°æ®åº“å¤‡ä»½æ—¶é—´å¯¹æ¯”ï¼š
mysqldumpï¼š    6-8å°æ—¶
mydumperï¼š     1-2å°æ—¶ (8çº¿ç¨‹)
```

#### 2.1.3 åŸºæœ¬ä½¿ç”¨æ–¹æ³•


**å®‰è£…å’ŒåŸºæœ¬å‘½ä»¤**ï¼š
```bash
# å®‰è£…mydumper
yum install mydumper -y

# åŸºæœ¬å¤‡ä»½å‘½ä»¤
mydumper -u root -p'password' \
  --database mydb \
  --threads 8 \
  --compress \
  --outputdir /backup/mydb_backup
```

**ðŸ’¡ å‚æ•°è¯´æ˜Ž**ï¼š
- `--threads 8`ï¼šä½¿ç”¨8ä¸ªçº¿ç¨‹å¹¶è¡Œå¤‡ä»½
- `--compress`ï¼šåŽ‹ç¼©å¤‡ä»½æ–‡ä»¶
- `--outputdir`ï¼šæŒ‡å®šå¤‡ä»½æ–‡ä»¶å­˜æ”¾ç›®å½•

#### 2.1.4 é«˜çº§é…ç½®


**ä¼ä¸šçº§å¤‡ä»½è„šæœ¬**ï¼š
```bash
#!/bin/bash
# mydumperå¤‡ä»½è„šæœ¬

DB_USER="backup_user"
DB_PASS="backup_password"
BACKUP_DIR="/data/mysql_backup"
DATE=$(date +%Y%m%d_%H%M%S)

mydumper \
  -u $DB_USER -p$DB_PASS \
  --database production_db \
  --threads 16 \
  --compress \
  --long-query-guard 300 \
  --outputdir $BACKUP_DIR/$DATE \
  --logfile $BACKUP_DIR/mydumper_$DATE.log
```

### 2.2 Xtrabackup - ç‰©ç†å¤‡ä»½åˆ©å™¨


#### 2.2.1 ä»€ä¹ˆæ˜¯Xtrabackup


**é€šä¿—è§£é‡Š**ï¼šXtrabackupæ˜¯**ç‰©ç†çº§åˆ«çš„å¤‡ä»½å·¥å…·**ï¼Œå°±åƒç›´æŽ¥æ‹·è´æ•°æ®åº“æ–‡ä»¶ä¸€æ ·ï¼Œä½†æ¯”ç®€å•æ‹·è´æ›´æ™ºèƒ½ï¼Œèƒ½ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚

```
é€»è¾‘å¤‡ä»½(mysqldump)ï¼š
æ•°æ® â†’ SQLè¯­å¥ â†’ æ–‡ä»¶
æ¢å¤æ—¶éœ€è¦é‡æ–°æ‰§è¡ŒSQL

ç‰©ç†å¤‡ä»½(Xtrabackup)ï¼š
ç›´æŽ¥æ‹·è´æ•°æ®æ–‡ä»¶
æ¢å¤æ—¶ç›´æŽ¥æ›¿æ¢æ–‡ä»¶ï¼Œé€Ÿåº¦æ›´å¿«
```

#### 2.2.2 æ ¸å¿ƒç‰¹ç‚¹


**ðŸŽ¯ ä¸»è¦ä¼˜åŠ¿**ï¼š
```
âš¡ å¤‡ä»½é€Ÿåº¦å¿«ï¼šç›´æŽ¥æ‹·è´æ–‡ä»¶
ðŸ”„ çƒ­å¤‡ä»½ï¼šä¸éœ€è¦åœæœº
ðŸ“¦ å¢žé‡å¤‡ä»½ï¼šåªå¤‡ä»½å˜åŒ–éƒ¨åˆ†
ðŸ”’ ä¸€è‡´æ€§ï¼šä¿è¯å¤‡ä»½æ•°æ®å®Œæ•´
```

#### 2.2.3 å®žé™…ä½¿ç”¨


**åŸºæœ¬å¤‡ä»½å‘½ä»¤**ï¼š
```bash
# å…¨é‡å¤‡ä»½
xtrabackup --backup \
  --user=root --password=password \
  --target-dir=/backup/full_backup

# å¢žé‡å¤‡ä»½
xtrabackup --backup \
  --user=root --password=password \
  --target-dir=/backup/inc_backup \
  --incremental-basedir=/backup/full_backup
```

---

## 3. ðŸ”§ åœ¨çº¿DDLå·¥å…·


### 3.1 gh-ost - GitHubå‡ºå“çš„åœ¨çº¿DDLç¥žå™¨


#### 3.1.1 ä»€ä¹ˆæ˜¯åœ¨çº¿DDL


**ç®€å•ç†è§£**ï¼šDDLå°±æ˜¯**æ”¹å˜è¡¨ç»“æž„çš„æ“ä½œ**ï¼ˆæ¯”å¦‚åŠ å­—æ®µã€å»ºç´¢å¼•ï¼‰ï¼Œä¼ ç»Ÿæ–¹å¼éœ€è¦é”è¡¨ï¼Œå½±å“ä¸šåŠ¡ã€‚åœ¨çº¿DDLå°±æ˜¯**ä¸å½±å“ä¸šåŠ¡çš„æƒ…å†µä¸‹æ”¹è¡¨ç»“æž„**ã€‚

```
ä¼ ç»ŸDDLï¼š
ä¸šåŠ¡åœæ­¢ â†’ æ”¹è¡¨ç»“æž„ â†’ ä¸šåŠ¡æ¢å¤
ç”¨æˆ·æ— æ³•ä½¿ç”¨ç³»ç»Ÿ

åœ¨çº¿DDLï¼š
ä¸šåŠ¡æ­£å¸¸è¿è¡Œ â†’ åŽå°æ‚„æ‚„æ”¹è¡¨ â†’ æ— æ„ŸçŸ¥å®Œæˆ
ç”¨æˆ·å®Œå…¨æ„Ÿè§‰ä¸åˆ°
```

#### 3.1.2 gh-ostå·¥ä½œåŽŸç†


**æ ¸å¿ƒæ€è·¯**ï¼š
```
1. åˆ›å»ºæ–°è¡¨ï¼ˆghostè¡¨ï¼‰
2. æ‹·è´åŽŸè¡¨æ•°æ®åˆ°æ–°è¡¨
3. å®žæ—¶åŒæ­¥å¢žé‡å˜åŒ–
4. åŽŸå­æ€§åˆ‡æ¢è¡¨å
```

**æµç¨‹å›¾ç¤º**ï¼š
```
åŽŸè¡¨(old_table)          Ghostè¡¨(new_table)
      |                        |
      |-- æ•°æ®æ‹·è´ ------------>|
      |                        |
      |-- å¢žé‡åŒæ­¥ ------------>|
      |                        |
      |-- åŽŸå­åˆ‡æ¢ ------------>|
      |                        |
   (è¢«æ›¿æ¢)                 (æ–°è¡¨)
```

#### 3.1.3 åŸºæœ¬ä½¿ç”¨


**å…¸åž‹å‘½ä»¤ç¤ºä¾‹**ï¼š
```bash
# ç»™ç”¨æˆ·è¡¨æ·»åŠ ç´¢å¼•
gh-ost \
  --user="root" \
  --password="password" \
  --host="localhost" \
  --database="mydb" \
  --table="users" \
  --alter="ADD INDEX idx_email (email)" \
  --execute
```

**ðŸ’¡ å…³é”®å‚æ•°**ï¼š
- `--execute`ï¼šçœŸæ­£æ‰§è¡Œï¼ˆé»˜è®¤æ˜¯è¯•è¿è¡Œï¼‰
- `--chunk-size=1000`ï¼šæ¯æ¬¡å¤„ç†çš„è¡Œæ•°
- `--max-load=Threads_running=25`ï¼šè´Ÿè½½æŽ§åˆ¶

### 3.2 pt-online-schema-change


**è¿™æ˜¯å¦ä¸€ä¸ªåœ¨çº¿DDLå·¥å…·**ï¼ŒåŽŸç†ç±»ä¼¼gh-ostï¼Œä½†å®žçŽ°æ–¹å¼ç•¥æœ‰ä¸åŒï¼š

```bash
# ä½¿ç”¨pt-oscæ·»åŠ å­—æ®µ
pt-online-schema-change \
  --user=root --password=password \
  --host=localhost \
  --alter="ADD COLUMN phone VARCHAR(20)" \
  --execute D=mydb,t=users
```

---

## 4. ðŸ—ï¸ é«˜å¯ç”¨ç®¡ç†å·¥å…·


### 4.1 MHA - MySQLé«˜å¯ç”¨ç®¡ç†å™¨


#### 4.1.1 ä»€ä¹ˆæ˜¯MHA


**é€šä¿—è§£é‡Š**ï¼šMHAå°±æ˜¯MySQLçš„**"è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿ"**ï¼Œå½“ä¸»åº“å‡ºæ•…éšœæ—¶ï¼Œå®ƒèƒ½è‡ªåŠ¨é€‰å‡ºæ–°çš„ä¸»åº“ï¼Œè®©ä¸šåŠ¡å¿«é€Ÿæ¢å¤ï¼Œå°±åƒæ±½è½¦çš„è‡ªåŠ¨é©¾é©¶åœ¨é‡åˆ°éšœç¢æ—¶è‡ªåŠ¨é¿è®©ä¸€æ ·ã€‚

```
æ²¡æœ‰MHAçš„æƒ…å†µï¼š
ä¸»åº“æ•…éšœ â†’ äººå·¥å‘çŽ° â†’ æ‰‹åŠ¨åˆ‡æ¢ â†’ ä¸šåŠ¡ä¸­æ–­å‡ åˆ†é’Ÿç”šè‡³æ›´ä¹…

æœ‰MHAçš„æƒ…å†µï¼š
ä¸»åº“æ•…éšœ â†’ è‡ªåŠ¨å‘çŽ° â†’ è‡ªåŠ¨åˆ‡æ¢ â†’ ä¸šåŠ¡ä¸­æ–­å‡ ç§’é’Ÿ
```

#### 4.1.2 MHAæž¶æž„ç»„æˆ


**æ ¸å¿ƒç»„ä»¶**ï¼š
```
MHA Managerï¼š
â”œâ”€â”€ ç›‘æŽ§ä¸»åº“çŠ¶æ€
â”œâ”€â”€ é€‰æ‹©æ–°ä¸»åº“
â”œâ”€â”€ æ‰§è¡Œæ•…éšœåˆ‡æ¢
â””â”€â”€ é€šçŸ¥åº”ç”¨ç¨‹åº

MHA Nodeï¼š
â”œâ”€â”€ å®‰è£…åœ¨æ¯ä¸ªMySQLæœåŠ¡å™¨
â”œâ”€â”€ ååŠ©æ•°æ®æ¢å¤
â””â”€â”€ æ‰§è¡Œåˆ‡æ¢å‘½ä»¤
```

**æž¶æž„å›¾ç¤º**ï¼š
```
   MHA Manager
        |
   [ç›‘æŽ§å’Œç®¡ç†]
        |
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   |         |
 Master    Slave1
   |         |
 Slave2    Slave3
```

#### 4.1.3 é…ç½®ç¤ºä¾‹


**åŸºæœ¬é…ç½®æ–‡ä»¶**ï¼š
```ini
[server default]
user=mha
password=mhapass
ssh_user=root
repl_user=repl
repl_password=replpass

[server1]
hostname=192.168.1.10
candidate_master=1

[server2]
hostname=192.168.1.11
candidate_master=1

[server3]
hostname=192.168.1.12
no_master=1
```

### 4.2 orchestrator - çŽ°ä»£é«˜å¯ç”¨ç®¡ç†


#### 4.2.1 orchestratorç‰¹ç‚¹


**æ–°ä¸€ä»£å·¥å…·**ï¼šorchestratoræ˜¯**æ›´çŽ°ä»£åŒ–çš„é«˜å¯ç”¨ç®¡ç†å·¥å…·**ï¼Œæä¾›Webç•Œé¢ï¼Œæ“ä½œæ›´ç›´è§‚ã€‚

**ðŸŒŸ ä¸»è¦ä¼˜åŠ¿**ï¼š
- **å›¾å½¢åŒ–ç•Œé¢**ï¼šæ‹“æ‰‘å…³ç³»ä¸€ç›®äº†ç„¶
- **è‡ªåŠ¨æ•…éšœæ£€æµ‹**ï¼šæ™ºèƒ½åˆ¤æ–­æ•…éšœç±»åž‹
- **çµæ´»çš„æ¢å¤ç­–ç•¥**ï¼šæ”¯æŒå¤šç§æ¢å¤æ–¹æ¡ˆ
- **APIæŽ¥å£**ï¼šæ–¹ä¾¿ä¸Žå…¶ä»–ç³»ç»Ÿé›†æˆ

#### 4.2.2 Webç•Œé¢ç‰¹è‰²


**ç›´è§‚çš„æ‹“æ‰‘å›¾**ï¼š
```
Master (192.168.1.10)
  â”œâ”€â”€ Slave1 (192.168.1.11) [å»¶è¿Ÿ: 0.1s]
  â”œâ”€â”€ Slave2 (192.168.1.12) [å»¶è¿Ÿ: 0.2s]
  â””â”€â”€ Slave3 (192.168.1.13) [å»¶è¿Ÿ: 0.1s]
```

---

## 5. ðŸ”€ åˆ†ç‰‡ç®¡ç†å·¥å…·


### 5.1 Vitess - åˆ†ç‰‡ç®¡ç†å¹³å°


#### 5.1.1 ä»€ä¹ˆæ˜¯Vitess


**ç®€å•ç†è§£**ï¼šVitesså°±æ˜¯**æ•°æ®åº“çš„"åˆ†å¸ƒå¼ç®¡ç†å™¨"**ï¼Œå½“ä½ çš„æ•°æ®å¤ªå¤§ï¼Œä¸€ä¸ªæ•°æ®åº“è£…ä¸ä¸‹æ—¶ï¼Œå®ƒå¸®ä½ æŠŠæ•°æ®åˆ†æ•£åˆ°å¤šä¸ªæ•°æ®åº“ä¸­ï¼Œä½†å¯¹åº”ç”¨æ¥è¯´å°±åƒæ“ä½œä¸€ä¸ªæ•°æ®åº“ä¸€æ ·ç®€å•ã€‚

```
å•åº“æ¨¡å¼ï¼š
åº”ç”¨ â†’ ä¸€ä¸ªå·¨å¤§çš„æ•°æ®åº“ (æ€§èƒ½ç“¶é¢ˆ)

Vitessåˆ†ç‰‡æ¨¡å¼ï¼š
åº”ç”¨ â†’ Vitess â†’ å¤šä¸ªå°æ•°æ®åº“ (æ€§èƒ½çº¿æ€§æ‰©å±•)
```

#### 5.1.2 Vitessæž¶æž„


**æ ¸å¿ƒç»„ä»¶**ï¼š
```
VTGate (æŸ¥è¯¢è·¯ç”±å™¨)
    â†“
VTTablet (æ•°æ®åº“ä»£ç†)
    â†“
MySQLå®žä¾‹
```

**å·¥ä½œæµç¨‹**ï¼š
```
1. åº”ç”¨å‘é€SQL â†’ VTGate
2. VTGateåˆ†æžSQL â†’ ç¡®å®šç›®æ ‡åˆ†ç‰‡
3. è·¯ç”±åˆ°å¯¹åº”çš„VTTablet
4. VTTabletæ‰§è¡ŒSQL â†’ è¿”å›žç»“æžœ
5. VTGateåˆå¹¶ç»“æžœ â†’ è¿”å›žç»™åº”ç”¨
```

#### 5.1.3 åˆ†ç‰‡ç­–ç•¥


**å¸¸è§åˆ†ç‰‡æ–¹å¼**ï¼š
```sql
-- æŒ‰ç”¨æˆ·IDåˆ†ç‰‡
ç”¨æˆ·ID 1-1000ä¸‡   â†’ åˆ†ç‰‡1
ç”¨æˆ·ID 1000ä¸‡-2000ä¸‡ â†’ åˆ†ç‰‡2
ç”¨æˆ·ID 2000ä¸‡-3000ä¸‡ â†’ åˆ†ç‰‡3

-- æŒ‰åœ°åŒºåˆ†ç‰‡
åŽåŒ—ç”¨æˆ· â†’ åˆ†ç‰‡1
åŽå—ç”¨æˆ· â†’ åˆ†ç‰‡2
åŽä¸œç”¨æˆ· â†’ åˆ†ç‰‡3
```

---

## 6. ðŸ“Š æ•°æ®åŒæ­¥å·¥å…·


### 6.1 Maxwell - å®žæ—¶æ•°æ®åŒæ­¥


#### 6.1.1 Maxwellæ˜¯ä»€ä¹ˆ


**é€šä¿—è§£é‡Š**ï¼šMaxwellæ˜¯**æ•°æ®åº“çš„"å®žæ—¶å¹¿æ’­å‘˜"**ï¼Œå®ƒç›‘å¬MySQLçš„æ‰€æœ‰æ•°æ®å˜åŒ–ï¼Œç„¶åŽæŠŠè¿™äº›å˜åŒ–å®žæ—¶ä¼ é€’ç»™å…¶ä»–ç³»ç»Ÿï¼Œå°±åƒæ–°é—»ç›´æ’­ä¸€æ ·ã€‚

```
æ•°æ®å˜åŒ–è¿‡ç¨‹ï¼š
ç”¨æˆ·æ›´æ–°èµ„æ–™ â†’ MySQLè®°å½•å˜åŒ– â†’ Maxwellæ•èŽ· â†’ å‘é€åˆ°Kafka â†’ å…¶ä»–ç³»ç»Ÿå®žæ—¶å¤„ç†
```

#### 6.1.2 æ ¸å¿ƒç‰¹ç‚¹


**ðŸŽ¯ ä¸»è¦åŠŸèƒ½**ï¼š
- **å®žæ—¶æ•èŽ·**ï¼šæ¯«ç§’çº§å»¶è¿Ÿ
- **JSONæ ¼å¼**ï¼šæ•°æ®æ ¼å¼æ ‡å‡†åŒ–
- **å¤šç§è¾“å‡º**ï¼šKafkaã€RabbitMQã€Redisç­‰
- **DDLæ”¯æŒ**ï¼šè¡¨ç»“æž„å˜åŒ–ä¹Ÿèƒ½åŒæ­¥

#### 6.1.3 ä½¿ç”¨ç¤ºä¾‹


**å¯åŠ¨å‘½ä»¤**ï¼š
```bash
# å¯åŠ¨Maxwell
java -jar maxwell-1.29.2.jar \
  --user='maxwell' \
  --password='maxwell123' \
  --host='localhost' \
  --producer=kafka \
  --kafka.bootstrap.servers=localhost:9092
```

**è¾“å‡ºJSONç¤ºä¾‹**ï¼š
```json
{
  "database": "mydb",
  "table": "users", 
  "type": "update",
  "ts": 1635234567,
  "data": {"id": 1, "name": "å¼ ä¸‰", "age": 26},
  "old": {"age": 25}
}
```

### 6.2 Canal - é˜¿é‡Œå‡ºå“çš„æ•°æ®åŒæ­¥å·¥å…·


#### 6.2.1 Canalç‰¹ç‚¹


**ðŸ’¡ è®¾è®¡ç†å¿µ**ï¼šCanalæ˜¯**æ¨¡æ‹ŸMySQLä»Žåº“**çš„æ–¹å¼æ¥èŽ·å–æ•°æ®å˜åŒ–ï¼Œæ€§èƒ½æ›´é«˜ï¼Œå¯¹ä¸»åº“å½±å“æ›´å°ã€‚

```
Canalå·¥ä½œåŽŸç†ï¼š
ä¸»åº“ â†’ binlog â†’ Canal(ä¼ªè£…æˆä»Žåº“) â†’ è§£æžå˜åŒ– â†’ å‘é€ç»™ä¸‹æ¸¸
```

#### 6.2.2 ä¸ŽMaxwellå¯¹æ¯”


| ç‰¹æ€§ | **Maxwell** | **Canal** |
|------|-------------|-----------|
| **æ€§èƒ½** | `è¾ƒå¥½` | `æ›´å¥½` |
| **é…ç½®** | `ç®€å•` | `ç¨å¤æ‚` |
| **åŠŸèƒ½** | `åŸºç¡€å¤Ÿç”¨` | `åŠŸèƒ½ä¸°å¯Œ` |
| **ç”Ÿæ€** | `å›½å¤–æµè¡Œ` | `å›½å†…ä¸»æµ` |

---

## 7. âš–ï¸ è´Ÿè½½å‡è¡¡å™¨


### 7.1 ProxySQL - æ™ºèƒ½SQLä»£ç†


#### 7.1.1 ProxySQLæ˜¯ä»€ä¹ˆ


**å½¢è±¡æ¯”å–»**ï¼šProxySQLå°±åƒ**æ•°æ®åº“çš„"äº¤é€šæŒ‡æŒ¥å‘˜"**ï¼Œå®ƒç«™åœ¨åº”ç”¨å’Œæ•°æ®åº“ä¹‹é—´ï¼Œæ™ºèƒ½åœ°å†³å®šæ¯ä¸ªSQLè¯·æ±‚åº”è¯¥å‘é€åˆ°å“ªä¸ªæ•°æ®åº“æœåŠ¡å™¨ã€‚

```
åº”ç”¨è¯·æ±‚åˆ†å‘ï¼š
åº”ç”¨ â†’ ProxySQL â†’ åˆ¤æ–­SQLç±»åž‹ â†’ è·¯ç”±åˆ°åˆé€‚çš„æ•°æ®åº“
                    â†“
              è¯»è¯·æ±‚ â†’ ä»Žåº“
              å†™è¯·æ±‚ â†’ ä¸»åº“
              å¤æ‚æŸ¥è¯¢ â†’ åˆ†æžåº“
```

#### 7.1.2 æ ¸å¿ƒåŠŸèƒ½


**ðŸ”¥ æ™ºèƒ½è·¯ç”±**ï¼š
- **è¯»å†™åˆ†ç¦»**ï¼šè‡ªåŠ¨åŒºåˆ†è¯»å†™è¯·æ±‚
- **è´Ÿè½½å‡è¡¡**ï¼šè¯·æ±‚å‡åŒ€åˆ†å‘
- **æ•…éšœè½¬ç§»**ï¼šè‡ªåŠ¨å‰”é™¤æ•…éšœèŠ‚ç‚¹
- **è¿žæŽ¥æ± **ï¼šå‡å°‘æ•°æ®åº“è¿žæŽ¥åŽ‹åŠ›

#### 7.1.3 é…ç½®ç¤ºä¾‹


**åŸºæœ¬é…ç½®**ï¼š
```sql
-- é…ç½®åŽç«¯MySQLæœåŠ¡å™¨
INSERT INTO mysql_servers(hostgroup_id, hostname, port, weight) VALUES
(0, '192.168.1.10', 3306, 1000),  -- ä¸»åº“
(1, '192.168.1.11', 3306, 900),   -- ä»Žåº“1  
(1, '192.168.1.12', 3306, 900);   -- ä»Žåº“2

-- é…ç½®è·¯ç”±è§„åˆ™
INSERT INTO mysql_query_rules(rule_id, match_pattern, destination_hostgroup) VALUES
(1, '^SELECT.*', 1),  -- è¯»è¯·æ±‚åˆ°ä»Žåº“ç»„
(2, '^INSERT|UPDATE|DELETE.*', 0);  -- å†™è¯·æ±‚åˆ°ä¸»åº“ç»„
```

---

## 8. ðŸ’¾ ç‰©ç†å¤‡ä»½å·¥å…·


### 8.1 Xtrabackupè¯¦è§£


#### 8.1.1 å¤‡ä»½ç­–ç•¥è®¾è®¡


**ä¼ä¸šçº§å¤‡ä»½æ–¹æ¡ˆ**ï¼š
```
å‘¨æ—¥ï¼šå…¨é‡å¤‡ä»½
å‘¨ä¸€-å‘¨å…­ï¼šå¢žé‡å¤‡ä»½

å¤‡ä»½ä¿ç•™ç­–ç•¥ï¼š
æ—¥å¤‡ä»½ï¼šä¿ç•™7å¤©
å‘¨å¤‡ä»½ï¼šä¿ç•™4å‘¨  
æœˆå¤‡ä»½ï¼šä¿ç•™12ä¸ªæœˆ
```

#### 8.1.2 å®Œæ•´å¤‡ä»½è„šæœ¬


```bash
#!/bin/bash
# Xtrabackupè‡ªåŠ¨å¤‡ä»½è„šæœ¬

BACKUP_DIR="/data/mysql_backup"
MYSQL_USER="backup"
MYSQL_PASSWORD="backup123"
DATE=$(date +%Y%m%d)
DAY_OF_WEEK=$(date +%u)

if [ $DAY_OF_WEEK -eq 7 ]; then
    # å‘¨æ—¥å…¨é‡å¤‡ä»½
    BACKUP_TYPE="full"
    TARGET_DIR="$BACKUP_DIR/full_$DATE"
    
    xtrabackup --backup \
        --user=$MYSQL_USER --password=$MYSQL_PASSWORD \
        --target-dir=$TARGET_DIR
else
    # å…¶ä»–å¤©å¢žé‡å¤‡ä»½
    BACKUP_TYPE="incremental"
    LAST_FULL=$(ls -dt $BACKUP_DIR/full_* | head -1)
    TARGET_DIR="$BACKUP_DIR/inc_$DATE"
    
    xtrabackup --backup \
        --user=$MYSQL_USER --password=$MYSQL_PASSWORD \
        --target-dir=$TARGET_DIR \
        --incremental-basedir=$LAST_FULL
fi

echo "[$DATE] $BACKUP_TYPE backup completed: $TARGET_DIR"
```

---

## 9. ðŸ”„ æ•°æ®æ¢å¤å·¥å…·


### 9.1 binlog2sql - è¯¯æ“ä½œæ¢å¤ç¥žå™¨


#### 9.1.1 ä»€ä¹ˆæ˜¯binlog2sql


**æ•‘å‘½ç¨»è‰**ï¼šbinlog2sqlæ˜¯**ä¸“é—¨ç”¨æ¥æ¢å¤è¯¯æ“ä½œæ•°æ®çš„å·¥å…·**ï¼Œå½“ä½ ä¸å°å¿ƒåˆ é™¤äº†é‡è¦æ•°æ®æ—¶ï¼Œå®ƒèƒ½å¸®ä½ "åæ‚”"ã€‚

```
è¯¯æ“ä½œåœºæ™¯ï¼š
DELETE FROM users WHERE age > 0;  -- è¯¯åˆ å…¨è¡¨æ•°æ®

ä½¿ç”¨binlog2sqlæ¢å¤ï¼š
1. åˆ†æžbinlogæ‰¾åˆ°è¯¯æ“ä½œ
2. ç”Ÿæˆåå‘SQL
3. æ‰§è¡Œåå‘SQLæ¢å¤æ•°æ®
```

#### 9.1.2 ä½¿ç”¨æ–¹æ³•


**åŸºæœ¬æ¢å¤æµç¨‹**ï¼š
```bash
# 1. åˆ†æžbinlogï¼Œæ‰¾åˆ°è¯¯æ“ä½œ
python binlog2sql.py \
    -h localhost -P 3306 -u root -p'password' \
    -d mydb -t users \
    --start-file=mysql-bin.000001 \
    --start-datetime='2023-10-01 10:00:00' \
    --stop-datetime='2023-10-01 11:00:00'

# 2. ç”Ÿæˆå›žæ»šSQL
python binlog2sql.py \
    -h localhost -P 3306 -u root -p'password' \
    -d mydb -t users \
    --start-file=mysql-bin.000001 \
    --start-datetime='2023-10-01 10:30:00' \
    --stop-datetime='2023-10-01 10:31:00' \
    --flashback > rollback.sql

# 3. æ‰§è¡Œå›žæ»š
mysql -u root -p'password' mydb < rollback.sql
```

#### 9.1.3 å®žé™…æ¡ˆä¾‹


**è¯¯åˆ æ•°æ®æ¢å¤**ï¼š
```sql
-- åŽŸå§‹è¯¯æ“ä½œ
DELETE FROM orders WHERE status = 'pending';

-- binlog2sqlç”Ÿæˆçš„å›žæ»šSQL
INSERT INTO orders (id, user_id, amount, status, created_at) VALUES 
(1001, 123, 99.99, 'pending', '2023-10-01 10:30:15'),
(1002, 124, 149.99, 'pending', '2023-10-01 10:31:22'),
...
```

---

## 10. ðŸ› ï¸ å®˜æ–¹å·¥å…·é›†


### 10.1 mysql-utilitieså·¥å…·åŒ…


#### 10.1.1 å·¥å…·åŒ…æ¦‚è¿°


**å®˜æ–¹å‡ºå“**ï¼šmysql-utilitiesæ˜¯**MySQLå®˜æ–¹æä¾›çš„è¿ç»´å·¥å…·é›†åˆ**ï¼ŒåŒ…å«äº†æ—¥å¸¸è¿ç»´ä¸­æœ€å¸¸ç”¨çš„å„ç§å°å·¥å…·ã€‚

**ðŸ”§ ä¸»è¦å·¥å…·**ï¼š
- `mysqldbcompare`ï¼šæ¯”è¾ƒæ•°æ®åº“å·®å¼‚
- `mysqldbcopy`ï¼šå¤åˆ¶æ•°æ®åº“
- `mysqldiff`ï¼šæ¯”è¾ƒè¡¨ç»“æž„
- `mysqlreplicate`ï¼šé…ç½®ä¸»ä»Žå¤åˆ¶
- `mysqlserverinfo`ï¼šæŸ¥çœ‹æœåŠ¡å™¨ä¿¡æ¯

#### 10.1.2 å¸¸ç”¨å·¥å…·è¯¦è§£


**æ•°æ®åº“æ¯”è¾ƒå·¥å…·**ï¼š
```bash
# æ¯”è¾ƒä¸¤ä¸ªæ•°æ®åº“çš„ç»“æž„å·®å¼‚
mysqldbcompare --server1=root:password@host1:3306 \
               --server2=root:password@host2:3306 \
               db1:db2

# æ¯”è¾ƒè¡¨æ•°æ®
mysqldiff --server1=root:password@host1:3306 \
          --server2=root:password@host2:3306 \
          db1.table1:db2.table1
```

**å¤åˆ¶é…ç½®å·¥å…·**ï¼š
```bash
# è‡ªåŠ¨é…ç½®ä¸»ä»Žå¤åˆ¶
mysqlreplicate --master=root:password@master:3306 \
               --slave=root:password@slave:3306 \
               --rpl-user=repl:replpass
```

---

## 11. ðŸš€ æ–°ä¸€ä»£è¿ç»´å·¥å…·


### 11.1 å·¥å…·AIèƒ½åŠ›é›†æˆ


#### 11.1.1 æ™ºèƒ½åŒ–è¶‹åŠ¿


**AIèµ‹èƒ½è¿ç»´**ï¼šæ–°ä¸€ä»£å·¥å…·å¼€å§‹é›†æˆAIèƒ½åŠ›ï¼Œè®©æ•°æ®åº“è¿ç»´å˜å¾—æ›´æ™ºèƒ½ã€‚

```
ä¼ ç»Ÿè¿ç»´ï¼š
é—®é¢˜å‘ç”Ÿ â†’ äººå·¥åˆ†æž â†’ æ‰‹åŠ¨å¤„ç†

AIè¿ç»´ï¼š
æ•°æ®æ”¶é›† â†’ AIåˆ†æž â†’ è‡ªåŠ¨é¢„æµ‹ â†’ é¢„é˜²æ€§å¤„ç†
```

**ðŸ¤– AIèƒ½åŠ›åº”ç”¨**ï¼š
- **å¼‚å¸¸æ£€æµ‹**ï¼šAIè¯†åˆ«å¼‚å¸¸SQLæ¨¡å¼
- **æ€§èƒ½ä¼˜åŒ–**ï¼šAIæŽ¨èç´¢å¼•å’Œé…ç½®
- **å®¹é‡è§„åˆ’**ï¼šAIé¢„æµ‹èµ„æºéœ€æ±‚
- **æ•…éšœé¢„æµ‹**ï¼šAIæå‰å‘çŽ°æ½œåœ¨é—®é¢˜

#### 11.1.2 æ™ºèƒ½è¿ç»´å®žè·µ


**ç›‘æŽ§å‘Šè­¦å‡çº§**ï¼š
```
Level 1: ä¼ ç»Ÿé˜ˆå€¼å‘Šè­¦
Level 2: åŸºäºŽåŽ†å²æ•°æ®çš„åŠ¨æ€é˜ˆå€¼
Level 3: AIåŸºäºŽå¤šç»´åº¦æ•°æ®çš„æ™ºèƒ½å‘Šè­¦
```

### 11.2 äº‘åŽŸç”Ÿé€‚é…


#### 11.2.1 å®¹å™¨åŒ–éƒ¨ç½²


**Kubernetesé›†æˆ**ï¼šçŽ°ä»£å·¥å…·éƒ½æ”¯æŒåœ¨K8sçŽ¯å¢ƒä¸­éƒ¨ç½²å’Œç®¡ç†ã€‚

```yaml
# MySQL Operatorç¤ºä¾‹
apiVersion: mysql.oracle.com/v2
kind: InnoDBCluster
metadata:
  name: mysql-cluster
spec:
  secretName: mysql-secret
  tlsUseSelfSigned: true
  instances: 3
  router:
    instances: 2
```

#### 11.2.2 äº‘åŽŸç”Ÿç‰¹æ€§


**ðŸŒ©ï¸ äº‘åŽŸç”Ÿä¼˜åŠ¿**ï¼š
- **å¼¹æ€§æ‰©ç¼©å®¹**ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´
- **æœåŠ¡å‘çŽ°**ï¼šè‡ªåŠ¨æ³¨å†Œå’Œå‘çŽ°æœåŠ¡
- **é…ç½®ç®¡ç†**ï¼šConfigMapç®¡ç†é…ç½®
- **ç›‘æŽ§é›†æˆ**ï¼šä¸ŽPrometheusç­‰ç›‘æŽ§ç³»ç»Ÿé›†æˆ

---

## 12. ðŸ“Š å·¥å…·é€‰æ‹©å¯¹æ¯”


### 12.1 å¤‡ä»½å·¥å…·å¯¹æ¯”


| å·¥å…· | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŠ¿** | **åŠ£åŠ¿** | **æŽ¨èæŒ‡æ•°** |
|------|-------------|----------|----------|-------------|
| **mysqldump** | `å°åž‹æ•°æ®åº“` | `ç®€å•æ˜“ç”¨ï¼Œå…¼å®¹æ€§å¥½` | `é€Ÿåº¦æ…¢ï¼Œé”è¡¨æ—¶é—´é•¿` | â­â­â­ |
| **mydumper** | `ä¸­å¤§åž‹æ•°æ®åº“` | `å¹¶è¡Œå¿«é€Ÿï¼Œä¸€è‡´æ€§å¥½` | `é…ç½®ç¨å¤æ‚` | â­â­â­â­â­ |
| **Xtrabackup** | `å¤§åž‹ç”Ÿäº§çŽ¯å¢ƒ` | `ç‰©ç†å¤‡ä»½ï¼Œé€Ÿåº¦æžå¿«` | `å­¦ä¹ æˆæœ¬é«˜` | â­â­â­â­â­ |

### 12.2 é«˜å¯ç”¨å·¥å…·å¯¹æ¯”


| å·¥å…· | **ç®¡ç†å¤æ‚åº¦** | **æ•…éšœåˆ‡æ¢æ—¶é—´** | **ç¤¾åŒºæ´»è·ƒåº¦** | **æŽ¨èåœºæ™¯** |
|------|---------------|-----------------|---------------|-------------|
| **MHA** | `ä¸­ç­‰` | `10-30ç§’` | `è¾ƒæ´»è·ƒ` | `ä¼ ç»Ÿæž¶æž„` |
| **orchestrator** | `ä½Ž` | `5-15ç§’` | `å¾ˆæ´»è·ƒ` | `çŽ°ä»£åŒ–æž¶æž„` |
| **MySQL Router** | `ä½Ž` | `ç§’çº§` | `å®˜æ–¹æ”¯æŒ` | `MySQL 8.0+` |

### 12.3 åŒæ­¥å·¥å…·å¯¹æ¯”


| å·¥å…· | **å»¶è¿Ÿ** | **åŠŸèƒ½ä¸°å¯Œåº¦** | **è¿ç»´éš¾åº¦** | **é€‚ç”¨åœºæ™¯** |
|------|---------|---------------|-------------|-------------|
| **Maxwell** | `æ¯«ç§’çº§` | `åŸºç¡€å¤Ÿç”¨` | `ç®€å•` | `ç®€å•æ•°æ®åŒæ­¥` |
| **Canal** | `æ¯«ç§’çº§` | `åŠŸèƒ½ä¸°å¯Œ` | `ä¸­ç­‰` | `å¤æ‚ä¸šåŠ¡åœºæ™¯` |
| **Debezium** | `æ¯«ç§’çº§` | `éžå¸¸ä¸°å¯Œ` | `è¾ƒå¤æ‚` | `å¾®æœåŠ¡æž¶æž„` |

### 12.4 ä¼ä¸šé€‰æ‹©å»ºè®®


**ðŸŽ¯ å°åž‹ä¼ä¸š**ï¼š
```
å¤‡ä»½ï¼šmysqldump + å®šæ—¶è„šæœ¬
ç›‘æŽ§ï¼šå¼€æºç›‘æŽ§å·¥å…·
é«˜å¯ç”¨ï¼šç®€å•ä¸»ä»Ž + æ‰‹åŠ¨åˆ‡æ¢
```

**ðŸ¢ ä¸­åž‹ä¼ä¸š**ï¼š
```
å¤‡ä»½ï¼šmydumper + è‡ªåŠ¨åŒ–è„šæœ¬
ç›‘æŽ§ï¼šä¸“ä¸šç›‘æŽ§å¹³å°
é«˜å¯ç”¨ï¼šMHAæˆ–orchestrator
åŒæ­¥ï¼šMaxwellæˆ–Canal
```

**ðŸ­ å¤§åž‹ä¼ä¸š**ï¼š
```
å¤‡ä»½ï¼šXtrabackup + åˆ†å¸ƒå¼å­˜å‚¨
ç›‘æŽ§ï¼šä¼ä¸šçº§ç›‘æŽ§å¥—ä»¶
é«˜å¯ç”¨ï¼šå¤šå¥—é«˜å¯ç”¨æ–¹æ¡ˆ
åŒæ­¥ï¼šå¤šç§å·¥å…·ç»„åˆä½¿ç”¨
åˆ†ç‰‡ï¼šVitessç­‰åˆ†å¸ƒå¼æ–¹æ¡ˆ
```

---

## 13. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 13.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸ”¸ å·¥å…·åˆ†ç±»ï¼šå¤‡ä»½æ¢å¤ã€æ€§èƒ½ä¼˜åŒ–ã€æž¶æž„ç®¡ç†ã€ç›‘æŽ§å‘Šè­¦ã€æ•°æ®åŒæ­¥
ðŸ”¸ é€‰æ‹©åŽŸåˆ™ï¼šæ ¹æ®æ•°æ®è§„æ¨¡ã€ä¸šåŠ¡éœ€æ±‚ã€æŠ€æœ¯æ°´å¹³é€‰æ‹©åˆé€‚å·¥å…·
ðŸ”¸ ç»„åˆä½¿ç”¨ï¼šå•ä¸€å·¥å…·æ— æ³•è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œéœ€è¦å·¥å…·ç»„åˆ
ðŸ”¸ æŒç»­å­¦ä¹ ï¼šå·¥å…·åœ¨ä¸æ–­å‘å±•ï¼Œéœ€è¦æŒç»­å…³æ³¨æ–°æŠ€æœ¯
```

### 13.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ å·¥å…·ä¸æ˜¯ä¸‡èƒ½çš„**
```
ç†è§£å±€é™æ€§ï¼š
- æ¯ä¸ªå·¥å…·éƒ½æœ‰é€‚ç”¨åœºæ™¯
- æ²¡æœ‰ä¸€ä¸ªå·¥å…·èƒ½è§£å†³æ‰€æœ‰é—®é¢˜
- å·¥å…·ç»„åˆæ¯”å•ä¸€å·¥å…·æ›´æœ‰æ•ˆ
```

**ðŸ”¹ é€‰æ‹©åˆé€‚æ¯”é€‰æ‹©æœ€æ–°æ›´é‡è¦**
```
é€‰æ‹©æ ‡å‡†ï¼š
- ç¬¦åˆå½“å‰æŠ€æœ¯æ°´å¹³
- æ»¡è¶³ä¸šåŠ¡éœ€æ±‚
- æœ‰è‰¯å¥½çš„ç¤¾åŒºæ”¯æŒ
- æ–‡æ¡£å®Œå–„ï¼Œæ˜“äºŽå­¦ä¹ 
```

**ðŸ”¹ è‡ªåŠ¨åŒ–æ˜¯è¶‹åŠ¿**
```
å‘å±•æ–¹å‘ï¼š
- ä»Žæ‰‹å·¥æ“ä½œåˆ°å·¥å…·åŒ–
- ä»Žå·¥å…·åŒ–åˆ°è‡ªåŠ¨åŒ–  
- ä»Žè‡ªåŠ¨åŒ–åˆ°æ™ºèƒ½åŒ–
```

### 13.3 å®žé™…åº”ç”¨å»ºè®®


**ðŸ’¡ æ–°æ‰‹å»ºè®®**ï¼š
- å…ˆæŽŒæ¡åŸºç¡€å·¥å…·ï¼ˆmysqldumpã€åŸºæœ¬ç›‘æŽ§ï¼‰
- é€æ­¥å­¦ä¹ é«˜çº§å·¥å…·ï¼ˆmydumperã€MHAï¼‰
- å¤šåœ¨æµ‹è¯•çŽ¯å¢ƒç»ƒä¹ 
- å…³æ³¨å®˜æ–¹æ–‡æ¡£å’Œæœ€ä½³å®žè·µ

**ðŸ”§ è¿›é˜¶å»ºè®®**ï¼š
- æ·±å…¥ç†è§£å·¥å…·åŽŸç†
- å­¦ä¼šå·¥å…·ç»„åˆä½¿ç”¨
- å…³æ³¨æ–°æŠ€æœ¯å‘å±•
- å‚ä¸Žå¼€æºç¤¾åŒºè´¡çŒ®

**ðŸŽ¯ ä¼ä¸šå®žæ–½**ï¼š
- åˆ¶å®šå·¥å…·æ ‡å‡†åŒ–è§„èŒƒ
- å»ºç«‹å·¥å…·ä½¿ç”¨åŸ¹è®­ä½“ç³»
- å»ºè®¾è‡ªåŠ¨åŒ–è¿ç»´å¹³å°
- å…³æ³¨å·¥å…·å®‰å…¨æ€§å’Œåˆè§„æ€§

### 13.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ðŸ“š å­¦ä¹ é¡ºåº**ï¼š
```
ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å·¥å…·æŽŒæ¡
â””â”€â”€ mysqldumpã€åŸºæœ¬ç›‘æŽ§ã€ç®€å•è„šæœ¬

ç¬¬äºŒé˜¶æ®µï¼šé«˜æ•ˆå·¥å…·ä½¿ç”¨  
â””â”€â”€ mydumperã€Xtrabackupã€ProxySQL

ç¬¬ä¸‰é˜¶æ®µï¼šé«˜å¯ç”¨æž¶æž„
â””â”€â”€ MHAã€orchestratorã€è¯»å†™åˆ†ç¦»

ç¬¬å››é˜¶æ®µï¼šåˆ†å¸ƒå¼æ–¹æ¡ˆ
â””â”€â”€ Vitessã€åˆ†ç‰‡ã€æ•°æ®åŒæ­¥

ç¬¬äº”é˜¶æ®µï¼šæ™ºèƒ½åŒ–è¿ç»´
â””â”€â”€ AIå·¥å…·ã€äº‘åŽŸç”Ÿã€è‡ªåŠ¨åŒ–å¹³å°
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å·¥å…·æ˜¯ä¸ºäº†æé«˜æ•ˆçŽ‡å’Œå‡å°‘é”™è¯¯
- é€‰æ‹©åˆé€‚çš„å·¥å…·æ¯”è¿½æ±‚æœ€æ–°æ›´é‡è¦  
- ç»„åˆä½¿ç”¨å¤šç§å·¥å…·æ•ˆæžœæ›´å¥½
- æŒç»­å­¦ä¹ æ–°æŠ€æœ¯æ˜¯è¿ç»´äººå‘˜çš„å¿…ä¿®è¯¾