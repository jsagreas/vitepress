---
title: 8ã€ç³»ç»Ÿä¾èµ–ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [ç³»ç»Ÿä¾èµ–ç®¡ç†æ¦‚è¿°](#1-ç³»ç»Ÿä¾èµ–ç®¡ç†æ¦‚è¿°)
2. [ä¾èµ–åº“æ£€æŸ¥ä¸éªŒè¯](#2-ä¾èµ–åº“æ£€æŸ¥ä¸éªŒè¯)
3. [åŠ¨æ€é“¾æ¥åº“ç®¡ç†](#3-åŠ¨æ€é“¾æ¥åº“ç®¡ç†)
4. [ç¼–è¯‘å·¥å…·é“¾é…ç½®](#4-ç¼–è¯‘å·¥å…·é“¾é…ç½®)
5. [åŒ…ç®¡ç†å·¥å…·ä½¿ç”¨](#5-åŒ…ç®¡ç†å·¥å…·ä½¿ç”¨)
6. [ç¯å¢ƒéš”ç¦»ç­–ç•¥](#6-ç¯å¢ƒéš”ç¦»ç­–ç•¥)
7. [ä¾èµ–å†²çªè§£å†³](#7-ä¾èµ–å†²çªè§£å†³)
8. [ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ](#8-ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” ç³»ç»Ÿä¾èµ–ç®¡ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ç³»ç»Ÿä¾èµ–


**ğŸ’¡ ç®€å•ç†è§£**ï¼šç³»ç»Ÿä¾èµ–å°±åƒç›–æˆ¿å­éœ€è¦çš„å„ç§ææ–™å’Œå·¥å…·

```
MySQLè¿è¡Œéœ€è¦çš„"ææ–™"ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQLç¨‹åºæœ¬ä½“                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç³»ç»ŸåŸºç¡€åº“ (glibc, libsslç­‰)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¼–è¯‘å·¥å…·é“¾ (gcc, makeç­‰)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Pythonè„šæœ¬ç¯å¢ƒ (ç®¡ç†å·¥å…·éœ€è¦)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬ä¸‰æ–¹å·¥å…· (ç›‘æ§ã€å¤‡ä»½å·¥å…·ç­‰)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ“– **æ ¸å¿ƒæ¦‚å¿µ**ï¼šä¾èµ–ç®¡ç†å°±æ˜¯ç¡®ä¿MySQLè¿è¡Œæ‰€éœ€çš„æ‰€æœ‰"ææ–™"éƒ½é½å…¨ã€ç‰ˆæœ¬æ­£ç¡®ä¸”äº’ç›¸å…¼å®¹

### 1.2 ä¸ºä»€ä¹ˆä¾èµ–ç®¡ç†å¾ˆé‡è¦


**ğŸ¯ å®é™…åœºæ™¯ä¸¾ä¾‹**ï¼š
- **ç‰ˆæœ¬å†²çª**ï¼šæ–°ç‰ˆMySQLéœ€è¦OpenSSL 1.1ï¼Œä½†ç³»ç»Ÿåªæœ‰1.0
- **ç¼ºå¤±ä¾èµ–**ï¼šç¼–è¯‘MySQLæ—¶æç¤ºæ‰¾ä¸åˆ°æŸä¸ªå¼€å‘åº“
- **ç¯å¢ƒå·®å¼‚**ï¼šå¼€å‘ç¯å¢ƒæ­£å¸¸ï¼Œç”Ÿäº§ç¯å¢ƒæŠ¥é”™

**âš ï¸ å¸¸è§é—®é¢˜**ï¼š
```
âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥å®‰è£…å¯¼è‡´çš„é—®é¢˜
- MySQLå¯åŠ¨å¤±è´¥ï¼š"error while loading shared libraries"
- ç¼–è¯‘æŠ¥é”™ï¼š"fatal error: mysql.h: No such file"
- å·¥å…·å†²çªï¼šæ–°è£…çš„ç›‘æ§å·¥å…·ç ´åäº†åŸæœ‰Pythonç¯å¢ƒ
```

### 1.3 ä¾èµ–ç®¡ç†çš„æ ¸å¿ƒè¦ç´ 


**ğŸ”¸ å››ä¸ªå…³é”®ç»´åº¦**ï¼š

| ç»´åº¦ | **è¯´æ˜** | **ä¸¾ä¾‹** |
|------|---------|----------|
| **ç‰ˆæœ¬å…¼å®¹** | `ç¡®ä¿å„ç»„ä»¶ç‰ˆæœ¬åŒ¹é…` | `MySQL 8.0éœ€è¦glibc >= 2.17` |
| **è·¯å¾„ç®¡ç†** | `ç³»ç»Ÿèƒ½æ‰¾åˆ°æ‰€éœ€æ–‡ä»¶` | `åŠ¨æ€åº“è·¯å¾„é…ç½®æ­£ç¡®` |
| **æƒé™æ§åˆ¶** | `è¿›ç¨‹æœ‰è¶³å¤Ÿæƒé™è®¿é—®` | `mysqlç”¨æˆ·èƒ½è¯»å–é…ç½®æ–‡ä»¶` |
| **ç¯å¢ƒéš”ç¦»** | `é¿å…ä¸åŒåº”ç”¨å†²çª` | `æµ‹è¯•ç¯å¢ƒä¸å½±å“ç”Ÿäº§ç¯å¢ƒ` |

---

## 2. ğŸ”¬ ä¾èµ–åº“æ£€æŸ¥ä¸éªŒè¯


### 2.1 ç³»ç»Ÿåº“å…¼å®¹æ€§æ£€æŸ¥


**ğŸ” åŸºç¡€åº“ç‰ˆæœ¬éªŒè¯**ï¼š

```bash
# æ£€æŸ¥glibcç‰ˆæœ¬ (MySQLæ ¸å¿ƒä¾èµ–)
ldd --version

# æ£€æŸ¥OpenSSLç‰ˆæœ¬ (åŠ å¯†é€šä¿¡å¿…éœ€)
openssl version

# æ£€æŸ¥ç³»ç»Ÿæ¶æ„åŒ¹é…
uname -m
file /usr/bin/mysql  # æ£€æŸ¥MySQLäºŒè¿›åˆ¶æ¶æ„
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼šglibcæ˜¯Linuxç³»ç»Ÿæœ€åŸºç¡€çš„Cè¿è¡Œåº“ï¼Œå‡ ä¹æ‰€æœ‰ç¨‹åºéƒ½ä¾èµ–å®ƒ

**ğŸ“‹ MySQLå¸¸ç”¨ä¾èµ–åº“æ¸…å•**ï¼š

```
å¿…éœ€ä¾èµ–åº“æ£€æŸ¥:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ glibc     >= 2.17   (åŸºç¡€Cåº“)        â”‚
â”‚ libssl    >= 1.0.0  (SSLåŠ å¯†)        â”‚
â”‚ libcrypto >= 1.0.0  (åŠ å¯†ç®—æ³•)       â”‚
â”‚ libz      >= 1.2.3  (æ•°æ®å‹ç¼©)       â”‚
â”‚ libncurses>= 5.0    (ç»ˆç«¯ç•Œé¢)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯é€‰ä¾èµ–åº“:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ libaio            (å¼‚æ­¥IOä¼˜åŒ–)       â”‚
â”‚ libsasl2          (è®¤è¯æœºåˆ¶)         â”‚
â”‚ libmecab          (å…¨æ–‡æ£€ç´¢)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åŠ¨æ€åº“ä¾èµ–æ£€æŸ¥å®è·µ


**ğŸ”§ ä½¿ç”¨lddæ£€æŸ¥åŠ¨æ€åº“ä¾èµ–**ï¼š

```bash
# æ£€æŸ¥MySQLå¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–
ldd /usr/bin/mysql
# è¾“å‡ºç¤ºä¾‹ï¼š
# linux-vdso.so.1 =>  (0x00007fff41bfe000)
# libpthread.so.0 => /lib64/libpthread.so.0
# libdl.so.2 => /lib64/libdl.so.2
# libssl.so.10 => /usr/lib64/libssl.so.10

# æ£€æŸ¥æ˜¯å¦æœ‰æœªæ‰¾åˆ°çš„ä¾èµ–
ldd /usr/bin/mysql | grep "not found"
```

> ğŸ“– **lddå‘½ä»¤è§£è¯»**ï¼šlddæ˜¾ç¤ºç¨‹åºè¿è¡Œæ—¶éœ€è¦åŠ è½½çš„åŠ¨æ€åº“åŠå…¶ä½ç½®ï¼Œ"not found"è¡¨ç¤ºç¼ºå¤±ä¾èµ–

**ğŸ” ä¾èµ–é—®é¢˜è¯Šæ–­è„šæœ¬**ï¼š

```bash
#!/bin/bash
# MySQLä¾èµ–æ£€æŸ¥è„šæœ¬

echo "=== MySQLä¾èµ–åº“æ£€æŸ¥ ==="

# æ£€æŸ¥å…³é”®ä¾èµ–åº“
check_lib() {
    lib_name=$1
    if ldconfig -p | grep -q "$lib_name"; then
        echo "âœ… $lib_name: å·²å®‰è£…"
        ldconfig -p | grep "$lib_name" | head -1
    else
        echo "âŒ $lib_name: æœªæ‰¾åˆ°"
    fi
}

check_lib "libssl"
check_lib "libcrypto" 
check_lib "libz"
check_lib "libncurses"

echo -e "\n=== ç³»ç»Ÿä¿¡æ¯ ==="
echo "glibcç‰ˆæœ¬: $(ldd --version | head -1)"
echo "ç³»ç»Ÿæ¶æ„: $(uname -m)"
```

---

## 3. ğŸ”— åŠ¨æ€é“¾æ¥åº“ç®¡ç†


### 3.1 åŠ¨æ€é“¾æ¥ vs é™æ€é“¾æ¥


**ğŸ“š æ¦‚å¿µå¯¹æ¯”**ï¼š

```
é™æ€é“¾æ¥ï¼ˆæ‰“åŒ…æ¨¡å¼ï¼‰:
ç¨‹åº = [åº”ç”¨ä»£ç  + æ‰€æœ‰ä¾èµ–åº“] â†’ å•ä¸ªå¤§æ–‡ä»¶
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ MySQLç¨‹åº + libssl + glibc  â”‚  
   â”‚      (æ‰€æœ‰ä»£ç æ‰“åŒ…)         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
åŠ¨æ€é“¾æ¥ï¼ˆå¼•ç”¨æ¨¡å¼ï¼‰:
ç¨‹åº = [åº”ç”¨ä»£ç ] + [ä¾èµ–åº“å¼•ç”¨] â†’ å°æ–‡ä»¶ + å…±äº«åº“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ MySQLç¨‹åº   â”‚â”€â”€â”€â†’â”‚  libssl.so  â”‚
   â”‚(åªå«æ ¸å¿ƒä»£ç )â”‚    â”‚  (å…±äº«åº“)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ¯ å®é™…æ„ä¹‰**ï¼š
- **é™æ€é“¾æ¥**ï¼šç¨‹åºæ›´å¤§ä½†ç‹¬ç«‹æ€§å¼ºï¼Œä¸æ€•ä¾èµ–ç¼ºå¤±
- **åŠ¨æ€é“¾æ¥**ï¼šç¨‹åºæ›´å°ä¸”èŠ‚çœå†…å­˜ï¼Œä½†éœ€è¦ç®¡ç†ä¾èµ–å…³ç³»

### 3.2 LD_LIBRARY_PATHç¯å¢ƒé…ç½®


**ğŸ”§ åŠ¨æ€åº“è·¯å¾„ç®¡ç†**ï¼š

```bash
# æŸ¥çœ‹å½“å‰åŠ¨æ€åº“æœç´¢è·¯å¾„
echo $LD_LIBRARY_PATH

# ä¸´æ—¶æ·»åŠ åº“è·¯å¾„
export LD_LIBRARY_PATH=/usr/local/mysql/lib:$LD_LIBRARY_PATH

# æ°¸ä¹…é…ç½®æ–¹æ³•1: ä¿®æ”¹ç³»ç»Ÿé…ç½®
echo "/usr/local/mysql/lib" >> /etc/ld.so.conf.d/mysql.conf
ldconfig  # é‡æ–°åŠ è½½é…ç½®

# æ°¸ä¹…é…ç½®æ–¹æ³•2: ç”¨æˆ·ç¯å¢ƒå˜é‡
echo 'export LD_LIBRARY_PATH=/usr/local/mysql/lib:$LD_LIBRARY_PATH' >> ~/.bashrc
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼šéšæ„ä¿®æ”¹LD_LIBRARY_PATHå¯èƒ½å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ldconfigé…ç½®

**ğŸ” åº“è·¯å¾„æœç´¢é¡ºåº**ï¼š

```
åŠ¨æ€åº“æœç´¢ä¼˜å…ˆçº§:
1. LD_LIBRARY_PATHç¯å¢ƒå˜é‡æŒ‡å®šçš„è·¯å¾„
2. /etc/ld.so.confé…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„  
3. ç³»ç»Ÿé»˜è®¤è·¯å¾„(/lib, /usr/libç­‰)
4. ç¨‹åºåŒç›®å½•ä¸‹çš„libæ–‡ä»¶å¤¹
```

### 3.3 å¸¸è§åŠ¨æ€åº“é—®é¢˜è§£å†³


**ğŸš¨ å…¸å‹é—®é¢˜åœºæ™¯**ï¼š

<details>
<summary>ğŸ“‹ é—®é¢˜1: "error while loading shared libraries: libssl.so.10"</summary>

**åŸå› **ï¼šç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šç‰ˆæœ¬çš„OpenSSLåº“

**è§£å†³æ­¥éª¤**ï¼š
```bash
# 1. æŸ¥æ‰¾ç°æœ‰OpenSSLåº“
find /usr -name "libssl.so*" 2>/dev/null

# 2. åˆ›å»ºè½¯é“¾æ¥(å¦‚æœç‰ˆæœ¬æ¥è¿‘)
ln -s /usr/lib64/libssl.so.1.0.0 /usr/lib64/libssl.so.10

# 3. æˆ–è€…å®‰è£…å¯¹åº”ç‰ˆæœ¬
yum install openssl-libs
```
</details>

<details>
<summary>ğŸ“‹ é—®é¢˜2: MySQLç¼–è¯‘æ—¶æ‰¾ä¸åˆ°å¼€å‘å¤´æ–‡ä»¶</summary>

**åŸå› **ï¼šç¼ºå°‘å¼€å‘ç‰ˆæœ¬çš„ä¾èµ–åº“

**è§£å†³æ–¹æ³•**ï¼š
```bash
# CentOS/RHELç³»ç»Ÿ
yum install openssl-devel zlib-devel ncurses-devel

# Ubuntu/Debianç³»ç»Ÿ  
apt-get install libssl-dev zlib1g-dev libncurses5-dev
```
</details>

---

## 4. ğŸ› ï¸ ç¼–è¯‘å·¥å…·é“¾é…ç½®


### 4.1 åŸºç¡€ç¼–è¯‘ç¯å¢ƒ


**ğŸ”§ ç¼–è¯‘å·¥å…·é“¾ç»„æˆ**ï¼š

```
MySQLç¼–è¯‘éœ€è¦çš„å·¥å…·:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ gcc/g++     (C/C++ç¼–è¯‘å™¨)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ make        (æ„å»ºå·¥å…·)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ cmake       (é…ç½®ç”Ÿæˆå™¨)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bison       (è¯­æ³•è§£æå™¨ç”Ÿæˆ)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ pkg-config  (åº“é…ç½®ç®¡ç†)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“¦ å¿«é€Ÿå®‰è£…ç¼–è¯‘ç¯å¢ƒ**ï¼š

```bash
# CentOS/RHEL ç³»ç»Ÿ
yum groupinstall "Development Tools"
yum install cmake bison

# Ubuntu/Debian ç³»ç»Ÿ
apt-get install build-essential cmake bison

# éªŒè¯å®‰è£…
gcc --version
cmake --version
make --version
```

### 4.2 ç¼–è¯‘é€‰é¡¹é…ç½®


**âš™ï¸ MySQLç¼–è¯‘é…ç½®ç¤ºä¾‹**ï¼š

```bash
# åˆ›å»ºç¼–è¯‘ç›®å½•
mkdir mysql-build && cd mysql-build

# CMakeé…ç½® (å…³é”®å‚æ•°è¯´æ˜)
cmake ../mysql-8.0.35 \
  -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \     # å®‰è£…è·¯å¾„
  -DMYSQL_DATADIR=/data/mysql \                 # æ•°æ®ç›®å½•
  -DWITH_SSL=system \                           # ä½¿ç”¨ç³»ç»ŸOpenSSL
  -DWITH_ZLIB=system \                          # ä½¿ç”¨ç³»ç»Ÿzlib
  -DDEFAULT_CHARSET=utf8mb4 \                   # é»˜è®¤å­—ç¬¦é›†
  -DDEFAULT_COLLATION=utf8mb4_general_ci        # é»˜è®¤æ’åºè§„åˆ™
```

> ğŸ’¡ **é…ç½®ç†è§£**ï¼šCMAKEé€‰é¡¹å°±åƒå»ºæˆ¿æ—¶çš„è®¾è®¡å›¾çº¸ï¼Œå†³å®šäº†MySQLçš„åŠŸèƒ½ç‰¹æ€§å’Œä¾èµ–å…³ç³»

---

## 5. ğŸ“¦ åŒ…ç®¡ç†å·¥å…·ä½¿ç”¨


### 5.1 yum/dnfåŒ…ç®¡ç† (CentOS/RHEL)


**ğŸ” ä¾èµ–åŒ…æœç´¢ä¸å®‰è£…**ï¼š

```bash
# æœç´¢MySQLç›¸å…³åŒ…
yum search mysql | grep -i server

# æŸ¥çœ‹åŒ…çš„è¯¦ç»†ä¿¡æ¯å’Œä¾èµ–
yum info mysql-server
yum deplist mysql-server

# å®‰è£…MySQLåŠä¾èµ–
yum install mysql-server

# åªä¸‹è½½ä¸å®‰è£…(ç¦»çº¿ç¯å¢ƒå‡†å¤‡)
yum install --downloadonly --downloaddir=/tmp/mysql mysql-server
```

**ğŸ“‹ MySQLå®˜æ–¹ä»“åº“é…ç½®**ï¼š

```bash
# æ·»åŠ MySQLå®˜æ–¹ä»“åº“
wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
rpm -ivh mysql80-community-release-el7-3.noarch.rpm

# æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬
yum repolist | grep mysql
yum --disablerepo="*" --enablerepo="mysql*" list available
```

### 5.2 aptåŒ…ç®¡ç† (Ubuntu/Debian)


**ğŸ” APTåŒ…ç®¡ç†æ“ä½œ**ï¼š

```bash
# æ›´æ–°åŒ…åˆ—è¡¨
apt update

# æœç´¢MySQLåŒ…
apt search mysql-server

# æŸ¥çœ‹åŒ…ä¾èµ–å…³ç³»
apt depends mysql-server
apt rdepends mysql-server  # åå‘ä¾èµ–

# å®‰è£…æŒ‡å®šç‰ˆæœ¬
apt install mysql-server=8.0.35-0ubuntu0.20.04.1
```

### 5.3 åŒ…ç®¡ç†æœ€ä½³å®è·µ


**âœ… ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š

```bash
# 1. é”å®šåŒ…ç‰ˆæœ¬é˜²æ­¢æ„å¤–å‡çº§
yum versionlock mysql-server
# æˆ–è€…
apt-mark hold mysql-server

# 2. å¤‡ä»½å½“å‰åŒ…çŠ¶æ€
yum list installed > /backup/packages-$(date +%Y%m%d).list
dpkg --get-selections > /backup/packages-$(date +%Y%m%d).list

# 3. ç¦»çº¿å®‰è£…åŒ…å‡†å¤‡
mkdir -p /backup/rpms
yum install --downloadonly --downloaddir=/backup/rpms mysql-server
```

---

## 6. ğŸ”’ ç¯å¢ƒéš”ç¦»ç­–ç•¥


### 6.1 è™šæ‹Ÿç¯å¢ƒéš”ç¦»æ¦‚å¿µ


**ğŸ¯ éš”ç¦»çš„å¿…è¦æ€§**ï¼š

```
æ— éš”ç¦»ç¯å¢ƒé—®é¢˜:
å¼€å‘ç¯å¢ƒ â†â†’ æµ‹è¯•ç¯å¢ƒ â†â†’ ç”Ÿäº§ç¯å¢ƒ
    â†“           â†“           â†“
  æ··ä¹±ä¾èµ–    ç‰ˆæœ¬å†²çª    æ„å¤–å½±å“

éš”ç¦»åçš„ç¯å¢ƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼€å‘ç¯å¢ƒ   â”‚ â”‚  æµ‹è¯•ç¯å¢ƒ   â”‚ â”‚  ç”Ÿäº§ç¯å¢ƒ   â”‚
â”‚ç‹¬ç«‹ä¾èµ–ç®¡ç† â”‚ â”‚ç‹¬ç«‹ä¾èµ–ç®¡ç† â”‚ â”‚ç‹¬ç«‹ä¾èµ–ç®¡ç† â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Pythonè™šæ‹Ÿç¯å¢ƒç®¡ç†


**ğŸ MySQLç®¡ç†å·¥å…·çš„Pythonä¾èµ–éš”ç¦»**ï¼š

```bash
# åˆ›å»ºä¸“ç”¨Pythonç¯å¢ƒ
python3 -m venv /opt/mysql-tools-env

# æ¿€æ´»ç¯å¢ƒ
source /opt/mysql-tools-env/bin/activate

# å®‰è£…MySQLç®¡ç†å·¥å…·ä¾èµ–
pip install mysql-connector-python
pip install mysqlclient
pip install percona-toolkit

# ç”Ÿæˆä¾èµ–æ¸…å•
pip freeze > /opt/mysql-tools-env/requirements.txt

# åœç”¨ç¯å¢ƒ
deactivate
```

**ğŸ“‹ ç®¡ç†è„šæœ¬ç¤ºä¾‹**ï¼š

```bash
#!/bin/bash
# MySQLå·¥å…·ç¯å¢ƒç®¡ç†è„šæœ¬

VENV_PATH="/opt/mysql-tools-env"
SCRIPT_NAME="mysql-backup.py"

# åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡ŒMySQLå·¥å…·
run_mysql_tool() {
    if [ -f "$VENV_PATH/bin/activate" ]; then
        source $VENV_PATH/bin/activate
        python3 $SCRIPT_NAME "$@"
        deactivate
    else
        echo "âŒ MySQLå·¥å…·ç¯å¢ƒæœªæ‰¾åˆ°ï¼Œè¯·å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"
        exit 1
    fi
}

run_mysql_tool "$@"
```

### 6.3 å®¹å™¨åŒ–ä¾èµ–ç®¡ç†


**ğŸ³ Dockerç¯å¢ƒéš”ç¦»**ï¼š

```dockerfile
# MySQLè¿è¡Œç¯å¢ƒDockerfile
FROM centos:7

# å®‰è£…åŸºç¡€ä¾èµ–
RUN yum update -y && \
    yum install -y wget gcc cmake make bison && \
    yum clean all

# å¤åˆ¶MySQLå®‰è£…åŒ…
COPY mysql-8.0.35-linux-glibc2.12-x86_64.tar.xz /tmp/

# é…ç½®MySQLç¯å¢ƒ
RUN groupadd mysql && \
    useradd -r -g mysql -s /bin/false mysql

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV MYSQL_HOME=/usr/local/mysql
ENV PATH=$MYSQL_HOME/bin:$PATH

EXPOSE 3306
```

---

## 7. âš¡ ä¾èµ–å†²çªè§£å†³


### 7.1 å¸¸è§å†²çªåœºæ™¯è¯†åˆ«


**ğŸš¨ å…¸å‹å†²çªç±»å‹**ï¼š

| å†²çªç±»å‹ | **è¡¨ç°** | **åŸå› ** | **å½±å“** |
|---------|---------|---------|---------|
| **ç‰ˆæœ¬å†²çª** | `åº“ç‰ˆæœ¬ä¸åŒ¹é…é”™è¯¯` | `åº”ç”¨éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒä¸€åº“` | `ç¨‹åºå¯åŠ¨å¤±è´¥` |
| **è·¯å¾„å†²çª** | `æ‰¾ä¸åˆ°åº“æ–‡ä»¶` | `åº“å®‰è£…åœ¨éæ ‡å‡†ä½ç½®` | `åŠ¨æ€é“¾æ¥å¤±è´¥` |
| **æƒé™å†²çª** | `æƒé™æ‹’ç»é”™è¯¯` | `ç”¨æˆ·æ— æƒè®¿é—®ä¾èµ–æ–‡ä»¶` | `åŠŸèƒ½å—é™` |
| **æ¶æ„å†²çª** | `æ¶æ„ä¸åŒ¹é…é”™è¯¯` | `32ä½åº“ä¸64ä½ç¨‹åºä¸å…¼å®¹` | `æ— æ³•åŠ è½½åº“` |

### 7.2 ä¾èµ–å†²çªæ’æŸ¥æ–¹æ³•


**ğŸ” ç³»ç»ŸåŒ–æ’æŸ¥æµç¨‹**ï¼š

```bash
# 1. æ£€æŸ¥é”™è¯¯æ—¥å¿—
tail -f /var/log/mysql/error.log
journalctl -u mysql -f

# 2. éªŒè¯åº“æ–‡ä»¶å­˜åœ¨æ€§
ls -la /usr/lib64/libssl*
ldd /usr/bin/mysql | grep "not found"

# 3. æ£€æŸ¥æƒé™é—®é¢˜  
sudo -u mysql ldd /usr/bin/mysql
namei -l /usr/lib64/libssl.so.1

# 4. æ¶æ„å…¼å®¹æ€§æ£€æŸ¥
file /usr/bin/mysql
file /usr/lib64/libssl.so.1
```

**ğŸ› ï¸ å†²çªè§£å†³å·¥å…·è„šæœ¬**ï¼š

```bash
#!/bin/bash
# MySQLä¾èµ–å†²çªè¯Šæ–­è„šæœ¬

echo "=== MySQLä¾èµ–å†²çªè¯Šæ–­ ==="

# æ£€æŸ¥MySQLè¿›ç¨‹çŠ¶æ€
if pgrep mysql > /dev/null; then
    echo "âœ… MySQLè¿›ç¨‹æ­£åœ¨è¿è¡Œ"
else
    echo "âŒ MySQLè¿›ç¨‹æœªè¿è¡Œï¼Œæ£€æŸ¥å¯åŠ¨é—®é¢˜"
fi

# æ£€æŸ¥å…³é”®åº“æ–‡ä»¶
echo -e "\n=== å…³é”®åº“æ–‡ä»¶æ£€æŸ¥ ==="
libs=("libssl" "libcrypto" "libz" "libncurses")
for lib in "${libs[@]}"; do
    if ldconfig -p | grep -q "$lib"; then
        echo "âœ… $lib: å¯ç”¨"
        # æ˜¾ç¤ºå…·ä½“è·¯å¾„å’Œç‰ˆæœ¬
        ldconfig -p | grep "$lib" | head -1
    else
        echo "âŒ $lib: ç¼ºå¤±"
    fi
done

# æ£€æŸ¥MySQLäºŒè¿›åˆ¶æ–‡ä»¶ä¾èµ–
echo -e "\n=== MySQLä¾èµ–å®Œæ•´æ€§æ£€æŸ¥ ==="
mysql_bin="/usr/bin/mysql"
if [ -f "$mysql_bin" ]; then
    missing_deps=$(ldd "$mysql_bin" | grep "not found")
    if [ -z "$missing_deps" ]; then
        echo "âœ… MySQLæ‰€æœ‰ä¾èµ–æ»¡è¶³"
    else
        echo "âŒ MySQLç¼ºå¤±ä¾èµ–:"
        echo "$missing_deps"
    fi
else
    echo "âŒ MySQLäºŒè¿›åˆ¶æ–‡ä»¶ä¸å­˜åœ¨: $mysql_bin"
fi
```

### 7.3 å…·ä½“è§£å†³ç­–ç•¥


**ğŸ”§ é’ˆå¯¹æ€§è§£å†³æ–¹æ¡ˆ**ï¼š

<details>
<summary>ğŸ’¡ ç­–ç•¥1: ç‰ˆæœ¬å†²çªè§£å†³</summary>

```bash
# åœºæ™¯ï¼šMySQLéœ€è¦libssl.so.1.1ä½†ç³»ç»Ÿåªæœ‰1.0
# è§£å†³æ–¹æ¡ˆï¼šå®‰è£…å…¼å®¹ç‰ˆæœ¬æˆ–åˆ›å»ºè½¯é“¾æ¥

# æ–¹æ³•1ï¼šå®‰è£…å…¼å®¹ç‰ˆæœ¬
yum install compat-openssl10

# æ–¹æ³•2ï¼šæ‰‹åŠ¨è½¯é“¾æ¥(è°¨æ…ä½¿ç”¨)
ln -s /usr/lib64/libssl.so.1.0.0 /usr/lib64/libssl.so.1.1

# æ–¹æ³•3ï¼šä½¿ç”¨æ›¿ä»£åŒ…
yum install openssl11-libs
```
</details>

<details>
<summary>ğŸ’¡ ç­–ç•¥2: è·¯å¾„é—®é¢˜è§£å†³</summary>

```bash
# åœºæ™¯ï¼šè‡ªç¼–è¯‘MySQLçš„åº“è·¯å¾„é—®é¢˜
# è§£å†³ï¼šé…ç½®ç³»ç»Ÿåº“æœç´¢è·¯å¾„

# åˆ›å»ºé…ç½®æ–‡ä»¶
echo "/usr/local/mysql/lib" > /etc/ld.so.conf.d/mysql.conf
ldconfig

# éªŒè¯é…ç½®ç”Ÿæ•ˆ
ldconfig -p | grep mysql
```
</details>

---

## 8. ğŸ­ ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ


### 8.1 ä¾èµ–ç®¡ç†ç­–ç•¥


**ğŸ¯ ç”Ÿäº§ç¯å¢ƒåŸåˆ™**ï¼š

```
ç”Ÿäº§ç¯å¢ƒä¾èµ–ç®¡ç†é‡‘å­—å¡”:
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   åº”ç”¨ç¨‹åº      â”‚ â† MySQL Server
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚   è¿è¡Œæ—¶ä¾èµ–    â”‚ â† ç²¾ç¡®ç‰ˆæœ¬æ§åˆ¶
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
        â”‚   ç³»ç»ŸåŸºç¡€åº“    â”‚ â† ç¨³å®šç‰ˆæœ¬é€‰æ‹©
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚   æ“ä½œç³»ç»Ÿ      â”‚ â† LTSé•¿æœŸæ”¯æŒç‰ˆ
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‹ ä¾èµ–é”å®šæ£€æŸ¥æ¸…å•**ï¼š

- [ ] **ç‰ˆæœ¬å›ºå®š**ï¼šæ‰€æœ‰å…³é”®ä¾èµ–ä½¿ç”¨æ˜ç¡®ç‰ˆæœ¬å·
- [ ] **æµ‹è¯•éªŒè¯**ï¼šæ–°ä¾èµ–åœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯  
- [ ] **å›æ»šå‡†å¤‡**ï¼šä¿ç•™æ—§ç‰ˆæœ¬ä»¥å¤‡å¿«é€Ÿå›æ»š
- [ ] **æ–‡æ¡£è®°å½•**ï¼šä¾èµ–å˜æ›´åŸå› å’Œå½±å“èŒƒå›´
- [ ] **ç›‘æ§å‘Šè­¦**ï¼šä¾èµ–æœåŠ¡çŠ¶æ€ç›‘æ§

### 8.2 ä¾èµ–å®‰å…¨æ‰«æ


**ğŸ”’ å®‰å…¨æ¼æ´æ£€æµ‹**ï¼š

```bash
# æ£€æŸ¥å·²å®‰è£…åŒ…çš„å®‰å…¨æ¼æ´
yum updateinfo list security
apt list --upgradable

# ä½¿ç”¨ä¸“ä¸šå®‰å…¨æ‰«æå·¥å…·
# å®‰è£…OpenSCAP
yum install openscap-scanner

# æ‰«æç³»ç»Ÿå®‰å…¨çŠ¶æ€  
oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_pci-dss \
  --results scan-results.xml \
  /usr/share/xml/scap/ssg/content/ssg-centos7-ds.xml
```

### 8.3 è‡ªåŠ¨åŒ–ä¾èµ–ç®¡ç†


**ğŸ¤– ä¾èµ–æ›´æ–°è‡ªåŠ¨åŒ–è„šæœ¬**ï¼š

```bash
#!/bin/bash
# MySQLç¯å¢ƒä¾èµ–æ£€æŸ¥å’Œæ›´æ–°è„šæœ¬

LOG_FILE="/var/log/mysql-dependency-check.log"
MAIL_TO="admin@company.com"

log_message() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" | tee -a "$LOG_FILE"
}

# æ£€æŸ¥å®‰å…¨æ›´æ–°
check_security_updates() {
    log_message "æ£€æŸ¥å®‰å…¨æ›´æ–°..."
    
    if command -v yum &> /dev/null; then
        security_updates=$(yum --security check-update 2>/dev/null | grep -c "needed for security")
        if [ "$security_updates" -gt 0 ]; then
            log_message "å‘ç° $security_updates ä¸ªå®‰å…¨æ›´æ–°"
            yum --security check-update | mail -s "MySQLæœåŠ¡å™¨å®‰å…¨æ›´æ–°é€šçŸ¥" "$MAIL_TO"
        fi
    fi
}

# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
check_mysql_status() {
    if systemctl is-active --quiet mysql; then
        log_message "âœ… MySQLæœåŠ¡è¿è¡Œæ­£å¸¸"
    else
        log_message "âŒ MySQLæœåŠ¡å¼‚å¸¸"
        systemctl status mysql | mail -s "MySQLæœåŠ¡çŠ¶æ€å¼‚å¸¸" "$MAIL_TO"
    fi
}

# ä¸»æ‰§è¡Œæµç¨‹
main() {
    log_message "å¼€å§‹ä¾èµ–ç®¡ç†æ£€æŸ¥"
    check_security_updates
    check_mysql_status
    log_message "ä¾èµ–ç®¡ç†æ£€æŸ¥å®Œæˆ"
}

main
```

### 8.4 å®¹å™¨åŒ–ç”Ÿäº§éƒ¨ç½²


**ğŸ³ ç”Ÿäº§çº§MySQLå®¹å™¨é…ç½®**ï¼š

```yaml
# docker-compose.yml
version: '3.8'
services:
  mysql:
    image: mysql:8.0.35
    container_name: mysql-prod
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: ${MYSQL_DATABASE}
    volumes:
      - mysql-data:/var/lib/mysql
      - ./config/my.cnf:/etc/mysql/my.cnf:ro
      - ./logs:/var/log/mysql
    ports:
      - "3306:3306"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
      timeout: 20s
      retries: 10
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    cap_add:
      - DAC_OVERRIDE
      - SETUID
      - SETGID

volumes:
  mysql-data:
    driver: local
    driver_opts:
      type: none
      device: /data/mysql
      o: bind
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ä¾èµ–ç®¡ç†æœ¬è´¨ï¼šç¡®ä¿MySQLè¿è¡Œç¯å¢ƒçš„å®Œæ•´æ€§å’Œå…¼å®¹æ€§
ğŸ”¸ å…³é”®å·¥å…·å‘½ä»¤ï¼šlddæ£€æŸ¥ä¾èµ–ã€ldconfigé…ç½®è·¯å¾„ã€åŒ…ç®¡ç†å·¥å…·
ğŸ”¸ ç¯å¢ƒéš”ç¦»é‡è¦æ€§ï¼šé¿å…ä¸åŒåº”ç”¨å’Œç¯å¢ƒé—´çš„ä¾èµ–å†²çª
ğŸ”¸ ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼šç”Ÿäº§ç¯å¢ƒä¾èµ–ç‰ˆæœ¬é”å®šå’Œå˜æ›´ç®¡æ§
ğŸ”¸ å®‰å…¨æ›´æ–°ç®¡ç†ï¼šåŠæ—¶ä¿®å¤ä¾èµ–åº“å®‰å…¨æ¼æ´
```

### 9.2 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ æ—¥å¸¸æ“ä½œè¦ç‚¹**ï¼š
- **å®‰è£…å‰æ£€æŸ¥**ï¼šéªŒè¯ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ–å®Œæ•´æ€§
- **ç‰ˆæœ¬è®°å½•**ï¼šè¯¦ç»†è®°å½•å½“å‰ç¯å¢ƒçš„ä¾èµ–ç‰ˆæœ¬çŠ¶æ€
- **æµ‹è¯•éªŒè¯**ï¼šä¾èµ–å˜æ›´åçš„åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- **ç›‘æ§é¢„è­¦**ï¼šå»ºç«‹ä¾èµ–çŠ¶æ€ç›‘æ§å’Œå¼‚å¸¸å‘Šè­¦æœºåˆ¶

**ğŸš€ è¿›é˜¶ç®¡ç†æŠ€å·§**ï¼š
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šä½¿ç”¨Dockerå®ç°ä¾èµ–ç¯å¢ƒæ ‡å‡†åŒ–
- **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šç¼–å†™ä¾èµ–æ£€æŸ¥å’Œç»´æŠ¤è‡ªåŠ¨åŒ–è„šæœ¬
- **å®‰å…¨æ‰«æ**ï¼šå®šæœŸè¿›è¡Œä¾èµ–åº“å®‰å…¨æ¼æ´æ‰«æ
- **æ–‡æ¡£ç»´æŠ¤**ï¼šå»ºç«‹å®Œæ•´çš„ä¾èµ–ç®¡ç†æ“ä½œæ‰‹å†Œ

> ğŸ’¡ **æ ¸å¿ƒè®°å¿†**ï¼šä¾èµ–ç®¡ç†æ˜¯MySQLç¨³å®šè¿è¡Œçš„åŸºç¡€ï¼Œ"é¢„é˜²èƒœäºæ²»ç–—"çš„åŸåˆ™åœ¨ä¾èµ–ç®¡ç†ä¸­å°¤ä¸ºé‡è¦ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„æ£€æŸ¥ã€è§„èŒƒåŒ–çš„æµç¨‹å’Œè‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œå¯ä»¥å¤§å¤§é™ä½å› ä¾èµ–é—®é¢˜å¯¼è‡´çš„ç³»ç»Ÿæ•…éšœé£é™©ã€‚