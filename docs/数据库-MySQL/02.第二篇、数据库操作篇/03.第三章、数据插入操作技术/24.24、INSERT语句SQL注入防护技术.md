---
title: 24ã€INSERTè¯­å¥SQLæ³¨å…¥é˜²æŠ¤æŠ€æœ¯
---
## ğŸ“š ç›®å½•

1. [INSERTæ³¨å…¥åŸºç¡€æ¦‚å¿µ](#1-INSERTæ³¨å…¥åŸºç¡€æ¦‚å¿µ)
2. [INSERTæ³¨å…¥ç‚¹è¯†åˆ«ä¸åˆ†æ](#2-INSERTæ³¨å…¥ç‚¹è¯†åˆ«ä¸åˆ†æ)
3. [å‚æ•°åŒ–æŸ¥è¯¢é˜²æŠ¤æœºåˆ¶](#3-å‚æ•°åŒ–æŸ¥è¯¢é˜²æŠ¤æœºåˆ¶)
4. [åŠ¨æ€SQLå®‰å…¨æ„å»ºæŠ€æœ¯](#4-åŠ¨æ€SQLå®‰å…¨æ„å»ºæŠ€æœ¯)
5. [è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ç­–ç•¥](#5-è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ç­–ç•¥)
6. [é¢„ç¼–è¯‘è¯­å¥æ·±å…¥åº”ç”¨](#6-é¢„ç¼–è¯‘è¯­å¥æ·±å…¥åº”ç”¨)
7. [INSERTæ³¨å…¥é˜²æŠ¤æœ€ä½³å®è·µ](#7-INSERTæ³¨å…¥é˜²æŠ¤æœ€ä½³å®è·µ)
8. [å®‰å…¨ç¼–ç è§„èŒƒä¸æ£€æŸ¥](#8-å®‰å…¨ç¼–ç è§„èŒƒä¸æ£€æŸ¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›¡ï¸ INSERTæ³¨å…¥åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯INSERT SQLæ³¨å…¥


**åŸºæœ¬å®šä¹‰**ï¼šINSERT SQLæ³¨å…¥æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡åœ¨INSERTè¯­å¥çš„æ•°æ®è¾“å…¥ä¸­æ’å…¥æ¶æ„SQLä»£ç ï¼Œä»è€Œæ”¹å˜åŸå§‹SQLè¯­å¥çš„æ‰§è¡Œé€»è¾‘ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®æ³„éœ²ã€æ•°æ®ç¯¡æ”¹æˆ–ç³»ç»Ÿæƒé™æå‡ã€‚

```
æ­£å¸¸INSERTæ“ä½œï¼š
ç”¨æˆ·è¾“å…¥ï¼šç”¨æˆ·å="å¼ ä¸‰", é‚®ç®±="zhang@email.com"
ç”ŸæˆSQLï¼šINSERT INTO users (name, email) VALUES ('å¼ ä¸‰', 'zhang@email.com')

INSERTæ³¨å…¥æ”»å‡»ï¼š
ç”¨æˆ·è¾“å…¥ï¼šç”¨æˆ·å="å¼ ä¸‰'); DROP TABLE users; --", é‚®ç®±="evil@hack.com"
ç”ŸæˆSQLï¼šINSERT INTO users (name, email) VALUES ('å¼ ä¸‰'); DROP TABLE users; --', 'evil@hack.com')
ç»“æœï¼šæ‰§è¡Œäº†åˆ é™¤è¡¨çš„æ¶æ„æ“ä½œï¼
```

### 1.2 INSERTæ³¨å…¥çš„å±å®³æ€§


**æ”»å‡»åæœåˆ†æ**ï¼š

```
æ•°æ®å±‚é¢å±å®³ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ æ•°æ®ç¯¡æ”¹ï¼šæ’å…¥è™šå‡æˆ–æ¶æ„æ•°æ®      â”‚
â”‚ ğŸ”´ æ•°æ®åˆ é™¤ï¼šé€šè¿‡æ³¨å…¥åˆ é™¤é‡è¦æ•°æ®    â”‚
â”‚ ğŸ”´ æ•°æ®æ³„éœ²ï¼šæŸ¥è¯¢å¹¶è¿”å›æ•æ„Ÿä¿¡æ¯      â”‚
â”‚ ğŸ”´ æƒé™æå‡ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦æˆ·          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç³»ç»Ÿå±‚é¢å±å®³ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ æ•°æ®åº“ç»“æ„ç ´åï¼šåˆ é™¤è¡¨ã€ç´¢å¼•ç­‰    â”‚
â”‚ ğŸ”´ ç³»ç»Ÿå‡½æ•°è°ƒç”¨ï¼šæ‰§è¡Œç³»ç»Ÿå‘½ä»¤        â”‚
â”‚ ğŸ”´ æ•°æ®åº“ç”¨æˆ·ææƒï¼šè·å–æ›´é«˜æƒé™      â”‚
â”‚ ğŸ”´ æœåŠ¡æ‹’ç»ï¼šå¤§é‡æ’å…¥åƒåœ¾æ•°æ®        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 INSERTæ³¨å…¥vså…¶ä»–SQLæ³¨å…¥çš„åŒºåˆ«


| æ³¨å…¥ç±»å‹ | **ä¸»è¦ç›®æ ‡** | **æ”»å‡»æ–¹å¼** | **æ£€æµ‹éš¾åº¦** | **é˜²æŠ¤é‡ç‚¹** |
|---------|-------------|-------------|-------------|-------------|
| **SELECTæ³¨å…¥** | `æ•°æ®æŸ¥çœ‹æ³„éœ²` | `ä¿®æ”¹WHEREæ¡ä»¶` | `å®¹æ˜“å‘ç°` | `æŸ¥è¯¢ç»“æœè¿‡æ»¤` |
| **UPDATEæ³¨å…¥** | `æ•°æ®ç¯¡æ”¹` | `ä¿®æ”¹SETæˆ–WHERE` | `ä¸­ç­‰` | `æ›´æ–°æƒé™æ§åˆ¶` |
| **INSERTæ³¨å…¥** | `æ•°æ®æ’å…¥+æ‰§è¡Œ` | `VALUESä¸­æ’å…¥ä»£ç ` | `è¾ƒéš¾å‘ç°` | `è¾“å…¥ä¸¥æ ¼éªŒè¯` |
| **DELETEæ³¨å…¥** | `æ•°æ®åˆ é™¤` | `ä¿®æ”¹WHEREæ¡ä»¶` | `å®¹æ˜“å‘ç°` | `åˆ é™¤æƒé™æ§åˆ¶` |

**INSERTæ³¨å…¥çš„ç‰¹æ®Šæ€§**ï¼š
- **éšè”½æ€§å¼º**ï¼šæ’å…¥æ“ä½œé€šå¸¸ä¸ä¼šç«‹å³æ˜¾ç¤ºç»“æœ
- **ç ´åæ€§å¤§**ï¼šå¯ä»¥é€šè¿‡æ’å…¥è¯­å¥æ‰§è¡Œä»»æ„SQL
- **æ£€æµ‹å›°éš¾**ï¼šæ¶æ„æ•°æ®å¯èƒ½æ··åœ¨æ­£å¸¸æ•°æ®ä¸­
- **å½±å“æŒä¹…**ï¼šæ¶æ„æ•°æ®è¢«æŒä¹…åŒ–å­˜å‚¨

---

## 2. ğŸ” INSERTæ³¨å…¥ç‚¹è¯†åˆ«ä¸åˆ†æ


### 2.1 å¸¸è§æ³¨å…¥ç‚¹è¯†åˆ«


**å…¸å‹çš„INSERTæ³¨å…¥ç‚¹**ï¼š

```
ç”¨æˆ·æ³¨å†Œåœºæ™¯ï¼š
æ³¨å†Œè¡¨å• â†’ INSERT INTO users (username, password, email) VALUES (?, ?, ?)
æ³¨å…¥ç‚¹ï¼šç”¨æˆ·åã€å¯†ç ã€é‚®ç®±å­—æ®µ

å•†å“æ·»åŠ åœºæ™¯ï¼š
å•†å“å½•å…¥ â†’ INSERT INTO products (name, price, description) VALUES (?, ?, ?)
æ³¨å…¥ç‚¹ï¼šå•†å“åç§°ã€ä»·æ ¼ã€æè¿°å­—æ®µ

è¯„è®ºæäº¤åœºæ™¯ï¼š
è¯„è®ºç³»ç»Ÿ â†’ INSERT INTO comments (user_id, content, time) VALUES (?, ?, ?)
æ³¨å…¥ç‚¹ï¼šè¯„è®ºå†…å®¹å­—æ®µ

æ–‡ä»¶ä¸Šä¼ åœºæ™¯ï¼š
æ–‡ä»¶ä¿¡æ¯ â†’ INSERT INTO files (filename, path, size) VALUES (?, ?, ?)
æ³¨å…¥ç‚¹ï¼šæ–‡ä»¶åå­—æ®µ
```

### 2.2 è„†å¼±ä»£ç è¯†åˆ«


**å±é™©çš„ä»£ç æ¨¡å¼**ï¼š

```java
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥å­—ç¬¦ä¸²æ‹¼æ¥
public void registerUser(String username, String email, String password) {
    String sql = "INSERT INTO users (username, email, password) VALUES ('" 
                + username + "', '" + email + "', '" + password + "')";
    
    Statement stmt = connection.createStatement();
    stmt.executeUpdate(sql);  // é«˜é£é™©ï¼ç”¨æˆ·è¾“å…¥ç›´æ¥æ‹¼æ¥åˆ°SQLä¸­
}

// æ”»å‡»ç¤ºä¾‹
username = "admin'); INSERT INTO users (username, password, role) VALUES ('hacker', '123456', 'admin'); --"

// ç”Ÿæˆçš„æ¶æ„SQLï¼š
INSERT INTO users (username, email, password) VALUES ('admin'); 
INSERT INTO users (username, password, role) VALUES ('hacker', '123456', 'admin'); 
--', 'user@email.com', 'password123')

// ç»“æœï¼šä¸ä»…æ³¨å†Œäº†æ­£å¸¸ç”¨æˆ·ï¼Œè¿˜åˆ›å»ºäº†ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼
```

### 2.3 æ³¨å…¥æ”»å‡»å‘é‡åˆ†æ


**å¸¸è§æ”»å‡»æ¨¡å¼**ï¼š

```
æ¨¡å¼ä¸€ï¼šå¤šè¯­å¥æ³¨å…¥
è¾“å…¥ï¼šnormal_data'); [æ¶æ„SQLè¯­å¥]; --
ç›®çš„ï¼šåœ¨INSERTåæ‰§è¡Œé¢å¤–çš„SQLå‘½ä»¤

æ¨¡å¼äºŒï¼šè”åˆæ³¨å…¥
è¾“å…¥ï¼šnormal_data') UNION SELECT * FROM sensitive_table; --
ç›®çš„ï¼šé€šè¿‡UNIONæŸ¥è¯¢è·å–æ•æ„Ÿæ•°æ®

æ¨¡å¼ä¸‰ï¼šå­æŸ¥è¯¢æ³¨å…¥
è¾“å…¥ï¼šnormal_data', (SELECT password FROM admin WHERE id=1)); --
ç›®çš„ï¼šé€šè¿‡å­æŸ¥è¯¢è·å–å…¶ä»–è¡¨çš„æ•°æ®

æ¨¡å¼å››ï¼šå‡½æ•°æ³¨å…¥
è¾“å…¥ï¼šnormal_data'); SELECT load_file('/etc/passwd'); --
ç›®çš„ï¼šè°ƒç”¨å±é™©çš„æ•°æ®åº“å‡½æ•°
```

**æ³¨å…¥æ£€æµ‹æŠ€å·§**ï¼š

```
æ‰‹å·¥æ£€æµ‹æ–¹æ³•ï¼š

1. å•å¼•å·æµ‹è¯•
è¾“å…¥ï¼štest'
è§‚å¯Ÿï¼šæ˜¯å¦å‡ºç°SQLè¯­æ³•é”™è¯¯

2. é€»è¾‘æµ‹è¯•
è¾“å…¥ï¼štest' AND '1'='1
è§‚å¯Ÿï¼šæ˜¯å¦æ­£å¸¸æ‰§è¡Œ

3. æ—¶é—´å»¶è¿Ÿæµ‹è¯•
è¾“å…¥ï¼štest'; WAITFOR DELAY '00:00:05'; --
è§‚å¯Ÿï¼šæ˜¯å¦å‡ºç°æ˜æ˜¾å»¶è¿Ÿ

4. é”™è¯¯å›æ˜¾æµ‹è¯•
è¾“å…¥ï¼štest' AND (SELECT COUNT(*) FROM information_schema.tables)>0; --
è§‚å¯Ÿï¼šæ˜¯å¦è¿”å›æ•°æ®åº“ç»“æ„ä¿¡æ¯
```

---

## 3. ğŸ”’ å‚æ•°åŒ–æŸ¥è¯¢é˜²æŠ¤æœºåˆ¶


### 3.1 å‚æ•°åŒ–æŸ¥è¯¢åŸç†


**ä»€ä¹ˆæ˜¯å‚æ•°åŒ–æŸ¥è¯¢**ï¼š

å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆä¹Ÿå«é¢„ç¼–è¯‘è¯­å¥ï¼‰æ˜¯ä¸€ç§å°†SQLä»£ç ä¸æ•°æ®åˆ†ç¦»çš„æŠ€æœ¯ã€‚æ•°æ®åº“ä¼šå…ˆç¼–è¯‘SQLè¯­å¥ç»“æ„ï¼Œç„¶åå†å¡«å…¥å…·ä½“çš„æ•°æ®å€¼ï¼Œè¿™æ ·å°±ç¡®ä¿äº†ç”¨æˆ·è¾“å…¥æ°¸è¿œåªèƒ½ä½œä¸ºæ•°æ®ï¼Œè€Œä¸èƒ½æ”¹å˜SQLè¯­å¥çš„é€»è¾‘ç»“æ„ã€‚

```
ä¼ ç»Ÿæ‹¼æ¥æ–¹å¼ï¼š
SQLç»“æ„ + ç”¨æˆ·æ•°æ® = æœ€ç»ˆSQLè¯­å¥
"INSERT INTO users VALUES ('" + userInput + "')"

å‚æ•°åŒ–æŸ¥è¯¢æ–¹å¼ï¼š
ç¬¬1æ­¥ï¼šæ•°æ®åº“ç¼–è¯‘SQLæ¨¡æ¿
"INSERT INTO users VALUES (?)"

ç¬¬2æ­¥ï¼šå¡«å…¥å…·ä½“æ•°æ®
? = userInputï¼ˆä»…ä½œä¸ºæ•°æ®å€¼ï¼‰

å…³é”®åŒºåˆ«ï¼š
SQLç»“æ„å·²å›ºå®šï¼Œç”¨æˆ·è¾“å…¥æ— æ³•æ”¹å˜è¯­å¥é€»è¾‘
```

### 3.2 Javaä¸­çš„å‚æ•°åŒ–æŸ¥è¯¢å®ç°


**PreparedStatementä½¿ç”¨**ï¼š

```java
// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨PreparedStatement
public boolean registerUser(String username, String email, String password) {
    // SQLæ¨¡æ¿ï¼Œä½¿ç”¨?ä½œä¸ºå‚æ•°å ä½ç¬¦
    String sql = "INSERT INTO users (username, email, password, create_time) VALUES (?, ?, ?, ?)";
    
    try (PreparedStatement pstmt = connection.prepareStatement(sql)) {
        // å®‰å…¨åœ°è®¾ç½®å‚æ•°å€¼
        pstmt.setString(1, username);    // ç¬¬1ä¸ª?å¯¹åº”username
        pstmt.setString(2, email);       // ç¬¬2ä¸ª?å¯¹åº”email
        pstmt.setString(3, hashPassword(password));  // ç¬¬3ä¸ª?å¯¹åº”åŠ å¯†åçš„å¯†ç 
        pstmt.setTimestamp(4, new Timestamp(System.currentTimeMillis()));
        
        int result = pstmt.executeUpdate();
        return result > 0;
        
    } catch (SQLException e) {
        logger.error("ç”¨æˆ·æ³¨å†Œå¤±è´¥", e);
        return false;
    }
}

// ä¸ºä»€ä¹ˆè¿™æ ·å®‰å…¨ï¼Ÿ
// å³ä½¿username = "admin'); DROP TABLE users; --"
// æ•°æ®åº“ä¹Ÿä¼šå°†æ•´ä¸ªå­—ç¬¦ä¸²ä½œä¸ºusernameå­—æ®µçš„å€¼å­˜å‚¨
// è€Œä¸ä¼šæ‰§è¡Œå…¶ä¸­çš„SQLå‘½ä»¤
```

**æ‰¹é‡INSERTçš„å‚æ•°åŒ–å¤„ç†**ï¼š

```java
// âœ… æ‰¹é‡æ’å…¥çš„å®‰å…¨å®ç°
public boolean batchInsertProducts(List<Product> products) {
    String sql = "INSERT INTO products (name, price, category, description) VALUES (?, ?, ?, ?)";
    
    try (PreparedStatement pstmt = connection.prepareStatement(sql)) {
        connection.setAutoCommit(false);  // å¼€å¯äº‹åŠ¡
        
        for (Product product : products) {
            pstmt.setString(1, product.getName());
            pstmt.setBigDecimal(2, product.getPrice());
            pstmt.setString(3, product.getCategory());
            pstmt.setString(4, product.getDescription());
            
            pstmt.addBatch();  // æ·»åŠ åˆ°æ‰¹å¤„ç†
            
            // æ¯1000æ¡æäº¤ä¸€æ¬¡ï¼Œé¿å…å†…å­˜æº¢å‡º
            if (products.indexOf(product) % 1000 == 0) {
                pstmt.executeBatch();
                pstmt.clearBatch();
            }
        }
        
        pstmt.executeBatch();    // æ‰§è¡Œå‰©ä½™çš„æ‰¹å¤„ç†
        connection.commit();     // æäº¤äº‹åŠ¡
        return true;
        
    } catch (SQLException e) {
        connection.rollback();   // å›æ»šäº‹åŠ¡
        logger.error("æ‰¹é‡æ’å…¥å¤±è´¥", e);
        return false;
    }
}
```

### 3.3 å…¶ä»–è¯­è¨€çš„å‚æ•°åŒ–æŸ¥è¯¢


**Pythonç¤ºä¾‹**ï¼š

```python
# âœ… Pythonå®‰å…¨å®ç°
import sqlite3
from datetime import datetime

def register_user(username, email, password):
    # ä½¿ç”¨?ä½œä¸ºå‚æ•°å ä½ç¬¦
    sql = "INSERT INTO users (username, email, password, create_time) VALUES (?, ?, ?, ?)"
    
    try:
        cursor = connection.cursor()
        cursor.execute(sql, (username, email, hash_password(password), datetime.now()))
        connection.commit()
        return True
        
    except sqlite3.Error as e:
        print(f"æ³¨å†Œå¤±è´¥: {e}")
        connection.rollback()
        return False

# MySQLç‰ˆæœ¬ï¼ˆä½¿ç”¨%så ä½ç¬¦ï¼‰
import mysql.connector

def register_user_mysql(username, email, password):
    sql = "INSERT INTO users (username, email, password) VALUES (%s, %s, %s)"
    
    cursor = connection.cursor()
    cursor.execute(sql, (username, email, hash_password(password)))
    connection.commit()
```

**C#ç¤ºä¾‹**ï¼š

```csharp
// âœ… C#å®‰å…¨å®ç°
public bool RegisterUser(string username, string email, string password)
{
    string sql = "INSERT INTO users (username, email, password, create_time) VALUES (@username, @email, @password, @create_time)";
    
    using (SqlCommand cmd = new SqlCommand(sql, connection))
    {
        // ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
        cmd.Parameters.AddWithValue("@username", username);
        cmd.Parameters.AddWithValue("@email", email);
        cmd.Parameters.AddWithValue("@password", HashPassword(password));
        cmd.Parameters.AddWithValue("@create_time", DateTime.Now);
        
        try
        {
            int result = cmd.ExecuteNonQuery();
            return result > 0;
        }
        catch (SqlException ex)
        {
            logger.Error("ç”¨æˆ·æ³¨å†Œå¤±è´¥", ex);
            return false;
        }
    }
}
```

---

## 4. ğŸ—ï¸ åŠ¨æ€SQLå®‰å…¨æ„å»ºæŠ€æœ¯


### 4.1 åŠ¨æ€SQLçš„é£é™©ä¸éœ€æ±‚


**ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€SQL**ï¼š

å®é™…å¼€å‘ä¸­ï¼Œæœ‰æ—¶éœ€è¦æ ¹æ®ä¸åŒæ¡ä»¶æ„å»ºä¸åŒçš„INSERTè¯­å¥ï¼š

```
åœºæ™¯ç¤ºä¾‹ï¼š
1. å¯é€‰å­—æ®µæ’å…¥ï¼šç”¨æˆ·å¯èƒ½ä¸å¡«å†™æŸäº›å­—æ®µ
2. æ‰¹é‡æ’å…¥ä¼˜åŒ–ï¼šæ ¹æ®æ•°æ®é‡é€‰æ‹©ä¸åŒçš„æ’å…¥ç­–ç•¥
3. å¤šè¡¨å…³è”æ’å…¥ï¼šæ ¹æ®ä¸šåŠ¡é€»è¾‘åŠ¨æ€å†³å®šæ’å…¥å“ªäº›è¡¨
4. æ¡ä»¶åŒ–æ’å…¥ï¼šæ ¹æ®æŸäº›æ¡ä»¶å†³å®šæ˜¯å¦æ’å…¥ç‰¹å®šå­—æ®µ
```

**ä¼ ç»ŸåŠ¨æ€SQLçš„é£é™©**ï¼š

```java
// âŒ å±é™©çš„åŠ¨æ€SQLæ„å»º
public void insertUserData(Map<String, String> userData) {
    StringBuilder sql = new StringBuilder("INSERT INTO users (");
    StringBuilder values = new StringBuilder(" VALUES (");
    
    for (String field : userData.keySet()) {
        sql.append(field).append(",");
        values.append("'").append(userData.get(field)).append("',");  // å±é™©ï¼
    }
    
    // å»æ‰æœ€åçš„é€—å·å¹¶é—­åˆ
    sql.setLength(sql.length() - 1);
    values.setLength(values.length() - 1);
    sql.append(")").append(values).append(")");
    
    // æ‰§è¡Œæ‹¼æ¥çš„SQL - éå¸¸å±é™©ï¼
    statement.executeUpdate(sql.toString());
}
```

### 4.2 å®‰å…¨çš„åŠ¨æ€SQLæ„å»ºæ–¹æ³•


**æ–¹æ³•ä¸€ï¼šç™½åå•å­—æ®µéªŒè¯**

```java
// âœ… å®‰å…¨çš„åŠ¨æ€SQLæ„å»º
public class SafeDynamicInsert {
    
    // å®šä¹‰å…è®¸çš„å­—æ®µç™½åå•
    private static final Set<String> ALLOWED_FIELDS = Set.of(
        "username", "email", "phone", "address", "age"
    );
    
    public boolean insertUserData(Map<String, String> userData) {
        // 1. éªŒè¯å­—æ®µåæ˜¯å¦åœ¨ç™½åå•ä¸­
        for (String field : userData.keySet()) {
            if (!ALLOWED_FIELDS.contains(field)) {
                throw new IllegalArgumentException("ä¸å…è®¸çš„å­—æ®µ: " + field);
            }
        }
        
        // 2. åŠ¨æ€æ„å»ºSQLæ¨¡æ¿
        List<String> fields = new ArrayList<>();
        List<String> placeholders = new ArrayList<>();
        
        for (String field : userData.keySet()) {
            fields.add(field);
            placeholders.add("?");
        }
        
        String sql = "INSERT INTO users (" + String.join(",", fields) + 
                    ") VALUES (" + String.join(",", placeholders) + ")";
        
        // 3. ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æ‰§è¡Œ
        try (PreparedStatement pstmt = connection.prepareStatement(sql)) {
            int index = 1;
            for (String field : fields) {
                pstmt.setString(index++, userData.get(field));
            }
            
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            logger.error("åŠ¨æ€æ’å…¥å¤±è´¥", e);
            return false;
        }
    }
}
```

**æ–¹æ³•äºŒï¼šSQLæ„å»ºå™¨æ¨¡å¼**

```java
// âœ… ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ„å»ºå®‰å…¨SQL
public class SafeInsertBuilder {
    private String tableName;
    private Map<String, Object> fields = new HashMap<>();
    private static final Map<String, Set<String>> TABLE_ALLOWED_FIELDS = Map.of(
        "users", Set.of("username", "email", "password", "phone"),
        "products", Set.of("name", "price", "category", "description")
    );
    
    public SafeInsertBuilder into(String tableName) {
        if (!TABLE_ALLOWED_FIELDS.containsKey(tableName)) {
            throw new IllegalArgumentException("ä¸æ”¯æŒçš„è¡¨å: " + tableName);
        }
        this.tableName = tableName;
        return this;
    }
    
    public SafeInsertBuilder setValue(String field, Object value) {
        // éªŒè¯å­—æ®µå
        Set<String> allowedFields = TABLE_ALLOWED_FIELDS.get(tableName);
        if (!allowedFields.contains(field)) {
            throw new IllegalArgumentException("è¡¨ " + tableName + " ä¸å…è®¸å­—æ®µ: " + field);
        }
        
        fields.put(field, value);
        return this;
    }
    
    public boolean execute(Connection connection) {
        if (fields.isEmpty()) {
            throw new IllegalStateException("æ²¡æœ‰è®¾ç½®ä»»ä½•å­—æ®µå€¼");
        }
        
        // æ„å»ºSQL
        String fieldNames = String.join(",", fields.keySet());
        String placeholders = String.join(",", Collections.nCopies(fields.size(), "?"));
        String sql = "INSERT INTO " + tableName + " (" + fieldNames + ") VALUES (" + placeholders + ")";
        
        try (PreparedStatement pstmt = connection.prepareStatement(sql)) {
            int index = 1;
            for (Object value : fields.values()) {
                pstmt.setObject(index++, value);
            }
            
            return pstmt.executeUpdate() > 0;
        } catch (SQLException e) {
            throw new RuntimeException("æ’å…¥æ“ä½œå¤±è´¥", e);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
new SafeInsertBuilder()
    .into("users")
    .setValue("username", "å¼ ä¸‰")
    .setValue("email", "zhang@email.com")
    .setValue("password", hashedPassword)
    .execute(connection);
```

### 4.3 ORMæ¡†æ¶çš„åŠ¨æ€INSERT


**ä½¿ç”¨MyBatisçš„å®‰å…¨åŠ¨æ€SQL**ï¼š

```xml
<!-- âœ… MyBatiså®‰å…¨åŠ¨æ€INSERT -->
<insert id="insertUserDynamic" parameterType="map">
    INSERT INTO users
    <trim prefix="(" suffix=")" suffixOverrides=",">
        <if test="username != null">username,</if>
        <if test="email != null">email,</if>
        <if test="phone != null">phone,</if>
        <if test="address != null">address,</if>
    </trim>
    <trim prefix="VALUES(" suffix=")" suffixOverrides=",">
        <if test="username != null">#{username},</if>
        <if test="email != null">#{email},</if>
        <if test="phone != null">#{phone},</if>
        <if test="address != null">#{address},</if>
    </trim>
</insert>
```

```java
// å¯¹åº”çš„Javaä»£ç 
public boolean insertUser(Map<String, Object> userParams) {
    // MyBatisä¼šè‡ªåŠ¨å¤„ç†å‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢SQLæ³¨å…¥
    return sqlSession.insert("insertUserDynamic", userParams) > 0;
}
```

---

## 5. âœ… è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ç­–ç•¥


### 5.1 å¤šå±‚æ¬¡è¾“å…¥éªŒè¯æ¶æ„


```
è¾“å…¥éªŒè¯å±‚æ¬¡ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å‰ç«¯éªŒè¯å±‚                 â”‚  â† ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œä¸å¯ä¿¡ä»»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Webåº”ç”¨éªŒè¯å±‚             â”‚  â† ä¸»è¦é˜²æŠ¤å±‚ï¼Œä¸¥æ ¼éªŒè¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ä¸šåŠ¡é€»è¾‘éªŒè¯å±‚             â”‚  â† ä¸šåŠ¡è§„åˆ™æ£€æŸ¥
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           æ•°æ®åº“çº¦æŸå±‚               â”‚  â† æœ€åé˜²æŠ¤ï¼Œæ•°æ®å®Œæ•´æ€§
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

éªŒè¯ç­–ç•¥ï¼šå¤šå±‚é˜²æŠ¤ï¼Œæ¯å±‚éƒ½ä¸èƒ½çœç•¥
```

### 5.2 è¾“å…¥éªŒè¯å®ç°


**å­—ç¬¦ä¸²ç±»å‹éªŒè¯**ï¼š

```java
public class InputValidator {
    
    // ç”¨æˆ·åéªŒè¯
    public static boolean validateUsername(String username) {
        if (username == null || username.trim().isEmpty()) {
            return false;
        }
        
        // é•¿åº¦æ£€æŸ¥
        if (username.length() < 3 || username.length() > 20) {
            return false;
        }
        
        // å­—ç¬¦æ£€æŸ¥ï¼šåªå…è®¸å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿
        return username.matches("^[a-zA-Z0-9_]+$");
    }
    
    // é‚®ç®±éªŒè¯
    public static boolean validateEmail(String email) {
        if (email == null || email.trim().isEmpty()) {
            return false;
        }
        
        // åŸºæœ¬é‚®ç®±æ ¼å¼æ£€æŸ¥
        String emailRegex = "^[A-Za-z0-9+_.-]+@([A-Za-z0-9.-]+\\.[A-Za-z]{2,})$";
        return email.matches(emailRegex) && email.length() <= 100;
    }
    
    // ä»·æ ¼éªŒè¯ï¼ˆæ•°å­—ç±»å‹ï¼‰
    public static boolean validatePrice(String priceStr) {
        try {
            BigDecimal price = new BigDecimal(priceStr);
            return price.compareTo(BigDecimal.ZERO) >= 0 && 
                   price.compareTo(new BigDecimal("999999.99")) <= 0;
        } catch (NumberFormatException e) {
            return false;
        }
    }
    
    // æè¿°å†…å®¹éªŒè¯
    public static String sanitizeDescription(String description) {
        if (description == null) {
            return "";
        }
        
        // å»é™¤å±é™©å­—ç¬¦
        String cleaned = description
            .replaceAll("[<>\"'&]", "")  // å»é™¤HTMLç›¸å…³å­—ç¬¦
            .replaceAll("[;\\-\\-]", "")  // å»é™¤SQLç›¸å…³å­—ç¬¦
            .trim();
        
        // é•¿åº¦é™åˆ¶
        return cleaned.length() > 500 ? cleaned.substring(0, 500) : cleaned;
    }
}
```

### 5.3 è¾“å…¥è¿‡æ»¤ä¸è½¬ä¹‰


**å±é™©å­—ç¬¦è¯†åˆ«ä¸å¤„ç†**ï¼š

```java
public class SQLInjectionFilter {
    
    // SQLæ³¨å…¥å±é™©å…³é”®è¯
    private static final Set<String> DANGEROUS_KEYWORDS = Set.of(
        "SELECT", "INSERT", "UPDATE", "DELETE", "DROP", "CREATE", "ALTER",
        "EXEC", "EXECUTE", "UNION", "SCRIPT", "JAVASCRIPT", "VBSCRIPT",
        "ONLOAD", "ONERROR", "ONCLICK", "--", "/*", "*/", "XP_", "SP_"
    );
    
    // æ£€æŸ¥æ˜¯å¦åŒ…å«å±é™©å…³é”®è¯
    public static boolean containsDangerousKeywords(String input) {
        if (input == null) return false;
        
        String upperInput = input.toUpperCase();
        return DANGEROUS_KEYWORDS.stream()
                .anyMatch(upperInput::contains);
    }
    
    // å®‰å…¨çš„å­—ç¬¦ä¸²æ¸…ç†
    public static String sanitizeInput(String input) {
        if (input == null) return null;
        
        return input
            .replaceAll("'", "''")          // å•å¼•å·è½¬ä¹‰
            .replaceAll("--", "")           // å»é™¤SQLæ³¨é‡Š
            .replaceAll("/\\*.*?\\*/", "")  // å»é™¤å—æ³¨é‡Š
            .replaceAll(";", "")            // å»é™¤è¯­å¥åˆ†éš”ç¬¦
            .trim();
    }
    
    // ä¸¥æ ¼æ¨¡å¼ï¼šæ‹’ç»åŒ…å«å±é™©å†…å®¹çš„è¾“å…¥
    public static void validateStrictInput(String input, String fieldName) {
        if (containsDangerousKeywords(input)) {
            throw new SecurityException(
                "å­—æ®µ " + fieldName + " åŒ…å«ä¸å…è®¸çš„å†…å®¹: " + input
            );
        }
    }
}
```

### 5.4 æ•°æ®ç±»å‹ä¸“é¡¹éªŒè¯


**ä¸“é—¨çš„éªŒè¯å™¨ç±»**ï¼š

```java
public class TypedInputValidator {
    
    // æ•´æ•°éªŒè¯
    public static Integer validateInteger(String input, String fieldName, Integer min, Integer max) {
        try {
            Integer value = Integer.parseInt(input.trim());
            if (min != null && value < min) {
                throw new IllegalArgumentException(fieldName + " ä¸èƒ½å°äº " + min);
            }
            if (max != null && value > max) {
                throw new IllegalArgumentException(fieldName + " ä¸èƒ½å¤§äº " + max);
            }
            return value;
        } catch (NumberFormatException e) {
            throw new IllegalArgumentException(fieldName + " å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•´æ•°");
        }
    }
    
    // æ—¥æœŸéªŒè¯
    public static Date validateDate(String input, String fieldName) {
        try {
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
            sdf.setLenient(false);  // ä¸¥æ ¼æ¨¡å¼
            return sdf.parse(input.trim());
        } catch (ParseException e) {
            throw new IllegalArgumentException(fieldName + " æ—¥æœŸæ ¼å¼é”™è¯¯ï¼Œåº”ä¸º yyyy-MM-dd");
        }
    }
    
    // æšä¸¾å€¼éªŒè¯
    public static String validateEnum(String input, String fieldName, Set<String> allowedValues) {
        String trimmed = input.trim();
        if (!allowedValues.contains(trimmed)) {
            throw new IllegalArgumentException(
                fieldName + " åªèƒ½æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€: " + String.join(", ", allowedValues)
            );
        }
        return trimmed;
    }
}
```

---

## 6. ğŸ¯ é¢„ç¼–è¯‘è¯­å¥æ·±å…¥åº”ç”¨


### 6.1 é¢„ç¼–è¯‘è¯­å¥çš„å·¥ä½œæœºåˆ¶


**æ•°æ®åº“å†…éƒ¨æ‰§è¡Œæµç¨‹**ï¼š

```
é¢„ç¼–è¯‘è¯­å¥æ‰§è¡Œè¿‡ç¨‹ï¼š

å®¢æˆ·ç«¯                           æ•°æ®åº“æœåŠ¡å™¨
   |                                 |
   |--[1] å‘é€SQLæ¨¡æ¿--------------->|
   |   "INSERT INTO users VALUES(?,?,?)" |
   |                                 |--[2] è¯­æ³•è§£æä¸ç¼–è¯‘
   |                                 |    ç”Ÿæˆæ‰§è¡Œè®¡åˆ’
   |                                 |    åˆ†é…èµ„æº
   |<--[3] è¿”å›é¢„ç¼–è¯‘ID--------------|
   |                                 |
   |--[4] å‘é€å‚æ•°å€¼---------------->|
   |   ['å¼ ä¸‰', 'zhang@qq.com', '123']   |
   |                                 |--[5] å‚æ•°ç»‘å®š
   |                                 |    æ‰§è¡Œé¢„ç¼–è¯‘SQL
   |<--[6] è¿”å›æ‰§è¡Œç»“æœ--------------|
   |                                 |

å…³é”®ä¼˜åŠ¿ï¼š
â€¢ SQLç»“æ„å›ºå®šï¼Œå‚æ•°åªèƒ½ä½œä¸ºæ•°æ®å€¼
â€¢ æ•°æ®åº“å¼•æ“ä¼˜åŒ–äº†æ‰§è¡Œè®¡åˆ’
â€¢ å¯é‡å¤ä½¿ç”¨ï¼Œæé«˜æ€§èƒ½
```

### 6.2 é¢„ç¼–è¯‘è¯­å¥çš„å®‰å…¨æœºåˆ¶


**ä¸ºä»€ä¹ˆé¢„ç¼–è¯‘èƒ½é˜²æ­¢æ³¨å…¥**ï¼š

```
å®‰å…¨åŸç†è§£æï¼š

æ­¥éª¤1ï¼šSQLç»“æ„é¢„ç¼–è¯‘
åŸå§‹ï¼šINSERT INTO users (name, email) VALUES (?, ?)
ç¼–è¯‘åï¼š[INSTRUCTION: INSERT] [TABLE: users] [FIELDS: name,email] [PARAMS: 2ä¸ªå ä½ç¬¦]

æ­¥éª¤2ï¼šå‚æ•°ç»‘å®š
å‚æ•°1ï¼šadmin'); DROP TABLE users; --
å‚æ•°2ï¼šhack@evil.com

ç»‘å®šè¿‡ç¨‹ï¼š
æ•°æ®åº“å°† "admin'); DROP TABLE users; --" ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²å€¼
ç»‘å®šåˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ï¼Œä¸ä¼šè§£æå…¶ä¸­çš„SQLè¯­æ³•

æœ€ç»ˆæ‰§è¡Œï¼š
INSERT INTO users (name, email) VALUES ('admin\'); DROP TABLE users; --', 'hack@evil.com')
                                        â†‘
                                   ä½œä¸ºæ™®é€šå­—ç¬¦ä¸²å­˜å‚¨ï¼Œä¸æ˜¯SQLå‘½ä»¤ï¼
```

### 6.3 é¢„ç¼–è¯‘è¯­å¥çš„æœ€ä½³å®è·µ


**è¿æ¥æ± ä¸é¢„ç¼–è¯‘è¯­å¥ç»“åˆ**ï¼š

```java
public class DatabaseManager {
    private DataSource dataSource;  // è¿æ¥æ± 
    private Map<String, String> preparedSqlCache = new ConcurrentHashMap<>();
    
    // é¢„ç¼–è¯‘SQLæ¨¡æ¿ç¼“å­˜
    static {
        preparedSqlCache.put("INSERT_USER", 
            "INSERT INTO users (username, email, password, create_time) VALUES (?, ?, ?, ?)");
        preparedSqlCache.put("INSERT_PRODUCT", 
            "INSERT INTO products (name, price, category, description) VALUES (?, ?, ?, ?)");
        preparedSqlCache.put("INSERT_ORDER", 
            "INSERT INTO orders (user_id, product_id, quantity, order_time) VALUES (?, ?, ?, ?)");
    }
    
    public boolean executeInsert(String sqlKey, Object... params) {
        String sql = preparedSqlCache.get(sqlKey);
        if (sql == null) {
            throw new IllegalArgumentException("æœªæ‰¾åˆ°SQLæ¨¡æ¿: " + sqlKey);
        }
        
        try (Connection conn = dataSource.getConnection();
             PreparedStatement pstmt = conn.prepareStatement(sql)) {
            
            // è®¾ç½®å‚æ•°
            for (int i = 0; i < params.length; i++) {
                pstmt.setObject(i + 1, params[i]);
            }
            
            return pstmt.executeUpdate() > 0;
            
        } catch (SQLException e) {
            logger.error("æ‰§è¡Œæ’å…¥æ“ä½œå¤±è´¥ï¼ŒSQL Key: " + sqlKey, e);
            return false;
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
DatabaseManager dbManager = new DatabaseManager();

// å®‰å…¨æ’å…¥ç”¨æˆ·æ•°æ®
boolean success = dbManager.executeInsert("INSERT_USER", 
    "å¼ ä¸‰", "zhang@email.com", hashedPassword, new Timestamp(System.currentTimeMillis()));
```

### 6.4 é¢„ç¼–è¯‘è¯­å¥çš„æ€§èƒ½ä¼˜åŒ–


**æ‰¹å¤„ç†ä¸äº‹åŠ¡æ§åˆ¶**ï¼š

```java
public class BatchInsertManager {
    
    // é«˜æ€§èƒ½æ‰¹é‡æ’å…¥
    public boolean batchInsert(String sql, List<Object[]> paramsList) {
        try (Connection conn = dataSource.getConnection()) {
            conn.setAutoCommit(false);  // å…³é—­è‡ªåŠ¨æäº¤
            
            try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
                
                for (int i = 0; i < paramsList.size(); i++) {
                    Object[] params = paramsList.get(i);
                    
                    // è®¾ç½®å‚æ•°
                    for (int j = 0; j < params.length; j++) {
                        pstmt.setObject(j + 1, params[j]);
                    }
                    
                    pstmt.addBatch();
                    
                    // æ¯1000æ¡æ‰§è¡Œä¸€æ¬¡æ‰¹å¤„ç†
                    if ((i + 1) % 1000 == 0) {
                        pstmt.executeBatch();
                        pstmt.clearBatch();
                    }
                }
                
                // æ‰§è¡Œå‰©ä½™çš„æ‰¹å¤„ç†
                pstmt.executeBatch();
                conn.commit();  // æäº¤äº‹åŠ¡
                return true;
                
            } catch (SQLException e) {
                conn.rollback();  // å›æ»šäº‹åŠ¡
                throw e;
            }
            
        } catch (SQLException e) {
            logger.error("æ‰¹é‡æ’å…¥å¤±è´¥", e);
            return false;
        }
    }
}
```

---

## 7. ğŸ’¡ INSERTæ³¨å…¥é˜²æŠ¤æœ€ä½³å®è·µ


### 7.1 é˜²æŠ¤ç­–ç•¥æ€»è§ˆ


**å¤šå±‚é˜²æŠ¤ä½“ç³»**ï¼š

```
é˜²æŠ¤å±‚æ¬¡å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 è¾“å…¥å±‚                       â”‚
â”‚  â€¢ å‰ç«¯éªŒè¯ï¼ˆç”¨æˆ·ä½“éªŒï¼‰                       â”‚
â”‚  â€¢ é•¿åº¦é™åˆ¶ã€æ ¼å¼æ£€æŸ¥                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                åº”ç”¨å±‚                        â”‚
â”‚  â€¢ è¾“å…¥éªŒè¯ä¸è¿‡æ»¤                             â”‚
â”‚  â€¢ å­—æ®µç™½åå•æ£€æŸ¥                             â”‚
â”‚  â€¢ å±é™©å­—ç¬¦è¯†åˆ«                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ•°æ®è®¿é—®å±‚                    â”‚
â”‚  â€¢ å‚æ•°åŒ–æŸ¥è¯¢                                 â”‚
â”‚  â€¢ é¢„ç¼–è¯‘è¯­å¥                                 â”‚
â”‚  â€¢ ORMæ¡†æ¶å®‰å…¨é…ç½®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ•°æ®åº“å±‚                      â”‚
â”‚  â€¢ ç”¨æˆ·æƒé™é™åˆ¶                               â”‚
â”‚  â€¢ æ•°æ®åº“çº¦æŸ                                 â”‚
â”‚  â€¢ å®¡è®¡æ—¥å¿—                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å®Œæ•´çš„å®‰å…¨INSERTå®ç°


**ä¼ä¸šçº§å®‰å…¨INSERTæ¨¡æ¿**ï¼š

```java
@Service
public class SecureUserService {
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private InputValidator inputValidator;
    
    @Autowired
    private AuditLogger auditLogger;
    
    public ApiResponse<Long> registerUser(UserRegistrationRequest request) {
        try {
            // ç¬¬1æ­¥ï¼šè¾“å…¥éªŒè¯
            validateUserInput(request);
            
            // ç¬¬2æ­¥ï¼šä¸šåŠ¡é€»è¾‘æ£€æŸ¥
            if (userRepository.existsByUsername(request.getUsername())) {
                return ApiResponse.error("ç”¨æˆ·åå·²å­˜åœ¨");
            }
            
            if (userRepository.existsByEmail(request.getEmail())) {
                return ApiResponse.error("é‚®ç®±å·²è¢«æ³¨å†Œ");
            }
            
            // ç¬¬3æ­¥ï¼šæ•°æ®å‡†å¤‡
            User user = new User();
            user.setUsername(request.getUsername());
            user.setEmail(request.getEmail());
            user.setPassword(passwordEncoder.encode(request.getPassword()));
            user.setCreateTime(new Date());
            user.setStatus(UserStatus.ACTIVE);
            
            // ç¬¬4æ­¥ï¼šå®‰å…¨æ’å…¥ï¼ˆä½¿ç”¨JPAï¼Œè‡ªåŠ¨å‚æ•°åŒ–ï¼‰
            User savedUser = userRepository.save(user);
            
            // ç¬¬5æ­¥ï¼šå®¡è®¡æ—¥å¿—
            auditLogger.logUserRegistration(savedUser.getId(), request.getUsername());
            
            return ApiResponse.success(savedUser.getId());
            
        } catch (ValidationException e) {
            auditLogger.logSecurityEvent("ç”¨æˆ·æ³¨å†Œè¾“å…¥éªŒè¯å¤±è´¥", request.getUsername(), e.getMessage());
            return ApiResponse.error("è¾“å…¥æ•°æ®ä¸åˆæ³•ï¼š" + e.getMessage());
            
        } catch (Exception e) {
            logger.error("ç”¨æˆ·æ³¨å†Œç³»ç»Ÿé”™è¯¯", e);
            return ApiResponse.error("æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
        }
    }
    
    private void validateUserInput(UserRegistrationRequest request) {
        // ç”¨æˆ·åéªŒè¯
        if (!inputValidator.validateUsername(request.getUsername())) {
            throw new ValidationException("ç”¨æˆ·åæ ¼å¼ä¸æ­£ç¡®ï¼š3-20ä½å­—æ¯æ•°å­—ä¸‹åˆ’çº¿");
        }
        
        // é‚®ç®±éªŒè¯
        if (!inputValidator.validateEmail(request.getEmail())) {
            throw new ValidationException("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®");
        }
        
        // å¯†ç å¼ºåº¦éªŒè¯
        if (!inputValidator.validatePasswordStrength(request.getPassword())) {
            throw new ValidationException("å¯†ç å¼ºåº¦ä¸å¤Ÿï¼šè‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯æ•°å­—ç‰¹æ®Šå­—ç¬¦");
        }
        
        // å±é™©å†…å®¹æ£€æŸ¥
        if (inputValidator.containsDangerousContent(request.getUsername()) ||
            inputValidator.containsDangerousContent(request.getEmail())) {
            throw new ValidationException("è¾“å…¥å†…å®¹åŒ…å«ä¸å…è®¸çš„å­—ç¬¦");
        }
    }
}
```

### 7.3 æ•°æ®åº“å±‚é˜²æŠ¤é…ç½®


**æ•°æ®åº“ç”¨æˆ·æƒé™æœ€å°åŒ–**ï¼š

```sql
-- åˆ›å»ºä¸“ç”¨çš„åº”ç”¨æ•°æ®åº“ç”¨æˆ·
CREATE USER 'app_user'@'localhost' IDENTIFIED BY 'complex_password';

-- åªæˆäºˆå¿…è¦çš„æƒé™
GRANT SELECT, INSERT, UPDATE ON app_database.users TO 'app_user'@'localhost';
GRANT SELECT, INSERT, UPDATE ON app_database.products TO 'app_user'@'localhost';

-- ç¦æ­¢å±é™©æƒé™
-- ä¸æˆäºˆ DROP, CREATE, ALTER, GRANT ç­‰æƒé™
-- ä¸æˆäºˆå¯¹ç³»ç»Ÿè¡¨çš„è®¿é—®æƒé™

-- å¯ç”¨SQLå®¡è®¡
SET GLOBAL general_log = 'ON';
SET GLOBAL log_output = 'TABLE';
```

**è¡¨ç»“æ„å®‰å…¨è®¾è®¡**ï¼š

```sql
-- å®‰å…¨çš„è¡¨ç»“æ„è®¾è®¡
CREATE TABLE users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(20) NOT NULL,                    -- é™åˆ¶é•¿åº¦
    email VARCHAR(100) NOT NULL,                      -- åˆç†é•¿åº¦é™åˆ¶
    password_hash VARCHAR(255) NOT NULL,              -- å­˜å‚¨åŠ å¯†åçš„å¯†ç 
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- è‡ªåŠ¨æ—¶é—´æˆ³
    status ENUM('ACTIVE', 'INACTIVE', 'SUSPENDED'),   -- é™åˆ¶æšä¸¾å€¼
    
    -- çº¦æŸæ¡ä»¶
    UNIQUE KEY uk_username (username),                -- ç”¨æˆ·åå”¯ä¸€
    UNIQUE KEY uk_email (email),                      -- é‚®ç®±å”¯ä¸€
    CHECK (CHAR_LENGTH(username) >= 3),               -- æœ€å°é•¿åº¦æ£€æŸ¥
    CHECK (email REGEXP '^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$')  -- é‚®ç®±æ ¼å¼æ£€æŸ¥
);
```

---

## 8. ğŸ“‹ å®‰å…¨ç¼–ç è§„èŒƒä¸æ£€æŸ¥


### 8.1 ä»£ç å®¡æŸ¥æ£€æŸ¥ç‚¹


**INSERTè¯­å¥å®‰å…¨æ£€æŸ¥æ¸…å•**ï¼š

```markdown
âœ… **SQLæ„å»ºæ£€æŸ¥**
- [ ] æ˜¯å¦ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Ÿ
- [ ] æ˜¯å¦é¿å…äº†å­—ç¬¦ä¸²æ‹¼æ¥ï¼Ÿ
- [ ] åŠ¨æ€SQLæ˜¯å¦ä½¿ç”¨äº†å­—æ®µç™½åå•ï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨äº†é¢„ç¼–è¯‘è¯­å¥ï¼Ÿ

âœ… **è¾“å…¥éªŒè¯æ£€æŸ¥**
- [ ] æ˜¯å¦å¯¹æ‰€æœ‰è¾“å…¥è¿›è¡Œäº†éªŒè¯ï¼Ÿ
- [ ] æ˜¯å¦æ£€æŸ¥äº†å­—æ®µé•¿åº¦é™åˆ¶ï¼Ÿ
- [ ] æ˜¯å¦è¿‡æ»¤äº†å±é™©å­—ç¬¦ï¼Ÿ
- [ ] æ˜¯å¦éªŒè¯äº†æ•°æ®ç±»å‹ï¼Ÿ

âœ… **æƒé™æ§åˆ¶æ£€æŸ¥**
- [ ] æ•°æ®åº“ç”¨æˆ·æƒé™æ˜¯å¦æœ€å°åŒ–ï¼Ÿ
- [ ] æ˜¯å¦å¯ç”¨äº†æ•°æ®åº“å®¡è®¡ï¼Ÿ
- [ ] æ˜¯å¦æœ‰é€‚å½“çš„é”™è¯¯å¤„ç†ï¼Ÿ
- [ ] æ˜¯å¦è®°å½•äº†å®‰å…¨æ—¥å¿—ï¼Ÿ

âœ… **ä¸šåŠ¡é€»è¾‘æ£€æŸ¥**
- [ ] æ˜¯å¦æ£€æŸ¥äº†ä¸šåŠ¡è§„åˆ™ï¼Ÿ
- [ ] æ˜¯å¦é˜²æ­¢äº†é‡å¤æ’å…¥ï¼Ÿ
- [ ] æ˜¯å¦æœ‰äº‹åŠ¡æ§åˆ¶ï¼Ÿ
- [ ] æ˜¯å¦æœ‰å›æ»šæœºåˆ¶ï¼Ÿ
```

### 8.2 è‡ªåŠ¨åŒ–å®‰å…¨æ£€æµ‹


**ä»£ç æ‰«æè§„åˆ™**ï¼š

```java
// å¯ä»¥ç”¨SonarQubeç­‰å·¥å…·æ£€æµ‹çš„é—®é¢˜æ¨¡å¼

// âŒ å±é™©æ¨¡å¼1ï¼šå­—ç¬¦ä¸²æ‹¼æ¥
String sql = "INSERT INTO table VALUES ('" + userInput + "')";

// âŒ å±é™©æ¨¡å¼2ï¼šStatementç›´æ¥æ‰§è¡Œ
Statement stmt = conn.createStatement();
stmt.execute("INSERT INTO table VALUES ('" + userInput + "')");

// âŒ å±é™©æ¨¡å¼3ï¼šæœªéªŒè¯çš„åŠ¨æ€å­—æ®µ
String sql = "INSERT INTO " + tableName + " (" + fieldNames + ") VALUES (...)";

// âœ… å®‰å…¨æ¨¡å¼ï¼šå‚æ•°åŒ–æŸ¥è¯¢
PreparedStatement pstmt = conn.prepareStatement("INSERT INTO table VALUES (?)");
pstmt.setString(1, userInput);
```

### 8.3 å¼€å‘å›¢é˜Ÿå®‰å…¨è§„èŒƒ


**å›¢é˜Ÿå¼€å‘è§„èŒƒ**ï¼š

> **ğŸ”´ å¼ºåˆ¶è§„èŒƒ**
> 
> 1. **ç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥SQL**ï¼šæ‰€æœ‰SQLå¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
> 2. **è¾“å…¥éªŒè¯å¿…éœ€**ï¼šæ‰€æœ‰å¤–éƒ¨è¾“å…¥å¿…é¡»éªŒè¯åæ‰èƒ½ä½¿ç”¨
> 3. **æƒé™æœ€å°åŒ–**ï¼šæ•°æ®åº“è¿æ¥ä½¿ç”¨æœ€å°æƒé™ç”¨æˆ·
> 4. **ä»£ç å®¡æŸ¥å¿…éœ€**ï¼šæ‰€æœ‰æ•°æ®åº“æ“ä½œä»£ç å¿…é¡»ç»è¿‡å®‰å…¨å®¡æŸ¥

> **ğŸŸ¡ æ¨èå®è·µ**
> 
> 1. **ä½¿ç”¨ORMæ¡†æ¶**ï¼šå‡å°‘æ‰‹å†™SQLï¼Œé™ä½æ³¨å…¥é£é™©
> 2. **ç»Ÿä¸€æ•°æ®è®¿é—®å±‚**ï¼šé€šè¿‡ç»Ÿä¸€çš„DAOå±‚è®¿é—®æ•°æ®åº“
> 3. **å®‰å…¨æµ‹è¯•**ï¼šå®šæœŸè¿›è¡Œæ¸—é€æµ‹è¯•å’Œä»£ç æ‰«æ
> 4. **ç›‘æ§å‘Šè­¦**ï¼šç›‘æ§å¼‚å¸¸SQLæ‰§è¡Œï¼ŒåŠæ—¶å‘ç°æ”»å‡»

### 8.4 å®‰å…¨å¼€å‘å·¥å…·


**æ¨èçš„å®‰å…¨å·¥å…·**ï¼š

| å·¥å…·ç±»å‹ | **å·¥å…·åç§°** | **ä¸»è¦åŠŸèƒ½** | **ä½¿ç”¨é˜¶æ®µ** |
|---------|------------|------------|------------|
| **ä»£ç æ‰«æ** | `SonarQube, Checkmarx` | `æ£€æµ‹SQLæ³¨å…¥æ¼æ´` | `å¼€å‘é˜¶æ®µ` |
| **æ•°æ®åº“é˜²ç«å¢™** | `Imperva, GreenSQL` | `å®æ—¶SQLæ”»å‡»æ£€æµ‹` | `è¿è¡Œé˜¶æ®µ` |
| **Webåº”ç”¨é˜²ç«å¢™** | `ModSecurity, CloudFlare` | `HTTPè¯·æ±‚è¿‡æ»¤` | `è¿è¡Œé˜¶æ®µ` |
| **æ¸—é€æµ‹è¯•** | `SQLMap, Burp Suite` | `æ¼æ´å‘ç°ä¸éªŒè¯` | `æµ‹è¯•é˜¶æ®µ` |

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ INSERTæ³¨å…¥æœ¬è´¨ï¼šé€šè¿‡INSERTè¯­å¥çš„æ•°æ®è¾“å…¥æ‰§è¡Œæ¶æ„SQLä»£ç 
ğŸ”¸ æ”»å‡»å±å®³ï¼šæ•°æ®ç¯¡æ”¹ã€æƒé™æå‡ã€ç³»ç»Ÿç ´åã€æœåŠ¡æ‹’ç»
ğŸ”¸ é˜²æŠ¤æ ¸å¿ƒï¼šå‚æ•°åŒ–æŸ¥è¯¢ã€è¾“å…¥éªŒè¯ã€æƒé™æ§åˆ¶ã€å®‰å…¨ç¼–ç 
ğŸ”¸ æ£€æµ‹è¯†åˆ«ï¼šå±é™©å­—ç¬¦ã€å¤šè¯­å¥ã€å¼‚å¸¸è¡Œä¸ºã€é”™è¯¯å›æ˜¾
ğŸ”¸ æœ€ä½³å®è·µï¼šå¤šå±‚é˜²æŠ¤ã€ç™½åå•æœºåˆ¶ã€ä»£ç å®¡æŸ¥ã€å®‰å…¨ç›‘æ§
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆINSERTç‰¹åˆ«å±é™©**
```
éšè”½æ€§ï¼šæ’å…¥æ“ä½œç»“æœä¸ä¼šç«‹å³æ˜¾ç¤ºï¼Œæ”»å‡»ä¸æ˜“è¢«å‘ç°
æŒä¹…æ€§ï¼šæ¶æ„æ•°æ®è¢«å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå½±å“é•¿æœŸå­˜åœ¨
æ‰§è¡Œæ€§ï¼šå¯ä»¥é€šè¿‡INSERTæ‰§è¡Œä»»æ„SQLå‘½ä»¤ï¼ŒåŒ…æ‹¬åˆ é™¤ã€ä¿®æ”¹ç­‰
æƒé™æ€§ï¼šå¯èƒ½åˆ›å»ºé«˜æƒé™ç”¨æˆ·è´¦æˆ·ï¼Œè·å¾—ç³»ç»Ÿæ§åˆ¶æƒ
```

**ğŸ”¹ å‚æ•°åŒ–æŸ¥è¯¢ä¸ºä»€ä¹ˆæœ‰æ•ˆ**
```
åŸç†ï¼šSQLç»“æ„ä¸æ•°æ®åˆ†ç¦»ï¼Œæ•°æ®åº“é¢„å…ˆç¼–è¯‘SQLè¯­å¥ç»“æ„
æœºåˆ¶ï¼šç”¨æˆ·è¾“å…¥åªèƒ½ä½œä¸ºå‚æ•°å€¼ï¼Œæ— æ³•æ”¹å˜SQLè¯­å¥é€»è¾‘
ä¼˜åŠ¿ï¼šæ—¢é˜²æ­¢äº†æ³¨å…¥æ”»å‡»ï¼Œåˆæé«˜äº†æ‰§è¡Œæ€§èƒ½
é™åˆ¶ï¼šä¸èƒ½ç”¨äºåŠ¨æ€è¡¨åã€å­—æ®µåï¼Œéœ€è¦å…¶ä»–æ–¹å¼å¤„ç†
```

**ğŸ”¹ è¾“å…¥éªŒè¯çš„é‡è¦æ€§**
```
å¤šé‡ä¿éšœï¼šå³ä½¿å‚æ•°åŒ–æŸ¥è¯¢å¤±æ•ˆï¼Œè¾“å…¥éªŒè¯ä¹Ÿèƒ½æä¾›ä¿æŠ¤
ä¸šåŠ¡éœ€æ±‚ï¼šéªŒè¯æ•°æ®æ ¼å¼ã€é•¿åº¦ã€ç±»å‹æ˜¯å¦ç¬¦åˆä¸šåŠ¡è¦æ±‚
ç”¨æˆ·ä½“éªŒï¼šåŠæ—¶åé¦ˆè¾“å…¥é”™è¯¯ï¼Œæå‡ç”¨æˆ·ä½¿ç”¨ä½“éªŒ
å®‰å…¨æ·±åº¦ï¼šæ„å»ºçºµæ·±é˜²å¾¡ä½“ç³»ï¼Œå¤šå±‚å®‰å…¨ä¿éšœ
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**å¼€å‘é˜¶æ®µæ£€æŸ¥**ï¼š
- æ‰€æœ‰INSERTè¯­å¥éƒ½ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- å»ºç«‹è¾“å…¥éªŒè¯æ ‡å‡†å’Œå·¥å…·ç±»
- åˆ¶å®šä»£ç å®¡æŸ¥çš„å®‰å…¨æ£€æŸ¥æ¸…å•
- ä½¿ç”¨å®‰å…¨çš„ORMæ¡†æ¶å’Œé…ç½®

**æµ‹è¯•é˜¶æ®µéªŒè¯**ï¼š
- è¿›è¡ŒSQLæ³¨å…¥ä¸“é¡¹æµ‹è¯•
- éªŒè¯é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- æ£€æŸ¥æƒé™é…ç½®å’Œæ•°æ®åº“å®‰å…¨
- è¿›è¡Œæ¸—é€æµ‹è¯•å’Œå®‰å…¨æ‰«æ

**è¿ç»´é˜¶æ®µç›‘æ§**ï¼š
- ç›‘æ§å¼‚å¸¸SQLæ‰§è¡Œæ¨¡å¼
- è®°å½•å’Œåˆ†æå®‰å…¨å®¡è®¡æ—¥å¿—
- å®šæœŸæ›´æ–°å®‰å…¨é˜²æŠ¤è§„åˆ™
- å»ºç«‹å®‰å…¨äº‹ä»¶å“åº”æµç¨‹

### 9.4 é˜²æŠ¤æªæ–½ä¼˜å…ˆçº§


**ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»å®æ–½ï¼‰**
```
1. ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢/é¢„ç¼–è¯‘è¯­å¥
2. ä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œè¿‡æ»¤
3. æ•°æ®åº“ç”¨æˆ·æƒé™æœ€å°åŒ–
4. é”™è¯¯ä¿¡æ¯å®‰å…¨å¤„ç†
```

**ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆå¼ºçƒˆæ¨èï¼‰**
```
1. ä½¿ç”¨æˆç†Ÿçš„ORMæ¡†æ¶
2. å®æ–½ä»£ç å®‰å…¨å®¡æŸ¥
3. éƒ¨ç½²Webåº”ç”¨é˜²ç«å¢™
4. å»ºç«‹å®‰å…¨ç›‘æ§æœºåˆ¶
```

**ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆæ¡ä»¶å…è®¸æ—¶ï¼‰**
```
1. æ•°æ®åº“é˜²ç«å¢™éƒ¨ç½²
2. å®šæœŸæ¸—é€æµ‹è¯•
3. é«˜çº§å¨èƒæ£€æµ‹ç³»ç»Ÿ
4. å®‰å…¨åŸ¹è®­ä¸è®¤è¯
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- INSERTæ³¨å…¥å±å®³å¤§ï¼Œéšè”½æ€§å¼ºéœ€é‡è§†
- å‚æ•°åŒ–æŸ¥è¯¢æ˜¯é˜²æŠ¤çš„æ ¸å¿ƒæŠ€æœ¯æ‰‹æ®µ
- è¾“å…¥éªŒè¯æ„å»ºç¬¬ä¸€é“å®‰å…¨é˜²çº¿
- å¤šå±‚é˜²æŠ¤ç¡®ä¿å®‰å…¨ä¸‡æ— ä¸€å¤±
- å®‰å…¨å¼€å‘éœ€è¦å›¢é˜Ÿè§„èŒƒå’Œå·¥å…·æ”¯æŒ

> **ğŸ’¡ å®‰å…¨æé†’**
> 
> INSERT SQLæ³¨å…¥è™½ç„¶æ¯”SELECTæ³¨å…¥æ›´éšè”½ï¼Œä½†å±å®³æ€§æ›´å¤§ã€‚å¼€å‘è€…å¿…é¡»åœ¨æ¯ä¸ªINSERTæ“ä½œä¸­éƒ½ä¸¥æ ¼æ‰§è¡Œå®‰å…¨é˜²æŠ¤æªæ–½ï¼Œä¸èƒ½å­˜æœ‰ä¾¥å¹¸å¿ƒç†ã€‚è®°ä½ï¼šå®‰å…¨ä¸æ˜¯åŠŸèƒ½ï¼Œè€Œæ˜¯åŸºç¡€è¦æ±‚ï¼