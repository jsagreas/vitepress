---
title: 15ã€MySQLæœåŠ¡å¯åŠ¨ä¸åœæ­¢æœºåˆ¶
---
## ğŸ“š ç›®å½•

1. [MySQLæœåŠ¡åŸºç¡€æ¦‚å¿µ](#1-MySQLæœåŠ¡åŸºç¡€æ¦‚å¿µ)
2. [mysqldæœåŠ¡å¯åŠ¨æµç¨‹è¯¦è§£](#2-mysqldæœåŠ¡å¯åŠ¨æµç¨‹è¯¦è§£)
3. [å¯åŠ¨å‚æ•°é…ç½®ä¸ç®¡ç†](#3-å¯åŠ¨å‚æ•°é…ç½®ä¸ç®¡ç†)
4. [æœåŠ¡åœæ­¢æ–¹å¼å¯¹æ¯”](#4-æœåŠ¡åœæ­¢æ–¹å¼å¯¹æ¯”)
5. [å¯åŠ¨å¤±è´¥è¯Šæ–­ä¸å¤„ç†](#5-å¯åŠ¨å¤±è´¥è¯Šæ–­ä¸å¤„ç†)
6. [æœåŠ¡çŠ¶æ€ç›‘æ§](#6-æœåŠ¡çŠ¶æ€ç›‘æ§)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ MySQLæœåŠ¡åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯MySQLæœåŠ¡


**ç®€å•ç†è§£**ï¼šMySQLæœåŠ¡å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“ç¨‹åºï¼Œå®ƒè´Ÿè´£å¤„ç†æ‰€æœ‰çš„æ•°æ®åº“æ“ä½œè¯·æ±‚ã€‚

```
ç±»æ¯”ç†è§£ï¼š
MySQLæœåŠ¡ = ä¸€ä¸ªä¸“é—¨ç®¡ç†æ•°æ®çš„"ç®¡å®¶"
- 24å°æ—¶å¾…å‘½ï¼Œéšæ—¶å¤„ç†æ•°æ®è¯·æ±‚
- ä¿è¯æ•°æ®å®‰å…¨å­˜å‚¨å’Œå¿«é€ŸæŸ¥è¯¢  
- ç®¡ç†å¤šä¸ªæ•°æ®åº“å’Œç”¨æˆ·æƒé™
```

**ğŸ”¸ æ ¸å¿ƒç»„ä»¶**
- **`mysqld`**ï¼šMySQLçš„ä¸»æœåŠ¡ç¨‹åºï¼ˆdaemonè¿›ç¨‹ï¼‰
- **é…ç½®æ–‡ä»¶**ï¼šæ§åˆ¶æœåŠ¡è¡Œä¸ºçš„å‚æ•°æ–‡ä»¶ï¼ˆmy.cnfï¼‰
- **æ•°æ®ç›®å½•**ï¼šå­˜å‚¨æ•°æ®åº“æ–‡ä»¶çš„æ–‡ä»¶å¤¹
- **æ—¥å¿—æ–‡ä»¶**ï¼šè®°å½•æœåŠ¡è¿è¡ŒçŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯

### 1.2 MySQLæœåŠ¡æ¶æ„


```
MySQLæœåŠ¡è¿è¡Œæ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å®¢æˆ·ç«¯åº”ç”¨           â”‚ â† ç½‘ç«™ã€APPã€ç®¡ç†å·¥å…·
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      MySQLè¿æ¥å™¨           â”‚ â† å¤„ç†å®¢æˆ·ç«¯è¿æ¥
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      SQLè§£æå™¨             â”‚ â† è§£æSQLè¯­å¥
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      æŸ¥è¯¢ä¼˜åŒ–å™¨             â”‚ â† ä¼˜åŒ–æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      å­˜å‚¨å¼•æ“               â”‚ â† InnoDBã€MyISAMç­‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      æ•°æ®æ–‡ä»¶               â”‚ â† å®é™…çš„æ•°æ®å­˜å‚¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æœåŠ¡ç®¡ç†çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆè¦æŒæ¡æœåŠ¡ç®¡ç†**ï¼š
- **ç¨³å®šè¿è¡Œ**ï¼šç¡®ä¿æ•°æ®åº“æœåŠ¡ä¸é—´æ–­æä¾›æœåŠ¡
- **æ•°æ®å®‰å…¨**ï¼šæ­£ç¡®çš„å¯åœæ“ä½œé¿å…æ•°æ®æŸå
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé€šè¿‡å‚æ•°è°ƒä¼˜æå‡æœåŠ¡æ€§èƒ½
- **æ•…éšœå¤„ç†**ï¼šå¿«é€Ÿè¯Šæ–­å’Œè§£å†³å¯åŠ¨é—®é¢˜

---

## 2. âš™ï¸ mysqldæœåŠ¡å¯åŠ¨æµç¨‹è¯¦è§£


### 2.1 å¯åŠ¨æµç¨‹æ¦‚è§ˆ


```
MySQLå¯åŠ¨å®Œæ•´æµç¨‹ï¼š

[1] è¯»å–é…ç½®æ–‡ä»¶
      â†“
[2] åˆå§‹åŒ–ç³»ç»Ÿå˜é‡  
      â†“
[3] æ£€æŸ¥æ•°æ®ç›®å½•æƒé™
      â†“
[4] æ¢å¤InnoDBå­˜å‚¨å¼•æ“
      â†“
[5] å¯åŠ¨ç½‘ç»œç›‘å¬
      â†“
[6] æœåŠ¡å°±ç»ªï¼Œæ¥å—è¿æ¥
```

### 2.2 é…ç½®æ–‡ä»¶è¯»å–


**ğŸ”¸ é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§**
MySQLå¯åŠ¨æ—¶ä¼šæŒ‰é¡ºåºæŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼š

```
Linuxç³»ç»Ÿé…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåºï¼š
1. /etc/my.cnf           â† å…¨å±€é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
2. /etc/mysql/my.cnf     â† ç³»ç»Ÿçº§é…ç½®
3. ~/.my.cnf             â† ç”¨æˆ·çº§é…ç½®
4. --defaults-file=path  â† å‘½ä»¤è¡ŒæŒ‡å®šï¼ˆå¦‚æœæœ‰ï¼‰

Windowsç³»ç»Ÿé…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåºï¼š
1. C:\Windows\my.ini
2. C:\my.cnf
3. MySQLå®‰è£…ç›®å½•\my.ini
```

**ğŸ’¡ é…ç½®æ–‡ä»¶åŸºæœ¬ç»“æ„**
```ini
# my.cnfé…ç½®æ–‡ä»¶ç¤ºä¾‹
[mysqld]                    # æœåŠ¡ç«¯é…ç½®
port = 3306                 # ç›‘å¬ç«¯å£
datadir = /var/lib/mysql    # æ•°æ®ç›®å½•
socket = /tmp/mysql.sock    # Unixå¥—æ¥å­—æ–‡ä»¶
log-error = /var/log/mysql/error.log  # é”™è¯¯æ—¥å¿—

[mysql]                     # å®¢æˆ·ç«¯é…ç½®
default-character-set = utf8mb4

[client]                    # é€šç”¨å®¢æˆ·ç«¯é…ç½®
port = 3306
socket = /tmp/mysql.sock
```

### 2.3 ç³»ç»Ÿåˆå§‹åŒ–é˜¶æ®µ


**ğŸ”§ å…³é”®åˆå§‹åŒ–æ­¥éª¤**

**å­˜å‚¨å¼•æ“åˆå§‹åŒ–**ï¼š
```
InnoDBå¼•æ“å¯åŠ¨è¿‡ç¨‹ï¼š
1. æ£€æŸ¥æ•°æ®æ–‡ä»¶å®Œæ•´æ€§
2. è¯»å–äº‹åŠ¡æ—¥å¿—ï¼ˆredo logï¼‰
3. æ‰§è¡Œå´©æºƒæ¢å¤ï¼ˆå¦‚æœéœ€è¦ï¼‰
4. åˆå§‹åŒ–ç¼“å†²æ± ï¼ˆbuffer poolï¼‰
5. å¯åŠ¨åå°çº¿ç¨‹ï¼ˆåˆ·æ–°ã€æ¸…ç†ç­‰ï¼‰
```

**ç½‘ç»œæœåŠ¡åˆå§‹åŒ–**ï¼š
```
ç½‘ç»œç›‘å¬å¯åŠ¨ï¼š
1. ç»‘å®šIPåœ°å€å’Œç«¯å£ï¼ˆé»˜è®¤3306ï¼‰
2. åˆ›å»ºUnixå¥—æ¥å­—æ–‡ä»¶ï¼ˆLinux/Macï¼‰
3. è®¾ç½®æœ€å¤§è¿æ¥æ•°é™åˆ¶
4. å¯åŠ¨è¿æ¥ç®¡ç†çº¿ç¨‹
```

### 2.4 å¯åŠ¨æ–¹å¼å¯¹æ¯”


| å¯åŠ¨æ–¹å¼ | **å‘½ä»¤ç¤ºä¾‹** | **é€‚ç”¨åœºæ™¯** | **ç‰¹ç‚¹** |
|---------|-------------|-------------|----------|
| ğŸ”§ **ç›´æ¥å¯åŠ¨** | `mysqld --defaults-file=/etc/my.cnf` | `å¼€å‘æµ‹è¯•` | `å‰å°è¿è¡Œï¼Œä¾¿äºè°ƒè¯•` |
| ğŸš€ **åå°æœåŠ¡** | `systemctl start mysqld` | `ç”Ÿäº§ç¯å¢ƒ` | `åå°è¿è¡Œï¼Œå¼€æœºè‡ªå¯` |
| ğŸ›¡ï¸ **å®‰å…¨æ¨¡å¼** | `mysqld_safe --defaults-file=/etc/my.cnf` | `æ•…éšœæ¢å¤` | `è‡ªåŠ¨é‡å¯ï¼Œé¢å¤–æ—¥å¿—` |

---

## 3. âš™ï¸ å¯åŠ¨å‚æ•°é…ç½®ä¸ç®¡ç†


### 3.1 å¸¸ç”¨å¯åŠ¨å‚æ•°


**ğŸ”¸ åŸºç¡€è¿æ¥å‚æ•°**
```bash
# ç«¯å£å’Œåœ°å€é…ç½®
--port=3306                    # ç›‘å¬ç«¯å£
--bind-address=0.0.0.0         # ç»‘å®šIPåœ°å€ï¼ˆ0.0.0.0è¡¨ç¤ºæ‰€æœ‰æ¥å£ï¼‰
--socket=/tmp/mysql.sock       # Unixå¥—æ¥å­—æ–‡ä»¶è·¯å¾„

# æ•°æ®ç›®å½•é…ç½®
--datadir=/var/lib/mysql       # æ•°æ®æ–‡ä»¶å­˜å‚¨ç›®å½•
--tmpdir=/tmp                  # ä¸´æ—¶æ–‡ä»¶ç›®å½•
```

**ğŸ”¸ å†…å­˜ç›¸å…³å‚æ•°**
```bash
# ç¼“å†²åŒºé…ç½®
--innodb-buffer-pool-size=1G   # InnoDBç¼“å†²æ± å¤§å°ï¼ˆæœ€é‡è¦ï¼‰
--key-buffer-size=256M         # MyISAMé”®ç¼“å­˜å¤§å°
--sort-buffer-size=2M          # æ’åºç¼“å†²åŒº
--read-buffer-size=128K        # é¡ºåºè¯»ç¼“å†²åŒº
```

> ğŸ’¡ **å†…å­˜é…ç½®ç»éªŒ**ï¼šInnoDBç¼“å†²æ± å»ºè®®è®¾ç½®ä¸ºç³»ç»Ÿå†…å­˜çš„70-80%

### 3.2 é…ç½®æ–‡ä»¶ç®¡ç†


**ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„è¯¦è§£**
```ini
[mysqld]
# === åŸºç¡€è®¾ç½® ===
user = mysql                              # è¿è¡Œç”¨æˆ·
pid-file = /var/run/mysqld/mysqld.pid    # è¿›ç¨‹IDæ–‡ä»¶
socket = /var/run/mysqld/mysqld.sock     # å¥—æ¥å­—æ–‡ä»¶
port = 3306                              # ç›‘å¬ç«¯å£
datadir = /var/lib/mysql                 # æ•°æ®ç›®å½•

# === å­—ç¬¦é›†è®¾ç½® ===
character-set-server = utf8mb4           # æœåŠ¡å™¨é»˜è®¤å­—ç¬¦é›†
collation-server = utf8mb4_unicode_ci    # é»˜è®¤æ’åºè§„åˆ™

# === æ€§èƒ½ç›¸å…³ ===
innodb_buffer_pool_size = 1G             # æœ€é‡è¦çš„å†…å­˜å‚æ•°
max_connections = 200                    # æœ€å¤§è¿æ¥æ•°
query_cache_size = 64M                   # æŸ¥è¯¢ç¼“å­˜ï¼ˆMySQL 5.7åŠä»¥ä¸‹ï¼‰

# === æ—¥å¿—è®¾ç½® ===
log-error = /var/log/mysql/error.log     # é”™è¯¯æ—¥å¿—
slow-query-log = 1                       # å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—
slow-query-log-file = /var/log/mysql/slow.log
long_query_time = 2                      # æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆç§’ï¼‰

# === å®‰å…¨è®¾ç½® ===
bind-address = 127.0.0.1                 # åªå…è®¸æœ¬åœ°è¿æ¥ï¼ˆå¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼‰
skip-networking = 0                      # å…è®¸ç½‘ç»œè¿æ¥
```

### 3.3 å¯åŠ¨å‚æ•°éªŒè¯


**ğŸ” å‚æ•°æ£€æŸ¥æ–¹æ³•**
```bash
# æ£€æŸ¥å½“å‰ç”Ÿæ•ˆçš„é…ç½®å‚æ•°
mysql> SHOW VARIABLES LIKE 'port';
mysql> SHOW VARIABLES LIKE 'datadir';
mysql> SHOW VARIABLES LIKE 'innodb_buffer_pool_size';

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
mysql> SHOW STATUS LIKE 'Connections';
mysql> SHOW STATUS LIKE 'Uptime';

# æŸ¥çœ‹å¯åŠ¨æ—¶ä½¿ç”¨çš„é…ç½®æ–‡ä»¶
ps aux | grep mysqld
```

---

## 4. ğŸ›‘ æœåŠ¡åœæ­¢æ–¹å¼å¯¹æ¯”


### 4.1 ä¼˜é›…å…³é—­ï¼ˆæ¨èæ–¹å¼ï¼‰


**ğŸŒŸ ä»€ä¹ˆæ˜¯ä¼˜é›…å…³é—­**ï¼šç»™MySQLè¶³å¤Ÿæ—¶é—´å®Œæˆæ­£åœ¨å¤„ç†çš„äº‹åŠ¡ï¼Œç„¶åå®‰å…¨å…³é—­æœåŠ¡ã€‚

**ğŸ“‹ ä¼˜é›…å…³é—­æ­¥éª¤**ï¼š
```
ä¼˜é›…å…³é—­æµç¨‹ï¼š
1. åœæ­¢æ¥å—æ–°è¿æ¥
2. ç­‰å¾…ç°æœ‰è¿æ¥å®Œæˆå½“å‰äº‹åŠ¡
3. åˆ·æ–°è„é¡µåˆ°ç£ç›˜
4. å…³é—­æ—¥å¿—æ–‡ä»¶
5. é‡Šæ”¾èµ„æºï¼Œå®‰å…¨é€€å‡º
```

**ğŸ”§ ä¼˜é›…å…³é—­å‘½ä»¤**

```bash
# === Linuxç³»ç»ŸæœåŠ¡ç®¡ç† ===
# systemdç³»ç»Ÿï¼ˆCentOS 7+, Ubuntu 16+ï¼‰
sudo systemctl stop mysqld          # CentOS/RHEL
sudo systemctl stop mysql           # Ubuntu/Debian

# SysV Initç³»ç»Ÿï¼ˆè€ç‰ˆæœ¬ï¼‰
sudo service mysqld stop            # CentOS/RHEL
sudo service mysql stop             # Ubuntu/Debian

# === ç›´æ¥å…³é—­ ===
# ä½¿ç”¨MySQLå‘½ä»¤
mysqladmin -u root -p shutdown

# å‘é€ä¿¡å·ï¼ˆæ¨èï¼‰
sudo kill -TERM $(cat /var/run/mysqld/mysqld.pid)
```

> âš ï¸ **æ³¨æ„**ï¼šä¼˜é›…å…³é—­å¯èƒ½éœ€è¦å‡ ç§’åˆ°å‡ åˆ†é’Ÿï¼Œå…·ä½“æ—¶é—´å–å†³äºå½“å‰äº‹åŠ¡æ•°é‡å’Œæ•°æ®é‡

### 4.2 å¼ºåˆ¶å…³é—­ï¼ˆç´§æ€¥æƒ…å†µï¼‰


**âš¡ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¼ºåˆ¶å…³é—­**ï¼š
- æœåŠ¡æ— å“åº”ï¼Œä¼˜é›…å…³é—­å¤±æ•ˆ
- ç´§æ€¥ç»´æŠ¤ï¼Œå¿…é¡»ç«‹å³åœæ­¢
- æœåŠ¡å‡ºç°ä¸¥é‡é”™è¯¯

**ğŸš¨ å¼ºåˆ¶å…³é—­å‘½ä»¤**
```bash
# å‘é€KILLä¿¡å·ï¼ˆæœ€åæ‰‹æ®µï¼‰
sudo kill -9 $(cat /var/run/mysqld/mysqld.pid)

# æˆ–è€…ç›´æ¥æ€è¿›ç¨‹
sudo pkill -9 mysqld
```

**âš ï¸ å¼ºåˆ¶å…³é—­é£é™©**ï¼š
- **æ•°æ®ä¸¢å¤±**ï¼šæœªæäº¤çš„äº‹åŠ¡ä¼šä¸¢å¤±
- **æ•°æ®æŸå**ï¼šå¯èƒ½å¯¼è‡´è¡¨æŸå
- **æ¢å¤æ—¶é—´**ï¼šä¸‹æ¬¡å¯åŠ¨éœ€è¦crash recovery

### 4.3 å…³é—­æ–¹å¼å¯¹æ¯”


| å…³é—­æ–¹å¼ | **å®‰å…¨æ€§** | **é€Ÿåº¦** | **æ•°æ®é£é™©** | **ä½¿ç”¨åœºæ™¯** |
|---------|-----------|---------|-------------|-------------|
| ğŸŒŸ **systemctl stop** | `æœ€é«˜` | `è¾ƒæ…¢` | `æ— é£é™©` | `æ—¥å¸¸ç»´æŠ¤` |
| ğŸ”§ **mysqladmin shutdown** | `é«˜` | `ä¸­ç­‰` | `æä½é£é™©` | `æ‰‹åŠ¨ç®¡ç†` |
| âš¡ **kill -TERM** | `é«˜` | `ä¸­ç­‰` | `ä½é£é™©` | `è„šæœ¬è‡ªåŠ¨åŒ–` |
| ğŸš¨ **kill -9** | `ä½` | `æœ€å¿«` | `é«˜é£é™©` | `ç´§æ€¥æƒ…å†µ` |

---

## 5. ğŸš€ å¯åŠ¨å¤±è´¥è¯Šæ–­ä¸å¤„ç†


### 5.1 å¸¸è§å¯åŠ¨å¤±è´¥åŸå› 


**ğŸ“‹ å¯åŠ¨å¤±è´¥é—®é¢˜åˆ†ç±»**

**æƒé™é—®é¢˜**ï¼š
```
é—®é¢˜è¡¨ç°ï¼š
- Permission deniedé”™è¯¯
- æ— æ³•å†™å…¥æ•°æ®ç›®å½•
- æ— æ³•åˆ›å»ºå¥—æ¥å­—æ–‡ä»¶

è§£å†³æ–¹æ³•ï¼š
# æ£€æŸ¥æ•°æ®ç›®å½•æƒé™
ls -la /var/lib/mysql

# ä¿®æ­£æƒé™
sudo chown -R mysql:mysql /var/lib/mysql
sudo chmod 750 /var/lib/mysql
```

**ç«¯å£å ç”¨é—®é¢˜**ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tulpn | grep 3306
sudo lsof -i :3306

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ï¼š
# 1. åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
# 2. ä¿®æ”¹MySQLç«¯å£é…ç½®
```

**é…ç½®æ–‡ä»¶é”™è¯¯**ï¼š
```bash
# æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•
mysqld --help --verbose

# æ£€æŸ¥é…ç½®æ–‡ä»¶æƒé™
ls -la /etc/my.cnf

# å¤‡ä»½å¹¶ä¿®å¤é…ç½®
sudo cp /etc/my.cnf /etc/my.cnf.backup
```

### 5.2 é”™è¯¯æ—¥å¿—åˆ†æ


**ğŸ” é”™è¯¯æ—¥å¿—ä½ç½®**
```bash
# æŸ¥æ‰¾é”™è¯¯æ—¥å¿—æ–‡ä»¶
# æ–¹æ³•1ï¼šæŸ¥çœ‹é…ç½®
mysql> SHOW VARIABLES LIKE 'log_error';

# æ–¹æ³•2ï¼šå¸¸è§ä½ç½®
/var/log/mysql/error.log        # Ubuntu/Debian
/var/log/mysqld.log             # CentOS/RHEL
/usr/local/mysql/data/hostname.err  # ç¼–è¯‘å®‰è£…
```

**ğŸ“– æ—¥å¿—åˆ†æç¤ºä¾‹**
```
å¸¸è§é”™è¯¯ä¿¡æ¯è§£è¯»ï¼š

[ERROR] Can't start server: Bind on TCP/IP port: Address already in use
â†’ ç«¯å£3306è¢«å ç”¨

[ERROR] Fatal error: Can't open and lock privilege tables
â†’ æƒé™è¡¨æŸåæˆ–æƒé™ä¸è¶³

[ERROR] InnoDB: Unable to lock ./ibdata1 error: 11
â†’ æ•°æ®æ–‡ä»¶è¢«é”å®šï¼Œå¯èƒ½æœ‰å…¶ä»–å®ä¾‹è¿è¡Œ

[ERROR] Can't connect to local MySQL server through socket
â†’ å¥—æ¥å­—æ–‡ä»¶é—®é¢˜æˆ–æœåŠ¡æœªå¯åŠ¨
```

### 5.3 å¯åŠ¨å¤±è´¥æ’æŸ¥æµç¨‹


```
å¯åŠ¨å¤±è´¥è¯Šæ–­æµç¨‹å›¾ï¼š

å¯åŠ¨å¤±è´¥
    â†“
æ£€æŸ¥é”™è¯¯æ—¥å¿— â”€â”€â†’ æ‰¾åˆ°å…·ä½“é”™è¯¯ä¿¡æ¯
    â†“
æƒé™é—®é¢˜ï¼Ÿ â”€â”€Yesâ†’ ä¿®æ­£æ–‡ä»¶æƒé™ â”€â”€â†’ é‡æ–°å¯åŠ¨
    â†“ No
ç«¯å£å ç”¨ï¼Ÿ â”€â”€Yesâ†’ åœæ­¢å ç”¨è¿›ç¨‹æˆ–æ”¹ç«¯å£ â”€â”€â†’ é‡æ–°å¯åŠ¨  
    â†“ No
é…ç½®é”™è¯¯ï¼Ÿ â”€â”€Yesâ†’ æ£€æŸ¥å¹¶ä¿®æ­£é…ç½®æ–‡ä»¶ â”€â”€â†’ é‡æ–°å¯åŠ¨
    â†“ No
æ•°æ®æŸåï¼Ÿ â”€â”€Yesâ†’ æ•°æ®æ¢å¤æˆ–é‡å»º â”€â”€â†’ é‡æ–°å¯åŠ¨
    â†“ No
è”ç³»æŠ€æœ¯æ”¯æŒ
```

### 5.4 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ


**ğŸ”§ æ•°æ®ç›®å½•åˆå§‹åŒ–é—®é¢˜**
```bash
# MySQL 5.7+ åˆå§‹åŒ–æ•°æ®ç›®å½•
sudo mysqld --initialize --user=mysql --datadir=/var/lib/mysql

# æŸ¥çœ‹ä¸´æ—¶å¯†ç ï¼ˆåœ¨é”™è¯¯æ—¥å¿—ä¸­ï¼‰
sudo grep 'temporary password' /var/log/mysqld.log
```

**ğŸ”’ æƒé™ä¿®å¤**
```bash
# å®Œæ•´çš„æƒé™ä¿®å¤æµç¨‹
sudo systemctl stop mysqld
sudo chown -R mysql:mysql /var/lib/mysql
sudo chown -R mysql:mysql /var/log/mysql
sudo chmod 750 /var/lib/mysql
sudo systemctl start mysqld
```

---

## 6. ğŸ”„ æœåŠ¡çŠ¶æ€ç›‘æ§


### 6.1 æœåŠ¡çŠ¶æ€æ£€æŸ¥


**ğŸ“Š åŸºæœ¬çŠ¶æ€æ£€æŸ¥**
```bash
# === ç³»ç»Ÿçº§æ£€æŸ¥ ===
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status mysqld
sudo systemctl is-active mysqld

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep mysqld
pgrep mysqld

# æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tulpn | grep 3306
sudo ss -tulpn | grep 3306
```

**ğŸ” MySQLå†…éƒ¨çŠ¶æ€**
```sql
-- === æ•°æ®åº“çº§æ£€æŸ¥ ===
-- æ£€æŸ¥æœåŠ¡è¿è¡Œæ—¶é—´
SHOW STATUS LIKE 'Uptime';

-- æ£€æŸ¥è¿æ¥çŠ¶æ€
SHOW STATUS LIKE 'Connections';
SHOW STATUS LIKE 'Threads_connected';
SHOW STATUS LIKE 'Max_used_connections';

-- æ£€æŸ¥æœåŠ¡å™¨å˜é‡
SHOW VARIABLES LIKE 'version';
SHOW VARIABLES LIKE 'port';
SHOW VARIABLES LIKE 'datadir';
```

### 6.2 ç›‘æ§å…³é”®æŒ‡æ ‡


**ğŸ“ˆ é‡è¦ç›‘æ§æŒ‡æ ‡**

| æŒ‡æ ‡ç±»å‹ | **ç›‘æ§é¡¹** | **æ­£å¸¸èŒƒå›´** | **å¼‚å¸¸å¤„ç†** |
|---------|-----------|-------------|-------------|
| ğŸ”— **è¿æ¥** | `å½“å‰è¿æ¥æ•°` | `< max_connectionsçš„80%` | `ä¼˜åŒ–åº”ç”¨è¿æ¥æ± ` |
| ğŸ’¾ **å†…å­˜** | `Buffer Poolä½¿ç”¨ç‡` | `80-95%` | `è°ƒæ•´buffer_pool_size` |
| ğŸ“ **ç£ç›˜** | `æ•°æ®ç›®å½•ç©ºé—´` | `ä½¿ç”¨ç‡ < 90%` | `æ¸…ç†æ—¥å¿—æˆ–æ‰©å®¹` |
| âš¡ **æ€§èƒ½** | `æ…¢æŸ¥è¯¢æ•°é‡` | `< æ€»æŸ¥è¯¢çš„5%` | `ä¼˜åŒ–SQLæˆ–ç´¢å¼•` |

**ğŸš¨ ç›‘æ§è„šæœ¬ç¤ºä¾‹**
```bash
#!/bin/bash
# MySQLæœåŠ¡ç›‘æ§è„šæœ¬

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
if ! systemctl is-active --quiet mysqld; then
    echo "âŒ MySQLæœåŠ¡æœªè¿è¡Œ"
    # å‘é€å‘Šè­¦é€šçŸ¥
    exit 1
fi

# æ£€æŸ¥è¿æ¥æ•°
connections=$(mysql -u monitor -p'password' -e "SHOW STATUS LIKE 'Threads_connected';" | tail -n 1 | awk '{print $2}')
max_connections=$(mysql -u monitor -p'password' -e "SHOW VARIABLES LIKE 'max_connections';" | tail -n 1 | awk '{print $2}')

if [ "$connections" -gt $((max_connections * 80 / 100)) ]; then
    echo "âš ï¸ è¿æ¥æ•°è¿‡é«˜: $connections/$max_connections"
fi

echo "âœ… MySQLæœåŠ¡è¿è¡Œæ­£å¸¸"
```

### 6.3 è‡ªåŠ¨åŒ–ç›‘æ§è®¾ç½®


**â° å®šæ—¶ç›‘æ§**
```bash
# æ·»åŠ åˆ°crontabï¼Œæ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
*/5 * * * * /path/to/mysql_monitor.sh

# æˆ–ä½¿ç”¨systemd timerï¼ˆç°ä»£æ–¹å¼ï¼‰
# åˆ›å»º mysql-monitor.service å’Œ mysql-monitor.timer
```

**ğŸ“± å‘Šè­¦é€šçŸ¥**
```bash
# ç®€å•çš„é‚®ä»¶å‘Šè­¦
if [ "$mysql_status" != "running" ]; then
    echo "MySQLæœåŠ¡å¼‚å¸¸" | mail -s "MySQLå‘Šè­¦" admin@company.com
fi

# æˆ–é›†æˆç›‘æ§ç³»ç»Ÿï¼ˆZabbixã€Nagiosã€Prometheusç­‰ï¼‰
```

---

## 7. ğŸ”§ å®ç”¨æ“ä½œæŠ€å·§


### 7.1 å¿«é€Ÿå¯åœè„šæœ¬


**ğŸš€ å¯åŠ¨è„šæœ¬**
```bash
#!/bin/bash
# mysql_start.sh - MySQLå¯åŠ¨è„šæœ¬

echo "ğŸš€ å¯åŠ¨MySQLæœåŠ¡..."

# æ£€æŸ¥æ˜¯å¦å·²è¿è¡Œ
if systemctl is-active --quiet mysqld; then
    echo "âœ… MySQLå·²åœ¨è¿è¡Œ"
    exit 0
fi

# å¯åŠ¨æœåŠ¡
sudo systemctl start mysqld

# ç­‰å¾…å¯åŠ¨å®Œæˆ
sleep 5

# éªŒè¯å¯åŠ¨çŠ¶æ€
if systemctl is-active --quiet mysqld; then
    echo "âœ… MySQLå¯åŠ¨æˆåŠŸ"
    # æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯
    mysql -u root -p -e "SELECT version(), now();"
else
    echo "âŒ MySQLå¯åŠ¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—"
    sudo tail -20 /var/log/mysqld.log
fi
```

**ğŸ›‘ åœæ­¢è„šæœ¬**
```bash
#!/bin/bash
# mysql_stop.sh - MySQLä¼˜é›…åœæ­¢è„šæœ¬

echo "ğŸ›‘ åœæ­¢MySQLæœåŠ¡..."

# æ£€æŸ¥æ˜¯å¦è¿è¡Œ
if ! systemctl is-active --quiet mysqld; then
    echo "â„¹ï¸ MySQLæœªè¿è¡Œ"
    exit 0
fi

# ä¼˜é›…åœæ­¢
sudo systemctl stop mysqld

# ç­‰å¾…åœæ­¢å®Œæˆ
timeout=30
while [ $timeout -gt 0 ] && systemctl is-active --quiet mysqld; do
    sleep 1
    ((timeout--))
done

if systemctl is-active --quiet mysqld; then
    echo "âš ï¸ ä¼˜é›…åœæ­¢è¶…æ—¶ï¼Œå°è¯•å¼ºåˆ¶åœæ­¢"
    sudo systemctl kill mysqld
else
    echo "âœ… MySQLå·²å®‰å…¨åœæ­¢"
fi
```

### 7.2 å¼€æœºè‡ªå¯åŠ¨è®¾ç½®


**ğŸ”„ è‡ªå¯åŠ¨é…ç½®**
```bash
# === systemdç³»ç»Ÿï¼ˆæ¨èï¼‰ ===
# å¯ç”¨å¼€æœºè‡ªå¯
sudo systemctl enable mysqld

# ç¦ç”¨å¼€æœºè‡ªå¯
sudo systemctl disable mysqld

# æ£€æŸ¥è‡ªå¯çŠ¶æ€
sudo systemctl is-enabled mysqld

# === ä¼ ç»Ÿinitç³»ç»Ÿ ===
# CentOS/RHEL
sudo chkconfig mysqld on

# Ubuntu/Debian
sudo update-rc.d mysql enable
```

### 7.3 å¤šå®ä¾‹ç®¡ç†


**ğŸ—ï¸ å¤šå®ä¾‹åœºæ™¯**ï¼šåœ¨ä¸€å°æœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªMySQLå®ä¾‹

```bash
# åˆ›å»ºå¤šå®ä¾‹ç›®å½•ç»“æ„
sudo mkdir -p /var/lib/mysql-3307/{data,logs,tmp}
sudo chown -R mysql:mysql /var/lib/mysql-3307

# å¤šå®ä¾‹é…ç½®æ–‡ä»¶ /etc/my-3307.cnf
[mysqld]
port = 3307
datadir = /var/lib/mysql-3307/data
socket = /var/lib/mysql-3307/mysql.sock
pid-file = /var/lib/mysql-3307/mysql.pid
log-error = /var/lib/mysql-3307/logs/error.log

# å¯åŠ¨ç¬¬äºŒä¸ªå®ä¾‹
sudo mysqld_safe --defaults-file=/etc/my-3307.cnf &

# è¿æ¥åˆ°ç‰¹å®šå®ä¾‹
mysql -u root -p --port=3307
mysql -u root -p --socket=/var/lib/mysql-3307/mysql.sock
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ MySQLæœåŠ¡æœ¬è´¨ï¼šè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“ç®¡ç†ç¨‹åº
ğŸ”¸ å¯åŠ¨æµç¨‹ï¼šé…ç½®è¯»å–â†’ç³»ç»Ÿåˆå§‹åŒ–â†’ç½‘ç»œç›‘å¬â†’æœåŠ¡å°±ç»ª
ğŸ”¸ ä¼˜é›…å…³é—­ï¼šç»™è¶³æ—¶é—´å®Œæˆäº‹åŠ¡ï¼Œå®‰å…¨åœæ­¢æœåŠ¡
ğŸ”¸ å¼ºåˆ¶å…³é—­ï¼šç´§æ€¥æƒ…å†µä½¿ç”¨ï¼Œæœ‰æ•°æ®é£é™©
ğŸ”¸ é…ç½®ç®¡ç†ï¼šé€šè¿‡my.cnfæ–‡ä»¶æ§åˆ¶æœåŠ¡è¡Œä¸º
ğŸ”¸ çŠ¶æ€ç›‘æ§ï¼šå®æ—¶äº†è§£æœåŠ¡è¿è¡ŒçŠ¶å†µ
```

### 8.2 å…³é”®æ“ä½œå‘½ä»¤


**ğŸ”¹ æ—¥å¸¸ç®¡ç†å‘½ä»¤**
```bash
# æœåŠ¡å¯åœ
sudo systemctl start/stop/restart mysqld    # åŸºæœ¬æ“ä½œ
sudo systemctl status mysqld                # çŠ¶æ€æŸ¥çœ‹
sudo systemctl enable/disable mysqld        # è‡ªå¯è®¾ç½®

# çŠ¶æ€æ£€æŸ¥
mysql> SHOW STATUS;                          # è¿è¡ŒçŠ¶æ€
mysql> SHOW VARIABLES;                       # é…ç½®å‚æ•°
mysqladmin status                            # å¿«é€ŸçŠ¶æ€
```

**ğŸ”¹ æ•…éšœæ’æŸ¥å‘½ä»¤**
```bash
# æ—¥å¿—æŸ¥çœ‹
sudo tail -f /var/log/mysqld.log            # å®æ—¶æ—¥å¿—
sudo grep ERROR /var/log/mysqld.log         # é”™è¯¯ä¿¡æ¯

# è¿›ç¨‹æ£€æŸ¥
ps aux | grep mysqld                         # è¿›ç¨‹çŠ¶æ€
sudo lsof -i :3306                         # ç«¯å£å ç”¨
```

### 8.3 æœ€ä½³å®è·µå»ºè®®


**âœ… è¿ç»´æœ€ä½³å®è·µ**
- **å®šæœŸå¤‡ä»½**ï¼šå¯åœå‰åéƒ½è¦ç¡®è®¤å¤‡ä»½å®Œæ•´
- **ç›‘æ§å‘Šè­¦**ï¼šè®¾ç½®è‡ªåŠ¨ç›‘æ§ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
- **é…ç½®ç®¡ç†**ï¼šç‰ˆæœ¬æ§åˆ¶é…ç½®æ–‡ä»¶ï¼Œä¾¿äºå›æ»š
- **æ–‡æ¡£è®°å½•**ï¼šè®°å½•æ¯æ¬¡é‡è¦çš„å¯åœæ“ä½œå’ŒåŸå› 

**âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹**
- **æƒé™æœ€å°åŒ–**ï¼šMySQLè¿›ç¨‹ä½¿ç”¨ä¸“ç”¨ç”¨æˆ·è¿è¡Œ
- **ç½‘ç»œå®‰å…¨**ï¼šé™åˆ¶bind-addressï¼Œé¿å…ä¸å¿…è¦çš„ç½‘ç»œæš´éœ²
- **æ—¥å¿—è½®è½¬**ï¼šé˜²æ­¢æ—¥å¿—æ–‡ä»¶å æ»¡ç£ç›˜
- **å®šæœŸæ›´æ–°**ï¼šåŠæ—¶å®‰è£…å®‰å…¨è¡¥ä¸

### 8.4 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è¿ç»´åœºæ™¯åº”ç”¨**
- **æ—¥å¸¸ç»´æŠ¤**ï¼šå®šæœŸé‡å¯æ¸…ç†å†…å­˜ï¼Œåº”ç”¨é…ç½®æ›´æ–°
- **æ•…éšœå¤„ç†**ï¼šå¿«é€Ÿè¯Šæ–­å¯åŠ¨é—®é¢˜ï¼Œæ¢å¤æœåŠ¡
- **æ€§èƒ½è°ƒä¼˜**ï¼šé€šè¿‡è°ƒæ•´å¯åŠ¨å‚æ•°ä¼˜åŒ–æ€§èƒ½
- **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šç¼–å†™è„šæœ¬å®ç°æœåŠ¡è‡ªåŠ¨ç®¡ç†

**ğŸ’¡ å¼€å‘åœºæ™¯åº”ç”¨**
- **å¼€å‘ç¯å¢ƒ**ï¼šå¿«é€Ÿå¯åœæµ‹è¯•æ•°æ®åº“
- **CI/CD**ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²ä¸­çš„æ•°æ®åº“æœåŠ¡ç®¡ç†
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDockerä¸­çš„MySQLæœåŠ¡ç®¡ç†
- **å¾®æœåŠ¡æ¶æ„**ï¼šå¤šä¸ªæ•°æ®åº“å®ä¾‹çš„åè°ƒç®¡ç†

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> ğŸ§  **å¯åœè¦è¯€**ï¼šä¼˜é›…å…³é—­ä¿æ•°æ®ï¼Œå¼ºåˆ¶åœæ­¢é£é™©å¤§ï¼›é…ç½®æƒé™è¦æ£€æŸ¥ï¼Œæ—¥å¿—ç›‘æ§ä¸å¯å°‘

**ğŸ”„ æ“ä½œæµç¨‹è®°å¿†**ï¼š
> å¯åŠ¨å‰æŸ¥é…ç½®ï¼Œå¯åŠ¨åçœ‹æ—¥å¿—ï¼›åœæ­¢å‰åšå¤‡ä»½ï¼Œåœæ­¢æ—¶ç»™æ—¶é—´