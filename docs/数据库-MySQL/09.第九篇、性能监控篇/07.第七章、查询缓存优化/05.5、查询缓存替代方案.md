---
title: 5ã€æŸ¥è¯¢ç¼“å­˜æ›¿ä»£æ–¹æ¡ˆ
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦æŸ¥è¯¢ç¼“å­˜æ›¿ä»£æ–¹æ¡ˆ](#1-ä¸ºä»€ä¹ˆéœ€è¦æŸ¥è¯¢ç¼“å­˜æ›¿ä»£æ–¹æ¡ˆ)
2. [Redisç¼“å­˜æ›¿ä»£](#2-Redisç¼“å­˜æ›¿ä»£)
3. [Memcachedåº”ç”¨](#3-Memcachedåº”ç”¨)
4. [åº”ç”¨å±‚æŸ¥è¯¢ç¼“å­˜](#4-åº”ç”¨å±‚æŸ¥è¯¢ç¼“å­˜)
5. [ç»“æœé›†ç¼“å­˜è®¾è®¡](#5-ç»“æœé›†ç¼“å­˜è®¾è®¡)
6. [ProxySQLæŸ¥è¯¢ç¼“å­˜](#6-ProxySQLæŸ¥è¯¢ç¼“å­˜)
7. [ä¸­é—´ä»¶ç¼“å­˜æ–¹æ¡ˆ](#7-ä¸­é—´ä»¶ç¼“å­˜æ–¹æ¡ˆ)
8. [åˆ†å¸ƒå¼ç¼“å­˜æ¶æ„](#8-åˆ†å¸ƒå¼ç¼“å­˜æ¶æ„)
9. [ç¼“å­˜æ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”](#9-ç¼“å­˜æ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”)
10. [ç¼“å­˜æ¶æ„é€‰å‹å†³ç­–](#10-ç¼“å­˜æ¶æ„é€‰å‹å†³ç­–)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš« ä¸ºä»€ä¹ˆéœ€è¦æŸ¥è¯¢ç¼“å­˜æ›¿ä»£æ–¹æ¡ˆ


### 1.1 MySQLæŸ¥è¯¢ç¼“å­˜çš„å±€é™æ€§


**åŸºæœ¬é—®é¢˜**ï¼šMySQLè‡ªå¸¦çš„æŸ¥è¯¢ç¼“å­˜åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­è¡¨ç°ä¸ä½³

```
MySQLæŸ¥è¯¢ç¼“å­˜çš„ç—›ç‚¹ï¼š

æ€§èƒ½é—®é¢˜ï¼š
â€¢ ç¼“å­˜é”ç«äº‰ä¸¥é‡ï¼Œé«˜å¹¶å‘ä¸‹æ€§èƒ½ä¸‹é™
â€¢ ç¼“å­˜å¤±æ•ˆç­–ç•¥è¿‡äºæ¿€è¿›ï¼Œç¨æœ‰æ›´æ–°å°±å…¨éƒ¨æ¸…ç©º
â€¢ ç¼“å­˜å‘½ä¸­ç‡ä½ï¼Œå®é™…æ”¶ç›Šæœ‰é™

åŠŸèƒ½é™åˆ¶ï¼š
â€¢ åªèƒ½ç¼“å­˜å®Œå…¨ç›¸åŒçš„SQLè¯­å¥
â€¢ æ— æ³•è·¨å®ä¾‹å…±äº«ç¼“å­˜æ•°æ®
â€¢ ç¼“å­˜å¤§å°å—MySQLå†…å­˜é™åˆ¶
```

### 1.2 æ›¿ä»£æ–¹æ¡ˆçš„å¿…è¦æ€§


**æ ¸å¿ƒåŸå› **ï¼šç°ä»£åº”ç”¨éœ€è¦æ›´çµæ´»ã€é«˜æ•ˆçš„ç¼“å­˜æœºåˆ¶

```
ä¸šåŠ¡éœ€æ±‚å˜åŒ–ï¼š
å¾®æœåŠ¡æ¶æ„ â†’ éœ€è¦è·¨æœåŠ¡ç¼“å­˜å…±äº«
é«˜å¹¶å‘åœºæ™¯ â†’ éœ€è¦æ›´é«˜çš„ç¼“å­˜æ€§èƒ½
å¤æ‚æŸ¥è¯¢   â†’ éœ€è¦æ™ºèƒ½ç¼“å­˜ç­–ç•¥
æ•°æ®ä¸€è‡´æ€§ â†’ éœ€è¦ç²¾ç¡®çš„ç¼“å­˜æ§åˆ¶
```

---

## 2. ğŸ”´ Redisç¼“å­˜æ›¿ä»£


### 2.1 Redisä½œä¸ºæŸ¥è¯¢ç¼“å­˜çš„ä¼˜åŠ¿


**ä¸ºä»€ä¹ˆé€‰æ‹©Redis**ï¼šRedisæ˜¯ç›®å‰æœ€æµè¡Œçš„ç¼“å­˜è§£å†³æ–¹æ¡ˆ

```
Redisæ ¸å¿ƒä¼˜åŠ¿ï¼š
é«˜æ€§èƒ½ï¼š     å†…å­˜æ“ä½œï¼Œæ”¯æŒæ•°ä¸‡QPS
ä¸°å¯Œæ•°æ®ç±»å‹ï¼š Stringã€Hashã€Listã€Setç­‰
æŒä¹…åŒ–ï¼š     æ”¯æŒRDBå’ŒAOFæŒä¹…åŒ–
é›†ç¾¤æ”¯æŒï¼š   æ”¯æŒä¸»ä»å¤åˆ¶å’Œé›†ç¾¤æ¨¡å¼
çµæ´»TTLï¼š    ç²¾ç¡®æ§åˆ¶ç¼“å­˜è¿‡æœŸæ—¶é—´
```

### 2.2 RedisæŸ¥è¯¢ç¼“å­˜å®ç°


**åŸºæœ¬å®ç°æ€è·¯**ï¼šå°†æŸ¥è¯¢ç»“æœä»¥JSONæ ¼å¼å­˜å‚¨åˆ°Redis

```java
// RedisæŸ¥è¯¢ç¼“å­˜ç¤ºä¾‹
@Service
public class QueryCacheService {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    // ç”Ÿæˆç¼“å­˜key
    private String generateCacheKey(String sql, Object... params) {
        return "query_cache:" + DigestUtils.md5Hex(sql + Arrays.toString(params));
    }
    
    // ä»ç¼“å­˜è·å–ç»“æœ
    public <T> List<T> getFromCache(String sql, Class<T> clazz, Object... params) {
        String key = generateCacheKey(sql, params);
        String cached = redisTemplate.opsForValue().get(key);
        
        if (cached != null) {
            return JSON.parseArray(cached, clazz);
        }
        return null;
    }
    
    // å­˜å‚¨æŸ¥è¯¢ç»“æœåˆ°ç¼“å­˜
    public void putToCache(String sql, Object result, int ttlSeconds, Object... params) {
        String key = generateCacheKey(sql, params);
        String value = JSON.toJSONString(result);
        redisTemplate.opsForValue().set(key, value, ttlSeconds, TimeUnit.SECONDS);
    }
}
```

### 2.3 Redisç¼“å­˜ç­–ç•¥


**ç¼“å­˜æ›´æ–°ç­–ç•¥**ï¼šç¡®ä¿æ•°æ®ä¸€è‡´æ€§çš„å…³é”®

```
å¸¸ç”¨ç­–ç•¥å¯¹æ¯”ï¼š

Cache-Asideï¼ˆæ—è·¯ç¼“å­˜ï¼‰ï¼š
â€¢ åº”ç”¨è´Ÿè´£ç¼“å­˜çš„è¯»å†™
â€¢ æ•°æ®æ›´æ–°æ—¶ä¸»åŠ¨åˆ é™¤ç¼“å­˜
â€¢ é€‚åˆè¯»å¤šå†™å°‘åœºæ™¯

Write-Throughï¼ˆå†™ç©¿é€ï¼‰ï¼š
â€¢ å†™æ“ä½œåŒæ—¶æ›´æ–°æ•°æ®åº“å’Œç¼“å­˜
â€¢ ä¿è¯æ•°æ®ä¸€è‡´æ€§
â€¢ å†™æ€§èƒ½ç›¸å¯¹è¾ƒå·®

Write-Behindï¼ˆå†™å›ï¼‰ï¼š
â€¢ åªå†™ç¼“å­˜ï¼Œå¼‚æ­¥å†™æ•°æ®åº“
â€¢ å†™æ€§èƒ½æœ€å¥½
â€¢ æ•°æ®ä¸€è‡´æ€§é£é™©è¾ƒé«˜
```

---

## 3. ğŸŸ¢ Memcachedåº”ç”¨


### 3.1 Memcachedç‰¹ç‚¹


**ç®€å•é«˜æ•ˆçš„ç¼“å­˜æ–¹æ¡ˆ**ï¼šMemcachedä¸“æ³¨äºç®€å•çš„key-valueç¼“å­˜

```
Memcachedä¼˜åŠ¿ï¼š
æ€§èƒ½æé«˜ï¼š   çº¯å†…å­˜æ“ä½œï¼Œå»¶è¿Ÿæä½
èµ„æºå ç”¨å°ï¼š å†…å­˜å’ŒCPUä½¿ç”¨æ•ˆç‡é«˜
åè®®ç®€å•ï¼š   åè®®å¼€é”€å°ï¼Œç½‘ç»œæ•ˆç‡é«˜
ç¨³å®šå¯é ï¼š   ä¹…ç»è€ƒéªŒï¼Œç¨³å®šæ€§å¥½

å±€é™æ€§ï¼š
åŠŸèƒ½å•ä¸€ï¼š   åªæ”¯æŒStringç±»å‹
æ— æŒä¹…åŒ–ï¼š   é‡å¯åæ•°æ®ä¸¢å¤±
æ— é›†ç¾¤ï¼š     éœ€è¦å®¢æˆ·ç«¯åˆ†ç‰‡
```

### 3.2 MemcachedæŸ¥è¯¢ç¼“å­˜å®ç°


**åŸºæœ¬ä½¿ç”¨æ–¹å¼**ï¼šé€šè¿‡å®¢æˆ·ç«¯åº“æ“ä½œMemcached

```java
// MemcachedæŸ¥è¯¢ç¼“å­˜ç¤ºä¾‹
@Service
public class MemcachedQueryCache {
    
    private MemcachedClient memcachedClient;
    
    // ç¼“å­˜æŸ¥è¯¢ç»“æœ
    public void cacheQueryResult(String sql, Object result, int expireSeconds) {
        String key = "query:" + DigestUtils.md5Hex(sql);
        String value = JSON.toJSONString(result);
        memcachedClient.set(key, expireSeconds, value);
    }
    
    // è·å–ç¼“å­˜ç»“æœ
    public <T> List<T> getCachedResult(String sql, Class<T> clazz) {
        String key = "query:" + DigestUtils.md5Hex(sql);
        String cached = (String) memcachedClient.get(key);
        
        if (cached != null) {
            return JSON.parseArray(cached, clazz);
        }
        return null;
    }
    
    // æ¸…é™¤ç›¸å…³ç¼“å­˜
    public void invalidateCache(String... patterns) {
        for (String pattern : patterns) {
            memcachedClient.delete("query:" + DigestUtils.md5Hex(pattern));
        }
    }
}
```

---

## 4. ğŸ’» åº”ç”¨å±‚æŸ¥è¯¢ç¼“å­˜


### 4.1 åº”ç”¨å±‚ç¼“å­˜è®¾è®¡æ€è·¯


**åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°ç¼“å­˜é€»è¾‘**ï¼šæœ€çµæ´»çš„ç¼“å­˜æ§åˆ¶æ–¹å¼

```
åº”ç”¨å±‚ç¼“å­˜æ¶æ„ï¼š
                åº”ç”¨ç¨‹åº
                    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   ç¼“å­˜ç®¡ç†å™¨     â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ â€¢ ç¼“å­˜ç­–ç•¥      â”‚
            â”‚ â€¢ å¤±æ•ˆæ§åˆ¶      â”‚
            â”‚ â€¢ ä¸€è‡´æ€§ä¿è¯    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   ç¼“å­˜å­˜å‚¨       â”‚
            â”‚ Redis/Memcached â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Spring Cacheå®ç°


**ä½¿ç”¨Spring Cacheæ³¨è§£ç®€åŒ–ç¼“å­˜æ“ä½œ**ï¼šå£°æ˜å¼ç¼“å­˜ç®¡ç†

```java
// Spring Cacheé…ç½®
@Configuration
@EnableCaching
public class CacheConfig {
    
    @Bean
    public CacheManager cacheManager() {
        RedisCacheManager.Builder builder = RedisCacheManager
            .RedisCacheManagerBuilder
            .fromConnectionFactory(redisConnectionFactory())
            .cacheDefaults(cacheConfiguration());
        return builder.build();
    }
    
    private RedisCacheConfiguration cacheConfiguration() {
        return RedisCacheConfiguration.defaultCacheConfig()
            .entryTtl(Duration.ofMinutes(10))
            .serializeKeysWith(RedisSerializationContext.SerializationPair
                .fromSerializer(new StringRedisSerializer()))
            .serializeValuesWith(RedisSerializationContext.SerializationPair
                .fromSerializer(new GenericJackson2JsonRedisSerializer()));
    }
}

// ä½¿ç”¨ç¼“å­˜æ³¨è§£
@Service
public class UserService {
    
    // ç¼“å­˜æŸ¥è¯¢ç»“æœ
    @Cacheable(value = "users", key = "#userId")
    public User getUserById(Long userId) {
        return userRepository.findById(userId);
    }
    
    // æ›´æ–°æ—¶æ¸…é™¤ç¼“å­˜
    @CacheEvict(value = "users", key = "#user.id")
    public void updateUser(User user) {
        userRepository.save(user);
    }
    
    // ç¼“å­˜å¤æ‚æŸ¥è¯¢
    @Cacheable(value = "userQueries", key = "#department + '_' + #status")
    public List<User> getUsersByDepartmentAndStatus(String department, String status) {
        return userRepository.findByDepartmentAndStatus(department, status);
    }
}
```

### 4.3 è‡ªå®šä¹‰ç¼“å­˜ç®¡ç†å™¨


**æ›´ç²¾ç»†çš„ç¼“å­˜æ§åˆ¶**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶ç¼“å­˜é€»è¾‘

```java
// è‡ªå®šä¹‰ç¼“å­˜ç®¡ç†å™¨
@Component
public class QueryCacheManager {
    
    private final RedisTemplate<String, String> redisTemplate;
    private final Map<String, Integer> cacheTtlMap;
    
    // æ ¹æ®è¡¨åç¡®å®šç¼“å­˜TTL
    public int getCacheTtl(String tableName) {
        return cacheTtlMap.getOrDefault(tableName, 300); // é»˜è®¤5åˆ†é’Ÿ
    }
    
    // æ™ºèƒ½ç¼“å­˜keyç”Ÿæˆ
    public String generateSmartKey(String sql, Object... params) {
        // æå–è¡¨å
        String tableName = extractTableName(sql);
        // ç”Ÿæˆå‚æ•°ç­¾å
        String paramHash = DigestUtils.md5Hex(Arrays.toString(params));
        return String.format("smart_cache:%s:%s", tableName, paramHash);
    }
    
    // æŒ‰è¡¨æ¸…é™¤ç¼“å­˜
    public void invalidateByTable(String tableName) {
        Set<String> keys = redisTemplate.keys("smart_cache:" + tableName + ":*");
        if (!keys.isEmpty()) {
            redisTemplate.delete(keys);
        }
    }
}
```

---

## 5. ğŸ“Š ç»“æœé›†ç¼“å­˜è®¾è®¡


### 5.1 ç»“æœé›†ç¼“å­˜ç­–ç•¥


**é’ˆå¯¹ä¸åŒæŸ¥è¯¢ç±»å‹è®¾è®¡ä¸“é—¨çš„ç¼“å­˜ç­–ç•¥**ï¼šæé«˜ç¼“å­˜æ•ˆç‡

```
ç»“æœé›†åˆ†ç±»ç¼“å­˜ï¼š

é™æ€æ•°æ®ç¼“å­˜ï¼š
â€¢ å­—å…¸è¡¨ã€é…ç½®è¡¨
â€¢ ç¼“å­˜æ—¶é—´ï¼š1-24å°æ—¶
â€¢ æ›´æ–°æ–¹å¼ï¼šæ‰‹åŠ¨æ¸…é™¤

å‡†é™æ€æ•°æ®ç¼“å­˜ï¼š
â€¢ ç”¨æˆ·ä¿¡æ¯ã€å•†å“ä¿¡æ¯
â€¢ ç¼“å­˜æ—¶é—´ï¼š10-60åˆ†é’Ÿ
â€¢ æ›´æ–°æ–¹å¼ï¼šå®šæ—¶åˆ·æ–°

åŠ¨æ€æ•°æ®ç¼“å­˜ï¼š
â€¢ è®¢å•çŠ¶æ€ã€åº“å­˜ä¿¡æ¯
â€¢ ç¼“å­˜æ—¶é—´ï¼š1-5åˆ†é’Ÿ
â€¢ æ›´æ–°æ–¹å¼ï¼šäº‹ä»¶è§¦å‘
```

### 5.2 åˆ†é¡µç»“æœç¼“å­˜


**å¤„ç†åˆ†é¡µæŸ¥è¯¢çš„ç¼“å­˜ç­–ç•¥**ï¼šå¹³è¡¡å†…å­˜ä½¿ç”¨å’ŒæŸ¥è¯¢æ•ˆç‡

```java
// åˆ†é¡µç»“æœç¼“å­˜å®ç°
@Service
public class PageCacheService {
    
    private static final int MAX_CACHE_PAGES = 10; // æœ€å¤šç¼“å­˜10é¡µ
    
    // ç¼“å­˜åˆ†é¡µç»“æœ
    public <T> PageResult<T> getCachedPage(String baseQuery, int pageNum, int pageSize, Class<T> clazz) {
        String key = String.format("page_cache:%s:p%d:s%d", 
            DigestUtils.md5Hex(baseQuery), pageNum, pageSize);
        
        String cached = redisTemplate.opsForValue().get(key);
        if (cached != null) {
            return JSON.parseObject(cached, new TypeReference<PageResult<T>>() {});
        }
        return null;
    }
    
    // æ™ºèƒ½åˆ†é¡µç¼“å­˜
    public <T> void cachePageResult(String baseQuery, PageResult<T> result, int pageNum, int pageSize) {
        // åªç¼“å­˜å‰å‡ é¡µçƒ­ç‚¹æ•°æ®
        if (pageNum <= MAX_CACHE_PAGES) {
            String key = String.format("page_cache:%s:p%d:s%d", 
                DigestUtils.md5Hex(baseQuery), pageNum, pageSize);
            
            // çƒ­ç‚¹é¡µé¢ç¼“å­˜æ—¶é—´æ›´é•¿
            int ttl = pageNum <= 3 ? 600 : 300; // å‰3é¡µç¼“å­˜10åˆ†é’Ÿï¼Œå…¶ä»–5åˆ†é’Ÿ
            redisTemplate.opsForValue().set(key, JSON.toJSONString(result), ttl, TimeUnit.SECONDS);
        }
    }
}
```

### 5.3 èšåˆç»“æœç¼“å­˜


**ç¼“å­˜å¤æ‚çš„ç»Ÿè®¡å’ŒèšåˆæŸ¥è¯¢ç»“æœ**ï¼šå‡å°‘æ•°æ®åº“è®¡ç®—è´Ÿæ‹…

```java
// èšåˆç»“æœç¼“å­˜
@Service
public class AggregationCacheService {
    
    // ç¼“å­˜ç»Ÿè®¡ç»“æœ
    @Cacheable(value = "stats", key = "#type + '_' + #dateRange")
    public StatResult getStatistics(String type, String dateRange) {
        return statisticsRepository.calculateStats(type, dateRange);
    }
    
    // ç¼“å­˜æŠ¥è¡¨æ•°æ®
    public ReportData getCachedReport(String reportType, Map<String, Object> params) {
        String key = generateReportKey(reportType, params);
        String cached = redisTemplate.opsForValue().get(key);
        
        if (cached != null) {
            return JSON.parseObject(cached, ReportData.class);
        }
        
        // ç”ŸæˆæŠ¥è¡¨å¹¶ç¼“å­˜
        ReportData reportData = reportService.generateReport(reportType, params);
        redisTemplate.opsForValue().set(key, JSON.toJSONString(reportData), 
            3600, TimeUnit.SECONDS); // ç¼“å­˜1å°æ—¶
        
        return reportData;
    }
}
```

---

## 6. ğŸ”€ ProxySQLæŸ¥è¯¢ç¼“å­˜


### 6.1 ProxySQLç®€ä»‹


**æ•°æ®åº“ä¸­é—´ä»¶çº§åˆ«çš„æŸ¥è¯¢ç¼“å­˜**ï¼šåœ¨æ•°æ®åº“ä»£ç†å±‚å®ç°ç¼“å­˜

```
ProxySQLæ¶æ„ï¼š
        åº”ç”¨ç¨‹åº
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ProxySQL      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ â€¢ æŸ¥è¯¢è·¯ç”±      â”‚
    â”‚ â€¢ æŸ¥è¯¢ç¼“å­˜      â”‚
    â”‚ â€¢ è´Ÿè½½å‡è¡¡      â”‚
    â”‚ â€¢ è¿æ¥æ±         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MySQLé›†ç¾¤     â”‚
    â”‚ Master/Slave    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ProxySQLæŸ¥è¯¢ç¼“å­˜é…ç½®


**é…ç½®ProxySQLçš„æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½**ï¼šé€æ˜çš„ç¼“å­˜å®ç°

```sql
-- ProxySQLæŸ¥è¯¢ç¼“å­˜é…ç½®
INSERT INTO mysql_query_rules (
    rule_id, active, match_pattern, destination_hostgroup, 
    cache_ttl, apply
) VALUES (
    1, 1, '^SELECT.*FROM users WHERE id=.*', 0, 300000, 1
);

-- é…ç½®ç¼“å­˜è§„åˆ™
INSERT INTO mysql_query_rules (
    rule_id, active, match_pattern, cache_ttl, apply
) VALUES 
(10, 1, '^SELECT.*FROM products WHERE.*', 600000, 1),  -- å•†å“æŸ¥è¯¢ç¼“å­˜10åˆ†é’Ÿ
(20, 1, '^SELECT.*FROM orders WHERE.*', 60000, 1),     -- è®¢å•æŸ¥è¯¢ç¼“å­˜1åˆ†é’Ÿ
(30, 1, '^SELECT COUNT.*', 300000, 1);                 -- ç»Ÿè®¡æŸ¥è¯¢ç¼“å­˜5åˆ†é’Ÿ

-- åŠ è½½é…ç½®
LOAD MYSQL QUERY RULES TO RUNTIME;
SAVE MYSQL QUERY RULES TO DISK;
```

### 6.3 ProxySQLç¼“å­˜ç›‘æ§


**ç›‘æ§ProxySQLç¼“å­˜æ•ˆæœ**ï¼šè¯„ä¼°ç¼“å­˜æ€§èƒ½å’Œå‘½ä¸­ç‡

```sql
-- æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
SELECT * FROM stats_mysql_query_cache;

-- æŸ¥çœ‹ç¼“å­˜å‘½ä¸­ç‡
SELECT 
    schemaname,
    SUM(count_hit) as cache_hits,
    SUM(count_get) as total_queries,
    ROUND(SUM(count_hit)*100.0/SUM(count_get), 2) as hit_rate_percent
FROM stats_mysql_query_cache 
GROUP BY schemaname;

-- æŸ¥çœ‹çƒ­ç‚¹æŸ¥è¯¢
SELECT digest_text, count_hit, count_get, 
       ROUND(count_hit*100.0/count_get, 2) as hit_rate
FROM stats_mysql_query_cache 
ORDER BY count_get DESC LIMIT 10;
```

---

## 7. ğŸ”— ä¸­é—´ä»¶ç¼“å­˜æ–¹æ¡ˆ


### 7.1 å¸¸è§ä¸­é—´ä»¶ç¼“å­˜äº§å“


**æ•°æ®åº“ä¸­é—´ä»¶çš„ç¼“å­˜èƒ½åŠ›å¯¹æ¯”**ï¼šé€‰æ‹©åˆé€‚çš„ä¸­é—´ä»¶æ–¹æ¡ˆ

| ä¸­é—´ä»¶ | **ç¼“å­˜èƒ½åŠ›** | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç¼ºç‚¹** |
|-------|-------------|-------------|-----------|
| **MyCat** | `æ”¯æŒç»“æœé›†ç¼“å­˜` | `åˆ†ç‰‡+ç¼“å­˜` | `âœ…åŠŸèƒ½ä¸°å¯Œ âŒé…ç½®å¤æ‚` |
| **Sharding-JDBC** | `åº”ç”¨å±‚ç¼“å­˜é›†æˆ` | `è½»é‡çº§åˆ†ç‰‡` | `âœ…æ€§èƒ½å¥½ âŒåŠŸèƒ½æœ‰é™` |
| **Atlas** | `åŸºç¡€æŸ¥è¯¢ç¼“å­˜` | `è¯»å†™åˆ†ç¦»` | `âœ…ç¨³å®š âŒåŠŸèƒ½ç®€å•` |
| **ProxySQL** | `å¼ºå¤§æŸ¥è¯¢ç¼“å­˜` | `MySQLä¸“ç”¨` | `âœ…åŠŸèƒ½å¼ºå¤§ âŒå­¦ä¹ æˆæœ¬é«˜` |

### 7.2 MyCatç¼“å­˜é…ç½®


**MyCatçš„æŸ¥è¯¢ç¼“å­˜å®ç°**ï¼šé…ç½®æ–‡ä»¶é©±åŠ¨çš„ç¼“å­˜æ–¹æ¡ˆ

```xml
<!-- MyCatç¼“å­˜é…ç½® schema.xml -->
<schema name="test_db" checkSQLschema="false" sqlMaxLimit="100">
    <!-- é…ç½®ç¼“å­˜è¡¨ -->
    <table name="users" dataNode="dn1,dn2" rule="mod-long" 
           primaryKey="id" autoIncrement="true">
        <!-- å¯ç”¨æŸ¥è¯¢ç¼“å­˜ -->
        <childTable name="user_cache" joinKey="user_id" parentKey="id" 
                   cache="true" cacheSize="10000" cacheTTL="600"/>
    </table>
</schema>

<!-- ç¼“å­˜é…ç½® cacheserver.properties -->
cache.server.type=redis
cache.server.pool.size=10
cache.redis.host=127.0.0.1
cache.redis.port=6379
cache.redis.timeout=2000
```

---

## 8. ğŸŒ åˆ†å¸ƒå¼ç¼“å­˜æ¶æ„


### 8.1 åˆ†å¸ƒå¼ç¼“å­˜è®¾è®¡åŸåˆ™


**æ„å»ºå¯æ‰©å±•çš„åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿ**ï¼šè§£å†³å¤§è§„æ¨¡åº”ç”¨çš„ç¼“å­˜éœ€æ±‚

```
åˆ†å¸ƒå¼ç¼“å­˜æ¶æ„è®¾è®¡ï¼š

                  â”Œâ”€â”€â”€ åº”ç”¨æœåŠ¡å™¨1 â”€â”€â”€â”
                  â”‚                  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚     ç¼“å­˜é›†ç¾¤ç®¡ç†        â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ â€¢ ä¸€è‡´æ€§å“ˆå¸Œ            â”‚
            â”‚ â€¢ æ•…éšœè½¬ç§»              â”‚
            â”‚ â€¢ æ•°æ®åˆ†ç‰‡              â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚             â”‚                 â”‚â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”         â”Œâ”€â”€â”€â–¼â–¼â”€â”€â”
â”‚Redis 1â”‚   â”‚Redis 2â”‚   ...   â”‚Redis Nâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Redis Clusterç¼“å­˜


**ä½¿ç”¨Redis Clusterå®ç°åˆ†å¸ƒå¼æŸ¥è¯¢ç¼“å­˜**ï¼šè‡ªåŠ¨åˆ†ç‰‡å’Œé«˜å¯ç”¨

```java
// Redis Clusteré…ç½®
@Configuration
public class RedisClusterConfig {
    
    @Bean
    public LettuceConnectionFactory redisConnectionFactory() {
        RedisClusterConfiguration clusterConfig = new RedisClusterConfiguration();
        clusterConfig.setClusterNodes(Arrays.asList(
            new RedisNode("192.168.1.10", 7000),
            new RedisNode("192.168.1.11", 7001),
            new RedisNode("192.168.1.12", 7002)
        ));
        clusterConfig.setMaxRedirects(3);
        
        return new LettuceConnectionFactory(clusterConfig);
    }
    
    @Bean
    public RedisTemplate<String, String> redisTemplate() {
        RedisTemplate<String, String> template = new RedisTemplate<>();
        template.setConnectionFactory(redisConnectionFactory());
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new StringRedisSerializer());
        return template;
    }
}

// åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡
@Service
public class DistributedCacheService {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    // æ™ºèƒ½åˆ†ç‰‡ç¼“å­˜
    public void cacheWithSharding(String key, Object value, int ttl) {
        // Redis Clusterè‡ªåŠ¨å¤„ç†åˆ†ç‰‡
        String jsonValue = JSON.toJSONString(value);
        redisTemplate.opsForValue().set(key, jsonValue, ttl, TimeUnit.SECONDS);
    }
    
    // æ‰¹é‡ç¼“å­˜æ“ä½œ
    public void batchCache(Map<String, Object> dataMap, int ttl) {
        redisTemplate.executePipelined((RedisCallback<Object>) connection -> {
            dataMap.forEach((key, value) -> {
                byte[] keyBytes = key.getBytes();
                byte[] valueBytes = JSON.toJSONString(value).getBytes();
                connection.setEx(keyBytes, ttl, valueBytes);
            });
            return null;
        });
    }
}
```

### 8.3 ç¼“å­˜ä¸€è‡´æ€§ä¿è¯


**åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ç¼“å­˜ä¸€è‡´æ€§ç­–ç•¥**ï¼šç¡®ä¿æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§

```java
// åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§ç®¡ç†
@Component
public class CacheConsistencyManager {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    @Autowired
    private ApplicationEventPublisher eventPublisher;
    
    // å‘å¸ƒç¼“å­˜å¤±æ•ˆäº‹ä»¶
    public void invalidateCache(String pattern) {
        // æœ¬åœ°æ¸…é™¤
        Set<String> localKeys = redisTemplate.keys(pattern);
        if (!localKeys.isEmpty()) {
            redisTemplate.delete(localKeys);
        }
        
        // å‘å¸ƒåˆ†å¸ƒå¼äº‹ä»¶
        CacheInvalidateEvent event = new CacheInvalidateEvent(pattern);
        eventPublisher.publishEvent(event);
    }
    
    // ç›‘å¬ç¼“å­˜å¤±æ•ˆäº‹ä»¶
    @EventListener
    public void handleCacheInvalidate(CacheInvalidateEvent event) {
        // å¤„ç†è¿œç¨‹ç¼“å­˜å¤±æ•ˆ
        broadcastCacheInvalidation(event.getPattern());
    }
    
    // ä½¿ç”¨ç‰ˆæœ¬å·ä¿è¯ä¸€è‡´æ€§
    public boolean cacheWithVersion(String key, Object value, String version, int ttl) {
        String versionKey = key + ":version";
        String currentVersion = redisTemplate.opsForValue().get(versionKey);
        
        if (currentVersion == null || currentVersion.equals(version)) {
            // åŸå­æ“ä½œæ›´æ–°ç¼“å­˜å’Œç‰ˆæœ¬
            redisTemplate.execute((RedisCallback<Object>) connection -> {
                connection.multi();
                connection.setEx(key.getBytes(), ttl, JSON.toJSONString(value).getBytes());
                connection.setEx(versionKey.getBytes(), ttl, version.getBytes());
                connection.exec();
                return null;
            });
            return true;
        }
        return false; // ç‰ˆæœ¬å†²çª
    }
}
```

---

## 9. âš¡ ç¼“å­˜æ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”


### 9.1 æ€§èƒ½æµ‹è¯•å¯¹æ¯”


**ä¸åŒç¼“å­˜æ–¹æ¡ˆçš„æ€§èƒ½è¡¨ç°**ï¼šåŸºäºå®é™…æµ‹è¯•æ•°æ®çš„å¯¹æ¯”åˆ†æ

| ç¼“å­˜æ–¹æ¡ˆ | **QPS** | **å¹³å‡å»¶è¿Ÿ** | **P95å»¶è¿Ÿ** | **å†…å­˜æ•ˆç‡** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|-------------|------------|-------------|-------------|
| **MySQLæŸ¥è¯¢ç¼“å­˜** | `5,000` | `2ms` | `5ms` | `ä½` | `ç®€å•æŸ¥è¯¢` |
| **Rediså•æœº** | `50,000` | `0.5ms` | `1ms` | `ä¸­` | `ä¸­å°è§„æ¨¡` |
| **Redis Cluster** | `200,000` | `0.8ms` | `2ms` | `é«˜` | `å¤§è§„æ¨¡åˆ†å¸ƒå¼` |
| **Memcached** | `80,000` | `0.3ms` | `0.8ms` | `é«˜` | `çº¯ç¼“å­˜åœºæ™¯` |
| **åº”ç”¨å±‚ç¼“å­˜** | `100,000` | `0.1ms` | `0.3ms` | `ä¸­` | `æœ¬åœ°çƒ­ç‚¹æ•°æ®` |
| **ProxySQL** | `30,000` | `1ms` | `3ms` | `ä¸­` | `æ•°æ®åº“ä»£ç†` |

### 9.2 èµ„æºæ¶ˆè€—å¯¹æ¯”


**ä¸åŒæ–¹æ¡ˆçš„èµ„æºä½¿ç”¨æƒ…å†µ**ï¼šå¸®åŠ©åšæ¶æ„å†³ç­–

```
èµ„æºæ¶ˆè€—åˆ†æï¼š

å†…å­˜ä½¿ç”¨ï¼š
Memcached < Redis < åº”ç”¨å±‚ç¼“å­˜ < ProxySQL < MySQLç¼“å­˜

CPUä½¿ç”¨ï¼š
åº”ç”¨å±‚ç¼“å­˜ < Memcached < Redis < ProxySQL < MySQLç¼“å­˜

ç½‘ç»œå¼€é”€ï¼š
åº”ç”¨å±‚ç¼“å­˜ < ProxySQL < Redis < Memcached < MySQLç¼“å­˜

è¿ç»´å¤æ‚åº¦ï¼š
MySQLç¼“å­˜ < åº”ç”¨å±‚ç¼“å­˜ < Memcached < Redis < ProxySQL
```

### 9.3 åœºæ™¯é€‚ç”¨æ€§åˆ†æ


**ä¸åŒä¸šåŠ¡åœºæ™¯çš„æœ€ä½³ç¼“å­˜é€‰æ‹©**ï¼šå®ç”¨çš„å†³ç­–æŒ‡å—

```
åœºæ™¯æ¨èï¼š

ğŸ“± ç§»åŠ¨åº”ç”¨/å°å‹ç½‘ç«™ï¼š
é¦–é€‰ï¼šRediså•æœº + åº”ç”¨å±‚ç¼“å­˜
åŸå› ï¼šé…ç½®ç®€å•ï¼Œæ€§èƒ½å¤Ÿç”¨ï¼Œæˆæœ¬ä½

ğŸ¢ ä¼ä¸šçº§åº”ç”¨ï¼š
é¦–é€‰ï¼šRedis Cluster + ProxySQL
åŸå› ï¼šé«˜å¯ç”¨ï¼Œæ˜“æ‰©å±•ï¼ŒåŠŸèƒ½å®Œå–„

ğŸ›’ ç”µå•†/é«˜å¹¶å‘åœºæ™¯ï¼š
é¦–é€‰ï¼šRedis Cluster + åº”ç”¨å±‚å¤šçº§ç¼“å­˜
åŸå› ï¼šæè‡´æ€§èƒ½ï¼Œçµæ´»æ§åˆ¶

ğŸ“Š æ•°æ®åˆ†æ/æŠ¥è¡¨ç³»ç»Ÿï¼š
é¦–é€‰ï¼šRedis + Memcachedæ··åˆ
åŸå› ï¼šå¤§å®¹é‡ç¼“å­˜ï¼Œæˆæœ¬æ•ˆç›Šå¥½
```

---

## 10. ğŸ¯ ç¼“å­˜æ¶æ„é€‰å‹å†³ç­–


### 10.1 é€‰å‹å†³ç­–çŸ©é˜µ


**ç³»ç»Ÿæ€§çš„ç¼“å­˜æ–¹æ¡ˆé€‰æ‹©æ¡†æ¶**ï¼šåŸºäºä¸šåŠ¡éœ€æ±‚åšå‡ºæœ€ä½³é€‰æ‹©

```
å†³ç­–ç»´åº¦è¯„ä¼°ï¼š

æ€§èƒ½è¦æ±‚ï¼š
ä½  (< 1ä¸‡QPS)   â†’ MySQLç¼“å­˜/å•æœºRedis
ä¸­  (1-10ä¸‡QPS)  â†’ Rediså•æœº/Memcached
é«˜  (> 10ä¸‡QPS)  â†’ Redis Cluster/æ··åˆæ–¹æ¡ˆ

æ•°æ®ä¸€è‡´æ€§è¦æ±‚ï¼š
å¼ºä¸€è‡´æ€§ â†’ åº”ç”¨å±‚ç¼“å­˜ + äº‹åŠ¡æ§åˆ¶
æœ€ç»ˆä¸€è‡´æ€§ â†’ Redis + å¼‚æ­¥æ›´æ–°
å¼±ä¸€è‡´æ€§ â†’ Memcached + å®šæ—¶åˆ·æ–°

ç³»ç»Ÿå¤æ‚åº¦ï¼š
ç®€å• â†’ MySQLç¼“å­˜/åº”ç”¨å±‚ç¼“å­˜
ä¸­ç­‰ â†’ Rediså•æœº
å¤æ‚ â†’ åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤
```

### 10.2 æˆæœ¬æ•ˆç›Šåˆ†æ


**ä¸åŒæ–¹æ¡ˆçš„æ€»ä½“æ‹¥æœ‰æˆæœ¬**ï¼šåŒ…å«ç¡¬ä»¶ã€äººåŠ›ã€ç»´æŠ¤æˆæœ¬

```java
// æˆæœ¬è®¡ç®—æ¨¡å‹
public class CacheCostCalculator {
    
    // è®¡ç®—æ€»æ‹¥æœ‰æˆæœ¬
    public CostAnalysis calculateTotalCost(CacheArchitecture architecture, 
                                          int qps, int dataSize) {
        CostAnalysis cost = new CostAnalysis();
        
        // ç¡¬ä»¶æˆæœ¬
        cost.setHardwareCost(calculateHardwareCost(architecture, qps, dataSize));
        
        // äººåŠ›æˆæœ¬
        cost.setLabourCost(calculateLabourCost(architecture));
        
        // è¿ç»´æˆæœ¬
        cost.setOperationCost(calculateOperationCost(architecture));
        
        // é£é™©æˆæœ¬
        cost.setRiskCost(calculateRiskCost(architecture));
        
        return cost;
    }
    
    private double calculateHardwareCost(CacheArchitecture arch, int qps, int dataSize) {
        switch (arch) {
            case MYSQL_CACHE:
                return 0; // ä½¿ç”¨ç°æœ‰MySQLå®ä¾‹
            case REDIS_SINGLE:
                return estimateRedisInstanceCost(qps, dataSize);
            case REDIS_CLUSTER:
                return estimateRedisClusterCost(qps, dataSize);
            case MEMCACHED:
                return estimateMemcachedCost(qps, dataSize);
            default:
                return 0;
        }
    }
}
```

### 10.3 æ¶æ„æ¼”è¿›è·¯å¾„


**ç¼“å­˜æ¶æ„çš„æ¸è¿›å¼å‡çº§è·¯å¾„**ï¼šé¿å…å¤§è§„æ¨¡é‡æ„çš„é£é™©

```
æ¶æ„æ¼”è¿›å»ºè®®ï¼š

é˜¶æ®µ1ï¼šèµ·æ­¥é˜¶æ®µ
MySQLæŸ¥è¯¢ç¼“å­˜ â†’ åº”ç”¨å±‚ç®€å•ç¼“å­˜
â€¢ æˆæœ¬ä½ï¼Œé£é™©å°
â€¢ å¿«é€ŸéªŒè¯ç¼“å­˜æ•ˆæœ

é˜¶æ®µ2ï¼šæˆé•¿é˜¶æ®µ  
åº”ç”¨å±‚ç¼“å­˜ â†’ Rediså•æœº
â€¢ æ€§èƒ½æå‡æ˜æ˜¾
â€¢ åŠŸèƒ½æ›´åŠ ä¸°å¯Œ

é˜¶æ®µ3ï¼šæ‰©å±•é˜¶æ®µ
Rediså•æœº â†’ Redisä¸»ä» â†’ Redis Cluster
â€¢ é«˜å¯ç”¨ä¿éšœ
â€¢ æ— ç¼æ‰©å®¹èƒ½åŠ›

é˜¶æ®µ4ï¼šä¼˜åŒ–é˜¶æ®µ
å¤šçº§ç¼“å­˜ + ä¸­é—´ä»¶ç¼“å­˜
â€¢ æè‡´æ€§èƒ½ä¼˜åŒ–
â€¢ å¤æ‚åœºæ™¯æ”¯æŒ
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç¼“å­˜æ›¿ä»£çš„å¿…è¦æ€§ï¼šMySQLæŸ¥è¯¢ç¼“å­˜æ€§èƒ½ä¸ä½³ï¼Œéœ€è¦æ›´å¥½çš„è§£å†³æ–¹æ¡ˆ
ğŸ”¸ Redisä¼˜åŠ¿ï¼šé«˜æ€§èƒ½ã€ä¸°å¯ŒåŠŸèƒ½ã€é›†ç¾¤æ”¯æŒï¼Œæ˜¯æœ€ä¸»æµçš„ç¼“å­˜é€‰æ‹©
ğŸ”¸ åº”ç”¨å±‚ç¼“å­˜ï¼šæœ€çµæ´»çš„æ§åˆ¶æ–¹å¼ï¼Œå¯ä»¥å®ç°å¤æ‚çš„ç¼“å­˜ç­–ç•¥
ğŸ”¸ ä¸­é—´ä»¶ç¼“å­˜ï¼šProxySQLç­‰æä¾›é€æ˜çš„ç¼“å­˜èƒ½åŠ›ï¼Œé™ä½åº”ç”¨æ”¹é€ æˆæœ¬
ğŸ”¸ åˆ†å¸ƒå¼ç¼“å­˜ï¼šè§£å†³å¤§è§„æ¨¡åº”ç”¨çš„ç¼“å­˜éœ€æ±‚ï¼Œå®ç°æ°´å¹³æ‰©å±•
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‰æ‹©åˆé€‚çš„ç¼“å­˜æ–¹æ¡ˆ**
```
æ€§èƒ½ä¼˜å…ˆï¼šRedis Cluster + åº”ç”¨å±‚ç¼“å­˜
ç®€å•ä¼˜å…ˆï¼šMySQLç¼“å­˜ + Rediså•æœº  
æˆæœ¬ä¼˜å…ˆï¼šMemcached + åº”ç”¨å±‚ç¼“å­˜
åŠŸèƒ½ä¼˜å…ˆï¼šRedis + ProxySQLç»„åˆ
```

**ğŸ”¹ ç¼“å­˜ä¸€è‡´æ€§ç­–ç•¥**
```
å¼ºä¸€è‡´æ€§ï¼šåŒæ­¥æ›´æ–°ç¼“å­˜å’Œæ•°æ®åº“
æœ€ç»ˆä¸€è‡´æ€§ï¼šå¼‚æ­¥æ›´æ–°ï¼Œå…è®¸çŸ­æš‚ä¸ä¸€è‡´
å¼±ä¸€è‡´æ€§ï¼šå®šæ—¶åˆ·æ–°ï¼Œå®¹å¿æ•°æ®å»¶è¿Ÿ
```

**ğŸ”¹ æ¶æ„è®¾è®¡åŸåˆ™**
```
æ¸è¿›æ¼”è¿›ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥å‡çº§
ä¸šåŠ¡å¯¼å‘ï¼šæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆ
æˆæœ¬å¹³è¡¡ï¼šç»¼åˆè€ƒè™‘æ€§èƒ½ã€æˆæœ¬ã€å¤æ‚åº¦
ç›‘æ§ä¼˜å…ˆï¼šå»ºç«‹å®Œå–„çš„ç¼“å­˜ç›‘æ§ä½“ç³»
```

### 11.3 å®é™…åº”ç”¨ä»·å€¼


- **æ€§èƒ½æå‡**ï¼šç›¸æ¯”MySQLæŸ¥è¯¢ç¼“å­˜ï¼Œæ€§èƒ½æå‡10-100å€
- **æ‰©å±•èƒ½åŠ›**ï¼šæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œæ»¡è¶³å¤§è§„æ¨¡åº”ç”¨éœ€æ±‚
- **çµæ´»æ§åˆ¶**ï¼šç²¾ç¡®æ§åˆ¶ç¼“å­˜ç­–ç•¥ï¼Œé€‚åº”å¤æ‚ä¸šåŠ¡åœºæ™¯
- **æˆæœ¬ä¼˜åŒ–**ï¼šå‡å°‘æ•°æ®åº“è´Ÿè½½ï¼Œé™ä½ç¡¬ä»¶æŠ•å…¥
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ˜¾è‘—æå‡åº”ç”¨å“åº”é€Ÿåº¦

**æ ¸å¿ƒè®°å¿†**ï¼š
- MySQLæŸ¥è¯¢ç¼“å­˜å·²è¿‡æ—¶ï¼Œç°ä»£åº”ç”¨éœ€è¦æ›´å¥½çš„ç¼“å­˜æ–¹æ¡ˆ
- Redisæ˜¯é¦–é€‰ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œæ€§èƒ½å¼ºåŠ²åŠŸèƒ½ä¸°å¯Œ
- åº”ç”¨å±‚ç¼“å­˜æä¾›æœ€å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶èƒ½åŠ›
- é€‰æ‹©ç¼“å­˜æ–¹æ¡ˆè¦ç»¼åˆè€ƒè™‘æ€§èƒ½ã€æˆæœ¬ã€å¤æ‚åº¦
- æ¶æ„æ¼”è¿›åº”è¯¥æ¸è¿›å¼è¿›è¡Œï¼Œé¿å…å¤§è§„æ¨¡é‡æ„é£é™©