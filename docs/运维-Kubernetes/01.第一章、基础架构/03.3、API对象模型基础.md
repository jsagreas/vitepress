---
title: 3ã€APIå¯¹è±¡æ¨¡å‹åŸºç¡€
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Kubernetes APIå¯¹è±¡](#1-ä»€ä¹ˆæ˜¯kubernetes-apiå¯¹è±¡)
2. [APIå¯¹è±¡çš„åŸºæœ¬æ„æˆ](#2-apiå¯¹è±¡çš„åŸºæœ¬æ„æˆ)
3. [APIç‰ˆæœ¬ç®¡ç†è¯¦è§£](#3-apiç‰ˆæœ¬ç®¡ç†è¯¦è§£)
4. [èµ„æºç±»å‹Kindè§£æ](#4-èµ„æºç±»å‹kindè§£æ)
5. [å…ƒæ•°æ®metadataæ·±åº¦ç†è§£](#5-å…ƒæ•°æ®metadataæ·±åº¦ç†è§£)
6. [è§„æ ¼å®šä¹‰specä¸çŠ¶æ€status](#6-è§„æ ¼å®šä¹‰specä¸çŠ¶æ€status)
7. [æ ‡ç­¾å’Œé€‰æ‹©å™¨ç³»ç»Ÿ](#7-æ ‡ç­¾å’Œé€‰æ‹©å™¨ç³»ç»Ÿ)
8. [æ³¨è§£ç³»ç»Ÿè¯¦è§£](#8-æ³¨è§£ç³»ç»Ÿè¯¦è§£)
9. [å®é™…æ“ä½œæ¡ˆä¾‹](#9-å®é™…æ“ä½œæ¡ˆä¾‹)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯Kubernetes APIå¯¹è±¡


### 1.1 ç”¨ç”Ÿæ´»ä¾‹å­ç†è§£APIå¯¹è±¡


æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åœ¨ç½‘ä¸Šè´­ä¹°ä¸€ä»¶å•†å“ï¼Œéœ€è¦å¡«å†™ä¸€ä¸ªè®¢å•è¡¨æ ¼ï¼š

```
ğŸ“‹ ç½‘è´­è®¢å•è¡¨æ ¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¢å•ç¼–å·: #12345                        â”‚
â”‚ å•†å“åç§°: iPhone 15                     â”‚
â”‚ æ•°é‡: 1å°                               â”‚
â”‚ æ”¶è´§åœ°å€: åŒ—äº¬å¸‚æœé˜³åŒº...                â”‚
â”‚ è®¢å•çŠ¶æ€: å·²å‘è´§                        â”‚
â”‚ ç‰©æµä¿¡æ¯: æ­£åœ¨é…é€ä¸­                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Kubernetesçš„APIå¯¹è±¡å°±åƒè¿™ä¸ªè®¢å•è¡¨æ ¼ï¼**

> ğŸ’¡ **é€šä¿—ç†è§£**
> 
> APIå¯¹è±¡ = ä¸€ä¸ªæ ‡å‡†åŒ–çš„"è¡¨æ ¼æ¨¡æ¿"ï¼Œç”¨æ¥æè¿°ä½ æƒ³åœ¨Kubernetesé›†ç¾¤ä¸­åˆ›å»ºä»€ä¹ˆä¸œè¥¿

### 1.2 APIå¯¹è±¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯APIå¯¹è±¡ï¼Ÿ**
```
ç®€å•æ¥è¯´ï¼šAPIå¯¹è±¡å°±æ˜¯Kubernetesä¸­æ‰€æœ‰èµ„æºçš„"èº«ä»½è¯"
- æ¯ä¸ªPodã€Serviceã€Deploymentéƒ½æ˜¯ä¸€ä¸ªAPIå¯¹è±¡
- å®ƒä»¬éƒ½æœ‰ç»Ÿä¸€çš„æ ¼å¼å’Œè§„èŒƒ
- é€šè¿‡YAMLæˆ–JSONæ–‡ä»¶æ¥æè¿°
```

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦APIå¯¹è±¡ï¼Ÿ**
```
æ ‡å‡†åŒ–ç®¡ç†ï¼š
â”œâ”€ ç»Ÿä¸€çš„æè¿°æ ¼å¼
â”œâ”€ ç‰ˆæœ¬åŒ–çš„ç®¡ç†æ–¹å¼  
â”œâ”€ å£°æ˜å¼çš„é…ç½®æ–¹æ³•
â””â”€ å¯é¢„æµ‹çš„è¡Œä¸ºæ¨¡å¼
```

---

## 2. ğŸ“‹ APIå¯¹è±¡çš„åŸºæœ¬æ„æˆ


### 2.1 APIå¯¹è±¡çš„"å››å¤§ä»¶"


æ¯ä¸ªKubernetes APIå¯¹è±¡éƒ½åƒä¸€ä¸ªæ ‡å‡†è¡¨æ ¼ï¼Œæœ‰å›ºå®šçš„å››ä¸ªéƒ¨åˆ†ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  apiVersion: apps/v1          â† APIç‰ˆæœ¬  â”‚
â”‚  kind: Deployment            â† èµ„æºç±»å‹  â”‚
â”‚  metadata:                   â† å…ƒæ•°æ®   â”‚
â”‚    name: my-app                         â”‚
â”‚    namespace: default                   â”‚
â”‚  spec:                       â† æœŸæœ›è§„æ ¼  â”‚
â”‚    replicas: 3                          â”‚
â”‚    ...                                  â”‚
â”‚  status:                     â† å½“å‰çŠ¶æ€  â”‚
â”‚    readyReplicas: 2                     â”‚
â”‚    ...                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å››å¤§ç»„æˆéƒ¨åˆ†è¯¦è§£


| ğŸ·ï¸ **ç»„æˆéƒ¨åˆ†** | **ä½œç”¨** | **ç±»æ¯”** |
|----------------|---------|---------|
| **apiVersion** | å‘Šè¯‰K8sç”¨å“ªä¸ªç‰ˆæœ¬çš„è§„åˆ™ | è¡¨æ ¼ç‰ˆæœ¬å· |
| **kind** | è¯´æ˜è¿™æ˜¯ä»€ä¹ˆç±»å‹çš„èµ„æº | è¡¨æ ¼ç±»å‹ï¼ˆè®¢å•/å‘ç¥¨ï¼‰ |
| **metadata** | èµ„æºçš„åŸºæœ¬ä¿¡æ¯ | è¡¨æ ¼å¤´éƒ¨ä¿¡æ¯ |
| **spec** | ä½ æƒ³è¦çš„ç†æƒ³çŠ¶æ€ | è¡¨æ ¼ä¸»è¦å†…å®¹ |
| **status** | å½“å‰çš„å®é™…çŠ¶æ€ | è¡¨æ ¼å¤„ç†çŠ¶æ€ |

> ğŸ§  **è®°å¿†æŠ€å·§**
> 
> *"ç‰ˆæœ¬ç±»å‹å…ƒæ•°æ®ï¼Œè§„æ ¼çŠ¶æ€è¦è®°ç‰¢"*

---

## 3. ğŸ”¢ APIç‰ˆæœ¬ç®¡ç†è¯¦è§£


### 3.1 ä»€ä¹ˆæ˜¯apiVersion


**apiVersionå°±åƒè½¯ä»¶çš„ç‰ˆæœ¬å·**ï¼Œå‘Šè¯‰Kubernetesç”¨å“ªå¥—"è§„åˆ™"æ¥ç†è§£ä½ çš„é…ç½®ã€‚

```
ç±»æ¯”ç†è§£ï¼š
Word 2019æ–‡æ¡£ â‰  Word 2003æ–‡æ¡£
ä¸åŒç‰ˆæœ¬ = ä¸åŒåŠŸèƒ½å’Œæ ¼å¼
```

### 3.2 å¸¸è§çš„apiVersion


**ğŸ”¸ æ ¸å¿ƒèµ„æºï¼ˆç¨³å®šç‰ˆï¼‰**
```yaml
# Podã€Serviceã€ConfigMapç­‰åŸºç¡€èµ„æº
apiVersion: v1

# ç¤ºä¾‹ï¼šPodé…ç½®
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
```

**ğŸ”¸ Appsèµ„æºï¼ˆåº”ç”¨ç›¸å…³ï¼‰**
```yaml
# Deploymentã€ReplicaSetã€DaemonSetç­‰
apiVersion: apps/v1

# ç¤ºä¾‹ï¼šDeploymenté…ç½®  
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-deployment
```

**ğŸ”¸ æ‰©å±•èµ„æº**
```yaml
# Ingressç½‘ç»œé…ç½®
apiVersion: networking.k8s.io/v1

# HorizontalPodAutoscalerè‡ªåŠ¨æ‰©å®¹
apiVersion: autoscaling/v2
```

### 3.3 ç‰ˆæœ¬ç¨³å®šæ€§æ ‡è¯†


**ç‰ˆæœ¬ç¨³å®šæ€§åˆ†çº§ï¼š**

| ğŸ·ï¸ **çº§åˆ«** | **æ ‡è¯†** | **å«ä¹‰** | **å»ºè®®** |
|------------|---------|---------|---------|
| `ğŸŸ¢ ç¨³å®šç‰ˆ` | `v1`, `v2` | å¯æ”¾å¿ƒç”¨äºç”Ÿäº§ | âœ… æ¨èä½¿ç”¨ |
| `ğŸŸ¡ æµ‹è¯•ç‰ˆ` | `v1beta1` | åŠŸèƒ½åŸºæœ¬ç¨³å®š | âš ï¸ è°¨æ…ä½¿ç”¨ |
| `ğŸ”´ å†…æµ‹ç‰ˆ` | `v1alpha1` | åŠŸèƒ½ä¸ç¨³å®š | âŒ é¿å…ç”Ÿäº§ä½¿ç”¨ |

**è¿›åº¦å±•ç¤ºï¼š**
```
åŠŸèƒ½æˆç†Ÿåº¦: v1alpha1 â†’ v1beta1 â†’ v1
å¼€å‘é˜¶æ®µ:   [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] â†’ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘] â†’ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]
ç¨³å®šç¨‹åº¦:     30%           70%           100%
```

---

## 4. ğŸ·ï¸ èµ„æºç±»å‹Kindè§£æ


### 4.1 Kindçš„ä½œç”¨


**Kindå°±åƒå‘Šè¯‰Kubernetesï¼š"æˆ‘è¦åˆ›å»ºä»€ä¹ˆä¸œè¥¿"**

```
ç”Ÿæ´»ç±»æ¯”ï¼š
å»é¤å…ç‚¹é¤ â†’ "æˆ‘è¦ä¸€ä»½å®«ä¿é¸¡ä¸" â† è¿™å°±æ˜¯Kind
åœ¨K8sä¸­ â†’ "æˆ‘è¦ä¸€ä¸ªDeployment" â† è¿™ä¹Ÿæ˜¯Kind
```

### 4.2 å¸¸ç”¨Kindåˆ†ç±»


**ğŸ”¸ å·¥ä½œè´Ÿè½½ç±»ï¼ˆè¿è¡Œåº”ç”¨ï¼‰**

```
Pod          â†’ æœ€å°è¿è¡Œå•å…ƒï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼‰
Deployment   â†’ ç®¡ç†Podå‰¯æœ¬ï¼ˆæ¨èç”¨è¿™ä¸ªï¼‰
ReplicaSet   â†’ Podå‰¯æœ¬æ§åˆ¶å™¨ï¼ˆé€šå¸¸ä¸ç›´æ¥ç”¨ï¼‰
DaemonSet    â†’ æ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ä¸ªPod
StatefulSet  â†’ æœ‰çŠ¶æ€åº”ç”¨ç®¡ç†
Job          â†’ ä¸€æ¬¡æ€§ä»»åŠ¡
CronJob      â†’ å®šæ—¶ä»»åŠ¡
```

**ğŸ”¸ æœåŠ¡ç½‘ç»œç±»ï¼ˆç½‘ç»œé€šä¿¡ï¼‰**

```
Service      â†’ ä¸ºPodæä¾›ç¨³å®šçš„ç½‘ç»œè®¿é—®
Ingress      â†’ HTTP/HTTPSè·¯ç”±è§„åˆ™  
NetworkPolicy â†’ ç½‘ç»œç­–ç•¥æ§åˆ¶
```

**ğŸ”¸ é…ç½®å­˜å‚¨ç±»ï¼ˆé…ç½®å’Œæ•°æ®ï¼‰**

```
ConfigMap    â†’ é…ç½®æ–‡ä»¶ç®¡ç†
Secret       â†’ æ•æ„Ÿä¿¡æ¯ç®¡ç†
PersistentVolume â†’ æŒä¹…åŒ–å­˜å‚¨
```

### 4.3 Kindé€‰æ‹©æŒ‡å—


**ğŸ¯ æ–°æ‰‹å¸¸ç”¨é€‰æ‹©ï¼š**

```
æˆ‘è¦è¿è¡Œåº”ç”¨ â†’ é€‰æ‹© Deployment
æˆ‘è¦å†…éƒ¨é€šä¿¡ â†’ é€‰æ‹© Service  
æˆ‘è¦å¤–éƒ¨è®¿é—® â†’ é€‰æ‹© Ingress
æˆ‘è¦å­˜é…ç½® â†’ é€‰æ‹© ConfigMap
æˆ‘è¦å­˜å¯†ç  â†’ é€‰æ‹© Secret
```

**å†³ç­–æµç¨‹å›¾ï¼š**
```
éœ€è¦è¿è¡Œåº”ç”¨ï¼Ÿ
    â†“ Yes
éœ€è¦å¤šä¸ªå‰¯æœ¬ï¼Ÿ
    â†“ Yes        â†“ No
Deployment     Pod
    
éœ€è¦ç½‘ç»œè®¿é—®ï¼Ÿ
    â†“ Yes
å†…éƒ¨è®¿é—® â†’ Service
å¤–éƒ¨è®¿é—® â†’ Service + Ingress
```

---

## 5. ğŸ“ å…ƒæ•°æ®metadataæ·±åº¦ç†è§£


### 5.1 metadataçš„æ ¸å¿ƒä½œç”¨


**metadataå°±åƒèº«ä»½è¯**ï¼ŒåŒ…å«äº†èµ„æºçš„æ‰€æœ‰åŸºæœ¬ä¿¡æ¯ï¼š

```yaml
metadata:
  name: my-awesome-app           # å§“å
  namespace: production          # ä½å€ï¼ˆå‘½åç©ºé—´ï¼‰
  labels:                        # æ ‡ç­¾ï¼ˆç‰¹å¾ï¼‰
    app: web-server
    version: v1.0
  annotations:                   # æ³¨è§£ï¼ˆå¤‡æ³¨ä¿¡æ¯ï¼‰
    description: "ä¸»è¦çš„WebæœåŠ¡å™¨"
```

### 5.2 æ ¸å¿ƒmetadataå­—æ®µ


**ğŸ”¸ å¿…å¡«å­—æ®µ**

| **å­—æ®µ** | **ä½œç”¨** | **ç¤ºä¾‹** | **æ³¨æ„äº‹é¡¹** |
|---------|---------|---------|-------------|
| `name` | èµ„æºåç§° | `my-app` | å‘½åç©ºé—´å†…å”¯ä¸€ |
| `namespace` | å‘½åç©ºé—´ | `default` | ä¸å¡«é»˜è®¤ä¸º`default` |

**ğŸ”¸ é‡è¦å¯é€‰å­—æ®µ**

| **å­—æ®µ** | **ä½œç”¨** | **ä½¿ç”¨åœºæ™¯** |
|---------|---------|-------------|
| `labels` | æ ‡ç­¾é€‰æ‹© | æœåŠ¡å‘ç°ã€æ‰¹é‡æ“ä½œ |
| `annotations` | æ³¨è§£ä¿¡æ¯ | æ–‡æ¡£è¯´æ˜ã€å·¥å…·é…ç½® |
| `uid` | å”¯ä¸€æ ‡è¯†ç¬¦ | ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ |
| `resourceVersion` | èµ„æºç‰ˆæœ¬ | ç³»ç»Ÿè‡ªåŠ¨ç®¡ç† |

### 5.3 å‘½åè§„èŒƒå’Œæœ€ä½³å®è·µ


**âœ… å¥½çš„å‘½åç¤ºä¾‹ï¼š**
```yaml
metadata:
  name: web-server-frontend      # æ¸…æ™°çš„åŠŸèƒ½æè¿°
  namespace: production          # æ˜ç¡®çš„ç¯å¢ƒ
  labels:
    app: web-server             # åº”ç”¨å
    tier: frontend              # å±‚çº§
    version: "1.2"              # ç‰ˆæœ¬
    environment: production      # ç¯å¢ƒ
```

**âŒ ä¸å¥½çš„å‘½åç¤ºä¾‹ï¼š**
```yaml
metadata:
  name: app1                    # åç§°ä¸æ˜ç¡®
  namespace: ns1                # å‘½åç©ºé—´ä¸æ¸…æ™°
  labels:
    x: y                        # æ ‡ç­¾æ²¡æœ‰æ„ä¹‰
```

**ğŸ“‹ å‘½åè§„èŒƒæ£€æŸ¥æ¸…å•ï¼š**
- [ ] åç§°æ˜¯å¦å…·æœ‰æè¿°æ€§ï¼Ÿ
- [ ] æ˜¯å¦éµå¾ª`kebab-case`é£æ ¼ï¼Ÿ
- [ ] æ ‡ç­¾æ˜¯å¦æœ‰ä¸šåŠ¡å«ä¹‰ï¼Ÿ
- [ ] å‘½åç©ºé—´æ˜¯å¦æ˜ç¡®ç¯å¢ƒï¼Ÿ

---

## 6. âš™ï¸ è§„æ ¼å®šä¹‰specä¸çŠ¶æ€status


### 6.1 specå’Œstatusçš„å…³ç³»


è¿™æ˜¯Kubernetesæœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼å¯ä»¥ç”¨å¼€è½¦æ¥ç†è§£ï¼š

```
ğŸš— å¼€è½¦ç±»æ¯”ï¼š

spec (è§„æ ¼/æœŸæœ›):
"æˆ‘æƒ³ä»¥60km/hçš„é€Ÿåº¦è¡Œé©¶"

status (çŠ¶æ€/å®é™…):  
"å½“å‰å®é™…é€Ÿåº¦58km/h"

Kubernetesçš„å·¥ä½œ:
ä¸æ–­è°ƒæ•´ï¼Œè®©å®é™…çŠ¶æ€æ¥è¿‘æœŸæœ›çŠ¶æ€
```

### 6.2 å£°æ˜å¼é…ç½®çš„å¨åŠ›


**ğŸ”¸ ä¼ ç»Ÿå‘½ä»¤å¼ vs K8så£°æ˜å¼**

```
å‘½ä»¤å¼ï¼ˆå‘Šè¯‰æ€ä¹ˆåšï¼‰ï¼š
1. åˆ›å»º3ä¸ªPod
2. è®¾ç½®ç¯å¢ƒå˜é‡  
3. é…ç½®ç½‘ç»œç«¯å£
4. å¯åŠ¨åº”ç”¨

å£°æ˜å¼ï¼ˆå‘Šè¯‰è¦ä»€ä¹ˆï¼‰ï¼š
spec:
  replicas: 3           # æˆ‘è¦3ä¸ªå‰¯æœ¬
  containers:           # å®¹å™¨é…ç½®
  - name: app
    image: nginx:1.20
    ports:
    - containerPort: 80
```

> ğŸ’¡ **å£°æ˜å¼çš„å¥½å¤„**
>
> å°±åƒå¯¹ç®¡å®¶è¯´"æˆ‘è¦ä¸€ä¸ªæ•´æ´çš„æˆ¿é—´"ï¼Œè€Œä¸æ˜¯è¯¦ç»†å‘Šè¯‰å¦‚ä½•æ‰“æ‰«æ¯ä¸ªè§’è½

### 6.3 å®é™…çš„specé…ç½®ç¤ºä¾‹


**ğŸ”¸ Deploymentçš„specé…ç½®ï¼š**

```yaml
spec:
  replicas: 3                    # æœŸæœ›å‰¯æœ¬æ•°
  selector:                      # é€‰æ‹©å™¨
    matchLabels:
      app: nginx
  template:                      # Podæ¨¡æ¿
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.20
        ports:
        - containerPort: 80
        resources:               # èµ„æºé™åˆ¶
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"
```

**ğŸ”¸ Serviceçš„specé…ç½®ï¼š**

```yaml
spec:
  type: LoadBalancer             # æœåŠ¡ç±»å‹
  ports:
  - port: 80                     # æœåŠ¡ç«¯å£
    targetPort: 8080             # ç›®æ ‡ç«¯å£
    protocol: TCP
  selector:                      # é€‰æ‹©ç›®æ ‡Pod
    app: my-app
```

### 6.4 statusçŠ¶æ€ä¿¡æ¯


**statusæ˜¯åªè¯»çš„**ï¼Œç”±Kubernetesç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤ï¼š

```yaml
status:
  replicas: 3                    # æ€»å‰¯æœ¬æ•°
  readyReplicas: 2               # å°±ç»ªå‰¯æœ¬æ•°
  availableReplicas: 2           # å¯ç”¨å‰¯æœ¬æ•°
  conditions:                    # çŠ¶æ€æ¡ä»¶
  - type: Available
    status: "True"
    reason: MinimumReplicasAvailable
  - type: Progressing  
    status: "True"
    reason: NewReplicaSetAvailable
```

**çŠ¶æ€æŸ¥çœ‹å‘½ä»¤ï¼š**
```bash
# æŸ¥çœ‹PodçŠ¶æ€
kubectl get pods -o wide

# æŸ¥çœ‹Deploymentè¯¦ç»†çŠ¶æ€  
kubectl describe deployment my-app

# ä»¥YAMLæ ¼å¼æŸ¥çœ‹å®Œæ•´çŠ¶æ€
kubectl get deployment my-app -o yaml
```

---

## 7. ğŸ·ï¸ æ ‡ç­¾å’Œé€‰æ‹©å™¨ç³»ç»Ÿ


### 7.1 æ ‡ç­¾ç³»ç»Ÿå°±åƒ"è´´æ ‡ç­¾"


**ç”Ÿæ´»ä¸­çš„æ ‡ç­¾ç³»ç»Ÿï¼š**

```
ğŸ“š å›¾ä¹¦é¦†ä¹¦ç±åˆ†ç±»ï¼š
â”œâ”€ ç±»å‹: æŠ€æœ¯ä¹¦ç±
â”œâ”€ éš¾åº¦: åˆçº§  
â”œâ”€ è¯­è¨€: ä¸­æ–‡
â””â”€ å¹´ä»½: 2024

ğŸµ éŸ³ä¹æ’­æ”¾åˆ—è¡¨ï¼š
â”œâ”€ é£æ ¼: æµè¡ŒéŸ³ä¹
â”œâ”€ å¿ƒæƒ…: è½»æ¾
â”œâ”€ è¯­è¨€: è‹±æ–‡  
â””â”€ å¹´ä»£: 2020s
```

**Kubernetesä¸­çš„æ ‡ç­¾ï¼š**

```yaml
labels:
  app: web-server                # åº”ç”¨ç±»å‹
  tier: frontend                 # åº”ç”¨å±‚çº§  
  version: "v1.2"               # ç‰ˆæœ¬ä¿¡æ¯
  environment: production        # è¿è¡Œç¯å¢ƒ
  team: backend-team            # è´Ÿè´£å›¢é˜Ÿ
```

### 7.2 æ ‡ç­¾çš„æœ€ä½³å®è·µ


**âœ… æ¨èçš„æ ‡ç­¾æ¨¡å¼ï¼š**

```yaml
# æ ¸å¿ƒä¸šåŠ¡æ ‡ç­¾
labels:
  app.kubernetes.io/name: mysql           # åº”ç”¨åç§°
  app.kubernetes.io/instance: mysql-prod  # å®ä¾‹åç§°  
  app.kubernetes.io/version: "8.0"        # åº”ç”¨ç‰ˆæœ¬
  app.kubernetes.io/component: database   # ç»„ä»¶ç±»å‹
  app.kubernetes.io/part-of: wordpress    # æ‰€å±ç³»ç»Ÿ
  app.kubernetes.io/managed-by: helm      # ç®¡ç†å·¥å…·
```

**ğŸ”§ è‡ªå®šä¹‰ä¸šåŠ¡æ ‡ç­¾ï¼š**

```yaml
# ä¸šåŠ¡ç›¸å…³æ ‡ç­¾
labels:
  environment: production        # ç¯å¢ƒï¼šdev/test/prod
  team: platform-team          # å›¢é˜Ÿè´Ÿè´£äºº
  cost-center: "IT001"          # æˆæœ¬ä¸­å¿ƒ
  backup-policy: "daily"        # å¤‡ä»½ç­–ç•¥
  monitoring: "enabled"         # ç›‘æ§çŠ¶æ€
```

### 7.3 é€‰æ‹©å™¨æœºåˆ¶è¯¦è§£


**é€‰æ‹©å™¨å°±åƒ"ç­›å­"**ï¼Œç”¨æ¥ä»ä¸€å †èµ„æºä¸­ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„ï¼š

**ğŸ”¸ ç­‰å€¼é€‰æ‹©å™¨ï¼ˆç®€å•ç­›é€‰ï¼‰ï¼š**

```yaml
# Serviceé€‰æ‹©Pod
selector:
  app: nginx                    # é€‰æ‹©app=nginxçš„Pod
  version: v1                   # ä¸”version=v1çš„Pod
```

**ğŸ”¸ é›†åˆé€‰æ‹©å™¨ï¼ˆé«˜çº§ç­›é€‰ï¼‰ï¼š**

```yaml
# Deploymenté€‰æ‹©Pod
selector:
  matchLabels:                  # å¿…é¡»å®Œå…¨åŒ¹é…
    app: nginx
  matchExpressions:             # è¡¨è¾¾å¼åŒ¹é…
  - key: tier
    operator: In
    values: ["frontend", "cache"]
  - key: environment  
    operator: NotIn
    values: ["debug"]
```

**é€‰æ‹©å™¨æ“ä½œç¬¦ï¼š**

| **æ“ä½œç¬¦** | **å«ä¹‰** | **ç¤ºä¾‹** |
|-----------|---------|---------|
| `In` | åŒ…å«åœ¨åˆ—è¡¨ä¸­ | `tier In (frontend, backend)` |
| `NotIn` | ä¸åŒ…å«åœ¨åˆ—è¡¨ä¸­ | `env NotIn (debug)` |
| `Exists` | æ ‡ç­¾é”®å­˜åœ¨ | `version Exists` |
| `DoesNotExist` | æ ‡ç­¾é”®ä¸å­˜åœ¨ | `deprecated DoesNotExist` |

### 7.4 æ ‡ç­¾é€‰æ‹©å®æˆ˜æ¡ˆä¾‹


**åœºæ™¯ï¼šç®¡ç†ä¸€ä¸ªç”µå•†ç³»ç»Ÿ**

```yaml
# Frontend Pod
metadata:
  labels:
    app: ecommerce
    tier: frontend
    version: "2.1"
    environment: production

# Backend Pod  
metadata:
  labels:
    app: ecommerce
    tier: backend  
    version: "1.8"
    environment: production

# Database Pod
metadata:
  labels:
    app: ecommerce
    tier: database
    version: "5.7" 
    environment: production
```

**å„ç§é€‰æ‹©åœºæ™¯ï¼š**

```bash
# é€‰æ‹©æ‰€æœ‰frontendç»„ä»¶
kubectl get pods -l tier=frontend

# é€‰æ‹©productionç¯å¢ƒçš„æ‰€æœ‰Pod
kubectl get pods -l environment=production

# é€‰æ‹©ecommerceåº”ç”¨çš„édatabaseç»„ä»¶
kubectl get pods -l 'app=ecommerce,tier!=database'

# é€‰æ‹©ç‰ˆæœ¬ä¸º2.xçš„ç»„ä»¶
kubectl get pods -l 'version~=^2'
```

---

## 8. ğŸ“– æ³¨è§£ç³»ç»Ÿè¯¦è§£


### 8.1 æ³¨è§£vsæ ‡ç­¾çš„åŒºåˆ«


**æ ‡ç­¾vsæ³¨è§£å¯¹æ¯”ï¼š**

| **ç‰¹æ€§** | **æ ‡ç­¾ Labels** | **æ³¨è§£ Annotations** |
|---------|----------------|---------------------|
| **ç”¨é€”** | ç­›é€‰å’Œé€‰æ‹©èµ„æº | å­˜å‚¨æè¿°ä¿¡æ¯ |
| **å¯é€‰æ‹©** | âœ… å¯ä»¥ç”¨é€‰æ‹©å™¨ | âŒ ä¸èƒ½ç”¨é€‰æ‹©å™¨ |
| **é•¿åº¦é™åˆ¶** | 63å­—ç¬¦ | æ— é™åˆ¶ |
| **å†…å®¹ç±»å‹** | ç®€å•é”®å€¼ | å¤æ‚ç»“æ„åŒ–æ•°æ® |
| **ä½¿ç”¨åœºæ™¯** | ä¸šåŠ¡é€»è¾‘ | æ–‡æ¡£ã€é…ç½®ã€å…ƒä¿¡æ¯ |

**å½¢è±¡ç±»æ¯”ï¼š**
```
æ ‡ç­¾ = å•†å“ä»·ç­¾ â†’ ç”¨æ¥åˆ†ç±»å’ŒæŸ¥æ‰¾
æ³¨è§£ = å•†å“è¯´æ˜ä¹¦ â†’ ç”¨æ¥è®°å½•è¯¦ç»†ä¿¡æ¯
```

### 8.2 æ³¨è§£çš„å…¸å‹ä½¿ç”¨åœºæ™¯


**ğŸ”¸ æ–‡æ¡£å’Œæè¿°ä¿¡æ¯ï¼š**

```yaml
annotations:
  description: "ç”µå•†ç³»ç»Ÿçš„ä¸»è¦APIç½‘å…³"
  contact: "backend-team@company.com"  
  documentation: "https://wiki.company.com/api-gateway"
  changelog: "v2.1: æ–°å¢ç”¨æˆ·è®¤è¯åŠŸèƒ½"
```

**ğŸ”¸ éƒ¨ç½²å’Œè¿ç»´ä¿¡æ¯ï¼š**

```yaml
annotations:
  deployment.kubernetes.io/revision: "3"
  kubernetes.io/change-cause: "æ›´æ–°åˆ°nginx 1.20ç‰ˆæœ¬"
  last-applied-configuration: |
    {
      "apiVersion": "apps/v1",
      "kind": "Deployment",
      ...
    }
```

**ğŸ”¸ å·¥å…·é›†æˆé…ç½®ï¼š**

```yaml
annotations:
  # Ingress Controlleré…ç½®
  nginx.ingress.kubernetes.io/rewrite-target: /
  nginx.ingress.kubernetes.io/ssl-redirect: "true"
  
  # Prometheusç›‘æ§é…ç½®  
  prometheus.io/scrape: "true"
  prometheus.io/port: "8080"
  prometheus.io/path: "/metrics"
  
  # IstioæœåŠ¡ç½‘æ ¼é…ç½®
  sidecar.istio.io/inject: "true"
```

### 8.3 æ³¨è§£çš„æœ€ä½³å®è·µ


**âœ… å¥½çš„æ³¨è§£å®è·µï¼š**

```yaml
annotations:
  # æ¸…æ™°çš„é”®å
  app.mycompany.com/config-version: "v1.2"
  
  # ç»“æ„åŒ–çš„JSONæ•°æ®  
  app.mycompany.com/database-config: |
    {
      "host": "mysql.default.svc.cluster.local",
      "port": 3306,
      "database": "ecommerce"
    }
    
  # æœ‰æ„ä¹‰çš„æè¿°
  app.mycompany.com/deployment-notes: |
    éƒ¨ç½²è¯´æ˜ï¼š
    - ä½¿ç”¨è“ç»¿éƒ¨ç½²ç­–ç•¥
    - éœ€è¦é¢„çƒ­5åˆ†é’Ÿ
    - å¥åº·æ£€æŸ¥ç«¯ç‚¹: /health
```

**âŒ ä¸å¥½çš„æ³¨è§£å®è·µï¼š**

```yaml
annotations:
  a: b                          # æ— æ„ä¹‰çš„é”®å€¼
  temp: "some config"           # ä¸´æ—¶æ€§è´¨çš„é…ç½®
  "my-annotation": "value"      # æ²¡æœ‰åŸŸåå‰ç¼€
```

---

## 9. ğŸš€ å®é™…æ“ä½œæ¡ˆä¾‹


### 9.1 å®Œæ•´çš„Deploymentç¤ºä¾‹


è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„Webåº”ç”¨éƒ¨ç½²ï¼š

```yaml
apiVersion: apps/v1              # ä½¿ç”¨ç¨³å®šçš„apps API
kind: Deployment                 # åˆ›å»ºDeploymentèµ„æº
metadata:
  name: nginx-web-server         # èµ„æºåç§°
  namespace: production          # éƒ¨ç½²åˆ°ç”Ÿäº§å‘½åç©ºé—´
  labels:                        # Deploymentè‡ªèº«çš„æ ‡ç­¾
    app: nginx
    tier: frontend
    version: "1.0"
  annotations:                   # éƒ¨ç½²ç›¸å…³æ³¨è§£
    description: "Nginx WebæœåŠ¡å™¨"
    maintainer: "devops@company.com"
    deployment.kubernetes.io/change-cause: "åˆå§‹éƒ¨ç½²nginx 1.20"
spec:                           # æœŸæœ›çš„è§„æ ¼é…ç½®
  replicas: 3                   # è¿è¡Œ3ä¸ªPodå‰¯æœ¬
  selector:                     # é€‰æ‹©å™¨åŒ¹é…Pod
    matchLabels:
      app: nginx
      tier: frontend
  template:                     # Podæ¨¡æ¿å®šä¹‰
    metadata:
      labels:                   # Podçš„æ ‡ç­¾
        app: nginx
        tier: frontend
        version: "1.0"
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "80"
    spec:                       # Podå†…å®¹å™¨è§„æ ¼
      containers:
      - name: nginx
        image: nginx:1.20
        ports:
        - containerPort: 80
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"  
            cpu: "200m"
        livenessProbe:          # å­˜æ´»æ£€æŸ¥
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:         # å°±ç»ªæ£€æŸ¥  
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
          periodSeconds: 5
```

### 9.2 é…å¥—çš„Serviceé…ç½®


```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
  namespace: production  
  labels:
    app: nginx
    tier: frontend
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
spec:
  type: LoadBalancer
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
  selector:                     # é€‰æ‹©ç›®æ ‡Pod
    app: nginx
    tier: frontend
```

### 9.3 éƒ¨ç½²å’ŒéªŒè¯æ­¥éª¤


**ğŸ”¸ æ­¥éª¤1ï¼šåˆ›å»ºèµ„æº**

```bash
# åº”ç”¨é…ç½®æ–‡ä»¶
kubectl apply -f nginx-deployment.yaml
kubectl apply -f nginx-service.yaml

# éªŒè¯åˆ›å»ºç»“æœ
kubectl get deployments -n production
kubectl get services -n production
```

**ğŸ”¸ æ­¥éª¤2ï¼šæŸ¥çœ‹çŠ¶æ€**

```bash
# æŸ¥çœ‹PodçŠ¶æ€
kubectl get pods -n production -l app=nginx

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
kubectl describe deployment nginx-web-server -n production
```

**ğŸ”¸ æ­¥éª¤3ï¼šæµ‹è¯•è®¿é—®**

```bash
# è·å–Serviceå¤–éƒ¨IP
kubectl get svc nginx-service -n production

# æµ‹è¯•è®¿é—®ï¼ˆå‡è®¾å¤–éƒ¨IPæ˜¯1.2.3.4ï¼‰
curl http://1.2.3.4
```

### 9.4 å¸¸è§æ“ä½œå‘½ä»¤


**ğŸ“‹ èµ„æºç®¡ç†å‘½ä»¤ï¼š**

```bash
# æŸ¥çœ‹èµ„æºï¼ˆä½¿ç”¨æ ‡ç­¾ç­›é€‰ï¼‰
kubectl get pods -l app=nginx                    # æŒ‰åº”ç”¨æŸ¥çœ‹
kubectl get pods -l tier=frontend               # æŒ‰å±‚çº§æŸ¥çœ‹  
kubectl get pods -l environment=production      # æŒ‰ç¯å¢ƒæŸ¥çœ‹

# æ‰¹é‡æ“ä½œï¼ˆä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨ï¼‰
kubectl delete pods -l version=old              # åˆ é™¤æ—§ç‰ˆæœ¬Pod
kubectl scale deployment nginx-web-server --replicas=5  # æ‰©å®¹

# æŸ¥çœ‹èµ„æºè¯¦æƒ…
kubectl describe pod <pod-name>                 # æŸ¥çœ‹Podè¯¦æƒ…
kubectl logs <pod-name>                        # æŸ¥çœ‹æ—¥å¿—
kubectl exec -it <pod-name> -- /bin/bash       # è¿›å…¥å®¹å™¨
```

**ğŸ”§ æ•…éšœæ’æŸ¥å‘½ä»¤ï¼š**

```bash
# æŸ¥çœ‹äº‹ä»¶
kubectl get events -n production --sort-by='.lastTimestamp'

# æŸ¥çœ‹èµ„æºçŠ¶æ€
kubectl get pods -o wide                       # è¯¦ç»†Podä¿¡æ¯
kubectl top pods                              # èµ„æºä½¿ç”¨æƒ…å†µ

# ç¼–è¾‘èµ„æº
kubectl edit deployment nginx-web-server      # åœ¨çº¿ç¼–è¾‘é…ç½®
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ APIå¯¹è±¡ï¼šKubernetesä¸­æ‰€æœ‰èµ„æºçš„æ ‡å‡†åŒ–æè¿°æ ¼å¼
ğŸ”¸ å››å¤§ä»¶ï¼šapiVersionã€kindã€metadataã€specï¼ˆ+statusï¼‰
ğŸ”¸ å£°æ˜å¼ï¼šå‘Šè¯‰K8sä½ è¦ä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåš
ğŸ”¸ æ ‡ç­¾ç³»ç»Ÿï¼šç”¨äºèµ„æºç­›é€‰å’Œç»„ç»‡ç®¡ç†
ğŸ”¸ é€‰æ‹©å™¨ï¼šé€šè¿‡æ ‡ç­¾æ¥é€‰æ‹©ç›®æ ‡èµ„æº
ğŸ”¸ æ³¨è§£ç³»ç»Ÿï¼šå­˜å‚¨æè¿°å’Œé…ç½®ä¿¡æ¯
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å£°æ˜å¼é…ç½®çš„æ€ç»´è½¬å˜**
```
ä¼ ç»Ÿæ€ç»´ï¼šä¸€æ­¥æ­¥å‘Šè¯‰ç³»ç»Ÿæ€ä¹ˆåš
K8sæ€ç»´ï¼šå‘Šè¯‰ç³»ç»Ÿæœ€ç»ˆè¦ä»€ä¹ˆæ ·å­
ä¼˜åŠ¿ï¼šè‡ªåŠ¨åŒ–ã€è‡ªæ„ˆã€å¯é‡å¤
```

**ğŸ”¹ æ ‡ç­¾å’Œé€‰æ‹©å™¨çš„é…åˆ**
```
æ ‡ç­¾ï¼šç»™èµ„æº"è´´æ ‡ç­¾"
é€‰æ‹©å™¨ï¼šç”¨"ç­›å­"é€‰æ‹©èµ„æº  
é…åˆï¼šå®ç°çµæ´»çš„èµ„æºç®¡ç†
```

**ğŸ”¹ specå’Œstatusçš„å…³ç³»**
```
specï¼šä½ çš„æœŸæœ›ï¼ˆåº”è¯¥æ˜¯ä»€ä¹ˆæ ·ï¼‰
statusï¼šå½“å‰å®é™…æƒ…å†µï¼ˆç°åœ¨æ˜¯ä»€ä¹ˆæ ·ï¼‰
K8så·¥ä½œï¼šä¸æ–­è°ƒæ•´è®©statusæ¥è¿‘spec
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**âœ… æ–°æ‰‹æœ€ä½³å®è·µï¼š**
- ä»ç®€å•çš„Podã€Deploymentå¼€å§‹ç»ƒä¹ 
- å…»æˆè§„èŒƒå‘½åçš„ä¹ æƒ¯
- åˆç†ä½¿ç”¨æ ‡ç­¾è¿›è¡Œèµ„æºåˆ†ç±»
- å¤šç”¨`kubectl describe`æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

**âš ï¸ å¸¸è§æ³¨æ„äº‹é¡¹ï¼š**
- apiVersionè¦ä¸é›†ç¾¤ç‰ˆæœ¬åŒ¹é…
- æ ‡ç­¾å‘½åè¦æœ‰ä¸šåŠ¡å«ä¹‰
- æ³¨è§£ä¸èƒ½ç”¨äºèµ„æºé€‰æ‹©
- specé…ç½®è¦è€ƒè™‘èµ„æºé™åˆ¶

**ğŸ¯ å­¦ä¹ å»ºè®®ï¼š**
- å¤šåŠ¨æ‰‹å®è·µï¼Œç†è®ºç»“åˆæ“ä½œ
- å–„ç”¨`kubectl explain`æŸ¥çœ‹å­—æ®µè¯´æ˜
- å…³æ³¨å®˜æ–¹æ–‡æ¡£çš„æ›´æ–°
- åŠ å…¥ç¤¾åŒºäº¤æµå­¦ä¹ å¿ƒå¾—

### 10.4 ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘


**åŸºç¡€å·©å›ºï¼š**
```
â””â”€ ç†Ÿç»ƒæŒæ¡åŸºç¡€èµ„æºå¯¹è±¡
   â”œâ”€ Podã€Deploymentã€Service
   â”œâ”€ ConfigMapã€Secret
   â””â”€ æ ‡ç­¾å’Œé€‰æ‹©å™¨çš„çµæ´»è¿ç”¨
```

**è¿›é˜¶å­¦ä¹ ï¼š**
```
â””â”€ æ·±å…¥å­¦ä¹ é«˜çº§ç‰¹æ€§  
   â”œâ”€ ç½‘ç»œç­–ç•¥å’Œå­˜å‚¨
   â”œâ”€ è‡ªå®šä¹‰èµ„æºCRD
   â””â”€ Operatorå¼€å‘
```

> ğŸ’¡ **å­¦ä¹ å¿ƒå¾—**
> 
> Kubernetesçš„APIå¯¹è±¡æ¨¡å‹æ˜¯æ•´ä¸ªç³»ç»Ÿçš„åŸºç¡€ã€‚æŒæ¡äº†è¿™äº›æ¦‚å¿µï¼Œåç»­å­¦ä¹ å…¶ä»–ç»„ä»¶ä¼šå˜å¾—æ›´åŠ è½»æ¾ã€‚è®°ä½ï¼š**ç†è§£èƒœè¿‡è®°å¿†ï¼Œå®è·µèƒœè¿‡ç†è®ºï¼**

**æ ¸å¿ƒè®°å¿†å£è¯€ï¼š**
- *APIå¯¹è±¡å››å¤§ä»¶ï¼Œç‰ˆæœ¬ç±»å‹å…ƒæ•°æ®*
- *è§„æ ¼çŠ¶æ€è¦åˆ†æ¸…ï¼Œå£°æ˜æœŸæœ›è®©K8såš*  
- *æ ‡ç­¾é€‰æ‹©é…åˆç”¨ï¼Œæ³¨è§£å­˜å‚¨æè¿°ä¿¡*
- *å¤šåŠ¨æ‰‹æ¥å¤šå®è·µï¼Œç†Ÿèƒ½ç”Ÿå·§æ˜¯çœŸç†*

---

## ğŸ“š å»¶ä¼¸é˜…è¯»


- **å®˜æ–¹æ–‡æ¡£**ï¼š[Kubernetes APIæ¦‚å¿µ](https://kubernetes.io/docs/concepts/overview/kubernetes-api/)
- **æœ€ä½³å®è·µ**ï¼š[æ¨èæ ‡ç­¾è§„èŒƒ](https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/)  
- **è¿›é˜¶å­¦ä¹ **ï¼š[è‡ªå®šä¹‰èµ„æºå®šä¹‰](https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/)