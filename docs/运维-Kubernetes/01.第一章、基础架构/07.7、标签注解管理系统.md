---
title: 7ã€æ ‡ç­¾æ³¨è§£ç®¡ç†ç³»ç»Ÿ
---
## ğŸ“š ç›®å½•

1. [æ ‡ç­¾ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ](#1-æ ‡ç­¾ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ)
2. [Labelsæ ‡ç­¾æ·±å…¥ç†è§£](#2-Labelsæ ‡ç­¾æ·±å…¥ç†è§£)
3. [æ ‡ç­¾é€‰æ‹©å™¨è¯¦è§£](#3-æ ‡ç­¾é€‰æ‹©å™¨è¯¦è§£)
4. [Annotationsæ³¨è§£ç³»ç»Ÿ](#4-Annotationsæ³¨è§£ç³»ç»Ÿ)
5. [æ ‡ç­¾æœ€ä½³å®è·µ](#5-æ ‡ç­¾æœ€ä½³å®è·µ)
6. [è‡ªåŠ¨åŒ–æ ‡ç­¾ç®¡ç†](#6-è‡ªåŠ¨åŒ–æ ‡ç­¾ç®¡ç†)
7. [å®æˆ˜æ¡ˆä¾‹æ¼”ç»ƒ](#7-å®æˆ˜æ¡ˆä¾‹æ¼”ç»ƒ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ·ï¸ æ ‡ç­¾ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ ‡ç­¾ç³»ç»Ÿ


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä½ åœ¨æ•´ç†è¡£æŸœï¼Œä½ ä¼šç»™æ¯ä»¶è¡£æœè´´ä¸Šå°æ ‡ç­¾

```
ç°å®ç”Ÿæ´»ä¸­çš„æ ‡ç­¾ï¼š          Kubernetesä¸­çš„æ ‡ç­¾ï¼š
- å¤è£…/å†¬è£…                - app: nginx
- å·¥ä½œæœ/ä¼‘é—²æœ            - environment: production  
- çº¢è‰²/è“è‰²                - version: v1.2.0
- å¤§å·/å°å·                - tier: frontend
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- **åˆ†ç±»ç®¡ç†**ï¼šæŠŠç›¸ä¼¼çš„èµ„æºå½’ç±»åˆ°ä¸€èµ·
- **å¿«é€Ÿç­›é€‰**ï¼šä»å¤§é‡èµ„æºä¸­å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„
- **æ‰¹é‡æ“ä½œ**ï¼šå¯¹æœ‰ç›¸åŒæ ‡ç­¾çš„èµ„æºè¿›è¡Œç»Ÿä¸€æ“ä½œ
- **å…³ç³»å»ºç«‹**ï¼šè®©ä¸åŒçš„Kubernetesç»„ä»¶èƒ½æ‰¾åˆ°å½¼æ­¤

### 1.2 æ ‡ç­¾ vs åå­—çš„åŒºåˆ«


```
èµ„æºåå­—ï¼ˆNameï¼‰ï¼š
âœ… å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸èƒ½é‡å¤
âœ… ç”¨äºç²¾ç¡®å®šä½å•ä¸ªèµ„æº
âŒ ä¸æ”¯æŒæ‰¹é‡æ“ä½œ
âŒ ä¸æ”¯æŒå¤æ‚æŸ¥è¯¢

æ ‡ç­¾ï¼ˆLabelsï¼‰ï¼š
âœ… å¯ä»¥é‡å¤ï¼Œæ”¯æŒå¤šä¸ªèµ„æºæœ‰ç›¸åŒæ ‡ç­¾
âœ… æ”¯æŒæ‰¹é‡é€‰æ‹©å’Œæ“ä½œ
âœ… æ”¯æŒå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶
âœ… å¯ä»¥åŠ¨æ€æ·»åŠ å’Œä¿®æ”¹
```

### 1.3 æ ‡ç­¾ç³»ç»Ÿæ¶æ„å›¾


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Kubernetesé›†ç¾¤                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ ‡ç­¾ç®¡ç†å±‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Podèµ„æº       â”‚     Serviceèµ„æº           â”‚
â”‚ app=nginx       â”‚   app=nginx              â”‚
â”‚ env=prod        â”‚   type=LoadBalancer      â”‚
â”‚ version=1.0     â”‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Deploymentèµ„æº  â”‚   ConfigMapèµ„æº          â”‚
â”‚ app=nginx       â”‚   app=nginx              â”‚
â”‚ env=prod        â”‚   config-type=app        â”‚
â”‚ replicas=3      â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
   æ ‡ç­¾é€‰æ‹©å™¨åŒ¹é…
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        è‡ªåŠ¨å…³è”å’Œç®¡ç†                        â”‚
â”‚ Service â†’ Pod (é€šè¿‡app=nginxåŒ¹é…)           â”‚
â”‚ Deployment â†’ Pod (é€šè¿‡æ ‡ç­¾æ¨¡æ¿åˆ›å»º)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ·ï¸ Labelsæ ‡ç­¾æ·±å…¥ç†è§£


### 2.1 æ ‡ç­¾çš„åŸºæœ¬ç»“æ„


**æ ‡ç­¾æ ¼å¼**ï¼š`key=value` é”®å€¼å¯¹å½¢å¼

```yaml
# æ ‡ç­¾ç¤ºä¾‹
labels:
  app: nginx                    # åº”ç”¨åç§°
  version: "1.16"              # ç‰ˆæœ¬å·ï¼ˆæ³¨æ„ç”¨å¼•å·ï¼‰
  environment: production       # ç¯å¢ƒç±»å‹
  tier: frontend               # åº”ç”¨å±‚çº§
  team: platform               # è´Ÿè´£å›¢é˜Ÿ
  release: stable              # å‘å¸ƒç±»å‹
```

**é”®ï¼ˆKeyï¼‰çš„è§„åˆ™**ï¼š
- **å‰ç¼€éƒ¨åˆ†**ï¼ˆå¯é€‰ï¼‰ï¼š`kubernetes.io/name` 
- **åç§°éƒ¨åˆ†**ï¼ˆå¿…éœ€ï¼‰ï¼š`app`, `version`, `tier`
- **é•¿åº¦é™åˆ¶**ï¼šæ€»é•¿åº¦ä¸è¶…è¿‡253å­—ç¬¦ï¼Œåç§°éƒ¨åˆ†ä¸è¶…è¿‡63å­—ç¬¦
- **å­—ç¬¦è¦æ±‚**ï¼šåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ã€ç‚¹å’Œä¸‹åˆ’çº¿

**å€¼ï¼ˆValueï¼‰çš„è§„åˆ™**ï¼š
- **é•¿åº¦é™åˆ¶**ï¼šä¸è¶…è¿‡63å­—ç¬¦
- **å­—ç¬¦è¦æ±‚**ï¼šä¸é”®çš„åç§°éƒ¨åˆ†ç›¸åŒ
- **å¯ä»¥ä¸ºç©º**ï¼š`empty-label: ""`

### 2.2 æ ‡ç­¾çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†


**åˆ›å»ºæ—¶æ·»åŠ æ ‡ç­¾**ï¼š
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: web-server
  labels:
    app: nginx
    version: "1.16"
    env: production
spec:
  containers:
  - name: nginx
    image: nginx:1.16
```

**è¿è¡Œæ—¶ä¿®æ”¹æ ‡ç­¾**ï¼š
```bash
# æ·»åŠ æ ‡ç­¾
kubectl label pods web-server team=frontend

# ä¿®æ”¹æ ‡ç­¾ï¼ˆè¦†ç›–ç°æœ‰å€¼ï¼‰
kubectl label pods web-server version=1.17 --overwrite

# åˆ é™¤æ ‡ç­¾
kubectl label pods web-server version-

# æŸ¥çœ‹æ ‡ç­¾
kubectl get pods --show-labels
```

### 2.3 æ ‡ç­¾çš„ä½œç”¨åŸŸç†è§£


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‘½åç©ºé—´çº§åˆ«                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ defaultå‘½å  â”‚    â”‚ kube-system â”‚         â”‚
â”‚  â”‚   ç©ºé—´      â”‚    â”‚   å‘½åç©ºé—´   â”‚         â”‚
â”‚  â”‚ app=web     â”‚    â”‚ app=dns     â”‚         â”‚
â”‚  â”‚ env=prod    â”‚    â”‚ type=system â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
â€¢ æ ‡ç­¾åœ¨å‘½åç©ºé—´å†…æœ‰æ„ä¹‰
â€¢ ä¸åŒå‘½åç©ºé—´å¯ä»¥æœ‰ç›¸åŒçš„æ ‡ç­¾
â€¢ è·¨å‘½åç©ºé—´æŸ¥è¯¢éœ€è¦æŒ‡å®šå‘½åç©ºé—´
```

### 2.4 å¸¸ç”¨æ ‡ç­¾åˆ†ç±»ä½“ç³»


| åˆ†ç±» | **æ ‡ç­¾é”®** | **ç¤ºä¾‹å€¼** | **è¯´æ˜** |
|------|-----------|-----------|---------|
| ğŸ¯ **åº”ç”¨æ ‡è¯†** | `app` | `nginx`, `redis` | åº”ç”¨åç§°æ ‡è¯† |
| ğŸ¢ **ä¸šåŠ¡åˆ†ç±»** | `component` | `database`, `frontend` | åº”ç”¨ç»„ä»¶ç±»å‹ |
| ğŸŒ **ç¯å¢ƒåˆ†ç±»** | `environment` | `dev`, `staging`, `prod` | éƒ¨ç½²ç¯å¢ƒ |
| ğŸ“¦ **ç‰ˆæœ¬ç®¡ç†** | `version` | `v1.0.0`, `latest` | åº”ç”¨ç‰ˆæœ¬å· |
| ğŸ‘¥ **å›¢é˜Ÿç®¡ç†** | `team` | `backend`, `frontend` | è´Ÿè´£å›¢é˜Ÿ |
| ğŸš€ **å‘å¸ƒç®¡ç†** | `release` | `stable`, `canary` | å‘å¸ƒç­–ç•¥ |

---

## 3. ğŸ¯ æ ‡ç­¾é€‰æ‹©å™¨è¯¦è§£


### 3.1 é€‰æ‹©å™¨çš„å·¥ä½œåŸç†


**åŸºæœ¬æ¦‚å¿µ**ï¼šæ ‡ç­¾é€‰æ‹©å™¨å°±åƒæ˜¯ä¸€ä¸ª"è¿‡æ»¤å™¨"ï¼Œå¸®ä½ ä»ä¼—å¤šèµ„æºä¸­ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„

```
æƒ³è±¡åœºæ™¯ï¼š
ä½ æœ‰100ä¸ªPodï¼Œæƒ³æ‰¾å‡ºï¼š
- æ‰€æœ‰nginxåº”ç”¨çš„Pod
- ç”Ÿäº§ç¯å¢ƒçš„Pod  
- ç‰ˆæœ¬å·ä¸ºv1.2çš„Pod

é€‰æ‹©å™¨è¯­æ³•ï¼š
app=nginx                    # ç²¾ç¡®åŒ¹é…
environment=production       # ç²¾ç¡®åŒ¹é…  
version=v1.2                # ç²¾ç¡®åŒ¹é…
```

### 3.2 ç›¸ç­‰æ€§é€‰æ‹©å™¨ï¼ˆEquality-basedï¼‰


**åŸºæœ¬è¯­æ³•**ï¼š
```bash
# ç­‰äºåŒ¹é…
kubectl get pods -l app=nginx

# ä¸ç­‰äºåŒ¹é…  
kubectl get pods -l app!=apache

# å¤šä¸ªæ¡ä»¶ï¼ˆANDå…³ç³»ï¼‰
kubectl get pods -l app=nginx,environment=production

# æŸ¥çœ‹é€‰ä¸­çš„èµ„æº
kubectl get pods -l app=nginx --show-labels
```

**YAMLä¸­çš„å†™æ³•**ï¼š
```yaml
# åœ¨Serviceä¸­ä½¿ç”¨é€‰æ‹©å™¨
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx          # é€‰æ‹©app=nginxçš„Pod
    tier: frontend      # åŒæ—¶æ»¡è¶³tier=frontend
  ports:
  - port: 80
    targetPort: 8080
```

### 3.3 é›†åˆæ€§é€‰æ‹©å™¨ï¼ˆSet-basedï¼‰


**åŸºæœ¬è¯­æ³•**ï¼š
```bash
# å±äºæŸä¸ªé›†åˆ
kubectl get pods -l 'environment in (production,staging)'

# ä¸å±äºæŸä¸ªé›†åˆ
kubectl get pods -l 'tier notin (cache,database)'

# å­˜åœ¨æŸä¸ªæ ‡ç­¾é”®ï¼ˆä¸å…³å¿ƒå€¼ï¼‰
kubectl get pods -l version

# ä¸å­˜åœ¨æŸä¸ªæ ‡ç­¾é”®
kubectl get pods -l '!debug'
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š
```bash
# åœºæ™¯1ï¼šæŸ¥æ‰¾æ‰€æœ‰ç”Ÿäº§å’Œé¢„å‘å¸ƒç¯å¢ƒçš„åº”ç”¨
kubectl get deployments -l 'environment in (production,staging)'

# åœºæ™¯2ï¼šæ’é™¤æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒ
kubectl get services -l 'environment notin (test,dev)'

# åœºæ™¯3ï¼šæ‰¾å‡ºæ‰€æœ‰æœ‰ç‰ˆæœ¬æ ‡ç­¾çš„èµ„æº
kubectl get pods -l version

# åœºæ™¯4ï¼šæ‰¾å‡ºæ‰€æœ‰æ²¡æœ‰è°ƒè¯•æ ‡ç­¾çš„èµ„æº
kubectl get pods -l '!debug'
```

### 3.4 é€‰æ‹©å™¨ç»„åˆä½¿ç”¨


**å¤æ‚æŸ¥è¯¢ç¤ºä¾‹**ï¼š
```bash
# ç»„åˆ1ï¼šç›¸ç­‰æ€§ + é›†åˆæ€§
kubectl get pods -l app=nginx,'environment in (prod,staging)'

# ç»„åˆ2ï¼šå¤šä¸ªä¸ç­‰æ¡ä»¶
kubectl get pods -l app=nginx,version!=beta,'tier in (frontend,api)'

# ç»„åˆ3ï¼šå­˜åœ¨æ€§ + å€¼åŒ¹é…
kubectl get pods -l release,app=nginx,environment=production
```

### 3.5 é€‰æ‹©å™¨åœ¨ä¸åŒèµ„æºä¸­çš„åº”ç”¨


**Serviceé€‰æ‹©å™¨**ï¼š
```yaml
apiVersion: v1
kind: Service
metadata:
  name: app-service
spec:
  selector:
    app: myapp        # ç®€å•çš„é”®å€¼åŒ¹é…
    version: stable
  ports:
  - port: 80
```

**Deploymenté€‰æ‹©å™¨**ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  selector:
    matchLabels:      # ç²¾ç¡®åŒ¹é…
      app: nginx
      tier: frontend
    matchExpressions: # é«˜çº§åŒ¹é…
    - key: environment
      operator: In
      values: ["production", "staging"]
  template:
    metadata:
      labels:         # Podæ¨¡æ¿çš„æ ‡ç­¾
        app: nginx
        tier: frontend
        environment: production
```

---

## 4. ğŸ“ Annotationsæ³¨è§£ç³»ç»Ÿ


### 4.1 æ³¨è§£ vs æ ‡ç­¾çš„åŒºåˆ«


**é€šä¿—ç†è§£**ï¼šå¦‚æœæ ‡ç­¾æ˜¯"åˆ†ç±»æ ‡ç­¾"ï¼Œé‚£ä¹ˆæ³¨è§£å°±æ˜¯"è¯¦ç»†è¯´æ˜ä¹¦"

```
æ ‡ç­¾ï¼ˆLabelsï¼‰ï¼š           æ³¨è§£ï¼ˆAnnotationsï¼‰ï¼š
ç”¨é€”ï¼šåˆ†ç±»å’Œé€‰æ‹©            ç”¨é€”ï¼šè®°å½•è¯¦ç»†ä¿¡æ¯
æŸ¥è¯¢ï¼šæ”¯æŒå¤æ‚æŸ¥è¯¢          æŸ¥è¯¢ï¼šä¸æ”¯æŒæŸ¥è¯¢
é•¿åº¦ï¼šæœ‰é™åˆ¶               é•¿åº¦ï¼šç›¸å¯¹å®½æ¾
ç¤ºä¾‹ï¼šapp=nginx           ç¤ºä¾‹ï¼šdeployment.kubernetes.io/revision: "3"
```

**æ ¸å¿ƒåŒºåˆ«**ï¼š

| ç‰¹æ€§ | **Labelsæ ‡ç­¾** | **Annotationsæ³¨è§£** |
|------|---------------|-------------------|
| ğŸ¯ **ä¸»è¦ç”¨é€”** | èµ„æºåˆ†ç±»å’Œé€‰æ‹© | å­˜å‚¨å…ƒæ•°æ®ä¿¡æ¯ |
| ğŸ” **æŸ¥è¯¢æ”¯æŒ** | æ”¯æŒé€‰æ‹©å™¨æŸ¥è¯¢ | ä¸æ”¯æŒæŸ¥è¯¢ |
| ğŸ“ **é•¿åº¦é™åˆ¶** | Key+Value â‰¤ 316å­—ç¬¦ | ç›¸å¯¹å®½æ¾ |
| ğŸ”„ **ä½¿ç”¨åœºæ™¯** | èµ„æºç»„ç»‡ç®¡ç† | å·¥å…·é›†æˆã€çŠ¶æ€è®°å½• |
| ğŸ‘ï¸ **å¯è§æ€§** | ç»å¸¸æŸ¥çœ‹ | ä¸»è¦ä¾›å·¥å…·ä½¿ç”¨ |

### 4.2 æ³¨è§£çš„å…¸å‹ç”¨é€”


**1. æ„å»ºå’Œéƒ¨ç½²ä¿¡æ¯**ï¼š
```yaml
metadata:
  annotations:
    # æ„å»ºä¿¡æ¯
    build.version: "1.2.3"
    build.timestamp: "2024-01-20T10:30:00Z"
    git.commit: "abc123def"
    git.branch: "main"
    
    # éƒ¨ç½²ä¿¡æ¯  
    deployment.kubernetes.io/revision: "5"
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment"...}
```

**2. å·¥å…·é›†æˆä¿¡æ¯**ï¼š
```yaml
metadata:
  annotations:
    # Ingressæ§åˆ¶å™¨é…ç½®
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    
    # æœåŠ¡ç½‘æ ¼é…ç½®
    sidecar.istio.io/inject: "true"
    
    # ç›‘æ§é…ç½®
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"
```

**3. è¿ç»´å’Œè°ƒè¯•ä¿¡æ¯**ï¼š
```yaml
metadata:
  annotations:
    # è”ç³»ä¿¡æ¯
    contact.email: "team@company.com"
    contact.slack: "#ops-team"
    
    # æ–‡æ¡£é“¾æ¥
    documentation.url: "https://wiki.company.com/app-guide"
    runbook.url: "https://wiki.company.com/troubleshooting"
    
    # å˜æ›´è®°å½•
    change.ticket: "CHG-12345"
    change.reason: "Security patch update"
```

### 4.3 æ³¨è§£çš„æ“ä½œç®¡ç†


**æ·»åŠ æ³¨è§£**ï¼š
```bash
# æ·»åŠ å•ä¸ªæ³¨è§£
kubectl annotate pods my-pod build.version=1.2.3

# æ·»åŠ å¤šä¸ªæ³¨è§£
kubectl annotate pods my-pod \
  contact.email=team@company.com \
  documentation.url=https://wiki.company.com
```

**æŸ¥çœ‹æ³¨è§£**ï¼š
```bash
# æŸ¥çœ‹èµ„æºçš„æ³¨è§£
kubectl describe pod my-pod

# ç”¨jsonpathæå–ç‰¹å®šæ³¨è§£
kubectl get pod my-pod -o jsonpath='{.metadata.annotations}'
```

**ä¿®æ”¹å’Œåˆ é™¤æ³¨è§£**ï¼š
```bash
# ä¿®æ”¹æ³¨è§£
kubectl annotate pods my-pod build.version=1.2.4 --overwrite

# åˆ é™¤æ³¨è§£
kubectl annotate pods my-pod build.version-
```

### 4.4 ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ³¨è§£


**Kubernetesè‡ªåŠ¨æ·»åŠ çš„æ³¨è§£**ï¼š
```yaml
metadata:
  annotations:
    # èµ„æºåˆ›å»ºå’Œæ›´æ–°ä¿¡æ¯
    kubectl.kubernetes.io/last-applied-configuration: |
      å®Œæ•´çš„èµ„æºé…ç½®JSON
    
    # æ§åˆ¶å™¨ç›¸å…³
    deployment.kubernetes.io/revision: "3"
    
    # è°ƒåº¦ä¿¡æ¯ï¼ˆPodï¼‰
    kubernetes.io/psp: "default"
    
    # ç½‘ç»œç›¸å…³
    kubernetes.io/ingress.class: "nginx"
```

---

## 5. ğŸ¯ æ ‡ç­¾æœ€ä½³å®è·µ


### 5.1 æ ‡ç­¾å‘½åè§„èŒƒ


**æ¨èçš„æ ‡ç­¾ä½“ç³»**ï¼š
```yaml
# åº”ç”¨å±‚æ ‡ç­¾
app.kubernetes.io/name: nginx           # åº”ç”¨åç§°
app.kubernetes.io/version: 1.16.0       # åº”ç”¨ç‰ˆæœ¬
app.kubernetes.io/component: server     # ç»„ä»¶è§’è‰²
app.kubernetes.io/part-of: wordpress    # æ‰€å±ç³»ç»Ÿ
app.kubernetes.io/managed-by: helm      # ç®¡ç†å·¥å…·

# ç¯å¢ƒå’Œéƒ¨ç½²
environment: production                  # éƒ¨ç½²ç¯å¢ƒ
tier: frontend                          # åº”ç”¨å±‚çº§
release: stable                         # å‘å¸ƒç±»å‹

# å›¢é˜Ÿå’Œä¸šåŠ¡
team: platform                          # è´Ÿè´£å›¢é˜Ÿ
business-unit: e-commerce               # ä¸šåŠ¡å•å…ƒ
cost-center: "12345"                    # æˆæœ¬ä¸­å¿ƒ
```

### 5.2 æ ‡ç­¾è®¾è®¡åŸåˆ™


**1. ä¿æŒä¸€è‡´æ€§**ï¼š
```yaml
# âœ… å¥½çš„å®è·µï¼šç»Ÿä¸€çš„å‘½åé£æ ¼
labels:
  app: nginx
  environment: production
  version: v1.2.0
  team: platform

# âŒ é¿å…çš„å®è·µï¼šä¸ä¸€è‡´çš„å‘½å
labels:
  app: nginx
  env: prod          # åº”è¯¥ç”¨environment
  ver: 1.2           # åº”è¯¥ç”¨version
  Team: Platform     # å¤§å°å†™ä¸ä¸€è‡´
```

**2. æœ‰æ„ä¹‰ä¸”ç®€æ´**ï¼š
```yaml
# âœ… å¥½çš„å®è·µï¼šæ¸…æ™°æ˜ç¡®
labels:
  app: nginx
  tier: frontend
  environment: production

# âŒ é¿å…çš„å®è·µï¼šè¿‡äºå†—é•¿æˆ–å«ç³Š
labels:
  application-name-for-web-server: nginx-web-server-application
  some-tier: something-frontend-related
```

**3. è€ƒè™‘æŸ¥è¯¢éœ€æ±‚**ï¼š
```yaml
# é’ˆå¯¹å¸¸è§æŸ¥è¯¢åœºæ™¯è®¾è®¡æ ‡ç­¾
labels:
  app: nginx                    # ç”¨äº kubectl get pods -l app=nginx
  environment: production       # ç”¨äºç¯å¢ƒéš”ç¦»
  version: v1.2.0              # ç”¨äºç‰ˆæœ¬ç®¡ç†
  canary: "true"               # ç”¨äºé‡‘ä¸é›€éƒ¨ç½²
```

### 5.3 åˆ†å±‚æ ‡ç­¾ä½“ç³»


**ä¸‰å±‚æ ‡ç­¾æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ç³»ç»Ÿå±‚æ ‡ç­¾                    â”‚
â”‚        (Kuberneteså¹³å°ä½¿ç”¨)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ kubernetes.io/name: ingress-nginx          â”‚
â”‚ kubernetes.io/part-of: ingress-nginx       â”‚
â”‚ kubernetes.io/component: controller        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                åº”ç”¨å±‚æ ‡ç­¾                    â”‚
â”‚         (åº”ç”¨è¯†åˆ«å’Œç®¡ç†)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ app: nginx                                 â”‚
â”‚ version: 1.16.0                            â”‚
â”‚ tier: frontend                             â”‚
â”‚ component: server                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ä¸šåŠ¡å±‚æ ‡ç­¾                    â”‚
â”‚        (ä¸šåŠ¡ç®¡ç†å’Œæˆæœ¬åˆ†æ)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ environment: production                    â”‚
â”‚ team: platform                             â”‚
â”‚ project: ecommerce                         â”‚
â”‚ cost-center: cc-12345                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 ç¯å¢ƒç®¡ç†æœ€ä½³å®è·µ


**ç¯å¢ƒæ ‡ç­¾æ ‡å‡†åŒ–**ï¼š
```yaml
# å¼€å‘ç¯å¢ƒ
environment: development
tier: dev-frontend
release: dev

# æµ‹è¯•ç¯å¢ƒ  
environment: testing
tier: test-frontend
release: test

# é¢„å‘å¸ƒç¯å¢ƒ
environment: staging  
tier: staging-frontend
release: rc

# ç”Ÿäº§ç¯å¢ƒ
environment: production
tier: prod-frontend
release: stable
```

**åŸºäºç¯å¢ƒçš„èµ„æºéš”ç¦»**ï¼š
```bash
# æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒæ‰€æœ‰åº”ç”¨
kubectl get all -l environment=production

# æŸ¥çœ‹å¼€å‘ç¯å¢ƒçš„å‰ç«¯åº”ç”¨
kubectl get pods -l environment=development,tier=frontend

# æ‰¹é‡æ“ä½œæµ‹è¯•ç¯å¢ƒèµ„æº
kubectl delete pods -l environment=testing,app=nginx
```

---

## 6. ğŸ¤– è‡ªåŠ¨åŒ–æ ‡ç­¾ç®¡ç†


### 6.1 Deploymentè‡ªåŠ¨æ ‡ç­¾ä¼ æ’­


**æ ‡ç­¾ä¼ æ’­æœºåˆ¶**ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx                    # Deploymentè‡ªèº«çš„æ ‡ç­¾
    version: v1.2.0
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx                  # é€‰æ‹©å™¨å¿…é¡»åŒ¹é…Podæ ‡ç­¾
  template:
    metadata:
      labels:
        app: nginx                # Podæ¨¡æ¿æ ‡ç­¾
        version: v1.2.0           # ä¼šè‡ªåŠ¨åº”ç”¨åˆ°æ‰€æœ‰Pod
        tier: frontend
        environment: production
    spec:
      containers:
      - name: nginx
        image: nginx:1.16
```

**æ ‡ç­¾ä¼ æ’­æµç¨‹å›¾**ï¼š
```
Deploymentæ ‡ç­¾
      â†“
   é€‰æ‹©å™¨åŒ¹é…  
      â†“  
Podæ¨¡æ¿æ ‡ç­¾ â†’ è‡ªåŠ¨åº”ç”¨åˆ° â†’ å®é™…Podæ ‡ç­¾
      â†“
  ReplicaSetæ ‡ç­¾
```

### 6.2 æ ‡ç­¾è‡ªåŠ¨æ³¨å…¥


**ä½¿ç”¨æ ‡ç­¾ç­–ç•¥è¿›è¡Œè‡ªåŠ¨æ³¨å…¥**ï¼š
```yaml
# å‘½åç©ºé—´çº§åˆ«çš„é»˜è®¤æ ‡ç­¾
apiVersion: v1
kind: Namespace
metadata:
  name: production
  labels:
    environment: production
    managed-by: platform-team
    
---
# åœ¨è¯¥å‘½åç©ºé—´åˆ›å»ºçš„èµ„æºä¼šç»§æ‰¿æŸäº›æ ‡ç­¾
apiVersion: v1
kind: Pod
metadata:
  name: my-app
  namespace: production
  # å¯ä»¥é€šè¿‡å‡†å…¥æ§åˆ¶å™¨è‡ªåŠ¨æ³¨å…¥å‘½åç©ºé—´æ ‡ç­¾
```

### 6.3 åŸºäºGitçš„è‡ªåŠ¨æ ‡ç­¾


**CI/CDæµç¨‹ä¸­çš„è‡ªåŠ¨æ ‡ç­¾æ³¨å…¥**ï¼š
```bash
#!/bin/bash
# æ„å»ºè„šæœ¬ä¸­çš„æ ‡ç­¾ç”Ÿæˆ

# ä»Gitè·å–ä¿¡æ¯
GIT_COMMIT=$(git rev-parse --short HEAD)
GIT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
BUILD_TIME=$(date -u +"%Y-%m-%dT%H:%M:%SZ")

# ç”ŸæˆKubernetesèµ„æºæ—¶è‡ªåŠ¨æ³¨å…¥æ ‡ç­¾
cat <<EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
  labels:
    app: my-app
    git.commit: ${GIT_COMMIT}
    git.branch: ${GIT_BRANCH}
    build.time: ${BUILD_TIME}
    version: ${VERSION}
EOF
```

### 6.4 æ ‡ç­¾ç”Ÿå‘½å‘¨æœŸç®¡ç†


**è‡ªåŠ¨åŒ–æ ‡ç­¾ç»´æŠ¤ç­–ç•¥**ï¼š

```yaml
# 1. ç‰ˆæœ¬æ ‡ç­¾è‡ªåŠ¨æ›´æ–°
apiVersion: v1
kind: ConfigMap
metadata:
  name: label-updater-script
data:
  update.sh: |
    #!/bin/bash
    # æ‰¹é‡æ›´æ–°ç‰ˆæœ¬æ ‡ç­¾
    kubectl patch deployment nginx-deployment -p \
      '{"metadata":{"labels":{"version":"v1.3.0"}}}'
    
    # æ›´æ–°Podæ¨¡æ¿æ ‡ç­¾
    kubectl patch deployment nginx-deployment -p \
      '{"spec":{"template":{"metadata":{"labels":{"version":"v1.3.0"}}}}}'

---
# 2. æ¸…ç†è¿‡æœŸæ ‡ç­¾çš„å®šæ—¶ä»»åŠ¡
apiVersion: batch/v1
kind: CronJob
metadata:
  name: label-cleanup
spec:
  schedule: "0 2 * * 0"  # æ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: cleanup
            image: bitnami/kubectl
            command:
            - /bin/sh
            - -c
            - |
              # åˆ é™¤è¿‡æœŸçš„canaryæ ‡ç­¾
              kubectl label pods -l canary=true,version!=v1.3.0 canary-
```

---

## 7. ğŸš€ å®æˆ˜æ¡ˆä¾‹æ¼”ç»ƒ


### 7.1 å¾®æœåŠ¡åº”ç”¨æ ‡ç­¾è®¾è®¡


**åœºæ™¯**ï¼šç”µå•†ç³»ç»ŸåŒ…å«ç”¨æˆ·æœåŠ¡ã€è®¢å•æœåŠ¡ã€æ”¯ä»˜æœåŠ¡

```yaml
# ç”¨æˆ·æœåŠ¡
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
  labels:
    app.kubernetes.io/name: user-service
    app.kubernetes.io/version: v2.1.0
    app.kubernetes.io/component: api
    app.kubernetes.io/part-of: ecommerce
    tier: backend
    service-type: stateless
spec:
  selector:
    matchLabels:
      app: user-service
      version: v2.1.0
  template:
    metadata:
      labels:
        app: user-service
        version: v2.1.0
        tier: backend
        service-type: stateless
---
# ç”¨æˆ·æœåŠ¡çš„Service
apiVersion: v1
kind: Service
metadata:
  name: user-service
  labels:
    app: user-service
    service-type: internal
spec:
  selector:
    app: user-service    # é€‰æ‹©æ‰€æœ‰ç”¨æˆ·æœåŠ¡çš„Pod
  ports:
  - port: 8080
```

### 7.2 å¤šç¯å¢ƒéƒ¨ç½²ç®¡ç†


**å¼€å‘ç¯å¢ƒé…ç½®**ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-dev
  namespace: development
  labels:
    app: nginx
    environment: development
    tier: frontend
    cost-center: dev-team
spec:
  replicas: 1          # å¼€å‘ç¯å¢ƒå°‘é‡å‰¯æœ¬
  selector:
    matchLabels:
      app: nginx
      environment: development
  template:
    metadata:
      labels:
        app: nginx
        environment: development
        tier: frontend
        version: latest
```

**ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-prod
  namespace: production  
  labels:
    app: nginx
    environment: production
    tier: frontend
    cost-center: prod-ops
spec:
  replicas: 5          # ç”Ÿäº§ç¯å¢ƒå¤šå‰¯æœ¬
  selector:
    matchLabels:
      app: nginx
      environment: production
  template:
    metadata:
      labels:
        app: nginx
        environment: production
        tier: frontend
        version: v1.2.0    # ç”Ÿäº§ç¯å¢ƒå›ºå®šç‰ˆæœ¬
```

### 7.3 é‡‘ä¸é›€éƒ¨ç½²å®è·µ


**ç¨³å®šç‰ˆæœ¬éƒ¨ç½²**ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: app-stable
  labels:
    app: myapp
    version: v1.0.0
    release: stable
spec:
  replicas: 8
  selector:
    matchLabels:
      app: myapp
      release: stable
  template:
    metadata:
      labels:
        app: myapp
        version: v1.0.0
        release: stable
```

**é‡‘ä¸é›€ç‰ˆæœ¬éƒ¨ç½²**ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: app-canary
  labels:
    app: myapp
    version: v1.1.0
    release: canary
spec:
  replicas: 2          # é‡‘ä¸é›€éƒ¨ç½²å°‘é‡å®ä¾‹
  selector:
    matchLabels:
      app: myapp
      release: canary
  template:
    metadata:
      labels:
        app: myapp
        version: v1.1.0
        release: canary
```

**ç»Ÿä¸€æœåŠ¡å…¥å£**ï¼š
```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  selector:
    app: myapp          # åŒæ—¶é€‰æ‹©stableå’Œcanaryç‰ˆæœ¬
    # ä¸æŒ‡å®šreleaseæ ‡ç­¾ï¼Œè®©æµé‡åˆ†é…åˆ°ä¸¤ä¸ªç‰ˆæœ¬
  ports:
  - port: 80
    targetPort: 8080
```

### 7.4 æ‰¹é‡è¿ç»´æ“ä½œ


**åŸºäºæ ‡ç­¾çš„æ‰¹é‡æ“ä½œç¤ºä¾‹**ï¼š
```bash
# 1. æŸ¥çœ‹æ‰€æœ‰ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨çŠ¶æ€
kubectl get pods -l environment=production --all-namespaces

# 2. é‡å¯æ‰€æœ‰å‰ç«¯æœåŠ¡
kubectl rollout restart deployment -l tier=frontend

# 3. æ‰©å®¹æ‰€æœ‰APIæœåŠ¡
kubectl scale deployment -l service-type=api --replicas=5

# 4. æŸ¥çœ‹ç‰¹å®šç‰ˆæœ¬çš„èµ„æº
kubectl get all -l version=v1.2.0

# 5. åˆ é™¤æ‰€æœ‰æµ‹è¯•ç¯å¢ƒçš„ä¸´æ—¶èµ„æº
kubectl delete pods -l environment=test,temporary=true

# 6. ç»™æ‰€æœ‰æ•°æ®åº“ç›¸å…³èµ„æºæ·»åŠ ç»´æŠ¤æ ‡ç­¾
kubectl label pods -l tier=database maintenance=scheduled
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```yaml
ğŸ”¸ æ ‡ç­¾æœ¬è´¨ï¼šé”®å€¼å¯¹å½¢å¼çš„å…ƒæ•°æ®ï¼Œç”¨äºèµ„æºåˆ†ç±»å’Œé€‰æ‹©
ğŸ”¸ é€‰æ‹©å™¨ï¼šåŸºäºæ ‡ç­¾çš„èµ„æºæŸ¥è¯¢å’Œæ‰¹é‡æ“ä½œå·¥å…·  
ğŸ”¸ æ³¨è§£ç”¨é€”ï¼šå­˜å‚¨è¯¦ç»†å…ƒæ•°æ®ï¼Œä¸å‚ä¸èµ„æºé€‰æ‹©
ğŸ”¸ è‡ªåŠ¨ä¼ æ’­ï¼šDeploymentç­‰æ§åˆ¶å™¨è‡ªåŠ¨ç®¡ç†Podæ ‡ç­¾
ğŸ”¸ æœ€ä½³å®è·µï¼šç»Ÿä¸€å‘½åè§„èŒƒï¼Œåˆ†å±‚æ ‡ç­¾ä½“ç³»
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ ‡ç­¾é€‰æ‹©å™¨çš„å·¥ä½œæœºåˆ¶**ï¼š
```
ç›¸ç­‰æ€§é€‰æ‹©å™¨ï¼šapp=nginx,tier=frontend (ANDå…³ç³»)
é›†åˆæ€§é€‰æ‹©å™¨ï¼šenvironment in (prod,staging)
ç»„åˆä½¿ç”¨ï¼šapp=nginx,'tier in (frontend,api)'

è®°å¿†æŠ€å·§ï¼š
â€¢ é€—å·è¡¨ç¤ºANDå…³ç³»  
â€¢ in/notinç”¨äºå¤šå€¼åŒ¹é…
â€¢ å•å¼•å·åŒ…å›´å¤æ‚è¡¨è¾¾å¼
```

**ğŸ”¹ æ ‡ç­¾ vs æ³¨è§£çš„é€‰æ‹©åŸåˆ™**ï¼š
```
ä½¿ç”¨æ ‡ç­¾çš„åœºæ™¯ï¼š
âœ… éœ€è¦æŸ¥è¯¢å’Œè¿‡æ»¤çš„ä¿¡æ¯
âœ… èµ„æºåˆ†ç±»å’Œç»„ç»‡
âœ… æ‰¹é‡æ“ä½œçš„ä¾æ®

ä½¿ç”¨æ³¨è§£çš„åœºæ™¯ï¼š
âœ… æ„å»ºå’Œéƒ¨ç½²ä¿¡æ¯
âœ… å·¥å…·é…ç½®å‚æ•°  
âœ… è¯¦ç»†çš„å…ƒæ•°æ®æè¿°
```

**ğŸ”¹ æ ‡ç­¾è®¾è®¡çš„å±‚æ¬¡æ€ç»´**ï¼š
```
ä¸šåŠ¡å±‚ï¼šenvironment, team, project
åº”ç”¨å±‚ï¼šapp, version, component  
æŠ€æœ¯å±‚ï¼škubernetes.io/name, managed-by

è®¾è®¡åŸåˆ™ï¼š
â€¢ ä»æŸ¥è¯¢éœ€æ±‚å‡ºå‘
â€¢ ä¿æŒå‘½åä¸€è‡´æ€§
â€¢ è€ƒè™‘æœªæ¥æ‰©å±•æ€§
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è¿ç»´ç®¡ç†ä»·å€¼**ï¼š
- **ç¯å¢ƒéš”ç¦»**ï¼šé€šè¿‡environmentæ ‡ç­¾åŒºåˆ†ä¸åŒç¯å¢ƒ
- **æ‰¹é‡æ“ä½œ**ï¼šåŸºäºæ ‡ç­¾è¿›è¡Œæ‰¹é‡éƒ¨ç½²ã€æ‰©å®¹ã€é‡å¯
- **èµ„æºç›‘æ§**ï¼šæŒ‰æ ‡ç­¾ç»´åº¦ç»Ÿè®¡èµ„æºä½¿ç”¨æƒ…å†µ
- **æˆæœ¬åˆ†æ**ï¼šé€šè¿‡teamã€projectæ ‡ç­¾è¿›è¡Œæˆæœ¬åˆ†æ‘Š

**ğŸ”§ å¼€å‘æ•ˆç‡æå‡**ï¼š
- **å¿«é€Ÿå®šä½**ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°ç›¸å…³èµ„æº
- **ç°åº¦å‘å¸ƒ**ï¼šä½¿ç”¨releaseæ ‡ç­¾æ§åˆ¶æµé‡åˆ†é…  
- **ç‰ˆæœ¬ç®¡ç†**ï¼šé€šè¿‡versionæ ‡ç­¾ç®¡ç†ä¸åŒç‰ˆæœ¬
- **é—®é¢˜è¯Šæ–­**ï¼šæ ¹æ®æ ‡ç­¾ç¼©å°é—®é¢˜æ’æŸ¥èŒƒå›´

**ğŸ“Š è‡ªåŠ¨åŒ–ä»·å€¼**ï¼š
- **CI/CDé›†æˆ**ï¼šè‡ªåŠ¨æ³¨å…¥æ„å»ºä¿¡æ¯åˆ°æ ‡ç­¾å’Œæ³¨è§£
- **å¼¹æ€§ä¼¸ç¼©**ï¼šåŸºäºæ ‡ç­¾çš„HPAç­–ç•¥
- **æœåŠ¡å‘ç°**ï¼šServiceé€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨æ‰¾åˆ°åç«¯Pod
- **ç­–ç•¥åº”ç”¨**ï¼šNetworkPolicyã€PodSecurityPolicyåŸºäºæ ‡ç­¾

### 8.4 å¸¸è§é—®é¢˜è§£å†³


**æ ‡ç­¾é€‰æ‹©å™¨ä¸åŒ¹é…é—®é¢˜**ï¼š
```bash
# é—®é¢˜ï¼šServiceæ— æ³•æ‰¾åˆ°Pod
# è§£å†³ï¼šæ£€æŸ¥é€‰æ‹©å™¨å’ŒPodæ ‡ç­¾æ˜¯å¦ä¸€è‡´
kubectl get service myapp -o yaml | grep selector -A 5
kubectl get pods -l app=myapp --show-labels

# ç¡®ä¿é€‰æ‹©å™¨æ ‡ç­¾åœ¨Podæ ‡ç­¾ä¸­å­˜åœ¨
```

**æ ‡ç­¾è¿‡å¤šå¯¼è‡´ç®¡ç†æ··ä¹±**ï¼š
```yaml
# é—®é¢˜ï¼šæ ‡ç­¾å¤ªå¤šï¼Œéš¾ä»¥ç»´æŠ¤
# è§£å†³ï¼šå»ºç«‹æ ‡ç­¾åˆ†ç±»ä½“ç³»å’Œå‘½åè§„èŒƒ

# æ¨èçš„æ ¸å¿ƒæ ‡ç­¾é›†åˆ
labels:
  app: nginx              # å¿…éœ€ï¼šåº”ç”¨æ ‡è¯†
  version: v1.2.0         # å¿…éœ€ï¼šç‰ˆæœ¬ç®¡ç†  
  environment: production # å¿…éœ€ï¼šç¯å¢ƒåŒºåˆ†
  tier: frontend         # å¯é€‰ï¼šæ¶æ„å±‚æ¬¡
  team: platform         # å¯é€‰ï¼šå›¢é˜Ÿå½’å±
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- æ ‡ç­¾ç”¨äºåˆ†ç±»é€‰æ‹©ï¼Œæ³¨è§£ç”¨äºä¿¡æ¯å­˜å‚¨
- é€‰æ‹©å™¨æ˜¯æ ‡ç­¾çš„æŸ¥è¯¢å·¥å…·ï¼Œæ”¯æŒå¤æ‚æ¡ä»¶
- æ§åˆ¶å™¨é€šè¿‡æ ‡ç­¾å®ç°èµ„æºå…³è”å’Œç®¡ç†
- è‰¯å¥½çš„æ ‡ç­¾ä½“ç³»æ˜¯Kubernetesè¿ç»´çš„åŸºç¡€