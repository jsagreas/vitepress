---
title: 10ã€å­˜å‚¨ç±»é…ç½®æ–‡ä»¶
---
## ğŸ“š ç›®å½•

1. [å­˜å‚¨ç±»åŸºæœ¬æ¦‚å¿µ](#1-å­˜å‚¨ç±»åŸºæœ¬æ¦‚å¿µ)
2. [StorageClassæ ¸å¿ƒé…ç½®è§£æ](#2-StorageClassæ ¸å¿ƒé…ç½®è§£æ)
3. [å­˜å‚¨ä¾›åº”å•†é…ç½®è¯¦è§£](#3-å­˜å‚¨ä¾›åº”å•†é…ç½®è¯¦è§£)
4. [å›æ”¶ç­–ç•¥ä¸å·ç®¡ç†](#4-å›æ”¶ç­–ç•¥ä¸å·ç®¡ç†)
5. [å®é™…åœºæ™¯é…ç½®ç¤ºä¾‹](#5-å®é™…åœºæ™¯é…ç½®ç¤ºä¾‹)
6. [æœ€ä½³å®è·µä¸æ•…éšœæ’æŸ¥](#6-æœ€ä½³å®è·µä¸æ•…éšœæ’æŸ¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ å­˜å‚¨ç±»åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»(StorageClass)


**ğŸ’¡ é€šä¿—ç†è§£**
æƒ³è±¡ä½ åœ¨å¼€ä¸€å®¶å…¬å¸ï¼Œéœ€è¦ä¸åŒç±»å‹çš„åŠå…¬å®¤ï¼š
- æœ‰äº›éƒ¨é—¨éœ€è¦**æ™®é€šåŠå…¬å®¤**ï¼ˆä¾¿å®œã€åŸºæœ¬åŠŸèƒ½ï¼‰
- æœ‰äº›éƒ¨é—¨éœ€è¦**é«˜çº§åŠå…¬å®¤**ï¼ˆè´µã€è®¾æ–½é½å…¨ï¼‰
- æœ‰äº›éœ€è¦**ä¸´æ—¶åŠå…¬å®¤**ï¼ˆç”¨å®Œå°±é€€ç§Ÿï¼‰

StorageClasså°±åƒæ˜¯**"åŠå…¬å®¤ç±»å‹ç›®å½•"**ï¼Œå®ƒå‘Šè¯‰Kubernetesï¼š
> "å½“åº”ç”¨éœ€è¦å­˜å‚¨ç©ºé—´æ—¶ï¼Œåº”è¯¥æä¾›ä»€ä¹ˆç±»å‹çš„å­˜å‚¨ï¼Œæ€ä¹ˆæä¾›"

```
åº”ç”¨éœ€æ±‚               StorageClass               å®é™…å­˜å‚¨
    â†“                      â†“                        â†“
"æˆ‘éœ€è¦10GBå­˜å‚¨"  â†’  "fast-ssdç±»å‹"  â†’  åˆ›å»º10GB SSDç£ç›˜
"æˆ‘éœ€è¦100GBå­˜å‚¨" â†’  "cheap-hddç±»å‹" â†’  åˆ›å»º100GBæ™®é€šç£ç›˜
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦StorageClass


**ğŸ¤” æ²¡æœ‰StorageClassçš„å›°æ‰°**
```
ç®¡ç†å‘˜çš„æ—¥å¸¸ï¼š
1. å¼€å‘è¯´ï¼š"æˆ‘éœ€è¦å­˜å‚¨"
2. ç®¡ç†å‘˜æ‰‹åŠ¨åˆ›å»ºç£ç›˜
3. æ‰‹åŠ¨é…ç½®PV(æŒä¹…å·)
4. å¼€å‘æ‰èƒ½ä½¿ç”¨

é—®é¢˜ï¼š
âŒ æ•ˆç‡ä½ä¸‹ï¼Œæ¯æ¬¡éƒ½è¦äººå·¥ä»‹å…¥
âŒ å®¹æ˜“å‡ºé”™ï¼Œé…ç½®ä¸ä¸€è‡´
âŒ æ‰©å±•å›°éš¾ï¼Œæ— æ³•è‡ªåŠ¨åŒ–
```

**âœ… æœ‰äº†StorageClassçš„ä¾¿åˆ©**
```
è‡ªåŠ¨åŒ–æµç¨‹ï¼š
1. å¼€å‘åˆ›å»ºPVC(å­˜å‚¨ç”³è¯·)
2. KubernetesæŸ¥çœ‹StorageClass
3. è‡ªåŠ¨åˆ›å»ºåŒ¹é…çš„å­˜å‚¨
4. è‡ªåŠ¨ç»‘å®šï¼Œç«‹å³å¯ç”¨

ä¼˜åŠ¿ï¼š
âœ… å…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„
âœ… é…ç½®æ ‡å‡†åŒ–ï¼Œå‡å°‘é”™è¯¯
âœ… æŒ‰éœ€åˆ›å»ºï¼ŒèŠ‚çº¦èµ„æº
```

### 1.3 StorageClasså·¥ä½œæµç¨‹


```
å¼€å‘è€…æ“ä½œ           Kuberneteså†…éƒ¨å¤„ç†            å­˜å‚¨ç³»ç»Ÿ
     â†“                        â†“                        â†“
åˆ›å»ºPVCç”³è¯·     â†’    æŸ¥æ‰¾åŒ¹é…çš„StorageClass    â†’    è°ƒç”¨å­˜å‚¨ä¾›åº”å•†
"éœ€è¦10GBå­˜å‚¨"        "æ‰¾åˆ°fast-ssdç±»å‹"           åˆ›å»ºå®é™…ç£ç›˜
     â†“                        â†“                        â†“
ç­‰å¾…å­˜å‚¨å°±ç»ª    â†    è‡ªåŠ¨åˆ›å»ºPVå¹¶ç»‘å®š         â†    ç£ç›˜åˆ›å»ºå®Œæˆ
     â†“                        â†“                        â†“
æŒ‚è½½åˆ°Podä½¿ç”¨   â†    å­˜å‚¨å¯ç”¨ï¼Œå¼€å§‹è°ƒåº¦        â†    ç£ç›˜å‡†å¤‡å°±ç»ª
```

---

## 2. âš™ï¸ StorageClassæ ¸å¿ƒé…ç½®è§£æ


### 2.1 åŸºç¡€é…ç½®ç»“æ„


**ğŸ“‹ é…ç½®æ–‡ä»¶éª¨æ¶**
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: my-storage-class          # å­˜å‚¨ç±»åç§°ï¼Œåº”ç”¨ä¼šç”¨è¿™ä¸ªåå­—ç”³è¯·å­˜å‚¨
provisioner: kubernetes.io/aws-ebs # å­˜å‚¨ä¾›åº”å•†ï¼Œå†³å®šç”¨ä»€ä¹ˆæŠ€æœ¯åˆ›å»ºå­˜å‚¨
parameters:                      # ä¾›åº”å•†ç‰¹å®šå‚æ•°
  type: gp2                      # å…·ä½“çš„å­˜å‚¨ç±»å‹
  fsType: ext4                   # æ–‡ä»¶ç³»ç»Ÿç±»å‹
reclaimPolicy: Delete            # å­˜å‚¨å›æ”¶ç­–ç•¥
allowVolumeExpansion: true       # æ˜¯å¦å…è®¸æ‰©å®¹
volumeBindingMode: Immediate     # ç»‘å®šæ—¶æœº
```

### 2.2 provisioner - å­˜å‚¨ä¾›åº”å•†è¯¦è§£


**ğŸ”§ ä»€ä¹ˆæ˜¯Provisioner**
> Provisionerå°±åƒæ˜¯**"å­˜å‚¨å·¥å‚ç®¡ç†å‘˜"**ï¼Œè´Ÿè´£ï¼š
> - æ¥æ”¶å­˜å‚¨åˆ›å»ºè¯·æ±‚
> - è°ƒç”¨å…·ä½“çš„å­˜å‚¨ç³»ç»ŸAPI
> - åˆ›å»ºå®é™…çš„å­˜å‚¨è®¾å¤‡
> - å°†å­˜å‚¨æ³¨å†Œåˆ°Kubernetes

**å¸¸è§Provisionerç±»å‹å¯¹æ¯”**

| **ä¾›åº”å•†ç±»å‹** | **Provisioneråç§°** | **é€‚ç”¨åœºæ™¯** | **ç‰¹ç‚¹** |
|---------------|-------------------|-------------|----------|
| **AWS EBS** | `kubernetes.io/aws-ebs` | `AWSäº‘ç¯å¢ƒ` | `é«˜æ€§èƒ½ï¼Œè‡ªåŠ¨å¤‡ä»½` |
| **Google Cloud** | `kubernetes.io/gce-pd` | `GCPäº‘ç¯å¢ƒ` | `å…¨çƒå¯ç”¨ï¼Œå¿«é€Ÿæ‰©å±•` |
| **Azureç£ç›˜** | `kubernetes.io/azure-disk` | `Azureäº‘ç¯å¢ƒ` | `é›†æˆåº¦é«˜ï¼Œç®¡ç†ç®€å•` |
| **NFSç½‘ç»œå­˜å‚¨** | `nfs-client-provisioner` | `å…±äº«å­˜å‚¨éœ€æ±‚` | `å¤šPodå…±äº«ï¼Œæˆæœ¬ä½` |
| **æœ¬åœ°å­˜å‚¨** | `kubernetes.io/no-provisioner` | `é«˜æ€§èƒ½è¦æ±‚` | `é€Ÿåº¦å¿«ï¼Œä½†ä¸å¯ç§»åŠ¨` |

### 2.3 parameters - ä¾›åº”å•†å‚æ•°è¯¦è§£


**ğŸ›ï¸ Parametersçš„ä½œç”¨**
> Parameterså°±åƒæ˜¯**"å®šåˆ¶åŒ–è®¢å•"**ï¼Œå‘Šè¯‰å­˜å‚¨ä¾›åº”å•†ï¼š
> - è¦ä»€ä¹ˆç±»å‹çš„å­˜å‚¨ï¼ˆSSDè¿˜æ˜¯HDDï¼‰
> - è¦ä»€ä¹ˆæ€§èƒ½çº§åˆ«ï¼ˆå¿«é€Ÿã€æ ‡å‡†ã€å½’æ¡£ï¼‰
> - è¦ä»€ä¹ˆç‰¹æ®ŠåŠŸèƒ½ï¼ˆåŠ å¯†ã€å¤‡ä»½ç­‰ï¼‰

**AWS EBSå‚æ•°ç¤ºä¾‹**
```yaml
parameters:
  type: gp3                    # å­˜å‚¨ç±»å‹ï¼šgp3(é€šç”¨SSD)ã€io2(é«˜æ€§èƒ½SSD)
  fsType: ext4                 # æ–‡ä»¶ç³»ç»Ÿï¼šext4ã€xfs
  encrypted: "true"            # æ˜¯å¦åŠ å¯†å­˜å‚¨
  iops: "3000"                # IOPSæ€§èƒ½ï¼šæ¯ç§’è¯»å†™æ¬¡æ•°
  throughput: "125"            # ååé‡ï¼šMB/s
  kmsKeyId: "alias/my-key"     # åŠ å¯†å¯†é’¥ID
```

### 2.4 reclaimPolicy - å›æ”¶ç­–ç•¥


**ğŸ—‘ï¸ å›æ”¶ç­–ç•¥è¯¦è§£**

**Deleteç­–ç•¥ï¼ˆé»˜è®¤ï¼‰**
```
åº”ç”¨åˆ é™¤ â†’ PVCè¢«åˆ é™¤ â†’ å­˜å‚¨è¢«æ°¸ä¹…åˆ é™¤
ä½¿ç”¨åœºæ™¯ï¼šä¸´æ—¶æ•°æ®ã€æµ‹è¯•ç¯å¢ƒ
é£é™©ï¼šâš ï¸ æ•°æ®æ°¸ä¹…ä¸¢å¤±ï¼Œæ— æ³•æ¢å¤
```

**Retainç­–ç•¥ï¼ˆä¿ç•™ï¼‰**
```
åº”ç”¨åˆ é™¤ â†’ PVCè¢«åˆ é™¤ â†’ å­˜å‚¨ä¿ç•™ï¼Œéœ€æ‰‹åŠ¨å¤„ç†
ä½¿ç”¨åœºæ™¯ï¼šé‡è¦æ•°æ®ã€ç”Ÿäº§ç¯å¢ƒ
ä¼˜åŠ¿ï¼šâœ… æ•°æ®å®‰å…¨ï¼Œå¯ä»¥æ¢å¤
```

**é€‰æ‹©å»ºè®®**
- ğŸ”´ **é‡è¦æ•°æ®** â†’ ä½¿ç”¨ `Retain`
- ğŸŸ¡ **ä¸€èˆ¬æ•°æ®** â†’ ä½¿ç”¨ `Delete`  
- ğŸŸ¢ **ä¸´æ—¶æ•°æ®** â†’ ä½¿ç”¨ `Delete`

### 2.5 allowVolumeExpansion - å·æ‰©å±•


**ğŸ“ˆ å­˜å‚¨æ‰©å®¹åŠŸèƒ½**
```yaml
allowVolumeExpansion: true    # å…è®¸åœ¨çº¿æ‰©å®¹
```

**ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯**
```
åˆå§‹æƒ…å†µï¼šåº”ç”¨éœ€è¦10GBå­˜å‚¨
å‡ ä¸ªæœˆåï¼šæ•°æ®å¢é•¿ï¼Œéœ€è¦50GBå­˜å‚¨

æœ‰æ‰©å®¹åŠŸèƒ½ï¼š
1. ä¿®æ”¹PVCç”³è¯·å®¹é‡åˆ°50GB
2. ç³»ç»Ÿè‡ªåŠ¨æ‰©å±•åº•å±‚å­˜å‚¨
3. åº”ç”¨æ— éœ€é‡å¯ï¼Œç»§ç»­è¿è¡Œ

æ— æ‰©å®¹åŠŸèƒ½ï¼š
1. åˆ›å»ºæ–°çš„50GBå­˜å‚¨
2. æ•°æ®è¿ç§»ï¼ˆåº”ç”¨åœæœºï¼‰
3. åˆ é™¤æ—§å­˜å‚¨
```

### 2.6 volumeBindingMode - ç»‘å®šæ¨¡å¼


**ğŸ”— ä¸¤ç§ç»‘å®šæ¨¡å¼å¯¹æ¯”**

**Immediateæ¨¡å¼ï¼ˆç«‹å³ç»‘å®šï¼‰**
```
åˆ›å»ºPVC â†’ ç«‹å³åˆ›å»ºå­˜å‚¨ â†’ å­˜å‚¨å°±ç»ª â†’ Podå¯è°ƒåº¦
ä¼˜ç‚¹ï¼šå­˜å‚¨æå‰å‡†å¤‡å¥½
ç¼ºç‚¹ï¼šå¯èƒ½å‡ºç°å­˜å‚¨å’ŒPodä¸åœ¨åŒä¸€åŒºåŸŸ
```

**WaitForFirstConsumeræ¨¡å¼ï¼ˆç­‰å¾…æ¶ˆè´¹è€…ï¼‰**
```
åˆ›å»ºPVC â†’ ç­‰å¾…Podè°ƒåº¦ â†’ ç¡®å®šPodä½ç½® â†’ åœ¨åŒä¸€åŒºåŸŸåˆ›å»ºå­˜å‚¨
ä¼˜ç‚¹ï¼šå­˜å‚¨å’ŒPodåœ¨åŒä¸€åŒºåŸŸï¼Œæ€§èƒ½æœ€ä½³
ç¼ºç‚¹ï¼šPodå¯åŠ¨ç¨æ…¢ï¼Œéœ€è¦ç­‰å­˜å‚¨åˆ›å»º
```

---

## 3. ğŸª å­˜å‚¨ä¾›åº”å•†é…ç½®è¯¦è§£


### 3.1 AWS EBSå­˜å‚¨é…ç½®


**â˜ï¸ AWS EBSç‰¹ç‚¹**
> EBSå°±åƒæ˜¯**"äº‘ä¸Šçš„è™šæ‹Ÿç¡¬ç›˜"**ï¼Œå¯ä»¥ï¼š
> - åŠ¨æ€è°ƒæ•´å¤§å°
> - è‡ªåŠ¨å¤‡ä»½å’Œå¿«ç…§
> - è·¨å¯ç”¨åŒºè¿ç§»

**å®Œæ•´é…ç½®ç¤ºä¾‹**
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: aws-ebs-fast
  annotations:
    storageclass.kubernetes.io/is-default-class: "false"
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3                      # é€šç”¨SSDï¼Œæ€§ä»·æ¯”æœ€é«˜
  fsType: ext4                   # Linuxæ ‡å‡†æ–‡ä»¶ç³»ç»Ÿ
  encrypted: "true"              # æ•°æ®åŠ å¯†å­˜å‚¨
  iops: "3000"                   # 3000 IOPSæ€§èƒ½
  throughput: "125"              # 125 MB/sååé‡
reclaimPolicy: Delete            # åˆ é™¤æ—¶æ¸…ç†å­˜å‚¨
allowVolumeExpansion: true       # æ”¯æŒåœ¨çº¿æ‰©å®¹
volumeBindingMode: WaitForFirstConsumer  # ç­‰å¾…Podè°ƒåº¦ååˆ›å»º
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**
- **æ•°æ®åº“å­˜å‚¨** - é«˜IOPSï¼Œå¿«é€Ÿè¯»å†™
- **æ—¥å¿—å­˜å‚¨** - é«˜ååé‡ï¼Œå¤§æ–‡ä»¶å†™å…¥
- **åº”ç”¨æ•°æ®** - é€šç”¨åœºæ™¯ï¼Œå¹³è¡¡æ€§èƒ½å’Œæˆæœ¬

### 3.2 GCEæŒä¹…ç£ç›˜é…ç½®


**ğŸŒ GCE-PDç‰¹ç‚¹**
> Google Cloudçš„æŒä¹…ç£ç›˜ï¼Œç‰¹ç‚¹ï¼š
> - å…¨çƒèŒƒå›´å¯ç”¨
> - è‡ªåŠ¨å¤åˆ¶ä¿æŠ¤
> - å¿«ç…§å¤‡ä»½ä¾¿æ·

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: gce-pd-ssd
provisioner: kubernetes.io/gce-pd
parameters:
  type: pd-ssd                   # SSDç±»å‹ï¼špd-ssd(SSD)ã€pd-standard(HDD)
  fstype: ext4                   # æ–‡ä»¶ç³»ç»Ÿç±»å‹
  replication-type: regional-pd  # å¤åˆ¶ç±»å‹ï¼šè·¨åŒºåŸŸå¤‡ä»½
  zones: us-central1-a,us-central1-b  # å¯ç”¨åŒºåŸŸ
reclaimPolicy: Retain            # ä¿ç•™æ•°æ®ï¼Œç”Ÿäº§ç¯å¢ƒæ¨è
allowVolumeExpansion: true
volumeBindingMode: Immediate
```

### 3.3 Azureç£ç›˜é…ç½®


**ğŸ”· Azure Diskç‰¹ç‚¹**
> Azureçš„æ‰˜ç®¡ç£ç›˜ï¼Œä¼˜åŠ¿ï¼š
> - ä¸AzureæœåŠ¡æ·±åº¦é›†æˆ
> - è‡ªåŠ¨æ•…éšœè½¬ç§»
> - å¤šç§æ€§èƒ½çº§åˆ«

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: azure-disk-premium
provisioner: kubernetes.io/azure-disk
parameters:
  storageaccounttype: Premium_LRS  # å­˜å‚¨è´¦æˆ·ç±»å‹
  kind: Managed                    # æ‰˜ç®¡ç£ç›˜
  fsType: ext4
  cachingmode: ReadOnly           # ç¼“å­˜æ¨¡å¼ï¼šReadOnlyã€ReadWrite
reclaimPolicy: Delete
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
```

### 3.4 NFSç½‘ç»œå­˜å‚¨é…ç½®


**ğŸŒ NFSå­˜å‚¨ç‰¹ç‚¹**
> NFSå°±åƒæ˜¯**"ç½‘ç»œå…±äº«æ–‡ä»¶å¤¹"**ï¼š
> - å¤šä¸ªPodå¯ä»¥åŒæ—¶è¯»å†™
> - æ•°æ®é›†ä¸­å­˜å‚¨ç®¡ç†
> - æˆæœ¬ç›¸å¯¹è¾ƒä½

**å‰ç½®æ¡ä»¶**
é¦–å…ˆéœ€è¦éƒ¨ç½²NFS Provisionerï¼š
```yaml
# åªå±•ç¤ºå…³é”®æ¦‚å¿µï¼Œå®é™…éƒ¨ç½²éœ€è¦å®Œæ•´é…ç½®
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nfs-client-provisioner
spec:
  template:
    spec:
      containers:
      - name: nfs-client-provisioner
        image: k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2
        env:
        - name: NFS_SERVER
          value: "192.168.1.100"    # NFSæœåŠ¡å™¨åœ°å€
        - name: NFS_PATH
          value: "/data"            # NFSå…±äº«è·¯å¾„
```

**StorageClassé…ç½®**
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: nfs-storage
provisioner: k8s-sigs.io/nfs-subdir-external-provisioner
parameters:
  server: 192.168.1.100          # NFSæœåŠ¡å™¨IP
  path: /data/k8s-storage        # å­˜å‚¨æ ¹è·¯å¾„
  archiveOnDelete: "false"       # åˆ é™¤æ—¶æ˜¯å¦å½’æ¡£
reclaimPolicy: Delete
allowVolumeExpansion: false      # NFSé€šå¸¸ä¸æ”¯æŒåŠ¨æ€æ‰©å®¹
volumeBindingMode: Immediate
```

### 3.5 æœ¬åœ°å­˜å‚¨é…ç½®


**ğŸ’¾ æœ¬åœ°å­˜å‚¨ç‰¹ç‚¹**
> ä½¿ç”¨èŠ‚ç‚¹æœ¬åœ°ç£ç›˜ï¼Œç‰¹ç‚¹ï¼š
> - **æ€§èƒ½æœ€ä½³** - ç›´æ¥è®¿é—®æœ¬åœ°ç£ç›˜
> - **ä¸å¯ç§»åŠ¨** - Podåªèƒ½åœ¨ç‰¹å®šèŠ‚ç‚¹è¿è¡Œ
> - **æ•°æ®é£é™©** - èŠ‚ç‚¹æ•…éšœå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: local-storage
provisioner: kubernetes.io/no-provisioner  # ä¸è‡ªåŠ¨åˆ›å»ºï¼Œéœ€è¦æ‰‹åŠ¨å‡†å¤‡
parameters:
  # æœ¬åœ°å­˜å‚¨é€šå¸¸ä¸éœ€è¦parameters
reclaimPolicy: Delete
allowVolumeExpansion: false      # æœ¬åœ°å­˜å‚¨ä¸æ”¯æŒæ‰©å®¹
volumeBindingMode: WaitForFirstConsumer  # å¿…é¡»ç­‰å¾…Podè°ƒåº¦
```

**âš ï¸ æœ¬åœ°å­˜å‚¨æ³¨æ„äº‹é¡¹**
- éœ€è¦æå‰åœ¨èŠ‚ç‚¹ä¸Šå‡†å¤‡ç£ç›˜
- Podä¼šç»‘å®šåˆ°ç‰¹å®šèŠ‚ç‚¹
- èŠ‚ç‚¹ç»´æŠ¤æ—¶æ•°æ®å¯èƒ½ä¸å¯ç”¨

---

## 4. ğŸ”„ å›æ”¶ç­–ç•¥ä¸å·ç®¡ç†


### 4.1 å­˜å‚¨ç”Ÿå‘½å‘¨æœŸç®¡ç†


**ğŸ“Š å­˜å‚¨ç”Ÿå‘½å‘¨æœŸæµç¨‹**
```
åˆ›å»ºé˜¶æ®µ              ä½¿ç”¨é˜¶æ®µ              åˆ é™¤é˜¶æ®µ
    â†“                    â†“                    â†“
PVCç”³è¯·å­˜å‚¨   â†’   PodæŒ‚è½½ä½¿ç”¨å­˜å‚¨   â†’   åº”ç”¨åˆ é™¤PVC
    â†“                    â†“                    â†“
StorageClass  â†’   æ•°æ®è¯»å†™æ“ä½œ     â†’   è§¦å‘å›æ”¶ç­–ç•¥
è‡ªåŠ¨åˆ›å»ºPV            æ­£å¸¸è¿è¡Œ             å¤„ç†å­˜å‚¨èµ„æº
```

### 4.2 å›æ”¶ç­–ç•¥è¯¦ç»†å¯¹æ¯”


**ğŸ—‚ï¸ ä¸‰ç§å›æ”¶ç­–ç•¥å¯¹æ¯”**

| **ç­–ç•¥** | **è¡Œä¸º** | **æ•°æ®å®‰å…¨** | **é€‚ç”¨åœºæ™¯** | **ç®¡ç†å¤æ‚åº¦** |
|---------|---------|-------------|-------------|---------------|
| **Delete** | `PVCåˆ é™¤æ—¶è‡ªåŠ¨åˆ é™¤å­˜å‚¨` | `âš ï¸ æ•°æ®ä¸¢å¤±` | `æµ‹è¯•ç¯å¢ƒã€ä¸´æ—¶æ•°æ®` | `ğŸŸ¢ ç®€å•` |
| **Retain** | `ä¿ç•™å­˜å‚¨ï¼Œéœ€æ‰‹åŠ¨æ¸…ç†` | `âœ… æ•°æ®å®‰å…¨` | `ç”Ÿäº§ç¯å¢ƒã€é‡è¦æ•°æ®` | `ğŸŸ¡ ä¸­ç­‰` |
| **Recycle** | `æ¸…ç©ºæ•°æ®ä½†ä¿ç•™å­˜å‚¨` | `âš ï¸ æ•°æ®æ¸…ç©º` | `å·²åºŸå¼ƒï¼Œä¸æ¨è` | `ğŸŸ¡ ä¸­ç­‰` |

### 4.3 mountOptions - æŒ‚è½½é€‰é¡¹é…ç½®


**ğŸ”§ æŒ‚è½½é€‰é¡¹çš„ä½œç”¨**
> mountOptionså°±åƒæ˜¯**"å­˜å‚¨ä½¿ç”¨è¯´æ˜ä¹¦"**ï¼Œå‘Šè¯‰ç³»ç»Ÿï¼š
> - ç”¨ä»€ä¹ˆæ–¹å¼æŒ‚è½½å­˜å‚¨
> - æœ‰ä»€ä¹ˆç‰¹æ®Šè¦æ±‚
> - éœ€è¦ä»€ä¹ˆæ€§èƒ½ä¼˜åŒ–

**å¸¸ç”¨æŒ‚è½½é€‰é¡¹**
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: optimized-storage
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
mountOptions:
  - debug                    # è°ƒè¯•æ¨¡å¼ï¼Œè¾“å‡ºè¯¦ç»†æ—¥å¿—
  - noatime                  # ä¸æ›´æ–°è®¿é—®æ—¶é—´ï¼Œæå‡æ€§èƒ½
  - barrier=0                # å…³é—­å†™å±éšœï¼Œæå‡å†™æ€§èƒ½ï¼ˆéœ€è°¨æ…ï¼‰
  - data=writeback           # æ•°æ®å†™å…¥ç­–ç•¥ï¼Œå¹³è¡¡æ€§èƒ½å’Œå®‰å…¨
```

**âš ï¸ æŒ‚è½½é€‰é¡¹æ³¨æ„äº‹é¡¹**
- ä¸åŒæ–‡ä»¶ç³»ç»Ÿæ”¯æŒçš„é€‰é¡¹ä¸åŒ
- æ€§èƒ½ä¼˜åŒ–é€‰é¡¹å¯èƒ½å½±å“æ•°æ®å®‰å…¨
- å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯åå†ç”¨äºç”Ÿäº§

### 4.4 allowedTopologies - æ‹“æ‰‘çº¦æŸ


**ğŸ—ºï¸ æ‹“æ‰‘çº¦æŸçš„æ„ä¹‰**
> æ‹“æ‰‘çº¦æŸå°±åƒæ˜¯**"å­˜å‚¨ä½ç½®é™åˆ¶"**ï¼Œç¡®ä¿ï¼š
> - å­˜å‚¨åˆ›å»ºåœ¨åˆé€‚çš„åŒºåŸŸ
> - Podå’Œå­˜å‚¨åœ¨åŒä¸€ä½ç½®ï¼Œå‡å°‘å»¶è¿Ÿ
> - æ»¡è¶³æ•°æ®æœ¬åœ°åŒ–è¦æ±‚

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: zone-specific-storage
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
allowedTopologies:
- matchLabelExpressions:
  - key: topology.kubernetes.io/zone    # é™åˆ¶å¯ç”¨åŒº
    values:
    - us-east-1a
    - us-east-1b
  - key: topology.kubernetes.io/region  # é™åˆ¶åŒºåŸŸ
    values:
    - us-east-1
volumeBindingMode: WaitForFirstConsumer
```

---

## 5. ğŸ’¼ å®é™…åœºæ™¯é…ç½®ç¤ºä¾‹


### 5.1 Webåº”ç”¨å­˜å‚¨é…ç½®


**ğŸŒ åœºæ™¯ï¼šç”µå•†ç½‘ç«™å›¾ç‰‡å­˜å‚¨**
```yaml
# é€‚åˆå­˜å‚¨ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ã€æ–‡æ¡£ç­‰æ–‡ä»¶
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: web-app-storage
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"  # è®¾ä¸ºé»˜è®¤å­˜å‚¨ç±»
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3              # é€šç”¨SSDï¼Œæ€§ä»·æ¯”é«˜
  fsType: ext4           # æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿ
  encrypted: "true"      # åŠ å¯†å­˜å‚¨ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®
reclaimPolicy: Retain    # ä¿ç•™æ•°æ®ï¼Œé¿å…è¯¯åˆ 
allowVolumeExpansion: true  # æ”¯æŒæ‰©å®¹ï¼Œåº”å¯¹æ•°æ®å¢é•¿
volumeBindingMode: WaitForFirstConsumer
```

### 5.2 æ•°æ®åº“å­˜å‚¨é…ç½®


**ğŸ’¾ åœºæ™¯ï¼šMySQLæ•°æ®åº“å­˜å‚¨**
```yaml
# é«˜æ€§èƒ½å­˜å‚¨ï¼Œé€‚åˆæ•°æ®åº“ç­‰IOå¯†é›†å‹åº”ç”¨
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: database-storage
provisioner: kubernetes.io/aws-ebs
parameters:
  type: io2              # é«˜æ€§èƒ½SSD
  fsType: ext4
  encrypted: "true"      # æ•°æ®åº“æ•°æ®å¿…é¡»åŠ å¯†
  iops: "5000"          # é«˜IOPSï¼Œæ”¯æŒæ•°æ®åº“å¹¶å‘
  throughput: "250"     # é«˜ååé‡
reclaimPolicy: Retain    # æ•°æ®åº“æ•°æ®ç»å¯¹ä¸èƒ½è¯¯åˆ 
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
mountOptions:
  - noatime             # æå‡æ•°æ®åº“æ€§èƒ½
  - barrier=1           # ä¿è¯æ•°æ®ä¸€è‡´æ€§
```

### 5.3 æ—¥å¿—å­˜å‚¨é…ç½®


**ğŸ“ åœºæ™¯ï¼šåº”ç”¨æ—¥å¿—æ”¶é›†å­˜å‚¨**
```yaml
# å¤§å®¹é‡ã€é«˜ååå­˜å‚¨ï¼Œé€‚åˆæ—¥å¿—ã€ç›‘æ§æ•°æ®
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: logging-storage
provisioner: kubernetes.io/aws-ebs
parameters:
  type: st1             # ååä¼˜åŒ–å‹HDDï¼Œæˆæœ¬ä½
  fsType: ext4
reclaimPolicy: Delete   # æ—¥å¿—æ•°æ®å¯ä»¥åˆ é™¤ï¼ŒèŠ‚çº¦æˆæœ¬
allowVolumeExpansion: true
volumeBindingMode: Immediate  # ç«‹å³åˆ›å»ºï¼Œæ—¥å¿—æ”¶é›†ä¸èƒ½ç­‰å¾…
```

### 5.4 å…±äº«å­˜å‚¨é…ç½®


**ğŸ¤ åœºæ™¯ï¼šå¤šä¸ªåº”ç”¨å…±äº«æ–‡ä»¶**
```yaml
# NFSå…±äº«å­˜å‚¨ï¼Œå¤šä¸ªPodå¯ä»¥åŒæ—¶è¯»å†™
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: shared-storage
provisioner: k8s-sigs.io/nfs-subdir-external-provisioner
parameters:
  server: 192.168.1.100
  path: /shared/data
  archiveOnDelete: "true"  # åˆ é™¤æ—¶å½’æ¡£ï¼Œä¿ç•™å†å²æ•°æ®
reclaimPolicy: Retain
allowVolumeExpansion: false
volumeBindingMode: Immediate
```

### 5.5 é«˜æ€§èƒ½è®¡ç®—å­˜å‚¨


**âš¡ åœºæ™¯ï¼šAIè®­ç»ƒã€å¤§æ•°æ®å¤„ç†**
```yaml
# æœ¬åœ°SSDå­˜å‚¨ï¼Œæœ€é«˜æ€§èƒ½
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: high-performance-storage
provisioner: kubernetes.io/no-provisioner
reclaimPolicy: Delete
allowVolumeExpansion: false
volumeBindingMode: WaitForFirstConsumer
mountOptions:
  - noatime             # ä¸è®°å½•è®¿é—®æ—¶é—´ï¼Œæå‡æ€§èƒ½
  - nobarrier           # å…³é—­å†™å±éšœï¼Œæœ€å¤§åŒ–æ€§èƒ½
```

---

## 6. ğŸ”§ æœ€ä½³å®è·µä¸æ•…éšœæ’æŸ¥


### 6.1 å­˜å‚¨ç±»å‘½åæœ€ä½³å®è·µ


**ğŸ“ å‘½åè§„èŒƒå»ºè®®**
```yaml
# æŒ‰æ€§èƒ½åˆ†ç±»
fast-ssd          # é«˜æ€§èƒ½SSDå­˜å‚¨
standard-ssd      # æ ‡å‡†SSDå­˜å‚¨
slow-hdd          # ç»æµå‹HDDå­˜å‚¨

# æŒ‰ç”¨é€”åˆ†ç±»  
database-storage  # æ•°æ®åº“ä¸“ç”¨å­˜å‚¨
web-storage       # Webåº”ç”¨å­˜å‚¨
backup-storage    # å¤‡ä»½å­˜å‚¨

# æŒ‰ç¯å¢ƒåˆ†ç±»
prod-fast-ssd     # ç”Ÿäº§ç¯å¢ƒé«˜æ€§èƒ½å­˜å‚¨
test-standard     # æµ‹è¯•ç¯å¢ƒæ ‡å‡†å­˜å‚¨
dev-cheap         # å¼€å‘ç¯å¢ƒç»æµå‹å­˜å‚¨
```

### 6.2 é»˜è®¤å­˜å‚¨ç±»é…ç½®


**ğŸ¯ è®¾ç½®é»˜è®¤å­˜å‚¨ç±»**
```yaml
metadata:
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
```

**ğŸ’¡ é»˜è®¤å­˜å‚¨ç±»çš„ä½œç”¨**
- å½“PVCæœªæŒ‡å®šStorageClassæ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨é»˜è®¤ç±»
- ç®€åŒ–å¼€å‘è€…ä½¿ç”¨æµç¨‹
- ç¡®ä¿å­˜å‚¨é…ç½®çš„ä¸€è‡´æ€§

**âš ï¸ æ³¨æ„äº‹é¡¹**
- é›†ç¾¤ä¸­åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤StorageClass
- ç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ç½®ä¿å®ˆçš„é»˜è®¤é…ç½®
- å®šæœŸå®¡æŸ¥é»˜è®¤å­˜å‚¨ç±»æ˜¯å¦ä»ç„¶åˆé€‚

### 6.3 å¸¸è§é—®é¢˜æ’æŸ¥


**ğŸ” PVCä¸€ç›´å¤„äºPendingçŠ¶æ€**

**å¯èƒ½åŸå› ä¸è§£å†³æ–¹æ¡ˆ**
```bash
# 1. æ£€æŸ¥StorageClassæ˜¯å¦å­˜åœ¨
kubectl get storageclass

# 2. æ£€æŸ¥PVCé…ç½®æ˜¯å¦æ­£ç¡®
kubectl describe pvc my-pvc

# 3. æ£€æŸ¥å­˜å‚¨ä¾›åº”å•†æ˜¯å¦å·¥ä½œæ­£å¸¸
kubectl get pods -n kube-system | grep provisioner

# 4. æ£€æŸ¥èŠ‚ç‚¹èµ„æºæ˜¯å¦å……è¶³
kubectl describe nodes
```

**ğŸ” å­˜å‚¨æŒ‚è½½å¤±è´¥**
```yaml
# å¸¸è§é”™è¯¯ä¿¡æ¯åˆ†æ
Events:
  Type     Reason       Message
  ----     ------       -------
  Warning  FailedMount  MountVolume.SetUp failed: mount failed
  
# è§£å†³æ­¥éª¤ï¼š
# 1. æ£€æŸ¥å­˜å‚¨æ˜¯å¦åˆ›å»ºæˆåŠŸ
kubectl get pv

# 2. æ£€æŸ¥PodèŠ‚ç‚¹æ˜¯å¦æœ‰æƒé™è®¿é—®å­˜å‚¨
kubectl describe node <node-name>

# 3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
kubectl describe pod <pod-name>
```

### 6.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**âš¡ å­˜å‚¨æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**

**é€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»å‹**
```yaml
# é«˜IOåº”ç”¨ï¼ˆæ•°æ®åº“ï¼‰
parameters:
  type: io2
  iops: "10000"

# å¤§æ–‡ä»¶ä¼ è¾“ï¼ˆå¤‡ä»½ã€æ—¥å¿—ï¼‰
parameters:
  type: gp3
  throughput: "1000"

# æˆæœ¬æ•æ„Ÿåº”ç”¨
parameters:
  type: st1  # ååä¼˜åŒ–å‹HDD
```

**æŒ‚è½½é€‰é¡¹ä¼˜åŒ–**
```yaml
mountOptions:
  - noatime          # ä¸æ›´æ–°è®¿é—®æ—¶é—´
  - nodiratime       # ä¸æ›´æ–°ç›®å½•è®¿é—®æ—¶é—´
  - rsize=1048576    # è¯»å–å—å¤§å°1MB
  - wsize=1048576    # å†™å…¥å—å¤§å°1MB
  - hard             # ç¡¬æŒ‚è½½ï¼Œä¿è¯å¯é æ€§
  - intr             # å…è®¸ä¸­æ–­ä¿¡å·
```

### 6.5 å®‰å…¨é…ç½®å»ºè®®


**ğŸ”’ å­˜å‚¨å®‰å…¨æœ€ä½³å®è·µ**

**æ•°æ®åŠ å¯†**
```yaml
parameters:
  encrypted: "true"           # å¯ç”¨å­˜å‚¨åŠ å¯†
  kmsKeyId: "alias/k8s-key"   # ä½¿ç”¨ä¸“ç”¨KMSå¯†é’¥
```

**è®¿é—®æ§åˆ¶**
```yaml
# ä½¿ç”¨RBACæ§åˆ¶StorageClassè®¿é—®æƒé™
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: storage-user
rules:
- apiGroups: [""]
  resources: ["persistentvolumeclaims"]
  verbs: ["create", "get", "list"]
- apiGroups: ["storage.k8s.io"]
  resources: ["storageclasses"]  
  verbs: ["get", "list"]
  resourceNames: ["web-storage"]  # åªå…è®¸ä½¿ç”¨ç‰¹å®šå­˜å‚¨ç±»
```

**å¤‡ä»½ç­–ç•¥**
```yaml
# é‡è¦æ•°æ®ä½¿ç”¨Retainç­–ç•¥
reclaimPolicy: Retain

# é…åˆå®šæœŸå¿«ç…§å¤‡ä»½
# ï¼ˆå…·ä½“å®ç°ä¾èµ–äº‘æœåŠ¡å•†çš„å¿«ç…§åŠŸèƒ½ï¼‰
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ StorageClassæœ¬è´¨ï¼šå­˜å‚¨çš„"è®¢è´­æ¨¡æ¿"ï¼Œå®šä¹‰å¦‚ä½•è‡ªåŠ¨åˆ›å»ºå­˜å‚¨
ğŸ”¸ Provisionerä½œç”¨ï¼šå…·ä½“çš„"å­˜å‚¨å·¥å‚"ï¼Œè´Ÿè´£åˆ›å»ºå®é™…å­˜å‚¨è®¾å¤‡
ğŸ”¸ Parametersé…ç½®ï¼šå­˜å‚¨çš„"å®šåˆ¶è¦æ±‚"ï¼Œå¦‚æ€§èƒ½ã€ç±»å‹ã€åŠ å¯†ç­‰
ğŸ”¸ å›æ”¶ç­–ç•¥é€‰æ‹©ï¼šDeleteé€‚åˆæµ‹è¯•ï¼ŒRetainé€‚åˆç”Ÿäº§ç¯å¢ƒ
ğŸ”¸ ç»‘å®šæ¨¡å¼å½±å“ï¼šImmediateç«‹å³åˆ›å»ºï¼ŒWaitForFirstConsumeræŒ‰éœ€åˆ›å»º
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ StorageClassçš„ä»·å€¼**
```
è‡ªåŠ¨åŒ–ä»·å€¼ï¼š
- å¼€å‘è€…åªéœ€ç”³è¯·å­˜å‚¨ï¼Œæ— éœ€å…³å¿ƒåº•å±‚å®ç°
- è¿ç»´äººå‘˜ç»Ÿä¸€é…ç½®ï¼Œæ ‡å‡†åŒ–å­˜å‚¨ç®¡ç†
- ç³»ç»Ÿè‡ªåŠ¨å¤„ç†ï¼Œå‡å°‘äººå·¥å¹²é¢„å’Œé”™è¯¯

æ ‡å‡†åŒ–ä»·å€¼ï¼š
- ä¸åŒç¯å¢ƒä½¿ç”¨ç»Ÿä¸€çš„å­˜å‚¨é…ç½®
- å›¢é˜Ÿåä½œæ›´åŠ é¡ºç•…
- é™ä½å­¦ä¹ å’Œç»´æŠ¤æˆæœ¬
```

**ğŸ”¹ é€‰æ‹©å­˜å‚¨ç±»å‹çš„è€ƒè™‘å› ç´ **
```
æ€§èƒ½éœ€æ±‚ï¼š
- æ•°æ®åº“ã€ç¼“å­˜ â†’ é«˜IOPSå­˜å‚¨(io2, Premium SSD)
- å¤§æ–‡ä»¶å¤„ç† â†’ é«˜ååé‡å­˜å‚¨(gp3, st1)
- æ™®é€šåº”ç”¨ â†’ æ ‡å‡†å­˜å‚¨(gp3, Standard SSD)

æˆæœ¬é¢„ç®—ï¼š
- é«˜æ€§èƒ½å­˜å‚¨ä»·æ ¼æ˜‚è´µï¼ŒæŒ‰éœ€é€‰æ‹©
- å½’æ¡£å­˜å‚¨æˆæœ¬å¾ˆä½ï¼Œé€‚åˆå¤‡ä»½
- æ··åˆä½¿ç”¨ä¸åŒå­˜å‚¨ç±»å‹ä¼˜åŒ–æˆæœ¬

å¯ç”¨æ€§è¦æ±‚ï¼š
- ç”Ÿäº§ç¯å¢ƒ â†’ å¤šå‰¯æœ¬ã€è·¨åŒºåŸŸå­˜å‚¨
- æµ‹è¯•ç¯å¢ƒ â†’ æ ‡å‡†å¯é æ€§å³å¯
- å¼€å‘ç¯å¢ƒ â†’ æœ€åŸºæœ¬çš„å­˜å‚¨å³å¯
```

**ğŸ”¹ ç”Ÿäº§ç¯å¢ƒé…ç½®åŸåˆ™**
```
å®‰å…¨ç¬¬ä¸€ï¼š
- é‡è¦æ•°æ®å¿…é¡»åŠ å¯†å­˜å‚¨
- ä½¿ç”¨Retainå›æ”¶ç­–ç•¥é˜²æ­¢è¯¯åˆ 
- é…ç½®é€‚å½“çš„è®¿é—®æ§åˆ¶æƒé™

æ€§èƒ½ä¼˜åŒ–ï¼š
- æ ¹æ®åº”ç”¨ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»å‹
- é…ç½®åˆç†çš„æŒ‚è½½é€‰é¡¹
- è€ƒè™‘å­˜å‚¨å’Œè®¡ç®—çš„ä½ç½®å…³ç³»

æˆæœ¬æ§åˆ¶ï¼š
- ä¸åŒåº”ç”¨ä½¿ç”¨ä¸åŒçº§åˆ«çš„å­˜å‚¨
- å®šæœŸæ¸…ç†ä¸éœ€è¦çš„å­˜å‚¨èµ„æº
- ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼Œä¼˜åŒ–é…ç½®
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ ä¸åŒåœºæ™¯çš„å­˜å‚¨é€‰æ‹©**

```
Webåº”ç”¨åœºæ™¯ï¼š
âœ… ä½¿ç”¨gp3 SSDï¼Œå¹³è¡¡æ€§èƒ½å’Œæˆæœ¬
âœ… å¯ç”¨åŠ å¯†ä¿æŠ¤ç”¨æˆ·æ•°æ®
âœ… å…è®¸å·æ‰©å±•åº”å¯¹æ•°æ®å¢é•¿
âœ… ä½¿ç”¨Retainç­–ç•¥ä¿æŠ¤é‡è¦æ•°æ®

æ•°æ®åº“åœºæ™¯ï¼š
âœ… ä½¿ç”¨io2é«˜æ€§èƒ½SSD
âœ… é…ç½®é«˜IOPSæ»¡è¶³å¹¶å‘éœ€æ±‚
âœ… ä¼˜åŒ–æŒ‚è½½é€‰é¡¹æå‡æ€§èƒ½
âœ… å¿…é¡»ä½¿ç”¨Retainç­–ç•¥

å¤§æ•°æ®åœºæ™¯ï¼š
âœ… ä½¿ç”¨st1ååä¼˜åŒ–å­˜å‚¨
âœ… é…ç½®å¤§å—è¯»å†™æå‡æ•ˆç‡
âœ… è€ƒè™‘ä½¿ç”¨æœ¬åœ°å­˜å‚¨æœ€å¤§åŒ–æ€§èƒ½
âœ… æ ¹æ®æ•°æ®é‡è¦æ€§é€‰æ‹©å›æ”¶ç­–ç•¥

å¼€å‘æµ‹è¯•ï¼š
âœ… ä½¿ç”¨æ ‡å‡†gp3å­˜å‚¨å³å¯
âœ… ä½¿ç”¨Deleteç­–ç•¥èŠ‚çº¦æˆæœ¬
âœ… è®¾ç½®åˆç†çš„é»˜è®¤å­˜å‚¨ç±»
âœ… å®šæœŸæ¸…ç†ä¸ç”¨çš„å­˜å‚¨èµ„æº
```

**ğŸ”§ è¿ç»´ç®¡ç†å»ºè®®**

```
æ—¥å¸¸ç›‘æ§ï¼š
- å®šæœŸæ£€æŸ¥å­˜å‚¨ä½¿ç”¨ç‡
- ç›‘æ§å­˜å‚¨æ€§èƒ½æŒ‡æ ‡
- åŠæ—¶å¤„ç†å­˜å‚¨å‘Šè­¦

å®¹é‡è§„åˆ’ï¼š
- æ ¹æ®ä¸šåŠ¡å¢é•¿é¢„æµ‹å­˜å‚¨éœ€æ±‚
- æå‰æ‰©å®¹é¿å…å½±å“ä¸šåŠ¡
- å®šæœŸè¯„ä¼°å­˜å‚¨é…ç½®æ˜¯å¦åˆç†

æˆæœ¬ä¼˜åŒ–ï¼š
- æ¸…ç†æ— ç”¨çš„PVèµ„æº
- è¯„ä¼°æ˜¯å¦å¯ä»¥é™çº§å­˜å‚¨ç±»å‹
- ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸç­–ç•¥è‡ªåŠ¨æ¸…ç†
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- StorageClassæ˜¯å­˜å‚¨è‡ªåŠ¨åŒ–çš„å…³é”®ï¼Œè®©å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
- é€‰æ‹©å­˜å‚¨ç±»å‹è¦ç»¼åˆè€ƒè™‘æ€§èƒ½ã€æˆæœ¬ã€å¯é æ€§éœ€æ±‚
- ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆè€ƒè™‘æ•°æ®å®‰å…¨ï¼Œæµ‹è¯•ç¯å¢ƒä¼˜å…ˆè€ƒè™‘æˆæœ¬æ•ˆç‡
- ä¸åŒåº”ç”¨åœºæ™¯éœ€è¦ä¸åŒçš„å­˜å‚¨é…ç½®ç­–ç•¥