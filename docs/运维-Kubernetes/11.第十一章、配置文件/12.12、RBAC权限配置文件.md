---
title: 12ã€RBACæƒé™é…ç½®æ–‡ä»¶
---
## ğŸ“š ç›®å½•

1. [RBACæƒé™æ§åˆ¶åŸºç¡€æ¦‚å¿µ](#1-RBACæƒé™æ§åˆ¶åŸºç¡€æ¦‚å¿µ)
2. [Roleè§’è‰²é…ç½®è¯¦è§£](#2-Roleè§’è‰²é…ç½®è¯¦è§£)
3. [ClusterRoleé›†ç¾¤è§’è‰²é…ç½®](#3-ClusterRoleé›†ç¾¤è§’è‰²é…ç½®)
4. [RoleBindingè§’è‰²ç»‘å®šé…ç½®](#4-RoleBindingè§’è‰²ç»‘å®šé…ç½®)
5. [ClusterRoleBindingé›†ç¾¤è§’è‰²ç»‘å®š](#5-ClusterRoleBindingé›†ç¾¤è§’è‰²ç»‘å®š)
6. [ServiceAccountæœåŠ¡è´¦æˆ·é…ç½®](#6-ServiceAccountæœåŠ¡è´¦æˆ·é…ç½®)
7. [è§„åˆ™ä¸æƒé™è¯¦ç»†è¯´æ˜](#7-è§„åˆ™ä¸æƒé™è¯¦ç»†è¯´æ˜)
8. [å®æˆ˜é…ç½®ç¤ºä¾‹](#8-å®æˆ˜é…ç½®ç¤ºä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” RBACæƒé™æ§åˆ¶åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯RBAC


**RBACï¼ˆRole-Based Access Controlï¼‰**å°±æ˜¯**åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶**ï¼Œè¯´ç™½äº†å°±æ˜¯Kubernetesç”¨æ¥ç®¡ç†"è°èƒ½åšä»€ä¹ˆ"çš„æƒé™ç³»ç»Ÿã€‚

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
å…¬å¸æƒé™ç®¡ç†               Kubernetes RBAC
     è€æ¿                     ClusterRole(admin)
      |                           |
   éƒ¨é—¨ç»ç†                   Role(namespace-admin)
      |                           |
   æ™®é€šå‘˜å·¥                ServiceAccount(pod)
      |                           |
   è®¿é—®æƒé™              æ“ä½œPodã€Serviceç­‰èµ„æº
```

**æ ¸å¿ƒæ€æƒ³**ï¼š
- **è§’è‰²å®šä¹‰**ï¼šå…ˆå®šä¹‰è§’è‰²èƒ½åšä»€ä¹ˆï¼ˆRole/ClusterRoleï¼‰
- **ç”¨æˆ·ç»‘å®š**ï¼šå†æŠŠç”¨æˆ·ç»‘å®šåˆ°è§’è‰²ä¸Šï¼ˆRoleBinding/ClusterRoleBindingï¼‰
- **æƒé™ç”Ÿæ•ˆ**ï¼šç”¨æˆ·å°±æœ‰äº†è§’è‰²çš„æƒé™

### 1.2 RBACçš„å››ä¸ªæ ¸å¿ƒç»„ä»¶


```
RBACæƒé™ä½“ç³»ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Role/         â”‚    â”‚  RoleBinding/   â”‚
â”‚   ClusterRole   â”‚â—„â”€â”€â”€â”‚ClusterRoleBindingâ”‚
â”‚   (å®šä¹‰æƒé™)     â”‚    â”‚   (ç»‘å®šå…³ç³»)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                       â”‚
         â”‚                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Rulesè§„åˆ™     â”‚    â”‚ ServiceAccount/ â”‚
â”‚  (å…·ä½“æ“ä½œæƒé™)  â”‚    â”‚   Userç”¨æˆ·      â”‚
â”‚                 â”‚    â”‚  (æƒé™ä¸»ä½“)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç»„ä»¶è¯´æ˜**ï¼š
- ğŸ­ **Role/ClusterRole**ï¼šå®šä¹‰"èƒ½åšä»€ä¹ˆ"
- ğŸ”— **RoleBinding/ClusterRoleBinding**ï¼šå®šä¹‰"è°å’Œè§’è‰²ç»‘å®š"
- ğŸ‘¤ **ServiceAccount/User**ï¼šå®šä¹‰"è°æ¥æ“ä½œ"
- ğŸ“‹ **Rules**ï¼šå®šä¹‰"å…·ä½“çš„æ“ä½œæƒé™"

### 1.3 å‘½åç©ºé—´çº§åˆ« vs é›†ç¾¤çº§åˆ«


**èŒƒå›´å¯¹æ¯”**ï¼š

| ç±»å‹ | **ä½œç”¨èŒƒå›´** | **åº”ç”¨åœºæ™¯** | **æƒé™è¾¹ç•Œ** |
|------|-------------|-------------|-------------|
| ğŸ  **Role + RoleBinding** | `å•ä¸ªå‘½åç©ºé—´å†…` | `å¼€å‘å›¢é˜Ÿæƒé™ç®¡ç†` | `åªèƒ½è®¿é—®æŒ‡å®šnamespace` |
| ğŸŒ **ClusterRole + ClusterRoleBinding** | `æ•´ä¸ªé›†ç¾¤èŒƒå›´` | `é›†ç¾¤ç®¡ç†å‘˜æƒé™` | `å¯ä»¥è®¿é—®æ‰€æœ‰namespace` |

---

## 2. ğŸ­ Roleè§’è‰²é…ç½®è¯¦è§£


### 2.1 RoleåŸºæœ¬ç»“æ„


**Role**å°±æ˜¯åœ¨**å•ä¸ªå‘½åç©ºé—´å†…**å®šä¹‰æƒé™çš„é…ç½®æ–‡ä»¶ã€‚

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: development  # åªåœ¨è¿™ä¸ªå‘½åç©ºé—´ç”Ÿæ•ˆ
  name: pod-manager      # è§’è‰²åç§°
rules:                   # æƒé™è§„åˆ™åˆ—è¡¨
- apiGroups: [""]        # APIç»„
  resources: ["pods"]    # å¯æ“ä½œçš„èµ„æºç±»å‹
  verbs: ["get", "list", "create", "delete"]  # å¯æ‰§è¡Œçš„æ“ä½œ
```

### 2.2 Rulesè§„åˆ™è¯¦è§£


**rules**æ˜¯Roleæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå®šä¹‰äº†å…·ä½“çš„æƒé™ï¼š

```yaml
rules:
# è§„åˆ™1ï¼šPodæ“ä½œæƒé™
- apiGroups: [""]                    # æ ¸å¿ƒAPIç»„ï¼ˆç©ºå­—ç¬¦ä¸²è¡¨ç¤ºæ ¸å¿ƒç»„ï¼‰
  resources: ["pods"]                # èµ„æºç±»å‹ï¼šPod
  verbs: ["get", "list", "create"]   # å…è®¸çš„æ“ä½œï¼šæŸ¥çœ‹ã€åˆ—è¡¨ã€åˆ›å»º

# è§„åˆ™2ï¼šServiceæ“ä½œæƒé™
- apiGroups: [""]
  resources: ["services"]
  verbs: ["get", "list"]             # åªèƒ½æŸ¥çœ‹Serviceï¼Œä¸èƒ½ä¿®æ”¹

# è§„åˆ™3ï¼šç‰¹å®šèµ„æºæ“ä½œ
- apiGroups: [""]
  resources: ["pods"]
  resourceNames: ["my-pod"]          # åªèƒ½æ“ä½œåä¸ºmy-podçš„èµ„æº
  verbs: ["get", "delete"]
```

**å­—æ®µè¯¦è§£**ï¼š
- ğŸ“š **apiGroups**ï¼šAPIç»„ï¼Œ""è¡¨ç¤ºæ ¸å¿ƒç»„ï¼Œ"apps"è¡¨ç¤ºåº”ç”¨ç»„
- ğŸ“¦ **resources**ï¼šèµ„æºç±»å‹ï¼Œå¦‚podsã€servicesã€deployments
- âš¡ **verbs**ï¼šæ“ä½œåŠ¨è¯ï¼Œå¦‚getã€createã€updateã€delete
- ğŸ¯ **resourceNames**ï¼šç‰¹å®šèµ„æºåç§°ï¼ˆå¯é€‰ï¼Œé™åˆ¶åˆ°å…·ä½“èµ„æºï¼‰

### 2.3 å¸¸ç”¨verbsæ“ä½œåŠ¨è¯


| åŠ¨è¯ | **å«ä¹‰** | **è¯´æ˜** | **ç¤ºä¾‹åœºæ™¯** |
|------|---------|---------|-------------|
| `get` | **æŸ¥çœ‹å•ä¸ªèµ„æº** | `è·å–æŸä¸ªPodçš„è¯¦ç»†ä¿¡æ¯` | `kubectl get pod my-pod` |
| `list` | **æŸ¥çœ‹èµ„æºåˆ—è¡¨** | `è·å–æ‰€æœ‰Podçš„åˆ—è¡¨` | `kubectl get pods` |
| `create` | **åˆ›å»ºèµ„æº** | `åˆ›å»ºæ–°çš„Podæˆ–Service` | `kubectl apply -f pod.yaml` |
| `update` | **æ›´æ–°èµ„æº** | `ä¿®æ”¹ç°æœ‰èµ„æºçš„é…ç½®` | `kubectl edit pod my-pod` |
| `patch` | **éƒ¨åˆ†æ›´æ–°** | `åªä¿®æ”¹èµ„æºçš„æŸäº›å­—æ®µ` | `kubectl patch pod my-pod` |
| `delete` | **åˆ é™¤èµ„æº** | `åˆ é™¤æŒ‡å®šçš„èµ„æº` | `kubectl delete pod my-pod` |
| `watch` | **ç›‘å¬å˜åŒ–** | `å®æ—¶ç›‘å¬èµ„æºçŠ¶æ€å˜åŒ–` | `kubectl get pods -w` |

### 2.4 å®ç”¨Roleé…ç½®ç¤ºä¾‹


**å¼€å‘äººå‘˜è§’è‰²**ï¼š
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: development
  name: developer-role
rules:
# å¯ä»¥ç®¡ç†Pod
- apiGroups: [""]
  resources: ["pods", "pods/log"]
  verbs: ["get", "list", "create", "delete", "watch"]
  
# å¯ä»¥æŸ¥çœ‹Service
- apiGroups: [""]
  resources: ["services"]
  verbs: ["get", "list"]
  
# å¯ä»¥ç®¡ç†ConfigMapå’ŒSecret
- apiGroups: [""]
  resources: ["configmaps", "secrets"]
  verbs: ["get", "list", "create", "update"]
```

**åªè¯»è§’è‰²**ï¼š
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: production
  name: readonly-role
rules:
- apiGroups: [""]
  resources: ["pods", "services", "configmaps"]
  verbs: ["get", "list", "watch"]  # åªèƒ½æŸ¥çœ‹ï¼Œä¸èƒ½ä¿®æ”¹
```

---

## 3. ğŸŒ ClusterRoleé›†ç¾¤è§’è‰²é…ç½®


### 3.1 ClusterRoleä¸Roleçš„åŒºåˆ«


**ClusterRole**æ˜¯**é›†ç¾¤èŒƒå›´**çš„æƒé™å®šä¹‰ï¼Œä¸Roleçš„ä¸»è¦åŒºåˆ«ï¼š

```
ä½œç”¨èŒƒå›´å¯¹æ¯”ï¼š
Roleä½œç”¨èŒƒå›´ï¼š
â”Œâ”€ Namespace: dev â”€â”
â”‚   Pod1   Pod2    â”‚  â† Roleåªèƒ½ç®¡ç†è¿™ä¸ªnamespaceå†…çš„èµ„æº
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ClusterRoleä½œç”¨èŒƒå›´ï¼š
â”Œâ”€ Namespace: dev â”€â”  â”Œâ”€ Namespace: prod â”€â”  â”Œâ”€ Cluster Resources â”€â”
â”‚   Pod1   Pod2    â”‚  â”‚   Pod3   Pod4     â”‚  â”‚  Node1   Node2      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                    â–²                       â–²
          â””â”€â”€â”€â”€â”€â”€â”€ ClusterRoleå¯ä»¥ç®¡ç†æ‰€æœ‰èµ„æº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ClusterRoleåŸºæœ¬é…ç½®


```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-admin-role  # é›†ç¾¤è§’è‰²åç§°ï¼ˆæ²¡æœ‰namespaceå­—æ®µï¼‰
rules:
# é›†ç¾¤çº§åˆ«èµ„æºæƒé™
- apiGroups: [""]
  resources: ["nodes", "namespaces"]     # èŠ‚ç‚¹ã€å‘½åç©ºé—´ç­‰é›†ç¾¤èµ„æº
  verbs: ["get", "list", "create", "delete"]

# è·¨å‘½åç©ºé—´çš„Podç®¡ç†æƒé™
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "create", "delete"]  # å¯ä»¥ç®¡ç†æ‰€æœ‰namespaceçš„Pod
```

### 3.3 é›†ç¾¤èµ„æºç±»å‹è¯´æ˜


**åªæœ‰ClusterRoleæ‰èƒ½ç®¡ç†çš„èµ„æº**ï¼š

| èµ„æºç±»å‹ | **è¯´æ˜** | **ç”¨é€”** |
|---------|---------|---------|
| `nodes` | **é›†ç¾¤èŠ‚ç‚¹** | `ç®¡ç†Kuberneteså·¥ä½œèŠ‚ç‚¹` |
| `namespaces` | **å‘½åç©ºé—´** | `åˆ›å»ºå’Œç®¡ç†å‘½åç©ºé—´` |
| `persistentvolumes` | **æŒä¹…å·** | `ç®¡ç†é›†ç¾¤çº§åˆ«çš„å­˜å‚¨å·` |
| `clusterroles` | **é›†ç¾¤è§’è‰²** | `ç®¡ç†RBACé›†ç¾¤è§’è‰²` |
| `clusterrolebindings` | **é›†ç¾¤è§’è‰²ç»‘å®š** | `ç®¡ç†RBACé›†ç¾¤ç»‘å®šå…³ç³»` |

### 3.4 èšåˆè§„åˆ™(aggregationRule)


**èšåˆè§„åˆ™**å…è®¸ClusterRole**è‡ªåŠ¨åŒ…å«**å…¶ä»–ClusterRoleçš„æƒé™ï¼š

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: monitoring-cluster-role
aggregationRule:           # èšåˆè§„åˆ™
  clusterRoleSelectors:
  - matchLabels:
      rbac.example.com/aggregate-to-monitoring: "true"
rules: []  # è§„åˆ™ä¸ºç©ºï¼Œé€šè¿‡èšåˆè·å–æƒé™
---
# è¢«èšåˆçš„ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: monitoring-pods
  labels:
    rbac.example.com/aggregate-to-monitoring: "true"  # åŒ¹é…èšåˆæ ‡ç­¾
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list"]
```

**èšåˆè§„åˆ™çš„å¥½å¤„**ï¼š
- ğŸ”§ **æ¨¡å—åŒ–ç®¡ç†**ï¼šæƒé™å¯ä»¥åˆ†æ•£å®šä¹‰ï¼Œç»Ÿä¸€èšåˆ
- ğŸ”„ **åŠ¨æ€æ›´æ–°**ï¼šæ–°å¢åŒ¹é…æ ‡ç­¾çš„ClusterRoleä¼šè‡ªåŠ¨èšåˆ
- ğŸ“¦ **æƒé™ç»„åˆ**ï¼šå¤æ‚æƒé™å¯ä»¥ç”±å¤šä¸ªç®€å•æƒé™ç»„åˆè€Œæˆ

---

## 4. ğŸ”— RoleBindingè§’è‰²ç»‘å®šé…ç½®


### 4.1 RoleBindingåŸºæœ¬æ¦‚å¿µ


**RoleBinding**å°±æ˜¯æŠŠ**ç”¨æˆ·/æœåŠ¡è´¦æˆ·**å’Œ**Role**ç»‘å®šèµ·æ¥ï¼Œè®©ç”¨æˆ·æ‹¥æœ‰Roleå®šä¹‰çš„æƒé™ã€‚

```
ç»‘å®šå…³ç³»ç¤ºæ„ï¼š
â”Œâ”€ ç”¨æˆ·/ServiceAccount â”€â”    â”Œâ”€â”€â”€ Role â”€â”€â”€â”
â”‚   developer-user      â”‚â—„â”€â”€â–ºâ”‚ pod-manager â”‚
â”‚                       â”‚    â”‚ (Podæ“ä½œæƒé™)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–²
           â”‚ RoleBindingè¿æ¥ä¸¤è€…
           â–¼
    ç”¨æˆ·è·å¾—Podç®¡ç†æƒé™
```

### 4.2 RoleBindingé…ç½®ç»“æ„


```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: developer-binding      # ç»‘å®šåç§°
  namespace: development       # ä½œç”¨çš„å‘½åç©ºé—´
subjects:                      # æƒé™ä¸»ä½“ï¼ˆç”¨æˆ·åˆ—è¡¨ï¼‰
- kind: ServiceAccount         # ä¸»ä½“ç±»å‹ï¼šæœåŠ¡è´¦æˆ·
  name: developer-sa           # æœåŠ¡è´¦æˆ·åç§°
  namespace: development       # æœåŠ¡è´¦æˆ·æ‰€åœ¨å‘½åç©ºé—´
- kind: User                   # ä¸»ä½“ç±»å‹ï¼šç”¨æˆ·
  name: developer-user         # ç”¨æˆ·å
  apiGroup: rbac.authorization.k8s.io
roleRef:                       # è§’è‰²å¼•ç”¨
  kind: Role                   # å¼•ç”¨çš„è§’è‰²ç±»å‹
  name: pod-manager            # è§’è‰²åç§°
  apiGroup: rbac.authorization.k8s.io
```

### 4.3 subjectsä¸»ä½“ç±»å‹è¯¦è§£


**subjects**å®šä¹‰äº†"è°"ä¼šè·å¾—æƒé™ï¼š

| ä¸»ä½“ç±»å‹ | **è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** | **é…ç½®ç¤ºä¾‹** |
|---------|---------|-------------|-------------|
| `ServiceAccount` | **æœåŠ¡è´¦æˆ·** | `Podå†…åº”ç”¨ç¨‹åºçš„èº«ä»½` | `kind: ServiceAccount` |
| `User` | **ç”¨æˆ·** | `äººå·¥æ“ä½œçš„èº«ä»½` | `kind: User` |
| `Group` | **ç”¨æˆ·ç»„** | `ä¸€ç»„ç”¨æˆ·çš„é›†åˆ` | `kind: Group` |

**ServiceAccounté…ç½®**ï¼š
```yaml
subjects:
- kind: ServiceAccount
  name: my-service-account    # æœåŠ¡è´¦æˆ·å
  namespace: development      # å¿…é¡»æŒ‡å®šå‘½åç©ºé—´
```

**Useré…ç½®**ï¼š
```yaml
subjects:
- kind: User
  name: developer@company.com # ç”¨æˆ·åï¼ˆé€šå¸¸æ˜¯é‚®ç®±ï¼‰
  apiGroup: rbac.authorization.k8s.io  # å¿…éœ€å­—æ®µ
```

**Groupé…ç½®**ï¼š
```yaml
subjects:
- kind: Group
  name: development-team      # ç»„å
  apiGroup: rbac.authorization.k8s.io
```

### 4.4 RoleBindingç»‘å®šClusterRole


**é‡è¦ç‰¹æ€§**ï¼šRoleBindingä¹Ÿå¯ä»¥ç»‘å®šClusterRoleï¼Œä½†**æƒé™ä¼šè¢«é™åˆ¶åœ¨å‘½åç©ºé—´å†…**ã€‚

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: admin-binding
  namespace: development    # åªåœ¨developmentå‘½åç©ºé—´ç”Ÿæ•ˆ
subjects:
- kind: User
  name: admin-user
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole        # ç»‘å®šé›†ç¾¤è§’è‰²
  name: admin              # ç³»ç»Ÿé¢„å®šä¹‰çš„adminè§’è‰²
  apiGroup: rbac.authorization.k8s.io
```

**æ•ˆæœè¯´æ˜**ï¼š
- âœ… admin-useråœ¨developmentå‘½åç©ºé—´æœ‰adminæƒé™
- âŒ admin-useråœ¨å…¶ä»–å‘½åç©ºé—´**æ²¡æœ‰**adminæƒé™

---

## 5. ğŸŒŸ ClusterRoleBindingé›†ç¾¤è§’è‰²ç»‘å®š


### 5.1 ClusterRoleBindingåŸºæœ¬æ¦‚å¿µ


**ClusterRoleBinding**æŠŠç”¨æˆ·ä¸ClusterRoleç»‘å®šï¼Œèµ‹äºˆ**é›†ç¾¤èŒƒå›´**çš„æƒé™ã€‚

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cluster-admin-binding  # æ³¨æ„ï¼šæ²¡æœ‰namespaceå­—æ®µ
subjects:
- kind: User
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole           # å¿…é¡»æ˜¯ClusterRole
  name: cluster-admin         # ç³»ç»Ÿé¢„å®šä¹‰çš„é›†ç¾¤ç®¡ç†å‘˜è§’è‰²
  apiGroup: rbac.authorization.k8s.io
```

### 5.2 æƒé™èŒƒå›´å¯¹æ¯”


```
æƒé™èŒƒå›´å¯¹æ¯”å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Kubernetesé›†ç¾¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€ NS: dev â”€â”  â”Œâ”€ NS: prod â”€â”  â”Œâ”€é›†ç¾¤èµ„æºâ”€â” â”‚
â”‚  â”‚   Pod1    â”‚  â”‚    Pod3    â”‚  â”‚  Node1  â”‚ â”‚
â”‚  â”‚   Pod2    â”‚  â”‚    Pod4    â”‚  â”‚  Node2  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  RoleBindingä½œç”¨èŒƒå›´ï¼š    åªèƒ½è®¿é—®å•ä¸ªNSå†…èµ„æº â”‚
â”‚  ClusterRoleBindingï¼š     å¯ä»¥è®¿é—®æ‰€æœ‰èµ„æº    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å®é™…é…ç½®ç¤ºä¾‹


**é›†ç¾¤ç›‘æ§è§’è‰²ç»‘å®š**ï¼š
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: monitoring-binding
subjects:
- kind: ServiceAccount
  name: prometheus-sa
  namespace: monitoring    # ServiceAccountçš„å‘½åç©ºé—´
roleRef:
  kind: ClusterRole
  name: cluster-reader     # åªè¯»é›†ç¾¤æƒé™
  apiGroup: rbac.authorization.k8s.io
```

**å¼€å‘å›¢é˜Ÿé›†ç¾¤è®¿é—®**ï¼š
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: developers-cluster-access
subjects:
- kind: Group
  name: developers         # å¼€å‘å›¢é˜Ÿç»„
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: view              # ç³»ç»Ÿé¢„å®šä¹‰çš„viewè§’è‰²
  apiGroup: rbac.authorization.k8s.io
```

---

## 6. ğŸ‘¤ ServiceAccountæœåŠ¡è´¦æˆ·é…ç½®


### 6.1 ServiceAccountåŸºæœ¬æ¦‚å¿µ


**ServiceAccount**æ˜¯ä¸º**Podå†…è¿è¡Œçš„åº”ç”¨ç¨‹åº**æä¾›èº«ä»½è®¤è¯çš„æœºåˆ¶ã€‚

```
Podèº«ä»½è®¤è¯æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Pod      â”‚    â”‚ServiceAccountâ”‚    â”‚ Kubernetes  â”‚
â”‚             â”‚â”€â”€â”€â–ºâ”‚    Token     â”‚â”€â”€â”€â–ºâ”‚  API Server â”‚
â”‚   åº”ç”¨ç¨‹åº   â”‚    â”‚              â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²                     â–²                    â”‚
     â”‚                     â”‚                    â–¼
     â””â”€â”€â”€â”€â”€â”€â”€ è·å¾—Podæ“ä½œæƒé™ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ServiceAccounté…ç½®


```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-service-account    # æœåŠ¡è´¦æˆ·åç§°
  namespace: development      # æ‰€å±å‘½åç©ºé—´
  labels:                     # æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
    app: my-app
secrets:                      # å…³è”çš„Secretï¼ˆå¯é€‰ï¼‰
- name: my-sa-token
automountServiceAccountToken: true  # è‡ªåŠ¨æŒ‚è½½tokenï¼ˆé»˜è®¤trueï¼‰
```

### 6.3 Podä¸­ä½¿ç”¨ServiceAccount


```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-app-pod
  namespace: development
spec:
  serviceAccountName: my-service-account  # æŒ‡å®šä½¿ç”¨çš„ServiceAccount
  containers:
  - name: my-app
    image: my-app:latest
    # Podä¼šè‡ªåŠ¨è·å¾—ServiceAccountçš„æƒé™
```

**è‡ªåŠ¨æŒ‚è½½çš„å†…å®¹**ï¼š
```
Podå†…è‡ªåŠ¨æŒ‚è½½è·¯å¾„ï¼š/var/run/secrets/kubernetes.io/serviceaccount/
â”œâ”€â”€ token       # è®¤è¯ä»¤ç‰Œ
â”œâ”€â”€ ca.crt      # CAè¯ä¹¦
â””â”€â”€ namespace   # å‘½åç©ºé—´ä¿¡æ¯
```

### 6.4 å®Œæ•´çš„ServiceAccountæƒé™é…ç½®


```yaml
# 1. åˆ›å»ºServiceAccount
apiVersion: v1
kind: ServiceAccount
metadata:
  name: pod-manager-sa
  namespace: development

---
# 2. åˆ›å»ºRole
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: pod-manager-role
  namespace: development
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "create", "delete"]

---
# 3. åˆ›å»ºRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: pod-manager-binding
  namespace: development
subjects:
- kind: ServiceAccount
  name: pod-manager-sa      # ç»‘å®šä¸Šé¢åˆ›å»ºçš„ServiceAccount
  namespace: development
roleRef:
  kind: Role
  name: pod-manager-role    # ç»‘å®šä¸Šé¢åˆ›å»ºçš„Role
  apiGroup: rbac.authorization.k8s.io
```

---

## 7. ğŸ“‹ è§„åˆ™ä¸æƒé™è¯¦ç»†è¯´æ˜


### 7.1 apiGroups APIç»„è¯¦è§£


**APIç»„**æ˜¯Kubernetesèµ„æºçš„åˆ†ç±»æ–¹å¼ï¼š

| APIç»„ | **èµ„æºç¤ºä¾‹** | **è¯´æ˜** |
|-------|-------------|---------|
| `""` (æ ¸å¿ƒç»„) | `pods, services, configmaps` | **æœ€åŸºç¡€çš„Kubernetesèµ„æº** |
| `"apps"` | `deployments, daemonsets, replicasets` | **åº”ç”¨ç¨‹åºç›¸å…³èµ„æº** |
| `"networking.k8s.io"` | `networkpolicies, ingresses` | **ç½‘ç»œç›¸å…³èµ„æº** |
| `"rbac.authorization.k8s.io"` | `roles, rolebindings, clusterroles` | **RBACæƒé™ç›¸å…³èµ„æº** |
| `"storage.k8s.io"` | `storageclasses, volumeattachments` | **å­˜å‚¨ç›¸å…³èµ„æº** |

**æŸ¥çœ‹é›†ç¾¤ä¸­æ‰€æœ‰APIç»„**ï¼š
```bash
kubectl api-resources --sort-by=name
```

### 7.2 resourcesèµ„æºç±»å‹è¯´æ˜


**å¸¸ç”¨èµ„æºç±»å‹åˆ†ç±»**ï¼š

**ğŸ“¦ å·¥ä½œè´Ÿè½½èµ„æº**ï¼š
```yaml
resources: ["pods", "deployments", "services", "ingresses"]
```

**ğŸ”§ é…ç½®èµ„æº**ï¼š
```yaml
resources: ["configmaps", "secrets"]
```

**ğŸ“Š ç›‘æ§èµ„æº**ï¼š
```yaml
resources: ["pods/log", "pods/status", "nodes/metrics"]
```

**å­èµ„æºè®¿é—®**ï¼š
```yaml
# è®¿é—®Podæ—¥å¿—
resources: ["pods/log"]
# è®¿é—®PodçŠ¶æ€
resources: ["pods/status"]
# æ‰§è¡ŒPodå‘½ä»¤
resources: ["pods/exec"]
```

### 7.3 verbsæ“ä½œæƒé™æœ€ä½³å®è·µ


**æƒé™æœ€å°åŒ–åŸåˆ™**ï¼š

```yaml
# âŒ è¿‡äºå®½æ³›çš„æƒé™
verbs: ["*"]  # ä¸æ¨èï¼šç»™äºˆæ‰€æœ‰æ“ä½œæƒé™

# âœ… ç²¾ç¡®çš„æƒé™é…ç½®
rules:
# åªè¯»æƒé™
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]

# ç®¡ç†æƒé™ï¼ˆä¸åŒ…æ‹¬åˆ é™¤ï¼‰
- apiGroups: [""]
  resources: ["configmaps"]
  verbs: ["get", "list", "create", "update", "patch"]
```

**æƒé™ç»„åˆå»ºè®®**ï¼š

| ä½¿ç”¨åœºæ™¯ | **æ¨èæƒé™ç»„åˆ** |
|---------|----------------|
| **åªè¯»ç›‘æ§** | `["get", "list", "watch"]` |
| **åº”ç”¨éƒ¨ç½²** | `["get", "list", "create", "update", "patch"]` |
| **å®Œå…¨ç®¡ç†** | `["get", "list", "create", "update", "patch", "delete"]` |
| **è°ƒè¯•æ’éšœ** | `["get", "list", "watch"]` + ç‰¹å®šå­èµ„æº |

### 7.4 resourceNamesç²¾ç¡®æ§åˆ¶


**resourceNames**å¯ä»¥é™åˆ¶æƒé™åˆ°ç‰¹å®šçš„èµ„æºå®ä¾‹ï¼š

```yaml
rules:
# åªèƒ½æ“ä½œç‰¹å®šåç§°çš„Pod
- apiGroups: [""]
  resources: ["pods"]
  resourceNames: ["my-app-pod", "nginx-pod"]  # åªèƒ½æ“ä½œè¿™ä¸¤ä¸ªPod
  verbs: ["get", "delete"]

# åªèƒ½è®¿é—®ç‰¹å®šçš„Secret
- apiGroups: [""]
  resources: ["secrets"]
  resourceNames: ["my-app-secret"]
  verbs: ["get"]
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- ğŸ”’ **æ•æ„Ÿèµ„æºä¿æŠ¤**ï¼šé™åˆ¶å¯¹ç‰¹å®šSecretçš„è®¿é—®
- ğŸ¯ **ç²¾ç¡®æƒé™æ§åˆ¶**ï¼šåªå…è®¸æ“ä½œç‰¹å®šçš„èµ„æºå®ä¾‹
- ğŸ›¡ï¸ **å®‰å…¨éš”ç¦»**ï¼šé˜²æ­¢è¯¯æ“ä½œå…¶ä»–é‡è¦èµ„æº

---

## 8. ğŸš€ å®æˆ˜é…ç½®ç¤ºä¾‹


### 8.1 å¼€å‘ç¯å¢ƒæƒé™é…ç½®


**åœºæ™¯**ï¼šä¸ºå¼€å‘å›¢é˜Ÿé…ç½®developmentå‘½åç©ºé—´çš„æƒé™

```yaml
# å¼€å‘å›¢é˜ŸServiceAccount
apiVersion: v1
kind: ServiceAccount
metadata:
  name: developer-sa
  namespace: development

---
# å¼€å‘è§’è‰²å®šä¹‰
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: developer-role
  namespace: development
rules:
# Podå®Œå…¨ç®¡ç†æƒé™
- apiGroups: [""]
  resources: ["pods", "pods/log", "pods/exec"]
  verbs: ["get", "list", "create", "update", "patch", "delete", "watch"]

# Serviceç®¡ç†æƒé™
- apiGroups: [""]
  resources: ["services"]
  verbs: ["get", "list", "create", "update", "patch", "delete"]

# ConfigMapå’ŒSecretç®¡ç†
- apiGroups: [""]
  resources: ["configmaps", "secrets"]
  verbs: ["get", "list", "create", "update", "patch"]  # ä¸èƒ½åˆ é™¤

# Deploymentç®¡ç†æƒé™
- apiGroups: ["apps"]
  resources: ["deployments", "replicasets"]
  verbs: ["get", "list", "create", "update", "patch", "delete"]

---
# è§’è‰²ç»‘å®š
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: developer-binding
  namespace: development
subjects:
- kind: ServiceAccount
  name: developer-sa
  namespace: development
- kind: User
  name: developer@company.com
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: developer-role
  apiGroup: rbac.authorization.k8s.io
```

### 8.2 ç”Ÿäº§ç¯å¢ƒåªè¯»æƒé™


**åœºæ™¯**ï¼šä¸ºç›‘æ§ç³»ç»Ÿé…ç½®è·¨å‘½åç©ºé—´çš„åªè¯»æƒé™

```yaml
# ç›‘æ§ServiceAccount
apiVersion: v1
kind: ServiceAccount
metadata:
  name: monitoring-sa
  namespace: monitoring

---
# é›†ç¾¤åªè¯»è§’è‰²
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: monitoring-reader
rules:
# Podå’ŒNodeç›‘æ§
- apiGroups: [""]
  resources: ["nodes", "nodes/metrics", "nodes/stats"]
  verbs: ["get", "list", "watch"]

# æ‰€æœ‰å‘½åç©ºé—´çš„Podç›‘æ§
- apiGroups: [""]
  resources: ["pods", "pods/log", "pods/status"]
  verbs: ["get", "list", "watch"]

# Serviceå’ŒEndpointç›‘æ§
- apiGroups: [""]
  resources: ["services", "endpoints"]
  verbs: ["get", "list", "watch"]

# åº”ç”¨çŠ¶æ€ç›‘æ§
- apiGroups: ["apps"]
  resources: ["deployments", "daemonsets", "statefulsets"]
  verbs: ["get", "list", "watch"]

---
# é›†ç¾¤è§’è‰²ç»‘å®š
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: monitoring-reader-binding
subjects:
- kind: ServiceAccount
  name: monitoring-sa
  namespace: monitoring
roleRef:
  kind: ClusterRole
  name: monitoring-reader
  apiGroup: rbac.authorization.k8s.io
```

### 8.3 å¤šå›¢é˜Ÿæƒé™éš”ç¦»é…ç½®


**åœºæ™¯**ï¼šå‰ç«¯å›¢é˜Ÿå’Œåç«¯å›¢é˜Ÿçš„æƒé™éš”ç¦»

```yaml
# å‰ç«¯å›¢é˜Ÿæƒé™
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: frontend-role
  namespace: frontend
rules:
- apiGroups: [""]
  resources: ["pods", "services", "configmaps"]
  verbs: ["get", "list", "create", "update", "patch", "delete"]
- apiGroups: ["apps"]
  resources: ["deployments"]
  resourceNames: ["frontend-app", "nginx-proxy"]  # åªèƒ½ç®¡ç†ç‰¹å®šåº”ç”¨
  verbs: ["get", "list", "update", "patch"]

---
# åç«¯å›¢é˜Ÿæƒé™
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: backend-role
  namespace: backend
rules:
- apiGroups: [""]
  resources: ["pods", "services", "configmaps", "secrets"]
  verbs: ["get", "list", "create", "update", "patch", "delete"]
- apiGroups: ["apps"]
  resources: ["deployments", "statefulsets"]
  verbs: ["get", "list", "create", "update", "patch", "delete"]
# åç«¯å¯ä»¥è®¿é—®æ•°æ®åº“ç›¸å…³èµ„æº
- apiGroups: [""]
  resources: ["persistentvolumeclaims"]
  verbs: ["get", "list", "create"]

---
# å›¢é˜Ÿç»‘å®š
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: frontend-team-binding
  namespace: frontend
subjects:
- kind: Group
  name: frontend-team
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: frontend-role
  apiGroup: rbac.authorization.k8s.io

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: backend-team-binding
  namespace: backend
subjects:
- kind: Group
  name: backend-team
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: backend-role
  apiGroup: rbac.authorization.k8s.io
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ” RBACå››å¤§ç»„ä»¶ï¼š
â”œâ”€â”€ Role/ClusterRoleï¼šå®šä¹‰"èƒ½åšä»€ä¹ˆ"
â”œâ”€â”€ RoleBinding/ClusterRoleBindingï¼šå®šä¹‰"è°å’Œè§’è‰²ç»‘å®š"
â”œâ”€â”€ ServiceAccountï¼šPodçš„èº«ä»½æ ‡è¯†
â””â”€â”€ Rulesï¼šå…·ä½“çš„æƒé™è§„åˆ™

ğŸ¯ æƒé™ä½œç”¨èŒƒå›´ï¼š
â”œâ”€â”€ Role + RoleBindingï¼šå‘½åç©ºé—´çº§åˆ«æƒé™
â””â”€â”€ ClusterRole + ClusterRoleBindingï¼šé›†ç¾¤çº§åˆ«æƒé™

ğŸ“‹ æƒé™è§„åˆ™è¦ç´ ï¼š
â”œâ”€â”€ apiGroupsï¼šAPIç»„ï¼ˆ""ã€"apps"ç­‰ï¼‰
â”œâ”€â”€ resourcesï¼šèµ„æºç±»å‹ï¼ˆpodsã€servicesç­‰ï¼‰
â”œâ”€â”€ verbsï¼šæ“ä½œåŠ¨è¯ï¼ˆgetã€createã€deleteç­‰ï¼‰
â””â”€â”€ resourceNamesï¼šç‰¹å®šèµ„æºåç§°ï¼ˆå¯é€‰ï¼‰
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æƒé™æœ€å°åŒ–åŸåˆ™**ï¼š
- åªç»™å¿…éœ€çš„æƒé™ï¼Œé¿å…è¿‡åº¦æˆæƒ
- ä½¿ç”¨resourceNamesé™åˆ¶åˆ°ç‰¹å®šèµ„æº
- å®šæœŸå®¡è®¡å’Œæ¸…ç†æ— ç”¨æƒé™

**ğŸ”¹ å‘½åç©ºé—´vsé›†ç¾¤æƒé™**ï¼š
```
é€‰æ‹©å»ºè®®ï¼š
- å›¢é˜Ÿå¼€å‘æƒé™ â†’ ä½¿ç”¨Role + RoleBinding
- é›†ç¾¤ç®¡ç†æƒé™ â†’ ä½¿ç”¨ClusterRole + ClusterRoleBinding  
- ç›‘æ§ç³»ç»Ÿæƒé™ â†’ ä½¿ç”¨ClusterRoleï¼ˆåªè¯»ï¼‰+ ClusterRoleBinding
- åº”ç”¨Podæƒé™ â†’ ä½¿ç”¨Role + RoleBinding + ServiceAccount
```

**ğŸ”¹ ServiceAccountæœ€ä½³å®è·µ**ï¼š
- æ¯ä¸ªåº”ç”¨ä½¿ç”¨ç‹¬ç«‹çš„ServiceAccount
- ä¸è¦ä½¿ç”¨é»˜è®¤çš„ServiceAccountè¿è¡Œåº”ç”¨
- æ ¹æ®åº”ç”¨éœ€æ±‚é…ç½®æœ€å°åŒ–æƒé™

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**æƒé™è®¾è®¡æµç¨‹**ï¼š
1. **åˆ†æéœ€æ±‚** â†’ ç¡®å®šåº”ç”¨éœ€è¦è®¿é—®å“ªäº›èµ„æº
2. **é€‰æ‹©èŒƒå›´** â†’ ç¡®å®šæ˜¯å‘½åç©ºé—´çº§åˆ«è¿˜æ˜¯é›†ç¾¤çº§åˆ«
3. **åˆ›å»ºè§’è‰²** â†’ å®šä¹‰å…·ä½“çš„æƒé™è§„åˆ™
4. **åˆ›å»ºä¸»ä½“** â†’ åˆ›å»ºServiceAccountæˆ–ç¡®å®šUser
5. **å»ºç«‹ç»‘å®š** â†’ é€šè¿‡Bindingè¿æ¥è§’è‰²å’Œä¸»ä½“
6. **æµ‹è¯•éªŒè¯** â†’ éªŒè¯æƒé™æ˜¯å¦ç¬¦åˆé¢„æœŸ

**å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š

| é—®é¢˜ç°è±¡ | **å¯èƒ½åŸå› ** | **è§£å†³æ–¹æ³•** |
|---------|-------------|-------------|
| `æƒé™æ‹’ç»é”™è¯¯` | **Role/ClusterRoleæƒé™ä¸è¶³** | `æ£€æŸ¥rulesé…ç½®ï¼Œå¢åŠ å¿…è¦æƒé™` |
| `æ‰¾ä¸åˆ°èµ„æº` | **å‘½åç©ºé—´æƒé™é—®é¢˜** | `ç¡®è®¤RoleBindingçš„namespaceé…ç½®` |
| `ServiceAccountæ— æ³•è®¿é—®` | **ç»‘å®šå…³ç³»é”™è¯¯** | `æ£€æŸ¥RoleBindingçš„subjectsé…ç½®` |
| `é›†ç¾¤èµ„æºè®¿é—®å¤±è´¥` | **ä½¿ç”¨äº†Roleè€Œä¸æ˜¯ClusterRole** | `æ”¹ç”¨ClusterRoleå’ŒClusterRoleBinding` |

**å®‰å…¨å»ºè®®**ï¼š
- ğŸ”’ å®šæœŸè½®æ¢ServiceAccountçš„token
- ğŸ“Š ç›‘æ§æƒé™ä½¿ç”¨æƒ…å†µï¼Œå‘ç°å¼‚å¸¸è®¿é—®
- ğŸ›¡ï¸ ä½¿ç”¨ç½‘ç»œç­–ç•¥é…åˆRBACå®ç°æ·±åº¦é˜²å¾¡
- ğŸ“ æ–‡æ¡£åŒ–æƒé™é…ç½®ï¼Œä¾¿äºå›¢é˜Ÿç†è§£å’Œç»´æŠ¤

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- RBACå°±æ˜¯"è°èƒ½å¯¹ä»€ä¹ˆèµ„æºåšä»€ä¹ˆæ“ä½œ"çš„æƒé™ç®¡ç†
- Roleç®¡å•ä¸ªå‘½åç©ºé—´ï¼ŒClusterRoleç®¡æ•´ä¸ªé›†ç¾¤
- RoleBindingè¿æ¥ç”¨æˆ·å’Œæƒé™ï¼Œæ˜¯æƒé™ç”Ÿæ•ˆçš„å…³é”®
- ServiceAccountæ˜¯Podçš„èº«ä»½è¯ï¼Œç”¨äºç¨‹åºè®¿é—®API
- æƒé™æœ€å°åŒ–å’Œå®šæœŸå®¡è®¡æ˜¯RBACå®‰å…¨çš„åŸºç¡€