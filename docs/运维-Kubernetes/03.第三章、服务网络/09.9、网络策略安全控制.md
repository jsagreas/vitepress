---
title: 9ã€ç½‘ç»œç­–ç•¥å®‰å…¨æ§åˆ¶
---
## ğŸ“š ç›®å½•

1. [ç½‘ç»œç­–ç•¥åŸºç¡€æ¦‚å¿µ](#1-ç½‘ç»œç­–ç•¥åŸºç¡€æ¦‚å¿µ)
2. [NetworkPolicyæ ¸å¿ƒç»„ä»¶](#2-NetworkPolicyæ ¸å¿ƒç»„ä»¶)
3. [Ingresså…¥ç«™æµé‡æ§åˆ¶](#3-Ingresså…¥ç«™æµé‡æ§åˆ¶)
4. [Egresså‡ºç«™æµé‡æ§åˆ¶](#4-Egresså‡ºç«™æµé‡æ§åˆ¶)
5. [åŸºäºæ ‡ç­¾çš„æµé‡é€‰æ‹©](#5-åŸºäºæ ‡ç­¾çš„æµé‡é€‰æ‹©)
6. [åŸºäºå‘½åç©ºé—´çš„æµé‡æ§åˆ¶](#6-åŸºäºå‘½åç©ºé—´çš„æµé‡æ§åˆ¶)
7. [ç«¯å£åè®®é™åˆ¶ç­–ç•¥](#7-ç«¯å£åè®®é™åˆ¶ç­–ç•¥)
8. [é»˜è®¤æ‹’ç»ç­–ç•¥é…ç½®](#8-é»˜è®¤æ‹’ç»ç­–ç•¥é…ç½®)
9. [ç½‘ç»œéš”ç¦»æœ€ä½³å®è·µ](#9-ç½‘ç»œéš”ç¦»æœ€ä½³å®è·µ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›¡ï¸ ç½‘ç»œç­–ç•¥åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç½‘ç»œç­–ç•¥


**NetworkPolicy**å°±åƒæ˜¯K8sé›†ç¾¤å†…éƒ¨çš„"é˜²ç«å¢™è§„åˆ™"ï¼Œç”¨æ¥æ§åˆ¶Podä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚

```
æ²¡æœ‰ç½‘ç»œç­–ç•¥æ—¶ï¼š               æœ‰äº†ç½‘ç»œç­–ç•¥åï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod A  â”‚ â†â”€â”€âœ…å…¨è¿é€šâ”€â”€â†’    â”‚  Pod A  â”‚ â†â”€â”€âŒè¢«é˜»æ­¢â”€â”€
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â†“
â”‚  Pod B  â”‚ â†â”€â”€âœ…å…¨è¿é€šâ”€â”€â†’    â”‚  Pod B  â”‚ â†â”€â”€âœ…å…è®¸â”€â”€â”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  Pod C  â”‚ â†â”€â”€âœ…å…¨è¿é€šâ”€â”€â†’    â”‚  Pod C  â”‚ â†â”€â”€âŒæ‹’ç»â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç½‘ç»œç­–ç•¥


**ç°å®åœºæ™¯ä¸¾ä¾‹**ï¼š
- ğŸ¦ **é“¶è¡Œç³»ç»Ÿ**ï¼šå‰ç«¯æœåŠ¡åªèƒ½è®¿é—®APIç½‘å…³ï¼Œä¸èƒ½ç›´æ¥è®¿é—®æ•°æ®åº“
- ğŸ¥ **åŒ»ç–—ç³»ç»Ÿ**ï¼šæ‚£è€…æ•°æ®åº“åªèƒ½è¢«æˆæƒçš„åŒ»ç”Ÿåº”ç”¨è®¿é—®
- ğŸ“ **å­¦æ ¡ç³»ç»Ÿ**ï¼šå­¦ç”Ÿç®¡ç†ç³»ç»Ÿä¸èƒ½è®¿é—®è´¢åŠ¡ç³»ç»Ÿ

> ğŸ’¡ **é€šä¿—ç†è§£**ï¼šå°±åƒå…¬å¸é‡Œä¸åŒéƒ¨é—¨ä¹‹é—´éœ€è¦é—¨ç¦å¡ä¸€æ ·ï¼ŒPodä¹‹é—´çš„é€šä¿¡ä¹Ÿéœ€è¦"é€šè¡Œè¯"

### 1.3 ç½‘ç»œç­–ç•¥çš„å·¥ä½œåŸç†


```
è¯·æ±‚æµç¨‹ï¼š
å‘èµ·è¯·æ±‚Pod â†’ ç½‘ç»œç­–ç•¥æ£€æŸ¥ â†’ ç›®æ ‡Pod

æ£€æŸ¥è¿‡ç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æºPodå‘èµ·è¯·æ±‚    â”‚â”€â”€â”€â†’â”‚ ç½‘ç»œç­–ç•¥å¼•æ“    â”‚â”€â”€â”€â†’â”‚ å…è®¸/æ‹’ç»å†³ç­–    â”‚
â”‚ - æºIPåœ°å€      â”‚    â”‚ - åŒ¹é…è§„åˆ™      â”‚    â”‚ - æ”¾è¡Œè¯·æ±‚      â”‚
â”‚ - ç›®æ ‡ç«¯å£      â”‚    â”‚ - æ ‡ç­¾é€‰æ‹©      â”‚    â”‚ - ä¸¢å¼ƒæ•°æ®åŒ…    â”‚
â”‚ - åè®®ç±»å‹      â”‚    â”‚ - å‘½åç©ºé—´æ£€æŸ¥   â”‚    â”‚ - è®°å½•æ—¥å¿—      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ”§ NetworkPolicyæ ¸å¿ƒç»„ä»¶


### 2.1 NetworkPolicyå¯¹è±¡ç»“æ„


**åŸºæœ¬ç»“æ„å›¾**ï¼š
```
NetworkPolicy
â”œâ”€â”€ metadata (å…ƒæ•°æ®)
â”‚   â”œâ”€â”€ name: ç­–ç•¥åç§°
â”‚   â””â”€â”€ namespace: æ‰€å±å‘½åç©ºé—´
â”œâ”€â”€ spec (è§„æ ¼è¯´æ˜)
â”‚   â”œâ”€â”€ podSelector: é€‰æ‹©åº”ç”¨åˆ°å“ªäº›Pod
â”‚   â”œâ”€â”€ policyTypes: ç­–ç•¥ç±»å‹ [Ingress, Egress]
â”‚   â”œâ”€â”€ ingress: å…¥ç«™è§„åˆ™æ•°ç»„
â”‚   â””â”€â”€ egress: å‡ºç«™è§„åˆ™æ•°ç»„
```

### 2.2 æ ¸å¿ƒå­—æ®µè¯¦è§£


**ğŸ¯ podSelector - Podé€‰æ‹©å™¨**
- **ä½œç”¨**ï¼šå†³å®šè¿™ä¸ªç­–ç•¥åº”ç”¨åˆ°å“ªäº›Podä¸Š
- **è¯­æ³•**ï¼šä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨è¯­æ³•
- **èŒƒå›´**ï¼šåªèƒ½é€‰æ‹©åŒä¸€å‘½åç©ºé—´å†…çš„Pod

**ğŸ“‹ policyTypes - ç­–ç•¥ç±»å‹**
```markdown
- **Ingress**ï¼šæ§åˆ¶è¿›å…¥Podçš„æµé‡ï¼ˆå…¥ç«™ï¼‰
- **Egress**ï¼šæ§åˆ¶ä»Podå‡ºå»çš„æµé‡ï¼ˆå‡ºç«™ï¼‰
- **æ··åˆæ¨¡å¼**ï¼šåŒæ—¶æ§åˆ¶å…¥ç«™å’Œå‡ºç«™æµé‡
```

**âš¡ é‡è¦æ¦‚å¿µ**ï¼š
> ğŸ”¸ **é»˜è®¤è¡Œä¸º**ï¼šå¦‚æœPodæ²¡æœ‰è¢«ä»»ä½•NetworkPolicyé€‰ä¸­ï¼Œåˆ™æ‰€æœ‰æµé‡éƒ½è¢«å…è®¸
> ğŸ”¸ **é€‰ä¸­æ•ˆæœ**ï¼šä¸€æ—¦Podè¢«NetworkPolicyé€‰ä¸­ï¼Œåªæœ‰æ˜ç¡®å…è®¸çš„æµé‡æ‰èƒ½é€šè¿‡
> ğŸ”¸ **å¤šç­–ç•¥å åŠ **ï¼šå¤šä¸ªç­–ç•¥å¯ä»¥åŒæ—¶ä½œç”¨äºåŒä¸€ä¸ªPodï¼Œæ•ˆæœæ˜¯"å¹¶é›†"

### 2.3 åŸºç¡€NetworkPolicyç¤ºä¾‹


```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: web-netpol
  namespace: production
spec:
  # åº”ç”¨åˆ°å¸¦æœ‰app=webæ ‡ç­¾çš„Pod
  podSelector:
    matchLabels:
      app: web
  # åŒæ—¶æ§åˆ¶å…¥ç«™å’Œå‡ºç«™æµé‡
  policyTypes:
  - Ingress
  - Egress
  # å…¥ç«™è§„åˆ™ï¼šå…è®¸æ¥è‡ªapp=frontendçš„Podè®¿é—®80ç«¯å£
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 80
  # å‡ºç«™è§„åˆ™ï¼šå…è®¸è®¿é—®æ•°æ®åº“çš„3306ç«¯å£
  egress:
  - to:
    - podSelector:
        matchLabels:
          app: database
    ports:
    - protocol: TCP
      port: 3306
```

---

## 3. ğŸ“¥ Ingresså…¥ç«™æµé‡æ§åˆ¶


### 3.1 å…¥ç«™æµé‡æ§åˆ¶æ¦‚å¿µ


**Ingressè§„åˆ™**æ§åˆ¶å“ªäº›æµé‡å¯ä»¥**è¿›å…¥**åˆ°è¢«é€‰ä¸­çš„Podã€‚

```
å¤–éƒ¨æµé‡è¿›å…¥ç¤ºæ„å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æºPod   â”‚â”€â”€â”€â”€â†’â”‚ Ingressè§„åˆ™æ£€æŸ¥ â”‚â”€â”€â”€â”€â†’â”‚ ç›®æ ‡Pod â”‚
â”‚ è¯·æ±‚æ–¹  â”‚     â”‚ âœ… å…è®¸é€šè¿‡     â”‚     â”‚ æ¥æ”¶æ–¹  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ âŒ æ‹’ç»è®¿é—®     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 fromå­—æ®µè¯¦è§£


**ğŸ¯ fromå­—æ®µçš„ä¸‰ç§é€‰æ‹©æ–¹å¼**ï¼š

**â‘  podSelector - åŸºäºPodæ ‡ç­¾é€‰æ‹©**
```yaml
ingress:
- from:
  - podSelector:
      matchLabels:
        role: frontend  # åªå…è®¸æ ‡ç­¾ä¸ºrole=frontendçš„Podè®¿é—®
```

**â‘¡ namespaceSelector - åŸºäºå‘½åç©ºé—´é€‰æ‹©**
```yaml
ingress:
- from:
  - namespaceSelector:
      matchLabels:
        name: trusted-namespace  # åªå…è®¸ç‰¹å®šå‘½åç©ºé—´å†…çš„Podè®¿é—®
```

**â‘¢ ipBlock - åŸºäºIPåœ°å€æ®µé€‰æ‹©**
```yaml
ingress:
- from:
  - ipBlock:
      cidr: 10.0.0.0/8     # å…è®¸10.x.x.xç½‘æ®µ
      except:
      - 10.1.0.0/16       # ä½†æ’é™¤10.1.x.xç½‘æ®µ
```

### 3.3 å…¥ç«™æµé‡å®é™…åœºæ™¯


**åœºæ™¯ä¸€ï¼šWebæœåŠ¡åªå…è®¸å‰ç«¯è®¿é—®**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: web-allow-frontend
spec:
  podSelector:
    matchLabels:
      tier: web
  policyTypes:
  - Ingress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          tier: frontend
    ports:
    - protocol: TCP
      port: 8080
```

**åœºæ™¯äºŒï¼šæ•°æ®åº“åªå…è®¸ç‰¹å®šå‘½åç©ºé—´è®¿é—®**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: database-allow-production
spec:
  podSelector:
    matchLabels:
      app: mysql
  policyTypes:
  - Ingress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          env: production  # åªæœ‰productionç¯å¢ƒçš„å‘½åç©ºé—´èƒ½è®¿é—®
    ports:
    - protocol: TCP
      port: 3306
```

### 3.4 å¤šæ¡ä»¶ç»„åˆè§„åˆ™


**ğŸ”„ è§„åˆ™ç»„åˆé€»è¾‘**ï¼š
- **åŒä¸€ä¸ªfromé¡¹å†…çš„æ¡ä»¶**ï¼š`AND`å…³ç³»ï¼ˆå¿…é¡»åŒæ—¶æ»¡è¶³ï¼‰
- **ä¸åŒfromé¡¹ä¹‹é—´**ï¼š`OR`å…³ç³»ï¼ˆæ»¡è¶³ä»»ä¸€é¡¹å³å¯ï¼‰

```yaml
ingress:
- from:
  # æ¡ä»¶ç»„åˆ1ï¼šå¿…é¡»æ˜¯productionå‘½åç©ºé—´ AND æ ‡ç­¾app=apiçš„Pod
  - namespaceSelector:
      matchLabels:
        env: production
    podSelector:
      matchLabels:
        app: api
  # æ¡ä»¶ç»„åˆ2ï¼šæˆ–è€…æ˜¯ç®¡ç†å‘˜ç½‘æ®µçš„IP
  - ipBlock:
      cidr: 192.168.1.0/24
  ports:
  - protocol: TCP
    port: 80
```

---

## 4. ğŸ“¤ Egresså‡ºç«™æµé‡æ§åˆ¶


### 4.1 å‡ºç«™æµé‡æ§åˆ¶æ¦‚å¿µ


**Egressè§„åˆ™**æ§åˆ¶è¢«é€‰ä¸­çš„Podå¯ä»¥å‘å“ªé‡Œå‘å‡ºè¯·æ±‚ã€‚

```
Podå‡ºç«™æµé‡ç¤ºæ„å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æºPod   â”‚â”€â”€â”€â”€â†’â”‚ Egressè§„åˆ™æ£€æŸ¥  â”‚â”€â”€â”€â”€â†’â”‚ ç›®æ ‡Pod â”‚
â”‚ å‘èµ·æ–¹  â”‚     â”‚ âœ… å…è®¸è®¿é—®     â”‚     â”‚ æ¥æ”¶æ–¹  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ âŒ é˜»æ­¢è¿æ¥     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 toå­—æ®µè¯¦è§£


**å‡ºç«™è§„åˆ™ä¸å…¥ç«™è§„åˆ™è¯­æ³•ç›¸åŒ**ï¼Œä½†æ§åˆ¶æ–¹å‘ç›¸åï¼š

```yaml
egress:
- to:
  # å…è®¸è®¿é—®å¸¦æœ‰app=databaseæ ‡ç­¾çš„Pod
  - podSelector:
      matchLabels:
        app: database
  # å…è®¸è®¿é—®kube-systemå‘½åç©ºé—´
  - namespaceSelector:
      matchLabels:
        name: kube-system
  # å…è®¸è®¿é—®å¤–ç½‘API
  - ipBlock:
      cidr: 0.0.0.0/0
      except:
      - 169.254.169.254/32  # æ’é™¤å…ƒæ•°æ®æœåŠ¡
  ports:
  - protocol: TCP
    port: 443
```

### 4.3 å¸¸è§å‡ºç«™æ§åˆ¶åœºæ™¯


**åœºæ™¯ä¸€ï¼šå‰ç«¯åªèƒ½è®¿é—®APIæœåŠ¡**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: frontend-egress-limited
spec:
  podSelector:
    matchLabels:
      tier: frontend
  policyTypes:
  - Egress
  egress:
  # å…è®¸DNSè§£æ
  - to: []
    ports:
    - protocol: UDP
      port: 53
  # å…è®¸è®¿é—®APIæœåŠ¡
  - to:
    - podSelector:
        matchLabels:
          tier: api
    ports:
    - protocol: TCP
      port: 8080
```

**åœºæ™¯äºŒï¼šç¦æ­¢è®¿é—®å¤–ç½‘**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: no-internet-access
spec:
  podSelector:
    matchLabels:
      security: high
  policyTypes:
  - Egress
  egress:
  # åªå…è®¸é›†ç¾¤å†…éƒ¨é€šä¿¡
  - to:
    - podSelector: {}  # ç©ºé€‰æ‹©å™¨åŒ¹é…åŒå‘½åç©ºé—´æ‰€æœ‰Pod
  # å…è®¸DNSè§£æ
  - to: []
    ports:
    - protocol: UDP
      port: 53
```

> âš ï¸ **é‡è¦æé†’**ï¼šå¦‚æœè®¾ç½®äº†Egressç­–ç•¥ä½†æ²¡æœ‰å…è®¸DNSï¼ŒPodå°†æ— æ³•è§£æåŸŸåï¼

---

## 5. ğŸ·ï¸ åŸºäºæ ‡ç­¾çš„æµé‡é€‰æ‹©


### 5.1 æ ‡ç­¾é€‰æ‹©å™¨å·¥ä½œåŸç†


**æ ‡ç­¾é€‰æ‹©å™¨**æ˜¯K8sä¸­æœ€å¸¸ç”¨çš„å¯¹è±¡ç­›é€‰æ–¹å¼ï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸­çš„WHEREå­å¥ã€‚

```
æ ‡ç­¾åŒ¹é…ç¤ºæ„å›¾ï¼š
Podæ ‡ç­¾ï¼š               é€‰æ‹©å™¨æ¡ä»¶ï¼š            åŒ¹é…ç»“æœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ app: web        â”‚    â”‚ app: web        â”‚â”€â”€â”€â†’â”‚ âœ… åŒ¹é…  â”‚
â”‚ tier: frontend  â”‚    â”‚ tier: frontend  â”‚    â”‚          â”‚
â”‚ env: prod       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚          â”‚
â”‚ app: api        â”‚    â”‚ app: web        â”‚â”€â”€â”€â†’â”‚ âŒ ä¸åŒ¹é… â”‚
â”‚ tier: backend   â”‚    â”‚ tier: frontend  â”‚    â”‚          â”‚
â”‚ env: prod       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ ‡ç­¾é€‰æ‹©è¯­æ³•è¯¦è§£


**â‘  matchLabels - ç²¾ç¡®åŒ¹é…**
```yaml
podSelector:
  matchLabels:
    app: web           # å¿…é¡»æœ‰app=webæ ‡ç­¾
    version: v1.0      # å¿…é¡»æœ‰version=v1.0æ ‡ç­¾
    # å¤šä¸ªæ ‡ç­¾ä¹‹é—´æ˜¯ANDå…³ç³»
```

**â‘¡ matchExpressions - é«˜çº§è¡¨è¾¾å¼**
```yaml
podSelector:
  matchExpressions:
  - key: tier
    operator: In
    values: ["frontend", "api"]     # tieræ ‡ç­¾å€¼å¿…é¡»æ˜¯frontendæˆ–api
  - key: version
    operator: NotIn
    values: ["beta", "alpha"]       # versionæ ‡ç­¾å€¼ä¸èƒ½æ˜¯betaæˆ–alpha
  - key: security
    operator: Exists                # å¿…é¡»å­˜åœ¨securityæ ‡ç­¾ï¼ˆå€¼ä¸é™ï¼‰
  - key: deprecated
    operator: DoesNotExist          # ä¸èƒ½æœ‰deprecatedæ ‡ç­¾
```

### 5.3 æ ‡ç­¾ç­–ç•¥è®¾è®¡åŸåˆ™


**ğŸ¯ æ ‡ç­¾è®¾è®¡æœ€ä½³å®è·µ**ï¼š

**â‘  åˆ†å±‚æ ‡ç­¾ä½“ç³»**
```markdown
**åº”ç”¨å±‚æ ‡ç­¾**ï¼š
- `app`: åº”ç”¨åç§° (web, api, database)
- `component`: ç»„ä»¶ç±»å‹ (frontend, backend, cache)
- `version`: åº”ç”¨ç‰ˆæœ¬ (v1.0, v2.1)

**ç¯å¢ƒå±‚æ ‡ç­¾**ï¼š
- `env`: ç¯å¢ƒç±»å‹ (dev, test, prod)
- `tier`: åº”ç”¨å±‚çº§ (web, service, data)

**ç®¡ç†å±‚æ ‡ç­¾**ï¼š
- `team`: è´Ÿè´£å›¢é˜Ÿ (platform, product)
- `security`: å®‰å…¨ç­‰çº§ (high, medium, low)
```

**â‘¡ å®é™…æ ‡ç­¾åº”ç”¨ç¤ºä¾‹**
```yaml
# Web Podæ ‡ç­¾
metadata:
  labels:
    app: ecommerce
    component: web
    tier: frontend
    env: production
    security: medium
    team: product

---
# å¯¹åº”çš„NetworkPolicy
spec:
  podSelector:
    matchLabels:
      component: web      # é€‰æ‹©æ‰€æœ‰webç»„ä»¶
      env: production     # ä¸”åœ¨productionç¯å¢ƒ
  ingress:
  - from:
    - podSelector:
        matchLabels:
          tier: frontend  # åªå…è®¸å‰ç«¯å±‚è®¿é—®
```

---

## 6. ğŸ—‚ï¸ åŸºäºå‘½åç©ºé—´çš„æµé‡æ§åˆ¶


### 6.1 å‘½åç©ºé—´éš”ç¦»æ¦‚å¿µ


**å‘½åç©ºé—´**æä¾›äº†æ›´å¤§ç²’åº¦çš„éš”ç¦»è¾¹ç•Œï¼Œé€‚åˆæŒ‰ç¯å¢ƒã€å›¢é˜Ÿã€é¡¹ç›®è¿›è¡Œç½‘ç»œéš”ç¦»ã€‚

```
å‘½åç©ºé—´ç½‘ç»œéš”ç¦»å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ production namespace            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â†â”€â”€ ç”Ÿäº§ç¯å¢ƒ
â”‚ â”‚Web  â”‚  â”‚API  â”‚  â”‚Database â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†• å—æ§è®¿é—®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ development namespace           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â†â”€â”€ å¼€å‘ç¯å¢ƒ
â”‚ â”‚Web  â”‚  â”‚API  â”‚  â”‚Database â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å‘½åç©ºé—´é€‰æ‹©å™¨è¯­æ³•


**ğŸ¯ namespaceSelectorçš„ä¸¤ç§ç”¨æ³•**ï¼š

**â‘  åŸºäºå‘½åç©ºé—´æ ‡ç­¾é€‰æ‹©**
```yaml
# é¦–å…ˆç»™å‘½åç©ºé—´æ‰“æ ‡ç­¾
kubectl label namespace production env=prod
kubectl label namespace development env=dev

# ç„¶ååœ¨NetworkPolicyä¸­ä½¿ç”¨
ingress:
- from:
  - namespaceSelector:
      matchLabels:
        env: prod  # åªå…è®¸æ ‡è®°ä¸ºprodçš„å‘½åç©ºé—´è®¿é—®
```

**â‘¡ åŸºäºå‘½åç©ºé—´åç§°é€‰æ‹©**
```yaml
ingress:
- from:
  - namespaceSelector:
      matchLabels:
        kubernetes.io/metadata.name: kube-system  # å…è®¸kube-systemå‘½åç©ºé—´
```

### 6.3 è·¨å‘½åç©ºé—´è®¿é—®æ§åˆ¶


**åœºæ™¯ä¸€ï¼šç”Ÿäº§ç¯å¢ƒæ•°æ®åº“åªå…è®¸ç”Ÿäº§åº”ç”¨è®¿é—®**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: prod-db-isolation
  namespace: production
spec:
  podSelector:
    matchLabels:
      app: database
  policyTypes:
  - Ingress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          env: production  # åªå…è®¸ç”Ÿäº§ç¯å¢ƒå‘½åç©ºé—´è®¿é—®
    - podSelector:
        matchLabels:
          tier: backend    # ä¸”å¿…é¡»æ˜¯åç«¯åº”ç”¨
    ports:
    - protocol: TCP
      port: 5432
```

**åœºæ™¯äºŒï¼šç›‘æ§ç³»ç»Ÿå¯ä»¥è®¿é—®æ‰€æœ‰å‘½åç©ºé—´**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-monitoring
spec:
  podSelector:
    matchLabels:
      app: web
  policyTypes:
  - Ingress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: monitoring  # ç›‘æ§å‘½åç©ºé—´å¯ä»¥è®¿é—®
    ports:
    - protocol: TCP
      port: 8080
```

### 6.4 å‘½åç©ºé—´ç½‘ç»œç­–ç•¥æœ€ä½³å®è·µ


**ğŸ“‹ ç¯å¢ƒéš”ç¦»ç­–ç•¥**ï¼š

**â‘  é»˜è®¤å‘½åç©ºé—´éš”ç¦»**
```yaml
# ä¸ºæ¯ä¸ªå‘½åç©ºé—´åˆ›å»ºé»˜è®¤æ‹’ç»ç­–ç•¥
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-cross-namespace
  namespace: production
spec:
  podSelector: {}  # é€‰æ‹©æ‰€æœ‰Pod
  policyTypes:
  - Ingress
  - Egress
  # æ²¡æœ‰è§„åˆ™ = æ‹’ç»æ‰€æœ‰è·¨å‘½åç©ºé—´æµé‡
```

**â‘¡ å…è®¸ç³»ç»Ÿå‘½åç©ºé—´è®¿é—®**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-system-namespace
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: kube-system  # ç³»ç»Ÿå‘½åç©ºé—´
    - namespaceSelector:
        matchLabels:
          name: kube-public  # å…¬å…±å‘½åç©ºé—´
```

---

## 7. ğŸ”Œ ç«¯å£åè®®é™åˆ¶ç­–ç•¥


### 7.1 ç«¯å£åè®®åŸºç¡€æ¦‚å¿µ


**ç«¯å£åè®®è§„åˆ™**å®šä¹‰äº†æµé‡å¯ä»¥ä½¿ç”¨å“ªäº›ç«¯å£å’Œåè®®è¿›è¡Œé€šä¿¡ã€‚

```
ç«¯å£åè®®åŒ¹é…ç¤ºæ„å›¾ï¼š
è¯·æ±‚æµé‡ï¼š                     è§„åˆ™æ£€æŸ¥ï¼š                ç»“æœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TCPåè®®             â”‚ â”€â”€â”€â”€â†’ â”‚ åè®®ï¼šTCP âœ“      â”‚ â”€â”€â”€â†’ â”‚ âœ… å…è®¸  â”‚
â”‚ ç›®æ ‡ç«¯å£ï¼š80        â”‚       â”‚ ç«¯å£ï¼š80 âœ“       â”‚      â”‚ é€šè¿‡    â”‚
â”‚ æ¥æºï¼šå…è®¸çš„Pod     â”‚       â”‚ æ¥æºï¼šåŒ¹é… âœ“     â”‚      â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UDPåè®®             â”‚ â”€â”€â”€â”€â†’ â”‚ åè®®ï¼šTCP âŒ      â”‚ â”€â”€â”€â†’ â”‚ âŒ æ‹’ç»  â”‚
â”‚ ç›®æ ‡ç«¯å£ï¼š53        â”‚       â”‚ ç«¯å£ï¼šä¸åŒ¹é… âŒ   â”‚      â”‚ é˜»æ­¢    â”‚
â”‚ æ¥æºï¼šå…è®¸çš„Pod     â”‚       â”‚ æ¥æºï¼šåŒ¹é… âœ“     â”‚      â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ç«¯å£è§„åˆ™è¯­æ³•è¯¦è§£


**ğŸ”§ åŸºæœ¬ç«¯å£è§„åˆ™æ ¼å¼**ï¼š
```yaml
ports:
- protocol: TCP          # åè®®ï¼šTCP/UDP/SCTP
  port: 80              # ç«¯å£å·
- protocol: UDP
  port: 53              # DNSç«¯å£
  endPort: 54           # ç«¯å£èŒƒå›´ï¼ˆå¯é€‰ï¼‰
```

**â‘  å•ç«¯å£è§„åˆ™**
```yaml
ingress:
- from:
  - podSelector:
      matchLabels:
        app: client
  ports:
  - protocol: TCP
    port: 8080        # åªå…è®¸è®¿é—®TCP 8080ç«¯å£
```

**â‘¡ ç«¯å£èŒƒå›´è§„åˆ™**
```yaml
ingress:
- from:
  - podSelector:
      matchLabels:
        app: client
  ports:
  - protocol: TCP
    port: 8000
    endPort: 8999     # å…è®¸è®¿é—®TCP 8000-8999ç«¯å£èŒƒå›´
```

**â‘¢ å¤šç«¯å£è§„åˆ™**
```yaml
ingress:
- from:
  - podSelector:
      matchLabels:
        app: frontend
  ports:
  - protocol: TCP
    port: 80          # HTTPç«¯å£
  - protocol: TCP
    port: 443         # HTTPSç«¯å£
  - protocol: UDP
    port: 53          # DNSç«¯å£
```

### 7.3 å¸¸è§ç«¯å£åè®®åœºæ™¯


**åœºæ™¯ä¸€ï¼šWebæœåŠ¡ç«¯å£æ§åˆ¶**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: web-service-ports
spec:
  podSelector:
    matchLabels:
      app: web
  policyTypes:
  - Ingress
  ingress:
  # å…è®¸å‰ç«¯è®¿é—®WebæœåŠ¡çš„HTTP/HTTPSç«¯å£
  - from:
    - podSelector:
        matchLabels:
          tier: frontend
    ports:
    - protocol: TCP
      port: 80        # HTTP
    - protocol: TCP
      port: 443       # HTTPS
  # å…è®¸ç›‘æ§ç³»ç»Ÿè®¿é—®å¥åº·æ£€æŸ¥ç«¯å£
  - from:
    - namespaceSelector:
        matchLabels:
          name: monitoring
    ports:
    - protocol: TCP
      port: 8080      # å¥åº·æ£€æŸ¥ç«¯å£
```

**åœºæ™¯äºŒï¼šæ•°æ®åº“è®¿é—®ç«¯å£é™åˆ¶**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: database-port-control
spec:
  podSelector:
    matchLabels:
      app: postgres
  policyTypes:
  - Ingress
  ingress:
  # åº”ç”¨è®¿é—®æ•°æ®åº“
  - from:
    - podSelector:
        matchLabels:
          tier: backend
    ports:
    - protocol: TCP
      port: 5432      # PostgreSQLç«¯å£
  # ç®¡ç†å‘˜è®¿é—®
  - from:
    - namespaceSelector:
        matchLabels:
          name: admin-tools
    ports:
    - protocol: TCP
      port: 5432      # æ•°æ®åº“ç«¯å£
    - protocol: TCP
      port: 9090      # ç›‘æ§ç«¯å£
```

### 7.4 ç«¯å£è§„åˆ™è®¾è®¡åŸåˆ™


**ğŸ¯ ç«¯å£å®‰å…¨æœ€ä½³å®è·µ**ï¼š

**â‘  æœ€å°åŒ–ç«¯å£æš´éœ²**
```markdown
**åªæš´éœ²å¿…è¦ç«¯å£**ï¼š
âœ… åº”ç”¨ç«¯å£ï¼šåªå¼€æ”¾å®é™…ä½¿ç”¨çš„æœåŠ¡ç«¯å£
âœ… å¥åº·æ£€æŸ¥ï¼šç›‘æ§ç³»ç»Ÿéœ€è¦çš„å¥åº·æ£€æŸ¥ç«¯å£
âœ… ç®¡ç†ç«¯å£ï¼šå¿…è¦çš„ç®¡ç†å’Œç›‘æ§ç«¯å£

**é¿å…é€šç”¨ç«¯å£**ï¼š
âŒ é¿å…å¼€æ”¾22 (SSH)ã€3389 (RDP)ç­‰ç®¡ç†ç«¯å£
âŒ é¿å…å¼€æ”¾æ•°æ®åº“é»˜è®¤ç«¯å£ç»™æ‰€æœ‰åº”ç”¨
âŒ é¿å…ä½¿ç”¨ç«¯å£èŒƒå›´ï¼ˆé™¤éç¡®å®éœ€è¦ï¼‰
```

**â‘¡ æŒ‰æœåŠ¡ç±»å‹åˆ†ç±»**
```yaml
# WebæœåŠ¡ç«¯å£
web_ports:
  - 80, 443 (HTTP/HTTPS)
  - 8080, 8443 (å¤‡ç”¨Webç«¯å£)

# æ•°æ®åº“ç«¯å£
database_ports:
  - 3306 (MySQL)
  - 5432 (PostgreSQL)
  - 27017 (MongoDB)

# æ¶ˆæ¯é˜Ÿåˆ—ç«¯å£
mq_ports:
  - 5672 (RabbitMQ)
  - 9092 (Kafka)
  - 6379 (Redis)

# ç›‘æ§ç«¯å£
monitoring_ports:
  - 9090 (Prometheus)
  - 8080 (å¥åº·æ£€æŸ¥)
  - 9100 (Node Exporter)
```

---

## 8. ğŸš« é»˜è®¤æ‹’ç»ç­–ç•¥é…ç½®


### 8.1 é»˜è®¤æ‹’ç»ç­–ç•¥æ¦‚å¿µ


**é»˜è®¤æ‹’ç»ç­–ç•¥**æ˜¯ç½‘ç»œå®‰å…¨çš„é‡è¦åŸåˆ™ï¼š"å…ˆæ‹’ç»æ‰€æœ‰ï¼Œå†æ˜ç¡®å…è®¸"ã€‚

```
å®‰å…¨ç­–ç•¥å¯¹æ¯”ï¼š

é»˜è®¤å…è®¸æ¨¡å¼ï¼ˆä¸å®‰å…¨ï¼‰ï¼š        é»˜è®¤æ‹’ç»æ¨¡å¼ï¼ˆå®‰å…¨ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“– è§„åˆ™ï¼š             â”‚         â”‚ ğŸ“– è§„åˆ™ï¼š             â”‚
â”‚ âŒ ç¦æ­¢Aè®¿é—®B        â”‚         â”‚ âœ… å…è®¸Aè®¿é—®B        â”‚
â”‚ âŒ ç¦æ­¢Cè®¿é—®D        â”‚         â”‚ âœ… å…è®¸Eè®¿é—®F        â”‚
â”‚                     â”‚         â”‚                     â”‚
â”‚ ğŸ”“ å…¶ä»–ï¼šå…¨éƒ¨å…è®¸    â”‚         â”‚ ğŸ”’ å…¶ä»–ï¼šå…¨éƒ¨æ‹’ç»    â”‚
â”‚ (å­˜åœ¨å®‰å…¨é£é™©)       â”‚         â”‚ (å®‰å…¨ä½†éœ€å®Œæ•´é…ç½®)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 åˆ›å»ºé»˜è®¤æ‹’ç»ç­–ç•¥


**ğŸ›¡ï¸ å‘½åç©ºé—´çº§é»˜è®¤æ‹’ç»**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: production
spec:
  podSelector: {}    # ç©ºé€‰æ‹©å™¨åŒ¹é…æ‰€æœ‰Pod
  policyTypes:
  - Ingress          # æ‹’ç»æ‰€æœ‰å…¥ç«™æµé‡
  - Egress           # æ‹’ç»æ‰€æœ‰å‡ºç«™æµé‡
  # æ³¨æ„ï¼šæ²¡æœ‰ingresså’Œegressè§„åˆ™ = æ‹’ç»æ‰€æœ‰
```

**ğŸ” åˆ†åˆ«æ§åˆ¶å…¥ç«™å’Œå‡ºç«™**
```yaml
# åªæ‹’ç»å…¥ç«™æµé‡
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-ingress
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  # æ²¡æœ‰ingressè§„åˆ™ = æ‹’ç»æ‰€æœ‰å…¥ç«™

---
# åªæ‹’ç»å‡ºç«™æµé‡
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-egress
spec:
  podSelector: {}
  policyTypes:
  - Egress
  # æ²¡æœ‰egressè§„åˆ™ = æ‹’ç»æ‰€æœ‰å‡ºç«™
```

### 8.3 åŸºç¡€æœåŠ¡è±å…ç­–ç•¥


è®¾ç½®é»˜è®¤æ‹’ç»åï¼Œéœ€è¦ä¸ºåŸºç¡€æœåŠ¡åˆ›å»ºè±å…è§„åˆ™ï¼š

**â‘  DNSè§£æè±å…**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-dns
spec:
  podSelector: {}
  policyTypes:
  - Egress
  egress:
  - to: []           # å…è®¸è®¿é—®ä»»ä½•ç›®æ ‡
    ports:
    - protocol: UDP
      port: 53       # DNSæŸ¥è¯¢ç«¯å£
    - protocol: TCP
      port: 53       # TCP DNSæŸ¥è¯¢
```

**â‘¡ ç³»ç»ŸæœåŠ¡è±å…**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-system-access
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # å…è®¸kube-systemå‘½åç©ºé—´è®¿é—®
  - from:
    - namespaceSelector:
        matchLabels:
          name: kube-system
  egress:
  # å…è®¸è®¿é—®kube-systemå‘½åç©ºé—´
  - to:
    - namespaceSelector:
        matchLabels:
          name: kube-system
```

**â‘¢ å¥åº·æ£€æŸ¥è±å…**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-health-checks
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  ingress:
  # å…è®¸kubeletå¥åº·æ£€æŸ¥
  - from: []         # å…è®¸ä»»ä½•æ¥æº
    ports:
    - protocol: TCP
      port: 8080     # å¥åº·æ£€æŸ¥ç«¯å£
```

### 8.4 æ¸è¿›å¼ç­–ç•¥éƒ¨ç½²


**ğŸ“‹ åˆ†é˜¶æ®µéƒ¨ç½²ç­–ç•¥**ï¼š

**é˜¶æ®µ1ï¼šè§‚å¯Ÿæ¨¡å¼ï¼ˆä¸æ‹’ç»ï¼‰**
```yaml
# å…ˆåˆ›å»ºå…è®¸æ‰€æœ‰çš„ç­–ç•¥ï¼Œç”¨äºè§‚å¯Ÿæµé‡æ¨¡å¼
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: observe-all-traffic
  annotations:
    description: "è§‚å¯ŸæœŸï¼Œå…è®¸æ‰€æœ‰æµé‡"
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - {}               # å…è®¸æ‰€æœ‰å…¥ç«™
  egress:
  - {}               # å…è®¸æ‰€æœ‰å‡ºç«™
```

**é˜¶æ®µ2ï¼šéƒ¨åˆ†é™åˆ¶**
```yaml
# é€æ­¥æ·»åŠ é™åˆ¶è§„åˆ™
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: partial-restrictions
spec:
  podSelector:
    matchLabels:
      security: high   # å…ˆå¯¹é«˜å®‰å…¨ç­‰çº§åº”ç”¨é™åˆ¶
  policyTypes:
  - Ingress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          tier: frontend
```

**é˜¶æ®µ3ï¼šå…¨é¢é»˜è®¤æ‹’ç»**
```yaml
# æœ€ç»ˆå®æ–½é»˜è®¤æ‹’ç»ç­–ç•¥
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-final
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
```

> ğŸ’¡ **éƒ¨ç½²å»ºè®®**ï¼šå…ˆåœ¨æµ‹è¯•ç¯å¢ƒå®Œæ•´éªŒè¯ï¼Œç¡®ä¿æ‰€æœ‰å¿…è¦çš„é€šä¿¡è·¯å¾„éƒ½æœ‰å¯¹åº”çš„å…è®¸è§„åˆ™

---

## 9. ğŸ”’ ç½‘ç»œéš”ç¦»æœ€ä½³å®è·µ


### 9.1 å¤šå±‚é˜²æŠ¤ç­–ç•¥


**ğŸ›¡ï¸ æ·±åº¦é˜²æŠ¤ç†å¿µ**ï¼š
```
ç½‘ç»œå®‰å…¨å±‚æ¬¡å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ é›†ç¾¤è¾¹ç•Œé˜²æŠ¤                          â”‚ â† Ingress Controller + LoadBalancer
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ—‚ï¸  å‘½åç©ºé—´éš”ç¦»                         â”‚ â† ç¯å¢ƒ/å›¢é˜Ÿ/é¡¹ç›®éš”ç¦»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ·ï¸  åº”ç”¨æ ‡ç­¾éš”ç¦»                         â”‚ â† åŸºäºè§’è‰²å’ŒåŠŸèƒ½çš„éš”ç¦»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”Œ ç«¯å£åè®®é™åˆ¶                          â”‚ â† æœ€å°åŒ–ç«¯å£æš´éœ²
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš« é»˜è®¤æ‹’ç»ç­–ç•¥                          â”‚ â† åŸºç¡€å®‰å…¨é˜²çº¿
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 æ ‡ç­¾å‘½åè§„èŒƒ


**ğŸ·ï¸ ç»Ÿä¸€æ ‡ç­¾ä½“ç³»**ï¼š
```yaml
# æ¨èçš„æ ‡ç­¾åˆ†ç±»
metadata:
  labels:
    # åº”ç”¨æ ‡è¯†
    app.kubernetes.io/name: myapp           # åº”ç”¨åç§°
    app.kubernetes.io/instance: myapp-prod  # å®ä¾‹æ ‡è¯†
    app.kubernetes.io/version: 1.2.3        # åº”ç”¨ç‰ˆæœ¬
    app.kubernetes.io/component: web        # ç»„ä»¶ç±»å‹
    app.kubernetes.io/part-of: ecommerce    # æ‰€å±ç³»ç»Ÿ
    
    # ç¯å¢ƒæ ‡è¯†
    environment: production                 # ç¯å¢ƒç±»å‹
    tier: frontend                         # åº”ç”¨å±‚çº§
    
    # å®‰å…¨æ ‡è¯†
    security.level: high                   # å®‰å…¨ç­‰çº§
    network.policy: restricted             # ç½‘ç»œç­–ç•¥ç±»å‹
    data.classification: sensitive         # æ•°æ®åˆ†ç±»
    
    # ç®¡ç†æ ‡è¯†
    team: platform                         # è´Ÿè´£å›¢é˜Ÿ
    owner: john.doe                        # è´Ÿè´£äºº
```

### 9.3 ç½‘ç»œç­–ç•¥æ¨¡æ¿


**ğŸ“„ å¸¸ç”¨ç­–ç•¥æ¨¡æ¿**ï¼š

**æ¨¡æ¿1ï¼šWebåº”ç”¨ä¸‰å±‚æ¶æ„**
```yaml
# Frontendç­–ç•¥
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: frontend-policy
spec:
  podSelector:
    matchLabels:
      tier: frontend
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # å…è®¸LoadBalancerè®¿é—®
  - from: []
    ports:
    - protocol: TCP
      port: 80
  egress:
  # å…è®¸è®¿é—®APIå±‚
  - to:
    - podSelector:
        matchLabels:
          tier: api
    ports:
    - protocol: TCP
      port: 8080
  # å…è®¸DNS
  - to: []
    ports:
    - protocol: UDP
      port: 53

---
# APIç­–ç•¥
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: api-policy
spec:
  podSelector:
    matchLabels:
      tier: api
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # åªå…è®¸å‰ç«¯è®¿é—®
  - from:
    - podSelector:
        matchLabels:
          tier: frontend
    ports:
    - protocol: TCP
      port: 8080
  egress:
  # å…è®¸è®¿é—®æ•°æ®åº“
  - to:
    - podSelector:
        matchLabels:
          tier: database
    ports:
    - protocol: TCP
      port: 5432

---
# Databaseç­–ç•¥
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: database-policy
spec:
  podSelector:
    matchLabels:
      tier: database
  policyTypes:
  - Ingress
  ingress:
  # åªå…è®¸APIå±‚è®¿é—®
  - from:
    - podSelector:
        matchLabels:
          tier: api
    ports:
    - protocol: TCP
      port: 5432
```

**æ¨¡æ¿2ï¼šè·¨ç¯å¢ƒéš”ç¦»**
```yaml
# ç”Ÿäº§ç¯å¢ƒéš”ç¦»
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: production-isolation
  namespace: production
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # åªå…è®¸åŒç¯å¢ƒè®¿é—®
  - from:
    - namespaceSelector:
        matchLabels:
          environment: production
  # å…è®¸ç›‘æ§è®¿é—®
  - from:
    - namespaceSelector:
        matchLabels:
          name: monitoring
    ports:
    - protocol: TCP
      port: 8080
  egress:
  # å…è®¸åŒç¯å¢ƒå‡ºç«™
  - to:
    - namespaceSelector:
        matchLabels:
          environment: production
  # å…è®¸ç³»ç»ŸæœåŠ¡
  - to:
    - namespaceSelector:
        matchLabels:
          name: kube-system
```

### 9.4 ç­–ç•¥éªŒè¯ä¸æµ‹è¯•


**ğŸ§ª ç­–ç•¥æµ‹è¯•æ–¹æ³•**ï¼š

**â‘  è¿é€šæ€§æµ‹è¯•**
```bash
# æµ‹è¯•Podé—´è¿é€šæ€§
kubectl run test-pod --image=busybox --rm -it -- sh

# åœ¨æµ‹è¯•Podå†…æ‰§è¡Œ
nc -zv target-service 80    # æµ‹è¯•TCPè¿æ¥
nslookup target-service     # æµ‹è¯•DNSè§£æ
wget -qO- http://target-service/health  # æµ‹è¯•HTTPè®¿é—®
```

**â‘¡ ç­–ç•¥éªŒè¯è„šæœ¬**
```bash
#!/bin/bash
# network-policy-test.sh

echo "ğŸ§ª å¼€å§‹ç½‘ç»œç­–ç•¥æµ‹è¯•..."

# æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
test_cases=(
    "frontend:api:8080:should_allow"
    "frontend:database:5432:should_deny"
    "api:database:5432:should_allow"
    "external:frontend:80:should_allow"
)

for test_case in "${test_cases[@]}"; do
    IFS=':' read -r source target port expected <<< "$test_case"
    
    echo "æµ‹è¯•: $source -> $target:$port (æœŸæœ›: $expected)"
    
    # æ‰§è¡Œæµ‹è¯•å‘½ä»¤
    result=$(kubectl exec -n test deployment/$source -- nc -zv $target $port 2>&1)
    
    if [[ "$expected" == "should_allow" && $? -eq 0 ]]; then
        echo "âœ… é€šè¿‡"
    elif [[ "$expected" == "should_deny" && $? -ne 0 ]]; then
        echo "âœ… é€šè¿‡"
    else
        echo "âŒ å¤±è´¥"
    fi
done
```

### 9.5 ç›‘æ§ä¸æ•…éšœæ’æŸ¥


**ğŸ“Š ç½‘ç»œç­–ç•¥ç›‘æ§**ï¼š

**â‘  å…³é”®ç›‘æ§æŒ‡æ ‡**
```yaml
# Prometheusç›‘æ§è§„åˆ™
groups:
- name: networkpolicy
  rules:
  - alert: NetworkPolicyDeniedTraffic
    expr: increase(networkpolicy_denied_packets_total[5m]) > 100
    labels:
      severity: warning
    annotations:
      summary: "ç½‘ç»œç­–ç•¥æ‹’ç»æµé‡å¼‚å¸¸å¢åŠ "
      description: "åœ¨è¿‡å»5åˆ†é’Ÿå†…ï¼Œè¢«æ‹’ç»çš„æ•°æ®åŒ…è¶…è¿‡100ä¸ª"

  - alert: NetworkPolicyMisconfiguration
    expr: rate(networkpolicy_denied_packets_total[1m]) > 10
    labels:
      severity: critical
    annotations:
      summary: "å¯èƒ½å­˜åœ¨ç½‘ç»œç­–ç•¥é…ç½®é”™è¯¯"
```

**â‘¡ æ•…éšœæ’æŸ¥æ¸…å•**
```markdown
**ğŸ” æ’æŸ¥æ­¥éª¤**ï¼š

1. **ç¡®è®¤ç­–ç•¥åº”ç”¨**
   ```bash
   kubectl get networkpolicy -A
   kubectl describe networkpolicy <policy-name>
   ```

2. **æ£€æŸ¥æ ‡ç­¾åŒ¹é…**
   ```bash
   kubectl get pods --show-labels
   kubectl get namespaces --show-labels
   ```

3. **éªŒè¯ç½‘ç»œæ’ä»¶æ”¯æŒ**
   ```bash
   kubectl get nodes -o wide
   kubectl describe node <node-name> | grep CNI
   ```

4. **æŸ¥çœ‹æ‹’ç»æ—¥å¿—**
   ```bash
   # Calico
   kubectl logs -n calico-system calico-node-xxx

   # Cilium  
   kubectl logs -n kube-system cilium-xxx
   ```

5. **æµ‹è¯•è¿é€šæ€§**
   ```bash
   kubectl run debug --image=busybox -it --rm
   ```
```

**â‘¢ å¸¸è§é—®é¢˜è§£å†³**
```markdown
**â— å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ**ï¼š

**é—®é¢˜1ï¼šDNSè§£æå¤±è´¥**
- åŸå› ï¼šEgressç­–ç•¥é˜»æ­¢äº†DNSæŸ¥è¯¢
- è§£å†³ï¼šæ·»åŠ å…è®¸UDP 53ç«¯å£çš„è§„åˆ™

**é—®é¢˜2ï¼šå¥åº·æ£€æŸ¥å¤±è´¥**
- åŸå› ï¼škubeletæ— æ³•è®¿é—®å¥åº·æ£€æŸ¥ç«¯å£
- è§£å†³ï¼šæ·»åŠ å…è®¸å¥åº·æ£€æŸ¥ç«¯å£çš„è§„åˆ™

**é—®é¢˜3ï¼šè·¨å‘½åç©ºé—´è®¿é—®å¤±è´¥**
- åŸå› ï¼šå‘½åç©ºé—´æ ‡ç­¾ä¸åŒ¹é…
- è§£å†³ï¼šæ£€æŸ¥å¹¶ä¿®æ­£å‘½åç©ºé—´æ ‡ç­¾

**é—®é¢˜4ï¼šç­–ç•¥ä¸ç”Ÿæ•ˆ**
- åŸå› ï¼šCNIæ’ä»¶ä¸æ”¯æŒNetworkPolicy
- è§£å†³ï¼šä½¿ç”¨Calicoã€Ciliumç­‰æ”¯æŒçš„CNI
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```markdown
ğŸ”¸ **NetworkPolicyæœ¬è´¨**ï¼šK8sé›†ç¾¤å†…çš„é˜²ç«å¢™è§„åˆ™ï¼Œæ§åˆ¶Podé—´ç½‘ç»œé€šä¿¡
ğŸ”¸ **å·¥ä½œåŸç†**ï¼šåŸºäºæ ‡ç­¾é€‰æ‹©å™¨åŒ¹é…Podï¼Œå®šä¹‰å…è®¸çš„æµé‡è§„åˆ™
ğŸ”¸ **ç­–ç•¥ç±»å‹**ï¼šIngress(å…¥ç«™)å’ŒEgress(å‡ºç«™)ä¸¤ç§æµé‡æ§åˆ¶
ğŸ”¸ **é€‰æ‹©æœºåˆ¶**ï¼špodSelectorã€namespaceSelectorã€ipBlockä¸‰ç§ç›®æ ‡é€‰æ‹©æ–¹å¼
ğŸ”¸ **é»˜è®¤è¡Œä¸º**ï¼šæœªè¢«é€‰ä¸­çš„Podå…è®¸æ‰€æœ‰æµé‡ï¼Œè¢«é€‰ä¸­çš„Podåªå…è®¸æ˜ç¡®çš„æµé‡
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ NetworkPolicyçš„"ç™½åå•"æœºåˆ¶**
```markdown
**ç†è§£è¦ç‚¹**ï¼š
- NetworkPolicyé‡‡ç”¨"é»˜è®¤æ‹’ç»+æ˜ç¡®å…è®¸"çš„ç™½åå•æ¨¡å¼
- ä¸€æ—¦Podè¢«ç­–ç•¥é€‰ä¸­ï¼Œæ‰€æœ‰æœªæ˜ç¡®å…è®¸çš„æµé‡éƒ½è¢«æ‹’ç»
- å¤šä¸ªç­–ç•¥ä½œç”¨äºåŒä¸€Podæ—¶ï¼Œæ•ˆæœæ˜¯"å¹¶é›†"ï¼ˆORå…³ç³»ï¼‰

**å®é™…å½±å“**ï¼š
- æé«˜äº†å®‰å…¨æ€§ï¼šåªæœ‰é¢„æœŸçš„æµé‡è¢«å…è®¸
- å¢åŠ äº†å¤æ‚æ€§ï¼šéœ€è¦æ˜ç¡®é…ç½®æ‰€æœ‰éœ€è¦çš„é€šä¿¡è·¯å¾„
- è¦æ±‚å®Œæ•´è§„åˆ’ï¼šé—æ¼è§„åˆ™ä¼šå¯¼è‡´æœåŠ¡ä¸­æ–­
```

**ğŸ”¹ æ ‡ç­¾é€‰æ‹©å™¨çš„å¨åŠ›ä¸è´£ä»»**
```markdown
**é€‰æ‹©å™¨ç‰¹ç‚¹**ï¼š
- åŠŸèƒ½å¼ºå¤§ï¼šå¯ä»¥ç²¾ç¡®æ§åˆ¶æµé‡çš„æ¥æºå’Œå»å‘
- åŠ¨æ€åŒ¹é…ï¼šPodæ ‡ç­¾å˜åŒ–æ—¶ï¼Œç­–ç•¥è‡ªåŠ¨ç”Ÿæ•ˆ/å¤±æ•ˆ
- å‘½åç©ºé—´è¾¹ç•Œï¼špodSelectoråªèƒ½é€‰æ‹©åŒå‘½åç©ºé—´çš„Pod

**è®¾è®¡åŸåˆ™**ï¼š
- æ ‡ç­¾ä½“ç³»è¦ç»Ÿä¸€ï¼šå»ºç«‹æ¸…æ™°çš„æ ‡ç­¾å‘½åè§„èŒƒ
- é¿å…è¿‡åº¦å¤æ‚ï¼šæ ‡ç­¾é€‰æ‹©å™¨è¦ç®€æ´æ˜äº†
- è€ƒè™‘ç»´æŠ¤æ€§ï¼šæ ‡ç­¾å˜æ›´è¦è€ƒè™‘å¯¹ç½‘ç»œç­–ç•¥çš„å½±å“
```

**ğŸ”¹ ç½‘ç»œç­–ç•¥çš„å±‚æ¬¡åŒ–è®¾è®¡**
```markdown
**åˆ†å±‚æ§åˆ¶ç†å¿µ**ï¼š
- é›†ç¾¤å±‚ï¼šæ•´ä½“å®‰å…¨è¾¹ç•Œå’Œå…¥å£æ§åˆ¶
- å‘½åç©ºé—´å±‚ï¼šç¯å¢ƒéš”ç¦»å’Œç²—ç²’åº¦æ§åˆ¶  
- åº”ç”¨å±‚ï¼šç»†ç²’åº¦çš„æœåŠ¡é—´é€šä¿¡æ§åˆ¶
- ç«¯å£å±‚ï¼šæœ€å°åŒ–ç«¯å£æš´éœ²åŸåˆ™

**å®è·µå»ºè®®**ï¼š
- å…ˆå»ºç«‹ç²—ç²’åº¦éš”ç¦»ï¼Œå†ç»†åŒ–å…·ä½“è§„åˆ™
- é‡‡ç”¨æ¸è¿›å¼éƒ¨ç½²ï¼Œé¿å…ä¸€æ­¥åˆ°ä½é€ æˆæœåŠ¡ä¸­æ–­
- å»ºç«‹å®Œå–„çš„æµ‹è¯•å’ŒéªŒè¯æœºåˆ¶
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **é‡‘èç³»ç»Ÿ**ï¼šäº¤æ˜“æ•°æ®åº“åªå…è®¸æ ¸å¿ƒäº¤æ˜“æœåŠ¡è®¿é—®
- **åŒ»ç–—å¹³å°**ï¼šæ‚£è€…ä¿¡æ¯ç³»ç»Ÿä¸è´¢åŠ¡ç³»ç»Ÿå®Œå…¨éš”ç¦»
- **ç”µå•†ç½‘ç«™**ï¼šæ”¯ä»˜æœåŠ¡åªå…è®¸è®¢å•æœåŠ¡è°ƒç”¨
- **æ•™è‚²ç³»ç»Ÿ**ï¼šå­¦ç”Ÿç®¡ç†ç³»ç»Ÿä¸èƒ½è®¿é—®æ•™å¸ˆè–ªèµ„æ•°æ®

**ğŸ”§ è¿ç»´å®è·µæŒ‡å¯¼**
- **å®‰å…¨åˆè§„**ï¼šæ»¡è¶³ç­‰ä¿ã€ISO27001ç­‰å®‰å…¨åˆè§„è¦æ±‚
- **æ•…éšœéš”ç¦»**ï¼šé˜²æ­¢å®‰å…¨é—®é¢˜åœ¨ç³»ç»Ÿé—´æ‰©æ•£
- **æƒé™æ§åˆ¶**ï¼šå®ç°æœ€å°æƒé™åŸåˆ™
- **å®¡è®¡è¿½è¸ª**ï¼šç»“åˆæ—¥å¿—å®ç°ç½‘ç»œè®¿é—®å®¡è®¡

**ğŸ’¡ å­¦ä¹ å»ºè®®**
- **ä»ç®€å•å¼€å§‹**ï¼šå…ˆæŒæ¡åŸºæœ¬çš„æ ‡ç­¾é€‰æ‹©å’Œç«¯å£æ§åˆ¶
- **é€æ­¥æ·±å…¥**ï¼šç†è§£å‘½åç©ºé—´éš”ç¦»å’Œå¤æ‚è§„åˆ™ç»„åˆ
- **å®è·µéªŒè¯**ï¼šåœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯ç­–ç•¥æ•ˆæœ
- **å…³æ³¨ç›‘æ§**ï¼šå»ºç«‹ç½‘ç»œç­–ç•¥çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

### 10.4 è®°å¿†è¦ç‚¹


**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç½‘ç»œç­–ç•¥åƒé˜²ç«å¢™ï¼Œæ ‡ç­¾é€‰æ‹©å®šè§„ç« 
- å…¥ç«™å‡ºç«™åˆ†åˆ«æ§ï¼Œç«¯å£åè®®è¦é™é‡  
- é»˜è®¤æ‹’ç»æœ€å®‰å…¨ï¼Œæ˜ç¡®å…è®¸æ‰é€šèˆª
- å‘½åç©ºé—´åšéš”ç¦»ï¼Œåˆ†å±‚é˜²æŠ¤ä¿å®‰å…¨

**âš¡ å¿«é€Ÿå›å¿†æ¸…å•**ï¼š
- âœ… NetworkPolicy = é›†ç¾¤é˜²ç«å¢™
- âœ… podSelector = é€‰æ‹©ç›®æ ‡Pod
- âœ… Ingress = å…¥ç«™æµé‡æ§åˆ¶  
- âœ… Egress = å‡ºç«™æµé‡æ§åˆ¶
- âœ… ç©ºç­–ç•¥ = æ‹’ç»æ‰€æœ‰æµé‡
- âœ… å¤šç­–ç•¥ = æ•ˆæœå–å¹¶é›†
- âœ… æ ‡ç­¾åŒ¹é… = åŠ¨æ€ç”Ÿæ•ˆ
- âœ… é»˜è®¤æ‹’ç» + æ˜ç¡®å…è®¸ = æœ€ä½³å®è·µ