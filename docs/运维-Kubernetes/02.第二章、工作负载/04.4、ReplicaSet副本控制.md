---
title: 4ã€ReplicaSetå‰¯æœ¬æ§åˆ¶
---
## ğŸ“š ç›®å½•

1. [ReplicaSetå‰¯æœ¬é›†æ¦‚å¿µ](#1-ReplicaSetå‰¯æœ¬é›†æ¦‚å¿µ)
2. [å‰¯æœ¬æ•°é‡æ§åˆ¶æœºåˆ¶](#2-å‰¯æœ¬æ•°é‡æ§åˆ¶æœºåˆ¶)
3. [Podæ¨¡æ¿å®šä¹‰è¯¦è§£](#3-Podæ¨¡æ¿å®šä¹‰è¯¦è§£)
4. [é€‰æ‹©å™¨åŒ¹é…è§„åˆ™](#4-é€‰æ‹©å™¨åŒ¹é…è§„åˆ™)
5. [å‰¯æœ¬é›†æ‰©ç¼©å®¹æ“ä½œ](#5-å‰¯æœ¬é›†æ‰©ç¼©å®¹æ“ä½œ)
6. [å‰¯æœ¬é›†çŠ¶æ€ç›‘æ§](#6-å‰¯æœ¬é›†çŠ¶æ€ç›‘æ§)
7. [å®è·µæ“ä½œä¸æ•…éšœå¤„ç†](#7-å®è·µæ“ä½œä¸æ•…éšœå¤„ç†)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ReplicaSetå‰¯æœ¬é›†æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ReplicaSet


**é€šä¿—ç†è§£**ï¼šReplicaSetå°±åƒæ˜¯ä¸€ä¸ª"Podç®¡å®¶"ï¼Œå®ƒçš„å·¥ä½œå°±æ˜¯ç¡®ä¿ä½ æŒ‡å®šæ•°é‡çš„Podå§‹ç»ˆåœ¨è¿è¡Œã€‚

```
ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š
å°±åƒé¤å…é‡Œéœ€è¦ä¿æŒ5ä¸ªæœåŠ¡å‘˜åœ¨å·¥ä½œ
- å¦‚æœæœ‰æœåŠ¡å‘˜è¯·å‡äº†ï¼Œç»ç†ä¼šå®‰æ’å…¶ä»–äººé¡¶æ›¿
- å¦‚æœæœåŠ¡å‘˜å¤ªå¤šäº†ï¼Œç»ç†ä¼šè®©å¤šä½™çš„äººä¼‘æ¯
- ReplicaSetå°±æ˜¯è¿™ä¸ª"ç»ç†"ï¼ŒPodå°±æ˜¯"æœåŠ¡å‘˜"
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ”¸ **ä¿è¯Podæ•°é‡**ï¼šç¡®ä¿æŒ‡å®šæ•°é‡çš„Podå‰¯æœ¬å§‹ç»ˆè¿è¡Œ
- ğŸ”¸ **è‡ªåŠ¨æ¢å¤**ï¼šPodå¼‚å¸¸é€€å‡ºæ—¶è‡ªåŠ¨åˆ›å»ºæ–°çš„æ›¿ä»£
- ğŸ”¸ **è´Ÿè½½åˆ†æ‹…**ï¼šå¤šä¸ªPodå‰¯æœ¬åˆ†æ‹…åº”ç”¨è´Ÿè½½
- ğŸ”¸ **é«˜å¯ç”¨æ€§**ï¼šå•ä¸ªPodæ•…éšœä¸å½±å“æ•´ä½“æœåŠ¡

### 1.2 ReplicaSetçš„å·¥ä½œåŸç†


**å·¥ä½œæµç¨‹å›¾ç¤º**ï¼š
```
ç”¨æˆ·å®šä¹‰æœŸæœ›çŠ¶æ€     ReplicaSetæ§åˆ¶å™¨     å®é™…PodçŠ¶æ€
        |                    |                  |
   æœŸæœ›3ä¸ªPodå‰¯æœ¬  â†’  æŒç»­ç›‘æ§å¯¹æ¯”  â†  å½“å‰2ä¸ªPodè¿è¡Œ
        |                    |                  |
        |            å‘ç°çŠ¶æ€ä¸åŒ¹é…              |
        |                    |                  |
        |            åˆ›å»º1ä¸ªæ–°Pod  â†’            |
        |                    |                  |
   æœŸæœ›çŠ¶æ€è¾¾æˆ  â†   ç›‘æ§ç¡®è®¤å®Œæˆ  â†   ç°åœ¨3ä¸ªPodè¿è¡Œ
```

**æ§åˆ¶å¾ªç¯æœºåˆ¶**ï¼š
```
1. è§‚å¯Ÿï¼ˆObserveï¼‰ï¼šæ£€æŸ¥å½“å‰Podæ•°é‡
2. åˆ†æï¼ˆAnalyzeï¼‰ï¼šå¯¹æ¯”æœŸæœ›æ•°é‡å’Œå®é™…æ•°é‡
3. è¡ŒåŠ¨ï¼ˆActï¼‰ï¼šåˆ›å»ºæˆ–åˆ é™¤Podä»¥è¾¾åˆ°æœŸæœ›çŠ¶æ€
4. é‡å¤ï¼šæŒç»­ç›‘æ§ï¼Œä¸æ–­è°ƒæ•´
```

### 1.3 ReplicaSet vs Deployment


**å…³ç³»å¯¹æ¯”**ï¼š
| **æ–¹é¢** | **ReplicaSet** | **Deployment** |
|---------|---------------|----------------|
| **å®šä½** | `åº•å±‚æ§åˆ¶å™¨` | `é«˜çº§æ§åˆ¶å™¨` |
| **åŠŸèƒ½** | `ä»…ç®¡ç†Podå‰¯æœ¬` | `ç®¡ç†ReplicaSet+æ»šåŠ¨æ›´æ–°` |
| **ä½¿ç”¨åœºæ™¯** | `åŸºç¡€å‰¯æœ¬æ§åˆ¶` | `ç”Ÿäº§ç¯å¢ƒæ¨è` |
| **æ›´æ–°ç­–ç•¥** | `ä¸æ”¯æŒæ»šåŠ¨æ›´æ–°` | `æ”¯æŒå¤šç§æ›´æ–°ç­–ç•¥` |

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨Deploymentè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ReplicaSetï¼Œå› ä¸ºDeploymentæä¾›äº†æ›´å®Œæ•´çš„åŠŸèƒ½ã€‚

---

## 2. âš–ï¸ å‰¯æœ¬æ•°é‡æ§åˆ¶æœºåˆ¶


### 2.1 å‰¯æœ¬æ§åˆ¶çš„æ ¸å¿ƒé€»è¾‘


**æœŸæœ›çŠ¶æ€ vs å®é™…çŠ¶æ€**ï¼š
```
æœŸæœ›çŠ¶æ€ï¼ˆDesired Stateï¼‰ï¼šä½ åœ¨YAMLä¸­å®šä¹‰çš„replicasæ•°é‡
å®é™…çŠ¶æ€ï¼ˆCurrent Stateï¼‰ï¼šé›†ç¾¤ä¸­å®é™…è¿è¡Œçš„Podæ•°é‡

ReplicaSetçš„å·¥ä½œå°±æ˜¯è®©"å®é™…çŠ¶æ€"æ— é™æ¥è¿‘"æœŸæœ›çŠ¶æ€"
```

**æ§åˆ¶ç­–ç•¥**ï¼š
```
æƒ…å†µ1ï¼šå®é™…Pod < æœŸæœ›æ•°é‡
â†’ åˆ›å»ºæ–°Podç›´åˆ°è¾¾åˆ°æœŸæœ›æ•°é‡

æƒ…å†µ2ï¼šå®é™…Pod > æœŸæœ›æ•°é‡  
â†’ åˆ é™¤å¤šä½™Podç›´åˆ°ç¬¦åˆæœŸæœ›æ•°é‡

æƒ…å†µ3ï¼šå®é™…Pod = æœŸæœ›æ•°é‡
â†’ ä¿æŒç°çŠ¶ï¼ŒæŒç»­ç›‘æ§
```

### 2.2 Podåˆ›å»ºå’Œåˆ é™¤ç­–ç•¥


**Podåˆ›å»ºè¿‡ç¨‹**ï¼š
```
1. ReplicaSetå‘ç°Podæ•°é‡ä¸è¶³
2. æ ¹æ®Podæ¨¡æ¿åˆ›å»ºæ–°çš„Podå®šä¹‰
3. å‘API Serveræäº¤åˆ›å»ºè¯·æ±‚
4. è°ƒåº¦å™¨é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹
5. kubeletåœ¨èŠ‚ç‚¹ä¸Šå¯åŠ¨Pod
6. Podè¿›å…¥RunningçŠ¶æ€
```

**Podåˆ é™¤é€‰æ‹©**ï¼šå½“éœ€è¦åˆ é™¤å¤šä½™Podæ—¶ï¼ŒReplicaSetä¼šä¼˜å…ˆåˆ é™¤ï¼š
- âš ï¸ **æœªå°±ç»ªçš„Pod**ï¼šè¿˜æ²¡å®Œå…¨å¯åŠ¨çš„Pod
- âš ï¸ **è¾ƒæ–°åˆ›å»ºçš„Pod**ï¼šä¿ç•™è¿è¡Œæ—¶é—´è¾ƒé•¿çš„Pod
- âš ï¸ **èµ„æºä½¿ç”¨å¼‚å¸¸çš„Pod**ï¼šé¿å…å½±å“æ­£å¸¸æœåŠ¡

### 2.3 å‰¯æœ¬æ•°é‡çš„å®æ—¶è°ƒæ•´


**åŠ¨æ€æ‰©ç¼©å®¹ç¤ºä¾‹**ï¼š
```bash
# å‡è®¾å½“å‰æœ‰3ä¸ªPodå‰¯æœ¬
kubectl get pods -l app=my-app
# NAME           READY   STATUS    RESTARTS   AGE
# my-app-abc12   1/1     Running   0          5m
# my-app-def34   1/1     Running   0          5m
# my-app-ghi56   1/1     Running   0          5m

# ä¿®æ”¹å‰¯æœ¬æ•°ä¸º5
kubectl scale replicaset my-app-rs --replicas=5

# è§‚å¯ŸPodåˆ›å»ºè¿‡ç¨‹
kubectl get pods -l app=my-app --watch
# ä¼šçœ‹åˆ°æ–°çš„Podè¢«åˆ›å»ºï¼šmy-app-jkl78, my-app-mno90
```

---

## 3. ğŸ“‹ Podæ¨¡æ¿å®šä¹‰è¯¦è§£


### 3.1 Podæ¨¡æ¿çš„ä½œç”¨


**Podæ¨¡æ¿å°±åƒæ˜¯"é€ æˆ¿å­çš„è“å›¾"**ï¼š
```
å»ºç­‘è“å›¾        â†’        Podæ¨¡æ¿
è§„å®šæˆ¿å­æ ·å¼            è§„å®šPodé…ç½®
åŒ…å«ææ–™æ¸…å•            åŒ…å«å®¹å™¨é•œåƒ
æŒ‡å®šæˆ¿é—´å¸ƒå±€            æŒ‡å®šèµ„æºé™åˆ¶
ç¡®å®šè£…ä¿®æ ‡å‡†            ç¡®å®šç¯å¢ƒå˜é‡
```

**æ¨¡æ¿ç»„æˆç»“æ„**ï¼š
```
Podæ¨¡æ¿ = å…ƒæ•°æ®(metadata) + è§„æ ¼å®šä¹‰(spec)
         â†“                    â†“
    åŒ…å«æ ‡ç­¾å’Œæ³¨é‡Š        åŒ…å«å®¹å™¨é…ç½®ä¿¡æ¯
```

### 3.2 ReplicaSet YAMLç»“æ„è§£æ


```yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: nginx-rs
  labels:
    app: nginx
spec:
  # æœŸæœ›çš„Podå‰¯æœ¬æ•°é‡
  replicas: 3
  
  # é€‰æ‹©å™¨ï¼šè¯†åˆ«å“ªäº›Podå±äºè¿™ä¸ªReplicaSet
  selector:
    matchLabels:
      app: nginx
      tier: frontend
  
  # Podæ¨¡æ¿ï¼šå®šä¹‰å¦‚ä½•åˆ›å»ºæ–°Pod
  template:
    metadata:
      labels:
        app: nginx
        tier: frontend
    spec:
      containers:
      - name: nginx
        image: nginx:1.20
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
```

### 3.3 Podæ¨¡æ¿å…³é”®é…ç½®


**å®¹å™¨é…ç½®è¯¦è§£**ï¼š
- ğŸ”¸ **é•œåƒé€‰æ‹©**ï¼š`image: nginx:1.20` - æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œé¿å…latestæ ‡ç­¾
- ğŸ”¸ **ç«¯å£æš´éœ²**ï¼š`containerPort: 80` - å£°æ˜å®¹å™¨ç›‘å¬çš„ç«¯å£
- ğŸ”¸ **èµ„æºé™åˆ¶**ï¼šé˜²æ­¢Podæ¶ˆè€—è¿‡å¤šèµ„æºå½±å“å…¶ä»–åº”ç”¨

**æ ‡ç­¾è®¾è®¡åŸåˆ™**ï¼š
```
æ ‡ç­¾çš„ä½œç”¨å°±åƒç»™ç‰©å“è´´æ ‡ç­¾çº¸ï¼š
- app: nginx        â†’ è¿™æ˜¯ä»€ä¹ˆåº”ç”¨
- tier: frontend    â†’ å±äºå“ªä¸€å±‚
- version: v1.0     â†’ ç‰ˆæœ¬ä¿¡æ¯
- environment: prod â†’ è¿è¡Œç¯å¢ƒ
```

---

## 4. ğŸ¯ é€‰æ‹©å™¨åŒ¹é…è§„åˆ™


### 4.1 é€‰æ‹©å™¨çš„åŸºæœ¬æ¦‚å¿µ


**é€‰æ‹©å™¨å°±åƒæ˜¯"èº«ä»½éªŒè¯ç³»ç»Ÿ"**ï¼š
```
ç°å®ä¾‹å­ï¼šå…¬å¸é—¨ç¦å¡
- å‘˜å·¥å¡ç‰‡ä¸Šæœ‰éƒ¨é—¨æ ‡è¯†(æ ‡ç­¾)
- é—¨ç¦ç³»ç»Ÿè®¾ç½®è®¿é—®è§„åˆ™(é€‰æ‹©å™¨)
- åªæœ‰åŒ¹é…è§„åˆ™çš„å¡ç‰‡æ‰èƒ½é€šè¿‡

Kubernetesä¸­ï¼š
- Podæœ‰æ ‡ç­¾(labels)
- ReplicaSetæœ‰é€‰æ‹©å™¨(selector)
- åªæœ‰æ ‡ç­¾åŒ¹é…é€‰æ‹©å™¨çš„Podæ‰å—ç®¡ç†
```

### 4.2 matchLabelsç²¾ç¡®åŒ¹é…


**ç²¾ç¡®åŒ¹é…è§„åˆ™**ï¼š
```yaml
selector:
  matchLabels:
    app: nginx
    tier: frontend
```

**åŒ¹é…é€»è¾‘**ï¼š
```
Podå¿…é¡»åŒæ—¶å…·æœ‰ä»¥ä¸‹æ ‡ç­¾æ‰ä¼šè¢«é€‰ä¸­ï¼š
âœ… app=nginx AND tier=frontend

Podæ ‡ç­¾ç¤ºä¾‹ï¼š
Pod A: app=nginx, tier=frontend          â†’ åŒ¹é… âœ…
Pod B: app=nginx, tier=backend           â†’ ä¸åŒ¹é… âŒ
Pod C: app=apache, tier=frontend         â†’ ä¸åŒ¹é… âŒ
Pod D: app=nginx, tier=frontend, env=prod â†’ åŒ¹é… âœ… (é¢å¤–æ ‡ç­¾ä¸å½±å“)
```

### 4.3 matchExpressionsçµæ´»åŒ¹é…


**è¡¨è¾¾å¼åŒ¹é…è¯­æ³•**ï¼š
```yaml
selector:
  matchExpressions:
  - key: app
    operator: In
    values: ["nginx", "apache"]
  - key: tier
    operator: NotIn
    values: ["database"]
  - key: environment
    operator: Exists
```

**æ“ä½œç¬¦è¯´æ˜**ï¼š
| **æ“ä½œç¬¦** | **å«ä¹‰** | **ç¤ºä¾‹** |
|-----------|---------|---------|
| `In` | `æ ‡ç­¾å€¼åœ¨æŒ‡å®šåˆ—è¡¨ä¸­` | `appåœ¨[nginx,apache]ä¸­` |
| `NotIn` | `æ ‡ç­¾å€¼ä¸åœ¨æŒ‡å®šåˆ—è¡¨ä¸­` | `tierä¸åœ¨[database]ä¸­` |
| `Exists` | `æ ‡ç­¾é”®å­˜åœ¨(ä¸å…³å¿ƒå€¼)` | `environmentæ ‡ç­¾å­˜åœ¨` |
| `DoesNotExist` | `æ ‡ç­¾é”®ä¸å­˜åœ¨` | `debugæ ‡ç­¾ä¸å­˜åœ¨` |

### 4.4 é€‰æ‹©å™¨è®¾è®¡æœ€ä½³å®è·µ


**æ ‡ç­¾å‘½åè§„èŒƒ**ï¼š
```
æ¨èæ ¼å¼ï¼šdomain/key=value

å®é™…ä¾‹å­ï¼š
app.kubernetes.io/name=nginx
app.kubernetes.io/version=1.20
app.kubernetes.io/component=frontend
mycompany.com/team=backend
```

**å¸¸è§é€‰æ‹©å™¨æ¨¡å¼**ï¼š
```yaml
# æ¨¡å¼1ï¼šåº”ç”¨å±‚çº§é€‰æ‹©
selector:
  matchLabels:
    app: my-application

# æ¨¡å¼2ï¼šå¤šç»´åº¦ç²¾ç¡®é€‰æ‹©  
selector:
  matchLabels:
    app: web-server
    version: v2.0
    environment: production

# æ¨¡å¼3ï¼šçµæ´»æ¡ä»¶é€‰æ‹©
selector:
  matchExpressions:
  - key: app
    operator: In
    values: ["web", "api"]
  - key: version
    operator: Exists
```

---

## 5. ğŸ“ˆ å‰¯æœ¬é›†æ‰©ç¼©å®¹æ“ä½œ


### 5.1 ä»€ä¹ˆæ˜¯æ‰©ç¼©å®¹


**é€šä¿—ç†è§£**ï¼š
```
æ‰©å®¹ = å¢åŠ æœåŠ¡å‘˜æ•°é‡
ç¼©å®¹ = å‡å°‘æœåŠ¡å‘˜æ•°é‡

é¤å…ä¾‹å­ï¼š
- å®¢äººå¤šäº†ï¼šå¢åŠ æœåŠ¡å‘˜(æ‰©å®¹)
- å®¢äººå°‘äº†ï¼šå‡å°‘æœåŠ¡å‘˜(ç¼©å®¹)
- Kubernetesï¼šæ ¹æ®è´Ÿè½½è°ƒæ•´Podæ•°é‡
```

### 5.2 æ‰‹åŠ¨æ‰©ç¼©å®¹æ“ä½œ


**kubectlå‘½ä»¤æ–¹å¼**ï¼š
```bash
# æŸ¥çœ‹å½“å‰å‰¯æœ¬æ•°
kubectl get replicaset nginx-rs
# NAME       DESIRED   CURRENT   READY   AGE
# nginx-rs   3         3         3       10m

# æ‰©å®¹åˆ°5ä¸ªå‰¯æœ¬
kubectl scale replicaset nginx-rs --replicas=5

# ç¼©å®¹åˆ°2ä¸ªå‰¯æœ¬
kubectl scale replicaset nginx-rs --replicas=2

# å®æ—¶è§‚å¯Ÿæ‰©ç¼©å®¹è¿‡ç¨‹
kubectl get pods -l app=nginx --watch
```

**YAMLæ–‡ä»¶æ–¹å¼**ï¼š
```bash
# ä¿®æ”¹YAMLæ–‡ä»¶ä¸­çš„replicaså€¼
vi nginx-replicaset.yaml
# ä¿®æ”¹ replicas: 3 ä¸º replicas: 5

# åº”ç”¨é…ç½®å˜æ›´
kubectl apply -f nginx-replicaset.yaml
```

### 5.3 æ‰©ç¼©å®¹è¿‡ç¨‹è¯¦è§£


**æ‰©å®¹è¿‡ç¨‹ç›‘æ§**ï¼š
```bash
# æ‰©å®¹å‰çŠ¶æ€
kubectl get pods -l app=nginx
# NAME           READY   STATUS    RESTARTS   AGE
# nginx-abc123   1/1     Running   0          5m
# nginx-def456   1/1     Running   0          5m
# nginx-ghi789   1/1     Running   0          5m

# æ‰§è¡Œæ‰©å®¹å‘½ä»¤
kubectl scale rs nginx-rs --replicas=5

# æ‰©å®¹è¿‡ç¨‹è§‚å¯Ÿ
kubectl get pods -l app=nginx --watch
# nginx-jkl012   0/1     Pending    0          0s
# nginx-mno345   0/1     Pending    0          0s
# nginx-jkl012   0/1     ContainerCreating   0     2s
# nginx-mno345   0/1     ContainerCreating   0     2s
# nginx-jkl012   1/1     Running   0          15s
# nginx-mno345   1/1     Running   0          18s
```

**PodçŠ¶æ€å˜åŒ–æ—¶åº**ï¼š
```
1. Pending      â†’ ç­‰å¾…è°ƒåº¦åˆ°èŠ‚ç‚¹
2. ContainerCreating â†’ èŠ‚ç‚¹ä¸Šåˆ›å»ºå®¹å™¨
3. Running      â†’ å®¹å™¨æˆåŠŸå¯åŠ¨
4. Ready        â†’ é€šè¿‡å¥åº·æ£€æŸ¥
```

### 5.4 æ‰©ç¼©å®¹çš„å®é™…åº”ç”¨


**ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
```
ç”µå•†ç§’æ€æ´»åŠ¨ï¼š
09:50 â†’ æ‰©å®¹åˆ°20ä¸ªPodå‰¯æœ¬
10:00 â†’ ç§’æ€å¼€å§‹ï¼Œå¤„ç†é«˜å¹¶å‘
10:30 â†’ æ´»åŠ¨ç»“æŸï¼Œç¼©å®¹åˆ°5ä¸ªPodå‰¯æœ¬
11:00 â†’ æ¢å¤æ­£å¸¸ï¼Œç¼©å®¹åˆ°3ä¸ªPodå‰¯æœ¬
```

**æ‰©ç¼©å®¹ç­–ç•¥å»ºè®®**ï¼š
- âš¡ **æ¸è¿›å¼æ‰©å®¹**ï¼šé€æ­¥å¢åŠ å‰¯æœ¬ï¼Œè§‚å¯Ÿç³»ç»Ÿå“åº”
- ğŸ” **ç›‘æ§èµ„æº**ï¼šç¡®ä¿èŠ‚ç‚¹èµ„æºè¶³å¤Ÿæ”¯æŒæ–°Pod
- â° **é¢„ç•™æ—¶é—´**ï¼šPodå¯åŠ¨éœ€è¦æ—¶é—´ï¼Œæå‰æ‰§è¡Œæ‰©å®¹
- ğŸ›¡ï¸ **ä¿ç•™æœ€å°å‰¯æœ¬**ï¼šç¼©å®¹æ—¶ç¡®ä¿æœåŠ¡å¯ç”¨æ€§

---

## 6. ğŸ“Š å‰¯æœ¬é›†çŠ¶æ€ç›‘æ§


### 6.1 ReplicaSetçŠ¶æ€ä¿¡æ¯


**çŠ¶æ€å­—æ®µå«ä¹‰**ï¼š
```bash
kubectl get replicaset nginx-rs
# NAME       DESIRED   CURRENT   READY   AGE
# nginx-rs   5         5         4       20m

å­—æ®µè§£é‡Šï¼š
- DESIREDï¼šæœŸæœ›çš„Podå‰¯æœ¬æ•°é‡
- CURRENTï¼šå½“å‰å®é™…çš„Podæ•°é‡
- READYï¼šå·²å°±ç»ªçš„Podæ•°é‡
- AGEï¼šReplicaSetåˆ›å»ºæ—¶é—´
```

**å¥åº·çŠ¶æ€åˆ¤æ–­**ï¼š
```
å¥åº·çŠ¶æ€ï¼šDESIRED = CURRENT = READY
é—®é¢˜çŠ¶æ€ï¼šä¸‰ä¸ªæ•°å€¼ä¸ä¸€è‡´

å¸¸è§é—®é¢˜åˆ†æï¼š
DESIRED=5, CURRENT=3, READY=3 â†’ Podåˆ›å»ºå¤±è´¥
DESIRED=5, CURRENT=5, READY=3 â†’ Podå¯åŠ¨ä¸­æˆ–å¥åº·æ£€æŸ¥å¤±è´¥
```

### 6.2 è¯¦ç»†çŠ¶æ€æŸ¥çœ‹


**describeå‘½ä»¤æŸ¥çœ‹è¯¦æƒ…**ï¼š
```bash
kubectl describe replicaset nginx-rs

# è¾“å‡ºå…³é”®ä¿¡æ¯ï¼š
# Name:         nginx-rs
# Namespace:    default
# Selector:     app=nginx
# Labels:       app=nginx
# Replicas:     5 desired | 5 updated | 5 total | 4 available | 1 unavailable
# Pod Status:   4 Running / 1 Waiting / 0 Succeeded / 0 Failed
# Events:
#   Normal  SuccessfulCreate  2m    Created pod: nginx-rs-abc123
#   Normal  SuccessfulCreate  2m    Created pod: nginx-rs-def456
```

### 6.3 PodçŠ¶æ€ç›‘æ§


**Podåˆ—è¡¨æŸ¥çœ‹**ï¼š
```bash
kubectl get pods -l app=nginx -o wide
# NAME           READY   STATUS    RESTARTS   AGE   IP           NODE
# nginx-abc123   1/1     Running   0          5m    10.244.1.10  worker-1
# nginx-def456   1/1     Running   0          5m    10.244.2.10  worker-2
# nginx-ghi789   0/1     Pending   0          1m    <none>       <none>
```

**PodçŠ¶æ€è¯´æ˜**ï¼š
- âœ… **Running**ï¼šPodæ­£å¸¸è¿è¡Œ
- â³ **Pending**ï¼šç­‰å¾…è°ƒåº¦æˆ–æ‹‰å–é•œåƒ
- ğŸ”„ **ContainerCreating**ï¼šå®¹å™¨åˆ›å»ºä¸­
- âŒ **Error/Failed**ï¼šPodå¯åŠ¨å¤±è´¥
- ğŸ”„ **Terminating**ï¼šPodæ­£åœ¨åˆ é™¤

### 6.4 ç›‘æ§å·¥å…·å’Œæ–¹æ³•


**å®æ—¶ç›‘æ§å‘½ä»¤**ï¼š
```bash
# å®æ—¶è§‚å¯ŸReplicaSetçŠ¶æ€
watch kubectl get replicaset nginx-rs

# å®æ—¶è§‚å¯ŸPodçŠ¶æ€å˜åŒ–
kubectl get pods -l app=nginx --watch

# æŸ¥çœ‹ReplicaSetäº‹ä»¶
kubectl get events --field-selector involvedObject.name=nginx-rs
```

**æ—¥å¿—æŸ¥çœ‹æ–¹æ³•**ï¼š
```bash
# æŸ¥çœ‹ç‰¹å®šPodæ—¥å¿—
kubectl logs nginx-abc123

# æŸ¥çœ‹ReplicaSetç®¡ç†çš„æ‰€æœ‰Podæ—¥å¿—
kubectl logs -l app=nginx --tail=50
```

---

## 7. ğŸ› ï¸ å®è·µæ“ä½œä¸æ•…éšœå¤„ç†


### 7.1 å®Œæ•´å®è·µç¤ºä¾‹


**Step 1ï¼šåˆ›å»ºReplicaSet**
```yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: web-server-rs
  labels:
    app: web-server
spec:
  replicas: 3
  selector:
    matchLabels:
      app: web-server
      tier: frontend
  template:
    metadata:
      labels:
        app: web-server
        tier: frontend
    spec:
      containers:
      - name: nginx
        image: nginx:1.20-alpine
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            cpu: 100m
            memory: 128Mi
```

**Step 2ï¼šéƒ¨ç½²å’ŒéªŒè¯**
```bash
# åˆ›å»ºReplicaSet
kubectl apply -f web-server-rs.yaml

# éªŒè¯åˆ›å»ºç»“æœ
kubectl get replicaset web-server-rs
kubectl get pods -l app=web-server

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
kubectl describe replicaset web-server-rs
```

### 7.2 å¸¸è§æ•…éšœå’Œè§£å†³æ–¹æ³•


**æ•…éšœ1ï¼šPodä¸€ç›´å¤„äºPendingçŠ¶æ€**
```
ç°è±¡ï¼šCURRENT < DESIREDï¼Œæ–°Podæ— æ³•å¯åŠ¨
åŸå› ï¼šèµ„æºä¸è¶³ã€è°ƒåº¦å¤±è´¥ã€é•œåƒæ‹‰å–é—®é¢˜

æ’æŸ¥æ­¥éª¤ï¼š
kubectl describe pod <pending-pod-name>
# æŸ¥çœ‹Eventséƒ¨åˆ†çš„é”™è¯¯ä¿¡æ¯

å¸¸è§è§£å†³æ–¹æ¡ˆï¼š
- æ£€æŸ¥èŠ‚ç‚¹èµ„æºï¼škubectl top nodes
- æ£€æŸ¥é•œåƒåç§°æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œç­–ç•¥å’Œå­˜å‚¨å·é…ç½®
```

**æ•…éšœ2ï¼šPodå¯åŠ¨åç«‹å³é€€å‡º**
```
ç°è±¡ï¼šPodçŠ¶æ€æ˜¾ç¤ºErroræˆ–CrashLoopBackOff
åŸå› ï¼šå®¹å™¨å¯åŠ¨å‘½ä»¤é”™è¯¯ã€é…ç½®é—®é¢˜

æ’æŸ¥æ–¹æ³•ï¼š
kubectl logs <pod-name> --previous
kubectl describe pod <pod-name>

è§£å†³æ€è·¯ï¼š
- æ£€æŸ¥å®¹å™¨é•œåƒå’Œå¯åŠ¨å‘½ä»¤
- éªŒè¯ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶
- æ£€æŸ¥å­˜å‚¨å·æŒ‚è½½
```

**æ•…éšœ3ï¼šReplicaSetæ— æ³•åˆ é™¤Pod**
```
ç°è±¡ï¼šåˆ é™¤Podåç«‹å³é‡å»º
åŸå› ï¼šè¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼ŒReplicaSetä¼šç»´æŒæœŸæœ›å‰¯æœ¬æ•°

æ­£ç¡®åˆ é™¤æ–¹æ³•ï¼š
# åˆ é™¤æ•´ä¸ªReplicaSet
kubectl delete replicaset web-server-rs

# æˆ–è€…å…ˆç¼©å®¹åˆ°0ï¼Œå†åˆ é™¤
kubectl scale replicaset web-server-rs --replicas=0
kubectl delete replicaset web-server-rs
```

### 7.3 è¿ç»´æœ€ä½³å®è·µ


**èµ„æºé…ç½®å»ºè®®**ï¼š
```yaml
resources:
  requests:    # ä¿è¯åˆ†é…çš„èµ„æº
    cpu: 100m      # 0.1 CPUæ ¸å¿ƒ
    memory: 128Mi  # 128MBå†…å­˜
  limits:      # é™åˆ¶æœ€å¤§ä½¿ç”¨
    cpu: 200m      # 0.2 CPUæ ¸å¿ƒ  
    memory: 256Mi  # 256MBå†…å­˜
```

**å¥åº·æ£€æŸ¥é…ç½®**ï¼š
```yaml
livenessProbe:    # å­˜æ´»æ¢é’ˆ
  httpGet:
    path: /health
    port: 80
  initialDelaySeconds: 30
  periodSeconds: 10

readinessProbe:   # å°±ç»ªæ¢é’ˆ
  httpGet:
    path: /ready
    port: 80
  initialDelaySeconds: 5
  periodSeconds: 5
```

**æ ‡ç­¾ç®¡ç†ç­–ç•¥**ï¼š
```
ç¯å¢ƒæ ‡è¯†ï¼šenvironment=production
ç‰ˆæœ¬æ ‡è¯†ï¼šversion=v2.1.0
å›¢é˜Ÿæ ‡è¯†ï¼šteam=frontend
åº”ç”¨æ ‡è¯†ï¼šapp=web-server
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ReplicaSetæœ¬è´¨ï¼šç¡®ä¿æŒ‡å®šæ•°é‡Podå‰¯æœ¬å§‹ç»ˆè¿è¡Œçš„æ§åˆ¶å™¨
ğŸ”¸ å·¥ä½œåŸç†ï¼šé€šè¿‡æ§åˆ¶å¾ªç¯æŒç»­ç›‘æ§å’Œè°ƒæ•´Podæ•°é‡
ğŸ”¸ Podæ¨¡æ¿ï¼šå®šä¹‰å¦‚ä½•åˆ›å»ºæ–°Podçš„è“å›¾
ğŸ”¸ é€‰æ‹©å™¨åŒ¹é…ï¼šé€šè¿‡æ ‡ç­¾è¯†åˆ«ç®¡ç†çš„Pod
ğŸ”¸ æ‰©ç¼©å®¹æ“ä½œï¼šåŠ¨æ€è°ƒæ•´å‰¯æœ¬æ•°é‡åº”å¯¹è´Ÿè½½å˜åŒ–
ğŸ”¸ çŠ¶æ€ç›‘æ§ï¼šæŒæ¡DESIRED/CURRENT/READYçš„å«ä¹‰
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ReplicaSet vs æ‰‹åŠ¨ç®¡ç†Pod**
```
æ‰‹åŠ¨ç®¡ç†ï¼š
- Podæ•…éšœéœ€è¦äººå·¥é‡å¯
- è´Ÿè½½å¢åŠ éœ€è¦æ‰‹åŠ¨åˆ›å»ºæ–°Pod
- å®¹æ˜“å‡ºç°äººä¸ºé”™è¯¯

ReplicaSetè‡ªåŠ¨ç®¡ç†ï¼š
- Podæ•…éšœè‡ªåŠ¨æ¢å¤
- å¯ä»¥å¿«é€Ÿæ‰©ç¼©å®¹
- å£°æ˜å¼ç®¡ç†ï¼Œå‡å°‘è¿ç»´è´Ÿæ‹…
```

**ğŸ”¹ é€‰æ‹©å™¨çš„é‡è¦æ€§**
```
é€‰æ‹©å™¨å°±æ˜¯ReplicaSetçš„"ç®¡è¾–èŒƒå›´"ï¼š
- é€‰æ‹©å™¨åŒ¹é…çš„Podæ‰å—ReplicaSetç®¡ç†
- æ ‡ç­¾å˜åŒ–ä¼šå½±å“Podçš„å½’å±
- é€‰æ‹©å™¨è®¾è®¡å½±å“ç®¡ç†çš„çµæ´»æ€§
```

**ğŸ”¹ æ‰©ç¼©å®¹çš„æ—¶æœºé€‰æ‹©**
```
æ‰©å®¹æ—¶æœºï¼š
- ä¸šåŠ¡é«˜å³°æœŸå‰é¢„å…ˆæ‰©å®¹
- CPU/å†…å­˜ä½¿ç”¨ç‡æŒç»­è¿‡é«˜
- å“åº”æ—¶é—´æ˜æ˜¾å¢åŠ 

ç¼©å®¹æ—¶æœºï¼š
- ä¸šåŠ¡ä½å³°æœŸé‡Šæ”¾èµ„æº
- èµ„æºä½¿ç”¨ç‡é•¿æœŸåä½
- æˆæœ¬ä¼˜åŒ–éœ€æ±‚
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
- **Webåº”ç”¨**ï¼šæ ¹æ®è®¿é—®é‡åŠ¨æ€è°ƒæ•´å®ä¾‹æ•°é‡
- **APIæœåŠ¡**ï¼šä¿è¯é«˜å¯ç”¨æ€§å’Œè´Ÿè½½åˆ†æ‹…
- **æ‰¹å¤„ç†ä»»åŠ¡**ï¼šå¹¶è¡Œå¤„ç†æé«˜æ•ˆç‡
- **å¾®æœåŠ¡æ¶æ„**ï¼šæ¯ä¸ªæœåŠ¡ç‹¬ç«‹ç®¡ç†å‰¯æœ¬æ•°é‡

**è¿ç»´å®è·µè¦ç‚¹**ï¼š
- **ç›‘æ§ä¸ºç‹**ï¼šæŒç»­ç›‘æ§PodçŠ¶æ€å’Œèµ„æºä½¿ç”¨
- **æ¸è¿›æ“ä½œ**ï¼šæ‰©ç¼©å®¹è¦å¾ªåºæ¸è¿›ï¼Œé¿å…ç³»ç»Ÿå†²å‡»
- **å¤‡ä»½ç­–ç•¥**ï¼šé‡è¦åº”ç”¨ä¿æŒæœ€å°å‰¯æœ¬æ•°é‡
- **æ ‡ç­¾è§„èŒƒ**ï¼šå»ºç«‹ç»Ÿä¸€çš„æ ‡ç­¾å‘½åè§„èŒƒ

**ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»**ï¼š
```
Service â†’ ä¸ºReplicaSetçš„Podæä¾›è´Ÿè½½å‡è¡¡
HPA â†’ åŸºäºæŒ‡æ ‡è‡ªåŠ¨è°ƒæ•´ReplicaSetå‰¯æœ¬æ•°
Deployment â†’ ç®¡ç†ReplicaSetï¼Œæä¾›æ»šåŠ¨æ›´æ–°èƒ½åŠ›
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ReplicaSetæ˜¯Podç®¡å®¶ï¼Œä¿è¯æ•°é‡ä¸ä¼šå·®
- é€‰æ‹©å™¨åŒ¹é…æ‰¾Podï¼Œæ ‡ç­¾è®¾è®¡è¦è§„åˆ’  
- æ‰©ç¼©å®¹è¦çœ‹æ—¶æœºï¼Œç›‘æ§çŠ¶æ€æœ€é‡è¦
- æ•…éšœæ’æŸ¥æŸ¥æ—¥å¿—ï¼Œäº‹ä»¶ä¿¡æ¯å¾ˆå…³é”®