---
title: 39ã€kubectlç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ
---
## ğŸ“š ç›®å½•

1. [kubectlç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒç†å¿µ](#1-kubectlç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒç†å¿µ)
2. [å®‰å…¨æ‰§è¡Œå‘½ä»¤çš„é»„é‡‘æ³•åˆ™](#2-å®‰å…¨æ‰§è¡Œå‘½ä»¤çš„é»„é‡‘æ³•åˆ™)
3. [èµ„æºç®¡ç†æœ€ä½³å®è·µ](#3-èµ„æºç®¡ç†æœ€ä½³å®è·µ)
4. [é—®é¢˜è¯Šæ–­ä¸æ•…éšœæ’æŸ¥](#4-é—®é¢˜è¯Šæ–­ä¸æ•…éšœæ’æŸ¥)
5. [ç”Ÿäº§ç¯å¢ƒå¿…å¤‡å‘½ä»¤è¯¦è§£](#5-ç”Ÿäº§ç¯å¢ƒå¿…å¤‡å‘½ä»¤è¯¦è§£)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ kubectlç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒç†å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ


**ğŸ”¸ ç”Ÿäº§ç¯å¢ƒçš„ç‰¹æ®Šæ€§**
```
ç”Ÿäº§ç¯å¢ƒå°±åƒåœ¨é«˜é€Ÿå…¬è·¯ä¸Šå¼€è½¦ï¼š
â€¢ ä»»ä½•æ“ä½œéƒ½å¯èƒ½å½±å“çœŸå®ç”¨æˆ·
â€¢ ä¸€ä¸ªé”™è¯¯å‘½ä»¤å¯èƒ½å¯¼è‡´æœåŠ¡ä¸­æ–­  
â€¢ éœ€è¦æ›´åŠ è°¨æ…å’Œè§„èŒƒçš„æ“ä½œæµç¨‹
â€¢ å¿…é¡»æœ‰å®Œå–„çš„å›æ»šå’Œæ¢å¤æœºåˆ¶
```

**ğŸ’¡ æ ¸å¿ƒæ€ç»´è½¬å˜**
```
å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒï¼š

å¼€å‘ç¯å¢ƒï¼š
â€¢ å¯ä»¥éšæ„å®éªŒå’Œè¯•é”™
â€¢ å‡ºé—®é¢˜äº†é‡æ–°éƒ¨ç½²å°±è¡Œ
â€¢ kubectl apply ç›´æ¥æ‰§è¡Œ

ç”Ÿäº§ç¯å¢ƒï¼š
â€¢ æ¯ä¸ªæ“ä½œéƒ½è¦ä¸‰æ€è€Œåè¡Œ
â€¢ å¿…é¡»å…ˆéªŒè¯å†æ‰§è¡Œ
â€¢ éœ€è¦å®Œæ•´çš„å˜æ›´è®°å½•å’Œå›æ»šæ–¹æ¡ˆ
```

### 1.2 ç”Ÿäº§ç¯å¢ƒæ“ä½œä¸‰å¤§åŸåˆ™


**âš ï¸ åŸåˆ™ä¸€ï¼šå…ˆéªŒè¯ï¼Œå†æ‰§è¡Œ**
```
æ°¸è¿œä¸è¦ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒæ‰§è¡ŒæœªéªŒè¯çš„å‘½ä»¤ï¼

æ­£ç¡®æµç¨‹ï¼š
1. æœ¬åœ°/æµ‹è¯•ç¯å¢ƒéªŒè¯
2. å¹²è·‘æ¨¡å¼æ£€æŸ¥
3. æŸ¥çœ‹å·®å¼‚å¯¹æ¯”
4. å°èŒƒå›´ç°åº¦æ‰§è¡Œ
5. å…¨é‡å‘å¸ƒ
```

**ğŸ›¡ï¸ åŸåˆ™äºŒï¼šå¯è§‚æµ‹ï¼Œå¯å›æ»š**
```
æ¯ä¸ªæ“ä½œéƒ½è¦ï¼š
â€¢ è®°å½•æ‰§è¡Œå‰çš„çŠ¶æ€
â€¢ ç›‘æ§æ‰§è¡Œè¿‡ç¨‹
â€¢ å‡†å¤‡å›æ»šæ–¹æ¡ˆ
â€¢ è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
```

**ğŸ” åŸåˆ™ä¸‰ï¼šæœ€å°å½±å“ï¼Œæ¸è¿›å¼**
```
é¿å…ä¸€æ¬¡æ€§å¤§æ‰¹é‡æ“ä½œï¼š
â€¢ åˆ†æ‰¹æ¬¡æ‰§è¡Œ
â€¢ è®¾ç½®åˆç†çš„å¹¶å‘åº¦
â€¢ å®æ—¶ç›‘æ§åº”ç”¨çŠ¶æ€
â€¢ å‡ºç°é—®é¢˜ç«‹å³åœæ­¢
```

---

## 2. ğŸ›¡ï¸ å®‰å…¨æ‰§è¡Œå‘½ä»¤çš„é»„é‡‘æ³•åˆ™


### 2.1 å¹²è·‘éªŒè¯ï¼šæ°¸è¿œå…ˆæµ‹è¯•


**ğŸ”¸ æœåŠ¡ç«¯å¹²è·‘éªŒè¯**
```bash
# æœ€é‡è¦çš„å‘½ä»¤ï¼šæœåŠ¡ç«¯å¹²è·‘
kubectl apply -f deployment.yaml --dry-run=server

# è¿™ä¸ªå‘½ä»¤åšäº†ä»€ä¹ˆï¼Ÿ
â€¢ æŠŠä½ çš„YAMLå‘é€åˆ°Kubernetes APIæœåŠ¡å™¨
â€¢ æœåŠ¡å™¨è¿›è¡Œå®Œæ•´çš„éªŒè¯ï¼ˆè¯­æ³•ã€æƒé™ã€èµ„æºå†²çªç­‰ï¼‰
â€¢ ä½†ä¸ä¼šçœŸæ­£åˆ›å»ºæˆ–ä¿®æ”¹ä»»ä½•èµ„æº
â€¢ å‘Šè¯‰ä½ å¦‚æœæ‰§è¡Œä¼šå‘ç”Ÿä»€ä¹ˆ
```

**ğŸ’­ ä¸ºä»€ä¹ˆè¦ç”¨æœåŠ¡ç«¯å¹²è·‘ï¼Ÿ**
```
å®¢æˆ·ç«¯å¹²è·‘ vs æœåŠ¡ç«¯å¹²è·‘ï¼š

å®¢æˆ·ç«¯å¹²è·‘ (--dry-run=client)ï¼š
â€¢ åªæ£€æŸ¥YAMLè¯­æ³•
â€¢ ä¸æ£€æŸ¥æœåŠ¡å™¨ç«¯çš„çº¦æŸ
â€¢ å¯èƒ½é€šè¿‡éªŒè¯ä½†å®é™…æ‰§è¡Œå¤±è´¥

æœåŠ¡ç«¯å¹²è·‘ (--dry-run=server)ï¼š
â€¢ å®Œæ•´çš„æœåŠ¡å™¨ç«¯éªŒè¯
â€¢ æ£€æŸ¥èµ„æºé…é¢ã€æƒé™ã€å†²çªç­‰
â€¢ æ›´æ¥è¿‘çœŸå®æ‰§è¡Œçš„ç»“æœ
```

### 2.2 å·®å¼‚å¯¹æ¯”ï¼šçœ‹æ¸…æ¥šè¦æ”¹ä»€ä¹ˆ


**ğŸ”¸ æ‰§è¡Œå‰æŸ¥çœ‹å·®å¼‚**
```bash
# æŸ¥çœ‹å³å°†åº”ç”¨çš„å˜æ›´
kubectl diff -f deployment.yaml

# è¿™ä¸ªå‘½ä»¤çš„ä»·å€¼ï¼š
â€¢ æ¸…æ¥šæ˜¾ç¤ºå“ªäº›å­—æ®µä¼šè¢«ä¿®æ”¹
â€¢ çº¢è‰²æ˜¾ç¤ºåˆ é™¤çš„å†…å®¹ï¼Œç»¿è‰²æ˜¾ç¤ºæ–°å¢çš„å†…å®¹
â€¢ é¿å…æ„å¤–çš„é…ç½®å˜æ›´
â€¢ è®©ä½ å¯¹å³å°†å‘ç”Ÿçš„å˜æ›´å¿ƒé‡Œæœ‰æ•°
```

**ğŸ“‹ diffå‘½ä»¤å®ç”¨æŠ€å·§**
```bash
# å¯¹æ¯”æ•´ä¸ªç›®å½•çš„å˜æ›´
kubectl diff -f ./k8s-configs/

# å¯¹æ¯”æ—¶å¿½ç•¥æŸäº›å­—æ®µçš„å˜æ›´
kubectl diff -f deployment.yaml --ignore-labels=version

# ä¿å­˜å·®å¼‚åˆ°æ–‡ä»¶ä¾¿äºå®¡æŸ¥
kubectl diff -f deployment.yaml > changes.diff
```

### 2.3 è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´


**â±ï¸ ä¸ºä»€ä¹ˆéœ€è¦è¶…æ—¶æ§åˆ¶**
```
ç”Ÿäº§ç¯å¢ƒä¸­çš„è¶…æ—¶è®¾ç½®ï¼š
â€¢ é˜²æ­¢å‘½ä»¤æ— é™ç­‰å¾…
â€¢ åŠæ—¶å‘ç°éƒ¨ç½²é—®é¢˜
â€¢ ä¸ºäººå·¥å¹²é¢„ç•™å‡ºæ—¶é—´
â€¢ é¿å…å½±å“å…¶ä»–æ“ä½œ
```

**ğŸ”§ è¶…æ—¶è®¾ç½®æœ€ä½³å®è·µ**
```bash
# éƒ¨ç½²çŠ¶æ€æ£€æŸ¥è®¾ç½®è¶…æ—¶
kubectl rollout status deployment/my-app --timeout=600s

# ä¸ºä»€ä¹ˆ600ç§’ï¼Ÿ
â€¢ ç»™åº”ç”¨å……åˆ†çš„å¯åŠ¨æ—¶é—´
â€¢ åŒ…å«é•œåƒä¸‹è½½æ—¶é—´
â€¢ è€ƒè™‘å¥åº·æ£€æŸ¥çš„æ—¶é—´
â€¢ ä½†ä¸ä¼šæ— é™ç­‰å¾…

# Podå°±ç»ªçŠ¶æ€ç­‰å¾…
kubectl wait --for=condition=ready pod -l app=my-app --timeout=300s
```

---

## 3. ğŸ“Š èµ„æºç®¡ç†æœ€ä½³å®è·µ


### 3.1 æ ‡ç­¾é€‰æ‹©å™¨ï¼šç²¾å‡†æ“ä½œçš„åˆ©å™¨


**ğŸ¯ ä»€ä¹ˆæ˜¯æ ‡ç­¾é€‰æ‹©å™¨**
```
æ ‡ç­¾å°±åƒç»™æ¯ä¸ªèµ„æºè´´ä¸Šçš„æ ‡ç­¾çº¸ï¼š
â€¢ å¯ä»¥æŒ‰åŠŸèƒ½åˆ†ç±»ï¼šapp=web, app=database  
â€¢ å¯ä»¥æŒ‰ç¯å¢ƒåˆ†ç±»ï¼šenv=prod, env=test
â€¢ å¯ä»¥æŒ‰ç‰ˆæœ¬åˆ†ç±»ï¼šversion=v1.2.0
â€¢ å¯ä»¥ç»„åˆä½¿ç”¨ï¼šapp=web,env=prod
```

**ğŸ”¸ å¤šèµ„æºç±»å‹æ‰¹é‡æ“ä½œ**
```bash
# ä¸€æ¬¡æ€§æŸ¥çœ‹å¤šç§èµ„æºç±»å‹
kubectl get all,cm,secret,pvc -l app=my-app

# è¿™ä¸ªå‘½ä»¤æŸ¥è¯¢ï¼š
# all: pods, services, deployments, replicasets
# cm: configmaps (é…ç½®æ–‡ä»¶)  
# secret: æ•æ„Ÿä¿¡æ¯
# pvc: persistentvolumeclaims (å­˜å‚¨å·)

# å®é™…åº”ç”¨åœºæ™¯ï¼š
â€¢ æŸ¥çœ‹æŸä¸ªåº”ç”¨çš„å®Œæ•´èµ„æºçŠ¶æ€
â€¢ æ’æŸ¥é—®é¢˜æ—¶çš„å…¨å±€è§†å›¾
â€¢ æ¸…ç†èµ„æºå‰çš„ç¡®è®¤æ£€æŸ¥
```

### 3.2 èµ„æºé…é¢ç®¡ç†


**ğŸ’° ä»€ä¹ˆæ˜¯èµ„æºé…é¢**
```
æƒ³è±¡K8sé›†ç¾¤æ˜¯ä¸€ä¸ªå…±äº«çš„åŠå…¬æ¥¼ï¼š
â€¢ CPUå’Œå†…å­˜å°±åƒåŠå…¬å®¤çš„é¢ç§¯
â€¢ èµ„æºé…é¢å°±æ˜¯æ¯ä¸ªå›¢é˜Ÿèƒ½ç”¨å¤šå°‘é¢ç§¯
â€¢ é˜²æ­¢æŸä¸ªåº”ç”¨å ç”¨è¿‡å¤šèµ„æº
â€¢ ä¿è¯æ•´ä¸ªé›†ç¾¤çš„ç¨³å®šè¿è¡Œ
```

**ğŸ”§ åˆ›å»ºè¯¦ç»†çš„èµ„æºé…é¢**
```bash
# åˆ›å»ºèµ„æºé…é¢
kubectl create quota production-quota \
  --hard=requests.cpu=10,requests.memory=20Gi,limits.cpu=20,limits.memory=40Gi

# é…é¢å‚æ•°è§£é‡Šï¼š
# requests.cpu=10: ä¿è¯å¯ç”¨çš„CPUæ€»é‡
# requests.memory=20Gi: ä¿è¯å¯ç”¨çš„å†…å­˜æ€»é‡  
# limits.cpu=20: æœ€å¤§å¯ç”¨CPU
# limits.memory=40Gi: æœ€å¤§å¯ç”¨å†…å­˜
```

### 3.3 èŠ‚ç‚¹èµ„æºç®¡ç†


**ğŸ” æŸ¥çœ‹ç‰¹å®šèŠ‚ç‚¹ä¸Šçš„Pod**
```bash
# æŸ¥çœ‹æŸä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„æ‰€æœ‰Pod
kubectl get pods --field-selector spec.nodeName=worker-node-1

# ä½¿ç”¨åœºæ™¯ï¼š
â€¢ èŠ‚ç‚¹ç»´æŠ¤å‰æ£€æŸ¥å½±å“èŒƒå›´
â€¢ æ’æŸ¥èŠ‚ç‚¹èµ„æºä½¿ç”¨é—®é¢˜
â€¢ è´Ÿè½½å‡è¡¡æ£€æŸ¥
â€¢ èŠ‚ç‚¹æ•…éšœæ—¶çš„å½±å“è¯„ä¼°
```

**ğŸ“ˆ èŠ‚ç‚¹èµ„æºä½¿ç”¨ç›‘æ§**
```bash
# æŸ¥çœ‹èŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µ
kubectl top nodes

# æŸ¥çœ‹Podèµ„æºä½¿ç”¨
kubectl top pods --sort-by=cpu
kubectl top pods --sort-by=memory
```

---

## 4. ğŸ”§ é—®é¢˜è¯Šæ–­ä¸æ•…éšœæ’æŸ¥


### 4.1 å¿«é€Ÿå®šä½é—®é¢˜Pod


**ğŸš¨ ä»€ä¹ˆæ˜¯é—®é¢˜Pod**
```
æ­£å¸¸PodçŠ¶æ€ï¼šRunning (è¿è¡Œä¸­) æˆ– Succeeded (æˆåŠŸå®Œæˆ)
é—®é¢˜PodçŠ¶æ€ï¼š
â€¢ Pending: ç­‰å¾…è°ƒåº¦ï¼Œé€šå¸¸æ˜¯èµ„æºä¸è¶³
â€¢ Failed: è¿è¡Œå¤±è´¥
â€¢ CrashLoopBackOff: åå¤å´©æºƒé‡å¯
â€¢ ImagePullBackOff: é•œåƒä¸‹è½½å¤±è´¥
```

**ğŸ” é—®é¢˜Podå¿«é€ŸæŸ¥è¯¢**
```bash
# æŸ¥æ‰¾æ‰€æœ‰éæ­£å¸¸çŠ¶æ€çš„Pod
kubectl get pods --field-selector status.phase!=Running,status.phase!=Succeeded

# è¿™ä¸ªå‘½ä»¤çš„ä»·å€¼ï¼š
â€¢ å¿«é€Ÿè¿‡æ»¤å‡ºæœ‰é—®é¢˜çš„Pod
â€¢ é¿å…åœ¨å¤§é‡Podä¸­é€ä¸ªæ£€æŸ¥
â€¢ ç”Ÿäº§ç¯å¢ƒæ•…éšœæ—¶çš„ç¬¬ä¸€æ­¥æ’æŸ¥
â€¢ å¯ä»¥ç»„åˆå…¶ä»–æ¡ä»¶è¿›ä¸€æ­¥ç­›é€‰
```

### 4.2 äº‹ä»¶æ—¥å¿—åˆ†æ


**ğŸ“ Kubernetesäº‹ä»¶ç³»ç»Ÿ**
```
K8säº‹ä»¶å°±åƒç³»ç»Ÿçš„"æ—¥è®°æœ¬"ï¼š
â€¢ è®°å½•é›†ç¾¤ä¸­å‘ç”Ÿçš„æ‰€æœ‰é‡è¦äº‹æƒ…
â€¢ Podå¯åŠ¨ã€å¤±è´¥ã€é‡å¯ç­‰éƒ½ä¼šè®°å½•
â€¢ æŒ‰æ—¶é—´æ’åºï¼Œæœ€æ–°çš„äº‹ä»¶æœ€é‡è¦
â€¢ æ˜¯æ•…éšœæ’æŸ¥çš„é‡è¦ä¿¡æ¯æº
```

**â° æŸ¥çœ‹æœ€è¿‘çš„ç³»ç»Ÿäº‹ä»¶**
```bash
# æŸ¥çœ‹æœ€è¿‘çš„äº‹ä»¶ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰
kubectl get events --sort-by=.lastTimestamp | tail

# æ›´è¯¦ç»†çš„äº‹ä»¶æŸ¥è¯¢
kubectl get events --sort-by=.lastTimestamp --field-selector type=Warning

# ç‰¹å®šå‘½åç©ºé—´çš„äº‹ä»¶
kubectl get events -n production --sort-by=.lastTimestamp
```

### 4.3 åº”ç”¨éƒ¨ç½²çŠ¶æ€ç›‘æ§


**ğŸ¯ éƒ¨ç½²çŠ¶æ€å®æ—¶è·Ÿè¸ª**
```bash
# ç›‘æ§éƒ¨ç½²çŠ¶æ€ç›´åˆ°å®Œæˆæˆ–è¶…æ—¶
kubectl rollout status deployment/my-app --timeout=600s

# å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼š
â€¢ å®æ—¶æ˜¾ç¤ºéƒ¨ç½²è¿›åº¦
â€¢ æ–°Podåˆ›å»ºå’Œå°±ç»ªçŠ¶æ€
â€¢ æ—§Podç»ˆæ­¢çŠ¶æ€
â€¢ å¦‚æœ10åˆ†é’Ÿå†…æœªå®Œæˆåˆ™è¶…æ—¶é€€å‡º
```

**ğŸ“Š éƒ¨ç½²çŠ¶æ€çš„å‡ ç§ç»“æœ**
```
æˆåŠŸæƒ…å†µï¼š
deployment "my-app" successfully rolled out

å¤±è´¥æƒ…å†µï¼š
â€¢ è¶…æ—¶ï¼šdeployment "my-app" exceeded timeout
â€¢ é•œåƒæ‹‰å–å¤±è´¥ï¼špods fail to start
â€¢ å¥åº·æ£€æŸ¥å¤±è´¥ï¼šreadiness probe failed

ä¸‹ä¸€æ­¥æ“ä½œï¼š
â€¢ æˆåŠŸï¼šç»§ç»­åç»­æµç¨‹
â€¢ å¤±è´¥ï¼šæŸ¥çœ‹Podè¯¦æƒ…å’Œæ—¥å¿—
â€¢ è¶…æ—¶ï¼šæ£€æŸ¥èµ„æºé…é¢å’ŒèŠ‚ç‚¹çŠ¶æ€
```

---

## 5. âš¡ ç”Ÿäº§ç¯å¢ƒå¿…å¤‡å‘½ä»¤è¯¦è§£


### 5.1 ç´§æ€¥æƒ…å†µå¤„ç†å‘½ä»¤


**âš ï¸ å¼ºåˆ¶åˆ é™¤ï¼šæœ€åçš„æ‰‹æ®µ**
```bash
# å¼ºåˆ¶åˆ é™¤èµ„æºï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
kubectl delete pod stuck-pod --grace-period=0 --force

# ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼š
â€¢ Podå¡åœ¨TerminatingçŠ¶æ€æ— æ³•åˆ é™¤
â€¢ èŠ‚ç‚¹æ•…éšœå¯¼è‡´Podæ— å“åº”
â€¢ ç´§æ€¥æ•…éšœéœ€è¦ç«‹å³æ¸…ç†èµ„æº

# ä¸ºä»€ä¹ˆè¦è°¨æ…ï¼š
â€¢ è·³è¿‡äº†ä¼˜é›…å…³é—­æµç¨‹
â€¢ å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±
â€¢ å¯èƒ½å½±å“å…¶ä»–ç›¸å…³èµ„æº
```

**ğŸ”§ ç§»é™¤finalizersé˜»å¡**
```bash
# ç§»é™¤finalizerså­—æ®µï¼ˆç´§æ€¥æƒ…å†µä½¿ç”¨ï¼‰
kubectl patch pod stuck-pod --type='json' \
  -p='[{"op":"remove","path":"/spec/finalizers"}]'

# ä»€ä¹ˆæ˜¯finalizersï¼š
â€¢ K8sçš„"åˆ é™¤ä¿æŠ¤"æœºåˆ¶
â€¢ ç¡®ä¿èµ„æºåˆ é™¤å‰å®Œæˆå¿…è¦çš„æ¸…ç†å·¥ä½œ
â€¢ æœ‰æ—¶ä¼šå› ä¸ºæ§åˆ¶å™¨æ•…éšœè€Œå¡ä½
â€¢ æ‰‹åŠ¨ç§»é™¤æ˜¯æœ€åçš„è§£å†³æ–¹æ¡ˆ
```

### 5.2 ç”Ÿäº§ç¯å¢ƒæŸ¥è¯¢ä¼˜åŒ–


**ğŸ“‹ ç»„åˆæŸ¥è¯¢æŠ€å·§**
```bash
# æŸ¥è¯¢ç‰¹å®šæ ‡ç­¾çš„æ‰€æœ‰ç›¸å…³èµ„æº
kubectl get all,cm,secret,ingress,pvc \
  -l app=my-app,env=production \
  --show-labels

# æŸ¥è¯¢ç»“æœåŒ…å«ï¼š
â€¢ å®Œæ•´çš„èµ„æºæ¸…å•
â€¢ æ‰€æœ‰ç›¸å…³çš„é…ç½®å’Œå­˜å‚¨
â€¢ èµ„æºçš„æ ‡ç­¾ä¿¡æ¯
â€¢ ä¾¿äºå…¨å±€çŠ¶æ€æ£€æŸ¥
```

**ğŸ” é«˜çº§è¿‡æ»¤æŸ¥è¯¢**
```bash
# æŸ¥è¯¢é«˜èµ„æºæ¶ˆè€—çš„Pod
kubectl top pods --sort-by=memory | head -10
kubectl top pods --sort-by=cpu | head -10

# æŸ¥è¯¢é‡å¯æ¬¡æ•°å¤šçš„Pod
kubectl get pods --sort-by='.status.containerStatuses[0].restartCount'

# æŸ¥è¯¢ç‰¹å®šæ—¶é—´èŒƒå›´çš„äº‹ä»¶
kubectl get events --field-selector involvedObject.kind=Pod \
  --sort-by=.lastTimestamp
```

### 5.3 é…ç½®å˜æ›´ç®¡ç†


**ğŸ“ é…ç½®æ›´æ–°æœ€ä½³å®è·µ**
```bash
# æ›´æ–°ConfigMapå¹¶è§¦å‘Podé‡å¯
kubectl create configmap app-config --from-file=app.conf --dry-run=client -o yaml | kubectl apply -f -

# æ»šåŠ¨é‡å¯ä»¥åº”ç”¨æ–°é…ç½®
kubectl rollout restart deployment/my-app

# éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
kubectl exec deployment/my-app -- cat /etc/config/app.conf
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»è®°ä½çš„å®‰å…¨æ“ä½œæµç¨‹


**ğŸ”¸ ç”Ÿäº§ç¯å¢ƒå˜æ›´æ ‡å‡†æµç¨‹**
```
ç¬¬1æ­¥ï¼šæœ¬åœ°éªŒè¯
â€¢ åœ¨å¼€å‘ç¯å¢ƒå®Œæ•´æµ‹è¯•
â€¢ ç¡®è®¤é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®
â€¢ éªŒè¯ä¸šåŠ¡åŠŸèƒ½æ­£å¸¸

ç¬¬2æ­¥ï¼šæœåŠ¡ç«¯å¹²è·‘
kubectl apply -f config.yaml --dry-run=server

ç¬¬3æ­¥ï¼šæŸ¥çœ‹å·®å¼‚  
kubectl diff -f config.yaml

ç¬¬4æ­¥ï¼šå°èŒƒå›´æ‰§è¡Œ
kubectl apply -f config.yaml

ç¬¬5æ­¥ï¼šç›‘æ§çŠ¶æ€
kubectl rollout status deployment/app --timeout=600s

ç¬¬6æ­¥ï¼šéªŒè¯ç»“æœ
kubectl get pods -l app=myapp
```

### 6.2 å…³é”®å‘½ä»¤é€ŸæŸ¥è¡¨


| **åœºæ™¯** | **å‘½ä»¤** | **ä½œç”¨** |
|---------|---------|---------|
| **ğŸ” çŠ¶æ€æ£€æŸ¥** | `kubectl get events --sort-by=.lastTimestamp \| tail` | æŸ¥çœ‹æœ€æ–°äº‹ä»¶ |
| **ğŸš¨ é—®é¢˜æ’æŸ¥** | `kubectl get pods --field-selector status.phase!=Running` | æ‰¾å‡ºé—®é¢˜Pod |
| **âš¡ æ‰¹é‡æŸ¥è¯¢** | `kubectl get all,cm,secret,pvc -l app=myapp` | æŸ¥çœ‹åº”ç”¨å…¨éƒ¨èµ„æº |
| **ğŸ›¡ï¸ å®‰å…¨æ‰§è¡Œ** | `kubectl apply -f file --dry-run=server` | æœåŠ¡ç«¯éªŒè¯ |
| **ğŸ“Š å·®å¼‚å¯¹æ¯”** | `kubectl diff -f deployment.yaml` | æŸ¥çœ‹å˜æ›´å†…å®¹ |
| **â±ï¸ è¶…æ—¶æ§åˆ¶** | `kubectl rollout status deploy/app --timeout=600s` | ç›‘æ§éƒ¨ç½²çŠ¶æ€ |

### 6.3 ç”Ÿäº§ç¯å¢ƒé»„é‡‘è§„åˆ™


**âœ… æ°¸è¿œè¦åšçš„äº‹**
```
ğŸ”¸ æ“ä½œå‰å¿…é¡»å¹²è·‘éªŒè¯
ğŸ”¸ æŸ¥çœ‹å·®å¼‚ç¡®è®¤å˜æ›´å†…å®¹  
ğŸ”¸ è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
ğŸ”¸ ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨ç²¾å‡†æ“ä½œ
ğŸ”¸ ç›‘æ§æ‰§è¡Œè¿‡ç¨‹å’Œç»“æœ
ğŸ”¸ å‡†å¤‡å›æ»šæ–¹æ¡ˆ
```

**âŒ æ°¸è¿œä¸è¦åšçš„äº‹**
```
ğŸ”¸ ä¸éªŒè¯ç›´æ¥æ‰§è¡Œå˜æ›´
ğŸ”¸ æ‰¹é‡å¼ºåˆ¶åˆ é™¤èµ„æº
ğŸ”¸ å¿½ç•¥é”™è¯¯ç»§ç»­æ“ä½œ
ğŸ”¸ åœ¨é«˜å³°æœŸè¿›è¡Œå¤§è§„æ¨¡å˜æ›´
ğŸ”¸ ä¸å¤‡ä»½å°±ä¿®æ”¹å…³é”®é…ç½®
ğŸ”¸ å•ç‚¹æ•…éšœæ—¶ç›²ç›®é‡å¯
```

### 6.4 å®æˆ˜è®°å¿†å£è¯€


**ğŸ¯ ç”Ÿäº§ç¯å¢ƒæ“ä½œä¸‰å­—ç»**
```
å…ˆéªŒè¯ï¼Œå†æ‰§è¡Œï¼Œçœ‹å·®å¼‚
è®¾è¶…æ—¶ï¼Œç”¨æ ‡ç­¾ï¼ŒæŸ¥äº‹ä»¶  
é—®é¢˜Podï¼Œå¿«å®šä½ï¼Œå¼ºåˆ æ…ç”¨
é…é¢ç®¡ï¼ŒèŠ‚ç‚¹æŸ¥ï¼ŒçŠ¶æ€æ˜
è®°æ—¥å¿—ï¼Œèƒ½å›æ»šï¼Œä¿ç¨³å®š
```

**ğŸ’¡ æ ¸å¿ƒç†è§£**
- **kubectlä¸åªæ˜¯å‘½ä»¤å·¥å…·ï¼Œæ›´æ˜¯ç”Ÿäº§ç¯å¢ƒçš„"æ‰‹æœ¯åˆ€"**
- **æ¯ä¸ªæ“ä½œéƒ½è¦è€ƒè™‘å¯¹ç”¨æˆ·çš„å½±å“**
- **é¢„é˜²èƒœäºæ²»ç–—ï¼ŒéªŒè¯é‡äºæ‰§è¡Œ**
- **æ ‡å‡†åŒ–æµç¨‹æ˜¯ç¨³å®šæ€§çš„ä¿è¯**

**ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘**
- æ·±å…¥å­¦ä¹ Kubernetesç›‘æ§å’Œå‘Šè­¦
- æŒæ¡é›†ç¾¤å‡çº§å’Œç»´æŠ¤æ“ä½œ
- äº†è§£é«˜å¯ç”¨æ¶æ„è®¾è®¡
- å­¦ä¹ GitOpså’Œè‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹