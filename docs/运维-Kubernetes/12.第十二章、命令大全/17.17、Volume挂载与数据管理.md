---
title: 17ã€VolumeæŒ‚è½½ä¸æ•°æ®ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [VolumeåŸºç¡€æ¦‚å¿µç†è§£](#1-VolumeåŸºç¡€æ¦‚å¿µç†è§£)
2. [æŒ‚è½½çŠ¶æ€æŸ¥çœ‹ä¸æ£€æŸ¥](#2-æŒ‚è½½çŠ¶æ€æŸ¥çœ‹ä¸æ£€æŸ¥)
3. [PVCæŒä¹…å·å£°æ˜ç®¡ç†](#3-PVCæŒä¹…å·å£°æ˜ç®¡ç†)
4. [åŠ¨æ€å·æŒ‚è½½æ“ä½œ](#4-åŠ¨æ€å·æŒ‚è½½æ“ä½œ)
5. [å­˜å‚¨æ•…éšœæ’æŸ¥](#5-å­˜å‚¨æ•…éšœæ’æŸ¥)
6. [å®æˆ˜åº”ç”¨åœºæ™¯](#6-å®æˆ˜åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“¦ VolumeåŸºç¡€æ¦‚å¿µç†è§£


### 1.1 ä»€ä¹ˆæ˜¯Volumeï¼Ÿ


**é€šä¿—ç†è§£**ï¼šVolumeå°±åƒæ˜¯ç»™å®¹å™¨å®‰è£…çš„"ç¡¬ç›˜"æˆ–"æ–‡ä»¶å¤¹"ï¼Œè®©å®¹å™¨èƒ½å¤ŸæŒä¹…ä¿å­˜æ•°æ®ã€‚

```
æ²¡æœ‰Volumeçš„æƒ…å†µï¼š
å®¹å™¨ â†â†’ ä¸´æ—¶å­˜å‚¨
     â†“
   å®¹å™¨åˆ é™¤ï¼Œæ•°æ®ä¸¢å¤±ï¼

æœ‰äº†Volumeçš„æƒ…å†µï¼š
å®¹å™¨ â†â†’ Volumeï¼ˆæŒä¹…å­˜å‚¨ï¼‰
     â†“
   å®¹å™¨åˆ é™¤ï¼Œæ•°æ®ä¾ç„¶ä¿ç•™
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦Volumeï¼Ÿ


**ğŸ”¸ æ ¸å¿ƒé—®é¢˜**
```
å®¹å™¨æœ¬èº«çš„ç‰¹ç‚¹ï¼š
â€¢ å®¹å™¨é‡å¯ â†’ æ•°æ®ä¸¢å¤±
â€¢ å®¹å™¨åˆ é™¤ â†’ æ•°æ®æ¶ˆå¤±
â€¢ å¤šå®¹å™¨æ— æ³•å…±äº«æ•°æ®

Volumeè§£å†³çš„é—®é¢˜ï¼š
â€¢ æ•°æ®æŒä¹…åŒ–ï¼šæ•°æ®ä¸éšå®¹å™¨æ¶ˆå¤±
â€¢ æ•°æ®å…±äº«ï¼šå¤šä¸ªå®¹å™¨å¯ä»¥å…±äº«åŒä¸€ä»½æ•°æ®
â€¢ é…ç½®ç®¡ç†ï¼šå°†é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…
```

### 1.3 Volumeç±»å‹ç®€ä»‹


| Volumeç±»å‹ | **ç”¨é€”è¯´æ˜** | **æ•°æ®æŒä¹…æ€§** | **ä½¿ç”¨åœºæ™¯** |
|-----------|-------------|---------------|-------------|
| `emptyDir` | `ä¸´æ—¶å­˜å‚¨ï¼ŒPodå†…å…±äº«` | `Podåˆ é™¤å³ä¸¢å¤±` | `ä¸´æ—¶æ–‡ä»¶ã€ç¼“å­˜` |
| `hostPath` | `æŒ‚è½½å®¿ä¸»æœºç›®å½•` | `èŠ‚ç‚¹çº§æŒä¹…` | `ç³»ç»Ÿæ—¥å¿—ã€ç›‘æ§` |
| `PVC` | `æŒä¹…å·å£°æ˜` | `é›†ç¾¤çº§æŒä¹…` | `æ•°æ®åº“ã€æ–‡ä»¶å­˜å‚¨` |
| `configMap` | `é…ç½®æ–‡ä»¶æŒ‚è½½` | `é…ç½®æ•°æ®` | `åº”ç”¨é…ç½®æ–‡ä»¶` |
| `secret` | `æ•æ„Ÿæ•°æ®æŒ‚è½½` | `æ•æ„Ÿé…ç½®` | `å¯†ç ã€è¯ä¹¦` |

---

## 2. ğŸ” æŒ‚è½½çŠ¶æ€æŸ¥çœ‹ä¸æ£€æŸ¥


### 2.1 æŸ¥çœ‹Podå†…çš„æŒ‚è½½æƒ…å†µ


**ğŸ”§ è¿›å…¥Podæ£€æŸ¥ç£ç›˜ç©ºé—´**
```bash
# æŸ¥çœ‹Podå†…æ‰€æœ‰æŒ‚è½½ç‚¹çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
kubectl exec -it [pod-name] -- df -h

# å®é™…ç¤ºä¾‹
kubectl exec -it nginx-web-7d4f8c9b5-x2k8p -- df -h
```

**ğŸ“Š è¾“å‡ºç»“æœè§£è¯»**
```
Filesystem      Size  Used Avail Use% Mounted on
overlay         100G   45G   50G  48% /
tmpfs           16G     0   16G   0% /dev/shm
/dev/sda1       50G   10G   38G  21% /data          â† è¿™æ˜¯æŒ‚è½½çš„Volume
tmpfs           16G   12K   16G   1% /var/run/secrets
```

**ğŸ’¡ å…³é”®ç†è§£**ï¼š
- **overlay**ï¼šå®¹å™¨çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ
- **/data**ï¼šæˆ‘ä»¬æŒ‚è½½çš„Volumeç›®å½•
- **tmpfs**ï¼šä¸´æ—¶å†…å­˜æ–‡ä»¶ç³»ç»Ÿ

### 2.2 æ£€æŸ¥æŒ‚è½½ç›®å½•å†…å®¹


**ğŸ”§ æŸ¥çœ‹æŒ‚è½½ç›®å½•è¯¦æƒ…**
```bash
# æ£€æŸ¥æŒ‚è½½ç›®å½•çš„æ–‡ä»¶å’Œæƒé™
kubectl exec -it [pod-name] -- ls -la /path/to/mount

# ç¤ºä¾‹ï¼šæ£€æŸ¥æ•°æ®ç›®å½•
kubectl exec -it mysql-pod -- ls -la /var/lib/mysql
```

**ğŸ“‹ å…¸å‹è¾“å‡ºåˆ†æ**
```
drwxrwxrwx  3 mysql mysql 4096 Sep 19 10:30 .
drwxr-xr-x  1 root  root  4096 Sep 19 10:25 ..
-rw-r-----  1 mysql mysql  56M Sep 19 10:30 mysql.ibd
drwx------  2 mysql mysql 4096 Sep 19 10:30 performance_schema
```

### 2.3 æŸ¥çœ‹Podçš„Volumeé…ç½®ä¿¡æ¯


**ğŸ”§ æŸ¥çœ‹VolumeæŒ‚è½½è¯¦æƒ…**
```bash
# æŸ¥çœ‹Podè¯¦ç»†ä¿¡æ¯ä¸­çš„Volumeéƒ¨åˆ†
kubectl describe pod [pod-name] | grep -A 5 "Volumes\|Mounts"
```

**ğŸ“Š è¾“å‡ºå†…å®¹è§£è¯»**
```
Mounts:
  /data from storage-volume (rw)          â† æŒ‚è½½ç‚¹å’Œæƒé™
  /var/run/secrets from default-token (ro)

Volumes:
  storage-volume:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim)
    ClaimName:  web-storage-claim         â† PVCåç§°
    ReadOnly:   false
```

### 2.4 ç”¨JSONæ ¼å¼æŸ¥çœ‹Volumeé…ç½®


**ğŸ”§ ç²¾ç¡®æŸ¥çœ‹Volumeé…ç½®**
```bash
# æŸ¥çœ‹Podçš„Volumeé…ç½®
kubectl get pod [pod-name] -o jsonpath='{.spec.volumes}'

# æŸ¥çœ‹å®¹å™¨çš„æŒ‚è½½é…ç½®
kubectl get pod [pod-name] -o jsonpath='{.spec.containers[*].volumeMounts}'
```

**ğŸ“‹ JSONè¾“å‡ºç¤ºä¾‹**
```json
[{
  "name": "storage-volume",
  "persistentVolumeClaim": {
    "claimName": "web-storage-claim"
  }
}]
```

---

## 3. ğŸ’¾ PVCæŒä¹…å·å£°æ˜ç®¡ç†


### 3.1 ä»€ä¹ˆæ˜¯PVCï¼Ÿ


**é€šä¿—è§£é‡Š**ï¼šPVCï¼ˆPersistentVolumeClaimï¼‰å°±åƒæ˜¯"ç”³è¯·å­˜å‚¨ç©ºé—´çš„å•å­"ã€‚

```
ç±»æ¯”ç†è§£ï¼š
ç°å®ä¸­ï¼šå¡«å†™ç”³è¯·è¡¨ â†’ ç”³è¯·åŠå…¬å®¤ â†’ åˆ†é…åˆ°å…·ä½“æˆ¿é—´
K8sä¸­ï¼šåˆ›å»ºPVC â†’ ç”³è¯·å­˜å‚¨ â†’ ç»‘å®šåˆ°PVï¼ˆå®é™…å­˜å‚¨ï¼‰

PVCç”³è¯·å•å†…å®¹ï¼š
â€¢ éœ€è¦å¤šå¤§ç©ºé—´ï¼Ÿï¼ˆå¦‚10GBï¼‰
â€¢ è¦ä»€ä¹ˆè®¿é—®æ¨¡å¼ï¼Ÿï¼ˆè¯»å†™/åªè¯»ï¼‰
â€¢ è¦ä»€ä¹ˆæ€§èƒ½ï¼Ÿï¼ˆå¿«é€ŸSSD/æ™®é€šç¡¬ç›˜ï¼‰
```

### 3.2 åˆ›å»ºPVCçš„æ­¥éª¤


**ğŸ”§ PVCé…ç½®æ–‡ä»¶ç¤ºä¾‹**
```yaml
# pvc.yaml - ç”³è¯·10GBå­˜å‚¨ç©ºé—´
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: web-storage-claim
spec:
  accessModes:
    - ReadWriteOnce    # å•èŠ‚ç‚¹è¯»å†™
  resources:
    requests:
      storage: 10Gi    # ç”³è¯·10GBç©ºé—´
  storageClassName: fast-ssd  # å¯é€‰ï¼šæŒ‡å®šå­˜å‚¨ç±»å‹
```

**ğŸ”§ åˆ›å»ºPVC**
```bash
# æ ¹æ®é…ç½®æ–‡ä»¶åˆ›å»ºPVC
kubectl create -f pvc.yaml

# éªŒè¯PVCçŠ¶æ€
kubectl get pvc
```

**ğŸ“Š PVCçŠ¶æ€è¯´æ˜**
```
NAME               STATUS   VOLUME    CAPACITY   ACCESS MODES
web-storage-claim  Bound    pv-001    10Gi       RWO

çŠ¶æ€è¯´æ˜ï¼š
â€¢ Pendingï¼šç­‰å¾…ç»‘å®šåˆ°PV
â€¢ Boundï¼šå·²æˆåŠŸç»‘å®šåˆ°PV
â€¢ Lostï¼šPVä¸å¯ç”¨
```

### 3.3 PVCè®¿é—®æ¨¡å¼è§£é‡Š


| è®¿é—®æ¨¡å¼ | **ç®€ç§°** | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| `ReadWriteOnce` | `RWO` | `å•èŠ‚ç‚¹è¯»å†™` | `æ•°æ®åº“å­˜å‚¨` |
| `ReadOnlyMany` | `ROX` | `å¤šèŠ‚ç‚¹åªè¯»` | `é™æ€ç½‘ç«™å†…å®¹` |
| `ReadWriteMany` | `RWX` | `å¤šèŠ‚ç‚¹è¯»å†™` | `å…±äº«æ–‡ä»¶ç³»ç»Ÿ` |

**ğŸ’¡ é€‰æ‹©å»ºè®®**ï¼š
- **æ•°æ®åº“**ï¼šä½¿ç”¨RWOï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§
- **é…ç½®æ–‡ä»¶**ï¼šä½¿ç”¨ROXï¼Œå¤šä¸ªPodå…±äº«è¯»å–
- **å…±äº«æ–‡ä»¶**ï¼šä½¿ç”¨RWXï¼Œä½†éœ€è¦æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ

---

## 4. ğŸ”„ åŠ¨æ€å·æŒ‚è½½æ“ä½œ


### 4.1 ä¸ºå·²æœ‰éƒ¨ç½²æ·»åŠ PVCå­˜å‚¨


**ğŸ”§ ä½¿ç”¨patchå‘½ä»¤æŒ‚è½½PVC**
```bash
# ç»™deploymentæ·»åŠ PVCå·
kubectl patch deployment [name] -p '{
  "spec": {
    "template": {
      "spec": {
        "volumes": [{
          "name": "storage",
          "persistentVolumeClaim": {
            "claimName": "[pvc-name]"
          }
        }]
      }
    }
  }
}'
```

**ğŸ“‹ å®é™…æ“ä½œç¤ºä¾‹**
```bash
# ç»™nginxéƒ¨ç½²æ·»åŠ å­˜å‚¨
kubectl patch deployment nginx-web -p '{
  "spec": {
    "template": {
      "spec": {
        "volumes": [{
          "name": "web-data",
          "persistentVolumeClaim": {
            "claimName": "web-storage-claim"
          }
        }]
      }
    }
  }
}'
```

### 4.2 ä½¿ç”¨set volumeå‘½ä»¤æ·»åŠ å­˜å‚¨


**ğŸ”§ æ›´ç®€æ´çš„æ·»åŠ æ–¹å¼**
```bash
# ä¸€æ¡å‘½ä»¤æ·»åŠ PVCå·å¹¶æŒ‚è½½
kubectl set volume deployment/[name] \
  --add \
  --name=storage \
  --type=persistentVolumeClaim \
  --claim-name=[pvc-name] \
  --mount-path=/data
```

**ğŸ“‹ å®Œæ•´ç¤ºä¾‹**
```bash
# ç»™webåº”ç”¨æ·»åŠ æ•°æ®å­˜å‚¨
kubectl set volume deployment/nginx-web \
  --add \
  --name=web-storage \
  --type=persistentVolumeClaim \
  --claim-name=web-storage-claim \
  --mount-path=/usr/share/nginx/html
```

**ğŸ’¡ å‚æ•°è¯´æ˜**ï¼š
- **--add**ï¼šæ·»åŠ æ–°çš„å·
- **--name**ï¼šå·çš„åç§°ï¼ˆPodå†…ä½¿ç”¨ï¼‰
- **--claim-name**ï¼šè¦ä½¿ç”¨çš„PVCåç§°
- **--mount-path**ï¼šåœ¨å®¹å™¨å†…çš„æŒ‚è½½è·¯å¾„

### 4.3 éªŒè¯æŒ‚è½½ç»“æœ


**ğŸ”§ æ£€æŸ¥æŒ‚è½½æ˜¯å¦æˆåŠŸ**
```bash
# æŸ¥çœ‹Podé‡å¯åçš„çŠ¶æ€
kubectl get pods

# è¿›å…¥Podæ£€æŸ¥æŒ‚è½½
kubectl exec -it [new-pod-name] -- df -h

# æŸ¥çœ‹æŒ‚è½½ç›®å½•
kubectl exec -it [new-pod-name] -- ls -la /usr/share/nginx/html
```

---

## 5. ğŸš¨ å­˜å‚¨æ•…éšœæ’æŸ¥


### 5.1 æŸ¥çœ‹PVCç›¸å…³äº‹ä»¶


**ğŸ”§ æ£€æŸ¥PVCç»‘å®šé—®é¢˜**
```bash
# æŸ¥çœ‹PVCç›¸å…³çš„ç³»ç»Ÿäº‹ä»¶
kubectl get events --field-selector involvedObject.kind=PersistentVolumeClaim
```

**ğŸ“Š å¸¸è§äº‹ä»¶ç±»å‹**
```
Normal  Provisioning  æ­£åœ¨åˆ›å»ºå­˜å‚¨
Normal  ProvisioningSucceeded  å­˜å‚¨åˆ›å»ºæˆåŠŸ
Warning ProvisioningFailed  å­˜å‚¨åˆ›å»ºå¤±è´¥
Normal  Bound  PVCå·²ç»‘å®šåˆ°PV
```

### 5.2 ç­‰å¾…PVCç»‘å®šå®Œæˆ


**ğŸ”§ ç­‰å¾…ç»‘å®šçŠ¶æ€**
```bash
# ç­‰å¾…PVCç»‘å®šå®Œæˆï¼ˆæœ€å¤šç­‰å¾…5åˆ†é’Ÿï¼‰
kubectl wait --for=condition=Bound pvc/[pvc-name] --timeout=300s
```

**ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹**
```bash
# ç­‰å¾…webå­˜å‚¨ç»‘å®šå®Œæˆ
kubectl wait --for=condition=Bound pvc/web-storage-claim --timeout=300s
```

### 5.3 å­˜å‚¨é—®é¢˜è¯Šæ–­æµç¨‹


```
å­˜å‚¨é—®é¢˜è¯Šæ–­æ­¥éª¤ï¼š

1. æ£€æŸ¥PVCçŠ¶æ€
   kubectl get pvc
   â†“
2. æŸ¥çœ‹PVCè¯¦æƒ…
   kubectl describe pvc [pvc-name]
   â†“
3. æ£€æŸ¥ç›¸å…³äº‹ä»¶
   kubectl get events
   â†“
4. æŸ¥çœ‹PodæŒ‚è½½çŠ¶æ€
   kubectl describe pod [pod-name]
   â†“
5. æ£€æŸ¥å­˜å‚¨ç±»
   kubectl get storageclass
```

### 5.4 å¸¸è§å­˜å‚¨é—®é¢˜åŠè§£å†³


**ğŸ“‹ é—®é¢˜æ’æŸ¥è¡¨**

| é—®é¢˜ç°è±¡ | **å¯èƒ½åŸå› ** | **è§£å†³æ–¹æ³•** |
|---------|-------------|-------------|
| `PVCä¸€ç›´Pending` | `æ²¡æœ‰å¯ç”¨çš„PV` | `æ£€æŸ¥å­˜å‚¨ç±»æˆ–æ‰‹åŠ¨åˆ›å»ºPV` |
| `Podä¸€ç›´ContainerCreating` | `PVCç»‘å®šå¤±è´¥` | `æ£€æŸ¥PVCçŠ¶æ€å’Œæƒé™` |
| `æŒ‚è½½ç›®å½•ä¸ºç©º` | `æŒ‚è½½è·¯å¾„é”™è¯¯` | `æ£€æŸ¥volumeMounté…ç½®` |
| `æƒé™æ‹’ç»` | `æ–‡ä»¶ç³»ç»Ÿæƒé™é—®é¢˜` | `æ£€æŸ¥Podè¿è¡Œç”¨æˆ·å’Œç›®å½•æƒé™` |

---

## 6. ğŸ¯ å®æˆ˜åº”ç”¨åœºæ™¯


### 6.1 æ•°æ®åº“æ•°æ®æŒä¹…åŒ–


**ğŸ“‹ åœºæ™¯æè¿°**ï¼šMySQLæ•°æ®åº“éœ€è¦æŒä¹…åŒ–æ•°æ®ç›®å½•

```bash
# 1. åˆ›å»ºMySQLä¸“ç”¨PVC
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-data-claim
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
EOF

# 2. ç»™MySQL deploymentæ·»åŠ å­˜å‚¨
kubectl set volume deployment/mysql \
  --add \
  --name=mysql-data \
  --type=persistentVolumeClaim \
  --claim-name=mysql-data-claim \
  --mount-path=/var/lib/mysql

# 3. éªŒè¯æ•°æ®æŒä¹…åŒ–
kubectl exec -it mysql-pod -- ls -la /var/lib/mysql
```

### 6.2 Webåº”ç”¨æ–‡ä»¶ä¸Šä¼ å­˜å‚¨


**ğŸ“‹ åœºæ™¯æè¿°**ï¼šWebåº”ç”¨éœ€è¦å­˜å‚¨ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶

```bash
# 1. åˆ›å»ºä¸Šä¼ æ–‡ä»¶å­˜å‚¨PVC
kubectl create -f - <<EOF
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: web-uploads-claim
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 50Gi
EOF

# 2. æŒ‚è½½åˆ°ä¸Šä¼ ç›®å½•
kubectl set volume deployment/web-app \
  --add \
  --name=uploads \
  --type=persistentVolumeClaim \
  --claim-name=web-uploads-claim \
  --mount-path=/app/uploads

# 3. æµ‹è¯•æ–‡ä»¶ä¸Šä¼ å’ŒæŒä¹…æ€§
kubectl exec -it web-app-pod -- touch /app/uploads/test.txt
kubectl delete pod [web-app-pod-name]  # åˆ é™¤Podæµ‹è¯•
kubectl exec -it [new-web-app-pod] -- ls /app/uploads  # æ–‡ä»¶ä¾ç„¶å­˜åœ¨
```

### 6.3 æ—¥å¿—æ–‡ä»¶æŒä¹…åŒ–å­˜å‚¨


**ğŸ“‹ åœºæ™¯æè¿°**ï¼šåº”ç”¨æ—¥å¿—éœ€è¦æŒä¹…åŒ–å­˜å‚¨ä»¥ä¾¿åˆ†æ

```bash
# 1. åˆ›å»ºæ—¥å¿—å­˜å‚¨
kubectl apply -f - <<EOF
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: app-logs-claim
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
EOF

# 2. æŒ‚è½½æ—¥å¿—ç›®å½•
kubectl patch deployment app \
  -p '{"spec":{"template":{"spec":{"volumes":[{"name":"logs","persistentVolumeClaim":{"claimName":"app-logs-claim"}}],"containers":[{"name":"app","volumeMounts":[{"name":"logs","mountPath":"/var/log/app"}]}]}}}}'

# 3. æ£€æŸ¥æ—¥å¿—æŒä¹…åŒ–
kubectl exec -it app-pod -- tail -f /var/log/app/application.log
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Volumeæœ¬è´¨ï¼šç»™å®¹å™¨æä¾›æŒä¹…åŒ–å­˜å‚¨çš„æœºåˆ¶
ğŸ”¸ PVCä½œç”¨ï¼šç”³è¯·å­˜å‚¨èµ„æºçš„"ç”³è¯·å•"
ğŸ”¸ æŒ‚è½½æ¦‚å¿µï¼šå°†å­˜å‚¨å·è¿æ¥åˆ°å®¹å™¨å†…çš„ç‰¹å®šç›®å½•
ğŸ”¸ è®¿é—®æ¨¡å¼ï¼šæ§åˆ¶å­˜å‚¨çš„è¯»å†™æƒé™å’Œå…±äº«æ–¹å¼
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸï¼šPVCç‹¬ç«‹äºPodå­˜åœ¨ï¼Œæ•°æ®æŒä¹…ä¿å­˜
```

### 7.2 å…³é”®å‘½ä»¤è®°å¿†


**ğŸ”¹ æ£€æŸ¥ç±»å‘½ä»¤**
```bash
# æŸ¥çœ‹æŒ‚è½½çŠ¶æ€
kubectl exec -it [pod] -- df -h

# æŸ¥çœ‹æŒ‚è½½é…ç½®
kubectl describe pod [pod] | grep -A 5 "Volumes"

# æŸ¥çœ‹PVCçŠ¶æ€
kubectl get pvc
```

**ğŸ”¹ æ“ä½œç±»å‘½ä»¤**
```bash
# åˆ›å»ºPVC
kubectl create -f pvc.yaml

# æ·»åŠ å­˜å‚¨å·
kubectl set volume deployment/[name] --add --type=persistentVolumeClaim --claim-name=[pvc] --mount-path=[path]

# ç­‰å¾…PVCç»‘å®š
kubectl wait --for=condition=Bound pvc/[pvc-name]
```

### 7.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ”¹ å­˜å‚¨ç±»å‹é€‰æ‹©**
```
ä¸´æ—¶æ•°æ®ï¼šemptyDir
é…ç½®æ–‡ä»¶ï¼šconfigMap
æ•æ„Ÿæ•°æ®ï¼šsecret  
æŒä¹…æ•°æ®ï¼šPVC + PV
ç³»ç»Ÿæ•°æ®ï¼šhostPathï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
```

**ğŸ”¹ è®¿é—®æ¨¡å¼é€‰æ‹©**
```
æ•°æ®åº“ï¼šReadWriteOnce (RWO)
é™æ€æ–‡ä»¶ï¼šReadOnlyMany (ROX)  
å…±äº«æ–‡ä»¶ï¼šReadWriteMany (RWX)
```

**ğŸ”¹ æ•…éšœæ’æŸ¥æ€è·¯**
```
1. æ£€æŸ¥PVCçŠ¶æ€ â†’ kubectl get pvc
2. æŸ¥çœ‹ç›¸å…³äº‹ä»¶ â†’ kubectl get events
3. éªŒè¯PodæŒ‚è½½ â†’ kubectl describe pod
4. æµ‹è¯•å®¹å™¨å†…éƒ¨ â†’ kubectl exec -it pod -- ls /path
```

### 7.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ è®¾è®¡å»ºè®®**
- **å®¹é‡è§„åˆ’**ï¼šé¢„ä¼°å­˜å‚¨éœ€æ±‚ï¼Œç•™æœ‰ä½™é‡
- **å¤‡ä»½ç­–ç•¥**ï¼šé‡è¦æ•°æ®è¦æœ‰å¤‡ä»½æœºåˆ¶
- **æƒé™æ§åˆ¶**ï¼šåˆç†è®¾ç½®æ–‡ä»¶ç³»ç»Ÿæƒé™
- **ç›‘æ§å‘Šè­¦**ï¼šç›‘æ§å­˜å‚¨ä½¿ç”¨ç‡å’Œæ€§èƒ½

**âš ï¸ æ³¨æ„äº‹é¡¹**
- **æ•°æ®å®‰å…¨**ï¼šåˆ é™¤PVCä¼šåˆ é™¤æ•°æ®ï¼Œæ“ä½œéœ€è°¨æ…
- **èŠ‚ç‚¹äº²å’Œ**ï¼šRWOç±»å‹çš„PVCä¼šé™åˆ¶Podè°ƒåº¦
- **å­˜å‚¨ç±»**ï¼šé€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»å‹å’Œæ€§èƒ½ç­‰çº§
- **èµ„æºé™åˆ¶**ï¼šé¿å…åˆ›å»ºè¿‡å¤§çš„å­˜å‚¨ç”³è¯·

**æ ¸å¿ƒè®°å¿†**ï¼š
- Volumeè®©å®¹å™¨æ•°æ®æŒä¹…åŒ–ï¼ŒPVCæ˜¯ç”³è¯·å­˜å‚¨çš„æ–¹å¼
- ç”¨execå‘½ä»¤æ£€æŸ¥æŒ‚è½½ï¼Œç”¨set volumeæ·»åŠ å­˜å‚¨
- æ•°æ®åº“ç”¨RWOï¼Œå…±äº«æ–‡ä»¶ç”¨ROX/RWX
- å­˜å‚¨å‡ºé—®é¢˜å…ˆæŸ¥PVCçŠ¶æ€ï¼Œå†çœ‹äº‹ä»¶æ—¥å¿—