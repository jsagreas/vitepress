---
title: 13ã€ConfigMapé…ç½®ç®¡ç†
---
## ðŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ConfigMap](#1-ä»€ä¹ˆæ˜¯ConfigMap)
2. [ConfigMapçš„ä½œç”¨å’Œæ„ä¹‰](#2-ConfigMapçš„ä½œç”¨å’Œæ„ä¹‰)
3. [åˆ›å»ºConfigMapçš„å„ç§æ–¹å¼](#3-åˆ›å»ºConfigMapçš„å„ç§æ–¹å¼)
4. [æŸ¥çœ‹å’Œç®¡ç†ConfigMap](#4-æŸ¥çœ‹å’Œç®¡ç†ConfigMap)
5. [åœ¨Podä¸­ä½¿ç”¨ConfigMap](#5-åœ¨Podä¸­ä½¿ç”¨ConfigMap)
6. [ConfigMapçš„æ›´æ–°å’Œç»´æŠ¤](#6-ConfigMapçš„æ›´æ–°å’Œç»´æŠ¤)
7. [å®žé™…åº”ç”¨åœºæ™¯](#7-å®žé™…åº”ç”¨åœºæ™¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸŽ¯ ä»€ä¹ˆæ˜¯ConfigMap


### 1.1 é€šä¿—ç†è§£ConfigMap


**ç®€å•ç†è§£**ï¼šConfigMapå°±åƒæ˜¯ä¸€ä¸ª"é…ç½®æ–‡ä»¶å­˜æ”¾ç®±"

```
ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼š
åº”ç”¨ç¨‹åº â† ç›´æŽ¥è¯»å– â† config.json
                    â† database.conf
                    â† app.properties

Kubernetesæ–¹å¼ï¼š
åº”ç”¨ç¨‹åº â† è¯»å– â† ConfigMap â† é…ç½®æ•°æ®
Pod                     â† çŽ¯å¢ƒå˜é‡
                        â† é…ç½®æ–‡ä»¶
```

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **é…ç½®ä¸Žä»£ç åˆ†ç¦»**ï¼šæŠŠé…ç½®ä¿¡æ¯ä»Žåº”ç”¨ä»£ç ä¸­ç‹¬ç«‹å‡ºæ¥
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰é…ç½®ä¿¡æ¯é›†ä¸­å­˜å‚¨ç®¡ç†
- **åŠ¨æ€æ›´æ–°**ï¼šå¯ä»¥åœ¨ä¸é‡æ–°æž„å»ºé•œåƒçš„æƒ…å†µä¸‹æ›´æ–°é…ç½®
- **å¤šçŽ¯å¢ƒå…±äº«**ï¼šåŒä¸€ä»½é…ç½®å¯ä»¥è¢«å¤šä¸ªPodä½¿ç”¨

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ConfigMap


**è§£å†³çš„é—®é¢˜**ï¼š

ðŸ”¸ **ç¡¬ç¼–ç é—®é¢˜**
```bash
# ä¸å¥½çš„åšæ³• - é…ç½®å†™æ­»åœ¨ä»£ç é‡Œ
const dbHost = "mysql-server.example.com"
const dbPort = "3306"

# å¥½çš„åšæ³• - ä»ŽçŽ¯å¢ƒå˜é‡è¯»å–
const dbHost = process.env.DB_HOST
const dbPort = process.env.DB_PORT
```

ðŸ”¸ **çŽ¯å¢ƒå·®å¼‚é—®é¢˜**
- å¼€å‘çŽ¯å¢ƒï¼šæ•°æ®åº“åœ°å€æ˜¯ localhost
- æµ‹è¯•çŽ¯å¢ƒï¼šæ•°æ®åº“åœ°å€æ˜¯ test-db.company.com  
- ç”Ÿäº§çŽ¯å¢ƒï¼šæ•°æ®åº“åœ°å€æ˜¯ prod-db.company.com

ðŸ”¸ **é•œåƒå¤ç”¨é—®é¢˜**
- åŒä¸€ä¸ªé•œåƒè¦åœ¨ä¸åŒçŽ¯å¢ƒè¿è¡Œ
- ä¸æƒ³ä¸ºæ¯ä¸ªçŽ¯å¢ƒæž„å»ºä¸åŒçš„é•œåƒ

---

## 2. ðŸ“‹ ConfigMapçš„ä½œç”¨å’Œæ„ä¹‰


### 2.1 ConfigMapçš„æ ¸å¿ƒä»·å€¼


**ðŸ”¸ é…ç½®ç»Ÿä¸€ç®¡ç†**
```
ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜ï¼š
Webåº”ç”¨Pod    â† config1.json
APIæœåŠ¡Pod    â† config2.properties  
æ•°æ®åº“Pod     â† database.conf
ç®¡ç†å‘˜éœ€è¦ç™»å½•æ¯ä¸ªå®¹å™¨ä¿®æ”¹é…ç½®ï¼Œå¾ˆéº»çƒ¦ï¼

ConfigMapæ–¹å¼ï¼š
    ConfigMap
       â†“
Webåº”ç”¨Pod â† è¯»å–é…ç½®
APIæœåŠ¡Pod â† è¯»å–é…ç½®
æ•°æ®åº“Pod  â† è¯»å–é…ç½®
ç®¡ç†å‘˜åªéœ€è¦ä¿®æ”¹ConfigMapï¼Œæ‰€æœ‰Podè‡ªåŠ¨èŽ·å–æ–°é…ç½®
```

**ðŸ”¸ çŽ¯å¢ƒé€‚é…èƒ½åŠ›**
```bash
# å¼€å‘çŽ¯å¢ƒConfigMap
kubectl create configmap app-config \
  --from-literal=DB_HOST=localhost \
  --from-literal=API_URL=http://dev-api.com

# ç”Ÿäº§çŽ¯å¢ƒConfigMap  
kubectl create configmap app-config \
  --from-literal=DB_HOST=prod-db.company.com \
  --from-literal=API_URL=https://api.company.com
```

### 2.2 ConfigMap vs å…¶ä»–é…ç½®æ–¹å¼


| é…ç½®æ–¹å¼ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **é€‚ç”¨åœºæ™¯** |
|---------|----------|----------|-------------|
| ðŸ”§ **ç¡¬ç¼–ç ** | `ç®€å•ç›´æŽ¥` | `æ— æ³•åŠ¨æ€ä¿®æ”¹ï¼Œéœ€é‡æ–°æž„å»º` | `å›ºå®šä¸å˜çš„é…ç½®` |
| ðŸ“ **é…ç½®æ–‡ä»¶** | `é›†ä¸­ç®¡ç†` | `éœ€è¦æŒ‚è½½å­˜å‚¨ï¼Œå¤æ‚` | `å¤§é‡é…ç½®é¡¹` |
| ðŸŒ **çŽ¯å¢ƒå˜é‡** | `çµæ´»ç®€å•` | `ä¸é€‚åˆå¤æ‚é…ç½®` | `ç®€å•é”®å€¼å¯¹` |
| âš™ï¸ **ConfigMap** | `ç»Ÿä¸€ç®¡ç†ï¼ŒåŠ¨æ€æ›´æ–°` | `å­¦ä¹ æˆæœ¬` | `KubernetesçŽ¯å¢ƒ` |

---

## 3. ðŸ› ï¸ åˆ›å»ºConfigMapçš„å„ç§æ–¹å¼


### 3.1 ä»Žå‘½ä»¤è¡Œå­—é¢é‡åˆ›å»º


**å‘½ä»¤æ ¼å¼**ï¼š
```bash
kubectl create configmap [name] --from-literal=key=value
```

**ðŸ”¸ åˆ›å»ºå•ä¸ªé…ç½®é¡¹**
```bash
kubectl create configmap my-config \
  --from-literal=database_url=mysql://localhost:3306/mydb
```

**ðŸ”¸ åˆ›å»ºå¤šä¸ªé…ç½®é¡¹**
```bash
kubectl create configmap app-settings \
  --from-literal=DB_HOST=mysql-server \
  --from-literal=DB_PORT=3306 \
  --from-literal=DB_NAME=webapp \
  --from-literal=API_KEY=abc123456 \
  --from-literal=DEBUG_MODE=true
```

**ä½¿ç”¨åœºæ™¯**ï¼šé€‚åˆç®€å•çš„é”®å€¼å¯¹é…ç½®ï¼Œæ¯”å¦‚æ•°æ®åº“è¿žæŽ¥ä¿¡æ¯ã€APIåœ°å€ç­‰ã€‚

### 3.2 ä»Žæ–‡ä»¶åˆ›å»ºConfigMap


**ðŸ”¸ å‡†å¤‡é…ç½®æ–‡ä»¶**
```bash
# åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶
cat > app.properties << EOF
database.host=mysql-server
database.port=3306
database.name=webapp
api.timeout=30
log.level=INFO
EOF
```

**ðŸ”¸ ä»Žå•ä¸ªæ–‡ä»¶åˆ›å»º**
```bash
kubectl create configmap app-properties \
  --from-file=app.properties
```

**ðŸ”¸ æŒ‡å®šé”®å**
```bash
kubectl create configmap app-properties \
  --from-file=config=app.properties
```

è¿™æ ·ConfigMapä¸­çš„é”®åå°±æ˜¯`config`ï¼Œè€Œä¸æ˜¯æ–‡ä»¶å`app.properties`ã€‚

### 3.3 ä»Žç›®å½•åˆ›å»ºConfigMap


**ðŸ”¸ å‡†å¤‡é…ç½®ç›®å½•**
```bash
mkdir config-files
cat > config-files/database.conf << EOF
host=mysql-server
port=3306
username=webapp
EOF

cat > config-files/api.conf << EOF
endpoint=https://api.example.com
timeout=30
retry=3
EOF
```

**ðŸ”¸ ä»Žæ•´ä¸ªç›®å½•åˆ›å»º**
```bash
kubectl create configmap app-configs \
  --from-file=config-files/
```

è¿™ä¼šå°†ç›®å½•ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½ä½œä¸ºConfigMapä¸­çš„ä¸€ä¸ªé”®ï¼Œæ–‡ä»¶å†…å®¹ä½œä¸ºå¯¹åº”çš„å€¼ã€‚

### 3.4 ä»ŽçŽ¯å¢ƒæ–‡ä»¶åˆ›å»º


**ðŸ”¸ å‡†å¤‡çŽ¯å¢ƒæ–‡ä»¶**
```bash
cat > app.env << EOF
DB_HOST=mysql-server
DB_PORT=3306
DB_NAME=webapp
API_URL=https://api.example.com
DEBUG=true
EOF
```

**ðŸ”¸ ä»ŽçŽ¯å¢ƒæ–‡ä»¶åˆ›å»º**
```bash
kubectl create configmap env-config \
  --from-env-file=app.env
```

**çŽ¯å¢ƒæ–‡ä»¶ vs æ™®é€šæ–‡ä»¶çš„åŒºåˆ«**ï¼š
- `--from-file`ï¼šæ•´ä¸ªæ–‡ä»¶å†…å®¹ä½œä¸ºä¸€ä¸ªå€¼
- `--from-env-file`ï¼šæ–‡ä»¶ä¸­æ¯ä¸€è¡ŒKEY=VALUEéƒ½æˆä¸ºå•ç‹¬çš„é”®å€¼å¯¹

### 3.5 ä½¿ç”¨YAMLæ–‡ä»¶åˆ›å»º


**ðŸ”¸ ç¼–å†™ConfigMapçš„YAML**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config-yaml
  namespace: default
data:
  # ç®€å•é”®å€¼å¯¹
  database_host: "mysql-server"
  database_port: "3306"
  
  # å¤æ‚é…ç½®æ–‡ä»¶å†…å®¹
  nginx.conf: |
    server {
        listen 80;
        server_name example.com;
        location / {
            proxy_pass http://backend;
        }
    }
    
  app.json: |
    {
      "database": {
        "host": "mysql-server",
        "port": 3306
      },
      "features": {
        "cache": true,
        "logging": true
      }
    }
```

**ðŸ”¸ åº”ç”¨YAMLæ–‡ä»¶**
```bash
kubectl apply -f configmap.yaml
```

---

## 4. ðŸ‘€ æŸ¥çœ‹å’Œç®¡ç†ConfigMap


### 4.1 æŸ¥çœ‹ConfigMapåˆ—è¡¨


**ðŸ”¸ æŸ¥çœ‹æ‰€æœ‰ConfigMap**
```bash
kubectl get configmaps
# æˆ–ç®€å†™
kubectl get cm
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
NAME               DATA   AGE
app-config         5      10m
database-config    3      5m
```

**ðŸ”¸ æŸ¥çœ‹æŒ‡å®šå‘½åç©ºé—´çš„ConfigMap**
```bash
kubectl get configmaps -n kube-system
```

### 4.2 æŸ¥çœ‹ConfigMapè¯¦ç»†ä¿¡æ¯


**ðŸ”¸ æŸ¥çœ‹åŸºæœ¬æè¿°ä¿¡æ¯**
```bash
kubectl describe configmap app-config
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
Name:         app-config
Namespace:    default
Labels:       <none>
Annotations:  <none>

Data
====
database_host:
----
mysql-server

database_port:  
----
3306

api_url:
----
https://api.example.com
```

**ðŸ”¸ æŸ¥çœ‹YAMLæ ¼å¼å®Œæ•´å†…å®¹**
```bash
kubectl get configmap app-config -o yaml
```

**ðŸ”¸ æŸ¥çœ‹JSONæ ¼å¼å†…å®¹**
```bash
kubectl get configmap app-config -o json
```

**ðŸ”¸ åªæŸ¥çœ‹æ•°æ®éƒ¨åˆ†**
```bash
kubectl get configmap app-config -o jsonpath='{.data}'
```

### 4.3 ç¼–è¾‘ConfigMap


**ðŸ”¸ ç›´æŽ¥ç¼–è¾‘ConfigMap**
```bash
kubectl edit configmap app-config
```

è¿™ä¼šæ‰“å¼€é»˜è®¤ç¼–è¾‘å™¨ï¼ˆé€šå¸¸æ˜¯viï¼‰ï¼Œå¯ä»¥ç›´æŽ¥ä¿®æ”¹é…ç½®å†…å®¹ã€‚

**ðŸ”¸ ä½¿ç”¨patchæ›´æ–°ç‰¹å®šé”®å€¼**
```bash
kubectl patch configmap app-config \
  --type='merge' \
  -p='{"data":{"database_port":"5432"}}'
```

---

## 5. ðŸš€ åœ¨Podä¸­ä½¿ç”¨ConfigMap


### 5.1 é€šè¿‡çŽ¯å¢ƒå˜é‡ä½¿ç”¨


**ðŸ”¸ å¯¼å…¥æ‰€æœ‰é”®ä½œä¸ºçŽ¯å¢ƒå˜é‡**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: nginx
    envFrom:
    - configMapRef:
        name: app-config
```

è¿™æ ·ConfigMapä¸­æ‰€æœ‰çš„é”®éƒ½ä¼šæˆä¸ºå®¹å™¨çš„çŽ¯å¢ƒå˜é‡ã€‚

**ðŸ”¸ å¯¼å…¥ç‰¹å®šé”®ä½œä¸ºçŽ¯å¢ƒå˜é‡**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: nginx
    env:
    - name: DATABASE_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database_host
    - name: DATABASE_PORT
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database_port
```

### 5.2 é€šè¿‡æ–‡ä»¶æŒ‚è½½ä½¿ç”¨


**ðŸ”¸ æŒ‚è½½æ•´ä¸ªConfigMapä¸ºæ–‡ä»¶**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: nginx
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: app-config
```

**æŒ‚è½½ç»“æžœ**ï¼š
```
/etc/config/
â”œâ”€â”€ database_host    (å†…å®¹: mysql-server)
â”œâ”€â”€ database_port    (å†…å®¹: 3306)
â””â”€â”€ api_url         (å†…å®¹: https://api.example.com)
```

**ðŸ”¸ æŒ‚è½½ç‰¹å®šé”®ä¸ºæ–‡ä»¶**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: nginx
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  volumes:
  - name: config-volume
    configMap:
      name: app-config
      items:
      - key: database_host
        path: db-host.txt
      - key: nginx.conf
        path: nginx/nginx.conf
```

**æŒ‚è½½ç»“æžœ**ï¼š
```
/etc/config/
â”œâ”€â”€ db-host.txt        (å†…å®¹: mysql-server)
â””â”€â”€ nginx/
    â””â”€â”€ nginx.conf     (å†…å®¹: nginxé…ç½®æ–‡ä»¶å†…å®¹)
```

### 5.3 å®žé™…ä½¿ç”¨ç¤ºä¾‹


**ðŸ”¸ Webåº”ç”¨ä½¿ç”¨ConfigMap**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: webapp-config
data:
  DATABASE_URL: "postgresql://user:pass@db:5432/webapp"
  REDIS_URL: "redis://redis:6379/0"
  API_BASE_URL: "https://api.example.com/v1"
  LOG_LEVEL: "INFO"

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: webapp
spec:
  replicas: 3
  selector:
    matchLabels:
      app: webapp
  template:
    metadata:
      labels:
        app: webapp
    spec:
      containers:
      - name: webapp
        image: myapp:latest
        envFrom:
        - configMapRef:
            name: webapp-config
        ports:
        - containerPort: 8080
```

---

## 6. ðŸ”„ ConfigMapçš„æ›´æ–°å’Œç»´æŠ¤


### 6.1 æ›´æ–°ConfigMapå†…å®¹


**ðŸ”¸ æ›¿æ¢æ•´ä¸ªConfigMap**
```bash
kubectl create configmap app-config \
  --from-literal=database_host=new-mysql-server \
  --from-literal=database_port=3307 \
  --dry-run=client -o yaml | kubectl replace -f -
```

**ðŸ”¸ éƒ¨åˆ†æ›´æ–°ConfigMap**
```bash
kubectl patch configmap app-config \
  --type='merge' \
  -p='{"data":{"database_host":"new-mysql-server"}}'
```

### 6.2 ConfigMapæ›´æ–°å¯¹Podçš„å½±å“


**é‡è¦ç†è§£**ï¼š

ðŸ”¸ **çŽ¯å¢ƒå˜é‡æ–¹å¼**
```
ConfigMapæ›´æ–° â†’ Podä¸­çš„çŽ¯å¢ƒå˜é‡ä¸ä¼šè‡ªåŠ¨æ›´æ–°
éœ€è¦é‡å¯Podæ‰èƒ½èŽ·å–æ–°çš„çŽ¯å¢ƒå˜é‡å€¼
```

ðŸ”¸ **æ–‡ä»¶æŒ‚è½½æ–¹å¼**
```
ConfigMapæ›´æ–° â†’ æŒ‚è½½çš„æ–‡ä»¶ä¼šè‡ªåŠ¨æ›´æ–°
ä½†åº”ç”¨ç¨‹åºéœ€è¦é‡æ–°è¯»å–æ–‡ä»¶æ‰èƒ½èŽ·å–æ–°é…ç½®
```

**ðŸ”¸ å¼ºåˆ¶Podé‡å¯èŽ·å–æ–°é…ç½®**
```bash
kubectl rollout restart deployment webapp
```

### 6.3 ConfigMapç‰ˆæœ¬ç®¡ç†ç­–ç•¥


**ðŸ”¸ å¸¦ç‰ˆæœ¬å·çš„ConfigMapå‘½å**
```bash
kubectl create configmap app-config-v1 \
  --from-literal=database_host=mysql-server

kubectl create configmap app-config-v2 \
  --from-literal=database_host=new-mysql-server
```

**ðŸ”¸ åœ¨Deploymentä¸­å¼•ç”¨ç‰¹å®šç‰ˆæœ¬**
```yaml
spec:
  template:
    spec:
      containers:
      - name: app
        envFrom:
        - configMapRef:
            name: app-config-v2  # æ˜Žç¡®æŒ‡å®šç‰ˆæœ¬
```

---

## 7. ðŸ“Š å®žé™…åº”ç”¨åœºæ™¯


### 7.1 æ•°æ®åº“è¿žæŽ¥é…ç½®


**åœºæ™¯æè¿°**ï¼šWebåº”ç”¨éœ€è¦è¿žæŽ¥ä¸åŒçŽ¯å¢ƒçš„æ•°æ®åº“

```bash
# å¼€å‘çŽ¯å¢ƒConfigMap
kubectl create configmap db-config-dev \
  --from-literal=DB_HOST=dev-mysql.company.com \
  --from-literal=DB_PORT=3306 \
  --from-literal=DB_NAME=webapp_dev \
  --from-literal=DB_USER=dev_user

# ç”Ÿäº§çŽ¯å¢ƒConfigMap
kubectl create configmap db-config-prod \
  --from-literal=DB_HOST=prod-mysql.company.com \
  --from-literal=DB_PORT=3306 \
  --from-literal=DB_NAME=webapp_prod \
  --from-literal=DB_USER=prod_user
```

### 7.2 åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶


**åœºæ™¯æè¿°**ï¼šNginxéœ€è¦è‡ªå®šä¹‰é…ç½®æ–‡ä»¶

**ðŸ”¸ åˆ›å»ºNginxé…ç½®ConfigMap**
```bash
cat > nginx.conf << EOF
server {
    listen 80;
    server_name example.com;
    
    location / {
        proxy_pass http://backend-service:8080;
        proxy_set_header Host \$host;
        proxy_set_header X-Real-IP \$remote_addr;
    }
    
    location /api/ {
        proxy_pass http://api-service:9000/;
    }
}
EOF

kubectl create configmap nginx-config \
  --from-file=nginx.conf
```

**ðŸ”¸ åœ¨Podä¸­ä½¿ç”¨é…ç½®æ–‡ä»¶**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
spec:
  containers:
  - name: nginx
    image: nginx:alpine
    volumeMounts:
    - name: nginx-config-volume
      mountPath: /etc/nginx/conf.d
  volumes:
  - name: nginx-config-volume
    configMap:
      name: nginx-config
```

### 7.3 å¤šçŽ¯å¢ƒé…ç½®ç®¡ç†


**ðŸ”¸ é…ç½®æ–‡ä»¶ç»“æž„**
```
environments/
â”œâ”€â”€ dev/
â”‚   â”œâ”€â”€ database.properties
â”‚   â””â”€â”€ api.properties
â”œâ”€â”€ test/  
â”‚   â”œâ”€â”€ database.properties
â”‚   â””â”€â”€ api.properties
â””â”€â”€ prod/
    â”œâ”€â”€ database.properties
    â””â”€â”€ api.properties
```

**ðŸ”¸ ä¸ºæ¯ä¸ªçŽ¯å¢ƒåˆ›å»ºConfigMap**
```bash
# å¼€å‘çŽ¯å¢ƒ
kubectl create configmap app-config-dev \
  --from-file=environments/dev/ \
  --namespace=dev

# æµ‹è¯•çŽ¯å¢ƒ  
kubectl create configmap app-config-test \
  --from-file=environments/test/ \
  --namespace=test

# ç”Ÿäº§çŽ¯å¢ƒ
kubectl create configmap app-config-prod \
  --from-file=environments/prod/ \
  --namespace=prod
```

---

## 8. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸ”¸ ConfigMapæœ¬è´¨ï¼šé…ç½®æ•°æ®çš„é›†ä¸­å­˜å‚¨å’Œç®¡ç†å·¥å…·
ðŸ”¸ æ ¸å¿ƒä»·å€¼ï¼šé…ç½®ä¸Žä»£ç åˆ†ç¦»ï¼Œæ”¯æŒå¤šçŽ¯å¢ƒéƒ¨ç½²
ðŸ”¸ åˆ›å»ºæ–¹å¼ï¼šå­—é¢é‡ã€æ–‡ä»¶ã€ç›®å½•ã€çŽ¯å¢ƒæ–‡ä»¶å››ç§æ–¹å¼
ðŸ”¸ ä½¿ç”¨æ–¹å¼ï¼šçŽ¯å¢ƒå˜é‡æ³¨å…¥ã€æ–‡ä»¶æŒ‚è½½ä¸¤ç§æ–¹å¼
ðŸ”¸ æ›´æ–°æœºåˆ¶ï¼šæ‰‹åŠ¨æ›´æ–°ConfigMapï¼ŒPodéœ€è¦é‡å¯èŽ·å–æ–°é…ç½®
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ ConfigMap vs çŽ¯å¢ƒå˜é‡**
```
ç›´æŽ¥çŽ¯å¢ƒå˜é‡ï¼š
- å†™åœ¨Podå®šä¹‰ä¸­
- ä¿®æ”¹éœ€è¦é‡æ–°éƒ¨ç½²

ConfigMapçŽ¯å¢ƒå˜é‡ï¼š
- é›†ä¸­ç®¡ç†
- å¯ä»¥è·¨Podå…±äº«
- ç»Ÿä¸€ä¿®æ”¹é…ç½®
```

**ðŸ”¹ æ›´æ–°ç­–ç•¥é€‰æ‹©**
```
å¼€å‘æµ‹è¯•çŽ¯å¢ƒï¼š
- ç›´æŽ¥æ›´æ–°ConfigMap
- é‡å¯PodèŽ·å–æ–°é…ç½®

ç”Ÿäº§çŽ¯å¢ƒï¼š  
- ä½¿ç”¨ç‰ˆæœ¬åŒ–ConfigMap
- é€šè¿‡Deploymentæ»šåŠ¨æ›´æ–°
- ç¡®ä¿é…ç½®å˜æ›´å¯è¿½æº¯
```

### 8.3 å®žé™…åº”ç”¨ä»·å€¼


- **çŽ¯å¢ƒç®¡ç†**ï¼šåŒä¸€åº”ç”¨åœ¨ä¸åŒçŽ¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
- **é…ç½®çƒ­æ›´æ–°**ï¼šä¿®æ”¹ConfigMapåŽPodè‡ªåŠ¨èŽ·å–æ–°é…ç½®
- **å›¢é˜Ÿåä½œ**ï¼šå¼€å‘äººå‘˜å’Œè¿ç»´äººå‘˜åˆ†å·¥æ˜Žç¡®
- **å®‰å…¨éš”ç¦»**ï¼šæ•æ„Ÿé…ç½®å¯ä»¥ç”¨Secretï¼Œæ™®é€šé…ç½®ç”¨ConfigMap

### 8.4 æœ€ä½³å®žè·µ


**ðŸ”§ å‘½åè§„èŒƒ**
```bash
# æŽ¨èçš„å‘½åæ–¹å¼
app-config-dev        # åº”ç”¨-é…ç½®ç±»åž‹-çŽ¯å¢ƒ
database-config-prod  # ç»„ä»¶-é…ç½®ç±»åž‹-çŽ¯å¢ƒ
nginx-config-v1       # ç»„ä»¶-é…ç½®ç±»åž‹-ç‰ˆæœ¬
```

**ðŸ”§ ä½¿ç”¨å»ºè®®**
- ç®€å•é…ç½®ç”¨çŽ¯å¢ƒå˜é‡æ–¹å¼
- å¤æ‚é…ç½®æ–‡ä»¶ç”¨æ–‡ä»¶æŒ‚è½½æ–¹å¼
- æ•æ„Ÿä¿¡æ¯ä¸è¦æ”¾åœ¨ConfigMapä¸­
- ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨ç‰ˆæœ¬åŒ–ç®¡ç†

**æ ¸å¿ƒè®°å¿†**ï¼š
- ConfigMapæ˜¯é…ç½®ç®¡ç†çš„"ä¸­å¤®ä»“åº“"
- åˆ›å»ºçµæ´»å¤šæ ·ï¼Œä½¿ç”¨æ–¹ä¾¿å¿«æ·
- é…ç½®å’Œä»£ç åˆ†ç¦»ï¼Œå¤šçŽ¯å¢ƒè½»æ¾åˆ‡æ¢
- æŽŒæ¡å¢žåˆ æ”¹æŸ¥ï¼Œåº”ç”¨åœºæ™¯è¦æ¸…æ¥š