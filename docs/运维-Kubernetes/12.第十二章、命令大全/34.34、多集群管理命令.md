---
title: 34ã€å¤šé›†ç¾¤ç®¡ç†å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [å¤šé›†ç¾¤ç®¡ç†åŸºç¡€æ¦‚å¿µ](#1-å¤šé›†ç¾¤ç®¡ç†åŸºç¡€æ¦‚å¿µ)
2. [é›†ç¾¤é…ç½®ç®¡ç†å‘½ä»¤](#2-é›†ç¾¤é…ç½®ç®¡ç†å‘½ä»¤)
3. [ç”¨æˆ·å‡­è¯ç®¡ç†å‘½ä»¤](#3-ç”¨æˆ·å‡­è¯ç®¡ç†å‘½ä»¤)
4. [ä¸Šä¸‹æ–‡ç®¡ç†å‘½ä»¤](#4-ä¸Šä¸‹æ–‡ç®¡ç†å‘½ä»¤)
5. [é…ç½®æ–‡ä»¶æ“ä½œå‘½ä»¤](#5-é…ç½®æ–‡ä»¶æ“ä½œå‘½ä»¤)
6. [å®é™…åº”ç”¨åœºæ™¯æ¡ˆä¾‹](#6-å®é™…åº”ç”¨åœºæ™¯æ¡ˆä¾‹)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ å¤šé›†ç¾¤ç®¡ç†åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¤šé›†ç¾¤ç®¡ç†


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä½ æ˜¯ä¸€ä¸ªç®¡ç†å¤šä¸ªåˆ†å…¬å¸çš„æ€»ç»ç†ï¼Œæ¯ä¸ªåˆ†å…¬å¸å°±åƒä¸€ä¸ªKubernetesé›†ç¾¤ã€‚ä½ éœ€è¦åœ¨ä¸åŒçš„åˆ†å…¬å¸ä¹‹é—´åˆ‡æ¢å·¥ä½œï¼ŒæŸ¥çœ‹å„è‡ªçš„æƒ…å†µï¼Œè¿™å°±æ˜¯å¤šé›†ç¾¤ç®¡ç†ã€‚

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
```
å¤šé›†ç¾¤ç¯å¢ƒå°±åƒç®¡ç†å¤šä¸ª"ç‹å›½"ï¼š
ğŸ° å¼€å‘é›†ç¾¤ - æµ‹è¯•æ–°åŠŸèƒ½çš„å®éªŒå®¤
ğŸ° æµ‹è¯•é›†ç¾¤ - éªŒè¯åŠŸèƒ½çš„æ£€éªŒåœº
ğŸ° ç”Ÿäº§é›†ç¾¤ - æœåŠ¡ç”¨æˆ·çš„æ­£å¼ç¯å¢ƒ
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¤šé›†ç¾¤ç®¡ç†


**ç°å®åœºæ™¯å¯¹æ¯”**ï¼š
```
å•é›†ç¾¤ç¯å¢ƒï¼ˆå°±åƒåªæœ‰ä¸€é—´åŠå…¬å®¤ï¼‰ï¼š
âŒ å¼€å‘å’Œç”Ÿäº§æ··åœ¨ä¸€èµ·ï¼Œå®¹æ˜“å‡ºé”™
âŒ èµ„æºç«äº‰ï¼Œå½±å“æ€§èƒ½
âŒ æ•…éšœå½±å“èŒƒå›´å¤§

å¤šé›†ç¾¤ç¯å¢ƒï¼ˆå°±åƒæœ‰å¤šé—´ä¸“ç”¨åŠå…¬å®¤ï¼‰ï¼š
âœ… ç¯å¢ƒéš”ç¦»ï¼Œå„å¸å…¶èŒ
âœ… èµ„æºç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
âœ… æ•…éšœéš”ç¦»ï¼Œé£é™©å¯æ§
```

### 1.3 Kubernetesé…ç½®æ–‡ä»¶ç»“æ„


**é…ç½®æ–‡ä»¶å°±åƒé€šè®¯å½•**ï¼š
```yaml
# ~/.kube/config - å°±åƒä½ çš„è”ç³»äººåˆ—è¡¨
apiVersion: v1
kind: Config

# é›†ç¾¤ä¿¡æ¯ - å„ä¸ªå…¬å¸çš„åœ°å€
clusters:
- name: dev-cluster
  cluster:
    server: https://dev-k8s.company.com
    
# ç”¨æˆ·ä¿¡æ¯ - ä½ åœ¨å„å…¬å¸çš„èº«ä»½è¯
users:
- name: dev-user
  user:
    token: eyJhbGciOiJSUzI1NiIs...

# ä¸Šä¸‹æ–‡ - å“ªä¸ªèº«ä»½è®¿é—®å“ªä¸ªå…¬å¸
contexts:
- name: dev-context
  context:
    cluster: dev-cluster
    user: dev-user
```

---

## 2. ğŸ¢ é›†ç¾¤é…ç½®ç®¡ç†å‘½ä»¤


### 2.1 æŸ¥çœ‹é›†ç¾¤åˆ—è¡¨


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config get-clusters`

**å®é™…ç”¨é€”**ï¼šå°±åƒæŸ¥çœ‹ä½ çš„é€šè®¯å½•é‡Œæœ‰å“ªäº›å…¬å¸

```bash
# æŸ¥çœ‹æ‰€æœ‰é…ç½®çš„é›†ç¾¤
kubectl config get-clusters

# è¾“å‡ºç¤ºä¾‹ï¼š
NAME
dev-cluster
staging-cluster
prod-cluster
```

**è¾“å‡ºè§£è¯»**ï¼š
- **dev-cluster** - å¼€å‘ç¯å¢ƒé›†ç¾¤
- **staging-cluster** - é¢„å‘å¸ƒç¯å¢ƒé›†ç¾¤  
- **prod-cluster** - ç”Ÿäº§ç¯å¢ƒé›†ç¾¤

### 2.2 æ·»åŠ æ–°é›†ç¾¤


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config set-cluster`

**é€šä¿—ç†è§£**ï¼šå°±åƒåœ¨é€šè®¯å½•é‡Œæ·»åŠ ä¸€ä¸ªæ–°å…¬å¸çš„è”ç³»æ–¹å¼

```bash
# åŸºæœ¬è¯­æ³•
kubectl config set-cluster [é›†ç¾¤åç§°] --server=[æœåŠ¡å™¨åœ°å€]

# å®é™…ç¤ºä¾‹ï¼šæ·»åŠ ä¸€ä¸ªæµ‹è¯•é›†ç¾¤
kubectl config set-cluster test-cluster \
    --server=https://test-k8s.company.com:6443 \
    --certificate-authority=/path/to/ca.crt
```

**å‚æ•°è¯¦è§£**ï¼š
- `--server` - é›†ç¾¤çš„APIæœåŠ¡å™¨åœ°å€ï¼ˆå¿…éœ€ï¼‰
- `--certificate-authority` - CAè¯ä¹¦æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
- `--insecure-skip-tls-verify` - è·³è¿‡TLSéªŒè¯ï¼ˆä¸æ¨èç”Ÿäº§ä½¿ç”¨ï¼‰

### 2.3 åˆ é™¤é›†ç¾¤é…ç½®


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config delete-cluster`

**å®é™…åº”ç”¨**ï¼šæ¸…ç†ä¸å†ä½¿ç”¨çš„é›†ç¾¤é…ç½®

```bash
# åˆ é™¤æŒ‡å®šé›†ç¾¤
kubectl config delete-cluster old-cluster

# ç¡®è®¤åˆ é™¤ç»“æœ
kubectl config get-clusters
```

> **ğŸ’¡ é‡è¦æç¤º**ï¼šåˆ é™¤é›†ç¾¤é…ç½®åªæ˜¯ä»æœ¬åœ°é…ç½®æ–‡ä»¶ä¸­ç§»é™¤ï¼Œä¸ä¼šå½±å“å®é™…çš„é›†ç¾¤è¿è¡Œ

---

## 3. ğŸ‘¤ ç”¨æˆ·å‡­è¯ç®¡ç†å‘½ä»¤


### 3.1 è®¾ç½®ç”¨æˆ·å‡­è¯


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config set-credentials`

**é€šä¿—ç†è§£**ï¼šå°±åƒç»™è‡ªå·±åœ¨ä¸åŒå…¬å¸åŠç†ä¸åŒçš„å·¥ä½œè¯

### 3.1.1 ä½¿ç”¨Tokenè®¤è¯


```bash
# è®¾ç½®Tokenè®¤è¯ç”¨æˆ·
kubectl config set-credentials dev-user \
    --token=eyJhbGciOiJSUzI1NiIsImtpZCI6IkJCT...
```

### 3.1.2 ä½¿ç”¨è¯ä¹¦è®¤è¯


```bash
# è®¾ç½®è¯ä¹¦è®¤è¯ç”¨æˆ·
kubectl config set-credentials prod-user \
    --client-certificate=/path/to/client.crt \
    --client-key=/path/to/client.key
```

### 3.1.3 ä½¿ç”¨ç”¨æˆ·åå¯†ç è®¤è¯


```bash
# è®¾ç½®åŸºæœ¬è®¤è¯ç”¨æˆ·ï¼ˆä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰
kubectl config set-credentials basic-user \
    --username=admin \
    --password=secret123
```

### 3.2 æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨


```bash
# æŸ¥çœ‹é…ç½®çš„æ‰€æœ‰ç”¨æˆ·
kubectl config view -o jsonpath='{.users[*].name}'
```

### 3.3 åˆ é™¤ç”¨æˆ·å‡­è¯


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config delete-user`

```bash
# åˆ é™¤æŒ‡å®šç”¨æˆ·
kubectl config delete-user old-user

# éªŒè¯åˆ é™¤ç»“æœ
kubectl config view --minify
```

---

## 4. ğŸ”„ ä¸Šä¸‹æ–‡ç®¡ç†å‘½ä»¤


### 4.1 ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰


**ç”Ÿæ´»ç±»æ¯”**ï¼šä¸Šä¸‹æ–‡å°±åƒä½ çš„"å·¥ä½œæ¨¡å¼"
- åœ¨å®¶æ—¶ï¼šä½¿ç”¨ä¸ªäººç”µè„‘ï¼Œè®¿é—®ä¸ªäººæ–‡ä»¶
- åœ¨å…¬å¸æ—¶ï¼šä½¿ç”¨å…¬å¸ç”µè„‘ï¼Œè®¿é—®å…¬å¸ç³»ç»Ÿ
- åœ¨å®¢æˆ·ç°åœºï¼šä½¿ç”¨å®¢æˆ·æä¾›çš„è®¾å¤‡ï¼Œè®¿é—®å®¢æˆ·ç³»ç»Ÿ

**æŠ€æœ¯å®šä¹‰**ï¼šä¸Šä¸‹æ–‡å®šä¹‰äº†"ä»¥ä»€ä¹ˆèº«ä»½è®¿é—®å“ªä¸ªé›†ç¾¤"

### 4.2 æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config current-context`

```bash
# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ä¸Šä¸‹æ–‡
kubectl config current-context

# è¾“å‡ºç¤ºä¾‹ï¼š
dev-context
```

### 4.3 åˆ‡æ¢ä¸Šä¸‹æ–‡


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config use-context`

**å®é™…åœºæ™¯**ï¼šä»å¼€å‘ç¯å¢ƒåˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ

```bash
# åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
kubectl config use-context prod-context

# éªŒè¯åˆ‡æ¢ç»“æœ
kubectl config current-context
kubectl get nodes  # æŸ¥çœ‹å½“å‰é›†ç¾¤çš„èŠ‚ç‚¹
```

### 4.4 é‡å‘½åä¸Šä¸‹æ–‡


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config rename-context`

**ä½¿ç”¨åœºæ™¯**ï¼šè®©ä¸Šä¸‹æ–‡åç§°æ›´æœ‰æ„ä¹‰

```bash
# å°†é»˜è®¤ä¸Šä¸‹æ–‡é‡å‘½åä¸ºæ›´æ˜ç¡®çš„åç§°
kubectl config rename-context kubernetes-admin@kubernetes dev-admin@dev-cluster

# è¯­æ³•ï¼šæ—§åç§° æ–°åç§°
kubectl config rename-context [old-name] [new-name]
```

### 4.5 åˆ›å»ºæ–°ä¸Šä¸‹æ–‡


```bash
# åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡
kubectl config set-context staging-context \
    --cluster=staging-cluster \
    --user=staging-user \
    --namespace=staging

# ç«‹å³åˆ‡æ¢åˆ°æ–°ä¸Šä¸‹æ–‡
kubectl config use-context staging-context
```

---

## 5. ğŸ“„ é…ç½®æ–‡ä»¶æ“ä½œå‘½ä»¤


### 5.1 æŸ¥çœ‹å®Œæ•´é…ç½®


**æ ¸å¿ƒå‘½ä»¤**ï¼š`kubectl config view`

### 5.1.1 æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡é…ç½®


```bash
# åªæ˜¾ç¤ºå½“å‰ä¸Šä¸‹æ–‡çš„é…ç½®ï¼ˆç®€åŒ–æ˜¾ç¤ºï¼‰
kubectl config view --minify
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```yaml
apiVersion: v1
clusters:
- cluster:
    server: https://dev-k8s.company.com:6443
  name: dev-cluster
contexts:
- context:
    cluster: dev-cluster
    user: dev-user
  name: dev-context
current-context: dev-context
users:
- name: dev-user
  user:
    token: REDACTED
```

### 5.1.2 æŸ¥çœ‹å®Œæ•´é…ç½®ï¼ˆæ‰å¹³åŒ–ï¼‰


```bash
# å°†æ‰€æœ‰é…ç½®æ‰å¹³åŒ–æ˜¾ç¤ºï¼ˆåŒ…å«å®Œæ•´çš„è¯ä¹¦å†…å®¹ï¼‰
kubectl config view --flatten
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¤‡ä»½é…ç½®æ–‡ä»¶
- è¿ç§»åˆ°å…¶ä»–æœºå™¨
- æ•…éšœæ’æŸ¥

### 5.2 ä½¿ç”¨ç‰¹å®šé…ç½®æ–‡ä»¶


**æ ¸å¿ƒå‘½ä»¤**ï¼š`--kubeconfig`å‚æ•°

**å®é™…åº”ç”¨**ï¼šä¸ºä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶

```bash
# ä½¿ç”¨ç‰¹å®šçš„é…ç½®æ–‡ä»¶æ‰§è¡Œå‘½ä»¤
kubectl --kubeconfig=/path/to/custom-config get pods

# ä¸ºç‰¹å®šé¡¹ç›®è®¾ç½®ç‹¬ç«‹é…ç½®
kubectl --kubeconfig=./project-a-config.yaml get services
kubectl --kubeconfig=./project-b-config.yaml get deployments
```

### 5.3 åˆå¹¶é…ç½®æ–‡ä»¶


```bash
# è®¾ç½®KUBECONFIGç¯å¢ƒå˜é‡åˆå¹¶å¤šä¸ªé…ç½®æ–‡ä»¶
export KUBECONFIG=~/.kube/config:./project-config:./temp-config

# æŸ¥çœ‹åˆå¹¶åçš„é…ç½®
kubectl config view
```

---

## 6. ğŸ› ï¸ å®é™…åº”ç”¨åœºæ™¯æ¡ˆä¾‹


### 6.1 åœºæ™¯ä¸€ï¼šDevOpså·¥ç¨‹å¸ˆçš„æ—¥å¸¸å·¥ä½œæµ


**å·¥ä½œåœºæ™¯**ï¼šåœ¨å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé—´å¿«é€Ÿåˆ‡æ¢

```bash
# æ—©ä¸Šï¼šæ£€æŸ¥å¼€å‘ç¯å¢ƒ
kubectl config use-context dev-context
kubectl get pods --all-namespaces

# ä¸­åˆï¼šéƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
kubectl config use-context test-context
kubectl apply -f ./app-deployment.yaml

# ä¸‹åˆï¼šæ£€æŸ¥ç”Ÿäº§ç¯å¢ƒçŠ¶æ€
kubectl config use-context prod-context
kubectl get nodes
kubectl top pods

# å¿«é€Ÿåˆ‡æ¢æ£€æŸ¥æ³•
for ctx in dev-context test-context prod-context; do
    echo "=== æ£€æŸ¥ $ctx ==="
    kubectl config use-context $ctx
    kubectl get pods -o wide | head -5
done
```

### 6.2 åœºæ™¯äºŒï¼šå¤šå®¢æˆ·é¡¹ç›®ç®¡ç†


**ä¸šåŠ¡éœ€æ±‚**ï¼šä¸ºä¸åŒå®¢æˆ·ç»´æŠ¤ç‹¬ç«‹çš„Kubernetesé›†ç¾¤

```bash
# ä¸ºå®¢æˆ·Aè®¾ç½®ä¸“ç”¨é…ç½®
kubectl config set-cluster client-a-cluster \
    --server=https://k8s.client-a.com:6443 \
    --certificate-authority=./ca-client-a.crt

kubectl config set-credentials client-a-admin \
    --client-certificate=./client-a.crt \
    --client-key=./client-a.key

kubectl config set-context client-a-context \
    --cluster=client-a-cluster \
    --user=client-a-admin

# ä¸ºå®¢æˆ·Bè®¾ç½®ä¸“ç”¨é…ç½®
kubectl config set-cluster client-b-cluster \
    --server=https://k8s.client-b.com:6443 \
    --certificate-authority=./ca-client-b.crt

# å¿«é€Ÿé¡¹ç›®åˆ‡æ¢å‡½æ•°
switch_client() {
    local client=$1
    kubectl config use-context client-${client}-context
    echo "å·²åˆ‡æ¢åˆ°å®¢æˆ· ${client} çš„é›†ç¾¤"
    kubectl cluster-info
}

# ä½¿ç”¨ç¤ºä¾‹
switch_client a  # åˆ‡æ¢åˆ°å®¢æˆ·A
switch_client b  # åˆ‡æ¢åˆ°å®¢æˆ·B
```

### 6.3 åœºæ™¯ä¸‰ï¼šé›†ç¾¤å¥åº·æ£€æŸ¥è‡ªåŠ¨åŒ–


**éœ€æ±‚åœºæ™¯**ï¼šå®šæœŸæ£€æŸ¥æ‰€æœ‰é›†ç¾¤çš„å¥åº·çŠ¶æ€

```bash
#!/bin/bash
# é›†ç¾¤å¥åº·æ£€æŸ¥è„šæœ¬

clusters=(
    "dev-context:å¼€å‘ç¯å¢ƒ"
    "test-context:æµ‹è¯•ç¯å¢ƒ" 
    "prod-context:ç”Ÿäº§ç¯å¢ƒ"
)

echo "ğŸ” å¼€å§‹é›†ç¾¤å¥åº·æ£€æŸ¥..."
for cluster_info in "${clusters[@]}"; do
    context=$(echo $cluster_info | cut -d: -f1)
    name=$(echo $cluster_info | cut -d: -f2)
    
    echo "ğŸ“Š æ£€æŸ¥ $name ($context)"
    kubectl config use-context $context
    
    # æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€
    ready_nodes=$(kubectl get nodes | grep -c Ready)
    total_nodes=$(kubectl get nodes --no-headers | wc -l)
    
    # æ£€æŸ¥ç³»ç»ŸPodçŠ¶æ€
    system_pods=$(kubectl get pods -n kube-system | grep -c Running)
    
    echo "  âœ… èŠ‚ç‚¹çŠ¶æ€: $ready_nodes/$total_nodes Ready"
    echo "  âœ… ç³»ç»ŸPod: $system_pods Running"
    echo ""
done
```

---

## 7. âš ï¸ å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ


### 7.1 æƒé™é—®é¢˜æ’æŸ¥


**é—®é¢˜ç°è±¡**ï¼šå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œæç¤ºæƒé™ä¸è¶³

```bash
# æ£€æŸ¥å½“å‰ç”¨æˆ·æƒé™
kubectl auth can-i get pods
kubectl auth can-i create deployments
kubectl auth can-i delete services

# æ£€æŸ¥åœ¨ç‰¹å®šå‘½åç©ºé—´çš„æƒé™
kubectl auth can-i get pods --namespace=production
```

### 7.2 é…ç½®æ–‡ä»¶å¤‡ä»½ä¸æ¢å¤


**æœ€ä½³å®è·µ**ï¼šå®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶

```bash
# å¤‡ä»½å½“å‰é…ç½®
cp ~/.kube/config ~/.kube/config.backup.$(date +%Y%m%d)

# æ¢å¤é…ç½®æ–‡ä»¶
cp ~/.kube/config.backup.20240119 ~/.kube/config

# éªŒè¯æ¢å¤ç»“æœ
kubectl config view --minify
```

### 7.3 å®‰å…¨æ³¨æ„äº‹é¡¹


**ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ**ï¼š

| å®‰å…¨æªæ–½ | **è¯´æ˜** | **å®æ–½æ–¹æ³•** |
|---------|----------|-------------|
| **æœ€å°æƒé™åŸåˆ™** | `åªç»™å¿…éœ€çš„æƒé™` | `ä½¿ç”¨RBACç²¾ç¡®æ§åˆ¶æƒé™` |
| **å®šæœŸè½®æ¢å‡­è¯** | `å®šæœŸæ›´æ–°Tokenå’Œè¯ä¹¦` | `è®¾ç½®è‡ªåŠ¨åŒ–è½®æ¢æµç¨‹` |
| **ç”Ÿäº§ç¯å¢ƒéš”ç¦»** | `ç”Ÿäº§é…ç½®å•ç‹¬å­˜æ”¾` | `ä½¿ç”¨ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶` |
| **å®¡è®¡æ—¥å¿—** | `è®°å½•æ‰€æœ‰æ“ä½œ` | `å¯ç”¨é›†ç¾¤å®¡è®¡åŠŸèƒ½` |

---

## 8. ğŸ¯ å®ç”¨æŠ€å·§ä¸å¿«æ·å‘½ä»¤


### 8.1 å¿«é€Ÿä¸Šä¸‹æ–‡åˆ‡æ¢


```bash
# åˆ›å»ºåˆ‡æ¢å‡½æ•°ï¼ˆæ·»åŠ åˆ° ~/.bashrcï¼‰
kctx() {
    kubectl config use-context $1
    kubectl config current-context
    kubectl get nodes --no-headers | wc -l | xargs echo "èŠ‚ç‚¹æ•°é‡:"
}

# ä½¿ç”¨ç¤ºä¾‹
kctx dev-context    # å¿«é€Ÿåˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒ
kctx prod-context   # å¿«é€Ÿåˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
```

### 8.2 å¤šé›†ç¾¤çŠ¶æ€ç›‘æ§


```bash
# ä¸€é”®æ£€æŸ¥æ‰€æœ‰é›†ç¾¤çŠ¶æ€
check_all_clusters() {
    for ctx in $(kubectl config get-contexts -o name); do
        echo "ğŸ” æ£€æŸ¥é›†ç¾¤: $ctx"
        kubectl config use-context $ctx 2>/dev/null
        kubectl get nodes --no-headers 2>/dev/null | \
            awk '{print "  èŠ‚ç‚¹ " $1 ": " $2}' || echo "  âŒ é›†ç¾¤ä¸å¯è¾¾"
        echo ""
    done
}
```

### 8.3 é…ç½®æ–‡ä»¶æ¨¡æ¿


**æ ‡å‡†é…ç½®æ¨¡æ¿**ï¼š
```yaml
apiVersion: v1
kind: Config
preferences: {}

clusters:
- name: my-cluster
  cluster:
    server: https://my-k8s-cluster.com:6443
    certificate-authority-data: LS0tLS1CRUdJTi...

users:  
- name: my-user
  user:
    client-certificate-data: LS0tLS1CRUdJTi...
    client-key-data: LS0tLS1CRUdJTi...

contexts:
- name: my-context
  context:
    cluster: my-cluster
    user: my-user
    namespace: default

current-context: my-context
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¤šé›†ç¾¤ç®¡ç†ï¼šåƒç®¡ç†å¤šä¸ªåˆ†å…¬å¸ï¼Œéœ€è¦åœ¨ä¸åŒç¯å¢ƒé—´åˆ‡æ¢
ğŸ”¸ é…ç½®æ–‡ä»¶ç»“æ„ï¼šåŒ…å«é›†ç¾¤ã€ç”¨æˆ·ã€ä¸Šä¸‹æ–‡ä¸‰å¤§è¦ç´   
ğŸ”¸ ä¸Šä¸‹æ–‡æ¦‚å¿µï¼šå®šä¹‰"ä»¥ä»€ä¹ˆèº«ä»½è®¿é—®å“ªä¸ªé›†ç¾¤"
ğŸ”¸ æƒé™ç®¡ç†ï¼šä¸åŒç¯å¢ƒéœ€è¦ä¸åŒçš„è®¿é—®æƒé™
ğŸ”¸ å®‰å…¨å®è·µï¼šæœ€å°æƒé™ã€å®šæœŸè½®æ¢ã€ç¯å¢ƒéš”ç¦»
```

### 9.2 å…³é”®å‘½ä»¤é€ŸæŸ¥è¡¨


| åŠŸèƒ½åˆ†ç±» | **æ ¸å¿ƒå‘½ä»¤** | **ä½œç”¨è¯´æ˜** |
|---------|-------------|-------------|
| **é›†ç¾¤ç®¡ç†** | `kubectl config get-clusters` | `æŸ¥çœ‹é›†ç¾¤åˆ—è¡¨` |
|  | `kubectl config set-cluster` | `æ·»åŠ é›†ç¾¤é…ç½®` |
|  | `kubectl config delete-cluster` | `åˆ é™¤é›†ç¾¤é…ç½®` |
| **ç”¨æˆ·ç®¡ç†** | `kubectl config set-credentials` | `è®¾ç½®ç”¨æˆ·å‡­è¯` |
|  | `kubectl config delete-user` | `åˆ é™¤ç”¨æˆ·é…ç½®` |
| **ä¸Šä¸‹æ–‡ç®¡ç†** | `kubectl config current-context` | `æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡` |
|  | `kubectl config use-context` | `åˆ‡æ¢ä¸Šä¸‹æ–‡` |
|  | `kubectl config rename-context` | `é‡å‘½åä¸Šä¸‹æ–‡` |
| **é…ç½®æŸ¥çœ‹** | `kubectl config view --minify` | `æŸ¥çœ‹å½“å‰é…ç½®` |
|  | `kubectl config view --flatten` | `æŸ¥çœ‹å®Œæ•´é…ç½®` |

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
- **DevOpså·¥ç¨‹å¸ˆ**ï¼šåœ¨å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé—´å¿«é€Ÿåˆ‡æ¢
- **å¤šå®¢æˆ·æœåŠ¡**ï¼šä¸ºä¸åŒå®¢æˆ·ç»´æŠ¤ç‹¬ç«‹çš„é›†ç¾¤è®¿é—®
- **æƒé™ç®¡ç†**ï¼šä¸ºä¸åŒè§’è‰²é…ç½®ä¸åŒçš„è®¿é—®æƒé™
- **ç¾éš¾æ¢å¤**ï¼šå¤‡ä»½å’Œæ¢å¤é›†ç¾¤è®¿é—®é…ç½®

**ğŸ”§ è¿ç»´å®è·µ**ï¼š
- **ç¯å¢ƒéš”ç¦»**ï¼šé¿å…è¯¯æ“ä½œå½±å“ç”Ÿäº§ç¯å¢ƒ
- **æƒé™æ§åˆ¶**ï¼šå®ç°æœ€å°æƒé™è®¿é—®åŸåˆ™
- **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šç¼–å†™è„šæœ¬æ‰¹é‡ç®¡ç†å¤šé›†ç¾¤
- **å®‰å…¨å®¡è®¡**ï¼šè®°å½•å’Œç›‘æ§é›†ç¾¤è®¿é—®è¡Œä¸º

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
å¤šé›†ç¾¤ç®¡ç†åƒåˆ†å…¬å¸ï¼Œ
é…ç½®æ–‡ä»¶æ˜¯é€šè®¯å½•ï¼Œ
ä¸Šä¸‹æ–‡å®šèº«ä»½è®¿é—®ï¼Œ
å®‰å…¨éš”ç¦»æœ€é‡è¦ï¼
```