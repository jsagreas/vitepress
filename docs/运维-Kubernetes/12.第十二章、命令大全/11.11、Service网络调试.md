---
title: 11ã€Serviceç½‘ç»œè°ƒè¯•
---
## ğŸ“š ç›®å½•

1. [Serviceç½‘ç»œè°ƒè¯•æ¦‚è¿°](#1-Serviceç½‘ç»œè°ƒè¯•æ¦‚è¿°)
2. [æœåŠ¡ä¿¡æ¯æŸ¥çœ‹å‘½ä»¤](#2-æœåŠ¡ä¿¡æ¯æŸ¥çœ‹å‘½ä»¤)
3. [ç«¯ç‚¹ä¸DNSè°ƒè¯•](#3-ç«¯ç‚¹ä¸DNSè°ƒè¯•)
4. [ç«¯å£è½¬å‘ä¸ä»£ç†](#4-ç«¯å£è½¬å‘ä¸ä»£ç†)
5. [ç½‘ç»œè¿é€šæ€§æµ‹è¯•](#5-ç½‘ç»œè¿é€šæ€§æµ‹è¯•)
6. [æ•…éšœæ’æŸ¥å®æˆ˜](#6-æ•…éšœæ’æŸ¥å®æˆ˜)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ Serviceç½‘ç»œè°ƒè¯•æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Serviceç½‘ç»œè°ƒè¯•


**ğŸ”¸ ç®€å•ç†è§£**
```
Serviceå°±åƒæ˜¯ä¸€ä¸ª"æœåŠ¡å°"ï¼š
- ä½ ä¸éœ€è¦çŸ¥é“å…·ä½“å“ªä¸ªå‘˜å·¥åœ¨å·¥ä½œ
- åªéœ€è¦æ‰¾åˆ°æœåŠ¡å°ï¼ŒæœåŠ¡å°ä¼šå¸®ä½ æ‰¾åˆ°åˆé€‚çš„å‘˜å·¥
- å¦‚æœå‘˜å·¥æ¢ç­äº†ï¼ŒæœåŠ¡å°ä¾ç„¶åœ¨é‚£é‡Œ

Serviceç½‘ç»œè°ƒè¯•å°±æ˜¯ï¼š
å½“ä½ æ‰¾ä¸åˆ°"æœåŠ¡å°"æˆ–"æœåŠ¡å°"æ‰¾ä¸åˆ°"å‘˜å·¥"æ—¶
ç”¨å„ç§æ–¹æ³•æ¥æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦è°ƒè¯•Serviceç½‘ç»œ**
- **Pod IPä¼šå˜**ï¼šPodé‡å¯åIPåœ°å€æ”¹å˜
- **å¤šä¸ªPodå‰¯æœ¬**ï¼šéœ€è¦è´Ÿè½½å‡è¡¡åˆ°ä¸åŒPod
- **è·¨å‘½åç©ºé—´è®¿é—®**ï¼šä¸åŒé¡¹ç›®é—´çš„æœåŠ¡è°ƒç”¨
- **å¤–éƒ¨è®¿é—®**ï¼šä»é›†ç¾¤å¤–è®¿é—®å†…éƒ¨æœåŠ¡

### 1.2 Serviceç½‘ç»œçš„åŸºæœ¬ç»„æˆ


```
Serviceç½‘ç»œæ¶æ„ç®€å›¾ï¼š
                              
å®¢æˆ·ç«¯è¯·æ±‚ â†’ Service â†’ EndPoints â†’ Pod1
                          â”œâ”€â”€â”€â”€â”€â”€â†’ Pod2  
                          â””â”€â”€â”€â”€â”€â”€â†’ Pod3

Serviceï¼š     è™šæ‹Ÿçš„è®¿é—®å…¥å£ï¼ˆåƒé—¨ç‰Œå·ï¼‰
EndPointsï¼š   çœŸå®çš„Podåœ°å€åˆ—è¡¨ï¼ˆåƒä½æˆ·æ¸…å•ï¼‰
Podï¼š         å®é™…æä¾›æœåŠ¡çš„å®¹å™¨ï¼ˆåƒå…·ä½“ä½æˆ·ï¼‰
```

---

## 2. ğŸ” æœåŠ¡ä¿¡æ¯æŸ¥çœ‹å‘½ä»¤


### 2.1 æŸ¥çœ‹æœåŠ¡åŸºæœ¬ä¿¡æ¯


**ğŸ”¸ è·å–Serviceåˆ—è¡¨**
```bash
# æŸ¥çœ‹å½“å‰å‘½åç©ºé—´çš„æ‰€æœ‰æœåŠ¡
kubectl get service

# æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´çš„æœåŠ¡
kubectl get service -A

# ç®€å†™å½¢å¼ï¼ˆsvc = serviceï¼‰
kubectl get svc
```

**ğŸ“Š è¾“å‡ºä¿¡æ¯è§£è¯»**
```
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE
my-service   ClusterIP   10.96.55.123   <none>        80/TCP     5m
nginx-svc    NodePort    10.96.88.200   <none>        80:32000   3m
```

| å­—æ®µ | **å«ä¹‰** | **é€šä¿—è§£é‡Š** |
|------|---------|-------------|
| `NAME` | `æœåŠ¡åç§°` | `å°±åƒå•†åº—çš„åå­—` |
| `TYPE` | `æœåŠ¡ç±»å‹` | `æœåŠ¡çš„å¯¹å¤–å¼€æ”¾æ–¹å¼` |
| `CLUSTER-IP` | `é›†ç¾¤å†…éƒ¨IP` | `é›†ç¾¤å†…éƒ¨çš„"é—¨ç‰Œå·"` |
| `EXTERNAL-IP` | `å¤–éƒ¨è®¿é—®IP` | `å¤–éƒ¨å®¢æˆ·çš„"é—¨ç‰Œå·"` |
| `PORT(S)` | `ç«¯å£ä¿¡æ¯` | `æœåŠ¡çš„"é—¨ç‰Œå·ç "` |

### 2.2 æŸ¥çœ‹æœåŠ¡è¯¦ç»†ä¿¡æ¯


**ğŸ”¸ è¯¦ç»†æœåŠ¡ä¿¡æ¯**
```bash
# æŸ¥çœ‹æœåŠ¡è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…å«Podåˆ†å¸ƒï¼‰
kubectl get service [service-name] -o wide

# ç¤ºä¾‹
kubectl get service my-app -o wide
```

**ğŸ’¡ -o wideå‚æ•°çš„ä½œç”¨**
- æ˜¾ç¤ºæ›´å¤šåˆ—ä¿¡æ¯
- åŒ…å«é€‰æ‹©å™¨ï¼ˆSelectorï¼‰ä¿¡æ¯  
- æ˜¾ç¤ºæœåŠ¡åˆ›å»ºçš„è¯¦ç»†çŠ¶æ€

**ğŸ”¸ è·å–ç‰¹å®šå­—æ®µä¿¡æ¯**
```bash
# åªè·å–é›†ç¾¤IPåœ°å€
kubectl get service my-app -o jsonpath='{.spec.clusterIP}'

# è·å–æœåŠ¡ç«¯å£
kubectl get service my-app -o jsonpath='{.spec.ports[0].port}'

# è·å–NodePortç«¯å£
kubectl get service my-app -o jsonpath='{.spec.ports[0].nodePort}'
```

### 2.3 æœåŠ¡è¯¦ç»†æè¿°


**ğŸ”¸ å…¨é¢äº†è§£æœåŠ¡çŠ¶æ€**
```bash
# æŸ¥çœ‹æœåŠ¡çš„å®Œæ•´é…ç½®å’ŒçŠ¶æ€
kubectl describe service [service-name]

# ç¤ºä¾‹è¾“å‡ºè§£è¯»
kubectl describe service my-app
```

**ğŸ“‹ describeè¾“å‡ºçš„å…³é”®ä¿¡æ¯**
- **Name**: æœåŠ¡åç§°
- **Namespace**: æ‰€åœ¨å‘½åç©ºé—´  
- **Labels**: æœåŠ¡æ ‡ç­¾
- **Annotations**: æ³¨è§£ä¿¡æ¯
- **Selector**: Podé€‰æ‹©å™¨ï¼ˆé‡è¦ï¼ï¼‰
- **Type**: æœåŠ¡ç±»å‹
- **IP**: å„ç§IPåœ°å€
- **Port**: ç«¯å£æ˜ å°„å…³ç³»
- **Endpoints**: å…³è”çš„Podç«¯ç‚¹
- **Events**: ç›¸å…³äº‹ä»¶

---

## 3. ğŸ¯ ç«¯ç‚¹ä¸DNSè°ƒè¯•


### 3.1 ä»€ä¹ˆæ˜¯EndPoints


**ğŸ”¸ EndPointsé€šä¿—è§£é‡Š**
```
Serviceå°±åƒä¸€ä¸ª"å¿«é€’ä»£æ”¶ç‚¹"ï¼š
- Serviceæ˜¯ä»£æ”¶ç‚¹çš„åœ°å€
- EndPointsæ˜¯å…·ä½“æœ‰å“ªäº›åŒ…è£¹ï¼ˆPodï¼‰å¯ä»¥å–
- å¦‚æœEndPointsä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰åŒ…è£¹å¯å–

EndPoints = ServiceèƒŒåçœŸæ­£å¹²æ´»çš„Podåˆ—è¡¨
```

### 3.2 æŸ¥çœ‹æœåŠ¡ç«¯ç‚¹


**ğŸ”¸ æŸ¥çœ‹EndPoints**
```bash
# æŸ¥çœ‹æœåŠ¡å¯¹åº”çš„ç«¯ç‚¹
kubectl get endpoints [service-name]

# æŸ¥çœ‹ç«¯ç‚¹è¯¦ç»†ä¿¡æ¯  
kubectl describe endpoints [service-name]

# ç¤ºä¾‹
kubectl get endpoints my-app
kubectl describe endpoints my-app
```

**ğŸ“Š EndPointsä¿¡æ¯è§£è¯»**
```bash
NAME     ENDPOINTS                          AGE
my-app   10.244.1.5:80,10.244.2.8:80      5m

è§£é‡Šï¼š
my-appæœåŠ¡æœ‰2ä¸ªç«¯ç‚¹ï¼š
- 10.244.1.5:80  â† Pod1çš„IPå’Œç«¯å£
- 10.244.2.8:80  â† Pod2çš„IPå’Œç«¯å£
```

**âš ï¸ å¸¸è§EndPointsé—®é¢˜**
- **EndPointsä¸ºç©º**: æ²¡æœ‰PodåŒ¹é…Serviceçš„é€‰æ‹©å™¨
- **EndPointsæ•°é‡ä¸å¯¹**: éƒ¨åˆ†Podæ²¡æœ‰Ready
- **ç«¯å£ä¸åŒ¹é…**: Serviceç«¯å£ä¸Podç«¯å£é…ç½®é”™è¯¯

### 3.3 DNSè§£ææµ‹è¯•


**ğŸ”¸ Serviceçš„DNSæœºåˆ¶**
```
åœ¨Kubernetesä¸­ï¼Œæ¯ä¸ªServiceéƒ½æœ‰DNSåç§°ï¼š

æ ¼å¼ï¼š[service-name].[namespace].svc.cluster.local

ä¾‹å¦‚ï¼š
- my-app.default.svc.cluster.local
- database.production.svc.cluster.local

ç®€å†™å½¢å¼ï¼š
- åŒå‘½åç©ºé—´ï¼šç›´æ¥ç”¨æœåŠ¡å my-app
- è·¨å‘½åç©ºé—´ï¼šæœåŠ¡å.å‘½åç©ºé—´ database.production
```

**ğŸ”¸ æµ‹è¯•DNSè§£æ**
```bash
# è¿›å…¥Podå†…éƒ¨æµ‹è¯•DNS
kubectl exec -it [pod-name] -- nslookup [service-name]

# ç¤ºä¾‹ï¼šæµ‹è¯•my-appæœåŠ¡çš„DNSè§£æ
kubectl exec -it debug-pod -- nslookup my-app

# æµ‹è¯•å®Œæ•´DNSåç§°
kubectl exec -it debug-pod -- nslookup my-app.default.svc.cluster.local
```

**ğŸ’¡ DNSè§£ææµ‹è¯•ç»“æœ**
```bash
# æ­£å¸¸ç»“æœ
Server:    10.96.0.10
Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local

Name:      my-app
Address 1: 10.96.55.123 my-app.default.svc.cluster.local

# å¼‚å¸¸ç»“æœï¼šæ‰¾ä¸åˆ°æœåŠ¡
nslookup: can't resolve 'my-app'
```

---

## 4. ğŸ”„ ç«¯å£è½¬å‘ä¸ä»£ç†


### 4.1 Serviceç«¯å£è½¬å‘


**ğŸ”¸ ä»€ä¹ˆæ˜¯ç«¯å£è½¬å‘**
```
ç«¯å£è½¬å‘å°±åƒ"å¼€åé—¨"ï¼š
ä½ çš„ç”µè„‘ â† ç›´æ¥è¿æ¥ â†’ Kubernetesä¸­çš„Service
ç»•è¿‡å¤æ‚çš„ç½‘ç»œé…ç½®ï¼Œç›´æ¥è®¿é—®æœåŠ¡

å°±åƒåœ¨å®¶é‡Œç›´æ¥æ‹¨æ‰“å…¬å¸å†…çº¿ç”µè¯
```

**ğŸ”¸ Serviceç«¯å£è½¬å‘å‘½ä»¤**
```bash
# åŸºæœ¬è¯­æ³•
kubectl port-forward service/[service-name] [æœ¬åœ°ç«¯å£]:[æœåŠ¡ç«¯å£]

# ç¤ºä¾‹ï¼šå°†æœ¬åœ°8080ç«¯å£è½¬å‘åˆ°my-appæœåŠ¡çš„80ç«¯å£
kubectl port-forward service/my-app 8080:80

# è®¿é—®æ–¹å¼ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€ http://localhost:8080
```

**ğŸ“‹ ç«¯å£è½¬å‘çš„ä½¿ç”¨åœºæ™¯**

| åœºæ™¯ | **å‘½ä»¤ç¤ºä¾‹** | **è®¿é—®æ–¹å¼** |
|------|-------------|-------------|
| `WebæœåŠ¡è°ƒè¯•` | `kubectl port-forward service/web 8080:80` | `http://localhost:8080` |
| `æ•°æ®åº“è¿æ¥` | `kubectl port-forward service/mysql 3306:3306` | `mysql://localhost:3306` |
| `APIæµ‹è¯•` | `kubectl port-forward service/api 9000:8080` | `http://localhost:9000` |

### 4.2 kubectl proxy


**ğŸ”¸ ä»€ä¹ˆæ˜¯kubectl proxy**
```
kubectl proxyæ˜¯ä¸€ä¸ª"ä¸‡èƒ½ç¿»è¯‘å™¨"ï¼š
- è®©ä½ çš„æµè§ˆå™¨èƒ½ç›´æ¥è®¿é—®Kubernetes API
- è‡ªåŠ¨å¤„ç†è®¤è¯å’Œæƒé™
- æä¾›Webç•Œé¢æŸ¥çœ‹é›†ç¾¤èµ„æº

å°±åƒæœ‰ä¸ªç¿»è¯‘å‘˜å¸®ä½ å’Œå¤–å›½äººå¯¹è¯
```

**ğŸ”¸ å¯åŠ¨ä»£ç†æœåŠ¡**
```bash
# å¯åŠ¨ä»£ç†ï¼ˆé»˜è®¤ç«¯å£8001ï¼‰
kubectl proxy

# æŒ‡å®šç«¯å£å¯åŠ¨
kubectl proxy --port=9000

# åå°è¿è¡Œ
kubectl proxy &
```

**ğŸ”¸ é€šè¿‡ä»£ç†è®¿é—®èµ„æº**
```bash
# è®¿é—®APIæœåŠ¡å™¨
http://localhost:8001/api/v1

# è®¿é—®ç‰¹å®šæœåŠ¡
http://localhost:8001/api/v1/namespaces/default/services/my-app/proxy/

# è®¿é—®Pod
http://localhost:8001/api/v1/namespaces/default/pods/[pod-name]/proxy/
```

---

## 5. ğŸ§ª ç½‘ç»œè¿é€šæ€§æµ‹è¯•


### 5.1 åˆ›å»ºè°ƒè¯•Pod


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦è°ƒè¯•Pod**
```
è°ƒè¯•Podå°±åƒ"ç½‘ç»œä¾¦æ¢"ï¼š
- è£…æ»¡äº†å„ç§ç½‘ç»œå·¥å…·
- å¯ä»¥ä»é›†ç¾¤å†…éƒ¨æ£€æŸ¥ç½‘ç»œé—®é¢˜  
- æ¨¡æ‹ŸçœŸå®çš„ç½‘ç»œè®¿é—®åœºæ™¯

å°±åƒè®©ä¸€ä¸ªä¸“ä¸šæŠ€å¸ˆè¿›å…¥ä½ çš„ç½‘ç»œç¯å¢ƒæ’æŸ¥é—®é¢˜
```

**ğŸ”¸ å¯åŠ¨ç½‘ç»œè°ƒè¯•Pod**
```bash
# å¯åŠ¨ä¸´æ—¶è°ƒè¯•Podï¼ˆç”¨å®Œè‡ªåŠ¨åˆ é™¤ï¼‰
kubectl run tmp-shell --rm -i --tty --image=nicolaka/netshoot -- /bin/bash

# å¯åŠ¨åä½ ä¼šè¿›å…¥Podå†…éƒ¨çš„bash shell
# å¯ä»¥ä½¿ç”¨å„ç§ç½‘ç»œå·¥å…·ï¼špingã€curlã€nslookupã€telnetç­‰
```

**ğŸ’¡ netshooté•œåƒåŒ…å«çš„å·¥å…·**
- `ping` - æµ‹è¯•ç½‘ç»œè¿é€šæ€§
- `curl` - HTTPè¯·æ±‚æµ‹è¯•
- `wget` - ä¸‹è½½æµ‹è¯•  
- `nslookup/dig` - DNSè§£ææµ‹è¯•
- `telnet` - ç«¯å£è¿é€šæ€§æµ‹è¯•
- `traceroute` - è·¯ç”±è·Ÿè¸ª

### 5.2 å¸¸ç”¨ç½‘ç»œæµ‹è¯•å‘½ä»¤


**ğŸ”¸ æµ‹è¯•Serviceè¿é€šæ€§**
```bash
# è¿›å…¥è°ƒè¯•Podåï¼Œæµ‹è¯•Serviceè®¿é—®
curl http://my-app

# æµ‹è¯•ç‰¹å®šç«¯å£
curl http://my-app:80

# æµ‹è¯•HTTPSæœåŠ¡
curl -k https://my-app:443

# æµ‹è¯•è·¨å‘½åç©ºé—´æœåŠ¡
curl http://database.production:3306
```

**ğŸ”¸ æµ‹è¯•Podç›´æ¥è®¿é—®**
```bash
# è·å–Pod IPåç›´æ¥è®¿é—®
kubectl get pods -o wide
curl http://10.244.1.5:80

# æµ‹è¯•ç«¯å£æ˜¯å¦å¼€æ”¾
telnet 10.244.1.5 80
```

### 5.3 èŠ‚ç‚¹ç½‘ç»œä¿¡æ¯æŸ¥çœ‹


**ğŸ”¸ æŸ¥çœ‹èŠ‚ç‚¹ç½‘ç»œä¿¡æ¯**
```bash
# æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹çš„IPä¿¡æ¯ï¼ˆNodePortæœåŠ¡éœ€è¦ï¼‰
kubectl get nodes -o wide

# è¾“å‡ºç¤ºä¾‹
NAME     STATUS   ROLES    AGE   VERSION   INTERNAL-IP   EXTERNAL-IP
node1    Ready    master   5d    v1.21.0   192.168.1.10  <none>
node2    Ready    <none>   5d    v1.21.0   192.168.1.11  <none>
```

**ğŸ’¡ èŠ‚ç‚¹IPçš„ç”¨é€”**
- **INTERNAL-IP**: é›†ç¾¤å†…éƒ¨é€šä¿¡ä½¿ç”¨
- **EXTERNAL-IP**: å¤–éƒ¨è®¿é—®ä½¿ç”¨ï¼ˆå¦‚æœæœ‰ï¼‰
- **NodePortæœåŠ¡**: é€šè¿‡ä»»æ„èŠ‚ç‚¹IP + NodePortç«¯å£è®¿é—®

---

## 6. ğŸ”§ æ•…éšœæ’æŸ¥å®æˆ˜


### 6.1 Serviceè®¿é—®ä¸é€šæ’æŸ¥æ­¥éª¤


**ğŸ”¸ æ’æŸ¥æµç¨‹å›¾**
```
Serviceè®¿é—®ä¸é€šï¼Ÿ
       â†“
1. Serviceå­˜åœ¨å—ï¼Ÿ â†’ kubectl get svc
       â†“ YES
2. EndPointsæ­£å¸¸å—ï¼Ÿ â†’ kubectl get endpoints
       â†“ YES  
3. Podè¿è¡Œæ­£å¸¸å—ï¼Ÿ â†’ kubectl get pods
       â†“ YES
4. DNSè§£ææ­£å¸¸å—ï¼Ÿ â†’ nslookupæµ‹è¯•
       â†“ YES
5. ç«¯å£é…ç½®å¯¹å—ï¼Ÿ â†’ æ£€æŸ¥Serviceå’ŒPodç«¯å£
       â†“ YES
6. ç½‘ç»œç­–ç•¥é™åˆ¶ï¼Ÿ â†’ æ£€æŸ¥NetworkPolicy
```

### 6.2 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**ğŸ”¸ é—®é¢˜1ï¼šServiceæ²¡æœ‰EndPoints**

**ç°è±¡**
```bash
kubectl get endpoints my-app
NAME     ENDPOINTS   AGE
my-app   <none>      5m
```

**ğŸ” æ’æŸ¥æ­¥éª¤**
```bash
# 1. æ£€æŸ¥Serviceé€‰æ‹©å™¨
kubectl get service my-app -o yaml | grep -A 5 selector

# 2. æ£€æŸ¥Podæ ‡ç­¾
kubectl get pods --show-labels

# 3. æ£€æŸ¥PodçŠ¶æ€
kubectl get pods -o wide
```

**âœ… è§£å†³æ–¹æ¡ˆ**
- ç¡®ä¿Podæ ‡ç­¾ä¸Serviceé€‰æ‹©å™¨åŒ¹é…
- ç¡®ä¿Podå¤„äºReadyçŠ¶æ€
- æ£€æŸ¥Podçš„å®¹å™¨ç«¯å£é…ç½®

**ğŸ”¸ é—®é¢˜2ï¼šDNSè§£æå¤±è´¥**

**ç°è±¡**
```bash
nslookup my-app
nslookup: can't resolve 'my-app'
```

**ğŸ” æ’æŸ¥æ­¥éª¤**
```bash
# 1. æ£€æŸ¥DNSæœåŠ¡çŠ¶æ€
kubectl get pods -n kube-system | grep dns

# 2. æ£€æŸ¥Serviceå­˜åœ¨æ€§
kubectl get service my-app

# 3. å°è¯•å®Œæ•´DNSåç§°
nslookup my-app.default.svc.cluster.local
```

**ğŸ”¸ é—®é¢˜3ï¼šç«¯å£è½¬å‘å¤±è´¥**

**ç°è±¡**
```bash
kubectl port-forward service/my-app 8080:80
error: unable to forward port because pod is not running
```

**ğŸ” æ’æŸ¥æ­¥éª¤**
```bash
# 1. æ£€æŸ¥ServiceèƒŒåçš„PodçŠ¶æ€
kubectl get endpoints my-app
kubectl get pods

# 2. å°è¯•ç›´æ¥è½¬å‘åˆ°Pod
kubectl port-forward pod/my-app-xxx 8080:80
```

### 6.3 è°ƒè¯•å‘½ä»¤ç»„åˆæ‹³


**ğŸ”¸ å¿«é€Ÿè¯Šæ–­è„šæœ¬**
```bash
# ä¸€é”®æ£€æŸ¥Serviceå¥åº·çŠ¶æ€
SERVICE_NAME="my-app"

echo "=== ServiceåŸºæœ¬ä¿¡æ¯ ==="
kubectl get service $SERVICE_NAME -o wide

echo "=== EndPointsä¿¡æ¯ ==="  
kubectl get endpoints $SERVICE_NAME

echo "=== ç›¸å…³PodçŠ¶æ€ ==="
kubectl get pods -l $(kubectl get service $SERVICE_NAME -o jsonpath='{.spec.selector}' | sed 's/:/=/g; s/,/ -l /g')

echo "=== Serviceè¯¦ç»†æè¿° ==="
kubectl describe service $SERVICE_NAME
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå‘½ä»¤


```
ğŸ”¸ åŸºç¡€æŸ¥çœ‹å‘½ä»¤
kubectl get service                    # æŸ¥çœ‹æœåŠ¡åˆ—è¡¨
kubectl get service -A                 # æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´æœåŠ¡
kubectl get service [name] -o wide     # æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
kubectl describe service [name]        # æŸ¥çœ‹å®Œæ•´é…ç½®

ğŸ”¸ ç«¯ç‚¹è°ƒè¯•å‘½ä»¤  
kubectl get endpoints [name]           # æŸ¥çœ‹æœåŠ¡ç«¯ç‚¹
kubectl describe endpoints [name]      # ç«¯ç‚¹è¯¦ç»†ä¿¡æ¯

ğŸ”¸ ç½‘ç»œæµ‹è¯•å‘½ä»¤
kubectl port-forward service/[name] [local]:[remote]  # ç«¯å£è½¬å‘
kubectl proxy                          # å¯åŠ¨APIä»£ç†
kubectl run tmp-shell --rm -i --tty --image=nicolaka/netshoot -- /bin/bash  # è°ƒè¯•Pod

ğŸ”¸ ä¿¡æ¯æå–å‘½ä»¤
kubectl get service [name] -o jsonpath='{.spec.clusterIP}'     # è·å–é›†ç¾¤IP
kubectl get nodes -o wide              # æŸ¥çœ‹èŠ‚ç‚¹IPä¿¡æ¯
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Serviceç½‘ç»œçš„æœ¬è´¨**
```
Service = è™šæ‹Ÿçš„è®¿é—®å…¥å£ï¼ˆé—¨ç‰Œå·ï¼‰
EndPoints = çœŸå®çš„Podåœ°å€æ¸…å•ï¼ˆä½æˆ·åå•ï¼‰  
DNS = é€šè¿‡æœåŠ¡åæ‰¾åˆ°æœåŠ¡ï¼ˆç”µè¯ç°¿ï¼‰
ç«¯å£è½¬å‘ = ä»å¤–éƒ¨ç›´æ¥è¿æ¥å†…éƒ¨æœåŠ¡ï¼ˆå¼€åé—¨ï¼‰
```

**ğŸ”¹ æ•…éšœæ’æŸ¥çš„æ€è·¯**
```
Serviceè®¿é—®é—®é¢˜æ’æŸ¥é¡ºåºï¼š
1. Serviceæ˜¯å¦å­˜åœ¨ï¼Ÿ
2. EndPointsæ˜¯å¦æœ‰å†…å®¹ï¼Ÿ
3. Podæ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Ÿ
4. ç«¯å£é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ
5. DNSè§£ææ˜¯å¦æ­£å¸¸ï¼Ÿ
6. ç½‘ç»œç­–ç•¥æ˜¯å¦é™åˆ¶ï¼Ÿ
```

**ğŸ”¹ å¸¸ç”¨è°ƒè¯•æŠ€å·§**
```
å¿«é€Ÿå®šä½é—®é¢˜ï¼š
- ç”¨describeå‘½ä»¤çœ‹è¯¦ç»†ä¿¡æ¯
- ç”¨-o wideå‚æ•°çœ‹æ›´å¤šåˆ—  
- ç”¨è°ƒè¯•Podæµ‹è¯•ç½‘ç»œè¿é€šæ€§
- ç”¨ç«¯å£è½¬å‘å¿«é€ŸéªŒè¯æœåŠ¡
- ç”¨proxyè®¿é—®Kubernetes API
```

### 7.3 å®æˆ˜åº”ç”¨ä»·å€¼


- **ğŸ¯ å¼€å‘è°ƒè¯•**: å¿«é€Ÿå®šä½æœåŠ¡è®¿é—®é—®é¢˜
- **ğŸ”§ è¿ç»´ç›‘æ§**: æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
- **ğŸ“Š æ•…éšœæ’æŸ¥**: ç³»ç»ŸåŒ–æ’æŸ¥ç½‘ç»œæ•…éšœ
- **âš¡ æ€§èƒ½ä¼˜åŒ–**: åˆ†ææœåŠ¡è´Ÿè½½åˆ†å¸ƒ
- **ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥**: éªŒè¯ç½‘ç»œè®¿é—®ç­–ç•¥

**ğŸ’¡ æ ¸å¿ƒè®°å¿†**
- Serviceç½‘ç»œè°ƒè¯•å°±æ˜¯ç¡®ä¿"æœåŠ¡å°"èƒ½æ‰¾åˆ°"å‘˜å·¥"
- EndPointsä¸ºç©ºæ˜¯æœ€å¸¸è§é—®é¢˜ï¼Œé‡ç‚¹æ£€æŸ¥æ ‡ç­¾åŒ¹é…
- ç«¯å£è½¬å‘å’Œè°ƒè¯•Podæ˜¯ä¸¤å¤§è°ƒè¯•åˆ©å™¨
- DNSè§£æå¤±è´¥é€šå¸¸æ˜¯æœåŠ¡ä¸å­˜åœ¨æˆ–DNSç»„ä»¶é—®é¢˜
- ç³»ç»ŸåŒ–æ’æŸ¥æ¯”ç›²ç›®å°è¯•æ›´é«˜æ•ˆ