---
title: 26ã€ç½‘ç»œè¿æ¥è°ƒè¯•
---
## ğŸ“š ç›®å½•

1. [ç½‘ç»œè°ƒè¯•åŸºç¡€æ¦‚å¿µ](#1-ç½‘ç»œè°ƒè¯•åŸºç¡€æ¦‚å¿µ)
2. [åˆ›å»ºè°ƒè¯•ç¯å¢ƒ](#2-åˆ›å»ºè°ƒè¯•ç¯å¢ƒ)
3. [åŸºç¡€è¿é€šæ€§æµ‹è¯•](#3-åŸºç¡€è¿é€šæ€§æµ‹è¯•)
4. [DNSè§£æé—®é¢˜æ’æŸ¥](#4-DNSè§£æé—®é¢˜æ’æŸ¥)
5. [æœåŠ¡è¿æ¥æµ‹è¯•](#5-æœåŠ¡è¿æ¥æµ‹è¯•)
6. [ç½‘ç»œç­–ç•¥è°ƒè¯•](#6-ç½‘ç»œç­–ç•¥è°ƒè¯•)
7. [ç«¯å£è½¬å‘è°ƒè¯•](#7-ç«¯å£è½¬å‘è°ƒè¯•)
8. [æ•…éšœæ’æŸ¥å®æˆ˜æ¡ˆä¾‹](#8-æ•…éšœæ’æŸ¥å®æˆ˜æ¡ˆä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ç½‘ç»œè°ƒè¯•åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Kubernetesç½‘ç»œè°ƒè¯•


**ğŸ”¸ ç®€å•ç†è§£**
æƒ³è±¡ä½ åœ¨ä¸€ä¸ªå¤§æ¥¼é‡Œï¼Œæ¯ä¸ªæˆ¿é—´ï¼ˆPodï¼‰éƒ½éœ€è¦äº’ç›¸é€šè¯ï¼Œä½†çªç„¶æœ‰äº›æˆ¿é—´è”ç³»ä¸ä¸Šäº†ã€‚ç½‘ç»œè°ƒè¯•å°±åƒæ˜¯æ´¾ä¸€ä¸ª"ç½‘ç»œä¾¦æ¢"å»æŸ¥æ¸…æ¥šåˆ°åº•å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚

```
ç½‘ç»œè°ƒè¯•çš„æœ¬è´¨ï¼š
æ£€æŸ¥ Pod â†’ Pod ä¹‹é—´èƒ½å¦æ­£å¸¸é€šä¿¡
æ£€æŸ¥ Pod â†’ Service ä¹‹é—´èƒ½å¦æ­£å¸¸è®¿é—®
æ£€æŸ¥ Pod â†’ å¤–éƒ¨ç½‘ç»œ èƒ½å¦æ­£å¸¸è¿æ¥
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ç½‘ç»œè°ƒè¯•**
- **æœåŠ¡æ— æ³•è®¿é—®**ï¼šåº”ç”¨çªç„¶è®¿é—®ä¸äº†æ•°æ®åº“
- **DNSè§£æå¤±è´¥**ï¼šé€šè¿‡åŸŸåæ‰¾ä¸åˆ°æœåŠ¡
- **ç½‘ç»œç­–ç•¥é˜»å¡**ï¼šå®‰å…¨è§„åˆ™è¯¯æ€äº†æ­£å¸¸æµé‡
- **é…ç½®é”™è¯¯**ï¼šç«¯å£ã€æ ‡ç­¾ã€é€‰æ‹©å™¨é…ç½®æœ‰è¯¯

### 1.2 Kubernetesç½‘ç»œæ¶æ„ç®€ä»‹


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                é›†ç¾¤ç½‘ç»œæ¶æ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Node 1        â”‚   Node 2      â”‚   Node 3      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚    Pod A    â”‚ â”‚ â”‚   Pod B   â”‚ â”‚ â”‚   Pod C   â”‚ â”‚
â”‚ â”‚10.244.1.10  â”‚ â”‚ â”‚10.244.2.20â”‚ â”‚ â”‚10.244.3.30â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Service å±‚ï¼šé€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨æä¾›æœåŠ¡å‘ç°          â”‚
â”‚  kube-dnsï¼šè´Ÿè´£åŸŸåè§£ææœåŠ¡                    â”‚
â”‚  Network Policyï¼šæ§åˆ¶ç½‘ç»œè®¿é—®è§„åˆ™               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å¸¸è§ç½‘ç»œé—®é¢˜åˆ†ç±»


**ğŸ”¸ è¿é€šæ€§é—®é¢˜**
```
ç°è±¡ï¼špingä¸é€šã€è¿æ¥è¶…æ—¶
åŸå› ï¼šç½‘ç»œæ’ä»¶æ•…éšœã€è·¯ç”±é…ç½®é”™è¯¯
```

**ğŸ”¸ DNSè§£æé—®é¢˜**
```
ç°è±¡ï¼šåŸŸåè§£æå¤±è´¥ã€æœåŠ¡æ‰¾ä¸åˆ°
åŸå› ï¼šCoreDNSé…ç½®é—®é¢˜ã€DNSæœåŠ¡å¼‚å¸¸
```

**ğŸ”¸ æœåŠ¡è®¿é—®é—®é¢˜**
```
ç°è±¡ï¼šæœåŠ¡è°ƒç”¨å¤±è´¥ã€è´Ÿè½½å‡è¡¡å¼‚å¸¸
åŸå› ï¼šServiceé…ç½®é”™è¯¯ã€Endpointå¼‚å¸¸
```

**ğŸ”¸ ç½‘ç»œç­–ç•¥é—®é¢˜**
```
ç°è±¡ï¼šåº”ç”¨é—´æ— æ³•é€šä¿¡
åŸå› ï¼šNetworkPolicyè§„åˆ™è¿‡äºä¸¥æ ¼
```

---

## 2. ğŸ› ï¸ åˆ›å»ºè°ƒè¯•ç¯å¢ƒ


### 2.1 ä½¿ç”¨ç½‘ç»œè°ƒè¯•å·¥å…·Pod


**ğŸ”¸ ä»€ä¹ˆæ˜¯netshoot**
`netshoot`æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºç½‘ç»œè°ƒè¯•çš„Dockeré•œåƒï¼Œé‡Œé¢åŒ…å«äº†å„ç§ç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œå°±åƒä¸€ä¸ª"ç½‘ç»œå·¥å…·ç®±"ã€‚

```bash
# åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ç½‘ç»œè°ƒè¯•Pod
kubectl run debug-pod --image=nicolaka/netshoot -it --rm -- /bin/bash
```

**ğŸ’¡ å‘½ä»¤è§£é‡Š**
- `kubectl run`ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªPod
- `debug-pod`ï¼šç»™è¿™ä¸ªè°ƒè¯•Podèµ·çš„åå­—
- `--image=nicolaka/netshoot`ï¼šä½¿ç”¨ç½‘ç»œè°ƒè¯•ä¸“ç”¨é•œåƒ
- `-it`ï¼šäº¤äº’å¼ç»ˆç«¯ï¼ˆå¯ä»¥åƒä½¿ç”¨æ™®é€šå‘½ä»¤è¡Œä¸€æ ·æ“ä½œï¼‰
- `--rm`ï¼šé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤Podï¼ˆä¸ç•™åƒåœ¾ï¼‰
- `-- /bin/bash`ï¼šå¯åŠ¨bashç»ˆç«¯

### 2.2 netshootå·¥å…·ç®±åŒ…å«çš„å·¥å…·


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               netshoot å·¥å…·æ¸…å•                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ping            â”‚ æµ‹è¯•ç½‘ç»œè¿é€šæ€§                â”‚
â”‚ nslookup/dig    â”‚ DNSåŸŸåè§£ææµ‹è¯•               â”‚
â”‚ curl/wget       â”‚ HTTP/HTTPSè¿æ¥æµ‹è¯•            â”‚
â”‚ telnet/nc       â”‚ ç«¯å£è¿æ¥æµ‹è¯•                  â”‚
â”‚ traceroute      â”‚ è·¯ç”±è¿½è¸ª                      â”‚
â”‚ iperf3          â”‚ ç½‘ç»œæ€§èƒ½æµ‹è¯•                  â”‚
â”‚ tcpdump         â”‚ ç½‘ç»œåŒ…æŠ“å–åˆ†æ                â”‚
â”‚ netstat/ss      â”‚ ç½‘ç»œè¿æ¥çŠ¶æ€æŸ¥çœ‹              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æŒä¹…åŒ–è°ƒè¯•Pod


å¦‚æœéœ€è¦é•¿æœŸè°ƒè¯•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸ä¼šè‡ªåŠ¨åˆ é™¤çš„è°ƒè¯•Podï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: network-debug-pod
  labels:
    app: network-debug
spec:
  containers:
  - name: netshoot
    image: nicolaka/netshoot
    command: ["/bin/bash"]
    args: ["-c", "sleep 3600"]  # ä¿æŒè¿è¡Œ1å°æ—¶
```

```bash
# åº”ç”¨é…ç½®
kubectl apply -f debug-pod.yaml

# è¿æ¥åˆ°è°ƒè¯•Pod
kubectl exec -it network-debug-pod -- /bin/bash
```

---

## 3. ğŸ” åŸºç¡€è¿é€šæ€§æµ‹è¯•


### 3.1 Podé—´ç½‘ç»œè¿é€šæ€§æµ‹è¯•


**ğŸ”¸ ä»€ä¹ˆæ˜¯pingæµ‹è¯•**
pingå°±åƒæ˜¯ç»™åˆ«çš„Pod"æ‰“ç”µè¯"ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ¥é€šã€‚å¦‚æœèƒ½æ¥é€šï¼Œè¯´æ˜ç½‘ç»œæ˜¯é€šçš„ã€‚

```bash
# åœ¨è°ƒè¯•Podä¸­æµ‹è¯•ä¸å…¶ä»–Podçš„è¿é€šæ€§
kubectl exec -it debug-pod -- ping 10.244.1.100
```

**ğŸ“Š pingæµ‹è¯•ç»“æœè§£è¯»**
```
æˆåŠŸç¤ºä¾‹ï¼š
PING 10.244.1.100 (10.244.1.100) 56(84) bytes of data.
64 bytes from 10.244.1.100: icmp_seq=1 ttl=64 time=0.123 ms
64 bytes from 10.244.1.100: icmp_seq=2 ttl=64 time=0.089 ms

å¤±è´¥ç¤ºä¾‹ï¼š
PING 10.244.1.100 (10.244.1.100) 56(84) bytes of data.
--- 10.244.1.100 ping statistics ---
3 packets transmitted, 0 received, 100% packet loss
```

### 3.2 è·å–Pod IPåœ°å€


åœ¨æµ‹è¯•å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç›®æ ‡Podçš„IPåœ°å€ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰Podçš„IPåœ°å€
kubectl get pods -o wide

# æŸ¥çœ‹ç‰¹å®šPodçš„è¯¦ç»†ä¿¡æ¯
kubectl describe pod <pod-name>
```

**ğŸ’¡ å®ç”¨æŠ€å·§**
```bash
# è·å–Pod IPçš„å¿«æ·æ–¹å¼
kubectl get pod <pod-name> -o jsonpath='{.status.podIP}'

# æ‰¹é‡è·å–åŒä¸€ä¸ªåº”ç”¨çš„æ‰€æœ‰Pod IP
kubectl get pods -l app=nginx -o jsonpath='{.items[*].status.podIP}'
```

### 3.3 è·¨èŠ‚ç‚¹è¿é€šæ€§æµ‹è¯•


```bash
# æµ‹è¯•ä¸åŒèŠ‚ç‚¹ä¸Šçš„Podè¿é€šæ€§
kubectl get pods -o wide  # å…ˆçœ‹çœ‹Podåˆ†å¸ƒåœ¨å“ªäº›èŠ‚ç‚¹ä¸Š

# å‡è®¾æˆ‘ä»¬è¦æµ‹è¯•node1ä¸Šçš„Podèƒ½å¦è¿é€šnode2ä¸Šçš„Pod
kubectl exec -it pod-on-node1 -- ping <pod-ip-on-node2>
```

**ğŸ”¸ è¿é€šæ€§é—®é¢˜æ’æŸ¥æ€è·¯**
```
1. åŒèŠ‚ç‚¹Podæ— æ³•è¿é€š â†’ æ£€æŸ¥èŠ‚ç‚¹ç½‘ç»œé…ç½®
2. è·¨èŠ‚ç‚¹Podæ— æ³•è¿é€š â†’ æ£€æŸ¥é›†ç¾¤ç½‘ç»œæ’ä»¶
3. éƒ¨åˆ†Podèƒ½é€šéƒ¨åˆ†ä¸é€š â†’ æ£€æŸ¥ç½‘ç»œç­–ç•¥
4. é—´æ­‡æ€§è¿é€šé—®é¢˜ â†’ æ£€æŸ¥ç½‘ç»œè´Ÿè½½å’Œæ€§èƒ½
```

---

## 4. ğŸ” DNSè§£æé—®é¢˜æ’æŸ¥


### 4.1 ä»€ä¹ˆæ˜¯Kubernetesä¸­çš„DNS


**ğŸ”¸ ç®€å•ç†è§£**
DNSå°±åƒç”µè¯ç°¿ï¼Œä½ ä¸éœ€è¦è®°ä½æ¯ä¸ªäººçš„ç”µè¯å·ç ï¼Œåªéœ€è¦çŸ¥é“ä»–çš„åå­—ï¼Œç”µè¯ç°¿ä¼šå‘Šè¯‰ä½ å·ç ã€‚åœ¨K8sä¸­ï¼Œä½ ä¸éœ€è¦è®°ä½Podçš„IPï¼Œåªéœ€è¦çŸ¥é“æœåŠ¡åå­—ï¼ŒDNSä¼šå‘Šè¯‰ä½ IPã€‚

```
DNSè§£ææµç¨‹ï¼š
åº”ç”¨è¯·æ±‚ "mysql-service" 
    â†“
CoreDNS æŸ¥æ‰¾æœåŠ¡å
    â†“  
è¿”å› Service IP: 10.96.100.200
    â†“
è®¿é—®çœŸå®çš„ Pod IP
```

### 4.2 DNSè§£ææµ‹è¯•å‘½ä»¤


**ğŸ”¸ ä½¿ç”¨nslookupæµ‹è¯•**
```bash
# æµ‹è¯•æœåŠ¡åè§£æ
kubectl exec -it debug-pod -- nslookup mysql-service

# æµ‹è¯•å®Œæ•´åŸŸåè§£æ
kubectl exec -it debug-pod -- nslookup mysql-service.default.svc.cluster.local
```

**ğŸ“Š DNSè§£æç»“æœè§£è¯»**
```
æˆåŠŸç¤ºä¾‹ï¼š
Server:		10.96.0.10
Address:	10.96.0.10#53

Name:	mysql-service.default.svc.cluster.local
Address: 10.96.100.200

å¤±è´¥ç¤ºä¾‹ï¼š
Server:		10.96.0.10
Address:	10.96.0.10#53

** server can't find mysql-service: NXDOMAIN
```

### 4.3 æ£€æŸ¥DNSé…ç½®


**ğŸ”¸ æŸ¥çœ‹Podçš„DNSé…ç½®**
```bash
# æŸ¥çœ‹Podå†…çš„DNSé…ç½®æ–‡ä»¶
kubectl exec -it debug-pod -- cat /etc/resolv.conf
```

**å…¸å‹DNSé…ç½®å†…å®¹ï¼š**
```
nameserver 10.96.0.10          # CoreDNSæœåŠ¡IP
search default.svc.cluster.local svc.cluster.local cluster.local
options ndots:5
```

**ğŸ’¡ é…ç½®æ–‡ä»¶å«ä¹‰**
- `nameserver`ï¼šDNSæœåŠ¡å™¨åœ°å€ï¼ˆé€šå¸¸æ˜¯CoreDNSï¼‰
- `search`ï¼šåŸŸåæœç´¢è·¯å¾„ï¼Œç®€åŒ–æœåŠ¡åè®¿é—®
- `options ndots:5`ï¼šåŸŸåä¸­ç‚¹çš„æ•°é‡é˜ˆå€¼

### 4.4 CoreDNSçŠ¶æ€æ£€æŸ¥


```bash
# æ£€æŸ¥CoreDNS PodçŠ¶æ€
kubectl get pods -n kube-system -l k8s-app=kube-dns

# æŸ¥çœ‹CoreDNSæ—¥å¿—
kubectl logs -n kube-system -l k8s-app=kube-dns

# æ£€æŸ¥CoreDNSé…ç½®
kubectl get configmap coredns -n kube-system -o yaml
```

**ğŸ”¸ å¸¸è§DNSé—®é¢˜åŠè§£å†³**

| é—®é¢˜ç°è±¡ | **å¯èƒ½åŸå› ** | **è§£å†³æ–¹æ³•** |
|---------|------------|-------------|
| `NXDOMAINé”™è¯¯` | `æœåŠ¡åä¸å­˜åœ¨` | `æ£€æŸ¥Serviceæ˜¯å¦æ­£ç¡®åˆ›å»º` |
| `DNSè¶…æ—¶` | `CoreDNSæ•…éšœ` | `é‡å¯CoreDNS Pod` |
| `è§£æåˆ°é”™è¯¯IP` | `ç¼“å­˜é—®é¢˜` | `æ¸…é™¤DNSç¼“å­˜` |
| `é—´æ­‡æ€§è§£æå¤±è´¥` | `CoreDNSè´Ÿè½½é«˜` | `å¢åŠ CoreDNSå‰¯æœ¬æ•°` |

---

## 5. ğŸŒ æœåŠ¡è¿æ¥æµ‹è¯•


### 5.1 ä»€ä¹ˆæ˜¯Serviceè¿æ¥æµ‹è¯•


**ğŸ”¸ ç†è§£Serviceçš„ä½œç”¨**
Serviceå°±åƒä¸€ä¸ª"ä»£ç†äºº"ï¼Œä½ ä¸ç›´æ¥æ‰¾å…·ä½“çš„Podï¼Œè€Œæ˜¯æ‰¾Serviceï¼Œå®ƒä¼šå¸®ä½ è½¬å‘åˆ°åˆé€‚çš„Podä¸Šã€‚å°±åƒä½ æ‰“å®¢æœç”µè¯ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“å“ªä¸ªå®¢æœæ¥ç”µè¯ã€‚

```
Serviceå·¥ä½œåŸç†ï¼š
å®¢æˆ·ç«¯ â†’ Service(è™šæ‹ŸIP) â†’ Endpoints â†’ å…·ä½“Pod

ä¾‹å¦‚ï¼š
curl mysql-service:3306 â†’ 10.96.100.200:3306 â†’ 10.244.1.100:3306
```

### 5.2 HTTPæœåŠ¡è¿æ¥æµ‹è¯•


**ğŸ”¸ ä½¿ç”¨curlæµ‹è¯•HTTPæœåŠ¡**
```bash
# æµ‹è¯•Serviceåç§°è®¿é—®
kubectl exec -it debug-pod -- curl http://web-service:80

# æµ‹è¯•Serviceçš„å®Œæ•´åŸŸå
kubectl exec -it debug-pod -- curl http://web-service.default.svc.cluster.local:80

# æµ‹è¯•HTTPSæœåŠ¡
kubectl exec -it debug-pod -- curl -k https://api-service:443/health
```

**ğŸ’¡ curlå‘½ä»¤å‚æ•°è¯´æ˜**
- `-k`ï¼šå¿½ç•¥SSLè¯ä¹¦éªŒè¯ï¼ˆè°ƒè¯•æ—¶ä½¿ç”¨ï¼‰
- `-v`ï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚å¤´å’Œå“åº”å¤´
- `-I`ï¼šåªè·å–å“åº”å¤´ï¼Œä¸è·å–å†…å®¹
- `--connect-timeout 10`ï¼šè®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´

### 5.3 ç«¯å£è¿æ¥æµ‹è¯•


**ğŸ”¸ ä½¿ç”¨telnetæµ‹è¯•ç«¯å£è¿é€šæ€§**
```bash
# æµ‹è¯•TCPç«¯å£æ˜¯å¦å¯ä»¥è¿æ¥
kubectl exec -it debug-pod -- telnet mysql-service 3306

# ä½¿ç”¨nc (netcat) è¿›è¡Œç«¯å£æµ‹è¯•
kubectl exec -it debug-pod -- nc -zv mysql-service 3306
```

**ğŸ“Š ç«¯å£æµ‹è¯•ç»“æœè§£è¯»**
```
æˆåŠŸç¤ºä¾‹ï¼š
Trying 10.96.100.200...
Connected to mysql-service.default.svc.cluster.local.

å¤±è´¥ç¤ºä¾‹ï¼š
Trying 10.96.100.200...
telnet: Unable to connect to remote host: Connection refused
```

### 5.4 æ£€æŸ¥Serviceå’ŒEndpoints


**ğŸ”¸ éªŒè¯Serviceé…ç½®**
```bash
# æŸ¥çœ‹Serviceåˆ—è¡¨
kubectl get services

# æŸ¥çœ‹ç‰¹å®šServiceè¯¦æƒ…
kubectl describe service mysql-service

# æ£€æŸ¥Serviceçš„ç«¯ç‚¹
kubectl get endpoints mysql-service
```

**ğŸ”¸ Serviceé…ç½®é—®é¢˜æ’æŸ¥**
```bash
# æ£€æŸ¥Serviceé€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®
kubectl get service mysql-service -o yaml | grep -A 5 selector

# æ£€æŸ¥Podæ ‡ç­¾æ˜¯å¦åŒ¹é…
kubectl get pods --show-labels -l app=mysql
```

**ğŸ’¡ å¸¸è§Serviceé—®é¢˜**
```
é—®é¢˜1ï¼šServiceæ— å“åº”
æ’æŸ¥ï¼škubectl get endpoints service-name
è§£å†³ï¼šæ£€æŸ¥Podæ ‡ç­¾æ˜¯å¦ä¸Serviceé€‰æ‹©å™¨åŒ¹é…

é—®é¢˜2ï¼šè¿æ¥è¢«æ‹’ç»
æ’æŸ¥ï¼škubectl describe service service-name
è§£å†³ï¼šæ£€æŸ¥ç«¯å£æ˜ å°„æ˜¯å¦æ­£ç¡®

é—®é¢˜3ï¼šè´Ÿè½½å‡è¡¡å¼‚å¸¸
æ’æŸ¥ï¼škubectl get endpoints service-name -o wide
è§£å†³ï¼šæ£€æŸ¥Podå¥åº·çŠ¶æ€å’Œå°±ç»ªæ¢é’ˆ
```

---

## 6. ğŸ›¡ï¸ ç½‘ç»œç­–ç•¥è°ƒè¯•


### 6.1 ä»€ä¹ˆæ˜¯Network Policy


**ğŸ”¸ ç®€å•ç†è§£**
Network Policyå°±åƒå°åŒºçš„é—¨ç¦ç³»ç»Ÿï¼Œå†³å®šè°å¯ä»¥è¿›å…¥ã€è°å¯ä»¥å‡ºå»ã€å¯ä»¥è®¿é—®å“ªäº›åœ°æ–¹ã€‚å®ƒæ˜¯K8sä¸­çš„"ç½‘ç»œé˜²ç«å¢™"ã€‚

```
ç½‘ç»œç­–ç•¥å·¥ä½œç¤ºæ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    NetworkPolicy    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Pod A     â”‚ â”€â”€â”€â”€â”€â”€â”€âœ“â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Pod B     â”‚
â”‚  (frontend) â”‚                     â”‚ (backend)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚        NetworkPolicy
       â”‚ â”€â”€â”€â”€â”€â”€â”€âœ—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Pod C     â”‚
                                â”‚ (database)  â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ£€æŸ¥ç½‘ç»œç­–ç•¥


**ğŸ”¸ æŸ¥çœ‹ç½‘ç»œç­–ç•¥**
```bash
# æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œç­–ç•¥
kubectl get networkpolicies

# ç®€å†™å½¢å¼
kubectl get netpol

# æŸ¥çœ‹ç‰¹å®šç½‘ç»œç­–ç•¥è¯¦æƒ…
kubectl describe networkpolicy deny-all-policy
```

**ğŸ”¸ ç½‘ç»œç­–ç•¥é…ç½®ç¤ºä¾‹**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: web-netpol
spec:
  podSelector:
    matchLabels:
      app: web
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 80
```

### 6.3 ç½‘ç»œç­–ç•¥è°ƒè¯•æ­¥éª¤


**ğŸ”¸ è°ƒè¯•æµç¨‹**
```
æ­¥éª¤1ï¸âƒ£ ç¡®è®¤æ˜¯å¦æœ‰NetworkPolicyå½±å“
kubectl get netpol --all-namespaces

æ­¥éª¤2ï¸âƒ£ æ£€æŸ¥ç­–ç•¥çš„Podé€‰æ‹©å™¨
kubectl describe netpol <policy-name>

æ­¥éª¤3ï¸âƒ£ éªŒè¯Podæ ‡ç­¾åŒ¹é…
kubectl get pods --show-labels

æ­¥éª¤4ï¸âƒ£ æµ‹è¯•ç­–ç•¥ç”Ÿæ•ˆå‰åçš„è¿é€šæ€§
```

**ğŸ’¡ ç½‘ç»œç­–ç•¥è°ƒè¯•æŠ€å·§**
```bash
# ä¸´æ—¶åˆ é™¤ç½‘ç»œç­–ç•¥è¿›è¡Œæµ‹è¯•
kubectl delete netpol <policy-name>

# æµ‹è¯•è¿é€šæ€§
kubectl exec -it source-pod -- curl target-service:80

# å¦‚æœåˆ é™¤ç­–ç•¥åèƒ½é€šï¼Œè¯´æ˜æ˜¯ç­–ç•¥é—®é¢˜
# é‡æ–°åº”ç”¨ç­–ç•¥å¹¶è°ƒæ•´è§„åˆ™
kubectl apply -f networkpolicy.yaml
```

### 6.4 å¸¸è§ç½‘ç»œç­–ç•¥é—®é¢˜


**ğŸ”¸ é—®é¢˜è¯Šæ–­è¡¨**

| ç°è±¡ | **å¯èƒ½åŸå› ** | **æ£€æŸ¥æ–¹æ³•** |
|-----|------------|-------------|
| `æ‰€æœ‰è¿æ¥éƒ½è¢«é˜»æ–­` | `åº”ç”¨äº†deny-allç­–ç•¥` | `kubectl get netpol` |
| `ç‰¹å®šæ–¹å‘è¿æ¥å¤±è´¥` | `Ingress/Egressè§„åˆ™ä¸å½“` | `æ£€æŸ¥policyTypesé…ç½®` |
| `éƒ¨åˆ†Podæ— æ³•é€šä¿¡` | `æ ‡ç­¾é€‰æ‹©å™¨ä¸åŒ¹é…` | `å¯¹æ¯”Podæ ‡ç­¾å’Œé€‰æ‹©å™¨` |
| `ç­–ç•¥ä¸ç”Ÿæ•ˆ` | `CNIä¸æ”¯æŒNetworkPolicy` | `æ£€æŸ¥ç½‘ç»œæ’ä»¶æ”¯æŒæƒ…å†µ` |

---

## 7. ğŸ”— ç«¯å£è½¬å‘è°ƒè¯•


### 7.1 ä»€ä¹ˆæ˜¯ç«¯å£è½¬å‘


**ğŸ”¸ ç®€å•ç†è§£**
ç«¯å£è½¬å‘å°±åƒåœ¨ä½ çš„ç”µè„‘å’ŒK8sé›†ç¾¤ä¹‹é—´æ‹‰äº†ä¸€æ ¹"ç½‘çº¿"ï¼Œè®©ä½ å¯ä»¥ç›´æ¥è®¿é—®é›†ç¾¤å†…çš„æœåŠ¡ï¼Œå°±åƒè®¿é—®æœ¬åœ°æœåŠ¡ä¸€æ ·æ–¹ä¾¿ã€‚

```
ç«¯å£è½¬å‘å·¥ä½œåŸç†ï¼š
ä½ çš„ç”µè„‘:8080 â†â”€â”€â”€ kubectl port-forward â”€â”€â”€â†’ Pod:80

è®¿é—® localhost:8080 å°±ç­‰äºè®¿é—® Pod çš„ 80 ç«¯å£
```

### 7.2 Podç«¯å£è½¬å‘


**ğŸ”¸ è½¬å‘åˆ°Podç«¯å£**
```bash
# è½¬å‘åˆ°ç‰¹å®šPodçš„ç«¯å£
kubectl port-forward pod/web-pod 8080:80

# è½¬å‘æ—¶æŒ‡å®šç›‘å¬åœ°å€ï¼ˆé»˜è®¤åªç›‘å¬localhostï¼‰
kubectl port-forward --address 0.0.0.0 pod/web-pod 8080:80

# åå°è¿è¡Œç«¯å£è½¬å‘
kubectl port-forward pod/web-pod 8080:80 &
```

**ğŸ’¡ ä½¿ç”¨åœºæ™¯**
- **è°ƒè¯•Webåº”ç”¨**ï¼šç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®Pod
- **æ•°æ®åº“è¿æ¥**ï¼šç”¨æœ¬åœ°æ•°æ®åº“å·¥å…·è¿æ¥K8sä¸­çš„æ•°æ®åº“
- **APIæµ‹è¯•**ï¼šç”¨Postmanç­‰å·¥å…·æµ‹è¯•é›†ç¾¤å†…çš„API

### 7.3 Serviceç«¯å£è½¬å‘


**ğŸ”¸ è½¬å‘åˆ°Service**
```bash
# è½¬å‘åˆ°Serviceï¼ˆä¼šè‡ªåŠ¨è´Ÿè½½å‡è¡¡åˆ°åç«¯Podï¼‰
kubectl port-forward service/web-service 8080:80

# è½¬å‘åˆ°ä¸åŒå‘½åç©ºé—´çš„Service
kubectl port-forward -n production service/api-service 9090:8080
```

### 7.4 ç«¯å£è½¬å‘æ•…éšœæ’æŸ¥


**ğŸ”¸ å¸¸è§é—®é¢˜è§£å†³**
```bash
# é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨
lsof -i :8080  # æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ
killall kubectl  # ç»“æŸæ‰€æœ‰kubectlè¿›ç¨‹

# é—®é¢˜2ï¼šæ— æ³•è®¿é—®è½¬å‘çš„ç«¯å£
# æ£€æŸ¥Podæ˜¯å¦æ­£å¸¸è¿è¡Œ
kubectl get pod web-pod

# æ£€æŸ¥Podå†…æœåŠ¡æ˜¯å¦æ­£å¸¸ç›‘å¬
kubectl exec -it web-pod -- netstat -tlnp
```

**ğŸ“Š ç«¯å£è½¬å‘è°ƒè¯•æµç¨‹**
```
1ï¸âƒ£ ç¡®è®¤ç›®æ ‡Pod/Serviceæ­£å¸¸
   kubectl get pods,services

2ï¸âƒ£ å¯åŠ¨ç«¯å£è½¬å‘
   kubectl port-forward pod/target-pod 8080:80

3ï¸âƒ£ æµ‹è¯•æœ¬åœ°è®¿é—®
   curl localhost:8080

4ï¸âƒ£ å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥Podå†…æœåŠ¡çŠ¶æ€
   kubectl exec -it target-pod -- ps aux
```

---

## 8. ğŸš¨ æ•…éšœæ’æŸ¥å®æˆ˜æ¡ˆä¾‹


### 8.1 æ¡ˆä¾‹1ï¼šWebåº”ç”¨æ— æ³•è®¿é—®æ•°æ®åº“


**ğŸ”¸ æ•…éšœç°è±¡**
```
åº”ç”¨æ—¥å¿—æ˜¾ç¤ºï¼š
Connection to mysql-service:3306 refused
```

**ğŸ”¸ æ’æŸ¥æ­¥éª¤**
```bash
# æ­¥éª¤1ï¼šåˆ›å»ºè°ƒè¯•ç¯å¢ƒ
kubectl run debug --image=nicolaka/netshoot -it --rm -- /bin/bash

# æ­¥éª¤2ï¼šæµ‹è¯•DNSè§£æ
nslookup mysql-service
# ç»“æœï¼šæ­£å¸¸è§£æåˆ°10.96.100.200

# æ­¥éª¤3ï¼šæµ‹è¯•ç«¯å£è¿é€šæ€§  
telnet mysql-service 3306
# ç»“æœï¼šConnection refused

# æ­¥éª¤4ï¼šæ£€æŸ¥Serviceé…ç½®
exit  # é€€å‡ºè°ƒè¯•Pod
kubectl get service mysql-service
kubectl describe service mysql-service

# æ­¥éª¤5ï¼šæ£€æŸ¥Endpoints
kubectl get endpoints mysql-service
# å‘ç°ï¼šNo endpoints available
```

**ğŸ”¸ é—®é¢˜æ ¹æº**
Endpointsä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰PodåŒ¹é…Serviceçš„é€‰æ‹©å™¨ã€‚

**ğŸ”¸ è§£å†³æ–¹æ¡ˆ**
```bash
# æ£€æŸ¥Podæ ‡ç­¾
kubectl get pods --show-labels -l app=mysql

# æ£€æŸ¥Serviceé€‰æ‹©å™¨
kubectl get service mysql-service -o yaml | grep -A 3 selector

# å‘ç°ï¼šPodæ ‡ç­¾æ˜¯app=databaseï¼ŒServiceé€‰æ‹©å™¨æ˜¯app=mysql
# ä¿®æ­£Serviceé€‰æ‹©å™¨æˆ–Podæ ‡ç­¾
```

### 8.2 æ¡ˆä¾‹2ï¼šè·¨å‘½åç©ºé—´æœåŠ¡è®¿é—®å¤±è´¥


**ğŸ”¸ æ•…éšœç°è±¡**
```
frontendå‘½åç©ºé—´çš„Podæ— æ³•è®¿é—®backendå‘½åç©ºé—´çš„APIæœåŠ¡
```

**ğŸ”¸ æ’æŸ¥æ­¥éª¤**
```bash
# æ­¥éª¤1ï¼šåœ¨frontendå‘½åç©ºé—´åˆ›å»ºè°ƒè¯•Pod
kubectl run debug -n frontend --image=nicolaka/netshoot -it --rm -- /bin/bash

# æ­¥éª¤2ï¼šæµ‹è¯•çŸ­åŸŸåè®¿é—®ï¼ˆä¼šå¤±è´¥ï¼‰
curl api-service:8080
# ç»“æœï¼šName resolution failed

# æ­¥éª¤3ï¼šæµ‹è¯•å®Œæ•´åŸŸåè®¿é—®
curl api-service.backend.svc.cluster.local:8080
# ç»“æœï¼šæˆåŠŸï¼

# æ­¥éª¤4ï¼šæ£€æŸ¥DNSæœç´¢åŸŸ
cat /etc/resolv.conf
```

**ğŸ”¸ é—®é¢˜æ ¹æº**
è·¨å‘½åç©ºé—´è®¿é—®éœ€è¦ä½¿ç”¨å®Œæ•´åŸŸåï¼ŒçŸ­åŸŸååªåœ¨å½“å‰å‘½åç©ºé—´æœç´¢ã€‚

**ğŸ”¸ è§£å†³æ–¹æ¡ˆ**
```
æ–¹æ¡ˆ1ï¼šä½¿ç”¨å®Œæ•´åŸŸå
api-service.backend.svc.cluster.local

æ–¹æ¡ˆ2ï¼šåœ¨frontendå‘½åç©ºé—´åˆ›å»ºExternalName Service
kubectl create service externalname api --external-name api-service.backend.svc.cluster.local -n frontend
```

### 8.3 æ¡ˆä¾‹3ï¼šç½‘ç»œç­–ç•¥å¯¼è‡´çš„è¿æ¥é—®é¢˜


**ğŸ”¸ æ•…éšœç°è±¡**
```
åº”ç”¨éƒ¨ç½²åçªç„¶æ— æ³•ç›¸äº’é€šä¿¡ï¼Œä¹‹å‰æ˜¯æ­£å¸¸çš„
```

**ğŸ”¸ æ’æŸ¥æ­¥éª¤**
```bash
# æ­¥éª¤1ï¼šæ£€æŸ¥ç½‘ç»œç­–ç•¥
kubectl get networkpolicies --all-namespaces

# æ­¥éª¤2ï¼šå‘ç°æ–°å¢äº†deny-allç­–ç•¥
kubectl describe netpol deny-all

# æ­¥éª¤3ï¼šä¸´æ—¶åˆ é™¤ç­–ç•¥éªŒè¯
kubectl delete netpol deny-all

# æ­¥éª¤4ï¼šæµ‹è¯•è¿é€šæ€§æ¢å¤
kubectl exec -it app-pod -- curl backend-service:8080
# ç»“æœï¼šæˆåŠŸè¿æ¥
```

**ğŸ”¸ è§£å†³æ–¹æ¡ˆ**
```yaml
# åˆ›å»ºå…è®¸å¿…è¦é€šä¿¡çš„ç½‘ç»œç­–ç•¥
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-app-communication
spec:
  podSelector:
    matchLabels:
      app: backend
  policyTypes:
  - Ingress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 8080
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„è°ƒè¯•å‘½ä»¤


```
ğŸ”¸ ç¯å¢ƒå‡†å¤‡ï¼š
kubectl run debug-pod --image=nicolaka/netshoot -it --rm -- /bin/bash

ğŸ”¸ è¿é€šæ€§æµ‹è¯•ï¼š  
kubectl exec -it [pod] -- ping [target-ip]
kubectl exec -it [pod] -- telnet [host] [port]

ğŸ”¸ DNSè°ƒè¯•ï¼š
kubectl exec -it [pod] -- nslookup [service-name]
kubectl exec -it [pod] -- cat /etc/resolv.conf

ğŸ”¸ æœåŠ¡æµ‹è¯•ï¼š
kubectl exec -it [pod] -- curl [service-name]:[port]
kubectl get endpoints [service-name]

ğŸ”¸ ç½‘ç»œç­–ç•¥ï¼š
kubectl get networkpolicies
kubectl describe networkpolicy [policy-name]

ğŸ”¸ ç«¯å£è½¬å‘ï¼š
kubectl port-forward [pod-name] [local-port]:[pod-port]
```

### 9.2 æ•…éšœæ’æŸ¥æ€è·¯


**ğŸ”¹ åˆ†å±‚è¯Šæ–­æ³•**
```
ç¬¬1å±‚ï¼šç‰©ç†è¿é€šæ€§
â”œâ”€ Pod IPæ˜¯å¦å¯pingé€š
â”œâ”€ è·¨èŠ‚ç‚¹è¿é€šæ€§æ˜¯å¦æ­£å¸¸
â””â”€ ç½‘ç»œæ’ä»¶æ˜¯å¦å·¥ä½œæ­£å¸¸

ç¬¬2å±‚ï¼šDNSè§£æ  
â”œâ”€ æœåŠ¡åæ˜¯å¦èƒ½è§£æ
â”œâ”€ CoreDNSæ˜¯å¦æ­£å¸¸å·¥ä½œ
â””â”€ DNSé…ç½®æ˜¯å¦æ­£ç¡®

ç¬¬3å±‚ï¼šæœåŠ¡å‘ç°
â”œâ”€ Serviceæ˜¯å¦å­˜åœ¨
â”œâ”€ Endpointsæ˜¯å¦æœ‰æ•ˆ
â””â”€ ç«¯å£æ˜ å°„æ˜¯å¦æ­£ç¡®

ç¬¬4å±‚ï¼šç½‘ç»œç­–ç•¥
â”œâ”€ æ˜¯å¦æœ‰NetworkPolicyé™åˆ¶
â”œâ”€ è§„åˆ™æ˜¯å¦è¿‡äºä¸¥æ ¼
â””â”€ æ ‡ç­¾é€‰æ‹©å™¨æ˜¯å¦åŒ¹é…
```

### 9.3 å®ç”¨è°ƒè¯•æŠ€å·§


**ğŸ’¡ é«˜æ•ˆè°ƒè¯•æ–¹æ³•**
- **æ¸è¿›å¼æ’æŸ¥**ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œå…ˆpingåcurl
- **å¯¹æ¯”æµ‹è¯•**ï¼šæ­£å¸¸ç¯å¢ƒvså¼‚å¸¸ç¯å¢ƒå¯¹æ¯”
- **æ—¥å¿—ç»“åˆ**ï¼šç½‘ç»œæµ‹è¯•ç»“åˆåº”ç”¨æ—¥å¿—åˆ†æ
- **ä¸´æ—¶éªŒè¯**ï¼šä¸´æ—¶åˆ é™¤ç­–ç•¥æˆ–ä¿®æ”¹é…ç½®éªŒè¯é—®é¢˜

**ğŸ”¸ é¢„é˜²æ€§æ£€æŸ¥**
```bash
# å®šæœŸæ£€æŸ¥è„šæœ¬ç¤ºä¾‹
#!/bin/bash
echo "=== æ£€æŸ¥æ ¸å¿ƒç½‘ç»œç»„ä»¶ ==="
kubectl get pods -n kube-system -l k8s-app=kube-dns
kubectl get networkpolicies --all-namespaces
kubectl get services --all-namespaces | grep ClusterIP

echo "=== æ£€æŸ¥èŠ‚ç‚¹ç½‘ç»œçŠ¶æ€ ==="
kubectl get nodes -o wide
```

### 9.4 å¸¸è§é—®é¢˜é€ŸæŸ¥è¡¨


| é—®é¢˜ç±»å‹ | **å¿«é€Ÿæ£€æŸ¥å‘½ä»¤** | **å¸¸è§åŸå› ** |
|---------|-----------------|-------------|
| `Podæ— æ³•é€šä¿¡` | `kubectl exec -it pod1 -- ping pod2-ip` | `ç½‘ç»œæ’ä»¶é—®é¢˜ã€èŠ‚ç‚¹æ•…éšœ` |
| `æœåŠ¡æ— æ³•è®¿é—®` | `kubectl get endpoints service-name` | `æ ‡ç­¾é€‰æ‹©å™¨ä¸åŒ¹é…` |  
| `DNSè§£æå¤±è´¥` | `kubectl exec -it pod -- nslookup service` | `CoreDNSæ•…éšœã€é…ç½®é”™è¯¯` |
| `ç½‘ç»œè¢«é˜»æ–­` | `kubectl get netpol` | `ç½‘ç»œç­–ç•¥è¿‡äºä¸¥æ ¼` |
| `ç«¯å£è½¬å‘å¤±è´¥` | `kubectl get pod pod-name` | `Podæœªè¿è¡Œã€ç«¯å£ä¸å­˜åœ¨` |

**ğŸ¯ è®°å¿†å£è¯€**
```
ç½‘ç»œè°ƒè¯•æœ‰å¥—è·¯ï¼Œåˆ†å±‚æ’æŸ¥ä¸é©¬è™
å…ˆæŸ¥è¿é€šå†æŸ¥DNSï¼ŒæœåŠ¡ç«¯ç‚¹è¦ç¡®è®¤
ç½‘ç»œç­–ç•¥è«å¿½è§†ï¼Œæ—¥å¿—ç»“åˆæ•ˆæœå¥½
ç«¯å£è½¬å‘å¾ˆå®ç”¨ï¼Œæœ¬åœ°è°ƒè¯•ç‰¹åˆ«æ£’
```

**æ ¸å¿ƒç†è§£**ï¼š
- Kubernetesç½‘ç»œè°ƒè¯•æ˜¯ä¸€ä¸ªåˆ†å±‚é€’è¿›çš„è¿‡ç¨‹
- æ¯ä¸€å±‚éƒ½æœ‰å¯¹åº”çš„å·¥å…·å’Œæ–¹æ³•
- ç†è§£ç½‘ç»œæ¶æ„æ˜¯é«˜æ•ˆè°ƒè¯•çš„åŸºç¡€
- å®æˆ˜ç»éªŒæ¯”ç†è®ºçŸ¥è¯†æ›´é‡è¦