---
title: 2ã€kubectlåŸºç¡€æ“ä½œå‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [kubectlåŸºç¡€æ¦‚å¿µ](#1-kubectlåŸºç¡€æ¦‚å¿µ)
2. [è·å–ä¸æŸ¥çœ‹èµ„æºå‘½ä»¤](#2-è·å–ä¸æŸ¥çœ‹èµ„æºå‘½ä»¤)
3. [åˆ›å»ºä¸éƒ¨ç½²èµ„æºå‘½ä»¤](#3-åˆ›å»ºä¸éƒ¨ç½²èµ„æºå‘½ä»¤)
4. [ç¼–è¾‘ä¸æ›´æ–°èµ„æºå‘½ä»¤](#4-ç¼–è¾‘ä¸æ›´æ–°èµ„æºå‘½ä»¤)
5. [åˆ é™¤ä¸æ¸…ç†èµ„æºå‘½ä»¤](#5-åˆ é™¤ä¸æ¸…ç†èµ„æºå‘½ä»¤)
6. [æœåŠ¡æš´éœ²ä¸ç½‘ç»œå‘½ä»¤](#6-æœåŠ¡æš´éœ²ä¸ç½‘ç»œå‘½ä»¤)
7. [å®æˆ˜æ“ä½œæ¼”ç»ƒ](#7-å®æˆ˜æ“ä½œæ¼”ç»ƒ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ kubectlåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯kubectl


**ç®€å•ç†è§£ï¼škubectlå°±æ˜¯ä½ å’ŒKubernetesé›†ç¾¤å¯¹è¯çš„"ç¿»è¯‘å®˜"**

```
ä½ æƒ³åšä»€ä¹ˆ                kubectlå‘½ä»¤              é›†ç¾¤å®é™…æ“ä½œ
"æˆ‘è¦åˆ›å»ºä¸€ä¸ªåº”ç”¨"   â†’    kubectl create    â†’    åœ¨é›†ç¾¤ä¸­åˆ›å»ºPod
"æˆ‘è¦çœ‹çœ‹æœ‰ä»€ä¹ˆåº”ç”¨"  â†’    kubectl get       â†’    åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„åº”ç”¨
"æˆ‘è¦åˆ é™¤è¿™ä¸ªåº”ç”¨"   â†’    kubectl delete    â†’    ä»é›†ç¾¤ä¸­ç§»é™¤åº”ç”¨
```

å°±åƒä½ ç”¨é¥æ§å™¨æ§åˆ¶ç”µè§†æœºä¸€æ ·ï¼Œkubectlå°±æ˜¯æ§åˆ¶Kubernetesé›†ç¾¤çš„"é¥æ§å™¨"ã€‚

### 1.2 kubectlçš„æ ¸å¿ƒä½œç”¨


**ğŸ”¸ ä¸»è¦åŠŸèƒ½**
- **èµ„æºç®¡ç†** - åˆ›å»ºã€æŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤å„ç§Kubernetesèµ„æº
- **åº”ç”¨éƒ¨ç½²** - å°†ä½ çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°é›†ç¾¤ä¸­è¿è¡Œ
- **é›†ç¾¤ç›‘æ§** - æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ã€èµ„æºä½¿ç”¨æƒ…å†µ
- **é—®é¢˜è¯Šæ–­** - æ’æŸ¥åº”ç”¨è¿è¡Œä¸­çš„é—®é¢˜

### 1.3 å‘½ä»¤åŸºæœ¬ç»“æ„


**kubectlå‘½ä»¤çš„æ ‡å‡†æ ¼å¼**ï¼š
```bash
kubectl [åŠ¨ä½œ] [èµ„æºç±»å‹] [èµ„æºåç§°] [é€‰é¡¹]
```

**å®é™…ä¾‹å­ç†è§£**ï¼š
```bash
kubectl get pods my-app --output=wide
   â†‘     â†‘    â†‘      â†‘
  å·¥å…·  åŠ¨ä½œ èµ„æºç±»å‹  é€‰é¡¹
```

å°±åƒè¯´è¯ä¸€æ ·ï¼š"`kubectl`ï¼ˆå·¥å…·ï¼‰ï¼Œ`get`ï¼ˆè·å–ï¼‰ï¼Œ`pods`ï¼ˆPodèµ„æºï¼‰ï¼Œ`my-app`ï¼ˆåå«my-appçš„ï¼‰ï¼Œ`--output=wide`ï¼ˆè¯¦ç»†æ˜¾ç¤ºï¼‰"

---

## 2. ğŸ” è·å–ä¸æŸ¥çœ‹èµ„æºå‘½ä»¤


### 2.1 kubectl get - æŸ¥çœ‹èµ„æºåˆ—è¡¨


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl get` å°±åƒæ˜¯"æŸ¥çœ‹æ¸…å•"çš„å‘½ä»¤ï¼Œå‘Šè¯‰ä½ é›†ç¾¤é‡Œç°åœ¨æœ‰ä»€ä¹ˆä¸œè¥¿åœ¨è¿è¡Œã€‚

**å¸¸ç”¨æŸ¥çœ‹å‘½ä»¤å¯¹æ¯”è¡¨**ï¼š

| å‘½ä»¤ | **ä½œç”¨** | **é€‚ç”¨åœºæ™¯** | **è¾“å‡ºå†…å®¹** |
|------|---------|-------------|-------------|
| `kubectl get pods` | `æŸ¥çœ‹æ‰€æœ‰Pod` | `å¿«é€Ÿäº†è§£è¿è¡ŒçŠ¶æ€` | `Podåç§°ã€çŠ¶æ€ã€é‡å¯æ¬¡æ•°` |
| `kubectl get services` | `æŸ¥çœ‹æ‰€æœ‰æœåŠ¡` | `äº†è§£ç½‘ç»œè®¿é—®æƒ…å†µ` | `æœåŠ¡åã€ç±»å‹ã€ç«¯å£ä¿¡æ¯` |
| `kubectl get nodes` | `æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹` | `æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶å†µ` | `èŠ‚ç‚¹åã€çŠ¶æ€ã€è§’è‰²` |
| `kubectl get deployments` | `æŸ¥çœ‹éƒ¨ç½²åº”ç”¨` | `ç®¡ç†åº”ç”¨éƒ¨ç½²æƒ…å†µ` | `éƒ¨ç½²åã€å‰¯æœ¬æ•°é‡` |

**å®ç”¨ç¤ºä¾‹è§£æ**ï¼š
```bash
# æŸ¥çœ‹å½“å‰æ‰€æœ‰è¿è¡Œçš„åº”ç”¨ï¼ˆPodï¼‰
kubectl get pods
# è¾“å‡ºç¤ºä¾‹ï¼š
# NAME                     READY   STATUS    RESTARTS   AGE
# my-web-app-12345-abcde   1/1     Running   0          5m

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…æ‹¬IPåœ°å€ã€èŠ‚ç‚¹ä½ç½®ï¼‰
kubectl get pods -o wide
```

### 2.2 kubectl describe - æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
å¦‚æœè¯´ `get` æ˜¯çœ‹"ç®€å†æ‘˜è¦"ï¼Œé‚£ `describe` å°±æ˜¯çœ‹"è¯¦ç»†æ¡£æ¡ˆ"ï¼ŒåŒ…å«æ‰€æœ‰ç›¸å…³ä¿¡æ¯ã€‚

**ä»€ä¹ˆæ—¶å€™ç”¨describe**ï¼š
- âœ… **åº”ç”¨å¯åŠ¨å¤±è´¥** - æŸ¥çœ‹é”™è¯¯åŸå› 
- âœ… **Podæ— æ³•è¿è¡Œ** - æ£€æŸ¥èµ„æºé™åˆ¶ã€é•œåƒé—®é¢˜
- âœ… **ç½‘ç»œæ— æ³•è®¿é—®** - æŸ¥çœ‹ç«¯å£é…ç½®ã€æœåŠ¡ç»‘å®š
- âœ… **æ’æŸ¥é—®é¢˜** - è·å–äº‹ä»¶æ—¥å¿—å’ŒçŠ¶æ€è¯¦æƒ…

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹æŸä¸ªPodçš„è¯¦ç»†ä¿¡æ¯å’Œäº‹ä»¶æ—¥å¿—
kubectl describe pod my-web-app-12345-abcde

# æŸ¥çœ‹æœåŠ¡çš„è¯¦ç»†é…ç½®
kubectl describe service my-web-service
```

**describeè¾“å‡ºå†…å®¹è§£è¯»**ï¼š
```
Name:         my-web-app-12345-abcde    â† Podåç§°
Namespace:    default                   â† æ‰€å±å‘½åç©ºé—´
Node:         worker-1                  â† è¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹
Status:       Running                   â† å½“å‰çŠ¶æ€
IP:           10.244.1.5               â† Podå†…éƒ¨IP
Events:                                â† é‡è¦ï¼äº‹ä»¶æ—¥å¿—
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  5m    default-scheduler  Successfully assigned pod
  Normal  Pulling    5m    kubelet            Pulling image "nginx:1.21"
  Normal  Pulled     4m    kubelet            Successfully pulled image
  Normal  Started    4m    kubelet            Started container
```

---

## 3. ğŸš€ åˆ›å»ºä¸éƒ¨ç½²èµ„æºå‘½ä»¤


### 3.1 kubectl create - åˆ›å»ºæ–°èµ„æº


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl create` å°±åƒæ˜¯"æ–°å»ºæ–‡ä»¶"ï¼Œç”¨æ¥åˆ›å»ºå…¨æ–°çš„Kubernetesèµ„æºã€‚

**create vs apply çš„åŒºåˆ«**ï¼š
```
createï¼šåˆ›å»ºå…¨æ–°èµ„æºï¼ˆå¦‚æœå·²å­˜åœ¨ä¼šæŠ¥é”™ï¼‰
applyï¼šåˆ›å»ºæˆ–æ›´æ–°èµ„æºï¼ˆæ™ºèƒ½åˆå¹¶é…ç½®ï¼‰
```

**å¸¸ç”¨åˆ›å»ºå‘½ä»¤é€ŸæŸ¥**ï¼š

| åˆ›å»ºç±»å‹ | **å‘½ä»¤æ ¼å¼** | **å®é™…ç”¨é€”** |
|---------|-------------|-------------|
| **åˆ›å»ºPod** | `kubectl create -f pod.yaml` | `ç›´æ¥åˆ›å»ºå•ä¸ªå®¹å™¨åº”ç”¨` |
| **åˆ›å»ºéƒ¨ç½²** | `kubectl create deployment web --image=nginx` | `åˆ›å»ºå¯æ‰©å±•çš„åº”ç”¨éƒ¨ç½²` |
| **åˆ›å»ºæœåŠ¡** | `kubectl create service clusterip web --tcp=80:80` | `ä¸ºåº”ç”¨æä¾›ç½‘ç»œè®¿é—®` |
| **åˆ›å»ºå‘½åç©ºé—´** | `kubectl create namespace dev` | `åˆ›å»ºé¡¹ç›®éš”ç¦»ç¯å¢ƒ` |

**å®è·µç¤ºä¾‹è®²è§£**ï¼š
```bash
# å¿«é€Ÿåˆ›å»ºä¸€ä¸ªnginxåº”ç”¨éƒ¨ç½²
kubectl create deployment my-nginx --image=nginx:1.21
# è¿™ç›¸å½“äºï¼šåˆ›å»ºä¸€ä¸ªåå«my-nginxçš„éƒ¨ç½²ï¼Œä½¿ç”¨nginx 1.21ç‰ˆæœ¬é•œåƒ

# ä»æ–‡ä»¶åˆ›å»ºèµ„æºï¼ˆæ›´çµæ´»çš„æ–¹å¼ï¼‰
kubectl create -f my-app.yaml
# è¯»å–é…ç½®æ–‡ä»¶ï¼ŒæŒ‰ç…§æ–‡ä»¶ä¸­çš„é…ç½®åˆ›å»ºèµ„æº
```

### 3.2 kubectl apply - åº”ç”¨é…ç½®æ–‡ä»¶


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl apply` æ˜¯æœ€å¸¸ç”¨çš„éƒ¨ç½²å‘½ä»¤ï¼Œå®ƒå¾ˆèªæ˜ï¼š
- å¦‚æœèµ„æºä¸å­˜åœ¨ â†’ åˆ›å»ºå®ƒ
- å¦‚æœèµ„æºå·²å­˜åœ¨ â†’ æ›´æ–°å®ƒ
- å¦‚æœé…ç½®æ²¡å˜åŒ– â†’ ä»€ä¹ˆéƒ½ä¸åš

**ä¸ºä»€ä¹ˆæ¨èç”¨apply**ï¼š
- **æ™ºèƒ½æ›´æ–°** - åªä¿®æ”¹å˜åŒ–çš„éƒ¨åˆ†
- **å¹‚ç­‰æ“ä½œ** - å¤šæ¬¡æ‰§è¡Œç»“æœä¸€è‡´
- **é…ç½®ç®¡ç†** - è·Ÿè¸ªé…ç½®å˜æ›´å†å²

**å®ç”¨é…ç½®æ–‡ä»¶ç¤ºä¾‹**ï¼š
```yaml
# simple-web.yaml - ç®€å•webåº”ç”¨é…ç½®
apiVersion: apps/v1
kind: Deployment
metadata:
  name: simple-web
spec:
  replicas: 2          # è¿è¡Œ2ä¸ªå‰¯æœ¬
  selector:
    matchLabels:
      app: simple-web
  template:
    metadata:
      labels:
        app: simple-web
    spec:
      containers:
      - name: web
        image: nginx:1.21
        ports:
        - containerPort: 80
```

```bash
# åº”ç”¨è¿™ä¸ªé…ç½®
kubectl apply -f simple-web.yaml

# ä¿®æ”¹é…ç½®åå†æ¬¡åº”ç”¨ï¼ˆæ™ºèƒ½æ›´æ–°ï¼‰
kubectl apply -f simple-web.yaml
```

### 3.3 kubectl run - å¿«é€Ÿè¿è¡Œåº”ç”¨


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl run` æ˜¯æœ€å¿«é€Ÿå¯åŠ¨åº”ç”¨çš„æ–¹æ³•ï¼Œå°±åƒåŒå‡»å¯åŠ¨ç¨‹åºä¸€æ ·ç®€å•ã€‚

**é€‚ç”¨åœºæ™¯å¯¹æ¯”**ï¼š
```
å¿«é€Ÿæµ‹è¯•    â†’ kubectl run
æ­£å¼éƒ¨ç½²    â†’ kubectl apply -f deployment.yaml
ä¸´æ—¶ä»»åŠ¡    â†’ kubectl run --rm -it
```

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªnginx Pod
kubectl run my-nginx --image=nginx:1.21

# å¯åŠ¨ä¸€ä¸ªä¸´æ—¶çš„è°ƒè¯•å®¹å™¨ï¼ˆç”¨å®Œå³åˆ ï¼‰
kubectl run debug --rm -it --image=busybox -- sh
# --rm: é€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤
# -it: äº¤äº’å¼ç»ˆç«¯
# --: åé¢æ˜¯å®¹å™¨å†…æ‰§è¡Œçš„å‘½ä»¤
```

---

## 4. âœï¸ ç¼–è¾‘ä¸æ›´æ–°èµ„æºå‘½ä»¤


### 4.1 kubectl edit - åœ¨çº¿ç¼–è¾‘èµ„æº


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl edit` å°±åƒæ˜¯"å³é”®ç¼–è¾‘"ï¼Œç›´æ¥ä¿®æ”¹è¿è¡Œä¸­çš„èµ„æºé…ç½®ã€‚

**ç¼–è¾‘æµç¨‹å›¾**ï¼š
```
kubectl edit pod my-app
         â†“
    æ‰“å¼€é»˜è®¤ç¼–è¾‘å™¨
         â†“
    ä¿®æ”¹é…ç½®å‚æ•°
         â†“
    ä¿å­˜å¹¶é€€å‡º
         â†“
    K8sè‡ªåŠ¨åº”ç”¨æ›´æ”¹
```

**ä»€ä¹ˆæ—¶å€™ç”¨edit**ï¼š
- ğŸ”§ **ç´§æ€¥ä¿®å¤** - å¿«é€Ÿä¿®æ”¹è¿è¡Œä¸­çš„åº”ç”¨
- ğŸ›ï¸ **è°ƒæ•´å‚æ•°** - ä¿®æ”¹å‰¯æœ¬æ•°é‡ã€èµ„æºé™åˆ¶
- ğŸ” **å®éªŒé…ç½®** - ä¸´æ—¶æµ‹è¯•ä¸åŒå‚æ•°æ•ˆæœ

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# ç¼–è¾‘éƒ¨ç½²é…ç½®ï¼ˆå¦‚ä¿®æ”¹å‰¯æœ¬æ•°é‡ï¼‰
kubectl edit deployment my-web-app
# åœ¨ç¼–è¾‘å™¨ä¸­æ‰¾åˆ° replicas: 1ï¼Œæ”¹ä¸º replicas: 3

# ç¼–è¾‘æœåŠ¡é…ç½®ï¼ˆå¦‚ä¿®æ”¹ç«¯å£ï¼‰
kubectl edit service my-web-service
```

**âš ï¸ ç¼–è¾‘æ³¨æ„äº‹é¡¹**ï¼š
- **è°¨æ…æ“ä½œ** - ç›´æ¥ä¿®æ”¹è¿è¡Œä¸­çš„èµ„æº
- **è¯­æ³•æ£€æŸ¥** - YAMLæ ¼å¼é”™è¯¯ä¼šå¯¼è‡´åº”ç”¨å¤±è´¥
- **å¤‡ä»½é…ç½®** - é‡è¦ä¿®æ”¹å‰å…ˆå¯¼å‡ºé…ç½®å¤‡ä»½

### 4.2 kubectl replace - æ›¿æ¢èµ„æº


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl replace` æ˜¯"æ•´ä½“æ›¿æ¢"ï¼Œç”¨æ–°é…ç½®å®Œå…¨æ›¿æ¢åŸæœ‰èµ„æºã€‚

**replace vs apply åŒºåˆ«ç†è§£**ï¼š
```
apply: 
  - æ™ºèƒ½åˆå¹¶ï¼ˆåªæ›´æ–°å˜åŒ–éƒ¨åˆ†ï¼‰
  - ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå­˜åœ¨å°±æ›´æ–°
  
replace:
  - å®Œå…¨æ›¿æ¢ï¼ˆåˆ é™¤é‡å»ºï¼‰
  - èµ„æºå¿…é¡»å·²å­˜åœ¨
```

**ä½¿ç”¨åœºæ™¯**ï¼š
```bash
# å…ˆå¯¼å‡ºå½“å‰é…ç½®
kubectl get deployment my-app -o yaml > my-app-backup.yaml

# ä¿®æ”¹é…ç½®æ–‡ä»¶åæ›¿æ¢
kubectl replace -f my-app-updated.yaml

# å¼ºåˆ¶æ›¿æ¢ï¼ˆé€‚ç”¨äºé…ç½®å†²çªæƒ…å†µï¼‰
kubectl replace --force -f my-app.yaml
```

### 4.3 kubectl patch - å±€éƒ¨æ›´æ–°èµ„æº


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl patch` æ˜¯"æ‰“è¡¥ä¸"ï¼Œåªä¿®æ”¹èµ„æºçš„ç‰¹å®šéƒ¨åˆ†ï¼Œä¸å½±å“å…¶ä»–é…ç½®ã€‚

**patchçš„ä¸‰ç§ç­–ç•¥å¯¹æ¯”**ï¼š

| ç­–ç•¥ç±»å‹ | **é€‚ç”¨åœºæ™¯** | **æ“ä½œæ–¹å¼** |
|---------|-------------|-------------|
| `strategic` | `KubernetesåŸç”Ÿèµ„æº` | `æ™ºèƒ½åˆå¹¶æ•°ç»„å’Œå¯¹è±¡` |
| `merge` | `ç®€å•é”®å€¼å¯¹ä¿®æ”¹` | `åˆå¹¶JSONå¯¹è±¡` |
| `json` | `ç²¾ç¡®æ§åˆ¶ä¿®æ”¹` | `JSON Patchæ“ä½œ` |

**å®ç”¨patchç¤ºä¾‹**ï¼š
```bash
# å¿«é€Ÿä¿®æ”¹å‰¯æœ¬æ•°é‡
kubectl patch deployment my-app -p '{"spec":{"replicas":5}}'

# æ·»åŠ ç¯å¢ƒå˜é‡
kubectl patch deployment my-app --type='strategic' -p='
spec:
  template:
    spec:
      containers:
      - name: my-app
        env:
        - name: DEBUG
          value: "true"'
```

---

## 5. ğŸ—‘ï¸ åˆ é™¤ä¸æ¸…ç†èµ„æºå‘½ä»¤


### 5.1 kubectl delete - åˆ é™¤èµ„æº


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl delete` å°±æ˜¯"åˆ é™¤æ–‡ä»¶"ï¼Œä»é›†ç¾¤ä¸­ç§»é™¤ä¸éœ€è¦çš„èµ„æºã€‚

**å®‰å…¨åˆ é™¤ç­‰çº§åˆ’åˆ†**ï¼š

| å±é™©ç¨‹åº¦ | **åˆ é™¤ç±»å‹** | **å½±å“èŒƒå›´** | **å»ºè®®æ“ä½œ** |
|---------|-------------|-------------|-------------|
| â­ **ä½é£é™©** | `å•ä¸ªPod` | `å•ä¸ªå®¹å™¨å®ä¾‹` | `ç›´æ¥åˆ é™¤` |
| â­â­ **ä¸­é£é™©** | `ServiceæœåŠ¡` | `ç½‘ç»œè®¿é—®ä¸­æ–­` | `ç¡®è®¤ååˆ é™¤` |
| â­â­â­ **é«˜é£é™©** | `Deploymentéƒ¨ç½²` | `æ•´ä¸ªåº”ç”¨åœæ­¢` | `è°¨æ…åˆ é™¤` |
| â­â­â­â­ **æé«˜é£é™©** | `Namespaceå‘½åç©ºé—´` | `æ‰€æœ‰ç›¸å…³èµ„æº` | `äºŒæ¬¡ç¡®è®¤` |

**å¸¸ç”¨åˆ é™¤å‘½ä»¤**ï¼š
```bash
# åˆ é™¤å•ä¸ªPodï¼ˆæœ€å¸¸ç”¨ï¼‰
kubectl delete pod my-app-12345-abcde

# åˆ é™¤æ•´ä¸ªéƒ¨ç½²ï¼ˆä¼šåˆ é™¤æ‰€æœ‰ç›¸å…³Podï¼‰
kubectl delete deployment my-web-app

# ä»æ–‡ä»¶åˆ é™¤ï¼ˆæ‰¹é‡åˆ é™¤ï¼‰
kubectl delete -f my-app.yaml

# æŒ‰æ ‡ç­¾åˆ é™¤ï¼ˆåˆ é™¤ç¬¦åˆæ¡ä»¶çš„èµ„æºï¼‰
kubectl delete pods -l app=my-web-app
```

### 5.2 å®‰å…¨åˆ é™¤å®è·µ


**ğŸ”¸ åˆ é™¤å‰æ£€æŸ¥æ¸…å•**ï¼š
- âœ… ç¡®è®¤è¦åˆ é™¤çš„èµ„æºåç§°
- âœ… æ£€æŸ¥æ˜¯å¦æœ‰ä¾èµ–å…³ç³»
- âœ… å¤‡ä»½é‡è¦é…ç½®
- âœ… é€‰æ‹©åˆé€‚çš„åˆ é™¤æ—¶æœº

**åˆ†çº§åˆ é™¤ç­–ç•¥**ï¼š
```bash
# 1. æ¸©å’Œåˆ é™¤ï¼šç­‰å¾…Podæ­£å¸¸ç»ˆæ­¢
kubectl delete pod my-app --grace-period=30

# 2. å¼ºåˆ¶åˆ é™¤ï¼šç«‹å³ç»ˆæ­¢ï¼ˆç´§æ€¥æƒ…å†µï¼‰
kubectl delete pod my-app --force --grace-period=0

# 3. ç¡®è®¤åˆ é™¤ï¼šåˆ é™¤å‰å†æ¬¡ç¡®è®¤
kubectl delete deployment my-app --dry-run=client
# å…ˆç”¨ --dry-run é¢„è§ˆåˆ é™¤æ•ˆæœï¼Œç¡®è®¤æ— è¯¯åå»æ‰ --dry-run æ‰§è¡Œ
```

---

## 6. ğŸŒ æœåŠ¡æš´éœ²ä¸ç½‘ç»œå‘½ä»¤


### 6.1 kubectl expose - æš´éœ²æœåŠ¡


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
`kubectl expose` å°±åƒæ˜¯"å¼€åº—é“º"ï¼ŒæŠŠä½ çš„åº”ç”¨å¯¹å¤–æä¾›æœåŠ¡ï¼Œè®©åˆ«äººèƒ½å¤Ÿè®¿é—®ã€‚

**æœåŠ¡ç±»å‹å¯¹æ¯”**ï¼š

```
ClusterIPï¼šåªåœ¨é›†ç¾¤å†…éƒ¨è®¿é—®ï¼ˆå†…ç½‘æœåŠ¡ï¼‰
  ç”¨é€”ï¼šæ•°æ®åº“ã€å†…éƒ¨API
  è®¿é—®ï¼šåªæœ‰é›†ç¾¤å†…çš„åº”ç”¨å¯ä»¥è®¿é—®

NodePortï¼šé€šè¿‡èŠ‚ç‚¹ç«¯å£è®¿é—®ï¼ˆå¯¹å¤–æœåŠ¡ï¼‰
  ç”¨é€”ï¼šWebåº”ç”¨ã€å¯¹å¤–API
  è®¿é—®ï¼šå¤–éƒ¨ç”¨æˆ·é€šè¿‡ èŠ‚ç‚¹IP:ç«¯å£ è®¿é—®

LoadBalancerï¼šé€šè¿‡è´Ÿè½½å‡è¡¡å™¨è®¿é—®ï¼ˆäº‘ç«¯æœåŠ¡ï¼‰
  ç”¨é€”ï¼šç”Ÿäº§ç¯å¢ƒWebåº”ç”¨
  è®¿é—®ï¼šå¤–éƒ¨ç”¨æˆ·é€šè¿‡è´Ÿè½½å‡è¡¡å™¨IPè®¿é—®
```

**å®ç”¨æš´éœ²æœåŠ¡ç¤ºä¾‹**ï¼š
```bash
# ä¸ºéƒ¨ç½²åˆ›å»ºé›†ç¾¤å†…æœåŠ¡ï¼ˆæœ€å¸¸ç”¨ï¼‰
kubectl expose deployment my-web-app --port=80 --target-port=8080 --type=ClusterIP

# åˆ›å»ºå¯¹å¤–è®¿é—®æœåŠ¡
kubectl expose deployment my-web-app --port=80 --type=NodePort

# æŒ‡å®šå…·ä½“çš„NodePortç«¯å£
kubectl expose deployment my-web-app --port=80 --type=NodePort --node-port=30080
```

### 6.2 ç«¯å£æ˜ å°„ç†è§£


**ğŸ”¸ ç«¯å£æ¦‚å¿µè§£æ**ï¼š

```
å¤–éƒ¨è®¿é—®ç«¯å£ â†’ Serviceç«¯å£ â†’ å®¹å™¨ç«¯å£
     â†“            â†“         â†“
  (ç”¨æˆ·è®¿é—®)    (æœåŠ¡æ¥æ”¶)  (åº”ç”¨ç›‘å¬)
   30080   â†’     80    â†’    8080
```

**ç«¯å£æ˜ å°„å®é™…æ¡ˆä¾‹**ï¼š
```bash
# åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„WebæœåŠ¡æš´éœ²
# 1. å…ˆåˆ›å»ºéƒ¨ç½²
kubectl create deployment nginx-web --image=nginx:1.21

# 2. æš´éœ²ä¸ºæœåŠ¡
kubectl expose deployment nginx-web --port=80 --target-port=80 --type=NodePort

# 3. æŸ¥çœ‹æœåŠ¡è¯¦æƒ…
kubectl get service nginx-web
# è¾“å‡ºï¼š
# NAME        TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
# nginx-web   NodePort   10.96.123.45    <none>        80:32145/TCP   1m

# è®¿é—®æ–¹å¼ï¼šhttp://èŠ‚ç‚¹IP:32145
```

---

## 7. ğŸƒâ€â™‚ï¸ å®æˆ˜æ“ä½œæ¼”ç»ƒ


### 7.1 å®Œæ•´åº”ç”¨éƒ¨ç½²æµç¨‹


**åœºæ™¯ï¼šéƒ¨ç½²ä¸€ä¸ªç®€å•çš„Webåº”ç”¨å¹¶å¯¹å¤–æä¾›æœåŠ¡**

**æ­¥éª¤1ï¼šåˆ›å»ºåº”ç”¨éƒ¨ç½²**
```bash
# åˆ›å»ºnginxéƒ¨ç½²ï¼Œè¿è¡Œ3ä¸ªå‰¯æœ¬
kubectl create deployment web-demo --image=nginx:1.21 --replicas=3
```

**æ­¥éª¤2ï¼šæ£€æŸ¥éƒ¨ç½²çŠ¶æ€**
```bash
# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get deployments

# æŸ¥çœ‹Podè¿è¡Œæƒ…å†µ
kubectl get pods -l app=web-demo

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚æœæœ‰é—®é¢˜ï¼‰
kubectl describe deployment web-demo
```

**æ­¥éª¤3ï¼šæš´éœ²æœåŠ¡**
```bash
# åˆ›å»ºæœåŠ¡ï¼Œè®©å¤–éƒ¨å¯ä»¥è®¿é—®
kubectl expose deployment web-demo --port=80 --type=NodePort
```

**æ­¥éª¤4ï¼šéªŒè¯è®¿é—®**
```bash
# æŸ¥çœ‹æœåŠ¡ä¿¡æ¯
kubectl get service web-demo

# è·å–è®¿é—®åœ°å€
kubectl get nodes -o wide  # è·å–èŠ‚ç‚¹IP
kubectl get service web-demo  # è·å–ç«¯å£å·
# ç„¶åé€šè¿‡ http://èŠ‚ç‚¹IP:ç«¯å£å· è®¿é—®åº”ç”¨
```

### 7.2 æ•…éšœæ’é™¤æ¼”ç»ƒ


**ğŸ”¸ å¸¸è§é—®é¢˜è¯Šæ–­æµç¨‹**

```
åº”ç”¨æ— æ³•å¯åŠ¨æ£€æŸ¥æµç¨‹ï¼š
1. kubectl get pods                    â† æ£€æŸ¥PodçŠ¶æ€
2. kubectl describe pod <pod-name>     â† æŸ¥çœ‹è¯¦ç»†é”™è¯¯
3. kubectl logs <pod-name>             â† æŸ¥çœ‹åº”ç”¨æ—¥å¿—
4. æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤é—®é¢˜
```

**å®ç”¨æ•…éšœæ’é™¤å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹Podæ—¥å¿—ï¼ˆæŸ¥æ‰¾é”™è¯¯ä¿¡æ¯ï¼‰
kubectl logs my-app-12345-abcde

# æŸ¥çœ‹å‰ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—ï¼ˆPodé‡å¯åï¼‰
kubectl logs my-app-12345-abcde --previous

# è¿›å…¥å®¹å™¨å†…éƒ¨è°ƒè¯•
kubectl exec -it my-app-12345-abcde -- /bin/bash

# æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ
kubectl top pods
```

### 7.3 é…ç½®æ›´æ–°æ¼”ç»ƒ


**åœºæ™¯ï¼šéœ€è¦æ›´æ–°åº”ç”¨ç‰ˆæœ¬æˆ–ä¿®æ”¹é…ç½®**

**æ–¹æ³•1ï¼šä½¿ç”¨kubectl setå‘½ä»¤ï¼ˆæ¨èï¼‰**
```bash
# æ›´æ–°é•œåƒç‰ˆæœ¬
kubectl set image deployment/web-demo nginx=nginx:1.22

# æŸ¥çœ‹æ›´æ–°çŠ¶æ€
kubectl rollout status deployment/web-demo

# å¦‚æœæ›´æ–°æœ‰é—®é¢˜ï¼Œå›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
kubectl rollout undo deployment/web-demo
```

**æ–¹æ³•2ï¼šä¿®æ”¹å‰¯æœ¬æ•°é‡**
```bash
# æ‰©å±•åº”ç”¨ï¼ˆå¢åŠ å‰¯æœ¬ï¼‰
kubectl scale deployment web-demo --replicas=5

# ç¼©å‡åº”ç”¨ï¼ˆå‡å°‘å‰¯æœ¬ï¼‰
kubectl scale deployment web-demo --replicas=2
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå‘½ä»¤


```
ğŸ”¸ èµ„æºæŸ¥çœ‹ï¼škubectl get, kubectl describe
ğŸ”¸ èµ„æºåˆ›å»ºï¼škubectl create, kubectl apply, kubectl run
ğŸ”¸ èµ„æºæ›´æ–°ï¼škubectl edit, kubectl patch, kubectl replace
ğŸ”¸ èµ„æºåˆ é™¤ï¼škubectl delete
ğŸ”¸ æœåŠ¡æš´éœ²ï¼škubectl expose
ğŸ”¸ æ•…éšœæ’é™¤ï¼škubectl logs, kubectl exec
```

### 8.2 å‘½ä»¤ä½¿ç”¨ä¼˜å…ˆçº§


**ğŸ”¹ æ—¥å¸¸æ“ä½œé¢‘ç‡æ’åº**ï¼š
1. **kubectl get** - æŸ¥çœ‹èµ„æºçŠ¶æ€ `[æ¯å¤©ä½¿ç”¨]`
2. **kubectl apply** - éƒ¨ç½²å’Œæ›´æ–°åº”ç”¨ `[æ¯å¤©ä½¿ç”¨]`
3. **kubectl logs** - æŸ¥çœ‹æ—¥å¿—æ’é”™ `[ç»å¸¸ä½¿ç”¨]`
4. **kubectl describe** - è¯¦ç»†æ•…éšœè¯Šæ–­ `[ç»å¸¸ä½¿ç”¨]`
5. **kubectl delete** - æ¸…ç†èµ„æº `[å®šæœŸä½¿ç”¨]`
6. **kubectl edit** - å¿«é€Ÿä¿®æ”¹é…ç½® `[å¶å°”ä½¿ç”¨]`

### 8.3 æ–°æ‰‹é¿å‘æŒ‡å—


**âš ï¸ å¸¸è§é”™è¯¯é¢„é˜²**ï¼š

```
è¯¯åŒº1ï¼šç›´æ¥åˆ é™¤Podä»¥ä¸ºåˆ é™¤äº†åº”ç”¨
æ­£ç¡®ï¼šåˆ é™¤Deploymentæ‰æ˜¯åˆ é™¤æ•´ä¸ªåº”ç”¨

è¯¯åŒº2ï¼šä¸æ£€æŸ¥èµ„æºçŠ¶æ€å°±è®¤ä¸ºéƒ¨ç½²æˆåŠŸ
æ­£ç¡®ï¼šç”¨kubectl getå’Œdescribeç¡®è®¤çŠ¶æ€

è¯¯åŒº3ï¼šå¿˜è®°åˆ›å»ºServiceå¯¼è‡´åº”ç”¨æ— æ³•è®¿é—®
æ­£ç¡®ï¼šéƒ¨ç½²åè¦ç”¨exposeæš´éœ²æœåŠ¡

è¯¯åŒº4ï¼šä¸å¤‡ä»½é…ç½®å°±ç›´æ¥ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒ
æ­£ç¡®ï¼šå…ˆç”¨--dry-runé¢„è§ˆï¼Œå†å°å¿ƒæ“ä½œ
```

### 8.4 é«˜æ•ˆä½¿ç”¨æŠ€å·§


**ğŸ¯ æå‡æ•ˆç‡çš„å°æŠ€å·§**ï¼š

```bash
# 1. ä½¿ç”¨åˆ«åç®€åŒ–å‘½ä»¤
alias k=kubectl
alias kg="kubectl get"
alias kd="kubectl describe"

# 2. ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ‰¹é‡æ“ä½œ
kubectl get pods -l app=web-demo
kubectl delete pods -l environment=test

# 3. è¾“å‡ºæ ¼å¼åŒ–
kubectl get pods -o wide  # è¯¦ç»†ä¿¡æ¯
kubectl get pods -o yaml  # YAMLæ ¼å¼
kubectl get pods -o json  # JSONæ ¼å¼

# 4. å®æ—¶ç›‘æ§èµ„æºå˜åŒ–
kubectl get pods --watch
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- kubectlå‘½ä»¤å¦‚é¥æ§ï¼Œé›†ç¾¤èµ„æºå…¨æŒæ§
- getæŸ¥çœ‹describeè¯¦ï¼Œcreate applyæ¥éƒ¨ç½²
- editä¿®æ”¹patchæ‰“è¡¥ï¼Œdeleteæ¸…ç†exposeæœåŠ¡
- logsæ’é”™execè°ƒè¯•ï¼Œé—®é¢˜è§£å†³æœ‰ç« æ³•