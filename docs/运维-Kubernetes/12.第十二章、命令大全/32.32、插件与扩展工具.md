---
title: 32ã€æ’ä»¶ä¸æ‰©å±•å·¥å…·
---
## ğŸ“š ç›®å½•

1. [Kubernetesæ’ä»¶ç”Ÿæ€æ¦‚è¿°](#1-Kubernetesæ’ä»¶ç”Ÿæ€æ¦‚è¿°)
2. [Krewæ’ä»¶ç®¡ç†å™¨è¯¦è§£](#2-Krewæ’ä»¶ç®¡ç†å™¨è¯¦è§£)
3. [å¿…å¤‡æ’ä»¶å·¥å…·è¯¦è§£](#3-å¿…å¤‡æ’ä»¶å·¥å…·è¯¦è§£)
4. [é«˜çº§æ‰©å±•åŠŸèƒ½](#4-é«˜çº§æ‰©å±•åŠŸèƒ½)
5. [å®ç”¨æ“ä½œæŠ€å·§](#5-å®ç”¨æ“ä½œæŠ€å·§)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ Kubernetesæ’ä»¶ç”Ÿæ€æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Kubernetesæ’ä»¶


**ğŸ’¡ ç®€å•ç†è§£**ï¼š
Kubernetesæ’ä»¶å°±åƒæ˜¯ç»™ä½ çš„`kubectl`å·¥å…·ç®±æ·»åŠ æ–°å·¥å…·ã€‚å°±åƒä½ ç”¨æ‰‹æœºæ—¶å¯ä»¥ä¸‹è½½å„ç§APPæ¥æ‰©å±•åŠŸèƒ½ä¸€æ ·ï¼Œkubectlä¹Ÿå¯ä»¥é€šè¿‡æ’ä»¶æ¥è·å¾—æ›´å¤šå®ç”¨åŠŸèƒ½ã€‚

```
åŸç”ŸkubectlåŠŸèƒ½ï¼š
kubectl get pods     â† åŸºæœ¬æŸ¥çœ‹åŠŸèƒ½
kubectl apply -f     â† åŸºæœ¬éƒ¨ç½²åŠŸèƒ½
kubectl logs         â† åŸºæœ¬æ—¥å¿—åŠŸèƒ½

å®‰è£…æ’ä»¶åï¼š
kubectl ctx          â† å¿«é€Ÿåˆ‡æ¢é›†ç¾¤ç¯å¢ƒ
kubectl ns           â† å¿«é€Ÿåˆ‡æ¢å‘½åç©ºé—´
kubectl tree         â† å¯è§†åŒ–èµ„æºå…³ç³»
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ’ä»¶


**ğŸ¯ æ ¸å¿ƒä»·å€¼**ï¼š
- **æé«˜æ•ˆç‡**ï¼šåŸæœ¬éœ€è¦å¤šæ­¥æ“ä½œçš„ï¼Œä¸€ä¸ªå‘½ä»¤æå®š
- **å¢å¼ºåŠŸèƒ½**ï¼škubectlåŸç”ŸåŠŸèƒ½æœ‰é™ï¼Œæ’ä»¶è¡¥å……æ›´å¤šå®ç”¨åŠŸèƒ½  
- **ç®€åŒ–æ“ä½œ**ï¼šå¤æ‚çš„ç®¡ç†ä»»åŠ¡å˜å¾—ç®€å•ç›´è§‚
- **ä¸“ä¸šå·¥å…·**ï¼šé’ˆå¯¹ç‰¹å®šåœºæ™¯çš„ä¸“ä¸šåŒ–å·¥å…·

**ğŸ“Š æ•ˆç‡å¯¹æ¯”**ï¼š
```
åˆ‡æ¢å‘½åç©ºé—´ï¼š
åŸç”Ÿæ–¹æ³•ï¼škubectl config set-context --current --namespace=production
æ’ä»¶æ–¹æ³•ï¼škubectl ns production

æŸ¥çœ‹èµ„æºå…³ç³»ï¼š
åŸç”Ÿæ–¹æ³•ï¼šéœ€è¦åˆ†åˆ«æŸ¥çœ‹å¤šä¸ªèµ„æºï¼Œäººå·¥åˆ†æå…³ç³»
æ’ä»¶æ–¹æ³•ï¼škubectl tree deployment nginx-appï¼ˆä¸€ç›®äº†ç„¶ï¼‰
```

### 1.3 æ’ä»¶å·¥ä½œåŸç†


**ğŸ”§ å·¥ä½œæœºåˆ¶**ï¼š
```
kubectlå‘½ä»¤æŸ¥æ‰¾é¡ºåºï¼š
1. kubectlå†…ç½®å‘½ä»¤
2. PATHè·¯å¾„ä¸­çš„kubectl-xxxå¯æ‰§è¡Œæ–‡ä»¶
3. æ’ä»¶ç›®å½•ä¸­çš„æ’ä»¶

ç¤ºä¾‹ï¼šå½“ä½ æ‰§è¡Œkubectl ctxæ—¶
kubectlä¼šæ‰¾åˆ°kubectl-ctxæ’ä»¶å¹¶æ‰§è¡Œ
```

---

## 2. ğŸ”§ Krewæ’ä»¶ç®¡ç†å™¨è¯¦è§£


### 2.1 Krewæ˜¯ä»€ä¹ˆ


**ğŸª ç®€å•ç±»æ¯”**ï¼š
Krewå°±åƒæ˜¯kubectlçš„"åº”ç”¨å•†åº—"ã€‚å°±åƒä½ åœ¨æ‰‹æœºåº”ç”¨å•†åº—æœç´¢ã€å®‰è£…ã€ç®¡ç†APPä¸€æ ·ï¼ŒKrewè®©ä½ å¯ä»¥æœç´¢ã€å®‰è£…ã€ç®¡ç†kubectlæ’ä»¶ã€‚

**ğŸ¯ æ ¸å¿ƒåŠŸèƒ½**ï¼š
- **æœç´¢æ’ä»¶**ï¼šæ‰¾åˆ°ä½ éœ€è¦çš„åŠŸèƒ½æ’ä»¶
- **å®‰è£…ç®¡ç†**ï¼šä¸€é”®å®‰è£…å’Œå¸è½½æ’ä»¶
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šç®¡ç†æ’ä»¶çš„ç‰ˆæœ¬æ›´æ–°
- **ä¾èµ–å¤„ç†**ï¼šè‡ªåŠ¨å¤„ç†æ’ä»¶ä¾èµ–å…³ç³»

### 2.2 KrewåŸºç¡€å‘½ä»¤è¯¦è§£


#### ğŸ“¦ ç‰ˆæœ¬ä¸çŠ¶æ€æŸ¥çœ‹


```bash
# æŸ¥çœ‹Krewç‰ˆæœ¬ä¿¡æ¯
kubectl krew version
```

**ğŸ’¡ å®é™…ç”¨é€”**ï¼š
- ç¡®è®¤Krewæ˜¯å¦æ­£ç¡®å®‰è£…
- æ£€æŸ¥å½“å‰ç‰ˆæœ¬æ˜¯å¦éœ€è¦æ›´æ–°
- æ’æŸ¥æ’ä»¶é—®é¢˜æ—¶ç¡®è®¤ç‰ˆæœ¬ä¿¡æ¯

#### ğŸ” æœç´¢å¯ç”¨æ’ä»¶


```bash
# æœç´¢æ‰€æœ‰å¯ç”¨æ’ä»¶
kubectl krew search

# æœç´¢ç‰¹å®šåŠŸèƒ½çš„æ’ä»¶
kubectl krew search context     # æœç´¢ä¸Šä¸‹æ–‡ç›¸å…³æ’ä»¶
kubectl krew search log         # æœç´¢æ—¥å¿—ç›¸å…³æ’ä»¶
kubectl krew search network     # æœç´¢ç½‘ç»œç›¸å…³æ’ä»¶
```

**ğŸ“‹ æœç´¢ç»“æœç¤ºä¾‹**ï¼š
```
NAME                DESCRIPTION                           INSTALLED
ctx                 Switch between contexts quickly        no
ns                  Switch between namespaces quickly     no
tree                Show resource tree                     no
whoami              Show current user info                 no
```

#### â¬‡ï¸ æ’ä»¶å®‰è£…


```bash
# å®‰è£…å•ä¸ªæ’ä»¶
kubectl krew install ctx

# åŒæ—¶å®‰è£…å¤šä¸ªæ’ä»¶
kubectl krew install ctx ns tree whoami
```

**â±ï¸ å®‰è£…è¿‡ç¨‹**ï¼š
```
æ­£åœ¨å®‰è£…æ’ä»¶è¿‡ç¨‹ï¼š
1. ä¸‹è½½æ’ä»¶æ–‡ä»¶
2. éªŒè¯æ’ä»¶å®Œæ•´æ€§  
3. å®‰è£…åˆ°æŒ‡å®šç›®å½•
4. æ›´æ–°PATHç¯å¢ƒå˜é‡

å®‰è£…æˆåŠŸæ ‡å¿—ï¼š
âœ“ Installed plugin: ctx
```

#### ğŸ“‹ å·²å®‰è£…æ’ä»¶ç®¡ç†


```bash
# æŸ¥çœ‹å·²å®‰è£…çš„æ’ä»¶
kubectl krew list

# æ›´æ–°æ‰€æœ‰æ’ä»¶
kubectl krew upgrade

# å¸è½½æ’ä»¶
kubectl krew uninstall tree
```

### 2.3 Krewå®‰è£…é…ç½®


**ğŸš€ å¿«é€Ÿå®‰è£…**ï¼š
```bash
# Linux/macOSå®‰è£…è„šæœ¬
curl -fsSLO https://github.com/kubernetes-sigs/krew/releases/latest/download/krew.tar.gz
tar zxvf krew.tar.gz
./krew-linux_amd64 install krew

# æ·»åŠ åˆ°PATH
export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"
```

---

## 3. ğŸ› ï¸ å¿…å¤‡æ’ä»¶å·¥å…·è¯¦è§£


### 3.1 ä¸Šä¸‹æ–‡åˆ‡æ¢æ’ä»¶ - kubectx


#### ğŸ”„ kubectl ctxå‘½ä»¤è¯¦è§£


**ğŸ’¡ è§£å†³çš„é—®é¢˜**ï¼š
åœ¨å¤šä¸ªKubernetesé›†ç¾¤ä¹‹é—´åˆ‡æ¢æ—¶ï¼ŒåŸç”Ÿå‘½ä»¤éå¸¸ç¹çã€‚ctxæ’ä»¶è®©åˆ‡æ¢å˜å¾—è¶…çº§ç®€å•ã€‚

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ä¸Šä¸‹æ–‡
kubectl ctx

# åˆ‡æ¢åˆ°æŒ‡å®šä¸Šä¸‹æ–‡
kubectl ctx production-cluster

# åˆ‡æ¢å›ä¸Šä¸€ä¸ªä¸Šä¸‹æ–‡
kubectl ctx -

# æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡
kubectl ctx -c
```

**ğŸ“Š æ•ˆç‡å¯¹æ¯”**ï¼š
```
åŸç”Ÿåˆ‡æ¢å‘½ä»¤ï¼š
kubectl config use-context arn:aws:eks:us-west-2:123456789:cluster/production

æ’ä»¶åˆ‡æ¢å‘½ä»¤ï¼š
kubectl ctx production

èŠ‚çœæ—¶é—´ï¼šä»30ç§’æ‰“å­— â†’ 3ç§’å®Œæˆ
```

#### ğŸ·ï¸ kubectl nså‘½ä»¤è¯¦è§£


**ğŸ¯ æ ¸å¿ƒä½œç”¨**ï¼š
å¿«é€Ÿåœ¨ä¸åŒå‘½åç©ºé—´ä¹‹é—´åˆ‡æ¢ï¼Œé¿å…æ¯æ¬¡éƒ½è¦æŒ‡å®š`-n namespace`å‚æ•°ã€‚

```bash
# æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´
kubectl ns

# åˆ‡æ¢åˆ°æŒ‡å®šå‘½åç©ºé—´
kubectl ns production

# åˆ‡æ¢å›é»˜è®¤å‘½åç©ºé—´
kubectl ns default

# åˆ‡æ¢å›ä¸Šä¸€ä¸ªå‘½åç©ºé—´
kubectl ns -
```

**ğŸ’¡ å®ç”¨åœºæ™¯**ï¼š
```
å¼€å‘ç¯å¢ƒåˆ‡æ¢ï¼š
kubectl ns dev          # åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒ
kubectl get pods        # æŸ¥çœ‹å¼€å‘ç¯å¢ƒçš„Pod

æµ‹è¯•ç¯å¢ƒåˆ‡æ¢ï¼š  
kubectl ns test         # åˆ‡æ¢åˆ°æµ‹è¯•ç¯å¢ƒ
kubectl get svc         # æŸ¥çœ‹æµ‹è¯•ç¯å¢ƒçš„æœåŠ¡

ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢ï¼š
kubectl ns production   # åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
kubectl get deploy      # æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```

### 3.2 èµ„æºå…³ç³»å¯è§†åŒ– - treeæ’ä»¶


#### ğŸŒ³ kubectl treeå‘½ä»¤è¯¦è§£


**ğŸ¯ æ ¸å¿ƒåŠŸèƒ½**ï¼š
æ˜¾ç¤ºKubernetesèµ„æºä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œè®©ä½ ç›´è§‚çœ‹åˆ°èµ„æºçš„ç»„ç»‡ç»“æ„ã€‚

```bash
# æŸ¥çœ‹DeploymentåŠå…¶ç›¸å…³èµ„æº
kubectl tree deployment nginx-app

# æŸ¥çœ‹Serviceç›¸å…³çš„æ‰€æœ‰èµ„æº
kubectl tree service web-service

# æŸ¥çœ‹æŒ‡å®šå‘½åç©ºé—´çš„èµ„æºæ ‘
kubectl tree deployment nginx-app -n production
```

**ğŸ“Š å¯è§†åŒ–æ•ˆæœç¤ºä¾‹**ï¼š
```
nginx-deployment
â”œâ”€â”€ ReplicaSet/nginx-deployment-7d9c8f5b6c
â”‚   â”œâ”€â”€ Pod/nginx-deployment-7d9c8f5b6c-h8k2m
â”‚   â”œâ”€â”€ Pod/nginx-deployment-7d9c8f5b6c-m9n3p  
â”‚   â””â”€â”€ Pod/nginx-deployment-7d9c8f5b6c-q4r7s
â””â”€â”€ Service/nginx-service
    â””â”€â”€ Endpoints/nginx-service
```

**ğŸ’¡ å®ç”¨ä»·å€¼**ï¼š
- **å¿«é€Ÿå®šä½é—®é¢˜**ï¼šçœ‹åˆ°Podå±äºå“ªä¸ªReplicaSet
- **ç†è§£èµ„æºå…³ç³»**ï¼šæ˜ç¡®Serviceå…³è”çš„Endpoints
- **æ¶æ„æ¢³ç†**ï¼šç†è§£æ•´ä¸ªåº”ç”¨çš„èµ„æºç»“æ„

### 3.3 ç”¨æˆ·èº«ä»½æŸ¥çœ‹ - whoamiæ’ä»¶


#### ğŸ‘¤ kubectl whoamiå‘½ä»¤è¯¦è§£


**ğŸ” æ ¸å¿ƒä½œç”¨**ï¼š
å¿«é€ŸæŸ¥çœ‹å½“å‰kubectlä½¿ç”¨çš„ç”¨æˆ·èº«ä»½å’Œæƒé™ä¿¡æ¯ï¼Œç‰¹åˆ«åœ¨å¤šç”¨æˆ·ç¯å¢ƒä¸­å¾ˆæœ‰ç”¨ã€‚

```bash
# æŸ¥çœ‹å½“å‰ç”¨æˆ·ä¿¡æ¯
kubectl whoami

# è¯¦ç»†è¾“å‡ºç”¨æˆ·æƒé™ä¿¡æ¯
kubectl whoami -o yaml
```

**ğŸ“Š è¾“å‡ºä¿¡æ¯ç¤ºä¾‹**ï¼š
```
Current User: admin
Current Context: production-cluster
Current Namespace: default
Server: https://k8s-api.company.com:6443

æƒé™ä¿¡æ¯ï¼š
- cluster-admin (cluster-wide)
- developer (namespace: dev)
- viewer (namespace: monitoring)
```

### 3.4 é…ç½®æ¸…ç† - neatæ’ä»¶


#### ğŸ§¹ kubectl neatå‘½ä»¤è¯¦è§£


**ğŸ’¡ è§£å†³çš„é—®é¢˜**ï¼š
å½“ä½ ç”¨`kubectl get -o yaml`è·å–èµ„æºé…ç½®æ—¶ï¼Œè¾“å‡ºåŒ…å«å¾ˆå¤šç³»ç»Ÿç”Ÿæˆçš„å­—æ®µï¼Œneatæ’ä»¶å¸®ä½ æ¸…ç†æ‰è¿™äº›æ— ç”¨ä¿¡æ¯ã€‚

```bash
# æ¸…ç†Podé…ç½®è¾“å‡º
kubectl get pod nginx-pod -o yaml | kubectl neat

# æ¸…ç†Serviceé…ç½®
kubectl get svc web-service -o yaml | kubectl neat

# ç›´æ¥ä¿å­˜æ¸…ç†åçš„é…ç½®
kubectl get deploy nginx-app -o yaml | kubectl neat > clean-deploy.yaml
```

**ğŸ“Š æ¸…ç†æ•ˆæœå¯¹æ¯”**ï¼š
```
åŸå§‹è¾“å‡ºï¼ˆåŒ…å«å¤§é‡ç³»ç»Ÿå­—æ®µï¼‰ï¼š
metadata:
  creationTimestamp: "2023-09-19T10:30:00Z"
  generation: 1
  resourceVersion: "123456"
  uid: "12345678-1234-1234-1234-123456789012"
  managedFields: [...]

æ¸…ç†åè¾“å‡ºï¼ˆåªä¿ç•™æ ¸å¿ƒé…ç½®ï¼‰ï¼š
metadata:
  name: nginx-app
  labels:
    app: nginx
```

### 3.5 èµ„æºå®¹é‡æŸ¥çœ‹ - resource-capacityæ’ä»¶


#### ğŸ“Š kubectl resource-capacityå‘½ä»¤è¯¦è§£


**ğŸ¯ æ ¸å¿ƒåŠŸèƒ½**ï¼š
æŸ¥çœ‹é›†ç¾¤ä¸­å„èŠ‚ç‚¹çš„èµ„æºä½¿ç”¨æƒ…å†µå’Œå®¹é‡ä¿¡æ¯ï¼Œå¸®åŠ©ä½ äº†è§£é›†ç¾¤èµ„æºçŠ¶æ€ã€‚

```bash
# æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹çš„èµ„æºå®¹é‡
kubectl resource-capacity

# æŒ‰å‘½åç©ºé—´æŸ¥çœ‹èµ„æºä½¿ç”¨
kubectl resource-capacity --namespace production

# åªæ˜¾ç¤ºCPUå’Œå†…å­˜ä¿¡æ¯
kubectl resource-capacity --resource-type cpu,memory
```

**ğŸ“Š è¾“å‡ºç¤ºä¾‹**ï¼š
```
NODE                 CPU REQUESTS   CPU LIMITS    MEMORY REQUESTS   MEMORY LIMITS
worker-node-1        2.5/4 (62%)    3.5/4 (87%)   4Gi/8Gi (50%)     6Gi/8Gi (75%)
worker-node-2        1.8/4 (45%)    2.8/4 (70%)   3Gi/8Gi (37%)     5Gi/8Gi (62%)
worker-node-3        3.2/4 (80%)    3.8/4 (95%)   5Gi/8Gi (62%)     7Gi/8Gi (87%)

TOTAL                7.5/12 (62%)   10.1/12 (84%)  12Gi/24Gi (50%)   18Gi/24Gi (75%)
```

---

## 4. ğŸ›ï¸ é«˜çº§æ‰©å±•åŠŸèƒ½


### 4.1 æ‰¹é‡æ’ä»¶å®‰è£…ç­–ç•¥


**ğŸ—ï¸ æ¨èæ’ä»¶å¥—è£…**ï¼š

```bash
# åŸºç¡€å¿…å¤‡å¥—è£…
kubectl krew install ctx ns whoami neat

# è¿ç»´ç®¡ç†å¥—è£…  
kubectl krew install tree resource-capacity node-shell

# è°ƒè¯•åˆ†æå¥—è£…
kubectl krew install debug-pod stern tail logs
```

**ğŸ“‹ æ’ä»¶åŠŸèƒ½åˆ†ç±»**ï¼š
```
ğŸ”§ ç¯å¢ƒç®¡ç†ç±»ï¼š
- ctx: é›†ç¾¤ä¸Šä¸‹æ–‡åˆ‡æ¢
- ns: å‘½åç©ºé—´åˆ‡æ¢

ğŸ” èµ„æºæŸ¥çœ‹ç±»ï¼š  
- tree: èµ„æºå…³ç³»å¯è§†åŒ–
- resource-capacity: èµ„æºå®¹é‡æŸ¥çœ‹
- whoami: ç”¨æˆ·èº«ä»½æŸ¥çœ‹

ğŸ› ï¸ é…ç½®ç®¡ç†ç±»ï¼š
- neat: æ¸…ç†èµ„æºé…ç½®
- edit-status: ç¼–è¾‘èµ„æºçŠ¶æ€

ğŸš¨ è°ƒè¯•è¿ç»´ç±»ï¼š
- debug-pod: è°ƒè¯•Podé—®é¢˜
- node-shell: èŠ‚ç‚¹Shellè®¿é—®
- stern: å¤šPodæ—¥å¿—èšåˆ
```

### 4.2 æ’ä»¶è‡ªå®šä¹‰é…ç½®


**âš™ï¸ ä¸ªæ€§åŒ–è®¾ç½®**ï¼š

```bash
# è®¾ç½®ctxæ’ä»¶çš„é»˜è®¤è¡Œä¸º
export KUBECTX_CURRENT_FGCOLOR=$(tput setaf 6)    # é’è‰²æ˜¾ç¤ºå½“å‰ä¸Šä¸‹æ–‡
export KUBECTX_CURRENT_BGCOLOR=$(tput setab 7)    # ç™½è‰²èƒŒæ™¯

# è®¾ç½®nsæ’ä»¶çš„é…ç½®
export KUBENS_CURRENT_FGCOLOR=$(tput setaf 2)     # ç»¿è‰²æ˜¾ç¤ºå½“å‰å‘½åç©ºé—´
```

### 4.3 æ’ä»¶ä½¿ç”¨æœ€ä½³å®è·µ


**ğŸ“Œ é«˜æ•ˆä½¿ç”¨æŠ€å·§**ï¼š

```bash
# 1. åˆ›å»ºå¸¸ç”¨ç»„åˆåˆ«å
alias kgp='kubectl get pods'
alias kgs='kubectl get svc'  
alias kgd='kubectl get deploy'
alias kctx='kubectl ctx'
alias kns='kubectl ns'

# 2. è®¾ç½®è‡ªåŠ¨è¡¥å…¨
echo 'source <(kubectl completion bash)' >> ~/.bashrc

# 3. åˆ›å»ºå·¥ä½œç¯å¢ƒåˆ‡æ¢è„šæœ¬
#!/bin/bash
# switch-env.sh
kubectl ctx $1-cluster
kubectl ns $1
echo "å·²åˆ‡æ¢åˆ° $1 ç¯å¢ƒ"
```

---

## 5. ğŸ’¡ å®ç”¨æ“ä½œæŠ€å·§


### 5.1 æ—¥å¸¸å·¥ä½œæµç¨‹ä¼˜åŒ–


**ğŸš€ é«˜æ•ˆå·¥ä½œæµ**ï¼š

```bash
# æ—©æ™¨å¯åŠ¨æ£€æŸ¥æµç¨‹
kubectl ctx production        # åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
kubectl ns default           # åˆ‡æ¢åˆ°é»˜è®¤å‘½åç©ºé—´  
kubectl whoami               # ç¡®è®¤å½“å‰ç”¨æˆ·èº«ä»½
kubectl resource-capacity    # æŸ¥çœ‹é›†ç¾¤èµ„æºçŠ¶æ€

# åº”ç”¨éƒ¨ç½²æ£€æŸ¥æµç¨‹
kubectl tree deployment myapp              # æŸ¥çœ‹åº”ç”¨èµ„æºç»“æ„
kubectl get pods | grep myapp             # æ£€æŸ¥PodçŠ¶æ€
kubectl logs -f deployment/myapp          # æŸ¥çœ‹åº”ç”¨æ—¥å¿—
```

### 5.2 å¤šç¯å¢ƒç®¡ç†ç­–ç•¥


**ğŸ—ï¸ ç¯å¢ƒåˆ‡æ¢æœ€ä½³å®è·µ**ï¼š

```bash
# å¼€å‘ç¯å¢ƒæ“ä½œ
kubectl ctx dev-cluster && kubectl ns development
kubectl get all                           # æŸ¥çœ‹å¼€å‘ç¯å¢ƒèµ„æº

# æµ‹è¯•ç¯å¢ƒæ“ä½œ  
kubectl ctx test-cluster && kubectl ns testing
kubectl apply -f test-configs/            # éƒ¨ç½²æµ‹è¯•é…ç½®

# ç”Ÿäº§ç¯å¢ƒæ“ä½œï¼ˆè°¨æ…ï¼‰
kubectl ctx prod-cluster && kubectl ns production  
kubectl get deploy --show-labels          # ç¡®è®¤ç”Ÿäº§éƒ¨ç½²çŠ¶æ€
```

### 5.3 æ•…éšœæ’æŸ¥å·¥ä½œæµ


**ğŸ” ç³»ç»ŸåŒ–æ’æŸ¥æ­¥éª¤**ï¼š

```bash
# ç¬¬ä¸€æ­¥ï¼šç¡®è®¤ç¯å¢ƒå’Œèº«ä»½
kubectl ctx                              # ç¡®è®¤å½“å‰é›†ç¾¤
kubectl ns                               # ç¡®è®¤å½“å‰å‘½åç©ºé—´
kubectl whoami                           # ç¡®è®¤ç”¨æˆ·æƒé™

# ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹èµ„æºç»“æ„
kubectl tree deployment problem-app      # æŸ¥çœ‹é—®é¢˜åº”ç”¨ç»“æ„
kubectl get events --sort-by='.lastTimestamp'  # æŸ¥çœ‹æœ€è¿‘äº‹ä»¶

# ç¬¬ä¸‰æ­¥ï¼šæ·±å…¥åˆ†æ
kubectl resource-capacity               # æ£€æŸ¥èµ„æºä½¿ç”¨æƒ…å†µ
kubectl describe pod problem-pod       # è¯¦ç»†æŸ¥çœ‹é—®é¢˜Pod
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå‘½ä»¤


```
ğŸ”¸ Krewç®¡ç†ï¼škubectl krew version/search/install/list
ğŸ”¸ ç¯å¢ƒåˆ‡æ¢ï¼škubectl ctx/nsï¼ˆå¿«é€Ÿåˆ‡æ¢é›†ç¾¤å’Œå‘½åç©ºé—´ï¼‰
ğŸ”¸ èµ„æºå¯è§†åŒ–ï¼škubectl treeï¼ˆæŸ¥çœ‹èµ„æºå…³ç³»ï¼‰
ğŸ”¸ èº«ä»½ç¡®è®¤ï¼škubectl whoamiï¼ˆç¡®è®¤å½“å‰ç”¨æˆ·ï¼‰
ğŸ”¸ é…ç½®æ¸…ç†ï¼škubectl neatï¼ˆæ¸…ç†é…ç½®è¾“å‡ºï¼‰
ğŸ”¸ å®¹é‡ç›‘æ§ï¼škubectl resource-capacityï¼ˆèµ„æºä½¿ç”¨æƒ…å†µï¼‰
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ’ä»¶çš„ä»·å€¼**ï¼š
```
æ•ˆç‡æå‡ï¼š
åŸç”Ÿkubectl: åŠŸèƒ½åŸºç¡€ï¼Œæ“ä½œç¹ç
æ’ä»¶å¢å¼º: åŠŸèƒ½ä¸°å¯Œï¼Œæ“ä½œç®€ä¾¿

ç®¡ç†ä¾¿åˆ©ï¼š
Krew: ç»Ÿä¸€çš„æ’ä»¶ç®¡ç†å¹³å°
ç±»ä¼¼: æ‰‹æœºåº”ç”¨å•†åº—çš„æ¦‚å¿µ
```

**ğŸ”¹ å®é™…åº”ç”¨åœºæ™¯**ï¼š
```
æ—¥å¸¸å¼€å‘ï¼š
- ctx/nså¿«é€Ÿåˆ‡æ¢ç¯å¢ƒ
- treeå¯è§†åŒ–èµ„æºç»“æ„  
- whoamiç¡®è®¤æ“ä½œèº«ä»½

è¿ç»´ç®¡ç†ï¼š
- resource-capacityç›‘æ§èµ„æº
- neatæ¸…ç†é…ç½®æ–‡ä»¶
- æ‰¹é‡å®‰è£…ç®¡ç†å·¥å…·æ’ä»¶

æ•…éšœæ’æŸ¥ï¼š
- ç³»ç»ŸåŒ–çš„æ’æŸ¥æµç¨‹
- å¤šå·¥å…·ç»„åˆä½¿ç”¨
- å¿«é€Ÿå®šä½é—®é¢˜æ ¹æº
```

### 6.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å·¥ä½œæ•ˆç‡æå‡**ï¼š
- **ç¯å¢ƒåˆ‡æ¢**ï¼šä»30ç§’å‡å°‘åˆ°3ç§’
- **èµ„æºç†è§£**ï¼šå¯è§†åŒ–ä»£æ›¿äººå·¥åˆ†æ
- **é…ç½®ç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†æ— ç”¨ä¿¡æ¯
- **ç›‘æ§æŸ¥çœ‹**ï¼šä¸€ç›®äº†ç„¶çš„èµ„æºçŠ¶æ€

**ğŸ”§ è¿ç»´è´¨é‡æå‡**ï¼š
- **æ ‡å‡†åŒ–æµç¨‹**ï¼šç»Ÿä¸€çš„æ“ä½œæ–¹å¼
- **å‡å°‘é”™è¯¯**ï¼šç®€åŒ–çš„å‘½ä»¤é™ä½å‡ºé”™ç‡
- **å¿«é€Ÿå“åº”**ï¼šé«˜æ•ˆçš„æ•…éšœæ’æŸ¥æµç¨‹
- **å›¢é˜Ÿåä½œ**ï¼šç»Ÿä¸€çš„å·¥å…·å’Œæ–¹æ³•

### 6.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ“Œ æ’ä»¶ä½¿ç”¨ç­–ç•¥**ï¼š
```
å¿…è£…æ’ä»¶ï¼šctx, ns, whoami, neat
æ¨èæ’ä»¶ï¼štree, resource-capacity  
æŒ‰éœ€å®‰è£…ï¼šæ ¹æ®å…·ä½“å·¥ä½œåœºæ™¯é€‰æ‹©

ä½¿ç”¨åŸåˆ™ï¼š
âœ… å…ˆç†è§£åŸç”Ÿå‘½ä»¤ï¼Œå†ä½¿ç”¨æ’ä»¶
âœ… æ’ä»¶æ˜¯æ•ˆç‡å·¥å…·ï¼Œä¸æ˜¯ä¸‡èƒ½å·¥å…·
âœ… å®šæœŸæ›´æ–°æ’ä»¶ï¼Œä¿æŒåŠŸèƒ½æœ€æ–°
âœ… å›¢é˜Ÿå†…ç»Ÿä¸€æ’ä»¶è§„èŒƒï¼Œä¾¿äºåä½œ
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- **Krewç®¡å•†åº—ï¼Œæ’ä»¶éšæ„è£…**
- **ctxåˆ‡é›†ç¾¤ï¼Œnsæ¢ç©ºé—´å¿«**  
- **treeçœ‹å…³ç³»ï¼ŒwhoamiçŸ¥èº«ä»½**
- **neatæ¸…é…ç½®ï¼Œcapacityçœ‹èµ„æº**

---

> **ğŸ’¡ å­¦ä¹ å»ºè®®**ï¼š
> 1. å…ˆç†Ÿç»ƒæŒæ¡åŸç”Ÿkubectlå‘½ä»¤
> 2. æ ¹æ®æ—¥å¸¸å·¥ä½œéœ€æ±‚é€‰æ‹©åˆé€‚æ’ä»¶
> 3. å»ºç«‹è‡ªå·±çš„é«˜æ•ˆå·¥ä½œæµç¨‹
> 4. å®šæœŸæ¢ç´¢æ–°æ’ä»¶ï¼ŒæŒç»­ä¼˜åŒ–æ•ˆç‡