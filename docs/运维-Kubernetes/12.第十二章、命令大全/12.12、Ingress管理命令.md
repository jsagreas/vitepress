---
title: 12ã€Ingressç®¡ç†å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [IngressåŸºæœ¬æ¦‚å¿µ](#1-ingressåŸºæœ¬æ¦‚å¿µ)
2. [IngressæŸ¥çœ‹ä¸æ£€æŸ¥å‘½ä»¤](#2-ingressæŸ¥çœ‹ä¸æ£€æŸ¥å‘½ä»¤)
3. [Ingressåˆ›å»ºä¸é…ç½®å‘½ä»¤](#3-ingressåˆ›å»ºä¸é…ç½®å‘½ä»¤)
4. [Ingressä¿®æ”¹ä¸æ›´æ–°å‘½ä»¤](#4-ingressä¿®æ”¹ä¸æ›´æ–°å‘½ä»¤)
5. [Ingressåˆ é™¤ä¸æ¸…ç†å‘½ä»¤](#5-ingressåˆ é™¤ä¸æ¸…ç†å‘½ä»¤)
6. [Ingressé«˜çº§ç®¡ç†å‘½ä»¤](#6-ingressé«˜çº§ç®¡ç†å‘½ä»¤)
7. [å®é™…åº”ç”¨åœºæ™¯ç¤ºä¾‹](#7-å®é™…åº”ç”¨åœºæ™¯ç¤ºä¾‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ IngressåŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Ingressï¼Ÿ


**é€šä¿—ç†è§£**ï¼šIngresså°±åƒæ˜¯ä½ å®¶å°åŒºçš„é—¨å«å®¤ï¼Œæ‰€æœ‰æƒ³è¦è¿›å…¥å°åŒºçš„å¤–æ¥è®¿å®¢éƒ½è¦å…ˆåœ¨é—¨å«å®¤ç™»è®°ï¼Œç„¶åé—¨å«ä¼šå‘Šè¯‰ä»–ä»¬è¦å»å“ªæ ‹æ¥¼ã€å“ªä¸ªå•å…ƒã€‚

```
ç°å®ä¸–ç•Œçš„ç±»æ¯”ï¼š
è®¿å®¢ â†’ é—¨å«å®¤ â†’ å…·ä½“ä½æˆ·
    (ç™»è®°)   (æŒ‡è·¯)

Kubernetesä¸­ï¼š
å¤–éƒ¨ç”¨æˆ· â†’ Ingress â†’ å…·ä½“Service
        (è·¯ç”±)    (è½¬å‘)
```

**æŠ€æœ¯å®šä¹‰**ï¼šIngressæ˜¯Kubernetesçš„APIå¯¹è±¡ï¼Œç”¨äºç®¡ç†é›†ç¾¤å¤–éƒ¨å¯¹é›†ç¾¤å†…æœåŠ¡çš„HTTPå’ŒHTTPSè®¿é—®

### 1.2 Ingressè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ


**æ²¡æœ‰Ingressçš„å›°æ‰°**ï¼š
```
é—®é¢˜åœºæ™¯ï¼š
- æœ‰10ä¸ªä¸åŒçš„Webåº”ç”¨è¦å¯¹å¤–æä¾›æœåŠ¡
- æ¯ä¸ªéƒ½éœ€è¦ä¸€ä¸ªLoadBalancerç±»å‹çš„Service
- ç»“æœï¼šéœ€è¦10ä¸ªå…¬ç½‘IPåœ°å€ï¼ğŸ’°æˆæœ¬å¾ˆé«˜

ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜ï¼š
Service1 â†’ LoadBalancer â†’ å…¬ç½‘IP1 (è´µï¼)
Service2 â†’ LoadBalancer â†’ å…¬ç½‘IP2 (è´µï¼)
Service3 â†’ LoadBalancer â†’ å…¬ç½‘IP3 (è´µï¼)
...
```

**æœ‰äº†Ingressçš„ä¼˜åŠ¿**ï¼š
```
ä¸€ä¸ªIngressè§£å†³æ‰€æœ‰é—®é¢˜ï¼š
å¤–éƒ¨è¯·æ±‚ â†’ Ingress(1ä¸ªå…¬ç½‘IP) â†’ æ ¹æ®åŸŸå/è·¯å¾„åˆ†å‘
                            â”œâ†’ app1.example.com â†’ Service1
                            â”œâ†’ app2.example.com â†’ Service2
                            â””â†’ api.example.com/v1 â†’ Service3

æˆæœ¬èŠ‚çœï¼š10ä¸ªIP â†’ 1ä¸ªIP ğŸ’°
```

### 1.3 Ingresså·¥ä½œåŸç†å›¾è§£


```
å¤–éƒ¨ç½‘ç»œ                    Kubernetesé›†ç¾¤å†…éƒ¨
    â”‚
    â”‚  HTTP/HTTPSè¯·æ±‚
    â”‚  www.myapp.com
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ingress    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   Ingress            â”‚
â”‚ Controller  â”‚           â”‚   Rules              â”‚
â”‚ (nginx)     â”‚           â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ - host: www.myapp.comâ”‚
    â”‚                     â”‚   paths:             â”‚
    â”‚  æ ¹æ®è§„åˆ™è½¬å‘           â”‚   - /api â†’ api-svc  â”‚
    â–¼                     â”‚   - /web â†’ web-svc   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Service    â”‚
â”‚ (ClusterIP) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Pod      â”‚
â”‚ (å®é™…åº”ç”¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ” IngressæŸ¥çœ‹ä¸æ£€æŸ¥å‘½ä»¤


### 2.1 åŸºç¡€æŸ¥çœ‹å‘½ä»¤


**æŸ¥çœ‹æ‰€æœ‰Ingressèµ„æº**
```bash
kubectl get ingress
```

**å®é™…è¾“å‡ºç¤ºä¾‹**ï¼š
```
NAME         CLASS    HOSTS               ADDRESS      PORTS   AGE
web-ingress  nginx    www.myapp.com      10.0.1.100   80,443  2d
api-ingress  nginx    api.myapp.com      10.0.1.100   80      1d
```

**å­—æ®µå«ä¹‰è§£é‡Š**ï¼š
- **NAME**: Ingressèµ„æºçš„åç§°
- **CLASS**: ä½¿ç”¨çš„Ingressæ§åˆ¶å™¨ç±»å‹ï¼ˆå¦‚nginxã€traefikï¼‰
- **HOSTS**: é…ç½®çš„åŸŸåè§„åˆ™
- **ADDRESS**: åˆ†é…çš„å¤–éƒ¨IPåœ°å€
- **PORTS**: å¼€æ”¾çš„ç«¯å£ï¼ˆ80=HTTPï¼Œ443=HTTPSï¼‰
- **AGE**: åˆ›å»ºæ—¶é—´

### 2.2 è¯¦ç»†ä¿¡æ¯æŸ¥çœ‹


**æŸ¥çœ‹Ingressè¯¦ç»†é…ç½®**
```bash
kubectl describe ingress web-ingress
```

**è¾“å‡ºå†…å®¹åˆ†æ**ï¼š
```
Name:             web-ingress
Namespace:        default
Address:          10.0.1.100
Rules:                          â† è·¯ç”±è§„åˆ™
  Host           Path  Backends
  ----           ----  --------
  www.myapp.com  
                 /        web-service:80    â† æ ¹è·¯å¾„è½¬å‘
                 /api     api-service:8080  â† APIè·¯å¾„è½¬å‘
Events:                         â† é‡è¦ï¼šæ˜¾ç¤ºåˆ›å»ºè¿‡ç¨‹ä¸­çš„é—®é¢˜
  Type    Reason  Message
  ----    ------  -------
  Normal  Sync    Successfully configured
```

**ğŸ’¡ æ–°æ‰‹æç¤º**ï¼š`describe`å‘½ä»¤æœ€ä¸‹é¢çš„Eventséƒ¨åˆ†ç‰¹åˆ«é‡è¦ï¼Œå¦‚æœIngressä¸å·¥ä½œï¼Œé—®é¢˜åŸå› é€šå¸¸ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º

### 2.3 æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´çš„Ingress


**è·¨å‘½åç©ºé—´æŸ¥çœ‹**
```bash
kubectl get ingress -A
```

**å®é™…åº”ç”¨ä»·å€¼**ï¼šå½“ä½ ç®¡ç†å¤šä¸ªé¡¹ç›®æ—¶ï¼Œè¿™ä¸ªå‘½ä»¤å¸®ä½ å¿«é€Ÿäº†è§£æ•´ä¸ªé›†ç¾¤çš„å…¥å£é…ç½®æƒ…å†µ

### 2.4 æŸ¥çœ‹Ingressç±»


**æŸ¥çœ‹å¯ç”¨çš„Ingressæ§åˆ¶å™¨**
```bash
kubectl get ingressclass
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
NAME    CONTROLLER                    AGE
nginx   k8s.io/ingress-nginx          5d
```

**é€šä¿—è§£é‡Š**ï¼šIngressClasså°±åƒæ˜¯"é—¨å«çš„ç±»å‹"ï¼Œnginxç±»å‹çš„é—¨å«æ“…é•¿å¤„ç†Webæµé‡ï¼Œtraefikç±»å‹çš„é—¨å«æ“…é•¿å¾®æœåŠ¡ï¼Œé€‰æ‹©åˆé€‚çš„é—¨å«å¾ˆé‡è¦

---

## 3. ğŸš€ Ingressåˆ›å»ºä¸é…ç½®å‘½ä»¤


### 3.1 å¿«é€Ÿåˆ›å»ºIngress


**åŸºç¡€åˆ›å»ºå‘½ä»¤**
```bash
kubectl create ingress web-ingress \
  --rule="www.myapp.com/*=web-service:80"
```

**å‘½ä»¤è§£æ**ï¼š
```
--rule å‚æ•°æ ¼å¼ï¼š
"åŸŸå/è·¯å¾„=æœåŠ¡å:ç«¯å£"
  â”‚    â”‚     â”‚    â”‚
  â”‚    â”‚     â”‚    â””â”€ ç›®æ ‡æœåŠ¡çš„ç«¯å£
  â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€ ç›®æ ‡æœåŠ¡çš„åç§°
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ URLè·¯å¾„è§„åˆ™ï¼ˆ*è¡¨ç¤ºæ‰€æœ‰è·¯å¾„ï¼‰
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åŸŸåè§„åˆ™
```

### 3.2 åˆ›å»ºå¸¦å¤šä¸ªè§„åˆ™çš„Ingress


**å¤šè·¯å¾„è·¯ç”±é…ç½®**
```bash
kubectl create ingress multi-app-ingress \
  --rule="myapp.com/web=web-service:80" \
  --rule="myapp.com/api/*=api-service:8080" \
  --rule="admin.myapp.com/*=admin-service:3000"
```

**è·¯ç”±è§„åˆ™å›¾è§£**ï¼š
```
è¯·æ±‚æµå‘åˆ†æï¼š

myapp.com/web/login    â†’ web-service:80
myapp.com/api/users    â†’ api-service:8080  
myapp.com/api/orders   â†’ api-service:8080
admin.myapp.com/dashboard â†’ admin-service:3000

ä¸€ä¸ªIngressç®¡ç†å¤šä¸ªåº”ç”¨çš„å…¥å£ï¼
```

### 3.3 åˆ›å»ºHTTPS Ingress


**SSLè¯ä¹¦é…ç½®**
```bash
# é¦–å…ˆåˆ›å»ºTLSè¯ä¹¦Secretï¼ˆå‡è®¾ä½ å·²æœ‰è¯ä¹¦æ–‡ä»¶ï¼‰
kubectl create secret tls tls-secret \
  --cert=path/to/tls.crt \
  --key=path/to/tls.key

# åˆ›å»ºå¸¦HTTPSçš„Ingress
kubectl create ingress secure-ingress \
  --rule="secure.myapp.com/*=web-service:80,tls=tls-secret"
```

---

## 4. âœï¸ Ingressä¿®æ”¹ä¸æ›´æ–°å‘½ä»¤


### 4.1 æ·»åŠ TLSåŠ å¯†


**ä¸ºç°æœ‰Ingressæ·»åŠ HTTPS**
```bash
kubectl patch ingress web-ingress --type='merge' -p='
{
  "spec": {
    "tls": [
      {
        "hosts": ["www.myapp.com"],
        "secretName": "tls-secret"
      }
    ]
  }
}'
```

**é€šä¿—è§£é‡Š**ï¼šè¿™å°±åƒç»™ä½ å®¶é—¨å«å®¤å®‰è£…äº†å®‰å…¨é—¨ï¼Œæ‰€æœ‰è¿›å‡ºçš„è®¿å®¢éƒ½è¦é€šè¿‡å®‰å…¨æ£€æŸ¥ï¼ˆSSLåŠ å¯†ï¼‰

### 4.2 æ·»åŠ æ³¨è§£é…ç½®


**é…ç½®Nginxç‰¹æ®ŠåŠŸèƒ½**
```bash
# é…ç½®URLé‡å†™
kubectl annotate ingress web-ingress \
  nginx.ingress.kubernetes.io/rewrite-target=/

# é…ç½®é™æµ
kubectl annotate ingress web-ingress \
  nginx.ingress.kubernetes.io/rate-limit="100"

# é…ç½®CORSè·¨åŸŸ
kubectl annotate ingress web-ingress \
  nginx.ingress.kubernetes.io/enable-cors="true"
```

**æ³¨è§£åŠŸèƒ½å¯¹ç…§è¡¨**ï¼š

| æ³¨è§£åç§° | ä½œç”¨ | å®é™…æ•ˆæœ |
|---------|------|----------|
| `rewrite-target` | URLè·¯å¾„é‡å†™ | `/api/v1/users` â†’ `/users` |
| `rate-limit` | è®¿é—®é¢‘ç‡é™åˆ¶ | æ¯åˆ†é’Ÿæœ€å¤š100è¯·æ±‚ |
| `enable-cors` | è·¨åŸŸè®¿é—®æ”¯æŒ | æ”¯æŒæµè§ˆå™¨è·¨åŸŸè¯·æ±‚ |
| `ssl-redirect` | å¼ºåˆ¶HTTPS | è‡ªåŠ¨å°†HTTPè¯·æ±‚è½¬åˆ°HTTPS |

### 4.3 ç›´æ¥ç¼–è¾‘Ingressé…ç½®


**äº¤äº’å¼ç¼–è¾‘**
```bash
kubectl edit ingress web-ingress
```

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
- ç¼–è¾‘æ—¶ä¼šæ‰“å¼€ä½ çš„é»˜è®¤ç¼–è¾‘å™¨ï¼ˆé€šå¸¸æ˜¯viï¼‰
- ä¿å­˜åç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯
- è¯­æ³•é”™è¯¯ä¼šå¯¼è‡´æ›´æ–°å¤±è´¥ï¼Œå·²æœ‰é…ç½®ä¿æŒä¸å˜

---

## 5. ğŸ—‘ï¸ Ingressåˆ é™¤ä¸æ¸…ç†å‘½ä»¤


### 5.1 åˆ é™¤å•ä¸ªIngress


```bash
kubectl delete ingress web-ingress
```

### 5.2 æ‰¹é‡åˆ é™¤Ingress


```bash
# åˆ é™¤æ‰€æœ‰æ ‡ç­¾åŒ¹é…çš„Ingress
kubectl delete ingress -l app=web

# åˆ é™¤æŒ‡å®šå‘½åç©ºé—´çš„æ‰€æœ‰Ingress
kubectl delete ingress --all -n production
```

### 5.3 åˆ é™¤å‰å¤‡ä»½


**å®‰å…¨åˆ é™¤æµç¨‹**ï¼š
```bash
# 1. å¤‡ä»½ç°æœ‰é…ç½®
kubectl get ingress web-ingress -o yaml > web-ingress-backup.yaml

# 2. ç¡®è®¤é…ç½®æ­£ç¡®
cat web-ingress-backup.yaml

# 3. æ‰§è¡Œåˆ é™¤
kubectl delete ingress web-ingress

# 4. å¦‚éœ€æ¢å¤
kubectl apply -f web-ingress-backup.yaml
```

---

## 6. ğŸ”§ Ingressé«˜çº§ç®¡ç†å‘½ä»¤


### 6.1 è·å–è´Ÿè½½å‡è¡¡å™¨IP


**æå–å¤–éƒ¨è®¿é—®IP**
```bash
kubectl get ingress web-ingress -o jsonpath='{.status.loadBalancer.ingress[0].ip}'
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼šå½“ä½ éœ€è¦é…ç½®DNSè®°å½•æ—¶ï¼Œéœ€è¦çŸ¥é“Ingressçš„å¤–éƒ¨IPåœ°å€

### 6.2 ç›‘æ§IngressçŠ¶æ€


**å®æ—¶ç›‘æ§å˜åŒ–**
```bash
kubectl get ingress -w
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
NAME         CLASS    HOSTS           ADDRESS      PORTS   AGE
web-ingress  nginx    www.myapp.com   <pending>    80      0s
web-ingress  nginx    www.myapp.com   10.0.1.100   80      30s  â† IPå·²åˆ†é…
```

### 6.3 æŸ¥çœ‹Ingressæ§åˆ¶å™¨æ—¥å¿—


**æ’æŸ¥é—®é¢˜çš„åˆ©å™¨**
```bash
# æŸ¥çœ‹nginx ingressæ§åˆ¶å™¨æ—¥å¿—
kubectl logs -n ingress-nginx -l app.kubernetes.io/name=ingress-nginx

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
kubectl logs -n ingress-nginx -l app.kubernetes.io/name=ingress-nginx -f
```

---

## 7. ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯ç¤ºä¾‹


### 7.1 åœºæ™¯ä¸€ï¼šç”µå•†ç½‘ç«™æ¶æ„


**éœ€æ±‚**ï¼šä¸€ä¸ªç”µå•†ç½‘ç«™æœ‰å‰ç«¯ã€APIã€ç®¡ç†åå°ä¸‰ä¸ªéƒ¨åˆ†

```bash
# åˆ›å»ºç»Ÿä¸€å…¥å£
kubectl create ingress ecommerce-ingress \
  --rule="shop.example.com/*=frontend-service:80" \
  --rule="api.shop.example.com/*=api-service:8080" \
  --rule="admin.shop.example.com/*=admin-service:3000"

# æ·»åŠ HTTPSæ”¯æŒ
kubectl patch ingress ecommerce-ingress --type='merge' -p='
{
  "spec": {
    "tls": [
      {
        "hosts": ["shop.example.com", "api.shop.example.com", "admin.shop.example.com"],
        "secretName": "shop-tls-secret"
      }
    ]
  }
}'
```

**æ¶æ„å›¾è§£**ï¼š
```
ç”¨æˆ·è®¿é—®è·¯å¾„ï¼š

shop.example.com              â†’ frontend-service  (å•†åŸé¦–é¡µ)
api.shop.example.com/products â†’ api-service       (äº§å“API)
admin.shop.example.com/login  â†’ admin-service     (ç®¡ç†åå°)
                                     
æ‰€æœ‰è¯·æ±‚éƒ½é€šè¿‡ä¸€ä¸ªIngresså¤„ç†ï¼Œæˆæœ¬ä½ï¼Œç®¡ç†ç®€å•ï¼
```

### 7.2 åœºæ™¯äºŒï¼šå¼€å‘æµ‹è¯•ç¯å¢ƒ


**éœ€æ±‚**ï¼šä¸ºä¸åŒå¼€å‘åˆ†æ”¯åˆ›å»ºç‹¬ç«‹çš„æµ‹è¯•ç¯å¢ƒ

```bash
# ä¸ºfeatureåˆ†æ”¯åˆ›å»ºæµ‹è¯•å…¥å£
kubectl create ingress feature-test-ingress \
  --rule="feature-branch.dev.example.com/*=feature-app-service:80"

# ä¸ºstagingç¯å¢ƒåˆ›å»ºå…¥å£
kubectl create ingress staging-ingress \
  --rule="staging.example.com/*=staging-app-service:80"
```

### 7.3 åœºæ™¯ä¸‰ï¼šå¾®æœåŠ¡APIç½‘å…³


**éœ€æ±‚**ï¼šç»Ÿä¸€ç®¡ç†å¤šä¸ªå¾®æœåŠ¡çš„APIå…¥å£

```bash
# åˆ›å»ºAPIç½‘å…³Ingress
kubectl create ingress api-gateway \
  --rule="api.company.com/user/*=user-service:8080" \
  --rule="api.company.com/order/*=order-service:8080" \
  --rule="api.company.com/payment/*=payment-service:8080"

# æ·»åŠ APIé™æµ
kubectl annotate ingress api-gateway \
  nginx.ingress.kubernetes.io/rate-limit="1000" \
  nginx.ingress.kubernetes.io/rate-limit-window="1m"
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå‘½ä»¤


```bash
ğŸ”¸ åŸºç¡€æŸ¥çœ‹ï¼škubectl get ingress
ğŸ”¸ è¯¦ç»†ä¿¡æ¯ï¼škubectl describe ingress [name]
ğŸ”¸ å¿«é€Ÿåˆ›å»ºï¼škubectl create ingress [name] --rule="[host]/[path]=[service]:[port]"
ğŸ”¸ åˆ é™¤èµ„æºï¼škubectl delete ingress [name]
ğŸ”¸ æ·»åŠ TLSï¼škubectl patch ingress [name] --type='merge' -p='...'
ğŸ”¸ æ·»åŠ æ³¨è§£ï¼škubectl annotate ingress [name] [annotation]=[value]
ğŸ”¸ è·å–IPï¼škubectl get ingress [name] -o jsonpath='{.status.loadBalancer.ingress[0].ip}'
ğŸ”¸ è·¨å‘½åç©ºé—´æŸ¥çœ‹ï¼škubectl get ingress -A
ğŸ”¸ ç¼–è¾‘é…ç½®ï¼škubectl edit ingress [name]
ğŸ”¸ æŸ¥çœ‹æ§åˆ¶å™¨ç±»å‹ï¼škubectl get ingressclass
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Ingressçš„æœ¬è´¨ä½œç”¨**
```
ç†è§£è¦ç‚¹ï¼š
- Ingress = ç½‘ç»œæµé‡çš„"æ™ºèƒ½é—¨å«"
- ä¸€ä¸ªå…¥å£ç®¡ç†å¤šä¸ªæœåŠ¡ï¼Œé™ä½æˆæœ¬
- æ”¯æŒåŸºäºåŸŸåå’Œè·¯å¾„çš„æ™ºèƒ½è·¯ç”±
- æä¾›HTTPSã€é™æµã€è·¨åŸŸç­‰é«˜çº§åŠŸèƒ½
```

**ğŸ”¹ Ingress vs Serviceçš„åŒºåˆ«**
```
Serviceï¼ˆå†…éƒ¨é€šä¿¡ï¼‰ï¼š
Pod â†” Service â†” Pod
é›†ç¾¤å†…éƒ¨æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡

Ingressï¼ˆå¤–éƒ¨è®¿é—®ï¼‰ï¼š
å¤–éƒ¨ç”¨æˆ· â†’ Ingress â†’ Service â†’ Pod
é›†ç¾¤å¤–éƒ¨æµé‡çš„ç»Ÿä¸€å…¥å£
```

**ğŸ”¹ å¸¸è§é—®é¢˜æ’æŸ¥æ€è·¯**
```
é—®é¢˜æ’æŸ¥é¡ºåºï¼š
1. kubectl get ingress -A           ï¼ˆæ£€æŸ¥IngressçŠ¶æ€ï¼‰
2. kubectl describe ingress [name]  ï¼ˆæŸ¥çœ‹Eventséƒ¨åˆ†ï¼‰
3. kubectl get ingressclass         ï¼ˆç¡®è®¤æ§åˆ¶å™¨æ­£å¸¸ï¼‰
4. kubectl logs -n ingress-nginx    ï¼ˆæŸ¥çœ‹æ§åˆ¶å™¨æ—¥å¿—ï¼‰
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
- **ä¼ä¸šé—¨æˆ·ç½‘ç«™**ï¼šç»Ÿä¸€ç®¡ç†å¤šä¸ªå­ç«™ç‚¹å’ŒAPIå…¥å£
- **å¾®æœåŠ¡æ¶æ„**ï¼šAPIç½‘å…³åŠŸèƒ½ï¼Œç»Ÿä¸€é‰´æƒå’Œé™æµ
- **å¼€å‘æµ‹è¯•ç¯å¢ƒ**ï¼šå¿«é€Ÿä¸ºä¸åŒåˆ†æ”¯åˆ›å»ºç‹¬ç«‹è®¿é—®å…¥å£
- **å¤šç§Ÿæˆ·ç³»ç»Ÿ**ï¼šåŸºäºåŸŸåçš„ç§Ÿæˆ·éš”ç¦»

**ğŸ”§ è¿ç»´å®è·µ**ï¼š
- **æˆæœ¬æ§åˆ¶**ï¼šä¸€ä¸ªå…¬ç½‘IPæœåŠ¡å¤šä¸ªåº”ç”¨
- **å®‰å…¨ç®¡ç†**ï¼šç»Ÿä¸€SSLè¯ä¹¦ç®¡ç†å’ŒHTTPSè·³è½¬
- **æµé‡æ§åˆ¶**ï¼šAPIé™æµå’Œè®¿é—®æ§åˆ¶
- **ç›‘æ§å‘Šè­¦**ï¼šç»Ÿä¸€çš„è®¿é—®æ—¥å¿—å’ŒæŒ‡æ ‡æ”¶é›†

### 8.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ“ é…ç½®ç®¡ç†å»ºè®®**ï¼š
```
âœ… ä½¿ç”¨YAMLæ–‡ä»¶ç®¡ç†å¤æ‚é…ç½®ï¼Œå‘½ä»¤è¡Œé€‚åˆç®€å•æ“ä½œ
âœ… ä¸ºæ¯ä¸ªç¯å¢ƒï¼ˆdev/test/prodï¼‰ä½¿ç”¨ä¸åŒçš„Ingress
âœ… åˆç†ä½¿ç”¨æ³¨è§£åŠŸèƒ½ï¼Œé¿å…é…ç½®è¿‡äºå¤æ‚
âœ… å®šæœŸå¤‡ä»½Ingressé…ç½®ï¼Œæ–¹ä¾¿å›æ»š
âœ… ç›‘æ§Ingressæ§åˆ¶å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ
```

**âš ï¸ å¸¸è§é™·é˜±é¿å…**ï¼š
```
âŒ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒç›´æ¥ä½¿ç”¨kubectl edit
âŒ åˆ é™¤Ingresså‰ç¡®ä¿æœ‰å¤‡ä»½
âŒ æ³¨æ„TLSè¯ä¹¦çš„è¿‡æœŸæ—¶é—´
âŒ é¿å…åœ¨å•ä¸ªIngressä¸­é…ç½®è¿‡å¤šè§„åˆ™
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- Ingressé—¨å«ç®¡å¤–è®¿ï¼ŒåŸŸåè·¯å¾„æ™ºèƒ½åˆ†
- åˆ›å»ºæŸ¥çœ‹æ”¹åˆ é™¤ï¼Œæ³¨è§£é…ç½®åŠŸèƒ½å…¨
- é—®é¢˜æ’æŸ¥çœ‹Eventsï¼Œæ—¥å¿—ç›‘æ§æ‰¾æ ¹æº