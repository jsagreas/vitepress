---
title: 8ã€æ•°æ®æŒä¹…åŒ–å®è·µ
---
## ğŸ“š ç›®å½•

1. [æ•°æ®æŒä¹…åŒ–åŸºç¡€æ¦‚å¿µ](#1-æ•°æ®æŒä¹…åŒ–åŸºç¡€æ¦‚å¿µ)
2. [æ•°æ®æŒä¹…åŒ–åº”ç”¨åœºæ™¯](#2-æ•°æ®æŒä¹…åŒ–åº”ç”¨åœºæ™¯)
3. [æœ‰çŠ¶æ€åº”ç”¨å­˜å‚¨å®è·µ](#3-æœ‰çŠ¶æ€åº”ç”¨å­˜å‚¨å®è·µ)
4. [æ•°æ®åº“å­˜å‚¨é…ç½®](#4-æ•°æ®åº“å­˜å‚¨é…ç½®)
5. [å¤‡ä»½æ¢å¤ç­–ç•¥](#5-å¤‡ä»½æ¢å¤ç­–ç•¥)
6. [å­˜å‚¨æ€§èƒ½ä¼˜åŒ–](#6-å­˜å‚¨æ€§èƒ½ä¼˜åŒ–)
7. [å¤šå‰¯æœ¬æ•°æ®åŒæ­¥](#7-å¤šå‰¯æœ¬æ•°æ®åŒæ­¥)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—„ï¸ æ•°æ®æŒä¹…åŒ–åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®æŒä¹…åŒ–


**ğŸ’¡ ç®€å•ç†è§£**ï¼šæ•°æ®æŒä¹…åŒ–å°±æ˜¯è®©ä½ çš„æ•°æ®èƒ½å¤Ÿ"æ´»å¾—æ›´ä¹…"ï¼Œå³ä½¿å®¹å™¨é‡å¯æˆ–åˆ é™¤ï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
ç§Ÿæˆ¿ï¼šä½ æ¬å®¶äº†ï¼Œæˆ¿å­é‡Œçš„ä¸œè¥¿å°±æ²¡äº† â† å®¹å™¨å­˜å‚¨
ä¹°æˆ¿ï¼šä½ æ¬åˆ°åˆ«å¤„ï¼Œæˆ¿å­å’Œå®¶å…·è¿˜åœ¨ â† æŒä¹…åŒ–å­˜å‚¨

Kubernetesä¸­ï¼š
å®¹å™¨å­˜å‚¨ï¼šPodåˆ é™¤ â†’ æ•°æ®æ¶ˆå¤± ğŸ’¥
æŒä¹…åŒ–å­˜å‚¨ï¼šPodåˆ é™¤ â†’ æ•°æ®ä¿ç•™ âœ…
```

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®æŒä¹…åŒ–ï¼Ÿ**

```
é—®é¢˜åœºæ™¯ï¼š
å‡è®¾ä½ è¿è¡Œä¸€ä¸ªåšå®¢ç½‘ç«™ï¼š
â”œâ”€â”€ Webåº”ç”¨ (æ— çŠ¶æ€) â†’ é‡å¯æ²¡é—®é¢˜
â”œâ”€â”€ æ•°æ®åº“ (æœ‰çŠ¶æ€) â†’ é‡å¯æ•°æ®ä¸¢å¤±ï¼ğŸ’¥
â””â”€â”€ ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ â†’ é‡å¯æ–‡ä»¶æ¶ˆå¤±ï¼ğŸ’¥

è§£å†³æ–¹æ¡ˆï¼šæ•°æ®æŒä¹…åŒ–
â”œâ”€â”€ æ•°æ®åº“æ•°æ® â†’ å­˜å‚¨åˆ°æŒä¹…åŒ–å·
â”œâ”€â”€ ç”¨æˆ·æ–‡ä»¶ â†’ å­˜å‚¨åˆ°æŒä¹…åŒ–å·  
â””â”€â”€ é…ç½®æ–‡ä»¶ â†’ å­˜å‚¨åˆ°ConfigMap/Secret
```

### 1.2 Kubernetesä¸­çš„å­˜å‚¨æ¦‚å¿µ


**ğŸ“Š å­˜å‚¨å±‚æ¬¡ç»“æ„**
```
ç‰©ç†å­˜å‚¨å±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‰©ç†ç¡¬ç›˜ (æœ¬åœ°SSD/äº‘å­˜å‚¨/NFS)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘
KubernetesæŠ½è±¡å±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StorageClass (å­˜å‚¨ç±»)           â”‚ â† å®šä¹‰å­˜å‚¨ç±»å‹å’Œå‚æ•°
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PersistentVolume (PV æŒä¹…å·)    â”‚ â† å®é™…çš„å­˜å‚¨èµ„æº
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚  PersistentVolumeClaim (PVC)    â”‚ â† å­˜å‚¨è¯·æ±‚å£°æ˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘
Podä½¿ç”¨å±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VolumeæŒ‚è½½åˆ°Pod                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µè§£é‡Š**

| æ¦‚å¿µ | **é€šä¿—ç†è§£** | **å®é™…ä½œç”¨** |
|------|------------|-------------|
| **PV (æŒä¹…å·)** | `çœŸå®çš„å­˜å‚¨ç¡¬ç›˜` | ç®¡ç†å‘˜æä¾›çš„å®é™…å­˜å‚¨èµ„æº |
| **PVC (æŒä¹…å·å£°æ˜)** | `å­˜å‚¨ç”³è¯·å•` | ç”¨æˆ·ç”³è¯·å¤šå¤§ç©ºé—´ã€ä»€ä¹ˆç±»å‹çš„å­˜å‚¨ |
| **StorageClass** | `å­˜å‚¨å¥—é¤ç±»å‹` | å®šä¹‰ä¸åŒæ€§èƒ½ã€ä»·æ ¼çš„å­˜å‚¨é€‰é¡¹ |
| **Volume** | `æŒ‚è½½ç‚¹` | Podä¸­è®¿é—®å­˜å‚¨çš„è·¯å¾„ |

---

## 2. ğŸ¯ æ•°æ®æŒä¹…åŒ–åº”ç”¨åœºæ™¯


### 2.1 å…¸å‹åº”ç”¨åœºæ™¯åˆ†ç±»


**ğŸ“‹ åœºæ™¯åˆ†æè¡¨æ ¼**

| åº”ç”¨ç±»å‹ | **æ•°æ®ç‰¹ç‚¹** | **æŒä¹…åŒ–éœ€æ±‚** | **å…¸å‹ç¤ºä¾‹** | **æ¨èæ–¹æ¡ˆ** |
|---------|-------------|---------------|-------------|-------------|
| ğŸ”´ **æœ‰çŠ¶æ€åº”ç”¨** | `æ•°æ®ä¸èƒ½ä¸¢å¤±` | **å¿…é¡»æŒä¹…åŒ–** | æ•°æ®åº“ã€æ–‡ä»¶æœåŠ¡å™¨ | StatefulSet + PVC |
| ğŸŸ¡ **åŠçŠ¶æ€åº”ç”¨** | `ä¸´æ—¶æ•°æ®é‡è¦` | **é€‰æ‹©æ€§æŒä¹…åŒ–** | Webåº”ç”¨ç¼“å­˜ã€æ—¥å¿— | Deployment + PVC |
| ğŸŸ¢ **æ— çŠ¶æ€åº”ç”¨** | `æ•°æ®å¯é‡å»º` | **é€šå¸¸ä¸éœ€è¦** | APIæœåŠ¡ã€è®¡ç®—ä»»åŠ¡ | ä½¿ç”¨ä¸´æ—¶å­˜å‚¨ |

### 2.2 æ•°æ®åº“åº”ç”¨åœºæ™¯


**ğŸ”¸ MySQLæ•°æ®åº“åœºæ™¯**

```
ä¸šåŠ¡éœ€æ±‚åˆ†æï¼š
ç”¨æˆ·æ•°æ®ï¼šå§“åã€è®¢å•ã€æ”¯ä»˜è®°å½• â†’ ç»å¯¹ä¸èƒ½ä¸¢å¤± â—
ç³»ç»Ÿæ—¥å¿—ï¼šè®¿é—®è®°å½•ã€é”™è¯¯æ—¥å¿— â†’ é‡è¦ä½†å¯æ¢å¤ âš ï¸  
ä¸´æ—¶ç¼“å­˜ï¼šä¼šè¯ä¿¡æ¯ã€è®¡ç®—ç»“æœ â†’ ä¸¢å¤±å¯æ¥å— âœ…

å­˜å‚¨è®¾è®¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MySQL Pod     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /var/lib/ â”‚  â”‚ â† æ•°æ®ç›®å½•å¿…é¡»æŒä¹…åŒ–
â”‚  â”‚   mysql   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /var/log/ â”‚  â”‚ â† æ—¥å¿—å¯é€‰æŒä¹…åŒ–
â”‚  â”‚   mysql   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Webåº”ç”¨åœºæ™¯


**ğŸ”¸ ç”µå•†ç½‘ç«™åœºæ™¯**

> ğŸ’¡ **å®é™…æ¡ˆä¾‹**ï¼šä½ è¿è¥ä¸€ä¸ªåœ¨çº¿å•†åŸ

```
å­˜å‚¨éœ€æ±‚åˆ†æï¼š
ç”¨æˆ·ä¸Šä¼ å¤´åƒ â†’ å¿…é¡»ä¿å­˜ (ç”¨æˆ·ä¼šæŠ•è¯‰ï¼)
å•†å“å›¾ç‰‡ â†’ å¿…é¡»ä¿å­˜ (å½±å“é”€å”®ï¼)
è´­ç‰©è½¦æ•°æ® â†’ æœ€å¥½ä¿å­˜ (ç”¨æˆ·ä½“éªŒï¼)
ç³»ç»Ÿç¼“å­˜ â†’ å¯ä»¥é‡å»º (æ€§èƒ½å½±å“å¯æ¥å—)

è®¾è®¡æ–¹æ¡ˆï¼š
Webåº”ç”¨ Pod:
â”œâ”€â”€ ç”¨æˆ·æ–‡ä»¶ç›®å½• (/uploads) â†’ PVCæŒä¹…åŒ–å­˜å‚¨
â”œâ”€â”€ é™æ€èµ„æº (/static) â†’ ConfigMapæˆ–PVC  
â”œâ”€â”€ åº”ç”¨æ—¥å¿— (/logs) â†’ å¯é€‰PVC
â””â”€â”€ ä¸´æ—¶ç¼“å­˜ (/tmp) â†’ å®¹å™¨ä¸´æ—¶å­˜å‚¨
```

---

## 3. ğŸ—ï¸ æœ‰çŠ¶æ€åº”ç”¨å­˜å‚¨å®è·µ


### 3.1 StatefulSetå­˜å‚¨é…ç½®


**ğŸ”¸ ä»€ä¹ˆæ˜¯StatefulSetï¼Ÿ**

> ğŸ’¡ **é€šä¿—ç†è§£**ï¼šStatefulSetå°±åƒç»™æ¯ä¸ªPodåˆ†é…å›ºå®šçš„"èº«ä»½è¯"å’Œ"ä¸“å±æˆ¿é—´"

```
æ™®é€šDeployment vs StatefulSetï¼š

Deployment (æ— çŠ¶æ€):
Pod-1, Pod-2, Pod-3 (åå­—éšæœº)
â”‚     â”‚     â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
  å…±äº«å­˜å‚¨ (å¦‚æœæœ‰)

StatefulSet (æœ‰çŠ¶æ€):  
Pod-0, Pod-1, Pod-2 (åå­—å›ºå®š)
â”‚     â”‚     â”‚
PVC-0 PVC-1 PVC-2 (ä¸“å±å­˜å‚¨)
```

### 3.2 Redisé›†ç¾¤å­˜å‚¨å®è·µ


**ğŸ”§ Redis StatefulSeté…ç½®ç¤ºä¾‹**

```yaml
# Redisé›†ç¾¤å­˜å‚¨é…ç½®
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: redis-cluster
spec:
  serviceName: redis-cluster
  replicas: 3
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: redis
        image: redis:6.2
        ports:
        - containerPort: 6379
        volumeMounts:
        - name: redis-data
          mountPath: /data    # Redisæ•°æ®ç›®å½•
        command:
        - redis-server
        - --appendonly yes    # å¯ç”¨æŒä¹…åŒ–
  # å…³é”®é…ç½®ï¼šå­˜å‚¨å·æ¨¡æ¿
  volumeClaimTemplates:
  - metadata:
      name: redis-data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 5Gi
      storageClassName: ssd-storage
```

**ğŸ“Š å­˜å‚¨ç»“æœå±•ç¤º**
```
åˆ›å»ºåçš„å­˜å‚¨ç»“æ„ï¼š
redis-cluster-0 â†’ redis-data-redis-cluster-0 (5GB)
redis-cluster-1 â†’ redis-data-redis-cluster-1 (5GB)  
redis-cluster-2 â†’ redis-data-redis-cluster-2 (5GB)

æ¯ä¸ªPodéƒ½æœ‰ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼âœ…
```

### 3.3 æ–‡ä»¶æœåŠ¡å™¨å­˜å‚¨å®è·µ


**ğŸ”¸ Nginxæ–‡ä»¶æœåŠ¡å™¨é…ç½®**

```yaml
apiVersion: apps/v1
kind: StatefulSet  
metadata:
  name: file-server
spec:
  serviceName: file-server
  replicas: 2
  selector:
    matchLabels:
      app: file-server
  template:
    metadata:
      labels:
        app: file-server
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        ports:
        - containerPort: 80
        volumeMounts:
        - name: web-content
          mountPath: /usr/share/nginx/html
        - name: upload-storage  
          mountPath: /uploads
  volumeClaimTemplates:
  - metadata:
      name: web-content
    spec:
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 10Gi
  - metadata:
      name: upload-storage
    spec:
      accessModes: ["ReadWriteOnce"] 
      resources:
        requests:
          storage: 50Gi
```

---

## 4. ğŸ—ƒï¸ æ•°æ®åº“å­˜å‚¨é…ç½®


### 4.1 MySQLæ•°æ®åº“é…ç½®


**ğŸ”¸ ç”Ÿäº§çº§MySQLé…ç½®**

> âš ï¸ **é‡è¦æé†’**ï¼šæ•°æ®åº“é…ç½®éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œä¸€ä¸ªé”™è¯¯å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼

```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: mysql
spec:
  serviceName: mysql
  replicas: 1
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      labels:
        app: mysql
    spec:
      containers:
      - name: mysql
        image: mysql:8.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: root-password
        ports:
        - containerPort: 3306
        volumeMounts:
        - name: mysql-data
          mountPath: /var/lib/mysql      # æ•°æ®ç›®å½•
        - name: mysql-config
          mountPath: /etc/mysql/conf.d   # é…ç½®æ–‡ä»¶
        - name: mysql-logs
          mountPath: /var/log/mysql      # æ—¥å¿—ç›®å½•
      volumes:
      - name: mysql-config
        configMap:
          name: mysql-config
  volumeClaimTemplates:
  - metadata:
      name: mysql-data
    spec:
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 100Gi
      storageClassName: high-performance
  - metadata:
      name: mysql-logs  
    spec:
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 20Gi
```

**ğŸ”§ MySQLé…ç½®æ–‡ä»¶**

```yaml
# MySQL ConfigMapé…ç½®
apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-config
data:
  my.cnf: |
    [mysqld]
    # åŸºç¡€é…ç½®
    datadir=/var/lib/mysql
    socket=/var/lib/mysql/mysql.sock
    
    # æ€§èƒ½ä¼˜åŒ–é…ç½®
    innodb_buffer_pool_size=2G      # å†…å­˜ç¼“å†²æ± 
    innodb_log_file_size=256M       # æ—¥å¿—æ–‡ä»¶å¤§å°
    max_connections=500             # æœ€å¤§è¿æ¥æ•°
    
    # æŒä¹…åŒ–é…ç½®
    innodb_flush_log_at_trx_commit=1  # äº‹åŠ¡æ—¥å¿—åˆ·ç›˜
    sync_binlog=1                     # äºŒè¿›åˆ¶æ—¥å¿—åŒæ­¥
```

### 4.2 PostgreSQLå­˜å‚¨é…ç½®


**ğŸ”¸ PostgreSQLé«˜å¯ç”¨é…ç½®**

```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: postgres
spec:
  serviceName: postgres
  replicas: 1
  selector:
    matchLabels:
      app: postgres
  template:
    metadata:
      labels:
        app: postgres
    spec:
      containers:
      - name: postgres
        image: postgres:13
        env:
        - name: POSTGRES_DB
          value: "myapp"
        - name: POSTGRES_USER
          value: "appuser"
        - name: POSTGRES_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: password
        - name: PGDATA
          value: /var/lib/postgresql/data/pgdata
        ports:
        - containerPort: 5432
        volumeMounts:
        - name: postgres-data
          mountPath: /var/lib/postgresql/data
        - name: postgres-config
          mountPath: /etc/postgresql
  volumeClaimTemplates:
  - metadata:
      name: postgres-data
    spec:
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 50Gi
      storageClassName: ssd-storage
```

### 4.3 æ•°æ®åº“å­˜å‚¨æœ€ä½³å®è·µ


**ğŸ“‹ å­˜å‚¨é…ç½®æ¸…å•**

- [x] **æ•°æ®ç›®å½•**ï¼šå¿…é¡»ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨
- [x] **é…ç½®æ–‡ä»¶**ï¼šä½¿ç”¨ConfigMapç®¡ç†
- [x] **æ•æ„Ÿä¿¡æ¯**ï¼šä½¿ç”¨Secretå­˜å‚¨å¯†ç 
- [x] **æ—¥å¿—ç›®å½•**ï¼šå¯é€‰æŒä¹…åŒ–å­˜å‚¨
- [x] **å¤‡ä»½ç›®å½•**ï¼šå•ç‹¬çš„å­˜å‚¨å·

**âš ï¸ å¸¸è§é…ç½®é”™è¯¯**

| é”™è¯¯ | **åæœ** | **æ­£ç¡®åšæ³•** |
|------|---------|-------------|
| `æ•°æ®ç›®å½•æœªæŒä¹…åŒ–` | æ•°æ®ä¸¢å¤±ğŸ’¥ | å¿…é¡»é…ç½®PVC |
| `å¯†ç æ˜æ–‡å­˜å‚¨` | å®‰å…¨é£é™©ğŸ”“ | ä½¿ç”¨Secret |
| `å­˜å‚¨ç©ºé—´ä¸è¶³` | åº”ç”¨å´©æºƒğŸ’¥ | æå‰è§„åˆ’å®¹é‡ |
| `æ— å¤‡ä»½ç­–ç•¥` | æ— æ³•æ¢å¤ğŸ˜± | å®šæœŸå¤‡ä»½ |

---

## 5. ğŸ’¾ å¤‡ä»½æ¢å¤ç­–ç•¥


### 5.1 æ•°æ®å¤‡ä»½ç­–ç•¥è®¾è®¡


**ğŸ¯ å¤‡ä»½ç­–ç•¥é‡‘å­—å¡”**

```
å¤‡ä»½é‡è¦æ€§åˆ†å±‚ï¼š
        ğŸ”´ å…³é”®æ•°æ® (æ¯å°æ—¶å¤‡ä»½)
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
      ğŸŸ¡ é‡è¦æ•°æ® (æ¯æ—¥å¤‡ä»½)  
     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    ğŸŸ¢ ä¸€èˆ¬æ•°æ® (æ¯å‘¨å¤‡ä»½)
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

ç¤ºä¾‹åˆ†ç±»ï¼š
ğŸ”´ å…³é”®ï¼šç”¨æˆ·è®¢å•ã€æ”¯ä»˜è®°å½•ã€ç”¨æˆ·è´¦æˆ·
ğŸŸ¡ é‡è¦ï¼šç”¨æˆ·è¡Œä¸ºæ—¥å¿—ã€å•†å“æ•°æ®ã€åº“å­˜  
ğŸŸ¢ ä¸€èˆ¬ï¼šä¸´æ—¶ç¼“å­˜ã€ç»Ÿè®¡æ•°æ®ã€å†å²æ—¥å¿—
```

### 5.2 MySQLå¤‡ä»½å®è·µ


**ğŸ”§ è‡ªåŠ¨åŒ–å¤‡ä»½CronJob**

```yaml
# MySQLå¤‡ä»½ä»»åŠ¡
apiVersion: batch/v1
kind: CronJob
metadata:
  name: mysql-backup
spec:
  schedule: "0 2 * * *"    # æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: mysql-backup
            image: mysql:8.0
            env:
            - name: MYSQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: mysql-secret
                  key: root-password
            command:
            - /bin/bash
            - -c
            - |
              # åˆ›å»ºå¤‡ä»½æ–‡ä»¶å
              BACKUP_FILE="mysql-backup-$(date +%Y%m%d-%H%M%S).sql"
              
              # æ‰§è¡Œå¤‡ä»½
              mysqldump -h mysql -u root -p$MYSQL_PASSWORD \
                --all-databases \
                --single-transaction \
                --flush-logs > /backup/$BACKUP_FILE
              
              # å‹ç¼©å¤‡ä»½æ–‡ä»¶
              gzip /backup/$BACKUP_FILE
              
              # æ¸…ç†7å¤©å‰çš„å¤‡ä»½
              find /backup -name "*.sql.gz" -mtime +7 -delete
            volumeMounts:
            - name: backup-storage
              mountPath: /backup
          volumes:
          - name: backup-storage
            persistentVolumeClaim:
              claimName: mysql-backup-pvc
          restartPolicy: OnFailure
```

**ğŸ“Š å¤‡ä»½å­˜å‚¨PVCé…ç½®**

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-backup-pvc
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 200Gi    # é¢„ç•™è¶³å¤Ÿå¤‡ä»½ç©ºé—´
  storageClassName: standard-storage
```

### 5.3 åº”ç”¨æ•°æ®å¤‡ä»½


**ğŸ”¸ æ–‡ä»¶å¤‡ä»½è„šæœ¬ç¤ºä¾‹**

```yaml
apiVersion: batch/v1
kind: CronJob
metadata:
  name: app-data-backup
spec:
  schedule: "0 3 * * 0"    # æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: backup
            image: ubuntu:20.04
            command:
            - /bin/bash  
            - -c
            - |
              apt-get update && apt-get install -y rsync
              
              # å¤‡ä»½ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
              rsync -av --delete /app-data/uploads/ /backup/uploads/
              
              # å¤‡ä»½é…ç½®æ–‡ä»¶
              cp -r /app-data/config /backup/config-$(date +%Y%m%d)
              
              # åˆ›å»ºå¤‡ä»½æ¸…å•
              echo "Backup completed at $(date)" > /backup/last-backup.txt
              ls -la /backup/ >> /backup/last-backup.txt
            volumeMounts:
            - name: app-data
              mountPath: /app-data
              readOnly: true
            - name: backup-storage
              mountPath: /backup
          volumes:
          - name: app-data
            persistentVolumeClaim:
              claimName: app-data-pvc
          - name: backup-storage  
            persistentVolumeClaim:
              claimName: backup-pvc
          restartPolicy: OnFailure
```

### 5.4 æ•°æ®æ¢å¤æµç¨‹


**ğŸ”„ æ¢å¤æ“ä½œæ­¥éª¤**

> ğŸ’¡ **é‡è¦**ï¼šæ¢å¤æ“ä½œè¦åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯ï¼

```
æ•°æ®æ¢å¤æ ‡å‡†æµç¨‹ï¼š

ç¬¬1æ­¥ï¼šåœæ­¢åº”ç”¨æœåŠ¡ â¹ï¸
â”œâ”€â”€ ç¼©æ”¾Podå‰¯æœ¬ä¸º0
â””â”€â”€ ç¡®ä¿æ²¡æœ‰æ•°æ®å†™å…¥

ç¬¬2æ­¥ï¼šå¤‡ä»½å½“å‰æ•°æ® ğŸ’¾
â”œâ”€â”€ å³ä½¿æ˜¯åæ•°æ®ä¹Ÿè¦å¤‡ä»½
â””â”€â”€ ä¸ºå›æ»šåšå‡†å¤‡

ç¬¬3æ­¥ï¼šæ¢å¤æ•°æ® ğŸ”„
â”œâ”€â”€ ä»å¤‡ä»½æ–‡ä»¶æ¢å¤
â””â”€â”€ éªŒè¯æ•°æ®å®Œæ•´æ€§

ç¬¬4æ­¥ï¼šå¯åŠ¨æœåŠ¡æµ‹è¯• ğŸš€  
â”œâ”€â”€ å…ˆå¯åŠ¨å•ä¸ªPodæµ‹è¯•
â””â”€â”€ ç¡®è®¤æ— è¯¯åå®Œæ•´å¯åŠ¨

ç¬¬5æ­¥ï¼šä¸šåŠ¡éªŒè¯ âœ…
â”œâ”€â”€ åŠŸèƒ½æµ‹è¯•
â””â”€â”€ æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
```

---

## 6. âš¡ å­˜å‚¨æ€§èƒ½ä¼˜åŒ–


### 6.1 å­˜å‚¨ç±»å‹é€‰æ‹©


**ğŸ“Š å­˜å‚¨æ€§èƒ½å¯¹æ¯”è¡¨**

| å­˜å‚¨ç±»å‹ | **IOPS** | **å»¶è¿Ÿ** | **ä»·æ ¼** | **é€‚ç”¨åœºæ™¯** |
|---------|----------|---------|----------|-------------|
| ğŸ”´ **æœ¬åœ°SSD** | `>10000` | `<1ms` | é«˜ | é«˜æ€§èƒ½æ•°æ®åº“ã€ç¼“å­˜ |
| ğŸŸ¡ **äº‘SSD** | `3000-10000` | `1-5ms` | ä¸­ | ä¸€èˆ¬æ•°æ®åº“ã€æ–‡ä»¶æœåŠ¡ |
| ğŸŸ¢ **ç½‘ç»œå­˜å‚¨** | `100-3000` | `5-20ms` | ä½ | æ—¥å¿—ã€å¤‡ä»½ã€å½’æ¡£ |
| ğŸ”µ **å¯¹è±¡å­˜å‚¨** | `100-1000` | `10-50ms` | æä½ | é™æ€æ–‡ä»¶ã€é•¿æœŸå­˜å‚¨ |

### 6.2 StorageClassæ€§èƒ½é…ç½®


**ğŸ”§ é«˜æ€§èƒ½å­˜å‚¨ç±»é…ç½®**

```yaml
# é«˜æ€§èƒ½SSDå­˜å‚¨ç±»
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: high-performance-ssd
provisioner: kubernetes.io/aws-ebs    # äº‘å‚å•†ç±»å‹
parameters:
  type: gp3                          # SSDç±»å‹
  iops: "10000"                      # IOPSæ€§èƒ½
  throughput: "500"                  # ååé‡ MB/s
  fsType: ext4                       # æ–‡ä»¶ç³»ç»Ÿ
  encrypted: "true"                  # å¯ç”¨åŠ å¯†
allowVolumeExpansion: true           # æ”¯æŒæ‰©å®¹
volumeBindingMode: WaitForFirstConsumer
reclaimPolicy: Delete
```

```yaml
# é€šç”¨æ€§èƒ½å­˜å‚¨ç±»  
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: standard-ssd
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp2                          # é€šç”¨SSD
  fsType: ext4
  encrypted: "true"
allowVolumeExpansion: true
volumeBindingMode: Immediate
reclaimPolicy: Retain               # ä¿ç•™æ•°æ®
```

### 6.3 æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–é…ç½®


**ğŸ”§ MySQLæ€§èƒ½ä¼˜åŒ–å®ä¾‹**

```yaml
# MySQLæ€§èƒ½ä¼˜åŒ–é…ç½®
apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-performance-config
data:
  mysql.cnf: |
    [mysqld]
    # å­˜å‚¨å¼•æ“ä¼˜åŒ–
    innodb_buffer_pool_size=4G           # è®¾ç½®ä¸ºå†…å­˜çš„70%
    innodb_log_file_size=512M            # æ—¥å¿—æ–‡ä»¶å¤§å°
    innodb_log_buffer_size=64M           # æ—¥å¿—ç¼“å†²åŒº
    
    # IOæ€§èƒ½ä¼˜åŒ–
    innodb_flush_method=O_DIRECT         # ç›´æ¥IOï¼Œç»•è¿‡ç³»ç»Ÿç¼“å­˜
    innodb_io_capacity=2000              # SSDæ¨èå€¼
    innodb_io_capacity_max=4000          # æœ€å¤§IOèƒ½åŠ›
    
    # å¹¶å‘ä¼˜åŒ–
    innodb_thread_concurrency=0         # è®©MySQLè‡ªåŠ¨ç®¡ç†
    max_connections=1000                 # æ ¹æ®éœ€æ±‚è°ƒæ•´
    
    # æŸ¥è¯¢ä¼˜åŒ–
    query_cache_type=0                   # æ–°ç‰ˆæœ¬å»ºè®®å…³é—­
    tmp_table_size=256M                  # ä¸´æ—¶è¡¨å¤§å°
```

### 6.4 å­˜å‚¨ç›‘æ§å’Œè°ƒä¼˜


**ğŸ“ˆ æ€§èƒ½ç›‘æ§æŒ‡æ ‡**

```yaml
# å­˜å‚¨æ€§èƒ½ç›‘æ§ServiceMonitor
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: storage-performance
spec:
  selector:
    matchLabels:
      app: mysql
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
```

**ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡**

| æŒ‡æ ‡ç±»å‹ | **ç›‘æ§é¡¹ç›®** | **å‘Šè­¦é˜ˆå€¼** | **ä¼˜åŒ–æ–¹å‘** |
|---------|-------------|-------------|-------------|
| ğŸ”¸ **IOPS** | `è¯»å†™æ“ä½œæ•°/ç§’` | >80%æœ€å¤§å€¼ | å‡çº§å­˜å‚¨ç±»å‹ |
| ğŸ”¸ **å»¶è¿Ÿ** | `IOå“åº”æ—¶é—´` | >20ms | æ£€æŸ¥IOé˜Ÿåˆ— |
| ğŸ”¸ **ååé‡** | `æ•°æ®ä¼ è¾“é‡` | >80%å¸¦å®½ | ä¼˜åŒ–æŸ¥è¯¢/å¢åŠ å¸¦å®½ |
| ğŸ”¸ **ç©ºé—´ä½¿ç”¨ç‡** | `ç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”` | >85% | æ¸…ç†æ•°æ®/æ‰©å®¹ |

---

## 7. ğŸ”„ å¤šå‰¯æœ¬æ•°æ®åŒæ­¥


### 7.1 æ•°æ®åŒæ­¥åœºæ™¯åˆ†æ


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦å¤šå‰¯æœ¬ï¼Ÿ**

```
å•å‰¯æœ¬é£é™©ï¼š
æ•°æ®åº“ Pod-1 (å”¯ä¸€å‰¯æœ¬)
     |
   ğŸ’¥æ•…éšœ
     |
   æ•°æ®ä¸¢å¤±ï¼

å¤šå‰¯æœ¬ä¼˜åŠ¿ï¼š
ä¸»å‰¯æœ¬ Pod-1 â†â†’ ä»å‰¯æœ¬ Pod-2
     |              |
   ğŸ’¥æ•…éšœ          æ­£å¸¸è¿è¡Œ
     |              |
   è‡ªåŠ¨åˆ‡æ¢ â†’      å˜ä¸ºä¸»å‰¯æœ¬
```

### 7.2 MySQLä¸»ä»åŒæ­¥é…ç½®


**ğŸ”§ MySQLä¸»ä»é…ç½®å®è·µ**

```yaml
# MySQLä¸»åº“é…ç½®
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: mysql-master
spec:
  serviceName: mysql-master
  replicas: 1
  selector:
    matchLabels:
      app: mysql-master
  template:
    metadata:
      labels:
        app: mysql-master
    spec:
      containers:
      - name: mysql
        image: mysql:8.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: root-password
        - name: MYSQL_REPLICATION_USER
          value: "replicator"
        - name: MYSQL_REPLICATION_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret  
              key: replication-password
        ports:
        - containerPort: 3306
        volumeMounts:
        - name: mysql-data
          mountPath: /var/lib/mysql
        - name: mysql-config
          mountPath: /etc/mysql/conf.d
      volumes:
      - name: mysql-config
        configMap:
          name: mysql-master-config
  volumeClaimTemplates:
  - metadata:
      name: mysql-data
    spec:
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 100Gi
      storageClassName: high-performance-ssd
```

**ğŸ”§ ä¸»åº“é…ç½®æ–‡ä»¶**

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-master-config
data:
  master.cnf: |
    [mysqld]
    # ä¸»åº“é…ç½®
    server-id=1                      # å”¯ä¸€æœåŠ¡å™¨ID
    log-bin=mysql-bin                # å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—
    binlog-format=ROW                # è¡Œçº§å¤åˆ¶
    
    # æ€§èƒ½é…ç½®
    innodb_buffer_pool_size=2G
    max_connections=500
    
    # å¤åˆ¶é…ç½®
    sync_binlog=1                    # åŒæ­¥å†™å…¥
    binlog_cache_size=1M
```

### 7.3 MySQLä»åº“é…ç½®


**ğŸ”§ ä»åº“StatefulSeté…ç½®**

```yaml
# MySQLä»åº“é…ç½®
apiVersion: apps/v1  
kind: StatefulSet
metadata:
  name: mysql-slave
spec:
  serviceName: mysql-slave
  replicas: 2          # å¯é…ç½®å¤šä¸ªä»åº“
  selector:
    matchLabels:
      app: mysql-slave
  template:
    metadata:
      labels:
        app: mysql-slave
    spec:
      containers:
      - name: mysql
        image: mysql:8.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: root-password
        ports:
        - containerPort: 3306
        volumeMounts:
        - name: mysql-data
          mountPath: /var/lib/mysql
        - name: mysql-config
          mountPath: /etc/mysql/conf.d
      volumes:
      - name: mysql-config
        configMap:
          name: mysql-slave-config
  volumeClaimTemplates:
  - metadata:
      name: mysql-data
    spec:
      accessModes: ["ReadWriteOnce"]
      resources:
        requests:
          storage: 100Gi
      storageClassName: standard-ssd  # ä»åº“å¯ä½¿ç”¨è¾ƒä½æ€§èƒ½å­˜å‚¨
```

### 7.4 æ•°æ®åŒæ­¥åˆå§‹åŒ–


**ğŸ”§ åŒæ­¥åˆå§‹åŒ–Job**

```yaml
# åˆå§‹åŒ–ä¸»ä»åŒæ­¥
apiVersion: batch/v1
kind: Job
metadata:
  name: mysql-replication-init
spec:
  template:
    spec:
      containers:
      - name: mysql-init
        image: mysql:8.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: root-password
        command:
        - /bin/bash
        - -c  
        - |
          # ç­‰å¾…ä¸»åº“å¯åŠ¨
          while ! mysqladmin ping -h mysql-master -u root -p$MYSQL_ROOT_PASSWORD --silent; do
            echo "ç­‰å¾…ä¸»åº“å¯åŠ¨..."
            sleep 5
          done
          
          # åœ¨ä¸»åº“åˆ›å»ºå¤åˆ¶ç”¨æˆ·
          mysql -h mysql-master -u root -p$MYSQL_ROOT_PASSWORD -e "
            CREATE USER 'replicator'@'%' IDENTIFIED BY 'replica_password';
            GRANT REPLICATION SLAVE ON *.* TO 'replicator'@'%';
            FLUSH PRIVILEGES;
          "
          
          # è·å–ä¸»åº“çŠ¶æ€
          MASTER_STATUS=$(mysql -h mysql-master -u root -p$MYSQL_ROOT_PASSWORD -e "SHOW MASTER STATUS\G")
          LOG_FILE=$(echo "$MASTER_STATUS" | grep File | awk '{print $2}')
          LOG_POS=$(echo "$MASTER_STATUS" | grep Position | awk '{print $2}')
          
          # é…ç½®ä»åº“
          for i in {0..1}; do
            mysql -h mysql-slave-$i.mysql-slave -u root -p$MYSQL_ROOT_PASSWORD -e "
              CHANGE MASTER TO
                MASTER_HOST='mysql-master',
                MASTER_USER='replicator',
                MASTER_PASSWORD='replica_password',
                MASTER_LOG_FILE='$LOG_FILE',
                MASTER_LOG_POS=$LOG_POS;
              START SLAVE;
            "
          done
      restartPolicy: OnFailure
```

### 7.5 æ•°æ®åŒæ­¥ç›‘æ§


**ğŸ“Š åŒæ­¥çŠ¶æ€æ£€æŸ¥**

```yaml
# åŒæ­¥ç›‘æ§CronJob
apiVersion: batch/v1
kind: CronJob
metadata:
  name: mysql-replication-monitor
spec:
  schedule: "*/5 * * * *"    # æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: replication-check
            image: mysql:8.0
            env:
            - name: MYSQL_ROOT_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: mysql-secret
                  key: root-password
            command:
            - /bin/bash
            - -c
            - |
              # æ£€æŸ¥ä»åº“åŒæ­¥çŠ¶æ€
              for i in {0..1}; do
                echo "æ£€æŸ¥ä»åº“ mysql-slave-$i åŒæ­¥çŠ¶æ€:"
                
                SLAVE_STATUS=$(mysql -h mysql-slave-$i.mysql-slave -u root -p$MYSQL_ROOT_PASSWORD -e "SHOW SLAVE STATUS\G")
                
                IO_RUNNING=$(echo "$SLAVE_STATUS" | grep "Slave_IO_Running" | awk '{print $2}')
                SQL_RUNNING=$(echo "$SLAVE_STATUS" | grep "Slave_SQL_Running" | awk '{print $2}')
                SECONDS_BEHIND=$(echo "$SLAVE_STATUS" | grep "Seconds_Behind_Master" | awk '{print $2}')
                
                if [[ "$IO_RUNNING" == "Yes" && "$SQL_RUNNING" == "Yes" ]]; then
                  echo "âœ… ä»åº“ $i åŒæ­¥æ­£å¸¸ï¼Œå»¶è¿Ÿï¼š$SECONDS_BEHIND ç§’"
                else
                  echo "âŒ ä»åº“ $i åŒæ­¥å¼‚å¸¸ï¼IO: $IO_RUNNING, SQL: $SQL_RUNNING"
                fi
              done
          restartPolicy: OnFailure
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®æŒä¹…åŒ–ï¼šè®©æ•°æ®åœ¨å®¹å™¨é‡å¯åä¾ç„¶å­˜åœ¨
ğŸ”¸ å­˜å‚¨æŠ½è±¡ï¼šPV (å®é™…å­˜å‚¨) â† PVC (å­˜å‚¨ç”³è¯·) â† Pod (ä½¿ç”¨å­˜å‚¨)
ğŸ”¸ æœ‰çŠ¶æ€åº”ç”¨ï¼šä½¿ç”¨StatefulSet + æŒä¹…åŒ–å­˜å‚¨
ğŸ”¸ å­˜å‚¨ç±»å‹ï¼šæ ¹æ®æ€§èƒ½éœ€æ±‚é€‰æ‹©åˆé€‚çš„StorageClass
ğŸ”¸ å¤‡ä»½ç­–ç•¥ï¼šå®šæœŸå¤‡ä»½ + å¿«é€Ÿæ¢å¤ + å¤šåœ°å®¹ç¾
ğŸ”¸ æ•°æ®åŒæ­¥ï¼šä¸»ä»å¤åˆ¶ä¿è¯é«˜å¯ç”¨æ€§
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™éœ€è¦æ•°æ®æŒä¹…åŒ–ï¼Ÿ**
```
å¿…é¡»æŒä¹…åŒ–ï¼š
âœ… æ•°æ®åº“æ•°æ® (ç”¨æˆ·è®¢å•ã€è´¦æˆ·ä¿¡æ¯)
âœ… ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ (å¤´åƒã€æ–‡æ¡£ã€å›¾ç‰‡)
âœ… åº”ç”¨é…ç½®æ–‡ä»¶ (é‡è¦é…ç½®)
âœ… æ—¥å¿—æ–‡ä»¶ (å®¡è®¡ã€è°ƒè¯•éœ€è¦)

å¯ä»¥ä¸æŒä¹…åŒ–ï¼š
âŒ ä¸´æ—¶ç¼“å­˜æ•°æ® (å¯ä»¥é‡æ–°è®¡ç®—)
âŒ ä¸­é—´è®¡ç®—ç»“æœ (å¯ä»¥é‡æ–°ç”Ÿæˆ)
âŒ ç³»ç»Ÿä¸´æ—¶æ–‡ä»¶ (é‡å¯åé‡å»º)
```

**ğŸ”¹ å¦‚ä½•é€‰æ‹©å­˜å‚¨æ–¹æ¡ˆï¼Ÿ**
```
é«˜æ€§èƒ½éœ€æ±‚ (æ•°æ®åº“)ï¼š
â†’ æœ¬åœ°SSD + é«˜IOPS + ä½å»¶è¿Ÿ

ä¸€èˆ¬æ€§èƒ½éœ€æ±‚ (æ–‡ä»¶å­˜å‚¨)ï¼š
â†’ äº‘SSD + ä¸­ç­‰IOPS + å¯æ‰©å±•

å¤‡ä»½å½’æ¡£éœ€æ±‚ï¼š
â†’ ç½‘ç»œå­˜å‚¨/å¯¹è±¡å­˜å‚¨ + ä½æˆæœ¬ + å¤§å®¹é‡

å¼€å‘æµ‹è¯•ç¯å¢ƒï¼š
â†’ æ ‡å‡†å­˜å‚¨ + æˆæœ¬ä¼˜å…ˆ
```

**ğŸ”¹ æ•°æ®å®‰å…¨ä¿éšœç­–ç•¥**
```
æ•°æ®ä¸ä¸¢å¤±ï¼š
â”œâ”€â”€ æŒä¹…åŒ–å­˜å‚¨ (åŸºç¡€ä¿éšœ)
â”œâ”€â”€ å®šæœŸå¤‡ä»½ (æ„å¤–æ¢å¤)
â”œâ”€â”€ å¤šå‰¯æœ¬åŒæ­¥ (é«˜å¯ç”¨)
â””â”€â”€ å¼‚åœ°å®¹ç¾ (æç«¯æƒ…å†µ)

æ€§èƒ½ä¿éšœï¼š
â”œâ”€â”€ é€‰æ‹©åˆé€‚å­˜å‚¨ç±»å‹
â”œâ”€â”€ é…ç½®å­˜å‚¨å‚æ•°ä¼˜åŒ–
â”œâ”€â”€ ç›‘æ§å­˜å‚¨æ€§èƒ½æŒ‡æ ‡
â””â”€â”€ åŠæ—¶æ‰©å®¹å’Œè°ƒä¼˜
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†ç½‘ç«™**ï¼šå•†å“å›¾ç‰‡ã€ç”¨æˆ·è®¢å•ã€æ”¯ä»˜æ•°æ®æŒä¹…åŒ–
- **å†…å®¹ç®¡ç†**ï¼šæ–‡ç« ã€åª’ä½“æ–‡ä»¶ã€ç”¨æˆ·ç”Ÿæˆå†…å®¹å­˜å‚¨
- **æ•°æ®åˆ†æ**ï¼šæ—¥å¿—æ”¶é›†ã€æ•°æ®ä»“åº“ã€æŠ¥è¡¨å­˜å‚¨
- **å¼€å‘æµ‹è¯•**ï¼šä»£ç ä»“åº“ã€æ„å»ºç¼“å­˜ã€æµ‹è¯•æ•°æ®ç®¡ç†

**ğŸ”§ è¿ç»´å®è·µè¦ç‚¹**
- **å®¹é‡è§„åˆ’**ï¼šé¢„ä¼°æ•°æ®å¢é•¿ï¼Œæå‰è§„åˆ’å­˜å‚¨å®¹é‡
- **æ€§èƒ½ç›‘æ§**ï¼šå…³æ³¨IOPSã€å»¶è¿Ÿã€ååé‡æŒ‡æ ‡
- **å¤‡ä»½éªŒè¯**ï¼šå®šæœŸæµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹
- **æˆæœ¬æ§åˆ¶**ï¼šæ ¹æ®æ•°æ®é‡è¦æ€§é€‰æ‹©å­˜å‚¨ç±»å‹

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- æœ‰çŠ¶æ€ç”¨StatefulSetï¼Œæ— çŠ¶æ€ç”¨Deployment
- æ•°æ®é‡è¦å¿…æŒä¹…ï¼Œæ€§èƒ½è¦æ±‚é€‰å­˜å‚¨
- å®šæœŸå¤‡ä»½é˜²æ„å¤–ï¼Œå¤šå‰¯æœ¬åŒæ­¥ä¿å¯ç”¨
- ç›‘æ§å‘Šè­¦æ—©å‘ç°ï¼Œå®¹é‡è§„åˆ’è¦æå‰