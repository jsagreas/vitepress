---
title: 14ã€ç»‘å®šå…³ç³»ç®¡ç†å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Exchangeå’Œç»‘å®š](#1-ä»€ä¹ˆæ˜¯Exchangeå’Œç»‘å®š)
2. [ç»‘å®šå…³ç³»çš„æœ¬è´¨](#2-ç»‘å®šå…³ç³»çš„æœ¬è´¨)
3. [æ ¸å¿ƒç»‘å®šç®¡ç†å‘½ä»¤è¯¦è§£](#3-æ ¸å¿ƒç»‘å®šç®¡ç†å‘½ä»¤è¯¦è§£)
4. [å®æˆ˜æ“ä½œæ¼”ç¤º](#4-å®æˆ˜æ“ä½œæ¼”ç¤º)
5. [æ¶ˆæ¯è·Ÿè¸ªåŠŸèƒ½](#5-æ¶ˆæ¯è·Ÿè¸ªåŠŸèƒ½)
6. [å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ](#6-å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”— ä»€ä¹ˆæ˜¯Exchangeå’Œç»‘å®š


### 1.1 é€šä¿—ç†è§£ï¼šå¿«é€’åˆ†æ‹£ä¸­å¿ƒ


æƒ³è±¡ä¸€ä¸‹**å¿«é€’åˆ†æ‹£ä¸­å¿ƒ**çš„å·¥ä½œæµç¨‹ï¼š

```
å‘ä»¶äºº â†’ å¿«é€’åˆ†æ‹£ä¸­å¿ƒ â†’ ä¸åŒçš„æŠ•é€’è·¯çº¿ â†’ æ”¶ä»¶äºº

æ¶ˆæ¯ç”Ÿäº§è€… â†’ Exchangeäº¤æ¢æœº â†’ ç»‘å®šå…³ç³» â†’ é˜Ÿåˆ— â†’ æ¶ˆæ¯æ¶ˆè´¹è€…
```

**ğŸ”¸ Exchangeï¼ˆäº¤æ¢æœºï¼‰**ï¼šå°±åƒå¿«é€’åˆ†æ‹£ä¸­å¿ƒ
- æ¥æ”¶æ‰€æœ‰å‘æ¥çš„æ¶ˆæ¯ï¼ˆåŒ…è£¹ï¼‰
- æ ¹æ®è§„åˆ™å†³å®šæ¶ˆæ¯å‘å¾€å“ªä¸ªé˜Ÿåˆ—
- ä¸å­˜å‚¨æ¶ˆæ¯ï¼Œåªè´Ÿè´£è½¬å‘

**ğŸ”¸ ç»‘å®šï¼ˆBindingï¼‰**ï¼šå°±åƒåˆ†æ‹£è§„åˆ™
- å®šä¹‰Exchangeå’ŒQueueä¹‹é—´çš„å…³ç³»
- å‘Šè¯‰Exchangeï¼š"ä»€ä¹ˆæ ·çš„æ¶ˆæ¯åº”è¯¥å‘åˆ°å“ªä¸ªé˜Ÿåˆ—"
- å¯ä»¥è®¾ç½®è·¯ç”±é”®ï¼ˆRouting Keyï¼‰ä½œä¸ºç­›é€‰æ¡ä»¶

### 1.2 ç»‘å®šå…³ç³»çš„æ ¸å¿ƒè¦ç´ 


| è¦ç´  | **å«ä¹‰** | **ç±»æ¯”** | **ä½œç”¨** |
|------|---------|---------|---------|
| **æºï¼ˆSourceï¼‰** | `å‘é€æ¶ˆæ¯çš„Exchange` | `å¿«é€’åˆ†æ‹£ä¸­å¿ƒ` | `æ¶ˆæ¯çš„èµ·ç‚¹` |
| **ç›®æ ‡ï¼ˆDestinationï¼‰** | `æ¥æ”¶æ¶ˆæ¯çš„Queue` | `æŠ•é€’ç›®çš„åœ°` | `æ¶ˆæ¯çš„ç»ˆç‚¹` |
| **è·¯ç”±é”®ï¼ˆRouting Keyï¼‰** | `æ¶ˆæ¯ç­›é€‰æ¡ä»¶` | `åœ°å€æ ‡ç­¾` | `å†³å®šæ¶ˆæ¯å»å‘` |
| **å‚æ•°ï¼ˆArgumentsï¼‰** | `é¢å¤–çš„ç»‘å®šé…ç½®` | `ç‰¹æ®ŠæŠ•é€’è¦æ±‚` | `å®šåˆ¶åŒ–è§„åˆ™` |

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦ç»‘å®šç®¡ç†


**ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯**ï¼š
- **ğŸ“Š ç›‘æ§ç³»ç»ŸçŠ¶æ€**ï¼šæŸ¥çœ‹å“ªäº›é˜Ÿåˆ—è¿æ¥åˆ°äº†å“ªäº›Exchange
- **ğŸ” æ•…éšœæ’æŸ¥**ï¼šæ¶ˆæ¯æ²¡æœ‰åˆ°è¾¾é˜Ÿåˆ—ï¼Ÿæ£€æŸ¥ç»‘å®šå…³ç³»æ˜¯å¦æ­£ç¡®
- **ğŸ› ï¸ ç³»ç»Ÿç»´æŠ¤**ï¼šäº†è§£æ¶ˆæ¯æµå‘ï¼Œä¼˜åŒ–æ¶æ„è®¾è®¡
- **ğŸ“ˆ æ€§èƒ½è°ƒä¼˜**ï¼šåˆ†æç»‘å®šå…³ç³»ï¼Œå‘ç°æ€§èƒ½ç“¶é¢ˆ

---

## 2. ğŸ§­ ç»‘å®šå…³ç³»çš„æœ¬è´¨


### 2.1 ç»‘å®šçš„å·¥ä½œåŸç†


```
æ¶ˆæ¯å‘é€æµç¨‹ï¼š

ç”Ÿäº§è€… â†’ Exchange â†’ æ£€æŸ¥ç»‘å®šå…³ç³» â†’ åŒ¹é…è·¯ç”±é”® â†’ å‘é€åˆ°å¯¹åº”Queue

è¯¦ç»†æ­¥éª¤ï¼š
1. ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°Exchangeï¼Œæºå¸¦Routing Key
2. ExchangeæŸ¥çœ‹æ‰€æœ‰ä¸è‡ªå·±ç»‘å®šçš„Queue
3. æ ¹æ®ç»‘å®šè§„åˆ™åŒ¹é…Routing Key
4. å°†æ¶ˆæ¯æŠ•é€’åˆ°åŒ¹é…çš„Queueä¸­
5. å¦‚æœæ²¡æœ‰åŒ¹é…çš„Queueï¼Œæ¶ˆæ¯å¯èƒ½è¢«ä¸¢å¼ƒ
```

### 2.2 ç»‘å®šç±»å‹è¯´æ˜


**ğŸ”¸ Directç»‘å®šï¼ˆç›´æ¥ç»‘å®šï¼‰**
```
ç‰¹ç‚¹ï¼šç²¾ç¡®åŒ¹é…è·¯ç”±é”®
ç¤ºä¾‹ï¼šRouting Key = "order.create" åªä¼šå‘é€åˆ°ç»‘å®šäº† "order.create" çš„é˜Ÿåˆ—

é€‚ç”¨åœºæ™¯ï¼š
- è®¢å•å¤„ç†ç³»ç»Ÿ
- ç”¨æˆ·æ³¨å†Œæµç¨‹
- ç²¾ç¡®çš„ä¸šåŠ¡é€»è¾‘åˆ†å‘
```

**ğŸ”¸ Topicç»‘å®šï¼ˆä¸»é¢˜ç»‘å®šï¼‰**
```
ç‰¹ç‚¹ï¼šæ”¯æŒé€šé…ç¬¦åŒ¹é…
é€šé…ç¬¦è§„åˆ™ï¼š
- * ï¼šåŒ¹é…ä¸€ä¸ªå•è¯
- # ï¼šåŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå•è¯

ç¤ºä¾‹ï¼š
è·¯ç”±é”®æ¨¡å¼ï¼š"order.*" å¯ä»¥åŒ¹é… "order.create"ã€"order.update"
è·¯ç”±é”®æ¨¡å¼ï¼š"user.#" å¯ä»¥åŒ¹é… "user.create"ã€"user.profile.update"
```

**ğŸ”¸ Fanoutç»‘å®šï¼ˆå¹¿æ’­ç»‘å®šï¼‰**
```
ç‰¹ç‚¹ï¼šå¿½ç•¥è·¯ç”±é”®ï¼Œå¹¿æ’­åˆ°æ‰€æœ‰ç»‘å®šçš„é˜Ÿåˆ—
ç¤ºä¾‹ï¼šç³»ç»Ÿé€šçŸ¥ã€ç¼“å­˜åˆ·æ–°ã€æ—¥å¿—è®°å½•

å·¥ä½œæ–¹å¼ï¼š
Exchangeæ”¶åˆ°æ¶ˆæ¯ â†’ å‘é€åˆ°æ‰€æœ‰ç»‘å®šçš„Queue â†’ å®Œæˆå¹¿æ’­
```

---

## 3. ğŸ“‹ æ ¸å¿ƒç»‘å®šç®¡ç†å‘½ä»¤è¯¦è§£


### 3.1 åŸºç¡€æŸ¥çœ‹å‘½ä»¤


#### ğŸ” æŸ¥çœ‹æ‰€æœ‰ç»‘å®šå…³ç³»


```bash
rabbitmqctl list_bindings
```

**å‘½ä»¤è§£é‡Š**ï¼š
- `list_bindings`ï¼šåˆ—å‡ºæ‰€æœ‰çš„ç»‘å®šå…³ç³»
- æ˜¾ç¤ºï¼šæºExchange â†’ ç›®æ ‡Queue çš„æ‰€æœ‰è¿æ¥

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
æºåç§°          æºç±»å‹    ç›®æ ‡åç§°        ç›®æ ‡ç±»å‹    è·¯ç”±é”®           å‚æ•°
amq.direct      exchange  task_queue      queue      task.process     []
user_exchange   exchange  user_queue      queue      user.create      []
order_exchange  exchange  order_queue     queue      order.*          []
```

**ğŸ”¸ è¾“å‡ºå­—æ®µè¯´æ˜**ï¼š
- **æºåç§°**ï¼šå‘é€æ¶ˆæ¯çš„Exchangeåç§°
- **æºç±»å‹**ï¼šé€šå¸¸æ˜¯ `exchange`
- **ç›®æ ‡åç§°**ï¼šæ¥æ”¶æ¶ˆæ¯çš„Queueåç§°  
- **ç›®æ ‡ç±»å‹**ï¼šé€šå¸¸æ˜¯ `queue`
- **è·¯ç”±é”®**ï¼šæ¶ˆæ¯åŒ¹é…è§„åˆ™
- **å‚æ•°**ï¼šé¢å¤–çš„ç»‘å®šé…ç½®

#### ğŸ¯ æŸ¥çœ‹æŒ‡å®švhostçš„ç»‘å®š


```bash
rabbitmqctl list_bindings /my_vhost
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¤šç§Ÿæˆ·ç¯å¢ƒä¸‹ï¼ŒåªæŸ¥çœ‹ç‰¹å®šè™šæ‹Ÿä¸»æœºçš„ç»‘å®š
- é¿å…ä¿¡æ¯è¿‡å¤šï¼Œä¸“æ³¨äºç‰¹å®šåº”ç”¨çš„ç»‘å®šå…³ç³»

**ğŸ’¡ å°è´´å£«**ï¼š
> å¦‚æœä¸æŒ‡å®švhostï¼Œé»˜è®¤æŸ¥çœ‹ `/` (æ ¹vhost)çš„ç»‘å®šå…³ç³»

### 3.2 é«˜çº§ç­›é€‰å‘½ä»¤


#### ğŸ“Š æŒ‰æºåç§°ç­›é€‰


```bash
rabbitmqctl list_bindings -p /my_vhost source_name
```

**å®é™…åº”ç”¨**ï¼š
```bash
# æŸ¥çœ‹åä¸º "order_exchange" çš„Exchangeçš„æ‰€æœ‰ç»‘å®š
rabbitmqctl list_bindings source_name order_exchange

# è¾“å‡ºæ˜¾ç¤ºè¿™ä¸ªExchangeè¿æ¥äº†å“ªäº›Queue
```

#### ğŸ·ï¸ æŒ‰æºç±»å‹ç­›é€‰


```bash
rabbitmqctl list_bindings source_kind
```

**å¸¸è§çš„æºç±»å‹**ï¼š
- `exchange`ï¼šæ™®é€šExchange
- `topic`ï¼šä¸»é¢˜Exchange  
- `direct`ï¼šç›´æ¥Exchange
- `fanout`ï¼šæ‰‡å½¢Exchange

#### ğŸ¯ æŒ‰ç›®æ ‡ç­›é€‰


```bash
# æŒ‰ç›®æ ‡åç§°ç­›é€‰
rabbitmqctl list_bindings destination_name my_queue

# æŒ‰ç›®æ ‡ç±»å‹ç­›é€‰  
rabbitmqctl list_bindings destination_kind queue
```

**å®ç”¨æŠ€å·§**ï¼š
> ğŸ“Œ æƒ³çŸ¥é“æŸä¸ªé˜Ÿåˆ—æ¥æ”¶å“ªäº›Exchangeçš„æ¶ˆæ¯ï¼Ÿç”¨ `destination_name` ç­›é€‰
> ğŸ“Œ æƒ³çŸ¥é“ç³»ç»Ÿä¸­æ‰€æœ‰é˜Ÿåˆ—çš„ç»‘å®šæƒ…å†µï¼Ÿç”¨ `destination_kind queue` ç­›é€‰

#### ğŸ”‘ æŒ‰è·¯ç”±é”®ç­›é€‰


```bash
rabbitmqctl list_bindings routing_key "order.*"
```

**åº”ç”¨åœºæ™¯**ï¼š
- æŸ¥æ‰¾æ‰€æœ‰è®¢å•ç›¸å…³çš„ç»‘å®šå…³ç³»
- åˆ†æç‰¹å®šä¸šåŠ¡çš„æ¶ˆæ¯æµå‘
- æ’æŸ¥è·¯ç”±é”®é…ç½®é—®é¢˜

#### âš™ï¸ æŸ¥çœ‹ç»‘å®šå‚æ•°


```bash
rabbitmqctl list_bindings arguments
```

**å‚æ•°ç¤ºä¾‹**ï¼š
```json
{
  "x-match": "all",
  "priority": "high",
  "retry-count": "3"
}
```

---

## 4. ğŸ› ï¸ å®æˆ˜æ“ä½œæ¼”ç¤º


### 4.1 å…¸å‹åº”ç”¨åœºæ™¯æ¼”ç¤º


**åœºæ™¯**ï¼šç”µå•†è®¢å•å¤„ç†ç³»ç»Ÿ

```
ç³»ç»Ÿæ¶æ„ï¼š
è®¢å•Exchange â†’ å¤šä¸ªå¤„ç†é˜Ÿåˆ—

ç»‘å®šå…³ç³»ï¼š
order_exchange â†’ order_create_queue (è·¯ç”±é”®: order.create)
order_exchange â†’ order_payment_queue (è·¯ç”±é”®: order.payment)  
order_exchange â†’ order_shipping_queue (è·¯ç”±é”®: order.shipping)
```

**ğŸ”¸ æŸ¥çœ‹è®¢å•ç³»ç»Ÿçš„æ‰€æœ‰ç»‘å®š**ï¼š
```bash
# 1. æŸ¥çœ‹order_exchangeçš„æ‰€æœ‰ç»‘å®š
rabbitmqctl list_bindings source_name order_exchange

# 2. æŸ¥çœ‹order_create_queueæ¥æ”¶å“ªäº›æ¶ˆæ¯
rabbitmqctl list_bindings destination_name order_create_queue

# 3. æŸ¥çœ‹æ‰€æœ‰è®¢å•ç›¸å…³çš„è·¯ç”±é”®
rabbitmqctl list_bindings routing_key | grep order
```

### 4.2 æ•…éšœæ’æŸ¥å®æˆ˜


**ğŸš¨ å¸¸è§é—®é¢˜**ï¼šæ¶ˆæ¯å‘é€äº†ä½†é˜Ÿåˆ—æ²¡æœ‰æ”¶åˆ°

**æ’æŸ¥æ­¥éª¤**ï¼š

**â‘  æ£€æŸ¥Exchangeæ˜¯å¦å­˜åœ¨**
```bash
rabbitmqctl list_exchanges | grep my_exchange
```

**â‘¡ æ£€æŸ¥Queueæ˜¯å¦å­˜åœ¨**  
```bash
rabbitmqctl list_queues | grep my_queue
```

**â‘¢ æ£€æŸ¥ç»‘å®šå…³ç³»æ˜¯å¦å­˜åœ¨**
```bash
rabbitmqctl list_bindings source_name my_exchange destination_name my_queue
```

**â‘£ æ£€æŸ¥è·¯ç”±é”®æ˜¯å¦åŒ¹é…**
```bash
rabbitmqctl list_bindings routing_key "my.routing.key"
```

### 4.3 æ€§èƒ½ç›‘æ§å®æˆ˜


**ğŸ“ˆ åˆ†æç»‘å®šå…³ç³»æ€§èƒ½**ï¼š

```bash
# ç»Ÿè®¡æ¯ä¸ªExchangeçš„ç»‘å®šæ•°é‡
rabbitmqctl list_bindings | cut -f1 | sort | uniq -c

# æ‰¾å‡ºç»‘å®šæœ€å¤šçš„Exchangeï¼ˆå¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆï¼‰
rabbitmqctl list_bindings | cut -f1 | sort | uniq -c | sort -nr | head -10
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
    15 order_exchange     # 15ä¸ªç»‘å®š
     8 user_exchange      # 8ä¸ªç»‘å®š  
     3 log_exchange       # 3ä¸ªç»‘å®š
```

---

## 5. ğŸ” æ¶ˆæ¯è·Ÿè¸ªåŠŸèƒ½


### 5.1 è·Ÿè¸ªåŠŸèƒ½ä»‹ç»


**ä»€ä¹ˆæ˜¯æ¶ˆæ¯è·Ÿè¸ª**ï¼Ÿ
> ğŸ’¡ æ¶ˆæ¯è·Ÿè¸ªå°±åƒç»™æ¶ˆæ¯å®‰è£…äº†"GPSå®šä½å™¨"ï¼Œå¯ä»¥çœ‹åˆ°æ¶ˆæ¯åœ¨RabbitMQä¸­çš„å®Œæ•´ä¼ è¾“è·¯å¾„

**è·Ÿè¸ªèƒ½çœ‹åˆ°ä»€ä¹ˆ**ï¼š
- æ¶ˆæ¯ä½•æ—¶åˆ°è¾¾Exchange
- æ¶ˆæ¯å¦‚ä½•è¢«è·¯ç”±åˆ°Queue
- æ¶ˆæ¯æ˜¯å¦è¢«æ­£ç¡®æŠ•é€’
- æ¶ˆæ¯è¢«å“ªä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹

### 5.2 å¯ç”¨å’Œç¦ç”¨è·Ÿè¸ª


#### ğŸŸ¢ å¯ç”¨æ¶ˆæ¯è·Ÿè¸ª


```bash
rabbitmqctl trace_on
```

**å¯ç”¨åçš„æ•ˆæœ**ï¼š
- åˆ›å»ºç‰¹æ®Šçš„è·Ÿè¸ªExchangeï¼š`amq.rabbitmq.trace`
- æ‰€æœ‰æ¶ˆæ¯æ“ä½œéƒ½ä¼šäº§ç”Ÿè·Ÿè¸ªä¿¡æ¯
- è·Ÿè¸ªä¿¡æ¯å‘é€åˆ°ç‰¹æ®Šçš„é˜Ÿåˆ—

**âš ï¸ é‡è¦æé†’**ï¼š
> ğŸ”¥ è·Ÿè¸ªä¼šäº§ç”Ÿé¢å¤–çš„æ¶ˆæ¯å’Œæ€§èƒ½å¼€é”€ï¼Œåªåœ¨è°ƒè¯•æ—¶ä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒè¦è°¨æ…

#### ğŸ”´ ç¦ç”¨æ¶ˆæ¯è·Ÿè¸ª


```bash
rabbitmqctl trace_off
```

### 5.3 è·Ÿè¸ªä¿¡æ¯çš„ä½¿ç”¨


**è®¾ç½®è·Ÿè¸ªé˜Ÿåˆ—**ï¼š
```bash
# 1. åˆ›å»ºè·Ÿè¸ªé˜Ÿåˆ—
rabbitmqctl declare queue name=trace_queue

# 2. ç»‘å®šåˆ°è·Ÿè¸ªExchange
rabbitmqctl declare binding source=amq.rabbitmq.trace destination=trace_queue routing_key="#"
```

**æŸ¥çœ‹è·Ÿè¸ªä¿¡æ¯**ï¼š
```bash
# æ¶ˆè´¹è·Ÿè¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯
rabbitmqctl get trace_queue
```

**è·Ÿè¸ªä¿¡æ¯ç¤ºä¾‹**ï¼š
```json
{
  "operation": "publish",
  "exchange": "order_exchange", 
  "routing_key": "order.create",
  "timestamp": "2025-01-20T10:30:00Z",
  "message_size": 1024
}
```

---

## 6. â“ å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ


### 6.1 å¸¸è§é—®é¢˜è§£ç­”


**Q1: ä¸ºä»€ä¹ˆæˆ‘çš„æ¶ˆæ¯å‘é€äº†ä½†æ²¡æœ‰åˆ°è¾¾é˜Ÿåˆ—ï¼Ÿ**

**A1: æ£€æŸ¥æ¸…å•**ï¼š
- âœ… Exchangeåç§°æ˜¯å¦æ­£ç¡®
- âœ… Queueåç§°æ˜¯å¦æ­£ç¡®  
- âœ… ç»‘å®šå…³ç³»æ˜¯å¦å­˜åœ¨
- âœ… è·¯ç”±é”®æ˜¯å¦åŒ¹é…
- âœ… Exchangeç±»å‹æ˜¯å¦æ­£ç¡®

**Q2: å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°æŸä¸ªé˜Ÿåˆ—çš„æ‰€æœ‰ç»‘å®šï¼Ÿ**

```bash
rabbitmqctl list_bindings | grep "my_queue_name"
```

**Q3: ç»‘å®šå¤ªå¤šï¼Œæ€§èƒ½ä¼šå—å½±å“å—ï¼Ÿ**

**A3: å½±å“åˆ†æ**ï¼š
- ğŸ“Š **å°‘é‡ç»‘å®š**ï¼ˆ<100ï¼‰ï¼šå‡ ä¹æ— å½±å“
- âš¡ **ä¸­ç­‰ç»‘å®š**ï¼ˆ100-1000ï¼‰ï¼šè½»å¾®å½±å“
- ğŸ”¥ **å¤§é‡ç»‘å®š**ï¼ˆ>1000ï¼‰ï¼šéœ€è¦ä¼˜åŒ–æ¶æ„

### 6.2 æœ€ä½³å®è·µ


**ğŸ¯ ç»‘å®šå‘½åè§„èŒƒ**ï¼š
```bash
# æ¨èçš„å‘½åæ–¹å¼
ä¸šåŠ¡æ¨¡å—.æ“ä½œç±»å‹.å…·ä½“åŠ¨ä½œ

ç¤ºä¾‹ï¼š
order.create.success
user.profile.update  
payment.process.failed
```

**ğŸ“Š ç›‘æ§å»ºè®®**ï¼š
```bash
# å®šæœŸæ£€æŸ¥ç»‘å®šæ•°é‡
echo "å½“å‰ç»‘å®šæ€»æ•°ï¼š$(rabbitmqctl list_bindings | wc -l)"

# æ£€æŸ¥æ˜¯å¦æœ‰æ­»é˜Ÿåˆ—ï¼ˆæ²¡æœ‰ç»‘å®šçš„é˜Ÿåˆ—ï¼‰
rabbitmqctl list_queues name | while read queue; do
  if [ -z "$(rabbitmqctl list_bindings destination_name $queue)" ]; then
    echo "æ­»é˜Ÿåˆ—ï¼š$queue"
  fi
done
```

**ğŸ”’ å®‰å…¨å»ºè®®**ï¼š
- ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒé•¿æ—¶é—´å¼€å¯æ¶ˆæ¯è·Ÿè¸ª
- å®šæœŸæ¸…ç†ä¸ç”¨çš„ç»‘å®šå…³ç³»
- ä½¿ç”¨æœ€å°æƒé™åŸåˆ™é…ç½®ç»‘å®š

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Exchangeï¼šæ¶ˆæ¯åˆ†å‘ä¸­å¿ƒï¼Œä¸å­˜å‚¨åªè½¬å‘
ğŸ”¸ ç»‘å®šï¼šå®šä¹‰Exchangeå’ŒQueueçš„è¿æ¥å…³ç³»  
ğŸ”¸ è·¯ç”±é”®ï¼šæ¶ˆæ¯ç­›é€‰æ¡ä»¶ï¼Œå†³å®šæ¶ˆæ¯å»å‘
ğŸ”¸ è·Ÿè¸ªï¼šè°ƒè¯•å·¥å…·ï¼Œæ˜¾ç¤ºæ¶ˆæ¯ä¼ è¾“è·¯å¾„
```

### 7.2 æ ¸å¿ƒå‘½ä»¤é€ŸæŸ¥


| å‘½ä»¤ | **åŠŸèƒ½** | **ä½¿ç”¨åœºæ™¯** |
|------|---------|-------------|
| `list_bindings` | `æŸ¥çœ‹æ‰€æœ‰ç»‘å®š` | `ç³»ç»Ÿæ¦‚è§ˆ` |
| `list_bindings {vhost}` | `æŸ¥çœ‹æŒ‡å®švhostç»‘å®š` | `å¤šç§Ÿæˆ·ç¯å¢ƒ` |
| `list_bindings source_name {name}` | `æŸ¥çœ‹æŒ‡å®šExchangeç»‘å®š` | `Exchangeåˆ†æ` |
| `list_bindings destination_name {name}` | `æŸ¥çœ‹æŒ‡å®šQueueç»‘å®š` | `Queueåˆ†æ` |
| `list_bindings routing_key {key}` | `æŸ¥çœ‹æŒ‡å®šè·¯ç”±é”®ç»‘å®š` | `è·¯ç”±åˆ†æ` |
| `trace_on/trace_off` | `å¯ç”¨/ç¦ç”¨æ¶ˆæ¯è·Ÿè¸ª` | `è°ƒè¯•æ’é”™` |

### 7.3 å®æˆ˜åº”ç”¨è¦ç‚¹


**ğŸ”¹ æ—¥å¸¸ç›‘æ§**ï¼š
```bash
# æ¯æ—¥æ£€æŸ¥è„šæœ¬
#!/bin/bash
echo "=== RabbitMQç»‘å®šå…³ç³»æ£€æŸ¥ ==="
echo "æ€»ç»‘å®šæ•°ï¼š$(rabbitmqctl list_bindings | wc -l)"
echo "Exchangeæ•°ï¼š$(rabbitmqctl list_exchanges | wc -l)"  
echo "Queueæ•°ï¼š$(rabbitmqctl list_queues | wc -l)"
```

**ğŸ”¹ æ•…éšœæ’æŸ¥æ€è·¯**ï¼š
```
æ¶ˆæ¯ä¸¢å¤±æ’æŸ¥æµç¨‹ï¼š
1. ç¡®è®¤Exchangeå­˜åœ¨
2. ç¡®è®¤Queueå­˜åœ¨
3. ç¡®è®¤ç»‘å®šå…³ç³»å­˜åœ¨
4. ç¡®è®¤è·¯ç”±é”®åŒ¹é…
5. å¼€å¯è·Ÿè¸ªæŸ¥çœ‹è¯¦ç»†è·¯å¾„
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
- ğŸ¯ é¿å…åˆ›å»ºè¿‡å¤šçš„ç»‘å®šå…³ç³»
- âš¡ åˆç†è®¾è®¡è·¯ç”±é”®è§„åˆ™
- ğŸ“Š å®šæœŸæ¸…ç†æ— ç”¨çš„ç»‘å®š
- ğŸ” ä½¿ç”¨è·Ÿè¸ªåŠŸèƒ½åˆ†æç“¶é¢ˆ

### 7.4 å­¦ä¹ è·¯å¾„å»ºè®®


**â­ æ–°æ‰‹å…¥é—¨**ï¼š
1. ç†è§£Exchangeå’ŒQueueçš„å…³ç³»
2. æŒæ¡åŸºæœ¬çš„list_bindingså‘½ä»¤
3. ç»ƒä¹ åˆ›å»ºç®€å•çš„ç»‘å®šå…³ç³»

**â­â­ è¿›é˜¶ä½¿ç”¨**ï¼š
1. å­¦ä¼šä½¿ç”¨å„ç§ç­›é€‰å‚æ•°
2. æŒæ¡æ¶ˆæ¯è·Ÿè¸ªåŠŸèƒ½
3. èƒ½å¤Ÿè¿›è¡Œæ•…éšœæ’æŸ¥

**â­â­â­ é«˜çº§åº”ç”¨**ï¼š
1. è®¾è®¡å¤æ‚çš„è·¯ç”±è§„åˆ™
2. è¿›è¡Œæ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
3. ç¼–å†™è‡ªåŠ¨åŒ–ç®¡ç†è„šæœ¬

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç»‘å®šå…³ç³»è¿ä¸¤ç«¯ï¼ŒExchangeé˜Ÿåˆ—ä¸­é—´ç«™
- è·¯ç”±é”®åŒ¹é…æœ‰è§„åˆ™ï¼Œè·Ÿè¸ªè°ƒè¯•å¾ˆæ–¹ä¾¿
- ç›‘æ§ç»´æŠ¤è¦åŠæ—¶ï¼Œæ€§èƒ½ä¼˜åŒ–ä¸å¯å°‘