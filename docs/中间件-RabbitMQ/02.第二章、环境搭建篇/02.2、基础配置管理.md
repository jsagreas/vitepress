---
title: 2ã€åŸºç¡€é…ç½®ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [RabbitMQé…ç½®æ–‡ä»¶è¯¦è§£](#1-RabbitMQé…ç½®æ–‡ä»¶è¯¦è§£)
2. [ç¯å¢ƒå˜é‡è®¾ç½®ä¸ç®¡ç†](#2-ç¯å¢ƒå˜é‡è®¾ç½®ä¸ç®¡ç†)
3. [æ—¥å¿—é…ç½®ä¸ç®¡ç†](#3-æ—¥å¿—é…ç½®ä¸ç®¡ç†)
4. [æ’ä»¶ç®¡ç†ç³»ç»Ÿ](#4-æ’ä»¶ç®¡ç†ç³»ç»Ÿ)
5. [å®‰å…¨é…ç½®åŸºç¡€](#5-å®‰å…¨é…ç½®åŸºç¡€)
6. [é…ç½®ä¼˜åŒ–ä¸æ•…éšœæ’æŸ¥](#6-é…ç½®ä¼˜åŒ–ä¸æ•…éšœæ’æŸ¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“„ RabbitMQé…ç½®æ–‡ä»¶è¯¦è§£


### 1.1 é…ç½®æ–‡ä»¶åŸºç¡€è®¤çŸ¥


**ä»€ä¹ˆæ˜¯RabbitMQé…ç½®æ–‡ä»¶ï¼Ÿ**
> ğŸ’¡ **ç®€å•ç†è§£**ï¼šé…ç½®æ–‡ä»¶å°±åƒæ˜¯RabbitMQçš„"è¯´æ˜ä¹¦"ï¼Œå‘Šè¯‰å®ƒæ€ä¹ˆè¿è¡Œã€ç”¨å¤šå°‘å†…å­˜ã€ç›‘å¬å“ªä¸ªç«¯å£ç­‰

**é…ç½®æ–‡ä»¶çš„ä½œç”¨**ï¼š
- ğŸ¯ **æ§åˆ¶è¡Œä¸º**ï¼šå†³å®šRabbitMQå¦‚ä½•å¯åŠ¨å’Œè¿è¡Œ
- ğŸ”§ **è°ƒæ•´æ€§èƒ½**ï¼šè®¾ç½®å†…å­˜é™åˆ¶ã€ç£ç›˜ä½¿ç”¨ç­‰
- ğŸ”’ **ç®¡ç†å®‰å…¨**ï¼šé…ç½®ç”¨æˆ·æƒé™ã€SSLè¯ä¹¦ç­‰
- ğŸ“Š **å®šåˆ¶åŠŸèƒ½**ï¼šå¼€å¯æˆ–å…³é—­ç‰¹å®šåŠŸèƒ½æ¨¡å—

### 1.2 é…ç½®æ–‡ä»¶ç±»å‹ä¸ä½ç½®


**é…ç½®æ–‡ä»¶ç±»å‹å¯¹æ¯”**ï¼š

| é…ç½®æ–‡ä»¶ç±»å‹ | **ç”¨é€”è¯´æ˜** | **é€‚ç”¨åœºæ™¯** | **æ¨èç¨‹åº¦** |
|-------------|------------|-------------|-------------|
| `rabbitmq.conf` | **æ–°æ ¼å¼é…ç½®æ–‡ä»¶** | `RabbitMQ 3.7+ç‰ˆæœ¬` | â­â­â­**æ¨è** |
| `advanced.config` | **é«˜çº§Erlangé…ç½®** | `å¤æ‚ä¼ä¸šç¯å¢ƒ` | â­â­**ç‰¹æ®Šéœ€æ±‚** |
| `rabbitmq-env.conf` | **ç¯å¢ƒå˜é‡é…ç½®** | `è·¯å¾„å’Œç¯å¢ƒè®¾ç½®` | â­â­**åŸºç¡€é…ç½®** |

**é…ç½®æ–‡ä»¶ä½ç½®**ï¼š
```
Linuxç³»ç»Ÿï¼š
ğŸ“ /etc/rabbitmq/rabbitmq.conf
ğŸ“ /etc/rabbitmq/rabbitmq-env.conf

Windowsç³»ç»Ÿï¼š
ğŸ“ %APPDATA%\RabbitMQ\rabbitmq.conf
ğŸ“ C:\Users\{ç”¨æˆ·å}\AppData\Roaming\RabbitMQ\

Dockerå®¹å™¨ï¼š
ğŸ“ /etc/rabbitmq/rabbitmq.conf
```

### 1.3 rabbitmq.confæ ¸å¿ƒé…ç½®é¡¹


**åŸºç¡€é…ç½®ç¤ºä¾‹**ï¼š
```conf
# ç›‘å¬ç«¯å£é…ç½®
listeners.tcp.default = 5672

# ç®¡ç†ç•Œé¢ç«¯å£
management.tcp.port = 15672

# å†…å­˜ä½¿ç”¨é™åˆ¶ï¼ˆ40%çš„ç³»ç»Ÿå†…å­˜ï¼‰
vm_memory_high_watermark.relative = 0.4

# ç£ç›˜ç©ºé—´é¢„è­¦é˜ˆå€¼
disk_free_limit.absolute = 2GB

# æ—¥å¿—çº§åˆ«è®¾ç½®
log.console.level = info
```

> âš ï¸ **æ³¨æ„**ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶åéœ€è¦é‡å¯RabbitMQæœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ

### 1.4 å¸¸ç”¨é…ç½®é¡¹è¯¦è§£


**ç½‘ç»œé…ç½®**ï¼š
```conf
# TCPç›‘å¬é…ç½®
listeners.tcp.default = 5672
listeners.tcp.1 = 127.0.0.1:5673

# SSLé…ç½®ï¼ˆHTTPSè®¿é—®ï¼‰
listeners.ssl.default = 5671
ssl_options.cacertfile = /path/to/ca_certificate.pem
ssl_options.certfile = /path/to/server_certificate.pem
ssl_options.keyfile = /path/to/server_key.pem
```

**å†…å­˜å’Œç£ç›˜é…ç½®**ï¼š
```conf
# å†…å­˜ä½¿ç”¨é…ç½®
vm_memory_high_watermark.relative = 0.4  # ä½¿ç”¨40%ç³»ç»Ÿå†…å­˜
vm_memory_high_watermark.absolute = 1GB  # æˆ–å›ºå®š1GB

# ç£ç›˜é…ç½®
disk_free_limit.relative = 1.0  # ç£ç›˜å‰©ä½™ç©ºé—´ä¸ºæ€»å†…å­˜çš„1å€
disk_free_limit.absolute = 2GB  # æˆ–å›ºå®š2GB
```

**é›†ç¾¤é…ç½®**ï¼š
```conf
# é›†ç¾¤èŠ‚ç‚¹å‘ç°
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
cluster_formation.classic_config.nodes.1 = rabbit@node1
cluster_formation.classic_config.nodes.2 = rabbit@node2

# é›†ç¾¤åˆ†åŒºå¤„ç†ç­–ç•¥
cluster_partition_handling = autoheal
```

---

## 2. ğŸŒ ç¯å¢ƒå˜é‡è®¾ç½®ä¸ç®¡ç†


### 2.1 ç¯å¢ƒå˜é‡åŸºç¡€æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡ï¼Ÿ**
> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šç¯å¢ƒå˜é‡å°±åƒæ˜¯ç»™RabbitMQè®¾ç½®çš„"å·¥ä½œç¯å¢ƒå‚æ•°"ï¼Œæ¯”å¦‚å‘Šè¯‰å®ƒæ•°æ®å­˜å‚¨åœ¨å“ªé‡Œã€ä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶ç­‰

**ä¸ºä»€ä¹ˆéœ€è¦ç¯å¢ƒå˜é‡ï¼Ÿ**
- ğŸ¯ **çµæ´»éƒ¨ç½²**ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
- ğŸ”§ **è·¯å¾„ç®¡ç†**ï¼šæŒ‡å®šæ•°æ®ã€æ—¥å¿—ã€é…ç½®æ–‡ä»¶ä½ç½®
- ğŸ—ï¸ **é›†ç¾¤æ ‡è¯†**ï¼šè®¾ç½®èŠ‚ç‚¹åç§°å’ŒCookie
- ğŸ”’ **å®‰å…¨éš”ç¦»**ï¼šä¸åŒåº”ç”¨ä½¿ç”¨ä¸åŒé…ç½®

### 2.2 æ ¸å¿ƒç¯å¢ƒå˜é‡è¯¦è§£


**åŸºç¡€è·¯å¾„å˜é‡**ï¼š
```bash
# æ•°æ®ç›®å½•ï¼ˆå­˜æ”¾é˜Ÿåˆ—ã€äº¤æ¢å™¨ç­‰æ•°æ®ï¼‰
RABBITMQ_MNESIA_BASE=/var/lib/rabbitmq/mnesia

# æ—¥å¿—ç›®å½•
RABBITMQ_LOG_BASE=/var/log/rabbitmq

# é…ç½®æ–‡ä»¶ç›®å½•
RABBITMQ_CONFIG_FILE=/etc/rabbitmq/rabbitmq.conf

# æ’ä»¶ç›®å½•
RABBITMQ_PLUGINS_DIR=/usr/lib/rabbitmq/plugins
```

**èŠ‚ç‚¹å’Œé›†ç¾¤å˜é‡**ï¼š
```bash
# èŠ‚ç‚¹åç§°ï¼ˆé›†ç¾¤ä¸­å¿…é¡»å”¯ä¸€ï¼‰
RABBITMQ_NODENAME=rabbit@hostname

# é›†ç¾¤è®¤è¯Cookieï¼ˆåŒä¸€é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹å¿…é¡»ç›¸åŒï¼‰
RABBITMQ_ERLANG_COOKIE=your-secret-cookie

# èŠ‚ç‚¹ç±»å‹ï¼ˆdisk/ramï¼‰
RABBITMQ_NODE_TYPE=disk
```

### 2.3 ç¯å¢ƒå˜é‡è®¾ç½®æ–¹æ³•


**Linuxç³»ç»Ÿè®¾ç½®**ï¼š

**â‘  ä¸´æ—¶è®¾ç½®ï¼ˆé‡å¯å¤±æ•ˆï¼‰**ï¼š
```bash
export RABBITMQ_NODENAME=rabbit@myserver
export RABBITMQ_LOG_BASE=/custom/log/path
rabbitmq-server
```

**â‘¡ æ°¸ä¹…è®¾ç½®**ï¼š
```bash
# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
sudo nano /etc/rabbitmq/rabbitmq-env.conf

# æ·»åŠ é…ç½®
RABBITMQ_NODENAME=rabbit@myserver
RABBITMQ_LOG_BASE=/custom/log/path
RABBITMQ_MNESIA_BASE=/custom/data/path
```

**Windowsç³»ç»Ÿè®¾ç½®**ï¼š
```cmd
# ä¸´æ—¶è®¾ç½®
set RABBITMQ_NODENAME=rabbit@myserver
set RABBITMQ_LOG_BASE=C:\CustomLog

# æ°¸ä¹…è®¾ç½®ï¼ˆé€šè¿‡ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼‰
# æ§åˆ¶é¢æ¿ â†’ ç³»ç»Ÿ â†’ é«˜çº§ç³»ç»Ÿè®¾ç½® â†’ ç¯å¢ƒå˜é‡
```

**Dockerç¯å¢ƒè®¾ç½®**ï¼š
```yaml
# docker-compose.yml
version: '3.8'
services:
  rabbitmq:
    image: rabbitmq:3-management
    environment:
      - RABBITMQ_NODENAME=rabbit@docker-container
      - RABBITMQ_DEFAULT_USER=admin
      - RABBITMQ_DEFAULT_PASS=password
    volumes:
      - ./data:/var/lib/rabbitmq
```

### 2.4 ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§


**é…ç½®ä¼˜å…ˆçº§é¡ºåº**ï¼š
```
1. å‘½ä»¤è¡Œå‚æ•°      â† æœ€é«˜ä¼˜å…ˆçº§
2. ç¯å¢ƒå˜é‡        â† ä¸­ç­‰ä¼˜å…ˆçº§  
3. é…ç½®æ–‡ä»¶        â† è¾ƒä½ä¼˜å…ˆçº§
4. ç³»ç»Ÿé»˜è®¤å€¼      â† æœ€ä½ä¼˜å…ˆçº§
```

> ğŸ“ **å®é™…åº”ç”¨**ï¼šå¼€å‘ç¯å¢ƒç”¨ç¯å¢ƒå˜é‡ï¼Œç”Ÿäº§ç¯å¢ƒç”¨é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·æ—¢çµæ´»åˆç¨³å®š

---

## 3. ğŸ“‹ æ—¥å¿—é…ç½®ä¸ç®¡ç†


### 3.1 æ—¥å¿—ç³»ç»ŸåŸºç¡€ç†è§£


**RabbitMQæ—¥å¿—çš„ä½œç”¨**ï¼š
> ğŸ’¡ **ç®€å•ç†è§£**ï¼šæ—¥å¿—å°±åƒæ˜¯RabbitMQçš„"æ—¥è®°æœ¬"ï¼Œè®°å½•äº†å®ƒåšäº†ä»€ä¹ˆã€é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜

**æ—¥å¿—çš„é‡è¦æ€§**ï¼š
- ğŸ” **é—®é¢˜è¯Šæ–­**ï¼šå‡ºé”™æ—¶æŸ¥çœ‹å…·ä½“åŸå› 
- ğŸ“Š **æ€§èƒ½ç›‘æ§**ï¼šäº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- ğŸ”’ **å®‰å…¨å®¡è®¡**ï¼šè¿½è¸ªç”¨æˆ·æ“ä½œè®°å½•
- ğŸ“ˆ **è¶‹åŠ¿åˆ†æ**ï¼šåˆ†æç³»ç»Ÿä½¿ç”¨æ¨¡å¼

### 3.2 æ—¥å¿—ç±»å‹ä¸çº§åˆ«


**æ—¥å¿—ç±»å‹åˆ†ç±»**ï¼š

| æ—¥å¿—ç±»å‹ | **æ–‡ä»¶å** | **å†…å®¹è¯´æ˜** | **æŸ¥çœ‹æ—¶æœº** |
|---------|-----------|------------|-------------|
| **ä¸»æ—¥å¿—** | `rabbit@hostname.log` | `RabbitMQæ ¸å¿ƒè¿è¡Œæ—¥å¿—` | `æ—¥å¸¸ç›‘æ§` |
| **å‡çº§æ—¥å¿—** | `rabbit@hostname_upgrade.log` | `ç‰ˆæœ¬å‡çº§ç›¸å…³æ—¥å¿—` | `å‡çº§åæ£€æŸ¥` |
| **å¯åŠ¨æ—¥å¿—** | `startup_log` | `æœåŠ¡å¯åŠ¨è¿‡ç¨‹æ—¥å¿—` | `å¯åŠ¨å¤±è´¥æ—¶` |
| **å´©æºƒæ—¥å¿—** | `erl_crash.dump` | `ç³»ç»Ÿå´©æºƒè¯¦ç»†ä¿¡æ¯` | `ä¸¥é‡æ•…éšœæ—¶` |

**æ—¥å¿—çº§åˆ«è¯´æ˜**ï¼š
```
ğŸ’¥ error   â† é”™è¯¯ä¿¡æ¯ï¼ˆå¿…é¡»å…³æ³¨ï¼‰
âš ï¸  warning â† è­¦å‘Šä¿¡æ¯ï¼ˆå»ºè®®å…³æ³¨ï¼‰  
â„¹ï¸  info    â† ä¸€èˆ¬ä¿¡æ¯ï¼ˆæ­£å¸¸è¿è¡Œï¼‰
ğŸ” debug   â† è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘é˜¶æ®µï¼‰
```

### 3.3 æ—¥å¿—é…ç½®æ–¹æ³•


**åŸºç¡€æ—¥å¿—é…ç½®**ï¼š
```conf
# æ—¥å¿—çº§åˆ«è®¾ç½®
log.console.level = info
log.file.level = info

# æ—¥å¿—æ–‡ä»¶é…ç½®
log.file = /var/log/rabbitmq/rabbit.log
log.file.rotation.size = 100MB
log.file.rotation.count = 10

# æ§åˆ¶å°æ—¥å¿—ï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰
log.console = true
log.console.formatter = plaintext
```

**é«˜çº§æ—¥å¿—é…ç½®**ï¼š
```conf
# åˆ†ç±»æ—¥å¿—é…ç½®
log.connection.level = info    # è¿æ¥ç›¸å…³æ—¥å¿—
log.channel.level = info       # é€šé“ç›¸å…³æ—¥å¿—
log.queue.level = info         # é˜Ÿåˆ—ç›¸å…³æ—¥å¿—
log.mirroring.level = info     # é•œåƒé˜Ÿåˆ—æ—¥å¿—

# æ—¥å¿—æ ¼å¼é…ç½®
log.file.formatter = json      # JSONæ ¼å¼ï¼ˆä¾¿äºæ—¥å¿—åˆ†æï¼‰
log.file.formatter.time_format = epoch  # æ—¶é—´æˆ³æ ¼å¼
```

### 3.4 æ—¥å¿—è½®è½¬ä¸ç®¡ç†


**è‡ªåŠ¨æ—¥å¿—è½®è½¬**ï¼š
```conf
# æŒ‰æ–‡ä»¶å¤§å°è½®è½¬
log.file.rotation.size = 100MB     # å•ä¸ªæ–‡ä»¶æœ€å¤§100MB
log.file.rotation.count = 5        # ä¿ç•™5ä¸ªå†å²æ–‡ä»¶

# æŒ‰æ—¶é—´è½®è½¬
log.file.rotation.date = $D0       # æ¯å¤©è½®è½¬
log.file.rotation.date = $W0       # æ¯å‘¨è½®è½¬
```

**æ‰‹åŠ¨æ—¥å¿—ç®¡ç†**ï¼š
```bash
# æŸ¥çœ‹å½“å‰æ—¥å¿—
tail -f /var/log/rabbitmq/rabbit@hostname.log

# æœç´¢ç‰¹å®šå†…å®¹
grep "ERROR" /var/log/rabbitmq/rabbit@hostname.log

# æ¸…ç†æ—§æ—¥å¿—ï¼ˆè°¨æ…æ“ä½œï¼‰
find /var/log/rabbitmq -name "*.log.*" -mtime +30 -delete
```

### 3.5 å¸¸è§æ—¥å¿—åˆ†æ


**æ­£å¸¸å¯åŠ¨æ—¥å¿—ç¤ºä¾‹**ï¼š
```
2025-09-20 10:00:01 [info] <0.8.0> Server startup complete; 
2025-09-20 10:00:01 [info] <0.8.0> Accepting connections
```

**è¿æ¥é—®é¢˜æ—¥å¿—**ï¼š
```
2025-09-20 10:05:15 [warning] <0.123.0> Connection failed: authentication_failure
2025-09-20 10:05:15 [error] <0.124.0> Connection refused: user 'guest' can only connect via localhost
```

**å†…å­˜å‘Šè­¦æ—¥å¿—**ï¼š
```
2025-09-20 10:10:30 [warning] <0.8.0> Memory alarm activated
2025-09-20 10:10:30 [info] <0.8.0> Publishers blocked due to memory alarm
```

---

## 4. ğŸ”Œ æ’ä»¶ç®¡ç†ç³»ç»Ÿ


### 4.1 æ’ä»¶ç³»ç»ŸåŸºç¡€æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯RabbitMQæ’ä»¶ï¼Ÿ**
> ğŸ’¡ **å½¢è±¡æ¯”å–»**ï¼šæ’ä»¶å°±åƒæ‰‹æœºAPPï¼ŒRabbitMQæœ¬èº«æ˜¯åŸºç¡€ç³»ç»Ÿï¼Œæ’ä»¶æä¾›é¢å¤–åŠŸèƒ½

**æ’ä»¶çš„ä½œç”¨**ï¼š
- ğŸŒ **ç®¡ç†ç•Œé¢**ï¼šWebç®¡ç†æ§åˆ¶å°
- ğŸ“Š **ç›‘æ§åŠŸèƒ½**ï¼šæ€§èƒ½æŒ‡æ ‡æ”¶é›†
- ğŸ”„ **åè®®æ”¯æŒ**ï¼šMQTTã€STOMPç­‰åè®®
- ğŸ”§ **æ‰©å±•åŠŸèƒ½**ï¼šæ¶ˆæ¯è¿½è¸ªã€å»¶è¿Ÿé˜Ÿåˆ—ç­‰

### 4.2 å¸¸ç”¨æ’ä»¶ä»‹ç»


**æ ¸å¿ƒæ’ä»¶åˆ—è¡¨**ï¼š

| æ’ä»¶åç§° | **åŠŸèƒ½è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** | **æ¨èæŒ‡æ•°** |
|---------|------------|-------------|-------------|
| `rabbitmq_management` | **Webç®¡ç†ç•Œé¢** | `å¯è§†åŒ–ç®¡ç†` | â­â­â­â­â­ |
| `rabbitmq_management_agent` | **ç®¡ç†ç•Œé¢æ•°æ®æ”¶é›†** | `é…åˆç®¡ç†ç•Œé¢` | â­â­â­â­â­ |
| `rabbitmq_mqtt` | **MQTTåè®®æ”¯æŒ** | `ç‰©è”ç½‘åº”ç”¨` | â­â­â­â­ |
| `rabbitmq_stomp` | **STOMPåè®®æ”¯æŒ** | `Webåº”ç”¨é›†æˆ` | â­â­â­ |
| `rabbitmq_tracing` | **æ¶ˆæ¯è¿½è¸ª** | `è°ƒè¯•åˆ†æ` | â­â­â­ |
| `rabbitmq_delayed_message_exchange` | **å»¶è¿Ÿæ¶ˆæ¯** | `å®šæ—¶ä»»åŠ¡` | â­â­â­â­ |

### 4.3 æ’ä»¶ç®¡ç†å‘½ä»¤


**æŸ¥çœ‹æ’ä»¶çŠ¶æ€**ï¼š
```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ’ä»¶
rabbitmq-plugins list

# æŸ¥çœ‹å·²å¯ç”¨æ’ä»¶  
rabbitmq-plugins list --enabled

# æŸ¥çœ‹ç‰¹å®šæ’ä»¶ä¿¡æ¯
rabbitmq-plugins list rabbitmq_management
```

**å¯ç”¨å’Œç¦ç”¨æ’ä»¶**ï¼š
```bash
# å¯ç”¨æ’ä»¶ï¼ˆæ¨èæ–¹å¼ï¼‰
rabbitmq-plugins enable rabbitmq_management

# å¯ç”¨å¤šä¸ªæ’ä»¶
rabbitmq-plugins enable rabbitmq_management rabbitmq_mqtt

# ç¦ç”¨æ’ä»¶
rabbitmq-plugins disable rabbitmq_management

# å¯ç”¨æ’ä»¶ä½†ä¸å¯åŠ¨ä¾èµ–
rabbitmq-plugins enable --offline rabbitmq_management
```

### 4.4 ç®¡ç†ç•Œé¢æ’ä»¶è¯¦è§£


**å¯ç”¨ç®¡ç†ç•Œé¢**ï¼š
```bash
# å¯ç”¨ç®¡ç†ç•Œé¢æ’ä»¶
rabbitmq-plugins enable rabbitmq_management

# éªŒè¯å¯ç”¨çŠ¶æ€
rabbitmq-plugins list --enabled | grep management
```

**è®¿é—®ç®¡ç†ç•Œé¢**ï¼š
```
è®¿é—®åœ°å€ï¼šhttp://localhost:15672
é»˜è®¤ç”¨æˆ·ï¼šguest
é»˜è®¤å¯†ç ï¼šguest

âš ï¸ æ³¨æ„ï¼šguestç”¨æˆ·é»˜è®¤åªèƒ½æœ¬åœ°è®¿é—®
```

**ç®¡ç†ç•Œé¢åŠŸèƒ½æ¦‚è§ˆ**ï¼š
```
ğŸ“Š Overview    â† ç³»ç»Ÿæ¦‚å†µå’Œç»Ÿè®¡ä¿¡æ¯
ğŸ”— Connections â† å®¢æˆ·ç«¯è¿æ¥ç®¡ç†  
ğŸ“¡ Channels    â† é€šé“çŠ¶æ€ç›‘æ§
ğŸ”„ Exchanges   â† äº¤æ¢å™¨ç®¡ç†
ğŸ“¨ Queues      â† é˜Ÿåˆ—ç®¡ç†
ğŸ‘¥ Admin       â† ç”¨æˆ·å’Œè™šæ‹Ÿä¸»æœºç®¡ç†
```

### 4.5 æ’ä»¶é…ç½®ä¸ä¼˜åŒ–


**æ’ä»¶é…ç½®æ–‡ä»¶**ï¼š
```conf
# ç®¡ç†ç•Œé¢é…ç½®
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0

# MQTTæ’ä»¶é…ç½®
mqtt.default_user = mqtt_user
mqtt.default_pass = mqtt_pass
mqtt.tcp.port = 1883

# STOMPæ’ä»¶é…ç½®  
stomp.default_user = stomp_user
stomp.default_pass = stomp_pass
stomp.tcp.port = 61613
```

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
âœ… ç”Ÿäº§ç¯å¢ƒï¼šåªå¯ç”¨å¿…éœ€æ’ä»¶
âœ… å¼€å‘ç¯å¢ƒï¼šå¯å¯ç”¨è°ƒè¯•æ’ä»¶
âŒ é¿å…ï¼šå¯ç”¨è¿‡å¤šæœªä½¿ç”¨æ’ä»¶
âš ï¸  æ³¨æ„ï¼šæ’ä»¶ä¼šæ¶ˆè€—é¢å¤–å†…å­˜å’ŒCPU
```

---

## 5. ğŸ” å®‰å…¨é…ç½®åŸºç¡€


### 5.1 å®‰å…¨é…ç½®é‡è¦æ€§


**ä¸ºä»€ä¹ˆéœ€è¦å®‰å…¨é…ç½®ï¼Ÿ**
> ğŸ’¡ **å®é™…æ¡ˆä¾‹**ï¼šæ²¡æœ‰å®‰å…¨é…ç½®çš„RabbitMQå°±åƒæ²¡é”é—¨çš„æˆ¿å­ï¼Œä»»ä½•äººéƒ½èƒ½è¿›æ¥æ“ä½œæ•°æ®

**å®‰å…¨å¨èƒç±»å‹**ï¼š
- ğŸš« **æœªæˆæƒè®¿é—®**ï¼šæ¶æ„ç”¨æˆ·è·å–ç³»ç»Ÿæƒé™
- ğŸ“Š **æ•°æ®æ³„éœ²**ï¼šæ•æ„Ÿæ¶ˆæ¯è¢«æˆªè·
- ğŸ’¥ **ç³»ç»Ÿç ´å**ï¼šæ¶æ„åˆ é™¤é˜Ÿåˆ—å’Œæ•°æ®
- ğŸ” **ä¿¡æ¯æ”¶é›†**ï¼šè·å–ç³»ç»Ÿé…ç½®ä¿¡æ¯

### 5.2 ç”¨æˆ·å’Œæƒé™ç®¡ç†


**ç”¨æˆ·ç®¡ç†åŸºç¡€**ï¼š
```bash
# åˆ›å»ºæ–°ç”¨æˆ·
rabbitmqctl add_user myuser mypassword

# è®¾ç½®ç”¨æˆ·æ ‡ç­¾ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰
rabbitmqctl set_user_tags myuser administrator

# è®¾ç½®ç”¨æˆ·æƒé™ï¼ˆè™šæ‹Ÿä¸»æœºçº§åˆ«ï¼‰
rabbitmqctl set_permissions -p / myuser ".*" ".*" ".*"

# åˆ é™¤ç”¨æˆ·
rabbitmqctl delete_user myuser
```

**æƒé™è¯´æ˜**ï¼š
```
æƒé™æ ¼å¼ï¼šconfigure write read
configure: é…ç½®æƒé™ï¼ˆåˆ›å»º/åˆ é™¤é˜Ÿåˆ—ã€äº¤æ¢å™¨ï¼‰
write:     å†™å…¥æƒé™ï¼ˆå‘å¸ƒæ¶ˆæ¯ï¼‰  
read:      è¯»å–æƒé™ï¼ˆæ¶ˆè´¹æ¶ˆæ¯ï¼‰

ç¤ºä¾‹ï¼š
".*" ".*" ".*"     â† å®Œå…¨æƒé™
"^queue_.*" ".*" ".*" â† åªèƒ½é…ç½®queue_å¼€å¤´çš„èµ„æº
"" "" "queue_.*"     â† åªèƒ½è¯»å–queue_å¼€å¤´çš„é˜Ÿåˆ—
```

**è™šæ‹Ÿä¸»æœºç®¡ç†**ï¼š
```bash
# åˆ›å»ºè™šæ‹Ÿä¸»æœº
rabbitmqctl add_vhost /production

# åˆ é™¤è™šæ‹Ÿä¸»æœº
rabbitmqctl delete_vhost /production

# åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿä¸»æœº
rabbitmqctl list_vhosts
```

### 5.3 ç½‘ç»œå®‰å…¨é…ç½®


**é™åˆ¶è®¿é—®æ¥æº**ï¼š
```conf
# åªå…è®¸æœ¬åœ°è¿æ¥
listeners.tcp.1 = 127.0.0.1:5672

# å…è®¸ç‰¹å®šIPæ®µ
listeners.tcp.1 = 192.168.1.0/24:5672

# ç®¡ç†ç•Œé¢å®‰å…¨
management.tcp.ip = 127.0.0.1
```

**SSL/TLSåŠ å¯†é…ç½®**ï¼š
```conf
# å¯ç”¨SSLç›‘å¬
listeners.ssl.default = 5671

# SSLè¯ä¹¦é…ç½®
ssl_options.cacertfile = /path/to/ca_certificate.pem
ssl_options.certfile = /path/to/server_certificate.pem  
ssl_options.keyfile = /path/to/server_key.pem

# SSLéªŒè¯è®¾ç½®
ssl_options.verify = verify_peer
ssl_options.fail_if_no_peer_cert = true
```

### 5.4 å¯†ç ç­–ç•¥é…ç½®


**å¯†ç å¤æ‚åº¦è¦æ±‚**ï¼š
```conf
# å¯†ç æœ€å°é•¿åº¦
password_hashing_module = rabbit_password_hashing_sha512

# å¼ºåˆ¶å¯†ç å¤æ‚åº¦ï¼ˆéœ€è¦æ’ä»¶æ”¯æŒï¼‰
auth_backends.1 = rabbit_auth_backend_internal
auth_backends.2 = rabbit_auth_backend_ldap
```

**ç”¨æˆ·ä¼šè¯ç®¡ç†**ï¼š
```conf
# ä¼šè¯è¶…æ—¶è®¾ç½®
management.session_timeout_in_minutes = 60

# é™åˆ¶åŒæ—¶ç™»å½•ä¼šè¯æ•°
management.maximum_frame_size = 131072
```

### 5.5 å®¡è®¡å’Œç›‘æ§


**è®¿é—®æ—¥å¿—é…ç½®**ï¼š
```conf
# å¯ç”¨è®¿é—®æ—¥å¿—
log.connection.level = info
log.channel.level = info

# è®°å½•ç”¨æˆ·æ“ä½œ
log.default.level = info
```

**å®‰å…¨ç›‘æ§æŒ‡æ ‡**ï¼š
```
ğŸ” ç›‘æ§é¡¹ç›®ï¼š
- å¤±è´¥ç™»å½•æ¬¡æ•°
- å¼‚å¸¸IPè®¿é—®
- æƒé™è¿è§„æ“ä½œ
- å¤§é‡æ•°æ®ä¼ è¾“

ğŸ“Š å‘Šè­¦é˜ˆå€¼ï¼š
- 1åˆ†é’Ÿå†…5æ¬¡ç™»å½•å¤±è´¥ â†’ å‘Šè­¦
- éç™½åå•IPè®¿é—® â†’ å‘Šè­¦  
- éå·¥ä½œæ—¶é—´å¤§é‡æ“ä½œ â†’ å‘Šè­¦
```

---

## 6. âš¡ é…ç½®ä¼˜åŒ–ä¸æ•…éšœæ’æŸ¥


### 6.1 æ€§èƒ½ä¼˜åŒ–é…ç½®


**å†…å­˜ä¼˜åŒ–ç­–ç•¥**ï¼š
```conf
# å†…å­˜ä½¿ç”¨ä¼˜åŒ–
vm_memory_high_watermark.relative = 0.4  # ä½¿ç”¨40%å†…å­˜
vm_memory_calculation_strategy = rss      # ç²¾ç¡®å†…å­˜è®¡ç®—

# é˜Ÿåˆ—å†…å­˜ä¼˜åŒ–
queue_master_locator = min-masters        # å‡åŒ€åˆ†å¸ƒé˜Ÿåˆ—
```

**ç½‘ç»œæ€§èƒ½ä¼˜åŒ–**ï¼š
```conf
# TCPç¼“å†²åŒºä¼˜åŒ–
tcp_listen_options.buffer = 196608
tcp_listen_options.sndbuf = 196608  
tcp_listen_options.recbuf = 196608

# è¿æ¥ä¼˜åŒ–
heartbeat = 600                          # å¿ƒè·³é—´éš”10åˆ†é’Ÿ
frame_max = 131072                       # æœ€å¤§å¸§å¤§å°
```

**ç£ç›˜I/Oä¼˜åŒ–**ï¼š
```conf
# æ¶ˆæ¯æŒä¹…åŒ–ä¼˜åŒ–
msg_store_file_size_limit = 16777216     # 16MBæ–‡ä»¶å¤§å°
msg_store_credit_disc_bound = 4000       # ç£ç›˜ä¿¡ç”¨é™åˆ¶
```

### 6.2 å¸¸è§æ•…éšœæ’æŸ¥


**å¯åŠ¨å¤±è´¥æ’æŸ¥**ï¼š

**â‘  ç«¯å£å ç”¨é—®é¢˜**ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep 5672
lsof -i :5672

# è§£å†³æ–¹æ¡ˆ
sudo kill -9 PIDå·
# æˆ–ä¿®æ”¹é…ç½®ä½¿ç”¨å…¶ä»–ç«¯å£
```

**â‘¡ æƒé™é—®é¢˜**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /var/lib/rabbitmq/
ls -la /var/log/rabbitmq/

# ä¿®å¤æƒé™
sudo chown -R rabbitmq:rabbitmq /var/lib/rabbitmq/
sudo chmod 755 /var/lib/rabbitmq/
```

**â‘¢ ç£ç›˜ç©ºé—´ä¸è¶³**ï¼š
```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
du -sh /var/lib/rabbitmq/

# æ¸…ç†æ–¹æ¡ˆ
rabbitmqctl eval 'rabbit_amqqueue:purge(Queue).'
```

**å†…å­˜å‘Šè­¦å¤„ç†**ï¼š
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
rabbitmqctl status | grep memory

# ä¸´æ—¶è§£å†³
rabbitmqctl set_vm_memory_high_watermark 0.6  # æé«˜åˆ°60%

# æ°¸ä¹…è§£å†³ï¼ˆä¿®æ”¹é…ç½®æ–‡ä»¶ï¼‰
vm_memory_high_watermark.relative = 0.6
```

### 6.3 é…ç½®éªŒè¯ä¸æµ‹è¯•


**é…ç½®æ–‡ä»¶è¯­æ³•æ£€æŸ¥**ï¼š
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
rabbitmq-diagnostics check_config_file_syntax

# éªŒè¯è¿è¡Œæ—¶é…ç½®
rabbitmq-diagnostics environment
```

**è¿æ¥æµ‹è¯•**ï¼š
```bash
# æµ‹è¯•AMQPè¿æ¥
telnet localhost 5672

# æµ‹è¯•ç®¡ç†ç•Œé¢
curl -u guest:guest http://localhost:15672/api/overview
```

**æ€§èƒ½æµ‹è¯•**ï¼š
```bash
# ä½¿ç”¨rabbitmq-perf-testå·¥å…·
rabbitmq-perf-test -h amqp://localhost -u myuser -p mypass

# ç®€å•å‘é€æ¥æ”¶æµ‹è¯•  
rabbitmq-perf-test -x 1 -y 1 -u throughput-test-1 -a
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„é…ç½®è¦ç‚¹


```
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼šrabbitmq.confæ˜¯ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹åéœ€é‡å¯
ğŸ”¸ ç¯å¢ƒå˜é‡ï¼šç”¨äºçµæ´»è®¾ç½®è·¯å¾„å’Œè¿è¡Œå‚æ•°
ğŸ”¸ æ—¥å¿—ç®¡ç†ï¼šåˆç†è®¾ç½®æ—¥å¿—çº§åˆ«å’Œè½®è½¬ç­–ç•¥  
ğŸ”¸ æ’ä»¶ç³»ç»Ÿï¼šæŒ‰éœ€å¯ç”¨æ’ä»¶ï¼Œé¿å…èµ„æºæµªè´¹
ğŸ”¸ å®‰å…¨é…ç½®ï¼šç”¨æˆ·æƒé™ã€ç½‘ç»œé™åˆ¶ã€SSLåŠ å¯†ç¼ºä¸€ä¸å¯
```

### 7.2 é…ç½®æœ€ä½³å®è·µ


**ğŸ”¹ å¼€å‘ç¯å¢ƒé…ç½®**ï¼š
```
âœ… å¯ç”¨ç®¡ç†ç•Œé¢æ’ä»¶
âœ… è®¾ç½®è¯¦ç»†æ—¥å¿—çº§åˆ«
âœ… ä½¿ç”¨é»˜è®¤å®‰å…¨è®¾ç½®
âœ… é…ç½®æœ¬åœ°è®¿é—®æƒé™
```

**ğŸ”¹ ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼š
```
âœ… ä¸¥æ ¼å®‰å…¨é…ç½®å’Œç”¨æˆ·æƒé™
âœ… åˆç†çš„å†…å­˜å’Œç£ç›˜é™åˆ¶
âœ… SSLåŠ å¯†å’Œç½‘ç»œé™åˆ¶
âœ… å®Œå–„çš„æ—¥å¿—å’Œç›‘æ§
âœ… æœ€å°åŒ–æ’ä»¶å¯ç”¨
```

**ğŸ”¹ é…ç½®å˜æ›´æµç¨‹**ï¼š
```
1ï¸âƒ£ å¤‡ä»½å½“å‰é…ç½®æ–‡ä»¶
2ï¸âƒ£ åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯é…ç½®
3ï¸âƒ£ è¯­æ³•æ£€æŸ¥å’Œé…ç½®éªŒè¯
4ï¸âƒ£ ç”Ÿäº§ç¯å¢ƒåº”ç”¨é…ç½®
5ï¸âƒ£ é‡å¯æœåŠ¡å¹¶éªŒè¯åŠŸèƒ½
6ï¸âƒ£ ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
```

### 7.3 æ•…éšœæ’æŸ¥æ€è·¯


**é—®é¢˜è¯Šæ–­é¡ºåº**ï¼š
```
ğŸ” ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
ğŸ” ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
ğŸ” ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ç½‘ç»œè¿æ¥
ğŸ” ç¬¬å››æ­¥ï¼šæ£€æŸ¥ç³»ç»Ÿèµ„æº
ğŸ” ç¬¬äº”æ­¥ï¼šæµ‹è¯•åŠŸèƒ½ç»„ä»¶
```

**å¸¸è§é—®é¢˜å¿«é€Ÿæ£€æŸ¥**ï¼š
```
âŒ æ— æ³•å¯åŠ¨ â†’ æ£€æŸ¥ç«¯å£å ç”¨ã€æ–‡ä»¶æƒé™ã€ç£ç›˜ç©ºé—´
âŒ è¿æ¥å¤±è´¥ â†’ æ£€æŸ¥ç”¨æˆ·æƒé™ã€ç½‘ç»œé…ç½®ã€é˜²ç«å¢™
âŒ æ€§èƒ½é—®é¢˜ â†’ æ£€æŸ¥å†…å­˜é…ç½®ã€ç£ç›˜I/Oã€ç½‘ç»œå¸¦å®½
âŒ åŠŸèƒ½å¼‚å¸¸ â†’ æ£€æŸ¥æ’ä»¶çŠ¶æ€ã€é…ç½®å‚æ•°ã€æ—¥å¿—é”™è¯¯
```

### 7.4 å®é™…åº”ç”¨å»ºè®®


**é…ç½®ç®¡ç†ç­–ç•¥**ï¼š
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šé…ç½®æ–‡ä»¶çº³å…¥Gitç®¡ç†
- **ç¯å¢ƒåŒºåˆ†**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ä½¿ç”¨ä¸åŒé…ç½®
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šä½¿ç”¨é…ç½®ç®¡ç†å·¥å…·ï¼ˆAnsibleã€Puppetï¼‰
- **ç›‘æ§å‘Šè­¦**ï¼šé…ç½®å…³é”®æŒ‡æ ‡ç›‘æ§å’Œå‘Šè­¦

**è¿ç»´æœ€ä½³å®è·µ**ï¼š
- **å®šæœŸå¤‡ä»½**ï¼šé…ç½®æ–‡ä»¶å’Œæ•°æ®ç›®å½•
- **æ€§èƒ½è°ƒä¼˜**ï¼šæ ¹æ®ä¸šåŠ¡è´Ÿè½½è°ƒæ•´å‚æ•°
- **å®‰å…¨å®¡è®¡**ï¼šå®šæœŸæ£€æŸ¥ç”¨æˆ·æƒé™å’Œè®¿é—®æ—¥å¿—
- **æ–‡æ¡£ç»´æŠ¤**ï¼šè®°å½•é…ç½®å˜æ›´å’Œæ•…éšœå¤„ç†è¿‡ç¨‹

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- é…ç½®æ–‡ä»¶æ˜¯RabbitMQçš„æ§åˆ¶ä¸­å¿ƒï¼Œåˆç†é…ç½®æ˜¯ç¨³å®šè¿è¡Œçš„åŸºç¡€
- å®‰å…¨é…ç½®ä¸æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯ç”Ÿäº§ç¯å¢ƒçš„å¿…éœ€å“
- æ—¥å¿—æ˜¯æ•…éšœæ’æŸ¥çš„é‡è¦çº¿ç´¢ï¼Œè¦å–„äºåˆ©ç”¨æ—¥å¿—ä¿¡æ¯
- æ’ä»¶ä¸°å¯Œäº†åŠŸèƒ½ï¼Œä½†ä¹Ÿè¦è€ƒè™‘æ€§èƒ½å’Œå®‰å…¨å½±å“