---
title: 5ã€OOPä»éœ€æ±‚åˆ°ç±»è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [ä»éœ€æ±‚åˆ†æåˆ°ç±»è®¾è®¡çš„å®Œæ•´æµç¨‹](#1-ä»éœ€æ±‚åˆ†æåˆ°ç±»è®¾è®¡çš„å®Œæ•´æµç¨‹)
2. [ç”¨ä¾‹åˆ†æä¸ç±»å›¾è®¾è®¡](#2-ç”¨ä¾‹åˆ†æä¸ç±»å›¾è®¾è®¡)
3. [ä¾èµ–å€’ç½®åŸåˆ™çš„å®é™…åº”ç”¨](#3-ä¾èµ–å€’ç½®åŸåˆ™çš„å®é™…åº”ç”¨)
4. [å¯æµ‹è¯•æ€§è®¾è®¡è€ƒè™‘](#4-å¯æµ‹è¯•æ€§è®¾è®¡è€ƒè™‘)
5. [é‡æ„ç­–ç•¥ä¸æŠ€å·§](#5-é‡æ„ç­–ç•¥ä¸æŠ€å·§)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»éœ€æ±‚åˆ†æåˆ°ç±»è®¾è®¡çš„å®Œæ•´æµç¨‹


### 1.1 ä»€ä¹ˆæ˜¯éœ€æ±‚åˆ°ç±»è®¾è®¡


**é€šä¿—ç†è§£**ï¼šå°±åƒç›–æˆ¿å­ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å®¢æˆ·è¦ä»€ä¹ˆæ ·çš„æˆ¿å­ï¼ˆéœ€æ±‚åˆ†æï¼‰ï¼Œç„¶åç”»å‡ºè®¾è®¡å›¾çº¸ï¼ˆç±»å›¾ï¼‰ï¼Œæœ€åæŒ‰å›¾æ–½å·¥ï¼ˆå†™ä»£ç ï¼‰ã€‚

```
ç°å®ç”Ÿæ´»ä¸­ç›–æˆ¿å­                é¢å‘å¯¹è±¡è®¾è®¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚å®¢æˆ·è¯´ï¼šæˆ‘è¦ä¸ªæˆ¿å­  â”‚  â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ç”¨æˆ·è¯´ï¼šæˆ‘è¦ä¸ªç³»ç»Ÿ  â”‚
â”‚ 3å®¤2å…ï¼Œå—åŒ—é€šé€  â”‚           â”‚ èƒ½ç®¡ç†å›¾ä¹¦ï¼Œå€Ÿè¿˜ä¹¦â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚å»ºç­‘å¸ˆç”»è®¾è®¡å›¾çº¸   â”‚  â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ç¨‹åºå‘˜è®¾è®¡ç±»å›¾    â”‚
â”‚ æˆ¿é—´å¸ƒå±€ï¼Œæ‰¿é‡å¢™  â”‚           â”‚ ç±»çš„å…³ç³»ï¼Œæ–¹æ³•å±æ€§â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚å·¥äººæŒ‰å›¾æ–½å·¥ç›–æˆ¿  â”‚  â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ç¨‹åºå‘˜æŒ‰è®¾è®¡å†™ä»£ç  â”‚
â”‚ ä¸€æ­¥æ­¥å»ºé€ æˆ¿å±‹   â”‚           â”‚ ä¸€ä¸ªä¸ªå®ç°ç±»å’Œæ–¹æ³•â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 è®¾è®¡æµç¨‹çš„äº”ä¸ªå…³é”®æ­¥éª¤


**æ­¥éª¤æ¦‚è§ˆ**ï¼š
1. **éœ€æ±‚åˆ†æ** - ç†è§£ç”¨æˆ·åˆ°åº•è¦ä»€ä¹ˆ
2. **ç”¨ä¾‹æå–** - æ‰¾å‡ºç³»ç»Ÿè¦åšå“ªäº›äº‹
3. **ç±»å›¾è®¾è®¡** - è®¾è®¡å¯¹è±¡å’Œå®ƒä»¬çš„å…³ç³»
4. **ä»£ç å®ç°** - æŠŠè®¾è®¡å˜æˆçœŸæ­£çš„ç¨‹åº
5. **æµ‹è¯•éªŒè¯** - ç¡®ä¿åšå‡ºæ¥çš„ä¸œè¥¿ç¬¦åˆéœ€æ±‚

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šè¿™ä¸ªæµç¨‹ä¸æ˜¯æ­»æ¿çš„ï¼Œå®é™…å¼€å‘ä¸­ç»å¸¸éœ€è¦å›å¤´ä¿®æ”¹å‰é¢çš„è®¾è®¡

### 1.3 å®æˆ˜æ¡ˆä¾‹ï¼šå›¾ä¹¦ç®¡ç†ç³»ç»Ÿ


**åŸå§‹éœ€æ±‚**ï¼ˆç”¨æˆ·çš„è¯ï¼‰ï¼š
> "æˆ‘ä»¬å›¾ä¹¦é¦†éœ€è¦ä¸€ä¸ªç³»ç»Ÿï¼Œèƒ½å¤Ÿç®¡ç†å›¾ä¹¦ä¿¡æ¯ï¼Œå¤„ç†å€Ÿä¹¦è¿˜ä¹¦ï¼ŒæŸ¥çœ‹å€Ÿé˜…è®°å½•ï¼Œè¿˜è¦èƒ½ç®¡ç†è¯»è€…ä¿¡æ¯ã€‚"

**éœ€æ±‚åˆ†æ**ï¼ˆæˆ‘ä»¬è¦ç†è§£çš„ï¼‰ï¼š
```
æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚ï¼š
ğŸ“š å›¾ä¹¦ç®¡ç†ï¼šæ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢å›¾ä¹¦
ğŸ‘¤ è¯»è€…ç®¡ç†ï¼šæ³¨å†Œã€ä¿®æ”¹ã€æŸ¥è¯¢è¯»è€…ä¿¡æ¯  
ğŸ“– å€Ÿé˜…ç®¡ç†ï¼šå€Ÿä¹¦ã€è¿˜ä¹¦ã€ç»­å€Ÿã€æŸ¥çœ‹è®°å½•
ğŸ“Š ç»Ÿè®¡åŠŸèƒ½ï¼šå€Ÿé˜…ç»Ÿè®¡ã€å›¾ä¹¦çŠ¶æ€ç»Ÿè®¡

éåŠŸèƒ½éœ€æ±‚ï¼š
âš¡ æ€§èƒ½ï¼šæŸ¥è¯¢å“åº”æ—¶é—´ < 2ç§’
ğŸ”’ å®‰å…¨ï¼šåªæœ‰ç®¡ç†å‘˜èƒ½åˆ é™¤å›¾ä¹¦
ğŸ›¡ï¸ å¯é ï¼šæ•°æ®ä¸èƒ½ä¸¢å¤±
ğŸ“± æ˜“ç”¨ï¼šç•Œé¢ç®€å•æ˜“æ‡‚
```

---

## 2. ğŸ“‹ ç”¨ä¾‹åˆ†æä¸ç±»å›¾è®¾è®¡


### 2.1 ä»€ä¹ˆæ˜¯ç”¨ä¾‹åˆ†æ


**é€šä¿—è§£é‡Š**ï¼šç”¨ä¾‹å°±æ˜¯"ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿçš„å„ç§åœºæ™¯"ï¼Œå°±åƒå†™å‰§æœ¬ä¸€æ ·ï¼Œæè¿°ç”¨æˆ·å’Œç³»ç»Ÿä¹‹é—´çš„äº’åŠ¨ã€‚

**ç”¨ä¾‹çš„ç»„æˆ**ï¼š
- **å‚ä¸è€…**ï¼šè°åœ¨ä½¿ç”¨ç³»ç»Ÿï¼ˆå›¾ä¹¦ç®¡ç†å‘˜ã€è¯»è€…ï¼‰
- **ç›®æ ‡**ï¼šç”¨æˆ·æƒ³è¾¾æˆä»€ä¹ˆï¼ˆå€Ÿä¸€æœ¬ä¹¦ï¼‰
- **æµç¨‹**ï¼šå…·ä½“æ€ä¹ˆæ“ä½œï¼ˆæŸ¥æ‰¾â†’ç¡®è®¤â†’å€Ÿå‡ºï¼‰

### 2.2 å›¾ä¹¦ç®¡ç†ç³»ç»Ÿç”¨ä¾‹åˆ†æ


**ä¸»è¦å‚ä¸è€…è¯†åˆ«**ï¼š
```
ğŸ‘¨â€ğŸ’¼ å›¾ä¹¦ç®¡ç†å‘˜ï¼ˆLibrarianï¼‰ï¼š
   - ç®¡ç†å›¾ä¹¦ä¿¡æ¯
   - å¤„ç†å€Ÿè¿˜ä¹¦ä¸šåŠ¡
   - ç®¡ç†è¯»è€…è´¦æˆ·
   - æŸ¥çœ‹ç»Ÿè®¡æŠ¥è¡¨

ğŸ‘¤ è¯»è€…ï¼ˆReaderï¼‰ï¼š
   - æŸ¥æ‰¾å›¾ä¹¦
   - å€Ÿé˜…å›¾ä¹¦
   - å½’è¿˜å›¾ä¹¦
   - æŸ¥çœ‹ä¸ªäººå€Ÿé˜…è®°å½•
```

**æ ¸å¿ƒç”¨ä¾‹è¯¦ç»†åˆ†æ**ï¼š

> ğŸ“ **ç”¨ä¾‹1ï¼šå€Ÿé˜…å›¾ä¹¦**
> 
> **å‚ä¸è€…**ï¼šè¯»è€…ã€å›¾ä¹¦ç®¡ç†å‘˜
> **å‰ç½®æ¡ä»¶**ï¼šè¯»è€…å·²æ³¨å†Œï¼Œå›¾ä¹¦å¯å€Ÿ
> **åŸºæœ¬æµç¨‹**ï¼š
> 1. è¯»è€…æä¾›å€Ÿä¹¦å¡
> 2. ç®¡ç†å‘˜æ‰«æå€Ÿä¹¦å¡ï¼ŒéªŒè¯èº«ä»½
> 3. è¯»è€…æä¾›è¦å€Ÿçš„å›¾ä¹¦
> 4. ç®¡ç†å‘˜æ‰«æå›¾ä¹¦æ¡ç ï¼Œæ£€æŸ¥çŠ¶æ€
> 5. ç³»ç»Ÿè®°å½•å€Ÿé˜…ä¿¡æ¯ï¼Œæ›´æ–°å›¾ä¹¦çŠ¶æ€
> 6. æ‰“å°å€Ÿä¹¦å‡­æ¡
> 
> **å¼‚å¸¸æµç¨‹**ï¼š
> - è¯»è€…å€Ÿä¹¦æ•°é‡è¶…é™ â†’ æç¤ºå¹¶æ‹’ç»
> - å›¾ä¹¦å·²è¢«å€Ÿå‡º â†’ æç¤ºå¹¶å»ºè®®é¢„çº¦

### 2.3 ä»ç”¨ä¾‹åˆ°ç±»å›¾çš„è½¬æ¢


**è½¬æ¢æ€è·¯**ï¼š
1. **åè¯æå–** - æ‰¾å‡ºç”¨ä¾‹ä¸­çš„é‡è¦åè¯ï¼Œè¿™äº›é€šå¸¸æ˜¯ç±»
2. **åŠ¨è¯åˆ†æ** - æ‰¾å‡ºåŠ¨ä½œï¼Œè¿™äº›é€šå¸¸æ˜¯æ–¹æ³•
3. **å…³ç³»è¯†åˆ«** - åˆ†æå¯¹è±¡ä¹‹é—´çš„å…³ç³»

**ç±»çš„è¯†åˆ«è¿‡ç¨‹**ï¼š
```
ç”¨ä¾‹æ–‡æœ¬åˆ†æï¼š
"è¯»è€…ä½¿ç”¨å€Ÿä¹¦å¡å€Ÿé˜…å›¾ä¹¦ï¼Œç®¡ç†å‘˜æ‰«ææ¡ç ..."

æå–çš„åè¯ï¼š
ğŸ“š å›¾ä¹¦ (Book)
ğŸ‘¤ è¯»è€… (Reader)  
ğŸ’³ å€Ÿä¹¦å¡ (LibraryCard)
ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ (Librarian)
ğŸ“‹ å€Ÿé˜…è®°å½• (BorrowRecord)

è¯†åˆ«çš„åŠ¨ä½œï¼š
- å€Ÿé˜… (borrow)
- å½’è¿˜ (return)
- æ‰«æ (scan)
- éªŒè¯ (validate)
- è®°å½• (record)
```

### 2.4 ç±»å›¾è®¾è®¡å®è·µ


**åŸºç¡€ç±»è®¾è®¡**ï¼š

```java
// å›¾ä¹¦ç±» - æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡
class Book {
    private String isbn;        // å›¾ä¹¦ç¼–å·
    private String title;       // ä¹¦å
    private String author;      // ä½œè€…
    private BookStatus status;  // çŠ¶æ€ï¼ˆå¯å€Ÿ/å·²å€Ÿå‡º/ç»´ä¿®ä¸­ï¼‰
    
    // æ ¸å¿ƒä¸šåŠ¡æ–¹æ³•
    public boolean isAvailable() { ... }  // æ˜¯å¦å¯å€Ÿ
    public void borrow() { ... }          // è®¾ä¸ºå€Ÿå‡ºçŠ¶æ€
    public void returnBook() { ... }      // è®¾ä¸ºå¯å€ŸçŠ¶æ€
}

// è¯»è€…ç±» - ä½¿ç”¨ç³»ç»Ÿçš„äºº
class Reader {
    private String readerId;
    private String name;
    private List<BorrowRecord> borrowHistory;  // å€Ÿé˜…å†å²
    
    public boolean canBorrow(Book book) { ... }  // æ˜¯å¦èƒ½å€Ÿè¿™æœ¬ä¹¦
    public void borrowBook(Book book) { ... }    // å€Ÿä¹¦
}

// å€Ÿé˜…è®°å½•ç±» - è®°å½•å€Ÿè¿˜å…³ç³»
class BorrowRecord {
    private Reader reader;
    private Book book;
    private Date borrowDate;
    private Date returnDate;
    
    public boolean isOverdue() { ... }  // æ˜¯å¦é€¾æœŸ
}
```

**ç±»å…³ç³»å›¾ç¤º**ï¼š
```
       Reader                    Book
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ readerId    â”‚         â”‚ isbn        â”‚
    â”‚ name        â”‚         â”‚ title       â”‚
    â”‚ phone       â”‚         â”‚ author      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ status      â”‚
           â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                       â”‚
           â”‚    BorrowRecord       â”‚
           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
           â””â”€â”€â”‚ reader      â”‚â”€â”€â”€â”€â”€â”€â”˜
              â”‚ book        â”‚
              â”‚ borrowDate  â”‚
              â”‚ returnDate  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ğŸ”„ ä¾èµ–å€’ç½®åŸåˆ™çš„å®é™…åº”ç”¨


### 3.1 ä»€ä¹ˆæ˜¯ä¾èµ–å€’ç½®åŸåˆ™


**é€šä¿—ç†è§£**ï¼šå°±åƒä½¿ç”¨æ’åº§ä¸€æ ·ï¼Œç”µå™¨ä¸ç›´æ¥ä¾èµ–æŸç§ç‰¹å®šçš„å‘ç”µæ–¹å¼ï¼Œè€Œæ˜¯ä¾èµ–æ ‡å‡†çš„æ’åº§æ¥å£ã€‚è¿™æ ·æ— è®ºæ˜¯ç«åŠ›å‘ç”µè¿˜æ˜¯æ°´åŠ›å‘ç”µï¼Œç”µå™¨éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

```
âŒ ä¸å¥½çš„è®¾è®¡ï¼ˆç›´æ¥ä¾èµ–ï¼‰ï¼š
æ‰‹æœº â”€â”€ç›´æ¥è¿æ¥â”€â”€â–º æŸå“ç‰Œå……ç”µå™¨
ï¼ˆåªèƒ½ç”¨è¿™ä¸€ç§å……ç”µå™¨ï¼‰

âœ… å¥½çš„è®¾è®¡ï¼ˆä¾èµ–æ¥å£ï¼‰ï¼š
æ‰‹æœº â”€â”€USBæ¥å£â”€â”€â–º å„ç§å……ç”µå™¨
ï¼ˆä»»ä½•æ”¯æŒUSBçš„å……ç”µå™¨éƒ½èƒ½ç”¨ï¼‰
```

### 3.2 ä¼ ç»Ÿè®¾è®¡çš„é—®é¢˜


**é—®é¢˜ç¤ºä¾‹**ï¼š
```java
// âŒ ç›´æ¥ä¾èµ–å…·ä½“å®ç°ç±»
class LibraryService {
    private MySQLDatabase database;  // ç›´æ¥ä¾èµ–MySQLæ•°æ®åº“
    
    public LibraryService() {
        this.database = new MySQLDatabase();  // å†™æ­»äº†æ•°æ®åº“ç±»å‹
    }
    
    public void saveBook(Book book) {
        database.insert(book);  // åªèƒ½ç”¨MySQL
    }
}
```

**è¿™æ ·è®¾è®¡çš„é—®é¢˜**ï¼š
- ğŸš« **éš¾ä»¥æµ‹è¯•**ï¼šæµ‹è¯•æ—¶å¿…é¡»è¿æ¥çœŸå®æ•°æ®åº“
- ğŸš« **éš¾ä»¥æ‰©å±•**ï¼šæƒ³æ¢æˆOracleæ•°æ®åº“å°±è¦ä¿®æ”¹ä»£ç   
- ğŸš« **è€¦åˆåº¦é«˜**ï¼šServiceç±»å’Œæ•°æ®åº“ç»‘å®šå¤ªç´§

### 3.3 ä¾èµ–å€’ç½®çš„è§£å†³æ–¹æ¡ˆ


**è§£å†³æ€è·¯**ï¼š
1. **å®šä¹‰æ¥å£** - åˆ›å»ºæŠ½è±¡çš„æ•°æ®è®¿é—®æ¥å£
2. **ä¾èµ–æ¥å£** - Serviceç±»åªä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
3. **æ³¨å…¥å®ç°** - è¿è¡Œæ—¶æ³¨å…¥å…·ä½“çš„å®ç°ç±»

**ä»£ç å®ç°**ï¼š
```java
// 1. å®šä¹‰æ•°æ®è®¿é—®æ¥å£
interface BookRepository {
    void save(Book book);
    Book findById(String id);
    List<Book> findAll();
}

// 2. å…·ä½“å®ç°ç±»
class MySQLBookRepository implements BookRepository {
    public void save(Book book) {
        // MySQLæ•°æ®åº“ä¿å­˜é€»è¾‘
    }
    // ... å…¶ä»–æ–¹æ³•
}

class MongoBookRepository implements BookRepository {
    public void save(Book book) {
        // MongoDBæ•°æ®åº“ä¿å­˜é€»è¾‘  
    }
    // ... å…¶ä»–æ–¹æ³•
}

// 3. Serviceç±»ä¾èµ–æ¥å£
class LibraryService {
    private BookRepository bookRepository;  // ä¾èµ–æ¥å£ï¼Œä¸æ˜¯å…·ä½“ç±»
    
    // é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
    public LibraryService(BookRepository bookRepository) {
        this.bookRepository = bookRepository;
    }
    
    public void addBook(Book book) {
        // ä¸šåŠ¡é€»è¾‘ï¼šéªŒè¯å›¾ä¹¦ä¿¡æ¯
        if (book.getIsbn() == null) {
            throw new IllegalArgumentException("ISBNä¸èƒ½ä¸ºç©º");
        }
        
        // ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆä¸å…³å¿ƒå…·ä½“ç”¨ä»€ä¹ˆæ•°æ®åº“ï¼‰
        bookRepository.save(book);
    }
}
```

### 3.4 ä¾èµ–æ³¨å…¥çš„ä½¿ç”¨


**æ‰‹åŠ¨æ³¨å…¥**ï¼š
```java
// å¯ä»¥éšæ—¶åˆ‡æ¢ä¸åŒçš„æ•°æ®åº“å®ç°
BookRepository repository = new MySQLBookRepository();
LibraryService service = new LibraryService(repository);

// æˆ–è€…åˆ‡æ¢åˆ°MongoDB
BookRepository mongoRepo = new MongoBookRepository();
LibraryService serviceWithMongo = new LibraryService(mongoRepo);
```

**Springæ¡†æ¶è‡ªåŠ¨æ³¨å…¥**ï¼š
```java
@Service
public class LibraryService {
    private final BookRepository bookRepository;
    
    // Springä¼šè‡ªåŠ¨æ³¨å…¥å®ç°ç±»
    public LibraryService(BookRepository bookRepository) {
        this.bookRepository = bookRepository;
    }
}

@Repository
public class MySQLBookRepository implements BookRepository {
    // Springä¼šåˆ›å»ºè¿™ä¸ªå®ç°ç±»å¹¶æ³¨å…¥åˆ°Serviceä¸­
}
```

**å¥½å¤„å¯¹æ¯”**ï¼š
| è®¾è®¡æ–¹å¼ | å¯æµ‹è¯•æ€§ | å¯æ‰©å±•æ€§ | è€¦åˆåº¦ | ç»´æŠ¤æ€§ |
|---------|---------|---------|-------|-------|
| **ç›´æ¥ä¾èµ–** | âŒ å·® | âŒ å·® | âŒ é«˜ | âŒ å·® |
| **ä¾èµ–å€’ç½®** | âœ… å¥½ | âœ… å¥½ | âœ… ä½ | âœ… å¥½ |

---

## 4. ğŸ§ª å¯æµ‹è¯•æ€§è®¾è®¡è€ƒè™‘


### 4.1 ä»€ä¹ˆæ˜¯å¯æµ‹è¯•æ€§è®¾è®¡


**é€šä¿—ç†è§£**ï¼šå°±åƒåšèœæ—¶è¯•å‘³é“ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå•ç‹¬æµ‹è¯•ç¨‹åºçš„æ¯ä¸ªéƒ¨åˆ†ï¼Œç¡®ä¿å®ƒä»¬éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

**å¯æµ‹è¯•æ€§çš„æ ¸å¿ƒè¦æ±‚**ï¼š
- ğŸ”§ **èƒ½å¤Ÿç‹¬ç«‹æµ‹è¯•** - ä¸ä¾èµ–å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€ç½‘ç»œç­‰ï¼‰
- ğŸ¯ **æµ‹è¯•ç»“æœå¯é¢„æµ‹** - ç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡º
- âš¡ **æµ‹è¯•è¿è¡Œå¿«é€Ÿ** - å‡ ç§’é’Ÿå°±èƒ½è·‘å®Œæ‰€æœ‰æµ‹è¯•
- ğŸ“Š **æµ‹è¯•è¦†ç›–å…¨é¢** - æ­£å¸¸æƒ…å†µå’Œå¼‚å¸¸æƒ…å†µéƒ½èƒ½æµ‹åˆ°

### 4.2 éš¾ä»¥æµ‹è¯•çš„ä»£ç ç¤ºä¾‹


**é—®é¢˜ä»£ç **ï¼š
```java
// âŒ è¿™æ ·çš„ä»£ç å¾ˆéš¾æµ‹è¯•
class LibraryService {
    public void processOverdueBooks() {
        // ç›´æ¥è®¿é—®æ•°æ®åº“ï¼ˆæµ‹è¯•æ—¶éœ€è¦çœŸå®æ•°æ®åº“ï¼‰
        Connection conn = DriverManager.getConnection("jdbc:mysql://...");
        
        // ç¡¬ç¼–ç çš„æ—¶é—´ï¼ˆæ¯æ¬¡è¿è¡Œç»“æœä¸åŒï¼‰
        Date today = new Date();
        
        // ç›´æ¥å‘é€é‚®ä»¶ï¼ˆæµ‹è¯•æ—¶ä¼šçœŸçš„å‘é‚®ä»¶ï¼‰
        EmailService emailService = new EmailService();
        
        // å¤æ‚çš„æŸ¥è¯¢å’Œä¸šåŠ¡é€»è¾‘æ··åœ¨ä¸€èµ·
        PreparedStatement stmt = conn.prepareStatement(
            "SELECT * FROM borrow_records WHERE return_date < ?");
        stmt.setDate(1, today);
        ResultSet rs = stmt.executeQuery();
        
        while (rs.next()) {
            String email = rs.getString("reader_email");
            emailService.sendOverdueNotice(email);  // çœŸçš„å‘é‚®ä»¶ï¼
        }
    }
}
```

**æµ‹è¯•è¿™ä¸ªä»£ç çš„é—®é¢˜**ï¼š
- ğŸš« éœ€è¦çœŸå®æ•°æ®åº“å’Œæµ‹è¯•æ•°æ®
- ğŸš« æ¯æ¬¡æµ‹è¯•éƒ½ä¼šå‘é€çœŸå®é‚®ä»¶
- ğŸš« æµ‹è¯•ç»“æœå–å†³äºå½“å‰æ—¥æœŸ
- ğŸš« æ— æ³•æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µ

### 4.3 å¯æµ‹è¯•çš„ä»£ç è®¾è®¡


**æ”¹è¿›æ–¹æ¡ˆ**ï¼š

```java
// âœ… å¯æµ‹è¯•çš„è®¾è®¡
interface BookRepository {
    List<BorrowRecord> findOverdueRecords(Date currentDate);
}

interface EmailService {
    void sendOverdueNotice(String email, BorrowRecord record);
}

interface TimeProvider {
    Date getCurrentDate();
}

class LibraryService {
    private final BookRepository bookRepository;
    private final EmailService emailService;
    private final TimeProvider timeProvider;
    
    public LibraryService(BookRepository bookRepository, 
                         EmailService emailService,
                         TimeProvider timeProvider) {
        this.bookRepository = bookRepository;
        this.emailService = emailService;
        this.timeProvider = timeProvider;
    }
    
    public List<BorrowRecord> processOverdueBooks() {
        Date currentDate = timeProvider.getCurrentDate();
        List<BorrowRecord> overdueRecords = bookRepository.findOverdueRecords(currentDate);
        
        for (BorrowRecord record : overdueRecords) {
            emailService.sendOverdueNotice(record.getReader().getEmail(), record);
        }
        
        return overdueRecords;  // è¿”å›å¤„ç†ç»“æœï¼Œä¾¿äºæµ‹è¯•éªŒè¯
    }
}
```

### 4.4 ç¼–å†™å•å…ƒæµ‹è¯•


**æµ‹è¯•ä»£ç ç¤ºä¾‹**ï¼š

```java
class LibraryServiceTest {
    
    @Test
    void should_send_notice_for_overdue_books() {
        // å‡†å¤‡æµ‹è¯•æ•°æ®
        Date fixedDate = new Date(2024, 1, 15);  // å›ºå®šæ—¥æœŸ
        List<BorrowRecord> overdueRecords = Arrays.asList(
            createOverdueRecord("user1@example.com"),
            createOverdueRecord("user2@example.com")
        );
        
        // åˆ›å»ºMockå¯¹è±¡ï¼ˆå‡çš„ä¾èµ–ï¼‰
        BookRepository mockRepository = mock(BookRepository.class);
        EmailService mockEmailService = mock(EmailService.class);
        TimeProvider mockTimeProvider = mock(TimeProvider.class);
        
        // è®¾ç½®Mockå¯¹è±¡çš„è¡Œä¸º
        when(mockTimeProvider.getCurrentDate()).thenReturn(fixedDate);
        when(mockRepository.findOverdueRecords(fixedDate)).thenReturn(overdueRecords);
        
        // åˆ›å»ºè¦æµ‹è¯•çš„å¯¹è±¡
        LibraryService service = new LibraryService(
            mockRepository, mockEmailService, mockTimeProvider);
        
        // æ‰§è¡Œæµ‹è¯•
        List<BorrowRecord> result = service.processOverdueBooks();
        
        // éªŒè¯ç»“æœ
        assertEquals(2, result.size());  // è¿”å›äº†2æ¡é€¾æœŸè®°å½•
        
        // éªŒè¯æ˜¯å¦è°ƒç”¨äº†å‘é‚®ä»¶æ–¹æ³•
        verify(mockEmailService, times(2)).sendOverdueNotice(any(), any());
    }
    
    @Test
    void should_handle_no_overdue_books() {
        // æµ‹è¯•æ²¡æœ‰é€¾æœŸå›¾ä¹¦çš„æƒ…å†µ
        // ... ç±»ä¼¼çš„æµ‹è¯•ä»£ç 
    }
}
```

**Mockå¯¹è±¡çš„å¥½å¤„**ï¼š
- ğŸ¯ **æ§åˆ¶è¡Œä¸º** - å¯ä»¥è®©ä¾èµ–è¿”å›æˆ‘ä»¬æƒ³è¦çš„ç»“æœ
- âš¡ **è¿è¡Œå¿«é€Ÿ** - ä¸éœ€è¦çœŸå®çš„æ•°æ®åº“æˆ–ç½‘ç»œè°ƒç”¨
- ğŸ”§ **éš”ç¦»æµ‹è¯•** - åªæµ‹è¯•å½“å‰ç±»çš„é€»è¾‘
- ğŸ“Š **éªŒè¯äº¤äº’** - å¯ä»¥æ£€æŸ¥æ˜¯å¦æ­£ç¡®è°ƒç”¨äº†å…¶ä»–å¯¹è±¡çš„æ–¹æ³•

### 4.5 æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰


**TDDçš„æµç¨‹**ï¼š
```
1. å†™æµ‹è¯• â”€â”€â–º 2. è¿è¡Œæµ‹è¯• â”€â”€â–º 3. å†™ä»£ç  â”€â”€â–º 4. é‡æ„
   (çº¢)         (å¤±è´¥)        (ç»¿)       (æ¸…ç†)
    â†‘                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¾ªç¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®é™…ç¤ºä¾‹**ï¼š
```java
// 1. å…ˆå†™æµ‹è¯•ï¼ˆæ­¤æ—¶ä»£ç è¿˜ä¸å­˜åœ¨ï¼Œæµ‹è¯•ä¼šå¤±è´¥ï¼‰
@Test
void should_calculate_late_fee_for_overdue_book() {
    BorrowRecord record = new BorrowRecord();
    record.setBorrowDate(new Date(2024, 1, 1));
    record.setDueDate(new Date(2024, 1, 15));
    
    Date currentDate = new Date(2024, 1, 20);  // é€¾æœŸ5å¤©
    
    double lateFee = record.calculateLateFee(currentDate);
    
    assertEquals(5.0, lateFee);  // æ¯å¤©1å…ƒç½šé‡‘
}

// 2. ç„¶åå†™æœ€ç®€å•çš„ä»£ç è®©æµ‹è¯•é€šè¿‡
class BorrowRecord {
    public double calculateLateFee(Date currentDate) {
        long overdueDays = calculateOverdueDays(currentDate);
        return overdueDays > 0 ? overdueDays * 1.0 : 0.0;
    }
}

// 3. é‡æ„ä»£ç ï¼Œè®©å®ƒæ›´æ¸…æ™°
```

---

## 5. ğŸ”„ é‡æ„ç­–ç•¥ä¸æŠ€å·§


### 5.1 ä»€ä¹ˆæ˜¯é‡æ„


**é€šä¿—ç†è§£**ï¼šé‡æ„å°±åƒæ•´ç†æˆ¿é—´ä¸€æ ·ï¼Œä¸æ”¹å˜æˆ¿é—´çš„åŠŸèƒ½ï¼ˆèƒ½ä½äººã€èƒ½æ”¾ä¸œè¥¿ï¼‰ï¼Œä½†è®©æˆ¿é—´æ›´æ•´æ´ã€æ›´å¥½ç”¨ã€‚

**é‡æ„çš„ç›®çš„**ï¼š
- ğŸ§¹ **æé«˜ä»£ç å¯è¯»æ€§** - è®©åˆ«äººï¼ˆåŒ…æ‹¬æœªæ¥çš„è‡ªå·±ï¼‰æ›´å®¹æ˜“ç†è§£
- ğŸ”§ **é™ä½ç»´æŠ¤æˆæœ¬** - ä¿®æ”¹å’Œæ·»åŠ åŠŸèƒ½æ›´å®¹æ˜“
- ğŸš€ **æå‡æ€§èƒ½** - ä¼˜åŒ–ç®—æ³•å’Œæ•°æ®ç»“æ„
- ğŸ›¡ï¸ **å‡å°‘bug** - ç®€åŒ–å¤æ‚é€»è¾‘ï¼Œé™ä½å‡ºé”™æ¦‚ç‡

### 5.2 è¯†åˆ«éœ€è¦é‡æ„çš„ä»£ç åå‘³é“


**å¸¸è§çš„ä»£ç åå‘³é“**ï¼š

> ğŸ¦¨ **é•¿æ–¹æ³•**ï¼ˆLong Methodï¼‰
> ```java
> // âŒ ä¸€ä¸ªæ–¹æ³•åšå¤ªå¤šäº‹æƒ…
> public void processBookReturn(String bookId, String readerId) {
>     // éªŒè¯å‚æ•°ï¼ˆ10è¡Œä»£ç ï¼‰
>     // æŸ¥æ‰¾å›¾ä¹¦ï¼ˆ15è¡Œä»£ç ï¼‰
>     // æŸ¥æ‰¾è¯»è€…ï¼ˆ10è¡Œä»£ç ï¼‰
>     // è®¡ç®—ç½šé‡‘ï¼ˆ20è¡Œä»£ç ï¼‰
>     // æ›´æ–°æ•°æ®åº“ï¼ˆ15è¡Œä»£ç ï¼‰
>     // å‘é€é€šçŸ¥ï¼ˆ10è¡Œä»£ç ï¼‰
>     // æ€»å…±80è¡Œä»£ç ï¼
> }
> ```

> ğŸ¦¨ **é‡å¤ä»£ç **ï¼ˆDuplicate Codeï¼‰
> ```java
> // âŒ åˆ°å¤„éƒ½æ˜¯ç›¸åŒçš„éªŒè¯é€»è¾‘
> public void borrowBook(String bookId) {
>     if (bookId == null || bookId.trim().isEmpty()) {
>         throw new IllegalArgumentException("å›¾ä¹¦IDä¸èƒ½ä¸ºç©º");
>     }
>     // ... ä¸šåŠ¡é€»è¾‘
> }
> 
> public void returnBook(String bookId) {
>     if (bookId == null || bookId.trim().isEmpty()) {  // é‡å¤ï¼
>         throw new IllegalArgumentException("å›¾ä¹¦IDä¸èƒ½ä¸ºç©º");
>     }
>     // ... ä¸šåŠ¡é€»è¾‘
> }
> ```

> ğŸ¦¨ **å¤§ç±»**ï¼ˆLarge Classï¼‰
> ```java
> // âŒ ä¸€ä¸ªç±»æ‰¿æ‹…å¤ªå¤šè´£ä»»
> class LibraryManager {
>     // å›¾ä¹¦ç®¡ç†ç›¸å…³çš„20ä¸ªæ–¹æ³•
>     // è¯»è€…ç®¡ç†ç›¸å…³çš„15ä¸ªæ–¹æ³•  
>     // å€Ÿé˜…ç®¡ç†ç›¸å…³çš„25ä¸ªæ–¹æ³•
>     // æŠ¥è¡¨ç»Ÿè®¡ç›¸å…³çš„10ä¸ªæ–¹æ³•
>     // æ€»å…±70ä¸ªæ–¹æ³•ï¼
> }
> ```

### 5.3 å¸¸ç”¨é‡æ„æŠ€å·§


**æŠ€å·§1ï¼šæå–æ–¹æ³•ï¼ˆExtract Methodï¼‰**

```java
// âŒ é‡æ„å‰ï¼šé•¿æ–¹æ³•
public void processBookReturn(String bookId, String readerId) {
    // éªŒè¯å›¾ä¹¦ID
    if (bookId == null || bookId.trim().isEmpty()) {
        throw new IllegalArgumentException("å›¾ä¹¦IDä¸èƒ½ä¸ºç©º");
    }
    
    // éªŒè¯è¯»è€…ID
    if (readerId == null || readerId.trim().isEmpty()) {
        throw new IllegalArgumentException("è¯»è€…IDä¸èƒ½ä¸ºç©º");
    }
    
    // æŸ¥æ‰¾å›¾ä¹¦
    Book book = bookRepository.findById(bookId);
    if (book == null) {
        throw new BookNotFoundException("å›¾ä¹¦ä¸å­˜åœ¨");
    }
    
    // æŸ¥æ‰¾å€Ÿé˜…è®°å½•
    BorrowRecord record = borrowRepository.findActiveRecord(bookId, readerId);
    if (record == null) {
        throw new RecordNotFoundException("å€Ÿé˜…è®°å½•ä¸å­˜åœ¨");
    }
    
    // è®¡ç®—ç½šé‡‘
    Date currentDate = new Date();
    long overdueDays = calculateOverdueDays(record.getDueDate(), currentDate);
    double lateFee = overdueDays > 0 ? overdueDays * DAILY_FINE : 0;
    
    // æ›´æ–°è®°å½•
    record.setReturnDate(currentDate);
    record.setLateFee(lateFee);
    borrowRepository.save(record);
    
    // æ›´æ–°å›¾ä¹¦çŠ¶æ€
    book.setStatus(BookStatus.AVAILABLE);
    bookRepository.save(book);
}

// âœ… é‡æ„åï¼šæ‹†åˆ†æˆå¤šä¸ªå°æ–¹æ³•
public void processBookReturn(String bookId, String readerId) {
    validateInput(bookId, readerId);
    
    Book book = findAndValidateBook(bookId);
    BorrowRecord record = findAndValidateRecord(bookId, readerId);
    
    double lateFee = calculateLateFee(record);
    
    updateRecordAndBook(record, book, lateFee);
}

private void validateInput(String bookId, String readerId) {
    if (bookId == null || bookId.trim().isEmpty()) {
        throw new IllegalArgumentException("å›¾ä¹¦IDä¸èƒ½ä¸ºç©º");
    }
    if (readerId == null || readerId.trim().isEmpty()) {
        throw new IllegalArgumentException("è¯»è€…IDä¸èƒ½ä¸ºç©º");
    }
}

private Book findAndValidateBook(String bookId) {
    Book book = bookRepository.findById(bookId);
    if (book == null) {
        throw new BookNotFoundException("å›¾ä¹¦ä¸å­˜åœ¨");
    }
    return book;
}

private double calculateLateFee(BorrowRecord record) {
    Date currentDate = new Date();
    long overdueDays = calculateOverdueDays(record.getDueDate(), currentDate);
    return overdueDays > 0 ? overdueDays * DAILY_FINE : 0;
}
```

**æŠ€å·§2ï¼šæå–ç±»ï¼ˆExtract Classï¼‰**

```java
// âŒ é‡æ„å‰ï¼šä¸€ä¸ªç±»åšå¤ªå¤šäº‹
class LibraryManager {
    public void addBook(Book book) { ... }
    public void removeBook(String bookId) { ... }
    public void addReader(Reader reader) { ... }
    public void borrowBook(String bookId, String readerId) { ... }
    public void returnBook(String bookId, String readerId) { ... }
    public Report generateMonthlyReport() { ... }
}

// âœ… é‡æ„åï¼šæŒ‰èŒè´£åˆ†ç¦»
class BookManager {
    public void addBook(Book book) { ... }
    public void removeBook(String bookId) { ... }
    public Book findBook(String bookId) { ... }
}

class ReaderManager {
    public void addReader(Reader reader) { ... }
    public void removeReader(String readerId) { ... }
    public Reader findReader(String readerId) { ... }
}

class BorrowingManager {
    private BookManager bookManager;
    private ReaderManager readerManager;
    
    public void borrowBook(String bookId, String readerId) { ... }
    public void returnBook(String bookId, String readerId) { ... }
}

class ReportManager {
    public Report generateMonthlyReport() { ... }
}
```

**æŠ€å·§3ï¼šå¼•å…¥å‚æ•°å¯¹è±¡ï¼ˆIntroduce Parameter Objectï¼‰**

```java
// âŒ é‡æ„å‰ï¼šå‚æ•°å¤ªå¤š
public void createBorrowRecord(String bookId, String readerId, 
                              Date borrowDate, Date dueDate, 
                              String libraryLocation, String staffId) {
    // ...
}

// âœ… é‡æ„åï¼šç”¨å¯¹è±¡å°è£…å‚æ•°
class BorrowRequest {
    private String bookId;
    private String readerId;
    private Date borrowDate;
    private Date dueDate;
    private String libraryLocation;
    private String staffId;
    
    // æ„é€ å‡½æ•°ã€getterã€setter
}

public void createBorrowRecord(BorrowRequest request) {
    // æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“æ‰©å±•
}
```

### 5.4 é‡æ„çš„å®‰å…¨å®è·µ


**é‡æ„å‰çš„å‡†å¤‡å·¥ä½œ**ï¼š
1. **ç¡®ä¿æœ‰å®Œæ•´çš„æµ‹è¯•** - é‡æ„åè¿è¡Œæµ‹è¯•ï¼Œç¡®ä¿åŠŸèƒ½æ²¡æœ‰ç ´å
2. **å°æ­¥å¿«è·‘** - æ¯æ¬¡åªåšä¸€ä¸ªå°æ”¹åŠ¨ï¼Œç«‹å³æµ‹è¯•
3. **ç‰ˆæœ¬æ§åˆ¶** - æ¯ä¸ªé‡æ„æ­¥éª¤éƒ½æäº¤ä»£ç ï¼Œæ–¹ä¾¿å›æ»š

**é‡æ„æ­¥éª¤ç¤ºä¾‹**ï¼š
```
æ­¥éª¤1ï¼šå†™æµ‹è¯•è¦†ç›–ç°æœ‰åŠŸèƒ½ â”€â”€â–º è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡
     â†“
æ­¥éª¤2ï¼šæå–ä¸€ä¸ªå°æ–¹æ³• â”€â”€â–º è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡ â”€â”€â–º æäº¤ä»£ç 
     â†“  
æ­¥éª¤3ï¼šå†æå–ä¸€ä¸ªæ–¹æ³• â”€â”€â–º è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡ â”€â”€â–º æäº¤ä»£ç 
     â†“
æ­¥éª¤4ï¼šé‡å‘½åæ–¹æ³•è®©åå­—æ›´æ¸…æ™° â”€â”€â–º è¿è¡Œæµ‹è¯• â”€â”€â–º æäº¤ä»£ç 
     â†“
... ç»§ç»­å°æ­¥é‡æ„
```

**é‡æ„å·¥å…·çš„ä½¿ç”¨**ï¼š
```java
// IDEçš„é‡æ„åŠŸèƒ½ï¼š
// 1. å³é”® â†’ Refactor â†’ Extract Method
// 2. é€‰æ‹©è¦æå–çš„ä»£ç 
// 3. ç»™æ–°æ–¹æ³•èµ·ä¸ªå¥½åå­—
// 4. IDEè‡ªåŠ¨å®Œæˆé‡æ„

// é‡æ„å‰
public void processReturn(String bookId, String readerId) {
    [é€‰ä¸­è¿™éƒ¨åˆ†ä»£ç ]
    if (bookId == null || bookId.trim().isEmpty()) {
        throw new IllegalArgumentException("å›¾ä¹¦IDä¸èƒ½ä¸ºç©º");
    }
    [é€‰ä¸­ç»“æŸ]
    
    // å…¶ä»–é€»è¾‘...
}

// IDEé‡æ„å
public void processReturn(String bookId, String readerId) {
    validateBookId(bookId);  // è‡ªåŠ¨æå–çš„æ–¹æ³•
    
    // å…¶ä»–é€»è¾‘...
}

private void validateBookId(String bookId) {  // è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•
    if (bookId == null || bookId.trim().isEmpty()) {
        throw new IllegalArgumentException("å›¾ä¹¦IDä¸èƒ½ä¸ºç©º");
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ éœ€æ±‚åˆ†æï¼šç†è§£ç”¨æˆ·çœŸæ­£çš„éœ€è¦ï¼Œä¸è¦æƒ³å½“ç„¶
ğŸ”¸ ç”¨ä¾‹è®¾è®¡ï¼šæè¿°ç”¨æˆ·å’Œç³»ç»Ÿçš„äº¤äº’åœºæ™¯
ğŸ”¸ ç±»å›¾è®¾è®¡ï¼šæŠŠç°å®é—®é¢˜æŠ½è±¡æˆå¯¹è±¡å’Œå…³ç³»
ğŸ”¸ ä¾èµ–å€’ç½®ï¼šä¾èµ–æ¥å£è€Œä¸æ˜¯å…·ä½“å®ç°ï¼Œæé«˜çµæ´»æ€§
ğŸ”¸ å¯æµ‹è¯•æ€§ï¼šè®¾è®¡æ—¶å°±è¦è€ƒè™‘å¦‚ä½•éªŒè¯ä»£ç çš„æ­£ç¡®æ€§
ğŸ”¸ é‡æ„æŠ€å·§ï¼šæŒç»­æ”¹è¿›ä»£ç è´¨é‡ï¼Œè®©ä»£ç æ›´æ˜“ç»´æŠ¤
```

### 6.2 è®¾è®¡æµç¨‹çš„å…³é”®è¦ç‚¹


**ğŸ”¹ éœ€æ±‚åˆ†æçš„è¦é¢†**
```
å¬ç”¨æˆ·è¯´ä»€ä¹ˆ â†’ ç†è§£ç”¨æˆ·è¦ä»€ä¹ˆ â†’ è®¾è®¡ç³»ç»Ÿåšä»€ä¹ˆ

å¸¸è§é™·é˜±ï¼š
âŒ ç”¨æˆ·è¯´"æˆ‘è¦ä¸ªæŒ‰é’®" â†’ å°±è®¾è®¡ä¸ªæŒ‰é’®
âœ… ç”¨æˆ·è¯´"æˆ‘è¦ä¸ªæŒ‰é’®" â†’ é—®æ¸…æ¥šæŒ‰é’®è¦å®ç°ä»€ä¹ˆåŠŸèƒ½

æŠ€å·§ï¼šå¤šé—®"ä¸ºä»€ä¹ˆ"
- ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Ÿ
- è¿™ä¸ªåŠŸèƒ½è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- è¿˜æœ‰å…¶ä»–è§£å†³æ–¹æ¡ˆå—ï¼Ÿ
```

**ğŸ”¹ ç±»è®¾è®¡çš„åŸåˆ™**
```
å•ä¸€èŒè´£ï¼šä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹ï¼Œåšå¥½ä¸€ä»¶äº‹
å¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
ä¾èµ–å€’ç½®ï¼šé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡

å®è·µæŠ€å·§ï¼š
- ç±»åè¦æ¸…æ¥šè¡¨è¾¾èŒè´£ï¼ˆBookManagerã€EmailServiceï¼‰
- æ–¹æ³•åè¦æ¸…æ¥šè¡¨è¾¾æ„å›¾ï¼ˆcalculateLateFeeã€sendNotificationï¼‰
- é¿å…God Classï¼ˆä»€ä¹ˆéƒ½ç®¡çš„ä¸‡èƒ½ç±»ï¼‰
```

### 6.3 å®é™…å¼€å‘å»ºè®®


**ğŸ”¹ ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å®Œå–„**
```
ç¬¬ä¸€ç‰ˆï¼šå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œèƒ½è·‘èµ·æ¥
ç¬¬äºŒç‰ˆï¼šæ·»åŠ å¼‚å¸¸å¤„ç†ï¼Œæé«˜å¥å£®æ€§
ç¬¬ä¸‰ç‰ˆï¼šä¼˜åŒ–æ€§èƒ½ï¼Œé‡æ„ä»£ç ç»“æ„
ç¬¬å››ç‰ˆï¼šæ·»åŠ æ–°åŠŸèƒ½ï¼Œæ‰©å±•ç³»ç»Ÿ

ä¸è¦ä¸€å¼€å§‹å°±æƒ³è®¾è®¡å®Œç¾çš„ç³»ç»Ÿï¼
```

**ğŸ”¹ æµ‹è¯•é©±åŠ¨çš„å¼€å‘ä¹ æƒ¯**
```
å†™ä»£ç å‰å…ˆæƒ³ï¼šè¿™ä¸ªåŠŸèƒ½æ€ä¹ˆæµ‹è¯•ï¼Ÿ
- éœ€è¦ä»€ä¹ˆè¾“å…¥ï¼Ÿ
- æœŸæœ›ä»€ä¹ˆè¾“å‡ºï¼Ÿ
- æœ‰å“ªäº›è¾¹ç•Œæƒ…å†µï¼Ÿ
- å¼‚å¸¸æƒ…å†µå¦‚ä½•å¤„ç†ï¼Ÿ

å…»æˆä¹ æƒ¯ï¼šä»£ç å†™å®Œç«‹å³å†™æµ‹è¯•
```

**ğŸ”¹ æŒç»­é‡æ„çš„æ„è¯†**
```
é‡æ„çš„æ—¶æœºï¼š
- æ·»åŠ æ–°åŠŸèƒ½æ—¶å‘ç°ä»£ç éš¾ä»¥ä¿®æ”¹
- ä¿®å¤bugæ—¶å‘ç°é€»è¾‘æ··ä¹±
- ä»£ç å®¡æŸ¥æ—¶å‘ç°åå‘³é“
- å®šæœŸçš„ä»£ç æ¸…ç†æ´»åŠ¨

é‡æ„çš„åŸåˆ™ï¼š
- å°æ­¥å¿«è·‘ï¼Œé¢‘ç¹æäº¤
- ä¿æŒæµ‹è¯•è¦†ç›–
- ä¸€æ¬¡åªæ”¹ä¸€ä»¶äº‹
```

### 6.4 å¸¸è§è¯¯åŒºå’Œé¿å…æ–¹æ³•


**âŒ è¿‡åº¦è®¾è®¡**
```
è¯¯åŒºï¼šä¸ºäº†å°†æ¥å¯èƒ½çš„éœ€æ±‚è®¾è®¡å¤æ‚çš„æ¶æ„
æ­£ç¡®ï¼šåªä¸ºå½“å‰éœ€æ±‚è®¾è®¡ï¼Œä¿æŒç®€å•å¯æ‰©å±•

ä¾‹å­ï¼š
âŒ è®¾è®¡10å±‚æ¶æ„æ”¯æŒæœªæ¥å¯èƒ½çš„åˆ†å¸ƒå¼éœ€æ±‚
âœ… è®¾è®¡ç®€å•åˆ†å±‚ï¼Œéœ€è¦æ—¶å†æ‰©å±•
```

**âŒ å¿½è§†æµ‹è¯•**
```
è¯¯åŒºï¼šåŠŸèƒ½èƒ½è·‘å°±è¡Œï¼Œæµ‹è¯•å¤ªéº»çƒ¦
æ­£ç¡®ï¼šæµ‹è¯•æ˜¯ä¿è¯è´¨é‡çš„é‡è¦æ‰‹æ®µ

åæœï¼š
- é‡æ„æ—¶ä¸æ•¢æ”¹ä»£ç 
- ä¿®å¤ä¸€ä¸ªbugå¼•å…¥ä¸¤ä¸ªæ–°bug
- ç³»ç»Ÿè¶Šæ¥è¶Šä¸ç¨³å®š
```

**âŒ å®³æ€•é‡æ„**
```
è¯¯åŒºï¼šä»£ç èƒ½è·‘å°±ä¸è¦åŠ¨ï¼Œæ”¹äº†å¯èƒ½å‡ºé—®é¢˜
æ­£ç¡®ï¼šå®šæœŸé‡æ„æ˜¯å¿…è¦çš„ç»´æŠ¤å·¥ä½œ

æŠ€å·§ï¼š
- æœ‰å®Œæ•´æµ‹è¯•ä¿æŠ¤
- å°æ­¥æ”¹è¿›ï¼Œé™ä½é£é™©
- ä½¿ç”¨IDEè‡ªåŠ¨é‡æ„å·¥å…·
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- è®¾è®¡è¦ä»ç”¨æˆ·éœ€æ±‚å‡ºå‘ï¼Œä¸è¦é—­é—¨é€ è½¦
- ä¾èµ–æ¥å£ä¸ä¾èµ–å®ç°ï¼Œè®©ç³»ç»Ÿæ›´çµæ´»
- ä»£ç è¦å¯æµ‹è¯•ï¼Œæµ‹è¯•æ˜¯è´¨é‡çš„ä¿è¯
- æŒç»­é‡æ„ï¼Œä¿æŒä»£ç çš„æ¸…æ´å’Œæ´»åŠ›