---
title: 2ã€è¯·æ±‚æ‹¦æˆªä¸å°è£…
---
## ğŸ“š ç›®å½•

1. [è¯·æ±‚æ‹¦æˆªå™¨æ¦‚å¿µ](#1-è¯·æ±‚æ‹¦æˆªå™¨æ¦‚å¿µ)
2. [å“åº”æ‹¦æˆªå™¨è¯¦è§£](#2-å“åº”æ‹¦æˆªå™¨è¯¦è§£)
3. [ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶](#3-ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶)
4. [LoadingçŠ¶æ€ç®¡ç†](#4-LoadingçŠ¶æ€ç®¡ç†)
5. [è¯·æ±‚å–æ¶ˆæœºåˆ¶](#5-è¯·æ±‚å–æ¶ˆæœºåˆ¶)
6. [APIæ¥å£ç»Ÿä¸€å°è£…](#6-APIæ¥å£ç»Ÿä¸€å°è£…)
7. [è¯·æ±‚æ–¹æ³•ç»Ÿä¸€ç®¡ç†](#7-è¯·æ±‚æ–¹æ³•ç»Ÿä¸€ç®¡ç†)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ è¯·æ±‚æ‹¦æˆªå™¨æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è¯·æ±‚æ‹¦æˆªå™¨

**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä½ è¦å¯„å¿«é€’ï¼Œåœ¨å¿«é€’å‘˜å–èµ°åŒ…è£¹å‰ï¼Œä½ å¯ä»¥åœ¨åŒ…è£¹ä¸Šè´´æ ‡ç­¾ã€åŠ å°æ¡ã€‚è¯·æ±‚æ‹¦æˆªå™¨å°±åƒè¿™ä¸ªè¿‡ç¨‹ - åœ¨HTTPè¯·æ±‚å‘å‡ºå‰ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚

```
ç”¨æˆ·æ“ä½œ â†’ å‘èµ·è¯·æ±‚ â†’ ã€è¯·æ±‚æ‹¦æˆªå™¨å¤„ç†ã€‘ â†’ å‘é€åˆ°æœåŠ¡å™¨
                       â†‘
                  æ·»åŠ tokenã€è®¾ç½®è¯·æ±‚å¤´ç­‰
```

### 1.2 è¯·æ±‚æ‹¦æˆªå™¨çš„ä½œç”¨

**ğŸ”¸ ä¸»è¦åŠŸèƒ½**
```
âœ… ç»Ÿä¸€æ·»åŠ tokenè®¤è¯
âœ… è®¾ç½®é€šç”¨è¯·æ±‚å¤´
âœ… æ˜¾ç¤ºLoadingåŠ è½½çŠ¶æ€
âœ… è¯·æ±‚å‚æ•°ç»Ÿä¸€å¤„ç†
âœ… è¯·æ±‚æ—¥å¿—è®°å½•
```

### 1.3 åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

```javascript
// åˆ›å»ºaxioså®ä¾‹
const api = axios.create({
  baseURL: 'https://api.example.com'
});

// è¯·æ±‚æ‹¦æˆªå™¨ - å‘è¯·æ±‚å‰åšä»€ä¹ˆ
api.interceptors.request.use(
  config => {
    // ç»™æ¯ä¸ªè¯·æ±‚éƒ½åŠ ä¸Štoken
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  error => {
    return Promise.reject(error);
  }
);
```

**ğŸ’¡ å·¥ä½œæµç¨‹è¯´æ˜**
```
1. ç”¨æˆ·ç‚¹å‡»æŒ‰é’®å‘èµ·è¯·æ±‚
2. è¯·æ±‚è¿›å…¥æ‹¦æˆªå™¨
3. æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ tokenåˆ°è¯·æ±‚å¤´
4. è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨
```

---

## 2. ğŸ“¨ å“åº”æ‹¦æˆªå™¨è¯¦è§£


### 2.1 å“åº”æ‹¦æˆªå™¨çš„å«ä¹‰

**é€šä¿—ç†è§£**ï¼šå°±åƒæ”¶å¿«é€’æ—¶ï¼Œä½ ä¼šå…ˆæ£€æŸ¥åŒ…è£¹æ˜¯å¦å®Œå¥½ã€æ˜¯å¦æ˜¯ä½ è¦çš„ä¸œè¥¿ã€‚å“åº”æ‹¦æˆªå™¨åœ¨æœåŠ¡å™¨å“åº”åˆ°è¾¾ç»„ä»¶å‰ï¼Œå…ˆç»Ÿä¸€æ£€æŸ¥å’Œå¤„ç†å“åº”æ•°æ®ã€‚

```
æœåŠ¡å™¨å“åº” â†’ ã€å“åº”æ‹¦æˆªå™¨å¤„ç†ã€‘ â†’ ç»„ä»¶æ¥æ”¶æ•°æ®
                    â†‘
               æ£€æŸ¥çŠ¶æ€ç ã€æå–æ•°æ®ç­‰
```

### 2.2 å“åº”æ‹¦æˆªå™¨æ ¸å¿ƒåŠŸèƒ½

```javascript
// å“åº”æ‹¦æˆªå™¨ - æ”¶åˆ°å“åº”ååšä»€ä¹ˆ
api.interceptors.response.use(
  response => {
    // æˆåŠŸå“åº”çš„å¤„ç†
    const { code, data, message } = response.data;
    
    if (code === 200) {
      // æ­£å¸¸è¿”å›æ•°æ®
      return data;
    } else {
      // ä¸šåŠ¡é”™è¯¯å¤„ç†
      throw new Error(message || 'è¯·æ±‚å¤±è´¥');
    }
  },
  error => {
    // ç½‘ç»œé”™è¯¯å¤„ç†
    if (error.response?.status === 401) {
      // tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
      router.push('/login');
    }
    return Promise.reject(error);
  }
);
```

### 2.3 å“åº”æ•°æ®æ ‡å‡†åŒ–

**ğŸ”¸ ç»Ÿä¸€å“åº”æ ¼å¼**
```javascript
// æœåŠ¡å™¨è¿”å›çš„åŸå§‹æ ¼å¼
{
  "code": 200,
  "data": { "name": "å¼ ä¸‰", "age": 25 },
  "message": "æˆåŠŸ"
}

// æ‹¦æˆªå™¨å¤„ç†åï¼Œç»„ä»¶ç›´æ¥æ‹¿åˆ°
{ "name": "å¼ ä¸‰", "age": 25 }
```

**ğŸ’¯ æœ€ä½³å®è·µ**
```javascript
// å®Œæ•´çš„å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  response => {
    const res = response.data;
    
    // æ ¹æ®ä¸åŒçš„codeåšä¸åŒå¤„ç†
    switch (res.code) {
      case 200:
        return res.data; // æˆåŠŸï¼Œè¿”å›æ•°æ®
      case 401:
        // æœªæˆæƒï¼Œæ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•
        localStorage.removeItem('token');
        router.push('/login');
        break;
      case 403:
        // æ— æƒé™
        Message.error('æ— æƒé™è®¿é—®');
        break;
      default:
        // å…¶ä»–é”™è¯¯
        Message.error(res.message || 'è¯·æ±‚å¤±è´¥');
    }
    
    return Promise.reject(new Error(res.message));
  },
  error => {
    Message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
    return Promise.reject(error);
  }
);
```

---

## 3. âš ï¸ ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€é”™è¯¯å¤„ç†

**é—®é¢˜åœºæ™¯**ï¼š
```
âŒ æ²¡æœ‰ç»Ÿä¸€å¤„ç†å‰ï¼š
- æ¯ä¸ªç»„ä»¶éƒ½è¦å†™é”™è¯¯å¤„ç†ä»£ç 
- é”™è¯¯æç¤ºä¸ç»Ÿä¸€
- é‡å¤ä»£ç å¤š
- ç»´æŠ¤å›°éš¾

âœ… ç»Ÿä¸€å¤„ç†åï¼š
- ä¸€å¤„å®šä¹‰ï¼Œå…¨å±€ç”Ÿæ•ˆ
- é”™è¯¯æç¤ºç»Ÿä¸€
- ä»£ç ç®€æ´
- æ˜“äºç»´æŠ¤
```

### 3.2 é”™è¯¯ç±»å‹åˆ†ç±»

**ğŸ”¸ å¸¸è§é”™è¯¯ç±»å‹**

| é”™è¯¯ç±»å‹ | **HTTPçŠ¶æ€ç ** | **å¤„ç†æ–¹å¼** | **ç”¨æˆ·ä½“éªŒ** |
|---------|---------------|-------------|-------------|
| ğŸ”´ **ç½‘ç»œé”™è¯¯** | `æ— å“åº”` | `æç¤ºç½‘ç»œå¼‚å¸¸` | `è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥` |
| ğŸŸ¡ **è®¤è¯å¤±è´¥** | `401` | `è·³è½¬ç™»å½•é¡µ` | `è¯·é‡æ–°ç™»å½•` |
| ğŸŸ  **æƒé™ä¸è¶³** | `403` | `æç¤ºæ— æƒé™` | `è”ç³»ç®¡ç†å‘˜` |
| ğŸ”µ **èµ„æºä¸å­˜åœ¨** | `404` | `æç¤ºèµ„æºä¸å­˜åœ¨` | `é¡µé¢ä¸å­˜åœ¨` |
| ğŸŸ£ **æœåŠ¡å™¨é”™è¯¯** | `500` | `æç¤ºæœåŠ¡å™¨å¼‚å¸¸` | `ç¨åé‡è¯•` |

### 3.3 å®Œæ•´é”™è¯¯å¤„ç†å®ç°

```javascript
// é”™è¯¯å¤„ç†å‡½æ•°
const handleError = (error) => {
  console.log('è¯·æ±‚é”™è¯¯ï¼š', error);
  
  if (error.response) {
    // æœåŠ¡å™¨å“åº”äº†ä½†çŠ¶æ€ç ä¸æ˜¯2xx
    const { status, data } = error.response;
    
    switch (status) {
      case 401:
        Message.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
        // æ¸…é™¤ç™»å½•ä¿¡æ¯
        store.dispatch('user/logout');
        router.push('/login');
        break;
        
      case 403:
        Message.error('æ²¡æœ‰æƒé™è®¿é—®è¯¥èµ„æº');
        break;
        
      case 404:
        Message.error('è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨');
        break;
        
      case 500:
        Message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');
        break;
        
      default:
        Message.error(data?.message || `è¯·æ±‚å¤±è´¥(${status})`);
    }
  } else if (error.request) {
    // è¯·æ±‚å‘å‡ºäº†ä½†æ²¡æœ‰æ”¶åˆ°å“åº”
    Message.error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ');
  } else {
    // å…¶ä»–é”™è¯¯
    Message.error(error.message || 'è¯·æ±‚å¤±è´¥');
  }
};

// åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ä½¿ç”¨
api.interceptors.response.use(
  response => response.data,
  error => {
    handleError(error);
    return Promise.reject(error);
  }
);
```

---

## 4. â³ LoadingçŠ¶æ€ç®¡ç†


### 4.1 LoadingçŠ¶æ€çš„å¿…è¦æ€§

**ç”¨æˆ·ä½“éªŒè§’åº¦**ï¼š
```
æ²¡æœ‰Loadingï¼šç”¨æˆ·ä¸çŸ¥é“æ˜¯å¦åœ¨åŠ è½½ï¼Œå¯èƒ½é‡å¤ç‚¹å‡»
æœ‰Loadingï¼šç”¨æˆ·çŸ¥é“ç³»ç»Ÿåœ¨å¤„ç†ï¼Œè€å¿ƒç­‰å¾…
```

**ğŸ”¸ LoadingçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ**
```
æ–¹æ¡ˆ1: å…¨å±€Loading  â†’ ç®€å•ä½†ä¸å¤Ÿçµæ´»
æ–¹æ¡ˆ2: ç»„ä»¶çº§Loading â†’ çµæ´»ä½†éœ€è¦æ‰‹åŠ¨ç®¡ç†  
æ–¹æ¡ˆ3: è‡ªåŠ¨Loading â†’ æœ€ä½³æ–¹æ¡ˆï¼Œè‡ªåŠ¨ç®¡ç†
```

### 4.2 è‡ªåŠ¨Loadingå®ç°

```javascript
// Loadingç®¡ç†å™¨
class LoadingManager {
  constructor() {
    this.loadingCount = 0; // æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚æ•°é‡
    this.loading = null;   // Loadingå®ä¾‹
  }
  
  // æ˜¾ç¤ºLoading
  showLoading() {
    if (this.loadingCount === 0) {
      this.loading = Loading.service({
        text: 'åŠ è½½ä¸­...',
        background: 'rgba(0, 0, 0, 0.7)'
      });
    }
    this.loadingCount++;
  }
  
  // éšè—Loading
  hideLoading() {
    this.loadingCount--;
    if (this.loadingCount <= 0) {
      this.loadingCount = 0;
      this.loading?.close();
      this.loading = null;
    }
  }
}

const loadingManager = new LoadingManager();

// åœ¨æ‹¦æˆªå™¨ä¸­ä½¿ç”¨
api.interceptors.request.use(config => {
  // è¯·æ±‚å¼€å§‹ï¼Œæ˜¾ç¤ºLoading
  loadingManager.showLoading();
  return config;
});

api.interceptors.response.use(
  response => {
    // è¯·æ±‚æˆåŠŸï¼Œéšè—Loading
    loadingManager.hideLoading();
    return response;
  },
  error => {
    // è¯·æ±‚å¤±è´¥ï¼Œä¹Ÿè¦éšè—Loading
    loadingManager.hideLoading();
    return Promise.reject(error);
  }
);
```

### 4.3 æ™ºèƒ½Loadingæ§åˆ¶

```javascript
// æ”¯æŒç¦ç”¨Loadingçš„è¯·æ±‚
const api = {
  get(url, config = {}) {
    const { hideLoading = false, ...otherConfig } = config;
    
    return axios.get(url, {
      ...otherConfig,
      hideLoading // ä¼ é€’ç»™æ‹¦æˆªå™¨
    });
  }
};

// æ‹¦æˆªå™¨ä¸­åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºLoading
api.interceptors.request.use(config => {
  if (!config.hideLoading) {
    loadingManager.showLoading();
  }
  return config;
});
```

**ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹**
```javascript
// æ™®é€šè¯·æ±‚ï¼Œæ˜¾ç¤ºLoading
api.get('/api/users');

// è½®è¯¢è¯·æ±‚ï¼Œä¸æ˜¾ç¤ºLoading
api.get('/api/status', { hideLoading: true });
```

---

## 5. ğŸ›‘ è¯·æ±‚å–æ¶ˆæœºåˆ¶


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦å–æ¶ˆè¯·æ±‚

**å®é™…åœºæ™¯**ï¼š
```
åœºæ™¯1: ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢é¡µé¢ï¼Œä¸Šä¸ªé¡µé¢çš„è¯·æ±‚è¿˜åœ¨è¿›è¡Œ
åœºæ™¯2: ç”¨æˆ·é‡å¤ç‚¹å‡»æŒ‰é’®ï¼Œå‘èµ·å¤šä¸ªç›¸åŒè¯·æ±‚
åœºæ™¯3: æœç´¢æ—¶ç”¨æˆ·å¿«é€Ÿè¾“å…¥ï¼Œéœ€è¦å–æ¶ˆä¹‹å‰çš„æœç´¢
```

**ğŸ”¸ ä¸å–æ¶ˆè¯·æ±‚çš„é—®é¢˜**
```
âŒ æµªè´¹ç½‘ç»œèµ„æº
âŒ å¯èƒ½å‡ºç°æ•°æ®é”™ä¹±
âŒ å½±å“ç”¨æˆ·ä½“éªŒ
âŒ å†…å­˜æ³„æ¼é£é™©
```

### 5.2 CancelTokenä½¿ç”¨æ–¹æ³•

```javascript
// æ–¹æ³•1: ä½¿ç”¨axios.CancelToken.source()
const cancelTokenSource = axios.CancelToken.source();

axios.get('/api/data', {
  cancelToken: cancelTokenSource.token
}).catch(error => {
  if (axios.isCancel(error)) {
    console.log('è¯·æ±‚è¢«å–æ¶ˆ:', error.message);
  }
});

// å–æ¶ˆè¯·æ±‚
cancelTokenSource.cancel('ç”¨æˆ·å–æ¶ˆäº†è¯·æ±‚');
```

### 5.3 å®é™…åº”ç”¨åœºæ™¯

**ğŸ”¸ æœç´¢é˜²æŠ– + è¯·æ±‚å–æ¶ˆ**
```javascript
// æœç´¢ç»„ä»¶
export default {
  data() {
    return {
      keyword: '',
      cancelTokenSource: null
    };
  },
  
  watch: {
    keyword: {
      handler: 'handleSearch',
      immediate: true
    }
  },
  
  methods: {
    async handleSearch() {
      // å–æ¶ˆä¹‹å‰çš„è¯·æ±‚
      if (this.cancelTokenSource) {
        this.cancelTokenSource.cancel('æ–°çš„æœç´¢å¼€å§‹');
      }
      
      // åˆ›å»ºæ–°çš„å–æ¶ˆä»¤ç‰Œ
      this.cancelTokenSource = axios.CancelToken.source();
      
      try {
        const result = await api.get('/api/search', {
          params: { keyword: this.keyword },
          cancelToken: this.cancelTokenSource.token
        });
        
        this.searchResults = result;
      } catch (error) {
        if (!axios.isCancel(error)) {
          console.error('æœç´¢å¤±è´¥:', error);
        }
      }
    }
  },
  
  beforeDestroy() {
    // ç»„ä»¶é”€æ¯æ—¶å–æ¶ˆè¯·æ±‚
    if (this.cancelTokenSource) {
      this.cancelTokenSource.cancel('ç»„ä»¶å·²é”€æ¯');
    }
  }
};
```

### 5.4 å…¨å±€è¯·æ±‚ç®¡ç†

```javascript
// è¯·æ±‚ç®¡ç†å™¨
class RequestManager {
  constructor() {
    this.pendingRequests = new Map(); // å­˜å‚¨è¿›è¡Œä¸­çš„è¯·æ±‚
  }
  
  // æ·»åŠ è¯·æ±‚
  addRequest(config) {
    const requestKey = this.getRequestKey(config);
    
    // å¦‚æœå·²æœ‰ç›¸åŒè¯·æ±‚ï¼Œå–æ¶ˆä¹‹å‰çš„
    if (this.pendingRequests.has(requestKey)) {
      this.pendingRequests.get(requestKey).cancel('é‡å¤è¯·æ±‚');
    }
    
    // åˆ›å»ºæ–°çš„å–æ¶ˆä»¤ç‰Œ
    const cancelTokenSource = axios.CancelToken.source();
    config.cancelToken = cancelTokenSource.token;
    
    // å­˜å‚¨è¯·æ±‚
    this.pendingRequests.set(requestKey, cancelTokenSource);
    
    return config;
  }
  
  // ç§»é™¤è¯·æ±‚
  removeRequest(config) {
    const requestKey = this.getRequestKey(config);
    this.pendingRequests.delete(requestKey);
  }
  
  // ç”Ÿæˆè¯·æ±‚å”¯ä¸€æ ‡è¯†
  getRequestKey(config) {
    return `${config.method}-${config.url}-${JSON.stringify(config.params)}`;
  }
  
  // å–æ¶ˆæ‰€æœ‰è¯·æ±‚
  cancelAllRequests() {
    this.pendingRequests.forEach(source => {
      source.cancel('æ‰¹é‡å–æ¶ˆ');
    });
    this.pendingRequests.clear();
  }
}

const requestManager = new RequestManager();

// åœ¨æ‹¦æˆªå™¨ä¸­ä½¿ç”¨
api.interceptors.request.use(config => {
  return requestManager.addRequest(config);
});

api.interceptors.response.use(
  response => {
    requestManager.removeRequest(response.config);
    return response;
  },
  error => {
    if (!axios.isCancel(error)) {
      requestManager.removeRequest(error.config);
    }
    return Promise.reject(error);
  }
);
```

---

## 6. ğŸ“¦ APIæ¥å£ç»Ÿä¸€å°è£…


### 6.1 ä¸ºä»€ä¹ˆè¦ç»Ÿä¸€å°è£…API

**é—®é¢˜åˆ†æ**ï¼š
```
âŒ æ²¡æœ‰å°è£…çš„é—®é¢˜ï¼š
- URLåˆ†æ•£åœ¨å„ä¸ªç»„ä»¶ä¸­
- è¯·æ±‚æ–¹å¼ä¸ç»Ÿä¸€
- å‚æ•°å¤„ç†é‡å¤
- ç»´æŠ¤å›°éš¾

âœ… ç»Ÿä¸€å°è£…çš„å¥½å¤„ï¼š
- APIé›†ä¸­ç®¡ç†
- ç»Ÿä¸€çš„è°ƒç”¨æ–¹å¼
- ä¾¿äºç»´æŠ¤å’Œä¿®æ”¹
- ç±»å‹æç¤ºå‹å¥½
```

### 6.2 APIå°è£…åŸºç¡€ç»“æ„

```javascript
// api/request.js - åŸºç¡€è¯·æ±‚é…ç½®
import axios from 'axios';

const api = axios.create({
  baseURL: process.env.VUE_APP_API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json'
  }
});

// æ·»åŠ æ‹¦æˆªå™¨
api.interceptors.request.use(/* ... */);
api.interceptors.response.use(/* ... */);

export default api;
```

### 6.3 æ¨¡å—åŒ–APIç®¡ç†

```javascript
// api/modules/user.js - ç”¨æˆ·ç›¸å…³API
import api from '../request';

export const userAPI = {
  // ç”¨æˆ·ç™»å½•
  login(data) {
    return api.post('/auth/login', data);
  },
  
  // è·å–ç”¨æˆ·ä¿¡æ¯
  getUserInfo() {
    return api.get('/user/info');
  },
  
  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  updateUserInfo(data) {
    return api.put('/user/info', data);
  },
  
  // ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
  getUserList(params = {}) {
    return api.get('/users', { params });
  }
};

// api/modules/product.js - äº§å“ç›¸å…³API
import api from '../request';

export const productAPI = {
  // äº§å“åˆ—è¡¨
  getProductList(params) {
    return api.get('/products', { params });
  },
  
  // äº§å“è¯¦æƒ…
  getProductDetail(id) {
    return api.get(`/products/${id}`);
  },
  
  // åˆ›å»ºäº§å“
  createProduct(data) {
    return api.post('/products', data);
  }
};
```

### 6.4 ç»Ÿä¸€å¯¼å‡ºç®¡ç†

```javascript
// api/index.js - ç»Ÿä¸€å¯¼å‡º
export { userAPI } from './modules/user';
export { productAPI } from './modules/product';

// æˆ–è€…ä½¿ç”¨å‘½åç©ºé—´
export default {
  user: userAPI,
  product: productAPI
};
```

**ğŸ’¡ ç»„ä»¶ä¸­çš„ä½¿ç”¨**
```javascript
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { userAPI, productAPI } from '@/api';

export default {
  async mounted() {
    try {
      // è·å–ç”¨æˆ·ä¿¡æ¯
      const userInfo = await userAPI.getUserInfo();
      
      // è·å–äº§å“åˆ—è¡¨
      const products = await productAPI.getProductList({
        page: 1,
        size: 10
      });
      
      this.userInfo = userInfo;
      this.products = products;
    } catch (error) {
      // é”™è¯¯å·²åœ¨æ‹¦æˆªå™¨ä¸­å¤„ç†
      console.error('æ•°æ®åŠ è½½å¤±è´¥:', error);
    }
  }
};
```

---

## 7. ğŸ”§ è¯·æ±‚æ–¹æ³•ç»Ÿä¸€ç®¡ç†


### 7.1 å°è£…é€šç”¨è¯·æ±‚æ–¹æ³•

```javascript
// utils/request.js - é€šç”¨è¯·æ±‚å·¥å…·
class APIClient {
  constructor(baseConfig = {}) {
    this.instance = axios.create(baseConfig);
    this.setupInterceptors();
  }
  
  // è®¾ç½®æ‹¦æˆªå™¨
  setupInterceptors() {
    // è¯·æ±‚æ‹¦æˆªå™¨
    this.instance.interceptors.request.use(/* ... */);
    // å“åº”æ‹¦æˆªå™¨
    this.instance.interceptors.response.use(/* ... */);
  }
  
  // GETè¯·æ±‚
  get(url, config = {}) {
    return this.instance.get(url, config);
  }
  
  // POSTè¯·æ±‚
  post(url, data = {}, config = {}) {
    return this.instance.post(url, data, config);
  }
  
  // PUTè¯·æ±‚
  put(url, data = {}, config = {}) {
    return this.instance.put(url, data, config);
  }
  
  // DELETEè¯·æ±‚
  delete(url, config = {}) {
    return this.instance.delete(url, config);
  }
  
  // æ–‡ä»¶ä¸Šä¼ 
  upload(url, file, config = {}) {
    const formData = new FormData();
    formData.append('file', file);
    
    return this.instance.post(url, formData, {
      ...config,
      headers: {
        'Content-Type': 'multipart/form-data',
        ...config.headers
      }
    });
  }
  
  // ä¸‹è½½æ–‡ä»¶
  download(url, config = {}) {
    return this.instance.get(url, {
      ...config,
      responseType: 'blob'
    });
  }
}

// åˆ›å»ºé»˜è®¤å®ä¾‹
export default new APIClient({
  baseURL: process.env.VUE_APP_API_BASE_URL,
  timeout: 10000
});
```

### 7.2 RESTful APIå°è£…

```javascript
// é€šç”¨CRUDæ“ä½œå°è£…
class ResourceAPI {
  constructor(resource, apiClient) {
    this.resource = resource;
    this.api = apiClient;
  }
  
  // è·å–åˆ—è¡¨
  list(params = {}) {
    return this.api.get(`/${this.resource}`, { params });
  }
  
  // è·å–è¯¦æƒ…
  detail(id) {
    return this.api.get(`/${this.resource}/${id}`);
  }
  
  // åˆ›å»º
  create(data) {
    return this.api.post(`/${this.resource}`, data);
  }
  
  // æ›´æ–°
  update(id, data) {
    return this.api.put(`/${this.resource}/${id}`, data);
  }
  
  // åˆ é™¤
  delete(id) {
    return this.api.delete(`/${this.resource}/${id}`);
  }
}

// åˆ›å»ºèµ„æºAPI
const userResource = new ResourceAPI('users', apiClient);
const productResource = new ResourceAPI('products', apiClient);

// ä½¿ç”¨ç¤ºä¾‹
export const userAPI = {
  ...userResource,
  
  // é¢å¤–çš„ç”¨æˆ·ç›¸å…³æ–¹æ³•
  login(credentials) {
    return this.api.post('/auth/login', credentials);
  },
  
  logout() {
    return this.api.post('/auth/logout');
  }
};
```

### 7.3 è¯·æ±‚å‚æ•°æ ‡å‡†åŒ–

```javascript
// å‚æ•°å¤„ç†å·¥å…·
const formatParams = {
  // åˆ†é¡µå‚æ•°æ ‡å‡†åŒ–
  pagination(page = 1, size = 10, params = {}) {
    return {
      page,
      size,
      ...params
    };
  },
  
  // æ’åºå‚æ•°æ ‡å‡†åŒ–
  sort(field, order = 'asc', params = {}) {
    return {
      ...params,
      sortField: field,
      sortOrder: order
    };
  },
  
  // æœç´¢å‚æ•°æ ‡å‡†åŒ–
  search(keyword, params = {}) {
    return {
      ...params,
      keyword: keyword?.trim()
    };
  }
};

// åœ¨APIä¸­ä½¿ç”¨
export const productAPI = {
  // è·å–äº§å“åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€æ’åºã€æœç´¢ï¼‰
  getList(options = {}) {
    const { page, size, sortField, sortOrder, keyword, ...others } = options;
    
    let params = formatParams.pagination(page, size, others);
    
    if (sortField) {
      params = formatParams.sort(sortField, sortOrder, params);
    }
    
    if (keyword) {
      params = formatParams.search(keyword, params);
    }
    
    return api.get('/products', { params });
  }
};
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ

```
ğŸ”¸ è¯·æ±‚æ‹¦æˆªå™¨ï¼šå‘è¯·æ±‚å‰çš„ç»Ÿä¸€å¤„ç†ï¼Œå¦‚æ·»åŠ tokenã€è®¾ç½®è¯·æ±‚å¤´
ğŸ”¸ å“åº”æ‹¦æˆªå™¨ï¼šæ”¶åˆ°å“åº”åçš„ç»Ÿä¸€å¤„ç†ï¼Œå¦‚æ•°æ®æ ¼å¼åŒ–ã€é”™è¯¯å¤„ç†
ğŸ”¸ ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼šé›†ä¸­å¤„ç†å„ç§é”™è¯¯æƒ…å†µï¼Œæå‡ç”¨æˆ·ä½“éªŒ
ğŸ”¸ Loadingç®¡ç†ï¼šè‡ªåŠ¨æ˜¾ç¤º/éšè—åŠ è½½çŠ¶æ€ï¼Œé˜²æ­¢ç”¨æˆ·é‡å¤æ“ä½œ
ğŸ”¸ è¯·æ±‚å–æ¶ˆï¼šé¿å…æ— æ•ˆè¯·æ±‚ï¼Œé˜²æ­¢æ•°æ®é”™ä¹±å’Œèµ„æºæµªè´¹
ğŸ”¸ APIå°è£…ï¼šæ¨¡å—åŒ–ç®¡ç†æ¥å£ï¼Œä¾¿äºç»´æŠ¤å’Œå¤ç”¨
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœº**
```
è¯·æ±‚æµç¨‹ï¼š
ç»„ä»¶å‘èµ·è¯·æ±‚ â†’ è¯·æ±‚æ‹¦æˆªå™¨ â†’ å‘é€åˆ°æœåŠ¡å™¨ â†’ å“åº”æ‹¦æˆªå™¨ â†’ ç»„ä»¶æ¥æ”¶æ•°æ®

ç†è§£è¦ç‚¹ï¼š
- è¯·æ±‚æ‹¦æˆªå™¨ï¼šè¯·æ±‚å‘å‡ºå‰æœ€åçš„å¤„ç†æœºä¼š
- å“åº”æ‹¦æˆªå™¨ï¼šæ•°æ®åˆ°è¾¾ç»„ä»¶å‰çš„é¢„å¤„ç†
- éƒ½æ˜¯å…¨å±€æ€§çš„ï¼Œä¸€æ¬¡é…ç½®ï¼Œå…¨å±€ç”Ÿæ•ˆ
```

**ğŸ”¹ é”™è¯¯å¤„ç†çš„å±‚æ¬¡æ€§**
```
é”™è¯¯å¤„ç†å±‚æ¬¡ï¼š
ç½‘ç»œå±‚é”™è¯¯ â†’ å“åº”æ‹¦æˆªå™¨å¤„ç†
ä¸šåŠ¡å±‚é”™è¯¯ â†’ å“åº”æ‹¦æˆªå™¨ + ç»„ä»¶å¤„ç†
ç”¨æˆ·äº¤äº’é”™è¯¯ â†’ ç»„ä»¶å¤„ç†

è®¾è®¡åŸåˆ™ï¼š
- é€šç”¨é”™è¯¯å…¨å±€å¤„ç†
- ç‰¹æ®Šé”™è¯¯å±€éƒ¨å¤„ç†
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼

- **å¼€å‘æ•ˆç‡**ï¼šç»Ÿä¸€å¤„ç†å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡
- **ç”¨æˆ·ä½“éªŒ**ï¼šLoadingçŠ¶æ€ã€é”™è¯¯æç¤ºæå‡ç”¨æˆ·ä½“éªŒ
- **ç³»ç»Ÿç¨³å®š**ï¼šè¯·æ±‚å–æ¶ˆã€é”™è¯¯å¤„ç†æé«˜ç³»ç»Ÿç¨³å®šæ€§
- **ç»´æŠ¤æ€§**ï¼šAPIå°è£…ä½¿æ¥å£ç®¡ç†æ›´åŠ æ¸…æ™°æ˜“ç»´æŠ¤

### 8.4 æœ€ä½³å®è·µå»ºè®®

```
ğŸ”¹ æ‹¦æˆªå™¨é…ç½®ï¼š
- è¯·æ±‚æ‹¦æˆªå™¨ä¸“æ³¨äºè¯·æ±‚é¢„å¤„ç†
- å“åº”æ‹¦æˆªå™¨ä¸“æ³¨äºå“åº”åå¤„ç†
- é¿å…åœ¨æ‹¦æˆªå™¨ä¸­å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘

ğŸ”¹ é”™è¯¯å¤„ç†ç­–ç•¥ï¼š
- ç½‘ç»œé”™è¯¯å…¨å±€æç¤º
- è®¤è¯é”™è¯¯è‡ªåŠ¨è·³è½¬
- ä¸šåŠ¡é”™è¯¯æ ¹æ®æƒ…å†µå¤„ç†

ğŸ”¹ APIç»„ç»‡æ–¹å¼ï¼š
- æŒ‰ä¸šåŠ¡æ¨¡å—åˆ’åˆ†APIæ–‡ä»¶
- ä½¿ç”¨ç»Ÿä¸€çš„å‘½åè§„èŒƒ
- æä¾›å®Œæ•´çš„ç±»å‹æç¤º

ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ï¼š
- åˆç†ä½¿ç”¨è¯·æ±‚å–æ¶ˆ
- é¿å…é‡å¤è¯·æ±‚
- é€‚å½“çš„Loadingæ§åˆ¶
```

**ğŸ’¡ æ ¸å¿ƒè®°å¿†**ï¼š
- **æ‹¦æˆªå™¨**æ˜¯è¯·æ±‚çš„"é—¨å«"ï¼Œç»Ÿä¸€æ£€æŸ¥å’Œå¤„ç†
- **é”™è¯¯å¤„ç†**è¦åˆ†å±‚ï¼Œé€šç”¨çš„å…¨å±€å¤„ç†ï¼Œç‰¹æ®Šçš„å±€éƒ¨å¤„ç†  
- **APIå°è£…**æŒ‰æ¨¡å—ç»„ç»‡ï¼Œä¾¿äºç»´æŠ¤å’Œå¤ç”¨
- **ç”¨æˆ·ä½“éªŒ**æ˜¯å…³é”®ï¼ŒLoadingå’Œé”™è¯¯æç¤ºè¦åšå¥½