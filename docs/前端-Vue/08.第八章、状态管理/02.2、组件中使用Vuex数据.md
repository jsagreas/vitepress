---
title: 2ã€ç»„ä»¶ä¸­ä½¿ç”¨Vuexæ•°æ®
---
## ğŸ“š ç›®å½•

1. [Vuexæ•°æ®è®¿é—®åŸºç¡€](#1-Vuexæ•°æ®è®¿é—®åŸºç¡€)
2. [çŠ¶æ€æ“ä½œçš„æ ¸å¿ƒæ–¹æ³•](#2-çŠ¶æ€æ“ä½œçš„æ ¸å¿ƒæ–¹æ³•)
3. [è¾…åŠ©å‡½æ•°ç®€åŒ–å¼€å‘](#3-è¾…åŠ©å‡½æ•°ç®€åŒ–å¼€å‘)
4. [å‘½åç©ºé—´å¤„ç†æŠ€å·§](#4-å‘½åç©ºé—´å¤„ç†æŠ€å·§)
5. [ç»„ä»¶ä¸Storeè¿æ¥æœ€ä½³å®è·µ](#5-ç»„ä»¶ä¸Storeè¿æ¥æœ€ä½³å®è·µ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Vuexæ•°æ®è®¿é—®åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯ç»„ä»¶ä¸­ä½¿ç”¨Vuexæ•°æ®


ğŸŒ° **ç”Ÿæ´»ç±»æ¯”**: Vuexå°±åƒå®¶é‡Œçš„**å…¬å…±å‚¨ç‰©æŸœ**ï¼Œæ‰€æœ‰å®¶åº­æˆå‘˜ï¼ˆç»„ä»¶ï¼‰éƒ½å¯ä»¥å­˜å–ç‰©å“ï¼ˆæ•°æ®ï¼‰ã€‚è€Œç»„ä»¶ä½¿ç”¨Vuexæ•°æ®ï¼Œå°±æ˜¯å­¦ä¼šå¦‚ä½•**æ­£ç¡®åœ°**ä»å‚¨ç‰©æŸœå–ä¸œè¥¿ã€æ”¾ä¸œè¥¿ã€‚

**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µ**
```
ç»„ä»¶ â† è¯»å–æ•°æ® â† StoreçŠ¶æ€åº“
ç»„ä»¶ â†’ ä¿®æ”¹è¯·æ±‚ â†’ StoreçŠ¶æ€åº“
```

### 1.2 åŸºæœ¬è®¿é—®æ–¹å¼ - $store.state


**ğŸ’¡ æœ€ç›´æ¥çš„æ–¹å¼**: é€šè¿‡`$store.state`ç›´æ¥è®¿é—®çŠ¶æ€æ•°æ®

```vue
<template>
  <div>
    <!-- ç›´æ¥åœ¨æ¨¡æ¿ä¸­è®¿é—® -->
    <h3>ç”¨æˆ·åï¼š{{ $store.state.user.name }}</h3>
    <p>è´­ç‰©è½¦å•†å“æ•°ï¼š{{ $store.state.cart.items.length }}</p>
  </div>
</template>

<script>
export default {
  computed: {
    // åœ¨è®¡ç®—å±æ€§ä¸­è®¿é—®
    userName() {
      return this.$store.state.user.name
    },
    cartCount() {
      return this.$store.state.cart.items.length
    }
  }
}
</script>
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> - çŠ¶æ€æ•°æ®è¦åœ¨`computed`ä¸­è®¿é—®ï¼Œä¸è¦åœ¨`data`ä¸­è®¿é—®
> - è¿™æ ·æ‰èƒ½ä¿è¯æ•°æ®çš„å“åº”å¼æ›´æ–°

---

## 2. âš™ï¸ çŠ¶æ€æ“ä½œçš„æ ¸å¿ƒæ–¹æ³•


### 2.1 åŒæ­¥ä¿®æ”¹ - commitè°ƒç”¨mutations


**ğŸ”¸ ä»€ä¹ˆæ˜¯commit**: å°±æ˜¯å‘Šè¯‰Store"æˆ‘è¦ä¿®æ”¹æ•°æ®äº†"ï¼Œå¿…é¡»é€šè¿‡æ­£å½“é€”å¾„

```vue
<template>
  <div>
    <button @click="addToCart">åŠ å…¥è´­ç‰©è½¦</button>
    <button @click="updateUserName">æ›´æ–°ç”¨æˆ·å</button>
  </div>
</template>

<script>
export default {
  methods: {
    addToCart() {
      // commitçš„åŸºæœ¬è¯­æ³•ï¼šthis.$store.commit('æ–¹æ³•å', å‚æ•°)
      this.$store.commit('ADD_TO_CART', {
        id: 1,
        name: 'å•†å“A',
        price: 99
      })
    },
    
    updateUserName() {
      this.$store.commit('SET_USER_NAME', 'æ–°ç”¨æˆ·å')
    }
  }
}
</script>
```

ğŸ§  **è®°å¿†å£è¯€**: "åŒæ­¥ä¿®æ”¹ç”¨commitï¼Œmutationsæ¥å¤„ç†"

### 2.2 å¼‚æ­¥æ“ä½œ - dispatchè°ƒç”¨actions


**ğŸ”¸ ä»€ä¹ˆæ˜¯dispatch**: å¤„ç†å¤æ‚çš„å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ç­‰

```vue
<script>
export default {
  methods: {
    async loadUserData() {
      try {
        // dispatchç”¨äºå¼‚æ­¥æ“ä½œ
        await this.$store.dispatch('fetchUserInfo', { userId: 123 })
        this.$message.success('ç”¨æˆ·ä¿¡æ¯åŠ è½½æˆåŠŸ')
      } catch (error) {
        this.$message.error('åŠ è½½å¤±è´¥')
      }
    },
    
    // ä¸éœ€è¦ç­‰å¾…ç»“æœçš„å¼‚æ­¥æ“ä½œ
    saveUserPreference() {
      this.$store.dispatch('savePreference', {
        theme: 'dark',
        language: 'zh-CN'
      })
    }
  }
}
</script>
```

**ğŸ“Š æ“ä½œæ–¹å¼å¯¹æ¯”**

| æ“ä½œç±»å‹ | **ä½¿ç”¨æ–¹æ³•** | **é€‚ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|---------|------------|-------------|---------|
| ğŸ”¸ **è¯»å–æ•°æ®** | `$store.state` | `è·å–çŠ¶æ€å€¼` | `$store.state.user.name` |
| ğŸ”¸ **åŒæ­¥ä¿®æ”¹** | `$store.commit` | `ç›´æ¥ä¿®æ”¹çŠ¶æ€` | `commit('SET_NAME', name)` |
| ğŸ”¸ **å¼‚æ­¥æ“ä½œ** | `$store.dispatch` | `ç½‘ç»œè¯·æ±‚ã€å¤æ‚é€»è¾‘` | `dispatch('fetchData')` |

---

## 3. ğŸš€ è¾…åŠ©å‡½æ•°ç®€åŒ–å¼€å‘


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦è¾…åŠ©å‡½æ•°


**ğŸ¤” é—®é¢˜**: æ¯æ¬¡éƒ½å†™`this.$store.state.xxx`å¤ªç¹çäº†ï¼Œæœ‰æ²¡æœ‰ç®€åŒ–æ–¹æ³•ï¼Ÿ

**ğŸ’¡ è§£å†³æ–¹æ¡ˆ**: Vuexæä¾›äº†è¾…åŠ©å‡½æ•°ï¼Œè®©ä»£ç æ›´ç®€æ´

### 3.2 mapState - ç®€åŒ–çŠ¶æ€è®¿é—®


```vue
<template>
  <div>
    <!-- ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦$store.state -->
    <h3>{{ userName }}</h3>
    <p>è´­ç‰©è½¦ï¼š{{ cartCount }}ä»¶å•†å“</p>
  </div>
</template>

<script>
import { mapState } from 'vuex'

export default {
  computed: {
    // æ–¹å¼1ï¼šæ•°ç»„å†™æ³• - ç›´æ¥æ˜ å°„
    ...mapState(['userName', 'cartCount']),
    
    // æ–¹å¼2ï¼šå¯¹è±¡å†™æ³• - é‡å‘½åæ˜ å°„
    ...mapState({
      user: 'userName',          // é‡å‘½å
      count: 'cartCount',        // é‡å‘½å
      fullInfo: state => {       // è‡ªå®šä¹‰é€»è¾‘
        return `${state.userName}(${state.cartCount})`
      }
    })
  }
}
</script>
```

ğŸŒŸ **è§£æ„ç”¨æ³•çš„å¦™å¤„**: `...mapState()`è¿™ä¸ªä¸‰ä¸ªç‚¹å«"å±•å¼€è¿ç®—ç¬¦"ï¼ŒæŠŠmapStateè¿”å›çš„å¯¹è±¡"æ‘Šå¼€"åˆ°computedé‡Œ

### 3.3 mapGetters - ç®€åŒ–è®¡ç®—å±æ€§è®¿é—®


```vue
<script>
import { mapGetters } from 'vuex'

export default {
  computed: {
    // ç›´æ¥æ˜ å°„getters
    ...mapGetters([
      'totalPrice',        // æ€»ä»·æ ¼
      'discountAmount',    // æŠ˜æ‰£é‡‘é¢
      'finalPrice'         // æœ€ç»ˆä»·æ ¼
    ]),
    
    // é‡å‘½åæ˜ å°„
    ...mapGetters({
      total: 'totalPrice',
      discount: 'discountAmount'
    })
  }
}
</script>
```

### 3.4 mapMutations - ç®€åŒ–åŒæ­¥æ“ä½œ


```vue
<template>
  <div>
    <!-- ç°åœ¨æ–¹æ³•è°ƒç”¨æ›´ç®€æ´ -->
    <button @click="addToCart(product)">åŠ å…¥è´­ç‰©è½¦</button>
    <button @click="removeFromCart(productId)">ç§»é™¤å•†å“</button>
  </div>
</template>

<script>
import { mapMutations } from 'vuex'

export default {
  methods: {
    // ç›´æ¥æ˜ å°„mutations
    ...mapMutations([
      'ADD_TO_CART',
      'REMOVE_FROM_CART'
    ]),
    
    // é‡å‘½åæ˜ å°„
    ...mapMutations({
      addToCart: 'ADD_TO_CART',
      removeFromCart: 'REMOVE_FROM_CART'
    })
  }
}
</script>
```

### 3.5 mapActions - ç®€åŒ–å¼‚æ­¥æ“ä½œ


```vue
<script>
import { mapActions } from 'vuex'

export default {
  methods: {
    // ç›´æ¥æ˜ å°„actions
    ...mapActions([
      'fetchUserInfo',
      'updateProfile',
      'logout'
    ]),
    
    // é‡å‘½åæ˜ å°„
    ...mapActions({
      loadUser: 'fetchUserInfo',
      saveProfile: 'updateProfile'
    }),
    
    // ä½¿ç”¨ç¤ºä¾‹
    async handleLogin() {
      try {
        await this.fetchUserInfo({ userId: 123 })
        this.$router.push('/dashboard')
      } catch (error) {
        console.error('ç™»å½•å¤±è´¥', error)
      }
    }
  }
}
</script>
```

### 3.6 ç»„åˆä½¿ç”¨è¾…åŠ©å‡½æ•°


```vue
<script>
import { mapState, mapGetters, mapMutations, mapActions } from 'vuex'

export default {
  computed: {
    // çŠ¶æ€æ•°æ®
    ...mapState(['user', 'cart']),
    // è®¡ç®—å±æ€§
    ...mapGetters(['totalPrice', 'itemCount'])
  },
  
  methods: {
    // åŒæ­¥æ“ä½œ
    ...mapMutations(['ADD_ITEM', 'REMOVE_ITEM']),
    // å¼‚æ­¥æ“ä½œ
    ...mapActions(['fetchProducts', 'submitOrder'])
  }
}
</script>
```

---

## 4. ğŸ·ï¸ å‘½åç©ºé—´å¤„ç†æŠ€å·§


### 4.1 ä»€ä¹ˆæ˜¯å‘½åç©ºé—´


ğŸŒ° **ç”Ÿæ´»ç±»æ¯”**: å°±åƒå…¬å¸é‡Œä¸åŒéƒ¨é—¨æœ‰è‡ªå·±çš„æ–‡ä»¶æŸœï¼Œé¿å…æ–‡ä»¶åå†²çªã€‚

```javascript
// store/modules/user.js
export default {
  namespaced: true,  // å¼€å¯å‘½åç©ºé—´
  state: {
    name: '',
    email: ''
  },
  mutations: {
    SET_NAME(state, name) {
      state.name = name
    }
  }
}

// store/modules/product.js  
export default {
  namespaced: true,
  state: {
    list: [],
    loading: false
  },
  actions: {
    fetchList({ commit }) {
      // è·å–äº§å“åˆ—è¡¨
    }
  }
}
```

### 4.2 è®¿é—®å‘½åç©ºé—´çš„æ•°æ®


```vue
<script>
export default {
  computed: {
    // æ–¹å¼1ï¼šç›´æ¥è®¿é—®
    userName() {
      return this.$store.state.user.name
    },
    
    // æ–¹å¼2ï¼šä½¿ç”¨è¾…åŠ©å‡½æ•°
    ...mapState('user', ['name', 'email']),
    ...mapState('product', ['list', 'loading'])
  },
  
  methods: {
    // æ–¹å¼1ï¼šç›´æ¥è°ƒç”¨
    updateName() {
      this.$store.commit('user/SET_NAME', 'æ–°åå­—')
    },
    
    // æ–¹å¼2ï¼šä½¿ç”¨è¾…åŠ©å‡½æ•°
    ...mapMutations('user', ['SET_NAME']),
    ...mapActions('product', ['fetchList'])
  }
}
</script>
```

### 4.3 å‘½åç©ºé—´çš„æœ€ä½³å®è·µ


**ğŸ”¸ æ¨èçš„æ¨¡å—åˆ’åˆ†æ–¹å¼**
```
store/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ user.js      // ç”¨æˆ·ç›¸å…³
â”‚   â”œâ”€â”€ product.js   // äº§å“ç›¸å…³  
â”‚   â”œâ”€â”€ cart.js      // è´­ç‰©è½¦ç›¸å…³
â”‚   â””â”€â”€ order.js     // è®¢å•ç›¸å…³
â””â”€â”€ index.js         // ä¸»storeæ–‡ä»¶
```

**ğŸ”¸ è¾…åŠ©å‡½æ•°çš„é«˜æ•ˆç”¨æ³•**
```vue
<script>
import { createNamespacedHelpers } from 'vuex'

// åˆ›å»ºç‰¹å®šå‘½åç©ºé—´çš„è¾…åŠ©å‡½æ•°
const { mapState, mapActions } = createNamespacedHelpers('user')

export default {
  computed: {
    // ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å†æŒ‡å®šå‘½åç©ºé—´
    ...mapState(['name', 'email', 'avatar'])
  },
  
  methods: {
    ...mapActions(['login', 'logout', 'updateProfile'])
  }
}
</script>
```

---

## 5. ğŸ¯ ç»„ä»¶ä¸Storeè¿æ¥æœ€ä½³å®è·µ


### 5.1 å•ä¸€èŒè´£åŸåˆ™


**âœ… æ¨èåšæ³•**: æ¯ä¸ªç»„ä»¶åªå…³æ³¨è‡ªå·±éœ€è¦çš„æ•°æ®

```vue
<!-- ç”¨æˆ·ä¿¡æ¯ç»„ä»¶ -->
<script>
import { mapState, mapActions } from 'vuex'

export default {
  name: 'UserProfile',
  computed: {
    // åªæ˜ å°„ç”¨æˆ·ç›¸å…³çš„çŠ¶æ€
    ...mapState('user', ['name', 'email', 'avatar'])
  },
  methods: {
    // åªæ˜ å°„ç”¨æˆ·ç›¸å…³çš„æ“ä½œ
    ...mapActions('user', ['updateProfile', 'uploadAvatar'])
  }
}
</script>
```

### 5.2 æ•°æ®æµå‘æ¸…æ™°


```
ç»„ä»¶éœ€è¦æ•°æ® â†’ ä»Storeè¯»å– â†’ å±•ç¤ºç»™ç”¨æˆ·
ç”¨æˆ·æ“ä½œ â†’ è§¦å‘Action â†’ ä¿®æ”¹Store â†’ æ›´æ–°ç»„ä»¶
```

### 5.3 é”™è¯¯å¤„ç†æ¨¡å¼


```vue
<script>
export default {
  methods: {
    async handleSubmit() {
      this.loading = true
      try {
        await this.updateProfile(this.formData)
        this.$message.success('æ›´æ–°æˆåŠŸ')
      } catch (error) {
        this.$message.error('æ›´æ–°å¤±è´¥ï¼š' + error.message)
      } finally {
        this.loading = false
      }
    }
  }
}
</script>
```

### 5.4 æ€§èƒ½ä¼˜åŒ–æŠ€å·§


**ğŸ”¸ æŒ‰éœ€æ˜ å°„**
```vue
<script>
export default {
  computed: {
    // âœ… å¥½çš„åšæ³•ï¼šåªæ˜ å°„éœ€è¦çš„æ•°æ®
    ...mapState('user', ['name']),
    
    // âŒ é¿å…ï¼šæ˜ å°„æ•´ä¸ªstate
    // ...mapState(['user'])  // ä¼šå¯¼è‡´ä¸å¿…è¦çš„å“åº”å¼æ›´æ–°
  }
}
</script>
```

**ğŸ”¸ è®¡ç®—å±æ€§ç¼“å­˜**
```vue
<script>
export default {
  computed: {
    // åˆ©ç”¨è®¡ç®—å±æ€§çš„ç¼“å­˜ç‰¹æ€§
    expensiveValue() {
      return this.$store.getters.someExpensiveCalculation
    }
  }
}
</script>
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®è®¿é—®ï¼š$store.state.xxx - åœ¨computedä¸­è®¿é—®çŠ¶æ€
ğŸ”¸ åŒæ­¥ä¿®æ”¹ï¼š$store.commit('MUTATION', payload) - ä¿®æ”¹çŠ¶æ€
ğŸ”¸ å¼‚æ­¥æ“ä½œï¼š$store.dispatch('ACTION', payload) - å¤„ç†å¤æ‚é€»è¾‘
ğŸ”¸ è¾…åŠ©å‡½æ•°ï¼šmapState/mapGetters/mapMutations/mapActions - ç®€åŒ–ä»£ç 
ğŸ”¸ å‘½åç©ºé—´ï¼šæ¨¡å—åŒ–ç®¡ç†ï¼Œé¿å…å‘½åå†²çª
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆè¦ç”¨computedè®¿é—®state**
```
åŸå› ï¼šä¿è¯æ•°æ®çš„å“åº”å¼æ›´æ–°
é”™è¯¯ï¼šåœ¨dataä¸­è®¿é—® â†’ ä¸ä¼šè‡ªåŠ¨æ›´æ–°
æ­£ç¡®ï¼šåœ¨computedä¸­è®¿é—® â†’ è‡ªåŠ¨å“åº”å˜åŒ–
```

**ğŸ”¹ commitå’Œdispatchçš„åŒºåˆ«**
```
commitï¼šåŒæ­¥æ“ä½œï¼Œç›´æ¥ä¿®æ”¹state
dispatchï¼šå¼‚æ­¥æ“ä½œï¼Œå¯ä»¥åŒ…å«å¤æ‚é€»è¾‘ã€ç½‘ç»œè¯·æ±‚ç­‰

è®°å¿†ï¼šcommitæ˜¯"ç«‹å³æ‰§è¡Œ"ï¼Œdispatchæ˜¯"æ´¾é£ä»»åŠ¡"
```

**ğŸ”¹ è¾…åŠ©å‡½æ•°çš„æœ¬è´¨**
```
æœ¬è´¨ï¼šå°±æ˜¯è¯­æ³•ç³–ï¼Œè®©ä»£ç æ›´ç®€æ´
ä½œç”¨ï¼šæŠŠåŸæœ¬éœ€è¦this.$store.xxxçš„å†™æ³•ç®€åŒ–
æ ¸å¿ƒï¼š...å±•å¼€è¿ç®—ç¬¦çš„ä½¿ç”¨
```

### 6.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å¼€å‘æ•ˆç‡æå‡**
- å‡å°‘é‡å¤ä»£ç ç¼–å†™
- æé«˜ä»£ç å¯è¯»æ€§
- é™ä½ç»´æŠ¤æˆæœ¬

**ğŸ”§ æœ€ä½³å®è·µåŸåˆ™**
- æŒ‰éœ€æ˜ å°„ï¼Œé¿å…è¿‡åº¦æ˜ å°„
- åˆç†ä½¿ç”¨å‘½åç©ºé—´
- ä¿æŒæ•°æ®æµå‘æ¸…æ™°
- åšå¥½é”™è¯¯å¤„ç†

**ğŸ“ˆ å­¦ä¹ è¿›åº¦æ£€æŸ¥**
- [ ] èƒ½ç”¨`$store.state`è®¿é—®æ•°æ®
- [ ] ç†è§£commitå’Œdispatchçš„åŒºåˆ«  
- [ ] ä¼šä½¿ç”¨mapç³»åˆ—è¾…åŠ©å‡½æ•°
- [ ] æŒæ¡å‘½åç©ºé—´çš„ä½¿ç”¨
- [ ] èƒ½å†™å‡ºæ¸…æ™°çš„ç»„ä»¶ä¸Storeè¿æ¥ä»£ç 

**æ ¸å¿ƒè®°å¿†**ï¼š
- è®¿é—®ç”¨stateï¼Œä¿®æ”¹ç”¨commitï¼Œå¼‚æ­¥ç”¨dispatch
- è¾…åŠ©å‡½æ•°è®©ä»£ç æ›´ç®€æ´ï¼Œå±•å¼€è¿ç®—ç¬¦æ˜¯å…³é”®
- å‘½åç©ºé—´è§£å†³æ¨¡å—å†²çªï¼ŒæŒ‰éœ€æ˜ å°„æå‡æ€§èƒ½
- æ•°æ®æµå‘è¦æ¸…æ™°ï¼Œé”™è¯¯å¤„ç†ä¸èƒ½å¿˜