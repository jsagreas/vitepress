---
title: 1ã€Vuexæ ¸å¿ƒæ¦‚å¿µä¸ç»“æ„
---
## ğŸ“š ç›®å½•

1. [Vuexæ˜¯ä»€ä¹ˆ](#1-Vuexæ˜¯ä»€ä¹ˆ)
2. [Vuexæ ¸å¿ƒæ¦‚å¿µè¯¦è§£](#2-Vuexæ ¸å¿ƒæ¦‚å¿µè¯¦è§£)
3. [Vuexæ•°æ®æµç¨‹](#3-Vuexæ•°æ®æµç¨‹)
4. [å®é™…åº”ç”¨ç¤ºä¾‹](#4-å®é™…åº”ç”¨ç¤ºä¾‹)
5. [çŠ¶æ€ç®¡ç†è®¾è®¡åŸåˆ™](#5-çŠ¶æ€ç®¡ç†è®¾è®¡åŸåˆ™)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸª Vuexæ˜¯ä»€ä¹ˆ


### 1.1 çŠ¶æ€ç®¡ç†çš„éœ€æ±‚èƒŒæ™¯


**ğŸ¤” æ²¡æœ‰çŠ¶æ€ç®¡ç†çš„å›°æ‰°**
```
æƒ³è±¡ä¸€ä¸ªè´­ç‰©ç½‘ç«™ï¼š
- ç”¨æˆ·ä¿¡æ¯ï¼šç™»å½•çŠ¶æ€ã€ä¸ªäººèµ„æ–™
- è´­ç‰©è½¦ï¼šå•†å“æ•°é‡ã€æ€»ä»·
- å•†å“åˆ—è¡¨ï¼šç­›é€‰æ¡ä»¶ã€æ’åºæ–¹å¼

è¿™äº›æ•°æ®éœ€è¦åœ¨å¤šä¸ªé¡µé¢é—´å…±äº«ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å•†å“é¡µ     â”‚    â”‚   è´­ç‰©è½¦é¡µ   â”‚
â”‚ éœ€è¦ç”¨æˆ·ä¿¡æ¯ â”‚    â”‚ éœ€è¦ç”¨æˆ·ä¿¡æ¯ â”‚
â”‚ éœ€è¦è´­ç‰©è½¦   â”‚    â”‚ éœ€è¦å•†å“ä¿¡æ¯ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸ªäººä¸­å¿ƒ   â”‚    â”‚   è®¢å•é¡µ     â”‚
â”‚ éœ€è¦ç”¨æˆ·ä¿¡æ¯ â”‚    â”‚ éœ€è¦ç”¨æˆ·ä¿¡æ¯ â”‚
â”‚ éœ€è¦è´­ç‰©è½¦   â”‚    â”‚ éœ€è¦è´­ç‰©è½¦   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“ ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆçš„é—®é¢˜**
- **çˆ¶å­ä¼ å‚**ï¼šç»„ä»¶å±‚çº§æ·±äº†å°±å¾ˆéº»çƒ¦
- **äº‹ä»¶æ€»çº¿**ï¼šæ•°æ®æµå‘æ··ä¹±ï¼Œéš¾ä»¥è¿½è¸ª
- **æœ¬åœ°å­˜å‚¨**ï¼šæ•°æ®åŒæ­¥å›°éš¾ï¼Œå“åº”å¼ç¼ºå¤±

### 1.2 Vuexçš„æ ¸å¿ƒä»·å€¼


**ğŸ¯ ä»€ä¹ˆæ˜¯Vuex**
> Vuexæ˜¯Vue.jsåº”ç”¨çš„**é›†ä¸­å¼çŠ¶æ€ç®¡ç†**å·¥å…·ï¼ŒæŠŠç»„ä»¶é—´å…±äº«çš„æ•°æ®ç»Ÿä¸€ç®¡ç†åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚

**ğŸ’¡ ç”¨ç”Ÿæ´»ä¾‹å­ç†è§£**
```
æŠŠVuexæƒ³è±¡æˆä¸€ä¸ª"å…¬å…±ä»“åº“"ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªæˆ¿é—´(ç»„ä»¶)éƒ½æœ‰è‡ªå·±çš„å°å†°ç®±
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚æˆ¿é—´A  â”‚  â”‚æˆ¿é—´B  â”‚  â”‚æˆ¿é—´C  â”‚
â”‚ ğŸ§Š    â”‚  â”‚ ğŸ§Š    â”‚  â”‚ ğŸ§Š    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
é—®é¢˜ï¼šé£Ÿç‰©é‡å¤è´­ä¹°ï¼Œæµªè´¹ç©ºé—´ï¼Œéš¾ä»¥å…±äº«

Vuexæ–¹å¼ï¼šæ‰€æœ‰æˆ¿é—´å…±äº«ä¸€ä¸ªå¤§å†°ç®±
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   ğŸªå¤§ä»“åº“  â”‚
            â”‚  ğŸ¥›ğŸğŸ¥•ğŸ–  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†™ï¸  â†“  â†˜ï¸
        â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
        â”‚æˆ¿é—´A  â”‚ â”‚æˆ¿é—´B  â”‚ â”‚æˆ¿é—´C  â”‚
        â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
å¥½å¤„ï¼šç»Ÿä¸€ç®¡ç†ï¼ŒæŒ‰éœ€å–ç”¨ï¼Œæ•°æ®åŒæ­¥
```

### 1.3 Vuexå®‰è£…ä¸åŸºç¡€è®¾ç½®


**ğŸ”§ å®‰è£…Vuex**
```bash
# Vue 2 é¡¹ç›®
npm install vuex@3

# Vue 3 é¡¹ç›®  
npm install vuex@4
```

**ğŸ“¦ åŸºç¡€é…ç½®**
```javascript
// store/index.js
import { createStore } from 'vuex'

const store = createStore({
  // è¿™é‡Œæ”¾ç½®æˆ‘ä»¬çš„çŠ¶æ€ç®¡ç†é…ç½®
})

export default store
```

---

## 2. ğŸ§© Vuexæ ¸å¿ƒæ¦‚å¿µè¯¦è§£


### 2.1 State - çŠ¶æ€ä»“åº“


**ğŸª ä»€ä¹ˆæ˜¯State**
> Stateå°±æ˜¯å­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„`data`ï¼Œä½†æ˜¯æ˜¯å…¨å±€å…±äº«çš„ã€‚

**ğŸ“ åŸºç¡€ç”¨æ³•**
```javascript
const store = createStore({
  state: {
    // ç”¨æˆ·ä¿¡æ¯
    user: {
      name: 'å¼ ä¸‰',
      isLogin: false
    },
    // è´­ç‰©è½¦
    cart: {
      items: [],
      total: 0
    },
    // è®¡æ•°å™¨
    count: 0
  }
})
```

**ğŸ¯ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨State**
```javascript
// æ–¹å¼1ï¼šç›´æ¥è®¿é—®
export default {
  computed: {
    userName() {
      return this.$store.state.user.name
    },
    cartTotal() {
      return this.$store.state.cart.total
    }
  }
}

// æ–¹å¼2ï¼šä½¿ç”¨mapStateè¾…åŠ©å‡½æ•°
import { mapState } from 'vuex'

export default {
  computed: {
    ...mapState(['count']),
    ...mapState({
      userName: state => state.user.name,
      cartItems: state => state.cart.items
    })
  }
}
```

### 2.2 Getters - çŠ¶æ€è®¡ç®—å™¨


**ğŸ§® ä»€ä¹ˆæ˜¯Getters**
> Gettersç›¸å½“äºStoreçš„è®¡ç®—å±æ€§ï¼Œå¯¹Stateæ•°æ®è¿›è¡Œå¤„ç†åè¿”å›ï¼Œç±»ä¼¼ç»„ä»¶ä¸­çš„`computed`ã€‚

**ğŸ’­ ä¸ºä»€ä¹ˆéœ€è¦Getters**
```javascript
// ä¸ç”¨Gettersçš„æƒ…å†µ
// æ¯ä¸ªç»„ä»¶éƒ½è¦é‡å¤è®¡ç®—é€»è¾‘
computed: {
  expensiveItems() {
    return this.$store.state.products.filter(product => product.price > 100)
  }
}

// ä½¿ç”¨Getters
// è®¡ç®—é€»è¾‘ç»Ÿä¸€ç®¡ç†ï¼Œå¤šä¸ªç»„ä»¶å¤ç”¨
getters: {
  expensiveItems: state => {
    return state.products.filter(product => product.price > 100)
  }
}
```

**ğŸ”§ Gettersè¯¦ç»†ç”¨æ³•**
```javascript
const store = createStore({
  state: {
    products: [
      { id: 1, name: 'æ‰‹æœº', price: 3000, category: 'ç”µå­' },
      { id: 2, name: 'ä¹¦ç±', price: 50, category: 'æ•™è‚²' },
      { id: 3, name: 'ç”µè„‘', price: 8000, category: 'ç”µå­' }
    ],
    user: {
      vipLevel: 2
    }
  },
  getters: {
    // åŸºç¡€getterï¼šç­›é€‰ç”µå­äº§å“
    electronicProducts: state => {
      return state.products.filter(product => product.category === 'ç”µå­')
    },
    
    // ä¾èµ–å…¶ä»–getterï¼šç”µå­äº§å“æ•°é‡
    electronicCount: (state, getters) => {
      return getters.electronicProducts.length
    },
    
    // è¿”å›å‡½æ•°ï¼šæ ¹æ®ä»·æ ¼ç­›é€‰ï¼ˆå¯ä¼ å‚ï¼‰
    productsByPrice: state => minPrice => {
      return state.products.filter(product => product.price >= minPrice)
    },
    
    // å¤æ‚è®¡ç®—ï¼šVIPç”¨æˆ·çš„æŠ˜æ‰£ä»·æ ¼
    discountProducts: state => {
      const discount = state.user.vipLevel * 0.1
      return state.products.map(product => ({
        ...product,
        discountPrice: product.price * (1 - discount)
      }))
    }
  }
})
```

**ğŸ¯ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨Getters**
```javascript
// ç›´æ¥ä½¿ç”¨
computed: {
  electronicProducts() {
    return this.$store.getters.electronicProducts
  },
  cheapProducts() {
    return this.$store.getters.productsByPrice(100)
  }
}

// ä½¿ç”¨mapGetters
import { mapGetters } from 'vuex'
computed: {
  ...mapGetters(['electronicProducts', 'electronicCount'])
}
```

### 2.3 Mutations - çŠ¶æ€ä¿®æ”¹å™¨


**âœï¸ ä»€ä¹ˆæ˜¯Mutations**
> Mutationsæ˜¯ä¿®æ”¹Stateçš„**å”¯ä¸€é€”å¾„**ï¼Œå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°ã€‚ç±»ä¼¼äº‹ä»¶æ³¨å†Œï¼Œé€šè¿‡`commit`è§¦å‘ã€‚

**âš ï¸ ä¸ºä»€ä¹ˆå¿…é¡»é€šè¿‡Mutationsä¿®æ”¹**
```javascript
// âŒ é”™è¯¯åšæ³•ï¼šç›´æ¥ä¿®æ”¹state
this.$store.state.count++

// âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡mutationä¿®æ”¹
this.$store.commit('increment')
```

**ğŸ’¡ è®¾è®¡åŸå› **
- **å¯è¿½è¸ª**ï¼šæ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½æœ‰æ˜ç¡®è®°å½•
- **å¯è°ƒè¯•**ï¼šVue DevToolså¯ä»¥è·Ÿè¸ªæ¯ä¸ªmutation
- **å¯é¢„æµ‹**ï¼šçŠ¶æ€å˜åŒ–è·¯å¾„å”¯ä¸€æ˜ç¡®

**ğŸ”§ Mutationsè¯¦ç»†ç”¨æ³•**
```javascript
const store = createStore({
  state: {
    count: 0,
    user: { name: '', age: 0 },
    todos: []
  },
  mutations: {
    // ç®€å•ä¿®æ”¹
    increment(state) {
      state.count++
    },
    
    // å¸¦å‚æ•°ä¿®æ”¹ï¼ˆpayloadè½½è·ï¼‰
    incrementBy(state, amount) {
      state.count += amount
    },
    
    // å¯¹è±¡å½¢å¼è½½è·
    updateUser(state, payload) {
      state.user.name = payload.name
      state.user.age = payload.age
    },
    
    // æ·»åŠ é¡¹ç›®
    addTodo(state, todo) {
      state.todos.push({
        id: Date.now(),
        text: todo.text,
        done: false
      })
    },
    
    // åˆ‡æ¢çŠ¶æ€
    toggleTodo(state, id) {
      const todo = state.todos.find(todo => todo.id === id)
      if (todo) {
        todo.done = !todo.done
      }
    }
  }
})
```

**ğŸ¯ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨Mutations**
```javascript
methods: {
  // ç›´æ¥æäº¤
  increment() {
    this.$store.commit('increment')
  },
  
  // å¸¦å‚æ•°æäº¤
  incrementBy10() {
    this.$store.commit('incrementBy', 10)
  },
  
  // å¯¹è±¡é£æ ¼æäº¤
  updateUserInfo() {
    this.$store.commit({
      type: 'updateUser',
      name: 'æå››',
      age: 25
    })
  }
}

// ä½¿ç”¨mapMutations
import { mapMutations } from 'vuex'
methods: {
  ...mapMutations(['increment', 'incrementBy']),
  ...mapMutations({
    add: 'increment' // é‡å‘½å
  })
}
```

### 2.4 Actions - å¼‚æ­¥æ“ä½œå™¨


**ğŸš€ ä»€ä¹ˆæ˜¯Actions**
> Actionsç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œï¼Œç„¶åé€šè¿‡æäº¤mutationsæ¥ä¿®æ”¹çŠ¶æ€ã€‚å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚

**ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦Actions**
```javascript
// åœºæ™¯ï¼šç”¨æˆ·ç™»å½•éœ€è¦å¼‚æ­¥éªŒè¯
// âŒ ä¸èƒ½åœ¨mutationä¸­åšå¼‚æ­¥æ“ä½œ
mutations: {
  login(state, user) {
    // è¿™é‡Œä¸èƒ½å†™å¼‚æ­¥ä»£ç ï¼
    fetch('/api/login')  // âŒ é”™è¯¯
  }
}

// âœ… åœ¨actionä¸­å¤„ç†å¼‚æ­¥ï¼Œå†æäº¤mutation
actions: {
  async login({ commit }, loginData) {
    const response = await fetch('/api/login', {
      method: 'POST',
      body: JSON.stringify(loginData)
    })
    const user = await response.json()
    commit('setUser', user)  // æäº¤mutation
  }
}
```

**ğŸ”§ Actionsè¯¦ç»†ç”¨æ³•**
```javascript
const store = createStore({
  state: {
    user: null,
    loading: false,
    products: []
  },
  mutations: {
    setUser(state, user) {
      state.user = user
    },
    setLoading(state, status) {
      state.loading = status
    },
    setProducts(state, products) {
      state.products = products
    }
  },
  actions: {
    // åŸºç¡€å¼‚æ­¥action
    async fetchProducts({ commit }) {
      commit('setLoading', true)
      try {
        const response = await fetch('/api/products')
        const products = await response.json()
        commit('setProducts', products)
      } catch (error) {
        console.error('è·å–äº§å“å¤±è´¥:', error)
      } finally {
        commit('setLoading', false)
      }
    },
    
    // å¸¦å‚æ•°çš„action
    async login({ commit, dispatch }, { username, password }) {
      commit('setLoading', true)
      try {
        const response = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        })
        
        if (response.ok) {
          const user = await response.json()
          commit('setUser', user)
          // ç™»å½•æˆåŠŸåè·å–ç”¨æˆ·æ•°æ®
          dispatch('fetchUserProfile')
          return { success: true }
        } else {
          throw new Error('ç™»å½•å¤±è´¥')
        }
      } catch (error) {
        console.error('ç™»å½•é”™è¯¯:', error)
        return { success: false, message: error.message }
      } finally {
        commit('setLoading', false)
      }
    },
    
    // è°ƒç”¨å…¶ä»–action
    async fetchUserProfile({ commit, state }) {
      if (!state.user) return
      
      const response = await fetch(`/api/users/${state.user.id}/profile`)
      const profile = await response.json()
      commit('updateUserProfile', profile)
    }
  }
})
```

**ğŸ¯ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨Actions**
```javascript
methods: {
  // ç›´æ¥è°ƒç”¨
  async handleLogin() {
    const result = await this.$store.dispatch('login', {
      username: 'user123',
      password: 'pass123'
    })
    
    if (result.success) {
      this.$router.push('/dashboard')
    } else {
      alert(result.message)
    }
  }
}

// ä½¿ç”¨mapActions
import { mapActions } from 'vuex'
methods: {
  ...mapActions(['fetchProducts', 'login']),
  ...mapActions({
    getProducts: 'fetchProducts' // é‡å‘½å
  })
}
```

---

## 3. ğŸ”„ Vuexæ•°æ®æµç¨‹


### 3.1 å®Œæ•´æ•°æ®æµç¨‹å›¾


```
Vuexæ•°æ®æµå‘å›¾ï¼š

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Vueç»„ä»¶    â”‚ â† å±•ç¤ºçŠ¶æ€æ•°æ®
   â”‚  Template   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â†‘
          â”‚è°ƒç”¨Actions      â”‚è®¢é˜…Stateå˜åŒ–
          â†“                â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Actions   â”‚    â”‚    State    â”‚
   â”‚  (å¼‚æ­¥æ“ä½œ)   â”‚    â”‚   (çŠ¶æ€)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â†‘
          â”‚æäº¤Mutations    â”‚
          â†“                â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Mutations  â”‚â”€â”€â”€â†’â”‚   State     â”‚
   â”‚  (åŒæ­¥ä¿®æ”¹)   â”‚    â”‚   (æ›´æ–°)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æµç¨‹æ­¥éª¤è¯¦è§£


**ğŸ”¢ æ•°æ®æµç¨‹æ­¥éª¤**
1. **ç»„ä»¶è§¦å‘**ï¼šç”¨æˆ·åœ¨ç»„ä»¶ä¸­è§¦å‘æ“ä½œï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰
2. **è°ƒç”¨Action**ï¼šç»„ä»¶é€šè¿‡`dispatch`è°ƒç”¨action
3. **å¼‚æ­¥å¤„ç†**ï¼šActionæ‰§è¡Œå¼‚æ­¥æ“ä½œï¼ˆå¦‚APIè°ƒç”¨ï¼‰
4. **æäº¤Mutation**ï¼šActioné€šè¿‡`commit`æäº¤mutation
5. **çŠ¶æ€æ›´æ–°**ï¼šMutationåŒæ­¥ä¿®æ”¹state
6. **ç»„ä»¶å“åº”**ï¼šç»„ä»¶è‡ªåŠ¨å“åº”stateå˜åŒ–å¹¶é‡æ–°æ¸²æŸ“

**ğŸ“ å®é™…ä¾‹å­æµç¨‹**
```javascript
// 1. ç»„ä»¶ä¸­ç”¨æˆ·ç‚¹å‡»"åŠ è½½å•†å“"æŒ‰é’®
<template>
  <button @click="loadProducts">åŠ è½½å•†å“</button>
  <div v-if="loading">åŠ è½½ä¸­...</div>
  <div v-for="product in products" :key="product.id">
    {{ product.name }}
  </div>
</template>

// 2. ç»„ä»¶æ–¹æ³•è°ƒç”¨action
methods: {
  loadProducts() {
    this.$store.dispatch('fetchProducts')  // è°ƒç”¨action
  }
}

// 3. Actionæ‰§è¡Œå¼‚æ­¥æ“ä½œ
actions: {
  async fetchProducts({ commit }) {
    commit('setLoading', true)           // å…ˆæ˜¾ç¤ºåŠ è½½çŠ¶æ€
    const products = await api.getProducts()  // å¼‚æ­¥è·å–æ•°æ®
    commit('setProducts', products)      // è®¾ç½®å•†å“æ•°æ®
    commit('setLoading', false)          // éšè—åŠ è½½çŠ¶æ€
  }
}

// 4. Mutationsä¿®æ”¹state
mutations: {
  setLoading(state, status) {
    state.loading = status
  },
  setProducts(state, products) {
    state.products = products
  }
}

// 5. ç»„ä»¶è‡ªåŠ¨å“åº”stateå˜åŒ–
computed: {
  ...mapState(['products', 'loading'])
}
```

### 3.3 ä¸¥æ ¼æ¨¡å¼


**ğŸ”’ ä»€ä¹ˆæ˜¯ä¸¥æ ¼æ¨¡å¼**
```javascript
const store = createStore({
  strict: true,  // å¼€å¯ä¸¥æ ¼æ¨¡å¼
  // ... å…¶ä»–é…ç½®
})
```

**âš ï¸ ä¸¥æ ¼æ¨¡å¼çš„ä½œç”¨**
- ç¡®ä¿stateåªèƒ½é€šè¿‡mutationä¿®æ”¹
- ç›´æ¥ä¿®æ”¹stateä¼šæŠ›å‡ºé”™è¯¯
- ä»…åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼ˆæ€§èƒ½è€ƒè™‘ï¼‰

---

## 4. ğŸ›ï¸ å®é™…åº”ç”¨ç¤ºä¾‹


### 4.1 è´­ç‰©è½¦å®Œæ•´ç¤ºä¾‹


```javascript
// store/modules/cart.js
const cart = {
  namespaced: true,
  
  state: {
    items: [],
    total: 0
  },
  
  getters: {
    // è´­ç‰©è½¦å•†å“æ•°é‡
    itemCount: state => {
      return state.items.reduce((total, item) => total + item.quantity, 0)
    },
    
    // è´­ç‰©è½¦æ€»ä»·
    totalPrice: state => {
      return state.items.reduce((total, item) => {
        return total + (item.price * item.quantity)
      }, 0)
    },
    
    // è·å–æŒ‡å®šå•†å“
    getItemById: state => id => {
      return state.items.find(item => item.id === id)
    }
  },
  
  mutations: {
    // æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
    addItem(state, product) {
      const existingItem = state.items.find(item => item.id === product.id)
      
      if (existingItem) {
        existingItem.quantity++
      } else {
        state.items.push({
          id: product.id,
          name: product.name,
          price: product.price,
          quantity: 1
        })
      }
    },
    
    // ç§»é™¤å•†å“
    removeItem(state, productId) {
      const index = state.items.findIndex(item => item.id === productId)
      if (index > -1) {
        state.items.splice(index, 1)
      }
    },
    
    // æ›´æ–°å•†å“æ•°é‡
    updateQuantity(state, { id, quantity }) {
      const item = state.items.find(item => item.id === id)
      if (item) {
        item.quantity = quantity
      }
    },
    
    // æ¸…ç©ºè´­ç‰©è½¦
    clearCart(state) {
      state.items = []
    }
  },
  
  actions: {
    // æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ï¼ˆå¯èƒ½åŒ…å«åº“å­˜æ£€æŸ¥ç­‰å¼‚æ­¥æ“ä½œï¼‰
    async addToCart({ commit, dispatch }, product) {
      // æ¨¡æ‹Ÿæ£€æŸ¥åº“å­˜çš„å¼‚æ­¥æ“ä½œ
      const hasStock = await dispatch('checkStock', product.id, { root: true })
      
      if (hasStock) {
        commit('addItem', product)
        return { success: true, message: 'å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦' }
      } else {
        return { success: false, message: 'å•†å“åº“å­˜ä¸è¶³' }
      }
    }
  }
}

export default cart
```

**ğŸ¯ ç»„ä»¶ä¸­ä½¿ç”¨è´­ç‰©è½¦**
```vue
<template>
  <div class="product-card">
    <h3>{{ product.name }}</h3>
    <p>ä»·æ ¼: Â¥{{ product.price }}</p>
    <button @click="addToCart" :disabled="loading">
      {{ loading ? 'æ·»åŠ ä¸­...' : 'åŠ å…¥è´­ç‰©è½¦' }}
    </button>
    
    <!-- è´­ç‰©è½¦çŠ¶æ€æ˜¾ç¤º -->
    <div class="cart-info">
      è´­ç‰©è½¦ï¼š{{ itemCount }}ä»¶å•†å“ï¼Œæ€»ä»·Â¥{{ totalPrice }}
    </div>
  </div>
</template>

<script>
import { mapGetters, mapActions } from 'vuex'

export default {
  props: ['product'],
  data() {
    return {
      loading: false
    }
  },
  computed: {
    ...mapGetters('cart', ['itemCount', 'totalPrice'])
  },
  methods: {
    ...mapActions('cart', ['addToCart']),
    
    async handleAddToCart() {
      this.loading = true
      const result = await this.addToCart(this.product)
      
      if (result.success) {
        this.$message.success(result.message)
      } else {
        this.$message.error(result.message)
      }
      
      this.loading = false
    }
  }
}
</script>
```

---

## 5. ğŸ“ çŠ¶æ€ç®¡ç†è®¾è®¡åŸåˆ™


### 5.1 ä»€ä¹ˆæ•°æ®é€‚åˆæ”¾åœ¨Vuex


**âœ… é€‚åˆæ”¾åœ¨Vuexçš„æ•°æ®**
- **ç”¨æˆ·ä¿¡æ¯**ï¼šç™»å½•çŠ¶æ€ã€ä¸ªäººèµ„æ–™
- **è´­ç‰©è½¦æ•°æ®**ï¼šå•†å“åˆ—è¡¨ã€æ€»ä»·
- **å…¨å±€é…ç½®**ï¼šä¸»é¢˜è®¾ç½®ã€è¯­è¨€è®¾ç½®
- **ç¼“å­˜æ•°æ®**ï¼šå•†å“åˆ—è¡¨ã€åˆ†ç±»ä¿¡æ¯
- **è·¨ç»„ä»¶é€šä¿¡**ï¼šæ¶ˆæ¯é€šçŸ¥ã€å¼¹çª—çŠ¶æ€

**âŒ ä¸é€‚åˆæ”¾åœ¨Vuexçš„æ•°æ®**
- **è¡¨å•æ•°æ®**ï¼šè¾“å…¥æ¡†å†…å®¹ã€éªŒè¯çŠ¶æ€
- **ç»„ä»¶å†…éƒ¨çŠ¶æ€**ï¼šæŒ‰é’®å±•å¼€/æ”¶èµ·ã€æœ¬åœ°UIçŠ¶æ€
- **ä¸´æ—¶æ•°æ®**ï¼šè®¡ç®—ä¸­é—´å€¼ã€ä¸´æ—¶å˜é‡
- **å•ç»„ä»¶æ•°æ®**ï¼šåªæœ‰ä¸€ä¸ªç»„ä»¶ä½¿ç”¨çš„æ•°æ®

### 5.2 æ¨¡å—åŒ–è®¾è®¡


**ğŸ—ï¸ ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–**
```javascript
// ä¸å¥½çš„åšæ³•ï¼šæ‰€æœ‰çŠ¶æ€æ··åœ¨ä¸€èµ·
const store = createStore({
  state: {
    userName: '',
    userAge: 0,
    cartItems: [],
    cartTotal: 0,
    productList: [],
    productCategories: [],
    orderList: [],
    orderStatus: ''
    // ... æ›´å¤šçŠ¶æ€æ··æ‚åœ¨ä¸€èµ·
  }
})

// å¥½çš„åšæ³•ï¼šæŒ‰åŠŸèƒ½æ¨¡å—åˆ†å‰²
const store = createStore({
  modules: {
    user: userModule,      // ç”¨æˆ·ç›¸å…³
    cart: cartModule,      // è´­ç‰©è½¦ç›¸å…³
    product: productModule, // å•†å“ç›¸å…³
    order: orderModule     // è®¢å•ç›¸å…³
  }
})
```

**ğŸ“ æ¨¡å—ç»“æ„ç¤ºä¾‹**
```
store/
â”œâ”€â”€ index.js          # ä¸»storeæ–‡ä»¶
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ user.js       # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ cart.js       # è´­ç‰©è½¦æ¨¡å—
â”‚   â”œâ”€â”€ product.js    # å•†å“æ¨¡å—
â”‚   â””â”€â”€ order.js      # è®¢å•æ¨¡å—
```

### 5.3 å‘½åè§„èŒƒ


**ğŸ“ å»ºè®®çš„å‘½åè§„èŒƒ**
```javascript
const store = createStore({
  state: {
    // çŠ¶æ€ç”¨åè¯
    userInfo: {},
    productList: [],
    isLoading: false
  },
  
  getters: {
    // getterç”¨å½¢å®¹è¯æˆ–getå¼€å¤´
    isLoggedIn: state => !!state.userInfo.id,
    getUserName: state => state.userInfo.name,
    expensiveProducts: state => state.productList.filter(p => p.price > 1000)
  },
  
  mutations: {
    // mutationç”¨åŠ¨è¯ï¼Œæè¿°åšä»€ä¹ˆ
    SET_USER_INFO: (state, userInfo) => {
      state.userInfo = userInfo
    },
    UPDATE_PRODUCT: (state, product) => {
      // æ›´æ–°å•†å“
    },
    CLEAR_CART: (state) => {
      state.cartItems = []
    }
  },
  
  actions: {
    // actionç”¨åŠ¨è¯ï¼Œæè¿°ä¸šåŠ¡åŠ¨ä½œ
    login: ({ commit }, credentials) => {
      // ç™»å½•é€»è¾‘
    },
    fetchProducts: ({ commit }) => {
      // è·å–å•†å“
    },
    addToCart: ({ commit }, product) => {
      // æ·»åŠ åˆ°è´­ç‰©è½¦
    }
  }
})
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Stateï¼šå…¨å±€çŠ¶æ€ä»“åº“ï¼Œå­˜æ”¾å…±äº«æ•°æ®
ğŸ”¸ Gettersï¼šçŠ¶æ€è®¡ç®—å™¨ï¼Œç±»ä¼¼computedï¼Œå¤„ç†Stateæ•°æ®
ğŸ”¸ Mutationsï¼šçŠ¶æ€ä¿®æ”¹å™¨ï¼ŒåŒæ­¥ä¿®æ”¹Stateçš„å”¯ä¸€é€”å¾„
ğŸ”¸ Actionsï¼šå¼‚æ­¥æ“ä½œå™¨ï¼Œå¤„ç†å¼‚æ­¥é€»è¾‘åæäº¤Mutations
ğŸ”¸ æ•°æ®æµå‘ï¼šå•å‘æ•°æ®æµï¼Œå¯é¢„æµ‹å¯è°ƒè¯•
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Vuexè§£å†³ä»€ä¹ˆé—®é¢˜**
```
å¤šç»„ä»¶æ•°æ®å…±äº«çš„é—®é¢˜ï¼š
- é¿å…å±‚å±‚ä¼ å‚çš„éº»çƒ¦
- ç»Ÿä¸€ç®¡ç†çŠ¶æ€ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´
- å¯é¢„æµ‹çš„çŠ¶æ€å˜åŒ–ï¼Œä¾¿äºè°ƒè¯•
```

**ğŸ”¹ ä¸ºä»€ä¹ˆæœ‰è¿™äº›é™åˆ¶**
```
åªèƒ½é€šè¿‡Mutationsä¿®æ”¹Stateï¼š
- ä¿è¯çŠ¶æ€å˜åŒ–å¯è¿½è¸ª
- ä¾¿äºè°ƒè¯•å’Œå¼€å‘å·¥å…·æ”¯æŒ
- é¿å…çŠ¶æ€ä¿®æ”¹çš„æ··ä¹±

Actionså¤„ç†å¼‚æ­¥ï¼ŒMutationså¤„ç†åŒæ­¥ï¼š
- ä¿è¯Mutationsçš„çº¯å‡½æ•°ç‰¹æ€§
- å¼‚æ­¥æ“ä½œçš„é”™è¯¯å¤„ç†æ›´æ¸…æ™°
- æ—¶é—´æ—…è¡Œè°ƒè¯•æˆä¸ºå¯èƒ½
```

**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨Vuex**
```
æ•°æ®éœ€è¦è·¨ç»„ä»¶å…±äº«ï¼šâœ… ä½¿ç”¨Vuex
æ•°æ®åªåœ¨å•ä¸ªç»„ä»¶ä½¿ç”¨ï¼šâŒ ç”¨ç»„ä»¶å†…çŠ¶æ€
ç®€å•çš„çˆ¶å­é€šä¿¡ï¼šâŒ ç”¨propså’Œemit
å¤æ‚çš„è·¨å±‚çº§é€šä¿¡ï¼šâœ… ä½¿ç”¨Vuex
```

### 6.3 æœ€ä½³å®è·µ


- **ğŸ’¡ åˆç†è®¾è®¡**ï¼šä¸è¦æŠŠæ‰€æœ‰æ•°æ®éƒ½æ”¾åˆ°Vuex
- **ğŸ—ï¸ æ¨¡å—åŒ–**ï¼šæŒ‰åŠŸèƒ½åˆ’åˆ†æ¨¡å—ï¼Œä¿æŒä»£ç æ¸…æ™°
- **ğŸ“ å‘½åè§„èŒƒ**ï¼šä½¿ç”¨ä¸€è‡´çš„å‘½åè§„èŒƒ
- **ğŸ”’ ä¸¥æ ¼æ¨¡å¼**ï¼šå¼€å‘ç¯å¢ƒå¼€å¯ä¸¥æ ¼æ¨¡å¼
- **ğŸ“Š è°ƒè¯•å·¥å…·**ï¼šå–„ç”¨Vue DevToolsè°ƒè¯•çŠ¶æ€

**æ ¸å¿ƒè®°å¿†**ï¼š
- Vuexæ˜¯Vueçš„"æ•°æ®ç®¡å®¶"ï¼Œç»Ÿä¸€ç®¡ç†å…±äº«çŠ¶æ€
- Stateå­˜æ•°æ®ï¼ŒGettersç®—æ•°æ®ï¼ŒMutationsæ”¹æ•°æ®ï¼ŒActionså¤„ç†å¼‚æ­¥
- å•å‘æ•°æ®æµï¼šç»„ä»¶â†’Actionsâ†’Mutationsâ†’Stateâ†’ç»„ä»¶
- ä¸æ˜¯æ‰€æœ‰æ•°æ®éƒ½è¦æ”¾Vuexï¼Œåªç®¡ç†çœŸæ­£éœ€è¦å…±äº«çš„æ•°æ®