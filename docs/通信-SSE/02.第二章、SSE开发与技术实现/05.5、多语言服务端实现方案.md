---
title: 5ã€å¤šè¯­è¨€æœåŠ¡ç«¯å®ç°æ–¹æ¡ˆ
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯å¤šè¯­è¨€SSEå®ç°](#1-ä»€ä¹ˆæ˜¯å¤šè¯­è¨€SSEå®ç°)
2. [Pythonå®ç°æ–¹æ¡ˆ](#2-Pythonå®ç°æ–¹æ¡ˆ)
3. [Javaå®ç°æ–¹æ¡ˆ](#3-Javaå®ç°æ–¹æ¡ˆ)
4. [PHPå®ç°æ–¹æ¡ˆ](#4-PHPå®ç°æ–¹æ¡ˆ)
5. [Goè¯­è¨€å®ç°æ–¹æ¡ˆ](#5-Goè¯­è¨€å®ç°æ–¹æ¡ˆ)
6. [è·¨è¯­è¨€é€šç”¨å®ç°åŸåˆ™](#6-è·¨è¯­è¨€é€šç”¨å®ç°åŸåˆ™)
7. [æ€§èƒ½å¯¹æ¯”ä¸é€‰å‹å»ºè®®](#7-æ€§èƒ½å¯¹æ¯”ä¸é€‰å‹å»ºè®®)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ä»€ä¹ˆæ˜¯å¤šè¯­è¨€SSEå®ç°


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šè¯­è¨€å®ç°


**å®é™…ä¸šåŠ¡åœºæ™¯**ï¼š
```
å…¬å¸ç°çŠ¶: ä¸åŒé¡¹ç›®ç”¨ä¸åŒè¯­è¨€å¼€å‘
â”œâ”€â”€ ç”¨æˆ·ç³»ç»Ÿ: Java Spring Boot
â”œâ”€â”€ æ•°æ®åˆ†æ: Python Flask  
â”œâ”€â”€ å†…å®¹ç®¡ç†: PHP Laravel
â””â”€â”€ å¾®æœåŠ¡ç½‘å…³: Go

éœ€æ±‚: æ‰€æœ‰ç³»ç»Ÿéƒ½è¦æ”¯æŒå®æ—¶æ¨é€åŠŸèƒ½
```

> ğŸ’¡ **é€šä¿—ç†è§£**ï¼šå°±åƒåšèœï¼Œä¸åŒçš„å¨å¸ˆä¹ æƒ¯ç”¨ä¸åŒçš„é”…ï¼Œä½†æœ€ç»ˆéƒ½è¦èƒ½åšå‡º"å®æ—¶æ¨é€"è¿™é“èœ

### 1.2 SSEçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ


**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **SSE = æœåŠ¡å™¨ä¸»åŠ¨æ¨é€** ğŸ“¤
- **æœ¬è´¨å°±æ˜¯ç‰¹æ®Šæ ¼å¼çš„HTTPå“åº”** ğŸ”„  
- **å®¢æˆ·ç«¯ä¿æŒè¿æ¥æŒç»­æ¥æ”¶** ğŸ“¥

```
ä¼ ç»Ÿè¯·æ±‚å“åº”:
å®¢æˆ·ç«¯ â†’ è¯·æ±‚ â†’ æœåŠ¡å™¨
å®¢æˆ·ç«¯ â† å“åº” â† æœåŠ¡å™¨  (è¿æ¥å…³é—­)

SSEæ¨¡å¼:
å®¢æˆ·ç«¯ â†’ è¯·æ±‚ â†’ æœåŠ¡å™¨
å®¢æˆ·ç«¯ â† æ•°æ®æµ â† æœåŠ¡å™¨  (è¿æ¥ä¿æŒ)
å®¢æˆ·ç«¯ â† æ•°æ®æµ â† æœåŠ¡å™¨
å®¢æˆ·ç«¯ â† æ•°æ®æµ â† æœåŠ¡å™¨  (æŒç»­æ¨é€)
```

### 1.3 é€šç”¨çš„SSEå“åº”æ ¼å¼


**æ ‡å‡†æ ¼å¼** (æ‰€æœ‰è¯­è¨€éƒ½è¦éµå®ˆ):
```http
Content-Type: text/event-stream
Cache-Control: no-cache
Connection: keep-alive

data: è¿™é‡Œæ˜¯è¦æ¨é€çš„æ•°æ®
id: æ¶ˆæ¯å”¯ä¸€æ ‡è¯†
event: äº‹ä»¶ç±»å‹
retry: é‡è¿é—´éš”(æ¯«ç§’)

```

> ğŸ“– **æ¦‚å¿µè§£é‡Š**ï¼š
> - `data:` å°±æ˜¯ä½ è¦å‘é€çš„å†…å®¹ï¼Œå¯ä»¥æ˜¯æ–‡å­—ã€JSONç­‰
> - `id:` ç»™æ¯æ¡æ¶ˆæ¯ç¼–ä¸ªå·ï¼Œå®¢æˆ·ç«¯æ–­çº¿é‡è¿æ—¶æœ‰ç”¨  
> - `event:` æ¶ˆæ¯ç±»å‹ï¼Œæ¯”å¦‚é€šçŸ¥ã€è­¦å‘Šç­‰
> - `retry:` å‘Šè¯‰å®¢æˆ·ç«¯å¦‚æœæ–­çº¿äº†ï¼Œç­‰å¤šä¹…å†é‡è¿

---

## 2. ğŸ Pythonå®ç°æ–¹æ¡ˆ


### 2.1 Flaskæ¡†æ¶å®ç°


**ä¸ºä»€ä¹ˆé€‰Flask**ï¼šè½»é‡çº§ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘SSEåŠŸèƒ½

```python
# ğŸ“ flask_sse_server.py
from flask import Flask, Response
import json
import time
import threading

app = Flask(__name__)

# å…¨å±€å˜é‡å­˜å‚¨æ´»è·ƒè¿æ¥
active_connections = []

def create_sse_response(data, event_type="message", message_id=None):
    """ç”Ÿæˆæ ‡å‡†SSEæ ¼å¼å“åº”"""
    response = f"event: {event_type}\n"
    if message_id:
        response += f"id: {message_id}\n"
    response += f"data: {json.dumps(data)}\n\n"
    return response

@app.route('/events')
def events():
    def event_stream():
        """ç”ŸæˆSSEæ•°æ®æµ"""
        # å‘é€è¿æ¥ç¡®è®¤
        yield create_sse_response(
            {"message": "è¿æ¥æˆåŠŸ", "timestamp": time.time()}, 
            "connected"
        )
        
        # æ¨¡æ‹Ÿå®šæ—¶æ¨é€æ•°æ®
        counter = 1
        while True:
            data = {
                "counter": counter,
                "message": f"è¿™æ˜¯ç¬¬{counter}æ¡æ¨é€æ¶ˆæ¯",
                "timestamp": time.time()
            }
            yield create_sse_response(data, "update", str(counter))
            counter += 1
            time.sleep(5)  # æ¯5ç§’æ¨é€ä¸€æ¬¡
    
    return Response(
        event_stream(),
        mimetype='text/event-stream',
        headers={
            'Cache-Control': 'no-cache',
            'Connection': 'keep-alive',
            'Access-Control-Allow-Origin': '*'  # å…è®¸è·¨åŸŸ
        }
    )

if __name__ == '__main__':
    app.run(debug=True, threaded=True)
```

### 2.2 FastAPIæ¡†æ¶å®ç°


**ä¸ºä»€ä¹ˆé€‰FastAPI**ï¼šç°ä»£åŒ–ï¼Œå†…ç½®å¼‚æ­¥æ”¯æŒï¼Œæ€§èƒ½æ›´å¥½

```python
# ğŸ“ fastapi_sse_server.py
from fastapi import FastAPI
from fastapi.responses import StreamingResponse
import json
import asyncio

app = FastAPI()

async def generate_events():
    """å¼‚æ­¥ç”ŸæˆSSEäº‹ä»¶æµ"""
    counter = 1
    while True:
        # æ„é€ è¦æ¨é€çš„æ•°æ®
        data = {
            "id": counter,
            "message": f"FastAPIæ¨é€æ¶ˆæ¯ #{counter}",
            "timestamp": "2024-01-01 10:30:00"
        }
        
        # æŒ‰SSEæ ¼å¼è¾“å‡º
        sse_data = f"data: {json.dumps(data)}\n\n"
        yield sse_data
        
        counter += 1
        await asyncio.sleep(3)  # å¼‚æ­¥ç­‰å¾…3ç§’

@app.get("/events")
async def stream_events():
    return StreamingResponse(
        generate_events(), 
        media_type="text/event-stream",
        headers={
            "Cache-Control": "no-cache",
            "Connection": "keep-alive"
        }
    )
```

> ğŸ”§ **å®è·µå»ºè®®**ï¼š
> - Flaské€‚åˆç®€å•åœºæ™¯ï¼Œä»£ç æ˜“æ‡‚
> - FastAPIé€‚åˆé«˜å¹¶å‘ï¼Œæ€§èƒ½æ›´ä¼˜
> - ä¸¤è€…éƒ½æ”¯æŒè·¨åŸŸè®¾ç½®

---

## 3. â˜• Javaå®ç°æ–¹æ¡ˆ


### 3.1 Spring Bootå®ç°


**ä¸ºä»€ä¹ˆé€‰Spring Boot**ï¼šä¼ä¸šçº§åº”ç”¨æ ‡é…ï¼Œç”Ÿæ€å®Œå–„

```java
// ğŸ“ SSEController.java
@RestController
@CrossOrigin(origins = "*")  // å…è®¸è·¨åŸŸ
public class SSEController {
    
    // å­˜å‚¨æ‰€æœ‰æ´»è·ƒçš„SSEè¿æ¥
    private final Map<String, SseEmitter> sseEmitters = new ConcurrentHashMap<>();
    
    @GetMapping(value = "/events", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public SseEmitter subscribe() {
        // åˆ›å»ºSSEå‘å°„å™¨ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´
        SseEmitter emitter = new SseEmitter(Long.MAX_VALUE);
        String clientId = UUID.randomUUID().toString();
        
        // ä¿å­˜è¿æ¥
        sseEmitters.put(clientId, emitter);
        
        // å‘é€è¿æ¥æˆåŠŸæ¶ˆæ¯
        try {
            emitter.send(SseEmitter.event()
                .id("connect")
                .name("connected")
                .data("è¿æ¥æˆåŠŸï¼Œå®¢æˆ·ç«¯ID: " + clientId));
        } catch (IOException e) {
            emitter.completeWithError(e);
        }
        
        // è®¾ç½®è¿æ¥å®Œæˆåçš„æ¸…ç†å·¥ä½œ
        emitter.onCompletion(() -> sseEmitters.remove(clientId));
        emitter.onTimeout(() -> sseEmitters.remove(clientId));
        emitter.onError((ex) -> sseEmitters.remove(clientId));
        
        return emitter;
    }
    
    // å¹¿æ’­æ¶ˆæ¯åˆ°æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯
    @PostMapping("/broadcast")
    public String broadcast(@RequestBody Map<String, Object> message) {
        sseEmitters.forEach((clientId, emitter) -> {
            try {
                emitter.send(SseEmitter.event()
                    .name("broadcast")
                    .data(message));
            } catch (IOException e) {
                // å‘é€å¤±è´¥ï¼Œç§»é™¤è¿æ¥
                sseEmitters.remove(clientId);
            }
        });
        return "å¹¿æ’­æ¶ˆæ¯å·²å‘é€ç»™ " + sseEmitters.size() + " ä¸ªå®¢æˆ·ç«¯";
    }
}
```

### 3.2 å®šæ—¶æ¨é€å®ç°


```java
// ğŸ“ SSEScheduler.java
@Component
public class SSEScheduler {
    
    @Autowired
    private SSEController sseController;
    
    // æ¯10ç§’æ¨é€ä¸€æ¬¡ç³»ç»ŸçŠ¶æ€
    @Scheduled(fixedRate = 10000)
    public void pushSystemStatus() {
        Map<String, Object> status = new HashMap<>();
        status.put("timestamp", System.currentTimeMillis());
        status.put("message", "ç³»ç»Ÿè¿è¡Œæ­£å¸¸");
        status.put("activeUsers", sseController.getActiveConnections());
        
        sseController.broadcast(status);
    }
}
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š
> - Spring Bootçš„SseEmitterä¼šè‡ªåŠ¨å¤„ç†è¿æ¥ç®¡ç†
> - è®°å¾—è®¾ç½®è·¨åŸŸï¼Œå¦åˆ™å‰ç«¯è®¿é—®ä¼šè¢«æ‹’ç»
> - è¦åŠæ—¶æ¸…ç†æ–­å¼€çš„è¿æ¥ï¼Œé¿å…å†…å­˜æ³„æ¼

---

## 4. ğŸ˜ PHPå®ç°æ–¹æ¡ˆ


### 4.1 åŸç”ŸPHPå®ç°


**PHPçš„ç‰¹ç‚¹**ï¼šæ¯ä¸ªè¯·æ±‚ç‹¬ç«‹è¿›ç¨‹ï¼Œå®ç°SSEéœ€è¦ç‰¹æ®Šå¤„ç†

```php
<?php
// ğŸ“ sse_server.php

// è®¾ç½®å“åº”å¤´
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');
header('Connection: keep-alive');
header('Access-Control-Allow-Origin: *');

// å…³é—­è¾“å‡ºç¼“å†²ï¼Œç¡®ä¿æ•°æ®åŠæ—¶æ¨é€
if (ob_get_level()) {
    ob_end_clean();
}

function sendSSEData($data, $eventType = 'message', $id = null) {
    if ($id) {
        echo "id: $id\n";
    }
    echo "event: $eventType\n";
    echo "data: " . json_encode($data) . "\n\n";
    
    // ç«‹å³åˆ·æ–°è¾“å‡ºç¼“å†²åŒº
    if (ob_get_level()) {
        ob_flush();
    }
    flush();
}

// å‘é€è¿æ¥æˆåŠŸæ¶ˆæ¯
sendSSEData([
    'message' => 'è¿æ¥æˆåŠŸ',
    'timestamp' => date('Y-m-d H:i:s')
], 'connected');

// æŒç»­æ¨é€æ•°æ®
$counter = 1;
while (true) {
    // æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦è¿˜åœ¨è¿æ¥
    if (connection_aborted()) {
        break;
    }
    
    $data = [
        'counter' => $counter,
        'message' => "PHPæ¨é€æ¶ˆæ¯ #$counter",
        'timestamp' => date('Y-m-d H:i:s')
    ];
    
    sendSSEData($data, 'update', $counter);
    
    $counter++;
    sleep(5); // ç­‰å¾…5ç§’
}
?>
```

### 4.2 Laravelæ¡†æ¶å®ç°


```php
// ğŸ“ routes/web.php
Route::get('/events', function () {
    return response()->stream(function () {
        $counter = 1;
        
        while (true) {
            $data = [
                'id' => $counter,
                'message' => "Laravel SSEæ¶ˆæ¯ #$counter",
                'timestamp' => now()->toDateTimeString()
            ];
            
            echo "data: " . json_encode($data) . "\n\n";
            
            if (ob_get_level()) {
                ob_flush();
            }
            flush();
            
            $counter++;
            sleep(3);
        }
    }, 200, [
        'Content-Type' => 'text/event-stream',
        'Cache-Control' => 'no-cache',
        'Connection' => 'keep-alive',
    ]);
});
```

> ğŸ”§ **PHPå®ç°è¦ç‚¹**ï¼š
> - å¿…é¡»å…³é—­è¾“å‡ºç¼“å†²ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šåŠæ—¶æ¨é€
> - ç”¨`connection_aborted()`æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦æ–­å¼€
> - Laravelçš„streamå“åº”æ›´ä¼˜é›…ï¼Œæ¨èä½¿ç”¨

---

## 5. ğŸš€ Goè¯­è¨€å®ç°æ–¹æ¡ˆ


### 5.1 æ ‡å‡†åº“å®ç°


**Goçš„ä¼˜åŠ¿**ï¼šå¤©ç”Ÿæ”¯æŒå¹¶å‘ï¼Œæ€§èƒ½ä¼˜å¼‚

```go
// ğŸ“ sse_server.go
package main

import (
    "encoding/json"
    "fmt"
    "log"
    "net/http"
    "time"
)

type SSEMessage struct {
    ID        string      `json:"id"`
    Event     string      `json:"event"`
    Data      interface{} `json:"data"`
    Timestamp int64       `json:"timestamp"`
}

func sseHandler(w http.ResponseWriter, r *http.Request) {
    // è®¾ç½®SSEå“åº”å¤´
    w.Header().Set("Content-Type", "text/event-stream")
    w.Header().Set("Cache-Control", "no-cache")
    w.Header().Set("Connection", "keep-alive")
    w.Header().Set("Access-Control-Allow-Origin", "*")
    
    // è·å–Flusheræ¥å£ï¼Œç”¨äºç«‹å³æ¨é€æ•°æ®
    flusher, ok := w.(http.Flusher)
    if !ok {
        http.Error(w, "æœåŠ¡å™¨ä¸æ”¯æŒSSE", http.StatusInternalServerError)
        return
    }
    
    // å‘é€è¿æ¥ç¡®è®¤
    fmt.Fprintf(w, "event: connected\n")
    fmt.Fprintf(w, "data: %s\n\n", `{"message":"è¿æ¥æˆåŠŸ"}`)
    flusher.Flush()
    
    // æŒç»­æ¨é€æ•°æ®
    counter := 1
    ticker := time.NewTicker(3 * time.Second)
    defer ticker.Stop()
    
    for {
        select {
        case <-ticker.C:
            data := map[string]interface{}{
                "counter":   counter,
                "message":   fmt.Sprintf("Goæ¨é€æ¶ˆæ¯ #%d", counter),
                "timestamp": time.Now().Unix(),
            }
            
            jsonData, _ := json.Marshal(data)
            fmt.Fprintf(w, "id: %d\n", counter)
            fmt.Fprintf(w, "event: update\n")
            fmt.Fprintf(w, "data: %s\n\n", jsonData)
            flusher.Flush()
            
            counter++
            
        case <-r.Context().Done():
            // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥
            log.Println("å®¢æˆ·ç«¯æ–­å¼€è¿æ¥")
            return
        }
    }
}

func main() {
    http.HandleFunc("/events", sseHandler)
    log.Println("SSEæœåŠ¡å™¨å¯åŠ¨åœ¨ :8080")
    log.Fatal(http.ListenAndServe(":8080", nil))
}
```

### 5.2 Ginæ¡†æ¶å®ç°


```go
// ğŸ“ gin_sse_server.go
package main

import (
    "fmt"
    "net/http"
    "time"
    
    "github.com/gin-gonic/gin"
)

func main() {
    r := gin.Default()
    
    // è·¨åŸŸè®¾ç½®
    r.Use(func(c *gin.Context) {
        c.Header("Access-Control-Allow-Origin", "*")
        c.Next()
    })
    
    r.GET("/events", func(c *gin.Context) {
        // è®¾ç½®SSEå“åº”å¤´
        c.Header("Content-Type", "text/event-stream")
        c.Header("Cache-Control", "no-cache")
        c.Header("Connection", "keep-alive")
        
        counter := 1
        for {
            select {
            case <-c.Request.Context().Done():
                return
            default:
                // å‘é€SSEæ•°æ®
                data := gin.H{
                    "counter": counter,
                    "message": fmt.Sprintf("Ginæ¨é€ #%d", counter),
                    "time":    time.Now().Format("15:04:05"),
                }
                
                c.SSEvent("update", data)
                c.Writer.Flush()
                
                counter++
                time.Sleep(4 * time.Second)
            }
        }
    })
    
    r.Run(":8080")
}
```

> ğŸš€ **Goè¯­è¨€ä¼˜åŠ¿**ï¼š
> - å¤©ç”Ÿåç¨‹æ”¯æŒï¼Œè½»æ¾å¤„ç†å¤§é‡å¹¶å‘è¿æ¥
> - å†…å­˜å ç”¨å°‘ï¼Œæ€§èƒ½ä¼˜å¼‚
> - Ginæ¡†æ¶æä¾›äº†ä¾¿æ·çš„SSEæ–¹æ³•

---

## 6. ğŸ”§ è·¨è¯­è¨€é€šç”¨å®ç°åŸåˆ™


### 6.1 æ ¸å¿ƒåŸåˆ™è¡¨æ ¼


| å®ç°è¦ç‚¹ | è¯´æ˜ | æ‰€æœ‰è¯­è¨€éƒ½è¦éµå®ˆ |
|---------|------|-----------------|
| **HTTPå¤´è®¾ç½®** | `Content-Type: text/event-stream` | âœ… å¿…é¡» |
| **ç¼“å­˜æ§åˆ¶** | `Cache-Control: no-cache` | âœ… å¿…é¡» |
| **è¿æ¥ä¿æŒ** | `Connection: keep-alive` | âœ… å¿…é¡» |
| **æ•°æ®æ ¼å¼** | `data: å†…å®¹\n\n` | âœ… å¿…é¡» |
| **ç«‹å³è¾“å‡º** | ç¦ç”¨ç¼“å†²ï¼ŒåŠæ—¶flush | âœ… å¿…é¡» |
| **è¿æ¥æ£€æµ‹** | æ£€æµ‹å®¢æˆ·ç«¯æ–­å¼€ | âœ… æ¨è |
| **é”™è¯¯å¤„ç†** | å¼‚å¸¸æ—¶æ¸…ç†èµ„æº | âœ… æ¨è |

### 6.2 é€šç”¨å®ç°æµç¨‹


```
SSEæœåŠ¡ç«¯é€šç”¨æµç¨‹:

1. æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚
   â†“
2. è®¾ç½®æ­£ç¡®çš„HTTPå“åº”å¤´
   â†“  
3. ç¦ç”¨è¾“å‡ºç¼“å†²
   â†“
4. å‘é€è¿æ¥æˆåŠŸç¡®è®¤
   â†“
5. è¿›å…¥æ•°æ®æ¨é€å¾ªç¯
   â”œâ”€â”€ æ„é€ è¦æ¨é€çš„æ•°æ®
   â”œâ”€â”€ æŒ‰SSEæ ¼å¼è¾“å‡º
   â”œâ”€â”€ ç«‹å³flushåˆ·æ–°ç¼“å†²åŒº
   â””â”€â”€ ç­‰å¾…ä¸‹æ¬¡æ¨é€æ—¶é—´
   â†“
6. æ£€æµ‹å®¢æˆ·ç«¯æ–­å¼€å¹¶æ¸…ç†èµ„æº
```

### 6.3 æ•°æ®æ ¼å¼æ ‡å‡†


**æ ‡å‡†SSEæ¶ˆæ¯æ ¼å¼**ï¼š
```
id: æ¶ˆæ¯å”¯ä¸€æ ‡è¯†
event: äº‹ä»¶ç±»å‹åç§°  
data: å®é™…è¦æ¨é€çš„æ•°æ®
retry: é‡è¿é—´éš”æ¯«ç§’æ•°

```

> ğŸ“– **æ ¼å¼è¯´æ˜**ï¼š
> - æ¯ä¸ªå­—æ®µå ä¸€è¡Œï¼Œä»¥`å­—æ®µå: å†…å®¹`æ ¼å¼
> - `data`å­—æ®µå¯ä»¥æœ‰å¤šè¡Œï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨æ‹¼æ¥
> - æ¶ˆæ¯ç»“å°¾å¿…é¡»æœ‰ä¸¤ä¸ªæ¢è¡Œç¬¦`\n\n`
> - æ‰€æœ‰è¯­è¨€çš„å®ç°éƒ½è¦éµå®ˆè¿™ä¸ªæ ¼å¼

---

## 7. ğŸ“Š æ€§èƒ½å¯¹æ¯”ä¸é€‰å‹å»ºè®®


### 7.1 æ€§èƒ½å¯¹æ¯”è¡¨


| è¯­è¨€/æ¡†æ¶ | å¹¶å‘è¿æ¥æ•° | å†…å­˜å ç”¨ | CPUå ç”¨ | å¼€å‘å¤æ‚åº¦ | ç”Ÿæ€å®Œå–„åº¦ |
|----------|-----------|---------|---------|-----------|-----------|
| **Goæ ‡å‡†åº“** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â˜† | â­â­â­â˜†â˜† |
| **Java Spring** | â­â­â­â­â˜† | â­â­â­â˜†â˜† | â­â­â­â˜†â˜† | â­â­â­â­â­ | â­â­â­â­â­ |
| **Python FastAPI** | â­â­â­â­â˜† | â­â­â­â˜†â˜† | â­â­â­â˜†â˜† | â­â­â­â­â˜† | â­â­â­â­â˜† |
| **Python Flask** | â­â­â­â˜†â˜† | â­â­â­â˜†â˜† | â­â­â˜†â˜†â˜† | â­â­â­â­â­ | â­â­â­â­â­ |
| **PHP** | â­â­â˜†â˜†â˜† | â­â­â­â­â˜† | â­â­â˜†â˜†â˜† | â­â­â­â˜†â˜† | â­â­â­â­â˜† |

### 7.2 é€‰å‹å»ºè®®


**ğŸ† æ€§èƒ½ä¼˜å…ˆåœºæ™¯**ï¼š
```
æ¨è: Go > Java Spring Boot > Python FastAPI
ç†ç”±: 
- Go: åç¨‹å¹¶å‘ï¼Œå†…å­˜å ç”¨å°ï¼Œæ€§èƒ½æœ€ä½³
- Java: ä¼ä¸šçº§ç¨³å®šï¼ŒJVMä¼˜åŒ–æˆç†Ÿ  
- FastAPI: Pythonä¸­æ€§èƒ½æœ€å¥½ï¼Œå¼‚æ­¥æ”¯æŒ
```

**ğŸ› ï¸ å¼€å‘æ•ˆç‡ä¼˜å…ˆ**ï¼š
```  
æ¨è: Python Flask > PHP > Java Spring Boot
ç†ç”±:
- Flask: ä»£ç ç®€æ´ï¼Œå¿«é€Ÿä¸Šæ‰‹
- PHP: Webå¼€å‘å‹å¥½ï¼Œéƒ¨ç½²ç®€å•
- Spring Boot: åŠŸèƒ½å®Œå–„ä½†å­¦ä¹ æˆæœ¬é«˜
```

**ğŸ¢ ä¼ä¸šçº§åº”ç”¨**ï¼š
```
æ¨è: Java Spring Boot > Go > Python FastAPI  
ç†ç”±:
- Spring Boot: ç”Ÿæ€å®Œå–„ï¼Œä¼ä¸šçº§ç‰¹æ€§å¤š
- Go: æ€§èƒ½ä¼˜å¼‚ï¼Œè¿ç»´æˆæœ¬ä½
- FastAPI: ç°ä»£åŒ–æ¡†æ¶ï¼ŒAPIå¼€å‘å‹å¥½
```

### 7.3 å®é™…é€‰æ‹©å»ºè®®


> ğŸ¯ **é€‰æ‹©ç­–ç•¥**ï¼š
> 
> **å°å‹é¡¹ç›®**ï¼šç›´æ¥é€‰ä½ æœ€ç†Ÿæ‚‰çš„è¯­è¨€
> **ä¸­å‹é¡¹ç›®**ï¼šä¼˜å…ˆè€ƒè™‘å›¢é˜ŸæŠ€æœ¯æ ˆ
> **å¤§å‹é¡¹ç›®**ï¼šæ€§èƒ½å’Œç”Ÿæ€å¹¶é‡ï¼Œæ¨èGoæˆ–Java
> **åŸå‹éªŒè¯**ï¼šPython Flaskæœ€å¿«ä¸Šæ‰‹

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SSEæœ¬è´¨ï¼šç‰¹æ®Šæ ¼å¼çš„HTTPé•¿è¿æ¥å“åº”æµ
ğŸ”¸ é€šç”¨åŸåˆ™ï¼šæ‰€æœ‰è¯­è¨€éƒ½è¦éµå®ˆç›¸åŒçš„SSEåè®®æ ‡å‡†  
ğŸ”¸ å“åº”å¤´è®¾ç½®ï¼šContent-Typeã€Cache-Controlã€Connectionæ˜¯å…³é”®
ğŸ”¸ æ•°æ®æ ¼å¼ï¼šdata: å†…å®¹\n\n æ˜¯æœ€åŸºæœ¬è¦æ±‚
ğŸ”¸ ç¼“å†²æ§åˆ¶ï¼šå¿…é¡»åŠæ—¶flushï¼Œå¦åˆ™æ•°æ®æ¨é€ä¸åŠæ—¶
```

### 8.2 å„è¯­è¨€å®ç°ç‰¹ç‚¹


**ğŸ Python**ï¼š
- **Flask**ï¼šç®€å•æ˜“æ‡‚ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘
- **FastAPI**ï¼šå¼‚æ­¥æ”¯æŒï¼Œæ€§èƒ½æ›´å¥½ï¼Œç°ä»£åŒ–

**â˜• Java**ï¼š  
- **Spring Boot**ï¼šä¼ä¸šçº§é¦–é€‰ï¼ŒSseEmitterå¾ˆå¥½ç”¨
- **æ³¨æ„ç‚¹**ï¼šè¦å¤„ç†è¿æ¥æ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼

**ğŸ˜ PHP**ï¼š
- **å…³é”®ç‚¹**ï¼šå¿…é¡»å…³é—­è¾“å‡ºç¼“å†²`ob_end_clean()`
- **æ£€æµ‹æ–­å¼€**ï¼šç”¨`connection_aborted()`

**ğŸš€ Go**ï¼š
- **ä¼˜åŠ¿**ï¼šæ€§èƒ½æœ€ä½³ï¼Œå¹¶å‘å¤„ç†èƒ½åŠ›å¼º  
- **å®ç°**ï¼šç”¨`http.Flusher`æ¥å£æ§åˆ¶è¾“å‡º

### 8.3 å®è·µè¦ç‚¹


**âœ… å¼€å‘æ—¶å¿…åš**ï¼š
- è®¾ç½®æ­£ç¡®çš„HTTPå“åº”å¤´
- åŠæ—¶flushè¾“å‡ºç¼“å†²åŒº  
- æ£€æµ‹å®¢æˆ·ç«¯æ–­å¼€è¿æ¥
- å¤„ç†å¼‚å¸¸å¹¶æ¸…ç†èµ„æº

**âš ï¸ å¸¸è§å‘ç‚¹**ï¼š
- å¿˜è®°è®¾ç½®`Content-Type: text/event-stream`
- è¾“å‡ºç¼“å†²å¯¼è‡´æ•°æ®ä¸åŠæ—¶æ¨é€
- è¿æ¥æ³„æ¼å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½
- è·¨åŸŸé—®é¢˜å¯¼è‡´å‰ç«¯æ— æ³•è¿æ¥

**ğŸ¯ æ€§èƒ½ä¼˜åŒ–**ï¼š
- Goè¯­è¨€é¦–é€‰é«˜å¹¶å‘åœºæ™¯
- Javaé€‚åˆä¼ä¸šçº§ç¨³å®šéœ€æ±‚
- Pythoné€‚åˆå¿«é€Ÿå¼€å‘éªŒè¯
- PHPé€‚åˆä¼ ç»ŸWebé¡¹ç›®é›†æˆ

**æ ¸å¿ƒè®°å¿†**ï¼š
- SSEå°±æ˜¯æŒç»­æ¨é€çš„HTTPå“åº”æµ
- å„è¯­è¨€å®ç°æ–¹å¼ä¸åŒä½†åè®®æ ‡å‡†ç»Ÿä¸€  
- é€‰æ‹©è¯­è¨€çœ‹åœºæ™¯ï¼šæ€§èƒ½é€‰Goï¼Œç¨³å®šé€‰Javaï¼Œå¿«é€Ÿé€‰Python
- è®°ä½ä¸‰ä¸ªå¿…å¤‡å“åº”å¤´ï¼ŒæŒæ¡flushè¾“å‡ºæ§åˆ¶