---
title: 1、自由风格项目
---
## 📚 目录

1. [什么是自由风格项目](#1-什么是自由风格项目)
2. [项目创建流程](#2-项目创建流程)
3. [项目基本配置详解](#3-项目基本配置详解)
4. [源码管理设置](#4-源码管理设置)
5. [构建环境配置](#5-构建环境配置)
6. [构建步骤添加](#6-构建步骤添加)
7. [构建后操作设置](#7-构建后操作设置)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 什么是自由风格项目


### 1.1 简单理解自由风格项目


**🔸 用生活例子理解**
```
想象你要做一道菜：
传统做法：按照固定食谱，步骤不能变
自由风格：你可以自由搭配食材和步骤

Jenkins自由风格项目就像"自由搭配做菜"：
✅ 你可以自由选择构建步骤
✅ 你可以自由组合各种功能
✅ 你可以根据项目需要灵活配置
```

### 1.2 自由风格项目的本质


**📋 核心定义**
```
自由风格项目 = Jenkins最基础、最灵活的项目类型
作用：让你可以自由组合各种构建操作
特点：像搭积木一样，想要什么功能就添加什么
```

**💡 为什么叫"自由风格"**
- **自由选择**：构建步骤你说了算
- **自由组合**：多个操作可以随意搭配
- **自由扩展**：可以随时添加新功能
- **自由配置**：每个环节都可以个性化设置

### 1.3 适用场景


**🎯 什么时候用自由风格项目**
```
✅ 适合场景：
• 简单的构建任务
• 需要灵活配置的项目
• 学习Jenkins的入门项目
• 快速验证想法的实验项目

❌ 不太适合：
• 复杂的多分支项目
• 需要流水线的复杂工作流
• 大型企业级项目（推荐Pipeline）
```

---

## 2. 🚀 项目创建流程


### 2.1 创建项目的完整步骤


**📋 创建流程图**
```
开始
  ↓
登录Jenkins → 点击"新建任务" → 输入项目名称 → 选择项目类型
  ↓                ↓                ↓              ↓
确保权限正常      左侧菜单找到      名称要规范      选择"自由风格"
  ↓                                                 ↓
点击确定 → 进入配置页面 → 完成基础配置 → 保存项目
  ↓           ↓              ↓           ↓
创建成功      开始详细配置    测试配置     投入使用
```

### 2.2 创建项目实操详解


**🔧 第一步：登录和导航**
```
1. 打开Jenkins首页
2. 使用管理员账号登录
3. 点击左侧菜单"新建任务"或"New Item"
```

**📝 第二步：项目命名**
```
项目名称规范：
✅ 好的命名：my-web-app、user-service-build
✅ 清晰明了：team1-frontend、api-test-job
❌ 避免使用：test、项目1、临时任务

命名建议：
• 用英文和短横线
• 体现项目性质
• 便于团队理解
• 避免特殊字符
```

**🎯 第三步：选择项目类型**
```
项目类型选择：
📦 自由风格项目 ← 我们要选这个
📁 多配置项目
🔀 流水线
📋 多分支流水线
📂 文件夹
```

### 2.3 创建成功后的界面


**🖥️ 项目主页布局**
```
┌─ 项目主页 ──────────────────────────┐
│ 📊 项目状态   🔧 配置   📈 工作空间   │
│ ──────────────────────────────────│
│ 🏗️ 立即构建                        │
│ 📜 构建历史                        │
│ 📊 构建趋势图                      │
│ ⚙️ 项目配置入口                    │
└────────────────────────────────────┘
```

---

## 3. ⚙️ 项目基本配置详解


### 3.1 配置页面总览


**📋 配置页面结构**
```
配置页面从上到下包含：
┌─ 基本信息配置 ──────────────────┐
│ • 项目描述                     │
│ • 项目显示名称                 │
│ • 保留构建历史设置             │
└────────────────────────────────┘
         ↓
┌─ 源码管理配置 ──────────────────┐
│ • Git/SVN等版本控制设置        │
│ • 分支指定                     │
│ • 认证配置                     │
└────────────────────────────────┘
         ↓
┌─ 构建触发器配置 ────────────────┐
│ • 定时构建                     │
│ • 代码变更触发                 │
│ • 其他项目触发                 │
└────────────────────────────────┘
         ↓
┌─ 构建环境配置 ──────────────────┐
│ • 环境变量设置                 │
│ • 工具版本选择                 │
│ • 清理工作空间                 │
└────────────────────────────────┘
         ↓
┌─ 构建步骤配置 ──────────────────┐
│ • 执行shell命令                │
│ • 调用其他工具                 │
│ • 文件操作                     │
└────────────────────────────────┘
         ↓
┌─ 构建后操作配置 ────────────────┐
│ • 邮件通知                     │
│ • 文件归档                     │
│ • 测试报告发布                 │
└────────────────────────────────┘
```

### 3.2 基本信息配置


**📝 项目描述设置**
```
┌─ 项目描述最佳实践 ─────────────┐
│ 描述内容应该包含：             │
│ • 项目用途说明                │
│ • 负责人信息                  │
│ • 构建频率说明                │
│ • 特殊注意事项                │
│                              │
│ 示例：                       │
│ "用户服务API自动构建任务       │
│  负责人：张三(zhangsan@xx.com) │
│  每天晚上自动构建              │
│  构建失败请及时查看日志"       │
└───────────────────────────────┘
```

**🔢 构建历史保留设置**
```
为什么要设置构建历史保留？
磁盘空间问题：构建历史会占用大量磁盘
性能考虑：太多历史记录影响页面加载

推荐设置：
天数保留：30天（一个月）
构建数量：最多保留50个
```

### 3.3 高级项目配置


**🏷️ 参数化构建**
```
什么是参数化构建？
就像函数调用时传参数一样，构建时也可以传参数

使用场景：
• 构建不同环境（开发、测试、生产）
• 选择不同分支进行构建
• 设置不同的构建选项

常用参数类型：
✅ 字符串参数：输入文本
✅ 选择参数：下拉选择
✅ 布尔参数：勾选框
✅ 文件参数：上传文件
```

---

## 4. 📂 源码管理设置


### 4.1 源码管理基础概念


**🔸 什么是源码管理**
```
简单理解：
源码管理 = 告诉Jenkins去哪里获取代码

就像网购时填写收货地址一样：
Jenkins需要知道：
• 代码仓库在哪里（地址）
• 用什么方式获取（Git/SVN）
• 需要什么权限（账号密码）
• 获取哪个版本（分支/标签）
```

### 4.2 Git源码管理配置


**🔧 Git配置步骤详解**

**第一步：选择Git选项**
```
源码管理选项：
○ None（无源码管理）
● Git ← 选择这个
○ Subversion
○ 其他版本控制系统
```

**第二步：仓库URL配置**
```
仓库URL格式：
HTTPS方式：https://github.com/username/repo.git
SSH方式：git@github.com:username/repo.git

选择建议：
• 公开仓库：用HTTPS简单
• 私有仓库：用SSH更安全
• 企业内部：根据公司规范
```

**第三步：认证配置**
```
认证方式选择：
┌─ HTTPS认证 ─────────────────┐
│ • 用户名密码方式            │
│ • Personal Access Token    │
│ • 相对简单，适合入门        │
└─────────────────────────────┘

┌─ SSH认证 ───────────────────┐
│ • SSH密钥对方式             │
│ • 更安全，企业常用          │
│ • 需要预先配置密钥          │
└─────────────────────────────┘
```

**第四步：分支指定**
```
分支配置选项：
*/main     ← 主分支（推荐新项目使用）
*/master   ← 老项目的主分支
*/develop  ← 开发分支
feature/*  ← 所有功能分支
```

### 4.3 常见源码管理问题


**🚨 常见错误及解决方案**

```
❌ 错误1：认证失败
现象：构建时提示"Authentication failed"
解决：检查用户名密码或SSH密钥配置

❌ 错误2：仓库地址错误
现象：提示"repository not found"
解决：确认仓库URL拼写正确，检查权限

❌ 错误3：分支不存在
现象：提示"Couldn't find any revision to build"
解决：检查分支名称是否正确

❌ 错误4：网络连接问题
现象：超时或连接失败
解决：检查网络连接，确认代理设置
```

---

## 5. 🌍 构建环境配置


### 5.1 构建环境概念理解


**🔸 什么是构建环境**
```
生活例子：
做菜前要准备厨房环境：
• 准备锅碗瓢盆（工具）
• 调整火候大小（参数）
• 准备调料配菜（依赖）

Jenkins构建环境就是：
• 准备构建工具（JDK、Node.js等）
• 设置环境变量（PATH、配置参数）
• 清理工作空间（删除旧文件）
```

### 5.2 环境变量设置


**📋 环境变量配置**
```
┌─ 环境变量设置示例 ─────────────┐
│ 变量名称    │  变量值           │
├─────────────┼───────────────────┤
│ JAVA_HOME   │ /usr/lib/jvm/...  │
│ NODE_ENV    │ production        │
│ API_URL     │ http://api.xxx... │
│ BUILD_ENV   │ test              │
└─────────────┴───────────────────┘

使用场景：
• 设置工具路径
• 配置应用参数
• 区分环境（开发/测试/生产）
```

### 5.3 工作空间管理


**🧹 工作空间清理**
```
为什么要清理工作空间？
• 删除上次构建的残留文件
• 确保构建环境干净
• 避免文件冲突问题

清理选项：
✅ 构建前删除工作空间
✅ 构建后删除工作空间  
□ 构建失败时删除工作空间
```

**📁 工作空间结构**
```
典型工作空间目录：
/var/jenkins_home/workspace/项目名/
├── .git/           # Git版本控制信息
├── src/            # 源代码目录
├── build/          # 构建输出目录
├── node_modules/   # 依赖包（如果是Node.js项目）
└── target/         # 构建目标目录（如果是Java项目）
```

---

## 6. 🔨 构建步骤添加


### 6.1 构建步骤概念


**🔸 什么是构建步骤**
```
简单理解：
构建步骤 = 告诉Jenkins要做什么事情

像写作业步骤一样：
第1步：下载代码
第2步：安装依赖
第3步：编译代码
第4步：运行测试
第5步：打包发布

Jenkins会按顺序执行这些步骤
```

### 6.2 常用构建步骤类型


**📋 构建步骤分类**
```
┌─ 常用构建步骤类型 ─────────────────┐
│                                  │
│ 🖥️ 执行Shell      │ 运行命令行脚本 │
│ 🚀 调用Ant        │ Java项目构建   │
│ 📦 调用Maven      │ Java依赖管理   │
│ 🎯 调用Gradle     │ 现代构建工具   │
│ 📂 发送文件       │ 文件传输操作   │
│ 🔧 执行Windows批处理 │ Windows环境  │
│                                  │
└──────────────────────────────────┘
```

### 6.3 执行Shell构建步骤


**🖥️ Shell脚本构建**
```bash
# 典型的前端项目构建脚本
echo "开始构建前端项目..."

# 第1步：清理旧的构建文件
rm -rf dist/

# 第2步：安装依赖包
npm install

# 第3步：运行代码检查
npm run lint

# 第4步：运行测试
npm test

# 第5步：构建生产版本
npm run build

echo "构建完成！"
```

**🔧 Java项目构建示例**
```bash
# Java Maven项目构建
echo "开始构建Java项目..."

# 清理之前的构建
mvn clean

# 编译和测试
mvn compile test

# 打包
mvn package

# 显示构建结果
ls -la target/
```

### 6.4 构建步骤最佳实践


**💡 编写构建脚本技巧**
```
✅ 好的实践：
• 每个步骤都有清晰的echo输出
• 使用set -e 让脚本遇错就停
• 适当添加注释说明
• 检查关键文件是否存在

❌ 避免的问题：
• 硬编码路径和配置
• 没有错误处理
• 脚本过于复杂
• 缺少日志输出
```

**🎯 构建脚本模板**
```bash
#!/bin/bash
set -e  # 遇到错误就停止

echo "================================"
echo "开始构建项目: $JOB_NAME"
echo "构建编号: $BUILD_NUMBER"
echo "================================"

# 步骤1：环境检查
echo "🔍 检查构建环境..."
node --version
npm --version

# 步骤2：安装依赖
echo "📦 安装项目依赖..."
npm ci

# 步骤3：代码检查
echo "🔍 运行代码检查..."
npm run lint

# 步骤4：运行测试
echo "🧪 运行单元测试..."
npm test

# 步骤5：构建项目
echo "🏗️ 构建项目..."
npm run build

echo "✅ 构建成功完成！"
```

---

## 7. 📮 构建后操作设置


### 7.1 构建后操作概念


**🔸 什么是构建后操作**
```
简单理解：
构建后操作 = 构建完成后要做的事情

就像考试后的操作：
• 收集试卷（归档文件）
• 批改试卷（分析结果）
• 通知家长（发送邮件）
• 统计成绩（生成报告）

Jenkins构建后操作就是处理构建结果
```

### 7.2 文件归档操作


**📂 归档文件配置**
```
为什么要归档文件？
• 保存构建产物（如jar包、zip文件）
• 方便下载和部署
• 作为发布版本的备份

归档文件设置：
要归档的文件: target/*.jar, dist/*.zip
保留天数: 30天
最大保留数量: 10个
```

**📋 归档文件模式**
```
常用归档模式：
target/**/*.jar          # Java打包文件
dist/**                  # 前端构建输出
build/libs/*.jar         # Gradle构建输出
*.zip, *.tar.gz         # 压缩包文件
logs/*.log              # 构建日志文件
```

### 7.3 邮件通知配置


**📧 邮件通知设置**
```
┌─ 邮件通知时机 ─────────────────┐
│ □ 构建成功时发送              │
│ ✅ 构建失败时发送              │
│ ✅ 构建状态改变时发送          │
│ □ 每次构建都发送              │
└───────────────────────────────┘

邮件内容包含：
• 项目名称和构建编号
• 构建结果（成功/失败）
• 构建日志链接
• 变更记录摘要
```

### 7.4 测试报告发布


**📊 测试报告配置**
```
支持的测试报告格式：
✅ JUnit测试报告 (XML格式)
✅ TestNG测试报告
✅ 覆盖率报告 (Cobertura/JaCoCo)
✅ 静态代码分析报告

测试报告路径示例：
JUnit报告: target/surefire-reports/*.xml
覆盖率报告: target/site/jacoco/
```

### 7.5 构建触发器设置


**🔔 下游项目触发**
```
什么是下游项目？
当前项目构建成功后，自动触发其他项目构建

使用场景：
项目A构建完成 → 自动触发项目B部署
单元测试通过 → 自动触发集成测试
代码构建成功 → 自动触发Docker镜像构建

配置方式：
触发条件: 构建成功时
下游项目: deploy-to-test, integration-test
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


```
🔸 自由风格项目：Jenkins最基础、最灵活的项目类型
🔸 项目配置：从源码获取到构建输出的完整流程配置
🔸 构建步骤：按顺序执行的构建任务，是核心功能
🔸 源码管理：告诉Jenkins去哪里获取代码
🔸 构建环境：为构建过程准备必要的工具和环境
🔸 构建后操作：处理构建结果，如通知、归档、触发等
```

### 8.2 配置流程记忆


**🔄 完整配置流程**
```
创建项目 → 基本信息 → 源码管理 → 构建环境 → 构建步骤 → 构建后操作 → 保存测试
    ↓         ↓         ↓         ↓         ↓         ↓         ↓
输入名称   写描述     配置Git   设环境变量  写脚本    设通知    验证配置
```

### 8.3 关键理解要点


**🔹 自由风格项目的本质**
```
理解要点：
• 自由 = 灵活配置，想要什么功能就添加什么
• 风格 = 有一定的模式和结构，不是随意的
• 项目 = 一个完整的CI/CD任务单元
```

**🔹 配置各部分的作用**
```
源码管理：解决"代码从哪来"的问题
构建环境：解决"用什么工具"的问题  
构建步骤：解决"具体做什么"的问题
构建后操作：解决"结果怎么处理"的问题
```

**🔹 构建步骤编写原则**
```
KISS原则：Keep It Simple, Stupid
• 每个步骤职责单一
• 添加足够的日志输出
• 合理的错误处理
• 便于调试和维护
```

### 8.4 实际应用价值


**🎯 业务场景应用**
- **前端项目**：代码检查 → 单元测试 → 构建打包 → 部署到CDN
- **后端服务**：代码编译 → 单元测试 → 打包JAR → 部署到服务器
- **移动应用**：代码构建 → 自动化测试 → 打包APK → 发布到测试环境

**🔧 运维实践**
- **监控告警**：构建失败及时邮件通知
- **版本管理**：自动归档构建产物
- **质量把控**：集成代码检查和测试报告
- **流程自动化**：构建成功自动触发部署

### 8.5 常见问题预防


**⚠️ 避免的错误**
```
配置错误：
❌ 源码地址配置错误
❌ 认证信息配置不当
❌ 构建脚本路径硬编码
❌ 环境变量设置遗漏

操作错误：
❌ 直接在生产分支实验
❌ 构建脚本没有错误处理
❌ 忘记设置构建历史清理
❌ 邮件通知配置过于频繁
```

**✅ 最佳实践**
```
项目管理：
• 使用有意义的项目名称
• 添加详细的项目描述
• 合理设置构建历史保留
• 定期检查和更新配置

脚本编写：
• 使用相对路径而非绝对路径
• 添加详细的日志输出
• 合理的错误处理和回滚
• 脚本版本化管理
```

**核心记忆**：
- 自由风格项目是Jenkins入门的最佳选择
- 配置流程有固定套路：源码→环境→构建→后处理
- 构建步骤是核心，要写得清晰可维护
- 合理的通知和归档让项目更专业