---
title: 2、Jenkins初始配置
---
## 📚 目录

1. [什么是Jenkins初始配置](#1-什么是jenkins初始配置)
2. [首次启动配置向导](#2-首次启动配置向导)
3. [管理员账户创建](#3-管理员账户创建)
4. [基础安全设置](#4-基础安全设置)
5. [系统基本配置](#5-系统基本配置)
6. [工作目录设置](#6-工作目录设置)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🎯 什么是Jenkins初始配置


### 1.1 初始配置的本质含义


**🔸 简单理解**：就像买了新手机需要开机设置一样，Jenkins安装完成后也需要进行首次设置

```
类比理解：
新手机开机设置     ←→     Jenkins初始配置
    ↓                        ↓
设置语言、WiFi           设置管理员、安全策略
创建用户账号             创建Jenkins用户
安装必要应用             安装必要插件
配置基本选项             配置工作目录
```

**🔸 为什么需要初始配置**
- **安全原因**：Jenkins默认是"裸奔"状态，任何人都能访问
- **功能完善**：需要安装插件才能发挥真正作用
- **个性化**：根据团队需求定制工作环境
- **稳定运行**：正确配置才能长期稳定工作

### 1.2 初始配置包含哪些内容


**📋 配置清单**
```
🔐 安全设置：解锁Jenkins + 创建管理员
🔧 插件安装：选择必要的功能插件
👤 用户管理：设置访问权限和用户账号
📁 目录配置：指定代码存放和工作位置
🌐 网络设置：配置访问地址和端口
⚙️ 全局配置：设置系统级别的参数
```

---

## 2. 🚀 首次启动配置向导


### 2.1 启动向导是什么


**💡 通俗解释**：配置向导就像装修房子的设计师，一步步引导你把Jenkins"装修"成能用的状态

```
Jenkins启动流程：
安装完成 → 启动服务 → 浏览器访问 → 解锁向导 → 插件安装 → 用户创建 → 配置完成
    ↓         ↓         ↓         ↓         ↓         ↓         ↓
 程序就绪   服务运行   界面显示   输入密码   选择功能   设置账号   开始使用
```

### 2.2 解锁Jenkins


**🔐 解锁步骤详解**

**步骤1：获取初始密码**
```bash
# 密码文件位置（Linux/Mac）
cat /var/lib/jenkins/secrets/initialAdminPassword

# Windows系统路径
C:\Program Files (x86)\Jenkins\secrets\initialAdminPassword
```

**🔸 实际操作场景**
```
情况：首次访问 http://localhost:8080
看到：一个解锁页面，要求输入管理员密码
操作：打开终端，输入上面的命令查看密码
结果：复制密码，粘贴到网页中，点击继续
```

**❓ 常见问题解答**
- **Q**: 找不到密码文件怎么办？
- **A**: 检查Jenkins安装路径，或在Jenkins日志中查找密码信息

- **Q**: 密码文件是空的？
- **A**: 可能是权限问题，用管理员权限查看

### 2.3 选择插件安装方式


**🔧 两种安装方式对比**

| 安装方式 | **适合人群** | **优点** | **缺点** | **推荐指数** |
|---------|------------|---------|---------|-------------|
| **建议安装** | `新手用户` | `自动选择常用插件` | `可能安装不需要的插件` | `⭐⭐⭐⭐⭐` |
| **自定义安装** | `有经验用户` | `精确控制插件列表` | `容易遗漏必要插件` | `⭐⭐⭐` |

**💡 新手建议**：直接选择"建议安装"，包含了最常用的功能

**🔸 建议安装包含的核心插件**
```
基础功能插件：
- Git：代码版本控制
- Pipeline：构建流水线
- Blue Ocean：现代化界面
- Build Timeout：构建超时控制

部署相关插件：
- SSH：远程服务器部署
- Docker：容器化部署
- Maven/Gradle：Java项目构建
- NodeJS：前端项目构建
```

---

## 3. 👤 管理员账户创建


### 3.1 为什么需要管理员账户


**🛡️ 安全考虑**
```
无管理员状态：任何人都能修改Jenkins → 很危险！
有管理员状态：只有认证用户才能操作 → 安全可控
```

**🔸 管理员的权限范围**
- **系统管理**：插件安装、系统配置、用户管理
- **项目管理**：创建、删除、修改所有项目
- **安全控制**：设置访问权限、用户角色分配
- **维护操作**：备份恢复、日志查看、性能监控

### 3.2 创建管理员账户步骤


**📝 账户信息填写**

```
表单字段说明：
┌─────────────────┐
│ 用户名：admin   │ ← 登录时使用的用户名
├─────────────────┤
│ 密码：********  │ ← 建议使用强密码
├─────────────────┤
│ 确认密码：****** │ ← 再次输入确认
├─────────────────┤
│ 全名：管理员     │ ← 显示名称，可以是中文
├─────────────────┤
│ 邮箱：admin@xxx │ ← 用于接收通知邮件
└─────────────────┘
```

**🔐 密码安全建议**
- **长度要求**：至少8位字符
- **复杂度要求**：包含大小写字母、数字、特殊符号
- **避免使用**：生日、名字、常见密码（如123456）
- **推荐格式**：`Jenkins@2024!` 这种易记又安全的组合

### 3.3 账户创建后的验证


**✅ 验证步骤**
```
创建完成 → 自动登录 → 查看欢迎页面 → 测试注销登录 → 重新登录验证
    ↓         ↓         ↓           ↓           ↓
  信息保存   权限生效   界面正常     登录状态清除   账户验证成功
```

---

## 4. 🔒 基础安全设置


### 4.1 安全设置的重要性


**⚠️ 不设置安全的风险**
```
风险场景：
公司内网的Jenkins没有安全设置 → 任何同事都能删除项目
外网暴露的Jenkins无认证 → 黑客可能植入恶意代码
测试环境权限过大 → 误操作可能影响生产环境
```

**🛡️ 安全设置能解决什么问题**
- **访问控制**：只有授权用户才能使用
- **权限分级**：不同用户有不同操作权限
- **审计追踪**：记录谁做了什么操作
- **防止误操作**：重要操作需要确认

### 4.2 基础安全配置项


**🔸 全局安全配置位置**
```
操作路径：
Jenkins首页 → Manage Jenkins → Configure Global Security
                ↓
            全局安全配置页面
```

**📋 核心安全设置**

| 设置项 | **推荐配置** | **作用说明** | **新手建议** |
|-------|------------|-------------|-------------|
| **安全域** | `Jenkins用户数据库` | `用户信息存储方式` | `默认即可` |
| **授权策略** | `登录用户可以做任何事` | `用户权限控制` | `适合小团队` |
| **注册功能** | `关闭` | `是否允许自由注册` | `建议关闭` |
| **记住我** | `开启` | `免重复登录` | `方便使用` |

### 4.3 权限策略详解


**🎯 权限策略对比**

```
权限策略选择指南：
┌─────────────────────────────────────┐
│ 任何用户可以做任何事（测试环境）      │ ← 最宽松，适合学习
├─────────────────────────────────────┤
│ 登录用户可以做任何事（小团队）        │ ← 平衡，适合小团队
├─────────────────────────────────────┤
│ 矩阵权限控制（企业环境）             │ ← 最严格，适合大团队
└─────────────────────────────────────┘
```

**💡 新手建议配置**
```
推荐配置：登录用户可以做任何事
原因：
✅ 安全性：需要登录才能操作
✅ 简单性：不需要复杂的权限配置
✅ 灵活性：团队成员都有完整权限
✅ 适用性：适合小团队和学习环境
```

---

## 5. ⚙️ 系统基本配置


### 5.1 系统配置是什么


**🔧 通俗理解**：系统配置就像给汽车调整座椅、后视镜一样，让Jenkins更适合你的使用习惯

**📋 系统配置包含的内容**
```
基础信息配置：
- Jenkins URL：告诉Jenkins自己的网址
- 系统管理员邮箱：用于发送系统通知
- 并发构建数：同时能运行几个任务

环境变量配置：
- JDK路径：Java开发工具包位置
- Git路径：版本控制工具位置
- Maven/Node.js路径：构建工具位置
```

### 5.2 重要配置项详解


**🌐 Jenkins URL配置**

**为什么重要**：Jenkins需要知道自己的访问地址，用于生成邮件链接、API调用等

```
配置示例：
开发环境：http://localhost:8080
测试环境：http://jenkins-test.company.com
生产环境：https://jenkins.company.com

配置位置：
Manage Jenkins → Configure System → Jenkins Location
```

**📧 系统管理员邮箱**

**作用说明**：当系统出现问题时，Jenkins会发送邮件到这个地址

```
配置建议：
个人学习：你的个人邮箱
团队使用：团队邮箱或运维邮箱

示例：jenkins-admin@company.com
```

**⚡ 并发构建配置**

**🔸 并发数量设置建议**
```
服务器配置参考：
CPU核数：4核  → 建议并发数：2
CPU核数：8核  → 建议并发数：4
CPU核数：16核 → 建议并发数：8

计算公式：并发数 = CPU核数 / 2
原因：预留一半资源给系统和其他服务
```

### 5.3 工具配置


**🛠️ 全局工具配置位置**
```
操作路径：
Manage Jenkins → Global Tool Configuration
```

**📦 常用工具配置**

**JDK配置**
```
配置说明：
- 名称：JDK8（自定义名称）
- JAVA_HOME：/usr/lib/jvm/java-8-openjdk
- 自动安装：建议关闭（使用系统已安装的JDK）
```

**Git配置**
```
配置说明：
- 名称：Default（默认名称即可）
- Path to Git executable：/usr/bin/git
- 自动安装：通常关闭（系统已有Git）
```

---

## 6. 📁 工作目录设置


### 6.1 什么是Jenkins工作目录


**🏠 通俗理解**：工作目录就像Jenkins的"家"，所有的代码、构建文件、配置信息都存放在这里

```
工作目录结构：
JENKINS_HOME/
├── config.xml          ← Jenkins主配置文件
├── jobs/               ← 所有项目的配置和构建历史
│   ├── 项目A/
│   └── 项目B/
├── plugins/            ← 安装的插件
├── workspace/          ← 代码检出和构建的地方
├── users/              ← 用户信息
└── logs/               ← 系统日志
```

### 6.2 默认工作目录


**📍 不同系统的默认位置**

| 操作系统 | **默认工作目录** | **特点** |
|---------|----------------|---------|
| **Linux** | `/var/lib/jenkins` | `系统级安装` |
| **Windows** | `C:\Program Files\Jenkins` | `程序文件夹` |
| **macOS** | `/Users/用户名/.jenkins` | `用户主目录` |
| **Docker** | `/var/jenkins_home` | `容器内路径` |

### 6.3 工作目录设置建议


**💾 存储空间考虑**
```
空间需求评估：
项目数量：10个项目
构建历史：每个项目保留20次构建
代码大小：每个项目平均100MB
估算空间：10 × 20 × 100MB = 20GB

建议配置：
- 最小空间：50GB
- 推荐空间：100GB以上
- 企业环境：500GB以上
```

**🔧 自定义工作目录**

**设置方法1：启动参数**
```bash
# Linux系统
java -DJENKINS_HOME=/opt/jenkins -jar jenkins.war

# Windows系统
java -DJENKINS_HOME=D:\Jenkins -jar jenkins.war
```

**设置方法2：环境变量**
```bash
# Linux/macOS
export JENKINS_HOME=/opt/jenkins

# Windows
set JENKINS_HOME=D:\Jenkins
```

### 6.4 目录权限设置


**🔐 权限配置的重要性**
```
权限问题可能导致：
❌ Jenkins无法写入文件
❌ 构建过程失败
❌ 插件安装失败
❌ 配置无法保存
```

**✅ 正确的权限设置**
```bash
# Linux系统权限设置
sudo chown -R jenkins:jenkins /var/lib/jenkins
sudo chmod -R 755 /var/lib/jenkins

# 关键目录权限检查
ls -la /var/lib/jenkins/
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念


```
🔸 初始配置本质：Jenkins安装后的首次设置，类似新手机开机配置
🔸 配置向导流程：解锁 → 选插件 → 创建用户 → 系统配置 → 完成
🔸 安全设置重要性：控制访问权限，防止误操作和恶意使用
🔸 工作目录作用：存储所有Jenkins数据，需要足够空间和正确权限
🔸 基础配置项：URL、邮箱、并发数、工具路径等关键设置
```

### 7.2 关键理解要点


**🔹 为什么初始配置如此重要**
```
安全角度：
- 默认Jenkins没有任何安全防护
- 初始配置建立基本的访问控制
- 管理员账户是整个系统的"钥匙"

功能角度：
- 插件安装决定了Jenkins能做什么
- 工具配置影响构建任务的执行
- 目录设置关系到数据存储和性能
```

**🔹 配置的先后顺序很重要**
```
正确顺序：解锁 → 插件 → 用户 → 安全 → 系统
原因：
1. 先解锁才能进入系统
2. 插件提供基础功能
3. 用户管理需要插件支持
4. 安全设置保护整个系统
5. 系统配置优化使用体验
```

**🔹 新手常见误区**
```
❌ 跳过安全设置：觉得麻烦，直接用默认配置
✅ 正确做法：至少设置管理员账户和基本权限

❌ 盲目安装插件：觉得多多益善，全部安装
✅ 正确做法：按需安装，避免系统臃肿

❌ 忽略工作目录：使用默认位置不考虑空间
✅ 正确做法：规划足够空间，设置合适权限
```

### 7.3 实际应用指导


**🎯 适合新手的配置策略**
```
安全策略：中等安全（有用户认证，权限适中）
插件选择：建议安装（包含常用功能）
工作目录：默认位置（确保有足够空间）
工具配置：安装后再配置（避免一次配置太多）
```

**🔧 配置后的验证步骤**
```
✅ 登录测试：能否正常登录和注销
✅ 权限测试：能否创建和删除项目
✅ 插件测试：核心插件是否正常工作
✅ 目录测试：文件能否正常读写
✅ 工具测试：构建工具路径是否正确
```

**💡 后续学习建议**
```
掌握初始配置后，下一步学习：
1. 创建第一个简单项目
2. 了解构建过程和日志
3. 学习插件的使用方法
4. 深入学习安全和权限管理
5. 探索高级配置和优化
```

**🧠 记忆要点**
- **初始配置四步走**：解锁、插件、用户、设置
- **安全第一原则**：宁可严格一点，也不要裸奔运行
- **工作目录三要素**：位置合理、空间充足、权限正确
- **配置完成验证**：测试登录、权限、功能是否正常

**核心记忆口诀**：
> 初始配置不可少，安全设置要做好  
> 插件选择需谨慎，目录权限要设牢  
> 用户账号创建好，系统配置调试巧  
> 验证测试不能省，稳定运行有依靠