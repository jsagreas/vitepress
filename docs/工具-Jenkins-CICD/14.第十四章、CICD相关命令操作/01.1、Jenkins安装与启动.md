---
title: 1、Jenkins安装与启动
---
## 📚 目录

1. [Jenkins基本概念](#1-Jenkins基本概念)
2. [安装前准备工作](#2-安装前准备工作)
3. [CentOS/RHEL系统安装Jenkins](#3-CentOS-RHEL系统安装Jenkins)
4. [Jenkins服务管理](#4-Jenkins服务管理)
5. [网络配置与端口管理](#5-网络配置与端口管理)
6. [初始化配置](#6-初始化配置)
7. [常见问题与排查](#7-常见问题与排查)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 Jenkins基本概念


### 1.1 什么是Jenkins

**简单理解**：Jenkins就像一个自动化的"管家"，专门帮你自动完成软件开发中的重复性工作。

```
传统开发流程（手工操作）：
程序员写代码 → 手动编译 → 手动测试 → 手动部署到服务器

Jenkins自动化流程：
程序员提交代码 → Jenkins自动编译 → 自动测试 → 自动部署
```

**🔸 核心作用**
- **自动化构建**：代码一提交，自动帮你编译打包
- **自动化测试**：自动运行测试用例，发现问题
- **自动化部署**：测试通过后，自动发布到服务器
- **持续监控**：24小时监控代码变化，及时响应

### 1.2 CI/CD是什么意思

**CI（持续集成）**：
```
想象一个场景：
- 多个程序员同时开发一个项目
- 每个人都在自己电脑上写代码
- 定期把代码"合并"到一起
- Jenkins帮你自动检查合并后的代码是否有问题
```

**CD（持续部署/持续交付）**：
```
持续交付：代码测试通过后，自动打包好，随时可以发布
持续部署：更进一步，直接自动发布到生产环境
```

**💡 生活化比喻**
> Jenkins就像工厂的自动化生产线，原材料（代码）进入后，自动完成加工、质检、包装、发货的全过程。

### 1.3 为什么需要Jenkins

**传统方式的痛点**：
- 🕐 **耗时**：手动操作需要大量时间
- 😰 **易错**：人工操作容易出错
- 🔄 **重复**：每次发布都要重复相同步骤
- 😴 **疲劳**：深夜发布，容易因疲劳出错

**Jenkins解决的问题**：
- ⚡ **提高效率**：自动化节省90%的时间
- ✅ **减少错误**：标准化流程，避免人为失误
- 🚀 **快速反馈**：问题能够第一时间发现
- 😌 **解放人力**：程序员专注写代码，不用操心部署

---

## 2. 🛠️ 安装前准备工作


### 2.1 系统要求检查

**硬件最低要求**：
```
CPU：1核心（推荐2核心以上）
内存：512MB（推荐1GB以上）
硬盘：1GB可用空间（推荐10GB以上）
网络：能访问互联网
```

**软件环境要求**：
- **操作系统**：CentOS 7/8 或 RHEL 7/8
- **Java环境**：JDK 8 或 JDK 11（必须安装）
- **用户权限**：需要root权限进行安装

### 2.2 Java环境检查与安装

**检查Java是否已安装**：
```bash
# 检查Java版本
java -version

# 检查JAVA_HOME环境变量
echo $JAVA_HOME
```

**如果没有Java，安装OpenJDK**：
```bash
# CentOS/RHEL 7
sudo yum install java-1.8.0-openjdk java-1.8.0-openjdk-devel

# CentOS/RHEL 8
sudo dnf install java-1.8.0-openjdk java-1.8.0-openjdk-devel
```

**💡 为什么需要Java？**
> Jenkins是用Java语言开发的，就像Windows软件需要Windows系统，Jenkins需要Java运行环境才能工作。

### 2.3 网络连接测试

```bash
# 测试是否能访问Jenkins官方仓库
ping -c 3 pkg.jenkins.io

# 测试DNS解析
nslookup pkg.jenkins.io
```

---

## 3. 📦 CentOS/RHEL系统安装Jenkins


### 3.1 添加Jenkins官方软件源

**什么是软件源？**
> 软件源就像"应用商店"，告诉系统从哪里下载和安装软件。Jenkins官方提供了专门的软件源。

**添加Jenkins仓库**：
```bash
# 下载并添加Jenkins仓库配置
sudo wget -O /etc/yum.repos.d/jenkins.repo \
    https://pkg.jenkins.io/redhat-stable/jenkins.repo
```

### 3.2 导入GPG密钥

**GPG密钥的作用**：
> GPG密钥用来验证软件包的真实性，确保你下载的Jenkins没有被恶意篡改，就像商品的防伪标签。

```bash
# 导入Jenkins官方GPG密钥
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key
```

### 3.3 安装Jenkins

```bash
# CentOS/RHEL 7 使用yum
sudo yum install jenkins

# CentOS/RHEL 8 使用dnf
sudo dnf install jenkins
```

**安装过程说明**：
```
安装过程中系统会：
1. 下载Jenkins软件包（约80MB）
2. 自动创建jenkins用户和用户组
3. 创建必要的目录和配置文件
4. 注册系统服务
```

### 3.4 验证安装结果

```bash
# 检查Jenkins是否安装成功
rpm -qa | grep jenkins

# 查看Jenkins版本
rpm -qi jenkins

# 检查Jenkins用户是否创建
id jenkins
```

---

## 4. ⚙️ Jenkins服务管理


### 4.1 systemctl命令详解

**systemctl是什么？**
> systemctl是Linux系统管理服务的工具，就像Windows的"服务管理器"，可以启动、停止、重启各种系统服务。

### 4.2 Jenkins服务基本操作

**启动Jenkins服务**：
```bash
# 启动Jenkins
sudo systemctl start jenkins

# 检查启动状态
sudo systemctl status jenkins
```

**停止Jenkins服务**：
```bash
# 停止Jenkins
sudo systemctl stop jenkins
```

**重启Jenkins服务**：
```bash
# 重启Jenkins（先停止再启动）
sudo systemctl restart jenkins
```

**设置开机自启动**：
```bash
# 设置开机自动启动
sudo systemctl enable jenkins

# 检查是否设置成功
sudo systemctl is-enabled jenkins
```

### 4.3 服务状态检查

```bash
# 查看详细状态信息
sudo systemctl status jenkins -l

# 查看服务是否在运行
sudo systemctl is-active jenkins
```

**状态解读**：
| 状态 | 含义 | 说明 |
|------|------|------|
| `active (running)` | 正在运行 | ✅ Jenkins正常工作 |
| `inactive (dead)` | 已停止 | ❌ Jenkins未启动 |
| `failed` | 启动失败 | 🚨 有错误需要排查 |

---

## 5. 🌐 网络配置与端口管理


### 5.1 Jenkins默认端口

**端口8080的含义**：
> Jenkins安装后默认使用8080端口提供Web服务，就像网站的"门牌号"，浏览器通过这个端口访问Jenkins。

### 5.2 防火墙配置

**为什么要开放端口？**
> Linux防火墙默认关闭大部分端口，需要手动开放8080端口，否则无法通过浏览器访问Jenkins。

**CentOS/RHEL 7 (firewalld)**：
```bash
# 开放8080端口
sudo firewall-cmd --permanent --add-port=8080/tcp

# 重新加载防火墙规则
sudo firewall-cmd --reload

# 查看开放的端口
sudo firewall-cmd --list-ports
```

**传统iptables方式**：
```bash
# 开放8080端口
sudo iptables -I INPUT -p tcp --dport 8080 -j ACCEPT

# 保存规则
sudo service iptables save
```

### 5.3 端口占用检查

```bash
# 检查8080端口是否被占用
sudo netstat -tlnp | grep 8080

# 或者使用ss命令
sudo ss -tlnp | grep 8080
```

**端口状态解读**：
```
tcp 0 0 :::8080 :::* LISTEN 12345/java

解释：
- tcp：使用TCP协议
- 8080：端口号
- LISTEN：处于监听状态
- 12345/java：进程ID和程序名
```

---

## 6. 🔧 初始化配置


### 6.1 获取初始管理员密码

**密码文件位置**：
```bash
# 查看初始密码
sudo cat /var/lib/jenkins/secrets/initialAdminPassword
```

**密码的作用**：
> 这个密码是Jenkins自动生成的，用于首次登录时的安全验证，确保只有系统管理员能够配置Jenkins。

### 6.2 首次访问Jenkins

**浏览器访问地址**：
```
http://你的服务器IP:8080
或
http://localhost:8080  (本地访问)
```

**访问流程**：
```
1. 打开浏览器
2. 输入服务器地址:8080
3. 看到Jenkins解锁页面
4. 输入初始管理员密码
5. 点击"继续"进入设置向导
```

### 6.3 Jenkins主要目录结构

| 目录路径 | 用途 | 说明 |
|----------|------|------|
| `/var/lib/jenkins/` | 主目录 | 存放所有Jenkins数据 |
| `/var/lib/jenkins/jobs/` | 任务目录 | 存放所有构建任务配置 |
| `/var/lib/jenkins/plugins/` | 插件目录 | 安装的插件文件 |
| `/var/lib/jenkins/workspace/` | 工作空间 | 代码检出和构建的地方 |
| `/var/log/jenkins/` | 日志目录 | Jenkins运行日志 |

### 6.4 日志文件查看

```bash
# 查看Jenkins运行日志
sudo tail -f /var/log/jenkins/jenkins.log

# 查看系统日志中的Jenkins信息
sudo journalctl -u jenkins -f
```

**💡 日志的作用**
> 日志记录了Jenkins的运行情况，当出现问题时，查看日志能帮助我们快速定位和解决问题。

---

## 7. 🔍 常见问题与排查


### 7.1 启动失败问题

**问题现象**：
```bash
sudo systemctl start jenkins
Job for jenkins.service failed because the control process exited with error code.
```

**排查步骤**：
```bash
# 1. 查看详细错误信息
sudo systemctl status jenkins -l

# 2. 查看启动日志
sudo journalctl -u jenkins --no-pager

# 3. 检查Java环境
java -version

# 4. 检查端口占用
sudo netstat -tlnp | grep 8080
```

### 7.2 无法访问Web界面

**可能原因与解决方法**：

| 问题 | 原因 | 解决方法 |
|------|------|----------|
| 连接超时 | 防火墙未开放端口 | `firewall-cmd --add-port=8080/tcp` |
| 拒绝连接 | Jenkins服务未启动 | `systemctl start jenkins` |
| 页面无法加载 | 端口被其他程序占用 | 更改Jenkins端口或停止占用程序 |

### 7.3 权限问题

**Jenkins用户权限不足**：
```bash
# 查看jenkins用户所属组
groups jenkins

# 将jenkins用户添加到特定组（如docker组）
sudo usermod -aG docker jenkins

# 重启Jenkins服务使权限生效
sudo systemctl restart jenkins
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的命令

**安装相关**：
```bash
# 添加仓库和安装
wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key
yum install jenkins
```

**服务管理**：
```bash
systemctl start jenkins     # 启动
systemctl stop jenkins      # 停止  
systemctl restart jenkins   # 重启
systemctl enable jenkins    # 开机自启
systemctl status jenkins    # 查看状态
```

**网络配置**：
```bash
firewall-cmd --permanent --add-port=8080/tcp  # 开放端口
firewall-cmd --reload                         # 重新加载
```

### 8.2 关键理解要点

🔸 **Jenkins本质**：自动化构建和部署的工具，帮助实现CI/CD
🔸 **Java依赖**：Jenkins基于Java开发，必须先安装Java环境
🔸 **端口管理**：默认8080端口，需要在防火墙中开放
🔸 **服务管理**：使用systemctl管理Jenkins服务生命周期
🔸 **安全考虑**：初始密码保护首次配置安全

### 8.3 最佳实践建议

**安装阶段**：
- ✅ 确保Java环境正确安装
- ✅ 使用官方仓库源安装
- ✅ 验证GPG密钥确保安全性

**配置阶段**：
- ✅ 设置开机自启动
- ✅ 开放必要的防火墙端口
- ✅ 备份初始管理员密码

**运维阶段**：
- ✅ 定期查看系统日志
- ✅ 监控Jenkins服务状态
- ✅ 定期备份Jenkins数据目录

### 8.4 下一步学习方向

完成Jenkins安装后，接下来需要学习：
- 🎯 **Web界面配置**：完成初始化设置向导
- 🔧 **插件管理**：安装常用插件扩展功能
- 📋 **用户管理**：创建和管理Jenkins用户
- 🚀 **创建第一个Job**：开始自动化构建之旅

**核心记忆口诀**：
> Java环境先准备，仓库密钥要导入
> 
> systemctl管服务，8080端口要开放
> 
> 初始密码要记录，日志排错是关键