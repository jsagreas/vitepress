---
title: 4、自由风格项目创建
---
## 📚 目录

1. [自由风格项目概述](#1-自由风格项目概述)
2. [新建任务操作流程](#2-新建任务操作流程)
3. [项目基础配置](#3-项目基础配置)
4. [构建触发器配置](#4-构建触发器配置)
5. [构建环境设置](#5-构建环境设置)
6. [构建步骤配置](#6-构建步骤配置)
7. [构建后操作配置](#7-构建后操作配置)
8. [实战演练与最佳实践](#8-实战演练与最佳实践)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🎯 自由风格项目概述


### 1.1 什么是自由风格项目


**📋 简单理解**：自由风格项目就像是Jenkins里最基础、最灵活的"万能工具箱"

```
现实类比：
自由风格项目 = 空白画布
你可以在上面：
• 画什么都行（配置任何构建步骤）
• 用什么工具都行（集成各种插件）
• 按自己想法来（自定义构建流程）
```

**🔍 核心特点**：
- **🏗️ 灵活性强**：可以配置各种构建步骤和操作
- **📚 学习友好**：新手最容易上手的项目类型
- **🔧 功能完整**：支持完整的CI/CD流程配置
- **🎨 自定义度高**：可以根据项目需求灵活调整

### 1.2 适用场景分析


| 🎯 **适用场景** | 📝 **具体说明** | 💡 **举例** |
|----------------|----------------|-------------|
| **新手学习** | 界面简单，容易理解 | 第一次接触Jenkins |
| **简单项目** | 构建步骤不复杂 | 单体应用部署 |
| **快速验证** | 快速搭建测试流程 | POC概念验证 |
| **传统应用** | 不需要复杂流水线 | 传统Java Web项目 |

### 1.3 自由风格 vs 流水线项目


```
自由风格项目特点：
┌─────────────────┐
│   图形化界面     │ ← 点击配置，所见即所得
├─────────────────┤
│   简单易上手     │ ← 新手友好，学习成本低
├─────────────────┤
│   功能基础       │ ← 满足基本CI/CD需求
└─────────────────┘

流水线项目特点：
┌─────────────────┐
│   代码化配置     │ ← 用Jenkinsfile管理
├─────────────────┤
│   功能强大       │ ← 支持复杂场景
├─────────────────┤
│   版本控制       │ ← 配置可以版本管理
└─────────────────┘
```

---

## 2. 📝 新建任务操作流程


### 2.1 进入新建任务页面


**🚀 操作步骤**：

**步骤1：登录Jenkins**
- 打开浏览器，访问Jenkins地址（通常是 `http://你的服务器IP:8080`）
- 输入用户名和密码登录

**步骤2：点击新建任务**
```
Jenkins首页界面：
┌──────────────────────────────────┐
│  Jenkins                    [⚙️]  │
├──────────────────────────────────┤
│  📋 [新建任务]  [管理Jenkins]     │  ← 点击这里
│                                  │
│  📊 构建队列：                    │
│  📈 构建执行状态：                │
└──────────────────────────────────┘
```

### 2.2 选择项目类型


**🎯 关键选择**：

```
新建任务页面布局：
┌──────────────────────────────────┐
│  输入任务名称: [_______________]  │
│                                  │
│  选择项目类型：                  │
│  ○ 构建一个自由风格的软件项目    │ ← 选择这个
│  ○ Pipeline                     │
│  ○ Multi-configuration project  │
│  ○ Folder                       │
│  ○ Multibranch Pipeline         │
│                                  │
│               [确定]  [取消]     │
└──────────────────────────────────┘
```

**💡 为什么选择自由风格**：
- ✅ **学习曲线平缓**：图形界面，直观易懂
- ✅ **文档资源丰富**：网上教程最多
- ✅ **功能够用**：能满足大部分CI/CD需求
- ✅ **排错简单**：问题容易定位和解决

### 2.3 任务创建成功


创建成功后，Jenkins会自动跳转到项目配置页面，这就是我们接下来要详细学习的重点。

---

## 3. ⚙️ 项目基础配置


### 3.1 项目名称命名规范


**📝 命名最佳实践**：

```
✅ 推荐命名方式：
• my-web-app-build      ← 项目名-功能描述
• user-service-deploy   ← 服务名-操作类型  
• frontend-test-dev     ← 应用类型-环境
• api-gateway-prod      ← 组件名-环境

❌ 避免的命名方式：
• test                  ← 太模糊
• project1              ← 没有意义
• 我的项目              ← 中文可能有问题
• my project            ← 空格可能有问题
```

**🔍 命名规则说明**：
- **英文字母**：推荐使用英文，避免中文
- **连字符**：用 `-` 连接单词，不用空格
- **小写字母**：统一使用小写，避免大小写混乱
- **有意义**：名称要能说明项目用途

### 3.2 项目描述信息填写


**📋 描述信息的作用**：

> 💡 **重要提示**：项目描述就像是给项目写的"说明书"，帮助团队成员快速理解这个任务是做什么的

**✏️ 描述内容建议**：

```markdown
项目描述示例：

这个任务用于构建和部署用户管理系统前端应用
- 🎯 目标：自动化前端代码的构建和部署
- 🔧 技术栈：Vue.js + Node.js
- 🌍 环境：开发环境(dev)
- 📅 创建时间：2025-09-21
- 👤 负责人：张三
```

**📝 填写位置**：
```
项目配置页面：
┌──────────────────────────────────┐
│  项目名称: my-web-app-build      │
│                                  │
│  描述: [________________________]│ ← 在这里填写
│        [________________________]│
│        [________________________]│
│                                  │
│  □ 丢弃旧的构建                  │
└──────────────────────────────────┘
```

### 3.3 构建保留策略


**🗂️ 为什么需要保留策略**：

想象一下，如果每次构建的结果都保存，时间久了服务器硬盘就会被撑爆。保留策略就是告诉Jenkins："只保留最近的几次构建结果，老的就删掉"。

**⚠️ 丢弃旧的构建配置**：

| 📊 **配置项** | 🔢 **推荐值** | 📝 **说明** |
|---------------|---------------|-------------|
| **保持构建的天数** | `30` | 保留最近30天的构建 |
| **保持构建的最大个数** | `20` | 最多保留20次构建记录 |

```
实际效果：
第1次构建 ←── 保留
第2次构建 ←── 保留  
...
第20次构建 ←── 保留
第21次构建 ←── 自动删除第1次构建
```

---

## 4. 🔔 构建触发器配置


### 4.1 什么是构建触发器


**🎯 简单理解**：构建触发器就是告诉Jenkins"在什么情况下开始干活"

```
生活类比：
构建触发器 = 闹钟设置
• 定时触发 = 每天早上8点响
• 代码变化触发 = 有人敲门就开门
• 手动触发 = 想起来就按一下
```

### 4.2 常用触发器类型


**⏰ 定时构建（Build periodically）**

**📝 含义**：按照固定时间间隔自动执行构建，不管代码有没有变化

**🕐 时间表达式**：使用类似Linux cron的格式

```
时间表达式格式：分 时 日 月 周

常用示例：
H 2 * * *        ← 每天凌晨2点执行
H */6 * * *      ← 每6小时执行一次
H H(0-7) * * *   ← 每天0-7点之间的某个时间执行
0 18 * * 1-5     ← 工作日下午6点执行
```

**💡 H符号说明**：
- `H` 表示"哈希值"，Jenkins会根据项目名称计算出一个固定但随机的时间
- 好处：避免所有项目在同一时间执行，分散服务器压力

**🔄 轮询SCM（Poll SCM）**

**📝 含义**：定期检查代码仓库，如果有新代码提交就自动构建

**🔍 工作原理**：
```
Jenkins轮询检查流程：
Jenkins → 检查Git仓库 → 发现新提交 → 自动启动构建
   ↑                                        ↓
   ← ← ← ← ← ← 等待下次检查 ← ← ← ← ← ← ← ← ← ←
```

**⏱️ 检查频率设置**：
```
H/5 * * * *      ← 每5分钟检查一次
H/15 * * * *     ← 每15分钟检查一次
H/30 * * * *     ← 每30分钟检查一次（推荐）
```

> ⚠️ **注意**：检查太频繁会增加服务器负担，太稀疏可能延迟发现问题

### 4.3 触发器选择建议


**🎯 新手推荐配置**：

```
开发阶段推荐：
✅ 使用"轮询SCM"
   频率设置：H/15 * * * *
   
理由：
• 代码提交后能及时发现问题
• 不会错过任何代码变更
• 15分钟间隔不会过于频繁
```

---

## 5. 🌍 构建环境设置


### 5.1 构建环境的作用


**🏗️ 什么是构建环境**：就像是给构建过程准备"工作台"，确保有合适的工具和环境来完成任务

```
构建环境类比：
做饭 = 构建项目
厨房 = 构建环境
• 确保有燃气（Java运行环境）
• 准备好锅具（构建工具）
• 清理工作台（删除之前的文件）
```

### 5.2 常用环境配置选项


**🧹 Delete workspace before build starts**

**📝 含义**：构建开始前先清空工作目录

```
工作原理：
构建前状态：
/workspace/my-project/
├── 上次构建留下的文件
├── 临时文件
└── 可能的垃圾文件

开启清理后：
/workspace/my-project/
└── (空目录，重新开始)
```

**✅ 何时开启**：
- 项目依赖比较复杂时
- 经常出现"构建成功但运行失败"的情况
- 想确保每次都是"干净"的构建

**❌ 何时关闭**：
- 构建时间比较长（避免重复下载）
- 网络环境较差（避免重复拉取代码）

**⏱️ Use secret text(s) or file(s)**

**📝 含义**：为构建过程提供密钥或敏感信息

**🔐 使用场景**：
```
常见需要密钥的场景：
• 连接数据库需要密码
• 推送Docker镜像需要认证
• 部署到服务器需要SSH密钥
• 调用第三方API需要token
```

### 5.3 环境配置建议


**🎯 新手推荐设置**：

```
开发阶段建议：
✅ 开启"Delete workspace before build starts"
   确保构建环境干净

✅ 根据需要配置密钥
   按实际项目需求添加
```

---

## 6. 🔧 构建步骤配置


### 6.1 构建步骤概述


**🏗️ 什么是构建步骤**：就是告诉Jenkins具体要执行什么操作，按什么顺序执行

```
构建步骤类比做菜流程：
1. 🛒 获取食材（拉取代码）
2. 🔪 清洗切配（编译代码）  
3. 🍳 炒制烹饪（运行测试）
4. 🍽️ 装盘上菜（打包部署）
```

### 6.2 添加构建步骤的方法


**📝 操作流程**：

```
构建步骤配置区域：
┌──────────────────────────────────┐
│  构建                            │
│  ┌────────────────────────────┐  │
│  │  [增加构建步骤] ▼          │  │ ← 点击这里
│  └────────────────────────────┘  │
│                                  │
│  下拉菜单选项：                   │
│  • Execute shell                 │ ← Linux/Mac
│  • Execute Windows batch command │ ← Windows
│  • Invoke top-level Maven targets│ ← Java项目
│  • Execute Python script         │ ← Python项目
│  • ... 更多选项                 │
└──────────────────────────────────┘
```

### 6.3 常用构建步骤类型


**💻 Execute shell（Linux/Mac环境）**

**📝 用途**：执行Linux shell命令

**💡 常用命令示例**：
```bash
# 检查环境
echo "开始构建项目..."
node --version
npm --version

# 安装依赖
npm install

# 运行测试
npm test

# 构建项目
npm run build

echo "构建完成！"
```

**🖥️ Execute Windows batch command（Windows环境）**

**📝 用途**：执行Windows批处理命令

**💡 常用命令示例**：
```batch
@echo off
echo 开始构建项目...

:: 检查环境
node --version
npm --version

:: 安装依赖
npm install

:: 运行测试
npm test

:: 构建项目
npm run build

echo 构建完成！
```

**☕ Invoke top-level Maven targets（Java项目）**

**📝 用途**：执行Maven构建命令

**⚙️ 常用配置**：
```
Maven版本：选择已安装的Maven版本
Goals：clean compile test package
POM：pom.xml（默认）
Properties：可以设置环境变量
```

### 6.4 构建步骤最佳实践


**🎯 步骤设计原则**：

> 💡 **重要理念**：构建步骤要像"搭积木"一样，一块一块往上搭，每一步都要稳固

**📋 推荐的步骤顺序**：

```
第1步：环境检查
• 检查工具版本
• 验证环境变量
• 确认依赖安装

第2步：代码准备  
• 清理旧文件
• 下载依赖包
• 配置环境

第3步：编译构建
• 编译源代码
• 处理资源文件
• 生成可执行文件

第4步：质量检查
• 运行单元测试
• 代码质量检查
• 安全性扫描

第5步：打包发布
• 打包应用
• 上传到仓库
• 部署到环境
```

---

## 7. 📤 构建后操作配置


### 7.1 构建后操作的作用


**🎯 简单理解**：构建后操作就是"收尾工作"，处理构建完成后的各种事情

```
构建后操作类比：
考试结束后 = 构建完成后
• 收卷整理（归档制品）
• 公布成绩（发送通知）
• 分析错题（分析报告）
• 准备下次（触发其他任务）
```

### 7.2 常用构建后操作


**📁 Archive the artifacts（归档制品）**

**📝 含义**：保存构建产生的重要文件，比如打包好的应用程序

**💾 配置示例**：
```
Files to archive: 
• *.jar           ← 保存Java打包文件
• dist/**         ← 保存前端构建产物
• target/*.war    ← 保存Web应用包
• *.zip           ← 保存压缩包
```

**🔍 为什么要归档**：
- ✅ **方便下载**：可以直接从Jenkins下载构建结果
- ✅ **版本管理**：每次构建的产物都有记录
- ✅ **问题排查**：出问题时可以对比不同版本
- ✅ **部署使用**：其他任务可以使用这些文件

**📧 E-mail Notification（邮件通知）**

**📝 含义**：构建完成后自动发送邮件通知相关人员

**📮 通知时机选择**：
```
通知策略：
✅ 构建失败时通知     ← 推荐，及时发现问题
✅ 从失败恢复时通知   ← 推荐，确认问题解决
○ 每次构建都通知     ← 不推荐，太吵闹
○ 不稳定构建通知     ← 可选，看项目需要
```

**📊 Publish JUnit test result report（发布测试报告）**

**📝 含义**：展示测试运行结果，生成测试报告图表

**📈 测试报告配置**：
```
Test report XMLs: 
• **/target/surefire-reports/*.xml    ← Maven项目
• **/build/test-results/**/*.xml      ← Gradle项目
• test-results.xml                    ← 自定义路径
```

### 7.3 构建后操作配置建议


**🎯 新手推荐配置**：

```
基本配置：
✅ 启用"Archive the artifacts"
   保存：target/*.jar, dist/**
   
✅ 启用"E-mail Notification"  
   策略：失败时发送 + 恢复时发送
   
○ 根据项目需要配置测试报告
   有测试用例就配置，没有可以先跳过
```

---

## 8. 🚀 实战演练与最佳实践


### 8.1 完整项目配置演示


**🎯 场景假设**：为一个Vue.js前端项目创建Jenkins构建任务

**📋 配置清单**：

```
项目基本信息：
• 项目名称：frontend-app-build
• 描述：Vue.js前端应用自动化构建
• 保留策略：保留20次构建，30天

触发器配置：
• 轮询SCM：H/15 * * * *（每15分钟检查代码变化）

构建环境：
• 开启构建前清理工作空间

构建步骤：
1. Execute shell - 环境检查
2. Execute shell - 安装依赖和构建

构建后操作：
• 归档制品：dist/**
• 邮件通知：构建失败时
```

**⚙️ 具体配置内容**：

**步骤1：环境检查**
```bash
#!/bin/bash
echo "=== 开始构建前端项目 ==="
echo "当前时间：$(date)"
echo "构建编号：$BUILD_NUMBER"

# 检查Node.js环境
echo "=== 检查Node.js环境 ==="
node --version || exit 1
npm --version || exit 1

echo "=== 环境检查完成 ==="
```

**步骤2：安装依赖和构建**
```bash
#!/bin/bash
echo "=== 安装项目依赖 ==="
npm install || exit 1

echo "=== 运行测试 ==="
npm run test || exit 1

echo "=== 构建项目 ==="
npm run build || exit 1

echo "=== 构建完成 ==="
ls -la dist/
```

### 8.2 常见问题解决


**❓ 问题1：构建一直失败**

```
排查步骤：
1. 📋 查看控制台输出
   Jenkins项目页面 → Build History → 点击失败的构建 → Console Output

2. 🔍 检查常见原因
   • 代码仓库连接失败
   • 命令路径不正确  
   • 权限不足
   • 环境变量缺失

3. 🛠️ 简化测试
   先用最简单的命令测试，比如：echo "Hello World"
```

**❓ 问题2：构建成功但没有产物**

```
检查点：
✅ 归档路径是否正确
   dist/** 而不是 /dist/**
   
✅ 构建是否真的生成了文件
   在构建步骤最后加上：ls -la dist/
   
✅ 权限是否足够
   Jenkins是否有权限读取生成的文件
```

### 8.3 性能优化建议


**⚡ 提升构建速度**：

```
优化策略：
🔧 依赖缓存
   不要每次都清理工作空间（除非必要）
   
🔧 并行构建  
   如果有多个项目，配置并行执行
   
🔧 增量构建
   只构建变化的部分（高级功能）
   
🔧 资源配置
   给Jenkins分配足够的内存和CPU
```

### 8.4 安全性最佳实践


**🔒 安全配置要点**：

```
安全策略：
🛡️ 密钥管理
   敏感信息使用Credentials存储，不要写在脚本里
   
🛡️ 权限控制
   只给必要的人员配置权限
   
🛡️ 网络隔离
   Jenkins服务器要做好网络安全配置
   
🛡️ 定期更新
   保持Jenkins和插件版本更新
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心操作


```
🔸 项目创建：会新建自由风格项目，理解各个配置选项
🔸 基础配置：项目命名、描述、构建保留策略
🔸 触发器配置：理解定时构建和轮询SCM的区别和用法
🔸 构建步骤：会添加shell命令、Maven命令等构建步骤
🔸 构建后操作：会配置制品归档和邮件通知
🔸 问题排查：会看构建日志，能基本排查构建失败问题
```

### 9.2 关键理解要点


**🔹 自由风格项目的定位**
```
适用场景：
• 新手学习Jenkins的最佳选择
• 简单项目的CI/CD需求
• 快速验证和测试

局限性：
• 复杂流程配置麻烦
• 不支持代码化管理
• 扩展性有限
```

**🔹 配置原则**
```
循序渐进：
从最简单的配置开始 → 逐步添加功能 → 最后优化性能

标准化：
建立团队的配置规范 → 统一命名规则 → 复用成功经验
```

### 9.3 实际应用价值


**💼 工作场景应用**：
- **小型项目**：个人项目或小团队项目的自动化构建
- **学习验证**：学习CI/CD概念的实践平台
- **原型开发**：快速搭建构建流程进行概念验证
- **传统应用**：改造传统应用的自动化部署

**📈 技能进阶路径**：
```
第1阶段：掌握基本操作
• 能独立创建和配置自由风格项目
• 解决常见的构建问题

第2阶段：深入理解原理  
• 理解Jenkins的工作机制
• 掌握插件的使用方法

第3阶段：进阶技能
• 学习Pipeline项目
• 掌握复杂的CI/CD场景
```

**核心记忆**：
- 自由风格项目是Jenkins的"入门车"，简单好用
- 配置要循序渐进，先跑通再优化
- 构建步骤要合理组织，每步都要有明确目的
- 问题排查看控制台输出，90%的问题都能找到线索