---
title: 2、Jenkins初始化配置
---
## 📚 目录

1. [Jenkins初始化配置概述](#1-jenkins初始化配置概述)
2. [Web界面首次访问配置](#2-web界面首次访问配置)
3. [管理员账户创建与安全设置](#3-管理员账户创建与安全设置)
4. [插件安装与管理](#4-插件安装与管理)
5. [系统基础信息配置](#5-系统基础信息配置)
6. [全局安全配置详解](#6-全局安全配置详解)
7. [用户权限管理基础](#7-用户权限管理基础)
8. [邮件通知配置](#8-邮件通知配置)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🎯 Jenkins初始化配置概述


### 1.1 什么是Jenkins初始化配置


**简单理解**：就像你买了一台新电脑，开机后需要设置用户名、密码、网络等基本信息一样，Jenkins安装完成后也需要进行初始设置，让它能够正常工作。

**初始化配置的目的**：
- 🔐 **安全防护**：设置管理员账户，防止陌生人随意操作
- 🔧 **功能扩展**：安装必要的插件，增强Jenkins功能
- ⚙️ **基础设置**：配置邮件、URL等基本信息
- 👥 **权限管理**：确定谁能做什么操作

### 1.2 初始化配置的重要性


```
未配置的Jenkins就像：
┌─────────────────┐
│   一栋没锁的房子   │ ← 任何人都能进入
│   没有门牌号码    │ ← 别人找不到你
│   没有电话线      │ ← 无法对外联系
│   只有基础设施    │ ← 功能有限
└─────────────────┘

配置完成的Jenkins：
┌─────────────────┐
│   有保安的办公楼   │ ← 安全可控
│   地址明确       │ ← 容易访问
│   通讯畅通       │ ← 能够通知
│   功能齐全       │ ← 工作高效
└─────────────────┘
```

### 1.3 配置流程概览


**配置顺序**：有先后顺序，不能颠倒
```
1. 解锁Jenkins        ← 获取初始密码
2. 选择插件安装方式     ← 推荐插件 or 自定义
3. 创建管理员用户      ← 设置账户密码
4. 配置Jenkins URL    ← 设置访问地址
5. 完成基础配置       ← 进入主界面
6. 详细安全配置       ← 权限和安全策略
7. 邮件通知配置       ← 消息推送设置
```

---

## 2. 🌐 Web界面首次访问配置


### 2.1 访问Jenkins Web界面


**访问地址**：安装完成后，通过浏览器访问Jenkins
- **本地安装**：`http://localhost:8080`
- **服务器安装**：`http://服务器IP:8080`
- **自定义端口**：`http://服务器IP:自定义端口`

### 2.2 解锁Jenkins - 获取初始密码


**为什么需要解锁**：Jenkins为了安全，会生成一个随机密码，防止未授权访问。

**初始密码位置**：
```
Linux系统：
/var/lib/jenkins/secrets/initialAdminPassword

Windows系统：
C:\Users\用户名\.jenkins\secrets\initialAdminPassword

Docker容器：
/var/jenkins_home/secrets/initialAdminPassword
```

**获取密码的方法**：

**方法一：命令行查看**
```bash
# Linux/Mac
sudo cat /var/lib/jenkins/secrets/initialAdminPassword

# Windows
type C:\Users\用户名\.jenkins\secrets\initialAdminPassword
```

**方法二：从Jenkins启动日志中查找**
```
启动日志会显示类似信息：
Jenkins initial setup is required...
Please use the following password to proceed to installation:

a8b5c2d4e7f9g1h3j6k8m0n2p5q7r9s1

This may also be found at: /var/lib/jenkins/secrets/initialAdminPassword
```

### 2.3 解锁界面操作


**解锁步骤**：
1. 在浏览器中打开Jenkins地址
2. 看到"解锁Jenkins"页面
3. 复制初始密码到输入框
4. 点击"继续"按钮

> **💡 小提示**：如果忘记保存初始密码，可以重启Jenkins服务，密码文件会重新生成。

---

## 3. 👤 管理员账户创建与安全设置


### 3.1 插件安装选择（会先出现）


解锁后，会看到插件安装选择页面：

**选择方式对比**：

| 安装方式 | **适用人群** | **优点** | **缺点** |
|---------|-------------|---------|---------|
| **安装推荐插件** | `新手用户` | `包含常用功能，省心省力` | `可能安装不需要的插件` |
| **选择插件来安装** | `有经验用户` | `精确控制，按需安装` | `需要了解插件功能` |

**推荐做法**：新手选择"**安装推荐插件**"

**推荐插件包含**：
- **构建工具**：Maven、Gradle支持
- **版本控制**：Git、SVN集成
- **通知工具**：邮件、Slack通知
- **管道功能**：Pipeline插件
- **界面优化**：Blue Ocean界面

### 3.2 创建第一个管理员用户


**为什么要创建管理员**：
- 初始密码只是临时的，不适合长期使用
- 管理员账户有明确的用户名，便于管理
- 可以设置个人信息，便于团队协作

**用户信息填写**：
```
用户名：admin          ← 建议使用简单易记的名称
密码：********        ← 设置复杂密码，包含字母数字符号
确认密码：********     ← 再次输入确认
全名：系统管理员        ← 显示给其他用户看的名字
电子邮件：admin@company.com  ← 接收通知的邮箱
```

**密码设置建议**：
- **长度**：至少8位字符
- **复杂度**：包含大小写字母、数字、特殊符号
- **安全性**：不要使用常见密码如123456、password等
- **示例**：`Jenkins@2024!`

### 3.3 实例配置


**配置Jenkins URL**：
```
Jenkins URL：http://192.168.1.100:8080/

说明：
- 这个地址会用于邮件通知中的链接
- 如果有域名，建议使用域名而不是IP
- 端口号要与实际访问端口一致
```

**配置完成**：点击"**保存并完成**"，Jenkins会重启并进入主界面。

---

## 4. 🔧 插件安装与管理


### 4.1 插件管理基础概念


**什么是Jenkins插件**：
就像手机的APP一样，Jenkins插件是扩展功能的小程序。Jenkins本身只提供基础功能，通过插件可以支持各种编程语言、构建工具、部署平台。

**插件的作用**：
```
基础Jenkins：
┌─────────────┐
│   核心功能   │ ← 基本的任务执行
│   用户管理   │ ← 简单的权限控制  
│   基础界面   │ ← 传统的Web界面
└─────────────┘

添加插件后：
┌─────────────┐
│   Git集成   │ ← 支持Git代码管理
│   Maven构建  │ ← 支持Java项目构建
│   Docker部署 │ ← 支持容器化部署
│   邮件通知   │ ← 支持消息推送
│   美化界面   │ ← 现代化的操作界面
└─────────────┘
```

### 4.2 插件管理界面


**访问路径**：系统管理 → 插件管理

**插件管理选项卡**：
- **可选插件**：可以安装的新插件
- **已安装**：已经安装的插件列表
- **更新**：有新版本的插件
- **高级**：手动上传插件、代理设置等

### 4.3 常用推荐插件


**代码管理类**：
```
Git Plugin              ← Git代码仓库集成
GitHub Plugin           ← GitHub特定功能
GitLab Plugin           ← GitLab集成
Bitbucket Plugin        ← Bitbucket支持
```

**构建工具类**：
```
Maven Integration       ← Java Maven项目构建
Gradle Plugin          ← Gradle构建工具
NodeJS Plugin          ← Node.js项目支持
Docker Plugin          ← Docker容器支持
```

**通知工具类**：
```
Email Extension        ← 强化邮件通知功能
Slack Notification    ← Slack消息推送
DingTalk              ← 钉钉通知
WeChat Plugin         ← 微信通知
```

**界面优化类**：
```
Blue Ocean            ← 现代化Pipeline界面
Dashboard View        ← 仪表板视图
Build Monitor View    ← 构建监控视图
```

### 4.4 插件安装操作


**安装步骤**：
1. 进入"系统管理" → "插件管理"
2. 点击"可选插件"选项卡
3. 在搜索框输入插件名称
4. 勾选需要的插件
5. 点击"直接安装"或"下载待重启后安装"

**安装选择说明**：
- **直接安装**：立即安装，不需要重启（推荐）
- **下载待重启后安装**：下载后等重启时安装

> **⚠️ 注意事项**：
> - 安装插件前，Jenkins会自动检查依赖关系
> - 某些插件需要重启Jenkins才能生效
> - 插件过多可能影响Jenkins启动速度

---

## 5. ⚙️ 系统基础信息配置


### 5.1 系统配置入口


**访问路径**：系统管理 → 系统配置

这里是Jenkins的"设置中心"，类似于手机的系统设置，可以配置Jenkins的各种基础信息。

### 5.2 Jenkins基本信息配置


**Jenkins URL配置**：
```
配置项：Jenkins URL
示例：http://jenkins.company.com:8080/
作用：
- 邮件通知中会包含这个链接
- API调用的基础地址
- 其他系统集成时的回调地址
```

**系统管理员邮箱地址**：
```
配置项：系统管理员邮箱地址
示例：jenkins-admin@company.com
作用：
- 系统错误通知的接收邮箱
- 显示在错误页面的联系方式
- 默认的邮件发送者地址
```

### 5.3 执行者数量配置


**什么是执行者**：
执行者（Executor）就是Jenkins同时能处理多少个任务的能力。比如设置为2个执行者，Jenkins就能同时运行2个构建任务。

**配置建议**：
```
服务器配置          建议执行者数量
单核2G内存             1-2个
双核4G内存             2-3个  
四核8G内存             3-4个
八核16G内存            4-6个

计算公式：CPU核心数 + 1（不要超过CPU核心数的1.5倍）
```

**配置位置**：
- **主节点执行者数量**：在"# of executors"中设置
- **建议值**：2-4个（根据服务器性能调整）

### 5.4 静默期配置


**什么是静默期**：
就是Jenkins在开始构建前等待的时间，如果在这个时间内又有新的构建请求，会合并处理。

**配置说明**：
```
静默期（秒）：5
作用：
- 避免频繁提交代码时产生过多构建
- 给开发者时间推送完整的代码变更
- 减少服务器资源浪费
```

### 5.5 SCM轮询时间配置


**什么是SCM轮询**：
SCM（Source Code Management）轮询就是Jenkins定期检查代码仓库是否有更新的功能。

**配置建议**：
```
SCM checkout retry count：3
作用：代码检出失败时的重试次数

建议：保持默认值3即可
```

---

## 6. 🔒 全局安全配置详解


### 6.1 安全配置的重要性


**为什么需要安全配置**：
Jenkins就像一个功能强大的工具箱，如果不设置安全限制，任何人都能使用这些工具，可能会：
- 删除重要的构建任务
- 修改系统配置
- 访问敏感信息
- 执行危险的命令

### 6.2 访问控制策略


**配置路径**：系统管理 → 全局安全配置

**授权策略对比**：

| 策略类型 | **适用场景** | **安全级别** | **管理复杂度** |
|---------|-------------|-------------|---------------|
| **任何用户可以做任何事** | `测试环境` | `🔴 低` | `🟢 简单` |
| **登录用户可以做任何事** | `小团队` | `🟡 中等` | `🟢 简单` |
| **安全矩阵** | `中大型团队` | `🟢 高` | `🟡 中等` |
| **基于项目的矩阵授权** | `多项目团队` | `🟢 高` | `🔴 复杂` |

### 6.3 推荐安全配置


**新手推荐配置**：
```
安全域：Jenkins' own user database
授权策略：安全矩阵

用户权限设置：
管理员用户：
  ✅ Overall/Administer（所有权限）
  
普通用户：
  ✅ Overall/Read（查看权限）
  ✅ Job/Build（构建权限）
  ✅ Job/Read（查看任务权限）
  
匿名用户：
  ❌ 无任何权限
```

### 6.4 具体配置步骤


**步骤一：启用安全**
```
☑️ 启用安全
```

**步骤二：选择安全域**
```
选择：Jenkins' own user database
☑️ 允许用户注册（可选，小团队建议关闭）
```

**步骤三：授权策略**
```
选择：安全矩阵
添加用户：输入管理员用户名，点击添加
设置权限：勾选管理员的所有权限
```

**权限说明**：
- **Overall/Administer**：系统管理权限
- **Overall/Read**：查看Jenkins首页权限
- **Job/Build**：执行构建任务权限
- **Job/Configure**：配置任务权限
- **Job/Create**：创建任务权限
- **Job/Delete**：删除任务权限

---

## 7. 👥 用户权限管理基础


### 7.1 用户管理概念


**用户分类**：
```
系统管理员：
┌─────────────────┐
│   拥有所有权限   │ ← 配置系统、管理用户
│   负责系统维护   │ ← 安装插件、备份数据
│   解决技术问题   │ ← 处理故障、优化性能
└─────────────────┘

项目管理员：
┌─────────────────┐
│   管理特定项目   │ ← 创建、配置项目任务
│   分配项目权限   │ ← 决定谁能操作项目
│   监控项目状态   │ ← 查看构建结果
└─────────────────┘

普通开发者：
┌─────────────────┐
│   触发构建任务   │ ← 启动代码构建
│   查看构建结果   │ ← 检查构建状态
│   下载构建产物   │ ← 获取编译结果
└─────────────────┘
```

### 7.2 创建新用户


**创建步骤**：
1. 进入"系统管理" → "管理用户"
2. 点击"新建用户"
3. 填写用户信息
4. 保存用户
5. 在全局安全配置中分配权限

**用户信息填写**：
```
用户名：developer01        ← 登录用名，建议使用工号或英文名
密码：Dev@2024!           ← 复杂密码
全名：张三                ← 中文姓名，便于识别
电子邮件：zhangsan@company.com  ← 接收通知的邮箱
```

### 7.3 权限分配模板


**开发者标准权限**：
```
✅ Overall/Read            ← 可以查看Jenkins首页
✅ Job/Build              ← 可以触发构建
✅ Job/Cancel             ← 可以取消构建
✅ Job/Read               ← 可以查看任务配置
✅ Run/Replay             ← 可以重新执行Pipeline
✅ Run/Update             ← 可以更新运行参数
❌ Job/Configure          ← 不能修改任务配置
❌ Job/Delete             ← 不能删除任务
❌ Overall/Administer     ← 不能管理系统
```

**项目经理权限**：
```
✅ Overall/Read           ← 查看系统信息
✅ Job/*                 ← 任务的所有权限
✅ View/*                ← 视图的所有权限
✅ Run/*                 ← 运行的所有权限
❌ Overall/Administer    ← 不能管理系统
❌ Computer/*            ← 不能管理节点
❌ Plugin/*              ← 不能管理插件
```

### 7.4 用户组管理


**用户组的好处**：
- 批量管理权限，避免逐个设置
- 权限变更时只需修改组权限
- 新员工加入时直接加入对应组

**常见用户组设置**：
```
开发组（developers）：
- 构建权限
- 查看权限
- 取消构建权限

测试组（testers）：
- 构建权限
- 查看权限
- 部署到测试环境权限

运维组（ops）：
- 构建权限
- 查看权限
- 部署到生产环境权限
```

---

## 8. 📧 邮件通知配置


### 8.1 邮件通知的作用


**为什么需要邮件通知**：
想象一下，你在厨房做饭，锅里的汤快要煮好了，但你在客厅看电视。如果没有定时器提醒，你可能会忘记关火。Jenkins的邮件通知就像这个定时器，在重要事件发生时及时通知你。

**邮件通知场景**：
```
构建成功时：
📧 "好消息！项目构建成功，代码已经准备好部署了"

构建失败时：
📧 "注意！项目构建失败，请检查代码问题"

长时间运行时：
📧 "提醒：构建已运行超过30分钟，请关注进度"

第一次失败恢复时：
📧 "恢复正常！之前失败的构建现在成功了"
```

### 8.2 SMTP服务器配置


**配置路径**：系统管理 → 系统配置 → 邮件通知

**常用邮箱SMTP配置**：

**企业邮箱（推荐）**：
```
SMTP服务器：mail.company.com
端口：25 或 587
用户名：jenkins@company.com
密码：邮箱密码
```

**QQ邮箱**：
```
SMTP服务器：smtp.qq.com
端口：465（SSL）或 587（TLS）
用户名：你的QQ号@qq.com
密码：授权码（不是QQ密码）
```

**163邮箱**：
```
SMTP服务器：smtp.163.com
端口：465（SSL）或 25（无加密）
用户名：你的邮箱@163.com
密码：授权码
```

### 8.3 详细配置步骤


**步骤一：基础邮件配置**
```
系统管理员邮箱地址：jenkins@company.com
SMTP服务器：mail.company.com
高级设置：
  ☑️ 使用SMTP认证
  用户名：jenkins@company.com
  密码：邮箱密码
  ☑️ 使用SSL协议
  SMTP端口：465
  字符集：UTF-8
```

**步骤二：测试邮件配置**
```
收件人：你的邮箱地址
主题：Jenkins邮件测试
内容：这是一封测试邮件，如果收到说明配置成功
```

点击"**通过发送测试邮件测试配置**"，检查是否能收到邮件。

### 8.4 Extended Email插件配置


**为什么使用Extended Email**：
默认的邮件功能比较简单，Extended Email插件提供更丰富的功能：
- 自定义邮件模板
- 条件化发送邮件
- 更详细的构建信息
- 支持HTML格式邮件

**安装插件**：
系统管理 → 插件管理 → 可选插件 → 搜索"Email Extension" → 安装

**基础配置**：
```
Default Subject：
【Jenkins】$PROJECT_NAME - Build #$BUILD_NUMBER - $BUILD_STATUS

Default Content：
构建项目：$PROJECT_NAME
构建编号：$BUILD_NUMBER
构建状态：$BUILD_STATUS
构建时间：$BUILD_TIMESTAMP
构建日志：$BUILD_LOG
代码变更：$CHANGES
```

### 8.5 邮件模板定制


**成功邮件模板**：
```html
<h2>🎉 构建成功通知</h2>
<p><strong>项目名称：</strong>${PROJECT_NAME}</p>
<p><strong>构建编号：</strong>${BUILD_NUMBER}</p>
<p><strong>构建时间：</strong>${BUILD_TIMESTAMP}</p>
<p><strong>构建用时：</strong>${BUILD_DURATION}</p>
<p><strong>代码变更：</strong></p>
<pre>${CHANGES}</pre>
<p><a href="${BUILD_URL}">查看详细信息</a></p>
```

**失败邮件模板**：
```html
<h2>❌ 构建失败通知</h2>
<p><strong>项目名称：</strong>${PROJECT_NAME}</p>
<p><strong>构建编号：</strong>${BUILD_NUMBER}</p>
<p><strong>失败原因：</strong></p>
<pre>${BUILD_LOG, maxLines=50}</pre>
<p><strong>代码变更：</strong></p>
<pre>${CHANGES}</pre>
<p><a href="${BUILD_URL}">查看完整日志</a></p>
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 初始化配置：Jenkins安装后的必要设置过程
🔸 安全配置：保护Jenkins不被未授权访问
🔸 插件管理：扩展Jenkins功能的重要方式
🔸 用户权限：控制不同用户的操作范围
🔸 邮件通知：及时获得构建状态反馈
```

### 9.2 关键理解要点


**🔹 安全第一原则**：
```
Jenkins配置的优先级：
1. 安全配置 - 防止系统被破坏
2. 用户管理 - 合理分配权限
3. 功能配置 - 满足业务需求
4. 性能优化 - 提升使用体验
```

**🔹 插件选择策略**：
```
插件安装原则：
✅ 按需安装 - 只装需要的功能
✅ 来源可靠 - 选择官方或知名插件
✅ 定期更新 - 保持插件版本新
❌ 避免过多 - 插件过多影响性能
```

**🔹 权限管理最佳实践**：
```
权限分配原则：
- 最小权限原则：只给必需的权限
- 职责分离：不同角色不同权限
- 定期审查：定期检查权限合理性
- 及时回收：离职人员及时删除账号
```

### 9.3 配置检查清单


**安全配置检查**：
- ✅ 已创建管理员账户
- ✅ 已禁用匿名访问
- ✅ 已设置适当的授权策略
- ✅ 已配置Jenkins URL
- ✅ 已设置系统管理员邮箱

**功能配置检查**：
- ✅ 已安装必要插件
- ✅ 已配置邮件通知
- ✅ 已设置合适的执行者数量
- ✅ 已测试邮件发送功能
- ✅ 已创建普通用户和权限

**维护配置检查**：
- ✅ 已设置定期备份策略
- ✅ 已配置日志管理
- ✅ 已设置监控告警
- ✅ 已准备故障恢复方案

### 9.4 常见问题解决


**问题一：忘记管理员密码**
```
解决方案：
1. 停止Jenkins服务
2. 编辑config.xml文件
3. 将 <useSecurity>true</useSecurity> 改为 false
4. 重启Jenkins，重新配置安全设置
```

**问题二：邮件发送失败**
```
检查步骤：
1. 确认SMTP服务器地址正确
2. 检查端口和加密设置
3. 验证用户名密码
4. 查看Jenkins系统日志
5. 测试网络连通性
```

**问题三：插件安装失败**
```
解决方法：
1. 检查网络连接
2. 更新插件管理器
3. 手动下载插件文件
4. 清理Jenkins缓存
5. 重启Jenkins服务
```

### 9.5 下一步学习建议


**配置完成后的学习路径**：
1. **创建第一个构建任务** - 验证配置效果
2. **学习Pipeline语法** - 掌握现代CI/CD写法
3. **集成Git仓库** - 实现代码自动构建
4. **配置自动部署** - 完整的CI/CD流程
5. **监控和优化** - 提升系统性能

**核心记忆口诀**：
- 安全配置是基础，用户权限要清楚
- 插件按需来安装，邮件通知别忘记
- 系统信息配置好，Jenkins运行才顺利