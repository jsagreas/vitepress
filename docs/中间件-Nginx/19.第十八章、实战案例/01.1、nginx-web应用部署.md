---
title: 1ã€nginx-webåº”ç”¨éƒ¨ç½²
---
## ğŸ“š ç›®å½•

1. [Webåº”ç”¨éƒ¨ç½²åŸºç¡€æ¦‚å¿µ](#1-Webåº”ç”¨éƒ¨ç½²åŸºç¡€æ¦‚å¿µ)
2. [PHPåº”ç”¨éƒ¨ç½²é…ç½®](#2-PHPåº”ç”¨éƒ¨ç½²é…ç½®)
3. [Pythonåº”ç”¨ä»£ç†éƒ¨ç½²](#3-Pythonåº”ç”¨ä»£ç†éƒ¨ç½²)
4. [Node.jsåº”ç”¨ä»£ç†é…ç½®](#4-Nodejsåº”ç”¨ä»£ç†é…ç½®)
5. [é™æ€ç«™ç‚¹éƒ¨ç½²æ–¹æ¡ˆ](#5-é™æ€ç«™ç‚¹éƒ¨ç½²æ–¹æ¡ˆ)
6. [SPAå•é¡µåº”ç”¨é…ç½®](#6-SPAå•é¡µåº”ç”¨é…ç½®)
7. [å¤šè¯­è¨€åº”ç”¨æ··åˆéƒ¨ç½²](#7-å¤šè¯­è¨€åº”ç”¨æ··åˆéƒ¨ç½²)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ Webåº”ç”¨éƒ¨ç½²åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Webåº”ç”¨éƒ¨ç½²


**ğŸ”¸ ç®€å•ç†è§£**
æŠŠä½ å¼€å‘å¥½çš„ç½‘ç«™ç¨‹åºæ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œè¿™å°±æ˜¯Webåº”ç”¨éƒ¨ç½²ã€‚

```
å¼€å‘é˜¶æ®µï¼šä½ åœ¨ç”µè„‘ä¸Šå†™ä»£ç  â†’ æœ¬åœ°æµ‹è¯•è¿è¡Œ
éƒ¨ç½²é˜¶æ®µï¼šæŠŠä»£ç æ”¾åˆ°æœåŠ¡å™¨ â†’ å…¨ä¸–ç•Œéƒ½èƒ½è®¿é—®
```

**ğŸ”¸ Nginxåœ¨éƒ¨ç½²ä¸­çš„ä½œç”¨**
- **é™æ€æ–‡ä»¶æœåŠ¡å™¨**ï¼šç›´æ¥æä¾›HTMLã€CSSã€JSã€å›¾ç‰‡ç­‰æ–‡ä»¶
- **åå‘ä»£ç†æœåŠ¡å™¨**ï¼šæŠŠè¯·æ±‚è½¬å‘ç»™åå°åº”ç”¨ç¨‹åº
- **è´Ÿè½½å‡è¡¡å™¨**ï¼šå¤šä¸ªæœåŠ¡å™¨ä¹‹é—´åˆ†é…è®¿é—®æµé‡

### 1.2 å¸¸è§çš„Webåº”ç”¨ç±»å‹


| åº”ç”¨ç±»å‹ | **å·¥ä½œæ–¹å¼** | **Nginxè§’è‰²** | **å…¸å‹åœºæ™¯** |
|---------|------------|-------------|-------------|
| ğŸ”¸ **é™æ€ç½‘ç«™** | `ç›´æ¥æä¾›HTMLæ–‡ä»¶` | `æ–‡ä»¶æœåŠ¡å™¨` | `ä¼ä¸šå®˜ç½‘ã€åšå®¢` |
| ğŸ”¸ **PHPåº”ç”¨** | `é€šè¿‡PHP-FPMå¤„ç†` | `ä»£ç†+æ–‡ä»¶æœåŠ¡` | `WordPressã€Laravel` |
| ğŸ”¸ **Pythonåº”ç”¨** | `é€šè¿‡WSGIæœåŠ¡å™¨` | `åå‘ä»£ç†` | `Djangoã€Flask` |
| ğŸ”¸ **Node.jsåº”ç”¨** | `ç›´æ¥è¿è¡Œåœ¨ç«¯å£` | `åå‘ä»£ç†` | `Expressã€Koa` |
| ğŸ”¸ **å•é¡µåº”ç”¨** | `å‰ç«¯è·¯ç”±å¤„ç†` | `æ–‡ä»¶æœåŠ¡+è·¯ç”±` | `Vueã€Reactåº”ç”¨` |

### 1.3 éƒ¨ç½²æ¶æ„ç†è§£


**ğŸ”¸ ä¼ ç»Ÿæ¶æ„å›¾è§£**
```
ç”¨æˆ·æµè§ˆå™¨ â”€â”€â–¶ NginxæœåŠ¡å™¨ â”€â”€â–¶ é™æ€æ–‡ä»¶
                    â”‚
                    â–¼
              åç«¯åº”ç”¨ç¨‹åº
             (PHP/Python/Node)
```

**ğŸ”¸ ç°ä»£å‰åç«¯åˆ†ç¦»æ¶æ„**
```
ç”¨æˆ·æµè§ˆå™¨ â”€â”€â–¶ Nginx â”€â”€â–¶ å‰ç«¯é™æ€æ–‡ä»¶ (Vue/React)
                â”‚
                â–¼
              APIæ¥å£ â”€â”€â–¶ åç«¯æœåŠ¡
             (æä¾›æ•°æ®)
```

---

## 2. ğŸ˜ PHPåº”ç”¨éƒ¨ç½²é…ç½®


### 2.1 PHPåº”ç”¨éƒ¨ç½²åŸç†


**ğŸ”¸ å·¥ä½œæµç¨‹ç†è§£**
```
ç”¨æˆ·è¯·æ±‚ â†’ Nginx â†’ PHP-FPM â†’ PHPè§£é‡Šå™¨ â†’ è¿”å›ç»“æœ
```

ç®€å•è¯´ï¼šNginxæ”¶åˆ°PHPè¯·æ±‚åï¼Œä¸æ˜¯è‡ªå·±å¤„ç†ï¼Œè€Œæ˜¯è½¬äº¤ç»™ä¸“é—¨çš„PHPå¤„ç†ç¨‹åº(PHP-FPM)æ¥æ‰§è¡Œã€‚

### 2.2 åŸºç¡€PHPç«™ç‚¹é…ç½®


```nginx
server {
    listen 80;
    server_name example.com;
    root /var/www/html;
    index index.php index.html;
    
    # å¤„ç†PHPæ–‡ä»¶
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;    # PHP-FPMæœåŠ¡åœ°å€
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
    
    # å¤„ç†é™æ€æ–‡ä»¶
    location ~* \.(css|js|png|jpg|jpeg|gif|ico)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

**ğŸ’¡ å…³é”®é…ç½®è§£é‡Š**
- `fastcgi_pass`ï¼šå‘Šè¯‰NginxæŠŠPHPè¯·æ±‚å‘ç»™è°å¤„ç†
- `fastcgi_param`ï¼šä¼ é€’å¿…è¦çš„å‚æ•°ç»™PHP
- `$document_root$fastcgi_script_name`ï¼šå®Œæ•´çš„PHPæ–‡ä»¶è·¯å¾„

### 2.3 WordPresséƒ¨ç½²å®ä¾‹


```nginx
server {
    listen 80;
    server_name myblog.com;
    root /var/www/wordpress;
    index index.php;
    
    # WordPressæ ¸å¿ƒé…ç½®
    location / {
        try_files $uri $uri/ /index.php?$args;
    }
    
    # PHPå¤„ç†
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
    
    # ç¦æ­¢è®¿é—®æ•æ„Ÿæ–‡ä»¶
    location ~* /(?:wp-config\.php|readme\.html|license\.txt) {
        deny all;
    }
}
```

**ğŸ”§ éƒ¨ç½²æ­¥éª¤æ¸…å•**
1ï¸âƒ£ å®‰è£…PHPå’ŒPHP-FPM
2ï¸âƒ£ é…ç½®Nginxè™šæ‹Ÿä¸»æœº
3ï¸âƒ£ ä¸Šä¼ WordPressæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•
4ï¸âƒ£ è®¾ç½®æ–‡ä»¶æƒé™
5ï¸âƒ£ é‡å¯Nginxå’ŒPHP-FPMæœåŠ¡

---

## 3. ğŸ Pythonåº”ç”¨ä»£ç†éƒ¨ç½²


### 3.1 Python Webåº”ç”¨éƒ¨ç½²åŸç†


**ğŸ”¸ å·¥ä½œæœºåˆ¶**
Pythonåº”ç”¨é€šå¸¸è¿è¡Œåœ¨ç‰¹å®šç«¯å£(å¦‚8000)ï¼ŒNginxä½œä¸ºåå‘ä»£ç†ï¼ŒæŠŠç”¨æˆ·è¯·æ±‚è½¬å‘ç»™Pythonåº”ç”¨ã€‚

```
ç”¨æˆ·è¯·æ±‚:80ç«¯å£ â†’ Nginx â†’ Pythonåº”ç”¨:8000ç«¯å£
```

è¿™æ ·åšçš„å¥½å¤„ï¼š
- **å®‰å…¨æ€§**ï¼šPythonåº”ç”¨ä¸ç›´æ¥æš´éœ²ç»™ç”¨æˆ·
- **æ€§èƒ½**ï¼šNginxå¤„ç†é™æ€æ–‡ä»¶ï¼ŒPythonä¸“æ³¨ä¸šåŠ¡é€»è¾‘
- **æ‰©å±•æ€§**ï¼šå¯ä»¥éƒ¨ç½²å¤šä¸ªPythonåº”ç”¨å®ä¾‹

### 3.2 Djangoåº”ç”¨éƒ¨ç½²é…ç½®


**ğŸ”¸ Djangoåº”ç”¨å¯åŠ¨**
```bash
# ä½¿ç”¨Gunicornå¯åŠ¨Djangoåº”ç”¨
gunicorn myproject.wsgi:application --bind 127.0.0.1:8000
```

**ğŸ”¸ Nginxä»£ç†é…ç½®**
```nginx
server {
    listen 80;
    server_name django-app.com;
    
    # ä»£ç†åŠ¨æ€è¯·æ±‚åˆ°Django
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ç›´æ¥å¤„ç†é™æ€æ–‡ä»¶(æ€§èƒ½æ›´å¥½)
    location /static/ {
        alias /var/www/django-app/static/;
        expires 1d;
    }
    
    location /media/ {
        alias /var/www/django-app/media/;
        expires 1d;
    }
}
```

### 3.3 Flaskåº”ç”¨éƒ¨ç½²é…ç½®


```nginx
upstream flask_app {
    server 127.0.0.1:5000;
    server 127.0.0.1:5001;  # å¤šå®ä¾‹è´Ÿè½½å‡è¡¡
}

server {
    listen 80;
    server_name flask-app.com;
    
    location / {
        proxy_pass http://flask_app;
        proxy_redirect off;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

**ğŸ’¡ å…³é”®é…ç½®è¯´æ˜**
- `upstream`ï¼šå®šä¹‰åç«¯æœåŠ¡å™¨ç»„ï¼Œæ”¯æŒè´Ÿè½½å‡è¡¡
- `proxy_set_header`ï¼šä¼ é€’å®¢æˆ·ç«¯ä¿¡æ¯ç»™Pythonåº”ç”¨
- å¤šå®ä¾‹éƒ¨ç½²å¯ä»¥æé«˜åº”ç”¨çš„å¹¶å‘å¤„ç†èƒ½åŠ›

---

## 4. ğŸŸ¢ Node.jsåº”ç”¨ä»£ç†é…ç½®


### 4.1 Node.jsåº”ç”¨éƒ¨ç½²ç‰¹ç‚¹


**ğŸ”¸ Node.jsçš„ç‰¹æ®Šæ€§**
Node.jsåº”ç”¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥å¤„ç†HTTPè¯·æ±‚ã€‚ä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé€šå¸¸è¿˜æ˜¯æ”¾åœ¨Nginxåé¢ï¼š

- **è¿›ç¨‹ç®¡ç†**ï¼šNginxæ›´ç¨³å®šï¼ŒNode.jså´©æºƒä¸å½±å“æ•´ä¸ªæœåŠ¡
- **é™æ€æ–‡ä»¶**ï¼šNginxå¤„ç†é™æ€æ–‡ä»¶æ•ˆç‡æ›´é«˜
- **SSLç»ˆç«¯**ï¼šNginxå¤„ç†HTTPSåŠ å¯†è§£å¯†

### 4.2 Expressåº”ç”¨éƒ¨ç½²é…ç½®


**ğŸ”¸ Node.jsåº”ç”¨å¯åŠ¨**
```javascript
// app.js
const express = require('express');
const app = express();

app.get('/', (req, res) => {
    res.send('Hello from Node.js!');
});

app.listen(3000, () => {
    console.log('åº”ç”¨è¿è¡Œåœ¨ç«¯å£3000');
});
```

**ğŸ”¸ Nginxä»£ç†é…ç½®**
```nginx
server {
    listen 80;
    server_name node-app.com;
    
    # ä»£ç†åˆ°Node.jsåº”ç”¨
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # é™æ€èµ„æºç›´æ¥ç”±Nginxå¤„ç†
    location /public/ {
        alias /var/www/node-app/public/;
        expires 1d;
    }
}
```

### 4.3 WebSocketæ”¯æŒé…ç½®


```nginx
server {
    listen 80;
    server_name websocket-app.com;
    
    location / {
        proxy_pass http://localhost:3000;
        
        # WebSocketç‰¹æ®Šé…ç½®
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        
        # WebSocketè¿æ¥è¶…æ—¶è®¾ç½®
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
}
```

**ğŸ”§ WebSocketé…ç½®è¦ç‚¹**
- `Upgrade`å’Œ`Connection`å¤´éƒ¨æ˜¯WebSocketæ¡æ‰‹å¿…éœ€çš„
- è¶…æ—¶æ—¶é—´è¦è®¾ç½®å¾—é•¿ä¸€äº›ï¼Œå› ä¸ºWebSocketæ˜¯é•¿è¿æ¥

---

## 5. ğŸ“„ é™æ€ç«™ç‚¹éƒ¨ç½²æ–¹æ¡ˆ


### 5.1 é™æ€ç«™ç‚¹çš„ç‰¹ç‚¹


**ğŸ”¸ ä»€ä¹ˆæ˜¯é™æ€ç«™ç‚¹**
é™æ€ç«™ç‚¹åªåŒ…å«HTMLã€CSSã€JavaScriptæ–‡ä»¶ï¼Œä¸éœ€è¦åç«¯ç¨‹åºå¤„ç†ã€‚ç”¨æˆ·è®¿é—®æ—¶ï¼ŒNginxç›´æ¥è¿”å›æ–‡ä»¶å†…å®¹ã€‚

**ğŸ”¸ é™æ€ç«™ç‚¹ä¼˜åŠ¿**
- **é€Ÿåº¦å¿«**ï¼šä¸éœ€è¦ç¨‹åºå¤„ç†ï¼Œç›´æ¥è¿”å›æ–‡ä»¶
- **å®‰å…¨æ€§é«˜**ï¼šæ²¡æœ‰åç«¯ç¨‹åºï¼Œæ”»å‡»é¢å°
- **æˆæœ¬ä½**ï¼šæœåŠ¡å™¨èµ„æºæ¶ˆè€—å°‘

### 5.2 åŸºç¡€é™æ€ç«™ç‚¹é…ç½®


```nginx
server {
    listen 80;
    server_name static-site.com;
    root /var/www/static-site;
    index index.html;
    
    # åŸºæœ¬æ–‡ä»¶æœåŠ¡
    location / {
        try_files $uri $uri/ =404;
    }
    
    # é™æ€èµ„æºç¼“å­˜ä¼˜åŒ–
    location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        add_header Vary Accept-Encoding;
    }
    
    # å­—ä½“æ–‡ä»¶å¤„ç†
    location ~* \.(woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Access-Control-Allow-Origin *;
    }
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_types text/css application/javascript text/javascript application/json;
}
```

### 5.3 é™æ€ç«™ç‚¹æ€§èƒ½ä¼˜åŒ–


**ğŸ”¸ ç¼“å­˜ç­–ç•¥é…ç½®**
```nginx
# ä¸åŒæ–‡ä»¶ç±»å‹çš„ç¼“å­˜ç­–ç•¥
location ~* \.(html)$ {
    expires 1h;                          # HTMLæ–‡ä»¶çŸ­ç¼“å­˜
    add_header Cache-Control "public";
}

location ~* \.(css|js)$ {
    expires 1y;                          # CSS/JSæ–‡ä»¶é•¿ç¼“å­˜
    add_header Cache-Control "public, immutable";
}

location ~* \.(png|jpg|jpeg|gif|ico)$ {
    expires 1y;                          # å›¾ç‰‡æ–‡ä»¶é•¿ç¼“å­˜
    add_header Cache-Control "public, immutable";
}
```

**ğŸ”¸ å®‰å…¨é…ç½®**
```nginx
# éšè—Nginxç‰ˆæœ¬ä¿¡æ¯
server_tokens off;

# ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶
location ~ /\. {
    deny all;
}

# é˜²æ­¢æŸäº›æ–‡ä»¶è¢«è®¿é—®
location ~* \.(log|conf|bak)$ {
    deny all;
}
```

---

## 6. ğŸ­ SPAå•é¡µåº”ç”¨é…ç½®


### 6.1 SPAåº”ç”¨çš„ç‰¹æ®Šéœ€æ±‚


**ğŸ”¸ ä»€ä¹ˆæ˜¯SPA**
SPA(Single Page Application)å•é¡µåº”ç”¨ï¼ŒåƒVueã€Reactæ„å»ºçš„åº”ç”¨ï¼Œæ‰€æœ‰é¡µé¢è·¯ç”±éƒ½ç”±å‰ç«¯JavaScriptå¤„ç†ã€‚

**ğŸ”¸ SPAçš„è·¯ç”±é—®é¢˜**
```
ç”¨æˆ·è®¿é—®ï¼šmyapp.com/about
ä¼ ç»ŸæœåŠ¡å™¨ï¼šæŸ¥æ‰¾aboutæ–‡ä»¶å¤¹ä¸‹çš„index.html
SPAåº”ç”¨ï¼šéœ€è¦è¿”å›æ ¹ç›®å½•çš„index.htmlï¼Œè®©JSå¤„ç†è·¯ç”±
```

å¦‚æœæŒ‰ä¼ ç»Ÿæ–¹å¼é…ç½®ï¼Œç”¨æˆ·åˆ·æ–°é¡µé¢æˆ–ç›´æ¥è®¿é—®å­è·¯ç”±ä¼šå‡ºç°404é”™è¯¯ã€‚

### 6.2 Vue.jsåº”ç”¨éƒ¨ç½²é…ç½®


```nginx
server {
    listen 80;
    server_name vue-app.com;
    root /var/www/vue-app/dist;
    index index.html;
    
    # SPAè·¯ç”±å¤„ç† - æ ¸å¿ƒé…ç½®
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # APIè¯·æ±‚ä»£ç†åˆ°åç«¯
    location /api/ {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # é™æ€èµ„æºä¼˜åŒ–
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # ç¡®ä¿HTMLä¸è¢«ç¼“å­˜(é¿å…æ›´æ–°é—®é¢˜)
    location ~* \.html$ {
        expires -1;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }
}
```

### 6.3 Reactåº”ç”¨éƒ¨ç½²é…ç½®


```nginx
server {
    listen 80;
    server_name react-app.com;
    root /var/www/react-app/build;
    index index.html;
    
    # React Routeræ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # æœåŠ¡ç«¯APIä»£ç†
    location /api/ {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
    }
    
    # é™æ€èµ„æºå¤„ç†
    location /static/ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

**ğŸ’¡ SPAé…ç½®è¦ç‚¹**
- `try_files $uri $uri/ /index.html`ï¼šè¿™æ˜¯SPAé…ç½®çš„æ ¸å¿ƒï¼Œæ‰€æœ‰æ‰¾ä¸åˆ°çš„è·¯å¾„éƒ½è¿”å›index.html
- HTMLæ–‡ä»¶ä¸è¦ç¼“å­˜ï¼Œé¿å…åº”ç”¨æ›´æ–°åç”¨æˆ·çœ‹åˆ°æ—§ç‰ˆæœ¬
- é™æ€èµ„æºè¦é•¿æœŸç¼“å­˜ï¼Œæé«˜æ€§èƒ½

---

## 7. ğŸŒ å¤šè¯­è¨€åº”ç”¨æ··åˆéƒ¨ç½²


### 7.1 æ··åˆéƒ¨ç½²åœºæ™¯


åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç»å¸¸éœ€è¦åœ¨åŒä¸€ä¸ªåŸŸåä¸‹éƒ¨ç½²å¤šç§ç±»å‹çš„åº”ç”¨ï¼š

```
mysite.com/              â†’ é™æ€é¦–é¡µ
mysite.com/blog/         â†’ WordPressåšå®¢(PHP)
mysite.com/api/          â†’ Python APIæœåŠ¡
mysite.com/admin/        â†’ Vue.jsç®¡ç†åå°
```

### 7.2 è·¯å¾„åˆ†å‘é…ç½®


```nginx
server {
    listen 80;
    server_name mysite.com;
    
    # æ ¹è·¯å¾„ - é™æ€é¦–é¡µ
    location = / {
        root /var/www/homepage;
        try_files /index.html =404;
    }
    
    # é™æ€èµ„æº
    location /assets/ {
        root /var/www/homepage;
        expires 1y;
    }
    
    # WordPressåšå®¢
    location /blog/ {
        alias /var/www/wordpress/;
        index index.php;
        
        # WordPresså†…éƒ¨è·¯å¾„å¤„ç†
        location ~ /blog/.*\.php$ {
            fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
            fastcgi_param SCRIPT_FILENAME $request_filename;
            include fastcgi_params;
        }
        
        try_files $uri $uri/ /blog/index.php?$args;
    }
    
    # Python APIæœåŠ¡
    location /api/ {
        proxy_pass http://localhost:8000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # Vue.jsç®¡ç†åå°
    location /admin/ {
        alias /var/www/vue-admin/dist/;
        try_files $uri $uri/ /admin/index.html;
        
        # ç®¡ç†åå°çš„é™æ€èµ„æº
        location ~* /admin/.*\.(js|css|png|jpg)$ {
            expires 1y;
        }
    }
}
```

### 7.3 åŸŸååˆ†å‘é…ç½®


```nginx
# ä¸»ç«™ç‚¹ - é™æ€ç½‘ç«™
server {
    listen 80;
    server_name mysite.com;
    root /var/www/main-site;
    index index.html;
    
    location / {
        try_files $uri $uri/ =404;
    }
}

# åšå®¢å­åŸŸå - WordPress
server {
    listen 80;
    server_name blog.mysite.com;
    root /var/www/wordpress;
    index index.php;
    
    location / {
        try_files $uri $uri/ /index.php?$args;
    }
    
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
        include fastcgi_params;
    }
}

# APIå­åŸŸå - PythonæœåŠ¡
server {
    listen 80;
    server_name api.mysite.com;
    
    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
    }
}

# ç®¡ç†åå°å­åŸŸå - Vueåº”ç”¨
server {
    listen 80;
    server_name admin.mysite.com;
    root /var/www/vue-admin/dist;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é™æ€æ–‡ä»¶æœåŠ¡ï¼šNginxç›´æ¥æä¾›æ–‡ä»¶ï¼Œé€Ÿåº¦æœ€å¿«
ğŸ”¸ åå‘ä»£ç†ï¼šNginxè½¬å‘è¯·æ±‚ç»™åç«¯åº”ç”¨ï¼Œæä¾›ç»Ÿä¸€å…¥å£
ğŸ”¸ FastCGIï¼šNginxä¸PHPé€šä¿¡çš„åè®®ï¼Œé€šè¿‡PHP-FPMå®ç°
ğŸ”¸ upstreamï¼šå®šä¹‰åç«¯æœåŠ¡å™¨ç»„ï¼Œå®ç°è´Ÿè½½å‡è¡¡
ğŸ”¸ try_filesï¼šæ–‡ä»¶æŸ¥æ‰¾è§„åˆ™ï¼ŒSPAåº”ç”¨çš„å…³é”®é…ç½®
```

### 8.2 ä¸åŒåº”ç”¨ç±»å‹çš„é…ç½®è¦ç‚¹


**ğŸ”¹ PHPåº”ç”¨é…ç½®é‡ç‚¹**
```
- fastcgi_passï¼šæŒ‡å®šPHP-FPMåœ°å€
- fastcgi_paramï¼šä¼ é€’å¿…è¦å‚æ•°
- é™æ€æ–‡ä»¶åˆ†ç¦»ï¼šæé«˜æ€§èƒ½
```

**ğŸ”¹ Python/Node.jsåº”ç”¨é…ç½®é‡ç‚¹**
```
- proxy_passï¼šåå‘ä»£ç†é…ç½®
- proxy_set_headerï¼šä¼ é€’å®¢æˆ·ç«¯ä¿¡æ¯
- upstreamï¼šè´Ÿè½½å‡è¡¡æ”¯æŒ
```

**ğŸ”¹ SPAåº”ç”¨é…ç½®é‡ç‚¹**
```
- try_filesï¼šè·¯ç”±å›é€€åˆ°index.html
- HTMLä¸ç¼“å­˜ï¼šé¿å…æ›´æ–°é—®é¢˜
- é™æ€èµ„æºé•¿ç¼“å­˜ï¼šæ€§èƒ½ä¼˜åŒ–
```

### 8.3 å®é™…éƒ¨ç½²å»ºè®®


**ğŸ¯ éƒ¨ç½²å‰å‡†å¤‡æ¸…å•**
- [ ] **ç¡®è®¤åº”ç”¨ç±»å‹**ï¼šé™æ€ã€PHPã€Pythonã€Node.jsã€SPA
- [ ] **å‡†å¤‡è¿è¡Œç¯å¢ƒ**ï¼šå®‰è£…ç›¸åº”çš„è¿è¡Œæ—¶å’Œä¾èµ–
- [ ] **è§„åˆ’ç›®å½•ç»“æ„**ï¼šä»£ç å­˜æ”¾ä½ç½®å’Œæƒé™è®¾ç½®
- [ ] **é…ç½®æ–‡ä»¶å¤‡ä»½**ï¼šä¿®æ”¹å‰å¤‡ä»½åŸæœ‰é…ç½®

**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³**
- **404é”™è¯¯**ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œtry_filesé…ç½®
- **502é”™è¯¯**ï¼šæ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- **é™æ€æ–‡ä»¶ä¸æ›´æ–°**ï¼šæ£€æŸ¥ç¼“å­˜é…ç½®
- **æƒé™é—®é¢˜**ï¼šç¡®è®¤Nginxç”¨æˆ·å¯¹æ–‡ä»¶çš„è®¿é—®æƒé™

**ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
- **é™æ€æ–‡ä»¶ç¼“å­˜**ï¼šåˆç†è®¾ç½®expiresæ—¶é—´
- **Gzipå‹ç¼©**ï¼šå‡å°‘ä¼ è¾“æ•°æ®é‡
- **è´Ÿè½½å‡è¡¡**ï¼šå¤šå®ä¾‹æé«˜å¹¶å‘èƒ½åŠ›
- **CDNåŠ é€Ÿ**ï¼šå…¨çƒåŠ é€Ÿé™æ€èµ„æº

### 8.4 å­¦ä¹ è¿›é˜¶è·¯å¾„


```
åŸºç¡€é…ç½® â†’ æ€§èƒ½ä¼˜åŒ– â†’ å®‰å…¨åŠ å›º â†’ ç›‘æ§å‘Šè­¦
    â†“           â†“          â†“          â†“
æŒæ¡åŸºæœ¬è¯­æ³•  ç¼“å­˜å’Œå‹ç¼©  HTTPSå’Œé˜²ç«å¢™  æ—¥å¿—åˆ†æ
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- é™æ€æ–‡ä»¶ç›´æ¥æœåŠ¡ï¼ŒåŠ¨æ€è¯·æ±‚åå‘ä»£ç†
- PHPç”¨fastcgiï¼ŒPython/Nodeç”¨proxy_pass
- SPAåº”ç”¨è®°ä½try_filesè§„åˆ™
- ç¼“å­˜ç­–ç•¥è¦åŒºåˆ†æ–‡ä»¶ç±»å‹
- æ··åˆéƒ¨ç½²é locationè·¯å¾„åˆ†å‘