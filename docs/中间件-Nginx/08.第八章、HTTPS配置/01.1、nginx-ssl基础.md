---
title: 1ã€nginx-sslåŸºç¡€
---
## ğŸ“š ç›®å½•

1. [SSL/TLSåè®®åŸºç¡€](#1-SSL/TLSåè®®åŸºç¡€)
2. [è¯ä¹¦ç±»å‹ä¸é€‰æ‹©](#2-è¯ä¹¦ç±»å‹ä¸é€‰æ‹©)
3. [è¯ä¹¦ç”³è¯·æµç¨‹](#3-è¯ä¹¦ç”³è¯·æµç¨‹)
4. [å…è´¹è¯ä¹¦è·å–](#4-å…è´¹è¯ä¹¦è·å–)
5. [è¯ä¹¦æ ¼å¼è½¬æ¢](#5-è¯ä¹¦æ ¼å¼è½¬æ¢)
6. [è¯ä¹¦é“¾é…ç½®](#6-è¯ä¹¦é“¾é…ç½®)
7. [Nginx SSLé…ç½®å®æˆ˜](#7-Nginx-SSLé…ç½®å®æˆ˜)
8. [å¸¸è§é—®é¢˜æ’æŸ¥](#8-å¸¸è§é—®é¢˜æ’æŸ¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” SSL/TLSåè®®åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯SSL/TLS


**é€šä¿—ç†è§£**ï¼š
æƒ³è±¡ä½ è¦ç»™æœ‹å‹å¯„ä¸€å°é‡è¦ä¿¡ä»¶ï¼Œä½ ä¼šï¼š
1. æŠŠä¿¡è£…è¿›ä¿¡å°ï¼ˆåŠ å¯†ï¼‰
2. åœ¨ä¿¡å°ä¸Šç­¾åï¼ˆèº«ä»½éªŒè¯ï¼‰
3. ç”¨æŒ‚å·ä¿¡å¯„é€ï¼ˆå®Œæ•´æ€§ä¿æŠ¤ï¼‰

SSL/TLSå°±æ˜¯äº’è”ç½‘ä¸Šçš„"æŒ‚å·ä¿¡ç³»ç»Ÿ"ï¼Œç¡®ä¿ç½‘ç«™å’Œç”¨æˆ·ä¹‹é—´çš„é€šä¿¡å®‰å…¨ã€‚

```
ğŸ”“ HTTPï¼ˆæ˜æ–‡ä¼ è¾“ï¼‰ï¼š
ç”¨æˆ· â”€â”€â”€â”€æ˜æ–‡æ•°æ®â”€â”€â”€â”€> ç½‘ç«™
     <â”€â”€â”€æ˜æ–‡æ•°æ®â”€â”€â”€â”€

ğŸ”’ HTTPSï¼ˆåŠ å¯†ä¼ è¾“ï¼‰ï¼š
ç”¨æˆ· â”€â”€â”€â”€åŠ å¯†æ•°æ®â”€â”€â”€â”€> ç½‘ç«™
     <â”€â”€â”€åŠ å¯†æ•°æ®â”€â”€â”€â”€
```

### 1.2 SSLä¸TLSçš„å…³ç³»


**å†å²æ¼”è¿›**ï¼š
```
ğŸ“… åè®®å‘å±•æ—¶é—´çº¿ï¼š
1994å¹´ - SSL 1.0 (æœªå…¬å¼€å‘å¸ƒ)
1995å¹´ - SSL 2.0 (æœ‰å®‰å…¨ç¼ºé™·)
1996å¹´ - SSL 3.0 (å¹¿æ³›ä½¿ç”¨)
1999å¹´ - TLS 1.0 (SSL 3.1ï¼Œæ ‡å‡†åŒ–)
2006å¹´ - TLS 1.1 (ä¿®å¤å®‰å…¨é—®é¢˜)
2008å¹´ - TLS 1.2 (ç›®å‰ä¸»æµ)
2018å¹´ - TLS 1.3 (æœ€æ–°æ ‡å‡†)

ğŸ’¡ ç®€å•è®°å¿†ï¼šTLSæ˜¯SSLçš„å‡çº§ç‰ˆ
```

**ğŸ”§ å®é™…ä½¿ç”¨ä¸­çš„åç§°**ï¼š
è™½ç„¶ç°åœ¨éƒ½ç”¨TLSåè®®ï¼Œä½†ä¹ æƒ¯ä¸Šä»ç§°ä¸ºSSLï¼š
- **SSLè¯ä¹¦** = TLSè¯ä¹¦
- **SSLé…ç½®** = TLSé…ç½®  
- **HTTPS** = HTTP over TLS

### 1.3 HTTPSå·¥ä½œåŸç†


**ğŸ¤ æ¡æ‰‹è¿‡ç¨‹ç®€åŒ–ç†è§£**ï¼š
```
å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹å®‰å…¨è¿æ¥è¿‡ç¨‹ï¼š

1. å®¢æˆ·ç«¯ï¼š"ä½ å¥½ï¼Œæˆ‘æƒ³å»ºç«‹å®‰å…¨è¿æ¥"
   â””â”€â”€ å‘é€æ”¯æŒçš„åŠ å¯†ç®—æ³•åˆ—è¡¨

2. æœåŠ¡å™¨ï¼š"å¥½çš„ï¼Œæˆ‘é€‰æ‹©è¿™ä¸ªåŠ å¯†ç®—æ³•"
   â””â”€â”€ å‘é€SSLè¯ä¹¦ï¼ˆåŒ…å«å…¬é’¥ï¼‰

3. å®¢æˆ·ç«¯ï¼š"æˆ‘éªŒè¯ä¸€ä¸‹ä½ çš„èº«ä»½"
   â””â”€â”€ éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§

4. åŒæ–¹ï¼š"æˆ‘ä»¬ç”¨è¿™ä¸ªå¯†é’¥é€šä¿¡"
   â””â”€â”€ åå•†å¯¹ç§°åŠ å¯†å¯†é’¥

5. å¼€å§‹åŠ å¯†é€šä¿¡
   â””â”€â”€ æ‰€æœ‰æ•°æ®éƒ½åŠ å¯†ä¼ è¾“
```

**âš¡ æ€§èƒ½å½±å“**ï¼š
- **æ¡æ‰‹é˜¶æ®µ**ï¼šæ¯”HTTPæ…¢ï¼ˆéœ€è¦é¢å¤–å¾€è¿”ï¼‰
- **æ•°æ®ä¼ è¾“**ï¼šå‡ ä¹æ— æ€§èƒ½å½±å“ï¼ˆç°ä»£CPUåŠ å¯†å¾ˆå¿«ï¼‰
- **ä¼˜åŒ–æ–¹æ¡ˆ**ï¼šTLS 1.3å‡å°‘æ¡æ‰‹æ¬¡æ•°ï¼ŒHTTP/2å¤ç”¨è¿æ¥

---

## 2. ğŸ“œ è¯ä¹¦ç±»å‹ä¸é€‰æ‹©


### 2.1 æŒ‰éªŒè¯çº§åˆ«åˆ†ç±»


**ğŸ” è¯ä¹¦éªŒè¯çº§åˆ«å¯¹æ¯”**ï¼š

| éªŒè¯ç±»å‹ | **éªŒè¯å†…å®¹** | **é€‚ç”¨åœºæ™¯** | **ä»·æ ¼** | **ç”³è¯·æ—¶é—´** |
|---------|-------------|-------------|---------|-------------|
| **DV** | `åŸŸåæ‰€æœ‰æƒ` | `ä¸ªäººç½‘ç«™ã€åšå®¢` | `å…è´¹-ä½` | `å‡ åˆ†é’Ÿ` |
| **OV** | `åŸŸå+ç»„ç»‡ä¿¡æ¯` | `ä¼ä¸šå®˜ç½‘` | `ä¸­ç­‰` | `1-3å¤©` |
| **EV** | `åŸŸå+ä¸¥æ ¼ç»„ç»‡éªŒè¯` | `é“¶è¡Œã€ç”µå•†` | `é«˜` | `1-2å‘¨` |

**ğŸ“ è¯¦ç»†è¯´æ˜**ï¼š

**DVï¼ˆDomain Validationï¼‰åŸŸåéªŒè¯**ï¼š
```
éªŒè¯æ–¹å¼ï¼š
â€¢ é‚®ä»¶éªŒè¯ï¼šå‘admin@domain.comå‘é€éªŒè¯é‚®ä»¶
â€¢ DNSéªŒè¯ï¼šæ·»åŠ ç‰¹å®šçš„DNSè®°å½•
â€¢ æ–‡ä»¶éªŒè¯ï¼šåœ¨ç½‘ç«™æ ¹ç›®å½•æ”¾ç½®éªŒè¯æ–‡ä»¶

ç‰¹ç‚¹ï¼š
âœ… ç”³è¯·ç®€å•å¿«é€Ÿ
âœ… ä»·æ ¼ä¾¿å®œï¼ˆå¾ˆå¤šå…è´¹ï¼‰
âœ… è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜
âŒ åªéªŒè¯åŸŸåæ‰€æœ‰æƒ
âŒ æµè§ˆå™¨æ˜¾ç¤ºæ™®é€šé”å›¾æ ‡
```

**OVï¼ˆOrganization Validationï¼‰ç»„ç»‡éªŒè¯**ï¼š
```
éªŒè¯å†…å®¹ï¼š
â€¢ åŸŸåæ‰€æœ‰æƒéªŒè¯
â€¢ ä¼ä¸šè¥ä¸šæ‰§ç…§éªŒè¯
â€¢ ä¼ä¸šç”µè¯å·ç éªŒè¯
â€¢ ä¼ä¸šåœ°å€éªŒè¯

é€‚ç”¨åœºæ™¯ï¼š
â€¢ ä¼ä¸šå®˜æ–¹ç½‘ç«™
â€¢ åœ¨çº¿ä¸šåŠ¡å¹³å°
â€¢ éœ€è¦å±•ç¤ºä¼ä¸šèº«ä»½çš„ç½‘ç«™

æµè§ˆå™¨æ˜¾ç¤ºï¼š
â€¢ ç»¿è‰²é”å›¾æ ‡
â€¢ å¯æŸ¥çœ‹è¯ä¹¦ä¸­çš„ä¼ä¸šä¿¡æ¯
```

**EVï¼ˆExtended Validationï¼‰æ‰©å±•éªŒè¯**ï¼š
```
ä¸¥æ ¼éªŒè¯ï¼š
â€¢ ä¼ä¸šæ³•å¾‹åœ°ä½éªŒè¯
â€¢ ä¼ä¸šç»è¥çŠ¶æ€ç¡®è®¤
â€¢ æˆæƒäººå‘˜èº«ä»½éªŒè¯
â€¢ ä¼ä¸šç”µè¯å®åœ°éªŒè¯

æµè§ˆå™¨æ˜¾ç¤ºï¼š
â€¢ åœ°å€æ æ˜¾ç¤ºä¼ä¸šåç§°ï¼ˆè¾ƒæ–°æµè§ˆå™¨å·²å–æ¶ˆï¼‰
â€¢ ç»¿è‰²é”å›¾æ ‡
â€¢ æœ€é«˜ä¿¡ä»»çº§åˆ«

ä»·æ ¼ï¼šé€šå¸¸æ¯å¹´å‡ åƒåˆ°ä¸Šä¸‡å…ƒ
```

### 2.2 æŒ‰åŸŸåè¦†ç›–èŒƒå›´åˆ†ç±»


**ğŸŒ åŸŸåè¦†ç›–ç±»å‹**ï¼š

```
å•åŸŸåè¯ä¹¦ï¼š
â€¢ åªä¿æŠ¤ä¸€ä¸ªå®Œæ•´åŸŸå
â€¢ ä¾‹ï¼šwww.example.com
â€¢ ä¸ä¿æŠ¤å­åŸŸå

é€šé…ç¬¦è¯ä¹¦ï¼ˆWildcardï¼‰ï¼š
â€¢ ä¿æŠ¤ä¸€çº§å­åŸŸå
â€¢ ä¾‹ï¼š*.example.com
â€¢ åŒ…å«ï¼šwww.example.com, api.example.com, blog.example.com
â€¢ ä¸åŒ…å«ï¼šsub.api.example.comï¼ˆäºŒçº§å­åŸŸåï¼‰

å¤šåŸŸåè¯ä¹¦ï¼ˆSAN/UCCï¼‰ï¼š
â€¢ ä¸€å¼ è¯ä¹¦ä¿æŠ¤å¤šä¸ªä¸åŒåŸŸå
â€¢ ä¾‹ï¼šexample.com, example.net, mydomain.com
â€¢ å¯ä»¥æ··åˆä¸»åŸŸåå’Œå­åŸŸå
```

**ğŸ’° ä»·æ ¼å‚è€ƒ**ï¼š
```
å…è´¹è¯ä¹¦ï¼š
â€¢ Let's Encryptï¼šå®Œå…¨å…è´¹çš„DVè¯ä¹¦
â€¢ æœ‰æ•ˆæœŸ90å¤©ï¼Œæ”¯æŒè‡ªåŠ¨ç»­æœŸ

ä»˜è´¹è¯ä¹¦ï¼š
â€¢ å•åŸŸåDVï¼šå‡ ååˆ°å‡ ç™¾å…ƒ/å¹´
â€¢ é€šé…ç¬¦DVï¼šå‡ ç™¾åˆ°å‡ åƒå…ƒ/å¹´
â€¢ OVè¯ä¹¦ï¼šå‡ ç™¾åˆ°å‡ åƒå…ƒ/å¹´
â€¢ EVè¯ä¹¦ï¼šå‡ åƒåˆ°ä¸Šä¸‡å…ƒ/å¹´
```

### 2.3 è¯ä¹¦é€‰æ‹©å»ºè®®


**ğŸ¯ é€‰æ‹©å†³ç­–æµç¨‹**ï¼š
```
ä¸ªäººç½‘ç«™/åšå®¢ï¼š
â””â”€â”€ DVå•åŸŸåè¯ä¹¦ï¼ˆLet's Encryptå…è´¹ï¼‰

å°å‹ä¼ä¸šå®˜ç½‘ï¼š
â””â”€â”€ OVå•åŸŸåè¯ä¹¦

æœ‰å¤šä¸ªå­åŸŸåï¼š
â””â”€â”€ é€šé…ç¬¦è¯ä¹¦

å¤§å‹ä¼ä¸š/é‡‘èæœºæ„ï¼š
â””â”€â”€ EVè¯ä¹¦

ç”µå•†/æ”¯ä»˜ç½‘ç«™ï¼š
â””â”€â”€ EVè¯ä¹¦ + ä¸¥æ ¼çš„å®‰å…¨é…ç½®
```

---

## 3. ğŸ“‹ è¯ä¹¦ç”³è¯·æµç¨‹


### 3.1 ä¼ ç»ŸCAè¯ä¹¦ç”³è¯·


**ğŸ“ æ ‡å‡†ç”³è¯·æ­¥éª¤**ï¼š

```
1. é€‰æ‹©è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰
   å¸¸è§CAï¼šDigiCertã€GlobalSignã€GeoTrustã€Sectigo

2. ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆCSRï¼‰
   åŒ…å«ï¼šåŸŸåä¿¡æ¯ã€ä¼ä¸šä¿¡æ¯ã€å…¬é’¥

3. æäº¤ç”³è¯·ææ–™
   DVï¼šåŸŸåéªŒè¯
   OVï¼šä¼ä¸šèµ„æ–™
   EVï¼šè¯¦ç»†ä¼ä¸šéªŒè¯æ–‡ä»¶

4. å®ŒæˆéªŒè¯è¿‡ç¨‹
   é‚®ä»¶éªŒè¯/DNSéªŒè¯/æ–‡ä»¶éªŒè¯

5. ä¸‹è½½è¯ä¹¦æ–‡ä»¶
   è·å¾—ï¼šè¯ä¹¦æ–‡ä»¶ã€ç§é’¥æ–‡ä»¶ã€è¯ä¹¦é“¾æ–‡ä»¶
```

**ğŸ”‘ ç”ŸæˆCSRç¤ºä¾‹**ï¼š
```bash
# ç”Ÿæˆç§é’¥
openssl genrsa -out example.com.key 2048

# ç”ŸæˆCSRæ–‡ä»¶
openssl req -new -key example.com.key -out example.com.csr

# å¡«å†™ä¿¡æ¯ç¤ºä¾‹ï¼š
Country Name: CN
State: Beijing  
City: Beijing
Organization: My Company Ltd
Organizational Unit: IT Department
Common Name: www.example.com
Email Address: admin@example.com
```

### 3.2 åŸŸåéªŒè¯æ–¹æ³•


**ğŸ“§ é‚®ä»¶éªŒè¯**ï¼š
```
éªŒè¯æµç¨‹ï¼š
1. CAå‘æŒ‡å®šé‚®ç®±å‘é€éªŒè¯é‚®ä»¶
   å¸¸ç”¨é‚®ç®±ï¼šadmin@ã€webmaster@ã€postmaster@domain.com

2. ç‚¹å‡»é‚®ä»¶ä¸­çš„éªŒè¯é“¾æ¥
   æˆ–å›å¤åŒ…å«éªŒè¯ç çš„é‚®ä»¶

3. éªŒè¯å®Œæˆï¼Œç­‰å¾…è¯ä¹¦ç­¾å‘

ä¼˜ç‚¹ï¼šç®€å•å¿«æ·
ç¼ºç‚¹ï¼šéœ€è¦é‚®ç®±è®¿é—®æƒé™
```

**ğŸŒ DNSéªŒè¯**ï¼š
```
éªŒè¯æµç¨‹ï¼š
1. CAæä¾›ä¸€ä¸ªDNSè®°å½•
   ç±»å‹ï¼šTXTè®°å½•
   åç§°ï¼š_acme-challenge.example.com
   å€¼ï¼šéšæœºéªŒè¯å­—ç¬¦ä¸²

2. åœ¨DNSæœåŠ¡å•†æ·»åŠ è¿™æ¡è®°å½•

3. CAæŸ¥è¯¢DNSè®°å½•éªŒè¯æ‰€æœ‰æƒ

4. éªŒè¯æˆåŠŸååˆ é™¤ä¸´æ—¶DNSè®°å½•

ä¼˜ç‚¹ï¼šé€‚åˆè‡ªåŠ¨åŒ–ï¼Œæ”¯æŒé€šé…ç¬¦è¯ä¹¦
ç¼ºç‚¹ï¼šéœ€è¦DNSç®¡ç†æƒé™
```

**ğŸ“ æ–‡ä»¶éªŒè¯**ï¼š
```
éªŒè¯æµç¨‹ï¼š
1. CAæä¾›éªŒè¯æ–‡ä»¶å†…å®¹
   æ–‡ä»¶åï¼šéšæœºå­—ç¬¦ä¸²
   è·¯å¾„ï¼š/.well-known/acme-challenge/

2. å°†æ–‡ä»¶ä¸Šä¼ åˆ°ç½‘ç«™æ ¹ç›®å½•

3. CAè®¿é—®URLéªŒè¯æ–‡ä»¶å†…å®¹
   http://example.com/.well-known/acme-challenge/æ–‡ä»¶å

4. éªŒè¯æˆåŠŸåå¯åˆ é™¤æ–‡ä»¶

ä¼˜ç‚¹ï¼šç›´è§‚ç®€å•
ç¼ºç‚¹ï¼šéœ€è¦ç½‘ç«™è®¿é—®æƒé™
```

---

## 4. ğŸ†“ å…è´¹è¯ä¹¦è·å–


### 4.1 Let's Encryptç®€ä»‹


**ä»€ä¹ˆæ˜¯Let's Encryptï¼Ÿ**
Let's Encryptå°±åƒæ˜¯"è¯ä¹¦ç•Œçš„å¼€æºè½¯ä»¶"ï¼Œç”±éè¥åˆ©ç»„ç»‡è¿è¥ï¼Œç›®æ ‡æ˜¯è®©æ‰€æœ‰ç½‘ç«™éƒ½èƒ½å…è´¹ä½¿ç”¨HTTPSã€‚

```
ğŸŒŸ Let's Encryptç‰¹ç‚¹ï¼š
âœ… å®Œå…¨å…è´¹ä½¿ç”¨
âœ… è‡ªåŠ¨åŒ–ç”³è¯·å’Œç»­æœŸ
âœ… è¢«æ‰€æœ‰ä¸»æµæµè§ˆå™¨ä¿¡ä»»
âœ… æ”¯æŒé€šé…ç¬¦è¯ä¹¦
âœ… æœ‰æ•ˆæœŸ90å¤©ï¼ˆæ¨èè‡ªåŠ¨ç»­æœŸï¼‰

ğŸ“Š ä½¿ç”¨ç»Ÿè®¡ï¼š
â€¢ å…¨çƒè¶…è¿‡2.5äº¿ä¸ªæ´»è·ƒè¯ä¹¦
â€¢ è¦†ç›–è¶…è¿‡1.5äº¿ä¸ªç½‘ç«™
â€¢ å¸‚åœºå æœ‰ç‡è¶…è¿‡60%
```

### 4.2 Certbotå·¥å…·ä½¿ç”¨


**Certbotæ˜¯ä»€ä¹ˆï¼Ÿ**
Certbotæ˜¯Let's Encryptå®˜æ–¹æ¨èçš„è¯ä¹¦ç”³è¯·å·¥å…·ï¼Œå°±åƒä¸€ä¸ª"è‡ªåŠ¨åŒ–çš„è¯ä¹¦ç®¡å®¶"ã€‚

**ğŸ”§ Certbotå®‰è£…**ï¼š
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install certbot python3-certbot-nginx

# CentOS/RHEL 8+
sudo dnf install certbot python3-certbot-nginx

# é€šè¿‡snapå®‰è£…ï¼ˆæ¨èï¼Œç‰ˆæœ¬æ›´æ–°ï¼‰
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
```

**ğŸ“œ ç”³è¯·è¯ä¹¦å‘½ä»¤**ï¼š
```bash
# è‡ªåŠ¨é…ç½®Nginxï¼ˆæ¨èæ–°æ‰‹ï¼‰
sudo certbot --nginx -d example.com -d www.example.com

# ä»…è·å–è¯ä¹¦ï¼ˆæ‰‹åŠ¨é…ç½®ï¼‰
sudo certbot certonly --nginx -d example.com

# DNSéªŒè¯æ–¹å¼ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
sudo certbot certonly --manual --preferred-challenges dns -d *.example.com

# äº¤äº’å¼ç”³è¯·
sudo certbot --nginx
```

**ğŸ”„ è‡ªåŠ¨ç»­æœŸè®¾ç½®**ï¼š
```bash
# æµ‹è¯•ç»­æœŸï¼ˆä¸å®é™…æ‰§è¡Œï¼‰
sudo certbot renew --dry-run

# è®¾ç½®å®šæ—¶ä»»åŠ¡
sudo crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹æ£€æŸ¥ç»­æœŸï¼‰
0 2 * * * /usr/bin/certbot renew --quiet

# æˆ–ä½¿ç”¨systemd timerï¼ˆç°ä»£Linuxæ¨èï¼‰
sudo systemctl enable --now certbot.timer
sudo systemctl status certbot.timer
```

### 4.3 å…¶ä»–å…è´¹è¯ä¹¦é€‰é¡¹


**â˜ï¸ äº‘æœåŠ¡å•†å…è´¹è¯ä¹¦**ï¼š
```
é˜¿é‡Œäº‘SSLè¯ä¹¦ï¼š
â€¢ å…è´¹DVå•åŸŸåè¯ä¹¦
â€¢ æœ‰æ•ˆæœŸ1å¹´
â€¢ ç”³è¯·ç®€å•ï¼Œè‡ªåŠ¨éƒ¨ç½²

è…¾è®¯äº‘SSLè¯ä¹¦ï¼š
â€¢ å…è´¹DVå•åŸŸåè¯ä¹¦  
â€¢ æœ‰æ•ˆæœŸ1å¹´
â€¢ æ”¯æŒè‡ªåŠ¨ç»­æœŸ

AWS Certificate Managerï¼š
â€¢ å®Œå…¨å…è´¹ï¼ˆä»…é™AWSæœåŠ¡ä½¿ç”¨ï¼‰
â€¢ è‡ªåŠ¨ç»­æœŸ
â€¢ ä¸AWSæœåŠ¡æ·±åº¦é›†æˆ
```

**ğŸŒ Cloudflareå…è´¹SSL**ï¼š
```
ç‰¹ç‚¹ï¼š
â€¢ CDNæœåŠ¡é™„å¸¦å…è´¹SSL
â€¢ è‡ªåŠ¨ç­¾å‘å’Œç»­æœŸ
â€¢ æ”¯æŒé€šé…ç¬¦è¯ä¹¦
â€¢ æä¾›å¤šç§åŠ å¯†æ¨¡å¼

ä½¿ç”¨æ–¹å¼ï¼š
1. å°†åŸŸåDNSæ‰˜ç®¡åˆ°Cloudflare
2. å¯ç”¨ä»£ç†ï¼ˆæ©™è‰²äº‘æœµï¼‰
3. è‡ªåŠ¨è·å¾—SSLè¯ä¹¦

æ³¨æ„ï¼šéœ€è¦é…ç½®æ­£ç¡®çš„SSLæ¨¡å¼
```

### 4.4 å…è´¹è¯ä¹¦ä½¿ç”¨å»ºè®®


**âœ… é€‚åˆå…è´¹è¯ä¹¦çš„åœºæ™¯**ï¼š
```
â€¢ ä¸ªäººåšå®¢å’Œç½‘ç«™
â€¢ å¼€å‘æµ‹è¯•ç¯å¢ƒ
â€¢ å°å‹ä¼ä¸šå®˜ç½‘
â€¢ å¼€æºé¡¹ç›®å®˜ç½‘
â€¢ APIæœåŠ¡ç«¯ç‚¹
```

**âš ï¸ è€ƒè™‘ä»˜è´¹è¯ä¹¦çš„åœºæ™¯**ï¼š
```
â€¢ é‡‘èæ”¯ä»˜ç½‘ç«™
â€¢ å¤§å‹ç”µå•†å¹³å°
â€¢ ä¼ä¸šçº§åº”ç”¨
â€¢ éœ€è¦ä¿é™©èµ”ä»˜çš„ä¸šåŠ¡
â€¢ éœ€è¦æŠ€æœ¯æ”¯æŒçš„åœºæ™¯
```

**ğŸ¯ ä½¿ç”¨å»ºè®®**ï¼š
- **æ–°æ‰‹**ï¼šä»Let's Encryptå¼€å§‹ï¼Œç®€å•æ˜“ç”¨
- **ä¼ä¸š**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©OVæˆ–EVè¯ä¹¦
- **å¼€å‘è€…**ï¼šLet's Encrypt + è‡ªåŠ¨åŒ–è„šæœ¬
- **è¿ç»´**ï¼šå»ºè®®å¤šç§æ–¹æ¡ˆå¤‡ç”¨

---

## 5. ğŸ”„ è¯ä¹¦æ ¼å¼è½¬æ¢


### 5.1 å¸¸è§è¯ä¹¦æ ¼å¼


**ğŸ“ è¯ä¹¦æ–‡ä»¶æ ¼å¼è¯´æ˜**ï¼š

| æ ¼å¼ | **æ‰©å±•å** | **å†…å®¹** | **ç”¨é€”** |
|------|-----------|---------|---------|
| **PEM** | `.pem, .crt, .cer` | `Base64ç¼–ç æ–‡æœ¬` | `Nginx, Apache` |
| **DER** | `.der, .cer` | `äºŒè¿›åˆ¶æ ¼å¼` | `Java, Windows` |
| **PKCS#12** | `.p12, .pfx` | `åŒ…å«ç§é’¥çš„äºŒè¿›åˆ¶` | `Windows IIS` |
| **JKS** | `.jks` | `Javaå¯†é’¥åº“` | `Javaåº”ç”¨` |

**ğŸ“ PEMæ ¼å¼ç¤ºä¾‹**ï¼š
```
-----BEGIN CERTIFICATE-----
MIIFXzCCBEegAwIBAgISA7p8QyB6JpBIXXXXXXXXXXXXXX
...base64ç¼–ç çš„è¯ä¹¦å†…å®¹...
-----END CERTIFICATE-----

-----BEGIN PRIVATE KEY-----
MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEA
...base64ç¼–ç çš„ç§é’¥å†…å®¹...
-----END PRIVATE KEY-----
```

### 5.2 æ ¼å¼è½¬æ¢å‘½ä»¤


**ğŸ”§ PEMè½¬å…¶ä»–æ ¼å¼**ï¼š
```bash
# PEMè½¬DER
openssl x509 -in cert.pem -outform DER -out cert.der

# PEMè½¬PKCS#12ï¼ˆåŒ…å«ç§é’¥ï¼‰
openssl pkcs12 -export -in cert.pem -inkey private.key \
  -out cert.p12 -name "My Certificate"

# è¯ä¹¦å’Œç§é’¥åˆå¹¶ä¸ºä¸€ä¸ªPEMæ–‡ä»¶
cat cert.pem private.key > combined.pem
```

**ğŸ”„ å…¶ä»–æ ¼å¼è½¬PEM**ï¼š
```bash
# DERè½¬PEM
openssl x509 -in cert.der -inform DER -out cert.pem

# PKCS#12è½¬PEM
openssl pkcs12 -in cert.p12 -out cert.pem -nodes

# åˆ†ç¦»PKCS#12ä¸­çš„è¯ä¹¦å’Œç§é’¥
openssl pkcs12 -in cert.p12 -nokeys -out cert.pem
openssl pkcs12 -in cert.p12 -nocerts -out private.key -nodes
```

### 5.3 è¯ä¹¦ä¿¡æ¯æŸ¥çœ‹


**ğŸ” æŸ¥çœ‹è¯ä¹¦è¯¦ç»†ä¿¡æ¯**ï¼š
```bash
# æŸ¥çœ‹PEMè¯ä¹¦ä¿¡æ¯
openssl x509 -in cert.pem -text -noout

# æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸ
openssl x509 -in cert.pem -dates -noout

# éªŒè¯è¯ä¹¦å’Œç§é’¥æ˜¯å¦åŒ¹é…
openssl x509 -in cert.pem -noout -modulus | md5sum
openssl rsa -in private.key -noout -modulus | md5sum
# ä¸¤ä¸ªMD5å€¼åº”è¯¥ç›¸åŒ

# åœ¨çº¿æŸ¥çœ‹ç½‘ç«™è¯ä¹¦
openssl s_client -connect example.com:443 -servername example.com
```

---

## 6. ğŸ”— è¯ä¹¦é“¾é…ç½®


### 6.1 è¯ä¹¦é“¾æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯è¯ä¹¦é“¾ï¼Ÿ**
æƒ³è±¡è¯ä¹¦é“¾å°±åƒ"èº«ä»½è¯æ˜çš„ä¿¡ä»»é“¾æ¡"ï¼š

```
ğŸ›ï¸ æ ¹è¯ä¹¦é¢å‘æœºæ„ï¼ˆRoot CAï¼‰
â””â”€â”€ "æˆ‘æ˜¯æƒå¨æœºæ„ï¼Œå¤§å®¶éƒ½ä¿¡ä»»æˆ‘"

ğŸ¢ ä¸­é—´è¯ä¹¦é¢å‘æœºæ„ï¼ˆIntermediate CAï¼‰  
â””â”€â”€ "æ ¹CAæˆæƒäº†æˆ‘ï¼Œæˆ‘å¯ä»¥ç­¾å‘è¯ä¹¦"

ğŸ“„ ç½‘ç«™è¯ä¹¦ï¼ˆEnd-entity Certificateï¼‰
â””â”€â”€ "ä¸­é—´CAä¸ºæˆ‘çš„ç½‘ç«™ç­¾å‘äº†è¯ä¹¦"

ğŸŒ æµè§ˆå™¨éªŒè¯è¿‡ç¨‹ï¼š
ç½‘ç«™è¯ä¹¦ â†’ ä¸­é—´è¯ä¹¦ â†’ æ ¹è¯ä¹¦ â†’ ä¿¡ä»»
```

### 6.2 è¯ä¹¦é“¾æ–‡ä»¶æ„å»º


**ğŸ“‹ è¯ä¹¦é“¾æ–‡ä»¶ç»“æ„**ï¼š
```
å®Œæ•´çš„è¯ä¹¦é“¾æ–‡ä»¶ï¼ˆfullchain.pemï¼‰åº”è¯¥åŒ…å«ï¼š
1. ç½‘ç«™è¯ä¹¦ï¼ˆæœåŠ¡å™¨è¯ä¹¦ï¼‰
2. ä¸­é—´è¯ä¹¦ï¼ˆå¯èƒ½æœ‰å¤šä¸ªï¼‰
3. æ ¹è¯ä¹¦ï¼ˆå¯é€‰ï¼Œæµè§ˆå™¨é€šå¸¸å†…ç½®ï¼‰

æ­£ç¡®çš„é¡ºåºï¼š
-----BEGIN CERTIFICATE-----
ç½‘ç«™è¯ä¹¦å†…å®¹
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
ä¸­é—´è¯ä¹¦å†…å®¹
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
æ ¹è¯ä¹¦å†…å®¹ï¼ˆå¯é€‰ï¼‰
-----END CERTIFICATE-----
```

**ğŸ”§ æ‰‹åŠ¨æ„å»ºè¯ä¹¦é“¾**ï¼š
```bash
# è·å–ä¸­é—´è¯ä¹¦ï¼ˆå¦‚æœCAæ²¡æœ‰æä¾›ï¼‰
# ä»ç½‘ç«™è¯ä¹¦ä¸­æŸ¥çœ‹é¢å‘è€…ä¿¡æ¯
openssl x509 -in cert.pem -text -noout | grep -A2 "Issuer"

# ä¸‹è½½ä¸­é—´è¯ä¹¦ï¼ˆç¤ºä¾‹URLï¼Œå®é™…éœ€è¦æŸ¥æ‰¾CAå®˜ç½‘ï¼‰
wget -O intermediate.pem "https://cert.ca-authority.com/intermediate.crt"

# åˆå¹¶è¯ä¹¦é“¾
cat cert.pem intermediate.pem > fullchain.pem

# éªŒè¯è¯ä¹¦é“¾
openssl verify -CAfile ca-bundle.pem fullchain.pem
```

### 6.3 è¯ä¹¦é“¾éªŒè¯


**ğŸ” éªŒè¯è¯ä¹¦é“¾å®Œæ•´æ€§**ï¼š
```bash
# åœ¨çº¿æµ‹è¯•SSLé…ç½®
curl -I https://example.com

# ä½¿ç”¨SSL Labsåœ¨çº¿æµ‹è¯•
# https://www.ssllabs.com/ssltest/

# å‘½ä»¤è¡ŒéªŒè¯è¯ä¹¦é“¾
openssl s_client -connect example.com:443 -verify_return_error

# æ˜¾ç¤ºå®Œæ•´è¯ä¹¦é“¾
openssl s_client -connect example.com:443 -showcerts
```

**âš ï¸ å¸¸è§è¯ä¹¦é“¾é—®é¢˜**ï¼š
```
é—®é¢˜ï¼šæµè§ˆå™¨æ˜¾ç¤º"è¯ä¹¦é“¾ä¸å®Œæ•´"
åŸå› ï¼šç¼ºå°‘ä¸­é—´è¯ä¹¦
è§£å†³ï¼šä¸‹è½½å¹¶é…ç½®ä¸­é—´è¯ä¹¦

é—®é¢˜ï¼šç§»åŠ¨è®¾å¤‡æ— æ³•è®¿é—®
åŸå› ï¼šè¯ä¹¦é“¾é¡ºåºé”™è¯¯æˆ–ç¼ºå°‘æ ¹è¯ä¹¦
è§£å†³ï¼šé‡æ–°æ„å»ºæ­£ç¡®çš„è¯ä¹¦é“¾

é—®é¢˜ï¼šæŸäº›æµè§ˆå™¨ä¸ä¿¡ä»»
åŸå› ï¼šä½¿ç”¨äº†è¿‡æ—¶çš„æ ¹è¯ä¹¦
è§£å†³ï¼šæ›´æ–°åˆ°æœ€æ–°çš„è¯ä¹¦é“¾
```

---

## 7. âš™ï¸ Nginx SSLé…ç½®å®æˆ˜


### 7.1 åŸºæœ¬SSLé…ç½®


**ğŸ“ Nginx SSLé…ç½®æ¨¡æ¿**ï¼š
```nginx
server {
    # HTTPé‡å®šå‘åˆ°HTTPS
    listen 80;
    server_name example.com www.example.com;
    return 301 https://$server_name$request_uri;
}

server {
    # HTTPSé…ç½®
    listen 443 ssl http2;
    server_name example.com www.example.com;
    
    # è¯ä¹¦æ–‡ä»¶é…ç½®
    ssl_certificate /etc/nginx/ssl/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/private.key;
    
    # åŸºæœ¬SSLè®¾ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # å®‰å…¨å¤´è®¾ç½®
    add_header Strict-Transport-Security "max-age=31536000" always;
    
    # ç½‘ç«™å†…å®¹
    location / {
        root /var/www/html;
        index index.html;
    }
}
```

### 7.2 SSLä¼˜åŒ–é…ç½®


**âš¡ æ€§èƒ½ä¼˜åŒ–è®¾ç½®**ï¼š
```nginx
http {
    # SSLä¼šè¯ç¼“å­˜
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    
    # SSLä¼šè¯å¤ç”¨
    ssl_session_tickets off;
    
    # OCSPè£…è®¢ï¼ˆOnline Certificate Status Protocolï¼‰
    ssl_stapling on;
    ssl_stapling_verify on;
    ssl_trusted_certificate /etc/nginx/ssl/fullchain.pem;
    resolver 8.8.8.8 8.8.4.4 valid=300s;
    resolver_timeout 5s;
}

server {
    listen 443 ssl http2;
    server_name example.com;
    
    # è¯ä¹¦é…ç½®
    ssl_certificate /etc/nginx/ssl/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/private.key;
    
    # ç°ä»£SSLé…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # å®‰å…¨å¤´é…ç½®
    add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload" always;
    add_header X-Content-Type-Options nosniff always;
    add_header X-Frame-Options DENY always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    location / {
        root /var/www/html;
        index index.html;
    }
}
```

### 7.3 å¤šåŸŸåSSLé…ç½®


**ğŸŒ å¤šç«™ç‚¹SSLé…ç½®**ï¼š
```nginx
# ä¸»åŸŸåé…ç½®
server {
    listen 443 ssl http2;
    server_name example.com www.example.com;
    
    ssl_certificate /etc/nginx/ssl/example.com/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/example.com/private.key;
    
    location / {
        root /var/www/example.com;
        index index.html;
    }
}

# å­åŸŸåé…ç½®
server {
    listen 443 ssl http2;
    server_name api.example.com;
    
    ssl_certificate /etc/nginx/ssl/api.example.com/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/api.example.com/private.key;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

# é€šé…ç¬¦è¯ä¹¦é…ç½®
server {
    listen 443 ssl http2;
    server_name *.example.com;
    
    # å•ä¸ªé€šé…ç¬¦è¯ä¹¦è¦†ç›–æ‰€æœ‰å­åŸŸå
    ssl_certificate /etc/nginx/ssl/wildcard.example.com/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/wildcard.example.com/private.key;
    
    # æ ¹æ®å­åŸŸååˆ†å‘åˆ°ä¸åŒåç«¯
    location / {
        if ($host = api.example.com) {
            proxy_pass http://api-backend;
        }
        if ($host = admin.example.com) {
            proxy_pass http://admin-backend;
        }
        
        root /var/www/default;
    }
}
```

### 7.4 Let's Encryptè‡ªåŠ¨åŒ–é…ç½®


**ğŸ¤– è‡ªåŠ¨åŒ–SSLç®¡ç†è„šæœ¬**ï¼š
```bash
#!/bin/bash
# ssl-renew.sh - Let's Encryptè¯ä¹¦è‡ªåŠ¨ç»­æœŸè„šæœ¬

DOMAIN="example.com"
EMAIL="admin@example.com"
WEBROOT="/var/www/html"

# æ£€æŸ¥è¯ä¹¦æ˜¯å¦éœ€è¦ç»­æœŸï¼ˆ30å¤©å†…è¿‡æœŸï¼‰
if openssl x509 -checkend 2592000 -noout -in /etc/letsencrypt/live/$DOMAIN/cert.pem; then
    echo "è¯ä¹¦è¿˜æœ‰æ•ˆï¼Œæ— éœ€ç»­æœŸ"
    exit 0
fi

# ç»­æœŸè¯ä¹¦
certbot renew --webroot --webroot-path=$WEBROOT --email $EMAIL --agree-tos --no-eff-email

# é‡æ–°åŠ è½½Nginxé…ç½®
if [ $? -eq 0 ]; then
    echo "è¯ä¹¦ç»­æœŸæˆåŠŸï¼Œé‡æ–°åŠ è½½Nginx"
    nginx -t && systemctl reload nginx
else
    echo "è¯ä¹¦ç»­æœŸå¤±è´¥"
    exit 1
fi
```

---

## 8. ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥


### 8.1 è¯ä¹¦éªŒè¯å¤±è´¥


**âŒ é—®é¢˜ï¼šæµè§ˆå™¨æ˜¾ç¤º"ä¸å®‰å…¨è¿æ¥"**

**ğŸ” æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¿‡æœŸ
openssl x509 -in /etc/nginx/ssl/cert.pem -dates -noout

# 2. éªŒè¯è¯ä¹¦å’ŒåŸŸåæ˜¯å¦åŒ¹é…
openssl x509 -in /etc/nginx/ssl/cert.pem -text -noout | grep -A1 "Subject:"

# 3. æ£€æŸ¥è¯ä¹¦é“¾æ˜¯å¦å®Œæ•´
openssl s_client -connect example.com:443 -servername example.com

# 4. éªŒè¯Nginxé…ç½®è¯­æ³•
nginx -t

# 5. æŸ¥çœ‹Nginxé”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log
```

**ğŸ’¡ å¸¸è§è§£å†³æ–¹æ¡ˆ**ï¼š
```
è¯ä¹¦è¿‡æœŸï¼š
â†’ ç»­æœŸè¯ä¹¦ï¼šcertbot renew

åŸŸåä¸åŒ¹é…ï¼š
â†’ æ£€æŸ¥server_nameé…ç½®
â†’ ç¡®è®¤è¯ä¹¦åŒ…å«æ­£ç¡®åŸŸå

è¯ä¹¦é“¾ä¸å®Œæ•´ï¼š
â†’ é‡æ–°ä¸‹è½½å®Œæ•´è¯ä¹¦é“¾
â†’ æ£€æŸ¥ssl_certificateé…ç½®

é…ç½®è¯­æ³•é”™è¯¯ï¼š
â†’ ä¿®å¤nginxé…ç½®æ–‡ä»¶
â†’ é‡æ–°åŠ è½½é…ç½®ï¼šnginx -s reload
```

### 8.2 SSLæ¡æ‰‹å¤±è´¥


**âŒ é—®é¢˜ï¼šè¿æ¥è¶…æ—¶æˆ–æ¡æ‰‹å¤±è´¥**

**ğŸ” è¯Šæ–­å‘½ä»¤**ï¼š
```bash
# æµ‹è¯•SSLè¿æ¥
openssl s_client -connect example.com:443 -servername example.com

# æ£€æŸ¥æ”¯æŒçš„SSLåè®®
nmap --script ssl-enum-ciphers -p 443 example.com

# æµ‹è¯•ç‰¹å®šSSLç‰ˆæœ¬
openssl s_client -tls1_2 -connect example.com:443

# æŸ¥çœ‹è¯¦ç»†çš„æ¡æ‰‹è¿‡ç¨‹
openssl s_client -connect example.com:443 -debug -msg
```

**ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ**ï¼š
```
åè®®ç‰ˆæœ¬é—®é¢˜ï¼š
â†’ å¯ç”¨TLS 1.2å’Œ1.3
â†’ ç¦ç”¨è¿‡æ—¶çš„SSL 3.0å’ŒTLS 1.0/1.1

åŠ å¯†å¥—ä»¶é—®é¢˜ï¼š
â†’ ä½¿ç”¨ç°ä»£åŠ å¯†å¥—ä»¶
â†’ é¿å…è¿‡æ—¶çš„RC4ã€MD5ç­‰ç®—æ³•

é˜²ç«å¢™é—®é¢˜ï¼š
â†’ ç¡®ä¿443ç«¯å£å¼€æ”¾
â†’ æ£€æŸ¥iptablesè§„åˆ™

SNIæ”¯æŒï¼š
â†’ ç¡®ä¿å®¢æˆ·ç«¯æ”¯æŒSNI
â†’ é…ç½®æ­£ç¡®çš„server_name
```

### 8.3 æ€§èƒ½é—®é¢˜


**âš¡ SSLæ€§èƒ½ä¼˜åŒ–æ£€æŸ¥**ï¼š
```bash
# æ£€æŸ¥SSLä¼šè¯å¤ç”¨
curl -I https://example.com --next -I https://example.com

# æµ‹è¯•OCSPè£…è®¢
openssl s_client -connect example.com:443 -status

# æ£€æŸ¥HTTP/2æ”¯æŒ
curl -I https://example.com --http2

# æµ‹è¯•SSLæ¡æ‰‹æ—¶é—´
time openssl s_client -connect example.com:443 < /dev/null
```

**ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
å¯ç”¨ä¼šè¯ç¼“å­˜ï¼š
ssl_session_cache shared:SSL:10m;
ssl_session_timeout 10m;

é…ç½®OCSPè£…è®¢ï¼š
ssl_stapling on;
ssl_stapling_verify on;

å¯ç”¨HTTP/2ï¼š
listen 443 ssl http2;

ä¼˜åŒ–åŠ å¯†å¥—ä»¶ï¼š
ä½¿ç”¨ECDHEç®—æ³•
é¿å…RSAå¯†é’¥äº¤æ¢
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ SSL/TLSæœ¬è´¨ï¼šç½‘ç»œé€šä¿¡çš„åŠ å¯†å’Œèº«ä»½éªŒè¯åè®®
ğŸ”¸ è¯ä¹¦ç±»å‹ï¼šDVï¼ˆåŸŸåéªŒè¯ï¼‰ã€OVï¼ˆç»„ç»‡éªŒè¯ï¼‰ã€EVï¼ˆæ‰©å±•éªŒè¯ï¼‰
ğŸ”¸ è¯ä¹¦è¦†ç›–ï¼šå•åŸŸåã€é€šé…ç¬¦ã€å¤šåŸŸåè¯ä¹¦çš„åŒºåˆ«
ğŸ”¸ å…è´¹è¯ä¹¦ï¼šLet's Encryptæ˜¯é¦–é€‰ï¼Œ90å¤©æœ‰æ•ˆæœŸéœ€è‡ªåŠ¨ç»­æœŸ
ğŸ”¸ è¯ä¹¦æ ¼å¼ï¼šPEMæ˜¯Nginxå¸¸ç”¨æ ¼å¼ï¼Œéœ€è¦è¯ä¹¦é“¾å®Œæ•´
ğŸ”¸ åŸºæœ¬é…ç½®ï¼šHTTPé‡å®šå‘ã€HTTPSç›‘å¬ã€è¯ä¹¦è·¯å¾„é…ç½®
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦HTTPS**ï¼š
```
å®‰å…¨éœ€æ±‚ï¼š
â€¢ æ•°æ®åŠ å¯†ï¼šé˜²æ­¢æ•°æ®è¢«çªƒå¬
â€¢ èº«ä»½éªŒè¯ï¼šç¡®è®¤ç½‘ç«™çœŸå®æ€§
â€¢ æ•°æ®å®Œæ•´æ€§ï¼šé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹

ç°å®è¦æ±‚ï¼š
â€¢ æœç´¢å¼•æ“ä¼˜åŒ–ï¼šGoogleä¼˜å…ˆæ’åHTTPSç½‘ç«™
â€¢ æµè§ˆå™¨è¦æ±‚ï¼šç°ä»£æµè§ˆå™¨æ ‡è®°HTTPä¸ºä¸å®‰å…¨
â€¢ ç”¨æˆ·ä¿¡ä»»ï¼šç”¨æˆ·æ›´ä¿¡ä»»æœ‰é”å›¾æ ‡çš„ç½‘ç«™
```

**ğŸ”¹ è¯ä¹¦é€‰æ‹©ç­–ç•¥**ï¼š
```
ä¸ªäººç”¨æˆ·ï¼š
â€¢ åšå®¢/ä¸ªäººç½‘ç«™ â†’ Let's Encryptå…è´¹DVè¯ä¹¦
â€¢ å¤šä¸ªå­åŸŸå â†’ Let's Encrypté€šé…ç¬¦è¯ä¹¦

ä¼ä¸šç”¨æˆ·ï¼š
â€¢ ä¼ä¸šå®˜ç½‘ â†’ OVè¯ä¹¦å±•ç¤ºä¼ä¸šä¿¡æ¯
â€¢ ç”µå•†/é‡‘è â†’ EVè¯ä¹¦æä¾›æœ€é«˜ä¿¡ä»»åº¦
â€¢ APIæœåŠ¡ â†’ DVè¯ä¹¦å³å¯æ»¡è¶³éœ€æ±‚
```

**ğŸ”¹ é…ç½®ä¼˜åŒ–åŸåˆ™**ï¼š
```
å®‰å…¨æ€§ï¼š
â€¢ ç¦ç”¨è¿‡æ—¶çš„SSL/TLSç‰ˆæœ¬
â€¢ ä½¿ç”¨å¼ºåŠ å¯†ç®—æ³•
â€¢ é…ç½®å®‰å…¨å“åº”å¤´

æ€§èƒ½ï¼š
â€¢ å¯ç”¨ä¼šè¯ç¼“å­˜å’Œå¤ç”¨
â€¢ é…ç½®OCSPè£…è®¢
â€¢ ä½¿ç”¨HTTP/2åè®®

ç»´æŠ¤æ€§ï¼š
â€¢ è‡ªåŠ¨åŒ–è¯ä¹¦ç»­æœŸ
â€¢ ç›‘æ§è¯ä¹¦æœ‰æ•ˆæœŸ
â€¢ å®šæœŸæ›´æ–°é…ç½®
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ æ–°æ‰‹ä¸Šæ‰‹æ­¥éª¤**ï¼š
```
ç¬¬ä¸€æ­¥ï¼šç†è§£HTTPSåŸºæœ¬æ¦‚å¿µ
â€¢ äº†è§£HTTP vs HTTPSåŒºåˆ«
â€¢ ç†è§£è¯ä¹¦çš„ä½œç”¨å’ŒéªŒè¯è¿‡ç¨‹

ç¬¬äºŒæ­¥ï¼šç”³è¯·å…è´¹è¯ä¹¦
â€¢ å®‰è£…Certbotå·¥å…·
â€¢ ç”³è¯·Let's Encryptè¯ä¹¦
â€¢ é…ç½®è‡ªåŠ¨ç»­æœŸ

ç¬¬ä¸‰æ­¥ï¼šåŸºç¡€Nginxé…ç½®
â€¢ HTTPé‡å®šå‘HTTPS
â€¢ é…ç½®SSLè¯ä¹¦è·¯å¾„
â€¢ æµ‹è¯•é…ç½®æ­£ç¡®æ€§

ç¬¬å››æ­¥ï¼šå®‰å…¨ä¼˜åŒ–
â€¢ é…ç½®ç°ä»£SSLå‚æ•°
â€¢ æ·»åŠ å®‰å…¨å“åº”å¤´
â€¢ ç¦ç”¨ä¸å®‰å…¨çš„åè®®ç‰ˆæœ¬

ç¬¬äº”æ­¥ï¼šæ€§èƒ½ä¼˜åŒ–
â€¢ å¯ç”¨ä¼šè¯ç¼“å­˜
â€¢ é…ç½®OCSPè£…è®¢
â€¢ ç›‘æ§å’Œç»´æŠ¤
```

**ğŸ› ï¸ è¿ç»´æœ€ä½³å®è·µ**ï¼š
```
è‡ªåŠ¨åŒ–ç®¡ç†ï¼š
â€¢ ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ç”³è¯·å’Œç»­æœŸè¯ä¹¦
â€¢ ç›‘æ§è¯ä¹¦æœ‰æ•ˆæœŸï¼Œæå‰é¢„è­¦
â€¢ è‡ªåŠ¨åŒ–é…ç½®éƒ¨ç½²å’Œæµ‹è¯•

å®‰å…¨ç›‘æ§ï¼š
â€¢ å®šæœŸæ‰«æSSLé…ç½®å®‰å…¨æ€§
â€¢ ç›‘æ§è¯ä¹¦é€æ˜åº¦æ—¥å¿—
â€¢ å…³æ³¨SSL/TLSå®‰å…¨æ¼æ´

æ€§èƒ½ç›‘æ§ï¼š
â€¢ ç›‘æ§SSLæ¡æ‰‹æ—¶é—´
â€¢ æµ‹è¯•ä¸åŒåœ°åŒºçš„è®¿é—®é€Ÿåº¦
â€¢ ä¼˜åŒ–CDNå’Œç¼“å­˜é…ç½®
```

### 9.4 å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥


**ğŸ”§ è¯ä¹¦ç®¡ç†å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯
openssl x509 -in cert.pem -text -noout

# éªŒè¯è¯ä¹¦æœ‰æ•ˆæœŸ
openssl x509 -in cert.pem -dates -noout

# æµ‹è¯•SSLè¿æ¥
openssl s_client -connect domain.com:443

# Let's Encryptç»­æœŸ
certbot renew --dry-run

# Nginxé…ç½®æµ‹è¯•
nginx -t && nginx -s reload
```

**ğŸ¯ æ•…éšœæ’æŸ¥æ¸…å•**ï¼š
```
è¿æ¥å¤±è´¥ï¼š
â–¡ æ£€æŸ¥é˜²ç«å¢™443ç«¯å£
â–¡ éªŒè¯DNSè§£ææ­£ç¡®
â–¡ ç¡®è®¤Nginxè¿›ç¨‹è¿è¡Œ

è¯ä¹¦é”™è¯¯ï¼š
â–¡ æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
â–¡ éªŒè¯åŸŸååŒ¹é…
â–¡ ç¡®è®¤è¯ä¹¦é“¾å®Œæ•´

æ€§èƒ½é—®é¢˜ï¼š
â–¡ æ£€æŸ¥SSLé…ç½®å‚æ•°
â–¡ éªŒè¯ä¼šè¯ç¼“å­˜å¯ç”¨
â–¡ æµ‹è¯•HTTP/2æ”¯æŒ
```

### 9.5 å­¦ä¹ å»ºè®®


**ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„**ï¼š
```
åŸºç¡€é˜¶æ®µï¼š
â€¢ æŒæ¡SSL/TLSåŸºæœ¬æ¦‚å¿µ
â€¢ ç†Ÿç»ƒä½¿ç”¨Let's Encrypt
â€¢ èƒ½å¤Ÿé…ç½®åŸºæœ¬çš„HTTPS

è¿›é˜¶é˜¶æ®µï¼š
â€¢ ç†è§£è¯ä¹¦é“¾å’ŒPKIä½“ç³»
â€¢ æŒæ¡SSLæ€§èƒ½ä¼˜åŒ–
â€¢ å­¦ä¼šæ•…éšœæ’æŸ¥å’Œç›‘æ§

ä¸“ä¸šé˜¶æ®µï¼š
â€¢ äº†è§£SSL/TLSåè®®ç»†èŠ‚
â€¢ æŒæ¡ä¼ä¸šçº§è¯ä¹¦ç®¡ç†
â€¢ èƒ½å¤Ÿè®¾è®¡å®‰å…¨æ¶æ„
```

**ğŸ§  è®°å¿†è¦ç‚¹**ï¼š
- HTTPS = HTTP + SSL/TLSï¼Œä¸ºç½‘ç»œé€šä¿¡æ·»åŠ å®‰å…¨å±‚
- Let's Encryptæä¾›å…è´¹è¯ä¹¦ï¼Œ90å¤©æœ‰æ•ˆæœŸéœ€è‡ªåŠ¨ç»­æœŸ
- è¯ä¹¦é“¾å®Œæ•´æ€§å¾ˆé‡è¦ï¼Œç¼ºå°‘ä¸­é—´è¯ä¹¦ä¼šå¯¼è‡´ä¿¡ä»»é—®é¢˜
- Nginx SSLé…ç½®é‡ç‚¹ï¼šè¯ä¹¦è·¯å¾„ã€åè®®ç‰ˆæœ¬ã€åŠ å¯†å¥—ä»¶
- å®‰å…¨å’Œæ€§èƒ½éœ€è¦å¹³è¡¡ï¼Œç°ä»£é…ç½®æ—¢å®‰å…¨åˆé«˜æ•ˆ

**æ ¸å¿ƒç†å¿µ**ï¼šHTTPSä¸æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯ç°ä»£WebæœåŠ¡çš„æ ‡å‡†é…ç½®ã€‚æ­£ç¡®çš„SSLé…ç½®ä¸ä»…ä¿æŠ¤ç”¨æˆ·æ•°æ®å®‰å…¨ï¼Œä¹Ÿæå‡ç½‘ç«™çš„ä¸“ä¸šå½¢è±¡å’Œæœç´¢æ’åã€‚