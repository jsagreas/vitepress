---
title: 1ã€Ajaxè¯·æ±‚å®Œæ•´æµç¨‹
---
## ğŸ“š ç›®å½•

1. [Ajaxæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ](#1-ajaxæ˜¯ä»€ä¹ˆä¸ºä»€ä¹ˆè¦ç”¨)
2. [Ajaxè¯·æ±‚äº”æ­¥éª¤æ ‡å‡†æµç¨‹](#2-ajaxè¯·æ±‚äº”æ­¥éª¤æ ‡å‡†æµç¨‹)
3. [ç¬¬1æ­¥ï¼šåˆ›å»ºXMLHttpRequestå¯¹è±¡](#3-ç¬¬1æ­¥åˆ›å»ºxmlhttprequestå¯¹è±¡)
4. [ç¬¬2æ­¥ï¼šé…ç½®è¯·æ±‚(openæ–¹æ³•è¯¦è§£)](#4-ç¬¬2æ­¥é…ç½®è¯·æ±‚openæ–¹æ³•è¯¦è§£)
5. [ç¬¬3æ­¥ï¼šè®¾ç½®å›è°ƒå‡½æ•°(onreadystatechange)](#5-ç¬¬3æ­¥è®¾ç½®å›è°ƒå‡½æ•°onreadystatechange)
6. [ç¬¬4æ­¥ï¼šå‘é€è¯·æ±‚(sendæ–¹æ³•è¯¦è§£)](#6-ç¬¬4æ­¥å‘é€è¯·æ±‚sendæ–¹æ³•è¯¦è§£)
7. [ç¬¬5æ­¥ï¼šå¤„ç†å“åº”æ•°æ®](#7-ç¬¬5æ­¥å¤„ç†å“åº”æ•°æ®)
8. [readyStateçŠ¶æ€è¯¦è§£(0-4çŠ¶æ€å˜åŒ–)](#8-readystateçŠ¶æ€è¯¦è§£0-4çŠ¶æ€å˜åŒ–)
9. [ä¸‰ç§é‡è¦äº‹ä»¶å¯¹æ¯”](#9-ä¸‰ç§é‡è¦äº‹ä»¶å¯¹æ¯”)
10. [å®ç”¨ä»£ç æ¨¡æ¿](#10-å®ç”¨ä»£ç æ¨¡æ¿)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŸ Ajaxæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ


### 1.1 Ajaxçš„é€šä¿—è§£é‡Š


**ç®€å•ç†è§£**ï¼šAjaxå°±æ˜¯è®©ç½‘é¡µèƒ½å¤Ÿ**å·å·åœ°**è·ŸæœåŠ¡å™¨è¯´è¯ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼šç‚¹å‡»æŒ‰é’® â†’ æ•´ä¸ªé¡µé¢ç™½å±åˆ·æ–° â†’ æ˜¾ç¤ºæ–°å†…å®¹
Ajaxæ–¹å¼ï¼šç‚¹å‡»æŒ‰é’® â†’ é¡µé¢ä¸åŠ¨ â†’ å±€éƒ¨å†…å®¹æ‚„æ‚„æ›´æ–°
```

**ç”Ÿæ´»ç±»æ¯”**ï¼š
- **ä¼ ç»Ÿæ–¹å¼**ï¼šæƒ³è¦æ–°æ¶ˆæ¯ï¼Œå¿…é¡»é‡æ–°æ‰“å¼€æ•´ä¸ªèŠå¤©è½¯ä»¶
- **Ajaxæ–¹å¼**ï¼šèŠå¤©è½¯ä»¶ä¸€ç›´å¼€ç€ï¼Œæ–°æ¶ˆæ¯è‡ªåŠ¨å‡ºç°

### 1.2 Ajaxè§£å†³äº†ä»€ä¹ˆé—®é¢˜


ğŸ¯ **æ ¸å¿ƒä»·å€¼**ï¼š
- âœ… **ç”¨æˆ·ä½“éªŒå¥½**ï¼šé¡µé¢ä¸ä¼šç™½å±ï¼Œæ“ä½œæµç•…
- âœ… **èŠ‚çœæµé‡**ï¼šåªä¼ è¾“éœ€è¦çš„æ•°æ®ï¼Œä¸é‡å¤åŠ è½½æ•´ä¸ªé¡µé¢
- âœ… **å“åº”é€Ÿåº¦å¿«**ï¼šä¸ç”¨é‡æ–°åŠ è½½CSSã€JSç­‰é™æ€èµ„æº

---

## 2. ğŸ”„ Ajaxè¯·æ±‚äº”æ­¥éª¤æ ‡å‡†æµç¨‹


### 2.1 æ ‡å‡†æµç¨‹å›¾è§£


```
ç¬¬1æ­¥: åˆ›å»ºå¯¹è±¡          ç¬¬2æ­¥: é…ç½®è¯·æ±‚         ç¬¬3æ­¥: è®¾ç½®å›è°ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ new         â”‚       â”‚ xhr.open()  â”‚       â”‚ xhr.onready â”‚
â”‚ XMLHttp     â”‚  â”€â”€>  â”‚ è®¾ç½®è¯·æ±‚æ–¹å¼ â”‚  â”€â”€>  â”‚ statechange â”‚
â”‚ Request()   â”‚       â”‚ å’ŒURLåœ°å€   â”‚       â”‚ ç›‘å¬çŠ¶æ€å˜åŒ– â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
ç¬¬5æ­¥: å¤„ç†å“åº”         ç¬¬4æ­¥: å‘é€è¯·æ±‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ è·å–response â”‚ <â”€â”€   â”‚ xhr.send()  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ æ›´æ–°é¡µé¢å†…å®¹ â”‚       â”‚ çœŸæ­£å‘èµ·    â”‚
â”‚             â”‚       â”‚ ç½‘ç»œè¯·æ±‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 äº”æ­¥éª¤è®°å¿†å£è¯€


```
ğŸ”¸ ç¬¬1æ­¥ï¼šåˆ›å»ºå¯¹è±¡ - "å‡†å¤‡ä¸€ä¸ªä¿¡ä½¿"
ğŸ”¸ ç¬¬2æ­¥ï¼šé…ç½®è¯·æ±‚ - "å‘Šè¯‰ä¿¡ä½¿å»å“ªé‡Œï¼Œæ€ä¹ˆå»"  
ğŸ”¸ ç¬¬3æ­¥ï¼šè®¾ç½®å›è°ƒ - "å‘Šè¯‰ä¿¡ä½¿å›æ¥åæ‰¾æˆ‘æ±‡æŠ¥"
ğŸ”¸ ç¬¬4æ­¥ï¼šå‘é€è¯·æ±‚ - "è®©ä¿¡ä½¿å‡ºå‘"
ğŸ”¸ ç¬¬5æ­¥ï¼šå¤„ç†å“åº” - "ä¿¡ä½¿å›æ¥äº†ï¼Œå¤„ç†å¸¦å›çš„æ¶ˆæ¯"
```

---

## 3. ğŸ› ï¸ ç¬¬1æ­¥ï¼šåˆ›å»ºXMLHttpRequestå¯¹è±¡


### 3.1 ä»€ä¹ˆæ˜¯XMLHttpRequestå¯¹è±¡


**é€šä¿—è§£é‡Š**ï¼šXMLHttpRequestå°±åƒä¸€ä¸ª**ä¸“é—¨è·‘è…¿çš„ä¿¡ä½¿**ï¼Œè´Ÿè´£åœ¨ä½ çš„ç½‘é¡µå’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚

### 3.2 å¦‚ä½•åˆ›å»º


```javascript
// åˆ›å»ºAjaxä¿¡ä½¿
let xhr = new XMLHttpRequest();
console.log(xhr); // æŸ¥çœ‹è¿™ä¸ªä¿¡ä½¿å¯¹è±¡
```

**âš ï¸ å…¼å®¹æ€§è¯´æ˜**ï¼šç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒï¼ŒIE7+ä¹Ÿæ²¡é—®é¢˜ï¼Œä¸ç”¨æ‹…å¿ƒå…¼å®¹æ€§ã€‚

### 3.3 åˆ›å»ºåçš„çŠ¶æ€


```javascript
let xhr = new XMLHttpRequest();
console.log('åˆå§‹çŠ¶æ€:', xhr.readyState); // è¾“å‡º: 0 (åˆšåˆ›å»ºï¼Œè¿˜æ²¡é…ç½®)
```

---

## 4. âš™ï¸ ç¬¬2æ­¥ï¼šé…ç½®è¯·æ±‚(openæ–¹æ³•è¯¦è§£)


### 4.1 openæ–¹æ³•çš„ä½œç”¨


**é€šä¿—ç†è§£**ï¼š`open()`æ–¹æ³•å°±æ˜¯ç»™ä¿¡ä½¿å®‰æ’ä»»åŠ¡ï¼Œå‘Šè¯‰ä»–ï¼š
- ç”¨ä»€ä¹ˆæ–¹å¼å»ï¼ˆGETè¿˜æ˜¯POSTï¼‰
- å»å“ªé‡Œï¼ˆURLåœ°å€ï¼‰
- è¦ä¸è¦ç­‰ç»“æœï¼ˆåŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼‰

### 4.2 openæ–¹æ³•è¯­æ³•


```javascript
xhr.open(method, url, async);
```

**å‚æ•°è¯´æ˜**ï¼š
- `method`ï¼š**è¯·æ±‚æ–¹å¼** - "GET"ï¼ˆè·å–æ•°æ®ï¼‰æˆ–"POST"ï¼ˆæäº¤æ•°æ®ï¼‰
- `url`ï¼š**ç›®æ ‡åœ°å€** - è¦è¯·æ±‚çš„æœåŠ¡å™¨åœ°å€
- `async`ï¼š**æ˜¯å¦å¼‚æ­¥** - trueï¼ˆæ¨èï¼‰æˆ–falseï¼ˆä¸æ¨èï¼‰

### 4.3 å®é™…ä½¿ç”¨ç¤ºä¾‹


```javascript
// é…ç½®GETè¯·æ±‚ - è·å–ç”¨æˆ·ä¿¡æ¯
xhr.open('GET', '/api/user/123', true);

// é…ç½®POSTè¯·æ±‚ - æäº¤è¡¨å•
xhr.open('POST', '/api/user/register', true);
```

### 4.4 GET vs POSTçš„é€šä¿—åŒºåˆ«


| ç‰¹ç‚¹ | GETè¯·æ±‚ | POSTè¯·æ±‚ |
|------|--------|---------|
| **ç”¨é€”** | ğŸ” è·å–æ•°æ®ï¼ˆæŸ¥çœ‹ï¼‰ | ğŸ“ æäº¤æ•°æ®ï¼ˆæ“ä½œï¼‰ |
| **æ•°æ®ä½ç½®** | URLé‡Œï¼ˆçœ‹å¾—è§ï¼‰ | è¯·æ±‚ä½“é‡Œï¼ˆçœ‹ä¸è§ï¼‰ |
| **å®‰å…¨æ€§** | ä½ï¼ˆå¯†ç ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ï¼‰ | é«˜ï¼ˆæ•°æ®éšè—ï¼‰ |
| **ç”Ÿæ´»ç±»æ¯”** | é—®è·¯ï¼ˆ"è¯·é—®xxxæ€ä¹ˆèµ°ï¼Ÿ"ï¼‰ | å¯„åŒ…è£¹ï¼ˆå†…å®¹è£…åœ¨ç›’å­é‡Œï¼‰ |

---

## 5. ğŸ‘‚ ç¬¬3æ­¥ï¼šè®¾ç½®å›è°ƒå‡½æ•°(onreadystatechange)


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦å›è°ƒå‡½æ•°


**é€šä¿—ç†è§£**ï¼šAjaxæ˜¯å¼‚æ­¥çš„ï¼Œå°±åƒæ´¾ä¿¡ä½¿å‡ºå»åŠäº‹ï¼Œä½ ä¸çŸ¥é“ä»–ä»€ä¹ˆæ—¶å€™å›æ¥ã€‚å›è°ƒå‡½æ•°å°±æ˜¯å‘Šè¯‰ä¿¡ä½¿ï¼š"å›æ¥åä¸€å®šè¦é€šçŸ¥æˆ‘ï¼"

### 5.2 onreadystatechangeäº‹ä»¶


```javascript
xhr.onreadystatechange = function() {
    // ä¿¡ä½¿çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™é‡Œçš„ä»£ç ä¼šæ‰§è¡Œ
    console.log('ä¿¡ä½¿çŠ¶æ€å˜åŒ–äº†:', xhr.readyState);
};
```

### 5.3 å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœº


```
ä¿¡ä½¿å‡ºå‘å‰: readyState = 1 â†’ å›è°ƒå‡½æ•°æ‰§è¡Œ
ä¿¡ä½¿åˆ°è¾¾ç›®çš„åœ°: readyState = 2 â†’ å›è°ƒå‡½æ•°æ‰§è¡Œ  
ä¿¡ä½¿å¼€å§‹æ¥æ”¶æ¶ˆæ¯: readyState = 3 â†’ å›è°ƒå‡½æ•°æ‰§è¡Œ
ä¿¡ä½¿å®Œæ•´å¸¦å›æ¶ˆæ¯: readyState = 4 â†’ å›è°ƒå‡½æ•°æ‰§è¡Œ
```

**ğŸ¯ é‡ç‚¹**ï¼šå›è°ƒå‡½æ•°ä¼šæ‰§è¡Œ**4æ¬¡**ï¼Œæˆ‘ä»¬é€šå¸¸åªå…³å¿ƒæœ€åä¸€æ¬¡ï¼ˆreadyState = 4ï¼‰ã€‚

---

## 6. ğŸš€ ç¬¬4æ­¥ï¼šå‘é€è¯·æ±‚(sendæ–¹æ³•è¯¦è§£)


### 6.1 sendæ–¹æ³•çš„ä½œç”¨


**é€šä¿—ç†è§£**ï¼šå‰é¢çš„æ­¥éª¤éƒ½æ˜¯å‡†å¤‡å·¥ä½œï¼Œ`send()`æ–¹æ³•æ‰æ˜¯çœŸæ­£è®©ä¿¡ä½¿å‡ºå‘ã€‚

### 6.2 sendæ–¹æ³•è¯­æ³•


```javascript
xhr.send(data);
```

**å‚æ•°è¯´æ˜**ï¼š
- `data`ï¼šè¦å‘é€çš„æ•°æ®ï¼ˆGETè¯·æ±‚é€šå¸¸ä¸ºnullï¼ŒPOSTè¯·æ±‚ä¸ºå®é™…æ•°æ®ï¼‰

### 6.3 ä¸åŒè¯·æ±‚æ–¹å¼çš„sendç”¨æ³•


```javascript
// GETè¯·æ±‚ - ä¸éœ€è¦å‘é€æ•°æ®
xhr.send(null);

// POSTè¯·æ±‚ - å‘é€è¡¨å•æ•°æ®
xhr.send('name=å¼ ä¸‰&age=25');

// POSTè¯·æ±‚ - å‘é€JSONæ•°æ®
xhr.send(JSON.stringify({name: 'å¼ ä¸‰', age: 25}));
```

### 6.4 å‘é€åä¼šå‘ç”Ÿä»€ä¹ˆ


```
è°ƒç”¨send() â†’ æµè§ˆå™¨ç«‹å³å‘èµ·ç½‘ç»œè¯·æ±‚ â†’ readyStateå¼€å§‹å˜åŒ– â†’ å›è°ƒå‡½æ•°å¼€å§‹æ‰§è¡Œ
```

---

## 7. ğŸ“¨ ç¬¬5æ­¥ï¼šå¤„ç†å“åº”æ•°æ®


### 7.1 å¦‚ä½•åˆ¤æ–­è¯·æ±‚æˆåŠŸ


**æ ‡å‡†åˆ¤æ–­æ¡ä»¶**ï¼š
```javascript
if (xhr.readyState === 4 && xhr.status === 200) {
    // è¯·æ±‚æˆåŠŸï¼Œå¤„ç†æ•°æ®
}
```

**æ¡ä»¶è§£é‡Š**ï¼š
- `readyState === 4`ï¼šä¿¡ä½¿å®Œæ•´åœ°å¸¦å›äº†æ¶ˆæ¯
- `status === 200`ï¼šæœåŠ¡å™¨è¯´"æˆåŠŸäº†"ï¼ˆHTTPçŠ¶æ€ç 200è¡¨ç¤ºæˆåŠŸï¼‰

### 7.2 è·å–å“åº”æ•°æ®


```javascript
xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
        // è·å–æœåŠ¡å™¨è¿”å›çš„æ–‡æœ¬æ•°æ®
        let responseText = xhr.responseText;
        console.log('æœåŠ¡å™¨è¿”å›:', responseText);
        
        // å¦‚æœæ˜¯JSONæ ¼å¼ï¼Œéœ€è¦è§£æ
        let data = JSON.parse(responseText);
        console.log('è§£æåçš„æ•°æ®:', data);
    }
};
```

### 7.3 å¸¸è§çš„å“åº”æ•°æ®æ ¼å¼


| æ ¼å¼ | è·å–æ–¹å¼ | ä½¿ç”¨åœºæ™¯ |
|------|---------|---------|
| **æ–‡æœ¬** | `xhr.responseText` | è·å–HTMLç‰‡æ®µã€æ™®é€šæ–‡æœ¬ |
| **JSON** | `JSON.parse(xhr.responseText)` | è·å–ç»“æ„åŒ–æ•°æ®ï¼ˆæœ€å¸¸ç”¨ï¼‰ |
| **XML** | `xhr.responseXML` | å¤„ç†XMLæ•°æ®ï¼ˆè¾ƒå°‘ç”¨ï¼‰ |

---

## 8. ğŸ“Š readyStateçŠ¶æ€è¯¦è§£(0-4çŠ¶æ€å˜åŒ–)


### 8.1 äº”ç§çŠ¶æ€çš„ç”Ÿæ´»ç±»æ¯”


```
çŠ¶æ€0 (UNSENT): ä¿¡ä½¿åˆšè¢«é›‡ä½£ï¼Œè¿˜æ²¡æœ‰å®‰æ’ä»»åŠ¡
çŠ¶æ€1 (OPENED): ä¿¡ä½¿æ¥åˆ°ä»»åŠ¡ï¼ŒçŸ¥é“è¦å»å“ªé‡Œäº†
çŠ¶æ€2 (HEADERS_RECEIVED): ä¿¡ä½¿åˆ°è¾¾ç›®çš„åœ°ï¼Œå¼€å§‹è”ç³»å¯¹æ–¹
çŠ¶æ€3 (LOADING): ä¿¡ä½¿æ­£åœ¨æ¥æ”¶æ¶ˆæ¯ï¼Œè¿˜æ²¡å®Œå…¨æ”¶åˆ°
çŠ¶æ€4 (DONE): ä¿¡ä½¿å®Œæ•´åœ°å¸¦å›äº†æ‰€æœ‰æ¶ˆæ¯
```

### 8.2 è¯¦ç»†çŠ¶æ€è¡¨


| çŠ¶æ€å€¼ | çŠ¶æ€åç§° | é€šä¿—å«ä¹‰ | å‘ç”Ÿæ—¶æœº |
|-------|---------|---------|---------|
| **0** | UNSENT | ğŸ”¸ ä¿¡ä½¿å¾…å‘½ | åˆšåˆ›å»ºxhrå¯¹è±¡ |
| **1** | OPENED | ğŸ”¸ ä¿¡ä½¿å‡ºå‘ | è°ƒç”¨open()æ–¹æ³•å |
| **2** | HEADERS_RECEIVED | ğŸ”¸ å»ºç«‹è”ç³» | æœåŠ¡å™¨è¿”å›å“åº”å¤´ |
| **3** | LOADING | ğŸ”¸ æ¥æ”¶ä¸­... | æ­£åœ¨æ¥æ”¶å“åº”æ•°æ® |
| **4** | DONE | ğŸ”¸ ä»»åŠ¡å®Œæˆ | å®Œæ•´æ¥æ”¶å“åº”æ•°æ® |

### 8.3 çŠ¶æ€å˜åŒ–ç›‘æ§ç¤ºä¾‹


```javascript
xhr.onreadystatechange = function() {
    switch(xhr.readyState) {
        case 1:
            console.log('ğŸ“¤ è¯·æ±‚å·²å‘é€');
            break;
        case 2:
            console.log('ğŸ“¡ æœåŠ¡å™¨å·²å“åº”');
            break;
        case 3:
            console.log('â³ æ­£åœ¨æ¥æ”¶æ•°æ®...');
            break;
        case 4:
            console.log('âœ… æ•°æ®æ¥æ”¶å®Œæˆ');
            if (xhr.status === 200) {
                console.log('ğŸ‰ è¯·æ±‚æˆåŠŸ!');
            }
            break;
    }
};
```

---

## 9. ğŸ­ ä¸‰ç§é‡è¦äº‹ä»¶å¯¹æ¯”


### 9.1 ä¸‰ç§äº‹ä»¶çš„åŒºåˆ«


| äº‹ä»¶ | è§¦å‘æ—¶æœº | è§¦å‘æ¬¡æ•° | ä½¿ç”¨åœºæ™¯ |
|------|---------|---------|----------|
| **onreadystatechange** | çŠ¶æ€å˜åŒ–æ—¶ | å¤šæ¬¡(1-4æ¬¡) | ğŸ”¸ éœ€è¦ç›‘æ§æ•´ä¸ªè¿‡ç¨‹ |
| **onload** | è¯·æ±‚æˆåŠŸå®Œæˆæ—¶ | 1æ¬¡ | ğŸ”¸ åªå…³å¿ƒæˆåŠŸç»“æœ |
| **onprogress** | æ•°æ®ä¼ è¾“ä¸­ | å¤šæ¬¡ | ğŸ”¸ æ˜¾ç¤ºè¿›åº¦æ¡ |

### 9.2 onloadäº‹ä»¶ - æ›´ç®€æ´çš„å†™æ³•


```javascript
// ä¼ ç»Ÿå†™æ³•ï¼ˆå¤æ‚ï¼‰
xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
        console.log(xhr.responseText);
    }
};

// onloadå†™æ³•ï¼ˆç®€æ´ï¼‰
xhr.onload = function() {
    if (xhr.status === 200) {
        console.log(xhr.responseText);
    }
};
```

**ğŸ¯ æ¨è**ï¼šå¦‚æœåªå…³å¿ƒæœ€ç»ˆç»“æœï¼Œç”¨`onload`æ›´ç®€æ´ï¼

### 9.3 onprogressäº‹ä»¶ - æ˜¾ç¤ºè¿›åº¦


```javascript
// ç›‘å¬ä¸Šä¼ è¿›åº¦
xhr.upload.onprogress = function(event) {
    if (event.lengthComputable) {
        let percent = (event.loaded / event.total) * 100;
        console.log('ä¸Šä¼ è¿›åº¦:', percent.toFixed(1) + '%');
    }
};

// ç›‘å¬ä¸‹è½½è¿›åº¦  
xhr.onprogress = function(event) {
    if (event.lengthComputable) {
        let percent = (event.loaded / event.total) * 100;
        console.log('ä¸‹è½½è¿›åº¦:', percent.toFixed(1) + '%');
    }
};
```

---

## 10. ğŸ› ï¸ å®ç”¨ä»£ç æ¨¡æ¿


### 10.1 æ ‡å‡†GETè¯·æ±‚æ¨¡æ¿


```javascript
function ajaxGet(url, callback) {
    // ç¬¬1æ­¥: åˆ›å»ºå¯¹è±¡
    let xhr = new XMLHttpRequest();
    
    // ç¬¬2æ­¥: é…ç½®è¯·æ±‚
    xhr.open('GET', url, true);
    
    // ç¬¬3æ­¥: è®¾ç½®å›è°ƒ
    xhr.onload = function() {
        if (xhr.status === 200) {
            callback(xhr.responseText);
        } else {
            console.error('è¯·æ±‚å¤±è´¥:', xhr.status);
        }
    };
    
    // ç¬¬4æ­¥: å‘é€è¯·æ±‚
    xhr.send(null);
}

// ä½¿ç”¨ç¤ºä¾‹
ajaxGet('/api/users', function(data) {
    console.log('è·å–åˆ°ç”¨æˆ·æ•°æ®:', data);
});
```

### 10.2 æ ‡å‡†POSTè¯·æ±‚æ¨¡æ¿


```javascript
function ajaxPost(url, data, callback) {
    let xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    
    // è®¾ç½®è¯·æ±‚å¤´ï¼ˆé‡è¦ï¼ï¼‰
    xhr.setRequestHeader('Content-Type', 'application/json');
    
    xhr.onload = function() {
        if (xhr.status === 200) {
            callback(xhr.responseText);
        } else {
            console.error('è¯·æ±‚å¤±è´¥:', xhr.status);
        }
    };
    
    // å‘é€JSONæ•°æ®
    xhr.send(JSON.stringify(data));
}

// ä½¿ç”¨ç¤ºä¾‹
ajaxPost('/api/user', {name: 'å¼ ä¸‰', age: 25}, function(result) {
    console.log('æäº¤ç»“æœ:', result);
});
```

### 10.3 å¸¦è¿›åº¦ç›‘æ§çš„ä¸Šä¼ æ¨¡æ¿


```javascript
function ajaxUpload(url, formData, progressCallback, successCallback) {
    let xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    
    // ç›‘å¬ä¸Šä¼ è¿›åº¦
    xhr.upload.onprogress = function(event) {
        if (event.lengthComputable) {
            let percent = (event.loaded / event.total) * 100;
            progressCallback(percent);
        }
    };
    
    xhr.onload = function() {
        if (xhr.status === 200) {
            successCallback(xhr.responseText);
        }
    };
    
    xhr.send(formData);
}

// ä½¿ç”¨ç¤ºä¾‹
let formData = new FormData();
formData.append('file', fileInput.files[0]);

ajaxUpload('/api/upload', formData, 
    function(percent) {
        console.log('ä¸Šä¼ è¿›åº¦:', percent + '%');
    },
    function(result) {
        console.log('ä¸Šä¼ æˆåŠŸ:', result);
    }
);
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„é‡ç‚¹


```
ğŸ”¸ Ajaxäº”æ­¥éª¤ï¼šåˆ›å»ºå¯¹è±¡ â†’ é…ç½®è¯·æ±‚ â†’ è®¾ç½®å›è°ƒ â†’ å‘é€è¯·æ±‚ â†’ å¤„ç†å“åº”
ğŸ”¸ çŠ¶æ€åˆ¤æ–­ï¼šreadyState === 4 && status === 200 è¡¨ç¤ºæˆåŠŸ
ğŸ”¸ GET vs POSTï¼šGETè·å–æ•°æ®ï¼ŒPOSTæäº¤æ•°æ®
ğŸ”¸ å›è°ƒå‡½æ•°ï¼šonloadæ¯”onreadystatechangeæ›´ç®€æ´
ğŸ”¸ è¿›åº¦ç›‘æ§ï¼šxhr.upload.onprogressç›‘å¬ä¸Šä¼ ï¼Œxhr.onprogressç›‘å¬ä¸‹è½½
```

### 11.2 å¸¸è§ä½¿ç”¨åœºæ™¯


- âœ… **è·å–æ•°æ®**ï¼šç”¨æˆ·åˆ—è¡¨ã€å•†å“ä¿¡æ¯ã€æœç´¢ç»“æœ
- âœ… **æäº¤è¡¨å•**ï¼šç”¨æˆ·æ³¨å†Œã€æ•°æ®æ›´æ–°ã€æ–‡ä»¶ä¸Šä¼   
- âœ… **å®æ—¶æ›´æ–°**ï¼šèŠå¤©æ¶ˆæ¯ã€é€šçŸ¥æé†’ã€çŠ¶æ€åŒæ­¥
- âœ… **æ— åˆ·æ–°æ“ä½œ**ï¼šç‚¹èµã€æ”¶è—ã€åˆ é™¤ã€æ’åº

### 11.3 å­¦ä¹ è¦ç‚¹


**ğŸ¯ ç†è§£æœ¬è´¨**ï¼šAjaxå°±æ˜¯è®©ç½‘é¡µèƒ½è·ŸæœåŠ¡å™¨å·å·å¯¹è¯ï¼Œä¸æ‰“æ‰°ç”¨æˆ·ä½“éªŒ

**ğŸ”§ æŒæ¡æµç¨‹**ï¼šäº”ä¸ªæ­¥éª¤ç¼ºä¸€ä¸å¯ï¼Œé¡ºåºä¸èƒ½ä¹±

**ğŸ’¡ æ´»å­¦æ´»ç”¨**ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©GET/POSTï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©ä¸åŒçš„äº‹ä»¶ç›‘å¬

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
Ajaxè¯·æ±‚åˆ†äº”æ­¥ï¼Œåˆ›å»ºé…ç½®è®¾å›è°ƒ
å‘é€è¯·æ±‚å¤„å“åº”ï¼ŒçŠ¶æ€å››ä¸”ç äºŒç™¾
GETè·å–POSTæäº¤ï¼Œonloadç®€æ´å¥½ç”¨å¤š
è¿›åº¦ç›‘æ§ç”¨progressï¼Œå¼‚æ­¥ä½“éªŒé¡¶å‘±å‘±
```