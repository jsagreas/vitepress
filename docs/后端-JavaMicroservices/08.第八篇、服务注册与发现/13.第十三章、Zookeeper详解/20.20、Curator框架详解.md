---
title: 20ã€Curatoræ¡†æ¶è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [Curatorå®¢æˆ·ç«¯åŸºç¡€](#1-curatorå®¢æˆ·ç«¯åŸºç¡€)
2. [è¿æ¥ç®¡ç†æœºåˆ¶](#2-è¿æ¥ç®¡ç†æœºåˆ¶)
3. [é‡è¯•ç­–ç•¥è¯¦è§£](#3-é‡è¯•ç­–ç•¥è¯¦è§£)
4. [åˆ†å¸ƒå¼é”å®ç°](#4-åˆ†å¸ƒå¼é”å®ç°)
5. [Leaderé€‰ä¸¾æœºåˆ¶](#5-leaderé€‰ä¸¾æœºåˆ¶)
6. [Curatoré€‰ä¸¾API](#6-curatoré€‰ä¸¾api)
7. [é«˜çº§åŠŸèƒ½åº”ç”¨](#7-é«˜çº§åŠŸèƒ½åº”ç”¨)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Curatorå®¢æˆ·ç«¯åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯Curatoræ¡†æ¶


**é€šä¿—ç†è§£**ï¼š
> ğŸ’¡ **å½¢è±¡æ¯”å–»**ï¼šå¦‚æœè¯´åŸç”ŸZookeeperå®¢æˆ·ç«¯æ˜¯"æ‰‹åŠ¨æŒ¡æ±½è½¦"ï¼Œé‚£Curatorå°±æ˜¯"è‡ªåŠ¨æŒ¡è±ªè½¦"ã€‚åŸç”Ÿå®¢æˆ·ç«¯éœ€è¦ä½ æ‰‹åŠ¨å¤„ç†è¿æ¥ã€é‡è¯•ã€å¼‚å¸¸ï¼Œè€ŒCuratorå¸®ä½ è‡ªåŠ¨æå®šè¿™äº›ï¼Œè®©ä½ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚

**æ ¸å¿ƒå®šä½**ï¼š
```
Curator = Zookeeperå®¢æˆ·ç«¯ + æœ€ä½³å®è·µå°è£…

è§£å†³çš„ç—›ç‚¹ï¼š
âŒ åŸç”ŸAPIå¤æ‚éš¾ç”¨
âŒ è¿æ¥ç®¡ç†éœ€è¦æ‰‹å†™ä»£ç 
âŒ å¼‚å¸¸å¤„ç†å®¹æ˜“å‡ºé”™
âŒ åˆ†å¸ƒå¼é”è¦è‡ªå·±å®ç°

âœ… Curatoræä¾›å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦Curator


**åŸç”Ÿå®¢æˆ·ç«¯çš„é—®é¢˜**ï¼š
```
é—®é¢˜1ï¼šè¿æ¥çŠ¶æ€éš¾ç®¡ç†
â”œâ”€ è¿æ¥æ–­å¼€éœ€è¦æ‰‹åŠ¨é‡è¿
â”œâ”€ Sessionè¿‡æœŸè¦è‡ªå·±å¤„ç†
â””â”€ ä¸´æ—¶èŠ‚ç‚¹å¯èƒ½ä¸¢å¤±

é—®é¢˜2ï¼šAPIä½¿ç”¨å¤æ‚
â”œâ”€ å›è°ƒå‡½æ•°åµŒå¥—å¤šå±‚
â”œâ”€ å¼‚å¸¸ç±»å‹ç¹æ‚
â””â”€ ä»£ç å¯è¯»æ€§å·®

é—®é¢˜3ï¼šå¸¸ç”¨åŠŸèƒ½éœ€è¦è‡ªå·±å®ç°
â”œâ”€ åˆ†å¸ƒå¼é”
â”œâ”€ Leaderé€‰ä¸¾
â””â”€ åˆ†å¸ƒå¼è®¡æ•°å™¨
```

**Curatorçš„ä¼˜åŠ¿**ï¼š
| ç‰¹æ€§ | **åŸç”Ÿå®¢æˆ·ç«¯** | **Curatoræ¡†æ¶** |
|------|--------------|----------------|
| ğŸ”Œ è¿æ¥ç®¡ç† | `æ‰‹åŠ¨ç¼–ç å¤„ç†` | `è‡ªåŠ¨ç®¡ç†ï¼Œå¼€ç®±å³ç”¨` |
| ğŸ”„ é‡è¯•æœºåˆ¶ | `éœ€è¦è‡ªå·±å®ç°` | `å†…ç½®å¤šç§é‡è¯•ç­–ç•¥` |
| ğŸ”’ åˆ†å¸ƒå¼é” | `ä»é›¶ç¼–å†™` | `ç›´æ¥è°ƒç”¨API` |
| ğŸ‘‘ Leaderé€‰ä¸¾ | `å¤æ‚å®ç°` | `ä¸€è¡Œä»£ç æå®š` |
| ğŸ› ï¸ å¼‚å¸¸å¤„ç† | `éœ€è¦æ•è·å„ç§å¼‚å¸¸` | `ç»Ÿä¸€å°è£…å¤„ç†` |

### 1.3 CuratoråŸºæœ¬ä½¿ç”¨


**ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>org.apache.curator</groupId>
    <artifactId>curator-framework</artifactId>
    <version>5.5.0</version>
</dependency>
<dependency>
    <groupId>org.apache.curator</groupId>
    <artifactId>curator-recipes</artifactId>
    <version>5.5.0</version>
</dependency>
```

**ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå®¢æˆ·ç«¯**
```java
// æ–¹å¼1ï¼šä½¿ç”¨å·¥å‚æ–¹æ³•ï¼ˆæ¨èæ–°æ‰‹ï¼‰
CuratorFramework client = CuratorFrameworkFactory.newClient(
    "localhost:2181",           // Zookeeperåœ°å€
    5000,                       // Sessionè¶…æ—¶æ—¶é—´(ms)
    3000,                       // è¿æ¥è¶…æ—¶æ—¶é—´(ms)
    new RetryNTimes(3, 1000)   // é‡è¯•ç­–ç•¥ï¼šé‡è¯•3æ¬¡ï¼Œé—´éš”1ç§’
);
client.start();

// æ–¹å¼2ï¼šä½¿ç”¨æ„å»ºå™¨ï¼ˆæ›´çµæ´»ï¼‰
CuratorFramework client = CuratorFrameworkFactory.builder()
    .connectString("localhost:2181,localhost:2182")  // æ”¯æŒé›†ç¾¤
    .sessionTimeoutMs(5000)
    .connectionTimeoutMs(3000)
    .retryPolicy(new ExponentialBackoffRetry(1000, 3))  // æŒ‡æ•°é€€é¿é‡è¯•
    .namespace("myapp")  // å‘½åç©ºé—´ï¼šæ‰€æœ‰æ“ä½œéƒ½åœ¨/myappä¸‹
    .build();
client.start();
```

> âš ï¸ **é‡è¦æç¤º**ï¼šåˆ›å»ºå®¢æˆ·ç«¯åå¿…é¡»è°ƒç”¨ `start()` æ–¹æ³•å¯åŠ¨ï¼Œä½¿ç”¨å®Œæ¯•è¦è°ƒç”¨ `close()` å…³é—­è¿æ¥

**åŸºç¡€æ“ä½œç¤ºä¾‹**ï¼š
```java
// åˆ›å»ºèŠ‚ç‚¹
client.create()
      .creatingParentsIfNeeded()  // è‡ªåŠ¨åˆ›å»ºçˆ¶èŠ‚ç‚¹
      .withMode(CreateMode.PERSISTENT)
      .forPath("/app/config", "data".getBytes());

// è¯»å–æ•°æ®
byte[] data = client.getData().forPath("/app/config");

// æ›´æ–°æ•°æ®
client.setData().forPath("/app/config", "newData".getBytes());

// åˆ é™¤èŠ‚ç‚¹
client.delete()
      .deletingChildrenIfNeeded()  // åˆ é™¤å­èŠ‚ç‚¹
      .forPath("/app/config");
```

---

## 2. ğŸ”Œ è¿æ¥ç®¡ç†æœºåˆ¶


### 2.1 è¿æ¥çŠ¶æ€ç›‘å¬


**ä¸ºä»€ä¹ˆéœ€è¦ç›‘å¬è¿æ¥çŠ¶æ€**ï¼š
```
å®é™…åœºæ™¯ï¼š
ä½ çš„åº”ç”¨è¿æ¥ç€Zookeeperå­˜å‚¨é…ç½®
çªç„¶ç½‘ç»œæ–­äº†ï¼Œè¿æ¥ä¸¢å¤±
å¦‚æœä¸çŸ¥é“è¿æ¥çŠ¶æ€ï¼š
â”œâ”€ æ— æ³•åˆ¤æ–­æ“ä½œæ˜¯å¦æˆåŠŸ
â”œâ”€ å¯èƒ½è¯»åˆ°æ—§æ•°æ®
â””â”€ ä¸´æ—¶èŠ‚ç‚¹å¯èƒ½å¤±æ•ˆ

æœ‰äº†è¿æ¥ç›‘å¬ï¼š
âœ… å®æ—¶æ„ŸçŸ¥è¿æ¥å˜åŒ–
âœ… æ–­çº¿è‡ªåŠ¨é‡è¿
âœ… Sessionè¿‡æœŸåŠæ—¶å¤„ç†
```

**è¿æ¥çŠ¶æ€ç±»å‹**ï¼š
```
CONNECTED (å·²è¿æ¥)
â”œâ”€ æ­£å¸¸å·¥ä½œçŠ¶æ€
â””â”€ å¯ä»¥æ‰§è¡Œæ‰€æœ‰æ“ä½œ

SUSPENDED (è¿æ¥æš‚åœ)
â”œâ”€ ä¸´æ—¶å¤±å»è¿æ¥
â”œâ”€ æ­£åœ¨å°è¯•é‡è¿
â””â”€ Sessionä»ç„¶æœ‰æ•ˆ

RECONNECTED (é‡æ–°è¿æ¥)
â”œâ”€ æ–­çº¿åæ¢å¤è¿æ¥
â””â”€ Sessionå¯èƒ½å˜åŒ–

LOST (è¿æ¥ä¸¢å¤±)
â”œâ”€ Sessionè¿‡æœŸ
â”œâ”€ ä¸´æ—¶èŠ‚ç‚¹è¢«åˆ é™¤
â””â”€ éœ€è¦é‡æ–°åˆå§‹åŒ–
```

**çŠ¶æ€ç›‘å¬å®ç°**ï¼š
```java
// æ·»åŠ è¿æ¥çŠ¶æ€ç›‘å¬å™¨
client.getConnectionStateListenable().addListener(
    (client, newState) -> {
        switch (newState) {
            case CONNECTED:
                System.out.println("âœ… å·²è¿æ¥åˆ°Zookeeper");
                // æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ
                break;
                
            case SUSPENDED:
                System.out.println("âš ï¸ è¿æ¥æš‚åœï¼Œæ­£åœ¨é‡è¿...");
                // æš‚åœä¸šåŠ¡æ“ä½œ
                break;
                
            case RECONNECTED:
                System.out.println("ğŸ”„ é‡æ–°è¿æ¥æˆåŠŸ");
                // æ¢å¤ä¸šåŠ¡æ“ä½œ
                break;
                
            case LOST:
                System.out.println("âŒ è¿æ¥ä¸¢å¤±ï¼ŒSessionè¿‡æœŸ");
                // é‡æ–°åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ç­‰
                break;
        }
    }
);
```

### 2.2 è‡ªåŠ¨è¿æ¥ç®¡ç†


**Curatorçš„è‡ªåŠ¨åŒ–ä¼˜åŠ¿**ï¼š
```
åŸç”Ÿå®¢æˆ·ç«¯ï¼š
ç¨‹åºå‘˜ â†’ æ‰‹åŠ¨æ£€æµ‹è¿æ¥ â†’ æ‰‹åŠ¨é‡è¿ â†’ æ‰‹åŠ¨å¤„ç†Session

Curatoræ¡†æ¶ï¼š
ç¨‹åºå‘˜ â†’ é…ç½®å¥½ç­–ç•¥ â†’ è‡ªåŠ¨ç®¡ç†ä¸€åˆ‡
          â†“
    æ¡†æ¶è‡ªåŠ¨ï¼šæ£€æµ‹ â†’ é‡è¿ â†’ æ¢å¤
```

**ä¼šè¯ä¿æŒæœºåˆ¶**ï¼š
```
å·¥ä½œåŸç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨ç¨‹åº                            â”‚
â”‚    â†“                                â”‚
â”‚  Curatorå®¢æˆ·ç«¯                       â”‚
â”‚    â”œâ”€ å¿ƒè·³æ£€æµ‹çº¿ç¨‹                   â”‚
â”‚    â”œâ”€ è‡ªåŠ¨é‡è¿çº¿ç¨‹                   â”‚
â”‚    â””â”€ çŠ¶æ€ç›‘æ§çº¿ç¨‹                   â”‚
â”‚         â†“                           â”‚
â”‚  ZookeeperæœåŠ¡å™¨                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…³é”®å‚æ•°ï¼š
â€¢ sessionTimeoutMsï¼šSessionè¶…æ—¶æ—¶é—´
â€¢ connectionTimeoutMsï¼šè¿æ¥è¶…æ—¶æ—¶é—´
â€¢ è¶…æ—¶å‰è‡ªåŠ¨å‘é€å¿ƒè·³ä¿æŒè¿æ¥
```

---

## 3. ğŸ”„ é‡è¯•ç­–ç•¥è¯¦è§£


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦é‡è¯•


**ç½‘ç»œä¸å¯é çš„ç°å®**ï¼š
> ğŸ’­ **ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒæ‰“ç”µè¯ï¼Œç½‘ç»œä¿¡å·ä¸å¥½æ—¶ä¼šæ–­çº¿ï¼Œä½ ä¼šé‡æ‹¨å‡ æ¬¡ã€‚Zookeeperæ“ä½œä¹Ÿä¸€æ ·ï¼Œç½‘ç»œæŠ–åŠ¨ã€æœåŠ¡å™¨ç¹å¿™éƒ½å¯èƒ½å¯¼è‡´å¤±è´¥ï¼Œéœ€è¦é‡è¯•æœºåˆ¶ã€‚

**é‡è¯•çš„å¿…è¦æ€§**ï¼š
```
å¸¸è§å¤±è´¥åœºæ™¯ï¼š
ğŸ“¶ ç½‘ç»œæŠ–åŠ¨ï¼šçŸ­æš‚æ–­ç½‘
â±ï¸ å“åº”è¶…æ—¶ï¼šæœåŠ¡å™¨å¤„ç†æ…¢
ğŸ”€ è¿æ¥åˆ‡æ¢ï¼šä¸»ä»åˆ‡æ¢
ğŸ”§ ä¸´æ—¶æ•…éšœï¼šæœåŠ¡å™¨é‡å¯

ä¸é‡è¯•çš„åæœï¼š
âŒ å¶ç„¶å¤±è´¥å¯¼è‡´ä¸šåŠ¡ä¸­æ–­
âŒ ç”¨æˆ·ä½“éªŒå·®
âŒ æ•°æ®ä¸ä¸€è‡´

æœ‰é‡è¯•æœºåˆ¶ï¼š
âœ… è‡ªåŠ¨æ¢å¤ä¸´æ—¶æ•…éšœ
âœ… æé«˜ç³»ç»Ÿå¯ç”¨æ€§
âœ… é™ä½è¿ç»´æˆæœ¬
```

### 3.2 å†…ç½®é‡è¯•ç­–ç•¥


**ğŸ”¸ ç­–ç•¥1ï¼šå›ºå®šæ¬¡æ•°é‡è¯•ï¼ˆRetryNTimesï¼‰**
```java
// é‡è¯•3æ¬¡ï¼Œæ¯æ¬¡é—´éš”1ç§’
RetryPolicy retryPolicy = new RetryNTimes(3, 1000);

ä½¿ç”¨åœºæ™¯ï¼š
â”œâ”€ é€‚åˆå¿«é€Ÿå¤±è´¥åœºæ™¯
â”œâ”€ é‡è¯•æ¬¡æ•°å¯æ§
â””â”€ é—´éš”å›ºå®šï¼Œç®€å•ç›´æ¥

å·¥ä½œæµç¨‹ï¼š
ç¬¬1æ¬¡å¤±è´¥ â†’ ç­‰1ç§’ â†’ ç¬¬2æ¬¡å°è¯•
ç¬¬2æ¬¡å¤±è´¥ â†’ ç­‰1ç§’ â†’ ç¬¬3æ¬¡å°è¯•
ç¬¬3æ¬¡å¤±è´¥ â†’ ç­‰1ç§’ â†’ ç¬¬4æ¬¡å°è¯•
å…¨éƒ¨å¤±è´¥ â†’ æŠ›å‡ºå¼‚å¸¸
```

**ğŸ”¸ ç­–ç•¥2ï¼šæŒ‡æ•°é€€é¿é‡è¯•ï¼ˆExponentialBackoffRetryï¼‰**
```java
// åŸºç¡€é—´éš”1ç§’ï¼Œæœ€å¤šé‡è¯•3æ¬¡ï¼Œæ¯æ¬¡é—´éš”ç¿»å€
RetryPolicy retryPolicy = new ExponentialBackoffRetry(1000, 3);

ä½¿ç”¨åœºæ™¯ï¼š
â”œâ”€ æœåŠ¡å™¨å‹åŠ›å¤§æ—¶
â”œâ”€ é¿å…é›ªå´©æ•ˆåº”
â””â”€ ç»™æœåŠ¡å™¨æ¢å¤æ—¶é—´

å·¥ä½œæµç¨‹ï¼š
ç¬¬1æ¬¡å¤±è´¥ â†’ ç­‰1ç§’  â†’ ç¬¬2æ¬¡å°è¯•
ç¬¬2æ¬¡å¤±è´¥ â†’ ç­‰2ç§’  â†’ ç¬¬3æ¬¡å°è¯•
ç¬¬3æ¬¡å¤±è´¥ â†’ ç­‰4ç§’  â†’ ç¬¬4æ¬¡å°è¯•
ç¬¬4æ¬¡å¤±è´¥ â†’ æŠ›å‡ºå¼‚å¸¸

ä¼˜åŠ¿ï¼š
â€¢ é€æ¸å¢åŠ ç­‰å¾…æ—¶é—´
â€¢ å‡è½»æœåŠ¡å™¨å‹åŠ›
â€¢ æ›´æœ‰æœºä¼šæˆåŠŸ
```

**ğŸ”¸ ç­–ç•¥3ï¼šæ°¸ä¹…é‡è¯•ï¼ˆRetryForeverï¼‰**
```java
// æ°¸è¿œé‡è¯•ï¼Œé—´éš”1ç§’
RetryPolicy retryPolicy = new RetryForever(1000);

âš ï¸ ä½¿ç”¨åœºæ™¯ï¼ˆè°¨æ…ï¼‰ï¼š
â”œâ”€ å…³é”®ä¸šåŠ¡å¿…é¡»æˆåŠŸ
â”œâ”€ æœ‰å…¶ä»–è¶…æ—¶æœºåˆ¶
â””â”€ é…åˆæ–­è·¯å™¨ä½¿ç”¨

é£é™©æç¤ºï¼š
âŒ å¯èƒ½æ°¸ä¹…é˜»å¡çº¿ç¨‹
âŒ èµ„æºæ— æ³•é‡Šæ”¾
âŒ éœ€è¦å¤–éƒ¨ä¸­æ–­æœºåˆ¶
```

**ğŸ”¸ ç­–ç•¥4ï¼šæœ‰ç•ŒæŒ‡æ•°é€€é¿ï¼ˆBoundedExponentialBackoffRetryï¼‰**
```java
// åŸºç¡€1ç§’ï¼Œæœ€å¤§10ç§’ï¼Œæœ€å¤šé‡è¯•5æ¬¡
RetryPolicy retryPolicy = new BoundedExponentialBackoffRetry(
    1000,  // åŸºç¡€é—´éš”
    10000, // æœ€å¤§é—´éš”
    5      // æœ€å¤§é‡è¯•æ¬¡æ•°
);

ä½¿ç”¨åœºæ™¯ï¼ˆæ¨èï¼‰ï¼š
âœ… ç”Ÿäº§ç¯å¢ƒé¦–é€‰
âœ… å…¼é¡¾é‡è¯•æ•ˆç‡å’Œç¨³å®šæ€§
âœ… é¿å…ç­‰å¾…æ—¶é—´è¿‡é•¿

å·¥ä½œæµç¨‹ï¼š
ç¬¬1æ¬¡ â†’ 1ç§’  â†’ é‡è¯•
ç¬¬2æ¬¡ â†’ 2ç§’  â†’ é‡è¯•
ç¬¬3æ¬¡ â†’ 4ç§’  â†’ é‡è¯•
ç¬¬4æ¬¡ â†’ 8ç§’  â†’ é‡è¯•
ç¬¬5æ¬¡ â†’ 10ç§’ â†’ é‡è¯•ï¼ˆå°é¡¶ï¼‰
å¤±è´¥   â†’ æŠ›å¼‚å¸¸
```

### 3.3 é‡è¯•ç­–ç•¥å¯¹æ¯”


| ç­–ç•¥ | **ç­‰å¾…è§„å¾‹** | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|------|------------|------------|---------|---------|
| RetryNTimes | `å›ºå®šé—´éš”` | `å¿«é€Ÿå¤±è´¥åœºæ™¯` | `ç®€å•å¯æ§` | `å¯èƒ½åŠ é‡æœåŠ¡å™¨å‹åŠ›` |
| ExponentialBackoffRetry | `æŒ‡æ•°å¢é•¿` | `æœåŠ¡å™¨å‹åŠ›å¤§` | `å‡è½»å‹åŠ›` | `å¯èƒ½ç­‰å¾…è¿‡ä¹…` |
| RetryForever | `æ°¸ä¹…é‡è¯•` | `å…³é”®ä¸šåŠ¡` | `ä¸æ”¾å¼ƒ` | `å¯èƒ½é˜»å¡` |
| BoundedExponentialBackoffRetry | `æŒ‡æ•°å¢é•¿+å°é¡¶` | `ç”Ÿäº§ç¯å¢ƒæ¨è` | `å¹³è¡¡æ•ˆç‡å’Œç¨³å®šæ€§` | `é…ç½®ç¨å¤æ‚` |

> ğŸ’¡ **å®è·µå»ºè®®**ï¼šç”Ÿäº§ç¯å¢ƒä¼˜å…ˆä½¿ç”¨ `BoundedExponentialBackoffRetry`ï¼Œå¼€å‘æµ‹è¯•å¯ç”¨ `RetryNTimes`

---

## 4. ğŸ”’ åˆ†å¸ƒå¼é”å®ç°


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼é”


**å•æœºé”çš„å±€é™**ï¼š
```
å•æœºç¯å¢ƒï¼ˆä¸€å°æœåŠ¡å™¨ï¼‰ï¼š
æœåŠ¡å™¨Aï¼šsynchronizedé” âœ… æœ‰æ•ˆ

åˆ†å¸ƒå¼ç¯å¢ƒï¼ˆå¤šå°æœåŠ¡å™¨ï¼‰ï¼š
æœåŠ¡å™¨Aï¼šsynchronizedé” âŒ åªé”ä½A
æœåŠ¡å™¨Bï¼šsynchronizedé” âŒ åªé”ä½B
æœåŠ¡å™¨Cï¼šsynchronizedé” âŒ åªé”ä½C

é—®é¢˜ï¼š
â”œâ”€ Aã€Bã€CåŒæ—¶æŠ¢èµ„æº
â”œâ”€ æœ¬åœ°é”äº’ä¸å½±å“
â””â”€ é€ æˆæ•°æ®æ··ä¹±
```

**åˆ†å¸ƒå¼é”çš„ä½œç”¨**ï¼š
> ğŸ’¡ **å½¢è±¡æ¯”å–»**ï¼šåˆ†å¸ƒå¼é”å°±åƒå…¬å…±å«ç”Ÿé—´çš„é—¨é”ï¼Œæ— è®ºä½ ä»å“ªä¸ªå…¥å£è¿›æ¥ï¼Œéƒ½åªæœ‰æ‹¿åˆ°é’¥åŒ™çš„äººæ‰èƒ½è¿›å»ï¼Œä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªäººä½¿ç”¨ã€‚

**å…¸å‹åº”ç”¨åœºæ™¯**ï¼š
```
åœºæ™¯1ï¼šè®¢å•ç³»ç»Ÿ
â”œâ”€ å¤šä¸ªæœåŠ¡å™¨å¤„ç†è®¢å•
â”œâ”€ åŒä¸€è®¢å•åªèƒ½å¤„ç†ä¸€æ¬¡
â””â”€ ç”¨åˆ†å¸ƒå¼é”ä¿è¯

åœºæ™¯2ï¼šå®šæ—¶ä»»åŠ¡
â”œâ”€ é›†ç¾¤ä¸­å¤šä¸ªèŠ‚ç‚¹éƒ½æœ‰å®šæ—¶ä»»åŠ¡
â”œâ”€ åªéœ€è¦ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œ
â””â”€ ç”¨åˆ†å¸ƒå¼é”é€‰å‡ºæ‰§è¡Œè€…

åœºæ™¯3ï¼šåº“å­˜æ‰£å‡
â”œâ”€ é«˜å¹¶å‘æ‰£å‡åº“å­˜
â”œâ”€ é˜²æ­¢è¶…å–
â””â”€ ç”¨åˆ†å¸ƒå¼é”ä¸²è¡ŒåŒ–
```

### 4.2 Curatoråˆ†å¸ƒå¼é”ç±»å‹


**ğŸ”¸ ç±»å‹1ï¼šå¯é‡å…¥é”ï¼ˆInterProcessMutexï¼‰**
```java
// åˆ›å»ºå¯é‡å…¥äº’æ–¥é”
InterProcessMutex lock = new InterProcessMutex(client, "/locks/my-lock");

try {
    // è·å–é”ï¼Œæœ€å¤šç­‰å¾…5ç§’
    if (lock.acquire(5, TimeUnit.SECONDS)) {
        try {
            // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
            System.out.println("ğŸ”’ è·å–é”æˆåŠŸï¼Œæ‰§è¡Œä¸šåŠ¡");
            
            // å¯é‡å…¥ï¼šåŒä¸€çº¿ç¨‹å¯ä»¥å†æ¬¡è·å–é”
            if (lock.acquire(1, TimeUnit.SECONDS)) {
                System.out.println("ğŸ”’ é‡å…¥æˆåŠŸ");
                lock.release(); // é‡Šæ”¾é‡å…¥çš„é”
            }
            
        } finally {
            lock.release(); // é‡Šæ”¾é”
        }
    } else {
        System.out.println("âŒ è·å–é”è¶…æ—¶");
    }
} catch (Exception e) {
    e.printStackTrace();
}
```

> ğŸ’¡ **å¯é‡å…¥å«ä¹‰**ï¼šåŒä¸€ä¸ªçº¿ç¨‹å·²ç»æ‹¿åˆ°é”åï¼Œå¯ä»¥å†æ¬¡è·å–è¿™ä¸ªé”ï¼Œä¸ä¼šæŠŠè‡ªå·±é”æ­»

**ğŸ”¸ ç±»å‹2ï¼šä¸å¯é‡å…¥é”ï¼ˆInterProcessSemaphoreMutexï¼‰**
```java
// åˆ›å»ºä¸å¯é‡å…¥é”
InterProcessSemaphoreMutex lock = 
    new InterProcessSemaphoreMutex(client, "/locks/my-lock");

lock.acquire(); // è·å–é”
try {
    // ä¸šåŠ¡é€»è¾‘
    // lock.acquire(); // âŒ åŒä¸€çº¿ç¨‹å†æ¬¡è·å–ä¼šæ­»é”ï¼
} finally {
    lock.release();
}
```

**ğŸ”¸ ç±»å‹3ï¼šè¯»å†™é”ï¼ˆInterProcessReadWriteLockï¼‰**
```java
// åˆ›å»ºè¯»å†™é”
InterProcessReadWriteLock rwLock = 
    new InterProcessReadWriteLock(client, "/locks/rw-lock");

// åœºæ™¯1ï¼šè¯»æ•°æ®ï¼ˆå¯ä»¥å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»ï¼‰
InterProcessMutex readLock = rwLock.readLock();
readLock.acquire();
try {
    System.out.println("ğŸ“– è¯»å–æ•°æ®");
} finally {
    readLock.release();
}

// åœºæ™¯2ï¼šå†™æ•°æ®ï¼ˆç‹¬å ï¼Œå…¶ä»–è¯»å†™éƒ½è¦ç­‰ï¼‰
InterProcessMutex writeLock = rwLock.writeLock();
writeLock.acquire();
try {
    System.out.println("âœï¸ å†™å…¥æ•°æ®");
} finally {
    writeLock.release();
}
```

**è¯»å†™é”è§„åˆ™**ï¼š
```
è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼š
â”œâ”€ å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æŒæœ‰
â”œâ”€ ä¸å½±å“å…¶ä»–è¯»æ“ä½œ
â””â”€ ä¼šé˜»å¡å†™æ“ä½œ

å†™é”ï¼ˆç‹¬å é”ï¼‰ï¼š
â”œâ”€ åŒæ—¶åªèƒ½ä¸€ä¸ªçº¿ç¨‹æŒæœ‰
â”œâ”€ é˜»å¡æ‰€æœ‰è¯»æ“ä½œ
â””â”€ é˜»å¡æ‰€æœ‰å†™æ“ä½œ

åº”ç”¨åœºæ™¯ï¼š
ğŸ“– è¯»å¤šå†™å°‘ï¼šé…ç½®ä¸­å¿ƒã€ç¼“å­˜ç³»ç»Ÿ
âœï¸ å†™æ“ä½œï¼šæ•°æ®æ›´æ–°ã€åº“å­˜ä¿®æ”¹
```

### 4.3 åˆ†å¸ƒå¼é”å®ç°åŸç†


**Zookeeperå®ç°é”çš„æœºåˆ¶**ï¼š
```
åŸç†ï¼šåˆ©ç”¨ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ + ç›‘å¬æœºåˆ¶

æ­¥éª¤æµç¨‹ï¼š
1. å®¢æˆ·ç«¯åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹
   /locks/lock-0000000001
   /locks/lock-0000000002
   /locks/lock-0000000003

2. åˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯æœ€å°èŠ‚ç‚¹
   0000000001 â†’ æœ€å°ï¼Œè·å–é” âœ…
   0000000002 â†’ ä¸æ˜¯æœ€å°ï¼Œç­‰å¾… â³
   0000000003 â†’ ä¸æ˜¯æœ€å°ï¼Œç­‰å¾… â³

3. æœªè·å–é”çš„ç›‘å¬å‰ä¸€ä¸ªèŠ‚ç‚¹
   0000000002 â†’ ç›‘å¬ 0000000001
   0000000003 â†’ ç›‘å¬ 0000000002

4. å‰ä¸€ä¸ªèŠ‚ç‚¹åˆ é™¤æ—¶æ”¶åˆ°é€šçŸ¥
   0000000001é‡Šæ”¾ â†’ 0000000002è·å–é”
   0000000002é‡Šæ”¾ â†’ 0000000003è·å–é”

ä¼˜åŠ¿ï¼š
âœ… å…¬å¹³é”ï¼šæŒ‰é¡ºåºè·å–
âœ… é˜²æ­»é”ï¼šä¸´æ—¶èŠ‚ç‚¹è‡ªåŠ¨åˆ é™¤
âœ… é«˜å¯ç”¨ï¼šZookeeperé›†ç¾¤ä¿è¯
```

**é”é‡Šæ”¾æœºåˆ¶**ï¼š
```
æ­£å¸¸é‡Šæ”¾ï¼š
ç¨‹åºä¸»åŠ¨è°ƒç”¨ release()
  â†“
åˆ é™¤ä¸´æ—¶èŠ‚ç‚¹
  â†“
ä¸‹ä¸€ä¸ªç­‰å¾…è€…è·å–é”

å¼‚å¸¸é‡Šæ”¾ï¼š
å®¢æˆ·ç«¯å´©æºƒæˆ–æ–­ç½‘
  â†“
Sessionè¿‡æœŸ
  â†“
Zookeeperè‡ªåŠ¨åˆ é™¤ä¸´æ—¶èŠ‚ç‚¹
  â†“
ä¸‹ä¸€ä¸ªç­‰å¾…è€…è·å–é”

å…³é”®ä¿éšœï¼š
ğŸ›¡ï¸ æ— è®ºæ­£å¸¸è¿˜æ˜¯å¼‚å¸¸ï¼Œé”éƒ½èƒ½è¢«é‡Šæ”¾
ğŸ›¡ï¸ ä¸ä¼šå‡ºç°æ°¸ä¹…æ­»é”
```

### 4.4 åˆ†å¸ƒå¼é”æœ€ä½³å®è·µ


**âœ… ä½¿ç”¨è§„èŒƒ**ï¼š
```java
// æ¨èå†™æ³•ï¼šä½¿ç”¨try-finallyä¿è¯é‡Šæ”¾
InterProcessMutex lock = new InterProcessMutex(client, "/locks/order");

try {
    if (lock.acquire(10, TimeUnit.SECONDS)) {
        try {
            // ä¸šåŠ¡ä»£ç 
            processOrder();
        } finally {
            lock.release(); // å¿…é¡»é‡Šæ”¾
        }
    } else {
        // è¶…æ—¶å¤„ç†
        System.out.println("è·å–é”è¶…æ—¶ï¼Œç¨åé‡è¯•");
    }
} catch (Exception e) {
    // å¼‚å¸¸å¤„ç†
    e.printStackTrace();
}
```

**âš ï¸ å¸¸è§é™·é˜±**ï¼š
```
âŒ é™·é˜±1ï¼šå¿˜è®°é‡Šæ”¾é”
lock.acquire();
processOrder(); // å¦‚æœè¿™é‡Œå¼‚å¸¸ï¼Œé”ä¸ä¼šé‡Šæ”¾
lock.release(); // æ°¸è¿œæ‰§è¡Œä¸åˆ°

âœ… æ­£ç¡®åšæ³•ï¼šç”¨finallyä¿è¯é‡Šæ”¾

âŒ é™·é˜±2ï¼šé”ç²’åº¦å¤ªå¤§
lock.acquire();
// è€—æ—¶æ“ä½œ1ï¼š10ç§’
// è€—æ—¶æ“ä½œ2ï¼š20ç§’
// ä¸šåŠ¡é€»è¾‘ï¼š1ç§’
lock.release();

âœ… æ­£ç¡®åšæ³•ï¼šç¼©å°é”èŒƒå›´ï¼Œåªé”å¿…è¦ä»£ç 

âŒ é™·é˜±3ï¼šä¸è®¾ç½®è¶…æ—¶æ—¶é—´
lock.acquire(); // æ— é™ç­‰å¾…ï¼Œå¯èƒ½æ°¸ä¹…é˜»å¡

âœ… æ­£ç¡®åšæ³•ï¼šè®¾ç½®åˆç†è¶…æ—¶
lock.acquire(10, TimeUnit.SECONDS);
```

---

## 5. ğŸ‘‘ Leaderé€‰ä¸¾æœºåˆ¶


### 5.1 ä»€ä¹ˆæ˜¯Leaderé€‰ä¸¾


**æ¦‚å¿µç†è§£**ï¼š
> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**ï¼šä¸€ä¸ªç­çº§é€‰ç­é•¿ï¼Œå¤§å®¶æŠ•ç¥¨ï¼Œç¥¨æ•°æœ€å¤šçš„å½“ç­é•¿ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªèŠ‚ç‚¹é€‰å‡ºä¸€ä¸ªLeaderè´Ÿè´£åè°ƒå·¥ä½œï¼Œå…¶ä»–èŠ‚ç‚¹ä½œä¸ºFolloweré…åˆã€‚

**ä¸ºä»€ä¹ˆéœ€è¦Leader**ï¼š
```
åˆ†å¸ƒå¼ç³»ç»Ÿçš„æŒ‘æˆ˜ï¼š
é—®é¢˜1ï¼šè°æ¥åšå†³ç­–ï¼Ÿ
â”œâ”€ å¤šä¸ªèŠ‚ç‚¹éƒ½èƒ½æ“ä½œ
â”œâ”€ å®¹æ˜“äº§ç”Ÿå†²çª
â””â”€ éœ€è¦ç»Ÿä¸€åè°ƒ

é—®é¢˜2ï¼šå¦‚ä½•é¿å…é‡å¤æ‰§è¡Œï¼Ÿ
â”œâ”€ å®šæ—¶ä»»åŠ¡åœ¨å¤šä¸ªèŠ‚ç‚¹éƒ½æœ‰
â”œâ”€ ä¸èƒ½åŒæ—¶æ‰§è¡Œ
â””â”€ éœ€è¦é€‰å‡ºä¸€ä¸ªæ‰§è¡Œè€…

é—®é¢˜3ï¼šå•ç‚¹æ•…éšœæ€ä¹ˆåŠï¼Ÿ
â”œâ”€ LeaderèŠ‚ç‚¹æŒ‚äº†
â”œâ”€ ç³»ç»Ÿä¸èƒ½åœæ­¢
â””â”€ éœ€è¦é‡æ–°é€‰ä¸¾

Leaderé€‰ä¸¾è§£å†³æ–¹æ¡ˆï¼š
âœ… é€‰å‡ºä¸€ä¸ªLeaderè´Ÿè´£å†³ç­–
âœ… å…¶ä»–Followerç­‰å¾…æŒ‡ä»¤
âœ… LeaderæŒ‚äº†è‡ªåŠ¨é‡æ–°é€‰ä¸¾
```

**å…¸å‹åº”ç”¨åœºæ™¯**ï¼š
```
åœºæ™¯1ï¼šå®šæ—¶ä»»åŠ¡è°ƒåº¦
é›†ç¾¤ï¼š[èŠ‚ç‚¹A, èŠ‚ç‚¹B, èŠ‚ç‚¹C]
â”œâ”€ é€‰å‡ºLeaderï¼ˆèŠ‚ç‚¹Aï¼‰
â”œâ”€ Leaderæ‰§è¡Œå®šæ—¶ä»»åŠ¡
â””â”€ Followerå¾…å‘½

åœºæ™¯2ï¼šä¸»ä»åˆ‡æ¢
ä¸»åº“ï¼šèŠ‚ç‚¹Aï¼ˆLeaderï¼‰è´Ÿè´£å†™å…¥
ä»åº“ï¼šèŠ‚ç‚¹Bã€Cï¼ˆFollowerï¼‰è´Ÿè´£è¯»å–
â”œâ”€ AæŒ‚äº†ï¼Œé€‰å‡ºæ–°Leaderï¼ˆBï¼‰
â””â”€ Bæ¥ç®¡å†™å…¥ï¼ŒCç»§ç»­è¯»å–

åœºæ™¯3ï¼šé…ç½®ç®¡ç†
Leaderï¼šè´Ÿè´£é…ç½®å˜æ›´
Followerï¼šç›‘å¬é…ç½®æ›´æ–°
```

### 5.2 é€‰ä¸¾ç®—æ³•åŸç†


**Curatorçš„é€‰ä¸¾æœºåˆ¶**ï¼š
```
é€‰ä¸¾æµç¨‹ï¼š
1. æ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹
   /election/leader-0000000001
   /election/leader-0000000002  
   /election/leader-0000000003

2. åºå·æœ€å°çš„æˆä¸ºLeader
   0000000001 â†’ Leader âœ…
   0000000002 â†’ Follower 1
   0000000003 â†’ Follower 2

3. Leaderç›‘å¬è‡ªå·±çš„èŠ‚ç‚¹
   LeaderæŒ‚æ‰ â†’ èŠ‚ç‚¹åˆ é™¤

4. Followerç›‘å¬å‰ä¸€ä¸ªèŠ‚ç‚¹
   0000000002 â†’ ç›‘å¬ 0000000001
   0000000003 â†’ ç›‘å¬ 0000000002

5. Leaderå¤±æ•ˆæ—¶é‡æ–°é€‰ä¸¾
   0000000001åˆ é™¤
     â†“
   0000000002æˆä¸ºæ–°Leader
     â†“
   0000000003å‡çº§ä¸ºFollower 1
```

**é€‰ä¸¾ç‰¹æ€§**ï¼š
```
å…¬å¹³æ€§ï¼š
â”œâ”€ æŒ‰åŠ å…¥é¡ºåºæ’é˜Ÿ
â”œâ”€ å…ˆæ¥å…ˆå½“Leader
â””â”€ ä¸ä¼šå‡ºç°é¥¥é¥¿

å¯é æ€§ï¼š
â”œâ”€ Leaderå´©æºƒè‡ªåŠ¨é€‰ä¸¾
â”œâ”€ æ— éœ€äººå·¥å¹²é¢„
â””â”€ æ¯«ç§’çº§åˆ‡æ¢

å”¯ä¸€æ€§ï¼š
â”œâ”€ åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªLeader
â”œâ”€ Zookeeperä¿è¯
â””â”€ ä¸ä¼šå‡ºç°åŒä¸»
```

---

## 6. ğŸ—³ï¸ Curatoré€‰ä¸¾API


### 6.1 LeaderSelectoråŸºç¡€ç”¨æ³•


**åŸºæœ¬å®ç°**ï¼š
```java
// åˆ›å»ºLeaderé€‰æ‹©å™¨
LeaderSelector leaderSelector = new LeaderSelector(
    client,                          // Curatorå®¢æˆ·ç«¯
    "/election/my-service",          // é€‰ä¸¾è·¯å¾„
    new LeaderSelectorListenerAdapter() {  // é€‰ä¸¾ç›‘å¬å™¨
        @Override
        public void takeLeadership(CuratorFramework client) 
                throws Exception {
            // æˆä¸ºLeaderåæ‰§è¡Œçš„é€»è¾‘
            System.out.println("ğŸ–ï¸ æˆ‘æ˜¯Leaderï¼Œå¼€å§‹å·¥ä½œ");
            
            try {
                // Leaderçš„å·¥ä½œå†…å®¹
                while (true) {
                    System.out.println("ğŸ“‹ æ‰§è¡Œå®šæ—¶ä»»åŠ¡");
                    Thread.sleep(5000);
                    
                    // å¦‚æœæƒ³ä¸»åŠ¨æ”¾å¼ƒLeaderèº«ä»½ï¼Œç›´æ¥return
                    // return;
                }
            } catch (InterruptedException e) {
                System.out.println("ğŸ”„ Leaderèº«ä»½è¢«ä¸­æ–­");
            }
        }
    }
);

// è‡ªåŠ¨é‡æ–°åŠ å…¥é€‰ä¸¾é˜Ÿåˆ—ï¼ˆLeaderé‡Šæ”¾åè‡ªåŠ¨å‚ä¸ä¸‹æ¬¡é€‰ä¸¾ï¼‰
leaderSelector.autoRequeue();

// å¼€å§‹å‚ä¸é€‰ä¸¾
leaderSelector.start();

// é‡Šæ”¾èµ„æºï¼ˆä¸å†å‚ä¸é€‰ä¸¾ï¼‰
// leaderSelector.close();
```

**å…³é”®ç†è§£**ï¼š
```
takeLeadership() æ–¹æ³•ï¼š
â”œâ”€ è·å¾—Leaderèº«ä»½æ—¶è¢«è°ƒç”¨
â”œâ”€ æ–¹æ³•æ‰§è¡ŒæœŸé—´ä¿æŒLeaderèº«ä»½
â”œâ”€ æ–¹æ³•è¿”å›åè‡ªåŠ¨æ”¾å¼ƒLeader
â””â”€ å¦‚æœautoRequeue()ï¼Œä¼šé‡æ–°å‚ä¸é€‰ä¸¾

å·¥ä½œæµç¨‹ï¼š
èŠ‚ç‚¹å¯åŠ¨ â†’ å‚ä¸é€‰ä¸¾
    â†“
è·å¾—Leader â†’ æ‰§è¡ŒtakeLeadership()
    â†“
æ–¹æ³•è¿”å› â†’ æ”¾å¼ƒLeader
    â†“
è‡ªåŠ¨é‡æ–°å‚ä¸é€‰ä¸¾ â†’ ç­‰å¾…æˆä¸ºLeader

åº”ç”¨åœºæ™¯ï¼š
âœ… å®šæ—¶ä»»åŠ¡è°ƒåº¦
âœ… ä¸»ä»åˆ‡æ¢
âœ… å•ç‚¹ä»»åŠ¡æ‰§è¡Œ
```

### 6.2 LeaderLatchç®€åŒ–ç”¨æ³•


**å¯¹æ¯”LeaderSelectorçš„åŒºåˆ«**ï¼š
```
LeaderSelectorï¼š
â”œâ”€ å¿…é¡»å®ç°takeLeadership()æ–¹æ³•
â”œâ”€ æ–¹æ³•è¿”å›å°±æ”¾å¼ƒLeader
â”œâ”€ é€‚åˆä¸»åŠ¨æ§åˆ¶Leaderç”Ÿå‘½å‘¨æœŸ

LeaderLatchï¼š
â”œâ”€ ä¸éœ€è¦å®ç°å›è°ƒæ–¹æ³•
â”œâ”€ æˆä¸ºLeaderåä¸€ç›´ä¿æŒ
â”œâ”€ é€‚åˆè¢«åŠ¨ç­‰å¾…Leaderèº«ä»½
```

**LeaderLatchä½¿ç”¨**ï¼š
```java
// åˆ›å»ºLeaderLatch
LeaderLatch leaderLatch = new LeaderLatch(
    client,
    "/election/my-service",
    "èŠ‚ç‚¹A"  // èŠ‚ç‚¹IDï¼Œç”¨äºæ ‡è¯†
);

// å¯åŠ¨å¹¶å‚ä¸é€‰ä¸¾
leaderLatch.start();

// é˜»å¡ç­‰å¾…ç›´åˆ°æˆä¸ºLeader
leaderLatch.await();
System.out.println("ğŸ–ï¸ æˆ‘æ˜¯Leaderäº†ï¼");

// æ£€æŸ¥è‡ªå·±æ˜¯å¦æ˜¯Leader
if (leaderLatch.hasLeadership()) {
    System.out.println("âœ… ç¡®è®¤Leaderèº«ä»½");
    // æ‰§è¡ŒLeaderä»»åŠ¡
    doLeaderWork();
}

// è·å–å½“å‰Leaderä¿¡æ¯
Participant leader = leaderLatch.getLeader();
System.out.println("å½“å‰Leaderï¼š" + leader.getId());

// ä¸»åŠ¨æ”¾å¼ƒLeaderå¹¶å…³é—­
leaderLatch.close();
```

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```java
public class MyService {
    private LeaderLatch leaderLatch;
    
    public void start() {
        leaderLatch = new LeaderLatch(client, "/election/service");
        leaderLatch.start();
        
        // å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ£€æŸ¥LeaderçŠ¶æ€
        new Thread(() -> {
            while (true) {
                try {
                    if (leaderLatch.hasLeadership()) {
                        // æ˜¯Leaderï¼Œæ‰§è¡Œä»»åŠ¡
                        executeTask();
                    } else {
                        // ä¸æ˜¯Leaderï¼Œç­‰å¾…
                        System.out.println("â³ ç­‰å¾…æˆä¸ºLeader...");
                    }
                    Thread.sleep(1000);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }
    
    private void executeTask() {
        System.out.println("ğŸ“‹ Leaderæ‰§è¡Œä»»åŠ¡");
    }
}
```

### 6.3 é€‰ä¸¾APIå¯¹æ¯”


| ç‰¹æ€§ | **LeaderSelector** | **LeaderLatch** |
|------|------------------|----------------|
| ğŸ“ ä½¿ç”¨å¤æ‚åº¦ | `éœ€è¦å®ç°å›è°ƒæ–¹æ³•` | `ç›´æ¥ä½¿ç”¨ï¼Œæ›´ç®€å•` |
| ğŸ‘‘ Leaderä¿æŒ | `æ–¹æ³•è¿”å›å°±æ”¾å¼ƒ` | `ä¸€ç›´ä¿æŒç›´åˆ°close` |
| ğŸ”„ è‡ªåŠ¨é‡é€‰ | `éœ€è¦autoRequeue()` | `é»˜è®¤è‡ªåŠ¨å‚ä¸` |
| ğŸ¯ é€‚ç”¨åœºæ™¯ | `ä¸»åŠ¨æ§åˆ¶å‘¨æœŸ` | `è¢«åŠ¨ä¿æŒçŠ¶æ€` |
| ğŸ’¡ æ¨èåœºæ™¯ | `å®šæ—¶ä»»åŠ¡` | `ä¸»ä»æ¶æ„` |

> ğŸ’¡ **é€‰æ‹©å»ºè®®**ï¼šå®šæ—¶ä»»åŠ¡ç”¨ **LeaderSelector**ï¼Œä¸»ä»åˆ‡æ¢ç”¨ **LeaderLatch**

---

## 7. ğŸš€ é«˜çº§åŠŸèƒ½åº”ç”¨


### 7.1 åˆ†å¸ƒå¼è®¡æ•°å™¨


**åº”ç”¨åœºæ™¯**ï¼š
```
åœºæ™¯1ï¼šå…¨å±€IDç”Ÿæˆ
â”œâ”€ å¤šä¸ªæœåŠ¡å™¨ç”Ÿæˆè®¢å•å·
â”œâ”€ ä¿è¯å…¨å±€å”¯ä¸€
â””â”€ ç”¨è®¡æ•°å™¨é€’å¢

åœºæ™¯2ï¼šç»Ÿè®¡åœ¨çº¿äººæ•°
â”œâ”€ å¤šä¸ªèŠ‚ç‚¹ç»Ÿè®¡
â”œâ”€ æ±‡æ€»åˆ°ä¸€ä¸ªè®¡æ•°å™¨
â””â”€ å®æ—¶æ˜¾ç¤ºæ€»æ•°

åœºæ™¯3ï¼šé™æµæ§åˆ¶
â”œâ”€ ç»Ÿè®¡è¯·æ±‚æ¬¡æ•°
â”œâ”€ è¶…è¿‡é˜ˆå€¼æ‹’ç»
â””â”€ å®šæ—¶é‡ç½®è®¡æ•°
```

**åˆ†å¸ƒå¼è®¡æ•°å™¨å®ç°**ï¼š
```java
// åˆ›å»ºåˆ†å¸ƒå¼åŸå­Long
DistributedAtomicLong atomicLong = new DistributedAtomicLong(
    client,
    "/counters/order-id",
    new RetryNTimes(3, 1000)
);

// é€’å¢æ“ä½œï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
try {
    AtomicValue<Long> value = atomicLong.increment();
    
    if (value.succeeded()) {
        long newValue = value.postValue();
        System.out.println("ğŸ“ˆ è®¡æ•°å™¨å€¼ï¼š" + newValue);
        
        // ä½¿ç”¨è¿™ä¸ªå€¼ä½œä¸ºè®¢å•å·
        String orderId = "ORDER-" + newValue;
    } else {
        System.out.println("âŒ é€’å¢å¤±è´¥");
    }
} catch (Exception e) {
    e.printStackTrace();
}

// è®¾ç½®ç‰¹å®šå€¼
atomicLong.trySet(100L);

// æ¯”è¾ƒå¹¶è®¾ç½®ï¼ˆCASæ“ä½œï¼‰
atomicLong.compareAndSet(100L, 200L);
```

### 7.2 åˆ†å¸ƒå¼å±éšœï¼ˆBarrierï¼‰


**æ¦‚å¿µç†è§£**ï¼š
> ğŸ’¡ **å½¢è±¡æ¯”å–»**ï¼šå°±åƒèµ›è·‘æ—¶ï¼Œæ‰€æœ‰è¿åŠ¨å‘˜ç«™åœ¨èµ·è·‘çº¿ä¸Šï¼Œç­‰è£åˆ¤ä¸€å£°ä»¤ä¸‹ï¼Œå¤§å®¶åŒæ—¶èµ·è·‘ã€‚åˆ†å¸ƒå¼å±éšœç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹å‡†å¤‡å°±ç»ªåï¼ŒåŒæ—¶å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚

**åŒé‡å±éšœï¼ˆDoubleBarrierï¼‰**ï¼š
```java
// åˆ›å»ºå±éšœï¼Œéœ€è¦3ä¸ªèŠ‚ç‚¹æ‰èƒ½é€šè¿‡
DistributedDoubleBarrier barrier = new DistributedDoubleBarrier(
    client,
    "/barriers/my-task",
    3  // å‚ä¸è€…æ•°é‡
);

// ç­‰å¾…æ‰€æœ‰èŠ‚ç‚¹åˆ°è¾¾
barrier.enter();
System.out.println("âœ… æ‰€æœ‰èŠ‚ç‚¹å°±ä½ï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡");

// æ‰§è¡Œä»»åŠ¡
doWork();

// ç­‰å¾…æ‰€æœ‰èŠ‚ç‚¹å®Œæˆ
barrier.leave();
System.out.println("âœ… æ‰€æœ‰èŠ‚ç‚¹å®Œæˆä»»åŠ¡");
```

**å·¥ä½œåŸç†**ï¼š
```
åœºæ™¯ï¼š3ä¸ªèŠ‚ç‚¹æ‰§è¡Œæ‰¹é‡ä»»åŠ¡

èŠ‚ç‚¹Aåˆ°è¾¾ â†’ ç­‰å¾…ä¸­ â³
èŠ‚ç‚¹Båˆ°è¾¾ â†’ ç­‰å¾…ä¸­ â³
èŠ‚ç‚¹Cåˆ°è¾¾ â†’ å…¨éƒ¨é€šè¿‡ âœ…
  â†“
åŒæ—¶å¼€å§‹æ‰§è¡Œä»»åŠ¡
  â†“
èŠ‚ç‚¹Aå®Œæˆ â†’ ç­‰å¾…ä¸­ â³
èŠ‚ç‚¹Bå®Œæˆ â†’ ç­‰å¾…ä¸­ â³
èŠ‚ç‚¹Cå®Œæˆ â†’ å…¨éƒ¨ç¦»å¼€ âœ…

åº”ç”¨åœºæ™¯ï¼š
â”œâ”€ æ‰¹é‡æ•°æ®å¤„ç†
â”œâ”€ åˆ†å¸ƒå¼æµ‹è¯•
â””â”€ å¤šé˜¶æ®µä»»åŠ¡åè°ƒ
```

### 7.3 åˆ†å¸ƒå¼é˜Ÿåˆ—


**å…±äº«é˜Ÿåˆ—ï¼ˆDistributedQueueï¼‰**ï¼š
```java
// åˆ›å»ºåˆ†å¸ƒå¼é˜Ÿåˆ—
DistributedQueue<String> queue = QueueBuilder
    .builder(client, 
             null,  // æ¶ˆè´¹è€…
             new QueueSerializer<String>() {
                 @Override
                 public byte[] serialize(String item) {
                     return item.getBytes();
                 }
                 
                 @Override
                 public String deserialize(byte[] bytes) {
                     return new String(bytes);
                 }
             },
             "/queues/tasks")
    .buildQueue();

// ç”Ÿäº§è€…ï¼šæ”¾å…¥æ•°æ®
queue.put("ä»»åŠ¡1");
queue.put("ä»»åŠ¡2");
queue.put("ä»»åŠ¡3");

// æ¶ˆè´¹è€…ï¼šå–å‡ºæ•°æ®ï¼ˆFIFOé¡ºåºï¼‰
String task = queue.take();
System.out.println("ğŸ“¥ å–å‡ºä»»åŠ¡ï¼š" + task);
```

**ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆDistributedPriorityQueueï¼‰**ï¼š
```java
// åˆ›å»ºä¼˜å…ˆçº§é˜Ÿåˆ—
DistributedPriorityQueue<String> priorityQueue = QueueBuilder
    .builder(client, null, serializer, "/queues/priority")
    .buildPriorityQueue(0);  // é»˜è®¤ä¼˜å…ˆçº§

// æ”¾å…¥ä¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡
priorityQueue.put("æ™®é€šä»»åŠ¡", 5);     // ä¼˜å…ˆçº§5
priorityQueue.put("ç´§æ€¥ä»»åŠ¡", 1);     // ä¼˜å…ˆçº§1ï¼ˆæœ€é«˜ï¼‰
priorityQueue.put("ä½ä¼˜ä»»åŠ¡", 10);    // ä¼˜å…ˆçº§10ï¼ˆæœ€ä½ï¼‰

// å–å‡ºæ—¶æŒ‰ä¼˜å…ˆçº§é¡ºåº
// è¾“å‡ºï¼šç´§æ€¥ä»»åŠ¡ â†’ æ™®é€šä»»åŠ¡ â†’ ä½ä¼˜ä»»åŠ¡
```

### 7.4 è·¯å¾„ç¼“å­˜ï¼ˆPathChildrenCacheï¼‰


**ç›‘å¬å­èŠ‚ç‚¹å˜åŒ–**ï¼š
```java
// åˆ›å»ºè·¯å¾„ç¼“å­˜ï¼Œç›‘å¬/configä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹
PathChildrenCache cache = new PathChildrenCache(
    client,
    "/config",
    true  // æ˜¯å¦ç¼“å­˜æ•°æ®
);

// æ·»åŠ ç›‘å¬å™¨
cache.getListenable().addListener(
    (client, event) -> {
        switch (event.getType()) {
            case CHILD_ADDED:
                System.out.println("â• æ–°å¢å­èŠ‚ç‚¹ï¼š" + 
                    event.getData().getPath());
                break;
                
            case CHILD_UPDATED:
                System.out.println("ğŸ”„ å­èŠ‚ç‚¹æ›´æ–°ï¼š" + 
                    event.getData().getPath());
                break;
                
            case CHILD_REMOVED:
                System.out.println("â– åˆ é™¤å­èŠ‚ç‚¹ï¼š" + 
                    event.getData().getPath());
                break;
        }
    }
);

// å¯åŠ¨ç¼“å­˜
cache.start(PathChildrenCache.StartMode.BUILD_INITIAL_CACHE);

// è·å–å½“å‰æ‰€æœ‰å­èŠ‚ç‚¹
List<ChildData> children = cache.getCurrentData();
for (ChildData child : children) {
    System.out.println("å­èŠ‚ç‚¹ï¼š" + child.getPath());
}
```

**åº”ç”¨åœºæ™¯**ï¼š
```
é…ç½®ä¸­å¿ƒï¼š
/config
  â”œâ”€ /config/db      â†’ æ•°æ®åº“é…ç½®
  â”œâ”€ /config/cache   â†’ ç¼“å­˜é…ç½®
  â””â”€ /config/redis   â†’ Redisé…ç½®

ç›‘å¬å˜åŒ–ï¼š
é…ç½®æ›´æ–° â†’ è‡ªåŠ¨æ„ŸçŸ¥ â†’ åº”ç”¨çƒ­æ›´æ–°

æœåŠ¡å‘ç°ï¼š
/services
  â”œâ”€ /services/user-service/node1
  â”œâ”€ /services/user-service/node2
  â””â”€ /services/order-service/node1

ç›‘å¬å˜åŒ–ï¼š
æœåŠ¡ä¸Šä¸‹çº¿ â†’ è‡ªåŠ¨æ›´æ–°æœåŠ¡åˆ—è¡¨
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Curatoræ˜¯ä»€ä¹ˆï¼šZookeeperçš„é«˜çº§å®¢æˆ·ç«¯æ¡†æ¶
ğŸ”¸ è§£å†³çš„é—®é¢˜ï¼šç®€åŒ–Zookeeperå¼€å‘ï¼Œæä¾›æœ€ä½³å®è·µ
ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½ï¼šè¿æ¥ç®¡ç†ã€é‡è¯•æœºåˆ¶ã€åˆ†å¸ƒå¼é”ã€Leaderé€‰ä¸¾
ğŸ”¸ ä½¿ç”¨ä¼˜åŠ¿ï¼šå¼€ç®±å³ç”¨ï¼Œç¨³å®šå¯é ï¼ŒåŠŸèƒ½ä¸°å¯Œ
```

### 8.2 å…³é”®çŸ¥è¯†ç‚¹å›é¡¾


**ğŸ”¹ å®¢æˆ·ç«¯ç®¡ç†**
```
åˆ›å»ºå®¢æˆ·ç«¯ï¼š
â”œâ”€ å·¥å‚æ–¹æ³•ï¼šç®€å•å¿«é€Ÿ
â”œâ”€ æ„å»ºå™¨ï¼šçµæ´»é…ç½®
â””â”€ å‘½åç©ºé—´ï¼šç»Ÿä¸€è·¯å¾„å‰ç¼€

è¿æ¥çŠ¶æ€ï¼š
â”œâ”€ CONNECTEDï¼šæ­£å¸¸å·¥ä½œ
â”œâ”€ SUSPENDEDï¼šä¸´æ—¶æ–­å¼€
â”œâ”€ RECONNECTEDï¼šé‡æ–°è¿æ¥
â””â”€ LOSTï¼šSessionè¿‡æœŸ

æœ€ä½³å®è·µï¼š
âœ… ä½¿ç”¨è¿æ¥ç›‘å¬å™¨
âœ… é…ç½®åˆç†è¶…æ—¶æ—¶é—´
âœ… ä½¿ç”¨try-finallyç¡®ä¿å…³é—­
```

**ğŸ”¹ é‡è¯•ç­–ç•¥**
```
ç­–ç•¥é€‰æ‹©ï¼š
â”œâ”€ RetryNTimesï¼šå›ºå®šé‡è¯•
â”œâ”€ ExponentialBackoffRetryï¼šæŒ‡æ•°é€€é¿
â”œâ”€ BoundedExponentialBackoffRetryï¼šæœ‰ç•ŒæŒ‡æ•°ï¼ˆæ¨èï¼‰
â””â”€ RetryForeverï¼šæ°¸ä¹…é‡è¯•ï¼ˆæ…ç”¨ï¼‰

é…ç½®åŸåˆ™ï¼š
â€¢ ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆæœ‰ç•ŒæŒ‡æ•°é€€é¿
â€¢ è®¾ç½®åˆç†çš„æœ€å¤§é‡è¯•æ¬¡æ•°
â€¢ é¿å…æ°¸ä¹…é˜»å¡
```

**ğŸ”¹ åˆ†å¸ƒå¼é”**
```
é”ç±»å‹ï¼š
â”œâ”€ InterProcessMutexï¼šå¯é‡å…¥äº’æ–¥é”ï¼ˆå¸¸ç”¨ï¼‰
â”œâ”€ InterProcessSemaphoreMutexï¼šä¸å¯é‡å…¥é”
â””â”€ InterProcessReadWriteLockï¼šè¯»å†™é”

ä½¿ç”¨è§„èŒƒï¼š
âœ… å¿…é¡»åœ¨finallyä¸­é‡Šæ”¾é”
âœ… è®¾ç½®è·å–é”çš„è¶…æ—¶æ—¶é—´
âœ… ç¼©å°é”çš„èŒƒå›´
âœ… è€ƒè™‘ä½¿ç”¨è¯»å†™é”ä¼˜åŒ–æ€§èƒ½

å®ç°åŸç†ï¼š
ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ + ç›‘å¬æœºåˆ¶ = å…¬å¹³é”
```

**ğŸ”¹ Leaderé€‰ä¸¾**
```
é€‰ä¸¾æ–¹å¼ï¼š
â”œâ”€ LeaderSelectorï¼šä¸»åŠ¨æ§åˆ¶å‹
â”‚   â””â”€ é€‚åˆå®šæ—¶ä»»åŠ¡
â””â”€ LeaderLatchï¼šè¢«åŠ¨ä¿æŒå‹
    â””â”€ é€‚åˆä¸»ä»æ¶æ„

å·¥ä½œæµç¨‹ï¼š
åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹ â†’ æœ€å°åºå·æˆä¸ºLeader
â†’ Leaderå¤±æ•ˆ â†’ è‡ªåŠ¨é‡æ–°é€‰ä¸¾

åº”ç”¨åœºæ™¯ï¼š
â€¢ å®šæ—¶ä»»åŠ¡è°ƒåº¦
â€¢ ä¸»ä»åˆ‡æ¢
â€¢ åˆ†å¸ƒå¼åè°ƒ
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**é€‚ç”¨åœºæ™¯åˆ¤æ–­**ï¼š
```
âœ… ä½¿ç”¨Curatorçš„åœºæ™¯ï¼š
â”œâ”€ éœ€è¦åˆ†å¸ƒå¼é”
â”œâ”€ éœ€è¦Leaderé€‰ä¸¾
â”œâ”€ éœ€è¦æœåŠ¡æ³¨å†Œå‘ç°
â”œâ”€ éœ€è¦é…ç½®ç®¡ç†
â””â”€ éœ€è¦åˆ†å¸ƒå¼åè°ƒ

âŒ ä¸é€‚ç”¨åœºæ™¯ï¼š
â”œâ”€ å•æœºåº”ç”¨
â”œâ”€ æ•°æ®é‡ç‰¹åˆ«å¤§ï¼ˆZookeeperä¸é€‚åˆï¼‰
â”œâ”€ é«˜é¢‘å†™å…¥ï¼ˆæ¯ç§’æ•°åƒæ¬¡ï¼‰
â””â”€ å¯¹å»¶è¿Ÿè¦æ±‚æé«˜ï¼ˆå¾®ç§’çº§ï¼‰
```

**æœ€ä½³å®è·µæ€»ç»“**ï¼š
```
è¿æ¥ç®¡ç†ï¼š
âœ… ä½¿ç”¨è¿æ¥æ± 
âœ… ç›‘å¬è¿æ¥çŠ¶æ€
âœ… è®¾ç½®åˆç†è¶…æ—¶

é”™è¯¯å¤„ç†ï¼š
âœ… é…ç½®é‡è¯•ç­–ç•¥
âœ… æ•è·å¹¶å¤„ç†å¼‚å¸¸
âœ… è®°å½•è¯¦ç»†æ—¥å¿—

æ€§èƒ½ä¼˜åŒ–ï¼š
âœ… ä½¿ç”¨å‘½åç©ºé—´éš”ç¦»
âœ… è¯»å†™é”æ›¿ä»£äº’æ–¥é”
âœ… ç¼“å­˜é¿å…é¢‘ç¹è®¿é—®

é«˜å¯ç”¨ï¼š
âœ… Zookeeperé›†ç¾¤éƒ¨ç½²
âœ… å®¢æˆ·ç«¯è¿æ¥å¤šä¸ªèŠ‚ç‚¹
âœ… ç›‘æ§å‘Šè­¦æœºåˆ¶
```

### 8.4 å¸¸è§é—®é¢˜è§£ç­”


**Q1ï¼šCuratorå’ŒåŸç”Ÿå®¢æˆ·ç«¯å¦‚ä½•é€‰æ‹©ï¼Ÿ**
```
é€‰Curatorï¼š
âœ… ç”Ÿäº§ç¯å¢ƒæ¨è
âœ… éœ€è¦åˆ†å¸ƒå¼é”ç­‰é«˜çº§åŠŸèƒ½
âœ… å›¢é˜Ÿç»éªŒä¸è¶³

é€‰åŸç”Ÿå®¢æˆ·ç«¯ï¼š
â€¢ åªéœ€è¦ç®€å•çš„è¯»å†™æ“ä½œ
â€¢ å¯¹æ¡†æ¶ä¾èµ–æœ‰ä¸¥æ ¼é™åˆ¶
â€¢ éœ€è¦æè‡´çš„æ€§èƒ½ä¼˜åŒ–
```

**Q2ï¼šåˆ†å¸ƒå¼é”ä¼šæœ‰æ€§èƒ½é—®é¢˜å—ï¼Ÿ**
```
æ€§èƒ½å½±å“ï¼š
â€¢ ç½‘ç»œå¼€é”€ï¼šä¸Zookeeperé€šä¿¡
â€¢ ç­‰å¾…æ—¶é—´ï¼šæ’é˜Ÿè·å–é”
â€¢ èŠ‚ç‚¹åˆ›å»ºï¼šä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºåˆ é™¤

ä¼˜åŒ–æ–¹æ¡ˆï¼š
âœ… ç¼©å°é”ç²’åº¦ï¼Œå‡å°‘æŒé”æ—¶é—´
âœ… ä½¿ç”¨è¯»å†™é”ï¼Œæé«˜å¹¶å‘åº¦
âœ… æœ¬åœ°ç¼“å­˜ï¼Œå‡å°‘é‡å¤è·å–
âœ… å¼‚æ­¥å¤„ç†ï¼Œé¿å…é˜»å¡
```

**Q3ï¼šLeaderé€‰ä¸¾å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
```
å¸¸è§åŸå› ï¼š
â€¢ ç½‘ç»œåˆ†åŒº
â€¢ Zookeeperé›†ç¾¤æ•…éšœ
â€¢ å®¢æˆ·ç«¯é…ç½®é”™è¯¯

å¤„ç†æ–¹æ¡ˆï¼š
âœ… é…ç½®é‡è¯•ç­–ç•¥
âœ… ç›‘å¬é€‰ä¸¾çŠ¶æ€
âœ… è®¾ç½®é™çº§ç­–ç•¥
âœ… å®Œå–„ç›‘æ§å‘Šè­¦
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- Curatorå°è£…Zookeeperï¼Œå¼€ç®±å³ç”¨å¾ˆæ–¹ä¾¿
- è¿æ¥ç®¡ç†è‡ªåŠ¨åŒ–ï¼Œé‡è¯•ç­–ç•¥è¦é…å¥½
- åˆ†å¸ƒå¼é”ä¿è¯å®‰å…¨ï¼Œfinallyé‡Šæ”¾ä¸èƒ½å¿˜
- Leaderé€‰ä¸¾åè°ƒå¥½ï¼Œé«˜å¯ç”¨æ€§æœ‰ä¿éšœ
- é«˜çº§åŠŸèƒ½å¾ˆä¸°å¯Œï¼ŒæŒ‰éœ€é€‰æ‹©æ•ˆæœä½³

---

> ğŸ“š **å­¦ä¹ å»ºè®®**ï¼šå…ˆæŒæ¡åŸºç¡€çš„å®¢æˆ·ç«¯ä½¿ç”¨å’Œåˆ†å¸ƒå¼é”ï¼Œå†å­¦ä¹ Leaderé€‰ä¸¾å’Œé«˜çº§åŠŸèƒ½ï¼Œæœ€åç»“åˆå®é™…é¡¹ç›®æ·±å…¥ç†è§£åŸç†å’Œæœ€ä½³å®è·µã€‚