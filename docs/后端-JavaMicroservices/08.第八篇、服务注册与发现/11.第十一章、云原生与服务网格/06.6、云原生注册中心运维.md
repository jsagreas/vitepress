---
title: 6ã€äº‘åŸç”Ÿæ³¨å†Œä¸­å¿ƒè¿ç»´
---
## ğŸ“š ç›®å½•

1. [è‡ªåŠ¨åŒ–éƒ¨ç½²](#1-è‡ªåŠ¨åŒ–éƒ¨ç½²)
2. [æ»šåŠ¨æ›´æ–°ç­–ç•¥](#2-æ»šåŠ¨æ›´æ–°ç­–ç•¥)
3. [å¥åº·æ£€æŸ¥é…ç½®](#3-å¥åº·æ£€æŸ¥é…ç½®)
4. [èµ„æºç›‘æ§å‘Šè­¦](#4-èµ„æºç›‘æ§å‘Šè­¦)
5. [æ—¥å¿—æ”¶é›†åˆ†æ](#5-æ—¥å¿—æ”¶é›†åˆ†æ)
6. [æ•…éšœè‡ªåŠ¨æ¢å¤](#6-æ•…éšœè‡ªåŠ¨æ¢å¤)
7. [å¼¹æ€§ä¼¸ç¼©é…ç½®](#7-å¼¹æ€§ä¼¸ç¼©é…ç½®)
8. [æˆæœ¬ä¼˜åŒ–ç­–ç•¥](#8-æˆæœ¬ä¼˜åŒ–ç­–ç•¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²


### 1.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–éƒ¨ç½²


**é€šä¿—ç†è§£**ï¼šå°±åƒä½ ç”¨æ‰‹æœºä¸€é”®å®‰è£…Appä¸€æ ·ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²å°±æ˜¯è®©æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚Nacosã€Eurekaï¼‰èƒ½å¤Ÿè‡ªåŠ¨å®‰è£…ã€é…ç½®ã€å¯åŠ¨ï¼Œä¸éœ€è¦äººå·¥ä¸€æ­¥æ­¥æ“ä½œã€‚

```
ä¼ ç»Ÿæ‰‹å·¥éƒ¨ç½²ï¼š
äººå·¥ç™»å½•æœåŠ¡å™¨ â†’ ä¸‹è½½å®‰è£…åŒ… â†’ è§£å‹é…ç½® â†’ å¯åŠ¨æœåŠ¡ â†’ æ£€æŸ¥çŠ¶æ€
é—®é¢˜ï¼šè´¹æ—¶è´¹åŠ›ï¼Œå®¹æ˜“å‡ºé”™ï¼Œéš¾ä»¥æ ‡å‡†åŒ–

è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼š
ä¸€æ¡å‘½ä»¤ â†’ è‡ªåŠ¨å®Œæˆæ‰€æœ‰æ­¥éª¤ â†’ éƒ¨ç½²å®Œæˆ
ä¼˜åŠ¿ï¼šå¿«é€Ÿã€å‡†ç¡®ã€å¯é‡å¤ã€æ ‡å‡†åŒ–
```

### 1.2 å®¹å™¨åŒ–éƒ¨ç½²æ–¹å¼


**ğŸ”¸ Dockerå®¹å™¨éƒ¨ç½²**

Dockerå°±åƒæ˜¯ä¸€ä¸ª"æ ‡å‡†åŒ–çš„åŒ…è£…ç›’"ï¼ŒæŠŠæ³¨å†Œä¸­å¿ƒåŠå…¶è¿è¡Œç¯å¢ƒæ‰“åŒ…åœ¨ä¸€èµ·ï¼Œåˆ°å“ªéƒ½èƒ½ç”¨ã€‚

```yaml
# Nacos Dockeréƒ¨ç½²ç¤ºä¾‹
version: '3'
services:
  nacos:
    image: nacos/nacos-server:latest
    container_name: nacos-server
    environment:
      - MODE=standalone          # å•æœºæ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒç”¨clusteré›†ç¾¤æ¨¡å¼ï¼‰
      - SPRING_DATASOURCE_PLATFORM=mysql  # ä½¿ç”¨MySQLå­˜å‚¨
      - MYSQL_SERVICE_HOST=mysql-host
      - MYSQL_SERVICE_PORT=3306
    ports:
      - "8848:8848"              # æ˜ å°„ç«¯å£
    volumes:
      - ./logs:/home/nacos/logs  # æ—¥å¿—æŒä¹…åŒ–
    restart: always              # è‡ªåŠ¨é‡å¯
```

**å…³é”®æ¦‚å¿µè§£é‡Š**ï¼š
- `image`ï¼šé•œåƒï¼Œç›¸å½“äºå®‰è£…åŒ…
- `environment`ï¼šç¯å¢ƒå˜é‡ï¼Œç”¨æ¥é…ç½®å‚æ•°
- `ports`ï¼šç«¯å£æ˜ å°„ï¼Œè®©å¤–éƒ¨èƒ½è®¿é—®
- `volumes`ï¼šæ•°æ®æŒä¹…åŒ–ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
- `restart: always`ï¼šå®¹å™¨æŒ‚äº†è‡ªåŠ¨é‡å¯

### 1.3 Kubernetesç¼–æ’éƒ¨ç½²


**ä»€ä¹ˆæ˜¯Kubernetesï¼ˆK8sï¼‰**ï¼šå¯ä»¥ç†è§£ä¸º"å®¹å™¨ç®¡å®¶"ï¼Œå¸®ä½ ç®¡ç†æˆç™¾ä¸Šåƒä¸ªDockerå®¹å™¨ï¼Œè‡ªåŠ¨è°ƒåº¦ã€ç›‘æ§ã€æ¢å¤ã€‚

**ğŸ”¸ éƒ¨ç½²é…ç½®æ–‡ä»¶ï¼ˆDeploymentï¼‰**

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nacos-deployment
  labels:
    app: nacos
spec:
  replicas: 3                    # è¿è¡Œ3ä¸ªå‰¯æœ¬ï¼ˆé«˜å¯ç”¨ï¼‰
  selector:
    matchLabels:
      app: nacos
  template:
    metadata:
      labels:
        app: nacos
    spec:
      containers:
      - name: nacos
        image: nacos/nacos-server:latest
        ports:
        - containerPort: 8848
        env:
        - name: MODE
          value: "cluster"       # é›†ç¾¤æ¨¡å¼
        resources:
          requests:              # æœ€å°‘éœ€è¦çš„èµ„æº
            memory: "1Gi"
            cpu: "500m"
          limits:                # æœ€å¤šä½¿ç”¨çš„èµ„æº
            memory: "2Gi"
            cpu: "1000m"
```

**é…ç½®è¯´æ˜**ï¼š
- `replicas: 3`ï¼šåŒæ—¶è¿è¡Œ3ä¸ªå®ä¾‹ï¼Œä»»ä½•ä¸€ä¸ªæŒ‚äº†ï¼Œå…¶ä»–ä¸¤ä¸ªç»§ç»­æœåŠ¡
- `resources`ï¼šèµ„æºé™åˆ¶ï¼Œé˜²æ­¢æŸä¸ªæœåŠ¡å ç”¨è¿‡å¤šèµ„æº
- `requests`ï¼šä¿è¯æœ€å°‘åˆ†é…çš„èµ„æº
- `limits`ï¼šæœ€å¤šèƒ½ç”¨çš„èµ„æºä¸Šé™

### 1.4 è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹


```
å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»£ç æäº¤    â”‚ â”€â”€â”€> â”‚   è‡ªåŠ¨æ„å»º    â”‚ â”€â”€â”€> â”‚  è‡ªåŠ¨æµ‹è¯•   â”‚
â”‚  (Git Push) â”‚      â”‚ (Jenkins/CI) â”‚      â”‚  (å•å…ƒæµ‹è¯•)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² â”‚ <â”€â”€â”€ â”‚ é¢„å‘å¸ƒç¯å¢ƒ   â”‚ <â”€â”€â”€ â”‚ æ‰“åŒ…é•œåƒ    â”‚
â”‚   (K8s)     â”‚      â”‚   (æµ‹è¯•)     â”‚      â”‚  (Docker)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ ä½¿ç”¨Helmç®€åŒ–éƒ¨ç½²**

Helmå°±åƒæ˜¯K8sçš„"åº”ç”¨å•†åº—"ï¼Œä¸€æ¡å‘½ä»¤å®‰è£…æ•´å¥—åº”ç”¨ã€‚

```bash
# æ·»åŠ Nacosä»“åº“
helm repo add nacos https://nacos.io/helm-chart

# å®‰è£…Nacosé›†ç¾¤ï¼ˆä¸€æ¡å‘½ä»¤æå®šï¼‰
helm install my-nacos nacos/nacos \
  --set global.mode=cluster \
  --set replicaCount=3 \
  --set persistence.enabled=true

# å‡çº§ç‰ˆæœ¬
helm upgrade my-nacos nacos/nacos --version 2.0.0
```

---

## 2. ğŸ”„ æ»šåŠ¨æ›´æ–°ç­–ç•¥


### 2.1 ä»€ä¹ˆæ˜¯æ»šåŠ¨æ›´æ–°


**ç”Ÿæ´»ä¾‹å­**ï¼šå°±åƒç«è½¦æ¢è½®å­ï¼Œä¸èƒ½è®©ç«è½¦åœä¸‹æ¥å†æ¢ï¼Œè€Œæ˜¯ä¸€èŠ‚è½¦å¢ä¸€èŠ‚è½¦å¢æ¢ï¼Œä¿è¯ç«è½¦ä¸€ç›´åœ¨è·‘ã€‚

**æ»šåŠ¨æ›´æ–°åŸç†**ï¼š
```
æ—§ç‰ˆæœ¬ï¼š[V1] [V1] [V1]  â† 3ä¸ªå®ä¾‹éƒ½æ˜¯æ—§ç‰ˆæœ¬

æ›´æ–°ä¸­ï¼š[V2] [V1] [V1]  â† å…ˆæ›´æ–°1ä¸ª
       [V2] [V2] [V1]  â† å†æ›´æ–°1ä¸ª
       [V2] [V2] [V2]  â† æœ€åå…¨éƒ¨æ›´æ–°å®Œæˆ

æ•´ä¸ªè¿‡ç¨‹æœåŠ¡ä¸ä¸­æ–­ï¼
```

### 2.2 K8sæ»šåŠ¨æ›´æ–°é…ç½®


```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nacos-deployment
spec:
  replicas: 3
  strategy:
    type: RollingUpdate           # æ»šåŠ¨æ›´æ–°ç±»å‹
    rollingUpdate:
      maxSurge: 1                 # æœ€å¤šå¤šåˆ›å»º1ä¸ªæ–°å®ä¾‹
      maxUnavailable: 0           # ä¸å…è®¸æœ‰å®ä¾‹ä¸å¯ç”¨
  template:
    spec:
      containers:
      - name: nacos
        image: nacos/nacos-server:v2.2.0
        readinessProbe:           # å°±ç»ªæ£€æŸ¥
          httpGet:
            path: /nacos/v1/console/health/readiness
            port: 8848
          initialDelaySeconds: 30 # å¯åŠ¨å30ç§’å¼€å§‹æ£€æŸ¥
          periodSeconds: 10       # æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡
```

**å‚æ•°è¯¦è§£**ï¼š
- `maxSurge: 1`ï¼šæ›´æ–°æ—¶æœ€å¤šå¤š1ä¸ªå®ä¾‹ï¼ˆ3ä¸ªå˜4ä¸ªï¼Œå†åˆ æ—§çš„ï¼‰
- `maxUnavailable: 0`ï¼šä¿è¯å§‹ç»ˆæœ‰è¶³å¤Ÿå®ä¾‹åœ¨è¿è¡Œ
- `readinessProbe`ï¼šæ–°å®ä¾‹åªæœ‰å¥åº·æ£€æŸ¥é€šè¿‡æ‰æ¥æ”¶æµé‡

### 2.3 æ›´æ–°æ­¥éª¤ä¸éªŒè¯


**ğŸ”¸ æ‰§è¡Œæ›´æ–°**

```bash
# 1. æ›´æ–°é•œåƒç‰ˆæœ¬
kubectl set image deployment/nacos-deployment \
  nacos=nacos/nacos-server:v2.2.0

# 2. æŸ¥çœ‹æ›´æ–°è¿›åº¦
kubectl rollout status deployment/nacos-deployment

# è¾“å‡ºç¤ºä¾‹ï¼š
# Waiting for deployment "nacos-deployment" rollout to finish: 1 out of 3 new replicas have been updated...
# Waiting for deployment "nacos-deployment" rollout to finish: 2 out of 3 new replicas have been updated...
# deployment "nacos-deployment" successfully rolled out
```

**ğŸ”¸ æ›´æ–°ç­–ç•¥å¯¹æ¯”**

| ç­–ç•¥ç±»å‹ | **æ›´æ–°æ–¹å¼** | **æœåŠ¡ä¸­æ–­** | **èµ„æºå ç”¨** | **å›æ»šé€Ÿåº¦** |
|---------|------------|------------|------------|------------|
| **æ»šåŠ¨æ›´æ–°** | `é€ä¸ªæ›¿æ¢å®ä¾‹` | `æ— ä¸­æ–­` | `ç¨é«˜ï¼ˆä¸´æ—¶å¤šå®ä¾‹ï¼‰` | `å¿«é€Ÿ` |
| **é‡å»ºæ›´æ–°** | `å…ˆåˆ é™¤å†åˆ›å»º` | `æœ‰ä¸­æ–­` | `ä½ï¼ˆå•æ‰¹æ¬¡ï¼‰` | `è¾ƒæ…¢` |
| **è“ç»¿éƒ¨ç½²** | `æ–°æ—§ç¯å¢ƒå¹¶å­˜` | `æ— ä¸­æ–­` | `é«˜ï¼ˆåŒå€èµ„æºï¼‰` | `æå¿«` |
| **é‡‘ä¸é›€å‘å¸ƒ** | `ç°åº¦é€æ­¥æ”¾é‡` | `æ— ä¸­æ–­` | `ä¸­ç­‰` | `å¯æ§` |

### 2.4 å›æ»šæœºåˆ¶


**ä¸ºä»€ä¹ˆéœ€è¦å›æ»š**ï¼šæ–°ç‰ˆæœ¬å‡ºé—®é¢˜äº†ï¼Œå¿«é€Ÿæ¢å¤åˆ°æ—§ç‰ˆæœ¬ã€‚

```bash
# æŸ¥çœ‹å†å²ç‰ˆæœ¬
kubectl rollout history deployment/nacos-deployment

# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
kubectl rollout undo deployment/nacos-deployment

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
kubectl rollout undo deployment/nacos-deployment --to-revision=2

# æš‚åœæ›´æ–°ï¼ˆå‘ç°é—®é¢˜æ—¶ï¼‰
kubectl rollout pause deployment/nacos-deployment

# æ¢å¤æ›´æ–°
kubectl rollout resume deployment/nacos-deployment
```

---

## 3. ğŸ¥ å¥åº·æ£€æŸ¥é…ç½®


### 3.1 å¥åº·æ£€æŸ¥çš„é‡è¦æ€§


**é€šä¿—è§£é‡Š**ï¼šå°±åƒå®šæœŸä½“æ£€ï¼ŒåŠæ—¶å‘ç°æœåŠ¡æ˜¯å¦"ç”Ÿç—…"ï¼Œç—…äº†å°±ä¸è®©å®ƒæ¥å¾…å®¢æˆ·ã€‚

**å¥åº·æ£€æŸ¥ç±»å‹**ï¼š

```
å­˜æ´»æ£€æŸ¥ï¼ˆLiveness Probeï¼‰ï¼š
ä½œç”¨ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦è¿˜æ´»ç€
ä¸é€šè¿‡ï¼šé‡å¯å®¹å™¨
ä¾‹å­ï¼šå¿ƒè·³æ£€æµ‹

å°±ç»ªæ£€æŸ¥ï¼ˆReadiness Probeï¼‰ï¼š
ä½œç”¨ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶è¯·æ±‚
ä¸é€šè¿‡ï¼šç§»é™¤æµé‡ï¼Œä½†ä¸é‡å¯
ä¾‹å­ï¼šæ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸

å¯åŠ¨æ£€æŸ¥ï¼ˆStartup Probeï¼‰ï¼š
ä½œç”¨ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨å®Œæˆ
ä¸é€šè¿‡ï¼šç»§ç»­ç­‰å¾…æˆ–é‡å¯
ä¾‹å­ï¼šåº”ç”¨åˆå§‹åŒ–å®Œæˆæ£€æŸ¥
```

### 3.2 å¥åº·æ£€æŸ¥é…ç½®å®ä¾‹


**ğŸ”¸ HTTPå¥åº·æ£€æŸ¥**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nacos-pod
spec:
  containers:
  - name: nacos
    image: nacos/nacos-server:latest
    
    # å­˜æ´»æ£€æŸ¥ï¼šæœåŠ¡æ˜¯å¦è¿˜æ´»ç€
    livenessProbe:
      httpGet:
        path: /nacos/actuator/health
        port: 8848
      initialDelaySeconds: 60    # å¯åŠ¨60ç§’åå¼€å§‹æ£€æŸ¥
      periodSeconds: 10          # æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡
      timeoutSeconds: 5          # 5ç§’è¶…æ—¶
      failureThreshold: 3        # è¿ç»­å¤±è´¥3æ¬¡æ‰åˆ¤å®šä¸ºå¤±è´¥
    
    # å°±ç»ªæ£€æŸ¥ï¼šæ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡
    readinessProbe:
      httpGet:
        path: /nacos/v1/console/health/readiness
        port: 8848
      initialDelaySeconds: 30
      periodSeconds: 5
      successThreshold: 1        # æˆåŠŸ1æ¬¡å³å¯
      failureThreshold: 2        # å¤±è´¥2æ¬¡ç§»é™¤æµé‡
```

**é…ç½®å‚æ•°è¯´æ˜**ï¼š
- `initialDelaySeconds`ï¼šå®¹å™¨å¯åŠ¨åå¤šä¹…å¼€å§‹æ£€æŸ¥ï¼ˆç»™æœåŠ¡å¯åŠ¨æ—¶é—´ï¼‰
- `periodSeconds`ï¼šæ£€æŸ¥é—´éš”
- `timeoutSeconds`ï¼šå•æ¬¡æ£€æŸ¥è¶…æ—¶æ—¶é—´
- `failureThreshold`ï¼šè¿ç»­å¤±è´¥å¤šå°‘æ¬¡ç®—çœŸæ­£å¤±è´¥
- `successThreshold`ï¼šè¿ç»­æˆåŠŸå¤šå°‘æ¬¡ç®—æ¢å¤

**ğŸ”¸ TCPç«¯å£æ£€æŸ¥**

```yaml
livenessProbe:
  tcpSocket:
    port: 8848
  initialDelaySeconds: 30
  periodSeconds: 10
```

**é€‚ç”¨åœºæ™¯**ï¼šä¸æä¾›HTTPæ¥å£çš„æœåŠ¡ï¼Œåªè¦ç«¯å£èƒ½è¿é€šå°±ç®—å¥åº·ã€‚

**ğŸ”¸ å‘½ä»¤æ‰§è¡Œæ£€æŸ¥**

```yaml
livenessProbe:
  exec:
    command:
    - /bin/sh
    - -c
    - "ps aux | grep nacos | grep -v grep"
  initialDelaySeconds: 30
  periodSeconds: 10
```

**é€‚ç”¨åœºæ™¯**ï¼šè‡ªå®šä¹‰å¤æ‚æ£€æŸ¥é€»è¾‘ã€‚

### 3.3 å¥åº·æ£€æŸ¥æœ€ä½³å®è·µ


**âš¡ å®è·µå»ºè®®**

| æ£€æŸ¥ç±»å‹ | **æ¨èé…ç½®** | **æ³¨æ„äº‹é¡¹** |
|---------|------------|------------|
| **å­˜æ´»æ£€æŸ¥** | `åˆå§‹å»¶è¿Ÿ60sï¼Œé—´éš”10s` | `ä¸è¦æ£€æŸ¥ä¾èµ–æœåŠ¡ï¼Œåªæ£€æŸ¥è‡ªèº«` |
| **å°±ç»ªæ£€æŸ¥** | `åˆå§‹å»¶è¿Ÿ30sï¼Œé—´éš”5s` | `å¯ä»¥æ£€æŸ¥ä¾èµ–ï¼ˆå¦‚æ•°æ®åº“ï¼‰` |
| **è¶…æ—¶æ—¶é—´** | `3-5ç§’` | `ä¸å®œè¿‡é•¿ï¼Œå½±å“æ•…éšœå‘ç°é€Ÿåº¦` |
| **å¤±è´¥é˜ˆå€¼** | `3æ¬¡` | `é¿å…å¶å‘æŠ–åŠ¨å¯¼è‡´è¯¯åˆ¤` |

**ğŸ”¸ ç›‘æ§æ£€æŸ¥çŠ¶æ€**

```bash
# æŸ¥çœ‹Podå¥åº·çŠ¶æ€
kubectl describe pod nacos-pod | grep -A 10 "Liveness\|Readiness"

# æŸ¥çœ‹æ£€æŸ¥å¤±è´¥äº‹ä»¶
kubectl get events --field-selector involvedObject.name=nacos-pod
```

---

## 4. ğŸ“Š èµ„æºç›‘æ§å‘Šè­¦


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§


**ç”Ÿæ´»ä¾‹å­**ï¼šå°±åƒæ±½è½¦ä»ªè¡¨ç›˜ï¼Œå®æ—¶æ˜¾ç¤ºæ²¹é‡ã€é€Ÿåº¦ã€æ¸©åº¦ï¼Œå‡ºé—®é¢˜ç«‹åˆ»æŠ¥è­¦ã€‚

**ç›‘æ§çš„æ ¸å¿ƒç›®æ ‡**ï¼š
- âœ… åŠæ—¶å‘ç°é—®é¢˜ï¼ˆCPUé£™å‡ã€å†…å­˜æ³„æ¼ï¼‰
- âœ… åˆ†ææ€§èƒ½è¶‹åŠ¿ï¼ˆè®¿é—®é‡å¢é•¿ï¼‰
- âœ… å®¹é‡è§„åˆ’ï¼ˆæå‰æ‰©å®¹ï¼‰
- âœ… æ•…éšœå®šä½ï¼ˆå¿«é€Ÿæ’æŸ¥ï¼‰

### 4.2 ç›‘æ§æŒ‡æ ‡ä½“ç³»


**ğŸ”¸ å››ä¸ªé»„é‡‘æŒ‡æ ‡ï¼ˆå¿…é¡»ç›‘æ§ï¼‰**

```
1. å»¶è¿Ÿï¼ˆLatencyï¼‰
   - æœåŠ¡å“åº”æ—¶é—´
   - æ³¨å†Œ/å‘ç°æ¥å£è€—æ—¶
   
2. æµé‡ï¼ˆTrafficï¼‰
   - æ¯ç§’è¯·æ±‚æ•°ï¼ˆQPSï¼‰
   - æœåŠ¡æ³¨å†Œæ•°é‡
   
3. é”™è¯¯ï¼ˆErrorsï¼‰
   - é”™è¯¯ç‡
   - å¤±è´¥æ¬¡æ•°
   
4. é¥±å’Œåº¦ï¼ˆSaturationï¼‰
   - CPUä½¿ç”¨ç‡
   - å†…å­˜ä½¿ç”¨ç‡
   - ç½‘ç»œå¸¦å®½
```

**ğŸ”¸ æ³¨å†Œä¸­å¿ƒä¸“é¡¹æŒ‡æ ‡**

| æŒ‡æ ‡ç±»åˆ« | **å…·ä½“æŒ‡æ ‡** | **å‘Šè­¦é˜ˆå€¼** |
|---------|------------|------------|
| **æœåŠ¡å®ä¾‹** | `æ³¨å†ŒæœåŠ¡æ•°é‡` | `çªå¢/éª¤å‡ > 20%` |
| **é›†ç¾¤å¥åº·** | `èŠ‚ç‚¹åœ¨çº¿æ•°é‡` | `< æ³•å®šèŠ‚ç‚¹æ•°` |
| **æ€§èƒ½æŒ‡æ ‡** | `æ¥å£å“åº”æ—¶é—´` | `> 500ms` |
| **èµ„æºä½¿ç”¨** | `å†…å­˜ä½¿ç”¨ç‡` | `> 80%` |
| **ç½‘ç»œé€šä¿¡** | `å¿ƒè·³å»¶è¿Ÿ` | `> 3s` |

### 4.3 Prometheusç›‘æ§å®ç°


**Prometheusæ˜¯ä»€ä¹ˆ**ï¼šå¼€æºçš„ç›‘æ§ç³»ç»Ÿï¼Œä¸“é—¨æ”¶é›†ã€å­˜å‚¨ã€æŸ¥è¯¢æ—¶åºæ•°æ®ã€‚

**ğŸ”¸ ç›‘æ§æ¶æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NacosæœåŠ¡   â”‚â”€â”€â”€â”€>â”‚ Prometheus   â”‚â”€â”€â”€â”€>â”‚  Grafana    â”‚
â”‚ (æš´éœ²æŒ‡æ ‡)   â”‚     â”‚  (é‡‡é›†å­˜å‚¨)   â”‚     â”‚  (å¯è§†åŒ–)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ AlertManager â”‚
                    â”‚   (å‘Šè­¦)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ NacosæŒ‡æ ‡æš´éœ²**

```yaml
# application.propertiesé…ç½®
management.endpoints.web.exposure.include=*
management.metrics.export.prometheus.enabled=true
management.endpoint.prometheus.enabled=true
```

**ğŸ”¸ Prometheusé‡‡é›†é…ç½®**

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'nacos'
    metrics_path: '/nacos/actuator/prometheus'
    static_configs:
      - targets: ['nacos-server:8848']
    scrape_interval: 15s          # æ¯15ç§’é‡‡é›†ä¸€æ¬¡
```

### 4.4 å‘Šè­¦è§„åˆ™é…ç½®


**ğŸ”¸ Prometheuså‘Šè­¦è§„åˆ™**

```yaml
# alert-rules.yml
groups:
  - name: nacos-alerts
    interval: 30s
    rules:
      # CPUä½¿ç”¨ç‡å‘Šè­¦
      - alert: NacosCPUHigh
        expr: rate(process_cpu_usage[5m]) > 0.8
        for: 5m                   # æŒç»­5åˆ†é’Ÿæ‰å‘Šè­¦
        labels:
          severity: warning
        annotations:
          summary: "Nacos CPUä½¿ç”¨ç‡è¿‡é«˜"
          description: "å®ä¾‹ {{ $labels.instance }} CPUä½¿ç”¨ç‡ {{ $value }}%"
      
      # å†…å­˜ä½¿ç”¨å‘Šè­¦
      - alert: NacosMemoryHigh
        expr: jvm_memory_used_bytes / jvm_memory_max_bytes > 0.85
        for: 3m
        labels:
          severity: critical
        annotations:
          summary: "Nacoså†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
      
      # æœåŠ¡æ³¨å†Œæ•°å¼‚å¸¸
      - alert: ServiceCountAbnormal
        expr: abs(delta(nacos_monitor{name="serviceCount"}[5m])) > 10
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "æœåŠ¡æ³¨å†Œæ•°é‡å¼‚å¸¸å˜åŒ–"
```

**å‘Šè­¦è§„åˆ™è§£é‡Š**ï¼š
- `expr`ï¼šå‘Šè­¦æ¡ä»¶è¡¨è¾¾å¼
- `for`ï¼šæŒç»­å¤šä¹…æ‰çœŸæ­£å‘Šè­¦ï¼ˆé¿å…è¯¯æŠ¥ï¼‰
- `severity`ï¼šå‘Šè­¦çº§åˆ«ï¼ˆwarning/criticalï¼‰
- `annotations`ï¼šå‘Šè­¦è¯¦ç»†ä¿¡æ¯

**ğŸ”¸ å‘Šè­¦é€šçŸ¥é…ç½®**

```yaml
# alertmanager.yml
route:
  group_by: ['alertname', 'cluster']
  group_wait: 30s              # ç­‰å¾…30ç§’æ”¶é›†åŒç»„å‘Šè­¦
  group_interval: 5m           # åŒç»„å‘Šè­¦5åˆ†é’Ÿå‘ä¸€æ¬¡
  repeat_interval: 12h         # é‡å¤å‘Šè­¦é—´éš”
  receiver: 'default-receiver'

receivers:
  - name: 'default-receiver'
    webhook_configs:
      - url: 'http://alertmanager-webhook/api/alerts'
    email_configs:
      - to: 'ops@company.com'
        from: 'alert@company.com'
        smarthost: 'smtp.company.com:587'
```

---

## 5. ğŸ“ æ—¥å¿—æ”¶é›†åˆ†æ


### 5.1 æ—¥å¿—çš„é‡è¦æ€§


**é€šä¿—ç†è§£**ï¼šæ—¥å¿—å°±åƒ"é»‘åŒ£å­"ï¼Œè®°å½•ç³»ç»Ÿå‘ç”Ÿçš„ä¸€åˆ‡ï¼Œå‡ºé—®é¢˜æ—¶ç”¨æ¥"ç ´æ¡ˆ"ã€‚

**æ—¥å¿—çš„ä½œç”¨**ï¼š
- ğŸ” é—®é¢˜æ’æŸ¥ï¼šæ‰¾åˆ°é”™è¯¯åŸå› 
- ğŸ“Š è¡Œä¸ºåˆ†æï¼šåˆ†æç”¨æˆ·è¡Œä¸º
- ğŸ” å®‰å…¨å®¡è®¡ï¼šè¿½è¸ªæ“ä½œè®°å½•
- ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–ï¼šå‘ç°æ€§èƒ½ç“¶é¢ˆ

### 5.2 æ—¥å¿—æ”¶é›†æ¶æ„ï¼ˆELK/EFKï¼‰


**ä»€ä¹ˆæ˜¯ELK**ï¼š
- **E**lasticsearchï¼šå­˜å‚¨å’Œæœç´¢æ—¥å¿—
- **L**ogstash æˆ– **F**luentdï¼šæ”¶é›†å’Œå¤„ç†æ—¥å¿—
- **K**ibanaï¼šå¯è§†åŒ–å±•ç¤ºæ—¥å¿—

```
æ—¥å¿—æ”¶é›†æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nacoså®¹å™¨   â”‚ â”€â”€â”€> â”‚   Fluentd    â”‚ â”€â”€â”€> â”‚Elasticsearchâ”‚
â”‚  (è¾“å‡ºæ—¥å¿—)  â”‚      â”‚ (æ”¶é›†&è¿‡æ»¤)   â”‚      â”‚  (å­˜å‚¨ç´¢å¼•)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â†“
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚   Kibana    â”‚
                                            â”‚  (æ—¥å¿—æŸ¥è¯¢)  â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Fluentdæ—¥å¿—æ”¶é›†é…ç½®


**ğŸ”¸ Fluentdé…ç½®ç¤ºä¾‹**

```xml
# fluentdé…ç½®æ–‡ä»¶
<source>
  @type tail                         # ç›‘å¬æ–‡ä»¶å˜åŒ–
  path /var/log/nacos/nacos.log     # æ—¥å¿—æ–‡ä»¶è·¯å¾„
  pos_file /var/log/nacos/nacos.log.pos
  tag nacos.app                      # æ—¥å¿—æ ‡ç­¾
  <parse>
    @type multiline                  # å¤šè¡Œæ—¥å¿—å¤„ç†
    format_firstline /\d{4}-\d{2}-\d{2}/
    format1 /^(?<time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}) (?<level>[^ ]*) (?<message>.*)/
  </parse>
</source>

# æ—¥å¿—è¿‡æ»¤å’Œå¢å¼º
<filter nacos.**>
  @type record_transformer
  <record>
    hostname "#{Socket.gethostname}"
    service "nacos"
    environment "production"
  </record>
</filter>

# è¾“å‡ºåˆ°Elasticsearch
<match nacos.**>
  @type elasticsearch
  host elasticsearch-service
  port 9200
  index_name nacos-logs
  type_name _doc
</match>
```

**é…ç½®è¯´æ˜**ï¼š
- `@type tail`ï¼šå®æ—¶ç›‘å¬æ—¥å¿—æ–‡ä»¶
- `multiline`ï¼šå¤„ç†Javaå¤šè¡Œå¼‚å¸¸å †æ ˆ
- `record_transformer`ï¼šç»™æ—¥å¿—æ·»åŠ é¢å¤–ä¿¡æ¯
- `index_name`ï¼šESç´¢å¼•åç§°ï¼ŒæŒ‰å¤©åˆ†å‰²ï¼š`nacos-logs-2025-09-23`

### 5.4 æ—¥å¿—åˆ†æä¸æŸ¥è¯¢


**ğŸ”¸ KibanaæŸ¥è¯¢ç¤ºä¾‹**

```
# æŸ¥è¯¢æœ€è¿‘1å°æ—¶çš„ERRORæ—¥å¿—
level: ERROR AND @timestamp: [now-1h TO now]

# æŸ¥è¯¢ç‰¹å®šæœåŠ¡çš„å¼‚å¸¸
service: "user-service" AND message: *exception*

# æŸ¥è¯¢æ…¢è¯·æ±‚ï¼ˆå“åº”æ—¶é—´>1ç§’ï¼‰
duration: >1000 AND path: "/nacos/v1/ns/instance"

# ç»Ÿè®¡é”™è¯¯ç±»å‹åˆ†å¸ƒï¼ˆèšåˆæŸ¥è¯¢ï¼‰
æŒ‰ error_type å­—æ®µèšåˆï¼Œæ˜¾ç¤ºå‰10ä¸ªé”™è¯¯ç±»å‹
```

**ğŸ”¸ æ—¥å¿—å‘Šè­¦è§„åˆ™**

| æ—¥å¿—ç±»å‹ | **å‘Šè­¦æ¡ä»¶** | **å¤„ç†åŠ¨ä½œ** |
|---------|------------|------------|
| **ERRORæ—¥å¿—** | `5åˆ†é’Ÿå†…>50æ¡` | `å‘é€å‘Šè­¦é€šçŸ¥` |
| **OutOfMemory** | `å‡ºç°1æ¬¡` | `ç«‹å³å‘Šè­¦+è‡ªåŠ¨é‡å¯` |
| **æ…¢è¯·æ±‚** | `1åˆ†é’Ÿå†…>10ä¸ª` | `æ€§èƒ½å‘Šè­¦` |
| **è¿æ¥å¤±è´¥** | `5åˆ†é’Ÿå†…>20æ¬¡` | `ç½‘ç»œå‘Šè­¦` |

### 5.5 æ—¥å¿—ä¼˜åŒ–å»ºè®®


**âš¡ æœ€ä½³å®è·µ**

```
1. æ—¥å¿—çº§åˆ«ï¼š
   - ç”Ÿäº§ç¯å¢ƒï¼šINFOåŠä»¥ä¸Š
   - å¼€å‘ç¯å¢ƒï¼šDEBUG
   - é¿å…è¿‡å¤šDEBUGæ—¥å¿—å½±å“æ€§èƒ½

2. æ—¥å¿—æ ¼å¼ï¼š
   - ç»Ÿä¸€JSONæ ¼å¼ï¼Œä¾¿äºè§£æ
   - åŒ…å«ï¼šæ—¶é—´ã€çº§åˆ«ã€çº¿ç¨‹ã€ç±»åã€æ¶ˆæ¯

3. æ—¥å¿—è½®è½¬ï¼š
   - æŒ‰å¤©æˆ–æŒ‰å¤§å°åˆ‡å‰²
   - è‡ªåŠ¨å‹ç¼©å†å²æ—¥å¿—
   - å®šæœŸæ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™30å¤©ï¼‰

4. æ•æ„Ÿä¿¡æ¯ï¼š
   - ä¸è®°å½•å¯†ç ã€Tokenç­‰
   - è„±æ•å¤„ç†æ‰‹æœºå·ã€èº«ä»½è¯
```

---

## 6. ğŸ›¡ï¸ æ•…éšœè‡ªåŠ¨æ¢å¤


### 6.1 æ•…éšœæ¢å¤æœºåˆ¶


**é€šä¿—ç†è§£**ï¼šå°±åƒæ±½è½¦çš„å¤‡ç”¨è½®èƒï¼Œä¸»è½®èƒçˆ†äº†è‡ªåŠ¨æ¢ä¸Šå¤‡èƒç»§ç»­è·‘ã€‚

**æ•…éšœæ¢å¤å±‚çº§**ï¼š

```
è¿›ç¨‹çº§æ¢å¤ï¼š
åº”ç”¨è¿›ç¨‹å´©æºƒ â†’ å®¹å™¨è‡ªåŠ¨é‡å¯ â†’ æ¢å¤æœåŠ¡
æ¢å¤æ—¶é—´ï¼šç§’çº§

å®¹å™¨çº§æ¢å¤ï¼š
å®¹å™¨å¼‚å¸¸é€€å‡º â†’ K8sé‡æ–°æ‹‰èµ·å®¹å™¨ â†’ æ¢å¤æœåŠ¡
æ¢å¤æ—¶é—´ï¼š10-30ç§’

èŠ‚ç‚¹çº§æ¢å¤ï¼š
ç‰©ç†èŠ‚ç‚¹å®•æœº â†’ Podè°ƒåº¦åˆ°å…¶ä»–èŠ‚ç‚¹ â†’ æ¢å¤æœåŠ¡
æ¢å¤æ—¶é—´ï¼š1-3åˆ†é’Ÿ
```

### 6.2 K8sè‡ªæ„ˆèƒ½åŠ›


**ğŸ”¸ Podè‡ªåŠ¨é‡å¯ç­–ç•¥**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nacos-pod
spec:
  restartPolicy: Always        # é‡å¯ç­–ç•¥
  # Always: æ€»æ˜¯é‡å¯ï¼ˆé»˜è®¤ï¼‰
  # OnFailure: å¤±è´¥æ—¶é‡å¯
  # Never: ä»ä¸é‡å¯
  
  containers:
  - name: nacos
    image: nacos/nacos-server:latest
    livenessProbe:
      httpGet:
        path: /nacos/actuator/health
        port: 8848
      failureThreshold: 3      # å¤±è´¥3æ¬¡è§¦å‘é‡å¯
```

**é‡å¯ç­–ç•¥å¯¹æ¯”**ï¼š

| ç­–ç•¥ | **é€‚ç”¨åœºæ™¯** | **é‡å¯æ¡ä»¶** |
|------|------------|------------|
| **Always** | `é•¿æœŸè¿è¡Œçš„æœåŠ¡` | `ä»»ä½•é€€å‡ºéƒ½é‡å¯` |
| **OnFailure** | `æ‰¹å¤„ç†ä»»åŠ¡` | `é0é€€å‡ºç æ‰é‡å¯` |
| **Never** | `ä¸€æ¬¡æ€§ä»»åŠ¡` | `ä¸é‡å¯` |

**ğŸ”¸ Podé©±é€ä¸é‡æ–°è°ƒåº¦**

```yaml
apiVersion: policy/v1
kind: PodDisruptionBudget      # Podä¸­æ–­é¢„ç®—
metadata:
  name: nacos-pdb
spec:
  minAvailable: 2              # è‡³å°‘ä¿æŒ2ä¸ªPodå¯ç”¨
  selector:
    matchLabels:
      app: nacos
```

**ä½œç”¨**ï¼šèŠ‚ç‚¹ç»´æŠ¤æ—¶ï¼ŒK8sä¸ä¼šåŒæ—¶é©±é€å¤ªå¤šPodï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§ã€‚

### 6.3 æ•°æ®æŒä¹…åŒ–ä¸æ¢å¤


**ğŸ”¸ æ•°æ®æŒä¹…åŒ–é…ç½®**

```yaml
apiVersion: v1
kind: PersistentVolumeClaim    # æŒä¹…åŒ–å­˜å‚¨å£°æ˜
metadata:
  name: nacos-data-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi            # ç”³è¯·20GBå­˜å‚¨
  storageClassName: fast-ssd   # ä½¿ç”¨SSDå­˜å‚¨

---
apiVersion: apps/v1
kind: StatefulSet              # æœ‰çŠ¶æ€åº”ç”¨
metadata:
  name: nacos
spec:
  serviceName: nacos-headless
  replicas: 3
  template:
    spec:
      containers:
      - name: nacos
        volumeMounts:
        - name: data
          mountPath: /home/nacos/data   # æ•°æ®ç›®å½•
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 20Gi
```

**ä¸ºä»€ä¹ˆç”¨StatefulSet**ï¼š
- ç¨³å®šçš„ç½‘ç»œæ ‡è¯†ï¼ˆPodåç§°å›ºå®šï¼‰
- æŒä¹…åŒ–å­˜å‚¨ç»‘å®š
- æœ‰åºéƒ¨ç½²å’Œæ‰©å±•

### 6.4 å¤‡ä»½æ¢å¤ç­–ç•¥


**ğŸ”¸ è‡ªåŠ¨å¤‡ä»½é…ç½®**

```yaml
apiVersion: batch/v1
kind: CronJob                  # å®šæ—¶ä»»åŠ¡
metadata:
  name: nacos-backup
spec:
  schedule: "0 2 * * *"        # æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: backup
            image: mysql:8.0
            command:
            - /bin/sh
            - -c
            - |
              mysqldump -h mysql-host -u root -p${MYSQL_PASSWORD} \
                nacos > /backup/nacos-$(date +%Y%m%d).sql
              # ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨
              aws s3 cp /backup/nacos-$(date +%Y%m%d).sql s3://backup-bucket/
          restartPolicy: OnFailure
```

**å¤‡ä»½ç­–ç•¥**ï¼š
- **å…¨é‡å¤‡ä»½**ï¼šæ¯å¤©å‡Œæ™¨å¤‡ä»½å®Œæ•´æ•°æ®
- **å¢é‡å¤‡ä»½**ï¼šæ¯å°æ—¶å¤‡ä»½å˜æ›´æ•°æ®ï¼ˆå¯é€‰ï¼‰
- **å¼‚åœ°å¤‡ä»½**ï¼šä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆS3/OSSï¼‰
- **ä¿ç•™ç­–ç•¥**ï¼šä¿ç•™30å¤©ï¼Œè¶…è¿‡è‡ªåŠ¨åˆ é™¤

---

## 7. ğŸ“ˆ å¼¹æ€§ä¼¸ç¼©é…ç½®


### 7.1 ä»€ä¹ˆæ˜¯å¼¹æ€§ä¼¸ç¼©


**ç”Ÿæ´»ä¾‹å­**ï¼šé¤å…åœ¨é¥­ç‚¹å¢åŠ æœåŠ¡å‘˜ï¼Œå¤œé‡Œå‡å°‘æœåŠ¡å‘˜ï¼Œæ ¹æ®å®¢æµé‡è‡ªåŠ¨è°ƒæ•´ã€‚

**å¼¹æ€§ä¼¸ç¼©ç±»å‹**ï¼š

```
æ°´å¹³ä¼¸ç¼©ï¼ˆHPAï¼‰ï¼š
å¢åŠ /å‡å°‘å®ä¾‹æ•°é‡
3ä¸ªå®ä¾‹ â†’ 6ä¸ªå®ä¾‹ â†’ 3ä¸ªå®ä¾‹

å‚ç›´ä¼¸ç¼©ï¼ˆVPAï¼‰ï¼š
è°ƒæ•´å•ä¸ªå®ä¾‹çš„èµ„æº
2æ ¸4G â†’ 4æ ¸8G â†’ 2æ ¸4G

é›†ç¾¤ä¼¸ç¼©ï¼ˆCAï¼‰ï¼š
å¢åŠ /å‡å°‘ç‰©ç†èŠ‚ç‚¹
3ä¸ªèŠ‚ç‚¹ â†’ 5ä¸ªèŠ‚ç‚¹ â†’ 3ä¸ªèŠ‚ç‚¹
```

### 7.2 æ°´å¹³Podè‡ªåŠ¨ä¼¸ç¼©ï¼ˆHPAï¼‰


**ğŸ”¸ åŸºäºCPUçš„è‡ªåŠ¨ä¼¸ç¼©**

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: nacos-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nacos-deployment
  minReplicas: 3               # æœ€å°‘3ä¸ªå®ä¾‹
  maxReplicas: 10              # æœ€å¤š10ä¸ªå®ä¾‹
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70 # CPUä½¿ç”¨ç‡è¾¾åˆ°70%æ—¶æ‰©å®¹
  behavior:                    # ä¼¸ç¼©è¡Œä¸º
    scaleUp:
      stabilizationWindowSeconds: 60    # æ‰©å®¹å‰è§‚å¯Ÿ60ç§’
      policies:
      - type: Percent
        value: 50              # æ¯æ¬¡æœ€å¤šæ‰©å®¹50%
        periodSeconds: 60
    scaleDown:
      stabilizationWindowSeconds: 300   # ç¼©å®¹å‰è§‚å¯Ÿ5åˆ†é’Ÿ
      policies:
      - type: Pods
        value: 1               # æ¯æ¬¡æœ€å¤šç¼©å®¹1ä¸ªPod
        periodSeconds: 60
```

**é…ç½®è¯´æ˜**ï¼š
- `averageUtilization: 70`ï¼šæ‰€æœ‰Podå¹³å‡CPU>70%æ—¶æ‰©å®¹
- `stabilizationWindowSeconds`ï¼šé˜²æ­¢é¢‘ç¹ä¼¸ç¼©çš„è§‚å¯Ÿçª—å£
- `scaleUp/scaleDown policies`ï¼šæ§åˆ¶ä¼¸ç¼©é€Ÿåº¦

**ğŸ”¸ åŸºäºè‡ªå®šä¹‰æŒ‡æ ‡çš„ä¼¸ç¼©**

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: nacos-hpa-custom
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nacos-deployment
  minReplicas: 3
  maxReplicas: 15
  metrics:
  # åŸºäºQPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰
  - type: Pods
    pods:
      metric:
        name: http_requests_per_second
      target:
        type: AverageValue
        averageValue: "1000"   # æ¯ä¸ªPodå¤„ç†1000 QPSæ—¶æ‰©å®¹
  # åŸºäºå†…å­˜
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

### 7.3 å‚ç›´Podè‡ªåŠ¨ä¼¸ç¼©ï¼ˆVPAï¼‰


**ğŸ”¸ VPAé…ç½®ç¤ºä¾‹**

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: nacos-vpa
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nacos-deployment
  updatePolicy:
    updateMode: "Auto"         # è‡ªåŠ¨è°ƒæ•´èµ„æº
  resourcePolicy:
    containerPolicies:
    - containerName: nacos
      minAllowed:              # æœ€å°èµ„æº
        cpu: 500m
        memory: 1Gi
      maxAllowed:              # æœ€å¤§èµ„æº
        cpu: 4000m
        memory: 8Gi
      controlledResources: ["cpu", "memory"]
```

**æ›´æ–°æ¨¡å¼**ï¼š
- `Auto`ï¼šè‡ªåŠ¨è°ƒæ•´å¹¶é‡å¯Pod
- `Recreate`ï¼šè°ƒæ•´èµ„æºå¹¶é‡å»ºPod
- `Initial`ï¼šåªåœ¨Podåˆ›å»ºæ—¶è®¾ç½®èµ„æº
- `Off`ï¼šåªæä¾›å»ºè®®ï¼Œä¸è‡ªåŠ¨è°ƒæ•´

### 7.4 ä¼¸ç¼©ç­–ç•¥æœ€ä½³å®è·µ


**âš¡ å®è·µå»ºè®®**

| åœºæ™¯ | **ä¼¸ç¼©ç­–ç•¥** | **é…ç½®è¦ç‚¹** |
|------|------------|------------|
| **æµé‡æ³¢åŠ¨å¤§** | `HPA + å¿«é€Ÿæ‰©å®¹` | `ç¨³å®šçª—å£30sï¼Œæ‰©å®¹50%` |
| **æµé‡å¹³ç¨³** | `HPA + æ…¢é€Ÿä¼¸ç¼©` | `ç¨³å®šçª—å£5åˆ†é’Ÿï¼Œæ‰©å®¹10%` |
| **èµ„æºå¯†é›†å‹** | `VPA + å†…å­˜ä¼˜åŒ–` | `æ ¹æ®å®é™…ä½¿ç”¨è°ƒæ•´å†…å­˜` |
| **æ··åˆåœºæ™¯** | `HPA + VPAç»„åˆ` | `HPAå¤„ç†æµé‡ï¼ŒVPAä¼˜åŒ–èµ„æº` |

**ğŸ”¸ ä¼¸ç¼©ç›‘æ§**

```bash
# æŸ¥çœ‹HPAçŠ¶æ€
kubectl get hpa nacos-hpa

# è¾“å‡ºç¤ºä¾‹ï¼š
# NAME        REFERENCE                     TARGETS   MINPODS   MAXPODS   REPLICAS
# nacos-hpa   Deployment/nacos-deployment   45%/70%   3         10        5

# æŸ¥çœ‹ä¼¸ç¼©äº‹ä»¶
kubectl describe hpa nacos-hpa

# æŸ¥çœ‹VPAæ¨èå€¼
kubectl describe vpa nacos-vpa
```

---

## 8. ğŸ’° æˆæœ¬ä¼˜åŒ–ç­–ç•¥


### 8.1 æˆæœ¬ä¼˜åŒ–æ€è·¯


**æˆæœ¬ä¼˜åŒ–é‡‘å­—å¡”**ï¼š

```
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  æ¶æ„ä¼˜åŒ–    â”‚  â† æœ€é«˜ROI
                 â”‚ (æœåŠ¡åˆå¹¶ç­‰) â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                 â”‚  èµ„æºå³è°ƒ    â”‚  â† è°ƒæ•´è¿‡åº¦åˆ†é…
                 â”‚ (é™ä½è§„æ ¼)   â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                 â”‚  å¼¹æ€§ä¼¸ç¼©    â”‚  â† æŒ‰éœ€ä½¿ç”¨
                 â”‚ (è‡ªåŠ¨æ‰©ç¼©å®¹) â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                 â”‚  å®ä¾‹ä¼˜åŒ–    â”‚  â† é€‰æ‹©åˆé€‚è§„æ ¼
                 â”‚ (ç«ä»·å®ä¾‹)   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 èµ„æºä¼˜åŒ–é…ç½®


**ğŸ”¸ åˆç†è®¾ç½®èµ„æºè¯·æ±‚ä¸é™åˆ¶**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nacos-optimized
spec:
  containers:
  - name: nacos
    resources:
      requests:               # è°ƒåº¦ä¾æ®ï¼ˆä¿è¯åˆ†é…ï¼‰
        cpu: 500m             # 0.5æ ¸ï¼ˆæ ¹æ®å®é™…ç›‘æ§è°ƒæ•´ï¼‰
        memory: 1Gi           # 1GBå†…å­˜
      limits:                 # èµ„æºä¸Šé™ï¼ˆé˜²æ­¢è¶…ç”¨ï¼‰
        cpu: 1000m            # æœ€å¤š1æ ¸
        memory: 2Gi           # æœ€å¤š2GB
```

**ä¼˜åŒ–åŸåˆ™**ï¼š
- **requestsè®¾ç½®**ï¼šæ ¹æ®å¹³æ—¶ä½¿ç”¨é‡è®¾ç½®ï¼Œä¸è¦è¿‡é«˜
- **limitsè®¾ç½®**ï¼šæ ¹æ®å³°å€¼+20%ç¼“å†²è®¾ç½®
- **é¿å…è¿‡åº¦åˆ†é…**ï¼šrequestsè¿‡é«˜å¯¼è‡´èµ„æºæµªè´¹

**ğŸ”¸ ä½¿ç”¨èŠ‚ç‚¹äº²å’Œæ€§ä¼˜åŒ–æˆæœ¬**

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nacos-deployment
spec:
  template:
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            preference:
              matchExpressions:
              - key: node.kubernetes.io/instance-type
                operator: In
                values:
                - spot          # ä¼˜å…ˆä½¿ç”¨ç«ä»·å®ä¾‹ï¼ˆä¾¿å®œ50-90%ï¼‰
      tolerations:              # å®¹å¿ç«ä»·å®ä¾‹å¯èƒ½è¢«å›æ”¶
      - key: "spot"
        operator: "Equal"
        value: "true"
        effect: "NoSchedule"
```

### 8.3 äº‘èµ„æºæˆæœ¬ä¼˜åŒ–


**ğŸ”¸ æ··åˆä½¿ç”¨æŒ‰éœ€ä¸é¢„ç•™å®ä¾‹**

| å®ä¾‹ç±»å‹ | **æˆæœ¬** | **é€‚ç”¨åœºæ™¯** | **é…ç½®å»ºè®®** |
|---------|---------|------------|------------|
| **æŒ‰éœ€å®ä¾‹** | `100%` | `ä¸´æ—¶è´Ÿè½½ï¼Œå³°å€¼æ‰©å®¹` | `HPAæ‰©å®¹æ—¶ä½¿ç”¨` |
| **é¢„ç•™å®ä¾‹** | `40-60%` | `ç¨³å®šåŸºç¡€è´Ÿè½½` | `minReplicasä½¿ç”¨` |
| **ç«ä»·å®ä¾‹** | `10-50%` | `å¯ä¸­æ–­ä»»åŠ¡` | `éæ ¸å¿ƒæœåŠ¡ä½¿ç”¨` |
| **Savings Plans** | `30-70%` | `é•¿æœŸç¨³å®šè´Ÿè½½` | `1-3å¹´æ‰¿è¯º` |

**ğŸ”¸ å­˜å‚¨æˆæœ¬ä¼˜åŒ–**

```yaml
# ä½¿ç”¨åˆ†çº§å­˜å‚¨
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: nacos-data
spec:
  # çƒ­æ•°æ®ä½¿ç”¨SSD
  storageClassName: fast-ssd
  resources:
    requests:
      storage: 50Gi

---
# æ—¥å¿—å½’æ¡£ä½¿ç”¨ä½æˆæœ¬å­˜å‚¨
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: nacos-logs-archive
spec:
  # å†·æ•°æ®ä½¿ç”¨HDD
  storageClassName: slow-hdd
  resources:
    requests:
      storage: 500Gi
```

### 8.4 å®šæ—¶ä¼¸ç¼©ç­–ç•¥


**ğŸ”¸ æ ¹æ®ä¸šåŠ¡å‘¨æœŸè°ƒæ•´èµ„æº**

```yaml
# ä½¿ç”¨CronHPAï¼ˆå®šæ—¶ä¼¸ç¼©ï¼‰
apiVersion: autoscaling.alibabacloud.com/v1beta1
kind: CronHorizontalPodAutoscaler
metadata:
  name: nacos-cron-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: nacos-deployment
  jobs:
  - name: scale-up-workday
    schedule: "0 8 * * 1-5"    # å·¥ä½œæ—¥æ—©8ç‚¹æ‰©å®¹
    targetSize: 10
  - name: scale-down-workday
    schedule: "0 20 * * 1-5"   # å·¥ä½œæ—¥æ™š8ç‚¹ç¼©å®¹
    targetSize: 3
  - name: scale-down-weekend
    schedule: "0 8 * * 0,6"    # å‘¨æœ«æœ€å°è§„æ¨¡
    targetSize: 2
```

**ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹**ï¼š
- **ç”µå•†ç³»ç»Ÿ**ï¼šä¿ƒé”€æœŸé—´æå‰æ‰©å®¹ï¼Œæ´»åŠ¨ç»“æŸåç¼©å®¹
- **ä¼ä¸šåº”ç”¨**ï¼šå·¥ä½œæ—¶é—´æ‰©å®¹ï¼Œå¤œé—´ç¼©å®¹
- **æ¸¸æˆæœåŠ¡**ï¼šå‘¨æœ«æ‰©å®¹ï¼Œå·¥ä½œæ—¥ç¼©å®¹

### 8.5 æˆæœ¬ç›‘æ§ä¸åˆ†æ


**ğŸ”¸ æˆæœ¬å¯è§†åŒ–**

```bash
# æŸ¥çœ‹Podèµ„æºä½¿ç”¨æƒ…å†µ
kubectl top pods -n production

# è¾“å‡ºç¤ºä¾‹ï¼š
# NAME                    CPU(cores)   MEMORY(bytes)
# nacos-0                 450m         1200Mi
# nacos-1                 380m         1100Mi
# nacos-2                 420m         1150Mi

# è®¡ç®—èµ„æºåˆ©ç”¨ç‡
å®é™…ä½¿ç”¨ï¼š450m CPU, 1200Miå†…å­˜
åˆ†é…èµ„æºï¼š1000m CPU, 2048Miå†…å­˜
CPUåˆ©ç”¨ç‡ï¼š45%ï¼ˆå¯ä»¥é™ä½limitsï¼‰
å†…å­˜åˆ©ç”¨ç‡ï¼š58.5%ï¼ˆå¯ä»¥é™ä½limitsï¼‰
```

**æˆæœ¬ä¼˜åŒ–æ£€æŸ¥æ¸…å•**ï¼š
- âœ… requestsæ˜¯å¦æ ¹æ®å®é™…ä½¿ç”¨è®¾ç½®ï¼Ÿ
- âœ… limitsæ˜¯å¦è¿‡åº¦åˆ†é…ï¼Ÿ
- âœ… æ˜¯å¦ä½¿ç”¨äº†å¼¹æ€§ä¼¸ç¼©ï¼Ÿ
- âœ… æ˜¯å¦æœ‰é—²ç½®èµ„æºï¼ˆutilization<30%ï¼‰ï¼Ÿ
- âœ… æ˜¯å¦ä½¿ç”¨äº†é¢„ç•™å®ä¾‹/Savings Plansï¼Ÿ
- âœ… å­˜å‚¨æ˜¯å¦åˆ†çº§ä½¿ç”¨ï¼Ÿ
- âœ… æ˜¯å¦é…ç½®äº†å®šæ—¶ä¼¸ç¼©ï¼Ÿ

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ è‡ªåŠ¨åŒ–éƒ¨ç½²**
```
æ ¸å¿ƒä»·å€¼ï¼šå¿«é€Ÿã€å‡†ç¡®ã€å¯é‡å¤
å…³é”®æŠ€æœ¯ï¼šDockerå®¹å™¨åŒ– + Kubernetesç¼–æ’
å®ç°æ–¹å¼ï¼šHelm chartä¸€é”®éƒ¨ç½²
```

**ğŸ”¸ æ»šåŠ¨æ›´æ–°**
```
æ ¸å¿ƒåŸç†ï¼šé€æ­¥æ›¿æ¢ï¼Œä¿è¯æœåŠ¡ä¸ä¸­æ–­
å…³é”®é…ç½®ï¼šmaxSurgeã€maxUnavailable
å›æ»šæœºåˆ¶ï¼škubectl rollout undoå¿«é€Ÿå›é€€
```

**ğŸ”¸ å¥åº·æ£€æŸ¥**
```
å­˜æ´»æ£€æŸ¥ï¼ˆLivenessï¼‰ï¼šè¿›ç¨‹æ˜¯å¦è¿˜æ´»ç€ï¼Œä¸å¥åº·å°±é‡å¯
å°±ç»ªæ£€æŸ¥ï¼ˆReadinessï¼‰ï¼šæ˜¯å¦å‡†å¤‡å¥½æœåŠ¡ï¼Œä¸å°±ç»ªå°±æ‘˜æµé‡
æœ€ä½³å®è·µï¼šåˆå§‹å»¶è¿Ÿ30-60sï¼Œé—´éš”5-10sï¼Œå¤±è´¥é˜ˆå€¼3æ¬¡
```

**ğŸ”¸ ç›‘æ§å‘Šè­¦**
```
å››ä¸ªé»„é‡‘æŒ‡æ ‡ï¼šå»¶è¿Ÿã€æµé‡ã€é”™è¯¯ã€é¥±å’Œåº¦
ç›‘æ§æ ˆï¼šPrometheusé‡‡é›† + Grafanaå±•ç¤º + AlertManagerå‘Šè­¦
å‘Šè­¦ç­–ç•¥ï¼šæŒç»­5åˆ†é’Ÿæ‰å‘Šè­¦ï¼Œé¿å…æŠ–åŠ¨è¯¯æŠ¥
```

### 9.2 å…³é”®è¿ç»´æµç¨‹


**ğŸ”¹ æ—¥å¸¸è¿ç»´æ£€æŸ¥æ¸…å•**

| æ£€æŸ¥é¡¹ | **æ£€æŸ¥é¢‘ç‡** | **æ£€æŸ¥å†…å®¹** | **å¼‚å¸¸å¤„ç†** |
|-------|------------|------------|------------|
| **æœåŠ¡å¥åº·** | `æ¯5åˆ†é’Ÿ` | `å¥åº·æ£€æŸ¥æ˜¯å¦é€šè¿‡` | `è‡ªåŠ¨é‡å¯/å‘Šè­¦` |
| **èµ„æºä½¿ç”¨** | `æ¯åˆ†é’Ÿ` | `CPUã€å†…å­˜ã€ç£ç›˜` | `è¶…80%å‘Šè­¦/æ‰©å®¹` |
| **æ—¥å¿—é”™è¯¯** | `å®æ—¶` | `ERRORçº§åˆ«æ—¥å¿—` | `å‘Šè­¦å¹¶æ’æŸ¥` |
| **å¤‡ä»½çŠ¶æ€** | `æ¯å¤©` | `å¤‡ä»½æ˜¯å¦æˆåŠŸ` | `è¡¥å……å¤‡ä»½` |

**ğŸ”¹ æ•…éšœå¤„ç†æµç¨‹**

```
1. å‘ç°é—®é¢˜ï¼šç›‘æ§å‘Šè­¦ or ç”¨æˆ·åé¦ˆ
   â†“
2. å¿«é€Ÿæ­¢æŸï¼šåˆ‡æ¢æµé‡ or å›æ»šç‰ˆæœ¬
   â†“
3. å®šä½åŸå› ï¼šæŸ¥çœ‹æ—¥å¿—ã€æŒ‡æ ‡ã€é“¾è·¯è¿½è¸ª
   â†“
4. ä¿®å¤é—®é¢˜ï¼šä»£ç ä¿®å¤ or é…ç½®è°ƒæ•´
   â†“
5. éªŒè¯æ¢å¤ï¼šç°åº¦å‘å¸ƒ + ç›‘æ§è§‚å¯Ÿ
   â†“
6. å¤ç›˜æ€»ç»“ï¼šè®°å½•åŸå› ã€ä¼˜åŒ–é¢„æ¡ˆ
```

### 9.3 æˆæœ¬ä¼˜åŒ–è®°å¿†å£è¯€


```
èµ„æºé…ç½®è¦ç²¾å‡†ï¼Œç›‘æ§æ•°æ®æ¥æŒ‡å¼•
å¼¹æ€§ä¼¸ç¼©èƒ½çœé’±ï¼ŒæŒ‰éœ€ä½¿ç”¨æ˜¯å…³é”®
é¢„ç•™å®ä¾‹æ‰“æŠ˜æ‰£ï¼Œç«ä»·å®ä¾‹æ›´ä¾¿å®œ
å­˜å‚¨åˆ†çº§å†·çƒ­åˆ†ï¼Œå®šæ—¶ä¼¸ç¼©å‡æµªè´¹
æŒç»­ä¼˜åŒ–æˆä¹ æƒ¯ï¼Œæˆæœ¬è‡ªç„¶å°±ä¸‹æ¥
```

### 9.4 å®æˆ˜ç»éªŒæ€»ç»“


**âš¡ é¿å‘æŒ‡å—**

```
âŒ ä¸è¦ï¼š
- ä¸è¦æŠŠæ‰€æœ‰èµ„æºlimitsè®¾ç½®è¿‡é«˜ï¼ˆæµªè´¹èµ„æºï¼‰
- ä¸è¦é¢‘ç¹è§¦å‘ä¼¸ç¼©ï¼ˆç¨³å®šçª—å£è‡³å°‘1åˆ†é’Ÿï¼‰
- ä¸è¦åœ¨é«˜å³°æœŸæ›´æ–°ï¼ˆé€‰æ‹©ä½å³°æœŸï¼‰
- ä¸è¦å¿½ç•¥æ—¥å¿—ï¼ˆå®šæœŸæŸ¥çœ‹å¼‚å¸¸æ—¥å¿—ï¼‰

âœ… è¦åšï¼š
- æ ¹æ®å®é™…ç›‘æ§æ•°æ®è°ƒæ•´èµ„æºé…ç½®
- é…ç½®å®Œå–„çš„å¥åº·æ£€æŸ¥å’Œå‘Šè­¦
- å®šæœŸå¤‡ä»½æ•°æ®å¹¶æµ‹è¯•æ¢å¤
- ä½¿ç”¨æ»šåŠ¨æ›´æ–°ä¿è¯æœåŠ¡è¿ç»­æ€§
- å»ºç«‹è‡ªåŠ¨åŒ–è¿ç»´æµç¨‹
```

**ğŸ¯ è¿›é˜¶ä¼˜åŒ–æ–¹å‘**

1. **æœåŠ¡ç½‘æ ¼ï¼ˆService Meshï¼‰**
   - ä½¿ç”¨Istioå®ç°æµé‡ç®¡ç†
   - é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿éƒ¨ç½²
   - æ›´ç»†ç²’åº¦çš„æµé‡æ§åˆ¶

2. **æ··æ²Œå·¥ç¨‹ï¼ˆChaos Engineeringï¼‰**
   - ä¸»åŠ¨åˆ¶é€ æ•…éšœæµ‹è¯•
   - éªŒè¯å®¹ç¾èƒ½åŠ›
   - æé«˜ç³»ç»ŸéŸ§æ€§

3. **FinOpså®è·µ**
   - å»ºç«‹æˆæœ¬æ„è¯†æ–‡åŒ–
   - å®šæœŸæˆæœ¬å®¡æŸ¥
   - æŒç»­ä¼˜åŒ–ROI

**æ ¸å¿ƒç†å¿µ**ï¼š
- ğŸš€ è‡ªåŠ¨åŒ–æ˜¯åŸºç¡€ï¼Œè§£æ”¾äººåŠ›
- ğŸ“Š ç›‘æ§æ˜¯çœ¼ç›ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
- ğŸ›¡ï¸ å®¹ç¾æ˜¯ä¿éšœï¼Œç¡®ä¿æœåŠ¡ç¨³å®š
- ğŸ’° æˆæœ¬ä¼˜åŒ–æ˜¯ç›®æ ‡ï¼Œæé«˜èµ„æºæ•ˆç‡