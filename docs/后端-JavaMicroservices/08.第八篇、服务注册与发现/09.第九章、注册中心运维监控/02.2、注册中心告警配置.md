---
title: 2ã€æ³¨å†Œä¸­å¿ƒå‘Šè­¦é…ç½®
---
## ğŸ“š ç›®å½•

1. [å‘Šè­¦é…ç½®åŸºç¡€æ¦‚å¿µ](#1-å‘Šè­¦é…ç½®åŸºç¡€æ¦‚å¿µ)
2. [æœåŠ¡ä¸‹çº¿å‘Šè­¦](#2-æœåŠ¡ä¸‹çº¿å‘Šè­¦)
3. [å¥åº·æ£€æŸ¥å¤±è´¥å‘Šè­¦](#3-å¥åº·æ£€æŸ¥å¤±è´¥å‘Šè­¦)
4. [æ³¨å†Œä¸­å¿ƒæ•…éšœå‘Šè­¦](#4-æ³¨å†Œä¸­å¿ƒæ•…éšœå‘Šè­¦)
5. [æ€§èƒ½é˜ˆå€¼å‘Šè­¦](#5-æ€§èƒ½é˜ˆå€¼å‘Šè­¦)
6. [é›†ç¾¤çŠ¶æ€å‘Šè­¦](#6-é›†ç¾¤çŠ¶æ€å‘Šè­¦)
7. [ç½‘ç»œåˆ†åŒºå‘Šè­¦](#7-ç½‘ç»œåˆ†åŒºå‘Šè­¦)
8. [èµ„æºä½¿ç”¨å‘Šè­¦](#8-èµ„æºä½¿ç”¨å‘Šè­¦)
9. [è‡ªåŠ¨æ¢å¤æœºåˆ¶](#9-è‡ªåŠ¨æ¢å¤æœºåˆ¶)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”” å‘Šè­¦é…ç½®åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ³¨å†Œä¸­å¿ƒå‘Šè­¦


**é€šä¿—ç†è§£**ï¼šå°±åƒä½ å®¶é‡Œè£…çš„çƒŸé›¾æŠ¥è­¦å™¨ï¼Œå½“æ£€æµ‹åˆ°çƒŸé›¾æ—¶ä¼šå‘å‡ºè­¦æŠ¥æé†’ä½ ã€‚æ³¨å†Œä¸­å¿ƒçš„å‘Šè­¦ä¹Ÿæ˜¯è¿™ä¸ªé“ç†â€”â€”å½“ç³»ç»Ÿå‡ºç°å¼‚å¸¸æƒ…å†µæ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥è¿ç»´äººå‘˜åŠæ—¶å¤„ç†ã€‚

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š

ğŸ  å®¶åº­å®‰é˜²ç³»ç»Ÿ          â†’  ğŸ–¥ï¸ æ³¨å†Œä¸­å¿ƒå‘Šè­¦ç³»ç»Ÿ
çƒŸé›¾æŠ¥è­¦å™¨              â†’  æœåŠ¡ä¸‹çº¿å‘Šè­¦
é—¨çª—ä¼ æ„Ÿå™¨              â†’  å¥åº·æ£€æŸ¥å‘Šè­¦  
æ¸©åº¦ç›‘æ§               â†’  æ€§èƒ½é˜ˆå€¼å‘Šè­¦
è§†é¢‘ç›‘æ§               â†’  é›†ç¾¤çŠ¶æ€ç›‘æ§
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å‘Šè­¦é…ç½®


**æ ¸å¿ƒä»·å€¼**ï¼š
- **åŠæ—¶å‘ç°é—®é¢˜** - ç¬¬ä¸€æ—¶é—´çŸ¥é“ç³»ç»Ÿå‡ºäº†ä»€ä¹ˆçŠ¶å†µ
- **å‡å°‘æ•…éšœå½±å“** - å¿«é€Ÿå“åº”ï¼Œé™ä½ä¸šåŠ¡æŸå¤±
- **é¢„é˜²æ€§ç»´æŠ¤** - åœ¨å°é—®é¢˜å˜æˆå¤§æ•…éšœå‰è§£å†³
- **è¿ç»´è‡ªåŠ¨åŒ–** - å‡å°‘äººå·¥ç›¯ç›˜çš„å·¥ä½œé‡

### 1.3 å‘Šè­¦çš„åŸºæœ¬åŸç†


```
å‘Šè­¦å·¥ä½œæµç¨‹ï¼š

ç›‘æ§æŒ‡æ ‡é‡‡é›† â†’ è§„åˆ™åŒ¹é…åˆ¤æ–­ â†’ è§¦å‘å‘Šè­¦æ¡ä»¶ â†’ å‘é€é€šçŸ¥æ¶ˆæ¯
     â†“              â†“               â†“              â†“
  CPUä½¿ç”¨ç‡      æ˜¯å¦è¶…è¿‡80%?      è¶…è¿‡é˜ˆå€¼        é‚®ä»¶/çŸ­ä¿¡/é’‰é’‰
  å†…å­˜ä½¿ç”¨       æ˜¯å¦æŒç»­5åˆ†é’Ÿ      æ»¡è¶³æ¡ä»¶        é€šçŸ¥è¿ç»´äººå‘˜
  æœåŠ¡æ•°é‡       æ˜¯å¦çªç„¶ä¸‹é™      è§¦å‘å‘Šè­¦        æ‰§è¡Œè‡ªåŠ¨æ¢å¤
```

**å…³é”®è¦ç´ **ï¼š
- `ç›‘æ§æŒ‡æ ‡`ï¼šè¦è§‚å¯Ÿä»€ä¹ˆæ•°æ®ï¼ˆCPUã€å†…å­˜ã€æœåŠ¡æ•°é‡ç­‰ï¼‰
- `å‘Šè­¦è§„åˆ™`ï¼šä»€ä¹ˆæƒ…å†µç®—å¼‚å¸¸ï¼ˆå¤§äºã€å°äºã€ç­‰äºæŸä¸ªå€¼ï¼‰
- `è§¦å‘æ¡ä»¶`ï¼šæ»¡è¶³ä»€ä¹ˆæ¡ä»¶æ‰å‘é€å‘Šè­¦ï¼ˆæŒç»­æ—¶é—´ã€æ¬¡æ•°ç­‰ï¼‰
- `é€šçŸ¥æ–¹å¼`ï¼šå¦‚ä½•å‘Šè¯‰è¿ç»´äººå‘˜ï¼ˆé‚®ä»¶ã€çŸ­ä¿¡ã€å¾®ä¿¡ç­‰ï¼‰

---

## 2. ğŸ“‰ æœåŠ¡ä¸‹çº¿å‘Šè­¦


### 2.1 æœåŠ¡ä¸‹çº¿æ˜¯ä»€ä¹ˆæ„æ€


**é€šä¿—è§£é‡Š**ï¼šæœåŠ¡ä¸‹çº¿å°±æ˜¯åŸæœ¬æ­£å¸¸è¿è¡Œçš„å¾®æœåŠ¡çªç„¶"æ‰çº¿"äº†ï¼Œåœ¨æ³¨å†Œä¸­å¿ƒé‡Œæ‰¾ä¸åˆ°äº†ã€‚å°±åƒä½ çš„æ‰‹æœºçªç„¶ä»å¾®ä¿¡ä¸Šç¦»çº¿ä¸€æ ·ï¼Œåˆ«äººå°±æ— æ³•è”ç³»åˆ°ä½ ã€‚

### 2.2 ä¸ºä»€ä¹ˆè¦ç›‘æ§æœåŠ¡ä¸‹çº¿


**å½±å“åˆ†æ**ï¼š

| åœºæ™¯ | å½±å“ | ä¸¥é‡ç¨‹åº¦ |
|------|------|---------|
| **å•ä¸ªæœåŠ¡å®ä¾‹ä¸‹çº¿** | è´Ÿè½½è½¬ç§»åˆ°å…¶ä»–å®ä¾‹ | â­ ä½ |
| **æ•´ä¸ªæœåŠ¡å…¨éƒ¨ä¸‹çº¿** | è°ƒç”¨è¯¥æœåŠ¡çš„åŠŸèƒ½å…¨éƒ¨å¤±è´¥ | â­â­â­ é«˜ |
| **æ ¸å¿ƒæœåŠ¡ä¸‹çº¿** | å½±å“æ•´ä¸ªä¸šåŠ¡æµç¨‹ | â­â­â­â­â­ ç´§æ€¥ |

### 2.3 æœåŠ¡ä¸‹çº¿å‘Šè­¦é…ç½®


**é…ç½®ç¤ºä¾‹**ï¼ˆNacosï¼‰ï¼š

```yaml
# application.yml
spring:
  cloud:
    nacos:
      discovery:
        # æœåŠ¡ä¸‹çº¿å‘Šè­¦é…ç½®
        alert:
          # å•ä¸ªæœåŠ¡å®ä¾‹ä¸‹çº¿å‘Šè­¦
          instance-offline:
            enabled: true
            # å‘Šè­¦é˜ˆå€¼ï¼šå•æœåŠ¡ä¸‹çº¿å®ä¾‹æ•°
            threshold: 1
            # é€šçŸ¥æ–¹å¼
            notify-types: 
              - email
              - sms
          
          # æœåŠ¡å®Œå…¨ä¸‹çº¿å‘Šè­¦ï¼ˆæ‰€æœ‰å®ä¾‹éƒ½ä¸‹çº¿ï¼‰
          service-offline:
            enabled: true
            # æ ¸å¿ƒæœåŠ¡åˆ—è¡¨ï¼ˆä¸‹çº¿ç«‹å³å‘Šè­¦ï¼‰
            critical-services:
              - user-service
              - order-service
              - payment-service
            notify-types:
              - email
              - sms
              - dingding  # é’‰é’‰æœºå™¨äºº
```

### 2.4 å‘Šè­¦è§„åˆ™è®¾è®¡


**åˆ†çº§å‘Šè­¦ç­–ç•¥**ï¼š

```
ã€P0çº§-ç´§æ€¥ã€‘æ ¸å¿ƒæœåŠ¡å®Œå…¨ä¸‹çº¿
â”œâ”€â”€ è§¦å‘æ¡ä»¶ï¼šè®¢å•æœåŠ¡ã€æ”¯ä»˜æœåŠ¡æ‰€æœ‰å®ä¾‹ä¸‹çº¿
â”œâ”€â”€ é€šçŸ¥æ–¹å¼ï¼šçŸ­ä¿¡ + ç”µè¯ + é’‰é’‰ç¾¤
â””â”€â”€ å“åº”æ—¶é—´ï¼šç«‹å³å¤„ç†ï¼ˆ5åˆ†é’Ÿå†…ï¼‰

ã€P1çº§-é‡è¦ã€‘æ™®é€šæœåŠ¡å®Œå…¨ä¸‹çº¿  
â”œâ”€â”€ è§¦å‘æ¡ä»¶ï¼šä¸€èˆ¬ä¸šåŠ¡æœåŠ¡æ‰€æœ‰å®ä¾‹ä¸‹çº¿
â”œâ”€â”€ é€šçŸ¥æ–¹å¼ï¼šé‚®ä»¶ + é’‰é’‰ç¾¤
â””â”€â”€ å“åº”æ—¶é—´ï¼š30åˆ†é’Ÿå†…å¤„ç†

ã€P2çº§-ä¸€èˆ¬ã€‘å•ä¸ªå®ä¾‹ä¸‹çº¿
â”œâ”€â”€ è§¦å‘æ¡ä»¶ï¼šæŸæœåŠ¡å•ä¸ªå®ä¾‹ä¸‹çº¿ï¼ˆä½†è¿˜æœ‰å…¶ä»–å®ä¾‹ï¼‰
â”œâ”€â”€ é€šçŸ¥æ–¹å¼ï¼šä»…è®°å½•æ—¥å¿— + é‚®ä»¶é€šçŸ¥
â””â”€â”€ å“åº”æ—¶é—´ï¼šå·¥ä½œæ—¶é—´å¤„ç†
```

### 2.5 å®é™…åœºæ™¯ç¤ºä¾‹


**åœºæ™¯ï¼šè®¢å•æœåŠ¡ä¸‹çº¿å‘Šè­¦**

```java
/**
 * æœåŠ¡ä¸‹çº¿ç›‘å¬å™¨
 * å½“æ£€æµ‹åˆ°æœåŠ¡ä¸‹çº¿æ—¶è‡ªåŠ¨è§¦å‘å‘Šè­¦
 */
@Component
public class ServiceOfflineAlertListener {
    
    @Autowired
    private AlertService alertService;
    
    /**
     * ç›‘å¬æœåŠ¡çŠ¶æ€å˜åŒ–
     */
    @EventListener
    public void onServiceStatusChange(ServiceStatusChangeEvent event) {
        
        // åˆ¤æ–­æ˜¯å¦ä¸ºä¸‹çº¿äº‹ä»¶
        if (event.isOffline()) {
            
            String serviceName = event.getServiceName();
            int remainingInstances = event.getRemainingInstances();
            
            // åœºæ™¯1ï¼šå®Œå…¨ä¸‹çº¿ï¼ˆæ‰€æœ‰å®ä¾‹éƒ½æ²¡äº†ï¼‰
            if (remainingInstances == 0) {
                // å‘é€ç´§æ€¥å‘Šè­¦
                alertService.sendUrgentAlert(
                    "ã€ç´§æ€¥ã€‘æœåŠ¡å®Œå…¨ä¸‹çº¿",
                    String.format("æœåŠ¡ %s æ‰€æœ‰å®ä¾‹å·²ä¸‹çº¿ï¼", serviceName)
                );
            }
            // åœºæ™¯2ï¼šéƒ¨åˆ†ä¸‹çº¿ï¼ˆè¿˜æœ‰å…¶ä»–å®ä¾‹ï¼‰
            else {
                // å‘é€æ™®é€šå‘Šè­¦
                alertService.sendNormalAlert(
                    "ã€æé†’ã€‘æœåŠ¡å®ä¾‹ä¸‹çº¿",
                    String.format("æœåŠ¡ %s ä¸€ä¸ªå®ä¾‹ä¸‹çº¿ï¼Œå‰©ä½™ %d ä¸ªå®ä¾‹", 
                        serviceName, remainingInstances)
                );
            }
        }
    }
}
```

---

## 3. ğŸ’” å¥åº·æ£€æŸ¥å¤±è´¥å‘Šè­¦


### 3.1 å¥åº·æ£€æŸ¥æ˜¯ä»€ä¹ˆ


**é€šä¿—è§£é‡Š**ï¼šå¥åº·æ£€æŸ¥å°±åƒåŒ»ç”Ÿå®šæœŸç»™ä½ é‡è¡€å‹ã€æµ‹å¿ƒè·³ä¸€æ ·ã€‚æ³¨å†Œä¸­å¿ƒä¼šå®šæœŸ"é—®"æœåŠ¡ï¼š"ä½ è¿˜å¥½å—ï¼Ÿèƒ½æ­£å¸¸å·¥ä½œå—ï¼Ÿ"å¦‚æœæœåŠ¡å›ç­”"ä¸å¥½"æˆ–è€…ä¸å›ç­”ï¼Œå°±è¯´æ˜å®ƒå¯èƒ½æœ‰é—®é¢˜äº†ã€‚

**å¥åº·æ£€æŸ¥æœºåˆ¶**ï¼š

```
æ­£å¸¸æƒ…å†µï¼š
æ³¨å†Œä¸­å¿ƒ: "user-serviceï¼Œä½ è¿˜å¥½å—ï¼Ÿ" 
æœåŠ¡å®ä¾‹: "æˆ‘å¾ˆå¥½ï¼å¯ä»¥æ­£å¸¸å¤„ç†è¯·æ±‚" âœ…
ç»“æœ: ä¿æŒåœ¨çº¿çŠ¶æ€

å¼‚å¸¸æƒ…å†µï¼š
æ³¨å†Œä¸­å¿ƒ: "order-serviceï¼Œä½ è¿˜å¥½å—ï¼Ÿ"
æœåŠ¡å®ä¾‹: "æˆ‘æ•°æ®åº“è¿ä¸ä¸Šäº†..." âŒ
ç»“æœ: æ ‡è®°ä¸ºä¸å¥åº·ï¼Œè§¦å‘å‘Šè­¦
```

### 3.2 å¥åº·æ£€æŸ¥å¤±è´¥çš„å¸¸è§åŸå› 


| å¤±è´¥åŸå›  | å…·ä½“è¡¨ç° | å½±å“ |
|---------|---------|------|
| **æ•°æ®åº“è¿æ¥å¤±è´¥** | æ— æ³•æŸ¥è¯¢æ•°æ® | æœåŠ¡åŠŸèƒ½ä¸å¯ç”¨ |
| **å†…å­˜æº¢å‡º** | JVMå †å†…å­˜è€—å°½ | æœåŠ¡å“åº”æ…¢æˆ–å¡æ­» |
| **ä¾èµ–æœåŠ¡å¼‚å¸¸** | è°ƒç”¨å…¶ä»–æœåŠ¡è¶…æ—¶ | çº§è”å½±å“å…¶ä»–åŠŸèƒ½ |
| **ç£ç›˜ç©ºé—´ä¸è¶³** | æ— æ³•å†™å…¥æ—¥å¿— | æœåŠ¡è¿è¡Œå—é˜» |

### 3.3 å¥åº·æ£€æŸ¥å‘Šè­¦é…ç½®


**Spring Boot Actuatorå¥åº·æ£€æŸ¥**ï¼š

```yaml
# application.yml
management:
  endpoints:
    web:
      exposure:
        include: health  # æš´éœ²å¥åº·æ£€æŸ¥ç«¯ç‚¹
  
  health:
    # æ˜¾ç¤ºè¯¦ç»†å¥åº·ä¿¡æ¯
    show-details: always
    
  # å‘Šè­¦é…ç½®
  metrics:
    export:
      prometheus:
        enabled: true

# å¥åº·æ£€æŸ¥å‘Šè­¦è§„åˆ™
spring:
  cloud:
    nacos:
      discovery:
        health-check:
          # æ£€æŸ¥é—´éš”ï¼ˆæ¯5ç§’æ£€æŸ¥ä¸€æ¬¡ï¼‰
          interval: 5000
          # å¤±è´¥é˜ˆå€¼ï¼ˆè¿ç»­å¤±è´¥3æ¬¡æ‰å‘Šè­¦ï¼‰
          failure-threshold: 3
          # å‘Šè­¦é€šçŸ¥
          alert:
            enabled: true
            notify-types:
              - email
              - dingding
```

### 3.4 è‡ªå®šä¹‰å¥åº·æ£€æŸ¥æŒ‡æ ‡


```java
/**
 * è‡ªå®šä¹‰å¥åº·æ£€æŸ¥
 * æ£€æŸ¥å…³é”®ä¾èµ–æ˜¯å¦æ­£å¸¸
 */
@Component
public class CustomHealthIndicator implements HealthIndicator {
    
    @Autowired
    private DataSource dataSource;
    
    @Autowired
    private RedisTemplate redisTemplate;
    
    @Override
    public Health health() {
        
        // æ£€æŸ¥æ•°æ®åº“è¿æ¥
        if (!checkDatabase()) {
            return Health.down()
                .withDetail("database", "è¿æ¥å¤±è´¥")
                .build();
        }
        
        // æ£€æŸ¥Redisè¿æ¥
        if (!checkRedis()) {
            return Health.down()
                .withDetail("redis", "è¿æ¥è¶…æ—¶")
                .build();
        }
        
        // ä¸€åˆ‡æ­£å¸¸
        return Health.up()
            .withDetail("database", "æ­£å¸¸")
            .withDetail("redis", "æ­£å¸¸")
            .build();
    }
    
    private boolean checkDatabase() {
        try {
            // æ‰§è¡Œç®€å•æŸ¥è¯¢æµ‹è¯•
            dataSource.getConnection().prepareStatement("SELECT 1").execute();
            return true;
        } catch (Exception e) {
            return false;
        }
    }
    
    private boolean checkRedis() {
        try {
            // æ‰§è¡Œpingå‘½ä»¤
            redisTemplate.getConnectionFactory()
                .getConnection().ping();
            return true;
        } catch (Exception e) {
            return false;
        }
    }
}
```

---

## 4. ğŸš¨ æ³¨å†Œä¸­å¿ƒæ•…éšœå‘Šè­¦


### 4.1 æ³¨å†Œä¸­å¿ƒæ•…éšœæ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šæ³¨å†Œä¸­å¿ƒå°±åƒä¸€ä¸ªé€šè®¯å½•ç®¡ç†å‘˜ã€‚å¦‚æœè¿™ä¸ªç®¡ç†å‘˜è‡ªå·±å‡ºé—®é¢˜äº†ï¼ˆå®•æœºã€å´©æºƒï¼‰ï¼Œé‚£æ‰€æœ‰æœåŠ¡å°±æ‰¾ä¸åˆ°å½¼æ­¤äº†ï¼Œæ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿå°±ç˜«ç—ªäº†ã€‚

**æ•…éšœå½±å“åˆ†æ**ï¼š

```
å•èŠ‚ç‚¹æ•…éšœï¼ˆæœ‰é›†ç¾¤å¤‡ä»½ï¼‰ï¼š
NacosèŠ‚ç‚¹1 âŒ å®•æœº
NacosèŠ‚ç‚¹2 âœ… æ­£å¸¸  â†’ æœåŠ¡å¯ä»¥ç»§ç»­ä½¿ç”¨èŠ‚ç‚¹2
NacosèŠ‚ç‚¹3 âœ… æ­£å¸¸
å½±å“ï¼šâ­ è½»å¾®ï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰

å…¨éƒ¨èŠ‚ç‚¹æ•…éšœï¼ˆé›†ç¾¤å…¨æŒ‚ï¼‰ï¼š
NacosèŠ‚ç‚¹1 âŒ å®•æœº
NacosèŠ‚ç‚¹2 âŒ å®•æœº  â†’ æ‰€æœ‰æœåŠ¡æ— æ³•æ³¨å†Œå’Œå‘ç°
NacosèŠ‚ç‚¹3 âŒ å®•æœº
å½±å“ï¼šâ­â­â­â­â­ ä¸¥é‡ï¼ˆä¸šåŠ¡ä¸­æ–­ï¼‰
```

### 4.2 æ³¨å†Œä¸­å¿ƒæ•…éšœç±»å‹


**å¸¸è§æ•…éšœåœºæ™¯**ï¼š

| æ•…éšœç±»å‹ | è¡¨ç° | æ£€æµ‹æ–¹å¼ |
|---------|------|---------|
| **è¿›ç¨‹å´©æºƒ** | Nacosè¿›ç¨‹åœæ­¢è¿è¡Œ | ç«¯å£æ£€æµ‹ã€è¿›ç¨‹æ£€æµ‹ |
| **ç½‘ç»œä¸é€š** | æ— æ³•è®¿é—®æ³¨å†Œä¸­å¿ƒ | TCPè¿æ¥æ£€æµ‹ |
| **ç£ç›˜æ»¡** | æ— æ³•å†™å…¥æ•°æ® | ç£ç›˜ä½¿ç”¨ç‡ç›‘æ§ |
| **å†…å­˜æº¢å‡º** | JVMå †å†…å­˜è€—å°½ | å†…å­˜ä½¿ç”¨ç›‘æ§ |
| **æ•°æ®åº“å¼‚å¸¸** | é…ç½®æ— æ³•æŒä¹…åŒ– | æ•°æ®åº“è¿æ¥æ£€æµ‹ |

### 4.3 æ•…éšœå‘Šè­¦é…ç½®


**Nacosé›†ç¾¤ç›‘æ§é…ç½®**ï¼š

```yaml
# nacos-monitor.yml
monitor:
  # æ³¨å†Œä¸­å¿ƒèŠ‚ç‚¹åˆ—è¡¨
  nacos-servers:
    - host: 192.168.1.101
      port: 8848
    - host: 192.168.1.102
      port: 8848
    - host: 192.168.1.103
      port: 8848
  
  # å¥åº·æ£€æŸ¥é…ç½®
  health-check:
    interval: 10s  # æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡
    timeout: 3s    # è¶…æ—¶æ—¶é—´3ç§’
    
  # å‘Šè­¦è§„åˆ™
  alert:
    # å•èŠ‚ç‚¹æ•…éšœ
    single-node-down:
      enabled: true
      notify: email, dingding
      
    # å¤šèŠ‚ç‚¹æ•…éšœï¼ˆ2ä¸ªåŠä»¥ä¸Šï¼‰
    multiple-nodes-down:
      threshold: 2
      notify: email, sms, dingding, phone
      
    # é›†ç¾¤å®Œå…¨ä¸å¯ç”¨
    cluster-down:
      notify: email, sms, dingding, phone
      auto-escalate: true  # è‡ªåŠ¨å‡çº§å‘Šè­¦
```

### 4.4 æ•…éšœæ£€æµ‹å®ç°


```java
/**
 * æ³¨å†Œä¸­å¿ƒå¥åº·æ£€æµ‹å™¨
 */
@Component
@Slf4j
public class RegistryHealthChecker {
    
    @Autowired
    private List<String> nacosServerUrls;
    
    @Autowired
    private AlertService alertService;
    
    /**
     * å®šæ—¶æ£€æµ‹æ³¨å†Œä¸­å¿ƒå¥åº·çŠ¶æ€
     */
    @Scheduled(fixedRate = 10000) // æ¯10ç§’æ‰§è¡Œä¸€æ¬¡
    public void checkHealth() {
        
        int downCount = 0;
        List<String> downServers = new ArrayList<>();
        
        // æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹
        for (String serverUrl : nacosServerUrls) {
            if (!isServerHealthy(serverUrl)) {
                downCount++;
                downServers.add(serverUrl);
            }
        }
        
        // æ ¹æ®æ•…éšœæ•°é‡å‘é€ä¸åŒçº§åˆ«å‘Šè­¦
        if (downCount == nacosServerUrls.size()) {
            // æ‰€æœ‰èŠ‚ç‚¹éƒ½æŒ‚äº† - æœ€é«˜çº§åˆ«å‘Šè­¦
            alertService.sendCriticalAlert(
                "ã€ä¸¥é‡ã€‘æ³¨å†Œä¸­å¿ƒé›†ç¾¤å®Œå…¨ä¸å¯ç”¨ï¼",
                "æ‰€æœ‰NacosèŠ‚ç‚¹å‡æ— æ³•è®¿é—®ï¼Œè¯·ç«‹å³å¤„ç†ï¼"
            );
        } else if (downCount >= 2) {
            // å¤šä¸ªèŠ‚ç‚¹æ•…éšœ - é«˜çº§åˆ«å‘Šè­¦
            alertService.sendHighAlert(
                "ã€ç´§æ€¥ã€‘æ³¨å†Œä¸­å¿ƒå¤šèŠ‚ç‚¹æ•…éšœ",
                String.format("å·²æœ‰ %d ä¸ªèŠ‚ç‚¹æ•…éšœï¼š%s", 
                    downCount, String.join(", ", downServers))
            );
        } else if (downCount == 1) {
            // å•èŠ‚ç‚¹æ•…éšœ - æ™®é€šå‘Šè­¦
            alertService.sendNormalAlert(
                "ã€æé†’ã€‘æ³¨å†Œä¸­å¿ƒå•èŠ‚ç‚¹æ•…éšœ",
                String.format("èŠ‚ç‚¹ %s æ— æ³•è®¿é—®", downServers.get(0))
            );
        }
    }
    
    /**
     * æ£€æŸ¥å•ä¸ªèŠ‚ç‚¹æ˜¯å¦å¥åº·
     */
    private boolean isServerHealthy(String serverUrl) {
        try {
            // å‘é€HTTPè¯·æ±‚åˆ°å¥åº·æ£€æŸ¥ç«¯ç‚¹
            RestTemplate restTemplate = new RestTemplate();
            String healthUrl = serverUrl + "/nacos/v1/console/health/liveness";
            
            ResponseEntity<String> response = restTemplate.getForEntity(
                healthUrl, String.class
            );
            
            return response.getStatusCode().is2xxSuccessful();
            
        } catch (Exception e) {
            log.error("æ£€æµ‹èŠ‚ç‚¹ {} å¥åº·çŠ¶æ€å¤±è´¥", serverUrl, e);
            return false;
        }
    }
}
```

---

## 5. ğŸ“Š æ€§èƒ½é˜ˆå€¼å‘Šè­¦


### 5.1 ä»€ä¹ˆæ˜¯æ€§èƒ½é˜ˆå€¼


**é€šä¿—ç†è§£**ï¼šå°±åƒæ±½è½¦çš„è½¬é€Ÿè¡¨ï¼Œå½“è½¬é€Ÿè¶…è¿‡çº¢çº¿åŒºå°±è¯´æ˜å‘åŠ¨æœºè´Ÿè·å¤ªå¤§äº†ã€‚æ€§èƒ½é˜ˆå€¼å°±æ˜¯ç»™ç³»ç»Ÿå„é¡¹æŒ‡æ ‡è®¾å®šä¸€ä¸ª"å®‰å…¨çº¿"ï¼Œè¶…è¿‡è¿™æ¡çº¿å°±è¦å‘Šè­¦ã€‚

**æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡**ï¼š

```
ğŸ”¸ å“åº”æ—¶é—´ï¼ˆRT - Response Timeï¼‰
   å«ä¹‰ï¼šå¤„ç†ä¸€ä¸ªè¯·æ±‚éœ€è¦å¤šé•¿æ—¶é—´
   æ­£å¸¸å€¼ï¼š< 100ms
   å‘Šè­¦å€¼ï¼š> 1000msï¼ˆ1ç§’ï¼‰
   
ğŸ”¸ ååé‡ï¼ˆTPS - Transactions Per Secondï¼‰
   å«ä¹‰ï¼šæ¯ç§’èƒ½å¤„ç†å¤šå°‘ä¸ªè¯·æ±‚
   æ­£å¸¸å€¼ï¼š1000 TPS
   å‘Šè­¦å€¼ï¼š< 500 TPSï¼ˆä¸‹é™50%ï¼‰
   
ğŸ”¸ é”™è¯¯ç‡ï¼ˆError Rateï¼‰
   å«ä¹‰ï¼šå¤±è´¥è¯·æ±‚å æ€»è¯·æ±‚çš„æ¯”ä¾‹
   æ­£å¸¸å€¼ï¼š< 0.1%
   å‘Šè­¦å€¼ï¼š> 5%
   
ğŸ”¸ CPUä½¿ç”¨ç‡
   æ­£å¸¸å€¼ï¼š< 70%
   å‘Šè­¦å€¼ï¼š> 85%
   
ğŸ”¸ å†…å­˜ä½¿ç”¨ç‡
   æ­£å¸¸å€¼ï¼š< 80%
   å‘Šè­¦å€¼ï¼š> 90%
```

### 5.2 æ€§èƒ½é˜ˆå€¼å‘Šè­¦é…ç½®


**Prometheus + Alertmanageré…ç½®**ï¼š

```yaml
# prometheus-rules.yml
groups:
  - name: registry_performance_alerts
    interval: 30s
    rules:
      # å“åº”æ—¶é—´å‘Šè­¦
      - alert: HighResponseTime
        expr: registry_request_duration_seconds > 1
        for: 2m  # æŒç»­2åˆ†é’Ÿæ‰å‘Šè­¦
        labels:
          severity: warning
        annotations:
          summary: "æ³¨å†Œä¸­å¿ƒå“åº”æ—¶é—´è¿‡é•¿"
          description: "å“åº”æ—¶é—´ {{ $value }}ç§’ï¼Œè¶…è¿‡1ç§’é˜ˆå€¼"
      
      # CPUä½¿ç”¨ç‡å‘Šè­¦
      - alert: HighCPUUsage
        expr: process_cpu_usage > 0.85
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "CPUä½¿ç”¨ç‡è¿‡é«˜"
          description: "CPUä½¿ç”¨ç‡ {{ $value | humanizePercentage }}"
      
      # å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦
      - alert: HighMemoryUsage
        expr: jvm_memory_used_bytes / jvm_memory_max_bytes > 0.9
        for: 3m
        labels:
          severity: critical
        annotations:
          summary: "å†…å­˜ä½¿ç”¨ç‡å±é™©"
          description: "å†…å­˜ä½¿ç”¨ç‡ {{ $value | humanizePercentage }}ï¼Œæ¥è¿‘ä¸Šé™"
      
      # é”™è¯¯ç‡å‘Šè­¦
      - alert: HighErrorRate
        expr: rate(registry_requests_failed_total[5m]) / rate(registry_requests_total[5m]) > 0.05
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "é”™è¯¯ç‡è¿‡é«˜"
          description: "5åˆ†é’Ÿå†…é”™è¯¯ç‡ {{ $value | humanizePercentage }}"
```

### 5.3 åŠ¨æ€é˜ˆå€¼è°ƒæ•´


**æ™ºèƒ½å‘Šè­¦**ï¼šæ ¹æ®å†å²æ•°æ®è‡ªåŠ¨è°ƒæ•´é˜ˆå€¼ï¼Œé¿å…è¯¯æŠ¥

```java
/**
 * åŠ¨æ€é˜ˆå€¼è®¡ç®—å™¨
 * åŸºäºå†å²æ•°æ®è‡ªåŠ¨è®¡ç®—åˆç†çš„å‘Šè­¦é˜ˆå€¼
 */
@Component
public class DynamicThresholdCalculator {
    
    /**
     * è®¡ç®—å“åº”æ—¶é—´çš„åŠ¨æ€é˜ˆå€¼
     * 
     * @param historicalData è¿‡å»7å¤©çš„å“åº”æ—¶é—´æ•°æ®
     * @return å‘Šè­¦é˜ˆå€¼ï¼ˆå¹³å‡å€¼ + 2å€æ ‡å‡†å·®ï¼‰
     */
    public double calculateResponseTimeThreshold(List<Double> historicalData) {
        
        // è®¡ç®—å¹³å‡å€¼
        double avg = historicalData.stream()
            .mapToDouble(Double::doubleValue)
            .average()
            .orElse(0);
        
        // è®¡ç®—æ ‡å‡†å·®
        double variance = historicalData.stream()
            .mapToDouble(d -> Math.pow(d - avg, 2))
            .average()
            .orElse(0);
        double stdDev = Math.sqrt(variance);
        
        // é˜ˆå€¼ = å¹³å‡å€¼ + 2å€æ ‡å‡†å·®ï¼ˆè¦†ç›–95%çš„æ­£å¸¸æƒ…å†µï¼‰
        double threshold = avg + (2 * stdDev);
        
        log.info("åŠ¨æ€é˜ˆå€¼è®¡ç®— - å¹³å‡å€¼: {}ms, æ ‡å‡†å·®: {}ms, é˜ˆå€¼: {}ms",
            avg, stdDev, threshold);
        
        return threshold;
    }
}
```

---

## 6. ğŸ”— é›†ç¾¤çŠ¶æ€å‘Šè­¦


### 6.1 é›†ç¾¤çŠ¶æ€ç›‘æ§è¦ç‚¹


**é›†ç¾¤å¥åº·ä¸‰è¦ç´ **ï¼š

```
1ï¸âƒ£ èŠ‚ç‚¹å­˜æ´»æ•°é‡
   â”œâ”€â”€ æœ€å°‘å­˜æ´»èŠ‚ç‚¹æ•°ï¼š2ä¸ªï¼ˆä¿è¯é«˜å¯ç”¨ï¼‰
   â”œâ”€â”€ å½“å‰å­˜æ´»èŠ‚ç‚¹ï¼š3ä¸ª âœ…
   â””â”€â”€ å‘Šè­¦æ¡ä»¶ï¼š< 2ä¸ªèŠ‚ç‚¹å­˜æ´»

2ï¸âƒ£ æ•°æ®ä¸€è‡´æ€§
   â”œâ”€â”€ LeaderèŠ‚ç‚¹æ•°æ®ç‰ˆæœ¬ï¼šV100
   â”œâ”€â”€ FollowerèŠ‚ç‚¹æ•°æ®ç‰ˆæœ¬ï¼šV100 âœ…
   â””â”€â”€ å‘Šè­¦æ¡ä»¶ï¼šç‰ˆæœ¬ä¸ä¸€è‡´è¶…è¿‡5åˆ†é’Ÿ

3ï¸âƒ£ ä¸»ä»åŒæ­¥å»¶è¿Ÿ
   â”œâ”€â”€ æ­£å¸¸å»¶è¿Ÿï¼š< 100ms
   â”œâ”€â”€ å½“å‰å»¶è¿Ÿï¼š50ms âœ…
   â””â”€â”€ å‘Šè­¦æ¡ä»¶ï¼š> 1000msï¼ˆ1ç§’ï¼‰
```

### 6.2 é›†ç¾¤çŠ¶æ€å‘Šè­¦è§„åˆ™


```yaml
# cluster-alert-rules.yml
cluster-monitoring:
  
  # èŠ‚ç‚¹æ•°é‡å‘Šè­¦
  node-count:
    min-nodes: 2  # æœ€å°‘èŠ‚ç‚¹æ•°
    alert:
      enabled: true
      message: "é›†ç¾¤èŠ‚ç‚¹æ•°ä¸è¶³ï¼Œå½“å‰ä»…å‰© {count} ä¸ªèŠ‚ç‚¹"
      severity: critical
  
  # æ•°æ®ä¸€è‡´æ€§å‘Šè­¦
  data-consistency:
    check-interval: 1m
    max-inconsistency-duration: 5m  # å…è®¸æœ€é•¿ä¸ä¸€è‡´æ—¶é—´
    alert:
      enabled: true
      message: "é›†ç¾¤æ•°æ®ä¸ä¸€è‡´å·²æŒç»­ {duration}"
      severity: high
  
  # ä¸»ä»åŒæ­¥å»¶è¿Ÿå‘Šè­¦
  replication-lag:
    threshold: 1000ms
    check-interval: 30s
    alert:
      enabled: true
      message: "ä¸»ä»åŒæ­¥å»¶è¿Ÿ {lag}msï¼Œè¶…è¿‡é˜ˆå€¼"
      severity: warning
```

### 6.3 é›†ç¾¤çŠ¶æ€æ£€æµ‹å®ç°


```java
/**
 * é›†ç¾¤çŠ¶æ€ç›‘æ§
 */
@Component
@Slf4j
public class ClusterStatusMonitor {
    
    @Autowired
    private NacosClusterClient clusterClient;
    
    @Autowired
    private AlertService alertService;
    
    /**
     * æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€
     */
    @Scheduled(cron = "0 * * * * ?") // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    public void checkClusterHealth() {
        
        // 1. æ£€æŸ¥èŠ‚ç‚¹æ•°é‡
        List<ClusterNode> nodes = clusterClient.getAllNodes();
        int aliveNodes = (int) nodes.stream()
            .filter(ClusterNode::isAlive)
            .count();
        
        if (aliveNodes < 2) {
            alertService.sendCriticalAlert(
                "é›†ç¾¤èŠ‚ç‚¹æ•°ä¸è¶³",
                String.format("å½“å‰ä»…å‰© %d ä¸ªå­˜æ´»èŠ‚ç‚¹ï¼Œä½äºæœ€å°è¦æ±‚2ä¸ª", aliveNodes)
            );
        }
        
        // 2. æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
        if (!checkDataConsistency(nodes)) {
            alertService.sendHighAlert(
                "é›†ç¾¤æ•°æ®ä¸ä¸€è‡´",
                "æ£€æµ‹åˆ°é›†ç¾¤èŠ‚ç‚¹é—´æ•°æ®ç‰ˆæœ¬ä¸ä¸€è‡´"
            );
        }
        
        // 3. æ£€æŸ¥åŒæ­¥å»¶è¿Ÿ
        long maxLag = nodes.stream()
            .filter(node -> !node.isLeader())
            .mapToLong(ClusterNode::getReplicationLag)
            .max()
            .orElse(0);
        
        if (maxLag > 1000) {
            alertService.sendWarningAlert(
                "ä¸»ä»åŒæ­¥å»¶è¿Ÿè¿‡é«˜",
                String.format("æœ€å¤§åŒæ­¥å»¶è¿Ÿ: %dms", maxLag)
            );
        }
    }
    
    /**
     * æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
     */
    private boolean checkDataConsistency(List<ClusterNode> nodes) {
        // è·å–æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ç‰ˆæœ¬å·
        Set<Long> versions = nodes.stream()
            .map(ClusterNode::getDataVersion)
            .collect(Collectors.toSet());
        
        // ç‰ˆæœ¬å·åº”è¯¥å…¨éƒ¨ç›¸åŒ
        return versions.size() == 1;
    }
}
```

---

## 7. ğŸŒ ç½‘ç»œåˆ†åŒºå‘Šè­¦


### 7.1 ä»€ä¹ˆæ˜¯ç½‘ç»œåˆ†åŒº


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä¸€ä¸ªç­çº§è¢«åˆ†æˆä¸¤ä¸ªæ•™å®¤ï¼Œä¸¤ä¸ªæ•™å®¤ä¹‹é—´çš„é—¨å…³ä¸Šäº†ï¼Œå­¦ç”Ÿä»¬æ— æ³•äº’ç›¸äº¤æµã€‚ç½‘ç»œåˆ†åŒºå°±æ˜¯è¿™ä¸ªæ„æ€â€”â€”é›†ç¾¤ä¸­çš„ä¸€éƒ¨åˆ†èŠ‚ç‚¹æ— æ³•å’Œå¦ä¸€éƒ¨åˆ†èŠ‚ç‚¹é€šä¿¡äº†ã€‚

**ç½‘ç»œåˆ†åŒºç¤ºæ„å›¾**ï¼š

```
æ­£å¸¸æƒ…å†µï¼ˆæ‰€æœ‰èŠ‚ç‚¹äº’é€šï¼‰ï¼š
    Nacos-1 â†â†’ Nacos-2 â†â†’ Nacos-3
       â†•         â†•         â†•
    æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½äº’ç›¸é€šä¿¡ âœ…

ç½‘ç»œåˆ†åŒºï¼ˆéƒ¨åˆ†èŠ‚ç‚¹éš”ç¦»ï¼‰ï¼š
    Nacos-1 â†â†’ Nacos-2   âœ‚ï¸   Nacos-3
       â†•         â†•              â†•
    åˆ†åŒº1ï¼ˆ2ä¸ªèŠ‚ç‚¹ï¼‰          åˆ†åŒº2ï¼ˆ1ä¸ªèŠ‚ç‚¹ï¼‰
    
åæœï¼šå¯èƒ½å‡ºç°ä¸¤ä¸ªLeaderï¼Œæ•°æ®ä¸ä¸€è‡´ âŒ
```

### 7.2 ç½‘ç»œåˆ†åŒºçš„å±å®³


**è„‘è£‚é—®é¢˜**ï¼ˆSplit-Brainï¼‰ï¼š

| é—®é¢˜ | è¯´æ˜ | å½±å“ |
|------|------|------|
| **åŒä¸»ç°è±¡** | ä¸¤ä¸ªåˆ†åŒºå„è‡ªé€‰å‡ºLeader | æ•°æ®å†™å…¥å†²çª |
| **æ•°æ®ä¸ä¸€è‡´** | ä¸åŒåˆ†åŒºçš„æ•°æ®ä¸åŒæ­¥ | æœåŠ¡å‘ç°ç»“æœä¸ä¸€è‡´ |
| **æœåŠ¡æ··ä¹±** | å®¢æˆ·ç«¯è¿æ¥ä¸åŒåˆ†åŒºçœ‹åˆ°ä¸åŒæ•°æ® | ä¸šåŠ¡é€»è¾‘é”™è¯¯ |

### 7.3 ç½‘ç»œåˆ†åŒºæ£€æµ‹


```java
/**
 * ç½‘ç»œåˆ†åŒºæ£€æµ‹å™¨
 */
@Component
public class NetworkPartitionDetector {
    
    @Autowired
    private List<String> clusterNodes;
    
    @Autowired
    private AlertService alertService;
    
    /**
     * å®šæœŸæ£€æµ‹ç½‘ç»œåˆ†åŒº
     */
    @Scheduled(fixedRate = 15000) // æ¯15ç§’æ£€æŸ¥ä¸€æ¬¡
    public void detectPartition() {
        
        // ä»æ¯ä¸ªèŠ‚ç‚¹è§†è§’æ£€æŸ¥èƒ½çœ‹åˆ°å“ªäº›èŠ‚ç‚¹
        Map<String, Set<String>> visibilityMap = new HashMap<>();
        
        for (String node : clusterNodes) {
            Set<String> visibleNodes = getVisibleNodes(node);
            visibilityMap.put(node, visibleNodes);
        }
        
        // åˆ†ææ˜¯å¦å­˜åœ¨ç½‘ç»œåˆ†åŒº
        if (hasNetworkPartition(visibilityMap)) {
            
            // æ‰¾å‡ºä¸åŒçš„åˆ†åŒº
            List<Set<String>> partitions = identifyPartitions(visibilityMap);
            
            alertService.sendCriticalAlert(
                "ã€ä¸¥é‡ã€‘æ£€æµ‹åˆ°ç½‘ç»œåˆ†åŒº",
                String.format("é›†ç¾¤è¢«åˆ†ä¸º %d ä¸ªåˆ†åŒºï¼š%s", 
                    partitions.size(), 
                    formatPartitions(partitions))
            );
        }
    }
    
    /**
     * è·å–ä»æŸä¸ªèŠ‚ç‚¹èƒ½çœ‹åˆ°çš„å…¶ä»–èŠ‚ç‚¹
     */
    private Set<String> getVisibleNodes(String fromNode) {
        Set<String> visible = new HashSet<>();
        
        for (String targetNode : clusterNodes) {
            if (canConnect(fromNode, targetNode)) {
                visible.add(targetNode);
            }
        }
        
        return visible;
    }
    
    /**
     * åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç½‘ç»œåˆ†åŒº
     */
    private boolean hasNetworkPartition(Map<String, Set<String>> visibilityMap) {
        
        // å¦‚æœæ‰€æœ‰èŠ‚ç‚¹çœ‹åˆ°çš„èŠ‚ç‚¹é›†åˆéƒ½ä¸€æ ·ï¼Œè¯´æ˜æ²¡æœ‰åˆ†åŒº
        Set<Set<String>> uniqueViews = new HashSet<>(visibilityMap.values());
        
        return uniqueViews.size() > 1;
    }
}
```

### 7.4 ç½‘ç»œåˆ†åŒºå‘Šè­¦é…ç½®


```yaml
# network-partition-alert.yml
network-partition:
  
  # æ£€æµ‹é…ç½®
  detection:
    interval: 15s  # æ£€æµ‹é—´éš”
    timeout: 3s    # è¿æ¥è¶…æ—¶æ—¶é—´
    
  # å‘Šè­¦é…ç½®
  alert:
    enabled: true
    
    # åˆ†åŒºå‘Šè­¦
    partition-detected:
      severity: critical
      notify:
        - sms
        - phone
        - dingding
      message: "æ£€æµ‹åˆ°ç½‘ç»œåˆ†åŒºï¼Œé›†ç¾¤è¢«åˆ†ä¸º{count}ä¸ªåˆ†åŒº"
    
    # è‡ªåŠ¨å¤„ç†ç­–ç•¥
    auto-handling:
      # è‡ªåŠ¨éš”ç¦»å°‘æ•°æ´¾åˆ†åŒº
      isolate-minority: true
      # ä¿ç•™å¤šæ•°æ´¾åˆ†åŒºç»§ç»­æœåŠ¡
      keep-majority: true
```

---

## 8. ğŸ’¾ èµ„æºä½¿ç”¨å‘Šè­¦


### 8.1 éœ€è¦ç›‘æ§çš„èµ„æºç±»å‹


**ç³»ç»Ÿèµ„æºç›‘æ§æ¸…å•**ï¼š

```
ğŸ”¸ CPUèµ„æº
   â”œâ”€â”€ CPUä½¿ç”¨ç‡ï¼šå½“å‰è´Ÿè½½æƒ…å†µ
   â”œâ”€â”€ CPUè´Ÿè½½ï¼šç³»ç»Ÿå‹åŠ›ç¨‹åº¦
   â””â”€â”€ å‘Šè­¦é˜ˆå€¼ï¼šä½¿ç”¨ç‡ > 85% æŒç»­3åˆ†é’Ÿ

ğŸ”¸ å†…å­˜èµ„æº
   â”œâ”€â”€ JVMå †å†…å­˜ï¼šJavaç¨‹åºä½¿ç”¨çš„å†…å­˜
   â”œâ”€â”€ ç³»ç»Ÿå†…å­˜ï¼šæ“ä½œç³»ç»Ÿå¯ç”¨å†…å­˜
   â””â”€â”€ å‘Šè­¦é˜ˆå€¼ï¼šä½¿ç”¨ç‡ > 90%

ğŸ”¸ ç£ç›˜èµ„æº
   â”œâ”€â”€ ç£ç›˜ä½¿ç”¨ç‡ï¼šå­˜å‚¨ç©ºé—´å ç”¨
   â”œâ”€â”€ ç£ç›˜IOï¼šè¯»å†™æ“ä½œé¢‘ç‡
   â””â”€â”€ å‘Šè­¦é˜ˆå€¼ï¼šä½¿ç”¨ç‡ > 80%

ğŸ”¸ ç½‘ç»œèµ„æº
   â”œâ”€â”€ ç½‘ç»œå¸¦å®½ï¼šæµé‡ä½¿ç”¨æƒ…å†µ
   â”œâ”€â”€ è¿æ¥æ•°ï¼šTCPè¿æ¥æ•°é‡
   â””â”€â”€ å‘Šè­¦é˜ˆå€¼ï¼šå¸¦å®½ä½¿ç”¨ > 80%
```

### 8.2 èµ„æºä½¿ç”¨å‘Šè­¦é…ç½®


```yaml
# resource-monitoring.yml
resource-alerts:
  
  # CPUå‘Šè­¦
  cpu:
    # ä½¿ç”¨ç‡å‘Šè­¦
    usage:
      warning-threshold: 70%    # è­¦å‘Šé˜ˆå€¼
      critical-threshold: 85%   # ä¸¥é‡é˜ˆå€¼
      duration: 3m              # æŒç»­æ—¶é—´
    
    # è´Ÿè½½å‘Šè­¦
    load:
      threshold: 8.0  # è´Ÿè½½å€¼
      duration: 5m
  
  # å†…å­˜å‘Šè­¦
  memory:
    # JVMå †å†…å­˜
    jvm-heap:
      warning-threshold: 80%
      critical-threshold: 90%
      
    # ç³»ç»Ÿå†…å­˜
    system:
      warning-threshold: 85%
      critical-threshold: 95%
  
  # ç£ç›˜å‘Šè­¦
  disk:
    # ä½¿ç”¨ç‡å‘Šè­¦
    usage:
      warning-threshold: 70%
      critical-threshold: 80%
      
    # IOå‘Šè­¦
    io:
      read-threshold: 100MB/s
      write-threshold: 100MB/s
  
  # ç½‘ç»œå‘Šè­¦
  network:
    bandwidth:
      warning-threshold: 800Mbps  # å‡è®¾æ€»å¸¦å®½1Gbps
      critical-threshold: 900Mbps
    
    connections:
      max-connections: 10000
      warning-threshold: 8000
```

### 8.3 èµ„æºç›‘æ§å®ç°


```java
/**
 * ç³»ç»Ÿèµ„æºç›‘æ§å™¨
 */
@Component
@Slf4j
public class SystemResourceMonitor {
    
    @Autowired
    private AlertService alertService;
    
    /**
     * ç›‘æ§CPUä½¿ç”¨ç‡
     */
    @Scheduled(fixedRate = 30000) // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
    public void monitorCPU() {
        
        // è·å–æ“ä½œç³»ç»ŸMBean
        OperatingSystemMXBean osBean = 
            ManagementFactory.getOperatingSystemMXBean();
        
        // CPUä½¿ç”¨ç‡ï¼ˆ0-1ä¹‹é—´çš„å€¼ï¼‰
        double cpuUsage = osBean.getSystemLoadAverage() / 
            osBean.getAvailableProcessors();
        
        if (cpuUsage > 0.85) {
            alertService.sendCriticalAlert(
                "CPUä½¿ç”¨ç‡è¿‡é«˜",
                String.format("å½“å‰CPUä½¿ç”¨ç‡: %.1f%%", cpuUsage * 100)
            );
        } else if (cpuUsage > 0.70) {
            alertService.sendWarningAlert(
                "CPUä½¿ç”¨ç‡åé«˜",
                String.format("å½“å‰CPUä½¿ç”¨ç‡: %.1f%%", cpuUsage * 100)
            );
        }
    }
    
    /**
     * ç›‘æ§å†…å­˜ä½¿ç”¨
     */
    @Scheduled(fixedRate = 60000) // æ¯1åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    public void monitorMemory() {
        
        Runtime runtime = Runtime.getRuntime();
        
        // JVMå†…å­˜ä¿¡æ¯
        long maxMemory = runtime.maxMemory();      // æœ€å¤§å†…å­˜
        long totalMemory = runtime.totalMemory();  // å·²åˆ†é…å†…å­˜
        long freeMemory = runtime.freeMemory();    // ç©ºé—²å†…å­˜
        long usedMemory = totalMemory - freeMemory; // å·²ä½¿ç”¨å†…å­˜
        
        double memoryUsage = (double) usedMemory / maxMemory;
        
        if (memoryUsage > 0.90) {
            alertService.sendCriticalAlert(
                "å†…å­˜ä½¿ç”¨ç‡å±é™©",
                String.format("JVMå†…å­˜ä½¿ç”¨ç‡: %.1f%%, å·²ä½¿ç”¨: %dMB/%dMB",
                    memoryUsage * 100,
                    usedMemory / 1024 / 1024,
                    maxMemory / 1024 / 1024)
            );
        }
    }
    
    /**
     * ç›‘æ§ç£ç›˜ç©ºé—´
     */
    @Scheduled(cron = "0 0 * * * ?") // æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
    public void monitorDisk() {
        
        File disk = new File("/");
        
        long totalSpace = disk.getTotalSpace();
        long freeSpace = disk.getFreeSpace();
        long usedSpace = totalSpace - freeSpace;
        
        double diskUsage = (double) usedSpace / totalSpace;
        
        if (diskUsage > 0.80) {
            alertService.sendCriticalAlert(
                "ç£ç›˜ç©ºé—´ä¸è¶³",
                String.format("ç£ç›˜ä½¿ç”¨ç‡: %.1f%%, å‰©ä½™ç©ºé—´: %.1fGB",
                    diskUsage * 100,
                    freeSpace / 1024.0 / 1024 / 1024)
            );
        }
    }
}
```

---

## 9. ğŸ”„ è‡ªåŠ¨æ¢å¤æœºåˆ¶


### 9.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ¢å¤


**é€šä¿—ç†è§£**ï¼šå°±åƒæ±½è½¦çš„è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿï¼Œå½“æ£€æµ‹åˆ°å±é™©æ—¶ä¼šè‡ªåŠ¨åˆ¹è½¦æˆ–è½¬å‘ã€‚è‡ªåŠ¨æ¢å¤æœºåˆ¶å°±æ˜¯å½“ç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼Œä¸éœ€è¦äººå·¥ä»‹å…¥ï¼Œç³»ç»Ÿè‡ªå·±å°±èƒ½é‡‡å–æªæ–½æ¢å¤æ­£å¸¸ã€‚

**è‡ªåŠ¨æ¢å¤åœºæ™¯**ï¼š

```
åœºæ™¯1ï¼šæœåŠ¡å®ä¾‹å‡æ­»
æ£€æµ‹ â†’ å¥åº·æ£€æŸ¥å¤±è´¥
æ¢å¤ â†’ è‡ªåŠ¨é‡å¯æœåŠ¡è¿›ç¨‹ âœ…

åœºæ™¯2ï¼šå†…å­˜æ³„æ¼
æ£€æµ‹ â†’ å†…å­˜ä½¿ç”¨ç‡æŒç»­ä¸Šå‡
æ¢å¤ â†’ è§¦å‘åƒåœ¾å›æ”¶ï¼Œå¿…è¦æ—¶é‡å¯ âœ…

åœºæ™¯3ï¼šç½‘ç»œæŠ–åŠ¨
æ£€æµ‹ â†’ è¿æ¥é¢‘ç¹æ–­å¼€
æ¢å¤ â†’ è‡ªåŠ¨é‡è¿ï¼Œåˆ‡æ¢å¤‡ç”¨çº¿è·¯ âœ…
```

### 9.2 è‡ªåŠ¨æ¢å¤ç­–ç•¥é…ç½®


```yaml
# auto-recovery.yml
auto-recovery:
  
  # æœåŠ¡å®ä¾‹è‡ªåŠ¨æ¢å¤
  service-instance:
    # å¥åº·æ£€æŸ¥å¤±è´¥è‡ªåŠ¨é‡å¯
    restart-on-unhealthy:
      enabled: true
      # è¿ç»­å¤±è´¥æ¬¡æ•°é˜ˆå€¼
      failure-threshold: 3
      # é‡å¯å‰ç­‰å¾…æ—¶é—´
      wait-before-restart: 30s
      # æœ€å¤§é‡å¯æ¬¡æ•°ï¼ˆé˜²æ­¢æ— é™é‡å¯ï¼‰
      max-restart-attempts: 5
    
  # å†…å­˜è‡ªåŠ¨æ¢å¤
  memory:
    # è‡ªåŠ¨åƒåœ¾å›æ”¶
    auto-gc:
      enabled: true
      # è§¦å‘é˜ˆå€¼
      threshold: 85%
      # GCå¤±è´¥åé‡å¯
      restart-if-gc-fails: true
    
  # ç½‘ç»œè‡ªåŠ¨æ¢å¤
  network:
    # è‡ªåŠ¨é‡è¿
    auto-reconnect:
      enabled: true
      max-retry: 3
      retry-interval: 5s
      
    # æ•…éšœè½¬ç§»
    failover:
      enabled: true
      # è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹
      switch-to-backup: true
```

### 9.3 è‡ªåŠ¨æ¢å¤å®ç°


```java
/**
 * è‡ªåŠ¨æ¢å¤ç®¡ç†å™¨
 */
@Component
@Slf4j
public class AutoRecoveryManager {
    
    @Autowired
    private ServiceInstanceManager instanceManager;
    
    @Autowired
    private AlertService alertService;
    
    /**
     * æœåŠ¡å®ä¾‹è‡ªåŠ¨æ¢å¤
     */
    public void recoverServiceInstance(String instanceId) {
        
        log.warn("æ£€æµ‹åˆ°æœåŠ¡å®ä¾‹ {} å¼‚å¸¸ï¼Œå¼€å§‹è‡ªåŠ¨æ¢å¤", instanceId);
        
        try {
            // æ­¥éª¤1ï¼šå°è¯•ä¼˜é›…å…³é—­
            boolean gracefulShutdown = instanceManager.gracefulShutdown(instanceId, 30);
            
            if (!gracefulShutdown) {
                log.warn("ä¼˜é›…å…³é—­å¤±è´¥ï¼Œæ‰§è¡Œå¼ºåˆ¶å…³é—­");
                instanceManager.forceShutdown(instanceId);
            }
            
            // æ­¥éª¤2ï¼šç­‰å¾…ä¸€æ®µæ—¶é—´
            Thread.sleep(5000);
            
            // æ­¥éª¤3ï¼šé‡æ–°å¯åŠ¨å®ä¾‹
            instanceManager.startInstance(instanceId);
            
            // æ­¥éª¤4ï¼šéªŒè¯æ¢å¤ç»“æœ
            if (instanceManager.isHealthy(instanceId)) {
                log.info("æœåŠ¡å®ä¾‹ {} è‡ªåŠ¨æ¢å¤æˆåŠŸ", instanceId);
                
                alertService.sendNormalAlert(
                    "æœåŠ¡å®ä¾‹å·²è‡ªåŠ¨æ¢å¤",
                    String.format("å®ä¾‹ %s å·²æˆåŠŸé‡å¯å¹¶æ¢å¤æ­£å¸¸", instanceId)
                );
            } else {
                throw new RuntimeException("é‡å¯åä»ä¸å¥åº·");
            }
            
        } catch (Exception e) {
            log.error("è‡ªåŠ¨æ¢å¤å¤±è´¥", e);
            
            // è‡ªåŠ¨æ¢å¤å¤±è´¥ï¼Œå‘é€ç´§æ€¥å‘Šè­¦
            alertService.sendCriticalAlert(
                "è‡ªåŠ¨æ¢å¤å¤±è´¥",
                String.format("å®ä¾‹ %s è‡ªåŠ¨æ¢å¤å¤±è´¥ï¼Œéœ€è¦äººå·¥ä»‹å…¥", instanceId)
            );
        }
    }
    
    /**
     * å†…å­˜è‡ªåŠ¨æ¢å¤
     */
    public void recoverMemory() {
        
        Runtime runtime = Runtime.getRuntime();
        long beforeGC = runtime.totalMemory() - runtime.freeMemory();
        
        log.warn("å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œæ‰§è¡Œåƒåœ¾å›æ”¶");
        
        // æ‰§è¡Œåƒåœ¾å›æ”¶
        System.gc();
        
        // ç­‰å¾…GCå®Œæˆ
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        
        long afterGC = runtime.totalMemory() - runtime.freeMemory();
        long freedMemory = beforeGC - afterGC;
        
        if (freedMemory > 0) {
            log.info("åƒåœ¾å›æ”¶æˆåŠŸï¼Œé‡Šæ”¾å†…å­˜: {}MB", 
                freedMemory / 1024 / 1024);
        } else {
            log.error("åƒåœ¾å›æ”¶æ— æ•ˆï¼Œå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼");
            
            alertService.sendCriticalAlert(
                "åƒåœ¾å›æ”¶æ— æ•ˆ",
                "å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå»ºè®®é‡å¯æœåŠ¡"
            );
        }
    }
    
    /**
     * ç½‘ç»œè¿æ¥è‡ªåŠ¨æ¢å¤
     */
    public void recoverNetworkConnection(String targetNode) {
        
        int maxRetry = 3;
        int retryCount = 0;
        
        while (retryCount < maxRetry) {
            try {
                log.info("å°è¯•é‡è¿èŠ‚ç‚¹ {} (ç¬¬{}æ¬¡)", targetNode, retryCount + 1);
                
                // å°è¯•å»ºç«‹è¿æ¥
                boolean connected = instanceManager.connect(targetNode);
                
                if (connected) {
                    log.info("é‡è¿æˆåŠŸ");
                    return;
                }
                
                retryCount++;
                Thread.sleep(5000); // ç­‰å¾…5ç§’åé‡è¯•
                
            } catch (Exception e) {
                log.error("é‡è¿å¤±è´¥", e);
                retryCount++;
            }
        }
        
        // é‡è¿å¤±è´¥ï¼Œå°è¯•åˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹
        log.warn("é‡è¿å¤±è´¥ï¼Œå°è¯•åˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹");
        String backupNode = instanceManager.getBackupNode(targetNode);
        
        if (backupNode != null) {
            instanceManager.switchToBackup(targetNode, backupNode);
            
            alertService.sendWarningAlert(
                "å·²åˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹",
                String.format("èŠ‚ç‚¹ %s è¿æ¥å¤±è´¥ï¼Œå·²åˆ‡æ¢åˆ° %s", 
                    targetNode, backupNode)
            );
        }
    }
}
```

### 9.4 è‡ªåŠ¨æ¢å¤å†³ç­–æ ‘


```
è‡ªåŠ¨æ¢å¤å†³ç­–æµç¨‹ï¼š

é—®é¢˜æ£€æµ‹
   â”œâ”€â”€ æ˜¯å¦å¯è‡ªåŠ¨æ¢å¤ï¼Ÿ
   â”‚   â”œâ”€â”€ æ˜¯ â†’ æ‰§è¡Œè‡ªåŠ¨æ¢å¤
   â”‚   â”‚      â”œâ”€â”€ æˆåŠŸ â†’ è®°å½•æ—¥å¿— + å‘é€é€šçŸ¥
   â”‚   â”‚      â””â”€â”€ å¤±è´¥ â†’ å‘é€å‘Šè­¦ + äººå·¥ä»‹å…¥
   â”‚   â””â”€â”€ å¦ â†’ ç›´æ¥å‘é€å‘Šè­¦ + äººå·¥ä»‹å…¥
   â”‚
   â””â”€â”€ æ¢å¤åéªŒè¯
       â”œâ”€â”€ å¥åº·æ£€æŸ¥é€šè¿‡ â†’ æ¢å¤æˆåŠŸ âœ…
       â””â”€â”€ å¥åº·æ£€æŸ¥å¤±è´¥ â†’ å‡çº§å‘Šè­¦ âŒ
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å‘Šè­¦é…ç½®çš„æ ¸å¿ƒç†å¿µ


**å‘Šè­¦é‡‘å­—å¡”åŸåˆ™**ï¼š

```
          ğŸ”¥ ç´§æ€¥å‘Šè­¦ï¼ˆP0ï¼‰
         /                \
      âš ï¸ é‡è¦å‘Šè­¦ï¼ˆP1ï¼‰
     /                      \
  ğŸ“Š ä¸€èˆ¬å‘Šè­¦ï¼ˆP2ï¼‰
 /                            \
ğŸ“ ä¿¡æ¯é€šçŸ¥ï¼ˆP3ï¼‰

ä»ä¸Šåˆ°ä¸‹ï¼š
- æ•°é‡é€’å‡ã€é¢‘ç‡é™ä½
- é‡è¦æ€§é™ä½ã€å“åº”æ—¶é—´æ”¾å®½
- é€šçŸ¥æ–¹å¼é€’å‡ï¼ˆç”µè¯â†’çŸ­ä¿¡â†’é‚®ä»¶â†’æ—¥å¿—ï¼‰
```

### 10.2 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æœåŠ¡ä¸‹çº¿å‘Šè­¦ï¼šç›‘æ§æœåŠ¡å¯ç”¨æ€§ï¼Œé˜²æ­¢ä¸šåŠ¡ä¸­æ–­
ğŸ”¸ å¥åº·æ£€æŸ¥å‘Šè­¦ï¼šåŠæ—¶å‘ç°æœåŠ¡å¼‚å¸¸ï¼Œé¢„é˜²æ•…éšœ
ğŸ”¸ æ³¨å†Œä¸­å¿ƒæ•…éšœå‘Šè­¦ï¼šä¿éšœæ ¸å¿ƒç»„ä»¶ç¨³å®šè¿è¡Œ
ğŸ”¸ æ€§èƒ½é˜ˆå€¼å‘Šè­¦ï¼šé¿å…æ€§èƒ½åŠ£åŒ–å½±å“ç”¨æˆ·ä½“éªŒ
ğŸ”¸ é›†ç¾¤çŠ¶æ€å‘Šè­¦ï¼šç¡®ä¿é›†ç¾¤å¥åº·å’Œæ•°æ®ä¸€è‡´
ğŸ”¸ ç½‘ç»œåˆ†åŒºå‘Šè­¦ï¼šé˜²æ­¢è„‘è£‚å¯¼è‡´æ•°æ®æ··ä¹±
ğŸ”¸ èµ„æºä½¿ç”¨å‘Šè­¦ï¼šé¿å…èµ„æºè€—å°½å¼•å‘ç³»ç»Ÿå´©æºƒ
ğŸ”¸ è‡ªåŠ¨æ¢å¤æœºåˆ¶ï¼šå‡å°‘äººå·¥ä»‹å…¥ï¼Œæé«˜å¯ç”¨æ€§
```

### 10.3 å‘Šè­¦é…ç½®æœ€ä½³å®è·µ


**â­â­â­ æ ¸å¿ƒåŸåˆ™**ï¼š

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **åˆ†çº§å‘Šè­¦** | æ ¹æ®ä¸¥é‡ç¨‹åº¦åˆ†çº§ | P0ç´§æ€¥ã€P1é‡è¦ã€P2ä¸€èˆ¬ |
| **é¿å…è¯¯æŠ¥** | è®¾ç½®åˆç†é˜ˆå€¼å’ŒæŒç»­æ—¶é—´ | æŒç»­3åˆ†é’Ÿæ‰å‘Šè­¦ |
| **åŠæ—¶é€šçŸ¥** | é€‰æ‹©åˆé€‚çš„é€šçŸ¥æ–¹å¼ | ç´§æ€¥ç”¨ç”µè¯ï¼Œä¸€èˆ¬ç”¨é‚®ä»¶ |
| **è‡ªåŠ¨æ¢å¤** | èƒ½è‡ªåŠ¨å¤„ç†çš„ä¸å‘Šè­¦ | è‡ªåŠ¨é‡å¯æˆåŠŸåªè®°å½•æ—¥å¿— |
| **å®šæœŸå¤ç›˜** | ä¼˜åŒ–å‘Šè­¦è§„åˆ™ | æ¯æœˆåˆ†æè¯¯æŠ¥ç‡ |

### 10.4 å‘Šè­¦é€šçŸ¥æ¸ é“é€‰æ‹©


```
ğŸ“± çŸ­ä¿¡/ç”µè¯
   â””â”€â”€ ä½¿ç”¨åœºæ™¯ï¼šP0çº§ç´§æ€¥å‘Šè­¦
   â””â”€â”€ ä¼˜ç‚¹ï¼šå³æ—¶åˆ°è¾¾
   â””â”€â”€ ç¼ºç‚¹ï¼šæˆæœ¬é«˜ï¼Œå®¹æ˜“æ‰“æ‰°

ğŸ“§ é‚®ä»¶
   â””â”€â”€ ä½¿ç”¨åœºæ™¯ï¼šP1/P2çº§å‘Šè­¦
   â””â”€â”€ ä¼˜ç‚¹ï¼šè¯¦ç»†ä¿¡æ¯ã€å¯è¿½æº¯
   â””â”€â”€ ç¼ºç‚¹ï¼šå¯èƒ½å»¶è¿Ÿã€å®¹æ˜“å¿½ç•¥

ğŸ’¬ å³æ—¶é€šè®¯ï¼ˆé’‰é’‰/ä¼ä¸šå¾®ä¿¡ï¼‰
   â””â”€â”€ ä½¿ç”¨åœºæ™¯ï¼šæ‰€æœ‰çº§åˆ«å‘Šè­¦
   â””â”€â”€ ä¼˜ç‚¹ï¼šä¾¿æ·ã€æ”¯æŒç¾¤èŠ
   â””â”€â”€ ç¼ºç‚¹ï¼šéœ€è¦åœ¨çº¿

ğŸ“Š ç›‘æ§é¢æ¿
   â””â”€â”€ ä½¿ç”¨åœºæ™¯ï¼šæŒç»­ç›‘æ§
   â””â”€â”€ ä¼˜ç‚¹ï¼šå¯è§†åŒ–ã€è¶‹åŠ¿åˆ†æ
   â””â”€â”€ ç¼ºç‚¹ï¼šéœ€è¦ä¸»åŠ¨æŸ¥çœ‹
```

### 10.5 å®æˆ˜ç»éªŒæ€»ç»“


**ğŸ¯ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**ï¼š

1. **å‘Šè­¦å¤ªå¤šå¯¼è‡´éº»æœ¨**
   - é—®é¢˜ï¼šæ¯å¤©å‡ ç™¾æ¡å‘Šè­¦ï¼Œè¿ç»´äººå‘˜ç–²äºåº”å¯¹
   - è§£å†³ï¼šæé«˜é˜ˆå€¼ï¼Œåˆå¹¶åŒç±»å‘Šè­¦ï¼Œè®¾ç½®å‘Šè­¦é¢‘ç‡é™åˆ¶

2. **è¯¯æŠ¥ç‡é«˜**
   - é—®é¢˜ï¼šé¢‘ç¹æ”¶åˆ°å‘Šè­¦ä½†æ£€æŸ¥åå‘ç°æ­£å¸¸
   - è§£å†³ï¼šå¢åŠ æŒç»­æ—¶é—´åˆ¤æ–­ï¼Œä½¿ç”¨åŠ¨æ€é˜ˆå€¼

3. **å…³é”®å‘Šè­¦è¢«æ·¹æ²¡**
   - é—®é¢˜ï¼šé‡è¦å‘Šè­¦æ··åœ¨ä¸€å †æ™®é€šå‘Šè­¦ä¸­è¢«å¿½ç•¥
   - è§£å†³ï¼šä¸¥æ ¼åˆ†çº§ï¼ŒP0çº§ç‹¬ç«‹é€šé“

4. **å‘Šè­¦å“åº”ä¸åŠæ—¶**
   - é—®é¢˜ï¼šæ”¶åˆ°å‘Šè­¦ä½†æ— äººå¤„ç†
   - è§£å†³ï¼šå»ºç«‹å€¼ç­åˆ¶åº¦ï¼Œå‘Šè­¦å‡çº§æœºåˆ¶

**æ ¸å¿ƒè®°å¿†**ï¼š
- å‘Šè­¦ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯è¶Šå‡†è¶Šå¥½
- èƒ½è‡ªåŠ¨æ¢å¤çš„é—®é¢˜ä¸è¦å‘å‘Šè­¦
- åˆ†çº§ç®¡ç†ï¼Œé‡è¦çš„äº‹æƒ…ç‰¹æ®Šå¤„ç†
- å®šæœŸä¼˜åŒ–å‘Šè­¦è§„åˆ™ï¼Œé¿å…"ç‹¼æ¥äº†"æ•ˆåº”