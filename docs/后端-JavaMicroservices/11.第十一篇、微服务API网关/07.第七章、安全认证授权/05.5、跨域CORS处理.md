---
title: 5ã€è·¨åŸŸCORSå¤„ç†
---
## ğŸ“š ç›®å½•

1. [è·¨åŸŸé—®é¢˜çš„æœ¬è´¨](#1-è·¨åŸŸé—®é¢˜çš„æœ¬è´¨)
2. [CORSè·¨åŸŸåŸç†](#2-CORSè·¨åŸŸåŸç†)
3. [é¢„æ£€è¯·æ±‚æœºåˆ¶](#3-é¢„æ£€è¯·æ±‚æœºåˆ¶)
4. [å…è®¸æ¥æºé…ç½®](#4-å…è®¸æ¥æºé…ç½®)
5. [å…è®¸æ–¹æ³•é…ç½®](#5-å…è®¸æ–¹æ³•é…ç½®)
6. [å…è®¸å¤´éƒ¨é…ç½®](#6-å…è®¸å¤´éƒ¨é…ç½®)
7. [å‡­è¯ä¼ é€’é…ç½®](#7-å‡­è¯ä¼ é€’é…ç½®)
8. [å®æˆ˜é…ç½®æ¡ˆä¾‹](#8-å®æˆ˜é…ç½®æ¡ˆä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ è·¨åŸŸé—®é¢˜çš„æœ¬è´¨


### 1.1 ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜


**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
æƒ³è±¡ä½ åœ¨ä¸€å®¶é“¶è¡Œï¼ˆç½‘ç«™Aï¼‰åŠä¸šåŠ¡ï¼Œé“¶è¡Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸å…è®¸ä½ ç›´æ¥å»éš”å£çš„è¯åˆ¸å…¬å¸ï¼ˆç½‘ç«™Bï¼‰å¸®ä½ æŸ¥è´¦æˆ·ã€‚è¿™å°±æ˜¯æµè§ˆå™¨çš„"åŒæºç­–ç•¥" - ä¸ºäº†ä¿æŠ¤ç”¨æˆ·å®‰å…¨è€Œè®¾ç½®çš„é™åˆ¶ã€‚

```
ğŸ¦ çœŸå®åœºæ™¯ä¸¾ä¾‹ï¼š

å‰ç«¯é¡µé¢ï¼šhttp://www.myshop.com
æƒ³è®¿é—®ï¼šhttp://api.myshop.com/products

é—®é¢˜ï¼šè™½ç„¶æ˜¯åŒä¸€ä¸ªå…¬å¸çš„ç½‘ç«™ï¼Œä½†æµè§ˆå™¨è®¤ä¸ºï¼š
â€¢ åŸŸåä¸åŒï¼ˆwww.myshop.com vs api.myshop.comï¼‰
â€¢ è¿™æ˜¯"è·¨åŸŸè®¿é—®"ï¼Œé»˜è®¤ä¼šè¢«æ‹¦æˆªï¼

ç»“æœï¼šå‰ç«¯çœ‹åˆ°æŠ¥é”™ âŒ
"Access to XMLHttpRequest has been blocked by CORS policy"
```

### 1.2 åŒæºç­–ç•¥è¯¦è§£


**ğŸ”’ ä»€ä¹ˆç®—"åŒæº"ï¼Ÿ**

è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶æ‰ç®—åŒæºï¼ˆå°±åƒèº«ä»½éªŒè¯çš„ä¸‰è¦ç´ ï¼‰ï¼š

```
åŒæºåˆ¤æ–­æ ‡å‡†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åè®®ç›¸åŒ  http:// vs https://     â”‚
â”‚ 2. åŸŸåç›¸åŒ  www.a.com vs www.b.com  â”‚  
â”‚ 3. ç«¯å£ç›¸åŒ  :80 vs :8080            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®ä¾‹å¯¹æ¯”ï¼š
å½“å‰é¡µé¢ï¼šhttp://www.example.com:80/page

âœ… åŒæºï¼šhttp://www.example.com:80/api
âœ… åŒæºï¼šhttp://www.example.com/other

âŒ è·¨åŸŸï¼šhttps://www.example.com  ï¼ˆåè®®ä¸åŒï¼‰
âŒ è·¨åŸŸï¼šhttp://api.example.com   ï¼ˆåŸŸåä¸åŒï¼‰
âŒ è·¨åŸŸï¼šhttp://www.example.com:8080 ï¼ˆç«¯å£ä¸åŒï¼‰
```

### 1.3 ä¸ºä»€ä¹ˆä¼šæœ‰åŒæºç­–ç•¥


**ğŸ›¡ï¸ å®‰å…¨ä¿æŠ¤æœºåˆ¶**ï¼š

```
å‡è®¾æ²¡æœ‰åŒæºç­–ç•¥ä¼šæ€æ ·ï¼Ÿ

å±é™©åœºæ™¯ï¼š
1. ä½ ç™»å½•äº†ç½‘é“¶ bank.com
2. åŒæ—¶æ‰“å¼€äº†æ¶æ„ç½‘ç«™ evil.com
3. æ¶æ„ç½‘ç«™çš„JSä»£ç å¯ä»¥ï¼š
   â†’ è¯»å–ä½ åœ¨bank.comçš„ç™»å½•ä¿¡æ¯
   â†’ ç”¨ä½ çš„èº«ä»½è½¬è´¦
   â†’ çªƒå–ä½ çš„è´¦æˆ·æ•°æ®

æœ‰äº†åŒæºç­–ç•¥ï¼š
âœ… evil.comæ— æ³•è®¿é—®bank.comçš„æ•°æ®
âœ… evil.comæ— æ³•ä»¥ä½ çš„èº«ä»½æ“ä½œbank.com
âœ… æ¯ä¸ªç½‘ç«™éƒ½åœ¨è‡ªå·±çš„"å®‰å…¨æ²™ç›’"é‡Œ
```

**ğŸ’¡ ç°å®éœ€æ±‚å†²çª**ï¼š
```
é—®é¢˜ï¼šå‰åç«¯åˆ†ç¦»æ¶æ„æ€ä¹ˆåŠï¼Ÿ
ç°ä»£å¼€å‘æ¨¡å¼ï¼š
å‰ç«¯ï¼šhttp://localhost:3000  ï¼ˆReact/Vueå¼€å‘æœåŠ¡å™¨ï¼‰
åç«¯ï¼šhttp://localhost:8080  ï¼ˆSpring Bootåº”ç”¨ï¼‰

çŸ›ç›¾ç‚¹ï¼š
â€¢ éœ€è¦ï¼šå‰ç«¯è°ƒç”¨åç«¯API
â€¢ é™åˆ¶ï¼šæµè§ˆå™¨æ‹¦æˆªè·¨åŸŸè¯·æ±‚

è§£å†³æ–¹æ¡ˆï¼šCORSåè®® â† æœ¬ç« é‡ç‚¹ï¼
```

---

## 2. ğŸ”„ CORSè·¨åŸŸåŸç†


### 2.1 CORSæ˜¯ä»€ä¹ˆ


**Cross-Origin Resource Sharingï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰**

**é€šä¿—è§£é‡Š**ï¼š
å°±åƒç»™æµè§ˆå™¨å‘äº†ä¸€å¼ "é€šè¡Œè¯"ï¼Œå‘Šè¯‰å®ƒ"è¿™ä¸ªè·¨åŸŸè¯·æ±‚æ˜¯å®‰å…¨çš„ï¼Œæˆ‘å…è®¸å®ƒè®¿é—®"ã€‚

```
ğŸ« CORSå·¥ä½œæµç¨‹ï¼š

æµè§ˆå™¨ï¼šèƒ½è®¿é—®api.example.comå—ï¼Ÿ
åç«¯ï¼š  å¯ä»¥ï¼æˆ‘åœ¨å“åº”å¤´é‡ŒåŠ äº†å…è®¸æ ‡è®°
æµè§ˆå™¨ï¼šå¥½çš„ï¼Œé‚£æˆ‘å°±æ”¾è¡Œäº†

æŠ€æœ¯å®ç°ï¼š
æµè§ˆå™¨å‘è¯·æ±‚ â†’ 
åç«¯è¿”å›å“åº”å¤´ï¼ˆAccess-Control-Allow-Origin: *ï¼‰â†’ 
æµè§ˆå™¨æ£€æŸ¥å“åº”å¤´ â†’ 
å…è®¸å‰ç«¯è·å–æ•°æ®
```

### 2.2 CORSæ ¸å¿ƒå“åº”å¤´


**ğŸ“‹ å…³é”®HTTPå“åº”å¤´è§£æ**ï¼š

| å“åº”å¤´ | **ä½œç”¨** | **ç¤ºä¾‹å€¼** |
|--------|----------|------------|
| `Access-Control-Allow-Origin` | å…è®¸å“ªäº›åŸŸåè®¿é—® | `http://localhost:3000` |
| `Access-Control-Allow-Methods` | å…è®¸å“ªäº›HTTPæ–¹æ³• | `GET, POST, PUT` |
| `Access-Control-Allow-Headers` | å…è®¸å“ªäº›è¯·æ±‚å¤´ | `Content-Type, Authorization` |
| `Access-Control-Allow-Credentials` | æ˜¯å¦å…è®¸å‘é€Cookie | `true` |
| `Access-Control-Max-Age` | é¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´ | `3600`ï¼ˆ1å°æ—¶ï¼‰ |

**ğŸ”¸ æœ€å…³é”®çš„å“åº”å¤´**ï¼š
```
Access-Control-Allow-Origin: http://localhost:3000

è¿™è¡Œä»£ç çš„æ„æ€ï¼š
"æˆ‘ï¼ˆåç«¯ï¼‰å…è®¸æ¥è‡ª http://localhost:3000 çš„å‰ç«¯è®¿é—®æˆ‘"

å°±åƒé—¨å«è¯´ï¼š"åªæœ‰xxxå…¬å¸çš„å‘˜å·¥æ‰èƒ½è¿›å…¥"
```

### 2.3 CORSä¸¤ç§è¯·æ±‚ç±»å‹


**ğŸ¯ ç®€å•è¯·æ±‚ vs é¢„æ£€è¯·æ±‚**ï¼š

```
ç®€å•è¯·æ±‚ï¼ˆSimple Requestï¼‰ï¼š
æ»¡è¶³æ¡ä»¶ï¼š
1. æ–¹æ³•æ˜¯ GETã€HEADã€POST ä¹‹ä¸€
2. è¯·æ±‚å¤´åªåŒ…å«åŸºæœ¬å­—æ®µ
3. Content-Type åªèƒ½æ˜¯ç‰¹å®šå€¼

ç‰¹ç‚¹ï¼šç›´æ¥å‘é€ï¼Œä¸€æ¬¡HTTPè¯·æ±‚æå®š
æµç¨‹ï¼šæµè§ˆå™¨ â†’ åç«¯ â†’ è¿”å›æ•°æ®

é¢„æ£€è¯·æ±‚ï¼ˆPreflight Requestï¼‰ï¼š
ä¸æ»¡è¶³ç®€å•è¯·æ±‚çš„éƒ½æ˜¯é¢„æ£€è¯·æ±‚
æ¯”å¦‚ï¼š
â€¢ ä½¿ç”¨äº† PUTã€DELETE æ–¹æ³•
â€¢ è‡ªå®šä¹‰äº†è¯·æ±‚å¤´ï¼ˆå¦‚ Authorizationï¼‰
â€¢ Content-Type æ˜¯ application/json

ç‰¹ç‚¹ï¼šéœ€è¦å…ˆ"é—®ä¸€ä¸‹"ï¼Œä¸¤æ¬¡HTTPè¯·æ±‚
æµç¨‹ï¼š
  æµè§ˆå™¨ â†’ OPTIONSè¯·æ±‚ï¼ˆé¢„æ£€ï¼‰ â†’ åç«¯ç¡®è®¤
       â†’ å®é™…è¯·æ±‚ â†’ åç«¯è¿”å›æ•°æ®
```

**ğŸ“Š è¯·æ±‚æµç¨‹å¯¹æ¯”**ï¼š
```
ç®€å•è¯·æ±‚ï¼š
å‰ç«¯ â”€â”€â”€â”€GET/POSTâ”€â”€â”€â”€> åç«¯
     <â”€â”€â”€â”€æ•°æ®+CORSå¤´â”€â”€ 

é¢„æ£€è¯·æ±‚ï¼š
å‰ç«¯ â”€â”€â”€â”€OPTIONSâ”€â”€â”€â”€> åç«¯ï¼ˆé¢„æ£€ï¼‰
     <â”€â”€â”€â”€å…è®¸å“åº”â”€â”€â”€ 
     â”€â”€â”€â”€PUT/DELETEâ”€â”€> åç«¯ï¼ˆå®é™…è¯·æ±‚ï¼‰
     <â”€â”€â”€â”€æ•°æ®+CORSå¤´â”€â”€
```

---

## 3. ğŸ” é¢„æ£€è¯·æ±‚æœºåˆ¶


### 3.1 é¢„æ£€è¯·æ±‚è§¦å‘æ¡ä»¶


**ä»€ä¹ˆæ—¶å€™ä¼šå‘é€é¢„æ£€è¯·æ±‚ï¼Ÿ**

```
è§¦å‘é¢„æ£€çš„å¸¸è§æƒ…å†µï¼š

1ï¸âƒ£ ä½¿ç”¨äº†ç‰¹æ®ŠHTTPæ–¹æ³•
   PUTã€DELETEã€PATCHã€CONNECT ç­‰

2ï¸âƒ£ å‘é€äº†è‡ªå®šä¹‰è¯·æ±‚å¤´
   Authorizationã€X-Custom-Header ç­‰

3ï¸âƒ£ Content-Typeä¸æ˜¯ç®€å•ç±»å‹
   application/json       â† æœ€å¸¸è§ï¼
   application/xml
   text/plain            â† è¿™ä¸ªä¸è§¦å‘

å®é™…å¼€å‘ä¸­æœ€å¸¸è§çš„è§¦å‘åœºæ™¯ï¼š
å‰ç«¯å‘é€JSONæ•°æ®ï¼š
fetch('/api/users', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'  â† è§¦å‘é¢„æ£€
  },
  body: JSON.stringify({name: 'Zhang'})
})
```

### 3.2 é¢„æ£€è¯·æ±‚è¯¦è§£


**ğŸ”¬ OPTIONSè¯·æ±‚åˆ†æ**ï¼š

```
é¢„æ£€è¯·æ±‚ç¤ºä¾‹ï¼š
OPTIONS /api/users HTTP/1.1
Host: api.example.com
Origin: http://localhost:3000
Access-Control-Request-Method: POST        â† å®é™…è¦ç”¨çš„æ–¹æ³•
Access-Control-Request-Headers: content-type â† å®é™…è¦ç”¨çš„è¯·æ±‚å¤´

è¿™ä¸ªè¯·æ±‚åœ¨é—®ï¼š
"æˆ‘æƒ³ç”¨POSTæ–¹æ³•ï¼Œå‘é€content-typeå¤´ï¼Œå¯ä»¥å—ï¼Ÿ"

æœåŠ¡å™¨å“åº”ï¼š
HTTP/1.1 200 OK
Access-Control-Allow-Origin: http://localhost:3000
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: content-type
Access-Control-Max-Age: 3600

æœåŠ¡å™¨å›ç­”ï¼š
"å¯ä»¥ï¼POSTæ–¹æ³•å…è®¸ï¼Œcontent-typeå¤´ä¹Ÿå…è®¸ï¼Œ
è€Œä¸”è¿™ä¸ªè®¸å¯1å°æ—¶å†…æœ‰æ•ˆï¼Œä¸ç”¨é‡å¤é—®"
```

### 3.3 é¢„æ£€è¯·æ±‚ä¼˜åŒ–


**âš¡ å‡å°‘é¢„æ£€è¯·æ±‚æ¬¡æ•°**ï¼š

```
é—®é¢˜ï¼šæ¯æ¬¡è¯·æ±‚éƒ½é¢„æ£€ï¼Œæ€§èƒ½å¼€é”€å¤§
å‰ç«¯å‘100ä¸ªè¯·æ±‚ â†’ å®é™…å‘200ä¸ªï¼ˆ100ä¸ªé¢„æ£€+100ä¸ªçœŸå®ï¼‰

è§£å†³æ–¹æ¡ˆï¼š
1ï¸âƒ£ è®¾ç½®ç¼“å­˜æ—¶é—´ï¼ˆæ¨èï¼‰
   Access-Control-Max-Age: 86400  # 24å°æ—¶
   
   æ•ˆæœï¼š24å°æ—¶å†…ç›¸åŒè¯·æ±‚ä¸å†é¢„æ£€

2ï¸âƒ£ ä½¿ç”¨ç®€å•è¯·æ±‚ï¼ˆæœ‰é™åˆ¶ï¼‰
   â€¢ æ”¹ç”¨GET/POSTæ–¹æ³•
   â€¢ ä¸ç”¨è‡ªå®šä¹‰å¤´
   â€¢ Content-Typeç”¨ application/x-www-form-urlencoded
   
   é™åˆ¶ï¼šä¸é€‚åˆRESTful API

3ï¸âƒ£ ä»£ç†è½¬å‘ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
   å‰ç«¯é…ç½®ä»£ç†ï¼Œå˜æˆ"åŒæºè¯·æ±‚"
   åªåœ¨å¼€å‘æ—¶ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯è¦CORS
```

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**ï¼š
```
å¼€å‘ç¯å¢ƒï¼š
â€¢ ä½¿ç”¨å‰ç«¯ä»£ç†ï¼ˆwebpack/vite devServerï¼‰
â€¢ ä¸ç”¨å¤„ç†CORSï¼Œå¼€å‘ä½“éªŒå¥½

ç”Ÿäº§ç¯å¢ƒï¼š
â€¢ åç«¯é…ç½®CORS
â€¢ è®¾ç½®åˆç†çš„Max-Ageï¼ˆ1å°æ—¶åˆ°1å¤©ï¼‰
â€¢ æ˜ç¡®å…è®¸çš„æ¥æºï¼Œä¸è¦ç”¨ *
```

---

## 4. ğŸŒ å…è®¸æ¥æºé…ç½®


### 4.1 å…è®¸æ¥æºçš„å«ä¹‰


**Access-Control-Allow-Origin å“åº”å¤´**

**é€šä¿—ç†è§£**ï¼š
å°±åƒå°åŒºé—¨ç¦çš„"ç™½åå•"ï¼Œåªæœ‰åœ¨åå•ä¸Šçš„è®¿å®¢æ‰èƒ½è¿›å…¥ã€‚

```
é…ç½®æ–¹å¼å¯¹æ¯”ï¼š

1ï¸âƒ£ å…è®¸æ‰€æœ‰æ¥æºï¼ˆä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰
   Access-Control-Allow-Origin: *
   
   å°±åƒï¼šå°åŒºå¤§é—¨æ•å¼€ï¼Œä»»ä½•äººéƒ½èƒ½è¿›
   é£é™©ï¼šä»»ä½•ç½‘ç«™éƒ½èƒ½è°ƒç”¨ä½ çš„API

2ï¸âƒ£ å…è®¸å•ä¸ªæ¥æºï¼ˆæ¨èï¼‰
   Access-Control-Allow-Origin: http://localhost:3000
   
   å°±åƒï¼šé—¨ç¦åªè®¤è¿™ä¸€ä¸ªè®¿å®¢
   å®‰å…¨ï¼šåªæœ‰æŒ‡å®šç½‘ç«™èƒ½è°ƒç”¨API

3ï¸âƒ£ åŠ¨æ€å…è®¸å¤šä¸ªæ¥æºï¼ˆæœ€å¸¸ç”¨ï¼‰
   æ ¹æ®è¯·æ±‚çš„OriginåŠ¨æ€è¿”å›å¯¹åº”å€¼
   
   å°±åƒï¼šé—¨å«æ£€æŸ¥è®¿å®¢åç‰‡ï¼Œæ˜¯ç™½åå•ä¸Šçš„å°±æ”¾è¡Œ
   çµæ´»ï¼šæ”¯æŒå¤šä¸ªå‰ç«¯åŸŸå
```

### 4.2 Spring Booté…ç½®æ–¹å¼


**ğŸ”§ æ–¹å¼ä¸€ï¼šå…¨å±€é…ç½®ç±»**

```java
@Configuration
public class CorsConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        
        CorsConfiguration config = new CorsConfiguration();
        
        // å…è®¸çš„æ¥æºï¼ˆå¯ä»¥é…ç½®å¤šä¸ªï¼‰
        config.addAllowedOrigin("http://localhost:3000");
        config.addAllowedOrigin("http://localhost:8081");
        // æˆ–è€…å…è®¸æ‰€æœ‰ï¼ˆä¸æ¨èç”Ÿäº§ï¼‰
        // config.addAllowedOriginPattern("*");
        
        // å…è®¸çš„æ–¹æ³•
        config.addAllowedMethod("*");  // æ‰€æœ‰æ–¹æ³•
        
        // å…è®¸çš„è¯·æ±‚å¤´
        config.addAllowedHeader("*");  // æ‰€æœ‰è¯·æ±‚å¤´
        
        // å…è®¸å‘é€Cookie
        config.setAllowCredentials(true);
        
        // é¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
        config.setMaxAge(3600L);
        
        // å¯¹æ‰€æœ‰è·¯å¾„ç”Ÿæ•ˆ
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

**ğŸ¯ æ–¹å¼äºŒï¼šæ³¨è§£æ–¹å¼ï¼ˆé€‚åˆä¸ªåˆ«æ¥å£ï¼‰**

```java
@RestController
@RequestMapping("/api")
// ç±»çº§åˆ«é…ç½®CORS
@CrossOrigin(
    origins = "http://localhost:3000",
    maxAge = 3600
)
public class UserController {
    
    @GetMapping("/users")
    public List<User> getUsers() {
        return userService.findAll();
    }
    
    // æ–¹æ³•çº§åˆ«è¦†ç›–é…ç½®
    @PostMapping("/users")
    @CrossOrigin(origins = "http://admin.example.com")
    public User createUser(@RequestBody User user) {
        return userService.save(user);
    }
}
```

### 4.3 åŠ¨æ€æ¥æºé…ç½®


**ğŸ”„ æ ¹æ®ç¯å¢ƒåŠ¨æ€é…ç½®**ï¼š

```java
@Configuration
public class DynamicCorsConfig {
    
    @Value("${cors.allowed-origins}")
    private String[] allowedOrigins;  // ä»é…ç½®æ–‡ä»¶è¯»å–
    
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        
        // åŠ¨æ€æ·»åŠ å…è®¸çš„æ¥æº
        for (String origin : allowedOrigins) {
            config.addAllowedOrigin(origin);
        }
        
        config.addAllowedMethod("*");
        config.addAllowedHeader("*");
        config.setAllowCredentials(true);
        config.setMaxAge(3600L);
        
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

**ğŸ“ é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰**ï¼š
```yaml
cors:
  allowed-origins:
    - http://localhost:3000          # å¼€å‘ç¯å¢ƒ
    - http://localhost:8081          # æµ‹è¯•ç¯å¢ƒ  
    - https://www.myapp.com          # ç”Ÿäº§ç¯å¢ƒ
    - https://admin.myapp.com        # åå°ç®¡ç†
```

### 4.4 å®‰å…¨æ³¨æ„äº‹é¡¹


**âš ï¸ å¸¸è§å®‰å…¨é™·é˜±**ï¼š

```
âŒ é”™è¯¯åšæ³•1ï¼šç”Ÿäº§ç¯å¢ƒç”¨é€šé…ç¬¦
Access-Control-Allow-Origin: *
Access-Control-Allow-Credentials: true

é—®é¢˜ï¼šè¿™ä¸ªç»„åˆæ˜¯è¢«ç¦æ­¢çš„ï¼
æµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œè¯·æ±‚å¤±è´¥

âŒ é”™è¯¯åšæ³•2ï¼šç›´æ¥åå°„Origin
// å±é™©ä»£ç 
String origin = request.getHeader("Origin");
response.setHeader("Access-Control-Allow-Origin", origin);

é—®é¢˜ï¼šä»»ä½•ç½‘ç«™éƒ½èƒ½é€šè¿‡ï¼Œç­‰äºæ²¡æœ‰ä¿æŠ¤

âœ… æ­£ç¡®åšæ³•ï¼šç™½åå•éªŒè¯
Set<String> allowedOrigins = Set.of(
    "http://localhost:3000",
    "https://www.myapp.com"
);

String origin = request.getHeader("Origin");
if (allowedOrigins.contains(origin)) {
    response.setHeader("Access-Control-Allow-Origin", origin);
}
```

**ğŸ›¡ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
```
1. æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸåï¼Œä¸ç”¨ *
2. ä½¿ç”¨HTTPSï¼Œé¿å…ä¸­é—´äººæ”»å‡»
3. å®šæœŸå®¡æŸ¥å…è®¸çš„æ¥æºåˆ—è¡¨
4. æ•æ„Ÿæ“ä½œå¢åŠ é¢å¤–éªŒè¯ï¼ˆå¦‚éªŒè¯ç ï¼‰
5. ç›‘æ§å¼‚å¸¸çš„è·¨åŸŸè¯·æ±‚
```

---

## 5. ğŸ”§ å…è®¸æ–¹æ³•é…ç½®


### 5.1 HTTPæ–¹æ³•æ§åˆ¶


**Access-Control-Allow-Methods å“åº”å¤´**

**ç†è§£è¦ç‚¹**ï¼š
æ§åˆ¶å‰ç«¯èƒ½ç”¨å“ªäº›HTTPæ–¹æ³•è®¿é—®APIï¼Œå°±åƒè§„å®šè®¿å®¢åªèƒ½èµ°æ­£é—¨ï¼Œä¸èƒ½ç¿»çª—æˆ·ã€‚

```
å¸¸è§HTTPæ–¹æ³•ï¼š
GET    â†’ æŸ¥è¯¢æ•°æ®ï¼ˆæŸ¥çœ‹ï¼‰
POST   â†’ åˆ›å»ºæ•°æ®ï¼ˆæ–°å»ºï¼‰
PUT    â†’ æ›´æ–°æ•°æ®ï¼ˆä¿®æ”¹ï¼‰
DELETE â†’ åˆ é™¤æ•°æ®ï¼ˆåˆ é™¤ï¼‰
PATCH  â†’ éƒ¨åˆ†æ›´æ–°ï¼ˆå±€éƒ¨ä¿®æ”¹ï¼‰
OPTIONS â†’ é¢„æ£€è¯·æ±‚ï¼ˆè¯¢é—®æƒé™ï¼‰

é…ç½®ç¤ºä¾‹ï¼š
Access-Control-Allow-Methods: GET, POST, PUT, DELETE

æ„æ€ï¼šå…è®¸è¿™4ç§æ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ï¼ˆå¦‚PATCHï¼‰ä¸å…è®¸
```

### 5.2 æ–¹æ³•é…ç½®å®è·µ


**ğŸ¯ æ ¹æ®ä¸šåŠ¡éœ€æ±‚é…ç½®**ï¼š

```java
@Configuration
public class CorsMethodConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        
        // åœºæ™¯1ï¼šåªè¯»APIï¼ˆå¦‚å…¬å¼€æ•°æ®å±•ç¤ºï¼‰
        config.setAllowedMethods(Arrays.asList("GET", "HEAD", "OPTIONS"));
        
        // åœºæ™¯2ï¼šå®Œæ•´CRUDæ“ä½œï¼ˆéœ€è¦ç™»å½•çš„ç®¡ç†åå°ï¼‰
        config.setAllowedMethods(Arrays.asList(
            "GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"
        ));
        
        // åœºæ™¯3ï¼šå…è®¸æ‰€æœ‰æ–¹æ³•ï¼ˆæœ€å®½æ¾ï¼Œé€‚åˆå†…éƒ¨ç³»ç»Ÿï¼‰
        config.addAllowedMethod("*");
        
        // å…¶ä»–é…ç½®...
        config.addAllowedOrigin("http://localhost:3000");
        config.addAllowedHeader("*");
        
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

**ğŸ“‹ ä¸åŒè·¯å¾„ä¸åŒæ–¹æ³•**ï¼š

```java
@Configuration
public class PathBasedCorsConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        
        // å…¬å¼€APIè·¯å¾„ï¼šåªå…è®¸è¯»å–
        CorsConfiguration publicConfig = new CorsConfiguration();
        publicConfig.setAllowedOrigins(Arrays.asList("*"));
        publicConfig.setAllowedMethods(Arrays.asList("GET", "OPTIONS"));
        source.registerCorsConfiguration("/api/public/**", publicConfig);
        
        // ç®¡ç†APIè·¯å¾„ï¼šå…è®¸æ‰€æœ‰æ“ä½œ
        CorsConfiguration adminConfig = new CorsConfiguration();
        adminConfig.setAllowedOrigins(Arrays.asList("http://admin.myapp.com"));
        adminConfig.setAllowedMethods(Arrays.asList("*"));
        source.registerCorsConfiguration("/api/admin/**", adminConfig);
        
        return new CorsFilter(source);
    }
}
```

### 5.3 æ–¹æ³•å®‰å…¨æœ€ä½³å®è·µ


**ğŸ”’ å®‰å…¨é…ç½®å»ºè®®**ï¼š

```
åŸåˆ™1ï¼šæœ€å°æƒé™åŸåˆ™
åªå¼€æ”¾å¿…è¦çš„æ–¹æ³•ï¼Œä¸è¦å›¾æ–¹ä¾¿å…¨éƒ¨å¼€æ”¾

å…¬å¼€APIï¼š    GET                    â† åªè¯»
ç”¨æˆ·æ“ä½œï¼š    GET, POST             â† æŸ¥è¯¢+åˆ›å»º  
ç®¡ç†åå°ï¼š    GET, POST, PUT, DELETE â† å®Œæ•´CRUD

åŸåˆ™2ï¼šå±é™©æ–¹æ³•é¢å¤–ä¿æŠ¤
DELETEã€PUT ç­‰ä¿®æ”¹æ•°æ®çš„æ–¹æ³•ï¼š
â€¢ å¿…é¡»éªŒè¯ç”¨æˆ·æƒé™
â€¢ å¿…é¡»éªŒè¯CSRF Token
â€¢ é‡è¦æ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤

åŸåˆ™3ï¼šOPTIONSæ–¹æ³•å¿…é¡»å…è®¸
OPTIONSæ˜¯é¢„æ£€è¯·æ±‚ï¼Œå¿…é¡»åœ¨å…è®¸åˆ—è¡¨ä¸­
å¦åˆ™æ‰€æœ‰é¢„æ£€è¯·æ±‚éƒ½ä¼šå¤±è´¥

åŸåˆ™4ï¼šç›‘æ§å¼‚å¸¸è¯·æ±‚
è®°å½•è¢«æ‹’ç»çš„æ–¹æ³•è¯·æ±‚æ—¥å¿—
åˆ†ææ˜¯å¦æœ‰æ”»å‡»è¡Œä¸º
```

---

## 6. ğŸ“ å…è®¸å¤´éƒ¨é…ç½®


### 6.1 è¯·æ±‚å¤´æ§åˆ¶


**Access-Control-Allow-Headers å“åº”å¤´**

**å½¢è±¡æ¯”å–»**ï¼š
å°±åƒå¿«é€’å‘˜é€è´§æ—¶èƒ½æºå¸¦çš„ç‰©å“æ¸…å•ï¼Œæœ‰äº›ä¸œè¥¿èƒ½å¸¦ï¼ˆå¦‚èº«ä»½è¯ï¼‰ï¼Œæœ‰äº›ä¸èƒ½å¸¦ï¼ˆå¦‚å±é™©å“ï¼‰ã€‚

```
æµè§ˆå™¨é»˜è®¤å…è®¸çš„è¯·æ±‚å¤´ï¼ˆæ— éœ€é…ç½®ï¼‰ï¼š
Accept
Accept-Language
Content-Language
Content-Typeï¼ˆéƒ¨åˆ†å€¼ï¼‰

éœ€è¦æ˜ç¡®å…è®¸çš„å¸¸ç”¨è¯·æ±‚å¤´ï¼š
Authorization      â† æœ€é‡è¦ï¼JWT Tokené€šå¸¸æ”¾è¿™é‡Œ
Content-Type       â† JSONæ ¼å¼éœ€è¦
X-Requested-With   â† AJAXè¯·æ±‚æ ‡è¯†
X-Custom-Header    â† è‡ªå®šä¹‰ä¸šåŠ¡å¤´
```

### 6.2 å¤´éƒ¨é…ç½®æ–¹å¼


**ğŸ”§ é…ç½®ç¤ºä¾‹**ï¼š

```java
@Configuration
public class CorsHeaderConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        
        // æ–¹å¼1ï¼šæ˜ç¡®æŒ‡å®šå…è®¸çš„è¯·æ±‚å¤´ï¼ˆæ¨èï¼‰
        config.setAllowedHeaders(Arrays.asList(
            "Authorization",      // JWT Token
            "Content-Type",       // JSON/XMLç­‰
            "Accept",             // æ¥å—çš„å“åº”æ ¼å¼
            "X-Requested-With",   // AJAXæ ‡è¯†
            "X-Custom-Token"      // è‡ªå®šä¹‰ä¸šåŠ¡å¤´
        ));
        
        // æ–¹å¼2ï¼šå…è®¸æ‰€æœ‰è¯·æ±‚å¤´ï¼ˆå¼€å‘ç¯å¢ƒæ–¹ä¾¿ï¼‰
        config.addAllowedHeader("*");
        
        // å…¶ä»–é…ç½®...
        config.addAllowedOrigin("http://localhost:3000");
        config.addAllowedMethod("*");
        
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

### 6.3 æš´éœ²å“åº”å¤´


**Access-Control-Expose-Headers é…ç½®**

```
é—®é¢˜åœºæ™¯ï¼š
åç«¯åœ¨å“åº”å¤´ä¸­è¿”å›äº†é¢å¤–ä¿¡æ¯ï¼š
â€¢ X-Total-Count: 100      ï¼ˆæ€»æ•°æ®é‡ï¼‰
â€¢ X-Page-Number: 1        ï¼ˆå½“å‰é¡µç ï¼‰
â€¢ Authorization: newToken  ï¼ˆåˆ·æ–°çš„Tokenï¼‰

é»˜è®¤æƒ…å†µï¼š
å‰ç«¯JavaScriptæ— æ³•è¯»å–è¿™äº›è‡ªå®šä¹‰å“åº”å¤´ï¼
åªèƒ½è¯»å–åŸºæœ¬å¤´ï¼ˆContent-Typeç­‰ï¼‰

è§£å†³æ–¹æ¡ˆï¼š
æ˜ç¡®æš´éœ²è¿™äº›å“åº”å¤´
```

**é…ç½®æ–¹æ³•**ï¼š
```java
@Bean
public CorsFilter corsFilter() {
    CorsConfiguration config = new CorsConfiguration();
    
    // å…è®¸çš„è¯·æ±‚å¤´
    config.addAllowedHeader("*");
    
    // æš´éœ²çš„å“åº”å¤´ï¼ˆå‰ç«¯èƒ½è¯»å–ï¼‰
    config.setExposedHeaders(Arrays.asList(
        "Authorization",      // å‰ç«¯èƒ½è¯»å–æ–°Token
        "X-Total-Count",      // å‰ç«¯èƒ½è¯»å–æ€»æ•°
        "X-Page-Number",      // å‰ç«¯èƒ½è¯»å–é¡µç 
        "Content-Disposition" // æ–‡ä»¶ä¸‹è½½æ—¶çš„æ–‡ä»¶å
    ));
    
    // å…¶ä»–é…ç½®...
    return new CorsFilter(source);
}
```

**ğŸ“± å‰ç«¯ä½¿ç”¨ç¤ºä¾‹**ï¼š
```javascript
// å‘é€è¯·æ±‚
fetch('http://api.example.com/users', {
  headers: {
    'Authorization': 'Bearer old-token'
  }
})
.then(response => {
  // è¯»å–æš´éœ²çš„å“åº”å¤´
  const newToken = response.headers.get('Authorization');
  const totalCount = response.headers.get('X-Total-Count');
  
  console.log('æ–°Token:', newToken);
  console.log('æ€»æ•°æ®é‡:', totalCount);
  
  return response.json();
});
```

### 6.4 è¯·æ±‚å¤´å®æˆ˜åœºæ™¯


**ğŸ’¼ å¸¸è§ä¸šåŠ¡åœºæ™¯é…ç½®**ï¼š

```java
// åœºæ™¯1ï¼šJWTè®¤è¯ç³»ç»Ÿ
CorsConfiguration jwtConfig = new CorsConfiguration();
jwtConfig.setAllowedHeaders(Arrays.asList(
    "Authorization",        // ä¼ é€’JWT Token
    "Content-Type"          // JSONæ ¼å¼
));
jwtConfig.setExposedHeaders(Arrays.asList(
    "Authorization"         // è¿”å›åˆ·æ–°åçš„Token
));

// åœºæ™¯2ï¼šæ–‡ä»¶ä¸Šä¼ ä¸‹è½½
CorsConfiguration fileConfig = new CorsConfiguration();
fileConfig.setAllowedHeaders(Arrays.asList(
    "Content-Type",         // æ–‡ä»¶ç±»å‹
    "Content-Disposition",  // æ–‡ä»¶å
    "X-File-Name"          // è‡ªå®šä¹‰æ–‡ä»¶åå¤´
));
fileConfig.setExposedHeaders(Arrays.asList(
    "Content-Disposition",  // ä¸‹è½½æ–‡ä»¶å
    "X-Download-URL"       // ä¸‹è½½é“¾æ¥
));

// åœºæ™¯3ï¼šåˆ†é¡µæŸ¥è¯¢
CorsConfiguration pageConfig = new CorsConfiguration();
pageConfig.setExposedHeaders(Arrays.asList(
    "X-Total-Count",       // æ€»è®°å½•æ•°
    "X-Page-Number",       // å½“å‰é¡µ
    "X-Page-Size",         // æ¯é¡µå¤§å°
    "X-Total-Pages"        // æ€»é¡µæ•°
));
```

---

## 7. ğŸ” å‡­è¯ä¼ é€’é…ç½®


### 7.1 ä»€ä¹ˆæ˜¯å‡­è¯ä¼ é€’


**Access-Control-Allow-Credentials å“åº”å¤´**

**é€šä¿—è§£é‡Š**ï¼š
å‡­è¯å°±æ˜¯"èº«ä»½è¯æ˜"ï¼ŒåŒ…æ‹¬Cookieã€HTTPè®¤è¯ä¿¡æ¯ç­‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè·¨åŸŸè¯·æ±‚ä¸ä¼šæºå¸¦è¿™äº›"èº«ä»½è¯æ˜"ã€‚

```
å®é™…åœºæ™¯ä¸¾ä¾‹ï¼š

ç”¨æˆ·åœ¨ www.myapp.com ç™»å½•äº†
åç«¯è®¾ç½®äº†ç™»å½•Cookie
ç°åœ¨å‰ç«¯éœ€è¦è°ƒç”¨ api.myapp.com çš„æ¥å£

é—®é¢˜ï¼š
è·¨åŸŸè¯·æ±‚é»˜è®¤ä¸å¸¦Cookie
åç«¯æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¸çŸ¥é“ç”¨æˆ·æ˜¯è°
ç”¨æˆ·çœ‹èµ·æ¥å°±åƒ"æ²¡ç™»å½•"

è§£å†³ï¼š
é…ç½®å…è®¸å‡­è¯ä¼ é€’
å‰ç«¯è¯·æ±‚æ—¶ä¹Ÿè¦æ˜ç¡®å‘é€å‡­è¯
```

### 7.2 å‡­è¯ä¼ é€’é…ç½®


**ğŸ”§ åç«¯é…ç½®**ï¼š

```java
@Configuration
public class CredentialsCorsConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        
        // å…³é”®é…ç½®1ï¼šå…è®¸å‡­è¯ä¼ é€’
        config.setAllowCredentials(true);
        
        // å…³é”®é…ç½®2ï¼šå¿…é¡»æŒ‡å®šå…·ä½“åŸŸåï¼ˆä¸èƒ½ç”¨*ï¼‰
        config.setAllowedOrigins(Arrays.asList(
            "http://localhost:3000",
            "https://www.myapp.com"
        ));
        // ä¸èƒ½è¿™æ ·ï¼šconfig.addAllowedOrigin("*");  â† ä¼šæŠ¥é”™ï¼
        
        config.addAllowedMethod("*");
        config.addAllowedHeader("*");
        
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

**âš ï¸ é‡è¦é™åˆ¶**ï¼š
```
å½“ Access-Control-Allow-Credentials: true æ—¶ï¼š

âŒ ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦
Access-Control-Allow-Origin: *         â† æŠ¥é”™
Access-Control-Allow-Headers: *        â† éƒ¨åˆ†æµè§ˆå™¨æŠ¥é”™

âœ… å¿…é¡»æ˜ç¡®æŒ‡å®š
Access-Control-Allow-Origin: http://localhost:3000
Access-Control-Allow-Headers: Content-Type, Authorization

åŸå› ï¼šå®‰å…¨è€ƒè™‘ï¼Œé¿å…ä»»æ„ç½‘ç«™éƒ½èƒ½æºå¸¦ç”¨æˆ·å‡­è¯è®¿é—®
```

### 7.3 å‰ç«¯é…ç½®


**ğŸ“± å‰ç«¯å¿…é¡»æ˜ç¡®å‘é€å‡­è¯**ï¼š

```javascript
// Fetch APIæ–¹å¼
fetch('http://api.example.com/user/info', {
  method: 'GET',
  credentials: 'include',  // â† å…³é”®ï¼å¿…é¡»è®¾ç½®
  headers: {
    'Content-Type': 'application/json'
  }
})
.then(response => response.json());

// Axiosæ–¹å¼
axios.get('http://api.example.com/user/info', {
  withCredentials: true  // â† å…³é”®ï¼å¿…é¡»è®¾ç½®
});

// XMLHttpRequestæ–¹å¼
const xhr = new XMLHttpRequest();
xhr.withCredentials = true;  // â† å…³é”®ï¼å¿…é¡»è®¾ç½®
xhr.open('GET', 'http://api.example.com/user/info');
xhr.send();
```

**credentials å‚æ•°è¯´æ˜**ï¼š
```
credentialsæœ‰3ä¸ªå€¼ï¼š

omit ï¼ˆçœç•¥ï¼‰ï¼š
â€¢ æ°¸è¿œä¸å‘é€Cookie
â€¢ å³ä½¿åŒæºä¹Ÿä¸å‘é€

same-origin ï¼ˆåŒæºï¼‰ï¼š
â€¢ åŒæºè¯·æ±‚å‘é€Cookie
â€¢ è·¨åŸŸè¯·æ±‚ä¸å‘é€ï¼ˆé»˜è®¤å€¼ï¼‰

include ï¼ˆåŒ…æ‹¬ï¼‰ï¼š
â€¢ åŒæºå’Œè·¨åŸŸéƒ½å‘é€Cookie
â€¢ è·¨åŸŸæ—¶éœ€è¦åç«¯é…ç½®æ”¯æŒ
```

### 7.4 å®æˆ˜åœºæ™¯


**ğŸ¯ åœºæ™¯ä¸€ï¼šCookieç™»å½•çŠ¶æ€**

```java
// åç«¯ï¼šç™»å½•æ—¶è®¾ç½®Cookie
@PostMapping("/login")
public ResponseEntity<?> login(@RequestBody LoginRequest request) {
    // éªŒè¯ç”¨æˆ·åå¯†ç ...
    
    // åˆ›å»ºCookie
    Cookie sessionCookie = new Cookie("SESSION_ID", sessionId);
    sessionCookie.setHttpOnly(true);  // é˜²XSSæ”»å‡»
    sessionCookie.setSecure(true);    // åªåœ¨HTTPSä¼ è¾“
    sessionCookie.setPath("/");
    sessionCookie.setMaxAge(3600);
    
    response.addCookie(sessionCookie);
    return ResponseEntity.ok("ç™»å½•æˆåŠŸ");
}

// CORSé…ç½®å¿…é¡»å…è®¸å‡­è¯
config.setAllowCredentials(true);
config.setAllowedOrigins(Arrays.asList("http://localhost:3000"));
```

```javascript
// å‰ç«¯ï¼šç™»å½•åçš„è¯·æ±‚è‡ªåŠ¨å¸¦Cookie
// ç™»å½•
fetch('http://api.example.com/login', {
  method: 'POST',
  credentials: 'include',  // å‘é€å’Œæ¥æ”¶Cookie
  body: JSON.stringify({username, password})
});

// åç»­è¯·æ±‚ä¼šè‡ªåŠ¨æºå¸¦Cookie
fetch('http://api.example.com/user/profile', {
  credentials: 'include'  // å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™ä¸å¸¦Cookie
});
```

**ğŸ¯ åœºæ™¯äºŒï¼šJWT Token + Cookieç»„åˆ**

```java
// åç«¯é…ç½®
@Bean
public CorsFilter corsFilter() {
    CorsConfiguration config = new CorsConfiguration();
    
    // å…è®¸å‡­è¯ï¼ˆCookieï¼‰
    config.setAllowCredentials(true);
    config.setAllowedOrigins(Arrays.asList("http://localhost:3000"));
    
    // å…è®¸Authorizationå¤´ï¼ˆJWTï¼‰
    config.setAllowedHeaders(Arrays.asList(
        "Authorization",
        "Content-Type"
    ));
    
    // æš´éœ²æ–°Tokenï¼ˆç”¨äºåˆ·æ–°ï¼‰
    config.setExposedHeaders(Arrays.asList("Authorization"));
    
    return new CorsFilter(source);
}
```

```javascript
// å‰ç«¯ï¼šæ—¢å‘é€Cookieåˆå‘é€Token
fetch('http://api.example.com/api/data', {
  method: 'GET',
  credentials: 'include',  // å‘é€Cookie
  headers: {
    'Authorization': `Bearer ${token}`  // åŒæ—¶å‘é€Token
  }
});
```

**ğŸ›¡ï¸ å®‰å…¨å»ºè®®**ï¼š
```
1. Cookieè®¾ç½®å»ºè®®ï¼š
   â€¢ HttpOnly: true   ï¼ˆé˜²æ­¢XSSçªƒå–ï¼‰
   â€¢ Secure: true     ï¼ˆåªåœ¨HTTPSä¼ è¾“ï¼‰
   â€¢ SameSite: Strict ï¼ˆé˜²æ­¢CSRFæ”»å‡»ï¼‰

2. CORSé…ç½®å»ºè®®ï¼š
   â€¢ ç”Ÿäº§ç¯å¢ƒä¸è¦ç”¨ *
   â€¢ æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
   â€¢ HTTPSç¯å¢ƒä¸‹ä½¿ç”¨Cookie

3. Tokenå»ºè®®ï¼š
   â€¢ ä¼˜å…ˆç”¨Tokenè€Œä¸æ˜¯Cookie
   â€¢ Tokenæ”¾åœ¨Headerï¼Œä¸æ”¾URL
   â€¢ è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
```

---

## 8. ğŸš€ å®æˆ˜é…ç½®æ¡ˆä¾‹


### 8.1 å®Œæ•´CORSé…ç½®ç±»


**ğŸ“¦ ç”Ÿäº§çº§é…ç½®ç¤ºä¾‹**ï¼š

```java
package com.example.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;

import java.util.Arrays;

@Configuration
public class GlobalCorsConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        // åˆ›å»ºCORSé…ç½®å¯¹è±¡
        CorsConfiguration config = new CorsConfiguration();
        
        // 1. å…è®¸çš„æ¥æºï¼ˆç”Ÿäº§ç¯å¢ƒæ˜ç¡®æŒ‡å®šï¼‰
        config.setAllowedOrigins(Arrays.asList(
            "http://localhost:3000",      // æœ¬åœ°å¼€å‘
            "https://www.myapp.com",      // ç”Ÿäº§å‰ç«¯
            "https://admin.myapp.com"     // ç®¡ç†åå°
        ));
        
        // 2. å…è®¸çš„HTTPæ–¹æ³•
        config.setAllowedMethods(Arrays.asList(
            "GET", "POST", "PUT", "DELETE", "OPTIONS"
        ));
        
        // 3. å…è®¸çš„è¯·æ±‚å¤´
        config.setAllowedHeaders(Arrays.asList(
            "Authorization",
            "Content-Type",
            "Accept",
            "X-Requested-With"
        ));
        
        // 4. æš´éœ²çš„å“åº”å¤´ï¼ˆå‰ç«¯å¯è¯»å–ï¼‰
        config.setExposedHeaders(Arrays.asList(
            "Authorization",
            "X-Total-Count"
        ));
        
        // 5. å…è®¸æºå¸¦å‡­è¯ï¼ˆCookieï¼‰
        config.setAllowCredentials(true);
        
        // 6. é¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´ï¼ˆ1å°æ—¶ï¼‰
        config.setMaxAge(3600L);
        
        // åº”ç”¨é…ç½®åˆ°æ‰€æœ‰è·¯å¾„
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

### 8.2 å¤šç¯å¢ƒé…ç½®


**ğŸ”§ æ ¹æ®ç¯å¢ƒåŠ¨æ€é…ç½®**ï¼š

```java
@Configuration
public class EnvironmentCorsConfig {
    
    @Value("${spring.profiles.active}")
    private String activeProfile;
    
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        
        // æ ¹æ®ç¯å¢ƒé…ç½®å…è®¸æ¥æº
        if ("dev".equals(activeProfile)) {
            // å¼€å‘ç¯å¢ƒï¼šå®½æ¾é…ç½®
            config.addAllowedOriginPattern("*");
            config.addAllowedMethod("*");
            config.addAllowedHeader("*");
        } else if ("prod".equals(activeProfile)) {
            // ç”Ÿäº§ç¯å¢ƒï¼šä¸¥æ ¼é…ç½®
            config.setAllowedOrigins(Arrays.asList(
                "https://www.myapp.com",
                "https://admin.myapp.com"
            ));
            config.setAllowedMethods(Arrays.asList(
                "GET", "POST", "PUT", "DELETE"
            ));
            config.setAllowedHeaders(Arrays.asList(
                "Authorization", "Content-Type"
            ));
        }
        
        config.setAllowCredentials(true);
        config.setMaxAge(3600L);
        
        UrlBasedCorsConfigurationSource source = 
            new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}
```

**ğŸ“ é…ç½®æ–‡ä»¶æ–¹å¼ï¼ˆapplication.ymlï¼‰**ï¼š
```yaml
# å¼€å‘ç¯å¢ƒ
---
spring:
  profiles: dev
cors:
  allowed-origins: 
    - http://localhost:3000
    - http://localhost:8080
  allowed-methods: "*"
  max-age: 3600

# ç”Ÿäº§ç¯å¢ƒ  
---
spring:
  profiles: prod
cors:
  allowed-origins:
    - https://www.myapp.com
    - https://admin.myapp.com
  allowed-methods:
    - GET
    - POST
    - PUT
    - DELETE
  max-age: 7200
```

### 8.3 ç½‘å…³å±‚CORSé…ç½®


**ğŸŒ Spring Cloud Gatewayé…ç½®**ï¼š

```yaml
spring:
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            # å…è®¸çš„æ¥æº
            allowedOrigins:
              - "http://localhost:3000"
              - "https://www.myapp.com"
            
            # å…è®¸çš„æ–¹æ³•
            allowedMethods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
            
            # å…è®¸çš„è¯·æ±‚å¤´
            allowedHeaders:
              - Authorization
              - Content-Type
              - Accept
            
            # æš´éœ²çš„å“åº”å¤´
            exposedHeaders:
              - Authorization
              - X-Total-Count
            
            # å…è®¸å‡­è¯
            allowCredentials: true
            
            # é¢„æ£€ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
            maxAge: 3600
```

**ğŸ’¡ ç½‘å…³CORS vs æœåŠ¡CORS**ï¼š
```
æ¨èæ–¹æ¡ˆï¼šåœ¨ç½‘å…³ç»Ÿä¸€å¤„ç†CORS

ä¼˜ç‚¹ï¼š
âœ… ç»Ÿä¸€é…ç½®ï¼Œä¾¿äºç®¡ç†
âœ… å‡è½»åç«¯æœåŠ¡è´Ÿæ‹…
âœ… é¿å…é‡å¤é…ç½®

æ³¨æ„ï¼š
â€¢ ç½‘å…³é…ç½®CORSåï¼Œåç«¯æœåŠ¡ä¸è¦å†é…ç½®
â€¢ é¿å…ä¸¤å±‚éƒ½é…ç½®å¯¼è‡´å†²çª
â€¢ é¢„æ£€è¯·æ±‚åœ¨ç½‘å…³å±‚ç›´æ¥è¿”å›ï¼Œä¸è½¬å‘åˆ°åç«¯
```

### 8.4 è°ƒè¯•CORSé—®é¢˜


**ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š

```
é—®é¢˜1ï¼šè¯·æ±‚è¢«CORSæ‹¦æˆª
ç°è±¡ï¼šæ§åˆ¶å°æŠ¥é”™ "Access to XMLHttpRequest has been blocked"

æ’æŸ¥æ­¥éª¤ï¼š
1. æ£€æŸ¥Networké¢æ¿ï¼Œçœ‹å®é™…è¯·æ±‚
2. æŸ¥çœ‹Response Headersï¼Œæ˜¯å¦æœ‰CORSç›¸å…³å¤´
3. ç¡®è®¤è¯·æ±‚æ˜¯å¦è§¦å‘äº†é¢„æ£€ï¼ˆOPTIONSï¼‰
4. æ£€æŸ¥åç«¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ

é—®é¢˜2ï¼šCookieæ— æ³•å‘é€
ç°è±¡ï¼šè·¨åŸŸè¯·æ±‚ä¸å¸¦Cookie

è§£å†³æ£€æŸ¥ï¼š
1. åç«¯ï¼šsetAllowCredentials(true)
2. åç«¯ï¼šä¸èƒ½ç”¨é€šé…ç¬¦ï¼ˆ*ï¼‰
3. å‰ç«¯ï¼šcredentials: 'include'
4. Cookieè®¾ç½®ï¼šSameSiteå±æ€§

é—®é¢˜3ï¼šè‡ªå®šä¹‰è¯·æ±‚å¤´è¢«æ‹’ç»  
ç°è±¡ï¼šAuthorizationç­‰è‡ªå®šä¹‰å¤´å‘é€å¤±è´¥

è§£å†³æ–¹æ³•ï¼š
1. åç«¯æ˜ç¡®å…è®¸è¯¥è¯·æ±‚å¤´
2. æ£€æŸ¥é¢„æ£€è¯·æ±‚å“åº”
3. ç¡®è®¤OPTIONSè¯·æ±‚è¿”å›200
```

**ğŸ› ï¸ è°ƒè¯•å·¥å…·**ï¼š
```
æµè§ˆå™¨DevToolsï¼š
1. Networké¢æ¿
   â€¢ æŸ¥çœ‹è¯·æ±‚å“åº”å¤´
   â€¢ æ£€æŸ¥é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰
   
2. Consoleé¢æ¿
   â€¢ æŸ¥çœ‹CORSé”™è¯¯è¯¦æƒ…
   
3. Applicationé¢æ¿
   â€¢ æ£€æŸ¥Cookieè®¾ç½®

åç«¯æ—¥å¿—ï¼š
// æ‰“å°CORSç›¸å…³ä¿¡æ¯
@Component
public class CorsDebugFilter extends OncePerRequestFilter {
    
    @Override
    protected void doFilterInternal(
        HttpServletRequest request,
        HttpServletResponse response,
        FilterChain filterChain
    ) throws ServletException, IOException {
        
        String origin = request.getHeader("Origin");
        String method = request.getMethod();
        
        log.info("CORSè¯·æ±‚ - Origin: {}, Method: {}", origin, method);
        
        if ("OPTIONS".equals(method)) {
            log.info("æ”¶åˆ°é¢„æ£€è¯·æ±‚");
        }
        
        filterChain.doFilter(request, response);
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ è·¨åŸŸæœ¬è´¨ï¼šæµè§ˆå™¨çš„åŒæºç­–ç•¥å®‰å…¨é™åˆ¶
ğŸ”¸ CORSæœºåˆ¶ï¼šé€šè¿‡HTTPå“åº”å¤´å‘Šè¯‰æµè§ˆå™¨"å…è®¸è·¨åŸŸ"
ğŸ”¸ é¢„æ£€è¯·æ±‚ï¼šå¤æ‚è¯·æ±‚å…ˆç”¨OPTIONSè¯¢é—®æ˜¯å¦å…è®¸
ğŸ”¸ å…è®¸æ¥æºï¼šæ˜ç¡®æŒ‡å®šå“ªäº›åŸŸåå¯ä»¥è®¿é—®
ğŸ”¸ å…è®¸æ–¹æ³•ï¼šæ§åˆ¶å¯ä»¥ä½¿ç”¨çš„HTTPæ–¹æ³•
ğŸ”¸ å…è®¸å¤´éƒ¨ï¼šæ§åˆ¶å¯ä»¥å‘é€çš„è¯·æ±‚å¤´
ğŸ”¸ å‡­è¯ä¼ é€’ï¼šæ˜¯å¦å…è®¸æºå¸¦Cookieç­‰èº«ä»½ä¿¡æ¯
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜**ï¼š
```
è§¦å‘æ¡ä»¶ï¼š
â€¢ åè®®ä¸åŒï¼šhttp â†’ https
â€¢ åŸŸåä¸åŒï¼ša.com â†’ b.com  
â€¢ ç«¯å£ä¸åŒï¼š:80 â†’ :8080

ä¸ä¼šè·¨åŸŸçš„æƒ…å†µï¼š
â€¢ åŒæºè¯·æ±‚
â€¢ åç«¯ç›´æ¥è¯·æ±‚åç«¯
â€¢ ç§»åŠ¨AppåŸç”Ÿè¯·æ±‚
â€¢ æµè§ˆå™¨ç›´æ¥è¾“å…¥URLè®¿é—®
```

**ğŸ”¹ CORS vs å…¶ä»–è·¨åŸŸæ–¹æ¡ˆ**ï¼š
```
CORSï¼ˆæ¨èï¼‰ï¼š
ä¼˜ç‚¹ï¼šæ ‡å‡†æ–¹æ¡ˆï¼Œå®‰å…¨å¯é 
ç¼ºç‚¹ï¼šéœ€è¦åç«¯é…åˆ

JSONPï¼ˆè¿‡æ—¶ï¼‰ï¼š
ä¼˜ç‚¹ï¼šå…¼å®¹è€æµè§ˆå™¨
ç¼ºç‚¹ï¼šåªæ”¯æŒGETï¼Œä¸å®‰å…¨

ä»£ç†ï¼ˆå¼€å‘ç”¨ï¼‰ï¼š
ä¼˜ç‚¹ï¼šå¼€å‘ç¯å¢ƒæ–¹ä¾¿
ç¼ºç‚¹ï¼šç”Ÿäº§ç¯å¢ƒä¸é€‚ç”¨

Nginxåå‘ä»£ç†ï¼š
ä¼˜ç‚¹ï¼šå‰åç«¯åŒåŸŸå
ç¼ºç‚¹ï¼šéœ€è¦è¿ç»´é…ç½®
```

**ğŸ”¹ å®‰å…¨é…ç½®åŸåˆ™**ï¼š
```
å¼€å‘ç¯å¢ƒï¼š
â€¢ å¯ä»¥ç”¨é€šé…ç¬¦ *ï¼Œæ–¹ä¾¿å¼€å‘
â€¢ å…è®¸æ‰€æœ‰æ–¹æ³•å’Œå¤´éƒ¨

ç”Ÿäº§ç¯å¢ƒï¼š
â€¢ æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
â€¢ åªå¼€æ”¾å¿…è¦çš„æ–¹æ³•
â€¢ é™åˆ¶å…è®¸çš„è¯·æ±‚å¤´
â€¢ è°¨æ…ä½¿ç”¨å‡­è¯ä¼ é€’
â€¢ è®¾ç½®åˆç†çš„ç¼“å­˜æ—¶é—´
```

### 9.3 å®æˆ˜åº”ç”¨æŒ‡å—


**ğŸ’¼ ä¸åŒåœºæ™¯é…ç½®ç­–ç•¥**ï¼š

```
åœºæ™¯1ï¼šå‰åç«¯åˆ†ç¦»å¼€å‘
é…ç½®ï¼š
â€¢ å…è®¸localhostå„ç«¯å£
â€¢ å…è®¸æ‰€æœ‰æ–¹æ³•å’Œå¤´éƒ¨
â€¢ çŸ­ç¼“å­˜æ—¶é—´ä¾¿äºè°ƒè¯•

åœºæ™¯2ï¼šç¬¬ä¸‰æ–¹APIå¼€æ”¾
é…ç½®ï¼š
â€¢ å…è®¸æ‰€æœ‰æ¥æºï¼ˆ*ï¼‰
â€¢ åªå…è®¸GETæ–¹æ³•
â€¢ ä¸å…è®¸å‡­è¯ä¼ é€’
â€¢ é•¿ç¼“å­˜æ—¶é—´

åœºæ™¯3ï¼šä¼ä¸šå†…éƒ¨ç³»ç»Ÿ
é…ç½®ï¼š
â€¢ æ˜ç¡®åˆ—å‡ºå†…éƒ¨åŸŸå
â€¢ å…è®¸å®Œæ•´CRUDæ–¹æ³•
â€¢ å…è®¸å‡­è¯ä¼ é€’
â€¢ ä¸­ç­‰ç¼“å­˜æ—¶é—´

åœºæ™¯4ï¼šé«˜å®‰å…¨è¦æ±‚
é…ç½®ï¼š
â€¢ å•ä¸€åŸŸåï¼Œä¸ç”¨é€šé…
â€¢ æœ€å°åŒ–æ–¹æ³•æƒé™
â€¢ ä¸¥æ ¼æ§åˆ¶è¯·æ±‚å¤´
â€¢ çŸ­ç¼“å­˜æ—¶é—´
â€¢ é¢å¤–TokenéªŒè¯
```

**ğŸ”§ é…ç½®æ¨¡æ¿æ¨è**ï¼š

```java
// å¼€å‘ç¯å¢ƒæ¨¡æ¿
@Profile("dev")
@Configuration
public class DevCorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        config.addAllowedOriginPattern("*");
        config.addAllowedMethod("*");
        config.addAllowedHeader("*");
        config.setAllowCredentials(true);
        config.setMaxAge(3600L);
        // ... åº”ç”¨é…ç½®
    }
}

// ç”Ÿäº§ç¯å¢ƒæ¨¡æ¿
@Profile("prod")  
@Configuration
public class ProdCorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        config.setAllowedOrigins(Arrays.asList(
            "https://www.myapp.com"
        ));
        config.setAllowedMethods(Arrays.asList(
            "GET", "POST", "PUT", "DELETE"
        ));
        config.setAllowedHeaders(Arrays.asList(
            "Authorization", "Content-Type"
        ));
        config.setAllowCredentials(true);
        config.setMaxAge(7200L);
        // ... åº”ç”¨é…ç½®
    }
}
```

### 9.4 å¸¸è§é—®é¢˜é€ŸæŸ¥


**â“ å¿«é€Ÿé—®ç­”**ï¼š

```
Q: ä¸ºä»€ä¹ˆè®¾ç½®äº†CORSè¿˜æ˜¯æŠ¥é”™ï¼Ÿ
A: æ£€æŸ¥æ˜¯å¦åŒæ—¶æ»¡è¶³ï¼š
   â€¢ åç«¯é…ç½®æ­£ç¡®
   â€¢ å‰ç«¯credentialsè®¾ç½®ï¼ˆå¦‚æœéœ€è¦Cookieï¼‰
   â€¢ æ²¡æœ‰ä½¿ç”¨ * + credentials: true çš„ç»„åˆ

Q: é¢„æ£€è¯·æ±‚å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: ç¡®è®¤ï¼š
   â€¢ OPTIONSè¯·æ±‚è¿”å›200
   â€¢ å“åº”åŒ…å«æ­£ç¡®çš„CORSå¤´
   â€¢ ç¼“å­˜æ—¶é—´æ˜¯å¦åˆç†

Q: Cookieä¸ºä»€ä¹ˆå‘é€ä¸äº†ï¼Ÿ
A: éœ€è¦ä¸‰ä¸ªæ¡ä»¶ï¼š
   â€¢ åç«¯ï¼šsetAllowCredentials(true)
   â€¢ åç«¯ï¼šæ˜ç¡®æŒ‡å®šåŸŸåï¼Œä¸ç”¨ *
   â€¢ å‰ç«¯ï¼šcredentials: 'include'

Q: ç”Ÿäº§ç¯å¢ƒåº”è¯¥æ€ä¹ˆé…ç½®ï¼Ÿ
A: åŸºæœ¬åŸåˆ™ï¼š
   â€¢ æ˜ç¡®åŸŸåï¼Œä¸ç”¨é€šé…ç¬¦
   â€¢ æœ€å°æƒé™ï¼Œåªå¼€æ”¾å¿…è¦çš„
   â€¢ ç›‘æ§æ—¥å¿—ï¼Œå‘ç°å¼‚å¸¸è®¿é—®
   â€¢ å®šæœŸå®¡æŸ¥ï¼Œæ›´æ–°é…ç½®
```

**ğŸ¯ å­¦ä¹ å»ºè®®**ï¼š
```
ç¬¬ä¸€æ­¥ï¼šç†è§£è·¨åŸŸæœ¬è´¨
â€¢ åŒæºç­–ç•¥ä¸ºä»€ä¹ˆå­˜åœ¨
â€¢ CORSå¦‚ä½•è§£å†³è·¨åŸŸ

ç¬¬äºŒæ­¥ï¼šæŒæ¡åŸºæœ¬é…ç½®
â€¢ ä¼šé…ç½®å…è®¸æ¥æº
â€¢ ä¼šé…ç½®å…è®¸æ–¹æ³•å’Œå¤´éƒ¨

ç¬¬ä¸‰æ­¥ï¼šå¤„ç†å¤æ‚åœºæ™¯
â€¢ ç†è§£é¢„æ£€è¯·æ±‚æœºåˆ¶
â€¢ æŒæ¡å‡­è¯ä¼ é€’é…ç½®

ç¬¬å››æ­¥ï¼šç”Ÿäº§å®è·µ
â€¢ æ ¹æ®ä¸šåŠ¡é€‰æ‹©é…ç½®ç­–ç•¥
â€¢ æŒæ¡é—®é¢˜æ’æŸ¥æ–¹æ³•
â€¢ å»ºç«‹å®‰å…¨é…ç½®è§„èŒƒ
```

**ğŸ§  è®°å¿†å£è¯€**ï¼š
```
è·¨åŸŸæºäºåŒæºç­–ç•¥ï¼Œä¸‰è¦ç´ åè®®åŸŸåç«¯å£é½
CORSå“åº”å¤´æ¥æˆæƒï¼ŒOriginæ–¹æ³•å¤´éƒ¨è¦é…é½
é¢„æ£€OPTIONSå…ˆè¯¢é—®ï¼Œå¤æ‚è¯·æ±‚ä¸¤æ¬¡è¯·æ±‚ä½“
å‡­è¯ä¼ é€’éœ€è°¨æ…ï¼ŒCookieå‘é€ä¸‰æ–¹éƒ½è®¾ç½®
ç”Ÿäº§ä¸ç”¨é€šé…ç¬¦ï¼Œæ˜ç¡®åŸŸåä¿å®‰å…¨ç¬¬ä¸€
```

**æ ¸å¿ƒç†å¿µ**ï¼šCORSä¸æ˜¯é˜»ç¢ï¼Œè€Œæ˜¯å®‰å…¨ä¸ä¾¿åˆ©çš„å¹³è¡¡ã€‚å¼€å‘ç¯å¢ƒæ±‚æ–¹ä¾¿ï¼Œç”Ÿäº§ç¯å¢ƒé‡å®‰å…¨ï¼Œæ ¹æ®å®é™…éœ€æ±‚çµæ´»é…ç½®ï¼Œæ‰æ˜¯æ­£ç¡®çš„ä½¿ç”¨ä¹‹é“ï¼