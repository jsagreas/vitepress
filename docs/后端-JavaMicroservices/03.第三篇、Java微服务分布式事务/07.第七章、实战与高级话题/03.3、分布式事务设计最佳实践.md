---
title: 3ã€åˆ†å¸ƒå¼äº‹åŠ¡è®¾è®¡æœ€ä½³å®è·µ
---
## ğŸ“š ç›®å½•

1. [åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ¬è´¨ç†è§£](#1-åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ¬è´¨ç†è§£)
2. [æ ¸å¿ƒè®¾è®¡åŸåˆ™](#2-æ ¸å¿ƒè®¾è®¡åŸåˆ™)
3. [é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨äº‹åŠ¡ä¸­çš„åº”ç”¨](#3-é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨äº‹åŠ¡ä¸­çš„åº”ç”¨)
4. [å¼±ä¸€è‡´æ€§ä¸ä¸šåŠ¡å®¹å¿åº¦](#4-å¼±ä¸€è‡´æ€§ä¸ä¸šåŠ¡å®¹å¿åº¦)
5. [ä¸šåŠ¡æ‹†åˆ†ä¸äº‹åŠ¡è¾¹ç•Œè®¾è®¡](#5-ä¸šåŠ¡æ‹†åˆ†ä¸äº‹åŠ¡è¾¹ç•Œè®¾è®¡)
6. [è¡¥å¿ç­–ç•¥è®¾è®¡](#6-è¡¥å¿ç­–ç•¥è®¾è®¡)
7. [ç›‘æ§å‘Šè­¦ç­–ç•¥](#7-ç›‘æ§å‘Šè­¦ç­–ç•¥)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ¬è´¨ç†è§£


### 1.1 ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡


**é€šä¿—è§£é‡Š**ï¼šæƒ³è±¡ä½ åœ¨ç½‘ä¸Šä¹°ä¸œè¥¿ï¼Œéœ€è¦åŒæ—¶å®Œæˆä¸‰ä»¶äº‹ï¼š
- æ‰£å‡å•†å“åº“å­˜
- æ‰£é™¤ç”¨æˆ·ä½™é¢  
- ç”Ÿæˆè®¢å•è®°å½•

å¦‚æœè¿™ä¸‰ä¸ªæ“ä½œåˆ†åˆ«åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼ˆåº“å­˜ç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿã€è®¢å•ç³»ç»Ÿï¼‰ï¼Œå°±éœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡æ¥ä¿è¯**è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥**ã€‚

**æ ¸å¿ƒæœ¬è´¨**ï¼š
```
ä¼ ç»Ÿäº‹åŠ¡ vs åˆ†å¸ƒå¼äº‹åŠ¡

å•æœºäº‹åŠ¡ï¼ˆä¼ ç»Ÿï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸€ä¸ªæ•°æ®åº“     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚åº“å­˜ â”‚ä½™é¢ â”‚  â”‚  â† åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œå¤©ç„¶æ”¯æŒACID
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†å¸ƒå¼äº‹åŠ¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚åº“å­˜ç³»ç»Ÿ  â”‚  â”‚æ”¯ä»˜ç³»ç»Ÿ  â”‚  â”‚è®¢å•ç³»ç»Ÿ  â”‚  â† è·¨è¶Šå¤šä¸ªç³»ç»Ÿï¼Œéœ€è¦é¢å¤–æœºåˆ¶ä¿è¯ä¸€è‡´æ€§
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¸ºä»€ä¹ˆåˆ†å¸ƒå¼äº‹åŠ¡å¾ˆå¤æ‚


**ç½‘ç»œçš„ä¸å¯é æ€§**ï¼š
- ğŸ“¶ **ç½‘ç»œå»¶è¿Ÿ**ï¼šç³»ç»Ÿé—´é€šä¿¡éœ€è¦æ—¶é—´
- ğŸ”Œ **ç½‘ç»œä¸­æ–­**ï¼šå¯èƒ½å‡ºç°é€šä¿¡å¤±è´¥
- ğŸ”„ **ç½‘ç»œåˆ†åŒº**ï¼šéƒ¨åˆ†ç³»ç»Ÿæ— æ³•é€šä¿¡

**ç³»ç»Ÿçš„ç‹¬ç«‹æ€§**ï¼š
- ğŸ¢ **ä¸åŒå›¢é˜Ÿç»´æŠ¤**ï¼šå„ç³»ç»Ÿæœ‰è‡ªå·±çš„å‘å¸ƒå‘¨æœŸ
- ğŸ’¾ **ä¸åŒæ•°æ®åº“**ï¼šOracleã€MySQLã€Redisæ··ç”¨
- ğŸ”§ **ä¸åŒæŠ€æœ¯æ ˆ**ï¼šJavaã€Pythonã€Goç­‰

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„å¤æ‚æ€§ä¸»è¦æ¥è‡ªäº**ç½‘ç»œä¸å¯é **å’Œ**ç³»ç»Ÿç‹¬ç«‹**è¿™ä¸¤ä¸ªæ ¹æœ¬é—®é¢˜ã€‚

### 1.3 CAPå®šç†çš„ç°å®å½±å“


**CAPå®šç†ç®€å•ç†è§£**ï¼š
- **C (Consistency)**ï¼šä¸€è‡´æ€§ - æ‰€æœ‰ç³»ç»Ÿçœ‹åˆ°çš„æ•°æ®éƒ½ä¸€æ ·
- **A (Availability)**ï¼šå¯ç”¨æ€§ - ç³»ç»Ÿéšæ—¶å¯ä»¥å“åº”è¯·æ±‚  
- **P (Partition tolerance)**ï¼šåˆ†åŒºå®¹é”™ - ç½‘ç»œæ•…éšœæ—¶ç³»ç»Ÿä»èƒ½å·¥ä½œ

```
ç°å®é€‰æ‹©å›°å¢ƒï¼š

é“¶è¡Œè½¬è´¦åœºæ™¯ï¼š
C + P = å¼ºä¸€è‡´æ€§ï¼Œä½†å¯èƒ½ä¸å¯ç”¨
A + P = é«˜å¯ç”¨ï¼Œä½†å¯èƒ½æ•°æ®ä¸ä¸€è‡´

ç”µå•†è´­ç‰©åœºæ™¯ï¼š
é€šå¸¸é€‰æ‹© A + Pï¼Œå®¹å¿çŸ­æš‚çš„æ•°æ®ä¸ä¸€è‡´
```

---

## 2. âš¡ æ ¸å¿ƒè®¾è®¡åŸåˆ™


### 2.1 ç¬¬ä¸€åŸåˆ™ï¼šå°½é‡é¿å…åˆ†å¸ƒå¼äº‹åŠ¡


**ä¸ºä»€ä¹ˆè¦é¿å…ï¼Ÿ**
- ğŸŒ **æ€§èƒ½å¼€é”€å¤§**ï¼šéœ€è¦å¤šè½®ç½‘ç»œé€šä¿¡
- ğŸ”’ **é”å®šæ—¶é—´é•¿**ï¼šå½±å“ç³»ç»Ÿå¹¶å‘æ€§èƒ½
- ğŸ› **æ•…éšœç‚¹å¤š**ï¼šä»»ä½•ä¸€ä¸ªç³»ç»Ÿæ•…éšœéƒ½å½±å“æ•´ä½“
- ğŸ”§ **ç»´æŠ¤å¤æ‚**ï¼šè°ƒè¯•å’Œè¿ç»´éƒ½å¾ˆå›°éš¾

**å¦‚ä½•é¿å…ï¼Ÿ**

**ç­–ç•¥1ï¼šé‡æ–°è®¾è®¡ä¸šåŠ¡æµç¨‹**
```
âŒ åŸå§‹è®¾è®¡ï¼š
ç”¨æˆ·ä¸‹å• â†’ åŒæ—¶æ‰£åº“å­˜ + æ‰£ä½™é¢ + ç”Ÿæˆè®¢å•

âœ… ä¼˜åŒ–è®¾è®¡ï¼š
ç”¨æˆ·ä¸‹å• â†’ å…ˆç”Ÿæˆè®¢å•ï¼ˆé¢„å åº“å­˜ï¼‰ â†’ æ”¯ä»˜æˆåŠŸåç¡®è®¤æ‰£åº“å­˜
```

**ç­–ç•¥2ï¼šæ•°æ®å†—ä½™è®¾è®¡**
```
âŒ æ ‡å‡†åŒ–è®¾è®¡ï¼š
è®¢å•è¡¨åªå­˜å‚¨å•†å“IDï¼Œå•†å“ä¿¡æ¯ä»å•†å“è¡¨æŸ¥è¯¢

âœ… å†—ä½™è®¾è®¡ï¼š  
è®¢å•è¡¨å­˜å‚¨å•†å“å¿«ç…§ï¼ˆåç§°ã€ä»·æ ¼ç­‰ï¼‰ï¼Œå‡å°‘è·¨ç³»ç»ŸæŸ¥è¯¢
```

**ç­–ç•¥3ï¼šä¸šåŠ¡åˆå¹¶**
```
âŒ è¿‡åº¦æ‹†åˆ†ï¼š
ç”¨æˆ·æœåŠ¡ã€ç§¯åˆ†æœåŠ¡ã€ç­‰çº§æœåŠ¡ã€é’±åŒ…æœåŠ¡

âœ… åˆç†è¾¹ç•Œï¼š
ç”¨æˆ·è´¦æˆ·æœåŠ¡ï¼ˆåŒ…å«åŸºæœ¬ä¿¡æ¯ + ç§¯åˆ† + ç­‰çº§ + ä½™é¢ï¼‰
```

> ğŸ”¥ **é‡ç‚¹ç†è§£**ï¼šæœ€å¥½çš„åˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯æ²¡æœ‰åˆ†å¸ƒå¼äº‹åŠ¡ï¼ä¼˜å…ˆè€ƒè™‘ä¸šåŠ¡è®¾è®¡å’Œæ¶æ„è°ƒæ•´ã€‚

### 2.2 èƒ½å¼‚æ­¥å°±å¼‚æ­¥


**åŒæ­¥ vs å¼‚æ­¥çš„åŒºåˆ«**ï¼š
```
åŒæ­¥å¤„ç†ï¼ˆç”¨æˆ·ç­‰å¾…ï¼‰ï¼š
ç”¨æˆ·ç‚¹å‡»ä¸‹å• â†’ æ‰£åº“å­˜ â†’ æ‰£ä½™é¢ â†’ ç”Ÿæˆè®¢å• â†’ è¿”å›æˆåŠŸ
                â†‘ç­‰å¾…æ‰€æœ‰æ“ä½œå®Œæˆ

å¼‚æ­¥å¤„ç†ï¼ˆç”¨æˆ·æ— æ„Ÿï¼‰ï¼š
ç”¨æˆ·ç‚¹å‡»ä¸‹å• â†’ ç«‹å³è¿”å›"è®¢å•æäº¤æˆåŠŸ" 
              â†“
         åå°å¼‚æ­¥å¤„ç†æ‰£åº“å­˜ã€æ‰£ä½™é¢ç­‰æ“ä½œ
```

**å¼‚æ­¥åŒ–ç­–ç•¥**ï¼š

| ä¸šåŠ¡åœºæ™¯ | åŒæ­¥å¤„ç† | å¼‚æ­¥ä¼˜åŒ– |
|---------|---------|---------|
| **ç”¨æˆ·æ³¨å†Œ** | æ³¨å†Œ â†’ å‘é€é‚®ä»¶ â†’ èµ é€ç§¯åˆ† | æ³¨å†Œ â†’ è¿”å›æˆåŠŸï¼Œé‚®ä»¶å’Œç§¯åˆ†åå°å¤„ç† |
| **è®¢å•åˆ›å»º** | ä¸‹å• â†’ æ‰£åº“å­˜ â†’ æ‰£ä½™é¢ | ä¸‹å• â†’ è¿”å›æˆåŠŸï¼Œåå°å¤„ç†åº“å­˜å’Œæ”¯ä»˜ |
| **æ•°æ®ç»Ÿè®¡** | æ“ä½œ â†’ å®æ—¶æ›´æ–°æŠ¥è¡¨ | æ“ä½œ â†’ è¿”å›æˆåŠŸï¼ŒæŠ¥è¡¨å®šæ—¶æ‰¹é‡æ›´æ–° |

### 2.3 æ¥å—æœ€ç»ˆä¸€è‡´æ€§


**å¼ºä¸€è‡´æ€§ vs æœ€ç»ˆä¸€è‡´æ€§**ï¼š

```
å¼ºä¸€è‡´æ€§ï¼ˆé“¶è¡Œè½¬è´¦ï¼‰ï¼š
Aè´¦æˆ· -100å…ƒ â”â”â”â”â”â”â”â”â”â”â”â”â”“
                          â”ƒ å¿…é¡»åŒæ—¶æˆåŠŸ
Bè´¦æˆ· +100å…ƒ â”â”â”â”â”â”â”â”â”â”â”â”â”›

æœ€ç»ˆä¸€è‡´æ€§ï¼ˆç”µå•†ä¸‹å•ï¼‰ï¼š
åº“å­˜ -1ä¸ª  â”â”â”â”“
              â”£â”â”â” å…è®¸çŸ­æš‚ä¸ä¸€è‡´ï¼Œä½†æœ€ç»ˆä¼šä¸€è‡´
ç§¯åˆ† +10åˆ† â”â”â”â”›
```

**é€‚åˆæœ€ç»ˆä¸€è‡´æ€§çš„åœºæ™¯**ï¼š
- âœ… **ç”µå•†åº“å­˜**ï¼šå°‘é‡è¶…å–å¯ä»¥åç»­è¡¥å¿
- âœ… **ç”¨æˆ·ç§¯åˆ†**ï¼šå»¶è¿Ÿå‡ ç§’åˆ°è´¦ç”¨æˆ·å¯ä»¥æ¥å—
- âœ… **æ•°æ®ç»Ÿè®¡**ï¼šæŠ¥è¡¨æ•°æ®ç¨æœ‰å»¶è¿Ÿä¸å½±å“ä¸šåŠ¡
- âŒ **é‡‘èäº¤æ˜“**ï¼šå¿…é¡»ä¿è¯å¼ºä¸€è‡´æ€§

---

## 3. ğŸ—ï¸ é¢†åŸŸé©±åŠ¨è®¾è®¡åœ¨äº‹åŠ¡ä¸­çš„åº”ç”¨


### 3.1 ä»€ä¹ˆæ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰


**é€šä¿—ç†è§£**ï¼š
DDDå°±æ˜¯æŒ‰ç…§**ä¸šåŠ¡é¢†åŸŸ**æ¥åˆ’åˆ†ç³»ç»Ÿè¾¹ç•Œï¼Œè€Œä¸æ˜¯æŒ‰ç…§æŠ€æœ¯åŠŸèƒ½åˆ’åˆ†ã€‚

```
âŒ æŠ€æœ¯é©±åŠ¨æ‹†åˆ†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç”¨æˆ·æœåŠ¡  â”‚ â”‚è®¢å•æœåŠ¡  â”‚ â”‚å•†å“æœåŠ¡  â”‚
â”‚        â”‚ â”‚        â”‚ â”‚        â”‚
â”‚ç”¨æˆ·ä¿¡æ¯  â”‚ â”‚è®¢å•ä¿¡æ¯  â”‚ â”‚å•†å“ä¿¡æ¯  â”‚
â”‚ç”¨æˆ·ç§¯åˆ†  â”‚ â”‚è®¢å•çŠ¶æ€  â”‚ â”‚å•†å“åº“å­˜  â”‚  
â”‚ç”¨æˆ·ç­‰çº§  â”‚ â”‚æ”¯ä»˜ä¿¡æ¯  â”‚ â”‚å•†å“ä»·æ ¼  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… é¢†åŸŸé©±åŠ¨æ‹†åˆ†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç”¨æˆ·è´¦æˆ·é¢†åŸŸ   â”‚ â”‚äº¤æ˜“è®¢å•é¢†åŸŸ   â”‚ â”‚å•†å“ç®¡ç†é¢†åŸŸ   â”‚
â”‚            â”‚ â”‚            â”‚ â”‚            â”‚
â”‚å®Œæ•´çš„ç”¨æˆ·ä½“ç³»â”‚ â”‚å®Œæ•´çš„äº¤æ˜“æµç¨‹â”‚ â”‚å®Œæ•´çš„å•†å“ä½“ç³»â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 èšåˆæ ¹ä¸äº‹åŠ¡è¾¹ç•Œ


**èšåˆæ ¹çš„æ¦‚å¿µ**ï¼š
- ğŸ¯ **èšåˆæ ¹**ï¼šä¸€ä¸ªä¸šåŠ¡å¯¹è±¡çš„å…¥å£ï¼Œå¯¹å¤–ç»Ÿä¸€æä¾›æœåŠ¡
- ğŸ“¦ **èšåˆå†…**ï¼šé«˜åº¦ç›¸å…³çš„æ•°æ®å’Œä¸šåŠ¡è§„åˆ™
- ğŸ”’ **äº‹åŠ¡è¾¹ç•Œ**ï¼šä¸€ä¸ªèšåˆå†…çš„æ“ä½œå¯ä»¥ç”¨å•æœºäº‹åŠ¡

**å®é™…ä¾‹å­**ï¼š
```
è®¢å•èšåˆæ ¹è®¾è®¡ï¼š

OrderAggregate {
    è®¢å•åŸºæœ¬ä¿¡æ¯ (orderId, userId, status)
    è®¢å•å•†å“æ˜ç»† (OrderItem[])
    æ”¯ä»˜ä¿¡æ¯ (paymentInfo)  
    ç‰©æµä¿¡æ¯ (shippingInfo)
    
    // èšåˆå†…æ“ä½œï¼Œå¯ä»¥ç”¨æœ¬åœ°äº‹åŠ¡
    createOrder()
    confirmPayment() 
    updateShipping()
}
```

**è®¾è®¡åŸåˆ™**ï¼š
- ğŸ”¸ **ä¸€ä¸ªäº‹åŠ¡åªèƒ½æ“ä½œä¸€ä¸ªèšåˆæ ¹**
- ğŸ”¸ **èšåˆé—´é€šè¿‡äº‹ä»¶è¿›è¡Œé€šä¿¡**
- ğŸ”¸ **èšåˆå†…ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œèšåˆé—´æœ€ç»ˆä¸€è‡´æ€§**

### 3.3 é¢†åŸŸäº‹ä»¶ä¸äº‹åŠ¡è§£è€¦


**ä¼ ç»Ÿåšæ³• vs DDDåšæ³•**ï¼š

```java
// âŒ ä¼ ç»Ÿåšæ³•ï¼šç›´æ¥è°ƒç”¨å…¶ä»–æœåŠ¡
@Transactional
public void createOrder(OrderRequest request) {
    // åˆ›å»ºè®¢å•
    Order order = new Order(request);
    orderRepository.save(order);
    
    // ç›´æ¥è°ƒç”¨å…¶ä»–æœåŠ¡ï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰
    inventoryService.decreaseStock(request.getProductId());
    pointService.addPoints(request.getUserId(), 100);
}

// âœ… DDDåšæ³•ï¼šå‘å¸ƒé¢†åŸŸäº‹ä»¶
@Transactional  
public void createOrder(OrderRequest request) {
    // åˆ›å»ºè®¢å•
    Order order = new Order(request);
    orderRepository.save(order);
    
    // å‘å¸ƒé¢†åŸŸäº‹ä»¶
    domainEventPublisher.publish(new OrderCreatedEvent(order));
}
```

**äº‹ä»¶å¤„ç†**ï¼š
```java
// å¼‚æ­¥å¤„ç†é¢†åŸŸäº‹ä»¶
@EventListener
public void handleOrderCreated(OrderCreatedEvent event) {
    // å¼‚æ­¥å¤„ç†åº“å­˜æ‰£å‡
    inventoryService.decreaseStock(event.getProductId());
}

@EventListener
public void handleOrderCreated(OrderCreatedEvent event) {
    // å¼‚æ­¥å¤„ç†ç§¯åˆ†èµ é€
    pointService.addPoints(event.getUserId(), 100);
}
```

---

## 4. ğŸ¯ å¼±ä¸€è‡´æ€§ä¸ä¸šåŠ¡å®¹å¿åº¦


### 4.1 ç†è§£ä¸šåŠ¡çš„ä¸€è‡´æ€§éœ€æ±‚


**ä¸€è‡´æ€§éœ€æ±‚åˆ†çº§**ï¼š

| ä¸šåŠ¡åœºæ™¯ | ä¸€è‡´æ€§è¦æ±‚ | å®¹å¿æ—¶é—´ | å¤„ç†æ–¹å¼ |
|---------|-----------|---------|---------|
| **é“¶è¡Œè½¬è´¦** | ğŸ”´ **å¼ºä¸€è‡´** | 0ç§’ | åˆ†å¸ƒå¼äº‹åŠ¡ |
| **æ”¯ä»˜æ‰£æ¬¾** | ğŸ”´ **å¼ºä¸€è‡´** | 0ç§’ | åˆ†å¸ƒå¼äº‹åŠ¡ |
| **åº“å­˜æ‰£å‡** | ğŸŸ¡ **æœ€ç»ˆä¸€è‡´** | 30ç§’å†… | å¼‚æ­¥è¡¥å¿ |
| **ç§¯åˆ†å‘æ”¾** | ğŸŸ¢ **å¼±ä¸€è‡´** | å‡ åˆ†é’Ÿå†… | å¼‚æ­¥å¤„ç† |
| **ç»Ÿè®¡æŠ¥è¡¨** | ğŸŸ¢ **å¼±ä¸€è‡´** | å°æ—¶çº§åˆ« | å®šæ—¶ä»»åŠ¡ |

### 4.2 è®¾è®¡å®¹é”™æœºåˆ¶


**è¶…å–é—®é¢˜çš„å¤„ç†**ï¼š
```
ç”µå•†åº“å­˜ç®¡ç†ç­–ç•¥ï¼š

æ–¹æ¡ˆ1ï¼šä¸¥æ ¼åº“å­˜æ§åˆ¶ï¼ˆå¼ºä¸€è‡´æ€§ï¼‰
- ä¼˜ç‚¹ï¼šç»ä¸è¶…å–
- ç¼ºç‚¹ï¼šæ€§èƒ½å·®ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½

æ–¹æ¡ˆ2ï¼šå…è®¸å°‘é‡è¶…å–ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰
- å…è®¸åº“å­˜æš‚æ—¶ä¸ºè´Ÿ
- åå°å¼‚æ­¥å¤„ç†ï¼š
  * è”ç³»ç”¨æˆ·å–æ¶ˆè®¢å•
  * ä»å…¶ä»–æ¸ é“è°ƒè´§
  * ç»™äºˆè¡¥å¿ï¼ˆä¼˜æƒ åˆ¸ç­‰ï¼‰
```

**è¡¥å¿ç­–ç•¥ç¤ºä¾‹**ï¼š
```java
// åº“å­˜ä¸è¶³æ—¶çš„è¡¥å¿æµç¨‹
public class InventoryCompensationHandler {
    
    public void handleInsufficientInventory(Order order) {
        // ç­–ç•¥1ï¼šå–æ¶ˆè®¢å•ï¼Œé€€æ¬¾ç»™ç”¨æˆ·
        if (canCancelOrder(order)) {
            cancelOrderAndRefund(order);
        }
        
        // ç­–ç•¥2ï¼šä»å…¶ä»–æ¸ é“è°ƒè´§
        else if (canTransferFromOtherWarehouse(order)) {
            transferInventory(order);
        }
        
        // ç­–ç•¥3ï¼šç»™ç”¨æˆ·è¡¥å¿
        else {
            provideCompensation(order.getUserId());
        }
    }
}
```

### 4.3 ç”¨æˆ·ä½“éªŒä¼˜åŒ–


**å‰ç«¯æç¤ºç­–ç•¥**ï¼š
```
ä¸‹å•æµç¨‹çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼š

ç«‹å³åé¦ˆï¼š
"è®¢å•æäº¤æˆåŠŸï¼æˆ‘ä»¬æ­£åœ¨ä¸ºæ‚¨å¤„ç†..."

å¼‚æ­¥é€šçŸ¥ï¼š
- çŸ­ä¿¡ï¼š"æ‚¨çš„è®¢å•å·²ç¡®è®¤ï¼Œæ­£åœ¨å‡†å¤‡å‘è´§"
- Pushï¼š"åº“å­˜ä¸è¶³ï¼Œå·²ä¸ºæ‚¨å®‰æ’è°ƒè´§ï¼Œé¢„è®¡å»¶è¿Ÿ1å¤©"
- é‚®ä»¶ï¼š"è®¢å•å¤„ç†å¼‚å¸¸ï¼Œå®¢æœå°†ä¸»åŠ¨è”ç³»æ‚¨"
```

---

## 5. ğŸ”§ ä¸šåŠ¡æ‹†åˆ†ä¸äº‹åŠ¡è¾¹ç•Œè®¾è®¡


### 5.1 åˆç†çš„æœåŠ¡æ‹†åˆ†åŸåˆ™


**æ‹†åˆ†çš„è€ƒè™‘å› ç´ **ï¼š

```
å›¢é˜Ÿç»´åº¦ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ä¸€ä¸ªå›¢é˜Ÿè´Ÿè´£ä¸€ä¸ªæœåŠ¡â”‚ â† é¿å…è·¨å›¢é˜Ÿåè°ƒæˆæœ¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®ç»´åº¦ï¼š  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç›¸å…³æ•°æ®æ”¾åœ¨ä¸€èµ·  â”‚ â† å‡å°‘è·¨æœåŠ¡æŸ¥è¯¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸šåŠ¡ç»´åº¦ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚å®Œæ•´çš„ä¸šåŠ¡é—­ç¯   â”‚ â† ä¸€ä¸ªæœåŠ¡å®Œæˆå®Œæ•´ä¸šåŠ¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ‹†åˆ†æ¡ˆä¾‹åˆ†æ**ï¼š

```
âŒ è¿‡åº¦æ‹†åˆ†ï¼š
ç”¨æˆ·æœåŠ¡  â†’ åªç®¡ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
ç§¯åˆ†æœåŠ¡  â†’ åªç®¡ç§¯åˆ†å¢å‡  
ç­‰çº§æœåŠ¡  â†’ åªç®¡ç”¨æˆ·ç­‰çº§
é’±åŒ…æœåŠ¡  â†’ åªç®¡ç”¨æˆ·ä½™é¢

é—®é¢˜ï¼šç”¨æˆ·ä¸€ä¸ªæ“ä½œéœ€è¦è°ƒç”¨4ä¸ªæœåŠ¡

âœ… åˆç†æ‹†åˆ†ï¼š
ç”¨æˆ·è´¦æˆ·æœåŠ¡ â†’ ç®¡ç†ç”¨æˆ·å®Œæ•´è´¦æˆ·ä½“ç³»
è®¢å•äº¤æ˜“æœåŠ¡ â†’ ç®¡ç†å®Œæ•´äº¤æ˜“æµç¨‹  
å•†å“ç®¡ç†æœåŠ¡ â†’ ç®¡ç†å•†å“å…¨ç”Ÿå‘½å‘¨æœŸ

å¥½å¤„ï¼šæ¯ä¸ªæœåŠ¡å†…éƒ¨å¯ä»¥ç”¨æœ¬åœ°äº‹åŠ¡
```

### 5.2 äº‹åŠ¡è¾¹ç•Œè®¾è®¡åŸåˆ™


**è¾¹ç•Œè®¾è®¡çš„æ ¸å¿ƒè§„åˆ™**ï¼š

ğŸ”¸ **åŸåˆ™1ï¼šé«˜å†…èšï¼Œä½è€¦åˆ**
```java
// âœ… å¥½çš„äº‹åŠ¡è¾¹ç•Œ
@Transactional
public void createOrder(OrderRequest request) {
    // åœ¨åŒä¸€ä¸ªæœåŠ¡å†…å®Œæˆ
    Order order = new Order(request);
    orderRepository.save(order);
    
    // åŒä¸€èšåˆå†…çš„è®¢å•é¡¹
    for (OrderItem item : request.getItems()) {
        order.addItem(item);
    }
    
    // æ›´æ–°è®¢å•çŠ¶æ€
    order.updateStatus(OrderStatus.CREATED);
}
```

ğŸ”¸ **åŸåˆ™2ï¼šé¿å…é•¿äº‹åŠ¡**
```java
// âŒ é•¿äº‹åŠ¡ï¼ˆå®¹æ˜“è¶…æ—¶ï¼‰
@Transactional
public void processOrder(Long orderId) {
    Order order = orderRepository.findById(orderId);
    
    // è°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼ˆå¯èƒ½å¾ˆæ…¢ï¼‰
    PaymentResult result = paymentService.pay(order);
    
    // å‘é€é‚®ä»¶ï¼ˆå¯èƒ½å¾ˆæ…¢ï¼‰
    emailService.sendConfirmation(order);
    
    order.updateStatus(OrderStatus.PAID);
}

// âœ… çŸ­äº‹åŠ¡ + å¼‚æ­¥å¤„ç†
@Transactional
public void processOrder(Long orderId) {
    Order order = orderRepository.findById(orderId);
    order.updateStatus(OrderStatus.PROCESSING);
    
    // å‘å¸ƒäº‹ä»¶ï¼Œå¼‚æ­¥å¤„ç†
    eventPublisher.publish(new OrderProcessingEvent(order));
}
```

### 5.3 è·¨æœåŠ¡æ•°æ®ä¸€è‡´æ€§è®¾è®¡


**æ•°æ®åŒæ­¥ç­–ç•¥**ï¼š

| ç­–ç•¥ | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|-----|---------|-----|-----|
| **å®æ—¶åŒæ­¥** | å…³é”®ä¸šåŠ¡æ•°æ® | æ•°æ®åŠæ—¶ | æ€§èƒ½å½±å“å¤§ |
| **å‡†å®æ—¶åŒæ­¥** | ä¸€èˆ¬ä¸šåŠ¡æ•°æ® | å¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§ | ç¨æœ‰å»¶è¿Ÿ |
| **å®šæ—¶åŒæ­¥** | æŠ¥è¡¨ç»Ÿè®¡æ•°æ® | æ€§èƒ½å¥½ | å»¶è¿Ÿè¾ƒå¤§ |

**æ•°æ®å†—ä½™è®¾è®¡**ï¼š
```java
// è®¢å•æœåŠ¡ä¸­çš„ç”¨æˆ·ä¿¡æ¯å¿«ç…§
public class Order {
    private Long orderId;
    private Long userId;
    
    // å†—ä½™ç”¨æˆ·ä¿¡æ¯ï¼Œé¿å…è·¨æœåŠ¡æŸ¥è¯¢
    private String userNickname;  
    private String userPhone;
    private String userLevel;
    
    // å†—ä½™å•†å“ä¿¡æ¯å¿«ç…§
    private List<OrderItem> items; // åŒ…å«å•†å“åç§°ã€ä»·æ ¼ç­‰
}
```

---

## 6. ğŸ› ï¸ è¡¥å¿ç­–ç•¥è®¾è®¡


### 6.1 è¡¥å¿æ¨¡å¼çš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯è¡¥å¿ï¼Ÿ**
å½“åˆ†å¸ƒå¼æ“ä½œå¤±è´¥æ—¶ï¼Œ**æ’¤é”€**å·²ç»æ‰§è¡Œçš„æ“ä½œï¼Œè®©ç³»ç»Ÿå›åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚

**è¡¥å¿ vs å›æ»šçš„åŒºåˆ«**ï¼š
```
ä¼ ç»Ÿå›æ»šï¼ˆæ•°æ®åº“ï¼‰ï¼š
å¼€å§‹äº‹åŠ¡ â†’ æ“ä½œA â†’ æ“ä½œB â†’ å‘ç”Ÿé”™è¯¯ â†’ è‡ªåŠ¨å›æ»šæ‰€æœ‰æ“ä½œ

åˆ†å¸ƒå¼è¡¥å¿ï¼š
ç³»ç»ŸAæ“ä½œæˆåŠŸ â†’ ç³»ç»ŸBæ“ä½œå¤±è´¥ â†’ æ‰‹åŠ¨æ‰§è¡Œ"ç³»ç»ŸAçš„åå‘æ“ä½œ"
```

### 6.2 è¡¥å¿æ“ä½œçš„è®¾è®¡åŸåˆ™


**è¡¥å¿æ“ä½œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶**ï¼š

ğŸ”¸ **å¹‚ç­‰æ€§**ï¼šå¤šæ¬¡æ‰§è¡Œç»“æœä¸€è‡´
```java
// âœ… å¹‚ç­‰çš„è¡¥å¿æ“ä½œ
public void compensateInventory(Long productId, Integer quantity) {
    Product product = productRepository.findById(productId);
    
    // æ£€æŸ¥å½“å‰çŠ¶æ€ï¼Œé¿å…é‡å¤è¡¥å¿
    if (!isAlreadyCompensated(productId, quantity)) {
        product.increaseStock(quantity);
        markAsCompensated(productId, quantity);
    }
}
```

ğŸ”¸ **å¯é æ€§**ï¼šå¿…é¡»èƒ½æˆåŠŸæ‰§è¡Œ
```java
// âœ… å¯é çš„è¡¥å¿æ“ä½œ
public void compensatePayment(Long userId, BigDecimal amount) {
    try {
        // ä¸»è¦è¡¥å¿é€»è¾‘
        userAccountService.refund(userId, amount);
    } catch (Exception e) {
        // è¡¥å¿å¤±è´¥æ—¶çš„å¤„ç†
        scheduleRetryCompensation(userId, amount);
        // æˆ–è€…äººå·¥ä»‹å…¥å¤„ç†
        notifyManualIntervention(userId, amount, e);
    }
}
```

### 6.3 è¡¥å¿ç­–ç•¥çš„å®ç°æ–¹æ¡ˆ


**æ–¹æ¡ˆ1ï¼šçŠ¶æ€æœºæ¨¡å¼**
```java
public class OrderCompensationStateMachine {
    
    public void compensateOrder(Long orderId) {
        Order order = orderRepository.findById(orderId);
        
        switch (order.getStatus()) {
            case PAID:
                // è¡¥å¿æ”¯ä»˜
                compensatePayment(order);
                order.updateStatus(OrderStatus.PAYMENT_COMPENSATED);
                
            case INVENTORY_RESERVED:
                // è¡¥å¿åº“å­˜
                compensateInventory(order);  
                order.updateStatus(OrderStatus.INVENTORY_COMPENSATED);
                break;
                
            case CREATED:
                // ç›´æ¥å–æ¶ˆè®¢å•
                order.updateStatus(OrderStatus.CANCELLED);
                break;
        }
    }
}
```

**æ–¹æ¡ˆ2ï¼šè¡¥å¿ä»»åŠ¡é˜Ÿåˆ—**
```java
@Component
public class CompensationTaskProcessor {
    
    @Async
    public void processCompensationTasks(List<CompensationTask> tasks) {
        for (CompensationTask task : tasks) {
            try {
                executeCompensation(task);
                task.markSuccess();
            } catch (Exception e) {
                task.markFailed();
                scheduleRetry(task);
            }
        }
    }
}
```

### 6.4 è¡¥å¿çš„ç›‘æ§ä¸å‘Šè­¦


**è¡¥å¿ç›‘æ§æŒ‡æ ‡**ï¼š
```java
public class CompensationMetrics {
    
    // è¡¥å¿æˆåŠŸç‡
    @Counter
    private long compensationSuccessCount;
    
    // è¡¥å¿å¤±è´¥ç‡  
    @Counter
    private long compensationFailureCount;
    
    // è¡¥å¿æ‰§è¡Œæ—¶é—´
    @Timer
    private Timer compensationExecutionTime;
    
    // äººå·¥å¹²é¢„æ¬¡æ•°
    @Counter  
    private long manualInterventionCount;
}
```

---

## 7. ğŸ“Š ç›‘æ§å‘Šè­¦ç­–ç•¥


### 7.1 åˆ†å¸ƒå¼äº‹åŠ¡ç›‘æ§çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§ï¼Ÿ**
- ğŸ” **åŠæ—¶å‘ç°é—®é¢˜**ï¼šäº‹åŠ¡å¤±è´¥ã€è¶…æ—¶ç­‰å¼‚å¸¸
- ğŸ“ˆ **æ€§èƒ½åˆ†æ**ï¼šäº‹åŠ¡è€—æ—¶ã€æˆåŠŸç‡è¶‹åŠ¿
- ğŸš¨ **æ•…éšœé¢„è­¦**ï¼šåœ¨é—®é¢˜å½±å“ç”¨æˆ·å‰å‘ç°
- ğŸ“‹ **æ•°æ®å†³ç­–**ï¼šä¼˜åŒ–äº‹åŠ¡è®¾è®¡çš„ä¾æ®

### 7.2 å…³é”®ç›‘æ§æŒ‡æ ‡


**äº‹åŠ¡æˆåŠŸç‡æŒ‡æ ‡**ï¼š
```java
// äº‹åŠ¡æˆåŠŸç‡ç›‘æ§
@Component
public class TransactionMonitor {
    
    @Autowired
    private MeterRegistry meterRegistry;
    
    public void recordTransactionResult(String transactionType, boolean success) {
        Counter.builder("transaction.result")
                .tag("type", transactionType)
                .tag("result", success ? "success" : "failure")
                .register(meterRegistry)
                .increment();
    }
}
```

**æ ¸å¿ƒç›‘æ§ç»´åº¦**ï¼š

| æŒ‡æ ‡ç±»å‹ | å…·ä½“æŒ‡æ ‡ | å‘Šè­¦é˜ˆå€¼å»ºè®® |
|---------|---------|-------------|
| **æˆåŠŸç‡** | äº‹åŠ¡æˆåŠŸç‡ | < 95% |
| **è€—æ—¶** | äº‹åŠ¡å¹³å‡è€—æ—¶ | > 5ç§’ |
| **å¹¶å‘** | å¹¶å‘äº‹åŠ¡æ•°é‡ | > 1000 |
| **è¡¥å¿** | è¡¥å¿æ‰§è¡Œæ¬¡æ•° | > æ¯å°æ—¶10æ¬¡ |
| **é‡è¯•** | é‡è¯•æ¬¡æ•° | > æ¯åˆ†é’Ÿ5æ¬¡ |

### 7.3 åˆ†å±‚ç›‘æ§ç­–ç•¥


**åº”ç”¨å±‚ç›‘æ§**ï¼š
```java
@Aspect
@Component
public class TransactionMonitoringAspect {
    
    @Around("@annotation(DistributedTransactional)")
    public Object monitorTransaction(ProceedingJoinPoint joinPoint) throws Throwable {
        String methodName = joinPoint.getSignature().getName();
        Timer.Sample sample = Timer.start();
        
        try {
            Object result = joinPoint.proceed();
            // è®°å½•æˆåŠŸ
            recordSuccess(methodName);
            return result;
        } catch (Exception e) {
            // è®°å½•å¤±è´¥
            recordFailure(methodName, e);
            throw e;
        } finally {
            // è®°å½•è€—æ—¶
            sample.stop(Timer.builder("transaction.duration")
                    .tag("method", methodName)
                    .register(meterRegistry));
        }
    }
}
```

**ä¸šåŠ¡å±‚ç›‘æ§**ï¼š
```java
public class OrderTransactionMonitor {
    
    public void monitorOrderCreation(Order order) {
        // ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
        Tags tags = Tags.of(
            "product_category", order.getProductCategory(),
            "user_level", order.getUserLevel(),
            "amount_range", getAmountRange(order.getAmount())
        );
        
        meterRegistry.counter("order.created", tags).increment();
    }
}
```

### 7.4 å‘Šè­¦ç­–ç•¥è®¾è®¡


**å‘Šè­¦çº§åˆ«è®¾è®¡**ï¼š
```
ğŸŸ¢ ä¿¡æ¯çº§ï¼ˆINFOï¼‰ï¼š
- äº‹åŠ¡æˆåŠŸç‡ 90-95%
- å¤„ç†ï¼šè®°å½•æ—¥å¿—ï¼Œæ— éœ€immediate action

ğŸŸ¡ è­¦å‘Šçº§ï¼ˆWARNï¼‰ï¼š
- äº‹åŠ¡æˆåŠŸç‡ 85-90%  
- å¤„ç†ï¼šå‘é€é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜

ğŸ”´ ç´§æ€¥çº§ï¼ˆERRORï¼‰ï¼š
- äº‹åŠ¡æˆåŠŸç‡ < 85%
- å¤„ç†ï¼šçŸ­ä¿¡é€šçŸ¥ + ç”µè¯é€šçŸ¥ + é¡µé¢å¼¹çª—

ğŸš¨ è‡´å‘½çº§ï¼ˆFATALï¼‰ï¼š
- æ ¸å¿ƒä¸šåŠ¡å®Œå…¨å¤±è´¥
- å¤„ç†ï¼šç«‹å³é€šçŸ¥æ‰€æœ‰ç›¸å…³äººå‘˜
```

**å‘Šè­¦æ”¶æ•›ç­–ç•¥**ï¼š
```java
public class AlertManager {
    
    public void sendAlert(AlertLevel level, String message) {
        // ç›¸åŒå‘Šè­¦5åˆ†é’Ÿå†…åªå‘é€ä¸€æ¬¡
        String alertKey = generateAlertKey(level, message);
        if (shouldSuppressAlert(alertKey)) {
            return;
        }
        
        // æ ¹æ®çº§åˆ«é€‰æ‹©é€šçŸ¥æ–¹å¼
        switch (level) {
            case INFO:
                logAlert(message);
                break;
            case WARN:
                sendEmailAlert(message);
                break;
            case ERROR:
                sendSmsAlert(message);
                sendEmailAlert(message);
                break;
            case FATAL:
                sendSmsAlert(message);
                sendEmailAlert(message);
                callAlert(message);
                break;
        }
        
        recordAlertSent(alertKey);
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 è®¾è®¡åŸåˆ™æ€»ç»“


```
ğŸ¯ ç¬¬ä¸€åŸåˆ™ï¼šèƒ½ä¸ç”¨åˆ†å¸ƒå¼äº‹åŠ¡å°±ä¸ç”¨
â€¢ é‡æ–°è®¾è®¡ä¸šåŠ¡æµç¨‹
â€¢ åˆç†æ‹†åˆ†æœåŠ¡è¾¹ç•Œ  
â€¢ ä½¿ç”¨æ•°æ®å†—ä½™å‡å°‘è·¨æœåŠ¡è°ƒç”¨

ğŸ”„ ç¬¬äºŒåŸåˆ™ï¼šèƒ½å¼‚æ­¥å°±å¼‚æ­¥
â€¢ ç«‹å³å“åº”ç”¨æˆ·ï¼Œåå°å¤„ç†ä¸šåŠ¡
â€¢ ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦æœåŠ¡
â€¢ æ¥å—æœ€ç»ˆä¸€è‡´æ€§

ğŸ—ï¸ ç¬¬ä¸‰åŸåˆ™ï¼šåŸºäºé¢†åŸŸé©±åŠ¨è®¾è®¡
â€¢ æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†æœåŠ¡è¾¹ç•Œ
â€¢ ä¸€ä¸ªèšåˆä¸€ä¸ªäº‹åŠ¡
â€¢ èšåˆé—´é€šè¿‡äº‹ä»¶é€šä¿¡

ğŸ› ï¸ ç¬¬å››åŸåˆ™ï¼šè®¾è®¡å®Œå–„çš„è¡¥å¿æœºåˆ¶
â€¢ è¡¥å¿æ“ä½œå¿…é¡»å¹‚ç­‰å’Œå¯é 
â€¢ å»ºç«‹è¡¥å¿ä»»åŠ¡çš„ç›‘æ§å’Œé‡è¯•
â€¢ å‡†å¤‡äººå·¥å¹²é¢„çš„å¤‡é€‰æ–¹æ¡ˆ
```

### 8.2 æŠ€æœ¯é€‰å‹æŒ‡å¯¼


| ä¸šåŠ¡ç‰¹ç‚¹ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|---------|---------|------|
| **å¼ºä¸€è‡´æ€§è¦æ±‚** | 2PC/3PCã€Seata | ä¿è¯ACIDç‰¹æ€§ |
| **é«˜å¹¶å‘åœºæ™¯** | TCCã€SAGA | æ€§èƒ½æ›´å¥½ï¼Œé”æ—¶é—´çŸ­ |
| **é•¿æµç¨‹ä¸šåŠ¡** | SAGA | æ”¯æŒé•¿äº‹åŠ¡ï¼Œè¡¥å¿çµæ´» |
| **ç®€å•åœºæ™¯** | æœ¬åœ°æ¶ˆæ¯è¡¨ | å®ç°ç®€å•ï¼Œå¯é æ€§é«˜ |
| **å¾®æœåŠ¡æ¶æ„** | äº‹ä»¶é©±åŠ¨ | æœåŠ¡è§£è€¦ï¼Œæ‰©å±•æ€§å¥½ |

### 8.3 å®è·µå»ºè®®


**å¼€å‘é˜¶æ®µ**ï¼š
- ğŸ” **å……åˆ†ç†è§£ä¸šåŠ¡**ï¼šæ˜ç¡®å“ªäº›æ“ä½œéœ€è¦å¼ºä¸€è‡´æ€§
- ğŸ“ **åˆç†è®¾è®¡è¾¹ç•Œ**ï¼šé¿å…ä¸å¿…è¦çš„åˆ†å¸ƒå¼äº‹åŠ¡
- ğŸ§ª **å®Œå–„æµ‹è¯•ç”¨ä¾‹**ï¼šç‰¹åˆ«æ˜¯å¼‚å¸¸åœºæ™¯æµ‹è¯•

**è¿ç»´é˜¶æ®µ**ï¼š
- ğŸ“Š **å»ºç«‹ç›‘æ§ä½“ç³»**ï¼šå®æ—¶æŒæ¡äº‹åŠ¡å¥åº·çŠ¶å†µ
- ğŸš¨ **å®Œå–„å‘Šè­¦æœºåˆ¶**ï¼šåŠæ—¶å‘ç°å’Œå¤„ç†é—®é¢˜
- ğŸ“ **åˆ¶å®šåº”æ€¥é¢„æ¡ˆ**ï¼šæ˜ç¡®æ•…éšœå¤„ç†æµç¨‹

**å›¢é˜Ÿåä½œ**ï¼š
- ğŸ¤ **è·¨å›¢é˜Ÿåè°ƒ**ï¼šäº‹åŠ¡æ¶‰åŠå¤šä¸ªå›¢é˜Ÿæ—¶çš„æ²Ÿé€šæœºåˆ¶
- ğŸ“š **çŸ¥è¯†å…±äº«**ï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„æœ€ä½³å®è·µæ–‡æ¡£åŒ–
- ğŸ¯ **æŒç»­æ”¹è¿›**ï¼šåŸºäºç›‘æ§æ•°æ®ä¼˜åŒ–äº‹åŠ¡è®¾è®¡

> ğŸ’¡ **æ ¸å¿ƒè®°å¿†**ï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„æœ¬è´¨æ˜¯åœ¨**æ€§èƒ½ã€ä¸€è‡´æ€§ã€å¯ç”¨æ€§**ä¹‹é—´åšæƒè¡¡ã€‚æœ€ä½³å®è·µä¸æ˜¯è¿½æ±‚å®Œç¾çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œè€Œæ˜¯æ‰¾åˆ°æœ€é€‚åˆä¸šåŠ¡åœºæ™¯çš„å¹³è¡¡ç‚¹ã€‚

### 8.4 å¸¸è§è¯¯åŒº


âŒ **è¯¯åŒº1**ï¼šè¿‡åº¦è¿½æ±‚å¼ºä¸€è‡´æ€§
- å®é™…æƒ…å†µï¼šå¾ˆå¤šä¸šåŠ¡åœºæ™¯å¯ä»¥æ¥å—æœ€ç»ˆä¸€è‡´æ€§
- æ­£ç¡®åšæ³•ï¼šæ ¹æ®ä¸šåŠ¡é‡è¦æ€§é€‰æ‹©åˆé€‚çš„ä¸€è‡´æ€§çº§åˆ«

âŒ **è¯¯åŒº2**ï¼šæŠ€æœ¯æ–¹æ¡ˆè¿‡äºå¤æ‚
- å®é™…æƒ…å†µï¼šå¤æ‚æ–¹æ¡ˆå¢åŠ ç»´æŠ¤æˆæœ¬å’Œæ•…éšœé£é™©
- æ­£ç¡®åšæ³•ï¼šä¼˜å…ˆé€‰æ‹©ç®€å•å¯é çš„æ–¹æ¡ˆ

âŒ **è¯¯åŒº3**ï¼šå¿½è§†ç›‘æ§å’Œè¿ç»´
- å®é™…æƒ…å†µï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜å¾€å¾€åœ¨ç”Ÿäº§ç¯å¢ƒæ‰æš´éœ²
- æ­£ç¡®åšæ³•ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦ä½“ç³»

**æœ€ç»ˆå»ºè®®**ï¼šä»ç®€å•å¼€å§‹ï¼Œé€æ­¥ä¼˜åŒ–ã€‚å…ˆä¿è¯ç³»ç»Ÿå¯ç”¨ï¼Œå†è¿½æ±‚æ€§èƒ½å’Œä¸€è‡´æ€§çš„å¹³è¡¡ã€‚