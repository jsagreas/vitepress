---
title: 25ã€Dubboä¸SpringBootæ·±åº¦é›†æˆ
---
## ğŸ“š ç›®å½•

1. [SpringBooté›†æˆDubboæ¦‚è¿°](#1-SpringBooté›†æˆDubboæ¦‚è¿°)
2. [Dubbo Spring Boot Starterè¯¦è§£](#2-Dubbo-Spring-Boot-Starterè¯¦è§£)
3. [è‡ªåŠ¨è£…é…æœºåˆ¶æ·±å…¥](#3-è‡ªåŠ¨è£…é…æœºåˆ¶æ·±å…¥)
4. [æ³¨è§£é©±åŠ¨å¼€å‘å®è·µ](#4-æ³¨è§£é©±åŠ¨å¼€å‘å®è·µ)
5. [é…ç½®å±æ€§ç»‘å®š](#5-é…ç½®å±æ€§ç»‘å®š)
6. [å¥åº·æ£€æŸ¥ä¸ç›‘æ§é›†æˆ](#6-å¥åº·æ£€æŸ¥ä¸ç›‘æ§é›†æˆ)
7. [å¤šç¯å¢ƒé…ç½®ç®¡ç†](#7-å¤šç¯å¢ƒé…ç½®ç®¡ç†)
8. [çƒ­éƒ¨ç½²ä¸å¼€å‘ä¼˜åŒ–](#8-çƒ­éƒ¨ç½²ä¸å¼€å‘ä¼˜åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŸ SpringBooté›†æˆDubboæ¦‚è¿°


### 1.1 ä¸ºä»€ä¹ˆè¦é›†æˆSpringBoot


**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> æƒ³è±¡ä½ åœ¨è£…ä¿®æˆ¿å­ï¼šä¼ ç»Ÿæ–¹å¼éœ€è¦è‡ªå·±ä¹°ææ–™ã€è¯·å·¥äººã€ç›¯è¿›åº¦ï¼›è€ŒSpringBootå°±åƒç²¾è£…æˆ¿ï¼Œæ‹åŒ…å…¥ä½ã€‚Dubboé›†æˆSpringBootå°±æ˜¯åœ¨ç²¾è£…æˆ¿é‡Œå®‰è£…æ™ºèƒ½å®¶å±…ç³»ç»Ÿâ€”â€”å¼€ç®±å³ç”¨ï¼Œé…ç½®ç®€å•ï¼

**ğŸ’¡ æ ¸å¿ƒä»·å€¼**

```
ä¼ ç»ŸDubboå¼€å‘ç—›ç‚¹ï¼š
â”œâ”€â”€ ç¹ççš„XMLé…ç½®
â”œâ”€â”€ å¤æ‚çš„ä¾èµ–ç®¡ç†
â”œâ”€â”€ æ‰‹åŠ¨å¯åŠ¨æ³¨å†Œä¸­å¿ƒ
â””â”€â”€ ç¼ºå°‘å¼€å‘å·¥å…·æ”¯æŒ

SpringBooté›†æˆä¼˜åŠ¿ï¼š
â”œâ”€â”€ é›¶XMLé…ç½®ï¼Œæ³¨è§£é©±åŠ¨
â”œâ”€â”€ è‡ªåŠ¨ä¾èµ–ç®¡ç†
â”œâ”€â”€ å†…åµŒæœåŠ¡å™¨ï¼Œä¸€é”®å¯åŠ¨
â””â”€â”€ å®Œå–„çš„å¼€å‘è€…ä½“éªŒ
```

**ğŸ¯ é›†æˆåçš„å˜åŒ–**

| æ–¹é¢ | ä¼ ç»Ÿæ–¹å¼ | SpringBootæ–¹å¼ | æ”¹å–„æ•ˆæœ |
|------|---------|---------------|---------|
| **é…ç½®æ–¹å¼** | XMLé…ç½®æ–‡ä»¶ | application.yml | â­â­â­â­â­ |
| **å¯åŠ¨æ—¶é—´** | éœ€è¦å¤–ç½®å®¹å™¨ | å†…åµŒæœåŠ¡å™¨ | â­â­â­â­ |
| **ä¾èµ–ç®¡ç†** | æ‰‹åŠ¨é…ç½®ç‰ˆæœ¬ | è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç† | â­â­â­â­â­ |
| **å¼€å‘æ•ˆç‡** | é…ç½®ç¹ç | å¿«é€Ÿå¼€å‘ | â­â­â­â­â­ |

### 1.2 é›†æˆæ¶æ„å…¨æ™¯å›¾


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SpringBoot Application          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Auto Configuration            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ Dubbo    â”‚  â”‚ Spring   â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ Starter  â”‚  â”‚ Context  â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚            â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Dubbo Service Registry         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚Provider â”‚  â”‚   Consumer   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å¿«é€Ÿä½“éªŒ


**ğŸš€ 30ç§’å¯åŠ¨ç¬¬ä¸€ä¸ªDubboæœåŠ¡**

**æ­¥éª¤1ï¼šæ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-starter</artifactId>
    <version>3.2.0</version>
</dependency>
```

**æ­¥éª¤2ï¼šé…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰**
```yaml
dubbo:
  application:
    name: demo-provider
  registry:
    address: zookeeper://127.0.0.1:2181
  protocol:
    name: dubbo
    port: 20880
```

**æ­¥éª¤3ï¼šå¯åŠ¨ç±»**
```java
@SpringBootApplication
@EnableDubbo  // ä¸€ä¸ªæ³¨è§£æå®š
public class ProviderApplication {
    public static void main(String[] args) {
        SpringApplication.run(ProviderApplication.class, args);
    }
}
```

::: tip ğŸ’¡ å…³é”®ç†è§£
ä¸‰æ­¥æå®šï¼ä¸éœ€è¦å†™ä»»ä½•XMLï¼Œä¸éœ€è¦æ‰‹åŠ¨é…ç½®Beanï¼ŒSpringBootä¼šè‡ªåŠ¨å¸®ä½ å®Œæˆæ‰€æœ‰åˆå§‹åŒ–å·¥ä½œã€‚
:::

---

## 2. ğŸ”§ Dubbo Spring Boot Starterè¯¦è§£


### 2.1 ä»€ä¹ˆæ˜¯Starter


**ğŸ” æ·±å…¥ç†è§£**
> Starterå°±åƒæ‰‹æœºçš„"åº”ç”¨å•†åº—"ï¼Œä½ åªéœ€ç‚¹å‡»å®‰è£…ï¼Œæ‰€æœ‰ä¾èµ–çš„åº“ã€é…ç½®éƒ½è‡ªåŠ¨æå®šï¼Œä¸ç”¨è‡ªå·±ä¸€ä¸ªä¸ªä¸‹è½½ã€‚

**ğŸ“¦ Starterçš„ç»„æˆ**

```
dubbo-spring-boot-starter
â”œâ”€â”€ æ ¸å¿ƒä¾èµ–ï¼ˆè‡ªåŠ¨å¼•å…¥ï¼‰
â”‚   â”œâ”€â”€ dubbo-core
â”‚   â”œâ”€â”€ dubbo-registry-api
â”‚   â”œâ”€â”€ dubbo-config-api
â”‚   â””â”€â”€ dubbo-rpc-api
â”‚
â”œâ”€â”€ è‡ªåŠ¨é…ç½®ç±»
â”‚   â”œâ”€â”€ DubboAutoConfiguration
â”‚   â”œâ”€â”€ DubboRelaxedBindingAutoConfiguration
â”‚   â””â”€â”€ DubboMetricsAutoConfiguration
â”‚
â””â”€â”€ é…ç½®å±æ€§ç±»
    â”œâ”€â”€ DubboConfigurationProperties
    â””â”€â”€ å„ç§å­é…ç½®å±æ€§
```

### 2.2 Starterçš„å·¥ä½œæµç¨‹


```
åº”ç”¨å¯åŠ¨
    â†“
SpringBootæ‰«æclasspath
    â†“
å‘ç° spring.factories æ–‡ä»¶
    â†“
è¯»å–è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨
    â†“
æ‰§è¡Œè‡ªåŠ¨é…ç½®é€»è¾‘
    â†“
åˆ›å»ºDubboç›¸å…³Bean
    â†“
æ³¨å†Œåˆ°Springå®¹å™¨
    â†“
DubboæœåŠ¡å°±ç»ª âœ“
```

### 2.3 æ ¸å¿ƒä¾èµ–è¯´æ˜


**ğŸ“Š ä¾èµ–æ¸…å•**

| ä¾èµ–æ¨¡å— | ä½œç”¨è¯´æ˜ | æ˜¯å¦å¿…éœ€ |
|---------|---------|---------|
| `dubbo-spring-boot-autoconfigure` | è‡ªåŠ¨é…ç½®æ ¸å¿ƒ | âœ… å¿…éœ€ |
| `dubbo-spring-boot-actuator` | å¥åº·æ£€æŸ¥æ”¯æŒ | ğŸŸ¡ æ¨è |
| `dubbo-spring-boot-observability` | å¯è§‚æµ‹æ€§é›†æˆ | ğŸŸ¡ æ¨è |
| `dubbo-registry-zookeeper` | Zookeeperæ³¨å†Œä¸­å¿ƒ | ğŸ”µ æŒ‰éœ€ |
| `dubbo-registry-nacos` | Nacosæ³¨å†Œä¸­å¿ƒ | ğŸ”µ æŒ‰éœ€ |

::: warning âš ï¸ ç‰ˆæœ¬å…¼å®¹æ€§
SpringBoot 2.x ä½¿ç”¨ Dubbo 3.x
SpringBoot 3.x éœ€è¦ Dubbo 3.2+ ç‰ˆæœ¬
:::

### 2.4 è‡ªå®šä¹‰Starteré…ç½®


**ğŸ¯ å®è·µåœºæ™¯**
æœ‰æ—¶æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€äº›é»˜è®¤è¡Œä¸ºï¼Œæ¯”å¦‚ç»Ÿä¸€çš„è¶…æ—¶æ—¶é—´ã€é‡è¯•ç­–ç•¥ç­‰ã€‚

```java
@Configuration
public class CustomDubboConfig {
    
    @Bean
    public ProviderConfig providerConfig() {
        ProviderConfig config = new ProviderConfig();
        config.setTimeout(5000);      // ç»Ÿä¸€è¶…æ—¶5ç§’
        config.setRetries(2);          // ç»Ÿä¸€é‡è¯•2æ¬¡
        config.setLoadbalance("random"); // ç»Ÿä¸€è´Ÿè½½å‡è¡¡ç­–ç•¥
        return config;
    }
}
```

---

## 3. âš™ï¸ è‡ªåŠ¨è£…é…æœºåˆ¶æ·±å…¥


### 3.1 SpringBootè‡ªåŠ¨è£…é…åŸç†


**ğŸ” æ ¸å¿ƒæ¦‚å¿µ**
> è‡ªåŠ¨è£…é…å°±åƒæ™ºèƒ½æ’åº§ï¼Œä½ æ’ä¸Šç”µå™¨ï¼Œå®ƒä¼šè‡ªåŠ¨è¯†åˆ«æ˜¯æ‰‹æœºè¿˜æ˜¯ç”µè„‘ï¼Œæä¾›åˆé€‚çš„ç”µå‹å’Œç”µæµã€‚SpringBootä¹Ÿæ˜¯ä¸€æ ·ï¼Œå®ƒèƒ½è¯†åˆ«ä½ çš„éœ€æ±‚ï¼Œè‡ªåŠ¨é…ç½®åˆé€‚çš„ç»„ä»¶ã€‚

**ğŸ“‹ è£…é…æµç¨‹å›¾**

```
@EnableAutoConfiguration
         â†“
SpringFactoriesLoaderåŠ è½½é…ç½®
         â†“
è¯»å– META-INF/spring.factories
         â†“
è·å– EnableAutoConfiguration çš„å€¼
         â†“
è¿‡æ»¤å‡ºéœ€è¦çš„é…ç½®ç±»ï¼ˆ@Conditionalæ¡ä»¶åˆ¤æ–­ï¼‰
         â†“
å®ä¾‹åŒ–é…ç½®ç±»
         â†“
æ³¨å†ŒBeanåˆ°å®¹å™¨
```

### 3.2 Dubboçš„è‡ªåŠ¨é…ç½®ç±»


**ğŸ”¸ æ ¸å¿ƒè‡ªåŠ¨é…ç½®ç±»è§£æ**

```java
// Dubboä¸»é…ç½®è‡ªåŠ¨è£…é…
@Configuration
@ConditionalOnProperty(prefix = "dubbo", name = "enabled", 
                       matchIfMissing = true)
@EnableConfigurationProperties(DubboConfigurationProperties.class)
public class DubboAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public ServiceAnnotationPostProcessor serviceAnnotationBeanPostProcessor() {
        // æ‰«æå¹¶æ³¨å†Œ @DubboService æ ‡æ³¨çš„æœåŠ¡
        return new ServiceAnnotationPostProcessor();
    }
    
    @Bean
    @ConditionalOnMissingBean
    public ReferenceAnnotationBeanPostProcessor referenceAnnotationBeanPostProcessor() {
        // å¤„ç† @DubboReference æ³¨å…¥
        return new ReferenceAnnotationBeanPostProcessor();
    }
}
```

**ğŸ’¡ æ¡ä»¶æ³¨è§£è¯´æ˜**

| æ³¨è§£ | å«ä¹‰ | å®ä¾‹ |
|-----|------|-----|
| `@ConditionalOnClass` | ç±»è·¯å¾„å­˜åœ¨æŸä¸ªç±» | æ£€æµ‹æ˜¯å¦æœ‰Dubboæ ¸å¿ƒç±» |
| `@ConditionalOnProperty` | é…ç½®æ–‡ä»¶æœ‰æŸä¸ªå±æ€§ | æ£€æµ‹dubbo.enabled=true |
| `@ConditionalOnMissingBean` | å®¹å™¨ä¸­ä¸å­˜åœ¨æŸä¸ªBean | å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è¦†ç›– |
| `@ConditionalOnBean` | å®¹å™¨ä¸­å­˜åœ¨æŸä¸ªBean | ä¾èµ–å…¶ä»–Beanå­˜åœ¨ |

### 3.3 é…ç½®åŠ è½½ä¼˜å…ˆçº§


```
é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
1ï¸âƒ£ å‘½ä»¤è¡Œå‚æ•°
   java -jar app.jar --dubbo.registry.address=xxx
   
2ï¸âƒ£ ç³»ç»Ÿç¯å¢ƒå˜é‡
   export DUBBO_REGISTRY_ADDRESS=xxx
   
3ï¸âƒ£ application.properties/yml
   dubbo.registry.address=xxx
   
4ï¸âƒ£ é»˜è®¤é…ç½®ï¼ˆStarterå†…ç½®ï¼‰
   DubboConfigurationPropertiesçš„é»˜è®¤å€¼
```

::: tip ğŸ’¡ æœ€ä½³å®è·µ
å¼€å‘ç¯å¢ƒç”¨é…ç½®æ–‡ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®ä¸­å¿ƒï¼Œè¿™æ ·æ›´çµæ´»å®‰å…¨ï¼
:::

### 3.4 æ‰‹åŠ¨æ§åˆ¶è£…é…


**ğŸ› ï¸ æ’é™¤è‡ªåŠ¨é…ç½®**

```java
@SpringBootApplication(exclude = {
    DubboMetricsAutoConfiguration.class  // ä¸éœ€è¦æŒ‡æ ‡æ”¶é›†
})
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

**ğŸ”§ å»¶è¿Ÿè£…é…**

```yaml
dubbo:
  application:
    name: my-app
  config-center:
    address: zookeeper://localhost:2181
  # å»¶è¿Ÿåˆ°é…ç½®ä¸­å¿ƒåŠ è½½å®Œæˆåå†å¯åŠ¨
  delay: -1  
```

---

## 4. ğŸ“ æ³¨è§£é©±åŠ¨å¼€å‘å®è·µ


### 4.1 æ ¸å¿ƒæ³¨è§£å…¨è§ˆ


**ğŸ”¸ å¯ç”¨Dubboæ³¨è§£**

```java
@EnableDubbo(
    scanBasePackages = "com.example.service"  // æŒ‡å®šæ‰«æåŒ…è·¯å¾„
)
@SpringBootApplication
public class Application {
    // ...
}
```

**ç­‰ä»·äºä¼ ç»ŸXMLé…ç½®ï¼š**
```xml
<dubbo:annotation package="com.example.service"/>
```

### 4.2 æœåŠ¡æä¾›è€…æ³¨è§£


**ğŸš€ @DubboServiceè¯¦è§£**

```java
@DubboService(
    version = "1.0.0",           // æœåŠ¡ç‰ˆæœ¬
    group = "default",           // æœåŠ¡åˆ†ç»„
    timeout = 3000,              // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    retries = 2,                 // é‡è¯•æ¬¡æ•°
    loadbalance = "random",      // è´Ÿè½½å‡è¡¡ç­–ç•¥
    async = false,               // æ˜¯å¦å¼‚æ­¥è°ƒç”¨
    actives = 10,                // æœ€å¤§å¹¶å‘è°ƒç”¨æ•°
    executes = 10,               // æœåŠ¡ç«¯æœ€å¤§å¹¶å‘æ‰§è¡Œ
    validation = "true"          // å¼€å¯å‚æ•°éªŒè¯
)
public class UserServiceImpl implements UserService {
    
    @Override
    public User getUserById(Long id) {
        // ä¸šåŠ¡é€»è¾‘
        return userRepository.findById(id);
    }
}
```

**ğŸ“Š å¸¸ç”¨å±æ€§é€ŸæŸ¥è¡¨**

| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ | ä½¿ç”¨å»ºè®® |
|-----|------|--------|---------|
| `version` | ç‰ˆæœ¬å· | 1.0.0 | ğŸ”¥ å¿…è®¾ç½®ï¼Œæ–¹ä¾¿ç°åº¦å‘å¸ƒ |
| `timeout` | è¶…æ—¶æ—¶é—´ | 1000ms | â­ æ ¹æ®ä¸šåŠ¡è°ƒæ•´ |
| `retries` | é‡è¯•æ¬¡æ•° | 2 | âš ï¸ éå¹‚ç­‰æ¥å£è®¾ä¸º0 |
| `loadbalance` | è´Ÿè½½ç­–ç•¥ | random | ğŸ¯ æŒ‰éœ€é€‰æ‹© |
| `mock` | é™çº§ç­–ç•¥ | æ—  | ğŸ’¡ é‡è¦æ¥å£å»ºè®®é…ç½® |

### 4.3 æœåŠ¡æ¶ˆè´¹è€…æ³¨è§£


**ğŸ” @DubboReferenceè¯¦è§£**

```java
@RestController
public class UserController {
    
    @DubboReference(
        version = "1.0.0",       // åŒ¹é…æœåŠ¡ç‰ˆæœ¬
        check = false,           // å¯åŠ¨æ—¶ä¸æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯ç”¨
        timeout = 5000,          // è°ƒç”¨è¶…æ—¶
        retries = 1,             // é‡è¯•æ¬¡æ•°
        mock = "force:return null"  // å¼ºåˆ¶é™çº§è¿”å›null
    )
    private UserService userService;
    
    @GetMapping("/user/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.getUserById(id);
    }
}
```

**ğŸ’¡ checkå±æ€§è¯¦è§£**

```
check=trueï¼ˆé»˜è®¤ï¼‰ï¼š
å¯åŠ¨æ—¶æ£€æŸ¥æœåŠ¡æä¾›è€…æ˜¯å¦å­˜åœ¨
â”œâ”€â”€ ä¼˜ç‚¹ï¼šåŠæ—©å‘ç°é…ç½®é”™è¯¯
â””â”€â”€ ç¼ºç‚¹ï¼šå¼€å‘ç¯å¢ƒå¯èƒ½å½±å“å¯åŠ¨

check=falseï¼š
å¯åŠ¨æ—¶ä¸æ£€æŸ¥ï¼Œè°ƒç”¨æ—¶å†æ£€æŸ¥
â”œâ”€â”€ ä¼˜ç‚¹ï¼šå¼€å‘ç¯å¢ƒæ›´çµæ´»
â””â”€â”€ ç¼ºç‚¹ï¼šå¯èƒ½è¿è¡Œæ—¶æ‰å‘ç°é—®é¢˜

ğŸ¯ å»ºè®®ï¼šå¼€å‘ç¯å¢ƒfalseï¼Œç”Ÿäº§ç¯å¢ƒtrue
```

### 4.4 å¤šç‰ˆæœ¬æœåŠ¡è°ƒç”¨


**ğŸ”„ åœºæ™¯ï¼šæ–°è€ç‰ˆæœ¬å…±å­˜**

```java
// è€ç‰ˆæœ¬æœåŠ¡
@DubboService(version = "1.0.0")
public class UserServiceV1 implements UserService {
    // è€é€»è¾‘
}

// æ–°ç‰ˆæœ¬æœåŠ¡
@DubboService(version = "2.0.0")
public class UserServiceV2 implements UserService {
    // æ–°é€»è¾‘ï¼Œæ€§èƒ½æ›´å¥½
}

// æ¶ˆè´¹è€…å¯ä»¥é€‰æ‹©ç‰ˆæœ¬
@DubboReference(version = "2.0.0")  // è°ƒç”¨æ–°ç‰ˆæœ¬
private UserService userService;

@DubboReference(version = "*")  // éšæœºè°ƒç”¨ä»»æ„ç‰ˆæœ¬
private UserService userServiceAny;
```

::: warning âš ï¸ ç‰ˆæœ¬ç®¡ç†æ³¨æ„
- ç‰ˆæœ¬å·è¦è¯­ä¹‰åŒ–ï¼šä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·
- ä¸å…¼å®¹çš„æ¥å£å˜æ›´å¿…é¡»å‡çº§ä¸»ç‰ˆæœ¬
- ç°åº¦å‘å¸ƒæ—¶å¯ä»¥å¤šç‰ˆæœ¬å…±å­˜
:::

### 4.5 æœåŠ¡åˆ†ç»„å®æˆ˜


**ğŸ¢ åœºæ™¯ï¼šå¤šç§Ÿæˆ·ç³»ç»Ÿ**

```java
// ç§Ÿæˆ·Açš„æœåŠ¡
@DubboService(group = "tenantA")
public class TenantAPayService implements PayService {
    // ç§Ÿæˆ·Açš„æ”¯ä»˜é€»è¾‘
}

// ç§Ÿæˆ·Bçš„æœåŠ¡
@DubboService(group = "tenantB")
public class TenantBPayService implements PayService {
    // ç§Ÿæˆ·Bçš„æ”¯ä»˜é€»è¾‘
}

// æ ¹æ®ä¸Šä¸‹æ–‡é€‰æ‹©ç§Ÿæˆ·
@Component
public class PaymentClient {
    
    @DubboReference(group = "${current.tenant.group}")
    private PayService payService;
    
    public void pay(Order order) {
        payService.processPay(order);
    }
}
```

---

## 5. ğŸ“‹ é…ç½®å±æ€§ç»‘å®š


### 5.1 é…ç½®æ–‡ä»¶ç»“æ„


**ğŸ—‚ï¸ YAMLé…ç½®å®Œæ•´ç¤ºä¾‹**

```yaml
dubbo:
  # åº”ç”¨é…ç½®
  application:
    name: dubbo-demo-provider      # åº”ç”¨åç§°
    version: 1.0.0                 # åº”ç”¨ç‰ˆæœ¬
    owner: dev-team                # è´Ÿè´£äºº
    organization: my-company       # ç»„ç»‡å
    logger: slf4j                  # æ—¥å¿—æ¡†æ¶
    
  # æ³¨å†Œä¸­å¿ƒé…ç½®
  registry:
    address: zookeeper://localhost:2181
    timeout: 5000                  # è¿æ¥è¶…æ—¶
    session: 60000                 # ä¼šè¯è¶…æ—¶
    check: true                    # å¯åŠ¨æ£€æŸ¥
    
  # åè®®é…ç½®
  protocol:
    name: dubbo                    # åè®®åç§°
    port: 20880                    # ç«¯å£
    host: 192.168.1.100           # ä¸»æœºIP
    threads: 200                   # å›ºå®šçº¿ç¨‹æ± å¤§å°
    iothreads: 4                   # IOçº¿ç¨‹æ± å¤§å°
    
  # æœåŠ¡æä¾›è€…é»˜è®¤é…ç½®
  provider:
    timeout: 3000                  # é»˜è®¤è¶…æ—¶
    retries: 2                     # é»˜è®¤é‡è¯•æ¬¡æ•°
    loadbalance: random            # è´Ÿè½½å‡è¡¡
    
  # æœåŠ¡æ¶ˆè´¹è€…é»˜è®¤é…ç½®
  consumer:
    timeout: 5000                  # é»˜è®¤è¶…æ—¶
    check: false                   # å¯åŠ¨æ—¶æ£€æŸ¥
    retries: 1                     # é»˜è®¤é‡è¯•æ¬¡æ•°
```

**ğŸŒ³ é…ç½®å±‚çº§ç»“æ„**

```
dubboé…ç½®
â”œâ”€â”€ applicationï¼ˆåº”ç”¨çº§é…ç½®ï¼‰
â”œâ”€â”€ registryï¼ˆæ³¨å†Œä¸­å¿ƒé…ç½®ï¼‰
â”‚   â”œâ”€â”€ addressï¼ˆæ³¨å†Œä¸­å¿ƒåœ°å€ï¼‰
â”‚   â””â”€â”€ protocolï¼ˆæ³¨å†Œåè®®ï¼‰
â”œâ”€â”€ protocolï¼ˆåè®®é…ç½®ï¼‰
â”‚   â”œâ”€â”€ nameï¼ˆåè®®åï¼‰
â”‚   â””â”€â”€ portï¼ˆç«¯å£ï¼‰
â”œâ”€â”€ providerï¼ˆæä¾›è€…é»˜è®¤é…ç½®ï¼‰
â”œâ”€â”€ consumerï¼ˆæ¶ˆè´¹è€…é»˜è®¤é…ç½®ï¼‰
â””â”€â”€ monitorï¼ˆç›‘æ§ä¸­å¿ƒé…ç½®ï¼‰
```

### 5.2 é…ç½®ä¼˜å…ˆçº§è§„åˆ™


**ğŸ“Š ä¼˜å…ˆçº§ä»é«˜åˆ°ä½**

```
æ–¹æ³•çº§é…ç½® > æ¥å£çº§é…ç½® > å…¨å±€é…ç½®

å…·ä½“ç¤ºä¾‹ï¼š
@DubboReference(timeout = 3000)  // æ¥å£çº§ï¼Œä¼˜å…ˆçº§é«˜
private UserService userService;

dubbo.consumer.timeout=5000      // å…¨å±€çº§ï¼Œä¼˜å…ˆçº§ä½

å®é™…ç”Ÿæ•ˆï¼š3000æ¯«ç§’ âœ“
```

**ğŸ¯ é…ç½®è¦†ç›–è§„åˆ™**

```
æ¶ˆè´¹æ–¹é…ç½® > æä¾›æ–¹é…ç½®

åŸå› ï¼šæ¶ˆè´¹æ–¹æ›´äº†è§£è‡ªå·±çš„éœ€æ±‚
ä¾‹å¦‚ï¼š
- æä¾›æ–¹è¶…æ—¶ 5000ms
- æ¶ˆè´¹æ–¹è¶…æ—¶ 3000ms
- å®é™…ç”Ÿæ•ˆï¼š3000ms âœ“
```

### 5.3 å¤–éƒ¨åŒ–é…ç½®


**â˜ï¸ é…ç½®ä¸­å¿ƒé›†æˆ**

```yaml
dubbo:
  config-center:
    address: nacos://localhost:8848
    namespace: dev                 # å‘½åç©ºé—´
    group: DEFAULT_GROUP           # é…ç½®åˆ†ç»„
    timeout: 3000                  # è·å–é…ç½®è¶…æ—¶
    
  # æœ¬åœ°é…ç½®ä½œä¸ºé»˜è®¤å€¼
  application:
    name: my-app
```

**ğŸ”„ é…ç½®ä¼˜å…ˆçº§ï¼ˆåŠ å…¥é…ç½®ä¸­å¿ƒåï¼‰**

```
é…ç½®ä¸­å¿ƒ > æœ¬åœ°é…ç½® > é»˜è®¤é…ç½®

åŠ¨æ€é…ç½®æµç¨‹ï¼š
1ï¸âƒ£ å¯åŠ¨æ—¶ä»é…ç½®ä¸­å¿ƒæ‹‰å–é…ç½®
2ï¸âƒ£ æœ¬åœ°é…ç½®ä½œä¸ºé»˜è®¤å€¼
3ï¸âƒ£ é…ç½®ä¸­å¿ƒé…ç½®è¦†ç›–æœ¬åœ°é…ç½®
4ï¸âƒ£ ç›‘å¬é…ç½®ä¸­å¿ƒå˜æ›´
5ï¸âƒ£ é…ç½®å˜æ›´æ—¶åŠ¨æ€æ›´æ–°
```

### 5.4 é…ç½®ç»‘å®šåŸç†


**ğŸ”§ @ConfigurationPropertiesåŸç†**

```java
@ConfigurationProperties(prefix = "dubbo")
public class DubboConfigurationProperties {
    
    private Application application = new Application();
    private Registry registry = new Registry();
    private Protocol protocol = new Protocol();
    
    // å†…éƒ¨ç±»
    public static class Application {
        private String name;
        private String version;
        // getters/setters
    }
    
    public static class Registry {
        private String address;
        private Integer timeout;
        // getters/setters
    }
}
```

**ğŸ’¡ å·¥ä½œæµç¨‹**

```
YAMLé…ç½®æ–‡ä»¶
    â†“
SpringBootè§£æé…ç½®
    â†“
æ ¹æ®prefixåŒ¹é…é…ç½®ç±»
    â†“
é€šè¿‡åå°„è®¾ç½®å±æ€§å€¼
    â†“
æ³¨å†Œä¸ºSpring Bean
    â†“
Dubboç»„ä»¶æ³¨å…¥ä½¿ç”¨
```

### 5.5 é…ç½®éªŒè¯


**âœ… å‚æ•°æ ¡éªŒ**

```java
@DubboService(validation = "true")
public class UserServiceImpl implements UserService {
    
    @Override
    public void updateUser(@Valid User user) {
        // userå‚æ•°ä¼šè‡ªåŠ¨æ ¡éªŒ
        // å¦‚æœä¸ç¬¦åˆ@Validè§„åˆ™ï¼ŒæŠ›å‡ºå¼‚å¸¸
    }
}

// Userå®ä½“ç±»
public class User {
    @NotNull(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©º")
    private Long id;
    
    @Size(min = 2, max = 20, message = "ç”¨æˆ·åé•¿åº¦2-20")
    private String name;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
}
```

::: tip ğŸ’¡ éªŒè¯çš„å¥½å¤„
- æå‰å‘ç°å‚æ•°é”™è¯¯
- å‡å°‘æ— æ•ˆçš„è¿œç¨‹è°ƒç”¨
- ç»Ÿä¸€å‚æ•°æ ¡éªŒé€»è¾‘
:::

---

## 6. ğŸ¥ å¥åº·æ£€æŸ¥ä¸ç›‘æ§é›†æˆ


### 6.1 Actuatorå¥åº·æ£€æŸ¥


**ğŸ” ä»€ä¹ˆæ˜¯å¥åº·æ£€æŸ¥**
> å°±åƒå®šæœŸä½“æ£€ï¼Œæ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œèƒ½å¦å¯¹å¤–æä¾›æœåŠ¡ã€‚

**ğŸ“¦ æ·»åŠ ä¾èµ–**

```xml
<dependency>
    <groupId>org.apache.dubbo</groupId>
    <artifactId>dubbo-spring-boot-actuator</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

**âš™ï¸ é…ç½®ç«¯ç‚¹**

```yaml
management:
  endpoints:
    web:
      exposure:
        include: '*'           # æš´éœ²æ‰€æœ‰ç«¯ç‚¹
  endpoint:
    health:
      show-details: always     # æ˜¾ç¤ºè¯¦ç»†å¥åº·ä¿¡æ¯
      
dubbo:
  application:
    name: demo-provider
```

**ğŸ” å¥åº·æ£€æŸ¥ç«¯ç‚¹**

```
è®¿é—®ï¼šhttp://localhost:8080/actuator/health

è¿”å›ç¤ºä¾‹ï¼š
{
  "status": "UP",
  "components": {
    "dubbo": {
      "status": "UP",
      "details": {
        "registry": {
          "status": "UP",
          "address": "zookeeper://localhost:2181"
        },
        "provider": {
          "status": "UP",
          "services": ["com.example.UserService"]
        }
      }
    }
  }
}
```

### 6.2 DubboæŒ‡æ ‡ç›‘æ§


**ğŸ“Š æŒ‡æ ‡ç«¯ç‚¹**

```
è®¿é—®ï¼šhttp://localhost:8080/actuator/dubbo

è¿”å›æœåŠ¡å…ƒæ•°æ®ï¼š
{
  "providers": [
    {
      "interface": "com.example.UserService",
      "version": "1.0.0",
      "methods": ["getUserById", "updateUser"],
      "registries": ["zookeeper://localhost:2181"]
    }
  ],
  "consumers": [
    {
      "interface": "com.example.OrderService",
      "version": "1.0.0"
    }
  ]
}
```

**ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡**

```
è®¿é—®ï¼šhttp://localhost:8080/actuator/metrics

å¯ç”¨æŒ‡æ ‡ï¼š
â”œâ”€â”€ dubbo.provider.requests.total    # æä¾›è€…æ€»è¯·æ±‚æ•°
â”œâ”€â”€ dubbo.provider.requests.failed   # æä¾›è€…å¤±è´¥è¯·æ±‚æ•°
â”œâ”€â”€ dubbo.consumer.requests.total    # æ¶ˆè´¹è€…æ€»è¯·æ±‚æ•°
â”œâ”€â”€ dubbo.consumer.requests.timeout  # æ¶ˆè´¹è€…è¶…æ—¶è¯·æ±‚æ•°
â””â”€â”€ dubbo.thread.pool.active         # æ´»è·ƒçº¿ç¨‹æ•°
```

### 6.3 è‡ªå®šä¹‰å¥åº·æŒ‡æ ‡


**ğŸ› ï¸ æ‰©å±•å¥åº·æ£€æŸ¥**

```java
@Component
public class DubboServiceHealthIndicator implements HealthIndicator {
    
    @DubboReference(check = false)
    private UserService userService;
    
    @Override
    public Health health() {
        try {
            // è°ƒç”¨è¿œç¨‹æœåŠ¡æµ‹è¯•è¿é€šæ€§
            userService.ping();
            return Health.up()
                .withDetail("service", "UserService")
                .withDetail("status", "available")
                .build();
        } catch (Exception e) {
            return Health.down()
                .withDetail("service", "UserService")
                .withDetail("error", e.getMessage())
                .build();
        }
    }
}
```

### 6.4 Prometheusé›†æˆ


**ğŸ“Š æš´éœ²PrometheusæŒ‡æ ‡**

```yaml
management:
  endpoints:
    web:
      exposure:
        include: prometheus
  metrics:
    export:
      prometheus:
        enabled: true

dubbo:
  metrics:
    prometheus:
      exporter:
        enabled: true
        port: 9090         # PrometheusæŠ“å–ç«¯å£
```

**ğŸ“ˆ Grafanaç›‘æ§é¢æ¿**

```
æ ¸å¿ƒç›‘æ§æŒ‡æ ‡ï¼š
â”œâ”€â”€ QPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰
â”œâ”€â”€ RTï¼ˆå“åº”æ—¶é—´ï¼‰
â”œâ”€â”€ æˆåŠŸç‡
â”œâ”€â”€ é”™è¯¯ç‡
â””â”€â”€ çº¿ç¨‹æ± çŠ¶æ€
```

::: tip ğŸ’¡ ç›‘æ§æœ€ä½³å®è·µ
- è®¾ç½®åˆç†çš„å‘Šè­¦é˜ˆå€¼
- å…³æ³¨æ ¸å¿ƒä¸šåŠ¡æ¥å£çš„æŒ‡æ ‡
- å®šæœŸæŸ¥çœ‹ç›‘æ§è¶‹åŠ¿
- ç»“åˆæ—¥å¿—è¿›è¡Œé—®é¢˜æ’æŸ¥
:::

---

## 7. ğŸŒ å¤šç¯å¢ƒé…ç½®ç®¡ç†


### 7.1 Profileé…ç½®


**ğŸ”§ ç¯å¢ƒéš”ç¦»ç­–ç•¥**

```
é¡¹ç›®ç»“æ„ï¼š
src/main/resources/
â”œâ”€â”€ application.yml              # å…¬å…±é…ç½®
â”œâ”€â”€ application-dev.yml          # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ application-test.yml         # æµ‹è¯•ç¯å¢ƒ
â””â”€â”€ application-prod.yml         # ç”Ÿäº§ç¯å¢ƒ
```

**ğŸ“ å…¬å…±é…ç½®ï¼ˆapplication.ymlï¼‰**

```yaml
spring:
  application:
    name: dubbo-demo
  profiles:
    active: @profileActive@     # Mavenå ä½ç¬¦

dubbo:
  application:
    name: ${spring.application.name}
  scan:
    base-packages: com.example.service
```

**ğŸ”§ å¼€å‘ç¯å¢ƒï¼ˆapplication-dev.ymlï¼‰**

```yaml
dubbo:
  registry:
    address: zookeeper://localhost:2181
  protocol:
    port: 20880
  consumer:
    check: false               # å¼€å‘ç¯å¢ƒä¸æ£€æŸ¥æœåŠ¡
    
logging:
  level:
    com.example: debug         # å¼€å‘ç¯å¢ƒè¯¦ç»†æ—¥å¿—
```

**ğŸ­ ç”Ÿäº§ç¯å¢ƒï¼ˆapplication-prod.ymlï¼‰**

```yaml
dubbo:
  registry:
    address: zookeeper://prod-zk1:2181,prod-zk2:2181
  protocol:
    port: 20880
    threads: 500               # ç”Ÿäº§ç¯å¢ƒæ›´å¤šçº¿ç¨‹
  consumer:
    check: true                # ç”Ÿäº§ç¯å¢ƒå¿…é¡»æ£€æŸ¥
    timeout: 3000
    
logging:
  level:
    com.example: info          # ç”Ÿäº§ç¯å¢ƒç®€åŒ–æ—¥å¿—
```

### 7.2 Maven Profileè”åŠ¨


**ğŸ”¨ pom.xmlé…ç½®**

```xml
<profiles>
    <!-- å¼€å‘ç¯å¢ƒ -->
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <profileActive>dev</profileActive>
        </properties>
    </profile>
    
    <!-- ç”Ÿäº§ç¯å¢ƒ -->
    <profile>
        <id>prod</id>
        <properties>
            <profileActive>prod</profileActive>
        </properties>
    </profile>
</profiles>
```

**ğŸš€ æ‰“åŒ…å‘½ä»¤**

```bash
# æ‰“åŒ…å¼€å‘ç¯å¢ƒ
mvn clean package -Pdev

# æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒ
mvn clean package -Pprod
```

### 7.3 é…ç½®ä¸­å¿ƒåŠ¨æ€é…ç½®


**â˜ï¸ Nacosé…ç½®ä¸­å¿ƒ**

```yaml
# bootstrap.ymlï¼ˆä¼˜å…ˆåŠ è½½ï¼‰
spring:
  application:
    name: dubbo-demo
  cloud:
    nacos:
      config:
        server-addr: localhost:8848
        namespace: dev              # ç¯å¢ƒéš”ç¦»
        group: DEFAULT_GROUP
        file-extension: yml
        
dubbo:
  config-center:
    address: nacos://localhost:8848
    namespace: ${spring.cloud.nacos.config.namespace}
```

**ğŸ”„ åŠ¨æ€é…ç½®ç¤ºä¾‹**

```yaml
# Nacosé…ç½®ä¸­å¿ƒä¸­çš„é…ç½®ï¼ˆå¯åŠ¨æ€ä¿®æ”¹ï¼‰
dubbo:
  provider:
    timeout: 5000          # å¯åœ¨è¿è¡Œæ—¶ä¿®æ”¹
    retries: 2
  consumer:
    timeout: 3000
    
# ä¿®æ”¹åè‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯ï¼
```

### 7.4 æ•æ„Ÿä¿¡æ¯åŠ å¯†


**ğŸ” JasyptåŠ å¯†**

```xml
<dependency>
    <groupId>com.github.ulisesbocchio</groupId>
    <artifactId>jasypt-spring-boot-starter</artifactId>
</dependency>
```

**é…ç½®åŠ å¯†**

```yaml
jasypt:
  encryptor:
    password: ${JASYPT_PASSWORD}  # ä»ç¯å¢ƒå˜é‡è¯»å–å¯†é’¥
    
dubbo:
  registry:
    # åŠ å¯†åçš„å¯†ç 
    username: ENC(encrypted_username)
    password: ENC(encrypted_password)
```

**ğŸ›¡ï¸ åŠ å¯†å·¥å…·**

```java
// åŠ å¯†æ˜æ–‡
java -cp jasypt.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI \
  input="my_password" password="encryption_key" algorithm=PBEWithMD5AndDES

// è¾“å‡ºï¼šencrypted_password
```

---

## 8. ğŸ”¥ çƒ­éƒ¨ç½²ä¸å¼€å‘ä¼˜åŒ–


### 8.1 Spring DevToolsçƒ­éƒ¨ç½²


**âš¡ å¿«é€Ÿé…ç½®**

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <optional>true</optional>
</dependency>
```

**âš™ï¸ IDEAé…ç½®**

```
1. Settings â†’ Build â†’ Compiler
   âœ… Build project automatically

2. Settings â†’ Advanced Settings
   âœ… Allow auto-make to start

3. ä¿®æ”¹ä»£ç åï¼ŒCtrl+F9 é‡æ–°ç¼–è¯‘
   æˆ–è€… Ctrl+Shift+F9 ç¼–è¯‘å½“å‰æ–‡ä»¶
```

::: warning âš ï¸ çƒ­éƒ¨ç½²å±€é™æ€§
- åªèƒ½çƒ­æ›´æ–°ä¸šåŠ¡ä»£ç 
- é…ç½®æ–‡ä»¶ä¿®æ”¹éœ€è¦é‡å¯
- DubboæœåŠ¡æ³¨å†Œä¿¡æ¯å¯èƒ½ä¸ä¼šæ›´æ–°
:::

### 8.2 Dubboå¼€å‘ä¼˜åŒ–é…ç½®


**ğŸš€ å¼€å‘ç¯å¢ƒæœ€ä½³é…ç½®**

```yaml
dubbo:
  application:
    qos-enable: true              # å¼€å¯QoSæœåŠ¡
    qos-port: 22222               # QoSç«¯å£
  
  consumer:
    check: false                  # ä¸æ£€æŸ¥æœåŠ¡æä¾›è€…
    lazy: true                    # å»¶è¿Ÿåˆå§‹åŒ–
    
  provider:
    delay: -1                     # å»¶è¿Ÿæš´éœ²æœåŠ¡
    
  registry:
    simplified: true              # ç®€åŒ–æ³¨å†Œä¿¡æ¯
    
logging:
  level:
    org.apache.dubbo: debug       # è°ƒè¯•æ—¥å¿—
```

**ğŸ“Š QoSå‘½ä»¤è¡Œå·¥å…·**

```bash
# è¿æ¥QoS
telnet localhost 22222

# æŸ¥çœ‹æœåŠ¡åˆ—è¡¨
ls

# æŸ¥çœ‹æœåŠ¡è¯¦æƒ…
ls -l com.example.UserService

# ä¸‹çº¿æœåŠ¡
offline com.example.UserService

# ä¸Šçº¿æœåŠ¡
online com.example.UserService
```

### 8.3 Mockè°ƒè¯•


**ğŸ§ª æœ¬åœ°MockæœåŠ¡**

```java
@DubboReference(
    version = "1.0.0",
    mock = "com.example.mock.MockUserService"  // æŒ‡å®šMockç±»
)
private UserService userService;

// Mockå®ç°
public class MockUserService implements UserService {
    @Override
    public User getUserById(Long id) {
        // è¿”å›æµ‹è¯•æ•°æ®
        User user = new User();
        user.setId(id);
        user.setName("Mock User");
        return user;
    }
}
```

**ğŸ”§ æ¡ä»¶Mock**

```yaml
dubbo:
  consumer:
    # æœåŠ¡é™çº§ç­–ç•¥
    mock: "force:return null"     # å¼ºåˆ¶è¿”å›null
    # mock: "fail:return null"    # å¤±è´¥æ—¶è¿”å›null
    # mock: "force:throw"          # å¼ºåˆ¶æŠ›å¼‚å¸¸
```

### 8.4 å•å…ƒæµ‹è¯•ä¼˜åŒ–


**ğŸ§ª æµ‹è¯•é…ç½®**

```java
@SpringBootTest
@DubboComponentScan("com.example.service")
class UserServiceTest {
    
    @DubboReference(check = false)  // æµ‹è¯•ç¯å¢ƒä¸æ£€æŸ¥
    private UserService userService;
    
    @Test
    void testGetUser() {
        User user = userService.getUserById(1L);
        assertNotNull(user);
    }
}
```

**ğŸ¯ Mockå¤–éƒ¨ä¾èµ–**

```java
@TestConfiguration
static class TestConfig {
    
    @Bean
    @Primary  // è¦†ç›–åŸæœ‰Bean
    public UserService mockUserService() {
        return Mockito.mock(UserService.class);
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SpringBooté›†æˆä»·å€¼ï¼šé›¶é…ç½®ã€è‡ªåŠ¨è£…é…ã€å¼€ç®±å³ç”¨
ğŸ”¸ Starteræœºåˆ¶ï¼šä¾èµ–ç®¡ç†ã€è‡ªåŠ¨é…ç½®ã€æ¡ä»¶è£…é…
ğŸ”¸ æ³¨è§£é©±åŠ¨ï¼š@EnableDubboã€@DubboServiceã€@DubboReference
ğŸ”¸ é…ç½®ç»‘å®šï¼šä¼˜å…ˆçº§è§„åˆ™ã€å¤–éƒ¨åŒ–é…ç½®ã€åŠ¨æ€åˆ·æ–°
ğŸ”¸ å¥åº·ç›‘æ§ï¼šActuatorç«¯ç‚¹ã€æŒ‡æ ‡æ”¶é›†ã€Prometheusé›†æˆ
ğŸ”¸ å¤šç¯å¢ƒç®¡ç†ï¼šProfileé…ç½®ã€é…ç½®ä¸­å¿ƒã€æ•æ„Ÿä¿¡æ¯åŠ å¯†
ğŸ”¸ å¼€å‘ä¼˜åŒ–ï¼šçƒ­éƒ¨ç½²ã€Mockè°ƒè¯•ã€å•å…ƒæµ‹è¯•
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ è‡ªåŠ¨è£…é…çš„é­”æ³•**
```
åŸç†æ ¸å¿ƒï¼š
- SpringFactoriesLoaderæ‰«æé…ç½®
- @Conditionalæ¡ä»¶æ³¨è§£æ§åˆ¶
- é…ç½®å±æ€§è‡ªåŠ¨ç»‘å®š
- BeanæŒ‰éœ€åˆ›å»ºæ³¨å†Œ

è®°å¿†è¦ç‚¹ï¼š
è‡ªåŠ¨è£…é… = å‘ç° + åˆ¤æ–­ + åˆ›å»º + æ³¨å†Œ
```

**ğŸ”¹ é…ç½®ä¼˜å…ˆçº§è§„åˆ™**
```
è®°å¿†å£è¯€ï¼š
æ–¹æ³•èƒœæ¥å£ï¼Œæ¥å£èƒœå…¨å±€
æ¶ˆè´¹èƒœæä¾›ï¼Œä¸­å¿ƒèƒœæœ¬åœ°
å‘½ä»¤æœ€ä¼˜å…ˆï¼Œé»˜è®¤æœ€æœ«ä½

å®æˆ˜åº”ç”¨ï¼š
- å¼€å‘ç¯å¢ƒç”¨æœ¬åœ°é…ç½®
- ç”Ÿäº§ç¯å¢ƒç”¨é…ç½®ä¸­å¿ƒ
- ç´§æ€¥è°ƒæ•´ç”¨å‘½ä»¤è¡Œå‚æ•°
```

**ğŸ”¹ æ³¨è§£çš„é€‰æ‹©ç­–ç•¥**
```
@EnableDubboï¼š
- å¯ç”¨DubboåŠŸèƒ½çš„æ€»å¼€å…³
- é…ç½®æ‰«æåŒ…è·¯å¾„

@DubboServiceï¼š
- æš´éœ²æœåŠ¡çš„æ ¸å¿ƒæ³¨è§£
- é…ç½®æœåŠ¡çº§å‚æ•°

@DubboReferenceï¼š
- æ³¨å…¥è¿œç¨‹æœåŠ¡
- é…ç½®è°ƒç”¨çº§å‚æ•°

ä¸‰è€…é…åˆï¼Œç¼ºä¸€ä¸å¯ï¼
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¼ä¸šå¼€å‘åœºæ™¯**
- **å¿«é€Ÿæ­å»º**ï¼š10åˆ†é’Ÿæ­å»ºå¾®æœåŠ¡æ¡†æ¶
- **ç¯å¢ƒéš”ç¦»**ï¼šä¸€å¥—ä»£ç å¤šç¯å¢ƒéƒ¨ç½²
- **çµæ´»é…ç½®**ï¼šæ”¯æŒåŠ¨æ€è°ƒæ•´æ— éœ€é‡å¯
- **ç›‘æ§å®Œå–„**ï¼šå¼€ç®±å³ç”¨çš„å¥åº·æ£€æŸ¥å’ŒæŒ‡æ ‡æ”¶é›†

**ğŸ”§ è¿ç»´å®è·µ**
- **é…ç½®ç®¡ç†**ï¼šé›†ä¸­å¼é…ç½®ä¸­å¿ƒç®¡ç†
- **ç°åº¦å‘å¸ƒ**ï¼šç‰ˆæœ¬æ§åˆ¶å®ç°å¹³æ»‘å‡çº§
- **æ•…éšœæ’æŸ¥**ï¼šQoSå‘½ä»¤è¡Œå¿«é€Ÿå®šä½é—®é¢˜
- **æ€§èƒ½è°ƒä¼˜**ï¼šåŸºäºæŒ‡æ ‡æ•°æ®ä¼˜åŒ–å‚æ•°

**ğŸ“ å­¦ä¹ è·¯å¾„**
```
åˆçº§ï¼ˆå¿…ä¼šï¼‰ï¼š
â”œâ”€â”€ ç†è§£SpringBooté›†æˆä»·å€¼
â”œâ”€â”€ æŒæ¡åŸºç¡€æ³¨è§£ä½¿ç”¨
â””â”€â”€ ç†Ÿæ‚‰é…ç½®æ–‡ä»¶ç¼–å†™

ä¸­çº§ï¼ˆè¿›é˜¶ï¼‰ï¼š
â”œâ”€â”€ ç†è§£è‡ªåŠ¨è£…é…åŸç†
â”œâ”€â”€ æŒæ¡å¤šç¯å¢ƒé…ç½®ç®¡ç†
â””â”€â”€ ç†Ÿæ‚‰ç›‘æ§æŒ‡æ ‡å«ä¹‰

é«˜çº§ï¼ˆç²¾é€šï¼‰ï¼š
â”œâ”€â”€ è‡ªå®šä¹‰Starterå¼€å‘
â”œâ”€â”€ é…ç½®ä¸­å¿ƒæ·±åº¦é›†æˆ
â””â”€â”€ æ€§èƒ½è°ƒä¼˜å®æˆ˜
```

### 9.4 å¸¸è§é—®é¢˜ä¸è§£å†³


**â“ é—®é¢˜1ï¼šæœåŠ¡æ³¨å†Œä¸ä¸Š**
```
æ’æŸ¥æ­¥éª¤ï¼š
1ï¸âƒ£ æ£€æŸ¥æ³¨å†Œä¸­å¿ƒåœ°å€æ˜¯å¦æ­£ç¡®
2ï¸âƒ£ æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
3ï¸âƒ£ æŸ¥çœ‹@EnableDubboæ˜¯å¦é…ç½®
4ï¸âƒ£ ç¡®è®¤æ‰«æåŒ…è·¯å¾„æ˜¯å¦æ­£ç¡®
```

**â“ é—®é¢˜2ï¼šé…ç½®ä¸ç”Ÿæ•ˆ**
```
æ£€æŸ¥æ¸…å•ï¼š
âœ… é…ç½®æ–‡ä»¶åæ˜¯å¦æ­£ç¡®ï¼ˆapplication-{profile}.ymlï¼‰
âœ… Profileæ˜¯å¦æ¿€æ´»ï¼ˆspring.profiles.activeï¼‰
âœ… é…ç½®ä¼˜å…ˆçº§æ˜¯å¦ç†è§£æ­£ç¡®
âœ… æ˜¯å¦è¢«å…¶ä»–é…ç½®è¦†ç›–
```

**â“ é—®é¢˜3ï¼šçƒ­éƒ¨ç½²ä¸å·¥ä½œ**
```
è§£å†³æ–¹æ¡ˆï¼š
- IDEAå¼€å¯è‡ªåŠ¨ç¼–è¯‘
- ç¡®è®¤devtoolsä¾èµ–å·²æ·»åŠ 
- ä¿®æ”¹åæ‰‹åŠ¨ç¼–è¯‘ï¼ˆCtrl+F9ï¼‰
- DubboæœåŠ¡å¯èƒ½éœ€è¦é‡å¯
```

### 9.5 æœ€ä½³å®è·µå»ºè®®


**ğŸ“Œ å¼€å‘é˜¶æ®µ**
- âœ… ä½¿ç”¨`check=false`é¿å…å¯åŠ¨ä¾èµ–
- âœ… å¼€å¯è¯¦ç»†æ—¥å¿—æ–¹ä¾¿è°ƒè¯•
- âœ… é…ç½®MockæœåŠ¡å¿«é€ŸéªŒè¯
- âœ… ä½¿ç”¨DevToolsæå‡å¼€å‘æ•ˆç‡

**ğŸ“Œ æµ‹è¯•é˜¶æ®µ**
- âœ… ç‹¬ç«‹Profileé…ç½®æµ‹è¯•ç¯å¢ƒ
- âœ… Mockå¤–éƒ¨ä¾èµ–ä¿è¯å¯æµ‹æ€§
- âœ… é›†æˆæµ‹è¯•è¦†ç›–å…³é”®è·¯å¾„
- âœ… å‹æµ‹éªŒè¯æ€§èƒ½æŒ‡æ ‡

**ğŸ“Œ ç”Ÿäº§é˜¶æ®µ**
- âœ… ä½¿ç”¨é…ç½®ä¸­å¿ƒç»Ÿä¸€ç®¡ç†
- âœ… æ•æ„Ÿä¿¡æ¯å¿…é¡»åŠ å¯†
- âœ… å¼€å¯å¥åº·æ£€æŸ¥å’Œç›‘æ§
- âœ… è®¾ç½®åˆç†çš„è¶…æ—¶å’Œé‡è¯•
- âœ… é…ç½®å‘Šè­¦åŠæ—¶å‘ç°é—®é¢˜

**ğŸ¯ æ ¸å¿ƒè®°å¿†**
```
SpringBooté›†æˆDubboä¸‰æ­¥èµ°ï¼š
1ï¸âƒ£ å¼•å…¥Starterä¾èµ–
2ï¸âƒ£ é…ç½®æ–‡ä»¶å†™é…ç½®
3ï¸âƒ£ æ³¨è§£æ ‡æ³¨å³å¯ç”¨

å¼€å‘æ•ˆç‡æå‡æ ¸å¿ƒï¼š
- è‡ªåŠ¨è£…é…çœé…ç½®
- æ³¨è§£é©±åŠ¨æ›´ç®€æ´  
- ç›‘æ§å®Œå–„æ˜“è¿ç»´
- å¤šç¯å¢ƒç®¡ç†æ›´çµæ´»
```

---

**ğŸ“ å­¦ä¹ æ€»ç»“**

é€šè¿‡æœ¬èŠ‚å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡ï¼š
- âœ… SpringBootä¸Dubboé›†æˆçš„å®Œæ•´æµç¨‹
- âœ… è‡ªåŠ¨è£…é…å’Œæ³¨è§£é©±åŠ¨çš„åº•å±‚åŸç†
- âœ… é…ç½®ç®¡ç†çš„æœ€ä½³å®è·µ
- âœ… å¥åº·æ£€æŸ¥å’Œç›‘æ§çš„å®æˆ˜åº”ç”¨
- âœ… å¤šç¯å¢ƒéƒ¨ç½²å’Œå¼€å‘è°ƒè¯•æŠ€å·§

**ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ **
- æ·±å…¥å­¦ä¹ Dubboé«˜çº§ç‰¹æ€§
- æŒæ¡åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†
- äº†è§£æœåŠ¡æ²»ç†ç­–ç•¥
- å®è·µå¾®æœåŠ¡æ¶æ„è®¾è®¡

**ğŸ’¡ è®°ä½**ï¼šSpringBootè®©Dubboå¼€å‘å˜å¾—ç®€å•ï¼Œä½†ç†è§£åŸç†æ‰èƒ½ç”¨å¾—æ›´å¥½ï¼