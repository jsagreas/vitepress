---
title: 10ã€DubboæœåŠ¡æä¾›è€…å¼€å‘å®è·µ
---
## ğŸ“š ç›®å½•

1. [æœåŠ¡æä¾›è€…æ ¸å¿ƒæ¦‚å¿µ](#1-æœåŠ¡æä¾›è€…æ ¸å¿ƒæ¦‚å¿µ)
2. [@Serviceæ³¨è§£æ·±åº¦è§£æ](#2-Serviceæ³¨è§£æ·±åº¦è§£æ)
3. [æ¥å£è®¾è®¡åŸåˆ™ä¸è§„èŒƒ](#3-æ¥å£è®¾è®¡åŸåˆ™ä¸è§„èŒƒ)
4. [å®ç°ç±»ç¼–å†™è§„èŒƒ](#4-å®ç°ç±»ç¼–å†™è§„èŒƒ)
5. [æœåŠ¡æš´éœ²é…ç½®è¯¦è§£](#5-æœåŠ¡æš´éœ²é…ç½®è¯¦è§£)
6. [åè®®é€‰æ‹©ç­–ç•¥](#6-åè®®é€‰æ‹©ç­–ç•¥)
7. [ç«¯å£é…ç½®ç®¡ç†](#7-ç«¯å£é…ç½®ç®¡ç†)
8. [ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶](#8-ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶)
9. [åˆ†ç»„ç®¡ç†å®è·µ](#9-åˆ†ç»„ç®¡ç†å®è·µ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æœåŠ¡æä¾›è€…æ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æœåŠ¡æä¾›è€…


**é€šä¿—ç†è§£**ï¼šæƒ³è±¡ä½ å¼€äº†ä¸€å®¶å¿«é€’å…¬å¸ï¼ŒæœåŠ¡æä¾›è€…å°±æ˜¯è´Ÿè´£**æä¾›å¿«é€’æœåŠ¡**çš„é‚£ä¸€æ–¹ã€‚

```
ç°å®åœºæ™¯å¯¹æ¯”ï¼š
å¿«é€’å…¬å¸ï¼ˆæœåŠ¡æä¾›è€…ï¼‰ â†â†’ å®¢æˆ·ï¼ˆæœåŠ¡æ¶ˆè´¹è€…ï¼‰
   â†“                        â†“
æä¾›å¯„ä»¶ã€å–ä»¶æœåŠ¡      éœ€è¦å¿«é€’æœåŠ¡

Dubboåœºæ™¯ï¼š
è®¢å•æœåŠ¡ï¼ˆProviderï¼‰  â†â†’ å‰ç«¯åº”ç”¨ï¼ˆConsumerï¼‰
   â†“                        â†“
æä¾›ä¸‹å•ã€æŸ¥è¯¢åŠŸèƒ½      éœ€è¦è°ƒç”¨è¿™äº›åŠŸèƒ½
```

**æ ¸å¿ƒèŒè´£**ï¼š
- ğŸ“¦ **å®šä¹‰æœåŠ¡æ¥å£**ï¼šå‘Šè¯‰åˆ«äººæˆ‘èƒ½æä¾›ä»€ä¹ˆæœåŠ¡
- ğŸ”§ **å®ç°å…·ä½“åŠŸèƒ½**ï¼šçœŸæ­£å¹²æ´»çš„ä»£ç é€»è¾‘
- ğŸ“¡ **æš´éœ²æœåŠ¡**ï¼šè®©åˆ«äººèƒ½æ‰¾åˆ°å¹¶è°ƒç”¨æˆ‘çš„æœåŠ¡
- ğŸƒ **è¿è¡ŒæœåŠ¡**ï¼šæ—¶åˆ»å‡†å¤‡å“åº”è°ƒç”¨è¯·æ±‚

### 1.2 æœåŠ¡æä¾›è€…åœ¨Dubboä¸­çš„ä½ç½®


```
å¾®æœåŠ¡æ¶æ„å…¨æ™¯å›¾ï¼š

         æ³¨å†Œä¸­å¿ƒï¼ˆNacos/Zookeeperï¼‰
              â†‘        â†‘
              |æ³¨å†Œ    |è®¢é˜…
              |        |
        æœåŠ¡æä¾›è€…  â†’  æœåŠ¡æ¶ˆè´¹è€…
        (Provider)    (Consumer)
           â†“              â†“
        å®ç°ä¸šåŠ¡é€»è¾‘   è°ƒç”¨è¿œç¨‹æœåŠ¡
```

**å·¥ä½œæµç¨‹ç®€è¿°**ï¼š
1. ğŸ“ æœåŠ¡æä¾›è€…å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒ**æ³¨å†Œ**è‡ªå·±çš„æœåŠ¡ä¿¡æ¯
2. ğŸ“¢ æœåŠ¡æ¶ˆè´¹è€…ä»æ³¨å†Œä¸­å¿ƒ**è®¢é˜…**éœ€è¦çš„æœåŠ¡åˆ—è¡¨
3. ğŸ“ æ¶ˆè´¹è€…ç›´æ¥**è°ƒç”¨**æä¾›è€…çš„æœåŠ¡
4. âš™ï¸ æ³¨å†Œä¸­å¿ƒåªè´Ÿè´£**åè°ƒ**ï¼Œä¸å‚ä¸å®é™…è°ƒç”¨

---

## 2. ğŸ·ï¸ @Serviceæ³¨è§£æ·±åº¦è§£æ


### 2.1 @Serviceæ³¨è§£æ˜¯ä»€ä¹ˆ


**æœ¬è´¨ç†è§£**ï¼š`@Service`å°±åƒç»™ä½ çš„æœåŠ¡è´´ä¸Šä¸€ä¸ª**"å¯¹å¤–è¥ä¸š"çš„æ‹›ç‰Œ**ã€‚

> âš ï¸ **é‡è¦åŒºåˆ†**ï¼š
> - Springçš„`@Service`ï¼šåªæ˜¯æŠŠç±»æ ‡è®°ä¸ºæœåŠ¡å±‚ç»„ä»¶
> - Dubboçš„`@DubboService`ï¼ˆæˆ–`@Service`ï¼‰ï¼šä¸ä»…æ ‡è®°ï¼Œè¿˜ä¼š**æš´éœ²ä¸ºè¿œç¨‹æœåŠ¡**

### 2.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


**æœ€ç®€å•çš„ç”¨æ³•**ï¼š

```java
import org.apache.dubbo.config.annotation.DubboService;

// å‘Šè¯‰Dubboï¼šè¿™ä¸ªç±»è¦æš´éœ²ä¸ºè¿œç¨‹æœåŠ¡
@DubboService
public class OrderServiceImpl implements OrderService {
    
    @Override
    public String createOrder(String userId, String productId) {
        // å…·ä½“ä¸šåŠ¡é€»è¾‘
        return "è®¢å•åˆ›å»ºæˆåŠŸ";
    }
}
```

**è¿™ä¸€ä¸ªæ³¨è§£åšäº†ä»€ä¹ˆ**ï¼š
- âœ… å°†è¿™ä¸ªæœåŠ¡å®ç°ç±»**æ³¨å†Œåˆ°Dubboæ¡†æ¶**
- âœ… åœ¨å¯åŠ¨æ—¶**æš´éœ²ä¸ºè¿œç¨‹æœåŠ¡**
- âœ… å‘æ³¨å†Œä¸­å¿ƒ**å‘å¸ƒæœåŠ¡ä¿¡æ¯**

### 2.3 @Serviceæ ¸å¿ƒå‚æ•°è¯¦è§£


**å¸¸ç”¨å‚æ•°é…ç½®**ï¼š

| å‚æ•° | ä½œç”¨ | ç¤ºä¾‹å€¼ | é€šä¿—è§£é‡Š |
|------|------|--------|----------|
| `interfaceClass` | æŒ‡å®šæœåŠ¡æ¥å£ | `OrderService.class` | æ˜ç¡®å‘Šè¯‰åˆ«äººæˆ‘æä¾›çš„æ˜¯ä»€ä¹ˆæœåŠ¡ |
| `version` | æœåŠ¡ç‰ˆæœ¬å· | `"1.0.0"` | åŒä¸€ä¸ªæœåŠ¡å¯ä»¥æœ‰ä¸åŒç‰ˆæœ¬ |
| `group` | æœåŠ¡åˆ†ç»„ | `"order-group"` | æŠŠæœåŠ¡åˆ†ç±»ç®¡ç† |
| `timeout` | è°ƒç”¨è¶…æ—¶æ—¶é—´ | `3000`ï¼ˆæ¯«ç§’ï¼‰ | è¶…è¿‡è¿™ä¸ªæ—¶é—´æ²¡å“åº”å°±ç®—è¶…æ—¶ |
| `retries` | å¤±è´¥é‡è¯•æ¬¡æ•° | `2` | è°ƒç”¨å¤±è´¥åé‡è¯•å‡ æ¬¡ |
| `protocol` | ä½¿ç”¨çš„åè®® | `"dubbo"` | é€šä¿¡æ–¹å¼ï¼ˆåƒè¯´ä¸­æ–‡è¿˜æ˜¯è‹±æ–‡ï¼‰ |

**å®æˆ˜é…ç½®ç¤ºä¾‹**ï¼š

```java
@DubboService(
    version = "1.0.0",           // ç‰ˆæœ¬å·ï¼šæ–¹ä¾¿åç»­å‡çº§
    group = "order-group",       // åˆ†ç»„ï¼šè®¢å•ç›¸å…³æœåŠ¡
    timeout = 5000,              // è¶…æ—¶5ç§’
    retries = 2,                 // å¤±è´¥é‡è¯•2æ¬¡
    protocol = "dubbo"           // ä½¿ç”¨dubboåè®®
)
public class OrderServiceImpl implements OrderService {
    // å®ç°ä»£ç 
}
```

**å‚æ•°é€‰æ‹©å»ºè®®**ï¼š

```
ğŸ¯ å¿…éœ€å‚æ•°ï¼ˆä¸€å®šè¦é…ï¼‰ï¼š
â”œâ”€ interfaceClass/interface â†’ æ˜ç¡®æœåŠ¡ç±»å‹
â””â”€ version â†’ ç‰ˆæœ¬ç®¡ç†å¿…å¤‡

âš™ï¸ æ¨èå‚æ•°ï¼ˆå»ºè®®é…ç½®ï¼‰ï¼š
â”œâ”€ timeout â†’ é˜²æ­¢é•¿æ—¶é—´ç­‰å¾…
â”œâ”€ retries â†’ æé«˜å¯ç”¨æ€§
â””â”€ group â†’ æœåŠ¡åˆ†ç±»ç®¡ç†

ğŸ”§ å¯é€‰å‚æ•°ï¼ˆæŒ‰éœ€é…ç½®ï¼‰ï¼š
â”œâ”€ protocol â†’ é»˜è®¤dubboåè®®å³å¯
â”œâ”€ loadbalance â†’ è´Ÿè½½å‡è¡¡ç­–ç•¥
â””â”€ async â†’ æ˜¯å¦å¼‚æ­¥è°ƒç”¨
```

### 2.4 ç‰ˆæœ¬è¿ç§»æ³¨æ„äº‹é¡¹


**Dubbo 2.7+ æ¨èå†™æ³•**ï¼š

```java
// æ–°ç‰ˆæœ¬æ¨èä½¿ç”¨ @DubboService
import org.apache.dubbo.config.annotation.DubboService;

@DubboService(version = "2.0.0")
public class OrderServiceImpl implements OrderService {
    // ...
}
```

**æ—§ç‰ˆæœ¬å…¼å®¹å†™æ³•**ï¼š

```java
// Dubbo 2.6åŠä»¥å‰ç‰ˆæœ¬
import com.alibaba.dubbo.config.annotation.Service;

@Service(version = "1.0.0")
public class OrderServiceImpl implements OrderService {
    // ...
}
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šå¦‚æœä½ çš„é¡¹ç›®æ˜¯æ–°æ­å»ºçš„ï¼Œç›´æ¥ç”¨`@DubboService`å°±è¡Œäº†ï¼

---

## 3. ğŸ“ æ¥å£è®¾è®¡åŸåˆ™ä¸è§„èŒƒ


### 3.1 ä¸ºä»€ä¹ˆè¦å•ç‹¬å®šä¹‰æ¥å£


**åœºæ™¯å¯¹æ¯”**ï¼š

```
âŒ ä¸å¥½çš„åšæ³•ï¼š
æ¶ˆè´¹è€…é¡¹ç›® â†’ ç›´æ¥ä¾èµ– â†’ æä¾›è€…é¡¹ç›®ï¼ˆæ•´ä¸ªé¡¹ç›®ï¼‰
é—®é¢˜ï¼šè€¦åˆå¤ªé‡ï¼Œæä¾›è€…çš„å†…éƒ¨ä»£ç éƒ½æš´éœ²ç»™æ¶ˆè´¹è€…äº†

âœ… æ¨èåšæ³•ï¼š
æ¶ˆè´¹è€…é¡¹ç›® â†’ åªä¾èµ– â†’ APIæ¥å£æ¨¡å—ï¼ˆåªæœ‰æ¥å£å®šä¹‰ï¼‰
          â†‘
æä¾›è€…é¡¹ç›® â†’ å®ç° â†’ APIæ¥å£æ¨¡å—
ä¼˜åŠ¿ï¼šåªæš´éœ²æ¥å£ï¼Œå†…éƒ¨å®ç°å®Œå…¨éšè—
```

**æ ‡å‡†é¡¹ç›®ç»“æ„**ï¼š

```
å¾®æœåŠ¡é¡¹ç›®ç»“æ„ï¼š
my-dubbo-project/
â”œâ”€â”€ order-api/              â† æ¥å£å®šä¹‰æ¨¡å—ï¼ˆå…±äº«ï¼‰
â”‚   â””â”€â”€ OrderService.java   
â”œâ”€â”€ order-provider/         â† æœåŠ¡æä¾›è€…
â”‚   â”œâ”€â”€ OrderServiceImpl.java
â”‚   â””â”€â”€ ä¾èµ– order-api
â””â”€â”€ order-consumer/         â† æœåŠ¡æ¶ˆè´¹è€…
    â”œâ”€â”€ OrderController.java
    â””â”€â”€ ä¾èµ– order-api
```

### 3.2 æ¥å£è®¾è®¡æ ¸å¿ƒåŸåˆ™


**åŸåˆ™ä¸€ï¼šæ¥å£è¦ç‹¬ç«‹ä¸ºå•ç‹¬çš„æ¨¡å—**

```java
// order-api æ¨¡å—ï¼ˆåªæœ‰æ¥å£ï¼‰
package com.example.api;

public interface OrderService {
    String createOrder(String userId, String productId);
    OrderDTO queryOrder(String orderId);
}
```

**åŸåˆ™äºŒï¼šæ–¹æ³•å‚æ•°å’Œè¿”å›å€¼è¦è€ƒè™‘åºåˆ—åŒ–**

```java
// âœ… æ¨èï¼šä½¿ç”¨å¯åºåˆ—åŒ–çš„DTOå¯¹è±¡
public class OrderDTO implements Serializable {
    private static final long serialVersionUID = 1L;
    
    private String orderId;
    private String userId;
    private BigDecimal amount;
    // getter/setter
}

// âŒ é¿å…ï¼šå¤æ‚å¯¹è±¡å¯èƒ½åºåˆ—åŒ–å¤±è´¥
public class OrderEntity {
    private HttpServletRequest request;  // ä¸èƒ½åºåˆ—åŒ–ï¼
    private OutputStream output;         // ä¸èƒ½åºåˆ—åŒ–ï¼
}
```

**åŸåˆ™ä¸‰ï¼šæ¥å£æ–¹æ³•è¦è¯­ä¹‰æ¸…æ™°**

```java
// âœ… å¥½çš„å‘½åï¼šä¸€çœ‹å°±çŸ¥é“å¹²ä»€ä¹ˆ
public interface OrderService {
    OrderDTO createOrder(OrderCreateRequest request);
    OrderDTO queryOrderById(String orderId);
    List<OrderDTO> queryOrdersByUserId(String userId);
    boolean cancelOrder(String orderId);
}

// âŒ ä¸å¥½çš„å‘½åï¼šå«ç³Šä¸æ¸…
public interface OrderService {
    OrderDTO save(Object obj);      // ä¿å­˜ä»€ä¹ˆï¼Ÿ
    OrderDTO get(String id);        // è·å–ä»€ä¹ˆï¼Ÿ
    List<OrderDTO> query(Map map);  // æŸ¥ä»€ä¹ˆï¼Ÿ
}
```

### 3.3 æ¥å£è®¾è®¡æœ€ä½³å®è·µ


**å®è·µ1ï¼šä½¿ç”¨Request/Responseå¯¹è±¡å°è£…å‚æ•°**

```java
// è¯·æ±‚å¯¹è±¡ï¼šæ–¹ä¾¿æ‰©å±•å‚æ•°
public class OrderCreateRequest implements Serializable {
    private String userId;
    private String productId;
    private Integer quantity;
    private String address;
    // æœªæ¥åŠ æ–°å‚æ•°ï¼Œä¸ç”¨æ”¹æ¥å£æ–¹æ³•ç­¾å
}

// æ¥å£å®šä¹‰
public interface OrderService {
    // å‚æ•°å°è£…ä¸ºå¯¹è±¡ï¼Œæ˜“æ‰©å±•
    OrderCreateResponse createOrder(OrderCreateRequest request);
}
```

**å®è·µ2ï¼šå®šä¹‰æ¸…æ™°çš„è¿”å›å€¼ç»“æ„**

```java
// ç»Ÿä¸€è¿”å›ç»“æ„
public class Result<T> implements Serializable {
    private Integer code;      // çŠ¶æ€ç 
    private String message;    // æç¤ºä¿¡æ¯
    private T data;           // å®é™…æ•°æ®
    
    // æˆåŠŸè¿”å›
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setData(data);
        return result;
    }
    
    // å¤±è´¥è¿”å›
    public static <T> Result<T> fail(String message) {
        Result<T> result = new Result<>();
        result.setCode(500);
        result.setMessage(message);
        return result;
    }
}
```

**å®è·µ3ï¼šæ¥å£è¦è€ƒè™‘å¹‚ç­‰æ€§**

```java
// å¹‚ç­‰æ¥å£ï¼šå¤šæ¬¡è°ƒç”¨ç»“æœä¸€æ ·
public interface OrderService {
    // âœ… æ ¹æ®è®¢å•IDæŸ¥è¯¢ï¼Œå¤šæ¬¡æŸ¥è¯¢ç»“æœä¸å˜
    OrderDTO queryOrder(String orderId);
    
    // âš ï¸ åˆ›å»ºè®¢å•ï¼Œéœ€è¦é˜²æ­¢é‡å¤æäº¤
    OrderDTO createOrder(OrderCreateRequest request);
}

// é˜²é‡å¤æäº¤çš„å®ç°æ€è·¯
public class OrderServiceImpl implements OrderService {
    @Override
    public OrderDTO createOrder(OrderCreateRequest request) {
        String requestId = request.getRequestId(); // å”¯ä¸€è¯·æ±‚ID
        // æ£€æŸ¥æ˜¯å¦å·²å¤„ç†è¿‡
        if (å·²å¤„ç†è¿‡(requestId)) {
            return è¿”å›ä¹‹å‰çš„ç»“æœ;
        }
        // æ‰§è¡Œåˆ›å»ºé€»è¾‘
        // è®°å½•å·²å¤„ç†
    }
}
```

---

## 4. ğŸ”§ å®ç°ç±»ç¼–å†™è§„èŒƒ


### 4.1 å®ç°ç±»åŸºæœ¬ç»“æ„


**æ ‡å‡†å®ç°ç±»æ¨¡æ¿**ï¼š

```java
package com.example.provider.service;

import org.apache.dubbo.config.annotation.DubboService;
import com.example.api.OrderService;

@DubboService(version = "1.0.0")
public class OrderServiceImpl implements OrderService {
    
    // 1. æ³¨å…¥éœ€è¦çš„ä¾èµ–
    @Autowired
    private OrderMapper orderMapper;
    
    @Autowired
    private RedisTemplate redisTemplate;
    
    // 2. å®ç°æ¥å£æ–¹æ³•
    @Override
    public OrderDTO createOrder(OrderCreateRequest request) {
        // ä¸šåŠ¡é€»è¾‘å®ç°
        return orderDTO;
    }
    
    // 3. ç§æœ‰æ–¹æ³•è¾…åŠ©
    private void validateRequest(OrderCreateRequest request) {
        // å‚æ•°æ ¡éªŒé€»è¾‘
    }
}
```

### 4.2 å®ç°ç±»ç¼–å†™è§„èŒƒ


**è§„èŒƒ1ï¼šä¸€ä¸ªæ¥å£ä¸€ä¸ªå®ç°ç±»**

```
âœ… æ¨èç»“æ„ï¼š
OrderService æ¥å£
    â””â”€â”€ OrderServiceImpl å®ç°ç±»

âŒ é¿å…å¤šä¸ªå®ç°ï¼š
OrderService æ¥å£
    â”œâ”€â”€ OrderServiceImplV1
    â”œâ”€â”€ OrderServiceImplV2
    â””â”€â”€ OrderServiceImplV3
ï¼ˆåº”è¯¥ç”¨ç‰ˆæœ¬å·åŒºåˆ†ï¼Œä¸æ˜¯ç±»ååŒºåˆ†ï¼‰
```

**è§„èŒƒ2ï¼šå®ç°ç±»è¦å¤„ç†å¼‚å¸¸**

```java
@DubboService
public class OrderServiceImpl implements OrderService {
    
    @Override
    public OrderDTO createOrder(OrderCreateRequest request) {
        try {
            // 1. å‚æ•°æ ¡éªŒ
            validateRequest(request);
            
            // 2. ä¸šåŠ¡é€»è¾‘
            OrderEntity order = new OrderEntity();
            // ... è®¾ç½®å±æ€§
            orderMapper.insert(order);
            
            // 3. è¿”å›ç»“æœ
            return convertToDTO(order);
            
        } catch (IllegalArgumentException e) {
            // å‚æ•°å¼‚å¸¸
            throw new DubboException("å‚æ•°é”™è¯¯ï¼š" + e.getMessage());
        } catch (Exception e) {
            // å…¶ä»–å¼‚å¸¸
            throw new DubboException("è®¢å•åˆ›å»ºå¤±è´¥", e);
        }
    }
}
```

**è§„èŒƒ3ï¼šåˆç†ä½¿ç”¨æ—¥å¿—**

```java
@DubboService
public class OrderServiceImpl implements OrderService {
    
    private static final Logger logger = LoggerFactory.getLogger(OrderServiceImpl.class);
    
    @Override
    public OrderDTO createOrder(OrderCreateRequest request) {
        // å…¥å£æ—¥å¿—ï¼šè®°å½•è¯·æ±‚å‚æ•°
        logger.info("å¼€å§‹åˆ›å»ºè®¢å•ï¼ŒuserId={}, productId={}", 
                    request.getUserId(), request.getProductId());
        
        try {
            // ä¸šåŠ¡é€»è¾‘
            OrderDTO result = doCreateOrder(request);
            
            // æˆåŠŸæ—¥å¿—
            logger.info("è®¢å•åˆ›å»ºæˆåŠŸï¼ŒorderId={}", result.getOrderId());
            return result;
            
        } catch (Exception e) {
            // å¼‚å¸¸æ—¥å¿—
            logger.error("è®¢å•åˆ›å»ºå¤±è´¥ï¼Œrequest={}", request, e);
            throw e;
        }
    }
}
```

### 4.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**å»ºè®®1ï¼šé¿å…åœ¨æ¥å£å®ç°ä¸­åšè€—æ—¶æ“ä½œ**

```java
@DubboService(timeout = 3000) // è®¾ç½®3ç§’è¶…æ—¶
public class OrderServiceImpl implements OrderService {
    
    @Override
    public OrderDTO createOrder(OrderCreateRequest request) {
        
        // âŒ ä¸è¦åœ¨åŒæ­¥æ–¹æ³•ä¸­åšè€—æ—¶æ“ä½œ
        sendEmail(request.getUserId());  // å‘é‚®ä»¶å¾ˆæ…¢
        sendSMS(request.getPhone());     // å‘çŸ­ä¿¡å¾ˆæ…¢
        
        // âœ… åº”è¯¥ç”¨å¼‚æ­¥æ–¹å¼
        asyncExecutor.submit(() -> sendEmail(request.getUserId()));
        asyncExecutor.submit(() -> sendSMS(request.getPhone()));
        
        return orderDTO;
    }
}
```

**å»ºè®®2ï¼šåˆç†ä½¿ç”¨ç¼“å­˜**

```java
@DubboService
public class OrderServiceImpl implements OrderService {
    
    @Override
    public OrderDTO queryOrder(String orderId) {
        // å…ˆæŸ¥ç¼“å­˜
        String cacheKey = "order:" + orderId;
        OrderDTO cached = redisTemplate.get(cacheKey);
        if (cached != null) {
            return cached;
        }
        
        // ç¼“å­˜æ²¡æœ‰ï¼ŒæŸ¥æ•°æ®åº“
        OrderEntity entity = orderMapper.selectById(orderId);
        OrderDTO dto = convertToDTO(entity);
        
        // å†™å…¥ç¼“å­˜
        redisTemplate.set(cacheKey, dto, 5, TimeUnit.MINUTES);
        return dto;
    }
}
```

---

## 5. ğŸ“¡ æœåŠ¡æš´éœ²é…ç½®è¯¦è§£


### 5.1 ä»€ä¹ˆæ˜¯æœåŠ¡æš´éœ²


**é€šä¿—ç†è§£**ï¼šæœåŠ¡æš´éœ²å°±æ˜¯**æŠŠä½ çš„æœåŠ¡å‘å¸ƒå‡ºå»ï¼Œè®©åˆ«äººèƒ½è°ƒç”¨**ã€‚

```
ç±»æ¯”å¼€åº—æµç¨‹ï¼š
1. ä½ æœ‰ä¸ªæ‰‹è‰ºï¼ˆå®ç°ç±»ï¼‰ â†’ å®ç°æœåŠ¡æ¥å£
2. æŒ‚ä¸Šæ‹›ç‰Œï¼ˆæš´éœ²æœåŠ¡ï¼‰ â†’ é…ç½®æš´éœ²å‚æ•°
3. å‘Šè¯‰å·¥å•†å±€ï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰â†’ æœåŠ¡æ³¨å†Œ
4. å®¢æˆ·ä¸Šé—¨ï¼ˆæ¶ˆè´¹è€…è°ƒç”¨ï¼‰â†’ è¿œç¨‹è°ƒç”¨
```

### 5.2 æœåŠ¡æš´éœ²çš„ä¸‰ç§æ–¹å¼


**æ–¹å¼1ï¼šæ³¨è§£æ–¹å¼ï¼ˆæ¨èï¼‰**

```java
@DubboService(
    version = "1.0.0",
    timeout = 3000,
    retries = 2
)
public class OrderServiceImpl implements OrderService {
    // å®ç°ä»£ç 
}
```

**æ–¹å¼2ï¼šXMLé…ç½®æ–¹å¼**

```xml
<!-- dubbo-provider.xml -->
<dubbo:service 
    interface="com.example.api.OrderService" 
    ref="orderService"
    version="1.0.0"
    timeout="3000"/>

<bean id="orderService" class="com.example.provider.service.OrderServiceImpl"/>
```

**æ–¹å¼3ï¼šAPIç¼–ç¨‹æ–¹å¼**

```java
// ä¸æ¨èï¼Œå¤ªç¹ç
ServiceConfig<OrderService> service = new ServiceConfig<>();
service.setInterface(OrderService.class);
service.setRef(new OrderServiceImpl());
service.setVersion("1.0.0");
service.export(); // æš´éœ²æœåŠ¡
```

> ğŸ’¡ **æ–°æ‰‹å»ºè®®**ï¼šç›´æ¥ç”¨æ³¨è§£æ–¹å¼ï¼Œç®€å•ç›´è§‚ï¼

### 5.3 æœåŠ¡æš´éœ²æ ¸å¿ƒé…ç½®


**application.ymlé…ç½®**ï¼š

```yaml
dubbo:
  application:
    name: order-provider        # åº”ç”¨åç§°
  registry:
    address: nacos://127.0.0.1:8848  # æ³¨å†Œä¸­å¿ƒåœ°å€
  protocol:
    name: dubbo                 # åè®®åç§°
    port: 20880                 # æœåŠ¡ç«¯å£
```

**é…ç½®é¡¹å«ä¹‰è§£æ**ï¼š

```
ğŸ“Œ application.name (åº”ç”¨åç§°)
   â”œâ”€ ä½œç”¨ï¼šæ ‡è¯†è¿™ä¸ªåº”ç”¨æ˜¯è°
   â”œâ”€ ç¤ºä¾‹ï¼šorder-providerã€user-provider
   â””â”€ å»ºè®®ï¼šè§åçŸ¥æ„ï¼ŒåŒºåˆ†ä¸åŒæœåŠ¡

ğŸ“Œ registry.address (æ³¨å†Œä¸­å¿ƒ)
   â”œâ”€ ä½œç”¨ï¼šå‘Šè¯‰æœåŠ¡å¾€å“ªé‡Œæ³¨å†Œ
   â”œâ”€ æ ¼å¼ï¼šåè®®://IP:ç«¯å£
   â””â”€ å¸¸ç”¨ï¼šnacos://127.0.0.1:8848 æˆ– zookeeper://127.0.0.1:2181

ğŸ“Œ protocol.name (é€šä¿¡åè®®)
   â”œâ”€ ä½œç”¨ï¼šå®šä¹‰æœåŠ¡é—´é€šä¿¡æ–¹å¼
   â”œâ”€ å¯é€‰ï¼šdubboã€restã€grpcç­‰
   â””â”€ é»˜è®¤ï¼šdubboåè®®ï¼ˆæ€§èƒ½æœ€å¥½ï¼‰

ğŸ“Œ protocol.port (æœåŠ¡ç«¯å£)
   â”œâ”€ ä½œç”¨ï¼šæœåŠ¡ç›‘å¬çš„ç«¯å£å·
   â”œâ”€ é»˜è®¤ï¼š20880
   â””â”€ æ³¨æ„ï¼šä¸è¦å’Œå…¶ä»–æœåŠ¡å†²çª
```

### 5.4 å¤šæ³¨å†Œä¸­å¿ƒé…ç½®


**åœºæ™¯**ï¼šæœåŠ¡è¦æ³¨å†Œåˆ°å¤šä¸ªæ³¨å†Œä¸­å¿ƒ

```yaml
dubbo:
  registry:
    # æ–¹å¼1ï¼šç®€åŒ–å†™æ³•ï¼ˆå¤šä¸ªåœ°å€ï¼‰
    address: nacos://192.168.1.10:8848,nacos://192.168.1.11:8848
    
    # æ–¹å¼2ï¼šè¯¦ç»†é…ç½®
    registries:
      - id: nacos1
        address: nacos://192.168.1.10:8848
      - id: nacos2
        address: nacos://192.168.1.11:8848
```

---

## 6. ğŸ”Œ åè®®é€‰æ‹©ç­–ç•¥


### 6.1 Dubboæ”¯æŒçš„åè®®ç±»å‹


**åè®®å¯¹æ¯”è¡¨**ï¼š

| åè®® | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ | æ€§èƒ½ |
|------|------|----------|------|
| **dubbo** | å•ä¸€é•¿è¿æ¥ï¼ŒNIOå¼‚æ­¥ | å¸¸è§„RPCè°ƒç”¨ | â­â­â­â­â­ |
| **rest** | HTTPçŸ­è¿æ¥ï¼ŒåŸºäºRESTful | è·¨è¯­è¨€è°ƒç”¨ | â­â­â­ |
| **grpc** | HTTP/2ï¼ŒProtocol Buffers | é«˜æ€§èƒ½è¦æ±‚ | â­â­â­â­ |
| **triple** | Dubbo3æ–°åè®® | äº‘åŸç”Ÿåœºæ™¯ | â­â­â­â­â­ |

### 6.2 Dubboåè®®è¯¦è§£


**Dubboåè®®ç‰¹ç‚¹**ï¼š

```
ä¼˜ç‚¹ï¼š
âœ… æ€§èƒ½æé«˜ï¼šå•ä¸€é•¿è¿æ¥+NIO
âœ… ä¼ è¾“æ•ˆç‡ï¼šå°æ•°æ®åŒ…ï¼Œé€‚åˆé«˜å¹¶å‘
âœ… å¼‚æ­¥æ”¯æŒï¼šå¤©ç„¶æ”¯æŒå¼‚æ­¥è°ƒç”¨

ç¼ºç‚¹ï¼š
âŒ ä¸é€‚åˆå¤§æ–‡ä»¶ä¼ è¾“
âŒ ä¸æ”¯æŒè·¨è¯­è¨€ï¼ˆåªèƒ½Javaï¼‰
```

**é…ç½®ç¤ºä¾‹**ï¼š

```yaml
dubbo:
  protocol:
    name: dubbo
    port: 20880
    # å¯é€‰é…ç½®
    threads: 200              # ä¸šåŠ¡çº¿ç¨‹æ± å¤§å°
    payload: 8388608          # æœ€å¤§æ¶ˆæ¯é•¿åº¦ï¼ˆ8Mï¼‰
    serialization: hessian2   # åºåˆ—åŒ–æ–¹å¼
```

### 6.3 åè®®é€‰æ‹©å†³ç­–


**å†³ç­–æµç¨‹å›¾**ï¼š

```
å¼€å§‹é€‰æ‹©åè®®
    â†“
æ˜¯å¦éœ€è¦è·¨è¯­è¨€ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ é€‰æ‹© rest æˆ– grpc
    â””â”€ å¦ â†“
         æ€§èƒ½è¦æ±‚é«˜å—ï¼Ÿ
            â”œâ”€ æ˜¯ â†’ é€‰æ‹© dubbo æˆ– triple
            â””â”€ å¦ â†’ é€‰æ‹© restï¼ˆé€šç”¨æ€§å¥½ï¼‰
```

**å…¸å‹åœºæ™¯æ¨è**ï¼š

```
ğŸ¯ Javaå¾®æœåŠ¡é—´è°ƒç”¨ï¼ˆæœ€å¸¸è§ï¼‰
   â†’ é€‰æ‹© dubbo åè®®
   é…ç½®ï¼šname: dubbo, port: 20880

ğŸ¯ éœ€è¦å¯¹å¤–æä¾›HTTPæ¥å£
   â†’ é€‰æ‹© rest åè®®
   é…ç½®ï¼šname: rest, port: 8080

ğŸ¯ ç§»åŠ¨ç«¯/å‰ç«¯ç›´æ¥è°ƒç”¨
   â†’ é€‰æ‹© rest åè®®
   é…ç½®ï¼šæ”¯æŒHTTP GET/POST

ğŸ¯ é«˜æ€§èƒ½+è·¨è¯­è¨€
   â†’ é€‰æ‹© triple åè®®ï¼ˆDubbo3ï¼‰
   é…ç½®ï¼šname: triple, port: 50051
```

### 6.4 å¤šåè®®æš´éœ²


**åœºæ™¯**ï¼šåŒä¸€ä¸ªæœåŠ¡åŒæ—¶æ”¯æŒå¤šç§åè®®

```yaml
dubbo:
  protocols:
    - name: dubbo
      port: 20880
    - name: rest
      port: 8080
```

```java
@DubboService(
    protocol = {"dubbo", "rest"},  // åŒæ—¶æš´éœ²ä¸¤ç§åè®®
    version = "1.0.0"
)
public class OrderServiceImpl implements OrderService {
    // å®ç°ä»£ç 
}
```

---

## 7. ğŸ”¢ ç«¯å£é…ç½®ç®¡ç†


### 7.1 ç«¯å£çš„ä½œç”¨


**ç«¯å£æ˜¯ä»€ä¹ˆ**ï¼šå°±åƒä½ å®¶çš„é—¨ç‰Œå·ï¼Œåˆ«äººè¦æ‰¾ä½ å°±å¾—çŸ¥é“é—¨ç‰Œå·ã€‚

```
æœåŠ¡æš´éœ²è¿‡ç¨‹ï¼š
1. æœåŠ¡å¯åŠ¨ â†’ ç›‘å¬ç«¯å£ï¼ˆå¦‚20880ï¼‰
2. æ³¨å†Œä¸­å¿ƒè®°å½• â†’ IP:192.168.1.100 + ç«¯å£:20880
3. æ¶ˆè´¹è€…è·å– â†’ æ‹¿åˆ°å®Œæ•´åœ°å€ 192.168.1.100:20880
4. å‘èµ·è°ƒç”¨ â†’ è¿æ¥è¿™ä¸ªåœ°å€
```

### 7.2 ç«¯å£é…ç½®æ–¹å¼


**æ–¹å¼1ï¼šé…ç½®æ–‡ä»¶æŒ‡å®š**

```yaml
dubbo:
  protocol:
    port: 20880  # å›ºå®šç«¯å£
```

**æ–¹å¼2ï¼šè‡ªåŠ¨åˆ†é…ï¼ˆ-1ï¼‰**

```yaml
dubbo:
  protocol:
    port: -1  # è‡ªåŠ¨é€‰æ‹©å¯ç”¨ç«¯å£
```

**æ–¹å¼3ï¼šç«¯å£èŒƒå›´**

```yaml
dubbo:
  protocol:
    port: 20880
    # å¦‚æœ20880è¢«å ç”¨ï¼Œä¼šå°è¯•20881, 20882...
```

### 7.3 ç«¯å£å†²çªè§£å†³


**é—®é¢˜åœºæ™¯**ï¼šåŒä¸€å°æœºå™¨éƒ¨ç½²å¤šä¸ªæœåŠ¡

```
âŒ é”™è¯¯é…ç½®ï¼ˆç«¯å£å†²çªï¼‰ï¼š
æœåŠ¡Aï¼šport: 20880
æœåŠ¡Bï¼šport: 20880  â† å†²çªï¼

âœ… æ­£ç¡®é…ç½®ï¼ˆç«¯å£éš”ç¦»ï¼‰ï¼š
æœåŠ¡Aï¼šport: 20880
æœåŠ¡Bï¼šport: 20881
æœåŠ¡Cï¼šport: 20882
```

**æœ€ä½³å®è·µ**ï¼š

```yaml
# å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨å›ºå®šç«¯å£ï¼Œæ–¹ä¾¿è°ƒè¯•
dubbo:
  protocol:
    port: 20880

# ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨è‡ªåŠ¨ç«¯å£ï¼Œé¿å…å†²çª
dubbo:
  protocol:
    port: -1
```

### 7.4 ç«¯å£è§„åˆ’å»ºè®®


**ç«¯å£è§„åˆ’è¡¨**ï¼š

| æœåŠ¡ç±»å‹ | ç«¯å£èŒƒå›´ | ç¤ºä¾‹ |
|---------|---------|------|
| ç”¨æˆ·æœåŠ¡ | 20880-20889 | user-provider: 20880 |
| è®¢å•æœåŠ¡ | 20890-20899 | order-provider: 20890 |
| å•†å“æœåŠ¡ | 20900-20909 | product-provider: 20900 |
| æ”¯ä»˜æœåŠ¡ | 20910-20919 | payment-provider: 20910 |

**è§„åˆ’åŸåˆ™**ï¼š
- ğŸ“‹ **ç»Ÿä¸€ç®¡ç†**ï¼šå»ºç«‹ç«¯å£åˆ†é…è¡¨
- ğŸ”’ **é¢„ç•™ç©ºé—´**ï¼šæ¯ä¸ªæœåŠ¡é¢„ç•™10ä¸ªç«¯å£
- ğŸ“ **æ–‡æ¡£è®°å½•**ï¼šç«¯å£åˆ†é…è¦æœ‰æ–‡æ¡£è¯´æ˜

---

## 8. ğŸ·ï¸ ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶


**åœºæ™¯æ¡ˆä¾‹**ï¼š

```
ä¸šåŠ¡å‡çº§åœºæ™¯ï¼š
æ—§ç‰ˆæœ¬ï¼šOrderService 1.0 â†’ ä¸‹å•åªéœ€userId
æ–°ç‰ˆæœ¬ï¼šOrderService 2.0 â†’ ä¸‹å•éœ€è¦userId + ä¼˜æƒ åˆ¸

é—®é¢˜ï¼šæ–°æ—§ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œæ€ä¹ˆå¹³æ»‘å‡çº§ï¼Ÿ
è§£å†³ï¼šä½¿ç”¨ç‰ˆæœ¬å·éš”ç¦»
```

**ç‰ˆæœ¬æ§åˆ¶çš„ä»·å€¼**ï¼š

```
âœ… ç°åº¦å‘å¸ƒï¼šæ–°ç‰ˆæœ¬å…ˆç»™éƒ¨åˆ†ç”¨æˆ·ç”¨
âœ… å¹³æ»‘å‡çº§ï¼šæ–°æ—§ç‰ˆæœ¬å…±å­˜ï¼Œé€æ­¥åˆ‡æ¢
âœ… å¿«é€Ÿå›æ»šï¼šå‘ç°é—®é¢˜ç«‹å³åˆ‡å›æ—§ç‰ˆæœ¬
âœ… A/Bæµ‹è¯•ï¼šä¸åŒç‰ˆæœ¬å¯¹æ¯”æ•ˆæœ
```

### 8.2 ç‰ˆæœ¬å·çš„ä½¿ç”¨


**æä¾›è€…ç«¯é…ç½®**ï¼š

```java
// æ—§ç‰ˆæœ¬æœåŠ¡ï¼ˆç»§ç»­è¿è¡Œï¼‰
@DubboService(
    version = "1.0.0",  // æ—§ç‰ˆæœ¬å·
    group = "order"
)
public class OrderServiceImplV1 implements OrderService {
    @Override
    public String createOrder(String userId) {
        // æ—§é€»è¾‘
        return "V1è®¢å•";
    }
}

// æ–°ç‰ˆæœ¬æœåŠ¡ï¼ˆæ–°éƒ¨ç½²ï¼‰
@DubboService(
    version = "2.0.0",  // æ–°ç‰ˆæœ¬å·
    group = "order"
)
public class OrderServiceImplV2 implements OrderService {
    @Override
    public String createOrder(String userId, String couponId) {
        // æ–°é€»è¾‘
        return "V2è®¢å•";
    }
}
```

**æ¶ˆè´¹è€…ç«¯æŒ‡å®šç‰ˆæœ¬**ï¼š

```java
// è€å®¢æˆ·ç«¯è°ƒç”¨æ—§ç‰ˆæœ¬
@DubboReference(
    version = "1.0.0",
    group = "order"
)
private OrderService orderServiceV1;

// æ–°å®¢æˆ·ç«¯è°ƒç”¨æ–°ç‰ˆæœ¬
@DubboReference(
    version = "2.0.0",
    group = "order"
)
private OrderService orderServiceV2;

// è‡ªåŠ¨é€‰æ‹©æœ€æ–°ç‰ˆæœ¬ï¼ˆé€šé…ç¬¦ï¼‰
@DubboReference(
    version = "*",  // ä»»æ„ç‰ˆæœ¬
    group = "order"
)
private OrderService orderService;
```

### 8.3 ç‰ˆæœ¬å‡çº§ç­–ç•¥


**ç­–ç•¥1ï¼šç°åº¦å‘å¸ƒ**

```
æ­¥éª¤ï¼š
1. éƒ¨ç½²æ–°ç‰ˆæœ¬æœåŠ¡ï¼ˆversion=2.0.0ï¼‰
2. æ—§ç‰ˆæœ¬ç»§ç»­è¿è¡Œï¼ˆversion=1.0.0ï¼‰
3. éƒ¨åˆ†æ¶ˆè´¹è€…åˆ‡æ¢åˆ°2.0.0
4. è§‚å¯Ÿä¸€æ®µæ—¶é—´
5. å…¨éƒ¨æ¶ˆè´¹è€…åˆ‡æ¢åˆ°2.0.0
6. ä¸‹çº¿1.0.0ç‰ˆæœ¬
```

**ç­–ç•¥2ï¼šå¹¶è¡Œç‰ˆæœ¬**

```yaml
# åŒæ—¶æä¾›å¤šä¸ªç‰ˆæœ¬
dubbo:
  provider:
    version: 1.0.0,2.0.0  # åŒæ—¶æš´éœ²ä¸¤ä¸ªç‰ˆæœ¬
```

**ç­–ç•¥3ï¼šç‰ˆæœ¬å›æ»š**

```
å‘ç°æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼š
1. æ¶ˆè´¹è€…é…ç½®æ”¹å› version: "1.0.0"
2. é‡å¯æ¶ˆè´¹è€…åº”ç”¨
3. è°ƒç”¨è‡ªåŠ¨åˆ‡å›æ—§ç‰ˆæœ¬
4. ä¿®å¤æ–°ç‰ˆæœ¬é—®é¢˜
5. å†æ¬¡å‡çº§
```

### 8.4 ç‰ˆæœ¬å·è§„èŒƒ


**è¯­ä¹‰åŒ–ç‰ˆæœ¬å·**ï¼š

```
æ ¼å¼ï¼šä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬
ç¤ºä¾‹ï¼š1.2.3

1.x.x  ä¸»ç‰ˆæœ¬ï¼šä¸å…¼å®¹çš„APIæ”¹åŠ¨
x.2.x  æ¬¡ç‰ˆæœ¬ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢
x.x.3  ä¿®è®¢ç‰ˆæœ¬ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

å®é™…åº”ç”¨ï¼š
1.0.0 â†’ åˆå§‹ç‰ˆæœ¬
1.1.0 â†’ æ–°å¢åŠŸèƒ½ï¼Œå…¼å®¹1.0.0
1.1.1 â†’ ä¿®å¤Bugï¼Œå…¼å®¹1.1.0
2.0.0 â†’ å¤§æ”¹ç‰ˆï¼Œä¸å…¼å®¹1.x.x
```

**ç‰ˆæœ¬å·æœ€ä½³å®è·µ**ï¼š

```
ğŸ¯ å¼€å‘ç¯å¢ƒï¼š
version: "dev"  æˆ– version: "1.0.0-SNAPSHOT"

ğŸ¯ æµ‹è¯•ç¯å¢ƒï¼š
version: "1.0.0-beta"

ğŸ¯ ç”Ÿäº§ç¯å¢ƒï¼š
version: "1.0.0"  æ­£å¼ç‰ˆæœ¬å·
```

---

## 9. ğŸ“ åˆ†ç»„ç®¡ç†å®è·µ


### 9.1 ä»€ä¹ˆæ˜¯æœåŠ¡åˆ†ç»„


**é€šä¿—ç†è§£**ï¼šåˆ†ç»„å°±åƒç»™æœåŠ¡**è´´ä¸Šæ ‡ç­¾**ï¼Œæ–¹ä¾¿åˆ†ç±»ç®¡ç†ã€‚

```
ç±»æ¯”å›¾ä¹¦é¦†ï¼š
ä¸åŒæ¥¼å±‚ï¼ˆåˆ†ç»„ï¼‰ â†’ ä¸åŒç±»åˆ«çš„ä¹¦
â”œâ”€ 1æ¥¼ï¼šæ–‡å­¦ç±»ï¼ˆgroup="literature"ï¼‰
â”œâ”€ 2æ¥¼ï¼šç§‘æŠ€ç±»ï¼ˆgroup="technology"ï¼‰
â””â”€ 3æ¥¼ï¼šå†å²ç±»ï¼ˆgroup="history"ï¼‰

Dubboåˆ†ç»„ï¼š
ä¸åŒåˆ†ç»„ â†’ ä¸åŒä¸šåŠ¡åœºæ™¯çš„æœåŠ¡
â”œâ”€ group="default" â†’ é»˜è®¤åˆ†ç»„
â”œâ”€ group="vip" â†’ VIPç”¨æˆ·ä¸“ç”¨
â””â”€ group="test" â†’ æµ‹è¯•ç¯å¢ƒä¸“ç”¨
```

### 9.2 åˆ†ç»„çš„ä½¿ç”¨åœºæ™¯


**åœºæ™¯1ï¼šåŒºåˆ†ç¯å¢ƒ**

```java
// æµ‹è¯•ç¯å¢ƒæœåŠ¡
@DubboService(
    version = "1.0.0",
    group = "test"  // æµ‹è¯•åˆ†ç»„
)
public class OrderServiceTestImpl implements OrderService {
    // æµ‹è¯•ç¯å¢ƒçš„å®ç°
}

// ç”Ÿäº§ç¯å¢ƒæœåŠ¡
@DubboService(
    version = "1.0.0",
    group = "prod"  // ç”Ÿäº§åˆ†ç»„
)
public class OrderServiceProdImpl implements OrderService {
    // ç”Ÿäº§ç¯å¢ƒçš„å®ç°
}
```

**åœºæ™¯2ï¼šä¸šåŠ¡éš”ç¦»**

```java
// æ™®é€šç”¨æˆ·è®¢å•æœåŠ¡
@DubboService(
    version = "1.0.0",
    group = "normal"
)
public class NormalOrderServiceImpl implements OrderService {
    // æ™®é€šè®¢å•é€»è¾‘
}

// VIPç”¨æˆ·è®¢å•æœåŠ¡
@DubboService(
    version = "1.0.0",
    group = "vip"
)
public class VipOrderServiceImpl implements OrderService {
    // VIPè®¢å•é€»è¾‘ï¼ˆå¯èƒ½æœ‰ç‰¹æ®Šä¼˜æƒ ï¼‰
}
```

**åœºæ™¯3ï¼šç°åº¦æµ‹è¯•**

```java
// ç¨³å®šç‰ˆæœåŠ¡
@DubboService(
    version = "1.0.0",
    group = "stable"
)
public class OrderServiceStable implements OrderService {
    // ç¨³å®šç‰ˆæœ¬
}

// ç°åº¦ç‰ˆæœåŠ¡
@DubboService(
    version = "1.0.0",
    group = "gray"
)
public class OrderServiceGray implements OrderService {
    // ç°åº¦æµ‹è¯•ç‰ˆæœ¬
}
```

### 9.3 æ¶ˆè´¹è€…å¦‚ä½•é€‰æ‹©åˆ†ç»„


**æŒ‡å®šåˆ†ç»„è°ƒç”¨**ï¼š

```java
// è°ƒç”¨VIPåˆ†ç»„çš„æœåŠ¡
@DubboReference(
    version = "1.0.0",
    group = "vip"
)
private OrderService vipOrderService;

// è°ƒç”¨æ™®é€šåˆ†ç»„çš„æœåŠ¡
@DubboReference(
    version = "1.0.0",
    group = "normal"
)
private OrderService normalOrderService;
```

**åŠ¨æ€é€‰æ‹©åˆ†ç»„**ï¼š

```java
@RestController
public class OrderController {
    
    @DubboReference(version = "1.0.0", group = "vip")
    private OrderService vipOrderService;
    
    @DubboReference(version = "1.0.0", group = "normal")
    private OrderService normalOrderService;
    
    @PostMapping("/createOrder")
    public String createOrder(String userId, boolean isVip) {
        if (isVip) {
            return vipOrderService.createOrder(userId);
        } else {
            return normalOrderService.createOrder(userId);
        }
    }
}
```

### 9.4 åˆ†ç»„çš„åˆå¹¶è°ƒç”¨


**åœºæ™¯**ï¼šåŒæ—¶è°ƒç”¨å¤šä¸ªåˆ†ç»„ï¼Œåˆå¹¶ç»“æœ

```java
// åŒæ—¶è°ƒç”¨å¤šä¸ªåˆ†ç»„
@DubboReference(
    version = "1.0.0",
    group = "*",  // æ‰€æœ‰åˆ†ç»„
    merger = "true"  // åˆå¹¶ç»“æœ
)
private OrderService orderService;
```

**é…ç½®è¯´æ˜**ï¼š

```
group="*"  è°ƒç”¨æ‰€æœ‰åˆ†ç»„çš„æœåŠ¡
group="group1,group2"  è°ƒç”¨æŒ‡å®šå¤šä¸ªåˆ†ç»„
merger="true"  æŠŠç»“æœåˆå¹¶è¿”å›ï¼ˆé€‚ç”¨äºListç­‰é›†åˆç±»å‹ï¼‰
```

### 9.5 åˆ†ç»„ç®¡ç†æœ€ä½³å®è·µ


**å®è·µå»ºè®®**ï¼š

```
âœ… ç¯å¢ƒéš”ç¦»ï¼š
   â”œâ”€ group="dev"    å¼€å‘ç¯å¢ƒ
   â”œâ”€ group="test"   æµ‹è¯•ç¯å¢ƒ
   â””â”€ group="prod"   ç”Ÿäº§ç¯å¢ƒ

âœ… ä¸šåŠ¡éš”ç¦»ï¼š
   â”œâ”€ group="B2C"    ToCä¸šåŠ¡
   â””â”€ group="B2B"    ToBä¸šåŠ¡

âœ… ç°åº¦å‘å¸ƒï¼š
   â”œâ”€ group="stable" ç¨³å®šç‰ˆ
   â””â”€ group="gray"   ç°åº¦ç‰ˆ

âŒ é¿å…è¿‡åº¦åˆ†ç»„ï¼š
   åˆ†ç»„å¤ªå¤šä¼šå¢åŠ ç®¡ç†å¤æ‚åº¦
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 æœåŠ¡æä¾›è€…å¼€å‘æ ¸å¿ƒæµç¨‹


```
æœåŠ¡å¼€å‘äº”æ­¥èµ°ï¼š

1ï¸âƒ£ å®šä¹‰æ¥å£
   â”œâ”€ åˆ›å»ºç‹¬ç«‹APIæ¨¡å—
   â”œâ”€ å®šä¹‰æœåŠ¡æ¥å£
   â””â”€ è®¾è®¡DTOå¯¹è±¡

2ï¸âƒ£ å®ç°æœåŠ¡
   â”œâ”€ ç¼–å†™å®ç°ç±»
   â”œâ”€ å®ç°ä¸šåŠ¡é€»è¾‘
   â””â”€ å¼‚å¸¸å¤„ç†

3ï¸âƒ£ æš´éœ²æœåŠ¡
   â”œâ”€ æ·»åŠ @DubboServiceæ³¨è§£
   â”œâ”€ é…ç½®ç‰ˆæœ¬ã€åˆ†ç»„
   â””â”€ è®¾ç½®è¶…æ—¶ã€é‡è¯•

4ï¸âƒ£ é…ç½®åè®®
   â”œâ”€ é€‰æ‹©åˆé€‚åè®®
   â”œâ”€ é…ç½®ç«¯å£
   â””â”€ è®¾ç½®æ³¨å†Œä¸­å¿ƒ

5ï¸âƒ£ å¯åŠ¨æœåŠ¡
   â”œâ”€ æœåŠ¡å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œ
   â”œâ”€ ç›‘å¬ç«¯å£ç­‰å¾…è°ƒç”¨
   â””â”€ å“åº”æ¶ˆè´¹è€…è¯·æ±‚
```

### 10.2 å…³é”®çŸ¥è¯†ç‚¹é€Ÿè®°


**@DubboServiceæ ¸å¿ƒå‚æ•°**ï¼š

| å‚æ•° | å¿…å¡« | ä½œç”¨ | ç¤ºä¾‹ |
|------|------|------|------|
| `version` | âœ… | ç‰ˆæœ¬å· | `"1.0.0"` |
| `group` | âœ… | åˆ†ç»„å | `"order-group"` |
| `timeout` | â­ | è¶…æ—¶æ—¶é—´ | `3000`ï¼ˆæ¯«ç§’ï¼‰ |
| `retries` | â­ | é‡è¯•æ¬¡æ•° | `2` |
| `protocol` | âš™ï¸ | åè®®ç±»å‹ | `"dubbo"` |

**åè®®é€‰æ‹©å£è¯€**ï¼š

```
JavaæœåŠ¡é€‰dubboï¼Œæ€§èƒ½é«˜æ¥æ•ˆç‡ä¼˜
è·¨è¯­è¨€è°ƒç”¨restï¼ŒHTTPé€šç”¨å…¼å®¹å¥½
é«˜å¹¶å‘ç”¨tripleï¼Œäº‘åŸç”Ÿæœªæ¥è¶‹åŠ¿
æ ¹æ®åœºæ™¯æ¥é€‰æ‹©ï¼Œé€‚åˆæ‰æ˜¯æœ€é‡è¦
```

**ç‰ˆæœ¬åˆ†ç»„é€Ÿè®°**ï¼š

```
ç‰ˆæœ¬å·ï¼šè§£å†³å…¼å®¹é—®é¢˜ï¼Œæ”¯æŒç°åº¦å‘å¸ƒ
åˆ†ç»„åï¼šä¸šåŠ¡åœºæ™¯éš”ç¦»ï¼Œç¯å¢ƒåŒºåˆ†ç®¡ç†

ç‰ˆæœ¬+åˆ†ç»„ç»„åˆä½¿ç”¨ï¼ŒæœåŠ¡æ²»ç†æ›´çµæ´»
```

### 10.3 å¸¸è§é—®é¢˜æ£€æŸ¥æ¸…å•


**å¼€å‘å‰æ£€æŸ¥**ï¼š
- [ ] APIæ¥å£æ˜¯å¦ç‹¬ç«‹ä¸ºæ¨¡å—ï¼Ÿ
- [ ] DTOå¯¹è±¡æ˜¯å¦å¯åºåˆ—åŒ–ï¼Ÿ
- [ ] æ¥å£æ–¹æ³•æ˜¯å¦è¯­ä¹‰æ¸…æ™°ï¼Ÿ
- [ ] æ˜¯å¦è€ƒè™‘äº†å¹‚ç­‰æ€§ï¼Ÿ

**é…ç½®æ£€æŸ¥**ï¼š
- [ ] æ³¨å†Œä¸­å¿ƒåœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] ç«¯å£æ˜¯å¦å’Œå…¶ä»–æœåŠ¡å†²çªï¼Ÿ
- [ ] ç‰ˆæœ¬å·æ˜¯å¦æŒ‰è§„èŒƒå®šä¹‰ï¼Ÿ
- [ ] åˆ†ç»„æ˜¯å¦ç¬¦åˆä¸šåŠ¡éœ€æ±‚ï¼Ÿ

**ä¸Šçº¿å‰æ£€æŸ¥**ï¼š
- [ ] è¶…æ—¶æ—¶é—´æ˜¯å¦åˆç†ï¼Ÿ
- [ ] é‡è¯•æ¬¡æ•°æ˜¯å¦åˆé€‚ï¼Ÿ
- [ ] å¼‚å¸¸å¤„ç†æ˜¯å¦å®Œå–„ï¼Ÿ
- [ ] æ—¥å¿—è®°å½•æ˜¯å¦å……åˆ†ï¼Ÿ

### 10.4 å­¦ä¹ å»ºè®®


**æ–°æ‰‹å­¦ä¹ è·¯å¾„**ï¼š

```
ç¬¬1æ­¥ï¼šæŒæ¡åŸºç¡€æ¦‚å¿µ
   â””â”€ ç†è§£æœåŠ¡æä¾›è€…è§’è‰²å’ŒèŒè´£

ç¬¬2æ­¥ï¼šå®è·µç®€å•æ¡ˆä¾‹
   â””â”€ ç”¨@DubboServiceæš´éœ²ä¸€ä¸ªç®€å•æœåŠ¡

ç¬¬3æ­¥ï¼šå­¦ä¹ é…ç½®å‚æ•°
   â””â”€ ç†Ÿæ‚‰ç‰ˆæœ¬ã€åˆ†ç»„ã€è¶…æ—¶ç­‰é…ç½®

ç¬¬4æ­¥ï¼šç†è§£é«˜çº§ç‰¹æ€§
   â””â”€ åè®®é€‰æ‹©ã€ç«¯å£ç®¡ç†ã€ç°åº¦å‘å¸ƒ

ç¬¬5æ­¥ï¼šå®æˆ˜é¡¹ç›®åº”ç”¨
   â””â”€ åœ¨çœŸå®é¡¹ç›®ä¸­åº”ç”¨æ‰€å­¦çŸ¥è¯†
```

**å®è·µå»ºè®®**ï¼š

```
ğŸ’¡ å…ˆè·‘é€šdemoï¼Œå†æ·±å…¥åŸç†
ğŸ’¡ ä»ç®€å•é…ç½®å¼€å§‹ï¼Œé€æ­¥å¤æ‚åŒ–
ğŸ’¡ å¤šçœ‹å®˜æ–¹æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 
ğŸ’¡ é‡åˆ°é—®é¢˜å–„ç”¨æ—¥å¿—æ’æŸ¥
ğŸ’¡ åŠ å…¥ç¤¾åŒºäº¤æµå­¦ä¹ ç»éªŒ
```

---

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š

```
æ¥å£å®šä¹‰è¦ç‹¬ç«‹ï¼Œå®ç°ç±»ä¸­å†™é€»è¾‘
DubboServiceåšæ ‡è®°ï¼Œç‰ˆæœ¬åˆ†ç»„è¦è®¾ç½®
åè®®ç«¯å£éœ€é…å¥½ï¼Œæ³¨å†Œä¸­å¿ƒè¿æ¥ç‰¢
è¶…æ—¶é‡è¯•è¦åˆç†ï¼Œæ—¥å¿—å¼‚å¸¸å¤„ç†å¥½
ç°åº¦å‘å¸ƒç”¨ç‰ˆæœ¬ï¼Œä¸šåŠ¡éš”ç¦»é åˆ†ç»„
æœåŠ¡æš´éœ²é…ç½®å…¨ï¼Œæä¾›è€…å¼€å‘å°±å®Œæˆ
```