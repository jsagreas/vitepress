---
title: 7ã€Dubboç¬¬ä¸€ä¸ªå…¥é—¨æ¡ˆä¾‹å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [æ¡ˆä¾‹ç›®æ ‡ä¸æ•´ä½“æ€è·¯](#1-æ¡ˆä¾‹ç›®æ ‡ä¸æ•´ä½“æ€è·¯)
2. [Mavené¡¹ç›®ç»“æ„è®¾è®¡](#2-Mavené¡¹ç›®ç»“æ„è®¾è®¡)
3. [æœåŠ¡æ¥å£å®šä¹‰](#3-æœåŠ¡æ¥å£å®šä¹‰)
4. [æœåŠ¡æä¾›è€…å¼€å‘](#4-æœåŠ¡æä¾›è€…å¼€å‘)
5. [æœåŠ¡æ¶ˆè´¹è€…å¼€å‘](#5-æœåŠ¡æ¶ˆè´¹è€…å¼€å‘)
6. [è¿è¡Œä¸è°ƒè¯•æŠ€å·§](#6-è¿è¡Œä¸è°ƒè¯•æŠ€å·§)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ¡ˆä¾‹ç›®æ ‡ä¸æ•´ä½“æ€è·¯


### 1.1 æˆ‘ä»¬è¦åšä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šå°±åƒæ‰“ç”µè¯ä¸€æ ·ï¼Œæˆ‘ä»¬è¦åšä¸€ä¸ª"è¿œç¨‹æœåŠ¡è°ƒç”¨"çš„ä¾‹å­

```
åœºæ™¯ç±»æ¯”ï¼š
å¼ ä¸‰ï¼ˆæ¶ˆè´¹è€…ï¼‰æƒ³çŸ¥é“ä»Šå¤©å¤©æ°”
æå››ï¼ˆæä¾›è€…ï¼‰çŸ¥é“å¤©æ°”ä¿¡æ¯

ä¼ ç»Ÿæ–¹å¼ï¼šå¼ ä¸‰ç›´æ¥é—®æå››
Dubboæ–¹å¼ï¼šå¼ ä¸‰é€šè¿‡"ç”µè¯æ€»æœº"æ‰¾åˆ°æå››é—®å¤©æ°”

å¥½å¤„ï¼š
â€¢ å¼ ä¸‰ä¸éœ€è¦çŸ¥é“æå››åœ¨å“ª
â€¢ æå››æ¢åœ°æ–¹äº†ï¼Œå¼ ä¸‰ä¹Ÿèƒ½æ‰¾åˆ°ä»–
â€¢ å¯ä»¥æœ‰å¤šä¸ªæå››æä¾›å¤©æ°”æœåŠ¡
```

### 1.2 æ¡ˆä¾‹åŠŸèƒ½è¯´æ˜


**æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœ**ï¼š
- ğŸ“¦ **æœåŠ¡æä¾›è€…**ï¼šæä¾›ä¸€ä¸ªæ‰“æ‹›å‘¼çš„æœåŠ¡
- ğŸ“ **æœåŠ¡æ¶ˆè´¹è€…**ï¼šè°ƒç”¨è¿™ä¸ªæœåŠ¡è·å–é—®å€™è¯­
- ğŸ”— **æ³¨å†Œä¸­å¿ƒ**ï¼šè®©æ¶ˆè´¹è€…èƒ½æ‰¾åˆ°æä¾›è€…

**å®Œæ•´æµç¨‹å›¾ç¤º**ï¼š
```
ç¬¬ä¸€æ­¥ï¼šæä¾›è€…å¯åŠ¨
ProvideræœåŠ¡ â†’ æ³¨å†Œåˆ°Zookeeper â†’ "æˆ‘æä¾›æ‰“æ‹›å‘¼æœåŠ¡"

ç¬¬äºŒæ­¥ï¼šæ¶ˆè´¹è€…å¯åŠ¨  
ConsumeræœåŠ¡ â†’ ä»ZookeeperæŸ¥è¯¢ â†’ "è°æä¾›æ‰“æ‹›å‘¼æœåŠ¡?"
                                  â†“
                        æ‰¾åˆ°Providerçš„åœ°å€

ç¬¬ä¸‰æ­¥ï¼šè¿œç¨‹è°ƒç”¨
Consumer â†’ ç›´æ¥è°ƒç”¨Provider â†’ è·å–é—®å€™è¯­ â†’ æ‰“å°ç»“æœ
```

### 1.3 æŠ€æœ¯å‡†å¤‡æ¸…å•


**å¼€å‘å‰ç¡®è®¤**ï¼š
- âœ… JDK 8 æˆ–ä»¥ä¸Šç‰ˆæœ¬
- âœ… Maven 3.6+ï¼ˆç®¡ç†é¡¹ç›®ä¾èµ–ï¼‰
- âœ… Zookeeper å·²å®‰è£…å¹¶å¯åŠ¨ï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰
- âœ… IDEA æˆ– Eclipse å¼€å‘å·¥å…·

---

## 2. ğŸ“ Mavené¡¹ç›®ç»“æ„è®¾è®¡


### 2.1 é¡¹ç›®ç»“æ„è§„åˆ’


**ä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—ï¼Ÿ**

> ğŸ’¡ **æ–°æ‰‹ç†è§£**ï¼šå°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼ŒæŠŠä¸åŒåŠŸèƒ½åˆ†å¼€æ”¾ï¼Œæ–¹ä¾¿ç®¡ç†å’Œå¤ç”¨

```
dubbo-demo/                    # çˆ¶å·¥ç¨‹ï¼ˆæ€»ç®¡ï¼‰
â”œâ”€â”€ dubbo-api/                # æ¥å£æ¨¡å—ï¼ˆçº¦å®šï¼‰
â”‚   â””â”€â”€ æä¾›æœåŠ¡æ¥å£å®šä¹‰
â”œâ”€â”€ dubbo-provider/           # æä¾›è€…æ¨¡å—ï¼ˆå¹²æ´»çš„ï¼‰
â”‚   â””â”€â”€ å®ç°æœåŠ¡æ¥å£
â””â”€â”€ dubbo-consumer/           # æ¶ˆè´¹è€…æ¨¡å—ï¼ˆä½¿ç”¨çš„ï¼‰
    â””â”€â”€ è°ƒç”¨è¿œç¨‹æœåŠ¡
```

**ä¸‰ä¸ªæ¨¡å—çš„å…³ç³»**ï¼š
```
æ¥å£æ¨¡å—(API)
     â†“
æä¾›è€…å®ç°æ¥å£ â† æ¶ˆè´¹è€…è°ƒç”¨æ¥å£
     â†“                â†“
  åœ¨Zookeeperä¸­æ³¨å†Œ    ä»ZookeeperæŸ¥æ‰¾
```

### 2.2 åˆ›å»ºçˆ¶å·¥ç¨‹


**ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMavençˆ¶é¡¹ç›®**

`pom.xml` é…ç½®è¯´æ˜ï¼š
```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>dubbo-demo</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>  <!-- çˆ¶å·¥ç¨‹æ‰“åŒ…æ–¹å¼ -->

    <!-- å£°æ˜å­æ¨¡å— -->
    <modules>
        <module>dubbo-api</module>
        <module>dubbo-provider</module>
        <module>dubbo-consumer</module>
    </modules>

    <!-- ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ -->
    <properties>
        <dubbo.version>2.7.15</dubbo.version>
        <zookeeper.version>3.8.0</zookeeper.version>
    </properties>
</project>
```

**é…ç½®é‡ç‚¹è¯´æ˜**ï¼š
- `packaging=pom`ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸ªçˆ¶å·¥ç¨‹ï¼Œä¸å†™ä»£ç 
- `<modules>`ï¼šç®¡ç†æ‰€æœ‰å­æ¨¡å—
- `<properties>`ï¼šç»Ÿä¸€ç‰ˆæœ¬å·ï¼Œæ–¹ä¾¿å‡çº§

---

## 3. ğŸ“ æœåŠ¡æ¥å£å®šä¹‰


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦æ¥å£æ¨¡å—


**æ¥å£çš„ä½œç”¨ç±»æ¯”**ï¼š

> ğŸ¤ **å°±åƒç­¾åˆåŒ**ï¼š
> - æä¾›è€…è¯´ï¼š"æˆ‘èƒ½æä¾›è¿™äº›æœåŠ¡"
> - æ¶ˆè´¹è€…è¯´ï¼š"æˆ‘è¦ç”¨è¿™äº›æœåŠ¡"
> - æ¥å£å°±æ˜¯åŒæ–¹çš„çº¦å®š

### 3.2 åˆ›å»ºæ¥å£æ¨¡å—


**dubbo-api æ¨¡å—çš„ pom.xml**ï¼š
```xml
<project>
    <parent>
        <groupId>com.example</groupId>
        <artifactId>dubbo-demo</artifactId>
        <version>1.0</version>
    </parent>
    
    <artifactId>dubbo-api</artifactId>
    <packaging>jar</packaging>
    
    <!-- æ¥å£æ¨¡å—ä¸éœ€è¦ä¾èµ–ï¼Œä¿æŒå¹²å‡€ -->
</project>
```

### 3.3 å®šä¹‰æœåŠ¡æ¥å£


**åˆ›å»ºæœåŠ¡æ¥å£**ï¼š`com.example.service.HelloService.java`

```java
package com.example.service;

/**
 * é—®å€™æœåŠ¡æ¥å£
 * è¿™æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…çš„çº¦å®š
 */
public interface HelloService {
    
    /**
     * æ‰“æ‹›å‘¼æ–¹æ³•
     * @param name åå­—
     * @return é—®å€™è¯­
     */
    String sayHello(String name);
}
```

**æ¥å£è®¾è®¡è¦ç‚¹**ï¼š
- âœ… æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼è¦**å¯åºåˆ—åŒ–**
- âœ… æ¥å£è¦**ç®€å•æ˜ç¡®**ï¼Œä¸€ä¸ªæ¥å£åšä¸€ä»¶äº‹
- âœ… ä¸è¦åœ¨æ¥å£æ¨¡å—å†™å®ç°ä»£ç 

---

## 4. ğŸ­ æœåŠ¡æä¾›è€…å¼€å‘


### 4.1 Providerçš„ä½œç”¨


**æä¾›è€…å°±æ˜¯"å¹²æ´»çš„"**ï¼š
```
æ¯”å–»è¯´æ˜ï¼š
æä¾›è€… = é¤å…å¨å¸ˆ
- å®ç°æ¥å£ï¼ˆä¼šåšèœï¼‰
- æ³¨å†ŒæœåŠ¡ï¼ˆå‘Šè¯‰åˆ«äººæˆ‘åœ¨è¿™ï¼‰
- ç­‰å¾…è°ƒç”¨ï¼ˆç­‰å®¢äººç‚¹èœï¼‰
```

### 4.2 æ·»åŠ ä¾èµ–é…ç½®


**dubbo-provider çš„ pom.xml**ï¼š
```xml
<project>
    <parent>
        <groupId>com.example</groupId>
        <artifactId>dubbo-demo</artifactId>
        <version>1.0</version>
    </parent>
    
    <artifactId>dubbo-provider</artifactId>
    
    <dependencies>
        <!-- ä¾èµ–æ¥å£æ¨¡å— -->
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>dubbo-api</artifactId>
            <version>1.0</version>
        </dependency>
        
        <!-- Dubboæ ¸å¿ƒä¾èµ– -->
        <dependency>
            <groupId>org.apache.dubbo</groupId>
            <artifactId>dubbo</artifactId>
            <version>2.7.15</version>
        </dependency>
        
        <!-- Zookeeperå®¢æˆ·ç«¯ -->
        <dependency>
            <groupId>org.apache.curator</groupId>
            <artifactId>curator-framework</artifactId>
            <version>5.1.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.curator</groupId>
            <artifactId>curator-recipes</artifactId>
            <version>5.1.0</version>
        </dependency>
    </dependencies>
</project>
```

### 4.3 å®ç°æœåŠ¡æ¥å£


**åˆ›å»ºæ¥å£å®ç°ç±»**ï¼š`com.example.service.impl.HelloServiceImpl.java`

```java
package com.example.service.impl;

import com.example.service.HelloService;

/**
 * é—®å€™æœåŠ¡çš„å…·ä½“å®ç°
 */
public class HelloServiceImpl implements HelloService {
    
    @Override
    public String sayHello(String name) {
        // ç®€å•çš„ä¸šåŠ¡é€»è¾‘
        return "Hello, " + name + "! æ¬¢è¿ä½¿ç”¨Dubbo!";
    }
}
```

### 4.4 é…ç½®Provider


**åˆ›å»ºDubboé…ç½®æ–‡ä»¶**ï¼š`resources/dubbo-provider.xml`

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:dubbo="http://dubbo.apache.org/schema/dubbo"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://dubbo.apache.org/schema/dubbo
       http://dubbo.apache.org/schema/dubbo/dubbo.xsd">

    <!-- 1. åº”ç”¨åç§°é…ç½® -->
    <dubbo:application name="dubbo-provider"/>

    <!-- 2. æ³¨å†Œä¸­å¿ƒé…ç½® -->
    <dubbo:registry address="zookeeper://127.0.0.1:2181"/>

    <!-- 3. åè®®é…ç½® -->
    <dubbo:protocol name="dubbo" port="20880"/>

    <!-- 4. æœåŠ¡å®ç°bean -->
    <bean id="helloService" class="com.example.service.impl.HelloServiceImpl"/>

    <!-- 5. æš´éœ²æœåŠ¡ -->
    <dubbo:service interface="com.example.service.HelloService" 
                   ref="helloService"/>
</beans>
```

**é…ç½®è¯¦è§£**ï¼š

| é…ç½®é¡¹ | ä½œç”¨è¯´æ˜ | é€šä¿—ç†è§£ |
|--------|----------|----------|
| `dubbo:application` | åº”ç”¨åç§° | ç»™è‡ªå·±èµ·ä¸ªåå­— |
| `dubbo:registry` | æ³¨å†Œä¸­å¿ƒåœ°å€ | Zookeeperçš„ä½ç½® |
| `dubbo:protocol` | é€šä¿¡åè®® | æ€ä¹ˆä¼ è¾“æ•°æ® |
| `dubbo:service` | æš´éœ²çš„æœåŠ¡ | å‘Šè¯‰åˆ«äººæˆ‘èƒ½åšä»€ä¹ˆ |

### 4.5 å¯åŠ¨Provider


**åˆ›å»ºå¯åŠ¨ç±»**ï¼š`com.example.ProviderApplication.java`

```java
package com.example;

import org.springframework.context.support.ClassPathXmlApplicationContext;

public class ProviderApplication {
    
    public static void main(String[] args) throws Exception {
        // åŠ è½½é…ç½®æ–‡ä»¶
        ClassPathXmlApplicationContext context = 
            new ClassPathXmlApplicationContext("dubbo-provider.xml");
        
        // å¯åŠ¨æœåŠ¡
        context.start();
        
        System.out.println("ProvideræœåŠ¡å·²å¯åŠ¨...");
        
        // ä¿æŒè¿è¡Œ
        System.in.read();
    }
}
```

**å¯åŠ¨æµç¨‹è¯´æ˜**ï¼š
```
å¯åŠ¨Provider â†’ åŠ è½½é…ç½® â†’ åˆ›å»ºæœåŠ¡å®ä¾‹ â†’ æ³¨å†Œåˆ°Zookeeper
                                              â†“
                                  ç­‰å¾…æ¶ˆè´¹è€…è°ƒç”¨
```

---

## 5. ğŸ“ æœåŠ¡æ¶ˆè´¹è€…å¼€å‘


### 5.1 Consumerçš„ä½œç”¨


**æ¶ˆè´¹è€…å°±æ˜¯"ä½¿ç”¨æœåŠ¡çš„"**ï¼š
```
æ¯”å–»è¯´æ˜ï¼š
æ¶ˆè´¹è€… = é¤å…é¡¾å®¢
- å¼•ç”¨æ¥å£ï¼ˆçŸ¥é“æœ‰ä»€ä¹ˆèœï¼‰
- æŸ¥æ‰¾æœåŠ¡ï¼ˆæ‰¾åˆ°é¤å…ï¼‰
- è°ƒç”¨æ–¹æ³•ï¼ˆç‚¹èœåƒé¥­ï¼‰
```

### 5.2 æ·»åŠ ä¾èµ–é…ç½®


**dubbo-consumer çš„ pom.xml**ï¼š
```xml
<project>
    <parent>
        <groupId>com.example</groupId>
        <artifactId>dubbo-demo</artifactId>
        <version>1.0</version>
    </parent>
    
    <artifactId>dubbo-consumer</artifactId>
    
    <dependencies>
        <!-- ä¾èµ–æ¥å£æ¨¡å—ï¼ˆå¿…é¡»ï¼‰ -->
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>dubbo-api</artifactId>
            <version>1.0</version>
        </dependency>
        
        <!-- Dubboå’ŒZookeeperä¾èµ–ï¼ˆåŒProviderï¼‰ -->
        <!-- ...çœç•¥ï¼Œä¸Providerç›¸åŒ... -->
    </dependencies>
</project>
```

### 5.3 é…ç½®Consumer


**åˆ›å»ºæ¶ˆè´¹è€…é…ç½®**ï¼š`resources/dubbo-consumer.xml`

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:dubbo="http://dubbo.apache.org/schema/dubbo"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://dubbo.apache.org/schema/dubbo
       http://dubbo.apache.org/schema/dubbo/dubbo.xsd">

    <!-- 1. åº”ç”¨åç§° -->
    <dubbo:application name="dubbo-consumer"/>

    <!-- 2. æ³¨å†Œä¸­å¿ƒï¼ˆåŒProviderï¼‰ -->
    <dubbo:registry address="zookeeper://127.0.0.1:2181"/>

    <!-- 3. å¼•ç”¨è¿œç¨‹æœåŠ¡ -->
    <dubbo:reference id="helloService" 
                     interface="com.example.service.HelloService"/>
</beans>
```

**é…ç½®é‡ç‚¹è¯´æ˜**ï¼š
- `dubbo:reference`ï¼šå¼•ç”¨è¿œç¨‹æœåŠ¡
- `id`ï¼šæœ¬åœ°ä½¿ç”¨çš„beanåç§°
- `interface`ï¼šè¦è°ƒç”¨çš„æœåŠ¡æ¥å£

### 5.4 è°ƒç”¨è¿œç¨‹æœåŠ¡


**åˆ›å»ºæ¶ˆè´¹è€…å¯åŠ¨ç±»**ï¼š`com.example.ConsumerApplication.java`

```java
package com.example;

import com.example.service.HelloService;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class ConsumerApplication {
    
    public static void main(String[] args) {
        // åŠ è½½é…ç½®
        ClassPathXmlApplicationContext context = 
            new ClassPathXmlApplicationContext("dubbo-consumer.xml");
        
        context.start();
        
        // è·å–è¿œç¨‹æœåŠ¡ä»£ç†
        HelloService helloService = context.getBean(HelloService.class);
        
        // è°ƒç”¨è¿œç¨‹æ–¹æ³•ï¼ˆå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ï¼‰
        String result = helloService.sayHello("å¼ ä¸‰");
        
        // æ‰“å°ç»“æœ
        System.out.println("è°ƒç”¨ç»“æœï¼š" + result);
    }
}
```

**è°ƒç”¨è¿‡ç¨‹è§£æ**ï¼š
```
Consumerè°ƒç”¨è¿‡ç¨‹ï¼š

1. è·å–ä»£ç†å¯¹è±¡
   helloService â†’ Dubboä»£ç†å¯¹è±¡ï¼ˆä¸æ˜¯çœŸå®å¯¹è±¡ï¼‰

2. è°ƒç”¨æ–¹æ³•
   sayHello("å¼ ä¸‰") â†’ Dubboæ‹¦æˆªè°ƒç”¨

3. è¿œç¨‹é€šä¿¡
   Dubbo â†’ ä»æ³¨å†Œä¸­å¿ƒæ‰¾Provideråœ°å€
        â†’ å‘é€ç½‘ç»œè¯·æ±‚åˆ°Provider
        â†’ Provideræ‰§è¡Œæ–¹æ³•
        â†’ è¿”å›ç»“æœç»™Consumer

4. è¿”å›ç»“æœ
   Consumeræ”¶åˆ° â†’ "Hello, å¼ ä¸‰! æ¬¢è¿ä½¿ç”¨Dubbo!"
```

---

## 6. ğŸš€ è¿è¡Œä¸è°ƒè¯•æŠ€å·§


### 6.1 å®Œæ•´è¿è¡Œæ­¥éª¤


**è¿è¡Œé¡ºåºå¾ˆé‡è¦**ï¼š

```
ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨Zookeeper
å‘½ä»¤ï¼šzkServer.sh startï¼ˆLinux/Macï¼‰
     zkServer.cmdï¼ˆWindowsï¼‰

ç¬¬äºŒæ­¥ï¼šå¯åŠ¨Provider
è¿è¡Œ ProviderApplication.main()
çœ‹åˆ° "ProvideræœåŠ¡å·²å¯åŠ¨..." è¡¨ç¤ºæˆåŠŸ

ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨Consumer  
è¿è¡Œ ConsumerApplication.main()
çœ‹åˆ° "è°ƒç”¨ç»“æœï¼šHello, å¼ ä¸‰! æ¬¢è¿ä½¿ç”¨Dubbo!" è¡¨ç¤ºæˆåŠŸ
```

### 6.2 éªŒè¯æœåŠ¡æ³¨å†Œ


**æ£€æŸ¥Zookeeperä¸­çš„æ³¨å†Œä¿¡æ¯**ï¼š

```bash
# è¿æ¥Zookeeper
zkCli.sh -server 127.0.0.1:2181

# æŸ¥çœ‹æœåŠ¡æ³¨å†Œ
ls /dubbo/com.example.service.HelloService/providers

# åº”è¯¥èƒ½çœ‹åˆ°Providerçš„åœ°å€ä¿¡æ¯
dubbo://192.168.1.100:20880/com.example.service.HelloService...
```

### 6.3 å¸¸è§é—®é¢˜æ’æŸ¥


**é—®é¢˜1ï¼šè¿æ¥ä¸ä¸ŠZookeeper**
```
æŠ¥é”™ï¼šFailed to connect to zookeeper

è§£å†³æ­¥éª¤ï¼š
âœ“ æ£€æŸ¥Zookeeperæ˜¯å¦å¯åŠ¨ï¼šjps æŸ¥çœ‹è¿›ç¨‹
âœ“ æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®ï¼šé»˜è®¤2181
âœ“ æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ç«¯å£
```

**é—®é¢˜2ï¼šæ‰¾ä¸åˆ°æœåŠ¡æä¾›è€…**
```
æŠ¥é”™ï¼šNo provider available

è§£å†³æ­¥éª¤ï¼š
âœ“ ç¡®è®¤Providerå·²å¯åŠ¨å¹¶æˆåŠŸæ³¨å†Œ
âœ“ æ£€æŸ¥æ¥å£å…¨é™å®šåæ˜¯å¦ä¸€è‡´
âœ“ æŸ¥çœ‹Zookeeperä¸­æ˜¯å¦æœ‰æ³¨å†Œä¿¡æ¯
```

**é—®é¢˜3ï¼šç‰ˆæœ¬ä¸å…¼å®¹**
```
æŠ¥é”™ï¼šSerialization exception

è§£å†³æ­¥éª¤ï¼š
âœ“ ç¡®ä¿Providerå’ŒConsumerçš„æ¥å£ç‰ˆæœ¬ä¸€è‡´
âœ“ æ£€æŸ¥ä¾èµ–çš„jaråŒ…ç‰ˆæœ¬æ˜¯å¦åŒ¹é…
âœ“ æ¸…ç†Mavenç¼“å­˜é‡æ–°ä¸‹è½½ä¾èµ–
```

### 6.4 è°ƒè¯•æŠ€å·§


**å¼€å¯Dubboæ—¥å¿—**ï¼š

åœ¨ `resources` ä¸‹åˆ›å»º `log4j.properties`ï¼š
```properties
log4j.rootLogger=INFO, stdout
log4j.logger.org.apache.dubbo=DEBUG

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n
```

**è§‚å¯Ÿè°ƒç”¨è¿‡ç¨‹**ï¼š
- Providerå¯åŠ¨æ—¶çœ‹åˆ°æœåŠ¡æš´éœ²æ—¥å¿—
- Consumerè°ƒç”¨æ—¶çœ‹åˆ°è¿œç¨‹è°ƒç”¨æ—¥å¿—
- å¯ä»¥çœ‹åˆ°åºåˆ—åŒ–ã€ç½‘ç»œä¼ è¾“ç­‰ç»†èŠ‚

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å…³é”®æ¦‚å¿µå›é¡¾


**ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²**ï¼š
```
ğŸ”¸ æ¥å£æ¨¡å—ï¼ˆAPIï¼‰
   - å®šä¹‰æœåŠ¡å¥‘çº¦
   - æä¾›è€…å’Œæ¶ˆè´¹è€…çš„å…±åŒçº¦å®š
   
ğŸ”¸ æœåŠ¡æä¾›è€…ï¼ˆProviderï¼‰
   - å®ç°æ¥å£
   - æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ
   - ç­‰å¾…è¿œç¨‹è°ƒç”¨
   
ğŸ”¸ æœåŠ¡æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰
   - å¼•ç”¨è¿œç¨‹æœåŠ¡
   - å‘èµ·è¿œç¨‹è°ƒç”¨
   - è·å–è°ƒç”¨ç»“æœ
```

### 7.2 ä¾èµ–å…³ç³»æ€»ç»“


| æ¨¡å— | ä¾èµ–å†…å®¹ | ä½œç”¨ |
|------|----------|------|
| **dubbo-api** | æ— å¤–éƒ¨ä¾èµ– | çº¯æ¥å£å®šä¹‰ |
| **dubbo-provider** | api + dubbo + zk | å®ç°å¹¶æš´éœ²æœåŠ¡ |
| **dubbo-consumer** | api + dubbo + zk | å¼•ç”¨å¹¶è°ƒç”¨æœåŠ¡ |

### 7.3 é…ç½®è¦ç‚¹å¯¹æ¯”


**Provideré…ç½®é‡ç‚¹**ï¼š
```xml
<dubbo:service interface="..." ref="..."/>
è¯´æ˜ï¼šæš´éœ²æœåŠ¡ï¼Œè®©åˆ«äººèƒ½è°ƒç”¨
```

**Consumeré…ç½®é‡ç‚¹**ï¼š
```xml
<dubbo:reference id="..." interface="..."/>
è¯´æ˜ï¼šå¼•ç”¨æœåŠ¡ï¼Œè·å–è¿œç¨‹ä»£ç†
```

### 7.4 è°ƒç”¨æµç¨‹æ€»ç»“


```
å®Œæ•´è°ƒç”¨é“¾è·¯ï¼š

Consumerå‘èµ·è°ƒç”¨
    â†“
Dubboä»£ç†æ‹¦æˆª
    â†“
æŸ¥è¯¢æ³¨å†Œä¸­å¿ƒï¼ˆZookeeperï¼‰
    â†“
è·å–Provideråœ°å€
    â†“
å»ºç«‹ç½‘ç»œè¿æ¥
    â†“
åºåˆ—åŒ–è¯·æ±‚æ•°æ®
    â†“
å‘é€åˆ°Provider
    â†“
Providerååºåˆ—åŒ–
    â†“
æ‰§è¡Œæœ¬åœ°æ–¹æ³•
    â†“
åºåˆ—åŒ–è¿”å›ç»“æœ
    â†“
è¿”å›ç»™Consumer
    â†“
Consumerååºåˆ—åŒ–
    â†“
å¾—åˆ°æœ€ç»ˆç»“æœ
```

### 7.5 æ–°æ‰‹æ³¨æ„äº‹é¡¹


**âš ï¸ å¿…é¡»æ³¨æ„çš„ç‚¹**ï¼š
- Providerå’ŒConsumerè¦ä¾èµ–**åŒä¸€ä¸ª**æ¥å£æ¨¡å—
- å¯åŠ¨é¡ºåºï¼šZookeeper â†’ Provider â†’ Consumer
- æ¥å£ä¿®æ”¹åï¼ŒProviderå’ŒConsumeréƒ½è¦**é‡æ–°ç¼–è¯‘**
- æ³¨å†Œä¸­å¿ƒåœ°å€è¦**ä¿æŒä¸€è‡´**

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**ï¼š
- æ¥å£æ¨¡å—ç‹¬ç«‹ç»´æŠ¤ï¼Œå•ç‹¬å‘ç‰ˆæœ¬
- Providerå…ˆå¯åŠ¨ï¼Œç¡®ä¿æœåŠ¡å¯ç”¨
- å¼€å¯æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜
- ä½¿ç”¨ç»Ÿä¸€çš„çˆ¶pomç®¡ç†ç‰ˆæœ¬

---

## ğŸ“ å­¦ä¹ æ”¶è·


é€šè¿‡è¿™ä¸ªå…¥é—¨æ¡ˆä¾‹ï¼Œä½ åº”è¯¥æŒæ¡ï¼š

âœ… **ç†è§£äº†Dubboçš„åŸºæœ¬å·¥ä½œåŸç†**
- æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶
- è¿œç¨‹è°ƒç”¨çš„å®Œæ•´æµç¨‹

âœ… **æŒæ¡äº†é¡¹ç›®ç»“æ„è®¾è®¡**
- æ¥å£ã€æä¾›è€…ã€æ¶ˆè´¹è€…ä¸‰æ¨¡å—
- Mavenä¾èµ–ç®¡ç†

âœ… **å­¦ä¼šäº†åŸºæœ¬é…ç½®**
- ProvideræœåŠ¡æš´éœ²é…ç½®
- ConsumeræœåŠ¡å¼•ç”¨é…ç½®

âœ… **å…·å¤‡äº†é—®é¢˜æ’æŸ¥èƒ½åŠ›**
- å¸¸è§é”™è¯¯çš„è§£å†³æ–¹æ³•
- æ—¥å¿—æŸ¥çœ‹å’Œè°ƒè¯•æŠ€å·§

**ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘**ï¼š
- æ³¨å†Œä¸­å¿ƒçš„è¯¦ç»†é…ç½®
- å¤šç§é€šä¿¡åè®®é€‰æ‹©
- è´Ÿè½½å‡è¡¡ç­–ç•¥
- æœåŠ¡æ²»ç†åŠŸèƒ½