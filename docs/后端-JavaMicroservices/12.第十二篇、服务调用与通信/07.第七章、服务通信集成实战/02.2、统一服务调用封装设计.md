---
title: 2ã€ç»Ÿä¸€æœåŠ¡è°ƒç”¨å°è£…è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [ç»Ÿä¸€æœåŠ¡è°ƒç”¨å°è£…æ¦‚è¿°](#1-ç»Ÿä¸€æœåŠ¡è°ƒç”¨å°è£…æ¦‚è¿°)
2. [è°ƒç”¨å·¥å…·ç±»è®¾è®¡](#2-è°ƒç”¨å·¥å…·ç±»è®¾è®¡)
3. [é€šç”¨å“åº”ç»“æœå°è£…](#3-é€šç”¨å“åº”ç»“æœå°è£…)
4. [å¼‚å¸¸ç»Ÿä¸€å¤„ç†æœºåˆ¶](#4-å¼‚å¸¸ç»Ÿä¸€å¤„ç†æœºåˆ¶)
5. [è°ƒç”¨æ—¥å¿—ç»Ÿä¸€è®°å½•](#5-è°ƒç”¨æ—¥å¿—ç»Ÿä¸€è®°å½•)
6. [æ€§èƒ½ç›‘æ§é›†æˆ](#6-æ€§èƒ½ç›‘æ§é›†æˆ)
7. [é…ç½®ç»Ÿä¸€ç®¡ç†](#7-é…ç½®ç»Ÿä¸€ç®¡ç†)
8. [æ¥å£ç‰ˆæœ¬ç®¡ç†](#8-æ¥å£ç‰ˆæœ¬ç®¡ç†)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç»Ÿä¸€æœåŠ¡è°ƒç”¨å°è£…æ¦‚è¿°


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å°è£…


**ç°å®é—®é¢˜åœºæ™¯**ï¼š
```
æ²¡æœ‰ç»Ÿä¸€å°è£…çš„å›°å¢ƒï¼š
è®¢å•æœåŠ¡ â†’ åº“å­˜æœåŠ¡  âŒ è‡ªå·±å†™HTTPè°ƒç”¨
è®¢å•æœåŠ¡ â†’ ç”¨æˆ·æœåŠ¡  âŒ è‡ªå·±å†™HTTPè°ƒç”¨
è®¢å•æœåŠ¡ â†’ æ”¯ä»˜æœåŠ¡  âŒ è‡ªå·±å†™HTTPè°ƒç”¨

æ¯ä¸ªæœåŠ¡è°ƒç”¨éƒ½è¦å†™ï¼š
- HTTPè¯·æ±‚æ„å»º
- å‚æ•°åºåˆ—åŒ–
- å¼‚å¸¸å¤„ç†
- é‡è¯•é€»è¾‘
- æ—¥å¿—è®°å½•
â†’ ä»£ç é‡å¤ï¼Œç»´æŠ¤å›°éš¾ï¼
```

**ç»Ÿä¸€å°è£…çš„ä»·å€¼**ï¼š
```
ç»Ÿä¸€å°è£…åï¼š
è®¢å•æœåŠ¡ â”
         â”œâ”€â†’ [ç»Ÿä¸€è°ƒç”¨å·¥å…·] â”€â†’ å…¶ä»–æœåŠ¡
å•†å“æœåŠ¡ â”˜

ä¸€æ¬¡å°è£…ï¼Œå¤„å¤„ä½¿ç”¨ï¼š
âœ… ä»£ç å¤ç”¨ï¼Œå‡å°‘é‡å¤
âœ… ç»Ÿä¸€è§„èŒƒï¼Œæ˜“äºç»´æŠ¤
âœ… é›†ä¸­ç®¡ç†ï¼Œæ–¹ä¾¿å‡çº§
âœ… é—®é¢˜å®šä½ï¼Œå¿«é€Ÿå“åº”
```

### 1.2 ç»Ÿä¸€å°è£…çš„æ ¸å¿ƒç»„æˆ


**å®Œæ•´æ¶æ„å›¾**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸šåŠ¡æœåŠ¡å±‚                       â”‚
â”‚  (è®¢å•ã€å•†å“ã€ç”¨æˆ·ç­‰ä¸šåŠ¡ä»£ç )             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ç»Ÿä¸€æœåŠ¡è°ƒç”¨å°è£…å±‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è°ƒç”¨å·¥å…·ç±»] â†’ ç®€åŒ–è°ƒç”¨ä»£ç                â”‚
â”‚ [å“åº”å°è£…]   â†’ ç»Ÿä¸€è¿”å›æ ¼å¼               â”‚
â”‚ [å¼‚å¸¸å¤„ç†]   â†’ ç»Ÿä¸€é”™è¯¯å¤„ç†               â”‚
â”‚ [æ—¥å¿—è®°å½•]   â†’ è‡ªåŠ¨è®°å½•è°ƒç”¨æ—¥å¿—           â”‚
â”‚ [æ€§èƒ½ç›‘æ§]   â†’ è‡ªåŠ¨é‡‡é›†æ€§èƒ½æŒ‡æ ‡           â”‚
â”‚ [é…ç½®ç®¡ç†]   â†’ é›†ä¸­ç®¡ç†è°ƒç”¨é…ç½®           â”‚
â”‚ [ç‰ˆæœ¬æ§åˆ¶]   â†’ æ”¯æŒæ¥å£ç‰ˆæœ¬ç®¡ç†           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    åº•å±‚é€šä¿¡ç»„ä»¶ (Feign/RestTemplate)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **æ ¸å¿ƒç†å¿µ**ï¼šå°è£…å¤æ‚æ€§ï¼Œæš´éœ²ç®€å•æ€§ã€‚è®©å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒåº•å±‚é€šä¿¡ç»†èŠ‚ã€‚

---

## 2. ğŸ› ï¸ è°ƒç”¨å·¥å…·ç±»è®¾è®¡


### 2.1 è°ƒç”¨å·¥å…·ç±»çš„æœ¬è´¨ä½œç”¨


**ä»€ä¹ˆæ˜¯è°ƒç”¨å·¥å…·ç±»**ï¼š
å°±åƒ"é¥æ§å™¨"ä¸€æ ·ï¼Œä½ ä¸éœ€è¦çŸ¥é“ç”µè§†å†…éƒ¨æ€ä¹ˆå·¥ä½œï¼ŒæŒ‰ä¸€ä¸ªæŒ‰é’®å°±èƒ½æ¢å°ã€‚è°ƒç”¨å·¥å…·ç±»å°±æ˜¯æœåŠ¡é—´é€šä¿¡çš„"é¥æ§å™¨"ï¼Œç®€åŒ–å¤æ‚çš„è¿œç¨‹è°ƒç”¨ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆå¤æ‚ï¼‰ï¼š
æ¯æ¬¡è°ƒç”¨éƒ½è¦å†™ï¼š
1. æ„å»ºURL
2. è®¾ç½®è¯·æ±‚å¤´
3. åºåˆ—åŒ–å‚æ•°
4. å‘é€HTTPè¯·æ±‚
5. å¤„ç†å“åº”
6. å¼‚å¸¸æ•è·
â†’ ä»£ç å†—é•¿ï¼Œå®¹æ˜“å‡ºé”™

å·¥å…·ç±»æ–¹å¼ï¼ˆç®€å•ï¼‰ï¼š
serviceClient.call("æœåŠ¡å", "æ–¹æ³•å", å‚æ•°);
â†’ ä¸€è¡Œä»£ç æå®šï¼
```

### 2.2 åŸºç¡€è°ƒç”¨å·¥å…·ç±»å®ç°


**æ ¸å¿ƒè®¾è®¡æ€è·¯**ï¼š
```java
/**
 * ç»Ÿä¸€æœåŠ¡è°ƒç”¨å·¥å…·ç±»
 * ä½œç”¨ï¼šå°è£…æ‰€æœ‰æœåŠ¡é—´è°ƒç”¨çš„é€šç”¨é€»è¾‘
 */
@Component
public class ServiceCallClient {
    
    @Autowired
    private RestTemplate restTemplate;
    
    /**
     * GETè¯·æ±‚è°ƒç”¨
     * @param serviceName æœåŠ¡åç§°ï¼ˆå¦‚ï¼šuser-serviceï¼‰
     * @param path æ¥å£è·¯å¾„ï¼ˆå¦‚ï¼š/user/infoï¼‰
     * @param params è¯·æ±‚å‚æ•°
     * @return å“åº”ç»“æœ
     */
    public <T> Result<T> get(String serviceName, String path, 
                              Map<String, Object> params, Class<T> responseType) {
        
        // 1. æ„å»ºå®Œæ•´URLï¼šhttp://user-service/user/info
        String url = buildUrl(serviceName, path, params);
        
        // 2. å‘èµ·è°ƒç”¨
        ResponseEntity<Result> response = restTemplate.getForEntity(
            url, Result.class
        );
        
        // 3. è¿”å›ç»“æœ
        return response.getBody();
    }
    
    /**
     * POSTè¯·æ±‚è°ƒç”¨
     */
    public <T> Result<T> post(String serviceName, String path, 
                               Object requestBody, Class<T> responseType) {
        
        String url = buildUrl(serviceName, path, null);
        
        ResponseEntity<Result> response = restTemplate.postForEntity(
            url, requestBody, Result.class
        );
        
        return response.getBody();
    }
    
    // URLæ„å»ºè¾…åŠ©æ–¹æ³•
    private String buildUrl(String serviceName, String path, 
                            Map<String, Object> params) {
        
        StringBuilder url = new StringBuilder("http://")
            .append(serviceName)  // æœåŠ¡å
            .append(path);        // è·¯å¾„
            
        // æ·»åŠ æŸ¥è¯¢å‚æ•°
        if (params != null && !params.isEmpty()) {
            url.append("?");
            params.forEach((k, v) -> 
                url.append(k).append("=").append(v).append("&")
            );
        }
        
        return url.toString();
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”**ï¼š
```java
// âŒ æ²¡æœ‰å·¥å…·ç±»ï¼šä»£ç å¤æ‚
public User getUserInfo(Long userId) {
    String url = "http://user-service/user/info?id=" + userId;
    try {
        ResponseEntity<Result> response = restTemplate.getForEntity(url, Result.class);
        if (response.getBody().getCode() == 200) {
            return (User) response.getBody().getData();
        } else {
            throw new RuntimeException(response.getBody().getMessage());
        }
    } catch (Exception e) {
        log.error("è°ƒç”¨å¤±è´¥", e);
        throw new RuntimeException("æœåŠ¡è°ƒç”¨å¤±è´¥");
    }
}

// âœ… ä½¿ç”¨å·¥å…·ç±»ï¼šç®€æ´æ¸…æ™°
public User getUserInfo(Long userId) {
    Map<String, Object> params = new HashMap<>();
    params.put("id", userId);
    
    Result<User> result = serviceClient.get(
        "user-service",     // æœåŠ¡å
        "/user/info",       // æ¥å£è·¯å¾„  
        params,             // å‚æ•°
        User.class          // è¿”å›ç±»å‹
    );
    
    return result.getData();
}
```

> ğŸ“Œ **é‡ç‚¹ç†è§£**ï¼šå·¥å…·ç±»çš„æ ¸å¿ƒä»·å€¼åœ¨äº**ä»£ç å¤ç”¨**å’Œ**é€»è¾‘ç»Ÿä¸€**ï¼Œä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ä½¿ç”¨ã€‚

### 2.3 è¿›é˜¶ï¼šæ”¯æŒå¤šç§è°ƒç”¨æ–¹å¼


**è®¾è®¡æ€è·¯**ï¼šä¸åŒä¸šåŠ¡åœºæ™¯éœ€è¦ä¸åŒçš„è°ƒç”¨æ–¹å¼

```java
@Component
public class ServiceCallClient {
    
    /**
     * æ–¹å¼1ï¼šåŒæ­¥è°ƒç”¨ï¼ˆé»˜è®¤æ–¹å¼ï¼‰
     * é€‚ç”¨åœºæ™¯ï¼šéœ€è¦ç«‹å³è·å–ç»“æœçš„ä¸šåŠ¡
     */
    public <T> Result<T> syncCall(String serviceName, String path, Object request) {
        // ç›´æ¥è°ƒç”¨ï¼Œç­‰å¾…è¿”å›
        return restTemplate.postForObject(
            buildUrl(serviceName, path), request, Result.class
        );
    }
    
    /**
     * æ–¹å¼2ï¼šå¼‚æ­¥è°ƒç”¨
     * é€‚ç”¨åœºæ™¯ï¼šä¸éœ€è¦ç«‹å³ç»“æœï¼Œæå‡å“åº”é€Ÿåº¦
     */
    @Async
    public CompletableFuture<Result> asyncCall(String serviceName, 
                                                String path, Object request) {
        return CompletableFuture.supplyAsync(() -> {
            return restTemplate.postForObject(
                buildUrl(serviceName, path), request, Result.class
            );
        });
    }
    
    /**
     * æ–¹å¼3ï¼šæ‰¹é‡è°ƒç”¨
     * é€‚ç”¨åœºæ™¯ï¼šä¸€æ¬¡è°ƒç”¨å¤šä¸ªæœåŠ¡ï¼Œæé«˜æ•ˆç‡
     */
    public Map<String, Result> batchCall(List<ServiceRequest> requests) {
        Map<String, Result> results = new HashMap<>();
        
        // å¹¶è¡Œæ‰§è¡Œå¤šä¸ªè°ƒç”¨
        requests.parallelStream().forEach(req -> {
            Result result = syncCall(req.getServiceName(), 
                                    req.getPath(), req.getRequest());
            results.put(req.getServiceName(), result);
        });
        
        return results;
    }
}
```

**å®é™…ä½¿ç”¨åœºæ™¯**ï¼š
```java
// åœºæ™¯1ï¼šä¸‹å•æµç¨‹ - éœ€è¦åŒæ­¥è°ƒç”¨
public void createOrder(OrderDTO order) {
    // åŒæ­¥æ£€æŸ¥åº“å­˜ï¼ˆå¿…é¡»ç­‰ç»“æœï¼‰
    Result<Boolean> stockResult = serviceClient.syncCall(
        "stock-service", "/stock/check", order
    );
    
    if (!stockResult.getData()) {
        throw new BusinessException("åº“å­˜ä¸è¶³");
    }
    
    // ç»§ç»­ä¸‹å•...
}

// åœºæ™¯2ï¼šå‘é€é€šçŸ¥ - å¯ä»¥å¼‚æ­¥è°ƒç”¨
public void notifyUser(Long userId, String message) {
    // å¼‚æ­¥å‘é€é€šçŸ¥ï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰
    serviceClient.asyncCall(
        "notification-service", "/notify", 
        new NotifyRequest(userId, message)
    );
    // ç«‹å³è¿”å›ï¼Œä¸ç­‰é€šçŸ¥ç»“æœ
}

// åœºæ™¯3ï¼šè®¢å•è¯¦æƒ…é¡µ - æ‰¹é‡è°ƒç”¨
public OrderDetail getOrderDetail(Long orderId) {
    List<ServiceRequest> requests = Arrays.asList(
        new ServiceRequest("order-service", "/order/info", orderId),
        new ServiceRequest("user-service", "/user/info", userId),
        new ServiceRequest("product-service", "/product/info", productId)
    );
    
    // ä¸€æ¬¡æ€§è·å–æ‰€æœ‰æ•°æ®
    Map<String, Result> results = serviceClient.batchCall(requests);
    
    // ç»„è£…è¿”å›
    return buildOrderDetail(results);
}
```

---

## 3. ğŸ“¦ é€šç”¨å“åº”ç»“æœå°è£…


### 3.1 ä¸ºä»€ä¹ˆè¦ç»Ÿä¸€å“åº”æ ¼å¼


**é—®é¢˜åœºæ™¯**ï¼š
```
æ²¡æœ‰ç»Ÿä¸€æ ¼å¼çš„æ··ä¹±ï¼š

ç”¨æˆ·æœåŠ¡è¿”å›ï¼š
{ "status": 1, "data": {...}, "msg": "æˆåŠŸ" }

è®¢å•æœåŠ¡è¿”å›ï¼š
{ "code": 200, "result": {...}, "message": "OK" }

åº“å­˜æœåŠ¡è¿”å›ï¼š
{ "success": true, "data": {...}, "error": null }

â†’ æ¯ä¸ªæœåŠ¡æ ¼å¼ä¸åŒï¼Œè°ƒç”¨æ–¹è¦å†™ä¸åŒçš„è§£æä»£ç ï¼
```

**ç»Ÿä¸€æ ¼å¼çš„å¥½å¤„**ï¼š
```
ç»Ÿä¸€åæ‰€æœ‰æœåŠ¡éƒ½è¿”å›ï¼š
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {...},
  "timestamp": 1234567890
}

âœ… æ ¼å¼ä¸€è‡´ï¼Œè§£æä»£ç ç»Ÿä¸€
âœ… å‰ç«¯å¯¹æ¥ç®€å•
âœ… é—®é¢˜æ’æŸ¥æ–¹ä¾¿
âœ… å¯æ‰©å±•æ€§å¼º
```

### 3.2 é€šç”¨å“åº”ç±»è®¾è®¡


**åŸºç¡€å“åº”ç±»**ï¼š
```java
/**
 * ç»Ÿä¸€å“åº”ç»“æœå°è£…
 * æ‰€æœ‰æœåŠ¡æ¥å£éƒ½è¿”å›è¿™ä¸ªæ ¼å¼
 */
@Data
public class Result<T> {
    
    /**
     * å“åº”ç 
     * 200ï¼šæˆåŠŸï¼Œ400ï¼šå‚æ•°é”™è¯¯ï¼Œ500ï¼šç³»ç»Ÿé”™è¯¯...
     */
    private Integer code;
    
    /**
     * å“åº”æ¶ˆæ¯
     * "æ“ä½œæˆåŠŸ"ã€"ç”¨æˆ·ä¸å­˜åœ¨"ã€"ç³»ç»Ÿç¹å¿™"...
     */
    private String message;
    
    /**
     * å“åº”æ•°æ®ï¼ˆæ³›å‹ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼‰
     */
    private T data;
    
    /**
     * æ—¶é—´æˆ³ï¼ˆç”¨äºè¿½è¸ªå’Œè°ƒè¯•ï¼‰
     */
    private Long timestamp;
    
    // ============ å¿«æ·æ„é€ æ–¹æ³• ============
    
    /**
     * æˆåŠŸå“åº”ï¼ˆå¸¦æ•°æ®ï¼‰
     */
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage("æ“ä½œæˆåŠŸ");
        result.setData(data);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    /**
     * æˆåŠŸå“åº”ï¼ˆæ— æ•°æ®ï¼‰
     */
    public static <T> Result<T> success() {
        return success(null);
    }
    
    /**
     * å¤±è´¥å“åº”
     */
    public static <T> Result<T> error(Integer code, String message) {
        Result<T> result = new Result<>();
        result.setCode(code);
        result.setMessage(message);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    /**
     * ä¸šåŠ¡å¤±è´¥ï¼ˆ400ï¼‰
     */
    public static <T> Result<T> fail(String message) {
        return error(400, message);
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    // âœ… æˆåŠŸè¿”å›ç”¨æˆ·ä¿¡æ¯
    @GetMapping("/info")
    public Result<User> getUserInfo(@RequestParam Long id) {
        User user = userService.getById(id);
        return Result.success(user);
    }
    
    // âœ… æˆåŠŸä½†æ— è¿”å›æ•°æ®
    @PostMapping("/logout")
    public Result<Void> logout() {
        // æ‰§è¡Œç™»å‡ºé€»è¾‘
        return Result.success();
    }
    
    // âœ… ä¸šåŠ¡å¤±è´¥
    @PostMapping("/register")
    public Result<Void> register(@RequestBody UserDTO dto) {
        if (userService.existsByUsername(dto.getUsername())) {
            return Result.fail("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        userService.register(dto);
        return Result.success();
    }
}
```

### 3.3 æ‰©å±•ï¼šåˆ†é¡µå“åº”å°è£…


**åˆ†é¡µç»“æœå°è£…**ï¼š
```java
/**
 * åˆ†é¡µå“åº”ç»“æœ
 * ç”¨äºè¿”å›åˆ—è¡¨æ•°æ®
 */
@Data
public class PageResult<T> {
    
    /**
     * æ•°æ®åˆ—è¡¨
     */
    private List<T> list;
    
    /**
     * æ€»è®°å½•æ•°
     */
    private Long total;
    
    /**
     * å½“å‰é¡µç 
     */
    private Integer pageNum;
    
    /**
     * æ¯é¡µå¤§å°
     */
    private Integer pageSize;
    
    /**
     * æ€»é¡µæ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
     */
    public Integer getTotalPages() {
        if (pageSize == null || pageSize == 0) {
            return 0;
        }
        return (int) Math.ceil((double) total / pageSize);
    }
    
    /**
     * æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
     */
    public Boolean hasNext() {
        return pageNum < getTotalPages();
    }
}
```

**ç»“åˆResultä½¿ç”¨**ï¼š
```java
@GetMapping("/list")
public Result<PageResult<User>> getUserList(
    @RequestParam Integer pageNum,
    @RequestParam Integer pageSize) {
    
    // æŸ¥è¯¢åˆ†é¡µæ•°æ®
    PageResult<User> pageResult = userService.getPage(pageNum, pageSize);
    
    // è¿”å›ç»Ÿä¸€æ ¼å¼
    return Result.success(pageResult);
}

// å‰ç«¯æ”¶åˆ°çš„å®Œæ•´å“åº”ï¼š
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "list": [...],
    "total": 100,
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 10,
    "hasNext": true
  },
  "timestamp": 1234567890
}
```

> ğŸ’¡ **è®¾è®¡è¦ç‚¹**ï¼šå“åº”æ ¼å¼è¦**ç®€å•**ã€**æ¸…æ™°**ã€**å¯æ‰©å±•**ï¼Œè®©ä½¿ç”¨è€…ä¸€çœ¼å°±èƒ½ç†è§£ã€‚

---

## 4. âš ï¸ å¼‚å¸¸ç»Ÿä¸€å¤„ç†æœºåˆ¶


### 4.1 å¼‚å¸¸å¤„ç†çš„é‡è¦æ€§


**æ²¡æœ‰ç»Ÿä¸€å¤„ç†çš„åæœ**ï¼š
```
åœºæ™¯ï¼šè°ƒç”¨ç”¨æˆ·æœåŠ¡å¤±è´¥

ä¸å¤„ç†ï¼šç¨‹åºå´©æºƒï¼Œè¿”å›500é”™è¯¯
â†’ ç”¨æˆ·çœ‹åˆ°ä¸€å †ä¹±ç é”™è¯¯ä¿¡æ¯

æ¯æ¬¡æ‰‹åŠ¨å¤„ç†ï¼šä»£ç åˆ°å¤„éƒ½æ˜¯try-catch
â†’ ä»£ç è‡ƒè‚¿ï¼Œç»´æŠ¤å›°éš¾

ç»Ÿä¸€å¤„ç†ï¼šè‡ªåŠ¨æ•è·ï¼Œå‹å¥½æç¤º
â†’ ç”¨æˆ·çœ‹åˆ°"æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•"
```

### 4.2 å…¨å±€å¼‚å¸¸å¤„ç†å™¨


**ç»Ÿä¸€å¼‚å¸¸å¤„ç†è®¾è®¡**ï¼š
```java
/**
 * å…¨å±€å¼‚å¸¸å¤„ç†å™¨
 * è‡ªåŠ¨æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œè½¬æ¢ä¸ºç»Ÿä¸€çš„å“åº”æ ¼å¼
 */
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    /**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     * å¦‚ï¼šç”¨æˆ·ä¸å­˜åœ¨ã€åº“å­˜ä¸è¶³ç­‰ä¸šåŠ¡é€»è¾‘é”™è¯¯
     */
    @ExceptionHandler(BusinessException.class)
    public Result<?> handleBusinessException(BusinessException e) {
        log.warn("ä¸šåŠ¡å¼‚å¸¸ï¼š{}", e.getMessage());
        return Result.fail(e.getMessage());
    }
    
    /**
     * å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸
     * å¦‚ï¼šå‚æ•°ä¸ºç©ºã€æ ¼å¼é”™è¯¯ç­‰
     */
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public Result<?> handleValidException(MethodArgumentNotValidException e) {
        // æå–ç¬¬ä¸€ä¸ªé”™è¯¯ä¿¡æ¯
        String message = e.getBindingResult()
                          .getFieldError()
                          .getDefaultMessage();
        
        log.warn("å‚æ•°æ ¡éªŒå¤±è´¥ï¼š{}", message);
        return Result.error(400, message);
    }
    
    /**
     * å¤„ç†æœåŠ¡è°ƒç”¨å¼‚å¸¸
     * å¦‚ï¼šæœåŠ¡è¶…æ—¶ã€æœåŠ¡ä¸å¯ç”¨ç­‰
     */
    @ExceptionHandler(FeignException.class)
    public Result<?> handleFeignException(FeignException e) {
        log.error("æœåŠ¡è°ƒç”¨å¤±è´¥ï¼š{}", e.getMessage());
        
        // æ ¹æ®çŠ¶æ€ç è¿”å›ä¸åŒæç¤º
        if (e.status() == 404) {
            return Result.error(404, "æœåŠ¡æ¥å£ä¸å­˜åœ¨");
        } else if (e.status() >= 500) {
            return Result.error(500, "æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•");
        }
        
        return Result.error(500, "ç³»ç»Ÿç¹å¿™");
    }
    
    /**
     * å¤„ç†æ‰€æœ‰æœªçŸ¥å¼‚å¸¸ï¼ˆå…œåº•ï¼‰
     */
    @ExceptionHandler(Exception.class)
    public Result<?> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸", e);
        return Result.error(500, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

**è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸**ï¼š
```java
/**
 * ä¸šåŠ¡å¼‚å¸¸ç±»
 * ç”¨äºä¸šåŠ¡é€»è¾‘ä¸­ä¸»åŠ¨æŠ›å‡ºçš„å¼‚å¸¸
 */
public class BusinessException extends RuntimeException {
    
    private Integer code;
    
    public BusinessException(String message) {
        super(message);
        this.code = 400;
    }
    
    public BusinessException(Integer code, String message) {
        super(message);
        this.code = code;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
@Service
public class OrderService {
    
    public void createOrder(OrderDTO dto) {
        // æ£€æŸ¥åº“å­˜
        if (!checkStock(dto.getProductId(), dto.getQuantity())) {
            // ä¸»åŠ¨æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
            throw new BusinessException("åº“å­˜ä¸è¶³ï¼Œä¸‹å•å¤±è´¥");
        }
        
        // ç»§ç»­ä¸šåŠ¡é€»è¾‘...
    }
}
```

### 4.3 æœåŠ¡è°ƒç”¨å¼‚å¸¸å¤„ç†ç­–ç•¥


**é‡è¯•æœºåˆ¶è®¾è®¡**ï¼š
```java
/**
 * æœåŠ¡è°ƒç”¨å¼‚å¸¸å¤„ç†é…ç½®
 */
@Configuration
public class ServiceCallErrorHandler {
    
    /**
     * é…ç½®é‡è¯•ç­–ç•¥
     */
    @Bean
    public Retryer feignRetryer() {
        return new Retryer.Default(
            100,     // åˆå§‹é‡è¯•é—´éš”100ms
            1000,    // æœ€å¤§é‡è¯•é—´éš”1ç§’
            3        // æœ€å¤šé‡è¯•3æ¬¡
        );
    }
    
    /**
     * è‡ªå®šä¹‰é”™è¯¯è§£ç å™¨
     * å°†HTTPé”™è¯¯è½¬æ¢ä¸ºä¸šåŠ¡å¼‚å¸¸
     */
    @Bean
    public ErrorDecoder feignErrorDecoder() {
        return (methodKey, response) -> {
            
            // 404ï¼šæ¥å£ä¸å­˜åœ¨
            if (response.status() == 404) {
                return new BusinessException("æœåŠ¡æ¥å£ä¸å­˜åœ¨");
            }
            
            // 500+ï¼šæœåŠ¡é”™è¯¯
            if (response.status() >= 500) {
                return new BusinessException("æœåŠ¡æš‚æ—¶ä¸å¯ç”¨");
            }
            
            // å…¶ä»–é”™è¯¯
            return new BusinessException("æœåŠ¡è°ƒç”¨å¤±è´¥");
        };
    }
}
```

**é™çº§å¤„ç†**ï¼š
```java
/**
 * ç”¨æˆ·æœåŠ¡è°ƒç”¨æ¥å£
 */
@FeignClient(
    name = "user-service",
    fallback = UserServiceFallback.class  // æŒ‡å®šé™çº§ç±»
)
public interface UserServiceClient {
    
    @GetMapping("/user/info")
    Result<User> getUserInfo(@RequestParam Long id);
}

/**
 * é™çº§å®ç°ç±»
 * å½“æœåŠ¡è°ƒç”¨å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œè¿™é‡Œçš„æ–¹æ³•
 */
@Component
public class UserServiceFallback implements UserServiceClient {
    
    @Override
    public Result<User> getUserInfo(Long id) {
        log.warn("ç”¨æˆ·æœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œæ‰§è¡Œé™çº§é€»è¾‘");
        
        // è¿”å›é»˜è®¤æ•°æ®æˆ–ç¼“å­˜æ•°æ®
        User defaultUser = new User();
        defaultUser.setId(id);
        defaultUser.setUsername("æ¸¸å®¢");
        
        return Result.success(defaultUser);
    }
}
```

> ğŸ“Œ **æ ¸å¿ƒæ€æƒ³**ï¼šå¼‚å¸¸è¦**åˆ†ç±»å¤„ç†**ï¼Œä¸šåŠ¡å¼‚å¸¸å‹å¥½æç¤ºï¼Œç³»ç»Ÿå¼‚å¸¸å…œåº•ä¿æŠ¤ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§ã€‚

---

## 5. ğŸ“ è°ƒç”¨æ—¥å¿—ç»Ÿä¸€è®°å½•


### 5.1 æ—¥å¿—è®°å½•çš„ä»·å€¼


**ä¸ºä»€ä¹ˆè¦è®°å½•è°ƒç”¨æ—¥å¿—**ï¼š
```
é—®é¢˜åœºæ™¯ï¼š
ç”¨æˆ·åé¦ˆï¼š"ä¸‹å•å¤±è´¥äº†ï¼"

æ²¡æœ‰æ—¥å¿—ï¼šæ— ä»æŸ¥èµ·
- è°ƒç”¨äº†å“ªä¸ªæœåŠ¡ï¼Ÿä¸çŸ¥é“
- ä¼ äº†ä»€ä¹ˆå‚æ•°ï¼Ÿä¸çŸ¥é“
- è¿”å›ä»€ä¹ˆç»“æœï¼Ÿä¸çŸ¥é“
- å“ªä¸€æ­¥å‡ºé”™äº†ï¼Ÿä¸çŸ¥é“

æœ‰æ—¥å¿—ï¼šå¿«é€Ÿå®šä½
- æŸ¥çœ‹è°ƒç”¨é“¾è·¯
- æ£€æŸ¥è¯·æ±‚å‚æ•°
- åˆ†æé”™è¯¯åŸå› 
- 5åˆ†é’Ÿè§£å†³é—®é¢˜ï¼
```

### 5.2 AOPå®ç°è°ƒç”¨æ—¥å¿—


**æ—¥å¿—åˆ‡é¢è®¾è®¡**ï¼š
```java
/**
 * æœåŠ¡è°ƒç”¨æ—¥å¿—åˆ‡é¢
 * è‡ªåŠ¨è®°å½•æ‰€æœ‰æœåŠ¡é—´çš„è°ƒç”¨ä¿¡æ¯
 */
@Aspect
@Component
@Slf4j
public class ServiceCallLogAspect {
    
    /**
     * åˆ‡å…¥ç‚¹ï¼šæ‹¦æˆªæ‰€æœ‰Feignå®¢æˆ·ç«¯è°ƒç”¨
     */
    @Pointcut("@within(org.springframework.cloud.openfeign.FeignClient)")
    public void feignClientPointcut() {}
    
    /**
     * ç¯ç»•é€šçŸ¥ï¼šè°ƒç”¨å‰åè®°å½•æ—¥å¿—
     */
    @Around("feignClientPointcut()")
    public Object logServiceCall(ProceedingJoinPoint joinPoint) throws Throwable {
        
        // 1. è®°å½•è°ƒç”¨å¼€å§‹
        String serviceName = getServiceName(joinPoint);
        String methodName = joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();
        
        log.info("===== æœåŠ¡è°ƒç”¨å¼€å§‹ =====");
        log.info("ç›®æ ‡æœåŠ¡ï¼š{}", serviceName);
        log.info("è°ƒç”¨æ–¹æ³•ï¼š{}", methodName);
        log.info("è¯·æ±‚å‚æ•°ï¼š{}", JSON.toJSONString(args));
        
        long startTime = System.currentTimeMillis();
        Object result = null;
        
        try {
            // 2. æ‰§è¡Œå®é™…è°ƒç”¨
            result = joinPoint.proceed();
            
            // 3. è®°å½•è°ƒç”¨æˆåŠŸ
            long costTime = System.currentTimeMillis() - startTime;
            log.info("è°ƒç”¨ç»“æœï¼š{}", JSON.toJSONString(result));
            log.info("è€—æ—¶ï¼š{}ms", costTime);
            log.info("===== æœåŠ¡è°ƒç”¨æˆåŠŸ =====");
            
            return result;
            
        } catch (Exception e) {
            // 4. è®°å½•è°ƒç”¨å¤±è´¥
            long costTime = System.currentTimeMillis() - startTime;
            log.error("===== æœåŠ¡è°ƒç”¨å¤±è´¥ =====");
            log.error("é”™è¯¯ä¿¡æ¯ï¼š{}", e.getMessage());
            log.error("è€—æ—¶ï¼š{}ms", costTime);
            throw e;
        }
    }
    
    // è·å–æœåŠ¡åç§°
    private String getServiceName(ProceedingJoinPoint joinPoint) {
        FeignClient annotation = joinPoint.getTarget()
                                         .getClass()
                                         .getAnnotation(FeignClient.class);
        return annotation != null ? annotation.name() : "unknown";
    }
}
```

**æ—¥å¿—è¾“å‡ºç¤ºä¾‹**ï¼š
```
===== æœåŠ¡è°ƒç”¨å¼€å§‹ =====
ç›®æ ‡æœåŠ¡ï¼šuser-service
è°ƒç”¨æ–¹æ³•ï¼šgetUserInfo
è¯·æ±‚å‚æ•°ï¼š[123]
è°ƒç”¨ç»“æœï¼š{"code":200,"data":{"id":123,"username":"å¼ ä¸‰"},"message":"æˆåŠŸ"}
è€—æ—¶ï¼š45ms
===== æœåŠ¡è°ƒç”¨æˆåŠŸ =====
```

### 5.3 ç»“æ„åŒ–æ—¥å¿—è®¾è®¡


**MDCé“¾è·¯è¿½è¸ª**ï¼š
```java
/**
 * è°ƒç”¨é“¾è·¯è¿½è¸ª
 * é€šè¿‡traceIdä¸²è”æ•´ä¸ªè°ƒç”¨é“¾
 */
@Component
public class TraceIdInterceptor implements RequestInterceptor {
    
    private static final String TRACE_ID = "traceId";
    
    @Override
    public void apply(RequestTemplate template) {
        
        // 1. è·å–æˆ–ç”ŸæˆtraceId
        String traceId = MDC.get(TRACE_ID);
        if (traceId == null) {
            traceId = UUID.randomUUID().toString();
            MDC.put(TRACE_ID, traceId);
        }
        
        // 2. ä¼ é€’åˆ°ä¸‹æ¸¸æœåŠ¡
        template.header(TRACE_ID, traceId);
    }
}

/**
 * åœ¨æ—¥å¿—ä¸­æ‰“å°traceId
 */
@Slf4j
public class ServiceCallLogAspect {
    
    @Around("feignClientPointcut()")
    public Object logServiceCall(ProceedingJoinPoint joinPoint) throws Throwable {
        
        String traceId = MDC.get("traceId");
        
        // æ—¥å¿—è¾“å‡ºåŒ…å«traceId
        log.info("[{}] æœåŠ¡è°ƒç”¨å¼€å§‹ï¼š{}", traceId, methodName);
        
        // ... å…¶ä»–é€»è¾‘
    }
}
```

**å®Œæ•´è°ƒç”¨é“¾è·¯ç¤ºä¾‹**ï¼š
```
[trace-001] è®¢å•æœåŠ¡ï¼šæ¥æ”¶åˆ›å»ºè®¢å•è¯·æ±‚
[trace-001] è®¢å•æœåŠ¡ï¼šè°ƒç”¨åº“å­˜æœåŠ¡æ£€æŸ¥åº“å­˜
[trace-001] åº“å­˜æœåŠ¡ï¼šæ£€æŸ¥å•†å“123åº“å­˜ï¼Œå‰©ä½™50ä»¶
[trace-001] è®¢å•æœåŠ¡ï¼šè°ƒç”¨ç”¨æˆ·æœåŠ¡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
[trace-001] ç”¨æˆ·æœåŠ¡ï¼šæŸ¥è¯¢ç”¨æˆ·456ä¿¡æ¯æˆåŠŸ
[trace-001] è®¢å•æœåŠ¡ï¼šè®¢å•åˆ›å»ºæˆåŠŸ

â†’ é€šè¿‡traceIdå¯ä»¥å®Œæ•´è¿½è¸ªæ•´ä¸ªè°ƒç”¨é“¾è·¯ï¼
```

---

## 6. ğŸ“Š æ€§èƒ½ç›‘æ§é›†æˆ


### 6.1 ç›‘æ§æŒ‡æ ‡è®¾è®¡


**æ ¸å¿ƒç›‘æ§æŒ‡æ ‡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       æœåŠ¡è°ƒç”¨æ€§èƒ½ç›‘æ§            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ å“åº”æ—¶é—´                       â”‚
â”‚    - å¹³å‡å“åº”æ—¶é—´                 â”‚
â”‚    - æœ€å¤§å“åº”æ—¶é—´                 â”‚
â”‚    - P95/P99å“åº”æ—¶é—´              â”‚
â”‚                                  â”‚
â”‚ ğŸ”¢ è°ƒç”¨ç»Ÿè®¡                       â”‚
â”‚    - æ€»è°ƒç”¨æ¬¡æ•°                   â”‚
â”‚    - æˆåŠŸæ¬¡æ•°/å¤±è´¥æ¬¡æ•°            â”‚
â”‚    - æˆåŠŸç‡                       â”‚
â”‚                                  â”‚
â”‚ âš ï¸ å¼‚å¸¸ç»Ÿè®¡                       â”‚
â”‚    - è¶…æ—¶æ¬¡æ•°                     â”‚
â”‚    - å¼‚å¸¸ç±»å‹åˆ†å¸ƒ                 â”‚
â”‚    - é™çº§è§¦å‘æ¬¡æ•°                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Micrometeré›†æˆå®ç°


**ç›‘æ§åŸ‹ç‚¹**ï¼š
```java
/**
 * æœåŠ¡è°ƒç”¨æ€§èƒ½ç›‘æ§
 */
@Aspect
@Component
public class ServiceCallMetricsAspect {
    
    @Autowired
    private MeterRegistry meterRegistry;
    
    @Around("feignClientPointcut()")
    public Object recordMetrics(ProceedingJoinPoint joinPoint) throws Throwable {
        
        String serviceName = getServiceName(joinPoint);
        String methodName = joinPoint.getSignature().getName();
        
        // åˆ›å»ºè®¡æ—¶å™¨
        Timer.Sample sample = Timer.start(meterRegistry);
        
        try {
            Object result = joinPoint.proceed();
            
            // è®°å½•æˆåŠŸè°ƒç”¨
            sample.stop(Timer.builder("service.call")
                .tag("service", serviceName)
                .tag("method", methodName)
                .tag("status", "success")
                .register(meterRegistry));
            
            // å¢åŠ æˆåŠŸè®¡æ•°
            Counter.builder("service.call.count")
                .tag("service", serviceName)
                .tag("status", "success")
                .register(meterRegistry)
                .increment();
            
            return result;
            
        } catch (Exception e) {
            // è®°å½•å¤±è´¥è°ƒç”¨
            sample.stop(Timer.builder("service.call")
                .tag("service", serviceName)
                .tag("method", methodName)
                .tag("status", "failure")
                .register(meterRegistry));
            
            // å¢åŠ å¤±è´¥è®¡æ•°
            Counter.builder("service.call.count")
                .tag("service", serviceName)
                .tag("status", "failure")
                .register(meterRegistry)
                .increment();
            
            throw e;
        }
    }
}
```

**ç›‘æ§æ•°æ®æŸ¥è¯¢**ï¼š
```java
/**
 * ç›‘æ§æ•°æ®æŸ¥è¯¢æ¥å£
 */
@RestController
@RequestMapping("/metrics")
public class MetricsController {
    
    @Autowired
    private MeterRegistry meterRegistry;
    
    /**
     * æŸ¥è¯¢æœåŠ¡è°ƒç”¨ç»Ÿè®¡
     */
    @GetMapping("/service-call")
    public Map<String, Object> getServiceCallMetrics(
        @RequestParam String serviceName) {
        
        Map<String, Object> metrics = new HashMap<>();
        
        // æŸ¥è¯¢æ€»è°ƒç”¨æ¬¡æ•°
        double totalCount = meterRegistry
            .get("service.call.count")
            .tag("service", serviceName)
            .counters()
            .stream()
            .mapToDouble(Counter::count)
            .sum();
        
        // æŸ¥è¯¢æˆåŠŸæ¬¡æ•°
        double successCount = meterRegistry
            .get("service.call.count")
            .tag("service", serviceName)
            .tag("status", "success")
            .counter()
            .count();
        
        // æŸ¥è¯¢å¹³å‡å“åº”æ—¶é—´
        double avgTime = meterRegistry
            .get("service.call")
            .tag("service", serviceName)
            .timer()
            .mean(TimeUnit.MILLISECONDS);
        
        metrics.put("totalCount", totalCount);
        metrics.put("successCount", successCount);
        metrics.put("successRate", successCount / totalCount * 100);
        metrics.put("avgResponseTime", avgTime);
        
        return metrics;
    }
}
```

**å®é™…ç›‘æ§æ•°æ®ç¤ºä¾‹**ï¼š
```json
{
  "serviceName": "user-service",
  "totalCount": 10000,
  "successCount": 9850,
  "successRate": 98.5,
  "avgResponseTime": 45.2,
  "maxResponseTime": 1200,
  "p95ResponseTime": 120,
  "p99ResponseTime": 500
}
```

> ğŸ’¡ **ç›‘æ§è¦ç‚¹**ï¼šç›‘æ§æ•°æ®è¦**å®æ—¶é‡‡é›†**ã€**å‡†ç¡®ç»Ÿè®¡**ã€**å¯è§†åŒ–å±•ç¤º**ï¼Œå¸®åŠ©å¿«é€Ÿå‘ç°å’Œå®šä½é—®é¢˜ã€‚

---

## 7. âš™ï¸ é…ç½®ç»Ÿä¸€ç®¡ç†


### 7.1 é…ç½®ç®¡ç†çš„å¿…è¦æ€§


**é…ç½®åˆ†æ•£çš„é—®é¢˜**ï¼š
```
æ²¡æœ‰ç»Ÿä¸€ç®¡ç†ï¼š

è®¢å•æœåŠ¡é…ç½®æ–‡ä»¶ï¼š
feign.client.config.user-service.connectTimeout=2000
feign.client.config.user-service.readTimeout=5000

å•†å“æœåŠ¡é…ç½®æ–‡ä»¶ï¼š
feign.client.config.user-service.connectTimeout=3000  â† é…ç½®ä¸ä¸€è‡´
feign.client.config.user-service.readTimeout=4000     â† é…ç½®ä¸ä¸€è‡´

é—®é¢˜ï¼š
âŒ é…ç½®åˆ†æ•£åœ¨å„ä¸ªæœåŠ¡
âŒ ä¿®æ”¹éœ€è¦é‡å¯æœåŠ¡
âŒ å®¹æ˜“å‡ºç°ä¸ä¸€è‡´
âŒ ç»´æŠ¤æˆæœ¬é«˜
```

### 7.2 é…ç½®ä¸­å¿ƒé›†æˆ


**Nacosé…ç½®ä¸­å¿ƒ**ï¼š
```yaml
# Nacosé…ç½®ä¸­å¿ƒï¼šservice-call-common.yaml
# æ‰€æœ‰æœåŠ¡å…±äº«çš„è°ƒç”¨é…ç½®

# é€šç”¨è¶…æ—¶é…ç½®
feign:
  client:
    config:
      default:  # é»˜è®¤é…ç½®ï¼Œæ‰€æœ‰æœåŠ¡ç”Ÿæ•ˆ
        connectTimeout: 2000    # è¿æ¥è¶…æ—¶2ç§’
        readTimeout: 5000       # è¯»å–è¶…æ—¶5ç§’
        
# ç‰¹å®šæœåŠ¡é…ç½®ï¼ˆè¦†ç›–é»˜è®¤é…ç½®ï¼‰
  client:
    config:
      user-service:
        connectTimeout: 1000    # ç”¨æˆ·æœåŠ¡è¿æ¥è¶…æ—¶1ç§’
        readTimeout: 3000       # è¯»å–è¶…æ—¶3ç§’
      
      order-service:
        connectTimeout: 2000
        readTimeout: 10000      # è®¢å•æœåŠ¡è¯»å–è¶…æ—¶10ç§’

# é‡è¯•é…ç½®
resilience4j:
  retry:
    instances:
      serviceCall:
        maxAttempts: 3          # æœ€å¤šé‡è¯•3æ¬¡
        waitDuration: 500ms     # é‡è¯•é—´éš”500ms
```

**åŠ¨æ€é…ç½®è¯»å–**ï¼š
```java
/**
 * æœåŠ¡è°ƒç”¨é…ç½®ç±»
 * ä»NacosåŠ¨æ€è¯»å–é…ç½®
 */
@Configuration
@RefreshScope  // æ”¯æŒé…ç½®åŠ¨æ€åˆ·æ–°
public class ServiceCallConfig {
    
    @Value("${feign.client.config.default.connectTimeout:2000}")
    private Integer defaultConnectTimeout;
    
    @Value("${feign.client.config.default.readTimeout:5000}")
    private Integer defaultReadTimeout;
    
    /**
     * é…ç½®Feignå®¢æˆ·ç«¯
     */
    @Bean
    public Request.Options feignOptions() {
        return new Request.Options(
            defaultConnectTimeout, 
            TimeUnit.MILLISECONDS,
            defaultReadTimeout, 
            TimeUnit.MILLISECONDS,
            true
        );
    }
}
```

### 7.3 é…ç½®ä¼˜å…ˆçº§è®¾è®¡


**é…ç½®åŠ è½½é¡ºåº**ï¼š
```
é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

1ï¸âƒ£ ä»£ç ä¸­ç¡¬ç¼–ç é…ç½®ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
   â†“
2ï¸âƒ£ å¯åŠ¨å‚æ•°é…ç½®
   -Dfeign.client.config.default.connectTimeout=3000
   â†“
3ï¸âƒ£ ç¯å¢ƒå˜é‡é…ç½®
   FEIGN_CLIENT_CONFIG_DEFAULT_CONNECTTIMEOUT=3000
   â†“
4ï¸âƒ£ Nacosé…ç½®ä¸­å¿ƒï¼ˆæ¨èä½¿ç”¨ï¼‰
   feign.client.config.default.connectTimeout=2000
   â†“
5ï¸âƒ£ æœ¬åœ°é…ç½®æ–‡ä»¶
   application.ymlä¸­çš„é…ç½®

å»ºè®®ï¼š
âœ… é»˜è®¤é…ç½®æ”¾åœ¨Nacos
âœ… ç‰¹æ®Šç¯å¢ƒé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–
âœ… ç´§æ€¥æƒ…å†µé€šè¿‡å¯åŠ¨å‚æ•°è°ƒæ•´
```

**é…ç½®ç¤ºä¾‹è¡¨**ï¼š

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|--------|--------|------|----------|
| `connectTimeout` | 2000ms | è¿æ¥è¶…æ—¶æ—¶é—´ | å¿«é€Ÿå¤±è´¥ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾… |
| `readTimeout` | 5000ms | è¯»å–è¶…æ—¶æ—¶é—´ | æ ¹æ®æ¥å£å“åº”æ—¶é—´è°ƒæ•´ |
| `maxAttempts` | 3æ¬¡ | æœ€å¤§é‡è¯•æ¬¡æ•° | ç½‘ç»œä¸ç¨³å®šæ—¶å¢åŠ é‡è¯• |
| `logLevel` | BASIC | æ—¥å¿—çº§åˆ« | DEBUGç”¨äºæ’æŸ¥é—®é¢˜ |
| `circuitBreakerEnabled` | true | ç†”æ–­å™¨å¼€å…³ | ä¿æŠ¤ä¸‹æ¸¸æœåŠ¡ä¸è¢«å‹å® |

---

## 8. ğŸ”„ æ¥å£ç‰ˆæœ¬ç®¡ç†


### 8.1 ç‰ˆæœ¬ç®¡ç†çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬ç®¡ç†**ï¼š
```
åœºæ™¯ï¼šç”¨æˆ·æœåŠ¡æ¥å£å‡çº§

æ—§ç‰ˆæœ¬ï¼š/user/info â†’ è¿”å›åŸºç¡€ä¿¡æ¯
æ–°ç‰ˆæœ¬ï¼š/user/info â†’ è¿”å›è¯¦ç»†ä¿¡æ¯+æƒé™

é—®é¢˜ï¼š
âŒ ç›´æ¥ä¿®æ”¹æ¥å£ï¼Œè€ç‰ˆæœ¬è°ƒç”¨è€…æŠ¥é”™
âŒ æ‰€æœ‰æœåŠ¡å¿…é¡»åŒæ—¶å‡çº§ï¼Œé£é™©å¤§
âŒ æ— æ³•ç°åº¦å‘å¸ƒï¼Œä¸€ä¸Šçº¿å°±å…¨é‡

è§£å†³ï¼š
âœ… V1: /v1/user/infoï¼ˆè€æ¥å£ä¿ç•™ï¼‰
âœ… V2: /v2/user/infoï¼ˆæ–°æ¥å£ï¼‰
âœ… é€æ­¥è¿ç§»ï¼Œå¹³æ»‘å‡çº§
```

### 8.2 URLç‰ˆæœ¬ç®¡ç†


**è·¯å¾„ç‰ˆæœ¬å·æ–¹æ¡ˆ**ï¼š
```java
/**
 * V1ç‰ˆæœ¬ï¼šç”¨æˆ·æœåŠ¡å®¢æˆ·ç«¯
 */
@FeignClient(name = "user-service", path = "/v1")
public interface UserServiceClientV1 {
    
    @GetMapping("/user/info")
    Result<UserBasicInfo> getUserInfo(@RequestParam Long id);
}

/**
 * V2ç‰ˆæœ¬ï¼šç”¨æˆ·æœåŠ¡å®¢æˆ·ç«¯
 */
@FeignClient(name = "user-service", path = "/v2")
public interface UserServiceClientV2 {
    
    @GetMapping("/user/info")
    Result<UserDetailInfo> getUserInfo(@RequestParam Long id);
}

/**
 * æœåŠ¡æä¾›æ–¹ï¼šåŒæ—¶æ”¯æŒä¸¤ä¸ªç‰ˆæœ¬
 */
@RestController
public class UserController {
    
    // V1ç‰ˆæœ¬æ¥å£
    @GetMapping("/v1/user/info")
    public Result<UserBasicInfo> getUserInfoV1(@RequestParam Long id) {
        // è¿”å›åŸºç¡€ä¿¡æ¯
        return Result.success(userService.getBasicInfo(id));
    }
    
    // V2ç‰ˆæœ¬æ¥å£
    @GetMapping("/v2/user/info")
    public Result<UserDetailInfo> getUserInfoV2(@RequestParam Long id) {
        // è¿”å›è¯¦ç»†ä¿¡æ¯
        return Result.success(userService.getDetailInfo(id));
    }
}
```

**ä½¿ç”¨ä¸åŒç‰ˆæœ¬**ï¼š
```java
@Service
public class OrderService {
    
    @Autowired
    private UserServiceClientV1 userClientV1;  // è€ç‰ˆæœ¬
    
    @Autowired
    private UserServiceClientV2 userClientV2;  // æ–°ç‰ˆæœ¬
    
    /**
     * æ—§ä¸šåŠ¡ä½¿ç”¨V1
     */
    public void oldBusiness() {
        UserBasicInfo user = userClientV1.getUserInfo(123L).getData();
        // ä½¿ç”¨åŸºç¡€ä¿¡æ¯...
    }
    
    /**
     * æ–°ä¸šåŠ¡ä½¿ç”¨V2
     */
    public void newBusiness() {
        UserDetailInfo user = userClientV2.getUserInfo(123L).getData();
        // ä½¿ç”¨è¯¦ç»†ä¿¡æ¯...
    }
}
```

### 8.3 Headerç‰ˆæœ¬ç®¡ç†


**è¯·æ±‚å¤´ç‰ˆæœ¬æ§åˆ¶**ï¼š
```java
/**
 * ç‰ˆæœ¬æ§åˆ¶æ‹¦æˆªå™¨
 */
@Component
public class VersionInterceptor implements RequestInterceptor {
    
    @Override
    public void apply(RequestTemplate template) {
        
        // ä»ä¸Šä¸‹æ–‡è·å–ç‰ˆæœ¬å·
        String version = VersionContext.getVersion();
        
        if (version != null) {
            // æ·»åŠ ç‰ˆæœ¬è¯·æ±‚å¤´
            template.header("API-Version", version);
        }
    }
}

/**
 * ç‰ˆæœ¬ä¸Šä¸‹æ–‡ï¼ˆçº¿ç¨‹å˜é‡ï¼‰
 */
public class VersionContext {
    
    private static ThreadLocal<String> version = new ThreadLocal<>();
    
    public static void setVersion(String ver) {
        version.set(ver);
    }
    
    public static String getVersion() {
        return version.get();
    }
    
    public static void clear() {
        version.remove();
    }
}
```

**æœåŠ¡æä¾›æ–¹ç‰ˆæœ¬è·¯ç”±**ï¼š
```java
@RestController
public class UserController {
    
    @Autowired
    private UserServiceV1 userServiceV1;
    
    @Autowired
    private UserServiceV2 userServiceV2;
    
    /**
     * æ ¹æ®ç‰ˆæœ¬å·è·¯ç”±åˆ°ä¸åŒå®ç°
     */
    @GetMapping("/user/info")
    public Result<?> getUserInfo(
        @RequestHeader(value = "API-Version", defaultValue = "v1") String version,
        @RequestParam Long id) {
        
        if ("v2".equals(version)) {
            return Result.success(userServiceV2.getUserInfo(id));
        }
        
        // é»˜è®¤ä½¿ç”¨V1
        return Result.success(userServiceV1.getUserInfo(id));
    }
}
```

### 8.4 ç‰ˆæœ¬è¿ç§»ç­–ç•¥


**ç°åº¦å‘å¸ƒæ–¹æ¡ˆ**ï¼š
```java
/**
 * ç‰ˆæœ¬ç°åº¦æ§åˆ¶
 */
@Service
public class VersionGrayService {
    
    /**
     * åˆ¤æ–­æ˜¯å¦ä½¿ç”¨æ–°ç‰ˆæœ¬
     */
    public boolean useNewVersion(Long userId) {
        
        // ç­–ç•¥1ï¼šæŒ‰ç”¨æˆ·IDç°åº¦ï¼ˆå¦‚ï¼šå°¾å·ä¸º0çš„ç”¨æˆ·ï¼‰
        if (userId % 10 == 0) {
            return true;
        }
        
        // ç­–ç•¥2ï¼šæŒ‰ç™¾åˆ†æ¯”ç°åº¦ï¼ˆå¦‚ï¼š10%æµé‡ï¼‰
        if (Math.random() < 0.1) {
            return true;
        }
        
        // ç­–ç•¥3ï¼šç™½åå•ç”¨æˆ·
        if (isInWhitelist(userId)) {
            return true;
        }
        
        return false;  // é»˜è®¤ä½¿ç”¨æ—§ç‰ˆæœ¬
    }
}

/**
 * è°ƒç”¨æ—¶åŠ¨æ€é€‰æ‹©ç‰ˆæœ¬
 */
@Service
public class OrderService {
    
    @Autowired
    private VersionGrayService versionGrayService;
    
    @Autowired
    private UserServiceClientV1 userClientV1;
    
    @Autowired
    private UserServiceClientV2 userClientV2;
    
    public void createOrder(Long userId) {
        
        // æ ¹æ®ç°åº¦ç­–ç•¥é€‰æ‹©ç‰ˆæœ¬
        if (versionGrayService.useNewVersion(userId)) {
            // ä½¿ç”¨æ–°ç‰ˆæœ¬
            UserDetailInfo user = userClientV2.getUserInfo(userId).getData();
        } else {
            // ä½¿ç”¨æ—§ç‰ˆæœ¬
            UserBasicInfo user = userClientV1.getUserInfo(userId).getData();
        }
    }
}
```

**ç‰ˆæœ¬åºŸå¼ƒè®¡åˆ’**ï¼š
```
ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š

V1.0 å‘å¸ƒ â”€â”€â”€â”€â†’ ç¨³å®šè¿è¡Œ â”€â”€â”€â”€â†’ å¼€å§‹è¿ç§» â”€â”€â”€â”€â†’ æ ‡è®°åºŸå¼ƒ â”€â”€â”€â”€â†’ ä¸‹çº¿
         (3ä¸ªæœˆ)       (2ä¸ªæœˆ)       (1ä¸ªæœˆ)       (ä¸‹çº¿)
                          â†“
                       V2.0 å‘å¸ƒ

è¿ç§»æ­¥éª¤ï¼š
1ï¸âƒ£ V2.0å‘å¸ƒï¼ŒV1.0æ­£å¸¸è¿è¡Œï¼ˆåŒç‰ˆæœ¬å¹¶å­˜ï¼‰
2ï¸âƒ£ æ–°ä¸šåŠ¡ä½¿ç”¨V2.0ï¼Œæ—§ä¸šåŠ¡ç»§ç»­V1.0
3ï¸âƒ£ ç°åº¦è¿ç§»æ—§ä¸šåŠ¡åˆ°V2.0
4ï¸âƒ£ ç›‘æ§V1.0è°ƒç”¨é‡ï¼Œé™åˆ°0åæ ‡è®°åºŸå¼ƒ
5ï¸âƒ£ åºŸå¼ƒæœŸ1ä¸ªæœˆåæ­£å¼ä¸‹çº¿V1.0
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç»Ÿä¸€å°è£…ä»·å€¼ï¼šä»£ç å¤ç”¨ã€é€»è¾‘ç»Ÿä¸€ã€ç»´æŠ¤ç®€å•
ğŸ”¸ è°ƒç”¨å·¥å…·ç±»ï¼šç®€åŒ–è°ƒç”¨ä»£ç ï¼Œæ”¯æŒå¤šç§è°ƒç”¨æ–¹å¼
ğŸ”¸ å“åº”ç»“æœå°è£…ï¼šç»Ÿä¸€è¿”å›æ ¼å¼ï¼Œä¾¿äºå¤„ç†å’Œå¯¹æ¥
ğŸ”¸ å¼‚å¸¸ç»Ÿä¸€å¤„ç†ï¼šåˆ†ç±»å¤„ç†å¼‚å¸¸ï¼Œä¿éšœç³»ç»Ÿç¨³å®šæ€§
ğŸ”¸ æ—¥å¿—ç»Ÿä¸€è®°å½•ï¼šé“¾è·¯è¿½è¸ªï¼Œå¿«é€Ÿå®šä½é—®é¢˜
ğŸ”¸ æ€§èƒ½ç›‘æ§ï¼šå®æ—¶é‡‡é›†æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
ğŸ”¸ é…ç½®ç»Ÿä¸€ç®¡ç†ï¼šé›†ä¸­ç®¡ç†ï¼ŒåŠ¨æ€åˆ·æ–°
ğŸ”¸ ç‰ˆæœ¬ç®¡ç†ï¼šå¹³æ»‘å‡çº§ï¼Œç°åº¦å‘å¸ƒ
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç»Ÿä¸€å°è£…çš„æœ¬è´¨**
```
å°±åƒ"å·¥å…·ç®±"ï¼š
- ä¸ç”¨æ¯æ¬¡éƒ½é€ å·¥å…·ï¼ˆä»£ç å¤ç”¨ï¼‰
- å·¥å…·ç»Ÿä¸€è§„èŒƒï¼ˆæ ‡å‡†ä¸€è‡´ï¼‰
- å·¥å…·å‡çº§æ–¹ä¾¿ï¼ˆé›†ä¸­ç»´æŠ¤ï¼‰
- é—®é¢˜å¿«é€Ÿå®šä½ï¼ˆæ—¥å¿—ç›‘æ§ï¼‰

è®°ä½ï¼šå°è£…å¤æ‚æ€§ï¼Œæš´éœ²ç®€å•æ€§
```

**ğŸ”¹ å“åº”æ ¼å¼ç»Ÿä¸€çš„é‡è¦æ€§**
```
ç»Ÿä¸€æ ¼å¼ = ç»Ÿä¸€è¯­è¨€
- å‰ç«¯åªéœ€è¦ä¸€å¥—è§£æé€»è¾‘
- åç«¯åªéœ€è¦ä¸€å¥—è¿”å›è§„èŒƒ
- é—®é¢˜æ’æŸ¥æœ‰æ ‡å‡†å‚è€ƒ
- ç³»ç»Ÿå¯¹æ¥æ›´å®¹æ˜“
```

**ğŸ”¹ å¼‚å¸¸å¤„ç†çš„å±‚æ¬¡**
```
ä¸‰å±‚é˜²æŠ¤ï¼š
1ï¸âƒ£ ä¸šåŠ¡å¼‚å¸¸ï¼šé¢„æœŸå†…é”™è¯¯ï¼Œå‹å¥½æç¤º
2ï¸âƒ£ ç³»ç»Ÿå¼‚å¸¸ï¼šé¢„æœŸå¤–é”™è¯¯ï¼Œé™çº§ä¿æŠ¤
3ï¸âƒ£ å…œåº•å¤„ç†ï¼šæœªçŸ¥é”™è¯¯ï¼Œé€šç”¨æç¤º

è®°ä½ï¼šæ°¸è¿œä¸è¦è®©ç”¨æˆ·çœ‹åˆ°500é”™è¯¯å †æ ˆï¼
```

### 9.3 å®æˆ˜åº”ç”¨å»ºè®®


**æ¶æ„è®¾è®¡å»ºè®®**ï¼š
```
âœ… è°ƒç”¨å·¥å…·ç±»ï¼šå°è£…åœ¨commonæ¨¡å—ï¼Œæ‰€æœ‰æœåŠ¡å…±ç”¨
âœ… å“åº”ç±»ï¼šå®šä¹‰åœ¨apiæ¨¡å—ï¼Œä¿è¯æ ¼å¼ç»Ÿä¸€
âœ… å¼‚å¸¸å¤„ç†ï¼šå…¨å±€å¤„ç†å™¨+è‡ªå®šä¹‰å¼‚å¸¸ä½“ç³»
âœ… æ—¥å¿—è®°å½•ï¼šAOPåˆ‡é¢+MDCé“¾è·¯è¿½è¸ª
âœ… ç›‘æ§æŒ‡æ ‡ï¼šé›†æˆMicrometerï¼Œå¯¹æ¥ç›‘æ§å¹³å°
âœ… é…ç½®ç®¡ç†ï¼šä½¿ç”¨Nacosï¼Œæ”¯æŒåŠ¨æ€åˆ·æ–°
âœ… ç‰ˆæœ¬ç®¡ç†ï¼šURLç‰ˆæœ¬+ç°åº¦ç­–ç•¥
```

**å¼€å‘æœ€ä½³å®è·µ**ï¼š
```
1ï¸âƒ£ å·¥å…·ç±»è®¾è®¡ï¼š
   - æ–¹æ³•å‘½åæ¸…æ™°ï¼ˆget/post/put/deleteï¼‰
   - æ”¯æŒæ³›å‹ï¼Œçµæ´»è¿”å›
   - æä¾›åŒæ­¥/å¼‚æ­¥/æ‰¹é‡å¤šç§æ–¹å¼

2ï¸âƒ£ å“åº”å°è£…ï¼š
   - codeç»Ÿä¸€è§„èŒƒï¼ˆ200æˆåŠŸï¼Œ400ä¸šåŠ¡å¤±è´¥ï¼Œ500ç³»ç»Ÿé”™è¯¯ï¼‰
   - messageç®€æ´æ˜äº†ï¼Œç”¨æˆ·å‹å¥½
   - dataæ”¯æŒæ³›å‹ï¼Œé€‚åº”å„ç§åœºæ™¯

3ï¸âƒ£ å¼‚å¸¸å¤„ç†ï¼š
   - ä¸šåŠ¡å¼‚å¸¸ä¸»åŠ¨æŠ›å‡º
   - ç³»ç»Ÿå¼‚å¸¸å…¨å±€æ•è·
   - é™çº§æ–¹æ¡ˆå¿…é¡»æœ‰

4ï¸âƒ£ æ—¥å¿—è®°å½•ï¼š
   - è®°å½•å…³é”®ä¿¡æ¯ï¼ˆæœåŠ¡åã€æ–¹æ³•ã€å‚æ•°ã€ç»“æœã€è€—æ—¶ï¼‰
   - ä½¿ç”¨traceIdä¸²è”è°ƒç”¨é“¾
   - æ—¥å¿—çº§åˆ«åˆç†ï¼ˆinfoè®°å½•æ­£å¸¸ï¼Œerrorè®°å½•å¼‚å¸¸ï¼‰

5ï¸âƒ£ æ€§èƒ½ç›‘æ§ï¼š
   - ç›‘æ§å“åº”æ—¶é—´ã€æˆåŠŸç‡ã€å¼‚å¸¸ç‡
   - è®¾ç½®å‘Šè­¦é˜ˆå€¼
   - å®šæœŸæŸ¥çœ‹ç›‘æ§æ•°æ®

6ï¸âƒ£ é…ç½®ç®¡ç†ï¼š
   - é»˜è®¤é…ç½®ä¿å®ˆï¼ˆè¶…æ—¶æ—¶é—´é€‚ä¸­ï¼‰
   - ç‰¹æ®ŠæœåŠ¡å•ç‹¬é…ç½®
   - æ”¯æŒåŠ¨æ€è°ƒæ•´

7ï¸âƒ£ ç‰ˆæœ¬ç®¡ç†ï¼š
   - æ–°æ—§ç‰ˆæœ¬å¹¶å­˜
   - ç°åº¦å‘å¸ƒéªŒè¯
   - ç›‘æ§è¿ç§»è¿›åº¦
```

**å¸¸è§é—®é¢˜ä¸è§£å†³**ï¼š

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| è°ƒç”¨è¶…æ—¶é¢‘ç¹ | è¶…æ—¶æ—¶é—´è®¾ç½®è¿‡çŸ­ | æ ¹æ®æ¥å£å“åº”æ—¶é—´åˆç†é…ç½® |
| å¼‚å¸¸ä¿¡æ¯æš´éœ² | æœªç»Ÿä¸€å¤„ç†å¼‚å¸¸ | ä½¿ç”¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ |
| é—®é¢˜éš¾ä»¥å®šä½ | æ—¥å¿—è®°å½•ä¸å®Œæ•´ | å®Œå–„æ—¥å¿—è®°å½•ï¼ŒåŠ å…¥traceId |
| é…ç½®ä¿®æ”¹éº»çƒ¦ | é…ç½®å†™æ­»åœ¨ä»£ç  | ä½¿ç”¨é…ç½®ä¸­å¿ƒåŠ¨æ€ç®¡ç† |
| æ¥å£å‡çº§å›°éš¾ | æ²¡æœ‰ç‰ˆæœ¬ç®¡ç† | å®æ–½ç‰ˆæœ¬ç®¡ç†ç­–ç•¥ |

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
ç»Ÿä¸€å°è£…å¥½å¤„å¤šï¼Œä»£ç å¤ç”¨ä¸å‡ºé”™
å“åº”æ ¼å¼è¦ç»Ÿä¸€ï¼Œå‰åå¯¹æ¥æ›´å®¹æ˜“
å¼‚å¸¸å¤„ç†åˆ†ä¸‰å±‚ï¼Œç³»ç»Ÿç¨³å®šæœ‰ä¿éšœ
æ—¥å¿—ç›‘æ§ä¸èƒ½å°‘ï¼Œé—®é¢˜å®šä½åˆ†åˆ†é’Ÿ
é…ç½®é›†ä¸­å¥½ç®¡ç†ï¼Œç‰ˆæœ¬æ§åˆ¶åŠ©å‡çº§
```

> ğŸ¯ **æœ€ç»ˆç›®æ ‡**ï¼šé€šè¿‡ç»Ÿä¸€å°è£…ï¼Œè®©æœåŠ¡é—´è°ƒç”¨å˜å¾—**ç®€å•**ã€**å¯é **ã€**å¯ç»´æŠ¤**ï¼Œå¼€å‘æ•ˆç‡å’Œç³»ç»Ÿè´¨é‡åŒæå‡ï¼