---
title: 1ã€æœåŠ¡æ³¨å†Œä¸­å¿ƒ
---
## ğŸ“š ç›®å½•


1. [ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°](#1-ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°)
2. [ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡æ³¨å†Œä¸å‘ç°](#2-ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡æ³¨å†Œä¸å‘ç°)
3. [æœåŠ¡æ³¨å†Œä¸­å¿ƒæ ¸å¿ƒæ¦‚å¿µ](#3-æœåŠ¡æ³¨å†Œä¸­å¿ƒæ ¸å¿ƒæ¦‚å¿µ)
4. [ä¸»æµæ³¨å†Œä¸­å¿ƒå¯¹æ¯”](#4-ä¸»æµæ³¨å†Œä¸­å¿ƒå¯¹æ¯”)
5. [Eurekaæ³¨å†Œä¸­å¿ƒè¯¦è§£](#5-eurekaæ³¨å†Œä¸­å¿ƒè¯¦è§£)
6. [ConsulæœåŠ¡å‘ç°](#6-consulæœåŠ¡å‘ç°)
7. [Nacosæ³¨å†Œå‘ç°](#7-nacosæ³¨å†Œå‘ç°)
8. [æœåŠ¡å¥åº·æ£€æŸ¥æœºåˆ¶](#8-æœåŠ¡å¥åº·æ£€æŸ¥æœºåˆ¶)
9. [é«˜å¯ç”¨ä¸å¤šæ³¨å†Œä¸­å¿ƒ](#9-é«˜å¯ç”¨ä¸å¤šæ³¨å†Œä¸­å¿ƒ)
10. [æœ€ä½³å®è·µä¸æ€»ç»“](#10-æœ€ä½³å®è·µä¸æ€»ç»“)

---

# 1. ğŸ¤” ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°



## 1.1 é€šä¿—ç†è§£



æƒ³è±¡ä½ è¦æ‰¾æœ‹å‹èšé¤ï¼Œä½†ä¸çŸ¥é“æœ‹å‹ä»¬ç°åœ¨ä½åœ¨å“ªé‡Œã€‚è¿™æ—¶å€™ä½ éœ€è¦ï¼š
1. **é€šè®¯å½•ï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰**ï¼šè®°å½•æ‰€æœ‰æœ‹å‹çš„è”ç³»æ–¹å¼å’Œåœ°å€
2. **æœ‹å‹ä¸»åŠ¨æŠ¥å‘Šï¼ˆæœåŠ¡æ³¨å†Œï¼‰**ï¼šæœ‹å‹æ¬å®¶åä¸»åŠ¨å‘Šè¯‰ä½ æ–°åœ°å€
3. **æŸ¥æ‰¾æœ‹å‹ï¼ˆæœåŠ¡å‘ç°ï¼‰**ï¼šä½ è¦èšé¤æ—¶æŸ¥é€šè®¯å½•æ‰¾åˆ°æœ‹å‹ä½ç½®

å¾®æœåŠ¡ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š                    å¾®æœåŠ¡ä¸–ç•Œï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ è¦æ‰¾æœ‹å‹  â”‚ å¯¹åº”             â”‚ æœåŠ¡Aè¦è°ƒç”¨   â”‚
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>    â”‚  æœåŠ¡B      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚æŸ¥çœ‹é€šè®¯å½•æ‰¾åˆ°â”‚ å¯¹åº”             â”‚æŸ¥è¯¢æ³¨å†Œä¸­å¿ƒ  â”‚
â”‚æœ‹å‹çš„åœ°å€    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>    â”‚æ‰¾åˆ°æœåŠ¡Båœ°å€ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1.2 ä¸“ä¸šå®šä¹‰



**æœåŠ¡æ³¨å†Œï¼ˆService Registrationï¼‰**ï¼š
- å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šè‡ªå·±çš„ç½‘ç»œä½ç½®ï¼ˆIPåœ°å€ã€ç«¯å£ï¼‰
- å°±åƒæœ‹å‹æ¬å®¶åä¸»åŠ¨å‘Šè¯‰ä½ æ–°åœ°å€

**æœåŠ¡å‘ç°ï¼ˆService Discoveryï¼‰**ï¼š
- å¾®æœåŠ¡éœ€è¦è°ƒç”¨å…¶ä»–æœåŠ¡æ—¶ï¼Œä»æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢ç›®æ ‡æœåŠ¡çš„åœ°å€
- å°±åƒä½ æŸ¥é€šè®¯å½•æ‰¾æœ‹å‹çš„è”ç³»æ–¹å¼

> ğŸ’¡ **æ ¸å¿ƒä½œç”¨**ï¼šè®©å¾®æœåŠ¡ä¹‹é—´èƒ½å¤Ÿè‡ªåŠ¨æ‰¾åˆ°å½¼æ­¤ï¼Œæ— éœ€ç¡¬ç¼–ç IPåœ°å€

---

# 2. ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡æ³¨å†Œä¸å‘ç°



## 2.1 ä¼ ç»Ÿåº”ç”¨çš„é—®é¢˜



åœ¨å•ä½“åº”ç”¨æ—¶ä»£ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½åœ¨ä¸€ä¸ªåº”ç”¨é‡Œï¼Œä¸å­˜åœ¨"æ‰¾ä¸åˆ°æœåŠ¡"çš„é—®é¢˜ï¼š

```
ä¼ ç»Ÿå•ä½“åº”ç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸€ä¸ªå¤§åº”ç”¨           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ç”¨æˆ·â”‚ â”‚è®¢å•â”‚ â”‚æ”¯ä»˜â”‚    â”‚
â”‚  â”‚æ¨¡å—â”‚ â”‚æ¨¡å—â”‚ â”‚æ¨¡å—â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
å†…éƒ¨æ–¹æ³•è°ƒç”¨ï¼Œæ— éœ€ç½‘ç»œé€šä¿¡
```

ä½†å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹éƒ¨ç½²çš„ï¼š

```
å¾®æœåŠ¡æ¶æ„çš„æŒ‘æˆ˜ï¼š
ç”¨æˆ·æœåŠ¡(192.168.1.10:8080) â”€â”€ç½‘ç»œè°ƒç”¨â”€â”€> è®¢å•æœåŠ¡(???)
                                          è®¢å•æœåŠ¡åœ¨å“ªé‡Œï¼Ÿ
                                          IPåœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ
                                          ç«¯å£æ˜¯å¤šå°‘ï¼Ÿ
```

## 2.2 é¢ä¸´çš„å…·ä½“é—®é¢˜



**ğŸ”¸ é—®é¢˜1ï¼šç¡¬ç¼–ç åœ°å€çš„å™©æ¢¦**
```java
// ğŸ˜± é”™è¯¯åšæ³•ï¼šç¡¬ç¼–ç å…¶ä»–æœåŠ¡åœ°å€
@RestController
public class UserController {
    public Order getUserOrder(Long userId) {
        // ç¡¬ç¼–ç äº†è®¢å•æœåŠ¡åœ°å€ï¼Œéå¸¸ä¸çµæ´»
        String orderServiceUrl = "http://192.168.1.20:8080";
        return restTemplate.getForObject(
            orderServiceUrl + "/orders/" + userId, Order.class);
    }
}
```

**ç¡¬ç¼–ç çš„ç—›ç‚¹**ï¼š
- âŒ æœåŠ¡IPå˜åŒ–æ—¶éœ€è¦é‡æ–°ç¼–è¯‘ä»£ç 
- âŒ æ— æ³•æ”¯æŒè´Ÿè½½å‡è¡¡ï¼ˆå¤šä¸ªå®ä¾‹ï¼‰
- âŒ æœåŠ¡æ‰©å®¹ç¼©å®¹æ—¶æ— æ³•è‡ªåŠ¨é€‚åº”
- âŒ å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒåœ°å€ä¸åŒ

**ğŸ”¸ é—®é¢˜2ï¼šæœåŠ¡å®ä¾‹åŠ¨æ€å˜åŒ–**
```
è®¢å•æœåŠ¡æ‰©å®¹åœºæ™¯ï¼š
æ—¶é—´ç‚¹1: è®¢å•æœåŠ¡åªæœ‰1ä¸ªå®ä¾‹ (192.168.1.20:8080)
æ—¶é—´ç‚¹2: ä¸šåŠ¡ç¹å¿™ï¼Œæ‰©å®¹åˆ°3ä¸ªå®ä¾‹
        - 192.168.1.20:8080
        - 192.168.1.21:8080  
        - 192.168.1.22:8080

é—®é¢˜ï¼šç”¨æˆ·æœåŠ¡æ€ä¹ˆçŸ¥é“æ–°å¢äº†2ä¸ªå®ä¾‹ï¼Ÿ
```

**ğŸ”¸ é—®é¢˜3ï¼šæœåŠ¡æ•…éšœå¤„ç†**
```
æ•…éšœåœºæ™¯ï¼š
è®¢å•æœåŠ¡çš„æŸä¸ªå®ä¾‹å®•æœºäº† (192.168.1.21:8080)

é—®é¢˜ï¼š
- ç”¨æˆ·æœåŠ¡å¦‚ä½•çŸ¥é“è¿™ä¸ªå®ä¾‹å·²ç»ä¸å¯ç”¨ï¼Ÿ
- å¦‚ä½•é¿å…ç»§ç»­å‘æ•…éšœå®ä¾‹å‘é€è¯·æ±‚ï¼Ÿ
- å®ä¾‹æ¢å¤åå¦‚ä½•é‡æ–°åŠ å…¥æœåŠ¡ï¼Ÿ
```

## 2.3 æœåŠ¡æ³¨å†Œä¸å‘ç°çš„è§£å†³æ–¹æ¡ˆ



```
æœåŠ¡æ³¨å†Œä¸å‘ç°æ¶æ„ï¼š

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ç”¨æˆ·æœåŠ¡    â”‚         â”‚  è®¢å•æœåŠ¡1   â”‚
    â”‚             â”‚         â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                       â”‚
           â”‚ â‘¡æŸ¥è¯¢è®¢å•æœåŠ¡          â”‚ â‘ æ³¨å†Œè‡ªå·±
           â”‚                       â”‚
           âˆ¨                       âˆ¨
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          æ³¨å†Œä¸­å¿ƒ                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚  â”‚ è®¢å•æœåŠ¡åˆ—è¡¨ï¼š               â”‚     â”‚
    â”‚  â”‚ - 192.168.1.20:8080 âœ…      â”‚     â”‚
    â”‚  â”‚ - 192.168.1.21:8080 âœ…      â”‚     â”‚
    â”‚  â”‚ - 192.168.1.22:8080 âŒ      â”‚     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š
- âœ… **åŠ¨æ€å‘ç°**ï¼šè‡ªåŠ¨æ‰¾åˆ°å¯ç”¨çš„æœåŠ¡å®ä¾‹
- âœ… **è´Ÿè½½å‡è¡¡**ï¼šåœ¨å¤šä¸ªå®ä¾‹é—´åˆ†é…è¯·æ±‚
- âœ… **æ•…éšœéš”ç¦»**ï¼šè‡ªåŠ¨å‰”é™¤æ•…éšœå®ä¾‹
- âœ… **å¼¹æ€§æ‰©å®¹**ï¼šæ–°å®ä¾‹è‡ªåŠ¨åŠ å…¥æœåŠ¡

---

# 3. ğŸ—ï¸ æœåŠ¡æ³¨å†Œä¸­å¿ƒæ ¸å¿ƒæ¦‚å¿µ



## 3.1 æ³¨å†Œä¸­å¿ƒçš„è§’è‰²



**æ³¨å†Œä¸­å¿ƒå°±åƒç°å®ä¸­çš„"é»„é¡µç”µè¯ç°¿"**ï¼š

```
ç°å®é»„é¡µ                     æœåŠ¡æ³¨å†Œä¸­å¿ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¤å…ç±»å‹ â”‚ è”ç³»æ–¹å¼ â”‚         â”‚ æœåŠ¡åç§° â”‚ ç½‘ç»œåœ°å€ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·èœé¦†   â”‚ 123-4567â”‚         â”‚ ç”¨æˆ·æœåŠ¡ â”‚ 1.1.1.1  â”‚
â”‚ ç²¤èœé¦†   â”‚ 234-5678â”‚         â”‚ è®¢å•æœåŠ¡ â”‚ 2.2.2.2  â”‚
â”‚ å¿«é¤åº—   â”‚ 345-6789â”‚         â”‚ æ”¯ä»˜æœåŠ¡ â”‚ 3.3.3.3  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3.2 æ ¸å¿ƒç»„ä»¶è¯¦è§£



### ğŸ”¸ æœåŠ¡å®ä¾‹ï¼ˆService Instanceï¼‰


**é€šä¿—ç†è§£**ï¼šå°±æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å¾®æœåŠ¡ç¨‹åº

```
ä¸€ä¸ªæœåŠ¡å®ä¾‹åŒ…å«çš„ä¿¡æ¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        è®¢å•æœåŠ¡å®ä¾‹          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡åç§°: order-service      â”‚
â”‚ IPåœ°å€: 192.168.1.20        â”‚
â”‚ ç«¯å£: 8080                  â”‚
â”‚ å¥åº·çŠ¶æ€: UP               â”‚
â”‚ å…ƒæ•°æ®: version=1.0         â”‚
â”‚ æ³¨å†Œæ—¶é—´: 2024-03-15 10:30  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”¸ æœåŠ¡å…ƒæ•°æ®ï¼ˆService Metadataï¼‰


**é€šä¿—ç†è§£**ï¼šæœåŠ¡çš„"èº«ä»½è¯ä¿¡æ¯"ï¼ŒåŒ…å«å„ç§æè¿°æ€§ä¿¡æ¯

```java
// æœåŠ¡å…ƒæ•°æ®ç¤ºä¾‹
Map<String, String> metadata = new HashMap<>();
metadata.put("version", "1.0.2");           // æœåŠ¡ç‰ˆæœ¬
metadata.put("environment", "production");   // è¿è¡Œç¯å¢ƒ
metadata.put("team", "order-team");         // è´Ÿè´£å›¢é˜Ÿ
metadata.put("region", "beijing");          // éƒ¨ç½²åŒºåŸŸ
```

**å…ƒæ•°æ®çš„ä½œç”¨**ï¼š
- ğŸ¯ **ç‰ˆæœ¬æ§åˆ¶**ï¼šåŒºåˆ†ä¸åŒç‰ˆæœ¬çš„æœåŠ¡
- ğŸ¯ **ç¯å¢ƒéš”ç¦»**ï¼šç”Ÿäº§ç¯å¢ƒåªè°ƒç”¨ç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡
- ğŸ¯ **ç°åº¦å‘å¸ƒ**ï¼šæ–°ç‰ˆæœ¬å…ˆç»™ä¸€éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨

## 3.3 æ³¨å†Œä¸å‘ç°æµç¨‹



### ğŸ“ å®Œæ•´äº¤äº’æµç¨‹å›¾



```
æœåŠ¡å¯åŠ¨å’Œè°ƒç”¨çš„å®Œæ•´æµç¨‹ï¼š

æ­¥éª¤1: æœåŠ¡æ³¨å†Œ
è®¢å•æœåŠ¡ â”€â”€â”€â”€æ³¨å†Œè‡ªå·±â”€â”€â”€> æ³¨å†Œä¸­å¿ƒ
        "æˆ‘æ˜¯è®¢å•æœåŠ¡ï¼Œåœ°å€æ˜¯192.168.1.20:8080"

æ­¥éª¤2: å¿ƒè·³ä¿æ´»  
è®¢å•æœåŠ¡ â”€â”€â”€â”€å¿ƒè·³åŒ…â”€â”€â”€â”€> æ³¨å†Œä¸­å¿ƒ
        "æˆ‘è¿˜æ´»ç€ï¼" (æ¯30ç§’å‘é€ä¸€æ¬¡)

æ­¥éª¤3: æœåŠ¡å‘ç°
ç”¨æˆ·æœåŠ¡ â”€â”€â”€â”€æŸ¥è¯¢è®¢å•æœåŠ¡â”€> æ³¨å†Œä¸­å¿ƒ
        "è®¢å•æœåŠ¡åœ¨å“ªé‡Œï¼Ÿ"

æ­¥éª¤4: è¿”å›æœåŠ¡åˆ—è¡¨
æ³¨å†Œä¸­å¿ƒ â”€â”€â”€â”€è¿”å›åœ°å€åˆ—è¡¨â”€> ç”¨æˆ·æœåŠ¡
        "è®¢å•æœåŠ¡åœ°å€ï¼š192.168.1.20:8080"

æ­¥éª¤5: ç›´æ¥è°ƒç”¨
ç”¨æˆ·æœåŠ¡ â”€â”€â”€â”€HTTPè°ƒç”¨â”€â”€â”€> è®¢å•æœåŠ¡
        ç›´æ¥å‘è®¢å•æœåŠ¡å‘èµ·ä¸šåŠ¡è¯·æ±‚
```

### âš¡ å…³é”®æµç¨‹è§£é‡Š



**ğŸ”¸ æœåŠ¡æ³¨å†Œè¿‡ç¨‹**ï¼š
1. æœåŠ¡å¯åŠ¨æ—¶è¯»å–è‡ªå·±çš„é…ç½®ï¼ˆIPã€ç«¯å£ã€æœåŠ¡åï¼‰
2. å‘æ³¨å†Œä¸­å¿ƒå‘é€æ³¨å†Œè¯·æ±‚
3. æ³¨å†Œä¸­å¿ƒå°†æœåŠ¡ä¿¡æ¯å­˜å‚¨åœ¨å†…å­˜/æ•°æ®åº“ä¸­
4. è¿”å›æ³¨å†ŒæˆåŠŸç¡®è®¤

**ğŸ”¸ æœåŠ¡å‘ç°è¿‡ç¨‹**ï¼š
1. å®¢æˆ·ç«¯éœ€è¦è°ƒç”¨æŸä¸ªæœåŠ¡
2. å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢è¯¥æœåŠ¡çš„å¯ç”¨å®ä¾‹åˆ—è¡¨
3. æ³¨å†Œä¸­å¿ƒè¿”å›å¥åº·çš„å®ä¾‹åœ°å€
4. å®¢æˆ·ç«¯é€‰æ‹©ä¸€ä¸ªåœ°å€å‘èµ·è°ƒç”¨

> âš ï¸ **é‡è¦æé†’**ï¼šå®¢æˆ·ç«¯é€šå¸¸ä¼šç¼“å­˜æœåŠ¡åœ°å€åˆ—è¡¨ï¼Œé¿å…æ¯æ¬¡è°ƒç”¨éƒ½æŸ¥æ³¨å†Œä¸­å¿ƒ

---

# 4. ğŸ“Š ä¸»æµæ³¨å†Œä¸­å¿ƒå¯¹æ¯”



## 4.1 æŠ€æœ¯é€‰å‹å¯¹æ¯”è¡¨



| ç‰¹æ€§ | **Eureka** | **Consul** | **Nacos** | **ç®€å•ç†è§£** |
|------|------------|------------|-----------|-------------|
| **ğŸ¢ å‡ºå“æ–¹** | `Netflix` | `HashiCorp` | `é˜¿é‡Œå·´å·´` | çœ‹å‡ºå“æ–¹é€‰æ‹©ä¿¡ä»»åº¦ |
| **ğŸ”¥ ç¤¾åŒºæ´»è·ƒåº¦** | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜…â˜… | æ´»è·ƒåº¦å½±å“bugä¿®å¤é€Ÿåº¦ |
| **ğŸ“š å­¦ä¹ éš¾åº¦** | â˜…â˜…â˜†â˜†â˜† | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜†â˜†â˜† | æ–°æ‰‹æ¨èä»ç®€å•çš„å¼€å§‹ |
| **âš¡ æ€§èƒ½** | `é«˜` | `ä¸­` | `é«˜` | æ€§èƒ½å½±å“ç³»ç»Ÿå“åº”é€Ÿåº¦ |
| **ğŸ”§ é…ç½®å¤æ‚åº¦** | `ç®€å•` | `ä¸­ç­‰` | `ç®€å•` | é…ç½®è¶Šç®€å•è¶Šä¸å®¹æ˜“å‡ºé”™ |
| **ğŸ›¡ï¸ å®‰å…¨æ€§** | `åŸºç¡€` | `å¼º` | `ä¸­` | ç”Ÿäº§ç¯å¢ƒéœ€è¦è€ƒè™‘å®‰å…¨ |
| **ğŸŒ å¤šè¯­è¨€æ”¯æŒ** | `Javaä¸»` | `å¤šè¯­è¨€` | `å¤šè¯­è¨€` | å›¢é˜ŸæŠ€æœ¯æ ˆå½±å“é€‰æ‹© |

## 4.2 é€‚ç”¨åœºæ™¯åˆ†æ



**ğŸ¯ Eurekaé€‚åˆåœºæ™¯**ï¼š
```
é€‚ç”¨äºï¼š
âœ… Spring Cloudç”Ÿæ€é¡¹ç›®
âœ… JavaæŠ€æœ¯æ ˆä¸ºä¸»çš„å›¢é˜Ÿ  
âœ… å¯¹æ³¨å†Œä¸­å¿ƒè¦æ±‚ä¸å¤ªå¤æ‚
âœ… è¿½æ±‚ç®€å•æ˜“ç”¨

ä¸é€‚ç”¨äºï¼š
âŒ éœ€è¦å¼ºä¸€è‡´æ€§çš„åœºæ™¯
âŒ å¤šè¯­è¨€æ··åˆå¼€å‘
âŒ å¯¹å®‰å…¨è¦æ±‚æé«˜çš„ç¯å¢ƒ
```

**ğŸ¯ Consulé€‚åˆåœºæ™¯**ï¼š
```
é€‚ç”¨äºï¼š
âœ… å¤šè¯­è¨€æŠ€æœ¯æ ˆ
âœ… éœ€è¦å¼ºå®‰å…¨æ€§
âœ… æœ‰é…ç½®ç®¡ç†éœ€æ±‚
âœ… æœåŠ¡ç½‘æ ¼æ¶æ„

ä¸é€‚ç”¨äºï¼š
âŒ ç®€å•çš„Javaå¾®æœåŠ¡é¡¹ç›®
âŒ å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯
âŒ å›¢é˜Ÿç¼ºä¹è¿ç»´ç»éªŒ
```

**ğŸ¯ Nacosé€‚åˆåœºæ™¯**ï¼š
```
é€‚ç”¨äºï¼š
âœ… é˜¿é‡Œäº‘ç¯å¢ƒéƒ¨ç½²
âœ… éœ€è¦é…ç½®ç®¡ç†åŠŸèƒ½
âœ… ä¸­æ–‡æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ
âœ… Spring Cloud Alibabaé¡¹ç›®

ä¸é€‚ç”¨äºï¼š
âŒ éä¸­æ–‡å›¢é˜Ÿ
âŒ é¿å…å‚å•†ç»‘å®šçš„é¡¹ç›®
âŒ è¶…å¤§è§„æ¨¡é›†ç¾¤ï¼ˆä¸‡çº§æœåŠ¡ï¼‰
```

## 4.3 æŠ€æœ¯æ¶æ„å¯¹æ¯”



### Eurekaæ¶æ„ç‰¹ç‚¹


```
Eurekaæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Eureka     â”‚    â”‚  Eureka     â”‚
â”‚  Server 1   â”‚<â”€â”€>â”‚  Server 2   â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                  â†‘
       â”‚     æœåŠ¡æ³¨å†Œ       â”‚
       âˆ¨                  âˆ¨  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¾®æœåŠ¡A     â”‚    â”‚  å¾®æœåŠ¡B     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
- APæ¨¡å‹ï¼šå¯ç”¨æ€§ä¼˜å…ˆï¼Œå…è®¸çŸ­æš‚æ•°æ®ä¸ä¸€è‡´
- è‡ªæˆ‘ä¿æŠ¤ï¼šç½‘ç»œåˆ†åŒºæ—¶å®å¯è¿”å›é”™è¯¯æ•°æ®ä¹Ÿä¸åœæœåŠ¡
- å»ä¸­å¿ƒåŒ–ï¼šå„ä¸ªEureka Serveråœ°ä½å¹³ç­‰
```

### Consulæ¶æ„ç‰¹ç‚¹  


```
Consulæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Consul     â”‚    â”‚  Consul     â”‚    â”‚  Consul     â”‚
â”‚  Server 1   â”‚<â”€â”€>â”‚  Server 2   â”‚<â”€â”€>â”‚  Server 3   â”‚
â”‚  (Leader)   â”‚    â”‚ (Follower)  â”‚    â”‚ (Follower)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                  â†‘                  â†‘
       â”‚                  â”‚                  â”‚
       âˆ¨                  âˆ¨                  âˆ¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Consul Agentâ”‚    â”‚ Consul Agentâ”‚    â”‚ Consul Agentâ”‚
â”‚   å¾®æœåŠ¡A    â”‚    â”‚   å¾®æœåŠ¡B    â”‚    â”‚   å¾®æœåŠ¡C    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
- CPæ¨¡å‹ï¼šä¸€è‡´æ€§ä¼˜å…ˆï¼Œé€‰ä¸¾æœŸé—´æœåŠ¡ä¸å¯ç”¨
- å¼ºä¸€è‡´æ€§ï¼šé€šè¿‡Raftç®—æ³•ä¿è¯æ•°æ®ä¸€è‡´æ€§
- å¤šåŠŸèƒ½ï¼šæœåŠ¡å‘ç°+é…ç½®ç®¡ç†+å¥åº·æ£€æŸ¥
```

---

# 5. ğŸ”§ Eurekaæ³¨å†Œä¸­å¿ƒè¯¦è§£



## 5.1 Eurekaæ ¸å¿ƒæ¦‚å¿µ



**Eurekaå°±åƒä¸€ä¸ª"æœåŠ¡é€šè®¯å½•ç®¡ç†å‘˜"**ï¼š

```
Eurekaçš„è§’è‰²åˆ†å·¥ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Eureka Server            â”‚  â† é€šè®¯å½•ç®¡ç†å‘˜
â”‚         (æ³¨å†Œä¸­å¿ƒæœåŠ¡ç«¯)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘        â†‘
              â”‚        â”‚
    æ³¨å†ŒæœåŠ¡ä¿¡æ¯ â”‚        â”‚ æŸ¥è¯¢æœåŠ¡ä¿¡æ¯
              â”‚        â”‚
              âˆ¨        âˆ¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Eureka Client A â”‚   â”‚ Eureka Client B â”‚  â† ä½¿ç”¨é€šè®¯å½•çš„äºº
â”‚   (æœåŠ¡æä¾›è€…)   â”‚   â”‚   (æœåŠ¡æ¶ˆè´¹è€…)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5.2 Eureka Serveræ­å»º



### ğŸš€ å¿«é€Ÿæ­å»ºEureka Server



**æ­¥éª¤1ï¼šåˆ›å»ºé¡¹ç›®æ·»åŠ ä¾èµ–**
```xml
<!-- åªéœ€è¦è¿™ä¸€ä¸ªä¾èµ–å°±å¤Ÿäº† -->
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>
</dependency>
```

**æ­¥éª¤2ï¼šå¯åŠ¨ç±»é…ç½®**
```java
@SpringBootApplication
@EnableEurekaServer  // è¿™ä¸ªæ³¨è§£è®©åº”ç”¨å˜æˆEurekaæœåŠ¡ç«¯
public class EurekaServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServerApplication.class, args);
    }
}
```

**æ­¥éª¤3ï¼šé…ç½®æ–‡ä»¶**
```yaml
server:
  port: 8761  # Eureka Serveré»˜è®¤ç«¯å£

eureka:
  instance:
    hostname: localhost
  client:
#    # è‡ªå·±ä¸æ³¨å†Œåˆ°è‡ªå·±
    register-with-eureka: false
#    # è‡ªå·±ä¸ä»è‡ªå·±è·å–æœåŠ¡ä¿¡æ¯  
    fetch-registry: false
    service-url:
      defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/
```

> ğŸ’¡ **é…ç½®è§£é‡Š**ï¼šEureka Serverè‡ªå·±ä¸éœ€è¦æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œæ‰€ä»¥è®¾ç½®ä¸ºfalse

## 5.3 Eureka Clienté…ç½®



### ğŸ”Œ æœåŠ¡æä¾›è€…é…ç½®



**æ­¥éª¤1ï¼šæ·»åŠ å®¢æˆ·ç«¯ä¾èµ–**
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
</dependency>
```

**æ­¥éª¤2ï¼šå¯åŠ¨ç±»é…ç½®**
```java
@SpringBootApplication
@EnableEurekaClient  // å£°æ˜è¿™æ˜¯ä¸€ä¸ªEurekaå®¢æˆ·ç«¯
public class OrderServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(OrderServiceApplication.class, args);
    }
}
```

**æ­¥éª¤3ï¼šé…ç½®æ–‡ä»¶**
```yaml
server:
  port: 8080

spring:
  application:
    name: order-service  # è¿™ä¸ªåç§°å¾ˆé‡è¦ï¼å…¶ä»–æœåŠ¡é€šè¿‡è¿™ä¸ªåç§°æ‰¾åˆ°ä½ 

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/  # Eureka Serveråœ°å€
  instance:
    prefer-ip-address: true  # ä½¿ç”¨IPåœ°å€æ³¨å†Œï¼Œè€Œä¸æ˜¯ä¸»æœºå
```

### ğŸ” æœåŠ¡æ¶ˆè´¹è€…é…ç½®



**ä½¿ç”¨RestTemplateè°ƒç”¨å…¶ä»–æœåŠ¡**ï¼š
```java
@Configuration
public class RestTemplateConfig {
    
    @Bean
    @LoadBalanced  // è¿™ä¸ªæ³¨è§£è®©RestTemplateå…·å¤‡è´Ÿè½½å‡è¡¡èƒ½åŠ›
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
```

**ä¸šåŠ¡ä»£ç è°ƒç”¨**ï¼š
```java
@RestController
public class UserController {
    
    @Autowired
    private RestTemplate restTemplate;
    
    @GetMapping("/user/{userId}/orders")
    public List<Order> getUserOrders(@PathVariable Long userId) {
        // ç›´æ¥ä½¿ç”¨æœåŠ¡åç§°è°ƒç”¨ï¼Œæ— éœ€å†™IPåœ°å€ï¼
        String url = "http://order-service/orders/user/" + userId;
        return restTemplate.getForObject(url, List.class);
    }
}
```

> ğŸ¯ **å…³é”®ç‚¹**ï¼šä½¿ç”¨æœåŠ¡åç§°`order-service`è€Œä¸æ˜¯IPåœ°å€ï¼ŒEurekaä¼šè‡ªåŠ¨è§£æ

## 5.4 å¿ƒè·³æœºåˆ¶è¯¦è§£



### ğŸ’“ å¿ƒè·³æœºåˆ¶å·¥ä½œåŸç†



```
å¿ƒè·³æœºåˆ¶æ—¶åºå›¾ï¼š

æœåŠ¡å®ä¾‹                    Eureka Server
    â”‚                           â”‚
    â”‚â”€â”€â”€â”€ æ³¨å†ŒæœåŠ¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
    â”‚                           â”‚ å­˜å‚¨æœåŠ¡ä¿¡æ¯
    â”‚                           â”‚
    â”‚ <â”€â”€â”€â”€â”€ æ³¨å†ŒæˆåŠŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
    â”‚                           â”‚
    â”‚                           â”‚ 
    â”‚â”€â”€â”€ å¿ƒè·³åŒ…(30ç§’) â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
    â”‚                           â”‚ æ›´æ–°æœ€åå¿ƒè·³æ—¶é—´
    â”‚                           â”‚
    â”‚â”€â”€â”€ å¿ƒè·³åŒ…(30ç§’) â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
    â”‚                           â”‚
    â”‚                           â”‚
    â”‚ X ç½‘ç»œæ•…éšœï¼Œå¿ƒè·³æ–­å¼€        â”‚
    â”‚                           â”‚ 90ç§’åæ£€æµ‹åˆ°å¿ƒè·³è¶…æ—¶
    â”‚                           â”‚ å°†æœåŠ¡æ ‡è®°ä¸ºDOWN
    â”‚                           â”‚ ä»å¯ç”¨åˆ—è¡¨ä¸­ç§»é™¤
```

**å¿ƒè·³å‚æ•°é…ç½®**ï¼š
```yaml
eureka:
  instance:
    lease-renewal-interval-in-seconds: 30    # å¿ƒè·³é—´éš”30ç§’
    lease-expiration-duration-in-seconds: 90 # 90ç§’æœªæ”¶åˆ°å¿ƒè·³å°±è®¤ä¸ºæœåŠ¡ä¸‹çº¿
  server:
    eviction-interval-timer-in-ms: 60000     # æ¯60ç§’æ¸…ç†ä¸€æ¬¡è¿‡æœŸæœåŠ¡
```

## 5.5 è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶



### ğŸ›¡ï¸ ä»€ä¹ˆæ˜¯è‡ªæˆ‘ä¿æŠ¤



**é€šä¿—ç†è§£**ï¼šEurekaçš„"å®å¯é”™æ€ï¼Œä¸å¯æ”¾è¿‡"ç­–ç•¥

```
æ­£å¸¸æƒ…å†µï¼š
æœåŠ¡A â”€â”€â”€â”€å¿ƒè·³â”€â”€â”€â”€> Eureka Server
æœåŠ¡B â”€â”€â”€â”€å¿ƒè·³â”€â”€â”€â”€> Eureka Server  
æœåŠ¡C â”€â”€â”€â”€å¿ƒè·³â”€â”€â”€â”€> Eureka Server

ç½‘ç»œåˆ†åŒºæ•…éšœï¼š
æœåŠ¡A  X ç½‘ç»œæ–­å¼€   Eureka Server
æœåŠ¡B  X ç½‘ç»œæ–­å¼€   Eureka Server  
æœåŠ¡C  X ç½‘ç»œæ–­å¼€   Eureka Server

Eurekaçš„åˆ¤æ–­ï¼š
- å¦‚æœåªæœ‰1ä¸ªæœåŠ¡å¿ƒè·³æ–­å¼€ â†’ è®¤ä¸ºæœåŠ¡æ•…éšœï¼Œå‰”é™¤æœåŠ¡
- å¦‚æœå¤§éƒ¨åˆ†æœåŠ¡å¿ƒè·³æ–­å¼€ â†’ è®¤ä¸ºç½‘ç»œæ•…éšœï¼Œè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼
```

**è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼çš„è¡Œä¸º**ï¼š
- âœ… ç»§ç»­æä¾›æœåŠ¡æ³¨å†Œå’ŒæŸ¥è¯¢
- âœ… ä¸ä¼šå‰”é™¤ä»»ä½•æœåŠ¡å®ä¾‹
- âš ï¸ å¯èƒ½è¿”å›å·²ç»ä¸‹çº¿çš„æœåŠ¡åœ°å€ï¼ˆå®¢æˆ·ç«¯éœ€è¦å¤„ç†ï¼‰

**é…ç½®è‡ªæˆ‘ä¿æŠ¤**ï¼š
```yaml
eureka:
  server:
    enable-self-preservation: true  # å¼€å¯è‡ªæˆ‘ä¿æŠ¤ï¼ˆé»˜è®¤å¼€å¯ï¼‰
    renewal-percent-threshold: 0.85  # 85%çš„æœåŠ¡æ­£å¸¸å¿ƒè·³æ‰ä¸è¿›å…¥ä¿æŠ¤æ¨¡å¼
```

---

# 6. ğŸ¥ ConsulæœåŠ¡å‘ç°



## 6.1 Consulæ ¸å¿ƒç‰¹æ€§



**Consulä¸ä»…ä»…æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæ›´åƒä¸€ä¸ª"æ™ºèƒ½ç®¡å®¶"**ï¼š

```
Consulçš„å¤šé‡èº«ä»½ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Consul                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” æœåŠ¡å‘ç°     â”‚  âš™ï¸ é…ç½®ç®¡ç†     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚  ğŸ’“ å¥åº·æ£€æŸ¥     â”‚  ğŸ” å®‰å…¨è¿æ¥     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—³ï¸ é¢†å¯¼é€‰ä¸¾     â”‚  ğŸ“Š ç›‘æ§æŒ‡æ ‡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6.2 Consulå®‰è£…ä¸å¯åŠ¨



### ğŸš€ å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨



**ä¸‹è½½å¹¶å¯åŠ¨Consul**ï¼š
```bash
# ä¸‹è½½Consulï¼ˆä»¥Linuxä¸ºä¾‹ï¼‰

wget https://releases.hashicorp.com/consul/1.15.0/consul_1.15.0_linux_amd64.zip
unzip consul_1.15.0_linux_amd64.zip

# å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼‰

./consul agent -dev -client=0.0.0.0
```

**å¯åŠ¨æˆåŠŸæ ‡å¿—**ï¼š
```
==> Consul agent running!
           Version: 'v1.15.0'
        Client Addr: [0.0.0.0] (HTTP: 8500, HTTPS: -1, gRPC: 8502, DNS: 8600)
         Cluster Addr: 127.0.0.1 (LAN: 8301, WAN: 8302)
```

**è®¿é—®Webç•Œé¢**ï¼šæµè§ˆå™¨æ‰“å¼€ http://localhost:8500

## 6.3 Spring Booté›†æˆConsul



### ğŸ“¦ é¡¹ç›®é…ç½®



**æ·»åŠ ä¾èµ–**ï¼š
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-consul-discovery</artifactId>
</dependency>
```

**é…ç½®æ–‡ä»¶**ï¼š
```yaml
spring:
  application:
    name: user-service
  cloud:
    consul:
      host: localhost
      port: 8500
      discovery:
        service-name: ${spring.application.name}
        health-check-path: /actuator/health  # å¥åº·æ£€æŸ¥è·¯å¾„
        health-check-interval: 10s           # æ£€æŸ¥é—´éš”
        instance-id: ${spring.application.name}:${random.int}  # å®ä¾‹ID
```

### ğŸ”§ å¯åŠ¨ç±»é…ç½®



```java
@SpringBootApplication
@EnableDiscoveryClient  // å¯ç”¨æœåŠ¡å‘ç°å®¢æˆ·ç«¯
public class UserServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }
}
```

## 6.4 Consulå¥åº·æ£€æŸ¥



### ğŸ’Š å¥åº·æ£€æŸ¥ç±»å‹



**HTTPå¥åº·æ£€æŸ¥**ï¼š
```yaml
spring:
  cloud:
    consul:
      discovery:
        health-check-path: /health     # å¥åº·æ£€æŸ¥ç«¯ç‚¹
        health-check-interval: 15s     # æ¯15ç§’æ£€æŸ¥ä¸€æ¬¡
        health-check-timeout: 10s      # è¶…æ—¶æ—¶é—´10ç§’
        health-check-critical-timeout: 30s  # 30ç§’å¤±è´¥åæ ‡è®°ä¸ºcritical
```

**è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ç«¯ç‚¹**ï¼š
```java
@RestController
public class HealthController {
    
    @GetMapping("/health")
    public Map<String, String> health() {
        Map<String, String> status = new HashMap<>();
        
        // æ£€æŸ¥æ•°æ®åº“è¿æ¥
        if (isDatabaseConnected()) {
            status.put("status", "UP");
            status.put("database", "connected");
        } else {
            status.put("status", "DOWN");
            status.put("database", "disconnected");
        }
        
        return status;
    }
    
    private boolean isDatabaseConnected() {
        // å®é™…çš„æ•°æ®åº“è¿æ¥æ£€æŸ¥é€»è¾‘
        return true;
    }
}
```

## 6.5 æœåŠ¡è°ƒç”¨ç¤ºä¾‹



### ğŸ”— ä½¿ç”¨DiscoveryClient



```java
@RestController
public class OrderController {
    
    @Autowired
    private DiscoveryClient discoveryClient;
    
    @Autowired  
    private RestTemplate restTemplate;
    
    @GetMapping("/orders/{userId}")
    public List<Order> getOrdersByUser(@PathVariable String userId) {
        // ä»Consulè·å–ç”¨æˆ·æœåŠ¡å®ä¾‹åˆ—è¡¨
        List<ServiceInstance> instances = 
            discoveryClient.getInstances("user-service");
            
        if (instances.isEmpty()) {
            throw new RuntimeException("ç”¨æˆ·æœåŠ¡ä¸å¯ç”¨");
        }
        
        // é€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨å®ä¾‹ï¼ˆå®é™…é¡¹ç›®ä¸­åº”è¯¥ç”¨è´Ÿè½½å‡è¡¡ï¼‰
        ServiceInstance instance = instances.get(0);
        String userServiceUrl = "http://" + instance.getHost() + 
                               ":" + instance.getPort();
        
        // è°ƒç”¨ç”¨æˆ·æœåŠ¡éªŒè¯ç”¨æˆ·å­˜åœ¨
        User user = restTemplate.getForObject(
            userServiceUrl + "/users/" + userId, User.class);
            
        if (user != null) {
            // è¿”å›ç”¨æˆ·çš„è®¢å•åˆ—è¡¨
            return getOrdersFromDatabase(userId);
        } else {
            throw new RuntimeException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
    }
}
```

---

# 7. â˜ï¸ Nacosæ³¨å†Œå‘ç°



## 7.1 Nacosç®€ä»‹ä¸ç‰¹ç‚¹



**Nacos = Namingï¼ˆå‘½åï¼‰ + Configurationï¼ˆé…ç½®ï¼‰As a Service**

```
Nacosçš„åŒé‡è§’è‰²ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Nacos                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ æœåŠ¡æ³¨å†Œä¸å‘ç°  â”‚  âš™ï¸ é…ç½®ç®¡ç†   â”‚
â”‚                    â”‚               â”‚
â”‚  â€¢ æœåŠ¡æ³¨å†Œ         â”‚ â€¢ åŠ¨æ€é…ç½®     â”‚
â”‚  â€¢ æœåŠ¡å‘ç°         â”‚ â€¢ é…ç½®æ¨é€     â”‚  
â”‚  â€¢ å¥åº·ç›‘æµ‹         â”‚ â€¢ é…ç½®å›æ»š     â”‚
â”‚  â€¢ è´Ÿè½½å‡è¡¡         â”‚ â€¢ ç¯å¢ƒéš”ç¦»     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- ğŸ¯ **é˜¿é‡Œç”Ÿäº§éªŒè¯**ï¼šç»è¿‡å¤©çŒ«åŒ11å¤§æµé‡è€ƒéªŒ
- ğŸ¯ **ä¸­æ–‡å‹å¥½**ï¼šå®Œå–„çš„ä¸­æ–‡æ–‡æ¡£å’Œç¤¾åŒº
- ğŸ¯ **åŠŸèƒ½ä¸°å¯Œ**ï¼šæ³¨å†Œå‘ç°+é…ç½®ç®¡ç†äºŒåˆä¸€
- ğŸ¯ **æ€§èƒ½ä¼˜ç§€**ï¼šæ”¯æŒåä¸‡çº§æœåŠ¡å®ä¾‹

## 7.2 NacosæœåŠ¡ç«¯éƒ¨ç½²



### ğŸš€ å•æœºæ¨¡å¼éƒ¨ç½²



**ä¸‹è½½å¯åŠ¨Nacos**ï¼š
```bash
# ä¸‹è½½Nacos

wget https://github.com/alibaba/nacos/releases/download/2.2.3/nacos-server-2.2.3.tar.gz
tar -xvf nacos-server-2.2.3.tar.gz
cd nacos/bin

# å•æœºæ¨¡å¼å¯åŠ¨

sh startup.sh -m standalone
```

**éªŒè¯å¯åŠ¨æˆåŠŸ**ï¼š
- æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8848/nacos
- é»˜è®¤è´¦å·å¯†ç ï¼šnacos/nacos

### ğŸ—ï¸ ç”Ÿäº§ç¯å¢ƒé›†ç¾¤éƒ¨ç½²



**é›†ç¾¤é…ç½®ç¤ºä¾‹**ï¼š
```bash
# ä¿®æ”¹conf/cluster.confæ–‡ä»¶

192.168.1.10:8848
192.168.1.11:8848  
192.168.1.12:8848

# é…ç½®æ•°æ®åº“ï¼ˆMySQLï¼‰

vim conf/application.properties
```

```properties
# æ•°æ®åº“é…ç½®

spring.datasource.platform=mysql
db.num=1
db.url.0=jdbc:mysql://localhost:3306/nacos?characterEncoding=utf8
db.user.0=nacos
db.password.0=nacos123
```

## 7.3 Spring Booté›†æˆNacos



### ğŸ“¦ ä¾èµ–é…ç½®



```xml
<dependency>
    <groupId>com.alibaba.cloud</groupId>
    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>
</dependency>
```

### âš™ï¸ é…ç½®æ–‡ä»¶



```yaml
server:
  port: 8080

spring:
  application:
    name: payment-service
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848    # NacosæœåŠ¡å™¨åœ°å€
        namespace: dev                 # å‘½åç©ºé—´ï¼ˆç¯å¢ƒéš”ç¦»ï¼‰
        group: DEFAULT_GROUP           # åˆ†ç»„
        metadata:
          version: 1.0.0              # æœåŠ¡ç‰ˆæœ¬
          team: payment-team           # è´Ÿè´£å›¢é˜Ÿ
```

### ğŸƒ å¯åŠ¨ç±»é…ç½®



```java
@SpringBootApplication
@EnableDiscoveryClient
public class PaymentServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(PaymentServiceApplication.class, args);
    }
}
```

## 7.4 NacosæœåŠ¡å‘ç°ä½¿ç”¨



### ğŸ” ä½¿ç”¨LoadBalancerè°ƒç”¨æœåŠ¡



```java
@RestController
public class PaymentController {
    
    @Autowired
    private RestTemplate restTemplate;
    
    @GetMapping("/payment/create")
    public String createPayment(@RequestParam String orderId) {
        // è°ƒç”¨è®¢å•æœåŠ¡éªŒè¯è®¢å•
        String orderCheckUrl = "http://order-service/orders/check/" + orderId;
        Boolean orderExists = restTemplate.getForObject(orderCheckUrl, Boolean.class);
        
        if (Boolean.TRUE.equals(orderExists)) {
            // åˆ›å»ºæ”¯ä»˜è®°å½•
            return "æ”¯ä»˜åˆ›å»ºæˆåŠŸï¼Œè®¢å•IDï¼š" + orderId;
        } else {
            return "è®¢å•ä¸å­˜åœ¨ï¼Œæ”¯ä»˜åˆ›å»ºå¤±è´¥";
        }
    }
}

// RestTemplateé…ç½®
@Configuration
public class RestTemplateConfig {
    
    @Bean
    @LoadBalanced
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
```

## 7.5 å‘½åç©ºé—´ä¸åˆ†ç»„



### ğŸ¢ ç¯å¢ƒéš”ç¦»ï¼ˆå‘½åç©ºé—´ï¼‰



```
Nacoså‘½åç©ºé—´è®¾è®¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Nacos Server              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ devå‘½åç©ºé—´                      â”‚
â”‚     â””â”€â”€ order-service-dev          â”‚
â”‚     â””â”€â”€ user-service-dev           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚  ğŸ“ testå‘½åç©ºé—´                     â”‚
â”‚     â””â”€â”€ order-service-test         â”‚
â”‚     â””â”€â”€ user-service-test          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ prodå‘½åç©ºé—´                     â”‚  
â”‚     â””â”€â”€ order-service-prod         â”‚
â”‚     â””â”€â”€ user-service-prod          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é…ç½®ä¸åŒç¯å¢ƒ**ï¼š
```yaml
# å¼€å‘ç¯å¢ƒé…ç½®

spring:
  profiles:
    active: dev
  cloud:
    nacos:
      discovery:
        namespace: dev-namespace-id

---
# ç”Ÿäº§ç¯å¢ƒé…ç½®  

spring:
  profiles:
    active: prod
  cloud:
    nacos:
      discovery:
        namespace: prod-namespace-id
```

### ğŸ‘¥ ä¸šåŠ¡éš”ç¦»ï¼ˆåˆ†ç»„ï¼‰



```yaml
# ä¸åŒä¸šåŠ¡çº¿ä½¿ç”¨ä¸åŒåˆ†ç»„

spring:
  cloud:
    nacos:
      discovery:
        group: ORDER_GROUP    # è®¢å•ä¸šåŠ¡ç»„
#        # group: USER_GROUP   # ç”¨æˆ·ä¸šåŠ¡ç»„  
#        # group: PAY_GROUP    # æ”¯ä»˜ä¸šåŠ¡ç»„
```

---

# 8. ğŸ’“ æœåŠ¡å¥åº·æ£€æŸ¥æœºåˆ¶



## 8.1 å¥åº·æ£€æŸ¥çš„é‡è¦æ€§



**ä¸ºä»€ä¹ˆéœ€è¦å¥åº·æ£€æŸ¥ï¼Ÿ**

```
æ²¡æœ‰å¥åº·æ£€æŸ¥çš„é—®é¢˜ï¼š

ç”¨æˆ·æœåŠ¡ â”€â”€è°ƒç”¨â”€â”€> è®¢å•æœåŠ¡å®ä¾‹1 (æ­£å¸¸è¿è¡Œ)
ç”¨æˆ·æœåŠ¡ â”€â”€è°ƒç”¨â”€â”€> è®¢å•æœåŠ¡å®ä¾‹2 (æ•°æ®åº“è¿æ¥æ–­å¼€ï¼Œä½†è¿›ç¨‹è¿˜åœ¨)
ç”¨æˆ·æœåŠ¡ â”€â”€è°ƒç”¨â”€â”€> è®¢å•æœåŠ¡å®ä¾‹3 (å†…å­˜æº¢å‡ºï¼Œå“åº”è¶…æ…¢)

é—®é¢˜ï¼š
- å®ä¾‹2å’Œ3è™½ç„¶æ³¨å†Œåœ¨æœåŠ¡ä¸­å¿ƒï¼Œä½†å®é™…ä¸èƒ½æ­£å¸¸æœåŠ¡
- ç”¨æˆ·è¯·æ±‚ä¼šéšæœºåˆ†é…åˆ°æ•…éšœå®ä¾‹ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥
- å½±å“ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿç¨³å®šæ€§
```

**å¥åº·æ£€æŸ¥è§£å†³æ–¹æ¡ˆ**ï¼š
```
æœ‰å¥åº·æ£€æŸ¥çš„æ•ˆæœï¼š

æ³¨å†Œä¸­å¿ƒå®šæœŸæ£€æŸ¥ï¼š
â”œâ”€â”€ è®¢å•æœåŠ¡å®ä¾‹1: âœ… å¥åº· (æ­£å¸¸æ¥æ”¶æµé‡)
â”œâ”€â”€ è®¢å•æœåŠ¡å®ä¾‹2: âŒ ä¸å¥åº· (ä»è´Ÿè½½å‡è¡¡ä¸­ç§»é™¤)  
â””â”€â”€ è®¢å•æœåŠ¡å®ä¾‹3: âŒ ä¸å¥åº· (ä»è´Ÿè½½å‡è¡¡ä¸­ç§»é™¤)

ç»“æœï¼š
ç”¨æˆ·æœåŠ¡åªä¼šè°ƒç”¨å¥åº·çš„å®ä¾‹1ï¼Œä¿è¯è¯·æ±‚æˆåŠŸç‡
```

## 8.2 å¥åº·æ£€æŸ¥ç±»å‹è¯¦è§£



### ğŸ” HTTPå¥åº·æ£€æŸ¥



**åŸç†**ï¼šæ³¨å†Œä¸­å¿ƒå®šæœŸå‘æœåŠ¡å‘é€HTTPè¯·æ±‚ï¼Œæ ¹æ®å“åº”åˆ¤æ–­å¥åº·çŠ¶æ€

```java
// ç®€å•çš„å¥åº·æ£€æŸ¥ç«¯ç‚¹
@RestController
public class HealthCheckController {
    
    @Autowired
    private DataSource dataSource;
    
    @GetMapping("/health")
    public ResponseEntity<Map<String, Object>> health() {
        Map<String, Object> healthInfo = new HashMap<>();
        
        try {
            // æ£€æŸ¥æ•°æ®åº“è¿æ¥
            Connection connection = dataSource.getConnection();
            connection.close();
            healthInfo.put("database", "UP");
            
            // æ£€æŸ¥å†…å­˜ä½¿ç”¨ç‡
            Runtime runtime = Runtime.getRuntime();
            long totalMemory = runtime.totalMemory();
            long freeMemory = runtime.freeMemory();
            double memoryUsage = (double)(totalMemory - freeMemory) / totalMemory;
            
            if (memoryUsage < 0.9) {  // å†…å­˜ä½¿ç”¨ç‡ä½äº90%
                healthInfo.put("memory", "UP");
                healthInfo.put("memoryUsage", String.format("%.2f%%", memoryUsage * 100));
            } else {
                healthInfo.put("memory", "DOWN");
                return ResponseEntity.status(503).body(healthInfo);
            }
            
            healthInfo.put("status", "UP");
            return ResponseEntity.ok(healthInfo);
            
        } catch (Exception e) {
            healthInfo.put("status", "DOWN");
            healthInfo.put("error", e.getMessage());
            return ResponseEntity.status(503).body(healthInfo);
        }
    }
}
```

### ğŸ’“ å¿ƒè·³æ£€æŸ¥



**åŸç†**ï¼šæœåŠ¡ä¸»åŠ¨å‘æ³¨å†Œä¸­å¿ƒå‘é€å¿ƒè·³åŒ…ï¼Œè¯æ˜è‡ªå·±è¿˜æ´»ç€

```
å¿ƒè·³æ£€æŸ¥æµç¨‹ï¼š

æœåŠ¡å®ä¾‹                        æ³¨å†Œä¸­å¿ƒ
    â”‚                             â”‚
    â”‚â”€â”€â”€â”€â”€â”€ å¿ƒè·³åŒ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚  
    â”‚   "æˆ‘è¿˜æ´»ç€ï¼"                â”‚  è®°å½•å¿ƒè·³æ—¶é—´
    â”‚                             â”‚
    â”‚    (30ç§’å)                  â”‚
    â”‚â”€â”€â”€â”€â”€â”€ å¿ƒè·³åŒ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚  
    â”‚                             â”‚  æ›´æ–°å¿ƒè·³æ—¶é—´
    â”‚                             â”‚
    â”‚ X æœåŠ¡æ•…éšœï¼Œåœæ­¢å‘é€å¿ƒè·³      â”‚
    â”‚                             â”‚  
    â”‚                             â”‚  90ç§’åæ£€æµ‹å¿ƒè·³è¶…æ—¶
    â”‚                             â”‚  æ ‡è®°æœåŠ¡ä¸ºDOWN
```

### ğŸ”§ TCPç«¯å£æ£€æŸ¥



**åŸç†**ï¼šæ£€æŸ¥æœåŠ¡ç«¯å£æ˜¯å¦å¯ä»¥å»ºç«‹TCPè¿æ¥

```yaml
# Consul TCPæ£€æŸ¥é…ç½®

spring:
  cloud:
    consul:
      discovery:
        health-check-path: ""           # ä¸ä½¿ç”¨HTTPæ£€æŸ¥
        health-check-interval: 10s
        health-check-tcp: true          # å¯ç”¨TCPæ£€æŸ¥
        health-check-timeout: 5s
```

## 8.3 Spring Boot Actuatoré›†æˆ



### ğŸ“Š Actuatorå¥åº·ç›‘æ§



**æ·»åŠ ä¾èµ–**ï¼š
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

**é…ç½®ç›‘æ§ç«¯ç‚¹**ï¼š
```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics    # æš´éœ²çš„ç›‘æ§ç«¯ç‚¹
  endpoint:
    health:
      show-details: always             # æ˜¾ç¤ºè¯¦ç»†å¥åº·ä¿¡æ¯
  health:
    defaults:
      enabled: true
    disk-space:
      enabled: true
      threshold: 10MB                  # ç£ç›˜ç©ºé—´é˜ˆå€¼
```

**è‡ªå®šä¹‰å¥åº·æŒ‡ç¤ºå™¨**ï¼š
```java
@Component
public class CustomHealthIndicator implements HealthIndicator {
    
    @Override
    public Health health() {
        // æ£€æŸ¥å¤–éƒ¨ä¾èµ–æœåŠ¡
        if (isExternalServiceAvailable()) {
            return Health.up()
                    .withDetail("externalService", "å¯ç”¨")
                    .withDetail("responseTime", "200ms")
                    .build();
        } else {
            return Health.down()
                    .withDetail("externalService", "ä¸å¯ç”¨")
                    .withDetail("error", "è¿æ¥è¶…æ—¶")
                    .build();
        }
    }
    
    private boolean isExternalServiceAvailable() {
        // å®é™…æ£€æŸ¥é€»è¾‘ï¼Œæ¯”å¦‚è°ƒç”¨å¤–éƒ¨API
        try {
            // æ¨¡æ‹Ÿå¤–éƒ¨æœåŠ¡è°ƒç”¨
            Thread.sleep(100);
            return true;
        } catch (Exception e) {
            return false;
        }
    }
}
```

## 8.4 å¥åº·æ£€æŸ¥æœ€ä½³å®è·µ



### âœ… æ£€æŸ¥é¡¹ç›®è®¾è®¡åŸåˆ™



```
å¥åº·æ£€æŸ¥åº”è¯¥åŒ…å«çš„é¡¹ç›®ï¼š

ğŸ”¸ å¿…æ£€é¡¹ç›®ï¼ˆå½±å“æ ¸å¿ƒåŠŸèƒ½ï¼‰ï¼š
â”œâ”€â”€ æ•°æ®åº“è¿æ¥çŠ¶æ€
â”œâ”€â”€ ç¼“å­˜è¿æ¥çŠ¶æ€  
â”œâ”€â”€ å¿…è¦çš„å¤–éƒ¨APIå¯ç”¨æ€§
â””â”€â”€ åº”ç”¨ç¨‹åºæ ¸å¿ƒç»„ä»¶çŠ¶æ€

ğŸ”¸ å¯é€‰é¡¹ç›®ï¼ˆå½±å“æ€§èƒ½ä½†ä¸å½±å“å¯ç”¨æ€§ï¼‰ï¼š
â”œâ”€â”€ ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡
â”œâ”€â”€ å†…å­˜ä½¿ç”¨ç‡
â”œâ”€â”€ CPUä½¿ç”¨ç‡  
â””â”€â”€ å¯é€‰çš„å¤–éƒ¨æœåŠ¡çŠ¶æ€

ğŸ”¸ ä¸åº”è¯¥æ£€æŸ¥çš„é¡¹ç›®ï¼š
â”œâ”€â”€ ä¸šåŠ¡æ•°æ®å®Œæ•´æ€§ï¼ˆå¤ªè€—æ—¶ï¼‰
â”œâ”€â”€ å¤æ‚çš„ä¸šåŠ¡é€»è¾‘éªŒè¯
â””â”€â”€ éœ€è¦é•¿æ—¶é—´æ‰§è¡Œçš„æ“ä½œ
```

**æ£€æŸ¥ç­–ç•¥é…ç½®**ï¼š
```yaml
# å¥åº·æ£€æŸ¥é…ç½®å»ºè®®

spring:
  cloud:
    nacos:
      discovery:
        health-check-url: http://localhost:8080/actuator/health
        health-check-interval: 5s       # æ£€æŸ¥é—´éš”ä¸è¦å¤ªé¢‘ç¹
        health-check-timeout: 3s        # è¶…æ—¶æ—¶é—´è¦åˆç†
        healthy-check-fail-fast: true   # å¿«é€Ÿå¤±è´¥ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…
```

---

# 9. ğŸ—ï¸ é«˜å¯ç”¨ä¸å¤šæ³¨å†Œä¸­å¿ƒ



## 9.1 å•ç‚¹æ•…éšœé—®é¢˜



**æ³¨å†Œä¸­å¿ƒå•ç‚¹æ•…éšœçš„å½±å“**ï¼š

```
å•ä¸ªæ³¨å†Œä¸­å¿ƒçš„é£é™©ï¼š

æ­£å¸¸æƒ…å†µï¼š
æœåŠ¡A â”€â”€â”€â”€> æ³¨å†Œä¸­å¿ƒ <â”€â”€â”€â”€ æœåŠ¡B
         (ä¸€åˆ‡æ­£å¸¸)

æ³¨å†Œä¸­å¿ƒæ•…éšœï¼š
æœåŠ¡A  X    æ³¨å†Œä¸­å¿ƒ    X  æœåŠ¡B
         (å®•æœº)

ç»“æœï¼š
- æ–°æœåŠ¡æ— æ³•æ³¨å†Œ
- æœåŠ¡å‘ç°å¤±è´¥  
- å·²æœ‰æœåŠ¡è°ƒç”¨å¯èƒ½å¤±è´¥ï¼ˆå¦‚æœå®¢æˆ·ç«¯ç¼“å­˜è¿‡æœŸï¼‰
```

## 9.2 Eurekaé«˜å¯ç”¨é›†ç¾¤



### ğŸ”„ Eurekaé›†ç¾¤æ­å»º



**é›†ç¾¤æ¶æ„è®¾è®¡**ï¼š
```
Eurekaé«˜å¯ç”¨æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Eureka     â”‚<â”€â”€â”€>â”‚  Eureka     â”‚<â”€â”€â”€>â”‚  Eureka     â”‚
â”‚  Server 1   â”‚     â”‚  Server 2   â”‚     â”‚  Server 3   â”‚
â”‚ (8761ç«¯å£)  â”‚     â”‚ (8762ç«¯å£)  â”‚     â”‚ (8763ç«¯å£)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                   â†‘                   â†‘
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å®¢æˆ·ç«¯åŒæ—¶æ³¨å†Œåˆ°3ä¸ªèŠ‚ç‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Eureka Server 1é…ç½®**ï¼š
```yaml
server:
  port: 8761
  
eureka:
  instance:
    hostname: eureka-server-1
  client:
    register-with-eureka: true    # é›†ç¾¤æ¨¡å¼ä¸‹éœ€è¦æ³¨å†Œåˆ°å…¶ä»–èŠ‚ç‚¹
    fetch-registry: true          # éœ€è¦ä»å…¶ä»–èŠ‚ç‚¹è·å–ä¿¡æ¯
    service-url:
      defaultZone: http://eureka-server-2:8762/eureka/,http://eureka-server-3:8763/eureka/
```

**Eureka Server 2é…ç½®**ï¼š
```yaml
server:
  port: 8762
  
eureka:
  instance:
    hostname: eureka-server-2
  client:
    service-url:
      defaultZone: http://eureka-server-1:8761/eureka/,http://eureka-server-3:8763/eureka/
```

**å®¢æˆ·ç«¯é…ç½®ï¼ˆè¿æ¥å¤šä¸ªEureka Serverï¼‰**ï¼š
```yaml
eureka:
  client:
    service-url:
      defaultZone: http://eureka-server-1:8761/eureka/,http://eureka-server-2:8762/eureka/,http://eureka-server-3:8763/eureka/
```

## 9.3 Consulé›†ç¾¤éƒ¨ç½²



### ğŸ—³ï¸ Consul Raftä¸€è‡´æ€§



**Consulé›†ç¾¤è§’è‰²**ï¼š
```
Consulé›†ç¾¤æ¶æ„ï¼š

æ•°æ®ä¸­å¿ƒ1ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Consul    â”‚  â”‚   Consul    â”‚  â”‚   Consul    â”‚
â”‚   Server    â”‚  â”‚   Server    â”‚  â”‚   Server    â”‚  
â”‚  (Leader)   â”‚  â”‚ (Follower)  â”‚  â”‚ (Follower)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Raftåè®®ä¿è¯ä¸€è‡´æ€§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å„ä¸ªæœåŠ¡å™¨ä¸Šçš„Agentï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Consul Agentâ”‚  â”‚ Consul Agentâ”‚  â”‚ Consul Agentâ”‚
â”‚  å¾®æœåŠ¡A     â”‚  â”‚  å¾®æœåŠ¡B     â”‚  â”‚  å¾®æœåŠ¡C     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç”Ÿäº§ç¯å¢ƒConsulé›†ç¾¤é…ç½®**ï¼š
```bash
# Server 1 é…ç½®

consul agent \
  -server \
  -bootstrap-expect=3 \
  -data-dir=/opt/consul/data \
  -node=consul-server-1 \
  -bind=192.168.1.10 \
  -client=0.0.0.0 \
  -retry-join=192.168.1.11 \
  -retry-join=192.168.1.12 \
  -ui
```

## 9.4 å¤šæ³¨å†Œä¸­å¿ƒç­–ç•¥



### ğŸ”€ åŒæ³¨å†Œä¸­å¿ƒæ¨¡å¼



**ä½¿ç”¨åœºæ™¯**ï¼šé€æ­¥è¿ç§»æˆ–è€…å¼‚æ„ç³»ç»Ÿé›†æˆ

```java
@Configuration
public class MultiRegistryConfig {
    
    // æ³¨å†Œåˆ°Eureka
    @Bean
    @Primary
    public EurekaClient eurekaClient() {
        return new EurekaClient();
    }
    
    // åŒæ—¶æ³¨å†Œåˆ°Consul  
    @Bean
    public ConsulClient consulClient() {
        return new ConsulClient("localhost", 8500);
    }
}

@Component
public class MultiRegistryService {
    
    @Autowired
    private EurekaClient eurekaClient;
    
    @Autowired
    private ConsulClient consulClient;
    
    @PostConstruct
    public void registerToMultipleRegistry() {
        // åŒæ—¶æ³¨å†Œåˆ°ä¸¤ä¸ªæ³¨å†Œä¸­å¿ƒ
        registerToEureka();
        registerToConsul();
    }
    
    private void registerToEureka() {
        // Eurekaæ³¨å†Œé€»è¾‘
    }
    
    private void registerToConsul() {
        // Consulæ³¨å†Œé€»è¾‘  
    }
}
```

### ğŸ¯ æ³¨å†Œä¸­å¿ƒé€‰æ‹©ç­–ç•¥



**åŸºäºé…ç½®çš„åŠ¨æ€é€‰æ‹©**ï¼š
```yaml
registry:
  type: eureka  # å¯ä»¥æ˜¯ eureka, consul, nacos
  
---
# å¼€å‘ç¯å¢ƒä½¿ç”¨Eureka

spring:
  profiles: dev
registry:
  type: eureka
  
---
# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Consul  

spring:
  profiles: prod
registry:
  type: consul
```

```java
@Component
public class RegistrySelector {
    
    @Value("${registry.type}")
    private String registryType;
    
    @Bean
    @ConditionalOnProperty(name = "registry.type", havingValue = "eureka")
    public DiscoveryClient eurekaDiscoveryClient() {
        return new EurekaDiscoveryClient();
    }
    
    @Bean
    @ConditionalOnProperty(name = "registry.type", havingValue = "consul")
    public DiscoveryClient consulDiscoveryClient() {
        return new ConsulDiscoveryClient();
    }
}
```

---

# 10. ğŸ¯ æœ€ä½³å®è·µä¸æ€»ç»“



## 10.1 æ³¨å†Œä¸­å¿ƒé€‰å‹å»ºè®®



### ğŸ“‹ é€‰å‹å†³ç­–è¡¨



| åœºæ™¯ | **æ¨èæ–¹æ¡ˆ** | **ç†ç”±** |
|------|-------------|----------|
| **Spring Cloudæ–°é¡¹ç›®** | `Nacos` | åŠŸèƒ½ä¸°å¯Œï¼Œæ€§èƒ½å¥½ï¼Œä¸­æ–‡ç¤¾åŒºæ´»è·ƒ |
| **å·²æœ‰Eurekaé¡¹ç›®** | `ç»§ç»­ä½¿ç”¨Eureka` | è¿ç§»æˆæœ¬é«˜ï¼Œç°æœ‰æ–¹æ¡ˆç¨³å®š |
| **å¤šè¯­è¨€å¾®æœåŠ¡** | `Consul` | å¤šè¯­è¨€æ”¯æŒå¥½ï¼ŒåŠŸèƒ½å…¨é¢ |
| **ç®€å•Javaé¡¹ç›®** | `Eureka` | é…ç½®ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½ |
| **é«˜å®‰å…¨è¦æ±‚** | `Consul` | å®‰å…¨æœºåˆ¶å®Œå–„ |
| **é˜¿é‡Œäº‘ç¯å¢ƒ** | `Nacos` | ä¸é˜¿é‡Œäº‘æ·±åº¦é›†æˆ |

## 10.2 ç”Ÿäº§ç¯å¢ƒé…ç½®å»ºè®®



### âš™ï¸ å…³é”®é…ç½®å‚æ•°



**Eurekaç”Ÿäº§é…ç½®**ï¼š
```yaml
eureka:
  server:
#    # å…³é—­è‡ªæˆ‘ä¿æŠ¤ï¼ˆç”Ÿäº§ç¯å¢ƒæ ¹æ®éœ€è¦ï¼‰
    enable-self-preservation: false
#    # æ¸…ç†é—´éš”  
    eviction-interval-timer-in-ms: 10000
  client:
#    # ç¼“å­˜åˆ·æ–°é—´éš”
    registry-fetch-interval-seconds: 10
#    # å¿ƒè·³é—´éš”
    lease-renewal-interval-in-seconds: 10
#    # è¿‡æœŸæ—¶é—´
    lease-expiration-duration-in-seconds: 30
```

**Nacosç”Ÿäº§é…ç½®**ï¼š
```yaml
spring:
  cloud:
    nacos:
      discovery:
#        # å¿ƒè·³é—´éš”
        heart-beat-interval: 5000
#        # å¿ƒè·³è¶…æ—¶æ—¶é—´
        heart-beat-timeout: 15000
#        # IPåˆ é™¤è¶…æ—¶æ—¶é—´
        ip-delete-timeout: 30000
#        # é›†ç¾¤åç§°
        cluster-name: DEFAULT
#        # æƒé‡ï¼ˆè´Ÿè½½å‡è¡¡ç”¨ï¼‰
        weight: 1.0
```

## 10.3 ç›‘æ§ä¸è¿ç»´



### ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡



**æ³¨å†Œä¸­å¿ƒç›‘æ§**ï¼š
```yaml
# ç›‘æ§é…ç½®

management:
  endpoints:
    web:
      exposure:
        include: "*"
  metrics:
    export:
      prometheus:
        enabled: true

# è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡

@Component
public class RegistryMetrics {
    
    private final MeterRegistry meterRegistry;
    private final DiscoveryClient discoveryClient;
    
    @Scheduled(fixedRate = 30000)  // æ¯30ç§’é‡‡é›†ä¸€æ¬¡
    public void collectMetrics() {
        // æœåŠ¡å®ä¾‹æ•°é‡
        List<String> services = discoveryClient.getServices();
        Gauge.builder("registry.services.count")
             .register(meterRegistry)
             .set(services.size());
             
        // æ¯ä¸ªæœåŠ¡çš„å®ä¾‹æ•°
        for (String service : services) {
            List<ServiceInstance> instances = discoveryClient.getInstances(service);
            Gauge.builder("registry.service.instances")
                 .tag("service", service)
                 .register(meterRegistry)
                 .set(instances.size());
        }
    }
}
```

## 10.4 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ



### â“ é—®é¢˜1ï¼šæœåŠ¡æ³¨å†Œå¤±è´¥



**ç°è±¡**ï¼šæœåŠ¡å¯åŠ¨ååœ¨æ³¨å†Œä¸­å¿ƒçœ‹ä¸åˆ°

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥ç½‘ç»œè¿é€šæ€§

telnet eureka-server 8761

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶

grep -r "eureka" application.yml

# 3. æŸ¥çœ‹å¯åŠ¨æ—¥å¿—

tail -f logs/spring.log | grep -i eureka
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# å¸¸è§é…ç½®é”™è¯¯ä¿®æ­£

eureka:
  client:
    service-url:
#      # é”™è¯¯ï¼šå°‘äº†/eurekaè·¯å¾„
#      # defaultZone: http://localhost:8761
#      # æ­£ç¡®ï¼š
      defaultZone: http://localhost:8761/eureka/
```

### â“ é—®é¢˜2ï¼šæœåŠ¡å‘ç°å»¶è¿Ÿ



**ç°è±¡**ï¼šæ–°å¯åŠ¨çš„æœåŠ¡è¿‡äº†å¾ˆä¹…æ‰èƒ½è¢«å…¶ä»–æœåŠ¡å‘ç°

**åŸå› åˆ†æ**ï¼š
- å®¢æˆ·ç«¯ç¼“å­˜åˆ·æ–°é—´éš”å¤ªé•¿
- æœåŠ¡ç«¯æ•°æ®åŒæ­¥å»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
eureka:
  client:
#    # ç¼©çŸ­ç¼“å­˜åˆ·æ–°é—´éš”ï¼ˆé»˜è®¤30ç§’ï¼‰
    registry-fetch-interval-seconds: 5
  server:
#    # ç¼©çŸ­æ¸…ç†é—´éš”ï¼ˆé»˜è®¤60ç§’ï¼‰
    eviction-interval-timer-in-ms: 10000
```

### â“ é—®é¢˜3ï¼šæœåŠ¡ä¸‹çº¿ä¸åŠæ—¶



**ç°è±¡**ï¼šæœåŠ¡å·²ç»åœæ­¢ï¼Œä½†å…¶ä»–æœåŠ¡è¿˜åœ¨è°ƒç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```java
// ä¼˜é›…åœæœºé…ç½®
@PreDestroy
public void gracefulShutdown() {
    // ä¸»åŠ¨ä»æ³¨å†Œä¸­å¿ƒæ³¨é”€
    eurekaClient.shutdown();
    
    // ç­‰å¾…æ­£åœ¨å¤„ç†çš„è¯·æ±‚å®Œæˆ
    try {
        Thread.sleep(10000);
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
}
```

## 10.5 æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### ğŸ¯ å¿…é¡»æŒæ¡çš„æ¦‚å¿µ



> ğŸ’¡ **æœåŠ¡æ³¨å†Œä¸å‘ç°æœ¬è´¨**ï¼šè®©å¾®æœåŠ¡èƒ½å¤Ÿè‡ªåŠ¨æ‰¾åˆ°å½¼æ­¤çš„æœºåˆ¶

**ğŸ”¸ æ ¸å¿ƒæµç¨‹**ï¼š
1. **æœåŠ¡æ³¨å†Œ**ï¼šæœåŠ¡å¯åŠ¨æ—¶å‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šè‡ªå·±çš„ä½ç½®
2. **å¿ƒè·³ä¿æ´»**ï¼šå®šæœŸå‘é€å¿ƒè·³è¯æ˜è‡ªå·±è¿˜æ´»ç€  
3. **æœåŠ¡å‘ç°**ï¼šéœ€è¦è°ƒç”¨æœåŠ¡æ—¶ä»æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢åœ°å€
4. **å¥åº·æ£€æŸ¥**ï¼šæ³¨å†Œä¸­å¿ƒä¸»åŠ¨æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
5. **æ•…éšœå‰”é™¤**ï¼šå°†ä¸å¥åº·çš„æœåŠ¡ä»å¯ç”¨åˆ—è¡¨ä¸­ç§»é™¤

**ğŸ”¸ æŠ€æœ¯é€‰å‹è¦ç‚¹**ï¼š
- **Eureka**ï¼šSpring Cloudç”Ÿæ€ï¼Œé…ç½®ç®€å•ï¼Œé€‚åˆJavaé¡¹ç›®
- **Consul**ï¼šå¤šè¯­è¨€æ”¯æŒï¼ŒåŠŸèƒ½å…¨é¢ï¼Œå®‰å…¨æ€§å¥½
- **Nacos**ï¼šé˜¿é‡Œå‡ºå“ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œé…ç½®ç®¡ç†äºŒåˆä¸€

**ğŸ”¸ ç”Ÿäº§ç¯å¢ƒå…³é”®ç‚¹**ï¼š
- âœ… éƒ¨ç½²æ³¨å†Œä¸­å¿ƒé›†ç¾¤ï¼Œé¿å…å•ç‚¹æ•…éšœ
- âœ… åˆç†é…ç½®å¿ƒè·³å’Œè¶…æ—¶å‚æ•°
- âœ… å®æ–½å®Œå–„çš„å¥åº·æ£€æŸ¥æœºåˆ¶
- âœ… å»ºç«‹ç›‘æ§å’Œå‘Šè­¦ä½“ç³»

### ğŸ’ **æ ¸å¿ƒè®°å¿†å£è¯€**



```
æœåŠ¡æ³¨å†ŒåƒæŠ¥æˆ·å£ï¼Œå‘Šè¯‰å¤§å®¶æˆ‘åœ¨å“ª
å¿ƒè·³ä¿æ´»è¯æ˜æ´»ç€ï¼Œè¶…æ—¶æ–­å¼€è‡ªåŠ¨è¸¢
æœåŠ¡å‘ç°æŸ¥é€šè®¯å½•ï¼Œæ‰¾åˆ°åœ°å€æ¥è°ƒç”¨  
å¥åº·æ£€æŸ¥ä¿è´¨é‡ï¼Œæ•…éšœæœåŠ¡ä¸æ¥å®¢
```

**å®é™…åº”ç”¨ä»·å€¼**ï¼š
- ğŸš€ **å¼€å‘æ•ˆç‡**ï¼šæ— éœ€æ‰‹åŠ¨ç®¡ç†æœåŠ¡åœ°å€ï¼Œä¸“æ³¨ä¸šåŠ¡å¼€å‘
- ğŸš€ **è¿ç»´ç®€åŒ–**ï¼šæœåŠ¡è‡ªåŠ¨æ³¨å†Œå‘ç°ï¼Œå‡å°‘é…ç½®ç®¡ç†å·¥ä½œ
- ğŸš€ **ç³»ç»Ÿç¨³å®š**ï¼šæ•…éšœè‡ªåŠ¨éš”ç¦»ï¼Œæé«˜æ•´ä½“å¯ç”¨æ€§
- ğŸš€ **æ‰©å±•æ€§å¥½**ï¼šæ–°å¢æœåŠ¡è‡ªåŠ¨åŠ å…¥ï¼Œè½»æ¾æ”¯æŒä¸šåŠ¡æ‰©å±•