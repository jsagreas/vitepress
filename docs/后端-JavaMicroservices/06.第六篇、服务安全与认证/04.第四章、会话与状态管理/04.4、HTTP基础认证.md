---
title: 4ã€HTTPåŸºç¡€è®¤è¯
---
## ğŸ“š ç›®å½•

1. [HTTPåŸºç¡€è®¤è¯æ˜¯ä»€ä¹ˆ](#1-HTTPåŸºç¡€è®¤è¯æ˜¯ä»€ä¹ˆ)
2. [å·¥ä½œåŸç†ä¸æµç¨‹](#2-å·¥ä½œåŸç†ä¸æµç¨‹)
3. [Spring Securityå®ç°](#3-Spring-Securityå®ç°)
4. [æ— çŠ¶æ€è®¤è¯ç‰¹æ€§](#4-æ— çŠ¶æ€è®¤è¯ç‰¹æ€§)
5. [å®‰å…¨æ€§åˆ†æ](#5-å®‰å…¨æ€§åˆ†æ)
6. [å®é™…åº”ç”¨åœºæ™¯](#6-å®é™…åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” HTTPåŸºç¡€è®¤è¯æ˜¯ä»€ä¹ˆ


### 1.1 ä»€ä¹ˆæ˜¯HTTPåŸºç¡€è®¤è¯


**ç®€å•ç†è§£**ï¼šå°±åƒè¿›é—¨éœ€è¦æŠ¥ä¸Š"æš—å·"ï¼ŒHTTPåŸºç¡€è®¤è¯å°±æ˜¯å®¢æˆ·ç«¯åœ¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæŠŠç”¨æˆ·åå’Œå¯†ç ä¸€èµ·å‘é€è¿‡å»éªŒè¯èº«ä»½ã€‚

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
è¿›å…¥éœ€è¦ä¼šå‘˜å¡çš„åœºæ‰€ï¼š
ä½ ï¼š"æˆ‘æ˜¯å¼ ä¸‰ï¼Œä¼šå‘˜å·123456"ï¼ˆæä¾›èº«ä»½ä¿¡æ¯ï¼‰
é—¨å«ï¼šæ ¸å¯¹ä¿¡æ¯ â†’ å…è®¸è¿›å…¥/æ‹’ç»

HTTPåŸºç¡€è®¤è¯ï¼š
å®¢æˆ·ç«¯ï¼š"æˆ‘æ˜¯adminï¼Œå¯†ç æ˜¯123456"ï¼ˆé€šè¿‡è¯·æ±‚å¤´å‘é€ï¼‰
æœåŠ¡å™¨ï¼šéªŒè¯ç”¨æˆ·åå¯†ç  â†’ å…è®¸è®¿é—®/æ‹’ç»
```

### 1.2 ä¸ºä»€ä¹ˆå«"åŸºç¡€"è®¤è¯


**åå­—çš„å«ä¹‰**ï¼š
- **åŸºç¡€ï¼ˆBasicï¼‰** = æœ€ç®€å•ã€æœ€åŸå§‹çš„è®¤è¯æ–¹å¼
- ä¸éœ€è¦å¤æ‚çš„åŠ å¯†ç®—æ³•
- ä¸éœ€è¦é¢å¤–çš„è®¤è¯æœåŠ¡å™¨
- ç›´æ¥æŠŠç”¨æˆ·åå¯†ç ç¼–ç åå‘é€

**å¯¹æ¯”å…¶ä»–è®¤è¯æ–¹å¼**ï¼š

| è®¤è¯æ–¹å¼ | å¤æ‚åº¦ | å®‰å…¨æ€§ | ä½¿ç”¨åœºæ™¯ |
|---------|-------|--------|----------|
| **HTTPåŸºç¡€è®¤è¯** | â­ æœ€ç®€å• | âš ï¸ è¾ƒä½ | å†…éƒ¨APIã€å¼€å‘æµ‹è¯• |
| Tokenè®¤è¯ | â­â­ ä¸­ç­‰ | âœ… è¾ƒé«˜ | Webåº”ç”¨ã€ç§»åŠ¨App |
| OAuth2.0 | â­â­â­ å¤æ‚ | âœ… é«˜ | ç¬¬ä¸‰æ–¹ç™»å½•ã€å¼€æ”¾å¹³å° |

---

## 2. ğŸ”„ å·¥ä½œåŸç†ä¸æµç¨‹


### 2.1 è®¤è¯æµç¨‹å›¾è§£


```
ç¬¬ä¸€æ¬¡è®¿é—®ï¼ˆæœªè®¤è¯ï¼‰ï¼š

å®¢æˆ·ç«¯                              æœåŠ¡å™¨
  |                                   |
  |--[1] GET /api/users-------------â†’|
  |    ï¼ˆæ²¡æœ‰è®¤è¯ä¿¡æ¯ï¼‰                |
  |                                   |
  |                                   | [æ£€æŸ¥] éœ€è¦è®¤è¯
  |                                   |
  |â†--[2] 401 Unauthorized-----------|
  |    WWW-Authenticate: Basic       |
  |    ï¼ˆè¦æ±‚æä¾›è®¤è¯ä¿¡æ¯ï¼‰             |


ç¬¬äºŒæ¬¡è®¿é—®ï¼ˆæºå¸¦è®¤è¯ï¼‰ï¼š

å®¢æˆ·ç«¯                              æœåŠ¡å™¨
  |                                   |
  |--[3] GET /api/users-------------â†’|
  |    Authorization: Basic YWRt...   |
  |    ï¼ˆæºå¸¦ç¼–ç çš„ç”¨æˆ·åå¯†ç ï¼‰         |
  |                                   |
  |                                   | [éªŒè¯] ç”¨æˆ·åå¯†ç 
  |                                   |
  |â†--[4] 200 OK---------------------|
  |    è¿”å›è¯·æ±‚çš„æ•°æ®                  |
```

### 2.2 Authorization Headerè¯¦è§£


**è¯·æ±‚å¤´çš„æ„æˆ**ï¼š

```
å®Œæ•´çš„è¯·æ±‚å¤´æ ¼å¼ï¼š
Authorization: Basic base64(username:password)

å®é™…ä¾‹å­ï¼š
ç”¨æˆ·åï¼šadmin
å¯†ç ï¼š123456

æ­¥éª¤1ï¼šæ‹¼æ¥å­—ç¬¦ä¸²
admin:123456

æ­¥éª¤2ï¼šBase64ç¼–ç 
YWRtaW46MTIzNDU2

æ­¥éª¤3ï¼šæ·»åŠ åˆ°è¯·æ±‚å¤´
Authorization: Basic YWRtaW46MTIzNDU2
```

**ğŸ’¡ ä¸ºä»€ä¹ˆç”¨Base64ç¼–ç ï¼Ÿ**
- Base64ä¸æ˜¯åŠ å¯†ï¼Œåªæ˜¯ç¼–ç ï¼ˆå­—ç¬¦è½¬æ¢ï¼‰
- ç›®çš„ï¼šè§£å†³ç‰¹æ®Šå­—ç¬¦ä¼ è¾“é—®é¢˜ï¼ˆæ¯”å¦‚å¯†ç é‡Œæœ‰ç©ºæ ¼ã€å†’å·ï¼‰
- ç±»ä¼¼äºï¼šæŠŠä¸­æ–‡è½¬æˆæ‹¼éŸ³æ–¹ä¾¿å¤–å›½äººè¯»ï¼Œä½†ä»»ä½•äººéƒ½èƒ½åå‘è½¬å›æ¥

**âš ï¸ é‡è¦æé†’**ï¼š
```
Base64ç¼–ç  â‰  åŠ å¯†ï¼

ç¼–ç ï¼šYWRtaW46MTIzNDU2
è§£ç ï¼šadmin:123456  â† è°éƒ½èƒ½è§£ç ï¼

æ‰€ä»¥å¿…é¡»é…åˆHTTPSä½¿ç”¨ï¼Œå¦åˆ™å¯†ç è£¸å¥”ï¼
```

### 2.3 è®¤è¯è¿‡ç¨‹çš„æœ¬è´¨


**æ¯æ¬¡è¯·æ±‚éƒ½è¦éªŒè¯**ï¼š
```
è¯·æ±‚1ï¼šæºå¸¦è®¤è¯ä¿¡æ¯ â†’ éªŒè¯ â†’ é€šè¿‡ â†’ è¿”å›æ•°æ®
è¯·æ±‚2ï¼šæºå¸¦è®¤è¯ä¿¡æ¯ â†’ éªŒè¯ â†’ é€šè¿‡ â†’ è¿”å›æ•°æ®
è¯·æ±‚3ï¼šæºå¸¦è®¤è¯ä¿¡æ¯ â†’ éªŒè¯ â†’ é€šè¿‡ â†’ è¿”å›æ•°æ®

ç‰¹ç‚¹ï¼š
âœ“ æ¯æ¬¡éƒ½è¦å¸¦ç”¨æˆ·åå¯†ç 
âœ“ æœåŠ¡å™¨ä¸è®°ä½ä½ ï¼ˆæ— çŠ¶æ€ï¼‰
âœ“ ä¸éœ€è¦ç™»å½•æ¥å£
âœ“ ä¸éœ€è¦Session
```

---

## 3. âš™ï¸ Spring Securityå®ç°


### 3.1 æœ€ç®€å•çš„é…ç½®


**å¯ç”¨HTTPåŸºç¡€è®¤è¯**ï¼š

```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
            // å¯ç”¨HTTPåŸºç¡€è®¤è¯
            .httpBasic(Customizer.withDefaults())
            // é…ç½®å“ªäº›æ¥å£éœ€è¦è®¤è¯
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/**").authenticated()  // APIæ¥å£éœ€è¦è®¤è¯
                .anyRequest().permitAll()                    // å…¶ä»–æ¥å£å…è®¸è®¿é—®
            );
        
        return http.build();
    }
}
```

**é…ç½®è¯´æ˜**ï¼š
- `httpBasic()` â†’ å¼€å¯HTTPåŸºç¡€è®¤è¯åŠŸèƒ½
- `authenticated()` â†’ éœ€è¦è®¤è¯æ‰èƒ½è®¿é—®
- `permitAll()` â†’ å…è®¸æ‰€æœ‰äººè®¿é—®

### 3.2 é…ç½®ç”¨æˆ·åå¯†ç 


**æ–¹å¼ä¸€ï¼šé…ç½®æ–‡ä»¶é…ç½®ï¼ˆæœ€ç®€å•ï¼‰**ï¼š

```yaml
# application.yml
spring:
  security:
    user:
      name: admin        # ç”¨æˆ·å
      password: 123456   # å¯†ç 
```

**æ–¹å¼äºŒï¼šå†…å­˜ä¸­é…ç½®ï¼ˆé€‚åˆæµ‹è¯•ï¼‰**ï¼š

```java
@Bean
public InMemoryUserDetailsManager userDetailsService() {
    UserDetails user = User.builder()
        .username("admin")
        .password("{noop}123456")  // {noop}è¡¨ç¤ºæ˜æ–‡å¯†ç 
        .roles("ADMIN")
        .build();
    
    return new InMemoryUserDetailsManager(user);
}
```

**ğŸ’¡ {noop}æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ**
```
{noop} = No Operationï¼ˆä¸è¿›è¡ŒåŠ å¯†æ“ä½œï¼‰

Spring Securityé»˜è®¤è¦æ±‚å¯†ç åŠ å¯†ï¼š
{bcrypt}$2a$10$...  â† BCryptåŠ å¯†
{noop}123456         â† æ˜æ–‡å¯†ç ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰
```

### 3.3 è‡ªå®šä¹‰è®¤è¯é€»è¾‘


**è¿æ¥æ•°æ®åº“éªŒè¯ç”¨æˆ·**ï¼š

```java
@Service
public class CustomUserDetailsService implements UserDetailsService {
    
    @Autowired
    private UserRepository userRepository;
    
    @Override
    public UserDetails loadUserByUsername(String username) {
        // ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·
        User user = userRepository.findByUsername(username)
            .orElseThrow(() -> new UsernameNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨"));
        
        // è¿”å›UserDetailså¯¹è±¡
        return org.springframework.security.core.userdetails.User.builder()
            .username(user.getUsername())
            .password(user.getPassword())  // æ•°æ®åº“ä¸­æ˜¯åŠ å¯†åçš„å¯†ç 
            .roles(user.getRole())
            .build();
    }
}
```

**é…ç½®å¯†ç åŠ å¯†å™¨**ï¼š

```java
@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();  // ä½¿ç”¨BCryptåŠ å¯†
}
```

---

## 4. ğŸ”„ æ— çŠ¶æ€è®¤è¯ç‰¹æ€§


### 4.1 ä»€ä¹ˆæ˜¯æ— çŠ¶æ€è®¤è¯


**æœ‰çŠ¶æ€ vs æ— çŠ¶æ€å¯¹æ¯”**ï¼š

```
ä¼ ç»ŸSessionè®¤è¯ï¼ˆæœ‰çŠ¶æ€ï¼‰ï¼š
                  æœåŠ¡å™¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sessionå­˜å‚¨                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ sessionId: abc123  â”‚     â”‚
â”‚  â”‚ ç”¨æˆ·: admin        â”‚     â”‚
â”‚  â”‚ ç™»å½•æ—¶é—´: ...      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘                    â†‘
     â”‚ æœåŠ¡å™¨è®°ä½ä½        â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


HTTPåŸºç¡€è®¤è¯ï¼ˆæ— çŠ¶æ€ï¼‰ï¼š
æ¯æ¬¡è¯·æ±‚éƒ½æºå¸¦ï¼š
Authorization: Basic YWRtaW46MTIzNDU2

æœåŠ¡å™¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ”¶åˆ°è¯·æ±‚                â”‚
â”‚ â†’ è§£ç éªŒè¯              â”‚
â”‚ â†’ å¤„ç†è¯·æ±‚              â”‚
â”‚ â†’ å¿˜è®°ä½ ï¼ˆä¸ä¿å­˜ä¿¡æ¯ï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ— çŠ¶æ€çš„å¥½å¤„


**ä¼˜åŠ¿åˆ†æ**ï¼š

â‘  **æœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ç”¨æˆ·ä¿¡æ¯**
```
èŠ‚çœæœåŠ¡å™¨å†…å­˜ï¼š
- ä¸éœ€è¦Sessionå­˜å‚¨
- ä¸éœ€è¦è®°ä½è°ç™»å½•äº†
- æ”¯æŒæ›´å¤šå¹¶å‘ç”¨æˆ·
```

â‘¡ **å¤©ç„¶æ”¯æŒåˆ†å¸ƒå¼**
```
è¯·æ±‚åˆ†å‘åœºæ™¯ï¼š
è¯·æ±‚1 â†’ æœåŠ¡å™¨Aï¼ˆéªŒè¯é€šè¿‡ï¼‰
è¯·æ±‚2 â†’ æœåŠ¡å™¨Bï¼ˆéªŒè¯é€šè¿‡ï¼‰
è¯·æ±‚3 â†’ æœåŠ¡å™¨Cï¼ˆéªŒè¯é€šè¿‡ï¼‰

âœ“ ä¸éœ€è¦Sessionå…±äº«
âœ“ ä»»ä½•æœåŠ¡å™¨éƒ½èƒ½ç‹¬ç«‹éªŒè¯
```

â‘¢**ç®€åŒ–æœåŠ¡ç«¯é€»è¾‘**
```
ä¸éœ€è¦ï¼š
âœ— Sessionç®¡ç†
âœ— ç™»å½•æ¥å£
âœ— é€€å‡ºæ¥å£
âœ— Sessionè¿‡æœŸå¤„ç†
```

### 4.3 é€‚ç”¨åœºæ™¯åˆ†æ


**ğŸ¯ é€‚åˆHTTPåŸºç¡€è®¤è¯çš„åœºæ™¯**ï¼š

| åœºæ™¯ | åŸå›  | ç¤ºä¾‹ |
|------|------|------|
| **å†…éƒ¨API** | ä¸å¯¹å¤–æš´éœ²ï¼Œå®‰å…¨é£é™©å¯æ§ | å¾®æœåŠ¡é—´è°ƒç”¨ |
| **å¼€å‘æµ‹è¯•** | å¿«é€ŸéªŒè¯ï¼Œæ–¹ä¾¿è°ƒè¯• | æµ‹è¯•ç¯å¢ƒæ¥å£ |
| **ç®€å•å·¥å…·** | ä¸éœ€è¦å¤æ‚è®¤è¯ | è¿ç»´è„šæœ¬ã€ç›‘æ§å·¥å…· |

**âŒ ä¸é€‚åˆçš„åœºæ™¯**ï¼š

| åœºæ™¯ | åŸå›  | åº”è¯¥ç”¨ä»€ä¹ˆ |
|------|------|-----------|
| **Webå‰ç«¯** | æµè§ˆå™¨ä¼šå¼¹å‡ºè®¤è¯æ¡†ï¼Œä½“éªŒå·® | Tokenè®¤è¯ |
| **ç§»åŠ¨App** | éœ€è¦é¢‘ç¹ä¼ å¯†ç ï¼Œä¸å®‰å…¨ | OAuth2.0 |
| **å…¬ç½‘API** | å¯†ç å®¹æ˜“è¢«æˆªè· | APIå¯†é’¥+ç­¾å |

---

## 5. ğŸ›¡ï¸ å®‰å…¨æ€§åˆ†æ


### 5.1 å®‰å…¨é£é™©è§£æ


**æ ¸å¿ƒé£é™©ï¼šå¯†ç ä¼ è¾“**

```
HTTPä¼ è¾“ï¼ˆä¸å®‰å…¨ï¼‰ï¼š

å®¢æˆ·ç«¯                  ç½‘ç»œï¼ˆæ˜æ–‡ï¼‰                æœåŠ¡å™¨
  |                                                  |
  |--Authorization: Basic YWRtaW46MTIzNDU2------â†’|
  |                                                  |
       â†‘
   é»‘å®¢å¯ä»¥æˆªè·å¹¶è§£ç ï¼
   YWRtaW46MTIzNDU2 â†’ admin:123456


HTTPSä¼ è¾“ï¼ˆå®‰å…¨ï¼‰ï¼š

å®¢æˆ·ç«¯                  ç½‘ç»œï¼ˆåŠ å¯†ï¼‰                æœåŠ¡å™¨
  |                                                  |
  |--[åŠ å¯†çš„æ•°æ®: *&^%$#@!...]---------------â†’|
  |                                                  |
       â†‘
   é»‘å®¢åªèƒ½çœ‹åˆ°ä¹±ç 
```

### 5.2 å¿…é¡»é…åˆHTTPSä½¿ç”¨


**å¼ºåˆ¶HTTPSé…ç½®**ï¼š

```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
        // è¦æ±‚æ‰€æœ‰è¯·æ±‚ä½¿ç”¨HTTPS
        .requiresChannel(channel -> channel
            .anyRequest().requiresSecure()
        )
        .httpBasic(Customizer.withDefaults())
        .authorizeHttpRequests(auth -> auth
            .anyRequest().authenticated()
        );
    
    return http.build();
}
```

**é…ç½®è¯´æ˜**ï¼š
- `requiresSecure()` â†’ å¼ºåˆ¶ä½¿ç”¨HTTPS
- HTTPè¯·æ±‚ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°HTTPS

### 5.3 å…¶ä»–å®‰å…¨æªæ–½


**â‘  é™åˆ¶è®¤è¯å¤±è´¥æ¬¡æ•°**ï¼š

```java
// é˜²æ­¢æš´åŠ›ç ´è§£
@Component
public class AuthenticationFailureListener {
    
    private Map<String, Integer> failureCount = new ConcurrentHashMap<>();
    
    @EventListener
    public void onAuthenticationFailure(AuthenticationFailureBadCredentialsEvent event) {
        String username = event.getAuthentication().getName();
        
        // è®°å½•å¤±è´¥æ¬¡æ•°
        failureCount.merge(username, 1, Integer::sum);
        
        // è¶…è¿‡5æ¬¡é”å®šè´¦æˆ·
        if (failureCount.get(username) >= 5) {
            // é”å®šé€»è¾‘
        }
    }
}
```

**â‘¡ IPç™½åå•é™åˆ¶**ï¼š

```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
        .httpBasic(Customizer.withDefaults())
        .authorizeHttpRequests(auth -> auth
            .requestMatchers("/api/**")
            .access(new WebExpressionAuthorizationManager(
                "hasIpAddress('192.168.1.0/24')"  // åªå…è®¸å†…ç½‘è®¿é—®
            ))
        );
    
    return http.build();
}
```

---

## 6. ğŸ“± å®é™…åº”ç”¨åœºæ™¯


### 6.1 å¾®æœåŠ¡é—´è°ƒç”¨


**åœºæ™¯è¯´æ˜**ï¼šæœåŠ¡Aè°ƒç”¨æœåŠ¡Bçš„API

```
ç”¨æˆ·æœåŠ¡                          è®¢å•æœåŠ¡
(Service A)                      (Service B)
    |                                |
    |--GET /api/orders/user/123----â†’|
    |  Authorization: Basic xxx       |
    |                                |
    |                                | [éªŒè¯] ç”¨æˆ·åå¯†ç 
    |                                |
    |â†--è¿”å›ç”¨æˆ·çš„è®¢å•åˆ—è¡¨------------|
```

**RestTemplateé…ç½®**ï¼š

```java
@Configuration
public class RestTemplateConfig {
    
    @Bean
    public RestTemplate restTemplate() {
        RestTemplate restTemplate = new RestTemplate();
        
        // æ·»åŠ åŸºç¡€è®¤è¯æ‹¦æˆªå™¨
        restTemplate.getInterceptors().add((request, body, execution) -> {
            String auth = "service-a:secret-key";
            byte[] encodedAuth = Base64.getEncoder().encode(auth.getBytes());
            String authHeader = "Basic " + new String(encodedAuth);
            request.getHeaders().set("Authorization", authHeader);
            
            return execution.execute(request, body);
        });
        
        return restTemplate;
    }
}
```

**è°ƒç”¨ç¤ºä¾‹**ï¼š

```java
@Service
public class OrderService {
    
    @Autowired
    private RestTemplate restTemplate;
    
    public List<Order> getUserOrders(Long userId) {
        String url = "http://order-service/api/orders/user/" + userId;
        
        // è‡ªåŠ¨æºå¸¦è®¤è¯ä¿¡æ¯
        return restTemplate.exchange(
            url,
            HttpMethod.GET,
            null,
            new ParameterizedTypeReference<List<Order>>() {}
        ).getBody();
    }
}
```

### 6.2 å‘½ä»¤è¡Œå·¥å…·è®¿é—®API


**curlå‘½ä»¤ç¤ºä¾‹**ï¼š

```bash
# æ–¹å¼1ï¼šç›´æ¥åœ¨URLä¸­æŒ‡å®š
curl -u admin:123456 http://localhost:8080/api/users

# æ–¹å¼2ï¼šæ‰‹åŠ¨æŒ‡å®šAuthorizationå¤´
curl -H "Authorization: Basic YWRtaW46MTIzNDU2" \
     http://localhost:8080/api/users

# æ–¹å¼3ï¼šä½¿ç”¨-uå‚æ•°ï¼ˆæ¨èï¼‰
curl -u admin:123456 https://api.example.com/data
```

### 6.3 ç›‘æ§ç³»ç»Ÿé›†æˆ


**Prometheusç›‘æ§é…ç½®**ï¼š

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'spring-app'
    metrics_path: '/actuator/prometheus'
    basic_auth:
      username: 'monitor'
      password: 'monitor123'
    static_configs:
      - targets: ['localhost:8080']
```

**Spring Boot Actuatoré…ç½®**ï¼š

```java
@Configuration
public class ActuatorSecurityConfig {
    
    @Bean
    @Order(1)  // ä¼˜å…ˆçº§é«˜äºå…¶ä»–é…ç½®
    public SecurityFilterChain actuatorSecurityFilterChain(HttpSecurity http) throws Exception {
        http
            .securityMatcher("/actuator/**")  // åªå¯¹actuatorç«¯ç‚¹ç”Ÿæ•ˆ
            .httpBasic(Customizer.withDefaults())
            .authorizeHttpRequests(auth -> auth
                .anyRequest().hasRole("MONITOR")
            );
        
        return http.build();
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 HTTPåŸºç¡€è®¤è¯æœ¬è´¨


```
ğŸ”‘ æ ¸å¿ƒç‰¹å¾ï¼š
â”œâ”€ æ¯æ¬¡è¯·æ±‚éƒ½è¦æºå¸¦ç”¨æˆ·åå¯†ç 
â”œâ”€ é€šè¿‡Authorizationè¯·æ±‚å¤´ä¼ è¾“
â”œâ”€ Base64ç¼–ç ï¼ˆä¸æ˜¯åŠ å¯†ï¼ï¼‰
â””â”€ æœåŠ¡å™¨æ— çŠ¶æ€éªŒè¯

âš¡ è®¤è¯æµç¨‹ï¼š
ç”¨æˆ·å:å¯†ç  â†’ Base64ç¼–ç  â†’ è¯·æ±‚å¤´ â†’ æœåŠ¡å™¨è§£ç éªŒè¯

ğŸ”’ å®‰å…¨è¦æ±‚ï¼š
å¿…é¡»ä½¿ç”¨HTTPSï¼Œå¦åˆ™å¯†ç è£¸å¥”ï¼
```

### 7.2 Spring Securityé…ç½®è¦ç‚¹


```java
// ä¸‰æ­¥å¯ç”¨HTTPåŸºç¡€è®¤è¯
1. .httpBasic()           // å¯ç”¨åŸºç¡€è®¤è¯
2. .authenticated()       // è¦æ±‚è®¤è¯
3. é…ç½®ç”¨æˆ·åå¯†ç           // æä¾›è®¤è¯æ•°æ®æº
```

### 7.3 é€‚ç”¨åœºæ™¯æ€»ç»“


**âœ… é€‚åˆä½¿ç”¨çš„åœºæ™¯**ï¼š
- å†…éƒ¨å¾®æœåŠ¡è°ƒç”¨ï¼ˆé…åˆHTTPSï¼‰
- å¼€å‘æµ‹è¯•ç¯å¢ƒ
- ç®€å•çš„APIå·¥å…·
- æœåŠ¡ç›‘æ§é›†æˆ

**âŒ ä¸é€‚åˆçš„åœºæ™¯**ï¼š
- é¢å‘ç”¨æˆ·çš„Webåº”ç”¨ï¼ˆä½“éªŒå·®ï¼‰
- å…¬ç½‘æš´éœ²çš„APIï¼ˆä¸å¤Ÿå®‰å…¨ï¼‰
- ç§»åŠ¨Appï¼ˆéœ€è¦é¢‘ç¹ä¼ å¯†ç ï¼‰
- éœ€è¦ç»†ç²’åº¦æƒé™æ§åˆ¶çš„ç³»ç»Ÿ

### 7.4 å®‰å…¨æœ€ä½³å®è·µ


```
ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥æ¸…å•ï¼š
â–¡ å¿…é¡»ä½¿ç”¨HTTPSä¼ è¾“
â–¡ å¯†ç ä½¿ç”¨BCryptç­‰å¼ºåŠ å¯†
â–¡ é™åˆ¶è®¤è¯å¤±è´¥æ¬¡æ•°
â–¡ è€ƒè™‘IPç™½åå•é™åˆ¶
â–¡ å®šæœŸæ›´æ¢å¯†ç 
â–¡ æ—¥å¿—è®°å½•è®¤è¯å¤±è´¥
```

### 7.5 å…³é”®è®°å¿†ç‚¹


**æ ¸å¿ƒå…¬å¼**ï¼š
```
HTTPåŸºç¡€è®¤è¯ = Base64(ç”¨æˆ·å:å¯†ç ) + HTTPS
                  â†‘                    â†‘
               ç¼–ç ä¸æ˜¯åŠ å¯†          å¿…é¡»åŠ å¯†ä¼ è¾“
```

**å¯¹æ¯”è®°å¿†**ï¼š
- **Sessionè®¤è¯**ï¼šæœåŠ¡å™¨è®°ä½ä½ ï¼ˆæœ‰çŠ¶æ€ï¼‰
- **HTTPåŸºç¡€è®¤è¯**ï¼šæ¯æ¬¡éƒ½è¦éªŒè¯ï¼ˆæ— çŠ¶æ€ï¼‰
- **Tokenè®¤è¯**ï¼šé¢å‘ä»¤ç‰Œä»£æ›¿å¯†ç ï¼ˆæ— çŠ¶æ€+å®‰å…¨ï¼‰

**å®ç”¨å£è¯€**ï¼š
```
åŸºç¡€è®¤è¯è™½ç®€å•ï¼ŒHTTPSä¿å®‰å…¨
å†…éƒ¨è°ƒç”¨æœ€åˆé€‚ï¼Œå¯¹å¤–ä½¿ç”¨éœ€è°¨æ…
æ¯æ¬¡éƒ½å¸¦ç”¨æˆ·åï¼ŒæœåŠ¡å™¨ä¸è®°çŠ¶æ€
Base64éåŠ å¯†ï¼Œæ˜æ–‡ä¼ è¾“è¦é¿å…
```