---
title: 3ã€æ–¹æ³•çº§å®‰å…¨æ§åˆ¶
---
## ğŸ“š ç›®å½•

1. [æ–¹æ³•çº§å®‰å…¨æ§åˆ¶æ¦‚è¿°](#1-æ–¹æ³•çº§å®‰å…¨æ§åˆ¶æ¦‚è¿°)
2. [å¯ç”¨æ–¹æ³•å®‰å…¨é…ç½®](#2-å¯ç”¨æ–¹æ³•å®‰å…¨é…ç½®)
3. [å‰ç½®æˆæƒæ³¨è§£è¯¦è§£](#3-å‰ç½®æˆæƒæ³¨è§£è¯¦è§£)
4. [åç½®æˆæƒä¸è¿‡æ»¤](#4-åç½®æˆæƒä¸è¿‡æ»¤)
5. [SpELè¡¨è¾¾å¼åº”ç”¨](#5-SpELè¡¨è¾¾å¼åº”ç”¨)
6. [å®æˆ˜åº”ç”¨åœºæ™¯](#6-å®æˆ˜åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ–¹æ³•çº§å®‰å…¨æ§åˆ¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯æ–¹æ³•çº§å®‰å…¨æ§åˆ¶


> ğŸ“– **æ ¸å¿ƒç†è§£**  
> æ–¹æ³•çº§å®‰å…¨æ§åˆ¶å°±åƒæ˜¯ç»™ä½ çš„æ¯ä¸ªä¸šåŠ¡æ–¹æ³•åŠ ä¸Šä¸€é“"é—¨ç¦ç³»ç»Ÿ"ï¼Œåªæœ‰æ‹¥æœ‰æ­£ç¡®æƒé™çš„ç”¨æˆ·æ‰èƒ½æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ã€‚è¿™æ¯”URLçº§åˆ«çš„æ§åˆ¶æ›´ç»†ç²’åº¦ï¼Œå¯ä»¥ç²¾ç¡®åˆ°æ¯ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡æ“ä½œã€‚

**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
```
é“¶è¡Œä¸šåŠ¡åœºæ™¯ç±»æ¯”ï¼š

URLçº§åˆ«æ§åˆ¶ = è¿›å…¥é“¶è¡Œå¤§é—¨çš„æƒé™
â”œâ”€ åªè¦æ˜¯å®¢æˆ·å°±èƒ½è¿›é“¶è¡Œ
â””â”€ ä½†ä¸æ˜¯æ‰€æœ‰ä¸šåŠ¡éƒ½èƒ½åŠ

æ–¹æ³•çº§æ§åˆ¶ = å…·ä½“ä¸šåŠ¡çš„åŠç†æƒé™  
â”œâ”€ å­˜æ¬¾ï¼šæ™®é€šå®¢æˆ·å¯ä»¥
â”œâ”€ å–æ¬¾ï¼šéœ€è¦å¯†ç éªŒè¯
â”œâ”€ è´·æ¬¾å®¡æ‰¹ï¼šåªæœ‰ä¿¡è´·ç»ç†å¯ä»¥
â””â”€ æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·ï¼šåªæœ‰è¡Œé•¿å¯ä»¥
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ–¹æ³•çº§æ§åˆ¶


**ä¼ ç»ŸURLæ§åˆ¶çš„å±€é™æ€§**ï¼š

```
åœºæ™¯ï¼šç”¨æˆ·ç®¡ç†æ¥å£
URL: /api/users

é—®é¢˜ï¼š
âŒ æ‰€æœ‰ç”¨æˆ·éƒ½ç”¨åŒä¸€ä¸ªURL
âŒ æ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±ä¿¡æ¯
âŒ ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
âŒ è¶…çº§ç®¡ç†å‘˜å¯ä»¥åˆ é™¤ç”¨æˆ·

ä»…é URLæ§åˆ¶åšä¸åˆ°è¿™ä¹ˆç»†ï¼
```

**æ–¹æ³•çº§æ§åˆ¶çš„ä¼˜åŠ¿**ï¼š

ğŸ¯ **ç²¾ç»†åŒ–æƒé™**
- åŒä¸€ä¸ªæ¥å£ï¼Œä¸åŒè§’è‰²æ‰§è¡Œä¸åŒé€»è¾‘
- å¯ä»¥æ ¹æ®å‚æ•°åŠ¨æ€åˆ¤æ–­æƒé™
- å¯ä»¥å¯¹è¿”å›ç»“æœè¿›è¡Œè¿‡æ»¤

âš¡ **çµæ´»æ€§é«˜**
- æƒé™è§„åˆ™å†™åœ¨æ–¹æ³•ä¸Šï¼Œä¸€ç›®äº†ç„¶
- æ”¯æŒå¤æ‚çš„æƒé™è¡¨è¾¾å¼
- å¯ä»¥ç»“åˆä¸šåŠ¡é€»è¾‘åˆ¤æ–­

ğŸ”’ **å®‰å…¨æ€§å¼º**
- å³ä½¿URLè¢«ç»•è¿‡ï¼Œæ–¹æ³•å±‚ä¾ç„¶ä¿æŠ¤
- åŒé‡é˜²æŠ¤ï¼Œæ›´åŠ å®‰å…¨

### 1.3 æ–¹æ³•å®‰å…¨çš„æ ¸å¿ƒæœºåˆ¶


```
å·¥ä½œæµç¨‹å›¾ï¼š

ç”¨æˆ·è¯·æ±‚
    â†“
URLæƒé™æ£€æŸ¥ï¼ˆç¬¬ä¸€é“é˜²çº¿ï¼‰
    â†“
è¿›å…¥Controlleræ–¹æ³•
    â†“
æ–¹æ³•å®‰å…¨æ‹¦æˆªå™¨å¯åŠ¨ â† è¿™é‡Œæ˜¯æ–¹æ³•çº§æ§åˆ¶
    â†“
æ£€æŸ¥æ–¹æ³•æ³¨è§£ï¼ˆ@PreAuthorizeç­‰ï¼‰
    â†“
è¯„ä¼°æƒé™è¡¨è¾¾å¼
    â†“
æƒé™é€šè¿‡ï¼Ÿ
    â”œâ”€ YES â†’ æ‰§è¡Œä¸šåŠ¡æ–¹æ³•
    â””â”€ NO  â†’ æŠ›å‡ºAccessDeniedException

æ‰§è¡Œå®Œæ¯•
    â†“
åç½®æ£€æŸ¥ï¼ˆ@PostAuthorizeï¼‰
    â†“
ç»“æœè¿‡æ»¤ï¼ˆ@PostFilterï¼‰
    â†“
è¿”å›ç»™ç”¨æˆ·
```

---

## 2. ğŸ”§ å¯ç”¨æ–¹æ³•å®‰å…¨é…ç½®


### 2.1 @EnableMethodSecurity æ³¨è§£


> ğŸ’¡ **æ–°æ‰‹ç†è§£**  
> è¿™ä¸ªæ³¨è§£å°±åƒæ˜¯å¼€å¯æ–¹æ³•å®‰å…¨åŠŸèƒ½çš„"æ€»å¼€å…³"ï¼Œä¸åŠ è¿™ä¸ªæ³¨è§£ï¼Œåé¢æ‰€æœ‰çš„æ–¹æ³•å®‰å…¨æ³¨è§£éƒ½ä¸ä¼šç”Ÿæ•ˆã€‚

**åŸºç¡€é…ç½®ç¤ºä¾‹**ï¼š

```java
@Configuration
@EnableMethodSecurity  // Spring Security 6.0+ æ–°æ³¨è§£
public class MethodSecurityConfig {
    // é»˜è®¤é…ç½®ï¼Œå·²ç»å¤Ÿç”¨
}
```

**é…ç½®å‚æ•°è¯¦è§£**ï¼š

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ä½¿ç”¨åœºæ™¯ |
|-----|------|--------|---------|
| `prePostEnabled` | å¯ç”¨@PreAuthorize/@PostAuthorize | `true` | `å‡ ä¹æ‰€æœ‰åœºæ™¯` |
| `securedEnabled` | å¯ç”¨@Securedæ³¨è§£ | `false` | `å…¼å®¹è€é¡¹ç›®` |
| `jsr250Enabled` | å¯ç”¨@RolesAllowedæ³¨è§£ | `false` | `ä½¿ç”¨JSR-250è§„èŒƒ` |

**å®é™…é…ç½®ç¤ºä¾‹**ï¼š

```java
@Configuration
@EnableMethodSecurity(
    prePostEnabled = true,    // å¯ç”¨@PreAuthorize/@PostAuthorize
    securedEnabled = true,    // å¯ç”¨@Secured
    jsr250Enabled = true      // å¯ç”¨@RolesAllowed
)
public class MethodSecurityConfig {
    
    // å¯ä»¥åœ¨è¿™é‡Œè‡ªå®šä¹‰æƒé™è¯„ä¼°å™¨
    @Bean
    public MethodSecurityExpressionHandler methodSecurityExpressionHandler() {
        DefaultMethodSecurityExpressionHandler handler = 
            new DefaultMethodSecurityExpressionHandler();
        // è‡ªå®šä¹‰é…ç½®...
        return handler;
    }
}
```

### 2.2 æ—§ç‰ˆæœ¬é…ç½®å¯¹æ¯”


ğŸ”„ **ç‰ˆæœ¬æ¼”è¿›**ï¼š

```
Spring Security 5.xï¼ˆæ—§ç‰ˆï¼‰ï¼š
@EnableGlobalMethodSecurity(
    prePostEnabled = true
)

Spring Security 6.0+ï¼ˆæ–°ç‰ˆï¼‰ï¼š
@EnableMethodSecurity(
    prePostEnabled = true
)

å˜åŒ–ï¼šåå­—æ›´ç®€æ´ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§
```

---

## 3. ğŸ›¡ï¸ å‰ç½®æˆæƒæ³¨è§£è¯¦è§£


### 3.1 @PreAuthorize æ ¸å¿ƒæ³¨è§£


> ğŸ“– **æœ¬è´¨ç†è§£**  
> @PreAuthorize å°±æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰å…ˆæ£€æŸ¥æƒé™ï¼Œå°±åƒç”µå½±é™¢æ£€ç¥¨ä¸€æ ·ï¼Œç¥¨å¯¹äº†æ‰è®©ä½ è¿›å»çœ‹ç”µå½±ã€‚

**åŸºç¡€ç”¨æ³•**ï¼š

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // âœ… æœ€ç®€å•ï¼šæ£€æŸ¥æ˜¯å¦ç™»å½•
    @PreAuthorize("isAuthenticated()")
    @GetMapping("/profile")
    public User getProfile() {
        return getCurrentUser();
    }
    
    // âœ… æ£€æŸ¥è§’è‰²ï¼šåªæœ‰ç®¡ç†å‘˜å¯ä»¥è®¿é—®
    @PreAuthorize("hasRole('ADMIN')")
    @GetMapping("/all")
    public List<User> getAllUsers() {
        return userService.findAll();
    }
    
    // âœ… æ£€æŸ¥æƒé™ï¼šéœ€è¦ç‰¹å®šæƒé™
    @PreAuthorize("hasAuthority('USER_DELETE')")
    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable Long id) {
        userService.delete(id);
    }
}
```

**è§’è‰²vsæƒé™çš„åŒºåˆ«**ï¼š

```
ğŸ­ è§’è‰²ï¼ˆRoleï¼‰ï¼š
- æ˜¯ä¸€ä¸ªèº«ä»½æ ‡è¯†
- ä¾‹å¦‚ï¼šADMINï¼ˆç®¡ç†å‘˜ï¼‰ã€USERï¼ˆæ™®é€šç”¨æˆ·ï¼‰
- Spring Securityä¼šè‡ªåŠ¨åŠ "ROLE_"å‰ç¼€
- hasRole('ADMIN') å®é™…æ£€æŸ¥çš„æ˜¯ ROLE_ADMIN

ğŸ”‘ æƒé™ï¼ˆAuthorityï¼‰ï¼š
- æ˜¯å…·ä½“çš„æ“ä½œè®¸å¯
- ä¾‹å¦‚ï¼šUSER_READã€USER_WRITEã€USER_DELETE
- ä¸ä¼šè‡ªåŠ¨åŠ å‰ç¼€
- hasAuthority('USER_DELETE') å°±æ£€æŸ¥ USER_DELETE

å®é™…åº”ç”¨ï¼š
ä¸€ä¸ªADMINè§’è‰²å¯èƒ½åŒ…å«å¤šä¸ªæƒé™ï¼š
- USER_READ
- USER_WRITE  
- USER_DELETE
```

### 3.2 @Secured æ³¨è§£


> ğŸ’¡ **ç†è§£è¦ç‚¹**  
> @Secured æ˜¯æ›´ç®€å•çš„è§’è‰²æ£€æŸ¥æ³¨è§£ï¼Œåªèƒ½åˆ¤æ–­è§’è‰²ï¼Œä¸èƒ½å†™å¤æ‚è¡¨è¾¾å¼ã€‚é€‚åˆç®€å•åœºæ™¯ã€‚

```java
// âš ï¸ æ³¨æ„ï¼š@Secured å¿…é¡»å†™å®Œæ•´çš„è§’è‰²åï¼ˆå¸¦ROLE_å‰ç¼€ï¼‰
@Secured("ROLE_ADMIN")
@GetMapping("/admin/dashboard")
public Dashboard getAdminDashboard() {
    return dashboardService.getAdminData();
}

// å¤šä¸ªè§’è‰²ï¼ˆæ»¡è¶³å…¶ä¸€å³å¯ï¼‰
@Secured({"ROLE_ADMIN", "ROLE_MANAGER"})
@GetMapping("/reports")
public List<Report> getReports() {
    return reportService.findAll();
}
```

**@Secured vs @PreAuthorize å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | @Secured | @PreAuthorize |
|-----|----------|---------------|
| **è¡¨è¾¾å¼æ”¯æŒ** | `âŒ ä¸æ”¯æŒ` | `âœ… æ”¯æŒSpEL` |
| **è§’è‰²æ£€æŸ¥** | `âœ… æ”¯æŒ` | `âœ… æ”¯æŒ` |
| **æƒé™æ£€æŸ¥** | `âŒ ä¸æ”¯æŒ` | `âœ… æ”¯æŒ` |
| **å¤æ‚é€»è¾‘** | `âŒ ä¸æ”¯æŒ` | `âœ… æ”¯æŒ` |
| **æ¨èä½¿ç”¨** | `è€é¡¹ç›®å…¼å®¹` | `æ–°é¡¹ç›®é¦–é€‰` |

### 3.3 @RolesAllowed æ³¨è§£


> ğŸ“– **JSR-250è§„èŒƒ**  
> @RolesAllowed æ˜¯Javaæ ‡å‡†è§„èŒƒçš„æ³¨è§£ï¼Œä¸æ˜¯Springä¸“å±çš„ã€‚å¦‚æœä½ çš„é¡¹ç›®è¦ç¬¦åˆJava EEæ ‡å‡†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªã€‚

```java
import javax.annotation.security.RolesAllowed;

@RolesAllowed("ADMIN")  // ä¸éœ€è¦ROLE_å‰ç¼€
@GetMapping("/admin/settings")
public Settings getSettings() {
    return settingsService.get();
}

// å¤šä¸ªè§’è‰²
@RolesAllowed({"ADMIN", "MANAGER"})
@GetMapping("/team/data")
public TeamData getTeamData() {
    return teamService.getData();
}
```

---

## 4. ğŸ” åç½®æˆæƒä¸è¿‡æ»¤


### 4.1 @PostAuthorize åç½®æˆæƒ


> ğŸ’¡ **ä½¿ç”¨åœºæ™¯**  
> æ–¹æ³•æ‰§è¡Œå®Œäº†ï¼Œæ ¹æ®è¿”å›ç»“æœå†å†³å®šç”¨æˆ·æ˜¯å¦æœ‰æƒé™çœ‹è¿™ä¸ªæ•°æ®ã€‚å°±åƒå¿«é€’åˆ°äº†ï¼Œæ ¹æ®æ”¶ä»¶äººä¿¡æ¯å†³å®šæ˜¯å¦ç»™ä½ ã€‚

**å…¸å‹åœºæ™¯**ï¼š

```java
@Service
public class OrderService {
    
    // æŸ¥è¯¢è®¢å•ï¼šåªèƒ½æŸ¥çœ‹è‡ªå·±çš„è®¢å•
    @PostAuthorize("returnObject.userId == authentication.principal.id")
    @GetMapping("/orders/{id}")
    public Order getOrder(@PathVariable Long id) {
        return orderRepository.findById(id);
    }
    
    // è§£é‡Šï¼š
    // returnObject = æ–¹æ³•è¿”å›çš„Orderå¯¹è±¡
    // authentication.principal.id = å½“å‰ç™»å½•ç”¨æˆ·çš„ID
    // å¦‚æœè®¢å•çš„userIdä¸ç­‰äºå½“å‰ç”¨æˆ·IDï¼ŒæŠ›å‡ºå¼‚å¸¸
}
```

**@PostAuthorize å·¥ä½œæµç¨‹**ï¼š

```
æ‰§è¡Œæµç¨‹ï¼š

1. ç”¨æˆ·è¯·æ±‚æŸ¥è¯¢è®¢å•
   â†“
2. æ–¹æ³•æ‰§è¡Œï¼Œä»æ•°æ®åº“æŸ¥å‡ºè®¢å•
   â†“
3. @PostAuthorize æ‹¦æˆªå™¨æ£€æŸ¥
   â†“
4. æ¯”è¾ƒ order.userId å’Œ å½“å‰ç”¨æˆ·ID
   â†“
5. ç›¸ç­‰ï¼Ÿ
   â”œâ”€ YES â†’ è¿”å›è®¢å•æ•°æ®
   â””â”€ NO  â†’ æŠ›å‡ºAccessDeniedException
```

**é«˜çº§ç”¨æ³•**ï¼š

```java
// åœºæ™¯ï¼šç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ï¼Œæ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„
@PostAuthorize("hasRole('ADMIN') or returnObject.userId == authentication.principal.id")
@GetMapping("/orders/{id}")
public Order getOrder(@PathVariable Long id) {
    return orderRepository.findById(id);
}
```

### 4.2 @PostFilter è¿”å›å€¼è¿‡æ»¤


> ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**  
> æ–¹æ³•è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œ@PostFilter å¯ä»¥è‡ªåŠ¨è¿‡æ»¤æ‰ç”¨æˆ·æ²¡æƒé™çœ‹çš„æ•°æ®ï¼Œåªè¿”å›ä»–èƒ½çœ‹çš„éƒ¨åˆ†ã€‚

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
@Service
public class ProjectService {
    
    // æŸ¥è¯¢é¡¹ç›®åˆ—è¡¨ï¼šåªè¿”å›å½“å‰ç”¨æˆ·å‚ä¸çš„é¡¹ç›®
    @PostFilter("filterObject.members.contains(authentication.principal.username)")
    public List<Project> getProjects() {
        // è¿™é‡ŒæŸ¥å‡ºæ‰€æœ‰é¡¹ç›®
        return projectRepository.findAll();
    }
    
    // è§£é‡Šï¼š
    // filterObject = åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆProjectå¯¹è±¡ï¼‰
    // æ£€æŸ¥é¡¹ç›®çš„membersåˆ—è¡¨æ˜¯å¦åŒ…å«å½“å‰ç”¨æˆ·
    // ä¸åŒ…å«çš„é¡¹ç›®ä¼šè¢«è‡ªåŠ¨è¿‡æ»¤æ‰
}
```

**è¿‡æ»¤æµç¨‹å›¾**ï¼š

```
åŸå§‹æ•°æ®ï¼š
[
  Project1ï¼ˆæˆå‘˜ï¼šå¼ ä¸‰ã€æå››ï¼‰
  Project2ï¼ˆæˆå‘˜ï¼šæå››ã€ç‹äº”ï¼‰
  Project3ï¼ˆæˆå‘˜ï¼šå¼ ä¸‰ã€ç‹äº”ï¼‰
]

å½“å‰ç”¨æˆ·ï¼šå¼ ä¸‰

@PostFilter å¤„ç†ï¼š
Project1 â†’ membersåŒ…å«å¼ ä¸‰ âœ… ä¿ç•™
Project2 â†’ membersä¸åŒ…å«å¼ ä¸‰ âŒ è¿‡æ»¤
Project3 â†’ membersåŒ…å«å¼ ä¸‰ âœ… ä¿ç•™

æœ€ç»ˆè¿”å›ï¼š
[
  Project1ï¼ˆæˆå‘˜ï¼šå¼ ä¸‰ã€æå››ï¼‰
  Project3ï¼ˆæˆå‘˜ï¼šå¼ ä¸‰ã€ç‹äº”ï¼‰
]
```

**æ³¨æ„äº‹é¡¹**ï¼š

> âš ï¸ **æ€§èƒ½è­¦å‘Š**  
> @PostFilter æ˜¯åœ¨å†…å­˜ä¸­è¿‡æ»¤æ•°æ®ï¼Œå¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼ˆæ¯”å¦‚10000æ¡ï¼‰ï¼Œä¼šå…ˆæŸ¥å‡ºæ‰€æœ‰æ•°æ®å†è¿‡æ»¤ï¼Œæ€§èƒ½å¾ˆå·®ï¼
> 
> **æœ€ä½³å®è·µ**ï¼šåœ¨æ•°æ®åº“å±‚é¢å°±åšå¥½æƒé™è¿‡æ»¤ï¼Œ@PostFilter åªç”¨äºå°æ•°æ®é‡åœºæ™¯ã€‚

### 4.3 @PreFilter å‚æ•°è¿‡æ»¤


> ğŸ“– **ä½¿ç”¨åœºæ™¯**  
> ç”¨æˆ·ä¼ æ¥ä¸€æ‰¹æ•°æ®ï¼Œå…ˆè¿‡æ»¤æ‰ä»–æ²¡æƒé™æ“ä½œçš„ï¼Œå†æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚

```java
// æ‰¹é‡åˆ é™¤ï¼šåªèƒ½åˆ é™¤è‡ªå·±åˆ›å»ºçš„é¡¹ç›®
@PreFilter("filterObject.createdBy == authentication.principal.username")
public void deleteProjects(List<Project> projects) {
    projectRepository.deleteAll(projects);
}

// æµç¨‹ï¼š
// 1. ç”¨æˆ·ä¼ å…¥è¦åˆ é™¤çš„é¡¹ç›®åˆ—è¡¨
// 2. @PreFilter è‡ªåŠ¨è¿‡æ»¤æ‰ä¸æ˜¯è‡ªå·±åˆ›å»ºçš„é¡¹ç›®
// 3. åªåˆ é™¤è¿‡æ»¤åå‰©ä¸‹çš„é¡¹ç›®
```

---

## 5. ğŸ“ SpELè¡¨è¾¾å¼åº”ç”¨


### 5.1 SpELè¡¨è¾¾å¼åŸºç¡€


> ğŸ’¡ **ä»€ä¹ˆæ˜¯SpEL**  
> SpELï¼ˆSpring Expression Languageï¼‰æ˜¯Springçš„è¡¨è¾¾å¼è¯­è¨€ï¼Œå¯ä»¥åœ¨æ³¨è§£ä¸­å†™é€»è¾‘åˆ¤æ–­ï¼Œå°±åƒå†™ç®€åŒ–ç‰ˆçš„Javaä»£ç ã€‚

**å¸¸ç”¨å†…ç½®å¯¹è±¡**ï¼š

| å¯¹è±¡ | è¯´æ˜ | ç¤ºä¾‹ç”¨æ³• |
|-----|------|---------|
| `authentication` | å½“å‰è®¤è¯ä¿¡æ¯ | `authentication.principal.username` |
| `principal` | å½“å‰ç™»å½•ç”¨æˆ· | `principal.id` |
| `returnObject` | æ–¹æ³•è¿”å›å€¼ | `returnObject.userId` |
| `filterObject` | è¿‡æ»¤æ—¶çš„å½“å‰å…ƒç´  | `filterObject.status` |
| `#å‚æ•°å` | æ–¹æ³•å‚æ•° | `#id`, `#user.name` |

**å¸¸ç”¨å†…ç½®æ–¹æ³•**ï¼š

```java
// 1. è®¤è¯æ£€æŸ¥
isAuthenticated()           // æ˜¯å¦å·²ç™»å½•
isAnonymous()              // æ˜¯å¦åŒ¿å
isRememberMe()             // æ˜¯å¦"è®°ä½æˆ‘"ç™»å½•
isFullyAuthenticated()     // æ˜¯å¦å®Œæ•´è®¤è¯ï¼ˆæ’é™¤è®°ä½æˆ‘ï¼‰

// 2. è§’è‰²æƒé™æ£€æŸ¥
hasRole('ADMIN')                    // æœ‰æŸä¸ªè§’è‰²
hasAnyRole('ADMIN', 'MANAGER')     // æœ‰ä»»æ„ä¸€ä¸ªè§’è‰²
hasAuthority('USER_DELETE')         // æœ‰æŸä¸ªæƒé™
hasAnyAuthority('READ', 'WRITE')   // æœ‰ä»»æ„ä¸€ä¸ªæƒé™

// 3. IPåœ°å€æ£€æŸ¥
hasIpAddress('192.168.1.1')        // æŒ‡å®šIP
hasIpAddress('192.168.1.0/24')     // IPæ®µ

// 4. å¯¹è±¡å±æ€§è®¿é—®
#user.id                            // è®¿é—®å‚æ•°å¯¹è±¡å±æ€§
returnObject.status                 // è®¿é—®è¿”å›å€¼å±æ€§
```

### 5.2 å®ç”¨è¡¨è¾¾å¼ç»„åˆ


**åœºæ™¯1ï¼šè§’è‰²å’Œæ‰€æœ‰æƒæ£€æŸ¥**

```java
// ç®¡ç†å‘˜å¯ä»¥ç¼–è¾‘æ‰€æœ‰æ–‡ç« ï¼Œä½œè€…åªèƒ½ç¼–è¾‘è‡ªå·±çš„
@PreAuthorize("hasRole('ADMIN') or #article.authorId == authentication.principal.id")
public void updateArticle(@RequestBody Article article) {
    articleService.update(article);
}
```

**åœºæ™¯2ï¼šå¤šæ¡ä»¶ç»„åˆ**

```java
// å¿…é¡»æ˜¯ç®¡ç†å‘˜ï¼Œä¸”ä¸èƒ½æ˜¯æµ‹è¯•ç¯å¢ƒ
@PreAuthorize("hasRole('ADMIN') and @environment.getProperty('app.env') != 'test'")
public void deleteAllData() {
    dataService.deleteAll();
}
```

**åœºæ™¯3ï¼šæ–¹æ³•å‚æ•°éªŒè¯**

```java
// æ£€æŸ¥å‚æ•°å€¼èŒƒå›´
@PreAuthorize("#amount > 0 and #amount <= 10000")
public void transfer(@RequestParam BigDecimal amount) {
    transferService.execute(amount);
}
```

**åœºæ™¯4ï¼šè°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•**

```java
// è‡ªå®šä¹‰æƒé™æ£€æŸ¥å™¨
@Component("customSecurity")
public class CustomSecurityService {
    
    public boolean canAccessProject(Long projectId, String username) {
        // è‡ªå®šä¹‰å¤æ‚çš„æƒé™é€»è¾‘
        Project project = projectRepository.findById(projectId);
        return project.getMembers().contains(username);
    }
}

// ä½¿ç”¨è‡ªå®šä¹‰æ–¹æ³•
@PreAuthorize("@customSecurity.canAccessProject(#id, authentication.principal.username)")
public Project getProject(@PathVariable Long id) {
    return projectRepository.findById(id);
}
```

### 5.3 SpEL é«˜çº§æŠ€å·§


**æŠ€å·§1ï¼šç©ºå€¼å®‰å…¨è®¿é—®**

```java
// ä½¿ç”¨ ?. é¿å…ç©ºæŒ‡é’ˆ
@PreAuthorize("#user?.department?.id == #deptId")
public void doSomething(@RequestParam Long deptId, @RequestBody User user) {
    // å¦‚æœuseræˆ–departmentä¸ºnullï¼Œè¡¨è¾¾å¼è¿”å›false
}
```

**æŠ€å·§2ï¼šé›†åˆæ“ä½œ**

```java
// æ£€æŸ¥é›†åˆåŒ…å«å…³ç³»
@PreAuthorize("#roles.contains('ADMIN')")
public void adminOperation(@RequestParam List<String> roles) {
    // ...
}

// é›†åˆè¿‡æ»¤
@PostFilter("filterObject.tags.?[#this == 'public'].size() > 0")
public List<Article> getArticles() {
    // åªè¿”å›åŒ…å«'public'æ ‡ç­¾çš„æ–‡ç« 
}
```

**æŠ€å·§3ï¼šä¸‰å…ƒè¿ç®—**

```java
@PreAuthorize("hasRole('ADMIN') ? true : #userId == authentication.principal.id")
public User getUser(@PathVariable Long userId) {
    // ç®¡ç†å‘˜å¯ä»¥æŸ¥æ‰€æœ‰ç”¨æˆ·ï¼Œæ™®é€šç”¨æˆ·åªèƒ½æŸ¥è‡ªå·±
}
```

---

## 6. ğŸš€ å®æˆ˜åº”ç”¨åœºæ™¯


### 6.1 åœºæ™¯1ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿ


```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // åœºæ™¯ï¼šæŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜çœ‹æ‰€æœ‰ï¼Œæ™®é€šç”¨æˆ·çœ‹è‡ªå·±ï¼‰
    @GetMapping
    @PreAuthorize("hasRole('ADMIN')")
    public List<User> getAllUsers() {
        return userService.findAll();
    }
    
    @GetMapping("/me")
    @PreAuthorize("isAuthenticated()")
    public User getMyInfo() {
        return userService.getCurrentUser();
    }
    
    // åœºæ™¯ï¼šæŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…ï¼ˆç®¡ç†å‘˜æˆ–æœ¬äººï¼‰
    @GetMapping("/{id}")
    @PreAuthorize("hasRole('ADMIN') or #id == authentication.principal.id")
    public User getUserById(@PathVariable Long id) {
        return userService.findById(id);
    }
    
    // åœºæ™¯ï¼šæ›´æ–°ç”¨æˆ·ï¼ˆåªèƒ½æ›´æ–°è‡ªå·±æˆ–ç®¡ç†å‘˜ï¼‰
    @PutMapping("/{id}")
    @PreAuthorize("hasRole('ADMIN') or #id == authentication.principal.id")
    public User updateUser(@PathVariable Long id, @RequestBody User user) {
        return userService.update(id, user);
    }
    
    // åœºæ™¯ï¼šåˆ é™¤ç”¨æˆ·ï¼ˆä»…è¶…çº§ç®¡ç†å‘˜ï¼‰
    @DeleteMapping("/{id}")
    @PreAuthorize("hasRole('SUPER_ADMIN')")
    public void deleteUser(@PathVariable Long id) {
        userService.delete(id);
    }
}
```

### 6.2 åœºæ™¯2ï¼šè®¢å•ç³»ç»Ÿ


```java
@RestController
@RequestMapping("/api/orders")
public class OrderController {
    
    // åœºæ™¯ï¼šåˆ›å»ºè®¢å•ï¼ˆå·²ç™»å½•å³å¯ï¼‰
    @PostMapping
    @PreAuthorize("isAuthenticated()")
    public Order createOrder(@RequestBody OrderDTO orderDTO) {
        return orderService.create(orderDTO);
    }
    
    // åœºæ™¯ï¼šæŸ¥çœ‹è®¢å•ï¼ˆåªèƒ½çœ‹è‡ªå·±çš„ï¼Œå®¢æœå’Œç®¡ç†å‘˜å¯ä»¥çœ‹æ‰€æœ‰ï¼‰
    @GetMapping("/{id}")
    @PostAuthorize("hasAnyRole('ADMIN', 'CUSTOMER_SERVICE') or returnObject.userId == authentication.principal.id")
    public Order getOrder(@PathVariable Long id) {
        return orderService.findById(id);
    }
    
    // åœºæ™¯ï¼šå–æ¶ˆè®¢å•ï¼ˆåªèƒ½å–æ¶ˆè‡ªå·±çš„å¾…æ”¯ä»˜è®¢å•ï¼‰
    @PostMapping("/{id}/cancel")
    @PreAuthorize("@orderSecurity.canCancel(#id, authentication.principal.id)")
    public void cancelOrder(@PathVariable Long id) {
        orderService.cancel(id);
    }
    
    // åœºæ™¯ï¼šè®¢å•é€€æ¬¾ï¼ˆéœ€è¦é€€æ¬¾æƒé™ï¼‰
    @PostMapping("/{id}/refund")
    @PreAuthorize("hasAuthority('ORDER_REFUND')")
    public void refundOrder(@PathVariable Long id) {
        orderService.refund(id);
    }
}

// è‡ªå®šä¹‰å®‰å…¨æ£€æŸ¥
@Component("orderSecurity")
public class OrderSecurityService {
    
    @Autowired
    private OrderRepository orderRepository;
    
    public boolean canCancel(Long orderId, Long userId) {
        Order order = orderRepository.findById(orderId);
        // åªèƒ½å–æ¶ˆè‡ªå·±çš„å¾…æ”¯ä»˜è®¢å•
        return order.getUserId().equals(userId) 
            && "PENDING".equals(order.getStatus());
    }
}
```

### 6.3 åœºæ™¯3ï¼šæ–‡æ¡£åä½œç³»ç»Ÿ


```java
@RestController
@RequestMapping("/api/documents")
public class DocumentController {
    
    // åœºæ™¯ï¼šæŸ¥çœ‹æ–‡æ¡£åˆ—è¡¨ï¼ˆè¿”å›æœ‰æƒé™çš„æ–‡æ¡£ï¼‰
    @GetMapping
    @PostFilter("@docSecurity.hasReadPermission(filterObject.id, authentication.principal.username)")
    public List<Document> getDocuments() {
        return documentService.findAll();
    }
    
    // åœºæ™¯ï¼šç¼–è¾‘æ–‡æ¡£ï¼ˆéœ€è¦ç¼–è¾‘æƒé™ï¼‰
    @PutMapping("/{id}")
    @PreAuthorize("@docSecurity.hasEditPermission(#id, authentication.principal.username)")
    public Document updateDocument(@PathVariable Long id, @RequestBody Document doc) {
        return documentService.update(id, doc);
    }
    
    // åœºæ™¯ï¼šåˆ†äº«æ–‡æ¡£ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯ä»¥åˆ†äº«ï¼‰
    @PostMapping("/{id}/share")
    @PreAuthorize("@docSecurity.isOwner(#id, authentication.principal.username)")
    public void shareDocument(@PathVariable Long id, @RequestBody ShareDTO shareDTO) {
        documentService.share(id, shareDTO);
    }
}

@Component("docSecurity")
public class DocumentSecurityService {
    
    @Autowired
    private DocumentPermissionRepository permissionRepo;
    
    public boolean hasReadPermission(Long docId, String username) {
        return permissionRepo.hasPermission(docId, username, "READ");
    }
    
    public boolean hasEditPermission(Long docId, String username) {
        return permissionRepo.hasPermission(docId, username, "EDIT");
    }
    
    public boolean isOwner(Long docId, String username) {
        return permissionRepo.hasPermission(docId, username, "OWNER");
    }
}
```

### 6.4 åœºæ™¯4ï¼šå¤šç§Ÿæˆ·ç³»ç»Ÿ


```java
@RestController
@RequestMapping("/api/tenants/{tenantId}/data")
public class TenantDataController {
    
    // åœºæ™¯ï¼šåªèƒ½è®¿é—®è‡ªå·±ç§Ÿæˆ·çš„æ•°æ®
    @GetMapping
    @PreAuthorize("@tenantSecurity.belongsToTenant(#tenantId, authentication.principal)")
    public List<Data> getTenantData(@PathVariable Long tenantId) {
        return dataService.findByTenant(tenantId);
    }
    
    // åœºæ™¯ï¼šè·¨ç§Ÿæˆ·æ•°æ®è®¿é—®ï¼ˆä»…è¶…çº§ç®¡ç†å‘˜ï¼‰
    @GetMapping("/all")
    @PreAuthorize("hasRole('SUPER_ADMIN')")
    public List<Data> getAllTenantsData() {
        return dataService.findAll();
    }
}

@Component("tenantSecurity")
public class TenantSecurityService {
    
    public boolean belongsToTenant(Long tenantId, UserDetails user) {
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å±äºè¯¥ç§Ÿæˆ·
        return ((CustomUserDetails) user).getTenantId().equals(tenantId);
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


> ğŸ¯ **å…³é”®ç†è§£**
> - æ–¹æ³•çº§å®‰å…¨æ˜¯åœ¨URLå®‰å…¨åŸºç¡€ä¸Šçš„ç¬¬äºŒé“é˜²çº¿
> - @PreAuthorize æ˜¯æœ€å¸¸ç”¨çš„æ³¨è§£ï¼Œæ”¯æŒå¼ºå¤§çš„SpELè¡¨è¾¾å¼
> - @PostAuthorize ç”¨äºæ ¹æ®è¿”å›ç»“æœåˆ¤æ–­æƒé™
> - @PostFilter/@PreFilter ç”¨äºè¿‡æ»¤æ•°æ®ï¼Œä½†è¦æ³¨æ„æ€§èƒ½

### 7.2 æ³¨è§£å¯¹æ¯”é€ŸæŸ¥è¡¨


| æ³¨è§£ | æ£€æŸ¥æ—¶æœº | æ”¯æŒSpEL | ä¸»è¦ç”¨é€” | ä½¿ç”¨é¢‘ç‡ |
|-----|---------|----------|---------|---------|
| `@PreAuthorize` | **æ–¹æ³•å‰** | `âœ…` | `å‰ç½®æƒé™æ£€æŸ¥` | `â­â­â­â­â­` |
| `@PostAuthorize` | **æ–¹æ³•å** | `âœ…` | `åç½®æƒé™æ£€æŸ¥` | `â­â­â­` |
| `@Secured` | **æ–¹æ³•å‰** | `âŒ` | `ç®€å•è§’è‰²æ£€æŸ¥` | `â­â­` |
| `@RolesAllowed` | **æ–¹æ³•å‰** | `âŒ` | `JSR-250è§’è‰²æ£€æŸ¥` | `â­` |
| `@PreFilter` | **æ–¹æ³•å‰** | `âœ…` | `å‚æ•°è¿‡æ»¤` | `â­` |
| `@PostFilter` | **æ–¹æ³•å** | `âœ…` | `è¿”å›å€¼è¿‡æ»¤` | `â­â­` |

### 7.3 å®æˆ˜æœ€ä½³å®è·µ


**âœ… æ¨èåšæ³•**ï¼š

1ï¸âƒ£ **ä¼˜å…ˆä½¿ç”¨ @PreAuthorize**
```java
// âœ… æ¸…æ™°æ˜ç¡®
@PreAuthorize("hasRole('ADMIN')")
public void adminMethod() { }
```

2ï¸âƒ£ **å¤æ‚æƒé™é€»è¾‘å°è£…åˆ°ä¸“é—¨çš„Service**
```java
// âœ… é€»è¾‘æ¸…æ™°ï¼Œæ˜“ç»´æŠ¤
@PreAuthorize("@customSecurity.canEdit(#id, principal)")
public void edit(Long id) { }
```

3ï¸âƒ£ **åˆç†ä½¿ç”¨ @PostAuthorize å¤„ç†æ•°æ®æ‰€æœ‰æƒ**
```java
// âœ… é€‚åˆæ•°æ®æ‰€æœ‰æƒæ£€æŸ¥
@PostAuthorize("returnObject.userId == principal.id")
public Order getOrder(Long id) { }
```

**âŒ é¿å…çš„åšæ³•**ï¼š

1ï¸âƒ£ **ä¸è¦è¿‡åº¦ä½¿ç”¨ @PostFilter**
```java
// âŒ æ€§èƒ½å·®ï¼Œå…ˆæŸ¥10000æ¡å†è¿‡æ»¤
@PostFilter("filterObject.userId == principal.id")
public List<Order> getOrders() {
    return orderRepository.findAll(); // æŸ¥10000æ¡
}

// âœ… åœ¨æ•°æ®åº“å±‚é¢è¿‡æ»¤
public List<Order> getOrders() {
    Long userId = SecurityUtils.getCurrentUserId();
    return orderRepository.findByUserId(userId);
}
```

2ï¸âƒ£ **ä¸è¦åœ¨SpELä¸­å†™è¿‡äºå¤æ‚çš„é€»è¾‘**
```java
// âŒ éš¾ä»¥ç†è§£å’Œç»´æŠ¤
@PreAuthorize("(hasRole('ADMIN') and #data.type == 'A') or (hasRole('USER') and #data.type == 'B' and #data.status == 'ACTIVE')")
public void process(Data data) { }

// âœ… æå–åˆ°ä¸“é—¨çš„æ–¹æ³•
@PreAuthorize("@securityService.canProcess(#data, principal)")
public void process(Data data) { }
```

### 7.4 å¸¸è§é—®é¢˜ä¸è§£å†³


**é—®é¢˜1ï¼šæ³¨è§£ä¸ç”Ÿæ•ˆ**

```
åŸå› åˆ†æï¼š
âŒ å¿˜è®°åŠ  @EnableMethodSecurity
âŒ åœ¨åŒä¸€ä¸ªç±»çš„æ–¹æ³•å†…éƒ¨è°ƒç”¨ï¼ˆAOPå¤±æ•ˆï¼‰
âŒ æ–¹æ³•ä¸æ˜¯publicçš„

è§£å†³æ–¹æ¡ˆï¼š
âœ… ç¡®ä¿é…ç½®ç±»æœ‰ @EnableMethodSecurity
âœ… é€šè¿‡æ³¨å…¥çš„Beanè°ƒç”¨ï¼Œä¸è¦this.method()
âœ… æ–¹æ³•è®¾ä¸ºpublic
```

**é—®é¢˜2ï¼šæ€§èƒ½é—®é¢˜**

```
å¸¸è§åœºæ™¯ï¼š
âŒ @PostFilter è¿‡æ»¤å¤§é‡æ•°æ®
âŒ åœ¨å¾ªç¯ä¸­è°ƒç”¨æœ‰æƒé™æ£€æŸ¥çš„æ–¹æ³•
âŒ æƒé™æ£€æŸ¥é€»è¾‘æŸ¥è¯¢æ•°æ®åº“

ä¼˜åŒ–æ–¹æ¡ˆï¼š
âœ… æ•°æ®åº“å±‚é¢è¿‡æ»¤æ•°æ®
âœ… æ‰¹é‡æ£€æŸ¥æƒé™
âœ… ç¼“å­˜æƒé™ç»“æœ
```

**é—®é¢˜3ï¼šè¡¨è¾¾å¼é”™è¯¯**

```
å¸¸è§é”™è¯¯ï¼š
âŒ hasRole('ROLE_ADMIN')  // å¤šä½™çš„ROLE_å‰ç¼€
âŒ #user.name             // æ²¡æœ‰ä¼ userå‚æ•°
âŒ returnObject.id        // åœ¨@PreAuthorizeä¸­ç”¨

æ­£ç¡®å†™æ³•ï¼š
âœ… hasRole('ADMIN')       // ä¼šè‡ªåŠ¨åŠ ROLE_
âœ… #user.name             // ç¡®ä¿å‚æ•°åæ­£ç¡®
âœ… returnObject.id        // åªåœ¨@PostAuthorizeä¸­ç”¨
```

### 7.5 å­¦ä¹ è·¯å¾„å»ºè®®


```
å­¦ä¹ è¿›åº¦ï¼š

ğŸŸ¢ ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å…¥é—¨
â”œâ”€ ç†è§£æ–¹æ³•å®‰å…¨çš„ä½œç”¨
â”œâ”€ æŒæ¡ @EnableMethodSecurity é…ç½®
â””â”€ å­¦ä¼šä½¿ç”¨ @PreAuthorize åŸºæœ¬ç”¨æ³•

ğŸŸ¡ ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶åº”ç”¨  
â”œâ”€ æŒæ¡ SpEL è¡¨è¾¾å¼è¯­æ³•
â”œâ”€ å­¦ä¼š @PostAuthorize ä½¿ç”¨
â””â”€ äº†è§£è‡ªå®šä¹‰æƒé™æ£€æŸ¥æ–¹æ³•

ğŸ”´ ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åº”ç”¨
â”œâ”€ è®¾è®¡å¤æ‚æƒé™æ¨¡å‹
â”œâ”€ æ€§èƒ½ä¼˜åŒ–å®è·µ
â””â”€ å¤šç§Ÿæˆ·æƒé™æ–¹æ¡ˆ
```

### 7.6 æ ¸å¿ƒè®°å¿†å£è¯€


> ğŸ§  **è®°å¿†è¦ç‚¹**
> 
> **æ–¹æ³•å®‰å…¨ä¸‰è¦ç´ **ï¼šå¯ç”¨é…ç½®ã€é€‰å¯¹æ³¨è§£ã€å†™å¥½è¡¨è¾¾å¼  
> **Preçœ‹æƒé™Postçœ‹æ•°æ®**ï¼šå‰ç½®æ£€æŸ¥æƒé™ï¼Œåç½®æ£€æŸ¥æ•°æ®  
> **è§’è‰²åŠ ROLEæƒé™ä¸åŠ **ï¼šhasRoleè‡ªåŠ¨åŠ å‰ç¼€ï¼ŒhasAuthorityä¸åŠ   
> **è¿‡æ»¤æ…ç”¨æŸ¥è¯¢ä¼˜å…ˆ**ï¼šæ•°æ®è¿‡æ»¤æ€§èƒ½å·®ï¼Œä¼˜å…ˆæ•°æ®åº“æŸ¥è¯¢  
> **å¤æ‚é€»è¾‘è¦å°è£…**ï¼šè¡¨è¾¾å¼åˆ«å¤ªé•¿ï¼Œæå–æˆæ–¹æ³•å¥½ç»´æŠ¤

---

## ğŸ”— ç›¸å…³çŸ¥è¯†é“¾æ¥


ğŸ“š **å»¶ä¼¸å­¦ä¹ **ï¼š
- å‰ç½®çŸ¥è¯†ï¼šSpring Security åŸºç¡€é…ç½®
- ç›¸å…³ä¸»é¢˜ï¼šURLçº§åˆ«çš„æƒé™æ§åˆ¶
- è¿›é˜¶ä¸»é¢˜ï¼šè‡ªå®šä¹‰æƒé™è¯„ä¼°å™¨
- å®æˆ˜æ¡ˆä¾‹ï¼šä¼ä¸šçº§RBACæƒé™è®¾è®¡

ğŸ’¡ **å®è·µå»ºè®®**ï¼š
1. ä»ç®€å•çš„è§’è‰²æ£€æŸ¥å¼€å§‹
2. é€æ­¥å­¦ä¹ SpELè¡¨è¾¾å¼
3. å®é™…é¡¹ç›®ä¸­å¤šå®è·µ
4. æ³¨æ„æ€§èƒ½å’Œå®‰å…¨å¹³è¡¡