---
title: 3、SkyWalking UI界面部署
---
## 📚 目录

1. [UI界面部署概述](#1-UI界面部署概述)
2. [UI服务安装配置](#2-UI服务安装配置)
3. [界面访问与登录](#3-界面访问与登录)
4. [用户权限管理](#4-用户权限管理)
5. [自定义仪表盘](#5-自定义仪表盘)
6. [界面定制与优化](#6-界面定制与优化)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🖥️ UI界面部署概述


### 1.1 什么是SkyWalking UI


**通俗理解**：
SkyWalking UI就像是分布式系统的"监控大屏"，把收集到的各种监控数据用图表、拓扑图的方式展示出来，让我们能直观地看到系统运行情况。

```
简单类比：
OAP后端 → 工厂车间（处理数据）
UI界面 → 监控室大屏（展示数据）
开发人员 → 监控员（查看分析）

数据流向：
Agent探针 → OAP后端 → 存储 → UI查询展示
         收集      处理    保存    可视化
```

**🔸 UI的核心作用**：
- **可视化监控**：把复杂的链路追踪数据变成易懂的图表
- **问题定位**：快速找到系统性能瓶颈和异常
- **数据分析**：提供多维度的数据查看方式
- **告警查看**：集中展示系统告警信息

### 1.2 UI架构组成


**架构示意图**：
```
┌─────────────────────────────────────┐
│         浏览器访问界面               │
│     http://localhost:8080           │
└─────────────────┬───────────────────┘
                  │ HTTP请求
┌─────────────────▼───────────────────┐
│         SkyWalking UI 服务          │
│   • 前端静态资源（Vue.js）          │
│   • GraphQL查询接口                 │
│   • 用户认证授权                    │
└─────────────────┬───────────────────┘
                  │ GraphQL查询
┌─────────────────▼───────────────────┐
│         OAP 后端服务                │
│   • 数据查询引擎                    │
│   • 聚合计算逻辑                    │
└─────────────────┬───────────────────┘
                  │ 查询存储
┌─────────────────▼───────────────────┐
│         存储层（ES/MySQL等）        │
│   • 链路数据                        │
│   • 指标数据                        │
└─────────────────────────────────────┘
```

**🔹 组件说明**：
- **前端界面**：基于Vue.js开发的单页应用
- **GraphQL接口**：UI和OAP之间的数据查询语言
- **认证模块**：控制用户访问权限
- **数据展示**：图表、拓扑图、列表等多种形式

---

## 2. 🚀 UI服务安装配置


### 2.1 独立部署方式


SkyWalking UI可以和OAP分离部署，也可以集成在OAP中。这里介绍两种方式：

**方式一：集成部署（推荐新手）**

```bash
# 下载SkyWalking完整包（已包含UI）
wget https://archive.apache.org/dist/skywalking/9.5.0/apache-skywalking-apm-9.5.0.tar.gz

# 解压
tar -zxvf apache-skywalking-apm-9.5.0.tar.gz
cd apache-skywalking-apm-bin

# 目录结构
.
├── bin/                    # 启动脚本
│   ├── oapService.sh      # OAP服务启动
│   └── webappService.sh   # UI服务启动
├── config/                # 配置文件
│   └── webapp/
│       └── webapp.yml     # UI配置文件
└── webapp/                # UI资源文件
```

**🔸 启动UI服务**：
```bash
# Linux/Mac环境
./bin/webappService.sh

# Windows环境
bin\webappService.bat

# 启动成功提示
SkyWalking Web Application started successfully!
```

**方式二：独立部署（生产推荐）**

生产环境中，我们通常把UI和OAP分开部署，便于扩展和维护：

```bash
# 只部署UI服务
# 1. 下载UI独立包（如果有）或使用完整包

# 2. 修改配置指向OAP地址
vim config/webapp/webapp.yml
```

### 2.2 核心配置详解


**配置文件：`config/webapp/webapp.yml`**

```yaml
# 服务端口配置
server:
  port: 8080                    # UI访问端口，默认8080

# OAP后端地址配置
collector:
  path: /graphql               # GraphQL接口路径
  ribbon:
    ReadTimeout: 10000         # 读取超时时间（毫秒）
    # OAP服务器地址列表
    listOfServers: 127.0.0.1:12800   # 单机模式
    # listOfServers: 192.168.1.10:12800,192.168.1.11:12800  # 集群模式

# 安全配置（可选）
security:
  user:
    admin:
      password: admin          # 管理员密码
```

**🔹 配置说明**：

| 配置项 | **说明** | **建议值** |
|--------|---------|-----------|
| `server.port` | `UI访问端口` | `生产环境建议8080或自定义` |
| `listOfServers` | `OAP服务地址` | `集群环境配置多个地址` |
| `ReadTimeout` | `查询超时时间` | `根据数据量调整，10秒起步` |
| `password` | `管理员密码` | `生产环境务必修改默认密码` |

### 2.3 环境变量配置


除了配置文件，还可以通过环境变量覆盖配置：

```bash
# 设置OAP后端地址
export SW_OAP_ADDRESS=http://192.168.1.10:12800

# 设置UI端口
export SW_SERVER_PORT=8080

# 设置时区
export TZ=Asia/Shanghai

# 启动UI服务
./bin/webappService.sh
```

**🎯 实用技巧**：
- 开发环境：使用默认配置即可
- 测试环境：通过环境变量快速切换OAP地址
- 生产环境：配置文件 + 环境变量结合使用

### 2.4 Docker容器部署


**使用官方镜像部署**：

```bash
# 拉取UI镜像
docker pull apache/skywalking-ui:9.5.0

# 启动UI容器
docker run -d \
  --name skywalking-ui \
  -p 8080:8080 \
  -e SW_OAP_ADDRESS=http://oap-server:12800 \
  apache/skywalking-ui:9.5.0

# 验证运行状态
docker logs -f skywalking-ui
```

**Docker Compose配置**：

```yaml
version: '3.8'
services:
  skywalking-ui:
    image: apache/skywalking-ui:9.5.0
    container_name: skywalking-ui
    ports:
      - "8080:8080"
    environment:
      - SW_OAP_ADDRESS=http://oap-server:12800
      - TZ=Asia/Shanghai
    networks:
      - skywalking
    restart: always

networks:
  skywalking:
    driver: bridge
```

---

## 3. 🔐 界面访问与登录


### 3.1 首次访问配置


**访问地址**：
```
默认地址：http://localhost:8080
自定义端口：http://your-ip:your-port
```

**🔸 访问流程**：
```
1. 浏览器打开 → http://localhost:8080
2. 首页加载（Vue.js应用）
3. 连接OAP后端（GraphQL接口）
4. 展示监控数据
```

### 3.2 安全认证配置


SkyWalking 9.x版本支持基本的用户认证：

**启用认证功能**：

在`webapp.yml`中配置：
```yaml
security:
  # 启用用户认证
  enabled: true
  
  # 用户配置
  users:
    - username: admin
      password: admin123        # 生产环境必须修改
      roles: [admin]
    
    - username: viewer
      password: viewer123
      roles: [viewer]           # 只读权限
```

**🔹 角色权限说明**：

| 角色 | **权限范围** | **适用场景** |
|------|------------|------------|
| `admin` | `所有操作权限` | `运维管理员` |
| `viewer` | `只读查看` | `开发人员、测试人员` |
| `自定义` | `按需配置` | `特定业务需求` |

**登录验证流程**：
```
用户访问 → 登录页面 → 输入账号密码
              ↓
         认证验证
              ↓
    成功 → 进入主界面
    失败 → 返回登录页面
```

---

## 4. 👥 用户权限管理


### 4.1 权限体系概述


**权限层级**：
```
┌─────────────────────────┐
│      系统管理员          │ ← 最高权限
├─────────────────────────┤
│      应用管理员          │ ← 特定应用权限
├─────────────────────────┤
│      普通查看者          │ ← 只读权限
└─────────────────────────┘
```

### 4.2 权限配置实践


**创建多用户配置**：

```yaml
security:
  enabled: true
  users:
    # 运维管理员 - 全部权限
    - username: ops-admin
      password: ${OPS_ADMIN_PWD}    # 环境变量
      roles: [admin]
      
    # 开发人员 - 查看权限
    - username: developer
      password: ${DEV_PWD}
      roles: [viewer]
      
    # 测试人员 - 查看权限
    - username: tester
      password: ${TEST_PWD}
      roles: [viewer]
```

**🎯 最佳实践**：
1. **密码管理**：
   - 生产环境使用环境变量存储密码
   - 定期更换密码
   - 密码复杂度要求：大小写+数字+特殊字符

2. **权限分配**：
   - 按最小权限原则分配
   - 开发/测试只给查看权限
   - 运维给管理权限

3. **审计日志**：
   - 记录登录行为
   - 追踪操作记录

### 4.3 访问控制策略


**基于IP的访问控制**（通过Nginx实现）：

```nginx
# Nginx配置示例
upstream skywalking-ui {
    server 127.0.0.1:8080;
}

server {
    listen 80;
    server_name skywalking.yourdomain.com;
    
    # 只允许内网访问
    allow 192.168.1.0/24;
    allow 10.0.0.0/8;
    deny all;
    
    location / {
        proxy_pass http://skywalking-ui;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## 5. 📊 自定义仪表盘


### 5.1 仪表盘功能介绍


**什么是仪表盘**：
> 仪表盘就像汽车的仪表盘一样，把关键指标集中展示在一个页面上，让你一眼就能看到系统健康状况。

**默认仪表盘类型**：

```
📈 全局仪表盘
   ├─ 系统拓扑图         # 服务调用关系
   ├─ 服务性能指标       # 响应时间、吞吐量
   ├─ 数据库性能         # SQL执行统计
   └─ 告警信息           # 实时告警

📊 服务仪表盘
   ├─ 服务实例列表       # 各实例状态
   ├─ 端点性能           # 接口响应时间
   ├─ 数据库访问         # 数据库调用分析
   └─ 缓存命中率         # 缓存效率

🔍 追踪仪表盘
   ├─ 链路追踪列表       # 完整调用链
   ├─ 慢查询追踪         # 性能瓶颈定位
   └─ 异常追踪           # 错误详情
```

### 5.2 创建自定义仪表盘


**操作步骤**：

```
步骤1：点击「仪表盘」→「新建仪表盘」
      ↓
步骤2：选择模板或空白创建
      ↓
步骤3：添加组件（图表、指标卡片）
      ↓
步骤4：配置数据源和查询条件
      ↓
步骤5：保存并分享
```

**🔸 常用组件类型**：

| 组件 | **用途** | **数据源** | **适用场景** |
|------|---------|-----------|------------|
| **折线图** | `趋势分析` | `时间序列指标` | `响应时间、QPS变化` |
| **柱状图** | `对比分析` | `聚合数据` | `服务性能对比` |
| **拓扑图** | `依赖关系` | `服务调用链` | `架构可视化` |
| **指标卡** | `实时数值` | `即时指标` | `关键指标展示` |
| **表格** | `详细列表` | `明细数据` | `慢查询、异常列表` |

### 5.3 仪表盘最佳实践


**业务监控仪表盘示例**：

```
订单服务监控大盘
├─ 核心指标区（顶部）
│  ├─ 今日订单量：45,678 单
│  ├─ 成功率：99.2%
│  └─ 平均响应时间：120ms
│
├─ 趋势分析区（中部）
│  ├─ 订单量趋势图（24小时）
│  └─ 响应时间趋势（1小时粒度）
│
└─ 详细信息区（底部）
   ├─ TOP 10 慢接口
   ├─ 异常请求列表
   └─ 数据库慢查询
```

**🎯 设计原则**：
1. **重要指标置顶**：最关心的指标放最显眼位置
2. **分层展示**：概览→趋势→明细
3. **合理配色**：正常用绿色，异常用红色
4. **定时刷新**：设置自动刷新间隔（30秒~5分钟）

### 5.4 仪表盘分享与导出


**分享给团队**：
```
方式1：保存为公共仪表盘
     ↓
所有用户都能查看

方式2：导出配置文件
     ↓
分享JSON配置给其他人导入

方式3：截图或打印
     ↓
汇报材料使用
```

**导出配置示例**：
```json
{
  "name": "订单服务监控",
  "type": "service",
  "widgets": [
    {
      "title": "订单量趋势",
      "type": "line-chart",
      "metrics": ["order_count"],
      "timeRange": "24h"
    }
  ]
}
```

---

## 6. 🎨 界面定制与优化


### 6.1 主题与样式定制


**修改UI主题色**：

SkyWalking UI基于Vue.js开发，可以通过修改源码定制主题：

```javascript
// 修改 webapp/src/theme.ts
export const theme = {
  primaryColor: '#1890ff',      // 主色调
  successColor: '#52c41a',      // 成功色
  warningColor: '#faad14',      // 警告色
  errorColor: '#f5222d',        // 错误色
  
  // 自定义企业主题色
  brandColor: '#0066cc'         // 公司品牌色
}
```

**🔹 定制步骤**：
1. 克隆SkyWalking源码
2. 修改主题配置
3. 重新编译前端资源
4. 替换webapp目录

> ⚠️ **注意**：定制主题需要前端开发能力，新手建议使用默认主题

### 6.2 语言本地化


**切换界面语言**：

```
界面右上角 → 设置图标 → 语言选择
              ↓
    中文（简体）/ English / 其他
```

**支持的语言**：
- 🇨🇳 简体中文
- 🇺🇸 英文
- 🇪🇸 西班牙语
- 🇫🇷 法语

### 6.3 性能优化建议


**界面加载优化**：

```
优化点1：启用Gzip压缩
nginx配置 → gzip on;

优化点2：CDN加速静态资源
前端资源 → 部署到CDN

优化点3：减少查询数据量
时间范围 → 避免查询过长时间跨度
数据分页 → 限制单页数据量

优化点4：浏览器缓存
静态资源 → 设置缓存策略
```

**查询性能优化**：

| 优化项 | **优化前** | **优化后** | **效果** |
|--------|----------|----------|---------|
| `时间范围` | `查询7天数据` | `查询1天数据` | `加载速度提升5倍` |
| `数据聚合` | `分钟级粒度` | `小时级粒度` | `数据量减少60倍` |
| `索引优化` | `全表扫描` | `索引查询` | `响应时间从5s到0.5s` |

### 6.4 告警面板配置


**配置告警展示**：

```yaml
# 告警规则示例（在OAP配置）
alarm:
  rules:
    service_resp_time_rule:
      metrics-name: service_resp_time
      threshold: 1000              # 响应时间超过1秒
      op: ">"
      period: 10                   # 监控周期10分钟
      count: 3                     # 连续3次触发
      message: "服务响应时间过长"
```

**UI界面展示效果**：
```
🔴 告警列表
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 订单服务响应时间过长
   触发时间：2025-09-23 14:30:25
   当前值：1250ms
   阈值：1000ms
   
🔴 数据库连接池告警
   触发时间：2025-09-23 14:28:10
   当前连接数：95/100
   使用率：95%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念


```
🔸 UI部署方式：集成部署 vs 独立部署
🔸 核心配置：OAP地址、端口、认证
🔸 权限管理：用户角色、访问控制
🔸 仪表盘：自定义监控视图
🔸 界面优化：主题、语言、性能
```

### 7.2 部署检查清单


**✅ 部署前检查**：
- [ ] OAP服务已启动并正常运行
- [ ] 确认OAP的GraphQL接口地址（默认12800端口）
- [ ] 准备好UI服务器（至少1GB内存）
- [ ] 规划好访问端口（避免冲突）

**✅ 配置检查**：
- [ ] `webapp.yml`中OAP地址配置正确
- [ ] 端口配置符合网络环境要求
- [ ] 安全认证已启用（生产环境）
- [ ] 默认密码已修改（生产环境）

**✅ 功能验证**：
- [ ] 浏览器能正常访问UI界面
- [ ] 能查看服务拓扑图
- [ ] 能查询链路追踪数据
- [ ] 告警信息正常展示

### 7.3 常见问题与解决


**问题1：UI启动后无法访问**
```
可能原因：
1. 端口被占用 → 检查端口占用情况
2. 防火墙拦截 → 开放对应端口
3. OAP地址错误 → 检查配置文件

解决步骤：
netstat -tuln | grep 8080      # 检查端口
firewall-cmd --add-port=8080/tcp  # 开放端口
ping OAP服务器IP                # 测试网络连通性
```

**问题2：UI显示空白或无数据**
```
排查思路：
1. 检查浏览器控制台是否有错误
2. 确认OAP服务正常运行
3. 验证GraphQL接口能否访问
   curl http://oap-server:12800/graphql
4. 检查Agent是否正常上报数据
```

**问题3：查询速度很慢**
```
优化方案：
1. 缩小查询时间范围
2. 增加OAP服务器配置
3. 优化存储层性能（ES调优）
4. 启用数据预聚合
```

### 7.4 生产部署建议


**🎯 架构推荐**：
```
生产环境架构：

        ┌──────────┐
        │ Nginx LB │ ← 负载均衡 + SSL
        └────┬─────┘
             │
    ┌────────┴────────┐
    │        │        │
 ┌──▼──┐ ┌──▼──┐ ┌──▼──┐
 │UI-1 │ │UI-2 │ │UI-3 │ ← UI集群（3个实例）
 └──┬──┘ └──┬──┘ └──┬──┘
    └────────┴────────┘
             │
      ┌──────▼──────┐
      │ OAP Cluster │ ← OAP集群
      └─────────────┘
```

**核心配置要点**：
1. **高可用**：部署多个UI实例
2. **负载均衡**：使用Nginx或其他LB
3. **安全加固**：启用HTTPS、用户认证
4. **监控告警**：监控UI服务本身的健康状态

**🔐 安全加固**：
```
1. 启用HTTPS（必须）
2. 修改默认密码（必须）
3. 配置IP白名单（推荐）
4. 定期更新版本（推荐）
5. 审计日志记录（推荐）
```

### 7.5 快速上手实战


**5分钟快速部署**：

```bash
# Step 1: 下载解压
wget https://skywalking.apache.org/.../skywalking-apm-9.5.0.tar.gz
tar -zxvf skywalking-apm-9.5.0.tar.gz

# Step 2: 修改配置（可选，默认即可）
vim config/webapp/webapp.yml

# Step 3: 启动UI服务
./bin/webappService.sh

# Step 4: 访问界面
打开浏览器：http://localhost:8080

# ✅ 成功！
```

**核心记忆口诀**：
```
UI界面三步走：
配置OAP地址，启动UI服务，浏览器访问

权限管理要记牢：
生产环境改密码，按需分配权限

仪表盘要会用：
自定义视图看重点，分享导出给团队

优化调优不能少：
限制查询范围，启用缓存加速
```

---

## 🎓 学习建议


**新手入门路径**：
```
第1步：本地快速部署体验
     ↓
第2步：熟悉界面各个模块
     ↓
第3步：创建自定义仪表盘
     ↓
第4步：配置权限和告警
     ↓
第5步：生产环境部署实践
```

**实践练习**：
1. 在本地搭建完整的SkyWalking环境
2. 尝试创建3个不同场景的仪表盘
3. 配置多个用户账号并测试权限
4. 模拟生产环境部署UI集群

**进阶学习**：
- 学习GraphQL查询语言，自定义数据查询
- 研究UI源码，实现深度定制
- 集成企业统一认证系统（LDAP/OAuth）
- 开发自定义插件扩展UI功能