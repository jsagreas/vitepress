---
title: 4ã€APIæ¥å£ä¸SDKé›†æˆ
---
## ğŸ“š ç›®å½•

1. [XXL-JOB APIæ¥å£åŸºç¡€æ¦‚å¿µ](#1-xxl-job-apiæ¥å£åŸºç¡€æ¦‚å¿µ)
2. [RESTful APIæ¥å£è¯¦è§£](#2-restful-apiæ¥å£è¯¦è§£)
3. [Java SDKä½¿ç”¨æŒ‡å—](#3-java-sdkä½¿ç”¨æŒ‡å—)
4. [ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ](#4-ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ)
5. [APIè®¤è¯ä¸å®‰å…¨](#5-apiè®¤è¯ä¸å®‰å…¨)
6. [æ¥å£é™æµä¸ç›‘æ§](#6-æ¥å£é™æµä¸ç›‘æ§)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ XXL-JOB APIæ¥å£åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯APIæ¥å£

**é€šä¿—ç†è§£**ï¼šAPIæ¥å£å°±åƒæ˜¯é¤å…çš„èœå•ï¼Œå‘Šè¯‰ä½ å¯ä»¥ç‚¹ä»€ä¹ˆèœï¼ˆè°ƒç”¨ä»€ä¹ˆåŠŸèƒ½ï¼‰ï¼Œæ€ä¹ˆç‚¹èœï¼ˆå¦‚ä½•è°ƒç”¨ï¼‰ï¼Œèœä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼ˆè¿”å›ä»€ä¹ˆç»“æœï¼‰ã€‚

```
ç°å®åœºæ™¯ç±»æ¯”ï¼š
é¡¾å®¢(ç¬¬ä¸‰æ–¹ç³»ç»Ÿ) â†’ èœå•(APIæ–‡æ¡£) â†’ æœåŠ¡å‘˜(APIæ¥å£) â†’ å¨æˆ¿(XXL-JOBç³»ç»Ÿ)
ç‚¹é¤(å‘é€è¯·æ±‚)    æŸ¥çœ‹èœå•       æ¥æ”¶è®¢å•        å¤„ç†ä»»åŠ¡

APIæ¥å£çš„ä½œç”¨ï¼š
è®©å¤–éƒ¨ç³»ç»Ÿèƒ½å¤Ÿ"é¥æ§"XXL-JOBï¼Œå°±åƒç”¨æ‰‹æœºAPPæ§åˆ¶æ™ºèƒ½å®¶ç”µä¸€æ ·
```

### 1.2 XXL-JOBä¸ºä»€ä¹ˆéœ€è¦APIæ¥å£

**æ ¸å¿ƒéœ€æ±‚**ï¼šä¼ä¸šå®é™…åº”ç”¨ä¸­ï¼Œä»»åŠ¡è°ƒåº¦å¾€å¾€ä¸æ˜¯å­¤ç«‹çš„ï¼Œéœ€è¦ä¸å…¶ä»–ç³»ç»Ÿåä½œ

```
å®é™…ä¸šåŠ¡åœºæ™¯ï¼š
ğŸ¢ ä¸šåŠ¡ç³»ç»Ÿéœ€è¦ï¼š
â€¢ è®¢å•å®Œæˆå â†’ è‡ªåŠ¨è§¦å‘å‘è´§ä»»åŠ¡
â€¢ ç”¨æˆ·æ³¨å†Œå â†’ åˆ›å»ºé‚®ä»¶æ¨é€ä»»åŠ¡
â€¢ æ•°æ®æŠ¥è¡¨ç”Ÿæˆå®Œæˆ â†’ å¯åŠ¨æ¸…ç†ä»»åŠ¡

ğŸ”„ è¿ç»´ç³»ç»Ÿéœ€è¦ï¼š
â€¢ ç›‘æ§ç³»ç»Ÿå‘ç°å¼‚å¸¸ â†’ è§¦å‘æŠ¥è­¦ä»»åŠ¡
â€¢ æœåŠ¡å‘å¸ƒå®Œæˆ â†’ æ‰§è¡Œå¥åº·æ£€æŸ¥ä»»åŠ¡
â€¢ å®šæœŸæ£€æŸ¥ç£ç›˜ç©ºé—´ â†’ åŠ¨æ€è°ƒæ•´æ¸…ç†é¢‘ç‡
```

### 1.3 APIæ¥å£çš„æ ¸å¿ƒåŠŸèƒ½

**ä¸»è¦èƒ½åŠ›èŒƒå›´**ï¼š
- **ä»»åŠ¡ç®¡ç†**ï¼šåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢ä»»åŠ¡
- **æ‰§è¡Œæ§åˆ¶**ï¼šæ‰‹åŠ¨è§¦å‘ã€åœæ­¢ã€æš‚åœä»»åŠ¡
- **çŠ¶æ€æŸ¥è¯¢**ï¼šè·å–æ‰§è¡Œå†å²ã€å®æ—¶çŠ¶æ€
- **é…ç½®ç®¡ç†**ï¼šåŠ¨æ€è°ƒæ•´ä»»åŠ¡å‚æ•°

```
åŠŸèƒ½åˆ†ç±»å›¾ï¼š
XXL-JOB API
â”œâ”€â”€ ä»»åŠ¡ç®¡ç†API
â”‚   â”œâ”€â”€ åˆ›å»ºä»»åŠ¡
â”‚   â”œâ”€â”€ æ›´æ–°ä»»åŠ¡  
â”‚   â”œâ”€â”€ åˆ é™¤ä»»åŠ¡
â”‚   â””â”€â”€ æŸ¥è¯¢ä»»åŠ¡
â”œâ”€â”€ æ‰§è¡Œæ§åˆ¶API
â”‚   â”œâ”€â”€ æ‰‹åŠ¨è§¦å‘
â”‚   â”œâ”€â”€ åœæ­¢æ‰§è¡Œ
â”‚   â””â”€â”€ æš‚åœ/æ¢å¤
â””â”€â”€ ç›‘æ§æŸ¥è¯¢API
    â”œâ”€â”€ æ‰§è¡Œæ—¥å¿—
    â”œâ”€â”€ ç»Ÿè®¡ä¿¡æ¯
    â””â”€â”€ ç³»ç»ŸçŠ¶æ€
```

---

## 2. ğŸ“¡ RESTful APIæ¥å£è¯¦è§£


### 2.1 RESTful APIåŸºç¡€æ¦‚å¿µ

**ç®€å•ç†è§£**ï¼šRESTfulå°±æ˜¯ä¸€å¥—APIè®¾è®¡çš„"è§„çŸ©"ï¼Œå°±åƒäº¤é€šè§„åˆ™ä¸€æ ·ï¼Œå¤§å®¶éƒ½æŒ‰è¿™ä¸ªè§„åˆ™æ¥ï¼Œå°±èƒ½å¾ˆå¥½åœ°æ²Ÿé€šã€‚

> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> REST = REpresentational State Transferï¼ˆè¡¨ç°å±‚çŠ¶æ€è½¬ç§»ï¼‰
> å¬èµ·æ¥å¾ˆå¤æ‚ï¼Œå…¶å®å°±æ˜¯ç”¨HTTPçš„æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰æ¥æ“ä½œèµ„æº

**HTTPæ–¹æ³•å¯¹åº”çš„æ“ä½œ**ï¼š
- `GET` = æŸ¥è¯¢ï¼ˆå°±åƒ"æŸ¥çœ‹"ï¼‰
- `POST` = åˆ›å»ºï¼ˆå°±åƒ"æ–°å¢"ï¼‰  
- `PUT` = æ›´æ–°ï¼ˆå°±åƒ"ä¿®æ”¹"ï¼‰
- `DELETE` = åˆ é™¤ï¼ˆå°±åƒ"åˆ é™¤"ï¼‰

### 2.2 ä»»åŠ¡ç®¡ç†APIè¯¦è§£


#### ğŸ”¸ æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨

```http
GET /xxl-job-admin/jobinfo/pageList
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "start": 0,           // èµ·å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰
  "length": 10,         // æ¯é¡µæ˜¾ç¤ºæ•°é‡
  "jobGroup": 1,        // æ‰§è¡Œå™¨ID
  "triggerStatus": -1,  // è°ƒåº¦çŠ¶æ€ï¼š-1å…¨éƒ¨ï¼Œ0åœæ­¢ï¼Œ1è¿è¡Œ
  "jobDesc": "ç”¨æˆ·",    // ä»»åŠ¡æè¿°å…³é”®å­—
  "executorHandler": "", // æ‰§è¡Œå™¨ä»»åŠ¡Handler
  "author": "admin"     // åˆ›å»ºè€…
}
```

**è¿”å›ç»“æœ**ï¼š
```json
{
  "code": 200,
  "msg": "success",
  "count": 2,
  "data": [
    {
      "id": 1,
      "jobGroup": 1,
      "jobCron": "0 0 0 * * ?",
      "jobDesc": "ç”¨æˆ·æ•°æ®åŒæ­¥",
      "executorHandler": "userSyncJobHandler",
      "executorParam": "",
      "triggerStatus": 1,
      "triggerLastTime": 1695370800000,
      "triggerNextTime": 1695457200000
    }
  ]
}
```

> ğŸ’¡ **å®ç”¨æŠ€å·§**  
> åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œstartå‚æ•° = (é¡µç -1) Ã— length
> æ¯”å¦‚æŸ¥ç¬¬2é¡µï¼Œæ¯é¡µ10æ¡ï¼šstart=10, length=10

#### ğŸ”¸ åˆ›å»ºæ–°ä»»åŠ¡

```http
POST /xxl-job-admin/jobinfo/add
```

**è¯·æ±‚ä½“ç¤ºä¾‹**ï¼š
```json
{
  "jobGroup": 1,
  "jobCron": "0 */5 * * * ?",
  "jobDesc": "ç”¨æˆ·ç§¯åˆ†æ¸…ç†ä»»åŠ¡",
  "executorHandler": "userPointCleanHandler",
  "executorParam": "batchSize=1000",
  "executorRouteStrategy": "FIRST",
  "executorBlockStrategy": "SERIAL_EXECUTION",
  "executorTimeout": 300,
  "executorFailRetryCount": 3,
  "glueType": "BEAN",
  "author": "system"
}
```

**å…³é”®å‚æ•°è¯´æ˜**ï¼š
| å‚æ•° | å«ä¹‰ | ç¤ºä¾‹å€¼ | å¤‡æ³¨ |
|-----|------|--------|------|
| `jobCron` | æ—¶é—´è¡¨è¾¾å¼ | `0 */5 * * * ?` | æ¯5åˆ†é’Ÿæ‰§è¡Œ |
| `executorRouteStrategy` | è·¯ç”±ç­–ç•¥ | `FIRST` | ç¬¬ä¸€ä¸ªã€è½®è¯¢ã€éšæœºç­‰ |
| `executorBlockStrategy` | é˜»å¡ç­–ç•¥ | `SERIAL_EXECUTION` | å•æœºä¸²è¡Œã€ä¸¢å¼ƒã€è¦†ç›– |
| `executorTimeout` | è¶…æ—¶æ—¶é—´ | `300` | å•ä½ï¼šç§’ |

#### ğŸ”¸ æ‰‹åŠ¨è§¦å‘ä»»åŠ¡

```http
POST /xxl-job-admin/jobinfo/trigger
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "id": 1,                    // ä»»åŠ¡ID
  "executorParam": "urgent=true"  // æ‰§è¡Œå‚æ•°ï¼ˆå¯é€‰ï¼‰
}
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> æ‰‹åŠ¨è§¦å‘ä¼šç«‹å³æ‰§è¡Œä»»åŠ¡ï¼Œä¸å—Cronè¡¨è¾¾å¼é™åˆ¶
> æ‰§è¡Œå‚æ•°ä¼šè¦†ç›–ä»»åŠ¡é…ç½®ä¸­çš„é»˜è®¤å‚æ•°

### 2.3 æ‰§è¡ŒçŠ¶æ€æŸ¥è¯¢API


#### ğŸ”¸ æŸ¥è¯¢æ‰§è¡Œæ—¥å¿—

```http
GET /xxl-job-admin/joblog/pageList
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "start": 0,
  "length": 10,
  "jobGroup": 1,
  "jobId": 1,
  "logStatus": 1,           // æ‰§è¡ŒçŠ¶æ€ï¼š1æˆåŠŸï¼Œ2å¤±è´¥ï¼Œ3è¿›è¡Œä¸­
  "filterTime": "2024-01-01 - 2024-01-31"
}
```

**è¿”å›æ•°æ®è§£è¯»**ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "id": 123,
      "jobId": 1,
      "executorAddress": "192.168.1.100:9999",
      "executorHandler": "userSyncJobHandler",
      "triggerTime": "2024-01-20 10:00:00",
      "triggerCode": 200,      // è§¦å‘ç»“æœï¼š200æˆåŠŸ
      "handleTime": "2024-01-20 10:01:30",
      "handleCode": 200,       // æ‰§è¡Œç»“æœï¼š200æˆåŠŸï¼Œ500å¤±è´¥
      "handleMsg": "æ‰§è¡ŒæˆåŠŸï¼Œå¤„ç†1000æ¡ç”¨æˆ·æ•°æ®"
    }
  ]
}
```

**çŠ¶æ€ç å«ä¹‰å¯¹ç…§è¡¨**ï¼š
| è§¦å‘ç  | å«ä¹‰ | æ‰§è¡Œç  | å«ä¹‰ |
|-------|------|--------|------|
| 200 | è§¦å‘æˆåŠŸ | 200 | æ‰§è¡ŒæˆåŠŸ |
| 500 | è§¦å‘å¤±è´¥ | 500 | æ‰§è¡Œå¤±è´¥ |
| 502 | è¶…æ—¶ | 502 | æ‰§è¡Œè¶…æ—¶ |

---

## 3. â˜• Java SDKä½¿ç”¨æŒ‡å—


### 3.1 ä»€ä¹ˆæ˜¯SDK

**é€šä¿—è§£é‡Š**ï¼šSDKå°±åƒæ˜¯ä¸€ä¸ª"å·¥å…·åŒ…"ï¼Œé‡Œé¢æœ‰å„ç§ç°æˆçš„å·¥å…·ï¼ˆæ–¹æ³•ï¼‰ï¼Œè®©ä½ ä¸ç”¨è‡ªå·±é€ è½®å­ï¼Œç›´æ¥æ‹¿æ¥ç”¨å°±è¡Œã€‚

```
ç±»æ¯”è¯´æ˜ï¼š
å»ºæˆ¿å­ä¸ç”¨è‡ªå·±åšç –å¤´ â†’ ç›´æ¥ä¹°ç°æˆçš„ç –
å†™ä»£ç ä¸ç”¨è‡ªå·±å†™HTTPè¯·æ±‚ â†’ ç›´æ¥ç”¨SDKçš„æ–¹æ³•

SDK = Software Development Kitï¼ˆè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰
```

### 3.2 SDKç¯å¢ƒå‡†å¤‡


#### ğŸ”¸ Mavenä¾èµ–é…ç½®

```xml
<dependency>
    <groupId>com.xuxueli</groupId>
    <artifactId>xxl-job-core</artifactId>
    <version>2.4.0</version>
</dependency>

<!-- HTTPå®¢æˆ·ç«¯ï¼ˆç”¨äºAPIè°ƒç”¨ï¼‰ -->
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.5.14</version>
</dependency>
```

#### ğŸ”¸ é…ç½®æ–‡ä»¶è®¾ç½®

```properties
# application.properties
xxl.job.admin.addresses=http://localhost:8080/xxl-job-admin
xxl.job.admin.username=admin
xxl.job.admin.password=123456
xxl.job.executor.appname=sample-executor
xxl.job.executor.port=9999
```

### 3.3 SDKæ ¸å¿ƒä½¿ç”¨æ–¹æ³•


#### ğŸ”¸ åˆ›å»ºAPIå®¢æˆ·ç«¯

```java
public class XxlJobApiClient {
    
    private String adminAddresses;
    private String username;
    private String password;
    private String loginCookie;
    
    public XxlJobApiClient(String adminAddresses, String username, String password) {
        this.adminAddresses = adminAddresses;
        this.username = username;
        this.password = password;
        // ç™»å½•è·å–cookie
        this.loginCookie = login();
    }
    
    // ç™»å½•è·å–è®¤è¯ä¿¡æ¯
    private String login() {
        // æ„å»ºç™»å½•è¯·æ±‚
        Map<String, String> loginParam = new HashMap<>();
        loginParam.put("userName", username);
        loginParam.put("password", password);
        
        // å‘é€ç™»å½•è¯·æ±‚ï¼Œè·å–cookie
        // è¿™é‡Œçœç•¥å…·ä½“çš„HTTPè¯·æ±‚ä»£ç 
        return "xxljob_adminuser=7b226964223a312c22757365726e616d65223a2261646d696e227d";
    }
}
```

#### ğŸ”¸ ä»»åŠ¡ç®¡ç†æ“ä½œ

```java
public class JobManagerService {
    
    private XxlJobApiClient apiClient;
    
    // åˆ›å»ºä»»åŠ¡
    public Long createJob(JobInfo jobInfo) {
        String url = adminAddresses + "/jobinfo/add";
        
        // æ„å»ºè¯·æ±‚å‚æ•°
        Map<String, Object> params = new HashMap<>();
        params.put("jobGroup", jobInfo.getJobGroup());
        params.put("jobCron", jobInfo.getJobCron());
        params.put("jobDesc", jobInfo.getJobDesc());
        params.put("executorHandler", jobInfo.getExecutorHandler());
        
        // å‘é€POSTè¯·æ±‚
        String response = httpPost(url, params);
        
        // è§£æè¿”å›ç»“æœ
        JSONObject result = JSON.parseObject(response);
        if (result.getInteger("code") == 200) {
            return result.getLong("content");  // è¿”å›ä»»åŠ¡ID
        }
        
        throw new RuntimeException("åˆ›å»ºä»»åŠ¡å¤±è´¥ï¼š" + result.getString("msg"));
    }
    
    // è§¦å‘ä»»åŠ¡æ‰§è¡Œ
    public boolean triggerJob(Long jobId, String param) {
        String url = adminAddresses + "/jobinfo/trigger";
        
        Map<String, Object> triggerParam = new HashMap<>();
        triggerParam.put("id", jobId);
        triggerParam.put("executorParam", param);
        
        String response = httpPost(url, triggerParam);
        JSONObject result = JSON.parseObject(response);
        
        return result.getInteger("code") == 200;
    }
}
```

> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> SDKçš„æœ¬è´¨å°±æ˜¯æŠŠå¤æ‚çš„HTTPè¯·æ±‚å°è£…æˆç®€å•çš„Javaæ–¹æ³•è°ƒç”¨
> ä½ åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒåº•å±‚çš„ç½‘ç»œé€šä¿¡ç»†èŠ‚

### 3.4 å®ç”¨å°è£…ç¤ºä¾‹


#### ğŸ”¸ ä»»åŠ¡ç®¡ç†å™¨å®Œæ•´ç¤ºä¾‹

```java
@Component
public class XxlJobManager {
    
    @Value("${xxl.job.admin.addresses}")
    private String adminAddresses;
    
    @Value("${xxl.job.admin.username}")
    private String username;
    
    @Value("${xxl.job.admin.password}")  
    private String password;
    
    private XxlJobApiClient apiClient;
    
    @PostConstruct
    public void init() {
        this.apiClient = new XxlJobApiClient(adminAddresses, username, password);
    }
    
    /**
     * åˆ›å»ºæ•°æ®åŒæ­¥ä»»åŠ¡
     * @param syncType åŒæ­¥ç±»å‹ï¼šuser, order, product
     * @param cronExpression cronè¡¨è¾¾å¼
     * @return ä»»åŠ¡ID
     */
    public Long createSyncJob(String syncType, String cronExpression) {
        JobInfo jobInfo = new JobInfo();
        jobInfo.setJobGroup(1);
        jobInfo.setJobCron(cronExpression);
        jobInfo.setJobDesc(syncType + "æ•°æ®åŒæ­¥ä»»åŠ¡");
        jobInfo.setExecutorHandler(syncType + "SyncHandler");
        jobInfo.setAuthor("system");
        
        return apiClient.createJob(jobInfo);
    }
    
    /**
     * ç´§æ€¥è§¦å‘ä»»åŠ¡ï¼ˆæ¯”å¦‚æ•°æ®å¼‚å¸¸éœ€è¦ç«‹å³åŒæ­¥ï¼‰
     */
    public void emergencyTrigger(Long jobId, String reason) {
        String param = "emergency=true&reason=" + reason;
        boolean success = apiClient.triggerJob(jobId, param);
        
        if (!success) {
            // å‘é€å‘Šè­¦é€šçŸ¥
            alertService.sendAlert("ç´§æ€¥ä»»åŠ¡è§¦å‘å¤±è´¥", "ä»»åŠ¡ID: " + jobId);
        }
    }
}
```

---

## 4. ğŸ”Œ ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ


### 4.1 é›†æˆåœºæ™¯åˆ†æ

**å¸¸è§é›†æˆéœ€æ±‚**ï¼šä¼ä¸šä¸­XXL-JOBé€šå¸¸éœ€è¦ä¸å¤šä¸ªç³»ç»Ÿåä½œ

```
ä¼ä¸šç³»ç»Ÿé›†æˆå›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸šåŠ¡ç³»ç»Ÿ   â”‚â”€â”€â”€â†’â”‚   XXL-JOB   â”‚â†â”€â”€â”€â”‚   ç›‘æ§ç³»ç»Ÿ   â”‚
â”‚  (åˆ›å»ºä»»åŠ¡)  â”‚    â”‚ (ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒ) â”‚    â”‚ (çŠ¶æ€ç›‘æ§)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â†“                   â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æƒé™ç³»ç»Ÿ   â”‚    â”‚   æ‰§è¡ŒèŠ‚ç‚¹   â”‚    â”‚   å‘Šè­¦ç³»ç»Ÿ   â”‚
â”‚ (ç”¨æˆ·è®¤è¯)  â”‚    â”‚ (å®é™…æ‰§è¡Œ)  â”‚    â”‚ (å¼‚å¸¸é€šçŸ¥)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Spring Booté¡¹ç›®é›†æˆ


#### ğŸ”¸ é…ç½®ç±»è®¾ç½®

```java
@Configuration
@EnableConfigurationProperties(XxlJobProperties.class)
public class XxlJobConfig {
    
    @Autowired
    private XxlJobProperties xxlJobProperties;
    
    @Bean
    public XxlJobSpringExecutor xxlJobExecutor() {
        XxlJobSpringExecutor executor = new XxlJobSpringExecutor();
        executor.setAdminAddresses(xxlJobProperties.getAdminAddresses());
        executor.setAppname(xxlJobProperties.getAppname());
        executor.setPort(xxlJobProperties.getPort());
        executor.setLogPath(xxlJobProperties.getLogPath());
        executor.setLogRetentionDays(xxlJobProperties.getLogRetentionDays());
        return executor;
    }
    
    @Bean
    public XxlJobManager xxlJobManager() {
        return new XxlJobManager();
    }
}
```

#### ğŸ”¸ ä¸šåŠ¡ç³»ç»Ÿè°ƒç”¨ç¤ºä¾‹

```java
@Service
public class OrderService {
    
    @Autowired
    private XxlJobManager xxlJobManager;
    
    /**
     * è®¢å•å®Œæˆåï¼Œåˆ›å»ºå‘è´§ä»»åŠ¡
     */
    public void completeOrder(Long orderId) {
        // 1. æ›´æ–°è®¢å•çŠ¶æ€
        orderDao.updateStatus(orderId, OrderStatus.COMPLETED);
        
        // 2. åˆ›å»ºå‘è´§ä»»åŠ¡ï¼ˆå»¶è¿Ÿ1å°æ—¶æ‰§è¡Œï¼‰
        String cronExpression = getCronAfterHours(1);
        Long jobId = xxlJobManager.createSyncJob("shipping", cronExpression);
        
        // 3. ä¿å­˜ä»»åŠ¡å…³è”å…³ç³»
        OrderJobRelation relation = new OrderJobRelation();
        relation.setOrderId(orderId);
        relation.setJobId(jobId);
        orderJobDao.save(relation);
        
        log.info("è®¢å•{}å®Œæˆï¼Œå·²åˆ›å»ºå‘è´§ä»»åŠ¡{}", orderId, jobId);
    }
    
    private String getCronAfterHours(int hours) {
        LocalDateTime executeTime = LocalDateTime.now().plusHours(hours);
        return String.format("0 %d %d %d %d ?", 
            executeTime.getMinute(),
            executeTime.getHour(), 
            executeTime.getDayOfMonth(),
            executeTime.getMonthValue());
    }
}
```

### 4.3 ç›‘æ§ç³»ç»Ÿé›†æˆ


#### ğŸ”¸ ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ç›‘æ§

```java
@Component
public class JobMonitorService {
    
    @Autowired
    private XxlJobManager xxlJobManager;
    
    @Autowired
    private AlertService alertService;
    
    /**
     * å®šæœŸæ£€æŸ¥ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
     */
    @Scheduled(fixedRate = 60000) // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    public void checkJobStatus() {
        // è·å–æœ€è¿‘1å°æ—¶çš„æ‰§è¡Œæ—¥å¿—
        LocalDateTime startTime = LocalDateTime.now().minusHours(1);
        List<JobLog> jobLogs = xxlJobManager.getJobLogs(startTime, null);
        
        // ç»Ÿè®¡å¤±è´¥ä»»åŠ¡
        List<JobLog> failedJobs = jobLogs.stream()
            .filter(log -> log.getHandleCode() != 200)
            .collect(Collectors.toList());
        
        // å‘é€å‘Šè­¦
        if (!failedJobs.isEmpty()) {
            String alertMsg = String.format("å‘ç°%dä¸ªå¤±è´¥ä»»åŠ¡", failedJobs.size());
            alertService.sendAlert("XXL-JOBæ‰§è¡Œå¼‚å¸¸", alertMsg);
        }
    }
    
    /**
     * è·å–ä»»åŠ¡æ‰§è¡Œç»Ÿè®¡
     */
    public JobStatistics getJobStatistics(LocalDate date) {
        List<JobLog> dayLogs = xxlJobManager.getJobLogsByDate(date);
        
        JobStatistics stats = new JobStatistics();
        stats.setTotalCount(dayLogs.size());
        stats.setSuccessCount((int) dayLogs.stream()
            .filter(log -> log.getHandleCode() == 200).count());
        stats.setFailedCount(stats.getTotalCount() - stats.getSuccessCount());
        stats.setSuccessRate(stats.getSuccessCount() * 100.0 / stats.getTotalCount());
        
        return stats;
    }
}
```

### 4.4 æƒé™ç³»ç»Ÿé›†æˆ


#### ğŸ”¸ åŸºäºè§’è‰²çš„ä»»åŠ¡ç®¡ç†

```java
@RestController
@RequestMapping("/api/job")
public class JobApiController {
    
    @Autowired
    private XxlJobManager xxlJobManager;
    
    @Autowired
    private UserService userService;
    
    /**
     * åˆ›å»ºä»»åŠ¡ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
     */
    @PostMapping("/create")
    @PreAuthorize("hasRole('ADMIN')")
    public ApiResult createJob(@RequestBody CreateJobRequest request) {
        // è·å–å½“å‰ç”¨æˆ·
        String currentUser = SecurityContextHolder.getContext()
            .getAuthentication().getName();
        
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰åˆ›å»ºæƒé™
        if (!userService.hasJobCreatePermission(currentUser)) {
            return ApiResult.error("æ— åˆ›å»ºä»»åŠ¡æƒé™");
        }
        
        try {
            Long jobId = xxlJobManager.createSyncJob(
                request.getSyncType(), 
                request.getCronExpression()
            );
            
            // è®°å½•æ“ä½œæ—¥å¿—
            operationLogService.record(currentUser, "CREATE_JOB", 
                "åˆ›å»ºä»»åŠ¡: " + request.getSyncType());
            
            return ApiResult.success(jobId);
        } catch (Exception e) {
            return ApiResult.error("åˆ›å»ºå¤±è´¥: " + e.getMessage());
        }
    }
    
    /**
     * è§¦å‘ä»»åŠ¡ï¼ˆéœ€è¦æ“ä½œå‘˜æƒé™ï¼‰
     */
    @PostMapping("/trigger/{jobId}")
    @PreAuthorize("hasRole('OPERATOR')")
    public ApiResult triggerJob(@PathVariable Long jobId, 
                               @RequestParam(required = false) String param) {
        String currentUser = SecurityContextHolder.getContext()
            .getAuthentication().getName();
        
        boolean success = xxlJobManager.emergencyTrigger(jobId, 
            "æ‰‹åŠ¨è§¦å‘by" + currentUser);
        
        return success ? ApiResult.success() : ApiResult.error("è§¦å‘å¤±è´¥");
    }
}
```

---

## 5. ğŸ” APIè®¤è¯ä¸å®‰å…¨


### 5.1 è®¤è¯æœºåˆ¶åŸç†

**ç®€å•ç†è§£**ï¼šè®¤è¯å°±åƒæ˜¯è¿›å…¥å°åŒºéœ€è¦é—¨ç¦å¡ä¸€æ ·ï¼ŒAPIè°ƒç”¨ä¹Ÿéœ€è¦"èº«ä»½è¯æ˜"

```
è®¤è¯æµç¨‹å¯¹æ¯”ï¼š
ç°å®åœºæ™¯ï¼šè®¿å®¢ â†’ ç™»è®° â†’ è·å¾—ä¸´æ—¶å¡ â†’ åˆ·å¡è¿›å…¥
APIè®¤è¯ï¼šå®¢æˆ·ç«¯ â†’ ç™»å½• â†’ è·å¾—Token â†’ æºå¸¦Tokenè°ƒç”¨API

è®¤è¯çš„ä½œç”¨ï¼š
âœ… ç¡®è®¤èº«ä»½ï¼šä½ æ˜¯è°ï¼Ÿ
âœ… éªŒè¯æƒé™ï¼šä½ èƒ½åšä»€ä¹ˆï¼Ÿ
âœ… é˜²æ­¢æ»¥ç”¨ï¼šé™åˆ¶è°ƒç”¨é¢‘ç‡
```

### 5.2 Cookieè®¤è¯å®ç°

**XXL-JOBé»˜è®¤è®¤è¯æ–¹å¼**ï¼šåŸºäºSession Cookie

#### ğŸ”¸ ç™»å½•è·å–Cookie

```java
public class XxlJobAuthenticator {
    
    private String adminUrl;
    private String username;
    private String password;
    private String loginCookie;
    private long cookieExpireTime;
    
    /**
     * æ‰§è¡Œç™»å½•ï¼Œè·å–è®¤è¯Cookie
     */
    public String login() {
        String loginUrl = adminUrl + "/login";
        
        // æ„å»ºç™»å½•å‚æ•°
        Map<String, String> loginParams = new HashMap<>();
        loginParams.put("userName", username);
        loginParams.put("password", password);
        
        try {
            // å‘é€ç™»å½•è¯·æ±‚
            CloseableHttpClient httpClient = HttpClients.createDefault();
            HttpPost loginPost = new HttpPost(loginUrl);
            
            // è®¾ç½®è¡¨å•å‚æ•°
            List<NameValuePair> params = new ArrayList<>();
            params.add(new BasicNameValuePair("userName", username));
            params.add(new BasicNameValuePair("password", password));
            loginPost.setEntity(new UrlEncodedFormEntity(params));
            
            // æ‰§è¡Œè¯·æ±‚
            CloseableHttpResponse response = httpClient.execute(loginPost);
            
            // æå–Cookie
            Header[] cookies = response.getHeaders("Set-Cookie");
            for (Header cookie : cookies) {
                String cookieValue = cookie.getValue();
                if (cookieValue.contains("XXL_JOB_LOGIN_IDENTITY")) {
                    this.loginCookie = cookieValue.split(";")[0];
                    this.cookieExpireTime = System.currentTimeMillis() + 24 * 60 * 60 * 1000; // 24å°æ—¶
                    break;
                }
            }
            
            return loginCookie;
            
        } catch (Exception e) {
            throw new RuntimeException("ç™»å½•å¤±è´¥", e);
        }
    }
    
    /**
     * è·å–æœ‰æ•ˆçš„Cookieï¼ˆè‡ªåŠ¨ç»­æœŸï¼‰
     */
    public String getValidCookie() {
        // æ£€æŸ¥Cookieæ˜¯å¦è¿‡æœŸ
        if (loginCookie == null || System.currentTimeMillis() > cookieExpireTime) {
            login(); // é‡æ–°ç™»å½•
        }
        return loginCookie;
    }
}
```

#### ğŸ”¸ APIè°ƒç”¨æ—¶æºå¸¦è®¤è¯ä¿¡æ¯

```java
public class AuthenticatedApiClient {
    
    private XxlJobAuthenticator authenticator;
    
    /**
     * å‘é€è®¤è¯è¯·æ±‚
     */
    private String sendAuthenticatedRequest(String url, Map<String, Object> params) {
        try {
            CloseableHttpClient httpClient = HttpClients.createDefault();
            HttpPost httpPost = new HttpPost(url);
            
            // è®¾ç½®è®¤è¯Cookie
            String cookie = authenticator.getValidCookie();
            httpPost.setHeader("Cookie", cookie);
            
            // è®¾ç½®è¯·æ±‚å‚æ•°
            String jsonParams = JSON.toJSONString(params);
            StringEntity entity = new StringEntity(jsonParams, "UTF-8");
            entity.setContentType("application/json");
            httpPost.setEntity(entity);
            
            // æ‰§è¡Œè¯·æ±‚
            CloseableHttpResponse response = httpClient.execute(httpPost);
            
            return EntityUtils.toString(response.getEntity());
            
        } catch (Exception e) {
            throw new RuntimeException("APIè°ƒç”¨å¤±è´¥", e);
        }
    }
}
```

### 5.3 Tokenè®¤è¯å¢å¼º


> ğŸ’¡ **å®ç”¨æŠ€å·§**  
> åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯ä»¥è€ƒè™‘å®ç°Tokenè®¤è¯æ¥æ›¿ä»£Cookieï¼Œæé«˜å®‰å…¨æ€§

#### ğŸ”¸ è‡ªå®šä¹‰Tokenè®¤è¯

```java
@Component
public class XxlJobTokenManager {
    
    @Value("${xxl.job.api.token:xxl-job-token}")
    private String secretKey;
    
    /**
     * ç”ŸæˆAPIè®¿é—®Token
     */
    public String generateToken(String username, long expireTime) {
        Map<String, Object> claims = new HashMap<>();
        claims.put("username", username);
        claims.put("expire", expireTime);
        
        // ä½¿ç”¨JWTç”ŸæˆTokenï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼‰
        String payload = JSON.toJSONString(claims);
        String signature = DigestUtils.md5Hex(payload + secretKey);
        
        return Base64.getEncoder().encodeToString(payload.getBytes()) + "." + signature;
    }
    
    /**
     * éªŒè¯Tokenæœ‰æ•ˆæ€§
     */
    public boolean validateToken(String token) {
        try {
            String[] parts = token.split("\\.");
            if (parts.length != 2) {
                return false;
            }
            
            String payload = new String(Base64.getDecoder().decode(parts[0]));
            String signature = parts[1];
            
            // éªŒè¯ç­¾å
            String expectedSignature = DigestUtils.md5Hex(payload + secretKey);
            if (!expectedSignature.equals(signature)) {
                return false;
            }
            
            // æ£€æŸ¥è¿‡æœŸæ—¶é—´
            JSONObject claims = JSON.parseObject(payload);
            long expireTime = claims.getLongValue("expire");
            
            return System.currentTimeMillis() < expireTime;
            
        } catch (Exception e) {
            return false;
        }
    }
}
```

### 5.4 å®‰å…¨æœ€ä½³å®è·µ


#### ğŸ”¸ HTTPSé€šä¿¡

```properties
# ç”Ÿäº§ç¯å¢ƒé…ç½®
xxl.job.admin.addresses=https://xxl-job.company.com
xxl.job.security.ssl.enabled=true
xxl.job.security.ssl.key-store=classpath:keystore.p12
xxl.job.security.ssl.key-store-password=your-password
```

#### ğŸ”¸ IPç™½åå•æ§åˆ¶

```java
@Configuration
public class SecurityConfig {
    
    /**
     * APIè®¿é—®IPç™½åå•è¿‡æ»¤å™¨
     */
    @Bean
    public FilterRegistrationBean<IpWhitelistFilter> ipWhitelistFilter() {
        FilterRegistrationBean<IpWhitelistFilter> registration = new FilterRegistrationBean<>();
        registration.setFilter(new IpWhitelistFilter());
        registration.addUrlPatterns("/xxl-job-admin/api/*");
        registration.setOrder(1);
        return registration;
    }
}

public class IpWhitelistFilter implements Filter {
    
    private Set<String> allowedIps = Set.of(
        "192.168.1.100",
        "192.168.1.101", 
        "10.0.0.0/24"  // æ”¯æŒç½‘æ®µ
    );
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        String clientIp = getClientIp((HttpServletRequest) request);
        
        if (!isIpAllowed(clientIp)) {
            HttpServletResponse httpResponse = (HttpServletResponse) response;
            httpResponse.setStatus(HttpStatus.FORBIDDEN.value());
            httpResponse.getWriter().write("IPè®¿é—®è¢«ç¦æ­¢: " + clientIp);
            return;
        }
        
        chain.doFilter(request, response);
    }
}
```

---

## 6. ğŸš¦ æ¥å£é™æµä¸ç›‘æ§


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦é™æµ

**å®é™…åœºæ™¯**ï¼šé˜²æ­¢APIè¢«æ¶æ„è°ƒç”¨æˆ–è¯¯ç”¨å¯¼è‡´ç³»ç»Ÿå´©æºƒ

```
é—®é¢˜åœºæ™¯ï¼š
ğŸ”¥ çˆ†ç‚¸å¼è°ƒç”¨ï¼šä¸šåŠ¡ç³»ç»Ÿbugå¯¼è‡´æ¯ç§’è°ƒç”¨1000æ¬¡API
ğŸ”¥ æ¶æ„æ”»å‡»ï¼šé»‘å®¢å°è¯•é€šè¿‡APIæš´åŠ›ç ´è§£
ğŸ”¥ èµ„æºè€—å°½ï¼šå¤§é‡å¹¶å‘è¯·æ±‚å¯¼è‡´æ•°æ®åº“è¿æ¥æ± è€—å°½

é™æµçš„ä½œç”¨ï¼š
âœ… ä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§
âœ… ç¡®ä¿æœåŠ¡è´¨é‡
âœ… é˜²æ­¢èµ„æºæ»¥ç”¨
```

### 6.2 é™æµç­–ç•¥å®ç°


#### ğŸ”¸ ä»¤ç‰Œæ¡¶é™æµ

```java
@Component
public class ApiRateLimiter {
    
    // æ¯ä¸ªIPçš„ä»¤ç‰Œæ¡¶ï¼ˆæ¯åˆ†é’Ÿ100ä¸ªè¯·æ±‚ï¼‰
    private final Map<String, Bucket> buckets = new ConcurrentHashMap<>();
    
    /**
     * æ£€æŸ¥æ˜¯å¦å…è®¸è®¿é—®
     */
    public boolean isAllowed(String clientIp) {
        Bucket bucket = buckets.computeIfAbsent(clientIp, this::createBucket);
        return bucket.tryConsume(1);
    }
    
    private Bucket createBucket(String ip) {
        // åˆ›å»ºä»¤ç‰Œæ¡¶ï¼šå®¹é‡100ï¼Œæ¯åˆ†é’Ÿè¡¥å……100ä¸ªä»¤ç‰Œ
        Bandwidth bandwidth = Bandwidth.classic(100, Refill.intervally(100, Duration.ofMinutes(1)));
        return Bucket.builder()
            .addLimit(bandwidth)
            .build();
    }
    
    /**
     * å®šæœŸæ¸…ç†è¿‡æœŸçš„ä»¤ç‰Œæ¡¶
     */
    @Scheduled(fixedRate = 300000) // 5åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡
    public void cleanupExpiredBuckets() {
        // å®é™…åº”ç”¨ä¸­å¯ä»¥æ ¹æ®æœ€åè®¿é—®æ—¶é—´æ¸…ç†
        if (buckets.size() > 10000) {
            buckets.clear(); // ç®€å•å¤„ç†
        }
    }
}
```

#### ğŸ”¸ æ¥å£é™æµæ‹¦æˆªå™¨

```java
@Component
public class RateLimitInterceptor implements HandlerInterceptor {
    
    @Autowired
    private ApiRateLimiter rateLimiter;
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, 
                           Object handler) throws Exception {
        
        String clientIp = getClientIp(request);
        
        // æ£€æŸ¥é™æµ
        if (!rateLimiter.isAllowed(clientIp)) {
            response.setStatus(HttpStatus.TOO_MANY_REQUESTS.value());
            response.setContentType("application/json;charset=UTF-8");
            
            ApiResult result = ApiResult.error("è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•");
            response.getWriter().write(JSON.toJSONString(result));
            
            return false;
        }
        
        return true;
    }
    
    private String getClientIp(HttpServletRequest request) {
        String xForwardedFor = request.getHeader("X-Forwarded-For");
        if (StringUtils.hasText(xForwardedFor)) {
            return xForwardedFor.split(",")[0].trim();
        }
        
        String xRealIp = request.getHeader("X-Real-IP");
        if (StringUtils.hasText(xRealIp)) {
            return xRealIp;
        }
        
        return request.getRemoteAddr();
    }
}
```

### 6.3 APIç›‘æ§æŒ‡æ ‡


#### ğŸ”¸ å…³é”®ç›‘æ§æŒ‡æ ‡

```java
@Component
public class ApiMetricsCollector {
    
    // è¯·æ±‚è®¡æ•°å™¨
    private final AtomicLong totalRequests = new AtomicLong(0);
    private final AtomicLong successRequests = new AtomicLong(0);
    private final AtomicLong failedRequests = new AtomicLong(0);
    
    // å“åº”æ—¶é—´ç»Ÿè®¡
    private final List<Long> responseTimes = new CopyOnWriteArrayList<>();
    
    /**
     * è®°å½•APIè°ƒç”¨æŒ‡æ ‡
     */
    public void recordApiCall(String apiPath, long responseTime, boolean success) {
        totalRequests.incrementAndGet();
        
        if (success) {
            successRequests.incrementAndGet();
        } else {
            failedRequests.incrementAndGet();
        }
        
        responseTimes.add(responseTime);
        
        // åªä¿ç•™æœ€è¿‘1000æ¬¡è®°å½•
        if (responseTimes.size() > 1000) {
            responseTimes.remove(0);
        }
    }
    
    /**
     * è·å–APIç»Ÿè®¡ä¿¡æ¯
     */
    public ApiMetrics getMetrics() {
        ApiMetrics metrics = new ApiMetrics();
        metrics.setTotalRequests(totalRequests.get());
        metrics.setSuccessRequests(successRequests.get());
        metrics.setFailedRequests(failedRequests.get());
        metrics.setSuccessRate(calculateSuccessRate());
        metrics.setAverageResponseTime(calculateAverageResponseTime());
        
        return metrics;
    }
    
    private double calculateSuccessRate() {
        long total = totalRequests.get();
        if (total == 0) return 0.0;
        return successRequests.get() * 100.0 / total;
    }
    
    private double calculateAverageResponseTime() {
        if (responseTimes.isEmpty()) return 0.0;
        return responseTimes.stream()
            .mapToLong(Long::longValue)
            .average()
            .orElse(0.0);
    }
}
```

#### ğŸ”¸ ç›‘æ§æ•°æ®å±•ç¤º

```java
@RestController
@RequestMapping("/api/metrics")
public class MetricsController {
    
    @Autowired
    private ApiMetricsCollector metricsCollector;
    
    /**
     * è·å–APIç›‘æ§æ•°æ®
     */
    @GetMapping("/api-stats")
    public ApiResult getApiStats() {
        ApiMetrics metrics = metricsCollector.getMetrics();
        
        // æ„å»ºç›‘æ§é¢æ¿æ•°æ®
        Map<String, Object> dashboard = new HashMap<>();
        dashboard.put("total_requests", metrics.getTotalRequests());
        dashboard.put("success_rate", String.format("%.2f%%", metrics.getSuccessRate()));
        dashboard.put("avg_response_time", String.format("%.0fms", metrics.getAverageResponseTime()));
        dashboard.put("qps", calculateCurrentQps());
        
        return ApiResult.success(dashboard);
    }
    
    private long calculateCurrentQps() {
        // ç®€åŒ–è®¡ç®—ï¼šæœ€è¿‘1åˆ†é’Ÿçš„å¹³å‡QPS
        // å®é™…åº”ç”¨ä¸­å¯ä»¥ä½¿ç”¨æ›´ç²¾ç¡®çš„æ—¶é—´çª—å£ç»Ÿè®¡
        return metricsCollector.getMetrics().getTotalRequests() / 60;
    }
}
```

> ğŸ“Š **æ€§èƒ½å¯¹æ¯”**  
> å¯ç”¨ç›‘æ§vsä¸å¯ç”¨ç›‘æ§çš„æ€§èƒ½å½±å“ï¼š
> - å†…å­˜å¢åŠ ï¼š< 5%
> - CPUå¢åŠ ï¼š< 2%  
> - å“åº”å»¶è¿Ÿï¼š< 1ms

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ APIæ¥å£æœ¬è´¨ï¼šè®©å¤–éƒ¨ç³»ç»Ÿèƒ½å¤Ÿ"é¥æ§"XXL-JOBçš„æ ‡å‡†åŒ–æ¥å£
ğŸ”¸ RESTfulè§„èŒƒï¼šä½¿ç”¨HTTPæ–¹æ³•(GET/POST/PUT/DELETE)æ“ä½œèµ„æºçš„è®¾è®¡é£æ ¼
ğŸ”¸ SDKå·¥å…·åŒ…ï¼šå°è£…å¤æ‚HTTPè¯·æ±‚çš„ç°æˆå·¥å…·ï¼Œç®€åŒ–å¼€å‘å·¥ä½œ
ğŸ”¸ ç³»ç»Ÿé›†æˆï¼šXXL-JOBä¸ä¸šåŠ¡ç³»ç»Ÿã€ç›‘æ§ç³»ç»Ÿã€æƒé™ç³»ç»Ÿçš„åä½œæ–¹å¼
ğŸ”¸ å®‰å…¨è®¤è¯ï¼šé€šè¿‡Cookie/TokenéªŒè¯APIè°ƒç”¨è€…èº«ä»½çš„æœºåˆ¶
ğŸ”¸ é™æµç›‘æ§ï¼šä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§ï¼Œæ”¶é›†æ€§èƒ½æ•°æ®çš„é‡è¦æ‰‹æ®µ
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ APIè®¾è®¡æ€æƒ³**
```
è®¾è®¡åŸåˆ™ï¼š
â€¢ ç®€å•æ˜“ç”¨ï¼šåƒä½¿ç”¨å·¥å…·ä¸€æ ·ç®€å•
â€¢ åŠŸèƒ½å®Œæ•´ï¼šè¦†ç›–æ‰€æœ‰æ ¸å¿ƒæ“ä½œéœ€æ±‚  
â€¢ å®‰å…¨å¯é ï¼šå…·å¤‡è®¤è¯ã€é™æµã€ç›‘æ§èƒ½åŠ›
â€¢ æ–‡æ¡£æ¸…æ™°ï¼šæ¯ä¸ªæ¥å£éƒ½æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºè¯´æ˜

å®é™…ä»·å€¼ï¼š
â€¢ ç³»ç»Ÿè§£è€¦ï¼šä¸šåŠ¡ç³»ç»Ÿä¸éœ€è¦ç›´æ¥æ“ä½œè°ƒåº¦ç³»ç»Ÿ
â€¢ è‡ªåŠ¨åŒ–ï¼šæ”¯æŒç¨‹åºåŒ–çš„ä»»åŠ¡ç®¡ç†
â€¢ é›†æˆä¾¿åˆ©ï¼šæä¾›å¤šç§è¯­è¨€çš„SDKæ”¯æŒ
```

**ğŸ”¹ å®‰å…¨é˜²æŠ¤é‡è¦æ€§**
```
å®‰å…¨å¨èƒï¼š
â€¢ æœªæˆæƒè®¿é—®ï¼šæ¶æ„ç”¨æˆ·è°ƒç”¨ç®¡ç†æ¥å£
â€¢ é¢‘ç¹æ”»å‡»ï¼šå¤§é‡è¯·æ±‚å¯¼è‡´ç³»ç»Ÿå´©æºƒ
â€¢ æ•°æ®æ³„éœ²ï¼šæ•æ„Ÿä»»åŠ¡ä¿¡æ¯è¢«çªƒå–

é˜²æŠ¤æªæ–½ï¼š
â€¢ èº«ä»½è®¤è¯ï¼šç¡®è®¤è°ƒç”¨è€…èº«ä»½
â€¢ æƒé™æ§åˆ¶ï¼šé™åˆ¶æ“ä½œèŒƒå›´
â€¢ æµé‡æ§åˆ¶ï¼šé˜²æ­¢ç³»ç»Ÿè¿‡è½½
â€¢ ç›‘æ§å‘Šè­¦ï¼šåŠæ—¶å‘ç°å¼‚å¸¸
```

**ğŸ”¹ é›†æˆå®è·µç»éªŒ**
```
é›†æˆç­–ç•¥ï¼š
â€¢ æ¸è¿›å¼é›†æˆï¼šä»ç®€å•åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥æ‰©å±•
â€¢ å¼‚å¸¸å¤„ç†ï¼šåšå¥½APIè°ƒç”¨å¤±è´¥çš„é™çº§æ–¹æ¡ˆ
â€¢ ç›‘æ§ä½“ç³»ï¼šå»ºç«‹å®Œæ•´çš„è°ƒç”¨é“¾ç›‘æ§
â€¢ æ–‡æ¡£ç»´æŠ¤ï¼šä¿æŒAPIæ–‡æ¡£ä¸å®é™…ä»£ç åŒæ­¥
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **ç”µå•†ç³»ç»Ÿ**ï¼šè®¢å•çŠ¶æ€å˜åŒ–è§¦å‘ç›¸å…³ä»»åŠ¡
- **æ•°æ®å¹³å°**ï¼šæ ¹æ®æ•°æ®é‡åŠ¨æ€è°ƒæ•´åŒæ­¥é¢‘ç‡  
- **è¿ç»´ç³»ç»Ÿ**ï¼šè‡ªåŠ¨åŒ–çš„è¿ç»´ä»»åŠ¡ç¼–æ’
- **ç›‘æ§æŠ¥è­¦**ï¼šå¼‚å¸¸æƒ…å†µä¸‹çš„ä»»åŠ¡è°ƒåº¦

**ğŸ”§ å¼€å‘å®è·µ**
- **ä»£ç å¤ç”¨**ï¼šå°è£…é€šç”¨çš„APIè°ƒç”¨æ–¹æ³•
- **é”™è¯¯å¤„ç†**ï¼šå»ºç«‹ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨è¿æ¥æ± å’Œç¼“å­˜
- **æµ‹è¯•éªŒè¯**ï¼šç¼–å†™APIè°ƒç”¨çš„å•å…ƒæµ‹è¯•

### 7.4 å­¦ä¹ å»ºè®®


**ğŸ“š å­¦ä¹ è·¯å¾„**
```
åŸºç¡€é˜¶æ®µï¼š
Week 1: ç†è§£APIåŸºæœ¬æ¦‚å¿µå’ŒRESTfulè§„èŒƒ
Week 2: æŒæ¡åŸºæœ¬çš„APIè°ƒç”¨æ–¹æ³•

è¿›é˜¶é˜¶æ®µï¼š  
Week 3: å­¦ä¹ SDKå°è£…å’Œç³»ç»Ÿé›†æˆ
Week 4: å®è·µå®‰å…¨è®¤è¯å’Œé™æµæ§åˆ¶

é«˜çº§é˜¶æ®µï¼š
Week 5: æ·±å…¥ç›‘æ§ä½“ç³»å’Œæ€§èƒ½ä¼˜åŒ–
Week 6: è®¾è®¡ä¼ä¸šçº§é›†æˆæ–¹æ¡ˆ
```

**ğŸ” å®è·µå»ºè®®**
```
åŠ¨æ‰‹ç»ƒä¹ ï¼š
â€¢ æ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œè°ƒç”¨æ‰€æœ‰æ ¸å¿ƒAPI
â€¢ ç¼–å†™ç®€å•çš„SDKå°è£…ç±»
â€¢ å®ç°åŸºæœ¬çš„è®¤è¯å’Œé™æµåŠŸèƒ½
â€¢ é›†æˆåˆ°ç°æœ‰é¡¹ç›®ä¸­éªŒè¯æ•ˆæœ

æ³¨æ„äº‹é¡¹ï¼š
â€¢ é‡è§†APIæ–‡æ¡£ï¼Œæ¯ä¸ªå‚æ•°éƒ½è¦ç†è§£æ¸…æ¥š
â€¢ åšå¥½å¼‚å¸¸å¤„ç†ï¼Œç½‘ç»œè°ƒç”¨éƒ½å¯èƒ½å¤±è´¥
â€¢ è€ƒè™‘å¹¶å‘åœºæ™¯ï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜
â€¢ å»ºç«‹ç›‘æ§æœºåˆ¶ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- APIè®©ç³»ç»Ÿé—´åä½œå˜å¾—ç®€å•æ ‡å‡†
- SDKæŠŠå¤æ‚è°ƒç”¨å°è£…æˆç®€å•æ–¹æ³•
- å®‰å…¨è®¤è¯å’Œé™æµæ˜¯ç”Ÿäº§å¿…å¤‡åŠŸèƒ½
- ç›‘æ§æ•°æ®å¸®åŠ©æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›