---
title: 2ã€JobHandlerå¼€å‘æ–¹å¼
---
## ğŸ“š ç›®å½•

1. [JobHandleråŸºç¡€æ¦‚å¿µ](#1-JobHandleråŸºç¡€æ¦‚å¿µ)
2. [@XxlJobæ³¨è§£å¼€å‘æ¨¡å¼](#2-XxlJobæ³¨è§£å¼€å‘æ¨¡å¼)
3. [Beanæ¨¡å¼å¼€å‘è¯¦è§£](#3-Beanæ¨¡å¼å¼€å‘è¯¦è§£)
4. [Classæ¨¡å¼å¼€å‘è¯¦è§£](#4-Classæ¨¡å¼å¼€å‘è¯¦è§£)
5. [Glueæ¨¡å¼å¼€å‘è¯¦è§£](#5-Glueæ¨¡å¼å¼€å‘è¯¦è§£)
6. [å‚æ•°ä¸è¿”å›å€¼å¤„ç†](#6-å‚æ•°ä¸è¿”å›å€¼å¤„ç†)
7. [å¼‚å¸¸å¤„ç†æœºåˆ¶](#7-å¼‚å¸¸å¤„ç†æœºåˆ¶)
8. [å¼€å‘æ¨¡å¼é€‰æ‹©æŒ‡å—](#8-å¼€å‘æ¨¡å¼é€‰æ‹©æŒ‡å—)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ JobHandleråŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯JobHandler


**ç®€å•ç†è§£**ï¼šJobHandlerå°±æ˜¯ä½ è¦æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡ä»£ç ï¼Œç›¸å½“äºå®šæ—¶ä»»åŠ¡çš„"å·¥ä½œå†…å®¹"ã€‚

```
æ¯”å¦‚ç”Ÿæ´»ä¸­çš„å®šæ—¶ä»»åŠ¡ï¼š
- æ¯å¤©æ—©ä¸Š7ç‚¹å“é—¹é’Ÿ â†’ é—¹é’Ÿæ˜¯è°ƒåº¦å™¨ï¼Œ"èµ·åºŠ"æ˜¯JobHandler
- æ¯æœˆ1å·å‘å·¥èµ„ â†’ è´¢åŠ¡ç³»ç»Ÿæ˜¯è°ƒåº¦å™¨ï¼Œ"è½¬è´¦æ“ä½œ"æ˜¯JobHandler
- æ¯å°æ—¶å¤‡ä»½æ•°æ® â†’ è°ƒåº¦ä¸­å¿ƒæ˜¯è°ƒåº¦å™¨ï¼Œ"å¤‡ä»½è„šæœ¬"æ˜¯JobHandler
```

**åœ¨XXL-JOBä¸­çš„è§’è‰²**ï¼š
- **è°ƒåº¦ä¸­å¿ƒ**ï¼šè´Ÿè´£ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼ˆæ—¶é—´ç®¡ç†å‘˜ï¼‰
- **æ‰§è¡Œå™¨**ï¼šè´Ÿè´£åœ¨å“ªé‡Œæ‰§è¡Œï¼ˆå·¥ä½œåœºæ‰€ï¼‰
- **JobHandler**ï¼šè´Ÿè´£æ‰§è¡Œä»€ä¹ˆå†…å®¹ï¼ˆå…·ä½“å·¥ä½œï¼‰

### 1.2 JobHandlerçš„æ ¸å¿ƒä½œç”¨


```
ä»»åŠ¡è°ƒåº¦æµç¨‹ï¼š
è°ƒåº¦ä¸­å¿ƒ â†’ æ‰§è¡Œå™¨ â†’ JobHandler â†’ ä¸šåŠ¡é€»è¾‘

1. è°ƒåº¦ä¸­å¿ƒï¼šæ—¶é—´åˆ°äº†ï¼Œè¯¥æ‰§è¡Œä»»åŠ¡äº†ï¼
2. æ‰§è¡Œå™¨ï¼šæ”¶åˆ°å‘½ä»¤ï¼Œæ‰¾åˆ°å¯¹åº”çš„JobHandler
3. JobHandlerï¼šå¼€å§‹æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡ä»£ç 
4. ä¸šåŠ¡é€»è¾‘ï¼šå®Œæˆå®é™…çš„å·¥ä½œï¼ˆå‘é‚®ä»¶ã€å¤„ç†æ•°æ®ç­‰ï¼‰
```

### 1.3 å¼€å‘æ–¹å¼æ¦‚è§ˆ


| å¼€å‘æ–¹å¼ | **é€‚ç”¨åœºæ™¯** | **å¼€å‘éš¾åº¦** | **çµæ´»æ€§** | **æ¨èç¨‹åº¦** |
|---------|------------|-------------|-----------|-------------|
| `@XxlJobæ³¨è§£` | æ—¥å¸¸å¼€å‘ï¼Œå›ºå®šé€»è¾‘ | â­â­ | â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| `Beanæ¨¡å¼` | å¤æ‚ä¸šåŠ¡é€»è¾‘ | â­â­â­ | â­â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| `Classæ¨¡å¼` | ç‹¬ç«‹ä»»åŠ¡æ¨¡å— | â­â­â­â­ | â­â­â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ |
| `Glueæ¨¡å¼` | åŠ¨æ€è„šæœ¬éœ€æ±‚ | â­â­ | â­â­â­â­â­ | ğŸ”¥ğŸ”¥ |

---

## 2. ğŸ·ï¸ @XxlJobæ³¨è§£å¼€å‘æ¨¡å¼


### 2.1 æ³¨è§£æ¨¡å¼åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯æ³¨è§£æ¨¡å¼**ï¼š
- æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„å¼€å‘æ–¹å¼
- ç›´æ¥åœ¨æ™®é€šæ–¹æ³•ä¸ŠåŠ `@XxlJob`æ³¨è§£
- åƒå†™æ™®é€šæ–¹æ³•ä¸€æ ·å†™ä»»åŠ¡é€»è¾‘

**ä¸ºä»€ä¹ˆæ¨èæ³¨è§£æ¨¡å¼**ï¼š
```
ä¼˜åŠ¿åˆ†æï¼š
âœ… å¼€å‘ç®€å•ï¼šå°±åƒå†™æ™®é€šæ–¹æ³•
âœ… é›†æˆæ–¹ä¾¿ï¼šä¸éœ€è¦é¢å¤–é…ç½®
âœ… æ˜“äºç»´æŠ¤ï¼šä»£ç æ¸…æ™°ç›´è§‚
âœ… è°ƒè¯•å‹å¥½ï¼šå¯ä»¥ç›´æ¥è¿è¡Œæµ‹è¯•
```

### 2.2 æ³¨è§£æ¨¡å¼åŸºç¡€ä½¿ç”¨


**æœ€ç®€å•çš„ç¤ºä¾‹**ï¼š
```java
@Component
public class MyJobHandler {
    
    @XxlJob("helloJob")
    public ReturnT<String> hello(String param) {
        System.out.println("Hello XXL-JOB! å‚æ•°ï¼š" + param);
        return ReturnT.SUCCESS;
    }
}
```

**ä»£ç è§£é‡Š**ï¼š
- `@Component`ï¼šè®©Springç®¡ç†è¿™ä¸ªç±»
- `@XxlJob("helloJob")`ï¼šå®šä¹‰ä»»åŠ¡åç§°ä¸º"helloJob"
- `ReturnT<String>`ï¼šXXL-JOBçš„æ ‡å‡†è¿”å›ç±»å‹
- `String param`ï¼šæ¥æ”¶è°ƒåº¦ä¸­å¿ƒä¼ æ¥çš„å‚æ•°

### 2.3 å®é™…ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹


**åœºæ™¯1ï¼šæ•°æ®æ¸…ç†ä»»åŠ¡**
```java
@Component
public class DataCleanJobHandler {
    
    @Autowired
    private UserService userService;
    
    @XxlJob("cleanExpiredData")
    public ReturnT<String> cleanExpiredData(String param) {
        try {
            // åˆ é™¤30å¤©å‰çš„ä¸´æ—¶æ•°æ®
            int count = userService.deleteExpiredTempData(30);
            
            String result = String.format("æ¸…ç†å®Œæˆï¼Œåˆ é™¤äº†%dæ¡è¿‡æœŸæ•°æ®", count);
            XxlJobHelper.log(result);
            
            return ReturnT.SUCCESS;
        } catch (Exception e) {
            XxlJobHelper.log("æ•°æ®æ¸…ç†å¤±è´¥ï¼š" + e.getMessage());
            return ReturnT.FAIL;
        }
    }
}
```

**åœºæ™¯2ï¼šé‚®ä»¶å‘é€ä»»åŠ¡**
```java
@Component
public class EmailJobHandler {
    
    @Autowired
    private EmailService emailService;
    
    @XxlJob("sendDailyReport")
    public ReturnT<String> sendDailyReport(String param) {
        try {
            // ç”Ÿæˆæ—¥æŠ¥æ•°æ®
            String reportContent = generateDailyReport();
            
            // å‘é€é‚®ä»¶ç»™ç®¡ç†å‘˜
            emailService.sendToAdmins("æ¯æ—¥æ•°æ®æŠ¥å‘Š", reportContent);
            
            return new ReturnT<>("é‚®ä»¶å‘é€æˆåŠŸ");
        } catch (Exception e) {
            return new ReturnT<>(ReturnT.FAIL_CODE, "é‚®ä»¶å‘é€å¤±è´¥ï¼š" + e.getMessage());
        }
    }
    
    private String generateDailyReport() {
        // ç”ŸæˆæŠ¥å‘Šé€»è¾‘
        return "ä»Šæ—¥æ–°å¢ç”¨æˆ·: 100, è®¢å•æ•°: 200";
    }
}
```

### 2.4 æ³¨è§£æ¨¡å¼é…ç½®è¯´æ˜


**åœ¨è°ƒåº¦ä¸­å¿ƒçš„é…ç½®**ï¼š
```
ä»»åŠ¡é…ç½®ç•Œé¢ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JobHandler: helloJob            â”‚  â† å¯¹åº”@XxlJob("helloJob")
â”‚ æ‰§è¡Œå‚æ•°: user=admin,type=full   â”‚  â† ä¼ ç»™æ–¹æ³•çš„paramå‚æ•°
â”‚ Cron: 0 0 2 * * ?              â”‚  â† æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ğŸ«˜ Beanæ¨¡å¼å¼€å‘è¯¦è§£


### 3.1 Beanæ¨¡å¼åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯Beanæ¨¡å¼**ï¼š
- åˆ›å»ºä¸€ä¸ªå®ç°`IJobHandler`æ¥å£çš„ç±»
- å°†ç±»æ³¨å†Œä¸ºSpring Bean
- é‡å†™`execute`æ–¹æ³•å®ç°ä»»åŠ¡é€»è¾‘

**Beanæ¨¡å¼ vs æ³¨è§£æ¨¡å¼**ï¼š
```
æ³¨è§£æ¨¡å¼ï¼šç®€å•ç›´æ¥ï¼Œé€‚åˆç®€å•ä»»åŠ¡
@XxlJob("taskName")
public ReturnT<String> myTask(String param) { ... }

Beanæ¨¡å¼ï¼šåŠŸèƒ½æ›´å®Œæ•´ï¼Œé€‚åˆå¤æ‚ä»»åŠ¡
public class MyJobHandler extends IJobHandler {
    public ReturnT<String> execute(String param) { ... }
}
```

### 3.2 Beanæ¨¡å¼åŸºç¡€å®ç°


**åŸºç¡€ç»“æ„**ï¼š
```java
@Component
public class MyBeanJobHandler extends IJobHandler {
    
    @Override
    public ReturnT<String> execute(String param) throws Exception {
        // ä»»åŠ¡æ‰§è¡Œé€»è¾‘
        XxlJobHelper.log("å¼€å§‹æ‰§è¡ŒBeanæ¨¡å¼ä»»åŠ¡");
        
        // å¤„ç†ä¸šåŠ¡é€»è¾‘
        processBusinessLogic(param);
        
        XxlJobHelper.log("ä»»åŠ¡æ‰§è¡Œå®Œæˆ");
        return ReturnT.SUCCESS;
    }
    
    private void processBusinessLogic(String param) {
        // å…·ä½“ä¸šåŠ¡å¤„ç†
    }
}
```

### 3.3 å¤æ‚ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹


**åœºæ™¯ï¼šè®¢å•æ•°æ®åŒæ­¥ä»»åŠ¡**
```java
@Component
public class OrderSyncJobHandler extends IJobHandler {
    
    @Autowired
    private OrderService orderService;
    
    @Autowired
    private ThirdPartyService thirdPartyService;
    
    @Override
    public ReturnT<String> execute(String param) throws Exception {
        XxlJobHelper.log("å¼€å§‹åŒæ­¥è®¢å•æ•°æ®");
        
        try {
            // è§£æå‚æ•°
            SyncConfig config = parseParam(param);
            
            // åˆ†é¡µè·å–éœ€è¦åŒæ­¥çš„è®¢å•
            int pageSize = 100;
            int totalCount = 0;
            
            for (int page = 1; ; page++) {
                List<Order> orders = orderService.getNeedSyncOrders(page, pageSize);
                if (orders.isEmpty()) {
                    break;
                }
                
                // åŒæ­¥åˆ°ç¬¬ä¸‰æ–¹ç³»ç»Ÿ
                for (Order order : orders) {
                    syncSingleOrder(order);
                    totalCount++;
                }
                
                XxlJobHelper.log("å·²å¤„ç†ç¬¬" + page + "é¡µï¼Œå…±" + orders.size() + "æ¡æ•°æ®");
            }
            
            String result = String.format("åŒæ­¥å®Œæˆï¼Œå…±å¤„ç†%dæ¡è®¢å•æ•°æ®", totalCount);
            XxlJobHelper.log(result);
            return new ReturnT<>(result);
            
        } catch (Exception e) {
            XxlJobHelper.log("è®¢å•åŒæ­¥å¤±è´¥ï¼š" + e.getMessage());
            return ReturnT.FAIL;
        }
    }
    
    private SyncConfig parseParam(String param) {
        // è§£æé…ç½®å‚æ•°
        return new SyncConfig();
    }
    
    private void syncSingleOrder(Order order) {
        // åŒæ­¥å•ä¸ªè®¢å•åˆ°ç¬¬ä¸‰æ–¹
        thirdPartyService.syncOrder(order);
        orderService.markAsSynced(order.getId());
    }
}
```

### 3.4 Beanæ¨¡å¼æ³¨å†Œæ–¹å¼


**è‡ªåŠ¨æ³¨å†Œ**ï¼ˆæ¨èï¼‰ï¼š
```java
// ä½¿ç”¨@Componentè‡ªåŠ¨æ³¨å†Œ
@Component
public class MyJobHandler extends IJobHandler {
    // ... å®ç°ä»£ç 
}
```

**æ‰‹åŠ¨æ³¨å†Œ**ï¼š
```java
@Configuration
public class JobConfig {
    
    @Bean
    public IJobHandler myCustomJobHandler() {
        return new IJobHandler() {
            @Override
            public ReturnT<String> execute(String param) throws Exception {
                // ä»»åŠ¡é€»è¾‘
                return ReturnT.SUCCESS;
            }
        };
    }
}
```

---

## 4. ğŸ“¦ Classæ¨¡å¼å¼€å‘è¯¦è§£


### 4.1 Classæ¨¡å¼åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯Classæ¨¡å¼**ï¼š
- åˆ›å»ºç‹¬ç«‹çš„Javaç±»æ–‡ä»¶
- ä¸ä¾èµ–Springå®¹å™¨
- è¿è¡Œæ—¶åŠ¨æ€åŠ è½½æ‰§è¡Œ

**é€‚ç”¨åœºæ™¯**ï¼š
```
âœ… ç‹¬ç«‹çš„ä»»åŠ¡æ¨¡å—ï¼Œä¸éœ€è¦Springä¾èµ–æ³¨å…¥
âœ… éœ€è¦åŠ¨æ€åŠ è½½çš„ä»»åŠ¡
âœ… ç¬¬ä¸‰æ–¹jaråŒ…ä¸­çš„ä»»åŠ¡ç±»
âœ… ç®€å•çš„å·¥å…·ç±»ä»»åŠ¡
```

### 4.2 Classæ¨¡å¼åŸºç¡€å®ç°


**åŸºç¡€ç»“æ„**ï¼š
```java
public class MyClassJobHandler extends IJobHandler {
    
    @Override
    public ReturnT<String> execute(String param) throws Exception {
        // ä¸èƒ½ä½¿ç”¨@Autowiredï¼Œéœ€è¦æ‰‹åŠ¨è·å–èµ„æº
        
        System.out.println("Classæ¨¡å¼ä»»åŠ¡å¼€å§‹æ‰§è¡Œ");
        System.out.println("æ¥æ”¶åˆ°å‚æ•°ï¼š" + param);
        
        // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
        String result = doBusinessWork(param);
        
        System.out.println("ä»»åŠ¡æ‰§è¡Œç»“æœï¼š" + result);
        return new ReturnT<>(result);
    }
    
    private String doBusinessWork(String param) {
        // å…·ä½“ä¸šåŠ¡é€»è¾‘
        return "å¤„ç†å®Œæˆ";
    }
}
```

### 4.3 Classæ¨¡å¼å®é™…åº”ç”¨


**åœºæ™¯ï¼šæ–‡ä»¶å¤„ç†ä»»åŠ¡**
```java
public class FileProcessJobHandler extends IJobHandler {
    
    @Override
    public ReturnT<String> execute(String param) throws Exception {
        try {
            // è§£ææ–‡ä»¶è·¯å¾„å‚æ•°
            String filePath = parseFilePath(param);
            
            // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
            File file = new File(filePath);
            if (!file.exists()) {
                return new ReturnT<>(ReturnT.FAIL_CODE, "æ–‡ä»¶ä¸å­˜åœ¨ï¼š" + filePath);
            }
            
            // å¤„ç†æ–‡ä»¶
            int processedLines = processFile(file);
            
            String result = String.format("æ–‡ä»¶å¤„ç†å®Œæˆï¼Œå…±å¤„ç†%dè¡Œæ•°æ®", processedLines);
            return new ReturnT<>(result);
            
        } catch (Exception e) {
            return new ReturnT<>(ReturnT.FAIL_CODE, "æ–‡ä»¶å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
        }
    }
    
    private String parseFilePath(String param) {
        // ä»å‚æ•°ä¸­è§£ææ–‡ä»¶è·¯å¾„
        return param != null ? param : "/default/path/data.txt";
    }
    
    private int processFile(File file) throws IOException {
        int lineCount = 0;
        try (BufferedReader reader = new BufferedReader(new FileReader(file))) {
            String line;
            while ((line = reader.readLine()) != null) {
                // å¤„ç†æ¯ä¸€è¡Œæ•°æ®
                processLine(line);
                lineCount++;
            }
        }
        return lineCount;
    }
    
    private void processLine(String line) {
        // å¤„ç†å•è¡Œæ•°æ®çš„é€»è¾‘
        System.out.println("å¤„ç†æ•°æ®ï¼š" + line);
    }
}
```

### 4.4 Classæ¨¡å¼é…ç½®æ–¹å¼


**åœ¨è°ƒåº¦ä¸­å¿ƒé…ç½®**ï¼š
```
ä»»åŠ¡é…ç½®ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡Œæ¨¡å¼: Classæ¨¡å¼                      â”‚
â”‚ JobHandler: com.example.FileProcessJob  â”‚  â† å®Œæ•´ç±»å
â”‚ æ‰§è¡Œå‚æ•°: /data/input/daily.csv          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> âš ï¸ **æ³¨æ„**ï¼šClassæ¨¡å¼éœ€è¦æä¾›å®Œæ•´çš„ç±»åè·¯å¾„ï¼Œä¸”è¯¥ç±»å¿…é¡»åœ¨é¡¹ç›®çš„classpathä¸­

---

## 5. ğŸ¨ Glueæ¨¡å¼å¼€å‘è¯¦è§£


### 5.1 Glueæ¨¡å¼åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯Glueæ¨¡å¼**ï¼š
- Glue = èƒ¶æ°´ï¼Œæ„æ€æ˜¯"ç²˜åˆå‰‚"
- å¯ä»¥åœ¨è°ƒåº¦ä¸­å¿ƒç•Œé¢ç›´æ¥ç¼–å†™è„šæœ¬ä»£ç 
- æ”¯æŒå¤šç§è„šæœ¬è¯­è¨€ï¼ˆJavaã€Shellã€Pythonç­‰ï¼‰

**Glueæ¨¡å¼çš„ç‹¬ç‰¹ä¼˜åŠ¿**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼šæ”¹ä»£ç  â†’ é‡æ–°æ‰“åŒ… â†’ éƒ¨ç½²é‡å¯ â†’ æµ‹è¯•
Glueæ–¹å¼ï¼šåœ¨çº¿ç¼–è¾‘ â†’ ä¿å­˜ â†’ ç«‹å³ç”Ÿæ•ˆ âœ¨

ç‰¹åˆ«é€‚åˆï¼š
âœ… ä¸´æ—¶æ€§ä»»åŠ¡
âœ… ç»å¸¸éœ€è¦è°ƒæ•´çš„é€»è¾‘  
âœ… ç®€å•çš„è„šæœ¬ä»»åŠ¡
âœ… ç´§æ€¥ä¿®å¤é—®é¢˜
```

### 5.2 Glue(Java)æ¨¡å¼


**åŸºç¡€æ¨¡æ¿**ï¼š
```java
public class GlueJobHandler extends IJobHandler {
    
    @Override
    public ReturnT<String> execute(String param) throws Exception {
        
        XxlJobHelper.log("XXL-JOB, Hello World.");
        
        // åœ¨è¿™é‡Œç¼–å†™ä½ çš„ä¸šåŠ¡é€»è¾‘
        String result = processTask(param);
        
        return new ReturnT<>(result);
    }
    
    private String processTask(String param) {
        // å¤„ç†ä¸šåŠ¡é€»è¾‘
        return "ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ";
    }
}
```

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```java
public class GlueJobHandler extends IJobHandler {
    
    @Override
    public ReturnT<String> execute(String param) throws Exception {
        
        XxlJobHelper.log("å¼€å§‹æ‰§è¡Œæ•°æ®ç»Ÿè®¡ä»»åŠ¡");
        
        try {
            // æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢ï¼ˆå®é™…é¡¹ç›®ä¸­å¯ä»¥æ³¨å…¥Serviceï¼‰
            int userCount = queryUserCount();
            int orderCount = queryOrderCount();
            
            // ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š
            String report = String.format(
                "ä»Šæ—¥ç»Ÿè®¡ï¼šç”¨æˆ·æ•°é‡=%dï¼Œè®¢å•æ•°é‡=%d", 
                userCount, orderCount
            );
            
            XxlJobHelper.log("ç»Ÿè®¡å®Œæˆï¼š" + report);
            
            // å¯ä»¥è°ƒç”¨å¤–éƒ¨æ¥å£å‘é€æŠ¥å‘Š
            sendReport(report);
            
            return new ReturnT<>("ç»Ÿè®¡ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ");
            
        } catch (Exception e) {
            XxlJobHelper.log("ç»Ÿè®¡ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼š" + e.getMessage());
            return ReturnT.FAIL;
        }
    }
    
    private int queryUserCount() {
        // å®é™…é¡¹ç›®ä¸­è¿™é‡Œä¼šæŸ¥è¯¢æ•°æ®åº“
        return 1000;
    }
    
    private int queryOrderCount() {
        return 500;
    }
    
    private void sendReport(String report) {
        // å‘é€æŠ¥å‘Šåˆ°é’‰é’‰ã€é‚®ä»¶ç­‰
        System.out.println("å‘é€æŠ¥å‘Šï¼š" + report);
    }
}
```

### 5.3 Glue(Shell)æ¨¡å¼


**åŸºç¡€Shellè„šæœ¬**ï¼š
```bash
#!/bin/bash
echo "å¼€å§‹æ‰§è¡ŒShellä»»åŠ¡"

# è·å–ä¼ å…¥å‚æ•°
PARAM=$1
echo "æ¥æ”¶åˆ°å‚æ•°ï¼š$PARAM"

# æ‰§è¡Œä¸šåŠ¡é€»è¾‘
if [ -z "$PARAM" ]; then
    echo "å‚æ•°ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å¤„ç†"
    PARAM="default"
fi

# æ¨¡æ‹Ÿä¸šåŠ¡å¤„ç†
echo "æ­£åœ¨å¤„ç†ï¼š$PARAM"
sleep 2

# è¾“å‡ºç»“æœ
echo "Shellä»»åŠ¡æ‰§è¡Œå®Œæˆ"
echo "å¤„ç†ç»“æœï¼šsuccess"
```

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
echo "å¼€å§‹æ‰§è¡Œæ—¥å¿—æ¸…ç†ä»»åŠ¡"

# é…ç½®å‚æ•°
LOG_DIR="/var/logs/app"
DAYS=7

echo "æ¸…ç†ç›®å½•ï¼š$LOG_DIR"
echo "ä¿ç•™å¤©æ•°ï¼š$DAYS"

# æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨
if [ ! -d "$LOG_DIR" ]; then
    echo "é”™è¯¯ï¼šæ—¥å¿—ç›®å½•ä¸å­˜åœ¨ $LOG_DIR"
    exit 1
fi

# æ¸…ç†è¿‡æœŸæ—¥å¿—
find "$LOG_DIR" -name "*.log" -mtime +$DAYS -delete

# ç»Ÿè®¡æ¸…ç†ç»“æœ
REMAINING_COUNT=$(find "$LOG_DIR" -name "*.log" | wc -l)
echo "æ¸…ç†å®Œæˆï¼Œå‰©ä½™æ—¥å¿—æ–‡ä»¶ï¼š$REMAINING_COUNT ä¸ª"

echo "æ—¥å¿—æ¸…ç†ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ"
```

### 5.4 Glueæ¨¡å¼ä½¿ç”¨æ­¥éª¤


**æ“ä½œæµç¨‹**ï¼š
```
æ­¥éª¤1ï¼šåœ¨è°ƒåº¦ä¸­å¿ƒåˆ›å»ºä»»åŠ¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿è¡Œæ¨¡å¼: GLUEæ¨¡å¼(Java)         â”‚
â”‚ JobHandler: è‡ªåŠ¨ç”Ÿæˆ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤2ï¼šç‚¹å‡»"GLUE IDE"æŒ‰é’®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åœ¨çº¿ä»£ç ç¼–è¾‘å™¨                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ public class GlueJobHandler â”‚  â”‚
â”‚ â”‚ extends IJobHandler {       â”‚  â”‚
â”‚ â”‚   // åœ¨è¿™é‡Œå†™ä»£ç              â”‚  â”‚
â”‚ â”‚ }                          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤3ï¼šç¼–å†™ä»£ç å¹¶ä¿å­˜
æ­¥éª¤4ï¼šå¯åŠ¨ä»»åŠ¡æµ‹è¯•
```

---

## 6. ğŸ“‹ å‚æ•°ä¸è¿”å›å€¼å¤„ç†


### 6.1 å‚æ•°å¤„ç†è¯¦è§£


**å‚æ•°çš„æ¥æº**ï¼š
```
å‚æ•°æ¥æºé“¾è·¯ï¼š
è°ƒåº¦ä¸­å¿ƒä»»åŠ¡é…ç½® â†’ æ‰§è¡Œå™¨ â†’ JobHandleræ–¹æ³•å‚æ•°

é…ç½®ç•Œé¢ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œå‚æ•°: type=full,date=2024   â”‚  â† è¿™é‡Œé…ç½®çš„å‚æ•°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
æ–¹æ³•æ¥æ”¶ï¼š
public ReturnT<String> myJob(String param) {
    // param = "type=full,date=2024"
}
```

**å‚æ•°è§£æå¸¸è§æ–¹å¼**ï¼š
```java
@XxlJob("parseParamJob")
public ReturnT<String> parseParamJob(String param) {
    
    // æ–¹å¼1ï¼šç®€å•å­—ç¬¦ä¸²å¤„ç†
    if ("full".equals(param)) {
        return doFullProcess();
    }
    
    // æ–¹å¼2ï¼šé”®å€¼å¯¹è§£æ
    Map<String, String> paramMap = parseKeyValue(param);
    String type = paramMap.get("type");
    String date = paramMap.get("date");
    
    // æ–¹å¼3ï¼šJSONæ ¼å¼è§£æ
    if (param.startsWith("{")) {
        // ä½¿ç”¨JSONå·¥å…·è§£æ
        TaskConfig config = JSON.parseObject(param, TaskConfig.class);
    }
    
    return ReturnT.SUCCESS;
}

// è§£æ key1=value1,key2=value2 æ ¼å¼
private Map<String, String> parseKeyValue(String param) {
    Map<String, String> map = new HashMap<>();
    if (param != null && !param.trim().isEmpty()) {
        String[] pairs = param.split(",");
        for (String pair : pairs) {
            String[] kv = pair.split("=");
            if (kv.length == 2) {
                map.put(kv[0].trim(), kv[1].trim());
            }
        }
    }
    return map;
}
```

### 6.2 è¿”å›å€¼å¤„ç†è§„èŒƒ


**ReturnTç±»å‹è¯¦è§£**ï¼š
```java
// ReturnTæ˜¯XXL-JOBçš„æ ‡å‡†è¿”å›ç±»å‹
public class ReturnT<T> {
    public static final int SUCCESS_CODE = 200;
    public static final int FAIL_CODE = 500;
    
    private int code;        // è¿”å›ç 
    private String msg;      // è¿”å›æ¶ˆæ¯
    private T content;       // è¿”å›å†…å®¹
}
```

**å¸¸ç”¨è¿”å›æ–¹å¼**ï¼š
```java
// 1. æˆåŠŸè¿”å›ï¼ˆæœ€å¸¸ç”¨ï¼‰
return ReturnT.SUCCESS;

// 2. æˆåŠŸè¿”å›å¸¦æ¶ˆæ¯
return new ReturnT<>("å¤„ç†äº†100æ¡æ•°æ®");

// 3. å¤±è´¥è¿”å›
return ReturnT.FAIL;

// 4. å¤±è´¥è¿”å›å¸¦é”™è¯¯ä¿¡æ¯
return new ReturnT<>(ReturnT.FAIL_CODE, "æ•°æ®åº“è¿æ¥å¤±è´¥");

// 5. è‡ªå®šä¹‰è¿”å›ç 
return new ReturnT<>(201, "éƒ¨åˆ†æˆåŠŸ", "æˆåŠŸ10æ¡ï¼Œå¤±è´¥2æ¡");
```

**è¿”å›å€¼çš„ä½œç”¨**ï¼š
```
è¿”å›å€¼å½±å“ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ReturnT.SUCCESS (200)                   â”‚
â”‚ â†’ è°ƒåº¦ä¸­å¿ƒæ˜¾ç¤ºï¼šæ‰§è¡ŒæˆåŠŸ âœ…                â”‚
â”‚ â†’ ä»»åŠ¡æ—¥å¿—ï¼šç»¿è‰²æˆåŠŸçŠ¶æ€                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ReturnT.FAIL (500)                      â”‚
â”‚ â†’ è°ƒåº¦ä¸­å¿ƒæ˜¾ç¤ºï¼šæ‰§è¡Œå¤±è´¥ âŒ                â”‚  
â”‚ â†’ è§¦å‘å‘Šè­¦ï¼ˆå¦‚æœé…ç½®äº†ï¼‰                   â”‚
â”‚ â†’ å¯èƒ½è§¦å‘é‡è¯•ï¼ˆå¦‚æœé…ç½®äº†ï¼‰                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 æ—¥å¿—è®°å½•æœ€ä½³å®è·µ


**ä½¿ç”¨XxlJobHelperè®°å½•æ—¥å¿—**ï¼š
```java
@XxlJob("logDemoJob")
public ReturnT<String> logDemoJob(String param) {
    
    // è®°å½•å¼€å§‹æ—¥å¿—
    XxlJobHelper.log("ä»»åŠ¡å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°ï¼š{}", param);
    
    try {
        // è®°å½•å¤„ç†è¿‡ç¨‹
        XxlJobHelper.log("æ­£åœ¨å¤„ç†æ•°æ®...");
        
        int count = processData();
        
        // è®°å½•å¤„ç†ç»“æœ
        XxlJobHelper.log("æ•°æ®å¤„ç†å®Œæˆï¼Œå…±å¤„ç†{}æ¡è®°å½•", count);
        
        return new ReturnT<>("æˆåŠŸå¤„ç†" + count + "æ¡æ•°æ®");
        
    } catch (Exception e) {
        // è®°å½•é”™è¯¯æ—¥å¿—
        XxlJobHelper.log("ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼š{}", e.getMessage());
        return ReturnT.FAIL;
    }
}
```

---

## 7. âš ï¸ å¼‚å¸¸å¤„ç†æœºåˆ¶


### 7.1 å¼‚å¸¸å¤„ç†åŸºæœ¬åŸåˆ™


**å¼‚å¸¸å¤„ç†çš„é‡è¦æ€§**ï¼š
```
æ²¡æœ‰å¼‚å¸¸å¤„ç†çš„åæœï¼š
âŒ ä»»åŠ¡å´©æºƒï¼Œè°ƒåº¦ä¸­å¿ƒæ”¶ä¸åˆ°åé¦ˆ
âŒ æ— æ³•çŸ¥é“å…·ä½“é”™è¯¯åŸå› 
âŒ å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
âŒ å½±å“åç»­ä»»åŠ¡è°ƒåº¦
```

**æ­£ç¡®çš„å¼‚å¸¸å¤„ç†æ€è·¯**ï¼š
```
å¼‚å¸¸å¤„ç†ä¸‰æ­¥èµ°ï¼š
1. æ•è·å¼‚å¸¸ â†’ try-catchåŒ…å›´æ ¸å¿ƒé€»è¾‘
2. è®°å½•å¼‚å¸¸ â†’ è¯¦ç»†è®°å½•é”™è¯¯ä¿¡æ¯å’Œä¸Šä¸‹æ–‡
3. è¿”å›å¤±è´¥ â†’ æ˜ç¡®å‘ŠçŸ¥è°ƒåº¦ä¸­å¿ƒæ‰§è¡Œå¤±è´¥
```

### 7.2 å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ


**åŸºç¡€å¼‚å¸¸å¤„ç†æ¨¡æ¿**ï¼š
```java
@XxlJob("safeJobHandler")
public ReturnT<String> safeJobHandler(String param) {
    
    XxlJobHelper.log("ä»»åŠ¡å¼€å§‹æ‰§è¡Œ");
    
    try {
        // æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
        String result = executeBusinessLogic(param);
        
        XxlJobHelper.log("ä»»åŠ¡æ‰§è¡ŒæˆåŠŸï¼š{}", result);
        return new ReturnT<>(result);
        
    } catch (BusinessException e) {
        // ä¸šåŠ¡å¼‚å¸¸ï¼šè®°å½•è¯¦ç»†ä¿¡æ¯ï¼Œä½†ä¸éœ€è¦å‘Šè­¦
        XxlJobHelper.log("ä¸šåŠ¡å¤„ç†å¤±è´¥ï¼š{}", e.getMessage());
        return new ReturnT<>(ReturnT.FAIL_CODE, "ä¸šåŠ¡å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
        
    } catch (Exception e) {
        // ç³»ç»Ÿå¼‚å¸¸ï¼šè®°å½•å®Œæ•´å †æ ˆï¼Œéœ€è¦å‘Šè­¦
        XxlJobHelper.log("ç³»ç»Ÿå¼‚å¸¸ï¼š{}", e.getMessage());
        e.printStackTrace(); // åœ¨æœåŠ¡å™¨æ—¥å¿—ä¸­æ‰“å°å®Œæ•´å †æ ˆ
        return new ReturnT<>(ReturnT.FAIL_CODE, "ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æ—¥å¿—");
    }
}
```

**åˆ†å±‚å¼‚å¸¸å¤„ç†**ï¼š
```java
@XxlJob("advancedJobHandler")
public ReturnT<String> advancedJobHandler(String param) {
    
    try {
        // å‚æ•°éªŒè¯å¼‚å¸¸å¤„ç†
        validateParam(param);
        
        // ä¸šåŠ¡å¤„ç†å¼‚å¸¸å¤„ç†  
        String result = processBusinessWithRetry(param);
        
        return new ReturnT<>(result);
        
    } catch (ParameterException e) {
        XxlJobHelper.log("å‚æ•°é”™è¯¯ï¼š{}", e.getMessage());
        return new ReturnT<>(400, "å‚æ•°é”™è¯¯ï¼š" + e.getMessage());
        
    } catch (RetryException e) {
        XxlJobHelper.log("é‡è¯•å¤±è´¥ï¼š{}", e.getMessage());
        return new ReturnT<>(ReturnT.FAIL_CODE, "é‡è¯•å¤±è´¥ï¼š" + e.getMessage());
        
    } catch (Exception e) {
        XxlJobHelper.log("æœªçŸ¥å¼‚å¸¸ï¼š{}", e.getMessage());
        return ReturnT.FAIL;
    }
}

private void validateParam(String param) throws ParameterException {
    if (param == null || param.trim().isEmpty()) {
        throw new ParameterException("å‚æ•°ä¸èƒ½ä¸ºç©º");
    }
}

private String processBusinessWithRetry(String param) throws RetryException {
    int maxRetry = 3;
    for (int i = 0; i < maxRetry; i++) {
        try {
            return doActualWork(param);
        } catch (Exception e) {
            XxlJobHelper.log("ç¬¬{}æ¬¡å°è¯•å¤±è´¥ï¼š{}", i + 1, e.getMessage());
            if (i == maxRetry - 1) {
                throw new RetryException("é‡è¯•" + maxRetry + "æ¬¡åä»ç„¶å¤±è´¥");
            }
            // ç­‰å¾…åé‡è¯•
            try {
                Thread.sleep(1000 * (i + 1)); // é€’å¢ç­‰å¾…æ—¶é—´
            } catch (InterruptedException ie) {
                Thread.currentThread().interrupt();
                throw new RetryException("é‡è¯•è¢«ä¸­æ–­");
            }
        }
    }
    return null;
}
```

### 7.3 å¸¸è§å¼‚å¸¸åœºæ™¯å¤„ç†


**æ•°æ®åº“å¼‚å¸¸å¤„ç†**ï¼š
```java
@XxlJob("dbJobHandler")
public ReturnT<String> dbJobHandler(String param) {
    
    try {
        List<Order> orders = orderService.getPendingOrders();
        
        for (Order order : orders) {
            processOrder(order);
        }
        
        return new ReturnT<>("å¤„ç†å®Œæˆï¼Œå…±" + orders.size() + "æ¡è®¢å•");
        
    } catch (DataAccessException e) {
        // æ•°æ®åº“è®¿é—®å¼‚å¸¸
        XxlJobHelper.log("æ•°æ®åº“è®¿é—®å¼‚å¸¸ï¼š{}", e.getMessage());
        return new ReturnT<>(ReturnT.FAIL_CODE, "æ•°æ®åº“è®¿é—®å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®åº“è¿æ¥");
        
    } catch (TransactionException e) {
        // äº‹åŠ¡å¼‚å¸¸
        XxlJobHelper.log("äº‹åŠ¡å¤„ç†å¼‚å¸¸ï¼š{}", e.getMessage());
        return new ReturnT<>(ReturnT.FAIL_CODE, "äº‹åŠ¡å¤„ç†å¤±è´¥ï¼Œæ•°æ®å¯èƒ½ä¸ä¸€è‡´");
    }
}
```

**å¤–éƒ¨æœåŠ¡è°ƒç”¨å¼‚å¸¸å¤„ç†**ï¼š
```java
@XxlJob("apiJobHandler")  
public ReturnT<String> apiJobHandler(String param) {
    
    try {
        // è°ƒç”¨å¤–éƒ¨API
        String response = thirdPartyService.callApi(param);
        
        return new ReturnT<>("APIè°ƒç”¨æˆåŠŸï¼š" + response);
        
    } catch (ConnectTimeoutException e) {
        XxlJobHelper.log("è¿æ¥è¶…æ—¶ï¼š{}", e.getMessage());
        return new ReturnT<>(ReturnT.FAIL_CODE, "å¤–éƒ¨æœåŠ¡è¿æ¥è¶…æ—¶");
        
    } catch (SocketTimeoutException e) {
        XxlJobHelper.log("è¯»å–è¶…æ—¶ï¼š{}", e.getMessage());  
        return new ReturnT<>(ReturnT.FAIL_CODE, "å¤–éƒ¨æœåŠ¡å“åº”è¶…æ—¶");
        
    } catch (HttpClientErrorException e) {
        XxlJobHelper.log("HTTPå®¢æˆ·ç«¯é”™è¯¯ï¼šçŠ¶æ€ç {}, å“åº”{}", 
                        e.getStatusCode(), e.getResponseBodyAsString());
        return new ReturnT<>(ReturnT.FAIL_CODE, "å¤–éƒ¨æœåŠ¡è¿”å›é”™è¯¯ï¼š" + e.getStatusCode());
    }
}
```

---

## 8. ğŸ¯ å¼€å‘æ¨¡å¼é€‰æ‹©æŒ‡å—


### 8.1 é€‰æ‹©å†³ç­–æµç¨‹å›¾


```
ä»»åŠ¡å¼€å‘æ¨¡å¼é€‰æ‹©æµç¨‹ï¼š

å¼€å§‹å¼€å‘ä»»åŠ¡
      â†“
   éœ€è¦Springä¾èµ–æ³¨å…¥ï¼Ÿ
      â†“        â†“
     æ˜¯        å¦
      â†“        â†“
   ç®€å•é€»è¾‘ï¼Ÿ   ç‹¬ç«‹æ€§å¼ºï¼Ÿ
   â†“    â†“      â†“    â†“
  æ˜¯    å¦     æ˜¯    å¦
   â†“    â†“      â†“    â†“
æ³¨è§£æ¨¡å¼ Beanæ¨¡å¼ Classæ¨¡å¼ éœ€è¦åŠ¨æ€ä¿®æ”¹ï¼Ÿ
                        â†“    â†“
                       æ˜¯    å¦
                        â†“    â†“
                    Glueæ¨¡å¼ Classæ¨¡å¼
```

### 8.2 è¯¦ç»†é€‰æ‹©æ ‡å‡†


| åœºæ™¯æè¿° | **æ¨èæ–¹æ¡ˆ** | **ç†ç”±è¯´æ˜** |
|---------|------------|-------------|
| æ—¥å¸¸ä¸šåŠ¡å®šæ—¶ä»»åŠ¡ | `@XxlJobæ³¨è§£` | å¼€å‘ç®€å•ï¼Œé›†æˆæ–¹ä¾¿ï¼Œæ˜“ç»´æŠ¤ |
| å¤æ‚çš„æ•°æ®å¤„ç†ä»»åŠ¡ | `Beanæ¨¡å¼` | åŠŸèƒ½å®Œæ•´ï¼Œä¾¿äºæµ‹è¯•å’Œæ‰©å±• |
| å·¥å…·ç±»å‹çš„ç‹¬ç«‹ä»»åŠ¡ | `Classæ¨¡å¼` | æ— ä¾èµ–ï¼Œå¯ç‹¬ç«‹éƒ¨ç½²å’Œæµ‹è¯• |
| ä¸´æ—¶æ€§æˆ–ç»å¸¸è°ƒæ•´çš„ä»»åŠ¡ | `Glueæ¨¡å¼` | åœ¨çº¿ä¿®æ”¹ï¼Œæ— éœ€é‡æ–°éƒ¨ç½² |
| éœ€è¦å¤æ‚å‚æ•°é…ç½®çš„ä»»åŠ¡ | `Beanæ¨¡å¼` | ä¾¿äºå‚æ•°è§£æå’ŒéªŒè¯ |
| ç¬¬ä¸‰æ–¹jaråŒ…ä¸­çš„ä»»åŠ¡ | `Classæ¨¡å¼` | ä¸ä¾èµ–Springå®¹å™¨ |

### 8.3 å®é™…é¡¹ç›®åº”ç”¨å»ºè®®


**å°å‹é¡¹ç›®æ¨è**ï¼š
```
é¡¹ç›®ç‰¹ç‚¹ï¼šä¸šåŠ¡ç®€å•ï¼Œå›¢é˜Ÿå°ï¼Œå¿«é€Ÿå¼€å‘
æ¨èæ–¹æ¡ˆï¼š
âœ… ä¸»è¦ä½¿ç”¨@XxlJobæ³¨è§£æ¨¡å¼
âœ… ä¸´æ—¶ä»»åŠ¡ä½¿ç”¨Glue(Java)æ¨¡å¼
âœ… Shellè„šæœ¬ä»»åŠ¡ä½¿ç”¨Glue(Shell)æ¨¡å¼

ç¤ºä¾‹ç»“æ„ï¼š
src/main/java/job/
â”œâ”€â”€ UserJobHandler.java      (@XxlJobæ³¨è§£)
â”œâ”€â”€ OrderJobHandler.java     (@XxlJobæ³¨è§£)
â””â”€â”€ ReportJobHandler.java    (@XxlJobæ³¨è§£)
```

**ä¸­å¤§å‹é¡¹ç›®æ¨è**ï¼š
```
é¡¹ç›®ç‰¹ç‚¹ï¼šä¸šåŠ¡å¤æ‚ï¼Œå›¢é˜Ÿå¤§ï¼Œéœ€è¦è§„èŒƒ
æ¨èæ–¹æ¡ˆï¼š
âœ… ç®€å•ä»»åŠ¡ä½¿ç”¨@XxlJobæ³¨è§£æ¨¡å¼
âœ… å¤æ‚ä»»åŠ¡ä½¿ç”¨Beanæ¨¡å¼
âœ… é€šç”¨å·¥å…·ä½¿ç”¨Classæ¨¡å¼
âœ… ç´§æ€¥ä¿®å¤ä½¿ç”¨Glueæ¨¡å¼

ç¤ºä¾‹ç»“æ„ï¼š
src/main/java/job/
â”œâ”€â”€ handler/                 (æ³¨è§£æ¨¡å¼)
â”‚   â”œâ”€â”€ SimpleJobHandler.java
â”‚   â””â”€â”€ QuickJobHandler.java
â”œâ”€â”€ bean/                    (Beanæ¨¡å¼)  
â”‚   â”œâ”€â”€ ComplexDataJob.java
â”‚   â””â”€â”€ IntegrationJob.java
â””â”€â”€ util/                    (Classæ¨¡å¼)
    â”œâ”€â”€ FileProcessJob.java
    â””â”€â”€ ToolJob.java
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å››ç§å¼€å‘æ¨¡å¼å¯¹æ¯”


```
ğŸ“Š å¼€å‘æ¨¡å¼ç‰¹ç‚¹å¯¹æ¯”ï¼š

@XxlJobæ³¨è§£æ¨¡å¼ï¼š
âœ… æœ€ç®€å•æ˜“ç”¨ï¼Œå¼€å‘æ•ˆç‡é«˜
âœ… Springé›†æˆå®Œç¾ï¼Œä¾èµ–æ³¨å…¥æ–¹ä¾¿
âœ… ä»£ç ç»„ç»‡æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
âŒ ä¿®æ”¹éœ€è¦é‡æ–°éƒ¨ç½²

Beanæ¨¡å¼ï¼š
âœ… åŠŸèƒ½æœ€å®Œæ•´ï¼Œæ‰©å±•æ€§å¼º
âœ… ä¾¿äºå¤æ‚ä¸šåŠ¡é€»è¾‘å¤„ç†
âœ… æµ‹è¯•å‹å¥½ï¼Œè°ƒè¯•æ–¹ä¾¿
âŒ ä»£ç é‡ç›¸å¯¹è¾ƒå¤š

Classæ¨¡å¼ï¼š
âœ… æ— Springä¾èµ–ï¼Œç‹¬ç«‹æ€§å¼º
âœ… é€‚åˆå·¥å…·ç±»ä»»åŠ¡
âœ… å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œæµ‹è¯•
âŒ ä¸èƒ½ä½¿ç”¨ä¾èµ–æ³¨å…¥

Glueæ¨¡å¼ï¼š
âœ… åœ¨çº¿ç¼–è¾‘ï¼Œæ— éœ€éƒ¨ç½²
âœ… æ”¯æŒå¤šç§è„šæœ¬è¯­è¨€
âœ… é€‚åˆä¸´æ—¶ä»»åŠ¡å’Œç´§æ€¥ä¿®å¤
âŒ ä»£ç ç®¡ç†ä¸ä¾¿ï¼Œä¸é€‚åˆå¤æ‚é€»è¾‘
```

### 9.2 å‚æ•°å’Œè¿”å›å€¼å¤„ç†è¦ç‚¹


> ğŸ’¡ **å…³é”®åŸåˆ™**ï¼š
> - å‚æ•°è§£æè¦å¥å£®ï¼Œè€ƒè™‘å„ç§è¾¹ç•Œæƒ…å†µ
> - è¿”å›å€¼è¦æ˜ç¡®ï¼ŒæˆåŠŸå¤±è´¥éƒ½è¦æœ‰æ¸…æ™°çš„æ¶ˆæ¯
> - æ—¥å¿—è®°å½•è¦è¯¦ç»†ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥

### 9.3 å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ


> âš ï¸ **é‡è¦æé†’**ï¼š
> - æ°¸è¿œä¸è¦è®©å¼‚å¸¸å‘ä¸ŠæŠ›å‡ºåˆ°æ¡†æ¶å±‚
> - åŒºåˆ†ä¸šåŠ¡å¼‚å¸¸å’Œç³»ç»Ÿå¼‚å¸¸ï¼Œåˆ†åˆ«å¤„ç†
> - è®°å½•è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¾¿äºæ’æŸ¥é—®é¢˜
> - è€ƒè™‘é‡è¯•æœºåˆ¶ï¼Œä½†è¦é¿å…æ— é™é‡è¯•

### 9.4 å¼€å‘å»ºè®®æ€»ç»“


**æ–°æ‰‹å­¦ä¹ è·¯å¾„**ï¼š
```
ç¬¬1æ­¥ï¼šæŒæ¡@XxlJobæ³¨è§£æ¨¡å¼ â†’ æœ€åŸºç¡€æœ€å¸¸ç”¨
ç¬¬2æ­¥ï¼šå­¦ä¹ å‚æ•°å¤„ç†å’Œè¿”å›å€¼è§„èŒƒ â†’ æ ‡å‡†åŒ–å¼€å‘
ç¬¬3æ­¥ï¼šæŒæ¡å¼‚å¸¸å¤„ç†æœºåˆ¶ â†’ æé«˜ç¨‹åºå¥å£®æ€§
ç¬¬4æ­¥ï¼šäº†è§£Beanæ¨¡å¼ â†’ åº”å¯¹å¤æ‚åœºæ™¯
ç¬¬5æ­¥ï¼šå­¦ä¹ å…¶ä»–æ¨¡å¼ â†’ å®Œå–„æŠ€èƒ½æ ‘
```

**ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
```
ğŸ”¥ ä¼˜å…ˆçº§æ’åºï¼š
1. @XxlJobæ³¨è§£æ¨¡å¼ - æ—¥å¸¸å¼€å‘é¦–é€‰
2. Beanæ¨¡å¼ - å¤æ‚ä¸šåŠ¡åœºæ™¯
3. Glueæ¨¡å¼ - ä¸´æ—¶ä»»åŠ¡å’Œç´§æ€¥ä¿®å¤
4. Classæ¨¡å¼ - ç‰¹æ®Šåœºæ™¯ä½¿ç”¨

ğŸ’¡ æœ€ä½³å®è·µï¼š
- ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç­–ç•¥
- è§„èŒƒå‚æ•°ä¼ é€’æ ¼å¼
- å®Œå–„æ—¥å¿—è®°å½•æœºåˆ¶
- å»ºç«‹ä»»åŠ¡å¼€å‘è§„èŒƒæ–‡æ¡£
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- æ³¨è§£æ¨¡å¼æœ€å¸¸ç”¨ï¼Œç®€å•æ˜“æ‡‚å¥½ä¸Šæ‰‹
- Beanæ¨¡å¼åŠŸèƒ½å…¨ï¼Œå¤æ‚ä¸šåŠ¡å®ƒæ¥ç®¡
- Classæ¨¡å¼å¾ˆç‹¬ç«‹ï¼Œå·¥å…·ä»»åŠ¡ä¸æ±‚äºº
- Glueæ¨¡å¼èƒ½åœ¨çº¿ï¼Œä¸´æ—¶ä¿®æ”¹æœ€æ–¹ä¾¿
- å¼‚å¸¸å¤„ç†è¦åšå¥½ï¼Œå‚æ•°è¿”å›æœ‰è§„èŒƒ