---
title: 1ã€ç”µå•†ç³»ç»Ÿç¼“å­˜æ¶æ„è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [ç”µå•†ç¼“å­˜æ¶æ„æ¦‚è¿°](#1-ç”µå•†ç¼“å­˜æ¶æ„æ¦‚è¿°)
2. [å•†å“è¯¦æƒ…ç¼“å­˜ç­–ç•¥](#2-å•†å“è¯¦æƒ…ç¼“å­˜ç­–ç•¥)
3. [åº“å­˜æ•°æ®ç¼“å­˜è®¾è®¡](#3-åº“å­˜æ•°æ®ç¼“å­˜è®¾è®¡)
4. [ç”¨æˆ·ä¼šè¯ä¸è´­ç‰©è½¦ç¼“å­˜](#4-ç”¨æˆ·ä¼šè¯ä¸è´­ç‰©è½¦ç¼“å­˜)
5. [ç§’æ€åœºæ™¯ç¼“å­˜å¤„ç†](#5-ç§’æ€åœºæ™¯ç¼“å­˜å¤„ç†)
6. [æœç´¢ä¸æ¨èç¼“å­˜](#6-æœç´¢ä¸æ¨èç¼“å­˜)
7. [å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡](#7-å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡)
8. [ç¼“å­˜æ›´æ–°ä¸ä¸€è‡´æ€§](#8-ç¼“å­˜æ›´æ–°ä¸ä¸€è‡´æ€§)
9. [è¥é”€æ´»åŠ¨ç¼“å­˜ç­–ç•¥](#9-è¥é”€æ´»åŠ¨ç¼“å­˜ç­–ç•¥)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›’ ç”µå•†ç¼“å­˜æ¶æ„æ¦‚è¿°


### 1.1 ä¸ºä»€ä¹ˆç”µå•†ç³»ç»Ÿç‰¹åˆ«éœ€è¦ç¼“å­˜ï¼Ÿ


**ğŸ”¥ ä¸šåŠ¡ç‰¹ç‚¹å†³å®šäº†ç¼“å­˜çš„é‡è¦æ€§**

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨æ·˜å®ä¸Šæµè§ˆå•†å“ï¼š
- æ¯ç§’é’Ÿæœ‰æˆåƒä¸Šä¸‡çš„ç”¨æˆ·åœ¨çœ‹åŒä¸€ä¸ªçƒ­é—¨å•†å“
- æ¯æ¬¡éƒ½å»æ•°æ®åº“æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œæ•°æ®åº“ä¼šè¢«å‹å®
- ç”¨æˆ·ç­‰å¾…æ—¶é—´å¤ªé•¿ï¼Œä½“éªŒæå·®ï¼Œå¯èƒ½å°±å»åˆ«çš„å¹³å°äº†

```
æ²¡æœ‰ç¼“å­˜çš„åœºæ™¯ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ åº”ç”¨æœåŠ¡å™¨ â†’ æ•°æ®åº“æŸ¥è¯¢ â†’ è¿”å›ç»“æœ
æ¯æ¬¡éƒ½è¦èµ°æ•°æ®åº“ï¼Œå“åº”æ…¢ï¼Œæ•°æ®åº“å‹åŠ›å¤§

æœ‰ç¼“å­˜çš„åœºæ™¯ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ åº”ç”¨æœåŠ¡å™¨ â†’ ç¼“å­˜å‘½ä¸­ â†’ ç«‹å³è¿”å›
åªæœ‰ç¼“å­˜æ²¡æœ‰æ—¶æ‰æŸ¥æ•°æ®åº“ï¼Œå“åº”å¿«ï¼Œæ•°æ®åº“å‹åŠ›å°
```

### 1.2 ç”µå•†ç³»ç»Ÿç¼“å­˜çš„æ ¸å¿ƒæŒ‘æˆ˜


**â­â­â­ é«˜çº§éš¾åº¦**

| æŒ‘æˆ˜ç±»å‹ | **å…·ä½“é—®é¢˜** | **å½±å“** |
|---------|------------|---------|
| ğŸ”¥ **é«˜å¹¶å‘** | `åŒ11æœŸé—´ç¬é—´ç™¾ä¸‡çº§è®¿é—®` | `ç³»ç»Ÿç˜«ç—ª` |
| âš¡ **ä½å»¶è¿Ÿ** | `ç”¨æˆ·ä¸èƒ½ç­‰è¶…è¿‡3ç§’` | `ç”¨æˆ·æµå¤±` |
| ğŸ”„ **æ•°æ®ä¸€è‡´æ€§** | `ä»·æ ¼å˜äº†ç¼“å­˜æ²¡æ›´æ–°` | `ä¸šåŠ¡æŸå¤±` |
| ğŸ’° **æˆæœ¬æ§åˆ¶** | `ç¼“å­˜èµ„æºæœ‰é™` | `å‘½ä¸­ç‡ä½` |

### 1.3 ç”µå•†ç¼“å­˜çš„æ•´ä½“æ¶æ„æ€è·¯


**ğŸ¯ åˆ†å±‚ç¼“å­˜ç­–ç•¥**

```
ç”µå•†ç¼“å­˜æ¶æ„å…¨æ™¯å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ç”¨æˆ·æµè§ˆå™¨    â”‚ â†â†’ â”‚   CDNè¾¹ç¼˜ç¼“å­˜    â”‚
â”‚   (æµè§ˆå™¨ç¼“å­˜)   â”‚    â”‚  (é™æ€èµ„æº)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è´Ÿè½½å‡è¡¡å™¨     â”‚    â”‚   åº”ç”¨æœåŠ¡å™¨     â”‚
â”‚  (nginxç¼“å­˜)    â”‚ â†â†’ â”‚  (æœ¬åœ°ç¼“å­˜)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åˆ†å¸ƒå¼ç¼“å­˜     â”‚    â”‚   æ•°æ®åº“é›†ç¾¤     â”‚
â”‚  (Redisé›†ç¾¤)    â”‚ â†â†’ â”‚  (æœ€ç»ˆæ•°æ®æº)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„èŒè´£ï¼Œè¶Šå¾€ä¸Šå“åº”è¶Šå¿«ï¼
```

---

## 2. ğŸ“¦ å•†å“è¯¦æƒ…ç¼“å­˜ç­–ç•¥


### 2.1 å•†å“ä¿¡æ¯çš„ç‰¹ç‚¹åˆ†æ


**ğŸ’¡ ç†è§£å•†å“æ•°æ®çš„ç‰¹æ€§**

å•†å“ä¿¡æ¯å°±åƒä¸€ä¸ªå•†åº—é‡Œçš„å•†å“æ ‡ç­¾ï¼ŒåŒ…å«äº†å„ç§ä¿¡æ¯ï¼š

```
ä¸€ä¸ªå•†å“çš„å®Œæ•´ä¿¡æ¯ï¼š
â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ å•†å“ID: 12345        â”‚
â”‚ â€¢ å•†å“åç§°: iPhone15    â”‚  â† åŸºæœ¬ä¸å˜
â”‚ â€¢ å“ç‰Œ: Apple          â”‚
â”‚ â€¢ åˆ†ç±»: æ‰‹æœºæ•°ç         â”‚
â”œâ”€ ä»·æ ¼ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ åŸä»·: 5999          â”‚  â† å¯èƒ½å˜åŒ–
â”‚ â€¢ ä¼˜æƒ ä»·: 5499        â”‚
â”‚ â€¢ ä¼šå‘˜ä»·: 5299        â”‚
â”œâ”€ åº“å­˜ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ æ€»åº“å­˜: 1000        â”‚  â† å®æ—¶å˜åŒ–
â”‚ â€¢ å¯å”®åº“å­˜: 800       â”‚
â”œâ”€ è¥é”€ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ä¿ƒé”€æ ‡ç­¾: é™æ—¶ç‰¹ä»·   â”‚  â† ç»å¸¸å˜åŒ–
â”‚ â€¢ ä¼˜æƒ åˆ¸: æ»¡å‡åˆ¸       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åˆ†å±‚ç¼“å­˜è®¾è®¡


**ğŸŸ¢ åŸºç¡€æ¦‚å¿µ**

æ ¹æ®æ•°æ®å˜åŒ–é¢‘ç‡ï¼Œæˆ‘ä»¬æŠŠå•†å“ä¿¡æ¯åˆ†æˆä¸åŒå±‚æ¬¡ï¼š

```java
// å•†å“åŸºæœ¬ä¿¡æ¯ - å¾ˆå°‘å˜åŒ–ï¼Œå¯ä»¥ç¼“å­˜å¾ˆä¹…
@Cache(expire = "24h")
public class ProductBasicInfo {
    private Long productId;
    private String productName;
    private String brand;
    private String category;
    // è¿™äº›ä¿¡æ¯åŸºæœ¬ä¸å˜ï¼Œå¯ä»¥ç¼“å­˜24å°æ—¶
}

// å•†å“ä»·æ ¼ä¿¡æ¯ - å¯èƒ½å˜åŒ–ï¼Œç¼“å­˜æ—¶é—´shorter
@Cache(expire = "1h") 
public class ProductPriceInfo {
    private BigDecimal originalPrice;
    private BigDecimal currentPrice;
    private BigDecimal vipPrice;
    // ä»·æ ¼å¯èƒ½è°ƒæ•´ï¼Œç¼“å­˜1å°æ—¶
}

// å•†å“åº“å­˜ä¿¡æ¯ - å®æ—¶å˜åŒ–ï¼Œç¼“å­˜æ—¶é—´å¾ˆçŸ­
@Cache(expire = "30s")
public class ProductStockInfo {
    private Integer totalStock;
    private Integer availableStock;
    // åº“å­˜å®æ—¶å˜åŒ–ï¼Œåªç¼“å­˜30ç§’
}
```

### 2.3 ç¼“å­˜é”®è®¾è®¡è§„èŒƒ


**ğŸ”¤ ç¼“å­˜Keyçš„è®¾è®¡åŸåˆ™**

å°±åƒç»™æ–‡ä»¶èµ·åå­—ä¸€æ ·ï¼Œç¼“å­˜çš„Keyä¹Ÿè¦æœ‰è§„å¾‹ï¼š

```
ç¼“å­˜Keyå‘½åè§„èŒƒï¼š
product:basic:{productId}     - å•†å“åŸºæœ¬ä¿¡æ¯
product:price:{productId}     - å•†å“ä»·æ ¼ä¿¡æ¯  
product:stock:{productId}     - å•†å“åº“å­˜ä¿¡æ¯
product:detail:{productId}    - å•†å“è¯¦æƒ…é¡µå®Œæ•´æ•°æ®

å®é™…ä¾‹å­ï¼š
product:basic:12345          - å•†å“12345çš„åŸºæœ¬ä¿¡æ¯
product:price:12345          - å•†å“12345çš„ä»·æ ¼ä¿¡æ¯
product:stock:12345          - å•†å“12345çš„åº“å­˜ä¿¡æ¯
```

### 2.4 ç¼“å­˜é¢„çƒ­ç­–ç•¥


**ğŸ”¥ çƒ­é—¨å•†å“æå‰å‡†å¤‡**

> ğŸ’¡ **æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨ç”¨æˆ·è®¿é—®ä¹‹å‰ï¼Œå°±æŠŠçƒ­é—¨å•†å“ä¿¡æ¯æ”¾åˆ°ç¼“å­˜é‡Œ

**é¢„çƒ­æ—¶æœºé€‰æ‹©ï¼š**
- **å‡Œæ™¨ä½å³°æœŸ**ï¼šç³»ç»Ÿå‹åŠ›å°ï¼Œé¢„çƒ­å¯¹ç”¨æˆ·æ— å½±å“
- **æ´»åŠ¨å¼€å§‹å‰**ï¼šç§’æ€ã€ä¿ƒé”€æ´»åŠ¨å‰1å°æ—¶é¢„çƒ­
- **æ–°å“å‘å¸ƒå‰**ï¼šæ–°å“ä¸Šçº¿å‰é¢„çƒ­åŸºæœ¬ä¿¡æ¯

```java
@Service
public class ProductCacheWarmupService {
    
    // é¢„çƒ­çƒ­é—¨å•†å“
    public void warmupHotProducts() {
        // 1. è·å–çƒ­é—¨å•†å“åˆ—è¡¨ï¼ˆæ ¹æ®é”€é‡ã€æµè§ˆé‡æ’åºï¼‰
        List<Long> hotProductIds = getHotProductIds();
        
        // 2. æ‰¹é‡åŠ è½½åˆ°ç¼“å­˜
        for (Long productId : hotProductIds) {
            // é¢„çƒ­åŸºæœ¬ä¿¡æ¯
            loadProductToCache(productId);
        }
    }
    
    // å°†å•†å“ä¿¡æ¯åŠ è½½åˆ°ç¼“å­˜
    private void loadProductToCache(Long productId) {
        ProductDetail detail = productService.getProductDetail(productId);
        String cacheKey = "product:detail:" + productId;
        redisTemplate.setex(cacheKey, 3600, detail); // ç¼“å­˜1å°æ—¶
    }
}
```

---

## 3. ğŸ“Š åº“å­˜æ•°æ®ç¼“å­˜è®¾è®¡


### 3.1 åº“å­˜ç¼“å­˜çš„ç‰¹æ®Šæ€§


**â­â­â­ é«˜çº§éš¾åº¦ - åº“å­˜æ•°æ®æœ€å¤æ‚**

åº“å­˜å’Œå…¶ä»–æ•°æ®ä¸åŒï¼Œå®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š
- **å®æ—¶æ€§è¦æ±‚é«˜**ï¼šå–äº†ä¸€ä¸ªå°±è¦ç«‹å³å‡1
- **å¹¶å‘è®¿é—®é¢‘ç¹**ï¼šå¾ˆå¤šäººåŒæ—¶ä¹°åŒä¸€ä¸ªå•†å“
- **æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸¥æ ¼**ï¼šä¸èƒ½å–è¶…ï¼Œä¹Ÿä¸èƒ½å°‘å–

```
åº“å­˜æ›´æ–°çš„å¹¶å‘é—®é¢˜ï¼š
æ—¶é—´çº¿ï¼š  ç”¨æˆ·A          ç”¨æˆ·B          æ•°æ®åº“
T1:     è¯»å–åº“å­˜=10     è¯»å–åº“å­˜=10     åº“å­˜=10
T2:     è´­ä¹°1ä¸ª        è´­ä¹°2ä¸ª        åº“å­˜=10  
T3:     å†™å…¥åº“å­˜=9     å†™å…¥åº“å­˜=8      åº“å­˜=8ï¼ˆé”™è¯¯ï¼åº”è¯¥æ˜¯7ï¼‰

è¿™å°±æ˜¯ç»å…¸çš„å¹¶å‘é—®é¢˜ï¼
```

### 3.2 åº“å­˜ç¼“å­˜æ¶æ„è®¾è®¡


**ğŸ—ï¸ å¤šçº§åº“å­˜ç®¡ç†**

```
åº“å­˜ç¼“å­˜æ¶æ„è®¾è®¡ï¼š

â”Œâ”€ æ€»åº“å­˜ç®¡ç† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚  æ•°æ®åº“æ€»åº“å­˜: 1000               â”‚ â† æƒå¨æ•°æ®æº
â”‚      â†“                          â”‚
â”‚  Redisæ€»ç¼“å­˜: stock:total:12345  â”‚ â† åˆ†å¸ƒå¼ç¼“å­˜
â”‚      â†“                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚åº”ç”¨èŠ‚ç‚¹1 â”‚ â”‚åº”ç”¨èŠ‚ç‚¹2 â”‚        â”‚ â† æœ¬åœ°ç¼“å­˜
â”‚  â”‚æœ¬åœ°åº“å­˜:â”‚ â”‚æœ¬åœ°åº“å­˜:â”‚        â”‚
â”‚  â”‚   100   â”‚ â”‚   100   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€»åº“å­˜é€šè¿‡ç®—æ³•åˆ†é…åˆ°å„ä¸ªåº”ç”¨èŠ‚ç‚¹ï¼Œ
æ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹å¤„ç†è‡ªå·±çš„åº“å­˜ï¼Œå‡å°‘ç«äº‰ï¼
```

### 3.3 åº“å­˜æ‰£å‡ç­–ç•¥


**ğŸ¯ ä¸‰ç§ä¸»æµæ–¹æ¡ˆå¯¹æ¯”**

| æ–¹æ¡ˆç±»å‹ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| **Redisæ‰£å‡** | `æ€§èƒ½é«˜ï¼Œä¸€è‡´æ€§å¥½` | `Rediså®•æœºé£é™©` | `é«˜å¹¶å‘å•†å“` |
| **æ•°æ®åº“æ‰£å‡** | `æ•°æ®å®‰å…¨å¯é ` | `æ€§èƒ½è¾ƒå·®` | `ä½å¹¶å‘å•†å“` |
| **åˆ†æ®µæ‰£å‡** | `æ€§èƒ½+å®‰å…¨å…¼é¡¾` | `é€»è¾‘å¤æ‚` | `å¤§ä¿ƒåœºæ™¯` |

**åˆ†æ®µæ‰£å‡å®ç°ç¤ºä¾‹ï¼š**

```java
@Service
public class SegmentedStockService {
    
    // é¢„å…ˆåˆ†é…åº“å­˜æ®µ
    public void allocateStockSegments(Long productId, Integer totalStock) {
        int nodeCount = getActiveNodeCount(); // è·å–æ´»è·ƒèŠ‚ç‚¹æ•°
        int segmentSize = totalStock / nodeCount; // æ¯ä¸ªèŠ‚ç‚¹åˆ†é…çš„åº“å­˜
        
        for (int i = 0; i < nodeCount; i++) {
            String segmentKey = "stock:segment:" + productId + ":" + i;
            redisTemplate.set(segmentKey, segmentSize);
        }
    }
    
    // æ‰£å‡åº“å­˜
    public boolean decreaseStock(Long productId, Integer quantity) {
        String nodeId = getCurrentNodeId();
        String segmentKey = "stock:segment:" + productId + ":" + nodeId;
        
        // ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§
        String luaScript = 
            "local currentStock = redis.call('get', KEYS[1]) " +
            "if currentStock and tonumber(currentStock) >= tonumber(ARGV[1]) then " +
            "   redis.call('decrby', KEYS[1], ARGV[1]) " +
            "   return 1 " +
            "else " +
            "   return 0 " +
            "end";
            
        Long result = redisTemplate.execute(luaScript, 
                                          Arrays.asList(segmentKey), 
                                          quantity.toString());
        return result == 1;
    }
}
```

### 3.4 åº“å­˜ç¼“å­˜ä¸€è‡´æ€§ä¿éšœ


**âš ï¸ é‡è¦æé†’**ï¼šåº“å­˜æ•°æ®ä¸ä¸€è‡´ä¼šå¯¼è‡´è¶…å–æˆ–å°‘å–

**ä¸€è‡´æ€§ä¿éšœç­–ç•¥ï¼š**

```
åº“å­˜ä¸€è‡´æ€§ä¿éšœæµç¨‹ï¼š

æ­¥éª¤1: ç¼“å­˜æ‰£å‡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redisåº“å­˜   â”‚ â†’ æ‰£å‡æˆåŠŸ â†’ ç»§ç»­ä¸‹å•æµç¨‹
â”‚ stock:12345 â”‚ â†’ æ‰£å‡å¤±è´¥ â†’ ç›´æ¥è¿”å›æ— åº“å­˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤2: è®¢å•å¤„ç†  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¢å•ç³»ç»Ÿ    â”‚ â†’ ç”Ÿæˆè®¢å•
â”‚ é”å®šåº“å­˜    â”‚ â†’ å¼‚æ­¥åŒæ­¥åˆ°æ•°æ®åº“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤3: å¼‚å¸¸æ¢å¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®šæ—¶ä»»åŠ¡    â”‚ â†’ å¯¹æ¯”ç¼“å­˜å’Œæ•°æ®åº“
â”‚ æ•°æ®æ ¡éªŒ    â”‚ â†’ å‘ç°ä¸ä¸€è‡´æ—¶ä¿®å¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ğŸ‘¤ ç”¨æˆ·ä¼šè¯ä¸è´­ç‰©è½¦ç¼“å­˜


### 4.1 ç”¨æˆ·ä¼šè¯ç¼“å­˜è®¾è®¡


**ğŸŸ¢ åŸºç¡€æ¦‚å¿µ**

ç”¨æˆ·ä¼šè¯å°±åƒä½ åœ¨å•†åº—é‡Œçš„è´­ç‰©ç¯®ï¼Œè®°å½•äº†ä½ çš„è´­ç‰©çŠ¶æ€ï¼š

```
ç”¨æˆ·ä¼šè¯ä¿¡æ¯åŒ…å«ï¼š
â”Œâ”€ ç”¨æˆ·èº«ä»½ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ ç”¨æˆ·ID           â”‚
â”‚ â€¢ ç™»å½•çŠ¶æ€         â”‚  
â”‚ â€¢ ç™»å½•æ—¶é—´         â”‚
â”œâ”€ æƒé™ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ â€¢ ç”¨æˆ·ç­‰çº§         â”‚
â”‚ â€¢ ä¼˜æƒ åˆ¸åˆ—è¡¨       â”‚
â”‚ â€¢ ä¼šå‘˜æƒé™         â”‚
â”œâ”€ è¡Œä¸ºä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ æµè§ˆå†å²         â”‚
â”‚ â€¢ æœç´¢å†å²         â”‚
â”‚ â€¢ æœ€åæ´»è·ƒæ—¶é—´     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼šè¯ç¼“å­˜Keyè®¾è®¡ï¼š**

```
session:{userId}              - ç”¨æˆ·åŸºæœ¬ä¼šè¯ä¿¡æ¯
session:permissions:{userId}  - ç”¨æˆ·æƒé™ä¿¡æ¯  
session:activity:{userId}     - ç”¨æˆ·è¡Œä¸ºä¿¡æ¯

å®é™…ä¾‹å­ï¼š
session:888888               - ç”¨æˆ·888888çš„ä¼šè¯
session:permissions:888888   - ç”¨æˆ·888888çš„æƒé™
session:activity:888888      - ç”¨æˆ·888888çš„è¡Œä¸º
```

### 4.2 è´­ç‰©è½¦ç¼“å­˜æ¶æ„


**ğŸ›ï¸ è´­ç‰©è½¦çš„ç‰¹ç‚¹åˆ†æ**

è´­ç‰©è½¦æ˜¯ç”¨æˆ·ä¸´æ—¶å­˜æ”¾å•†å“çš„åœ°æ–¹ï¼Œæœ‰è¿™äº›ç‰¹ç‚¹ï¼š
- **ä¸ªäººä¸“å±**ï¼šæ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„è´­ç‰©è½¦
- **ä¸´æ—¶æ€§å¼º**ï¼šç”¨æˆ·å¯èƒ½éšæ—¶æ·»åŠ åˆ é™¤å•†å“
- **å®æ—¶æ›´æ–°**ï¼šå•†å“ä»·æ ¼ã€åº“å­˜å˜åŒ–è¦åŠæ—¶åæ˜ 

```java
// è´­ç‰©è½¦æ•°æ®ç»“æ„è®¾è®¡
public class ShoppingCart {
    private Long userId;                    // ç”¨æˆ·ID
    private List<CartItem> items;          // è´­ç‰©è½¦å•†å“åˆ—è¡¨
    private Date lastUpdateTime;           // æœ€åæ›´æ–°æ—¶é—´
    private BigDecimal totalPrice;         // æ€»ä»·æ ¼
    
    public static class CartItem {
        private Long productId;            // å•†å“ID
        private Integer quantity;          // å•†å“æ•°é‡
        private BigDecimal price;          // å•†å“å•ä»·
        private Date addTime;              // åŠ å…¥æ—¶é—´
        private Boolean selected;          // æ˜¯å¦é€‰ä¸­
    }
}
```

### 4.3 è´­ç‰©è½¦æ“ä½œä¼˜åŒ–


**âš¡ é«˜æ€§èƒ½è´­ç‰©è½¦æ“ä½œ**

```java
@Service
public class ShoppingCartService {
    
    // æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ - ä½¿ç”¨Hashç»“æ„å­˜å‚¨
    public void addToCart(Long userId, Long productId, Integer quantity) {
        String cartKey = "cart:" + userId;
        
        // æ„å»ºå•†å“ä¿¡æ¯
        CartItem item = new CartItem();
        item.setProductId(productId);
        item.setQuantity(quantity);
        item.setAddTime(new Date());
        
        // å­˜å‚¨åˆ°Redis Hash
        redisTemplate.opsForHash().put(cartKey, 
                                      productId.toString(), 
                                      JSON.toJSONString(item));
        
        // è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ7å¤©ï¼‰
        redisTemplate.expire(cartKey, 7, TimeUnit.DAYS);
    }
    
    // è·å–è´­ç‰©è½¦åˆ—è¡¨
    public ShoppingCart getCart(Long userId) {
        String cartKey = "cart:" + userId;
        
        // è·å–è´­ç‰©è½¦æ‰€æœ‰å•†å“
        Map<Object, Object> cartItems = redisTemplate.opsForHash().entries(cartKey);
        
        ShoppingCart cart = new ShoppingCart();
        cart.setUserId(userId);
        
        List<CartItem> items = new ArrayList<>();
        for (Map.Entry<Object, Object> entry : cartItems.entrySet()) {
            CartItem item = JSON.parseObject((String) entry.getValue(), CartItem.class);
            // å®æ—¶è·å–å•†å“æœ€æ–°ä»·æ ¼
            BigDecimal latestPrice = getLatestPrice(item.getProductId());
            item.setPrice(latestPrice);
            items.add(item);
        }
        
        cart.setItems(items);
        return cart;
    }
}
```

### 4.4 è´­ç‰©è½¦åŒæ­¥ç­–ç•¥


**ğŸ”„ å¤šç«¯æ•°æ®åŒæ­¥**

ç”¨æˆ·å¯èƒ½åœ¨æ‰‹æœºã€ç”µè„‘ã€iPadä¸Šéƒ½ä¼šæ“ä½œè´­ç‰©è½¦ï¼Œå¦‚ä½•ä¿è¯æ•°æ®åŒæ­¥ï¼Ÿ

```
è´­ç‰©è½¦åŒæ­¥æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ‰‹æœºApp   â”‚    â”‚   PCç½‘ç«™    â”‚    â”‚   iPad App  â”‚
â”‚   è´­ç‰©è½¦    â”‚    â”‚   è´­ç‰©è½¦    â”‚    â”‚   è´­ç‰©è½¦    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                  â†“                  â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  Redisè´­ç‰©è½¦    â”‚ â† ç»Ÿä¸€çš„æ•°æ®æº
               â”‚  cart:userId    â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   æ•°æ®åº“å¤‡ä»½    â”‚ â† å®šæœŸå¤‡ä»½
               â”‚ user_cartè¡¨     â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŒæ­¥æœºåˆ¶å®ç°ï¼š**
- **å®æ—¶åŒæ­¥**ï¼šç”¨æˆ·æ“ä½œåç«‹å³æ›´æ–°Redis
- **æ¨é€é€šçŸ¥**ï¼šé€šè¿‡WebSocketé€šçŸ¥å…¶ä»–ç«¯æ›´æ–°
- **å®šæœŸå¤‡ä»½**ï¼šæ¯å°æ—¶å°†è´­ç‰©è½¦æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“
- **å†²çªè§£å†³**ï¼šä»¥æœ€åä¿®æ”¹æ—¶é—´ä¸ºå‡†

---

## 5. âš¡ ç§’æ€åœºæ™¯ç¼“å­˜å¤„ç†


### 5.1 ç§’æ€åœºæ™¯çš„ç‰¹æ®ŠæŒ‘æˆ˜


**ğŸ”¥ å¿…é¡»æŒæ¡ - ç§’æ€æ˜¯ç”µå•†ç³»ç»Ÿçš„ç»ˆæè€ƒéªŒ**

ç§’æ€æ´»åŠ¨å°±åƒæ¼”å”±ä¼šæŠ¢ç¥¨ï¼Œç‰¹ç‚¹éå¸¸æ˜æ˜¾ï¼š
- **ç¬é—´é«˜å¹¶å‘**ï¼šå‡ ä¸‡äººåŒæ—¶æŠ¢100ä»¶å•†å“
- **æ—¶é—´é›†ä¸­**ï¼šé€šå¸¸åœ¨æ•´ç‚¹å¼€å§‹ï¼Œæµé‡é™¡å¢
- **åº“å­˜ç¨€ç¼º**ï¼šå•†å“å°‘ï¼Œç«äº‰æ¿€çƒˆ
- **ç”¨æˆ·ä½“éªŒè¦æ±‚é«˜**ï¼šä¸èƒ½å¡é¡¿ï¼Œä¸èƒ½å‡ºé”™

```
ç§’æ€åœºæ™¯çš„æ•°æ®æµï¼š

æ­£å¸¸å•†å“ï¼š  100äºº/ç§’ è®¿é—®    â†’ ç¼“å­˜è½»æ¾åº”å¯¹
ç§’æ€å•†å“ï¼š  10000äºº/ç§’ è®¿é—®  â†’ ç¼“å­˜å‹åŠ›å·¨å¤§ï¼

æ—¶é—´åˆ†å¸ƒï¼š
â”Œâ”€ ç§’æ€å¼€å§‹å‰ â”€â”â”Œâ”€ ç§’æ€è¿›è¡Œä¸­ â”€â”â”Œâ”€ ç§’æ€ç»“æŸå â”€â”
â”‚   é¢„çƒ­é˜¶æ®µ    â”‚â”‚   ç–¯ç‹‚æŠ¢è´­    â”‚â”‚   æµé‡å›è½    â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘   â”‚â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚â”‚  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚     5%       â”‚â”‚     90%      â”‚â”‚     5%       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“               â†“               â†“
   ç³»ç»Ÿé¢„çƒ­        æ‰¿å—å³°å€¼        å¿«é€Ÿæ¢å¤
```

### 5.2 ç§’æ€ç¼“å­˜æ¶æ„è®¾è®¡


**ğŸ—ï¸ ä¸“é—¨ä¸ºç§’æ€è®¾è®¡çš„ç¼“å­˜æ¶æ„**

```
ç§’æ€ç³»ç»Ÿç¼“å­˜æ¶æ„ï¼š

â”Œâ”€ CDNå±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ ç§’æ€é¡µé¢é™æ€åŒ–               â”‚ â† å‡å°‘åŠ¨æ€è¯·æ±‚
â”‚ â€¢ å•†å“å›¾ç‰‡ã€CSSã€JSç¼“å­˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€ ç½‘å…³å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚ â€¢ é™æµ: æ¯ç§’åªå…è®¸1ä¸‡è¯·æ±‚       â”‚ â† ä¿æŠ¤åç«¯
â”‚ â€¢ é»‘åå•: æ‹¦æˆªåˆ·å•ç”¨æˆ·          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€ åº”ç”¨å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ æœ¬åœ°ç¼“å­˜: å•†å“åŸºæœ¬ä¿¡æ¯        â”‚ â† å‡å°‘Rediså‹åŠ›  
â”‚ â€¢ é¢„æ‰£åº“å­˜: æå‰åˆ†é…åº“å­˜æ®µ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€ ç¼“å­˜å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Redisä¸»ä»: è¯»å†™åˆ†ç¦»           â”‚ â† æé«˜å¹¶å‘èƒ½åŠ›
â”‚ â€¢ å¸ƒéš†è¿‡æ»¤å™¨: è¿‡æ»¤æ— æ•ˆç”¨æˆ·      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ç§’æ€åº“å­˜æ‰£å‡æ–¹æ¡ˆ


**â­â­â­ é«˜çº§éš¾åº¦ - æ ¸å¿ƒç®—æ³•**

```java
@Service
public class SeckillStockService {
    
    // ç§’æ€é¢„æ‰£åº“å­˜ - ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§
    public boolean preDeductStock(String seckillId, Long userId, Integer quantity) {
        
        // Luaè„šæœ¬å®ç°åŸå­æ“ä½œ
        String luaScript = 
            "-- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»å‚ä¸è¿‡ç§’æ€\n" +
            "local userKey = 'seckill:user:' .. ARGV[1] .. ':' .. KEYS[1]\n" +
            "local hasParticipated = redis.call('get', userKey)\n" +
            "if hasParticipated then\n" +
            "    return {0, 'already_participated'}\n" +
            "end\n" +
            "\n" +
            "-- æ£€æŸ¥åº“å­˜æ˜¯å¦å……è¶³\n" +
            "local stockKey = 'seckill:stock:' .. KEYS[1]\n" +
            "local currentStock = redis.call('get', stockKey)\n" +
            "if not currentStock or tonumber(currentStock) < tonumber(ARGV[2]) then\n" +
            "    return {0, 'insufficient_stock'}\n" +
            "end\n" +
            "\n" +
            "-- æ‰£å‡åº“å­˜å¹¶è®°å½•ç”¨æˆ·å‚ä¸\n" +
            "redis.call('decrby', stockKey, ARGV[2])\n" +
            "redis.call('setex', userKey, 3600, '1')  -- 1å°æ—¶è¿‡æœŸ\n" +
            "return {1, 'success'}";
        
        // æ‰§è¡ŒLuaè„šæœ¬
        List<Object> result = redisTemplate.execute(
            new DefaultRedisScript<>(luaScript, List.class),
            Arrays.asList(seckillId),
            userId.toString(),
            quantity.toString()
        );
        
        return "1".equals(result.get(0).toString());
    }
    
    // ç§’æ€å¼€å§‹å‰é¢„çƒ­åº“å­˜
    public void warmupSeckillStock(String seckillId, Integer totalStock) {
        String stockKey = "seckill:stock:" + seckillId;
        
        // è®¾ç½®åˆå§‹åº“å­˜
        redisTemplate.set(stockKey, totalStock);
        
        // è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ´»åŠ¨ç»“æŸå1å°æ—¶ï¼‰
        redisTemplate.expire(stockKey, 4, TimeUnit.HOURS);
        
        System.out.println("ç§’æ€åº“å­˜é¢„çƒ­å®Œæˆ: " + seckillId + ", æ€»åº“å­˜: " + totalStock);
    }
}
```

### 5.4 ç§’æ€ç¼“å­˜é¢„çƒ­ä¸é™çº§


**ğŸš¨ ç³»ç»Ÿä¿æŠ¤æœºåˆ¶**

> âš ï¸ **é‡è¦æé†’**ï¼šç§’æ€ç³»ç»Ÿå¿…é¡»æœ‰å®Œå–„çš„ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢ç³»ç»Ÿå´©æºƒ

**é¢„çƒ­ç­–ç•¥ï¼š**

```java
@Component
public class SeckillWarmupService {
    
    @Scheduled(cron = "0 55 * * * ?") // æ¯å°æ—¶55åˆ†æ‰§è¡Œ
    public void warmupSeckillData() {
        // è·å–å³å°†å¼€å§‹çš„ç§’æ€æ´»åŠ¨
        List<SeckillActivity> upcomingActivities = getUpcomingActivities();
        
        for (SeckillActivity activity : upcomingActivities) {
            // é¢„çƒ­å•†å“åŸºæœ¬ä¿¡æ¯
            warmupProductInfo(activity.getProductId());
            
            // é¢„çƒ­åº“å­˜ä¿¡æ¯
            warmupSeckillStock(activity.getId(), activity.getStock());
            
            // é¢„çƒ­é™æµé…ç½®
            warmupRateLimiter(activity.getId(), activity.getMaxQps());
        }
    }
}
```

**é™çº§ç­–ç•¥ï¼š**

```
ç§’æ€ç³»ç»Ÿé™çº§æ–¹æ¡ˆï¼š

Level 1 - æ­£å¸¸æœåŠ¡:
âœ… å®Œæ•´åŠŸèƒ½ï¼Œå®æ—¶åº“å­˜æŸ¥è¯¢

Level 2 - è½»åº¦é™çº§:  
âš ï¸  å…³é—­å®æ—¶æ¨èï¼Œå‡å°‘éæ ¸å¿ƒåŠŸèƒ½

Level 3 - ä¸­åº¦é™çº§:
ğŸŸ¡ åªä¿ç•™æ ¸å¿ƒè´­ä¹°åŠŸèƒ½ï¼Œå…³é—­è¯„è®ºã€æ”¶è—

Level 4 - é‡åº¦é™çº§:
ğŸ”´ è¿”å›æ’é˜Ÿé¡µé¢ï¼Œç”¨æˆ·æ’é˜Ÿç­‰å€™

Level 5 - ç†”æ–­ä¿æŠ¤:
ğŸš¨ ç›´æ¥è¿”å›"æ´»åŠ¨ç«çˆ†ï¼Œè¯·ç¨åå†è¯•"
```

---

## 6. ğŸ” æœç´¢ä¸æ¨èç¼“å­˜


### 6.1 æœç´¢ç»“æœç¼“å­˜è®¾è®¡


**ğŸŸ¢ åŸºç¡€æ¦‚å¿µ**

ç”¨æˆ·æœç´¢"iPhone"æ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ¯æ¬¡éƒ½å»æ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œæ˜¯æŠŠå¸¸è§çš„æœç´¢ç»“æœç¼“å­˜èµ·æ¥ï¼š

```java
// æœç´¢ç¼“å­˜çš„æ•°æ®ç»“æ„
public class SearchCacheResult {
    private String keyword;           // æœç´¢å…³é”®è¯
    private List<ProductInfo> products; // å•†å“åˆ—è¡¨
    private Integer totalCount;       // æ€»æ•°é‡
    private Date cacheTime;          // ç¼“å­˜æ—¶é—´
    private String sortType;         // æ’åºæ–¹å¼
    private Map<String, Object> filters; // ç­›é€‰æ¡ä»¶
}
```

**æœç´¢ç¼“å­˜Keyè®¾è®¡ï¼š**

```
æœç´¢ç¼“å­˜Keyè§„åˆ™ï¼š
search:{keyword}:{sortType}:{filters}

å®é™…ä¾‹å­ï¼š
search:iPhone:price_asc:brand_Apple     - iPhoneæŒ‰ä»·æ ¼å‡åºï¼Œè‹¹æœå“ç‰Œ
search:æ‰‹æœº:sales_desc:price_1000-3000  - æ‰‹æœºæŒ‰é”€é‡é™åºï¼Œä»·æ ¼1000-3000
search:ç¬”è®°æœ¬:default:                   - ç¬”è®°æœ¬é»˜è®¤æ’åºï¼Œæ— ç­›é€‰
```

### 6.2 ä¸ªæ€§åŒ–æ¨èç¼“å­˜


**ğŸ¯ åƒäººåƒé¢çš„æ¨èç³»ç»Ÿ**

æ¯ä¸ªç”¨æˆ·çœ‹åˆ°çš„æ¨èå•†å“éƒ½ä¸åŒï¼Œè¿™å«ä¸ªæ€§åŒ–æ¨èï¼š

```
æ¨èç³»ç»Ÿçš„å·¥ä½œæµç¨‹ï¼š

ç”¨æˆ·è¡Œä¸ºæ•°æ® â†’ æ¨èç®—æ³• â†’ ä¸ªæ€§åŒ–ç»“æœ â†’ ç¼“å­˜å­˜å‚¨
     â†“             â†“           â†“           â†“
  æµè§ˆå†å²        ååŒè¿‡æ»¤     å•†å“åˆ—è¡¨     Redisç¼“å­˜
  è´­ä¹°å†å²        å†…å®¹æ¨è     ç›¸ä¼¼ç”¨æˆ·     æœ¬åœ°ç¼“å­˜  
  æœç´¢å†å²        çƒ­åº¦ç®—æ³•     çƒ­é—¨å•†å“     CDNç¼“å­˜
```

**æ¨èç¼“å­˜åˆ†å±‚ç­–ç•¥ï¼š**

| æ¨èç±»å‹ | **ç¼“å­˜æ—¶é—´** | **æ›´æ–°é¢‘ç‡** | **ä¸ªæ€§åŒ–ç¨‹åº¦** |
|---------|------------|-------------|---------------|
| **çƒ­é—¨å•†å“** | `24å°æ—¶` | `æ¯å°æ—¶æ›´æ–°` | `æ— ä¸ªæ€§åŒ–` |
| **åˆ†ç±»æ¨è** | `6å°æ—¶` | `æ¯2å°æ—¶æ›´æ–°` | `ä½ä¸ªæ€§åŒ–` |
| **ååŒæ¨è** | `1å°æ—¶` | `å®æ—¶æ›´æ–°` | `é«˜ä¸ªæ€§åŒ–` |
| **å®æ—¶æ¨è** | `10åˆ†é’Ÿ` | `ç”¨æˆ·è¡Œä¸ºè§¦å‘` | `æœ€é«˜ä¸ªæ€§åŒ–` |

### 6.3 æœç´¢çƒ­è¯ç¼“å­˜


**ğŸ“Š çƒ­æœæ¦œçš„å®ç°**

```java
@Service
public class HotSearchService {
    
    // è®°å½•æœç´¢è¯é¢‘
    public void recordSearch(String keyword) {
        String hotSearchKey = "hot_search:" + getTodayDate();
        
        // ä½¿ç”¨ZSetç»“æ„ï¼Œåˆ†æ•°è¡¨ç¤ºæœç´¢æ¬¡æ•°
        redisTemplate.opsForZSet().incrementScore(hotSearchKey, keyword, 1);
        
        // è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ7å¤©ï¼‰
        redisTemplate.expire(hotSearchKey, 7, TimeUnit.DAYS);
    }
    
    // è·å–çƒ­æœæ¦œ
    public List<String> getHotSearchList(int topN) {
        String hotSearchKey = "hot_search:" + getTodayDate();
        
        // è·å–åˆ†æ•°æœ€é«˜çš„å‰Nä¸ªæœç´¢è¯
        Set<String> hotWords = redisTemplate.opsForZSet()
            .reverseRange(hotSearchKey, 0, topN - 1);
            
        return new ArrayList<>(hotWords);
    }
    
    // æœç´¢å»ºè®®ï¼ˆè‡ªåŠ¨è¡¥å…¨ï¼‰
    public List<String> getSearchSuggestions(String prefix) {
        String suggestionKey = "search_suggestion";
        
        // ä½¿ç”¨Trieæ ‘å­˜å‚¨åœ¨Redisä¸­ï¼Œå®ç°å‰ç¼€åŒ¹é…
        return redisTemplate.opsForZSet()
            .rangeByLex(suggestionKey, 
                       Range.range().gte(prefix).lt(prefix + "z"),
                       Limit.limit().count(10));
    }
}
```

### 6.4 æœç´¢ç¼“å­˜ä¼˜åŒ–


**âš¡ æœç´¢æ€§èƒ½ä¼˜åŒ–æŠ€å·§**

```
æœç´¢ç¼“å­˜ä¼˜åŒ–ç­–ç•¥ï¼š

1. é¢„çƒ­çƒ­é—¨æœç´¢è¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡Œæ™¨2ç‚¹å®šæ—¶ä»»åŠ¡  â”‚ â†’ é¢„çƒ­ä»Šæ—¥å¯èƒ½çš„çƒ­æœè¯
â”‚ åŸºäºå†å²æ•°æ®é¢„æµ‹ â”‚ â†’ èŠ‚å‡æ—¥ã€ä¿ƒé”€æ—¥ç‰¹æ®Šå¤„ç†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. å¤šçº§ç¼“å­˜æ¶æ„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬åœ°ç¼“å­˜      â”‚ â†’  â”‚  Redisåˆ†å¸ƒå¼    â”‚
â”‚   (æœ€çƒ­æœç´¢è¯)   â”‚    â”‚   (å…¨éƒ¨ç¼“å­˜)    â”‚
â”‚   å“åº”æ—¶é—´: 1ms â”‚    â”‚  å“åº”æ—¶é—´: 5ms  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ç¼“å­˜ç©¿é€ä¿æŠ¤  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¸ƒéš†è¿‡æ»¤å™¨    â”‚ â†’ è¿‡æ»¤ä¸å­˜åœ¨çš„æœç´¢è¯
â”‚   é˜²æ­¢æ¶æ„æœç´¢  â”‚ â†’ å‡å°‘æ— æ•ˆæŸ¥è¯¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ğŸ—ï¸ å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡


### 7.1 å¤šçº§ç¼“å­˜çš„å¿…è¦æ€§


**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦å¤šçº§ç¼“å­˜ï¼Ÿ**

å°±åƒå¿«é€’ç³»ç»Ÿä¸€æ ·ï¼Œæœ‰çœçº§ä»“åº“ã€å¸‚çº§ä»“åº“ã€åŒºçº§ä»“åº“ï¼š

```
å•çº§ç¼“å­˜çš„é—®é¢˜ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ Redis â†’ æ•°æ®åº“
é—®é¢˜ï¼šRediså‹åŠ›å¤§ï¼Œç½‘ç»œå»¶è¿Ÿï¼Œå•ç‚¹æ•…éšœ

å¤šçº§ç¼“å­˜çš„ä¼˜åŠ¿ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ æœ¬åœ°ç¼“å­˜ â†’ Redis â†’ æ•°æ®åº“
å¥½å¤„ï¼šå°±è¿‘è·å–ï¼Œå‹åŠ›åˆ†æ•£ï¼Œå®¹é”™æ€§å¼º
```

### 7.2 ç¼“å­˜å±‚æ¬¡æ¶æ„


**ğŸ¢ å››å±‚ç¼“å­˜æ¶æ„**

```
ç”µå•†å¤šçº§ç¼“å­˜æ¶æ„å›¾ï¼š

â”Œâ”€ L1: æµè§ˆå™¨ç¼“å­˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ é™æ€èµ„æºï¼šCSSã€JSã€å›¾ç‰‡        â”‚  å“åº”æ—¶é—´: 0ms
â”‚ â€¢ é¡µé¢ç¼“å­˜ï¼šå•†å“è¯¦æƒ…é¡µé¢        â”‚  å‘½ä¸­ç‡: 20%
â”‚ â€¢ è¿‡æœŸæ—¶é—´ï¼š1å¤©                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ Miss
â”Œâ”€ L2: CDNè¾¹ç¼˜ç¼“å­˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
â”‚ â€¢ é™æ€å†…å®¹ï¼šå•†å“å›¾ç‰‡ã€è§†é¢‘      â”‚  å“åº”æ—¶é—´: 10ms
â”‚ â€¢ å‡†é™æ€å†…å®¹ï¼šå•†å“è¯¦æƒ…é¡µ       â”‚  å‘½ä¸­ç‡: 60%  
â”‚ â€¢ åœ°ç†åˆ†å¸ƒï¼šå…¨çƒèŠ‚ç‚¹           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ Miss
â”Œâ”€ L3: åº”ç”¨æœ¬åœ°ç¼“å­˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ çƒ­ç‚¹æ•°æ®ï¼šå•†å“åŸºæœ¬ä¿¡æ¯        â”‚  å“åº”æ—¶é—´: 1ms
â”‚ â€¢ é…ç½®ä¿¡æ¯ï¼šç³»ç»Ÿé…ç½®å‚æ•°        â”‚  å‘½ä¸­ç‡: 15%
â”‚ â€¢ å†…å­˜é™åˆ¶ï¼šæ¯ä¸ªèŠ‚ç‚¹100MB       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ Miss  
â”Œâ”€ L4: Redisåˆ†å¸ƒå¼ç¼“å­˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ å…¨é‡æ•°æ®ï¼šå•†å“ã€ç”¨æˆ·ã€è®¢å•    â”‚  å“åº”æ—¶é—´: 5ms
â”‚ â€¢ é›†ç¾¤éƒ¨ç½²ï¼šä¸»ä»+å“¨å…µ          â”‚  å‘½ä¸­ç‡: 95%
â”‚ â€¢ æŒä¹…åŒ–ï¼šAOF+RDB              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ Miss
â”Œâ”€ L5: æ•°æ®åº“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ æƒå¨æ•°æ®æºï¼šMySQLé›†ç¾¤        â”‚  å“åº”æ—¶é—´: 50ms
â”‚ â€¢ è¯»å†™åˆ†ç¦»ï¼šä¸»åº“å†™ï¼Œä»åº“è¯»      â”‚  å‘½ä¸­ç‡: 5%
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 ç¼“å­˜ä¸€è‡´æ€§æ–¹æ¡ˆ


**ğŸ”„ å¤šçº§ç¼“å­˜çš„æ•°æ®ä¸€è‡´æ€§**

å¤šçº§ç¼“å­˜æœ€å¤§çš„æŒ‘æˆ˜å°±æ˜¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ•°æ®åœ¨å¤šä¸ªåœ°æ–¹å­˜å‚¨ï¼Œå¦‚ä½•ä¿è¯ä¸€è‡´ï¼Ÿ

```java
@Service
public class MultiLevelCacheService {
    
    // æ›´æ–°å•†å“ä¿¡æ¯æ—¶ï¼Œéœ€è¦æ¸…é™¤æ‰€æœ‰çº§åˆ«çš„ç¼“å­˜
    public void updateProductInfo(ProductInfo product) {
        // 1. æ›´æ–°æ•°æ®åº“
        productRepository.update(product);
        
        // 2. æ¸…é™¤Redisç¼“å­˜
        String redisKey = "product:detail:" + product.getId();
        redisTemplate.delete(redisKey);
        
        // 3. æ¸…é™¤æœ¬åœ°ç¼“å­˜
        localCache.invalidate("product:" + product.getId());
        
        // 4. é€šçŸ¥å…¶ä»–èŠ‚ç‚¹æ¸…é™¤æœ¬åœ°ç¼“å­˜
        notifyOtherNodes(product.getId());
        
        // 5. è¯·æ±‚CDNåˆ·æ–°ï¼ˆå¼‚æ­¥ï¼‰
        cdnService.refreshAsync("/product/" + product.getId());
    }
    
    // è·å–å•†å“ä¿¡æ¯ï¼ˆå¤šçº§æŸ¥æ‰¾ï¼‰
    public ProductInfo getProductInfo(Long productId) {
        // L1: æœ¬åœ°ç¼“å­˜æŸ¥æ‰¾
        ProductInfo product = localCache.get("product:" + productId);
        if (product != null) {
            return product;
        }
        
        // L2: Redisç¼“å­˜æŸ¥æ‰¾
        String redisKey = "product:detail:" + productId;
        product = redisTemplate.opsForValue().get(redisKey);
        if (product != null) {
            // å›å¡«æœ¬åœ°ç¼“å­˜
            localCache.put("product:" + productId, product);
            return product;
        }
        
        // L3: æ•°æ®åº“æŸ¥æ‰¾
        product = productRepository.findById(productId);
        if (product != null) {
            // å›å¡«Redisç¼“å­˜
            redisTemplate.setex(redisKey, 3600, product);
            // å›å¡«æœ¬åœ°ç¼“å­˜
            localCache.put("product:" + productId, product);
        }
        
        return product;
    }
}
```

### 7.4 ç¼“å­˜é€‰æ‹©ç­–ç•¥


**ğŸ¯ ä¸åŒæ•°æ®é€‰æ‹©ä¸åŒç¼“å­˜çº§åˆ«**

| æ•°æ®ç±»å‹ | **å˜åŒ–é¢‘ç‡** | **è®¿é—®é¢‘ç‡** | **æ¨èç¼“å­˜** | **ç¼“å­˜æ—¶é—´** |
|---------|-------------|-------------|-------------|-------------|
| **å•†å“åŸºæœ¬ä¿¡æ¯** | `å¾ˆå°‘` | `æé«˜` | `æ‰€æœ‰çº§åˆ«` | `24å°æ—¶` |
| **å•†å“ä»·æ ¼** | `ä¸­ç­‰` | `é«˜` | `Redis+æœ¬åœ°` | `1å°æ—¶` |
| **åº“å­˜ä¿¡æ¯** | `é¢‘ç¹` | `é«˜` | `ä»…Redis` | `30ç§’` |
| **ç”¨æˆ·ä¸ªäººä¿¡æ¯** | `å°‘` | `ä¸­ç­‰` | `Redis+æœ¬åœ°` | `2å°æ—¶` |
| **æœç´¢ç»“æœ** | `ä¸­ç­‰` | `ä¸­ç­‰` | `Redis` | `30åˆ†é’Ÿ` |
| **é…ç½®ä¿¡æ¯** | `æå°‘` | `ä½` | `æœ¬åœ°ç¼“å­˜` | `æ°¸ä¹…` |

---

## 8. ğŸ”„ ç¼“å­˜æ›´æ–°ä¸ä¸€è‡´æ€§


### 8.1 ç¼“å­˜æ›´æ–°æ¨¡å¼


**ğŸ’¡ å››ç§ç»å…¸æ›´æ–°æ¨¡å¼**

```
1. Cache-Aside (æ—è·¯ç¼“å­˜)
åº”ç”¨ç¨‹åº â†’ æŸ¥è¯¢ç¼“å­˜ â†’ Miss â†’ æŸ¥è¯¢æ•°æ®åº“ â†’ æ›´æ–°ç¼“å­˜
        â†’ æ›´æ–°æ•°æ® â†’ åˆ é™¤ç¼“å­˜

2. Write-Through (å†™é€ç¼“å­˜)  
åº”ç”¨ç¨‹åº â†’ æ›´æ–°ç¼“å­˜ â†’ ç¼“å­˜æ›´æ–°æ•°æ®åº“
ä¼˜ç‚¹ï¼šæ•°æ®ä¸€è‡´æ€§å¼º
ç¼ºç‚¹ï¼šå†™å…¥æ€§èƒ½å·®

3. Write-Behind (å†™å›ç¼“å­˜)
åº”ç”¨ç¨‹åº â†’ æ›´æ–°ç¼“å­˜ â†’ å¼‚æ­¥æ›´æ–°æ•°æ®åº“  
ä¼˜ç‚¹ï¼šå†™å…¥æ€§èƒ½å¥½
ç¼ºç‚¹ï¼šå¯èƒ½æ•°æ®ä¸¢å¤±

4. Refresh-Ahead (åˆ·æ–°ç¼“å­˜)
å®šæ—¶ä»»åŠ¡ â†’ é¢„æµ‹å³å°†è¿‡æœŸçš„æ•°æ® â†’ æå‰åˆ·æ–°
ä¼˜ç‚¹ï¼šç”¨æˆ·æ— æ„ŸçŸ¥
ç¼ºç‚¹ï¼šå®ç°å¤æ‚
```

### 8.2 æ•°æ®ä¸€è‡´æ€§ç­‰çº§


**â­â­ è¿›é˜¶æ¦‚å¿µ**

æ ¹æ®ä¸šåŠ¡å¯¹ä¸€è‡´æ€§çš„è¦æ±‚ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„ä¸€è‡´æ€§ç­‰çº§ï¼š

| ä¸€è‡´æ€§ç­‰çº§ | **æè¿°** | **é€‚ç”¨åœºæ™¯** | **å®ç°æˆæœ¬** |
|-----------|---------|-------------|-------------|
| **å¼ºä¸€è‡´æ€§** | `ç¼“å­˜å’Œæ•°æ®åº“å®Œå…¨åŒæ­¥` | `é‡‘é¢ã€åº“å­˜` | `é«˜` |
| **å¼±ä¸€è‡´æ€§** | `å…è®¸çŸ­æ—¶é—´ä¸ä¸€è‡´` | `å•†å“è¯¦æƒ…` | `ä¸­` |
| **æœ€ç»ˆä¸€è‡´æ€§** | `æœ€ç»ˆä¼šè¾¾åˆ°ä¸€è‡´` | `æµè§ˆè®°å½•` | `ä½` |

### 8.3 ä¸€è‡´æ€§å®ç°æ–¹æ¡ˆ


**ğŸ› ï¸ å®é™…å®ç°ä»£ç **

```java
@Service
public class CacheConsistencyService {
    
    // å¼ºä¸€è‡´æ€§æ–¹æ¡ˆï¼šåˆ†å¸ƒå¼é” + åŒåˆ 
    public void updateProductPriceStrong(Long productId, BigDecimal newPrice) {
        String lockKey = "lock:product:" + productId;
        String cacheKey = "product:price:" + productId;
        
        // è·å–åˆ†å¸ƒå¼é”
        boolean locked = redisTemplate.opsForValue()
            .setIfAbsent(lockKey, "1", Duration.ofSeconds(10));
            
        if (!locked) {
            throw new RuntimeException("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
        }
        
        try {
            // ç¬¬ä¸€æ¬¡åˆ é™¤ç¼“å­˜
            redisTemplate.delete(cacheKey);
            
            // æ›´æ–°æ•°æ®åº“
            productRepository.updatePrice(productId, newPrice);
            
            // å»¶è¿Ÿåå†æ¬¡åˆ é™¤ç¼“å­˜ï¼ˆé˜²æ­¢è„æ•°æ®ï¼‰
            Thread.sleep(200);
            redisTemplate.delete(cacheKey);
            
        } finally {
            // é‡Šæ”¾é”
            redisTemplate.delete(lockKey);
        }
    }
    
    // æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼šæ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†
    public void updateProductPriceEventual(Long productId, BigDecimal newPrice) {
        // æ›´æ–°æ•°æ®åº“
        productRepository.updatePrice(productId, newPrice);
        
        // å‘é€ç¼“å­˜æ›´æ–°æ¶ˆæ¯
        CacheUpdateEvent event = new CacheUpdateEvent();
        event.setCacheKey("product:price:" + productId);
        event.setAction("DELETE");
        
        messageProducer.send("cache-update-topic", event);
    }
    
    // æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šå¼‚æ­¥æ›´æ–°ç¼“å­˜
    @RabbitListener(queues = "cache-update-queue")
    public void handleCacheUpdate(CacheUpdateEvent event) {
        if ("DELETE".equals(event.getAction())) {
            redisTemplate.delete(event.getCacheKey());
        }
        // å¯ä»¥æ·»åŠ é‡è¯•æœºåˆ¶
    }
}
```

### 8.4 ç¼“å­˜é›ªå´©é¢„é˜²


**ğŸš¨ ç³»ç»Ÿä¿æŠ¤æœºåˆ¶**

> âš ï¸ **é‡è¦æé†’**ï¼šç¼“å­˜é›ªå´©ä¼šå¯¼è‡´æ•°æ®åº“ç¬é—´å‹åŠ›è¿‡å¤§ï¼Œç³»ç»Ÿå´©æºƒ

**é›ªå´©é¢„é˜²ç­–ç•¥ï¼š**

```java
@Component
public class CacheAvalancheProtection {
    
    // ç­–ç•¥1ï¼šéšæœºè¿‡æœŸæ—¶é—´ï¼Œé¿å…åŒæ—¶å¤±æ•ˆ
    public void setWithRandomExpire(String key, Object value, int baseSeconds) {
        // åŸºç¡€æ—¶é—´ + éšæœºæ—¶é—´ï¼ˆ0-300ç§’ï¼‰
        int randomExpire = baseSeconds + new Random().nextInt(300);
        redisTemplate.setex(key, randomExpire, value);
    }
    
    // ç­–ç•¥2ï¼šå¤šçº§é™çº§ï¼Œç¼“å­˜å¤±æ•ˆæ—¶çš„å¤„ç†
    public ProductInfo getProductWithFallback(Long productId) {
        try {
            // å°è¯•ä»ç¼“å­˜è·å–
            return getFromCache(productId);
        } catch (Exception e) {
            try {
                // ç¼“å­˜å¤±è´¥ï¼Œå°è¯•æ•°æ®åº“
                return getFromDatabase(productId);
            } catch (Exception dbException) {
                // æ•°æ®åº“ä¹Ÿå¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼
                return getDefaultProduct(productId);
            }
        }
    }
    
    // ç­–ç•¥3ï¼šçƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ
    public void setHotDataNeverExpire(String key, Object value) {
        // ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æ›´æ–°
        redisTemplate.set(key, value);
        
        // è®°å½•æ›´æ–°æ—¶é—´
        redisTemplate.set(key + ":updateTime", System.currentTimeMillis());
    }
}
```

---

## 9. ğŸ¯ è¥é”€æ´»åŠ¨ç¼“å­˜ç­–ç•¥


### 9.1 è¥é”€æ´»åŠ¨çš„ç¼“å­˜ç‰¹ç‚¹


**ğŸ”¥ æ´»åŠ¨æœŸé—´çš„æŒ‘æˆ˜**

è¥é”€æ´»åŠ¨ï¼ˆåŒ11ã€618ç­‰ï¼‰å¯¹ç¼“å­˜ç³»ç»Ÿæå‡ºäº†æé«˜è¦æ±‚ï¼š

```
è¥é”€æ´»åŠ¨ç‰¹ç‚¹åˆ†æï¼š

æ—¶é—´ç‰¹å¾ï¼š
â”Œâ”€ æ´»åŠ¨é¢„çƒ­æœŸ â”€â”â”Œâ”€ æ´»åŠ¨çˆ†å‘æœŸ â”€â”â”Œâ”€ æ´»åŠ¨æ”¶å°¾æœŸ â”€â”
â”‚   æµé‡é€æ­¥å¢åŠ  â”‚â”‚   æµé‡è¾¾åˆ°å³°å€¼ â”‚â”‚   æµé‡é€æ­¥å›è½ â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘   â”‚â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘   â”‚
â”‚   æå‰é¢„çƒ­    â”‚â”‚   æŠ—ä½å‹åŠ›    â”‚â”‚   å¿«é€Ÿæ¢å¤    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®ç‰¹å¾ï¼š
â€¢ ä¼˜æƒ åˆ¸ä¿¡æ¯ï¼šå®æ—¶å˜åŒ–ï¼Œé«˜å¹¶å‘æŸ¥è¯¢
â€¢ æ´»åŠ¨å•†å“ï¼šä»·æ ¼ä¸´æ—¶è°ƒæ•´ï¼Œåº“å­˜å¿«é€Ÿå˜åŒ–  
â€¢ è¥é”€è§„åˆ™ï¼šå¤æ‚çš„è®¡ç®—é€»è¾‘ï¼Œéœ€è¦ç¼“å­˜è®¡ç®—ç»“æœ
â€¢ ç”¨æˆ·æƒç›Šï¼šä¼šå‘˜ç­‰çº§ã€ä¼˜æƒ èµ„æ ¼ç­‰
```

### 9.2 ä¼˜æƒ åˆ¸ç¼“å­˜è®¾è®¡


**ğŸ« ä¼˜æƒ åˆ¸ç³»ç»Ÿçš„ç¼“å­˜æ¶æ„**

```java
// ä¼˜æƒ åˆ¸ç¼“å­˜æ•°æ®ç»“æ„
public class CouponCache {
    private Long couponId;           // ä¼˜æƒ åˆ¸ID
    private String couponType;       // ç±»å‹ï¼šæ»¡å‡ã€æŠ˜æ‰£ã€ç«‹å‡
    private BigDecimal discountValue; // ä¼˜æƒ é‡‘é¢/æŠ˜æ‰£
    private BigDecimal minAmount;    // æœ€ä½ä½¿ç”¨é‡‘é¢
    private Integer totalCount;      // æ€»å‘æ”¾æ•°é‡
    private Integer usedCount;       // å·²ä½¿ç”¨æ•°é‡
    private Date startTime;          // å¼€å§‹æ—¶é—´
    private Date endTime;            // ç»“æŸæ—¶é—´
    private List<Long> applicableProducts; // é€‚ç”¨å•†å“
}

@Service
public class CouponCacheService {
    
    // ä¼˜æƒ åˆ¸æŠ¢å¤ºï¼ˆé«˜å¹¶å‘åœºæ™¯ï¼‰
    public boolean grabCoupon(Long couponId, Long userId) {
        String stockKey = "coupon:stock:" + couponId;
        String userKey = "coupon:user:" + couponId + ":" + userId;
        
        // Luaè„šæœ¬ä¿è¯åŸå­æ€§
        String luaScript = 
            "-- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»é¢†è¿‡\n" +
            "if redis.call('get', KEYS[2]) then\n" +
            "    return {0, 'already_grabbed'}\n" +
            "end\n" +
            "-- æ£€æŸ¥åº“å­˜\n" +  
            "local stock = redis.call('get', KEYS[1])\n" +
            "if not stock or tonumber(stock) <= 0 then\n" +
            "    return {0, 'out_of_stock'}\n" +
            "end\n" +
            "-- æ‰£å‡åº“å­˜å¹¶æ ‡è®°ç”¨æˆ·\n" +
            "redis.call('decr', KEYS[1])\n" +
            "redis.call('setex', KEYS[2], 86400, '1')\n" +
            "return {1, 'success'}";
            
        List<Object> result = redisTemplate.execute(
            new DefaultRedisScript<>(luaScript, List.class),
            Arrays.asList(stockKey, userKey)
        );
        
        return "1".equals(result.get(0).toString());
    }
}
```

### 9.3 æ´»åŠ¨å•†å“ç¼“å­˜


**ğŸ·ï¸ åŠ¨æ€ä»·æ ¼ç¼“å­˜ç­–ç•¥**

```java
@Service  
public class PromotionProductService {
    
    // æ´»åŠ¨å•†å“å¤šç»´åº¦ç¼“å­˜
    public void cachePromotionProduct(PromotionProduct product) {
        Long productId = product.getProductId();
        Long activityId = product.getActivityId();
        
        // 1. æŒ‰å•†å“ç»´åº¦ç¼“å­˜
        String productKey = "promotion:product:" + productId;
        redisTemplate.setex(productKey, 3600, product);
        
        // 2. æŒ‰æ´»åŠ¨ç»´åº¦ç¼“å­˜
        String activityKey = "promotion:activity:" + activityId;
        redisTemplate.opsForSet().add(activityKey, productId);
        redisTemplate.expire(activityKey, 3600, TimeUnit.SECONDS);
        
        // 3. æŒ‰åˆ†ç±»ç»´åº¦ç¼“å­˜ï¼ˆä¾¿äºæ‰¹é‡æŸ¥è¯¢ï¼‰
        String categoryKey = "promotion:category:" + product.getCategoryId();
        redisTemplate.opsForZSet().add(categoryKey, productId, product.getPromotionPrice().doubleValue());
    }
    
    // è·å–æ´»åŠ¨ä»·æ ¼ï¼ˆæ”¯æŒå¤šå±‚çº§ä¼˜æƒ ï¼‰
    public BigDecimal getPromotionPrice(Long productId, Long userId) {
        // åŸºç¡€æ´»åŠ¨ä»·
        BigDecimal basePrice = getActivityPrice(productId);
        
        // ç”¨æˆ·ä¸“äº«ä»·ï¼ˆä¼šå‘˜æŠ˜æ‰£ï¼‰
        BigDecimal memberDiscount = getMemberDiscount(userId);
        
        // ä¼˜æƒ åˆ¸æŠ˜æ‰£  
        BigDecimal couponDiscount = getBestCouponDiscount(productId, userId);
        
        // è®¡ç®—æœ€ç»ˆä»·æ ¼
        return calculateFinalPrice(basePrice, memberDiscount, couponDiscount);
    }
}
```

### 9.4 æ´»åŠ¨é¢„çƒ­ä¸é™çº§


**ğŸš€ å¤§ä¿ƒå‰çš„ç³»ç»Ÿå‡†å¤‡**

```java
@Component
public class PromotionWarmupService {
    
    // æ´»åŠ¨é¢„çƒ­ä»»åŠ¡
    @Scheduled(cron = "0 0 22 * * ?") // æ¯å¤©æ™šä¸Š10ç‚¹æ‰§è¡Œ
    public void warmupTomorrowActivities() {
        Date tomorrow = DateUtils.addDays(new Date(), 1);
        List<PromotionActivity> activities = getActivitiesByDate(tomorrow);
        
        for (PromotionActivity activity : activities) {
            // é¢„çƒ­æ´»åŠ¨åŸºæœ¬ä¿¡æ¯
            warmupActivityInfo(activity);
            
            // é¢„çƒ­æ´»åŠ¨å•†å“ä¿¡æ¯
            warmupActivityProducts(activity);
            
            // é¢„çƒ­åº“å­˜ä¿¡æ¯
            warmupActivityStock(activity);
            
            // é¢„çƒ­ç”¨æˆ·æƒç›Šä¿¡æ¯
            warmupUserPrivileges(activity);
        }
    }
    
    // æ´»åŠ¨é™çº§é…ç½®
    public void configureActivityDegradation(Long activityId) {
        // è®¾ç½®é™çº§é˜ˆå€¼
        String thresholdKey = "degradation:threshold:" + activityId;
        redisTemplate.opsForHash().putAll(thresholdKey, Map.of(
            "qps_limit", "10000",           // QPSè¶…è¿‡1ä¸‡å¼€å§‹é™æµ
            "error_rate_limit", "0.05",     // é”™è¯¯ç‡è¶…è¿‡5%å¼€å§‹é™çº§
            "response_time_limit", "500"    // å“åº”æ—¶é—´è¶…è¿‡500mså‘Šè­¦
        ));
        
        // è®¾ç½®é™çº§ç­–ç•¥
        String strategyKey = "degradation:strategy:" + activityId;
        redisTemplate.opsForList().rightPushAll(strategyKey,
            "disable_recommendation",      // å…³é—­å•†å“æ¨è
            "simplify_page",              // ç®€åŒ–é¡µé¢å†…å®¹
            "cache_only_mode",            // åªä»ç¼“å­˜è¯»å–
            "queue_mode"                  // å¯ç”¨æ’é˜Ÿæœºåˆ¶
        );
    }
}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


ğŸ¯ **ç”µå•†ç¼“å­˜çš„æœ¬è´¨ç†è§£**
```
âœ… ç¼“å­˜æ˜¯ç”¨å†…å­˜æ¢æ—¶é—´çš„æŠ€æœ¯ï¼Œç”¨ç©ºé—´æ¢å“åº”é€Ÿåº¦
âœ… ç”µå•†ç³»ç»Ÿçš„é«˜å¹¶å‘ç‰¹æ€§å†³å®šäº†ç¼“å­˜çš„é‡è¦æ€§  
âœ… ä¸åŒç±»å‹çš„æ•°æ®éœ€è¦ä¸åŒçš„ç¼“å­˜ç­–ç•¥
âœ… å¤šçº§ç¼“å­˜æ¶æ„æ˜¯å¤§å‹ç”µå•†ç³»ç»Ÿçš„å¿…å¤‡è®¾è®¡
âœ… ç¼“å­˜ä¸€è‡´æ€§æ˜¯æœ€å¤§çš„æŠ€æœ¯æŒ‘æˆ˜
```

### 10.2 å…³é”®æ¶æ„è®¾è®¡åŸåˆ™


**ğŸ—ï¸ è®¾è®¡åŸåˆ™æ€»ç»“**
```
ğŸ”¸ å°±è¿‘åŸåˆ™ï¼šæ•°æ®ç¦»ç”¨æˆ·è¶Šè¿‘ï¼Œè®¿é—®è¶Šå¿«
ğŸ”¸ åˆ†å±‚åŸåˆ™ï¼šä¸åŒå±‚æ¬¡è§£å†³ä¸åŒé—®é¢˜
ğŸ”¸ åˆ†ç¦»åŸåˆ™ï¼šè¯»å†™åˆ†ç¦»ï¼Œçƒ­å†·åˆ†ç¦»
ğŸ”¸ é™çº§åŸåˆ™ï¼šç³»ç»Ÿè¿‡è½½æ—¶ä¼˜é›…é™çº§
ğŸ”¸ ç›‘æ§åŸåˆ™ï¼šå…¨é“¾è·¯ç›‘æ§ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
```

### 10.3 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒæŠ€å·§


**âš¡ å¿…çŸ¥å¿…ä¼šçš„ä¼˜åŒ–æ–¹æ³•**

| ä¼˜åŒ–ç»´åº¦ | **æ ¸å¿ƒæŠ€å·§** | **æ€§èƒ½æå‡** |
|---------|-------------|-------------|
| **å‘½ä¸­ç‡ä¼˜åŒ–** | `é¢„çƒ­çƒ­ç‚¹æ•°æ®ï¼ŒLRUæ·˜æ±°ç­–ç•¥` | `æå‡50-80%å“åº”é€Ÿåº¦` |
| **å¹¶å‘ä¼˜åŒ–** | `è¯»å†™åˆ†ç¦»ï¼Œåˆ†ç‰‡å­˜å‚¨` | `æ”¯æŒ10å€å¹¶å‘é‡` |
| **ä¸€è‡´æ€§ä¼˜åŒ–** | `å¼‚æ­¥æ›´æ–°ï¼Œæœ€ç»ˆä¸€è‡´æ€§` | `é™ä½99%å†™å…¥å»¶è¿Ÿ` |
| **å®¹é”™ä¼˜åŒ–** | `å¤šçº§é™çº§ï¼Œç†”æ–­æœºåˆ¶` | `99.9%ç³»ç»Ÿå¯ç”¨æ€§` |

### 10.4 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ ä¸šåŠ¡åœºæ™¯æœ€ä½³å®è·µ**

```
å•†å“è¯¦æƒ…é¡µï¼š
â€¢ åŸºæœ¬ä¿¡æ¯ â†’ æœ¬åœ°ç¼“å­˜24å°æ—¶
â€¢ ä»·æ ¼ä¿¡æ¯ â†’ Redisç¼“å­˜1å°æ—¶  
â€¢ åº“å­˜ä¿¡æ¯ â†’ Redisç¼“å­˜30ç§’

è´­ç‰©è½¦åŠŸèƒ½ï¼š
â€¢ ç”¨æˆ·ä¼šè¯ â†’ Redisç¼“å­˜+å®šæœŸå¤‡ä»½
â€¢ è´­ç‰©è½¦æ•°æ® â†’ Hashç»“æ„å­˜å‚¨
â€¢ å¤šç«¯åŒæ­¥ â†’ å®æ—¶æ¨é€æœºåˆ¶

ç§’æ€æ´»åŠ¨ï¼š
â€¢ é¢„çƒ­ç­–ç•¥ â†’ æå‰1å°æ—¶é¢„çƒ­
â€¢ åº“å­˜åˆ†æ®µ â†’ å‡å°‘ç«äº‰å†²çª  
â€¢ é™çº§ä¿æŠ¤ â†’ å¤šçº§é™çº§æ–¹æ¡ˆ

æœç´¢æ¨èï¼š
â€¢ çƒ­è¯ç¼“å­˜ â†’ ZSetæ’è¡Œæ¦œ
â€¢ ä¸ªæ€§åŒ–æ¨è â†’ åˆ†å±‚ç¼“å­˜ç­–ç•¥
â€¢ æœç´¢å»ºè®® â†’ Trieæ ‘å‰ç¼€åŒ¹é…
```

### 10.5 ç›‘æ§ä¸è¿ç»´è¦ç‚¹


**ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡**

```
æ€§èƒ½æŒ‡æ ‡ï¼š
â€¢ ç¼“å­˜å‘½ä¸­ç‡ > 95%
â€¢ å¹³å‡å“åº”æ—¶é—´ < 10ms
â€¢ QPSå³°å€¼å¤„ç†èƒ½åŠ›
â€¢ å†…å­˜ä½¿ç”¨ç‡ < 80%

ä¸šåŠ¡æŒ‡æ ‡ï¼š  
â€¢ å•†å“é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’
â€¢ è´­ç‰©è½¦æ“ä½œå“åº” < 500ms
â€¢ æœç´¢ç»“æœè¿”å› < 1ç§’
â€¢ ç§’æ€æˆåŠŸç‡ > 99%

å‘Šè­¦è®¾ç½®ï¼š
ğŸš¨ ç¼“å­˜å‘½ä¸­ç‡ < 90% ç«‹å³å‘Šè­¦
ğŸŸ¡ å“åº”æ—¶é—´ > 50ms é¢„è­¦
ğŸ”´ ç³»ç»Ÿé”™è¯¯ç‡ > 1% ç´§æ€¥å‘Šè­¦
```

### 10.6 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â— å®é™…å·¥ä½œä¸­çš„å¸¸è§é™·é˜±**

```
é—®é¢˜1ï¼šç¼“å­˜å‡»ç©¿
ç°è±¡ï¼šçƒ­ç‚¹æ•°æ®è¿‡æœŸï¼Œå¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“
è§£å†³ï¼šåˆ†å¸ƒå¼é” + åŒæ£€æŸ¥é”å®š

é—®é¢˜2ï¼šç¼“å­˜é›ªå´©  
ç°è±¡ï¼šå¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œæ•°æ®åº“å‹åŠ›å‰§å¢
è§£å†³ï¼šéšæœºè¿‡æœŸæ—¶é—´ + å¤šçº§é™çº§

é—®é¢˜3ï¼šç¼“å­˜ç©¿é€
ç°è±¡ï¼šæŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼Œæ¯æ¬¡éƒ½æ‰“æ•°æ®åº“
è§£å†³ï¼šå¸ƒéš†è¿‡æ»¤å™¨ + ç©ºå€¼ç¼“å­˜

é—®é¢˜4ï¼šæ•°æ®ä¸ä¸€è‡´
ç°è±¡ï¼šç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸åŒæ­¥
è§£å†³ï¼šåŒåˆ ç­–ç•¥ + æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†

é—®é¢˜5ï¼šçƒ­ç‚¹æ•°æ®å€¾æ–œ
ç°è±¡ï¼šæŸäº›æ•°æ®è®¿é—®é‡ç‰¹åˆ«å¤§ï¼Œç¼“å­˜èŠ‚ç‚¹å‹åŠ›ä¸å‡
è§£å†³ï¼šæ•°æ®åˆ†ç‰‡ + æœ¬åœ°ç¼“å­˜
```

### 10.7 å­¦ä¹ å»ºè®®ä¸è¿›é˜¶æ–¹å‘


**ğŸ“ æ–°æ‰‹å­¦ä¹ è·¯å¾„**

```
ç¬¬ä¸€é˜¶æ®µ - åŸºç¡€ç†è§£ï¼ˆ1-2å‘¨ï¼‰ï¼š
âœ… ç†è§£ç¼“å­˜åŸºæœ¬æ¦‚å¿µå’Œä½œç”¨
âœ… æŒæ¡RedisåŸºæœ¬æ“ä½œ
âœ… äº†è§£å¤šçº§ç¼“å­˜æ€æƒ³

ç¬¬äºŒé˜¶æ®µ - å®è·µåº”ç”¨ï¼ˆ2-4å‘¨ï¼‰ï¼š
âœ… å®ç°ç®€å•çš„å•†å“è¯¦æƒ…ç¼“å­˜
âœ… å®Œæˆè´­ç‰©è½¦ç¼“å­˜åŠŸèƒ½
âœ… å¤„ç†åŸºæœ¬çš„ä¸€è‡´æ€§é—®é¢˜

ç¬¬ä¸‰é˜¶æ®µ - é«˜çº§ç‰¹æ€§ï¼ˆ1-2ä¸ªæœˆï¼‰ï¼š
âœ… è®¾è®¡ç§’æ€åœºæ™¯ç¼“å­˜æ–¹æ¡ˆ
âœ… å®ç°å¤šçº§ç¼“å­˜æ¶æ„  
âœ… æŒæ¡æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

ç¬¬å››é˜¶æ®µ - æ¶æ„è®¾è®¡ï¼ˆ3-6ä¸ªæœˆï¼‰ï¼š
âœ… è®¾è®¡å¤§å‹ç”µå•†ç¼“å­˜æ¶æ„
âœ… å¤„ç†å¤æ‚çš„ä¸€è‡´æ€§åœºæ™¯
âœ… ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§
```

**ğŸš€ è¿›é˜¶å­¦ä¹ æ–¹å‘**
- **åˆ†å¸ƒå¼ç³»ç»Ÿ**ï¼šCAPç†è®ºã€ä¸€è‡´æ€§ç®—æ³•
- **æ€§èƒ½ä¼˜åŒ–**ï¼šJVMè°ƒä¼˜ã€ç½‘ç»œä¼˜åŒ–  
- **æ¶æ„è®¾è®¡**ï¼šå¾®æœåŠ¡ã€æœåŠ¡ç½‘æ ¼
- **è¿ç»´ç›‘æ§**ï¼šAPMå·¥å…·ã€é“¾è·¯è¿½è¸ª

### 10.8 æ ¸å¿ƒè®°å¿†è¦ç‚¹


**ğŸ§  ä¸€å¥è¯æ€»ç»“**
> ç”µå•†ç¼“å­˜çš„æ ¸å¿ƒæ˜¯"**åˆ†å±‚å­˜å‚¨ï¼Œå°±è¿‘æœåŠ¡ï¼Œæœ€ç»ˆä¸€è‡´**"

**ğŸ”‘ å…³é”®æ•°å­—è®°å¿†**
- `95%+` - ç¼“å­˜å‘½ä¸­ç‡ç›®æ ‡
- `3ç§’` - é¡µé¢åŠ è½½æ—¶é—´ä¸Šé™  
- `24å°æ—¶` - é™æ€æ•°æ®ç¼“å­˜æ—¶é•¿
- `30ç§’` - åº“å­˜æ•°æ®ç¼“å­˜æ—¶é•¿
- `4å±‚` - å…¸å‹å¤šçº§ç¼“å­˜å±‚æ•°

**ğŸ“ æ ¸å¿ƒæ¨¡å¼è®°å¿†**
- **Cache-Aside** - æœ€å¸¸ç”¨çš„ç¼“å­˜æ¨¡å¼
- **åˆ†æ®µé”** - é«˜å¹¶å‘åº“å­˜æ‰£å‡æ–¹æ¡ˆ
- **åŒåˆ ç­–ç•¥** - ç¼“å­˜ä¸€è‡´æ€§ä¿éšœæ–¹æ¡ˆ
- **ç†”æ–­é™çº§** - ç³»ç»Ÿä¿æŠ¤æœºåˆ¶

---

> ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šç”µå•†ç¼“å­˜æ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œéœ€è¦åœ¨å®è·µä¸­ä¸æ–­ç§¯ç´¯ç»éªŒã€‚å»ºè®®ä»ç®€å•çš„å•†å“ç¼“å­˜å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°å¤æ‚çš„ç§’æ€åœºæ™¯ï¼Œæœ€ç»ˆèƒ½å¤Ÿè®¾è®¡å‡ºå®Œæ•´çš„ç”µå•†ç¼“å­˜æ¶æ„ã€‚è®°ä½ï¼Œç†è®ºå’Œå®è·µç›¸ç»“åˆæ‰æ˜¯æŒæ¡è¿™é—¨æŠ€æœ¯çš„å…³é”®ï¼