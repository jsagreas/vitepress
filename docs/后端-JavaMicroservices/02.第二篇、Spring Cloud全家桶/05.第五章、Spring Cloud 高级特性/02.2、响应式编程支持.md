---
title: 2ã€å“åº”å¼ç¼–ç¨‹æ”¯æŒ
---
## ğŸ“š ç›®å½•

1. [å“åº”å¼ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ](#1-å“åº”å¼ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ)
2. [Spring WebFlux æ ¸å¿ƒåŸç†](#2-Spring-WebFlux-æ ¸å¿ƒåŸç†)
3. [Reactive Streams è§„èŒƒè¯¦è§£](#3-Reactive-Streams-è§„èŒƒè¯¦è§£)
4. [WebClient å“åº”å¼è°ƒç”¨](#4-WebClient-å“åº”å¼è°ƒç”¨)
5. [å“åº”å¼æ•°æ®åº“è®¿é—®](#5-å“åº”å¼æ•°æ®åº“è®¿é—®)
6. [èƒŒå‹å¤„ç†æœºåˆ¶](#6-èƒŒå‹å¤„ç†æœºåˆ¶)
7. [å¼‚æ­¥éé˜»å¡å®ç°](#7-å¼‚æ­¥éé˜»å¡å®ç°)
8. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#8-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
9. [å“åº”å¼ç›‘æ§æ–¹æ¡ˆ](#9-å“åº”å¼ç›‘æ§æ–¹æ¡ˆ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŠ å“åº”å¼ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹


> ğŸ’¡ **é€šä¿—ç†è§£**  
> å“åº”å¼ç¼–ç¨‹å°±åƒè®¢é˜…æŠ¥çº¸ä¸€æ ·ï¼šä½ ä¸éœ€è¦æ¯å¤©å»æŠ¥æ‘Šé—®"ä»Šå¤©æœ‰æŠ¥çº¸å—ï¼Ÿ"ï¼Œè€Œæ˜¯è®¢é˜…åï¼Œæœ‰æ–°æŠ¥çº¸æ—¶é‚®é€’å‘˜ä¼šä¸»åŠ¨é€åˆ°ä½ å®¶ã€‚ç¨‹åºä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸ç”¨åå¤è¯¢é—®æ•°æ®æ˜¯å¦å‡†å¤‡å¥½ï¼Œè€Œæ˜¯æ•°æ®å‡†å¤‡å¥½æ—¶ä¼šä¸»åŠ¨"æ¨é€"ç»™ä½ ã€‚

**ğŸ“Œ æ ¸å¿ƒæ¦‚å¿µ**
```
ä¼ ç»Ÿç¼–ç¨‹æ¨¡å¼ï¼ˆæ‹‰æ¨¡å¼ï¼‰ï¼š
ä½ : "æ•°æ®å‡†å¤‡å¥½äº†å—ï¼Ÿ" â†’ ç³»ç»Ÿ: "æ²¡æœ‰"
ä½ : "ç°åœ¨å‡†å¤‡å¥½äº†å—ï¼Ÿ" â†’ ç³»ç»Ÿ: "è¿˜æ²¡æœ‰" 
ä½ : "é‚£ç°åœ¨å‘¢ï¼Ÿ" â†’ ç³»ç»Ÿ: "å¥½äº†ï¼ç»™ä½ æ•°æ®"

å“åº”å¼ç¼–ç¨‹ï¼ˆæ¨æ¨¡å¼ï¼‰ï¼š
ä½ : "æ•°æ®å¥½äº†å‘Šè¯‰æˆ‘ä¸€å£°" 
ç³»ç»Ÿ: "æ”¶åˆ°ï¼Œå‡†å¤‡å¥½äº†ä¼šé€šçŸ¥ä½ "
(è¿‡äº†ä¸€ä¼šå„¿)
ç³»ç»Ÿ: "æ•°æ®å‡†å¤‡å¥½äº†ï¼" â†’ ä½ : "æ”¶åˆ°ï¼Œå¼€å§‹å¤„ç†"
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å“åº”å¼ç¼–ç¨‹


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**

| ä¼ ç»ŸåŒæ­¥æ¨¡å¼ | å“åº”å¼å¼‚æ­¥æ¨¡å¼ | å®é™…æ•ˆæœ |
|------------|-------------|----------|
| çº¿ç¨‹ç­‰å¾…æ•°æ® | çº¿ç¨‹ç»§ç»­å¤„ç†å…¶ä»–è¯·æ±‚ | ğŸ’ª **èµ„æºåˆ©ç”¨ç‡æå‡** |
| é˜»å¡å¼å¤„ç† | éé˜»å¡å¼å¤„ç† | âš¡ **å“åº”é€Ÿåº¦æå‡** |
| çº¿ç¨‹æ± èµ„æºæ¶ˆè€—å¤§ | äº‹ä»¶é©±åŠ¨ï¼Œèµ„æºæ¶ˆè€—å° | ğŸš€ **å¹¶å‘èƒ½åŠ›æå‡** |

**ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯**
- **é«˜å¹¶å‘WebæœåŠ¡**ï¼šå¦‚ç”µå•†ç§’æ€ã€ç¤¾äº¤åª’ä½“
- **å®æ—¶æ•°æ®å¤„ç†**ï¼šå¦‚è‚¡ç¥¨è¡Œæƒ…ã€èŠå¤©ç³»ç»Ÿ  
- **å¾®æœåŠ¡é€šä¿¡**ï¼šæœåŠ¡é—´å¤§é‡å¼‚æ­¥è°ƒç”¨
- **IoTè®¾å¤‡é€šä¿¡**ï¼šä¼ æ„Ÿå™¨æ•°æ®å®æ—¶æ”¶é›†

### 1.3 å“åº”å¼ç¼–ç¨‹å››å¤§æ ¸å¿ƒç‰¹å¾


```
å“åº”å¼ç³»ç»Ÿå››å¤§æ”¯æŸ±ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å“åº”æ€§     â”‚    â”‚   å›å¼¹æ€§     â”‚
â”‚ (Responsive) â”‚    â”‚ (Resilient) â”‚  
â”‚   å¿«é€Ÿå“åº”   â”‚    â”‚  æ•…éšœæ¢å¤   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†•                   â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¼¹æ€§       â”‚    â”‚   æ¶ˆæ¯é©±åŠ¨   â”‚
â”‚ (Elastic)    â”‚    â”‚(Message     â”‚
â”‚  è´Ÿè½½è‡ªé€‚åº”   â”‚    â”‚ Driven)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸŒ¸ Spring WebFlux æ ¸å¿ƒåŸç†


### 2.1 WebFlux æ˜¯ä»€ä¹ˆ


> ğŸ” **ç®€å•ç†è§£**  
> å¦‚æœè¯´ Spring MVC æ˜¯ä¼ ç»Ÿçš„"ä¸€ä¸ªæœåŠ¡å‘˜å¯¹åº”ä¸€ä¸ªå®¢äºº"çš„é¤å…æœåŠ¡æ¨¡å¼ï¼Œé‚£ä¹ˆ WebFlux å°±æ˜¯"ä¸€ä¸ªæœåŠ¡å‘˜å¯ä»¥åŒæ—¶ç…§é¡¾å¤šä¸ªå®¢äºº"çš„é«˜æ•ˆæœåŠ¡æ¨¡å¼ã€‚æœåŠ¡å‘˜ä¸ç”¨ç­‰ä¸€ä¸ªå®¢äººç‚¹å®Œèœæ‰å»æœåŠ¡ä¸‹ä¸€ä¸ªï¼Œè€Œæ˜¯æ”¶åˆ°ç‚¹èœéœ€æ±‚å°±è®°ä¸‹ï¼Œç„¶åç»§ç»­æœåŠ¡å…¶ä»–å®¢äººã€‚

**ğŸ”¸ WebFlux æ ¸å¿ƒç‰¹ç‚¹**
```
Spring MVCï¼ˆä¼ ç»Ÿæ¨¡å¼ï¼‰ï¼š
è¯·æ±‚ â†’ çº¿ç¨‹ â†’ å¤„ç† â†’ å“åº”
æ¯ä¸ªè¯·æ±‚ç‹¬å ä¸€ä¸ªçº¿ç¨‹

Spring WebFluxï¼ˆå“åº”å¼æ¨¡å¼ï¼‰ï¼š  
è¯·æ±‚ â†’ äº‹ä»¶å¾ªç¯ â†’ å¼‚æ­¥å¤„ç† â†’ å“åº”
å°‘é‡çº¿ç¨‹å¤„ç†å¤§é‡è¯·æ±‚
```

### 2.2 WebFlux æ¶æ„å¯¹æ¯”


**ğŸ—ï¸ æ¶æ„å›¾ç¤º**
```
ä¼ ç»Ÿ Servlet æŠ€æœ¯æ ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Spring MVC                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚        Servlet API                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Servlet Container               â”‚
â”‚   (Tomcat/Jetty/Undertow)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å“åº”å¼ WebFlux æŠ€æœ¯æ ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Spring WebFlux               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Reactive Streams API             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Netty / Undertow / Jetty        â”‚
â”‚      (å“åº”å¼è¿è¡Œæ—¶)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª WebFlux åº”ç”¨


**ğŸ”§ åŸºç¡€ä¾èµ–é…ç½®**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-webflux</artifactId>
</dependency>
```

**ğŸ“ ç®€å•çš„å“åº”å¼ Controller**
```java
@RestController
public class ReactiveController {
    
    // è¿”å›å•ä¸ªæ•°æ® - Monoï¼ˆ0ä¸ªæˆ–1ä¸ªå…ƒç´ ï¼‰
    @GetMapping("/user/{id}")
    public Mono<User> getUser(@PathVariable String id) {
        // æ¨¡æ‹Ÿå¼‚æ­¥è·å–ç”¨æˆ·æ•°æ®
        return userService.findById(id);
    }
    
    // è¿”å›æ•°æ®æµ - Fluxï¼ˆ0ä¸ªåˆ°Nä¸ªå…ƒç´ ï¼‰
    @GetMapping("/users")
    public Flux<User> getUsers() {
        // è¿”å›ç”¨æˆ·åˆ—è¡¨æµ
        return userService.findAll();
    }
    
    // å®æ—¶æ•°æ®æµï¼ˆæœåŠ¡ç«¯æ¨é€ï¼‰
    @GetMapping(value = "/notifications", 
                produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public Flux<String> getNotifications() {
        // æ¯ç§’æ¨é€ä¸€æ¡æ¶ˆæ¯
        return Flux.interval(Duration.ofSeconds(1))
                   .map(seq -> "é€šçŸ¥æ¶ˆæ¯ " + seq);
    }
}
```

---

## 3. ğŸŒŠ Reactive Streams è§„èŒƒè¯¦è§£


### 3.1 Reactive Streams å››å¤§æ ¸å¿ƒæ¥å£


> ğŸ“– **è§„èŒƒç†è§£**  
> Reactive Streams å°±åƒåˆ¶å®šäº†ä¸€å¥—"æ•°æ®æµé€šçš„äº¤é€šè§„åˆ™"ï¼Œç¡®ä¿æ•°æ®å‘å¸ƒè€…ã€è®¢é˜…è€…ã€å¤„ç†å™¨ä¹‹é—´èƒ½å¤Ÿæœ‰åºã€é«˜æ•ˆåœ°äº¤äº’ï¼Œé¿å…"äº¤é€šå µå¡"ï¼ˆèƒŒå‹é—®é¢˜ï¼‰ã€‚

**ğŸ”¸ å››å¤§æ ¸å¿ƒè§’è‰²**

```
æ•°æ®æµå¤„ç†é“¾ï¼š
å‘å¸ƒè€… â†’ å¤„ç†å™¨ â†’ å¤„ç†å™¨ â†’ è®¢é˜…è€…
(Publisher) (Processor) (Processor) (Subscriber)

å®é™…ä¾‹å­ï¼š
æ•°æ®åº“ â†’ æ•°æ®è½¬æ¢ â†’ æ•°æ®è¿‡æ»¤ â†’ Webå“åº”
```

| æ¥å£ | ä½œç”¨ | ç”Ÿæ´»ç±»æ¯” | ä»£ç ç¤ºä¾‹ |
|------|------|----------|----------|
| **Publisher** | æ•°æ®å‘å¸ƒè€… | ğŸ“º ç”µè§†å°å‘é€èŠ‚ç›® | `Flux.just(1,2,3)` |
| **Subscriber** | æ•°æ®è®¢é˜…è€… | ğŸ“± è§‚ä¼—æ¥æ”¶èŠ‚ç›® | `.subscribe(data -> {})` |
| **Subscription** | è®¢é˜…å…³ç³» | ğŸ“‹ æ”¶è§†åè®® | `.request(n)` |
| **Processor** | æ•°æ®å¤„ç†å™¨ | ğŸ”„ ä¸­è½¬ç«™å¤„ç† | `.map().filter()` |

### 3.2 Mono å’Œ Flux è¯¦è§£


**ğŸ”¸ Monoï¼šå¤„ç† 0 æˆ– 1 ä¸ªå…ƒç´ **
```java
// åˆ›å»º Mono çš„å¸¸è§æ–¹å¼
Mono<String> mono1 = Mono.just("Hello");           // åŒ…å«1ä¸ªå…ƒç´ 
Mono<String> mono2 = Mono.empty();                 // ç©ºçš„ Mono
Mono<String> mono3 = Mono.error(new RuntimeException()); // é”™è¯¯ Mono

// å®é™…åº”ç”¨ï¼šæŸ¥è¯¢å•ä¸ªç”¨æˆ·
Mono<User> user = userRepository.findById("123")
    .doOnNext(u -> log.info("æ‰¾åˆ°ç”¨æˆ·: {}", u.getName()))
    .doOnEmpty(() -> log.warn("ç”¨æˆ·ä¸å­˜åœ¨"))
    .onErrorReturn(new User("é»˜è®¤ç”¨æˆ·"));
```

**ğŸ”¸ Fluxï¼šå¤„ç† 0 åˆ° N ä¸ªå…ƒç´ **
```java
// åˆ›å»º Flux çš„å¸¸è§æ–¹å¼
Flux<Integer> flux1 = Flux.just(1, 2, 3, 4, 5);
Flux<Integer> flux2 = Flux.range(1, 10);          // 1åˆ°10
Flux<Long> flux3 = Flux.interval(Duration.ofSeconds(1)); // æ¯ç§’å‘å°„ä¸€ä¸ªæ•°å­—

// å®é™…åº”ç”¨ï¼šå¤„ç†ç”¨æˆ·åˆ—è¡¨
Flux<User> users = userRepository.findAll()
    .filter(user -> user.getAge() > 18)            // è¿‡æ»¤æˆå¹´ç”¨æˆ·
    .map(user -> user.getName().toUpperCase())     // è½¬æ¢å§“åä¸ºå¤§å†™
    .take(10)                                      // åªå–å‰10ä¸ª
    .doOnNext(name -> log.info("å¤„ç†ç”¨æˆ·: {}", name));
```

### 3.3 å“åº”å¼æ“ä½œç¬¦è¯¦è§£


**ğŸ”§ è½¬æ¢æ“ä½œç¬¦**
```java
// map - æ•°æ®è½¬æ¢ï¼ˆ1å¯¹1ï¼‰
Flux.just("apple", "banana", "cherry")
    .map(String::toUpperCase)  // è½¬å¤§å†™
    .subscribe(System.out::println); // APPLE, BANANA, CHERRY

// flatMap - æ‰å¹³åŒ–è½¬æ¢ï¼ˆ1å¯¹å¤šï¼‰
Flux.just("Hello", "World")
    .flatMap(word -> Flux.fromArray(word.split("")))  // æ‹†åˆ†æˆå­—ç¬¦
    .subscribe(System.out::println); // H,e,l,l,o,W,o,r,l,d
```

**ğŸ” è¿‡æ»¤æ“ä½œç¬¦**
```java
// filter - æ¡ä»¶è¿‡æ»¤
Flux.range(1, 10)
    .filter(n -> n % 2 == 0)  // åªè¦å¶æ•°
    .subscribe(System.out::println); // 2,4,6,8,10

// take - é™åˆ¶æ•°é‡
Flux.interval(Duration.ofSeconds(1))
    .take(5)  // åªå–å‰5ä¸ª
    .subscribe(System.out::println); // 0,1,2,3,4
```

---

## 4. ğŸŒ WebClient å“åº”å¼è°ƒç”¨


### 4.1 WebClient åŸºç¡€ä½¿ç”¨


> ğŸ’¡ **ç†è§£å¯¹æ¯”**  
> å¦‚æœ RestTemplate æ˜¯"æ‰“ç”µè¯"ï¼ˆåŒæ­¥ç­‰å¾…å¯¹æ–¹æ¥å¬å’Œå›å¤ï¼‰ï¼Œé‚£ä¹ˆ WebClient å°±æ˜¯"å‘å¾®ä¿¡"ï¼ˆå‘å‡ºæ¶ˆæ¯åå¯ä»¥ç»§ç»­åšå…¶ä»–äº‹ï¼Œå¯¹æ–¹å›å¤æ—¶ä¼šæ”¶åˆ°é€šçŸ¥ï¼‰ã€‚

**ğŸ”§ åˆ›å»º WebClient**
```java
@Configuration
public class WebClientConfig {
    
    @Bean
    public WebClient webClient() {
        return WebClient.builder()
            .baseUrl("http://api.example.com")
            .defaultHeader("Content-Type", "application/json")
            .defaultHeader("User-Agent", "MyApp/1.0")
            .codecs(configurer -> configurer.defaultCodecs().maxInMemorySize(2 * 1024 * 1024))
            .build();
    }
}
```

### 4.2 å¸¸è§è¯·æ±‚æ–¹å¼


**ğŸ“¤ GET è¯·æ±‚**
```java
@Service
public class UserService {
    
    private final WebClient webClient;
    
    // è·å–å•ä¸ªç”¨æˆ·
    public Mono<User> getUser(String userId) {
        return webClient.get()
            .uri("/users/{id}", userId)
            .retrieve()
            .bodyToMono(User.class)
            .timeout(Duration.ofSeconds(5))  // 5ç§’è¶…æ—¶
            .retry(3)  // å¤±è´¥é‡è¯•3æ¬¡
            .doOnError(error -> log.error("è·å–ç”¨æˆ·å¤±è´¥: {}", error.getMessage()));
    }
    
    // è·å–ç”¨æˆ·åˆ—è¡¨
    public Flux<User> getAllUsers() {
        return webClient.get()
            .uri("/users")
            .retrieve()
            .bodyToFlux(User.class);
    }
}
```

**ğŸ“¤ POST è¯·æ±‚**
```java
// åˆ›å»ºç”¨æˆ·
public Mono<User> createUser(User user) {
    return webClient.post()
        .uri("/users")
        .bodyValue(user)  // æˆ–è€… .body(Mono.just(user), User.class)
        .retrieve()
        .bodyToMono(User.class);
}

// å¼‚æ­¥æ‰¹é‡åˆ›å»ºç”¨æˆ·
public Flux<User> createUsers(List<User> users) {
    return Flux.fromIterable(users)
        .flatMap(this::createUser)  // å¹¶å‘åˆ›å»º
        .buffer(10)  // æ¯10ä¸ªä¸ºä¸€æ‰¹
        .flatMap(Flux::fromIterable);
}
```

### 4.3 é”™è¯¯å¤„ç†å’Œé‡è¯•ç­–ç•¥


**âš ï¸ é”™è¯¯å¤„ç†**
```java
public Mono<User> getUserWithErrorHandling(String userId) {
    return webClient.get()
        .uri("/users/{id}", userId)
        .retrieve()
        .onStatus(HttpStatus::is4xxClientError, response -> {
            if (response.statusCode() == HttpStatus.NOT_FOUND) {
                return Mono.error(new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨: " + userId));
            }
            return Mono.error(new ClientException("å®¢æˆ·ç«¯é”™è¯¯: " + response.statusCode()));
        })
        .onStatus(HttpStatus::is5xxServerError, response -> {
            return Mono.error(new ServerException("æœåŠ¡å™¨é”™è¯¯: " + response.statusCode()));
        })
        .bodyToMono(User.class)
        .onErrorReturn(new User("é»˜è®¤ç”¨æˆ·"));  // é”™è¯¯æ—¶è¿”å›é»˜è®¤å€¼
}
```

---

## 5. ğŸ—„ï¸ å“åº”å¼æ•°æ®åº“è®¿é—®


### 5.1 Spring Data R2DBC ä»‹ç»


> ğŸ” **R2DBC ç†è§£**  
> R2DBC å°±åƒç»™æ•°æ®åº“è£…ä¸Šäº†"å¼‚æ­¥å¼•æ“"ï¼Œä¼ ç»Ÿ JDBC æ˜¯"æ‰“ç”µè¯æŸ¥æ•°æ®åº“"ï¼ˆå¿…é¡»ç­‰å¾…å›å¤ï¼‰ï¼Œè€Œ R2DBC æ˜¯"å‘çŸ­ä¿¡æŸ¥æ•°æ®åº“"ï¼ˆå‘å‡ºæŸ¥è¯¢åå¯ä»¥ç»§ç»­åšå…¶ä»–äº‹ï¼ŒæŸ¥åˆ°ç»“æœæ—¶ä¼šæ”¶åˆ°é€šçŸ¥ï¼‰ã€‚

**ğŸ”§ ä¾èµ–é…ç½®**
```xml
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-r2dbc</artifactId>
    </dependency>
    <dependency>
        <groupId>io.r2dbc</groupId>
        <artifactId>r2dbc-mysql</artifactId> <!-- æˆ– r2dbc-postgresql -->
    </dependency>
</dependencies>
```

### 5.2 å“åº”å¼ Repository


**ğŸ“ å®ä½“ç±»å®šä¹‰**
```java
@Table("users")
public class User {
    @Id
    private Long id;
    private String name;
    private String email;
    private Integer age;
    
    // æ„é€ å™¨ã€getterã€setter...
}
```

**ğŸ”¸ å“åº”å¼ Repository**
```java
public interface UserRepository extends ReactiveCrudRepository<User, Long> {
    
    // è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•
    Flux<User> findByAgeGreaterThan(Integer age);
    
    Mono<User> findByEmail(String email);
    
    // ä½¿ç”¨ @Query æ³¨è§£
    @Query("SELECT * FROM users WHERE name LIKE :name")
    Flux<User> findByNameLike(String name);
    
    // åˆ é™¤æ“ä½œ
    @Modifying
    @Query("DELETE FROM users WHERE age < :age")
    Mono<Integer> deleteByAgeLessThan(Integer age);
}
```

### 5.3 å®é™…åº”ç”¨ç¤ºä¾‹


**ğŸ’¼ ç”¨æˆ·æœåŠ¡å®ç°**
```java
@Service
public class ReactiveUserService {
    
    private final UserRepository userRepository;
    
    // åˆ›å»ºç”¨æˆ·ï¼ˆå¸¦éªŒè¯ï¼‰
    public Mono<User> createUser(User user) {
        return userRepository.findByEmail(user.getEmail())
            .hasElement()  // æ£€æŸ¥æ˜¯å¦å­˜åœ¨
            .flatMap(exists -> {
                if (exists) {
                    return Mono.error(new UserAlreadyExistsException("é‚®ç®±å·²å­˜åœ¨"));
                }
                return userRepository.save(user);
            });
    }
    
    // åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·
    public Flux<User> getUsersByPage(int page, int size) {
        return userRepository.findAll()
            .skip(page * size)  // è·³è¿‡å‰é¢çš„è®°å½•
            .take(size)         // å–æŒ‡å®šæ•°é‡
            .sort((u1, u2) -> u1.getName().compareTo(u2.getName()));
    }
    
    // æ‰¹é‡æ›´æ–°ç”¨æˆ·å¹´é¾„
    public Mono<Long> updateAgeForAdults() {
        return userRepository.findByAgeGreaterThan(18)
            .map(user -> {
                user.setAge(user.getAge() + 1);
                return user;
            })
            .collectList()
            .flatMap(users -> userRepository.saveAll(users).count());
    }
}
```

---

## 6. âš–ï¸ èƒŒå‹å¤„ç†æœºåˆ¶


### 6.1 ä»€ä¹ˆæ˜¯èƒŒå‹


> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**  
> èƒŒå‹å°±åƒé«˜é€Ÿå…¬è·¯çš„äº¤é€šå µå¡ã€‚å¦‚æœå‰æ–¹è½¦è¾†å¤„ç†ç¼“æ…¢ï¼Œåé¢è½¦æµä¼šè¶Šç§¯è¶Šå¤šï¼Œæœ€ç»ˆé€ æˆæ‹¥å µã€‚åœ¨æ•°æ®æµå¤„ç†ä¸­ï¼Œå¦‚æœæ•°æ®ç”Ÿäº§é€Ÿåº¦è¶…è¿‡æ¶ˆè´¹é€Ÿåº¦ï¼Œå°±ä¼šäº§ç”Ÿ"æ•°æ®å µå¡"ã€‚

**ğŸš¨ èƒŒå‹äº§ç”Ÿåœºæ™¯**
```
æ•°æ®æµå¤„ç†é“¾ï¼š
å¿«é€Ÿæ•°æ®æº â†’ æ…¢é€Ÿå¤„ç†å™¨ â†’ å¿«é€Ÿæ¶ˆè´¹è€…
    â†“
ç”Ÿäº§ï¼š1000æ¡/ç§’
å¤„ç†ï¼š100æ¡/ç§’  â† ç“¶é¢ˆ
æ¶ˆè´¹ï¼š500æ¡/ç§’
    â†“
ç»“æœï¼šæ•°æ®ç§¯å‹ï¼Œå†…å­˜æº¢å‡º
```

### 6.2 èƒŒå‹å¤„ç†ç­–ç•¥


**ğŸ”§ ç­–ç•¥å¯¹æ¯”è¡¨**

| ç­–ç•¥ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | ä»£ç ç¤ºä¾‹ |
|------|------|----------|----------|
| **Buffer** | ç¼“å­˜æ•°æ®ï¼Œæº¢å‡ºæ—¶æŠ¥é”™ | æ•°æ®çªå‘ï¼Œä½†æ€»ä½“å¯æ§ | `.buffer(1000)` |
| **Drop** | ä¸¢å¼ƒæ–°æ•°æ® | å®æ—¶æ€§è¦æ±‚é«˜ï¼Œå¯æ¥å—æ•°æ®ä¸¢å¤± | `.onBackpressureDrop()` |
| **Latest** | åªä¿ç•™æœ€æ–°æ•°æ® | çŠ¶æ€æ›´æ–°åœºæ™¯ | `.onBackpressureLatest()` |
| **Error** | èƒŒå‹æ—¶ç›´æ¥æŠ¥é”™ | ä¸¥æ ¼çš„æ•°æ®ä¸€è‡´æ€§è¦æ±‚ | `.onBackpressureError()` |

**ğŸ’» å®é™…åº”ç”¨ç¤ºä¾‹**
```java
// å¤„ç†é«˜é¢‘æ•°æ®æµ
public Flux<ProcessedData> handleHighFrequencyData() {
    return dataSource.getData()
        // ç­–ç•¥1: ç¼“å†²å¤„ç†
        .buffer(Duration.ofSeconds(1), 100)  // 1ç§’æˆ–100æ¡æ•°æ®ä¸ºä¸€æ‰¹
        .flatMap(batch -> processDataBatch(batch))
        
        // ç­–ç•¥2: èƒŒå‹æ—¶ä¸¢å¼ƒæ•°æ®
        .onBackpressureDrop(droppedData -> 
            log.warn("æ•°æ®è¢«ä¸¢å¼ƒ: {}", droppedData))
            
        // ç­–ç•¥3: é™åˆ¶å¹¶å‘å¤„ç†
        .flatMap(this::expensiveOperation, 4); // æœ€å¤š4ä¸ªå¹¶å‘
}
```

---

## 7. âš¡ å¼‚æ­¥éé˜»å¡å®ç°


### 7.1 å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”


**ğŸ”„ å¤„ç†æ¨¡å‹å›¾ç¤º**
```
ä¼ ç»Ÿé˜»å¡æ¨¡å¼ï¼š
çº¿ç¨‹1: [è¯·æ±‚A] â”€â”€â”€â”€ç­‰å¾…æ•°æ®åº“â”€â”€â”€â”€ [å¤„ç†A] [å“åº”A]
çº¿ç¨‹2: [è¯·æ±‚B] â”€â”€â”€â”€ç­‰å¾…æ•°æ®åº“â”€â”€â”€â”€ [å¤„ç†B] [å“åº”B]  
çº¿ç¨‹3: [è¯·æ±‚C] â”€â”€â”€â”€ç­‰å¾…æ•°æ®åº“â”€â”€â”€â”€ [å¤„ç†C] [å“åº”C]

å“åº”å¼éé˜»å¡æ¨¡å¼ï¼š
çº¿ç¨‹1: [è¯·æ±‚A][è¯·æ±‚B][è¯·æ±‚C] â”€â”€ [å¤„ç†A][å¤„ç†B][å¤„ç†C] â”€â”€ [å“åº”ABC]
          â†“        â†“        â†“
       æ•°æ®åº“å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡çº¿ç¨‹
```

### 7.2 å®é™…æ€§èƒ½å¯¹æ¯”


| æŒ‡æ ‡ | ä¼ ç»Ÿé˜»å¡ | å“åº”å¼éé˜»å¡ | æ€§èƒ½æå‡ |
|------|---------|-------------|----------|
| å¹¶å‘ç”¨æˆ·æ•° | 1000 | 10000 | ğŸ’ª **10å€** |
| å†…å­˜ä½¿ç”¨ | 1GB | 200MB | ğŸ’ª **80%èŠ‚çœ** |  
| å“åº”æ—¶é—´ | 500ms | 50ms | âš¡ **10å€æå‡** |
| çº¿ç¨‹æ•°é‡ | 200 | 20 | ğŸš€ **90%å‡å°‘** |

### 7.3 å¼‚æ­¥ç¼–ç¨‹æœ€ä½³å®è·µ


**âœ… æ­£ç¡®çš„å¼‚æ­¥ä»£ç **
```java
@Service
public class AsyncOrderService {
    
    // å¼‚æ­¥å¤„ç†è®¢å•
    public Mono<OrderResult> processOrder(Order order) {
        return validateOrder(order)
            .flatMap(this::calculatePrice)      // è®¡ç®—ä»·æ ¼
            .flatMap(this::checkInventory)      // æ£€æŸ¥åº“å­˜
            .flatMap(this::processPayment)      // å¤„ç†æ”¯ä»˜
            .flatMap(this::sendConfirmation)    // å‘é€ç¡®è®¤
            .doOnSuccess(result -> log.info("è®¢å•å¤„ç†æˆåŠŸ: {}", result.getOrderId()))
            .doOnError(error -> log.error("è®¢å•å¤„ç†å¤±è´¥: {}", error.getMessage()));
    }
    
    private Mono<Order> validateOrder(Order order) {
        // å¼‚æ­¥éªŒè¯è®¢å•
        return Mono.fromCallable(() -> {
            // éªŒè¯é€»è¾‘
            return order;
        }).subscribeOn(Schedulers.boundedElastic());
    }
}
```

---

## 8. ğŸš€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 8.1 çº¿ç¨‹æ¨¡å‹ä¼˜åŒ–


**ğŸ”§ Scheduler é€‰æ‹©æŒ‡å—**

| Schedulerç±»å‹ | é€‚ç”¨åœºæ™¯ | çº¿ç¨‹ç‰¹ç‚¹ | ä½¿ç”¨ç¤ºä¾‹ |
|--------------|----------|----------|----------|
| `Schedulers.immediate()` | CPUå¯†é›†å‹ï¼Œå¿«é€Ÿæ“ä½œ | å½“å‰çº¿ç¨‹æ‰§è¡Œ | ç®€å•æ•°æ®è½¬æ¢ |
| `Schedulers.single()` | ä¸²è¡Œæ‰§è¡Œ | å•ä¸ªåå°çº¿ç¨‹ | æ—¥å¿—è®°å½• |
| `Schedulers.parallel()` | CPUå¯†é›†å‹ | CPUæ ¸æ•°çº¿ç¨‹ | å¤æ‚è®¡ç®— |
| `Schedulers.boundedElastic()` | I/Oå¯†é›†å‹ | å¯ä¼¸ç¼©çº¿ç¨‹æ±  | æ•°æ®åº“è®¿é—® |

```java
// åˆç†ä½¿ç”¨è°ƒåº¦å™¨
public Mono<ProcessedData> processData(RawData data) {
    return Mono.just(data)
        // CPUå¯†é›†å‹æ“ä½œä½¿ç”¨parallel()
        .map(this::heavyComputation)
        .subscribeOn(Schedulers.parallel())
        
        // I/Oæ“ä½œä½¿ç”¨boundedElastic()  
        .flatMap(processed -> saveToDatabase(processed)
            .subscribeOn(Schedulers.boundedElastic()))
            
        // æœ€ç»ˆç»“æœåœ¨ä¸»çº¿ç¨‹å¤„ç†
        .publishOn(Schedulers.immediate());
}
```

### 8.2 å†…å­˜ä¼˜åŒ–ç­–ç•¥


**ğŸ’¾ å†…å­˜ä½¿ç”¨ä¼˜åŒ–**
```java
// é¿å…å†…å­˜æ³„æ¼çš„æ­£ç¡®å†™æ³•
public Flux<String> processLargeFile(String filename) {
    return Flux.using(
        // èµ„æºåˆ›å»º
        () -> new BufferedReader(new FileReader(filename)),
        
        // èµ„æºä½¿ç”¨  
        reader -> Flux.fromStream(reader.lines()),
        
        // èµ„æºæ¸…ç†
        reader -> {
            try { reader.close(); } 
            catch (IOException e) { log.error("å…³é—­æ–‡ä»¶å¤±è´¥", e); }
        }
    )
    .limitRate(100)  // é™åˆ¶å¤„ç†é€Ÿç‡ï¼Œé¿å…å†…å­˜æº¢å‡º
    .share();        // å¤šä¸ªè®¢é˜…è€…å…±äº«æ•°æ®æµ
}
```

### 8.3 æ€§èƒ½ç›‘æ§æŒ‡æ ‡


**ğŸ“Š å…³é”®ç›‘æ§æŒ‡æ ‡**
```java
@Component
public class ReactiveMetrics {
    
    private final MeterRegistry meterRegistry;
    
    public Mono<String> monitoredOperation(String input) {
        return Mono.just(input)
            .doOnSubscribe(s -> 
                meterRegistry.counter("operation.started").increment())
            .doOnSuccess(result -> 
                meterRegistry.counter("operation.success").increment())
            .doOnError(error -> 
                meterRegistry.counter("operation.error").increment())
            .timed(meterRegistry)  // è‡ªåŠ¨è®°å½•æ‰§è¡Œæ—¶é—´
            .map(this::processInput);
    }
}
```

---

## 9. ğŸ“Š å“åº”å¼ç›‘æ§æ–¹æ¡ˆ


### 9.1 ç›‘æ§ä½“ç³»æ¶æ„


**ğŸ—ï¸ ç›‘æ§æ¶æ„å›¾**
```
åº”ç”¨å±‚ç›‘æ§ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Spring Boot Actuator + Micrometer                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è‡ªå®šä¹‰æŒ‡æ ‡: è¯·æ±‚é‡ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®æµç›‘æ§ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Reactor å†…ç½®æŒ‡æ ‡: onNextã€onErrorã€onComplete        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚  èƒŒå‹ç›‘æ§: Bufferä½¿ç”¨ç‡ã€Dropæ•°é‡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸºç¡€è®¾æ–½ç›‘æ§ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JVM: å†…å­˜ä½¿ç”¨ã€GCã€çº¿ç¨‹æ±                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Netty: EventLoopã€Channelã€Buffer                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 ç›‘æ§é…ç½®å®ç°


**âš™ï¸ Actuator é…ç½®**
```yaml
# application.yml
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true
    tags:
      application: reactive-service
      environment: production
```

**ğŸ“ˆ è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡**
```java
@Component
public class ReactiveServiceMetrics {
    
    private final Counter requestCounter;
    private final Timer responseTimer;
    private final Gauge activeConnections;
    
    public ReactiveServiceMetrics(MeterRegistry registry) {
        this.requestCounter = Counter.builder("reactive.requests.total")
            .description("å“åº”å¼è¯·æ±‚æ€»æ•°")
            .register(registry);
            
        this.responseTimer = Timer.builder("reactive.response.time")
            .description("å“åº”æ—¶é—´åˆ†å¸ƒ")  
            .register(registry);
            
        this.activeConnections = Gauge.builder("reactive.connections.active")
            .description("æ´»è·ƒè¿æ¥æ•°")
            .register(registry, this, ReactiveServiceMetrics::getActiveConnections);
    }
    
    public <T> Mono<T> monitorRequest(Mono<T> operation) {
        return operation
            .doOnSubscribe(s -> requestCounter.increment())
            .timed(responseTimer)
            .map(TimedResult::get);
    }
}
```

### 9.3 å‘Šè­¦è§„åˆ™è®¾ç½®


**ğŸš¨ Prometheus å‘Šè­¦è§„åˆ™**
```yaml
groups:
- name: reactive-service
  rules:
  - alert: HighErrorRate
    expr: rate(reactive_requests_errors_total[5m]) > 0.1
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "å“åº”å¼æœåŠ¡é”™è¯¯ç‡è¿‡é«˜"
      description: "é”™è¯¯ç‡è¶…è¿‡10%ï¼ŒæŒç»­2åˆ†é’Ÿ"
      
  - alert: HighResponseTime  
    expr: histogram_quantile(0.95, rate(reactive_response_time_bucket[5m])) > 1
    for: 1m
    labels:
      severity: critical
    annotations:
      summary: "å“åº”æ—¶é—´è¿‡é•¿"
      description: "95%å“åº”æ—¶é—´è¶…è¿‡1ç§’"
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ¯ **æ ¸å¿ƒç†è§£**ï¼š
ğŸ”¸ å“åº”å¼ç¼–ç¨‹ï¼šæ•°æ®æ¨é€æ¨¡å¼ï¼Œéé˜»å¡å¤„ç†
ğŸ”¸ WebFluxï¼šSpringçš„å“åº”å¼Webæ¡†æ¶
ğŸ”¸ Reactive Streamsï¼šå“åº”å¼ç¼–ç¨‹ç»Ÿä¸€è§„èŒƒ  
ğŸ”¸ Mono/Fluxï¼šå•ä¸ª/å¤šä¸ªå…ƒç´ çš„å“åº”å¼å®¹å™¨
ğŸ”¸ WebClientï¼šå“åº”å¼HTTPå®¢æˆ·ç«¯
ğŸ”¸ R2DBCï¼šå“åº”å¼æ•°æ®åº“è®¿é—®
ğŸ”¸ èƒŒå‹ï¼šæ•°æ®æµé‡æ§åˆ¶æœºåˆ¶
```

### 10.2 å…³é”®æŠ€æœ¯é€‰æ‹©æŒ‡å—


**ğŸ¤” ä½•æ—¶ä½¿ç”¨å“åº”å¼ç¼–ç¨‹**

| åœºæ™¯ | ä¼ ç»Ÿé˜»å¡ | å“åº”å¼ | æ¨èé€‰æ‹© |
|------|---------|--------|---------|
| **é«˜å¹¶å‘è®¿é—®** | âŒ èµ„æºæ¶ˆè€—å¤§ | âœ… èµ„æºé«˜æ•ˆåˆ©ç”¨ | ğŸš€ **å“åº”å¼** |
| **I/Oå¯†é›†å‹** | âŒ çº¿ç¨‹å¤§é‡ç­‰å¾… | âœ… éé˜»å¡å¤„ç† | ğŸš€ **å“åº”å¼** |
| **å®æ—¶æ•°æ®æµ** | âŒ éš¾ä»¥å®ç° | âœ… å¤©ç„¶æ”¯æŒ | ğŸš€ **å“åº”å¼** |
| **CPUå¯†é›†å‹** | âœ… ç®€å•ç›´æ¥ | âŒ å¤æ‚åº¦é«˜ | ğŸ¯ **ä¼ ç»Ÿé˜»å¡** |
| **ç®€å•CRUD** | âœ… å¼€å‘æ•ˆç‡é«˜ | âŒ å­¦ä¹ æˆæœ¬é«˜ | ğŸ¯ **ä¼ ç»Ÿé˜»å¡** |

### 10.3 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒè¦ç‚¹


**âš¡ æ€§èƒ½æå‡ç­–ç•¥**
- **é€‰æ‹©åˆé€‚çš„Scheduler**ï¼šCPUå¯†é›†ç”¨parallelï¼ŒI/Oå¯†é›†ç”¨boundedElastic
- **åˆç†å¤„ç†èƒŒå‹**ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©buffer/drop/latestç­–ç•¥
- **é¿å…é˜»å¡æ“ä½œ**ï¼šæ•°æ®åº“è®¿é—®ç”¨R2DBCï¼ŒHTTPè°ƒç”¨ç”¨WebClient
- **ç›‘æ§å…³é”®æŒ‡æ ‡**ï¼šå“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€èƒŒå‹æƒ…å†µã€èµ„æºä½¿ç”¨

### 10.4 å¼€å‘æœ€ä½³å®è·µ


**âœ… æ¨èåšæ³•**
- ğŸ”¸ **æ¸è¿›å¼è¿ç§»**ï¼šä»è¾¹ç•Œç³»ç»Ÿå¼€å§‹ï¼Œé€æ­¥è¿ç§»æ ¸å¿ƒç³»ç»Ÿ
- ğŸ”¸ **æ··åˆæ¶æ„**ï¼šå“åº”å¼å¤„ç†é«˜å¹¶å‘ï¼Œä¼ ç»Ÿå¤„ç†å¤æ‚ä¸šåŠ¡
- ğŸ”¸ **å®Œå–„ç›‘æ§**ï¼šå»ºç«‹å®Œæ•´çš„å“åº”å¼åº”ç”¨ç›‘æ§ä½“ç³»
- ğŸ”¸ **å›¢é˜ŸåŸ¹è®­**ï¼šç¡®ä¿å›¢é˜ŸæŒæ¡å“åº”å¼ç¼–ç¨‹æ€ç»´

**âŒ é¿å…è¯¯åŒº**
- ğŸš« **å…¨ç›˜å“åº”å¼**ï¼šä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½é€‚åˆå“åº”å¼
- ğŸš« **å¿½ç•¥å­¦ä¹ æˆæœ¬**ï¼šå“åº”å¼ç¼–ç¨‹æœ‰ä¸€å®šå­¦ä¹ é—¨æ§›
- ğŸš« **è¿‡åº¦å¤æ‚åŒ–**ï¼šç®€å•ä¸šåŠ¡ä¸è¦å¼ºè¡Œä½¿ç”¨å“åº”å¼
- ğŸš« **ç¼ºä¹ç›‘æ§**ï¼šå“åº”å¼åº”ç”¨æ›´éœ€è¦ç»†ç²’åº¦ç›‘æ§

### 10.5 å­¦ä¹ è·¯å¾„å»ºè®®


```
ğŸ“š **å­¦ä¹ é˜¶æ®µè§„åˆ’**ï¼š

ğŸŒ± **å…¥é—¨é˜¶æ®µ**ï¼ˆ1-2å‘¨ï¼‰ï¼š
   â€¢ ç†è§£å“åº”å¼ç¼–ç¨‹åŸºæœ¬æ¦‚å¿µ
   â€¢ æŒæ¡ Mono/Flux åŸºæœ¬ç”¨æ³•
   â€¢ å®Œæˆç®€å•çš„ WebFlux ç¤ºä¾‹

ğŸŒ¿ **è¿›é˜¶é˜¶æ®µ**ï¼ˆ2-4å‘¨ï¼‰ï¼š
   â€¢ æ·±å…¥å­¦ä¹ æ“ä½œç¬¦å’Œç»„åˆ
   â€¢ æŒæ¡ WebClient å’Œ R2DBC
   â€¢ ç†è§£èƒŒå‹å¤„ç†æœºåˆ¶

ğŸŒ³ **é«˜çº§é˜¶æ®µ**ï¼ˆ1-2ä¸ªæœˆï¼‰ï¼š  
   â€¢ æ€§èƒ½è°ƒä¼˜å’Œç›‘æ§
   â€¢ å¤æ‚ä¸šåŠ¡åœºæ™¯åº”ç”¨
   â€¢ ä¸ç°æœ‰ç³»ç»Ÿé›†æˆä¼˜åŒ–
```

**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- å“åº”å¼ç¼–ç¨‹æ¨é€å¿«ï¼Œéé˜»å¡å¤„ç†æ•ˆç‡é«˜
- Monoå•å€¼Fluxå¤šå€¼ï¼ŒèƒŒå‹æ§åˆ¶å¾ˆé‡è¦  
- WebFluxå¤„ç†é«˜å¹¶å‘ï¼ŒWebClientè°ƒç”¨ä¸é˜»å¡
- ç›‘æ§æŒ‡æ ‡è¦å®Œå–„ï¼Œæ€§èƒ½ä¼˜åŒ–æœ‰é—¨é“

> ğŸ“ **å°ç»“**  
> å“åº”å¼ç¼–ç¨‹æ˜¯å¤„ç†é«˜å¹¶å‘ã€å®æ—¶æ•°æ®æµçš„åˆ©å™¨ï¼Œä½†ä¸æ˜¯é“¶å¼¹ã€‚å…³é”®æ˜¯ç†è§£å…¶é€‚ç”¨åœºæ™¯ï¼Œåœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨åˆé€‚çš„æŠ€æœ¯ï¼Œæ—¢èƒ½äº«å—æ€§èƒ½æå‡ï¼Œåˆèƒ½æ§åˆ¶å¤æ‚åº¦å’Œå¼€å‘æˆæœ¬ã€‚