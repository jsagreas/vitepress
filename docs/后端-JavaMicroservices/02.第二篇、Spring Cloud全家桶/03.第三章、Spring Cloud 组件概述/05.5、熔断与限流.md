---
title: 5ã€ç†”æ–­ä¸é™æµ
---
## ğŸ“š ç›®å½•

1. [ç†”æ–­ä¸é™æµåŸºç¡€æ¦‚å¿µ](#1-ç†”æ–­ä¸é™æµåŸºç¡€æ¦‚å¿µ)
2. [ç†”æ–­å™¨æ¨¡å¼æ·±å…¥ç†è§£](#2-ç†”æ–­å™¨æ¨¡å¼æ·±å…¥ç†è§£)
3. [Hystrixè¯¦è§£ä¸åº”ç”¨](#3-Hystrixè¯¦è§£ä¸åº”ç”¨)
4. [Resilience4jç°ä»£åŒ–ç†”æ–­](#4-Resilience4jç°ä»£åŒ–ç†”æ–­)
5. [Sentinelæµé‡æ§åˆ¶](#5-Sentinelæµé‡æ§åˆ¶)
6. [æœåŠ¡ç†”æ–­ä¸é™çº§](#6-æœåŠ¡ç†”æ–­ä¸é™çº§)
7. [é™æµç­–ç•¥ä¸å®ç°](#7-é™æµç­–ç•¥ä¸å®ç°)
8. [ç†”æ–­ç›‘æ§ä¸è¿ç»´](#8-ç†”æ–­ç›‘æ§ä¸è¿ç»´)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›¡ï¸ ç†”æ–­ä¸é™æµåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç†”æ–­ä¸é™æµ


> ğŸ’¡ **ç®€å•ç†è§£**ï¼šç†”æ–­å°±åƒå®¶é‡Œçš„ä¿é™©ä¸ï¼Œå½“ç”µæµè¿‡å¤§æ—¶è‡ªåŠ¨æ–­å¼€ä¿æŠ¤æ•´ä¸ªç”µè·¯ï¼›é™æµå°±åƒæ™¯åŒºçš„é™æµæªæ–½ï¼Œæ§åˆ¶åŒæ—¶è¿›å…¥çš„äººæ•°

**ç†”æ–­ï¼ˆCircuit Breakerï¼‰**ï¼š
```
ç”Ÿæ´»ç±»æ¯”ï¼š
å®¶ç”¨ç”µè·¯ä¿æŠ¤ â”€â”€â”€â”€â†’ å¾®æœåŠ¡ç†”æ–­ä¿æŠ¤
ç”µæµè¿‡è½½è‡ªåŠ¨æ–­å¼€ â”€â†’ æœåŠ¡å¼‚å¸¸è‡ªåŠ¨åˆ‡æ–­
é¿å…çƒ§æ¯æ•´ä¸ªç”µè·¯ â”€â†’ é¿å…æ‹–å®æ•´ä¸ªç³»ç»Ÿ
```

**é™æµï¼ˆRate Limitingï¼‰**ï¼š
```
ç”Ÿæ´»ç±»æ¯”ï¼š
æ™¯åŒºé—¨ç¥¨é™åˆ¶ â”€â”€â”€â”€â†’ æ¥å£è®¿é—®é™åˆ¶
æ¯å¤©é™5000äºº â”€â”€â”€â†’ æ¯ç§’é™1000è¯·æ±‚
è¶…å‡ºæ’é˜Ÿç­‰å€™ â”€â”€â”€â”€â†’ è¶…å‡ºæ‹’ç»æˆ–å»¶è¿Ÿ
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç†”æ–­ä¸é™æµ


**ğŸ”¥ æ ¸å¿ƒé—®é¢˜**ï¼šå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡é›ªå´©

```
æ­£å¸¸æƒ…å†µï¼š
ç”¨æˆ·è¯·æ±‚ â†’ æœåŠ¡A â†’ æœåŠ¡B â†’ æœåŠ¡C â†’ è¿”å›ç»“æœ
  1000    1000    1000    1000      æ­£å¸¸

å¼‚å¸¸æƒ…å†µï¼š
ç”¨æˆ·è¯·æ±‚ â†’ æœåŠ¡A â†’ æœåŠ¡B(æ•…éšœ) âŒ
  1000    1000    è¶…æ—¶ç­‰å¾…
  
ç»“æœï¼š
- æœåŠ¡Bå“åº”æ…¢ï¼ŒæœåŠ¡Açº¿ç¨‹è¢«å ç”¨
- æ›´å¤šè¯·æ±‚å †ç§¯ï¼ŒæœåŠ¡Aä¹Ÿå¼€å§‹å˜æ…¢
- æœ€ç»ˆæ•´ä¸ªæœåŠ¡é“¾è·¯éƒ½å´©æºƒ
```

**âš ï¸ é›ªå´©æ•ˆåº”ç¤ºæ„å›¾**ï¼š
```
æ­£å¸¸é“¾è·¯ï¼š
å®¢æˆ·ç«¯ â”€â”€â†’ ç½‘å…³ â”€â”€â†’ è®¢å•æœåŠ¡ â”€â”€â†’ åº“å­˜æœåŠ¡ â”€â”€â†’ æ”¯ä»˜æœåŠ¡
  âœ…        âœ…       âœ…         âœ…        âœ…

æ•…éšœä¼ æ’­ï¼š
å®¢æˆ·ç«¯ â”€â”€â†’ ç½‘å…³ â”€â”€â†’ è®¢å•æœåŠ¡ â”€â”€â†’ åº“å­˜æœåŠ¡ â”€â”€â†’ æ”¯ä»˜æœåŠ¡âŒ
  âŒ        âŒ       âŒ         âŒ        æ•…éšœæº

ç†”æ–­ä¿æŠ¤ï¼š
å®¢æˆ·ç«¯ â”€â”€â†’ ç½‘å…³ â”€â”€â†’ è®¢å•æœåŠ¡ â”€â”€â†’ [ç†”æ–­å™¨] â”¤
  âœ…        âœ…       âœ…         å¿«é€Ÿå¤±è´¥   æ”¯ä»˜æœåŠ¡âŒ
                                      â†“
                                   è¿”å›é»˜è®¤å€¼
```

### 1.3 ç†”æ–­ä¸é™æµçš„ä»·å€¼


**ğŸ¯ ä¿æŠ¤ä½œç”¨**ï¼š
- **æ•…éšœéš”ç¦»**ï¼šé˜»æ­¢æ•…éšœä¼ æ’­ï¼Œä¿æŠ¤ä¸Šæ¸¸æœåŠ¡
- **å¿«é€Ÿå¤±è´¥**ï¼šä¸å†å°è¯•è°ƒç”¨å¤±è´¥çš„æœåŠ¡
- **è‡ªåŠ¨æ¢å¤**ï¼šæ£€æµ‹ä¸‹æ¸¸æœåŠ¡æ¢å¤åé‡æ–°å¼€å¯
- **æµé‡æ§åˆ¶**ï¼šé˜²æ­¢ç³»ç»Ÿè¿‡è½½ï¼Œä¿è¯æœåŠ¡è´¨é‡

**ğŸ’° ä¸šåŠ¡ä»·å€¼**ï¼š
- **æå‡å¯ç”¨æ€§**ï¼š99.9% â†’ 99.99%
- **æ”¹å–„ç”¨æˆ·ä½“éªŒ**ï¼šé¿å…é•¿æ—¶é—´ç­‰å¾…
- **é™ä½è¿ç»´æˆæœ¬**ï¼šå‡å°‘åŠå¤œè¢«å«é†’çš„æ¬¡æ•°
- **ä¿æŠ¤æ ¸å¿ƒåŠŸèƒ½**ï¼šç¡®ä¿ä¸»è¦ä¸šåŠ¡ä¸å—å½±å“

---

## 2. âš™ï¸ ç†”æ–­å™¨æ¨¡å¼æ·±å…¥ç†è§£


### 2.1 ç†”æ–­å™¨çš„ä¸‰ç§çŠ¶æ€


> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼šç†”æ–­å™¨å°±åƒä¸€ä¸ªæ™ºèƒ½å¼€å…³ï¼Œä¼šæ ¹æ®æœåŠ¡çš„å¥åº·çŠ¶å†µè‡ªåŠ¨å¼€å¯æˆ–å…³é—­

```
ç†”æ–­å™¨çŠ¶æ€æœºï¼š

    [æ­£å¸¸è°ƒç”¨]           [æ•…éšœå¢åŠ ]
       â†“                   â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  å…³é—­   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  æ‰“å¼€   â”‚
   â”‚ CLOSED  â”‚         â”‚  OPEN   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘                   â”‚
       â”‚    [æœåŠ¡æ¢å¤]       â”‚[ç­‰å¾…æ—¶é—´]
       â”‚       â†‘           â†“
       â””â”€â”€â”€â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â†â”€â”€â”€â”€â”˜
           â”‚ åŠæ‰“å¼€  â”‚
           â”‚HALF_OPENâ”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ å…³é—­çŠ¶æ€ï¼ˆCLOSEDï¼‰**ï¼š
- **å«ä¹‰**ï¼šæ­£å¸¸çŠ¶æ€ï¼Œè¯·æ±‚æ­£å¸¸é€šè¿‡
- **è¡Œä¸º**ï¼šç»Ÿè®¡å¤±è´¥æ¬¡æ•°å’Œå¤±è´¥ç‡
- **è½¬æ¢**ï¼šå¤±è´¥ç‡è¶…è¿‡é˜ˆå€¼ â†’ æ‰“å¼€çŠ¶æ€

```java
// ä¼ªä»£ç ç¤ºä¾‹
if (failureRate > threshold) {
    state = OPEN;
    startTimer();
}
```

**ğŸ”¸ æ‰“å¼€çŠ¶æ€ï¼ˆOPENï¼‰**ï¼š
- **å«ä¹‰**ï¼šç†”æ–­çŠ¶æ€ï¼Œæ‹’ç»æ‰€æœ‰è¯·æ±‚
- **è¡Œä¸º**ï¼šå¿«é€Ÿå¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼æˆ–æŠ›å¼‚å¸¸
- **è½¬æ¢**ï¼šç­‰å¾…è¶…æ—¶æ—¶é—´å â†’ åŠæ‰“å¼€çŠ¶æ€

**ğŸ”¸ åŠæ‰“å¼€çŠ¶æ€ï¼ˆHALF_OPENï¼‰**ï¼š
- **å«ä¹‰**ï¼šå°è¯•æ¢å¤çŠ¶æ€ï¼Œå…è®¸å°‘é‡è¯·æ±‚é€šè¿‡
- **è¡Œä¸º**ï¼šæ ¹æ®è¿™äº›è¯·æ±‚çš„ç»“æœå†³å®šä¸‹ä¸€æ­¥
- **è½¬æ¢**ï¼šæˆåŠŸ â†’ å…³é—­ï¼›å¤±è´¥ â†’ æ‰“å¼€

### 2.2 ç†”æ–­å™¨çš„å…³é”®å‚æ•°


| å‚æ•° | **ä½œç”¨** | **å…¸å‹å€¼** | **è¯´æ˜** |
|------|----------|------------|----------|
| **å¤±è´¥é˜ˆå€¼** | `è§¦å‘ç†”æ–­çš„å¤±è´¥æ¬¡æ•°` | `5æ¬¡` | `è¿ç»­5æ¬¡å¤±è´¥å°±ç†”æ–­` |
| **å¤±è´¥ç‡é˜ˆå€¼** | `è§¦å‘ç†”æ–­çš„å¤±è´¥æ¯”ä¾‹` | `50%` | `å¤±è´¥ç‡è¶…è¿‡50%å°±ç†”æ–­` |
| **æ—¶é—´çª—å£** | `ç»Ÿè®¡å¤±è´¥æ¬¡æ•°çš„æ—¶é—´æ®µ` | `10ç§’` | `10ç§’å†…çš„å¤±è´¥æ¬¡æ•°` |
| **è¶…æ—¶æ—¶é—´** | `ç†”æ–­å™¨æ‰“å¼€åçš„ç­‰å¾…æ—¶é—´` | `60ç§’` | `60ç§’åå°è¯•åŠæ‰“å¼€` |
| **åŠå¼€è¯·æ±‚æ•°** | `åŠå¼€çŠ¶æ€å…è®¸çš„è¯·æ±‚æ•°` | `3ä¸ª` | `ç”¨3ä¸ªè¯·æ±‚æµ‹è¯•æœåŠ¡çŠ¶æ€` |

### 2.3 ç†”æ–­å™¨çš„å·¥ä½œæµç¨‹


**ğŸ”„ å®Œæ•´æµç¨‹ç¤ºæ„**ï¼š
```
æ­¥éª¤1ï¼šæ­£å¸¸è°ƒç”¨é˜¶æ®µ
è¯·æ±‚ â†’ [ç†”æ–­å™¨-å…³é—­] â†’ ä¸‹æ¸¸æœåŠ¡ â†’ å“åº” âœ…
                â†“
            ç»Ÿè®¡æˆåŠŸ/å¤±è´¥

æ­¥éª¤2ï¼šæ•…éšœæ£€æµ‹é˜¶æ®µ  
è¯·æ±‚ â†’ [ç†”æ–­å™¨-å…³é—­] â†’ ä¸‹æ¸¸æœåŠ¡ â†’ è¶…æ—¶/å¼‚å¸¸ âŒ
                â†“
            å¤±è´¥è®¡æ•°++
                â†“
          å¤±è´¥ç‡ > é˜ˆå€¼ï¼Ÿ
                â†“
            ç†”æ–­å™¨æ‰“å¼€

æ­¥éª¤3ï¼šç†”æ–­ä¿æŠ¤é˜¶æ®µ
è¯·æ±‚ â†’ [ç†”æ–­å™¨-æ‰“å¼€] â†’ å¿«é€Ÿå¤±è´¥ â†’ è¿”å›é™çº§å“åº”
                â†“
            ç­‰å¾…è¶…æ—¶æ—¶é—´

æ­¥éª¤4ï¼šæ¢å¤æ£€æµ‹é˜¶æ®µ
è¯·æ±‚ â†’ [ç†”æ–­å™¨-åŠå¼€] â†’ ä¸‹æ¸¸æœåŠ¡ â†’ æµ‹è¯•ç»“æœ
                â†“                    â†“
            ç»Ÿè®¡æµ‹è¯•ç»“æœ          æˆåŠŸâ†’å…³é—­
                                å¤±è´¥â†’æ‰“å¼€
```

**ğŸ’» ç®€åŒ–ä»£ç ç†è§£**ï¼š
```java
public class SimpleCircuitBreaker {
    private State state = CLOSED;
    private int failureCount = 0;
    private long lastFailureTime = 0;
    
    public Object call() throws Exception {
        if (state == OPEN) {
            // ç†”æ–­çŠ¶æ€ï¼šå¿«é€Ÿå¤±è´¥
            if (shouldAttemptReset()) {
                state = HALF_OPEN;
            } else {
                throw new CircuitBreakerOpenException();
            }
        }
        
        try {
            // è°ƒç”¨å®é™…æœåŠ¡
            Object result = callService();
            onSuccess();
            return result;
        } catch (Exception e) {
            onFailure();
            throw e;
        }
    }
}
```

---

## 3. ğŸ¦£ Hystrixè¯¦è§£ä¸åº”ç”¨


### 3.1 Hystrixç®€ä»‹


> âš ï¸ **é‡è¦æé†’**ï¼šHystrixå·²äº2020å¹´åœæ­¢ç»´æŠ¤ï¼Œä½†å­¦ä¹ å…¶è®¾è®¡æ€æƒ³ä»æœ‰ä»·å€¼

**ğŸ”¸ ä»€ä¹ˆæ˜¯Hystrix**ï¼š
- Netflixå¼€æºçš„å®¹é”™åº“
- å®ç°äº†ç†”æ–­ã€é™æµã€éš”ç¦»ã€é™çº§ç­‰åŠŸèƒ½
- Spring Cloudæ—©æœŸçš„é»˜è®¤ç†”æ–­ç»„ä»¶

### 3.2 Hystrixæ ¸å¿ƒåŠŸèƒ½


**ğŸ›¡ï¸ å››å¤§ä¿æŠ¤æœºåˆ¶**ï¼š

```
1. ç†”æ–­ä¿æŠ¤ï¼š
   æœåŠ¡æ•…éšœæ—¶å¿«é€Ÿå¤±è´¥ï¼Œé¿å…çº§è”æ•…éšœ

2. çº¿ç¨‹éš”ç¦»ï¼š
   æ¯ä¸ªæœåŠ¡ç”¨ç‹¬ç«‹çº¿ç¨‹æ± ï¼Œæ•…éšœéš”ç¦»

3. è¶…æ—¶æ§åˆ¶ï¼š
   è®¾ç½®è°ƒç”¨è¶…æ—¶æ—¶é—´ï¼Œé¿å…æ— é™ç­‰å¾…

4. é™çº§å¤„ç†ï¼š
   æä¾›å¤‡ç”¨é€»è¾‘ï¼Œä¿è¯åŠŸèƒ½å¯ç”¨æ€§
```

**ğŸ’» Hystrixä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
@Component
public class OrderService {
    
    // ä½¿ç”¨Hystrixä¿æŠ¤æœåŠ¡è°ƒç”¨
    @HystrixCommand(
        fallbackMethod = "getOrderFallback",
        commandProperties = {
            @HystrixProperty(name = "execution.isolation.thread.timeoutInMilliseconds", value = "3000"),
            @HystrixProperty(name = "circuitBreaker.requestVolumeThreshold", value = "10"),
            @HystrixProperty(name = "circuitBreaker.errorThresholdPercentage", value = "50")
        }
    )
    public Order getOrder(String orderId) {
        // è°ƒç”¨è¿œç¨‹æœåŠ¡
        return restTemplate.getForObject("/order/" + orderId, Order.class);
    }
    
    // é™çº§æ–¹æ³•ï¼šå½“æœåŠ¡è°ƒç”¨å¤±è´¥æ—¶æ‰§è¡Œ
    public Order getOrderFallback(String orderId) {
        return Order.builder()
            .id(orderId)
            .status("æœåŠ¡æš‚æ—¶ä¸å¯ç”¨")
            .build();
    }
}
```

### 3.3 Hystrixçš„ä¼˜ç¼ºç‚¹


**âœ… ä¼˜ç‚¹**ï¼š
- **åŠŸèƒ½å…¨é¢**ï¼šç†”æ–­ã€é™æµã€é™çº§ä¸€åº”ä¿±å…¨
- **ç›‘æ§ä¸°å¯Œ**ï¼šæä¾›è¯¦ç»†çš„ç›‘æ§é¢æ¿
- **ä¹…ç»è€ƒéªŒ**ï¼šNetflixç”Ÿäº§ç¯å¢ƒéªŒè¯

**âŒ ç¼ºç‚¹**ï¼š
- **å·²åœæ­¢ç»´æŠ¤**ï¼šå®˜æ–¹ä¸å†æ›´æ–°
- **æ€§èƒ½å¼€é”€**ï¼šçº¿ç¨‹æ± æ¨¡å¼æ¶ˆè€—èµ„æº
- **é…ç½®å¤æ‚**ï¼šå‚æ•°ä¼—å¤šï¼Œè°ƒä¼˜å›°éš¾

> ğŸ”„ **æ›¿ä»£æ–¹æ¡ˆ**ï¼šç°åœ¨æ¨èä½¿ç”¨Resilience4jæˆ–Sentinel

---

## 4. ğŸ”§ Resilience4jç°ä»£åŒ–ç†”æ–­


### 4.1 Resilience4jç®€ä»‹


> ğŸ’¡ **ç°ä»£é€‰æ‹©**ï¼šResilience4jæ˜¯ä¸“ä¸ºJava 8å’ŒSpring Bootè®¾è®¡çš„è½»é‡çº§å®¹é”™åº“

**ğŸŒŸ æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- **è½»é‡çº§**ï¼šæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œçº¯Javaå®ç°
- **æ¨¡å—åŒ–**ï¼šå¯ä»¥åªä½¿ç”¨éœ€è¦çš„åŠŸèƒ½æ¨¡å—
- **å‡½æ•°å¼**ï¼šæ”¯æŒJava 8çš„å‡½æ•°å¼ç¼–ç¨‹
- **æ´»è·ƒç»´æŠ¤**ï¼šæŒç»­æ›´æ–°ï¼Œç¤¾åŒºæ´»è·ƒ

### 4.2 Resilience4jæ ¸å¿ƒæ¨¡å—


```
Resilience4jæ¨¡å—æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            åº”ç”¨ç¨‹åº                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CircuitBreaker â”‚ RateLimiter      â”‚ 
â”‚  ç†”æ–­å™¨         â”‚ é™æµå™¨           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Retry          â”‚ TimeLimiter     â”‚
â”‚  é‡è¯•           â”‚ è¶…æ—¶é™åˆ¶         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Bulkhead       â”‚ Cache           â”‚
â”‚  èˆ±å£éš”ç¦»       â”‚ ç¼“å­˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Resilience4jç†”æ–­å™¨ä½¿ç”¨


**ğŸ“¦ ä¾èµ–é…ç½®**ï¼š
```xml
<dependency>
    <groupId>io.github.resilience4j</groupId>
    <artifactId>resilience4j-spring-boot2</artifactId>
    <version>1.7.1</version>
</dependency>
```

**âš™ï¸ é…ç½®æ–‡ä»¶**ï¼š
```yaml
resilience4j:
  circuitbreaker:
    instances:
      orderService:
        # å¤±è´¥ç‡é˜ˆå€¼50%
        failureRateThreshold: 50
        # æ—¶é—´çª—å£10ç§’  
        slidingWindowSize: 10
        # æœ€å°è¯·æ±‚æ•°é‡
        minimumNumberOfCalls: 5
        # ç­‰å¾…æ—¶é—´60ç§’
        waitDurationInOpenState: 60s
        # åŠå¼€çŠ¶æ€å…è®¸è¯·æ±‚æ•°
        permittedNumberOfCallsInHalfOpenState: 3
```

**ğŸ’» ä»£ç ä½¿ç”¨**ï¼š
```java
@RestController
public class OrderController {
    
    @Autowired
    private OrderService orderService;
    
    @GetMapping("/order/{id}")
    @CircuitBreaker(name = "orderService", fallbackMethod = "fallbackOrder")
    public ResponseEntity<Order> getOrder(@PathVariable String id) {
        Order order = orderService.findById(id);
        return ResponseEntity.ok(order);
    }
    
    // é™çº§æ–¹æ³•
    public ResponseEntity<Order> fallbackOrder(String id, Exception ex) {
        Order fallbackOrder = Order.builder()
            .id(id)
            .status("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•")
            .build();
        return ResponseEntity.ok(fallbackOrder);
    }
}
```

### 4.4 Resilience4jç¼–ç¨‹å¼ä½¿ç”¨


```java
@Service
public class PaymentService {
    
    private final CircuitBreaker circuitBreaker;
    private final PaymentClient paymentClient;
    
    public PaymentService() {
        // åˆ›å»ºç†”æ–­å™¨
        this.circuitBreaker = CircuitBreaker.ofDefaults("payment");
        
        // æ³¨å†Œäº‹ä»¶ç›‘å¬
        circuitBreaker.getEventPublisher()
            .onStateTransition(event -> 
                log.info("ç†”æ–­å™¨çŠ¶æ€å˜åŒ–: {}", event));
    }
    
    public PaymentResult processPayment(PaymentRequest request) {
        // ç”¨ç†”æ–­å™¨åŒ…è£…ä¸šåŠ¡è°ƒç”¨
        Supplier<PaymentResult> decoratedSupplier = 
            CircuitBreaker.decorateSupplier(circuitBreaker, () -> {
                return paymentClient.pay(request);
            });
        
        return Try.ofSupplier(decoratedSupplier)
            .recover(throwable -> {
                log.warn("æ”¯ä»˜å¤±è´¥ï¼Œå¯ç”¨é™çº§: {}", throwable.getMessage());
                return PaymentResult.failed("æ”¯ä»˜ç³»ç»Ÿæš‚æ—¶ä¸å¯ç”¨");
            })
            .get();
    }
}
```

---

## 5. ğŸš¦ Sentinelæµé‡æ§åˆ¶


### 5.1 Sentinelç®€ä»‹


> ğŸ¯ **é˜¿é‡Œå‡ºå“**ï¼šSentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„é¢å‘äº‘åŸç”Ÿå¾®æœåŠ¡çš„é«˜å¯ç”¨æµé‡é˜²æŠ¤ç»„ä»¶

**ğŸŒŸ æ ¸å¿ƒç‰¹æ€§**ï¼š
- **ä¸°å¯Œåº”ç”¨åœºæ™¯**ï¼šç§’æ€ã€æ¶ˆæ¯å‰Šå³°ã€é›†ç¾¤æµæ§ã€å®æ—¶ç†”æ–­
- **å®Œå¤‡å®æ—¶ç›‘æ§**ï¼šåŒæ—¶æä¾›å®æ—¶ç›‘æ§åŠŸèƒ½
- **å¹¿æ³›å¼€æºç”Ÿæ€**ï¼šä¸Spring Cloudã€Dubboã€gRPCç­‰æ¡†æ¶æ•´åˆ
- **å®Œå–„SPIæ‰©å±•**ï¼šæä¾›ç®€å•æ˜“ç”¨ã€å®Œå–„çš„SPIæ‰©å±•æ¥å£

### 5.2 Sentinelæ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ èµ„æºï¼ˆResourceï¼‰**ï¼š
```
ä»€ä¹ˆæ˜¯èµ„æºï¼Ÿ
- å¯ä»¥æ˜¯æœåŠ¡æ¥å£ã€æ–¹æ³•ã€ä»£ç å—
- ä»»ä½•éœ€è¦ä¿æŠ¤çš„è°ƒç”¨éƒ½å¯ä»¥æ˜¯èµ„æº

ç¤ºä¾‹ï¼š
/api/order/create  â† æ¥å£èµ„æº
OrderService.create()  â† æ–¹æ³•èµ„æº  
sendMessage()  â† ä»£ç å—èµ„æº
```

**ğŸ”¸ è§„åˆ™ï¼ˆRuleï¼‰**ï¼š
- **æµæ§è§„åˆ™**ï¼šæ§åˆ¶æµé‡çš„è§„åˆ™
- **é™çº§è§„åˆ™**ï¼šç†”æ–­é™çº§çš„è§„åˆ™
- **çƒ­ç‚¹è§„åˆ™**ï¼šçƒ­ç‚¹å‚æ•°æµæ§
- **ç³»ç»Ÿè§„åˆ™**ï¼šç³»ç»Ÿè´Ÿè½½ä¿æŠ¤

### 5.3 Sentinelå¿«é€Ÿä½¿ç”¨


**ğŸ“¦ ä¾èµ–å¼•å…¥**ï¼š
```xml
<dependency>
    <groupId>com.alibaba.cloud</groupId>
    <artifactId>spring-cloud-starter-alibaba-sentinel</artifactId>
    <version>2021.1</version>
</dependency>
```

**ğŸ’» ä»£ç ä¿æŠ¤**ï¼š
```java
@RestController  
public class OrderController {
    
    @GetMapping("/order/list")
    @SentinelResource(
        value = "getOrderList",
        blockHandler = "handleBlock",
        fallback = "handleFallback"
    )
    public List<Order> getOrderList() {
        return orderService.getOrderList();
    }
    
    // æµæ§é™çº§å¤„ç†
    public List<Order> handleBlock(BlockException ex) {
        return Arrays.asList(
            Order.builder().message("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•").build()
        );
    }
    
    // å¼‚å¸¸é™çº§å¤„ç†  
    public List<Order> handleFallback(Throwable ex) {
        return Arrays.asList(
            Order.builder().message("æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•").build()
        );
    }
}
```

### 5.4 Sentinelæ§åˆ¶å°


**ğŸ–¥ï¸ æ§åˆ¶å°åŠŸèƒ½**ï¼š
```
å®æ—¶ç›‘æ§ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  QPS: 1205   RT: 6.3ms   é”™è¯¯: 0.1% â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚         å®æ—¶æµé‡æ›²çº¿å›¾               â”‚
â”‚    â•­â”€â•®     â•­â”€â•®                     â”‚
â”‚  â•­â”€â•¯  â•°â”€â•® â•­â”€â•¯  â•°â”€â•®                 â”‚
â”‚ â•­â•¯      â•°â”€â•¯      â•°â”€â•®               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è§„åˆ™é…ç½®ï¼š
- æµæ§è§„åˆ™ï¼šQPSä¸è¶…è¿‡100
- é™çº§è§„åˆ™ï¼šé”™è¯¯ç‡è¶…è¿‡5%ç†”æ–­
- çƒ­ç‚¹è§„åˆ™ï¼šçƒ­ç‚¹å•†å“IDé™æµ
- ç³»ç»Ÿè§„åˆ™ï¼šCPUè¶…è¿‡80%ä¿æŠ¤
```

**âš™ï¸ åŠ¨æ€è§„åˆ™é…ç½®**ï¼š
```java
@Component
public class SentinelRuleConfig {
    
    @PostConstruct
    public void initFlowRules() {
        List<FlowRule> rules = new ArrayList<>();
        
        // åˆ›å»ºæµæ§è§„åˆ™
        FlowRule rule = new FlowRule();
        rule.setResource("getOrderList");  // èµ„æºå
        rule.setGrade(RuleConstant.FLOW_GRADE_QPS);  // QPSæ¨¡å¼
        rule.setCount(20);  // QPSä¸è¶…è¿‡20
        
        rules.add(rule);
        FlowRuleManager.loadRules(rules);
        
        log.info("Sentinelæµæ§è§„åˆ™åŠ è½½å®Œæˆ");
    }
}
```

---

## 6. ğŸ”„ æœåŠ¡ç†”æ–­ä¸é™çº§


### 6.1 ç†”æ–­ä¸é™çº§çš„åŒºåˆ«


> ğŸ’¡ **æ ¸å¿ƒåŒºåˆ«**ï¼šç†”æ–­æ˜¯"æ–­å¼€å¼€å…³"ï¼Œé™çº§æ˜¯"æ¢ä¸ªæ–¹æ¡ˆ"

```
ç†”æ–­ vs é™çº§å¯¹æ¯”ï¼š

ç†”æ–­ï¼ˆCircuit Breakingï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    âŒ     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœåŠ¡A     â”‚ â”€â”€â”€â”€Ã—â”€â”€â†’  â”‚   æœåŠ¡B     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“                        æ•…éšœ
   å¿«é€Ÿå¤±è´¥                      
      
é™çº§ï¼ˆFallbackï¼‰ï¼š  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     âŒ    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœåŠ¡A     â”‚ â”€â”€â”€â”€Ã—â”€â”€â†’  â”‚   æœåŠ¡B     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“                        æ•…éšœ
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  é™çº§é€»è¾‘   â”‚ â† è¿”å›é»˜è®¤æ•°æ®
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ ç†”æ–­ï¼ˆCircuit Breakingï¼‰**ï¼š
- **ç›®çš„**ï¼šä¿æŠ¤ç³»ç»Ÿï¼Œé¿å…çº§è”æ•…éšœ
- **è¡Œä¸º**ï¼šåœæ­¢è°ƒç”¨ï¼Œå¿«é€Ÿå¤±è´¥
- **åœºæ™¯**ï¼šä¸‹æ¸¸æœåŠ¡å¤§é‡å¤±è´¥æ—¶

**ğŸ”¸ é™çº§ï¼ˆFallbackï¼‰**ï¼š
- **ç›®çš„**ï¼šä¿è¯åŠŸèƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **è¡Œä¸º**ï¼šæä¾›æ›¿ä»£æ–¹æ¡ˆ
- **åœºæ™¯**ï¼šæœåŠ¡ä¸å¯ç”¨æ—¶æä¾›åŸºç¡€åŠŸèƒ½

### 6.2 é™çº§ç­–ç•¥è®¾è®¡


**ğŸ“‹ é™çº§ç­–ç•¥åˆ†çº§**ï¼š

```
é™çº§ç­–ç•¥é‡‘å­—å¡”ï¼š

           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   æ ¸å¿ƒåŠŸèƒ½   â”‚ â† æœ€åé™çº§
           â”‚  (ä¸‹å•æ”¯ä»˜)   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
         â”‚   é‡è¦åŠŸèƒ½       â”‚ â† æ¬¡è¦é™çº§
         â”‚ (å•†å“æ¨èè¯¦æƒ…)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚      å¢å€¼åŠŸèƒ½        â”‚ â† ä¼˜å…ˆé™çº§  
       â”‚   (è¯„è®ºã€åˆ†äº«)       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| é™çº§ç­‰çº§ | **åŠŸèƒ½ç±»å‹** | **é™çº§æ–¹å¼** | **ç¤ºä¾‹** |
|----------|-------------|-------------|----------|
| **L1ä¼˜å…ˆé™çº§** | `å¢å€¼åŠŸèƒ½` | `ç›´æ¥å…³é—­` | `è¯„è®ºã€åˆ†äº«åŠŸèƒ½` |
| **L2æ¬¡è¦é™çº§** | `è¾…åŠ©åŠŸèƒ½` | `é™æ€æ•°æ®` | `å•†å“æ¨èç”¨ç¼“å­˜` |  
| **L3ä¿åº•é™çº§** | `æ ¸å¿ƒåŠŸèƒ½` | `ç®€åŒ–æµç¨‹` | `ä¸‹å•æ”¹ä¸ºç¦»çº¿å¤„ç†` |

### 6.3 é™çº§å®ç°æ–¹æ¡ˆ


**ğŸ’» å¤šçº§é™çº§ä»£ç ç¤ºä¾‹**ï¼š
```java
@Service
public class ProductService {
    
    @SentinelResource(value = "getProductDetail", fallback = "getProductFallback")
    public ProductDetail getProductDetail(String productId) {
        try {
            // L0: æ­£å¸¸è°ƒç”¨
            return productClient.getDetail(productId);
        } catch (Exception e) {
            throw e; // äº¤ç»™Sentinelå¤„ç†
        }
    }
    
    // L1: ç¬¬ä¸€çº§é™çº§ - è¿”å›ç¼“å­˜æ•°æ®
    public ProductDetail getProductFallback(String productId, Throwable ex) {
        ProductDetail cached = redisTemplate.opsForValue().get("product:" + productId);
        if (cached != null) {
            cached.setMessage("æ•°æ®æ¥è‡ªç¼“å­˜");
            return cached;
        }
        
        // L2: ç¬¬äºŒçº§é™çº§ - è¿”å›åŸºç¡€ä¿¡æ¯
        return ProductDetail.builder()
            .id(productId)
            .name("å•†å“è¯¦æƒ…æš‚æ—¶æ— æ³•è·å–")
            .price(0.0)
            .status("UNAVAILABLE")
            .message("æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•")
            .build();
    }
}
```

**ğŸ”„ è‡ªåŠ¨é™çº§æ¢å¤**ï¼š
```java
@Component
public class CircuitBreakerHealthChecker {
    
    @Scheduled(fixedRate = 30000) // 30ç§’æ£€æŸ¥ä¸€æ¬¡
    public void healthCheck() {
        // æ£€æŸ¥ä¸‹æ¸¸æœåŠ¡å¥åº·çŠ¶æ€
        boolean isHealthy = checkDownstreamHealth();
        
        if (isHealthy) {
            // æœåŠ¡æ¢å¤ï¼Œé‡ç½®ç†”æ–­å™¨
            resetCircuitBreaker();
            log.info("ä¸‹æ¸¸æœåŠ¡å·²æ¢å¤ï¼Œç†”æ–­å™¨é‡ç½®");
        }
    }
    
    private boolean checkDownstreamHealth() {
        try {
            // å‘é€å¥åº·æ£€æŸ¥è¯·æ±‚
            String response = restTemplate.getForObject("/health", String.class);
            return "OK".equals(response);
        } catch (Exception e) {
            return false;
        }
    }
}
```

---

## 7. ğŸš¥ é™æµç­–ç•¥ä¸å®ç°


### 7.1 é™æµåŸºæœ¬æ¦‚å¿µ


> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**ï¼šé™æµå°±åƒé«˜é€Ÿå…¬è·¯æ”¶è´¹ç«™ï¼Œæ§åˆ¶å•ä½æ—¶é—´å†…é€šè¿‡çš„è½¦è¾†æ•°é‡

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦é™æµ**ï¼š
- **ä¿æŠ¤ç³»ç»Ÿ**ï¼šé˜²æ­¢çªå‘æµé‡å‹å®æœåŠ¡å™¨
- **ä¿è¯å…¬å¹³**ï¼šè®©æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½å¾—åˆ°åˆç†å“åº”
- **èŠ‚çº¦æˆæœ¬**ï¼šé¿å…ä¸ºäº†åº”å¯¹å³°å€¼è€Œè¿‡åº¦æ‰©å®¹

### 7.2 å¸¸è§é™æµç®—æ³•


**ğŸ“Š å››ç§ç»å…¸é™æµç®—æ³•**ï¼š

```
1. å›ºå®šçª—å£ç®—æ³•ï¼š
æ—¶é—´: 0s    1s    2s    3s    4s
è¯·æ±‚: |--100-|-100-|-100-|-100-|
é—®é¢˜: ä¸´ç•Œé—®é¢˜ï¼Œå¯èƒ½ç¬é—´200è¯·æ±‚

2. æ»‘åŠ¨çª—å£ç®—æ³•ï¼š  
      [---çª—å£---]
æ—¶é—´:  0  1  2  3  4  5  6
è¯·æ±‚:  |20|30|25|25|15|35|40
ç»Ÿè®¡:  100ä¸ª â†’ 95ä¸ª â†’ 105ä¸ª

3. ä»¤ç‰Œæ¡¶ç®—æ³•ï¼š
     [ä»¤ç‰Œæ¡¶] 
       â†‘     â†“
   å®šæœŸæ”¾ä»¤ç‰Œ  å–ä»¤ç‰Œå¤„ç†è¯·æ±‚
   æ¡¶æ»¡åœæ­¢æ”¾  æ— ä»¤ç‰Œæ‹’ç»
   
4. æ¼æ¡¶ç®—æ³•ï¼š
   è¯·æ±‚â†’[æ¼æ¡¶]â†’å›ºå®šé€Ÿç‡è¾“å‡º
       æº¢å‡ºä¸¢å¼ƒ   åŒ€é€Ÿå¤„ç†
```

### 7.3 Sentinelé™æµå®ç°


**âš™ï¸ QPSé™æµé…ç½®**ï¼š
```java
@RestController
public class ApiController {
    
    @GetMapping("/api/search")
    @SentinelResource(
        value = "search-api",
        blockHandler = "searchBlocked"
    )
    public Result<List<Product>> search(@RequestParam String keyword) {
        return productService.search(keyword);
    }
    
    // é™æµå¤„ç†æ–¹æ³•
    public Result<List<Product>> searchBlocked(String keyword, BlockException ex) {
        return Result.fail("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

**ğŸ“‹ è§„åˆ™é…ç½®**ï¼š
```java
@Configuration
public class SentinelConfig {
    
    @PostConstruct
    public void initRules() {
        // QPSé™æµè§„åˆ™
        List<FlowRule> flowRules = new ArrayList<>();
        
        FlowRule rule1 = new FlowRule();
        rule1.setResource("search-api");
        rule1.setGrade(RuleConstant.FLOW_GRADE_QPS);
        rule1.setCount(100); // æ¯ç§’æœ€å¤š100ä¸ªè¯·æ±‚
        rule1.setStrategy(RuleConstant.STRATEGY_DIRECT);
        
        flowRules.add(rule1);
        FlowRuleManager.loadRules(flowRules);
    }
}
```

### 7.4 çƒ­ç‚¹å‚æ•°é™æµ


**ğŸ”¥ çƒ­ç‚¹å‚æ•°é™æµåœºæ™¯**ï¼š
```
åœºæ™¯ï¼šå•†å“è¯¦æƒ…æ¥å£
æ­£å¸¸å•†å“ï¼š/product/123 â†’ å…è®¸é€šè¿‡  
çƒ­é—¨å•†å“ï¼š/product/999 â†’ éœ€è¦ç‰¹æ®Šé™æµ

åŸå› ï¼š
- æ™®é€šå•†å“è®¿é—®é‡ä¸å¤§
- çƒ­é—¨å•†å“ï¼ˆçˆ†æ¬¾ï¼‰è®¿é—®é‡æ¿€å¢  
- éœ€è¦å¯¹çƒ­é—¨å‚æ•°å•ç‹¬é™æµ
```

**ğŸ’» çƒ­ç‚¹é™æµå®ç°**ï¼š
```java
@GetMapping("/product/{id}")
@SentinelResource(
    value = "getProduct",
    blockHandler = "productBlocked"
)
public Product getProduct(@PathVariable String id) {
    return productService.getById(id);
}

// çƒ­ç‚¹å‚æ•°è§„åˆ™é…ç½®
@PostConstruct  
public void initHotspotRules() {
    List<ParamFlowRule> rules = new ArrayList<>();
    
    ParamFlowRule rule = new ParamFlowRule();
    rule.setResource("getProduct");
    rule.setParamIdx(0); // ç¬¬0ä¸ªå‚æ•°(å•†å“ID)
    rule.setCount(20);   // é»˜è®¤æ¯ç§’20ä¸ªè¯·æ±‚
    rule.setGrade(RuleConstant.FLOW_GRADE_QPS);
    
    // ç‰¹æ®Šå‚æ•°é™æµ  
    List<ParamFlowItem> items = new ArrayList<>();
    ParamFlowItem item = new ParamFlowItem();
    item.setObject("999"); // å•†å“IDä¸º999
    item.setCount(5);      // æ¯ç§’åªå…è®¸5ä¸ªè¯·æ±‚
    items.add(item);
    
    rule.setParamFlowItemList(items);
    rules.add(rule);
    
    ParamFlowRuleManager.loadRules(rules);
}
```

### 7.5 ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤


**ğŸ–¥ï¸ ç³»ç»Ÿçº§ä¿æŠ¤æŒ‡æ ‡**ï¼š

```
ç³»ç»Ÿä¿æŠ¤ç»´åº¦ï¼š

CPUä½¿ç”¨ç‡ â”€â”€â”€â”
            â”‚
å†…å­˜ä½¿ç”¨ç‡ â”€â”€â”¤
            â”œâ†’ ç³»ç»Ÿè´Ÿè½½è¯„ä¼°
ç½‘ç»œI/O â”€â”€â”€â”€â”¤
            â”‚
ç£ç›˜I/O â”€â”€â”€â”€â”˜

ä¿æŠ¤ç­–ç•¥ï¼š
- CPU > 80% â†’ æ‹’ç»æ–°è¯·æ±‚
- å†…å­˜ > 85% â†’ é™çº§éæ ¸å¿ƒåŠŸèƒ½  
- å“åº”æ—¶é—´ > 1s â†’ å¯ç”¨ç†”æ–­
```

**âš™ï¸ ç³»ç»Ÿè§„åˆ™é…ç½®**ï¼š
```java
@PostConstruct
public void initSystemRules() {
    List<SystemRule> rules = new ArrayList<>();
    
    SystemRule cpuRule = new SystemRule();
    cpuRule.setHighestSystemLoad(3.0); // ç³»ç»Ÿè´Ÿè½½ä¸è¶…è¿‡3.0
    
    SystemRule qpsRule = new SystemRule();  
    qpsRule.setQps(2000); // å…¨å±€QPSä¸è¶…è¿‡2000
    
    SystemRule rtRule = new SystemRule();
    rtRule.setAvgRt(20); // å¹³å‡å“åº”æ—¶é—´ä¸è¶…è¿‡20ms
    
    rules.add(cpuRule);
    rules.add(qpsRule);
    rules.add(rtRule);
    
    SystemRuleManager.loadRules(rules);
}
```

---

## 8. ğŸ“Š ç†”æ–­ç›‘æ§ä¸è¿ç»´


### 8.1 ç›‘æ§æŒ‡æ ‡ä½“ç³»


> ğŸ“ˆ **æ ¸å¿ƒç†å¿µ**ï¼šç›‘æ§æ˜¯ç†”æ–­æœºåˆ¶çš„çœ¼ç›ï¼Œæ²¡æœ‰ç›‘æ§çš„ç†”æ–­æ˜¯ç›²ç›®çš„

**ğŸ¯ å…³é”®ç›‘æ§æŒ‡æ ‡**ï¼š

```
ä¸šåŠ¡æŒ‡æ ‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QPS    â”‚ RT     â”‚ æˆåŠŸç‡  â”‚é”™è¯¯ç‡â”‚
â”‚ 1205   â”‚ 23ms   â”‚ 99.2%  â”‚0.8% â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æŠ€æœ¯æŒ‡æ ‡ï¼š  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç†”æ–­æ¬¡æ•°â”‚åŠå¼€æ¬¡æ•°â”‚æ¢å¤æ¬¡æ•°â”‚è¶…æ—¶æ•°â”‚
â”‚   12    â”‚   3    â”‚   8    â”‚  45  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç³»ç»ŸæŒ‡æ ‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPU    â”‚ Memory â”‚ è¿æ¥æ•°  â”‚çº¿ç¨‹æ•°â”‚
â”‚ 65%    â”‚ 78%    â”‚  342   â”‚ 128 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Sentinelç›‘æ§é¢æ¿


**ğŸ–¥ï¸ æ§åˆ¶å°åŠŸèƒ½å±•ç¤º**ï¼š
```
å®æ—¶ç›‘æ§é¡µé¢ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” èµ„æºå: order-service           â”‚
â”‚ âš¡ QPS: 245  ğŸ“ˆ å“åº”æ—¶é—´: 15ms      â”‚  
â”‚ âœ… é€šè¿‡QPS: 240  âŒ æ‹’ç»QPS: 5     â”‚
â”‚                                     â”‚
â”‚     â•­â”€â•®   â•­â”€â•®   â•­â”€â•®                â”‚
â”‚   â•­â”€â•¯  â•°â”€â•¯  â•°â”€â•¯  â•°â”€â•®              â”‚
â”‚ â•­â”€â•¯              â•°â”€â•®            â”‚
â”‚â•±                   â•²           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç°‡ç‚¹é“¾è·¯é¡µé¢ï¼š
order-service
â”œâ”€ GET:/order/{id}    [QPS: 120]
â”œâ”€ POST:/order        [QPS: 80] 
â””â”€ PUT:/order/{id}    [QPS: 45]
```

**ğŸ“Š ç›‘æ§é…ç½®**ï¼š
```java
@Component  
public class SentinelMetricsCollector {
    
    @Autowired
    private MeterRegistry meterRegistry;
    
    @EventListener
    public void handleCircuitBreakerEvent(CircuitBreakerOnStateTransitionEvent event) {
        // è®°å½•ç†”æ–­çŠ¶æ€å˜åŒ–
        meterRegistry.counter("circuit.breaker.state.change",
            "service", event.getCircuitBreakerName(),
            "from", event.getStateTransition().getFromState().name(),
            "to", event.getStateTransition().getToState().name()
        ).increment();
        
        log.info("ç†”æ–­å™¨çŠ¶æ€å˜åŒ–: {} {} -> {}", 
            event.getCircuitBreakerName(),
            event.getStateTransition().getFromState(),
            event.getStateTransition().getToState());
    }
}
```

### 8.3 å‘Šè­¦é…ç½®


**ğŸš¨ å‘Šè­¦è§„åˆ™è®¾è®¡**ï¼š

```yaml
# å‘Šè­¦é…ç½®ç¤ºä¾‹
alerting:
  rules:
    - name: ç†”æ–­å™¨æ‰“å¼€å‘Šè­¦
      condition: circuit_breaker_state == "OPEN"
      duration: 30s
      severity: critical
      message: "æœåŠ¡{{$labels.service}}ç†”æ–­å™¨å·²æ‰“å¼€"
      
    - name: é”™è¯¯ç‡è¿‡é«˜å‘Šè­¦  
      condition: error_rate > 0.05
      duration: 60s
      severity: warning
      message: "æœåŠ¡{{$labels.service}}é”™è¯¯ç‡{{$value}}è¶…è¿‡5%"
      
    - name: å“åº”æ—¶é—´è¿‡é•¿å‘Šè­¦
      condition: avg_response_time > 1000
      duration: 120s  
      severity: warning
      message: "æœåŠ¡{{$labels.service}}å¹³å‡å“åº”æ—¶é—´{{$value}}ms"
```

**ğŸ’» è‡ªå®šä¹‰å‘Šè­¦ä»£ç **ï¼š
```java
@Component
public class AlertManager {
    
    private final Logger logger = LoggerFactory.getLogger(AlertManager.class);
    
    @EventListener
    public void onCircuitBreakerOpen(CircuitBreakerOnStateTransitionEvent event) {
        if (event.getStateTransition().getToState() == CircuitBreaker.State.OPEN) {
            // å‘é€å‘Šè­¦
            sendAlert(AlertLevel.CRITICAL, 
                "ç†”æ–­å™¨æ‰“å¼€", 
                String.format("æœåŠ¡ %s çš„ç†”æ–­å™¨å·²æ‰“å¼€ï¼Œè¯·åŠæ—¶å¤„ç†", 
                    event.getCircuitBreakerName()));
        }
    }
    
    @Scheduled(fixedRate = 60000) // æ¯åˆ†é’Ÿæ£€æŸ¥
    public void checkMetrics() {
        // è·å–å„æœåŠ¡æŒ‡æ ‡
        Map<String, ServiceMetrics> metrics = getServiceMetrics();
        
        for (Map.Entry<String, ServiceMetrics> entry : metrics.entrySet()) {
            String service = entry.getKey();
            ServiceMetrics metric = entry.getValue();
            
            // æ£€æŸ¥é”™è¯¯ç‡
            if (metric.getErrorRate() > 0.05) {
                sendAlert(AlertLevel.WARNING,
                    "é”™è¯¯ç‡è¿‡é«˜",
                    String.format("æœåŠ¡ %s é”™è¯¯ç‡ %.2f%% è¶…è¿‡é˜ˆå€¼", 
                        service, metric.getErrorRate() * 100));
            }
            
            // æ£€æŸ¥å“åº”æ—¶é—´
            if (metric.getAvgResponseTime() > 1000) {
                sendAlert(AlertLevel.WARNING,
                    "å“åº”æ—¶é—´è¿‡é•¿", 
                    String.format("æœåŠ¡ %s å¹³å‡å“åº”æ—¶é—´ %dms è¶…è¿‡é˜ˆå€¼",
                        service, metric.getAvgResponseTime()));
            }
        }
    }
}
```

### 8.4 è¿ç»´æœ€ä½³å®è·µ


**ğŸ”§ è¿ç»´æ“ä½œæŒ‡å—**ï¼š

```
æ—¥å¸¸è¿ç»´æ£€æŸ¥æ¸…å•ï¼š

ğŸ“Š ç›‘æ§æ£€æŸ¥ (æ¯æ—¥)ï¼š
â–¡ æŸ¥çœ‹ç†”æ–­æ¬¡æ•°è¶‹åŠ¿
â–¡ æ£€æŸ¥é”™è¯¯ç‡æ˜¯å¦æ­£å¸¸
â–¡ ç¡®è®¤å“åº”æ—¶é—´ç¨³å®š
â–¡ éªŒè¯é™æµè§„åˆ™æœ‰æ•ˆæ€§

ğŸš¨ å‘Šè­¦å“åº” (å®æ—¶)ï¼š
â–¡ ç†”æ–­å™¨æ‰“å¼€ â†’ æ£€æŸ¥ä¸‹æ¸¸æœåŠ¡
â–¡ é”™è¯¯ç‡æ¿€å¢ â†’ æŸ¥çœ‹é”™è¯¯æ—¥å¿—  
â–¡ å“åº”æ—¶é—´é•¿ â†’ åˆ†ææ€§èƒ½ç“¶é¢ˆ
â–¡ æµé‡å¼‚å¸¸ â†’ ç¡®è®¤æ˜¯å¦æ”»å‡»

âš™ï¸ è§„åˆ™è°ƒä¼˜ (å‘¨åº¦)ï¼š
â–¡ æ ¹æ®å†å²æ•°æ®è°ƒæ•´é˜ˆå€¼
â–¡ ä¼˜åŒ–ç†”æ–­å’Œé™æµç­–ç•¥
â–¡ æ›´æ–°é™çº§é€»è¾‘
â–¡ æµ‹è¯•æ•…éšœæ¢å¤æµç¨‹
```

**ğŸ“‹ æ•…éšœå¤„ç†æµç¨‹**ï¼š
```
æ•…éšœå‘ç° â†’ å½±å“è¯„ä¼° â†’ åº”æ€¥å¤„ç† â†’ æ ¹å› åˆ†æ â†’ é¢„é˜²æ”¹è¿›

1. æ•…éšœå‘ç°ï¼š
   - ç›‘æ§å‘Šè­¦è§¦å‘
   - ç”¨æˆ·åé¦ˆå¼‚å¸¸
   - ç³»ç»ŸæŒ‡æ ‡å¼‚å¸¸

2. å½±å“è¯„ä¼°ï¼š
   - å½±å“ç”¨æˆ·æ•°é‡
   - ä¸šåŠ¡å½±å“ç¨‹åº¦  
   - é¢„è®¡æ¢å¤æ—¶é—´

3. åº”æ€¥å¤„ç†ï¼š
   - æ‰‹åŠ¨é™çº§éæ ¸å¿ƒåŠŸèƒ½
   - è°ƒæ•´é™æµé˜ˆå€¼
   - é‡å¯æ•…éšœæœåŠ¡
   - åˆ‡æ¢å¤‡ç”¨æ–¹æ¡ˆ

4. æ ¹å› åˆ†æï¼š
   - åˆ†æç›‘æ§æ•°æ®
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—
   - æ£€æŸ¥ç³»ç»Ÿèµ„æº
   - æ¢³ç†è°ƒç”¨é“¾è·¯

5. é¢„é˜²æ”¹è¿›ï¼š
   - å®Œå–„ç›‘æ§è¦†ç›–
   - ä¼˜åŒ–ç†”æ–­ç­–ç•¥
   - åŠ å¼ºå®¹é‡è§„åˆ’
   - åˆ¶å®šé¢„æ¡ˆæµç¨‹
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ ç†”æ–­ä¸é™æµï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸¤å¤§ä¿æŠ¤æœºåˆ¶
ğŸ”¸ ç†”æ–­å™¨æ¨¡å¼ï¼šä¸‰çŠ¶æ€(å…³é—­/æ‰“å¼€/åŠå¼€)è‡ªåŠ¨åˆ‡æ¢
ğŸ”¸ æœåŠ¡é™çº§ï¼šæä¾›å¤‡ç”¨æ–¹æ¡ˆä¿è¯åŸºæœ¬åŠŸèƒ½
ğŸ”¸ é™æµç®—æ³•ï¼šå›ºå®šçª—å£ã€æ»‘åŠ¨çª—å£ã€ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶
ğŸ”¸ ç›‘æ§å‘Šè­¦ï¼šå®æ—¶ç›‘æ§æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç†”æ–­çš„æœ¬è´¨**ï¼š
```
æ ¸å¿ƒæ€æƒ³ï¼š
å¿«é€Ÿå¤±è´¥ â†’ é¿å…çº§è”æ•…éšœ â†’ ä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§

ç±»æ¯”ç†è§£ï¼š
å®¶ç”¨ç”µè·¯ä¿é™©ä¸ = å¾®æœåŠ¡ç†”æ–­å™¨
ç”µæµè¿‡è½½è·³é—¸ = è¯·æ±‚å¤±è´¥ç†”æ–­
æ‰‹åŠ¨åˆé—¸æ¢å¤ = è‡ªåŠ¨æ£€æµ‹æ¢å¤
```

**ğŸ”¹ é™æµçš„ç­–ç•¥**ï¼š
```
é™æµå±‚æ¬¡ï¼š
ç½‘å…³å±‚é™æµ â†’ ä¿æŠ¤æ•´ä¸ªç³»ç»Ÿ
æœåŠ¡å±‚é™æµ â†’ ä¿æŠ¤å•ä¸ªæœåŠ¡  
æ–¹æ³•å±‚é™æµ â†’ ä¿æŠ¤å…·ä½“æ¥å£
å‚æ•°å±‚é™æµ â†’ ä¿æŠ¤çƒ­ç‚¹èµ„æº
```

**ğŸ”¹ é™çº§çš„è®¾è®¡**ï¼š
```
é™çº§åŸåˆ™ï¼š
æ ¸å¿ƒåŠŸèƒ½æœ€åé™çº§
è¾…åŠ©åŠŸèƒ½ä¼˜å…ˆé™çº§
ç”¨æˆ·ä½“éªŒå¹³æ»‘è¿‡æ¸¡
æ•°æ®ä¸€è‡´æ€§ä¿è¯
```

### 9.3 æŠ€æœ¯é€‰å‹æŒ‡å¯¼


| **æŠ€æœ¯æ–¹æ¡ˆ** | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŠ¿** | **åŠ£åŠ¿** |
|-------------|-------------|----------|----------|
| **Hystrix** | `è€é¡¹ç›®ç»´æŠ¤` | `åŠŸèƒ½å…¨é¢ï¼Œç»éªŒæˆç†Ÿ` | `å·²åœæ­¢ç»´æŠ¤` |
| **Resilience4j** | `Spring Booté¡¹ç›®` | `è½»é‡çº§ï¼Œå‡½æ•°å¼ç¼–ç¨‹` | `ç”Ÿæ€ç›¸å¯¹è¾ƒå°` |
| **Sentinel** | `é˜¿é‡Œç³»æŠ€æœ¯æ ˆ` | `åŠŸèƒ½ä¸°å¯Œï¼Œå®æ—¶ç›‘æ§` | `ä¸é˜¿é‡Œäº‘ç»‘å®šè¾ƒæ·±` |

### 9.4 å®è·µåº”ç”¨è¦ç‚¹


**ğŸ’» å¼€å‘é˜¶æ®µ**ï¼š
- **æ³¨è§£ä¼˜å…ˆ**ï¼šä½¿ç”¨æ³¨è§£æ–¹å¼ç®€åŒ–é…ç½®
- **é™çº§è®¾è®¡**ï¼šæå‰è®¾è®¡å¥½é™çº§é€»è¾‘
- **å‚æ•°è°ƒä¼˜**ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è°ƒæ•´å‚æ•°
- **å•å…ƒæµ‹è¯•**ï¼šç¼–å†™ç†”æ–­å’Œé™æµçš„æµ‹è¯•ç”¨ä¾‹

**ğŸš€ éƒ¨ç½²é˜¶æ®µ**ï¼š
- **ç›‘æ§æ­å»º**ï¼šéƒ¨ç½²ç›‘æ§é¢æ¿å’Œå‘Šè­¦
- **å‹åŠ›æµ‹è¯•**ï¼šéªŒè¯ç†”æ–­å’Œé™æµçš„æ•ˆæœ
- **é¢„æ¡ˆå‡†å¤‡**ï¼šåˆ¶å®šæ•…éšœåº”æ€¥é¢„æ¡ˆ
- **æ–‡æ¡£å®Œå–„**ï¼šè®°å½•é…ç½®å’Œæ“ä½œæ‰‹å†Œ

**ğŸ”§ è¿ç»´é˜¶æ®µ**ï¼š
- **æŒ‡æ ‡ç›‘æ§**ï¼šå…³æ³¨QPSã€RTã€é”™è¯¯ç‡ç­‰å…³é”®æŒ‡æ ‡
- **é˜ˆå€¼è°ƒä¼˜**ï¼šæ ¹æ®å†å²æ•°æ®æŒç»­ä¼˜åŒ–é˜ˆå€¼
- **æ•…éšœæ¼”ç»ƒ**ï¼šå®šæœŸè¿›è¡Œæ•…éšœæ¼”ç»ƒ
- **ç»éªŒæ€»ç»“**ï¼šç§¯ç´¯æ•…éšœå¤„ç†ç»éªŒ

### 9.5 å¸¸è§é—®é¢˜ä¸è§£å†³


**â“ å¸¸è§é—®é¢˜**ï¼š

```
Q1: ç†”æ–­å™¨ä¸€ç›´æ‰“å¼€ä¸æ¢å¤æ€ä¹ˆåŠï¼Ÿ
A1: æ£€æŸ¥ä¸‹æ¸¸æœåŠ¡æ˜¯å¦çœŸçš„æ¢å¤ï¼Œç¡®è®¤åŠå¼€çŠ¶æ€çš„æµ‹è¯•è¯·æ±‚é…ç½®

Q2: é™æµè§„åˆ™é…ç½®åä¸ç”Ÿæ•ˆï¼Ÿ
A2: ç¡®è®¤èµ„æºåæ˜¯å¦æ­£ç¡®ï¼Œæ£€æŸ¥è§„åˆ™æ˜¯å¦æ­£ç¡®åŠ è½½

Q3: é™çº§æ–¹æ³•æ²¡æœ‰è¢«è°ƒç”¨ï¼Ÿ
A3: æ£€æŸ¥é™çº§æ–¹æ³•çš„ç­¾åæ˜¯å¦ä¸åŸæ–¹æ³•åŒ¹é…

Q4: ç›‘æ§æ•°æ®ä¸å‡†ç¡®ï¼Ÿ
A4: ç¡®è®¤æ—¶é—´çª—å£é…ç½®ï¼Œæ£€æŸ¥ç»Ÿè®¡ç®—æ³•æ˜¯å¦åˆé€‚
```

**ğŸ”‘ æˆåŠŸè¦ç´ **ï¼š
- **ä¸šåŠ¡ç†è§£**ï¼šæ·±å…¥ç†è§£ä¸šåŠ¡æµç¨‹å’Œå…³é”®è·¯å¾„
- **åˆç†é…ç½®**ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è®¾ç½®åˆé€‚çš„é˜ˆå€¼
- **å®Œå–„ç›‘æ§**ï¼šå»ºç«‹å®Œæ•´çš„ç›‘æ§å’Œå‘Šè­¦ä½“ç³»  
- **æŒç»­ä¼˜åŒ–**ï¼šæ ¹æ®å®é™…è¿è¡Œæƒ…å†µä¸æ–­è°ƒä¼˜

### 9.6 æœªæ¥å‘å±•è¶‹åŠ¿


```
æŠ€æœ¯å‘å±•æ–¹å‘ï¼š
ğŸ”¸ äº‘åŸç”Ÿé›†æˆï¼šä¸K8sã€Service Meshæ·±åº¦èåˆ
ğŸ”¸ æ™ºèƒ½åŒ–ç­–ç•¥ï¼šåŸºäºAIçš„è‡ªé€‚åº”ç†”æ–­å’Œé™æµ  
ğŸ”¸ å¤šäº‘æ”¯æŒï¼šæ”¯æŒå¤šäº‘ç¯å¢ƒä¸‹çš„æµé‡æ²»ç†
ğŸ”¸ å¯è§‚æµ‹æ€§ï¼šæ›´å¼ºçš„é“¾è·¯è¿½è¸ªå’Œæ ¹å› åˆ†æ
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- ç†”æ–­ä¿ç³»ç»Ÿï¼Œé™æµæ§æµé‡ï¼Œé™çº§ä¿åŠŸèƒ½ï¼Œç›‘æ§çœ‹å…¨å±€
- ä¸‰æ€è‡ªåˆ‡æ¢ï¼Œå¿«é€Ÿä¸”æ™ºèƒ½ï¼Œé˜ˆå€¼éœ€åˆç†ï¼Œé¢„æ¡ˆè¦å®Œå–„
- Hystrixå·²è¿‡æ—¶ï¼ŒResilience4jè½»é‡ï¼ŒSentinelåŠŸèƒ½å…¨
- è¿ç»´é‡ç›‘æ§ï¼Œè°ƒä¼˜é æ•°æ®ï¼Œæ¼”ç»ƒå¸¸è¿›è¡Œï¼Œç»éªŒéœ€ç§¯ç´¯

> ğŸ¯ **å­¦ä¹ å»ºè®®**ï¼šå…ˆç†è§£æ¦‚å¿µå’ŒåŸç†ï¼Œå†åŠ¨æ‰‹å®è·µå„ç§å·¥å…·ï¼Œæœ€åç»“åˆä¸šåŠ¡åœºæ™¯è¿›è¡Œè°ƒä¼˜ï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£æŒæ¡å¾®æœåŠ¡çš„ç†”æ–­ä¸é™æµæŠ€æœ¯ã€‚