---
title: 4ã€ssh-è¿æ¥é…ç½®
---
## ğŸ“š ç›®å½•

1. [SSHè¿æ¥åŸºç¡€æ¦‚å¿µ](#1-SSHè¿æ¥åŸºç¡€æ¦‚å¿µ)
2. [SSHå¯†é’¥å¯¹ç”Ÿæˆä¸ç®¡ç†](#2-SSHå¯†é’¥å¯¹ç”Ÿæˆä¸ç®¡ç†)
3. [å…¬é’¥åˆ†å‘ä¸å…å¯†ç™»å½•](#3-å…¬é’¥åˆ†å‘ä¸å…å¯†ç™»å½•)
4. [SSHé…ç½®æ–‡ä»¶ä¼˜åŒ–](#4-SSHé…ç½®æ–‡ä»¶ä¼˜åŒ–)
5. [Ansible SSHè¿æ¥é…ç½®](#5-Ansible-SSHè¿æ¥é…ç½®)
6. [é«˜çº§è¿æ¥é…ç½®](#6-é«˜çº§è¿æ¥é…ç½®)
7. [æ•…éšœæ’æŸ¥ä¸ä¼˜åŒ–](#7-æ•…éšœæ’æŸ¥ä¸ä¼˜åŒ–)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” SSHè¿æ¥åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯SSHè¿æ¥

**SSH (Secure Shell)** æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºåœ¨ä¸å®‰å…¨çš„ç½‘ç»œä¸­å®‰å…¨åœ°è®¿é—®è¿œç¨‹è®¡ç®—æœºã€‚

**ğŸ”¸ æ ¸å¿ƒä½œç”¨**
```
æ•°æ®åŠ å¯†ï¼šæ‰€æœ‰ä¼ è¾“æ•°æ®éƒ½ç»è¿‡åŠ å¯†å¤„ç†
èº«ä»½éªŒè¯ï¼šç¡®ä¿è¿æ¥åˆ°æ­£ç¡®çš„æœåŠ¡å™¨
è¿œç¨‹æ§åˆ¶ï¼šå¯ä»¥å®‰å…¨åœ°æ‰§è¡Œè¿œç¨‹å‘½ä»¤
æ–‡ä»¶ä¼ è¾“ï¼šæ”¯æŒå®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
```

### 1.2 SSHè®¤è¯æ–¹å¼å¯¹æ¯”


| è®¤è¯æ–¹å¼ | **å®‰å…¨æ€§** | **ä¾¿æ·æ€§** | **é€‚ç”¨åœºæ™¯** |
|---------|-----------|-----------|-------------|
| ğŸ”‘ **å¯†é’¥è®¤è¯** | `æé«˜` | `é«˜ï¼ˆå…å¯†ï¼‰` | `è‡ªåŠ¨åŒ–è¿ç»´ã€æ‰¹é‡æ“ä½œ` |
| ğŸ”’ **å¯†ç è®¤è¯** | `ä¸­ç­‰` | `ä¸­ç­‰` | `ä¸´æ—¶è®¿é—®ã€å°‘é‡ä¸»æœº` |
| ğŸ“± **åŒå› ç´ è®¤è¯** | `æœ€é«˜` | `ä½` | `é«˜å®‰å…¨è¦æ±‚ç¯å¢ƒ` |

### 1.3 Ansibleä¸ºä»€ä¹ˆéœ€è¦SSH

**Ansibleçš„å·¥ä½œåŸç†**ï¼š
- Ansibleæ˜¯**æ— ä»£ç†**æ¶æ„
- é€šè¿‡SSHè¿æ¥åˆ°ç›®æ ‡ä¸»æœºæ‰§è¡Œä»»åŠ¡
- éœ€è¦ç¨³å®šã€å¿«é€Ÿçš„SSHè¿æ¥
- æ‰¹é‡æ“ä½œæ—¶éœ€è¦å…å¯†ç™»å½•

---

## 2. ğŸ”‘ SSHå¯†é’¥å¯¹ç”Ÿæˆä¸ç®¡ç†


### 2.1 ssh-keygenå‘½ä»¤è¯¦è§£


**ğŸ”¸ åŸºæœ¬è¯­æ³•**
```bash
ssh-keygen [é€‰é¡¹]
```

**ğŸ“‹ å¸¸ç”¨å‚æ•°è¯´æ˜**
- `-t`ï¼šæŒ‡å®šå¯†é’¥ç±»å‹ï¼ˆrsaã€ed25519ã€ecdsaç­‰ï¼‰
- `-b`ï¼šæŒ‡å®šå¯†é’¥é•¿åº¦ï¼ˆä½æ•°ï¼‰
- `-f`ï¼šæŒ‡å®šå¯†é’¥æ–‡ä»¶è·¯å¾„
- `-C`ï¼šæ·»åŠ æ³¨é‡Šï¼ˆé€šå¸¸æ˜¯é‚®ç®±ï¼‰
- `-N`ï¼šè®¾ç½®å¯†ç çŸ­è¯­

### 2.2 ç”ŸæˆSSHå¯†é’¥å¯¹


**ğŸŒŸ æ¨èæ–¹å¼ - Ed25519å¯†é’¥**
```bash
# ç”ŸæˆEd25519ç±»å‹å¯†é’¥ï¼ˆæ¨èï¼‰
ssh-keygen -t ed25519 -C "ansible@company.com"

# è¾“å‡ºç¤ºä¾‹ï¼š
# Generating public/private ed25519 key pair.
# Enter file in which to save the key (/home/user/.ssh/id_ed25519):
# Enter passphrase (empty for no passphrase):
```

> ğŸ’¡ **ä¸ºä»€ä¹ˆé€‰æ‹©Ed25519ï¼Ÿ**
> - å®‰å…¨æ€§æ›´é«˜
> - å¯†é’¥æ›´çŸ­ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
> - æŠ—é‡å­æ”»å‡»èƒ½åŠ›æ›´å¼º

**âš¡ å¿«é€Ÿç”Ÿæˆï¼ˆæ— å¯†ç ï¼‰**
```bash
# ä¸€é”®ç”Ÿæˆï¼Œæ— äº¤äº’
ssh-keygen -t ed25519 -f ~/.ssh/id_ansible -N "" -C "ansible-key"
```

**ğŸ”§ ä¼ ç»ŸRSAå¯†é’¥ï¼ˆå…¼å®¹æ€§å¥½ï¼‰**
```bash
# ç”Ÿæˆ4096ä½RSAå¯†é’¥
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

### 2.3 å¯†é’¥æ–‡ä»¶ç»“æ„ç†è§£


**ğŸ“ å¯†é’¥æ–‡ä»¶ä½ç½®**
```
~/.ssh/
â”œâ”€â”€ id_ed25519      â† ç§é’¥æ–‡ä»¶ï¼ˆä¸¥æ ¼ä¿å¯†ï¼‰
â”œâ”€â”€ id_ed25519.pub  â† å…¬é’¥æ–‡ä»¶ï¼ˆå¯ä»¥åˆ†äº«ï¼‰
â”œâ”€â”€ known_hosts     â† å·²çŸ¥ä¸»æœºæŒ‡çº¹
â””â”€â”€ config          â† SSHå®¢æˆ·ç«¯é…ç½®
```

**ğŸ” æƒé™è®¾ç½®ï¼ˆé‡è¦ï¼‰**
```bash
# è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
chmod 700 ~/.ssh                  # SSHç›®å½•
chmod 600 ~/.ssh/id_ed25519       # ç§é’¥æ–‡ä»¶
chmod 644 ~/.ssh/id_ed25519.pub   # å…¬é’¥æ–‡ä»¶
chmod 644 ~/.ssh/known_hosts      # å·²çŸ¥ä¸»æœº
chmod 600 ~/.ssh/config           # é…ç½®æ–‡ä»¶
```

> âš ï¸ **æƒé™è­¦å‘Š**ï¼šæƒé™ä¸æ­£ç¡®ä¼šå¯¼è‡´SSHæ‹’ç»ä½¿ç”¨å¯†é’¥æ–‡ä»¶

---

## 3. ğŸ“¤ å…¬é’¥åˆ†å‘ä¸å…å¯†ç™»å½•


### 3.1 ssh-copy-idå·¥å…·ä½¿ç”¨


**ğŸ”¸ åŸºæœ¬ç”¨æ³•**
```bash
# å°†å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœº
ssh-copy-id user@remote_host
```

**ğŸ“‹ å®Œæ•´ç¤ºä¾‹**
```bash
# æŒ‡å®šç”¨æˆ·å’Œä¸»æœº
ssh-copy-id root@192.168.1.100

# æŒ‡å®šç«¯å£
ssh-copy-id -p 2222 root@192.168.1.100

# æŒ‡å®šå¯†é’¥æ–‡ä»¶
ssh-copy-id -i ~/.ssh/id_ansible.pub root@192.168.1.100
```

**âœ… æˆåŠŸæ ‡å¿—**
```bash
# æ‰§è¡Œåä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# Number of key(s) added: 1
# 
# Now try logging into the machine with:
#   "ssh 'root@192.168.1.100'"
```

### 3.2 æ‰¹é‡å…¬é’¥åˆ†å‘


**ğŸš€ æ–¹æ³•ä¸€ï¼šè„šæœ¬æ‰¹é‡åˆ†å‘**
```bash
#!/bin/bash
# æ‰¹é‡åˆ†å‘å…¬é’¥è„šæœ¬

hosts=(
    "192.168.1.10"
    "192.168.1.11" 
    "192.168.1.12"
)

for host in "${hosts[@]}"; do
    echo "æ­£åœ¨å‘ $host åˆ†å‘å…¬é’¥..."
    ssh-copy-id -o StrictHostKeyChecking=no root@$host
done
```

**ğŸ”„ æ–¹æ³•äºŒï¼šAnsibleé¦–æ¬¡åˆ†å‘**
```bash
# ç¬¬ä¸€æ¬¡éœ€è¦è¾“å…¥å¯†ç 
ansible all -i inventory -m authorized_key \
  -a "user=root key='{{ lookup('file', '~/.ssh/id_ed25519.pub') }}'" \
  --ask-pass
```

### 3.3 æ‰‹åŠ¨é…ç½®authorized_keys


**ğŸ“ authorized_keysæ–‡ä»¶è¯¦è§£**
```bash
# è¿œç¨‹ä¸»æœºçš„æˆæƒå¯†é’¥æ–‡ä»¶ä½ç½®
~/.ssh/authorized_keys

# æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5... ansible@company.com
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC... backup-key
```

**ğŸ› ï¸ æ‰‹åŠ¨æ·»åŠ å…¬é’¥**
```bash
# æŸ¥çœ‹æœ¬åœ°å…¬é’¥
cat ~/.ssh/id_ed25519.pub

# åœ¨è¿œç¨‹ä¸»æœºä¸Šæ·»åŠ å…¬é’¥
echo "ssh-ed25519 AAAAC3NzaC1..." >> ~/.ssh/authorized_keys

# è®¾ç½®æ­£ç¡®æƒé™
chmod 600 ~/.ssh/authorized_keys
```

---

## 4. âš™ï¸ SSHé…ç½®æ–‡ä»¶ä¼˜åŒ–


### 4.1 å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶


**ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®**
- å…¨å±€é…ç½®ï¼š`/etc/ssh/ssh_config`
- ç”¨æˆ·é…ç½®ï¼š`~/.ssh/config`

**ğŸ”§ Ansibleä¼˜åŒ–é…ç½®**
```bash
# ~/.ssh/config æ–‡ä»¶å†…å®¹
Host *
    # è¿æ¥è¶…æ—¶è®¾ç½®
    ConnectTimeout 10
    ConnectionAttempts 3
    
    # æ€§èƒ½ä¼˜åŒ–
    Compression yes
    TCPKeepAlive yes
    ServerAliveInterval 60
    ServerAliveCountMax 3
    
    # å®‰å…¨è®¾ç½®
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    
    # SSHè¿æ¥å¤ç”¨
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 600
```

**ğŸ·ï¸ ä¸»æœºåˆ«åé…ç½®**
```bash
# ä¸ºå¸¸ç”¨ä¸»æœºè®¾ç½®åˆ«å
Host web-servers
    HostName 192.168.1.10
    User root
    Port 22
    IdentityFile ~/.ssh/id_ansible

Host db-servers
    HostName 192.168.1.20
    User root
    Port 2222
    IdentityFile ~/.ssh/id_db
```

### 4.2 æœåŠ¡ç«¯é…ç½®ä¼˜åŒ–


**ğŸ“ /etc/ssh/sshd_configå…³é”®é…ç½®**
```bash
# æ€§èƒ½ä¼˜åŒ–
ClientAliveInterval 60
ClientAliveCountMax 3
MaxStartups 100
MaxSessions 100

# å®‰å…¨è®¾ç½®
PermitRootLogin yes          # æ ¹æ®éœ€è¦è®¾ç½®
PubkeyAuthentication yes     # å¯ç”¨å…¬é’¥è®¤è¯
AuthorizedKeysFile .ssh/authorized_keys

# ç¦ç”¨ä¸éœ€è¦çš„åŠŸèƒ½
X11Forwarding no
AllowAgentForwarding no
```

**ğŸ”„ é‡å¯SSHæœåŠ¡**
```bash
# é‡æ–°åŠ è½½é…ç½®
sudo systemctl reload sshd

# æˆ–é‡å¯æœåŠ¡
sudo systemctl restart sshd
```

---

## 5. ğŸ¯ Ansible SSHè¿æ¥é…ç½®


### 5.1 inventoryæ¸…å•é…ç½®


**ğŸ“‹ åŸºæœ¬è¿æ¥é…ç½®**
```ini
# inventory/hosts
[web_servers]
web1 ansible_host=192.168.1.10 ansible_user=root
web2 ansible_host=192.168.1.11 ansible_user=root

[db_servers]
db1 ansible_host=192.168.1.20 ansible_user=root ansible_port=2222

[all:vars]
ansible_ssh_private_key_file=~/.ssh/id_ansible
ansible_ssh_common_args='-o StrictHostKeyChecking=no'
```

**ğŸ”§ é«˜çº§è¿æ¥å‚æ•°**
```ini
[production]
prod1 ansible_host=10.0.1.10
      ansible_user=deploy
      ansible_port=2222
      ansible_ssh_private_key_file=/path/to/specific/key
      ansible_ssh_common_args='-o ConnectTimeout=30 -o ControlMaster=auto'
```

### 5.2 ansible.cfgå…¨å±€é…ç½®


**ğŸ“ é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§**
```
1. ANSIBLE_CONFIGç¯å¢ƒå˜é‡æŒ‡å®šçš„æ–‡ä»¶
2. å½“å‰ç›®å½•ä¸‹çš„ansible.cfg
3. ç”¨æˆ·homeç›®å½•ä¸‹çš„.ansible.cfg
4. /etc/ansible/ansible.cfg
```

**âš¡ æ¨èé…ç½®**
```ini
# ansible.cfg
[defaults]
host_key_checking = False
timeout = 30
gathering = smart
fact_caching = memory

[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null
pipelining = True
control_path = ~/.ssh/ansible-%%r@%%h:%%p
```

### 5.3 è¿æ¥æµ‹è¯•ä¸éªŒè¯


**ğŸ” åŸºç¡€è¿æ¥æµ‹è¯•**
```bash
# æµ‹è¯•å•ä¸ªä¸»æœºè¿æ¥
ansible web1 -m ping

# æµ‹è¯•ç»„è¿æ¥
ansible web_servers -m ping

# è¯¦ç»†è¾“å‡ºè¿æ¥ä¿¡æ¯
ansible all -m ping -vvv
```

**ğŸ“Š è¿æ¥çŠ¶æ€æ£€æŸ¥**
```bash
# æ£€æŸ¥æ‰€æœ‰ä¸»æœºè¿æ¥çŠ¶æ€
ansible all -m setup -a "filter=ansible_ssh*" --tree /tmp/facts

# å¿«é€Ÿè¿é€šæ€§æµ‹è¯•
ansible all -m command -a "uptime"
```

---

## 6. ğŸš€ é«˜çº§è¿æ¥é…ç½®


### 6.1 è·³æ¿æœºé…ç½®


**ğŸ”¸ è·³æ¿æœºæ¶æ„å›¾**
```
æœ¬åœ°æœºå™¨ â†’ è·³æ¿æœº â†’ ç›®æ ‡æœåŠ¡å™¨
   â†“         â†“         â†“
 æ§åˆ¶ç«¯   å ¡å’ä¸»æœº   ç”Ÿäº§ç¯å¢ƒ
```

**ğŸ› ï¸ SSH ProxyJumpé…ç½®**
```bash
# ~/.ssh/config
Host jump-server
    HostName å…¬ç½‘IP
    User admin
    IdentityFile ~/.ssh/id_jump

Host prod-*
    User root
    ProxyJump jump-server
    IdentityFile ~/.ssh/id_prod

Host prod-web1
    HostName 10.0.1.10
```

**ğŸ“ Ansibleè·³æ¿æœºé…ç½®**
```ini
# inventoryé…ç½®
[production]
prod-web1 ansible_host=10.0.1.10
          ansible_ssh_common_args='-o ProxyJump=admin@jump-server'
```

### 6.2 SSHéš§é“ä¸ç«¯å£è½¬å‘


**ğŸ”§ æœ¬åœ°ç«¯å£è½¬å‘**
```bash
# å°†æœ¬åœ°8080ç«¯å£è½¬å‘åˆ°è¿œç¨‹80ç«¯å£
ssh -L 8080:localhost:80 user@remote_host

# Ansibleä¸­ä½¿ç”¨
ansible_ssh_common_args='-L 8080:localhost:80'
```

**ğŸŒ åŠ¨æ€ç«¯å£è½¬å‘ï¼ˆSOCKSä»£ç†ï¼‰**
```bash
# åˆ›å»ºSOCKSä»£ç†
ssh -D 1080 user@proxy_server

# é€šè¿‡ä»£ç†è¿æ¥
ansible_ssh_common_args='-o ProxyCommand="nc -x 127.0.0.1:1080 %h %p"'
```

### 6.3 è¿æ¥æ± ä¼˜åŒ–


**âš¡ SSHè¿æ¥å¤ç”¨**
```bash
# åˆ›å»ºSocketç›®å½•
mkdir -p ~/.ssh/sockets

# SSHé…ç½®
Host *
    ControlMaster auto
    ControlPath ~/.ssh/sockets/ssh-%r@%h:%p
    ControlPersist 3600
```

**ğŸ”„ Ansibleè¿æ¥å¤ç”¨**
```ini
[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=3600s
control_path = ~/.ssh/sockets/ansible-%%r@%%h:%%p
```

---

## 7. ğŸ” æ•…éšœæ’æŸ¥ä¸ä¼˜åŒ–


### 7.1 å¸¸è§SSHè¿æ¥é—®é¢˜


**âŒ é—®é¢˜ä¸€ï¼šæƒé™è¢«æ‹’ç»**
```bash
# é”™è¯¯ä¿¡æ¯
Permission denied (publickey,password)

# è§£å†³æ­¥éª¤
1. æ£€æŸ¥å¯†é’¥æ–‡ä»¶æƒé™
   chmod 600 ~/.ssh/id_*
2. ç¡®è®¤å…¬é’¥å·²æ­£ç¡®åˆ†å‘
   ssh-copy-id user@host
3. æ£€æŸ¥authorized_keysæƒé™
   chmod 600 ~/.ssh/authorized_keys
```

**âŒ é—®é¢˜äºŒï¼šè¿æ¥è¶…æ—¶**
```bash
# é”™è¯¯ä¿¡æ¯
ssh: connect to host xxx.xxx.xxx.xxx port 22: Connection timed out

# è§£å†³æ–¹æ¡ˆ
1. æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
   ping target_host
2. ç¡®è®¤SSHæœåŠ¡çŠ¶æ€
   systemctl status sshd
3. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
   iptables -L | grep 22
```

**âŒ é—®é¢˜ä¸‰ï¼šä¸»æœºå¯†é’¥éªŒè¯å¤±è´¥**
```bash
# é”™è¯¯ä¿¡æ¯
Host key verification failed

# è§£å†³æ–¹æ³•
1. æ¸…é™¤æ—§çš„ä¸»æœºå¯†é’¥
   ssh-keygen -R hostname
2. æˆ–è€…åœ¨é…ç½®ä¸­ç¦ç”¨æ£€æŸ¥
   StrictHostKeyChecking no
```

### 7.2 è°ƒè¯•ä¸æ—¥å¿—åˆ†æ


**ğŸ” SSHè¯¦ç»†è°ƒè¯•**
```bash
# SSHè¿æ¥è°ƒè¯•
ssh -vvv user@hostname

# Ansibleè¿æ¥è°ƒè¯•
ansible hostname -m ping -vvv
```

**ğŸ“Š æ€§èƒ½ç›‘æ§**
```bash
# æ£€æŸ¥SSHè¿æ¥æ•°
ss -tn | grep :22 | wc -l

# ç›‘æ§è¿æ¥çŠ¶æ€
watch -n 1 'ss -tn state established | grep :22'
```

### 7.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**âš¡ è¿æ¥é€Ÿåº¦ä¼˜åŒ–**
```ini
[ssh_connection]
# å¯ç”¨ç®¡é“åŒ–
pipelining = True

# ç¦ç”¨factæ”¶é›†ï¼ˆæŒ‰éœ€ï¼‰
gathering = explicit

# ä½¿ç”¨æ›´å¿«çš„SSHç®—æ³•
ssh_args = -o Cipher=aes128-ctr -o Compression=no
```

**ğŸ“ˆ å¹¶å‘è¿æ¥ä¼˜åŒ–**
```ini
[defaults]
# å¢åŠ å¹¶å‘è¿æ¥æ•°
forks = 50

# ä½¿ç”¨ç­–ç•¥æ’ä»¶
strategy = free

# å¯ç”¨factç¼“å­˜
fact_caching = redis
fact_caching_timeout = 3600
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SSHå¯†é’¥è®¤è¯ï¼šæ¯”å¯†ç è®¤è¯æ›´å®‰å…¨ã€ä¾¿æ·çš„è®¤è¯æ–¹å¼
ğŸ”¸ ssh-keygenï¼šç”ŸæˆSSHå¯†é’¥å¯¹çš„æ ¸å¿ƒå·¥å…·
ğŸ”¸ ssh-copy-idï¼šè‡ªåŠ¨åŒ–å…¬é’¥åˆ†å‘å·¥å…·
ğŸ”¸ authorized_keysï¼šå­˜å‚¨æˆæƒå…¬é’¥çš„å…³é”®æ–‡ä»¶
ğŸ”¸ SSHé…ç½®æ–‡ä»¶ï¼šä¼˜åŒ–è¿æ¥æ€§èƒ½å’Œå®‰å…¨æ€§çš„é‡è¦é…ç½®
ğŸ”¸ è¿æ¥å¤ç”¨ï¼šæé«˜Ansibleæ‰§è¡Œæ•ˆç‡çš„å…³é”®æŠ€æœ¯
```

### 8.2 å…³é”®æ“ä½œæµç¨‹


**ğŸ”¹ åˆæ¬¡SSHé…ç½®æµç¨‹**
```
â‘  ç”Ÿæˆå¯†é’¥å¯¹ â†’ â‘¡ åˆ†å‘å…¬é’¥ â†’ â‘¢ æµ‹è¯•å…å¯†ç™»å½• â†’ â‘£ ä¼˜åŒ–é…ç½®
```

**ğŸ”¹ Ansibleè¿æ¥é…ç½®æµç¨‹**
```
â‘  SSHåŸºç¡€é…ç½® â†’ â‘¡ inventoryé…ç½® â†’ â‘¢ ansible.cfgä¼˜åŒ– â†’ â‘£ è¿æ¥æµ‹è¯•
```

### 8.3 æœ€ä½³å®è·µå»ºè®®


**ğŸŒŸ å®‰å…¨æ€§æœ€ä½³å®è·µ**
- âœ… ä½¿ç”¨Ed25519æˆ–4096ä½RSAå¯†é’¥
- âœ… å®šæœŸè½®æ¢SSHå¯†é’¥
- âœ… è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
- âœ… ç¦ç”¨å¯†ç è®¤è¯ï¼ˆä»…ä½¿ç”¨å¯†é’¥ï¼‰
- âœ… é…ç½®é€‚å½“çš„è¿æ¥è¶…æ—¶

**ğŸš€ æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ**
- âœ… å¯ç”¨SSHè¿æ¥å¤ç”¨
- âœ… é…ç½®åˆé€‚çš„å¹¶å‘æ•°
- âœ… ä½¿ç”¨é«˜æ•ˆçš„SSHç®—æ³•
- âœ… å¯ç”¨ç®¡é“åŒ–ä¼ è¾“
- âœ… åˆç†é…ç½®factæ”¶é›†ç­–ç•¥

**ğŸ”§ è¿ç»´ç®¡ç†æœ€ä½³å®è·µ**
- âœ… ç»Ÿä¸€å¯†é’¥ç®¡ç†ç­–ç•¥
- âœ… å»ºç«‹è·³æ¿æœºè®¿é—®æœºåˆ¶
- âœ… é…ç½®ç›‘æ§å’Œæ—¥å¿—è®°å½•
- âœ… åˆ¶å®šæ•…éšœæ’æŸ¥æµç¨‹
- âœ… å®šæœŸå¤‡ä»½SSHé…ç½®

### 8.4 æ•…éšœæ’æŸ¥æ£€æŸ¥æ¸…å•


**ğŸ“‹ è¿æ¥é—®é¢˜å¿«é€Ÿæ£€æŸ¥**
- [ ] ç½‘ç»œè¿é€šæ€§ï¼ˆpingæµ‹è¯•ï¼‰
- [ ] SSHæœåŠ¡çŠ¶æ€ï¼ˆsystemctl status sshdï¼‰
- [ ] ç«¯å£å¼€æ”¾çŠ¶æ€ï¼ˆtelnet host portï¼‰
- [ ] å¯†é’¥æ–‡ä»¶æƒé™ï¼ˆls -la ~/.ssh/ï¼‰
- [ ] å…¬é’¥åˆ†å‘çŠ¶æ€ï¼ˆcat ~/.ssh/authorized_keysï¼‰
- [ ] SSHé…ç½®è¯­æ³•ï¼ˆsshd -tï¼‰

**æ ¸å¿ƒè®°å¿†**ï¼š
- SSHå…å¯†ç™»å½•æ˜¯Ansibleè‡ªåŠ¨åŒ–çš„åŸºç¡€
- å¯†é’¥è®¤è¯æ¯”å¯†ç è®¤è¯æ›´å®‰å…¨é«˜æ•ˆ
- æ­£ç¡®çš„æƒé™è®¾ç½®æ˜¯SSHæ­£å¸¸å·¥ä½œçš„å…³é”®
- è¿æ¥å¤ç”¨èƒ½æ˜¾è‘—æå‡Ansibleæ‰§è¡Œæ•ˆç‡
- åˆç†çš„é…ç½®ä¼˜åŒ–èƒ½è§£å†³å¤§éƒ¨åˆ†è¿æ¥é—®é¢˜