---
title: 1ã€ç½‘ç»œè®¾å¤‡ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [ç½‘ç»œè‡ªåŠ¨åŒ–æ¦‚å¿µç†è§£](#1-ç½‘ç»œè‡ªåŠ¨åŒ–æ¦‚å¿µç†è§£)
2. [æ”¯æŒçš„ç½‘ç»œè®¾å¤‡ç±»å‹](#2-æ”¯æŒçš„ç½‘ç»œè®¾å¤‡ç±»å‹)
3. [è®¾å¤‡è¿æ¥æ–¹å¼è¯¦è§£](#3-è®¾å¤‡è¿æ¥æ–¹å¼è¯¦è§£)
4. [network_cliè¿æ¥æ·±å…¥](#4-network_cliè¿æ¥æ·±å…¥)
5. [netconfåè®®åº”ç”¨](#5-netconfåè®®åº”ç”¨)
6. [APIæ¥å£è°ƒç”¨å®è·µ](#6-APIæ¥å£è°ƒç”¨å®è·µ)
7. [é…ç½®å¤‡ä»½ä¸æ¢å¤](#7-é…ç½®å¤‡ä»½ä¸æ¢å¤)
8. [æ‰¹é‡é…ç½®ä¸‹å‘ç®¡ç†](#8-æ‰¹é‡é…ç½®ä¸‹å‘ç®¡ç†)
9. [ç½‘ç»œæ‹“æ‰‘ç®¡ç†](#9-ç½‘ç»œæ‹“æ‰‘ç®¡ç†)
10. [ç›‘æ§å‘Šè­¦é›†æˆ](#10-ç›‘æ§å‘Šè­¦é›†æˆ)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ç½‘ç»œè‡ªåŠ¨åŒ–æ¦‚å¿µç†è§£


### 1.1 ä»€ä¹ˆæ˜¯ç½‘ç»œè‡ªåŠ¨åŒ–


**ğŸ”¸ é€šä¿—ç†è§£**
```
ä¼ ç»Ÿç½‘ç»œç®¡ç†ï¼š
ç®¡ç†å‘˜ â†’ SSHç™»å½•è®¾å¤‡ â†’ æ‰‹å·¥è¾“å…¥å‘½ä»¤ â†’ é€å°é…ç½®
é—®é¢˜ï¼šè€—æ—¶ã€æ˜“é”™ã€éš¾ä»¥æ ‡å‡†åŒ–ã€æ— æ³•å¤§è§„æ¨¡æ“ä½œ

ç½‘ç»œè‡ªåŠ¨åŒ–ï¼š
ç®¡ç†å‘˜ â†’ ç¼–å†™è„šæœ¬/å‰§æœ¬ â†’ å·¥å…·æ‰¹é‡æ‰§è¡Œ â†’ ç»Ÿä¸€ç®¡ç†
ä¼˜åŠ¿ï¼šå¿«é€Ÿã€å‡†ç¡®ã€æ ‡å‡†åŒ–ã€å¯å¤§è§„æ¨¡æ“ä½œ
```

**ğŸ’¡ æ ¸å¿ƒä»·å€¼**
- **æ•ˆç‡æå‡**ï¼šå‡ åˆ†é’Ÿå®ŒæˆåŸæœ¬å‡ å°æ—¶çš„å·¥ä½œ
- **é”™è¯¯å‡å°‘**ï¼šé¿å…äººå·¥æ“ä½œçš„æ‹¼å†™é”™è¯¯å’Œé…ç½®é—æ¼
- **æ ‡å‡†ç»Ÿä¸€**ï¼šç¡®ä¿æ‰€æœ‰è®¾å¤‡é…ç½®çš„ä¸€è‡´æ€§
- **å¯è¿½æº¯æ€§**ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰è®°å½•ï¼Œä¾¿äºå®¡è®¡å’Œå›æ»š

### 1.2 Ansibleåœ¨ç½‘ç»œè‡ªåŠ¨åŒ–ä¸­çš„è§’è‰²


**ğŸ¯ Ansibleçš„ç‹¬ç‰¹ä¼˜åŠ¿**
```
ä¼ ç»Ÿè‡ªåŠ¨åŒ–å·¥å…·ï¼š
â”œâ”€â”€ éœ€è¦åœ¨ç›®æ ‡è®¾å¤‡å®‰è£…ä»£ç†ç¨‹åº
â”œâ”€â”€ å¤æ‚çš„é…ç½®å’Œç»´æŠ¤
â””â”€â”€ å­¦ä¹ æˆæœ¬é«˜

Ansibleç½‘ç»œè‡ªåŠ¨åŒ–ï¼š
â”œâ”€â”€ æ— éœ€ä»£ç†ç¨‹åºï¼ˆAgentlessï¼‰
â”œâ”€â”€ åŸºäºSSH/APIè¿æ¥
â”œâ”€â”€ ç®€å•æ˜“å­¦çš„YAMLè¯­æ³•
â””â”€â”€ ä¸°å¯Œçš„ç½‘ç»œæ¨¡å—åº“
```

### 1.3 é€‚ç”¨åœºæ™¯


**âœ… æœ€ä½³åº”ç”¨åœºæ™¯**
- **æ‰¹é‡è®¾å¤‡é…ç½®**ï¼šåŒæ—¶é…ç½®æ•°åå°äº¤æ¢æœº
- **æ ‡å‡†åŒ–éƒ¨ç½²**ï¼šç¡®ä¿æ‰€æœ‰è®¾å¤‡éµå¾ªç»Ÿä¸€æ ‡å‡†
- **é…ç½®å¤‡ä»½**ï¼šå®šæœŸè‡ªåŠ¨å¤‡ä»½è®¾å¤‡é…ç½®
- **åˆè§„æ£€æŸ¥**ï¼šéªŒè¯è®¾å¤‡é…ç½®æ˜¯å¦ç¬¦åˆå®‰å…¨ç­–ç•¥
- **æ•…éšœå¿«é€Ÿä¿®å¤**ï¼šè‡ªåŠ¨åŒ–å¸¸è§é—®é¢˜çš„è§£å†³æµç¨‹

---

## 2. ğŸ–¥ï¸ æ”¯æŒçš„ç½‘ç»œè®¾å¤‡ç±»å‹


### 2.1 ä¸»æµå‚å•†æ”¯æŒ


**ğŸ¢ ä¼ä¸šçº§å‚å•†**
```
æ€ç§‘ (Cisco)ï¼š
â”œâ”€â”€ äº¤æ¢æœºï¼šCatalystç³»åˆ—
â”œâ”€â”€ è·¯ç”±å™¨ï¼šISRç³»åˆ—
â”œâ”€â”€ é˜²ç«å¢™ï¼šASAç³»åˆ—
â””â”€â”€ æ— çº¿ï¼šWLCç³»åˆ—

åä¸º (Huawei)ï¼š
â”œâ”€â”€ äº¤æ¢æœºï¼šSç³»åˆ—
â”œâ”€â”€ è·¯ç”±å™¨ï¼šARç³»åˆ—
â”œâ”€â”€ é˜²ç«å¢™ï¼šUSGç³»åˆ—
â””â”€â”€ æ— çº¿ï¼šACç³»åˆ—

H3Cï¼š
â”œâ”€â”€ äº¤æ¢æœºï¼šSç³»åˆ—
â”œâ”€â”€ è·¯ç”±å™¨ï¼šMSRç³»åˆ—
â””â”€â”€ é˜²ç«å¢™ï¼šFç³»åˆ—
```

**ğŸŒ å¼€æº/å…¶ä»–å‚å•†**
```
Juniperï¼š
â”œâ”€â”€ äº¤æ¢æœºï¼šEXç³»åˆ—
â””â”€â”€ è·¯ç”±å™¨ï¼šMXç³»åˆ—

Aristaï¼š
â””â”€â”€ æ•°æ®ä¸­å¿ƒäº¤æ¢æœºï¼š7000ç³»åˆ—

F5ï¼š
â””â”€â”€ è´Ÿè½½å‡è¡¡å™¨ï¼šBIG-IPç³»åˆ—

Palo Altoï¼š
â””â”€â”€ ä¸‹ä¸€ä»£é˜²ç«å¢™ï¼šPAç³»åˆ—
```

### 2.2 è®¾å¤‡ç±»å‹åˆ†ç±»


| è®¾å¤‡ç±»å‹ | **ä¸»è¦åŠŸèƒ½** | **Ansibleæ¨¡å—å‰ç¼€** | **è¿æ¥æ–¹å¼** |
|---------|-------------|-------------------|-------------|
| ğŸ”€ **äº¤æ¢æœº** | `äºŒå±‚/ä¸‰å±‚äº¤æ¢` | `ios_*`, `nxos_*` | `network_cli` |
| ğŸ”— **è·¯ç”±å™¨** | `è·¯ç”±è½¬å‘` | `ios_*`, `iosxr_*` | `network_cli` |
| ğŸ›¡ï¸ **é˜²ç«å¢™** | `å®‰å…¨é˜²æŠ¤` | `asa_*`, `panos_*` | `network_cli/API` |
| âš–ï¸ **è´Ÿè½½å‡è¡¡** | `æµé‡åˆ†å‘` | `bigip_*` | `API` |
| ğŸ“¡ **æ— çº¿æ§åˆ¶å™¨** | `æ— çº¿ç½‘ç»œç®¡ç†` | `aireos_*` | `network_cli` |

---

## 3. ğŸ”Œ è®¾å¤‡è¿æ¥æ–¹å¼è¯¦è§£


### 3.1 è¿æ¥æ–¹å¼æ¦‚è§ˆ


**ğŸ“Š è¿æ¥æ–¹å¼å¯¹æ¯”**
```
SSHè¿æ¥ (network_cli)ï¼š
â”œâ”€â”€ ä¼˜ç‚¹ï¼šé€šç”¨æ€§å¼ºã€å…¼å®¹æ€§å¥½
â”œâ”€â”€ ç¼ºç‚¹ï¼šåŸºäºæ–‡æœ¬è§£æã€é€Ÿåº¦è¾ƒæ…¢
â””â”€â”€ é€‚ç”¨ï¼šå¤§éƒ¨åˆ†ä¼ ç»Ÿç½‘ç»œè®¾å¤‡

NETCONFåè®®ï¼š
â”œâ”€â”€ ä¼˜ç‚¹ï¼šç»“æ„åŒ–æ•°æ®ã€äº‹åŠ¡æ€§æ“ä½œ
â”œâ”€â”€ ç¼ºç‚¹ï¼šè®¾å¤‡æ”¯æŒæœ‰é™
â””â”€â”€ é€‚ç”¨ï¼šæ”¯æŒNETCONFçš„ç°ä»£è®¾å¤‡

APIæ¥å£ï¼š
â”œâ”€â”€ ä¼˜ç‚¹ï¼šé«˜æ•ˆã€ç¼–ç¨‹å‹å¥½
â”œâ”€â”€ ç¼ºç‚¹ï¼šå‚å•†ç‰¹å®šã€æ¥å£å·®å¼‚å¤§
â””â”€â”€ é€‚ç”¨ï¼šç°ä»£è®¾å¤‡ã€äº‘å¹³å°
```

### 3.2 è¿æ¥é…ç½®åŸºç¡€


**ğŸ”§ inventoryæ–‡ä»¶é…ç½®ç¤ºä¾‹**
```ini
[cisco_switches]
sw-01 ansible_host=192.168.1.10
sw-02 ansible_host=192.168.1.11

[cisco_switches:vars]
ansible_network_os=ios
ansible_connection=network_cli
ansible_user=admin
ansible_password=password123
ansible_become=yes
ansible_become_method=enable
ansible_become_password=enable123
```

**ğŸ’¡ å‚æ•°è¯´æ˜**
- **`ansible_network_os`**ï¼šæŒ‡å®šè®¾å¤‡æ“ä½œç³»ç»Ÿç±»å‹
- **`ansible_connection`**ï¼šè¿æ¥æ’ä»¶ç±»å‹
- **`ansible_become`**ï¼šæ˜¯å¦æå‡æƒé™ï¼ˆè¿›å…¥enableæ¨¡å¼ï¼‰

---

## 4. ğŸ–§ network_cliè¿æ¥æ·±å…¥


### 4.1 network_cliå·¥ä½œåŸç†


**ğŸ”„ è¿æ¥æµç¨‹å›¾**
```
Ansibleæ§åˆ¶èŠ‚ç‚¹                  ç½‘ç»œè®¾å¤‡
       |                           |
   [1] å»ºç«‹SSHè¿æ¥ ----------------> |
       |                          |
   [2] ç”¨æˆ·è®¤è¯ --------------------> |
       |                          |
   [3] è¿›å…¥ç‰¹æƒæ¨¡å¼ -----------------> |
       |                          |
   [4] æ‰§è¡Œå‘½ä»¤/é…ç½® ---------------> |
       |                          |
   [5] è§£æè¿”å›ç»“æœ <---------------- |
       |                          |
   [6] å…³é—­è¿æ¥ --------------------> |
```

### 4.2 åŸºç¡€é…ç½®ç¤ºä¾‹


**ğŸ“ ç®€å•é…ç½®ä»»åŠ¡**
```yaml
---
- name: é…ç½®äº¤æ¢æœºåŸºæœ¬ä¿¡æ¯
  hosts: cisco_switches
  gather_facts: no
  tasks:
    - name: è®¾ç½®è®¾å¤‡ä¸»æœºå
      cisco.ios.ios_config:
        lines:
          - hostname {{ inventory_hostname }}
    
    - name: é…ç½®ç®¡ç†IP
      cisco.ios.ios_config:
        lines:
          - ip address 192.168.1.100 255.255.255.0
        parents: interface vlan1
```

### 4.3 é«˜çº§é…ç½®æŠ€å·§


**ğŸ¯ æ¡ä»¶é…ç½®**
```yaml
- name: æ ¹æ®è®¾å¤‡ç±»å‹é…ç½®
  cisco.ios.ios_config:
    lines: "{{ config_lines }}"
  vars:
    config_lines: >-
      {% if 'access' in group_names %}
      {{ access_switch_config }}
      {% elif 'core' in group_names %}
      {{ core_switch_config }}
      {% endif %}
```

**ğŸ” é…ç½®éªŒè¯**
```yaml
- name: éªŒè¯é…ç½®ç»“æœ
  cisco.ios.ios_command:
    commands:
      - show running-config | include hostname
  register: hostname_result

- name: æ˜¾ç¤ºä¸»æœºåé…ç½®
  debug:
    msg: "å½“å‰ä¸»æœºå: {{ hostname_result.stdout[0] }}"
```

---

## 5. ğŸ“¡ netconfåè®®åº”ç”¨


### 5.1 NETCONFåè®®ç†è§£


**ğŸ”¸ ä»€ä¹ˆæ˜¯NETCONF**
```
ä¼ ç»ŸCLIæ–¹å¼ï¼š
å‘½ä»¤ â†’ æ–‡æœ¬è¾“å‡º â†’ äººå·¥è§£æ â†’ å®¹æ˜“å‡ºé”™

NETCONFæ–¹å¼ï¼š
ç»“æ„åŒ–è¯·æ±‚ â†’ XMLæ•°æ® â†’ ç¨‹åºè§£æ â†’ å‡†ç¡®å¯é 
```

**ğŸ’¡ NETCONFä¼˜åŠ¿**
- **ç»“æ„åŒ–æ•°æ®**ï¼šXMLæ ¼å¼ï¼Œä¾¿äºç¨‹åºå¤„ç†
- **äº‹åŠ¡æ€§æ“ä½œ**ï¼šæ”¯æŒå›æ»šï¼Œæ“ä½œæ›´å®‰å…¨
- **å¹¶å‘å®‰å…¨**ï¼šæ”¯æŒé…ç½®é”å®šï¼Œé¿å…å†²çª
- **æ ‡å‡†åŒ–**ï¼šRFCå®šä¹‰çš„æ ‡å‡†åè®®

### 5.2 NETCONFè¿æ¥é…ç½®


**ğŸ”§ è®¾å¤‡å‡†å¤‡**
```
# Cisco IOS-XEè®¾å¤‡å¯ç”¨NETCONF
netconf-yang
netconf-yang cisco-ia
```

**ğŸ“ Ansibleé…ç½®**
```ini
[iosxe_devices]
router-01 ansible_host=192.168.1.20

[iosxe_devices:vars]
ansible_connection=netconf
ansible_network_os=iosxe
ansible_user=admin
ansible_password=password123
ansible_port=830
```

### 5.3 NETCONFæ“ä½œç¤ºä¾‹


**ğŸ“Š è·å–è®¾å¤‡ä¿¡æ¯**
```yaml
- name: è·å–æ¥å£çŠ¶æ€
  netconf_get:
    source: running
    filter: |
      <interfaces xmlns="urn:ietf:params:xml:ns:yang:ietf-interfaces">
        <interface>
          <name>GigabitEthernet1</name>
        </interface>
      </interfaces>
  register: interface_info
```

---

## 6. ğŸ”— APIæ¥å£è°ƒç”¨å®è·µ


### 6.1 APIè°ƒç”¨åŸºç¡€


**ğŸŒŸ ä¸ºä»€ä¹ˆä½¿ç”¨API**
```
CLIæ–¹å¼ç¼ºç‚¹ï¼š
â”œâ”€â”€ å‘½ä»¤è¯­æ³•å¤æ‚
â”œâ”€â”€ è¾“å‡ºæ ¼å¼ä¸ç»Ÿä¸€
â”œâ”€â”€ è§£æå›°éš¾
â””â”€â”€ æ•ˆç‡è¾ƒä½

APIæ–¹å¼ä¼˜åŠ¿ï¼š
â”œâ”€â”€ RESTfulæ¥å£æ ‡å‡†
â”œâ”€â”€ JSONæ ¼å¼æ•°æ®
â”œâ”€â”€ ç¨‹åºå‹å¥½
â””â”€â”€ é«˜æ•ˆå¿«é€Ÿ
```

### 6.2 å®é™…APIè°ƒç”¨ç¤ºä¾‹


**ğŸ“± F5 BIG-IP APIè°ƒç”¨**
```yaml
- name: åˆ›å»ºè™šæ‹ŸæœåŠ¡å™¨
  f5networks.f5_modules.bigip_virtual_server:
    server: "{{ inventory_hostname }}"
    user: "{{ ansible_user }}"
    password: "{{ ansible_password }}"
    name: "web-vs-01"
    destination: "10.1.1.100"
    port: "80"
    pool: "web-pool"
    state: present
```

**â˜ï¸ é€šç”¨REST APIè°ƒç”¨**
```yaml
- name: é€šè¿‡REST APIè·å–è®¾å¤‡ä¿¡æ¯
  uri:
    url: "https://{{ inventory_hostname }}/api/v1/devices/info"
    method: GET
    headers:
      Authorization: "Bearer {{ api_token }}"
    validate_certs: no
  register: device_info
```

---

## 7. ğŸ’¾ é…ç½®å¤‡ä»½ä¸æ¢å¤


### 7.1 å¤‡ä»½ç­–ç•¥è®¾è®¡


**ğŸ“‹ å¤‡ä»½æœ€ä½³å®è·µ**
```
å¤‡ä»½é¢‘ç‡è§„åˆ’ï¼š
â”œâ”€â”€ æ—¥å¸¸å¤‡ä»½ï¼šæ¯å¤©è‡ªåŠ¨æ‰§è¡Œ
â”œâ”€â”€ å˜æ›´å‰å¤‡ä»½ï¼šé‡å¤§é…ç½®å˜æ›´å‰
â”œâ”€â”€ ç´§æ€¥å¤‡ä»½ï¼šæ•…éšœå‘ç”Ÿå‰çš„å¿«é€Ÿå¤‡ä»½
â””â”€â”€ å½’æ¡£å¤‡ä»½ï¼šå®šæœŸå½’æ¡£å†å²é…ç½®
```

### 7.2 è‡ªåŠ¨åŒ–å¤‡ä»½å®ç°


**ğŸ”§ é…ç½®å¤‡ä»½å‰§æœ¬**
```yaml
---
- name: ç½‘ç»œè®¾å¤‡é…ç½®å¤‡ä»½
  hosts: network_devices
  gather_facts: no
  tasks:
    - name: åˆ›å»ºå¤‡ä»½ç›®å½•
      file:
        path: "./backups/{{ ansible_date_time.date }}"
        state: directory
      delegate_to: localhost
      run_once: yes
    
    - name: å¤‡ä»½æ€ç§‘è®¾å¤‡é…ç½®
      cisco.ios.ios_config:
        backup: yes
        backup_options:
          filename: "{{ inventory_hostname }}_{{ ansible_date_time.epoch }}.cfg"
          dir_path: "./backups/{{ ansible_date_time.date }}"
      when: ansible_network_os == 'ios'
```

**ğŸ“Š å¤‡ä»½æ–‡ä»¶ç®¡ç†**
```yaml
- name: æ¸…ç†æ—§å¤‡ä»½æ–‡ä»¶
  find:
    paths: "./backups"
    age: "30d"
    file_type: file
  register: old_backups
  delegate_to: localhost

- name: åˆ é™¤30å¤©å‰çš„å¤‡ä»½
  file:
    path: "{{ item.path }}"
    state: absent
  loop: "{{ old_backups.files }}"
  delegate_to: localhost
```

### 7.3 é…ç½®æ¢å¤æµç¨‹


**ğŸ”„ æ¢å¤æ“ä½œç¤ºä¾‹**
```yaml
- name: ä»å¤‡ä»½æ¢å¤é…ç½®
  cisco.ios.ios_config:
    src: "./backups/latest/{{ inventory_hostname }}.cfg"
    replace: config
  when: restore_from_backup | default(false)
```

---

## 8. ğŸ“¤ æ‰¹é‡é…ç½®ä¸‹å‘ç®¡ç†


### 8.1 æ‰¹é‡é…ç½®ç­–ç•¥


**ğŸ¯ åˆ†ç»„ç®¡ç†ç­–ç•¥**
```
è®¾å¤‡åˆ†ç»„åŸåˆ™ï¼š
â”œâ”€â”€ æŒ‰åŠŸèƒ½åˆ†ç»„ï¼šcore_switches, access_switches
â”œâ”€â”€ æŒ‰ä½ç½®åˆ†ç»„ï¼šbuilding_a, building_b
â”œâ”€â”€ æŒ‰å‹å·åˆ†ç»„ï¼šcatalyst_9300, catalyst_2960
â””â”€â”€ æŒ‰ç¯å¢ƒåˆ†ç»„ï¼šproduction, staging, test
```

### 8.2 æ ‡å‡†åŒ–é…ç½®æ¨¡æ¿


**ğŸ“ é…ç½®æ¨¡æ¿åŒ–**
```yaml
# group_vars/access_switches.yml
common_config:
  - no ip domain-lookup
  - ip domain-name company.com
  - ntp server 10.1.1.1
  - logging host 10.1.1.100

vlan_config:
  - vlan 10
  - name Users
  - vlan 20
  - name Servers
```

**ğŸ”§ æ‰¹é‡åº”ç”¨é…ç½®**
```yaml
- name: åº”ç”¨æ ‡å‡†é…ç½®åˆ°æ¥å…¥äº¤æ¢æœº
  hosts: access_switches
  tasks:
    - name: é…ç½®é€šç”¨è®¾ç½®
      cisco.ios.ios_config:
        lines: "{{ common_config }}"
    
    - name: é…ç½®VLAN
      cisco.ios.ios_config:
        lines: "{{ vlan_config }}"
```

### 8.3 é…ç½®å˜æ›´ç®¡ç†


**ğŸ“‹ å˜æ›´æµç¨‹æ§åˆ¶**
```yaml
- name: é…ç½®å˜æ›´å‰æ£€æŸ¥
  cisco.ios.ios_command:
    commands: show version
  register: pre_change_version

- name: åº”ç”¨é…ç½®å˜æ›´
  cisco.ios.ios_config:
    lines: "{{ new_config }}"
  notify: backup_config

- name: éªŒè¯é…ç½®å˜æ›´
  cisco.ios.ios_command:
    commands: "{{ verification_commands }}"
  register: post_change_check
```

---

## 9. ğŸ—ºï¸ ç½‘ç»œæ‹“æ‰‘ç®¡ç†


### 9.1 æ‹“æ‰‘å‘ç°æ¦‚å¿µ


**ğŸ” ä»€ä¹ˆæ˜¯æ‹“æ‰‘å‘ç°**
```
æ‰‹å·¥ç»˜åˆ¶ç½‘ç»œå›¾ï¼š
â”œâ”€â”€ è€—æ—¶è€—åŠ›
â”œâ”€â”€ å®¹æ˜“è¿‡æ—¶
â”œâ”€â”€ ä¿¡æ¯ä¸å‡†ç¡®
â””â”€â”€ éš¾ä»¥ç»´æŠ¤

è‡ªåŠ¨æ‹“æ‰‘å‘ç°ï¼š
â”œâ”€â”€ å®æ—¶å‡†ç¡®
â”œâ”€â”€ è‡ªåŠ¨æ›´æ–°
â”œâ”€â”€ ä¿¡æ¯ä¸°å¯Œ
â””â”€â”€ æ˜“äºç»´æŠ¤
```

### 9.2 æ‹“æ‰‘ä¿¡æ¯æ”¶é›†


**ğŸ“Š æ”¶é›†é‚»å±…ä¿¡æ¯**
```yaml
- name: æ”¶é›†CDPé‚»å±…ä¿¡æ¯
  cisco.ios.ios_command:
    commands: show cdp neighbors detail
  register: cdp_neighbors

- name: æ”¶é›†LLDPé‚»å±…ä¿¡æ¯
  cisco.ios.ios_command:
    commands: show lldp neighbors detail
  register: lldp_neighbors

- name: ç”Ÿæˆæ‹“æ‰‘æ•°æ®
  set_fact:
    topology_data:
      device: "{{ inventory_hostname }}"
      neighbors: "{{ cdp_neighbors.stdout[0] | parse_cdp }}"
```

### 9.3 æ‹“æ‰‘å›¾ç”Ÿæˆ


**ğŸ–¼ï¸ ç®€å•æ‹“æ‰‘å±•ç¤º**
```
å‘ç°çš„ç½‘ç»œæ‹“æ‰‘ï¼š

    [Core-SW-01]
         |
    [Dist-SW-01]
       /    \
[Access-01] [Access-02]
     |         |
  [PC-1]    [PC-2]
```

---

## 10. ğŸ“Š ç›‘æ§å‘Šè­¦é›†æˆ


### 10.1 ç›‘æ§é›†æˆä»·å€¼


**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§é›†æˆ**
```
ä¼ ç»Ÿè¿ç»´é—®é¢˜ï¼š
â”œâ”€â”€ è¢«åŠ¨å“åº”æ•…éšœ
â”œâ”€â”€ äººå·¥å·¡æ£€è€—æ—¶
â”œâ”€â”€ é—®é¢˜å‘ç°æ»å
â””â”€â”€ å¤„ç†æµç¨‹å¤æ‚

è‡ªåŠ¨åŒ–ç›‘æ§ï¼š
â”œâ”€â”€ ä¸»åŠ¨å‘ç°é—®é¢˜
â”œâ”€â”€ è‡ªåŠ¨åŒ–å·¡æ£€
â”œâ”€â”€ å®æ—¶å‘Šè­¦é€šçŸ¥
â””â”€â”€ è‡ªåŠ¨åŒ–å“åº”
```

### 10.2 ç›‘æ§æ•°æ®æ”¶é›†


**ğŸ“ˆ è®¾å¤‡çŠ¶æ€ç›‘æ§**
```yaml
- name: æ”¶é›†è®¾å¤‡çŠ¶æ€ä¿¡æ¯
  cisco.ios.ios_facts:
    gather_subset:
      - hardware
      - interfaces
  register: device_facts

- name: æ£€æŸ¥CPUåˆ©ç”¨ç‡
  cisco.ios.ios_command:
    commands: show processes cpu | include CPU
  register: cpu_usage

- name: æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µ
  cisco.ios.ios_command:
    commands: show memory statistics
  register: memory_usage
```

### 10.3 å‘Šè­¦è§¦å‘æœºåˆ¶


**ğŸš¨ å‘Šè­¦æ¡ä»¶è®¾ç½®**
```yaml
- name: æ£€æŸ¥è®¾å¤‡å¥åº·çŠ¶æ€
  assert:
    that:
      - cpu_usage.stdout[0] | regex_search('(\d+)%') | int < 80
      - device_facts.ansible_facts.ansible_net_memtotal_mb > 100
    fail_msg: "è®¾å¤‡ {{ inventory_hostname }} æ€§èƒ½å¼‚å¸¸"
    success_msg: "è®¾å¤‡ {{ inventory_hostname }} è¿è¡Œæ­£å¸¸"
  ignore_errors: yes
  register: health_check

- name: å‘é€å‘Šè­¦é€šçŸ¥
  mail:
    to: admin@company.com
    subject: "ç½‘ç»œè®¾å¤‡å‘Šè­¦ - {{ inventory_hostname }}"
    body: "è®¾å¤‡å‡ºç°æ€§èƒ½é—®é¢˜ï¼Œè¯·åŠæ—¶å¤„ç†"
  when: health_check is failed
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç½‘ç»œè‡ªåŠ¨åŒ–æœ¬è´¨ï¼šç”¨ç¨‹åºæ›¿ä»£äººå·¥ï¼Œå®ç°ç½‘ç»œè®¾å¤‡çš„æ‰¹é‡ç®¡ç†
ğŸ”¸ è¿æ¥æ–¹å¼é€‰æ‹©ï¼šnetwork_clié€šç”¨ã€NETCONFç°ä»£ã€APIé«˜æ•ˆ
ğŸ”¸ é…å¤‡ç®¡ç†ï¼šå®šæœŸå¤‡ä»½ã€å¿«é€Ÿæ¢å¤ã€ç‰ˆæœ¬æ§åˆ¶
ğŸ”¸ æ‰¹é‡æ“ä½œï¼šåˆ†ç»„ç®¡ç†ã€æ¨¡æ¿åŒ–é…ç½®ã€æ ‡å‡†åŒ–æµç¨‹
ğŸ”¸ ç›‘æ§é›†æˆï¼šä¸»åŠ¨å‘ç°ã€è‡ªåŠ¨å“åº”ã€å‘Šè­¦é€šçŸ¥
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆAnsibleé€‚åˆç½‘ç»œè‡ªåŠ¨åŒ–**
```
æ— ä»£ç†æ¶æ„ï¼š
â”œâ”€â”€ æ— éœ€åœ¨ç½‘ç»œè®¾å¤‡å®‰è£…è½¯ä»¶
â”œâ”€â”€ é€šè¿‡SSH/APIç›´æ¥è¿æ¥
â”œâ”€â”€ é™ä½è®¾å¤‡è´Ÿè½½
â””â”€â”€ ç®€åŒ–ç»´æŠ¤å·¥ä½œ

å£°æ˜å¼é…ç½®ï¼š
â”œâ”€â”€ æè¿°æœŸæœ›çŠ¶æ€
â”œâ”€â”€ è‡ªåŠ¨è®¡ç®—å˜æ›´
â”œâ”€â”€ å¹‚ç­‰æ€§æ“ä½œ
â””â”€â”€ å‡å°‘é…ç½®é”™è¯¯
```

**ğŸ”¹ è¿æ¥æ–¹å¼çš„é€‰æ‹©åŸåˆ™**
```
è®¾å¤‡èƒ½åŠ›è¯„ä¼°ï¼š
â”œâ”€â”€ ä¼ ç»Ÿè®¾å¤‡ï¼šä¼˜é€‰network_cli
â”œâ”€â”€ ç°ä»£è®¾å¤‡ï¼šä¼˜å…ˆNETCONF
â”œâ”€â”€ äº‘å¹³å°ï¼šé¦–é€‰APIæ¥å£
â””â”€â”€ æ··åˆç¯å¢ƒï¼šå¤šç§æ–¹å¼ç»“åˆ
```

### 11.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **æ–°è®¾å¤‡ä¸Šçº¿**ï¼šæ ‡å‡†åŒ–é…ç½®å¿«é€Ÿéƒ¨ç½²
- **å®‰å…¨ç­–ç•¥æ›´æ–°**ï¼šæ‰¹é‡åº”ç”¨å®‰å…¨é…ç½®
- **æ•…éšœå¿«é€Ÿæ¢å¤**ï¼šè‡ªåŠ¨åŒ–æ•…éšœå¤„ç†æµç¨‹  
- **åˆè§„æ€§æ£€æŸ¥**ï¼šå®šæœŸéªŒè¯è®¾å¤‡é…ç½®åˆè§„

**ğŸ”§ è¿ç»´å®è·µ**
- **æ¸è¿›å¼å®æ–½**ï¼šä»ç®€å•ä»»åŠ¡å¼€å§‹ï¼Œé€æ­¥æ‰©å±•
- **æµ‹è¯•éªŒè¯**ï¼šåœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†éªŒè¯åå†ç”Ÿäº§åº”ç”¨
- **æƒé™ç®¡ç†**ï¼šä¸¥æ ¼æ§åˆ¶è‡ªåŠ¨åŒ–è„šæœ¬çš„æ‰§è¡Œæƒé™
- **æ—¥å¿—å®¡è®¡**ï¼šå®Œæ•´è®°å½•æ‰€æœ‰è‡ªåŠ¨åŒ–æ“ä½œ

**ğŸš€ è¿›é˜¶å‘å±•**
- **CI/CDé›†æˆ**ï¼šå°†ç½‘ç»œé…ç½®çº³å…¥æŒç»­é›†æˆæµç¨‹
- **Intent-basedç½‘ç»œ**ï¼šåŸºäºæ„å›¾çš„ç½‘ç»œè‡ªåŠ¨åŒ–
- **AIè¿ç»´**ï¼šç»“åˆæœºå™¨å­¦ä¹ çš„æ™ºèƒ½è¿ç»´
- **å¤šäº‘ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†å¤šäº‘ç¯å¢ƒç½‘ç»œèµ„æº

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- Ansibleç½‘ç»œè‡ªåŠ¨åŒ–è®©ç½‘ç»œç®¡ç†ä»"æ‰‹å·¥ä½œåŠ"å˜æˆ"è‡ªåŠ¨åŒ–å·¥å‚"
- æŒæ¡ä¸‰ç§è¿æ¥æ–¹å¼ï¼Œæ ¹æ®è®¾å¤‡ç‰¹ç‚¹é€‰æ‹©æœ€é€‚åˆçš„æ–¹å¼
- é…ç½®ç®¡ç†çš„æ ¸å¿ƒæ˜¯æ ‡å‡†åŒ–ã€æ¨¡æ¿åŒ–ã€è‡ªåŠ¨åŒ–
- ç›‘æ§é›†æˆè®©ç½‘ç»œè¿ç»´ä»è¢«åŠ¨å“åº”å˜ä¸ºä¸»åŠ¨é¢„é˜²