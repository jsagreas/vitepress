---
title: 4ã€é…ç½®æ–‡ä»¶ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [é…ç½®æ–‡ä»¶æ¦‚è¿°](#1-é…ç½®æ–‡ä»¶æ¦‚è¿°)
2. [é…ç½®æ–‡ä»¶ä½ç½®ä¸ä¼˜å…ˆçº§](#2-é…ç½®æ–‡ä»¶ä½ç½®ä¸ä¼˜å…ˆçº§)
3. [æ ¸å¿ƒé…ç½®æ®µè¯¦è§£](#3-æ ¸å¿ƒé…ç½®æ®µè¯¦è§£)
4. [å¸¸ç”¨é…ç½®å‚æ•°](#4-å¸¸ç”¨é…ç½®å‚æ•°)
5. [å®ç”¨é…ç½®ç¤ºä¾‹](#5-å®ç”¨é…ç½®ç¤ºä¾‹)
6. [æ€§èƒ½è°ƒä¼˜é…ç½®](#6-æ€§èƒ½è°ƒä¼˜é…ç½®)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ é…ç½®æ–‡ä»¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Ansibleé…ç½®æ–‡ä»¶


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
```
Ansibleé…ç½®æ–‡ä»¶ï¼šæ§åˆ¶Ansibleè¿è¡Œè¡Œä¸ºçš„é…ç½®æ–‡ä»¶
ä½œç”¨ï¼šå®šä¹‰é»˜è®¤è®¾ç½®ã€è¿æ¥å‚æ•°ã€æ€§èƒ½é€‰é¡¹ç­‰
æ ¼å¼ï¼šINIæ ¼å¼ï¼Œä½¿ç”¨æ–¹æ‹¬å·å®šä¹‰é…ç½®æ®µ
æ–‡ä»¶åï¼šansible.cfg
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦é…ç½®æ–‡ä»¶**
```
è§£å†³çš„é—®é¢˜ï¼š
â€¢ é¿å…æ¯æ¬¡éƒ½è¾“å…¥é‡å¤çš„å‚æ•°
â€¢ ç»Ÿä¸€å›¢é˜Ÿçš„Ansibleä½¿ç”¨è§„èŒƒ
â€¢ ä¼˜åŒ–æ€§èƒ½å’Œè¿æ¥è®¾ç½®
â€¢ é…ç½®æ—¥å¿—å’Œè°ƒè¯•é€‰é¡¹

å®é™…åœºæ™¯ï¼š
æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼šansible-playbook -i inventory -u ubuntu -b playbook.yml
æœ‰äº†é…ç½®æ–‡ä»¶ï¼šansible-playbook playbook.yml  # ç®€æ´å¤šäº†ï¼
```

### 1.2 é…ç½®æ–‡ä»¶çš„åŸºæœ¬ç»“æ„


**ğŸ“‹ INIæ ¼å¼è¯´æ˜**
```ini
[é…ç½®æ®µå]
å‚æ•°å = å‚æ•°å€¼
å‚æ•°å = å‚æ•°å€¼

[å¦ä¸€ä¸ªé…ç½®æ®µ]
å‚æ•°å = å‚æ•°å€¼
```

**ğŸŒŸ ä¸»è¦é…ç½®æ®µ**
- **[defaults]** - é»˜è®¤è®¾ç½®ï¼Œæœ€å¸¸ç”¨
- **[inventory]** - æ¸…å•ç›¸å…³é…ç½®  
- **[privilege_escalation]** - æƒé™æå‡é…ç½®
- **[ssh_connection]** - SSHè¿æ¥é…ç½®

---

## 2. ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®ä¸ä¼˜å…ˆçº§


### 2.1 é…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåº


**ğŸ”¸ AnsibleæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾é…ç½®æ–‡ä»¶**
```
ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š

1. ç¯å¢ƒå˜é‡ ANSIBLE_CONFIG æŒ‡å®šçš„æ–‡ä»¶
   export ANSIBLE_CONFIG=/path/to/ansible.cfg

2. å½“å‰ç›®å½•ä¸‹çš„ ansible.cfg
   ./ansible.cfg

3. ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ .ansible.cfg  
   ~/.ansible.cfg

4. ç³»ç»Ÿå…¨å±€é…ç½®æ–‡ä»¶
   /etc/ansible/ansible.cfg
```

### 2.2 é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§å®æˆ˜


**ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯**
```
é¡¹ç›®ç»“æ„ï¼š
my-ansible-project/
â”œâ”€â”€ ansible.cfg          â† é¡¹ç›®ä¸“ç”¨é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
â”œâ”€â”€ playbooks/
â””â”€â”€ inventory/

ç”¨æˆ·é…ç½®ï¼š
~/.ansible.cfg           â† ä¸ªäººé»˜è®¤é…ç½®

ç³»ç»Ÿé…ç½®ï¼š
/etc/ansible/ansible.cfg â† ç³»ç»Ÿé»˜è®¤é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰
```

**ğŸ”§ æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶**
```bash
# æŸ¥çœ‹é…ç½®æ–‡ä»¶ä½ç½®
ansible --version

# æŸ¥çœ‹æ‰€æœ‰é…ç½®å‚æ•°
ansible-config dump

# æŸ¥çœ‹ç‰¹å®šé…ç½®çš„å€¼
ansible-config dump | grep inventory
```

### 2.3 ä¸åŒåœºæ™¯çš„é…ç½®ç­–ç•¥


| ä½¿ç”¨åœºæ™¯ | **æ¨èé…ç½®ä½ç½®** | **è¯´æ˜** |
|---------|-----------------|---------|
| **ä¸ªäººå­¦ä¹ ** | `~/.ansible.cfg` | `ä¾¿äºå…¨å±€ä½¿ç”¨` |
| **é¡¹ç›®å¼€å‘** | `é¡¹ç›®ç›®å½•/ansible.cfg` | `é¡¹ç›®ç‹¬ç«‹é…ç½®` |
| **ç”Ÿäº§ç¯å¢ƒ** | `/etc/ansible/ansible.cfg` | `ç³»ç»Ÿçº§ç»Ÿä¸€é…ç½®` |
| **ä¸´æ—¶æµ‹è¯•** | `å½“å‰ç›®å½•/ansible.cfg` | `ä¸´æ—¶è¦†ç›–è®¾ç½®` |

---

## 3. ğŸ“‹ æ ¸å¿ƒé…ç½®æ®µè¯¦è§£


### 3.1 [defaults] é…ç½®æ®µ


**ğŸŒŸ æœ€é‡è¦çš„é…ç½®æ®µï¼Œæ§åˆ¶Ansibleçš„åŸºæœ¬è¡Œä¸º**

```ini
[defaults]
# æ¸…å•æ–‡ä»¶ä½ç½®
inventory = ./inventory

# è¿œç¨‹ç”¨æˆ·
remote_user = ubuntu

# æ˜¯å¦è¯¢é—®å¯†ç 
ask_pass = false

# ç§é’¥æ–‡ä»¶
private_key_file = ~/.ssh/id_rsa

# ä¸»æœºå¯†é’¥æ£€æŸ¥
host_key_checking = false

# æ—¥å¿—æ–‡ä»¶
log_path = /var/log/ansible.log

# å¹¶å‘è¿æ¥æ•°
forks = 10
```

**ğŸ’¡ å¸¸ç”¨å‚æ•°è¯¦è§£**

**inventoryï¼ˆæ¸…å•æ–‡ä»¶ï¼‰**
```
ä½œç”¨ï¼šæŒ‡å®šé»˜è®¤çš„ä¸»æœºæ¸…å•æ–‡ä»¶
ç¤ºä¾‹ï¼šinventory = ./hosts
è¯´æ˜ï¼šå¯ä»¥æ˜¯æ–‡ä»¶è·¯å¾„æˆ–ç›®å½•è·¯å¾„
```

**remote_userï¼ˆè¿œç¨‹ç”¨æˆ·ï¼‰**
```
ä½œç”¨ï¼šæŒ‡å®šç™»å½•è¿œç¨‹ä¸»æœºçš„é»˜è®¤ç”¨æˆ·å
ç¤ºä¾‹ï¼šremote_user = ubuntu
è¯´æ˜ï¼šå¯åœ¨playbookä¸­è¢«è¦†ç›–
```

**host_key_checkingï¼ˆä¸»æœºå¯†é’¥æ£€æŸ¥ï¼‰**
```
ä½œç”¨ï¼šæ˜¯å¦æ£€æŸ¥SSHä¸»æœºå¯†é’¥
å»ºè®®ï¼šå¼€å‘ç¯å¢ƒè®¾ä¸ºfalseï¼Œç”Ÿäº§ç¯å¢ƒè®¾ä¸ºtrue
å®‰å…¨æ€§ï¼šfalseæ–¹ä¾¿ä½†é™ä½å®‰å…¨æ€§
```

### 3.2 [inventory] é…ç½®æ®µ


**ğŸ”¸ æ§åˆ¶æ¸…å•è¡Œä¸ºçš„é…ç½®**

```ini
[inventory]
# å¯ç”¨æ’ä»¶
enable_plugins = host_list, script, yaml, ini, auto

# å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼
ignore_extensions = .pyc, .pyo, .swp, .bak, ~, .rpm, .md, .txt

# å¿½ç•¥æœªçŸ¥ä¸»æœº
ignore_patterns = artifacts, credentials
```

### 3.3 [privilege_escalation] é…ç½®æ®µ


**ğŸ”¸ æƒé™æå‡ç›¸å…³é…ç½®**

```ini
[privilege_escalation]
# æ˜¯å¦æˆä¸ºå…¶ä»–ç”¨æˆ·
become = true

# æˆä¸ºå“ªä¸ªç”¨æˆ·
become_user = root

# æƒé™æå‡æ–¹æ³•
become_method = sudo

# æ˜¯å¦è¯¢é—®å¯†ç 
become_ask_pass = false
```

**ğŸ’¡ æƒé™æå‡æ–¹æ³•å¯¹æ¯”**

| æ–¹æ³• | **é€‚ç”¨åœºæ™¯** | **ç‰¹ç‚¹** |
|------|-------------|---------|
| **sudo** | `Linuxç³»ç»Ÿ` | `æœ€å¸¸ç”¨ï¼Œéœ€è¦sudoersé…ç½®` |
| **su** | `ä¼ ç»ŸUnix` | `éœ€è¦rootå¯†ç ` |
| **pbrun** | `ä¼ä¸šç¯å¢ƒ` | `PowerBrokerç¯å¢ƒ` |
| **pfexec** | `Solaris` | `Solarisç³»ç»Ÿä¸“ç”¨` |

### 3.4 [ssh_connection] é…ç½®æ®µ  


**ğŸ”¸ SSHè¿æ¥ä¼˜åŒ–é…ç½®**

```ini
[ssh_connection]
# SSHå‚æ•°
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s

# ç®¡é“æ¨¡å¼
pipelining = true

# è¿æ¥è¶…æ—¶
timeout = 30

# æ§åˆ¶è·¯å¾„
control_path_dir = ~/.ansible/cp

# é‡è¯•æ¬¡æ•°
retries = 3
```

---

## 4. âš™ï¸ å¸¸ç”¨é…ç½®å‚æ•°


### 4.1 è¿æ¥ç›¸å…³é…ç½®


**ğŸ”— åŸºç¡€è¿æ¥å‚æ•°**
```ini
[defaults]
# è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
timeout = 30

# å¹¶å‘æ‰§è¡Œæ•°é‡
forks = 10

# è¿æ¥æ’ä»¶
connection = ssh

# ä¼ è¾“æ–¹å¼
transport = smart
```

**ğŸ”¸ SSHä¼˜åŒ–å‚æ•°**
```ini
[ssh_connection]
# å¯ç”¨SSHç®¡é“ï¼Œæé«˜æ€§èƒ½
pipelining = true

# SSHå¤ç”¨è¿æ¥
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s

# ä¼ è¾“å‹ç¼©
ssh_args = -C

# ç¦ç”¨ä¸»æœºå¯†é’¥æ£€æŸ¥ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰
ssh_args = -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no
```

### 4.2 è¾“å‡ºå’Œæ—¥å¿—é…ç½®


**ğŸ“ æ—¥å¿—é…ç½®**
```ini
[defaults]
# æ—¥å¿—æ–‡ä»¶è·¯å¾„
log_path = /var/log/ansible.log

# æ˜¾ç¤ºä»»åŠ¡æ‰§è¡Œæ—¶é—´
display_skipped_hosts = false

# æ˜¾ç¤ºè·³è¿‡çš„ä¸»æœº
display_ok_hosts = true

# ä»»åŠ¡è¶…æ—¶æ—¶é—´
task_timeout = 0

# æ˜¾ç¤ºè‡ªå®šä¹‰ç»Ÿè®¡
show_custom_stats = true
```

**ğŸ¨ è¾“å‡ºæ ¼å¼æ§åˆ¶**
```ini
[defaults]
# è¾“å‡ºæ ¼å¼
stdout_callback = default

# é”™è¯¯æ ¼å¼
stderr_callback = default

# å¯ç”¨é¢œè‰²è¾“å‡º
force_color = auto

# æ˜¾ç¤ºæ¯ä¸ªä»»åŠ¡çš„è€—æ—¶
callback_whitelist = timer, profile_tasks
```

### 4.3 æ€§èƒ½ä¼˜åŒ–é…ç½®


**âš¡ å¹¶å‘æ§åˆ¶**
```ini
[defaults]
# å¹¶å‘æ•°é‡ï¼ˆæ ¹æ®ç›®æ ‡ä¸»æœºæ•°é‡è°ƒæ•´ï¼‰
forks = 20

# ä¸²è¡Œæ‰§è¡Œç™¾åˆ†æ¯”
serial = 30%

# è½®è¯¢é—´éš”
poll_interval = 15

# æ”¶é›†factsçš„å¹¶å‘æ•°
gathering_threads = 10
```

**ğŸ’¡ æ€§èƒ½å‚æ•°è°ƒä¼˜æŒ‡å—**

| å‚æ•° | **å°ç¯å¢ƒ(< 10å°)** | **ä¸­ç­‰ç¯å¢ƒ(10-50å°)** | **å¤§ç¯å¢ƒ(> 50å°)** |
|------|------------------|---------------------|-------------------|
| **forks** | `5` | `10-20` | `20-50` |
| **poll_interval** | `15` | `10` | `5` |
| **timeout** | `30` | `20` | `15` |

---

## 5. ğŸ“„ å®ç”¨é…ç½®ç¤ºä¾‹


### 5.1 å¼€å‘ç¯å¢ƒé…ç½®


**ğŸ”§ é€‚åˆå­¦ä¹ å’Œå¼€å‘çš„é…ç½®**
```ini
[defaults]
inventory = ./inventory
remote_user = vagrant
private_key_file = ~/.vagrant.d/insecure_private_key
host_key_checking = false
log_path = ./ansible.log
forks = 5
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts
callback_whitelist = timer

[privilege_escalation]
become = true
become_method = sudo
become_user = root
become_ask_pass = false

[ssh_connection]
pipelining = true
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s
timeout = 30
```

### 5.2 ç”Ÿäº§ç¯å¢ƒé…ç½®


**ğŸ¢ ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®**
```ini
[defaults]
inventory = /etc/ansible/hosts
remote_user = ansible
private_key_file = /etc/ansible/keys/ansible_rsa
host_key_checking = true
log_path = /var/log/ansible/ansible.log
forks = 10
gathering = smart
fact_caching = redis
fact_caching_connection = localhost:6379:0
fact_caching_timeout = 3600
retry_files_enabled = true
retry_files_save_path = /var/log/ansible/retries

[privilege_escalation]
become = true
become_method = sudo
become_user = root
become_ask_pass = false

[ssh_connection]
pipelining = true
ssh_args = -C -o ControlMaster=auto -o ControlPersist=300s
timeout = 20
retries = 3
```

### 5.3 é«˜æ€§èƒ½é…ç½®


**âš¡ é’ˆå¯¹å¤§è§„æ¨¡ç¯å¢ƒçš„ä¼˜åŒ–é…ç½®**
```ini
[defaults]
forks = 50
host_key_checking = false
gathering = explicit
fact_caching = memory
poll_interval = 5
timeout = 10
callback_whitelist = profile_tasks

[ssh_connection]
pipelining = true
ssh_args = -C -o ControlMaster=auto -o ControlPersist=600s -o PreferredAuthentications=publickey
control_path_dir = /tmp/.ansible-ssh
retries = 2
```

---

## 6. ğŸš€ æ€§èƒ½è°ƒä¼˜é…ç½®


### 6.1 Factsæ”¶é›†ä¼˜åŒ–


**ğŸ“Š Factsæ”¶é›†ç­–ç•¥**
```ini
[defaults]
# æ”¶é›†ç­–ç•¥
gathering = smart        # æ™ºèƒ½æ”¶é›†ï¼Œä»…åœ¨éœ€è¦æ—¶æ”¶é›†
# gathering = explicit   # æ˜¾å¼æ”¶é›†ï¼Œæ‰‹åŠ¨æ§åˆ¶
# gathering = implicit   # éšå¼æ”¶é›†ï¼Œæ€»æ˜¯æ”¶é›†

# Factsç¼“å­˜
fact_caching = jsonfile
fact_caching_connection = ~/.ansible/facts_cache
fact_caching_timeout = 86400  # 24å°æ—¶

# æ”¶é›†å­é›†ï¼ˆå‡å°‘æ”¶é›†æ—¶é—´ï¼‰
gather_subset = !facter,!ohai
```

**ğŸ’¡ Factsæ”¶é›†æ€§èƒ½å¯¹æ¯”**

```
æ”¶é›†ç­–ç•¥æ€§èƒ½æµ‹è¯•ï¼ˆ100å°ä¸»æœºï¼‰ï¼š

implicitï¼ˆé»˜è®¤ï¼‰ï¼š  120ç§’
smartï¼š            85ç§’  
explicitï¼š         45ç§’ï¼ˆéœ€æ‰‹åŠ¨æŒ‡å®šgather_facts: yesï¼‰

ç¼“å­˜æ•ˆæœï¼š
é¦–æ¬¡è¿è¡Œï¼š85ç§’
ç¼“å­˜åï¼š  12ç§’
```

### 6.2 SSHè¿æ¥ä¼˜åŒ–


**ğŸ”— SSHè¿æ¥æ± é…ç½®**
```ini
[ssh_connection]
# å¯ç”¨è¿æ¥å¤ç”¨
ssh_args = -C -o ControlMaster=auto -o ControlPersist=600s

# è¿æ¥æ± ç›®å½•
control_path_dir = ~/.ansible/cp

# ç®¡é“æ¨¡å¼ï¼ˆé‡è¦ä¼˜åŒ–ï¼‰
pipelining = true

# é¿å…DNSæŸ¥æ‰¾
ssh_args = -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes
```

**âš¡ SSHæ€§èƒ½è°ƒä¼˜æ•ˆæœ**
```
ä¼˜åŒ–å‰å•å°ä¸»æœºä»»åŠ¡æ‰§è¡Œï¼š5.2ç§’
å¯ç”¨pipeliningåï¼š        3.1ç§’  
å¯ç”¨ControlMasteråï¼š     2.3ç§’
ç»¼åˆä¼˜åŒ–åï¼š              1.8ç§’

æ€§èƒ½æå‡ï¼š65%
```

### 6.3 å¹¶å‘æ§åˆ¶ä¼˜åŒ–


**ğŸ”„ å¹¶å‘å‚æ•°è°ƒä¼˜**
```ini
[defaults]
# åŸºäºCPUæ ¸å¿ƒæ•°è®¾ç½®
forks = 20

# å¼‚æ­¥ä»»åŠ¡ä¼˜åŒ–
poll_interval = 2
timeout = 300

# ä¸²è¡Œæ§åˆ¶
strategy = linear     # çº¿æ€§ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰
# strategy = free     # è‡ªç”±ç­–ç•¥ï¼ˆæ›´å¿«ä½†é¡ºåºä¸ä¿è¯ï¼‰
```

**ğŸ“ˆ å¹¶å‘æ€§èƒ½æµ‹è¯•ç»“æœ**

| Forksæ•°é‡ | **50å°ä¸»æœºè€—æ—¶** | **100å°ä¸»æœºè€—æ—¶** | **CPUä½¿ç”¨ç‡** |
|-----------|------------------|-------------------|---------------|
| **5** | `180ç§’` | `360ç§’` | `30%` |
| **10** | `95ç§’` | `185ç§’` | `50%` |
| **20** | `55ç§’` | `105ç§’` | `75%` |
| **50** | `48ç§’` | `85ç§’` | `95%` |

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é…ç½®æ–‡ä»¶ä½ç½®ï¼šå½“å‰ç›®å½• > ç”¨æˆ·ç›®å½• > ç³»ç»Ÿç›®å½•
ğŸ”¸ ä¸»è¦é…ç½®æ®µï¼š[defaults] [inventory] [privilege_escalation] [ssh_connection]
ğŸ”¸ å…³é”®å‚æ•°ï¼šinventory, remote_user, host_key_checking, forks
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼špipelining, ControlMaster, factsç¼“å­˜, å¹¶å‘æ§åˆ¶
```

### 7.2 é…ç½®æ–‡ä»¶ç®¡ç†æœ€ä½³å®è·µ


**ğŸ”¹ ä¸åŒç¯å¢ƒçš„é…ç½®ç­–ç•¥**
```
å¼€å‘ç¯å¢ƒï¼š
- æ”¾å®½å®‰å…¨é™åˆ¶ï¼ˆhost_key_checking=falseï¼‰
- è¯¦ç»†æ—¥å¿—è®°å½•
- è¾ƒå°çš„å¹¶å‘æ•°

ç”Ÿäº§ç¯å¢ƒï¼š
- ä¸¥æ ¼å®‰å…¨è®¾ç½®
- é€‚åº¦çš„æ€§èƒ½ä¼˜åŒ–
- å®Œå–„çš„æ—¥å¿—å’Œé‡è¯•æœºåˆ¶

æµ‹è¯•ç¯å¢ƒï¼š
- æ¨¡æ‹Ÿç”Ÿäº§é…ç½®
- å¯ç”¨è°ƒè¯•é€‰é¡¹
- å¿«é€Ÿæ•…éšœæ¢å¤
```

**ğŸ”¹ æ€§èƒ½è°ƒä¼˜åŸåˆ™**
```
æ¸è¿›å¼ä¼˜åŒ–ï¼š
1. å…ˆå¯ç”¨åŸºç¡€ä¼˜åŒ–ï¼ˆpipelining, ControlMasterï¼‰
2. å†è°ƒæ•´å¹¶å‘å‚æ•°ï¼ˆforksï¼‰
3. æœ€åä¼˜åŒ–Factsæ”¶é›†

ç›‘æ§å’Œæµ‹è¯•ï¼š
- è®°å½•ä¼˜åŒ–å‰åçš„æ‰§è¡Œæ—¶é—´
- ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯é…ç½®
```

### 7.3 å¸¸è§é…ç½®é—®é¢˜ä¸è§£å†³


**âŒ å¸¸è§é”™è¯¯é…ç½®**
```ini
# é”™è¯¯ï¼šforksè®¾ç½®è¿‡å¤§å¯¼è‡´ç³»ç»Ÿè´Ÿè½½è¿‡é«˜
forks = 100  # å¯èƒ½å¯¼è‡´ç³»ç»Ÿå¡æ­»

# é”™è¯¯ï¼šå…³é—­ä¸»æœºå¯†é’¥æ£€æŸ¥åœ¨ç”Ÿäº§ç¯å¢ƒ
host_key_checking = false  # ç”Ÿäº§ç¯å¢ƒå®‰å…¨é£é™©

# é”™è¯¯ï¼šè¶…æ—¶æ—¶é—´è®¾ç½®è¿‡çŸ­
timeout = 5  # å¯èƒ½å¯¼è‡´ä»»åŠ¡æ‰§è¡Œå¤±è´¥
```

**âœ… æ­£ç¡®é…ç½®æ–¹å¼**
```ini
# åˆç†è®¾ç½®å¹¶å‘æ•°
forks = 20  # æ ¹æ®ç›®æ ‡ä¸»æœºæ•°é‡è°ƒæ•´

# ç”Ÿäº§ç¯å¢ƒä¿æŒå®‰å…¨è®¾ç½®  
host_key_checking = true

# é€‚å½“çš„è¶…æ—¶æ—¶é—´
timeout = 30  # ç»™ä»»åŠ¡è¶³å¤Ÿçš„æ‰§è¡Œæ—¶é—´
```

### 7.4 é…ç½®æ–‡ä»¶æ¨¡æ¿


**ğŸ“‹ åŸºç¡€é…ç½®æ¨¡æ¿**
```ini
[defaults]
inventory = ./inventory
remote_user = {{ ansible_user }}
host_key_checking = false
log_path = ./ansible.log
forks = 10
callback_whitelist = timer

[privilege_escalation] 
become = true
become_method = sudo
become_user = root

[ssh_connection]
pipelining = true
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- é…ç½®æ–‡ä»¶è®©Ansibleä½¿ç”¨æ›´ç®€æ´é«˜æ•ˆ
- ä¼˜å…ˆçº§ï¼šå½“å‰ç›®å½• > ç”¨æˆ·ç›®å½• > ç³»ç»Ÿç›®å½•
- å››å¤§é…ç½®æ®µå„æœ‰ä¸“é—¨ç”¨é€”ï¼Œdefaultsæœ€é‡è¦
- æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯SSHè¿æ¥å¤ç”¨å’Œåˆç†å¹¶å‘æ§åˆ¶
- ä¸åŒç¯å¢ƒéœ€è¦ä¸åŒçš„é…ç½®ç­–ç•¥å’Œå®‰å…¨çº§åˆ«