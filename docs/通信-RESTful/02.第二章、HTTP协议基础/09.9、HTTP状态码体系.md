---
title: 9、HTTP状态码体系
---
## 📚 目录

1. [什么是HTTP状态码](#1-什么是HTTP状态码)
2. [状态码的分类体系](#2-状态码的分类体系)
3. [常用状态码详解](#3-常用状态码详解)
4. [状态码选择原则](#4-状态码选择原则)
5. [实际应用场景](#5-实际应用场景)
6. [核心要点总结](#6-核心要点总结)

---

## 1. 🎯 什么是HTTP状态码


### 1.1 状态码的本质


**通俗理解**：状态码就像是**服务器给客户端的回执单**，告诉你这次请求的处理结果。

```
生活中的类比：
你去银行办业务 → 发送HTTP请求
银行处理你的业务 → 服务器处理请求
银行给你的回执单 → HTTP状态码

回执单内容：
✅ "办理成功" → 200 OK
❌ "账户不存在" → 404 Not Found  
⚠️ "系统维护中" → 503 Service Unavailable
```

### 1.2 状态码的作用


> 💡 **核心作用**：让客户端知道请求的处理结果，以便采取相应的后续行动

**具体功能**：
- 🎯 **结果通知**：告诉你操作成功还是失败
- 🔍 **错误定位**：失败时给出具体的错误类型
- 🚀 **流程控制**：指导客户端下一步该怎么做
- 📊 **监控统计**：帮助开发者分析系统运行状况

### 1.3 状态码的格式


**基本结构**：`状态码 + 状态短语`

```
示例：
200 OK          → 成功
404 Not Found   → 找不到资源
500 Internal Server Error → 服务器内部错误
```

---

## 2. 📊 状态码的分类体系


### 2.1 五大类别概览


| 类别 | **含义** | **通俗解释** | **常见场景** |
|------|---------|-------------|-------------|
| **1xx** | `信息响应` | "收到了，正在处理中..." | 请求处理中 |
| **2xx** | `成功响应` | "搞定了！" | 操作成功 |
| **3xx** | `重定向` | "去别的地方找找" | 资源迁移 |
| **4xx** | `客户端错误` | "你的请求有问题" | 用户操作错误 |
| **5xx** | `服务器错误` | "我们这边出问题了" | 系统故障 |

### 2.2 详细分类解释


#### 🔄 1xx 信息类（继续处理）


**含义**：服务器已收到请求，正在处理中，请继续等待。

```
生活类比：
你：老板，我要点餐
老板：好的，我听到了，正在准备菜单给你看

技术场景：
客户端：我要上传一个大文件
服务器：100 Continue（收到了，你继续传）
```

**常见状态码**：
- `100 Continue` - 继续发送请求体
- `101 Switching Protocols` - 协议切换中

#### ✅ 2xx 成功类（操作成功）


**含义**：请求已被成功接收、理解并处理。

```
就像考试成绩：
200 → 满分！完美完成
201 → 优秀！不仅完成了，还创建了新东西
204 → 及格！完成了但没什么要说的
```

#### 🔀 3xx 重定向类（需要进一步操作）


**含义**：需要采取进一步的操作来完成请求。

```
生活类比：
你去找老朋友，发现他搬家了
邻居说：他搬到新地址了，地址是xxx
你：好的，我去新地址找他

HTTP场景：
客户端：我要访问 old-url
服务器：301 资源永久搬到 new-url 了
客户端：好的，我去 new-url
```

#### ❌ 4xx 客户端错误类（你的问题）


**含义**：请求包含语法错误或无法完成请求。

```
常见情况：
400 → 你说话我听不懂（请求格式错误）
401 → 你没登录，不能进来（需要认证）
403 → 你没权限做这件事（权限不足）
404 → 你要找的东西不存在（资源不存在）
```

#### 💥 5xx 服务器错误类（我们的问题）


**含义**：服务器在处理请求时发生了错误。

```
生活类比：
你去餐厅点餐，一切正常
但是：
500 → 厨房设备坏了（服务器内部错误）
502 → 厨师请假了（网关错误）
503 → 餐厅装修中（服务不可用）
```

---

## 3. 🔍 常用状态码详解


### 3.1 成功状态码（2xx系列）


#### 🎯 200 OK - 一切正常


**含义**：请求成功，服务器返回了你要的数据。

```javascript
// 典型场景：获取用户信息
GET /api/user/123
Response: 200 OK
{
  "id": 123,
  "name": "张三",
  "email": "zhangsan@example.com"
}
```

**使用场景**：
- ✅ 成功获取数据
- ✅ 成功更新资源
- ✅ 成功删除资源（返回确认信息）

#### 🆕 201 Created - 创建成功


**含义**：不仅请求成功了，还创建了新资源。

```javascript
// 典型场景：创建新用户
POST /api/users
{
  "name": "李四",
  "email": "lisi@example.com"
}

Response: 201 Created
{
  "id": 456,
  "name": "李四", 
  "email": "lisi@example.com",
  "created_at": "2025-08-06T15:30:00Z"
}
```

#### 📝 204 No Content - 成功但无内容


**含义**：操作成功，但没有内容要返回。

```javascript
// 典型场景：删除资源
DELETE /api/user/123
Response: 204 No Content
(没有响应体)

// 或者：更新资源
PUT /api/user/123
{
  "name": "张三-修改"
}
Response: 204 No Content
```

### 3.2 客户端错误（4xx系列）


#### ❓ 400 Bad Request - 请求格式错误


**含义**：你的请求有语法错误，服务器看不懂。

```javascript
// 错误示例：缺少必要字段
POST /api/users
{
  "name": ""  // 姓名为空
}

Response: 400 Bad Request
{
  "error": "姓名不能为空",
  "code": "INVALID_NAME"
}
```

**常见原因**：
- 🔸 JSON格式错误
- 🔸 缺少必填字段
- 🔸 参数类型不对
- 🔸 数据验证失败

#### 🔐 401 Unauthorized - 需要认证


**含义**：你没有登录或者登录凭据无效。

```javascript
// 未登录访问需要权限的接口
GET /api/profile
Response: 401 Unauthorized
{
  "error": "请先登录",
  "code": "AUTH_REQUIRED"
}
```

#### 🚫 403 Forbidden - 权限不足


**含义**：你已经登录了，但没有权限做这件事。

```javascript
// 普通用户尝试删除其他用户
DELETE /api/user/999
Response: 403 Forbidden
{
  "error": "权限不足，无法删除其他用户",
  "code": "PERMISSION_DENIED"
}
```

> ⚠️ **401 vs 403 的区别**：
> - `401`：你是谁？（身份认证问题）
> - `403`：我知道你是谁，但你不能这么做（权限问题）

#### 🔍 404 Not Found - 资源不存在


**含义**：你要找的东西不存在。

```javascript
// 访问不存在的用户
GET /api/user/99999
Response: 404 Not Found
{
  "error": "用户不存在",
  "code": "USER_NOT_FOUND"
}
```

#### 🚷 405 Method Not Allowed - 方法不允许


**含义**：这个接口不支持你使用的HTTP方法。

```javascript
// 对只读接口使用POST方法
POST /api/system/info
Response: 405 Method Not Allowed
{
  "error": "此接口仅支持GET方法",
  "allowed_methods": ["GET"]
}
```

### 3.3 服务器错误（5xx系列）


#### 💥 500 Internal Server Error - 服务器内部错误


**含义**：服务器出了问题，但不知道具体是什么问题。

```javascript
// 服务器代码bug或数据库连接失败
GET /api/users
Response: 500 Internal Server Error
{
  "error": "服务器内部错误，请稍后重试",
  "code": "INTERNAL_ERROR"
}
```

#### 🌐 502 Bad Gateway - 网关错误


**含义**：服务器作为网关时，从上游服务器收到无效响应。

```
架构示意：
客户端 → 负载均衡器 → 应用服务器
                ↑
            这里出问题了

常见原因：
- 应用服务器宕机
- 应用服务器响应超时
- 应用服务器返回错误格式
```

#### 🔧 503 Service Unavailable - 服务不可用


**含义**：服务器暂时不可用，通常是维护或过载。

```javascript
Response: 503 Service Unavailable
{
  "error": "系统维护中，预计30分钟后恢复",
  "retry_after": 1800  // 秒
}
```

---

## 4. 🎯 状态码选择原则


### 4.1 选择的基本原则


> 💡 **核心原则**：状态码要准确反映实际情况，让客户端知道该怎么处理

```
选择思路：
1. 先判断是成功还是失败
   ✅ 成功 → 2xx
   ❌ 失败 → 4xx或5xx

2. 如果是失败，判断责任方
   👤 客户端的问题 → 4xx  
   🖥️ 服务器的问题 → 5xx

3. 根据具体情况选择详细状态码
```

### 4.2 常见场景的状态码选择


#### 📝 创建资源


| 情况 | **状态码** | **说明** |
|------|-----------|---------|
| 创建成功 | `201 Created` | 资源已创建 |
| 参数错误 | `400 Bad Request` | 请求数据有问题 |
| 资源已存在 | `409 Conflict` | 避免重复创建 |
| 权限不足 | `403 Forbidden` | 无创建权限 |

#### 🔍 查询资源


| 情况 | **状态码** | **说明** |
|------|-----------|---------|
| 查询成功 | `200 OK` | 返回数据 |
| 资源不存在 | `404 Not Found` | 找不到资源 |
| 参数错误 | `400 Bad Request` | 查询条件错误 |
| 权限不足 | `403 Forbidden` | 无查看权限 |

#### ✏️ 更新资源


| 情况 | **状态码** | **说明** |
|------|-----------|---------|
| 更新成功(返回数据) | `200 OK` | 更新并返回新数据 |
| 更新成功(无返回) | `204 No Content` | 更新成功但不返回数据 |
| 资源不存在 | `404 Not Found` | 要更新的资源不存在 |
| 参数错误 | `400 Bad Request` | 更新数据有问题 |

#### 🗑️ 删除资源


| 情况 | **状态码** | **说明** |
|------|-----------|---------|
| 删除成功 | `204 No Content` | 删除成功 |
| 资源不存在 | `404 Not Found` | 要删除的资源不存在 |
| 权限不足 | `403 Forbidden` | 无删除权限 |

### 4.3 状态码使用的最佳实践


**✅ 正确做法**：
```javascript
// 明确具体的状态码
if (user.exists()) {
    return response(409, "用户已存在");  // 明确冲突原因
} else {
    return response(201, newUser);      // 明确创建成功
}
```

**❌ 错误做法**：
```javascript
// 所有错误都返回500
if (error) {
    return response(500, "操作失败");  // 太笼统，不利于调试
}
```

---

## 5. 🛠️ 实际应用场景


### 5.1 RESTful API中的状态码运用


#### 用户管理API示例


```javascript
// 获取用户列表
GET /api/users
✅ 200 OK - 成功返回用户列表
❌ 401 Unauthorized - 未登录
❌ 403 Forbidden - 无查看权限

// 获取单个用户
GET /api/users/123
✅ 200 OK - 返回用户信息
❌ 404 Not Found - 用户不存在
❌ 403 Forbidden - 无查看该用户权限

// 创建用户
POST /api/users
✅ 201 Created - 用户创建成功
❌ 400 Bad Request - 参数错误
❌ 409 Conflict - 用户名或邮箱已存在
❌ 422 Unprocessable Entity - 数据验证失败

// 更新用户
PUT /api/users/123
✅ 200 OK - 更新成功并返回新数据
✅ 204 No Content - 更新成功无返回数据
❌ 404 Not Found - 用户不存在
❌ 400 Bad Request - 参数错误

// 删除用户
DELETE /api/users/123
✅ 204 No Content - 删除成功
❌ 404 Not Found - 用户不存在
❌ 403 Forbidden - 无删除权限
```

### 5.2 前端处理状态码的策略


```javascript
// 统一的HTTP状态码处理
function handleResponse(response) {
    switch(response.status) {
        case 200:
        case 201:
        case 204:
            // 成功处理
            return response.data;
            
        case 400:
            // 显示参数错误信息
            showError("请求参数有误：" + response.data.error);
            break;
            
        case 401:
            // 跳转到登录页
            redirectToLogin();
            break;
            
        case 403:
            // 显示权限不足提示
            showError("权限不足，无法执行此操作");
            break;
            
        case 404:
            // 显示资源不存在
            showError("请求的资源不存在");
            break;
            
        case 500:
        case 502:
        case 503:
            // 显示服务器错误
            showError("服务器繁忙，请稍后重试");
            break;
            
        default:
            showError("未知错误：" + response.status);
    }
}
```

### 5.3 后端统一异常处理


```javascript
// Express.js 统一异常处理中间件
function errorHandler(error, req, res, next) {
    // 验证错误
    if (error.name === 'ValidationError') {
        return res.status(400).json({
            error: '参数验证失败',
            details: error.details
        });
    }
    
    // 认证错误
    if (error.name === 'UnauthorizedError') {
        return res.status(401).json({
            error: '认证失败，请重新登录'
        });
    }
    
    // 权限错误
    if (error.name === 'ForbiddenError') {
        return res.status(403).json({
            error: '权限不足'
        });
    }
    
    // 资源不存在
    if (error.name === 'NotFoundError') {
        return res.status(404).json({
            error: '资源不存在'
        });
    }
    
    // 服务器内部错误
    console.error('服务器错误:', error);
    return res.status(500).json({
        error: '服务器内部错误'
    });
}
```

---

## 6. 📋 核心要点总结


### 6.1 必须掌握的核心概念


```
🔸 状态码本质：服务器给客户端的"回执单"，说明处理结果
🔸 五大分类：1xx信息、2xx成功、3xx重定向、4xx客户端错误、5xx服务器错误
🔸 常用状态码：200、201、204、400、401、403、404、500
🔸 选择原则：准确反映实际情况，指导客户端后续操作
🔸 实际应用：RESTful API设计、前端错误处理、后端异常管理
```

### 6.2 关键理解要点


**🔹 状态码的作用机制**
```
请求流程：
客户端发请求 → 服务器处理 → 返回状态码 → 客户端根据状态码决定下一步

就像：
你问问题 → 老师思考 → 给你答案 → 你根据答案决定是否继续问
```

**🔹 4xx vs 5xx 的本质区别**
```
4xx：你的问题
- 请求格式错误、权限不足、资源不存在等
- 客户端需要修改请求

5xx：我们的问题  
- 服务器bug、数据库故障、系统维护等
- 客户端稍后重试即可
```

**🔹 状态码选择的思考路径**
```
1. 操作是否成功？
   ✅ 成功 → 选择 2xx
   ❌ 失败 → 继续判断

2. 失败的原因是什么？
   👤 客户端问题 → 选择 4xx
   🖥️ 服务器问题 → 选择 5xx

3. 具体是什么问题？
   🔍 根据具体情况选择精确的状态码
```

### 6.3 实际应用价值


**🎯 对开发者的价值**：
- 📊 **API设计**：设计清晰、语义明确的接口
- 🐛 **错误调试**：快速定位问题是前端还是后端
- 📱 **用户体验**：给用户恰当的错误提示
- 🔧 **系统监控**：通过状态码统计分析系统健康度

**🎯 对用户的价值**：
- 🎪 **清晰反馈**：知道操作结果，减少困惑
- 🚀 **流畅体验**：遇到错误时得到合适的指导
- 🔒 **安全感**：明确的权限提示，避免误操作

### 6.4 记忆口诀


```
状态码就像成绩单，告诉你结果如何看：
2开头的是好消息，操作成功笑哈哈
4开头的要注意，你的请求有问题  
5开头的别着急，服务器在修理
记住这些小数字，API开发不迷路！
```

**核心记忆**：
- 状态码 = 服务器的回执单
- 2xx = 成功，4xx = 你的问题，5xx = 我们的问题
- 选择状态码要准确、具体、有指导意义
- 前后端都要正确处理各种状态码情况