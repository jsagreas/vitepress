---
title: 2、电商系统API
---
## 📚 目录

1. [电商系统API概述](#1-电商系统API概述)
2. [商品管理API设计](#2-商品管理API设计)
3. [订单系统API设计](#3-订单系统API设计)
4. [购物车API设计](#4-购物车API设计)
5. [支付系统API集成](#5-支付系统API集成)
6. [库存管理与并发控制](#6-库存管理与并发控制)
7. [营销活动API设计](#7-营销活动API设计)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🛒 电商系统API概述


### 1.1 什么是电商系统API


**通俗理解**：就像商场的各个柜台和服务台一样，电商系统API是网上商城提供的各种服务接口。

```
现实商场                     电商API系统
┌──────────────┐           ┌──────────────┐
│   商品展示台   │ ←────→    │  商品管理API  │
├──────────────┤           ├──────────────┤
│   收银台      │ ←────→    │  订单支付API  │
├──────────────┤           ├──────────────┤
│   购物车      │ ←────→    │  购物车API   │
├──────────────┤           ├──────────────┤
│   会员服务台   │ ←────→    │  用户管理API  │
└──────────────┘           └──────────────┘
```

**核心作用**：
- 🛍️ **商品展示**：让顾客能浏览和搜索商品
- 🛒 **购物流程**：从选购到下单到支付的完整流程
- 📦 **订单管理**：跟踪订单状态和物流信息
- 💰 **支付处理**：安全的支付和退款功能

### 1.2 电商API的核心特点


**RESTful设计原则在电商中的体现**：

```
资源导向思维：
商品 = Product 资源
订单 = Order 资源  
用户 = User 资源
购物车 = Cart 资源

每个资源都有自己的URL地址，就像商场里每个柜台都有固定位置
```

**常见的电商业务流程**：
```
用户浏览商品 → 加入购物车 → 下单结算 → 在线支付 → 订单确认 → 发货配送 → 确认收货
     ↓            ↓           ↓         ↓         ↓         ↓         ↓
  商品API      购物车API    订单API    支付API   订单API   物流API   订单API
```

---

## 2. 📦 商品管理API设计


### 2.1 商品的基本概念


**什么是商品管理**：就像超市管理员需要管理货架上的商品一样，电商系统需要管理线上的所有商品信息。

**商品包含的核心信息**：
- **基本信息**：名称、描述、图片、价格
- **分类信息**：属于哪个分类（电子产品、服装等）
- **库存信息**：还有多少件可以卖
- **状态信息**：是否上架、是否可购买

### 2.2 商品查询API设计


#### 🔍 商品列表查询


**API设计**：`GET /products`

```
用户需求：我想看看有哪些手机，价格在1000-3000之间的

API调用：
GET /products?category=phone&price_min=1000&price_max=3000

就像在商场问导购："请带我看看1000-3000价位的手机"
```

**URL参数说明**：
| 参数 | 含义 | 示例 | 说明 |
|------|------|------|------|
| `category` | 商品分类 | `category=phone` | 筛选手机类商品 |
| `price_min` | 最低价格 | `price_min=1000` | 价格不低于1000元 |
| `price_max` | 最高价格 | `price_max=3000` | 价格不超过3000元 |
| `page` | 页码 | `page=2` | 查看第2页结果 |
| `limit` | 每页数量 | `limit=20` | 每页显示20个商品 |

**响应示例**：
```json
{
  "code": 200,
  "message": "查询成功",
  "data": {
    "products": [
      {
        "id": 123,
        "name": "iPhone 15",
        "price": 5999,
        "image": "https://example.com/iphone15.jpg",
        "stock": 50,
        "category": "手机"
      }
    ],
    "total": 156,
    "page": 1,
    "limit": 20
  }
}
```

#### 🔍 商品搜索功能


**API设计**：`GET /products?q=搜索词`

```
用户需求：我想找"苹果手机"，按价格从低到高排序

API调用：
GET /products?q=苹果手机&sort=price,asc

就像对导购说："帮我找找苹果手机，便宜的先看"
```

**搜索参数说明**：
- `q=搜索词`：在商品名称、描述中搜索
- `sort=price,asc`：按价格升序排列
- `sort=sales,desc`：按销量降序排列

#### 📱 商品详情查询


**API设计**：`GET /products/{商品ID}`

```
用户需求：我想详细了解这个商品的信息

API调用：
GET /products/123

就像拿起商品仔细查看标签和说明书
```

**详情响应示例**：
```json
{
  "code": 200,
  "data": {
    "id": 123,
    "name": "iPhone 15",
    "description": "最新款苹果手机...",
    "price": 5999,
    "images": ["url1", "url2", "url3"],
    "stock": 50,
    "category": {
      "id": 1,
      "name": "手机",
      "parent": "电子产品"
    },
    "attributes": {
      "颜色": "深空灰",
      "存储": "128GB",
      "屏幕": "6.1英寸"
    }
  }
}
```

### 2.3 商品分类管理


#### 🏷️ 分类的层级结构


**什么是商品分类**：就像图书馆的图书分类一样，帮助用户快速找到想要的商品类型。

```
电商分类结构示例：
电子产品
├── 手机
│   ├── 苹果手机
│   ├── 华为手机
│   └── 小米手机
├── 电脑
│   ├── 笔记本
│   └── 台式机
└── 数码配件
    ├── 耳机
    └── 充电器
```

**分类API设计**：`GET /categories`

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "电子产品",
      "parent_id": null,
      "children": [
        {
          "id": 2,
          "name": "手机",
          "parent_id": 1,
          "children": [
            {
              "id": 3,
              "name": "苹果手机",
              "parent_id": 2,
              "children": []
            }
          ]
        }
      ]
    }
  ]
}
```

### 2.4 商家商品管理


> **权限说明**：只有商家才能添加、修改、删除自己的商品

#### ➕ 创建商品


**API设计**：`POST /products`

```json
请求体示例：
{
  "name": "新款手机",
  "description": "这是一款很棒的手机",
  "price": 2999,
  "category_id": 2,
  "stock": 100,
  "images": ["image1.jpg", "image2.jpg"]
}
```

**业务逻辑**：
1. **身份验证**：确认是已登录的商家
2. **数据验证**：检查商品信息是否完整
3. **权限检查**：确认有权限在该分类下添加商品
4. **保存数据**：将商品信息存入数据库

#### ✏️ 更新商品


**API设计**：`PUT /products/{商品ID}`

```
业务场景：商家想修改商品价格

PUT /products/123
{
  "price": 2599,  // 降价300元
  "stock": 80     // 更新库存
}

系统检查：这个商品是不是这个商家的？有权限修改吗？
```

#### 🗑️ 删除商品


**API设计**：`DELETE /products/{商品ID}`

```
业务场景：商品不再销售，需要下架

DELETE /products/123

安全检查：
1. 商品是否属于当前商家
2. 是否有未完成的订单
3. 删除后是否影响其他业务
```

---

## 3. 📋 订单系统API设计


### 3.1 订单的生命周期


**什么是订单**：就像餐厅的点菜单一样，记录用户想要买什么、买多少、花多少钱。

```
订单状态流转图：
待支付 → 已支付 → 已发货 → 已收货 → 已完成
   ↓        ↓        ↓        ↓
 超时取消   申请退款   物流跟踪   评价商品

每个状态都对应不同的操作权限和业务逻辑
```

### 3.2 创建订单


**API设计**：`POST /orders`

```json
用户下单请求：
{
  "items": [
    {
      "product_id": 123,
      "quantity": 2,
      "price": 2999
    },
    {
      "product_id": 456,
      "quantity": 1,
      "price": 199
    }
  ],
  "shipping_address": {
    "name": "张三",
    "phone": "13800138000",
    "address": "北京市朝阳区xxx街道xxx号"
  },
  "coupon_code": "SAVE100"
}
```

**订单创建流程**：
```
1. 验证用户身份 ✓
2. 检查商品库存 ✓
3. 计算订单金额 ✓
4. 应用优惠券 ✓
5. 锁定库存 ✓
6. 生成订单号 ✓
7. 返回支付信息 ✓
```

**响应示例**：
```json
{
  "code": 200,
  "message": "订单创建成功",
  "data": {
    "order_id": "ORD20240806001",
    "total_amount": 6197,
    "discount_amount": 100,
    "final_amount": 6097,
    "payment_url": "https://pay.example.com/ORD20240806001",
    "expires_at": "2024-08-06T15:30:00Z"
  }
}
```

### 3.3 订单查询


#### 📋 用户订单列表


**API设计**：`GET /orders`

```
用户需求：我想看看我的所有订单

GET /orders?status=paid&page=1&limit=10

就像查看购物记录，看看买过什么东西
```

**订单状态筛选**：
| 状态 | 含义 | 用户操作 |
|------|------|----------|
| `pending` | 待支付 | 可以支付或取消 |
| `paid` | 已支付 | 等待发货 |
| `shipped` | 已发货 | 查看物流信息 |
| `delivered` | 已收货 | 确认收货或申请退换 |
| `completed` | 已完成 | 查看订单详情、评价 |
| `cancelled` | 已取消 | 查看取消原因 |

#### 📄 订单详情查询


**API设计**：`GET /orders/{订单ID}`

```json
{
  "code": 200,
  "data": {
    "order_id": "ORD20240806001",
    "status": "paid",
    "created_at": "2024-08-06T14:30:00Z",
    "items": [
      {
        "product_id": 123,
        "product_name": "iPhone 15",
        "quantity": 1,
        "price": 5999,
        "subtotal": 5999
      }
    ],
    "shipping_info": {
      "name": "张三",
      "address": "北京市朝阳区...",
      "tracking_number": "SF1234567890"
    },
    "payment_info": {
      "method": "支付宝",
      "transaction_id": "2024080622001234567890",
      "paid_at": "2024-08-06T14:35:00Z"
    }
  }
}
```

### 3.4 订单状态管理


#### 💳 订单支付


**API设计**：`POST /orders/{订单ID}/pay`

```json
支付请求：
{
  "payment_method": "alipay",
  "return_url": "https://shop.example.com/orders/success"
}

支付响应：
{
  "code": 200,
  "data": {
    "payment_url": "https://openapi.alipay.com/gateway.do?...",
    "qr_code": "data:image/png;base64,iVBOR...",
    "expires_in": 900  // 15分钟内完成支付
  }
}
```

#### 📦 订单发货


**API设计**：`POST /orders/{订单ID}/ship`（商家操作）

```json
发货请求：
{
  "shipping_company": "顺丰速运",
  "tracking_number": "SF1234567890",
  "estimated_delivery": "2024-08-08"
}
```

#### ✅ 确认收货


**API设计**：`POST /orders/{订单ID}/confirm`

```
用户操作：收到货物后确认收货

POST /orders/ORD20240806001/confirm

系统处理：
1. 更新订单状态为"已完成"
2. 释放售后保证金给商家
3. 触发用户评价提醒
```

---

## 4. 🛒 购物车API设计


### 4.1 购物车的概念


**什么是购物车**：就像超市的购物推车，用户可以先把想买的商品放进去，最后一起结账。

```
购物车的特点：
┌─────────────────┐
│   临时存储       │ ← 用户还没决定买，先放着
├─────────────────┤
│   随时修改       │ ← 可以增加、删除、修改数量
├─────────────────┤
│   批量结算       │ ← 选择部分或全部商品下单
├─────────────────┤
│   跨设备同步     │ ← 手机加入，电脑也能看到
└─────────────────┘
```

### 4.2 购物车基本操作


#### ➕ 添加商品到购物车


**API设计**：`POST /cart/items`

```json
添加商品请求：
{
  "product_id": 123,
  "quantity": 2,
  "specification": {
    "color": "黑色",
    "size": "128GB"
  }
}

系统处理逻辑：
1. 检查商品是否存在
2. 验证库存是否充足
3. 如果购物车已有该商品，累加数量
4. 如果是新商品，创建新的购物车项
```

**响应示例**：
```json
{
  "code": 200,
  "message": "商品已加入购物车",
  "data": {
    "cart_item_id": 789,
    "total_items": 5,  // 购物车总商品种类
    "total_quantity": 8  // 购物车总商品数量
  }
}
```

#### 📋 查看购物车


**API设计**：`GET /cart`

```json
{
  "code": 200,
  "data": {
    "items": [
      {
        "cart_item_id": 789,
        "product": {
          "id": 123,
          "name": "iPhone 15",
          "price": 5999,
          "image": "https://example.com/iphone15.jpg"
        },
        "quantity": 2,
        "specification": {
          "color": "黑色",
          "size": "128GB"
        },
        "subtotal": 11998,
        "available": true  // 商品是否还有库存
      }
    ],
    "summary": {
      "total_items": 5,
      "total_quantity": 8,
      "total_amount": 15697,
      "selected_amount": 11998  // 已选中商品的总金额
    }
  }
}
```

#### ✏️ 修改购物车商品


**API设计**：`PUT /cart/items/{购物车项ID}`

```json
修改数量：
{
  "quantity": 3  // 将数量改为3
}

删除商品（数量设为0）：
{
  "quantity": 0
}

批量选择（用于结算）：
{
  "selected": true  // 选中这个商品参与结算
}
```

#### 🗑️ 清空购物车


**API设计**：`DELETE /cart`

```
用户场景：下单成功后清空购物车，或者用户想要重新选择

DELETE /cart

系统响应：
{
  "code": 200,
  "message": "购物车已清空"
}
```

### 4.3 购物车结算


#### 💰 结算预览


**API设计**：`POST /cart/checkout/preview`

```json
结算预览请求：
{
  "selected_items": [789, 790],  // 选中的购物车项ID
  "shipping_address_id": 123,
  "coupon_code": "SAVE100"
}

预览响应：
{
  "code": 200,
  "data": {
    "items": [...],
    "subtotal": 11998,
    "shipping_fee": 0,
    "discount": 100,
    "total": 11898,
    "available_coupons": [
      {
        "code": "SAVE200",
        "name": "满1000减200",
        "applicable": true
      }
    ]
  }
}
```

#### 📦 提交订单


**API设计**：`POST /cart/checkout`

```
结算流程：
购物车选择商品 → 填写收货地址 → 选择支付方式 → 确认订单 → 跳转支付

这个API会：
1. 创建正式订单
2. 从购物车移除已下单商品
3. 返回支付链接
```

---

## 5. 💳 支付系统API集成


### 5.1 支付系统的作用


**什么是支付系统**：就像商场的POS机一样，负责处理用户的付款操作。

```
支付流程示意图：
用户下单 → 选择支付方式 → 跳转支付页面 → 完成支付 → 返回商城 → 订单状态更新

电商系统        第三方支付         银行系统
    │              │                │
    │─────创建支付──→│                │
    │              │────发起交易────→│
    │              │←───支付结果─────│
    │←─────通知─────│                │
    │              │                │
```

### 5.2 第三方支付接口集成


#### 💰 支付方式选择


**常见支付方式**：
- **支付宝**：扫码支付、网页支付
- **微信支付**：扫码支付、公众号支付
- **银联**：网银支付、银行卡支付
- **Apple Pay**：苹果设备快捷支付

**API设计**：`GET /payment/methods`

```json
{
  "code": 200,
  "data": [
    {
      "method": "alipay",
      "name": "支付宝",
      "icon": "https://example.com/alipay.png",
      "available": true
    },
    {
      "method": "wechat",
      "name": "微信支付",
      "icon": "https://example.com/wechat.png",
      "available": true
    }
  ]
}
```

#### 🔗 创建支付订单


**API设计**：`POST /payment/create`

```json
支付请求：
{
  "order_id": "ORD20240806001",
  "amount": 5999,
  "payment_method": "alipay",
  "return_url": "https://shop.example.com/payment/success",
  "notify_url": "https://shop.example.com/payment/notify"
}

支付响应：
{
  "code": 200,
  "data": {
    "payment_id": "PAY20240806001",
    "payment_url": "https://openapi.alipay.com/gateway.do?...",
    "qr_code": "data:image/png;base64,iVBOR...",
    "expires_in": 900
  }
}
```

#### ✅ 支付结果处理


**支付通知回调**：`POST /payment/notify`

```json
第三方支付平台通知：
{
  "payment_id": "PAY20240806001",
  "order_id": "ORD20240806001",
  "status": "success",
  "amount": 5999,
  "transaction_id": "2024080622001234567890",
  "paid_at": "2024-08-06T14:35:00Z",
  "sign": "验证签名"
}

系统处理：
1. 验证签名确保通知真实性
2. 检查订单状态避免重复处理
3. 更新订单为已支付状态
4. 通知用户支付成功
5. 触发发货流程
```

### 5.3 支付安全措施


#### 🔐 安全验证


**签名验证**：
```
目的：确保支付通知来自真实的第三方平台，防止伪造

验证过程：
1. 使用约定的密钥对通知参数进行签名
2. 对比计算出的签名与接收到的签名
3. 签名一致才处理支付结果
```

**幂等性处理**：
```
问题：网络延迟可能导致重复通知

解决方案：
1. 记录已处理的支付通知ID
2. 重复通知直接返回成功
3. 避免重复扣款或发货
```

#### 💰 退款处理


**API设计**：`POST /payment/refund`

```json
退款请求：
{
  "order_id": "ORD20240806001",
  "refund_amount": 5999,
  "reason": "用户申请退款",
  "refund_account": "original"  // 原路返回
}

退款响应：
{
  "code": 200,
  "data": {
    "refund_id": "REF20240806001",
    "status": "processing",
    "estimated_arrival": "1-3个工作日"
  }
}
```

---

## 6. 📊 库存管理与并发控制


### 6.1 库存管理的重要性


**什么是库存管理**：就像仓库管理员记录货物数量一样，确保不会出现超卖的情况。

```
库存管理场景：
商品库存：100件
同时有3个用户想买：
用户A：想买50件
用户B：想买40件  
用户C：想买30件
总需求：120件 > 100件库存

问题：如何确保不超卖？
```

### 6.2 并发控制问题


#### ⚠️ 超卖问题


**问题描述**：多个用户同时购买同一商品时，可能导致实际销售数量超过库存数量。

```
并发购买流程问题：
时间   用户A操作           用户B操作           库存状态
T1    查询库存=100        -                  100
T2    -                 查询库存=100        100
T3    下单50件           -                  100
T4    -                 下单60件           100  
T5    库存减50           -                  50
T6    -                 库存减60           -10 ❌超卖了！
```

#### 🔒 解决方案


**1. 数据库锁机制**：
```sql
-- 悲观锁：先锁定再操作
SELECT stock FROM products WHERE id = 123 FOR UPDATE;
UPDATE products SET stock = stock - 50 WHERE id = 123;
```

**2. Redis原子操作**：
```json
Redis原子递减：
DECRBY product:123:stock 50

如果库存不足，Redis会返回负数，此时拒绝订单
```

**3. 消息队列排队**：
```
订单请求 → 消息队列 → 逐个处理 → 确保顺序

好处：避免并发冲突
缺点：用户需要等待
```

### 6.3 库存API设计


#### 📦 库存查询


**API设计**：`GET /products/{商品ID}/stock`

```json
{
  "code": 200,
  "data": {
    "product_id": 123,
    "available_stock": 85,
    "reserved_stock": 15,  // 已下单但未支付
    "total_stock": 100,
    "status": "sufficient"  // sufficient/low/out_of_stock
  }
}
```

#### 🔒 库存预占


**API设计**：`POST /products/{商品ID}/reserve`

```json
预占库存请求：
{
  "quantity": 2,
  "order_id": "ORD20240806001",
  "expires_in": 900  // 15分钟后释放
}

预占成功响应：
{
  "code": 200,
  "data": {
    "reservation_id": "RSV20240806001",
    "reserved_quantity": 2,
    "expires_at": "2024-08-06T15:00:00Z"
  }
}
```

**预占机制说明**：
```
目的：用户下单时先预占库存，支付成功后正式扣减

流程：
1. 用户下单 → 预占库存
2. 用户支付 → 确认扣减
3. 超时未支付 → 释放库存
4. 用户取消 → 释放库存
```

#### ✅ 库存确认扣减


**API设计**：`POST /products/{商品ID}/consume`

```json
确认扣减请求：
{
  "reservation_id": "RSV20240806001",
  "actual_quantity": 2
}

系统处理：
1. 验证预占记录是否存在
2. 正式从库存中扣减
3. 清除预占记录
```

---

## 7. 🎁 营销活动API设计


### 7.1 营销活动的作用


**什么是营销活动**：就像商场的促销活动一样，通过优惠来吸引用户购买。

```
常见营销活动：
┌─────────────┐  ┌─────────────┐  ┌─────────────┐
│   优惠券     │  │   满减活动   │  │   限时抢购   │
│ SAVE100     │  │ 满300减50   │  │ 秒杀价￥99  │
│ 立减100元   │  │ 满500减100  │  │ 仅限今日     │
└─────────────┘  └─────────────┘  └─────────────┘
```

### 7.2 优惠券系统


#### 🎫 优惠券类型


**按使用条件分类**：
- **满减券**：满100减20，满200减50
- **折扣券**：8折券，9折券
- **免邮券**：免除配送费
- **新人券**：新用户专享

**按使用范围分类**：
- **全场券**：所有商品都能用
- **品类券**：仅限特定分类商品
- **商品券**：仅限特定商品

#### 🎟️ 优惠券API设计


**获取可用优惠券**：`GET /coupons/available`

```json
{
  "code": 200,
  "data": [
    {
      "coupon_id": "CPN001",
      "name": "满300减50优惠券",
      "type": "amount_off",
      "condition": {
        "min_amount": 300
      },
      "discount": {
        "amount": 50
      },
      "valid_until": "2024-08-31T23:59:59Z",
      "applicable_categories": ["电子产品"]
    }
  ]
}
```

**使用优惠券**：`POST /coupons/use`

```json
使用请求：
{
  "coupon_code": "SAVE100",
  "order_amount": 599,
  "product_categories": ["电子产品"]
}

使用响应：
{
  "code": 200,
  "data": {
    "applicable": true,
    "discount_amount": 100,
    "final_amount": 499,
    "coupon_used_id": "CPN_USED_001"
  }
}
```

### 7.3 满减活动


#### 💰 满减规则设计


**API设计**：`GET /promotions/amount-off`

```json
{
  "code": 200,
  "data": [
    {
      "promotion_id": "PROMO001",
      "name": "夏季大促",
      "rules": [
        {
          "min_amount": 200,
          "discount_amount": 30
        },
        {
          "min_amount": 500,
          "discount_amount": 100
        }
      ],
      "valid_until": "2024-08-31T23:59:59Z",
      "applicable_categories": ["服装", "鞋靴"]
    }
  ]
}
```

**计算优惠**：`POST /promotions/calculate`

```json
计算请求：
{
  "items": [
    {
      "product_id": 123,
      "category": "服装",
      "price": 299,
      "quantity": 2
    }
  ]
}

计算响应：
{
  "code": 200,
  "data": {
    "original_amount": 598,
    "promotions_applied": [
      {
        "promotion_id": "PROMO001",
        "discount_amount": 100,
        "rule_matched": "满500减100"
      }
    ],
    "final_amount": 498
  }
}
```

### 7.4 限时抢购


#### ⚡ 秒杀活动


**什么是秒杀**：在特定时间，以特价销售限量商品，先到先得。

```
秒杀特点：
时间限制：仅在特定时间段有效
数量限制：只有少量商品参与
价格优惠：大幅折扣吸引用户
高并发：大量用户同时抢购
```

**秒杀商品查询**：`GET /flash-sales/active`

```json
{
  "code": 200,
  "data": [
    {
      "flash_sale_id": "FS001",
      "product": {
        "id": 123,
        "name": "iPhone 15",
        "original_price": 5999,
        "flash_price": 4999
      },
      "total_quantity": 100,
      "sold_quantity": 67,
      "remaining_quantity": 33,
      "start_time": "2024-08-06T10:00:00Z",
      "end_time": "2024-08-06T12:00:00Z",
      "status": "active"
    }
  ]
}
```

**参与秒杀**：`POST /flash-sales/{秒杀ID}/join`

```json
抢购请求：
{
  "quantity": 1,
  "user_token": "验证用户身份"
}

系统处理：
1. 验证用户身份
2. 检查秒杀是否进行中
3. 检查剩余库存
4. 创建秒杀订单
5. 锁定库存（短时间）

抢购成功：
{
  "code": 200,
  "message": "抢购成功",
  "data": {
    "order_id": "ORD20240806001",
    "payment_deadline": "2024-08-06T15:05:00Z"
  }
}
```

---

## 8. 📋 核心要点总结


### 8.1 电商API设计要点


**🔸 RESTful设计原则**：
- 资源导向：商品、订单、用户都是资源
- 统一接口：使用标准HTTP方法
- 无状态：每个请求都包含完整信息
- 可缓存：合理使用缓存提高性能

**🔸 业务流程完整性**：
```
核心业务链路：
商品浏览 → 加入购物车 → 下单结算 → 在线支付 → 订单履约

每个环节都需要对应的API支持
```

### 8.2 关键技术要点


**💡 并发控制**：
- **库存管理**：防止超卖问题
- **支付处理**：避免重复扣款
- **秒杀活动**：应对高并发访问

**🔒 安全考虑**：
- **身份验证**：确保用户身份真实
- **权限控制**：确保操作权限合法
- **数据验证**：防止恶意数据注入
- **支付安全**：签名验证，防篡改

### 8.3 用户体验优化


**⚡ 性能优化**：
- **接口响应速度**：合理使用缓存和数据库优化
- **库存实时性**：及时更新库存状态
- **支付体验**：支持多种支付方式

**🎯 业务逻辑**：
- **购物车同步**：跨设备数据一致性
- **订单状态**：实时更新物流信息
- **营销活动**：自动计算最优优惠

### 8.4 实际开发建议


**📋 API设计规范**：
```
URL设计：
GET /products - 获取商品列表
GET /products/123 - 获取商品详情
POST /products - 创建商品
PUT /products/123 - 更新商品
DELETE /products/123 - 删除商品

响应格式：
{
  "code": 200,
  "message": "操作成功",
  "data": { ... }
}
```

**🔧 错误处理**：
- **业务错误**：库存不足、优惠券已过期
- **系统错误**：网络超时、服务不可用
- **用户错误**：参数不合法、权限不足

**核心记忆**：
- 电商API就是网上商城的各种服务接口
- 用RESTful方式设计，让接口简单易懂
- 重点关注并发安全和用户体验
- 每个功能都要考虑完整的业务流程