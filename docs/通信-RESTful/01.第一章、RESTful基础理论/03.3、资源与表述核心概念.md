---
title: 3、资源与表述核心概念
---
## 📚 目录

1. [什么是"资源"](#1-什么是资源)
2. [资源标识与地址](#2-资源标识与地址)
3. [资源表述概念](#3-资源表述概念)
4. [状态转移机制](#4-状态转移机制)
5. [资源建模实战](#5-资源建模实战)
6. [核心要点总结](#6-核心要点总结)

---

## 1. 🎯 什么是"资源"


### 1.1 一切皆资源的理念


**🔸 简单理解**
```
把互联网上的所有东西都当作"资源"来看待
就像现实中的物品一样，每样东西都是一个资源
```

**💡 现实类比**
```
现实世界：                   网络世界：
图书馆的书 📚               → 用户信息 👤
商店的商品 🛍️               → 商品数据 📦  
银行账户 💰                 → 订单记录 📋
学生档案 📋                 → 文章内容 📝
```

### 1.2 资源的三种类型


**🔹 实体资源（单个对象）**
```
用户：/users/123           → 某个具体用户
商品：/products/456        → 某个具体商品
订单：/orders/789          → 某个具体订单
```

**🔹 集合资源（一组对象）**
```
所有用户：/users           → 用户列表
所有商品：/products        → 商品列表
某用户的订单：/users/123/orders → 该用户的订单列表
```

**🔹 子资源（从属关系）**
```
用户头像：/users/123/avatar     → 用户的头像
商品评论：/products/456/reviews → 商品的评论
订单商品：/orders/789/items     → 订单里的商品
```

### 1.3 资源vs实体的区别


```
┌─────────────────┐    ┌─────────────────┐
│   数据库实体     │    │    REST资源     │
├─────────────────┤    ├─────────────────┤
│ • 表结构        │    │ • 业务概念      │
│ • 字段定义      │ ≠  │ • 用户视角      │
│ • 存储细节      │    │ • 操作逻辑      │
│ • 技术实现      │    │ • 抽象层次      │
└─────────────────┘    └─────────────────┘
```

**📋 举例说明**
- **数据库层面**：用户表、订单表、商品表
- **REST资源层面**：用户资源、购物车资源、支付资源

---

## 2. 🌐 资源标识与地址


### 2.1 URI：资源的身份证


**🔸 基本概念**
```
URI = 统一资源标识符 (Uniform Resource Identifier)
就像每个人都有身份证号一样，每个资源都有唯一的地址
```

**📍 URI结构解析**
```
https://api.shop.com/v1/users/123/orders?status=pending

协议：  https://           → 用什么方式访问
域名：  api.shop.com      → 在哪台服务器
版本：  /v1               → API版本号
路径：  /users/123/orders → 资源路径
参数：  ?status=pending   → 查询条件
```

### 2.2 资源地址设计原则


**✅ 好的设计**
```
/users                  → 用户集合
/users/123             → 特定用户  
/users/123/orders      → 该用户的订单
/orders/456/items      → 该订单的商品
```

**❌ 不好的设计**
```
/getUsers              → 动词不应该出现
/user123               → 缺少层次结构
/deleteOrder           → 用HTTP方法表示动作
/users/list            → 多余的list
```

### 2.3 层次化资源结构


```
电商系统资源树：

/
├── users/                     用户集合
│   ├── {userId}/             特定用户
│   │   ├── profile           用户资料
│   │   ├── orders/           用户订单集合
│   │   └── cart              购物车
│   └── search                用户搜索
├── products/                  商品集合
│   ├── {productId}/          特定商品
│   │   ├── reviews/          商品评论
│   │   └── images/           商品图片
│   └── categories/           商品分类
└── orders/                    订单集合
    └── {orderId}/            特定订单
        └── items/            订单商品
```

---

## 3. 📄 资源表述概念


### 3.1 什么是"表述"


**🔸 核心理解**
```
表述 = 资源的表现形式
同一个资源可以有不同的表现形式，就像一个人可以用照片、文字、视频来描述
```

**💡 生活类比**
```
现实场景：                   网络资源：
一个人 👤                   → 用户资源
├── 身份证照片 📷           → JSON格式
├── 文字描述 📝            → XML格式  
└── 视频介绍 🎥            → HTML格式
```

### 3.2 常见表述格式


**🔹 JSON格式（最常用）**
```json
{
  "id": 123,
  "name": "张三",
  "email": "zhangsan@email.com",
  "created_at": "2024-01-01"
}
```

**🔹 XML格式**
```xml
<user>
  <id>123</id>
  <name>张三</name>
  <email>zhangsan@email.com</email>
  <created_at>2024-01-01</created_at>
</user>
```

**🔹 HTML格式**
```html
<div class="user">
  <h2>张三</h2>
  <p>邮箱：zhangsan@email.com</p>
  <p>注册时间：2024-01-01</p>
</div>
```

### 3.3 内容协商机制


```
客户端请求过程：

客户端                          服务器
   |                              |
   |--[Accept: application/json]-->|  我要JSON格式
   |                              |
   |<--[返回JSON格式的用户数据]-----|
   |                              |
   |--[Accept: text/html]--------->|  我要HTML格式
   |                              |
   |<--[返回HTML格式的用户页面]-----|
```

---

## 4. 🔄 状态转移机制


### 4.1 什么是状态转移


**🔸 核心概念**
```
状态转移 = 通过HTTP方法改变资源的状态
就像遥控器控制电视一样，用不同按键改变电视状态
```

**📺 电视遥控器类比**
```
遥控器动作：              REST动作：
开机 🔛                  → POST (创建)
换台 📺                  → PUT (更新)  
调音量 🔊                → PATCH (部分更新)
查看节目单 📋             → GET (查询)
关机 ❌                  → DELETE (删除)
```

### 4.2 HTTP方法对应的状态转移


**📊 方法与状态变化对应表**

| HTTP方法 | 状态转移 | 生活例子 | API例子 |
|----------|----------|----------|---------|
| `GET` | 🔍 **查看状态** | 看银行余额 | `GET /users/123` |
| `POST` | ✨ **创建新状态** | 开新银行账户 | `POST /users` |
| `PUT` | 🔄 **完全替换** | 重新填写表格 | `PUT /users/123` |
| `PATCH` | ✏️ **部分修改** | 改手机号码 | `PATCH /users/123` |
| `DELETE` | ❌ **删除状态** | 注销账户 | `DELETE /users/123` |

### 4.3 状态转移实例


**🛒 购物车状态转移过程**
```
初始状态：空购物车 🛒

1. 添加商品：POST /cart/items
   状态变化：🛒 → 🛒📦

2. 查看购物车：GET /cart  
   状态变化：无变化，只是查看

3. 修改数量：PATCH /cart/items/123
   状态变化：🛒📦 → 🛒📦📦

4. 清空购物车：DELETE /cart/items
   状态变化：🛒📦📦 → 🛒
```

---

## 5. 🛠️ 资源建模实战


### 5.1 从业务需求到资源设计


**📋 业务场景：博客系统**
```
业务需求：
• 用户可以写文章
• 用户可以评论文章  
• 文章可以分类
• 用户可以关注其他用户
```

**🎯 资源建模思路**
```
第一步：识别名词 → 潜在资源
• 用户、文章、评论、分类、关注关系

第二步：确定层次关系
• 文章属于用户
• 评论属于文章
• 分类独立存在
• 关注关系属于用户

第三步：设计URL结构
```

### 5.2 博客系统资源设计


```
博客系统资源架构：

/
├── users/                     用户管理
│   ├── {userId}/             特定用户
│   │   ├── articles/         该用户的文章
│   │   ├── followers/        粉丝列表
│   │   └── following/        关注列表
│   └── search                用户搜索
│
├── articles/                  文章管理
│   ├── {articleId}/          特定文章
│   │   ├── comments/         文章评论
│   │   ├── likes/            点赞记录
│   │   └── views             阅读统计
│   └── latest                最新文章
│
├── categories/                分类管理
│   └── {categoryId}/         特定分类
│       └── articles/         该分类的文章
│
└── comments/                  评论管理
    └── {commentId}/          特定评论
        └── replies/          回复列表
```

### 5.3 资源操作映射


**📝 文章资源操作示例**

| 操作需求 | HTTP方法 | 资源地址 | 说明 |
|----------|----------|----------|------|
| 📖 浏览所有文章 | `GET` | `/articles` | 获取文章列表 |
| 📄 查看特定文章 | `GET` | `/articles/123` | 获取文章详情 |
| ✍️ 发布新文章 | `POST` | `/articles` | 创建新文章 |
| ✏️ 修改文章 | `PUT` | `/articles/123` | 更新整篇文章 |
| 🏷️ 修改标签 | `PATCH` | `/articles/123` | 部分更新 |
| 🗑️ 删除文章 | `DELETE` | `/articles/123` | 删除文章 |

### 5.4 复杂业务场景处理


**🔄 用户关注功能设计**
```
业务逻辑：用户A关注用户B

方案一：关注作为独立资源
POST /follows
{
  "follower_id": 123,    // 关注者
  "following_id": 456    // 被关注者
}

方案二：关注作为用户子资源
POST /users/123/following/456   // 用户123关注用户456
DELETE /users/123/following/456 // 取消关注
```

**💰 订单支付功能设计**
```
支付不是简单的CRUD，是业务流程

POST /orders/789/payment    // 发起支付
{
  "method": "alipay",
  "amount": 99.99
}

响应：
{
  "payment_id": "pay_123",
  "status": "pending",
  "redirect_url": "https://pay.alipay.com/..."
}
```

---

## 6. 📋 核心要点总结


### 6.1 必须理解的核心概念


```
🔸 资源概念：把一切当作资源，每个资源都有地址
🔸 资源类型：实体资源、集合资源、子资源三种
🔸 资源表述：同一资源可以有不同表现形式（JSON、XML等）
🔸 状态转移：用HTTP方法改变资源状态
🔸 资源建模：从业务需求识别资源，设计合理的层次结构
```

### 6.2 关键理解要点


**🔹 资源 ≠ 数据库表**
```
错误理解：一个表对应一个资源
正确理解：从用户角度设计资源，可能跨多个表
```

**🔹 URI设计原则**
```
✅ 名词表示资源：/users、/orders
❌ 动词表示操作：/getUsers、/createOrder
✅ 层次化结构：/users/123/orders
❌ 扁平化结构：/user123orders
```

**🔹 状态转移的本质**
```
不是简单的增删改查，而是业务状态的变化
例如：下单不是CREATE订单，而是购物车状态转移为订单状态
```

### 6.3 实际应用指导


**🎯 资源建模步骤**
```
1️⃣ 分析业务需求，找出核心名词
2️⃣ 确定资源之间的层次关系  
3️⃣ 设计清晰的URL结构
4️⃣ 映射业务操作到HTTP方法
5️⃣ 考虑资源的不同表述格式
```

**💡 常见建模误区**
```
❌ 把所有表都暴露为资源
❌ 用动词命名资源
❌ 设计过深的嵌套层次
❌ 忽略资源的生命周期
✅ 从用户视角设计资源
✅ 保持URL简洁易懂
✅ 考虑资源的完整操作集
✅ 设计合理的资源颗粒度
```

### 6.4 记忆要点


> 🧠 **记忆口诀**
> 
> *"万物皆资源，地址要唯一；状态可转移，表述多样化"*

**🔖 快速检查清单**
- [ ] 资源名词是否清晰？
- [ ] URL层次是否合理？  
- [ ] HTTP方法是否正确？
- [ ] 是否支持多种表述？
- [ ] 状态转移是否清晰？

**核心理解**：
- REST把复杂的业务简化为对资源的操作
- 好的资源设计让API直观易懂
- 资源不是技术概念，而是业务概念
- 状态转移反映真实的业务流程变化