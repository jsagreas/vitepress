---
title: 3ã€ç½‘ç»œç¼–ç¨‹ä¸Socketå®è·µ
---
## ğŸ“š ç›®å½•

1. [Socketç¼–ç¨‹æ¨¡å‹è¯¦è§£](#1-socketç¼–ç¨‹æ¨¡å‹è¯¦è§£)
2. [TCPç¼–ç¨‹å®ä¾‹](#2-tcpç¼–ç¨‹å®ä¾‹)
3. [UDPç¼–ç¨‹å®ä¾‹](#3-udpç¼–ç¨‹å®ä¾‹)
4. [å¤šè·¯å¤ç”¨æœºåˆ¶](#4-å¤šè·¯å¤ç”¨æœºåˆ¶)
5. [å¼‚æ­¥IOæ¦‚å¿µ](#5-å¼‚æ­¥ioæ¦‚å¿µ)
6. [ç½‘ç»œç¼–ç¨‹æœ€ä½³å®è·µ](#6-ç½‘ç»œç¼–ç¨‹æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”Œ Socketç¼–ç¨‹æ¨¡å‹è¯¦è§£


### 1.1 ä»€ä¹ˆæ˜¯Socketï¼Ÿ


> ğŸ’¡ **ç®€å•ç†è§£**ï¼šSocketå°±åƒæ˜¯ç½‘ç»œç¼–ç¨‹ä¸­çš„"ç”µè¯æœº"
> 
> æƒ³è±¡ä¸€ä¸‹æ‰“ç”µè¯ï¼šä½ æ‹¿èµ·ç”µè¯æœºæ‹¨å·ï¼Œå¯¹æ–¹æ¥å¬ï¼Œç„¶åä½ ä»¬å°±å¯ä»¥é€šè¯äº†ã€‚Socketå°±æ˜¯ç¨‹åºä¹‹é—´çš„"ç”µè¯æœº"ï¼Œè®©ä¸åŒçš„ç¨‹åºå¯ä»¥é€šè¿‡ç½‘ç»œ"é€šè¯"ã€‚

**Socketçš„æœ¬è´¨**ï¼š
```
Socket = IPåœ°å€ + ç«¯å£å· + åè®®ç±»å‹

æ¯”å¦‚ï¼š
- 192.168.1.100:8080 (TCP) â† è¿™å°±æ˜¯ä¸€ä¸ªSocket
- 192.168.1.100:9090 (UDP) â† è¿™æ˜¯å¦ä¸€ä¸ªSocket
```

### 1.2 Socketç¼–ç¨‹æ¨¡å‹åˆ†ç±»


**ğŸ”¸ æŒ‰ç…§é€šä¿¡æ–¹å¼åˆ†ç±»**

| æ¨¡å‹ç±»å‹ | **å·¥ä½œæ–¹å¼** | **å½¢è±¡æ¯”å–»** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|------------|------------|
| ğŸ”„ **TCP Socket** | `é¢å‘è¿æ¥ï¼Œå¯é ä¼ è¾“` | `æ‰“ç”µè¯ï¼šéœ€è¦å…ˆæ¥é€š` | `æ–‡ä»¶ä¼ è¾“ã€ç½‘é¡µæµè§ˆ` |
| ğŸ“¡ **UDP Socket** | `æ— è¿æ¥ï¼Œå¿«é€Ÿä¼ è¾“` | `å‘çŸ­ä¿¡ï¼šç›´æ¥å‘é€` | `è§†é¢‘ç›´æ’­ã€æ¸¸æˆæ•°æ®` |

**ğŸ”¸ æŒ‰ç…§æœåŠ¡æ¨¡å¼åˆ†ç±»**

```
å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼ (Client-Server)ï¼š
å®¢æˆ·ç«¯ â”€â”€è¿æ¥â”€â”€> æœåŠ¡å™¨
   |               |
 å‘èµ·è¿æ¥        ç­‰å¾…è¿æ¥
 å‘é€è¯·æ±‚        å¤„ç†è¯·æ±‚
 æ¥æ”¶å“åº”        å‘é€å“åº”

ç‚¹å¯¹ç‚¹æ¨¡å¼ (P2P)ï¼š
ç¨‹åºA â†â”€â”€ç›´æ¥é€šä¿¡â”€â”€> ç¨‹åºB
   |                 |
 æ—¢æ˜¯å®¢æˆ·ç«¯        æ—¢æ˜¯å®¢æˆ·ç«¯
 ä¹Ÿæ˜¯æœåŠ¡å™¨        ä¹Ÿæ˜¯æœåŠ¡å™¨
```

### 1.3 Socketç¼–ç¨‹åŸºæœ¬æµç¨‹


**ğŸ“‹ TCP Socketç¼–ç¨‹æµç¨‹**

```
æœåŠ¡å™¨ç«¯æµç¨‹ï¼š                å®¢æˆ·ç«¯æµç¨‹ï¼š
â‘ åˆ›å»ºSocket                 â‘ åˆ›å»ºSocket
     â†“                           â†“
â‘¡ç»‘å®šIPå’Œç«¯å£                â‘¡è¿æ¥æœåŠ¡å™¨
     â†“                           â†“
â‘¢å¼€å§‹ç›‘å¬                    â‘¢å‘é€æ•°æ®
     â†“                           â†“
â‘£ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥              â‘£æ¥æ”¶æ•°æ®
     â†“                           â†“
â‘¤æ¥å—è¿æ¥                    â‘¤å…³é—­è¿æ¥
     â†“
â‘¥æ•°æ®æ”¶å‘
     â†“
â‘¦å…³é—­è¿æ¥
```

**ğŸ¯ å…³é”®ç†è§£**ï¼š
- **æœåŠ¡å™¨**ï¼šåƒé¤å…ï¼Œå…ˆå¼€é—¨è¥ä¸šï¼Œç­‰å®¢äººæ¥
- **å®¢æˆ·ç«¯**ï¼šåƒé¡¾å®¢ï¼Œä¸»åŠ¨å»é¤å…æ¶ˆè´¹
- **è¿æ¥**ï¼šå®¢æˆ·è¿›é¤å…åä¸‹ï¼ŒæœåŠ¡å‘˜è¿‡æ¥æœåŠ¡

---

## 2. ğŸŒ TCPç¼–ç¨‹å®ä¾‹


### 2.1 TCPæœåŠ¡å™¨ç«¯å®ç°


**ğŸ’¡ æ ¸å¿ƒæ€è·¯**ï¼šæœåŠ¡å™¨å°±åƒä¸€ä¸ª"æ¥çº¿å‘˜"ï¼Œç­‰å¾…å®¢æˆ·ç«¯æ‰“ç”µè¯è¿‡æ¥

```java
// TCPæœåŠ¡å™¨ï¼šç®€å•çš„EchoæœåŠ¡å™¨ï¼ˆå›æ˜¾æœåŠ¡å™¨ï¼‰
public class TCPServer {
    public static void main(String[] args) {
        try {
            // â‘ åˆ›å»ºæœåŠ¡å™¨Socketï¼Œç»‘å®šç«¯å£8080
            ServerSocket serverSocket = new ServerSocket(8080);
            System.out.println("ğŸŒ æœåŠ¡å™¨å¯åŠ¨ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...");
            
            // â‘¡ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼ˆé˜»å¡ç­‰å¾…ï¼‰
            Socket clientSocket = serverSocket.accept();
            System.out.println("âœ… å®¢æˆ·ç«¯å·²è¿æ¥ï¼š" + clientSocket.getInetAddress());
            
            // â‘¢è·å–è¾“å…¥è¾“å‡ºæµ
            BufferedReader in = new BufferedReader(
                new InputStreamReader(clientSocket.getInputStream())
            );
            PrintWriter out = new PrintWriter(
                clientSocket.getOutputStream(), true
            );
            
            // â‘£å¤„ç†å®¢æˆ·ç«¯æ¶ˆæ¯
            String message;
            while ((message = in.readLine()) != null) {
                System.out.println("ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
                // å›æ˜¾æ¶ˆæ¯ï¼ˆEchoï¼‰
                out.println("å›æ˜¾ï¼š" + message);
                
                // å¦‚æœæ”¶åˆ°"bye"å°±ç»“æŸ
                if ("bye".equals(message)) {
                    break;
                }
            }
            
            // â‘¤å…³é—­è¿æ¥
            clientSocket.close();
            serverSocket.close();
            System.out.println("ğŸ”Œ æœåŠ¡å™¨å…³é—­");
            
        } catch (IOException e) {
            System.err.println("âŒ æœåŠ¡å™¨é”™è¯¯ï¼š" + e.getMessage());
        }
    }
}
```

### 2.2 TCPå®¢æˆ·ç«¯å®ç°


**ğŸ’¡ æ ¸å¿ƒæ€è·¯**ï¼šå®¢æˆ·ç«¯å°±åƒ"æ‰“ç”µè¯çš„äºº"ï¼Œä¸»åŠ¨è¿æ¥æœåŠ¡å™¨

```java
// TCPå®¢æˆ·ç«¯ï¼šè¿æ¥æœåŠ¡å™¨å¹¶å‘é€æ¶ˆæ¯
public class TCPClient {
    public static void main(String[] args) {
        try {
            // â‘ è¿æ¥æœåŠ¡å™¨
            Socket socket = new Socket("localhost", 8080);
            System.out.println("ğŸ”— å·²è¿æ¥åˆ°æœåŠ¡å™¨");
            
            // â‘¡è·å–è¾“å…¥è¾“å‡ºæµ
            PrintWriter out = new PrintWriter(
                socket.getOutputStream(), true
            );
            BufferedReader in = new BufferedReader(
                new InputStreamReader(socket.getInputStream())
            );
            
            // â‘¢å‘é€æ¶ˆæ¯
            Scanner scanner = new Scanner(System.in);
            String userInput;
            
            System.out.println("ğŸ’¬ è¯·è¾“å…¥æ¶ˆæ¯ï¼ˆè¾“å…¥'bye'é€€å‡ºï¼‰ï¼š");
            while (true) {
                userInput = scanner.nextLine();
                
                // å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨
                out.println(userInput);
                
                // æ¥æ”¶æœåŠ¡å™¨å›å¤
                String response = in.readLine();
                System.out.println("ğŸ“© æœåŠ¡å™¨å›å¤ï¼š" + response);
                
                if ("bye".equals(userInput)) {
                    break;
                }
            }
            
            // â‘£å…³é—­è¿æ¥
            socket.close();
            System.out.println("ğŸ”Œ å®¢æˆ·ç«¯å…³é—­");
            
        } catch (IOException e) {
            System.err.println("âŒ å®¢æˆ·ç«¯é”™è¯¯ï¼š" + e.getMessage());
        }
    }
}
```

### 2.3 TCPé€šä¿¡è¿‡ç¨‹å›¾è§£


```
å®¢æˆ·ç«¯                                    æœåŠ¡å™¨
   |                                        |
   |--[1] è¿æ¥è¯·æ±‚ (SYN)------------------>|
   |<-[2] ç¡®è®¤è¿æ¥ (SYN+ACK)---------------|
   |--[3] ç¡®è®¤ (ACK)---------------------->|
   |                                        |
   |--[4] "Hello Server"------------------>|
   |<-[5] "å›æ˜¾ï¼šHello Server"-------------|
   |                                        |
   |--[6] "How are you?"------------------>|
   |<-[7] "å›æ˜¾ï¼šHow are you?"-------------|
   |                                        |
   |--[8] "bye"--------------------------->|
   |<-[9] "å›æ˜¾ï¼šbye"----------------------|
   |                                        |
   |--[10] å…³é—­è¿æ¥ (FIN)------------------>|
   |<-[11] ç¡®è®¤å…³é—­ (ACK)------------------|
```

**ğŸ” é‡ç‚¹ç†è§£**ï¼š
- **å»ºç«‹è¿æ¥**ï¼šéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼ˆç¬¬1-3æ­¥ï¼‰
- **æ•°æ®ä¼ è¾“**ï¼šå¯ä»¥å¤šæ¬¡æ”¶å‘æ¶ˆæ¯ï¼ˆç¬¬4-9æ­¥ï¼‰
- **å…³é—­è¿æ¥**ï¼šéœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼ˆç¬¬10-11æ­¥ç®€åŒ–ç‰ˆï¼‰

---

## 3. ğŸ“¡ UDPç¼–ç¨‹å®ä¾‹


### 3.1 UDPé€šä¿¡ç‰¹ç‚¹


> ğŸ’¡ **å½¢è±¡æ¯”å–»**ï¼šUDPå°±åƒ"å‘å¿«é€’"
> 
> TCPåƒæ‰“ç”µè¯ï¼šå¿…é¡»å¯¹æ–¹æ¥å¬æ‰èƒ½è¯´è¯ï¼Œè¯´å®Œå¯¹æ–¹ä¼šå›åº”
> UDPåƒå‘å¿«é€’ï¼šç›´æ¥æŠŠåŒ…è£¹æ‰”åˆ°åœ°å€å°±èµ°ï¼Œä¸ç®¡å¯¹æ–¹åœ¨ä¸åœ¨å®¶

**ğŸ”¸ UDP vs TCP æ ¸å¿ƒåŒºåˆ«**

| ç‰¹æ€§ | **TCP** | **UDP** |
|------|---------|---------|
| ğŸ”— **è¿æ¥** | `éœ€è¦å»ºç«‹è¿æ¥` | `æ— éœ€å»ºç«‹è¿æ¥` |
| ğŸ›¡ï¸ **å¯é æ€§** | `ä¿è¯æ•°æ®ä¸ä¸¢å¤±` | `å¯èƒ½ä¸¢å¤±æ•°æ®` |
| âš¡ **é€Ÿåº¦** | `è¾ƒæ…¢ï¼ˆæœ‰ç¡®è®¤æœºåˆ¶ï¼‰` | `å¾ˆå¿«ï¼ˆç›´æ¥å‘é€ï¼‰` |
| ğŸ“¦ **æ•°æ®å•ä½** | `å­—èŠ‚æµ` | `æ•°æ®åŒ…ï¼ˆDatagramï¼‰` |

### 3.2 UDPæœåŠ¡å™¨ç«¯å®ç°


```java
// UDPæœåŠ¡å™¨ï¼šæ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯å¹¶å›å¤
public class UDPServer {
    public static void main(String[] args) {
        try {
            // â‘ åˆ›å»ºUDP Socketï¼Œç»‘å®šç«¯å£9999
            DatagramSocket socket = new DatagramSocket(9999);
            System.out.println("ğŸ“¡ UDPæœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ç«¯å£9999...");
            
            // å‡†å¤‡æ¥æ”¶æ•°æ®çš„ç¼“å†²åŒº
            byte[] buffer = new byte[1024];
            
            while (true) {
                // â‘¡æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®åŒ…
                DatagramPacket receivePacket = new DatagramPacket(buffer, buffer.length);
                socket.receive(receivePacket);
                
                // â‘¢è§£ææ”¶åˆ°çš„æ¶ˆæ¯
                String message = new String(receivePacket.getData(), 0, receivePacket.getLength());
                System.out.println("ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯ï¼š" + message + 
                    " (æ¥è‡ªï¼š" + receivePacket.getAddress() + ")");
                
                // â‘£å‡†å¤‡å›å¤æ¶ˆæ¯
                String reply = "æœåŠ¡å™¨æ”¶åˆ°ï¼š" + message;
                byte[] replyData = reply.getBytes();
                
                // â‘¤å‘é€å›å¤åˆ°å®¢æˆ·ç«¯
                DatagramPacket sendPacket = new DatagramPacket(
                    replyData, 
                    replyData.length,
                    receivePacket.getAddress(),  // å®¢æˆ·ç«¯åœ°å€
                    receivePacket.getPort()      // å®¢æˆ·ç«¯ç«¯å£
                );
                socket.send(sendPacket);
                
                // å¦‚æœæ”¶åˆ°"bye"å°±é€€å‡º
                if ("bye".equals(message)) {
                    break;
                }
            }
            
            socket.close();
            System.out.println("ğŸ“¡ UDPæœåŠ¡å™¨å…³é—­");
            
        } catch (IOException e) {
            System.err.println("âŒ UDPæœåŠ¡å™¨é”™è¯¯ï¼š" + e.getMessage());
        }
    }
}
```

### 3.3 UDPå®¢æˆ·ç«¯å®ç°


```java
// UDPå®¢æˆ·ç«¯ï¼šå‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨
public class UDPClient {
    public static void main(String[] args) {
        try {
            // â‘ åˆ›å»ºUDP Socket
            DatagramSocket socket = new DatagramSocket();
            
            // â‘¡æœåŠ¡å™¨åœ°å€ä¿¡æ¯
            InetAddress serverAddress = InetAddress.getByName("localhost");
            int serverPort = 9999;
            
            Scanner scanner = new Scanner(System.in);
            System.out.println("ğŸ’¬ è¯·è¾“å…¥æ¶ˆæ¯ï¼ˆè¾“å…¥'bye'é€€å‡ºï¼‰ï¼š");
            
            while (true) {
                String message = scanner.nextLine();
                
                // â‘¢å‡†å¤‡å‘é€çš„æ•°æ®åŒ…
                byte[] data = message.getBytes();
                DatagramPacket sendPacket = new DatagramPacket(
                    data, data.length, serverAddress, serverPort
                );
                
                // â‘£å‘é€æ•°æ®åŒ…
                socket.send(sendPacket);
                
                // â‘¤æ¥æ”¶æœåŠ¡å™¨å›å¤
                byte[] buffer = new byte[1024];
                DatagramPacket receivePacket = new DatagramPacket(buffer, buffer.length);
                socket.receive(receivePacket);
                
                String reply = new String(receivePacket.getData(), 0, receivePacket.getLength());
                System.out.println("ğŸ“© æœåŠ¡å™¨å›å¤ï¼š" + reply);
                
                if ("bye".equals(message)) {
                    break;
                }
            }
            
            socket.close();
            System.out.println("ğŸ“¡ UDPå®¢æˆ·ç«¯å…³é—­");
            
        } catch (IOException e) {
            System.err.println("âŒ UDPå®¢æˆ·ç«¯é”™è¯¯ï¼š" + e.getMessage());
        }
    }
}
```

### 3.4 UDPé€šä¿¡è¿‡ç¨‹å›¾è§£


```
å®¢æˆ·ç«¯                                    æœåŠ¡å™¨
   |                                        |
   |--[1] "Hello Server" (UDPåŒ…)---------->|
   |<-[2] "æœåŠ¡å™¨æ”¶åˆ°ï¼šHello Server"--------|
   |                                        |
   |--[3] "How are you?" (UDPåŒ…)---------->|
   |<-[4] "æœåŠ¡å™¨æ”¶åˆ°ï¼šHow are you?"-------|
   |                                        |
   |--[5] "bye" (UDPåŒ…)-------------------->|
   |<-[6] "æœåŠ¡å™¨æ”¶åˆ°ï¼šbye"-----------------|
   |                                        |

æ³¨æ„ï¼šUDPæ²¡æœ‰è¿æ¥å»ºç«‹å’Œå…³é—­è¿‡ç¨‹ï¼
```

**âš ï¸ UDPç¼–ç¨‹æ³¨æ„äº‹é¡¹**ï¼š
- ğŸ“¦ **æ•°æ®åŒ…å¤§å°**ï¼šé€šå¸¸ä¸è¶…è¿‡65507å­—èŠ‚
- ğŸ”„ **é‡å¤å‘é€**ï¼šå¯èƒ½éœ€è¦è‡ªå·±å®ç°é‡è¯•æœºåˆ¶
- ğŸ“‹ **é¡ºåºé—®é¢˜**ï¼šæ•°æ®åŒ…å¯èƒ½ä¹±åºåˆ°è¾¾

---

## 4. ğŸ”€ å¤šè·¯å¤ç”¨æœºåˆ¶


### 4.1 ä»€ä¹ˆæ˜¯å¤šè·¯å¤ç”¨ï¼Ÿ


> ğŸ’¡ **ç”Ÿæ´»æ¯”å–»**ï¼šå¤šè·¯å¤ç”¨å°±åƒ"é¤å…æœåŠ¡å‘˜"
> 
> ä¼ ç»Ÿæ–¹å¼ï¼šä¸€ä¸ªæœåŠ¡å‘˜åªèƒ½æœåŠ¡ä¸€æ¡Œå®¢äººï¼Œå…¶ä»–å®¢äººå¿…é¡»ç­‰å¾…
> å¤šè·¯å¤ç”¨ï¼šä¸€ä¸ªæœåŠ¡å‘˜å¯ä»¥åŒæ—¶ç…§é¡¾å¤šæ¡Œå®¢äººï¼Œå“ªæ¡Œæœ‰éœ€è¦å°±å»å“ªæ¡Œ

**ğŸ”¸ ä¼ ç»Ÿé˜»å¡æ¨¡å¼é—®é¢˜**ï¼š
```
æœåŠ¡å™¨                        å®¢æˆ·ç«¯ä»¬
   |                            |
   |<--å®¢æˆ·ç«¯1è¿æ¥              |
   |  (ä¸“å¿ƒæœåŠ¡å®¢æˆ·ç«¯1)          |
   |                            |
   |  å®¢æˆ·ç«¯2æƒ³è¿æ¥ âŒ è¢«é˜»å¡    |
   |  å®¢æˆ·ç«¯3æƒ³è¿æ¥ âŒ è¢«é˜»å¡    |
   |  å®¢æˆ·ç«¯4æƒ³è¿æ¥ âŒ è¢«é˜»å¡    |
```

**ğŸ”¸ å¤šè·¯å¤ç”¨è§£å†³æ–¹æ¡ˆ**ï¼š
```
æœåŠ¡å™¨                        å®¢æˆ·ç«¯ä»¬
   |                            |
   |<--å®¢æˆ·ç«¯1è¿æ¥ âœ…           |
   |<--å®¢æˆ·ç«¯2è¿æ¥ âœ…           |
   |<--å®¢æˆ·ç«¯3è¿æ¥ âœ…           |
   |<--å®¢æˆ·ç«¯4è¿æ¥ âœ…           |
   |                            |
   | è½®æµå¤„ç†å„ä¸ªå®¢æˆ·ç«¯è¯·æ±‚       |
```

### 4.2 Javaä¸­çš„å¤šè·¯å¤ç”¨ï¼šNIO


**ğŸ”¸ NIOæ ¸å¿ƒç»„ä»¶**ï¼š

| ç»„ä»¶ | **ä½œç”¨** | **æ¯”å–»** |
|------|---------|---------|
| ğŸ”Œ **Channel** | `æ•°æ®é€šé“` | `æ°´ç®¡ï¼šæ•°æ®æµåŠ¨çš„ç®¡é“` |
| ğŸ“¦ **Buffer** | `æ•°æ®ç¼“å†²åŒº` | `æ°´æ¡¶ï¼šä¸´æ—¶å­˜æ”¾æ•°æ®` |
| ğŸ‘€ **Selector** | `é€‰æ‹©å™¨` | `ç›‘æ§å‘˜ï¼šç›‘è§†å“ªä¸ªç®¡é“æœ‰æ•°æ®` |

### 4.3 NIOæœåŠ¡å™¨ç®€å•ç¤ºä¾‹


```java
// NIOå¤šè·¯å¤ç”¨æœåŠ¡å™¨ç¤ºä¾‹
public class NIOServer {
    public static void main(String[] args) {
        try {
            // â‘ åˆ›å»ºSelectorï¼ˆé€‰æ‹©å™¨ï¼‰
            Selector selector = Selector.open();
            
            // â‘¡åˆ›å»ºServerSocketChannel
            ServerSocketChannel serverChannel = ServerSocketChannel.open();
            serverChannel.configureBlocking(false);  // è®¾ç½®éé˜»å¡
            serverChannel.bind(new InetSocketAddress(8080));
            
            // â‘¢æ³¨å†Œåˆ°é€‰æ‹©å™¨ï¼Œç›‘å¬è¿æ¥äº‹ä»¶
            serverChannel.register(selector, SelectionKey.OP_ACCEPT);
            System.out.println("ğŸ”€ NIOæœåŠ¡å™¨å¯åŠ¨ï¼Œæ”¯æŒå¤šå®¢æˆ·ç«¯è¿æ¥...");
            
            while (true) {
                // â‘£ç­‰å¾…äº‹ä»¶å‘ç”Ÿ
                int readyChannels = selector.select();
                if (readyChannels == 0) continue;
                
                // â‘¤å¤„ç†å°±ç»ªçš„é€šé“
                Set<SelectionKey> selectedKeys = selector.selectedKeys();
                Iterator<SelectionKey> keyIterator = selectedKeys.iterator();
                
                while (keyIterator.hasNext()) {
                    SelectionKey key = keyIterator.next();
                    
                    if (key.isAcceptable()) {
                        // å¤„ç†æ–°è¿æ¥
                        handleAccept(serverChannel, selector);
                    } else if (key.isReadable()) {
                        // å¤„ç†è¯»æ•°æ®
                        handleRead(key);
                    }
                    
                    keyIterator.remove();
                }
            }
            
        } catch (IOException e) {
            System.err.println("âŒ NIOæœåŠ¡å™¨é”™è¯¯ï¼š" + e.getMessage());
        }
    }
    
    // å¤„ç†æ–°å®¢æˆ·ç«¯è¿æ¥
    private static void handleAccept(ServerSocketChannel serverChannel, Selector selector) 
            throws IOException {
        SocketChannel clientChannel = serverChannel.accept();
        clientChannel.configureBlocking(false);
        clientChannel.register(selector, SelectionKey.OP_READ);
        System.out.println("âœ… æ–°å®¢æˆ·ç«¯è¿æ¥ï¼š" + clientChannel.getRemoteAddress());
    }
    
    // å¤„ç†å®¢æˆ·ç«¯æ•°æ®
    private static void handleRead(SelectionKey key) throws IOException {
        SocketChannel clientChannel = (SocketChannel) key.channel();
        ByteBuffer buffer = ByteBuffer.allocate(1024);
        
        int bytesRead = clientChannel.read(buffer);
        if (bytesRead > 0) {
            buffer.flip();
            String message = new String(buffer.array(), 0, buffer.limit());
            System.out.println("ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
            
            // å›æ˜¾æ¶ˆæ¯
            buffer.rewind();
            clientChannel.write(buffer);
        } else if (bytesRead < 0) {
            // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥
            System.out.println("ğŸ”Œ å®¢æˆ·ç«¯æ–­å¼€ï¼š" + clientChannel.getRemoteAddress());
            key.cancel();
            clientChannel.close();
        }
    }
}
```

**ğŸ¯ NIOå¤šè·¯å¤ç”¨ä¼˜åŠ¿**ï¼š
- âš¡ **é«˜å¹¶å‘**ï¼šä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªè¿æ¥
- ğŸ’¾ **å†…å­˜æ•ˆç‡**ï¼šä¸éœ€è¦ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºçº¿ç¨‹
- ğŸ”„ **å“åº”é€Ÿåº¦**ï¼šéé˜»å¡ï¼ŒåŠæ—¶å¤„ç†å°±ç»ªäº‹ä»¶

---

## 5. âš¡ å¼‚æ­¥IOæ¦‚å¿µ


### 5.1 ä»€ä¹ˆæ˜¯å¼‚æ­¥IOï¼Ÿ


> ğŸ’¡ **é¤å…æ¯”å–»**ï¼šç†è§£åŒæ­¥IO vs å¼‚æ­¥IO
> 
> **åŒæ­¥IO**ï¼šä½ ç‚¹é¤åï¼Œä¸€ç›´ç«™åœ¨æŸœå°ç­‰ï¼Œç›´åˆ°èœåšå¥½æ‰ç¦»å¼€
> **å¼‚æ­¥IO**ï¼šä½ ç‚¹é¤åç•™ä¸ªç”µè¯å·ç å°±å»é€›è¡—ï¼Œèœåšå¥½äº†é¤å…æ‰“ç”µè¯é€šçŸ¥ä½ 

**ğŸ”¸ IOæ¨¡å¼å¯¹æ¯”**ï¼š

```
é˜»å¡IO (Blocking IO)ï¼š
ç¨‹åº --å‘é€è¯·æ±‚--> å†…æ ¸
     <--ç­‰å¾…...--> 
     <--ç­‰å¾…...--> 
     <--æ•°æ®å‡†å¤‡å¥½--> 
ç¨‹åºç»§ç»­æ‰§è¡Œ

éé˜»å¡IO (Non-blocking IO)ï¼š
ç¨‹åº --å‘é€è¯·æ±‚--> å†…æ ¸
     <--ç«‹å³è¿”å›"æ²¡å‡†å¤‡å¥½"--> 
ç¨‹åº --å†æ¬¡è¯·æ±‚--> å†…æ ¸
     <--ç«‹å³è¿”å›"æ²¡å‡†å¤‡å¥½"--> 
ç¨‹åº --ç»§ç»­è¯·æ±‚--> å†…æ ¸
     <--æ•°æ®å‡†å¤‡å¥½--> 

å¼‚æ­¥IO (Asynchronous IO)ï¼š
ç¨‹åº --å‘é€è¯·æ±‚--> å†…æ ¸
ç¨‹åºç»§ç»­å¹²å…¶ä»–äº‹æƒ…...
å†…æ ¸ --æ•°æ®å‡†å¤‡å¥½åé€šçŸ¥--> ç¨‹åº
```

### 5.2 Javaå¼‚æ­¥IOï¼šAIO


**ğŸ”¸ AIOç¼–ç¨‹æ¨¡å‹**ï¼š

```java
// AIOå¼‚æ­¥æœåŠ¡å™¨ç¤ºä¾‹
public class AIOServer {
    public static void main(String[] args) throws IOException {
        // â‘ åˆ›å»ºå¼‚æ­¥æœåŠ¡å™¨é€šé“ç»„
        AsynchronousChannelGroup group = AsynchronousChannelGroup.withFixedThreadPool(
            4, Executors.defaultThreadFactory()
        );
        
        // â‘¡åˆ›å»ºå¼‚æ­¥æœåŠ¡å™¨Socketé€šé“
        AsynchronousServerSocketChannel serverChannel = 
            AsynchronousServerSocketChannel.open(group);
        serverChannel.bind(new InetSocketAddress(8080));
        
        System.out.println("âš¡ AIOå¼‚æ­¥æœåŠ¡å™¨å¯åŠ¨...");
        
        // â‘¢å¼‚æ­¥æ¥å—è¿æ¥
        serverChannel.accept(null, new CompletionHandler<AsynchronousSocketChannel, Void>() {
            @Override
            public void completed(AsynchronousSocketChannel clientChannel, Void attachment) {
                // ç»§ç»­æ¥å—ä¸‹ä¸€ä¸ªè¿æ¥
                serverChannel.accept(null, this);
                
                System.out.println("âœ… å¼‚æ­¥æ¥å—æ–°è¿æ¥");
                
                // å¼‚æ­¥è¯»å–æ•°æ®
                ByteBuffer buffer = ByteBuffer.allocate(1024);
                clientChannel.read(buffer, buffer, new CompletionHandler<Integer, ByteBuffer>() {
                    @Override
                    public void completed(Integer result, ByteBuffer buffer) {
                        buffer.flip();
                        String message = new String(buffer.array(), 0, buffer.limit());
                        System.out.println("ğŸ“¨ å¼‚æ­¥æ”¶åˆ°æ¶ˆæ¯ï¼š" + message);
                        
                        // å¼‚æ­¥å›å¤
                        ByteBuffer response = ByteBuffer.wrap(("å›å¤ï¼š" + message).getBytes());
                        clientChannel.write(response);
                    }
                    
                    @Override
                    public void failed(Throwable exc, ByteBuffer buffer) {
                        System.err.println("âŒ è¯»å–å¤±è´¥ï¼š" + exc.getMessage());
                    }
                });
            }
            
            @Override
            public void failed(Throwable exc, Void attachment) {
                System.err.println("âŒ æ¥å—è¿æ¥å¤±è´¥ï¼š" + exc.getMessage());
            }
        });
        
        // ä¿æŒä¸»çº¿ç¨‹è¿è¡Œ
        System.in.read();
    }
}
```

### 5.3 å¼‚æ­¥IOçš„ä¼˜åŠ¿


**ğŸ¯ AIOé€‚ç”¨åœºæ™¯**ï¼š
- ğŸ”¥ **é«˜å¹¶å‘**ï¼šå¤§é‡å¹¶å‘è¿æ¥
- âš¡ **é«˜æ€§èƒ½**ï¼šIOå¯†é›†å‹åº”ç”¨
- ğŸŒ **WebæœåŠ¡å™¨**ï¼šéœ€è¦å¤„ç†å¤§é‡HTTPè¯·æ±‚
- ğŸ“¡ **èŠå¤©æœåŠ¡å™¨**ï¼šå®æ—¶æ¶ˆæ¯æ¨é€

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
- ğŸ“š **å­¦ä¹ æˆæœ¬**ï¼šæ¯”åŒæ­¥IOå¤æ‚
- ğŸ› **è°ƒè¯•å›°éš¾**ï¼šå¼‚æ­¥è°ƒç”¨æ ˆä¸ç›´è§‚
- ğŸ”§ **é”™è¯¯å¤„ç†**ï¼šéœ€è¦åœ¨å›è°ƒä¸­å¤„ç†å¼‚å¸¸

---

## 6. ğŸ› ï¸ ç½‘ç»œç¼–ç¨‹æœ€ä½³å®è·µ


### 6.1 è¿æ¥ç®¡ç†æœ€ä½³å®è·µ


**ğŸ”¸ èµ„æºç®¡ç†åŸåˆ™**

> âš ï¸ **é‡è¦æé†’**ï¼šç½‘ç»œèµ„æºå¿…é¡»æ­£ç¡®å…³é—­
> 
> å°±åƒå€Ÿä¹¦è¦è¿˜ï¼Œç”¨å®ŒSocketä¸€å®šè¦å…³é—­ï¼Œå¦åˆ™ä¼šé€ æˆèµ„æºæ³„éœ²

```java
// âœ… æ­£ç¡®çš„èµ„æºç®¡ç†æ–¹å¼
public void correctSocketUsage() {
    Socket socket = null;
    try {
        socket = new Socket("localhost", 8080);
        // ä½¿ç”¨socketè¿›è¡Œç½‘ç»œæ“ä½œ...
        
    } catch (IOException e) {
        System.err.println("ç½‘ç»œå¼‚å¸¸ï¼š" + e.getMessage());
    } finally {
        // ç¡®ä¿socketè¢«å…³é—­
        if (socket != null && !socket.isClosed()) {
            try {
                socket.close();
            } catch (IOException e) {
                System.err.println("å…³é—­socketå¤±è´¥ï¼š" + e.getMessage());
            }
        }
    }
}

// ğŸŒŸ æ›´å¥½çš„æ–¹å¼ï¼šä½¿ç”¨try-with-resources
public void betterSocketUsage() {
    try (Socket socket = new Socket("localhost", 8080);
         PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
         BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()))) {
        
        // ä½¿ç”¨socketè¿›è¡Œç½‘ç»œæ“ä½œ...
        // è‡ªåŠ¨å…³é—­èµ„æºï¼Œæ— éœ€æ‰‹åŠ¨close()
        
    } catch (IOException e) {
        System.err.println("ç½‘ç»œå¼‚å¸¸ï¼š" + e.getMessage());
    }
}
```

### 6.2 å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ


**ğŸ”¸ å¸¸è§ç½‘ç»œå¼‚å¸¸ç±»å‹**

| å¼‚å¸¸ç±»å‹ | **å«ä¹‰** | **å¤„ç†æ–¹å¼** |
|---------|---------|------------|
| ğŸŒ **ConnectException** | `æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨` | `æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ï¼Œç½‘ç»œæ˜¯å¦é€šç•…` |
| â° **SocketTimeoutException** | `è¿æ¥æˆ–è¯»å–è¶…æ—¶` | `å¢åŠ è¶…æ—¶æ—¶é—´æˆ–æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ` |
| ğŸ”Œ **SocketException** | `è¿æ¥è¢«é‡ç½®æˆ–ä¸­æ–­` | `æ£€æŸ¥å¯¹æ–¹æ˜¯å¦æ­£å¸¸å…³é—­è¿æ¥` |
| ğŸš« **UnknownHostException** | `æ— æ³•è§£æä¸»æœºå` | `æ£€æŸ¥åŸŸåæ˜¯å¦æ­£ç¡®æˆ–DNSè®¾ç½®` |

```java
// å®Œå–„çš„å¼‚å¸¸å¤„ç†ç¤ºä¾‹
public class RobustClient {
    private static final int MAX_RETRY = 3;
    private static final int TIMEOUT = 5000; // 5ç§’è¶…æ—¶
    
    public boolean connectWithRetry(String host, int port) {
        for (int i = 0; i < MAX_RETRY; i++) {
            try {
                Socket socket = new Socket();
                socket.setSoTimeout(TIMEOUT);  // è®¾ç½®è¯»å–è¶…æ—¶
                socket.connect(new InetSocketAddress(host, port), TIMEOUT);  // è®¾ç½®è¿æ¥è¶…æ—¶
                
                System.out.println("âœ… è¿æ¥æˆåŠŸ");
                return true;
                
            } catch (ConnectException e) {
                System.err.println("ğŸŒ è¿æ¥å¤±è´¥ï¼Œç¬¬" + (i+1) + "æ¬¡é‡è¯•...");
            } catch (SocketTimeoutException e) {
                System.err.println("â° è¿æ¥è¶…æ—¶ï¼Œç¬¬" + (i+1) + "æ¬¡é‡è¯•...");
            } catch (IOException e) {
                System.err.println("âŒ ç½‘ç»œå¼‚å¸¸ï¼š" + e.getMessage());
                break;  // å…¶ä»–å¼‚å¸¸ä¸é‡è¯•
            }
            
            // é‡è¯•å‰ç­‰å¾…
            try {
                Thread.sleep(1000 * (i + 1));  // é€’å¢ç­‰å¾…æ—¶é—´
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
                break;
            }
        }
        
        System.err.println("âŒ è¿æ¥æœ€ç»ˆå¤±è´¥");
        return false;
    }
}
```

### 6.3 æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ


**ğŸ”¸ ç¼“å†²åŒºä¼˜åŒ–**

```java
// âŒ æ€§èƒ½å·®çš„æ–¹å¼ï¼šæ¯æ¬¡è¯»å†™ä¸€ä¸ªå­—èŠ‚
public void slowIO(Socket socket) throws IOException {
    InputStream in = socket.getInputStream();
    OutputStream out = socket.getOutputStream();
    
    int data;
    while ((data = in.read()) != -1) {  // æ¯æ¬¡åªè¯»1å­—èŠ‚ï¼Œæ•ˆç‡æä½
        out.write(data);  // æ¯æ¬¡åªå†™1å­—èŠ‚
    }
}

// âœ… æ€§èƒ½å¥½çš„æ–¹å¼ï¼šä½¿ç”¨ç¼“å†²åŒº
public void fastIO(Socket socket) throws IOException {
    BufferedInputStream in = new BufferedInputStream(socket.getInputStream());
    BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());
    
    byte[] buffer = new byte[8192];  // 8KBç¼“å†²åŒº
    int bytesRead;
    while ((bytesRead = in.read(buffer)) != -1) {
        out.write(buffer, 0, bytesRead);
    }
    out.flush();  // ç¡®ä¿æ•°æ®å‘é€å‡ºå»
}
```

**ğŸ”¸ è¿æ¥æ± ç®¡ç†**

```java
// ç®€å•çš„è¿æ¥æ± ç¤ºä¾‹
public class SimpleConnectionPool {
    private final Queue<Socket> availableConnections = new ConcurrentLinkedQueue<>();
    private final int maxConnections;
    private final String host;
    private final int port;
    
    public SimpleConnectionPool(String host, int port, int maxConnections) {
        this.host = host;
        this.port = port;
        this.maxConnections = maxConnections;
    }
    
    // è·å–è¿æ¥
    public Socket getConnection() throws IOException {
        Socket socket = availableConnections.poll();
        if (socket == null || socket.isClosed()) {
            // åˆ›å»ºæ–°è¿æ¥
            socket = new Socket(host, port);
            System.out.println("ğŸ†• åˆ›å»ºæ–°è¿æ¥");
        } else {
            System.out.println("â™»ï¸ å¤ç”¨ç°æœ‰è¿æ¥");
        }
        return socket;
    }
    
    // å½’è¿˜è¿æ¥
    public void returnConnection(Socket socket) {
        if (socket != null && !socket.isClosed() && 
            availableConnections.size() < maxConnections) {
            availableConnections.offer(socket);
            System.out.println("ğŸ“¥ è¿æ¥å·²å½’è¿˜åˆ°æ± ä¸­");
        } else {
            try {
                socket.close();
                System.out.println("ğŸ”Œ è¿æ¥å·²å…³é—­");
            } catch (IOException e) {
                System.err.println("âŒ å…³é—­è¿æ¥å¤±è´¥ï¼š" + e.getMessage());
            }
        }
    }
}
```

### 6.4 å®‰å…¨ç¼–ç¨‹æœ€ä½³å®è·µ


**ğŸ”¸ è¾“å…¥éªŒè¯**

```java
// å®‰å…¨çš„æ¶ˆæ¯å¤„ç†
public class SecureMessageHandler {
    private static final int MAX_MESSAGE_SIZE = 1024 * 1024; // 1MBé™åˆ¶
    
    public String readSafeMessage(BufferedReader reader) throws IOException {
        StringBuilder message = new StringBuilder();
        String line;
        int totalSize = 0;
        
        while ((line = reader.readLine()) != null) {
            totalSize += line.length();
            
            // é˜²æ­¢å†…å­˜æ”»å‡»
            if (totalSize > MAX_MESSAGE_SIZE) {
                throw new IOException("æ¶ˆæ¯è¿‡å¤§ï¼Œå¯èƒ½æ˜¯æ”»å‡»");
            }
            
            // é˜²æ­¢ç‰¹æ®Šå­—ç¬¦æ³¨å…¥
            if (containsUnsafeCharacters(line)) {
                throw new IOException("æ¶ˆæ¯åŒ…å«ä¸å®‰å…¨å­—ç¬¦");
            }
            
            message.append(line).append("\n");
            
            // æ¶ˆæ¯ç»“æŸæ ‡å¿—
            if ("END".equals(line.trim())) {
                break;
            }
        }
        
        return message.toString();
    }
    
    private boolean containsUnsafeCharacters(String input) {
        // ç®€å•çš„å®‰å…¨æ£€æŸ¥ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ›´å¤æ‚çš„è¿‡æ»¤
        return input.contains("<script>") || input.contains("javascript:");
    }
}
```

**ğŸ”¸ è¶…æ—¶è®¾ç½®**

```java
// è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
public void configureTimeouts(Socket socket) throws SocketException {
    // è¿æ¥è¶…æ—¶ï¼šé˜²æ­¢è¿æ¥å¡æ­»
    socket.connect(new InetSocketAddress("example.com", 80), 10000); // 10ç§’
    
    // è¯»å–è¶…æ—¶ï¼šé˜²æ­¢è¯»å–å¡æ­»
    socket.setSoTimeout(30000); // 30ç§’
    
    // ä¿æ´»æœºåˆ¶ï¼šæ£€æµ‹è¿æ¥æ˜¯å¦è¿˜æ´»ç€
    socket.setKeepAlive(true);
    
    // TCPæ— å»¶è¿Ÿï¼šå°æ•°æ®åŒ…ç«‹å³å‘é€
    socket.setTcpNoDelay(true);
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Socketæœ¬è´¨ï¼šç½‘ç»œç¼–ç¨‹çš„"ç”µè¯æœº"ï¼ŒIP+ç«¯å£+åè®®çš„ç»„åˆ
ğŸ”¸ TCP vs UDPï¼šTCPåƒæ‰“ç”µè¯éœ€è¦æ¥é€šï¼ŒUDPåƒå‘çŸ­ä¿¡ç›´æ¥å‘é€
ğŸ”¸ ç¼–ç¨‹æµç¨‹ï¼šæœåŠ¡å™¨å…ˆå¼€é—¨ç­‰å®¢äººï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨ä¸Šé—¨æ¶ˆè´¹
ğŸ”¸ å¤šè·¯å¤ç”¨ï¼šä¸€ä¸ªæœåŠ¡å‘˜åŒæ—¶æœåŠ¡å¤šæ¡Œå®¢äººï¼Œæé«˜å¹¶å‘èƒ½åŠ›
ğŸ”¸ å¼‚æ­¥IOï¼šç‚¹é¤åå»é€›è¡—ï¼Œèœå¥½äº†ç”µè¯é€šçŸ¥ï¼Œä¸ç”¨ä¸€ç›´ç­‰å¾…
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Socketç¼–ç¨‹æ ¸å¿ƒæ€ç»´**
```
æœåŠ¡å™¨æ€ç»´ï¼š
- æˆ‘è¦å¼€é—¨è¥ä¸šï¼ˆbindç«¯å£ï¼‰
- ç­‰å¾…å®¢äººä¸Šé—¨ï¼ˆacceptè¿æ¥ï¼‰
- ä¸ºå®¢äººæœåŠ¡ï¼ˆå¤„ç†è¯·æ±‚ï¼‰
- å®¢äººèµ°åæ”¶æ‹¾ï¼ˆå…³é—­è¿æ¥ï¼‰

å®¢æˆ·ç«¯æ€ç»´ï¼š
- æˆ‘è¦å»æŸå®¶åº—ï¼ˆè¿æ¥æœåŠ¡å™¨ï¼‰
- å‘Šè¯‰åº—å‘˜æˆ‘çš„éœ€æ±‚ï¼ˆå‘é€è¯·æ±‚ï¼‰
- ç­‰å¾…åº—å‘˜å“åº”ï¼ˆæ¥æ”¶å“åº”ï¼‰
- ç¦»å¼€åº—é“ºï¼ˆå…³é—­è¿æ¥ï¼‰
```

**ğŸ”¹ TCP vs UDP é€‰æ‹©åŸåˆ™**
```
é€‰æ‹©TCPçš„åœºæ™¯ï¼š
âœ… æ•°æ®ä¸èƒ½ä¸¢å¤±ï¼ˆæ–‡ä»¶ä¼ è¾“ã€æ”¯ä»˜ï¼‰
âœ… æ•°æ®é¡ºåºé‡è¦ï¼ˆèŠå¤©æ¶ˆæ¯ã€ç½‘é¡µæµè§ˆï¼‰
âœ… å¯é æ€§æ¯”é€Ÿåº¦é‡è¦

é€‰æ‹©UDPçš„åœºæ™¯ï¼š
âœ… é€Ÿåº¦æ¯”å¯é æ€§é‡è¦ï¼ˆæ¸¸æˆã€è§†é¢‘ç›´æ’­ï¼‰
âœ… æ•°æ®é‡å¤§ä¸”å…è®¸å°‘é‡ä¸¢å¤±
âœ… ç®€å•çš„è¯·æ±‚-å“åº”æ¨¡å¼ï¼ˆDNSæŸ¥è¯¢ï¼‰
```

**ğŸ”¹ å¹¶å‘å¤„ç†è¿›åŒ–è·¯å¾„**
```
å•çº¿ç¨‹é˜»å¡ â†’ å¤šçº¿ç¨‹ â†’ çº¿ç¨‹æ±  â†’ NIOå¤šè·¯å¤ç”¨ â†’ AIOå¼‚æ­¥

æ€§èƒ½æå‡ï¼šä½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> é«˜
å¤æ‚åº¦ï¼š  ä½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> é«˜
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


- ğŸŒ **Webå¼€å‘**ï¼šç†è§£HTTPåº•å±‚åŸç†ï¼Œä¼˜åŒ–ç½‘ç»œæ€§èƒ½
- ğŸ® **æ¸¸æˆå¼€å‘**ï¼šå®æ—¶é€šä¿¡ï¼Œå¤šäººåœ¨çº¿æ¸¸æˆ
- ğŸ’¬ **å³æ—¶é€šè®¯**ï¼šQQã€å¾®ä¿¡ç­‰èŠå¤©åº”ç”¨
- ğŸ“¡ **ç‰©è”ç½‘**ï¼šè®¾å¤‡é—´é€šä¿¡ï¼Œæ•°æ®é‡‡é›†
- ğŸ¢ **ä¼ä¸šåº”ç”¨**ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¾®æœåŠ¡é€šä¿¡

### 7.4 å­¦ä¹ å»ºè®®


**ğŸ¯ å¾ªåºæ¸è¿›çš„å­¦ä¹ è·¯å¾„**ï¼š
1. **ç¬¬ä¸€æ­¥**ï¼šæŒæ¡åŸºæœ¬TCP/UDP Socketç¼–ç¨‹
2. **ç¬¬äºŒæ­¥**ï¼šç†è§£å¤šçº¿ç¨‹å¹¶å‘å¤„ç†
3. **ç¬¬ä¸‰æ­¥**ï¼šå­¦ä¹ NIOå¤šè·¯å¤ç”¨æœºåˆ¶  
4. **ç¬¬å››æ­¥**ï¼šæ¢ç´¢AIOå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹
5. **ç¬¬äº”æ­¥**ï¼šå­¦ä¹ ç½‘ç»œç¼–ç¨‹æœ€ä½³å®è·µ

**ğŸ’¡ å®è·µå»ºè®®**ï¼š
- ğŸ”¨ **åŠ¨æ‰‹å®è·µ**ï¼šæ¯ä¸ªæ¦‚å¿µéƒ½è¦äº²è‡ªç¼–ç éªŒè¯
- ğŸ› **è°ƒè¯•ç½‘ç»œ**ï¼šä½¿ç”¨Wiresharkç­‰å·¥å…·è§‚å¯Ÿæ•°æ®åŒ…
- ğŸ“š **é˜…è¯»æºç **ï¼šç ”ç©¶Nettyç­‰ç½‘ç»œæ¡†æ¶çš„å®ç°
- ğŸŒ **é¡¹ç›®å®æˆ˜**ï¼šå¼€å‘èŠå¤©å®¤ã€æ–‡ä»¶ä¼ è¾“ç­‰é¡¹ç›®

**æ ¸å¿ƒè®°å¿†**ï¼š
- Socketæ˜¯ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€ï¼Œåƒç¨‹åºé—´çš„ç”µè¯æœº
- TCPå¯é ä½†æ…¢ï¼ŒUDPå¿«é€Ÿä½†å¯èƒ½ä¸¢åŒ…ï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©
- å¤šè·¯å¤ç”¨å’Œå¼‚æ­¥IOæ˜¯é«˜å¹¶å‘çš„å…³é”®æŠ€æœ¯
- è‰¯å¥½çš„å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†æ˜¯ç¨³å®šç³»ç»Ÿçš„åŸºçŸ³