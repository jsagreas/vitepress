---
title: 4ã€è¯·æ±‚å‚æ•°ç»‘å®šå¤„ç†
---
## ğŸ“š ç›®å½•

1. [è¯·æ±‚å‚æ•°å¤„ç†æ¦‚è¿°](#1-è¯·æ±‚å‚æ•°å¤„ç†æ¦‚è¿°)
2. [@RequestParamæŸ¥è¯¢å‚æ•°æ³¨è§£](#2-RequestParamæŸ¥è¯¢å‚æ•°æ³¨è§£)
3. [@PathVariableè·¯å¾„å˜é‡](#3-PathVariableè·¯å¾„å˜é‡)
4. [@RequestBodyè¯·æ±‚ä½“å¤„ç†](#4-RequestBodyè¯·æ±‚ä½“å¤„ç†)
5. [@RequestHeaderè¯·æ±‚å¤´è·å–](#5-RequestHeaderè¯·æ±‚å¤´è·å–)
6. [@CookieValue Cookieå€¼è·å–](#6-CookieValue-Cookieå€¼è·å–)
7. [@ModelAttributeæ¨¡å‹å±æ€§](#7-ModelAttributeæ¨¡å‹å±æ€§)
8. [@SessionAttributeä¼šè¯å±æ€§](#8-SessionAttributeä¼šè¯å±æ€§)
9. [å‚æ•°ç±»å‹è½¬æ¢æœºåˆ¶](#9-å‚æ•°ç±»å‹è½¬æ¢æœºåˆ¶)
10. [æ—¥æœŸæ ¼å¼å¤„ç†](#10-æ—¥æœŸæ ¼å¼å¤„ç†)
11. [è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨](#11-è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨)
12. [æ•°æ®æ ¼å¼åŒ–](#12-æ•°æ®æ ¼å¼åŒ–)
13. [å‚æ•°æ ¡éªŒå¤„ç†](#13-å‚æ•°æ ¡éªŒå¤„ç†)
14. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#14-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ è¯·æ±‚å‚æ•°å¤„ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯è¯·æ±‚å‚æ•°ç»‘å®š


**é€šä¿—ç†è§£ï¼šæŠŠæµè§ˆå™¨å‘æ¥çš„æ•°æ®ï¼Œè‡ªåŠ¨è£…è¿›Javaæ–¹æ³•çš„å‚æ•°é‡Œ**

```
å‰ç«¯å‘é€è¯·æ±‚ â†’ SpringMVCæ¥æ”¶ â†’ è‡ªåŠ¨è½¬æ¢ â†’ ä¼ ç»™æ–¹æ³•å‚æ•°

å°±åƒå¿«é€’ï¼š
å‰ç«¯ = å¯„ä»¶äººï¼ˆå‘é€æ•°æ®ï¼‰
SpringMVC = å¿«é€’å…¬å¸ï¼ˆå¤„ç†è½¬æ¢ï¼‰
Controlleræ–¹æ³• = æ”¶ä»¶äººï¼ˆæ¥æ”¶ä½¿ç”¨ï¼‰
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å‚æ•°ç»‘å®š


**ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹ï¼š**
```java
// ä¼ ç»ŸServletæ–¹å¼ï¼šéº»çƒ¦åˆå®¹æ˜“å‡ºé”™
String name = request.getParameter("name");
String ageStr = request.getParameter("age");
int age = Integer.parseInt(ageStr); // è¿˜è¦æ‰‹åŠ¨è½¬æ¢ç±»å‹
```

**SpringMVCæ–¹å¼ï¼šè‡ªåŠ¨åŒ–å¤„ç†**
```java
// SpringMVCï¼šç›´æ¥å°±èƒ½ç”¨ï¼Œè‡ªåŠ¨è½¬æ¢å¥½äº†
@GetMapping("/user")
public String getUser(String name, int age) {
    // nameå’Œageå·²ç»å‡†å¤‡å¥½äº†ï¼Œç›´æ¥ç”¨ï¼
}
```

### 1.3 å‚æ•°æ¥æºå…¨æ™¯å›¾


```
HTTPè¯·æ±‚çš„æ•°æ®å¯èƒ½æ¥è‡ªï¼š

ğŸ“ URLè·¯å¾„         /user/123           â†’ @PathVariable
ğŸ“ æŸ¥è¯¢å­—ç¬¦ä¸²       ?name=å¼ ä¸‰&age=20    â†’ @RequestParam  
ğŸ“ è¯·æ±‚ä½“          JSON/è¡¨å•æ•°æ®         â†’ @RequestBody
ğŸ“ è¯·æ±‚å¤´          User-Agentç­‰         â†’ @RequestHeader
ğŸ“ Cookie         sessionIdç­‰          â†’ @CookieValue
ğŸ“ Sessionä¼šè¯    ç™»å½•ç”¨æˆ·ä¿¡æ¯           â†’ @SessionAttribute
ğŸ“ Modelæ¨¡å‹      å…±äº«æ•°æ®              â†’ @ModelAttribute
```

---

## 2. ğŸ” @RequestParamæŸ¥è¯¢å‚æ•°æ³¨è§£


### 2.1 åŸºæœ¬æ¦‚å¿µ


**@RequestParamçš„ä½œç”¨ï¼š**
> è·å–URLé—®å·åé¢çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Stringï¼‰

```
URLç¤ºä¾‹ï¼šhttp://localhost:8080/search?keyword=æ‰‹æœº&page=1

keyword=æ‰‹æœº  â†’ è¿™å°±æ˜¯æŸ¥è¯¢å‚æ•°
page=1       â†’ è¿™ä¹Ÿæ˜¯æŸ¥è¯¢å‚æ•°
```

### 2.2 åŸºç¡€ç”¨æ³•


**æœ€ç®€å•çš„ç”¨æ³•ï¼š**
```java
@GetMapping("/search")
public String search(@RequestParam String keyword) {
    // è®¿é—®ï¼š/search?keyword=æ‰‹æœº
    // keywordçš„å€¼å°±æ˜¯"æ‰‹æœº"
    return "æœç´¢ï¼š" + keyword;
}
```

**å‚æ•°åä¸ä¸€è‡´æ—¶ï¼š**
```java
@GetMapping("/search")
public String search(@RequestParam("q") String keyword) {
    // è®¿é—®ï¼š/search?q=æ‰‹æœº
    // è™½ç„¶URLå‚æ•°å«qï¼Œä½†Javaå˜é‡å«keyword
    return "æœç´¢ï¼š" + keyword;
}
```

### 2.3 å¸¸ç”¨å±æ€§è¯¦è§£


| å±æ€§ | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|-----|------|--------|------|
| **value/name** | URLå‚æ•°å | å˜é‡å | `@RequestParam("q")` |
| **required** | æ˜¯å¦å¿…éœ€ | true | `required=false`å…è®¸ä¸ä¼  |
| **defaultValue** | é»˜è®¤å€¼ | æ—  | `defaultValue="1"`ä¸ä¼ æ—¶ç”¨é»˜è®¤å€¼ |

**å®é™…åº”ç”¨ç¤ºä¾‹ï¼š**
```java
@GetMapping("/list")
public String list(
    @RequestParam(value = "page", defaultValue = "1") int page,
    @RequestParam(value = "size", defaultValue = "10") int size,
    @RequestParam(required = false) String keyword
) {
    // è®¿é—®ï¼š/list              â†’ page=1, size=10, keyword=null
    // è®¿é—®ï¼š/list?page=2       â†’ page=2, size=10, keyword=null
    // è®¿é—®ï¼š/list?keyword=æ‰‹æœº  â†’ page=1, size=10, keyword="æ‰‹æœº"
    
    return String.format("ç¬¬%dé¡µï¼Œæ¯é¡µ%dæ¡ï¼Œå…³é”®è¯ï¼š%s", page, size, keyword);
}
```

### 2.4 æ¥æ”¶æ•°ç»„å’Œé›†åˆ


**æ¥æ”¶å¤šä¸ªåŒåå‚æ•°ï¼š**
```java
// URLï¼š/delete?ids=1&ids=2&ids=3
@GetMapping("/delete")
public String delete(@RequestParam List<Integer> ids) {
    // ids = [1, 2, 3]
    return "åˆ é™¤äº†" + ids.size() + "æ¡æ•°æ®";
}

// ä¹Ÿå¯ä»¥ç”¨æ•°ç»„
@GetMapping("/delete")
public String delete(@RequestParam Integer[] ids) {
    // ids = [1, 2, 3]
    return "åˆ é™¤äº†" + ids.length + "æ¡æ•°æ®";
}
```

### 2.5 è·å–æ‰€æœ‰å‚æ•°


**ç”¨Mapæ¥æ”¶æ‰€æœ‰å‚æ•°ï¼š**
```java
// URLï¼š/test?name=å¼ ä¸‰&age=20&city=åŒ—äº¬
@GetMapping("/test")
public String test(@RequestParam Map<String, String> params) {
    // params = {"name":"å¼ ä¸‰", "age":"20", "city":"åŒ—äº¬"}
    params.forEach((k, v) -> System.out.println(k + " = " + v));
    return "æ”¶åˆ°å‚æ•°ï¼š" + params;
}
```

---

## 3. ğŸ›¤ï¸ @PathVariableè·¯å¾„å˜é‡


### 3.1 åŸºæœ¬æ¦‚å¿µ


**@PathVariableçš„ä½œç”¨ï¼š**
> è·å–URLè·¯å¾„ä¸­çš„åŠ¨æ€éƒ¨åˆ†ï¼Œè®©URLæ›´ä¼˜é›…ï¼ˆRESTfulé£æ ¼ï¼‰

```
ä¼ ç»Ÿé£æ ¼ï¼š/user?id=123           ä¸å¤Ÿä¼˜é›…
RESTfulé£æ ¼ï¼š/user/123           è·¯å¾„å³å‚æ•°ï¼Œæ›´ç®€æ´
```

### 3.2 åŸºç¡€ç”¨æ³•


**å•ä¸ªè·¯å¾„å˜é‡ï¼š**
```java
// å®šä¹‰è·¯å¾„æ¨¡æ¿ï¼š{id}æ˜¯å ä½ç¬¦
@GetMapping("/user/{id}")
public String getUser(@PathVariable Long id) {
    // è®¿é—®ï¼š/user/123  â†’ id=123
    // è®¿é—®ï¼š/user/456  â†’ id=456
    return "ç”¨æˆ·IDï¼š" + id;
}
```

**å˜é‡åä¸ä¸€è‡´æ—¶ï¼š**
```java
@GetMapping("/user/{userId}")
public String getUser(@PathVariable("userId") Long id) {
    // è·¯å¾„å˜é‡å«userIdï¼Œæ–¹æ³•å‚æ•°å«id
    return "ç”¨æˆ·IDï¼š" + id;
}
```

### 3.3 å¤šä¸ªè·¯å¾„å˜é‡


**RESTfulèµ„æºè·¯å¾„è®¾è®¡ï¼š**
```java
// URLï¼š/order/2023/001
@GetMapping("/order/{year}/{orderId}")
public String getOrder(
    @PathVariable String year,
    @PathVariable String orderId
) {
    return year + "å¹´çš„è®¢å•ï¼š" + orderId;
}

// URLï¼š/blog/java/spring-boot
@GetMapping("/blog/{category}/{article}")
public String getArticle(
    @PathVariable String category,
    @PathVariable String article
) {
    return category + "åˆ†ç±»ä¸‹çš„" + article + "æ–‡ç« ";
}
```

### 3.4 è·¯å¾„å˜é‡ vs æŸ¥è¯¢å‚æ•°


**å¦‚ä½•é€‰æ‹©ï¼š**

```
ä½¿ç”¨@PathVariableï¼ˆè·¯å¾„å˜é‡ï¼‰ï¼š
âœ… èµ„æºå®šä½ï¼š/user/123ï¼ˆå®šä½ç”¨æˆ·123ï¼‰
âœ… å±‚çº§å…³ç³»ï¼š/blog/java/springï¼ˆjavaåˆ†ç±»ä¸‹çš„springæ–‡ç« ï¼‰
âœ… å¿…éœ€å‚æ•°ï¼šè¿™ä¸ªå‚æ•°ä¸èƒ½å°‘

ä½¿ç”¨@RequestParamï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰ï¼š
âœ… è¿‡æ»¤æ¡ä»¶ï¼š/list?status=activeï¼ˆæŒ‰çŠ¶æ€è¿‡æ»¤ï¼‰
âœ… åˆ†é¡µæ’åºï¼š/list?page=1&sort=nameï¼ˆåˆ†é¡µå’Œæ’åºï¼‰
âœ… å¯é€‰å‚æ•°ï¼šè¿™ä¸ªå‚æ•°å¯æœ‰å¯æ— 
```

**å®é™…å¯¹æ¯”ï¼š**
```java
// âœ… æ¨èï¼šç”¨è·¯å¾„å˜é‡å®šä½èµ„æº
@GetMapping("/user/{id}")
public User getUser(@PathVariable Long id) {...}

// âŒ ä¸æ¨èï¼šèµ„æºå®šä½ç”¨æŸ¥è¯¢å‚æ•°
@GetMapping("/user")
public User getUser(@RequestParam Long id) {...}

// âœ… æ¨èï¼šç»„åˆä½¿ç”¨
@GetMapping("/user/{id}/orders")
public List<Order> getOrders(
    @PathVariable Long id,                    // å®šä½ç”¨æˆ·
    @RequestParam(required = false) String status  // è¿‡æ»¤æ¡ä»¶
) {...}
```

---

## 4. ğŸ“¦ @RequestBodyè¯·æ±‚ä½“å¤„ç†


### 4.1 åŸºæœ¬æ¦‚å¿µ


**@RequestBodyçš„ä½œç”¨ï¼š**
> æ¥æ”¶è¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯JSONæ ¼å¼ï¼Œè‡ªåŠ¨è½¬æˆJavaå¯¹è±¡

```
POST/PUTè¯·æ±‚çš„æ•°æ®æµå‘ï¼š

å‰ç«¯å‘é€JSON     â†’     SpringMVCæ¥æ”¶     â†’     è‡ªåŠ¨è½¬æˆå¯¹è±¡
{                      @RequestBody            Userå¯¹è±¡
  "name":"å¼ ä¸‰",                                name="å¼ ä¸‰"
  "age":20                                     age=20
}
```

### 4.2 æ¥æ”¶JSONæ•°æ®


**å‡†å¤‡å®ä½“ç±»ï¼š**
```java
public class User {
    private String name;
    private Integer age;
    private String email;
    
    // getterå’Œsetter...
}
```

**æ¥æ”¶JSONå¯¹è±¡ï¼š**
```java
@PostMapping("/user")
public String createUser(@RequestBody User user) {
    // å‰ç«¯å‘é€JSONï¼š{"name":"å¼ ä¸‰","age":20,"email":"test@qq.com"}
    // SpringMVCè‡ªåŠ¨è½¬æˆUserå¯¹è±¡
    System.out.println(user.getName());  // å¼ ä¸‰
    System.out.println(user.getAge());   // 20
    return "åˆ›å»ºæˆåŠŸï¼š" + user.getName();
}
```

### 4.3 æ¥æ”¶JSONæ•°ç»„


**æ¥æ”¶å¯¹è±¡åˆ—è¡¨ï¼š**
```java
@PostMapping("/users/batch")
public String batchCreate(@RequestBody List<User> users) {
    // å‰ç«¯å‘é€ï¼š[{"name":"å¼ ä¸‰","age":20},{"name":"æå››","age":22}]
    // SpringMVCè‡ªåŠ¨è½¬æˆList<User>
    return "æ‰¹é‡åˆ›å»ºäº†" + users.size() + "ä¸ªç”¨æˆ·";
}
```

### 4.4 æ¥æ”¶å¤æ‚åµŒå¥—å¯¹è±¡


**å¤æ‚å¯¹è±¡ç¤ºä¾‹ï¼š**
```java
public class Order {
    private String orderNo;
    private User user;           // åµŒå¥—ç”¨æˆ·å¯¹è±¡
    private List<Item> items;    // åµŒå¥—å•†å“åˆ—è¡¨
    // getterå’Œsetter...
}

@PostMapping("/order")
public String createOrder(@RequestBody Order order) {
    // å‰ç«¯å‘é€å¤æ‚JSONï¼š
    // {
    //   "orderNo": "2023001",
    //   "user": {"name":"å¼ ä¸‰","age":20},
    //   "items": [
    //     {"name":"æ‰‹æœº","price":3999},
    //     {"name":"è€³æœº","price":299}
    //   ]
    // }
    
    System.out.println(order.getUser().getName());    // å¼ ä¸‰
    System.out.println(order.getItems().size());      // 2
    return "è®¢å•åˆ›å»ºæˆåŠŸ";
}
```

### 4.5 æ³¨æ„äº‹é¡¹


> âš ï¸ **é‡è¦æé†’**
> 
> 1. `@RequestBody`åªèƒ½ç”¨äºPOST/PUTç­‰æœ‰è¯·æ±‚ä½“çš„æ–¹æ³•
> 2. GETè¯·æ±‚æ²¡æœ‰è¯·æ±‚ä½“ï¼Œç”¨`@RequestParam`æˆ–`@PathVariable`
> 3. ä¸€ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ª`@RequestBody`å‚æ•°
> 4. éœ€è¦å¼•å…¥Jacksonä¾èµ–ï¼ˆSpring Bootè‡ªåŠ¨åŒ…å«ï¼‰

---

## 5. ğŸ“¨ @RequestHeaderè¯·æ±‚å¤´è·å–


### 5.1 åŸºæœ¬æ¦‚å¿µ


**@RequestHeaderçš„ä½œç”¨ï¼š**
> è·å–HTTPè¯·æ±‚å¤´ä¸­çš„ä¿¡æ¯ï¼Œæ¯”å¦‚User-Agentã€Authorizationç­‰

```
HTTPè¯·æ±‚å¤´ç¤ºä¾‹ï¼š
GET /api/user HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0...        â† è¿™äº›éƒ½æ˜¯è¯·æ±‚å¤´
Authorization: Bearer token123
Content-Type: application/json
```

### 5.2 è·å–å•ä¸ªè¯·æ±‚å¤´


**åŸºç¡€ç”¨æ³•ï¼š**
```java
@GetMapping("/info")
public String getInfo(@RequestHeader("User-Agent") String userAgent) {
    // è·å–æµè§ˆå™¨ä¿¡æ¯
    return "ä½ çš„æµè§ˆå™¨ï¼š" + userAgent;
}
```

**å¸¸ç”¨è¯·æ±‚å¤´ç¤ºä¾‹ï¼š**
```java
@GetMapping("/check")
public String check(
    @RequestHeader("Authorization") String token,
    @RequestHeader("Content-Type") String contentType,
    @RequestHeader(value = "Accept-Language", defaultValue = "zh-CN") String lang
) {
    System.out.println("è®¤è¯ä»¤ç‰Œï¼š" + token);
    System.out.println("å†…å®¹ç±»å‹ï¼š" + contentType);
    System.out.println("æ¥å—è¯­è¨€ï¼š" + lang);
    return "è¯·æ±‚å¤´æ¥æ”¶æˆåŠŸ";
}
```

### 5.3 è·å–æ‰€æœ‰è¯·æ±‚å¤´


**ç”¨Mapæ¥æ”¶ï¼š**
```java
@GetMapping("/headers")
public String getAllHeaders(@RequestHeader Map<String, String> headers) {
    headers.forEach((key, value) -> {
        System.out.println(key + ": " + value);
    });
    return "å…±æ”¶åˆ°" + headers.size() + "ä¸ªè¯·æ±‚å¤´";
}
```

### 5.4 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯1ï¼šç”¨æˆ·è®¤è¯**
```java
@GetMapping("/profile")
public User getProfile(@RequestHeader("Authorization") String token) {
    // ä»tokenä¸­è§£æç”¨æˆ·ä¿¡æ¯
    Long userId = parseToken(token);
    return userService.findById(userId);
}
```

**åœºæ™¯2ï¼šAPIç‰ˆæœ¬æ§åˆ¶**
```java
@GetMapping("/api/data")
public String getData(
    @RequestHeader(value = "API-Version", defaultValue = "1.0") String version
) {
    if ("2.0".equals(version)) {
        return "è¿”å›v2.0æ•°æ®æ ¼å¼";
    }
    return "è¿”å›v1.0æ•°æ®æ ¼å¼";
}
```

---

## 6. ğŸª @CookieValue Cookieå€¼è·å–


### 6.1 åŸºæœ¬æ¦‚å¿µ


**@CookieValueçš„ä½œç”¨ï¼š**
> è·å–æµè§ˆå™¨å‘é€è¿‡æ¥çš„Cookieå€¼

```
Cookieå·¥ä½œæµç¨‹ï¼š
æœåŠ¡å™¨ â†’ æµè§ˆå™¨ï¼šSet-Cookie: sessionId=abc123
æµè§ˆå™¨ â†’ æœåŠ¡å™¨ï¼šCookie: sessionId=abc123  â† @CookieValueè·å–è¿™ä¸ª
```

### 6.2 åŸºç¡€ç”¨æ³•


**è·å–å•ä¸ªCookieï¼š**
```java
@GetMapping("/welcome")
public String welcome(@CookieValue("username") String username) {
    // ä»Cookieä¸­è·å–ç”¨æˆ·å
    return "æ¬¢è¿å›æ¥ï¼Œ" + username;
}
```

**è®¾ç½®é»˜è®¤å€¼å’Œå¯é€‰ï¼š**
```java
@GetMapping("/page")
public String page(
    @CookieValue(value = "theme", defaultValue = "light") String theme,
    @CookieValue(value = "sessionId", required = false) String sessionId
) {
    // themeæ²¡æœ‰æ—¶ç”¨é»˜è®¤å€¼"light"
    // sessionIdå¯ä»¥ä¸ºç©º
    return "ä¸»é¢˜ï¼š" + theme + "ï¼Œä¼šè¯ï¼š" + sessionId;
}
```

### 6.3 è·å–Cookieå¯¹è±¡


**è·å–å®Œæ•´Cookieä¿¡æ¯ï¼š**
```java
@GetMapping("/cookie-info")
public String getCookieInfo(@CookieValue("token") Cookie cookie) {
    // å¯ä»¥è·å–Cookieçš„æ›´å¤šå±æ€§
    System.out.println("åç§°ï¼š" + cookie.getName());
    System.out.println("å€¼ï¼š" + cookie.getValue());
    System.out.println("è·¯å¾„ï¼š" + cookie.getPath());
    System.out.println("åŸŸï¼š" + cookie.getDomain());
    return "Cookieä¿¡æ¯å·²æ‰“å°";
}
```

### 6.4 å®é™…åº”ç”¨


**è®°ä½ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼š**
```java
@GetMapping("/auto-login")
public String autoLogin(
    @CookieValue(value = "remember-token", required = false) String rememberToken
) {
    if (rememberToken != null) {
        // ä»remember-tokenè‡ªåŠ¨ç™»å½•
        User user = userService.loginByToken(rememberToken);
        return "è‡ªåŠ¨ç™»å½•æˆåŠŸï¼š" + user.getName();
    }
    return "è¯·å…ˆç™»å½•";
}
```

---

## 7. ğŸ¨ @ModelAttributeæ¨¡å‹å±æ€§


### 7.1 åŸºæœ¬æ¦‚å¿µ


**@ModelAttributeçš„ä½œç”¨ï¼š**
> 1. æŠŠè¡¨å•æ•°æ®è‡ªåŠ¨ç»‘å®šåˆ°å¯¹è±¡
> 2. æŠŠæ•°æ®æ”¾åˆ°Modelä¸­ï¼Œä¾›é¡µé¢ä½¿ç”¨

```
è¡¨å•æäº¤æµç¨‹ï¼š
è¡¨å•æ•°æ® â†’ @ModelAttribute â†’ Javaå¯¹è±¡ â†’ è‡ªåŠ¨æ”¾å…¥Model
```

### 7.2 ç»‘å®šè¡¨å•å¯¹è±¡


**HTMLè¡¨å•ï¼š**
```html
<form action="/register" method="post">
    å§“åï¼š<input name="name" />
    å¹´é¾„ï¼š<input name="age" />
    é‚®ç®±ï¼š<input name="email" />
    <button type="submit">æäº¤</button>
</form>
```

**åç«¯æ¥æ”¶ï¼š**
```java
@PostMapping("/register")
public String register(@ModelAttribute User user) {
    // è¡¨å•çš„nameã€ageã€emailä¼šè‡ªåŠ¨ç»‘å®šåˆ°userå¯¹è±¡
    System.out.println(user.getName());   // è¡¨å•è¾“å…¥çš„å§“å
    System.out.println(user.getAge());    // è¡¨å•è¾“å…¥çš„å¹´é¾„
    userService.save(user);
    return "æ³¨å†ŒæˆåŠŸ";
}
```

### 7.3 é¢„å¤„ç†æ•°æ®


**åœ¨æ–¹æ³•æ‰§è¡Œå‰å‡†å¤‡æ•°æ®ï¼š**
```java
@Controller
public class UserController {
    
    // è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ¯ä¸ªè¯·æ±‚ä¹‹å‰æ‰§è¡Œ
    @ModelAttribute("allCities")
    public List<String> prepareData() {
        // å‡†å¤‡åŸå¸‚åˆ—è¡¨ï¼Œä¾›ä¸‹æ‹‰æ¡†ä½¿ç”¨
        return Arrays.asList("åŒ—äº¬", "ä¸Šæµ·", "æ·±åœ³", "å¹¿å·");
    }
    
    @GetMapping("/user/form")
    public String showForm(Model model) {
        // modelä¸­å·²ç»æœ‰äº†allCitiesæ•°æ®
        // é¡µé¢å¯ä»¥ç›´æ¥ç”¨ï¼š<select th:items="${allCities}">
        return "user-form";
    }
    
    @PostMapping("/user/save")
    public String save(@ModelAttribute User user) {
        // modelä¸­ä¹Ÿæœ‰allCitiesæ•°æ®
        return "ä¿å­˜æˆåŠŸ";
    }
}
```

### 7.4 æŒ‡å®šç»‘å®šåç§°


**è‡ªå®šä¹‰Modelä¸­çš„åç§°ï¼š**
```java
@PostMapping("/save")
public String save(@ModelAttribute("userInfo") User user, Model model) {
    // userå¯¹è±¡ä¼šä»¥"userInfo"ä¸ºkeyæ”¾å…¥model
    // ç­‰åŒäºï¼šmodel.addAttribute("userInfo", user);
    return "success";
}
```

---

## 8. ğŸ”„ @SessionAttributeä¼šè¯å±æ€§


### 8.1 åŸºæœ¬æ¦‚å¿µ


**@SessionAttributeçš„ä½œç”¨ï¼š**
> ä»Sessionä¸­è·å–æ•°æ®ï¼ŒSessionå¯ä»¥åœ¨å¤šä¸ªè¯·æ±‚é—´å…±äº«æ•°æ®

```
Sessionå·¥ä½œåŸç†ï¼š
è¯·æ±‚1ï¼šç™»å½•æˆåŠŸ â†’ ç”¨æˆ·ä¿¡æ¯å­˜å…¥Session
è¯·æ±‚2ï¼šæŸ¥çœ‹è®¢å• â†’ ä»Sessionè·å–ç”¨æˆ·ä¿¡æ¯
è¯·æ±‚3ï¼šä¿®æ”¹èµ„æ–™ â†’ ä»Sessionè·å–ç”¨æˆ·ä¿¡æ¯
```

### 8.2 åŸºç¡€ç”¨æ³•


**ä»Sessionè·å–æ•°æ®ï¼š**
```java
@GetMapping("/profile")
public String profile(@SessionAttribute("loginUser") User user) {
    // ä»Sessionä¸­è·å–ç™»å½•ç”¨æˆ·
    return "å½“å‰ç”¨æˆ·ï¼š" + user.getName();
}
```

**å¯é€‰çš„Sessionå±æ€§ï¼š**
```java
@GetMapping("/cart")
public String cart(
    @SessionAttribute(value = "loginUser", required = false) User user
) {
    if (user == null) {
        return "è¯·å…ˆç™»å½•";
    }
    return user.getName() + "çš„è´­ç‰©è½¦";
}
```

### 8.3 é…åˆ@SessionAttributesä½¿ç”¨


**åœ¨Controllerçº§åˆ«ç®¡ç†Sessionï¼š**
```java
@Controller
@SessionAttributes("loginUser")  // æŒ‡å®šå“ªäº›å±æ€§è¦å­˜å…¥Session
public class UserController {
    
    @PostMapping("/login")
    public String login(String username, String password, Model model) {
        User user = userService.login(username, password);
        // å› ä¸ºæœ‰@SessionAttributes("loginUser")
        // è¿™ä¸ªå±æ€§ä¼šè‡ªåŠ¨å­˜å…¥Session
        model.addAttribute("loginUser", user);
        return "ç™»å½•æˆåŠŸ";
    }
    
    @GetMapping("/info")
    public String info(@SessionAttribute("loginUser") User user) {
        // ä»Sessionè·å–ç”¨æˆ·
        return "ç”¨æˆ·ä¿¡æ¯ï¼š" + user.getName();
    }
}
```

### 8.4 Sessionæ“ä½œå®Œæ•´ç¤ºä¾‹


```java
@Controller
public class LoginController {
    
    // ç™»å½•ï¼šå­˜å…¥Session
    @PostMapping("/login")
    public String login(String username, String password, HttpSession session) {
        User user = userService.login(username, password);
        session.setAttribute("loginUser", user);  // æ‰‹åŠ¨å­˜å…¥Session
        return "redirect:/home";
    }
    
    // ä½¿ç”¨ï¼šä»Sessionè·å–
    @GetMapping("/home")
    public String home(@SessionAttribute("loginUser") User user) {
        return "æ¬¢è¿ï¼Œ" + user.getName();
    }
    
    // ç™»å‡ºï¼šæ¸…é™¤Session
    @GetMapping("/logout")
    public String logout(HttpSession session) {
        session.removeAttribute("loginUser");  // ç§»é™¤æŒ‡å®šå±æ€§
        // æˆ– session.invalidate();  æ¸…ç©ºæ•´ä¸ªSession
        return "redirect:/login";
    }
}
```

---

## 9. ğŸ”„ å‚æ•°ç±»å‹è½¬æ¢æœºåˆ¶


### 9.1 åŸºæœ¬æ¦‚å¿µ


**ç±»å‹è½¬æ¢çš„å¿…è¦æ€§ï¼š**
> HTTPè¯·æ±‚ä¸­æ‰€æœ‰å‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦è½¬æ¢æˆJavaçš„å„ç§ç±»å‹

```
è½¬æ¢è¿‡ç¨‹ï¼š
URLå‚æ•°ï¼š?age=20              å­—ç¬¦ä¸²"20"
    â†“ è‡ªåŠ¨è½¬æ¢
Javaå˜é‡ï¼šint age = 20        æ•´æ•°20
```

### 9.2 å†…ç½®ç±»å‹è½¬æ¢


**SpringMVCè‡ªåŠ¨æ”¯æŒçš„ç±»å‹ï¼š**

| å‰ç«¯ä¼ å‚ | Javaç±»å‹ | ç¤ºä¾‹ |
|---------|---------|------|
| `"123"` | `int/Integer` | `@RequestParam int id` |
| `"true"` | `boolean/Boolean` | `@RequestParam boolean flag` |
| `"3.14"` | `double/Double` | `@RequestParam double price` |
| `"100"` | `long/Long` | `@RequestParam long count` |
| `"1,2,3"` | `Integer[]` | `@RequestParam Integer[] ids` |

**ç¤ºä¾‹ä»£ç ï¼š**
```java
@GetMapping("/test")
public String test(
    @RequestParam int num,              // "123" â†’ 123
    @RequestParam boolean flag,         // "true" â†’ true
    @RequestParam double price,         // "99.9" â†’ 99.9
    @RequestParam List<Integer> ids     // "1,2,3" â†’ [1,2,3]
) {
    System.out.println(num + 10);       // 133
    System.out.println(flag ? "æ˜¯" : "å¦");
    return "è½¬æ¢æˆåŠŸ";
}
```

### 9.3 è½¬æ¢å¤±è´¥çš„å¤„ç†


**ç±»å‹è½¬æ¢å¼‚å¸¸ï¼š**
```java
// URLï¼š/test?age=abc  ï¼ˆabcä¸æ˜¯æ•°å­—ï¼‰
@GetMapping("/test")
public String test(@RequestParam int age) {
    // ä¼šæŠ›å‡ºå¼‚å¸¸ï¼šFailed to convert value of type 'java.lang.String' to required type 'int'
    return "å¹´é¾„ï¼š" + age;
}
```

**ä¼˜é›…å¤„ç†ï¼š**
```java
// æ–¹å¼1ï¼šç”¨åŒ…è£…ç±»å‹ï¼Œå…è®¸ä¸ºnull
@GetMapping("/test")
public String test(@RequestParam(required = false) Integer age) {
    if (age == null) {
        return "å¹´é¾„å‚æ•°é”™è¯¯";
    }
    return "å¹´é¾„ï¼š" + age;
}

// æ–¹å¼2ï¼šè®¾ç½®é»˜è®¤å€¼
@GetMapping("/test")
public String test(@RequestParam(defaultValue = "0") int age) {
    return "å¹´é¾„ï¼š" + age;
}
```

---

## 10. ğŸ“… æ—¥æœŸæ ¼å¼å¤„ç†


### 10.1 æ—¥æœŸè½¬æ¢çš„é—®é¢˜


**é»˜è®¤åªæ”¯æŒç‰¹å®šæ ¼å¼ï¼š**
```java
// âœ… å¯ä»¥ï¼š/test?date=2023/01/01
// âŒ ä¸è¡Œï¼š/test?date=2023-01-01
@GetMapping("/test")
public String test(@RequestParam Date date) {
    return date.toString();
}
```

### 10.2 ä½¿ç”¨@DateTimeFormat


**æŒ‡å®šæ—¥æœŸæ ¼å¼ï¼š**
```java
@GetMapping("/search")
public String search(
    @DateTimeFormat(pattern = "yyyy-MM-dd") 
    @RequestParam Date startDate,
    
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    @RequestParam Date endDate
) {
    // URLï¼š/search?startDate=2023-01-01&endDate=2023-12-31 23:59:59
    // è‡ªåŠ¨è½¬æ¢æˆDateå¯¹è±¡
    return "å¼€å§‹ï¼š" + startDate + "ï¼Œç»“æŸï¼š" + endDate;
}
```

**åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨ï¼š**
```java
public class Event {
    private String name;
    
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    private Date eventDate;
    
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm")
    private Date startTime;
    
    // getterå’Œsetter...
}

@PostMapping("/event")
public String createEvent(@ModelAttribute Event event) {
    // è¡¨å•ï¼ševentDate=2023-12-25 â†’ è‡ªåŠ¨è½¬æ¢
    System.out.println(event.getEventDate());
    return "æ´»åŠ¨åˆ›å»ºæˆåŠŸ";
}
```

### 10.3 LocalDateTimeçš„å¤„ç†


**Java 8æ—¥æœŸç±»å‹ï¼š**
```java
@GetMapping("/booking")
public String booking(
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    @RequestParam LocalDate date,
    
    @DateTimeFormat(pattern = "HH:mm")
    @RequestParam LocalTime time,
    
    @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    @RequestParam LocalDateTime dateTime
) {
    System.out.println("æ—¥æœŸï¼š" + date);
    System.out.println("æ—¶é—´ï¼š" + time);
    System.out.println("æ—¥æœŸæ—¶é—´ï¼š" + dateTime);
    return "é¢„è®¢æˆåŠŸ";
}
```

---

## 11. ğŸ”§ è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨


### 11.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰è½¬æ¢å™¨


**ç‰¹æ®Šæ ¼å¼éœ€æ±‚ï¼š**
```
å‰ç«¯ä¼ å‚ï¼šid_name ï¼ˆæ¯”å¦‚ï¼š1_å¼ ä¸‰ï¼‰
éœ€è¦è½¬æˆï¼šUserå¯¹è±¡ï¼ˆid=1, name=å¼ ä¸‰ï¼‰
å†…ç½®è½¬æ¢å™¨åšä¸åˆ°ï¼Œéœ€è¦è‡ªå®šä¹‰
```

### 11.2 å®ç°Converteræ¥å£


**æ­¥éª¤1ï¼šåˆ›å»ºè½¬æ¢å™¨**
```java
// String â†’ Userçš„è½¬æ¢å™¨
public class StringToUserConverter implements Converter<String, User> {
    
    @Override
    public User convert(String source) {
        // source = "1_å¼ ä¸‰"
        if (source == null || !source.contains("_")) {
            return null;
        }
        
        String[] parts = source.split("_");
        User user = new User();
        user.setId(Long.parseLong(parts[0]));   // 1
        user.setName(parts[1]);                  // å¼ ä¸‰
        return user;
    }
}
```

**æ­¥éª¤2ï¼šæ³¨å†Œè½¬æ¢å™¨**
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void addFormatters(FormatterRegistry registry) {
        // æ³¨å†Œè‡ªå®šä¹‰è½¬æ¢å™¨
        registry.addConverter(new StringToUserConverter());
    }
}
```

**æ­¥éª¤3ï¼šä½¿ç”¨è½¬æ¢å™¨**
```java
@GetMapping("/user")
public String getUser(@RequestParam User user) {
    // URLï¼š/user?user=1_å¼ ä¸‰
    // è‡ªåŠ¨è°ƒç”¨StringToUserConverterè½¬æ¢
    System.out.println(user.getId());    // 1
    System.out.println(user.getName());  // å¼ ä¸‰
    return "ç”¨æˆ·ï¼š" + user.getName();
}
```

### 11.3 å®é™…æ¡ˆä¾‹ï¼šæ€§åˆ«è½¬æ¢


**è½¬æ¢å™¨å®ç°ï¼š**
```java
// "ç”·/å¥³" â†’ 0/1
public class GenderConverter implements Converter<String, Integer> {
    
    @Override
    public Integer convert(String source) {
        if ("ç”·".equals(source)) {
            return 0;
        } else if ("å¥³".equals(source)) {
            return 1;
        }
        return null;
    }
}

// æ³¨å†Œ
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addFormatters(FormatterRegistry registry) {
        registry.addConverter(new GenderConverter());
    }
}

// ä½¿ç”¨
@PostMapping("/register")
public String register(String name, Integer gender) {
    // è¡¨å•ä¼ ï¼šgender=ç”· â†’ è‡ªåŠ¨è½¬æˆ0
    // è¡¨å•ä¼ ï¼šgender=å¥³ â†’ è‡ªåŠ¨è½¬æˆ1
    return "æ€§åˆ«ä»£ç ï¼š" + gender;
}
```

---

## 12. ğŸ¨ æ•°æ®æ ¼å¼åŒ–


### 12.1 æ ¼å¼åŒ– vs è½¬æ¢


**åŒºåˆ«ç†è§£ï¼š**
```
ç±»å‹è½¬æ¢ï¼šString â†’ Dateï¼ˆæ”¹å˜ç±»å‹ï¼‰
æ•°æ®æ ¼å¼åŒ–ï¼šDate â†’ "2023-01-01"ï¼ˆä¿æŒç±»å‹ï¼Œæ”¹å˜è¡¨ç°å½¢å¼ï¼‰
```

### 12.2 @NumberFormatæ•°å­—æ ¼å¼åŒ–


**æ ¼å¼åŒ–é‡‘é¢æ˜¾ç¤ºï¼š**
```java
public class Product {
    @NumberFormat(pattern = "#,###.00")
    private BigDecimal price;
    // getterå’Œsetter...
}

@GetMapping("/product")
public String product(Model model) {
    Product product = new Product();
    product.setPrice(new BigDecimal("12345.67"));
    model.addAttribute("product", product);
    // é¡µé¢æ˜¾ç¤ºï¼šÂ¥12,345.67
    return "product";
}
```

**æ ¼å¼åŒ–ç™¾åˆ†æ¯”ï¼š**
```java
@NumberFormat(style = NumberFormat.Style.PERCENT)
private Double rate;

// rate = 0.85
// æ˜¾ç¤ºï¼š85%
```

### 12.3 @DateTimeFormatæ—¥æœŸæ ¼å¼åŒ–


**è¾“å…¥å’Œè¾“å‡ºæ ¼å¼åŒ–ï¼š**
```java
public class Report {
    // è¾“å…¥æ ¼å¼ï¼šè¡¨å•æäº¤æ—¶çš„æ ¼å¼
    @DateTimeFormat(pattern = "yyyy-MM-dd")
    // è¾“å‡ºæ ¼å¼ï¼šé¡µé¢æ˜¾ç¤ºæ—¶çš„æ ¼å¼
    @JsonFormat(pattern = "yyyyå¹´MMæœˆddæ—¥", timezone = "GMT+8")
    private Date reportDate;
}
```

**å®é™…åº”ç”¨ï¼š**
```java
@PostMapping("/report")
public String createReport(@ModelAttribute Report report) {
    // è¾“å…¥ï¼šreportDate=2023-01-01
    System.out.println(report.getReportDate());
    return "æŠ¥è¡¨åˆ›å»ºæˆåŠŸ";
}

@GetMapping("/report/{id}")
@ResponseBody
public Report getReport(@PathVariable Long id) {
    Report report = reportService.findById(id);
    // è¾“å‡ºJSONï¼š{"reportDate":"2023å¹´01æœˆ01æ—¥"}
    return report;
}
```

---

## 13. âœ… å‚æ•°æ ¡éªŒå¤„ç†


### 13.1 ä¸ºä»€ä¹ˆéœ€è¦å‚æ•°æ ¡éªŒ


**æ•°æ®å®‰å…¨çš„ç¬¬ä¸€é“é˜²çº¿ï¼š**
```
ä¸æ ¡éªŒçš„é—®é¢˜ï¼š
å‰ç«¯ä¼ ï¼šage=-1     â†’ ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆå¹´é¾„æ€ä¹ˆæ˜¯è´Ÿæ•°ï¼Ÿï¼‰
å‰ç«¯ä¼ ï¼šname=""    â†’ ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆå§“åæ˜¯ç©ºçš„ï¼Ÿï¼‰
å‰ç«¯ä¼ ï¼šemail=abc  â†’ ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆè¿™ä¸æ˜¯é‚®ç®±æ ¼å¼ï¼ï¼‰
```

### 13.2 ä½¿ç”¨JSR-303æ ¡éªŒ


**æ­¥éª¤1ï¼šå¼•å…¥ä¾èµ–**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
</dependency>
```

**æ­¥éª¤2ï¼šåœ¨å®ä½“ç±»æ·»åŠ æ ¡éªŒæ³¨è§£**
```java
public class User {
    
    @NotBlank(message = "å§“åä¸èƒ½ä¸ºç©º")
    private String name;
    
    @Min(value = 0, message = "å¹´é¾„ä¸èƒ½å°äº0")
    @Max(value = 150, message = "å¹´é¾„ä¸èƒ½å¤§äº150")
    private Integer age;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    // getterå’Œsetter...
}
```

**æ­¥éª¤3ï¼šåœ¨Controllerå¼€å¯æ ¡éªŒ**
```java
@PostMapping("/register")
public String register(@Valid @RequestBody User user, BindingResult result) {
    
    // @Validï¼šå¼€å¯æ ¡éªŒ
    // BindingResultï¼šæ¥æ”¶æ ¡éªŒç»“æœ
    
    if (result.hasErrors()) {
        // æœ‰é”™è¯¯
        List<String> errors = result.getAllErrors()
            .stream()
            .map(ObjectError::getDefaultMessage)
            .collect(Collectors.toList());
        return "æ ¡éªŒå¤±è´¥ï¼š" + errors;
    }
    
    // æ ¡éªŒé€šè¿‡ï¼Œä¿å­˜ç”¨æˆ·
    userService.save(user);
    return "æ³¨å†ŒæˆåŠŸ";
}
```

### 13.3 å¸¸ç”¨æ ¡éªŒæ³¨è§£


| æ³¨è§£ | ä½œç”¨ | ç¤ºä¾‹ |
|-----|------|------|
| `@NotNull` | ä¸èƒ½ä¸ºnull | `@NotNull(message = "IDä¸èƒ½ä¸ºç©º")` |
| `@NotBlank` | ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸² | `@NotBlank(message = "å§“åå¿…å¡«")` |
| `@NotEmpty` | é›†åˆ/æ•°ç»„ä¸èƒ½ä¸ºç©º | `@NotEmpty List<String> tags` |
| `@Size` | é•¿åº¦èŒƒå›´ | `@Size(min=6, max=20) String password` |
| `@Min/@Max` | æ•°å€¼èŒƒå›´ | `@Min(0) @Max(100) Integer score` |
| `@Email` | é‚®ç®±æ ¼å¼ | `@Email String email` |
| `@Pattern` | æ­£åˆ™åŒ¹é… | `@Pattern(regexp="...") String phone` |
| `@Past/@Future` | è¿‡å»/å°†æ¥çš„æ—¥æœŸ | `@Past Date birthday` |

### 13.4 åˆ†ç»„æ ¡éªŒ


**ä¸åŒåœºæ™¯ä¸åŒè§„åˆ™ï¼š**
```java
// å®šä¹‰åˆ†ç»„æ¥å£
public interface Create {}
public interface Update {}

public class User {
    @NotNull(groups = Update.class)  // æ›´æ–°æ—¶IDå¿…éœ€
    private Long id;
    
    @NotBlank(groups = {Create.class, Update.class})  // åˆ›å»ºå’Œæ›´æ–°éƒ½å¿…éœ€
    private String name;
    
    @NotBlank(groups = Create.class)  // åªæœ‰åˆ›å»ºæ—¶å¯†ç å¿…éœ€
    private String password;
}

// ä½¿ç”¨åˆ†ç»„
@PostMapping("/create")
public String create(@Validated(Create.class) @RequestBody User user) {
    // æ ¡éªŒCreateç»„çš„è§„åˆ™
    return "åˆ›å»ºæˆåŠŸ";
}

@PostMapping("/update")
public String update(@Validated(Update.class) @RequestBody User user) {
    // æ ¡éªŒUpdateç»„çš„è§„åˆ™
    return "æ›´æ–°æˆåŠŸ";
}
```

### 13.5 è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£


**åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£ï¼š**
```java
// 1. å®šä¹‰æ³¨è§£
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = PhoneValidator.class)
public @interface Phone {
    String message() default "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

// 2. å®ç°æ ¡éªŒå™¨
public class PhoneValidator implements ConstraintValidator<Phone, String> {
    
    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        if (value == null) return true;  // nulläº¤ç»™@NotNullå¤„ç†
        // æ ¡éªŒæ‰‹æœºå·æ ¼å¼
        return value.matches("^1[3-9]\\d{9}$");
    }
}

// 3. ä½¿ç”¨
public class User {
    @Phone
    private String phone;
}
```

---

## 14. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 14.1 æ³¨è§£åŠŸèƒ½é€ŸæŸ¥è¡¨


| æ³¨è§£ | æ•°æ®æ¥æº | ä½¿ç”¨åœºæ™¯ | å¿…éœ€æ€§ |
|-----|---------|---------|--------|
| `@RequestParam` | URLæŸ¥è¯¢å‚æ•° | `?name=value` | å¸¸ç”¨â­â­â­ |
| `@PathVariable` | URLè·¯å¾„ | `/user/{id}` | å¸¸ç”¨â­â­â­ |
| `@RequestBody` | è¯·æ±‚ä½“ | JSON/XMLæ•°æ® | å¸¸ç”¨â­â­â­ |
| `@RequestHeader` | è¯·æ±‚å¤´ | è®¤è¯tokenç­‰ | è¾ƒå°‘ç”¨â­â­ |
| `@CookieValue` | Cookie | ä¼šè¯ä¿¡æ¯ | è¾ƒå°‘ç”¨â­â­ |
| `@ModelAttribute` | è¡¨å• | è¡¨å•æäº¤ | å¸¸ç”¨â­â­â­ |
| `@SessionAttribute` | Session | è·¨è¯·æ±‚æ•°æ® | è¾ƒå°‘ç”¨â­ |

### 14.2 å‚æ•°ç»‘å®šæµç¨‹å›¾


```
HTTPè¯·æ±‚åˆ°è¾¾
    â†“
SpringMVCè§£æè¯·æ±‚
    â†“
æ ¹æ®æ³¨è§£ç¡®å®šæ•°æ®æ¥æº
    â”œâ”€â”€ @RequestParam    â†’ ä»æŸ¥è¯¢å‚æ•°è·å–
    â”œâ”€â”€ @PathVariable    â†’ ä»URLè·¯å¾„è·å–
    â”œâ”€â”€ @RequestBody     â†’ ä»è¯·æ±‚ä½“è·å–
    â”œâ”€â”€ @RequestHeader   â†’ ä»è¯·æ±‚å¤´è·å–
    â””â”€â”€ @CookieValue     â†’ ä»Cookieè·å–
    â†“
ç±»å‹è½¬æ¢
    â”œâ”€â”€ å†…ç½®è½¬æ¢å™¨ï¼ˆStringâ†’intç­‰ï¼‰
    â”œâ”€â”€ @DateTimeFormatï¼ˆæ—¥æœŸè½¬æ¢ï¼‰
    â””â”€â”€ è‡ªå®šä¹‰è½¬æ¢å™¨
    â†“
å‚æ•°æ ¡éªŒï¼ˆ@Validï¼‰
    â”œâ”€â”€ æ ¡éªŒé€šè¿‡ â†’ æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    â””â”€â”€ æ ¡éªŒå¤±è´¥ â†’ è¿”å›é”™è¯¯ä¿¡æ¯
```

### 14.3 æœ€ä½³å®è·µå»ºè®®


> ğŸ’¡ **RESTfulé£æ ¼æ¨è**
> 
> - âœ… èµ„æºå®šä½ç”¨`@PathVariable`ï¼š`/user/123`
> - âœ… æŸ¥è¯¢è¿‡æ»¤ç”¨`@RequestParam`ï¼š`/users?status=active`
> - âœ… æ–°å¢ä¿®æ”¹ç”¨`@RequestBody`ï¼šPOST/PUT JSONæ•°æ®

> âš ï¸ **æ ¡éªŒæ³¨æ„äº‹é¡¹**
> 
> - âœ… å¿…é¡»æ ¡éªŒï¼šå…³é”®ä¸šåŠ¡æ•°æ®
> - âœ… å‰åç«¯éƒ½è¦æ ¡éªŒï¼šå‰ç«¯ä½“éªŒï¼Œåç«¯å®‰å…¨
> - âœ… æç¤ºè¦å‹å¥½ï¼šè®©ç”¨æˆ·çŸ¥é“å“ªé‡Œé”™äº†

> ğŸ”§ **ç±»å‹è½¬æ¢å»ºè®®**
> 
> - âœ… æ—¥æœŸç»Ÿä¸€æ ¼å¼ï¼šé¿å…æ··ä¹±
> - âœ… æä¾›é»˜è®¤å€¼ï¼šå¢å¼ºå®¹é”™æ€§
> - âœ… å¼‚å¸¸è¦å¤„ç†ï¼šé¿å…500é”™è¯¯

### 14.4 å¸¸è§é—®é¢˜è§£å†³


**é—®é¢˜1ï¼šæ¥æ”¶ä¸åˆ°å‚æ•°**
```java
// âŒ å‚æ•°åä¸åŒ¹é…
@GetMapping("/test")
public String test(String userName) {}  // URL: ?name=å¼ ä¸‰

// âœ… ä½¿ç”¨æ³¨è§£æ˜ç¡®æŒ‡å®š
@GetMapping("/test")
public String test(@RequestParam("name") String userName) {}
```

**é—®é¢˜2ï¼šæ—¥æœŸè½¬æ¢å¤±è´¥**
```java
// âŒ æ²¡æœ‰æŒ‡å®šæ ¼å¼
@GetMapping("/test")
public String test(Date date) {}  // URL: ?date=2023-01-01 (å¤±è´¥)

// âœ… æŒ‡å®šæ—¥æœŸæ ¼å¼
@GetMapping("/test")
public String test(
    @DateTimeFormat(pattern = "yyyy-MM-dd") Date date
) {}
```

**é—®é¢˜3ï¼šJSONæ¥æ”¶ä¸ºnull**
```java
// âŒ GETè¯·æ±‚ç”¨@RequestBody
@GetMapping("/test")
public String test(@RequestBody User user) {}  // GETæ²¡æœ‰è¯·æ±‚ä½“

// âœ… POST/PUTç”¨@RequestBody
@PostMapping("/test")
public String test(@RequestBody User user) {}
```

### 14.5 å­¦ä¹ è·¯çº¿å»ºè®®


```
å…¥é—¨é˜¶æ®µï¼š
1ï¸âƒ£ æŒæ¡@RequestParamå’Œ@PathVariable
2ï¸âƒ£ ç†è§£åŸºæœ¬ç±»å‹è½¬æ¢
3ï¸âƒ£ å­¦ä¼šä½¿ç”¨@RequestBodyæ¥æ”¶JSON

è¿›é˜¶é˜¶æ®µï¼š
4ï¸âƒ£ ä½¿ç”¨@DateTimeFormatå¤„ç†æ—¥æœŸ
5ï¸âƒ£ æŒæ¡å‚æ•°æ ¡éªŒï¼ˆ@Validï¼‰
6ï¸âƒ£ äº†è§£@RequestHeaderå’Œ@CookieValue

é«˜çº§é˜¶æ®µï¼š
7ï¸âƒ£ å®ç°è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨
8ï¸âƒ£ ä½¿ç”¨åˆ†ç»„æ ¡éªŒ
9ï¸âƒ£ è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£
```

---

**ğŸ¯ æ ¸å¿ƒè®°å¿†å£è¯€ï¼š**

```
å‚æ•°ç»‘å®šå¾ˆç®€å•ï¼Œæ³¨è§£é€‰å¯¹æ˜¯å…³é”®
è·¯å¾„å˜é‡PathVariableï¼ŒæŸ¥è¯¢å‚æ•°RequestParam
è¯·æ±‚ä½“è¦RequestBodyï¼ŒJSONæ•°æ®è‡ªåŠ¨è½¬
æ ¡éªŒæ³¨è§£åŠ @Validï¼Œæ•°æ®å®‰å…¨ç¬¬ä¸€å…³
ç±»å‹è½¬æ¢è‡ªåŠ¨åŒ–ï¼Œæ—¥æœŸæ ¼å¼è¦æŒ‡å®š
é‡åˆ°é—®é¢˜åˆ«æ…Œå¼ ï¼Œæ³¨è§£å‚æ•°çœ‹ä»”ç»†
```