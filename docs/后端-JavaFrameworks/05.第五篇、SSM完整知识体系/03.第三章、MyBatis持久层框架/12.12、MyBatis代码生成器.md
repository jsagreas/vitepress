---
title: 12ã€MyBatisä»£ç ç”Ÿæˆå™¨
---
## ğŸ“š ç›®å½•å¯¼èˆª

1. [MyBatis Generatoræ ¸å¿ƒæ¦‚å¿µ](#1-mybatis-generatoræ ¸å¿ƒæ¦‚å¿µ)
2. [é€†å‘å·¥ç¨‹åŸç†ä¸é…ç½®](#2-é€†å‘å·¥ç¨‹åŸç†ä¸é…ç½®)
3. [ä»£ç ç”Ÿæˆå®æˆ˜æ“ä½œ](#3-ä»£ç ç”Ÿæˆå®æˆ˜æ“ä½œ)
4. [ç”Ÿæˆç­–ç•¥ä¸è‡ªå®šä¹‰](#4-ç”Ÿæˆç­–ç•¥ä¸è‡ªå®šä¹‰)
5. [é«˜çº§ç‰¹æ€§ä¸æ’ä»¶å¼€å‘](#5-é«˜çº§ç‰¹æ€§ä¸æ’ä»¶å¼€å‘)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ MyBatis Generatoræ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯MyBatis Generator


ğŸ”° **æ–°æ‰‹ç†è§£**

MyBatis Generatorï¼ˆç®€ç§°MBGï¼‰å°±åƒä¸€ä¸ª"è‡ªåŠ¨å†™ä»£ç çš„æœºå™¨äºº"ã€‚ä½ åªéœ€è¦å‘Šè¯‰å®ƒæ•°æ®åº“è¡¨é•¿ä»€ä¹ˆæ ·ï¼Œå®ƒå°±èƒ½è‡ªåŠ¨å¸®ä½ ç”ŸæˆJavaä»£ç ï¼Œçœå»å¤§é‡é‡å¤åŠ³åŠ¨ã€‚

**ğŸŒ° ç”Ÿæ´»ç±»æ¯”**ï¼š  
å°±åƒä½ å»é¤å…ç‚¹èœï¼Œä¸ç”¨è‡ªå·±åšé¥­ï¼Œåªéœ€è¦çœ‹èœå•ï¼ˆæ•°æ®åº“è¡¨ï¼‰ï¼Œå¨å¸ˆï¼ˆMBGï¼‰å°±è‡ªåŠ¨åšå¥½ç«¯ç»™ä½ ï¼ˆç”Ÿæˆä»£ç ï¼‰ã€‚

â­ **ä¸“ä¸šå®šä¹‰**

MyBatis Generatoræ˜¯MyBatiså®˜æ–¹æä¾›çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿæ ¹æ®æ•°æ®åº“è¡¨ç»“æ„è‡ªåŠ¨ç”Ÿæˆï¼š
- Javaå®ä½“ç±»ï¼ˆPOJOï¼‰
- Mapperæ¥å£
- XMLæ˜ å°„æ–‡ä»¶
- ExampleæŸ¥è¯¢ç±»ï¼ˆå¯é€‰ï¼‰

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ä»£ç ç”Ÿæˆå™¨


**âŒ æ‰‹å†™ä»£ç çš„ç—›ç‚¹**
```
æœ‰100å¼ è¡¨çš„é¡¹ç›®ï¼Œæ‰‹å†™éœ€è¦ï¼š
- 100ä¸ªå®ä½“ç±»ï¼ˆæ¯ä¸ª20-50è¡Œï¼‰
- 100ä¸ªMapperæ¥å£ï¼ˆæ¯ä¸ª10-30ä¸ªæ–¹æ³•ï¼‰
- 100ä¸ªXMLæ–‡ä»¶ï¼ˆæ¯ä¸ª50-200è¡ŒSQLï¼‰
æ€»è®¡ï¼šè‡³å°‘å†™10000è¡Œé‡å¤ä»£ç ï¼
```

**âœ… ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨çš„å¥½å¤„**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®åº“è¡¨ç»“æ„                         â”‚
â”‚  â†“                                   â”‚
â”‚  [MBGä»£ç ç”Ÿæˆå™¨]                     â”‚
â”‚  â†“                                   â”‚
â”‚  è‡ªåŠ¨ç”Ÿæˆï¼šå®ä½“ç±» + Mapper + XML      â”‚
â”‚  â†“                                   â”‚
â”‚  å¼€å‘äººå‘˜åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

èŠ‚çœæ—¶é—´ï¼šæ‰‹å†™1å‘¨ â†’ è‡ªåŠ¨ç”Ÿæˆ5åˆ†é’Ÿ
å‡å°‘é”™è¯¯ï¼šæ‹¼å†™é”™è¯¯ã€å­—æ®µé—æ¼ç­‰é—®é¢˜
ç»Ÿä¸€è§„èŒƒï¼šä»£ç é£æ ¼å®Œå…¨ä¸€è‡´
```

### 1.3 ä»£ç ç”Ÿæˆå™¨çš„å·¥ä½œåŸç†


**ğŸ“Š å·¥ä½œæµç¨‹å›¾**
```
æ­¥éª¤1         æ­¥éª¤2         æ­¥éª¤3         æ­¥éª¤4
[é…ç½®æ–‡ä»¶] â†’ [è¿æ¥æ•°æ®åº“] â†’ [è¯»å–è¡¨ç»“æ„] â†’ [ç”Ÿæˆä»£ç æ–‡ä»¶]
   â†“            â†“            â†“            â†“
generatorConfig.xml  JDBCè¿æ¥  å…ƒæ•°æ®åˆ†æ  è¾“å‡ºåˆ°ç›®å½•
```

**ğŸ’¡ æ ¸å¿ƒæœºåˆ¶**
1. **æ•°æ®åº“å…ƒæ•°æ®è¯»å–**ï¼šè¿æ¥æ•°æ®åº“ï¼Œè·å–è¡¨ã€å­—æ®µã€ç±»å‹ç­‰ä¿¡æ¯
2. **Javaç±»å‹æ˜ å°„**ï¼šå°†SQLç±»å‹è½¬æ¢ä¸ºJavaç±»å‹ï¼ˆå¦‚VARCHARâ†’Stringï¼‰
3. **æ¨¡æ¿å¼•æ“ç”Ÿæˆ**ï¼šæ ¹æ®å†…ç½®æ¨¡æ¿ç”Ÿæˆä»£ç 
4. **æ–‡ä»¶è¾“å‡º**ï¼šå°†ä»£ç å†™å…¥åˆ°æŒ‡å®šç›®å½•

---

## 2. ğŸ”§ é€†å‘å·¥ç¨‹åŸç†ä¸é…ç½®


### 2.1 ä»€ä¹ˆæ˜¯é€†å‘å·¥ç¨‹


ğŸ”° **é€šä¿—ç†è§£**

æ­£å‘å·¥ç¨‹ï¼šå…ˆå†™Javaä»£ç  â†’ åˆ›å»ºæ•°æ®åº“è¡¨  
é€†å‘å·¥ç¨‹ï¼šå…ˆæœ‰æ•°æ®åº“è¡¨ â†’ è‡ªåŠ¨ç”ŸæˆJavaä»£ç 

**ğŸŒ° å½¢è±¡æ¯”å–»**ï¼š
- æ­£å‘ï¼šå»ºç­‘å¸ˆç”»å›¾çº¸ â†’ å·¥äººç›–æˆ¿å­
- é€†å‘ï¼šæˆ¿å­å·²ç»å»ºå¥½ â†’ è‡ªåŠ¨ç”»å‡ºå›¾çº¸

### 2.2 æ•°æ®åº“è¡¨åˆ†ææœºåˆ¶


**ğŸ“‹ è¡¨ç»“æ„åˆ†æå†…å®¹**

```
æ•°æ®åº“è¡¨ï¼šuser_info
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ å­—æ®µå        â”‚ æ•°æ®ç±»å‹     â”‚ é•¿åº¦ â”‚ å¤‡æ³¨ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚ BIGINT      â”‚ 20   â”‚ ä¸»é”® â”‚
â”‚ user_name    â”‚ VARCHAR     â”‚ 50   â”‚ å§“å â”‚
â”‚ age          â”‚ INT         â”‚ 11   â”‚ å¹´é¾„ â”‚
â”‚ create_time  â”‚ DATETIME    â”‚ -    â”‚ æ—¶é—´ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

MBGåˆ†æè¿‡ç¨‹ï¼š
1. è¯»å–è¡¨åï¼šuser_info â†’ è½¬æ¢ç±»åï¼šUserInfo
2. è¯»å–å­—æ®µï¼šuser_name â†’ è½¬æ¢å±æ€§ï¼šuserNameï¼ˆé©¼å³°å‘½åï¼‰
3. åˆ†æç±»å‹ï¼šVARCHAR â†’ String, INT â†’ Integer, DATETIME â†’ Date
4. è¯†åˆ«ä¸»é”®ï¼šid â†’ ç”Ÿæˆä¸»é”®ç›¸å…³æ–¹æ³•
```

### 2.3 é…ç½®æ–‡ä»¶è¯¦è§£


#### 2.3.1 åŸºç¡€é…ç½®ç»“æ„


**ğŸ”¸ generatorConfig.xmlæ ¸å¿ƒé…ç½®**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE generatorConfiguration
  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
  "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">

<generatorConfiguration>
    <!-- é…ç½®åˆ†ä¸º4å¤§éƒ¨åˆ† -->
    
    <!-- â‘  å…¨å±€å±æ€§é…ç½® -->
    <properties resource="db.properties"/>
    
    <!-- â‘¡ æ•°æ®åº“è¿æ¥é…ç½® -->
    <context id="MySQLContext" targetRuntime="MyBatis3">
        <jdbcConnection 
            driverClass="com.mysql.jdbc.Driver"
            connectionURL="jdbc:mysql://localhost:3306/mydb"
            userId="root"
            password="123456"/>
        
        <!-- â‘¢ ä»£ç ç”Ÿæˆç›®æ ‡é…ç½® -->
        <javaModelGenerator targetPackage="com.example.entity" 
                           targetProject="src/main/java"/>
        
        <sqlMapGenerator targetPackage="mapper" 
                        targetProject="src/main/resources"/>
        
        <javaClientGenerator type="XMLMAPPER" 
                            targetPackage="com.example.mapper" 
                            targetProject="src/main/java"/>
        
        <!-- â‘£ è¦ç”Ÿæˆçš„è¡¨é…ç½® -->
        <table tableName="user_info" domainObjectName="UserInfo">
            <generatedKey column="id" sqlStatement="JDBC"/>
        </table>
    </context>
</generatorConfiguration>
```

#### 2.3.2 é…ç½®é¡¹è¯¦ç»†è¯´æ˜


**ğŸ”¹ contexté…ç½®ï¼ˆä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰**

| å±æ€§ | **å«ä¹‰** | **å¸¸ç”¨å€¼** | **è¯´æ˜** |
|------|---------|-----------|---------|
| `id` | `ä¸Šä¸‹æ–‡æ ‡è¯†` | `MySQLContext` | `å¯ä»¥é…ç½®å¤šä¸ªcontext` |
| `targetRuntime` | `è¿è¡Œæ¨¡å¼` | `MyBatis3`/`MyBatis3Simple` | `å†³å®šç”Ÿæˆä»£ç çš„å¤æ‚åº¦` |

```
targetRuntimeå–å€¼å¯¹æ¯”ï¼š

MyBatis3ï¼ˆåŠŸèƒ½ä¸°å¯Œï¼‰ï¼š
- ç”ŸæˆExampleç±»ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢
- ç”Ÿæˆå¢åˆ æ”¹æŸ¥å®Œæ•´æ–¹æ³•
- é€‚åˆå¤æ‚ä¸šåŠ¡åœºæ™¯

MyBatis3Simpleï¼ˆç®€æ´ç‰ˆï¼‰ï¼š
- åªç”ŸæˆåŸºç¡€å¢åˆ æ”¹æŸ¥
- ä¸ç”ŸæˆExampleç±»
- é€‚åˆç®€å•CRUDæ“ä½œ
```

**ğŸ”¹ jdbcConnectioné…ç½®ï¼ˆæ•°æ®åº“è¿æ¥ï¼‰**

```xml
<jdbcConnection 
    driverClass="com.mysql.jdbc.Driver"
    connectionURL="jdbc:mysql://localhost:3306/mydb?useSSL=false&amp;serverTimezone=UTC"
    userId="root"
    password="123456">
    
    <!-- é¢å¤–å±æ€§é…ç½® -->
    <property name="nullCatalogMeansCurrent" value="true"/>
</jdbcConnection>
```

âš ï¸ **æ–°æ‰‹æ³¨æ„äº‹é¡¹**ï¼š
- æ•°æ®åº“URLä¸­çš„`&`è¦å†™æˆ`&amp;`ï¼ˆXMLè½¬ä¹‰å­—ç¬¦ï¼‰
- MySQL 8.0éœ€è¦æŒ‡å®š`serverTimezone`
- ç¡®ä¿æ•°æ®åº“é©±åŠ¨ç‰ˆæœ¬ä¸æ•°æ®åº“ç‰ˆæœ¬åŒ¹é…

---

## 3. ğŸš€ ä»£ç ç”Ÿæˆå®æˆ˜æ“ä½œ


### 3.1 å®ä½“ç±»ç”Ÿæˆ


#### 3.1.1 å®ä½“ç±»é…ç½®


**ğŸ”¸ javaModelGeneratoré…ç½®**

```xml
<javaModelGenerator targetPackage="com.example.entity" 
                   targetProject="src/main/java">
    <!-- å¯ç”¨å­åŒ…ï¼šcom.example.entity.user -->
    <property name="enableSubPackages" value="true"/>
    
    <!-- å»é™¤å­—æ®µå‰åç©ºæ ¼ -->
    <property name="trimStrings" value="true"/>
    
    <!-- ç”ŸæˆtoStringæ–¹æ³• -->
    <property name="toString" value="true"/>
</javaModelGenerator>
```

#### 3.1.2 ç”Ÿæˆç»“æœç¤ºä¾‹


**ğŸ“‹ æ•°æ®åº“è¡¨ â†’ Javaå®ä½“ç±»è½¬æ¢**

```
æ•°æ®åº“è¡¨ï¼šuser_info
å­—æ®µï¼šid, user_name, age, create_time

â†“ è‡ªåŠ¨ç”Ÿæˆ â†“

Javaç±»ï¼šUserInfo.java
```

```java
package com.example.entity;

import java.util.Date;

/**
 * æ•°æ®åº“è¡¨ï¼šuser_info
 */
public class UserInfo {
    // ä¸»é”®
    private Long id;
    
    // ç”¨æˆ·åï¼ˆè‡ªåŠ¨é©¼å³°è½¬æ¢ï¼šuser_name â†’ userNameï¼‰
    private String userName;
    
    // å¹´é¾„
    private Integer age;
    
    // åˆ›å»ºæ—¶é—´ï¼ˆè‡ªåŠ¨ç±»å‹æ˜ å°„ï¼šDATETIME â†’ Dateï¼‰
    private Date createTime;
    
    // getter/setteræ–¹æ³•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    // ... å…¶ä»–getter/setterçœç•¥
}
```

ğŸ§  **è®°å¿†è¦ç‚¹**ï¼š
- è¡¨åè½¬ç±»åï¼šä¸‹åˆ’çº¿è½¬é©¼å³° + é¦–å­—æ¯å¤§å†™
- å­—æ®µè½¬å±æ€§ï¼šä¸‹åˆ’çº¿è½¬é©¼å³°
- SQLç±»å‹è½¬Javaç±»å‹ï¼šè‡ªåŠ¨æ˜ å°„

### 3.2 Mapperæ¥å£ç”Ÿæˆ


#### 3.2.1 Mapperé…ç½®


**ğŸ”¸ javaClientGeneratoré…ç½®**

```xml
<javaClientGenerator type="XMLMAPPER" 
                    targetPackage="com.example.mapper" 
                    targetProject="src/main/java">
    <property name="enableSubPackages" value="true"/>
</javaClientGenerator>
```

**ğŸ“Š typeå±æ€§è¯´æ˜**

| typeå€¼ | **ç”Ÿæˆå†…å®¹** | **é€‚ç”¨åœºæ™¯** |
|--------|------------|-------------|
| `XMLMAPPER` | `æ¥å£ + XMLæ–‡ä»¶` | `æ¨èä½¿ç”¨ï¼ŒèŒè´£åˆ†ç¦»` |
| `ANNOTATEDMAPPER` | `æ¥å£ + æ³¨è§£SQL` | `ç®€å•åœºæ™¯ï¼Œæ— éœ€XML` |
| `MIXEDMAPPER` | `æ··åˆæ¨¡å¼` | `çµæ´»ä½†ä¸å¸¸ç”¨` |

#### 3.2.2 ç”Ÿæˆçš„Mapperæ¥å£


```java
package com.example.mapper;

import com.example.entity.UserInfo;
import org.apache.ibatis.annotations.Param;

public interface UserInfoMapper {
    // åŸºç¡€å¢åˆ æ”¹æŸ¥æ–¹æ³•
    int insert(UserInfo record);
    int deleteByPrimaryKey(Long id);
    int updateByPrimaryKey(UserInfo record);
    UserInfo selectByPrimaryKey(Long id);
    
    // å¸¦Exampleçš„å¤æ‚æŸ¥è¯¢ï¼ˆMyBatis3æ¨¡å¼ï¼‰
    List<UserInfo> selectByExample(UserInfoExample example);
    int countByExample(UserInfoExample example);
    int deleteByExample(UserInfoExample example);
}
```

### 3.3 XMLæ˜ å°„æ–‡ä»¶ç”Ÿæˆ


#### 3.3.1 XMLé…ç½®


**ğŸ”¸ sqlMapGeneratoré…ç½®**

```xml
<sqlMapGenerator targetPackage="mapper" 
                targetProject="src/main/resources">
    <property name="enableSubPackages" value="true"/>
</sqlMapGenerator>
```

#### 3.3.2 ç”Ÿæˆçš„XMLæ–‡ä»¶


```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.UserInfoMapper">
    
    <!-- ResultMapï¼šå­—æ®µæ˜ å°„ -->
    <resultMap id="BaseResultMap" type="com.example.entity.UserInfo">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="user_name" jdbcType="VARCHAR" property="userName"/>
        <result column="age" jdbcType="INTEGER" property="age"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
    </resultMap>
    
    <!-- åŸºç¡€SQLç‰‡æ®µ -->
    <sql id="Base_Column_List">
        id, user_name, age, create_time
    </sql>
    
    <!-- æŸ¥è¯¢è¯­å¥ -->
    <select id="selectByPrimaryKey" resultMap="BaseResultMap">
        select 
        <include refid="Base_Column_List"/>
        from user_info
        where id = #{id}
    </select>
    
    <!-- æ’å…¥è¯­å¥ -->
    <insert id="insert">
        insert into user_info (user_name, age, create_time)
        values (#{userName}, #{age}, #{createTime})
    </insert>
</mapper>
```

### 3.4 ExampleæŸ¥è¯¢ç±»ç”Ÿæˆ


#### 3.4.1 ä»€ä¹ˆæ˜¯Exampleç±»


ğŸ”° **æ–°æ‰‹ç†è§£**

Exampleç±»æ˜¯ä¸€ä¸ª"æŸ¥è¯¢æ¡ä»¶æ„é€ å™¨"ï¼Œç”¨æ¥æ„å»ºå¤æ‚çš„SQLæŸ¥è¯¢æ¡ä»¶ï¼Œä¸ç”¨å†™SQLè¯­å¥ã€‚

**ğŸŒ° å¯¹æ¯”è¯´æ˜**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼ˆå†™SQLï¼‰ï¼š
WHERE user_name = 'å¼ ä¸‰' AND age > 18 AND create_time > '2024-01-01'

Exampleæ–¹å¼ï¼ˆJavaä»£ç ï¼‰ï¼š
example.createCriteria()
    .andUserNameEqualTo("å¼ ä¸‰")
    .andAgeGreaterThan(18)
    .andCreateTimeGreaterThan(new Date());
```

#### 3.4.2 Exampleä½¿ç”¨ç¤ºä¾‹


```java
// åˆ›å»ºæŸ¥è¯¢æ¡ä»¶
UserInfoExample example = new UserInfoExample();

// æ–¹å¼1ï¼šå•ä¸€æ¡ä»¶
example.createCriteria()
    .andUserNameEqualTo("å¼ ä¸‰");

// æ–¹å¼2ï¼šå¤šä¸ªæ¡ä»¶ï¼ˆANDï¼‰
example.createCriteria()
    .andUserNameEqualTo("å¼ ä¸‰")
    .andAgeGreaterThan(18);

// æ–¹å¼3ï¼šORæ¡ä»¶ç»„åˆ
example.createCriteria()
    .andUserNameEqualTo("å¼ ä¸‰");
example.or()
    .andAgeGreaterThan(18);

// æ‰§è¡ŒæŸ¥è¯¢
List<UserInfo> users = userInfoMapper.selectByExample(example);
```

**ğŸ’¡ å¸¸ç”¨æ¡ä»¶æ–¹æ³•**

| æ–¹æ³• | **SQLç­‰ä»·** | **ç¤ºä¾‹** |
|------|-----------|---------|
| `andXxxEqualTo` | `WHERE xxx = ?` | `andAgeEqualTo(18)` |
| `andXxxNotEqualTo` | `WHERE xxx != ?` | `andAgeNotEqualTo(18)` |
| `andXxxGreaterThan` | `WHERE xxx > ?` | `andAgeGreaterThan(18)` |
| `andXxxLike` | `WHERE xxx LIKE ?` | `andUserNameLike("%å¼ %")` |
| `andXxxIn` | `WHERE xxx IN (?)` | `andAgeIn(Arrays.asList(18,20))` |
| `andXxxBetween` | `WHERE xxx BETWEEN ? AND ?` | `andAgeBetween(18, 30)` |

---

## 4. âš™ï¸ ç”Ÿæˆç­–ç•¥ä¸è‡ªå®šä¹‰


### 4.1 tableé…ç½®è¯¦è§£


**ğŸ”¸ å®Œæ•´tableé…ç½®ç¤ºä¾‹**

```xml
<table tableName="user_info" 
       domainObjectName="UserInfo"
       enableCountByExample="true"
       enableUpdateByExample="true"
       enableDeleteByExample="true"
       enableSelectByExample="true"
       selectByExampleQueryId="true">
    
    <!-- ä¸»é”®ç”Ÿæˆç­–ç•¥ -->
    <generatedKey column="id" sqlStatement="JDBC" identity="true"/>
    
    <!-- å¿½ç•¥æŸäº›å­—æ®µ -->
    <ignoreColumn column="deleted"/>
    
    <!-- å­—æ®µé‡å‘½å -->
    <columnOverride column="user_name" property="username"/>
    
    <!-- å­—æ®µç±»å‹è½¬æ¢ -->
    <columnOverride column="status" javaType="java.lang.Boolean"/>
</table>
```

#### 4.1.1 é…ç½®é¡¹è¯´æ˜


**ğŸ“‹ enableç³»åˆ—å¼€å…³**

```
enableCountByExample="true"
â†’ ç”Ÿæˆï¼šint countByExample(Example example)
â†’ ä½œç”¨ï¼šç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°

enableSelectByExample="true"  
â†’ ç”Ÿæˆï¼šList<T> selectByExample(Example example)
â†’ ä½œç”¨ï¼šæ¡ä»¶æŸ¥è¯¢

enableDeleteByExample="true"
â†’ ç”Ÿæˆï¼šint deleteByExample(Example example)
â†’ ä½œç”¨ï¼šæ¡ä»¶åˆ é™¤

enableUpdateByExample="true"
â†’ ç”Ÿæˆï¼šint updateByExample(Record, Example)
â†’ ä½œç”¨ï¼šæ¡ä»¶æ›´æ–°
```

âš ï¸ **æ€§èƒ½å»ºè®®**ï¼š  
å¦‚æœä¸éœ€è¦Exampleçš„å¤æ‚æŸ¥è¯¢ï¼Œå¯ä»¥å…¨éƒ¨è®¾ä¸º`false`ï¼Œç”Ÿæˆæ›´ç®€æ´çš„ä»£ç ã€‚

### 4.2 è‡ªå®šä¹‰ç”Ÿæˆæ¨¡æ¿


#### 4.2.1 æ³¨é‡Šç”Ÿæˆå™¨è‡ªå®šä¹‰


**ğŸ”¸ æ·»åŠ è‡ªå®šä¹‰æ³¨é‡Š**

```xml
<commentGenerator>
    <!-- é˜»æ­¢ç”Ÿæˆé»˜è®¤æ³¨é‡Š -->
    <property name="suppressAllComments" value="false"/>
    
    <!-- é˜»æ­¢ç”Ÿæˆæ—¥æœŸ -->
    <property name="suppressDate" value="true"/>
    
    <!-- æ·»åŠ æ•°æ®åº“è¡¨å¤‡æ³¨ -->
    <property name="addRemarkComments" value="true"/>
</commentGenerator>
```

**ç”Ÿæˆæ•ˆæœå¯¹æ¯”**ï¼š
```java
// é»˜è®¤æ³¨é‡Šï¼ˆæ¯”è¾ƒç®€å•ï¼‰
public class UserInfo { ... }

// è‡ªå®šä¹‰æ³¨é‡Šï¼ˆæ›´è¯¦ç»†ï¼‰
/**
 * ç”¨æˆ·ä¿¡æ¯è¡¨
 * æ•°æ®åº“è¡¨ï¼šuser_info
 * ç”Ÿæˆæ—¶é—´ï¼š2024-01-15
 */
public class UserInfo { ... }
```

#### 4.2.2 æ’ä»¶é…ç½®


**ğŸ”¸ å¸¸ç”¨æ’ä»¶**

```xml
<context id="MySQLContext" targetRuntime="MyBatis3">
    
    <!-- â‘  Serializableæ’ä»¶ï¼šè®©å®ä½“ç±»å®ç°åºåˆ—åŒ– -->
    <plugin type="org.mybatis.generator.plugins.SerializablePlugin"/>
    
    <!-- â‘¡ toStringæ’ä»¶ï¼šç”ŸæˆtoStringæ–¹æ³• -->
    <plugin type="org.mybatis.generator.plugins.ToStringPlugin"/>
    
    <!-- â‘¢ EqualsHashCodeæ’ä»¶ï¼šç”Ÿæˆequalså’ŒhashCode -->
    <plugin type="org.mybatis.generator.plugins.EqualsHashCodePlugin"/>
    
    <!-- â‘£ åˆ†é¡µæ’ä»¶ï¼šæ”¯æŒåˆ†é¡µæŸ¥è¯¢ -->
    <plugin type="org.mybatis.generator.plugins.RowBoundsPlugin"/>
</context>
```

### 4.3 å¢é‡ç”Ÿæˆæ”¯æŒ


#### 4.3.1 å¢é‡ç”ŸæˆåŸç†


ğŸ”° **ç†è§£å¢é‡ç”Ÿæˆ**

```
ç¬¬ä¸€æ¬¡ç”Ÿæˆï¼šç”Ÿæˆæ‰€æœ‰è¡¨çš„ä»£ç 
ç¬¬äºŒæ¬¡ç”Ÿæˆï¼ˆæ–°å¢è¡¨ï¼‰ï¼šåªç”Ÿæˆæ–°è¡¨ä»£ç ï¼Œä¸è¦†ç›–æ—§æ–‡ä»¶
```

**ğŸ”¸ é…ç½®æ–¹å¼**

```xml
<javaModelGenerator targetPackage="com.example.entity" 
                   targetProject="src/main/java">
    <!-- å…³é”®é…ç½®ï¼šåˆå¹¶æ¨¡å¼ -->
    <property name="mergeable" value="true"/>
</javaModelGenerator>
```

#### 4.3.2 è¦†ç›–ç­–ç•¥é…ç½®


```xml
<context id="MySQLContext" targetRuntime="MyBatis3">
    <!-- XMLæ–‡ä»¶è¦†ç›–é…ç½® -->
    <property name="javaFileEncoding" value="UTF-8"/>
    
    <!-- æ–‡ä»¶è¦†ç›–æ¨¡å¼ -->
    <property name="overwrite" value="false"/>
</context>
```

**ğŸ“Š è¦†ç›–æ¨¡å¼å¯¹æ¯”**

| é…ç½® | **è¡Œä¸º** | **é€‚ç”¨åœºæ™¯** |
|------|---------|-------------|
| `overwrite=true` | `å®Œå…¨è¦†ç›–æ—§æ–‡ä»¶` | `åˆæ¬¡ç”Ÿæˆæˆ–é‡æ–°ç”Ÿæˆ` |
| `overwrite=false` | `ä¿ç•™æ—§æ–‡ä»¶ï¼Œä¸è¦†ç›–` | `å¢é‡æ·»åŠ æ–°è¡¨` |
| `mergeable=true` | `æ™ºèƒ½åˆå¹¶å†…å®¹` | `ä¿ç•™è‡ªå®šä¹‰ä»£ç ` |

---

## 5. ğŸ¨ é«˜çº§ç‰¹æ€§ä¸æ’ä»¶å¼€å‘


### 5.1 è‡ªå®šä¹‰æ’ä»¶å¼€å‘


#### 5.1.1 æ’ä»¶æœºåˆ¶åŸç†


**ğŸ“Š æ’ä»¶æ‰§è¡Œæµç¨‹**
```
ä»£ç ç”Ÿæˆè¿‡ç¨‹               æ’ä»¶ä»‹å…¥ç‚¹
     â†“                       â†“
[è¯»å–è¡¨ç»“æ„] â”€â”€â”€â”€â†’ contextGenerateBefore()
     â†“                       â†“
[ç”Ÿæˆå®ä½“ç±»] â”€â”€â”€â”€â†’ modelFieldGenerated()
     â†“                       â†“
[ç”ŸæˆMapper] â”€â”€â”€â”€â†’ clientGenerated()
     â†“                       â†“
[ç”ŸæˆXML]   â”€â”€â”€â”€â†’ sqlMapGenerated()
     â†“                       â†“
[è¾“å‡ºæ–‡ä»¶]   â”€â”€â”€â”€â†’ contextGenerateAfter()
```

#### 5.1.2 è‡ªå®šä¹‰æ’ä»¶ç¤ºä¾‹


**ğŸ”¸ éœ€æ±‚ï¼šç»™æ‰€æœ‰å®ä½“ç±»æ·»åŠ å…¬å…±å­—æ®µ**

```java
import org.mybatis.generator.api.IntrospectedTable;
import org.mybatis.generator.api.PluginAdapter;
import org.mybatis.generator.api.dom.java.*;

public class CommonFieldPlugin extends PluginAdapter {
    
    @Override
    public boolean validate(List<String> warnings) {
        return true;
    }
    
    @Override
    public boolean modelBaseRecordClassGenerated(
            TopLevelClass topLevelClass,
            IntrospectedTable introspectedTable) {
        
        // æ·»åŠ åˆ›å»ºæ—¶é—´å­—æ®µ
        Field createTime = new Field("createTime", 
            new FullyQualifiedJavaType("java.util.Date"));
        createTime.setVisibility(JavaVisibility.PRIVATE);
        topLevelClass.addField(createTime);
        
        // æ·»åŠ getteræ–¹æ³•
        Method getter = new Method("getCreateTime");
        getter.setReturnType(new FullyQualifiedJavaType("java.util.Date"));
        getter.setVisibility(JavaVisibility.PUBLIC);
        getter.addBodyLine("return this.createTime;");
        topLevelClass.addMethod(getter);
        
        return true;
    }
}
```

**ğŸ”§ æ’ä»¶é…ç½®ä½¿ç”¨**

```xml
<plugin type="com.example.plugin.CommonFieldPlugin">
    <property name="fieldName" value="createTime"/>
    <property name="fieldType" value="java.util.Date"/>
</plugin>
```

### 5.2 å¤æ‚åœºæ™¯å¤„ç†


#### 5.2.1 å¤šæ•°æ®æºç”Ÿæˆ


**ğŸ”¸ é…ç½®å¤šä¸ªcontext**

```xml
<generatorConfiguration>
    
    <!-- MySQLæ•°æ®æº -->
    <context id="MySQLContext" targetRuntime="MyBatis3">
        <jdbcConnection 
            driverClass="com.mysql.jdbc.Driver"
            connectionURL="jdbc:mysql://localhost:3306/db1"/>
        <table tableName="user_info"/>
    </context>
    
    <!-- Oracleæ•°æ®æº -->
    <context id="OracleContext" targetRuntime="MyBatis3">
        <jdbcConnection 
            driverClass="oracle.jdbc.driver.OracleDriver"
            connectionURL="jdbc:oracle:thin:@localhost:1521:orcl"/>
        <table tableName="order_info"/>
    </context>
    
</generatorConfiguration>
```

#### 5.2.2 æ‰¹é‡è¡¨ç”Ÿæˆ


**ğŸ”¸ ä½¿ç”¨é€šé…ç¬¦**

```xml
<!-- ç”Ÿæˆæ‰€æœ‰è¡¨ -->
<table tableName="%"/>

<!-- ç”ŸæˆæŒ‡å®šå‰ç¼€çš„è¡¨ -->
<table tableName="sys_%"/>

<!-- æ’é™¤æŸäº›è¡¨ -->
<table tableName="%" 
       enableInsert="true" 
       enableSelectByPrimaryKey="true">
    <ignoreColumnsByRegex pattern="deleted|version"/>
</table>
```

### 5.3 å®é™…é¡¹ç›®é›†æˆ


#### 5.3.1 Mavenæ’ä»¶æ–¹å¼


**ğŸ”¸ pom.xmlé…ç½®**

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-maven-plugin</artifactId>
            <version>1.4.2</version>
            <configuration>
                <configurationFile>
                    src/main/resources/generatorConfig.xml
                </configurationFile>
                <overwrite>true</overwrite>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>8.0.28</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build>
```

**ğŸš€ æ‰§è¡Œå‘½ä»¤**
```bash
# è¿è¡Œä»£ç ç”Ÿæˆ

mvn mybatis-generator:generate

# å¼ºåˆ¶è¦†ç›–

mvn mybatis-generator:generate -Dmybatis.generator.overwrite=true
```

#### 5.3.2 Javaä»£ç æ–¹å¼


```java
public class CodeGenerator {
    public static void main(String[] args) throws Exception {
        List<String> warnings = new ArrayList<>();
        
        // è¯»å–é…ç½®æ–‡ä»¶
        File configFile = new File("generatorConfig.xml");
        ConfigurationParser parser = new ConfigurationParser(warnings);
        Configuration config = parser.parseConfiguration(configFile);
        
        // æ‰§è¡Œç”Ÿæˆ
        DefaultShellCallback callback = new DefaultShellCallback(true);
        MyBatisGenerator generator = new MyBatisGenerator(config, callback, warnings);
        generator.generate(null);
        
        // è¾“å‡ºè­¦å‘Šä¿¡æ¯
        warnings.forEach(System.out::println);
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…çŸ¥å¿…ä¼šæ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ MyBatis Generatoræœ¬è´¨ï¼š
   - ä»£ç è‡ªåŠ¨åŒ–ç”Ÿæˆå·¥å…·
   - åŸºäºæ•°æ®åº“è¡¨ç»“æ„é€†å‘ç”ŸæˆJavaä»£ç 
   - å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œç»Ÿä¸€ä»£ç è§„èŒƒ

ğŸ”¸ æ ¸å¿ƒç”Ÿæˆå†…å®¹ï¼š
   - å®ä½“ç±»ï¼ˆPOJOï¼‰ï¼šå¯¹åº”æ•°æ®åº“è¡¨
   - Mapperæ¥å£ï¼šå®šä¹‰æ•°æ®åº“æ“ä½œæ–¹æ³•
   - XMLæ˜ å°„æ–‡ä»¶ï¼šSQLè¯­å¥é…ç½®
   - Exampleç±»ï¼šå¤æ‚æŸ¥è¯¢æ¡ä»¶æ„é€ å™¨
```

### 6.2 é…ç½®å…³é”®è¦ç‚¹


**ğŸ”¹ å››å¤§æ ¸å¿ƒé…ç½®**

| é…ç½®é¡¹ | **ä½œç”¨** | **å…³é”®å±æ€§** |
|--------|---------|-------------|
| `jdbcConnection` | `æ•°æ®åº“è¿æ¥` | `driverClass, connectionURL` |
| `javaModelGenerator` | `å®ä½“ç±»ç”Ÿæˆ` | `targetPackage, targetProject` |
| `sqlMapGenerator` | `XMLç”Ÿæˆ` | `targetPackage, targetProject` |
| `javaClientGenerator` | `Mapperç”Ÿæˆ` | `type, targetPackage` |

**ğŸ”¹ tableé…ç½®è¦ç‚¹**

```
å¿…é¡»é…ç½®ï¼š
- tableNameï¼šæ•°æ®åº“è¡¨å
- domainObjectNameï¼šJavaç±»å

å¯é€‰é…ç½®ï¼š
- enableXxxByExampleï¼šæ§åˆ¶Exampleæ–¹æ³•ç”Ÿæˆ
- generatedKeyï¼šä¸»é”®ç”Ÿæˆç­–ç•¥
- columnOverrideï¼šå­—æ®µç±»å‹/åç§°è¦†ç›–
```

### 6.3 å®æˆ˜ä½¿ç”¨å»ºè®®


**âœ… æ¨èåšæ³•**
1. **åˆæ¬¡ç”Ÿæˆ**ï¼šä½¿ç”¨`overwrite=true`å®Œå…¨ç”Ÿæˆ
2. **å¢é‡ç”Ÿæˆ**ï¼šä½¿ç”¨`mergeable=true`æ™ºèƒ½åˆå¹¶
3. **è‡ªå®šä¹‰æ‰©å±•**ï¼šä¸ä¿®æ”¹ç”Ÿæˆçš„ä»£ç ï¼Œé€šè¿‡ç»§æ‰¿æ‰©å±•
4. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå°†é…ç½®æ–‡ä»¶çº³å…¥Gitç®¡ç†

**âŒ é¿å…é”™è¯¯**
1. ä¸è¦æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆçš„Mapperå’ŒXMLï¼ˆä¼šè¢«è¦†ç›–ï¼‰
2. ä¸è¦åœ¨Exampleç±»ä¸­æ·»åŠ è‡ªå®šä¹‰é€»è¾‘
3. æ³¨æ„æ•°æ®åº“URLçš„XMLè½¬ä¹‰ï¼ˆ`&` â†’ `&amp;`ï¼‰
4. ç¡®ä¿æ•°æ®åº“é©±åŠ¨ç‰ˆæœ¬åŒ¹é…

### 6.4 è¿›é˜¶å­¦ä¹ è·¯å¾„


**ğŸ—ºï¸ å­¦ä¹ å»ºè®®**
```
å…¥é—¨é˜¶æ®µ â†’ è¿›é˜¶é˜¶æ®µ â†’ é«˜çº§é˜¶æ®µ â†’ ä¸“å®¶é˜¶æ®µ
   â†“          â†“          â†“          â†“
åŸºç¡€é…ç½®   è‡ªå®šä¹‰æ¨¡æ¿   æ’ä»¶å¼€å‘   æ¶æ„é›†æˆ
   â†“          â†“          â†“          â†“
å•è¡¨ç”Ÿæˆ   æ‰¹é‡ç”Ÿæˆ    å¢é‡ç”Ÿæˆ   CI/CDè‡ªåŠ¨åŒ–
```

**ğŸ“š æ‰©å±•çŸ¥è¯†**
- MyBatis-Plusï¼šæ›´å¼ºå¤§çš„ä»£ç ç”Ÿæˆå™¨
- JPAè‡ªåŠ¨å»ºè¡¨ï¼šæ­£å‘å·¥ç¨‹æ–¹æ¡ˆ
- Flyway/Liquibaseï¼šæ•°æ®åº“ç‰ˆæœ¬ç®¡ç†

### 6.5 å¸¸è§é—®é¢˜é€ŸæŸ¥


**ğŸ” é—®é¢˜æ’æŸ¥æ¸…å•**

- [ ] **ç”Ÿæˆå¤±è´¥**ï¼šæ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®å’Œé©±åŠ¨ç‰ˆæœ¬
- [ ] **ä¹±ç é—®é¢˜**ï¼šè®¾ç½®`javaFileEncoding="UTF-8"`
- [ ] **è¦†ç›–é—®é¢˜**ï¼šæ£€æŸ¥`overwrite`å’Œ`mergeable`é…ç½®
- [ ] **ç±»å‹é”™è¯¯**ï¼šä½¿ç”¨`columnOverride`æŒ‡å®šJavaç±»å‹
- [ ] **æ–¹æ³•ç¼ºå¤±**ï¼šæ£€æŸ¥`enableXxxByExample`å¼€å…³

---

ğŸ§  **è®°å¿†å£è¯€**ï¼š
```
é€†å‘å·¥ç¨‹è¡¨è½¬ç±»ï¼Œé…ç½®æ–‡ä»¶æ˜¯å…³é”®
å®ä½“MapperåŠ XMLï¼ŒExampleå¤æ‚æŸ¥è¯¢å…³
æ’ä»¶æ‰©å±•åŠŸèƒ½å¼ºï¼Œå¢é‡ç”Ÿæˆä¸è¦†ç›–
é›†æˆMavenæœ€æ–¹ä¾¿ï¼Œè‡ªåŠ¨ç”Ÿæˆæ•ˆç‡é«˜
```

â±ï¸ **é¢„è®¡å­¦ä¹ æ—¶é—´**: 2-3å°æ—¶  
ğŸ¯ **å­¦ä¹ ç›®æ ‡**: æŒæ¡MyBatisä»£ç ç”Ÿæˆå™¨çš„é…ç½®å’Œä½¿ç”¨ï¼Œèƒ½å¤Ÿç‹¬ç«‹å®Œæˆé¡¹ç›®ä¸­çš„ä»£ç ç”Ÿæˆä»»åŠ¡