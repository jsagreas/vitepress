---
title: 10ã€DTOä¸VOå¯¹è±¡è½¬æ¢
---
## ğŸ“š ç›®å½•

1. [å¯¹è±¡åˆ†å±‚è®¾è®¡ç†å¿µ](#1-å¯¹è±¡åˆ†å±‚è®¾è®¡ç†å¿µ)
2. [å„å±‚å¯¹è±¡è¯¦è§£](#2-å„å±‚å¯¹è±¡è¯¦è§£)
3. [å¯¹è±¡è½¬æ¢å®ç°æ–¹å¼](#3-å¯¹è±¡è½¬æ¢å®ç°æ–¹å¼)
4. [æ·±æ‹·è´ä¸æµ…æ‹·è´](#4-æ·±æ‹·è´ä¸æµ…æ‹·è´)
5. [å¯¹è±¡è½¬æ¢æ€§èƒ½ä¼˜åŒ–](#5-å¯¹è±¡è½¬æ¢æ€§èƒ½ä¼˜åŒ–)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å¯¹è±¡åˆ†å±‚è®¾è®¡ç†å¿µ


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦å¯¹è±¡åˆ†å±‚


**é€šä¿—ç†è§£**ï¼šå°±åƒæˆ‘ä»¬ç”Ÿæ´»ä¸­ä¸åŒåœºåˆç©¿ä¸åŒçš„è¡£æœä¸€æ ·
```
åœ¨å®¶ç©¿ç¡è¡£       â†’  POå¯¹è±¡ï¼ˆæ•°æ®åº“é‡Œçš„æ ·å­ï¼‰
ä¸Šç­ç©¿å·¥ä½œæœ     â†’  BOå¯¹è±¡ï¼ˆä¸šåŠ¡å¤„ç†æ—¶çš„æ ·å­ï¼‰
å‡ºé—¨ç©¿å¤–å¥—       â†’  DTOå¯¹è±¡ï¼ˆç½‘ç»œä¼ è¾“æ—¶çš„æ ·å­ï¼‰
æ‹ç…§ç©¿ç¤¼æœ       â†’  VOå¯¹è±¡ï¼ˆå±•ç¤ºç»™ç”¨æˆ·æ—¶çš„æ ·å­ï¼‰
```

**æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚æœåªç”¨ä¸€ä¸ªå¯¹è±¡ä¼šæ€æ ·ï¼Ÿ
```
âŒ æ•°æ®åº“å­—æ®µå…¨æš´éœ²ç»™å‰ç«¯
âŒ å‰ç«¯ä¸éœ€è¦çš„å­—æ®µä¹Ÿä¼ è¾“
âŒ å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯æ³„éœ²
âŒ ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“å¼ºè€¦åˆ
âŒ ä¿®æ”¹æ•°æ®åº“å½±å“æ•´ä¸ªç³»ç»Ÿ
```

**åˆ†å±‚è®¾è®¡çš„å¥½å¤„**ï¼š
```
âœ… å®‰å…¨æ€§æå‡ï¼šæ•æ„Ÿä¿¡æ¯ä¸å¤–æ³„
âœ… æ€§èƒ½ä¼˜åŒ–ï¼šåªä¼ è¾“å¿…è¦æ•°æ®
âœ… è§£è€¦åˆï¼šå„å±‚ç‹¬ç«‹å˜åŒ–
âœ… æ˜“ç»´æŠ¤ï¼šèŒè´£æ¸…æ™°æ˜ç¡®
âœ… çµæ´»æ€§ï¼šåŒä¸€æ•°æ®å¤šç§å±•ç¤º
```

### 1.2 å¯¹è±¡åˆ†å±‚æ¶æ„å›¾


```
å‰ç«¯é¡µé¢
   â†“
 ã€VOã€‘è§†å›¾å¯¹è±¡ â† å±•ç¤ºç»™ç”¨æˆ·çœ‹çš„
   â†“
Controllerå±‚
   â†“
 ã€DTOã€‘ä¼ è¾“å¯¹è±¡ â† ç½‘ç»œä¼ è¾“ç”¨çš„
   â†“
Serviceå±‚
   â†“
 ã€BOã€‘ä¸šåŠ¡å¯¹è±¡ â† ä¸šåŠ¡å¤„ç†ç”¨çš„
   â†“
Daoå±‚
   â†“
 ã€POã€‘æŒä¹…åŒ–å¯¹è±¡ â† æ•°æ®åº“å¯¹åº”çš„
   â†“
æ•°æ®åº“
```

---

## 2. ğŸ“¦ å„å±‚å¯¹è±¡è¯¦è§£


### 2.1 POæŒä¹…åŒ–å¯¹è±¡ï¼ˆPersistent Objectï¼‰


**æ˜¯ä»€ä¹ˆ**ï¼šå°±æ˜¯æ•°æ®åº“è¡¨çš„Javaç‰ˆæœ¬ï¼Œä¸€å¼ è¡¨å¯¹åº”ä¸€ä¸ªPOå¯¹è±¡

**ç‰¹ç‚¹**ï¼š
- å­—æ®µå’Œæ•°æ®åº“è¡¨å­—æ®µ**ä¸€ä¸€å¯¹åº”**
- åŒ…å«æ•°æ®åº“æ“ä½œéœ€è¦çš„æ‰€æœ‰å­—æ®µ
- å¯èƒ½åŒ…å«æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µï¼ˆå¦‚idã€åˆ›å»ºæ—¶é—´ï¼‰

**å®é™…ä¾‹å­**ï¼š
```java
// ç”¨æˆ·è¡¨ t_user å¯¹åº”çš„POå¯¹è±¡
public class UserPO {
    private Long id;              // ä¸»é”®
    private String username;      // ç”¨æˆ·å
    private String password;      // å¯†ç (åŠ å¯†å)
    private String email;         // é‚®ç®±
    private Integer status;       // çŠ¶æ€(0ç¦ç”¨,1å¯ç”¨)
    private Date createTime;      // åˆ›å»ºæ—¶é—´
    private Date updateTime;      // æ›´æ–°æ—¶é—´
    private Integer deleted;      // åˆ é™¤æ ‡è®°(0æ­£å¸¸,1åˆ é™¤)
    
    // getter/setterçœç•¥
}
```

> ğŸ’¡ **è®°ä½**ï¼šPOå°±æ˜¯æ•°æ®åº“çš„"é•œåƒ"ï¼Œæ•°æ®åº“æœ‰ä»€ä¹ˆå­—æ®µï¼ŒPOå°±æœ‰ä»€ä¹ˆå±æ€§

### 2.2 DTOæ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆData Transfer Objectï¼‰


**æ˜¯ä»€ä¹ˆ**ï¼šåœ¨ç½‘ç»œä¸­ä¼ è¾“çš„å¯¹è±¡ï¼Œåƒå¿«é€’åŒ…è£¹ä¸€æ ·åªè£…éœ€è¦çš„ä¸œè¥¿

**ç‰¹ç‚¹**ï¼š
- åªåŒ…å«**éœ€è¦ä¼ è¾“**çš„å­—æ®µ
- å»æ‰æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€æƒé™ç­‰ï¼‰
- å»æ‰ä¸å¿…è¦çš„å­—æ®µï¼ˆdeletedã€updateTimeç­‰ï¼‰
- å¯ä»¥ç»„åˆå¤šä¸ªPOçš„æ•°æ®

**å®é™…ä¾‹å­**ï¼š
```java
// ç”¨æˆ·æ³¨å†Œçš„DTO
public class UserRegisterDTO {
    private String username;      // ç”¨æˆ·å
    private String password;      // å¯†ç 
    private String email;         // é‚®ç®±
    
    // åªè¦æ³¨å†Œéœ€è¦çš„3ä¸ªå­—æ®µï¼Œå…¶ä»–å­—æ®µä¸éœ€è¦
}

// ç”¨æˆ·æŸ¥è¯¢çš„DTOï¼ˆè¿”å›ç»™å‰ç«¯ï¼‰
public class UserQueryDTO {
    private Long id;              
    private String username;      
    private String email;         
    private Integer status;       
    
    // å¯†ç ã€deletedç­‰ä¸è¿”å›
}
```

> âš ï¸ **æ³¨æ„**ï¼šDTOçš„å­—æ®µæ˜¯æ ¹æ®**ä¸šåŠ¡éœ€æ±‚**æ¥çš„ï¼Œä¸æ˜¯ç…§æ¬æ•°æ®åº“

### 2.3 VOè§†å›¾å¯¹è±¡ï¼ˆView Objectï¼‰


**æ˜¯ä»€ä¹ˆ**ï¼šå±•ç¤ºç»™ç”¨æˆ·çœ‹çš„å¯¹è±¡ï¼Œå°±åƒå•†å“è¯¦æƒ…é¡µå±•ç¤ºçš„ä¿¡æ¯

**ç‰¹ç‚¹**ï¼š
- ä»¥**å‰ç«¯å±•ç¤ºéœ€æ±‚**ä¸ºå‡†
- æ•°æ®æ ¼å¼åŒ–ï¼ˆæ—¶é—´æ ¼å¼ã€æšä¸¾è½¬æ–‡å­—ç­‰ï¼‰
- å¯ä»¥åŒ…å«è®¡ç®—åçš„å­—æ®µ
- ä¸€ä¸ªDTOå¯èƒ½å¯¹åº”å¤šä¸ªVOï¼ˆPCç«¯ã€ç§»åŠ¨ç«¯å±•ç¤ºä¸åŒï¼‰

**å®é™…ä¾‹å­**ï¼š
```java
// ç”¨æˆ·ä¿¡æ¯å±•ç¤ºVO
public class UserInfoVO {
    private Long id;              
    private String username;      
    private String email;         
    private String statusText;    // "æ­£å¸¸" æˆ– "ç¦ç”¨"ï¼ˆä¸æ˜¯0,1ï¼‰
    private String createTime;    // "2025-09-23 10:30"ï¼ˆæ ¼å¼åŒ–åï¼‰
    
    // ç›¸æ¯”DTOï¼Œè¿™é‡ŒæŠŠstatusè½¬æˆäº†æ–‡å­—ï¼Œæ—¶é—´æ ¼å¼åŒ–äº†
}

// ç”¨æˆ·åˆ—è¡¨å±•ç¤ºVOï¼ˆæ›´ç²¾ç®€ï¼‰
public class UserListVO {
    private Long id;              
    private String username;      
    private String statusText;    
    
    // åˆ—è¡¨é¡µä¸éœ€è¦æ˜¾ç¤ºé‚®ç®±ç­‰è¯¦ç»†ä¿¡æ¯
}
```

> ğŸ’¡ **ç†è§£**ï¼šVOæ˜¯"åŒ–å¦†å"çš„æ•°æ®ï¼Œä¸ºäº†å¥½çœ‹ã€å¥½æ‡‚

### 2.4 BOä¸šåŠ¡å¯¹è±¡ï¼ˆBusiness Objectï¼‰


**æ˜¯ä»€ä¹ˆ**ï¼šä¸šåŠ¡é€»è¾‘å¤„ç†æ—¶ç”¨çš„å¯¹è±¡ï¼ŒåŒ…å«ä¸šåŠ¡æ–¹æ³•

**ç‰¹ç‚¹**ï¼š
- åŒ…å«**ä¸šåŠ¡é€»è¾‘æ–¹æ³•**
- å¯èƒ½èšåˆå¤šä¸ªPOçš„æ•°æ®
- ç”¨äºServiceå±‚å†…éƒ¨å¤„ç†
- ä¸ç›´æ¥ä¼ ç»™Controlleræˆ–Dao

**å®é™…ä¾‹å­**ï¼š
```java
// è®¢å•ä¸šåŠ¡å¯¹è±¡
public class OrderBO {
    private OrderPO order;           // è®¢å•ä¿¡æ¯
    private UserPO user;             // ç”¨æˆ·ä¿¡æ¯
    private List<OrderItemPO> items; // è®¢å•æ˜ç»†
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šè®¡ç®—è®¢å•æ€»é‡‘é¢
    public BigDecimal calculateTotal() {
        return items.stream()
            .map(item -> item.getPrice().multiply(
                new BigDecimal(item.getQuantity())))
            .reduce(BigDecimal.ZERO, BigDecimal::add);
    }
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥å–æ¶ˆ
    public boolean canCancel() {
        return order.getStatus() == 1 // å¾…æ”¯ä»˜çŠ¶æ€
            && !isExpired();          // ä¸”æœªè¿‡æœŸ
    }
}
```

> ğŸ”¥ **é‡ç‚¹**ï¼šBOæ˜¯æœ‰"è¡Œä¸º"çš„å¯¹è±¡ï¼Œä¸åªæ˜¯è£…æ•°æ®çš„å®¹å™¨

### 2.5 å››ç§å¯¹è±¡å¯¹æ¯”


| å¯¹è±¡ç±»å‹ | **ä½¿ç”¨åœºæ™¯** | **ä¸»è¦ç‰¹ç‚¹** | **ä¸¾ä¾‹è¯´æ˜** |
|---------|------------|------------|------------|
| **PO** | `Daoå±‚â†”æ•°æ®åº“` | å’Œæ•°æ®åº“è¡¨ä¸€ä¸€å¯¹åº” | ç”¨æˆ·è¡¨â†’UserPO |
| **DTO** | `Controllerâ†”Service` | ç½‘ç»œä¼ è¾“ç”¨ï¼Œç²¾ç®€æ•°æ® | æ³¨å†Œè¯·æ±‚â†’UserRegisterDTO |
| **VO** | `å‰ç«¯å±•ç¤º` | æ ¼å¼åŒ–åçš„æ•°æ® | ç”¨æˆ·è¯¦æƒ…é¡µâ†’UserInfoVO |
| **BO** | `Serviceå±‚å†…éƒ¨` | åŒ…å«ä¸šåŠ¡é€»è¾‘ | è®¢å•å¤„ç†â†’OrderBO |

**æ•°æ®æµè½¬ç¤ºæ„**ï¼š
```
ç”¨æˆ·æ³¨å†Œæµç¨‹ï¼š
å‰ç«¯æäº¤ â†’ UserRegisterDTO â†’ Serviceå¤„ç† â†’ è½¬ä¸ºUserPO â†’ ä¿å­˜æ•°æ®åº“

ç”¨æˆ·æŸ¥è¯¢æµç¨‹ï¼š
æ•°æ®åº“æŸ¥è¯¢ â†’ UserPO â†’ Serviceå¤„ç† â†’ è½¬ä¸ºUserInfoVO â†’ è¿”å›å‰ç«¯
```

---

## 3. ğŸ”„ å¯¹è±¡è½¬æ¢å®ç°æ–¹å¼


### 3.1 æ‰‹åŠ¨è½¬æ¢ï¼ˆæœ€åŸºç¡€ï¼‰


**é€‚ç”¨åœºæ™¯**ï¼šå­—æ®µå°‘ã€é€»è¾‘ç®€å•çš„è½¬æ¢

```java
// æ–¹å¼1ï¼šç›´æ¥newå¯¹è±¡èµ‹å€¼
public UserInfoVO convertToVO(UserPO po) {
    UserInfoVO vo = new UserInfoVO();
    vo.setId(po.getId());
    vo.setUsername(po.getUsername());
    vo.setEmail(po.getEmail());
    
    // çŠ¶æ€è½¬æ–‡å­—
    vo.setStatusText(po.getStatus() == 1 ? "æ­£å¸¸" : "ç¦ç”¨");
    
    // æ—¶é—´æ ¼å¼åŒ–
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
    vo.setCreateTime(sdf.format(po.getCreateTime()));
    
    return vo;
}
```

**ä¼˜ç‚¹**ï¼šâœ… çµæ´»ã€å¯æ§ã€å®¹æ˜“è°ƒè¯•  
**ç¼ºç‚¹**ï¼šâŒ ä»£ç ç¹çã€å®¹æ˜“å‡ºé”™ã€ä¸æ˜“ç»´æŠ¤

### 3.2 BeanUtilså±æ€§æ‹·è´


**æ˜¯ä»€ä¹ˆ**ï¼šSpringæä¾›çš„å·¥å…·ç±»ï¼Œè‡ªåŠ¨å¤åˆ¶åŒåå±æ€§

```java
// Springçš„BeanUtils
public UserQueryDTO convertToDTO(UserPO po) {
    UserQueryDTO dto = new UserQueryDTO();
    
    // è‡ªåŠ¨å¤åˆ¶åŒåå±æ€§
    BeanUtils.copyProperties(po, dto);
    
    return dto;
}
```

**å·¥ä½œåŸç†å›¾è§£**ï¼š
```
UserPO                    UserQueryDTO
â”œâ”€ id         â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”œâ”€ id
â”œâ”€ username   â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”œâ”€ username  
â”œâ”€ password   (ä¸å¤åˆ¶)   
â”œâ”€ email      â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”œâ”€ email
â””â”€ status     â”€â”€â”€â”€â”€â”€â”€â”€â†’  â””â”€ status

è‡ªåŠ¨åŒ¹é…ï¼šåå­—ç›¸åŒ+ç±»å‹å…¼å®¹ â†’ è‡ªåŠ¨å¤åˆ¶
```

**æ³¨æ„äº‹é¡¹**ï¼š
```java
// âš ï¸ å‚æ•°é¡ºåºå¾ˆé‡è¦ï¼
BeanUtils.copyProperties(source, target); // âœ… æ­£ç¡®
BeanUtils.copyProperties(target, source); // âŒ åäº†

// âš ï¸ åªå¤åˆ¶åŒååŒç±»å‹çš„å±æ€§
// id: Long â†’ Long âœ… å¯ä»¥
// id: Long â†’ String âŒ ä¸è¡Œ
// statusText: ä¸å­˜åœ¨ âŒ ä¸ä¼šå¤åˆ¶
```

**Apacheçš„BeanUtilså¯¹æ¯”**ï¼š
```java
// Apacheçš„BeanUtilsï¼ˆä¸æ¨èï¼‰
org.apache.commons.beanutils.BeanUtils.copyProperties(target, source);

// Springçš„BeanUtilsï¼ˆæ¨èï¼‰  
org.springframework.beans.BeanUtils.copyProperties(source, target);
```

| ç‰¹æ€§ | **Spring BeanUtils** | **Apache BeanUtils** |
|-----|---------------------|---------------------|
| å‚æ•°é¡ºåº | (source, target) | (target, source) |
| æ€§èƒ½ | âš¡ å¿«ï¼Œç›´æ¥èµ‹å€¼ | ğŸŒ æ…¢ï¼Œç”¨åå°„+ç±»å‹è½¬æ¢ |
| ç±»å‹è½¬æ¢ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒï¼ˆStringâ†”æ•°å­—ç­‰ï¼‰ |
| æ¨èåº¦ | â­â­â­â­â­ | â­â­ |

> ğŸ’¡ **è®°ä½**ï¼šé¡¹ç›®ä¸­ä¼˜å…ˆç”¨**Springçš„BeanUtils**ï¼Œæ€§èƒ½å¥½ã€å¤Ÿç”¨

### 3.3 MapStructå¯¹è±¡è½¬æ¢ï¼ˆæ¨èï¼‰


**æ˜¯ä»€ä¹ˆ**ï¼šç¼–è¯‘æœŸç”Ÿæˆè½¬æ¢ä»£ç çš„å·¥å…·ï¼Œæ€§èƒ½æ¥è¿‘æ‰‹å†™

**ä¸ºä»€ä¹ˆç”¨MapStruct**ï¼š
```
æ‰‹åŠ¨è½¬æ¢    â†’  å¤ªç¹ç
BeanUtils  â†’  æ€§èƒ½ä¸€èˆ¬ï¼Œä¸æ”¯æŒå¤æ‚è½¬æ¢
MapStruct  â†’  æ€§èƒ½å¥½ + åŠŸèƒ½å¼º + ä»£ç å°‘ âœ…
```

**Mavenä¾èµ–**ï¼š
```xml
<dependency>
    <groupId>org.mapstruct</groupId>
    <artifactId>mapstruct</artifactId>
    <version>1.5.5.Final</version>
</dependency>
<dependency>
    <groupId>org.mapstruct</groupId>
    <artifactId>mapstruct-processor</artifactId>
    <version>1.5.5.Final</version>
    <scope>provided</scope>
</dependency>
```

**åŸºç¡€ç”¨æ³•**ï¼š
```java
// 1. å®šä¹‰è½¬æ¢æ¥å£
@Mapper(componentModel = "spring") // äº¤ç»™Springç®¡ç†
public interface UserConverter {
    
    UserConverter INSTANCE = Mappers.getMapper(UserConverter.class);
    
    // ç®€å•è½¬æ¢ï¼šåŒåå±æ€§è‡ªåŠ¨æ˜ å°„
    UserQueryDTO poToDTO(UserPO po);
    
    // æ‰¹é‡è½¬æ¢
    List<UserQueryDTO> poListToDTOList(List<UserPO> poList);
}

// 2. ä½¿ç”¨è½¬æ¢
@Service
public class UserService {
    
    @Autowired
    private UserConverter userConverter;
    
    public UserQueryDTO getUser(Long id) {
        UserPO po = userDao.selectById(id);
        return userConverter.poToDTO(po); // è‡ªåŠ¨è½¬æ¢
    }
}
```

**é«˜çº§ç”¨æ³•ï¼šå­—æ®µæ˜ å°„**
```java
@Mapper(componentModel = "spring")
public interface UserConverter {
    
    // å­—æ®µåä¸åŒæ—¶ï¼Œæ‰‹åŠ¨æŒ‡å®šæ˜ å°„
    @Mapping(source = "id", target = "userId")
    @Mapping(source = "username", target = "userName")
    UserVO poToVO(UserPO po);
    
    // å¿½ç•¥æŸäº›å­—æ®µ
    @Mapping(target = "password", ignore = true)
    UserDTO poToDTO(UserPO po);
    
    // å¸¸é‡èµ‹å€¼
    @Mapping(target = "type", constant = "NORMAL_USER")
    UserVO poToVOWithType(UserPO po);
    
    // è¡¨è¾¾å¼è®¡ç®—
    @Mapping(target = "statusText", 
             expression = "java(po.getStatus() == 1 ? \"æ­£å¸¸\" : \"ç¦ç”¨\")")
    UserVO poToVOWithStatus(UserPO po);
}
```

**æ—¶é—´æ ¼å¼åŒ–**ï¼š
```java
@Mapper(componentModel = "spring")
public interface UserConverter {
    
    // æ—¶é—´æ ¼å¼åŒ–
    @Mapping(source = "createTime", target = "createTime", 
             dateFormat = "yyyy-MM-dd HH:mm:ss")
    UserVO poToVO(UserPO po);
}
```

**å¤šå¯¹è±¡åˆå¹¶**ï¼š
```java
@Mapper(componentModel = "spring")
public interface OrderConverter {
    
    // ä»å¤šä¸ªå¯¹è±¡ç»„è£…æˆä¸€ä¸ªVO
    @Mapping(source = "order.id", target = "orderId")
    @Mapping(source = "user.username", target = "userName")
    @Mapping(source = "user.email", target = "userEmail")
    OrderDetailVO toDetailVO(OrderPO order, UserPO user);
}
```

**MapStructå·¥ä½œåŸç†**ï¼š
```
ç¼–è¯‘å‰ï¼ˆä½ å†™çš„ï¼‰ï¼š
@Mapper
public interface UserConverter {
    UserDTO poToDTO(UserPO po);
}

ç¼–è¯‘åï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š
public class UserConverterImpl implements UserConverter {
    public UserDTO poToDTO(UserPO po) {
        if (po == null) return null;
        
        UserDTO dto = new UserDTO();
        dto.setId(po.getId());
        dto.setUsername(po.getUsername());
        dto.setEmail(po.getEmail());
        // ... å…¶ä»–å­—æ®µ
        return dto;
    }
}

æ€§èƒ½æ¥è¿‘æ‰‹å†™ä»£ç ï¼
```

### 3.4 ä¸‰ç§æ–¹å¼å¯¹æ¯”


| è½¬æ¢æ–¹å¼ | **æ€§èƒ½** | **ä»£ç é‡** | **åŠŸèƒ½** | **æ¨èåœºæ™¯** |
|---------|---------|----------|---------|------------|
| **æ‰‹åŠ¨è½¬æ¢** | â­â­â­â­â­ | ğŸ˜« å¤š | â­â­â­â­â­ æœ€çµæ´» | å¤æ‚ä¸šåŠ¡é€»è¾‘ |
| **BeanUtils** | â­â­â­ | ğŸ˜Š å°‘ | â­â­ åŸºç¡€åŠŸèƒ½ | ç®€å•å­—æ®µå¤åˆ¶ |
| **MapStruct** | â­â­â­â­â­ | ğŸ˜ƒ å¾ˆå°‘ | â­â­â­â­ å¼ºå¤§ | **ä¼ä¸šçº§é¡¹ç›®** |

> ğŸ”¥ **æ¨è**ï¼šä¼ä¸šé¡¹ç›®ä¼˜å…ˆç”¨**MapStruct**ï¼Œæ€§èƒ½å¥½ã€ä»£ç å°‘ã€åŠŸèƒ½å¼º

---

## 4. ğŸ“‹ æ·±æ‹·è´ä¸æµ…æ‹·è´


### 4.1 ä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´


**é€šä¿—ç†è§£**ï¼š
```
æµ…æ‹·è´ï¼šåƒå¤å°èº«ä»½è¯ï¼Œåªå¤å°è¡¨é¢ä¿¡æ¯
æ·±æ‹·è´ï¼šåƒå…‹éš†äººï¼Œå®Œå…¨ç‹¬ç«‹çš„ä¸ªä½“
```

**æµ…æ‹·è´ç¤ºæ„å›¾**ï¼š
```
åŸå¯¹è±¡ user1                  æ‹·è´å¯¹è±¡ user2
â”œâ”€ id: 1                     â”œâ”€ id: 1
â”œâ”€ name: "å¼ ä¸‰"              â”œâ”€ name: "å¼ ä¸‰"
â””â”€ address: â”                â””â”€ address: â”
            â”‚                             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€å…±äº«åŒä¸€ä¸ªå¯¹è±¡â”€â”€â”€â”€â”€â”€â”€â”˜
              â”œâ”€ city: "åŒ—äº¬"
              â””â”€ street: "æœé˜³åŒº"

ä¿®æ”¹user2.address.city â†’ user1.address.cityä¹Ÿå˜äº†ï¼
```

**æ·±æ‹·è´ç¤ºæ„å›¾**ï¼š
```
åŸå¯¹è±¡ user1                  æ‹·è´å¯¹è±¡ user2
â”œâ”€ id: 1                     â”œâ”€ id: 1
â”œâ”€ name: "å¼ ä¸‰"              â”œâ”€ name: "å¼ ä¸‰"
â””â”€ address:                  â””â”€ address:
    â”œâ”€ city: "åŒ—äº¬"              â”œâ”€ city: "åŒ—äº¬" (ç‹¬ç«‹çš„)
    â””â”€ street: "æœé˜³åŒº"          â””â”€ street: "æœé˜³åŒº"

ä¿®æ”¹user2.address â†’ ä¸å½±å“user1 âœ…
```

### 4.2 å®é™…é—®é¢˜æ¼”ç¤º


```java
// ç”¨æˆ·å¯¹è±¡
public class User {
    private Long id;
    private String name;
    private Address address; // å¼•ç”¨ç±»å‹
}

public class Address {
    private String city;
    private String street;
}

// æµ…æ‹·è´çš„é—®é¢˜
User user1 = new User();
user1.setId(1L);
user1.setName("å¼ ä¸‰");
Address addr = new Address();
addr.setCity("åŒ—äº¬");
user1.setAddress(addr);

// BeanUtilsæ˜¯æµ…æ‹·è´
User user2 = new User();
BeanUtils.copyProperties(user1, user2);

// ä¿®æ”¹user2çš„åœ°å€
user2.getAddress().setCity("ä¸Šæµ·");

// é—®é¢˜ï¼šuser1çš„åŸå¸‚ä¹Ÿå˜æˆä¸Šæµ·äº†ï¼
System.out.println(user1.getAddress().getCity()); // è¾“å‡ºï¼šä¸Šæµ· âŒ
```

> âš ï¸ **å±é™©**ï¼šBeanUtilsã€MapStructé»˜è®¤éƒ½æ˜¯**æµ…æ‹·è´**

### 4.3 æ·±æ‹·è´çš„å®ç°æ–¹å¼


**æ–¹å¼1ï¼šæ‰‹åŠ¨é€’å½’æ‹·è´**
```java
public User deepCopy(User source) {
    User target = new User();
    target.setId(source.getId());
    target.setName(source.getName());
    
    // æ‰‹åŠ¨æ‹·è´address
    if (source.getAddress() != null) {
        Address newAddr = new Address();
        newAddr.setCity(source.getAddress().getCity());
        newAddr.setStreet(source.getAddress().getStreet());
        target.setAddress(newAddr);
    }
    
    return target;
}
```

**æ–¹å¼2ï¼šåºåˆ—åŒ–æ·±æ‹·è´ï¼ˆJSONæ–¹å¼ï¼‰**
```java
// ä½¿ç”¨Jacksonå®ç°æ·±æ‹·è´
@Autowired
private ObjectMapper objectMapper;

public <T> T deepCopy(T source, Class<T> clazz) {
    try {
        String json = objectMapper.writeValueAsString(source);
        return objectMapper.readValue(json, clazz);
    } catch (Exception e) {
        throw new RuntimeException("æ·±æ‹·è´å¤±è´¥", e);
    }
}

// ä½¿ç”¨
User user2 = deepCopy(user1, User.class);
```

**æ–¹å¼3ï¼šå®ç°Cloneableæ¥å£**
```java
public class User implements Cloneable {
    private Long id;
    private String name;
    private Address address;
    
    @Override
    public User clone() {
        try {
            User cloned = (User) super.clone();
            // æ·±æ‹·è´address
            if (this.address != null) {
                cloned.address = this.address.clone();
            }
            return cloned;
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException(e);
        }
    }
}

public class Address implements Cloneable {
    private String city;
    private String street;
    
    @Override
    public Address clone() {
        try {
            return (Address) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException(e);
        }
    }
}
```

### 4.4 ä»€ä¹ˆæ—¶å€™éœ€è¦æ·±æ‹·è´


```
éœ€è¦æ·±æ‹·è´çš„åœºæ™¯ï¼š
âœ… å¯¹è±¡ä¼šè¢«ä¿®æ”¹ï¼Œä¸èƒ½å½±å“åŸå¯¹è±¡
âœ… å¯¹è±¡åŒ…å«å¤æ‚çš„åµŒå¥—å¯¹è±¡
âœ… ç¼“å­˜åœºæ™¯ï¼šç¼“å­˜å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹
âœ… å¤šçº¿ç¨‹ç¯å¢ƒï¼šé¿å…å…±äº«æ•°æ®

ä¸éœ€è¦æ·±æ‹·è´çš„åœºæ™¯ï¼š
âŒ åªè¯»å¯¹è±¡ï¼Œä¸ä¼šä¿®æ”¹
âŒ ç®€å•å¯¹è±¡ï¼Œæ²¡æœ‰åµŒå¥—å¼•ç”¨
âŒ ä¸´æ—¶å¯¹è±¡ï¼Œç”¨å®Œå°±ä¸¢
```

**å®é™…å»ºè®®**ï¼š
```java
// ä¸€èˆ¬çš„è½¬æ¢ï¼šæµ…æ‹·è´å°±å¤Ÿäº†
UserDTO dto = userConverter.poToDTO(po); // æµ…æ‹·è´OK

// éœ€è¦ç‹¬ç«‹ä¿®æ”¹ï¼šç”¨æ·±æ‹·è´
User cacheUser = deepCopy(user, User.class);
cacheUser.setName("æ–°åå­—"); // ä¸å½±å“åŸå¯¹è±¡
```

---

## 5. âš¡ å¯¹è±¡è½¬æ¢æ€§èƒ½ä¼˜åŒ–


### 5.1 æ‰¹é‡è½¬æ¢ä¼˜åŒ–


**é”™è¯¯ç¤ºä¾‹ï¼ˆæ€§èƒ½å·®ï¼‰**ï¼š
```java
// âŒ å¾ªç¯ä¸­è½¬æ¢ï¼Œæ€§èƒ½å·®
public List<UserVO> getUserList() {
    List<UserPO> poList = userDao.selectAll();
    List<UserVO> voList = new ArrayList<>();
    
    for (UserPO po : poList) {
        UserVO vo = new UserVO();
        BeanUtils.copyProperties(po, vo); // æ¯æ¬¡éƒ½è°ƒç”¨
        voList.add(vo);
    }
    return voList;
}
```

**ä¼˜åŒ–ç¤ºä¾‹ï¼ˆæ€§èƒ½å¥½ï¼‰**ï¼š
```java
// âœ… ä½¿ç”¨MapStructæ‰¹é‡è½¬æ¢
@Mapper(componentModel = "spring")
public interface UserConverter {
    
    // æ‰¹é‡è½¬æ¢æ–¹æ³•
    List<UserVO> poListToVOList(List<UserPO> poList);
}

@Service
public class UserService {
    
    @Autowired
    private UserConverter converter;
    
    public List<UserVO> getUserList() {
        List<UserPO> poList = userDao.selectAll();
        return converter.poListToVOList(poList); // ä¸€æ¬¡æå®š
    }
}
```

**æ€§èƒ½å¯¹æ¯”**ï¼š
```
10000æ¡æ•°æ®è½¬æ¢ï¼š
æ‰‹åŠ¨å¾ªç¯BeanUtilsï¼š  çº¦ 150ms
MapStructæ‰¹é‡è½¬æ¢ï¼š  çº¦  50ms
æ€§èƒ½æå‡ï¼š3å€ âš¡
```

### 5.2 åµŒå¥—å¯¹è±¡è½¬æ¢ä¼˜åŒ–


**åœºæ™¯**ï¼šè®¢å•å¯¹è±¡åŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œå•†å“åˆ—è¡¨

```java
// è®¢å•POï¼ˆåŒ…å«åµŒå¥—å¯¹è±¡ï¼‰
public class OrderPO {
    private Long id;
    private UserPO user;              // åµŒå¥—ç”¨æˆ·
    private List<OrderItemPO> items;  // åµŒå¥—å•†å“åˆ—è¡¨
}

// è®¢å•VO
public class OrderVO {
    private Long id;
    private UserVO user;
    private List<OrderItemVO> items;
}
```

**MapStructè‡ªåŠ¨å¤„ç†åµŒå¥—**ï¼š
```java
@Mapper(componentModel = "spring", uses = {UserConverter.class, OrderItemConverter.class})
public interface OrderConverter {
    
    // è‡ªåŠ¨é€’å½’è½¬æ¢åµŒå¥—å¯¹è±¡
    OrderVO poToVO(OrderPO po);
    
    // æ‰¹é‡è½¬æ¢
    List<OrderVO> poListToVOList(List<OrderPO> poList);
}

// useså‚æ•°ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„è½¬æ¢å™¨
// po.getUser() â†’ UserConverter.poToVO() â†’ vo.setUser()
```

**æ€§èƒ½å»ºè®®**ï¼š
```
åµŒå¥—å±‚çº§  å»ºè®®æ–¹æ¡ˆ
1-2å±‚    MapStructè‡ªåŠ¨å¤„ç† âœ…
3å±‚ä»¥ä¸Š  è€ƒè™‘æ‰‹åŠ¨è½¬æ¢ï¼Œé¿å…é€’å½’è¿‡æ·±
```

### 5.3 æŒ‰éœ€è½¬æ¢ç­–ç•¥


**é—®é¢˜åœºæ™¯**ï¼šåˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µéœ€è¦çš„å­—æ®µä¸åŒ

```
åˆ—è¡¨é¡µï¼šåªè¦idã€nameã€statusï¼ˆå­—æ®µå°‘ï¼‰
è¯¦æƒ…é¡µï¼šè¦å…¨éƒ¨å­—æ®µï¼ˆå­—æ®µå¤šï¼‰
```

**è§£å†³æ–¹æ¡ˆï¼šå®šä¹‰å¤šä¸ªVO**
```java
// åˆ—è¡¨VOï¼ˆç²¾ç®€ï¼‰
public class UserListVO {
    private Long id;
    private String username;
    private String statusText;
}

// è¯¦æƒ…VOï¼ˆå®Œæ•´ï¼‰
public class UserDetailVO {
    private Long id;
    private String username;
    private String email;
    private String phone;
    private String statusText;
    private String createTime;
    // ... æ›´å¤šå­—æ®µ
}

// è½¬æ¢å™¨
@Mapper(componentModel = "spring")
public interface UserConverter {
    
    // è½¬åˆ—è¡¨VOï¼ˆåªè½¬3ä¸ªå­—æ®µï¼‰
    UserListVO poToListVO(UserPO po);
    List<UserListVO> poListToListVOList(List<UserPO> poList);
    
    // è½¬è¯¦æƒ…VOï¼ˆè½¬å…¨éƒ¨å­—æ®µï¼‰
    UserDetailVO poToDetailVO(UserPO po);
}
```

**æ€§èƒ½æå‡**ï¼š
```
åœºæ™¯ï¼šæŸ¥è¯¢1000æ¡ç”¨æˆ·åˆ—è¡¨
è½¬å®Œæ•´å¯¹è±¡ï¼š 100ms
è½¬ç²¾ç®€å¯¹è±¡ï¼š  40ms
æ€§èƒ½æå‡ï¼š60% âš¡
```

### 5.4 ç¼“å­˜è½¬æ¢ç»“æœ


**åœºæ™¯**ï¼šåŒä¸€ä¸ªå¯¹è±¡éœ€è¦å¤šæ¬¡è½¬æ¢

```java
@Service
public class UserService {
    
    // ç¼“å­˜è½¬æ¢ç»“æœ
    private final Map<Long, UserVO> voCache = new ConcurrentHashMap<>();
    
    public UserVO getUserVO(Long userId) {
        // å…ˆæŸ¥ç¼“å­˜
        UserVO vo = voCache.get(userId);
        if (vo != null) {
            return vo;
        }
        
        // ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥åº“è½¬æ¢
        UserPO po = userDao.selectById(userId);
        vo = userConverter.poToVO(po);
        
        // æ”¾å…¥ç¼“å­˜
        voCache.put(userId, vo);
        return vo;
    }
}
```

> âš ï¸ **æ³¨æ„**ï¼šç¼“å­˜çš„æ˜¯VOå¯¹è±¡ï¼Œè¦æ³¨æ„æ•°æ®ä¸€è‡´æ€§é—®é¢˜

### 5.5 æ€§èƒ½ä¼˜åŒ–æ€»ç»“


| ä¼˜åŒ–ç­–ç•¥ | **é€‚ç”¨åœºæ™¯** | **æ€§èƒ½æå‡** | **å®ç°éš¾åº¦** |
|---------|------------|------------|------------|
| **MapStructæ‰¹é‡è½¬æ¢** | å¤§é‡æ•°æ®è½¬æ¢ | âš¡âš¡âš¡ 3å€ | â­ ç®€å• |
| **æŒ‰éœ€è½¬æ¢** | å­—æ®µå·®å¼‚å¤§ | âš¡âš¡ 60% | â­â­ ä¸­ç­‰ |
| **ç¼“å­˜ç»“æœ** | é‡å¤æŸ¥è¯¢å¤š | âš¡âš¡âš¡ 10å€+ | â­â­â­ å¤æ‚ |
| **å¼‚æ­¥è½¬æ¢** | éå®æ—¶åœºæ™¯ | âš¡âš¡âš¡ æ˜¾è‘— | â­â­â­ å¤æ‚ |

**æœ€ä½³å®è·µ**ï¼š
```
1. ä¼˜å…ˆç”¨MapStructï¼ˆæ€§èƒ½å¥½ã€ä»£ç å°‘ï¼‰
2. åˆ—è¡¨å’Œè¯¦æƒ…å®šä¹‰ä¸åŒVOï¼ˆæŒ‰éœ€è½¬æ¢ï¼‰
3. é¿å…å¾ªç¯ä¸­é¢‘ç¹è½¬æ¢ï¼ˆæ‰¹é‡å¤„ç†ï¼‰
4. åµŒå¥—ä¸è¶…è¿‡3å±‚ï¼ˆé€’å½’æ€§èƒ½å·®ï¼‰
5. ç¼“å­˜çƒ­ç‚¹æ•°æ®çš„VOï¼ˆå‡å°‘è½¬æ¢ï¼‰
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¯¹è±¡åˆ†å±‚æ ¸å¿ƒè¦ç‚¹


```
ğŸ”¸ PO (æŒä¹…åŒ–å¯¹è±¡)
   â””â”€ æ•°æ®åº“è¡¨çš„é•œåƒï¼Œå­—æ®µä¸€ä¸€å¯¹åº”

ğŸ”¸ DTO (æ•°æ®ä¼ è¾“å¯¹è±¡)  
   â””â”€ ç½‘ç»œä¼ è¾“ç”¨ï¼Œåªè£…å¿…è¦å­—æ®µ

ğŸ”¸ VO (è§†å›¾å¯¹è±¡)
   â””â”€ ç»™å‰ç«¯çœ‹çš„ï¼Œæ ¼å¼åŒ–åçš„æ•°æ®

ğŸ”¸ BO (ä¸šåŠ¡å¯¹è±¡)
   â””â”€ Serviceå±‚å†…éƒ¨ç”¨ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘
```

### 6.2 è½¬æ¢å·¥å…·é€‰æ‹©


```
åœºæ™¯                     æ¨èå·¥å…·
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¼ä¸šçº§é¡¹ç›®ã€å¤§é‡è½¬æ¢     MapStruct â­â­â­â­â­
ç®€å•å­—æ®µå¤åˆ¶             BeanUtils â­â­â­
å¤æ‚ä¸šåŠ¡é€»è¾‘             æ‰‹åŠ¨è½¬æ¢  â­â­â­â­
æ€§èƒ½è¦æ±‚æé«˜             MapStruct â­â­â­â­â­
```

### 6.3 æ·±æ‹·è´vsæµ…æ‹·è´


```
æµ…æ‹·è´ï¼š
â€¢ BeanUtilsã€MapStructé»˜è®¤éƒ½æ˜¯æµ…æ‹·è´
â€¢ å¼•ç”¨ç±»å‹å…±äº«å¯¹è±¡ï¼Œä¿®æ”¹ä¼šç›¸äº’å½±å“
â€¢ é€‚åˆåªè¯»å¯¹è±¡

æ·±æ‹·è´ï¼š
â€¢ å®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡
â€¢ é€šè¿‡JSONåºåˆ—åŒ–å®ç°æœ€ç®€å•
â€¢ é€‚åˆéœ€è¦ç‹¬ç«‹ä¿®æ”¹çš„åœºæ™¯
```

### 6.4 æ€§èƒ½ä¼˜åŒ–å…³é”®ç‚¹


```
âœ… ç”¨MapStructæ‰¹é‡è½¬æ¢ï¼ˆä¸è¦å¾ªç¯BeanUtilsï¼‰
âœ… åˆ—è¡¨å’Œè¯¦æƒ…å®šä¹‰ä¸åŒVOï¼ˆæŒ‰éœ€è½¬æ¢ï¼‰
âœ… æ§åˆ¶åµŒå¥—å±‚çº§ï¼ˆä¸è¶…è¿‡3å±‚ï¼‰
âœ… ç¼“å­˜çƒ­ç‚¹æ•°æ®çš„VOï¼ˆå‡å°‘è½¬æ¢æ¬¡æ•°ï¼‰
```

### 6.5 å®é™…åº”ç”¨å»ºè®®


**æ–°æ‰‹èµ·æ­¥**ï¼š
```
1. å…ˆç†è§£å››ç§å¯¹è±¡çš„åŒºåˆ«
2. ä¼šç”¨BeanUtilsåšç®€å•è½¬æ¢
3. äº†è§£æµ…æ‹·è´çš„é—®é¢˜
```

**è¿›é˜¶æå‡**ï¼š
```
1. æŒæ¡MapStructçš„åŸºæœ¬ç”¨æ³•
2. ç†è§£æ·±æ‹·è´çš„å®ç°æ–¹å¼
3. çŸ¥é“ä»€ä¹ˆåœºæ™¯ç”¨ä»€ä¹ˆè½¬æ¢
```

**ä¼ä¸šå®æˆ˜**ï¼š
```
1. å…¨é¢ä½¿ç”¨MapStruct
2. å®šä¹‰æ¸…æ™°çš„åˆ†å±‚å¯¹è±¡
3. åšå¥½æ€§èƒ½ä¼˜åŒ–
4. æ³¨æ„æ•°æ®å®‰å…¨ï¼ˆä¸æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼‰
```

---

**ğŸ¯ æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
POå­˜æ•°æ®åº“ï¼ŒDTOèµ°ç½‘ç»œ
VOç»™å‰ç«¯çœ‹ï¼ŒBOåšä¸šåŠ¡æ´»
MapStructæ€§èƒ½é«˜ï¼ŒBeanUtilså¤Ÿç®€å•
æµ…æ‹·è´è¦å°å¿ƒï¼Œæ·±æ‹·è´ä¿å®‰å…¨
æ‰¹é‡è½¬æ¢å¿«ï¼ŒåµŒå¥—åˆ«å¤ªæ·±
æŒ‰éœ€å®šä¹‰VOï¼Œç¼“å­˜ææ€§èƒ½
```