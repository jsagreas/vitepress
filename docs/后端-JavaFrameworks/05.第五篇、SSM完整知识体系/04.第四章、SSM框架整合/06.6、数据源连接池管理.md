---
title: 6ã€æ•°æ®æºè¿æ¥æ± ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [è¿æ¥æ± åŸºç¡€æ¦‚å¿µ](#1-è¿æ¥æ± åŸºç¡€æ¦‚å¿µ)
2. [ä¸»æµè¿æ¥æ± é…ç½®è¯¦è§£](#2-ä¸»æµè¿æ¥æ± é…ç½®è¯¦è§£)
3. [è¿æ¥æ± æ€§èƒ½è°ƒä¼˜](#3-è¿æ¥æ± æ€§èƒ½è°ƒä¼˜)
4. [ç›‘æ§ä¸é—®é¢˜è¯Šæ–­](#4-ç›‘æ§ä¸é—®é¢˜è¯Šæ–­)
5. [é«˜çº§åº”ç”¨åœºæ™¯](#5-é«˜çº§åº”ç”¨åœºæ™¯)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è¿æ¥æ± åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“è¿æ¥æ± 


> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**  
> æ•°æ®åº“è¿æ¥å°±åƒå»é“¶è¡ŒåŠä¸šåŠ¡ï¼š  
> âŒ **æ²¡æœ‰è¿æ¥æ± **ï¼šæ¯æ¬¡åŠä¸šåŠ¡éƒ½è¦é‡æ–°æ’é˜Ÿå–å·ï¼ˆå»ºç«‹è¿æ¥æ…¢ï¼‰  
> âœ… **æœ‰è¿æ¥æ± **ï¼šæå‰å‡†å¤‡å¥½å‡ ä¸ªçª—å£ï¼Œæ¥äº†å°±èƒ½åŠï¼ˆå¤ç”¨è¿æ¥å¿«ï¼‰

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
```
æ•°æ®åº“è¿æ¥æ±  = é¢„å…ˆåˆ›å»ºå¥½çš„è¿æ¥ + ç»Ÿä¸€ç®¡ç† + å¾ªç¯å¤ç”¨

å°±åƒåœè½¦åœºï¼š
- è½¦ä½æ•°é‡å›ºå®šï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰
- æœ‰è½¦å°±åœï¼Œæ»¡äº†å°±ç­‰ï¼ˆè¿æ¥å¤ç”¨ï¼‰
- å®šæœŸæ£€æŸ¥è½¦ä½çŠ¶æ€ï¼ˆè¿æ¥æœ‰æ•ˆæ€§æ£€æµ‹ï¼‰
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± 


**ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜**ï¼š

```
æ¯æ¬¡è®¿é—®æ•°æ®åº“çš„æµç¨‹ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ åˆ›å»ºè¿æ¥ â†’ æ‰§è¡ŒSQL â†’ å…³é—­è¿æ¥

é—®é¢˜åˆ†æï¼š
â±ï¸ åˆ›å»ºè¿æ¥è€—æ—¶ï¼šçº¦100-200ms
ğŸ”„ é«˜å¹¶å‘åœºæ™¯ï¼š1000ä¸ªè¯·æ±‚ = 1000æ¬¡åˆ›å»ºè¿æ¥
ğŸ’¥ ç³»ç»Ÿå´©æºƒï¼šæ•°æ®åº“è¿æ¥æ•°æœ‰ä¸Šé™ï¼ˆå¦‚MySQLé»˜è®¤151ä¸ªï¼‰
```

**è¿æ¥æ± çš„ä¼˜åŠ¿**ï¼š

```
ğŸš€ æ€§èƒ½æå‡
- å¤ç”¨è¿æ¥ï¼Œé¿å…é‡å¤åˆ›å»º
- å“åº”æ—¶é—´ä»200ms â†’ 5ms

ğŸ’ª ç¨³å®šæ€§å¼º  
- æ§åˆ¶æœ€å¤§è¿æ¥æ•°ï¼Œé˜²æ­¢æ•°æ®åº“å´©æºƒ
- è‡ªåŠ¨æ£€æµ‹å¤±æ•ˆè¿æ¥å¹¶é‡å»º

âš¡ èµ„æºä¼˜åŒ–
- ç»Ÿä¸€ç®¡ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸ
- æ”¯æŒç›‘æ§å’Œç»Ÿè®¡åˆ†æ
```

### 1.3 è¿æ¥æ± å·¥ä½œåŸç†


```
æ ¸å¿ƒæœºåˆ¶æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            åº”ç”¨ç¨‹åºè¯·æ±‚æ•°æ®åº“è¿æ¥              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ è¿æ¥æ± ä¸­æœ‰ç©ºé—²? â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                 â†“
    ã€æœ‰ç©ºé—²ã€‘         ã€æ— ç©ºé—²ã€‘
        â†“                 â†“
   ç›´æ¥åˆ†é…          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“            â”‚ æ˜¯å¦è¾¾ä¸Šé™? â”‚
   ä½¿ç”¨è¿æ¥          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â†“                  â†“
   å½’è¿˜è¿æ¥          ç­‰å¾…æˆ–æ–°å»º
        â†“                  â†“
   é‡æ–°è¿›å…¥æ±         ç»§ç»­æµç¨‹
```

**å…³é”®å‚æ•°è¯´æ˜**ï¼š

| å‚æ•°ç±»å‹ | **å«ä¹‰** | **ä½œç”¨** |
|---------|---------|---------|
| `åˆå§‹è¿æ¥æ•°` | å¯åŠ¨æ—¶åˆ›å»ºçš„è¿æ¥æ•°é‡ | åº”å¯¹åŸºç¡€è´Ÿè½½ |
| `æœ€å°ç©ºé—²æ•°` | æ± ä¸­ä¿æŒçš„æœ€å°‘è¿æ¥ | ä¿è¯å¿«é€Ÿå“åº” |
| `æœ€å¤§è¿æ¥æ•°` | æ± ä¸­å…è®¸çš„æœ€å¤šè¿æ¥ | é˜²æ­¢èµ„æºè€—å°½ |
| `è¶…æ—¶æ—¶é—´` | è·å–è¿æ¥çš„ç­‰å¾…æ—¶é•¿ | é¿å…æ— é™ç­‰å¾… |

---

## 2. ğŸ”§ ä¸»æµè¿æ¥æ± é…ç½®è¯¦è§£


### 2.1 Druidè¿æ¥æ± ï¼ˆé˜¿é‡Œå·´å·´å‡ºå“ï¼‰


> ğŸ“– **æŠ€æœ¯å®šä½**  
> Druidæ˜¯é˜¿é‡Œå¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œæœ€å¤§ç‰¹ç‚¹æ˜¯**å¼ºå¤§çš„ç›‘æ§åŠŸèƒ½**å’Œ**SQLé˜²ç«å¢™**

#### ğŸ“‹ Mavenä¾èµ–é…ç½®


```xml
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>druid-spring-boot-starter</artifactId>
    <version>1.2.16</version>
</dependency>
```

#### âš™ï¸ Spring Booté…ç½®æ–‡ä»¶


```yaml
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      # åŸºç¡€è¿æ¥é…ç½®
      url: jdbc:mysql://localhost:3306/mydb?useSSL=false
      username: root
      password: 123456
      driver-class-name: com.mysql.cj.jdbc.Driver
      
      # è¿æ¥æ± æ ¸å¿ƒå‚æ•°
      initial-size: 5          # åˆå§‹è¿æ¥æ•°
      min-idle: 5              # æœ€å°ç©ºé—²è¿æ¥
      max-active: 20           # æœ€å¤§æ´»è·ƒè¿æ¥
      max-wait: 60000          # è·å–è¿æ¥è¶…æ—¶æ—¶é—´(ms)
      
      # è¿æ¥å¥åº·æ£€æµ‹
      test-while-idle: true              # ç©ºé—²æ—¶æ£€æµ‹
      test-on-borrow: false              # å€Ÿå‡ºæ—¶æ£€æµ‹(å½±å“æ€§èƒ½)
      test-on-return: false              # å½’è¿˜æ—¶æ£€æµ‹
      validation-query: SELECT 1         # æ£€æµ‹SQL
      time-between-eviction-runs-millis: 60000  # æ£€æµ‹é—´éš”
      
      # è¿æ¥å­˜æ´»æ§åˆ¶
      min-evictable-idle-time-millis: 300000    # æœ€å°ç©ºé—²æ—¶é•¿
      max-evictable-idle-time-millis: 900000    # æœ€å¤§ç©ºé—²æ—¶é•¿
      
      # ç›‘æ§ç»Ÿè®¡é…ç½®
      filters: stat,wall,log4j2    # å¯ç”¨ç»Ÿè®¡ã€é˜²ç«å¢™ã€æ—¥å¿—
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: "*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"
      
      stat-view-servlet:
        enabled: true
        url-pattern: /druid/*
        reset-enable: false
        login-username: admin
        login-password: admin123
```

#### ğŸ¯ å…³é”®é…ç½®è¯´æ˜


```
ğŸ”¸ initial-sizeï¼ˆåˆå§‹è¿æ¥æ•°ï¼‰
æ¨èå€¼ï¼š5-10
è¯´æ˜ï¼šåº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºçš„è¿æ¥æ•°ï¼Œå¤ªå¤šæµªè´¹èµ„æºï¼Œå¤ªå°‘å¯åŠ¨æ…¢

ğŸ”¸ max-activeï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰  
è®¡ç®—å…¬å¼ï¼š(æ ¸å¿ƒä¸šåŠ¡å¹¶å‘é‡ Ã— 1.2) Ã· æ¯ä¸ªè¿æ¥å¤„ç†æ—¶é—´(ç§’)
ç¤ºä¾‹ï¼š100ä¸ªå¹¶å‘ï¼Œæ¯ä¸ªè¯·æ±‚0.1ç§’ â†’ (100 Ã— 1.2) Ã· 0.1 = 1200
å®é™…æ¨èï¼š20-50ï¼ˆæ ¹æ®å®é™…å‹æµ‹ï¼‰

ğŸ”¸ max-waitï¼ˆè¶…æ—¶æ—¶é—´ï¼‰
æ¨èå€¼ï¼š3000-60000ms
è¯´æ˜ï¼šè¶…è¿‡æ­¤æ—¶é—´è·å–ä¸åˆ°è¿æ¥ä¼šæŠ›å¼‚å¸¸

ğŸ”¸ validation-queryï¼ˆæ£€æµ‹SQLï¼‰
MySQL: SELECT 1
Oracle: SELECT 1 FROM DUAL  
PostgreSQL: SELECT 1
```

#### ğŸ“Š ç›‘æ§ç•Œé¢è®¿é—®


è®¿é—®åœ°å€ï¼š`http://localhost:8080/druid/index.html`

```
ç›‘æ§åŠŸèƒ½æ¸…å•ï¼š
âœ… SQLç›‘æ§ï¼šæŸ¥çœ‹æ‰§è¡Œæ¬¡æ•°ã€è€—æ—¶
âœ… URIç›‘æ§ï¼šæ¥å£è®¿é—®ç»Ÿè®¡  
âœ… Springç›‘æ§ï¼šæ–¹æ³•è°ƒç”¨è¿½è¸ª
âœ… SQLé˜²ç«å¢™ï¼šæ‹¦æˆªå±é™©SQL
âœ… JSON APIï¼š/druid/stat.json
```

---

### 2.2 HikariCPè¿æ¥æ± ï¼ˆSpring Booté»˜è®¤ï¼‰


> ğŸ“– **æŠ€æœ¯å®šä½**  
> HikariCPè¢«ç§°ä¸º"å…‰é€Ÿè¿æ¥æ± "ï¼Œä»¥**æ€§èƒ½æè‡´**è‘—ç§°ï¼ŒSpring Boot 2.xé»˜è®¤é€‰æ‹©

#### ğŸš€ æ€§èƒ½ä¼˜åŠ¿


```
æ€§èƒ½å¯¹æ¯”ï¼ˆåŒç­‰æ¡ä»¶ä¸‹ï¼‰ï¼š
HikariCP:  å“åº”æ—¶é—´ 2-3ms
Druid:     å“åº”æ—¶é—´ 5-8ms  
C3P0:      å“åº”æ—¶é—´ 15-20ms

ä¼˜åŒ–æŠ€æœ¯ï¼š
âš¡ å­—èŠ‚ç çº§ä¼˜åŒ–ï¼ˆé¿å…åå°„ï¼‰
âš¡ å¹¶å‘é›†åˆä¼˜åŒ–ï¼ˆConcurrentBagï¼‰
âš¡ ä»£ç†ä¼˜åŒ–ï¼ˆFastListä»£æ›¿ArrayListï¼‰
```

#### âš™ï¸ Spring Booté…ç½®


```yaml
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    hikari:
      # è¿æ¥æ± é…ç½®
      minimum-idle: 10                    # æœ€å°ç©ºé—²è¿æ¥
      maximum-pool-size: 20               # æœ€å¤§è¿æ¥æ•°
      connection-timeout: 30000           # è¿æ¥è¶…æ—¶(ms)
      idle-timeout: 600000                # ç©ºé—²è¶…æ—¶(ms)
      max-lifetime: 1800000               # æœ€å¤§å­˜æ´»æ—¶é—´(ms)
      
      # è¿æ¥æ£€æµ‹
      connection-test-query: SELECT 1
      
      # è¿æ¥å±æ€§
      data-source-properties:
        cachePrepStmts: true              # é¢„ç¼–è¯‘ç¼“å­˜
        prepStmtCacheSize: 250            # ç¼“å­˜å¤§å°
        prepStmtCacheSqlLimit: 2048       # ç¼“å­˜SQLé•¿åº¦
        useServerPrepStmts: true          # ä½¿ç”¨æœåŠ¡ç«¯é¢„ç¼–è¯‘
```

#### ğŸ’¡ æœ€ä½³å®è·µå»ºè®®


```
ğŸ¯ å‚æ•°æ¨èå€¼ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

ä¸­å°å‹åº”ç”¨ï¼ˆ100-500 QPSï¼‰ï¼š
minimum-idle: 10
maximum-pool-size: 20
connection-timeout: 30000
idle-timeout: 600000

å¤§å‹åº”ç”¨ï¼ˆ500-2000 QPSï¼‰ï¼š
minimum-idle: 20  
maximum-pool-size: 50
connection-timeout: 20000
idle-timeout: 300000

âš ï¸ æ³¨æ„äº‹é¡¹ï¼š
- maximum-pool-sizeä¸è¦è¶…è¿‡æ•°æ®åº“æœ€å¤§è¿æ¥æ•°çš„80%
- minimum-idleé€šå¸¸è®¾ä¸ºmaximum-pool-sizeçš„50%
- ä¸å»ºè®®è®¾ç½®connection-test-queryï¼ˆå½±å“æ€§èƒ½ï¼‰
```

---

### 2.3 C3P0è¿æ¥æ± ï¼ˆä¼ ç»Ÿé€‰æ‹©ï¼‰


> ğŸ“– **æŠ€æœ¯å®šä½**  
> C3P0æ˜¯è€ç‰Œè¿æ¥æ± ï¼ŒåŠŸèƒ½å®Œå–„ä½†æ€§èƒ½ä¸€èˆ¬ï¼Œç°åœ¨é€æ¸è¢«æ–°è¿æ¥æ± æ›¿ä»£

#### âš™ï¸ é…ç½®ç¤ºä¾‹


```xml
<!-- Mavenä¾èµ– -->
<dependency>
    <groupId>com.mchange</groupId>
    <artifactId>c3p0</artifactId>
    <version>0.9.5.5</version>
</dependency>
```

```java
// Javaé…ç½®æ–¹å¼
@Bean
public DataSource dataSource() {
    ComboPooledDataSource dataSource = new ComboPooledDataSource();
    
    // åŸºç¡€é…ç½®
    dataSource.setDriverClass("com.mysql.cj.jdbc.Driver");
    dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");
    dataSource.setUser("root");
    dataSource.setPassword("123456");
    
    // è¿æ¥æ± å‚æ•°
    dataSource.setInitialPoolSize(5);          // åˆå§‹è¿æ¥
    dataSource.setMinPoolSize(5);              // æœ€å°è¿æ¥
    dataSource.setMaxPoolSize(20);             // æœ€å¤§è¿æ¥
    dataSource.setMaxIdleTime(1800);           // æœ€å¤§ç©ºé—²æ—¶é—´(ç§’)
    
    // è¿æ¥æ£€æµ‹
    dataSource.setTestConnectionOnCheckout(false);
    dataSource.setTestConnectionOnCheckin(false);
    dataSource.setIdleConnectionTestPeriod(60);
    
    return dataSource;
}
```

#### ğŸ”„ ä¸‰å¤§è¿æ¥æ± å¯¹æ¯”


| ç‰¹æ€§å¯¹æ¯” | **HikariCP** | **Druid** | **C3P0** |
|---------|-------------|-----------|----------|
| **æ€§èƒ½** | â­â­â­â­â­ æœ€å¿« | â­â­â­â­ å¿« | â­â­â­ ä¸€èˆ¬ |
| **ç›‘æ§** | â­â­ åŸºç¡€ | â­â­â­â­â­ å¼ºå¤§ | â­â­ åŸºç¡€ |
| **ç¨³å®šæ€§** | â­â­â­â­â­ ä¼˜ç§€ | â­â­â­â­ è‰¯å¥½ | â­â­â­â­ è‰¯å¥½ |
| **ç¤¾åŒºæ´»è·ƒ** | â­â­â­â­â­ æ´»è·ƒ | â­â­â­â­ æ´»è·ƒ | â­â­ åœæ» |
| **é€‚ç”¨åœºæ™¯** | `é«˜æ€§èƒ½è¦æ±‚` | `ç›‘æ§éœ€æ±‚å¼º` | `è€é¡¹ç›®ç»´æŠ¤` |

---

## 3. âš¡ è¿æ¥æ± æ€§èƒ½è°ƒä¼˜


### 3.1 æ ¸å¿ƒå‚æ•°è°ƒä¼˜ç­–ç•¥


#### ğŸ¯ æœ€å¤§è¿æ¥æ•°è®¡ç®—


```
å…¬å¼æ³•ï¼ˆç†è®ºå€¼ï¼‰ï¼š
æœ€å¤§è¿æ¥æ•° = (æ ¸å¿ƒçº¿ç¨‹æ•° Ã— 2) + ç£ç›˜æ•°é‡

ç¤ºä¾‹ï¼š
4æ ¸CPUï¼Œ1ä¸ªç£ç›˜ â†’ (4 Ã— 2) + 1 = 9ä¸ªè¿æ¥

å‹æµ‹æ³•ï¼ˆå®é™…æ¨èï¼‰ï¼š
1ï¸âƒ£ åˆå§‹è®¾ç½®ï¼š20ä¸ªè¿æ¥
2ï¸âƒ£ å‹åŠ›æµ‹è¯•ï¼šæ¨¡æ‹ŸçœŸå®ä¸šåŠ¡
3ï¸âƒ£ ç›‘æ§æŒ‡æ ‡ï¼šç­‰å¾…æ—¶é—´ã€å“åº”æ—¶é—´
4ï¸âƒ£ é€æ­¥è°ƒæ•´ï¼šå¢åŠ æˆ–å‡å°‘è¿æ¥æ•°
5ï¸âƒ£ æ‰¾åˆ°å¹³è¡¡ï¼šæ€§èƒ½æœ€ä¼˜ä¸”ç¨³å®šçš„å€¼
```

> âš ï¸ **é¿å…è¯¯åŒº**  
> âŒ è¿æ¥æ•°ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼  
> - è¿‡å¤šï¼šæµªè´¹å†…å­˜ï¼Œæ•°æ®åº“å‹åŠ›å¤§  
> - è¿‡å°‘ï¼šè¯·æ±‚ç­‰å¾…ï¼Œå“åº”å˜æ…¢  
> âœ… æ‰¾åˆ°"å¤Ÿç”¨ä¸”ä¸æµªè´¹"çš„å¹³è¡¡ç‚¹

#### ğŸ“Š è¿æ¥è¶…æ—¶é…ç½®


```
â±ï¸ è·å–è¿æ¥è¶…æ—¶ï¼ˆmax-waitï¼‰

è®¾ç½®åŸåˆ™ï¼š
- æ­£å¸¸ä¸šåŠ¡ï¼š30ç§’ï¼ˆ30000msï¼‰
- å¿«é€Ÿå“åº”ï¼š5ç§’ï¼ˆ5000msï¼‰  
- æ‰¹å¤„ç†ï¼š60ç§’ï¼ˆ60000msï¼‰

ä»£ç ç¤ºä¾‹ï¼š
max-wait: 30000  # è¶…è¿‡30ç§’æŠ›å¼‚å¸¸ï¼Œé¿å…ç”¨æˆ·æ— é™ç­‰å¾…
```

#### ğŸ” è¿æ¥æ£€æµ‹ä¼˜åŒ–


```
æ£€æµ‹ç­–ç•¥å¯¹æ¯”ï¼š

æ–¹æ¡ˆ1ï¸âƒ£ï¼štest-on-borrowï¼ˆå€Ÿå‡ºæ—¶æ£€æµ‹ï¼‰
- ä¼˜ç‚¹ï¼šä¿è¯æ‹¿åˆ°çš„è¿æ¥100%å¯ç”¨
- ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½æ£€æµ‹ï¼Œæ€§èƒ½å¼€é”€å¤§
- é€‚ç”¨ï¼šå¯¹å¯ç”¨æ€§è¦æ±‚æé«˜çš„åœºæ™¯

æ–¹æ¡ˆ2ï¸âƒ£ï¼štest-while-idleï¼ˆç©ºé—²æ—¶æ£€æµ‹ï¼‰âœ… æ¨è
- ä¼˜ç‚¹ï¼šåå°æ£€æµ‹ï¼Œä¸å½±å“ä¸šåŠ¡æ€§èƒ½
- ç¼ºç‚¹ï¼šå¯èƒ½æ‹¿åˆ°åˆšå¤±æ•ˆçš„è¿æ¥ï¼ˆæ¦‚ç‡æä½ï¼‰
- é€‚ç”¨ï¼šå¤§å¤šæ•°ç”Ÿäº§ç¯å¢ƒ

é…ç½®ç¤ºä¾‹ï¼š
test-while-idle: true
test-on-borrow: false
time-between-eviction-runs-millis: 60000  # æ¯åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡
```

### 3.2 è¿æ¥æ³„æ¼é¢„é˜²


#### ğŸ”’ ä»€ä¹ˆæ˜¯è¿æ¥æ³„æ¼


```
è¿æ¥æ³„æ¼ = è¿æ¥è¢«å€Ÿå‡ºåï¼Œæ²¡æœ‰æ­£ç¡®å½’è¿˜

å…¸å‹åœºæ™¯ï¼š
âŒ é”™è¯¯ä»£ç ï¼š
Connection conn = dataSource.getConnection();
// æ‰§è¡ŒSQL...
// å¿˜è®°å…³é—­ï¼connä¸€ç›´è¢«å ç”¨

âœ… æ­£ç¡®ä»£ç ï¼š
try (Connection conn = dataSource.getConnection()) {
    // æ‰§è¡ŒSQL...
} // è‡ªåŠ¨å…³é—­è¿æ¥
```

#### ğŸ›¡ï¸ æ³„æ¼æ£€æµ‹é…ç½®


**Druidé…ç½®**ï¼š
```yaml
druid:
  remove-abandoned: true              # å¯ç”¨æ³„æ¼æ£€æµ‹
  remove-abandoned-timeout: 180       # 180ç§’æœªå½’è¿˜åˆ¤å®šæ³„æ¼
  log-abandoned: true                 # è®°å½•æ³„æ¼æ—¥å¿—
```

**HikariCPé…ç½®**ï¼š
```yaml
hikari:
  leak-detection-threshold: 60000     # 60ç§’æœªå½’è¿˜è­¦å‘Š
```

#### ğŸ“ æ—¥å¿—ç¤ºä¾‹


```
æ£€æµ‹åˆ°è¿æ¥æ³„æ¼æ—¶çš„æ—¥å¿—ï¼š

[WARN] Connection leak detected:
  Thread: http-nio-8080-exec-5
  Method: com.example.UserService.getUser()
  Time: 65000ms (è¶…è¿‡60ç§’é˜ˆå€¼)
  Stack: ...getUserInfo() line 45
```

---

## 4. ğŸ“ˆ ç›‘æ§ä¸é—®é¢˜è¯Šæ–­


### 4.1 Druidç›‘æ§é¢æ¿


#### ğŸ–¥ï¸ ç›‘æ§ç»´åº¦


```
æ ¸å¿ƒç›‘æ§æŒ‡æ ‡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¿æ¥æ± çŠ¶æ€ç›‘æ§              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ´»è·ƒè¿æ¥æ•°    â”‚  8 / 20             â”‚
â”‚ ç©ºé—²è¿æ¥æ•°    â”‚  12                 â”‚
â”‚ ç­‰å¾…çº¿ç¨‹æ•°    â”‚  0                  â”‚
â”‚ åˆ›å»ºè¿æ¥æ¬¡æ•°  â”‚  20                 â”‚
â”‚ é”€æ¯è¿æ¥æ¬¡æ•°  â”‚  5                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SQLç›‘æ§è¡¨**ï¼š

| SQLè¯­å¥ | **æ‰§è¡Œæ¬¡æ•°** | **å¹³å‡è€—æ—¶** | **æœ€å¤§è€—æ—¶** | **é”™è¯¯æ¬¡æ•°** |
|---------|------------|------------|------------|------------|
| `SELECT * FROM user` | 1500 | 5ms | 120ms | 0 |
| `UPDATE order SET ...` | 800 | 15ms | 500ms | 2 |
| `INSERT INTO log ...` | 3200 | 3ms | 80ms | 0 |

#### ğŸ” æ…¢æŸ¥è¯¢ç›‘æ§


```yaml
druid:
  filter:
    stat:
      enabled: true
      log-slow-sql: true            # è®°å½•æ…¢SQL
      slow-sql-millis: 1000         # è¶…è¿‡1ç§’ä¸ºæ…¢SQL
      merge-sql: true               # åˆå¹¶ç›¸åŒSQL
```

**æ…¢SQLæ—¥å¿—**ï¼š
```
[2025-01-15 10:30:15] SLOW SQL (2350ms)
SQL: SELECT * FROM user WHERE status = ? AND create_time > ?
Parameters: [1, 2025-01-01]
Suggestion: æ·»åŠ ç´¢å¼• idx_status_createtime
```

### 4.2 å¸¸è§é—®é¢˜è¯Šæ–­


#### ğŸš¨ è¿æ¥æ± è€—å°½


**ç°è±¡**ï¼š
```
é”™è¯¯ä¿¡æ¯ï¼š
java.sql.SQLException: 
  Cannot get a connection, pool exhausted
  
æ—¥å¿—è¡¨ç°ï¼š
- æ´»è·ƒè¿æ¥æ•° = æœ€å¤§è¿æ¥æ•°
- ç­‰å¾…çº¿ç¨‹æ•° > 0
- è·å–è¿æ¥è€—æ—¶å¼‚å¸¸å¢é•¿
```

**æ’æŸ¥æ­¥éª¤**ï¼š
```
1ï¸âƒ£ æ£€æŸ¥è¿æ¥æ³„æ¼
   druid.remove-abandoned=true å¼€å¯æ£€æµ‹

2ï¸âƒ£ åˆ†ææ…¢SQL
   æŸ¥çœ‹ç›‘æ§ä¸­çš„æ…¢SQLåˆ—è¡¨

3ï¸âƒ£ è¯„ä¼°å¹¶å‘é‡
   å½“å‰QPSæ˜¯å¦è¶…å‡ºè®¾è®¡å®¹é‡

4ï¸âƒ£ è°ƒæ•´å‚æ•°
   å¢åŠ max-activeï¼ˆéœ€è¯„ä¼°æ•°æ®åº“æ‰¿å—åŠ›ï¼‰
```

#### â±ï¸ è·å–è¿æ¥è¶…æ—¶


**è§£å†³æ–¹æ¡ˆ**ï¼š

```
åŸå› åˆ†æå†³ç­–æ ‘ï¼š

è¿æ¥è¶…æ—¶
    â”‚
    â”œâ”€â†’ æœ€å¤§è¿æ¥æ•°å¤ªå°ï¼Ÿ
    â”‚       â””â”€â†’ å¢åŠ max-active
    â”‚
    â”œâ”€â†’ SQLæ‰§è¡Œå¤ªæ…¢ï¼Ÿ
    â”‚       â””â”€â†’ ä¼˜åŒ–SQLã€æ·»åŠ ç´¢å¼•
    â”‚
    â”œâ”€â†’ æœ‰è¿æ¥æ³„æ¼ï¼Ÿ
    â”‚       â””â”€â†’ ä¿®å¤ä»£ç ã€å¯ç”¨æ£€æµ‹
    â”‚
    â””â”€â†’ æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆï¼Ÿ
            â””â”€â†’ æ•°æ®åº“æ‰©å®¹ã€è¯»å†™åˆ†ç¦»
```

#### ğŸ”¥ è¿æ¥é¢‘ç¹åˆ›å»ºé”€æ¯


**ä¼˜åŒ–é…ç½®**ï¼š
```yaml
# é—®é¢˜ï¼šè¿æ¥ä¸æ–­åˆ›å»ºå’Œé”€æ¯ï¼Œæ€§èƒ½æŸè€—å¤§
# åŸå› ï¼šmin-idleè®¾ç½®å¤ªå°ï¼Œç©ºé—²è¿æ¥è¢«è¿‡æ—©å›æ”¶

ä¼˜åŒ–å‰ï¼š
min-idle: 2
max-active: 20
min-evictable-idle-time-millis: 60000  # 1åˆ†é’Ÿå°±å›æ”¶

ä¼˜åŒ–åï¼š
min-idle: 10                           # ä¿æŒè¶³å¤Ÿç©ºé—²
max-active: 20
min-evictable-idle-time-millis: 300000 # 5åˆ†é’Ÿå†å›æ”¶
```

---

## 5. ğŸŒŸ é«˜çº§åº”ç”¨åœºæ™¯


### 5.1 å¤šæ•°æ®æºé…ç½®


#### ğŸ“Š åº”ç”¨åœºæ™¯


```
ä½¿ç”¨åœºæ™¯ï¼š
âœ… è¯»å†™åˆ†ç¦»ï¼šä¸»åº“å†™ï¼Œä»åº“è¯»
âœ… åˆ†åº“åˆ†è¡¨ï¼šè®¢å•åº“ã€ç”¨æˆ·åº“åˆ†ç¦»
âœ… å¤šç§Ÿæˆ·ï¼šä¸åŒå®¢æˆ·ç‹¬ç«‹æ•°æ®åº“
```

#### âš™ï¸ Spring Booté…ç½®


```yaml
spring:
  datasource:
    # ä¸»æ•°æ®æº
    master:
      url: jdbc:mysql://master-db:3306/mydb
      username: root
      password: 123456
      driver-class-name: com.mysql.cj.jdbc.Driver
      hikari:
        maximum-pool-size: 20
    
    # ä»æ•°æ®æº
    slave:
      url: jdbc:mysql://slave-db:3306/mydb
      username: readonly
      password: 123456
      driver-class-name: com.mysql.cj.jdbc.Driver
      hikari:
        maximum-pool-size: 30  # è¯»æ“ä½œå¤šï¼Œè¿æ¥å¯ä»¥å¤šä¸€äº›
```

#### ğŸ’» Javaé…ç½®ç±»


```java
@Configuration
public class DataSourceConfig {
    
    // ä¸»æ•°æ®æº
    @Bean
    @ConfigurationProperties("spring.datasource.master")
    public DataSource masterDataSource() {
        return DataSourceBuilder.create().build();
    }
    
    // ä»æ•°æ®æº
    @Bean
    @ConfigurationProperties("spring.datasource.slave")
    public DataSource slaveDataSource() {
        return DataSourceBuilder.create().build();
    }
    
    // åŠ¨æ€æ•°æ®æºè·¯ç”±
    @Bean
    public DataSource dynamicDataSource() {
        DynamicDataSource dataSource = new DynamicDataSource();
        
        Map<Object, Object> targetDataSources = new HashMap<>();
        targetDataSources.put("master", masterDataSource());
        targetDataSources.put("slave", slaveDataSource());
        
        dataSource.setTargetDataSources(targetDataSources);
        dataSource.setDefaultTargetDataSource(masterDataSource());
        
        return dataSource;
    }
}
```

#### ğŸ¯ ä½¿ç”¨æ³¨è§£åˆ‡æ¢æ•°æ®æº


```java
// è‡ªå®šä¹‰æ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface DataSource {
    String value() default "master";
}

// Serviceå±‚ä½¿ç”¨
@Service
public class UserService {
    
    @DataSource("master")  // ä½¿ç”¨ä¸»åº“
    public void saveUser(User user) {
        // å†™æ“ä½œ
    }
    
    @DataSource("slave")   // ä½¿ç”¨ä»åº“
    public User getUser(Long id) {
        // è¯»æ“ä½œ
    }
}
```

### 5.2 è¯»å†™åˆ†ç¦»å®ç°


#### ğŸ”„ å·¥ä½œåŸç†


```
è¯»å†™åˆ†ç¦»æµç¨‹ï¼š

ç”¨æˆ·è¯·æ±‚
    â”‚
    â”œâ”€â†’ å†™æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰
    â”‚       â””â”€â†’ ä¸»åº“ï¼ˆMasterï¼‰
    â”‚               â””â”€â†’ æ•°æ®åŒæ­¥
    â”‚                       â””â”€â†’ ä»åº“ï¼ˆSlaveï¼‰
    â”‚
    â””â”€â†’ è¯»æ“ä½œï¼ˆSELECTï¼‰
            â””â”€â†’ ä»åº“ï¼ˆSlaveï¼‰
                    â””â”€â†’ è´Ÿè½½å‡è¡¡ï¼ˆå¤šä¸ªä»åº“è½®è¯¢ï¼‰
```

#### âš™ï¸ è‡ªåŠ¨è·¯ç”±é…ç½®


```java
public class DynamicDataSource extends AbstractRoutingDataSource {
    
    @Override
    protected Object determineCurrentLookupKey() {
        // æ ¹æ®å½“å‰æ“ä½œç±»å‹é€‰æ‹©æ•°æ®æº
        return DataSourceContextHolder.getDataSourceType();
    }
}

// AOPåˆ‡é¢è‡ªåŠ¨åˆ¤æ–­
@Aspect
@Component
public class DataSourceAspect {
    
    @Before("@annotation(dataSource)")
    public void switchDataSource(DataSource dataSource) {
        DataSourceContextHolder.setDataSourceType(dataSource.value());
    }
    
    @After("@annotation(dataSource)")
    public void restoreDataSource() {
        DataSourceContextHolder.clearDataSourceType();
    }
}
```

#### ğŸ“Š æ€§èƒ½å¯¹æ¯”


```
è¯»å†™åˆ†ç¦»æ•ˆæœï¼ˆå®é™…æ¡ˆä¾‹ï¼‰ï¼š

ä¼˜åŒ–å‰ï¼ˆå•åº“ï¼‰ï¼š
- å¹¶å‘ï¼š500 QPS
- å“åº”æ—¶é—´ï¼š150ms
- æ•°æ®åº“CPUï¼š85%

ä¼˜åŒ–åï¼ˆ1ä¸»2ä»ï¼‰ï¼š
- å¹¶å‘ï¼š1500 QPS  â¬†ï¸ 3å€
- å“åº”æ—¶é—´ï¼š50ms   â¬‡ï¸ 67%
- ä¸»åº“CPUï¼š45%     â¬‡ï¸ 47%
- ä»åº“CPUï¼š35%     è´Ÿè½½åˆ†æ•£
```

### 5.3 åˆ†åº“åˆ†è¡¨æ”¯æŒ


#### ğŸ“¦ Sharding-JDBCé›†æˆ


```xml
<dependency>
    <groupId>org.apache.shardingsphere</groupId>
    <artifactId>sharding-jdbc-spring-boot-starter</artifactId>
    <version>4.1.1</version>
</dependency>
```

#### âš™ï¸ åˆ†ç‰‡é…ç½®


```yaml
spring:
  shardingsphere:
    datasource:
      names: ds0,ds1
      
      ds0:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://localhost:3306/order_db0
        
      ds1:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://localhost:3306/order_db1
    
    sharding:
      tables:
        t_order:
          actual-data-nodes: ds$->{0..1}.t_order_$->{0..3}
          # åˆ†åº“ç­–ç•¥ï¼šæŒ‰ç”¨æˆ·IDå–æ¨¡
          database-strategy:
            inline:
              sharding-column: user_id
              algorithm-expression: ds$->{user_id % 2}
          # åˆ†è¡¨ç­–ç•¥ï¼šæŒ‰è®¢å•IDå–æ¨¡
          table-strategy:
            inline:
              sharding-column: order_id
              algorithm-expression: t_order_$->{order_id % 4}
```

#### ğŸ¯ åˆ†ç‰‡ç­–ç•¥è¯´æ˜


```
åˆ†åº“åˆ†è¡¨è§„åˆ™ç¤ºä¾‹ï¼š

ç”¨æˆ·ID=123ï¼Œè®¢å•ID=456

1ï¸âƒ£ è®¡ç®—æ•°æ®åº“ï¼š
   user_id % 2 = 123 % 2 = 1 â†’ ds1

2ï¸âƒ£ è®¡ç®—è¡¨ï¼š
   order_id % 4 = 456 % 4 = 0 â†’ t_order_0

3ï¸âƒ£ æœ€ç»ˆè·¯ç”±ï¼š
   æ•°æ®å­˜å‚¨åœ¨ ds1.t_order_0

æ•°æ®åˆ†å¸ƒï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®åº“ â”‚         è¡¨              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ds0   â”‚ t_order_0, t_order_1   â”‚
â”‚        â”‚ t_order_2, t_order_3   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ds1   â”‚ t_order_0, t_order_1   â”‚
â”‚        â”‚ t_order_2, t_order_3   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 è¿æ¥æ± é€‰å‹æŒ‡å—


```
ğŸ¯ é€‰æ‹©å†³ç­–æ ‘ï¼š

éœ€è¦å¼ºå¤§ç›‘æ§ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ Druidï¼ˆç›‘æ§ã€SQLé˜²ç«å¢™ï¼‰
    â””â”€ å¦ â†“
         è¿½æ±‚æè‡´æ€§èƒ½ï¼Ÿ
            â”œâ”€ æ˜¯ â†’ HikariCPï¼ˆSpring Booté»˜è®¤ï¼‰
            â””â”€ å¦ â†’ è€é¡¹ç›®C3P0ï¼ˆä¸æ¨èæ–°é¡¹ç›®ï¼‰
```

### 6.2 å…³é”®å‚æ•°é€ŸæŸ¥è¡¨


| å‚æ•° | **HikariCP** | **Druid** | **æ¨èå€¼** |
|------|-------------|-----------|-----------|
| **æœ€å¤§è¿æ¥æ•°** | `maximum-pool-size` | `max-active` | `20-50` |
| **æœ€å°ç©ºé—²** | `minimum-idle` | `min-idle` | `10-20` |
| **è¶…æ—¶æ—¶é—´** | `connection-timeout` | `max-wait` | `30000ms` |
| **ç©ºé—²å›æ”¶** | `idle-timeout` | `min-evictable-idle-time-millis` | `600000ms` |
| **è¿æ¥æ£€æµ‹** | - | `test-while-idle` | `true` |

### 6.3 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•


```
âœ… æ€§èƒ½ä¼˜åŒ–è‡ªæ£€è¡¨

â–¡ è¿æ¥æ± ç±»å‹é€‰æ‹©åˆç†
â–¡ æœ€å¤§è¿æ¥æ•°ç»è¿‡å‹æµ‹éªŒè¯
â–¡ å¯ç”¨ç©ºé—²è¿æ¥æ£€æµ‹
â–¡ é…ç½®æ…¢SQLç›‘æ§
â–¡ å¼€å¯è¿æ¥æ³„æ¼æ£€æµ‹
â–¡ é¢„ç¼–è¯‘è¯­å¥ç¼“å­˜å¼€å¯ï¼ˆMySQLï¼‰
â–¡ å®šæœŸæŸ¥çœ‹ç›‘æ§æ•°æ®
â–¡ æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–å®Œæˆ
```

### 6.4 æ•…éšœæ’æŸ¥è¦ç‚¹


```
ğŸ” é—®é¢˜è¯Šæ–­æµç¨‹ï¼š

è·å–è¿æ¥å¤±è´¥
    â†“
æ£€æŸ¥ç›‘æ§é¢æ¿
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ´»è·ƒè¿æ¥ = æœ€å¤§è¿æ¥ï¼Ÿ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ˜¯ â†’ è¿æ¥æ± è€—å°½                 â”‚
â”‚      â””â†’ æ£€æŸ¥æ…¢SQL/è¿æ¥æ³„æ¼      â”‚
â”‚                                 â”‚
â”‚ å¦ â†’ æ•°æ®åº“å¼‚å¸¸                 â”‚
â”‚      â””â†’ æ£€æŸ¥ç½‘ç»œ/æ•°æ®åº“çŠ¶æ€     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 å®æˆ˜ç»éªŒæ€»ç»“


> ğŸ§  **æ ¸å¿ƒè®°å¿†å£è¯€**

```
è¿æ¥æ± é€‰å‹çœ‹éœ€æ±‚ï¼Œæ€§èƒ½ç›‘æ§å„æœ‰ä¼˜
å‚æ•°è°ƒä¼˜é å‹æµ‹ï¼Œæ³„æ¼æ£€æµ‹ä¸èƒ½ä¸¢
è¯»å†™åˆ†ç¦»ææ€§èƒ½ï¼Œåˆ†åº“åˆ†è¡¨è§£ç“¶é¢ˆ
ç›‘æ§æ—¥å¿—è¦å¸¸çœ‹ï¼Œä¼˜åŒ–è¿­ä»£æ°¸ä¸ä¼‘
```

**æœ€ä½³å®è·µå»ºè®®**ï¼š

```
ğŸ¯ æ–°æ‰‹å»ºè®®
1ï¸âƒ£ ä¼˜å…ˆé€‰HikariCPï¼ˆSpring Booté»˜è®¤ï¼Œçœå¿ƒï¼‰
2ï¸âƒ£ éœ€è¦ç›‘æ§é€‰Druidï¼ˆåŠŸèƒ½å¼ºå¤§ï¼Œå¯è§†åŒ–å¥½ï¼‰
3ï¸âƒ£ å‚æ•°ä»ä¿å®ˆå¼€å§‹ï¼ˆmax-active=20ï¼‰
4ï¸âƒ£ é€æ­¥å‹æµ‹è°ƒä¼˜ï¼ˆæ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ï¼‰

âš¡ è¿›é˜¶ä¼˜åŒ–
1ï¸âƒ£ ä¸šåŠ¡åˆ†æï¼šè¯»å¤šç”¨è¯»å†™åˆ†ç¦»
2ï¸âƒ£ æ•°æ®é‡å¤§ï¼šè€ƒè™‘åˆ†åº“åˆ†è¡¨
3ï¸âƒ£ å¤šç§Ÿæˆ·ï¼šé…ç½®å¤šæ•°æ®æº
4ï¸âƒ£ æŒç»­ç›‘æ§ï¼šå®šæœŸæŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
```

---

> ğŸ’¡ **å­¦ä¹ å»ºè®®**  
> 
> è¿æ¥æ± é…ç½®æ˜¯**å®è·µæ€§å¾ˆå¼º**çš„æŠ€èƒ½ï¼Œå»ºè®®ï¼š
> 
> 1. æœ¬åœ°æ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œå®é™…æ“ä½œé…ç½®
> 2. ä½¿ç”¨JMeterè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œè§‚å¯Ÿæ€§èƒ½å˜åŒ–
> 3. è®¿é—®Druidç›‘æ§é¢æ¿ï¼Œç†Ÿæ‚‰å„é¡¹æŒ‡æ ‡
> 4. å°è¯•æ¨¡æ‹Ÿè¿æ¥æ³„æ¼ï¼Œå­¦ä¹ è¯Šæ–­æ–¹æ³•
> 
> **è®°ä½**ï¼šå‚æ•°é…ç½®æ²¡æœ‰ç»å¯¹æ ‡å‡†ç­”æ¡ˆï¼Œåªæœ‰é€‚åˆè‡ªå·±ä¸šåŠ¡çš„æœ€ä¼˜è§£ï¼