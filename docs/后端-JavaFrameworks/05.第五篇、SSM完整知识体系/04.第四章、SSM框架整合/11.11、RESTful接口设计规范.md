---
title: 11ã€RESTfulæ¥å£è®¾è®¡è§„èŒƒ
---
## ğŸ“š ç›®å½•

1. [RESTfulåŸºç¡€æ¦‚å¿µ](#1-RESTfulåŸºç¡€æ¦‚å¿µ)
2. [HTTPçŠ¶æ€ç è§„èŒƒ](#2-HTTPçŠ¶æ€ç è§„èŒƒ)
3. [URLè·¯å¾„è®¾è®¡è§„èŒƒ](#3-URLè·¯å¾„è®¾è®¡è§„èŒƒ)
4. [è¯·æ±‚å‚æ•°è§„èŒƒ](#4-è¯·æ±‚å‚æ•°è§„èŒƒ)
5. [å“åº”æ•°æ®æ ¼å¼è§„èŒƒ](#5-å“åº”æ•°æ®æ ¼å¼è§„èŒƒ)
6. [æ¥å£å¹‚ç­‰æ€§è®¾è®¡](#6-æ¥å£å¹‚ç­‰æ€§è®¾è®¡)
7. [æ¥å£ç‰ˆæœ¬ç®¡ç†ç­–ç•¥](#7-æ¥å£ç‰ˆæœ¬ç®¡ç†ç­–ç•¥)
8. [æ¥å£å®‰å…¨è®¤è¯](#8-æ¥å£å®‰å…¨è®¤è¯)
9. [æ¥å£é™æµç­–ç•¥](#9-æ¥å£é™æµç­–ç•¥)
10. [æ¥å£æ–‡æ¡£è§„èŒƒ](#10-æ¥å£æ–‡æ¡£è§„èŒƒ)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ RESTfulåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯RESTful


**é€šä¿—ç†è§£**ï¼šRESTfulå°±æ˜¯ä¸€ç§è®¾è®¡ç½‘ç»œæ¥å£çš„"è§„çŸ©"ï¼Œè®©å‰åç«¯æ²Ÿé€šæ›´æ¸…æ™°ã€‚

```
æ—¥å¸¸ç±»æ¯”ï¼š
å›¾ä¹¦é¦†å€Ÿä¹¦ â†’ RESTæ¥å£è®¾è®¡

å€Ÿä¹¦ï¼ˆè·å–ï¼‰ï¼šGET /books/123
è¿˜ä¹¦ï¼ˆæ›´æ–°ï¼‰ï¼šPUT /books/123/return  
é¢„çº¦ï¼ˆåˆ›å»ºï¼‰ï¼šPOST /books/123/reserve
å–æ¶ˆï¼ˆåˆ é™¤ï¼‰ï¼šDELETE /books/123/reserve

æŠŠæ“ä½œå˜æˆç»Ÿä¸€çš„"åŠ¨ä½œ+èµ„æº"æ¨¡å¼
```

**æ ¸å¿ƒæ€æƒ³**ï¼š
- **ä»¥èµ„æºä¸ºä¸­å¿ƒ**ï¼šä¸€åˆ‡çš†èµ„æºï¼ˆç”¨æˆ·ã€è®¢å•ã€å•†å“...ï¼‰
- **ç”¨HTTPæ–¹æ³•è¡¨è¾¾æ“ä½œ**ï¼šGETæŸ¥è¯¢ã€POSTæ–°å¢ã€PUTä¿®æ”¹ã€DELETEåˆ é™¤
- **æ— çŠ¶æ€é€šä¿¡**ï¼šæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸è®°å½•ä¸Šæ¬¡è¯·æ±‚

### 1.2 RESTçš„å…­å¤§è®¾è®¡åŸåˆ™


**ğŸ”¸ å®¢æˆ·ç«¯-æœåŠ¡å™¨åˆ†ç¦»**
```
å‰ç«¯ä¸“å¿ƒåšç•Œé¢å±•ç¤º
åç«¯ä¸“å¿ƒåšæ•°æ®å¤„ç†
ä¸¤è€…é€šè¿‡æ¥å£é€šä¿¡ï¼Œå„å¸å…¶èŒ
```

**ğŸ”¸ æ— çŠ¶æ€æ€§**
```
æ¯ä¸ªè¯·æ±‚éƒ½åŒ…å«å®Œæ•´ä¿¡æ¯
æœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€
â†’ ä¼˜ç‚¹ï¼šæœåŠ¡å™¨å‹åŠ›å°ï¼Œæ˜“æ‰©å±•
â†’ ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½è¦ä¼ tokenç­‰è®¤è¯ä¿¡æ¯
```

**ğŸ”¸ å¯ç¼“å­˜æ€§**
```
GETè¯·æ±‚çš„æ•°æ®å¯ä»¥ç¼“å­˜
å‡å°‘é‡å¤è¯·æ±‚ï¼Œæå‡æ€§èƒ½
```

**ğŸ”¸ ç»Ÿä¸€æ¥å£**
```
æ‰€æœ‰èµ„æºç”¨ç»Ÿä¸€æ–¹å¼è®¿é—®
ç”¨URLå®šä½èµ„æº
ç”¨HTTPæ–¹æ³•è¡¨è¾¾æ“ä½œ
```

**ğŸ”¸ åˆ†å±‚ç³»ç»Ÿ**
```
å®¢æˆ·ç«¯ â†’ è´Ÿè½½å‡è¡¡ â†’ åº”ç”¨æœåŠ¡å™¨ â†’ æ•°æ®åº“
å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“ä¸­é—´æœ‰å‡ å±‚
```

**ğŸ”¸ æŒ‰éœ€ä»£ç ï¼ˆå¯é€‰ï¼‰**
```
æœåŠ¡å™¨å¯ä»¥è¿”å›å¯æ‰§è¡Œä»£ç 
æ¯”å¦‚è¿”å›JavaScriptè®©æµè§ˆå™¨æ‰§è¡Œ
```

### 1.3 RESTful vs ä¼ ç»Ÿæ¥å£


| å¯¹æ¯”é¡¹ | **RESTfulé£æ ¼** | **ä¼ ç»Ÿé£æ ¼** |
|--------|----------------|-------------|
| è·å–ç”¨æˆ· | `GET /users/123` | `getUserById?id=123` |
| åˆ›å»ºç”¨æˆ· | `POST /users` | `createUser` |
| æ›´æ–°ç”¨æˆ· | `PUT /users/123` | `updateUser?id=123` |
| åˆ é™¤ç”¨æˆ· | `DELETE /users/123` | `deleteUser?id=123` |
| **ç‰¹ç‚¹** | `URLè¡¨ç¤ºèµ„æºï¼Œæ–¹æ³•è¡¨ç¤ºæ“ä½œ` | `URLè¡¨ç¤ºæ“ä½œï¼Œå‚æ•°ä¼ é€’èµ„æº` |

**ğŸ’¡ ä¸ºä»€ä¹ˆè¦ç”¨RESTful**ï¼š
- âœ… æ¥å£è¯­ä¹‰æ¸…æ™°ï¼Œä¸€çœ‹å°±æ‡‚
- âœ… å‰åç«¯ç»Ÿä¸€è§„èŒƒï¼Œé™ä½æ²Ÿé€šæˆæœ¬
- âœ… ç¬¦åˆHTTPåè®®è®¾è®¡ï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜
- âœ… æ˜“äºç†è§£å’Œç»´æŠ¤

---

## 2. ğŸ“Š HTTPçŠ¶æ€ç è§„èŒƒ


### 2.1 çŠ¶æ€ç çš„ä½œç”¨


**é€šä¿—ç†è§£**ï¼šçŠ¶æ€ç å°±åƒå¿«é€’å‘˜å‘Šè¯‰ä½ åŒ…è£¹çŠ¶æ€çš„å°çº¸æ¡

```
200 â†’ "åŒ…è£¹å·²é€è¾¾" âœ…
404 â†’ "æ‰¾ä¸åˆ°åœ°å€" âŒ  
500 â†’ "å¿«é€’å…¬å¸å‡ºæ•…éšœäº†" âš ï¸
```

### 2.2 å¸¸ç”¨çŠ¶æ€ç è¯¦è§£


#### ğŸŸ¢ 2xx æˆåŠŸçŠ¶æ€ç 


| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|-------|---------|-------------|---------|
| **200** | `è¯·æ±‚æˆåŠŸ` | `GETæŸ¥è¯¢ã€PUTæ›´æ–°æˆåŠŸ` | `è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ` |
| **201** | `èµ„æºåˆ›å»ºæˆåŠŸ` | `POSTåˆ›å»ºæˆåŠŸ` | `æ³¨å†Œç”¨æˆ·æˆåŠŸ` |
| **204** | `æˆåŠŸä½†æ— è¿”å›å†…å®¹` | `DELETEåˆ é™¤æˆåŠŸ` | `åˆ é™¤è®¢å•æˆåŠŸ` |

```java
// 200 OK - æŸ¥è¯¢æˆåŠŸ
@GetMapping("/users/{id}")
public User getUser(@PathVariable Long id) {
    return userService.getById(id);
    // è¿”å›ï¼š200 + ç”¨æˆ·æ•°æ®
}

// 201 Created - åˆ›å»ºæˆåŠŸ
@PostMapping("/users")
public ResponseEntity<User> createUser(@RequestBody User user) {
    User saved = userService.save(user);
    return ResponseEntity.status(201).body(saved);
    // è¿”å›ï¼š201 + æ–°ç”¨æˆ·æ•°æ®
}

// 204 No Content - åˆ é™¤æˆåŠŸ
@DeleteMapping("/users/{id}")
public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
    userService.deleteById(id);
    return ResponseEntity.noContent().build();
    // è¿”å›ï¼š204 + ç©ºå†…å®¹
}
```

#### ğŸŸ¡ 4xx å®¢æˆ·ç«¯é”™è¯¯


| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|-------|---------|-------------|---------|
| **400** | `è¯·æ±‚å‚æ•°é”™è¯¯` | `å‚æ•°æ ¼å¼ä¸å¯¹ã€ç¼ºå°‘å¿…å¡«é¡¹` | `é‚®ç®±æ ¼å¼ä¸æ­£ç¡®` |
| **401** | `æœªè®¤è¯` | `æ²¡ç™»å½•ã€tokenè¿‡æœŸ` | `è¯·å…ˆç™»å½•` |
| **403** | `æ— æƒé™` | `ç™»å½•äº†ä½†æƒé™ä¸å¤Ÿ` | `æ‚¨æ— æƒè®¿é—®æ­¤èµ„æº` |
| **404** | `èµ„æºä¸å­˜åœ¨` | `æ‰¾ä¸åˆ°æ•°æ®` | `ç”¨æˆ·ä¸å­˜åœ¨` |
| **409** | `èµ„æºå†²çª` | `æ•°æ®é‡å¤ã€çŠ¶æ€å†²çª` | `ç”¨æˆ·åå·²å­˜åœ¨` |

```java
// 400 Bad Request - å‚æ•°é”™è¯¯
{
    "code": 400,
    "message": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
    "field": "email"
}

// 401 Unauthorized - æœªç™»å½•
{
    "code": 401,
    "message": "è¯·å…ˆç™»å½•",
    "redirect": "/login"
}

// 404 Not Found - èµ„æºä¸å­˜åœ¨
{
    "code": 404,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "userId": 123
}
```

#### ğŸ”´ 5xx æœåŠ¡å™¨é”™è¯¯


| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|-------|---------|-------------|---------|
| **500** | `æœåŠ¡å™¨å†…éƒ¨é”™è¯¯` | `ç¨‹åºå¼‚å¸¸ã€æ•°æ®åº“é”™è¯¯` | `ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•` |
| **502** | `ç½‘å…³é”™è¯¯` | `ä¸Šæ¸¸æœåŠ¡æŒ‚äº†` | `æœåŠ¡æš‚æ—¶ä¸å¯ç”¨` |
| **503** | `æœåŠ¡ä¸å¯ç”¨` | `ç³»ç»Ÿç»´æŠ¤ã€è¿‡è½½` | `ç³»ç»Ÿç»´æŠ¤ä¸­` |

### 2.3 çŠ¶æ€ç ä½¿ç”¨å»ºè®®


**ğŸ“Œ é€‰æ‹©åŸåˆ™**ï¼š

**âœ… æ­£ç¡®ç¤ºä¾‹**ï¼š
```
HTTP 404
{
    "code": 404,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨"
}
```

**âŒ é”™è¯¯ç¤ºä¾‹**ï¼š
```
HTTP 200  // çŠ¶æ€ç è¯´æˆåŠŸ
{
    "code": 404,  // ä¸šåŠ¡ç è¯´å¤±è´¥
    "success": false,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨"  // åˆ°åº•æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Ÿ
}
```

**ä½¿ç”¨å»ºè®®**ï¼š
- âœ… ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çŠ¶æ€ç 
- âœ… ä¸€ä¸ªæ¥å£å¯¹åº”æ˜ç¡®çš„çŠ¶æ€ç 
- âœ… ä¸è¦æ‰€æœ‰é”™è¯¯éƒ½è¿”å›200

---

## 3. ğŸ”— URLè·¯å¾„è®¾è®¡è§„èŒƒ


### 3.1 URLè®¾è®¡åŸºæœ¬åŸåˆ™


**ğŸ”¸ ä½¿ç”¨åè¯ï¼Œä¸ä½¿ç”¨åŠ¨è¯**

**âŒ é”™è¯¯ç¤ºä¾‹**ï¼š
```
GET /getUser?id=123
POST /createOrder
DELETE /deleteProduct/456
```

**âœ… æ­£ç¡®ç¤ºä¾‹**ï¼š
```
GET /users/123          // è·å–ç”¨æˆ·
POST /orders            // åˆ›å»ºè®¢å•
DELETE /products/456    // åˆ é™¤å•†å“
```

**ğŸ”¸ ç”¨å¤æ•°å½¢å¼è¡¨ç¤ºèµ„æºé›†åˆ**

**âŒ å•æ•°å½¢å¼**ï¼š
```
GET /user/123
GET /order
```

**âœ… å¤æ•°å½¢å¼**ï¼š
```
GET /users/123          // æ›´æ¸…æ™°ï¼Œè¡¨ç¤ºä»ç”¨æˆ·é›†åˆä¸­è·å–
GET /orders             // è¡¨ç¤ºè·å–è®¢å•åˆ—è¡¨
```

**ğŸ”¸ ä½¿ç”¨å°å†™å­—æ¯ï¼Œç”¨è¿å­—ç¬¦åˆ†éš”**

**âŒ ä¸è§„èŒƒ**ï¼š
```
/UserProfile
/user_orders
/getOrderList
```

**âœ… è§„èŒƒ**ï¼š
```
/user-profile
/user-orders
/order-list
```

### 3.2 èµ„æºå±‚çº§è®¾è®¡


**å±‚çº§å…³ç³»è¡¨è¾¾**ï¼š

```
ç”¨æˆ·çš„è®¢å•ï¼š
GET /users/123/orders           // è·å–ç”¨æˆ·123çš„æ‰€æœ‰è®¢å•
GET /users/123/orders/456       // è·å–ç”¨æˆ·123çš„è®¢å•456

è®¢å•çš„å•†å“ï¼š
GET /orders/456/items           // è·å–è®¢å•456çš„æ‰€æœ‰å•†å“
GET /orders/456/items/789       // è·å–è®¢å•456çš„å•†å“789

å±‚çº§ç»“æ„ï¼š
/èµ„æº1/{id}/èµ„æº2/{id}/èµ„æº3
```

**âš ï¸ é¿å…å±‚çº§è¿‡æ·±**ï¼š

**âŒ å±‚çº§å¤ªæ·±**ï¼š
```
GET /users/123/orders/456/items/789/reviews/101
```

**âœ… ç®€åŒ–å±‚çº§**ï¼š
```
GET /order-items/789/reviews/101
æˆ–ç›´æ¥ï¼š
GET /reviews/101
```

### 3.3 æŸ¥è¯¢å‚æ•°ä½¿ç”¨


**è¿‡æ»¤ã€æ’åºã€åˆ†é¡µ**ï¼š

```java
// è¿‡æ»¤æ¡ä»¶
GET /users?status=active&role=admin
// å«ä¹‰ï¼šè·å–çŠ¶æ€ä¸ºactiveä¸”è§’è‰²ä¸ºadminçš„ç”¨æˆ·

// æ’åº
GET /products?sort=price_desc
// å«ä¹‰ï¼šæŒ‰ä»·æ ¼é™åºæ’åˆ—å•†å“

// åˆ†é¡µ
GET /orders?page=1&size=20
// å«ä¹‰ï¼šè·å–ç¬¬1é¡µï¼Œæ¯é¡µ20æ¡è®¢å•

// ç»„åˆä½¿ç”¨
GET /users?status=active&sort=created_desc&page=1&size=10
// å«ä¹‰ï¼šè·å–æ´»è·ƒç”¨æˆ·ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´é™åºï¼Œç¬¬1é¡µ10æ¡æ•°æ®
```

### 3.4 ç‰¹æ®Šæ“ä½œçš„URLè®¾è®¡


**éæ ‡å‡†CRUDæ“ä½œ**ï¼š

```
æ‰¹é‡æ“ä½œï¼š
POST /users/batch-delete
è¯·æ±‚ä½“ï¼š{"ids": [1, 2, 3]}

çŠ¶æ€å˜æ›´ï¼š
PUT /orders/123/cancel      // å–æ¶ˆè®¢å•
PUT /orders/123/complete    // å®Œæˆè®¢å•
PUT /users/123/activate     // æ¿€æ´»ç”¨æˆ·

å¤æ‚æŸ¥è¯¢ï¼š
POST /users/search          // å¤æ‚æœç´¢ï¼ˆæ¡ä»¶å¤ªå¤šç”¨POSTï¼‰
è¯·æ±‚ä½“ï¼š{"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}

æ–‡ä»¶æ“ä½œï¼š
POST /users/123/avatar      // ä¸Šä¼ å¤´åƒ
GET /files/download/123     // ä¸‹è½½æ–‡ä»¶
```

### 3.5 URLè®¾è®¡å¯¹ç…§è¡¨


| åŠŸèƒ½ | **URLè®¾è®¡** | **HTTPæ–¹æ³•** | **è¯´æ˜** |
|------|-----------|-------------|---------|
| è·å–åˆ—è¡¨ | `/users` | `GET` | `è·å–æ‰€æœ‰ç”¨æˆ·` |
| è·å–è¯¦æƒ… | `/users/123` | `GET` | `è·å–IDä¸º123çš„ç”¨æˆ·` |
| åˆ›å»ºèµ„æº | `/users` | `POST` | `åˆ›å»ºæ–°ç”¨æˆ·` |
| æ›´æ–°èµ„æº | `/users/123` | `PUT` | `å®Œæ•´æ›´æ–°ç”¨æˆ·123` |
| éƒ¨åˆ†æ›´æ–° | `/users/123` | `PATCH` | `éƒ¨åˆ†æ›´æ–°ç”¨æˆ·123` |
| åˆ é™¤èµ„æº | `/users/123` | `DELETE` | `åˆ é™¤ç”¨æˆ·123` |
| å­èµ„æº | `/users/123/orders` | `GET` | `è·å–ç”¨æˆ·123çš„è®¢å•` |
| ç‰¹æ®Šæ“ä½œ | `/users/123/reset-password` | `POST` | `é‡ç½®ç”¨æˆ·123çš„å¯†ç ` |

---

## 4. ğŸ“ è¯·æ±‚å‚æ•°è§„èŒƒ


### 4.1 å‚æ•°ä¼ é€’æ–¹å¼


**ğŸ”¸ è·¯å¾„å‚æ•°ï¼ˆPath Variableï¼‰**

```java
// ç”¨äºå”¯ä¸€æ ‡è¯†èµ„æº
@GetMapping("/users/{id}")
public User getUser(@PathVariable Long id) {
    return userService.getById(id);
}

// å¤šä¸ªè·¯å¾„å‚æ•°
@GetMapping("/users/{userId}/orders/{orderId}")
public Order getUserOrder(
    @PathVariable Long userId,
    @PathVariable Long orderId
) {
    return orderService.getByUserAndId(userId, orderId);
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… èµ„æºID
- âœ… å¿…å¡«å‚æ•°
- âœ… å±‚çº§å…³ç³»

**ğŸ”¸ æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parameterï¼‰**

```java
// ç”¨äºè¿‡æ»¤ã€æ’åºã€åˆ†é¡µ
@GetMapping("/users")
public List<User> getUsers(
    @RequestParam(required = false) String name,
    @RequestParam(required = false) String status,
    @RequestParam(defaultValue = "1") int page,
    @RequestParam(defaultValue = "10") int size
) {
    return userService.search(name, status, page, size);
}
```

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /users?name=å¼ ä¸‰&status=active&page=1&size=10
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… å¯é€‰å‚æ•°
- âœ… è¿‡æ»¤æ¡ä»¶
- âœ… æ’åºæ–¹å¼
- âœ… åˆ†é¡µå‚æ•°

**ğŸ”¸ è¯·æ±‚ä½“å‚æ•°ï¼ˆRequest Bodyï¼‰**

```java
// ç”¨äºåˆ›å»ºæˆ–æ›´æ–°èµ„æº
@PostMapping("/users")
public User createUser(@RequestBody UserDTO userDTO) {
    return userService.create(userDTO);
}

// å¤æ‚æŸ¥è¯¢æ¡ä»¶
@PostMapping("/users/search")
public List<User> searchUsers(@RequestBody SearchDTO searchDTO) {
    return userService.search(searchDTO);
}
```

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
POST /users
Content-Type: application/json

{
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "age": 25
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… åˆ›å»ºèµ„æº
- âœ… æ›´æ–°èµ„æº
- âœ… å¤æ‚æŸ¥è¯¢æ¡ä»¶
- âœ… æ•°æ®é‡è¾ƒå¤§

**ğŸ”¸ è¯·æ±‚å¤´å‚æ•°ï¼ˆHeaderï¼‰**

```java
// ç”¨äºè®¤è¯ã€å†…å®¹åå•†ç­‰
@GetMapping("/users")
public List<User> getUsers(
    @RequestHeader("Authorization") String token,
    @RequestHeader(value = "Accept-Language", defaultValue = "zh-CN") String lang
) {
    return userService.getAll(lang);
}
```

**å¸¸ç”¨è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer xxx    // è®¤è¯token
Content-Type: application/json    // å†…å®¹ç±»å‹
Accept: application/json    // æœŸæœ›è¿”å›æ ¼å¼
Accept-Language: zh-CN    // è¯­è¨€åå¥½
```

### 4.2 å‚æ•°å‘½åè§„èŒƒ


**å‘½åé£æ ¼**ï¼š

**âœ… ä½¿ç”¨å°é©¼å³°ï¼ˆæ¨èï¼‰**ï¼š
```json
{
    "userId": 123,
    "userName": "å¼ ä¸‰",
    "createdTime": "2025-01-01"
}
```

**æˆ–ä½¿ç”¨ä¸‹åˆ’çº¿**ï¼š
```json
{
    "user_id": 123,
    "user_name": "å¼ ä¸‰",
    "created_time": "2025-01-01"
}
```

**âŒ é¿å…æ··ç”¨**ï¼š
```json
{
    "userId": 123,         // é©¼å³°
    "user_name": "å¼ ä¸‰",   // ä¸‹åˆ’çº¿
    "CreatedTime": "2025-01-01"  // å¤§é©¼å³°
}
```

ğŸ’¡ **å»ºè®®**ï¼šç»Ÿä¸€ä½¿ç”¨å°é©¼å³°ï¼Œä¸Javaå¯¹è±¡å‘½åä¸€è‡´

### 4.3 å‚æ•°æ ¡éªŒè§„èŒƒ


```java
// ä½¿ç”¨JSR-303æ ¡éªŒæ³¨è§£
public class UserDTO {
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦3-20ä¸ªå­—ç¬¦")
    private String username;
    
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @NotNull(message = "å¹´é¾„ä¸èƒ½ä¸ºç©º")
    @Min(value = 18, message = "å¹´é¾„ä¸èƒ½å°äº18å²")
    @Max(value = 100, message = "å¹´é¾„ä¸èƒ½å¤§äº100å²")
    private Integer age;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
}

// Controllerä¸­å¯ç”¨æ ¡éªŒ
@PostMapping("/users")
public User createUser(@Valid @RequestBody UserDTO userDTO) {
    return userService.create(userDTO);
}
```

**å¸¸ç”¨æ ¡éªŒæ³¨è§£**ï¼š

| æ³¨è§£ | **è¯´æ˜** | **ç¤ºä¾‹** |
|------|---------|---------|
| `@NotNull` | `ä¸èƒ½ä¸ºnull` | `@NotNull Integer age` |
| `@NotBlank` | `å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º` | `@NotBlank String name` |
| `@Size` | `é•¿åº¦é™åˆ¶` | `@Size(min=3, max=20)` |
| `@Min/@Max` | `æ•°å€¼èŒƒå›´` | `@Min(18) @Max(100)` |
| `@Email` | `é‚®ç®±æ ¼å¼` | `@Email String email` |
| `@Pattern` | `æ­£åˆ™åŒ¹é…` | `@Pattern(regexp="...")` |

---

## 5. ğŸ“¤ å“åº”æ•°æ®æ ¼å¼è§„èŒƒ


### 5.1 ç»Ÿä¸€å“åº”ç»“æ„


**æ ‡å‡†å“åº”æ ¼å¼**ï¼š

```java
// ç»Ÿä¸€å“åº”åŒ…è£…ç±»
public class Result<T> {
    private Integer code;      // çŠ¶æ€ç 
    private String message;    // æç¤ºä¿¡æ¯
    private T data;           // å“åº”æ•°æ®
    private Long timestamp;   // æ—¶é—´æˆ³
    
    // æˆåŠŸå“åº”
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage("success");
        result.setData(data);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    // å¤±è´¥å“åº”
    public static <T> Result<T> error(Integer code, String message) {
        Result<T> result = new Result<>();
        result.setCode(code);
        result.setMessage(message);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
@GetMapping("/users/{id}")
public Result<User> getUser(@PathVariable Long id) {
    User user = userService.getById(id);
    return Result.success(user);
}
```

**å“åº”ç¤ºä¾‹**ï¼š

**æˆåŠŸå“åº”**ï¼š
```json
{
    "code": 200,
    "message": "success",
    "data": {
        "id": 123,
        "username": "zhangsan",
        "email": "zhangsan@example.com"
    },
    "timestamp": 1640000000000
}
```

**åˆ—è¡¨å“åº”**ï¼š
```json
{
    "code": 200,
    "message": "success",
    "data": {
        "list": [...],
        "total": 100,
        "page": 1,
        "size": 10
    },
    "timestamp": 1640000000000
}
```

**å¤±è´¥å“åº”**ï¼š
```json
{
    "code": 404,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "timestamp": 1640000000000
}
```

### 5.2 åˆ†é¡µæ•°æ®æ ¼å¼


```java
// åˆ†é¡µå“åº”ç±»
public class PageResult<T> {
    private List<T> list;      // æ•°æ®åˆ—è¡¨
    private Long total;        // æ€»è®°å½•æ•°
    private Integer page;      // å½“å‰é¡µç 
    private Integer size;      // æ¯é¡µå¤§å°
    private Integer totalPages; // æ€»é¡µæ•°
    
    // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
    public boolean hasNext() {
        return page < totalPages;
    }
}

// Controllerä½¿ç”¨
@GetMapping("/users")
public Result<PageResult<User>> getUsers(
    @RequestParam(defaultValue = "1") int page,
    @RequestParam(defaultValue = "10") int size
) {
    PageResult<User> pageData = userService.getPage(page, size);
    return Result.success(pageData);
}
```

**åˆ†é¡µå“åº”ç¤ºä¾‹**ï¼š

```json
{
    "code": 200,
    "message": "success",
    "data": {
        "list": [
            {"id": 1, "name": "ç”¨æˆ·1"},
            {"id": 2, "name": "ç”¨æˆ·2"}
        ],
        "total": 100,
        "page": 1,
        "size": 10,
        "totalPages": 10
    },
    "timestamp": 1640000000000
}
```

### 5.3 é”™è¯¯ä¿¡æ¯æ ¼å¼


**è¯¦ç»†é”™è¯¯ä¿¡æ¯**ï¼š

```java
// é”™è¯¯å“åº”ç±»
public class ErrorResult {
    private Integer code;
    private String message;
    private String detail;        // è¯¦ç»†é”™è¯¯ä¿¡æ¯
    private String field;         // é”™è¯¯å­—æ®µï¼ˆå‚æ•°æ ¡éªŒæ—¶ï¼‰
    private Long timestamp;
}
```

**å‚æ•°æ ¡éªŒé”™è¯¯**ï¼š
```json
{
    "code": 400,
    "message": "å‚æ•°æ ¡éªŒå¤±è´¥",
    "detail": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
    "field": "email",
    "timestamp": 1640000000000
}
```

**ä¸šåŠ¡é€»è¾‘é”™è¯¯**ï¼š
```json
{
    "code": 409,
    "message": "ç”¨æˆ·åå·²å­˜åœ¨",
    "detail": "ç”¨æˆ·å'zhangsan'å·²è¢«ä½¿ç”¨ï¼Œè¯·æ›´æ¢",
    "timestamp": 1640000000000
}
```

### 5.4 æ—¶é—´æ ¼å¼è§„èŒƒ


**ä½¿ç”¨ISO 8601æ ¼å¼**ï¼š
```json
{
    "createdTime": "2025-01-01T12:00:00+08:00",  // å¸¦æ—¶åŒº
    "updatedTime": "2025-01-01T12:00:00Z"        // UTCæ—¶é—´
}
```

**æˆ–ä½¿ç”¨æ—¶é—´æˆ³**ï¼š
```json
{
    "createdTime": 1640000000000,  // æ¯«ç§’çº§æ—¶é—´æˆ³
    "updatedTime": 1640000000      // ç§’çº§æ—¶é—´æˆ³
}
```

**Spring Booté…ç½®ç»Ÿä¸€æ—¶é—´æ ¼å¼**ï¼š
```yaml
spring:
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
```

---

## 6. ğŸ”„ æ¥å£å¹‚ç­‰æ€§è®¾è®¡


### 6.1 ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§


**é€šä¿—ç†è§£**ï¼šå¹‚ç­‰æ€§å°±æ˜¯"åŒæ ·çš„æ“ä½œï¼Œæ‰§è¡Œ1æ¬¡å’Œæ‰§è¡ŒNæ¬¡ï¼Œç»“æœæ˜¯ä¸€æ ·çš„"

```
æ—¥å¸¸ç±»æ¯”ï¼š
ç”µæ¢¯æŒ‰é’®ï¼š
- æŒ‰1æ¬¡ â†’ ç”µæ¢¯æ¥
- æŒ‰10æ¬¡ â†’ ç”µæ¢¯è¿˜æ˜¯æ¥ï¼ˆä¸ä¼šæ¥10æ¬¡ï¼‰
â†’ è¿™å°±æ˜¯å¹‚ç­‰çš„

é“¶è¡Œè½¬è´¦ï¼š
- è½¬è´¦1æ¬¡ â†’ æ‰£100å…ƒ
- é‡å¤ç‚¹å‡»è½¬è´¦ â†’ åªæ‰£100å…ƒï¼ˆä¸ä¼šæ‰£Nä¸ª100ï¼‰
â†’ éœ€è¦ä¿è¯å¹‚ç­‰
```

### 6.2 HTTPæ–¹æ³•çš„å¹‚ç­‰æ€§


| HTTPæ–¹æ³• | **å¹‚ç­‰æ€§** | **è¯´æ˜** |
|---------|-----------|---------|
| **GET** | `âœ… å¹‚ç­‰` | `æŸ¥è¯¢æ“ä½œï¼Œå¤šæ¬¡æŸ¥è¯¢ç»“æœä¸€è‡´` |
| **PUT** | `âœ… å¹‚ç­‰` | `å…¨é‡æ›´æ–°ï¼Œå¤šæ¬¡æ›´æ–°ç»“æœç›¸åŒ` |
| **DELETE** | `âœ… å¹‚ç­‰` | `åˆ é™¤æ“ä½œï¼Œå¤šæ¬¡åˆ é™¤ç»“æœä¸€è‡´` |
| **POST** | `âŒ ä¸å¹‚ç­‰` | `åˆ›å»ºæ“ä½œï¼Œå¤šæ¬¡åˆ›å»ºäº§ç”Ÿå¤šæ¡æ•°æ®` |
| **PATCH** | `â“ è§†æƒ…å†µ` | `éƒ¨åˆ†æ›´æ–°ï¼Œå–å†³äºå…·ä½“å®ç°` |

**ç¤ºä¾‹è¯´æ˜**ï¼š

```
PUT /users/123
{
    "name": "å¼ ä¸‰",
    "age": 25
}
â†’ æ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œç”¨æˆ·123çš„ä¿¡æ¯éƒ½æ˜¯ï¼šname=å¼ ä¸‰, age=25
â†’ å¹‚ç­‰ âœ…

POST /users
{
    "name": "å¼ ä¸‰",
    "age": 25
}
â†’ æ¯æ¬¡æ‰§è¡Œéƒ½åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·
â†’ ä¸å¹‚ç­‰ âŒ
```

### 6.3 å¹‚ç­‰æ€§å®ç°æ–¹æ¡ˆ


**ğŸ”¸ æ–¹æ¡ˆä¸€ï¼šå”¯ä¸€ç´¢å¼•**

```java
// æ•°æ®åº“è¡¨æ·»åŠ å”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX uk_order_no ON orders(order_no);

// åˆ›å»ºè®¢å•æ—¶ï¼Œè®¢å•å·é‡å¤ä¼šæŠ¥é”™
@PostMapping("/orders")
public Result<Order> createOrder(@RequestBody OrderDTO dto) {
    try {
        Order order = orderService.create(dto);
        return Result.success(order);
    } catch (DuplicateKeyException e) {
        // è®¢å•å·é‡å¤ï¼Œè¯´æ˜å·²åˆ›å»ºè¿‡
        Order existOrder = orderService.getByOrderNo(dto.getOrderNo());
        return Result.success(existOrder);
    }
}
```

**ä¼˜ç‚¹**ï¼šç®€å•å¯é ï¼Œæ•°æ®åº“å±‚é¢ä¿è¯  
**ç¼ºç‚¹**ï¼šä¾èµ–æ•°æ®åº“ï¼Œæ€§èƒ½ç¨å·®

**ğŸ”¸ æ–¹æ¡ˆäºŒï¼šTokenæœºåˆ¶**

**æµç¨‹è¯´æ˜**ï¼š
```
å®¢æˆ·ç«¯                          æœåŠ¡ç«¯
   |                              |
   |--[1]è·å–æ“ä½œtoken----------->|
   |                              |ç”Ÿæˆå”¯ä¸€token
   |<-[2]è¿”å›token----------------|å­˜å…¥Redis,è®¾ç½®è¿‡æœŸæ—¶é—´
   |                              |
   |--[3]æäº¤æ“ä½œ+token---------->|
   |                              |æ ¡éªŒtokenæ˜¯å¦å­˜åœ¨
   |                              |åˆ é™¤token
   |                              |æ‰§è¡Œä¸šåŠ¡æ“ä½œ
   |<-[4]è¿”å›ç»“æœ-----------------|
   |                              |
   |--[5]é‡å¤æäº¤+token---------->|
   |                              |tokenå·²åˆ é™¤,æ‹’ç»è¯·æ±‚
   |<-[6]è¿”å›"è¯·å‹¿é‡å¤æäº¤"--------|
```

```java
// 1. è·å–tokenæ¥å£
@GetMapping("/payment/token")
public Result<String> getPaymentToken() {
    String token = UUID.randomUUID().toString();
    // å­˜å…¥Redisï¼Œ30åˆ†é’Ÿè¿‡æœŸ
    redisTemplate.opsForValue().set("pay_token:" + token, "1", 30, TimeUnit.MINUTES);
    return Result.success(token);
}

// 2. æ”¯ä»˜æ¥å£ï¼Œéœ€è¦éªŒè¯token
@PostMapping("/payment")
public Result<Payment> pay(@RequestBody PaymentDTO dto) {
    String tokenKey = "pay_token:" + dto.getToken();
    
    // å°è¯•åˆ é™¤tokenï¼ˆåªèƒ½åˆ é™¤ä¸€æ¬¡ï¼‰
    Boolean deleted = redisTemplate.delete(tokenKey);
    if (!deleted) {
        return Result.error(400, "è¯·å‹¿é‡å¤æäº¤");
    }
    
    // æ‰§è¡Œæ”¯ä»˜ä¸šåŠ¡
    Payment payment = paymentService.pay(dto);
    return Result.success(payment);
}
```

**ä¼˜ç‚¹**ï¼šçµæ´»å¯æ§ï¼Œé€‚ç”¨èŒƒå›´å¹¿  
**ç¼ºç‚¹**ï¼šéœ€è¦é¢å¤–è¯·æ±‚è·å–token

**ğŸ”¸ æ–¹æ¡ˆä¸‰ï¼šåˆ†å¸ƒå¼é”**

```java
@PostMapping("/payment")
public Result<Payment> pay(@RequestBody PaymentDTO dto) {
    // ç”¨è®¢å•å·ä½œä¸ºé”çš„key
    String lockKey = "pay_lock:" + dto.getOrderNo();
    
    // è·å–åˆ†å¸ƒå¼é”
    RLock lock = redissonClient.getLock(lockKey);
    try {
        // å°è¯•åŠ é”ï¼Œæœ€å¤šç­‰å¾…10ç§’ï¼Œé”30ç§’åè‡ªåŠ¨é‡Šæ”¾
        boolean locked = lock.tryLock(10, 30, TimeUnit.SECONDS);
        if (!locked) {
            return Result.error(400, "æ“ä½œè¿›è¡Œä¸­ï¼Œè¯·ç¨å");
        }
        
        // æ£€æŸ¥è®¢å•æ˜¯å¦å·²æ”¯ä»˜
        if (paymentService.isPaid(dto.getOrderNo())) {
            return Result.error(400, "è®¢å•å·²æ”¯ä»˜");
        }
        
        // æ‰§è¡Œæ”¯ä»˜
        Payment payment = paymentService.pay(dto);
        return Result.success(payment);
    } finally {
        lock.unlock();
    }
}
```

**ä¼˜ç‚¹**ï¼šå¼ºä¸€è‡´æ€§ä¿è¯  
**ç¼ºç‚¹**ï¼šæ€§èƒ½å¼€é”€è¾ƒå¤§

### 6.4 å¹‚ç­‰æ€§è®¾è®¡å»ºè®®


**ğŸ“Œ é€‰æ‹©ä¾æ®**ï¼š

**æŸ¥è¯¢æ“ä½œ**ï¼š
- å¤©ç„¶å¹‚ç­‰ï¼Œæ— éœ€ç‰¹æ®Šå¤„ç†

**åˆ é™¤æ“ä½œ**ï¼š
- å…ˆæŸ¥è¯¢æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™åˆ é™¤
- ä¸å­˜åœ¨è¿”å›æˆåŠŸï¼ˆå·²åˆ é™¤ï¼‰

**æ›´æ–°æ“ä½œ**ï¼š
- ä½¿ç”¨ä¹è§‚é”ï¼ˆversionå­—æ®µï¼‰
```sql
UPDATE users SET name=?, version=version+1 
WHERE id=? AND version=?
```

**åˆ›å»ºæ“ä½œ**ï¼š
- å”¯ä¸€ç´¢å¼• + ä¸šåŠ¡æµæ°´å·
- Tokenæœºåˆ¶ï¼ˆå‰ç«¯é˜²é‡ï¼‰
- åˆ†å¸ƒå¼é”ï¼ˆåç«¯é˜²å¹¶å‘ï¼‰

**æ”¯ä»˜ç±»æ“ä½œ**ï¼š
- å¿…é¡»ä¿è¯å¹‚ç­‰
- å»ºè®®ï¼šå”¯ä¸€ç´¢å¼• + åˆ†å¸ƒå¼é”

---

## 7. ğŸ”– æ¥å£ç‰ˆæœ¬ç®¡ç†ç­–ç•¥


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬ç®¡ç†


**åœºæ™¯è¯´æ˜**ï¼š

```
é—®é¢˜åœºæ™¯ï¼š
è€ç‰ˆæœ¬APPï¼šæœŸæœ›è¿”å› {"name": "å¼ ä¸‰"}
æ–°ç‰ˆæœ¬APPï¼šæœŸæœ›è¿”å› {"username": "å¼ ä¸‰"}

å¦‚æœç›´æ¥ä¿®æ”¹æ¥å£ï¼š
â†’ è€ç‰ˆæœ¬APPæ— æ³•è¯†åˆ«usernameå­—æ®µ âŒ
â†’ ç”¨æˆ·æŠ•è¯‰ï¼š"æ€ä¹ˆå§“åæ˜¾ç¤ºä¸å‡ºæ¥äº†ï¼Ÿ"

è§£å†³æ–¹æ¡ˆï¼šç‰ˆæœ¬ç®¡ç†
â†’ v1ç‰ˆæœ¬ï¼šè¿”å› name å­—æ®µï¼ˆè€ç”¨æˆ·ï¼‰
â†’ v2ç‰ˆæœ¬ï¼šè¿”å› username å­—æ®µï¼ˆæ–°ç”¨æˆ·ï¼‰
â†’ ä¸¤ä¸ªç‰ˆæœ¬å…±å­˜ï¼Œäº’ä¸å½±å“ âœ…
```

### 7.2 ç‰ˆæœ¬ç®¡ç†æ–¹å¼


**ğŸ”¸ æ–¹å¼ä¸€ï¼šURLè·¯å¾„ç‰ˆæœ¬**

```java
// ç‰ˆæœ¬å†™åœ¨URLè·¯å¾„ä¸­
@RestController
@RequestMapping("/api/v1/users")
public class UserV1Controller {
    @GetMapping("/{id}")
    public Result<UserV1DTO> getUser(@PathVariable Long id) {
        return Result.success(userService.getUserV1(id));
    }
}

@RestController
@RequestMapping("/api/v2/users")
public class UserV2Controller {
    @GetMapping("/{id}")
    public Result<UserV2DTO> getUser(@PathVariable Long id) {
        return Result.success(userService.getUserV2(id));
    }
}
```

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/v1/users/123  // v1ç‰ˆæœ¬
GET /api/v2/users/123  // v2ç‰ˆæœ¬
```

**ä¼˜ç‚¹**ï¼šæ¸…æ™°ç›´è§‚ï¼Œå®¹æ˜“ç†è§£  
**ç¼ºç‚¹**ï¼šURLå˜é•¿ï¼Œå¯èƒ½éœ€è¦ç»´æŠ¤å¤šä¸ªController

**ğŸ”¸ æ–¹å¼äºŒï¼šè¯·æ±‚å¤´ç‰ˆæœ¬**

```java
// é€šè¿‡è¯·æ±‚å¤´æŒ‡å®šç‰ˆæœ¬
@GetMapping("/users/{id}")
public Result<User> getUser(
    @PathVariable Long id,
    @RequestHeader(value = "API-Version", defaultValue = "1") String version
) {
    if ("2".equals(version)) {
        return Result.success(userService.getUserV2(id));
    }
    return Result.success(userService.getUserV1(id));
}
```

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /users/123
API-Version: 1  // v1ç‰ˆæœ¬

GET /users/123
API-Version: 2  // v2ç‰ˆæœ¬
```

**ä¼˜ç‚¹**ï¼šURLä¸å˜ï¼Œçµæ´»  
**ç¼ºç‚¹**ï¼šä¸å¤Ÿç›´è§‚ï¼Œéœ€è¦æŸ¥çœ‹è¯·æ±‚å¤´

**ğŸ”¸ æ–¹å¼ä¸‰ï¼šå‚æ•°ç‰ˆæœ¬**

```java
// é€šè¿‡æŸ¥è¯¢å‚æ•°æŒ‡å®šç‰ˆæœ¬
@GetMapping("/users/{id}")
public Result<User> getUser(
    @PathVariable Long id,
    @RequestParam(defaultValue = "1") String version
) {
    if ("2".equals(version)) {
        return Result.success(userService.getUserV2(id));
    }
    return Result.success(userService.getUserV1(id));
}
```

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /users/123?version=1  // v1ç‰ˆæœ¬
GET /users/123?version=2  // v2ç‰ˆæœ¬
```

**ä¼˜ç‚¹**ï¼šç®€å•ç›´æ¥  
**ç¼ºç‚¹**ï¼šå®¹æ˜“è¢«è¯¯æ“ä½œ

### 7.3 ç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µ


**ğŸ“Œ ç‰ˆæœ¬ç­–ç•¥å»ºè®®**ï¼š

**ç‰ˆæœ¬å·è§„åˆ™**ï¼š
- v1.0 â†’ ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬
- v1 â†’ ç®€åŒ–ç‰ˆæœ¬å·ï¼ˆæ¨èï¼‰

**ç‰ˆæœ¬å‡çº§åœºæ™¯**ï¼š
- âœ… å­—æ®µæ”¹å â†’ æ–°ç‰ˆæœ¬
- âœ… æ•°æ®ç»“æ„å˜åŒ– â†’ æ–°ç‰ˆæœ¬
- âœ… ä¸šåŠ¡é€»è¾‘é‡å¤§è°ƒæ•´ â†’ æ–°ç‰ˆæœ¬
- âŒ Bugä¿®å¤ â†’ ä¸éœ€è¦æ–°ç‰ˆæœ¬
- âŒ æ–°å¢å¯é€‰å­—æ®µ â†’ ä¸éœ€è¦æ–°ç‰ˆæœ¬

**ç‰ˆæœ¬ç»´æŠ¤åŸåˆ™**ï¼š
- åŒæ—¶ç»´æŠ¤2-3ä¸ªç‰ˆæœ¬
- è€ç‰ˆæœ¬è®¾ç½®è¿‡æœŸæ—¶é—´
- æå‰é€šçŸ¥å®¢æˆ·ç«¯å‡çº§
- é€æ­¥ä¸‹çº¿è€ç‰ˆæœ¬

**å…¼å®¹æ€§åŸåˆ™**ï¼š
- **å‘åå…¼å®¹**ï¼šæ–°ä»£ç å…¼å®¹è€æ•°æ®
- **å‘å‰å…¼å®¹**ï¼šè€ä»£ç ç†è§£æ–°æ•°æ®ï¼ˆå¯é€‰ï¼‰

**ç‰ˆæœ¬è¿ç§»ç¤ºä¾‹**ï¼š

```java
// v1: è¿”å›ç®€å•ç”¨æˆ·ä¿¡æ¯
public class UserV1DTO {
    private Long id;
    private String name;
}

// v2: è¿”å›è¯¦ç»†ç”¨æˆ·ä¿¡æ¯
public class UserV2DTO {
    private Long id;
    private String username;    // æ”¹å
    private String nickname;    // æ–°å¢
    private UserProfile profile; // æ–°å¢åµŒå¥—å¯¹è±¡
}

// ç‰ˆæœ¬è½¬æ¢é€»è¾‘
public UserV1DTO toV1(User user) {
    UserV1DTO dto = new UserV1DTO();
    dto.setId(user.getId());
    dto.setName(user.getUsername());  // v1çš„nameå¯¹åº”v2çš„username
    return dto;
}

public UserV2DTO toV2(User user) {
    UserV2DTO dto = new UserV2DTO();
    dto.setId(user.getId());
    dto.setUsername(user.getUsername());
    dto.setNickname(user.getNickname());
    dto.setProfile(user.getProfile());
    return dto;
}
```

---

## 8. ğŸ” æ¥å£å®‰å…¨è®¤è¯


### 8.1 å¸¸è§è®¤è¯æ–¹å¼


**ğŸ”¸ Tokenè®¤è¯ï¼ˆæœ€å¸¸ç”¨ï¼‰**

**è®¤è¯æµç¨‹**ï¼š
```
ç”¨æˆ·                     æœåŠ¡å™¨
 |                        |
 |--[1]ç™»å½•è¯·æ±‚---------->|
 |  (ç”¨æˆ·å+å¯†ç )          |éªŒè¯ç”¨æˆ·åå¯†ç 
 |                        |ç”ŸæˆToken
 |<-[2]è¿”å›Token----------|å­˜å‚¨Token(å¯é€‰)
 |                        |
 |--[3]ä¸šåŠ¡è¯·æ±‚+Token---->|
 |  Header: Authorization |éªŒè¯Tokenæœ‰æ•ˆæ€§
 |                        |è·å–ç”¨æˆ·ä¿¡æ¯
 |<-[4]è¿”å›ä¸šåŠ¡æ•°æ®--------|æ‰§è¡Œä¸šåŠ¡é€»è¾‘
```

**å®ç°ç¤ºä¾‹**ï¼š

```java
// 1. ç™»å½•æ¥å£ï¼Œç”ŸæˆToken
@PostMapping("/login")
public Result<LoginVO> login(@RequestBody LoginDTO dto) {
    // éªŒè¯ç”¨æˆ·åå¯†ç 
    User user = userService.login(dto.getUsername(), dto.getPassword());
    if (user == null) {
        return Result.error(401, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
    }
    
    // ç”ŸæˆTokenï¼ˆä½¿ç”¨JWTï¼‰
    String token = JwtUtil.generateToken(user.getId());
    
    // è¿”å›Token
    LoginVO vo = new LoginVO();
    vo.setToken(token);
    vo.setUser(user);
    return Result.success(vo);
}

// 2. ä¸šåŠ¡æ¥å£ï¼ŒéªŒè¯Token
@GetMapping("/users/me")
public Result<User> getCurrentUser(
    @RequestHeader("Authorization") String authorization
) {
    // è§£æToken
    String token = authorization.replace("Bearer ", "");
    Long userId = JwtUtil.parseToken(token);
    
    // æ ¹æ®userIdè·å–ç”¨æˆ·ä¿¡æ¯
    User user = userService.getById(userId);
    return Result.success(user);
}
```

**ğŸ”¸ Sessionè®¤è¯ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**

**è®¤è¯æµç¨‹**ï¼š
```
ç”¨æˆ·                     æœåŠ¡å™¨
 |                        |
 |--[1]ç™»å½•è¯·æ±‚---------->|
 |  (ç”¨æˆ·å+å¯†ç )          |éªŒè¯ç”¨æˆ·åå¯†ç 
 |                        |åˆ›å»ºSession
 |<-[2]è¿”å›SessionId------|å­˜å‚¨ç”¨æˆ·ä¿¡æ¯åˆ°Session
 |  (é€šè¿‡Cookie)          |
 |                        |
 |--[3]ä¸šåŠ¡è¯·æ±‚+Cookie--->|
 |                        |æ ¹æ®SessionIdè·å–ç”¨æˆ·
 |<-[4]è¿”å›ä¸šåŠ¡æ•°æ®--------|æ‰§è¡Œä¸šåŠ¡é€»è¾‘
```

**ğŸ”¸ OAuth2.0ï¼ˆç¬¬ä¸‰æ–¹ç™»å½•ï¼‰**

**ä½¿ç”¨åœºæ™¯**ï¼š
- å¾®ä¿¡ç™»å½•
- QQç™»å½•
- GitHubç™»å½•

**è®¤è¯æµç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼‰**ï¼š
```
ç”¨æˆ·                åº”ç”¨æœåŠ¡å™¨           å¾®ä¿¡æœåŠ¡å™¨
 |                      |                    |
 |--[1]ç‚¹å‡»å¾®ä¿¡ç™»å½•---->|                    |
 |                      |--[2]é‡å®šå‘åˆ°å¾®ä¿¡--->|
 |<-[3]å¾®ä¿¡æˆæƒé¡µé¢-----|                    |
 |                      |                    |
 |--[4]åŒæ„æˆæƒ-------->|                    |
 |                      |<-[5]è¿”å›æˆæƒç ------|
 |                      |                    |
 |                      |--[6]æˆæƒç æ¢token-->|
 |                      |<-[7]è¿”å›token-------|
 |                      |                    |
 |<-[8]è¿”å›ç™»å½•token----|                    |
```

### 8.2 JWT Tokenè¯¦è§£


**JWTç»“æ„**ï¼š

```
JWT = Header.Payload.Signature
```

**Headerï¼ˆå¤´éƒ¨ï¼‰**ï¼š
```json
{
    "alg": "HS256",      // åŠ å¯†ç®—æ³•
    "typ": "JWT"         // Tokenç±»å‹
}
```

**Payloadï¼ˆè´Ÿè½½ï¼‰**ï¼š
```json
{
    "userId": 123,       // ç”¨æˆ·ID
    "username": "zhangsan",
    "exp": 1640000000    // è¿‡æœŸæ—¶é—´
}
```

**Signatureï¼ˆç­¾åï¼‰**ï¼š
```
HMACSHA256(
    base64UrlEncode(header) + "." + base64UrlEncode(payload),
    secret  // å¯†é’¥
)
```

**æœ€ç»ˆToken**ï¼š
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEyM30.xxxxx
```

**JWTå·¥å…·ç±»**ï¼š

```java
public class JwtUtil {
    private static final String SECRET = "my-secret-key-2025";
    private static final long EXPIRE_TIME = 7 * 24 * 60 * 60 * 1000; // 7å¤©
    
    // ç”ŸæˆToken
    public static String generateToken(Long userId) {
        Date expireDate = new Date(System.currentTimeMillis() + EXPIRE_TIME);
        
        return Jwts.builder()
            .setSubject(userId.toString())
            .setExpiration(expireDate)
            .signWith(SignatureAlgorithm.HS256, SECRET)
            .compact();
    }
    
    // è§£æToken
    public static Long parseToken(String token) {
        Claims claims = Jwts.parser()
            .setSigningKey(SECRET)
            .parseClaimsJws(token)
            .getBody();
        
        return Long.parseLong(claims.getSubject());
    }
    
    // éªŒè¯Tokenæ˜¯å¦æœ‰æ•ˆ
    public static boolean validateToken(String token) {
        try {
            Jwts.parser().setSigningKey(SECRET).parseClaimsJws(token);
            return true;
        } catch (Exception e) {
            return false;
        }
    }
}
```

### 8.3 è®¤è¯æ‹¦æˆªå™¨


```java
// ç»Ÿä¸€è®¤è¯æ‹¦æˆªå™¨
@Component
public class AuthInterceptor implements HandlerInterceptor {
    
    @Override
    public boolean preHandle(HttpServletRequest request, 
                            HttpServletResponse response, 
                            Object handler) {
        // è·å–Token
        String token = request.getHeader("Authorization");
        if (token == null || !token.startsWith("Bearer ")) {
            response.setStatus(401);
            return false;
        }
        
        // éªŒè¯Token
        token = token.replace("Bearer ", "");
        if (!JwtUtil.validateToken(token)) {
            response.setStatus(401);
            return false;
        }
        
        // è§£æç”¨æˆ·ä¿¡æ¯
        Long userId = JwtUtil.parseToken(token);
        request.setAttribute("userId", userId);
        
        return true;
    }
}

// æ³¨å†Œæ‹¦æˆªå™¨
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Autowired
    private AuthInterceptor authInterceptor;
    
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(authInterceptor)
            .addPathPatterns("/api/**")        // æ‹¦æˆªæ‰€æœ‰api
            .excludePathPatterns("/api/login", // æ’é™¤ç™»å½•æ¥å£
                                "/api/register"); // æ’é™¤æ³¨å†Œæ¥å£
    }
}
```

### 8.4 æƒé™æ§åˆ¶


```java
// ä½¿ç”¨æ³¨è§£æ ‡è®°æƒé™
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface RequirePermission {
    String value();  // éœ€è¦çš„æƒé™
}

// Controllerä½¿ç”¨
@GetMapping("/admin/users")
@RequirePermission("admin:user:list")
public Result<List<User>> getAllUsers() {
    return Result.success(userService.getAll());
}

// AOPæ‹¦æˆªæ ¡éªŒæƒé™
@Aspect
@Component
public class PermissionAspect {
    
    @Before("@annotation(requirePermission)")
    public void checkPermission(JoinPoint joinPoint, RequirePermission requirePermission) {
        // è·å–å½“å‰ç”¨æˆ·
        Long userId = getCurrentUserId();
        
        // è·å–ç”¨æˆ·æƒé™
        Set<String> permissions = userService.getPermissions(userId);
        
        // æ ¡éªŒæƒé™
        String requiredPermission = requirePermission.value();
        if (!permissions.contains(requiredPermission)) {
            throw new PermissionDeniedException("æƒé™ä¸è¶³");
        }
    }
}
```

---

## 9. âš¡ æ¥å£é™æµç­–ç•¥


### 9.1 ä¸ºä»€ä¹ˆéœ€è¦é™æµ


**é—®é¢˜åœºæ™¯**ï¼š

```
æ­£å¸¸æƒ…å†µï¼š
ç”¨æˆ·A â†’ æ¯ç§’10ä¸ªè¯·æ±‚ â†’ æœåŠ¡å™¨æ­£å¸¸å¤„ç† âœ…

å¼‚å¸¸æƒ…å†µï¼š
æ¶æ„ç”¨æˆ· â†’ æ¯ç§’10000ä¸ªè¯·æ±‚ â†’ æœåŠ¡å™¨å´©æºƒ âŒ
çˆ¬è™«ç¨‹åº â†’ ç–¯ç‹‚çˆ¬å–æ•°æ® â†’ æ•°æ®åº“å‹åŠ›è¿‡å¤§ âŒ

è§£å†³æ–¹æ¡ˆï¼šé™æµ
â†’ é™åˆ¶æ¯ä¸ªç”¨æˆ·çš„è¯·æ±‚é¢‘ç‡
â†’ è¶…è¿‡é™åˆ¶ç›´æ¥æ‹’ç»
â†’ ä¿æŠ¤æœåŠ¡å™¨ç¨³å®šè¿è¡Œ
```

### 9.2 é™æµç®—æ³•


**ğŸ”¸ å›ºå®šçª—å£ç®—æ³•**

**åŸç†**ï¼šåœ¨å›ºå®šæ—¶é—´çª—å£å†…é™åˆ¶è¯·æ±‚æ•°é‡

```
æ—¶é—´è½´ï¼š
0s        1s        2s        3s
|---------|---------|---------|
  çª—å£1      çª—å£2      çª—å£3
  é™åˆ¶10æ¬¡   é™åˆ¶10æ¬¡   é™åˆ¶10æ¬¡

é—®é¢˜ï¼š
çª—å£åˆ‡æ¢æ—¶å¯èƒ½çªç„¶æµé‡ç¿»å€
0.9s: 10ä¸ªè¯·æ±‚ âœ…
1.1s: 10ä¸ªè¯·æ±‚ âœ…
â†’ 0.2ç§’å†…20ä¸ªè¯·æ±‚ï¼Œè¶…å‡ºé¢„æœŸ
```

**ç®€å•å®ç°**ï¼š
```java
public class FixedWindowRateLimiter {
    private final int maxRequests;      // æœ€å¤§è¯·æ±‚æ•°
    private final long windowTime;      // çª—å£æ—¶é—´
    private int counter = 0;            // è®¡æ•°å™¨
    private long windowStart = System.currentTimeMillis();
    
    public boolean tryAcquire() {
        long now = System.currentTimeMillis();
        
        // æ–°çª—å£ï¼Œé‡ç½®è®¡æ•°å™¨
        if (now - windowStart >= windowTime) {
            counter = 0;
            windowStart = now;
        }
        
        // æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶
        if (counter < maxRequests) {
            counter++;
            return true;
        }
        return false;
    }
}
```

**ğŸ”¸ æ»‘åŠ¨çª—å£ç®—æ³•**

**åŸç†**ï¼šæ—¶é—´çª—å£å¹³æ»‘æ»‘åŠ¨ï¼Œæ›´ç²¾ç¡®æ§åˆ¶

```
æ—¶é—´è½´ï¼š
|--------|--------|--------|
  1så‰    å½“å‰     1så
  
å½“å‰çª—å£ = [å½“å‰æ—¶é—´-1s, å½“å‰æ—¶é—´]
åªç»Ÿè®¡è¿™ä¸ªçª—å£å†…çš„è¯·æ±‚æ•°

ä¼˜ç‚¹ï¼šæ›´å¹³æ»‘ï¼Œé¿å…çªåˆº
```

**ğŸ”¸ ä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆå¸¸ç”¨ï¼‰**

**åŸç†**ï¼š
```
ç³»ç»Ÿä»¥å›ºå®šé€Ÿç‡ç”Ÿæˆä»¤ç‰Œæ”¾å…¥æ¡¶ä¸­
è¯·æ±‚éœ€è¦è·å–ä»¤ç‰Œæ‰èƒ½æ‰§è¡Œ
æ¡¶æ»¡äº†ä»¤ç‰Œå°±ä¸¢å¼ƒ

        ä»¤ç‰Œæ¡¶ï¼ˆå®¹é‡10ä¸ªï¼‰
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 ç”Ÿæˆâ†’ |  â—â—â—â—â—â—      | â†è·å–
 é€Ÿç‡   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  è¯·æ±‚
        æ¯ç§’æ”¾å…¥5ä¸ªä»¤ç‰Œ
```

**ç‰¹ç‚¹**ï¼š
- å…è®¸ä¸€å®šç¨‹åº¦çš„çªå‘æµé‡
- æ¡¶é‡Œæœ‰ä»¤ç‰Œå°±èƒ½ç«‹å³æ‰§è¡Œ
- é•¿æœŸå¹³å‡é€Ÿç‡å—é™äºä»¤ç‰Œç”Ÿæˆé€Ÿç‡

**ä½¿ç”¨Google Guavaå®ç°**ï¼š
```java
public class RateLimiterService {
    // æ¯ç§’äº§ç”Ÿ5ä¸ªä»¤ç‰Œ
    private RateLimiter rateLimiter = RateLimiter.create(5.0);
    
    public boolean tryAcquire() {
        return rateLimiter.tryAcquire(); // å°è¯•è·å–ä»¤ç‰Œ
    }
}
```

**ğŸ”¸ æ¼æ¡¶ç®—æ³•**

**åŸç†**ï¼š
```
è¯·æ±‚è¿›å…¥æ¼æ¡¶ï¼Œä»¥å›ºå®šé€Ÿç‡æµå‡º
æ¡¶æ»¡äº†æ–°è¯·æ±‚æº¢å‡ºè¢«ä¸¢å¼ƒ

        è¯·æ±‚æµå…¥
           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”
        â”‚  â—â—â— â”‚ æ¼æ¡¶
        â”‚  â—â—  â”‚
        â””â”€â”€â”€â”¬â”€â”€â”˜
            â†“
         å›ºå®šé€Ÿç‡æµå‡º
```

**ç‰¹ç‚¹**ï¼š
- è¯·æ±‚ä»¥å›ºå®šé€Ÿç‡å¤„ç†
- ä¸å…è®¸çªå‘æµé‡
- é€‚åˆéœ€è¦ä¸¥æ ¼é€Ÿç‡æ§åˆ¶çš„åœºæ™¯

### 9.3 é™æµå®ç°æ–¹æ¡ˆ


**ğŸ”¸ æ–¹æ¡ˆä¸€ï¼šåŸºäºæ³¨è§£çš„é™æµ**

```java
// é™æµæ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface RateLimit {
    int limit() default 10;           // é™åˆ¶æ¬¡æ•°
    int timeout() default 1;          // æ—¶é—´çª—å£ï¼ˆç§’ï¼‰
    String key() default "";          // é™æµkey
}

// Controllerä½¿ç”¨
@GetMapping("/api/data")
@RateLimit(limit = 10, timeout = 1)  // æ¯ç§’æœ€å¤š10æ¬¡
public Result<Data> getData() {
    return Result.success(dataService.getData());
}

// AOPæ‹¦æˆªå®ç°é™æµ
@Aspect
@Component
public class RateLimitAspect {
    
    @Autowired
    private RedisTemplate<String, Integer> redisTemplate;
    
    @Around("@annotation(rateLimit)")
    public Object doRateLimit(ProceedingJoinPoint joinPoint, RateLimit rateLimit) {
        // è·å–é™æµkey
        String key = "rate_limit:" + rateLimit.key();
        
        // è·å–å½“å‰è®¡æ•°
        Integer count = redisTemplate.opsForValue().get(key);
        if (count == null) {
            // é¦–æ¬¡è¯·æ±‚ï¼Œåˆå§‹åŒ–è®¡æ•°å™¨
            redisTemplate.opsForValue().set(key, 1, rateLimit.timeout(), TimeUnit.SECONDS);
            return joinPoint.proceed();
        }
        
        // æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶
        if (count >= rateLimit.limit()) {
            throw new RateLimitException("è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•");
        }
        
        // è®¡æ•°å™¨åŠ 1
        redisTemplate.opsForValue().increment(key);
        return joinPoint.proceed();
    }
}
```

**ğŸ”¸ æ–¹æ¡ˆäºŒï¼šåŸºäºIPçš„é™æµ**

```java
@Component
public class IpRateLimitInterceptor implements HandlerInterceptor {
    
    @Autowired
    private RedisTemplate<String, Integer> redisTemplate;
    
    private static final int LIMIT = 100;  // æ¯åˆ†é’Ÿ100æ¬¡
    
    @Override
    public boolean preHandle(HttpServletRequest request, 
                            HttpServletResponse response, 
                            Object handler) {
        // è·å–å®¢æˆ·ç«¯IP
        String ip = getClientIp(request);
        String key = "ip_limit:" + ip;
        
        // æ£€æŸ¥é™æµ
        Integer count = redisTemplate.opsForValue().get(key);
        if (count == null) {
            redisTemplate.opsForValue().set(key, 1, 1, TimeUnit.MINUTES);
            return true;
        }
        
        if (count >= LIMIT) {
            response.setStatus(429); // Too Many Requests
            return false;
        }
        
        redisTemplate.opsForValue().increment(key);
        return true;
    }
    
    private String getClientIp(HttpServletRequest request) {
        // è·å–çœŸå®IPï¼ˆè€ƒè™‘ä»£ç†ï¼‰
        String ip = request.getHeader("X-Forwarded-For");
        if (ip == null || ip.isEmpty()) {
            ip = request.getRemoteAddr();
        }
        return ip;
    }
}
```

**ğŸ”¸ æ–¹æ¡ˆä¸‰ï¼šåˆ†å¸ƒå¼é™æµï¼ˆRedis + Luaï¼‰**

```java
// Luaè„šæœ¬å®ç°åŸå­æ€§é™æµ
private static final String LUA_SCRIPT = 
    "local key = KEYS[1] " +
    "local limit = tonumber(ARGV[1]) " +
    "local expire = tonumber(ARGV[2]) " +
    "local current = tonumber(redis.call('get', key) or '0') " +
    "if current + 1 > limit then " +
    "    return 0 " +
    "else " +
    "    redis.call('incrby', key, 1) " +
    "    if current == 0 then " +
    "        redis.call('expire', key, expire) " +
    "    end " +
    "    return 1 " +
    "end";

@Service
public class DistributedRateLimiter {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    public boolean tryAcquire(String key, int limit, int expireSeconds) {
        DefaultRedisScript<Long> script = new DefaultRedisScript<>();
        script.setScriptText(LUA_SCRIPT);
        script.setResultType(Long.class);
        
        Long result = redisTemplate.execute(
            script,
            Collections.singletonList(key),
            String.valueOf(limit),
            String.valueOf(expireSeconds)
        );
        
        return result != null && result == 1;
    }
}
```

### 9.4 é™æµç­–ç•¥å»ºè®®


**ğŸ“Œ ä¸åŒåœºæ™¯çš„é™æµç­–ç•¥**ï¼š

| æ¥å£ç±»å‹ | **é™æµç­–ç•¥** | **ç¤ºä¾‹é…ç½®** |
|---------|-------------|-------------|
| æŸ¥è¯¢æ¥å£ | å®½æ¾é™æµ | 100æ¬¡/åˆ†é’Ÿ |
| åˆ›å»ºæ¥å£ | ä¸¥æ ¼é™æµ | 10æ¬¡/åˆ†é’Ÿ |
| æ”¯ä»˜æ¥å£ | æä¸¥æ ¼é™æµ | 1æ¬¡/ç§’ |
| éªŒè¯ç æ¥å£ | ä¸­ç­‰é™æµ | 5æ¬¡/åˆ†é’Ÿ |
| æ–‡ä»¶ä¸Šä¼  | å¤§å°+é¢‘ç‡åŒé™åˆ¶ | 10MB + 10æ¬¡/å°æ—¶ |

**ç”¨æˆ·ç»´åº¦**ï¼š
- æ™®é€šç”¨æˆ·ï¼š100æ¬¡/åˆ†é’Ÿ
- VIPç”¨æˆ·ï¼š500æ¬¡/åˆ†é’Ÿ
- ç³»ç»Ÿç®¡ç†å‘˜ï¼šæ— é™åˆ¶

**æ—¶é—´ç»´åº¦**ï¼š
- ç™½å¤©(9-21ç‚¹)ï¼šæ­£å¸¸é™åˆ¶
- å¤œé—´(21-9ç‚¹)ï¼šæ”¾å®½é™åˆ¶ï¼ˆæµé‡å°‘ï¼‰

---

## 10. ğŸ“– æ¥å£æ–‡æ¡£è§„èŒƒ


### 10.1 ä¸ºä»€ä¹ˆéœ€è¦æ¥å£æ–‡æ¡£


**é—®é¢˜åœºæ™¯**ï¼š

```
æ²¡æœ‰æ–‡æ¡£æ—¶ï¼š
å‰ç«¯ï¼š"è¿™ä¸ªæ¥å£æ€ä¹ˆè°ƒç”¨ï¼Ÿå‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"
åç«¯ï¼š"ä½ çœ‹ä»£ç å§..."
å‰ç«¯ï¼š"ä»£ç çœ‹ä¸æ‡‚å•Šï¼"
åç«¯ï¼š"é‚£æˆ‘å£å¤´å‘Šè¯‰ä½ ..."
â†’ æ•ˆç‡ä½ä¸‹ï¼Œå®¹æ˜“å‡ºé”™

æœ‰æ–‡æ¡£åï¼š
å‰ç«¯ï¼šæ‰“å¼€æ¥å£æ–‡æ¡£
â†’ æ¸…æ¥šçœ‹åˆ°ï¼šURLã€æ–¹æ³•ã€å‚æ•°ã€è¿”å›å€¼
â†’ ç›´æ¥æŒ‰æ–‡æ¡£è°ƒç”¨ âœ…
â†’ æé«˜æ•ˆç‡ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬
```

### 10.2 Swagger/OpenAPIæ–‡æ¡£


**ğŸ”¸ å¿«é€Ÿé›†æˆSwagger**

```xml
<!-- pom.xmlæ·»åŠ ä¾èµ– -->
<dependency>
    <groupId>io.springfox</groupId>
    <artifactId>springfox-boot-starter</artifactId>
    <version>3.0.0</version>
</dependency>
```

```java
// Swaggeré…ç½®ç±»
@Configuration
@EnableOpenApi
public class SwaggerConfig {
    
    @Bean
    public Docket api() {
        return new Docket(DocumentationType.OAS_30)
            .apiInfo(apiInfo())
            .select()
            .apis(RequestHandlerSelectors.basePackage("com.example.controller"))
            .paths(PathSelectors.any())
            .build();
    }
    
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
            .title("ç”¨æˆ·ç®¡ç†ç³»ç»ŸAPI")
            .description("ç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„RESTful APIæ–‡æ¡£")
            .version("v1.0")
            .contact(new Contact("å¼€å‘å›¢é˜Ÿ", "https://example.com", "dev@example.com"))
            .build();
    }
}
```

**ğŸ”¸ æ¥å£æ³¨è§£ä½¿ç”¨**

```java
@RestController
@RequestMapping("/api/users")
@Api(tags = "ç”¨æˆ·ç®¡ç†")
public class UserController {
    
    @GetMapping("/{id}")
    @ApiOperation(value = "æ ¹æ®IDè·å–ç”¨æˆ·", notes = "è¿”å›ç”¨æˆ·è¯¦ç»†ä¿¡æ¯")
    @ApiImplicitParam(name = "id", value = "ç”¨æˆ·ID", required = true, dataType = "Long")
    public Result<User> getUser(@PathVariable Long id) {
        return Result.success(userService.getById(id));
    }
    
    @PostMapping
    @ApiOperation(value = "åˆ›å»ºç”¨æˆ·", notes = "åˆ›å»ºæ–°ç”¨æˆ·ï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯")
    public Result<User> createUser(@RequestBody @ApiParam("ç”¨æˆ·ä¿¡æ¯") UserDTO dto) {
        return Result.success(userService.create(dto));
    }
    
    @GetMapping
    @ApiOperation(value = "æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨", notes = "æ”¯æŒåˆ†é¡µå’Œæ¡ä»¶æŸ¥è¯¢")
    @ApiImplicitParams({
        @ApiImplicitParam(name = "name", value = "ç”¨æˆ·å", dataType = "String"),
        @ApiImplicitParam(name = "page", value = "é¡µç ", defaultValue = "1", dataType = "int"),
        @ApiImplicitParam(name = "size", value = "æ¯é¡µå¤§å°", defaultValue = "10", dataType = "int")
    })
    public Result<PageResult<User>> getUsers(
        @RequestParam(required = false) String name,
        @RequestParam(defaultValue = "1") int page,
        @RequestParam(defaultValue = "10") int size
    ) {
        return Result.success(userService.getPage(name, page, size));
    }
}
```

**ğŸ”¸ DTOæ³¨è§£è¯´æ˜**

```java
@ApiModel(description = "ç”¨æˆ·ä¿¡æ¯")
public class UserDTO {
    
    @ApiModelProperty(value = "ç”¨æˆ·å", required = true, example = "zhangsan")
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;
    
    @ApiModelProperty(value = "é‚®ç®±", required = true, example = "zhangsan@example.com")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @ApiModelProperty(value = "å¹´é¾„", required = false, example = "25")
    @Min(value = 18, message = "å¹´é¾„ä¸èƒ½å°äº18")
    private Integer age;
}
```

**è®¿é—®Swagger UI**ï¼š`http://localhost:8080/swagger-ui/index.html`

### 10.3 æ¥å£æ–‡æ¡£å†…å®¹è§„èŒƒ


**ğŸ“ å®Œæ•´çš„æ¥å£æ–‡æ¡£åº”åŒ…å«**ï¼š

**åŸºæœ¬ä¿¡æ¯**ï¼š
- æ¥å£åç§°ï¼šè·å–ç”¨æˆ·ä¿¡æ¯
- æ¥å£è·¯å¾„ï¼š/api/users/{id}
- è¯·æ±‚æ–¹æ³•ï¼šGET
- æ¥å£æè¿°ï¼šæ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯

**è¯·æ±‚å‚æ•°**ï¼š

**è·¯å¾„å‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | Long | æ˜¯ | ç”¨æˆ·ID |

**Queryå‚æ•°**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| fields | String | å¦ | å…¨éƒ¨ | è¿”å›å­—æ®µï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš” |

**è¯·æ±‚å¤´**ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| Authorization | String | æ˜¯ | è®¤è¯tokenï¼Œæ ¼å¼ï¼šBearer xxx |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```bash
GET /api/users/123?fields=id,username,email
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**å“åº”ç»“æœ**ï¼š

**æˆåŠŸå“åº”ï¼ˆ200ï¼‰**ï¼š
```json
{
    "code": 200,
    "message": "success",
    "data": {
        "id": 123,
        "username": "zhangsan",
        "email": "zhangsan@example.com"
    },
    "timestamp": 1640000000000
}
```

**å¤±è´¥å“åº”ï¼ˆ404ï¼‰**ï¼š
```json
{
    "code": 404,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "timestamp": 1640000000000
}
```

**å“åº”å­—æ®µè¯´æ˜**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Long | ç”¨æˆ·ID |
| username | String | ç”¨æˆ·å |
| email | String | é‚®ç®±åœ°å€ |

**é”™è¯¯ç è¯´æ˜**ï¼š

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|---------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥å‚æ•°æ ¼å¼å’Œå¿…å¡«é¡¹ |
| 401 | æœªè®¤è¯ | è¯·å…ˆç™»å½•è·å–token |
| 403 | æ— æƒé™ | è”ç³»ç®¡ç†å‘˜å¼€é€šæƒé™ |
| 404 | ç”¨æˆ·ä¸å­˜åœ¨ | æ£€æŸ¥ç”¨æˆ·IDæ˜¯å¦æ­£ç¡® |
| 500 | æœåŠ¡å™¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

**æ³¨æ„äº‹é¡¹**ï¼š
- Tokenæœ‰æ•ˆæœŸä¸º7å¤©ï¼Œè¿‡æœŸéœ€é‡æ–°ç™»å½•
- fieldså‚æ•°å¯é€‰å€¼ï¼šid, username, email, phone, createdTime
- æ¥å£é™æµï¼šæ¯åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚

### 10.4 æ¥å£æ–‡æ¡£ç»´æŠ¤å»ºè®®


**ğŸ“Œ æ–‡æ¡£ç®¡ç†åŸåˆ™**ï¼š

**å®æ—¶æ›´æ–°**ï¼š
- âœ… æ¥å£ä¿®æ”¹ç«‹å³æ›´æ–°æ–‡æ¡£
- âœ… ä½¿ç”¨Swaggerè‡ªåŠ¨ç”Ÿæˆï¼Œå‡å°‘æ‰‹å·¥ç»´æŠ¤
- âœ… ä»£ç å³æ–‡æ¡£ï¼Œæ³¨è§£å³è¯´æ˜

**ç‰ˆæœ¬ç®¡ç†**ï¼š
- âœ… åŒºåˆ†ä¸åŒç‰ˆæœ¬çš„æ–‡æ¡£
- âœ… ä¿ç•™å†å²ç‰ˆæœ¬æ–‡æ¡£ä¾›æŸ¥é˜…
- âœ… æ˜ç¡®æ ‡æ³¨åºŸå¼ƒçš„æ¥å£

**ç¤ºä¾‹ä¸°å¯Œ**ï¼š
- âœ… æä¾›å®Œæ•´çš„è¯·æ±‚ç¤ºä¾‹
- âœ… æä¾›æ­£ç¡®å’Œé”™è¯¯çš„å“åº”ç¤ºä¾‹
- âœ… æä¾›è°ƒè¯•å·¥å…·ï¼ˆSwagger UIï¼‰

**å›¢é˜Ÿåä½œ**ï¼š
- âœ… æ–‡æ¡£åœ°å€å›¢é˜Ÿå…±äº«
- âœ… é‡è¦å˜æ›´åŠæ—¶é€šçŸ¥
- âœ… å®šæœŸReviewæ–‡æ¡£å‡†ç¡®æ€§

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 RESTfulè®¾è®¡æ ¸å¿ƒåŸåˆ™


**åŸºæœ¬åŸåˆ™**ï¼š

- ğŸ”¸ **èµ„æºä¸ºä¸­å¿ƒ**ï¼šä¸€åˆ‡çš†èµ„æºï¼Œç”¨åè¯ä¸ç”¨åŠ¨è¯
- ğŸ”¸ **HTTPæ–¹æ³•**ï¼šGETæŸ¥è¯¢ã€POSTåˆ›å»ºã€PUTæ›´æ–°ã€DELETEåˆ é™¤
- ğŸ”¸ **çŠ¶æ€ç è§„èŒƒ**ï¼šç”¨æ ‡å‡†HTTPçŠ¶æ€ç è¡¨è¾¾ç»“æœ
- ğŸ”¸ **URLè§„èŒƒ**ï¼šå±‚çº§æ¸…æ™°ã€è¯­ä¹‰æ˜ç¡®ã€å°å†™å­—æ¯
- ğŸ”¸ **æ— çŠ¶æ€é€šä¿¡**ï¼šæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹å®Œæ•´

### 11.2 å¿…é¡»æŒæ¡çš„å…³é”®çŸ¥è¯†


**ğŸ”¹ æ¥å£è®¾è®¡è¦ç‚¹**ï¼š

| è®¾è®¡æ–¹é¢ | **æ ¸å¿ƒè¦æ±‚** |
|---------|-------------|
| URLè®¾è®¡ | ä½¿ç”¨åè¯å¤æ•°ï¼Œé¿å…åŠ¨è¯ |
| å‚æ•°ä¼ é€’ | è·¯å¾„å‚æ•°/æŸ¥è¯¢å‚æ•°/è¯·æ±‚ä½“ï¼ŒæŒ‰éœ€é€‰æ‹© |
| å“åº”æ ¼å¼ | ç»Ÿä¸€åŒ…è£…ï¼ŒåŒ…å«code/message/data |
| é”™è¯¯å¤„ç† | æ˜ç¡®çš„é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯ |

**ğŸ”¹ å®‰å…¨æ€§ä¿éšœ**ï¼š

| å®‰å…¨æ–¹é¢ | **å®ç°æ–¹å¼** |
|---------|-------------|
| è®¤è¯æœºåˆ¶ | Tokenè®¤è¯ï¼ˆJWTï¼‰ |
| æƒé™æ§åˆ¶ | åŸºäºè§’è‰²æˆ–æ³¨è§£çš„æƒé™éªŒè¯ |
| æ¥å£åŠ å¯† | HTTPSä¼ è¾“ |
| å‚æ•°æ ¡éªŒ | JSR-303æ³¨è§£æ ¡éªŒ |

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–**ï¼š

| ä¼˜åŒ–æ–¹é¢ | **è§£å†³æ–¹æ¡ˆ** |
|---------|-------------|
| é™æµä¿æŠ¤ | ä»¤ç‰Œæ¡¶/æ»‘åŠ¨çª—å£ç®—æ³• |
| ç¼“å­˜ç­–ç•¥ | GETè¯·æ±‚ç¼“å­˜ï¼Œå‡å°‘DBå‹åŠ› |
| å¹‚ç­‰è®¾è®¡ | å”¯ä¸€ç´¢å¼•/Token/åˆ†å¸ƒå¼é” |
| åˆ†é¡µæŸ¥è¯¢ | å¤§æ•°æ®é‡å¿…é¡»åˆ†é¡µ |

### 11.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ“Œ æ¥å£è®¾è®¡æ£€æŸ¥æ¸…å•**ï¼š

**è®¾è®¡é˜¶æ®µ**ï¼š
- â˜‘ï¸ URLæ˜¯å¦ç¬¦åˆRESTfulè§„èŒƒï¼Ÿ
- â˜‘ï¸ æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„HTTPæ–¹æ³•ï¼Ÿ
- â˜‘ï¸ å“åº”æ ¼å¼æ˜¯å¦ç»Ÿä¸€ï¼Ÿ
- â˜‘ï¸ æ˜¯å¦éœ€è¦ç‰ˆæœ¬ç®¡ç†ï¼Ÿ

**å¼€å‘é˜¶æ®µ**ï¼š
- â˜‘ï¸ å‚æ•°æ ¡éªŒæ˜¯å¦å®Œæ•´ï¼Ÿ
- â˜‘ï¸ é”™è¯¯ä¿¡æ¯æ˜¯å¦æ¸…æ™°ï¼Ÿ
- â˜‘ï¸ æ˜¯å¦æ·»åŠ äº†æ¥å£æ–‡æ¡£ï¼Ÿ
- â˜‘ï¸ æ˜¯å¦è€ƒè™‘äº†å¹‚ç­‰æ€§ï¼Ÿ

**ä¸Šçº¿å‰**ï¼š
- â˜‘ï¸ æ˜¯å¦é…ç½®äº†é™æµï¼Ÿ
- â˜‘ï¸ æ˜¯å¦é…ç½®äº†è®¤è¯ï¼Ÿ
- â˜‘ï¸ æ€§èƒ½æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Ÿ
- â˜‘ï¸ æ–‡æ¡£æ˜¯å¦å®Œæ•´å‡†ç¡®ï¼Ÿ

### 11.4 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ


**â“ PUT vs PATCH å¦‚ä½•é€‰æ‹©ï¼Ÿ**

**PUT - å…¨é‡æ›´æ–°**ï¼š
```json
PUT /users/123
{
    "name": "å¼ ä¸‰", 
    "age": 25, 
    "email": "xxx@example.com"
}
// å¿…é¡»ä¼ æ‰€æœ‰å­—æ®µ
```

**PATCH - éƒ¨åˆ†æ›´æ–°**ï¼š
```json
PATCH /users/123
{
    "age": 26
}
// åªä¼ ä¿®æ”¹çš„å­—æ®µ
```

> ğŸ’¡ **å»ºè®®**ï¼šä¼˜å…ˆä½¿ç”¨PUTï¼ŒPATCHæŒ‰éœ€ä½¿ç”¨

**â“ ä»€ä¹ˆæ—¶å€™ç”¨POSTï¼Œä»€ä¹ˆæ—¶å€™ç”¨GETï¼Ÿ**

**GET - æŸ¥è¯¢æ•°æ®**ï¼š
- æ— å‰¯ä½œç”¨ï¼ˆä¸ä¿®æ”¹æ•°æ®ï¼‰
- å‚æ•°ç®€å•ï¼Œå¯ä»¥ç¼“å­˜
- ä¾‹ï¼š`GET /users?name=å¼ ä¸‰`

**POST - åˆ›å»ºæ•°æ®ã€å¤æ‚æŸ¥è¯¢**ï¼š
- æœ‰å‰¯ä½œç”¨ï¼ˆåˆ›å»º/ä¿®æ”¹æ•°æ®ï¼‰
- å‚æ•°å¤æ‚ï¼Œä¸èƒ½ç¼“å­˜
- ä¾‹ï¼š`POST /users`ï¼ˆåˆ›å»ºï¼‰ã€`POST /users/search`ï¼ˆå¤æ‚æŸ¥è¯¢ï¼‰

**â“ å¦‚ä½•å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Ÿ**

**å•æ–‡ä»¶ä¸Šä¼ **ï¼š
```
POST /files
Content-Type: multipart/form-data
body: file=xxx
```

**å¤šæ–‡ä»¶ä¸Šä¼ **ï¼š
```
POST /files/batch
Content-Type: multipart/form-data
body: files[]=xxx&files[]=yyy
```

**å¤§æ–‡ä»¶ä¸Šä¼ ç­–ç•¥**ï¼š
- â‘  åˆ†ç‰‡ä¸Šä¼ 
- â‘¡ æ–­ç‚¹ç»­ä¼ 
- â‘¢ å¼‚æ­¥å¤„ç†

### 11.5 å­¦ä¹ è·¯çº¿å»ºè®®


**ğŸ¯ ä»åŸºç¡€åˆ°è¿›é˜¶**ï¼š

**ç¬¬ä¸€é˜¶æ®µï¼šç†è§£RESTfulåŸºç¡€**
- âœ… æŒæ¡èµ„æºã€HTTPæ–¹æ³•ã€URLè®¾è®¡
- âœ… èƒ½è®¾è®¡åŸºæœ¬çš„CRUDæ¥å£
- âœ… äº†è§£çŠ¶æ€ç å«ä¹‰

**ç¬¬äºŒé˜¶æ®µï¼šæŒæ¡è§„èŒƒå®è·µ**
- âœ… ç»Ÿä¸€å“åº”æ ¼å¼
- âœ… å‚æ•°æ ¡éªŒ
- âœ… å¼‚å¸¸å¤„ç†
- âœ… æ¥å£æ–‡æ¡£ç¼–å†™

**ç¬¬ä¸‰é˜¶æ®µï¼šå®‰å…¨ä¸æ€§èƒ½**
- âœ… Tokenè®¤è¯å®ç°
- âœ… é™æµç­–ç•¥é…ç½®
- âœ… å¹‚ç­‰æ€§è®¾è®¡
- âœ… æ¥å£ç‰ˆæœ¬ç®¡ç†

**ç¬¬å››é˜¶æ®µï¼šä¼ä¸šçº§å®è·µ**
- âœ… å¾®æœåŠ¡æ¥å£è®¾è®¡
- âœ… åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†
- âœ… æ¥å£ç›‘æ§ä¸å‘Šè­¦
- âœ… æ€§èƒ½ä¼˜åŒ–è°ƒä¼˜

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> èµ„æºåè¯URLè®¾è®¡ï¼ŒHTTPæ–¹æ³•è¡¨æ“ä½œ  
> çŠ¶æ€ç å‡†å“åº”æ˜ï¼Œå‚æ•°æ ¡éªŒä¸èƒ½å°‘  
> Tokenè®¤è¯ä¿å®‰å…¨ï¼Œé™æµå¹‚ç­‰é˜²é£é™©  
> æ–‡æ¡£è§„èŒƒè¦è¯¦ç»†ï¼Œå‰ååä½œæ•ˆç‡é«˜

---

## ğŸ“ å­¦ä¹ å»ºè®®


ä½œä¸ºJavaæ¡†æ¶çš„æ–°æ‰‹å­¦ä¹ è€…ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹æ­¥éª¤æŒæ¡RESTfulæ¥å£è®¾è®¡ï¼š

**â‘  å…ˆç†è§£æ¦‚å¿µ**ï¼šææ¸…æ¥šRESTfulæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ç”¨

**â‘¡ åŠ¨æ‰‹å®è·µ**ï¼šä»ç®€å•çš„CRUDæ¥å£å¼€å§‹ï¼Œé€æ­¥æ·»åŠ è§„èŒƒ

**â‘¢ å‚è€ƒç¤ºä¾‹**ï¼šçœ‹ä¼˜ç§€å¼€æºé¡¹ç›®çš„æ¥å£è®¾è®¡

**â‘£ å·¥å…·ç†Ÿç»ƒ**ï¼šç†Ÿç»ƒä½¿ç”¨Swaggerã€Postmanç­‰å·¥å…·

**â‘¤ æŒç»­ä¼˜åŒ–**ï¼šåœ¨å®è·µä¸­ä¸æ–­å®Œå–„æ¥å£è®¾è®¡

> **æ ¸å¿ƒç†å¿µ**ï¼šæ¥å£è®¾è®¡æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼Œç¬¦åˆå›¢é˜Ÿè§„èŒƒã€æ˜“äºç†è§£ã€ä¾¿äºç»´æŠ¤å°±æ˜¯å¥½çš„è®¾è®¡ï¼