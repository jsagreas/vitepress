---
title: 9ã€ç»Ÿä¸€å“åº”ç»“æœå°è£…
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”](#1-ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”)
2. [ç»Ÿä¸€å“åº”Resultè®¾è®¡](#2-ç»Ÿä¸€å“åº”Resultè®¾è®¡)
3. [æˆåŠŸä¸å¤±è´¥å“åº”å°è£…](#3-æˆåŠŸä¸å¤±è´¥å“åº”å°è£…)
4. [åˆ†é¡µå“åº”ç»“æœå°è£…](#4-åˆ†é¡µå“åº”ç»“æœå°è£…)
5. [é”™è¯¯ç ä¸ä¸šåŠ¡çŠ¶æ€ç ](#5-é”™è¯¯ç ä¸ä¸šåŠ¡çŠ¶æ€ç )
6. [å“åº”æ¶ˆæ¯å›½é™…åŒ–](#6-å“åº”æ¶ˆæ¯å›½é™…åŒ–)
7. [å…¨å±€å“åº”å¤„ç†](#7-å…¨å±€å“åº”å¤„ç†)
8. [æ¥å£ç‰ˆæœ¬æ§åˆ¶](#8-æ¥å£ç‰ˆæœ¬æ§åˆ¶)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”


### 1.1 é—®é¢˜åœºæ™¯


**æ²¡æœ‰ç»Ÿä¸€å“åº”çš„æ··ä¹±æƒ…å†µï¼š**
```
åç«¯å¼€å‘è€…Açš„æ¥å£è¿”å›ï¼š
{ "data": {...}, "msg": "æˆåŠŸ" }

åç«¯å¼€å‘è€…Bçš„æ¥å£è¿”å›ï¼š
{ "result": {...}, "message": "OK", "status": 200 }

åç«¯å¼€å‘è€…Cçš„æ¥å£è¿”å›ï¼š
{ "success": true, "info": {...} }
```

**å‰ç«¯å¼€å‘è€…çš„å›°æ‰°ï¼š**
```
å‰ç«¯ï¼šæ¯ä¸ªæ¥å£è¿”å›æ ¼å¼éƒ½ä¸ä¸€æ ·ï¼Œæˆ‘è¦å†™Nå¥—è§£æé€»è¾‘...
å‰ç«¯ï¼šæœ‰çš„ç”¨msgï¼Œæœ‰çš„ç”¨messageï¼Œæœ‰çš„ç”¨info...
å‰ç«¯ï¼šæˆåŠŸå¤±è´¥åˆ¤æ–­æ ‡å‡†ä¹Ÿä¸ç»Ÿä¸€ï¼Œå¤ªéš¾ç»´æŠ¤äº†ï¼
```

### 1.2 ç»Ÿä¸€å“åº”çš„å¥½å¤„


**ğŸ¯ æ ¸å¿ƒä»·å€¼ï¼š**

**å¯¹å‰ç«¯å¼€å‘çš„å¥½å¤„ï¼š**
```
âœ… ç»Ÿä¸€çš„æ•°æ®ç»“æ„ - ä¸€å¥—è§£æé€»è¾‘èµ°å¤©ä¸‹
âœ… ç»Ÿä¸€çš„çŠ¶æ€åˆ¤æ–­ - æˆåŠŸå¤±è´¥ä¸€ç›®äº†ç„¶
âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç† - å¼‚å¸¸æç¤ºè§„èŒƒæ¸…æ™°
âœ… é™ä½ç»´æŠ¤æˆæœ¬ - ä»£ç ç®€æ´æ˜“ç»´æŠ¤
```

**å¯¹åç«¯å¼€å‘çš„å¥½å¤„ï¼š**
```
âœ… è§„èŒƒæ¥å£è®¾è®¡ - å›¢é˜Ÿåä½œæ›´é¡ºç•…
âœ… ç®€åŒ–è¿”å›é€»è¾‘ - å·¥å…·ç±»ç›´æ¥è°ƒç”¨
âœ… ä¾¿äºç»Ÿä¸€å¤„ç† - æ—¥å¿—ã€ç›‘æ§ã€å®¡è®¡
âœ… æå‡ä»£ç è´¨é‡ - å‡å°‘é‡å¤ä»£ç 
```

**é€šä¿—ç†è§£ï¼š**
> å°±åƒå…¨å›½ç»Ÿä¸€ä½¿ç”¨äººæ°‘å¸ï¼Œä¸ç®¡å»å“ªä¸ªåŸå¸‚ï¼Œç”¨çš„éƒ½æ˜¯ä¸€æ ·çš„è´§å¸ã€‚ç»Ÿä¸€å“åº”å°±æ˜¯è®©æ‰€æœ‰æ¥å£è¿”å›"åŒä¸€ç§æ ¼å¼çš„æ•°æ®"ï¼Œå‰ç«¯æ‹¿åˆ°åç›´æ¥æŒ‰ç»Ÿä¸€è§„åˆ™å¤„ç†å°±è¡Œã€‚

---

## 2. ğŸ“¦ ç»Ÿä¸€å“åº”Resultè®¾è®¡


### 2.1 æ ¸å¿ƒç»“æ„è®¾è®¡


**åŸºç¡€Resultç±»ï¼š**
```java
/**
 * ç»Ÿä¸€å“åº”ç»“æœç±»
 * è¿™æ˜¯æ‰€æœ‰æ¥å£è¿”å›æ•°æ®çš„"æ ‡å‡†å®¹å™¨"
 */
public class Result<T> {
    // å“åº”çŠ¶æ€ç ï¼š200æˆåŠŸï¼Œå…¶ä»–å¤±è´¥
    private Integer code;
    
    // å“åº”æ¶ˆæ¯ï¼šç»™ç”¨æˆ·çœ‹çš„æç¤ºä¿¡æ¯
    private String message;
    
    // å“åº”æ•°æ®ï¼šçœŸæ­£çš„ä¸šåŠ¡æ•°æ®
    private T data;
    
    // æ—¶é—´æˆ³ï¼šæ–¹ä¾¿è¿½è¸ªé—®é¢˜
    private Long timestamp;
}
```

**è®¾è®¡ç†å¿µï¼š**
```
codeï¼ˆçŠ¶æ€ç ï¼‰      â†’ å‘Šè¯‰å‰ç«¯ï¼šæˆåŠŸè¿˜æ˜¯å¤±è´¥
    â†“
messageï¼ˆæ¶ˆæ¯ï¼‰     â†’ å‘Šè¯‰ç”¨æˆ·ï¼šå‘ç”Ÿäº†ä»€ä¹ˆ
    â†“
dataï¼ˆæ•°æ®ï¼‰        â†’ ç»™å‰ç«¯ï¼šçœŸæ­£éœ€è¦çš„æ•°æ®
    â†“
timestampï¼ˆæ—¶é—´æˆ³ï¼‰  â†’ æ–¹ä¾¿è°ƒè¯•ï¼šè¯·æ±‚å‘ç”Ÿçš„æ—¶é—´
```

### 2.2 æ³›å‹è®¾è®¡çš„å¦™ç”¨


**ä¸ºä»€ä¹ˆä½¿ç”¨æ³›å‹`<T>`ï¼Ÿ**

**åœºæ™¯å¯¹æ¯”ï¼š**
```
ä¸ç”¨æ³›å‹çš„éº»çƒ¦ï¼š
Result result1 = new Result();
result1.setData(userInfo);  // å­˜ç”¨æˆ·ä¿¡æ¯
User user = (User) result1.getData();  // è¦å¼ºåˆ¶è½¬æ¢ï¼Œå®¹æ˜“å‡ºé”™

ä½¿ç”¨æ³›å‹çš„ä¾¿åˆ©ï¼š
Result<User> result2 = new Result<>();
result2.setData(userInfo);  // å­˜ç”¨æˆ·ä¿¡æ¯
User user = result2.getData();  // ç›´æ¥è·å–ï¼Œç±»å‹å®‰å…¨
```

**é€šä¿—ç†è§£ï¼š**
> æ³›å‹å°±åƒä¸€ä¸ª"ä¸‡èƒ½å®¹å™¨"ï¼Œå¯ä»¥è£…ç”¨æˆ·ä¿¡æ¯ã€è®¢å•æ•°æ®ã€å•†å“åˆ—è¡¨ç­‰ä»»ä½•æ•°æ®ï¼Œè€Œä¸”å–å‡ºæ¥çš„æ—¶å€™è‡ªåŠ¨å°±æ˜¯æ­£ç¡®çš„ç±»å‹ï¼Œä¸ç”¨æ‰‹åŠ¨è½¬æ¢ã€‚

---

## 3. âœ… æˆåŠŸä¸å¤±è´¥å“åº”å°è£…


### 3.1 æˆåŠŸå“åº”è®¾è®¡


**é™æ€å·¥å‚æ–¹æ³•ï¼š**
```java
public class Result<T> {
    /**
     * æˆåŠŸå“åº”ï¼ˆæ— æ•°æ®ï¼‰
     * é€‚ç”¨åœºæ™¯ï¼šåˆ é™¤æˆåŠŸã€ä¿®æ”¹æˆåŠŸç­‰æ— éœ€è¿”å›æ•°æ®çš„æ“ä½œ
     */
    public static <T> Result<T> success() {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage("æ“ä½œæˆåŠŸ");
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    /**
     * æˆåŠŸå“åº”ï¼ˆå¸¦æ•°æ®ï¼‰
     * é€‚ç”¨åœºæ™¯ï¼šæŸ¥è¯¢ç”¨æˆ·ã€è·å–åˆ—è¡¨ç­‰éœ€è¦è¿”å›æ•°æ®çš„æ“ä½œ
     */
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage("æ“ä½œæˆåŠŸ");
        result.setData(data);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    /**
     * æˆåŠŸå“åº”ï¼ˆè‡ªå®šä¹‰æ¶ˆæ¯ï¼‰
     */
    public static <T> Result<T> success(String message, T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage(message);
        result.setData(data);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    // åœºæ™¯1ï¼šåˆ é™¤æˆåŠŸï¼Œæ— éœ€è¿”å›æ•°æ®
    @DeleteMapping("/{id}")
    public Result<Void> deleteUser(@PathVariable Long id) {
        userService.deleteById(id);
        return Result.success();  // è¿”å›ï¼š{"code":200,"message":"æ“ä½œæˆåŠŸ"}
    }
    
    // åœºæ™¯2ï¼šæŸ¥è¯¢æˆåŠŸï¼Œè¿”å›ç”¨æˆ·æ•°æ®
    @GetMapping("/{id}")
    public Result<User> getUser(@PathVariable Long id) {
        User user = userService.getById(id);
        return Result.success(user);  // è¿”å›ï¼š{"code":200,"data":{ç”¨æˆ·ä¿¡æ¯}}
    }
    
    // åœºæ™¯3ï¼šè‡ªå®šä¹‰æˆåŠŸæ¶ˆæ¯
    @PostMapping
    public Result<User> createUser(@RequestBody User user) {
        userService.save(user);
        return Result.success("ç”¨æˆ·åˆ›å»ºæˆåŠŸ", user);
    }
}
```

### 3.2 å¤±è´¥å“åº”è®¾è®¡


**å¤±è´¥å“åº”å°è£…ï¼š**
```java
public class Result<T> {
    /**
     * å¤±è´¥å“åº”ï¼ˆä»…æ¶ˆæ¯ï¼‰
     */
    public static <T> Result<T> error(String message) {
        Result<T> result = new Result<>();
        result.setCode(500);  // é€šç”¨é”™è¯¯ç 
        result.setMessage(message);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    /**
     * å¤±è´¥å“åº”ï¼ˆè‡ªå®šä¹‰é”™è¯¯ç ï¼‰
     */
    public static <T> Result<T> error(Integer code, String message) {
        Result<T> result = new Result<>();
        result.setCode(code);
        result.setMessage(message);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    /**
     * å¤±è´¥å“åº”ï¼ˆä½¿ç”¨é”™è¯¯ç æšä¸¾ï¼‰
     */
    public static <T> Result<T> error(ErrorCode errorCode) {
        Result<T> result = new Result<>();
        result.setCode(errorCode.getCode());
        result.setMessage(errorCode.getMessage());
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
}
```

**ä½¿ç”¨åœºæ™¯ï¼š**
```java
// åœºæ™¯1ï¼šç®€å•é”™è¯¯æç¤º
if (user == null) {
    return Result.error("ç”¨æˆ·ä¸å­˜åœ¨");
}

// åœºæ™¯2ï¼šæŒ‡å®šé”™è¯¯ç 
if (!password.equals(dbPassword)) {
    return Result.error(401, "å¯†ç é”™è¯¯");
}

// åœºæ™¯3ï¼šä½¿ç”¨é”™è¯¯ç æšä¸¾ï¼ˆæ¨èï¼‰
if (user == null) {
    return Result.error(ErrorCode.USER_NOT_FOUND);
}
```

**æˆåŠŸä¸å¤±è´¥çš„å“åº”å¯¹æ¯”ï¼š**
```
æˆåŠŸå“åº”ç¤ºä¾‹ï¼š
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": { "id": 1, "name": "å¼ ä¸‰" },
    "timestamp": 1695456789000
}

å¤±è´¥å“åº”ç¤ºä¾‹ï¼š
{
    "code": 404,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "data": null,
    "timestamp": 1695456789000
}
```

---

## 4. ğŸ“„ åˆ†é¡µå“åº”ç»“æœå°è£…


### 4.1 åˆ†é¡µçš„ç‰¹æ®Šæ€§


**ä¸ºä»€ä¹ˆåˆ†é¡µéœ€è¦ç‰¹æ®Šå¤„ç†ï¼Ÿ**

**æ™®é€šæ•°æ® vs åˆ†é¡µæ•°æ®ï¼š**
```
æ™®é€šæŸ¥è¯¢è¿”å›ï¼š
ç›´æ¥è¿”å›æ•°æ®åˆ—è¡¨å°±è¡Œ
[{ç”¨æˆ·1}, {ç”¨æˆ·2}, {ç”¨æˆ·3}]

åˆ†é¡µæŸ¥è¯¢éœ€è¦ï¼š
ä¸ä»…è¦æ•°æ®ï¼Œè¿˜è¦çŸ¥é“æ€»å…±å¤šå°‘æ¡ã€å¤šå°‘é¡µ
{
    records: [{ç”¨æˆ·1}, {ç”¨æˆ·2}],  // å½“å‰é¡µæ•°æ®
    total: 100,                    // æ€»è®°å½•æ•°
    current: 1,                    // å½“å‰é¡µç 
    size: 10                       // æ¯é¡µå¤§å°
}
```

**é€šä¿—ç†è§£ï¼š**
> åˆ†é¡µå°±åƒçœ‹ä¹¦ï¼Œä¸ä»…è¦çŸ¥é“è¿™ä¸€é¡µçš„å†…å®¹ï¼Œè¿˜è¦çŸ¥é“æ€»å…±æœ‰å¤šå°‘é¡µã€ç°åœ¨çœ‹åˆ°ç¬¬å‡ é¡µï¼Œè¿™æ ·æ‰èƒ½ç¿»é¡µã€‚

### 4.2 åˆ†é¡µå“åº”è®¾è®¡


**PageResultå°è£…ï¼š**
```java
/**
 * åˆ†é¡µå“åº”ç»“æœ
 * ä¸“é—¨ç”¨äºè¿”å›åˆ†é¡µæ•°æ®
 */
public class PageResult<T> {
    // å½“å‰é¡µæ•°æ®åˆ—è¡¨
    private List<T> records;
    
    // æ€»è®°å½•æ•°
    private Long total;
    
    // å½“å‰é¡µç ï¼ˆç¬¬å‡ é¡µï¼‰
    private Long current;
    
    // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
    private Long size;
    
    // æ€»é¡µæ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
    public Long getPages() {
        if (size == 0) {
            return 0L;
        }
        return (total + size - 1) / size;
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```java
@GetMapping("/list")
public Result<PageResult<User>> getUserList(
    @RequestParam(defaultValue = "1") Integer page,
    @RequestParam(defaultValue = "10") Integer size) {
    
    // 1. æŸ¥è¯¢åˆ†é¡µæ•°æ®ï¼ˆä½¿ç”¨MyBatis-Plusï¼‰
    Page<User> userPage = new Page<>(page, size);
    userService.page(userPage);
    
    // 2. å°è£…åˆ†é¡µç»“æœ
    PageResult<User> pageResult = new PageResult<>();
    pageResult.setRecords(userPage.getRecords());  // å½“å‰é¡µæ•°æ®
    pageResult.setTotal(userPage.getTotal());      // æ€»è®°å½•æ•°
    pageResult.setCurrent(userPage.getCurrent());  // å½“å‰é¡µ
    pageResult.setSize(userPage.getSize());        // æ¯é¡µå¤§å°
    
    // 3. è¿”å›ç»Ÿä¸€å“åº”
    return Result.success(pageResult);
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
        "records": [
            {"id": 1, "name": "å¼ ä¸‰"},
            {"id": 2, "name": "æå››"}
        ],
        "total": 100,     // æ€»å…±100æ¡
        "current": 1,     // å½“å‰ç¬¬1é¡µ
        "size": 10,       // æ¯é¡µ10æ¡
        "pages": 10       // æ€»å…±10é¡µ
    },
    "timestamp": 1695456789000
}
```

### 4.3 åˆ†é¡µå·¥å…·ç±»ä¼˜åŒ–


**ç®€åŒ–åˆ†é¡µå°è£…ï¼š**
```java
public class PageUtils {
    /**
     * å°†MyBatis-Plusçš„Pageè½¬ä¸ºPageResult
     */
    public static <T> PageResult<T> convert(Page<T> page) {
        PageResult<T> result = new PageResult<>();
        result.setRecords(page.getRecords());
        result.setTotal(page.getTotal());
        result.setCurrent(page.getCurrent());
        result.setSize(page.getSize());
        return result;
    }
}

// ä½¿ç”¨å˜å¾—è¶…ç®€å•
@GetMapping("/list")
public Result<PageResult<User>> getUserList(Integer page, Integer size) {
    Page<User> userPage = userService.page(new Page<>(page, size));
    return Result.success(PageUtils.convert(userPage));  // ä¸€è¡Œæå®š
}
```

---

## 5. ğŸ”¢ é”™è¯¯ç ä¸ä¸šåŠ¡çŠ¶æ€ç 


### 5.1 é”™è¯¯ç è§„èŒƒè®¾è®¡


**ä»€ä¹ˆæ˜¯é”™è¯¯ç ï¼Ÿ**
> é”™è¯¯ç å°±åƒå¿«é€’åŒ…è£¹çš„"çŠ¶æ€ç "ï¼šç­¾æ”¶æˆåŠŸã€æ´¾é€ä¸­ã€åœ°å€é”™è¯¯...æ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªç¼–å·ï¼Œæ–¹ä¾¿è¿½è¸ªé—®é¢˜ã€‚

**é”™è¯¯ç è®¾è®¡åŸåˆ™ï¼š**

| é”™è¯¯ç èŒƒå›´ | å«ä¹‰ | ç¤ºä¾‹ |
|-----------|------|------|
| **2xx** | æˆåŠŸçŠ¶æ€ | `200` æ“ä½œæˆåŠŸ |
| **4xx** | å®¢æˆ·ç«¯é”™è¯¯ | `400` å‚æ•°é”™è¯¯ã€`401` æœªç™»å½•ã€`403` æ— æƒé™ã€`404` èµ„æºä¸å­˜åœ¨ |
| **5xx** | æœåŠ¡ç«¯é”™è¯¯ | `500` æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€`503` æœåŠ¡ä¸å¯ç”¨ |

**é”™è¯¯ç æšä¸¾ï¼š**
```java
/**
 * é”™è¯¯ç æšä¸¾
 * é›†ä¸­ç®¡ç†æ‰€æœ‰é”™è¯¯ç ï¼Œé¿å…ç¡¬ç¼–ç 
 */
public enum ErrorCode {
    // é€šç”¨é”™è¯¯ç 
    SUCCESS(200, "æ“ä½œæˆåŠŸ"),
    SYSTEM_ERROR(500, "ç³»ç»Ÿå¼‚å¸¸"),
    PARAM_ERROR(400, "å‚æ•°é”™è¯¯"),
    
    // è®¤è¯æˆæƒç›¸å…³
    UNAUTHORIZED(401, "æœªç™»å½•æˆ–ç™»å½•å·²è¿‡æœŸ"),
    FORBIDDEN(403, "æ²¡æœ‰è®¿é—®æƒé™"),
    
    // ä¸šåŠ¡é”™è¯¯ç 
    USER_NOT_FOUND(1001, "ç”¨æˆ·ä¸å­˜åœ¨"),
    USER_ALREADY_EXISTS(1002, "ç”¨æˆ·å·²å­˜åœ¨"),
    PASSWORD_ERROR(1003, "å¯†ç é”™è¯¯"),
    ACCOUNT_LOCKED(1004, "è´¦å·å·²è¢«é”å®š"),
    
    ORDER_NOT_FOUND(2001, "è®¢å•ä¸å­˜åœ¨"),
    ORDER_CANNOT_CANCEL(2002, "è®¢å•æ— æ³•å–æ¶ˆ"),
    INSUFFICIENT_BALANCE(2003, "ä½™é¢ä¸è¶³");
    
    private final Integer code;
    private final String message;
    
    ErrorCode(Integer code, String message) {
        this.code = code;
        this.message = message;
    }
    
    // Getteræ–¹æ³•
    public Integer getCode() { return code; }
    public String getMessage() { return message; }
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```java
@PostMapping("/login")
public Result<String> login(@RequestBody LoginDTO dto) {
    User user = userService.findByUsername(dto.getUsername());
    
    // ç”¨æˆ·ä¸å­˜åœ¨
    if (user == null) {
        return Result.error(ErrorCode.USER_NOT_FOUND);
    }
    
    // å¯†ç é”™è¯¯
    if (!dto.getPassword().equals(user.getPassword())) {
        return Result.error(ErrorCode.PASSWORD_ERROR);
    }
    
    // è´¦å·è¢«é”å®š
    if (user.getStatus() == 0) {
        return Result.error(ErrorCode.ACCOUNT_LOCKED);
    }
    
    // ç™»å½•æˆåŠŸ
    String token = JwtUtils.generateToken(user.getId());
    return Result.success(token);
}
```

### 5.2 ä¸šåŠ¡çŠ¶æ€ç è®¾è®¡


**ä¸šåŠ¡çŠ¶æ€ç  vs é”™è¯¯ç ï¼š**
```
é”™è¯¯ç ï¼šç³»ç»Ÿçº§åˆ«çš„çŠ¶æ€
200 æˆåŠŸã€404 ä¸å­˜åœ¨ã€500 æœåŠ¡å™¨é”™è¯¯...

ä¸šåŠ¡çŠ¶æ€ç ï¼šä¸šåŠ¡é€»è¾‘çš„çŠ¶æ€  
è®¢å•çŠ¶æ€ï¼šå¾…æ”¯ä»˜ã€å·²æ”¯ä»˜ã€å·²å‘è´§ã€å·²å®Œæˆ...
å®¡æ ¸çŠ¶æ€ï¼šå¾…å®¡æ ¸ã€å®¡æ ¸é€šè¿‡ã€å®¡æ ¸æ‹’ç»...
```

**ä¸šåŠ¡çŠ¶æ€ç ç¤ºä¾‹ï¼š**
```java
/**
 * è®¢å•çŠ¶æ€æšä¸¾
 */
public enum OrderStatus {
    PENDING_PAYMENT(1, "å¾…æ”¯ä»˜"),
    PAID(2, "å·²æ”¯ä»˜"),
    SHIPPED(3, "å·²å‘è´§"),
    RECEIVED(4, "å·²æ”¶è´§"),
    COMPLETED(5, "å·²å®Œæˆ"),
    CANCELLED(6, "å·²å–æ¶ˆ");
    
    private final Integer code;
    private final String desc;
    
    // æ„é€ å™¨å’ŒGetter...
}

/**
 * å®¡æ ¸çŠ¶æ€æšä¸¾
 */
public enum AuditStatus {
    PENDING(0, "å¾…å®¡æ ¸"),
    APPROVED(1, "å®¡æ ¸é€šè¿‡"),
    REJECTED(2, "å®¡æ ¸æ‹’ç»");
    
    private final Integer code;
    private final String desc;
    
    // æ„é€ å™¨å’ŒGetter...
}
```

**ä¸šåŠ¡çŠ¶æ€ç çš„ä½¿ç”¨ï¼š**
```java
@GetMapping("/order/{id}")
public Result<OrderVO> getOrder(@PathVariable Long id) {
    Order order = orderService.getById(id);
    if (order == null) {
        return Result.error(ErrorCode.ORDER_NOT_FOUND);
    }
    
    // å°†æ•°æ®åº“çš„çŠ¶æ€ç è½¬ä¸ºæšä¸¾
    OrderVO vo = new OrderVO();
    vo.setId(order.getId());
    vo.setStatusCode(order.getStatus());  // çŠ¶æ€ç ï¼š1,2,3...
    vo.setStatusDesc(OrderStatus.getByCode(order.getStatus()).getDesc());  // çŠ¶æ€æè¿°
    
    return Result.success(vo);
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
        "id": 1001,
        "statusCode": 2,
        "statusDesc": "å·²æ”¯ä»˜",
        "totalAmount": 299.00
    }
}
```

---

## 6. ğŸŒ å“åº”æ¶ˆæ¯å›½é™…åŒ–


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦å›½é™…åŒ–


**ä¸šåŠ¡åœºæ™¯ï¼š**
```
ä¸­æ–‡ç”¨æˆ·çœ‹åˆ°ï¼šç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
English user sees: Username or password is incorrect
æ—¥æœ¬äººãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™
```

**æ²¡æœ‰å›½é™…åŒ–çš„é—®é¢˜ï¼š**
```java
// ç¡¬ç¼–ç ä¸­æ–‡ï¼Œå¤–å›½ç”¨æˆ·çœ‹ä¸æ‡‚
if (user == null) {
    return Result.error("ç”¨æˆ·ä¸å­˜åœ¨");
}

// æ¯ç§è¯­è¨€å†™ä¸€å¥—ä»£ç ï¼Ÿå¤ªéº»çƒ¦äº†ï¼
if (locale.equals("zh_CN")) {
    return Result.error("ç”¨æˆ·ä¸å­˜åœ¨");
} else if (locale.equals("en_US")) {
    return Result.error("User not found");
}
```

### 6.2 å›½é™…åŒ–å®ç°æ–¹æ¡ˆ


**é…ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶ï¼š**
```
é¡¹ç›®ç»“æ„ï¼š
resources/
  â””â”€â”€ i18n/
      â”œâ”€â”€ messages.properties          # é»˜è®¤ï¼ˆä¸­æ–‡ï¼‰
      â”œâ”€â”€ messages_en_US.properties    # è‹±æ–‡
      â””â”€â”€ messages_ja_JP.properties    # æ—¥æ–‡
```

**èµ„æºæ–‡ä»¶å†…å®¹ï¼š**
```properties
# messages.properties (ä¸­æ–‡)
user.not.found=ç”¨æˆ·ä¸å­˜åœ¨
user.password.error=å¯†ç é”™è¯¯
operation.success=æ“ä½œæˆåŠŸ

# messages_en_US.properties (è‹±æ–‡)
user.not.found=User not found
user.password.error=Password is incorrect
operation.success=Operation successful

# messages_ja_JP.properties (æ—¥æ–‡)  
user.not.found=ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
user.password.error=ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™
operation.success=æ“ä½œãŒæˆåŠŸã—ã¾ã—ãŸ
```

**Springé…ç½®å›½é™…åŒ–ï¼š**
```java
@Configuration
public class I18nConfig {
    
    /**
     * é…ç½®æ¶ˆæ¯æº
     */
    @Bean
    public MessageSource messageSource() {
        ResourceBundleMessageSource messageSource = 
            new ResourceBundleMessageSource();
        messageSource.setBasename("i18n/messages");  // èµ„æºæ–‡ä»¶ä½ç½®
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }
    
    /**
     * é…ç½®è¯­è¨€è§£æå™¨ï¼ˆä»è¯·æ±‚å¤´è·å–è¯­è¨€ï¼‰
     */
    @Bean
    public LocaleResolver localeResolver() {
        AcceptHeaderLocaleResolver resolver = new AcceptHeaderLocaleResolver();
        resolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);  // é»˜è®¤ä¸­æ–‡
        return resolver;
    }
}
```

**å›½é™…åŒ–å·¥å…·ç±»ï¼š**
```java
@Component
public class I18nUtils {
    
    @Autowired
    private MessageSource messageSource;
    
    /**
     * è·å–å›½é™…åŒ–æ¶ˆæ¯
     * @param code æ¶ˆæ¯é”®ï¼ˆå¦‚ï¼šuser.not.foundï¼‰
     * @return å¯¹åº”è¯­è¨€çš„æ¶ˆæ¯
     */
    public String getMessage(String code) {
        // ä»è¯·æ±‚ä¸Šä¸‹æ–‡è·å–å½“å‰è¯­è¨€
        Locale locale = LocaleContextHolder.getLocale();
        return messageSource.getMessage(code, null, locale);
    }
    
    /**
     * è·å–å¸¦å‚æ•°çš„å›½é™…åŒ–æ¶ˆæ¯
     * @param code æ¶ˆæ¯é”®
     * @param args å‚æ•°ï¼ˆå¦‚ï¼šç”¨æˆ·åï¼‰
     */
    public String getMessage(String code, Object... args) {
        Locale locale = LocaleContextHolder.getLocale();
        return messageSource.getMessage(code, args, locale);
    }
}
```

**ä½¿ç”¨å›½é™…åŒ–ï¼š**
```java
@RestController
public class UserController {
    
    @Autowired
    private I18nUtils i18nUtils;
    
    @PostMapping("/login")
    public Result<String> login(@RequestBody LoginDTO dto) {
        User user = userService.findByUsername(dto.getUsername());
        
        if (user == null) {
            // è‡ªåŠ¨æ ¹æ®è¯·æ±‚å¤´çš„è¯­è¨€è¿”å›å¯¹åº”æ¶ˆæ¯
            String msg = i18nUtils.getMessage("user.not.found");
            return Result.error(msg);
        }
        
        if (!dto.getPassword().equals(user.getPassword())) {
            String msg = i18nUtils.getMessage("user.password.error");
            return Result.error(msg);
        }
        
        String token = JwtUtils.generateToken(user.getId());
        String msg = i18nUtils.getMessage("operation.success");
        return Result.success(msg, token);
    }
}
```

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```
ä¸­æ–‡è¯·æ±‚ï¼š
Request Headers: Accept-Language: zh-CN
Response: { "code": 404, "message": "ç”¨æˆ·ä¸å­˜åœ¨" }

è‹±æ–‡è¯·æ±‚ï¼š
Request Headers: Accept-Language: en-US  
Response: { "code": 404, "message": "User not found" }

æ—¥æ–‡è¯·æ±‚ï¼š
Request Headers: Accept-Language: ja-JP
Response: { "code": 404, "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“" }
```

---

## 7. ğŸ›¡ï¸ å…¨å±€å“åº”å¤„ç†


### 7.1 @ControllerAdviceç»Ÿä¸€å¼‚å¸¸å¤„ç†


**ä¸ºä»€ä¹ˆéœ€è¦å…¨å±€å¼‚å¸¸å¤„ç†ï¼Ÿ**

**æ²¡æœ‰å…¨å±€å¤„ç†çš„é—®é¢˜ï¼š**
```java
// æ¯ä¸ªæ–¹æ³•éƒ½è¦try-catchï¼Œä»£ç è‡ƒè‚¿
@GetMapping("/{id}")
public Result<User> getUser(@PathVariable Long id) {
    try {
        User user = userService.getById(id);
        return Result.success(user);
    } catch (Exception e) {
        e.printStackTrace();
        return Result.error("ç³»ç»Ÿå¼‚å¸¸");
    }
}

// å¿˜è®°try-catchï¼Œç›´æ¥500é”™è¯¯è¿”å›ç»™å‰ç«¯
@PostMapping
public Result<Void> createUser(@RequestBody User user) {
    userService.save(user);  // å¦‚æœå‡ºå¼‚å¸¸ï¼Œç›´æ¥500ï¼
    return Result.success();
}
```

**å…¨å±€å¼‚å¸¸å¤„ç†çš„ä¼˜åŠ¿ï¼š**
```
âœ… é›†ä¸­å¤„ç†å¼‚å¸¸ï¼Œä»£ç ç®€æ´
âœ… ç»Ÿä¸€å¼‚å¸¸å“åº”æ ¼å¼
âœ… æ–¹ä¾¿è®°å½•æ—¥å¿—å’Œç›‘æ§
âœ… ä¸šåŠ¡ä»£ç åªå…³æ³¨ä¸šåŠ¡é€»è¾‘
```

**@ControllerAdviceå®ç°ï¼š**
```java
/**
 * å…¨å±€å¼‚å¸¸å¤„ç†å™¨
 * æ•è·æ‰€æœ‰ControlleræŠ›å‡ºçš„å¼‚å¸¸ï¼Œç»Ÿä¸€å¤„ç†
 */
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    /**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     */
    @ExceptionHandler(BusinessException.class)
    public Result<Void> handleBusinessException(BusinessException e) {
        log.error("ä¸šåŠ¡å¼‚å¸¸ï¼š{}", e.getMessage());
        return Result.error(e.getCode(), e.getMessage());
    }
    
    /**
     * å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸
     */
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public Result<Void> handleValidException(MethodArgumentNotValidException e) {
        // è·å–ç¬¬ä¸€ä¸ªæ ¡éªŒå¤±è´¥çš„å­—æ®µä¿¡æ¯
        String message = e.getBindingResult()
            .getFieldError()
            .getDefaultMessage();
        log.error("å‚æ•°æ ¡éªŒå¤±è´¥ï¼š{}", message);
        return Result.error(400, message);
    }
    
    /**
     * å¤„ç†ç³»ç»Ÿå¼‚å¸¸
     */
    @ExceptionHandler(Exception.class)
    public Result<Void> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸", e);
        return Result.error(500, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

**è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ï¼š**
```java
/**
 * ä¸šåŠ¡å¼‚å¸¸
 * ç”¨äºä¸šåŠ¡é€»è¾‘ä¸­ä¸»åŠ¨æŠ›å‡ºçš„å¼‚å¸¸
 */
public class BusinessException extends RuntimeException {
    private Integer code;
    private String message;
    
    public BusinessException(ErrorCode errorCode) {
        this.code = errorCode.getCode();
        this.message = errorCode.getMessage();
    }
    
    public BusinessException(Integer code, String message) {
        this.code = code;
        this.message = message;
    }
    
    // Getter...
}
```

**ä¸šåŠ¡ä»£ç ä½¿ç”¨ï¼š**
```java
@Service
public class UserServiceImpl implements UserService {
    
    @Override
    public void deleteUser(Long id) {
        User user = userMapper.selectById(id);
        
        // ç”¨æˆ·ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
        if (user == null) {
            throw new BusinessException(ErrorCode.USER_NOT_FOUND);
        }
        
        // ç®¡ç†å‘˜ä¸èƒ½åˆ é™¤
        if (user.getRole().equals("ADMIN")) {
            throw new BusinessException(403, "ç®¡ç†å‘˜è´¦å·ä¸å…è®¸åˆ é™¤");
        }
        
        userMapper.deleteById(id);
    }
}

// Controllerä¸ç”¨try-catchï¼Œå¼‚å¸¸ä¼šè¢«å…¨å±€å¤„ç†
@DeleteMapping("/{id}")
public Result<Void> deleteUser(@PathVariable Long id) {
    userService.deleteUser(id);  // æœ‰å¼‚å¸¸è‡ªåŠ¨è¢«æ•è·
    return Result.success();
}
```

### 7.2 ResponseBodyAdviceå“åº”å¢å¼º


**ResponseBodyAdviceä½œç”¨ï¼š**
> åœ¨Controllerè¿”å›æ•°æ®ä¹‹å‰ï¼Œè‡ªåŠ¨æ‹¦æˆªå¹¶å¤„ç†å“åº”å†…å®¹ã€‚å°±åƒå¿«é€’æ‰“åŒ…å‰çš„"æœ€åæ£€æŸ¥"ï¼Œå¯ä»¥ç»Ÿä¸€æ·»åŠ æ ‡ç­¾ã€åŠ å¯†ã€å‹ç¼©ç­‰ã€‚

**è‡ªåŠ¨åŒ…è£…Resultï¼š**
```java
/**
 * å“åº”ä½“å¢å¼º
 * è‡ªåŠ¨å°†è¿”å›å€¼åŒ…è£…ä¸ºResult
 */
@RestControllerAdvice
public class ResponseAdvice implements ResponseBodyAdvice<Object> {
    
    /**
     * åˆ¤æ–­æ˜¯å¦éœ€è¦å¤„ç†
     */
    @Override
    public boolean supports(MethodParameter returnType, 
                           Class<? extends HttpMessageConverter<?>> converterType) {
        // å¦‚æœå·²ç»æ˜¯Resultç±»å‹ï¼Œå°±ä¸å¤„ç†
        return !returnType.getParameterType().equals(Result.class);
    }
    
    /**
     * å¤„ç†å“åº”ä½“
     */
    @Override
    public Object beforeBodyWrite(Object body, 
                                  MethodParameter returnType,
                                  MediaType selectedContentType,
                                  Class<? extends HttpMessageConverter<?>> selectedConverterType,
                                  ServerHttpRequest request,
                                  ServerHttpResponse response) {
        
        // è‡ªåŠ¨åŒ…è£…ä¸ºResult
        if (body instanceof String) {
            // Stringç±»å‹ç‰¹æ®Šå¤„ç†ï¼Œé¿å…åºåˆ—åŒ–é—®é¢˜
            return JSONObject.toJSONString(Result.success(body));
        }
        return Result.success(body);
    }
}
```

**ä½¿ç”¨æ•ˆæœï¼š**
```java
// ä¹‹å‰ï¼šéœ€è¦æ‰‹åŠ¨åŒ…è£…Result
@GetMapping("/{id}")
public Result<User> getUser(@PathVariable Long id) {
    User user = userService.getById(id);
    return Result.success(user);  // æ‰‹åŠ¨åŒ…è£…
}

// ä¹‹åï¼šç›´æ¥è¿”å›æ•°æ®ï¼Œè‡ªåŠ¨åŒ…è£…
@GetMapping("/{id}")
public User getUser(@PathVariable Long id) {
    return userService.getById(id);  // è‡ªåŠ¨åŒ…è£…ä¸ºResult
}

// å“åº”ç»“æœå®Œå…¨ä¸€æ ·ï¼š
// { "code": 200, "message": "æ“ä½œæˆåŠŸ", "data": {ç”¨æˆ·ä¿¡æ¯} }
```

**é€šä¿—ç†è§£ï¼š**
> ResponseBodyAdviceå°±åƒä¸€ä¸ª"è‡ªåŠ¨æ‰“åŒ…æœº"ï¼š
> - ä½ åªç®¡æŠŠå•†å“ï¼ˆæ•°æ®ï¼‰å‡†å¤‡å¥½
> - å®ƒè‡ªåŠ¨å¸®ä½ è£…è¿›æ ‡å‡†åŒ…è£…ç›’ï¼ˆResultï¼‰
> - è´´ä¸Šæ ‡ç­¾ï¼ˆcodeã€messageï¼‰
> - æœ€åäº¤ç»™å¿«é€’ï¼ˆè¿”å›ç»™å‰ç«¯ï¼‰

---

## 8. ğŸ“± æ¥å£ç‰ˆæœ¬æ§åˆ¶


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶


**ä¸šåŠ¡åœºæ™¯ï¼š**
```
APPå·²ç»å‘å¸ƒv1.0ï¼Œæ¥å£æ˜¯ /api/user/info

ç°åœ¨è¦å‡çº§v2.0ï¼Œæ¥å£è¿”å›æ ¼å¼å˜äº†ï¼š
v1.0: { "name": "å¼ ä¸‰", "age": 25 }
v2.0: { "userName": "å¼ ä¸‰", "userAge": 25, "avatar": "..." }

é—®é¢˜ï¼š
- æ—§ç‰ˆAPPè¿˜åœ¨ç”¨v1.0çš„æ ¼å¼
- æ–°ç‰ˆAPPéœ€è¦v2.0çš„æ ¼å¼  
- æ€ä¹ˆåŒæ—¶æ”¯æŒæ–°æ—§ç‰ˆæœ¬ï¼Ÿ
```

**ç‰ˆæœ¬æ§åˆ¶çš„å¿…è¦æ€§ï¼š**
```
âœ… å…¼å®¹æ—§ç‰ˆæœ¬ - è€ç”¨æˆ·ä¸å—å½±å“
âœ… å¹³æ»‘å‡çº§ - æ–°æ—§ç‰ˆæœ¬å…±å­˜
âœ… çµæ´»è°ƒæ•´ - ä¸åŒç‰ˆæœ¬ä¸åŒé€»è¾‘
âœ… é™ä½é£é™© - å‡ºé—®é¢˜å¯ä»¥å¿«é€Ÿå›é€€
```

### 8.2 URLç‰ˆæœ¬æ§åˆ¶


**å®ç°æ–¹å¼1ï¼šåœ¨URLè·¯å¾„ä¸­åŠ ç‰ˆæœ¬å·**
```java
/**
 * v1ç‰ˆæœ¬æ¥å£
 */
@RestController
@RequestMapping("/api/v1/user")
public class UserV1Controller {
    
    @GetMapping("/info")
    public Result<UserV1VO> getUserInfo() {
        UserV1VO vo = new UserV1VO();
        vo.setName("å¼ ä¸‰");
        vo.setAge(25);
        return Result.success(vo);
    }
}

/**
 * v2ç‰ˆæœ¬æ¥å£
 */
@RestController
@RequestMapping("/api/v2/user")
public class UserV2Controller {
    
    @GetMapping("/info")
    public Result<UserV2VO> getUserInfo() {
        UserV2VO vo = new UserV2VO();
        vo.setUserName("å¼ ä¸‰");
        vo.setUserAge(25);
        vo.setAvatar("http://xxx.jpg");
        return Result.success(vo);
    }
}
```

**è®¿é—®ç¤ºä¾‹ï¼š**
```
v1ç‰ˆæœ¬ï¼šGET /api/v1/user/info
è¿”å›ï¼š{ "code": 200, "data": { "name": "å¼ ä¸‰", "age": 25 } }

v2ç‰ˆæœ¬ï¼šGET /api/v2/user/info
è¿”å›ï¼š{ 
    "code": 200, 
    "data": { 
        "userName": "å¼ ä¸‰", 
        "userAge": 25, 
        "avatar": "http://xxx.jpg" 
    } 
}
```

### 8.3 è¯·æ±‚å¤´ç‰ˆæœ¬æ§åˆ¶


**å®ç°æ–¹å¼2ï¼šé€šè¿‡è¯·æ±‚å¤´ä¼ é€’ç‰ˆæœ¬å·**
```java
/**
 * è‡ªå®šä¹‰ç‰ˆæœ¬æ³¨è§£
 */
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface ApiVersion {
    String value() default "1.0";
}

/**
 * ç‰ˆæœ¬æ‹¦æˆªå™¨
 */
@Component
public class ApiVersionInterceptor implements HandlerInterceptor {
    
    @Override
    public boolean preHandle(HttpServletRequest request, 
                            HttpServletResponse response, 
                            Object handler) {
        
        if (handler instanceof HandlerMethod) {
            HandlerMethod method = (HandlerMethod) handler;
            
            // è·å–æ–¹æ³•ä¸Šçš„ç‰ˆæœ¬æ³¨è§£
            ApiVersion apiVersion = method.getMethodAnnotation(ApiVersion.class);
            if (apiVersion != null) {
                // è·å–è¯·æ±‚å¤´ä¸­çš„ç‰ˆæœ¬å·
                String requestVersion = request.getHeader("Api-Version");
                
                // ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œè¿”å›é”™è¯¯
                if (!apiVersion.value().equals(requestVersion)) {
                    response.setStatus(400);
                    return false;
                }
            }
        }
        return true;
    }
}
```

**ä½¿ç”¨æ³¨è§£æ§åˆ¶ç‰ˆæœ¬ï¼š**
```java
@RestController
@RequestMapping("/api/user")
public class UserController {
    
    /**
     * v1ç‰ˆæœ¬æ¥å£
     */
    @ApiVersion("1.0")
    @GetMapping("/info")
    public Result<UserV1VO> getUserInfoV1() {
        // v1é€»è¾‘
        return Result.success(new UserV1VO());
    }
    
    /**
     * v2ç‰ˆæœ¬æ¥å£
     */
    @ApiVersion("2.0")
    @GetMapping("/info")
    public Result<UserV2VO> getUserInfoV2() {
        // v2é€»è¾‘
        return Result.success(new UserV2VO());
    }
}
```

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```
v1è¯·æ±‚ï¼š
GET /api/user/info
Headers: Api-Version: 1.0

v2è¯·æ±‚ï¼š
GET /api/user/info  
Headers: Api-Version: 2.0
```

### 8.4 ç‰ˆæœ¬æ§åˆ¶æœ€ä½³å®è·µ


**ç‰ˆæœ¬ç­–ç•¥å¯¹æ¯”ï¼š**

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **URLç‰ˆæœ¬** | ç›´è§‚æ¸…æ™°ï¼Œæ˜“äºç†è§£ | URLå˜é•¿ï¼Œéœ€è¦å¤šä¸ªController | ç‰ˆæœ¬å·®å¼‚å¤§ |
| **è¯·æ±‚å¤´ç‰ˆæœ¬** | URLç®€æ´ï¼ŒåŒä¸€æ¥å£å¤šç‰ˆæœ¬ | ä¸å¤Ÿç›´è§‚ï¼Œè°ƒè¯•ä¸ä¾¿ | ç‰ˆæœ¬å·®å¼‚å° |
| **å‚æ•°ç‰ˆæœ¬** | çµæ´»ï¼Œå¯é€‰å‡çº§ | å®¹æ˜“æ··ä¹±ï¼Œä¸æ¨è | ä¸´æ—¶å…¼å®¹ |

**æ¨èåšæ³•ï¼š**
```
1. å¤§ç‰ˆæœ¬ç”¨URLï¼š/api/v1/ã€/api/v2/
2. å°ç‰ˆæœ¬ç”¨è¯·æ±‚å¤´ï¼šApi-Version: 2.1
3. å“åº”ä¸­è¿”å›ç‰ˆæœ¬ä¿¡æ¯
4. æ–‡æ¡£æ˜ç¡®æ ‡æ³¨ç‰ˆæœ¬å·®å¼‚
5. è®¾ç½®ç‰ˆæœ¬è¿‡æœŸæ—¶é—´ï¼ˆå¦‚v1æ”¯æŒåˆ°2024å¹´åº•ï¼‰
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç»Ÿä¸€å“åº”ï¼šæ‰€æœ‰æ¥å£è¿”å›ç»Ÿä¸€çš„Resultæ ¼å¼
ğŸ”¸ æˆåŠŸå¤±è´¥ï¼šsuccess()å¤„ç†æˆåŠŸï¼Œerror()å¤„ç†å¤±è´¥
ğŸ”¸ åˆ†é¡µå°è£…ï¼šPageResultä¸“é—¨å¤„ç†åˆ†é¡µæ•°æ®
ğŸ”¸ é”™è¯¯ç ï¼šç”¨æšä¸¾ç®¡ç†é”™è¯¯ç ï¼Œé¿å…ç¡¬ç¼–ç 
ğŸ”¸ å›½é™…åŒ–ï¼šMessageSourceå®ç°å¤šè¯­è¨€æ”¯æŒ
ğŸ”¸ å…¨å±€å¤„ç†ï¼š@ControllerAdviceç»Ÿä¸€å¼‚å¸¸å¤„ç†
ğŸ”¸ å“åº”å¢å¼ºï¼šResponseBodyAdviceè‡ªåŠ¨åŒ…è£…è¿”å›å€¼
ğŸ”¸ ç‰ˆæœ¬æ§åˆ¶ï¼šURLæˆ–è¯·æ±‚å¤´æ–¹å¼æ§åˆ¶æ¥å£ç‰ˆæœ¬
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç»Ÿä¸€å“åº”çš„æ ¸å¿ƒä»·å€¼**
```
ç»Ÿä¸€æ ¼å¼ï¼šå‰ç«¯åªéœ€ä¸€å¥—è§£æé€»è¾‘
ç»Ÿä¸€å¤„ç†ï¼šåç«¯é›†ä¸­ç®¡ç†å“åº”è§„èŒƒ
ç»Ÿä¸€ç»´æŠ¤ï¼šé™ä½å›¢é˜Ÿåä½œæˆæœ¬
```

**ğŸ”¹ é”™è¯¯ç è®¾è®¡åŸåˆ™**
```
ç³»ç»Ÿé”™è¯¯ç ï¼š2xxæˆåŠŸã€4xxå®¢æˆ·ç«¯é”™è¯¯ã€5xxæœåŠ¡å™¨é”™è¯¯
ä¸šåŠ¡çŠ¶æ€ç ï¼šè®¢å•çŠ¶æ€ã€å®¡æ ¸çŠ¶æ€ç­‰ä¸šåŠ¡é€»è¾‘çŠ¶æ€
ç”¨æšä¸¾ç®¡ç†ï¼šé¿å…é­”æ³•æ•°å­—ï¼Œä¾¿äºç»´æŠ¤
```

**ğŸ”¹ å…¨å±€å¤„ç†çš„å¥½å¤„**
```
ä¸šåŠ¡ä»£ç ç®€æ´ï¼šä¸ç”¨åˆ°å¤„try-catch
å¼‚å¸¸ç»Ÿä¸€å¤„ç†ï¼šé›†ä¸­è®°å½•æ—¥å¿—å’Œç›‘æ§
å“åº”æ ¼å¼ç»Ÿä¸€ï¼šè‡ªåŠ¨åŒ…è£…ä¸ºResult
```

**ğŸ”¹ ç‰ˆæœ¬æ§åˆ¶çš„ç­–ç•¥**
```
URLç‰ˆæœ¬ï¼š/api/v1/ã€/api/v2/ï¼ˆæ¨èï¼‰
è¯·æ±‚å¤´ç‰ˆæœ¬ï¼šApi-Version: 1.0ï¼ˆè¾…åŠ©ï¼‰
å¹³æ»‘å‡çº§ï¼šæ–°æ—§ç‰ˆæœ¬å…±å­˜è¿‡æ¸¡
æ–‡æ¡£æ¸…æ™°ï¼šæ˜ç¡®ç‰ˆæœ¬å·®å¼‚å’Œè¿‡æœŸæ—¶é—´
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ä¸šåŠ¡å¼€å‘åœºæ™¯ï¼š**
- **æ ‡å‡†åŒ–æ¥å£** - å›¢é˜Ÿåä½œè§„èŒƒç»Ÿä¸€
- **é”™è¯¯è¿½è¸ª** - é€šè¿‡é”™è¯¯ç å¿«é€Ÿå®šä½é—®é¢˜
- **å›½é™…åŒ–æ”¯æŒ** - å¤šè¯­è¨€ç¯å¢ƒè½»æ¾é€‚é…
- **ç‰ˆæœ¬ç®¡ç†** - APPå‡çº§å¹³æ»‘è¿‡æ¸¡

**å‰åç«¯åä½œï¼š**
- **å‰ç«¯å¼€å‘** - ç»Ÿä¸€å“åº”æ ¼å¼ï¼Œç®€åŒ–æ•°æ®è§£æ
- **æ¥å£æ–‡æ¡£** - è§„èŒƒæ¸…æ™°ï¼Œæ˜“äºç†è§£
- **é—®é¢˜æ’æŸ¥** - é”™è¯¯ç å®šä½é—®é¢˜å¿«é€Ÿå‡†ç¡®

**ç³»ç»Ÿç»´æŠ¤ï¼š**
- **æ—¥å¿—ç›‘æ§** - ç»Ÿä¸€å“åº”ä¾¿äºæ—¥å¿—åˆ†æ
- **æ€§èƒ½ä¼˜åŒ–** - é›†ä¸­å¤„ç†ä¾¿äºä¼˜åŒ–è°ƒæ•´
- **å®‰å…¨åŠ å›º** - ç»Ÿä¸€æ‹¦æˆªï¼Œå¢å¼ºå®‰å…¨æ€§

**æ ¸å¿ƒè®°å¿†ï¼š**
- ç»Ÿä¸€å“åº”æ˜¯è§„èŒƒï¼ŒResultæ ¼å¼èµ°å¤©ä¸‹
- é”™è¯¯ç æšä¸¾æ¥ç®¡ç†ï¼Œä¸šåŠ¡çŠ¶æ€åˆ†å¼€æŠ“
- å…¨å±€å¤„ç†å¾ˆé‡è¦ï¼Œå¼‚å¸¸å“åº”éƒ½ä¸æ€•
- å›½é™…åŒ–å¤šè¯­è¨€ï¼Œç‰ˆæœ¬æ§åˆ¶è¦è§„åˆ’