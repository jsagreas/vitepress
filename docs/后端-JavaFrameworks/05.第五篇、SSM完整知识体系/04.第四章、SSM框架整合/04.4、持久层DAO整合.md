---
title: 4ã€æŒä¹…å±‚DAOæ•´åˆ
---
## ğŸ“š ç›®å½•

1. [æŒä¹…å±‚DAOåŸºç¡€æ¦‚å¿µ](#1-æŒä¹…å±‚DAOåŸºç¡€æ¦‚å¿µ)
2. [Mapperæ¥å£è®¾è®¡](#2-Mapperæ¥å£è®¾è®¡)
3. [é€šç”¨Mapperè®¾è®¡](#3-é€šç”¨Mapperè®¾è®¡)
4. [åŸºç¡€CRUDæ“ä½œ](#4-åŸºç¡€CRUDæ“ä½œ)
5. [æ‰¹é‡æ“ä½œå®ç°](#5-æ‰¹é‡æ“ä½œå®ç°)
6. [åˆ†é¡µæŸ¥è¯¢å®ç°](#6-åˆ†é¡µæŸ¥è¯¢å®ç°)
7. [æ¡ä»¶æŸ¥è¯¢æ„å»º](#7-æ¡ä»¶æŸ¥è¯¢æ„å»º)
8. [æ’åºä¸ç»Ÿè®¡å¤„ç†](#8-æ’åºä¸ç»Ÿè®¡å¤„ç†)
9. [å­˜å‚¨è¿‡ç¨‹è°ƒç”¨](#9-å­˜å‚¨è¿‡ç¨‹è°ƒç”¨)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æŒä¹…å±‚DAOåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯DAOå±‚


> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> DAOï¼ˆData Access Objectï¼‰æ•°æ®è®¿é—®å¯¹è±¡ï¼Œæ˜¯æŒä¹…å±‚çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ä¸æ•°æ®åº“æ‰“äº¤é“

**é€šä¿—ç†è§£**ï¼š
```
æŠŠDAOæƒ³è±¡æˆ"æ•°æ®åº“çš„ç¿»è¯‘å®˜"
- ä¸šåŠ¡å±‚è¯´"æˆ‘è¦ç”¨æˆ·ä¿¡æ¯"
- DAOå±‚è´Ÿè´£å»æ•°æ®åº“å–æ•°æ®
- å–å›æ¥åç¿»è¯‘æˆä¸šåŠ¡å±‚èƒ½ç”¨çš„å¯¹è±¡

å°±åƒä½ å»å›½å¤–é¤å…ç‚¹èœï¼š
ä½ ï¼ˆä¸šåŠ¡å±‚ï¼‰â†’ æœåŠ¡å‘˜ï¼ˆDAOï¼‰â†’ å¨æˆ¿ï¼ˆæ•°æ®åº“ï¼‰
```

**DAOçš„æ ¸å¿ƒä½œç”¨**ï¼š
- **éš”ç¦»æ•°æ®è®¿é—®**ï¼šä¸šåŠ¡ä»£ç ä¸ç›´æ¥æ“ä½œæ•°æ®åº“
- **å°è£…SQLæ“ä½œ**ï¼šæŠŠå¤æ‚çš„SQLè¯­å¥å°è£…æˆç®€å•æ–¹æ³•
- **ç»Ÿä¸€å¼‚å¸¸å¤„ç†**ï¼šæ•°æ®åº“å¼‚å¸¸ç»Ÿä¸€è½¬æ¢
- **æé«˜å¯ç»´æŠ¤æ€§**ï¼šæ•°æ®åº“æ“ä½œé›†ä¸­ç®¡ç†

### 1.2 SSMä¸­çš„æŒä¹…å±‚æ¶æ„


**ä¸‰å±‚æ¶æ„å¯¹åº”å…³ç³»**ï¼š
```
Controllerå±‚ï¼ˆæ§åˆ¶å±‚ï¼‰
    â†“ è°ƒç”¨
Serviceå±‚ï¼ˆä¸šåŠ¡å±‚ï¼‰
    â†“ è°ƒç”¨
DAOå±‚ï¼ˆæŒä¹…å±‚ï¼‰
    â†“ æ“ä½œ
æ•°æ®åº“ï¼ˆMySQL/Oracleç­‰ï¼‰
```

**åœ¨SSMæ¡†æ¶ä¸­**ï¼š
- **MyBatis** = æŒä¹…å±‚æ¡†æ¶
- **Mapperæ¥å£** = DAOæ¥å£çš„ç°ä»£å®ç°
- **Mapper.xml** = SQLè¯­å¥çš„é…ç½®æ–‡ä»¶
- **Spring** = ç®¡ç†DAOå±‚çš„ç”Ÿå‘½å‘¨æœŸ

---

## 2. ğŸ”§ Mapperæ¥å£è®¾è®¡


### 2.1 ä»€ä¹ˆæ˜¯Mapperæ¥å£


**ä¼ ç»ŸDAO vs Mapperå¯¹æ¯”**ï¼š

| å¯¹æ¯”é¡¹ | **ä¼ ç»ŸDAO** | **Mapperæ¥å£** | **ä¼˜åŠ¿** |
|-------|------------|---------------|---------|
| å®ç°æ–¹å¼ | éœ€è¦å†™å®ç°ç±» | åªéœ€è¦æ¥å£ | ä»£ç é‡å‡å°‘80% |
| SQLä½ç½® | å†™åœ¨Javaä»£ç é‡Œ | å†™åœ¨XMLæ–‡ä»¶é‡Œ | SQLå’Œä»£ç åˆ†ç¦» |
| æ–¹æ³•è°ƒç”¨ | `userDao.findById(1)` | `userMapper.selectById(1)` | æ›´ç›´è§‚ |
| ç»´æŠ¤æˆæœ¬ | é«˜ï¼Œä¿®æ”¹SQLè¦æ”¹ä»£ç  | ä½ï¼Œåªæ”¹XML | æ›´æ˜“ç»´æŠ¤ |

### 2.2 Mapperæ¥å£è§„èŒƒ


> ğŸ’¡ **è®¾è®¡åŸåˆ™**  
> æ¥å£æ–¹æ³•åè¦è§åçŸ¥æ„ï¼Œå‚æ•°ç±»å‹è¦æ˜ç¡®ï¼Œè¿”å›å€¼è¦åˆç†

**åŸºæœ¬è§„èŒƒç¤ºä¾‹**ï¼š
```java
public interface UserMapper {
    // âœ… å¥½çš„å‘½åï¼šåŠ¨è¯ + åè¯ï¼Œæ¸…æ™°æ˜äº†
    User selectById(Long id);
    List<User> selectAll();
    int insert(User user);
    int updateById(User user);
    int deleteById(Long id);
    
    // âŒ ä¸å¥½çš„å‘½åï¼šå«ç³Šä¸æ¸…
    User get(Long id);        // getä»€ä¹ˆï¼Ÿ
    List<User> find();        // findä»€ä¹ˆæ¡ä»¶ï¼Ÿ
    void save(User user);     // è¿”å›å€¼ä¸æ˜ç¡®
}
```

**å‘½åçº¦å®š**ï¼š
```
æŸ¥è¯¢æ“ä½œï¼šselectã€findã€getã€query
æ’å…¥æ“ä½œï¼šinsertã€addã€save
æ›´æ–°æ“ä½œï¼šupdateã€modify
åˆ é™¤æ“ä½œï¼šdeleteã€remove
ç»Ÿè®¡æ“ä½œï¼šcountã€sumã€avg
```

### 2.3 å‚æ•°ä¼ é€’æ–¹å¼


**å•ä¸ªå‚æ•°ä¼ é€’**ï¼š
```java
// ç®€å•ç±»å‹å‚æ•°
User selectById(Long id);
List<User> selectByName(String name);

// å¯¹åº”çš„XMLï¼ˆç®€åŒ–å†™æ³•ï¼‰
<select id="selectById" resultType="User">
    SELECT * FROM user WHERE id = #{id}
</select>
```

**å¤šä¸ªå‚æ•°ä¼ é€’**ï¼ˆä¸‰ç§æ–¹å¼ï¼‰ï¼š

ğŸ“Œ **æ–¹å¼1ï¼šä½¿ç”¨@Paramæ³¨è§£ï¼ˆæ¨èï¼‰**
```java
// æ¥å£æ–¹æ³•
List<User> selectByCondition(
    @Param("name") String name,
    @Param("age") Integer age
);

// XMLä¸­ä½¿ç”¨
<select id="selectByCondition" resultType="User">
    SELECT * FROM user 
    WHERE name = #{name} AND age = #{age}
</select>
```

ğŸ“Œ **æ–¹å¼2ï¼šä½¿ç”¨å¯¹è±¡å°è£…**
```java
// åˆ›å»ºæŸ¥è¯¢æ¡ä»¶å¯¹è±¡
public class UserQuery {
    private String name;
    private Integer age;
    // getter/setter...
}

// æ¥å£æ–¹æ³•
List<User> selectByQuery(UserQuery query);

// XMLä¸­ä½¿ç”¨å¯¹è±¡å±æ€§
<select id="selectByQuery" resultType="User">
    SELECT * FROM user 
    WHERE name = #{name} AND age = #{age}
</select>
```

ğŸ“Œ **æ–¹å¼3ï¼šä½¿ç”¨Mapä¼ å‚**
```java
// æ¥å£æ–¹æ³•
List<User> selectByMap(Map<String, Object> params);

// è°ƒç”¨æ–¹å¼
Map<String, Object> params = new HashMap<>();
params.put("name", "å¼ ä¸‰");
params.put("age", 25);
List<User> users = userMapper.selectByMap(params);
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> - æ¨èä½¿ç”¨@Paramæ³¨è§£ï¼Œå‚æ•°å«ä¹‰æœ€æ¸…æ™°
> - å‚æ•°è¶…è¿‡3ä¸ªæ—¶ï¼Œå»ºè®®å°è£…æˆå¯¹è±¡
> - Mapä¼ å‚è™½ç„¶çµæ´»ä½†å¯è¯»æ€§å·®ï¼Œä¸æ¨è

---

## 3. ğŸ”¨ é€šç”¨Mapperè®¾è®¡


### 3.1 ä»€ä¹ˆæ˜¯é€šç”¨Mapper


**é—®é¢˜åœºæ™¯**ï¼š
```
æ¯ä¸ªå®ä½“ç±»éƒ½è¦å†™åŸºç¡€çš„å¢åˆ æ”¹æŸ¥
UserMapper    â†’ insertã€deleteã€updateã€select
ProductMapper â†’ insertã€deleteã€updateã€select
OrderMapper   â†’ insertã€deleteã€updateã€select
... é‡å¤åŠ³åŠ¨å¤ªå¤šï¼
```

**é€šç”¨Mapperè§£å†³æ–¹æ¡ˆ**ï¼š
```
å®šä¹‰ä¸€ä¸ªé€šç”¨çš„åŸºç¡€æ¥å£
æ‰€æœ‰Mapperç»§æ‰¿å®ƒï¼Œè‡ªåŠ¨æ‹¥æœ‰åŸºç¡€æ–¹æ³•
åªéœ€è¦å†™ç‰¹æ®Šçš„ä¸šåŠ¡æ–¹æ³•å³å¯
```

### 3.2 è‡ªå®šä¹‰é€šç”¨Mapper


**åŸºç¡€ç‰ˆé€šç”¨æ¥å£**ï¼š
```java
/**
 * é€šç”¨MapperåŸºç¡€æ¥å£
 * @param <T> å®ä½“ç±»ç±»å‹
 * @param <ID> ä¸»é”®ç±»å‹
 */
public interface BaseMapper<T, ID> {
    // æ’å…¥
    int insert(T entity);
    
    // æ ¹æ®IDåˆ é™¤
    int deleteById(ID id);
    
    // æ ¹æ®IDæ›´æ–°
    int updateById(T entity);
    
    // æ ¹æ®IDæŸ¥è¯¢
    T selectById(ID id);
    
    // æŸ¥è¯¢æ‰€æœ‰
    List<T> selectAll();
}
```

**å…·ä½“Mapperç»§æ‰¿**ï¼š
```java
// UserMapperç»§æ‰¿é€šç”¨æ¥å£
public interface UserMapper extends BaseMapper<User, Long> {
    // å·²ç»æ‹¥æœ‰äº†åŸºç¡€çš„5ä¸ªæ–¹æ³•
    // åªéœ€è¦å†™ç‰¹æ®Šçš„ä¸šåŠ¡æ–¹æ³•
    List<User> selectByDepartment(String department);
    User selectByEmail(String email);
}

// ProductMapperç»§æ‰¿é€šç”¨æ¥å£  
public interface ProductMapper extends BaseMapper<Product, Long> {
    // ä¹Ÿè‡ªåŠ¨æ‹¥æœ‰åŸºç¡€æ–¹æ³•
    List<Product> selectByCategory(String category);
}
```

### 3.3 ä½¿ç”¨MyBatis-Plusé€šç”¨Mapper


> ğŸ”¥ **æ¨èæ–¹æ¡ˆ**  
> MyBatis-Plusæä¾›äº†æ›´å¼ºå¤§çš„é€šç”¨Mapperï¼Œå¼€ç®±å³ç”¨

**å¼•å…¥ä¾èµ–**ï¼š
```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.3</version>
</dependency>
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```java
// 1. Mapperæ¥å£ç»§æ‰¿BaseMapper
public interface UserMapper extends BaseMapper<User> {
    // ä¸ç”¨å†™ä»»ä½•æ–¹æ³•ï¼Œå·²ç»æœ‰äº†å‡ åä¸ªå¸¸ç”¨æ–¹æ³•ï¼
}

// 2. å®ä½“ç±»é…ç½®
@TableName("user")  // æŒ‡å®šè¡¨å
public class User {
    @TableId(type = IdType.AUTO)  // ä¸»é”®è‡ªå¢
    private Long id;
    
    private String name;
    
    @TableField("user_age")  // å­—æ®µåæ˜ å°„
    private Integer age;
}

// 3. ç›´æ¥ä½¿ç”¨ï¼ˆè‡ªåŠ¨æ‹¥æœ‰çš„æ–¹æ³•ï¼‰
userMapper.insert(user);           // æ’å…¥
userMapper.deleteById(1L);         // åˆ é™¤
userMapper.updateById(user);       // æ›´æ–°
userMapper.selectById(1L);         // æŸ¥è¯¢
userMapper.selectList(null);       // æŸ¥è¯¢æ‰€æœ‰
```

**MyBatis-Plusæä¾›çš„å¸¸ç”¨æ–¹æ³•**ï¼š
```
ğŸ”¸ æ’å…¥æ“ä½œï¼š
   insert(T entity)

ğŸ”¸ åˆ é™¤æ“ä½œï¼š
   deleteById(Serializable id)
   deleteByMap(Map<String, Object> columnMap)
   delete(Wrapper<T> wrapper)
   deleteBatchIds(Collection<? extends Serializable> idList)

ğŸ”¸ æ›´æ–°æ“ä½œï¼š
   updateById(T entity)
   update(T entity, Wrapper<T> updateWrapper)

ğŸ”¸ æŸ¥è¯¢æ“ä½œï¼š
   selectById(Serializable id)
   selectBatchIds(Collection<? extends Serializable> idList)
   selectByMap(Map<String, Object> columnMap)
   selectOne(Wrapper<T> queryWrapper)
   selectList(Wrapper<T> queryWrapper)
   selectPage(IPage<T> page, Wrapper<T> queryWrapper)
```

---

## 4. âœï¸ åŸºç¡€CRUDæ“ä½œ


### 4.1 æ–°å¢æ“ä½œï¼ˆCreateï¼‰


**å•æ¡æ’å…¥**ï¼š
```java
// Mapperæ¥å£
int insert(User user);

// XMLé…ç½®
<insert id="insert" parameterType="User">
    INSERT INTO user (name, age, email, create_time)
    VALUES (#{name}, #{age}, #{email}, #{createTime})
</insert>

// Serviceå±‚è°ƒç”¨
public void addUser(User user) {
    user.setCreateTime(new Date());
    int rows = userMapper.insert(user);
    if (rows > 0) {
        System.out.println("æ’å…¥æˆåŠŸ");
    }
}
```

**è·å–è‡ªå¢ä¸»é”®**ï¼š
```java
// æ–¹å¼1ï¼šä½¿ç”¨useGeneratedKeysï¼ˆæ¨èï¼‰
<insert id="insert" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO user (name, age) VALUES (#{name}, #{age})
</insert>

// æ’å…¥åï¼Œuserå¯¹è±¡çš„idå±æ€§ä¼šè‡ªåŠ¨èµ‹å€¼
User user = new User("å¼ ä¸‰", 25);
userMapper.insert(user);
System.out.println("æ–°å¢çš„IDï¼š" + user.getId());

// æ–¹å¼2ï¼šä½¿ç”¨selectKey
<insert id="insert">
    <selectKey keyProperty="id" order="AFTER" resultType="long">
        SELECT LAST_INSERT_ID()
    </selectKey>
    INSERT INTO user (name, age) VALUES (#{name}, #{age})
</insert>
```

### 4.2 åˆ é™¤æ“ä½œï¼ˆDeleteï¼‰


**æ ¹æ®IDåˆ é™¤**ï¼š
```java
// Mapperæ¥å£
int deleteById(Long id);

// XMLé…ç½®
<delete id="deleteById">
    DELETE FROM user WHERE id = #{id}
</delete>
```

**æ¡ä»¶åˆ é™¤**ï¼š
```java
// åˆ é™¤æŸä¸ªéƒ¨é—¨çš„æ‰€æœ‰ç”¨æˆ·
int deleteByDepartment(String department);

<delete id="deleteByDepartment">
    DELETE FROM user WHERE department = #{department}
</delete>
```

### 4.3 ä¿®æ”¹æ“ä½œï¼ˆUpdateï¼‰


**å…¨é‡æ›´æ–°**ï¼š
```java
// æ›´æ–°æ‰€æœ‰å­—æ®µï¼ˆåŒ…æ‹¬nullå€¼ï¼‰
int updateById(User user);

<update id="updateById">
    UPDATE user 
    SET name = #{name}, 
        age = #{age},
        email = #{email}
    WHERE id = #{id}
</update>
```

**é€‰æ‹©æ€§æ›´æ–°ï¼ˆåªæ›´æ–°énullå­—æ®µï¼‰**ï¼š
```java
<update id="updateSelective">
    UPDATE user
    <set>
        <if test="name != null">name = #{name},</if>
        <if test="age != null">age = #{age},</if>
        <if test="email != null">email = #{email},</if>
    </set>
    WHERE id = #{id}
</update>

// ä½¿ç”¨ç¤ºä¾‹
User user = new User();
user.setId(1L);
user.setName("æå››");  // åªæ›´æ–°nameï¼Œå…¶ä»–å­—æ®µä¸å˜
userMapper.updateSelective(user);
```

### 4.4 æŸ¥è¯¢æ“ä½œï¼ˆReadï¼‰


**å•æ¡æŸ¥è¯¢**ï¼š
```java
// æ ¹æ®IDæŸ¥è¯¢
User selectById(Long id);

<select id="selectById" resultType="User">
    SELECT * FROM user WHERE id = #{id}
</select>
```

**åˆ—è¡¨æŸ¥è¯¢**ï¼š
```java
// æŸ¥è¯¢æ‰€æœ‰
List<User> selectAll();

<select id="selectAll" resultType="User">
    SELECT * FROM user
</select>

// æ¡ä»¶æŸ¥è¯¢
List<User> selectByAge(Integer age);

<select id="selectByAge" resultType="User">
    SELECT * FROM user WHERE age = #{age}
</select>
```

**è¿”å›å€¼å¤„ç†**ï¼š
```
æŸ¥è¯¢å•æ¡ï¼šè¿”å›å®ä½“å¯¹è±¡ï¼ˆUserï¼‰
æŸ¥è¯¢å¤šæ¡ï¼šè¿”å›Listé›†åˆï¼ˆList<User>ï¼‰
æŸ¥è¯¢ä¸åˆ°ï¼šè¿”å›nullæˆ–ç©ºList
æŸ¥è¯¢ç»Ÿè®¡ï¼šè¿”å›åŸºæœ¬ç±»å‹ï¼ˆintã€longï¼‰
```

---

## 5. ğŸ”„ æ‰¹é‡æ“ä½œå®ç°


### 5.1 æ‰¹é‡æ’å…¥


**æ–¹å¼1ï¼šå¾ªç¯æ’å…¥ï¼ˆä¸æ¨èï¼‰**
```java
// âŒ æ•ˆç‡ä½ï¼šæ¯æ¡SQLéƒ½è¦å’Œæ•°æ®åº“äº¤äº’ä¸€æ¬¡
public void batchInsert(List<User> users) {
    for (User user : users) {
        userMapper.insert(user);  // Næ¬¡æ•°æ®åº“äº¤äº’
    }
}
```

**æ–¹å¼2ï¼šæ‰¹é‡SQLï¼ˆæ¨èï¼‰**
```java
// âœ… é«˜æ•ˆï¼šä¸€æ¬¡SQLæ’å…¥æ‰€æœ‰æ•°æ®
int batchInsert(List<User> users);

<insert id="batchInsert">
    INSERT INTO user (name, age, email) VALUES
    <foreach collection="list" item="user" separator=",">
        (#{user.name}, #{user.age}, #{user.email})
    </foreach>
</insert>

// ä¸€æ¬¡æ’å…¥1000æ¡æ•°æ®
List<User> users = new ArrayList<>();
// ... æ·»åŠ æ•°æ®
userMapper.batchInsert(users);
```

### 5.2 æ‰¹é‡åˆ é™¤


**æ ¹æ®IDåˆ—è¡¨åˆ é™¤**ï¼š
```java
int deleteBatchIds(@Param("ids") List<Long> ids);

<delete id="deleteBatchIds">
    DELETE FROM user WHERE id IN
    <foreach collection="ids" item="id" open="(" separator="," close=")">
        #{id}
    </foreach>
</delete>

// ä½¿ç”¨ç¤ºä¾‹
List<Long> ids = Arrays.asList(1L, 2L, 3L, 4L, 5L);
userMapper.deleteBatchIds(ids);
```

### 5.3 æ‰¹é‡æ›´æ–°


**æ–¹å¼1ï¼šä½¿ç”¨CASE WHEN**
```java
<update id="batchUpdate">
    UPDATE user
    <trim prefix="SET" suffixOverrides=",">
        <trim prefix="name = CASE" suffix="END,">
            <foreach collection="list" item="item">
                WHEN id = #{item.id} THEN #{item.name}
            </foreach>
        </trim>
        <trim prefix="age = CASE" suffix="END,">
            <foreach collection="list" item="item">
                WHEN id = #{item.id} THEN #{item.age}
            </foreach>
        </trim>
    </trim>
    WHERE id IN
    <foreach collection="list" item="item" open="(" separator="," close=")">
        #{item.id}
    </foreach>
</update>
```

**æ–¹å¼2ï¼šä½¿ç”¨SqlSessionæ‰¹é‡å¤„ç†ï¼ˆMyBatisåŸç”Ÿï¼‰**
```java
@Autowired
private SqlSessionFactory sqlSessionFactory;

public void batchUpdate(List<User> users) {
    SqlSession sqlSession = sqlSessionFactory.openSession(ExecutorType.BATCH);
    try {
        UserMapper mapper = sqlSession.getMapper(UserMapper.class);
        for (User user : users) {
            mapper.updateById(user);
        }
        sqlSession.commit();  // ä¸€æ¬¡æ€§æäº¤
    } finally {
        sqlSession.close();
    }
}
```

> ğŸ’¡ **æ‰¹é‡æ“ä½œä¼˜åŒ–å»ºè®®**  
> - å•æ¬¡æ‰¹é‡ä¸è¶…è¿‡1000æ¡ï¼Œå¤§æ•°æ®åˆ†æ‰¹å¤„ç†
> - æ‰¹é‡æ’å…¥æ¯”å¾ªç¯æ’å…¥å¿«10-100å€
> - æ³¨æ„æ•°æ®åº“çš„æœ€å¤§SQLé•¿åº¦é™åˆ¶

---

## 6. ğŸ“„ åˆ†é¡µæŸ¥è¯¢å®ç°


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µ


**é—®é¢˜åœºæ™¯**ï¼š
```
æ•°æ®åº“æœ‰100ä¸‡æ¡ç”¨æˆ·è®°å½•
ä¸€æ¬¡æ€§æŸ¥è¯¢å…¨éƒ¨ï¼š
- å†…å­˜æº¢å‡º
- ç½‘ç»œä¼ è¾“æ…¢
- å‰ç«¯æ¸²æŸ“å¡é¡¿

åˆ†é¡µæŸ¥è¯¢ï¼š
- æ¯æ¬¡åªæŸ¥10æ¡
- èŠ‚çœå†…å­˜
- å“åº”é€Ÿåº¦å¿«
```

### 6.2 ç‰©ç†åˆ†é¡µ vs é€»è¾‘åˆ†é¡µ


| å¯¹æ¯”é¡¹ | **ç‰©ç†åˆ†é¡µ** | **é€»è¾‘åˆ†é¡µ** |
|-------|------------|------------|
| SQL | ä½¿ç”¨LIMITé™åˆ¶æŸ¥è¯¢æ•°é‡ | æŸ¥è¯¢å…¨éƒ¨æ•°æ® |
| å†…å­˜å ç”¨ | å°ï¼ˆåªåŠ è½½ä¸€é¡µæ•°æ®ï¼‰ | å¤§ï¼ˆåŠ è½½å…¨éƒ¨æ•°æ®ï¼‰ |
| æ€§èƒ½ | é«˜ | ä½ |
| é€‚ç”¨åœºæ™¯ | å¤§æ•°æ®é‡ | å°æ•°æ®é‡ |
| å®ç°æ–¹å¼ | `LIMIT #{offset}, #{size}` | Javaä»£ç æˆªå– |

**æ¨èä½¿ç”¨ç‰©ç†åˆ†é¡µï¼**

### 6.3 æ‰‹åŠ¨å®ç°ç‰©ç†åˆ†é¡µ


**Mapperæ¥å£**ï¼š
```java
// åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·
List<User> selectByPage(
    @Param("offset") int offset,  // èµ·å§‹ä½ç½®
    @Param("size") int size        // æ¯é¡µæ•°é‡
);

// æŸ¥è¯¢æ€»è®°å½•æ•°
int selectCount();
```

**XMLå®ç°**ï¼š
```xml
<!-- åˆ†é¡µæŸ¥è¯¢ -->
<select id="selectByPage" resultType="User">
    SELECT * FROM user
    LIMIT #{offset}, #{size}
</select>

<!-- æŸ¥è¯¢æ€»æ•° -->
<select id="selectCount" resultType="int">
    SELECT COUNT(*) FROM user
</select>
```

**Serviceå±‚å°è£…**ï¼š
```java
public class PageResult<T> {
    private List<T> records;      // å½“å‰é¡µæ•°æ®
    private long total;           // æ€»è®°å½•æ•°
    private int pageNum;          // å½“å‰é¡µç 
    private int pageSize;         // æ¯é¡µå¤§å°
    private int totalPages;       // æ€»é¡µæ•°
}

public PageResult<User> getUsers(int pageNum, int pageSize) {
    // è®¡ç®—åç§»é‡ï¼š(é¡µç -1) Ã— æ¯é¡µæ•°é‡
    int offset = (pageNum - 1) * pageSize;
    
    // æŸ¥è¯¢æ•°æ®
    List<User> users = userMapper.selectByPage(offset, pageSize);
    int total = userMapper.selectCount();
    
    // å°è£…ç»“æœ
    PageResult<User> result = new PageResult<>();
    result.setRecords(users);
    result.setTotal(total);
    result.setPageNum(pageNum);
    result.setPageSize(pageSize);
    result.setTotalPages((total + pageSize - 1) / pageSize);
    
    return result;
}
```

### 6.4 ä½¿ç”¨PageHelperåˆ†é¡µæ’ä»¶ï¼ˆæ¨èï¼‰


**å¼•å…¥ä¾èµ–**ï¼š
```xml
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper-spring-boot-starter</artifactId>
    <version>1.4.6</version>
</dependency>
```

**ä½¿ç”¨æ–¹å¼ï¼ˆè¶…ç®€å•ï¼‰**ï¼š
```java
// 1. å¼€å¯åˆ†é¡µ
PageHelper.startPage(pageNum, pageSize);

// 2. æ‰§è¡ŒæŸ¥è¯¢ï¼ˆä¼šè‡ªåŠ¨æ‹¼æ¥LIMITï¼‰
List<User> users = userMapper.selectAll();

// 3. å°è£…åˆ†é¡µç»“æœ
PageInfo<User> pageInfo = new PageInfo<>(users);

// 4. è·å–åˆ†é¡µä¿¡æ¯
System.out.println("æ€»è®°å½•æ•°ï¼š" + pageInfo.getTotal());
System.out.println("æ€»é¡µæ•°ï¼š" + pageInfo.getPages());
System.out.println("å½“å‰é¡µï¼š" + pageInfo.getPageNum());
System.out.println("æ•°æ®ï¼š" + pageInfo.getList());
```

**å®Œæ•´ç¤ºä¾‹**ï¼š
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    public PageInfo<User> getUsersByPage(int pageNum, int pageSize) {
        // è®¾ç½®åˆ†é¡µå‚æ•°
        PageHelper.startPage(pageNum, pageSize);
        
        // æ‰§è¡ŒæŸ¥è¯¢ï¼ˆè‡ªåŠ¨æ·»åŠ åˆ†é¡µSQLï¼‰
        List<User> users = userMapper.selectAll();
        
        // å°è£…åˆ†é¡µä¿¡æ¯
        return new PageInfo<>(users);
    }
}
```

> ğŸ’¡ **PageHelperåŸç†**  
> PageHelperé€šè¿‡æ‹¦æˆªå™¨è‡ªåŠ¨åœ¨SQLåé¢åŠ ä¸ŠLIMITè¯­å¥
> åŸSQLï¼š`SELECT * FROM user`
> è‡ªåŠ¨å˜æˆï¼š`SELECT * FROM user LIMIT 0, 10`

---

## 7. ğŸ” æ¡ä»¶æŸ¥è¯¢æ„å»º


### 7.1 åŠ¨æ€SQLåŸºç¡€


**ä»€ä¹ˆæ˜¯åŠ¨æ€SQL**ï¼š
```
æ ¹æ®ä¸åŒæ¡ä»¶ï¼Œç”Ÿæˆä¸åŒçš„SQLè¯­å¥

æ¯”å¦‚ï¼šæœç´¢ç”¨æˆ·
- åªè¾“å…¥å§“å  â†’ WHERE name LIKE '%å¼ %'
- åªè¾“å…¥å¹´é¾„  â†’ WHERE age = 25
- éƒ½è¾“å…¥      â†’ WHERE name LIKE '%å¼ %' AND age = 25
- éƒ½ä¸è¾“å…¥    â†’ æŸ¥è¯¢å…¨éƒ¨
```

**æ ¸å¿ƒæ ‡ç­¾**ï¼š
```xml
<if>        - æ¡ä»¶åˆ¤æ–­
<where>     - æ™ºèƒ½WHEREå­å¥
<choose>    - å¤šæ¡ä»¶é€‰æ‹©
<foreach>   - å¾ªç¯å¤„ç†
<set>       - æ™ºèƒ½SETå­å¥
<trim>      - å»é™¤å¤šä½™å­—ç¬¦
```

### 7.2 ifæ ‡ç­¾ä½¿ç”¨


**åŸºç¡€ç”¨æ³•**ï¼š
```xml
<select id="selectByCondition" resultType="User">
    SELECT * FROM user
    <where>
        <if test="name != null and name != ''">
            AND name LIKE CONCAT('%', #{name}, '%')
        </if>
        <if test="age != null">
            AND age = #{age}
        </if>
        <if test="email != null">
            AND email = #{email}
        </if>
    </where>
</select>
```

**<where>æ ‡ç­¾çš„æ™ºèƒ½å¤„ç†**ï¼š
```
è‡ªåŠ¨æ·»åŠ WHEREå…³é”®å­—
è‡ªåŠ¨å»é™¤ç¬¬ä¸€ä¸ªANDæˆ–OR

ç¤ºä¾‹ï¼š
æ¡ä»¶1ï¼šname='å¼ ä¸‰'          â†’ WHERE name='å¼ ä¸‰'
æ¡ä»¶2ï¼šage=25               â†’ WHERE age=25
æ¡ä»¶3ï¼šname='å¼ ä¸‰' AND age=25 â†’ WHERE name='å¼ ä¸‰' AND age=25
```

### 7.3 chooseæ ‡ç­¾ä½¿ç”¨


**ç±»ä¼¼äºJavaçš„switchè¯­å¥**ï¼š
```xml
<!-- æŒ‰ä¼˜å…ˆçº§æŸ¥è¯¢ï¼šä¼˜å…ˆç”¨IDï¼Œå…¶æ¬¡ç”¨é‚®ç®±ï¼Œæœ€åç”¨å§“å -->
<select id="selectByPriority" resultType="User">
    SELECT * FROM user
    <where>
        <choose>
            <when test="id != null">
                id = #{id}
            </when>
            <when test="email != null">
                email = #{email}
            </when>
            <otherwise>
                name = #{name}
            </otherwise>
        </choose>
    </where>
</select>
```

### 7.4 å¤æ‚æ¡ä»¶æŸ¥è¯¢ç¤ºä¾‹


**å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢**ï¼š
```java
// æŸ¥è¯¢æ¡ä»¶å¯¹è±¡
public class UserQueryCondition {
    private String name;          // å§“åï¼ˆæ¨¡ç³Šï¼‰
    private Integer minAge;       // æœ€å°å¹´é¾„
    private Integer maxAge;       // æœ€å¤§å¹´é¾„
    private List<String> depts;   // éƒ¨é—¨åˆ—è¡¨
    private Date startDate;       // å¼€å§‹æ—¥æœŸ
    private Date endDate;         // ç»“æŸæ—¥æœŸ
}

// Mapperæ¥å£
List<User> selectByComplexCondition(UserQueryCondition condition);
```

**XMLå®ç°**ï¼š
```xml
<select id="selectByComplexCondition" resultType="User">
    SELECT * FROM user
    <where>
        <!-- å§“åæ¨¡ç³ŠæŸ¥è¯¢ -->
        <if test="name != null and name != ''">
            AND name LIKE CONCAT('%', #{name}, '%')
        </if>
        
        <!-- å¹´é¾„èŒƒå›´æŸ¥è¯¢ -->
        <if test="minAge != null">
            AND age >= #{minAge}
        </if>
        <if test="maxAge != null">
            AND age &lt;= #{maxAge}
        </if>
        
        <!-- éƒ¨é—¨INæŸ¥è¯¢ -->
        <if test="depts != null and depts.size() > 0">
            AND department IN
            <foreach collection="depts" item="dept" open="(" separator="," close=")">
                #{dept}
            </foreach>
        </if>
        
        <!-- æ—¥æœŸèŒƒå›´æŸ¥è¯¢ -->
        <if test="startDate != null">
            AND create_time >= #{startDate}
        </if>
        <if test="endDate != null">
            AND create_time &lt;= #{endDate}
        </if>
    </where>
    ORDER BY create_time DESC
</select>
```

> âš ï¸ **XMLä¸­çš„ç‰¹æ®Šå­—ç¬¦å¤„ç†**  
> - `<` è¦å†™æˆ `&lt;`
> - `>` è¦å†™æˆ `&gt;`
> - `<=` è¦å†™æˆ `&lt;=`
> - æˆ–è€…ä½¿ç”¨CDATAï¼š`<![CDATA[ age <= #{maxAge} ]]>`

---

## 8. ğŸ“Š æ’åºä¸ç»Ÿè®¡å¤„ç†


### 8.1 æ’åºå®ç°


**å›ºå®šæ’åº**ï¼š
```xml
<!-- æŒ‰åˆ›å»ºæ—¶é—´é™åº -->
<select id="selectAll" resultType="User">
    SELECT * FROM user
    ORDER BY create_time DESC
</select>

<!-- å¤šå­—æ®µæ’åº -->
<select id="selectAll" resultType="User">
    SELECT * FROM user
    ORDER BY age DESC, create_time DESC
</select>
```

**åŠ¨æ€æ’åº**ï¼š
```java
// Mapperæ¥å£
List<User> selectWithSort(
    @Param("orderBy") String orderBy,    // æ’åºå­—æ®µ
    @Param("order") String order          // ASCæˆ–DESC
);
```

```xml
<select id="selectWithSort" resultType="User">
    SELECT * FROM user
    <if test="orderBy != null and orderBy != ''">
        ORDER BY ${orderBy} ${order}
    </if>
</select>
```

> âš ï¸ **æ³¨æ„#{}å’Œ${}çš„åŒºåˆ«**  
> - `#{}`ï¼šå‚æ•°å ä½ç¬¦ï¼Œä¼šé¢„ç¼–è¯‘ï¼Œé˜²SQLæ³¨å…¥ï¼ˆæ¨èï¼‰
> - `${}`ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¸é˜²æ³¨å…¥ï¼Œç”¨äºåŠ¨æ€åˆ—åå’Œè¡¨å

### 8.2 ç»Ÿè®¡æŸ¥è¯¢


**åŸºç¡€ç»Ÿè®¡å‡½æ•°**ï¼š
```java
// 1. ç»Ÿè®¡æ€»æ•°
int countUsers();

<select id="countUsers" resultType="int">
    SELECT COUNT(*) FROM user
</select>

// 2. æ±‚å’Œ
BigDecimal sumSalary();

<select id="sumSalary" resultType="BigDecimal">
    SELECT SUM(salary) FROM user
</select>

// 3. å¹³å‡å€¼
Double avgAge();

<select id="avgAge" resultType="Double">
    SELECT AVG(age) FROM user
</select>

// 4. æœ€å¤§æœ€å°å€¼
Integer maxAge();
Integer minAge();

<select id="maxAge" resultType="Integer">
    SELECT MAX(age) FROM user
</select>
```

**åˆ†ç»„ç»Ÿè®¡**ï¼š
```java
// ç»Ÿè®¡ç»“æœå¯¹è±¡
public class DeptStatistics {
    private String department;   // éƒ¨é—¨åç§°
    private Integer userCount;   // äººæ•°
    private Double avgSalary;    // å¹³å‡å·¥èµ„
}

// Mapperæ¥å£
List<DeptStatistics> countByDepartment();
```

```xml
<select id="countByDepartment" resultType="DeptStatistics">
    SELECT 
        department,
        COUNT(*) as userCount,
        AVG(salary) as avgSalary
    FROM user
    GROUP BY department
    HAVING COUNT(*) > 5
    ORDER BY userCount DESC
</select>
```

**å¤æ‚ç»Ÿè®¡ç¤ºä¾‹**ï¼š
```xml
<!-- å¤šç»´åº¦ç»Ÿè®¡ -->
<select id="getStatisticsReport" resultType="Map">
    SELECT 
        COUNT(*) as totalUsers,
        COUNT(DISTINCT department) as deptCount,
        AVG(age) as avgAge,
        MAX(salary) as maxSalary,
        MIN(salary) as minSalary,
        SUM(salary) as totalSalary
    FROM user
    WHERE status = 1
</select>
```

---

## 9. ğŸ”§ å­˜å‚¨è¿‡ç¨‹è°ƒç”¨


### 9.1 ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹


**é€šä¿—ç†è§£**ï¼š
```
å­˜å‚¨è¿‡ç¨‹ = æ•°æ®åº“ä¸­çš„"å‡½æ•°"
æŠŠä¸€ç³»åˆ—SQLæ“ä½œå°è£…æˆä¸€ä¸ªæ•´ä½“
è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰§è¡Œå¤šä¸ªæ“ä½œ

å°±åƒåšèœï¼š
æ™®é€šSQL    = æ¯æ¬¡éƒ½è¦ä¹°èœã€æ´—èœã€ç‚’èœ
å­˜å‚¨è¿‡ç¨‹  = æå‰å‡†å¤‡å¥½èœè°±ï¼Œç›´æ¥æŒ‰æµç¨‹åš
```

**ä¼˜ç‚¹**ï¼š
- **æé«˜æ€§èƒ½**ï¼šé¢„ç¼–è¯‘ï¼Œæ‰§è¡Œå¿«
- **å‡å°‘ç½‘ç»œä¼ è¾“**ï¼šä¸€æ¬¡è°ƒç”¨ï¼Œå¤šä¸ªæ“ä½œ
- **ä¸šåŠ¡é€»è¾‘å¤ç”¨**ï¼šå°è£…å¤æ‚é€»è¾‘
- **å®‰å…¨æ€§é«˜**ï¼šæ§åˆ¶æ•°æ®è®¿é—®æƒé™

### 9.2 è°ƒç”¨æ— å‚å­˜å‚¨è¿‡ç¨‹


**MySQLå­˜å‚¨è¿‡ç¨‹ç¤ºä¾‹**ï¼š
```sql
-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼šæ›´æ–°æ‰€æœ‰ç”¨æˆ·çš„å¹´é¾„+1
DELIMITER $$
CREATE PROCEDURE update_all_age()
BEGIN
    UPDATE user SET age = age + 1;
END $$
DELIMITER ;
```

**MyBatisè°ƒç”¨**ï¼š
```java
// Mapperæ¥å£
void updateAllAge();
```

```xml
<!-- è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ -->
<update id="updateAllAge" statementType="CALLABLE">
    {CALL update_all_age()}
</update>
```

### 9.3 è°ƒç”¨å¸¦å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹


**è¾“å…¥å‚æ•°å­˜å‚¨è¿‡ç¨‹**ï¼š
```sql
-- æ ¹æ®éƒ¨é—¨æ›´æ–°å·¥èµ„
DELIMITER $$
CREATE PROCEDURE update_salary_by_dept(
    IN dept_name VARCHAR(50),
    IN increase_amount DECIMAL(10,2)
)
BEGIN
    UPDATE user 
    SET salary = salary + increase_amount
    WHERE department = dept_name;
END $$
DELIMITER ;
```

**MyBatisè°ƒç”¨**ï¼š
```java
// Mapperæ¥å£
void updateSalaryByDept(
    @Param("deptName") String deptName,
    @Param("amount") BigDecimal amount
);
```

```xml
<update id="updateSalaryByDept" statementType="CALLABLE">
    {CALL update_salary_by_dept(#{deptName}, #{amount})}
</update>
```

### 9.4 è°ƒç”¨å¸¦è¾“å‡ºå‚æ•°çš„å­˜å‚¨è¿‡ç¨‹


**è¾“å‡ºå‚æ•°å­˜å‚¨è¿‡ç¨‹**ï¼š
```sql
-- æŸ¥è¯¢éƒ¨é—¨äººæ•°å’Œå¹³å‡å·¥èµ„
DELIMITER $$
CREATE PROCEDURE get_dept_info(
    IN dept_name VARCHAR(50),
    OUT user_count INT,
    OUT avg_salary DECIMAL(10,2)
)
BEGIN
    SELECT COUNT(*), AVG(salary)
    INTO user_count, avg_salary
    FROM user
    WHERE department = dept_name;
END $$
DELIMITER ;
```

**MyBatisè°ƒç”¨**ï¼š
```java
// Mapperæ¥å£
void getDeptInfo(Map<String, Object> params);
```

```xml
<select id="getDeptInfo" statementType="CALLABLE">
    {CALL get_dept_info(
        #{deptName, mode=IN, jdbcType=VARCHAR},
        #{userCount, mode=OUT, jdbcType=INTEGER},
        #{avgSalary, mode=OUT, jdbcType=DECIMAL}
    )}
</select>
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
Map<String, Object> params = new HashMap<>();
params.put("deptName", "æŠ€æœ¯éƒ¨");

userMapper.getDeptInfo(params);

// è·å–è¾“å‡ºå‚æ•°
Integer userCount = (Integer) params.get("userCount");
BigDecimal avgSalary = (BigDecimal) params.get("avgSalary");

System.out.println("æŠ€æœ¯éƒ¨äººæ•°ï¼š" + userCount);
System.out.println("å¹³å‡å·¥èµ„ï¼š" + avgSalary);
```

> ğŸ’¡ **å‚æ•°æ¨¡å¼è¯´æ˜**  
> - `IN`ï¼šè¾“å…¥å‚æ•°ï¼Œä¼ é€’ç»™å­˜å‚¨è¿‡ç¨‹
> - `OUT`ï¼šè¾“å‡ºå‚æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹è¿”å›ç»™è°ƒç”¨è€…
> - `INOUT`ï¼šæ—¢æ˜¯è¾“å…¥åˆæ˜¯è¾“å‡º

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºç¡€çŸ¥è¯†


> ğŸ“Œ **DAOå±‚æ ¸å¿ƒæ¦‚å¿µ**
> - DAOæ˜¯æ•°æ®è®¿é—®å±‚ï¼Œè´Ÿè´£ä¸æ•°æ®åº“äº¤äº’
> - Mapperæ¥å£æ˜¯ç°ä»£åŒ–çš„DAOå®ç°æ–¹å¼
> - é€šè¿‡XMLæˆ–æ³¨è§£é…ç½®SQLè¯­å¥
> - Springè´Ÿè´£ç®¡ç†Mapperçš„ç”Ÿå‘½å‘¨æœŸ

### 10.2 å…³é”®æŠ€æœ¯è¦ç‚¹


**ğŸ”¸ Mapperæ¥å£è®¾è®¡åŸåˆ™**
```
âœ… æ–¹æ³•å‘½åè¦æ¸…æ™°ï¼šselectByIdã€insertã€update
âœ… å‚æ•°ä¼ é€’è¦è§„èŒƒï¼šå•å‚æ•°ç›´æ¥ä¼ ï¼Œå¤šå‚æ•°ç”¨@Param
âœ… è¿”å›å€¼è¦åˆç†ï¼šå•æ¡ç”¨å¯¹è±¡ï¼Œå¤šæ¡ç”¨List
âœ… å¤æ‚å‚æ•°ç”¨å¯¹è±¡å°è£…ï¼Œé¿å…å‚æ•°è¿‡å¤š
```

**ğŸ”¸ é€šç”¨Mapperé€‰æ‹©**
```
è‡ªå®šä¹‰é€šç”¨Mapperï¼š
- é€‚åˆç®€å•é¡¹ç›®
- å¯æ§æ€§å¼º
- éœ€è¦è‡ªå·±ç»´æŠ¤

MyBatis-Plusï¼š
- åŠŸèƒ½å¼ºå¤§ï¼Œå¼€ç®±å³ç”¨
- è‡ªåŠ¨ç”ŸæˆCRUDæ–¹æ³•
- æ¨èä¼ä¸šçº§é¡¹ç›®ä½¿ç”¨
```

**ğŸ”¸ åˆ†é¡µæŸ¥è¯¢æœ€ä½³å®è·µ**
```
ç‰©ç†åˆ†é¡µï¼ˆæ¨èï¼‰ï¼š
- ä½¿ç”¨LIMITé™åˆ¶æŸ¥è¯¢æ•°é‡
- æ€§èƒ½å¥½ï¼Œå†…å­˜å ç”¨å°
- æ¨èä½¿ç”¨PageHelperæ’ä»¶

é€»è¾‘åˆ†é¡µï¼ˆä¸æ¨èï¼‰ï¼š
- æŸ¥è¯¢å…¨éƒ¨æ•°æ®ï¼ŒJavaä»£ç åˆ†é¡µ
- æ€§èƒ½å·®ï¼Œä»…é€‚åˆå°æ•°æ®é‡
```

**ğŸ”¸ åŠ¨æ€SQLæ ¸å¿ƒæ ‡ç­¾**
```
<if>     - æ¡ä»¶åˆ¤æ–­ï¼Œæœ€å¸¸ç”¨
<where>  - æ™ºèƒ½WHEREï¼Œè‡ªåŠ¨å»é™¤AND/OR
<choose> - å¤šæ¡ä»¶é€‰æ‹©ï¼Œç±»ä¼¼switch
<foreach> - å¾ªç¯å¤„ç†ï¼Œç”¨äºINæŸ¥è¯¢å’Œæ‰¹é‡æ“ä½œ
<set>    - æ™ºèƒ½SETï¼Œç”¨äºåŠ¨æ€æ›´æ–°
```

### 10.3 å®æˆ˜ç»éªŒæ€»ç»“


**âœ… æ€§èƒ½ä¼˜åŒ–å»ºè®®**
```
1. æ‰¹é‡æ“ä½œä»£æ›¿å¾ªç¯æ“ä½œ
   âŒ forå¾ªç¯æ’å…¥1000æ¡ â†’ 1000æ¬¡æ•°æ®åº“äº¤äº’
   âœ… æ‰¹é‡æ’å…¥1000æ¡ â†’ 1æ¬¡æ•°æ®åº“äº¤äº’

2. ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢
   âŒ ä¸€æ¬¡æŸ¥è¯¢100ä¸‡æ¡æ•°æ® â†’ å†…å­˜æº¢å‡º
   âœ… åˆ†é¡µæŸ¥è¯¢æ¯æ¬¡10æ¡ â†’ æ€§èƒ½ç¨³å®š

3. åˆç†ä½¿ç”¨ç´¢å¼•
   WHEREæ¡ä»¶å­—æ®µè¦å»ºç´¢å¼•
   ORDER BYå­—æ®µè¦å»ºç´¢å¼•
   é¿å…åœ¨ç´¢å¼•åˆ—ä¸Šä½¿ç”¨å‡½æ•°

4. é¿å…N+1æŸ¥è¯¢é—®é¢˜
   ä½¿ç”¨JOINä¸€æ¬¡æŸ¥è¯¢å…³è”æ•°æ®
   æˆ–ä½¿ç”¨MyBatisçš„resultMapåµŒå¥—æŸ¥è¯¢
```

**âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³**
```
é—®é¢˜1ï¼š#{}å’Œ${}ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ
è§£ç­”ï¼š
- #{} ç”¨äºå‚æ•°å€¼ï¼Œé˜²SQLæ³¨å…¥ï¼ˆ99%çš„æƒ…å†µï¼‰
- ${} ç”¨äºåŠ¨æ€åˆ—åã€è¡¨åï¼ˆä»…åŠ¨æ€SQLæ—¶ï¼‰

é—®é¢˜2ï¼šæ‰¹é‡æ“ä½œæŠ¥é”™SQLå¤ªé•¿ï¼Ÿ
è§£ç­”ï¼š
- å•æ¬¡æ‰¹é‡ä¸è¶…è¿‡1000æ¡
- å¤§æ•°æ®åˆ†æ‰¹å¤„ç†
- æ£€æŸ¥æ•°æ®åº“max_allowed_packeté…ç½®

é—®é¢˜3ï¼šåˆ†é¡µæŸ¥è¯¢æ€»æ•°ä¸å‡†ï¼Ÿ
è§£ç­”ï¼š
- ç¡®ä¿COUNTå’ŒæŸ¥è¯¢æ¡ä»¶ä¸€è‡´
- ä½¿ç”¨PageHelperè‡ªåŠ¨å¤„ç†
- æ³¨æ„ç¼“å­˜å½±å“

é—®é¢˜4ï¼šå­˜å‚¨è¿‡ç¨‹è°ƒç”¨å¤±è´¥ï¼Ÿ
è§£ç­”ï¼š
- æ£€æŸ¥statementTypeæ˜¯å¦ä¸ºCALLABLE
- ç¡®è®¤å‚æ•°çš„modeè®¾ç½®ï¼ˆIN/OUTï¼‰
- æ£€æŸ¥jdbcTypeæ˜¯å¦åŒ¹é…
```

### 10.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š åˆçº§é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰**
```
âœ… æŒæ¡åŸºç¡€CRUDæ“ä½œ
âœ… ç†è§£Mapperæ¥å£å’ŒXMLé…ç½®
âœ… å­¦ä¼šç®€å•çš„æ¡ä»¶æŸ¥è¯¢
âœ… æŒæ¡åˆ†é¡µæŸ¥è¯¢åŸºç¡€
```

**ğŸ“š ä¸­çº§é˜¶æ®µï¼ˆ2-3å‘¨ï¼‰**
```
âœ… æŒæ¡åŠ¨æ€SQLçš„å„ç§æ ‡ç­¾
âœ… å­¦ä¼šæ‰¹é‡æ“ä½œä¼˜åŒ–
âœ… ç†è§£é€šç”¨Mapperè®¾è®¡
âœ… æŒæ¡å¤æ‚æ¡ä»¶æŸ¥è¯¢
```

**ğŸ“š é«˜çº§é˜¶æ®µï¼ˆ3-4å‘¨ï¼‰**
```
âœ… æŒæ¡MyBatis-Plusé«˜çº§ç‰¹æ€§
âœ… å­¦ä¼šæ€§èƒ½ä¼˜åŒ–æŠ€å·§
âœ… æŒæ¡å­˜å‚¨è¿‡ç¨‹è°ƒç”¨
âœ… ç†è§£åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„DAOè®¾è®¡
```

**ğŸ¯ å®æˆ˜é¡¹ç›®ç»ƒä¹ **
```
é¡¹ç›®1ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
- å®ç°å®Œæ•´çš„CRUD
- å¤šæ¡ä»¶æŸ¥è¯¢å’Œåˆ†é¡µ
- æ‰¹é‡å¯¼å…¥å¯¼å‡º

é¡¹ç›®2ï¼šç”µå•†è®¢å•ç³»ç»Ÿ
- å¤æ‚å…³è”æŸ¥è¯¢
- ç»Ÿè®¡æŠ¥è¡¨ç”Ÿæˆ
- é«˜å¹¶å‘ä¼˜åŒ–

é¡¹ç›®3ï¼šå†…å®¹ç®¡ç†ç³»ç»Ÿ
- æ ‘å½¢ç»“æ„æŸ¥è¯¢
- å…¨æ–‡æ£€ç´¢
- ç¼“å­˜æ•´åˆ
```

---

**ğŸ’¡ æ ¸å¿ƒè®°å¿†å£è¯€**
```
DAOæŒä¹…è®¿æ•°æ®ï¼ŒMapperæ¥å£é…XML
é€šç”¨åŸºç±»çœä»£ç ï¼ŒMyBatis-Plusæ›´å¼ºå¤§
CRUDåŸºç¡€è¦ç‰¢è®°ï¼Œæ‰¹é‡æ“ä½œææ€§èƒ½
åˆ†é¡µæŸ¥è¯¢ç”¨æ’ä»¶ï¼ŒåŠ¨æ€SQLçµæ´»é…
#{}é˜²æ³¨å…¥å‚æ•°ï¼Œ${}æ‹¼æ¥åŠ¨æ€å
å­˜å‚¨è¿‡ç¨‹ææ•ˆç‡ï¼Œæ¨¡å¼å‚æ•°è¦åˆ†æ¸…
```