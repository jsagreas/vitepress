---
title: 2ã€æ•°æ®æ ¡éªŒæ¡†æ¶é›†æˆ
---
## ğŸ“š ç›®å½•

1. [æ•°æ®æ ¡éªŒçš„æœ¬è´¨ç†è§£](#1-æ•°æ®æ ¡éªŒçš„æœ¬è´¨ç†è§£)
2. [Bean Validationè§„èŒƒè¯¦è§£](#2-bean-validationè§„èŒƒè¯¦è§£)
3. [Hibernate Validatorå®æˆ˜](#3-hibernate-validatorå®æˆ˜)
4. [æ ¡éªŒæ³¨è§£å®Œå…¨æŒ‡å—](#4-æ ¡éªŒæ³¨è§£å®Œå…¨æŒ‡å—)
5. [åˆ†ç»„æ ¡éªŒå®ç°](#5-åˆ†ç»„æ ¡éªŒå®ç°)
6. [è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£](#6-è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£)
7. [é«˜çº§æ ¡éªŒæŠ€å·§](#7-é«˜çº§æ ¡éªŒæŠ€å·§)
8. [æ ¡éªŒé”™è¯¯å¤„ç†ä¸å›½é™…åŒ–](#8-æ ¡éªŒé”™è¯¯å¤„ç†ä¸å›½é™…åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ•°æ®æ ¡éªŒçš„æœ¬è´¨ç†è§£


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®æ ¡éªŒ


**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼šå°±åƒæˆ‘ä»¬å¡«å†™è¡¨å•æ—¶ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥æ‰‹æœºå·æ ¼å¼ã€é‚®ç®±æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œè¿™å°±æ˜¯æ•°æ®æ ¡éªŒã€‚

```
ç”¨æˆ·åœºæ™¯å¯¹æ¯”ï¼š

âŒ æ²¡æœ‰æ ¡éªŒçš„æƒ…å†µï¼š
ç”¨æˆ·è¾“å…¥ï¼šå¹´é¾„ = -5å²
ç³»ç»Ÿç›´æ¥ä¿å­˜ â†’ æ•°æ®åº“å‡ºç°è„æ•°æ®
åç»­æŸ¥è¯¢å‡ºé”™ â†’ ä¸šåŠ¡é€»è¾‘æ··ä¹±

âœ… æœ‰æ ¡éªŒçš„æƒ…å†µï¼š
ç”¨æˆ·è¾“å…¥ï¼šå¹´é¾„ = -5å²  
ç³»ç»Ÿæ ¡éªŒ â†’ ç«‹å³æç¤º"å¹´é¾„å¿…é¡»å¤§äº0"
ç”¨æˆ·ä¿®æ­£ â†’ æ•°æ®åº“ä¿æŒå¹²å‡€
```

**æ•°æ®æ ¡éªŒçš„æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ›¡ï¸ **ä¿æŠ¤æ•°æ®å®‰å…¨**ï¼šé˜²æ­¢éæ³•æ•°æ®è¿›å…¥ç³»ç»Ÿ
- ğŸ¯ **æå‡ç”¨æˆ·ä½“éªŒ**ï¼šåŠæ—¶åé¦ˆé”™è¯¯ä¿¡æ¯
- ğŸ”§ **ç®€åŒ–ä»£ç é€»è¾‘**ï¼šé¿å…åˆ°å¤„å†™ifåˆ¤æ–­
- ğŸ“Š **ä¿è¯æ•°æ®è´¨é‡**ï¼šç¡®ä¿ä¸šåŠ¡æ•°æ®çš„å‡†ç¡®æ€§

### 1.2 æ ¡éªŒçš„ä¸‰ä¸ªå±‚æ¬¡


```
å‰ç«¯æ ¡éªŒï¼ˆç¬¬ä¸€é“é˜²çº¿ï¼‰
    â†“ ç”¨æˆ·ä½“éªŒä¼˜å…ˆ
ä¸­é—´å±‚æ ¡éªŒï¼ˆç¬¬äºŒé“é˜²çº¿ï¼‰  â† æœ¬ç« é‡ç‚¹
    â†“ ä¸šåŠ¡å®‰å…¨ä¿éšœ
æ•°æ®åº“æ ¡éªŒï¼ˆæœ€åé˜²çº¿ï¼‰
    â†“ æ•°æ®å®Œæ•´æ€§çº¦æŸ

ä¸ºä»€ä¹ˆéœ€è¦å¤šå±‚æ ¡éªŒï¼Ÿ
å‰ç«¯æ ¡éªŒå¯ä»¥è¢«ç»•è¿‡ï¼ˆF12ä¿®æ”¹ä»£ç ï¼‰
â†’ æ‰€ä»¥åç«¯æ ¡éªŒæ˜¯å¿…é¡»çš„ï¼
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**  
> æ°¸è¿œä¸è¦åªä¿¡ä»»å‰ç«¯ä¼ æ¥çš„æ•°æ®ï¼å‰ç«¯æ ¡éªŒæ˜¯ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œåç«¯æ ¡éªŒæ‰æ˜¯å®‰å…¨ä¿éšœã€‚

---

## 2. ğŸ“‹ Bean Validationè§„èŒƒè¯¦è§£


### 2.1 ä»€ä¹ˆæ˜¯Bean Validation


**é€šä¿—ç†è§£**ï¼šBean Validationå°±åƒæ˜¯Javaå®šä¹‰çš„ä¸€å¥—"æ£€æŸ¥æ ‡å‡†"ï¼Œå‘Šè¯‰å¤§å®¶åº”è¯¥æ€ä¹ˆæ£€æŸ¥æ•°æ®ã€‚

```
ç±»æ¯”ç†è§£ï¼š

å»ºç­‘è§„èŒƒï¼ˆBean Validationè§„èŒƒï¼‰
    â†“ å®šä¹‰æ ‡å‡†
å…·ä½“æ–½å·¥æ–¹æ¡ˆï¼ˆHibernate Validatorå®ç°ï¼‰
    â†“ æ‰§è¡Œæ ‡å‡†
å®é™…å»ºç­‘ï¼ˆä½ çš„ä»£ç ï¼‰
```

**Bean Validationæ˜¯ä»€ä¹ˆ**ï¼š
- ğŸ“œ **Javaæ ‡å‡†è§„èŒƒ**ï¼šJSR-303/JSR-380å®šä¹‰çš„æ¥å£æ ‡å‡†
- ğŸ”Œ **éå…·ä½“å®ç°**ï¼šåªå®šä¹‰äº†"åº”è¯¥æ€ä¹ˆåš"ï¼Œä¸æ˜¯å…·ä½“å·¥å…·
- ğŸ¯ **ç»Ÿä¸€æ ‡å‡†**ï¼šè®©æ‰€æœ‰æ¡†æ¶éƒ½èƒ½ç”¨åŒæ ·çš„æ–¹å¼æ ¡éªŒæ•°æ®

### 2.2 æ ¸å¿ƒè§„èŒƒç‰ˆæœ¬æ¼”è¿›


| ç‰ˆæœ¬ | è§„èŒƒç¼–å· | å‘å¸ƒæ—¶é—´ | **æ ¸å¿ƒç‰¹æ€§** | **å®é™…æ„ä¹‰** |
|------|---------|---------|------------|-------------|
| 1.0 | JSR-303 | 2009å¹´ | `åŸºç¡€æ ¡éªŒæ³¨è§£` | `å¥ å®šæ ¡éªŒåŸºç¡€` |
| 1.1 | JSR-349 | 2013å¹´ | `æ–¹æ³•çº§æ ¡éªŒã€å‚æ•°æ ¡éªŒ` | `æ ¡éªŒèƒ½åŠ›æ‰©å±•` |
| 2.0 | JSR-380 | 2017å¹´ | `æ”¯æŒJava 8ç‰¹æ€§ã€å®¹å™¨æ ¡éªŒ` | `ç°ä»£åŒ–å‡çº§` |

> ğŸ¯ **é‡ç‚¹ç†è§£**  
> æˆ‘ä»¬ç°åœ¨ç”¨çš„ä¸»è¦æ˜¯2.0ç‰ˆæœ¬ï¼Œå®ƒæ”¯æŒJava 8çš„æ–°ç‰¹æ€§ï¼ˆå¦‚Optionalã€LocalDateç­‰ç±»å‹çš„æ ¡éªŒï¼‰

### 2.3 è§„èŒƒä¸å®ç°çš„å…³ç³»


```
Bean Validationè§„èŒƒï¼ˆæ¥å£å®šä¹‰ï¼‰
         â†“ å®ç°å…³ç³»
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚              â”‚
Hibernate      Apache BVal    å…¶ä»–å®ç°
Validator      (äº†è§£å³å¯)
(æœ€å¸¸ç”¨)
```

**å½¢è±¡æ¯”å–»**ï¼š
- Bean Validation = **USBæ¥å£æ ‡å‡†**ï¼ˆå®šä¹‰äº†æ¥å£å½¢çŠ¶å’Œåè®®ï¼‰
- Hibernate Validator = **å…·ä½“çš„USBè®¾å¤‡**ï¼ˆçœŸæ­£èƒ½ç”¨çš„å®ç°ï¼‰

---

## 3. ğŸ”§ Hibernate Validatorå®æˆ˜


### 3.1 å¿«é€Ÿé›†æˆé…ç½®


**ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–**

```xml
<!-- Spring Booté¡¹ç›®è‡ªåŠ¨åŒ…å«ï¼Œæ— éœ€é¢å¤–æ·»åŠ  -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <!-- å·²åŒ…å« hibernate-validator -->
</dependency>

<!-- éSpring Booté¡¹ç›®éœ€è¦æ‰‹åŠ¨æ·»åŠ  -->
<dependency>
    <groupId>org.hibernate.validator</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>6.2.5.Final</version>
</dependency>
```

> âš ï¸ **æ–°æ‰‹æ³¨æ„**  
> Spring Booté¡¹ç›®é»˜è®¤å·²ç»é›†æˆå¥½äº†ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ï¼

**ç¬¬äºŒæ­¥ï¼šå¯ç”¨æ ¡éªŒ**

```java
@RestController
@RequestMapping("/user")
@Validated  // â† åœ¨ç±»ä¸ŠåŠ è¿™ä¸ªæ³¨è§£ï¼Œå¯ç”¨æ ¡éªŒåŠŸèƒ½
public class UserController {
    
    // åœ¨æ–¹æ³•å‚æ•°ä¸ŠåŠ  @Validï¼Œè¡¨ç¤ºéœ€è¦æ ¡éªŒ
    @PostMapping("/register")
    public String register(@Valid @RequestBody UserDTO user) {
        return "æ³¨å†ŒæˆåŠŸ";
    }
}
```

**æ ¸å¿ƒæ³¨è§£å¯¹æ¯”**ï¼š

| æ³¨è§£ | **ä½œç”¨ä½ç½®** | **åŠŸèƒ½è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** |
|------|------------|-------------|------------|
| `@Validated` | `ç±»ã€æ–¹æ³•` | `å¯ç”¨æ ¡éªŒåŠŸèƒ½ï¼ˆSpringæä¾›ï¼‰` | `å¼€å¯æ•´ä½“æ ¡éªŒèƒ½åŠ›` |
| `@Valid` | `å‚æ•°ã€å­—æ®µ` | `è§¦å‘æ ¡éªŒï¼ˆæ ‡å‡†æ³¨è§£ï¼‰` | `æ ‡è®°éœ€è¦æ ¡éªŒçš„å¯¹è±¡` |

### 3.2 ç¬¬ä¸€ä¸ªæ ¡éªŒç¤ºä¾‹


```java
// ç”¨æˆ·æ³¨å†ŒDTOï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰
public class UserDTO {
    
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")  // â† æ ¡éªŒæ³¨è§£
    private String username;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Min(value = 18, message = "å¹´é¾„å¿…é¡»å¤§äº18å²")
    private Integer age;
    
    // getter/setterçœç•¥...
}
```

**å·¥ä½œæµç¨‹å›¾**ï¼š
```
è¯·æ±‚æ•°æ® â†’ @Validè§¦å‘æ ¡éªŒ â†’ æ£€æŸ¥æ³¨è§£è§„åˆ™
                           â†“
                    æ ¡éªŒå¤±è´¥ â†’ è¿”å›é”™è¯¯ä¿¡æ¯
                           â†“
                    æ ¡éªŒæˆåŠŸ â†’ æ‰§è¡Œä¸šåŠ¡é€»è¾‘
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**  
> æ ¡éªŒæ³¨è§£å°±åƒ"è§„åˆ™è´´çº¸"ï¼Œè´´åœ¨å“ªä¸ªå­—æ®µä¸Šï¼Œå°±æ£€æŸ¥å“ªä¸ªå­—æ®µçš„æ•°æ®ï¼

---

## 4. ğŸ“ æ ¡éªŒæ³¨è§£å®Œå…¨æŒ‡å—


### 4.1 ç©ºå€¼æ ¡éªŒæ³¨è§£


**æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”**ï¼š

```java
public class Demo {
    
    @NotNull     // ä¸èƒ½æ˜¯nullï¼Œä½†å¯ä»¥æ˜¯ç©ºå­—ç¬¦ä¸² ""
    private String field1;
    
    @NotEmpty    // ä¸èƒ½æ˜¯nullï¼Œä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸² ""
    private String field2;
    
    @NotBlank    // ä¸èƒ½æ˜¯nullï¼Œä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œä¸èƒ½åªæœ‰ç©ºæ ¼
    private String field3;
}
```

**å®ä¾‹å¯¹æ¯”è¡¨**ï¼š

| å€¼ | **@NotNull** | **@NotEmpty** | **@NotBlank** | **ç†è§£è®°å¿†** |
|-----|------------|--------------|--------------|-------------|
| `null` | âŒ | âŒ | âŒ | `ä¸‰è€…éƒ½ä¸å…è®¸null` |
| `""` | âœ… | âŒ | âŒ | `Emptyæ›´ä¸¥æ ¼` |
| `"  "` | âœ… | âœ… | âŒ | `Blankæœ€ä¸¥æ ¼` |
| `"abc"` | âœ… | âœ… | âœ… | `æœ‰å†…å®¹éƒ½é€šè¿‡` |

> ğŸ¯ **é€‰æ‹©å»ºè®®**  
> - ç”¨æˆ·åã€å¯†ç  â†’ ç”¨ `@NotBlank`ï¼ˆæœ€ä¸¥æ ¼ï¼‰
> - é›†åˆã€æ•°ç»„ â†’ ç”¨ `@NotEmpty`
> - å¯¹è±¡å¼•ç”¨ â†’ ç”¨ `@NotNull`

### 4.2 æ•°å€¼èŒƒå›´æ ¡éªŒ


```java
public class ProductDTO {
    
    // ä»·æ ¼å¿…é¡»æ˜¯æ­£æ•°
    @Positive(message = "ä»·æ ¼å¿…é¡»å¤§äº0")
    private BigDecimal price;
    
    // åº“å­˜ä¸èƒ½æ˜¯è´Ÿæ•°
    @PositiveOrZero(message = "åº“å­˜ä¸èƒ½ä¸ºè´Ÿ")
    private Integer stock;
    
    // è¯„åˆ†èŒƒå›´ï¼š0-5åˆ†
    @Min(value = 0, message = "è¯„åˆ†æœ€ä½0åˆ†")
    @Max(value = 5, message = "è¯„åˆ†æœ€é«˜5åˆ†")
    private Integer rating;
    
    // æŠ˜æ‰£èŒƒå›´ï¼š0.1-1.0
    @DecimalMin(value = "0.1", message = "æŠ˜æ‰£æœ€ä½1æŠ˜")
    @DecimalMax(value = "1.0", message = "æŠ˜æ‰£æœ€é«˜10æŠ˜")
    private BigDecimal discount;
}
```

**æ³¨è§£åŠŸèƒ½å¯¹æ¯”**ï¼š

| æ³¨è§£ | **é€‚ç”¨ç±»å‹** | **æ ¡éªŒè§„åˆ™** | **å…¸å‹åœºæ™¯** |
|------|------------|-------------|------------|
| `@Positive` | `æ•°å€¼ç±»å‹` | `å€¼ > 0` | `ä»·æ ¼ã€é‡‘é¢` |
| `@PositiveOrZero` | `æ•°å€¼ç±»å‹` | `å€¼ >= 0` | `åº“å­˜ã€æ•°é‡` |
| `@Min/@Max` | `æ•´æ•°ç±»å‹` | `èŒƒå›´é™åˆ¶` | `å¹´é¾„ã€è¯„åˆ†` |
| `@DecimalMin/@DecimalMax` | `å°æ•°ç±»å‹` | `ç²¾ç¡®èŒƒå›´` | `æŠ˜æ‰£ã€åˆ©ç‡` |

### 4.3 å­—ç¬¦ä¸²æ ¼å¼æ ¡éªŒ


```java
public class UserInfoDTO {
    
    // æ‰‹æœºå·ï¼ˆæ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒï¼‰
    @Pattern(regexp = "^1[3-9]\\d{9}$", 
             message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    // é‚®ç®±
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    // ç”¨æˆ·åé•¿åº¦ï¼š3-20å­—ç¬¦
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦3-20å­—ç¬¦")
    private String username;
    
    // ç®€ä»‹ä¸è¶…è¿‡500å­—
    @Length(max = 500, message = "ç®€ä»‹ä¸èƒ½è¶…è¿‡500å­—")
    private String bio;
}
```

> ğŸ’¡ **æ­£åˆ™è¡¨è¾¾å¼æç¤º**  
> `^1[3-9]\\d{9}$` è§£è¯»ï¼š
> - `^` = å¼€å¤´
> - `1` = å¿…é¡»ä»¥1å¼€å¤´  
> - `[3-9]` = ç¬¬äºŒä½æ˜¯3-9
> - `\\d{9}` = åé¢è·Ÿ9ä¸ªæ•°å­—
> - `$` = ç»“å°¾

### 4.4 æ—¥æœŸæ—¶é—´æ ¡éªŒ


```java
public class EventDTO {
    
    // ç”Ÿæ—¥å¿…é¡»æ˜¯è¿‡å»çš„æ—¥æœŸ
    @Past(message = "ç”Ÿæ—¥å¿…é¡»æ˜¯è¿‡å»çš„æ—¥æœŸ")
    private LocalDate birthday;
    
    // æ´»åŠ¨å¼€å§‹æ—¶é—´å¿…é¡»æ˜¯æœªæ¥
    @Future(message = "æ´»åŠ¨æ—¶é—´å¿…é¡»æ˜¯æœªæ¥")
    private LocalDateTime startTime;
    
    // é¢„çº¦æ—¶é—´ï¼ˆåŒ…å«å½“å‰æ—¶åˆ»ï¼‰
    @FutureOrPresent(message = "é¢„çº¦æ—¶é—´ä¸èƒ½æ˜¯è¿‡å»")
    private LocalDateTime appointmentTime;
}
```

**æ—¶é—´æ ¡éªŒå¯¹æ¯”**ï¼š

```
æ—¶é—´è½´ï¼š  è¿‡å» â†â€•â€•â€•â€•â€•â€• ç°åœ¨ â€•â€•â€•â€•â€•â€•â†’ æœªæ¥

@Past           âœ…      âŒ         âŒ
@PastOrPresent  âœ…      âœ…         âŒ  
@Future         âŒ      âŒ         âœ…
@FutureOrPresent âŒ     âœ…         âœ…
```

### 4.5 é›†åˆä¸å¯¹è±¡æ ¡éªŒ


```java
public class OrderDTO {
    
    // å•†å“åˆ—è¡¨ä¸èƒ½ä¸ºç©ºï¼Œè‡³å°‘1ä»¶
    @NotEmpty(message = "è‡³å°‘é€‰æ‹©ä¸€ä»¶å•†å“")
    @Size(min = 1, max = 20, message = "æœ€å¤šè´­ä¹°20ä»¶å•†å“")
    private List<ProductDTO> products;
    
    // æ”¶è´§åœ°å€å¿…é¡»å®Œæ•´
    @NotNull(message = "æ”¶è´§åœ°å€ä¸èƒ½ä¸ºç©º")
    @Valid  // â† åµŒå¥—æ ¡éªŒï¼Œä¼šæ ¡éªŒAddresså†…éƒ¨çš„å­—æ®µ
    private Address shippingAddress;
}

public class Address {
    @NotBlank(message = "æ”¶è´§äººå§“åä¸èƒ½ä¸ºç©º")
    private String receiverName;
    
    @NotBlank(message = "è¯¦ç»†åœ°å€ä¸èƒ½ä¸ºç©º")
    private String detailAddress;
}
```

> âš ï¸ **åµŒå¥—æ ¡éªŒè¦ç‚¹**  
> å¯¹è±¡é‡Œé¢è¿˜æœ‰å¯¹è±¡æ—¶ï¼Œéœ€è¦åœ¨å¯¹è±¡å­—æ®µä¸ŠåŠ  `@Valid`ï¼Œè¿™æ ·å†…éƒ¨çš„æ ¡éªŒæ³¨è§£æ‰ä¼šç”Ÿæ•ˆï¼

---

## 5. ğŸ›ï¸ åˆ†ç»„æ ¡éªŒå®ç°


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†ç»„æ ¡éªŒ


**å®é™…åœºæ™¯**ï¼šåŒä¸€ä¸ªç”¨æˆ·å¯¹è±¡ï¼Œåœ¨ä¸åŒæ“ä½œæ—¶çš„æ ¡éªŒè§„åˆ™ä¸åŒ

```
æ–°å¢ç”¨æˆ·åœºæ™¯ï¼š
âœ… å¿…é¡»è¾“å…¥ç”¨æˆ·å
âœ… å¿…é¡»è¾“å…¥å¯†ç 
âŒ ä¸éœ€è¦è¾“å…¥IDï¼ˆç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼‰

æ›´æ–°ç”¨æˆ·åœºæ™¯ï¼š
âœ… å¿…é¡»è¾“å…¥IDï¼ˆç”¨äºå®šä½ç”¨æˆ·ï¼‰
âœ… å¿…é¡»è¾“å…¥ç”¨æˆ·å
âŒ å¯†ç å¯ä»¥ä¸è¾“å…¥ï¼ˆä¸æ”¹å¯†ç ï¼‰

å¦‚ä½•è§£å†³ï¼Ÿâ†’ ä½¿ç”¨åˆ†ç»„æ ¡éªŒï¼
```

### 5.2 åˆ†ç»„æ ¡éªŒå®ç°æ­¥éª¤


**ç¬¬ä¸€æ­¥ï¼šå®šä¹‰åˆ†ç»„æ¥å£**

```java
// åˆ†ç»„æ ‡è®°æ¥å£ï¼ˆç©ºæ¥å£å³å¯ï¼‰
public interface CreateGroup {}  // æ–°å¢åˆ†ç»„
public interface UpdateGroup {}  // æ›´æ–°åˆ†ç»„
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**  
> è¿™äº›æ¥å£åªæ˜¯"æ ‡ç­¾"ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒçš„æ ¡éªŒåœºæ™¯ï¼Œä¸éœ€è¦å†™ä»»ä½•æ–¹æ³•ï¼

**ç¬¬äºŒæ­¥ï¼šåœ¨æ³¨è§£ä¸ŠæŒ‡å®šåˆ†ç»„**

```java
public class UserDTO {
    
    // IDåªåœ¨æ›´æ–°æ—¶æ ¡éªŒ
    @NotNull(groups = UpdateGroup.class, message = "æ›´æ–°æ—¶IDä¸èƒ½ä¸ºç©º")
    private Long id;
    
    // ç”¨æˆ·ååœ¨æ–°å¢å’Œæ›´æ–°æ—¶éƒ½æ ¡éªŒ
    @NotBlank(groups = {CreateGroup.class, UpdateGroup.class}, 
              message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;
    
    // å¯†ç åªåœ¨æ–°å¢æ—¶å¿…å¡«
    @NotBlank(groups = CreateGroup.class, message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    private String password;
    
    // æ²¡æœ‰groupså±æ€§çš„æ³¨è§£ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šæ ¡éªŒ
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
}
```

**ç¬¬ä¸‰æ­¥ï¼šåœ¨Controllerä¸­æŒ‡å®šä½¿ç”¨å“ªä¸ªåˆ†ç»„**

```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    // æ–°å¢æ—¶ä½¿ç”¨CreateGroupåˆ†ç»„
    @PostMapping
    public String create(@Validated(CreateGroup.class) @RequestBody UserDTO user) {
        // idä¸æ ¡éªŒï¼Œusernameå’Œpasswordå¿…é¡»æ ¡éªŒ
        return "åˆ›å»ºæˆåŠŸ";
    }
    
    // æ›´æ–°æ—¶ä½¿ç”¨UpdateGroupåˆ†ç»„
    @PutMapping
    public String update(@Validated(UpdateGroup.class) @RequestBody UserDTO user) {
        // idå’Œusernameå¿…é¡»æ ¡éªŒï¼Œpasswordä¸æ ¡éªŒ
        return "æ›´æ–°æˆåŠŸ";
    }
}
```

### 5.3 åˆ†ç»„ç»§æ‰¿ä¸ç»„åˆ


```java
// å®šä¹‰åˆ†ç»„ç»§æ‰¿å…³ç³»
public interface UpdateGroup extends CreateGroup {
    // UpdateGroupç»§æ‰¿CreateGroup
    // æ„å‘³ç€ï¼šUpdateGroupçš„æ ¡éªŒåŒ…å«CreateGroupçš„æ‰€æœ‰è§„åˆ™
}

public class UserDTO {
    // åªæ ‡è®°åœ¨CreateGroupä¸Š
    @NotBlank(groups = CreateGroup.class)
    private String password;
    
    // ä½¿ç”¨UpdateGroupæ ¡éªŒæ—¶ï¼Œä¹Ÿä¼šåŒ…å«passwordçš„æ ¡éªŒ
}
```

**åˆ†ç»„ç»§æ‰¿ç¤ºæ„å›¾**ï¼š
```
CreateGroupï¼ˆåŸºç¡€æ ¡éªŒï¼‰
     â†‘ ç»§æ‰¿
UpdateGroupï¼ˆåŒ…å«åŸºç¡€æ ¡éªŒ + é¢å¤–æ ¡éªŒï¼‰
```

---

## 6. ğŸ¨ è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰


**å†…ç½®æ³¨è§£æ— æ³•æ»¡è¶³çš„åœºæ™¯**ï¼š
- ğŸ“± æ‰‹æœºå·æ ¼å¼ï¼ˆå›½å†…ç‰¹å®šè§„åˆ™ï¼‰
- ğŸ†” èº«ä»½è¯å·æ ¡éªŒ
- ğŸ“‹ ä¸šåŠ¡ç‰¹å®šè§„åˆ™ï¼ˆå¦‚è®¢å•çŠ¶æ€åˆæ³•æ€§ï¼‰

### 6.2 è‡ªå®šä¹‰æ³¨è§£ä¸‰æ­¥èµ°


**ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ³¨è§£**

```java
@Target({ElementType.FIELD, ElementType.PARAMETER})  // å¯ç”¨äºå­—æ®µå’Œå‚æ•°
@Retention(RetentionPolicy.RUNTIME)                  // è¿è¡Œæ—¶æœ‰æ•ˆ
@Constraint(validatedBy = PhoneValidator.class)      // â† æŒ‡å®šæ ¡éªŒå™¨
@Documented
public @interface Phone {
    
    // å¿…éœ€çš„ä¸‰è¦ç´ 
    String message() default "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®";  // é”™è¯¯æ¶ˆæ¯
    
    Class<?>[] groups() default {};              // åˆ†ç»„
    
    Class<? extends Payload>[] payload() default {};  // è´Ÿè½½ï¼ˆæ‰©å±•ç”¨ï¼‰
}
```

> ğŸ’¡ **æ³¨è§£ä¸‰è¦ç´ è®°å¿†**  
> messageã€groupsã€payload æ˜¯Bean Validationè§„èŒƒè¦æ±‚çš„ï¼Œå¿…é¡»å†™ï¼

**ç¬¬äºŒæ­¥ï¼šå®ç°æ ¡éªŒå™¨**

```java
// æ³›å‹å«ä¹‰ï¼š<æ³¨è§£ç±»å‹, è¢«æ ¡éªŒçš„æ•°æ®ç±»å‹>
public class PhoneValidator implements ConstraintValidator<Phone, String> {
    
    private static final Pattern PHONE_PATTERN = 
        Pattern.compile("^1[3-9]\\d{9}$");
    
    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        // nullå€¼ä¸åœ¨è¿™é‡Œå¤„ç†ï¼Œç”±@NotNullæ³¨è§£å¤„ç†
        if (value == null) {
            return true;
        }
        
        // å®é™…æ ¡éªŒé€»è¾‘
        return PHONE_PATTERN.matcher(value).matches();
    }
}
```

**ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£**

```java
public class UserDTO {
    
    @Phone(message = "è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·")
    private String phone;
}
```

### 6.3 å®Œæ•´ç¤ºä¾‹ï¼šèº«ä»½è¯å·æ ¡éªŒ


```java
// 1. å®šä¹‰æ³¨è§£
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = IdCardValidator.class)
public @interface IdCard {
    String message() default "èº«ä»½è¯å·æ ¼å¼ä¸æ­£ç¡®";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

// 2. å®ç°æ ¡éªŒé€»è¾‘
public class IdCardValidator implements ConstraintValidator<IdCard, String> {
    
    @Override
    public boolean isValid(String idCard, ConstraintValidatorContext context) {
        if (idCard == null) return true;
        
        // 18ä½èº«ä»½è¯æ ¡éªŒ
        if (idCard.length() != 18) return false;
        
        // å‰17ä½å¿…é¡»æ˜¯æ•°å­—
        if (!idCard.substring(0, 17).matches("\\d{17}")) return false;
        
        // æœ€åä¸€ä½å¯ä»¥æ˜¯æ•°å­—æˆ–X
        char lastChar = idCard.charAt(17);
        return Character.isDigit(lastChar) || lastChar == 'X' || lastChar == 'x';
    }
}

// 3. ä½¿ç”¨
public class UserDTO {
    @IdCard(message = "è¯·è¾“å…¥æ­£ç¡®çš„èº«ä»½è¯å·")
    private String idCardNumber;
}
```

---

## 7. ğŸš€ é«˜çº§æ ¡éªŒæŠ€å·§


### 7.1 è·¨å­—æ®µæ ¡éªŒ


**ä¸šåŠ¡åœºæ™¯**ï¼šç¡®è®¤å¯†ç å¿…é¡»å’Œå¯†ç ä¸€è‡´

```java
// 1. å®šä¹‰ç±»çº§åˆ«æ³¨è§£
@Target(ElementType.TYPE)  // â† æ³¨æ„ï¼šä½œç”¨åœ¨ç±»ä¸Š
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = PasswordMatchValidator.class)
public @interface PasswordMatch {
    String message() default "ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
    
    // å¯ä»¥è‡ªå®šä¹‰å±æ€§ï¼ŒæŒ‡å®šå­—æ®µå
    String passwordField() default "password";
    String confirmPasswordField() default "confirmPassword";
}

// 2. å®ç°æ ¡éªŒå™¨
public class PasswordMatchValidator 
    implements ConstraintValidator<PasswordMatch, Object> {
    
    private String passwordField;
    private String confirmPasswordField;
    
    @Override
    public void initialize(PasswordMatch annotation) {
        this.passwordField = annotation.passwordField();
        this.confirmPasswordField = annotation.confirmPasswordField();
    }
    
    @Override
    public boolean isValid(Object obj, ConstraintValidatorContext context) {
        try {
            // ä½¿ç”¨åå°„è·å–å­—æ®µå€¼
            Field pwd = obj.getClass().getDeclaredField(passwordField);
            Field confirmPwd = obj.getClass().getDeclaredField(confirmPasswordField);
            pwd.setAccessible(true);
            confirmPwd.setAccessible(true);
            
            Object pwdValue = pwd.get(obj);
            Object confirmPwdValue = confirmPwd.get(obj);
            
            return Objects.equals(pwdValue, confirmPwdValue);
        } catch (Exception e) {
            return false;
        }
    }
}

// 3. ä½¿ç”¨ï¼ˆæ³¨è§£åŠ åœ¨ç±»ä¸Šï¼‰
@PasswordMatch(message = "ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´")
public class RegisterDTO {
    private String password;
    private String confirmPassword;
}
```

### 7.2 æ¡ä»¶æ ¡éªŒå®ç°


**åœºæ™¯**ï¼šåªæœ‰å½“æ”¯ä»˜æ–¹å¼ä¸º"é“¶è¡Œå¡"æ—¶ï¼Œæ‰éœ€è¦æ ¡éªŒå¡å·

```java
public class PaymentDTO {
    
    @NotBlank
    private String paymentType;  // æ”¯ä»˜æ–¹å¼ï¼šcard/alipay/wechat
    
    // æ¡ä»¶æ ¡éªŒï¼šåªæœ‰paymentType=cardæ—¶æ‰æ ¡éªŒ
    @ConditionalValidation(
        condition = "paymentType", 
        value = "card",
        message = "é€‰æ‹©é“¶è¡Œå¡æ”¯ä»˜æ—¶ï¼Œå¡å·ä¸èƒ½ä¸ºç©º"
    )
    private String cardNumber;
}
```

> ğŸ’¡ **å®ç°æ€è·¯**  
> æ¡ä»¶æ ¡éªŒéœ€è¦è‡ªå®šä¹‰æ³¨è§£ï¼Œåœ¨æ ¡éªŒå™¨ä¸­åˆ¤æ–­æ¡ä»¶å­—æ®µçš„å€¼ï¼Œå†³å®šæ˜¯å¦æ‰§è¡Œæ ¡éªŒ

### 7.3 é›†åˆå…ƒç´ æ ¡éªŒ


```java
public class BatchUserDTO {
    
    // æ ¡éªŒé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ 
    @Valid  // â† å…³é”®ï¼šè§¦å‘å…ƒç´ çš„æ ¡éªŒ
    @NotEmpty(message = "ç”¨æˆ·åˆ—è¡¨ä¸èƒ½ä¸ºç©º")
    private List<@Valid UserDTO> users;  // â† Java 8+æ”¯æŒè¿™ç§å†™æ³•
}

public class UserDTO {
    @NotBlank
    private String username;
    
    @Email
    private String email;
}
```

**æ ¡éªŒæµç¨‹**ï¼š
```
1. æ£€æŸ¥ users åˆ—è¡¨æ˜¯å¦ä¸ºç©º (@NotEmpty)
         â†“
2. éå†åˆ—è¡¨ä¸­çš„æ¯ä¸ª UserDTO (@Valid)
         â†“
3. æ ¡éªŒæ¯ä¸ª UserDTO å†…éƒ¨çš„å­—æ®µ (username, email)
```

---

## 8. ğŸŒ æ ¡éªŒé”™è¯¯å¤„ç†ä¸å›½é™…åŒ–


### 8.1 ç»Ÿä¸€å¼‚å¸¸å¤„ç†


**é—®é¢˜**ï¼šæ ¡éªŒå¤±è´¥æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦ç»Ÿä¸€å¤„ç†

```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    // å¤„ç†@Validæ ¡éªŒå¤±è´¥
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ErrorResponse> handleValidException(
        MethodArgumentNotValidException e) {
        
        // è·å–ç¬¬ä¸€ä¸ªé”™è¯¯ä¿¡æ¯
        BindingResult result = e.getBindingResult();
        FieldError fieldError = result.getFieldError();
        
        String errorMessage = fieldError != null ? 
            fieldError.getDefaultMessage() : "å‚æ•°æ ¡éªŒå¤±è´¥";
        
        return ResponseEntity.badRequest()
            .body(new ErrorResponse(400, errorMessage));
    }
    
    // å¤„ç†@Validatedæ ¡éªŒå¤±è´¥ï¼ˆæ–¹æ³•å‚æ•°ï¼‰
    @ExceptionHandler(ConstraintViolationException.class)
    public ResponseEntity<ErrorResponse> handleConstraintViolation(
        ConstraintViolationException e) {
        
        String errorMessage = e.getConstraintViolations()
            .stream()
            .map(ConstraintViolation::getMessage)
            .collect(Collectors.joining("; "));
        
        return ResponseEntity.badRequest()
            .body(new ErrorResponse(400, errorMessage));
    }
}

// ç»Ÿä¸€é”™è¯¯å“åº”
@Data
@AllArgsConstructor
public class ErrorResponse {
    private Integer code;
    private String message;
}
```

### 8.2 è¿”å›æ‰€æœ‰é”™è¯¯ä¿¡æ¯


```java
@ExceptionHandler(MethodArgumentNotValidException.class)
public ResponseEntity<Map<String, String>> handleValidException(
    MethodArgumentNotValidException e) {
    
    // æ”¶é›†æ‰€æœ‰å­—æ®µçš„é”™è¯¯
    Map<String, String> errors = new HashMap<>();
    
    e.getBindingResult().getFieldErrors().forEach(error -> {
        String fieldName = error.getField();
        String errorMessage = error.getDefaultMessage();
        errors.put(fieldName, errorMessage);
    });
    
    return ResponseEntity.badRequest().body(errors);
}
```

**è¿”å›æ ¼å¼ç¤ºä¾‹**ï¼š
```json
{
  "username": "ç”¨æˆ·åä¸èƒ½ä¸ºç©º",
  "email": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
  "age": "å¹´é¾„å¿…é¡»å¤§äº18å²"
}
```

### 8.3 æ ¡éªŒæ¶ˆæ¯å›½é™…åŒ–


**ç¬¬ä¸€æ­¥ï¼šé…ç½®å›½é™…åŒ–æ–‡ä»¶**

```properties
# ValidationMessages_zh_CN.propertiesï¼ˆä¸­æ–‡ï¼‰
user.username.notblank=ç”¨æˆ·åä¸èƒ½ä¸ºç©º
user.email.invalid=é‚®ç®±æ ¼å¼ä¸æ­£ç¡®

# ValidationMessages_en_US.propertiesï¼ˆè‹±æ–‡ï¼‰
user.username.notblank=Username cannot be blank
user.email.invalid=Invalid email format
```

**ç¬¬äºŒæ­¥ï¼šåœ¨æ³¨è§£ä¸­å¼•ç”¨**

```java
public class UserDTO {
    
    @NotBlank(message = "{user.username.notblank}")
    private String username;
    
    @Email(message = "{user.email.invalid}")
    private String email;
}
```

**ç¬¬ä¸‰æ­¥ï¼šé…ç½®MessageSource**

```java
@Configuration
public class ValidationConfig {
    
    @Bean
    public MessageSource messageSource() {
        ReloadableResourceBundleMessageSource messageSource = 
            new ReloadableResourceBundleMessageSource();
        messageSource.setBasename("classpath:ValidationMessages");
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }
    
    @Bean
    public LocalValidatorFactoryBean validator(MessageSource messageSource) {
        LocalValidatorFactoryBean validator = new LocalValidatorFactoryBean();
        validator.setValidationMessageSource(messageSource);
        return validator;
    }
}
```

### 8.4 å‰åç«¯æ ¡éªŒé…åˆ


**å‰ç«¯æ ¡éªŒï¼ˆVueç¤ºä¾‹ï¼‰**ï¼š
```javascript
// å‰ç«¯è¿›è¡ŒåŸºç¡€æ ¼å¼æ ¡éªŒ
const rules = {
  username: [
    { required: true, message: 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º' },
    { min: 3, max: 20, message: 'é•¿åº¦3-20å­—ç¬¦' }
  ],
  email: [
    { type: 'email', message: 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®' }
  ]
}
```

**åç«¯æ ¡éªŒ**ï¼š
```java
// åç«¯è¿›è¡Œä¸šåŠ¡é€»è¾‘æ ¡éªŒ
@PostMapping("/register")
public String register(@Valid @RequestBody UserDTO user) {
    
    // åç«¯è¿˜è¦æ ¡éªŒä¸šåŠ¡è§„åˆ™
    if (userService.existsByUsername(user.getUsername())) {
        throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
    }
    
    return "æ³¨å†ŒæˆåŠŸ";
}
```

**åä½œåŸåˆ™**ï¼š
```
å‰ç«¯æ ¡éªŒ â†’ æå‡ç”¨æˆ·ä½“éªŒï¼ˆå³æ—¶åé¦ˆï¼‰
           â†“
åç«¯æ ¡éªŒ â†’ ä¿è¯æ•°æ®å®‰å…¨ï¼ˆä¸å¯ç»•è¿‡ï¼‰
           â†“
æ•°æ®åº“çº¦æŸ â†’ æœ€åé˜²çº¿ï¼ˆå”¯ä¸€çº¦æŸç­‰ï¼‰
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®æ ¡éªŒä¸‰å±‚é˜²å¾¡ï¼šå‰ç«¯ä½“éªŒ + åç«¯å®‰å…¨ + æ•°æ®åº“çº¦æŸ
ğŸ”¸ Bean Validationè§„èŒƒï¼šç»Ÿä¸€çš„æ ¡éªŒæ ‡å‡†ï¼ˆJSR-380ï¼‰
ğŸ”¸ Hibernate Validatorï¼šæœ€å¸¸ç”¨çš„è§„èŒƒå®ç°
ğŸ”¸ æ ¡éªŒæ³¨è§£ä½“ç³»ï¼šç©ºå€¼ã€èŒƒå›´ã€æ ¼å¼ã€æ—¥æœŸç­‰å…¨é¢è¦†ç›–
ğŸ”¸ åˆ†ç»„æ ¡éªŒï¼šä¸åŒåœºæ™¯ä½¿ç”¨ä¸åŒè§„åˆ™
ğŸ”¸ è‡ªå®šä¹‰æ³¨è§£ï¼šæ»¡è¶³ä¸šåŠ¡ç‰¹å®šéœ€æ±‚
ğŸ”¸ ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼šä¼˜é›…åœ°è¿”å›é”™è¯¯ä¿¡æ¯
```

### 9.2 æ³¨è§£é€‰æ‹©é€ŸæŸ¥è¡¨


| åœºæ™¯ | **æ¨èæ³¨è§£** | **ç¤ºä¾‹** |
|------|------------|---------|
| **ç”¨æˆ·å** | `@NotBlank + @Size` | `@NotBlank @Size(min=3, max=20)` |
| **å¯†ç ** | `@NotBlank + @Pattern` | `@NotBlank @Pattern(regexp="...")` |
| **é‚®ç®±** | `@NotBlank + @Email` | `@NotBlank @Email` |
| **æ‰‹æœºå·** | `@NotBlank + @Phone` | `@NotBlank @Phone`ï¼ˆè‡ªå®šä¹‰ï¼‰ |
| **å¹´é¾„** | `@Min + @Max` | `@Min(0) @Max(150)` |
| **ä»·æ ¼** | `@Positive` | `@Positive` |
| **ç”Ÿæ—¥** | `@Past` | `@Past` |
| **é›†åˆ** | `@NotEmpty + @Size` | `@NotEmpty @Size(min=1)` |

### 9.3 å®æˆ˜æœ€ä½³å®è·µ


**âœ… æ¨èåšæ³•**ï¼š
```java
// 1. æ³¨è§£å’Œå­—æ®µä¸€ä¸€å¯¹åº”ï¼Œæ¸…æ™°æ˜äº†
@NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
@Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦3-20å­—ç¬¦")
private String username;

// 2. ä½¿ç”¨åˆ†ç»„åº”å¯¹ä¸åŒåœºæ™¯
@NotNull(groups = UpdateGroup.class)
private Long id;

// 3. è‡ªå®šä¹‰ä¸šåŠ¡æ ¡éªŒæ³¨è§£
@Phone(message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
private String phone;

// 4. ç»Ÿä¸€å¼‚å¸¸å¤„ç†
@RestControllerAdvice
public class GlobalExceptionHandler { ... }
```

**âŒ é¿å…çš„å‘**ï¼š
```java
// âŒ é”™è¯¯1ï¼šå¿˜è®°åŠ @Validè§¦å‘åµŒå¥—æ ¡éªŒ
@NotNull
private Address address;  // Addresså†…éƒ¨çš„æ ¡éªŒä¸ä¼šç”Ÿæ•ˆ

// âœ… æ­£ç¡®ï¼š
@NotNull
@Valid  // â† å¿…é¡»åŠ è¿™ä¸ª
private Address address;

// âŒ é”™è¯¯2ï¼šç©ºå€¼æ ¡éªŒç”¨é”™æ³¨è§£
@NotNull  // â† ç©ºå­—ç¬¦ä¸²ä¼šé€šè¿‡æ ¡éªŒ
private String username;

// âœ… æ­£ç¡®ï¼š
@NotBlank  // â† ç©ºå­—ç¬¦ä¸²ä¹Ÿä¼šæ‹¦æˆª
private String username;
```

### 9.4 å­¦ä¹ è·¯å¾„å»ºè®®


**æ–°æ‰‹å­¦ä¹ è·¯çº¿**ï¼š
```
ç¬¬1æ­¥ï¼šç†è§£ä¸ºä»€ä¹ˆéœ€è¦æ ¡éªŒï¼ˆæ•°æ®å®‰å…¨ï¼‰
         â†“
ç¬¬2æ­¥ï¼šæŒæ¡å¸¸ç”¨æ³¨è§£ï¼ˆ@NotBlankã€@Sizeç­‰ï¼‰
         â†“
ç¬¬3æ­¥ï¼šå­¦ä¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆè¿”å›å‹å¥½é”™è¯¯ä¿¡æ¯ï¼‰
         â†“
ç¬¬4æ­¥ï¼šä½¿ç”¨åˆ†ç»„æ ¡éªŒï¼ˆä¸€ä¸ªDTOåº”å¯¹å¤šåœºæ™¯ï¼‰
         â†“
ç¬¬5æ­¥ï¼šè‡ªå®šä¹‰æ³¨è§£ï¼ˆæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼‰
```

> ğŸ¯ **æ ¸å¿ƒè®°å¿†å£è¯€**  
> **å‰ç«¯ä½“éªŒåç«¯é˜²ï¼Œæ³¨è§£æ ‡è®°è§„åˆ™è¯¦**  
> **åˆ†ç»„åœºæ™¯å„ä¸åŒï¼Œå¼‚å¸¸å¤„ç†è¦ç»Ÿä¸€**  
> **å›½é™…åŒ–é…å¤šè¯­è¨€,å‰åé…åˆä¿å®‰å…¨**

### 9.5 å¿«é€Ÿå‚è€ƒå¡ç‰‡


**æ ¡éªŒå¤±è´¥æ—¶çš„å¤„ç†æµç¨‹**ï¼š
```
1. æ ¡éªŒå¤±è´¥ â†’ æŠ›å‡ºå¼‚å¸¸
2. @RestControllerAdvice æ•è·å¼‚å¸¸
3. æå–é”™è¯¯ä¿¡æ¯
4. è¿”å›ç»Ÿä¸€æ ¼å¼çš„é”™è¯¯å“åº”
5. å‰ç«¯å±•ç¤ºé”™è¯¯ä¿¡æ¯ç»™ç”¨æˆ·
```

**å¸¸è§é—®é¢˜æ’æŸ¥**ï¼š
- â“ æ ¡éªŒä¸ç”Ÿæ•ˆ â†’ æ£€æŸ¥æ˜¯å¦åŠ äº†`@Valid`æˆ–`@Validated`
- â“ åµŒå¥—å¯¹è±¡æ ¡éªŒå¤±è´¥ â†’ æ£€æŸ¥åµŒå¥—å¯¹è±¡æ˜¯å¦åŠ äº†`@Valid`
- â“ åˆ†ç»„æ ¡éªŒä¸èµ·ä½œç”¨ â†’ æ£€æŸ¥`groups`å±æ€§æ˜¯å¦æ­£ç¡®æŒ‡å®š
- â“ è‡ªå®šä¹‰æ³¨è§£ä¸ç”Ÿæ•ˆ â†’ æ£€æŸ¥`@Constraint`æ˜¯å¦æŒ‡å®šäº†æ ¡éªŒå™¨

---

> ğŸ’¡ **å­¦ä¹ æç¤º**  
> æ•°æ®æ ¡éªŒæ˜¯åç«¯å¼€å‘çš„åŸºæœ¬åŠŸï¼Œå»ºè®®å¤šå†™å¤šç»ƒï¼ä»ç®€å•çš„å•å­—æ®µæ ¡éªŒå¼€å§‹ï¼Œé€æ­¥æŒæ¡åˆ†ç»„ã€è‡ªå®šä¹‰ç­‰é«˜çº§ç”¨æ³•ã€‚è®°ä½ï¼š**æ°¸è¿œä¸è¦ç›¸ä¿¡å‰ç«¯ä¼ æ¥çš„æ•°æ®**ï¼Œåç«¯æ ¡éªŒæ˜¯å®‰å…¨çš„æœ€åä¸€é“é˜²çº¿ï¼