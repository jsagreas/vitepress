---
title: 3ã€åˆ†é¡µæ’ä»¶é›†æˆä½¿ç”¨
---
## ğŸ“š ç›®å½•

1. [åˆ†é¡µæ’ä»¶æ¦‚è¿°](#1-åˆ†é¡µæ’ä»¶æ¦‚è¿°)
2. [PageHelperæ’ä»¶é…ç½®](#2-PageHelperæ’ä»¶é…ç½®)
3. [åˆ†é¡µå‚æ•°ä¼ é€’](#3-åˆ†é¡µå‚æ•°ä¼ é€’)
4. [åˆ†é¡µä¿¡æ¯å°è£…](#4-åˆ†é¡µä¿¡æ¯å°è£…)
5. [åˆ†é¡µç»“æœå¤„ç†](#5-åˆ†é¡µç»“æœå¤„ç†)
6. [åˆ†é¡µSQLä¼˜åŒ–](#6-åˆ†é¡µSQLä¼˜åŒ–)
7. [ç‰©ç†åˆ†é¡µä¸é€»è¾‘åˆ†é¡µ](#7-ç‰©ç†åˆ†é¡µä¸é€»è¾‘åˆ†é¡µ)
8. [å‰ç«¯åˆ†é¡µç»„ä»¶å¯¹æ¥](#8-å‰ç«¯åˆ†é¡µç»„ä»¶å¯¹æ¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ åˆ†é¡µæ’ä»¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åˆ†é¡µï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ


**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
```
æƒ³è±¡ä½ åœ¨ç½‘ä¸Šè´­ç‰©ï¼š
âŒ ä¸åˆ†é¡µï¼šä¸€æ¬¡æ€§æ˜¾ç¤º10000ä¸ªå•†å“ï¼Œé¡µé¢å¡æ­»ï¼Œæ‰¾ä¸åˆ°æƒ³è¦çš„
âœ… åˆ†é¡µåï¼šæ¯é¡µæ˜¾ç¤º20ä¸ªï¼Œå¯ä»¥ç¿»é¡µæŸ¥çœ‹ï¼Œä½“éªŒæµç•…
```

**æŠ€æœ¯å±‚é¢çš„ç†è§£**ï¼š
- **æœ¬è´¨**ï¼šå°†å¤§é‡æ•°æ®åˆ†æ‰¹æ¬¡å±•ç¤ºï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨æŸ¥å‡ºæ¥
- **ç›®çš„**ï¼šæå‡æ€§èƒ½ã€æ”¹å–„ç”¨æˆ·ä½“éªŒã€å‡è½»æ•°æ®åº“å‹åŠ›
- **æ ¸å¿ƒæ€æƒ³**ï¼šæŒ‰éœ€åŠ è½½ï¼Œç”¨æˆ·çœ‹å“ªä¸€é¡µå°±åªæŸ¥å“ªä¸€é¡µçš„æ•°æ®

### 1.2 PageHelperæ˜¯ä»€ä¹ˆï¼Ÿ


> ğŸ’¡ **ä¸€å¥è¯ç†è§£**ï¼šPageHelperæ˜¯MyBatisçš„ä¸€ä¸ªæ’ä»¶ï¼Œå¸®ä½ è‡ªåŠ¨å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œä¸ç”¨è‡ªå·±å†™å¤æ‚çš„SQL

**ä¸ºä»€ä¹ˆé€‰æ‹©PageHelper**ï¼š
- âœ… **é›¶ä¾µå…¥**ï¼šä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„Mapper.xmlæ–‡ä»¶
- âœ… **è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨å¸®ä½ åœ¨SQLåé¢åŠ ä¸Šåˆ†é¡µè¯­å¥
- âœ… **å¤šæ•°æ®åº“**ï¼šè‡ªåŠ¨é€‚é…MySQLã€Oracleã€PostgreSQLç­‰
- âœ… **ç®€å•æ˜“ç”¨**ï¼šä¸€è¡Œä»£ç æå®šåˆ†é¡µ

**å·¥ä½œåŸç†ç®€å›¾**ï¼š
```
ä¸šåŠ¡å±‚                    PageHelper                  æ•°æ®åº“
  |                          |                          |
  |--[1] è®¾ç½®åˆ†é¡µå‚æ•°-------->|                          |
  |    PageHelper.startPage(1,10)                       |
  |                          |                          |
  |--[2] æ‰§è¡ŒæŸ¥è¯¢------------>|                          |
  |    userMapper.selectAll()|                          |
  |                          |                          |
  |                          |--[3] æ‹¦æˆªSQL------------>|
  |                          |  SELECT * FROM user      |
  |                          |  â†“æ·»åŠ åˆ†é¡µ               |
  |                          |  SELECT * FROM user      |
  |                          |  LIMIT 0,10              |
  |                          |                          |
  |                          |<-[4] è¿”å›ç»“æœ------------|
  |<--[5] å°è£…PageInfo-------|                          |
```

---

## 2. ğŸ”§ PageHelperæ’ä»¶é…ç½®


### 2.1 æ·»åŠ ä¾èµ–


**Mavené…ç½®**ï¼ˆpom.xmlï¼‰ï¼š
```xml
<!-- PageHelperåˆ†é¡µæ’ä»¶ -->
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper-spring-boot-starter</artifactId>
    <version>1.4.7</version>
</dependency>
```

> âš ï¸ **ç‰ˆæœ¬é€‰æ‹©è¯´æ˜**ï¼š
> - Spring Booté¡¹ç›®ç”¨`pagehelper-spring-boot-starter`ï¼ˆæ¨èï¼‰
> - æ™®é€šSSMé¡¹ç›®ç”¨`pagehelper`
> - ç‰ˆæœ¬è¦å’ŒMyBatisç‰ˆæœ¬åŒ¹é…

### 2.2 é…ç½®æ–‡ä»¶è®¾ç½®


**æ–¹å¼ä¸€ï¼šapplication.ymlé…ç½®**ï¼ˆSpring Bootæ¨èï¼‰
```yaml
# PageHelperåˆ†é¡µé…ç½®
pagehelper:
  # æ•°æ®åº“æ–¹è¨€ï¼Œè‡ªåŠ¨æ£€æµ‹æ•°æ®åº“ç±»å‹
  helper-dialect: mysql
  # åˆ†é¡µå‚æ•°åˆç†åŒ–ï¼šé¡µç <=0æŸ¥ç¬¬ä¸€é¡µï¼Œé¡µç >æ€»é¡µæ•°æŸ¥æœ€åä¸€é¡µ
  reasonable: true
  # æ”¯æŒé€šè¿‡Mapperæ¥å£å‚æ•°ä¼ é€’åˆ†é¡µå‚æ•°
  support-methods-arguments: true
  # åˆ†é¡µå‚æ•°åç§°
  params: count=countSql
```

**æ–¹å¼äºŒï¼šmybatis-config.xmlé…ç½®**ï¼ˆä¼ ç»ŸSSMé¡¹ç›®ï¼‰
```xml
<configuration>
    <plugins>
        <!-- PageHelperæ’ä»¶é…ç½® -->
        <plugin interceptor="com.github.pagehelper.PageInterceptor">
            <!-- æ•°æ®åº“æ–¹è¨€ -->
            <property name="helperDialect" value="mysql"/>
            <!-- åˆ†é¡µåˆç†åŒ– -->
            <property name="reasonable" value="true"/>
            <!-- æ”¯æŒæ–¹æ³•å‚æ•°ä¼ é€’ -->
            <property name="supportMethodsArguments" value="true"/>
        </plugin>
    </plugins>
</configuration>
```

### 2.3 é…ç½®å‚æ•°è¯¦è§£


| å‚æ•°å | ä½œç”¨è¯´æ˜ | æ¨èå€¼ | ä¸¾ä¾‹è¯´æ˜ |
|--------|---------|--------|----------|
| **helperDialect** | `æŒ‡å®šæ•°æ®åº“ç±»å‹` | `mysql` | `ä¸åŒæ•°æ®åº“åˆ†é¡µè¯­æ³•ä¸åŒï¼ŒMySQLç”¨LIMITï¼ŒOracleç”¨ROWNUM` |
| **reasonable** | `é¡µç åˆç†åŒ–å¤„ç†` | `true` | `é˜²æ­¢é¡µç è¶Šç•Œï¼šè¾“å…¥-1è‡ªåŠ¨æ”¹ä¸ºç¬¬1é¡µï¼Œè¾“å…¥999è‡ªåŠ¨æ”¹ä¸ºæœ€åä¸€é¡µ` |
| **supportMethodsArguments** | `æ”¯æŒæ–¹æ³•å‚æ•°åˆ†é¡µ` | `true` | `å¯ä»¥ç›´æ¥åœ¨æ–¹æ³•å‚æ•°ä¸­ä¼ å…¥pageNumå’ŒpageSize` |
| **params** | `åˆ†é¡µå‚æ•°åˆ«å` | `count=countSql` | `è‡ªå®šä¹‰å‚æ•°åç§°ï¼Œä¸€èˆ¬ç”¨é»˜è®¤å³å¯` |

---

## 3. ğŸ“ åˆ†é¡µå‚æ•°ä¼ é€’


### 3.1 åŸºç¡€ä½¿ç”¨æ–¹å¼


**æœ€ç®€å•çš„åˆ†é¡µæŸ¥è¯¢**ï¼š
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    /**
     * æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
     * @param pageNum å½“å‰é¡µç ï¼ˆç¬¬å‡ é¡µï¼‰
     * @param pageSize æ¯é¡µæ˜¾ç¤ºæ•°é‡
     */
    public PageInfo<User> getUserList(int pageNum, int pageSize) {
        // ç¬¬1æ­¥ï¼šè®¾ç½®åˆ†é¡µå‚æ•°ï¼ˆå¿…é¡»åœ¨æŸ¥è¯¢ä¹‹å‰è°ƒç”¨ï¼‰
        PageHelper.startPage(pageNum, pageSize);
        
        // ç¬¬2æ­¥ï¼šæ‰§è¡ŒæŸ¥è¯¢ï¼ˆè¿™é‡Œä¼šè‡ªåŠ¨åˆ†é¡µï¼‰
        List<User> userList = userMapper.selectAll();
        
        // ç¬¬3æ­¥ï¼šå°è£…åˆ†é¡µä¿¡æ¯
        PageInfo<User> pageInfo = new PageInfo<>(userList);
        
        return pageInfo;
    }
}
```

> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼š
> - `PageHelper.startPage()`å¿…é¡»ç´§è·Ÿåœ¨æŸ¥è¯¢è¯­å¥ä¹‹å‰
> - å®ƒä¼šæ‹¦æˆªä¸‹ä¸€æ¡SQLï¼Œè‡ªåŠ¨æ·»åŠ åˆ†é¡µè¯­å¥
> - åªå¯¹ç´§é‚»çš„ç¬¬ä¸€æ¡æŸ¥è¯¢æœ‰æ•ˆï¼Œå…¶ä»–æŸ¥è¯¢ä¸å—å½±å“

### 3.2 å‚æ•°ä¼ é€’çš„ä¸‰ç§æ–¹å¼


**æ–¹å¼ä¸€ï¼šæ˜¾å¼è°ƒç”¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰**
```java
// æ˜ç¡®è°ƒç”¨PageHelper.startPage()
PageHelper.startPage(1, 10);
List<User> list = userMapper.selectAll();
```

**æ–¹å¼äºŒï¼šæ–¹æ³•å‚æ•°ä¼ é€’**
```java
// Mapperæ–¹æ³•ä¸­ç›´æ¥ä¼ å‚ï¼ˆéœ€è¦é…ç½®supportMethodsArguments=trueï¼‰
public interface UserMapper {
    // å‚æ•°åå¿…é¡»æ˜¯pageNumå’ŒpageSize
    List<User> selectAll(@Param("pageNum") int pageNum, 
                         @Param("pageSize") int pageSize);
}

// è°ƒç”¨æ—¶ç›´æ¥ä¼ å‚
List<User> list = userMapper.selectAll(1, 10);
```

**æ–¹å¼ä¸‰ï¼šThreadLocalæ–¹å¼**
```java
// PageHelperå†…éƒ¨ç”¨ThreadLocalå­˜å‚¨åˆ†é¡µå‚æ•°
// æ‰€ä»¥åŒä¸€ä¸ªçº¿ç¨‹å†…çš„ä¸‹ä¸€ä¸ªæŸ¥è¯¢ä¼šè‡ªåŠ¨åˆ†é¡µ
PageHelper.startPage(1, 10);
// ä¸‹é¢è¿™ä¸ªæŸ¥è¯¢ä¼šè‡ªåŠ¨åˆ†é¡µ
List<User> list = userMapper.selectAll();
// å†ä¸‹ä¸€ä¸ªæŸ¥è¯¢ä¸ä¼šåˆ†é¡µï¼ˆå·²ç»è¢«æ¶ˆè´¹æ‰äº†ï¼‰
```

### 3.3 åˆ†é¡µå‚æ•°è¯´æ˜


**å‚æ•°å«ä¹‰å¯¹ç…§è¡¨**ï¼š
```
pageNumï¼šå½“å‰é¡µç 
  - ç¬¬1é¡µï¼špageNum = 1
  - ç¬¬2é¡µï¼špageNum = 2
  - ä»¥æ­¤ç±»æ¨

pageSizeï¼šæ¯é¡µæ˜¾ç¤ºæ¡æ•°
  - æ¯é¡µ10æ¡ï¼špageSize = 10
  - æ¯é¡µ20æ¡ï¼špageSize = 20

è®¡ç®—èµ·å§‹ä½ç½®ï¼š
  offset = (pageNum - 1) Ã— pageSize
  
  ç¤ºä¾‹ï¼š
  ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡ â†’ offset = (1-1) Ã— 10 = 0  â†’ LIMIT 0,10
  ç¬¬2é¡µï¼Œæ¯é¡µ10æ¡ â†’ offset = (2-1) Ã— 10 = 10 â†’ LIMIT 10,10
  ç¬¬3é¡µï¼Œæ¯é¡µ10æ¡ â†’ offset = (3-1) Ã— 10 = 20 â†’ LIMIT 20,10
```

---

## 4. ğŸ“¦ åˆ†é¡µä¿¡æ¯å°è£…


### 4.1 PageInfoå¯¹è±¡è¯¦è§£


**PageInfoåŒ…å«çš„ä¿¡æ¯**ï¼š
```java
PageInfo<User> pageInfo = new PageInfo<>(userList);

// ğŸ“Š PageInfoæä¾›çš„åˆ†é¡µä¿¡æ¯ï¼š
pageInfo.getPageNum();      // å½“å‰é¡µç 
pageInfo.getPageSize();     // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
pageInfo.getTotal();        // æ€»è®°å½•æ•°
pageInfo.getPages();        // æ€»é¡µæ•°
pageInfo.getList();         // å½“å‰é¡µçš„æ•°æ®åˆ—è¡¨
pageInfo.isIsFirstPage();   // æ˜¯å¦æ˜¯ç¬¬ä¸€é¡µ
pageInfo.isIsLastPage();    // æ˜¯å¦æ˜¯æœ€åä¸€é¡µ
pageInfo.isHasPreviousPage();// æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
pageInfo.isHasNextPage();   // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
pageInfo.getNavigatepageNums();// é¡µç å¯¼èˆªåˆ—è¡¨
```

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```java
@RestController
@RequestMapping("/user")
public class UserController {
    @Autowired
    private UserService userService;
    
    @GetMapping("/list")
    public Result getUserList(@RequestParam(defaultValue = "1") int pageNum,
                              @RequestParam(defaultValue = "10") int pageSize) {
        // è·å–åˆ†é¡µæ•°æ®
        PageInfo<User> pageInfo = userService.getUserList(pageNum, pageSize);
        
        // æ„å»ºè¿”å›ç»“æœ
        Map<String, Object> result = new HashMap<>();
        result.put("list", pageInfo.getList());           // å½“å‰é¡µæ•°æ®
        result.put("total", pageInfo.getTotal());         // æ€»è®°å½•æ•°
        result.put("pageNum", pageInfo.getPageNum());     // å½“å‰é¡µç 
        result.put("pages", pageInfo.getPages());         // æ€»é¡µæ•°
        
        return Result.success(result);
    }
}
```

### 4.2 è‡ªå®šä¹‰åˆ†é¡µå°è£…ç±»


**é€šç”¨åˆ†é¡µç»“æœç±»**ï¼š
```java
/**
 * é€šç”¨åˆ†é¡µç»“æœç±»
 * @param <T> æ•°æ®ç±»å‹
 */
public class PageResult<T> {
    private Long total;          // æ€»è®°å½•æ•°
    private Integer pages;       // æ€»é¡µæ•°
    private Integer pageNum;     // å½“å‰é¡µç 
    private Integer pageSize;    // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
    private List<T> list;        // å½“å‰é¡µæ•°æ®
    private Boolean hasNext;     // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
    private Boolean hasPre;      // æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
    
    // ä»PageInfoè½¬æ¢
    public static <T> PageResult<T> from(PageInfo<T> pageInfo) {
        PageResult<T> result = new PageResult<>();
        result.setTotal(pageInfo.getTotal());
        result.setPages(pageInfo.getPages());
        result.setPageNum(pageInfo.getPageNum());
        result.setPageSize(pageInfo.getPageSize());
        result.setList(pageInfo.getList());
        result.setHasNext(pageInfo.isHasNextPage());
        result.setHasPre(pageInfo.isHasPreviousPage());
        return result;
    }
    
    // getterå’Œsetterçœç•¥...
}
```

**ä½¿ç”¨åœºæ™¯å¯¹æ¯”**ï¼š
```
ğŸ”¸ ä½¿ç”¨PageInfoï¼š
  âœ… åŠŸèƒ½æœ€å…¨é¢ï¼ŒåŒ…å«å¯¼èˆªé¡µç ç­‰é«˜çº§åŠŸèƒ½
  âœ… å®˜æ–¹æä¾›ï¼Œç¨³å®šå¯é 
  âŒ å­—æ®µè¾ƒå¤šï¼Œå‰ç«¯å¯èƒ½ç”¨ä¸ä¸Šæ‰€æœ‰å­—æ®µ

ğŸ”¸ è‡ªå®šä¹‰PageResultï¼š
  âœ… è½»é‡çº§ï¼ŒåªåŒ…å«å¿…è¦å­—æ®µ
  âœ… å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å®šåˆ¶
  âŒ éœ€è¦è‡ªå·±ç»´æŠ¤ä»£ç 
```

---

## 5. ğŸ¨ åˆ†é¡µç»“æœå¤„ç†


### 5.1 Controllerå±‚ç»Ÿä¸€è¿”å›æ ¼å¼


**æ ‡å‡†çš„åˆ†é¡µæ¥å£è¿”å›**ï¼š
```java
@RestController
@RequestMapping("/api/user")
public class UserController {
    @Autowired
    private UserService userService;
    
    /**
     * åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·
     * è¿”å›æ ¼å¼ï¼š
     * {
     *   "code": 200,
     *   "message": "success",
     *   "data": {
     *     "total": 100,
     *     "pageNum": 1,
     *     "pageSize": 10,
     *     "pages": 10,
     *     "list": [...]
     *   }
     * }
     */
    @GetMapping("/page")
    public Result<PageInfo<User>> getUserPage(
            @RequestParam(defaultValue = "1") Integer pageNum,
            @RequestParam(defaultValue = "10") Integer pageSize,
            @RequestParam(required = false) String keyword) {
        
        PageInfo<User> pageInfo = userService.getUserPage(pageNum, pageSize, keyword);
        return Result.success(pageInfo);
    }
}
```

### 5.2 å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢


**Serviceå±‚å¤„ç†**ï¼š
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    public PageInfo<User> getUserPage(Integer pageNum, Integer pageSize, String keyword) {
        // è®¾ç½®åˆ†é¡µå‚æ•°
        PageHelper.startPage(pageNum, pageSize);
        
        // æ‰§è¡ŒæŸ¥è¯¢ï¼ˆå¯ä»¥å¸¦æŸ¥è¯¢æ¡ä»¶ï¼‰
        List<User> userList = userMapper.selectByKeyword(keyword);
        
        // å°è£…åˆ†é¡µä¿¡æ¯
        return new PageInfo<>(userList);
    }
}
```

**Mapper.xmlä¸­çš„SQL**ï¼š
```xml
<select id="selectByKeyword" resultType="User">
    SELECT * FROM user
    <where>
        <if test="keyword != null and keyword != ''">
            AND (username LIKE CONCAT('%', #{keyword}, '%')
            OR email LIKE CONCAT('%', #{keyword}, '%'))
        </if>
    </where>
    <!-- ä¸éœ€è¦å†™LIMITï¼ŒPageHelperä¼šè‡ªåŠ¨æ·»åŠ  -->
</select>
```

### 5.3 æ•°æ®è½¬æ¢å¤„ç†


**åœºæ™¯**ï¼šæŸ¥è¯¢ç»“æœéœ€è¦è½¬æ¢VOå¯¹è±¡
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    public PageInfo<UserVO> getUserVOPage(Integer pageNum, Integer pageSize) {
        // åˆ†é¡µæŸ¥è¯¢å®ä½“
        PageHelper.startPage(pageNum, pageSize);
        List<User> userList = userMapper.selectAll();
        PageInfo<User> pageInfo = new PageInfo<>(userList);
        
        // è½¬æ¢ä¸ºVOå¯¹è±¡
        List<UserVO> voList = userList.stream()
                .map(user -> {
                    UserVO vo = new UserVO();
                    vo.setId(user.getId());
                    vo.setUsername(user.getUsername());
                    // ... å…¶ä»–å­—æ®µè½¬æ¢
                    return vo;
                })
                .collect(Collectors.toList());
        
        // åˆ›å»ºæ–°çš„PageInfoï¼ˆä¿ç•™åˆ†é¡µä¿¡æ¯ï¼‰
        PageInfo<UserVO> voPageInfo = new PageInfo<>(voList);
        voPageInfo.setTotal(pageInfo.getTotal());
        voPageInfo.setPages(pageInfo.getPages());
        
        return voPageInfo;
    }
}
```

---

## 6. âš¡ åˆ†é¡µSQLä¼˜åŒ–


### 6.1 COUNTæŸ¥è¯¢ä¼˜åŒ–


**é—®é¢˜**ï¼šåˆ†é¡µæ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡SQL
```sql
-- ç¬¬1æ¬¡ï¼šæŸ¥è¯¢æ€»æ•°
SELECT COUNT(*) FROM user WHERE status = 1;

-- ç¬¬2æ¬¡ï¼šæŸ¥è¯¢æ•°æ®
SELECT * FROM user WHERE status = 1 LIMIT 0, 10;
```

**ä¼˜åŒ–æ–¹æ¡ˆä¸€ï¼šç¦ç”¨countæŸ¥è¯¢**ï¼ˆé€‚åˆä¸éœ€è¦æ€»æ•°çš„åœºæ™¯ï¼‰
```java
// åªæŸ¥è¯¢æ•°æ®ï¼Œä¸æŸ¥è¯¢æ€»æ•°
PageHelper.startPage(pageNum, pageSize, false);
List<User> list = userMapper.selectAll();
```

**ä¼˜åŒ–æ–¹æ¡ˆäºŒï¼šå¼‚æ­¥æŸ¥è¯¢count**ï¼ˆé€‚åˆå¤§æ•°æ®é‡ï¼‰
```java
@Service
public class UserService {
    @Async
    public CompletableFuture<Long> getCountAsync(String keyword) {
        return CompletableFuture.supplyAsync(() -> 
            userMapper.countByKeyword(keyword)
        );
    }
    
    public PageInfo<User> getUserPageOptimized(Integer pageNum, Integer pageSize, String keyword) {
        // å¼‚æ­¥è·å–æ€»æ•°
        CompletableFuture<Long> countFuture = getCountAsync(keyword);
        
        // åŒæ­¥æŸ¥è¯¢æ•°æ®ï¼ˆä¸æŸ¥countï¼‰
        PageHelper.startPage(pageNum, pageSize, false);
        List<User> list = userMapper.selectByKeyword(keyword);
        
        // æ‰‹åŠ¨è®¾ç½®æ€»æ•°
        PageInfo<User> pageInfo = new PageInfo<>(list);
        pageInfo.setTotal(countFuture.join());
        
        return pageInfo;
    }
}
```

### 6.2 ç´¢å¼•ä¼˜åŒ–


**é—®é¢˜**ï¼šåˆ†é¡µæŸ¥è¯¢æ…¢ï¼Œç‰¹åˆ«æ˜¯ç¿»åˆ°åé¢çš„é¡µ
```sql
-- æ…¢æŸ¥è¯¢ç¤ºä¾‹ï¼ˆæ‰«æ100ä¸‡æ¡æ•°æ®æ‰å–10æ¡ï¼‰
SELECT * FROM user LIMIT 1000000, 10;
```

**ä¼˜åŒ–æ–¹æ¡ˆï¼šä½¿ç”¨å­æŸ¥è¯¢**
```xml
<!-- ä¼˜åŒ–å‰ï¼šç›´æ¥åˆ†é¡µ -->
<select id="selectPage" resultType="User">
    SELECT * FROM user ORDER BY id LIMIT #{offset}, #{size}
</select>

<!-- ä¼˜åŒ–åï¼šå…ˆå®šä½IDï¼Œå†æŸ¥è¯¢æ•°æ® -->
<select id="selectPageOptimized" resultType="User">
    SELECT u.* FROM user u
    INNER JOIN (
        SELECT id FROM user ORDER BY id LIMIT #{offset}, #{size}
    ) t ON u.id = t.id
</select>
```

### 6.3 é¿å…æ·±åº¦åˆ†é¡µ


**é—®é¢˜è¯´æ˜**ï¼š
```
åœºæ™¯ï¼šæ€»å…±100ä¸‡æ¡æ•°æ®ï¼Œç”¨æˆ·è¦çœ‹ç¬¬10000é¡µï¼ˆæ¯é¡µ10æ¡ï¼‰

LIMIT 99990, 10 çš„é—®é¢˜ï¼š
  âŒ MySQLéœ€è¦æ‰«æå‰99990æ¡æ•°æ®
  âŒ ç„¶åä¸¢å¼ƒè¿™äº›æ•°æ®
  âŒ åªè¿”å›æœ€å10æ¡
  âŒ æ€§èƒ½æå·®ï¼Œæ•°æ®åº“å‹åŠ›å¤§
```

**è§£å†³æ–¹æ¡ˆä¸€ï¼šé™åˆ¶æœ€å¤§é¡µç **
```java
public PageInfo<User> getUserPage(Integer pageNum, Integer pageSize) {
    // é™åˆ¶æœ€å¤§é¡µç ä¸º100
    if (pageNum > 100) {
        throw new BusinessException("é¡µç ä¸èƒ½è¶…è¿‡100");
    }
    
    PageHelper.startPage(pageNum, pageSize);
    List<User> list = userMapper.selectAll();
    return new PageInfo<>(list);
}
```

**è§£å†³æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ¸¸æ ‡åˆ†é¡µ**
```java
// è®°å½•ä¸Šä¸€é¡µçš„æœ€å¤§ID
public PageInfo<User> getUserPageByCursor(Long lastId, Integer pageSize) {
    PageHelper.startPage(1, pageSize, false);
    List<User> list = userMapper.selectByIdGt(lastId);
    return new PageInfo<>(list);
}
```

```xml
<select id="selectByIdGt" resultType="User">
    SELECT * FROM user
    WHERE id > #{lastId}
    ORDER BY id
    LIMIT #{pageSize}
</select>
```

---

## 7. ğŸ”„ ç‰©ç†åˆ†é¡µä¸é€»è¾‘åˆ†é¡µ


### 7.1 æ¦‚å¿µå¯¹æ¯”


**ç‰©ç†åˆ†é¡µ**ï¼ˆæ•°æ®åº“åˆ†é¡µï¼‰ï¼š
```
å·¥ä½œåŸç†ï¼š
  ç¬¬1æ­¥ï¼šåœ¨SQLä¸­æ·»åŠ LIMITè¯­å¥
  ç¬¬2æ­¥ï¼šæ•°æ®åº“åªè¿”å›æŒ‡å®šèŒƒå›´çš„æ•°æ®
  ç¬¬3æ­¥ï¼šåº”ç”¨å±‚ç›´æ¥ä½¿ç”¨æ•°æ®

ç¤ºä¾‹SQLï¼š
  SELECT * FROM user LIMIT 10, 10;  -- åªæŸ¥ç¬¬11-20æ¡

ä¼˜ç‚¹ï¼š
  âœ… æŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œåªè¿”å›éœ€è¦çš„æ•°æ®
  âœ… å†…å­˜å ç”¨å°ï¼Œä¸åŠ è½½å…¨éƒ¨æ•°æ®
  âœ… é€‚åˆå¤§æ•°æ®é‡æŸ¥è¯¢

ç¼ºç‚¹ï¼š
  âŒ æ¯æ¬¡ç¿»é¡µéƒ½è¦æŸ¥æ•°æ®åº“
  âŒ å®æ—¶æ€§é«˜ï¼Œä½†æ•°æ®åº“å‹åŠ›å¤§
```

**é€»è¾‘åˆ†é¡µ**ï¼ˆå†…å­˜åˆ†é¡µï¼‰ï¼š
```
å·¥ä½œåŸç†ï¼š
  ç¬¬1æ­¥ï¼šä¸€æ¬¡æ€§æŸ¥è¯¢æ‰€æœ‰æ•°æ®
  ç¬¬2æ­¥ï¼šåŠ è½½åˆ°å†…å­˜ä¸­
  ç¬¬3æ­¥ï¼šåœ¨å†…å­˜ä¸­æˆªå–éœ€è¦çš„éƒ¨åˆ†

ç¤ºä¾‹ä»£ç ï¼š
  List<User> allUsers = userMapper.selectAll();  // æŸ¥å…¨éƒ¨
  List<User> pageData = allUsers.subList(10, 20); // å†…å­˜æˆªå–

ä¼˜ç‚¹ï¼š
  âœ… ä¸éœ€è¦é¢‘ç¹è®¿é—®æ•°æ®åº“
  âœ… æ•°æ®ä¸€è‡´æ€§å¥½
  âœ… é€‚åˆå°æ•°æ®é‡åœºæ™¯

ç¼ºç‚¹ï¼š
  âŒ å†…å­˜å ç”¨å¤§ï¼Œå¯èƒ½OOM
  âŒ é¦–æ¬¡åŠ è½½æ…¢
  âŒ ä¸é€‚åˆå¤§æ•°æ®é‡
```

### 7.2 PageHelperå®ç°æ–¹å¼


**PageHelperé»˜è®¤æ˜¯ç‰©ç†åˆ†é¡µ**ï¼š
```java
// ç‰©ç†åˆ†é¡µï¼ˆæ¨èï¼‰
PageHelper.startPage(1, 10);
List<User> list = userMapper.selectAll();
// ç”Ÿæˆçš„SQLï¼šSELECT * FROM user LIMIT 0, 10

// å¯ä»¥é€šè¿‡é…ç½®éªŒè¯
pagehelper.helper-dialect=mysql  // ä½¿ç”¨MySQLçš„LIMITè¯­æ³•
```

**æ‰‹åŠ¨å®ç°é€»è¾‘åˆ†é¡µ**ï¼š
```java
public PageInfo<User> getUserPageByMemory(Integer pageNum, Integer pageSize) {
    // æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼ˆä¸åˆ†é¡µï¼‰
    List<User> allUsers = userMapper.selectAll();
    
    // è®¡ç®—åˆ†é¡µèŒƒå›´
    int start = (pageNum - 1) * pageSize;
    int end = Math.min(start + pageSize, allUsers.size());
    
    // å†…å­˜æˆªå–
    List<User> pageData = allUsers.subList(start, end);
    
    // å°è£…PageInfo
    PageInfo<User> pageInfo = new PageInfo<>(pageData);
    pageInfo.setTotal(allUsers.size());
    pageInfo.setPages((int) Math.ceil(allUsers.size() * 1.0 / pageSize));
    
    return pageInfo;
}
```

### 7.3 é€‰æ‹©å»ºè®®


**ä»€ä¹ˆæ—¶å€™ç”¨ç‰©ç†åˆ†é¡µ**ï¼š
- âœ… æ•°æ®é‡å¤§ï¼ˆè¶…è¿‡1000æ¡ï¼‰
- âœ… æ•°æ®å®æ—¶æ€§è¦æ±‚é«˜
- âœ… å†…å­˜èµ„æºæœ‰é™
- âœ… å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼ˆæ¨èï¼‰

**ä»€ä¹ˆæ—¶å€™ç”¨é€»è¾‘åˆ†é¡µ**ï¼š
- âœ… æ•°æ®é‡å¾ˆå°ï¼ˆå‡ ç™¾æ¡ä»¥å†…ï¼‰
- âœ… æ•°æ®å˜åŒ–ä¸é¢‘ç¹
- âœ… éœ€è¦å®¢æˆ·ç«¯ç¼“å­˜
- âœ… ç‰¹å®šä¸šåŠ¡éœ€æ±‚ï¼ˆå¦‚å¯¼å‡ºå‰é¢„è§ˆï¼‰

---

## 8. ğŸŒ å‰ç«¯åˆ†é¡µç»„ä»¶å¯¹æ¥


### 8.1 Element UIåˆ†é¡µç»„ä»¶


**åç«¯è¿”å›æ ¼å¼**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 100,
    "pageNum": 1,
    "pageSize": 10,
    "pages": 10,
    "list": [
      {"id": 1, "username": "å¼ ä¸‰"},
      {"id": 2, "username": "æå››"}
    ]
  }
}
```

**å‰ç«¯Vueä»£ç **ï¼š
```vue
<template>
  <div>
    <!-- æ•°æ®è¡¨æ ¼ -->
    <el-table :data="tableData" border>
      <el-table-column prop="id" label="ID"></el-table-column>
      <el-table-column prop="username" label="ç”¨æˆ·å"></el-table-column>
    </el-table>
    
    <!-- åˆ†é¡µç»„ä»¶ -->
    <el-pagination
      @size-change="handleSizeChange"
      @current-change="handlePageChange"
      :current-page="pageNum"
      :page-sizes="[10, 20, 50, 100]"
      :page-size="pageSize"
      :total="total"
      layout="total, sizes, prev, pager, next, jumper">
    </el-pagination>
  </div>
</template>

<script>
export default {
  data() {
    return {
      tableData: [],
      pageNum: 1,
      pageSize: 10,
      total: 0
    }
  },
  mounted() {
    this.loadData();
  },
  methods: {
    // åŠ è½½æ•°æ®
    loadData() {
      this.$axios.get('/api/user/page', {
        params: {
          pageNum: this.pageNum,
          pageSize: this.pageSize
        }
      }).then(res => {
        this.tableData = res.data.list;
        this.total = res.data.total;
      });
    },
    // æ¯é¡µæ¡æ•°æ”¹å˜
    handleSizeChange(newSize) {
      this.pageSize = newSize;
      this.pageNum = 1;  // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
      this.loadData();
    },
    // é¡µç æ”¹å˜
    handlePageChange(newPage) {
      this.pageNum = newPage;
      this.loadData();
    }
  }
}
</script>
```

### 8.2 å‚æ•°ä¼ é€’å¯¹åº”å…³ç³»


**å‰åç«¯å­—æ®µæ˜ å°„**ï¼š
```
å‰ç«¯ â†’ åç«¯è¯·æ±‚å‚æ•°ï¼š
  current â†’ pageNum    // å½“å‰é¡µç 
  size â†’ pageSize      // æ¯é¡µæ¡æ•°
  keyword â†’ keyword    // æŸ¥è¯¢å…³é”®è¯ï¼ˆå¯é€‰ï¼‰

åç«¯ â†’ å‰ç«¯å“åº”æ•°æ®ï¼š
  pageInfo.total â†’ total        // æ€»è®°å½•æ•°
  pageInfo.pageNum â†’ current    // å½“å‰é¡µç 
  pageInfo.pageSize â†’ size      // æ¯é¡µæ¡æ•°
  pageInfo.pages â†’ pages        // æ€»é¡µæ•°
  pageInfo.list â†’ records       // æ•°æ®åˆ—è¡¨
```

### 8.3 å¸¸è§å‰ç«¯éœ€æ±‚å¤„ç†


**éœ€æ±‚1ï¼šè®°ä½ç”¨æˆ·é€‰æ‹©çš„æ¯é¡µæ¡æ•°**
```java
@GetMapping("/page")
public Result getUserPage(
        @RequestParam(defaultValue = "1") Integer pageNum,
        @RequestParam(defaultValue = "10") Integer pageSize,
        HttpSession session) {
    
    // ä¿å­˜ç”¨æˆ·é€‰æ‹©çš„pageSizeåˆ°session
    session.setAttribute("userPageSize", pageSize);
    
    PageInfo<User> pageInfo = userService.getUserPage(pageNum, pageSize);
    return Result.success(pageInfo);
}
```

**éœ€æ±‚2ï¼šå¯¼å‡ºå½“å‰é¡µæ•°æ®**
```java
@GetMapping("/export")
public void exportCurrentPage(
        @RequestParam Integer pageNum,
        @RequestParam Integer pageSize,
        HttpServletResponse response) throws IOException {
    
    // æŸ¥è¯¢å½“å‰é¡µæ•°æ®
    PageHelper.startPage(pageNum, pageSize);
    List<User> list = userMapper.selectAll();
    
    // å¯¼å‡ºExcel
    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition", "attachment;filename=users.xlsx");
    
    EasyExcel.write(response.getOutputStream(), User.class)
            .sheet("ç”¨æˆ·æ•°æ®")
            .doWrite(list);
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åˆ†é¡µæœ¬è´¨ï¼šå°†å¤§é‡æ•°æ®åˆ†æ‰¹æŸ¥è¯¢ï¼ŒæŒ‰éœ€åŠ è½½
ğŸ”¸ PageHelperåŸç†ï¼šæ‹¦æˆªSQLï¼Œè‡ªåŠ¨æ·»åŠ åˆ†é¡µè¯­å¥ï¼ˆå¦‚LIMITï¼‰
ğŸ”¸ æ ¸å¿ƒæ–¹æ³•ï¼šPageHelper.startPage(pageNum, pageSize)
ğŸ”¸ å°è£…å¯¹è±¡ï¼šPageInfoåŒ…å«åˆ†é¡µæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯
ğŸ”¸ ç‰©ç†åˆ†é¡µï¼šæ•°æ®åº“å±‚é¢åˆ†é¡µï¼Œæ€§èƒ½å¥½ï¼ˆæ¨èï¼‰
ğŸ”¸ é€»è¾‘åˆ†é¡µï¼šå†…å­˜å±‚é¢åˆ†é¡µï¼Œé€‚åˆå°æ•°æ®é‡
```

### 9.2 å…³é”®ä½¿ç”¨æ­¥éª¤


**æ ‡å‡†ä¸‰æ­¥èµ°**ï¼š
```java
// ç¬¬1æ­¥ï¼šè®¾ç½®åˆ†é¡µå‚æ•°
PageHelper.startPage(pageNum, pageSize);

// ç¬¬2æ­¥ï¼šæ‰§è¡ŒæŸ¥è¯¢ï¼ˆè¿™æ¡SQLä¼šè¢«æ‹¦æˆªï¼Œè‡ªåŠ¨åŠ åˆ†é¡µï¼‰
List<User> list = userMapper.selectAll();

// ç¬¬3æ­¥ï¼šå°è£…åˆ†é¡µä¿¡æ¯
PageInfo<User> pageInfo = new PageInfo<>(list);
```

### 9.3 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


> âš ï¸ **é—®é¢˜1ï¼šåˆ†é¡µä¸ç”Ÿæ•ˆ**
> 
> åŸå› ï¼šstartPage()å’ŒæŸ¥è¯¢è¯­å¥ä¹‹é—´æœ‰å…¶ä»–æŸ¥è¯¢
> 
> è§£å†³ï¼šç¡®ä¿startPage()ç´§é‚»æŸ¥è¯¢è¯­å¥

> âš ï¸ **é—®é¢˜2ï¼šæ€»æ•°ä¸å‡†ç¡®**
> 
> åŸå› ï¼šæŸ¥è¯¢æ¡ä»¶å˜åŒ–ï¼Œä½†countæŸ¥è¯¢æ²¡æ›´æ–°
> 
> è§£å†³ï¼šç¡®ä¿æŸ¥è¯¢æ¡ä»¶ä¸€è‡´ï¼Œæˆ–æ‰‹åŠ¨è®¾ç½®count

> âš ï¸ **é—®é¢˜3ï¼šæ·±åº¦åˆ†é¡µæ€§èƒ½å·®**
> 
> åŸå› ï¼šLIMIT offsetå¾ˆå¤§æ—¶ï¼ŒMySQLéœ€è¦æ‰«æå¤§é‡æ•°æ®
> 
> è§£å†³ï¼šé™åˆ¶æœ€å¤§é¡µç ï¼Œæˆ–ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µ

### 9.4 æœ€ä½³å®è·µå»ºè®®


**é…ç½®è§„èŒƒ**ï¼š
- âœ… å¼€å¯`reasonable=true`ï¼Œé˜²æ­¢é¡µç è¶Šç•Œ
- âœ… è®¾ç½®åˆé€‚çš„é»˜è®¤pageSizeï¼ˆé€šå¸¸10-20æ¡ï¼‰
- âœ… é™åˆ¶æœ€å¤§pageSizeï¼Œé¿å…ä¸€æ¬¡æŸ¥è¯¢è¿‡å¤šæ•°æ®

**ä»£ç è§„èŒƒ**ï¼š
- âœ… ä½¿ç”¨PageInfoç»Ÿä¸€å°è£…è¿”å›ç»“æœ
- âœ… Controllerå±‚å‚æ•°æ ¡éªŒï¼ˆé¡µç ã€æ¡æ•°èŒƒå›´ï¼‰
- âœ… Serviceå±‚å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è½¬æ¢
- âœ… å‰åç«¯å­—æ®µå‘½åä¿æŒä¸€è‡´

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- âœ… å¤§æ•°æ®é‡åœºæ™¯ç¦ç”¨countæŸ¥è¯¢
- âœ… æ·±åº¦åˆ†é¡µä½¿ç”¨å­æŸ¥è¯¢ä¼˜åŒ–
- âœ… åˆç†ä½¿ç”¨ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦
- âœ… è€ƒè™‘ä½¿ç”¨ç¼“å­˜å‡è½»æ•°æ®åº“å‹åŠ›

### 9.5 å­¦ä¹ æ£€æŸ¥æ¸…å•


**åŸºç¡€æŒæ¡**ï¼ˆå¿…ä¼šï¼‰ï¼š
- [ ] ç†è§£åˆ†é¡µçš„ä½œç”¨å’Œæ„ä¹‰
- [ ] ä¼šé…ç½®PageHelperæ’ä»¶
- [ ] æŒæ¡PageHelper.startPage()çš„ä½¿ç”¨
- [ ] äº†è§£PageInfoå¯¹è±¡çš„å­—æ®µå«ä¹‰
- [ ] èƒ½å®ç°åŸºæœ¬çš„åˆ†é¡µæŸ¥è¯¢æ¥å£

**è¿›é˜¶ç†è§£**ï¼ˆé‡è¦ï¼‰ï¼š
- [ ] ç†è§£ç‰©ç†åˆ†é¡µå’Œé€»è¾‘åˆ†é¡µçš„åŒºåˆ«
- [ ] æŒæ¡å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢
- [ ] ä¼šå¤„ç†å‰ç«¯åˆ†é¡µç»„ä»¶å¯¹æ¥
- [ ] äº†è§£åˆ†é¡µSQLä¼˜åŒ–æ–¹æ³•
- [ ] èƒ½è§£å†³å¸¸è§çš„åˆ†é¡µé—®é¢˜

**å®æˆ˜åº”ç”¨**ï¼ˆåŠ åˆ†ï¼‰ï¼š
- [ ] å®ç°å¤æ‚çš„å¤šæ¡ä»¶åˆ†é¡µæŸ¥è¯¢
- [ ] å¤„ç†åˆ†é¡µæ•°æ®çš„VOè½¬æ¢
- [ ] ä¼˜åŒ–æ·±åº¦åˆ†é¡µçš„æ€§èƒ½é—®é¢˜
- [ ] é›†æˆå‰ç«¯åˆ†é¡µç»„ä»¶å®Œæ•´å®ç°

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
åˆ†é¡µä¸‰æ­¥è¦è®°ç‰¢ï¼šè®¾å‚æ•°ã€æ‰§æŸ¥è¯¢ã€å°ç»“æœ
PageHelperå¾ˆæ™ºèƒ½ï¼šè‡ªåŠ¨æ‹¦æˆªåŠ LIMIT  
ç‰©ç†åˆ†é¡µæ˜¯é¦–é€‰ï¼šæ•°æ®åº“é‡Œåšç­›é€‰
æ·±åº¦åˆ†é¡µè¦å°å¿ƒï¼šç´¢å¼•ä¼˜åŒ–æ˜¯å…³é”®
```