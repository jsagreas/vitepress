---
title: 4ã€CRUDæ•°æ®æ“ä½œå®ç°
---
## ğŸ“š ç›®å½•

1. [åŸºç¡€å¢åˆ æ”¹æŸ¥](#1-åŸºç¡€å¢åˆ æ”¹æŸ¥)
2. [æ¡ä»¶æŸ¥è¯¢å®ç°](#2-æ¡ä»¶æŸ¥è¯¢å®ç°)
3. [åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½](#3-åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½)
4. [æ’åºåŠŸèƒ½å®ç°](#4-æ’åºåŠŸèƒ½å®ç°)
5. [æ‰¹é‡æ“ä½œåŠŸèƒ½](#5-æ‰¹é‡æ“ä½œåŠŸèƒ½)
6. [æ•°æ®å¯¼å…¥å¯¼å‡º](#6-æ•°æ®å¯¼å…¥å¯¼å‡º)
7. [æ•°æ®ç»Ÿè®¡åˆ†æ](#7-æ•°æ®ç»Ÿè®¡åˆ†æ)
8. [æ•°æ®å¤‡ä»½æ¢å¤](#8-æ•°æ®å¤‡ä»½æ¢å¤)
9. [æ•°æ®åŒæ­¥æœºåˆ¶](#9-æ•°æ®åŒæ­¥æœºåˆ¶)
10. [æ•°æ®ä¸€è‡´æ€§ä¿è¯](#10-æ•°æ®ä¸€è‡´æ€§ä¿è¯)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“ åŸºç¡€å¢åˆ æ”¹æŸ¥


### 1.1 ä»€ä¹ˆæ˜¯CRUD


**é€šä¿—ç†è§£**ï¼šCRUDå°±åƒç®¡ç†ä¸€ä¸ªé€šè®¯å½•
- **C**reateï¼ˆå¢ï¼‰ï¼šæ·»åŠ æ–°è”ç³»äºº
- **R**eadï¼ˆæŸ¥ï¼‰ï¼šæŸ¥çœ‹è”ç³»äººä¿¡æ¯
- **U**pdateï¼ˆæ”¹ï¼‰ï¼šä¿®æ”¹è”ç³»äººèµ„æ–™
- **D**eleteï¼ˆåˆ ï¼‰ï¼šåˆ é™¤ä¸éœ€è¦çš„è”ç³»äºº

```
ç”Ÿæ´»åœºæ™¯ç±»æ¯”ï¼š
é€šè®¯å½•ç®¡ç† â†’ æ•°æ®åº“æ“ä½œ
æ·»åŠ è”ç³»äºº â†’ INSERT æ’å…¥æ•°æ®
æŸ¥çœ‹è”ç³»äºº â†’ SELECT æŸ¥è¯¢æ•°æ®
ä¿®æ”¹èµ„æ–™   â†’ UPDATE æ›´æ–°æ•°æ®
åˆ é™¤è”ç³»äºº â†’ DELETE åˆ é™¤æ•°æ®
```

### 1.2 å¢åŠ æ•°æ®ï¼ˆCreateï¼‰


**æ ¸å¿ƒæ€è·¯**ï¼šæŠŠæ–°æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“

**Mapperæ¥å£å®šä¹‰**
```java
public interface UserMapper {
    // å•æ¡æ’å…¥
    int insert(User user);
}
```

**XMLæ˜ å°„é…ç½®**
```xml
<insert id="insert" parameterType="User">
    INSERT INTO user(username, password, email, age)
    VALUES(#{username}, #{password}, #{email}, #{age})
</insert>
```

**Serviceå±‚å¤„ç†**
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    public boolean addUser(User user) {
        int rows = userMapper.insert(user);
        return rows > 0; // è¿”å›æ˜¯å¦æˆåŠŸ
    }
}
```

**Controlleræ¥å£**
```java
@PostMapping("/add")
public Result addUser(@RequestBody User user) {
    boolean success = userService.addUser(user);
    return success ? Result.success("æ·»åŠ æˆåŠŸ") 
                   : Result.error("æ·»åŠ å¤±è´¥");
}
```

â”Œâ”€ æ“ä½œæµç¨‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯æäº¤ â†’ Controlleræ¥æ”¶    â”‚
â”‚    â†“                         â”‚
â”‚ Serviceå¤„ç† â†’ Mapperæ‰§è¡ŒSQL  â”‚
â”‚    â†“                         â”‚
â”‚ è¿”å›ç»“æœ â†’ å‰ç«¯å±•ç¤º          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### 1.3 æŸ¥è¯¢æ•°æ®ï¼ˆReadï¼‰


**æ ¹æ®IDæŸ¥è¯¢**
```java
// Mapperæ¥å£
User selectById(Long id);

// XMLé…ç½®
<select id="selectById" resultType="User">
    SELECT * FROM user WHERE id = #{id}
</select>
```

**æŸ¥è¯¢æ‰€æœ‰æ•°æ®**
```java
// Mapperæ¥å£
List<User> selectAll();

// XMLé…ç½®
<select id="selectAll" resultType="User">
    SELECT * FROM user
</select>
```

ğŸ¯ **æŸ¥è¯¢æŠ€å·§**
- å•æ¡æŸ¥è¯¢ï¼šè¿”å›å¯¹è±¡ `User`
- å¤šæ¡æŸ¥è¯¢ï¼šè¿”å›åˆ—è¡¨ `List<User>`
- æ— ç»“æœï¼šè¿”å› `null` æˆ–ç©ºåˆ—è¡¨

### 1.4 ä¿®æ”¹æ•°æ®ï¼ˆUpdateï¼‰


**æ›´æ–°ç”¨æˆ·ä¿¡æ¯**
```java
// Mapperæ¥å£
int update(User user);

// XMLé…ç½®
<update id="update" parameterType="User">
    UPDATE user 
    SET username = #{username},
        email = #{email},
        age = #{age}
    WHERE id = #{id}
</update>
```

**Serviceå±‚ç¤ºä¾‹**
```java
public boolean updateUser(User user) {
    // å…ˆæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨
    User existUser = userMapper.selectById(user.getId());
    if (existUser == null) {
        throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
    }
    
    int rows = userMapper.update(user);
    return rows > 0;
}
```

âš ï¸ **æ³¨æ„äº‹é¡¹**
- ä¿®æ”¹å‰è¦å…ˆæ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨
- WHEREæ¡ä»¶å¿…é¡»æœ‰ï¼Œé˜²æ­¢è¯¯æ”¹å…¨è¡¨
- è¿”å›å€¼æ˜¯å—å½±å“çš„è¡Œæ•°

### 1.5 åˆ é™¤æ•°æ®ï¼ˆDeleteï¼‰


**ç‰©ç†åˆ é™¤**ï¼ˆçœŸæ­£åˆ é™¤æ•°æ®ï¼‰
```java
// Mapperæ¥å£
int deleteById(Long id);

// XMLé…ç½®
<delete id="deleteById">
    DELETE FROM user WHERE id = #{id}
</delete>
```

**é€»è¾‘åˆ é™¤**ï¼ˆæ ‡è®°ä¸ºåˆ é™¤ï¼Œä¸çœŸåˆ ï¼‰
```java
// æ›´æ¨èçš„æ–¹å¼
<update id="logicDelete">
    UPDATE user SET deleted = 1 WHERE id = #{id}
</update>
```

â”Œâ”€ åˆ é™¤æ–¹å¼å¯¹æ¯” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰©ç†åˆ é™¤ï¼šæ•°æ®çœŸæ­£åˆ é™¤       â”‚
â”‚ â€¢ ä¼˜ç‚¹ï¼šé‡Šæ”¾å­˜å‚¨ç©ºé—´         â”‚
â”‚ â€¢ ç¼ºç‚¹ï¼šæ— æ³•æ¢å¤             â”‚
â”‚                              â”‚
â”‚ é€»è¾‘åˆ é™¤ï¼šåªæ ‡è®°åˆ é™¤çŠ¶æ€     â”‚
â”‚ â€¢ ä¼˜ç‚¹ï¼šå¯ä»¥æ¢å¤ï¼Œæœ‰è®°å½•     â”‚
â”‚ â€¢ ç¼ºç‚¹ï¼šå ç”¨å­˜å‚¨ç©ºé—´         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

## 2. ğŸ” æ¡ä»¶æŸ¥è¯¢å®ç°


### 2.1 ä¸ºä»€ä¹ˆéœ€è¦æ¡ä»¶æŸ¥è¯¢


**å®é™…åœºæ™¯**ï¼š
- æœç´¢æ¡†è¾“å…¥"å¼ "ï¼ŒæŸ¥æ‰¾å§“å¼ çš„ç”¨æˆ·
- ç­›é€‰18-25å²çš„ç”¨æˆ·
- æŸ¥è¯¢æœ€è¿‘ä¸€å‘¨æ³¨å†Œçš„ç”¨æˆ·

å°±åƒåœ¨æ·˜å®æœç´¢å•†å“ï¼Œå¯ä»¥æŒ‰ä»·æ ¼ã€é”€é‡ã€è¯„åˆ†ç­‰æ¡ä»¶ç­›é€‰ã€‚

### 2.2 å•æ¡ä»¶æŸ¥è¯¢


**æŒ‰ç”¨æˆ·åæŸ¥è¯¢**
```java
// Mapperæ¥å£
List<User> selectByUsername(String username);

// XMLé…ç½® - ç²¾ç¡®åŒ¹é…
<select id="selectByUsername" resultType="User">
    SELECT * FROM user 
    WHERE username = #{username}
</select>

// æ¨¡ç³ŠæŸ¥è¯¢
<select id="selectByUsernameLike" resultType="User">
    SELECT * FROM user 
    WHERE username LIKE CONCAT('%', #{username}, '%')
</select>
```

ğŸ’¡ **æ¨¡ç³ŠæŸ¥è¯¢æŠ€å·§**
- `%å¼ %`ï¼šåŒ…å«"å¼ "çš„æ‰€æœ‰ç”¨æˆ·
- `å¼ %`ï¼šä»¥"å¼ "å¼€å¤´
- `%å¼ `ï¼šä»¥"å¼ "ç»“å°¾

### 2.3 å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢


**æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯¹è±¡å°è£…**
```java
public class UserQuery {
    private String username;  // ç”¨æˆ·å
    private Integer minAge;   // æœ€å°å¹´é¾„
    private Integer maxAge;   // æœ€å¤§å¹´é¾„
    private String email;     // é‚®ç®±
    // getter/setter...
}
```

```xml
<select id="selectByCondition" resultType="User">
    SELECT * FROM user
    WHERE 1=1
    <if test="username != null and username != ''">
        AND username LIKE CONCAT('%', #{username}, '%')
    </if>
    <if test="minAge != null">
        AND age >= #{minAge}
    </if>
    <if test="maxAge != null">
        AND age &lt;= #{maxAge}
    </if>
    <if test="email != null and email != ''">
        AND email = #{email}
    </if>
</select>
```

**æ–¹å¼äºŒï¼šä½¿ç”¨Mapä¼ å‚**
```java
List<User> selectByMap(Map<String, Object> params);
```

```java
// ä½¿ç”¨ç¤ºä¾‹
Map<String, Object> params = new HashMap<>();
params.put("username", "å¼ ä¸‰");
params.put("minAge", 18);
params.put("maxAge", 30);
List<User> users = userMapper.selectByMap(params);
```

### 2.4 åŠ¨æ€SQLè¯¦è§£


**`<if>` æ ‡ç­¾**ï¼šæ¡ä»¶åˆ¤æ–­
```xml
<if test="æ¡ä»¶è¡¨è¾¾å¼">
    SQLç‰‡æ®µ
</if>
```

**`<where>` æ ‡ç­¾**ï¼šæ™ºèƒ½å¤„ç†WHEREå’ŒAND
```xml
<select id="selectByCondition" resultType="User">
    SELECT * FROM user
    <where>
        <if test="username != null">
            AND username = #{username}
        </if>
        <if test="age != null">
            AND age = #{age}
        </if>
    </where>
</select>
```

ğŸ¯ **`<where>`çš„ä½œç”¨**
- è‡ªåŠ¨æ·»åŠ WHEREå…³é”®å­—
- å»æ‰ç¬¬ä¸€ä¸ªANDæˆ–OR
- å¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œä¸ç”ŸæˆWHERE

**`<choose>` æ ‡ç­¾**ï¼šå¤šé€‰ä¸€
```xml
<select id="selectByPriority" resultType="User">
    SELECT * FROM user
    <where>
        <choose>
            <when test="id != null">
                id = #{id}
            </when>
            <when test="username != null">
                username = #{username}
            </when>
            <otherwise>
                email = #{email}
            </otherwise>
        </choose>
    </where>
</select>
```

---

## 3. ğŸ“„ åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½


### 3.1 ä¸ºä»€ä¹ˆè¦åˆ†é¡µ


**ç°å®é—®é¢˜**ï¼š
- æ·˜å®æœ‰å‡ ç™¾ä¸‡å•†å“ï¼Œä¸èƒ½ä¸€æ¬¡å…¨æ˜¾ç¤º
- å¾®åšæœ‰æµ·é‡ä¿¡æ¯ï¼Œä¸€é¡µåªæ˜¾ç¤º20æ¡
- æ•°æ®åº“ä¸€æ¬¡æŸ¥è¯¢å¤ªå¤šä¼šå¾ˆæ…¢

**åˆ†é¡µæ•ˆæœ**ï¼š
```
ç¬¬1é¡µ: 1-10æ¡æ•°æ®
ç¬¬2é¡µ: 11-20æ¡æ•°æ®  
ç¬¬3é¡µ: 21-30æ¡æ•°æ®
...
```

### 3.2 åˆ†é¡µæ ¸å¿ƒå‚æ•°


```java
public class PageParams {
    private Integer pageNum;  // å½“å‰é¡µç ï¼ˆç¬¬å‡ é¡µï¼‰
    private Integer pageSize; // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
    
    // è®¡ç®—èµ·å§‹ä½ç½®
    public Integer getOffset() {
        return (pageNum - 1) * pageSize;
    }
}
```

**è®¡ç®—é€»è¾‘**ï¼š
```
ç¬¬1é¡µï¼šLIMIT 0, 10   â†’ 0 = (1-1) Ã— 10
ç¬¬2é¡µï¼šLIMIT 10, 10  â†’ 10 = (2-1) Ã— 10
ç¬¬3é¡µï¼šLIMIT 20, 10  â†’ 20 = (3-1) Ã— 10
```

### 3.3 æ‰‹åŠ¨åˆ†é¡µå®ç°


**Mapperæ¥å£**
```java
// æŸ¥è¯¢åˆ†é¡µæ•°æ®
List<User> selectByPage(@Param("offset") Integer offset, 
                        @Param("pageSize") Integer pageSize);

// æŸ¥è¯¢æ€»è®°å½•æ•°
Integer selectCount();
```

**XMLé…ç½®**
```xml
<select id="selectByPage" resultType="User">
    SELECT * FROM user 
    LIMIT #{offset}, #{pageSize}
</select>

<select id="selectCount" resultType="Integer">
    SELECT COUNT(*) FROM user
</select>
```

**Serviceå°è£…**
```java
public PageResult<User> getUserPage(Integer pageNum, Integer pageSize) {
    // 1. è®¡ç®—èµ·å§‹ä½ç½®
    Integer offset = (pageNum - 1) * pageSize;
    
    // 2. æŸ¥è¯¢å½“å‰é¡µæ•°æ®
    List<User> list = userMapper.selectByPage(offset, pageSize);
    
    // 3. æŸ¥è¯¢æ€»è®°å½•æ•°
    Integer total = userMapper.selectCount();
    
    // 4. å°è£…ç»“æœ
    return new PageResult<>(list, total, pageNum, pageSize);
}
```

### 3.4 PageHelperæ’ä»¶ï¼ˆæ¨èï¼‰


**å¼•å…¥ä¾èµ–**
```xml
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper-spring-boot-starter</artifactId>
    <version>1.4.6</version>
</dependency>
```

**ä½¿ç”¨æ–¹å¼**
```java
public PageInfo<User> getUserPage(Integer pageNum, Integer pageSize) {
    // 1. å¼€å¯åˆ†é¡µï¼ˆè‡ªåŠ¨æ‹¦æˆªä¸‹ä¸€æ¡SQLï¼‰
    PageHelper.startPage(pageNum, pageSize);
    
    // 2. æ­£å¸¸æŸ¥è¯¢ï¼ˆä¼šè‡ªåŠ¨åŠ ä¸ŠLIMITï¼‰
    List<User> list = userMapper.selectAll();
    
    // 3. å°è£…ç»“æœï¼ˆè‡ªåŠ¨è®¡ç®—æ€»æ•°ã€æ€»é¡µæ•°ç­‰ï¼‰
    return new PageInfo<>(list);
}
```

â”Œâ”€ PageHelperå·¥ä½œåŸç† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. PageHelper.startPage()    â”‚
â”‚    â†’ è®¾ç½®åˆ†é¡µå‚æ•°åˆ°ThreadLocalâ”‚
â”‚                               â”‚
â”‚ 2. æ‰§è¡ŒæŸ¥è¯¢SQL                â”‚
â”‚    â†’ æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ LIMIT      â”‚
â”‚                               â”‚
â”‚ 3. new PageInfo()             â”‚
â”‚    â†’ è‡ªåŠ¨æŸ¥è¯¢æ€»æ•°å¹¶å°è£…       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**PageInfoåŒ…å«çš„ä¿¡æ¯**
```java
PageInfo<User> pageInfo = ...;
pageInfo.getList();        // å½“å‰é¡µæ•°æ®
pageInfo.getTotal();       // æ€»è®°å½•æ•°
pageInfo.getPages();       // æ€»é¡µæ•°
pageInfo.getPageNum();     // å½“å‰é¡µç 
pageInfo.getPageSize();    // æ¯é¡µæ¡æ•°
pageInfo.isHasPreviousPage(); // æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
pageInfo.isHasNextPage();     // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
```

---

## 4. â¬†ï¸â¬‡ï¸ æ’åºåŠŸèƒ½å®ç°


### 4.1 æ’åºçš„ä½œç”¨


**ç”Ÿæ´»åœºæ™¯**ï¼š
- ç”µå•†ï¼šæŒ‰ä»·æ ¼ä»ä½åˆ°é«˜ã€é”€é‡ä»é«˜åˆ°ä½
- æˆç»©å•ï¼šæŒ‰åˆ†æ•°é™åºæ’åˆ—
- æ–‡ç« åˆ—è¡¨ï¼šæŒ‰å‘å¸ƒæ—¶é—´å€’åº

### 4.2 å•å­—æ®µæ’åº


**å‡åºæ’åºï¼ˆASCï¼‰**
```xml
<select id="selectOrderByAge" resultType="User">
    SELECT * FROM user 
    ORDER BY age ASC
</select>
```

**é™åºæ’åºï¼ˆDESCï¼‰**
```xml
<select id="selectOrderByCreateTime" resultType="User">
    SELECT * FROM user 
    ORDER BY create_time DESC
</select>
```

### 4.3 å¤šå­—æ®µæ’åº


```xml
<select id="selectOrderBy" resultType="User">
    SELECT * FROM user 
    ORDER BY age DESC, create_time DESC
</select>
```

**æ’åºè§„åˆ™**ï¼š
1. å…ˆæŒ‰å¹´é¾„é™åº
2. å¹´é¾„ç›¸åŒçš„ï¼Œå†æŒ‰åˆ›å»ºæ—¶é—´é™åº

### 4.4 åŠ¨æ€æ’åº


**æ–¹å¼ä¸€ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆæ³¨æ„SQLæ³¨å…¥ï¼‰**
```java
List<User> selectByOrder(@Param("orderBy") String orderBy);
```

```xml
<select id="selectByOrder" resultType="User">
    SELECT * FROM user 
    ORDER BY ${orderBy}
</select>
```

âš ï¸ **å®‰å…¨æé†’**
- `${}`ç›´æ¥æ‹¼æ¥SQLï¼Œæœ‰æ³¨å…¥é£é™©
- å¿…é¡»éªŒè¯orderByå‚æ•°åˆæ³•æ€§
- å»ºè®®ä½¿ç”¨ç™½åå•æ–¹å¼

**æ–¹å¼äºŒï¼šä½¿ç”¨chooseæ ‡ç­¾ï¼ˆå®‰å…¨ï¼‰**
```xml
<select id="selectByOrderSafe" resultType="User">
    SELECT * FROM user 
    <choose>
        <when test="orderBy == 'age'">
            ORDER BY age ${orderType}
        </when>
        <when test="orderBy == 'createTime'">
            ORDER BY create_time ${orderType}
        </when>
        <otherwise>
            ORDER BY id DESC
        </otherwise>
    </choose>
</select>
```

**Serviceå±‚å°è£…**
```java
public List<User> getUserList(String orderBy, String orderType) {
    // ç™½åå•éªŒè¯
    List<String> allowFields = Arrays.asList("age", "createTime", "username");
    if (!allowFields.contains(orderBy)) {
        orderBy = "id"; // é»˜è®¤æ’åº
    }
    
    // éªŒè¯æ’åºç±»å‹
    if (!"ASC".equalsIgnoreCase(orderType) && 
        !"DESC".equalsIgnoreCase(orderType)) {
        orderType = "DESC";
    }
    
    return userMapper.selectByOrderSafe(orderBy, orderType);
}
```

---

## 5. ğŸ“¦ æ‰¹é‡æ“ä½œåŠŸèƒ½


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡æ“ä½œ


**æ•ˆç‡å¯¹æ¯”**ï¼š
```
å•æ¡æ’å…¥1000æ¬¡ï¼š
for(int i=0; i<1000; i++) {
    insert(user[i]);  // æ‰§è¡Œ1000æ¬¡SQL
}
è€—æ—¶ï¼šçº¦10ç§’

æ‰¹é‡æ’å…¥1æ¬¡ï¼š
insertBatch(userList);  // æ‰§è¡Œ1æ¬¡SQL
è€—æ—¶ï¼šçº¦0.5ç§’
```

æ€§èƒ½æå‡ï¼š**20å€ï¼**

### 5.2 æ‰¹é‡æ’å…¥


**Mapperæ¥å£**
```java
int insertBatch(List<User> userList);
```

**XMLé…ç½®**
```xml
<insert id="insertBatch">
    INSERT INTO user(username, password, email, age) 
    VALUES
    <foreach collection="list" item="user" separator=",">
        (#{user.username}, #{user.password}, #{user.email}, #{user.age})
    </foreach>
</insert>
```

**ç”Ÿæˆçš„SQL**ï¼š
```sql
INSERT INTO user(username, password, email, age) VALUES
('å¼ ä¸‰', '123456', 'zhangsan@qq.com', 20),
('æå››', '123456', 'lisi@qq.com', 22),
('ç‹äº”', '123456', 'wangwu@qq.com', 25);
```

### 5.3 æ‰¹é‡æ›´æ–°


**æ–¹å¼ä¸€ï¼šå¾ªç¯å•æ¡æ›´æ–°ï¼ˆä¸æ¨èï¼‰**
```java
for(User user : userList) {
    userMapper.update(user);
}
```

**æ–¹å¼äºŒï¼šæ‰¹é‡UPDATEï¼ˆæ¨èï¼‰**
```xml
<update id="updateBatch">
    <foreach collection="list" item="user" separator=";">
        UPDATE user 
        SET username = #{user.username}, age = #{user.age}
        WHERE id = #{user.id}
    </foreach>
</update>
```

âš ï¸ **æ³¨æ„**ï¼šéœ€è¦åœ¨æ•°æ®åº“è¿æ¥URLåŠ ä¸Š
```
allowMultiQueries=true
```

### 5.4 æ‰¹é‡åˆ é™¤


**æ ¹æ®IDåˆ—è¡¨åˆ é™¤**
```java
int deleteBatch(List<Long> ids);
```

```xml
<delete id="deleteBatch">
    DELETE FROM user 
    WHERE id IN
    <foreach collection="list" item="id" open="(" close=")" separator=",">
        #{id}
    </foreach>
</delete>
```

**ç”Ÿæˆçš„SQL**ï¼š
```sql
DELETE FROM user WHERE id IN (1, 2, 3, 4, 5)
```

### 5.5 foreachæ ‡ç­¾è¯¦è§£


| å±æ€§ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **collection** | é›†åˆå‚æ•°å | `list`ã€`array`ã€`mapçš„key` |
| **item** | å½“å‰å…ƒç´ å˜é‡å | `user`ã€`id` |
| **open** | å¼€å§‹ç¬¦å· | `(` |
| **close** | ç»“æŸç¬¦å· | `)` |
| **separator** | åˆ†éš”ç¬¦ | `,` ã€`;` |
| **index** | ç´¢å¼•å˜é‡ | `index` |

---

## 6. ğŸ“¥ğŸ“¤ æ•°æ®å¯¼å…¥å¯¼å‡º


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦å¯¼å…¥å¯¼å‡º


**å®é™…åœºæ™¯**ï¼š
- å¯¼å‡ºï¼šä¸‹è½½ç”¨æˆ·åˆ—è¡¨åˆ°Excelï¼Œæ–¹ä¾¿æ‰“å°
- å¯¼å…¥ï¼šæ‰¹é‡å¯¼å…¥å•†å“ä¿¡æ¯ï¼Œå¿«é€Ÿå½•å…¥æ•°æ®
- å¤‡ä»½ï¼šå®šæœŸå¯¼å‡ºæ•°æ®ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±

### 6.2 æ•°æ®å¯¼å‡ºï¼ˆExcelï¼‰


**å¼•å…¥POIä¾èµ–**
```xml
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi-ooxml</artifactId>
    <version>5.2.3</version>
</dependency>
```

**å¯¼å‡ºå®ç°**
```java
@GetMapping("/export")
public void exportUsers(HttpServletResponse response) throws IOException {
    // 1. æŸ¥è¯¢æ•°æ®
    List<User> users = userService.getAllUsers();
    
    // 2. åˆ›å»ºå·¥ä½œç°¿
    Workbook workbook = new XSSFWorkbook();
    Sheet sheet = workbook.createSheet("ç”¨æˆ·åˆ—è¡¨");
    
    // 3. åˆ›å»ºè¡¨å¤´
    Row headerRow = sheet.createRow(0);
    headerRow.createCell(0).setCellValue("ID");
    headerRow.createCell(1).setCellValue("ç”¨æˆ·å");
    headerRow.createCell(2).setCellValue("é‚®ç®±");
    headerRow.createCell(3).setCellValue("å¹´é¾„");
    
    // 4. å¡«å……æ•°æ®
    int rowNum = 1;
    for(User user : users) {
        Row row = sheet.createRow(rowNum++);
        row.createCell(0).setCellValue(user.getId());
        row.createCell(1).setCellValue(user.getUsername());
        row.createCell(2).setCellValue(user.getEmail());
        row.createCell(3).setCellValue(user.getAge());
    }
    
    // 5. è¾“å‡ºåˆ°å“åº”æµ
    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition", 
        "attachment;filename=users.xlsx");
    workbook.write(response.getOutputStream());
    workbook.close();
}
```

### 6.3 æ•°æ®å¯¼å…¥ï¼ˆExcelï¼‰


```java
@PostMapping("/import")
public Result importUsers(MultipartFile file) throws IOException {
    // 1. è¯»å–Excel
    Workbook workbook = new XSSFWorkbook(file.getInputStream());
    Sheet sheet = workbook.getSheetAt(0);
    
    List<User> users = new ArrayList<>();
    
    // 2. éå†è¡Œï¼ˆè·³è¿‡è¡¨å¤´ï¼‰
    for(int i = 1; i <= sheet.getLastRowNum(); i++) {
        Row row = sheet.getRow(i);
        
        User user = new User();
        user.setUsername(row.getCell(0).getStringCellValue());
        user.setEmail(row.getCell(1).getStringCellValue());
        user.setAge((int)row.getCell(2).getNumericCellValue());
        
        users.add(user);
    }
    
    // 3. æ‰¹é‡ä¿å­˜
    userService.saveBatch(users);
    
    workbook.close();
    return Result.success("å¯¼å…¥æˆåŠŸï¼Œå…±" + users.size() + "æ¡");
}
```

### 6.4 EasyExcelæ–¹å¼ï¼ˆæ›´ç®€å•ï¼‰


**å¼•å…¥ä¾èµ–**
```xml
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>easyexcel</artifactId>
    <version>3.3.2</version>
</dependency>
```

**å¯¼å‡ºç¤ºä¾‹**
```java
@GetMapping("/export")
public void export(HttpServletResponse response) throws IOException {
    response.setContentType("application/vnd.ms-excel");
    response.setHeader("Content-Disposition", 
        "attachment;filename=users.xlsx");
    
    List<User> users = userService.getAllUsers();
    EasyExcel.write(response.getOutputStream(), User.class)
             .sheet("ç”¨æˆ·åˆ—è¡¨")
             .doWrite(users);
}
```

**å¯¼å…¥ç¤ºä¾‹**
```java
@PostMapping("/import")
public Result importUsers(MultipartFile file) throws IOException {
    List<User> users = EasyExcel.read(file.getInputStream())
                                 .head(User.class)
                                 .sheet()
                                 .doReadSync();
    
    userService.saveBatch(users);
    return Result.success("å¯¼å…¥" + users.size() + "æ¡");
}
```

---

## 7. ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ


### 7.1 åŸºç¡€ç»Ÿè®¡å‡½æ•°


**COUNT - è®¡æ•°**
```xml
<select id="countUsers" resultType="Integer">
    SELECT COUNT(*) FROM user
</select>

<select id="countByAge" resultType="Integer">
    SELECT COUNT(*) FROM user WHERE age > #{age}
</select>
```

**SUM - æ±‚å’Œ**
```xml
<select id="sumAge" resultType="Integer">
    SELECT SUM(age) FROM user
</select>
```

**AVG - å¹³å‡å€¼**
```xml
<select id="avgAge" resultType="Double">
    SELECT AVG(age) FROM user
</select>
```

**MAX/MIN - æœ€å¤§æœ€å°å€¼**
```xml
<select id="getAgeRange" resultType="Map">
    SELECT MAX(age) as maxAge, MIN(age) as minAge 
    FROM user
</select>
```

### 7.2 åˆ†ç»„ç»Ÿè®¡


**æŒ‰å¹´é¾„åˆ†ç»„ç»Ÿè®¡äººæ•°**
```xml
<select id="countByAgeGroup" resultType="Map">
    SELECT age, COUNT(*) as count 
    FROM user 
    GROUP BY age
    ORDER BY age
</select>
```

**è¿”å›ç»“æœ**ï¼š
```
{age: 20, count: 5}
{age: 22, count: 8}
{age: 25, count: 3}
```

**æŒ‰æ—¥æœŸç»Ÿè®¡æ³¨å†Œäººæ•°**
```xml
<select id="countByDate" resultType="Map">
    SELECT DATE(create_time) as date, COUNT(*) as count 
    FROM user 
    GROUP BY DATE(create_time)
    ORDER BY date DESC
</select>
```

### 7.3 å¤æ‚ç»Ÿè®¡


**å¹´é¾„æ®µåˆ†å¸ƒç»Ÿè®¡**
```xml
<select id="ageDistribution" resultType="Map">
    SELECT 
        CASE 
            WHEN age < 18 THEN 'æœªæˆå¹´'
            WHEN age BETWEEN 18 AND 30 THEN 'é’å¹´'
            WHEN age BETWEEN 31 AND 50 THEN 'ä¸­å¹´'
            ELSE 'è€å¹´'
        END as ageGroup,
        COUNT(*) as count
    FROM user
    GROUP BY ageGroup
</select>
```

**å¤šç»´åº¦ç»Ÿè®¡**
```java
public class UserStatistics {
    private Integer totalUsers;      // æ€»ç”¨æˆ·æ•°
    private Integer activeUsers;     // æ´»è·ƒç”¨æˆ·
    private Double avgAge;           // å¹³å‡å¹´é¾„
    private Integer todayRegister;   // ä»Šæ—¥æ³¨å†Œ
    private Map<String, Integer> ageDistribution; // å¹´é¾„åˆ†å¸ƒ
}
```

---

## 8. ğŸ’¾ æ•°æ®å¤‡ä»½æ¢å¤


### 8.1 ä¸ºä»€ä¹ˆè¦å¤‡ä»½


**é£é™©åœºæ™¯**ï¼š
- è¯¯åˆ æ•°æ®ï¼šä¸å°å¿ƒåˆ é™¤é‡è¦æ•°æ®
- ç³»ç»Ÿæ•…éšœï¼šæœåŠ¡å™¨å´©æºƒæ•°æ®ä¸¢å¤±
- æ•°æ®æŸåï¼šç¡¬ç›˜æ•…éšœå¯¼è‡´æ•°æ®æŸå

**å¤‡ä»½ç­–ç•¥**ï¼š
```
â”Œâ”€ å¤‡ä»½æ–¹æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®Œå…¨å¤‡ä»½ï¼šå¤‡ä»½æ‰€æœ‰æ•°æ®     â”‚
â”‚ â€¢ é¢‘ç‡ï¼šæ¯å‘¨ä¸€æ¬¡           â”‚
â”‚ â€¢ ä¼˜ç‚¹ï¼šæ¢å¤å¿«             â”‚
â”‚ â€¢ ç¼ºç‚¹ï¼šå ç©ºé—´             â”‚
â”‚                            â”‚
â”‚ å¢é‡å¤‡ä»½ï¼šåªå¤‡ä»½å˜åŒ–æ•°æ®   â”‚
â”‚ â€¢ é¢‘ç‡ï¼šæ¯å¤©ä¸€æ¬¡           â”‚
â”‚ â€¢ ä¼˜ç‚¹ï¼šèŠ‚çœç©ºé—´           â”‚
â”‚ â€¢ ç¼ºç‚¹ï¼šæ¢å¤æ…¢             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 é€»è¾‘å¤‡ä»½ï¼ˆå¯¼å‡ºSQLï¼‰


**mysqldumpå‘½ä»¤**
```bash
# å¤‡ä»½å•ä¸ªæ•°æ®åº“
mysqldump -u root -p database_name > backup.sql

# å¤‡ä»½æŒ‡å®šè¡¨
mysqldump -u root -p database_name user > user_backup.sql

# å¤‡ä»½æ‰€æœ‰æ•°æ®åº“
mysqldump -u root -p --all-databases > all_backup.sql
```

**å®šæ—¶å¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
DATE=$(date +%Y%m%d)
BACKUP_DIR="/backup"
DB_NAME="mydb"

mysqldump -u root -p123456 $DB_NAME > $BACKUP_DIR/${DB_NAME}_${DATE}.sql

# åˆ é™¤7å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.sql" -mtime +7 -delete
```

### 8.3 ç¨‹åºåŒ–å¤‡ä»½


**Javaå®ç°å¯¼å‡ºSQL**
```java
public void backupDatabase() {
    String host = "localhost";
    String port = "3306";
    String database = "mydb";
    String username = "root";
    String password = "123456";
    
    String fileName = "backup_" + 
        new SimpleDateFormat("yyyyMMdd").format(new Date()) + ".sql";
    
    String command = String.format(
        "mysqldump -h%s -P%s -u%s -p%s %s -r %s",
        host, port, username, password, database, fileName
    );
    
    Runtime.getRuntime().exec(command);
}
```

### 8.4 æ•°æ®æ¢å¤


**MySQLå‘½ä»¤æ¢å¤**
```bash
# æ¢å¤æ•°æ®
mysql -u root -p database_name < backup.sql
```

**ç¨‹åºåŒ–æ¢å¤**
```java
public void restoreDatabase(String sqlFile) throws Exception {
    // è¯»å–SQLæ–‡ä»¶
    String sql = Files.readString(Paths.get(sqlFile));
    
    // åˆ†å‰²å¤šæ¡SQLè¯­å¥
    String[] sqlStatements = sql.split(";");
    
    // æ‰§è¡Œæ¢å¤
    for(String statement : sqlStatements) {
        if(statement.trim().length() > 0) {
            jdbcTemplate.execute(statement);
        }
    }
}
```

---

## 9. ğŸ”„ æ•°æ®åŒæ­¥æœºåˆ¶


### 9.1 ä»€ä¹ˆæ˜¯æ•°æ®åŒæ­¥


**ç”Ÿæ´»åœºæ™¯**ï¼š
- æ‰‹æœºå’Œç”µè„‘çš„ç…§ç‰‡åŒæ­¥
- å¤šä¸ªä»“åº“çš„åº“å­˜åŒæ­¥
- ä¸»ä»æ•°æ®åº“çš„æ•°æ®åŒæ­¥

**åŒæ­¥ç±»å‹**ï¼š
```
å®æ—¶åŒæ­¥ï¼šæ•°æ®å˜åŒ–ç«‹å³åŒæ­¥
å®šæ—¶åŒæ­¥ï¼šæŒ‰å›ºå®šæ—¶é—´é—´éš”åŒæ­¥
è§¦å‘åŒæ­¥ï¼šæ»¡è¶³æ¡ä»¶æ—¶åŒæ­¥
```

### 9.2 å®šæ—¶åŒæ­¥å®ç°


**Spring Taskå®šæ—¶ä»»åŠ¡**
```java
@Component
@EnableScheduling
public class DataSyncTask {
    
    @Autowired
    private UserService userService;
    
    // æ¯å¤©å‡Œæ™¨2ç‚¹åŒæ­¥
    @Scheduled(cron = "0 0 2 * * ?")
    public void syncUserData() {
        // 1. ä»æºç³»ç»Ÿè·å–æ•°æ®
        List<User> sourceUsers = getSourceData();
        
        // 2. æ¯”å¯¹å·®å¼‚
        List<User> needUpdate = findDifferences(sourceUsers);
        
        // 3. æ‰¹é‡æ›´æ–°
        if(!needUpdate.isEmpty()) {
            userService.updateBatch(needUpdate);
        }
    }
}
```

### 9.3 åŸºäºMQçš„å®æ—¶åŒæ­¥


**æ¶ˆæ¯å‘é€ç«¯**
```java
@Service
public class UserService {
    
    @Autowired
    private RabbitTemplate rabbitTemplate;
    
    public void updateUser(User user) {
        // 1. æ›´æ–°æ•°æ®åº“
        userMapper.update(user);
        
        // 2. å‘é€åŒæ­¥æ¶ˆæ¯
        rabbitTemplate.convertAndSend(
            "user.exchange", 
            "user.update", 
            user
        );
    }
}
```

**æ¶ˆæ¯æ¥æ”¶ç«¯**
```java
@Component
public class SyncConsumer {
    
    @RabbitListener(queues = "user.sync.queue")
    public void handleSync(User user) {
        // åŒæ­¥åˆ°å…¶ä»–ç³»ç»Ÿ
        syncToOtherSystem(user);
    }
}
```

### 9.4 æ•°æ®å¯¹è´¦æœºåˆ¶


**å¯¹è´¦æµç¨‹**ï¼š
```
1. æºç³»ç»Ÿç”Ÿæˆæ•°æ®æ‘˜è¦ â†’ MD5ã€æ€»æ•°ã€æ€»å’Œ
2. ç›®æ ‡ç³»ç»Ÿè®¡ç®—æ•°æ®æ‘˜è¦
3. æ¯”å¯¹æ‘˜è¦æ˜¯å¦ä¸€è‡´
4. ä¸ä¸€è‡´åˆ™é‡æ–°åŒæ­¥
```

**å®ç°ç¤ºä¾‹**
```java
public class DataCheckService {
    
    public boolean checkDataConsistency() {
        // 1. è®¡ç®—æºæ•°æ®æ‘˜è¦
        String sourceDigest = calculateDigest(sourceData);
        
        // 2. è®¡ç®—ç›®æ ‡æ•°æ®æ‘˜è¦
        String targetDigest = calculateDigest(targetData);
        
        // 3. æ¯”å¯¹
        if(!sourceDigest.equals(targetDigest)) {
            // è§¦å‘é‡æ–°åŒæ­¥
            reSyncData();
            return false;
        }
        return true;
    }
    
    private String calculateDigest(List<User> users) {
        StringBuilder sb = new StringBuilder();
        for(User user : users) {
            sb.append(user.getId())
              .append(user.getUsername())
              .append(user.getAge());
        }
        return DigestUtils.md5Hex(sb.toString());
    }
}
```

---

## 10. âœ… æ•°æ®ä¸€è‡´æ€§ä¿è¯


### 10.1 ä»€ä¹ˆæ˜¯æ•°æ®ä¸€è‡´æ€§


**é—®é¢˜åœºæ™¯**ï¼š
```
ç”µå•†ä¸‹å•æµç¨‹ï¼š
1. æ‰£å‡åº“å­˜ â†’ æˆåŠŸ
2. åˆ›å»ºè®¢å• â†’ æˆåŠŸ
3. æ‰£å‡ä½™é¢ â†’ å¤±è´¥ï¼

é—®é¢˜ï¼šåº“å­˜å·²æ‰£ï¼Œä½†è®¢å•åˆ›å»ºå¤±è´¥
ç»“æœï¼šæ•°æ®ä¸ä¸€è‡´
```

### 10.2 äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§


**@Transactionalæ³¨è§£**
```java
@Service
public class OrderService {
    
    @Transactional(rollbackFor = Exception.class)
    public void createOrder(Order order) {
        // 1. æ‰£å‡åº“å­˜
        stockMapper.reduceStock(order.getProductId(), order.getQuantity());
        
        // 2. åˆ›å»ºè®¢å•
        orderMapper.insert(order);
        
        // 3. æ‰£å‡ä½™é¢
        accountMapper.reduceBalance(order.getUserId(), order.getAmount());
        
        // ä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œå…¨éƒ¨å›æ»š
    }
}
```

**äº‹åŠ¡ä¼ æ’­è¡Œä¸º**
```java
// REQUIREDï¼šåŠ å…¥å½“å‰äº‹åŠ¡ï¼Œæ²¡æœ‰åˆ™æ–°å»º
@Transactional(propagation = Propagation.REQUIRED)

// REQUIRES_NEWï¼šæ€»æ˜¯å¼€æ–°äº‹åŠ¡
@Transactional(propagation = Propagation.REQUIRES_NEW)

// NESTEDï¼šåµŒå¥—äº‹åŠ¡
@Transactional(propagation = Propagation.NESTED)
```

### 10.3 ä¹è§‚é”é˜²æ­¢å¹¶å‘é—®é¢˜


**ç‰ˆæœ¬å·æœºåˆ¶**
```java
public class Product {
    private Long id;
    private String name;
    private Integer stock;
    private Integer version;  // ç‰ˆæœ¬å·
}
```

**æ›´æ–°SQL**
```xml
<update id="updateStock">
    UPDATE product 
    SET stock = stock - #{quantity},
        version = version + 1
    WHERE id = #{id} AND version = #{version}
</update>
```

**Serviceå¤„ç†**
```java
public boolean reduceStock(Long productId, Integer quantity) {
    // 1. æŸ¥è¯¢å½“å‰ç‰ˆæœ¬
    Product product = productMapper.selectById(productId);
    
    // 2. æ›´æ–°ï¼ˆå¸¦ç‰ˆæœ¬å·ï¼‰
    int rows = productMapper.updateStock(
        productId, quantity, product.getVersion()
    );
    
    // 3. åˆ¤æ–­æ˜¯å¦æ›´æ–°æˆåŠŸ
    if(rows == 0) {
        // ç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œè¯´æ˜è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†
        throw new BusinessException("åº“å­˜å·²è¢«ä¿®æ”¹ï¼Œè¯·é‡è¯•");
    }
    return true;
}
```

### 10.4 åˆ†å¸ƒå¼äº‹åŠ¡


**Seataåˆ†å¸ƒå¼äº‹åŠ¡**
```java
@GlobalTransactional
public void businessMethod() {
    // è®¢å•æœåŠ¡
    orderService.createOrder();
    
    // åº“å­˜æœåŠ¡ï¼ˆè¿œç¨‹è°ƒç”¨ï¼‰
    stockService.reduceStock();
    
    // è´¦æˆ·æœåŠ¡ï¼ˆè¿œç¨‹è°ƒç”¨ï¼‰
    accountService.reduceBalance();
    
    // ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå…¨éƒ¨å›æ»š
}
```

**TCCæ¨¡å¼**
```java
public interface StockService {
    
    // Tryï¼šå°è¯•é˜¶æ®µï¼Œé¢„ç•™èµ„æº
    boolean tryReduce(Long productId, Integer quantity);
    
    // Confirmï¼šç¡®è®¤é˜¶æ®µï¼ŒçœŸæ­£æ‰£å‡
    boolean confirmReduce(Long productId, Integer quantity);
    
    // Cancelï¼šå–æ¶ˆé˜¶æ®µï¼Œé‡Šæ”¾èµ„æº
    boolean cancelReduce(Long productId, Integer quantity);
}
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


ğŸ¯ **CRUDåŸºç¡€æ“ä½œ**
- **å¢**ï¼šINSERTæ’å…¥æ•°æ®
- **åˆ **ï¼šDELETEåˆ é™¤ï¼ˆç‰©ç†/é€»è¾‘ï¼‰
- **æ”¹**ï¼šUPDATEæ›´æ–°æ•°æ®
- **æŸ¥**ï¼šSELECTæŸ¥è¯¢æ•°æ®

ğŸ” **æ¡ä»¶æŸ¥è¯¢æŠ€å·§**
- å•æ¡ä»¶ï¼šWHERE username = ?
- å¤šæ¡ä»¶ï¼šåŠ¨æ€SQLæ‹¼æ¥
- æ¨¡ç³ŠæŸ¥è¯¢ï¼šLIKE '%å…³é”®è¯%'
- èŒƒå›´æŸ¥è¯¢ï¼šBETWEEN...AND

ğŸ“„ **åˆ†é¡µæŸ¥è¯¢æ–¹æ¡ˆ**
- æ‰‹åŠ¨åˆ†é¡µï¼šLIMIT offset, size
- PageHelperï¼šè‡ªåŠ¨åˆ†é¡µæ’ä»¶
- æ ¸å¿ƒå‚æ•°ï¼špageNumã€pageSize

â¬†ï¸ **æ’åºå®ç°æ–¹å¼**
- å•å­—æ®µï¼šORDER BY age DESC
- å¤šå­—æ®µï¼šORDER BY age, name
- åŠ¨æ€æ’åºï¼šæ³¨æ„SQLæ³¨å…¥

ğŸ“¦ **æ‰¹é‡æ“ä½œä¼˜åŒ–**
- æ‰¹é‡æ’å…¥ï¼šVALUES(...),(...)
- æ‰¹é‡æ›´æ–°ï¼šå¤šæ¡UPDATE
- æ‰¹é‡åˆ é™¤ï¼šWHERE IN (...)
- æ€§èƒ½æå‡ï¼š10-20å€

### 11.2 å®é™…åº”ç”¨åœºæ™¯


| åœºæ™¯ | æŠ€æœ¯é€‰æ‹© | å…³é”®ç‚¹ |
|------|---------|--------|
| ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢ | åˆ†é¡µ+æ’åº+æ¡ä»¶æŸ¥è¯¢ | PageHelperæ’ä»¶ |
| æ•°æ®å¯¼å…¥ | æ‰¹é‡æ’å…¥+Excelè§£æ | EasyExcelå·¥å…· |
| æ•°æ®å¯¼å‡º | æ¡ä»¶æŸ¥è¯¢+Excelç”Ÿæˆ | POIæˆ–EasyExcel |
| æ•°æ®ç»Ÿè®¡ | GROUP BY+èšåˆå‡½æ•° | åˆç†ä½¿ç”¨ç´¢å¼• |
| æ•°æ®å¤‡ä»½ | mysqldump+å®šæ—¶ä»»åŠ¡ | å¢é‡å¤‡ä»½ç­–ç•¥ |
| æ•°æ®åŒæ­¥ | MQ+å®šæ—¶ä»»åŠ¡ | å¯¹è´¦æœºåˆ¶ |
| æ•°æ®ä¸€è‡´æ€§ | äº‹åŠ¡+ä¹è§‚é” | åˆç†é€‰æ‹©éš”ç¦»çº§åˆ« |

### 11.3 æ€§èƒ½ä¼˜åŒ–è¦ç‚¹


âš¡ **æŸ¥è¯¢ä¼˜åŒ–**
```
âœ… é¿å…SELECT *ï¼ŒåªæŸ¥éœ€è¦çš„å­—æ®µ
âœ… åˆç†ä½¿ç”¨ç´¢å¼•
âœ… åˆ†é¡µæŸ¥è¯¢åŠ ä¸ŠORDER BY
âœ… é¿å…åœ¨å¾ªç¯ä¸­æ‰§è¡ŒSQL
```

âš¡ **æ‰¹é‡æ“ä½œä¼˜åŒ–**
```
âœ… ä½¿ç”¨æ‰¹é‡æ’å…¥ä»£æ›¿å•æ¡
âœ… æ§åˆ¶æ¯æ‰¹æ•°é‡ï¼ˆå»ºè®®500-1000ï¼‰
âœ… å¤§æ•°æ®é‡åˆ†æ‰¹å¤„ç†
```

âš¡ **äº‹åŠ¡ä¼˜åŒ–**
```
âœ… äº‹åŠ¡èŒƒå›´å°½å¯èƒ½å°
âœ… é¿å…é•¿äº‹åŠ¡
âœ… è¯»æ“ä½œä¸åŠ äº‹åŠ¡
âœ… åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
```

### 11.4 å¸¸è§é—®é¢˜è§£å†³


**é—®é¢˜1ï¼šåˆ†é¡µæŸ¥è¯¢æ€»æ•°ä¸å‡†ç¡®**
```
åŸå› ï¼šæŸ¥è¯¢æ¡ä»¶ä¸ä¸€è‡´
è§£å†³ï¼šç¡®ä¿æ€»æ•°æŸ¥è¯¢ä¸åˆ†é¡µæŸ¥è¯¢æ¡ä»¶ç›¸åŒ
```

**é—®é¢˜2ï¼šæ‰¹é‡æ’å…¥å¤±è´¥**
```
åŸå› ï¼šSQLå¤ªé•¿è¶…è¿‡é™åˆ¶
è§£å†³ï¼šåˆ†æ‰¹æ’å…¥ï¼Œæ¯æ‰¹500-1000æ¡
```

**é—®é¢˜3ï¼šå¯¼å‡ºæ•°æ®OOM**
```
åŸå› ï¼šä¸€æ¬¡åŠ è½½æ•°æ®å¤ªå¤š
è§£å†³ï¼šåˆ†æ‰¹å¯¼å‡ºæˆ–ä½¿ç”¨æµå¼æŸ¥è¯¢
```

**é—®é¢˜4ï¼šæ•°æ®åŒæ­¥å»¶è¿Ÿ**
```
åŸå› ï¼šå®šæ—¶ä»»åŠ¡é—´éš”å¤ªé•¿
è§£å†³ï¼šæ”¹ç”¨MQå®æ—¶åŒæ­¥
```

### 11.5 å­¦ä¹ å»ºè®®


ğŸ“š **å­¦ä¹ è·¯å¾„**
```
ç¬¬ä¸€æ­¥ï¼šç†Ÿç»ƒæŒæ¡CRUD â†’ åŸºç¡€SQLè¯­å¥
ç¬¬äºŒæ­¥ï¼šç†è§£åˆ†é¡µæ’åº â†’ PageHelperä½¿ç”¨
ç¬¬ä¸‰æ­¥ï¼šæŒæ¡æ‰¹é‡æ“ä½œ â†’ æ€§èƒ½ä¼˜åŒ–æ€ç»´
ç¬¬å››æ­¥ï¼šå­¦ä¹ å¯¼å…¥å¯¼å‡º â†’ POI/EasyExcel
ç¬¬äº”æ­¥ï¼šç†è§£äº‹åŠ¡æœºåˆ¶ â†’ æ•°æ®ä¸€è‡´æ€§
```

ğŸ’¡ **å®è·µå»ºè®®**
- ä»ç®€å•å¢åˆ æ”¹æŸ¥å¼€å§‹ç»ƒä¹ 
- é€æ­¥å¢åŠ æ¡ä»¶æŸ¥è¯¢ã€åˆ†é¡µã€æ’åº
- å°è¯•ä¼˜åŒ–æ…¢æŸ¥è¯¢SQL
- å®ç°å®Œæ•´çš„æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
- ç†è§£å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®ä¸€è‡´æ€§

ğŸ¯ **é‡ç‚¹è®°å¿†**
- CRUDæ˜¯åŸºç¡€ï¼Œå¿…é¡»ç†Ÿç»ƒ
- åˆ†é¡µæŸ¥è¯¢ç”¨PageHelperæœ€ç®€å•
- æ‰¹é‡æ“ä½œèƒ½å¤§å¹…æå‡æ€§èƒ½
- äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§
- ä¹è§‚é”è§£å†³å¹¶å‘é—®é¢˜

---

ğŸ‰ **æ­å–œä½ ï¼** å®Œæˆäº†CRUDæ•°æ®æ“ä½œçš„å­¦ä¹ ï¼Œè¿™æ˜¯SSMæ¡†æ¶æœ€æ ¸å¿ƒçš„å®æˆ˜æŠ€èƒ½ã€‚ç»§ç»­ä¿æŒç»ƒä¹ ï¼Œå¤šå†™ä»£ç å¤šæ€è€ƒï¼Œä½ ä¼šè¶Šæ¥è¶Šç†Ÿç»ƒï¼