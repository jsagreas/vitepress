---
title: 8ã€æ•´åˆåº”ç”¨
---
## ğŸ“š ç›®å½•

1. [ä¸‰å±‚æ¶æ„è®¾è®¡](#1-ä¸‰å±‚æ¶æ„è®¾è®¡)
2. [é…ç½®ç®¡ç†ä¼˜åŒ–](#2-é…ç½®ç®¡ç†ä¼˜åŒ–)
3. [æ€§èƒ½ç›‘æ§è°ƒä¼˜](#3-æ€§èƒ½ç›‘æ§è°ƒä¼˜)
4. [é¡¹ç›®éƒ¨ç½²è¿ç»´](#4-é¡¹ç›®éƒ¨ç½²è¿ç»´)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ ä¸‰å±‚æ¶æ„è®¾è®¡


### 1.1 ä»€ä¹ˆæ˜¯ä¸‰å±‚æ¶æ„


**é€šä¿—ç†è§£**ï¼šå°±åƒç›–æˆ¿å­ä¸€æ ·ï¼Œæˆ‘ä»¬æŠŠç³»ç»Ÿåˆ†æˆä¸‰ä¸ªå±‚æ¬¡ï¼Œæ¯å±‚åšå¥½è‡ªå·±çš„äº‹æƒ…

```
ç”¨æˆ·ç•Œé¢å±‚ï¼ˆè¡¨ç°å±‚ï¼‰
    â†“ è°ƒç”¨
ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆæœåŠ¡å±‚ï¼‰
    â†“ è°ƒç”¨
æ•°æ®è®¿é—®å±‚ï¼ˆæŒä¹…å±‚ï¼‰
    â†“ æ“ä½œ
æ•°æ®åº“
```

**å±‚æ¬¡èŒè´£è¯´æ˜**ï¼š

ğŸ”¸ **è¡¨ç°å±‚ï¼ˆControllerå±‚ï¼‰**
- **å¹²ä»€ä¹ˆ**ï¼šè´Ÿè´£æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œè¿”å›å“åº”ç»“æœ
- **å°±åƒ**ï¼šé¤å…çš„æœåŠ¡å‘˜ï¼Œæ¥æ”¶é¡¾å®¢ç‚¹é¤ï¼Œé€ä¸Šèœå“
- **æŠ€æœ¯å®ç°**ï¼šSpringMVCçš„Controller

ğŸ”¸ **ä¸šåŠ¡å±‚ï¼ˆServiceå±‚ï¼‰**
- **å¹²ä»€ä¹ˆ**ï¼šå¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è®¡ç®—ã€åˆ¤æ–­ã€ç»„è£…æ•°æ®
- **å°±åƒ**ï¼šé¤å…çš„å¨å¸ˆï¼Œè´Ÿè´£åšèœçš„å…·ä½“å·¥ä½œ
- **æŠ€æœ¯å®ç°**ï¼šSpringç®¡ç†çš„Serviceç±»

ğŸ”¸ **æŒä¹…å±‚ï¼ˆDaoå±‚/Mapperå±‚ï¼‰**
- **å¹²ä»€ä¹ˆ**ï¼šè´Ÿè´£å’Œæ•°æ®åº“æ‰“äº¤é“ï¼Œæ‰§è¡Œå¢åˆ æ”¹æŸ¥
- **å°±åƒ**ï¼šé¤å…çš„ä»“åº“ç®¡ç†å‘˜ï¼Œè´Ÿè´£å–é£Ÿæã€è®°è´¦
- **æŠ€æœ¯å®ç°**ï¼šMyBatisçš„Mapperæ¥å£

### 1.2 ä¸‰å±‚æ¶æ„çš„æ ‡å‡†é¡¹ç›®ç»“æ„


```
com.example.project
â”œâ”€â”€ controller          # è¡¨ç°å±‚
â”‚   â”œâ”€â”€ UserController.java
â”‚   â””â”€â”€ OrderController.java
â”‚
â”œâ”€â”€ service            # ä¸šåŠ¡å±‚
â”‚   â”œâ”€â”€ UserService.java
â”‚   â”œâ”€â”€ impl
â”‚   â”‚   â””â”€â”€ UserServiceImpl.java
â”‚   â””â”€â”€ OrderService.java
â”‚
â”œâ”€â”€ mapper (æˆ–dao)     # æŒä¹…å±‚
â”‚   â”œâ”€â”€ UserMapper.java
â”‚   â””â”€â”€ OrderMapper.java
â”‚
â”œâ”€â”€ entity (æˆ–pojo)    # å®ä½“ç±»
â”‚   â”œâ”€â”€ User.java
â”‚   â””â”€â”€ Order.java
â”‚
â”œâ”€â”€ dto                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ UserDTO.java
â”‚
â””â”€â”€ vo                 # è§†å›¾å¯¹è±¡
    â””â”€â”€ UserVO.java
```

### 1.3 å®Œæ•´çš„è¯·æ±‚å¤„ç†æµç¨‹


```
1. ç”¨æˆ·å‘èµ·è¯·æ±‚
   â†“
2. Controlleræ¥æ”¶è¯·æ±‚
   - å‚æ•°æ ¡éªŒ
   - è°ƒç”¨Service
   â†“
3. Serviceå¤„ç†ä¸šåŠ¡
   - ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
   - è°ƒç”¨Mapper
   â†“
4. Mapperæ“ä½œæ•°æ®åº“
   - æ‰§è¡ŒSQL
   - è¿”å›ç»“æœ
   â†“
5. å±‚å±‚è¿”å›å“åº”
   â†“
6. è¿”å›ç»™ç”¨æˆ·
```

### 1.4 å®æˆ˜ä»£ç ç¤ºä¾‹


**â‘  Controllerå±‚ - æ¥æ”¶è¯·æ±‚**

```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
    @GetMapping("/{id}")
    public Result getUser(@PathVariable Long id) {
        User user = userService.getUserById(id);
        return Result.success(user);
    }
    
    // æ·»åŠ ç”¨æˆ·
    @PostMapping
    public Result addUser(@RequestBody User user) {
        userService.saveUser(user);
        return Result.success("æ·»åŠ æˆåŠŸ");
    }
}
```

**â‘¡ Serviceå±‚ - å¤„ç†ä¸šåŠ¡**

```java
@Service
public class UserServiceImpl implements UserService {
    
    @Autowired
    private UserMapper userMapper;
    
    @Override
    public User getUserById(Long id) {
        // ä¸šåŠ¡é€»è¾‘ï¼šæŸ¥è¯¢å‰å…ˆéªŒè¯
        if (id == null || id <= 0) {
            throw new BusinessException("ç”¨æˆ·IDä¸åˆæ³•");
        }
        return userMapper.selectById(id);
    }
    
    @Override
    @Transactional  // äº‹åŠ¡æ§åˆ¶
    public void saveUser(User user) {
        // ä¸šåŠ¡é€»è¾‘ï¼šä¿å­˜å‰æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦é‡å¤
        User exist = userMapper.selectByUsername(user.getUsername());
        if (exist != null) {
            throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        userMapper.insert(user);
    }
}
```

**â‘¢ Mapperå±‚ - æ•°æ®è®¿é—®**

```java
@Mapper
public interface UserMapper {
    
    // æ ¹æ®IDæŸ¥è¯¢
    User selectById(Long id);
    
    // æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢
    User selectByUsername(String username);
    
    // æ’å…¥ç”¨æˆ·
    int insert(User user);
}
```

### 1.5 å±‚ä¸å±‚ä¹‹é—´çš„æ•°æ®ä¼ é€’


**ä¸ºä»€ä¹ˆéœ€è¦DTOå’ŒVOï¼Ÿ**

> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼šä¸åŒå±‚éœ€è¦çš„æ•°æ®ä¸ä¸€æ ·ï¼Œç›´æ¥ä¼ å®ä½“ç±»ä¼šæœ‰é—®é¢˜

**ä¸‰ç§å¯¹è±¡çš„åŒºåˆ«**ï¼š

| å¯¹è±¡ç±»å‹ | å…¨ç§° | ç”¨é€” | ä½¿ç”¨åœºæ™¯ |
|---------|------|------|----------|
| **Entity** | `å®ä½“ç±»` | å¯¹åº”æ•°æ®åº“è¡¨ç»“æ„ | Mapperå±‚è¿”å›çš„æ•°æ® |
| **DTO** | `æ•°æ®ä¼ è¾“å¯¹è±¡` | ç”¨äºå±‚ä¸å±‚ä¹‹é—´ä¼ è¾“ | Serviceä¹‹é—´è°ƒç”¨ |
| **VO** | `è§†å›¾å¯¹è±¡` | è¿”å›ç»™å‰ç«¯çš„æ•°æ® | Controllerè¿”å›ç»™å‰ç«¯ |

**å®é™…æ¡ˆä¾‹è¯´æ˜**ï¼š

```java
// Entity - æ•°æ®åº“å®Œæ•´å­—æ®µ
public class User {
    private Long id;
    private String username;
    private String password;    // å¯†ç ä¸èƒ½è¿”å›ç»™å‰ç«¯ï¼
    private Integer status;
    private Date createTime;
}

// VO - è¿”å›ç»™å‰ç«¯çš„æ•°æ®ï¼ˆä¸å«å¯†ç ï¼‰
public class UserVO {
    private Long id;
    private String username;
    private String statusText;  // çŠ¶æ€æ–‡å­—è¯´æ˜
    private String createTime;  // æ ¼å¼åŒ–åçš„æ—¶é—´
}

// DTO - æ¥æ”¶å‰ç«¯ä¼ æ¥çš„æ•°æ®
public class UserDTO {
    private String username;
    private String password;
    private String confirmPassword; // ç¡®è®¤å¯†ç ï¼ˆæ•°æ®åº“æ²¡æœ‰è¿™ä¸ªå­—æ®µï¼‰
}
```

### 1.6 ä¸‰å±‚æ¶æ„çš„è®¾è®¡åŸåˆ™


**æ ¸å¿ƒåŸåˆ™ï¼šå„å¸å…¶èŒï¼Œäº’ä¸å¹²æ¶‰**

âœ… **è¯¥åšçš„äº‹**ï¼š
- Controllerï¼šåªè´Ÿè´£æ¥æ”¶å‚æ•°ã€è°ƒç”¨Serviceã€è¿”å›ç»“æœ
- Serviceï¼šåªè´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†
- Mapperï¼šåªè´Ÿè´£æ•°æ®åº“æ“ä½œ

âŒ **ä¸è¯¥åšçš„äº‹**ï¼š
- Controlleré‡Œä¸è¦å†™ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚åˆ¤æ–­ã€è®¡ç®—ï¼‰
- Serviceé‡Œä¸è¦ç›´æ¥å†™SQL
- Mapperé‡Œä¸è¦å¤„ç†ä¸šåŠ¡

> âš ï¸ **æ–°æ‰‹å¸¸è§é”™è¯¯**ï¼šåœ¨Controlleré‡Œç›´æ¥è°ƒç”¨Mapperï¼Œè·³è¿‡Serviceå±‚
> 
> **ä¸ºä»€ä¹ˆä¸è¡Œ**ï¼Ÿ
> - äº‹åŠ¡æ— æ³•æ§åˆ¶
> - ä¸šåŠ¡é€»è¾‘åˆ†æ•£ï¼Œéš¾ä»¥ç»´æŠ¤
> - ä¸ç¬¦åˆè®¾è®¡è§„èŒƒ

---

## 2. âš™ï¸ é…ç½®ç®¡ç†ä¼˜åŒ–


### 2.1 ä¸ºä»€ä¹ˆè¦ä¼˜åŒ–é…ç½®


**æ–°æ‰‹å¸¸é‡åˆ°çš„é—®é¢˜**ï¼š
- é…ç½®æ–‡ä»¶å¤ªå¤šï¼Œæ‰¾ä¸åˆ°åœ¨å“ªæ”¹
- åŒæ ·çš„é…ç½®å†™äº†å¥½å‡ é
- æœ¬åœ°å¼€å‘å’ŒæœåŠ¡å™¨é…ç½®ä¸ä¸€æ ·ï¼Œéƒ¨ç½²æ—¶è¦æ”¹å¾ˆå¤šåœ°æ–¹

**ä¼˜åŒ–åçš„å¥½å¤„**ï¼š
- é…ç½®é›†ä¸­ç®¡ç†ï¼Œä¸€ç›®äº†ç„¶
- ä¸åŒç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢é…ç½®
- æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ï¼‰å•ç‹¬ç®¡ç†

### 2.2 å¤šç¯å¢ƒé…ç½®ç®¡ç†


**ä»€ä¹ˆæ˜¯å¤šç¯å¢ƒï¼Ÿ**

```
å¼€å‘ç¯å¢ƒ(dev)ï¼šä½ åœ¨æœ¬åœ°ç”µè„‘å¼€å‘æ—¶ç”¨çš„
æµ‹è¯•ç¯å¢ƒ(test)ï¼šç»™æµ‹è¯•äººå‘˜æµ‹è¯•ç”¨çš„
ç”Ÿäº§ç¯å¢ƒ(prod)ï¼šçœŸæ­£ä¸Šçº¿ç»™ç”¨æˆ·ç”¨çš„
```

**å®ç°æ–¹å¼ä¸€ï¼šå¤šä¸ªé…ç½®æ–‡ä»¶**

```
resources/
â”œâ”€â”€ application.yml              # ä¸»é…ç½®
â”œâ”€â”€ application-dev.yml          # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ application-test.yml         # æµ‹è¯•ç¯å¢ƒ
â””â”€â”€ application-prod.yml         # ç”Ÿäº§ç¯å¢ƒ
```

**application.ymlï¼ˆä¸»é…ç½®ï¼‰**ï¼š

```yaml
spring:
  profiles:
    active: dev  # æŒ‡å®šä½¿ç”¨å“ªä¸ªç¯å¢ƒï¼Œæ”¹è¿™é‡Œå°±èƒ½åˆ‡æ¢
```

**application-dev.ymlï¼ˆå¼€å‘ç¯å¢ƒé…ç½®ï¼‰**ï¼š

```yaml
server:
  port: 8080

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb
    username: root
    password: 123456

mybatis:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # å¼€å‘ç¯å¢ƒæ‰“å°SQL
```

**application-prod.ymlï¼ˆç”Ÿäº§ç¯å¢ƒé…ç½®ï¼‰**ï¼š

```yaml
server:
  port: 80

spring:
  datasource:
    url: jdbc:mysql://192.168.1.100:3306/mydb
    username: admin
    password: ${DB_PASSWORD}  # ä»ç¯å¢ƒå˜é‡è¯»å–å¯†ç 

mybatis:
  configuration:
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl  # ç”Ÿäº§ç¯å¢ƒç”¨æ—¥å¿—æ¡†æ¶
```

### 2.3 é…ç½®æ–‡ä»¶çš„ç»„ç»‡ç»“æ„


**æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†é…ç½®**ï¼š

```
resources/
â”œâ”€â”€ application.yml                    # ä¸»é…ç½®
â”œâ”€â”€ application-dev.yml               # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ application-prod.yml              # ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ datasource-config.yml        # æ•°æ®æºé…ç½®
â”‚   â”œâ”€â”€ redis-config.yml             # Redisé…ç½®
â”‚   â””â”€â”€ mybatis-config.yml           # MyBatisé…ç½®
```

**ä¸»é…ç½®æ–‡ä»¶å¼•å…¥å…¶ä»–é…ç½®**ï¼š

```yaml
spring:
  profiles:
    active: dev
    include:
      - datasource
      - redis
      - mybatis
```

### 2.4 æ•æ„Ÿä¿¡æ¯çš„å®‰å…¨ç®¡ç†


**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡**

```yaml
spring:
  datasource:
    password: ${DB_PASSWORD}  # ä»ç³»ç»Ÿç¯å¢ƒå˜é‡è¯»å–
```

åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export DB_PASSWORD=your_password
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨é…ç½®ä¸­å¿ƒï¼ˆè¿›é˜¶ï¼‰**

```
åº”ç”¨å¯åŠ¨
   â†“
ä»é…ç½®ä¸­å¿ƒè¯»å–é…ç½®ï¼ˆNacosã€Apolloç­‰ï¼‰
   â†“
åº”ç”¨è¿è¡Œ
```

> ğŸ’¡ **æ–°æ‰‹å»ºè®®**ï¼šåˆšå¼€å§‹å­¦ä¹ æ—¶ï¼Œç”¨ç¯å¢ƒå˜é‡æ–¹å¼å°±å¤Ÿäº†

### 2.5 é…ç½®çš„çƒ­æ›´æ–°


**ä»€ä¹ˆæ˜¯çƒ­æ›´æ–°ï¼Ÿ**
ä¸ç”¨é‡å¯åº”ç”¨ï¼Œä¿®æ”¹é…ç½®åè‡ªåŠ¨ç”Ÿæ•ˆ

**å®ç°æ–¹å¼**ï¼š

```java
@Configuration
@ConfigurationProperties(prefix = "app")
@RefreshScope  // å…³é”®æ³¨è§£ï¼Œæ”¯æŒé…ç½®åˆ·æ–°
public class AppConfig {
    
    private String name;
    private Integer timeout;
    
    // getter/setter...
}
```

**é…ç½®æ–‡ä»¶**ï¼š

```yaml
app:
  name: æˆ‘çš„åº”ç”¨
  timeout: 3000
```

**ä½¿ç”¨é…ç½®**ï¼š

```java
@RestController
public class ConfigController {
    
    @Autowired
    private AppConfig appConfig;
    
    @GetMapping("/config")
    public String getConfig() {
        return appConfig.getName() + " - " + appConfig.getTimeout();
    }
}
```

---

## 3. ğŸ“Š æ€§èƒ½ç›‘æ§è°ƒä¼˜


### 3.1 ä¸ºä»€ä¹ˆè¦åšæ€§èƒ½ç›‘æ§


**å®é™…åœºæ™¯ä¸¾ä¾‹**ï¼š

```
ç”¨æˆ·åé¦ˆï¼šé¡µé¢åŠ è½½å¾ˆæ…¢
ä½†æ˜¯ä½ ä¸çŸ¥é“ï¼š
- æ˜¯æ•°æ®åº“æŸ¥è¯¢æ…¢ï¼Ÿ
- æ˜¯ç½‘ç»œä¼ è¾“æ…¢ï¼Ÿ
- è¿˜æ˜¯ä»£ç é€»è¾‘æœ‰é—®é¢˜ï¼Ÿ

æœ‰äº†ç›‘æ§å°±èƒ½å¿«é€Ÿå®šä½é—®é¢˜ï¼
```

### 3.2 å¸¸ç”¨ç›‘æ§å·¥å…·


**â‘  Spring Boot Actuator - åº”ç”¨å¥åº·æ£€æŸ¥**

**æ·»åŠ ä¾èµ–**ï¼š

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

**é…ç½®ç›‘æ§ç«¯ç‚¹**ï¼š

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics  # å¼€æ”¾çš„ç›‘æ§ç«¯ç‚¹
  endpoint:
    health:
      show-details: always
```

**è®¿é—®ç›‘æ§ä¿¡æ¯**ï¼š

```
å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8080/actuator/health
æ€§èƒ½æŒ‡æ ‡ï¼šhttp://localhost:8080/actuator/metrics
```

**â‘¡ Druidæ•°æ®æºç›‘æ§**

**é…ç½®Druid**ï¼š

```yaml
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      # ç›‘æ§ç»Ÿè®¡
      stat-view-servlet:
        enabled: true
        url-pattern: /druid/*
        login-username: admin
        login-password: 123456
      # SQLç›‘æ§
      filter:
        stat:
          enabled: true
          log-slow-sql: true
          slow-sql-millis: 2000  # è¶…è¿‡2ç§’çš„SQLç®—æ…¢æŸ¥è¯¢
```

**è®¿é—®Druidç›‘æ§é¡µé¢**ï¼š
```
http://localhost:8080/druid
```

å¯ä»¥çœ‹åˆ°ï¼š
- SQLæ‰§è¡Œæ¬¡æ•°
- SQLæ‰§è¡Œæ—¶é—´
- æ…¢SQLåˆ—è¡¨
- è¿æ¥æ± ä½¿ç”¨æƒ…å†µ

### 3.3 SQLæ€§èƒ½ä¼˜åŒ–


**â‘  æ…¢SQLä¼˜åŒ–æ­¥éª¤**

```
1. é€šè¿‡Druidæ‰¾åˆ°æ…¢SQL
   â†“
2. åˆ†æSQLæ‰§è¡Œè®¡åˆ’ï¼ˆEXPLAINï¼‰
   â†“
3. æ·»åŠ ç´¢å¼•æˆ–ä¼˜åŒ–SQL
   â†“
4. éªŒè¯ä¼˜åŒ–æ•ˆæœ
```

**â‘¡ å¸¸è§çš„SQLä¼˜åŒ–æŠ€å·§**

**ä¼˜åŒ–å‰ï¼ˆN+1æŸ¥è¯¢é—®é¢˜ï¼‰**ï¼š

```java
// å…ˆæŸ¥è¯¢æ‰€æœ‰è®¢å•
List<Order> orders = orderMapper.selectAll();
// å¾ªç¯æŸ¥è¯¢æ¯ä¸ªè®¢å•çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆå‘é€Næ¬¡SQLï¼‰
for (Order order : orders) {
    User user = userMapper.selectById(order.getUserId());
    order.setUser(user);
}
```

**ä¼˜åŒ–åï¼ˆä¸€æ¬¡æŸ¥è¯¢ï¼‰**ï¼š

```java
// ä½¿ç”¨è”è¡¨æŸ¥è¯¢ï¼Œä¸€æ¬¡æ€§æŸ¥å‡ºæ‰€æœ‰æ•°æ®
List<Order> orders = orderMapper.selectOrdersWithUser();
```

**MyBatisè”è¡¨æŸ¥è¯¢**ï¼š

```xml
<select id="selectOrdersWithUser" resultMap="OrderWithUserMap">
    SELECT o.*, u.username, u.phone
    FROM t_order o
    LEFT JOIN t_user u ON o.user_id = u.id
</select>

<resultMap id="OrderWithUserMap" type="Order">
    <id property="id" column="id"/>
    <result property="userId" column="user_id"/>
    <association property="user" javaType="User">
        <result property="username" column="username"/>
        <result property="phone" column="phone"/>
    </association>
</resultMap>
```

### 3.4 ç¼“å­˜ä¼˜åŒ–


**ä»€ä¹ˆæ—¶å€™ç”¨ç¼“å­˜ï¼Ÿ**

âœ… **é€‚åˆç”¨ç¼“å­˜çš„åœºæ™¯**ï¼š
- æ•°æ®ä¸ç»å¸¸å˜åŒ–ï¼ˆå¦‚å•†å“åˆ†ç±»ï¼‰
- æŸ¥è¯¢é¢‘ç‡å¾ˆé«˜ï¼ˆå¦‚é¦–é¡µæ•°æ®ï¼‰
- æŸ¥è¯¢æˆæœ¬é«˜ï¼ˆå¦‚å¤æ‚ç»Ÿè®¡ï¼‰

**Spring Cacheä½¿ç”¨**ï¼š

```java
@Service
public class ProductService {
    
    @Autowired
    private ProductMapper productMapper;
    
    // æŸ¥è¯¢ç»“æœä¼šè¢«ç¼“å­˜
    @Cacheable(value = "products", key = "#id")
    public Product getById(Long id) {
        return productMapper.selectById(id);
    }
    
    // æ›´æ–°åæ¸…é™¤ç¼“å­˜
    @CacheEvict(value = "products", key = "#product.id")
    public void update(Product product) {
        productMapper.updateById(product);
    }
}
```

**ç¼“å­˜é…ç½®**ï¼š

```yaml
spring:
  cache:
    type: redis
  redis:
    host: localhost
    port: 6379
```

### 3.5 æ¥å£æ€§èƒ½ç›‘æ§


**è‡ªå®šä¹‰æ¥å£è€—æ—¶ç›‘æ§**ï¼š

```java
@Aspect
@Component
public class PerformanceMonitor {
    
    @Around("execution(* com.example.controller.*.*(..))")
    public Object monitor(ProceedingJoinPoint pjp) throws Throwable {
        long start = System.currentTimeMillis();
        
        Object result = pjp.proceed();
        
        long cost = System.currentTimeMillis() - start;
        
        // è®°å½•æ…¢æ¥å£ï¼ˆè¶…è¿‡1ç§’ï¼‰
        if (cost > 1000) {
            String method = pjp.getSignature().getName();
            System.out.println("æ…¢æ¥å£è­¦å‘Š: " + method + " è€—æ—¶: " + cost + "ms");
        }
        
        return result;
    }
}
```

---

## 4. ğŸš€ é¡¹ç›®éƒ¨ç½²è¿ç»´


### 4.1 é¡¹ç›®æ‰“åŒ…


**â‘  Mavenæ‰“åŒ…å‘½ä»¤**ï¼š

```bash
# è·³è¿‡æµ‹è¯•æ‰“åŒ…
mvn clean package -DskipTests

# æ‰“åŒ…ç»“æœåœ¨targetç›®å½•
target/
â””â”€â”€ myproject-1.0.0.jar
```

**â‘¡ é…ç½®æ‰“åŒ…æ’ä»¶**ï¼š

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <!-- æŒ‡å®šä¸»ç±» -->
                <mainClass>com.example.Application</mainClass>
            </configuration>
        </plugin>
    </plugins>
    <!-- æ‰“åŒ…åçš„æ–‡ä»¶å -->
    <finalName>myproject</finalName>
</build>
```

### 4.2 æœåŠ¡å™¨éƒ¨ç½²æ­¥éª¤


**â‘  ä¸Šä¼ jaråŒ…åˆ°æœåŠ¡å™¨**

```bash
# ä½¿ç”¨scpå‘½ä»¤ä¸Šä¼ 
scp target/myproject.jar root@192.168.1.100:/home/app/
```

**â‘¡ å¯åŠ¨åº”ç”¨**

**æ–¹å¼ä¸€ï¼šç›´æ¥å¯åŠ¨ï¼ˆç®€å•ä½†ä¸æ¨èï¼‰**

```bash
java -jar myproject.jar
# ç¼ºç‚¹ï¼šå…³é—­ç»ˆç«¯å°±åœæ­¢äº†
```

**æ–¹å¼äºŒï¼šåå°å¯åŠ¨ï¼ˆæ¨èï¼‰**

```bash
# åå°è¿è¡Œï¼Œæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶
nohup java -jar myproject.jar > app.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f app.log
```

**æ–¹å¼ä¸‰ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬**

åˆ›å»º`start.sh`è„šæœ¬ï¼š

```bash
#!/bin/bash
APP_NAME=myproject.jar

# åœæ­¢æ—§è¿›ç¨‹
PID=$(ps -ef | grep $APP_NAME | grep -v grep | awk '{print $2}')
if [ -n "$PID" ]; then
    echo "åœæ­¢æ—§è¿›ç¨‹: $PID"
    kill -9 $PID
fi

# å¯åŠ¨æ–°è¿›ç¨‹
echo "å¯åŠ¨åº”ç”¨..."
nohup java -jar $APP_NAME \
    --spring.profiles.active=prod \
    --server.port=8080 \
    > app.log 2>&1 &

echo "åº”ç”¨å¯åŠ¨æˆåŠŸ"
```

ä½¿ç”¨è„šæœ¬ï¼š

```bash
chmod +x start.sh  # æ·»åŠ æ‰§è¡Œæƒé™
./start.sh         # å¯åŠ¨åº”ç”¨
```

### 4.3 Nginxåå‘ä»£ç†é…ç½®


**ä¸ºä»€ä¹ˆè¦ç”¨Nginxï¼Ÿ**

```
æ²¡æœ‰Nginxï¼š
ç”¨æˆ· â†’ http://192.168.1.100:8080/api  (æš´éœ²IPå’Œç«¯å£)

ä½¿ç”¨Nginxï¼š
ç”¨æˆ· â†’ http://www.mysite.com/api  (åŸŸåè®¿é—®ï¼Œæ›´ä¸“ä¸š)
     â†“
   Nginxè½¬å‘
     â†“
   åº”ç”¨æœåŠ¡å™¨(8080ç«¯å£)
```

**Nginxé…ç½®ç¤ºä¾‹**ï¼š

```nginx
server {
    listen 80;
    server_name www.mysite.com;
    
    # å‰ç«¯é™æ€èµ„æº
    location / {
        root /home/web/dist;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
    
    # åç«¯æ¥å£ä»£ç†
    location /api/ {
        proxy_pass http://localhost:8080/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 4.4 å¸¸ç”¨è¿ç»´å‘½ä»¤


**â‘  æŸ¥çœ‹åº”ç”¨è¿›ç¨‹**

```bash
# æŸ¥æ‰¾Javaè¿›ç¨‹
ps -ef | grep java

# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tuln | grep 8080
```

**â‘¡ æŸ¥çœ‹æ—¥å¿—**

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f app.log

# æŸ¥çœ‹æœ€å100è¡Œ
tail -n 100 app.log

# æœç´¢é”™è¯¯æ—¥å¿—
grep "ERROR" app.log
```

**â‘¢ å†…å­˜å’ŒCPUç›‘æ§**

```bash
# æŸ¥çœ‹è¿›ç¨‹èµ„æºå ç”¨
top

# æŸ¥çœ‹Javaè¿›ç¨‹è¯¦ç»†ä¿¡æ¯
jps -l
jmap -heap [è¿›ç¨‹ID]
```

### 4.5 Dockerå®¹å™¨åŒ–éƒ¨ç½²ï¼ˆè¿›é˜¶ï¼‰


**â‘  åˆ›å»ºDockerfile**

```dockerfile
FROM openjdk:8-jdk-alpine
VOLUME /tmp
COPY target/myproject.jar app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
```

**â‘¡ æ„å»ºå’Œè¿è¡Œ**

```bash
# æ„å»ºé•œåƒ
docker build -t myproject:1.0 .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 \
    --name myapp \
    -e SPRING_PROFILES_ACTIVE=prod \
    myproject:1.0

# æŸ¥çœ‹æ—¥å¿—
docker logs -f myapp
```

---

## 5. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 ä¸‰å±‚æ¶æ„æ ¸å¿ƒè¦ç‚¹


```
ğŸ”¸ æ˜ç¡®èŒè´£ï¼šControlleræ”¶è¯·æ±‚ã€Serviceå¤„ç†ä¸šåŠ¡ã€Mapperæ“ä½œæ•°æ®åº“
ğŸ”¸ å±‚æ¬¡è°ƒç”¨ï¼šåªèƒ½ä¸Šå±‚è°ƒä¸‹å±‚ï¼Œä¸èƒ½è·¨å±‚æˆ–å€’ç€è°ƒ
ğŸ”¸ æ•°æ®è½¬æ¢ï¼šç”¨DTOå’ŒVOä¼ é€’æ•°æ®ï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯
ğŸ”¸ äº‹åŠ¡æ§åˆ¶ï¼šåœ¨Serviceå±‚åŠ @Transactionalæ³¨è§£
```

### 5.2 é…ç½®ç®¡ç†æ ¸å¿ƒè¦ç‚¹


```
ğŸ”¸ å¤šç¯å¢ƒé…ç½®ï¼šdev/test/prodåˆ†å¼€é…ç½®ï¼Œä¸€é”®åˆ‡æ¢
ğŸ”¸ é…ç½®åˆ†ç¦»ï¼šæŒ‰æ¨¡å—æ‹†åˆ†é…ç½®æ–‡ä»¶ï¼Œä¾¿äºç®¡ç†
ğŸ”¸ å®‰å…¨ç®¡ç†ï¼šæ•æ„Ÿä¿¡æ¯ç”¨ç¯å¢ƒå˜é‡ï¼Œä¸è¦å†™æ­»åœ¨ä»£ç é‡Œ
ğŸ”¸ é…ç½®å¤ç”¨ï¼šå…¬å…±é…ç½®æŠ½å–åˆ°ä¸»é…ç½®æ–‡ä»¶
```

### 5.3 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒè¦ç‚¹


```
ğŸ”¸ SQLä¼˜åŒ–ï¼šé¿å…N+1æŸ¥è¯¢ï¼Œä½¿ç”¨è¿æ¥æŸ¥è¯¢ä¸€æ¬¡æå®š
ğŸ”¸ ç¼“å­˜ä½¿ç”¨ï¼šé«˜é¢‘ä¸å˜çš„æ•°æ®æ”¾ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›
ğŸ”¸ æ…¢æŸ¥è¯¢ç›‘æ§ï¼šç”¨Druidæ‰¾å‡ºæ…¢SQLï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–
ğŸ”¸ ç´¢å¼•ä¼˜åŒ–ï¼šç»å¸¸æŸ¥è¯¢çš„å­—æ®µè¦åŠ ç´¢å¼•
```

### 5.4 éƒ¨ç½²è¿ç»´æ ¸å¿ƒè¦ç‚¹


```
ğŸ”¸ æ‰“åŒ…è§„èŒƒï¼šä½¿ç”¨Mavenæ‰“å¯æ‰§è¡ŒjaråŒ…
ğŸ”¸ å¯åŠ¨æ–¹å¼ï¼šç”¨nohupåå°è¿è¡Œæˆ–å†™å¯åŠ¨è„šæœ¬
ğŸ”¸ åå‘ä»£ç†ï¼šç”¨Nginxåšä»£ç†ï¼Œéšè—ç«¯å£æå‡å®‰å…¨æ€§
ğŸ”¸ æ—¥å¿—ç®¡ç†ï¼šæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜
```

### 5.5 æ–°æ‰‹é¿å‘æŒ‡å—


**âŒ å¸¸è§é”™è¯¯**ï¼š
- Controlleré‡Œå†™ä¸šåŠ¡é€»è¾‘ â†’ åº”è¯¥æ”¾Service
- Serviceç›´æ¥å†™SQL â†’ åº”è¯¥è°ƒç”¨Mapper
- é…ç½®æ–‡ä»¶å¯†ç æ˜æ–‡ â†’ åº”è¯¥ç”¨ç¯å¢ƒå˜é‡
- éƒ¨ç½²æ—¶å¿˜è®°æ”¹é…ç½® â†’ åº”è¯¥ç”¨å¤šç¯å¢ƒé…ç½®

**âœ… æ­£ç¡®åšæ³•**ï¼š
- ä¸¥æ ¼æŒ‰ä¸‰å±‚æ¶æ„åˆ†å·¥
- æ•æ„Ÿä¿¡æ¯å•ç‹¬ç®¡ç†
- ç”¨å·¥å…·ç›‘æ§æ€§èƒ½
- å†™å¥½éƒ¨ç½²è„šæœ¬ï¼Œé¿å…æ‰‹åŠ¨æ“ä½œå‡ºé”™

> ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šå…ˆæŠŠåŸºç¡€çš„SSMæ•´åˆé¡¹ç›®è·‘é€šï¼Œå†é€æ­¥åŠ å…¥ç›‘æ§ã€ç¼“å­˜ç­‰é«˜çº§ç‰¹æ€§ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œä¸è¦ç€æ€¥ï¼