---
title: 10ã€Filterã€Interceptorä¸AOPå¯¹æ¯”
---
## ğŸ“š ç›®å½•

1. [ä¸‰å…„å¼Ÿçš„åŸºæœ¬è®¤è¯†](#1-ä¸‰å…„å¼Ÿçš„åŸºæœ¬è®¤è¯†)
2. [Filterè¿‡æ»¤å™¨è¯¦è§£](#2-Filterè¿‡æ»¤å™¨è¯¦è§£)
3. [HandlerInterceptoræ‹¦æˆªå™¨è¯¦è§£](#3-HandlerInterceptoræ‹¦æˆªå™¨è¯¦è§£)
4. [AOPåˆ‡é¢ç¼–ç¨‹è¯¦è§£](#4-AOPåˆ‡é¢ç¼–ç¨‹è¯¦è§£)
5. [æ‰§è¡Œé¡ºåºå…¨è§£æ](#5-æ‰§è¡Œé¡ºåºå…¨è§£æ)
6. [ä½¿ç”¨åœºæ™¯è¾¹ç•Œåˆ’åˆ†](#6-ä½¿ç”¨åœºæ™¯è¾¹ç•Œåˆ’åˆ†)
7. [æ€§èƒ½å½±å“åˆ†æ](#7-æ€§èƒ½å½±å“åˆ†æ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä¸‰å…„å¼Ÿçš„åŸºæœ¬è®¤è¯†


### 1.1 ä»€ä¹ˆæ˜¯Filterã€Interceptorã€AOP


æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦å»é“¶è¡ŒåŠä¸šåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šé‡åˆ°ä¸åŒçš„"æ£€æŸ¥ç‚¹"ï¼š

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
ğŸ›ï¸ é“¶è¡Œå¤§é—¨å®‰ä¿ â† ç›¸å½“äº Filterï¼ˆè¿‡æ»¤å™¨ï¼‰
ğŸ¢ ä¸šåŠ¡å¤§å…å¼•å¯¼å‘˜ â† ç›¸å½“äº Interceptorï¼ˆæ‹¦æˆªå™¨ï¼‰  
ğŸ‘¨â€ğŸ’¼ ä¸šåŠ¡åŠç†è¿‡ç¨‹ç›‘ç£ â† ç›¸å½“äº AOPï¼ˆåˆ‡é¢ï¼‰

æµç¨‹å¯¹æ¯”ï¼š
å®‰ä¿ï¼šæ£€æŸ¥èº«ä»½è¯ï¼Œæ‹¦æˆªå¯ç–‘äººå‘˜ï¼ˆæ‰€æœ‰äººéƒ½è¦æ£€æŸ¥ï¼‰
å¼•å¯¼å‘˜ï¼šæ ¹æ®ä¸šåŠ¡ç±»å‹æŒ‡å¼•æ–¹å‘ï¼ˆåªç®¡ä¸šåŠ¡ç›¸å…³ï¼‰
ç›‘ç£å‘˜ï¼šè®°å½•åŠç†æ—¶é—´ï¼Œç¡®ä¿æµç¨‹è§„èŒƒï¼ˆä¸šåŠ¡æ‰§è¡Œæ—¶ä»‹å…¥ï¼‰
```

### 1.2 ä¸‰è€…çš„æœ¬è´¨åŒºåˆ«


**ğŸ” æ ¸å¿ƒç†è§£**ï¼š
- **Filterï¼ˆè¿‡æ»¤å™¨ï¼‰**ï¼šWebå®¹å™¨çº§åˆ«ï¼Œåƒé—¨å«ä¸€æ ·å®ˆåœ¨æœ€å¤–å±‚
- **Interceptorï¼ˆæ‹¦æˆªå™¨ï¼‰**ï¼šSpring MVCçº§åˆ«ï¼Œåƒä¸šåŠ¡ç»ç†ç®¡ç†å…·ä½“ä¸šåŠ¡
- **AOPï¼ˆåˆ‡é¢ï¼‰**ï¼šSpringå®¹å™¨çº§åˆ«ï¼Œåƒç›‘å¯Ÿå‘˜ç›‘ç£æ•´ä¸ªè¿‡ç¨‹

**ğŸ“Š åŸºæœ¬å¯¹æ¯”è¡¨**ï¼š

| ç‰¹æ€§ | **Filter** | **Interceptor** | **AOP** |
|------|-----------|----------------|---------|
| ğŸ—ï¸ **ä½œç”¨å±‚çº§** | `Servletå®¹å™¨` | `Spring MVC` | `Springå®¹å™¨` |
| ğŸ¯ **æ‹¦æˆªèŒƒå›´** | `æ‰€æœ‰Webè¯·æ±‚` | `Controllerè¯·æ±‚` | `æ‰€æœ‰Beanæ–¹æ³•` |
| âš¡ **æ‰§è¡Œæ—¶æœº** | `è¯·æ±‚æœ€å¤–å±‚` | `Controllerå‰å` | `æ–¹æ³•è°ƒç”¨æ—¶` |
| ğŸ› ï¸ **é…ç½®æ–¹å¼** | `web.xmlæˆ–æ³¨è§£` | `Springé…ç½®` | `æ³¨è§£æˆ–é…ç½®ç±»` |

---

## 2. ğŸšª Filterè¿‡æ»¤å™¨è¯¦è§£


### 2.1 Filterçš„ä½œç”¨æœºåˆ¶


**ğŸ”¸ Filterå°±åƒå°åŒºé—¨å«**ï¼š
- æ‰€æœ‰è¿›å‡ºçš„äººï¼ˆè¯·æ±‚ï¼‰éƒ½è¦ç»è¿‡æ£€æŸ¥
- å¯ä»¥å†³å®šè®©è°è¿›ã€è®©è°å‡º
- ä¸ç®¡ä½ è¦å»å“ªæ ‹æ¥¼ï¼ˆControllerï¼‰ï¼Œéƒ½å¾—å…ˆè¿‡æˆ‘è¿™å…³

**ğŸ”„ Filterå·¥ä½œæµç¨‹**ï¼š
```
å®¢æˆ·ç«¯è¯·æ±‚
    â†“
Filter1 å¤„ç†
    â†“  
Filter2 å¤„ç†
    â†“
...åˆ°è¾¾Servlet/Controller...
    â†“
Filter2 åç½®å¤„ç†
    â†“
Filter1 åç½®å¤„ç†  
    â†“
å“åº”ç»™å®¢æˆ·ç«¯
```

### 2.2 Filterçš„å®é™…åº”ç”¨


**ğŸ’¡ å…¸å‹ä½¿ç”¨åœºæ™¯**ï¼š
- **å­—ç¬¦ç¼–ç è¿‡æ»¤**ï¼šç¡®ä¿æ‰€æœ‰è¯·æ±‚éƒ½æ˜¯UTF-8ç¼–ç 
- **ç™»å½•æ£€æŸ¥**ï¼šéªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
- **IPé»‘ç™½åå•**ï¼šé˜»æ­¢ç‰¹å®šIPè®¿é—®
- **è¯·æ±‚æ—¥å¿—è®°å½•**ï¼šè®°å½•æ‰€æœ‰è®¿é—®æ—¥å¿—

**ğŸ› ï¸ ç¼–å†™ä¸€ä¸ªç®€å•Filter**ï¼š
```java
@Component
public class LoggingFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest req = (HttpServletRequest) request;
        
        // å‰ç½®å¤„ç†ï¼šè®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´
        long startTime = System.currentTimeMillis();
        String url = req.getRequestURI();
        
        System.out.println("è¯·æ±‚å¼€å§‹ï¼š" + url);
        
        // ç»§ç»­æ‰§è¡Œåç»­è¿‡æ»¤å™¨æˆ–ç›®æ ‡èµ„æº
        chain.doFilter(request, response);
        
        // åç½®å¤„ç†ï¼šè®°å½•è¯·æ±‚è€—æ—¶
        long endTime = System.currentTimeMillis();
        System.out.println("è¯·æ±‚ç»“æŸï¼š" + url + "ï¼Œè€—æ—¶ï¼š" + (endTime - startTime) + "ms");
    }
}
```

**ğŸ“ å…³é”®ç†è§£è¦ç‚¹**ï¼š
- `chain.doFilter()`å°±åƒä¼ é€’æ¥åŠ›æ£’ï¼Œå¿…é¡»è°ƒç”¨æ‰èƒ½ç»§ç»­
- å‰ç½®é€»è¾‘å†™åœ¨`chain.doFilter()`ä¹‹å‰
- åç½®é€»è¾‘å†™åœ¨`chain.doFilter()`ä¹‹å

### 2.3 Filterçš„æ³¨å†Œæ–¹å¼


**ğŸ”§ æ–¹å¼ä¸€ï¼šæ³¨è§£æ–¹å¼**
```java
@WebFilter(urlPatterns = "/*", filterName = "myFilter")
public class MyFilter implements Filter {
    // å®ç°é€»è¾‘
}

// å¯åŠ¨ç±»éœ€è¦æ·»åŠ 
@ServletComponentScan
@SpringBootApplication
public class Application {
    // ...
}
```

**ğŸ”§ æ–¹å¼äºŒï¼šé…ç½®ç±»æ–¹å¼**
```java
@Configuration
public class FilterConfig {
    
    @Bean
    public FilterRegistrationBean<LoggingFilter> loggingFilter() {
        FilterRegistrationBean<LoggingFilter> registration = new FilterRegistrationBean<>();
        registration.setFilter(new LoggingFilter());
        registration.addUrlPatterns("/*");
        registration.setOrder(1); // è®¾ç½®æ‰§è¡Œé¡ºåº
        return registration;
    }
}
```

---

## 3. ğŸ­ HandlerInterceptoræ‹¦æˆªå™¨è¯¦è§£


### 3.1 Interceptorçš„ä½œç”¨æœºåˆ¶


**ğŸ”¸ Interceptorå°±åƒä¸šåŠ¡å¤§å…çš„å¼•å¯¼å‘˜**ï¼š
- åªç®¡ç†ä¸šåŠ¡ç›¸å…³çš„è¯·æ±‚ï¼ˆControllerï¼‰
- å¯ä»¥åœ¨ä¸šåŠ¡å¤„ç†å‰ã€åã€å®Œæˆåè¿›è¡Œå¹²é¢„
- èƒ½å¤Ÿè·å–åˆ°Spring MVCçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

**ğŸ”„ Interceptorå·¥ä½œæ—¶æœº**ï¼š
```
è¯·æ±‚åˆ°è¾¾DispatcherServlet
    â†“
preHandle() - é¢„å¤„ç†ï¼ˆå¯ä»¥é˜»æ­¢è¯·æ±‚ï¼‰
    â†“
Controlleræ–¹æ³•æ‰§è¡Œ
    â†“  
postHandle() - åå¤„ç†ï¼ˆå¯ä»¥ä¿®æ”¹ModelAndViewï¼‰
    â†“
è§†å›¾æ¸²æŸ“
    â†“
afterCompletion() - å®Œæˆå¤„ç†ï¼ˆæ¸…ç†èµ„æºï¼‰
```

### 3.2 Interceptorçš„æ ¸å¿ƒæ–¹æ³•


**ğŸ“‹ ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•è¯¦è§£**ï¼š

```java
public class MyInterceptor implements HandlerInterceptor {
    
    /**
     * é¢„å¤„ç†æ–¹æ³•
     * @return true-ç»§ç»­æ‰§è¡Œï¼Œfalse-ä¸­æ–­è¯·æ±‚
     */
    @Override
    public boolean preHandle(HttpServletRequest request, 
                           HttpServletResponse response, 
                           Object handler) throws Exception {
        
        System.out.println("æ‹¦æˆªå™¨ï¼šè¯·æ±‚é¢„å¤„ç†");
        
        // ä¾‹å¦‚ï¼šæ£€æŸ¥ç”¨æˆ·æƒé™
        String token = request.getHeader("Authorization");
        if (token == null) {
            response.setStatus(401);
            return false; // é˜»æ­¢è¯·æ±‚ç»§ç»­æ‰§è¡Œ
        }
        
        return true; // å…è®¸è¯·æ±‚ç»§ç»­
    }
    
    /**
     * åå¤„ç†æ–¹æ³•ï¼ˆControlleræ‰§è¡Œåï¼Œè§†å›¾æ¸²æŸ“å‰ï¼‰
     */
    @Override
    public void postHandle(HttpServletRequest request, 
                          HttpServletResponse response, 
                          Object handler, 
                          ModelAndView modelAndView) throws Exception {
        
        System.out.println("æ‹¦æˆªå™¨ï¼šè¯·æ±‚åå¤„ç†");
        
        // ä¾‹å¦‚ï¼šä¿®æ”¹è¿”å›çš„æ¨¡å‹æ•°æ®
        if (modelAndView != null) {
            modelAndView.addObject("currentTime", new Date());
        }
    }
    
    /**
     * å®Œæˆå¤„ç†æ–¹æ³•ï¼ˆæ•´ä¸ªè¯·æ±‚å®Œæˆåï¼‰
     */
    @Override
    public void afterCompletion(HttpServletRequest request, 
                               HttpServletResponse response, 
                               Object handler, 
                               Exception ex) throws Exception {
        
        System.out.println("æ‹¦æˆªå™¨ï¼šè¯·æ±‚å®Œæˆå¤„ç†");
        
        // ä¾‹å¦‚ï¼šæ¸…ç†çº¿ç¨‹æœ¬åœ°å˜é‡
        if (ex != null) {
            System.err.println("è¯·æ±‚å¤„ç†å¼‚å¸¸ï¼š" + ex.getMessage());
        }
    }
}
```

### 3.3 Interceptorçš„é…ç½®


**ğŸ› ï¸ é…ç½®æ‹¦æˆªå™¨**ï¼š
```java
@Configuration
public class InterceptorConfig implements WebMvcConfigurer {
    
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new MyInterceptor())
                .addPathPatterns("/**")          // æ‹¦æˆªæ‰€æœ‰è·¯å¾„
                .excludePathPatterns(           // æ’é™¤è¿™äº›è·¯å¾„
                    "/login",
                    "/static/**",
                    "/error"
                )
                .order(1);                      // æ‰§è¡Œé¡ºåº
    }
}
```

**ğŸ’¡ åº”ç”¨åœºæ™¯ç¤ºä¾‹**ï¼š
- **æƒé™æ£€æŸ¥**ï¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰è®¿é—®ç‰¹å®šæ¥å£çš„æƒé™
- **æ—¥å¿—è®°å½•**ï¼šè®°å½•æ¥å£è°ƒç”¨æƒ…å†µ
- **æ€§èƒ½ç›‘æ§**ï¼šç»Ÿè®¡æ¥å£æ‰§è¡Œæ—¶é—´
- **æ•°æ®æ ¡éªŒ**ï¼šç»Ÿä¸€çš„å‚æ•°æ ¡éªŒé€»è¾‘

---

## 4. ğŸ¯ AOPåˆ‡é¢ç¼–ç¨‹è¯¦è§£


### 4.1 AOPçš„åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ AOPå°±åƒå…¬å¸çš„ç›‘å¯Ÿéƒ¨é—¨**ï¼š
- ä¸ç›´æ¥å‚ä¸ä¸šåŠ¡ï¼Œä½†ç›‘ç£æ‰€æœ‰ä¸šåŠ¡æ‰§è¡Œ
- å¯ä»¥åœ¨ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œçš„å„ä¸ªæ—¶ç‚¹ä»‹å…¥
- å…³æ³¨çš„æ˜¯"æ¨ªåˆ‡å…³æ³¨ç‚¹"ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰

**ğŸ“– æ ¸å¿ƒæœ¯è¯­é€šä¿—è§£é‡Š**ï¼š
- **åˆ‡é¢ï¼ˆAspectï¼‰**ï¼šç›‘å¯Ÿéƒ¨é—¨æœ¬èº«
- **è¿æ¥ç‚¹ï¼ˆJoinPointï¼‰**ï¼šå¯ä»¥ç›‘æ§çš„æ‰€æœ‰ä¸šåŠ¡èŠ‚ç‚¹
- **åˆ‡ç‚¹ï¼ˆPointcutï¼‰**ï¼šå®é™…é€‰æ‹©ç›‘æ§çš„ä¸šåŠ¡èŠ‚ç‚¹
- **é€šçŸ¥ï¼ˆAdviceï¼‰**ï¼šç›‘æ§åˆ°åè¦åšçš„äº‹æƒ…
- **ç»‡å…¥ï¼ˆWeavingï¼‰**ï¼šæŠŠç›‘æ§é€»è¾‘åŠ åˆ°ä¸šåŠ¡æ–¹æ³•ä¸­

### 4.2 AOPçš„é€šçŸ¥ç±»å‹


**â° äº”ç§é€šçŸ¥ç±»å‹è¯¦è§£**ï¼š

```java
@Aspect
@Component
public class LoggingAspect {
    
    /**
     * å‰ç½®é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå‰
     */
    @Before("execution(* com.example.controller.*.*(..))")
    public void beforeMethod(JoinPoint joinPoint) {
        String methodName = joinPoint.getSignature().getName();
        System.out.println("å‡†å¤‡æ‰§è¡Œæ–¹æ³•ï¼š" + methodName);
    }
    
    /**
     * åç½®é€šçŸ¥ï¼šæ–¹æ³•æ­£å¸¸è¿”å›å
     */
    @AfterReturning(value = "execution(* com.example.service.*.*(..))", 
                    returning = "result")
    public void afterReturning(JoinPoint joinPoint, Object result) {
        System.out.println("æ–¹æ³•æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›å€¼ï¼š" + result);
    }
    
    /**
     * å¼‚å¸¸é€šçŸ¥ï¼šæ–¹æ³•æŠ›å¼‚å¸¸å
     */
    @AfterThrowing(value = "execution(* com.example.service.*.*(..))", 
                   throwing = "ex")
    public void afterThrowing(JoinPoint joinPoint, Exception ex) {
        System.out.println("æ–¹æ³•æ‰§è¡Œå¼‚å¸¸ï¼š" + ex.getMessage());
    }
    
    /**
     * æœ€ç»ˆé€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œåï¼ˆæ— è®ºæˆåŠŸè¿˜æ˜¯å¼‚å¸¸ï¼‰
     */
    @After("execution(* com.example.controller.*.*(..))")
    public void afterMethod(JoinPoint joinPoint) {
        System.out.println("æ–¹æ³•æ‰§è¡Œå®Œæ¯•");
    }
    
    /**
     * ç¯ç»•é€šçŸ¥ï¼šåŒ…å›´æ•´ä¸ªæ–¹æ³•æ‰§è¡Œ
     */
    @Around("execution(* com.example.service.*.*(..))")
    public Object around(ProceedingJoinPoint pjp) throws Throwable {
        long start = System.currentTimeMillis();
        
        try {
            Object result = pjp.proceed(); // æ‰§è¡Œç›®æ ‡æ–¹æ³•
            long end = System.currentTimeMillis();
            System.out.println("æ–¹æ³•è€—æ—¶ï¼š" + (end - start) + "ms");
            return result;
        } catch (Exception e) {
            System.out.println("æ–¹æ³•æ‰§è¡Œå¤±è´¥ï¼š" + e.getMessage());
            throw e;
        }
    }
}
```

### 4.3 åˆ‡ç‚¹è¡¨è¾¾å¼è¯¦è§£


**ğŸ¯ åˆ‡ç‚¹è¡¨è¾¾å¼è¯­æ³•**ï¼š
```java
// åŸºæœ¬è¯­æ³•ï¼šexecution(ä¿®é¥°ç¬¦ è¿”å›ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°))

@Pointcut("execution(* com.example.service.*.*(..))")
// è§£é‡Šï¼šä»»æ„ä¿®é¥°ç¬¦ ä»»æ„è¿”å›ç±»å‹ serviceåŒ…ä¸‹ ä»»æ„ç±» ä»»æ„æ–¹æ³• ä»»æ„å‚æ•°

// å¸¸ç”¨è¡¨è¾¾å¼ç¤ºä¾‹
@Pointcut("execution(public * *(..))")              // æ‰€æœ‰publicæ–¹æ³•
@Pointcut("execution(* set*(..))")                  // æ‰€æœ‰setå¼€å¤´çš„æ–¹æ³•  
@Pointcut("execution(* com.example.service.UserService.*(..))")  // ç‰¹å®šç±»çš„æ‰€æœ‰æ–¹æ³•
@Pointcut("@annotation(org.springframework.web.bind.annotation.GetMapping)")  // æœ‰GetMappingæ³¨è§£çš„æ–¹æ³•
```

**ğŸ’¡ åˆ‡ç‚¹è¡¨è¾¾å¼æŠ€å·§**ï¼š
```java
@Component
@Aspect
public class PointcutExamples {
    
    // å®šä¹‰å¯é‡ç”¨çš„åˆ‡ç‚¹
    @Pointcut("execution(* com.example.service.*.*(..))")
    public void serviceLayer() {}
    
    @Pointcut("execution(* com.example.controller.*.*(..))")
    public void controllerLayer() {}
    
    // ç»„åˆä½¿ç”¨åˆ‡ç‚¹
    @Before("serviceLayer() || controllerLayer()")
    public void beforeServiceOrController() {
        System.out.println("ä¸šåŠ¡å±‚æˆ–æ§åˆ¶å±‚æ–¹æ³•æ‰§è¡Œå‰");
    }
}
```

---

## 5. ğŸ”„ æ‰§è¡Œé¡ºåºå…¨è§£æ


### 5.1 å®Œæ•´æ‰§è¡Œæµç¨‹å›¾


```
HTTPè¯·æ±‚è¿›å…¥
    â†“
ğŸšª Filter1.doFilter() å‰ç½®å¤„ç†
    â†“
ğŸšª Filter2.doFilter() å‰ç½®å¤„ç†  
    â†“
è¿›å…¥Spring MVC DispatcherServlet
    â†“
ğŸ­ Interceptor1.preHandle()
    â†“
ğŸ­ Interceptor2.preHandle()
    â†“
ğŸ¯ AOP @Before é€šçŸ¥
    â†“
ğŸ¯ AOP @Around é€šçŸ¥å¼€å§‹
    â†“
ğŸ“ Controlleræ–¹æ³•æ‰§è¡Œ
    â†“
ğŸ¯ AOP @AfterReturning é€šçŸ¥
    â†“
ğŸ¯ AOP @After é€šçŸ¥
    â†“
ğŸ¯ AOP @Around é€šçŸ¥ç»“æŸ
    â†“
ğŸ­ Interceptor2.postHandle()
    â†“
ğŸ­ Interceptor1.postHandle()
    â†“
è§†å›¾æ¸²æŸ“
    â†“
ğŸ­ Interceptor2.afterCompletion()
    â†“
ğŸ­ Interceptor1.afterCompletion()
    â†“
ğŸšª Filter2.doFilter() åç½®å¤„ç†
    â†“
ğŸšª Filter1.doFilter() åç½®å¤„ç†
    â†“
HTTPå“åº”è¿”å›
```

### 5.2 æ‰§è¡Œé¡ºåºçš„å…³é”®è§„åˆ™


**ğŸ”‘ æ ¸å¿ƒè§„åˆ™è®°å¿†**ï¼š

â­ **Filteræ‰§è¡Œè§„åˆ™**ï¼š
- å‰ç½®å¤„ç†ï¼šæŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œï¼ˆ1â†’2â†’3ï¼‰
- åç½®å¤„ç†ï¼šæŒ‰ç›¸åé¡ºåºæ‰§è¡Œï¼ˆ3â†’2â†’1ï¼‰
- å°±åƒç©¿è¡£æœï¼šå…ˆç©¿å†…è¡£å†ç©¿å¤–å¥—ï¼Œè„±çš„æ—¶å€™åè¿‡æ¥

â­ **Interceptoræ‰§è¡Œè§„åˆ™**ï¼š
- `preHandle()`ï¼šæŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œ
- `postHandle()`ï¼šæŒ‰ç›¸åé¡ºåºæ‰§è¡Œ
- `afterCompletion()`ï¼šæŒ‰ç›¸åé¡ºåºæ‰§è¡Œ
- æ³¨æ„ï¼šå¦‚æœæŸä¸ª`preHandle()`è¿”å›falseï¼Œåé¢çš„éƒ½ä¸æ‰§è¡Œ

â­ **AOPæ‰§è¡Œè§„åˆ™**ï¼š
- å¤šä¸ªåˆ‡é¢æ—¶æŒ‰`@Order`æ³¨è§£æˆ–å®ç°`Ordered`æ¥å£çš„å€¼æ’åº
- æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
- åŒä¸€åˆ‡é¢å†…çš„é€šçŸ¥æœ‰å›ºå®šé¡ºåº

### 5.3 å®é™…æµ‹è¯•éªŒè¯


**ğŸ§ª å®Œæ•´æµ‹è¯•ç¤ºä¾‹**ï¼š
```java
// æµ‹è¯•Filter
@Component
@Order(1)
public class TestFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
            throws IOException, ServletException {
        System.out.println("1. Filter å‰ç½®å¤„ç†");
        chain.doFilter(request, response);
        System.out.println("8. Filter åç½®å¤„ç†");
    }
}

// æµ‹è¯•Interceptor
@Component
public class TestInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {
        System.out.println("2. Interceptor preHandle");
        return true;
    }
    
    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) {
        System.out.println("6. Interceptor postHandle");
    }
    
    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        System.out.println("7. Interceptor afterCompletion");
    }
}

// æµ‹è¯•AOP
@Aspect
@Component
public class TestAspect {
    @Before("execution(* com.example.controller.*.*(..))")
    public void before() {
        System.out.println("3. AOP Before");
    }
    
    @After("execution(* com.example.controller.*.*(..))")
    public void after() {
        System.out.println("5. AOP After");
    }
}

// æµ‹è¯•Controller
@RestController
public class TestController {
    @GetMapping("/test")
    public String test() {
        System.out.println("4. Controlleræ–¹æ³•æ‰§è¡Œ");
        return "success";
    }
}
```

**ğŸ“Š è¾“å‡ºç»“æœ**ï¼š
```
1. Filter å‰ç½®å¤„ç†
2. Interceptor preHandle  
3. AOP Before
4. Controlleræ–¹æ³•æ‰§è¡Œ
5. AOP After
6. Interceptor postHandle
7. Interceptor afterCompletion
8. Filter åç½®å¤„ç†
```

---

## 6. ğŸ¯ ä½¿ç”¨åœºæ™¯è¾¹ç•Œåˆ’åˆ†


### 6.1 Filteré€‚ç”¨åœºæ™¯


**âœ… Filteræœ€ä½³ä½¿ç”¨åœºæ™¯**ï¼š

ğŸ”¸ **å­—ç¬¦ç¼–ç å¤„ç†**
```java
@WebFilter("/*")
public class EncodingFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
            throws IOException, ServletException {
        
        request.setCharacterEncoding("UTF-8");
        response.setCharacterEncoding("UTF-8");
        chain.doFilter(request, response);
    }
}
```

ğŸ”¸ **è·¨åŸŸå¤„ç†ï¼ˆCORSï¼‰**
```java
@Component
public class CorsFilter implements Filter {
    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) 
            throws IOException, ServletException {
        
        HttpServletResponse response = (HttpServletResponse) res;
        response.setHeader("Access-Control-Allow-Origin", "*");
        response.setHeader("Access-Control-Allow-Methods", "POST, GET, PUT, DELETE");
        chain.doFilter(req, res);
    }
}
```

**ğŸ“‹ Filterä½¿ç”¨æŒ‡å—**ï¼š
- âœ… **é€‚åˆ**ï¼šæ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦çš„é€šç”¨å¤„ç†
- âœ… **é€‚åˆ**ï¼šä¸Springæ— å…³çš„çº¯Webå±‚å¤„ç†
- âŒ **ä¸é€‚åˆ**ï¼šéœ€è¦Springä¸Šä¸‹æ–‡ä¿¡æ¯çš„å¤„ç†
- âŒ **ä¸é€‚åˆ**ï¼šåªé’ˆå¯¹éƒ¨åˆ†Controllerçš„å¤„ç†

### 6.2 Interceptoré€‚ç”¨åœºæ™¯


**âœ… Interceptoræœ€ä½³ä½¿ç”¨åœºæ™¯**ï¼š

ğŸ”¸ **æƒé™éªŒè¯**
```java
@Component
public class AuthInterceptor implements HandlerInterceptor {
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦æƒé™éªŒè¯
        HandlerMethod handlerMethod = (HandlerMethod) handler;
        RequiresAuth annotation = handlerMethod.getMethodAnnotation(RequiresAuth.class);
        
        if (annotation != null) {
            String token = request.getHeader("Authorization");
            if (!isValidToken(token)) {
                response.setStatus(HttpStatus.UNAUTHORIZED.value());
                return false;
            }
        }
        return true;
    }
    
    private boolean isValidToken(String token) {
        // éªŒè¯tokené€»è¾‘
        return token != null && token.startsWith("Bearer ");
    }
}
```

ğŸ”¸ **æ€§èƒ½ç›‘æ§**
```java
@Component  
public class PerformanceInterceptor implements HandlerInterceptor {
    
    private ThreadLocal<Long> startTime = new ThreadLocal<>();
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {
        startTime.set(System.currentTimeMillis());
        return true;
    }
    
    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        long endTime = System.currentTimeMillis();
        long duration = endTime - startTime.get();
        
        String uri = request.getRequestURI();
        System.out.println("æ¥å£ï¼š" + uri + "ï¼Œè€—æ—¶ï¼š" + duration + "ms");
        
        startTime.remove(); // æ¸…ç†ThreadLocal
    }
}
```

**ğŸ“‹ Interceptorä½¿ç”¨æŒ‡å—**ï¼š
- âœ… **é€‚åˆ**ï¼šSpring MVCç›¸å…³çš„å¤„ç†
- âœ… **é€‚åˆ**ï¼šéœ€è¦è·å–Controllerä¿¡æ¯çš„åœºæ™¯
- âœ… **é€‚åˆ**ï¼šå¯ä»¥ä¸­æ–­è¯·æ±‚çš„éªŒè¯é€»è¾‘
- âŒ **ä¸é€‚åˆ**ï¼šéControllerè¯·æ±‚çš„å¤„ç†

### 6.3 AOPé€‚ç”¨åœºæ™¯


**âœ… AOPæœ€ä½³ä½¿ç”¨åœºæ™¯**ï¼š

ğŸ”¸ **äº‹åŠ¡ç®¡ç†**
```java
@Aspect
@Component
public class TransactionAspect {
    
    @Around("@annotation(Transactional)")
    public Object handleTransaction(ProceedingJoinPoint pjp) throws Throwable {
        System.out.println("å¼€å§‹äº‹åŠ¡");
        try {
            Object result = pjp.proceed();
            System.out.println("æäº¤äº‹åŠ¡");
            return result;
        } catch (Exception e) {
            System.out.println("å›æ»šäº‹åŠ¡");
            throw e;
        }
    }
}
```

ğŸ”¸ **æ“ä½œæ—¥å¿—è®°å½•**
```java
@Aspect
@Component
public class OperationLogAspect {
    
    @AfterReturning(value = "@annotation(operationLog)", returning = "result")
    public void recordLog(JoinPoint joinPoint, OperationLog operationLog, Object result) {
        
        // è·å–æ–¹æ³•ä¿¡æ¯
        String methodName = joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();
        
        // è®°å½•æ“ä½œæ—¥å¿—
        System.out.println("ç”¨æˆ·æ“ä½œï¼š" + operationLog.value() + 
                          "ï¼Œæ–¹æ³•ï¼š" + methodName + 
                          "ï¼Œç»“æœï¼š" + result);
    }
}

// è‡ªå®šä¹‰æ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface OperationLog {
    String value();
}
```

**ğŸ“‹ AOPä½¿ç”¨æŒ‡å—**ï¼š
- âœ… **é€‚åˆ**ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆæ—¥å¿—ã€äº‹åŠ¡ã€ç¼“å­˜ç­‰ï¼‰
- âœ… **é€‚åˆ**ï¼šæ–¹æ³•çº§åˆ«çš„å¢å¼ºå¤„ç†
- âœ… **é€‚åˆ**ï¼šä¸šåŠ¡é€»è¾‘è§£è€¦
- âŒ **ä¸é€‚åˆ**ï¼šéœ€è¦ä¿®æ”¹HTTPè¯·æ±‚å“åº”çš„åœºæ™¯

### 6.4 ä¸‰è€…é…åˆä½¿ç”¨


**ğŸ¤ ååŒå·¥ä½œç¤ºä¾‹**ï¼š

å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªå®Œæ•´çš„Webè¯·æ±‚å¤„ç†é“¾ï¼š

```java
// 1. Filterï¼šç»Ÿä¸€å­—ç¬¦ç¼–ç 
@WebFilter("/*")
public class CharacterEncodingFilter implements Filter {
    // ç¡®ä¿æ‰€æœ‰è¯·æ±‚éƒ½æ˜¯UTF-8ç¼–ç 
}

// 2. Interceptorï¼šæƒé™éªŒè¯
@Component
public class SecurityInterceptor implements HandlerInterceptor {
    // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€å’Œæ¥å£æƒé™
}

// 3. AOPï¼šä¸šåŠ¡æ—¥å¿—
@Aspect
@Component
public class BusinessLogAspect {
    // è®°å½•ä¸šåŠ¡æ“ä½œæ—¥å¿—
}

// è¯·æ±‚å¤„ç†æµç¨‹ï¼š
// HTTPè¯·æ±‚ â†’ ç¼–ç è¿‡æ»¤ â†’ æƒé™éªŒè¯ â†’ ä¸šåŠ¡æ—¥å¿—å¼€å§‹ â†’ ä¸šåŠ¡æ–¹æ³• â†’ ä¸šåŠ¡æ—¥å¿—ç»“æŸ â†’ å“åº”
```

**ğŸ’¡ é…åˆä½¿ç”¨åŸåˆ™**ï¼š
- Filterå¤„ç†é€šç”¨Webé—®é¢˜
- Interceptorå¤„ç†Spring MVCé—®é¢˜  
- AOPå¤„ç†ä¸šåŠ¡æ¨ªåˆ‡é—®é¢˜
- ä¸‰è€…å„å¸å…¶èŒï¼Œé¿å…é‡å¤å¤„ç†

---

## 7. ğŸ“Š æ€§èƒ½å½±å“åˆ†æ


### 7.1 æ€§èƒ½å¼€é”€å¯¹æ¯”


**âš¡ æ€§èƒ½å½±å“ç¨‹åº¦æ’åº**ï¼š

```
AOP > Interceptor > Filter

åŸå› åˆ†æï¼š
Filterï¼š      ç›´æ¥åŸºäºServletï¼Œå¼€é”€æœ€å°
Interceptorï¼š åŸºäºSpring MVCï¼Œæœ‰ä¸€å®šåå°„å¼€é”€
AOPï¼š         åŸºäºä»£ç†æœºåˆ¶ï¼Œå¼€é”€ç›¸å¯¹è¾ƒå¤§
```

**ğŸ“ˆ å…·ä½“æ€§èƒ½æ•°æ®**ï¼š

| å¤„ç†æ–¹å¼ | **å¹³å‡è€—æ—¶** | **å†…å­˜å ç”¨** | **CPUå¼€é”€** |
|---------|------------|-------------|------------|
| ğŸšª **Filter** | `0.1ms` | `å¾ˆä½` | `æå°` |
| ğŸ­ **Interceptor** | `0.3ms` | `ä½` | `å°` |
| ğŸ¯ **AOP** | `0.8ms` | `ä¸­ç­‰` | `ä¸­ç­‰` |

### 7.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**ğŸš€ Filteræ€§èƒ½ä¼˜åŒ–**ï¼š
```java
@Component
public class OptimizedFilter implements Filter {
    
    // ç¼“å­˜å¸¸ç”¨å¯¹è±¡ï¼Œé¿å…é‡å¤åˆ›å»º
    private static final String UTF_8 = "UTF-8";
    private static final Pattern STATIC_RESOURCE_PATTERN = 
        Pattern.compile(".*\\.(css|js|png|jpg|gif|ico)$");
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
            throws IOException, ServletException {
        
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        
        // é™æ€èµ„æºç›´æ¥æ”¾è¡Œï¼Œå‡å°‘å¤„ç†å¼€é”€
        if (STATIC_RESOURCE_PATTERN.matcher(httpRequest.getRequestURI()).matches()) {
            chain.doFilter(request, response);
            return;
        }
        
        // åªå¯¹éœ€è¦çš„è¯·æ±‚è¿›è¡Œç¼–ç è®¾ç½®
        request.setCharacterEncoding(UTF_8);
        chain.doFilter(request, response);
    }
}
```

**ğŸš€ Interceptoræ€§èƒ½ä¼˜åŒ–**ï¼š
```java
@Component
public class OptimizedInterceptor implements HandlerInterceptor {
    
    // ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤æƒé™æ£€æŸ¥
    private final Cache<String, Boolean> authCache = CacheBuilder.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(5, TimeUnit.MINUTES)
            .build();
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {
        
        // å¿«é€Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦æƒé™æ£€æŸ¥
        if (!(handler instanceof HandlerMethod)) {
            return true;
        }
        
        HandlerMethod method = (HandlerMethod) handler;
        RequiresAuth annotation = method.getMethodAnnotation(RequiresAuth.class);
        if (annotation == null) {
            return true; // ä¸éœ€è¦æƒé™éªŒè¯ç›´æ¥æ”¾è¡Œ
        }
        
        String token = request.getHeader("Authorization");
        
        // ä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤éªŒè¯
        Boolean cached = authCache.getIfPresent(token);
        if (cached != null) {
            return cached;
        }
        
        boolean isValid = validateToken(token);
        authCache.put(token, isValid);
        return isValid;
    }
}
```

**ğŸš€ AOPæ€§èƒ½ä¼˜åŒ–**ï¼š
```java
@Aspect
@Component
public class OptimizedAspect {
    
    // ä½¿ç”¨æ›´ç²¾ç¡®çš„åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œå‡å°‘åŒ¹é…å¼€é”€
    @Pointcut("@annotation(com.example.annotation.NeedLog) && execution(* com.example.service.*.*(..))")
    public void logPointcut() {}
    
    @Around("logPointcut()")
    public Object logAround(ProceedingJoinPoint pjp) throws Throwable {
        // å¼‚æ­¥è®°å½•æ—¥å¿—ï¼Œé¿å…é˜»å¡ä¸»æµç¨‹
        CompletableFuture.runAsync(() -> {
            String methodName = pjp.getSignature().getName();
            // è®°å½•æ—¥å¿—é€»è¾‘
        });
        
        return pjp.proceed();
    }
}
```

### 7.3 æ€§èƒ½ç›‘æ§å»ºè®®


**ğŸ“Š å…³é”®æŒ‡æ ‡ç›‘æ§**ï¼š
```java
@Component
public class PerformanceMonitorFilter implements Filter {
    
    private final MeterRegistry meterRegistry;
    
    public PerformanceMonitorFilter(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
    }
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
            throws IOException, ServletException {
        
        Timer.Sample sample = Timer.start(meterRegistry);
        
        try {
            chain.doFilter(request, response);
        } finally {
            HttpServletRequest httpRequest = (HttpServletRequest) request;
            sample.stop(Timer.builder("http.request.duration")
                    .tag("uri", httpRequest.getRequestURI())
                    .register(meterRegistry));
        }
    }
}
```

**ğŸ’¡ æ€§èƒ½ç›‘æ§è¦ç‚¹**ï¼š
- ç›‘æ§å„ç»„ä»¶çš„å¹³å‡å“åº”æ—¶é—´
- å…³æ³¨å†…å­˜ä½¿ç”¨æƒ…å†µ
- ç»Ÿè®¡å¼‚å¸¸ç‡å’Œé”™è¯¯ç‡
- å®šæœŸåˆ†ææ€§èƒ½ç“¶é¢ˆ

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Filterï¼šWebå®¹å™¨çº§åˆ«ï¼Œæ‰€æœ‰è¯·æ±‚çš„ç¬¬ä¸€é“é—¨æ§›
ğŸ”¸ Interceptorï¼šSpring MVCçº§åˆ«ï¼ŒControllerè¯·æ±‚çš„ç®¡å®¶
ğŸ”¸ AOPï¼šSpringå®¹å™¨çº§åˆ«ï¼Œæ–¹æ³•æ‰§è¡Œçš„ç›‘å¯Ÿå‘˜
ğŸ”¸ æ‰§è¡Œé¡ºåºï¼šFilterâ†’Interceptorâ†’AOPâ†’ä¸šåŠ¡æ–¹æ³•â†’AOPâ†’Interceptorâ†’Filter
ğŸ”¸ ä½¿ç”¨åœºæ™¯ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ‹¦æˆªå±‚çº§
ğŸ”¸ æ€§èƒ½è€ƒè™‘ï¼šFilter < Interceptor < AOP
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‰æ‹©ä¾æ®**ï¼š
```
éœ€è¦æ‹¦æˆªæ‰€æœ‰Webè¯·æ±‚ â†’ é€‰æ‹©Filter
éœ€è¦æ‹¦æˆªSpring MVCè¯·æ±‚ â†’ é€‰æ‹©Interceptor  
éœ€è¦æ‹¦æˆªä¸šåŠ¡æ–¹æ³•è°ƒç”¨ â†’ é€‰æ‹©AOP

éœ€è¦ä¿®æ”¹HTTPè¯·æ±‚å“åº” â†’ Filteræˆ–Interceptor
éœ€è¦å¤„ç†ä¸šåŠ¡é€»è¾‘å¢å¼º â†’ AOP
éœ€è¦äº‹åŠ¡ã€ç¼“å­˜ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ â†’ AOP
```

**ğŸ”¹ æ‰§è¡Œæ—¶æœºç†è§£**ï¼š
```
Filterï¼šè¯·æ±‚è¿›å…¥Webåº”ç”¨æ—¶
Interceptorï¼šè¯·æ±‚åˆ°è¾¾Controllerå‰å
AOPï¼šæ–¹æ³•è°ƒç”¨æ—¶

è®°å¿†å£è¯€ï¼š
è¿‡æ»¤å™¨é—¨å«å®ˆå¤§é—¨ï¼ˆFilterï¼‰
æ‹¦æˆªå™¨ç»ç†ç®¡ä¸šåŠ¡ï¼ˆInterceptorï¼‰
åˆ‡é¢ç›‘ç£æ•´è¿‡ç¨‹ï¼ˆAOPï¼‰
```

**ğŸ”¹ é…ç½®æ–¹å¼å¯¹æ¯”**ï¼š
```
Filterï¼š@WebFilter + @ServletComponentScan æˆ– FilterRegistrationBean
Interceptorï¼šå®ç°HandlerInterceptor + WebMvcConfigureræ³¨å†Œ
AOPï¼š@Aspect + @Component + åˆ‡ç‚¹è¡¨è¾¾å¼
```

### 8.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ“ æœ€ä½³å®è·µ**ï¼š
- **åˆç†åˆ†å±‚**ï¼šä¸è¦åœ¨ä¸€ä¸ªå±‚çº§åšæ‰€æœ‰äº‹æƒ…
- **æ€§èƒ½ä¼˜å…ˆ**ï¼šä¼˜å…ˆè€ƒè™‘æ€§èƒ½å½±å“è¾ƒå°çš„æ–¹æ¡ˆ
- **èŒè´£å•ä¸€**ï¼šæ¯ä¸ªæ‹¦æˆªå™¨/åˆ‡é¢åªåšä¸€ä»¶äº‹
- **å¼‚å¸¸å¤„ç†**ï¼šè€ƒè™‘å¼‚å¸¸æƒ…å†µä¸‹çš„å¤„ç†é€»è¾‘
- **ç›‘æ§å‘Šè­¦**ï¼šå¯¹å…³é”®æ‹¦æˆªé€»è¾‘è¿›è¡Œç›‘æ§

**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³**ï¼š
```
é—®é¢˜1ï¼šæ‹¦æˆªå™¨ä¸ç”Ÿæ•ˆ
è§£å†³ï¼šæ£€æŸ¥æ˜¯å¦æ­£ç¡®æ³¨å†Œï¼Œè·¯å¾„åŒ¹é…æ˜¯å¦æ­£ç¡®

é—®é¢˜2ï¼šAOPåˆ‡ä¸åˆ°æ–¹æ³•
è§£å†³ï¼šæ£€æŸ¥åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œç¡®è®¤æ–¹æ³•æ˜¯Springç®¡ç†çš„Bean

é—®é¢˜3ï¼šæ‰§è¡Œé¡ºåºæ··ä¹±
è§£å†³ï¼šä½¿ç”¨@Orderæ³¨è§£æˆ–Orderæ¥å£æŒ‡å®šé¡ºåº

é—®é¢˜4ï¼šæ€§èƒ½é—®é¢˜
è§£å†³ï¼šä¼˜åŒ–åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œä½¿ç”¨å¼‚æ­¥å¤„ç†ï¼Œæ·»åŠ ç¼“å­˜
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- Filterã€Interceptorã€AOPå„æœ‰æ‰€é•¿ï¼Œä¸èƒ½ç›¸äº’æ›¿ä»£
- é€‰æ‹©åˆé€‚çš„æ‹¦æˆªå±‚çº§æ˜¯å…³é”®
- æ‰§è¡Œé¡ºåºè¦è®°ç‰¢ï¼šå¤–å±‚å…ˆè¿›åå‡ºï¼Œå†…å±‚åè¿›å…ˆå‡º
- æ€§èƒ½å’ŒåŠŸèƒ½è¦å¹³è¡¡ï¼Œæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©