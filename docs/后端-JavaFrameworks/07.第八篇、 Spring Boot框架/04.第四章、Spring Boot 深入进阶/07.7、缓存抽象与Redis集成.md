---
title: 7ã€ç¼“å­˜æŠ½è±¡ä¸Redisé›†æˆ
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ](#1-ä»€ä¹ˆæ˜¯ç¼“å­˜ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜)
2. [Spring CacheæŠ½è±¡ç†è§£](#2-spring-cacheæŠ½è±¡ç†è§£)
3. [ç¼“å­˜æ³¨è§£è¯¦è§£](#3-ç¼“å­˜æ³¨è§£è¯¦è§£)
4. [CacheManageré…ç½®ç®¡ç†](#4-cachemanageré…ç½®ç®¡ç†)
5. [Redisç¼“å­˜å®ç°](#5-redisç¼“å­˜å®ç°)
6. [ç¼“å­˜åºåˆ—åŒ–é…ç½®](#6-ç¼“å­˜åºåˆ—åŒ–é…ç½®)
7. [åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§](#7-åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ


### 1.1 ç¼“å­˜çš„ç”Ÿæ´»åŒ–ç†è§£


> **ğŸ’¡ ç”Ÿæ´»ä¸­çš„ç¼“å­˜ä¾‹å­**
> å°±åƒä½ æŠŠå¸¸ç”¨çš„ä¸œè¥¿æ”¾åœ¨ä¹¦æ¡Œä¸Šï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å»æŸœå­é‡Œç¿»æ‰¾ä¸€æ ·ã€‚ç¼“å­˜å°±æ˜¯æŠŠç»å¸¸ç”¨çš„æ•°æ®æ”¾åœ¨"å®¹æ˜“æ‹¿åˆ°"çš„åœ°æ–¹ã€‚

**ç¼“å­˜çš„æœ¬è´¨ï¼š**
- æŠŠ**æ…¢é€Ÿå­˜å‚¨**çš„æ•°æ®ä¸´æ—¶æ”¾åˆ°**å¿«é€Ÿå­˜å‚¨**ä¸­
- ä¸‹æ¬¡éœ€è¦æ—¶ç›´æ¥ä»å¿«é€Ÿå­˜å‚¨è·å–ï¼Œä¸ç”¨å†å»æ…¢é€Ÿå­˜å‚¨æŸ¥æ‰¾

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ


```
ğŸŒ æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µï¼š
ç”¨æˆ·è¯·æ±‚ â†’ ä¸šåŠ¡é€»è¾‘ â†’ æŸ¥è¯¢æ•°æ®åº“ â†’ è¿”å›ç»“æœ
æ¯æ¬¡éƒ½è¦ç­‰æ•°æ®åº“æŸ¥è¯¢ï¼Œæ…¢ï¼

âš¡ æœ‰äº†ç¼“å­˜åï¼š
ç”¨æˆ·è¯·æ±‚ â†’ ä¸šåŠ¡é€»è¾‘ â†’ å…ˆæŸ¥ç¼“å­˜ â†’ æœ‰æ•°æ®ç›´æ¥è¿”å›
                    â†“ æ²¡æ•°æ®æ‰æŸ¥æ•°æ®åº“
                 æŸ¥è¯¢æ•°æ®åº“ â†’ æ”¾å…¥ç¼“å­˜ â†’ è¿”å›ç»“æœ
```

**ç¼“å­˜è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š**
- **æå‡å“åº”é€Ÿåº¦**ï¼šå†…å­˜è®¿é—®æ¯”æ•°æ®åº“å¿«å‡ åå€
- **å‡è½»æ•°æ®åº“å‹åŠ›**ï¼šé¿å…é‡å¤æŸ¥è¯¢ç›¸åŒæ•°æ®
- **æé«˜ç³»ç»Ÿååé‡**ï¼šæ›´å¤šè¯·æ±‚èƒ½è¢«å¿«é€Ÿå¤„ç†

### 1.3 ä»€ä¹ˆæ•°æ®é€‚åˆç¼“å­˜ï¼Ÿ


| **é€‚åˆç¼“å­˜** | **ä¸é€‚åˆç¼“å­˜** |
|-------------|---------------|
| `ç”¨æˆ·ä¿¡æ¯` | `å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯` |
| `å•†å“åˆ†ç±»` | `å®æ—¶åº“å­˜æ•°é‡` |
| `é…ç½®å‚æ•°` | `é¢‘ç¹æ›´æ–°çš„æ•°æ®` |
| `çƒ­é—¨æ–‡ç« ` | `ä¸ªäººç§å¯†ä¿¡æ¯` |

> **ğŸ¯ è®°å¿†è¦ç‚¹**ï¼šç»å¸¸è¯»ã€ä¸ç»å¸¸å˜çš„æ•°æ®æœ€é€‚åˆç¼“å­˜

---

## 2. ğŸ—ï¸ Spring CacheæŠ½è±¡ç†è§£


### 2.1 ä»€ä¹ˆæ˜¯Spring CacheæŠ½è±¡ï¼Ÿ


Spring Cacheä¸æ˜¯å…·ä½“çš„ç¼“å­˜å®ç°ï¼Œè€Œæ˜¯ä¸€å¥—**ç¼“å­˜ä½¿ç”¨è§„èŒƒ**ï¼Œå°±åƒï¼š

```
â”Œâ”€ Spring CacheæŠ½è±¡å±‚ â”€â”
â”‚  @Cacheable          â”‚  â† ä½ åªéœ€è¦ç”¨è¿™äº›æ³¨è§£
â”‚  @CacheEvict         â”‚
â”‚  @CachePut           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ç¿»è¯‘æˆå…·ä½“æ“ä½œ
â”Œâ”€ å…·ä½“ç¼“å­˜å®ç° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis               â”‚  â† Springè‡ªåŠ¨é€‰æ‹©åº•å±‚å®ç°
â”‚  Ehcache             â”‚
â”‚  Caffeine            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Spring Cacheçš„æ ¸å¿ƒä¼˜åŠ¿


**ğŸ”¸ ä»£ç ç®€æ´**ï¼š
```java
// ä¼ ç»Ÿæ–¹å¼ - å¤æ‚
public User getUserById(Long id) {
    String key = "user:" + id;
    User user = redisTemplate.get(key);
    if (user == null) {
        user = userDao.findById(id);
        redisTemplate.set(key, user, 300);
    }
    return user;
}

// Spring Cache - ç®€å•
@Cacheable(value = "users", key = "#id")
public User getUserById(Long id) {
    return userDao.findById(id);
}
```

**ğŸ”¸ è§£è€¦åˆ**ï¼šä¸šåŠ¡ä»£ç ä¸ä¾èµ–å…·ä½“ç¼“å­˜æŠ€æœ¯
**ğŸ”¸ æ˜“åˆ‡æ¢**ï¼šæ”¹ä¸ªé…ç½®å°±èƒ½æ¢ç¼“å­˜å®ç°
**ğŸ”¸ ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰ç¼“å­˜é…ç½®é›†ä¸­ç®¡ç†

### 2.3 æ ¸å¿ƒæ¦‚å¿µç†è§£


**Cacheï¼ˆç¼“å­˜å®¹å™¨ï¼‰**ï¼š
- å°±åƒä¸€ä¸ªæœ‰åå­—çš„ç›’å­ï¼Œæ¯”å¦‚"users"ç›’å­ä¸“é—¨æ”¾ç”¨æˆ·æ•°æ®

**Keyï¼ˆç¼“å­˜é”®ï¼‰**ï¼š
- ç›’å­é‡Œæ¯ä¸ªæ•°æ®çš„æ ‡ç­¾ï¼Œæ¯”å¦‚"user:123"è¡¨ç¤ºIDä¸º123çš„ç”¨æˆ·

**Valueï¼ˆç¼“å­˜å€¼ï¼‰**ï¼š
- å…·ä½“å­˜å‚¨çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·å¯¹è±¡

```
Cache: "users"
â”œâ”€â”€ Key: "user:1" â†’ Value: User{id:1, name:"å¼ ä¸‰"}
â”œâ”€â”€ Key: "user:2" â†’ Value: User{id:2, name:"æå››"}
â””â”€â”€ Key: "user:3" â†’ Value: User{id:3, name:"ç‹äº”"}
```

---

## 3. ğŸ“ ç¼“å­˜æ³¨è§£è¯¦è§£


### 3.1 @Cacheable - æŸ¥è¯¢æ—¶ç¼“å­˜


> **ğŸ’¡ ç†è§£è¦ç‚¹**ï¼šå¦‚æœç¼“å­˜é‡Œæœ‰å°±ç”¨ç¼“å­˜çš„ï¼Œæ²¡æœ‰å°±æ‰§è¡Œæ–¹æ³•å¹¶æŠŠç»“æœæ”¾å…¥ç¼“å­˜

**åŸºæœ¬ç”¨æ³•ï¼š**
```java
@Service
public class UserService {
    
    // ç®€å•ç”¨æ³•ï¼šè‡ªåŠ¨ç”Ÿæˆkey
    @Cacheable("users")
    public User findById(Long id) {
        System.out.println("ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·: " + id);
        return userRepository.findById(id);
    }
    
    // è‡ªå®šä¹‰keyï¼šæ¨èç”¨æ³•
    @Cacheable(value = "users", key = "#id")
    public User findByIdWithKey(Long id) {
        return userRepository.findById(id);
    }
    
    // å¤šæ¡ä»¶æŸ¥è¯¢
    @Cacheable(value = "users", key = "#name + '_' + #age")
    public List<User> findByNameAndAge(String name, Integer age) {
        return userRepository.findByNameAndAge(name, age);
    }
}
```

**æ‰§è¡Œæµç¨‹ï¼š**
```
ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼š
findById(1) â†’ ç¼“å­˜ä¸­æ²¡æœ‰ â†’ æ‰§è¡Œæ–¹æ³• â†’ è¿”å›ç»“æœ â†’ å­˜å…¥ç¼“å­˜

ç¬¬äºŒæ¬¡è°ƒç”¨ï¼š
findById(1) â†’ ç¼“å­˜ä¸­æœ‰äº† â†’ ç›´æ¥è¿”å›ç¼“å­˜ç»“æœ â†’ ä¸æ‰§è¡Œæ–¹æ³•
```

### 3.2 @CachePut - æ›´æ–°æ—¶ç¼“å­˜


> **ğŸ’¡ ç†è§£è¦ç‚¹**ï¼šæ¯æ¬¡éƒ½æ‰§è¡Œæ–¹æ³•ï¼Œå¹¶æŠŠç»“æœæ›´æ–°åˆ°ç¼“å­˜ä¸­

```java
@CachePut(value = "users", key = "#user.id")
public User updateUser(User user) {
    System.out.println("æ›´æ–°ç”¨æˆ·åˆ°æ•°æ®åº“: " + user.getId());
    return userRepository.save(user);
}
```

**ä¸@Cacheableçš„åŒºåˆ«ï¼š**
- `@Cacheable`ï¼šæœ‰ç¼“å­˜å°±ä¸æ‰§è¡Œæ–¹æ³•
- `@CachePut`ï¼šæ€»æ˜¯æ‰§è¡Œæ–¹æ³•ï¼Œç”¨ç»“æœæ›´æ–°ç¼“å­˜

### 3.3 @CacheEvict - åˆ é™¤æ—¶æ¸…é™¤ç¼“å­˜


> **ğŸ’¡ ç†è§£è¦ç‚¹**ï¼šåˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¯ä»¥åˆ ä¸€ä¸ªæˆ–åˆ ä¸€æ‰¹

```java
// åˆ é™¤å•ä¸ªç¼“å­˜
@CacheEvict(value = "users", key = "#id")
public void deleteUser(Long id) {
    userRepository.deleteById(id);
}

// æ¸…ç©ºæ•´ä¸ªç¼“å­˜
@CacheEvict(value = "users", allEntries = true)
public void deleteAllUsers() {
    userRepository.deleteAll();
}

// æ–¹æ³•æ‰§è¡Œå‰æ¸…é™¤ç¼“å­˜
@CacheEvict(value = "users", key = "#id", beforeInvocation = true)
public void riskyDeleteUser(Long id) {
    // å³ä½¿è¿™é‡Œå‡ºç°å¼‚å¸¸ï¼Œç¼“å­˜ä¹Ÿå·²ç»è¢«æ¸…é™¤äº†
    userRepository.deleteById(id);
}
```

### 3.4 æ¡ä»¶ç¼“å­˜


```java
// åªæœ‰è¿”å›ç»“æœä¸ä¸ºnullæ‰ç¼“å­˜
@Cacheable(value = "users", key = "#id", unless = "#result == null")
public User findById(Long id) {
    return userRepository.findById(id);
}

// åªæœ‰idå¤§äº0æ‰ä½¿ç”¨ç¼“å­˜
@Cacheable(value = "users", key = "#id", condition = "#id > 0")
public User findByIdWithCondition(Long id) {
    return userRepository.findById(id);
}
```

---

## 4. âš™ï¸ CacheManageré…ç½®ç®¡ç†


### 4.1 CacheManageræ˜¯ä»€ä¹ˆï¼Ÿ


> **ğŸ’¡ ç®€å•ç†è§£**ï¼šCacheManagerå°±åƒä¸€ä¸ªç¼“å­˜ç®¡å®¶ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰çš„ç¼“å­˜å®¹å™¨

```
CacheManager (ç¼“å­˜ç®¡å®¶)
â”œâ”€â”€ Cache: "users" (ç”¨æˆ·ç¼“å­˜)
â”œâ”€â”€ Cache: "products" (å•†å“ç¼“å­˜)
â”œâ”€â”€ Cache: "orders" (è®¢å•ç¼“å­˜)
â””â”€â”€ Cache: "configs" (é…ç½®ç¼“å­˜)
```

### 4.2 å¯ç”¨ç¼“å­˜åŠŸèƒ½


```java
@SpringBootApplication
@EnableCaching  // è¿™ä¸€è¡Œå¼€å¯Spring CacheåŠŸèƒ½
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

### 4.3 ç®€å•å†…å­˜ç¼“å­˜é…ç½®


```java
@Configuration
@EnableCaching
public class CacheConfig {
    
    // ä½¿ç”¨ConcurrentHashMapä½œä¸ºç¼“å­˜
    @Bean
    public CacheManager cacheManager() {
        SimpleCacheManager cacheManager = new SimpleCacheManager();
        cacheManager.setCaches(Arrays.asList(
            new ConcurrentMapCache("users"),
            new ConcurrentMapCache("products")
        ));
        return cacheManager;
    }
}
```

### 4.4 ç¼“å­˜é…ç½®é€‰é¡¹


```yaml
# application.yml
spring:
  cache:
    type: simple  # ç¼“å­˜ç±»å‹ï¼šsimple, redis, ehcacheç­‰
    cache-names:  # é¢„å®šä¹‰çš„ç¼“å­˜åç§°
      - users
      - products
      - orders
```

---

## 5. ğŸ”´ Redisç¼“å­˜å®ç°


### 5.1 ä¸ºä»€ä¹ˆé€‰æ‹©Redisï¼Ÿ


| **å¯¹æ¯”é¡¹** | **å†…å­˜ç¼“å­˜** | **Redisç¼“å­˜** |
|-----------|-------------|--------------|
| `æ•°æ®æŒä¹…æ€§` | âŒ é‡å¯ä¸¢å¤± | âœ… å¯æŒä¹…åŒ– |
| `åˆ†å¸ƒå¼æ”¯æŒ` | âŒ å•æœºonly | âœ… å¤©ç„¶æ”¯æŒ |
| `å†…å­˜ä½¿ç”¨` | âœ… æœ¬åœ°å†…å­˜ | âŒ ç½‘ç»œä¼ è¾“ |
| `æ•°æ®å…±äº«` | âŒ æ— æ³•å…±äº« | âœ… å¤šæœåŠ¡å…±äº« |

> **ğŸ¯ é€‰æ‹©å»ºè®®**ï¼šå•æœºåº”ç”¨ç”¨å†…å­˜ç¼“å­˜ï¼Œåˆ†å¸ƒå¼åº”ç”¨ç”¨Redis

### 5.2 Redisé›†æˆæ­¥éª¤


**ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-cache</artifactId>
</dependency>
```

**ç¬¬äºŒæ­¥ï¼šé…ç½®Redisè¿æ¥**
```yaml
# application.yml
spring:
  redis:
    host: localhost
    port: 6379
    database: 0
    timeout: 5000ms
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5
  cache:
    type: redis
    redis:
      time-to-live: 300000  # 5åˆ†é’Ÿè¿‡æœŸ
      cache-null-values: false  # ä¸ç¼“å­˜nullå€¼
```

### 5.3 Redisç¼“å­˜é…ç½®ç±»


```java
@Configuration
@EnableCaching
public class RedisCacheConfig {
    
    @Bean
    public RedisCacheManager cacheManager(RedisConnectionFactory factory) {
        
        // é…ç½®åºåˆ—åŒ–æ–¹å¼
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
            .entryTtl(Duration.ofMinutes(10))  // 10åˆ†é’Ÿè¿‡æœŸ
            .disableCachingNullValues()        // ä¸ç¼“å­˜null
            .serializeKeysWith(RedisSerializationContext.SerializationPair
                .fromSerializer(new StringRedisSerializer()))
            .serializeValuesWith(RedisSerializationContext.SerializationPair
                .fromSerializer(new GenericJackson2JsonRedisSerializer()));
        
        return RedisCacheManager.builder(factory)
            .cacheDefaults(config)
            .build();
    }
}
```

### 5.4 å®é™…ä½¿ç”¨ç¤ºä¾‹


```java
@Service
public class ProductService {
    
    @Autowired
    private ProductRepository productRepository;
    
    // å•†å“è¯¦æƒ…ç¼“å­˜30åˆ†é’Ÿ
    @Cacheable(value = "products", key = "#id")
    public Product getProductById(Long id) {
        return productRepository.findById(id);
    }
    
    // å•†å“åˆ†ç±»ç¼“å­˜1å°æ—¶
    @Cacheable(value = "categories")
    public List<Category> getAllCategories() {
        return categoryRepository.findAll();
    }
    
    // æ›´æ–°å•†å“æ—¶åŒæ—¶æ›´æ–°ç¼“å­˜
    @CachePut(value = "products", key = "#product.id")
    public Product updateProduct(Product product) {
        return productRepository.save(product);
    }
    
    // åˆ é™¤å•†å“æ—¶æ¸…é™¤ç¼“å­˜
    @CacheEvict(value = "products", key = "#id")
    public void deleteProduct(Long id) {
        productRepository.deleteById(id);
    }
}
```

---

## 6. ğŸ”§ ç¼“å­˜åºåˆ—åŒ–é…ç½®


### 6.1 ä»€ä¹ˆæ˜¯åºåˆ—åŒ–ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–ï¼Ÿ


> **ğŸ’¡ ç®€å•ç†è§£**ï¼šåºåˆ—åŒ–å°±æ˜¯æŠŠJavaå¯¹è±¡è½¬æ¢æˆèƒ½å­˜å‚¨çš„æ ¼å¼ï¼Œå°±åƒæŠŠå®¶å…·æ‹†è§£æˆéƒ¨ä»¶æ‰èƒ½æ‰“åŒ…è¿è¾“

```
Javaå¯¹è±¡ â”€â”€åºåˆ—åŒ–â”€â”€â†’ å­—èŠ‚æ•°æ® â”€â”€å­˜å‚¨åˆ°â”€â”€â†’ Redis
Userå¯¹è±¡     è½¬æ¢      JSONå­—ç¬¦ä¸²      ä¿å­˜     ç¼“å­˜
```

### 6.2 å¸¸è§åºåˆ—åŒ–æ–¹å¼å¯¹æ¯”


| **åºåˆ—åŒ–æ–¹å¼** | **å¯è¯»æ€§** | **å­˜å‚¨å¤§å°** | **æ€§èƒ½** | **æ¨èåº¦** |
|--------------|-----------|------------|---------|-----------|
| `JDKé»˜è®¤` | âŒ äºŒè¿›åˆ¶ | âŒ å¤§ | âš¡ å¿« | â­â­ |
| `JSON` | âœ… å¯è¯» | âš¡ ä¸­ç­‰ | âš¡ å¿« | â­â­â­â­ |
| `XML` | âœ… å¯è¯» | âŒ å¤§ | âŒ æ…¢ | â­ |

### 6.3 JSONåºåˆ—åŒ–é…ç½®ï¼ˆæ¨èï¼‰


```java
@Configuration
public class RedisConfig {
    
    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(factory);
        
        // Keyåºåˆ—åŒ–ï¼šç”¨String
        template.setKeySerializer(new StringRedisSerializer());
        template.setHashKeySerializer(new StringRedisSerializer());
        
        // Valueåºåˆ—åŒ–ï¼šç”¨JSON
        Jackson2JsonRedisSerializer<Object> jsonSerializer = 
            new Jackson2JsonRedisSerializer<>(Object.class);
        
        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, 
            ObjectMapper.DefaultTyping.NON_FINAL);
        jsonSerializer.setObjectMapper(om);
        
        template.setValueSerializer(jsonSerializer);
        template.setHashValueSerializer(jsonSerializer);
        
        return template;
    }
}
```

### 6.4 å®ä½“ç±»åºåˆ—åŒ–æ³¨æ„äº‹é¡¹


```java
public class User implements Serializable {
    private Long id;
    private String name;
    private LocalDateTime createTime;
    
    // å¿…é¡»æœ‰æ— å‚æ„é€ å™¨ï¼Œåºåˆ—åŒ–éœ€è¦
    public User() {}
    
    // æ•æ„Ÿå­—æ®µä¸å‚ä¸åºåˆ—åŒ–
    @JsonIgnore
    private String password;
    
    // æ—¥æœŸæ ¼å¼åŒ–
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime createTime;
    
    // getterå’Œsetter...
}
```

---

## 7. ğŸŒ åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§


### 7.1 ä»€ä¹ˆæ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ


> **ğŸ’¡ é—®é¢˜åœºæ™¯**ï¼šå¤šä¸ªæœåŠ¡éƒ½æœ‰ç›¸åŒçš„ç¼“å­˜ï¼Œå½“æ•°æ®æ›´æ–°æ—¶ï¼Œå¦‚ä½•ä¿è¯æ‰€æœ‰ç¼“å­˜éƒ½æ˜¯æœ€æ–°çš„ï¼Ÿ

```
æƒ…å†µè¯´æ˜ï¼š
æœåŠ¡Aæ›´æ–°äº†ç”¨æˆ·ä¿¡æ¯ â†’ æ•°æ®åº“å·²æ›´æ–° â†’ ä½†æœåŠ¡Bçš„ç¼“å­˜è¿˜æ˜¯æ—§æ•°æ®
è¿™å°±æ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼
```

### 7.2 å¸¸è§è§£å†³æ–¹æ¡ˆ


**ğŸ”¸ æ–¹æ¡ˆä¸€ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç®€å•ï¼‰**
```java
@Cacheable(value = "users", key = "#id")
@Cacheable(value = "users", key = "#id", 
           cacheManager = "redisCacheManager")
public User getUserById(Long id) {
    return userDao.findById(id);
}

// é…ç½®è¿‡æœŸæ—¶é—´
@Bean
public RedisCacheConfiguration cacheConfiguration() {
    return RedisCacheConfiguration.defaultCacheConfig()
        .entryTtl(Duration.ofMinutes(10))  // 10åˆ†é’Ÿè‡ªåŠ¨è¿‡æœŸ
        .disableCachingNullValues();
}
```

**ğŸ”¸ æ–¹æ¡ˆäºŒï¼šä¸»åŠ¨æ¸…é™¤ç¼“å­˜ï¼ˆæ¨èï¼‰**
```java
@Service
public class UserService {
    
    // æŸ¥è¯¢æ—¶ç¼“å­˜
    @Cacheable(value = "users", key = "#id")
    public User getUserById(Long id) {
        return userRepository.findById(id);
    }
    
    // æ›´æ–°æ—¶æ¸…é™¤ç¼“å­˜
    @CacheEvict(value = "users", key = "#user.id")
    public User updateUser(User user) {
        return userRepository.save(user);
    }
    
    // åˆ é™¤æ—¶æ¸…é™¤ç¼“å­˜
    @CacheEvict(value = "users", key = "#id")
    public void deleteUser(Long id) {
        userRepository.deleteById(id);
    }
}
```

### 7.3 ç¼“å­˜æ›´æ–°ç­–ç•¥


| **ç­–ç•¥** | **å®ç°æ–¹å¼** | **ä¸€è‡´æ€§** | **æ€§èƒ½** | **å¤æ‚åº¦** |
|---------|------------|----------|---------|----------|
| `Cache Aside` | å…ˆæ›´æ–°DBï¼Œå†åˆ ç¼“å­˜ | âš¡ æœ€ç»ˆä¸€è‡´ | âš¡ é«˜ | â­ ç®€å• |
| `Write Through` | åŒæ—¶æ›´æ–°DBå’Œç¼“å­˜ | âœ… å¼ºä¸€è‡´ | âŒ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| `Write Back` | å…ˆæ›´æ–°ç¼“å­˜ï¼Œå¼‚æ­¥å†™DB | âŒ å¼±ä¸€è‡´ | âœ… æœ€é«˜ | â­â­â­ å¤æ‚ |

> **ğŸ¯ å®é™…å»ºè®®**ï¼šå¤§å¤šæ•°åœºæ™¯ç”¨Cache Asideæ¨¡å¼å°±å¤Ÿäº†

### 7.4 åˆ†å¸ƒå¼é”é¿å…ç¼“å­˜é›ªå´©


```java
@Component
public class UserService {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    public User getUserByIdWithLock(Long id) {
        String cacheKey = "user:" + id;
        String lockKey = "lock:user:" + id;
        
        // å…ˆæŸ¥ç¼“å­˜
        User user = getFromCache(cacheKey);
        if (user != null) {
            return user;
        }
        
        // è·å–åˆ†å¸ƒå¼é”
        String lockValue = UUID.randomUUID().toString();
        Boolean lockAcquired = redisTemplate.opsForValue()
            .setIfAbsent(lockKey, lockValue, Duration.ofSeconds(10));
            
        if (lockAcquired) {
            try {
                // åŒé‡æ£€æŸ¥ï¼Œé¿å…é‡å¤æŸ¥è¯¢
                user = getFromCache(cacheKey);
                if (user != null) {
                    return user;
                }
                
                // æŸ¥è¯¢æ•°æ®åº“å¹¶ç¼“å­˜
                user = userRepository.findById(id);
                if (user != null) {
                    putToCache(cacheKey, user);
                }
                return user;
                
            } finally {
                // é‡Šæ”¾é”
                releaseLock(lockKey, lockValue);
            }
        } else {
            // è·å–é”å¤±è´¥ï¼Œç¨åé‡è¯•
            Thread.sleep(100);
            return getUserByIdWithLock(id);
        }
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


> **ğŸ”¸ ç¼“å­˜æœ¬è´¨**ï¼šæŠŠå¸¸ç”¨æ•°æ®æ”¾åœ¨å¿«é€Ÿå­˜å‚¨ä¸­ï¼Œé¿å…é‡å¤çš„æ…¢é€ŸæŸ¥è¯¢  
> **ğŸ”¸ Spring Cache**ï¼šæä¾›ç»Ÿä¸€çš„ç¼“å­˜æ³¨è§£ï¼Œéšè—åº•å±‚å®ç°ç»†èŠ‚  
> **ğŸ”¸ ä¸‰å¤§æ³¨è§£**ï¼š@CacheableæŸ¥è¯¢ç¼“å­˜ã€@CachePutæ›´æ–°ç¼“å­˜ã€@CacheEvictåˆ é™¤ç¼“å­˜  
> **ğŸ”¸ Redisé›†æˆ**ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ç¼“å­˜å…±äº«è§£å†³æ–¹æ¡ˆ  
> **ğŸ”¸ ä¸€è‡´æ€§é—®é¢˜**ï¼šå¤šæœåŠ¡ç¯å¢ƒä¸‹ä¿è¯ç¼“å­˜æ•°æ®çš„åŒæ­¥æ›´æ–°

### 8.2 å®é™…åº”ç”¨æŒ‡å¯¼


**â“ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç¼“å­˜ï¼Ÿ**
- æ•°æ®è¯»å–é¢‘ç¹ï¼Œæ›´æ–°ä¸é¢‘ç¹
- æ•°æ®åº“æŸ¥è¯¢è€—æ—¶è¾ƒé•¿
- å¯¹å“åº”é€Ÿåº¦æœ‰è¦æ±‚

**â“ å¦‚ä½•é€‰æ‹©ç¼“å­˜ç­–ç•¥ï¼Ÿ**
- **å•ä½“åº”ç”¨**ï¼šä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼ˆConcurrentHashMapï¼‰
- **åˆ†å¸ƒå¼åº”ç”¨**ï¼šä½¿ç”¨Redisç­‰å¤–éƒ¨ç¼“å­˜
- **å¯¹ä¸€è‡´æ€§è¦æ±‚é«˜**ï¼šç¼©çŸ­è¿‡æœŸæ—¶é—´ï¼ŒåŠæ—¶æ¸…é™¤ç¼“å­˜

**â“ å¸¸è§é—®é¢˜åŠè§£å†³ï¼Ÿ**
```
ç¼“å­˜ç©¿é€ï¼šæŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®
â†’ è§£å†³ï¼šç¼“å­˜ç©ºå€¼ï¼Œè®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´

ç¼“å­˜é›ªå´©ï¼šç¼“å­˜åŒæ—¶å¤§é‡å¤±æ•ˆ
â†’ è§£å†³ï¼šè®¾ç½®éšæœºè¿‡æœŸæ—¶é—´ï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”

ç¼“å­˜å‡»ç©¿ï¼šçƒ­ç‚¹æ•°æ®è¿‡æœŸç¬é—´å¤§é‡è¯·æ±‚
â†’ è§£å†³ï¼šçƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸï¼Œæˆ–ä½¿ç”¨åˆ†å¸ƒå¼é”
```

### 8.3 æœ€ä½³å®è·µæ€»ç»“


**ğŸ”§ é…ç½®ä¼˜åŒ–**ï¼š
- åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼‰
- é€‰æ‹©åˆé€‚çš„åºåˆ—åŒ–æ–¹å¼ï¼ˆæ¨èJSONï¼‰
- é…ç½®è¿æ¥æ± å‚æ•°

**ğŸ“ ä»£ç è§„èŒƒ**ï¼š
- ç¼“å­˜keyè¦æœ‰æ„ä¹‰ä¸”å”¯ä¸€
- åŠæ—¶æ¸…é™¤å¤±æ•ˆç¼“å­˜
- å¤„ç†ç¼“å­˜å¼‚å¸¸æƒ…å†µ

**ğŸ¯ æ ¸å¿ƒè®°å¿†**ï¼š
- ç¼“å­˜æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´çš„å…¸å‹åº”ç”¨
- Spring Cacheè®©ç¼“å­˜ä½¿ç”¨å˜å¾—ç®€å•ä¼˜é›…
- åˆ†å¸ƒå¼ç¯å¢ƒä¸‹è¦ç‰¹åˆ«æ³¨æ„ç¼“å­˜ä¸€è‡´æ€§
- åˆç†çš„ç¼“å­˜ç­–ç•¥èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½

> **ğŸ’¡ ä¸€å¥è¯æ€»ç»“**ï¼šSpring Boot + Redis ç¼“å­˜ = è®©ä½ çš„åº”ç”¨é£èµ·æ¥ï¼Œä½†åˆ«å¿˜äº†å¤„ç†æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼