---
title: 9ã€å¸¸è§å®˜æ–¹Starterä¸é«˜é¢‘ç”¨æ³•
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Spring Boot Starter](#1-ä»€ä¹ˆæ˜¯Spring-Boot-Starter)
2. [Webå¼€å‘æ ¸å¿ƒï¼šspring-boot-starter-web](#2-Webå¼€å‘æ ¸å¿ƒspring-boot-starter-web)
3. [æ•°æ®åº“æ“ä½œï¼šspring-boot-starter-data-jpa](#3-æ•°æ®åº“æ“ä½œspring-boot-starter-data-jpa)
4. [å®‰å…¨é˜²æŠ¤ï¼šspring-boot-starter-security](#4-å®‰å…¨é˜²æŠ¤spring-boot-starter-security)
5. [æ•°æ®æ ¡éªŒï¼šspring-boot-starter-validation](#5-æ•°æ®æ ¡éªŒspring-boot-starter-validation)
6. [ç¼“å­˜åŠ é€Ÿï¼šspring-boot-starter-cache](#6-ç¼“å­˜åŠ é€Ÿspring-boot-starter-cache)
7. [æµ‹è¯•æ”¯æŒï¼šspring-boot-starter-test](#7-æµ‹è¯•æ”¯æŒspring-boot-starter-test)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŸ ä»€ä¹ˆæ˜¯Spring Boot Starter


### 1.1 Starterçš„æœ¬è´¨ç†è§£


**ğŸ”¸ ç®€å•æ¯”å–»**
```
ä¼ ç»Ÿæ–¹å¼å°±åƒè‡ªå·±è£…ç”µè„‘ï¼š
éœ€è¦ä¸€ä¸ªä¸€ä¸ªä¹°é…ä»¶ â†’ CPUã€å†…å­˜ã€ç¡¬ç›˜ã€æ˜¾å¡...
è¿˜è¦è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ â†’ ä¸»æ¿æ”¯æŒä»€ä¹ˆCPUï¼Ÿå†…å­˜é¢‘ç‡åŒ¹é…å—ï¼Ÿ

Spring Boot Starterå°±åƒä¹°å“ç‰Œæ•´æœºï¼š
é€‰æ‹©ç”¨é€” â†’ æ¸¸æˆæœ¬ã€åŠå…¬æœ¬ã€è®¾è®¡æœ¬
å‚å®¶å·²ç»é…å¥½äº† â†’ æ‰€æœ‰é…ä»¶éƒ½å…¼å®¹ï¼Œå¼€ç®±å³ç”¨
```

**ğŸ”¸ æŠ€æœ¯å®šä¹‰**
> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> Starteræ˜¯Spring Bootæä¾›çš„ä¾èµ–æè¿°ç¬¦ï¼Œå®ƒæŠŠæŸä¸ªåŠŸèƒ½éœ€è¦çš„æ‰€æœ‰jaråŒ…ã€é…ç½®ã€è‡ªåŠ¨é…ç½®ç±»éƒ½æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œè®©å¼€å‘è€…ä¸€é”®å¼•å…¥å°±èƒ½ä½¿ç”¨

**ğŸ”¸ Starterçš„ä»·å€¼**
- **ç®€åŒ–ä¾èµ–ç®¡ç†**ï¼šä¸ç”¨è®°å¿†å¤æ‚çš„jaråŒ…ç»„åˆ
- **ç‰ˆæœ¬å…¼å®¹ä¿è¯**ï¼šSpringå›¢é˜Ÿå·²ç»æµ‹è¯•è¿‡å…¼å®¹æ€§
- **è‡ªåŠ¨é…ç½®**ï¼šå¼•å…¥å³å¯ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®
- **çº¦å®šä¼˜äºé…ç½®**ï¼šæä¾›åˆç†çš„é»˜è®¤è®¾ç½®

### 1.2 Starterçš„å·¥ä½œåŸç†


```
Starterå·¥ä½œæµç¨‹å›¾ï¼š

å¼€å‘è€…å¼•å…¥Starter
        â†“
Maven/Gradleä¸‹è½½ä¾èµ–åŒ…
        â†“
Spring Bootæ‰«æAutoConfigurationç±»
        â†“
æ ¹æ®æ¡ä»¶æ³¨è§£å†³å®šæ˜¯å¦ç”Ÿæ•ˆ
        â†“
è‡ªåŠ¨åˆ›å»ºå’Œé…ç½®Bean
        â†“
åº”ç”¨å¯ç›´æ¥ä½¿ç”¨åŠŸèƒ½
```

**ğŸ”¸ æ ¸å¿ƒç»„æˆéƒ¨åˆ†**
```
ä¸€ä¸ªå®Œæ•´çš„StarteråŒ…å«ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¾èµ–jaråŒ…           â”‚ â† åŠŸèƒ½å®ç°çš„æ ¸å¿ƒåº“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è‡ªåŠ¨é…ç½®ç±»          â”‚ â† xxxAutoConfiguration
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ é…ç½®å±æ€§ç±»          â”‚ â† xxxProperties
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¡ä»¶æ³¨è§£           â”‚ â† @ConditionalOnXxx
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸŒ Webå¼€å‘æ ¸å¿ƒï¼šspring-boot-starter-web


### 2.1 ä»€ä¹ˆæ˜¯spring-boot-starter-web


**ğŸ”¸ åŠŸèƒ½å®šä½**
> ğŸ’¡ **å®ç”¨ä»·å€¼**  
> è¿™æ˜¯å¼€å‘Webåº”ç”¨æœ€åŸºç¡€çš„Starterï¼Œç›¸å½“äºWebå¼€å‘çš„"å…¨å®¶æ¡¶"ï¼ŒåŒ…å«äº†æ„å»ºWebåº”ç”¨éœ€è¦çš„æ‰€æœ‰åŸºç¡€ç»„ä»¶

**ğŸ”¸ åŒ…å«çš„æ ¸å¿ƒåŠŸèƒ½**
```
Web Starter = åµŒå…¥å¼Tomcat + Spring MVC + JSONå¤„ç†
             â†“           â†“          â†“
           WebæœåŠ¡å™¨   æ§åˆ¶å™¨æ¡†æ¶  æ•°æ®è½¬æ¢
```

### 2.2 æ ¸å¿ƒä¾èµ–è§£æ


| ğŸ§© **æ ¸å¿ƒç»„ä»¶** | **ä½œç”¨è¯´æ˜** | **å®é™…ç”¨é€”** |
|----------------|--------------|-------------|
| **Spring MVC** | `Webæ¡†æ¶æ ¸å¿ƒ` | `å¤„ç†HTTPè¯·æ±‚ï¼Œå®ç°æ§åˆ¶å™¨` |
| **Embedded Tomcat** | `å†…åµŒWebæœåŠ¡å™¨` | `ä¸éœ€è¦å¤–éƒ¨Tomcatï¼Œåº”ç”¨è‡ªå¸¦æœåŠ¡å™¨` |
| **Jackson** | `JSONåºåˆ—åŒ–å·¥å…·` | `è‡ªåŠ¨æŠŠJavaå¯¹è±¡è½¬æˆJSONè¿”å›` |
| **Spring Web** | `WebåŸºç¡€åŠŸèƒ½` | `æä¾›RESTå®¢æˆ·ç«¯ç­‰Webå·¥å…·` |
| **Validation** | `æ•°æ®æ ¡éªŒ` | `éªŒè¯è¯·æ±‚å‚æ•°æ˜¯å¦åˆæ³•` |

### 2.3 å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹


**ğŸš€ æœ€ç®€å•çš„Webåº”ç”¨**
```java
@RestController
@SpringBootApplication
public class HelloApp {
    
    // è¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„Webæ¥å£
    @GetMapping("/hello")
    public String hello() {
        return "Hello Spring Boot!";
    }
    
    public static void main(String[] args) {
        SpringApplication.run(HelloApp.class, args);
        // å¯åŠ¨åè®¿é—® http://localhost:8080/hello
    }
}
```

**ğŸ”§ ä¾èµ–é…ç½®**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <!-- ç‰ˆæœ¬ç”±parentç®¡ç†ï¼Œä¸ç”¨å†™version -->
</dependency>
```

### 2.4 å¸¸ç”¨åœºæ™¯ä¸é…ç½®


**ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯**
- **RESTful APIå¼€å‘**ï¼šæä¾›æ•°æ®æ¥å£ç»™å‰ç«¯æˆ–å…¶ä»–ç³»ç»Ÿ
- **Webç½‘ç«™å¼€å‘**ï¼šç»“åˆæ¨¡æ¿å¼•æ“å¼€å‘ä¼ ç»Ÿç½‘ç«™  
- **å¾®æœåŠ¡æ¥å£**ï¼šå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æä¾›è€…

**âš™ï¸ å¸¸ç”¨é…ç½®ä¼˜åŒ–**
```yaml
server:
  port: 8080              # ä¿®æ”¹ç«¯å£
  servlet:
    context-path: /api    # æ·»åŠ ç»Ÿä¸€å‰ç¼€
    
spring:
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss  # JSONæ—¥æœŸæ ¼å¼
    default-property-inclusion: non_null  # å¿½ç•¥nullå€¼
```

---

## 3. ğŸ—„ï¸ æ•°æ®åº“æ“ä½œï¼šspring-boot-starter-data-jpa


### 3.1 JPAæ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—ç†è§£**
```
ä¼ ç»ŸJDBCæ“ä½œæ•°æ®åº“ï¼š
å†™SQL â†’ è®¾ç½®å‚æ•° â†’ æ‰§è¡Œ â†’ å¤„ç†ç»“æœé›†
æ¯ä¸ªæ“ä½œéƒ½è¦å†™ä¸€å †é‡å¤ä»£ç 

JPAçš„ä½œç”¨ï¼š
æŠŠJavaå¯¹è±¡ â†” æ•°æ®åº“è¡¨ çš„æ˜ å°„è‡ªåŠ¨åŒ–
ä¸ç”¨å†™SQLï¼Œç”¨Javaæ–¹æ³•æ“ä½œæ•°æ®
```

**ğŸ”¸ æ ¸å¿ƒä»·å€¼**
> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> JPA (Java Persistence API) æ˜¯Javaå®˜æ–¹çš„å¯¹è±¡å…³ç³»æ˜ å°„æ ‡å‡†ï¼ŒSpring Data JPAæ˜¯Springå¯¹JPAçš„å°è£…ï¼Œè®©æ•°æ®åº“æ“ä½œæ›´ç®€å•

### 3.2 æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§


```
Spring Data JPA åŠŸèƒ½æ¶æ„ï¼š

åº”ç”¨å±‚ä»£ç 
    â†“
Repositoryæ¥å£ (ä½ å®šä¹‰)
    â†“  
Spring Data JPA (è‡ªåŠ¨å®ç°)
    â†“
Hibernate (JPAå®ç°)
    â†“
æ•°æ®åº“é©±åŠ¨
    â†“
MySQL/PostgreSQLç­‰æ•°æ®åº“
```

### 3.3 å®é™…ä½¿ç”¨ç¤ºä¾‹


**ğŸ—ï¸ å®ä½“ç±»å®šä¹‰**
```java
@Entity  // æ ‡è®°è¿™æ˜¯æ•°æ®åº“è¡¨å¯¹åº”çš„å®ä½“
@Table(name = "users")  // æŒ‡å®šè¡¨å
public class User {
    @Id  // ä¸»é”®
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // è‡ªå¢
    private Long id;
    
    @Column(nullable = false, length = 50)  // åˆ—çº¦æŸ
    private String username;
    
    private String email;
    
    // getter/setterçœç•¥
}
```

**ğŸ“ Repositoryæ¥å£**
```java
public interface UserRepository extends JpaRepository<User, Long> {
    // ç¥å¥‡ä¹‹å¤„ï¼šä¸ç”¨å†™å®ç°ï¼ŒSpringè‡ªåŠ¨ç”Ÿæˆ
    
    // æ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾ (æ–¹æ³•åè‡ªåŠ¨ç”ŸæˆSQL)
    User findByUsername(String username);
    
    // æ ¹æ®é‚®ç®±æŸ¥æ‰¾
    List<User> findByEmailContaining(String email);
    
    // è‡ªå®šä¹‰SQLæŸ¥è¯¢
    @Query("SELECT u FROM User u WHERE u.username = ?1")
    User findUserByName(String name);
}
```

**ğŸ® ä½¿ç”¨ç¤ºä¾‹**
```java
@Service
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    public User saveUser(User user) {
        return userRepository.save(user);  // ä¿å­˜æˆ–æ›´æ–°
    }
    
    public User getUser(Long id) {
        return userRepository.findById(id).orElse(null);  // æ ¹æ®IDæŸ¥æ‰¾
    }
    
    public List<User> getAllUsers() {
        return userRepository.findAll();  // æŸ¥è¯¢æ‰€æœ‰
    }
}
```

### 3.4 é…ç½®è¦ç‚¹


**ğŸ”§ æ•°æ®æºé…ç½®**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    
  jpa:
    hibernate:
      ddl-auto: update    # è‡ªåŠ¨åˆ›å»º/æ›´æ–°è¡¨ç»“æ„
    show-sql: true        # æ˜¾ç¤ºæ‰§è¡Œçš„SQL
    properties:
      hibernate:
        format_sql: true  # æ ¼å¼åŒ–SQLè¾“å‡º
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> ddl-autoé€‰é¡¹ï¼šcreate(åˆ é™¤é‡å»º)ã€update(æ›´æ–°ç»“æ„)ã€validate(éªŒè¯)ã€none(ä¸æ“ä½œ)ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨none

---

## 4. ğŸ”’ å®‰å…¨é˜²æŠ¤ï¼šspring-boot-starter-security


### 4.1 Spring Securityæ˜¯ä»€ä¹ˆ


**ğŸ”¸ å½¢è±¡æ¯”å–»**
```
ç½‘ç«™å®‰å…¨å°±åƒå°åŒºå®‰ä¿ç³»ç»Ÿï¼š
é—¨ç¦å¡ = ç”¨æˆ·è®¤è¯ (ä½ æ˜¯è°ï¼Ÿ)
æƒé™ç­‰çº§ = æˆæƒç®¡ç† (ä½ èƒ½è¿›å“ªäº›åŒºåŸŸï¼Ÿ)
ç›‘æ§æ‘„åƒ = å®‰å…¨å®¡è®¡ (è®°å½•æ“ä½œæ—¥å¿—)
```

**ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½**
> ğŸ“Œ **æ ¸å¿ƒä»·å€¼**  
> Spring Securityæä¾›è®¤è¯(Authentication)å’Œæˆæƒ(Authorization)åŠŸèƒ½ï¼Œä¿æŠ¤Webåº”ç”¨ä¸è¢«æœªæˆæƒè®¿é—®

### 4.2 è®¤è¯ä¸æˆæƒæœºåˆ¶


```
Securityå·¥ä½œæµç¨‹ï¼š

ç”¨æˆ·è¯·æ±‚
    â†“
Securityè¿‡æ»¤é“¾æ‹¦æˆª
    â†“
æ£€æŸ¥æ˜¯å¦å·²è®¤è¯ï¼Ÿ â†’ æœªè®¤è¯ â†’ è·³è½¬ç™»å½•é¡µ
    â†“ (å·²è®¤è¯)
æ£€æŸ¥æ˜¯å¦æœ‰æƒé™ï¼Ÿ â†’ æ— æƒé™ â†’ è¿”å›403é”™è¯¯
    â†“ (æœ‰æƒé™) 
æ”¾è¡Œï¼Œç»§ç»­å¤„ç†è¯·æ±‚
```

### 4.3 åŸºç¡€é…ç½®ç¤ºä¾‹


**ğŸ”§ æœ€ç®€é…ç½®**
```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/public/**").permitAll()  // å…¬å¼€æ¥å£
                .requestMatchers("/admin/**").hasRole("ADMIN")  // ç®¡ç†å‘˜æ¥å£
                .anyRequest().authenticated()  // å…¶ä»–éœ€è¦è®¤è¯
            )
            .formLogin(form -> form
                .loginPage("/login")  // è‡ªå®šä¹‰ç™»å½•é¡µ
                .defaultSuccessUrl("/home")  // ç™»å½•æˆåŠŸè·³è½¬
            )
            .logout(logout -> logout
                .logoutSuccessUrl("/login?logout")
            );
        
        return http.build();
    }
}
```

**ğŸ‘¤ ç”¨æˆ·ç®¡ç†**
```java
@Bean
public UserDetailsService userDetailsService() {
    UserDetails user = User.builder()
        .username("admin")
        .password(passwordEncoder().encode("123456"))
        .roles("ADMIN")
        .build();
        
    return new InMemoryUserDetailsManager(user);
}

@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();  // å¯†ç åŠ å¯†
}
```

### 4.4 å¸¸ç”¨æ³¨è§£


| ğŸ·ï¸ **æ³¨è§£** | **ä½œç”¨è¯´æ˜** | **ä½¿ç”¨ç¤ºä¾‹** |
|------------|-------------|-------------|
| `@PreAuthorize` | `æ–¹æ³•æ‰§è¡Œå‰æ£€æŸ¥æƒé™` | `@PreAuthorize("hasRole('ADMIN')")` |
| `@PostAuthorize` | `æ–¹æ³•æ‰§è¡Œåæ£€æŸ¥æƒé™` | `@PostAuthorize("returnObject.owner == principal.username")` |
| `@Secured` | `ç®€å•çš„è§’è‰²æ£€æŸ¥` | `@Secured("ROLE_USER")` |

---

## 5. âœ… æ•°æ®æ ¡éªŒï¼šspring-boot-starter-validation


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®æ ¡éªŒ


**ğŸ”¸ ç°å®åœºæ™¯**
```
ç”¨æˆ·æäº¤æ³¨å†Œä¿¡æ¯ï¼š
å§“åï¼š""  (ç©ºç™½)
é‚®ç®±ï¼šabc  (æ ¼å¼é”™è¯¯)  
å¹´é¾„ï¼š-5  (é€»è¾‘é”™è¯¯)
å¯†ç ï¼š123  (å¤ªç®€å•)

ä¸æ ¡éªŒçš„åæœï¼šè„æ•°æ®å…¥åº“ï¼Œç³»ç»Ÿå¼‚å¸¸ï¼Œå®‰å…¨é£é™©
```

**ğŸ”¸ æ ¡éªŒçš„ä»·å€¼**
> ğŸ’¡ **é‡è¦æ€§**  
> æ•°æ®æ ¡éªŒæ˜¯ç³»ç»Ÿå®‰å…¨å’Œç¨³å®šçš„ç¬¬ä¸€é“é˜²çº¿ï¼Œç¡®ä¿è¿›å…¥ç³»ç»Ÿçš„æ•°æ®éƒ½æ˜¯åˆæ³•ã€å®Œæ•´ã€ç¬¦åˆä¸šåŠ¡è§„åˆ™çš„

### 5.2 å¸¸ç”¨æ ¡éªŒæ³¨è§£


| ğŸ¯ **æ³¨è§£** | **æ ¡éªŒè§„åˆ™** | **ä½¿ç”¨åœºæ™¯** |
|------------|-------------|-------------|
| `@NotNull` | `ä¸èƒ½ä¸ºnull` | `å¿…å¡«å­—æ®µ` |
| `@NotEmpty` | `ä¸èƒ½ä¸ºç©ºä¸²` | `å­—ç¬¦ä¸²ã€é›†åˆä¸èƒ½ä¸ºç©º` |
| `@NotBlank` | `ä¸èƒ½ä¸ºç©ºç™½` | `å»é™¤ç©ºæ ¼åä¸èƒ½ä¸ºç©º` |
| `@Size(min,max)` | `é•¿åº¦èŒƒå›´` | `ç”¨æˆ·åé•¿åº¦é™åˆ¶` |
| `@Min/@Max` | `æ•°å€¼èŒƒå›´` | `å¹´é¾„ã€ä»·æ ¼é™åˆ¶` |
| `@Email` | `é‚®ç®±æ ¼å¼` | `é‚®ç®±åœ°å€æ ¡éªŒ` |
| `@Pattern` | `æ­£åˆ™è¡¨è¾¾å¼` | `æ‰‹æœºå·ã€èº«ä»½è¯æ ¼å¼` |

### 5.3 å®é™…ä½¿ç”¨ç¤ºä¾‹


**ğŸ“ å®ä½“ç±»æ ¡éªŒ**
```java
public class UserRegisterDTO {
    
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20å­—ç¬¦ä¹‹é—´")
    private String username;
    
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Min(value = 18, message = "å¹´é¾„ä¸èƒ½å°äº18å²")
    @Max(value = 120, message = "å¹´é¾„ä¸èƒ½å¤§äº120å²")
    private Integer age;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    // getter/setterçœç•¥
}
```

**ğŸ® æ§åˆ¶å™¨ä½¿ç”¨**
```java
@RestController
public class UserController {
    
    @PostMapping("/register")
    public ResponseEntity<?> register(@Valid @RequestBody UserRegisterDTO dto) {
        // @Validè§¦å‘æ ¡éªŒï¼Œå¦‚æœå¤±è´¥ä¼šè‡ªåŠ¨è¿”å›400é”™è¯¯
        // æ ¡éªŒé€šè¿‡æ‰ä¼šæ‰§è¡Œè¿™é‡Œçš„ä»£ç 
        
        userService.register(dto);
        return ResponseEntity.ok("æ³¨å†ŒæˆåŠŸ");
    }
}
```

### 5.4 è‡ªå®šä¹‰æ ¡éªŒå™¨


**ğŸ”§ è‡ªå®šä¹‰æ³¨è§£**
```java
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = PhoneValidator.class)
public @interface Phone {
    String message() default "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}
```

**âš™ï¸ æ ¡éªŒå™¨å®ç°**
```java
public class PhoneValidator implements ConstraintValidator<Phone, String> {
    
    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        if (value == null) return true;  // nullå€¼äº¤ç»™@NotNullå¤„ç†
        
        // ä¸­å›½æ‰‹æœºå·æ­£åˆ™
        return value.matches("^1[3-9]\\d{9}$");
    }
}
```

---

## 6. âš¡ ç¼“å­˜åŠ é€Ÿï¼šspring-boot-starter-cache


### 6.1 ç¼“å­˜çš„æœ¬è´¨ç†è§£


**ğŸ”¸ ç”Ÿæ´»ä¸­çš„ç¼“å­˜**
```
åœºæ™¯ï¼šæŸ¥å­—å…¸
ä¸ç”¨ç¼“å­˜ï¼šæ¯æ¬¡éƒ½ç¿»å­—å…¸ (æ…¢)
ä½¿ç”¨ç¼“å­˜ï¼šæŠŠå¸¸ç”¨å­—è®°åœ¨ä¾¿ç­¾ä¸Š (å¿«)

ç³»ç»Ÿä¸­çš„ç¼“å­˜ï¼š
ä¸ç”¨ç¼“å­˜ï¼šæ¯æ¬¡éƒ½æŸ¥æ•°æ®åº“ (æ…¢ï¼Œå‹åŠ›å¤§)
ä½¿ç”¨ç¼“å­˜ï¼šæŠŠçƒ­ç‚¹æ•°æ®æ”¾åœ¨å†…å­˜é‡Œ (å¿«ï¼Œå‡å‹)
```

**ğŸ”¸ ç¼“å­˜çš„ä»·å€¼**
> ğŸ“Œ **æ ¸å¿ƒä½œç”¨**  
> ç¼“å­˜æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥ï¼ŒæŠŠç»å¸¸è®¿é—®çš„æ•°æ®å­˜åœ¨å¿«é€Ÿå­˜å‚¨ä»‹è´¨ä¸­ï¼Œå¤§å¹…æå‡ç³»ç»Ÿæ€§èƒ½

### 6.2 Spring CacheæŠ½è±¡


```
Spring Cacheæ¶æ„ï¼š

@Cacheableæ³¨è§£æ ‡è®°æ–¹æ³•
        â†“
Spring AOPæ‹¦æˆªæ–¹æ³•è°ƒç”¨
        â†“
æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®
        â†“
æœ‰ â†’ ç›´æ¥è¿”å›    æ—  â†’ æ‰§è¡Œæ–¹æ³•å¹¶ç¼“å­˜ç»“æœ
```

### 6.3 æ ¸å¿ƒæ³¨è§£ä½¿ç”¨


**ğŸ“¦ åŸºç¡€é…ç½®**
```java
@SpringBootApplication
@EnableCaching  // å¼€å¯ç¼“å­˜åŠŸèƒ½
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

**ğŸ¯ ç¼“å­˜æ³¨è§£ç¤ºä¾‹**
```java
@Service
public class UserService {
    
    @Cacheable(value = "users", key = "#id")
    public User getUserById(Long id) {
        // ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šæ‰§è¡Œå¹¶ç¼“å­˜ç»“æœ
        // åç»­ç›¸åŒidçš„è°ƒç”¨ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®
        return userRepository.findById(id);
    }
    
    @CacheEvict(value = "users", key = "#user.id")
    public User updateUser(User user) {
        // æ›´æ–°ç”¨æˆ·åæ¸…é™¤ç¼“å­˜ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§
        return userRepository.save(user);
    }
    
    @CachePut(value = "users", key = "#user.id")
    public User saveUser(User user) {
        // æ‰§è¡Œæ–¹æ³•å¹¶æ›´æ–°ç¼“å­˜
        return userRepository.save(user);
    }
}
```

### 6.4 ç¼“å­˜é…ç½®


| ğŸ·ï¸ **æ³¨è§£** | **ä½œç”¨è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** |
|------------|-------------|-------------|
| `@Cacheable` | `æœ‰ç¼“å­˜è¿”å›ç¼“å­˜ï¼Œæ— ç¼“å­˜æ‰§è¡Œæ–¹æ³•` | `æŸ¥è¯¢æ–¹æ³•` |
| `@CachePut` | `æ€»æ˜¯æ‰§è¡Œæ–¹æ³•å¹¶æ›´æ–°ç¼“å­˜` | `æ›´æ–°æ–¹æ³•` |
| `@CacheEvict` | `æ¸…é™¤ç¼“å­˜` | `åˆ é™¤æ–¹æ³•` |

**âš™ï¸ ç¼“å­˜æä¾›è€…é…ç½®**
```yaml
spring:
  cache:
    type: redis  # ä½¿ç”¨Redisä½œä¸ºç¼“å­˜
  redis:
    host: localhost
    port: 6379
    database: 0
```

---

## 7. ğŸ§ª æµ‹è¯•æ”¯æŒï¼šspring-boot-starter-test


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦æµ‹è¯•


**ğŸ”¸ æµ‹è¯•çš„é‡è¦æ€§**
```
æ²¡æœ‰æµ‹è¯•çš„ä»£ç å°±åƒï¼š
ç›–æˆ¿å­ä¸æ£€æŸ¥åœ°åŸº â†’ å¯èƒ½å€’å¡Œ
åšèœä¸å°å‘³é“ â†’ å¯èƒ½å¾ˆéš¾åƒ
å†™ä»£ç ä¸æµ‹è¯• â†’ å¯èƒ½å‡ºbug

è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼ï¼š
- å‘ç°é—®é¢˜ï¼šå°½æ—©å‘ç°bug
- ä¿è¯è´¨é‡ï¼šç¡®ä¿åŠŸèƒ½æ­£ç¡®  
- é‡æ„å®‰å…¨ï¼šæ”¹ä»£ç ä¸æ€•ç ´ååŸåŠŸèƒ½
- æ–‡æ¡£ä½œç”¨ï¼šæµ‹è¯•ç”¨ä¾‹å°±æ˜¯æ´»çš„æ–‡æ¡£
```

### 7.2 æµ‹è¯•ç±»å‹è¯´æ˜


```
æµ‹è¯•é‡‘å­—å¡”ï¼š

           /\
          /  \  å•å…ƒæµ‹è¯• (Unit Tests)
         /____\  æµ‹è¯•å•ä¸ªæ–¹æ³•ã€ç±»
        /      \  
       /        \ é›†æˆæµ‹è¯• (Integration Tests)  
      /__________\ æµ‹è¯•ç»„ä»¶é—´åä½œ
     /            \
    /              \ ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
   /________________\ æµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹
```

### 7.3 Spring Bootæµ‹è¯•æ³¨è§£


| ğŸ·ï¸ **æ³¨è§£** | **ä½œç”¨è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** |
|------------|-------------|-------------|
| `@SpringBootTest` | `åŠ è½½å®Œæ•´Springä¸Šä¸‹æ–‡` | `é›†æˆæµ‹è¯•` |
| `@WebMvcTest` | `åªåŠ è½½Webå±‚ç»„ä»¶` | `Controlleræµ‹è¯•` |
| `@DataJpaTest` | `åªåŠ è½½JPAç›¸å…³ç»„ä»¶` | `Repositoryæµ‹è¯•` |
| `@MockBean` | `åˆ›å»ºMockå¯¹è±¡` | `éš”ç¦»ä¾èµ–` |

### 7.4 å®é™…æµ‹è¯•ç¤ºä¾‹


**ğŸ® Controlleræµ‹è¯•**
```java
@WebMvcTest(UserController.class)
class UserControllerTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @MockBean
    private UserService userService;
    
    @Test
    void shouldReturnUser() throws Exception {
        // å‡†å¤‡æµ‹è¯•æ•°æ®
        User user = new User();
        user.setId(1L);
        user.setUsername("test");
        
        // æ¨¡æ‹ŸServiceè¡Œä¸º
        when(userService.getUserById(1L)).thenReturn(user);
        
        // æ‰§è¡Œè¯·æ±‚å¹¶éªŒè¯ç»“æœ
        mockMvc.perform(get("/users/1"))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.username").value("test"));
    }
}
```

**ğŸ—„ï¸ Repositoryæµ‹è¯•**
```java
@DataJpaTest
class UserRepositoryTest {
    
    @Autowired
    private TestEntityManager entityManager;
    
    @Autowired  
    private UserRepository userRepository;
    
    @Test
    void shouldFindByUsername() {
        // å‡†å¤‡æµ‹è¯•æ•°æ®
        User user = new User();
        user.setUsername("testuser");
        entityManager.persistAndFlush(user);
        
        // æ‰§è¡ŒæŸ¥è¯¢
        User found = userRepository.findByUsername("testuser");
        
        // éªŒè¯ç»“æœ
        assertThat(found.getUsername()).isEqualTo("testuser");
    }
}
```

**âš™ï¸ Serviceæµ‹è¯•**
```java
@SpringBootTest
class UserServiceTest {
    
    @Autowired
    private UserService userService;
    
    @Test
    void shouldSaveUser() {
        // å‡†å¤‡æ•°æ®
        User user = new User();
        user.setUsername("newuser");
        user.setEmail("test@example.com");
        
        // æ‰§è¡Œä¿å­˜
        User saved = userService.saveUser(user);
        
        // éªŒè¯ç»“æœ
        assertThat(saved.getId()).isNotNull();
        assertThat(saved.getUsername()).isEqualTo("newuser");
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Starteræœ¬è´¨ï¼šä¾èµ–+é…ç½®+è‡ªåŠ¨é…ç½®çš„ç»„åˆåŒ…ï¼Œå¼€ç®±å³ç”¨
ğŸ”¸ Webå¼€å‘ï¼šspring-boot-starter-webæä¾›å®Œæ•´Webå¼€å‘èƒ½åŠ›
ğŸ”¸ æ•°æ®æ“ä½œï¼šspring-boot-starter-data-jpaç®€åŒ–æ•°æ®åº“æ“ä½œ
ğŸ”¸ å®‰å…¨é˜²æŠ¤ï¼šspring-boot-starter-securityæä¾›è®¤è¯æˆæƒ
ğŸ”¸ æ•°æ®æ ¡éªŒï¼šspring-boot-starter-validationä¿è¯æ•°æ®è´¨é‡
ğŸ”¸ ç¼“å­˜ä¼˜åŒ–ï¼šspring-boot-starter-cacheæå‡ç³»ç»Ÿæ€§èƒ½
ğŸ”¸ æµ‹è¯•æ”¯æŒï¼šspring-boot-starter-testä¿è¯ä»£ç è´¨é‡
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Starterçš„æ ¸å¿ƒä»·å€¼**
```
ä¼ ç»Ÿå¼€å‘ç—›ç‚¹ï¼š
- ä¾èµ–ç®¡ç†å¤æ‚ï¼šéœ€è¦è®°å¿†å¤§é‡jaråŒ…ç»„åˆ
- ç‰ˆæœ¬å†²çªé¢‘ç¹ï¼šä¸åŒåº“ä¹‹é—´ç‰ˆæœ¬ä¸å…¼å®¹  
- é…ç½®ç¹çé‡å¤ï¼šæ¯ä¸ªåŠŸèƒ½éƒ½è¦å†™å¤§é‡é…ç½®

Starterè§£å†³æ–¹æ¡ˆï¼š
- ä¸€é”®å¼•å…¥ï¼šä¸€ä¸ªä¾èµ–åŒ…å«æ‰€æœ‰ç›¸å…³jaråŒ…
- ç‰ˆæœ¬ç®¡ç†ï¼šSpringå›¢é˜Ÿä¿è¯å…¼å®¹æ€§
- è‡ªåŠ¨é…ç½®ï¼šå¼•å…¥å³å¯ç”¨ï¼Œé›¶é…ç½®æˆ–æœ€å°‘é…ç½®
```

**ğŸ”¹ é€‰æ‹©Starterçš„åŸåˆ™**
```
æŒ‰éœ€å¼•å…¥åŸåˆ™ï¼š
- åªå¼•å…¥é¡¹ç›®çœŸæ­£éœ€è¦çš„Starter
- é¿å…å¼•å…¥è¿‡å¤šä¸å¿…è¦çš„ä¾èµ–
- å…³æ³¨Starterä¹‹é—´çš„ä¾èµ–å…³ç³»

å¸¸ç”¨ç»„åˆï¼š
Webåº”ç”¨ = starter-web + starter-data-jpa + starter-validation
å®‰å…¨åº”ç”¨ = åŸºç¡€ç»„åˆ + starter-security
é«˜æ€§èƒ½åº”ç”¨ = åŸºç¡€ç»„åˆ + starter-cache + starter-redis
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ é¡¹ç›®å¯åŠ¨å»ºè®®**
```
æ–°æ‰‹æ¨èé¡ºåºï¼š
1. starter-webï¼šå­¦ä¼šæ„å»ºåŸºç¡€Webåº”ç”¨
2. starter-data-jpaï¼šæŒæ¡æ•°æ®åº“æ“ä½œ
3. starter-validationï¼šä¿è¯æ•°æ®è´¨é‡
4. starter-testï¼šå…»æˆæµ‹è¯•ä¹ æƒ¯
5. starter-securityï¼šå¢åŠ å®‰å…¨é˜²æŠ¤
6. starter-cacheï¼šä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
```

**âš ï¸ å¸¸è§æ³¨æ„äº‹é¡¹**
- **ç‰ˆæœ¬å…¼å®¹**ï¼šä½¿ç”¨Spring Boot BOMç®¡ç†ç‰ˆæœ¬ï¼Œé¿å…æ‰‹åŠ¨æŒ‡å®š
- **é…ç½®è¦†ç›–**ï¼šäº†è§£è‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼Œéœ€è¦æ—¶è¿›è¡Œè¦†ç›–
- **æµ‹è¯•éš”ç¦»**ï¼šä¸åŒå±‚æ¬¡çš„æµ‹è¯•ä½¿ç”¨å¯¹åº”çš„æµ‹è¯•æ³¨è§£
- **å®‰å…¨æ„è¯†**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®å®‰å…¨é˜²æŠ¤

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**
- **æ¸è¿›å­¦ä¹ **ï¼šä¸€æ¬¡æŒæ¡ä¸€ä¸ªStarterï¼Œå¾ªåºæ¸è¿›
- **å®è·µç»“åˆ**ï¼šç†è®ºå­¦ä¹ å¿…é¡»ç»“åˆåŠ¨æ‰‹å®è·µ
- **æ–‡æ¡£æŸ¥é˜…**ï¼šé‡åˆ°é—®é¢˜å¤šæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£
- **ç¤¾åŒºäº¤æµ**ï¼šç§¯æå‚ä¸æŠ€æœ¯ç¤¾åŒºè®¨è®º

**æ ¸å¿ƒè®°å¿†**ï¼š
- Starteræ˜¯Spring Bootçš„ç²¾é«“ï¼ŒåŒ–ç¹ä¸ºç®€
- æ¯ä¸ªStarteréƒ½æœ‰ç‰¹å®šç”¨é€”ï¼ŒæŒ‰éœ€é€‰æ‹©
- è‡ªåŠ¨é…ç½®æ˜¯æ ¸å¿ƒï¼Œä½†è¦ç†è§£å…¶åŸç†
- æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œä¿è¯ä»£ç è´¨é‡