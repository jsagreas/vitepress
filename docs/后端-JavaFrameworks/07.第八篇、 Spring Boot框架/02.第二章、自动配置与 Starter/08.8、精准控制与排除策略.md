---
title: 8ã€ç²¾å‡†æ§åˆ¶ä¸æ’é™¤ç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [è‡ªåŠ¨é…ç½®ç²¾å‡†æ§åˆ¶æ¦‚è¿°](#1-è‡ªåŠ¨é…ç½®ç²¾å‡†æ§åˆ¶æ¦‚è¿°)
2. [é…ç½®æ’é™¤ç­–ç•¥è¯¦è§£](#2-é…ç½®æ’é™¤ç­–ç•¥è¯¦è§£)
3. [è£…é…é¡ºåºæ§åˆ¶æœºåˆ¶](#3-è£…é…é¡ºåºæ§åˆ¶æœºåˆ¶)
4. [å±€éƒ¨é…ç½®æ›¿æ¢æŠ€æœ¯](#4-å±€éƒ¨é…ç½®æ›¿æ¢æŠ€æœ¯)
5. [æ¡ä»¶ç»„åˆç­–ç•¥](#5-æ¡ä»¶ç»„åˆç­–ç•¥)
6. [ç¯å¢ƒç‰¹å®šè£…é…](#6-ç¯å¢ƒç‰¹å®šè£…é…)
7. [ç‰ˆæœ¬å‡çº§å…¼å®¹ç®¡ç†](#7-ç‰ˆæœ¬å‡çº§å…¼å®¹ç®¡ç†)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è‡ªåŠ¨é…ç½®ç²¾å‡†æ§åˆ¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®æ§åˆ¶


**é€šä¿—ç†è§£**ï¼šå°±åƒè£…ä¿®æˆ¿å­æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©è¦å“ªäº›å®¶å…·ï¼Œä¸è¦å“ªäº›å®¶å…·ï¼Œè¿˜èƒ½å†³å®šå…ˆè£…å“ªä¸ªåè£…å“ªä¸ª

```
ç”Ÿæ´»ç±»æ¯”ï¼š
æ¬å®¶è£…ä¿® = Spring Boot è‡ªåŠ¨é…ç½®
å®¶å…·é€‰æ‹© = é…ç½®ç»„ä»¶é€‰æ‹©
è£…ä¿®é¡ºåº = é…ç½®åŠ è½½é¡ºåº
ä¸ªæ€§å®šåˆ¶ = å±€éƒ¨é…ç½®æ›¿æ¢

æŠ€æœ¯å¯¹åº”ï¼š
ğŸ  åº”ç”¨å¯åŠ¨ = è‡ªåŠ¨è£…é…å¼€å§‹
ğŸ“¦ Starterä¾èµ– = å¯é€‰çš„"å®¶å…·åŒ…"
ğŸ›ï¸ é…ç½®æ§åˆ¶ = ç²¾ç¡®é€‰æ‹©éœ€è¦çš„ç»„ä»¶
âš™ï¸ æ¡ä»¶åˆ¤æ–­ = æ ¹æ®ç¯å¢ƒå†³å®šè£…ä»€ä¹ˆ
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç²¾å‡†æ§åˆ¶


**æ ¸å¿ƒé—®é¢˜**ï¼šSpring Boot è‡ªåŠ¨é…ç½®è™½ç„¶æ–¹ä¾¿ï¼Œä½†æœ‰æ—¶å€™ä¼š"å¸®å€’å¿™"

```
å¸¸è§é—®é¢˜åœºæ™¯ï¼š

âŒ è‡ªåŠ¨é…ç½®å†²çªï¼š
é¡¹ç›®ä¸­æœ‰ä¸¤ä¸ªæ•°æ®æºé…ç½®ï¼ŒSpringä¸çŸ¥é“ç”¨å“ªä¸ª

âŒ ä¸éœ€è¦çš„ç»„ä»¶è¢«åŠ è½½ï¼š
åªæƒ³ç”¨Redisåšç¼“å­˜ï¼Œç»“æœæŠŠæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿå¯åŠ¨äº†

âŒ é…ç½®åŠ è½½é¡ºåºé”™è¯¯ï¼š
æ•°æ®åº“é…ç½®è¿˜æ²¡åŠ è½½ï¼Œå°±å¼€å§‹åˆ›å»ºæ•°æ®è¡¨äº†

âŒ ç¯å¢ƒé…ç½®æ··ä¹±ï¼š
å¼€å‘ç¯å¢ƒçš„é…ç½®è·‘åˆ°äº†ç”Ÿäº§ç¯å¢ƒ

âœ… è§£å†³æ–¹æ¡ˆï¼š
é€šè¿‡ç²¾å‡†æ§åˆ¶ï¼ŒåªåŠ è½½éœ€è¦çš„ï¼ŒæŒ‰æ­£ç¡®é¡ºåºåŠ è½½
```

### 1.3 æ§åˆ¶æœºåˆ¶å…¨æ™¯å›¾


```
Spring Boot è‡ªåŠ¨é…ç½®æ§åˆ¶ä½“ç³»ï¼š

é…ç½®å‘ç° â†’ æ¡ä»¶åˆ¤æ–­ â†’ é¡ºåºæ§åˆ¶ â†’ å®ä¾‹åˆ›å»º
    â†“          â†“          â†“          â†“
  æ‰«æåŒ…    @Conditional  @Order   Beanå®ä¾‹
    â†“          â†“          â†“          â†“
æ’é™¤ç­–ç•¥ â†  ç¯å¢ƒåˆ¤æ–­ â†  ä¾èµ–æ’åº â†  é…ç½®æ›¿æ¢

æ§åˆ¶æ‰‹æ®µï¼š
ğŸ¯ æ’é™¤ï¼šä¸è¦åŠ è½½æŸäº›é…ç½®
ğŸ“ æ¡ä»¶ï¼šæ»¡è¶³æ¡ä»¶æ‰åŠ è½½
ğŸ”„ é¡ºåºï¼šæ§åˆ¶åŠ è½½çš„å…ˆå
ğŸ¨ æ›¿æ¢ï¼šç”¨è‡ªå®šä¹‰é…ç½®è¦†ç›–é»˜è®¤
```

---

## 2. ğŸš« é…ç½®æ’é™¤ç­–ç•¥è¯¦è§£


### 2.1 spring.autoconfigure.exclude æ’é™¤æœºåˆ¶


**æ ¸å¿ƒæ¦‚å¿µ**ï¼šå‘Šè¯‰ Spring Boot "è¿™äº›è‡ªåŠ¨é…ç½®æˆ‘ä¸è¦ï¼Œåˆ«ç»™æˆ‘åŠ è½½"

```
ç†è§£è¦ç‚¹ï¼š
exclude = æ’é™¤ã€å‰”é™¤
å°±åƒç‚¹èœæ—¶è¯´"ä¸è¦é¦™èœ"
Spring Bootä¼šè·³è¿‡è¿™äº›è‡ªåŠ¨é…ç½®ç±»
```

**é…ç½®æ–¹å¼å¯¹æ¯”è¡¨**ï¼š

| æ’é™¤æ–¹å¼ | ä½¿ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|---------|---------|------|------|
| `application.yml` | é…ç½®æ–‡ä»¶æ§åˆ¶ | çµæ´»ä¿®æ”¹ | éœ€è¦çŸ¥é“ç±»å |
| `@SpringBootApplication` | å¯åŠ¨ç±»æ§åˆ¶ | ä»£ç æ˜ç¡® | å†™æ­»åœ¨ä»£ç é‡Œ |
| `@EnableAutoConfiguration` | æ³¨è§£æ§åˆ¶ | ç²¾ç¡®æ§åˆ¶ | é…ç½®å¤æ‚ |

### 2.2 é…ç½®æ–‡ä»¶æ’é™¤æ–¹å¼


**application.yml æ’é™¤é…ç½®**ï¼š
```yaml
# åŸºç¡€æ’é™¤è¯­æ³•
spring:
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# å¤šç§å†™æ³•å¯¹æ¯”
spring:
  autoconfigure:
    exclude: 
      # æ–¹å¼1ï¼šå®Œæ•´ç±»åï¼ˆæ¨èï¼‰
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      # æ–¹å¼2ï¼šç®€çŸ­å†™æ³•ï¼ˆéœ€è¦åœ¨ç±»è·¯å¾„ä¸‹ï¼‰
      - DataSourceAutoConfiguration
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š
```yaml
# åœºæ™¯ï¼šå¾®æœåŠ¡é¡¹ç›®ï¼Œä¸éœ€è¦Webå®¹å™¨
spring:
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration
      - org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration

# åœºæ™¯ï¼šä½¿ç”¨è‡ªå®šä¹‰æ•°æ®æºï¼Œæ’é™¤é»˜è®¤é…ç½®
spring:
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration
```

### 2.3 æ³¨è§£æ’é™¤æ–¹å¼


**å¯åŠ¨ç±»æ’é™¤**ï¼š
```java
@SpringBootApplication(exclude = {
    DataSourceAutoConfiguration.class,
    RedisAutoConfiguration.class
})
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}
```

**æ›´ç²¾ç¡®çš„æ§åˆ¶**ï¼š
```java
// ç²¾ç¡®æ§åˆ¶è‡ªåŠ¨é…ç½®
@Configuration
@EnableAutoConfiguration(exclude = {
    DataSourceAutoConfiguration.class
})
public class CustomAutoConfiguration {
    // è‡ªå®šä¹‰é…ç½®
}

// æ¡ä»¶æ€§æ’é™¤
@Configuration
@Profile("!production")  // éç”Ÿäº§ç¯å¢ƒæ‰æ’é™¤
@EnableAutoConfiguration(exclude = {
    SecurityAutoConfiguration.class
})
public class DevConfiguration {
}
```

### 2.4 åŠ¨æ€æ’é™¤ç­–ç•¥


**ç¯å¢ƒå˜é‡æ§åˆ¶**ï¼š
```bash
# é€šè¿‡ç¯å¢ƒå˜é‡æ’é™¤
export SPRING_AUTOCONFIGURE_EXCLUDE="org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration"

# é€šè¿‡JVMå‚æ•°æ’é™¤
java -jar app.jar --spring.autoconfigure.exclude=DataSourceAutoConfiguration
```

**ä»£ç åŠ¨æ€æ’é™¤**ï¼š
```java
@Component
public class DynamicExcludeConfig {
    
    @EventListener(ApplicationStartingEvent.class)
    public void configureExclusions(ApplicationStartingEvent event) {
        // æ ¹æ®è¿è¡Œç¯å¢ƒåŠ¨æ€æ’é™¤
        String env = System.getProperty("spring.profiles.active");
        if ("test".equals(env)) {
            // æµ‹è¯•ç¯å¢ƒæ’é™¤æŸäº›é…ç½®
            System.setProperty("spring.autoconfigure.exclude", 
                "DataSourceAutoConfiguration");
        }
    }
}
```

---

## 3. ğŸ”„ è£…é…é¡ºåºæ§åˆ¶æœºåˆ¶


### 3.1 @AutoConfigureBefore/After é¡ºåºæ§åˆ¶


**æ ¸å¿ƒç†å¿µ**ï¼šå°±åƒåšèœçš„æ­¥éª¤ï¼Œå…ˆæ´—èœå†åˆ‡èœå†ç‚’èœï¼Œæœ‰äº›é…ç½®å¿…é¡»æŒ‰é¡ºåºæ¥

```
è£…é…é¡ºåºç±»æ¯”ï¼š
åšé¥­æ­¥éª¤ï¼šå‡†å¤‡é£Ÿæ â†’ å¤„ç†é£Ÿæ â†’ çƒ¹é¥ª â†’ è£…ç›˜
é…ç½®é¡ºåºï¼šåŸºç¡€é…ç½® â†’ æ•°æ®æºé…ç½® â†’ ä¸šåŠ¡é…ç½® â†’ ç›‘æ§é…ç½®

ä¸ºä»€ä¹ˆéœ€è¦é¡ºåºï¼š
âŒ æ•°æ®æºè¿˜æ²¡åˆ›å»ºï¼Œå°±å¼€å§‹åˆ›å»ºæ•°æ®è¡¨
âŒ ç¼“å­˜ç»„ä»¶è¿˜æ²¡å‡†å¤‡å¥½ï¼Œä¸šåŠ¡ä»£ç å°±å¼€å§‹ç”¨ç¼“å­˜
âœ… æŒ‰æ­£ç¡®é¡ºåºï¼Œç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®
```

### 3.2 Before/After æ³¨è§£ä½¿ç”¨


**åŸºç¡€è¯­æ³•ç†è§£**ï¼š
```java
// @AutoConfigureBeforeï¼šåœ¨æŒ‡å®šé…ç½®ä¹‹å‰åŠ è½½
// @AutoConfigureAfterï¼šåœ¨æŒ‡å®šé…ç½®ä¹‹ååŠ è½½

@Configuration
@AutoConfigureBefore(DataSourceAutoConfiguration.class)
public class DatabaseSetupConfig {
    // è¿™ä¸ªé…ç½®ä¼šåœ¨æ•°æ®æºé…ç½®ä¹‹å‰åŠ è½½
    // é€‚åˆåšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚åˆ›å»ºæ•°æ®åº“
}

@Configuration  
@AutoConfigureAfter(DataSourceAutoConfiguration.class)
public class DatabaseMigrationConfig {
    // è¿™ä¸ªé…ç½®ä¼šåœ¨æ•°æ®æºé…ç½®ä¹‹ååŠ è½½
    // é€‚åˆåšä¸€äº›åç»­å·¥ä½œï¼Œæ¯”å¦‚æ•°æ®åº“è¿ç§»
}
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š

```java
// åœºæ™¯1ï¼šæ•°æ®åº“åˆå§‹åŒ–é¡ºåºæ§åˆ¶
@Configuration
@AutoConfigureBefore(JpaRepositoriesAutoConfiguration.class)
@ConditionalOnProperty(name = "app.database.init", havingValue = "true")
public class DatabaseInitConfig {
    
    @Bean
    @Primary
    public DataSource customDataSource() {
        // è‡ªå®šä¹‰æ•°æ®æºå¿…é¡»åœ¨JPAä»“åº“ä¹‹å‰åˆ›å»º
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");
        dataSource.setUsername("root");
        dataSource.setPassword("password");
        return dataSource;
    }
}

// åœºæ™¯2ï¼šç¼“å­˜é…ç½®é¡ºåº
@Configuration
@AutoConfigureAfter(RedisAutoConfiguration.class)
@ConditionalOnBean(RedisTemplate.class)
public class CacheManagerConfig {
    
    @Bean
    public CacheManager cacheManager(RedisTemplate redisTemplate) {
        // å¿…é¡»åœ¨Redisé…ç½®å®Œæˆåæ‰èƒ½åˆ›å»ºç¼“å­˜ç®¡ç†å™¨
        return new RedisCacheManager.Builder(redisTemplate)
                .cacheDefaults(cacheConfig())
                .build();
    }
}
```

### 3.3 å¤æ‚é¡ºåºæ§åˆ¶


**å¤šå±‚ä¾èµ–é¡ºåº**ï¼š
```java
// é…ç½®åŠ è½½é¡ºåºï¼šA â†’ B â†’ C
@Configuration
@AutoConfigureBefore(ConfigB.class)
public class ConfigA {
    // ç¬¬ä¸€ä¸ªåŠ è½½
}

@Configuration
@AutoConfigureAfter(ConfigA.class)
@AutoConfigureBefore(ConfigC.class)
public class ConfigB {
    // ç¬¬äºŒä¸ªåŠ è½½
}

@Configuration
@AutoConfigureAfter({ConfigA.class, ConfigB.class})
public class ConfigC {
    // æœ€ååŠ è½½ï¼Œä¾èµ–å‰é¢ä¸¤ä¸ª
}
```

**é¡ºåºæ§åˆ¶æœ€ä½³å®è·µ**ï¼š
```java
@Configuration
@AutoConfigureAfter(name = {
    "org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration",
    "org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration"
})
@ConditionalOnBean(DataSource.class)
public class BusinessConfig {
    
    @Bean
    public BusinessService businessService(DataSource dataSource) {
        // ç¡®ä¿æ•°æ®æºå’ŒJPAéƒ½é…ç½®å®Œæˆåå†åˆ›å»ºä¸šåŠ¡æœåŠ¡
        return new BusinessService(dataSource);
    }
}
```

---

## 4. ğŸ¨ å±€éƒ¨é…ç½®æ›¿æ¢æŠ€æœ¯


### 4.1 å±€éƒ¨æ›¿æ¢æ ¸å¿ƒæ¦‚å¿µ


**é€šä¿—ç†è§£**ï¼šå°±åƒè£…ä¿®æˆ¿å­æ—¶ï¼Œå¤§éƒ¨åˆ†ç”¨è£…ä¿®å…¬å¸çš„æ–¹æ¡ˆï¼Œä½†å®¢å…çš„æ²™å‘ä½ è¦ç”¨è‡ªå·±é€‰çš„

```
æ›¿æ¢ç­–ç•¥ç±»æ¯”ï¼š
è£…ä¿®æ–¹æ¡ˆ = Spring Boot é»˜è®¤é…ç½®
ä¸ªäººå–œå¥½ = è‡ªå®šä¹‰é…ç½®éœ€æ±‚
å±€éƒ¨æ”¹åŠ¨ = åªæ›¿æ¢éœ€è¦çš„éƒ¨åˆ†
æ•´ä½“åè°ƒ = ä¿æŒå…¶ä»–é…ç½®ä¸å˜

æŠ€æœ¯å®ç°ï¼š
ğŸ”„ @Primaryï¼šè¿™ä¸ªBeanä¼˜å…ˆä½¿ç”¨
ğŸ¯ @Qualifierï¼šæŒ‡å®šä½¿ç”¨å“ªä¸ªBean
ğŸ·ï¸ æ¡ä»¶æ³¨è§£ï¼šæ»¡è¶³æ¡ä»¶æ‰æ›¿æ¢
```

### 4.2 Bean æ›¿æ¢ç­–ç•¥


**@Primary ä¼˜å…ˆçº§æ›¿æ¢**ï¼š
```java
@Configuration
public class CustomDataSourceConfig {
    
    // æ›¿æ¢é»˜è®¤çš„æ•°æ®æºé…ç½®
    @Bean
    @Primary  // ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªBean
    public DataSource primaryDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");
        dataSource.setMaximumPoolSize(20);  // è‡ªå®šä¹‰è¿æ¥æ± å¤§å°
        dataSource.setConnectionTimeout(30000);  // è‡ªå®šä¹‰è¶…æ—¶æ—¶é—´
        return dataSource;
    }
    
    // ä¿ç•™é»˜è®¤é…ç½®ä½œä¸ºå¤‡ç”¨
    @Bean
    @Qualifier("backup")
    public DataSource backupDataSource() {
        return DataSourceBuilder.create().build();
    }
}
```

**æ¡ä»¶æ€§æ›¿æ¢**ï¼š
```java
@Configuration
public class ConditionalReplaceConfig {
    
    // åªåœ¨ç”Ÿäº§ç¯å¢ƒæ›¿æ¢
    @Bean
    @Profile("production")
    @Primary
    public RedisTemplate<String, Object> prodRedisTemplate() {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨é›†ç¾¤é…ç½®
        template.setConnectionFactory(clusterConnectionFactory());
        return template;
    }
    
    // å¼€å‘ç¯å¢ƒä½¿ç”¨ç®€å•é…ç½®
    @Bean
    @Profile("dev")
    @Primary  
    public RedisTemplate<String, Object> devRedisTemplate() {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        // å¼€å‘ç¯å¢ƒä½¿ç”¨å•æœºé…ç½®
        template.setConnectionFactory(standaloneConnectionFactory());
        return template;
    }
}
```

### 4.3 é…ç½®å±æ€§æ›¿æ¢


**è‡ªå®šä¹‰é…ç½®å±æ€§**ï¼š
```java
// åˆ›å»ºè‡ªå®šä¹‰é…ç½®å±æ€§ç±»
@ConfigurationProperties(prefix = "app.datasource")
@Data
public class CustomDataSourceProperties {
    private String url;
    private String username;
    private String password;
    private int maxPoolSize = 10;
    private long connectionTimeout = 30000;
    private boolean enableMetrics = true;
}

// ä½¿ç”¨è‡ªå®šä¹‰å±æ€§æ›¿æ¢é»˜è®¤é…ç½®
@Configuration
@EnableConfigurationProperties(CustomDataSourceProperties.class)
public class DataSourceReplaceConfig {
    
    @Autowired
    private CustomDataSourceProperties properties;
    
    @Bean
    @Primary
    @ConditionalOnProperty(name = "app.datasource.enabled", havingValue = "true")
    public DataSource customDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl(properties.getUrl());
        dataSource.setUsername(properties.getUsername());
        dataSource.setPassword(properties.getPassword());
        dataSource.setMaximumPoolSize(properties.getMaxPoolSize());
        dataSource.setConnectionTimeout(properties.getConnectionTimeout());
        return dataSource;
    }
}
```

**é…ç½®æ–‡ä»¶ä¸­çš„ä½¿ç”¨**ï¼š
```yaml
# application.yml
app:
  datasource:
    enabled: true
    url: jdbc:mysql://localhost:3306/myapp
    username: myuser
    password: mypass
    max-pool-size: 15
    connection-timeout: 25000
    enable-metrics: true
```

---

## 5. ğŸ¯ æ¡ä»¶ç»„åˆç­–ç•¥


### 5.1 æ¡ä»¶æ³¨è§£ç»„åˆç†è§£


**æ ¸å¿ƒæ€æƒ³**ï¼šå°±åƒæ‹›è˜æ¡ä»¶ï¼Œæ—¢è¦æœ¬ç§‘å­¦å†ï¼Œåˆè¦3å¹´ç»éªŒï¼Œè¿˜è¦ä¼šJavaï¼Œå¤šä¸ªæ¡ä»¶ç»„åˆä½¿ç”¨

```
æ¡ä»¶ç»„åˆç±»æ¯”ï¼š
æ‹›è˜è¦æ±‚ = é…ç½®åŠ è½½æ¡ä»¶  
å­¦å†è¦æ±‚ = @ConditionalOnClass
ç»éªŒè¦æ±‚ = @ConditionalOnProperty
æŠ€èƒ½è¦æ±‚ = @ConditionalOnBean

åªæœ‰å…¨éƒ¨æ»¡è¶³æ‰å½•ç”¨ = æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ‰åŠ è½½é…ç½®
```

### 5.2 å¸¸ç”¨æ¡ä»¶æ³¨è§£


**æ¡ä»¶æ³¨è§£é€ŸæŸ¥è¡¨**ï¼š

| æ³¨è§£ | ä½œç”¨ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `@ConditionalOnClass` | ç±»å­˜åœ¨æ—¶åŠ è½½ | æ£€æŸ¥ä¾èµ–jaråŒ… |
| `@ConditionalOnBean` | Beanå­˜åœ¨æ—¶åŠ è½½ | æ£€æŸ¥ä¾èµ–Bean |
| `@ConditionalOnProperty` | é…ç½®å±æ€§æ»¡è¶³æ—¶åŠ è½½ | å¼€å…³æ§åˆ¶ |
| `@ConditionalOnProfile` | ç‰¹å®šç¯å¢ƒåŠ è½½ | ç¯å¢ƒåŒºåˆ† |
| `@ConditionalOnMissingBean` | Beanä¸å­˜åœ¨æ—¶åŠ è½½ | é»˜è®¤é…ç½® |

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```java
@Configuration
public class ConditionalConfig {
    
    // æ¡ä»¶1ï¼šRedisç±»å­˜åœ¨ä¸”å¼€å¯ç¼“å­˜æ—¶åŠ è½½
    @Bean
    @ConditionalOnClass(RedisTemplate.class)
    @ConditionalOnProperty(name = "app.cache.type", havingValue = "redis")
    public RedisCacheManager redisCacheManager() {
        return new RedisCacheManager.Builder(redisConnectionFactory())
                .cacheDefaults(cacheConfiguration())
                .build();
    }
    
    // æ¡ä»¶2ï¼šæ²¡æœ‰è‡ªå®šä¹‰ç¼“å­˜ç®¡ç†å™¨æ—¶ä½¿ç”¨é»˜è®¤çš„
    @Bean
    @ConditionalOnMissingBean(CacheManager.class)
    @ConditionalOnProperty(name = "app.cache.enabled", havingValue = "true")
    public CacheManager defaultCacheManager() {
        return new ConcurrentMapCacheManager();
    }
    
    // æ¡ä»¶3ï¼šç”Ÿäº§ç¯å¢ƒä¸”å¯ç”¨ç›‘æ§æ—¶åŠ è½½
    @Bean
    @Profile("production")
    @ConditionalOnProperty(name = "management.metrics.enabled", havingValue = "true")
    @ConditionalOnClass(name = "io.micrometer.core.instrument.MeterRegistry")
    public MetricsConfig metricsConfig() {
        return new MetricsConfig();
    }
}
```

### 5.3 å¤æ‚æ¡ä»¶ç»„åˆ


**è‡ªå®šä¹‰æ¡ä»¶ç±»**ï¼š
```java
// åˆ›å»ºè‡ªå®šä¹‰æ¡ä»¶
public class DatabaseTypeCondition implements Condition {
    
    @Override
    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
        Environment env = context.getEnvironment();
        String dbType = env.getProperty("app.database.type");
        String profile = env.getProperty("spring.profiles.active");
        
        // å¤æ‚æ¡ä»¶é€»è¾‘
        return "mysql".equals(dbType) && 
               ("production".equals(profile) || "staging".equals(profile));
    }
}

// ä½¿ç”¨è‡ªå®šä¹‰æ¡ä»¶
@Configuration
@Conditional(DatabaseTypeCondition.class)
public class MySQLProductionConfig {
    
    @Bean
    public DataSource mysqlDataSource() {
        // åªåœ¨MySQLä¸”ç”Ÿäº§/é¢„å‘ç¯å¢ƒä¸‹åŠ è½½
        return createMySQLDataSource();
    }
}
```

**æ¡ä»¶ç»„åˆæœ€ä½³å®è·µ**ï¼š
```java
@Configuration
@ConditionalOnClass({RedisTemplate.class, CacheManager.class})
@ConditionalOnProperty(
    prefix = "app.cache",
    name = {"enabled", "type"},
    havingValue = "redis"
)
@AutoConfigureAfter(RedisAutoConfiguration.class)
public class RedisCacheConfig {
    
    @Bean
    @ConditionalOnMissingBean(name = "redisCacheManager")
    public RedisCacheManager cacheManager(
            RedisConnectionFactory connectionFactory) {
        
        RedisCacheConfiguration config = RedisCacheConfiguration
                .defaultCacheConfig()
                .entryTtl(Duration.ofMinutes(10))
                .disableCachingNullValues();
                
        return RedisCacheManager.builder(connectionFactory)
                .cacheDefaults(config)
                .build();
    }
}
```

---

## 6. ğŸŒ ç¯å¢ƒç‰¹å®šè£…é…


### 6.1 ç¯å¢ƒè£…é…æ ¸å¿ƒç†å¿µ


**ç”Ÿæ´»ç±»æ¯”**ï¼šå°±åƒç©¿è¡£æœï¼Œå¤å¤©ç©¿çŸ­è¢–ï¼Œå†¬å¤©ç©¿æ£‰è¡£ï¼Œä¸åŒç¯å¢ƒç”¨ä¸åŒé…ç½®

```
ç¯å¢ƒå¯¹åº”å…³ç³»ï¼š
å¼€å‘ç¯å¢ƒ(dev)     = å¤å¤©ç©¿çŸ­è¢–ï¼ˆç®€å•é…ç½®ï¼‰
æµ‹è¯•ç¯å¢ƒ(test)    = æ˜¥ç§‹ç©¿å¤–å¥—ï¼ˆä¸­ç­‰é…ç½®ï¼‰  
ç”Ÿäº§ç¯å¢ƒ(prod)    = å†¬å¤©ç©¿æ£‰è¡£ï¼ˆå®Œæ•´é…ç½®ï¼‰

é…ç½®ç‰¹ç‚¹ï¼š
å¼€å‘ï¼šå¿«é€Ÿå¯åŠ¨ã€è°ƒè¯•æ–¹ä¾¿ã€èµ„æºå ç”¨å°‘
æµ‹è¯•ï¼šæ¨¡æ‹ŸçœŸå®ã€æ•°æ®éš”ç¦»ã€ä¾¿äºéªŒè¯
ç”Ÿäº§ï¼šç¨³å®šå¯é ã€æ€§èƒ½ä¼˜åŒ–ã€ç›‘æ§å®Œå¤‡
```

### 6.2 Profile ç¯å¢ƒé…ç½®


**åŸºç¡€Profileé…ç½®**ï¼š
```yaml
# application.yml - é€šç”¨é…ç½®
spring:
  application:
    name: my-service

---
# application-dev.yml - å¼€å‘ç¯å¢ƒ
spring:
  profiles: dev
  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
  jpa:
    show-sql: true
    hibernate:
      ddl-auto: create-drop

logging:
  level:
    root: DEBUG

---
# application-prod.yml - ç”Ÿäº§ç¯å¢ƒ  
spring:
  profiles: prod
  datasource:
    url: jdbc:mysql://prod-db:3306/myapp
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    hikari:
      maximum-pool-size: 20
      connection-timeout: 30000

logging:
  level:
    root: WARN
  file:
    name: /var/log/myapp.log
```

**Javaé…ç½®ç±»çš„ç¯å¢ƒæ§åˆ¶**ï¼š
```java
// å¼€å‘ç¯å¢ƒé…ç½®
@Configuration
@Profile("dev")
public class DevConfig {
    
    @Bean
    @Primary
    public DataSource devDataSource() {
        // H2å†…å­˜æ•°æ®åº“ï¼Œå¿«é€Ÿå¯åŠ¨
        return new EmbeddedDatabaseBuilder()
                .setType(EmbeddedDatabaseType.H2)
                .addScript("schema.sql")
                .addScript("test-data.sql")
                .build();
    }
    
    @Bean
    public DebugInterceptor debugInterceptor() {
        // å¼€å‘ç¯å¢ƒå¯ç”¨è°ƒè¯•æ‹¦æˆªå™¨
        return new DebugInterceptor();
    }
}

// ç”Ÿäº§ç¯å¢ƒé…ç½®
@Configuration  
@Profile("prod")
public class ProdConfig {
    
    @Bean
    @Primary
    public DataSource prodDataSource() {
        // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¿æ¥æ± 
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl(prodUrl);
        dataSource.setMaximumPoolSize(50);
        dataSource.setConnectionTimeout(60000);
        return dataSource;
    }
    
    @Bean
    public MetricsCollector metricsCollector() {
        // ç”Ÿäº§ç¯å¢ƒå¯ç”¨æŒ‡æ ‡æ”¶é›†
        return new MetricsCollector();
    }
}
```

### 6.3 æ¡ä»¶åŒ–ç¯å¢ƒè£…é…


**å¤åˆç¯å¢ƒæ¡ä»¶**ï¼š
```java
@Configuration
public class EnvironmentSpecificConfig {
    
    // éç”Ÿäº§ç¯å¢ƒçš„æµ‹è¯•é…ç½®
    @Bean
    @Profile("!prod")
    @ConditionalOnProperty(name = "app.mock.enabled", havingValue = "true")
    public MockService mockService() {
        return new MockService();
    }
    
    // ç”Ÿäº§æˆ–é¢„å‘ç¯å¢ƒçš„çœŸå®æœåŠ¡
    @Bean
    @Profile({"prod", "staging"})
    @ConditionalOnMissingBean(MockService.class)
    public RealService realService() {
        return new RealService();
    }
    
    // å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒçš„é…ç½®
    @Bean
    @Profile({"dev", "test"})
    public DevToolsConfig devTools() {
        DevToolsConfig config = new DevToolsConfig();
        config.setHotReload(true);
        config.setLiveReload(true);
        return config;
    }
}
```

**åŠ¨æ€ç¯å¢ƒåˆ¤æ–­**ï¼š
```java
@Component
public class EnvironmentAwareBean {
    
    @Autowired
    private Environment environment;
    
    @PostConstruct
    public void init() {
        String[] activeProfiles = environment.getActiveProfiles();
        
        if (Arrays.asList(activeProfiles).contains("prod")) {
            // ç”Ÿäº§ç¯å¢ƒåˆå§‹åŒ–
            initProductionMode();
        } else if (Arrays.asList(activeProfiles).contains("dev")) {
            // å¼€å‘ç¯å¢ƒåˆå§‹åŒ–  
            initDevelopmentMode();
        }
    }
    
    public void initProductionMode() {
        // å¯ç”¨ç¼“å­˜ã€å…³é—­è°ƒè¯•æ—¥å¿—ã€å¯ç”¨ç›‘æ§
    }
    
    public void initDevelopmentMode() {
        // å…³é—­ç¼“å­˜ã€å¯ç”¨è°ƒè¯•æ—¥å¿—ã€å¯ç”¨çƒ­é‡è½½
    }
}
```

---

## 7. ğŸ”„ ç‰ˆæœ¬å‡çº§å…¼å®¹ç®¡ç†


### 7.1 ç‰ˆæœ¬å…¼å®¹æ ¸å¿ƒæŒ‘æˆ˜


**ç‰ˆæœ¬å‡çº§ç±»æ¯”**ï¼šå°±åƒæ‰‹æœºç³»ç»Ÿå‡çº§ï¼Œæ–°åŠŸèƒ½å¾ˆå¥½ï¼Œä½†è€åº”ç”¨å¯èƒ½ä¸å…¼å®¹

```
ç‰ˆæœ¬å‡çº§åœºæ™¯ï¼š
æ—§ç‰ˆæœ¬ Spring Boot 2.x â†’ æ–°ç‰ˆæœ¬ Spring Boot 3.x
æ—§ç‰ˆæœ¬ Java 8 â†’ æ–°ç‰ˆæœ¬ Java 17
æ—§ç‰ˆæœ¬ MySQL 5.7 â†’ æ–°ç‰ˆæœ¬ MySQL 8.0

å¸¸è§é—®é¢˜ï¼š
âŒ é…ç½®å±æ€§åæ”¹å˜äº†
âŒ æŸäº›ç±»è¢«åˆ é™¤æˆ–ç§»åŠ¨äº†  
âŒ é»˜è®¤è¡Œä¸ºå‘ç”Ÿäº†å˜åŒ–
âŒ ä¾èµ–åŒ…ç‰ˆæœ¬ä¸å…¼å®¹

è§£å†³æ€è·¯ï¼š
âœ… æ¸è¿›å¼å‡çº§ï¼Œåˆ†æ­¥éª¤è¿›è¡Œ
âœ… å…¼å®¹æ€§æ£€æŸ¥ï¼Œæå‰å‘ç°é—®é¢˜  
âœ… å‘åå…¼å®¹ï¼Œä¿æŒè€æ¥å£å¯ç”¨
âœ… é…ç½®è¿ç§»ï¼Œè‡ªåŠ¨è½¬æ¢è€é…ç½®
```

### 7.2 é…ç½®å…¼å®¹ç­–ç•¥


**é…ç½®å±æ€§å…¼å®¹å¤„ç†**ï¼š
```java
@Configuration
@EnableConfigurationProperties({
    NewDataSourceProperties.class,
    LegacyDataSourceProperties.class
})
public class CompatibilityConfig {
    
    // æ–°ç‰ˆæœ¬é…ç½®å±æ€§
    @ConfigurationProperties(prefix = "app.datasource")
    @Data
    public static class NewDataSourceProperties {
        private String url;
        private String username;  
        private String password;
        private PoolConfig pool = new PoolConfig();
        
        @Data
        public static class PoolConfig {
            private int maxSize = 10;
            private long timeout = 30000;
        }
    }
    
    // å…¼å®¹æ—§ç‰ˆæœ¬é…ç½®
    @ConfigurationProperties(prefix = "legacy.db")  
    @Data
    @DeprecatedConfigurationProperty(reason = "ä½¿ç”¨ app.datasource æ›¿ä»£")
    public static class LegacyDataSourceProperties {
        private String jdbcUrl;
        private String user;
        private String pass; 
        private int maxConnections = 5;
    }
    
    @Bean
    @Primary
    public DataSource dataSource(
            @Autowired(required = false) NewDataSourceProperties newProps,
            @Autowired(required = false) LegacyDataSourceProperties legacyProps) {
        
        HikariDataSource dataSource = new HikariDataSource();
        
        // ä¼˜å…ˆä½¿ç”¨æ–°é…ç½®ï¼Œå…¼å®¹æ—§é…ç½®
        if (newProps != null && StringUtils.hasText(newProps.getUrl())) {
            dataSource.setJdbcUrl(newProps.getUrl());
            dataSource.setUsername(newProps.getUsername());
            dataSource.setPassword(newProps.getPassword());
            dataSource.setMaximumPoolSize(newProps.getPool().getMaxSize());
        } else if (legacyProps != null && StringUtils.hasText(legacyProps.getJdbcUrl())) {
            // å…¼å®¹æ—§é…ç½®ï¼Œæ˜¾ç¤ºè­¦å‘Š
            log.warn("ä½¿ç”¨å·²å¼ƒç”¨çš„é…ç½® legacy.db.*, è¯·è¿ç§»åˆ° app.datasource.*");
            dataSource.setJdbcUrl(legacyProps.getJdbcUrl());
            dataSource.setUsername(legacyProps.getUser());
            dataSource.setPassword(legacyProps.getPass());
            dataSource.setMaximumPoolSize(legacyProps.getMaxConnections());
        }
        
        return dataSource;
    }
}
```

### 7.3 APIå…¼å®¹å¤„ç†


**æ¥å£ç‰ˆæœ¬å…¼å®¹**ï¼š
```java
// æ–°ç‰ˆæœ¬æ¥å£
@RestController
@RequestMapping("/api/v2")
public class UserControllerV2 {
    
    @PostMapping("/users")
    public ResponseEntity<UserResponse> createUser(@RequestBody UserRequest request) {
        // æ–°ç‰ˆæœ¬å®ç°
        return ResponseEntity.ok(userService.createUser(request));
    }
}

// å…¼å®¹æ—§ç‰ˆæœ¬æ¥å£
@RestController
@RequestMapping("/api/v1")
@Deprecated
public class UserControllerV1 {
    
    @Autowired
    private UserControllerV2 newController;
    
    @PostMapping("/user")  // æ—§çš„URLæ ¼å¼
    public ResponseEntity<?> createUserLegacy(@RequestBody LegacyUserRequest request) {
        log.warn("ä½¿ç”¨å·²å¼ƒç”¨çš„API v1, è¯·å‡çº§åˆ° v2");
        
        // å°†æ—§è¯·æ±‚æ ¼å¼è½¬æ¢ä¸ºæ–°æ ¼å¼
        UserRequest newRequest = convertLegacyRequest(request);
        
        // å§”æ‰˜ç»™æ–°ç‰ˆæœ¬å¤„ç†
        return newController.createUser(newRequest);
    }
    
    private UserRequest convertLegacyRequest(LegacyUserRequest legacy) {
        UserRequest newRequest = new UserRequest();
        newRequest.setName(legacy.getUserName());  // å­—æ®µåæ˜ å°„
        newRequest.setEmail(legacy.getEmailAddr()); // å­—æ®µåæ˜ å°„
        return newRequest;
    }
}
```

### 7.4 æ¸è¿›å¼å‡çº§ç­–ç•¥


**åˆ†é˜¶æ®µå‡çº§è®¡åˆ’**ï¼š
```java
@Configuration
@ConditionalOnProperty(name = "app.migration.enabled", havingValue = "true")
public class MigrationConfig {
    
    // é˜¶æ®µ1ï¼šåŒå†™æ¨¡å¼ï¼ˆæ–°è€ç³»ç»ŸåŒæ—¶å†™å…¥ï¼‰
    @Bean
    @ConditionalOnProperty(name = "app.migration.phase", havingValue = "dual-write")
    public DataMigrationService dualWriteService() {
        return new DualWriteDataService();
    }
    
    // é˜¶æ®µ2ï¼šè¯»å–éªŒè¯æ¨¡å¼ï¼ˆä»æ–°ç³»ç»Ÿè¯»å–ï¼Œè€ç³»ç»ŸéªŒè¯ï¼‰
    @Bean
    @ConditionalOnProperty(name = "app.migration.phase", havingValue = "read-new")
    public DataMigrationService readNewService() {
        return new ReadNewDataService();
    }
    
    // é˜¶æ®µ3ï¼šå®Œå…¨è¿ç§»æ¨¡å¼ï¼ˆåªä½¿ç”¨æ–°ç³»ç»Ÿï¼‰
    @Bean
    @ConditionalOnProperty(name = "app.migration.phase", havingValue = "full-new")
    public DataMigrationService fullNewService() {
        return new FullNewDataService();
    }
}
```

**å‡çº§é…ç½®ç®¡ç†**ï¼š
```yaml
# å‡çº§é˜¶æ®µé…ç½®
app:
  migration:
    enabled: true
    phase: dual-write  # dual-write -> read-new -> full-new
    
  # åŠŸèƒ½å¼€å…³é…ç½®  
  features:
    new-user-service: true      # å¯ç”¨æ–°ç”¨æˆ·æœåŠ¡
    legacy-api-support: true    # ä¿æŒæ—§APIå…¼å®¹
    data-validation: true       # å¯ç”¨æ•°æ®éªŒè¯
    performance-monitoring: true # å¯ç”¨æ€§èƒ½ç›‘æ§

# ç‰ˆæœ¬å…¼å®¹é…ç½®
compatibility:
  spring-boot:
    version: "3.0"
    legacy-support: true
  java:
    version: 17
    enable-preview: false
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é…ç½®æ’é™¤ï¼šä½¿ç”¨excludeæ§åˆ¶ä¸éœ€è¦çš„è‡ªåŠ¨é…ç½®
ğŸ”¸ é¡ºåºæ§åˆ¶ï¼šé€šè¿‡@Before/@Afterç¡®ä¿æ­£ç¡®çš„åŠ è½½é¡ºåº
ğŸ”¸ å±€éƒ¨æ›¿æ¢ï¼šç”¨@Primaryå’Œæ¡ä»¶æ³¨è§£ç²¾ç¡®æ›¿æ¢ç‰¹å®šé…ç½®
ğŸ”¸ æ¡ä»¶ç»„åˆï¼šå¤šç§æ¡ä»¶æ³¨è§£ç»„åˆå®ç°ç²¾å‡†æ§åˆ¶
ğŸ”¸ ç¯å¢ƒè£…é…ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®ç­–ç•¥
ğŸ”¸ ç‰ˆæœ¬å…¼å®¹ï¼šå‡çº§è¿‡ç¨‹ä¸­çš„å‘åå…¼å®¹å¤„ç†
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™éœ€è¦ç²¾å‡†æ§åˆ¶**
```
éœ€è¦æ§åˆ¶çš„åœºæ™¯ï¼š
â€¢ è‡ªåŠ¨é…ç½®å†²çªï¼šæœ‰å¤šä¸ªç›¸åŒç±»å‹çš„Bean
â€¢ ä¸éœ€è¦æŸäº›åŠŸèƒ½ï¼šæ’é™¤ä¸å¿…è¦çš„è‡ªåŠ¨é…ç½®
â€¢ åŠ è½½é¡ºåºé‡è¦ï¼šæŸäº›Beanæœ‰ä¾èµ–å…³ç³»
â€¢ ç¯å¢ƒå·®å¼‚ï¼šä¸åŒç¯å¢ƒéœ€è¦ä¸åŒé…ç½®
â€¢ ç‰ˆæœ¬å‡çº§ï¼šæ–°è€ç‰ˆæœ¬å…¼å®¹é—®é¢˜

æ§åˆ¶çš„å¥½å¤„ï¼š
â€¢ å‡å°‘å†…å­˜å ç”¨ï¼šåªåŠ è½½éœ€è¦çš„ç»„ä»¶
â€¢ é¿å…å†²çªï¼šç²¾ç¡®æ§åˆ¶Beançš„åˆ›å»º
â€¢ æå‡æ€§èƒ½ï¼šå‡å°‘ä¸å¿…è¦çš„åˆå§‹åŒ–
â€¢ å¢å¼ºç¨³å®šæ€§ï¼šæŒ‰æ­£ç¡®é¡ºåºåŠ è½½ä¾èµ–
```

**ğŸ”¹ å¦‚ä½•é€‰æ‹©æ§åˆ¶ç­–ç•¥**
```
ç­–ç•¥é€‰æ‹©åŸåˆ™ï¼š

ç®€å•åœºæ™¯ â†’ é…ç½®æ–‡ä»¶exclude
å¤æ‚åœºæ™¯ â†’ æ³¨è§£ç»„åˆæ§åˆ¶
é¡ºåºä¾èµ– â†’ @AutoConfigureBefore/After
ç¯å¢ƒå·®å¼‚ â†’ @Profile + æ¡ä»¶æ³¨è§£
ç‰ˆæœ¬å‡çº§ â†’ æ¸è¿›å¼å…¼å®¹ç­–ç•¥

è®°ä½ï¼šä»ç®€å•å¼€å§‹ï¼Œéœ€è¦æ—¶å†å¤æ‚åŒ–
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ é…ç½®æ§åˆ¶æœ€ä½³å®è·µ**
- **æ˜ç¡®éœ€æ±‚**ï¼šå…ˆææ¸…æ¥šè¦æ’é™¤ä»€ä¹ˆã€è¦æ§åˆ¶ä»€ä¹ˆ
- **ä»ç®€å•å¼€å§‹**ï¼šèƒ½ç”¨é…ç½®æ–‡ä»¶è§£å†³å°±ä¸ç”¨ä»£ç 
- **é€æ­¥ä¼˜åŒ–**ï¼šå…ˆè®©åŠŸèƒ½è·‘èµ·æ¥ï¼Œå†åšç²¾ç»†åŒ–æ§åˆ¶
- **ç¯å¢ƒåŒºåˆ†**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ä½¿ç”¨ä¸åŒç­–ç•¥
- **ç‰ˆæœ¬è§„åˆ’**ï¼šæå‰è€ƒè™‘å‡çº§å…¼å®¹é—®é¢˜

**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³**
- **é…ç½®ä¸ç”Ÿæ•ˆ**ï¼šæ£€æŸ¥æ¡ä»¶æ³¨è§£æ˜¯å¦æ»¡è¶³
- **å¯åŠ¨é¡ºåºé”™è¯¯**ï¼šä½¿ç”¨@AutoConfigureBefore/Afterè°ƒæ•´
- **Beanå†²çª**ï¼šä½¿ç”¨@Primaryæ˜ç¡®ä¼˜å…ˆçº§
- **ç¯å¢ƒé…ç½®æ··ä¹±**ï¼šè§„èŒƒProfileå‘½åå’Œä½¿ç”¨

**æ ¸å¿ƒè®°å¿†**ï¼š
- é…ç½®æ§åˆ¶ä¸ºç²¾å‡†ï¼Œæ’é™¤å¤šä½™ç”¨exclude
- é¡ºåºæ§åˆ¶é æ³¨è§£ï¼ŒBefore/Afterå¾ˆå…³é”®  
- æ¡ä»¶ç»„åˆè¦åˆç†ï¼Œç¯å¢ƒProfileè¦åˆ†æ¸…
- ç‰ˆæœ¬å‡çº§è¦å…¼å®¹ï¼Œæ¸è¿›è¿ç§»ä¿ç¨³å®š