---
title: 5ã€ConfigurationPropertiesä¸ç±»å‹å®‰å…¨é…ç½®
---
## ğŸ“š ç›®å½•

1. [@ConfigurationPropertieså‰ç¼€è§„èŒƒ](#1-configurationpropertieså‰ç¼€è§„èŒƒ)
2. [æ¾æ•£ç»‘å®šæœºåˆ¶](#2-æ¾æ•£ç»‘å®šæœºåˆ¶)
3. [å±æ€§æ ¡éªŒ@Validated](#3-å±æ€§æ ¡éªŒvalidated)
4. [åµŒå¥—å¯¹è±¡é…ç½®](#4-åµŒå¥—å¯¹è±¡é…ç½®)
5. [é›†åˆå±æ€§ç»‘å®š](#5-é›†åˆå±æ€§ç»‘å®š)
6. [@ConstructorBindingæ„é€ ç»‘å®š](#6-constructorbindingæ„é€ ç»‘å®š)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ @ConfigurationPropertieså‰ç¼€è§„èŒƒ


### 1.1 ä»€ä¹ˆæ˜¯@ConfigurationProperties


**ğŸ”¸ ç®€å•ç†è§£**ï¼š
`@ConfigurationProperties`å°±åƒæ˜¯Spring Bootçš„"**é…ç½®ç®¡å®¶**"ï¼Œå®ƒèƒ½è‡ªåŠ¨æŠŠé…ç½®æ–‡ä»¶ä¸­çš„å€¼è¯»å–å‡ºæ¥ï¼Œç„¶åæ•´æ•´é½é½åœ°æ”¾åˆ°Javaå¯¹è±¡ä¸­ã€‚

```
æƒ³è±¡ä¸€ä¸‹ï¼š
é…ç½®æ–‡ä»¶ = ä¸€ä¸ªå‚¨ç‰©æŸœï¼Œé‡Œé¢æ”¾ç€å„ç§é…ç½®
@ConfigurationProperties = ç®¡ç†å‘˜ï¼Œè´Ÿè´£æŠŠä¸œè¥¿åˆ†ç±»æ•´ç†
Javaå¯¹è±¡ = æ•´ç†å¥½çš„æŠ½å±‰ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±çš„ä½ç½®
```

### 1.2 å‰ç¼€è§„èŒƒçš„ä½œç”¨


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦å‰ç¼€**ï¼š
å°±åƒå®¶é‡Œçš„åœ°å€ä¸€æ ·ï¼Œ`å¹¿ä¸œçœ-æ·±åœ³å¸‚-å—å±±åŒº-æŸæŸè¡—é“`ï¼Œå‰ç¼€å¸®æˆ‘ä»¬æŠŠç›¸å…³çš„é…ç½®å½’ç±»ç®¡ç†ã€‚

```yaml
# application.yml - è¿™æ ·å†™å¾ˆæ¸…æ™°
myapp:
  database:
    host: localhost
    port: 3306
    username: root
    password: 123456
  
  redis:
    host: localhost
    port: 6379
    timeout: 5000
```

### 1.3 å‰ç¼€å‘½åè§„èŒƒè¯¦è§£


**ğŸ¯ æ ‡å‡†å‘½åè§„åˆ™**ï¼š

| è§„èŒƒç±»å‹ | **æ­£ç¡®ç¤ºä¾‹** | **é”™è¯¯ç¤ºä¾‹** | **è¯´æ˜** |
|---------|-------------|-------------|---------|
| ğŸ”¸ **å°å†™å­—æ¯** | `myapp.database.host` | `MyApp.Database.Host` | `ä½¿ç”¨å°å†™ï¼Œä¸ç”¨å¤§å†™` |
| ğŸ”¸ **çŸ­æ¨ªçº¿åˆ†éš”** | `my-custom-service` | `my_custom_service` | `ç”¨-è¿æ¥ï¼Œä¸ç”¨ä¸‹åˆ’çº¿` |
| ğŸ”¸ **å±‚æ¬¡æ¸…æ™°** | `app.security.jwt.secret` | `app-security-jwt-secret` | `ç”¨.è¡¨ç¤ºå±‚çº§å…³ç³»` |
| ğŸ”¸ **è¯­ä¹‰æ˜ç¡®** | `database.connection.pool` | `db.conn.p` | `åç§°è¦æœ‰æ˜ç¡®å«ä¹‰` |

**ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š

```java
// å¥½çš„å‰ç¼€è®¾è®¡
@ConfigurationProperties(prefix = "myapp.security.jwt")
public class JwtProperties {
    private String secret;
    private long expiration;
    private String issuer;
}

// å¯¹åº”çš„é…ç½®æ–‡ä»¶
myapp:
  security:
    jwt:
      secret: mySecretKey123
      expiration: 86400
      issuer: myapp-service
```

### 1.4 å‰ç¼€è§„èŒƒæœ€ä½³å®è·µ


**ğŸ“‹ æ¨èçš„å‰ç¼€ç»“æ„**ï¼š

```
å…¬å¸/é¡¹ç›®çº§åˆ«å‰ç¼€
â”œâ”€â”€ åŠŸèƒ½æ¨¡å—åˆ†ç±»
    â”œâ”€â”€ å…·ä½“åŠŸèƒ½é…ç½®
    â””â”€â”€ å­åŠŸèƒ½é…ç½®

ç¤ºä¾‹ï¼š
mycompany:           â† å…¬å¸çº§åˆ«
  userservice:       â† æœåŠ¡çº§åˆ«  
    database:        â† åŠŸèƒ½æ¨¡å—
      mysql:         â† å…·ä½“å®ç°
        host: xxx
        port: xxx
    cache:           â† å¦ä¸€ä¸ªæ¨¡å—
      redis:         â† å…·ä½“å®ç°
        host: xxx
```

---

## 2. ğŸ”„ æ¾æ•£ç»‘å®šæœºåˆ¶


### 2.1 ä»€ä¹ˆæ˜¯æ¾æ•£ç»‘å®š


**ğŸ”¸ é€šä¿—è§£é‡Š**ï¼š
æ¾æ•£ç»‘å®šå°±åƒæ˜¯Spring Bootçš„"**æ™ºèƒ½ç¿»è¯‘å®˜**"ï¼Œå®ƒèƒ½ç†è§£ä½ ç”¨ä¸åŒæ–¹å¼å†™çš„åŒä¸€ä¸ªé…ç½®å±æ€§åã€‚

```
å°±åƒäººåä¸€æ ·ï¼š
- å¼ ä¸‰ = å¼  ä¸‰ = Zhang San = zhang-san = ZHANG_SAN
Spring Bootéƒ½èƒ½è®¤å‡ºè¿™æ˜¯åŒä¸€ä¸ªäººï¼
```

### 2.2 æ¾æ•£ç»‘å®šæ”¯æŒçš„æ ¼å¼


**ğŸ¯ åŒä¸€ä¸ªå±æ€§çš„å¤šç§å†™æ³•**ï¼š

```java
// Javaç±»ä¸­çš„å±æ€§å
public class DatabaseProperties {
    private String userName;  // é©¼å³°å‘½å
}
```

**âœ… é…ç½®æ–‡ä»¶ä¸­éƒ½å¯ä»¥è¿™æ ·å†™**ï¼š

```yaml
# æ–¹å¼1ï¼šæ ‡å‡†çŸ­æ¨ªçº¿æ ¼å¼ï¼ˆæ¨èï¼‰
myapp:
  database:
    user-name: admin

# æ–¹å¼2ï¼šé©¼å³°æ ¼å¼
myapp:
  database:
    userName: admin

# æ–¹å¼3ï¼šä¸‹åˆ’çº¿æ ¼å¼
myapp:
  database:
    user_name: admin

# æ–¹å¼4ï¼šå…¨å¤§å†™æ ¼å¼ï¼ˆç¯å¢ƒå˜é‡ï¼‰
MYAPP_DATABASE_USER_NAME=admin
```

### 2.3 æ¾æ•£ç»‘å®šè§„åˆ™è¡¨


| **Javaå±æ€§å** | **YAMLé…ç½®** | **Propertiesé…ç½®** | **ç¯å¢ƒå˜é‡** |
|---------------|-------------|------------------|-------------|
| `userName` | `user-name` | `user-name` | `USER_NAME` |
| `maxConnections` | `max-connections` | `max-connections` | `MAX_CONNECTIONS` |
| `isEnabled` | `is-enabled` | `is-enabled` | `IS_ENABLED` |
| `timeoutMs` | `timeout-ms` | `timeout-ms` | `TIMEOUT_MS` |

### 2.4 æ¾æ•£ç»‘å®šå®é™…åº”ç”¨


**ğŸ§ª åŠ¨æ‰‹éªŒè¯**ï¼š

```java
@Component
@ConfigurationProperties(prefix = "demo.user")
public class UserProperties {
    private String firstName;     // é©¼å³°å‘½å
    private int maxAge;          // é©¼å³°å‘½å
    private boolean isActive;    // å¸ƒå°”å€¼
    
    // getterå’Œsetteræ–¹æ³•...
}
```

```yaml
# é…ç½®æ–‡ä»¶ - å¤šç§å†™æ³•éƒ½è¡Œ
demo:
  user:
    first-name: "å¼ ä¸‰"        # æ¨èå†™æ³•
    max-age: 25              # æ¨èå†™æ³•  
    is-active: true          # æ¨èå†™æ³•
```

**ğŸ” æµ‹è¯•éªŒè¯ä»£ç **ï¼š

```java
@RestController
public class TestController {
    
    @Autowired
    private UserProperties userProperties;
    
    @GetMapping("/test")
    public String test() {
        return String.format("ç”¨æˆ·ï¼š%sï¼Œå¹´é¾„ï¼š%dï¼ŒçŠ¶æ€ï¼š%s", 
            userProperties.getFirstName(),
            userProperties.getMaxAge(),
            userProperties.isActive() ? "æ¿€æ´»" : "æœªæ¿€æ´»");
    }
}
```

---

## 3. âœ… å±æ€§æ ¡éªŒ@Validated


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦å±æ€§æ ¡éªŒ


**ğŸš¨ é—®é¢˜åœºæ™¯**ï¼š
æƒ³è±¡ä½ å¼€äº†ä¸€å®¶é¤å…ï¼Œå¦‚æœä¸æ£€æŸ¥é£Ÿæè´¨é‡å°±ç›´æ¥åšèœï¼Œå¯èƒ½ä¼šå‡ºå¤§é—®é¢˜ï¼é…ç½®ä¹Ÿä¸€æ ·ï¼Œé”™è¯¯çš„é…ç½®å¯èƒ½è®©æ•´ä¸ªåº”ç”¨å´©æºƒã€‚

```
æ²¡æœ‰æ ¡éªŒçš„é—®é¢˜ï¼š
âŒ ç«¯å£å·å†™æˆäº† -1
âŒ é‚®ç®±æ ¼å¼å†™é”™äº†
âŒ å¿…å¡«é¡¹ç›®ä¸ºç©º
âŒ æ•°å€¼è¶…å‡ºäº†åˆç†èŒƒå›´
```

### 3.2 @ValidatedåŸºæœ¬ç”¨æ³•


**ğŸ”§ ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–**

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
</dependency>
```

**ğŸ”§ ç¬¬äºŒæ­¥ï¼šé…ç½®ç±»åŠ æ ¡éªŒ**

```java
@Component
@ConfigurationProperties(prefix = "myapp.server")
@Validated  // å¼€å¯æ ¡éªŒåŠŸèƒ½
public class ServerProperties {
    
    @NotBlank(message = "æœåŠ¡å™¨åç§°ä¸èƒ½ä¸ºç©º")
    private String name;
    
    @Min(value = 1024, message = "ç«¯å£å·ä¸èƒ½å°äº1024")
    @Max(value = 65535, message = "ç«¯å£å·ä¸èƒ½å¤§äº65535")
    private int port;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    @NotBlank(message = "ç®¡ç†å‘˜é‚®ç®±ä¸èƒ½ä¸ºç©º")
    private String adminEmail;
    
    // getterå’Œsetter...
}
```

### 3.3 å¸¸ç”¨æ ¡éªŒæ³¨è§£è¯¦è§£


**ğŸ“‹ åŸºç¡€æ ¡éªŒæ³¨è§£**ï¼š

```java
public class ValidationDemo {
    
    // å­—ç¬¦ä¸²æ ¡éªŒ
    @NotNull(message = "ä¸èƒ½ä¸ºnull")
    @NotEmpty(message = "ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²")  
    @NotBlank(message = "ä¸èƒ½ä¸ºç©ºç™½å­—ç¬¦ä¸²")
    @Size(min = 2, max = 10, message = "é•¿åº¦å¿…é¡»åœ¨2-10ä¹‹é—´")
    private String username;
    
    // æ•°å€¼æ ¡éªŒ
    @Min(value = 0, message = "å¹´é¾„ä¸èƒ½å°äº0")
    @Max(value = 150, message = "å¹´é¾„ä¸èƒ½å¤§äº150")
    @Positive(message = "å¿…é¡»æ˜¯æ­£æ•°")
    private int age;
    
    // æ ¼å¼æ ¡éªŒ
    @Email(message = "é‚®ç®±æ ¼å¼é”™è¯¯")
    private String email;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    // å¸ƒå°”å€¼æ ¡éªŒ
    @AssertTrue(message = "å¿…é¡»åŒæ„ç”¨æˆ·åè®®")
    private boolean agreeTerms;
}
```

### 3.4 è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™


**ğŸ¯ å®é™…ä¸šåŠ¡åœºæ™¯**ï¼šå‡è®¾æˆ‘ä»¬éœ€è¦æ ¡éªŒæœåŠ¡å™¨ç¯å¢ƒåªèƒ½æ˜¯devã€testã€prod

```java
// è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = EnvironmentValidator.class)
public @interface ValidEnvironment {
    String message() default "ç¯å¢ƒé…ç½®åªèƒ½æ˜¯devã€testã€prod";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

// æ ¡éªŒå™¨å®ç°
public class EnvironmentValidator implements ConstraintValidator<ValidEnvironment, String> {
    
    private static final Set<String> VALID_ENVS = Set.of("dev", "test", "prod");
    
    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        if (value == null) return false;
        return VALID_ENVS.contains(value.toLowerCase());
    }
}
```

**åº”ç”¨åˆ°é…ç½®ç±»**ï¼š

```java
@ConfigurationProperties(prefix = "myapp")
@Validated
public class AppProperties {
    
    @ValidEnvironment(message = "ç¯å¢ƒé…ç½®é”™è¯¯ï¼Œåªæ”¯æŒï¼šdevã€testã€prod")
    private String environment;
    
    // getterå’Œsetter...
}
```

---

## 4. ğŸ—ï¸ åµŒå¥—å¯¹è±¡é…ç½®


### 4.1 ä»€ä¹ˆæ˜¯åµŒå¥—å¯¹è±¡é…ç½®


**ğŸ”¸ ç”Ÿæ´»ç±»æ¯”**ï¼š
å°±åƒä½ çš„å®¶åº­åœ°å€ï¼š`å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºç§‘æŠ€å›­åŒ—åŒº`ï¼Œè¿™æ˜¯ä¸€ä¸ªå±‚å±‚åµŒå¥—çš„ç»“æ„ï¼ŒåµŒå¥—å¯¹è±¡é…ç½®ä¹Ÿæ˜¯è¿™æ ·çš„æ¦‚å¿µã€‚

```
å®¶åº­åœ°å€ç»“æ„ï¼š
åœ°å€
â”œâ”€â”€ çœä»½ï¼šå¹¿ä¸œçœ
â”œâ”€â”€ åŸå¸‚ï¼šæ·±åœ³å¸‚  
â”œâ”€â”€ åŒºåŸŸï¼šå—å±±åŒº
â””â”€â”€ è¯¦ç»†ï¼šç§‘æŠ€å›­åŒ—åŒº

Springé…ç½®ç»“æ„ï¼š
åº”ç”¨é…ç½®
â”œâ”€â”€ æ•°æ®åº“é…ç½®
â”œâ”€â”€ ç¼“å­˜é…ç½®
â””â”€â”€ å®‰å…¨é…ç½®
    â”œâ”€â”€ JWTé…ç½®
    â””â”€â”€ OAuthé…ç½®
```

### 4.2 åµŒå¥—é…ç½®çš„å®ç°æ–¹å¼


**ğŸ¯ å®é™…æ¡ˆä¾‹ï¼šç”µå•†ç³»ç»Ÿé…ç½®**

```java
// ä¸»é…ç½®ç±»
@Component
@ConfigurationProperties(prefix = "ecommerce")
@Validated
public class EcommerceProperties {
    
    @Valid  // å¿…é¡»åŠ è¿™ä¸ªæ³¨è§£ï¼ŒåµŒå¥—å¯¹è±¡æ‰ä¼šè¢«æ ¡éªŒ
    private DatabaseConfig database;
    
    @Valid
    private PaymentConfig payment;
    
    @Valid 
    private SecurityConfig security;
    
    // getterå’Œsetter...
    
    // åµŒå¥—ç±»1ï¼šæ•°æ®åº“é…ç½®
    public static class DatabaseConfig {
        @NotBlank(message = "æ•°æ®åº“ä¸»æœºä¸èƒ½ä¸ºç©º")
        private String host;
        
        @Range(min = 1, max = 65535, message = "ç«¯å£èŒƒå›´1-65535")
        private int port;
        
        @NotBlank(message = "æ•°æ®åº“åç§°ä¸èƒ½ä¸ºç©º")  
        private String name;
        
        // getterå’Œsetter...
    }
    
    // åµŒå¥—ç±»2ï¼šæ”¯ä»˜é…ç½®
    public static class PaymentConfig {
        @NotBlank(message = "æ”¯ä»˜å®AppIdä¸èƒ½ä¸ºç©º")
        private String alipayAppId;
        
        @NotBlank(message = "å¾®ä¿¡å•†æˆ·å·ä¸èƒ½ä¸ºç©º")
        private String wechatMerchantId;
        
        @DecimalMin(value = "0.01", message = "æœ€å°é‡‘é¢ä¸èƒ½å°äº0.01")
        private BigDecimal minAmount;
        
        // getterå’Œsetter...
    }
    
    // åµŒå¥—ç±»3ï¼šå®‰å…¨é…ç½®
    public static class SecurityConfig {
        @Valid
        private JwtConfig jwt;
        
        @Valid
        private RateLimitConfig rateLimit;
        
        // JWTé…ç½®ï¼ˆäºŒçº§åµŒå¥—ï¼‰
        public static class JwtConfig {
            @NotBlank(message = "JWTå¯†é’¥ä¸èƒ½ä¸ºç©º")
            private String secret;
            
            @Positive(message = "è¿‡æœŸæ—¶é—´å¿…é¡»å¤§äº0")
            private long expiration;
            
            // getterå’Œsetter...
        }
        
        // é™æµé…ç½®ï¼ˆäºŒçº§åµŒå¥—ï¼‰
        public static class RateLimitConfig {
            @Positive(message = "æ¯ç§’è¯·æ±‚æ•°å¿…é¡»å¤§äº0")
            private int requestsPerSecond;
            
            @Positive(message = "çª—å£å¤§å°å¿…é¡»å¤§äº0")
            private int windowSizeInSeconds;
            
            // getterå’Œsetter...
        }
        
        // getterå’Œsetter...
    }
}
```

**å¯¹åº”çš„é…ç½®æ–‡ä»¶**ï¼š

```yaml
ecommerce:
  # æ•°æ®åº“é…ç½®
  database:
    host: localhost
    port: 3306
    name: ecommerce_db
  
  # æ”¯ä»˜é…ç½®
  payment:
    alipay-app-id: "2021001234567890"
    wechat-merchant-id: "1234567890"
    min-amount: 0.01
  
  # å®‰å…¨é…ç½®
  security:
    # JWTé…ç½®ï¼ˆäºŒçº§åµŒå¥—ï¼‰
    jwt:
      secret: "myJwtSecretKey123456"
      expiration: 86400
    
    # é™æµé…ç½®ï¼ˆäºŒçº§åµŒå¥—ï¼‰
    rate-limit:
      requests-per-second: 100
      window-size-in-seconds: 60
```

### 4.3 åµŒå¥—é…ç½®çš„ä½¿ç”¨æŠ€å·§


**âœ… æœ€ä½³å®è·µ**ï¼š

```java
@RestController
public class ConfigTestController {
    
    @Autowired
    private EcommerceProperties properties;
    
    @GetMapping("/config/test")
    public Map<String, Object> testConfig() {
        Map<String, Object> result = new HashMap<>();
        
        // è®¿é—®åµŒå¥—å±æ€§
        result.put("æ•°æ®åº“åœ°å€", 
            properties.getDatabase().getHost() + ":" + 
            properties.getDatabase().getPort());
            
        result.put("JWTè¿‡æœŸæ—¶é—´", 
            properties.getSecurity().getJwt().getExpiration());
            
        result.put("æ”¯ä»˜æœ€å°é‡‘é¢", 
            properties.getPayment().getMinAmount());
            
        return result;
    }
}
```

**ğŸš¨ å¸¸è§é”™è¯¯é¿å…**ï¼š

```java
// âŒ é”™è¯¯ï¼šå¿˜è®°@Validæ³¨è§£
@ConfigurationProperties(prefix = "app")
public class AppConfig {
    private DatabaseConfig database;  // ç¼ºå°‘@Validï¼ŒåµŒå¥—æ ¡éªŒä¸ç”Ÿæ•ˆ
}

// âœ… æ­£ç¡®ï¼šæ·»åŠ @Validæ³¨è§£
@ConfigurationProperties(prefix = "app") 
@Validated
public class AppConfig {
    @Valid  // å¿…é¡»åŠ è¿™ä¸ª
    private DatabaseConfig database;
}
```

---

## 5. ğŸ“‹ é›†åˆå±æ€§ç»‘å®š


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦é›†åˆå±æ€§ç»‘å®š


**ğŸ”¸ å®é™…åœºæ™¯**ï¼š
æƒ³è±¡ä½ è¦é…ç½®ä¸€ä¸ªå¾®æœåŠ¡ç³»ç»Ÿï¼Œéœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ã€å¤šä¸ªRediså®ä¾‹ã€å¤šä¸ªå¤–éƒ¨APIï¼Œè¿™æ—¶å°±éœ€è¦é›†åˆé…ç½®ã€‚

```
å•ä¸ªé…ç½® â†’ é€‚åˆç®€å•åœºæ™¯
æ•°æ®åº“ï¼šä¸€ä¸ªMySQL

é›†åˆé…ç½® â†’ é€‚åˆå¤æ‚åœºæ™¯  
æ•°æ®åº“ï¼šç”¨æˆ·åº“ã€è®¢å•åº“ã€å•†å“åº“ã€æ—¥å¿—åº“...
```

### 5.2 åŸºç¡€é›†åˆç±»å‹ç»‘å®š


**ğŸ¯ Listé›†åˆé…ç½®**ï¼š

```java
@ConfigurationProperties(prefix = "app.servers")
public class ServerListProperties {
    
    // ç®€å•å­—ç¬¦ä¸²åˆ—è¡¨
    private List<String> hosts;
    
    // æ•°å­—åˆ—è¡¨
    private List<Integer> ports;
    
    // å¤æ‚å¯¹è±¡åˆ—è¡¨
    private List<ServerInfo> instances;
    
    public static class ServerInfo {
        private String name;
        private String host;
        private int port;
        private boolean enabled;
        
        // getterå’Œsetter...
    }
    
    // getterå’Œsetter...
}
```

**å¯¹åº”çš„YAMLé…ç½®**ï¼š

```yaml
app:
  servers:
    # ç®€å•åˆ—è¡¨é…ç½®
    hosts:
      - "192.168.1.100"
      - "192.168.1.101" 
      - "192.168.1.102"
    
    ports:
      - 8080
      - 8081
      - 8082
    
    # å¤æ‚å¯¹è±¡åˆ—è¡¨
    instances:
      - name: "ä¸»æœåŠ¡å™¨"
        host: "192.168.1.100"
        port: 8080
        enabled: true
      - name: "å¤‡ç”¨æœåŠ¡å™¨"
        host: "192.168.1.101"
        port: 8081
        enabled: false
```

### 5.3 Mapé›†åˆé…ç½®


**ğŸ¯ Mapé…ç½®å®é™…åº”ç”¨**ï¼š

```java
@ConfigurationProperties(prefix = "app.datasources")
public class DataSourceProperties {
    
    // ç®€å•é”®å€¼å¯¹
    private Map<String, String> urls;
    
    // å¤æ‚å¯¹è±¡Map
    private Map<String, DatabaseConfig> configs;
    
    public static class DatabaseConfig {
        private String driverClassName;
        private String username;
        private String password;
        private int maxConnections;
        
        // getterå’Œsetter...
    }
    
    // getterå’Œsetter...
}
```

**å¯¹åº”çš„é…ç½®æ–‡ä»¶**ï¼š

```yaml
app:
  datasources:
    # ç®€å•Mapé…ç½®
    urls:
      user-db: "jdbc:mysql://localhost:3306/user_db"
      order-db: "jdbc:mysql://localhost:3307/order_db"
      product-db: "jdbc:mysql://localhost:3308/product_db"
    
    # å¤æ‚å¯¹è±¡Mapé…ç½®
    configs:
      user-db:
        driver-class-name: "com.mysql.cj.jdbc.Driver"
        username: "user_admin"
        password: "password123"
        max-connections: 20
      
      order-db:
        driver-class-name: "com.mysql.cj.jdbc.Driver"
        username: "order_admin" 
        password: "password456"
        max-connections: 30
```

### 5.4 é›†åˆé…ç½®çš„æ ¡éªŒ


**âœ… é›†åˆå…ƒç´ æ ¡éªŒ**ï¼š

```java
@ConfigurationProperties(prefix = "app.api")
@Validated
public class ApiProperties {
    
    @Valid  // æ ¡éªŒé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ 
    @Size(min = 1, message = "è‡³å°‘éœ€è¦é…ç½®ä¸€ä¸ªAPI")
    private List<ApiConfig> endpoints;
    
    public static class ApiConfig {
        @NotBlank(message = "APIåç§°ä¸èƒ½ä¸ºç©º")
        private String name;
        
        @URL(message = "URLæ ¼å¼ä¸æ­£ç¡®")
        private String url;
        
        @Min(value = 1000, message = "è¶…æ—¶æ—¶é—´ä¸èƒ½å°äº1000ms")
        private int timeoutMs;
        
        // getterå’Œsetter...
    }
    
    // getterå’Œsetter...
}
```

### 5.5 é›†åˆé…ç½®ä½¿ç”¨ç¤ºä¾‹


**ğŸ§ª å®é™…ä½¿ç”¨ä»£ç **ï¼š

```java
@Service
public class MultiDataSourceService {
    
    @Autowired
    private DataSourceProperties dataSourceProperties;
    
    public void printDataSourceInfo() {
        // éå†Mapé…ç½®
        dataSourceProperties.getConfigs().forEach((name, config) -> {
            System.out.println("æ•°æ®æºï¼š" + name);
            System.out.println("é©±åŠ¨ï¼š" + config.getDriverClassName());
            System.out.println("æœ€å¤§è¿æ¥æ•°ï¼š" + config.getMaxConnections());
            System.out.println("---");
        });
    }
    
    public DatabaseConfig getDataSourceConfig(String name) {
        return dataSourceProperties.getConfigs().get(name);
    }
}
```

---

## 6. ğŸ”§ @ConstructorBindingæ„é€ ç»‘å®š


### 6.1 ä»€ä¹ˆæ˜¯æ„é€ ç»‘å®š


**ğŸ”¸ ç†è§£æ„é€ ç»‘å®š**ï¼š
æ™®é€šçš„`@ConfigurationProperties`åƒæ˜¯"**æ¬å®¶å·¥äºº**"ï¼Œå…ˆé€ å¥½æˆ¿å­ï¼Œå†æŠŠå®¶å…·ä¸€ä»¶ä»¶æ¬è¿›å»ã€‚è€Œ`@ConstructorBinding`åƒæ˜¯"**å®šåˆ¶å®¶å…·å·¥å‚**"ï¼ŒæŒ‰ç…§ä½ çš„è¦æ±‚ä¸€æ¬¡æ€§åˆ¶ä½œå¥½æˆå“å®¶å…·ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼š
1. new å¯¹è±¡()           â†’ é€ æˆ¿å­
2. setName("å¼ ä¸‰")      â†’ æ¬å®¶å…·
3. setAge(25)          â†’ æ¬å®¶å…·

æ„é€ ç»‘å®šæ–¹å¼ï¼š  
1. new å¯¹è±¡("å¼ ä¸‰", 25) â†’ å®šåˆ¶æˆå“
```

### 6.2 @ConstructorBindingåŸºæœ¬ç”¨æ³•


**ğŸ¯ ä¸å¯å˜é…ç½®å¯¹è±¡**ï¼š

```java
@ConfigurationProperties(prefix = "app.security")
@ConstructorBinding  // ä½¿ç”¨æ„é€ å‡½æ•°ç»‘å®š
public class SecurityProperties {
    
    private final String jwtSecret;
    private final long jwtExpiration;
    private final boolean enableCsrf;
    private final List<String> allowedOrigins;
    
    // æ„é€ å‡½æ•°ï¼ˆSpringä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°ï¼‰
    public SecurityProperties(
            String jwtSecret,
            long jwtExpiration, 
            boolean enableCsrf,
            List<String> allowedOrigins) {
        this.jwtSecret = jwtSecret;
        this.jwtExpiration = jwtExpiration;
        this.enableCsrf = enableCsrf;
        this.allowedOrigins = allowedOrigins;
    }
    
    // åªæä¾›getteræ–¹æ³•ï¼Œæ²¡æœ‰setter
    public String getJwtSecret() {
        return jwtSecret;
    }
    
    public long getJwtExpiration() {
        return jwtExpiration;
    }
    
    public boolean isEnableCsrf() {
        return enableCsrf;
    }
    
    public List<String> getAllowedOrigins() {
        return allowedOrigins;
    }
}
```

**é…ç½®æ–‡ä»¶**ï¼š

```yaml
app:
  security:
    jwt-secret: "mySecretKey123"
    jwt-expiration: 86400
    enable-csrf: false
    allowed-origins:
      - "http://localhost:3000"
      - "https://myapp.com"
```

### 6.3 å¯ç”¨@ConstructorBindingçš„é…ç½®


**ğŸ”§ é…ç½®æ–¹å¼1ï¼šä½¿ç”¨@EnableConfigurationProperties**

```java
@SpringBootApplication
@EnableConfigurationProperties(SecurityProperties.class)
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

**ğŸ”§ é…ç½®æ–¹å¼2ï¼šä½¿ç”¨@ConfigurationPropertiesScan**

```java
@SpringBootApplication
@ConfigurationPropertiesScan("com.myapp.config")  // æ‰«ææŒ‡å®šåŒ…
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

### 6.4 æ„é€ ç»‘å®švsä¼ ç»Ÿç»‘å®šå¯¹æ¯”


| **ç‰¹æ€§å¯¹æ¯”** | **@ConstructorBinding** | **ä¼ ç»ŸSetterç»‘å®š** |
|-------------|------------------------|-------------------|
| ğŸ”¸ **ä¸å¯å˜æ€§** | `âœ… å¯¹è±¡åˆ›å»ºåä¸å¯ä¿®æ”¹` | `âŒ å¯ä»¥éšæ—¶ä¿®æ”¹å±æ€§` |
| ğŸ”¸ **çº¿ç¨‹å®‰å…¨** | `âœ… å¤©ç„¶çº¿ç¨‹å®‰å…¨` | `âŒ éœ€è¦é¢å¤–è€ƒè™‘çº¿ç¨‹å®‰å…¨` |
| ğŸ”¸ **ç©ºå€¼å¤„ç†** | `âœ… æ„é€ æ—¶å°±èƒ½å‘ç°é—®é¢˜` | `âŒ è¿è¡Œæ—¶å¯èƒ½å‡ºç°ç©ºå€¼` |
| ğŸ”¸ **ä»£ç ç®€æ´** | `âœ… ä¸éœ€è¦å†™setteræ–¹æ³•` | `âŒ éœ€è¦å¤§é‡setteræ–¹æ³•` |
| ğŸ”¸ **æ ¡éªŒæ—¶æœº** | `âœ… å¯¹è±¡åˆ›å»ºæ—¶æ ¡éªŒ` | `âŒ ä½¿ç”¨æ—¶æ‰å‘ç°é—®é¢˜` |

### 6.5 æ„é€ ç»‘å®šçš„é«˜çº§ç”¨æ³•


**ğŸ¯ åµŒå¥—å¯¹è±¡æ„é€ ç»‘å®š**ï¼š

```java
@ConfigurationProperties(prefix = "app.database")
@ConstructorBinding
public class DatabaseProperties {
    
    private final ConnectionPool pool;
    private final Security security;
    
    public DatabaseProperties(ConnectionPool pool, Security security) {
        this.pool = pool;
        this.security = security;
    }
    
    // åµŒå¥—ä¸å¯å˜ç±»1
    public static class ConnectionPool {
        private final int maxSize;
        private final int minSize;
        private final long maxWaitMs;
        
        public ConnectionPool(int maxSize, int minSize, long maxWaitMs) {
            this.maxSize = maxSize;
            this.minSize = minSize;
            this.maxWaitMs = maxWaitMs;
        }
        
        // getteræ–¹æ³•...
    }
    
    // åµŒå¥—ä¸å¯å˜ç±»2
    public static class Security {
        private final boolean enableSsl;
        private final String certificatePath;
        
        public Security(boolean enableSsl, String certificatePath) {
            this.enableSsl = enableSsl;
            this.certificatePath = certificatePath;
        }
        
        // getteræ–¹æ³•...
    }
    
    // getteræ–¹æ³•...
}
```

**é…ç½®æ–‡ä»¶**ï¼š

```yaml
app:
  database:
    pool:
      max-size: 50
      min-size: 5
      max-wait-ms: 30000
    security:
      enable-ssl: true
      certificate-path: "/etc/ssl/cert.pem"
```

### 6.6 æ„é€ ç»‘å®šçš„ä½¿ç”¨åœºæ™¯


**âœ… é€‚åˆä½¿ç”¨æ„é€ ç»‘å®šçš„åœºæ™¯**ï¼š
- é…ç½®å€¼ä¸ä¼šè¿è¡Œæ—¶æ”¹å˜
- éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨
- å¸Œæœ›é…ç½®å¯¹è±¡ä¸å¯å˜
- é…ç½®é¡¹è¾ƒå°‘ä¸”ç¨³å®š

**âŒ ä¸é€‚åˆæ„é€ ç»‘å®šçš„åœºæ™¯**ï¼š
- éœ€è¦åŠ¨æ€æ›´æ–°é…ç½®
- é…ç½®é¡¹éå¸¸å¤šä¸”å¤æ‚
- éœ€è¦éƒ¨åˆ†é…ç½®å¯é€‰

**ğŸ§ª å®é™…ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
@Service
public class JwtService {
    
    private final SecurityProperties securityProperties;
    
    public JwtService(SecurityProperties securityProperties) {
        this.securityProperties = securityProperties;
    }
    
    public String generateToken(String username) {
        // ä½¿ç”¨ä¸å¯å˜çš„é…ç½®
        return Jwts.builder()
            .setSubject(username)
            .setExpiration(new Date(System.currentTimeMillis() + 
                securityProperties.getJwtExpiration() * 1000))
            .signWith(SignatureAlgorithm.HS512, securityProperties.getJwtSecret())
            .compact();
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ @ConfigurationPropertiesï¼šé…ç½®å±æ€§ç»‘å®šçš„æ ¸å¿ƒæ³¨è§£
ğŸ”¸ å‰ç¼€è§„èŒƒï¼šä½¿ç”¨å°å†™å­—æ¯å’ŒçŸ­æ¨ªçº¿ï¼Œä¿æŒè¯­ä¹‰æ¸…æ™°
ğŸ”¸ æ¾æ•£ç»‘å®šï¼šæ”¯æŒå¤šç§å‘½åæ ¼å¼ï¼Œè‡ªåŠ¨è½¬æ¢åŒ¹é…
ğŸ”¸ å±æ€§æ ¡éªŒï¼šä½¿ç”¨@Validatedç¡®ä¿é…ç½®çš„æ­£ç¡®æ€§
ğŸ”¸ åµŒå¥—å¯¹è±¡ï¼šæ”¯æŒå¤æ‚çš„å±‚æ¬¡ç»“æ„é…ç½®
ğŸ”¸ é›†åˆç»‘å®šï¼šæ”¯æŒListã€Mapç­‰é›†åˆç±»å‹é…ç½®
ğŸ”¸ æ„é€ ç»‘å®šï¼šåˆ›å»ºä¸å¯å˜çš„é…ç½®å¯¹è±¡
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é…ç½®ç»‘å®šçš„æœ¬è´¨**ï¼š
```
Spring Booté…ç½®ç»‘å®š = è‡ªåŠ¨åŒ–çš„å‚æ•°ä¼ é€’
- ä»é…ç½®æ–‡ä»¶è¯»å–å€¼
- é€šè¿‡åå°„è®¾ç½®åˆ°Javaå¯¹è±¡
- æä¾›ç±»å‹è½¬æ¢å’Œæ ¡éªŒåŠŸèƒ½
```

**ğŸ”¹ é€‰æ‹©åˆé€‚çš„ç»‘å®šæ–¹å¼**ï¼š
```
ç®€å•é…ç½® â†’ ä½¿ç”¨@Value
å¤æ‚é…ç½® â†’ ä½¿ç”¨@ConfigurationProperties  
ä¸å¯å˜é…ç½® â†’ ä½¿ç”¨@ConstructorBinding
éœ€è¦æ ¡éªŒ â†’ æ·»åŠ @Validated
```

**ğŸ”¹ é…ç½®è®¾è®¡åŸåˆ™**ï¼š
```
å‰ç¼€å‘½åï¼šæ¸…æ™°çš„å±‚æ¬¡ç»“æ„
å±æ€§æ ¡éªŒï¼šå°½æ—©å‘ç°é…ç½®é”™è¯¯  
åˆç†åµŒå¥—ï¼šæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
ç±»å‹å®‰å…¨ï¼šé¿å…å­—ç¬¦ä¸²é…ç½®æ»¡å¤©é£
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è§£å†³çš„å®é™…é—®é¢˜**ï¼š
- **é…ç½®ç®¡ç†æ··ä¹±** â†’ é€šè¿‡å‰ç¼€è§„èŒƒç»„ç»‡é…ç½®
- **ç±»å‹å®‰å…¨é—®é¢˜** â†’ å¼ºç±»å‹ç»‘å®šé¿å…è¿è¡Œæ—¶é”™è¯¯  
- **é…ç½®æ ¡éªŒç¼ºå¤±** â†’ @Validatedæä¾›æ ¡éªŒæœºåˆ¶
- **å¤æ‚é…ç½®ç»´æŠ¤** â†’ åµŒå¥—å¯¹è±¡å’Œé›†åˆæ”¯æŒ

**ğŸ”§ å¼€å‘å®è·µå»ºè®®**ï¼š
- ä¸ºæ¯ä¸ªåŠŸèƒ½æ¨¡å—åˆ›å»ºç‹¬ç«‹çš„Propertiesç±»
- åˆç†ä½¿ç”¨æ ¡éªŒæ³¨è§£ï¼Œå°½æ—©å‘ç°é…ç½®é—®é¢˜
- å¤æ‚ç³»ç»Ÿä¼˜å…ˆè€ƒè™‘æ„é€ ç»‘å®šï¼Œæé«˜å®‰å…¨æ€§
- é…ç½®æ–‡ä»¶ä½¿ç”¨YAMLæ ¼å¼ï¼Œæé«˜å¯è¯»æ€§

**ğŸš¨ å¸¸è§é™·é˜±é¿å…**ï¼š
- å¿˜è®°æ·»åŠ @Validå¯¼è‡´åµŒå¥—æ ¡éªŒå¤±æ•ˆ
- æ„é€ ç»‘å®šå¿˜è®°å¯ç”¨@EnableConfigurationProperties  
- å±æ€§å‘½åä¸è§„èŒƒå¯¼è‡´ç»‘å®šå¤±è´¥
- é›†åˆé…ç½®ç¼ºå°‘åˆå§‹åŒ–å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸

**ğŸ¯ ä¸€å¥è¯ç²¾å**ï¼š
`@ConfigurationProperties`è®©é…ç½®å˜å¾—ç±»å‹å®‰å…¨ã€ç»“æ„æ¸…æ™°ã€æ ¡éªŒå®Œæ•´ï¼Œæ˜¯Spring Booté…ç½®ç®¡ç†çš„æœ€ä½³å®è·µã€‚

**ğŸ§  è®°å¿†å£è¯€**ï¼š
- å‰ç¼€è§„èŒƒå°å†™çº¿ï¼Œæ¾æ•£ç»‘å®šå¾ˆæ–¹ä¾¿
- æ ¡éªŒæ³¨è§£ä¿å®‰å…¨ï¼ŒåµŒå¥—é›†åˆåŠŸèƒ½å…¨
- æ„é€ ç»‘å®šä¸å¯å˜ï¼Œç±»å‹å®‰å…¨æ˜¯å…³é”®