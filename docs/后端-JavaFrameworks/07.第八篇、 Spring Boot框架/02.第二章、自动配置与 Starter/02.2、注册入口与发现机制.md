---
title: 2ã€æ³¨å†Œå…¥å£ä¸å‘ç°æœºåˆ¶
---
## ğŸ“š ç›®å½•

1. [è‡ªåŠ¨é…ç½®åŸºç¡€æ¦‚å¿µ](#1-è‡ªåŠ¨é…ç½®åŸºç¡€æ¦‚å¿µ)
2. [è‡ªåŠ¨é…ç½®æ ¸å¿ƒæœºåˆ¶](#2-è‡ªåŠ¨é…ç½®æ ¸å¿ƒæœºåˆ¶)
3. [æ³¨å†Œå…¥å£ä¸å‘ç°æœºåˆ¶](#3-æ³¨å†Œå…¥å£ä¸å‘ç°æœºåˆ¶)
4. [é…ç½®ç±»çš„åŠ è½½æµç¨‹](#4-é…ç½®ç±»çš„åŠ è½½æµç¨‹)
5. [Starterå·¥ä½œåŸç†](#5-starterå·¥ä½œåŸç†)
6. [è‡ªå®šä¹‰Starterå¼€å‘](#6-è‡ªå®šä¹‰starterå¼€å‘)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ è‡ªåŠ¨é…ç½®åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®


**è‡ªåŠ¨é…ç½®å°±åƒæ™ºèƒ½ç®¡å®¶**
```
ä¼ ç»Ÿæ–¹å¼ï¼š                 è‡ªåŠ¨é…ç½®æ–¹å¼ï¼š
æ‰‹åŠ¨åˆ›å»ºæ¯ä¸ªBean           Spring Bootå¸®ä½ åˆ›å»º
æ‰‹åŠ¨é…ç½®æ¯ä¸ªå‚æ•°           æ ¹æ®ç¯å¢ƒè‡ªåŠ¨é…ç½®
æ‰‹åŠ¨ç®¡ç†ä¾èµ–å…³ç³»           è‡ªåŠ¨å¤„ç†ä¾èµ–æ³¨å…¥

å°±åƒï¼š                     å°±åƒï¼š
è‡ªå·±åšé¥­æ´—è¡£æœ             æœ‰ä¸ªæ™ºèƒ½ç®¡å®¶å¸®ä½ å®‰æ’
éœ€è¦ä»€ä¹ˆè‡ªå·±ä¹°             ç®¡å®¶çŸ¥é“ä½ éœ€è¦ä»€ä¹ˆ
```

**æ ¸å¿ƒæ€æƒ³**ï¼š
- **çº¦å®šå¤§äºé…ç½®**ï¼šæŒ‰ç…§å¸¸è§çš„ä½¿ç”¨æ–¹å¼é¢„å…ˆé…ç½®
- **æŒ‰éœ€åŠ è½½**ï¼šåªæœ‰å½“æ¡ä»¶æ»¡è¶³æ—¶æ‰åˆ›å»ºBean
- **å¯è¦†ç›–**ï¼šç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è¦†ç›–é»˜è®¤é…ç½®

### 1.2 è‡ªåŠ¨é…ç½®è§£å†³äº†ä»€ä¹ˆé—®é¢˜


**ä¼ ç»ŸSpringé…ç½®çš„ç—›ç‚¹**ï¼š
```xml
<!-- ä¼ ç»ŸXMLé…ç½®ï¼Œéå¸¸ç¹ç -->
<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource">
    <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/test"/>
    <property name="username" value="root"/>
    <property name="password" value="123456"/>
</bean>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
</bean>

<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="com.example.mapper"/>
</bean>
```

**Spring Bootè‡ªåŠ¨é…ç½®å**ï¼š
```properties
# åªéœ€è¦ç®€å•é…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/test
spring.datasource.username=root
spring.datasource.password=123456
```

> ğŸ’¡ **å…³é”®ç†è§£**ï¼šè‡ªåŠ¨é…ç½®ä¸æ˜¯é»‘é­”æ³•ï¼Œè€Œæ˜¯Spring Bootæ ¹æ®ä½ çš„é…ç½®å’Œä¾èµ–ï¼Œå¸®ä½ åˆ›å»ºå’Œé…ç½®å¥½å¸¸ç”¨çš„Bean

---

## 2. âš™ï¸ è‡ªåŠ¨é…ç½®æ ¸å¿ƒæœºåˆ¶


### 2.1 è‡ªåŠ¨é…ç½®çš„å·¥ä½œåŸç†


**æ ¸å¿ƒæµç¨‹å›¾ç¤º**ï¼š
```
åº”ç”¨å¯åŠ¨
    â†“
@EnableAutoConfiguration æ³¨è§£ç”Ÿæ•ˆ
    â†“
æ‰«æ META-INF/spring.factories æˆ– AutoConfiguration.imports
    â†“
åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»
    â†“
æ ¹æ®æ¡ä»¶åˆ¤æ–­(@ConditionalOnXxx)å†³å®šæ˜¯å¦ç”Ÿæ•ˆ
    â†“
åˆ›å»ºç›¸åº”çš„Beanå¹¶æ³¨å…¥å®¹å™¨
```

### 2.2 å…³é”®æ³¨è§£è¯¦è§£


**@EnableAutoConfiguration**ï¼š
```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage
@Import(AutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration {
    // æ’é™¤ç‰¹å®šçš„è‡ªåŠ¨é…ç½®ç±»
    Class<?>[] exclude() default {};
    // æ’é™¤ç‰¹å®šçš„è‡ªåŠ¨é…ç½®ç±»å
    String[] excludeName() default {};
}
```

**æ¡ä»¶æ³¨è§£ç³»åˆ—**ï¼š
| æ³¨è§£ | **ä½œç”¨** | **ä½¿ç”¨åœºæ™¯** |
|------|----------|-------------|
| `@ConditionalOnClass` | `ç±»è·¯å¾„å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆ` | `æœ‰ç›¸å…³jaråŒ…æ—¶æ‰é…ç½®` |
| `@ConditionalOnMissingBean` | `å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanæ—¶ç”Ÿæ•ˆ` | `ç”¨æˆ·æ²¡æœ‰è‡ªå®šä¹‰æ—¶æä¾›é»˜è®¤é…ç½®` |
| `@ConditionalOnProperty` | `æŒ‡å®šé…ç½®å±æ€§å­˜åœ¨æ—¶ç”Ÿæ•ˆ` | `æ ¹æ®é…ç½®å¼€å…³æ§åˆ¶åŠŸèƒ½` |
| `@ConditionalOnWebApplication` | `Webç¯å¢ƒä¸‹ç”Ÿæ•ˆ` | `Webç›¸å…³é…ç½®` |

### 2.3 è‡ªåŠ¨é…ç½®ç±»ç¤ºä¾‹


**Redisè‡ªåŠ¨é…ç½®ç±»ç®€åŒ–ç‰ˆæœ¬**ï¼š
```java
@Configuration(proxyBeanMethods = false)
@ConditionalOnClass(RedisOperations.class)  // Redisç›¸å…³ç±»å­˜åœ¨æ—¶æ‰ç”Ÿæ•ˆ
@EnableConfigurationProperties(RedisProperties.class)  // ç»‘å®šé…ç½®å±æ€§
public class RedisAutoConfiguration {

    // åªæœ‰ç”¨æˆ·æ²¡æœ‰è‡ªå®šä¹‰æ—¶æ‰åˆ›å»ºé»˜è®¤çš„
    @Bean
    @ConditionalOnMissingBean(name = "redisTemplate")
    public RedisTemplate<Object, Object> redisTemplate(
            RedisConnectionFactory redisConnectionFactory) {
        
        RedisTemplate<Object, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(redisConnectionFactory);
        return template;
    }
    
    // å­—ç¬¦ä¸²æ“ä½œæ¨¡æ¿
    @Bean
    @ConditionalOnMissingBean
    public StringRedisTemplate stringRedisTemplate(
            RedisConnectionFactory redisConnectionFactory) {
        
        StringRedisTemplate template = new StringRedisTemplate();
        template.setConnectionFactory(redisConnectionFactory);
        return template;
    }
}
```

**é…ç½®å±æ€§ç»‘å®š**ï¼š
```java
@ConfigurationProperties(prefix = "spring.redis")
public class RedisProperties {
    
    private String host = "localhost";
    private int port = 6379;
    private String password;
    private int timeout = 2000;
    
    // getter å’Œ setter æ–¹æ³•
    public String getHost() { return host; }
    public void setHost(String host) { this.host = host; }
    // ... å…¶ä»–getter/setter
}
```

---

## 3. ğŸ” æ³¨å†Œå…¥å£ä¸å‘ç°æœºåˆ¶


### 3.1 ä¼ ç»Ÿæœºåˆ¶ï¼šspring.factories


**æ–‡ä»¶ä½ç½®ä¸æ ¼å¼**ï¼š
```
é¡¹ç›®ç»“æ„ï¼š
src/main/resources/
â””â”€â”€ META-INF/
    â””â”€â”€ spring.factories

æ–‡ä»¶å†…å®¹æ ¼å¼ï¼š
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.autoconfigure.RedisAutoConfiguration,\
com.example.autoconfigure.MybatisAutoConfiguration
```

**spring.factorieså·¥ä½œæœºåˆ¶**ï¼š
```
Spring Bootå¯åŠ¨æ—¶çš„æ‰«æè¿‡ç¨‹ï¼š

1. æ‰«ææ‰€æœ‰jaråŒ…çš„META-INF/spring.factoriesæ–‡ä»¶
2. è¯»å–EnableAutoConfigurationå¯¹åº”çš„é…ç½®ç±»åˆ—è¡¨
3. ä½¿ç”¨åå°„åŠ è½½è¿™äº›é…ç½®ç±»
4. æ ¹æ®æ¡ä»¶æ³¨è§£åˆ¤æ–­æ˜¯å¦éœ€è¦å®ä¾‹åŒ–
```

### 3.2 æ–°æœºåˆ¶ï¼šAutoConfiguration.imports


**Spring Boot 2.7+ æ¨èæ–¹å¼**ï¼š
```
æ–‡ä»¶ä½ç½®ï¼š
src/main/resources/
â””â”€â”€ META-INF/
    â””â”€â”€ spring/
        â””â”€â”€ org.springframework.boot.autoconfigure.AutoConfiguration.imports

æ–‡ä»¶å†…å®¹ï¼š
com.example.autoconfigure.RedisAutoConfiguration
com.example.autoconfigure.MybatisAutoConfiguration
com.example.autoconfigure.JpaAutoConfiguration
```

**æ–°æœºåˆ¶çš„ä¼˜åŠ¿**ï¼š
- **æ›´ç®€æ´**ï¼šä¸éœ€è¦é•¿é•¿çš„åæ–œæ ç»­è¡Œ
- **æ›´å¿«é€Ÿ**ï¼šè§£ææ›´å¿«ï¼Œå¯åŠ¨é€Ÿåº¦æå‡
- **æ›´æ¸…æ™°**ï¼šä¸€è¡Œä¸€ä¸ªé…ç½®ç±»ï¼Œå¯è¯»æ€§æ›´å¥½
- **æ›´å®‰å…¨**ï¼šå‡å°‘å› æ ¼å¼é”™è¯¯å¯¼è‡´çš„é—®é¢˜

### 3.3 é…ç½®æ–‡ä»¶å¯¹æ¯”


```
# ä¼ ç»Ÿspring.factoriesæ–¹å¼
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
  org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
  org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration

# æ–°çš„AutoConfiguration.importsæ–¹å¼  
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration
```

> âš ï¸ **æ³¨æ„**ï¼šä¸¤ç§æ–¹å¼å¯ä»¥å¹¶å­˜ï¼Œä½†æ–°é¡¹ç›®å»ºè®®ä½¿ç”¨AutoConfiguration.importsæ–¹å¼

### 3.4 è‡ªåŠ¨é…ç½®ç±»æ³¨å†Œæµç¨‹


**è¯¦ç»†æ³¨å†Œæµç¨‹**ï¼š
```
åº”ç”¨å¯åŠ¨(@SpringBootApplication)
    â†“
@EnableAutoConfiguration ç”Ÿæ•ˆ
    â†“
AutoConfigurationImportSelector å¼€å§‹å·¥ä½œ
    â†“
æ‰«æ spring.factories å’Œ AutoConfiguration.imports
    â†“
æ”¶é›†æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šå
    â†“
å»é‡å’Œæ’åºå¤„ç†
    â†“
é€ä¸ªåŠ è½½é…ç½®ç±»å¹¶æ£€æŸ¥æ¡ä»¶æ³¨è§£
    â†“
æ»¡è¶³æ¡ä»¶çš„é…ç½®ç±»ç”Ÿæ•ˆï¼Œåˆ›å»ºç›¸åº”Bean
```

---

## 4. ğŸ”„ é…ç½®ç±»çš„åŠ è½½æµç¨‹


### 4.1 é…ç½®ä¼˜å…ˆçº§æ’åº


**ä¼˜å…ˆçº§è§„åˆ™**ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

| ä¼˜å…ˆçº§ | **é…ç½®æ¥æº** | **è¯´æ˜** |
|--------|-------------|----------|
| **1** | `ç”¨æˆ·è‡ªå®šä¹‰Bean` | `@Componentã€@Configurationç­‰ç”¨æˆ·å®šä¹‰` |
| **2** | `@AutoConfigureBefore` | `å¼ºåˆ¶åœ¨æŒ‡å®šé…ç½®ä¹‹å‰åŠ è½½` |
| **3** | `@AutoConfigureAfter` | `åœ¨æŒ‡å®šé…ç½®ä¹‹ååŠ è½½` |
| **4** | `@AutoConfigureOrder` | `æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜` |
| **5** | `é»˜è®¤é¡ºåº` | `æŒ‰ç±»åå­—å…¸é¡ºåº` |

**ä¼˜å…ˆçº§ç¤ºä¾‹**ï¼š
```java
// ç”¨æˆ·è‡ªå®šä¹‰ï¼Œä¼˜å…ˆçº§æœ€é«˜
@Configuration
public class MyRedisConfig {
    
    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        // ç”¨æˆ·è‡ªå®šä¹‰é…ç½®ï¼Œä¼šè¦†ç›–è‡ªåŠ¨é…ç½®
        return new RedisTemplate<>();
    }
}

// è‡ªåŠ¨é…ç½®ï¼Œåªåœ¨ç”¨æˆ·æ²¡å®šä¹‰æ—¶ç”Ÿæ•ˆ
@Configuration
@ConditionalOnMissingBean(RedisTemplate.class)
public class RedisAutoConfiguration {
    
    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        // é»˜è®¤é…ç½®ï¼Œç”¨æˆ·å®šä¹‰äº†å°±ä¸ä¼šæ‰§è¡Œ
        return new RedisTemplate<>();
    }
}
```

### 4.2 ç‰ˆæœ¬å…¼å®¹ç­–ç•¥


**å…¼å®¹æ€§å¤„ç†æœºåˆ¶**ï¼š
```java
@Configuration
@ConditionalOnClass(name = "org.springframework.data.redis.core.RedisTemplate")
@ConditionalOnProperty(
    name = "spring.redis.enabled", 
    havingValue = "true", 
    matchIfMissing = true  // é»˜è®¤ä¸ºtrueï¼Œä¿è¯å‘åå…¼å®¹
)
public class RedisAutoConfiguration {
    
    // æ–°ç‰ˆæœ¬ç‰¹æ€§ï¼Œåªåœ¨æ–°ç‰ˆæœ¬å­˜åœ¨æ—¶å¯ç”¨
    @Bean
    @ConditionalOnClass(name = "org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory")
    @ConditionalOnMissingBean(RedisConnectionFactory.class)
    public LettuceConnectionFactory lettuceConnectionFactory() {
        return new LettuceConnectionFactory();
    }
    
    // æ—§ç‰ˆæœ¬å…¼å®¹ï¼Œä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ
    @Bean
    @ConditionalOnClass(name = "redis.clients.jedis.JedisPool")
    @ConditionalOnMissingBean(RedisConnectionFactory.class)
    public JedisConnectionFactory jedisConnectionFactory() {
        return new JedisConnectionFactory();
    }
}
```

---

## 5. ğŸ¯ Starterå·¥ä½œåŸç†


### 5.1 Starterçš„æœ¬è´¨


**Starterå°±åƒ"å¥—é¤"**ï¼š
```
æƒ³è±¡å»é¤å…ç‚¹é¤ï¼š

ä¸ç”¨Starterï¼š                    ä½¿ç”¨Starterï¼š
å•ç‚¹ï¼šæ±¤ã€èœã€é¥­ã€é¥®æ–™            ç›´æ¥ç‚¹ï¼šå•†åŠ¡å¥—é¤
éœ€è¦æ­é…è€ƒè™‘è¥å…»               é¤å…å·²ç»æ­é…å¥½äº†
ä»·æ ¼éœ€è¦å•ç‹¬è®¡ç®—               å¥—é¤ä»·æ ¼å›ºå®šä¼˜æƒ 

æŠ€æœ¯è§’åº¦ï¼š                     æŠ€æœ¯è§’åº¦ï¼š
æ‰‹åŠ¨æ·»åŠ å¤šä¸ªä¾èµ–               æ·»åŠ ä¸€ä¸ªstarterä¾èµ–
æ‰‹åŠ¨é…ç½®å„ç§Bean               è‡ªåŠ¨é…ç½®å¥½æ‰€æœ‰éœ€è¦çš„Bean
æ‰‹åŠ¨å¤„ç†ä¾èµ–å†²çª               starterå¤„ç†å¥½ç‰ˆæœ¬å…¼å®¹
```

### 5.2 Starterçš„ç»„æˆç»“æ„


**å…¸å‹Starterç›®å½•ç»“æ„**ï¼š
```
my-spring-boot-starter/
â”œâ”€â”€ pom.xml                                    # ä¾èµ–ç®¡ç†
â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ com/example/starter/
â”‚       â”œâ”€â”€ MyAutoConfiguration.java          # è‡ªåŠ¨é…ç½®ç±»
â”‚       â”œâ”€â”€ MyProperties.java                 # é…ç½®å±æ€§ç±»
â”‚       â””â”€â”€ MyService.java                    # æ ¸å¿ƒæœåŠ¡ç±»
â””â”€â”€ src/main/resources/
    â””â”€â”€ META-INF/
        â””â”€â”€ spring/
            â””â”€â”€ org.springframework.boot.autoconfigure.AutoConfiguration.imports
```

### 5.3 Starterå‘½åè§„èŒƒ


**å®˜æ–¹Starter vs ç¬¬ä¸‰æ–¹Starter**ï¼š

| ç±»å‹ | **å‘½åè§„åˆ™** | **ç¤ºä¾‹** |
|------|-------------|----------|
| **å®˜æ–¹Starter** | `spring-boot-starter-{name}` | `spring-boot-starter-web` |
| **ç¬¬ä¸‰æ–¹Starter** | `{name}-spring-boot-starter` | `mybatis-spring-boot-starter` |

### 5.4 å¸¸ç”¨Starterä»‹ç»


**Webå¼€å‘ç›¸å…³**ï¼š
- **spring-boot-starter-web**ï¼šåŒ…å«Tomcatã€Spring MVCç­‰
- **spring-boot-starter-webflux**ï¼šå“åº”å¼Webå¼€å‘
- **spring-boot-starter-thymeleaf**ï¼šæ¨¡æ¿å¼•æ“

**æ•°æ®è®¿é—®ç›¸å…³**ï¼š
- **spring-boot-starter-data-jpa**ï¼šJPAæ•°æ®è®¿é—®
- **spring-boot-starter-data-redis**ï¼šRedisç¼“å­˜
- **mybatis-spring-boot-starter**ï¼šMyBatisæŒä¹…å±‚

**æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³**ï¼š
- **spring-boot-starter-amqp**ï¼šRabbitMQæ¶ˆæ¯é˜Ÿåˆ—
- **spring-kafka**ï¼šKafkaæ¶ˆæ¯é˜Ÿåˆ—

---

## 6. ğŸ›  è‡ªå®šä¹‰Starterå¼€å‘


### 6.1 å¼€å‘æ­¥éª¤æ¦‚è§ˆ


**å¼€å‘æµç¨‹å›¾**ï¼š
```
1. åˆ›å»ºMavené¡¹ç›®
    â†“
2. å®šä¹‰é…ç½®å±æ€§ç±»(@ConfigurationProperties)
    â†“  
3. ç¼–å†™è‡ªåŠ¨é…ç½®ç±»(@Configuration + @ConditionalOnXxx)
    â†“
4. åˆ›å»ºAutoConfiguration.importsæ–‡ä»¶
    â†“
5. ç¼–å†™æ ¸å¿ƒåŠŸèƒ½ç±»
    â†“
6. æ‰“åŒ…å‘å¸ƒä½¿ç”¨
```

### 6.2 å®é™…å¼€å‘ç¤ºä¾‹


**æ­¥éª¤1ï¼šé¡¹ç›®ç»“æ„æ­å»º**
```xml
<!-- pom.xml -->
<project>
    <groupId>com.example</groupId>
    <artifactId>sms-spring-boot-starter</artifactId>
    <version>1.0.0</version>
    
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-autoconfigure</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-configuration-processor</artifactId>
            <optional>true</optional>
        </dependency>
    </dependencies>
</project>
```

**æ­¥éª¤2ï¼šé…ç½®å±æ€§ç±»**
```java
@ConfigurationProperties(prefix = "sms")
public class SmsProperties {
    
    /**
     * çŸ­ä¿¡æœåŠ¡æä¾›å•†ï¼šaliyunã€tencent
     */
    private String provider = "aliyun";
    
    /**
     * APIå¯†é’¥
     */
    private String accessKey;
    
    /**
     * å¯†é’¥
     */
    private String secretKey;
    
    /**
     * çŸ­ä¿¡æ¨¡æ¿ID
     */
    private String templateId;
    
    // getterå’Œsetteræ–¹æ³•...
    public String getProvider() { return provider; }
    public void setProvider(String provider) { this.provider = provider; }
    // ... å…¶ä»–getter/setter
}
```

**æ­¥éª¤3ï¼šæ ¸å¿ƒæœåŠ¡ç±»**
```java
public class SmsService {
    
    private final SmsProperties properties;
    
    public SmsService(SmsProperties properties) {
        this.properties = properties;
    }
    
    /**
     * å‘é€çŸ­ä¿¡
     * @param phone æ‰‹æœºå·
     * @param message çŸ­ä¿¡å†…å®¹
     * @return å‘é€ç»“æœ
     */
    public boolean sendSms(String phone, String message) {
        // æ ¹æ®é…ç½®é€‰æ‹©ä¸åŒçš„çŸ­ä¿¡æœåŠ¡å•†
        switch (properties.getProvider()) {
            case "aliyun":
                return sendByAliyun(phone, message);
            case "tencent":
                return sendByTencent(phone, message);
            default:
                throw new IllegalArgumentException("ä¸æ”¯æŒçš„çŸ­ä¿¡æœåŠ¡å•†ï¼š" + properties.getProvider());
        }
    }
    
    private boolean sendByAliyun(String phone, String message) {
        // é˜¿é‡Œäº‘çŸ­ä¿¡å‘é€é€»è¾‘
        System.out.println("ä½¿ç”¨é˜¿é‡Œäº‘å‘é€çŸ­ä¿¡åˆ°ï¼š" + phone + "ï¼Œå†…å®¹ï¼š" + message);
        return true;
    }
    
    private boolean sendByTencent(String phone, String message) {
        // è…¾è®¯äº‘çŸ­ä¿¡å‘é€é€»è¾‘
        System.out.println("ä½¿ç”¨è…¾è®¯äº‘å‘é€çŸ­ä¿¡åˆ°ï¼š" + phone + "ï¼Œå†…å®¹ï¼š" + message);
        return true;
    }
}
```

**æ­¥éª¤4ï¼šè‡ªåŠ¨é…ç½®ç±»**
```java
@Configuration(proxyBeanMethods = false)
@ConditionalOnProperty(prefix = "sms", name = "enabled", havingValue = "true", matchIfMissing = true)
@EnableConfigurationProperties(SmsProperties.class)
public class SmsAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public SmsService smsService(SmsProperties properties) {
        return new SmsService(properties);
    }
}
```

**æ­¥éª¤5ï¼šæ³¨å†Œé…ç½®æ–‡ä»¶**
```
# src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
com.example.starter.SmsAutoConfiguration
```

### 6.3 ä½¿ç”¨è‡ªå®šä¹‰Starter


**åœ¨ä¸šåŠ¡é¡¹ç›®ä¸­ä½¿ç”¨**ï¼š
```xml
<!-- æ·»åŠ ä¾èµ– -->
<dependency>
    <groupId>com.example</groupId>
    <artifactId>sms-spring-boot-starter</artifactId>
    <version>1.0.0</version>
</dependency>
```

```properties
# application.properties é…ç½®
sms.provider=aliyun
sms.access-key=your-access-key
sms.secret-key=your-secret-key
sms.template-id=SMS_123456
```

```java
// ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨
@RestController
public class SmsController {
    
    @Autowired
    private SmsService smsService;  // è‡ªåŠ¨æ³¨å…¥
    
    @PostMapping("/send")
    public String sendSms(@RequestParam String phone, @RequestParam String message) {
        boolean success = smsService.sendSms(phone, message);
        return success ? "å‘é€æˆåŠŸ" : "å‘é€å¤±è´¥";
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è‡ªåŠ¨é…ç½®ï¼šSpring Bootæ ¹æ®æ¡ä»¶è‡ªåŠ¨åˆ›å»ºå’Œé…ç½®Beançš„æœºåˆ¶
ğŸ”¸ Starterï¼šå°è£…äº†ä¾èµ–å’Œè‡ªåŠ¨é…ç½®çš„"å¥—é¤åŒ…"  
ğŸ”¸ æ¡ä»¶æ³¨è§£ï¼šæ§åˆ¶è‡ªåŠ¨é…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆçš„å…³é”®æœºåˆ¶
ğŸ”¸ é…ç½®å±æ€§ï¼šé€šè¿‡@ConfigurationPropertiesç»‘å®šå¤–éƒ¨é…ç½®
ğŸ”¸ æ³¨å†Œæœºåˆ¶ï¼šé€šè¿‡META-INFä¸‹çš„é…ç½®æ–‡ä»¶å£°æ˜è‡ªåŠ¨é…ç½®ç±»
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ è‡ªåŠ¨é…ç½®çš„æ™ºèƒ½ä¹‹å¤„**
```
ä¸æ˜¯ä¸‡èƒ½é…ç½®ï¼š
- åªæœ‰æ»¡è¶³æ¡ä»¶æ‰ä¼šç”Ÿæ•ˆ
- ç”¨æˆ·é…ç½®ä¼˜å…ˆäºè‡ªåŠ¨é…ç½®
- å¯ä»¥é€šè¿‡é…ç½®å¼€å…³æ§åˆ¶

åƒæ™ºèƒ½åŠ©æ‰‹ï¼š
- æ ¹æ®ç¯å¢ƒåˆ¤æ–­éœ€è¦ä»€ä¹ˆ
- æä¾›åˆç†çš„é»˜è®¤é…ç½®
- å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è¦†ç›–
```

**ğŸ”¹ Starterçš„ä»·å€¼**
```
è§£å†³ä¾èµ–åœ°ç‹±ï¼š
- ç‰ˆæœ¬å…¼å®¹æ€§ç”±Starterç»´æŠ¤
- ä¾èµ–ä¼ é€’è‡ªåŠ¨ç®¡ç†
- å‡å°‘é…ç½®å¤æ‚åº¦

æå‡å¼€å‘æ•ˆç‡ï¼š
- å¼€ç®±å³ç”¨çš„åŠŸèƒ½ç»„ä»¶
- éµå¾ªæœ€ä½³å®è·µçš„é»˜è®¤é…ç½®
- ç»Ÿä¸€çš„é…ç½®æ–¹å¼
```

**ğŸ”¹ æ¡ä»¶æ³¨è§£çš„é‡è¦æ€§**
```
ç²¾ç¡®æ§åˆ¶ï¼š
- é¿å…ä¸å¿…è¦çš„Beanåˆ›å»º
- æ ¹æ®è¿è¡Œç¯å¢ƒçµæ´»é…ç½®
- ä¿è¯é…ç½®çš„æ­£ç¡®æ€§

æ€§èƒ½ä¼˜åŒ–ï¼š
- å‡å°‘æ— ç”¨çš„å¯¹è±¡åˆ›å»º
- åŠ å¿«åº”ç”¨å¯åŠ¨é€Ÿåº¦
- é™ä½å†…å­˜å ç”¨
```

### 7.3 å®é™…åº”ç”¨å»ºè®®


**å¼€å‘è‡ªå®šä¹‰Starterçš„åœºæ™¯**ï¼š
- **å…¬å¸å†…éƒ¨é€šç”¨ç»„ä»¶**ï¼šç»Ÿä¸€çš„æ•°æ®åº“é…ç½®ã€æ—¥å¿—é…ç½®
- **ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ**ï¼šæ”¯ä»˜æ¥å£ã€çŸ­ä¿¡æœåŠ¡ç­‰
- **æŠ€æœ¯æ ˆæ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„ç¼“å­˜æ–¹æ¡ˆã€æ¶ˆæ¯é˜Ÿåˆ—é…ç½®

**ä½¿ç”¨Starterçš„æœ€ä½³å®è·µ**ï¼š
- **æŒ‰éœ€å¼•å…¥**ï¼šä¸è¦å¼•å…¥ç”¨ä¸åˆ°çš„Starter
- **ç‰ˆæœ¬ç®¡ç†**ï¼šä½¿ç”¨Spring Bootçš„ä¾èµ–ç®¡ç†
- **é…ç½®å¤–éƒ¨åŒ–**ï¼šé‡è¦é…ç½®å†™åœ¨é…ç½®æ–‡ä»¶ä¸­
- **ç¯å¢ƒåŒºåˆ†**ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®

> ğŸ’¡ **æ ¸å¿ƒè®°å¿†**ï¼š
> - è‡ªåŠ¨é…ç½®æ˜¯Spring Bootçš„æ ¸å¿ƒç‰¹æ€§ï¼Œè®©å¼€å‘æ›´ç®€å•
> - Starteræ˜¯ä¾èµ–+é…ç½®çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ
> - æ¡ä»¶æ³¨è§£æ˜¯è‡ªåŠ¨é…ç½®æ™ºèƒ½åŒ–çš„å…³é”®
> - ç†è§£åŸç†æœ‰åŠ©äºæ’æŸ¥é—®é¢˜å’Œè‡ªå®šä¹‰æ‰©å±•

**ğŸ§  è®°å¿†å£è¯€**ï¼š
> è‡ªåŠ¨é…ç½®æ™ºèƒ½åŒ–ï¼Œæ¡ä»¶æ³¨è§£æ¥åˆ¤æ–­  
> Starterå¥—é¤æ›´æ–¹ä¾¿ï¼Œå¼€ç®±å³ç”¨æ•ˆç‡é«˜  
> ç”¨æˆ·é…ç½®ä¼˜å…ˆçº§ï¼Œè¦†ç›–é»˜è®¤å¾ˆçµæ´»