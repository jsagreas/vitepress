---
title: 7ã€è‡ªåŠ¨é…ç½®ä¸ç”Ÿæ•ˆæ’æŸ¥
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®ä¸ç”Ÿæ•ˆ](#1-ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®ä¸ç”Ÿæ•ˆ)
2. [debug=trueè°ƒè¯•å¼€å…³è¯¦è§£](#2-debug-trueè°ƒè¯•å¼€å…³è¯¦è§£)
3. [ConditionEvaluationReportæŠ¥å‘Šåˆ†æ](#3-conditionevaluationreportæŠ¥å‘Šåˆ†æ)
4. [actuator/conditionsç«¯ç‚¹ä½¿ç”¨](#4-actuator-conditionsç«¯ç‚¹ä½¿ç”¨)
5. [å¸¸è§é—®é¢˜æ’æŸ¥æ–¹æ³•](#5-å¸¸è§é—®é¢˜æ’æŸ¥æ–¹æ³•)
6. [å®é™…æ¡ˆä¾‹æ¼”ç»ƒ](#6-å®é™…æ¡ˆä¾‹æ¼”ç»ƒ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®ä¸ç”Ÿæ•ˆ


### 1.1 é—®é¢˜ç°è±¡ç†è§£


**ç®€å•ç†è§£**ï¼šå°±æ˜¯ä½ æœŸæœ›SpringBootå¸®ä½ è‡ªåŠ¨é…ç½®æŸä¸ªåŠŸèƒ½ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰ç”Ÿæ•ˆ

```
ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼š
ä½ ä¹°äº†ä¸€å°æ™ºèƒ½ç”µè§†ï¼ŒæœŸæœ›æ’ä¸Šç”µæºå°±èƒ½è‡ªåŠ¨è¿WiFiçœ‹ç”µè§†
ä½†å®é™…æ’ä¸Šç”µæºåï¼Œç”µè§†æ²¡æœ‰è‡ªåŠ¨è¿æ¥ç½‘ç»œ

SpringBootè‡ªåŠ¨é…ç½®ä¹Ÿæ˜¯è¿™æ ·ï¼š
æœŸæœ›ï¼šæ·»åŠ spring-boot-starter-webä¾èµ– â†’ è‡ªåŠ¨é…ç½®TomcatæœåŠ¡å™¨
å®é™…ï¼šæ·»åŠ ä¾èµ–åå¯åŠ¨ï¼Œä½†æ²¡æœ‰å¯åŠ¨WebæœåŠ¡å™¨
```

### 1.2 è‡ªåŠ¨é…ç½®çš„å·¥ä½œåŸç†å›é¡¾


```
SpringBootè‡ªåŠ¨é…ç½®çš„åŸºæœ¬æµç¨‹ï¼š

å¯åŠ¨åº”ç”¨
    â†“
æ‰«æclasspathä¸­çš„spring.factoriesæ–‡ä»¶
    â†“
åŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆXxxAutoConfigurationï¼‰
    â†“
æ£€æŸ¥æ¯ä¸ªé…ç½®ç±»çš„ç”Ÿæ•ˆæ¡ä»¶ï¼ˆ@Conditionalæ³¨è§£ï¼‰
    â†“
æ¡ä»¶æ»¡è¶³ â†’ åˆ›å»ºç›¸å…³Bean
æ¡ä»¶ä¸æ»¡è¶³ â†’ è·³è¿‡è¿™ä¸ªé…ç½®
```

**æ ¸å¿ƒç†è§£**ï¼šè‡ªåŠ¨é…ç½®æ˜¯**æœ‰æ¡ä»¶çš„**ï¼Œä¸æ˜¯æ— è„‘å…¨éƒ¨ç”Ÿæ•ˆï¼

### 1.3 ä¸ºä»€ä¹ˆä¼šä¸ç”Ÿæ•ˆ


**å¸¸è§åŸå› åˆ†ç±»**ï¼š
- **â‘ ** ç¼ºå°‘å¿…è¦çš„ä¾èµ–jaråŒ…
- **â‘¡** é…ç½®å±æ€§åç§°å†™é”™äº†
- **â‘¢** ç¯å¢ƒæ¡ä»¶ä¸æ»¡è¶³
- **â‘£** æœ‰å†²çªçš„Beanå®šä¹‰
- **â‘¤** ç±»è·¯å¾„æœ‰é—®é¢˜

---

## 2. ğŸ”§ debug=trueè°ƒè¯•å¼€å…³è¯¦è§£


### 2.1 ä»€ä¹ˆæ˜¯debugå¼€å…³


**é€šä¿—ç†è§£**ï¼šè¿™å°±åƒç»™SpringBootè£…äº†ä¸€ä¸ª"é€æ˜ç»ç’ƒ"ï¼Œè®©ä½ èƒ½çœ‹åˆ°å†…éƒ¨è¿è¡Œè¿‡ç¨‹

```
æ­£å¸¸æƒ…å†µï¼šSpringBootå¯åŠ¨ â†’ ç›´æ¥æ˜¾ç¤ºç»“æœ
å¼€å¯debugï¼šSpringBootå¯åŠ¨ â†’ è¯¦ç»†æ˜¾ç¤ºæ¯ä¸€æ­¥çš„åˆ¤æ–­è¿‡ç¨‹ â†’ ç»“æœ
```

### 2.2 å¦‚ä½•å¼€å¯debugæ¨¡å¼


**æ–¹æ³•ä¸€ï¼šé…ç½®æ–‡ä»¶å¼€å¯**
```yaml
# application.yml
debug: true
```

**æ–¹æ³•äºŒï¼šå¯åŠ¨å‚æ•°å¼€å¯**
```bash
java -jar myapp.jar --debug
```

**æ–¹æ³•ä¸‰ï¼šIDEä¸­å¼€å¯**
```
åœ¨è¿è¡Œé…ç½®ä¸­æ·»åŠ VMå‚æ•°ï¼š-Ddebug=true
```

### 2.3 debugè¾“å‡ºå†…å®¹è§£è¯»


å¼€å¯debugåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºå¤§é‡ä¿¡æ¯ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§å—ï¼š

**â‘  æ­£åŒ¹é…ï¼ˆPositive matchesï¼‰**
```
âœ… è¿™äº›é…ç½®ç±»ç”Ÿæ•ˆäº†
DataSourceAutoConfiguration matched:
   - @ConditionalOnClass found required classes 'javax.sql.DataSource'
   - @ConditionalOnProperty matched
```

**â‘¡ è´ŸåŒ¹é…ï¼ˆNegative matchesï¼‰**
```
âŒ è¿™äº›é…ç½®ç±»æ²¡ç”Ÿæ•ˆï¼Œä»¥åŠåŸå› 
RedisAutoConfiguration:
   Did not match:
      - @ConditionalOnClass did not find required class 'redis.clients.jedis.Jedis'
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šé‡ç‚¹å…³æ³¨**è´ŸåŒ¹é…**éƒ¨åˆ†ï¼Œè¿™é‡Œä¼šå‘Šè¯‰ä½ ä¸ºä»€ä¹ˆæŸä¸ªåŠŸèƒ½æ²¡æœ‰è‡ªåŠ¨é…ç½®æˆåŠŸ

### 2.4 å®é™…ä½¿ç”¨ç¤ºä¾‹


**åœºæ™¯**ï¼šæ·»åŠ äº†Redisä¾èµ–ï¼Œä½†RedisåŠŸèƒ½æ²¡ç”Ÿæ•ˆ

```yaml
# application.yml
debug: true
spring:
  redis:
    host: localhost
    port: 6379
```

**æŸ¥çœ‹è¾“å‡º**ï¼š
```
Negative matches:
-----------------
RedisAutoConfiguration:
   Did not match:
      - @ConditionalOnClass did not find required class 'redis.clients.jedis.Jedis' (OnClassCondition)
```

**é—®é¢˜åˆ†æ**ï¼šç¼ºå°‘Rediså®¢æˆ·ç«¯çš„å…·ä½“å®ç°ç±»

**è§£å†³æ–¹æ¡ˆ**ï¼š
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

---

## 3. ğŸ“Š ConditionEvaluationReportæŠ¥å‘Šåˆ†æ


### 3.1 ä»€ä¹ˆæ˜¯ConditionEvaluationReport


**é€šä¿—ç†è§£**ï¼šè¿™æ˜¯SpringBootå†…éƒ¨çš„"ä½“æ£€æŠ¥å‘Š"ï¼Œè®°å½•äº†æ¯ä¸ªè‡ªåŠ¨é…ç½®çš„å¥åº·çŠ¶æ€

```
ç±»æ¯”åŒ»é™¢ä½“æ£€ï¼š
æ‚£è€…ä½“æ£€ â†’ å„é¡¹æ£€æŸ¥ï¼ˆè¡€å‹ã€å¿ƒç”µå›¾ã€åŒ–éªŒï¼‰â†’ ä½“æ£€æŠ¥å‘Š
SpringBootå¯åŠ¨ â†’ å„ç§æ¡ä»¶æ£€æŸ¥ â†’ ConditionEvaluationReport
```

### 3.2 å¦‚ä½•è·å–æŠ¥å‘Š


**ç¼–ç¨‹æ–¹å¼è·å–**ï¼š
```java
@RestController
public class DebugController {
    
    @Autowired
    private ApplicationContext context;
    
    @GetMapping("/debug/conditions")
    public Map<String, Object> getConditions() {
        // è·å–æ¡ä»¶è¯„ä¼°æŠ¥å‘Š
        ConditionEvaluationReport report = ConditionEvaluationReport
            .get(context.getBeanFactory());
        
        Map<String, Object> result = new HashMap<>();
        
        // è·å–åŒ¹é…çš„æ¡ä»¶
        Map<String, ConditionEvaluationReport.ConditionAndOutcomes> outcomes = 
            report.getConditionAndOutcomesBySource();
        
        result.put("matched", getMatchedConditions(outcomes));
        result.put("unmatched", getUnmatchedConditions(outcomes));
        
        return result;
    }
}
```

### 3.3 æŠ¥å‘Šå†…å®¹ç»“æ„


**æŠ¥å‘Šä¸»è¦åŒ…å«**ï¼š
- **é…ç½®ç±»åç§°**ï¼šå“ªä¸ªè‡ªåŠ¨é…ç½®ç±»
- **æ¡ä»¶åˆ—è¡¨**ï¼šè¿™ä¸ªç±»éœ€è¦æ»¡è¶³å“ªäº›æ¡ä»¶
- **åŒ¹é…ç»“æœ**ï¼šæ¯ä¸ªæ¡ä»¶æ˜¯å¦æ»¡è¶³
- **åŒ¹é…åŸå› **ï¼šä¸ºä»€ä¹ˆæ»¡è¶³æˆ–ä¸æ»¡è¶³

```
ç¤ºä¾‹æŠ¥å‘Šç»“æ„ï¼š

DataSourceAutoConfiguration:
â”œâ”€â”€ @ConditionalOnClass(DataSource.class) âœ… ç±»å­˜åœ¨
â”œâ”€â”€ @ConditionalOnProperty(spring.datasource.url) âŒ å±æ€§ä¸å­˜åœ¨
â””â”€â”€ æœ€ç»ˆç»“æœ: ä¸åŒ¹é… âŒ
```

### 3.4 å¸¸è§æ¡ä»¶ç±»å‹è§£æ


| æ¡ä»¶æ³¨è§£ | **å«ä¹‰** | **æ£€æŸ¥å†…å®¹** |
|---------|---------|-------------|
| `@ConditionalOnClass` | **ç±»å­˜åœ¨æ¡ä»¶** | `æ£€æŸ¥classpathä¸­æ˜¯å¦æœ‰æŒ‡å®šç±»` |
| `@ConditionalOnProperty` | **å±æ€§æ¡ä»¶** | `æ£€æŸ¥é…ç½®å±æ€§æ˜¯å¦å­˜åœ¨æˆ–åŒ¹é…` |
| `@ConditionalOnBean` | **Beanå­˜åœ¨æ¡ä»¶** | `æ£€æŸ¥å®¹å™¨ä¸­æ˜¯å¦æœ‰æŒ‡å®šBean` |
| `@ConditionalOnMissingBean` | **Beanä¸å­˜åœ¨æ¡ä»¶** | `æ£€æŸ¥å®¹å™¨ä¸­æ˜¯å¦ç¼ºå°‘æŒ‡å®šBean` |
| `@ConditionalOnWebApplication` | **Webåº”ç”¨æ¡ä»¶** | `æ£€æŸ¥æ˜¯å¦ä¸ºWebåº”ç”¨ç¯å¢ƒ` |

---

## 4. ğŸ” /actuator/conditionsç«¯ç‚¹ä½¿ç”¨


### 4.1 ä»€ä¹ˆæ˜¯actuatorç«¯ç‚¹


**é€šä¿—ç†è§£**ï¼šactuatorå°±åƒæ˜¯ç»™åº”ç”¨è£…äº†å¾ˆå¤š"ç›‘æ§æ¢å¤´"ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹åº”ç”¨å†…éƒ¨çŠ¶æ€

```
ç±»æ¯”å®¶ç”¨è·¯ç”±å™¨ï¼š
è·¯ç”±å™¨ç®¡ç†é¡µé¢ â†’ å¯ä»¥æŸ¥çœ‹è¿æ¥è®¾å¤‡ã€ç½‘ç»œçŠ¶æ€ã€ç³»ç»Ÿä¿¡æ¯
actuatorç«¯ç‚¹ â†’ å¯ä»¥æŸ¥çœ‹BeançŠ¶æ€ã€é…ç½®ä¿¡æ¯ã€å¥åº·çŠ¶å†µ
```

### 4.2 å¼€å¯conditionsç«¯ç‚¹


**ç¬¬ä¸€æ­¥ï¼šæ·»åŠ actuatorä¾èµ–**
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

**ç¬¬äºŒæ­¥ï¼šé…ç½®ç«¯ç‚¹æš´éœ²**
```yaml
# application.yml
management:
  endpoints:
    web:
      exposure:
        include: health,info,conditions
  endpoint:
    conditions:
      enabled: true
```

### 4.3 è®¿é—®conditionsç«¯ç‚¹


**è®¿é—®åœ°å€**ï¼š`http://localhost:8080/actuator/conditions`

**è¿”å›çš„JSONç»“æ„**ï¼š
```json
{
  "contexts": {
    "application": {
      "positiveMatches": {
        "DataSourceAutoConfiguration": [
          {
            "condition": "OnClassCondition",
            "message": "@ConditionalOnClass found required classes 'javax.sql.DataSource'"
          }
        ]
      },
      "negativeMatches": {
        "RedisAutoConfiguration": {
          "notMatched": [
            {
              "condition": "OnClassCondition", 
              "message": "@ConditionalOnClass did not find required class 'redis.clients.jedis.Jedis'"
            }
          ]
        }
      }
    }
  }
}
```

### 4.4 å®é™…ä½¿ç”¨åœºæ™¯


**åœºæ™¯ï¼šæ£€æŸ¥ä¸ºä»€ä¹ˆMyBatisæ²¡æœ‰è‡ªåŠ¨é…ç½®**

â‘  **è®¿é—®ç«¯ç‚¹**ï¼š`GET /actuator/conditions`

â‘¡ **æŸ¥æ‰¾MyBatisç›¸å…³é…ç½®**ï¼š
```json
"negativeMatches": {
  "MybatisAutoConfiguration": {
    "notMatched": [
      {
        "condition": "OnClassCondition",
        "message": "@ConditionalOnClass did not find required class 'org.apache.ibatis.session.SqlSessionFactory'"
      }
    ]
  }
}
```

â‘¢ **åˆ†æé—®é¢˜**ï¼šç¼ºå°‘MyBatisçš„æ ¸å¿ƒç±»

â‘£ **è§£å†³æ–¹æ¡ˆ**ï¼šæ·»åŠ æ­£ç¡®çš„ä¾èµ–
```xml
<dependency>
    <groupId>org.mybatis.spring.boot</groupId>
    <artifactId>mybatis-spring-boot-starter</artifactId>
    <version>2.2.2</version>
</dependency>
```

---

## 5. ğŸ› ï¸ å¸¸è§é—®é¢˜æ’æŸ¥æ–¹æ³•


### 5.1 ä¾èµ–ç¼ºå¤±æ£€æŸ¥


**é—®é¢˜ç°è±¡**ï¼šæœŸæœ›çš„åŠŸèƒ½å®Œå…¨æ²¡æœ‰å¯åŠ¨

**æ’æŸ¥æ­¥éª¤**ï¼š

**â‘  æ£€æŸ¥ä¾èµ–æ˜¯å¦æ­£ç¡®**
```bash
# MavenæŸ¥çœ‹å®é™…ä¾èµ–
mvn dependency:tree

# GradleæŸ¥çœ‹ä¾èµ–
./gradlew dependencies
```

**â‘¡ å¸¸è§ä¾èµ–å¯¹ç…§è¡¨**

| åŠŸèƒ½ | **æ­£ç¡®çš„starterä¾èµ–** |
|-----|---------------------|
| **Webå¼€å‘** | `spring-boot-starter-web` |
| **æ•°æ®åº“** | `spring-boot-starter-data-jpa` |
| **Redis** | `spring-boot-starter-data-redis` |
| **MongoDB** | `spring-boot-starter-data-mongodb` |
| **å®šæ—¶ä»»åŠ¡** | `spring-boot-starter`ï¼ˆå·²åŒ…å«ï¼‰|

**â‘¢ ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥**
```xml
<!-- é”™è¯¯ï¼šç‰ˆæœ¬ä¸å…¼å®¹ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.7.0</version>
</dependency>
<dependency>
    <groupId>org.mybatis.spring.boot</groupId>
    <artifactId>mybatis-spring-boot-starter</artifactId>
    <version>3.0.0</version> <!-- è¿™ä¸ªç‰ˆæœ¬è¦æ±‚SpringBoot 3.x -->
</dependency>
```

### 5.2 å±æ€§å‰ç¼€é”™è¯¯æ’æŸ¥


**é—®é¢˜ç°è±¡**ï¼šé…ç½®äº†å±æ€§ä½†ä¸ç”Ÿæ•ˆ

**å¸¸è§é”™è¯¯ç¤ºä¾‹**ï¼š
```yaml
# âŒ é”™è¯¯ï¼šå±æ€§åå†™é”™
spring:
  database:  # é”™è¯¯ï¼åº”è¯¥æ˜¯datasource
    url: jdbc:mysql://localhost:3306/test
    username: root
    password: 123456

# âœ… æ­£ç¡®
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test
    username: root  
    password: 123456
```

**æ’æŸ¥æ–¹æ³•**ï¼š

**â‘  æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£**ç¡®è®¤æ­£ç¡®çš„å±æ€§å‰ç¼€

**â‘¡ ä½¿ç”¨IDEçš„è‡ªåŠ¨æç¤ºåŠŸèƒ½**

**â‘¢ é€šè¿‡actuatoræŸ¥çœ‹æ‰€æœ‰é…ç½®**ï¼š
```bash
# è®¿é—®é…ç½®å±æ€§ç«¯ç‚¹
curl http://localhost:8080/actuator/configprops
```

### 5.3 ç±»è·¯å¾„é—®é¢˜å®šä½


**é—®é¢˜ç°è±¡**ï¼šä¾èµ–å·²æ·»åŠ ï¼Œä½†æç¤ºæ‰¾ä¸åˆ°ç±»

**æ’æŸ¥æ­¥éª¤**ï¼š

**â‘  æ£€æŸ¥JARåŒ…æ˜¯å¦çœŸçš„å­˜åœ¨**
```bash
# åœ¨targetç›®å½•ä¸‹æŸ¥çœ‹
ls -la target/classes/
ls -la target/lib/
```

**â‘¡ æ£€æŸ¥ç±»æ˜¯å¦åœ¨æ­£ç¡®çš„åŒ…ä¸­**
```java
// å°è¯•æ‰‹åŠ¨å¯¼å…¥çœ‹æ˜¯å¦èƒ½æ‰¾åˆ°ç±»
import org.apache.ibatis.session.SqlSessionFactory; // èƒ½å¯¼å…¥å—ï¼Ÿ
```

**â‘¢ æ£€æŸ¥Maven/Gradleæ„å»º**
```bash
# æ¸…ç†é‡æ–°æ„å»º
mvn clean compile
# æˆ–
./gradlew clean build
```

### 5.4 ç¯å¢ƒæ¡ä»¶ä¸æ»¡è¶³æ’æŸ¥


**å¸¸è§ç¯å¢ƒæ¡ä»¶**ï¼š

**â‘  Webç¯å¢ƒæ£€æŸ¥**
```java
// æŸäº›é…ç½®åªåœ¨Webç¯å¢ƒä¸‹ç”Ÿæ•ˆ
@ConditionalOnWebApplication
public class WebMvcAutoConfiguration {
    // ...
}
```

**â‘¡ Profileç¯å¢ƒæ£€æŸ¥**  
```yaml
# application-dev.yml
spring:
  profiles:
    active: dev  # ç¡®ä¿æ¿€æ´»äº†æ­£ç¡®çš„profile
```

**â‘¢ æ“ä½œç³»ç»Ÿæ¡ä»¶**
```java
// æŸäº›é…ç½®åªåœ¨ç‰¹å®šæ“ä½œç³»ç»Ÿä¸‹ç”Ÿæ•ˆ
@ConditionalOnProperty(name = "os.name", havingValue = "Linux")
```

---

## 6. ğŸ’¼ å®é™…æ¡ˆä¾‹æ¼”ç»ƒ


### 6.1 æ¡ˆä¾‹ä¸€ï¼šRedisè‡ªåŠ¨é…ç½®ä¸ç”Ÿæ•ˆ


**é—®é¢˜æè¿°**ï¼šæ·»åŠ äº†Redisé…ç½®ï¼Œä½†æ— æ³•æ³¨å…¥RedisTemplate

**â‘  ç°è±¡**ï¼š
```java
@Service
public class CacheService {
    
    @Autowired
    private RedisTemplate redisTemplate; // å¯åŠ¨æŠ¥é”™ï¼šæ‰¾ä¸åˆ°Bean
}
```

**â‘¡ å¼€å¯debugæ’æŸ¥**ï¼š
```yaml
debug: true
spring:
  redis:
    host: localhost
    port: 6379
```

**â‘¢ æŸ¥çœ‹debugè¾“å‡º**ï¼š
```
Negative matches:
RedisAutoConfiguration:
   Did not match:
      - @ConditionalOnClass did not find required class 'org.springframework.data.redis.core.RedisOperations'
```

**â‘£ é—®é¢˜åˆ†æ**ï¼šç¼ºå°‘spring-data-redisä¾èµ–

**â‘¤ è§£å†³æ–¹æ¡ˆ**ï¼š
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>
```

### 6.2 æ¡ˆä¾‹äºŒï¼šæ•°æ®æºè‡ªåŠ¨é…ç½®å†²çª


**é—®é¢˜æè¿°**ï¼šé…ç½®äº†å¤šä¸ªæ•°æ®æºï¼Œå¯åŠ¨æŠ¥é”™

**â‘  é”™è¯¯ä¿¡æ¯**ï¼š
```
Consider marking one of the beans as @Primary, or excluding one of the auto-configurations
```

**â‘¡ ä½¿ç”¨actuatoræŸ¥çœ‹**ï¼š
```bash
curl http://localhost:8080/actuator/conditions
```

**â‘¢ å‘ç°é—®é¢˜**ï¼š
```json
"positiveMatches": {
  "DataSourceAutoConfiguration": [...],
  "HikariDataSourceConfiguration": [...],
  "TomcatDataSourceConfiguration": [...]  // å¤šä¸ªæ•°æ®æºé…ç½®éƒ½ç”Ÿæ•ˆäº†
}
```

**â‘£ è§£å†³æ–¹æ¡ˆ**ï¼šæ’é™¤ä¸éœ€è¦çš„è‡ªåŠ¨é…ç½®
```java
@SpringBootApplication(exclude = {
    DataSourceAutoConfiguration.class  // æ’é™¤é»˜è®¤æ•°æ®æºé…ç½®
})
public class Application {
    
    @Primary
    @Bean
    public DataSource primaryDataSource() {
        // è‡ªå®šä¹‰æ•°æ®æºé…ç½®
        return DataSourceBuilder.create().build();
    }
}
```

### 6.3 æ¡ˆä¾‹ä¸‰ï¼šWebåŠŸèƒ½åœ¨éWebç¯å¢ƒä¸ç”Ÿæ•ˆ


**é—®é¢˜æè¿°**ï¼šåœ¨å•å…ƒæµ‹è¯•ä¸­æ— æ³•å¯åŠ¨Webç›¸å…³åŠŸèƒ½

**â‘  æµ‹è¯•ä»£ç **ï¼š
```java
@SpringBootTest  // é»˜è®¤ä¸ä¼šå¯åŠ¨Webç¯å¢ƒ
class WebControllerTest {
    
    @Autowired
    private WebApplicationContext context; // æ³¨å…¥å¤±è´¥
}
```

**â‘¡ è§£å†³æ–¹æ¡ˆ**ï¼šæŒ‡å®šWebç¯å¢ƒ
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class WebControllerTest {
    
    @Autowired
    private TestRestTemplate restTemplate;
    
    @Test
    void testApi() {
        // ç°åœ¨å¯ä»¥è¿›è¡ŒWebæµ‹è¯•äº†
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„è°ƒè¯•æ–¹æ³•


```
ğŸ”§ è°ƒè¯•å·¥å…·ç®±ï¼š
â”œâ”€â”€ debug=true           â†’ æŸ¥çœ‹è¯¦ç»†çš„æ¡ä»¶åŒ¹é…è¿‡ç¨‹
â”œâ”€â”€ actuator/conditions  â†’ è¿è¡Œæ—¶æŸ¥çœ‹é…ç½®çŠ¶æ€  
â”œâ”€â”€ dependency:tree      â†’ æ£€æŸ¥ä¾èµ–æ˜¯å¦æ­£ç¡®
â””â”€â”€ æ—¥å¿—åˆ†æ            â†’ å…³æ³¨ERRORå’ŒWARNä¿¡æ¯
```

### 7.2 æ’æŸ¥é—®é¢˜çš„æ€è·¯


**â‘  ç¡®è®¤é—®é¢˜ç°è±¡**
- æ˜¯å®Œå…¨ä¸ç”Ÿæ•ˆï¼Ÿè¿˜æ˜¯éƒ¨åˆ†ä¸ç”Ÿæ•ˆï¼Ÿ
- æœ‰ä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ

**â‘¡ æ£€æŸ¥åŸºç¡€æ¡ä»¶**  
- ä¾èµ–JARåŒ…æ˜¯å¦å­˜åœ¨ï¼Ÿ
- ç‰ˆæœ¬æ˜¯å¦å…¼å®¹ï¼Ÿ
- é…ç½®å±æ€§åæ˜¯å¦æ­£ç¡®ï¼Ÿ

**â‘¢ ä½¿ç”¨è°ƒè¯•å·¥å…·**
- å¼€å¯debugæ¨¡å¼æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- ä½¿ç”¨actuatorç«¯ç‚¹æŸ¥çœ‹è¿è¡Œæ—¶çŠ¶æ€

**â‘£ åˆ†ææ ¹æœ¬åŸå› **
- å“ªä¸ª@Conditionalæ¡ä»¶æ²¡æ»¡è¶³ï¼Ÿ
- æ˜¯ç¯å¢ƒé—®é¢˜è¿˜æ˜¯é…ç½®é—®é¢˜ï¼Ÿ

**â‘¤ é’ˆå¯¹æ€§è§£å†³**
- è¡¥å……ç¼ºå¤±çš„ä¾èµ–
- ä¿®æ­£é”™è¯¯çš„é…ç½®
- è°ƒæ•´ç¯å¢ƒæ¡ä»¶

### 7.3 é¢„é˜²é—®é¢˜çš„æœ€ä½³å®è·µ


**âœ… å¼€å‘é˜¶æ®µå»ºè®®**ï¼š
- ä½¿ç”¨SpringBootå®˜æ–¹starterï¼Œé¿å…è‡ªå·±æ‹¼è£…ä¾èµ–
- é…ç½®å±æ€§æ—¶ä½¿ç”¨IDEçš„è‡ªåŠ¨æç¤ºåŠŸèƒ½  
- å®šæœŸæ£€æŸ¥ä¾èµ–ç‰ˆæœ¬çš„å…¼å®¹æ€§

**âœ… æµ‹è¯•é˜¶æ®µå»ºè®®**ï¼š
- åœ¨æµ‹è¯•ç¯å¢ƒå¼€å¯actuatorç«¯ç‚¹
- ä½¿ç”¨ä¸åŒprofileæµ‹è¯•é…ç½®çš„æ­£ç¡®æ€§
- ç¼–å†™é›†æˆæµ‹è¯•éªŒè¯è‡ªåŠ¨é…ç½®æ•ˆæœ

**âœ… ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
- ä¿ç•™å¿…è¦çš„actuatorç«¯ç‚¹ç”¨äºæ•…éšœæ’æŸ¥
- ç›‘æ§åº”ç”¨å¯åŠ¨æ—¥å¿—ï¼Œå…³æ³¨é…ç½®ç›¸å…³è­¦å‘Š
- å»ºç«‹é…ç½®å˜æ›´çš„å®¡æ ¸æµç¨‹

> ğŸ’¡ **æ–°æ‰‹è®°å¿†å£è¯€**ï¼š  
> é…ç½®ä¸ç”Ÿæ•ˆåˆ«æ…Œå¼ ï¼Œdebugå¼€å…³æ¥å¸®å¿™  
> actuatorç«¯ç‚¹æŸ¥çŠ¶æ€ï¼Œä¾èµ–ç‰ˆæœ¬è¦å¯¹é½  
> å±æ€§å‰ç¼€è«å†™é”™ï¼Œæ¡ä»¶ä¸æ»¡æŸ¥æ—¥å¿—

**æ ¸å¿ƒç†å¿µ**ï¼šSpringBootçš„è‡ªåŠ¨é…ç½®æ˜¯**æ™ºèƒ½**çš„ï¼Œå®ƒä¼šæ ¹æ®ä½ çš„ç¯å¢ƒå’Œä¾èµ–è‡ªåŠ¨åˆ¤æ–­ã€‚å½“ä¸ç”Ÿæ•ˆæ—¶ï¼Œä¸€å®šæ˜¯æŸä¸ªåˆ¤æ–­æ¡ä»¶æ²¡æ»¡è¶³ï¼Œç”¨å¥½è°ƒè¯•å·¥å…·å°±èƒ½å¿«é€Ÿå®šä½é—®é¢˜ï¼