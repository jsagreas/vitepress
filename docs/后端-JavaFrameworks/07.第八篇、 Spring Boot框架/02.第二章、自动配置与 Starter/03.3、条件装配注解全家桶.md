---
title: 3ã€æ¡ä»¶è£…é…æ³¨è§£å…¨å®¶æ¡¶
---
## ğŸ“š ç›®å½•

1. [æ¡ä»¶è£…é…åŸºç¡€æ¦‚å¿µ](#1-æ¡ä»¶è£…é…åŸºç¡€æ¦‚å¿µ)
2. [ç±»å­˜åœ¨æ¡ä»¶æ£€æŸ¥](#2-ç±»å­˜åœ¨æ¡ä»¶æ£€æŸ¥)
3. [Beanç¼ºå¤±æ¡ä»¶è£…é…](#3-Beanç¼ºå¤±æ¡ä»¶è£…é…)
4. [å±æ€§æ¡ä»¶æ§åˆ¶](#4-å±æ€§æ¡ä»¶æ§åˆ¶)
5. [Webåº”ç”¨ç¯å¢ƒæ¡ä»¶](#5-Webåº”ç”¨ç¯å¢ƒæ¡ä»¶)
6. [è¡¨è¾¾å¼æ¡ä»¶åˆ¤æ–­](#6-è¡¨è¾¾å¼æ¡ä»¶åˆ¤æ–­)
7. [æ¡ä»¶ç»„åˆä¸é€»è¾‘è¿ç®—](#7-æ¡ä»¶ç»„åˆä¸é€»è¾‘è¿ç®—)
8. [å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ](#8-å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” æ¡ä»¶è£…é…åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ¡ä»¶è£…é…


**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
æƒ³è±¡ä½ åœ¨è£…ä¿®æˆ¿å­ï¼Œä½ ä¸ä¼šåœ¨æ¯ä¸ªæˆ¿é—´éƒ½è£…ç©ºè°ƒï¼Œè€Œæ˜¯**æŒ‰éœ€å®‰è£…**ï¼š
- å§å®¤æ¯”è¾ƒçƒ­ â†’ è£…ç©ºè°ƒ âœ…
- å‚¨è—å®¤ä¸ä½äºº â†’ ä¸è£…ç©ºè°ƒ âŒ
- å·²ç»æœ‰ä¸­å¤®ç©ºè°ƒ â†’ ä¸è£…åˆ†ä½“ç©ºè°ƒ âŒ

Spring Bootçš„æ¡ä»¶è£…é…å°±æ˜¯è¿™ä¸ªé“ç†ï¼š**æ ¹æ®å®é™…æƒ…å†µå†³å®šæ˜¯å¦åˆ›å»ºæŸä¸ªBean**ã€‚

```
ä¼ ç»ŸSpringé…ç½®é—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  applicationContext.xml  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <bean id="dataSource">  â”‚ â† ä¸ç®¡ç”¨ä¸ç”¨éƒ½è¦é…ç½®
â”‚ <bean id="redis">       â”‚ â† é¡¹ç›®å¯èƒ½æ ¹æœ¬ä¸ç”¨Redis
â”‚ <bean id="mq">          â”‚ â† å¢åŠ å¤æ‚åº¦
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Spring Bootæ™ºèƒ½é…ç½®ï¼š
åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼š
â€¢ æœ‰æ•°æ®åº“é©±åŠ¨ï¼Ÿâ†’ è‡ªåŠ¨é…ç½®æ•°æ®æº
â€¢ æœ‰Redisä¾èµ–ï¼Ÿâ†’ è‡ªåŠ¨é…ç½®Redis
â€¢ æ²¡æœ‰ç›¸å…³ä¾èµ–ï¼Ÿâ†’ è·³è¿‡é…ç½®
```

### 1.2 æ¡ä»¶è£…é…çš„ä»·å€¼


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š

**é—®é¢˜1ï¼šé…ç½®çˆ†ç‚¸**
```
ä»¥å‰å†™é¡¹ç›®ï¼š
â€¢ æ•°æ®åº“é…ç½® - 20è¡ŒXML
â€¢ ç¼“å­˜é…ç½® - 15è¡ŒXML  
â€¢ æ¶ˆæ¯é˜Ÿåˆ—é…ç½® - 25è¡ŒXML
â€¢ å®‰å…¨é…ç½® - 30è¡ŒXML
â€¢ ...æ€»å…±å‡ ç™¾è¡Œé…ç½®

ç°åœ¨ç”¨Spring Bootï¼š
â€¢ åŠ ä¸ªä¾èµ–jaråŒ…
â€¢ å†™å‡ è¡Œé…ç½®å±æ€§
â€¢ å…¶ä»–å…¨éƒ¨è‡ªåŠ¨é…ç½®
```

**é—®é¢˜2ï¼šç¯å¢ƒé€‚é…**
```
å¼€å‘ç¯å¢ƒï¼šç”¨H2å†…å­˜æ•°æ®åº“
æµ‹è¯•ç¯å¢ƒï¼šç”¨MySQLæ•°æ®åº“
ç”Ÿäº§ç¯å¢ƒï¼šç”¨PostgreSQLæ•°æ®åº“

ä»¥å‰ï¼šéœ€è¦ç»´æŠ¤3å¥—é…ç½®æ–‡ä»¶
ç°åœ¨ï¼šSpring Bootæ ¹æ®classpathè‡ªåŠ¨é€‰æ‹©
```

### 1.3 æ¡ä»¶è£…é…å·¥ä½œåŸç†


**ğŸ” åº•å±‚æœºåˆ¶**ï¼š

Spring Bootåœ¨å¯åŠ¨æ—¶ä¼šè¿›è¡Œ"ä½“æ£€"ï¼š

```
Spring Bootå¯åŠ¨æ£€æŸ¥æµç¨‹ï¼š
1. æ‰«æclasspath â†’ å‘ç°æœ‰å“ªäº›jaråŒ…
2. è¯»å–é…ç½®æ–‡ä»¶ â†’ çœ‹ç”¨æˆ·è®¾ç½®äº†ä»€ä¹ˆ
3. æ£€æŸ¥å·²æœ‰Bean â†’ é¿å…é‡å¤åˆ›å»º
4. åº”ç”¨æ¡ä»¶æ³¨è§£ â†’ å†³å®šæ˜¯å¦è£…é…
5. åˆ›å»ºåˆé€‚Bean â†’ å®Œæˆè‡ªåŠ¨é…ç½®
```

**ğŸ’¡ æ ¸å¿ƒæ³¨è§£å®¶æ—**ï¼š

| æ³¨è§£ | **ä½œç”¨** | **ç”Ÿæ´»ç±»æ¯”** |
|------|----------|-------------|
| `@ConditionalOnClass` | `æœ‰æŸä¸ªç±»æ‰è£…é…` | `æœ‰æ’åº§æ‰è£…ç”µå™¨` |
| `@ConditionalOnMissingBean` | `æ²¡æœ‰Beanæ‰è£…é…` | `æ²¡æœ‰ç©ºè°ƒæ‰è£…é£æ‰‡` |
| `@ConditionalOnProperty` | `æœ‰å±æ€§é…ç½®æ‰è£…é…` | `å¼€å…³æ‰“å¼€æ‰å·¥ä½œ` |
| `@ConditionalOnWebApplication` | `æ˜¯Webåº”ç”¨æ‰è£…é…` | `æ˜¯é¤å…æ‰è£…æ”¶é“¶å°` |
| `@ConditionalOnExpression` | `è¡¨è¾¾å¼ä¸ºçœŸæ‰è£…é…` | `æ»¡è¶³å¤æ‚æ¡ä»¶æ‰æ‰§è¡Œ` |

---

## 2. ğŸ“¦ ç±»å­˜åœ¨æ¡ä»¶æ£€æŸ¥


### 2.1 @ConditionalOnClassåŸºæœ¬æ¦‚å¿µ


**é€šä¿—ç†è§£**ï¼š
è¿™ä¸ªæ³¨è§£å°±åƒ"é—¨å«"ä¸€æ ·ï¼Œæ£€æŸ¥"æŸä¸ªäººï¼ˆç±»ï¼‰æ˜¯å¦åˆ°åœº"ï¼Œå¦‚æœåˆ°äº†å°±æ”¾è¡Œï¼ˆè£…é…Beanï¼‰ï¼Œæ²¡åˆ°å°±æ‹¦ä½ï¼ˆä¸è£…é…ï¼‰ã€‚

```
å®é™…åº”ç”¨åœºæ™¯ï¼š
â€¢ é¡¹ç›®ä¸­æœ‰MySQLé©±åŠ¨ â†’ è‡ªåŠ¨é…ç½®MySQLæ•°æ®æº
â€¢ é¡¹ç›®ä¸­æœ‰Redisä¾èµ– â†’ è‡ªåŠ¨é…ç½®Redisè¿æ¥
â€¢ é¡¹ç›®ä¸­æ²¡æœ‰æŸä¸ªç»„ä»¶ â†’ è·³è¿‡ç›¸å…³é…ç½®
```

### 2.2 åŸºç¡€ä½¿ç”¨æ–¹å¼


**ğŸ”§ å•ä¸ªç±»æ¡ä»¶æ£€æŸ¥**ï¼š

```java
// åªæœ‰å½“classpathä¸­å­˜åœ¨DataSourceç±»æ—¶ï¼Œæ‰åˆ›å»ºè¿™ä¸ªé…ç½®
@Configuration
@ConditionalOnClass(DataSource.class)
public class DatabaseAutoConfig {
    
    @Bean
    public DataSource dataSource() {
        // åˆ›å»ºæ•°æ®æº
        return new HikariDataSource();
    }
}
```

**è¿™æ®µä»£ç çš„å«ä¹‰**ï¼š
- å°±åƒè¯´ï¼š"å¦‚æœå·¥å…·ç®±é‡Œæœ‰èºä¸åˆ€ï¼Œå°±å‡†å¤‡è£…èºä¸"
- `DataSource.class`å­˜åœ¨ = é¡¹ç›®å¼•å…¥äº†æ•°æ®åº“ç›¸å…³ä¾èµ–
- æ¡ä»¶æ»¡è¶³æ—¶æ‰ä¼šæ‰§è¡Œ`dataSource()`æ–¹æ³•åˆ›å»ºBean

**ğŸ”§ å¤šä¸ªç±»æ¡ä»¶æ£€æŸ¥**ï¼š

```java
// éœ€è¦åŒæ—¶å­˜åœ¨å¤šä¸ªç±»æ‰è£…é…
@Configuration
@ConditionalOnClass({
    RedisTemplate.class,
    JedisConnection.class
})
public class RedisAutoConfig {
    
    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        // é…ç½®Redisæ¨¡æ¿
        return new RedisTemplate<>();
    }
}
```

### 2.3 æ£€æŸ¥ç±»åå­—ç¬¦ä¸²


æœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³ç›´æ¥å¼•ç”¨ç±»ï¼ˆé¿å…ç¼–è¯‘æ—¶ä¾èµ–ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ï¼š

```java
@Configuration
@ConditionalOnClass(name = {
    "org.springframework.web.servlet.DispatcherServlet",
    "org.springframework.web.servlet.config.annotation.WebMvcConfigurer"
})
public class WebMvcAutoConfig {
    // Web MVCç›¸å…³é…ç½®
}
```

**ä¸ºä»€ä¹ˆç”¨å­—ç¬¦ä¸²**ï¼š
- é¿å…ç¼–è¯‘æ—¶å¿…é¡»æœ‰è¿™ä¸ªç±»
- æ›´çµæ´»çš„ç‰ˆæœ¬å…¼å®¹æ€§
- å¯ä»¥æ£€æŸ¥ç¬¬ä¸‰æ–¹åŒ…ä¸­çš„ç±»

### 2.4 å®é™…åº”ç”¨æ¡ˆä¾‹


**ğŸ“± çœŸå®åœºæ™¯ï¼šçŸ­ä¿¡æœåŠ¡è‡ªåŠ¨é…ç½®**

```java
@Configuration
@ConditionalOnClass(name = "com.aliyun.sms.SmsClient") 
public class SmsAutoConfig {
    
    @Bean
    @ConditionalOnMissingBean
    public SmsService smsService() {
        return new AliyunSmsService();
    }
}
```

**ä½¿ç”¨æ•ˆæœ**ï¼š
```
æƒ…å†µ1ï¼šé¡¹ç›®ä¸­å¼•å…¥äº†é˜¿é‡Œäº‘SMSä¾èµ–
â†’ è‡ªåŠ¨åˆ›å»ºçŸ­ä¿¡æœåŠ¡Bean
â†’ å¼€å‘è€…ç›´æ¥@Autowiredä½¿ç”¨

æƒ…å†µ2ï¼šé¡¹ç›®ä¸­æ²¡æœ‰SMSä¾èµ–  
â†’ ä¸åˆ›å»ºçŸ­ä¿¡æœåŠ¡Bean
â†’ ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯åŠŸèƒ½ä¸å¯ç”¨
```

---

## 3. ğŸ” Beanç¼ºå¤±æ¡ä»¶è£…é…


### 3.1 @ConditionalOnMissingBeanæ¦‚å¿µ


**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
è¿™ä¸ªæ³¨è§£åƒ"è´´å¿ƒç®¡å®¶"ï¼Œä¼šå…ˆæ£€æŸ¥"å®¶é‡Œæ˜¯å¦å·²ç»æœ‰æŸæ ·ä¸œè¥¿"ï¼Œå¦‚æœæ²¡æœ‰æ‰å»ä¹°ï¼Œé¿å…é‡å¤è´­ä¹°ã€‚

```
ç”Ÿæ´»åœºæ™¯å¯¹æ¯”ï¼š
å®¶é‡Œæ²¡æœ‰å’–å•¡æœº â†’ ä¹°ä¸€å°è‡ªåŠ¨å’–å•¡æœº
å®¶é‡Œå·²æœ‰å’–å•¡æœº â†’ ä¸å†ä¹°ï¼Œé¿å…æµªè´¹

Spring Beanåœºæ™¯ï¼š
å®¹å™¨ä¸­æ²¡æœ‰DataSource â†’ è‡ªåŠ¨åˆ›å»ºé»˜è®¤æ•°æ®æº  
å®¹å™¨ä¸­å·²æœ‰DataSource â†’ ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„
```

### 3.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


**ğŸ”§ æŒ‰ç±»å‹æ£€æŸ¥Bean**ï¼š

```java
@Configuration
public class DataSourceAutoConfig {
    
    // åªæœ‰å½“å®¹å™¨ä¸­æ²¡æœ‰DataSourceç±»å‹çš„Beanæ—¶æ‰åˆ›å»º
    @Bean
    @ConditionalOnMissingBean(DataSource.class)
    public DataSource defaultDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:h2:mem:testdb");
        return dataSource;
    }
}
```

**å·¥ä½œé€»è¾‘**ï¼š
```
Springå¯åŠ¨æ—¶æ£€æŸ¥ï¼š
1. å®¹å™¨ä¸­æ˜¯å¦å·²ç»æœ‰DataSourceç±»å‹çš„Beanï¼Ÿ
   - æœ‰ â†’ è·³è¿‡defaultDataSource()æ–¹æ³•
   - æ²¡æœ‰ â†’ æ‰§è¡Œæ–¹æ³•ï¼Œåˆ›å»ºé»˜è®¤æ•°æ®æº

è¿™æ ·çš„å¥½å¤„ï¼š
âœ… ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ•°æ®æºï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰
âœ… æ²¡æœ‰è‡ªå®šä¹‰æ—¶æä¾›é»˜è®¤å®ç°  
âœ… é¿å…Beanå†²çªå’Œé‡å¤åˆ›å»º
```

### 3.3 æŒ‰Beanåç§°æ£€æŸ¥


```java
@Configuration  
public class CacheConfig {
    
    // æŒ‰Beanåç§°æ£€æŸ¥
    @Bean
    @ConditionalOnMissingBean(name = "cacheManager")
    public CacheManager defaultCacheManager() {
        return new ConcurrentMapCacheManager();
    }
}
```

### 3.4 æŒ‡å®šæœç´¢ç­–ç•¥


**ğŸ¯ æœç´¢èŒƒå›´æ§åˆ¶**ï¼š

```java
@Configuration
public class ServiceConfig {
    
    // åªåœ¨å½“å‰å®¹å™¨ä¸­æœç´¢ï¼Œä¸æœç´¢çˆ¶å®¹å™¨
    @Bean
    @ConditionalOnMissingBean(
        value = UserService.class,
        search = SearchStrategy.CURRENT
    )
    public UserService defaultUserService() {
        return new DefaultUserService();
    }
}
```

**SearchStrategyè¯´æ˜**ï¼š
- `CURRENT`ï¼šåªæœç´¢å½“å‰å®¹å™¨
- `ANCESTORS`ï¼šåªæœç´¢çˆ¶å®¹å™¨  
- `ALL`ï¼šæœç´¢å½“å‰å®¹å™¨å’Œæ‰€æœ‰çˆ¶å®¹å™¨ï¼ˆé»˜è®¤ï¼‰

### 3.5 å®æˆ˜åº”ç”¨åœºæ™¯


**ğŸ“Š é…ç½®ç±»çš„ä¼˜é›…è®¾è®¡**ï¼š

```java
@Configuration
@EnableConfigurationProperties(MyAppProperties.class)
public class MyAppAutoConfig {
    
    // ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ï¼Œæ²¡æœ‰å®šä¹‰æ—¶ä½¿ç”¨é»˜è®¤å®ç°
    @Bean
    @ConditionalOnMissingBean
    public UserService userService() {
        return new DefaultUserService();
    }
    
    // å¯ä»¥ä¾èµ–ä¸Šé¢çš„Beanï¼Œå› ä¸ºæ¡ä»¶ä¿è¯å®ƒä¸€å®šå­˜åœ¨
    @Bean
    @ConditionalOnMissingBean  
    public UserController userController(UserService userService) {
        return new UserController(userService);
    }
}
```

**ä½¿ç”¨æ•ˆæœæ¼”ç¤º**ï¼š
```java
// åœºæ™¯1ï¼šä½¿ç”¨é»˜è®¤é…ç½®
@SpringBootApplication
public class App {
    // ä»€ä¹ˆéƒ½ä¸ç”¨å†™ï¼Œè‡ªåŠ¨ä½¿ç”¨DefaultUserService
}

// åœºæ™¯2ï¼šç”¨æˆ·è‡ªå®šä¹‰å®ç°
@SpringBootApplication  
public class App {
    
    @Bean
    public UserService userService() {
        return new CustomUserService(); // ä¼šä¼˜å…ˆä½¿ç”¨è¿™ä¸ª
    }
}
```

---

## 4. âš™ï¸ å±æ€§æ¡ä»¶æ§åˆ¶


### 4.1 @ConditionalOnPropertyåŸºæœ¬ç†å¿µ


**é€šä¿—ç†è§£**ï¼š
è¿™ä¸ªæ³¨è§£å°±åƒ"æ™ºèƒ½å¼€å…³"ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®æ¥å†³å®šæ˜¯å¦å¯ç”¨æŸä¸ªåŠŸèƒ½ã€‚

```
ç°å®ç±»æ¯”ï¼š
ç©ºè°ƒé¥æ§å™¨ä¸Šçš„"å®šæ—¶å¼€å…³"ï¼š
â€¢ è®¾ç½®timer.enabled=true â†’ å¯ç”¨å®šæ—¶åŠŸèƒ½
â€¢ è®¾ç½®timer.enabled=false â†’ å…³é—­å®šæ—¶åŠŸèƒ½  
â€¢ æ²¡æœ‰è®¾ç½® â†’ ä½¿ç”¨é»˜è®¤è¡Œä¸º
```

### 4.2 åŸºæœ¬å±æ€§æ£€æŸ¥


**ğŸ”§ ç®€å•å±æ€§æ£€æŸ¥**ï¼š

```java
@Configuration
public class FeatureConfig {
    
    // åªæœ‰å½“é…ç½®äº†feature.cache.enabled=trueæ—¶æ‰åˆ›å»º
    @Bean
    @ConditionalOnProperty(
        name = "feature.cache.enabled", 
        havingValue = "true"
    )
    public CacheManager cacheManager() {
        return new RedisCacheManager();
    }
}
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹**ï¼š
```properties
# application.properties
feature.cache.enabled=true
```

### 4.3 å¤šå±æ€§ç»„åˆæ£€æŸ¥


```java
@Configuration
@ConditionalOnProperty(
    prefix = "app.sms",
    name = {"enabled", "provider"},
    havingValue = "aliyun",
    matchIfMissing = false
)
public class AliyunSmsConfig {
    
    @Bean
    public SmsService aliyunSmsService() {
        return new AliyunSmsService();
    }
}
```

**å¯¹åº”çš„é…ç½®**ï¼š
```yaml
# application.yml
app:
  sms:
    enabled: true      # å¿…é¡»ä¸ºtrue
    provider: aliyun   # å¿…é¡»ä¸ºaliyun
```

### 4.4 å±æ€§å­˜åœ¨æ€§æ£€æŸ¥


**ğŸ” åªæ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨**ï¼š

```java
@Configuration
public class DatabaseConfig {
    
    // åªè¦é…ç½®äº†æ•°æ®åº“URLå°±åˆ›å»ºæ•°æ®æºï¼Œä¸ç®¡å€¼æ˜¯ä»€ä¹ˆ
    @Bean
    @ConditionalOnProperty(name = "spring.datasource.url")
    public DataSource customDataSource() {
        // æ ¹æ®é…ç½®åˆ›å»ºæ•°æ®æº
        return DataSourceBuilder.create().build();
    }
}
```

### 4.5 é»˜è®¤å€¼å¤„ç†


**ğŸ¯ å¤„ç†é…ç½®ç¼ºå¤±æƒ…å†µ**ï¼š

```java
@Configuration
public class SecurityConfig {
    
    @Bean
    @ConditionalOnProperty(
        name = "app.security.enabled",
        matchIfMissing = true  // æ²¡é…ç½®æ—¶é»˜è®¤å¯ç”¨
    )
    public SecurityFilter securityFilter() {
        return new SecurityFilter();
    }
}
```

**matchIfMissingå‚æ•°è¯´æ˜**ï¼š
- `true`ï¼šå±æ€§ä¸å­˜åœ¨æ—¶æ¡ä»¶æˆç«‹ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
- `false`ï¼šå±æ€§ä¸å­˜åœ¨æ—¶æ¡ä»¶ä¸æˆç«‹ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰

### 4.6 å®é™…åº”ç”¨åœºæ™¯


**ğŸ“± åŠŸèƒ½å¼€å…³æ¨¡å¼**ï¼š

```java
@Configuration
@EnableConfigurationProperties(FeatureProperties.class)
public class FeatureToggleConfig {
    
    // çŸ­ä¿¡åŠŸèƒ½å¼€å…³
    @Bean
    @ConditionalOnProperty(
        prefix = "feature", 
        name = "sms-enabled",
        havingValue = "true",
        matchIfMissing = false
    )
    public SmsService smsService() {
        return new SmsServiceImpl();
    }
    
    // é‚®ä»¶åŠŸèƒ½å¼€å…³  
    @Bean
    @ConditionalOnProperty(
        prefix = "feature",
        name = "email-enabled", 
        havingValue = "true",
        matchIfMissing = true  // é»˜è®¤å¯ç”¨é‚®ä»¶
    )
    public EmailService emailService() {
        return new EmailServiceImpl();
    }
}
```

**é…ç½®æ–‡ä»¶**ï¼š
```yaml
feature:
  sms-enabled: true     # å¯ç”¨çŸ­ä¿¡
  email-enabled: false  # ç¦ç”¨é‚®ä»¶
```

**ğŸ¯ ç¯å¢ƒé…ç½®å·®å¼‚åŒ–**ï¼š

```java
// å¼€å‘ç¯å¢ƒé…ç½®
@Profile("dev")
@Configuration  
@ConditionalOnProperty(
    name = "app.mock.enabled",
    havingValue = "true",
    matchIfMissing = true
)
public class MockConfig {
    
    @Bean
    public PaymentService mockPaymentService() {
        return new MockPaymentService(); // æ¨¡æ‹Ÿæ”¯ä»˜
    }
}

// ç”Ÿäº§ç¯å¢ƒé…ç½®
@Profile("prod")
@Configuration
@ConditionalOnProperty(
    name = "app.mock.enabled", 
    havingValue = "false",
    matchIfMissing = true
)  
public class ProductionConfig {
    
    @Bean
    public PaymentService realPaymentService() {
        return new RealPaymentService(); // çœŸå®æ”¯ä»˜
    }
}
```

---

## 5. ğŸŒ Webåº”ç”¨ç¯å¢ƒæ¡ä»¶


### 5.1 @ConditionalOnWebApplicationæ¦‚å¿µ


**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
è¿™ä¸ªæ³¨è§£å°±åƒ"é—¨åº—è¯†åˆ«å™¨"ï¼Œèƒ½åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯ä¸æ˜¯"ç½‘åº—"ï¼ˆWebåº”ç”¨ï¼‰ï¼Œåªæœ‰æ˜¯ç½‘åº—æ‰é…ç½®"æ”¶é“¶ç³»ç»Ÿ"ï¼ˆWebç›¸å…³åŠŸèƒ½ï¼‰ã€‚

```
åº”ç”¨ç±»å‹è¯†åˆ«ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Webåº”ç”¨       â”‚    â”‚  å‘½ä»¤è¡Œåº”ç”¨      â”‚  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å¤„ç†HTTPè¯·æ±‚   â”‚    â”‚ â€¢ æ‰§è¡Œæ‰¹å¤„ç†ä»»åŠ¡  â”‚
â”‚ â€¢ è¿”å›ç½‘é¡µ/API   â”‚    â”‚ â€¢ æ•°æ®å¯¼å…¥å¯¼å‡º    â”‚  
â”‚ â€¢ éœ€è¦Webç»„ä»¶    â”‚    â”‚ â€¢ ä¸éœ€è¦WebåŠŸèƒ½   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“è£…é…Web Bean           â†“è·³è¿‡Web Bean
```

### 5.2 Webåº”ç”¨ç±»å‹æ£€æµ‹


**ğŸ”§ åŸºç¡€Webåº”ç”¨æ£€æµ‹**ï¼š

```java
@Configuration
@ConditionalOnWebApplication  // é»˜è®¤æ£€æµ‹ä»»æ„Webç±»å‹
public class WebConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        // åªæœ‰Webåº”ç”¨æ‰éœ€è¦è·¨åŸŸè¿‡æ»¤å™¨
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        // é…ç½®è·¨åŸŸè§„åˆ™...
        return new CorsFilter(source);
    }
}
```

### 5.3 æŒ‡å®šWebåº”ç”¨ç±»å‹


**ğŸ¯ ç²¾ç¡®ç±»å‹åŒ¹é…**ï¼š

Spring Bootæ”¯æŒå¤šç§WebæŠ€æœ¯æ ˆï¼Œå¯ä»¥ç²¾ç¡®æŒ‡å®šï¼š

```java
// åªåœ¨Servlet Webåº”ç”¨ä¸­ç”Ÿæ•ˆï¼ˆä¼ ç»ŸSpring MVCï¼‰
@Configuration
@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)
public class ServletWebConfig {
    
    @Bean  
    public FilterRegistrationBean<LoggingFilter> loggingFilter() {
        FilterRegistrationBean<LoggingFilter> registration = new FilterRegistrationBean<>();
        registration.setFilter(new LoggingFilter());
        registration.addUrlPatterns("/*");
        return registration;
    }
}

// åªåœ¨å“åº”å¼Webåº”ç”¨ä¸­ç”Ÿæ•ˆï¼ˆSpring WebFluxï¼‰
@Configuration
@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.REACTIVE)
public class ReactiveWebConfig {
    
    @Bean
    public WebFilter reactiveLoggingFilter() {
        return new ReactiveLoggingFilter();
    }
}
```

**Webåº”ç”¨ç±»å‹è¯´æ˜**ï¼š
- `SERVLET`ï¼šä¼ ç»Ÿçš„Servletå®¹å™¨Webåº”ç”¨ï¼ˆTomcatã€Jettyç­‰ï¼‰
- `REACTIVE`ï¼šå“åº”å¼Webåº”ç”¨ï¼ˆåŸºäºNettyçš„WebFluxï¼‰
- `ANY`ï¼šä»»æ„ç±»å‹çš„Webåº”ç”¨ï¼ˆé»˜è®¤å€¼ï¼‰

### 5.4 ä¸éWebåº”ç”¨çš„å¯¹æ¯”


**ğŸ“Š ä¸åŒåº”ç”¨ç±»å‹çš„é…ç½®å·®å¼‚**ï¼š

```java
// Webåº”ç”¨ä¸“ç”¨é…ç½®
@Configuration
@ConditionalOnWebApplication
public class WebOnlyConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        // Webå®‰å…¨é…ç½®
        return http
            .authorizeHttpRequests(auth -> auth.anyRequest().authenticated())
            .formLogin(Customizer.withDefaults())
            .build();
    }
}

// éWebåº”ç”¨ä¸“ç”¨é…ç½®  
@Configuration
@ConditionalOnNotWebApplication
public class NonWebConfig {
    
    @Bean
    @ConditionalOnMissingBean
    public CommandLineRunner dataProcessor() {
        return args -> {
            // å‘½ä»¤è¡Œåº”ç”¨çš„æ•°æ®å¤„ç†é€»è¾‘
            System.out.println("å¤„ç†æ•°æ®...");
        };
    }
}
```

### 5.5 å®é™…åº”ç”¨åœºæ™¯


**ğŸ› ï¸ é€šç”¨Starterå¼€å‘**ï¼š

å‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ªé€šç”¨çš„æ—¥å¿—Starterï¼Œéœ€è¦é€‚é…ä¸åŒåº”ç”¨ç±»å‹ï¼š

```java
@Configuration
@EnableConfigurationProperties(LoggingProperties.class)
public class LoggingAutoConfig {
    
    // Webåº”ç”¨ï¼šé…ç½®HTTPè¯·æ±‚æ—¥å¿—
    @Configuration
    @ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)
    static class ServletLoggingConfig {
        
        @Bean
        @ConditionalOnProperty(name = "app.logging.web.enabled", matchIfMissing = true)
        public FilterRegistrationBean<RequestLoggingFilter> requestLoggingFilter() {
            FilterRegistrationBean<RequestLoggingFilter> registration = new FilterRegistrationBean<>();
            registration.setFilter(new RequestLoggingFilter());
            registration.setOrder(Ordered.HIGHEST_PRECEDENCE);
            return registration;
        }
    }
    
    // å“åº”å¼Webåº”ç”¨ï¼šé…ç½®å“åº”å¼æ—¥å¿—
    @Configuration  
    @ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.REACTIVE)
    static class ReactiveLoggingConfig {
        
        @Bean
        public WebFilter reactiveRequestLoggingFilter() {
            return new ReactiveRequestLoggingFilter();
        }
    }
    
    // é€šç”¨é…ç½®ï¼šæ‰€æœ‰åº”ç”¨ç±»å‹éƒ½é€‚ç”¨
    @Bean
    @ConditionalOnMissingBean
    public LoggingService loggingService() {
        return new LoggingServiceImpl();
    }
}
```

**ä½¿ç”¨æ•ˆæœ**ï¼š
```
Servlet Webåº”ç”¨å¯åŠ¨ï¼š
âœ… åˆ›å»ºRequestLoggingFilterï¼ˆHTTPè¯·æ±‚æ—¥å¿—ï¼‰
âœ… åˆ›å»ºLoggingServiceï¼ˆé€šç”¨æ—¥å¿—æœåŠ¡ï¼‰
âŒ è·³è¿‡ReactiveRequestLoggingFilter

å“åº”å¼Webåº”ç”¨å¯åŠ¨ï¼š
âœ… åˆ›å»ºReactiveRequestLoggingFilterï¼ˆå“åº”å¼è¯·æ±‚æ—¥å¿—ï¼‰  
âœ… åˆ›å»ºLoggingServiceï¼ˆé€šç”¨æ—¥å¿—æœåŠ¡ï¼‰
âŒ è·³è¿‡RequestLoggingFilter

å‘½ä»¤è¡Œåº”ç”¨å¯åŠ¨ï¼š
âœ… åˆ›å»ºLoggingServiceï¼ˆé€šç”¨æ—¥å¿—æœåŠ¡ï¼‰
âŒ è·³è¿‡æ‰€æœ‰Webç›¸å…³é…ç½®
```

---

## 6. ğŸ§® è¡¨è¾¾å¼æ¡ä»¶åˆ¤æ–­


### 6.1 @ConditionalOnExpressionåŸºæœ¬æ¦‚å¿µ


**é€šä¿—ç†è§£**ï¼š
è¿™ä¸ªæ³¨è§£åƒ"æ™ºèƒ½åˆ¤å®˜"ï¼Œå¯ä»¥å¤„ç†å¤æ‚çš„æ¡ä»¶ç»„åˆï¼Œå°±åƒæ•°å­¦è€ƒè¯•ä¸­çš„å¤åˆæ¡ä»¶é¢˜ã€‚

```
ç”Ÿæ´»åœºæ™¯ç±»æ¯”ï¼š
ç®€å•æ¡ä»¶ï¼šå¤©æ°”çƒ­ â†’ å¼€ç©ºè°ƒ
å¤æ‚æ¡ä»¶ï¼š(å¤©æ°”çƒ­ AND ç”µè´¹ä¾¿å®œ) OR (å®¢äººæ¥è®¿) â†’ å¼€ç©ºè°ƒ

ç®€å•æ³¨è§£ï¼š@ConditionalOnProperty("hot=true")  
å¤æ‚è¡¨è¾¾å¼ï¼š@ConditionalOnExpression("'${weather}'=='hot' and '${electricity.price}'<0.5 or '${guest.visiting}'=='true'")
```

### 6.2 SpELè¡¨è¾¾å¼è¯­æ³•


Spring Expression Languageï¼ˆSpELï¼‰æ˜¯Springæ¡†æ¶çš„è¡¨è¾¾å¼è¯­è¨€ï¼š

**ğŸ”§ åŸºæœ¬è¯­æ³•å…ƒç´ **ï¼š

```java
@Configuration
public class ComplexConditionConfig {
    
    // ç®€å•å±æ€§æ£€æŸ¥
    @Bean
    @ConditionalOnExpression("'${app.mode}' == 'production'")
    public ProductionDataSource prodDataSource() {
        return new ProductionDataSource();
    }
    
    // æ•°å€¼æ¯”è¾ƒ
    @Bean
    @ConditionalOnExpression("${server.port} > 8000")
    public HighPortService highPortService() {
        return new HighPortService();
    }
    
    // å¸ƒå°”é€»è¾‘ç»„åˆ
    @Bean
    @ConditionalOnExpression(
        "'${app.debug}' == 'true' and '${spring.profiles.active}' != 'prod'"
    )
    public DebugService debugService() {
        return new DebugService();
    }
}
```

### 6.3 å¸¸ç”¨è¡¨è¾¾å¼æ¨¡å¼


**ğŸ“‹ å®ç”¨è¡¨è¾¾å¼é›†åˆ**ï¼š

```java
@Configuration
public class ExpressionExamples {
    
    // å­—ç¬¦ä¸²åŒ¹é…
    @Bean
    @ConditionalOnExpression("'${app.database.type}'.startsWith('mysql')")
    public MySQLOptimizer mysqlOptimizer() {
        return new MySQLOptimizer();
    }
    
    // æ•°å€¼èŒƒå›´åˆ¤æ–­
    @Bean
    @ConditionalOnExpression("${app.user.max-count:1000} > 500")
    public LargeScaleUserService largeScaleService() {
        return new LargeScaleUserService();
    }
    
    // åˆ—è¡¨åŒ…å«åˆ¤æ–­
    @Bean
    @ConditionalOnExpression("'${spring.profiles.active}'.contains('cache')")
    public CacheService cacheService() {
        return new CacheServiceImpl();
    }
    
    // å¤æ‚é€»è¾‘ç»„åˆ
    @Bean
    @ConditionalOnExpression(
        "('${app.env}' == 'dev' or '${app.env}' == 'test') " +
        "and '${app.mock.enabled}' != 'false'"
    )
    public MockService mockService() {
        return new MockService();
    }
}
```

### 6.4 è®¿é—®Beanå’Œç¯å¢ƒä¿¡æ¯


**ğŸŒ è®¿é—®Springç¯å¢ƒ**ï¼š

```java
@Configuration
public class AdvancedExpressionConfig {
    
    // æ£€æŸ¥æŸä¸ªBeanæ˜¯å¦å­˜åœ¨
    @Bean
    @ConditionalOnExpression("@applicationContext.containsBean('customDataSource')")
    public DataSourceMonitor dataSourceMonitor() {
        return new DataSourceMonitor();
    }
    
    // è®¿é—®ç³»ç»Ÿå±æ€§
    @Bean
    @ConditionalOnExpression("systemProperties['os.name'].toLowerCase().contains('windows')")
    public WindowsSpecificService windowsService() {
        return new WindowsSpecificService();
    }
    
    // è®¿é—®ç¯å¢ƒå˜é‡
    @Bean
    @ConditionalOnExpression("environment['APP_ENV'] == 'docker'")
    public DockerService dockerService() {
        return new DockerService();
    }
}
```

### 6.5 å®é™…åº”ç”¨åœºæ™¯


**ğŸ“Š åŠŸèƒ½å¼€å…³ä¸ç¯å¢ƒé€‚é…**ï¼š

```java
@Configuration
@EnableConfigurationProperties(AppConfig.class)
public class FeatureConditionConfig {
    
    // æ ¹æ®ç”¨æˆ·æ•°é‡å’Œç¯å¢ƒå†³å®šæ˜¯å¦å¯ç”¨ç¼“å­˜
    @Bean
    @ConditionalOnExpression(
        "${app.user.expected-count:100} > 1000 " +
        "and ('${spring.profiles.active}' == 'prod' " +
        "or '${spring.profiles.active}' == 'staging')"
    )
    public RedisCacheManager redisCacheManager() {
        return RedisCacheManager.builder()
            .connectionFactory(jedisConnectionFactory())
            .build();
    }
    
    // å¼€å‘ç¯å¢ƒæˆ–æµ‹è¯•ç¯å¢ƒçš„ç‰¹æ®Šé…ç½®
    @Bean
    @ConditionalOnExpression(
        "'${app.debug.enabled}' == 'true' " +
        "or @environment.acceptsProfiles('dev', 'test')"
    )
    public DebugInfoCollector debugCollector() {
        return new DebugInfoCollector();
    }
    
    // åŸºäºå¤šä¸ªå› ç´ çš„å¤åˆåˆ¤æ–­
    @Bean  
    @ConditionalOnExpression(
        // ç”Ÿäº§ç¯å¢ƒ + é«˜å¯ç”¨æ¨¡å¼ + è´Ÿè½½å‡è¡¡å¯ç”¨
        "'${spring.profiles.active}' == 'prod' " +
        "and '${app.ha.mode}' == 'cluster' " + 
        "and ${app.loadbalancer.enabled:true}"
    )
    public ClusterHealthMonitor clusterMonitor() {
        return new ClusterHealthMonitor();
    }
}
```

**âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹**ï¼š

```
è¡¨è¾¾å¼æ¡ä»¶çš„ä¼˜ç¼ºç‚¹ï¼š

ä¼˜ç‚¹ï¼š
âœ… åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥å¤„ç†å¤æ‚é€»è¾‘
âœ… å¯ä»¥è®¿é—®Springç¯å¢ƒçš„å„ç§ä¿¡æ¯  
âœ… æ”¯æŒä¸°å¯Œçš„æ“ä½œç¬¦å’Œå‡½æ•°

ç¼ºç‚¹ï¼š
âŒ è¡¨è¾¾å¼å¤æ‚æ—¶éš¾ä»¥ç†è§£å’Œç»´æŠ¤
âŒ ç¼–è¯‘æœŸæ— æ³•æ£€æŸ¥è¡¨è¾¾å¼æ­£ç¡®æ€§
âŒ æ€§èƒ½æ¯”å…¶ä»–æ¡ä»¶æ³¨è§£ç¨å·®

ä½¿ç”¨å»ºè®®ï¼š
â€¢ ç®€å•æ¡ä»¶ä¼˜å…ˆä½¿ç”¨ä¸“ç”¨æ³¨è§£
â€¢ å¤æ‚æ¡ä»¶æ‰ä½¿ç”¨è¡¨è¾¾å¼  
â€¢ è¡¨è¾¾å¼è¦å†™æ³¨é‡Šè¯´æ˜æ„å›¾
â€¢ é¿å…è¿‡åº¦å¤æ‚çš„åµŒå¥—é€»è¾‘
```

---

## 7. ğŸ”— æ¡ä»¶ç»„åˆä¸é€»è¾‘è¿ç®—


### 7.1 æ¡ä»¶æ³¨è§£çš„ç»„åˆä½¿ç”¨


**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
å°±åƒè¿é”åº—çš„å‡†å…¥æ¡ä»¶ï¼š"å¿…é¡»æ˜¯å•†ä¸šåŒº AND ç§Ÿé‡‘åˆç† AND äººæµé‡å¤§ AND æ²¡æœ‰åŒç±»ç«å“"ï¼Œæ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ‰å¼€åº—ã€‚

```
æ¡ä»¶ç»„åˆé€»è¾‘ï¼š
å•ä¸ªæ¡ä»¶ï¼šå¤©æ°”çƒ­ â†’ å¼€ç©ºè°ƒ
ç»„åˆæ¡ä»¶ï¼šå¤©æ°”çƒ­ AND æœ‰ç”µ AND ç©ºè°ƒæ²¡å â†’ å¼€ç©ºè°ƒ

Spring Bootä¸­ï¼š
å¤šä¸ªæ¡ä»¶æ³¨è§£ = ANDå…³ç³»ï¼ˆéƒ½å¿…é¡»æ»¡è¶³ï¼‰
ä¸€ä¸ªæ¡ä»¶æ³¨è§£å†…çš„å¤šä¸ªå€¼ = æ ¹æ®æ³¨è§£ç±»å‹å†³å®š
```

### 7.2 ANDé€»è¾‘ç»„åˆ


**ğŸ”— å¤šä¸ªæ¡ä»¶æ³¨è§£å åŠ **ï¼š

```java
@Configuration
// æ¡ä»¶1ï¼šå¿…é¡»æœ‰DataSourceç±»
@ConditionalOnClass(DataSource.class)
// æ¡ä»¶2ï¼šå¿…é¡»æ˜¯Webåº”ç”¨  
@ConditionalOnWebApplication
// æ¡ä»¶3ï¼šå¿…é¡»é…ç½®äº†æ•°æ®åº“URL
@ConditionalOnProperty(name = "spring.datasource.url")
public class WebDataSourceConfig {
    
    @Bean
    // æ¡ä»¶4ï¼šå®¹å™¨ä¸­æ²¡æœ‰DataSource Bean
    @ConditionalOnMissingBean(DataSource.class)
    public DataSource webDataSource() {
        // åªæœ‰æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ‰ä¼šåˆ›å»º
        return DataSourceBuilder.create().build();
    }
}
```

**æ‰§è¡Œé€»è¾‘**ï¼š
```
Springæ£€æŸ¥æµç¨‹ï¼š
1. classpathä¸­æœ‰DataSource.classï¼Ÿ     â†’ YES âœ…
2. å½“å‰æ˜¯Webåº”ç”¨ï¼Ÿ                    â†’ YES âœ…  
3. é…ç½®äº†spring.datasource.urlï¼Ÿ      â†’ YES âœ…
4. å®¹å™¨ä¸­æ²¡æœ‰DataSource Beanï¼Ÿ        â†’ YES âœ…

ç»“æœï¼šâœ… æ‰€æœ‰æ¡ä»¶æ»¡è¶³ï¼Œåˆ›å»ºwebDataSource Bean
```

### 7.3 æ¡ä»¶æ³¨è§£å†…éƒ¨é€»è¾‘


**ğŸ“‹ ä¸åŒæ³¨è§£çš„å†…éƒ¨é€»è¾‘**ï¼š

```java
@Configuration
public class InternalLogicExample {
    
    // @ConditionalOnClassï¼šæ•°ç»„å†…æ˜¯ANDå…³ç³»
    @Bean
    @ConditionalOnClass({
        RedisTemplate.class,           // å¿…é¡»æœ‰
        JedisConnectionFactory.class   // åŒæ—¶å¿…é¡»æœ‰
    })
    public RedisConfig redisConfig() {
        return new RedisConfig();
    }
    
    // @ConditionalOnMissingBeanï¼šæ•°ç»„å†…æ˜¯ORå…³ç³»  
    @Bean
    @ConditionalOnMissingBean({
        DataSource.class,     // æ²¡æœ‰DataSource
        // OR
        ConnectionFactory.class  // æˆ–è€…æ²¡æœ‰ConnectionFactory
    })
    public DefaultDataSource defaultDataSource() {
        return new DefaultDataSource();
    }
    
    // @ConditionalOnPropertyï¼šæ•°ç»„å†…æ˜¯ANDå…³ç³»
    @Bean
    @ConditionalOnProperty(
        prefix = "app",
        name = {"enabled", "ready"},  // ä¸¤ä¸ªå±æ€§éƒ½å¿…é¡»æ»¡è¶³æ¡ä»¶
        havingValue = "true"
    )
    public AppService appService() {
        return new AppService();
    }
}
```

### 7.4 ä½¿ç”¨Profileå®ç°ORé€»è¾‘


ç”±äºæ¡ä»¶æ³¨è§£ä¹‹é—´æ˜¯ANDå…³ç³»ï¼Œè¦å®ç°ORé€»è¾‘éœ€è¦å…¶ä»–æ–¹å¼ï¼š

**ğŸ”€ Profileæ–¹å¼å®ç°ORé€»è¾‘**ï¼š

```java
// é…ç½®1ï¼šå¼€å‘ç¯å¢ƒæˆ–æµ‹è¯•ç¯å¢ƒ
@Configuration
@Profile({"dev", "test"})  // dev OR test
public class NonProdConfig {
    
    @Bean
    public MockService mockService() {
        return new MockService();
    }
}

// é…ç½®2ï¼šä½¿ç”¨è¡¨è¾¾å¼å®ç°å¤æ‚ORé€»è¾‘
@Configuration  
@ConditionalOnExpression(
    "'${spring.profiles.active}' == 'dev' " +
    "or '${spring.profiles.active}' == 'test' " +
    "or '${app.debug.mode}' == 'true'"
)
public class DebugConfig {
    
    @Bean
    public DebugService debugService() {
        return new DebugService();
    }
}
```

### 7.5 è‡ªå®šä¹‰æ¡ä»¶ç±»


**ğŸ› ï¸ å®ç°å¤æ‚æ¡ä»¶é€»è¾‘**ï¼š

å¯¹äºéå¸¸å¤æ‚çš„æ¡ä»¶é€»è¾‘ï¼Œå¯ä»¥è‡ªå®šä¹‰æ¡ä»¶ç±»ï¼š

```java
// è‡ªå®šä¹‰æ¡ä»¶å®ç°
public class BusinessHourCondition implements Condition {
    
    @Override
    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
        Environment env = context.getEnvironment();
        
        // è·å–é…ç½®
        String startHour = env.getProperty("business.start-hour", "9");
        String endHour = env.getProperty("business.end-hour", "18");
        boolean holidayEnabled = env.getProperty("business.holiday-enabled", Boolean.class, false);
        
        // å¤æ‚ä¸šåŠ¡é€»è¾‘åˆ¤æ–­
        LocalTime now = LocalTime.now();
        LocalTime start = LocalTime.parse(startHour + ":00");
        LocalTime end = LocalTime.parse(endHour + ":00");
        
        boolean inBusinessHour = now.isAfter(start) && now.isBefore(end);
        
        // å¦‚æœæ˜¯å‡æ—¥ä¸”æ²¡å¯ç”¨å‡æ—¥æ¨¡å¼
        if (isHoliday() && !holidayEnabled) {
            return false;
        }
        
        return inBusinessHour;
    }
    
    private boolean isHoliday() {
        // åˆ¤æ–­æ˜¯å¦ä¸ºå‡æ—¥çš„é€»è¾‘
        return LocalDate.now().getDayOfWeek() == DayOfWeek.SUNDAY;
    }
}

// ä½¿ç”¨è‡ªå®šä¹‰æ¡ä»¶
@Configuration
public class BusinessConfig {
    
    @Bean
    @Conditional(BusinessHourCondition.class)
    public BusinessService businessHourService() {
        return new BusinessService();
    }
}
```

### 7.6 å®é™…åº”ç”¨ï¼šå¤šç¯å¢ƒé…ç½®ç­–ç•¥


**ğŸŒ ä¼ä¸šçº§å¤šç¯å¢ƒé…ç½®**ï¼š

```java
@Configuration
public class MultiEnvironmentConfig {
    
    // æœ¬åœ°å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨å†…å­˜æ•°æ®åº“
    @Configuration
    @ConditionalOnProperty(name = "spring.profiles.active", havingValue = "local")
    @ConditionalOnMissingBean(DataSource.class)
    static class LocalConfig {
        
        @Bean
        public DataSource h2DataSource() {
            return new EmbeddedDatabaseBuilder()
                .setType(EmbeddedDatabaseType.H2)
                .build();
        }
    }
    
    // å¼€å‘/æµ‹è¯•ç¯å¢ƒï¼šä½¿ç”¨MySQLï¼Œå¯ç”¨è°ƒè¯•åŠŸèƒ½
    @Configuration
    @ConditionalOnExpression("'${spring.profiles.active}' == 'dev' or '${spring.profiles.active}' == 'test'")
    @ConditionalOnClass(name = "com.mysql.cj.jdbc.Driver")
    static class DevTestConfig {
        
        @Bean
        @ConditionalOnProperty(name = "app.debug.enabled", matchIfMissing = true)
        public DebugInterceptor debugInterceptor() {
            return new DebugInterceptor();
        }
        
        @Bean
        @ConditionalOnMissingBean
        public DataSource devDataSource() {
            return DataSourceBuilder.create()
                .driverClassName("com.mysql.cj.jdbc.Driver")
                .build();
        }
    }
    
    // ç”Ÿäº§ç¯å¢ƒï¼šä¸¥æ ¼æ¡ä»¶ï¼Œé«˜æ€§èƒ½é…ç½®
    @Configuration
    @ConditionalOnExpression(
        "'${spring.profiles.active}' == 'prod' " +
        "and '${app.production.ready}' == 'true'"
    )  
    @ConditionalOnProperty(name = "spring.datasource.url")
    static class ProductionConfig {
        
        @Bean
        @ConditionalOnMissingBean
        public DataSource productionDataSource() {
            HikariDataSource dataSource = new HikariDataSource();
            // ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®
            dataSource.setMaximumPoolSize(50);
            dataSource.setMinimumIdle(10);
            return dataSource;
        }
        
        @Bean
        public PerformanceMonitor performanceMonitor() {
            return new PerformanceMonitor();
        }
    }
}
```

**é…ç½®æ–‡ä»¶å¯¹åº”**ï¼š
```yaml
# application-local.yml
spring:
  profiles:
    active: local

---
# application-dev.yml  
spring:
  profiles:
    active: dev
app:
  debug:
    enabled: true

---
# application-prod.yml
spring:
  profiles:
    active: prod
app:
  production:
    ready: true
```

---

## 8. ğŸ’¼ å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ


### 8.1 Starterå¼€å‘æœ€ä½³å®è·µ


**ğŸš€ å¼€å‘é€šç”¨ç»„ä»¶çš„æ€è·¯**ï¼š

å¼€å‘ä¸€ä¸ªå®Œæ•´çš„Starterå°±åƒå¼€ä¸€å®¶è¿é”é¤å…ï¼Œè¦è€ƒè™‘å„ç§ä¸åŒçš„æƒ…å†µå’Œç¯å¢ƒã€‚

```java
@Configuration
@EnableConfigurationProperties({
    MyStarterProperties.class,
    MyStarterAdvancedProperties.class
})
@ConditionalOnClass(MyStarterService.class)
public class MyStarterAutoConfiguration {
    
    private final MyStarterProperties properties;
    
    public MyStarterAutoConfiguration(MyStarterProperties properties) {
        this.properties = properties;
    }
    
    // åŸºç¡€æœåŠ¡ï¼šç”¨æˆ·å¯ä»¥è¦†ç›–
    @Bean
    @ConditionalOnMissingBean
    public MyStarterService myStarterService() {
        return new DefaultMyStarterService(properties);
    }
    
    // Webç¯å¢ƒç‰¹æœ‰çš„é…ç½®
    @Configuration
    @ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)
    @ConditionalOnClass(name = "org.springframework.web.servlet.DispatcherServlet")
    static class ServletWebConfig {
        
        @Bean
        @ConditionalOnProperty(
            prefix = "mystarter.web",
            name = "filter-enabled", 
            matchIfMissing = true
        )
        public FilterRegistrationBean<MyStarterFilter> myStarterFilter() {
            FilterRegistrationBean<MyStarterFilter> registration = new FilterRegistrationBean<>();
            registration.setFilter(new MyStarterFilter());
            registration.addUrlPatterns("/*");
            registration.setOrder(Ordered.HIGHEST_PRECEDENCE);
            return registration;
        }
    }
    
    // é«˜çº§åŠŸèƒ½ï¼šæŒ‰éœ€å¯ç”¨
    @Configuration
    @ConditionalOnProperty(
        prefix = "mystarter.advanced", 
        name = "enabled",
        havingValue = "true"
    )
    @ConditionalOnClass(name = "org.springframework.data.redis.core.RedisTemplate")
    static class AdvancedConfig {
        
        @Bean
        @ConditionalOnMissingBean
        public MyStarterAdvancedService advancedService(
            MyStarterService basicService,
            RedisTemplate<String, Object> redisTemplate
        ) {
            return new MyStarterAdvancedService(basicService, redisTemplate);
        }
    }
}
```

### 8.2 æ¡ä»¶è£…é…çš„æ€§èƒ½è€ƒè™‘


**âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**ï¼š

```java
@Configuration
public class PerformanceOptimizedConfig {
    
    // âŒ é¿å…ï¼šå¤æ‚è¡¨è¾¾å¼å½±å“å¯åŠ¨æ€§èƒ½
    @Bean
    @ConditionalOnExpression(
        // è¿™ä¸ªè¡¨è¾¾å¼æ¯æ¬¡å¯åŠ¨éƒ½è¦è§£æï¼Œæ¯”è¾ƒæ…¢
        "T(java.time.LocalDateTime).now().getHour() > 9 " +
        "and T(java.time.LocalDateTime).now().getHour() < 18"
    )
    public BusinessHourService slowBusinessService() {
        return new BusinessHourService();
    }
    
    // âœ… æ¨èï¼šä½¿ç”¨é…ç½®å±æ€§ + ç®€å•æ¡ä»¶
    @Bean
    @ConditionalOnProperty(
        name = "business.hours.enabled",
        havingValue = "true"
    )
    public BusinessHourService fastBusinessService() {
        return new BusinessHourService();
    }
    
    // âœ… æ›´å¥½ï¼šç¼“å­˜æ¡ä»¶åˆ¤æ–­ç»“æœ
    @Bean
    @Conditional(CachedBusinessHourCondition.class)
    public BusinessHourService cachedBusinessService() {
        return new BusinessHourService();
    }
}

// ç¼“å­˜æ¡ä»¶åˆ¤æ–­ç»“æœçš„è‡ªå®šä¹‰æ¡ä»¶
public class CachedBusinessHourCondition implements Condition {
    
    private static Boolean cachedResult;
    private static LocalDateTime lastCheck;
    
    @Override
    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
        // ç¼“å­˜1å°æ—¶ï¼Œé¿å…é‡å¤è®¡ç®—
        if (cachedResult == null || 
            lastCheck.isBefore(LocalDateTime.now().minusHours(1))) {
            cachedResult = checkBusinessHour(context);
            lastCheck = LocalDateTime.now();
        }
        return cachedResult;
    }
    
    private Boolean checkBusinessHour(ConditionContext context) {
        // å¤æ‚çš„ä¸šåŠ¡æ—¶é—´åˆ¤æ–­é€»è¾‘
        return true;
    }
}
```

### 8.3 æµ‹è¯•å‹å¥½çš„æ¡ä»¶é…ç½®


**ğŸ§ª ä¾¿äºå•å…ƒæµ‹è¯•çš„è®¾è®¡**ï¼š

```java
@Configuration
public class TestFriendlyConfig {
    
    // âœ… æµ‹è¯•æ—¶å¯ä»¥é€šè¿‡é…ç½®è¦†ç›–
    @Bean
    @ConditionalOnProperty(
        name = "app.external.service.enabled",
        havingValue = "true",
        matchIfMissing = true  // ç”Ÿäº§ç¯å¢ƒé»˜è®¤å¯ç”¨
    )
    public ExternalService realExternalService() {
        return new RealExternalService();
    }
    
    // æµ‹è¯•ä¸“ç”¨é…ç½®
    @Bean  
    @ConditionalOnProperty(
        name = "app.external.service.enabled",
        havingValue = "false"
    )
    public ExternalService mockExternalService() {
        return new MockExternalService();
    }
    
    // Profileæ–¹å¼çš„æµ‹è¯•é…ç½®
    @Bean
    @Profile("test")
    public ExternalService testExternalService() {
        return Mockito.mock(ExternalService.class);
    }
}
```

**æµ‹è¯•é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# application-test.yml
app:
  external:
    service:
      enabled: false  # æµ‹è¯•æ—¶ç¦ç”¨çœŸå®å¤–éƒ¨æœåŠ¡

# æˆ–è€…åœ¨æµ‹è¯•ç±»ä¸­
@TestPropertySource(properties = {
    "app.external.service.enabled=false"
})
class MyServiceTest {
    // æµ‹è¯•ä»£ç 
}
```

### 8.4 æ¡ä»¶è£…é…çš„è°ƒè¯•æŠ€å·§


**ğŸ” æ’æŸ¥æ¡ä»¶è£…é…é—®é¢˜**ï¼š

```yaml
# application.yml - å¼€å¯æ¡ä»¶è£…é…è°ƒè¯•
logging:
  level:
    org.springframework.boot.autoconfigure: DEBUG
    
debug: true  # å¯ç”¨AutoConfigurationæŠ¥å‘Š
```

**è°ƒè¯•è¾“å‡ºç¤ºä¾‹**ï¼š
```
CONDITIONS EVALUATION REPORT
============================

Positive matches:
-----------------
   DataSourceAutoConfiguration matched:
      - @ConditionalOnClass found required class 'javax.sql.DataSource'
      - @ConditionalOnProperty (spring.datasource.url) matched

Negative matches:
-----------------
   RedisAutoConfiguration:
      Did not match:
         - @ConditionalOnClass did not find required class 'org.springframework.data.redis.core.RedisTemplate'
```

**ğŸ› ï¸ ç¨‹åºåŒ–æ£€æŸ¥æ¡ä»¶**ï¼š

```java
@Component
public class ConditionDebugger {
    
    @Autowired
    private ApplicationContext applicationContext;
    
    @EventListener(ApplicationReadyEvent.class)
    public void debugConditions() {
        // æ£€æŸ¥æŸä¸ªBeanæ˜¯å¦è¢«åˆ›å»º
        if (applicationContext.containsBean("myDataSource")) {
            System.out.println("âœ… myDataSource Beanå·²åˆ›å»º");
        } else {
            System.out.println("âŒ myDataSource Beanæœªåˆ›å»ºï¼Œæ£€æŸ¥æ¡ä»¶é…ç½®");
        }
        
        // åˆ—å‡ºæ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»
        String[] beanNames = applicationContext.getBeanNamesForType(Object.class);
        Arrays.stream(beanNames)
            .filter(name -> name.contains("AutoConfiguration"))
            .forEach(name -> System.out.println("è‡ªåŠ¨é…ç½®: " + name));
    }
}
```

### 8.5 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â“ å¸¸è§é—®é¢˜é›†é”¦**ï¼š

```java
// é—®é¢˜1ï¼šæ¡ä»¶å†²çª
@Configuration
public class ConflictExample {
    
    // âŒ é”™è¯¯ï¼šé€»è¾‘çŸ›ç›¾ï¼Œæ°¸è¿œä¸ä¼šåˆ›å»º
    @Bean
    @ConditionalOnProperty(name = "feature.enabled", havingValue = "true")
    @ConditionalOnProperty(name = "feature.enabled", havingValue = "false")
    public ConflictService conflictService() {
        return new ConflictService();
    }
    
    // âœ… æ­£ç¡®ï¼šä½¿ç”¨ä¸åŒçš„å±æ€§å
    @Bean
    @ConditionalOnProperty(name = "feature.cache.enabled", havingValue = "true") 
    @ConditionalOnProperty(name = "feature.debug.enabled", havingValue = "false")
    public OptimizedService optimizedService() {
        return new OptimizedService();
    }
}

// é—®é¢˜2ï¼šå¾ªç¯ä¾èµ–
@Configuration
public class CircularDependencyExample {
    
    // âŒ å¯èƒ½å¯¼è‡´å¾ªç¯ä¾èµ–
    @Bean
    @ConditionalOnBean(ServiceB.class)
    public ServiceA serviceA(ServiceB serviceB) {
        return new ServiceA(serviceB);
    }
    
    @Bean
    @ConditionalOnBean(ServiceA.class)  
    public ServiceB serviceB(ServiceA serviceA) {
        return new ServiceB(serviceA);
    }
    
    // âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨@Lazyæˆ–é‡æ–°è®¾è®¡ä¾èµ–å…³ç³»
    @Bean
    public ServiceA serviceAFixed(@Lazy ServiceB serviceB) {
        return new ServiceA(serviceB);
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ æ¡ä»¶è£…é…æœ¬è´¨ï¼šæ ¹æ®å®é™…æƒ…å†µå†³å®šæ˜¯å¦åˆ›å»ºBeanï¼Œé¿å…æ— ç”¨é…ç½®
ğŸ”¸ @ConditionalOnClassï¼šæ£€æŸ¥ç±»è·¯å¾„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šç±»
ğŸ”¸ @ConditionalOnMissingBeanï¼šå®¹å™¨ä¸­æ²¡æœ‰æŒ‡å®šBeanæ—¶æ‰è£…é…
ğŸ”¸ @ConditionalOnPropertyï¼šæ ¹æ®é…ç½®æ–‡ä»¶å±æ€§å†³å®šæ˜¯å¦è£…é…  
ğŸ”¸ @ConditionalOnWebApplicationï¼šåªåœ¨Webåº”ç”¨ç¯å¢ƒä¸­è£…é…
ğŸ”¸ @ConditionalOnExpressionï¼šä½¿ç”¨SpELè¡¨è¾¾å¼è¿›è¡Œå¤æ‚æ¡ä»¶åˆ¤æ–­
ğŸ”¸ æ¡ä»¶ç»„åˆï¼šå¤šä¸ªæ¡ä»¶æ³¨è§£æ˜¯ANDå…³ç³»ï¼Œéƒ½å¿…é¡»æ»¡è¶³
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦æ¡ä»¶è£…é…**ï¼š
```
é—®é¢˜æ ¹æºï¼š
â€¢ ä¼ ç»ŸSpringé…ç½®ç¹çï¼Œéœ€è¦å¤§é‡XML
â€¢ ä¸åŒç¯å¢ƒéœ€è¦ä¸åŒé…ç½®ï¼Œéš¾ä»¥ç»´æŠ¤  
â€¢ å¼•å…¥ä¾èµ–ä½†ä¸ä¸€å®šä½¿ç”¨ï¼Œé€ æˆèµ„æºæµªè´¹
â€¢ Beanå†²çªå’Œé‡å¤åˆ›å»ºé—®é¢˜

è§£å†³æ–¹æ¡ˆï¼š
â€¢ æŒ‰éœ€è£…é…ï¼šæœ‰ä¾èµ–æ‰é…ç½®ç›¸å…³Bean
â€¢ æ™ºèƒ½æ£€æµ‹ï¼šè‡ªåŠ¨é€‚é…ä¸åŒç¯å¢ƒ
â€¢ ç”¨æˆ·ä¼˜å…ˆï¼šç”¨æˆ·è‡ªå®šä¹‰ä¼˜äºè‡ªåŠ¨é…ç½®
â€¢ æ¡ä»¶ç»„åˆï¼šå¤„ç†å¤æ‚çš„è£…é…é€»è¾‘
```

**ğŸ”¹ æ¡ä»¶è£…é…çš„æœ€ä½³å®è·µ**ï¼š
```
è®¾è®¡åŸåˆ™ï¼š
1. ç”¨æˆ·é…ç½®ä¼˜å…ˆï¼š@ConditionalOnMissingBean
2. æŒ‰éœ€è£…é…ï¼š@ConditionalOnClassæ£€æŸ¥ä¾èµ–
3. ç¯å¢ƒé€‚é…ï¼š@ConditionalOnWebApplication
4. å¼€å…³æ§åˆ¶ï¼š@ConditionalOnPropertyæä¾›å¼€å…³
5. æ€§èƒ½è€ƒè™‘ï¼šé¿å…å¤æ‚çš„è¡¨è¾¾å¼æ¡ä»¶

ç»„åˆç­–ç•¥ï¼š
â€¢ ç®€å•æ¡ä»¶ç”¨ä¸“ç”¨æ³¨è§£
â€¢ å¤æ‚æ¡ä»¶ç”¨è¡¨è¾¾å¼æˆ–è‡ªå®šä¹‰æ¡ä»¶ç±»
â€¢ å¤šä¸ªæ¡ä»¶æŒ‰é‡è¦æ€§æ’åº
â€¢ æä¾›åˆç†çš„é»˜è®¤å€¼
```

**ğŸ”¹ å®é™…å¼€å‘ä¸­çš„åº”ç”¨åœºæ™¯**ï¼š
```
Starterå¼€å‘ï¼š
â€¢ æä¾›å¼€ç®±å³ç”¨çš„è‡ªåŠ¨é…ç½®
â€¢ æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰è¦†ç›–
â€¢ é€‚é…ä¸åŒçš„æŠ€æœ¯æ ˆç»„åˆ

å¤šç¯å¢ƒé…ç½®ï¼š
â€¢ å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒå·®å¼‚åŒ–é…ç½®
â€¢ åŠŸèƒ½å¼€å…³å’Œé™çº§ç­–ç•¥
â€¢ æ€§èƒ½ä¼˜åŒ–çš„æ¡ä»¶å¯ç”¨

ç»„ä»¶é›†æˆï¼š
â€¢ ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ¡ä»¶è£…é…
â€¢ å¾®æœåŠ¡ç»„ä»¶çš„æŒ‰éœ€å¯ç”¨
â€¢ ç›‘æ§å’Œè°ƒè¯•åŠŸèƒ½çš„æ§åˆ¶
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ æ—¥å¸¸å¼€å‘å»ºè®®**ï¼š
```
åŸºç¡€åº”ç”¨ï¼š
1. ç†è§£Spring Boot Starterçš„æ¡ä»¶è£…é…åŸç†
2. å­¦ä¼šä½¿ç”¨@ConditionalOnPropertyæ§åˆ¶åŠŸèƒ½å¼€å…³
3. æŒæ¡@ConditionalOnMissingBeanå®ç°å¯è¦†ç›–é…ç½®
4. äº†è§£Webåº”ç”¨ä¸“æœ‰é…ç½®çš„æ¡ä»¶è£…é…

è¿›é˜¶åº”ç”¨ï¼š
1. å¼€å‘è‡ªå·±çš„Starterç»„ä»¶
2. å¤„ç†å¤æ‚çš„å¤šæ¡ä»¶ç»„åˆé€»è¾‘  
3. ä¼˜åŒ–æ¡ä»¶è£…é…çš„æ€§èƒ½
4. è®¾è®¡æµ‹è¯•å‹å¥½çš„æ¡ä»¶é…ç½®

ä¼ä¸šåº”ç”¨ï¼š
1. å»ºç«‹ç»Ÿä¸€çš„æ¡ä»¶è£…é…è§„èŒƒ
2. è®¾è®¡å¯é…ç½®çš„åŠŸèƒ½å¼€å…³ä½“ç³»
3. å®ç°ç¯å¢ƒæ„ŸçŸ¥çš„è‡ªåŠ¨é…ç½®
4. ç›‘æ§å’Œè°ƒè¯•æ¡ä»¶è£…é…é—®é¢˜
```

**ğŸ› ï¸ è°ƒè¯•ä¸é—®é¢˜æ’æŸ¥**ï¼š
```
è°ƒè¯•æŠ€å·§ï¼š
â€¢ å¼€å¯debugæ¨¡å¼æŸ¥çœ‹æ¡ä»¶è¯„ä¼°æŠ¥å‘Š
â€¢ ä½¿ç”¨@ConditionalOnExpressionæ‰“å°è°ƒè¯•ä¿¡æ¯
â€¢ é€šè¿‡ApplicationContextæ£€æŸ¥Beanåˆ›å»ºæƒ…å†µ
â€¢ ç†è§£æ¡ä»¶è£…é…çš„æ‰§è¡Œé¡ºåº

å¸¸è§é—®é¢˜ï¼š
â€¢ æ¡ä»¶å†²çªå¯¼è‡´Beanæ— æ³•åˆ›å»º
â€¢ å¾ªç¯ä¾èµ–å¯¼è‡´å¯åŠ¨å¤±è´¥
â€¢ é…ç½®å±æ€§æ‹¼å†™é”™è¯¯
â€¢ ç±»è·¯å¾„ä¾èµ–ç¼ºå¤±
```

### 9.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š å¾ªåºæ¸è¿›çš„å­¦ä¹ è®¡åˆ’**ï¼š
```
ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç†è§£
â€¢ ç†è§£æ¡ä»¶è£…é…çš„åŸºæœ¬æ¦‚å¿µå’Œä»·å€¼
â€¢ æŒæ¡å¸¸ç”¨æ¡ä»¶æ³¨è§£çš„åŸºæœ¬ç”¨æ³•
â€¢ ç»ƒä¹ ç®€å•çš„æ¡ä»¶é…ç½®

ç¬¬äºŒé˜¶æ®µï¼šå®æˆ˜åº”ç”¨
â€¢ åˆ†æSpring Bootå†…ç½®Starterçš„å®ç°
â€¢ å¼€å‘ç®€å•çš„è‡ªå®šä¹‰Starter
â€¢ å¤„ç†å¤šç¯å¢ƒé…ç½®å·®å¼‚

ç¬¬ä¸‰é˜¶æ®µï¼šæ·±å…¥æŒæ¡
â€¢ æŒæ¡å¤æ‚æ¡ä»¶ç»„åˆé€»è¾‘
â€¢ ä¼˜åŒ–æ¡ä»¶è£…é…æ€§èƒ½
â€¢ è§£å†³å®é™…é¡¹ç›®ä¸­çš„é…ç½®é—®é¢˜

ç¬¬å››é˜¶æ®µï¼šä¸“å®¶æ°´å¹³
â€¢ è®¾è®¡ä¼ä¸šçº§çš„é…ç½®ç®¡ç†ç­–ç•¥
â€¢ è´¡çŒ®å¼€æºStarteré¡¹ç›®
â€¢ æŒ‡å¯¼å›¢é˜Ÿçš„é…ç½®ç®¡ç†å®è·µ
```

**ğŸ¯ å®ç”¨æŠ€èƒ½æ£€éªŒ**ï¼š
```
è‡ªæˆ‘æ£€æµ‹æ¸…å•ï¼š
â–¡ èƒ½è§£é‡Šæ¡ä»¶è£…é…çš„å·¥ä½œåŸç†
â–¡ ç†Ÿç»ƒä½¿ç”¨5ç§å¸¸ç”¨æ¡ä»¶æ³¨è§£
â–¡ ä¼šå¤„ç†æ¡ä»¶å†²çªå’Œå¾ªç¯ä¾èµ–é—®é¢˜
â–¡ èƒ½å¼€å‘ç®€å•çš„è‡ªåŠ¨é…ç½®ç±»
â–¡ ç†è§£Spring Boot Starterçš„è®¾è®¡æ€è·¯
â–¡ ä¼šè°ƒè¯•æ¡ä»¶è£…é…ç›¸å…³é—®é¢˜
```

**ğŸ§  æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- æ¡ä»¶è£…é…è®©é…ç½®æ›´æ™ºèƒ½ï¼ŒæŒ‰éœ€åˆ›å»ºBean
- ç±»å­˜åœ¨æ£€æŸ¥ä¾èµ–ï¼ŒBeanç¼ºå¤±é¿é‡å¤  
- å±æ€§æ¡ä»¶åšå¼€å…³ï¼ŒWebç¯å¢ƒåˆ†åœºæ™¯
- è¡¨è¾¾å¼å¤„ç†å¤æ‚é€»è¾‘ï¼Œç»„åˆæ¡ä»¶æ˜¯ANDå…³ç³»
- ç”¨æˆ·é…ç½®ä¼˜å…ˆçº§æ›´é«˜ï¼Œæµ‹è¯•å‹å¥½æ˜“è°ƒè¯•

**æ ¸å¿ƒç†å¿µ**ï¼šæ¡ä»¶è£…é…æ˜¯Spring Boot"çº¦å®šä¼˜äºé…ç½®"ç†å¿µçš„æ ¸å¿ƒå®ç°ï¼Œé€šè¿‡æ™ºèƒ½çš„æ¡ä»¶åˆ¤æ–­ï¼Œè®©åº”ç”¨é…ç½®æ—¢ç®€å•åˆçµæ´»ï¼Œæ—¢å¼ºå¤§åˆæ˜“ç”¨ï¼