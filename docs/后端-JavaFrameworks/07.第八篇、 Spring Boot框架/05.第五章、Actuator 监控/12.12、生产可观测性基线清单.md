---
title: 12ã€ç”Ÿäº§å¯è§‚æµ‹æ€§åŸºçº¿æ¸…å•
---
## ğŸ“š ç›®å½•

1. [ç”Ÿäº§å¯è§‚æµ‹æ€§æ¦‚è¿°](#1-ç”Ÿäº§å¯è§‚æµ‹æ€§æ¦‚è¿°)
2. [å››ä¸ªé»„é‡‘æŒ‡æ ‡è¯¦è§£](#2-å››ä¸ªé»„é‡‘æŒ‡æ ‡è¯¦è§£)
3. [SLOä¸SLAæŒ‡æ ‡ä½“ç³»](#3-SLOä¸SLAæŒ‡æ ‡ä½“ç³»)
4. [å¥åº·æ£€æŸ¥æœ€å°é›†åˆ](#4-å¥åº·æ£€æŸ¥æœ€å°é›†åˆ)
5. [å…³é”®ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§](#5-å…³é”®ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§)
6. [å‘Šè­¦é˜ˆå€¼è®¾å®šç­–ç•¥](#6-å‘Šè­¦é˜ˆå€¼è®¾å®šç­–ç•¥)
7. [æ•…éšœæ¼”ç»ƒä¸å‹æµ‹è”åŠ¨](#7-æ•…éšœæ¼”ç»ƒä¸å‹æµ‹è”åŠ¨)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç”Ÿäº§å¯è§‚æµ‹æ€§æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ç”Ÿäº§å¯è§‚æµ‹æ€§


**é€šä¿—ç†è§£**ï¼šå°±åƒåŒ»ç”Ÿç»™ç—…äººåšä½“æ£€ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿è¡Œä¸­çš„ç³»ç»Ÿè¿›è¡Œ"ä½“æ£€"ï¼Œéšæ—¶äº†è§£ç³»ç»Ÿçš„å¥åº·çŠ¶æ€ã€‚

```
ä¼ ç»Ÿè¿ç»´æ–¹å¼ï¼š
ç³»ç»Ÿå‡ºé—®é¢˜äº† â†’ ç”¨æˆ·åé¦ˆ â†’ å¼€å§‹æ’æŸ¥ â†’ æ‰¾åˆ°é—®é¢˜ â†’ ä¿®å¤
è¿™å°±åƒç”Ÿç—…äº†æ‰å»çœ‹åŒ»ç”Ÿ

å¯è§‚æµ‹æ€§è¿ç»´ï¼š
ç³»ç»Ÿå®æ—¶ç›‘æ§ â†’ æå‰å‘ç°é—®é¢˜ â†’ ä¸»åŠ¨å¤„ç† â†’ ç”¨æˆ·æ— æ„ŸçŸ¥
è¿™å°±åƒå®šæœŸä½“æ£€ï¼Œé¢„é˜²ç–¾ç—…
```

### 1.2 å¯è§‚æµ‹æ€§çš„ä¸‰å¤§æ”¯æŸ±


**ğŸ” ç›‘æ§ä¸‰è¦ç´ **ï¼š
- **ğŸ“Š æŒ‡æ ‡ï¼ˆMetricsï¼‰**ï¼šæ•°å­—åŒ–çš„æ€§èƒ½æ•°æ®ï¼Œåƒä½“æ¸©ã€è¡€å‹
- **ğŸ“ æ—¥å¿—ï¼ˆLogsï¼‰**ï¼šç³»ç»Ÿè¿è¡Œçš„è¯¦ç»†è®°å½•ï¼Œåƒç—…å†æœ¬
- **ğŸ” é“¾è·¯è¿½è¸ªï¼ˆTracingï¼‰**ï¼šè¯·æ±‚åœ¨ç³»ç»Ÿä¸­çš„å®Œæ•´è·¯å¾„ï¼Œåƒè¡€æ¶²å¾ªç¯å›¾

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦å¯è§‚æµ‹æ€§åŸºçº¿


**åŸºçº¿çš„ä½œç”¨**ï¼š
```
å°±åƒä½“æ£€æ ‡å‡†ï¼š
æ­£å¸¸ä½“æ¸©ï¼š36-37â„ƒ
æ­£å¸¸è¡€å‹ï¼š90-140mmHg

ç³»ç»Ÿç›‘æ§åŸºçº¿ï¼š
æ­£å¸¸å“åº”æ—¶é—´ï¼š< 200ms
æ­£å¸¸é”™è¯¯ç‡ï¼š< 0.1%
æ­£å¸¸CPUä½¿ç”¨ç‡ï¼š< 70%
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**  
> åŸºçº¿å°±æ˜¯"æ­£å¸¸æ ‡å‡†"ï¼Œè¶…å‡ºåŸºçº¿å°±è¯´æ˜ç³»ç»Ÿå¯èƒ½æœ‰é—®é¢˜äº†

---

## 2. âš¡ å››ä¸ªé»„é‡‘æŒ‡æ ‡è¯¦è§£


### 2.1 é»„é‡‘æŒ‡æ ‡æ¦‚è¿°


**ä¸ºä»€ä¹ˆå«"é»„é‡‘æŒ‡æ ‡"**ï¼šè¿™å››ä¸ªæŒ‡æ ‡èƒ½å¤Ÿåæ˜ ç³»ç»Ÿæœ€æ ¸å¿ƒçš„å¥åº·çŠ¶å†µï¼Œå°±åƒäººä½“çš„å¿ƒç‡ã€è¡€å‹ã€ä½“æ¸©ã€è¡€ç³–ä¸€æ ·é‡è¦ã€‚

```
å››ä¸ªé»„é‡‘æŒ‡æ ‡ï¼š
ğŸ• å»¶è¿Ÿï¼ˆLatencyï¼‰     â†’ ç³»ç»Ÿå“åº”é€Ÿåº¦
âŒ é”™è¯¯ç‡ï¼ˆError Rateï¼‰ â†’ ç³»ç»Ÿå‡ºé”™é¢‘ç‡  
ğŸ“ˆ ååé‡ï¼ˆThroughputï¼‰â†’ ç³»ç»Ÿå¤„ç†èƒ½åŠ›
ğŸ“Š é¥±å’Œåº¦ï¼ˆSaturationï¼‰â†’ ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
```

### 2.2 å»¶è¿Ÿï¼ˆLatencyï¼‰è¯¦è§£


**ä»€ä¹ˆæ˜¯å»¶è¿Ÿ**ï¼šç”¨æˆ·å‘èµ·è¯·æ±‚åˆ°æ”¶åˆ°å“åº”çš„æ—¶é—´ï¼Œå°±åƒä½ é—®é—®é¢˜åˆ°å¾—åˆ°å›ç­”çš„æ—¶é—´ã€‚

**Spring Boot ä¸­å¦‚ä½•ç›‘æ§å»¶è¿Ÿ**ï¼š
```java
// 1. ä½¿ç”¨ Actuator è‡ªåŠ¨ç›‘æ§
@RestController
public class UserController {
    
    @GetMapping("/users/{id}")
    @Timed(name = "user.get", description = "è·å–ç”¨æˆ·ä¿¡æ¯è€—æ—¶")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}
```

**å»¶è¿ŸæŒ‡æ ‡çš„å…³é”®æµ‹é‡ç‚¹**ï¼š

| æµ‹é‡ç‚¹ | **æ­£å¸¸èŒƒå›´** | **å‘Šè­¦é˜ˆå€¼** | **è¯´æ˜** |
|--------|-------------|-------------|----------|
| `APIå“åº”æ—¶é—´` | **< 200ms** | **> 1000ms** | `ç”¨æˆ·ç›´æ¥æ„ŸçŸ¥` |
| `æ•°æ®åº“æŸ¥è¯¢` | **< 100ms** | **> 500ms** | `åç«¯æ€§èƒ½ç“¶é¢ˆ` |
| `ç¼“å­˜è®¿é—®` | **< 10ms** | **> 50ms** | `ç¼“å­˜å‘½ä¸­ç‡` |

**å®é™…é…ç½®ç¤ºä¾‹**ï¼š
```yaml
# application.yml
management:
  metrics:
    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5, 0.95, 0.99
```

### 2.3 é”™è¯¯ç‡ï¼ˆError Rateï¼‰è¯¦è§£


**ä»€ä¹ˆæ˜¯é”™è¯¯ç‡**ï¼šç³»ç»Ÿå¤„ç†è¯·æ±‚æ—¶å‡ºé”™çš„æ¯”ä¾‹ï¼Œå°±åƒè€ƒè¯•çš„é”™é¢˜ç‡ã€‚

```
é”™è¯¯ç‡è®¡ç®—å…¬å¼ï¼š
é”™è¯¯ç‡ = (é”™è¯¯è¯·æ±‚æ•° / æ€»è¯·æ±‚æ•°) Ã— 100%

ç¤ºä¾‹ï¼š
1å°æ—¶å†…æ€»è¯·æ±‚ï¼š10000æ¬¡
å‡ºé”™è¯·æ±‚ï¼š5æ¬¡  
é”™è¯¯ç‡ = 5/10000 Ã— 100% = 0.05%
```

**Spring Boot é”™è¯¯ç›‘æ§é…ç½®**ï¼š
```java
// è‡ªå®šä¹‰é”™è¯¯ç»Ÿè®¡
@Component
public class ErrorMetrics {
    
    private final Counter errorCounter;
    
    public ErrorMetrics(MeterRegistry meterRegistry) {
        this.errorCounter = Counter.builder("application.errors")
            .description("åº”ç”¨é”™è¯¯è®¡æ•°")
            .register(meterRegistry);
    }
    
    public void recordError(String errorType) {
        errorCounter.increment(Tags.of("type", errorType));
    }
}
```

### 2.4 ååé‡ï¼ˆThroughputï¼‰è¯¦è§£


**ä»€ä¹ˆæ˜¯ååé‡**ï¼šç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…èƒ½å¤„ç†å¤šå°‘è¯·æ±‚ï¼Œå°±åƒæ”¶é“¶å‘˜ä¸€åˆ†é’Ÿèƒ½å¤„ç†å¤šå°‘é¡¾å®¢ã€‚

**ååé‡çš„æ ¸å¿ƒæŒ‡æ ‡**ï¼š
- **QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰**ï¼šç³»ç»Ÿæ¯ç§’èƒ½å¤„ç†å¤šå°‘ä¸ªè¯·æ±‚
- **TPSï¼ˆæ¯ç§’äº‹åŠ¡æ•°ï¼‰**ï¼šç³»ç»Ÿæ¯ç§’èƒ½å®Œæˆå¤šå°‘ä¸ªå®Œæ•´çš„ä¸šåŠ¡æ“ä½œ

```
ååé‡ç¤ºä¾‹ï¼š
ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼š
- æŸ¥è¯¢å•†å“ï¼š1000 QPS
- ä¸‹å•æ“ä½œï¼š100 TPS  
- æ”¯ä»˜æ“ä½œï¼š50 TPS
```

### 2.5 é¥±å’Œåº¦ï¼ˆSaturationï¼‰è¯¦è§£


**ä»€ä¹ˆæ˜¯é¥±å’Œåº¦**ï¼šç³»ç»Ÿèµ„æºçš„ä½¿ç”¨ç¨‹åº¦ï¼Œå°±åƒåœè½¦åœºçš„å ç”¨ç‡ã€‚

**å…³é”®èµ„æºç›‘æ§**ï¼š

| èµ„æºç±»å‹ | **ç›‘æ§æŒ‡æ ‡** | **æ­£å¸¸èŒƒå›´** | **å±é™©é˜ˆå€¼** |
|---------|-------------|-------------|-------------|
| `CPUä½¿ç”¨ç‡` | **cpu.usage** | **< 70%** | **> 85%** |
| `å†…å­˜ä½¿ç”¨ç‡` | **jvm.memory.used** | **< 80%** | **> 90%** |
| `ç£ç›˜ä½¿ç”¨ç‡` | **disk.usage** | **< 80%** | **> 90%** |
| `æ•°æ®åº“è¿æ¥` | **datasource.active** | **< 80%** | **> 95%** |

---

## 3. ğŸ“‹ SLOä¸SLAæŒ‡æ ‡ä½“ç³»


### 3.1 SLOå’ŒSLAçš„åŒºåˆ«


**é€šä¿—ç†è§£**ï¼š
- **SLOï¼ˆæœåŠ¡ç­‰çº§ç›®æ ‡ï¼‰**ï¼šæˆ‘ä»¬å†…éƒ¨å®šçš„ç›®æ ‡ï¼Œåƒ"æˆ‘è¦è€ƒ90åˆ†"
- **SLAï¼ˆæœåŠ¡ç­‰çº§åè®®ï¼‰**ï¼šå¯¹å®¢æˆ·æ‰¿è¯ºçš„æ ‡å‡†ï¼Œåƒ"ä¿è¯80åˆ†ä»¥ä¸Š"

```
ä¸¾ä¸ªä¾‹å­ï¼š
ç”µå•†ç½‘ç«™çš„æ‰¿è¯ºï¼š
SLAï¼š99.9%å¯ç”¨æ€§ï¼ˆå¯¹å®¢æˆ·æ‰¿è¯ºï¼‰
SLOï¼š99.95%å¯ç”¨æ€§ï¼ˆå†…éƒ¨ç›®æ ‡ï¼Œç•™æœ‰ç¼“å†²ï¼‰

ä¸ºä»€ä¹ˆè¦æœ‰ç¼“å†²ï¼Ÿ
ä¸‡ä¸€ç³»ç»Ÿå¶å°”æ³¢åŠ¨ï¼Œä¸ä¼šç«‹å³è¿åå¯¹å®¢æˆ·çš„æ‰¿è¯º
```

### 3.2 å¸¸è§çš„SLOæŒ‡æ ‡å®šä¹‰


**å¯ç”¨æ€§SLO**ï¼š
```yaml
# å¯ç”¨æ€§ç›®æ ‡å®šä¹‰
availability:
  target: 99.9%  # ç›®æ ‡å¯ç”¨æ€§
  measurement_window: 30d  # 30å¤©æ»šåŠ¨çª—å£
  downtime_budget: 43.2m   # æ¯æœˆå…è®¸å®•æœºæ—¶é—´
```

**æ€§èƒ½SLO**ï¼š
```yaml
# æ€§èƒ½ç›®æ ‡å®šä¹‰  
performance:
  api_latency:
    p95: 200ms    # 95%çš„è¯·æ±‚åœ¨200mså†…å®Œæˆ
    p99: 500ms    # 99%çš„è¯·æ±‚åœ¨500mså†…å®Œæˆ
  error_rate: 0.1%  # é”™è¯¯ç‡ä½äº0.1%
```

### 3.3 SLOç›‘æ§å®ç°


```java
@Component
public class SloMonitor {
    
    private final Timer latencyTimer;
    private final Counter errorCounter;
    private final Counter totalCounter;
    
    public SloMonitor(MeterRegistry registry) {
        this.latencyTimer = Timer.builder("slo.latency")
            .description("SLOå»¶è¿Ÿç›‘æ§")
            .register(registry);
            
        this.errorCounter = Counter.builder("slo.errors")
            .register(registry);
            
        this.totalCounter = Counter.builder("slo.requests")
            .register(registry);
    }
    
    public void recordRequest(Duration duration, boolean isError) {
        latencyTimer.record(duration);
        totalCounter.increment();
        if (isError) {
            errorCounter.increment();
        }
    }
}
```

---

## 4. ğŸ¥ å¥åº·æ£€æŸ¥æœ€å°é›†åˆ


### 4.1 å¥åº·æ£€æŸ¥çš„ä½œç”¨


**é€šä¿—ç†è§£**ï¼šå°±åƒæ¯å¤©é‡ä½“æ¸©ä¸€æ ·ï¼Œå¥åº·æ£€æŸ¥å¸®æˆ‘ä»¬å¿«é€Ÿåˆ¤æ–­ç³»ç»Ÿæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

```
å¥åº·æ£€æŸ¥çš„ä¸‰ç§çŠ¶æ€ï¼š
âœ… UPï¼šç³»ç»Ÿå¥åº·ï¼Œä¸€åˆ‡æ­£å¸¸
âš ï¸ DOWNï¼šç³»ç»Ÿå¼‚å¸¸ï¼Œéœ€è¦å¤„ç†  
ğŸ”„ OUT_OF_SERVICEï¼šç³»ç»Ÿç»´æŠ¤ä¸­
```

### 4.2 Spring Boot åŸºç¡€å¥åº·æ£€æŸ¥


**é»˜è®¤å¥åº·æ£€æŸ¥ç«¯ç‚¹**ï¼š
```bash
# æŸ¥çœ‹æ•´ä½“å¥åº·çŠ¶æ€
GET /actuator/health

# æŸ¥çœ‹è¯¦ç»†å¥åº·ä¿¡æ¯ï¼ˆéœ€è¦é…ç½®ï¼‰
GET /actuator/health/details
```

**åŸºç¡€é…ç½®**ï¼š
```yaml
# application.yml
management:
  endpoint:
    health:
      show-details: when-authorized  # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
      show-components: always        # æ˜¾ç¤ºç»„ä»¶çŠ¶æ€
  health:
    defaults:
      enabled: true
```

### 4.3 æ ¸å¿ƒå¥åº·æ£€æŸ¥æ¸…å•


**ğŸ’¾ æ•°æ®åº“å¥åº·æ£€æŸ¥**ï¼š
```java
@Component
public class DatabaseHealthIndicator implements HealthIndicator {
    
    @Autowired
    private DataSource dataSource;
    
    @Override
    public Health health() {
        try {
            // ç®€å•çš„æ•°æ®åº“è¿æ¥æµ‹è¯•
            Connection connection = dataSource.getConnection();
            Statement statement = connection.createStatement();
            ResultSet rs = statement.executeQuery("SELECT 1");
            
            if (rs.next()) {
                return Health.up()
                    .withDetail("database", "è¿æ¥æ­£å¸¸")
                    .withDetail("query_time", System.currentTimeMillis())
                    .build();
            }
        } catch (Exception e) {
            return Health.down()
                .withDetail("database", "è¿æ¥å¤±è´¥")
                .withException(e)
                .build();
        }
        return Health.down().withDetail("database", "æœªçŸ¥é”™è¯¯").build();
    }
}
```

**ğŸ—„ï¸ Rediså¥åº·æ£€æŸ¥**ï¼š
```java
@Component
public class RedisHealthIndicator implements HealthIndicator {
    
    @Autowired
    private RedisTemplate<String, String> redisTemplate;
    
    @Override
    public Health health() {
        try {
            String ping = redisTemplate.getConnectionFactory()
                .getConnection()
                .ping();
            
            if ("PONG".equals(ping)) {
                return Health.up()
                    .withDetail("redis", "è¿æ¥æ­£å¸¸")
                    .build();
            }
        } catch (Exception e) {
            return Health.down()
                .withDetail("redis", "è¿æ¥å¤±è´¥")
                .withException(e)
                .build();
        }
        return Health.down().build();
    }
}
```

### 4.4 è‡ªå®šä¹‰ä¸šåŠ¡å¥åº·æ£€æŸ¥


```java
// æ£€æŸ¥ç¬¬ä¸‰æ–¹æœåŠ¡
@Component
public class ExternalServiceHealthIndicator implements HealthIndicator {
    
    @Autowired
    private RestTemplate restTemplate;
    
    @Value("${external.service.url}")
    private String externalServiceUrl;
    
    @Override
    public Health health() {
        try {
            // è°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡çš„å¥åº·æ£€æŸ¥æ¥å£
            ResponseEntity<String> response = restTemplate.getForEntity(
                externalServiceUrl + "/health", 
                String.class
            );
            
            if (response.getStatusCode().is2xxSuccessful()) {
                return Health.up()
                    .withDetail("external_service", "æœåŠ¡æ­£å¸¸")
                    .withDetail("response_time", calculateResponseTime())
                    .build();
            }
        } catch (Exception e) {
            return Health.down()
                .withDetail("external_service", "æœåŠ¡å¼‚å¸¸")
                .withException(e)
                .build();
        }
        return Health.down().build();
    }
}
```

---

## 5. ğŸ“Š å…³é”®ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§


### 5.1 ä¸šåŠ¡æŒ‡æ ‡çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆè¦ç›‘æ§ä¸šåŠ¡æŒ‡æ ‡**ï¼šæŠ€æœ¯æŒ‡æ ‡åªèƒ½å‘Šè¯‰æˆ‘ä»¬ç³»ç»Ÿè¿è¡ŒçŠ¶å†µï¼Œä½†ä¸šåŠ¡æŒ‡æ ‡èƒ½å‘Šè¯‰æˆ‘ä»¬å¯¹ç”¨æˆ·å’Œå…¬å¸çš„å®é™…ä»·å€¼ã€‚

```
æŠ€æœ¯æŒ‡æ ‡ vs ä¸šåŠ¡æŒ‡æ ‡ï¼š

æŠ€æœ¯æŒ‡æ ‡ï¼š
- CPUä½¿ç”¨ç‡ 70%
- å“åº”æ—¶é—´ 200ms
- å†…å­˜ä½¿ç”¨ 2GB

ä¸šåŠ¡æŒ‡æ ‡ï¼š
- ç”¨æˆ·æ³¨å†Œæ•° +100/å°æ—¶  
- è®¢å•æˆäº¤é¢ Â¥50000/å°æ—¶
- æ´»è·ƒç”¨æˆ·æ•° 10000äººåœ¨çº¿
```

### 5.2 ç”µå•†ä¸šåŠ¡æŒ‡æ ‡ç¤ºä¾‹


**ç”¨æˆ·è¡Œä¸ºç›‘æ§**ï¼š
```java
@Service
public class UserMetricsService {
    
    private final Counter userRegistrations;
    private final Counter userLogins;
    private final Timer sessionDuration;
    
    public UserMetricsService(MeterRegistry registry) {
        this.userRegistrations = Counter.builder("business.user.registrations")
            .description("ç”¨æˆ·æ³¨å†Œæ•°")
            .register(registry);
            
        this.userLogins = Counter.builder("business.user.logins")
            .description("ç”¨æˆ·ç™»å½•æ•°")
            .register(registry);
            
        this.sessionDuration = Timer.builder("business.user.session.duration")
            .description("ç”¨æˆ·ä¼šè¯æ—¶é•¿")
            .register(registry);
    }
    
    public void recordRegistration() {
        userRegistrations.increment();
    }
    
    public void recordLogin() {
        userLogins.increment();
    }
    
    public void recordSessionEnd(Duration duration) {
        sessionDuration.record(duration);
    }
}
```

**è®¢å•ä¸šåŠ¡ç›‘æ§**ï¼š
```java
@Service  
public class OrderMetricsService {
    
    private final Counter orderCount;
    private final DistributionSummary orderAmount;
    private final Counter cancelledOrders;
    
    public OrderMetricsService(MeterRegistry registry) {
        this.orderCount = Counter.builder("business.orders.created")
            .description("è®¢å•åˆ›å»ºæ•°")
            .register(registry);
            
        this.orderAmount = DistributionSummary.builder("business.orders.amount")
            .description("è®¢å•é‡‘é¢åˆ†å¸ƒ")
            .baseUnit("yuan")
            .register(registry);
            
        this.cancelledOrders = Counter.builder("business.orders.cancelled")
            .description("è®¢å•å–æ¶ˆæ•°")
            .register(registry);
    }
    
    public void recordOrderCreated(BigDecimal amount) {
        orderCount.increment();
        orderAmount.record(amount.doubleValue());
    }
    
    public void recordOrderCancelled() {
        cancelledOrders.increment();
    }
}
```

### 5.3 ä¸šåŠ¡ç›‘æ§ä»ªè¡¨ç›˜é…ç½®


**å…³é”®ä¸šåŠ¡æŒ‡æ ‡æ±‡æ€»**ï¼š

| ä¸šåŠ¡é¢†åŸŸ | **æ ¸å¿ƒæŒ‡æ ‡** | **ç›‘æ§é¢‘ç‡** | **å‘Šè­¦æ¡ä»¶** |
|---------|-------------|-------------|-------------|
| `ç”¨æˆ·æ´»è·ƒ` | **åœ¨çº¿ç”¨æˆ·æ•°ã€æ³¨å†Œè½¬åŒ–ç‡** | **å®æ—¶** | `è¿ç»­ä¸‹é™30%` |
| `è®¢å•äº¤æ˜“` | **è®¢å•é‡ã€GMVã€å–æ¶ˆç‡** | **æ¯åˆ†é’Ÿ** | `è®¢å•é‡ä¸‹é™50%` |
| `æ”¯ä»˜æµç¨‹` | **æ”¯ä»˜æˆåŠŸç‡ã€æ”¯ä»˜è€—æ—¶** | **å®æ—¶** | `æˆåŠŸç‡ < 95%` |
| `åº“å­˜ç®¡ç†` | **åº“å­˜é¢„è­¦ã€ç¼ºè´§ç‡** | **æ¯å°æ—¶** | `çƒ­é”€å•†å“ç¼ºè´§` |

---

## 6. âš ï¸ å‘Šè­¦é˜ˆå€¼è®¾å®šç­–ç•¥


### 6.1 å‘Šè­¦é˜ˆå€¼è®¾å®šåŸåˆ™


**é€šä¿—ç†è§£**ï¼šå‘Šè­¦é˜ˆå€¼å°±åƒä½“æ¸©è®¡ä¸Šçš„åˆ»åº¦ï¼Œ37.3Â°Cæ˜¯å‘çƒ§è­¦å‘Šï¼Œ39Â°Cæ˜¯é«˜çƒ§å±é™©ã€‚

```
å‘Šè­¦çº§åˆ«è®¾è®¡ï¼š
ğŸŸ¢ æ­£å¸¸ï¼šä¸€åˆ‡è¿è¡Œè‰¯å¥½
ğŸŸ¡ è­¦å‘Šï¼šéœ€è¦å…³æ³¨ï¼Œä½†ä¸ç´§æ€¥  
ğŸ”´ ä¸¥é‡ï¼šéœ€è¦ç«‹å³å¤„ç†
ğŸš¨ ç´§æ€¥ï¼šç³»ç»Ÿå¯èƒ½å´©æºƒï¼Œç«‹å³å“åº”
```

### 6.2 åŸºäºç»Ÿè®¡å­¦çš„é˜ˆå€¼è®¾å®š


**åŠ¨æ€é˜ˆå€¼è®¡ç®—**ï¼š
```java
@Component
public class DynamicThresholdCalculator {
    
    // åŸºäºå†å²æ•°æ®è®¡ç®—åŠ¨æ€é˜ˆå€¼
    public ThresholdConfig calculateThreshold(List<Double> historicalData) {
        DoubleSummaryStatistics stats = historicalData.stream()
            .mapToDouble(Double::doubleValue)
            .summaryStatistics();
            
        double mean = stats.getAverage();
        double stdDev = calculateStdDev(historicalData, mean);
        
        return ThresholdConfig.builder()
            .warningThreshold(mean + stdDev)      // å¹³å‡å€¼ + 1ä¸ªæ ‡å‡†å·®
            .criticalThreshold(mean + 2 * stdDev) // å¹³å‡å€¼ + 2ä¸ªæ ‡å‡†å·®
            .emergencyThreshold(mean + 3 * stdDev)// å¹³å‡å€¼ + 3ä¸ªæ ‡å‡†å·®
            .build();
    }
}
```

### 6.3 å‘Šè­¦è§„åˆ™é…ç½®ç¤ºä¾‹


**Prometheus å‘Šè­¦è§„åˆ™**ï¼š
```yaml
# alerting_rules.yml
groups:
- name: application_alerts
  rules:
  # å“åº”æ—¶é—´å‘Šè­¦
  - alert: HighResponseTime
    expr: http_request_duration_seconds{quantile="0.95"} > 0.5
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "åº”ç”¨å“åº”æ—¶é—´è¿‡é«˜"
      description: "95%å“åº”æ—¶é—´è¶…è¿‡500msï¼ŒæŒç»­5åˆ†é’Ÿ"
      
  # é”™è¯¯ç‡å‘Šè­¦  
  - alert: HighErrorRate
    expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.01
    for: 2m
    labels:
      severity: critical
    annotations:
      summary: "é”™è¯¯ç‡è¿‡é«˜"
      description: "5xxé”™è¯¯ç‡è¶…è¿‡1%ï¼ŒæŒç»­2åˆ†é’Ÿ"

  # ä¸šåŠ¡æŒ‡æ ‡å‘Šè­¦
  - alert: OrderDropAlert
    expr: rate(business_orders_created_total[10m]) < 0.1
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "è®¢å•é‡æ€¥å‰§ä¸‹é™"
      description: "è®¢å•åˆ›å»ºé€Ÿç‡ä½äºæ­£å¸¸å€¼ï¼Œå¯èƒ½å½±å“ä¸šåŠ¡"
```

### 6.4 å‘Šè­¦ç–²åŠ³é¢„é˜²ç­–ç•¥


**æ™ºèƒ½å‘Šè­¦æœºåˆ¶**ï¼š
```java
@Component
public class SmartAlertManager {
    
    private final Map<String, AlertState> alertStates = new ConcurrentHashMap<>();
    
    public void processAlert(String alertName, double currentValue, double threshold) {
        AlertState state = alertStates.computeIfAbsent(alertName, k -> new AlertState());
        
        if (currentValue > threshold) {
            if (state.shouldTriggerAlert()) {
                sendAlert(alertName, currentValue, threshold);
                state.recordAlert();
            }
        } else {
            state.reset();
        }
    }
    
    private void sendAlert(String alertName, double currentValue, double threshold) {
        // å‘é€å‘Šè­¦é€»è¾‘
        System.out.printf("ğŸš¨ å‘Šè­¦: %s å½“å‰å€¼: %.2f é˜ˆå€¼: %.2f%n", 
            alertName, currentValue, threshold);
    }
}
```

---

## 7. ğŸª æ•…éšœæ¼”ç»ƒä¸å‹æµ‹è”åŠ¨


### 7.1 æ•…éšœæ¼”ç»ƒçš„æ„ä¹‰


**é€šä¿—ç†è§£**ï¼šæ•…éšœæ¼”ç»ƒå°±åƒæ¶ˆé˜²æ¼”ä¹ ï¼Œå¹³æ—¶ç»ƒä¹ é‡åˆ°ç«ç¾æ€ä¹ˆé€ƒç”Ÿï¼Œè¿™æ ·çœŸæ­£é‡åˆ°é—®é¢˜æ—¶ä¸ä¼šæ…Œä¹±ã€‚

```
æ•…éšœæ¼”ç»ƒçš„ä»·å€¼ï¼š
1. éªŒè¯ç›‘æ§ç³»ç»Ÿæ˜¯å¦æœ‰æ•ˆ
2. æµ‹è¯•å‘Šè­¦æœºåˆ¶æ˜¯å¦åŠæ—¶
3. è®­ç»ƒå›¢é˜Ÿåº”æ€¥å“åº”èƒ½åŠ›
4. å‘ç°ç³»ç»Ÿè–„å¼±ç¯èŠ‚
```

### 7.2 å¸¸è§æ•…éšœæ¼”ç»ƒåœºæ™¯


**ğŸ’¥ æœåŠ¡æ•…éšœæ¨¡æ‹Ÿ**ï¼š
```java
// æ¨¡æ‹ŸæœåŠ¡é™çº§
@RestController
public class ChaosController {
    
    @Value("${chaos.failure.enabled:false}")
    private boolean chaosEnabled;
    
    @GetMapping("/api/users/{id}")
    public ResponseEntity<?> getUser(@PathVariable Long id) {
        
        // æ•…éšœæ³¨å…¥ï¼šæ¨¡æ‹ŸæœåŠ¡å¼‚å¸¸
        if (chaosEnabled && Math.random() < 0.1) { // 10%æ¦‚ç‡æ•…éšœ
            throw new ServiceException("æ¨¡æ‹ŸæœåŠ¡æ•…éšœ");
        }
        
        // æ•…éšœæ³¨å…¥ï¼šæ¨¡æ‹Ÿå»¶è¿Ÿ  
        if (chaosEnabled && Math.random() < 0.05) { // 5%æ¦‚ç‡å»¶è¿Ÿ
            try {
                Thread.sleep(2000); // æ¨¡æ‹Ÿ2ç§’å»¶è¿Ÿ
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
        
        return ResponseEntity.ok(userService.findById(id));
    }
}
```

### 7.3 å‹æµ‹ä¸ç›‘æ§è”åŠ¨


**å‹æµ‹é…ç½®ç¤ºä¾‹**ï¼š
```java
@Component
public class LoadTestMetrics {
    
    private final Timer requestTimer;
    private final Counter errorCounter;
    private final Gauge activeConnections;
    
    public LoadTestMetrics(MeterRegistry registry) {
        this.requestTimer = Timer.builder("loadtest.requests")
            .description("å‹æµ‹è¯·æ±‚è€—æ—¶")
            .register(registry);
            
        this.errorCounter = Counter.builder("loadtest.errors")
            .description("å‹æµ‹é”™è¯¯è®¡æ•°")
            .register(registry);
            
        this.activeConnections = Gauge.builder("loadtest.connections.active")
            .description("æ´»è·ƒè¿æ¥æ•°")
            .register(registry, this, LoadTestMetrics::getActiveConnections);
    }
    
    private double getActiveConnections() {
        // è·å–æ´»è·ƒè¿æ¥æ•°çš„é€»è¾‘
        return getCurrentActiveConnections();
    }
}
```

### 7.4 æ•…éšœæ¢å¤éªŒè¯


**è‡ªåŠ¨åŒ–æ¢å¤éªŒè¯**ï¼š
```java
@Component
public class RecoveryValidator {
    
    private final HealthIndicator healthIndicator;
    private final AlertManager alertManager;
    
    public boolean validateRecovery() {
        // 1. æ£€æŸ¥å¥åº·çŠ¶æ€
        Health health = healthIndicator.health();
        if (health.getStatus() != Status.UP) {
            return false;
        }
        
        // 2. éªŒè¯å…³é”®ä¸šåŠ¡åŠŸèƒ½
        boolean businessOk = validateBusinessFunctions();
        
        // 3. æ£€æŸ¥å‘Šè­¦æ˜¯å¦æ¸…é™¤
        boolean alertsCleared = !alertManager.hasActiveAlerts();
        
        return businessOk && alertsCleared;
    }
    
    private boolean validateBusinessFunctions() {
        try {
            // æ‰§è¡Œå…³é”®ä¸šåŠ¡æ“ä½œéªŒè¯
            return true;
        } catch (Exception e) {
            return false;
        }
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å››ä¸ªé»„é‡‘æŒ‡æ ‡ï¼šå»¶è¿Ÿã€é”™è¯¯ç‡ã€ååé‡ã€é¥±å’Œåº¦ - ç³»ç»Ÿå¥åº·çš„æ ¸å¿ƒä½“ç°
ğŸ”¸ SLOä¸SLAï¼šå†…éƒ¨ç›®æ ‡vså®¢æˆ·æ‰¿è¯º - æœåŠ¡è´¨é‡çš„é‡åŒ–æ ‡å‡†  
ğŸ”¸ å¥åº·æ£€æŸ¥ï¼šç³»ç»ŸçŠ¶æ€çš„å¿«é€Ÿè¯Šæ–­ - æ•…éšœçš„æ—©æœŸå‘ç°æœºåˆ¶
ğŸ”¸ ä¸šåŠ¡æŒ‡æ ‡ï¼šæŠ€æœ¯æŒ‡æ ‡ä¹‹å¤–çš„ä»·å€¼ä½“ç° - çœŸæ­£å½±å“ç”¨æˆ·ä½“éªŒçš„æ•°æ®
ğŸ”¸ å‘Šè­¦ç­–ç•¥ï¼šåˆç†çš„é˜ˆå€¼è®¾å®š - é¿å…å‘Šè­¦ç–²åŠ³çš„æ™ºèƒ½æœºåˆ¶
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç›‘æ§ä¸æ˜¯ç›®çš„ï¼Œè€Œæ˜¯æ‰‹æ®µ**
```
ç›‘æ§çš„çœŸæ­£ç›®çš„ï¼š
- æå‰å‘ç°é—®é¢˜ï¼Œè€Œä¸æ˜¯ç­‰é—®é¢˜å‘ç”Ÿ
- å¿«é€Ÿå®šä½é—®é¢˜ï¼Œç¼©çŸ­æ•…éšœæ¢å¤æ—¶é—´  
- æŒç»­ä¼˜åŒ–æ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- ç§¯ç´¯è¿ç»´ç»éªŒï¼Œå»ºç«‹æœ€ä½³å®è·µ
```

**ğŸ”¹ æ•°æ®é©±åŠ¨çš„è¿ç»´å†³ç­–**
```
åŸºäºæ•°æ®åšå†³ç­–ï¼š
- ä¸å‡­æ„Ÿè§‰ï¼Œçœ‹å®é™…æ•°æ®
- ä¸åªçœ‹å¹³å‡å€¼ï¼Œå…³æ³¨å¼‚å¸¸å€¼
- ä¸åªçœ‹æŠ€æœ¯æŒ‡æ ‡ï¼Œå…³æ³¨ä¸šåŠ¡å½±å“
- ä¸åªçœ‹å½“å‰çŠ¶æ€ï¼Œåˆ†æè¶‹åŠ¿å˜åŒ–
```

**ğŸ”¹ å¹³è¡¡ç›‘æ§æˆæœ¬ä¸æ•ˆæœ**
```
ç›‘æ§æˆæœ¬è€ƒè™‘ï¼š
- å­˜å‚¨æˆæœ¬ï¼šæŒ‡æ ‡æ•°æ®çš„å­˜å‚¨
- è®¡ç®—æˆæœ¬ï¼šæŒ‡æ ‡çš„è®¡ç®—å’Œå¤„ç†
- äººåŠ›æˆæœ¬ï¼šå‘Šè­¦å“åº”å’Œé—®é¢˜å¤„ç†
- ä¸šåŠ¡æˆæœ¬ï¼šç›‘æ§å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•**ï¼š
- [x] **åŸºç¡€ç›‘æ§**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ
- [x] **åº”ç”¨ç›‘æ§**ï¼šJVMçŠ¶æ€ã€è¿æ¥æ± ã€ç¼“å­˜å‘½ä¸­ç‡
- [x] **ä¸šåŠ¡ç›‘æ§**ï¼šå…³é”®ä¸šåŠ¡æŒ‡æ ‡ã€ç”¨æˆ·è¡Œä¸ºæ•°æ®
- [x] **å‘Šè­¦é…ç½®**ï¼šåˆç†é˜ˆå€¼ã€åˆ†çº§å‘Šè­¦ã€å‘Šè­¦æ”¶æ•›
- [x] **æ•…éšœé¢„æ¡ˆ**ï¼šæ•…éšœæ¼”ç»ƒã€æ¢å¤æµç¨‹ã€å‡çº§æœºåˆ¶

**ç›‘æ§æˆç†Ÿåº¦è¯„ä¼°**ï¼š

| æˆç†Ÿåº¦ç­‰çº§ | **ç‰¹å¾æè¿°** | **ç›‘æ§èŒƒå›´** | **å“åº”èƒ½åŠ›** |
|-----------|-------------|-------------|-------------|
| `ğŸ¥‰ åŸºç¡€çº§` | **è¢«åŠ¨å“åº”ï¼Œç”¨æˆ·åé¦ˆ** | `åŸºç¡€èµ„æºç›‘æ§` | `å°æ—¶çº§å“åº”` |
| `ğŸ¥ˆ è¿›é˜¶çº§` | **ä¸»åŠ¨å‘ç°ï¼Œå‘Šè­¦é©±åŠ¨** | `åº”ç”¨+ä¸šåŠ¡ç›‘æ§` | `åˆ†é’Ÿçº§å“åº”` |
| `ğŸ¥‡ ä¸“å®¶çº§` | **é¢„æµ‹æ€§è¿ç»´ï¼Œè‡ªåŠ¨åŒ–** | `å…¨æ ˆå¯è§‚æµ‹æ€§` | `ç§’çº§è‡ªæ„ˆ` |

**æ ¸å¿ƒè®°å¿†**ï¼š
- ç›‘æ§è¦æœ‰ç›®æ ‡ï¼šç›‘æ§ä»€ä¹ˆã€ä¸ºä»€ä¹ˆç›‘æ§ã€æ€æ ·å“åº”
- æŒ‡æ ‡è¦æœ‰æ„ä¹‰ï¼šä¸åªçœ‹æŠ€æœ¯æ•°æ®ï¼Œæ›´è¦å…³æ³¨ä¸šåŠ¡ä»·å€¼  
- å‘Šè­¦è¦æœ‰æ™ºèƒ½ï¼šé¿å…å‘Šè­¦ç–²åŠ³ï¼Œä¸“æ³¨çœŸæ­£çš„é—®é¢˜
- æ¼”ç»ƒè¦æœ‰å¸¸æ€ï¼šå¹³æ—¶å¤šç»ƒä¹ ï¼Œå…³é”®æ—¶åˆ»ä¸æ…Œä¹±