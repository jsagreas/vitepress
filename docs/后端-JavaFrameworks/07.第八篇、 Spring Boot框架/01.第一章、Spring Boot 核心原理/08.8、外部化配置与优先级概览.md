---
title: 8ã€å¤–éƒ¨åŒ–é…ç½®ä¸ä¼˜å…ˆçº§æ¦‚è§ˆ
---
## ğŸ“š ç›®å½•

1. [å¤–éƒ¨åŒ–é…ç½®æ ¸å¿ƒæ¦‚å¿µ](#1-å¤–éƒ¨åŒ–é…ç½®æ ¸å¿ƒæ¦‚å¿µ)
2. [Environmentç¯å¢ƒæŠ½è±¡](#2-Environmentç¯å¢ƒæŠ½è±¡)
3. [PropertySourcesé…ç½®æºè¯¦è§£](#3-PropertySourcesé…ç½®æºè¯¦è§£)
4. [é…ç½®ä¼˜å…ˆçº§è§„åˆ™](#4-é…ç½®ä¼˜å…ˆçº§è§„åˆ™)
5. [å‘½ä»¤è¡Œå‚æ•°å¤„ç†](#5-å‘½ä»¤è¡Œå‚æ•°å¤„ç†)
6. [ç¯å¢ƒå˜é‡é…ç½®](#6-ç¯å¢ƒå˜é‡é…ç½®)
7. [YAMLé…ç½®æ–‡ä»¶](#7-YAMLé…ç½®æ–‡ä»¶)
8. [å ä½ç¬¦è§£ææœºåˆ¶](#8-å ä½ç¬¦è§£ææœºåˆ¶)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŸ å¤–éƒ¨åŒ–é…ç½®æ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¤–éƒ¨åŒ–é…ç½®


**é€šä¿—ç†è§£**ï¼š
æƒ³è±¡ä½ å¼€äº†ä¸€å®¶å’–å•¡åº—ï¼Œåº—é‡Œæœ‰å„ç§è®¾å¤‡éœ€è¦è°ƒèŠ‚æ¸©åº¦ã€æ—¶é—´ç­‰å‚æ•°ã€‚å¦‚æœæ¯æ¬¡è°ƒèŠ‚éƒ½è¦æ”¹ä»£ç é‡æ–°ç¼–è¯‘ï¼Œé‚£å°±å¤ªéº»çƒ¦äº†ã€‚å¤–éƒ¨åŒ–é…ç½®å°±åƒæ˜¯ç»™ä½ çš„å’–å•¡åº—å‡†å¤‡äº†ä¸€ä¸ª"è®¾ç½®é¢æ¿"ï¼Œä½ å¯ä»¥åœ¨ä¸é‡æ–°è£…ä¿®åº—é“ºçš„æƒ…å†µä¸‹ï¼Œéšæ—¶è°ƒæ•´å„ç§å‚æ•°ã€‚

**ä¸“ä¸šå®šä¹‰**ï¼š
å¤–éƒ¨åŒ–é…ç½®æ˜¯æŒ‡å°†åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€ç«¯å£å·ã€ä¸šåŠ¡å‚æ•°ç­‰ï¼‰ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæ”¾åœ¨å¤–éƒ¨æ–‡ä»¶æˆ–ç¯å¢ƒä¸­ï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹é€‚åº”ä¸åŒçš„è¿è¡Œç¯å¢ƒã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¤–éƒ¨åŒ–é…ç½®


**ğŸ¯ æ ¸å¿ƒä»·å€¼**ï¼š
```
ä»£ç ä¸é…ç½®åˆ†ç¦»çš„å¥½å¤„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨ç¨‹åºä»£ç    â”‚    â”‚   å¤–éƒ¨é…ç½®æ–‡ä»¶    â”‚
â”‚   (ä¸å˜çš„é€»è¾‘)   â”‚ â†â†’ â”‚  (å¯å˜çš„å‚æ•°)    â”‚
â”‚   jar/waråŒ…      â”‚    â”‚ application.yml  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿ï¼š
âœ… åŒä¸€ä¸ªjaråŒ…å¯ä»¥éƒ¨ç½²åˆ°ä¸åŒç¯å¢ƒ
âœ… é…ç½®ä¿®æ”¹æ— éœ€é‡æ–°ç¼–è¯‘æ‰“åŒ…
âœ… æ•æ„Ÿä¿¡æ¯å¯ä»¥å•ç‹¬ç®¡ç†
âœ… è¿ç»´äººå‘˜å¯ä»¥ç‹¬ç«‹è°ƒæ•´é…ç½®
```

**å®é™…åœºæ™¯ä¸¾ä¾‹**ï¼š
- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨æœ¬åœ°æ•°æ®åº“ `localhost:3306`
- **æµ‹è¯•ç¯å¢ƒ**ï¼šä½¿ç”¨æµ‹è¯•æ•°æ®åº“ `test-db:3306`
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ç”Ÿäº§æ•°æ®åº“ `prod-db:3306`

åŒä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œé€šè¿‡ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è¿æ¥ä¸åŒçš„æ•°æ®åº“ï¼Œè€Œä»£ç å®Œå…¨ä¸ç”¨æ”¹åŠ¨ã€‚

### 1.3 Spring Bootçš„é…ç½®ç†å¿µ


**ğŸ”¥ çº¦å®šä¼˜äºé…ç½®**ï¼š
Spring Bootéµå¾ª"çº¦å®šä¼˜äºé…ç½®"çš„ç†å¿µï¼Œä¸ºå¸¸è§åœºæ™¯æä¾›äº†é»˜è®¤é…ç½®ï¼ŒåŒæ—¶å…è®¸ä½ åœ¨éœ€è¦æ—¶è¦†ç›–è¿™äº›é»˜è®¤å€¼ã€‚

```
Spring Booté…ç½®å±‚æ¬¡ï¼š
é»˜è®¤é…ç½® â†’ è‡ªåŠ¨é…ç½® â†’ è‡ªå®šä¹‰é…ç½® â†’ ç¯å¢ƒç‰¹å®šé…ç½®

å°±åƒæ‰‹æœºè®¾ç½®ï¼š
ğŸ“± å‡ºå‚è®¾ç½®ï¼ˆé»˜è®¤é…ç½®ï¼‰
ğŸ”§ æ™ºèƒ½æ¨èè®¾ç½®ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰
âš™ï¸ ä¸ªäººåå¥½è®¾ç½®ï¼ˆè‡ªå®šä¹‰é…ç½®ï¼‰
ğŸ  åœºæ™¯æ¨¡å¼è®¾ç½®ï¼ˆç¯å¢ƒç‰¹å®šé…ç½®ï¼‰
```

---

## 2. ğŸŒ Environmentç¯å¢ƒæŠ½è±¡


### 2.1 Environmentæ˜¯ä»€ä¹ˆ


**å½¢è±¡æ¯”å–»**ï¼š
Environmentå°±åƒæ˜¯åº”ç”¨ç¨‹åºçš„"ç”Ÿå­˜ç¯å¢ƒæ„ŸçŸ¥å™¨"ï¼Œå®ƒèƒ½å¤Ÿæ„ŸçŸ¥å½“å‰ç¨‹åºè¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒä¸‹ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ï¼Œå¹¶ä¸”çŸ¥é“ä»å“ªé‡Œè·å–å„ç§é…ç½®ä¿¡æ¯ã€‚

**æŠ€æœ¯å®šä¹‰**ï¼š
Environmentæ˜¯Springæ¡†æ¶æä¾›çš„ä¸€ä¸ªæ ¸å¿ƒæŠ½è±¡æ¥å£ï¼Œå®ƒå°è£…äº†åº”ç”¨ç¨‹åºè¿è¡Œç¯å¢ƒçš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š**Profilesï¼ˆç¯å¢ƒé…ç½®æ–‡ä»¶ï¼‰** å’Œ **Propertiesï¼ˆå±æ€§é…ç½®ï¼‰**ã€‚

### 2.2 Environmentçš„æ ¸å¿ƒåŠŸèƒ½


**ğŸ”§ ä¸»è¦èŒè´£**ï¼š

```
Environmentç¯å¢ƒæŠ½è±¡çš„åŠŸèƒ½ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Environment     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ç®¡ç†æ´»è·ƒçš„Profile â”‚ â† åˆ¤æ–­å½“å‰æ˜¯ä»€ä¹ˆç¯å¢ƒ
â”‚ 2. è§£æé…ç½®å±æ€§      â”‚ â† ä»å„ç§æºè·å–é…ç½®
â”‚ 3. å¤„ç†å ä½ç¬¦       â”‚ â† ${...} è¯­æ³•è§£æ
â”‚ 4. ç±»å‹è½¬æ¢         â”‚ â† å­—ç¬¦ä¸²è½¬ä¸ºå…¶ä»–ç±»å‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®é™…ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
@Component
public class ConfigExample {
    
    @Autowired
    private Environment environment;
    
    public void showEnvironmentInfo() {
        // 1. æ£€æŸ¥æ´»è·ƒçš„ç¯å¢ƒ
        String[] activeProfiles = environment.getActiveProfiles();
        System.out.println("å½“å‰æ´»è·ƒç¯å¢ƒ: " + Arrays.toString(activeProfiles));
        
        // 2. è·å–é…ç½®å±æ€§
        String serverPort = environment.getProperty("server.port");
        System.out.println("æœåŠ¡å™¨ç«¯å£: " + serverPort);
        
        // 3. å¸¦é»˜è®¤å€¼çš„å±æ€§è·å–
        String appName = environment.getProperty("app.name", "é»˜è®¤åº”ç”¨å");
        System.out.println("åº”ç”¨åç§°: " + appName);
        
        // 4. ç±»å‹è½¬æ¢
        Integer port = environment.getProperty("server.port", Integer.class, 8080);
        System.out.println("ç«¯å£å·(æ•´æ•°): " + port);
    }
}
```

### 2.3 Environmentçš„å±‚æ¬¡ç»“æ„


**ğŸ“Š Environmentå®¶æ—**ï¼š

```
Environmentæ¥å£ä½“ç³»ï¼š
    ConfigurableEnvironment
           â†‘
      Environment (æ¥å£)
           â†‘
    å®ç°ç±»: StandardEnvironment
           StandardServletEnvironment
           StandardReactiveWebEnvironment
```

**ğŸŸ¢å…¥é—¨çº§ç†è§£**ï¼š
- `Environment`ï¼šæœ€åŸºç¡€çš„æ¥å£ï¼Œå®šä¹‰äº†è·å–é…ç½®çš„åŸºæœ¬æ–¹æ³•
- `ConfigurableEnvironment`ï¼šå¯é…ç½®çš„ç¯å¢ƒï¼Œå…è®¸åŠ¨æ€æ·»åŠ é…ç½®æº
- `StandardEnvironment`ï¼šæ ‡å‡†ç¯å¢ƒå®ç°ï¼Œé€‚ç”¨äºæ™®é€šJavaåº”ç”¨
- `StandardServletEnvironment`ï¼šWebç¯å¢ƒå®ç°ï¼Œé¢å¤–æ”¯æŒServletç›¸å…³é…ç½®

---

## 3. ğŸ“ PropertySourcesé…ç½®æºè¯¦è§£


### 3.1 PropertySourcesæ˜¯ä»€ä¹ˆ


**ç”Ÿæ´»åŒ–ç†è§£**ï¼š
æƒ³è±¡ä½ è¦æŸ¥æ‰¾ä¸€ä¸ªäººçš„è”ç³»æ–¹å¼ï¼Œä½ å¯èƒ½ä¼šï¼š
1. å…ˆçœ‹æ‰‹æœºé€šè®¯å½•
2. å†çœ‹å¾®ä¿¡å¥½å‹
3. æœ€åç¿»åœ°å€æœ¬

PropertySourceså°±æ˜¯è¿™æ ·ä¸€ä¸ª"è”ç³»æ–¹å¼æŸ¥æ‰¾ç³»ç»Ÿ"ï¼Œå®ƒæŒ‰ç…§ä¸€å®šçš„é¡ºåºä»ä¸åŒçš„"åœ°æ–¹"ï¼ˆé…ç½®æºï¼‰æŸ¥æ‰¾é…ç½®ä¿¡æ¯ã€‚

**æŠ€æœ¯å«ä¹‰**ï¼š
PropertySourcesæ˜¯ä¸€ä¸ªé…ç½®æºçš„é›†åˆï¼Œå®ƒç®¡ç†ç€å¤šä¸ªPropertySourceï¼Œæ¯ä¸ªPropertySourceä»£è¡¨ä¸€ç§é…ç½®æ¥æºï¼ˆå¦‚é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°ç­‰ï¼‰ã€‚

### 3.2 PropertySourceçš„ç±»å‹


**ğŸ” å¸¸è§é…ç½®æºç±»å‹**ï¼š

| é…ç½®æºç±»å‹ | **è¯´æ˜** | **ç¤ºä¾‹** | **ä¼˜å…ˆçº§** |
|-----------|---------|---------|-----------|
| `CommandLinePropertySource` | `å‘½ä»¤è¡Œå‚æ•°` | `--server.port=9000` | `ğŸ”¥æœ€é«˜` |
| `SystemPropertiesPropertySource` | `JVMç³»ç»Ÿå±æ€§` | `-Dserver.port=9000` | `â­é«˜` |
| `SystemEnvironmentPropertySource` | `æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡` | `SERVER_PORT=9000` | `ğŸŸ¡ä¸­` |
| `YamlPropertySourceLoader` | `YAMLé…ç½®æ–‡ä»¶` | `application.yml` | `ğŸŸ¢æ ‡å‡†` |
| `PropertiesPropertySourceLoader` | `Propertiesæ–‡ä»¶` | `application.properties` | `ğŸŸ¢æ ‡å‡†` |

### 3.3 PropertySourcesçš„å·¥ä½œåŸç†


**ğŸ”„ æŸ¥æ‰¾æµç¨‹**ï¼š

```
é…ç½®å±æ€§æŸ¥æ‰¾è¿‡ç¨‹ï¼š
åº”ç”¨éœ€è¦ server.port é…ç½®
         â†“
    æŸ¥æ‰¾é¡ºåºï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š
    1. å‘½ä»¤è¡Œå‚æ•°     â†â”€ æ‰¾åˆ°äº†ï¼Ÿè¿”å›ç»“æœ
    2. JVMç³»ç»Ÿå±æ€§    â†â”€ æ‰¾åˆ°äº†ï¼Ÿè¿”å›ç»“æœ  
    3. ç¯å¢ƒå˜é‡       â†â”€ æ‰¾åˆ°äº†ï¼Ÿè¿”å›ç»“æœ
    4. é…ç½®æ–‡ä»¶       â†â”€ æ‰¾åˆ°äº†ï¼Ÿè¿”å›ç»“æœ
    5. é»˜è®¤å€¼         â†â”€ æœ€åçš„å…œåº•æ–¹æ¡ˆ
```

**å®é™…ä»£ç ç¤ºä¾‹**ï¼š

```java
@Component
public class PropertySourceDemo {
    
    @Autowired
    private ConfigurableEnvironment environment;
    
    public void showPropertySources() {
        System.out.println("=== å½“å‰ç³»ç»Ÿçš„é…ç½®æºåˆ—è¡¨ ===");
        
        MutablePropertySources propertySources = environment.getPropertySources();
        
        // éå†æ‰€æœ‰é…ç½®æºï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
        for (PropertySource<?> propertySource : propertySources) {
            System.out.println("é…ç½®æº: " + propertySource.getName() 
                             + " | ç±»å‹: " + propertySource.getClass().getSimpleName());
        }
        
        // æŸ¥çœ‹æŸä¸ªé…ç½®çš„å…·ä½“æ¥æº
        String portValue = environment.getProperty("server.port");
        System.out.println("server.port çš„å€¼: " + portValue);
    }
}
```

---

## 4. âš–ï¸ é…ç½®ä¼˜å…ˆçº§è§„åˆ™


### 4.1 ä¼˜å…ˆçº§æ¦‚å¿µè§£é‡Š


**ğŸ¯ ä»€ä¹ˆæ˜¯é…ç½®ä¼˜å…ˆçº§**ï¼š
å½“åŒä¸€ä¸ªé…ç½®é¡¹åœ¨å¤šä¸ªåœ°æ–¹éƒ½æœ‰å®šä¹‰æ—¶ï¼ŒSpring Bootéœ€è¦å†³å®šä½¿ç”¨å“ªä¸€ä¸ªå€¼ã€‚è¿™å°±åƒå¤šä¸ªäººåŒæ—¶å‘Šè¯‰ä½ ä¸åŒçš„ç­”æ¡ˆï¼Œä½ éœ€è¦å†³å®šç›¸ä¿¡è°çš„è¯ã€‚ä¼˜å…ˆçº§é«˜çš„é…ç½®ä¼šè¦†ç›–ä¼˜å…ˆçº§ä½çš„é…ç½®ã€‚

**å®é™…åœºæ™¯**ï¼š
å‡è®¾ä½ çš„åº”ç”¨éœ€è¦æ•°æ®åº“è¿æ¥åœ°å€ï¼Œå¯èƒ½åœ¨å¤šä¸ªåœ°æ–¹éƒ½å®šä¹‰äº†ï¼š

```yaml
# application.yml æ–‡ä»¶ä¸­
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/testdb

# ç¯å¢ƒå˜é‡ä¸­
SPRING_DATASOURCE_URL=jdbc:mysql://prod-server:3306/proddb

# å‘½ä»¤è¡Œå‚æ•°
--spring.datasource.url=jdbc:mysql://dev-server:3306/devdb
```

æœ€ç»ˆç”Ÿæ•ˆçš„æ˜¯å‘½ä»¤è¡Œå‚æ•°çš„å€¼ï¼Œå› ä¸ºå®ƒä¼˜å…ˆçº§æœ€é«˜ã€‚

### 4.2 Spring Booté…ç½®ä¼˜å…ˆçº§è¯¦è§£


**ğŸ“Š å®Œæ•´ä¼˜å…ˆçº§åˆ—è¡¨**ï¼š

| ä¼˜å…ˆçº§ | **é…ç½®æ¥æº** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|--------|-------------|------------|----------|
| `1ï¸âƒ£` | `å‘½ä»¤è¡Œå‚æ•°` | `ä¸´æ—¶è¦†ç›–é…ç½®` | `java -jar app.jar --server.port=9000` |
| `2ï¸âƒ£` | `JNDIå±æ€§` | `ä¼ä¸šçº§åº”ç”¨æœåŠ¡å™¨` | `java:comp/env/server/port` |
| `3ï¸âƒ£` | `JVMç³»ç»Ÿå±æ€§` | `å¯åŠ¨æ—¶æŒ‡å®š` | `java -Dserver.port=9000 -jar app.jar` |
| `4ï¸âƒ£` | `æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡` | `å®¹å™¨åŒ–éƒ¨ç½²` | `export SERVER_PORT=9000` |
| `5ï¸âƒ£` | `å¤–éƒ¨é…ç½®æ–‡ä»¶` | `ç¯å¢ƒç‰¹å®šé…ç½®` | `application-prod.yml` |
| `6ï¸âƒ£` | `å†…éƒ¨é…ç½®æ–‡ä»¶` | `é»˜è®¤é…ç½®` | `application.ymlï¼ˆjaråŒ…å†…ï¼‰` |
| `7ï¸âƒ£` | `@PropertySource` | `è‡ªå®šä¹‰é…ç½®æ–‡ä»¶` | `@PropertySource("classpath:custom.properties")` |
| `8ï¸âƒ£` | `SpringApplication.setDefaultProperties()` | `ç¼–ç¨‹å¼é»˜è®¤å€¼` | `ä»£ç ä¸­è®¾ç½®çš„é»˜è®¤å€¼` |

### 4.3 ä¼˜å…ˆçº§å®æˆ˜ç¤ºä¾‹


**ğŸ§ª æµ‹è¯•ä¸åŒé…ç½®æºçš„ä¼˜å…ˆçº§**ï¼š

```java
@SpringBootApplication
public class ConfigPriorityDemo {
    
    public static void main(String[] args) {
        // è®¾ç½®ç¼–ç¨‹å¼é»˜è®¤å±æ€§ï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰
        SpringApplication app = new SpringApplication(ConfigPriorityDemo.class);
        Properties defaultProps = new Properties();
        defaultProps.setProperty("demo.value", "æ¥è‡ªç¼–ç¨‹å¼é»˜è®¤å€¼");
        app.setDefaultProperties(defaultProps);
        
        // å¯åŠ¨åº”ç”¨
        ConfigurableApplicationContext context = app.run(args);
        
        // è·å–æœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®å€¼
        Environment env = context.getEnvironment();
        String value = env.getProperty("demo.value");
        System.out.println("æœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®å€¼: " + value);
        
        context.close();
    }
}
```

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export DEMO_VALUE="æ¥è‡ªç¯å¢ƒå˜é‡"

# è®¾ç½®JVMç³»ç»Ÿå±æ€§
java -Ddemo.value="æ¥è‡ªJVMç³»ç»Ÿå±æ€§" -jar app.jar

# è®¾ç½®å‘½ä»¤è¡Œå‚æ•°
java -jar app.jar --demo.value="æ¥è‡ªå‘½ä»¤è¡Œå‚æ•°"
```

**ğŸ” ç»“æœåˆ†æ**ï¼š
- å¦‚æœåªè¿è¡Œç¨‹åºï¼šè¾“å‡º `"æ¥è‡ªç¼–ç¨‹å¼é»˜è®¤å€¼"`
- å¦‚æœè®¾ç½®äº†ç¯å¢ƒå˜é‡ï¼šè¾“å‡º `"æ¥è‡ªç¯å¢ƒå˜é‡"`  
- å¦‚æœè®¾ç½®äº†JVMå±æ€§ï¼šè¾“å‡º `"æ¥è‡ªJVMç³»ç»Ÿå±æ€§"`
- å¦‚æœè®¾ç½®äº†å‘½ä»¤è¡Œå‚æ•°ï¼šè¾“å‡º `"æ¥è‡ªå‘½ä»¤è¡Œå‚æ•°"`

---

## 5. ğŸ’» å‘½ä»¤è¡Œå‚æ•°å¤„ç†


### 5.1 å‘½ä»¤è¡Œå‚æ•°çš„ä½œç”¨


**ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦å‘½ä»¤è¡Œå‚æ•°**ï¼š
æƒ³è±¡ä½ æœ‰ä¸€ä¸ªå’–å•¡æœºç¨‹åºï¼Œé€šå¸¸ç”¨é»˜è®¤è®¾ç½®å°±å¤Ÿäº†ï¼Œä½†æœ‰æ—¶å€™ä½ æƒ³ä¸´æ—¶è°ƒæ•´ä¸€ä¸‹æ¸©åº¦æˆ–è€…æ—¶é—´ï¼Œè¿™æ—¶å€™å°±ä¸æƒ³å»ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯å¸Œæœ›åœ¨å¯åŠ¨æ—¶ç›´æ¥æŒ‡å®šå‚æ•°ã€‚å‘½ä»¤è¡Œå‚æ•°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§"ä¸´æ—¶è°ƒæ•´"çš„éœ€æ±‚ã€‚

**å®é™…ä½¿ç”¨åœºæ™¯**ï¼š
- **å¼€å‘è°ƒè¯•**ï¼š`java -jar app.jar --server.port=9999 --logging.level.root=DEBUG`
- **å®¹å™¨éƒ¨ç½²**ï¼š`docker run myapp --spring.profiles.active=production`
- **è¿ç»´æ“ä½œ**ï¼š`java -jar app.jar --management.endpoints.web.exposure.include=health,info`

### 5.2 å‘½ä»¤è¡Œå‚æ•°çš„æ ¼å¼


**ğŸ“ æ”¯æŒçš„å‚æ•°æ ¼å¼**ï¼š

```bash
# 1. åŒæ¨ªçº¿æ ¼å¼ï¼ˆæ¨èï¼‰
java -jar app.jar --server.port=8080 --spring.profiles.active=dev

# 2. ç­‰å·åˆ†éš”
java -jar app.jar --server.port=8080

# 3. ç©ºæ ¼åˆ†éš”  
java -jar app.jar --server.port 8080

# 4. å¸ƒå°”å€¼å‚æ•°
java -jar app.jar --debug=true
java -jar app.jar --debug  # ç­‰åŒäº --debug=true

# 5. æ•°ç»„/åˆ—è¡¨å‚æ•°
java -jar app.jar --spring.profiles.active=dev,test
```

### 5.3 å‘½ä»¤è¡Œå‚æ•°å¤„ç†æœºåˆ¶


**ğŸ”§ å†…éƒ¨å¤„ç†æµç¨‹**ï¼š

```
å‘½ä»¤è¡Œå‚æ•°å¤„ç†è¿‡ç¨‹ï¼š
args[] æ•°ç»„
    â†“
SimpleCommandLinePropertySource è§£æå™¨
    â†“  
è½¬æ¢ä¸º PropertySource å¯¹è±¡
    â†“
åŠ å…¥åˆ° Environment çš„ PropertySources ä¸­
    â†“
æˆä¸ºæœ€é«˜ä¼˜å…ˆçº§çš„é…ç½®æº
```

**å®é™…ä»£ç ç¤ºä¾‹**ï¼š

```java
@Component
public class CommandLineArgsDemo implements CommandLineRunner {
    
    @Value("${server.port:8080}")
    private int serverPort;
    
    @Value("${app.name:é»˜è®¤åº”ç”¨}")
    private String appName;
    
    @Autowired
    private Environment environment;
    
    @Override
    public void run(String... args) throws Exception {
        System.out.println("=== å‘½ä»¤è¡Œå‚æ•°å¤„ç†æ¼”ç¤º ===");
        
        // æ˜¾ç¤ºé€šè¿‡ @Value æ³¨å…¥çš„å€¼
        System.out.println("æœåŠ¡å™¨ç«¯å£: " + serverPort);
        System.out.println("åº”ç”¨åç§°: " + appName);
        
        // æ˜¾ç¤ºåŸå§‹å‘½ä»¤è¡Œå‚æ•°
        System.out.println("åŸå§‹å‘½ä»¤è¡Œå‚æ•°: " + Arrays.toString(args));
        
        // æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå‚æ•°
        if (environment.containsProperty("debug")) {
            System.out.println("è°ƒè¯•æ¨¡å¼å·²å¯ç”¨");
        }
    }
}
```

### 5.4 ç¦ç”¨å‘½ä»¤è¡Œå‚æ•°


**âš™ï¸ å¦‚ä½•ç¦ç”¨å‘½ä»¤è¡Œå‚æ•°**ï¼š
æœ‰æ—¶å€™å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä½ å¯èƒ½ä¸å¸Œæœ›é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¦†ç›–é…ç½®ï¼š

```java
@SpringBootApplication
public class Application {
    
    public static void main(String[] args) {
        SpringApplication app = new SpringApplication(Application.class);
        
        // ç¦ç”¨å‘½ä»¤è¡Œå‚æ•°
        app.setAddCommandLineProperties(false);
        
        app.run(args);
    }
}
```

---

## 6. ğŸŒ ç¯å¢ƒå˜é‡é…ç½®


### 6.1 ç¯å¢ƒå˜é‡çš„æ¦‚å¿µ


**ğŸ  ä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡**ï¼š
ç¯å¢ƒå˜é‡å°±åƒæ˜¯æ“ä½œç³»ç»Ÿç»™æ¯ä¸ªè¿è¡Œçš„ç¨‹åºå‡†å¤‡çš„"ä¾¿ç­¾çº¸"ï¼Œä¸Šé¢å†™ç€å„ç§æœ‰ç”¨çš„ä¿¡æ¯ã€‚ç¨‹åºå¯ä»¥éšæ—¶æŸ¥çœ‹è¿™äº›ä¾¿ç­¾çº¸æ¥è·å–é…ç½®ä¿¡æ¯ã€‚åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œä¾¿ç­¾çº¸çš„å†…å®¹å¯èƒ½ä¸ä¸€æ ·ï¼Œè¿™æ ·åŒä¸€ä¸ªç¨‹åºå°±èƒ½é€‚åº”ä¸åŒçš„ç¯å¢ƒã€‚

**æŠ€æœ¯å®šä¹‰**ï¼š
ç¯å¢ƒå˜é‡æ˜¯æ“ä½œç³»ç»Ÿçº§åˆ«çš„é…ç½®ä¿¡æ¯ï¼Œå®ƒä»¬å­˜åœ¨äºè¿›ç¨‹çš„è¿è¡Œç¯å¢ƒä¸­ï¼Œå¯ä»¥è¢«è¯¥è¿›ç¨‹åŠå…¶å­è¿›ç¨‹è®¿é—®ã€‚

### 6.2 Spring Bootä¸­çš„ç¯å¢ƒå˜é‡æ˜ å°„


**ğŸ”— å±æ€§åæ˜ å°„è§„åˆ™**ï¼š
Spring Bootä¼šè‡ªåŠ¨å°†ç¯å¢ƒå˜é‡åè½¬æ¢ä¸ºSpringå±æ€§åï¼š

```bash
# ç¯å¢ƒå˜é‡å‘½åè§„åˆ™ï¼š
# 1. å…¨å¤§å†™
# 2. ç”¨ä¸‹åˆ’çº¿åˆ†éš”
# 3. ç‚¹å·ç”¨ä¸‹åˆ’çº¿æ›¿ä»£

Springå±æ€§                 â†’  ç¯å¢ƒå˜é‡
server.port               â†’  SERVER_PORT
spring.datasource.url     â†’  SPRING_DATASOURCE_URL
logging.level.root        â†’  LOGGING_LEVEL_ROOT
my.app.custom-value       â†’  MY_APP_CUSTOM_VALUE
```

### 6.3 ç¯å¢ƒå˜é‡çš„å®é™…ä½¿ç”¨


**ğŸ’¼ å®¹å™¨åŒ–éƒ¨ç½²åœºæ™¯**ï¼š

```yaml
# docker-compose.yml
version: '3'
services:
  myapp:
    image: myapp:latest
    environment:
      - SERVER_PORT=8080
      - SPRING_PROFILES_ACTIVE=production
      - SPRING_DATASOURCE_URL=jdbc:mysql://db:3306/proddb
      - SPRING_DATASOURCE_USERNAME=produser
      - SPRING_DATASOURCE_PASSWORD=prodpass
    ports:
      - "8080:8080"
```

**ğŸ–¥ï¸ æœ¬åœ°å¼€å‘è®¾ç½®**ï¼š

```bash
# Linux/Mac è®¾ç½®ç¯å¢ƒå˜é‡
export SERVER_PORT=9090
export SPRING_PROFILES_ACTIVE=dev
export DATABASE_URL=jdbc:h2:mem:testdb

# Windows è®¾ç½®ç¯å¢ƒå˜é‡
set SERVER_PORT=9090
set SPRING_PROFILES_ACTIVE=dev
set DATABASE_URL=jdbc:h2:mem:testdb

# å¯åŠ¨åº”ç”¨
java -jar myapp.jar
```

### 6.4 ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹


**ğŸ“‹ å®Œæ•´é…ç½®ç¤ºä¾‹**ï¼š

```java
@Configuration
@ConfigurationProperties(prefix = "app.database")
public class DatabaseConfig {
    
    // è¿™äº›å±æ€§å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼š
    // APP_DATABASE_HOST=localhost
    // APP_DATABASE_PORT=5432  
    // APP_DATABASE_NAME=mydb
    // APP_DATABASE_USERNAME=user
    // APP_DATABASE_PASSWORD=pass
    
    private String host = "localhost";
    private int port = 5432;
    private String name;
    private String username;
    private String password;
    
    // getter å’Œ setter æ–¹æ³•...
    
    @PostConstruct
    public void showConfig() {
        System.out.println("=== æ•°æ®åº“é…ç½®ä¿¡æ¯ ===");
        System.out.println("ä¸»æœº: " + host);
        System.out.println("ç«¯å£: " + port);  
        System.out.println("æ•°æ®åº“å: " + name);
        System.out.println("ç”¨æˆ·å: " + username);
        System.out.println("å¯†ç : " + (password != null ? "***" : "æœªè®¾ç½®"));
    }
}
```

---

## 7. ğŸ“„ YAMLé…ç½®æ–‡ä»¶


### 7.1 YAMLç®€ä»‹


**ğŸ¨ ä»€ä¹ˆæ˜¯YAML**ï¼š
YAMLï¼ˆYet Another Markup Languageï¼‰æ˜¯ä¸€ç§äººç±»å¯è¯»çš„æ•°æ®åºåˆ—åŒ–æ ‡å‡†ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯æ—¢è¦æ˜“äºäººç±»é˜…è¯»ï¼Œåˆè¦ä¾¿äºæœºå™¨è§£æã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ç§"æ›´å¥½çœ‹çš„JSON"ã€‚

**å¯¹æ¯”ä¼ ç»ŸProperties**ï¼š

```properties
# application.propertiesï¼ˆä¼ ç»Ÿæ ¼å¼ï¼‰
server.port=8080
server.servlet.context-path=/api
spring.datasource.url=jdbc:mysql://localhost:3306/mydb
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
```

```yaml
# application.ymlï¼ˆYAMLæ ¼å¼ï¼‰
server:
  port: 8080
  servlet:
    context-path: /api

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
```

**ğŸ” YAMLä¼˜åŠ¿**ï¼š
- âœ… **å±‚æ¬¡æ¸…æ™°**ï¼šé€šè¿‡ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»
- âœ… **å¯è¯»æ€§å¼º**ï¼šæ¥è¿‘è‡ªç„¶è¯­è¨€çš„ç»“æ„
- âœ… **æ”¯æŒå¤æ‚æ•°æ®**ï¼šæ•°ç»„ã€å¯¹è±¡åµŒå¥—ç­‰
- âœ… **æ³¨é‡Šå‹å¥½**ï¼šæ”¯æŒ `#` æ³¨é‡Š

### 7.2 YAMLè¯­æ³•è¦ç‚¹


**ğŸ“ åŸºç¡€è¯­æ³•è§„åˆ™**ï¼š

```yaml
# 1. é”®å€¼å¯¹ï¼ˆæ³¨æ„å†’å·åæœ‰ç©ºæ ¼ï¼‰
key: value

# 2. å±‚çº§å…³ç³»ï¼ˆç”¨ç¼©è¿›ï¼Œä¸è¦ç”¨Tabï¼Œç”¨ç©ºæ ¼ï¼‰
parent:
  child1: value1
  child2: value2
  
# 3. æ•°ç»„/åˆ—è¡¨
fruits:
  - apple
  - banana  
  - orange

# æˆ–è€…è¡Œå†…æ ¼å¼
fruits: [apple, banana, orange]

# 4. å­—ç¬¦ä¸²ï¼ˆä¸€èˆ¬ä¸éœ€è¦å¼•å·ï¼‰
name: å¼ ä¸‰
message: è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯

# éœ€è¦å¼•å·çš„æƒ…å†µ
special: "åŒ…å«: å†’å·çš„å­—ç¬¦ä¸²"
number-as-string: "123"

# 5. å¸ƒå°”å€¼
enabled: true
disabled: false

# 6. æ•°å­—
port: 8080
price: 19.99

# 7. nullå€¼
database: null
# æˆ–è€…
database: ~
```

### 7.3 Spring Bootä¸­çš„YAMLé…ç½®


**ğŸ—ï¸ å¤šç¯å¢ƒé…ç½®**ï¼š

```yaml
# application.yml - é€šç”¨é…ç½®
spring:
  application:
    name: my-spring-app
  
# å…±åŒçš„æ•°æ®åº“é…ç½®
logging:
  level:
    root: INFO
    com.mycompany: DEBUG

---
# å¼€å‘ç¯å¢ƒé…ç½®
spring:
  config:
    activate:
      on-profile: dev
  datasource:
    url: jdbc:h2:mem:devdb
    username: sa
    password: 
    driver-class-name: org.h2.Driver

server:
  port: 8080

---
# ç”Ÿäº§ç¯å¢ƒé…ç½®  
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    url: jdbc:mysql://prod-server:3306/proddb
    username: ${DB_USERNAME:produser}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver

server:
  port: 80
```

**ğŸ¯ å¤æ‚æ•°æ®ç»“æ„ç¤ºä¾‹**ï¼š

```yaml
# åº”ç”¨è‡ªå®šä¹‰é…ç½®
app:
  # åŸºæœ¬ä¿¡æ¯
  info:
    name: æˆ‘çš„åº”ç”¨
    version: 1.0.0
    description: è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹åº”ç”¨
  
  # åŠŸèƒ½å¼€å…³
  features:
    user-registration: true
    email-notification: false
    sms-notification: true
  
  # æœåŠ¡å™¨åˆ—è¡¨
  servers:
    - name: ä¸»æœåŠ¡å™¨
      host: 192.168.1.10
      port: 8080
      active: true
    - name: å¤‡ä»½æœåŠ¡å™¨  
      host: 192.168.1.11
      port: 8080
      active: false
  
  # é‚®ä»¶é…ç½®
  mail:
    smtp:
      host: smtp.example.com
      port: 587
      username: noreply@example.com
      password: ${MAIL_PASSWORD}
    templates:
      welcome: classpath:templates/welcome.html
      reset-password: classpath:templates/reset.html
```

### 7.4 YAMLé…ç½®ç»‘å®šåˆ°Javaå¯¹è±¡


**ğŸ”— é…ç½®å±æ€§ç»‘å®š**ï¼š

```java
@Component
@ConfigurationProperties(prefix = "app")
public class AppConfig {
    
    // å¯¹åº” app.info.*
    private Info info = new Info();
    
    // å¯¹åº” app.features.*  
    private Map<String, Boolean> features = new HashMap<>();
    
    // å¯¹åº” app.servers.*
    private List<Server> servers = new ArrayList<>();
    
    // å¯¹åº” app.mail.*
    private Mail mail = new Mail();
    
    // å†…éƒ¨ç±»å®šä¹‰
    public static class Info {
        private String name;
        private String version;
        private String description;
        // getter/setter...
    }
    
    public static class Server {
        private String name;
        private String host;
        private int port;
        private boolean active;
        // getter/setter...
    }
    
    public static class Mail {
        private Smtp smtp = new Smtp();
        private Map<String, String> templates = new HashMap<>();
        
        public static class Smtp {
            private String host;
            private int port;
            private String username;
            private String password;
            // getter/setter...
        }
        // getter/setter...
    }
    
    // æ‰€æœ‰å±æ€§çš„ getter/setter æ–¹æ³•...
}
```

---

## 8. ğŸ”§ å ä½ç¬¦è§£ææœºåˆ¶


### 8.1 ä»€ä¹ˆæ˜¯å ä½ç¬¦


**ğŸ¯ å ä½ç¬¦çš„æ¦‚å¿µ**ï¼š
å ä½ç¬¦å°±åƒæ˜¯é…ç½®æ–‡ä»¶ä¸­çš„"å¡«ç©ºé¢˜"ï¼Œä½ åœ¨é…ç½®æ–‡ä»¶ä¸­ç•™ä¸€ä¸ªç©ºä½ï¼ˆç”¨ç‰¹æ®Šè¯­æ³•æ ‡è®°ï¼‰ï¼Œç¨‹åºè¿è¡Œæ—¶ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªç©ºä½å¡«ä¸Šå®é™…çš„å€¼ã€‚è¿™æ ·å¯ä»¥è®©é…ç½®æ›´åŠ çµæ´»ï¼Œé¿å…é‡å¤ã€‚

**è¯­æ³•æ ¼å¼**ï¼š
```yaml
# ${å±æ€§å:é»˜è®¤å€¼}
server:
  port: ${SERVER_PORT:8080}  # å¦‚æœæœ‰ SERVER_PORT ç¯å¢ƒå˜é‡å°±ç”¨å®ƒï¼Œå¦åˆ™ç”¨ 8080
  
app:
  name: ${APP_NAME:æˆ‘çš„åº”ç”¨}
  version: ${app.version:1.0.0}
```

### 8.2 å ä½ç¬¦çš„ç±»å‹


**ğŸ“‹ æ”¯æŒçš„å ä½ç¬¦ç±»å‹**ï¼š

```yaml
# 1. ç¯å¢ƒå˜é‡å ä½ç¬¦
database:
  host: ${DATABASE_HOST:localhost}
  port: ${DATABASE_PORT:3306}

# 2. ç³»ç»Ÿå±æ€§å ä½ç¬¦  
java:
  home: ${java.home}
  version: ${java.version}

# 3. å…¶ä»–é…ç½®å±æ€§å ä½ç¬¦
app:
  name: MyApp
  full-name: ${app.name} v${app.version:1.0}
  
# 4. éšæœºå€¼å ä½ç¬¦
security:
  secret: ${random.uuid}
  port: ${random.int[10000,20000]}
  
# 5. å¸¦é»˜è®¤å€¼çš„å ä½ç¬¦
cache:
  ttl: ${CACHE_TTL:3600}  # é»˜è®¤3600ç§’
  enabled: ${CACHE_ENABLED:true}  # é»˜è®¤å¯ç”¨
```

### 8.3 å ä½ç¬¦è§£æè¿‡ç¨‹


**ğŸ”„ è§£ææµç¨‹**ï¼š

```
å ä½ç¬¦è§£æè¿‡ç¨‹ï¼š
é…ç½®æ–‡ä»¶è¯»å–
    â†“
å‘ç° ${...} å ä½ç¬¦
    â†“
æŒ‰ä¼˜å…ˆçº§æŸ¥æ‰¾å±æ€§å€¼ï¼š
1. å‘½ä»¤è¡Œå‚æ•°
2. JVMç³»ç»Ÿå±æ€§  
3. ç¯å¢ƒå˜é‡
4. å…¶ä»–é…ç½®æº
    â†“
æ‰¾åˆ°å€¼ï¼Ÿ â†’ æ›¿æ¢å ä½ç¬¦
æ‰¾ä¸åˆ°ï¼Ÿ â†’ ä½¿ç”¨é»˜è®¤å€¼ï¼ˆå¦‚æœæœ‰ï¼‰
æ²¡é»˜è®¤å€¼ï¼Ÿ â†’ æŠ›å‡ºå¼‚å¸¸
    â†“
æœ€ç»ˆé…ç½®å€¼
```

### 8.4 å ä½ç¬¦å®é™…åº”ç”¨


**ğŸ­ ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹**ï¼š

```yaml
# application.yml
spring:
  application:
    name: ${APP_NAME:my-service}
  
  datasource:
    # æ•°æ®åº“è¿æ¥ä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡æä¾›ï¼Œæé«˜å®‰å…¨æ€§
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:mydb}?useSSL=${DB_SSL:true}
    username: ${DB_USERNAME}  # å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æä¾›
    password: ${DB_PASSWORD}  # å¿…é¡»é€šè¿‡ç¯å¢ƒå˜é‡æä¾›
    
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
    password: ${REDIS_PASSWORD:}
    database: ${REDIS_DATABASE:0}

server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /${spring.application.name}

# åº”ç”¨ç‰¹å®šé…ç½®
app:
  version: ${APP_VERSION:@project.version@}  # Maven å ä½ç¬¦
  environment: ${SPRING_PROFILES_ACTIVE:development}
  
  # APIé…ç½®
  api:
    base-url: ${API_BASE_URL:http://localhost:${server.port}${server.servlet.context-path}}
    timeout: ${API_TIMEOUT:30000}
    
  # æ–‡ä»¶å­˜å‚¨é…ç½®
  storage:
    type: ${STORAGE_TYPE:local}
    path: ${STORAGE_PATH:/tmp/uploads}
    max-size: ${MAX_FILE_SIZE:10MB}

# ç›‘æ§å’Œå¥åº·æ£€æŸ¥
management:
  endpoints:
    web:
      exposure:
        include: ${MANAGEMENT_ENDPOINTS:health,info,metrics}
  server:
    port: ${MANAGEMENT_PORT:${server.port}}
```

**ğŸ’¡ é«˜çº§å ä½ç¬¦æŠ€å·§**ï¼š

```java
@Component
public class ConfigDemo {
    
    // 1. ç›´æ¥æ³¨å…¥å ä½ç¬¦è§£æåçš„å€¼
    @Value("${app.name:DefaultApp}")
    private String appName;
    
    // 2. å¤æ‚çš„å ä½ç¬¦è¡¨è¾¾å¼
    @Value("${app.url:http://localhost:${server.port:8080}/}")
    private String appUrl;
    
    // 3. æ•°ç»„ç±»å‹çš„å ä½ç¬¦
    @Value("${app.allowed-origins:http://localhost:3000,http://localhost:8080}")
    private String[] allowedOrigins;
    
    // 4. ä½¿ç”¨ SpEL è¡¨è¾¾å¼
    @Value("#{environment['app.name'] ?: 'DefaultApp'}")
    private String appNameSpel;
    
    @PostConstruct
    public void showConfig() {
        System.out.println("åº”ç”¨åç§°: " + appName);
        System.out.println("åº”ç”¨URL: " + appUrl);
        System.out.println("å…è®¸çš„æº: " + Arrays.toString(allowedOrigins));
        System.out.println("SpELåº”ç”¨å: " + appNameSpel);
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„å…³é”®æ¦‚å¿µ


```
ğŸ”¸ å¤–éƒ¨åŒ–é…ç½®ï¼šä»£ç ä¸é…ç½®åˆ†ç¦»ï¼ŒåŒä¸€åº”ç”¨é€‚é…å¤šç¯å¢ƒ
ğŸ”¸ Environmentï¼šSpringçš„ç¯å¢ƒæŠ½è±¡ï¼Œç»Ÿä¸€ç®¡ç†é…ç½®å’Œç¯å¢ƒä¿¡æ¯  
ğŸ”¸ PropertySourcesï¼šé…ç½®æºé›†åˆï¼Œç®¡ç†å¤šç§é…ç½®æ¥æº
ğŸ”¸ ä¼˜å…ˆçº§è§„åˆ™ï¼šå‘½ä»¤è¡Œ > JVMå±æ€§ > ç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶
ğŸ”¸ å ä½ç¬¦æœºåˆ¶ï¼š${key:default} è¯­æ³•å®ç°åŠ¨æ€é…ç½®è§£æ
```

### 9.2 å®é™…åº”ç”¨è¦ç‚¹


**ğŸ—ï¸ é…ç½®æœ€ä½³å®è·µ**ï¼š

| ç¯å¢ƒ | **æ¨èé…ç½®æ–¹å¼** | **ä¸»è¦ç”¨é€”** |
|------|----------------|--------------|
| `ğŸ  å¼€å‘ç¯å¢ƒ` | `application-dev.yml` | `æœ¬åœ°å¼€å‘é…ç½®` |
| `ğŸ§ª æµ‹è¯•ç¯å¢ƒ` | `ç¯å¢ƒå˜é‡ + application-test.yml` | `è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®` |
| `ğŸ­ ç”Ÿäº§ç¯å¢ƒ` | `ç¯å¢ƒå˜é‡ + å‘½ä»¤è¡Œå‚æ•°` | `å®‰å…¨æ€§å’Œçµæ´»æ€§` |

**ğŸ”’ å®‰å…¨é…ç½®åŸåˆ™**ï¼š
- âœ… æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ï¼‰é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’
- âœ… ä½¿ç”¨å ä½ç¬¦é¿å…ç¡¬ç¼–ç 
- âœ… ç”Ÿäº§ç¯å¢ƒç¦ç”¨ä¸å¿…è¦çš„é…ç½®æº
- âœ… é…ç½®æ–‡ä»¶ä¸­ä¸åŒ…å«ç”Ÿäº§ç¯å¢ƒå¯†ç 

**âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```yaml
# åˆç†ä½¿ç”¨é…ç½®ç¼“å­˜
spring:
  config:
    import: "optional:file:./config/"  # å¤–éƒ¨é…ç½®ç›®å½•
    
# é¿å…è¿‡åº¦ä½¿ç”¨å ä½ç¬¦åµŒå¥—
# âŒ ä¸å¥½çš„åšæ³•
bad-config: ${outer.${inner.key:default}:final-default}

# âœ… æ¨èåšæ³•  
good-config: ${simple.key:sensible-default}
```

### 9.3 æ•…éšœæ’æŸ¥æŒ‡å—


**ğŸ” å¸¸è§é—®é¢˜è§£å†³**ï¼š

```bash
# 1. æŸ¥çœ‹æ‰€æœ‰é…ç½®æº
java -jar app.jar --debug

# 2. æŸ¥çœ‹ç‰¹å®šå±æ€§çš„å€¼å’Œæ¥æº
java -jar app.jar --spring.output.ansi.enabled=always

# 3. å¯¼å‡ºé…ç½®ä¿¡æ¯ç”¨äºè°ƒè¯•
curl http://localhost:8080/actuator/configprops
curl http://localhost:8080/actuator/env
```

**ğŸ“Š é…ç½®éªŒè¯æ¸…å•**ï¼š
- â˜‘ï¸ ç¡®è®¤é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡®
- â˜‘ï¸ æ£€æŸ¥YAMLè¯­æ³•ï¼ˆç¼©è¿›ã€å†’å·åç©ºæ ¼ï¼‰
- â˜‘ï¸ éªŒè¯ç¯å¢ƒå˜é‡åç§°è½¬æ¢è§„åˆ™
- â˜‘ï¸ ç¡®è®¤Profileæ¿€æ´»çŠ¶æ€
- â˜‘ï¸ æ’æŸ¥å ä½ç¬¦è§£æå¼‚å¸¸

**ğŸ’¡ æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- Spring Booté…ç½®éµå¾ª"çº¦å®šä¼˜äºé…ç½®"ç†å¿µ
- é…ç½®ä¼˜å…ˆçº§ï¼šä¸´æ—¶é…ç½® > ç¯å¢ƒé…ç½® > é»˜è®¤é…ç½®
- å¤–éƒ¨åŒ–é…ç½®è®©åŒä¸€åº”ç”¨é€‚åº”ä¸åŒéƒ¨ç½²ç¯å¢ƒ
- å ä½ç¬¦æœºåˆ¶æä¾›äº†é…ç½®çš„åŠ¨æ€æ€§å’Œçµæ´»æ€§
- å®‰å…¨æ•æ„Ÿä¿¡æ¯åº”é€šè¿‡ç¯å¢ƒå˜é‡ç­‰å®‰å…¨æ–¹å¼æä¾›