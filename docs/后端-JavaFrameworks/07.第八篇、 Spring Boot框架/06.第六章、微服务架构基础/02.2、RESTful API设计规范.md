---
title: 2ã€RESTful APIè®¾è®¡è§„èŒƒ
---
## ğŸ“š ç›®å½•

1. [RESTful APIåŸºç¡€ç†è§£](#1-RESTful-APIåŸºç¡€ç†è§£)
2. [RESTfulè®¾è®¡åŸåˆ™è¯¦è§£](#2-RESTfulè®¾è®¡åŸåˆ™è¯¦è§£)
3. [HTTPçŠ¶æ€ç è§„èŒƒåº”ç”¨](#3-HTTPçŠ¶æ€ç è§„èŒƒåº”ç”¨)
4. [APIç‰ˆæœ¬ç®¡ç†ç­–ç•¥](#4-APIç‰ˆæœ¬ç®¡ç†ç­–ç•¥)
5. [è¯·æ±‚å“åº”æ ¼å¼ç»Ÿä¸€](#5-è¯·æ±‚å“åº”æ ¼å¼ç»Ÿä¸€)
6. [é”™è¯¯ç è®¾è®¡è§„èŒƒ](#6-é”™è¯¯ç è®¾è®¡è§„èŒƒ)
7. [APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ](#7-APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ)
8. [Spring Bootå®è·µæ¡ˆä¾‹](#8-Spring-Bootå®è·µæ¡ˆä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ RESTful APIåŸºç¡€ç†è§£


### 1.1 ä»€ä¹ˆæ˜¯RESTful API


**é€šä¿—ç†è§£**ï¼šæŠŠRESTful APIæƒ³è±¡æˆé¤å…çš„æ ‡å‡†åŒ–æœåŠ¡æµç¨‹ï¼

```
ğŸ½ï¸ é¤å…æœåŠ¡ç±»æ¯”ï¼š
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªé¤å…éƒ½æœ‰è‡ªå·±çš„ç‚¹é¤æ–¹å¼
â€¢ æœ‰çš„é¤å…è¦å…ˆä»˜é’±å†å–é¤
â€¢ æœ‰çš„é¤å…è¦å¡«å†™å¤æ‚çš„è®¢å•è¡¨æ ¼  
â€¢ æœ‰çš„é¤å…çš„èœå•æœ¯è¯­å®Œå…¨ä¸åŒ

RESTfulæ–¹å¼ï¼šæ‰€æœ‰é¤å…éƒ½éµå¾ªç»Ÿä¸€æ ‡å‡†
â€¢ ç»Ÿä¸€çš„ç‚¹é¤æµç¨‹ï¼šçœ‹èœå•â†’ç‚¹èœâ†’ä»˜æ¬¾â†’å–é¤
â€¢ æ ‡å‡†çš„äº¤æµæ–¹å¼ï¼šç”¨ç›¸åŒçš„æœ¯è¯­è¡¨è¾¾éœ€æ±‚
â€¢ æ¸…æ™°çš„åé¦ˆï¼šæ˜ç¡®å‘Šè¯‰ä½ è®¢å•çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥/å‡†å¤‡ä¸­ï¼‰
```

**ğŸ¯ RESTæ ¸å¿ƒç†å¿µ**ï¼š
- **RE**presentationalï¼šæ•°æ®çš„è¡¨ç°å½¢å¼ï¼ˆJSONã€XMLç­‰ï¼‰
- **S**tateï¼šçŠ¶æ€ä¿¡æ¯ï¼ˆè®¢å•çŠ¶æ€ã€ç”¨æˆ·çŠ¶æ€ç­‰ï¼‰  
- **T**ransferï¼šä¼ è¾“è¿‡ç¨‹ï¼ˆå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é—´çš„æ•°æ®äº¤æ¢ï¼‰

```
ç®€å•æ¥è¯´ï¼š
REST = ç”¨æ ‡å‡†åŒ–çš„æ–¹å¼åœ¨ç½‘ç»œä¸Šä¼ è¾“å’Œæ“ä½œæ•°æ®
å°±åƒé‚®æ”¿ç³»ç»Ÿæœ‰ç»Ÿä¸€çš„ä¿¡å°æ ¼å¼å’Œé‚®é€’è§„åˆ™ä¸€æ ·
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦RESTfulè®¾è®¡


**ğŸ¤” ä¼ ç»ŸAPIçš„é—®é¢˜**ï¼š
```
æ··ä¹±çš„æ¥å£è®¾è®¡ï¼š
âŒ getUserInfo.do?userId=123
âŒ deleteUserById.action?id=123  
âŒ updateUser.jsp?user=456&name=å¼ ä¸‰
âŒ addNewUserToSystem.php?data=...

é—®é¢˜åˆ†æï¼š
â€¢ æ¥å£åç§°ä¸ç»Ÿä¸€
â€¢ æ“ä½œæ–¹å¼å„ä¸ç›¸åŒ
â€¢ éš¾ä»¥è®°å¿†å’Œç»´æŠ¤
â€¢ å›¢é˜Ÿåä½œå›°éš¾
```

**âœ… RESTfulçš„è§£å†³æ–¹æ¡ˆ**ï¼š
```
ç»Ÿä¸€çš„èµ„æºæ“ä½œï¼š
âœ… GET    /api/users/123        (è·å–ç”¨æˆ·)
âœ… DELETE /api/users/123        (åˆ é™¤ç”¨æˆ·)
âœ… PUT    /api/users/123        (æ›´æ–°ç”¨æˆ·)
âœ… POST   /api/users            (åˆ›å»ºç”¨æˆ·)

ä¼˜åŠ¿ï¼š
â€¢ æ¥å£è®¾è®¡æ¸…æ™°ç»Ÿä¸€
â€¢ è§åçŸ¥æ„ï¼Œå®¹æ˜“ç†è§£
â€¢ ç¬¦åˆHTTPåè®®æ ‡å‡†
â€¢ ä¾¿äºå›¢é˜Ÿåä½œå’Œç»´æŠ¤
```

### 1.3 REST vs SOAP vs GraphQL


**ğŸ“Š ä¸åŒAPIé£æ ¼å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | **REST** | **SOAP** | **GraphQL** |
|------|----------|----------|-------------|
| **å­¦ä¹ éš¾åº¦** | `ç®€å•` | `å¤æ‚` | `ä¸­ç­‰` |
| **æ•°æ®æ ¼å¼** | `JSON/XML` | `XML` | `JSON` |
| **é€‚ç”¨åœºæ™¯** | `Webåº”ç”¨ã€ç§»åŠ¨åº”ç”¨` | `ä¼ä¸šçº§åº”ç”¨` | `å¤æ‚æ•°æ®æŸ¥è¯¢` |
| **ä¼ è¾“åè®®** | `HTTP` | `HTTP/HTTPS/SMTP` | `HTTP` |
| **ç¼“å­˜æ”¯æŒ** | `å¾ˆå¥½` | `ä¸€èˆ¬` | `å¤æ‚` |

**ğŸ¯ é€‰æ‹©å»ºè®®**ï¼š
```
æ–°æ‰‹æ¨èï¼šREST
â€¢ å­¦ä¹ æˆæœ¬ä½
â€¢ ç¤¾åŒºèµ„æºä¸°å¯Œ
â€¢ Spring Bootå®Œç¾æ”¯æŒ
â€¢ å¤§éƒ¨åˆ†åœºæ™¯éƒ½å¤Ÿç”¨

RESTé€‚ç”¨åœºæ™¯ï¼š
âœ… Webåº”ç”¨åç«¯API
âœ… ç§»åŠ¨Appåç«¯æœåŠ¡
âœ… å¾®æœåŠ¡é—´é€šä¿¡
âœ… ç¬¬ä¸‰æ–¹APIé›†æˆ
```

---

## 2. âš–ï¸ RESTfulè®¾è®¡åŸåˆ™è¯¦è§£


### 2.1 ç»Ÿä¸€æ¥å£åŸåˆ™


**æ ¸å¿ƒæ€æƒ³**ï¼šå°±åƒäº¤é€šæ ‡å¿—ä¸€æ ·ï¼Œå…¨ä¸–ç•Œéƒ½ç”¨ç›¸åŒçš„ç¬¦å·è¡¨è¾¾ç›¸åŒçš„å«ä¹‰ã€‚

**ğŸš¦ èµ„æºæ ‡è¯†ç»Ÿä¸€**ï¼š
```
èµ„æºå‘½åè§„èŒƒï¼š
âœ… ä½¿ç”¨åè¯ï¼Œä¸ç”¨åŠ¨è¯
   æ­£ç¡®ï¼š/usersã€/ordersã€/products
   é”™è¯¯ï¼š/getUsersã€/createOrderã€/deleteProduct

âœ… ä½¿ç”¨å¤æ•°å½¢å¼
   æ­£ç¡®ï¼š/users/123
   é”™è¯¯ï¼š/user/123

âœ… å±‚æ¬¡ç»“æ„æ¸…æ™°
   æ­£ç¡®ï¼š/users/123/orders/456
   å«ä¹‰ï¼šç”¨æˆ·123çš„è®¢å•456
```

**ğŸ“ HTTPåŠ¨è¯å«ä¹‰**ï¼š
```
æ“ä½œç±»æ¯” - æŠŠAPIæ“ä½œæƒ³è±¡æˆå¯¹æ–‡ä»¶çš„æ“ä½œï¼š

GET    = æŸ¥çœ‹æ–‡ä»¶    (åªè¯»ï¼Œä¸ä¿®æ”¹)
POST   = æ–°å»ºæ–‡ä»¶    (åˆ›å»ºæ–°èµ„æº)
PUT    = æ›¿æ¢æ–‡ä»¶    (å®Œæ•´æ›´æ–°)
PATCH  = ç¼–è¾‘æ–‡ä»¶    (éƒ¨åˆ†æ›´æ–°)
DELETE = åˆ é™¤æ–‡ä»¶    (ç§»é™¤èµ„æº)
```

### 2.2 æ— çŠ¶æ€é€šä¿¡åŸåˆ™


**é€šä¿—è§£é‡Š**ï¼šæ¯æ¬¡APIè°ƒç”¨éƒ½åƒæ˜¯ç¬¬ä¸€æ¬¡è§é¢ï¼Œéœ€è¦é‡æ–°è‡ªæˆ‘ä»‹ç»ã€‚

```
ğŸ”„ æ— çŠ¶æ€é€šä¿¡ç¤ºä¾‹ï¼š

æœ‰çŠ¶æ€çš„é—®é¢˜ï¼ˆä¸å¥½çš„æ–¹å¼ï¼‰ï¼š
1. å®¢æˆ·ç«¯ï¼šç™»å½•è¯·æ±‚
2. æœåŠ¡ç«¯ï¼šè®°ä½å®¢æˆ·ç«¯å·²ç™»å½•
3. å®¢æˆ·ç«¯ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæ²¡å¸¦èº«ä»½ä¿¡æ¯ï¼‰
4. æœåŠ¡ç«¯ï¼šä»å†…å­˜ä¸­æŸ¥æ‰¾å®¢æˆ·ç«¯çŠ¶æ€ â† é—®é¢˜ï¼šæœåŠ¡ç«¯éœ€è¦è®°å¿†

æ— çŠ¶æ€çš„è§£å†³ï¼ˆæ­£ç¡®æ–¹å¼ï¼‰ï¼š
1. å®¢æˆ·ç«¯ï¼šç™»å½•è¯·æ±‚
2. æœåŠ¡ç«¯ï¼šè¿”å›è®¿é—®ä»¤ç‰Œ(Token)
3. å®¢æˆ·ç«¯ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæºå¸¦Tokenï¼‰
4. æœåŠ¡ç«¯ï¼šéªŒè¯Tokenï¼Œè¿”å›æ•°æ® â† æ¯æ¬¡éƒ½éªŒè¯ï¼Œä¸ä¾èµ–è®°å¿†
```

**ğŸ¯ æ— çŠ¶æ€çš„å¥½å¤„**ï¼š
```
å¯æ‰©å±•æ€§ï¼š
â€¢ ä»»ä½•æœåŠ¡å™¨éƒ½èƒ½å¤„ç†ä»»ä½•è¯·æ±‚
â€¢ æœåŠ¡å™¨é‡å¯ä¸å½±å“å®¢æˆ·ç«¯
â€¢ å®¹æ˜“å®ç°è´Ÿè½½å‡è¡¡

å¯é æ€§ï¼š
â€¢ å‡å°‘æœåŠ¡å™¨å†…å­˜å ç”¨
â€¢ é¿å…çŠ¶æ€ä¸ä¸€è‡´é—®é¢˜
â€¢ è°ƒè¯•å’Œæµ‹è¯•æ›´ç®€å•
```

### 2.3 èµ„æºåˆ†å±‚ç³»ç»Ÿ


**å»ºç­‘ç±»æ¯”**ï¼šæŠŠAPIè®¾è®¡æƒ³è±¡æˆè®¾è®¡ä¸€æ ‹å¤§æ¥¼çš„æ¥¼å±‚ç»“æ„ã€‚

```
ğŸ¢ APIåˆ†å±‚æ¶æ„ï¼š
ç¬¬1å±‚ï¼šå®¢æˆ·ç«¯ (ç”¨æˆ·ç•Œé¢)
    â†“
ç¬¬2å±‚ï¼šç½‘å…³å±‚ (é—¨å«ï¼Œç»Ÿä¸€å…¥å£)
    â†“  
ç¬¬3å±‚ï¼šä¸šåŠ¡å±‚ (å„ç§æœåŠ¡)
    â†“
ç¬¬4å±‚ï¼šæ•°æ®å±‚ (æ•°æ®åº“)

æ¯å±‚åªéœ€è¦çŸ¥é“ç›¸é‚»å±‚çš„æ¥å£ï¼Œä¸éœ€è¦äº†è§£å†…éƒ¨å®ç°
```

**ğŸ”§ Spring Bootä¸­çš„åˆ†å±‚å®ç°**ï¼š
```java
// Controllerå±‚ - å¤„ç†HTTPè¯·æ±‚
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    @GetMapping("/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        // åªè´Ÿè´£æ¥æ”¶è¯·æ±‚å’Œè¿”å›å“åº”
        User user = userService.findById(id);
        return ResponseEntity.ok(user);
    }
}

// Serviceå±‚ - ä¸šåŠ¡é€»è¾‘å¤„ç†
@Service  
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    public User findById(Long id) {
        // åªè´Ÿè´£ä¸šåŠ¡é€»è¾‘
        return userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨"));
    }
}
```

### 2.4 å¯ç¼“å­˜æ€§åŸåˆ™


**å›¾ä¹¦é¦†ç±»æ¯”**ï¼šå°±åƒå›¾ä¹¦é¦†çš„çƒ­é—¨ä¹¦ç±ä¼šæ”¾åœ¨æ˜¾çœ¼ä½ç½®ï¼Œç»å¸¸è®¿é—®çš„æ•°æ®ä¹Ÿåº”è¯¥ç¼“å­˜èµ·æ¥ã€‚

**ğŸ“š ç¼“å­˜ç­–ç•¥è®¾è®¡**ï¼š
```
HTTPç¼“å­˜å¤´è®¾ç½®ï¼š
Cache-Control: max-age=3600    # ç¼“å­˜1å°æ—¶
Cache-Control: no-cache        # æ¯æ¬¡éƒ½éªŒè¯
ETag: "v1.2.3"                # èµ„æºç‰ˆæœ¬æ ‡è¯†

å®é™…åº”ç”¨ï¼š
â€¢ ç”¨æˆ·ä¿¡æ¯ï¼šç¼“å­˜30åˆ†é’Ÿ
â€¢ å•†å“åˆ—è¡¨ï¼šç¼“å­˜10åˆ†é’Ÿ  
â€¢ å®æ—¶æ•°æ®ï¼šä¸ç¼“å­˜
â€¢ é™æ€é…ç½®ï¼šç¼“å­˜24å°æ—¶
```

---

## 3. ğŸ“Š HTTPçŠ¶æ€ç è§„èŒƒåº”ç”¨


### 3.1 çŠ¶æ€ç åˆ†ç±»ç†è§£


**ç”Ÿæ´»åŒ–ç±»æ¯”**ï¼šæŠŠHTTPçŠ¶æ€ç æƒ³è±¡æˆå¿«é€’çš„é…é€çŠ¶æ€ï¼

```
ğŸ“¦ å¿«é€’çŠ¶æ€ vs HTTPçŠ¶æ€ç ï¼š

2xx = é…é€æˆåŠŸ âœ…
â€¢ 200ï¼šå·²ç­¾æ”¶ï¼ˆè¯·æ±‚æˆåŠŸï¼‰
â€¢ 201ï¼šå·²å‘è´§ï¼ˆèµ„æºå·²åˆ›å»ºï¼‰  
â€¢ 204ï¼šå·²å¤„ç†ä½†æ— è´§ç‰©ï¼ˆåˆ é™¤æˆåŠŸï¼‰

3xx = åœ°å€å˜æ›´ ğŸ”„  
â€¢ 301ï¼šæ°¸ä¹…æ¬å®¶ï¼ˆæ°¸ä¹…é‡å®šå‘ï¼‰
â€¢ 302ï¼šä¸´æ—¶æ¢åœ°å€ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰

4xx = å®¢æˆ·é—®é¢˜ âŒ
â€¢ 400ï¼šåœ°å€å¡«é”™ï¼ˆè¯·æ±‚æ ¼å¼é”™è¯¯ï¼‰
â€¢ 401ï¼šèº«ä»½éªŒè¯å¤±è´¥ï¼ˆéœ€è¦ç™»å½•ï¼‰
â€¢ 404ï¼šåœ°å€ä¸å­˜åœ¨ï¼ˆèµ„æºæœªæ‰¾åˆ°ï¼‰

5xx = å¿«é€’å…¬å¸é—®é¢˜ ğŸ’¥
â€¢ 500ï¼šå†…éƒ¨ç³»ç»Ÿæ•…éšœ
â€¢ 503ï¼šæœåŠ¡ä¸´æ—¶ä¸å¯ç”¨
```

### 3.2 å¸¸ç”¨çŠ¶æ€ç è¯¦è§£


**ğŸ¯ æˆåŠŸçŠ¶æ€ç  (2xx)**ï¼š

| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|--------|----------|------------|----------|
| `200` | `æˆåŠŸ` | `GETæŸ¥è¯¢æˆåŠŸ` | `è·å–ç”¨æˆ·ä¿¡æ¯` |
| `201` | `å·²åˆ›å»º` | `POSTåˆ›å»ºæˆåŠŸ` | `æ³¨å†Œæ–°ç”¨æˆ·` |
| `204` | `æ— å†…å®¹` | `DELETEæˆåŠŸ` | `åˆ é™¤ç”¨æˆ·` |

**âŒ å®¢æˆ·ç«¯é”™è¯¯ (4xx)**ï¼š

| çŠ¶æ€ç  | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** | **è§£å†³æ–¹æ¡ˆ** |
|--------|----------|------------|------------|
| `400` | `è¯·æ±‚é”™è¯¯` | `å‚æ•°æ ¼å¼ä¸æ­£ç¡®` | `æ£€æŸ¥è¯·æ±‚å‚æ•°` |
| `401` | `æœªè®¤è¯` | `æ²¡æœ‰ç™»å½•` | `æä¾›ç™»å½•å‡­è¯` |
| `403` | `æƒé™ä¸è¶³` | `æ— è®¿é—®æƒé™` | `è”ç³»ç®¡ç†å‘˜` |
| `404` | `èµ„æºä¸å­˜åœ¨` | `URLè·¯å¾„é”™è¯¯` | `æ£€æŸ¥è¯·æ±‚åœ°å€` |

**âš¡ Spring BootçŠ¶æ€ç å®è·µ**ï¼š
```java
@RestController
public class UserController {
    
    // æˆåŠŸè¿”å›ç”¨æˆ·ä¿¡æ¯
    @GetMapping("/users/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        if (user != null) {
            return ResponseEntity.ok(user);  // 200 OK
        } else {
            return ResponseEntity.notFound().build();  // 404 Not Found
        }
    }
    
    // åˆ›å»ºæˆåŠŸè¿”å›201
    @PostMapping("/users")
    public ResponseEntity<User> createUser(@RequestBody User user) {
        User savedUser = userService.save(user);
        return ResponseEntity.status(HttpStatus.CREATED)
                .body(savedUser);  // 201 Created
    }
    
    // åˆ é™¤æˆåŠŸè¿”å›204
    @DeleteMapping("/users/{id}")
    public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
        userService.delete(id);
        return ResponseEntity.noContent().build();  // 204 No Content
    }
}
```

### 3.3 é”™è¯¯å¤„ç†æœ€ä½³å®è·µ


**ğŸ¯ ç»Ÿä¸€é”™è¯¯å¤„ç†**ï¼š
```java
// å…¨å±€å¼‚å¸¸å¤„ç†å™¨
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    // å¤„ç†å‚æ•°éªŒè¯é”™è¯¯ -> 400
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ErrorResponse> handleValidation(
            MethodArgumentNotValidException ex) {
        
        ErrorResponse error = ErrorResponse.builder()
            .status(400)
            .message("è¯·æ±‚å‚æ•°ä¸æ­£ç¡®")
            .details(extractValidationErrors(ex))
            .timestamp(LocalDateTime.now())
            .build();
            
        return ResponseEntity.badRequest().body(error);
    }
    
    // å¤„ç†èµ„æºæœªæ‰¾åˆ° -> 404  
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleNotFound(
            ResourceNotFoundException ex) {
        
        ErrorResponse error = ErrorResponse.builder()
            .status(404)
            .message(ex.getMessage())
            .timestamp(LocalDateTime.now())
            .build();
            
        return ResponseEntity.notFound().build();
    }
}
```

---

## 4. ğŸ“‹ APIç‰ˆæœ¬ç®¡ç†ç­–ç•¥


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬ç®¡ç†


**è½¯ä»¶æ›´æ–°ç±»æ¯”**ï¼šå°±åƒæ‰‹æœºAPPéœ€è¦ç‰ˆæœ¬æ›´æ–°ä¸€æ ·ï¼ŒAPIä¹Ÿéœ€è¦ç‰ˆæœ¬ç®¡ç†ï¼

```
ğŸ”„ ç‰ˆæœ¬ç®¡ç†çš„å¿…è¦æ€§ï¼š

ç°å®åœºæ™¯ï¼š
â€¢ è€ç”¨æˆ·è¿˜åœ¨ç”¨æ—§ç‰ˆAPP
â€¢ æ–°åŠŸèƒ½éœ€è¦ä¿®æ”¹APIæ¥å£
â€¢ ä¸èƒ½å¼ºåˆ¶æ‰€æœ‰ç”¨æˆ·ç«‹å³å‡çº§
â€¢ éœ€è¦åŒæ—¶æ”¯æŒå¤šä¸ªç‰ˆæœ¬

è§£å†³æ–¹æ¡ˆï¼š
âœ… æ–°ç‰ˆæœ¬ï¼š/api/v2/users (æ–°åŠŸèƒ½)
âœ… æ—§ç‰ˆæœ¬ï¼š/api/v1/users (ä¿æŒå…¼å®¹)
âœ… æ¸è¿›è¿ç§»ï¼šé€æ­¥å¼•å¯¼ç”¨æˆ·å‡çº§
âœ… è®¡åˆ’æ·˜æ±°ï¼šåœ¨åˆé€‚æ—¶æœºåœæ­¢æ—§ç‰ˆæœ¬
```

### 4.2 ç‰ˆæœ¬ç®¡ç†ç­–ç•¥å¯¹æ¯”


**ğŸ“Š å¸¸è§ç‰ˆæœ¬ç®¡ç†æ–¹å¼**ï¼š

| æ–¹å¼ | **ç¤ºä¾‹** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|------|----------|----------|----------|
| **URLè·¯å¾„** | `/api/v1/users` | `æ¸…æ™°ç›´è§‚` | `URLå˜é•¿` |
| **è¯·æ±‚å¤´** | `Accept: application/vnd.api.v1+json` | `URLç®€æ´` | `ä¸å¤Ÿç›´è§‚` |
| **æŸ¥è¯¢å‚æ•°** | `/api/users?version=1` | `çµæ´»` | `å®¹æ˜“é—å¿˜` |

**ğŸ¯ æ¨èæ–¹å¼ï¼šURLè·¯å¾„ç‰ˆæœ¬**
```java
// Spring Bootç‰ˆæœ¬ç®¡ç†å®ç°
@RestController
@RequestMapping("/api/v1/users")  
public class UserV1Controller {
    
    @GetMapping("/{id}")
    public UserV1Response getUser(@PathVariable Long id) {
        // V1ç‰ˆæœ¬çš„ç”¨æˆ·ä¿¡æ¯æ ¼å¼
        return UserV1Response.builder()
            .id(id)
            .name(user.getName())
            .email(user.getEmail())
            .build();
    }
}

@RestController  
@RequestMapping("/api/v2/users")
public class UserV2Controller {
    
    @GetMapping("/{id}")
    public UserV2Response getUser(@PathVariable Long id) {
        // V2ç‰ˆæœ¬å¢åŠ äº†æ›´å¤šå­—æ®µ
        return UserV2Response.builder()
            .id(id)
            .fullName(user.getFullName())  // æ–°å­—æ®µ
            .email(user.getEmail())
            .phone(user.getPhone())        // æ–°å­—æ®µ
            .avatar(user.getAvatar())      // æ–°å­—æ®µ
            .createTime(user.getCreateTime())  // æ–°å­—æ®µ
            .build();
    }
}
```

### 4.3 ç‰ˆæœ¬å…¼å®¹æ€§ç­–ç•¥


**ğŸ”„ å‘åå…¼å®¹åŸåˆ™**ï¼š
```
å®‰å…¨çš„å˜æ›´ï¼ˆä¸ä¼šç ´åæ—§ç‰ˆæœ¬ï¼‰ï¼š
âœ… æ·»åŠ æ–°çš„APIæ¥å£
âœ… æ·»åŠ æ–°çš„å“åº”å­—æ®µ
âœ… æ·»åŠ æ–°çš„å¯é€‰è¯·æ±‚å‚æ•°
âœ… æ”¾å®½å‚æ•°éªŒè¯è§„åˆ™

å±é™©çš„å˜æ›´ï¼ˆä¼šç ´åæ—§ç‰ˆæœ¬ï¼‰ï¼š
âŒ åˆ é™¤ç°æœ‰APIæ¥å£
âŒ åˆ é™¤å“åº”å­—æ®µ
âŒ ä¿®æ”¹å­—æ®µåç§°æˆ–ç±»å‹
âŒ å¢åŠ å¿…å¡«å‚æ•°
âŒ åŠ å¼ºå‚æ•°éªŒè¯è§„åˆ™
```

**â° ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š
```
ç‰ˆæœ¬å‘å¸ƒç­–ç•¥ï¼š
é˜¶æ®µ1ï¼šå‘å¸ƒæ–°ç‰ˆæœ¬ (åŒæ—¶ç»´æŠ¤æ—§ç‰ˆæœ¬)
é˜¶æ®µ2ï¼šæ ‡è®°æ—§ç‰ˆæœ¬ä¸ºåºŸå¼ƒçŠ¶æ€
é˜¶æ®µ3ï¼šåœæ­¢æ—§ç‰ˆæœ¬åŠŸèƒ½æ›´æ–°
é˜¶æ®µ4ï¼šå®Œå…¨ç§»é™¤æ—§ç‰ˆæœ¬æ”¯æŒ

æ—¶é—´å®‰æ’ï¼š
â€¢ æ–°ç‰ˆæœ¬å‘å¸ƒï¼šç«‹å³å¯ç”¨
â€¢ åºŸå¼ƒé€šçŸ¥ï¼šæå‰6ä¸ªæœˆ
â€¢ åœæ­¢æ›´æ–°ï¼šæå‰3ä¸ªæœˆ  
â€¢ å®Œå…¨ä¸‹çº¿ï¼šæå‰1ä¸ªæœˆé€šçŸ¥
```

---

## 5. ğŸ“ è¯·æ±‚å“åº”æ ¼å¼ç»Ÿä¸€


### 5.1 è¯·æ±‚æ ¼å¼è§„èŒƒ


**ä¿¡ä»¶æ ¼å¼ç±»æ¯”**ï¼šå°±åƒå†™ä¿¡è¦æœ‰å›ºå®šæ ¼å¼ä¸€æ ·ï¼ŒAPIè¯·æ±‚ä¹Ÿéœ€è¦ç»Ÿä¸€è§„èŒƒï¼

**ğŸ“¬ è¯·æ±‚æ ¼å¼ç»„æˆ**ï¼š
```
HTTPè¯·æ±‚ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¯·æ±‚è¡Œ              â”‚  <- GET /api/users HTTP/1.1
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è¯·æ±‚å¤´              â”‚  <- Content-Type: application/json
â”‚                     â”‚     Authorization: Bearer token
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚   è¯·æ±‚ä½“              â”‚  <- {"name": "å¼ ä¸‰", "age": 25}
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ¯ JSONè¯·æ±‚æ ¼å¼è§„èŒƒ**ï¼š
```java
// ç”¨æˆ·æ³¨å†Œè¯·æ±‚æ ¼å¼
{
    "username": "zhangsan",           // ç”¨æˆ·åï¼šå­—ç¬¦ä¸²ï¼Œå¿…å¡«
    "email": "zhang@example.com",    // é‚®ç®±ï¼šå­—ç¬¦ä¸²ï¼Œå¿…å¡«  
    "password": "123456",            // å¯†ç ï¼šå­—ç¬¦ä¸²ï¼Œå¿…å¡«
    "age": 25,                       // å¹´é¾„ï¼šæ•°å­—ï¼Œå¯é€‰
    "interests": ["ç¼–ç¨‹", "éŸ³ä¹"]      // å…´è¶£ï¼šå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯é€‰
}

// å­—æ®µå‘½åè§„èŒƒï¼š
âœ… ä½¿ç”¨é©¼å³°å‘½åï¼šfirstName, lastName
âœ… è¯­ä¹‰æ¸…æ™°ï¼šisActive, hasPermission
âœ… é¿å…ç¼©å†™ï¼šusername (ä¸ç”¨ usr)
```

### 5.2 å“åº”æ ¼å¼æ ‡å‡†åŒ–


**ğŸ“¨ ç»Ÿä¸€å“åº”æ ¼å¼è®¾è®¡**ï¼š
```java
// æ ‡å‡†å“åº”æ ¼å¼
{
    "code": 200,                    // ä¸šåŠ¡çŠ¶æ€ç 
    "message": "æ“ä½œæˆåŠŸ",           // çŠ¶æ€æè¿°
    "data": {                       // å®é™…æ•°æ®
        "id": 1,
        "username": "zhangsan",
        "email": "zhang@example.com"
    },
    "timestamp": "2024-01-15T10:30:00Z"  // å“åº”æ—¶é—´
}

// åˆ†é¡µå“åº”æ ¼å¼
{
    "code": 200,
    "message": "æŸ¥è¯¢æˆåŠŸ", 
    "data": {
        "content": [                // å½“å‰é¡µæ•°æ®
            {"id": 1, "name": "ç”¨æˆ·1"},
            {"id": 2, "name": "ç”¨æˆ·2"}
        ],
        "page": {                   // åˆ†é¡µä¿¡æ¯
            "current": 1,           // å½“å‰é¡µç 
            "size": 10,             // æ¯é¡µå¤§å°
            "total": 100,           // æ€»è®°å½•æ•°
            "pages": 10             // æ€»é¡µæ•°
        }
    }
}
```

**âš¡ Spring Bootå“åº”å°è£…å®ç°**ï¼š
```java
// ç»Ÿä¸€å“åº”ç»“æœå°è£…
@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor  
public class ApiResponse<T> {
    private Integer code;
    private String message;
    private T data;
    private LocalDateTime timestamp;
    
    // æˆåŠŸå“åº”çš„é™æ€æ–¹æ³•
    public static <T> ApiResponse<T> success(T data) {
        return ApiResponse.<T>builder()
            .code(200)
            .message("æ“ä½œæˆåŠŸ")
            .data(data)
            .timestamp(LocalDateTime.now())
            .build();
    }
    
    // å¤±è´¥å“åº”çš„é™æ€æ–¹æ³•
    public static <T> ApiResponse<T> error(Integer code, String message) {
        return ApiResponse.<T>builder()
            .code(code)
            .message(message)
            .timestamp(LocalDateTime.now())
            .build();
    }
}

// Controllerä¸­ä½¿ç”¨
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public ApiResponse<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        return ApiResponse.success(user);  // ç»Ÿä¸€æ ¼å¼è¿”å›
    }
    
    @PostMapping
    public ApiResponse<User> createUser(@RequestBody @Valid UserCreateRequest request) {
        User user = userService.create(request);
        return ApiResponse.success(user);
    }
}
```

### 5.3 æ•°æ®ä¼ è¾“å¯¹è±¡(DTO)è®¾è®¡


**åŒ…è£…ç›’ç±»æ¯”**ï¼šDTOå°±åƒä¸åŒç”¨é€”çš„åŒ…è£…ç›’ï¼ŒåŒæ ·çš„å•†å“ç”¨ä¸åŒç›’å­åŒ…è£…ï¼

```java
// ç”¨æˆ·å®ä½“ï¼ˆæ•°æ®åº“å¯¹åº”ï¼‰
@Entity
public class User {
    private Long id;
    private String username;
    private String password;  // æ•æ„Ÿä¿¡æ¯ï¼Œä¸åº”è¯¥è¿”å›ç»™å®¢æˆ·ç«¯
    private String email;
    private LocalDateTime createTime;
    // ... å…¶ä»–å­—æ®µ
}

// ç”¨æˆ·å“åº”DTOï¼ˆè¿”å›ç»™å®¢æˆ·ç«¯ï¼‰
@Data
@Builder
public class UserResponse {
    private Long id;
    private String username;
    private String email;
    private String createTime;
    // æ³¨æ„ï¼šæ²¡æœ‰passwordå­—æ®µï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯
}

// ç”¨æˆ·åˆ›å»ºè¯·æ±‚DTOï¼ˆå®¢æˆ·ç«¯æäº¤ï¼‰
@Data
@Valid
public class UserCreateRequest {
    
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¹‹é—´")
    private String username;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    private String email;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Size(min = 6, message = "å¯†ç é•¿åº¦è‡³å°‘6ä½")
    private String password;
}
```

---

## 6. âš ï¸ é”™è¯¯ç è®¾è®¡è§„èŒƒ


### 6.1 é”™è¯¯ç åˆ†å±‚è®¾è®¡


**å›¾ä¹¦é¦†åˆ†ç±»ç±»æ¯”**ï¼šå°±åƒå›¾ä¹¦é¦†ç”¨åˆ†ç±»å·ç®¡ç†ä¹¦ç±ä¸€æ ·ï¼Œé”™è¯¯ç ä¹Ÿè¦æœ‰å±‚æ¬¡ç»“æ„ï¼

```
ğŸ“š é”™è¯¯ç åˆ†å±‚ç»“æ„ï¼š
1000 - 1999: é€šç”¨é”™è¯¯
  â”œâ”€â”€ 1001: å‚æ•°é”™è¯¯
  â”œâ”€â”€ 1002: æƒé™ä¸è¶³  
  â””â”€â”€ 1003: ç³»ç»Ÿå¼‚å¸¸

2000 - 2999: ç”¨æˆ·æ¨¡å—é”™è¯¯
  â”œâ”€â”€ 2001: ç”¨æˆ·ä¸å­˜åœ¨
  â”œâ”€â”€ 2002: ç”¨æˆ·åå·²å­˜åœ¨
  â””â”€â”€ 2003: å¯†ç é”™è¯¯

3000 - 3999: è®¢å•æ¨¡å—é”™è¯¯
  â”œâ”€â”€ 3001: è®¢å•ä¸å­˜åœ¨
  â”œâ”€â”€ 3002: è®¢å•çŠ¶æ€å¼‚å¸¸
  â””â”€â”€ 3003: åº“å­˜ä¸è¶³

è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š
âœ… è§ç çŸ¥æ„ï¼šçœ‹é”™è¯¯ç å°±çŸ¥é“æ˜¯å“ªä¸ªæ¨¡å—çš„é—®é¢˜
âœ… ä¾¿äºç»´æŠ¤ï¼šæ¯ä¸ªæ¨¡å—ç®¡ç†è‡ªå·±çš„é”™è¯¯ç 
âœ… é¿å…å†²çªï¼šä¸åŒæ¨¡å—ç”¨ä¸åŒæ•°å­—èŒƒå›´
```

### 6.2 é”™è¯¯ä¿¡æ¯è§„èŒƒ


**ğŸ¯ ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯**ï¼š
```java
// é”™è¯¯ç æšä¸¾è®¾è®¡
@Getter
@AllArgsConstructor
public enum ErrorCode {
    
    // é€šç”¨é”™è¯¯ 1xxx
    SUCCESS(200, "æ“ä½œæˆåŠŸ"),
    PARAM_ERROR(1001, "è¯·æ±‚å‚æ•°é”™è¯¯"),
    UNAUTHORIZED(1002, "æ‚¨è¿˜æ²¡æœ‰ç™»å½•ï¼Œè¯·å…ˆç™»å½•"),
    FORBIDDEN(1003, "æ‚¨çš„æƒé™ä¸è¶³ï¼Œæ— æ³•æ‰§è¡Œæ­¤æ“ä½œ"),
    SYSTEM_ERROR(1004, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•"),
    
    // ç”¨æˆ·é”™è¯¯ 2xxx  
    USER_NOT_FOUND(2001, "ç”¨æˆ·ä¸å­˜åœ¨"),
    USERNAME_EXISTS(2002, "ç”¨æˆ·åå·²è¢«æ³¨å†Œï¼Œè¯·æ¢ä¸€ä¸ªè¯•è¯•"),
    PASSWORD_ERROR(2003, "å¯†ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥"),
    EMAIL_EXISTS(2004, "é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·ä½¿ç”¨å…¶ä»–é‚®ç®±"),
    
    // è®¢å•é”™è¯¯ 3xxx
    ORDER_NOT_FOUND(3001, "è®¢å•ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤"),
    ORDER_STATUS_ERROR(3002, "è®¢å•çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•æ‰§è¡Œæ­¤æ“ä½œ"),
    STOCK_NOT_ENOUGH(3003, "å•†å“åº“å­˜ä¸è¶³ï¼Œè¯·å‡å°‘è´­ä¹°æ•°é‡");
    
    private final Integer code;
    private final String message;
}
```

**ğŸ’¡ é”™è¯¯ä¿¡æ¯è®¾è®¡åŸåˆ™**ï¼š
```
ç”¨æˆ·å‹å¥½ï¼š
âŒ ä¸å¥½ï¼šNullPointerException
âœ… å¥½çš„ï¼šè¯·æ±‚çš„ç”¨æˆ·ä¿¡æ¯ä¸å­˜åœ¨

å…·ä½“æ˜ç¡®ï¼š
âŒ ä¸å¥½ï¼šæ“ä½œå¤±è´¥
âœ… å¥½çš„ï¼šç”¨æˆ·åå·²è¢«æ³¨å†Œï¼Œè¯·æ¢ä¸€ä¸ªè¯•è¯•

å¯æ“ä½œæ€§ï¼š  
âŒ ä¸å¥½ï¼šç³»ç»Ÿé”™è¯¯
âœ… å¥½çš„ï¼šç½‘ç»œè¿æ¥è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•
```

### 6.3 å¼‚å¸¸å¤„ç†å®è·µ


**ğŸ›¡ï¸ åˆ†å±‚å¼‚å¸¸å¤„ç†**ï¼š
```java
// è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
@Data
@EqualsAndHashCode(callSuper = true)
public class BusinessException extends RuntimeException {
    private final ErrorCode errorCode;
    
    public BusinessException(ErrorCode errorCode) {
        super(errorCode.getMessage());
        this.errorCode = errorCode;
    }
}

// ä¸šåŠ¡å±‚å¼‚å¸¸æŠ›å‡º
@Service
public class UserService {
    
    public User findById(Long id) {
        return userRepository.findById(id)
            .orElseThrow(() -> new BusinessException(ErrorCode.USER_NOT_FOUND));
    }
    
    public User register(UserCreateRequest request) {
        // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
        if (userRepository.existsByUsername(request.getUsername())) {
            throw new BusinessException(ErrorCode.USERNAME_EXISTS);
        }
        
        // æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨
        if (userRepository.existsByEmail(request.getEmail())) {
            throw new BusinessException(ErrorCode.EMAIL_EXISTS);
        }
        
        return userRepository.save(convertToUser(request));
    }
}

// å…¨å±€å¼‚å¸¸å¤„ç†
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(BusinessException.class)
    public ResponseEntity<ApiResponse<Void>> handleBusinessException(
            BusinessException ex) {
        
        ErrorCode errorCode = ex.getErrorCode();
        ApiResponse<Void> response = ApiResponse.<Void>builder()
            .code(errorCode.getCode())
            .message(errorCode.getMessage())
            .timestamp(LocalDateTime.now())
            .build();
            
        return ResponseEntity.ok(response);
    }
}
```

---

## 7. ğŸ“– APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£


**è¯´æ˜ä¹¦ç±»æ¯”**ï¼šä¹°ç”µå™¨éƒ½æœ‰è¯´æ˜ä¹¦ï¼ŒAPIä¹Ÿéœ€è¦"ä½¿ç”¨è¯´æ˜ä¹¦"ï¼

```
ğŸ¤” æ‰‹å·¥ç»´æŠ¤æ–‡æ¡£çš„é—®é¢˜ï¼š
âŒ ä»£ç å˜äº†ï¼Œæ–‡æ¡£å¿˜è®°æ›´æ–°
âŒ æ–‡æ¡£å’Œå®é™…æ¥å£ä¸ä¸€è‡´  
âŒ ç»´æŠ¤ä¸¤å¥—ä¸œè¥¿ï¼Œå·¥ä½œé‡å¤§
âŒ å®¹æ˜“å‡ºç°é”™è¯¯å’Œé—æ¼

âœ… è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£çš„ä¼˜åŠ¿ï¼š
â€¢ æ–‡æ¡£å’Œä»£ç ä¿æŒä¸€è‡´
â€¢ å‡å°‘ç»´æŠ¤å·¥ä½œé‡
â€¢ è‡ªå¸¦åœ¨çº¿è°ƒè¯•åŠŸèƒ½
â€¢ å›¢é˜Ÿåä½œæ›´é«˜æ•ˆ
```

### 7.2 Swagger/OpenAPIé›†æˆ


**âš¡ Spring Boot + Swaggeré…ç½®**ï¼š
```java
// å¼•å…¥ä¾èµ–ï¼ˆMavenï¼‰
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    <version>2.2.0</version>
</dependency>

// Swaggeré…ç½®ç±»
@Configuration
@OpenAPIDefinition(
    info = @Info(
        title = "ç”¨æˆ·ç®¡ç†ç³»ç»ŸAPI",
        version = "v1.0",
        description = "æä¾›ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†ç­‰åŠŸèƒ½"
    )
)
public class SwaggerConfig {
    
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("ç”¨æˆ·ç®¡ç†API")
                .version("1.0")
                .description("ç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„RESTful APIæ–‡æ¡£"))
            .addSecurityItem(new SecurityRequirement().addList("bearerAuth"))
            .components(new Components()
                .addSecuritySchemes("bearerAuth", 
                    new SecurityScheme()
                        .type(SecurityScheme.Type.HTTP)
                        .scheme("bearer")
                        .bearerFormat("JWT")));
    }
}
```

### 7.3 APIæ–‡æ¡£æ³¨è§£ä½¿ç”¨


**ğŸ“ æ¥å£æ–‡æ¡£æ³¨è§£å®è·µ**ï¼š
```java
@RestController
@RequestMapping("/api/users")
@Tag(name = "ç”¨æˆ·ç®¡ç†", description = "ç”¨æˆ·ç›¸å…³çš„å¢åˆ æ”¹æŸ¥æ“ä½œ")
public class UserController {
    
    @Operation(
        summary = "è·å–ç”¨æˆ·ä¿¡æ¯", 
        description = "æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯"
    )
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "è·å–æˆåŠŸ"),
        @ApiResponse(responseCode = "404", description = "ç”¨æˆ·ä¸å­˜åœ¨")
    })
    @GetMapping("/{id}")
    public ApiResponse<UserResponse> getUser(
            @Parameter(description = "ç”¨æˆ·ID", example = "123") 
            @PathVariable Long id) {
        
        User user = userService.findById(id);
        return ApiResponse.success(convertToResponse(user));
    }
    
    @Operation(summary = "åˆ›å»ºç”¨æˆ·", description = "æ³¨å†Œæ–°ç”¨æˆ·è´¦å·")
    @PostMapping
    public ApiResponse<UserResponse> createUser(
            @RequestBody 
            @Valid 
            @Schema(description = "ç”¨æˆ·åˆ›å»ºè¯·æ±‚") 
            UserCreateRequest request) {
        
        User user = userService.register(request);
        return ApiResponse.success(convertToResponse(user));
    }
}
```

**ğŸ¯ æ•°æ®æ¨¡å‹æ³¨è§£**ï¼š
```java
@Data
@Schema(description = "ç”¨æˆ·åˆ›å»ºè¯·æ±‚")
public class UserCreateRequest {
    
    @Schema(description = "ç”¨æˆ·å", example = "zhangsan", required = true)
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;
    
    @Schema(description = "é‚®ç®±åœ°å€", example = "zhang@example.com", required = true)
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Schema(description = "å¯†ç ", example = "123456", required = true, minLength = 6)
    @Size(min = 6, message = "å¯†ç é•¿åº¦è‡³å°‘6ä½")  
    private String password;
    
    @Schema(description = "å¹´é¾„", example = "25", minimum = "1", maximum = "150")
    private Integer age;
}
```

### 7.4 æ–‡æ¡£ä½¿ç”¨å’Œç»´æŠ¤


**ğŸ“‹ æ–‡æ¡£è®¿é—®å’Œä½¿ç”¨**ï¼š
```
æ–‡æ¡£åœ°å€ï¼š
â€¢ Swagger UIï¼šhttp://localhost:8080/swagger-ui/index.html
â€¢ APIæ–‡æ¡£JSONï¼šhttp://localhost:8080/v3/api-docs

ä½¿ç”¨åŠŸèƒ½ï¼š
âœ… åœ¨çº¿æŸ¥çœ‹æ¥å£æ–‡æ¡£
âœ… åœ¨çº¿æµ‹è¯•APIæ¥å£
âœ… æŸ¥çœ‹è¯·æ±‚/å“åº”ç¤ºä¾‹
âœ… ä¸‹è½½APIå®šä¹‰æ–‡ä»¶
```

**ğŸ¯ æ–‡æ¡£ç»´æŠ¤æœ€ä½³å®è·µ**ï¼š
```
æ³¨è§£ä½¿ç”¨è§„èŒƒï¼š
â€¢ æ¯ä¸ªæ¥å£éƒ½è¦æœ‰@Operationæ³¨è§£
â€¢ å¤æ‚å‚æ•°ä½¿ç”¨@Schemaè¯¦ç»†æè¿°
â€¢ æä¾›çœŸå®çš„exampleå€¼
â€¢ æ ‡æ³¨å¿…å¡«å’Œå¯é€‰å­—æ®µ

å›¢é˜Ÿåä½œï¼š
â€¢ ç»Ÿä¸€æ³¨è§£ä½¿ç”¨è§„èŒƒ
â€¢ å®šæœŸæ£€æŸ¥æ–‡æ¡£å®Œæ•´æ€§
â€¢ é‡è¦å˜æ›´åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜
â€¢ ä¿æŒæ–‡æ¡£ç‰ˆæœ¬å’Œä»£ç ç‰ˆæœ¬ä¸€è‡´
```

---

## 8. âš¡ Spring Bootå®è·µæ¡ˆä¾‹


### 8.1 å®Œæ•´çš„ç”¨æˆ·ç®¡ç†API


**ğŸ—ï¸ é¡¹ç›®ç»“æ„è®¾è®¡**ï¼š
```
src/main/java/com/example/userapi/
â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚
â”‚   â””â”€â”€ UserController.java
â”œâ”€â”€ service/            # ä¸šåŠ¡é€»è¾‘å±‚  
â”‚   â”œâ”€â”€ UserService.java
â”‚   â””â”€â”€ impl/
â”‚       â””â”€â”€ UserServiceImpl.java
â”œâ”€â”€ repository/         # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ UserRepository.java
â”œâ”€â”€ entity/            # æ•°æ®å®ä½“
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ dto/              # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”œâ”€â”€ UserCreateRequest.java
â”‚   â”‚   â””â”€â”€ UserUpdateRequest.java
â”‚   â””â”€â”€ response/
â”‚       â””â”€â”€ UserResponse.java
â”œâ”€â”€ exception/        # å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ BusinessException.java
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â””â”€â”€ config/          # é…ç½®ç±»
    â””â”€â”€ SwaggerConfig.java
```

**ğŸ¯ å®Œæ•´Controllerå®ç°**ï¼š
```java
@RestController
@RequestMapping("/api/v1/users")
@Tag(name = "ç”¨æˆ·ç®¡ç†", description = "ç”¨æˆ·ç›¸å…³æ“ä½œæ¥å£")
@Validated
public class UserController {
    
    private final UserService userService;
    
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    @Operation(summary = "è·å–ç”¨æˆ·åˆ—è¡¨", description = "åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨")
    @GetMapping
    public ApiResponse<PageResult<UserResponse>> getUsers(
            @Parameter(description = "é¡µç ï¼Œä»1å¼€å§‹") 
            @RequestParam(defaultValue = "1") 
            @Min(value = 1, message = "é¡µç å¿…é¡»å¤§äº0") Integer page,
            
            @Parameter(description = "æ¯é¡µå¤§å°") 
            @RequestParam(defaultValue = "10") 
            @Range(min = 1, max = 100, message = "æ¯é¡µå¤§å°å¿…é¡»åœ¨1-100ä¹‹é—´") Integer size) {
        
        PageResult<UserResponse> result = userService.getUsers(page - 1, size);
        return ApiResponse.success(result);
    }
    
    @Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
    @GetMapping("/{id}")
    public ApiResponse<UserResponse> getUser(@PathVariable Long id) {
        UserResponse user = userService.getUserById(id);
        return ApiResponse.success(user);
    }
    
    @Operation(summary = "åˆ›å»ºç”¨æˆ·")
    @PostMapping
    public ApiResponse<UserResponse> createUser(
            @RequestBody @Valid UserCreateRequest request) {
        UserResponse user = userService.createUser(request);
        return ApiResponse.success(user);
    }
    
    @Operation(summary = "æ›´æ–°ç”¨æˆ·")
    @PutMapping("/{id}")
    public ApiResponse<UserResponse> updateUser(
            @PathVariable Long id,
            @RequestBody @Valid UserUpdateRequest request) {
        UserResponse user = userService.updateUser(id, request);
        return ApiResponse.success(user);
    }
    
    @Operation(summary = "åˆ é™¤ç”¨æˆ·")
    @DeleteMapping("/{id}")
    public ApiResponse<Void> deleteUser(@PathVariable Long id) {
        userService.deleteUser(id);
        return ApiResponse.success(null);
    }
}
```

### 8.2 æ•°æ®éªŒè¯å’Œè½¬æ¢


**ğŸ”’ è¯·æ±‚å‚æ•°éªŒè¯**ï¼š
```java
@Data
@Schema(description = "ç”¨æˆ·åˆ›å»ºè¯·æ±‚")
public class UserCreateRequest {
    
    @Schema(description = "ç”¨æˆ·å", example = "zhangsan")
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^[a-zA-Z0-9_]{3,20}$", 
             message = "ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œé•¿åº¦3-20ä½")
    private String username;
    
    @Schema(description = "é‚®ç®±", example = "zhang@example.com")
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @Schema(description = "å¯†ç ", example = "123456")
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Size(min = 6, max = 20, message = "å¯†ç é•¿åº¦å¿…é¡»åœ¨6-20ä½ä¹‹é—´")
    private String password;
    
    @Schema(description = "å¹´é¾„", example = "25")
    @Min(value = 1, message = "å¹´é¾„å¿…é¡»å¤§äº0")
    @Max(value = 150, message = "å¹´é¾„ä¸èƒ½è¶…è¿‡150")
    private Integer age;
    
    @Schema(description = "æ‰‹æœºå·", example = "13812345678")
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
}
```

**ğŸ”„ å¯¹è±¡è½¬æ¢å·¥å…·**ï¼š
```java
@Component
public class UserConverter {
    
    // è¯·æ±‚è½¬å®ä½“
    public User convertToEntity(UserCreateRequest request) {
        return User.builder()
            .username(request.getUsername())
            .email(request.getEmail())
            .password(encodePassword(request.getPassword())) // å¯†ç åŠ å¯†
            .age(request.getAge())
            .phone(request.getPhone())
            .createTime(LocalDateTime.now())
            .updateTime(LocalDateTime.now())
            .build();
    }
    
    // å®ä½“è½¬å“åº”
    public UserResponse convertToResponse(User user) {
        return UserResponse.builder()
            .id(user.getId())
            .username(user.getUsername())
            .email(user.getEmail())
            .age(user.getAge())
            .phone(user.getPhone())
            .createTime(user.getCreateTime().toString())
            .updateTime(user.getUpdateTime().toString())
            .build();
    }
    
    // åˆ†é¡µç»“æœè½¬æ¢
    public PageResult<UserResponse> convertToPageResult(Page<User> userPage) {
        List<UserResponse> users = userPage.getContent()
            .stream()
            .map(this::convertToResponse)
            .collect(Collectors.toList());
            
        return PageResult.<UserResponse>builder()
            .content(users)
            .page(PageInfo.builder()
                .current(userPage.getNumber() + 1)
                .size(userPage.getSize())
                .total(userPage.getTotalElements())
                .pages(userPage.getTotalPages())
                .build())
            .build();
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ RESTfulæœ¬è´¨ï¼šç”¨ç»Ÿä¸€çš„æ–¹å¼æ“ä½œç½‘ç»œèµ„æº
ğŸ”¸ è®¾è®¡åŸåˆ™ï¼šç»Ÿä¸€æ¥å£ã€æ— çŠ¶æ€ã€åˆ†å±‚ç³»ç»Ÿã€å¯ç¼“å­˜
ğŸ”¸ çŠ¶æ€ç è§„èŒƒï¼š2xxæˆåŠŸã€4xxå®¢æˆ·ç«¯é”™è¯¯ã€5xxæœåŠ¡ç«¯é”™è¯¯
ğŸ”¸ ç‰ˆæœ¬ç®¡ç†ï¼šURLè·¯å¾„æ–¹å¼æœ€ç›´è§‚ï¼Œæ¸è¿›å¼è¿ç§»
ğŸ”¸ æ ¼å¼ç»Ÿä¸€ï¼šè¯·æ±‚å“åº”éƒ½è¦æœ‰æ ‡å‡†æ ¼å¼
ğŸ”¸ é”™è¯¯å¤„ç†ï¼šåˆ†å±‚è®¾è®¡ï¼Œç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
ğŸ”¸ æ–‡æ¡£ç”Ÿæˆï¼šç”¨Swaggerè‡ªåŠ¨ç”Ÿæˆï¼Œä¿æŒä»£ç æ–‡æ¡£ä¸€è‡´
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆé€‰æ‹©RESTful**ï¼š
```
ç†è§£è¦ç‚¹ï¼š
â€¢ ä¸æ˜¯æŠ€æœ¯é©æ–°ï¼Œæ˜¯è®¾è®¡è§„èŒƒ
â€¢ é™ä½å­¦ä¹ æˆæœ¬ï¼Œå›¢é˜Ÿåä½œæ›´å®¹æ˜“
â€¢ ç¬¦åˆHTTPåè®®è®¾è®¡åˆè¡·
â€¢ å·¥å…·ç”Ÿæ€å®Œå–„ï¼ŒSpring Bootå®Œç¾æ”¯æŒ

å®é™…ä»·å€¼ï¼š
â€¢ å‰åç«¯åˆ†ç¦»å¼€å‘æ›´é¡ºç•…
â€¢ APIæ¥å£æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤
â€¢ ç¬¬ä¸‰æ–¹é›†æˆæˆæœ¬æ›´ä½
â€¢ å¾®æœåŠ¡æ¶æ„çš„åŸºç¡€
```

**ğŸ”¹ è®¾è®¡åŸåˆ™çš„å®é™…æ„ä¹‰**ï¼š
```
ç»Ÿä¸€æ¥å£ï¼š
â€¢ è§åçŸ¥æ„ï¼šGET /users å°±æ˜¯è·å–ç”¨æˆ·åˆ—è¡¨
â€¢ æ ‡å‡†æ“ä½œï¼šPOSTåˆ›å»ºã€PUTæ›´æ–°ã€DELETEåˆ é™¤
â€¢ é™ä½æ²Ÿé€šæˆæœ¬

æ— çŠ¶æ€è®¾è®¡ï¼š
â€¢ æœåŠ¡å™¨ä¸éœ€è¦è®°å¿†å®¢æˆ·ç«¯çŠ¶æ€
â€¢ æ›´å®¹æ˜“åšè´Ÿè½½å‡è¡¡å’Œæ‰©å±•
â€¢ è°ƒè¯•å’Œæµ‹è¯•æ›´ç®€å•
```

**ğŸ”¹ Spring Bootçš„ä¼˜åŠ¿**ï¼š
```
å¼€å‘æ•ˆç‡ï¼š
â€¢ æ³¨è§£é©±åŠ¨ï¼Œé…ç½®ç®€å•
â€¢ è‡ªåŠ¨è£…é…ï¼Œå¼€ç®±å³ç”¨
â€¢ ä¸°å¯Œçš„starterï¼Œé›†æˆå®¹æ˜“

ç”Ÿæ€å®Œå–„ï¼š
â€¢ Swaggeræ–‡æ¡£ç”Ÿæˆ
â€¢ å‚æ•°éªŒè¯æ¡†æ¶
â€¢ å¼‚å¸¸å¤„ç†æœºåˆ¶
â€¢ æµ‹è¯•æ”¯æŒå®Œæ•´
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¼ é¡¹ç›®å¼€å‘å»ºè®®**ï¼š
```
å¼€å‘æµç¨‹ï¼š
1. è®¾è®¡APIæ¥å£ï¼ˆå…ˆå†™æ–‡æ¡£ï¼‰
2. å®šä¹‰è¯·æ±‚å“åº”æ ¼å¼
3. å®ç°ä¸šåŠ¡é€»è¾‘
4. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. ç”ŸæˆAPIæ–‡æ¡£

ä»£ç ç»„ç»‡ï¼š
â€¢ Controlleråªè´Ÿè´£æ¥æ”¶è¯·æ±‚å’Œè¿”å›å“åº”
â€¢ Serviceå¤„ç†å…·ä½“ä¸šåŠ¡é€»è¾‘  
â€¢ Repositoryè´Ÿè´£æ•°æ®è®¿é—®
â€¢ DTOç”¨äºæ•°æ®ä¼ è¾“
â€¢ ç»Ÿä¸€å¼‚å¸¸å¤„ç†
```

**ğŸ› ï¸ æœ€ä½³å®è·µ**ï¼š
```
APIè®¾è®¡ï¼š
â€¢ åè¯å¤æ•°ï¼š/users ä¸æ˜¯ /user
â€¢ å±‚æ¬¡æ¸…æ™°ï¼š/users/123/orders/456
â€¢ ç‰ˆæœ¬ç®¡ç†ï¼š/api/v1/users
â€¢ çŠ¶æ€ç æ­£ç¡®ä½¿ç”¨

ä»£ç è´¨é‡ï¼š
â€¢ å‚æ•°éªŒè¯è¦å®Œæ•´
â€¢ é”™è¯¯ä¿¡æ¯è¦å‹å¥½
â€¢ æ—¥å¿—è®°å½•è¦è¯¦ç»†
â€¢ å•å…ƒæµ‹è¯•è¦è¦†ç›–
```

**ğŸ¯ å­¦ä¹ å»ºè®®**ï¼š
```
åŸºç¡€é˜¶æ®µï¼š
â€¢ ç†è§£HTTPåè®®åŸºç¡€
â€¢ æŒæ¡RESTfulè®¾è®¡åŸåˆ™
â€¢ å­¦ä¼šSpring BootåŸºæœ¬ç”¨æ³•
â€¢ ç»ƒä¹ CRUDæ“ä½œ

è¿›é˜¶é˜¶æ®µï¼š
â€¢ æ·±å…¥ç†è§£çŠ¶æ€ç ä½¿ç”¨
â€¢ æŒæ¡å¤æ‚å‚æ•°éªŒè¯
â€¢ å­¦ä¼šå…¨å±€å¼‚å¸¸å¤„ç†
â€¢ å®è·µAPIç‰ˆæœ¬ç®¡ç†

é«˜çº§é˜¶æ®µï¼š
â€¢ æ€§èƒ½ä¼˜åŒ–æŠ€å·§
â€¢ å®‰å…¨è®¤è¯æˆæƒ
â€¢ å¾®æœåŠ¡é€šä¿¡
â€¢ APIç½‘å…³ä½¿ç”¨
```

### 9.4 å¸¸è§é—®é¢˜è§£ç­”


**â“ RESTå’ŒRESTfulæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**
```
ç­”ï¼š
RESTæ˜¯è®¾è®¡ç†å¿µï¼ˆ6ä¸ªè®¾è®¡åŸåˆ™ï¼‰
RESTfulæ˜¯æŒ‰ç…§RESTåŸåˆ™è®¾è®¡çš„API
å°±åƒ"ç¯ä¿"æ˜¯ç†å¿µï¼Œ"ç¯ä¿äº§å“"æ˜¯å…·ä½“å®ç°
```

**â“ ä»€ä¹ˆæ—¶å€™ä¸é€‚åˆç”¨RESTfulï¼Ÿ**
```
ç­”ï¼š
ä¸é€‚åˆåœºæ™¯ï¼š
â€¢ å¤æ‚çš„ä¸šåŠ¡æ“ä½œï¼ˆå¦‚è½¬è´¦ï¼Œæ¶‰åŠå¤šä¸ªèµ„æºï¼‰
â€¢ å®æ—¶é€šä¿¡éœ€æ±‚ï¼ˆWebSocketæ›´åˆé€‚ï¼‰
â€¢ å†…éƒ¨ç³»ç»Ÿè°ƒç”¨ï¼ˆRPCå¯èƒ½æ›´é«˜æ•ˆï¼‰
â€¢ å¤§æ•°æ®æ‰¹é‡æ“ä½œï¼ˆGraphQLå¯èƒ½æ›´å¥½ï¼‰
```

**â“ å¦‚ä½•å¤„ç†å¤æ‚çš„ä¸šåŠ¡æ“ä½œï¼Ÿ**
```
ç­”ï¼š
ç­–ç•¥ä¸€ï¼šè®¾è®¡ä¸ºèµ„æºæ“ä½œ
POST /transfers ï¼ˆåˆ›å»ºè½¬è´¦è®°å½•ï¼‰

ç­–ç•¥äºŒï¼šä½¿ç”¨åŠ¨è¯+èµ„æº
POST /accounts/123/transfer

ç­–ç•¥ä¸‰ï¼šRPCé£æ ¼ï¼ˆéRESTfulï¼‰  
POST /transferMoney
```

**ğŸ§  è®°å¿†è¦ç‚¹**ï¼š
- RESTfulè®©APIåƒæ“ä½œæ–‡ä»¶ä¸€æ ·ç›´è§‚
- ç»Ÿä¸€æ ¼å¼é™ä½æ²Ÿé€šæˆæœ¬æé«˜å¼€å‘æ•ˆç‡
- Spring Bootè®©RESTfulå¼€å‘å˜å¾—ç®€å•
- æ–‡æ¡£å’Œä»£ç ä¿æŒä¸€è‡´æ˜¯å…³é”®
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯æ¯”æŠ€æœ¯ç»†èŠ‚æ›´é‡è¦

**æ ¸å¿ƒç†å¿µ**ï¼šRESTfulä¸åªæ˜¯æŠ€æœ¯è§„èŒƒï¼Œæ›´æ˜¯å›¢é˜Ÿåä½œçš„å…±åŒè¯­è¨€ã€‚æŒæ¡äº†RESTfulè®¾è®¡ï¼Œä½ å°±èƒ½è®¾è®¡å‡ºè®©äººä¸€çœ¼å°±æ‡‚çš„APIæ¥å£ï¼