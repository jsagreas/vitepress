---
title: 2ã€Spring Bootç”Ÿæ€å®Œå–„
---
## ğŸ“š ç›®å½•

1. [Spring Boot Starteræ·±åº¦è§£æ](#1-spring-boot-starteræ·±åº¦è§£æ)
2. [Spring Boot DevToolså¼€å‘åˆ©å™¨](#2-spring-boot-devtoolså¼€å‘åˆ©å™¨)
3. [Spring Boot Testæµ‹è¯•æ¡†æ¶](#3-spring-boot-testæµ‹è¯•æ¡†æ¶)
4. [Spring Boot Actuatorç›‘æ§ä½“ç³»](#4-spring-boot-actuatorç›‘æ§ä½“ç³»)
5. [åº”ç”¨æ‰“åŒ…ä¸éƒ¨ç½²ç­–ç•¥](#5-åº”ç”¨æ‰“åŒ…ä¸éƒ¨ç½²ç­–ç•¥)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ Spring Boot Starteræ·±åº¦è§£æ


### 1.1 ä»€ä¹ˆæ˜¯Spring Boot Starter


**ğŸ’¡ é€šä¿—ç†è§£**
æƒ³è±¡ä½ è¦æ­å»ºä¸€ä¸ªå¨æˆ¿ï¼Œä¼ ç»Ÿæ–¹å¼éœ€è¦ä½ ä¸€æ ·ä¸€æ ·ä¹°ï¼šç‚‰å­ã€é”…å­ã€è°ƒæ–™ã€é¤å…·...éå¸¸éº»çƒ¦ã€‚è€ŒStarterå°±åƒæ˜¯"å¨æˆ¿å¥—è£…"ï¼ŒæŠŠå¸¸ç”¨çš„ä¸œè¥¿æ‰“åŒ…å¥½ï¼Œä½ åªéœ€è¦è¯´"æˆ‘è¦åšä¸­é¤"ï¼Œå°±ç»™ä½ é…å¥½ä¸­é¤å¨æˆ¿çš„å…¨å¥—è®¾å¤‡ã€‚

**ğŸ”¸ Starteræœ¬è´¨**
```
Starter = ä¾èµ–ç®¡ç† + è‡ªåŠ¨é…ç½® + çº¦å®šå¤§äºé…ç½®

ä¼ ç»ŸSpringé¡¹ç›®ï¼š
æ‰‹åŠ¨æ·»åŠ å‡ åä¸ªä¾èµ– â†’ æ‰‹åŠ¨å†™é…ç½®ç±» â†’ æ‰‹åŠ¨è§£å†³ç‰ˆæœ¬å†²çª

Spring Boot Starterï¼š
æ·»åŠ ä¸€ä¸ªstarterä¾èµ– â†’ è‡ªåŠ¨å¼•å…¥ç›¸å…³ä¾èµ– â†’ è‡ªåŠ¨é…ç½®å¥½ä¸€åˆ‡
```

### 1.2 å¸¸ç”¨Starterå…¨æ™¯å›¾


| Starteråç§° | **ç”¨é€”è¯´æ˜** | **è‡ªåŠ¨å¼•å…¥çš„ä¸»è¦ä¾èµ–** | **åº”ç”¨åœºæ™¯** |
|-------------|-------------|----------------------|-------------|
| `spring-boot-starter-web` | **Webåº”ç”¨å¼€å‘** | `Spring MVC + Tomcat + Jackson` | `æ„å»ºREST APIã€Webç½‘ç«™` |
| `spring-boot-starter-data-jpa` | **JPAæ•°æ®è®¿é—®** | `Hibernate + Spring Data JPA` | `æ“ä½œå…³ç³»å‹æ•°æ®åº“` |
| `spring-boot-starter-security` | **å®‰å…¨è®¤è¯** | `Spring Security + ç›¸å…³ç»„ä»¶` | `ç”¨æˆ·ç™»å½•ã€æƒé™æ§åˆ¶` |
| `spring-boot-starter-test` | **å•å…ƒæµ‹è¯•** | `JUnit + Mockito + Spring Test` | `ç¼–å†™æµ‹è¯•ä»£ç ` |
| `spring-boot-starter-redis` | **Redisç¼“å­˜** | `Jedis/Lettuce + Spring Data Redis` | `ç¼“å­˜ã€ä¼šè¯å­˜å‚¨` |

**ğŸ¯ ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”**

```xml
<!-- ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦æ·»åŠ å¾ˆå¤šä¾èµ– -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>5.3.21</version>
</dependency>
<dependency>
    <groupId>org.apache.tomcat.embed</groupId>
    <artifactId>tomcat-embed-core</artifactId>
    <version>9.0.64</version>
</dependency>
<!-- è¿˜éœ€è¦æ·»åŠ åå‡ ä¸ªå…¶ä»–ä¾èµ–... -->

<!-- Spring Bootæ–¹å¼ï¼šä¸€ä¸ªstarteræå®š -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
```

### 1.3 Starterå·¥ä½œåŸç†æ·±å…¥


**ğŸ”§ è‡ªåŠ¨é…ç½®æœºåˆ¶**

```
å·¥ä½œæµç¨‹ï¼š
1. æ·»åŠ Starterä¾èµ– â†’ 2. æ‰«æ@EnableAutoConfiguration â†’ 3. è¯»å–spring.factories
4. åŠ è½½AutoConfigurationç±» â†’ 5. æ ¹æ®æ¡ä»¶æ³¨è§£å†³å®šæ˜¯å¦ç”Ÿæ•ˆ â†’ 6. è‡ªåŠ¨åˆ›å»ºBean

æ ¸å¿ƒæ³¨è§£è¯´æ˜ï¼š
@ConditionalOnClass      â†’ "å¦‚æœç±»è·¯å¾„ä¸­æœ‰æŸä¸ªç±»æ‰ç”Ÿæ•ˆ"
@ConditionalOnProperty   â†’ "å¦‚æœé…ç½®æ–‡ä»¶ä¸­æœ‰æŸä¸ªå±æ€§æ‰ç”Ÿæ•ˆ"  
@ConditionalOnBean       â†’ "å¦‚æœå®¹å™¨ä¸­æœ‰æŸä¸ªBeanæ‰ç”Ÿæ•ˆ"
```

**ğŸ“‹ è‡ªå®šä¹‰Starterç¤ºä¾‹**

å‡è®¾æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªçŸ­ä¿¡å‘é€çš„Starterï¼š

```java
// 1. åˆ›å»ºé…ç½®å±æ€§ç±»
@ConfigurationProperties(prefix = "sms")
public class SmsProperties {
    private String apiKey;      // APIå¯†é’¥
    private String template;    // çŸ­ä¿¡æ¨¡æ¿
    private int timeout = 5000; // è¶…æ—¶æ—¶é—´
    
    // getterå’Œsetter...
}

// 2. åˆ›å»ºæ ¸å¿ƒä¸šåŠ¡ç±»
public class SmsService {
    private SmsProperties properties;
    
    public SmsService(SmsProperties properties) {
        this.properties = properties;
    }
    
    public boolean sendSms(String phone, String message) {
        // å®é™…å‘é€çŸ­ä¿¡é€»è¾‘
        System.out.println("å‘é€çŸ­ä¿¡åˆ°: " + phone);
        return true;
    }
}

// 3. åˆ›å»ºè‡ªåŠ¨é…ç½®ç±»
@Configuration
@EnableConfigurationProperties(SmsProperties.class)
@ConditionalOnClass(SmsService.class)
public class SmsAutoConfiguration {
    
    @Bean
    @ConditionalOnMissingBean
    public SmsService smsService(SmsProperties properties) {
        return new SmsService(properties);
    }
}
```

---

## 2. âš¡ Spring Boot DevToolså¼€å‘åˆ©å™¨


### 2.1 DevToolsæ˜¯ä»€ä¹ˆ


**ğŸ’¡ ç®€å•ç†è§£**
DevToolså°±åƒæ˜¯ç»™ä½ çš„å¼€å‘ç¯å¢ƒè£…äº†"è‡ªåŠ¨åˆ·æ–°"åŠŸèƒ½ã€‚ä»¥å‰ä½ æ”¹äº†ä»£ç è¦åœæœåŠ¡å™¨ã€é‡å¯ã€ç­‰å¾…ï¼Œç°åœ¨æ”¹å®Œä»£ç ä¿å­˜ä¸€ä¸‹ï¼Œåº”ç”¨è‡ªåŠ¨é‡å¯ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚

**ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½**
```
çƒ­é‡å¯    â†’ ä»£ç æ”¹åŠ¨åè‡ªåŠ¨é‡å¯åº”ç”¨
çƒ­åˆ·æ–°    â†’ é™æ€èµ„æºæ”¹åŠ¨åæµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°  
è¿œç¨‹è°ƒè¯•  â†’ å¯ä»¥è°ƒè¯•è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„åº”ç”¨
é…ç½®ç›‘æ§  â†’ é…ç½®æ–‡ä»¶å˜åŒ–è‡ªåŠ¨ç”Ÿæ•ˆ
```

### 2.2 DevToolsä½¿ç”¨é…ç½®


**ğŸ› ï¸ åŸºç¡€é…ç½®**

```xml
<!-- æ·»åŠ DevToolsä¾èµ– -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <optional>true</optional>
</dependency>
```

```properties
# application.propertiesé…ç½®
# å¯ç”¨çƒ­é‡å¯ï¼ˆé»˜è®¤å¼€å¯ï¼‰
spring.devtools.restart.enabled=true

# æ’é™¤æŸäº›è·¯å¾„ä¸è§¦å‘é‡å¯
spring.devtools.restart.exclude=static/**,templates/**

# è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼ˆéœ€è¦æµè§ˆå™¨æ’ä»¶æ”¯æŒï¼‰
spring.devtools.livereload.enabled=true
```

### 2.3 çƒ­é‡å¯å·¥ä½œåŸç†


**ğŸ”„ é‡å¯æœºåˆ¶å›¾è§£**

```
åº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºä¸¤ä¸ªç±»åŠ è½½å™¨ï¼š

Base ClassLoader               Restart ClassLoader
   â†“                              â†“
åŠ è½½ç¬¬ä¸‰æ–¹JARåŒ…                  åŠ è½½ä½ çš„ä¸šåŠ¡ä»£ç 
ï¼ˆSpringã€Tomcatç­‰ï¼‰            ï¼ˆControllerã€Serviceç­‰ï¼‰
   â†“                              â†“
ä¸ä¼šé‡å¯                         æ£€æµ‹åˆ°å˜åŒ–æ—¶é‡å¯

ä¼˜åŠ¿ï¼šåªé‡æ–°åŠ è½½ä½ çš„ä»£ç ï¼Œç¬¬ä¸‰æ–¹åº“ä¸åŠ¨ï¼Œæ‰€ä»¥é‡å¯å¾ˆå¿«ï¼
```

**âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹**

```
âœ… é€‚ç”¨åœºæ™¯ï¼š
â€¢ å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œæé«˜å¼€å‘æ•ˆç‡
â€¢ ä¿®æ”¹ä¸šåŠ¡ä»£ç ã€é…ç½®æ–‡ä»¶æ—¶è‡ªåŠ¨é‡å¯
â€¢ è°ƒè¯•æ—¶å¿«é€Ÿçœ‹åˆ°æ•ˆæœ

âŒ ä¸é€‚ç”¨åœºæ™¯ï¼š  
â€¢ ç”Ÿäº§ç¯å¢ƒï¼ˆä¼šè¢«è‡ªåŠ¨ç¦ç”¨ï¼‰
â€¢ ä¿®æ”¹ä¾èµ–ã€JVMå‚æ•°ç­‰éœ€è¦å®Œå…¨é‡å¯
â€¢ æ€§èƒ½æµ‹è¯•æ—¶ï¼ˆä¼šå½±å“æ€§èƒ½ï¼‰
```

---

## 3. ğŸ§ª Spring Boot Testæµ‹è¯•æ¡†æ¶


### 3.1 æµ‹è¯•æ¡†æ¶æ¦‚è¿°


**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦æµ‹è¯•**
å†™ä»£ç å°±åƒç›–æˆ¿å­ï¼Œä½ ä¸å¯èƒ½ç›–å®Œæˆ¿å­ä¸æ£€æŸ¥å°±è®©äººä½è¿›å»ã€‚æµ‹è¯•å°±æ˜¯æ£€æŸ¥ä½ çš„"ä»£ç æˆ¿å­"æ˜¯å¦ç»“å®ï¼Œå„ä¸ªåŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

**ğŸ”¸ Spring Boot Testç‰¹ç‚¹**
```
é›†æˆåŒ–    â†’ ä¸€ä¸ªæ³¨è§£æå®šæµ‹è¯•ç¯å¢ƒ
åˆ†å±‚æµ‹è¯•  â†’ å¯ä»¥æµ‹è¯•ä¸åŒå±‚æ¬¡ï¼ˆWebå±‚ã€Serviceå±‚ã€Repositoryå±‚ï¼‰
æ¨¡æ‹Ÿç¯å¢ƒ  â†’ å¯ä»¥æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ï¼ˆæ•°æ®åº“ã€ç¬¬ä¸‰æ–¹APIç­‰ï¼‰
å¿«é€Ÿå¯åŠ¨  â†’ æµ‹è¯•å¯åŠ¨é€Ÿåº¦æ¯”å®Œæ•´åº”ç”¨å¿«
```

### 3.2 æµ‹è¯•æ³¨è§£è¯¦è§£


| æ³¨è§£åç§° | **ä½œç”¨è¯´æ˜** | **ä½¿ç”¨åœºæ™¯** | **å¯åŠ¨å†…å®¹** |
|---------|-------------|-------------|-------------|
| `@SpringBootTest` | **å®Œæ•´é›†æˆæµ‹è¯•** | `æµ‹è¯•æ•´ä¸ªåº”ç”¨åŠŸèƒ½` | `å¯åŠ¨å®Œæ•´Springå®¹å™¨` |
| `@WebMvcTest` | **Webå±‚æµ‹è¯•** | `æµ‹è¯•Controller` | `åªå¯åŠ¨Webç›¸å…³Bean` |
| `@DataJpaTest` | **JPAå±‚æµ‹è¯•** | `æµ‹è¯•Repository` | `åªå¯åŠ¨JPAç›¸å…³é…ç½®` |
| `@JsonTest` | **JSONåºåˆ—åŒ–æµ‹è¯•** | `æµ‹è¯•JSONè½¬æ¢` | `åªå¯åŠ¨JSONç›¸å…³ç»„ä»¶` |

**ğŸ¯ å®é™…æµ‹è¯•ç¤ºä¾‹**

```java
// 1. Controllerå±‚æµ‹è¯•
@WebMvcTest(UserController.class)
class UserControllerTest {
    
    @Autowired
    private MockMvc mockMvc;  // æ¨¡æ‹ŸHTTPè¯·æ±‚
    
    @MockBean
    private UserService userService;  // æ¨¡æ‹ŸServiceå±‚
    
    @Test
    void shouldReturnUser() throws Exception {
        // æ¨¡æ‹Ÿserviceè¿”å›æ•°æ®
        User mockUser = new User("å¼ ä¸‰", 25);
        when(userService.findById(1L)).thenReturn(mockUser);
        
        // å‘é€HTTPè¯·æ±‚å¹¶éªŒè¯ç»“æœ
        mockMvc.perform(get("/users/1"))
               .andExpect(status().isOk())
               .andExpect(jsonPath("$.name").value("å¼ ä¸‰"));
    }
}

// 2. Serviceå±‚æµ‹è¯•  
@SpringBootTest
class UserServiceTest {
    
    @Autowired
    private UserService userService;
    
    @Test
    void shouldCreateUser() {
        // æµ‹è¯•ä¸šåŠ¡é€»è¾‘
        User user = userService.createUser("æå››", 30);
        
        assertThat(user.getName()).isEqualTo("æå››");
        assertThat(user.getId()).isNotNull();
    }
}
```

### 3.3 æµ‹è¯•æœ€ä½³å®è·µ


**ğŸ“‹ æµ‹è¯•é‡‘å­—å¡”åŸç†**

```
        /\
       /  \        E2Eæµ‹è¯•ï¼ˆå°‘é‡ï¼‰
      /    \       é›†æˆæµ‹è¯•ï¼ˆé€‚é‡ï¼‰ 
     /______\      å•å…ƒæµ‹è¯•ï¼ˆå¤§é‡ï¼‰

è§£é‡Šï¼š
â€¢ å•å…ƒæµ‹è¯•ï¼šæµ‹è¯•å•ä¸ªæ–¹æ³•ã€ç±»ï¼Œé€Ÿåº¦å¿«ï¼Œæ•°é‡å¤š
â€¢ é›†æˆæµ‹è¯•ï¼šæµ‹è¯•å¤šä¸ªç»„ä»¶é…åˆï¼Œè¦†ç›–ä¸»è¦æµç¨‹  
â€¢ E2Eæµ‹è¯•ï¼šæµ‹è¯•å®Œæ•´ç”¨æˆ·åœºæ™¯ï¼Œä¿è¯æ ¸å¿ƒåŠŸèƒ½
```

---

## 4. ğŸ“Š Spring Boot Actuatorç›‘æ§ä½“ç³»


### 4.1 Actuatorç›‘æ§æ¦‚è¿°


**ğŸ’¡ é€šä¿—ç†è§£**
Actuatorå°±åƒæ˜¯ç»™ä½ çš„åº”ç”¨è£…äº†"ä½“æ£€è®¾å¤‡"ã€‚å°±åƒäººè¦å®šæœŸä½“æ£€çœ‹èº«ä½“çŠ¶å†µï¼Œåº”ç”¨ä¹Ÿéœ€è¦ç›‘æ§æ¥äº†è§£è¿è¡ŒçŠ¶æ€ï¼šå†…å­˜ç”¨äº†å¤šå°‘ã€å¤„ç†äº†å¤šå°‘è¯·æ±‚ã€æœ‰æ²¡æœ‰å¼‚å¸¸ç­‰ç­‰ã€‚

**ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½**
```
å¥åº·æ£€æŸ¥  â†’ åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
æ€§èƒ½æŒ‡æ ‡  â†’ CPUã€å†…å­˜ã€å“åº”æ—¶é—´ç­‰  
ç¯å¢ƒä¿¡æ¯  â†’ é…ç½®å±æ€§ã€ç¯å¢ƒå˜é‡ç­‰
æ“ä½œæ¥å£  â†’ å¯ä»¥è¿œç¨‹æ‰§è¡Œä¸€äº›ç®¡ç†æ“ä½œ
```

### 4.2 Actuatoré…ç½®ä½¿ç”¨


**ğŸ› ï¸ åŸºç¡€é…ç½®**

```xml
<!-- æ·»åŠ Actuatorä¾èµ– -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

```properties
# å¼€æ”¾æ‰€æœ‰ç›‘æ§ç«¯ç‚¹ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
management.endpoints.web.exposure.include=*

# ç”Ÿäº§ç¯å¢ƒåªå¼€æ”¾å¿…è¦ç«¯ç‚¹
management.endpoints.web.exposure.include=health,info,metrics

# æ˜¾ç¤ºè¯¦ç»†å¥åº·ä¿¡æ¯
management.endpoint.health.show-details=always

# è‡ªå®šä¹‰ç®¡ç†ç«¯å£ï¼ˆå¯é€‰ï¼‰
management.server.port=8081
```

### 4.3 é‡è¦ç›‘æ§ç«¯ç‚¹è¯¦è§£


**ğŸ“‹ æ ¸å¿ƒç«¯ç‚¹åŠŸèƒ½è¡¨**

| ç«¯ç‚¹è·¯å¾„ | **åŠŸèƒ½è¯´æ˜** | **è¿”å›ä¿¡æ¯** | **ä½¿ç”¨åœºæ™¯** |
|---------|-------------|-------------|-------------|
| `/actuator/health` | **å¥åº·æ£€æŸ¥** | `åº”ç”¨å’Œä¾èµ–æœåŠ¡çŠ¶æ€` | `è´Ÿè½½å‡è¡¡å™¨å¥åº·æ£€æŸ¥` |
| `/actuator/info` | **åº”ç”¨ä¿¡æ¯** | `ç‰ˆæœ¬å·ã€æ„å»ºä¿¡æ¯ç­‰` | `äº†è§£åº”ç”¨åŸºæœ¬ä¿¡æ¯` |
| `/actuator/metrics` | **æ€§èƒ½æŒ‡æ ‡** | `JVMã€HTTPè¯·æ±‚ç­‰æŒ‡æ ‡` | `æ€§èƒ½ç›‘æ§å’Œè°ƒä¼˜` |
| `/actuator/env` | **ç¯å¢ƒä¿¡æ¯** | `é…ç½®å±æ€§ã€ç¯å¢ƒå˜é‡` | `é…ç½®é—®é¢˜æ’æŸ¥` |

**ğŸ¯ å¥åº·æ£€æŸ¥è¯¦è§£**

```json
// GET /actuator/health è¿”å›ç¤ºä¾‹
{
  "status": "UP",
  "components": {
    "db": {
      "status": "UP",
      "details": {
        "database": "MySQL",
        "validationQuery": "isValid()"
      }
    },
    "redis": {
      "status": "UP", 
      "details": {
        "version": "6.2.7"
      }
    },
    "diskSpace": {
      "status": "UP",
      "details": {
        "total": 499963174912,
        "free": 91943825408,
        "threshold": 10485760,
        "exists": true
      }
    }
  }
}
```

**ğŸ“Š è‡ªå®šä¹‰å¥åº·æ£€æŸ¥**

```java
// è‡ªå®šä¹‰å¥åº·æ£€æŸ¥å™¨
@Component
public class CustomHealthIndicator implements HealthIndicator {
    
    @Override
    public Health health() {
        // æ£€æŸ¥æŸä¸ªå¤–éƒ¨æœåŠ¡æ˜¯å¦å¯ç”¨
        boolean externalServiceUp = checkExternalService();
        
        if (externalServiceUp) {
            return Health.up()
                    .withDetail("service", "å¤–éƒ¨æœåŠ¡æ­£å¸¸")
                    .withDetail("responseTime", "150ms")
                    .build();
        } else {
            return Health.down()
                    .withDetail("service", "å¤–éƒ¨æœåŠ¡å¼‚å¸¸")
                    .withDetail("error", "è¿æ¥è¶…æ—¶")
                    .build();
        }
    }
    
    private boolean checkExternalService() {
        // å®é™…æ£€æŸ¥é€»è¾‘
        return true;
    }
}
```

### 4.4 ç›‘æ§æŒ‡æ ‡è¯¦è§£


**ğŸ“ˆ JVMç›‘æ§æŒ‡æ ‡**

```
å†…å­˜æŒ‡æ ‡ï¼š
â€¢ jvm.memory.used     â†’ å·²ä½¿ç”¨å†…å­˜
â€¢ jvm.memory.max      â†’ æœ€å¤§å†…å­˜  
â€¢ jvm.gc.pause        â†’ GCæš‚åœæ—¶é—´

çº¿ç¨‹æŒ‡æ ‡ï¼š
â€¢ jvm.threads.live    â†’ æ´»è·ƒçº¿ç¨‹æ•°
â€¢ jvm.threads.peak    â†’ çº¿ç¨‹å³°å€¼

CPUæŒ‡æ ‡ï¼š
â€¢ process.cpu.usage   â†’ CPUä½¿ç”¨ç‡
â€¢ system.cpu.usage    â†’ ç³»ç»ŸCPUä½¿ç”¨ç‡
```

**ğŸŒ HTTPç›‘æ§æŒ‡æ ‡**

```
è¯·æ±‚æŒ‡æ ‡ï¼š
â€¢ http.server.requests.count    â†’ è¯·æ±‚æ€»æ•°
â€¢ http.server.requests.max      â†’ æœ€å¤§å“åº”æ—¶é—´  
â€¢ http.server.requests.sum      â†’ æ€»å“åº”æ—¶é—´

é”™è¯¯æŒ‡æ ‡ï¼š  
â€¢ http.server.requests{status="4xx"}  â†’ å®¢æˆ·ç«¯é”™è¯¯æ•°
â€¢ http.server.requests{status="5xx"}  â†’ æœåŠ¡ç«¯é”™è¯¯æ•°
```

---

## 5. ğŸ“¦ åº”ç”¨æ‰“åŒ…ä¸éƒ¨ç½²ç­–ç•¥


### 5.1 å¯æ‰§è¡ŒJARåŸç†


**ğŸ’¡ ä¼ ç»ŸJAR vs å¯æ‰§è¡ŒJAR**

```
ä¼ ç»ŸJARåŒ…ç»“æ„ï¼š          Spring Bootå¯æ‰§è¡ŒJARç»“æ„ï¼š
my-app.jar               my-app.jar
â”œâ”€â”€ META-INF/           â”œâ”€â”€ META-INF/
â”œâ”€â”€ com/myapp/          â”œâ”€â”€ BOOT-INF/
â””â”€â”€ application.yml     â”‚   â”œâ”€â”€ classes/        (ä½ çš„ä»£ç )
                        â”‚   â”œâ”€â”€ lib/           (ä¾èµ–JAR)
                        â”‚   â””â”€â”€ classpath.idx
                        â””â”€â”€ org/springframework/boot/loader/
                            â””â”€â”€ JarLauncher.class (å¯åŠ¨å™¨)

è¿è¡Œæ–¹å¼ï¼š
ä¼ ç»Ÿï¼šjava -cp my-app.jar:lib/* MainClass
Spring Bootï¼šjava -jar my-app.jar (ä¸€æ¡å‘½ä»¤æå®šï¼)
```

### 5.2 Mavenæ‰“åŒ…é…ç½®


```xml
<build>
    <plugins>
        <!-- Spring Bootæ‰“åŒ…æ’ä»¶ -->
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <!-- åŒ…å«å®Œæ•´ä¾èµ–ä¿¡æ¯ -->
                <includeSystemScope>true</includeSystemScope>
                <!-- è®¾ç½®ä¸»å¯åŠ¨ç±» -->
                <mainClass>com.example.Application</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build>
```

**ğŸ”§ æ‰“åŒ…å‘½ä»¤**
```bash
# æ¸…ç†å¹¶æ‰“åŒ…
mvn clean package

# è·³è¿‡æµ‹è¯•æ‰“åŒ…ï¼ˆå¼€å‘é˜¶æ®µï¼‰
mvn clean package -DskipTests

# æ‰“åŒ…ç»“æœ
target/
â”œâ”€â”€ my-app-1.0.jar           (å¯æ‰§è¡ŒJAR)  
â”œâ”€â”€ my-app-1.0.jar.original  (åŸå§‹JARï¼Œä¸å«ä¾èµ–)
â””â”€â”€ classes/                 (ç¼–è¯‘åçš„classæ–‡ä»¶)
```

### 5.3 Dockeræ”¯æŒ


**ğŸ³ Dockerfileç¤ºä¾‹**

```dockerfile
# ä½¿ç”¨å®˜æ–¹OpenJDKé•œåƒ
FROM openjdk:11-jre-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶JARæ–‡ä»¶
COPY target/my-app-1.0.jar app.jar

# æš´éœ²ç«¯å£
EXPOSE 8080

# è®¾ç½®JVMå‚æ•°å’Œå¯åŠ¨å‘½ä»¤
ENTRYPOINT ["java", "-Xmx512m", "-jar", "app.jar"]
```

**ğŸ“‹ æ„å»ºå’Œè¿è¡Œ**
```bash
# æ„å»ºDockeré•œåƒ
docker build -t my-app:1.0 .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 --name my-app my-app:1.0

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps
docker logs my-app
```

### 5.4 åˆ†å±‚JARä¼˜åŒ–


**âš¡ åˆ†å±‚æ„å»ºä¼˜åŒ–**

Spring Boot 2.3+æ”¯æŒåˆ†å±‚JARï¼Œå¯ä»¥ä¼˜åŒ–Dockeré•œåƒæ„å»ºï¼š

```dockerfile
# å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–
FROM openjdk:11-jre-slim as builder
WORKDIR /app
COPY target/my-app-1.0.jar app.jar
# æå–åˆ†å±‚ä¿¡æ¯
RUN java -Djarmode=layertools -jar app.jar extract

FROM openjdk:11-jre-slim
WORKDIR /app
# æŒ‰ä¾èµ–å±‚çº§å¤åˆ¶ï¼ˆä¼˜åŒ–ç¼“å­˜ï¼‰
COPY --from=builder app/dependencies/ ./
COPY --from=builder app/spring-boot-loader/ ./
COPY --from=builder app/snapshot-dependencies/ ./
COPY --from=builder app/application/ ./

ENTRYPOINT ["java", "org.springframework.boot.loader.JarLauncher"]
```

**ğŸ’¡ åˆ†å±‚ä¼˜åŠ¿**
```
åŸç†ï¼šDockerä½¿ç”¨åˆ†å±‚ç¼“å­˜æœºåˆ¶
â€¢ dependencieså±‚ï¼šç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå˜åŒ–å°‘ï¼Œç¼“å­˜å‘½ä¸­ç‡é«˜
â€¢ applicationå±‚ï¼šä¸šåŠ¡ä»£ç ï¼Œå˜åŒ–å¤šï¼Œåªé‡æ–°æ„å»ºè¿™ä¸€å±‚

æ•ˆæœï¼šé‡æ–°æ„å»ºé•œåƒæ—¶é—´ä»5åˆ†é’Ÿç¼©çŸ­åˆ°30ç§’ï¼
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ Spring Bootç”Ÿæ€æ ¸å¿ƒ**
```
Starter    â†’ å¼€ç®±å³ç”¨çš„åŠŸèƒ½å¥—è£…ï¼Œç®€åŒ–ä¾èµ–ç®¡ç†
DevTools   â†’ å¼€å‘æ•ˆç‡ç¥å™¨ï¼Œçƒ­é‡å¯å’Œå®æ—¶åˆ·æ–°  
Test       â†’ å®Œæ•´æµ‹è¯•ä½“ç³»ï¼Œä¿è¯ä»£ç è´¨é‡
Actuator   â†’ ç”Ÿäº§ç›‘æ§åˆ©å™¨ï¼Œåº”ç”¨å¥åº·çŠ¶å†µé€æ˜åŒ–
æ‰“åŒ…éƒ¨ç½²   â†’ å¯æ‰§è¡ŒJAR + Dockerï¼Œéƒ¨ç½²è¿ç»´ç®€å•åŒ–
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆSpring Bootå¦‚æ­¤å—æ¬¢è¿**
```
ä¼ ç»ŸSpringé¡¹ç›®ç—›ç‚¹ï¼š
â€¢ é…ç½®ç¹çï¼šXMLé…ç½®æ–‡ä»¶ä¸€å¤§å †
â€¢ ä¾èµ–å¤æ‚ï¼šç‰ˆæœ¬å†²çªç»å¸¸å‡ºç°  
â€¢ éƒ¨ç½²éº»çƒ¦ï¼šéœ€è¦å¤–éƒ¨Webå®¹å™¨
â€¢ ç›‘æ§å›°éš¾ï¼šç¼ºä¹æ ‡å‡†åŒ–ç›‘æ§æ–¹æ¡ˆ

Spring Bootè§£å†³æ–¹æ¡ˆï¼š
â€¢ çº¦å®šå¤§äºé…ç½®ï¼šé»˜è®¤é…ç½®è¦†ç›–90%åœºæ™¯
â€¢ Starteræœºåˆ¶ï¼šä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ
â€¢ å†…åµŒå®¹å™¨ï¼šæ‰“åŒ…å³å¯è¿è¡Œ
â€¢ Actuatorç›‘æ§ï¼šç”Ÿäº§çº§ç›‘æ§å¼€ç®±å³ç”¨
```

**ğŸ”¹ ç”Ÿæ€ååŒæ•ˆåº”**
```
å¼€å‘é˜¶æ®µï¼šDevToolsæå‡å¼€å‘æ•ˆç‡
æµ‹è¯•é˜¶æ®µï¼šSpring Boot Testä¿è¯è´¨é‡  
éƒ¨ç½²é˜¶æ®µï¼šå¯æ‰§è¡ŒJARç®€åŒ–éƒ¨ç½²
è¿ç»´é˜¶æ®µï¼šActuatoræä¾›ç›‘æ§èƒ½åŠ›

æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå½¢æˆé—­ç¯ï¼
```

### 6.3 æœ€ä½³å®è·µå»ºè®®


**âœ… å¼€å‘ç¯å¢ƒé…ç½®**
```properties
# å¼€å‘ç¯å¢ƒæ¨èé…ç½®
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
management.endpoints.web.exposure.include=*
logging.level.com.yourpackage=debug
```

**âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®**  
```properties
# ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®
spring.devtools.restart.enabled=false
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never
management.server.port=8081
```

**âœ… æµ‹è¯•ç­–ç•¥**
```
æµ‹è¯•åˆ†å±‚ï¼š
â€¢ å•å…ƒæµ‹è¯•ï¼šè¦†ç›–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆç›®æ ‡è¦†ç›–ç‡80%+ï¼‰
â€¢ é›†æˆæµ‹è¯•ï¼šéªŒè¯ç»„ä»¶åä½œï¼ˆä¸»è¦ä¸šåŠ¡æµç¨‹ï¼‰  
â€¢ E2Eæµ‹è¯•ï¼šä¿è¯å…³é”®ç”¨æˆ·åœºæ™¯ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

æµ‹è¯•ç¯å¢ƒéš”ç¦»ï¼š
â€¢ ä½¿ç”¨@TestPropertySourceé…ç½®æµ‹è¯•ä¸“ç”¨é…ç½®
â€¢ ä½¿ç”¨@MockBeanæ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–
â€¢ ä½¿ç”¨å†…å­˜æ•°æ®åº“H2è¿›è¡Œæ•°æ®åº“æµ‹è¯•
```

### 6.4 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¼ä¸šçº§åº”ç”¨åœºæ™¯**
- **å¾®æœåŠ¡æ¶æ„**ï¼šæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„Spring Bootåº”ç”¨
- **DevOpså®è·µ**ï¼šç»“åˆDockerå’ŒKuberneteså¿«é€Ÿéƒ¨ç½²
- **ç›‘æ§è¿ç»´**ï¼šActuator + Prometheus + Grafanaç›‘æ§ä½“ç³»
- **æ•æ·å¼€å‘**ï¼šDevTools + TeståŠ é€Ÿå¼€å‘æµ‹è¯•å‘¨æœŸ

**ğŸ”§ å­¦ä¹ æˆé•¿è·¯å¾„**
1. **å…¥é—¨é˜¶æ®µ**ï¼šç†Ÿç»ƒä½¿ç”¨å¸¸ç”¨Starterï¼ŒæŒæ¡åŸºæœ¬å¼€å‘æµç¨‹
2. **è¿›é˜¶é˜¶æ®µ**ï¼šæ·±å…¥ç†è§£è‡ªåŠ¨é…ç½®åŸç†ï¼Œèƒ½è‡ªå®šä¹‰Starter
3. **é«˜çº§é˜¶æ®µ**ï¼šæŒæ¡ç”Ÿäº§ç¯å¢ƒç›‘æ§è¿ç»´ï¼Œæ€§èƒ½è°ƒä¼˜
4. **ä¸“å®¶é˜¶æ®µ**ï¼šå‚ä¸Spring Bootæºç è´¡çŒ®ï¼ŒæŠ€æœ¯åˆ†äº«

**æ ¸å¿ƒè®°å¿†**ï¼š
- Spring Bootç”Ÿæ€è®©Javaå¼€å‘ä»"é…ç½®åœ°ç‹±"å˜æˆ"å¼€å‘å¤©å ‚"
- Starteræœºåˆ¶ä½“ç°äº†"çº¦å®šå¤§äºé…ç½®"çš„è®¾è®¡å“²å­¦
- DevToolsã€Testã€Actuatorå½¢æˆäº†å®Œæ•´çš„å¼€å‘è¿ç»´å·¥å…·é“¾
- å¯æ‰§è¡ŒJAR + Docker = ç°ä»£åŒ–Javaåº”ç”¨éƒ¨ç½²æ ‡å‡†