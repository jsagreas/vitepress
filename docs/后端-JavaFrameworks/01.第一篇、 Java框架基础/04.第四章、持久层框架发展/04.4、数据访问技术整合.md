---
title: 4ã€æ•°æ®è®¿é—®æŠ€æœ¯æ•´åˆ
---
## ğŸ“š ç›®å½•

1. [æ•°æ®è®¿é—®æŠ€æœ¯æ¦‚è¿°](#1-æ•°æ®è®¿é—®æŠ€æœ¯æ¦‚è¿°)
2. [Spring Data JPAè¯¦è§£](#2-spring-data-jpaè¯¦è§£)
3. [Spring Data MyBatisæ•´åˆ](#3-spring-data-mybatisæ•´åˆ)
4. [æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯](#4-æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯)
5. [æ•°æ®æºé…ç½®è¯¦è§£](#5-æ•°æ®æºé…ç½®è¯¦è§£)
6. [äº‹åŠ¡ä¼ æ’­æœºåˆ¶](#6-äº‹åŠ¡ä¼ æ’­æœºåˆ¶)
7. [å¤šæ•°æ®æºé…ç½®](#7-å¤šæ•°æ®æºé…ç½®)
8. [è¯»å†™åˆ†ç¦»å®ç°](#8-è¯»å†™åˆ†ç¦»å®ç°)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒŠ æ•°æ®è®¿é—®æŠ€æœ¯æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®è®¿é—®æŠ€æœ¯


**ç®€å•ç†è§£**ï¼šæ•°æ®è®¿é—®æŠ€æœ¯å°±åƒæ˜¯ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„"ç¿»è¯‘å®˜"ï¼Œå¸®åŠ©æˆ‘ä»¬çš„Javaç¨‹åºèƒ½å¤Ÿæ–¹ä¾¿åœ°å­˜å–æ•°æ®åº“ä¸­çš„ä¿¡æ¯ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆç—›è‹¦ï¼‰ï¼š
Javaç¨‹åº â†’ å†™å¤§é‡SQL â†’ JDBCåŸç”Ÿæ“ä½œ â†’ æ•°æ®åº“
é—®é¢˜ï¼šä»£ç ç¹çã€å®¹æ˜“å‡ºé”™ã€ç»´æŠ¤å›°éš¾

ç°ä»£æ–¹å¼ï¼ˆè½»æ¾ï¼‰ï¼š
Javaç¨‹åº â†’ Spring Data â†’ è‡ªåŠ¨å¤„ç† â†’ æ•°æ®åº“  
ä¼˜åŠ¿ï¼šä»£ç ç®€æ´ã€ä¸æ˜“å‡ºé”™ã€ç»´æŠ¤æ–¹ä¾¿
```

### 1.2 ä¸»æµæ•°æ®è®¿é—®æŠ€æœ¯å¯¹æ¯”


| æŠ€æœ¯ | **ç‰¹ç‚¹** | **é€‚ç”¨åœºæ™¯** | **å­¦ä¹ éš¾åº¦** |
|------|---------|-------------|-------------|
| ğŸ”¸ **Spring Data JPA** | `é¢å‘å¯¹è±¡ï¼Œè‡ªåŠ¨ç”ŸæˆSQL` | `å¿«é€Ÿå¼€å‘ï¼Œç®€å•æŸ¥è¯¢` | â­â­ ç®€å• |
| ğŸ”¸ **MyBatis** | `æ‰‹å†™SQLï¼Œçµæ´»æ§åˆ¶` | `å¤æ‚æŸ¥è¯¢ï¼Œæ€§èƒ½è¦æ±‚é«˜` | â­â­â­ ä¸­ç­‰ |
| ğŸ”¸ **Spring Data MyBatis** | `ç»“åˆä¸¤è€…ä¼˜åŠ¿` | `é¡¹ç›®éœ€è¦çµæ´»æ€§å’Œç®€æ´æ€§` | â­â­â­ ä¸­ç­‰ |

> ğŸ’¡ **æ–°æ‰‹å»ºè®®**ï¼šå…ˆå­¦Spring Data JPAï¼ŒæŒæ¡åŸºæœ¬æ¦‚å¿µåå†å­¦MyBatisï¼Œæœ€åäº†è§£å¦‚ä½•æ•´åˆä½¿ç”¨

---

## 2. ğŸ“Š Spring Data JPAè¯¦è§£


### 2.1 JPAæ˜¯ä»€ä¹ˆï¼Ÿé€šä¿—ç†è§£


**JPAå…¨ç§°**ï¼šJava Persistence APIï¼ˆJavaæŒä¹…åŒ–APIï¼‰

**é€šä¿—è§£é‡Š**ï¼š
- æƒ³è±¡ä½ æœ‰ä¸€ä¸ªç¬”è®°æœ¬ğŸ““ï¼Œä½ æƒ³æŠŠç¬”è®°å†…å®¹ä¿å­˜åˆ°ç”µè„‘é‡Œ
- ä¼ ç»Ÿæ–¹å¼ï¼šä½ éœ€è¦å­¦ä¼šå¦‚ä½•æ“ä½œæ–‡ä»¶ç³»ç»Ÿï¼Œå†™å¤æ‚çš„ä¿å­˜ä»£ç 
- JPAæ–¹å¼ï¼šä½ åªéœ€è¦è¯´"ä¿å­˜è¿™ä¸ªç¬”è®°"ï¼ŒJPAè‡ªåŠ¨å¸®ä½ å¤„ç†æ‰€æœ‰ç»†èŠ‚

```
ç°å®ä¾‹å­ï¼š
ä½ çš„Javaå¯¹è±¡ï¼ˆæ¯”å¦‚Userç”¨æˆ·ï¼‰ â†â†’ æ•°æ®åº“è¡¨ï¼ˆuserè¡¨ï¼‰
JPAå¸®ä½ è‡ªåŠ¨è½¬æ¢ï¼Œä½ ä¸ç”¨å†™SQLè¯­å¥ï¼
```

### 2.2 Spring Data JPAæ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ Entityï¼ˆå®ä½“ç±»ï¼‰**
```java
// è¿™å°±æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œå¯¹åº”æ•°æ®åº“çš„userè¡¨
@Entity  // å‘Šè¯‰JPAï¼šè¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“è¡¨å¯¹åº”çš„ç±»
public class User {
    @Id  // ä¸»é”®
    @GeneratedValue  // è‡ªåŠ¨ç”ŸæˆID
    private Long id;
    
    private String name;
    private String email;
    
    // getterå’Œsetteræ–¹æ³•...
}
```

**ğŸ”¸ Repositoryï¼ˆæ•°æ®ä»“åº“ï¼‰**
```java
// ç»§æ‰¿JpaRepositoryï¼Œè‡ªåŠ¨è·å¾—å¢åˆ æ”¹æŸ¥åŠŸèƒ½
public interface UserRepository extends JpaRepository<User, Long> {
    // ç¥å¥‡çš„åœ°æ–¹ï¼šä½ åªéœ€è¦æŒ‰è§„åˆ™å†™æ–¹æ³•åï¼ŒJPAè‡ªåŠ¨å®ç°ï¼
    List<User> findByName(String name);  // æ ¹æ®å§“åæŸ¥æ‰¾
    User findByEmail(String email);      // æ ¹æ®é‚®ç®±æŸ¥æ‰¾
}
```

### 2.3 å¸¸ç”¨æŸ¥è¯¢æ–¹æ³•å‘½åè§„åˆ™


```
ğŸ¯ å‘½åè§„åˆ™å¾ˆç®€å•ï¼Œå°±åƒè¯´è¯ä¸€æ ·ï¼š

find + By + å­—æ®µå + æ¡ä»¶
- findByName(String name)           â†’ æ ¹æ®å§“åæŸ¥æ‰¾
- findByNameAndAge(String, int)     â†’ æ ¹æ®å§“åå’Œå¹´é¾„æŸ¥æ‰¾  
- findByNameContaining(String)      â†’ å§“ååŒ…å«æŸä¸ªå…³é”®å­—
- findByAgeGreaterThan(int)         â†’ å¹´é¾„å¤§äºæŸä¸ªå€¼
- findByEmailIsNull()               â†’ é‚®ç®±ä¸ºç©ºçš„ç”¨æˆ·

å°±åƒè¯´ä¸­æ–‡ä¸€æ ·è‡ªç„¶ï¼
```

### 2.4 Spring Data JPAä¼˜ç¼ºç‚¹


**âœ… ä¼˜åŠ¿**ï¼š
- å¼€å‘é€Ÿåº¦å¿«ï¼Œå¾ˆå¤šåŠŸèƒ½è‡ªåŠ¨ç”Ÿæˆ
- ä»£ç ç®€æ´ï¼Œä¸éœ€è¦å†™SQL
- ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶å°±èƒ½å‘ç°é”™è¯¯
- æ”¯æŒåˆ†é¡µã€æ’åºç­‰å¸¸ç”¨åŠŸèƒ½

**âŒ å±€é™æ€§**ï¼š
- å¤æ‚æŸ¥è¯¢å†™èµ·æ¥éº»çƒ¦
- ç”Ÿæˆçš„SQLæœ‰æ—¶å€™æ€§èƒ½ä¸å¤Ÿå¥½
- å­¦ä¹ æ›²çº¿ï¼šéœ€è¦ç†è§£ORMæ€æƒ³

---

## 3. ğŸ”§ Spring Data MyBatisæ•´åˆ


### 3.1 MyBatisæ˜¯ä»€ä¹ˆï¼Ÿ


**é€šä¿—ç†è§£**ï¼šå¦‚æœè¯´JPAæ˜¯"è‡ªåŠ¨é©¾é©¶æ±½è½¦"ï¼Œé‚£MyBatiså°±æ˜¯"æ‰‹åŠ¨æ¡£æ±½è½¦"

```
JPAï¼šä½ è¯´"æˆ‘è¦å»åŒ—äº¬"ï¼Œç³»ç»Ÿè‡ªåŠ¨è§„åˆ’è·¯çº¿å¹¶é©¾é©¶
MyBatisï¼šä½ è‡ªå·±è§„åˆ’è·¯çº¿ï¼ˆå†™SQLï¼‰ï¼Œä½†ç³»ç»Ÿå¸®ä½ å¤„ç†é©¾é©¶ç»†èŠ‚

MyBatisè®©ä½ ï¼š
âœ… å®Œå…¨æ§åˆ¶SQLè¯­å¥ï¼ˆæƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™ï¼‰
âœ… ä¼˜åŒ–æ€§èƒ½ï¼ˆå¤æ‚æŸ¥è¯¢æ€§èƒ½æ›´å¥½ï¼‰
âœ… å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
```

### 3.2 MyBatisæ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ Mapperæ¥å£**
```java
@Mapper
public interface UserMapper {
    // æ–¹æ³•åå¯ä»¥éšæ„èµ·ï¼Œå…³é”®æ˜¯å¯¹åº”çš„SQL
    List<User> getAllUsers();
    User getUserById(Long id);
    void insertUser(User user);
}
```

**ğŸ”¸ XMLæ˜ å°„æ–‡ä»¶**
```xml
<!-- UserMapper.xml -->
<mapper namespace="com.example.mapper.UserMapper">
    <!-- è¿™é‡Œå†™çœŸæ­£çš„SQLè¯­å¥ -->
    <select id="getAllUsers" resultType="User">
        SELECT * FROM user
    </select>
    
    <select id="getUserById" parameterType="Long" resultType="User">
        SELECT * FROM user WHERE id = #{id}
    </select>
</mapper>
```

### 3.3 Spring Bootä¸­æ•´åˆMyBatis


**é…ç½®æ–‡ä»¶è®¾ç½®**ï¼š
```yaml
# application.yml
mybatis:
  mapper-locations: classpath:mapper/*.xml  # XMLæ–‡ä»¶ä½ç½®
  type-aliases-package: com.example.entity  # å®ä½“ç±»åŒ…å
  configuration:
    map-underscore-to-camel-case: true      # ä¸‹åˆ’çº¿è½¬é©¼å³°
```

### 3.4 JPA vs MyBatiså¯¹æ¯”å®ä¾‹


```java
// åŒæ ·çš„éœ€æ±‚ï¼šæŸ¥æ‰¾å¹´é¾„å¤§äº18å²çš„ç”¨æˆ·

// ğŸ”¸ JPAæ–¹å¼ï¼ˆè‡ªåŠ¨ï¼‰
public interface UserRepository extends JpaRepository<User, Long> {
    List<User> findByAgeGreaterThan(int age);  // å°±è¿™ä¸€è¡Œï¼
}

// ğŸ”¸ MyBatisæ–¹å¼ï¼ˆæ‰‹åŠ¨ï¼‰
@Mapper
public interface UserMapper {
    @Select("SELECT * FROM user WHERE age > #{age}")
    List<User> findUsersOlderThan(int age);
}

// æˆ–è€…åœ¨XMLä¸­å†™ï¼š
<select id="findUsersOlderThan" parameterType="int" resultType="User">
    SELECT id, name, email, age 
    FROM user 
    WHERE age > #{age}
    ORDER BY age DESC
</select>
```

---

## 4. ğŸŠâ€â™‚ï¸ æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯


### 4.1 ä»€ä¹ˆæ˜¯è¿æ¥æ± ï¼Ÿç”Ÿæ´»åŒ–ç†è§£


**ç”Ÿæ´»ä¾‹å­**ï¼š
```
æ²¡æœ‰è¿æ¥æ± ï¼š
å»é“¶è¡ŒåŠäº‹ â†’ æ¯æ¬¡éƒ½è¦é‡æ–°æ’é˜Ÿå–å· â†’ åŠå®Œä¸šåŠ¡å°±ç¦»å¼€
é—®é¢˜ï¼šæ¯æ¬¡éƒ½è¦ç­‰å¾…ï¼Œæ•ˆç‡ä½ä¸‹

æœ‰äº†è¿æ¥æ± ï¼š
é“¶è¡ŒVIPæœåŠ¡ â†’ æå‰å‡†å¤‡å¥½å‡ ä¸ªçª—å£ â†’ éšæ—¶å¯ä»¥åŠäº‹ â†’ åŠå®Œä¸å…³çª—å£
ä¼˜åŠ¿ï¼šä¸ç”¨æ¯æ¬¡æ’é˜Ÿï¼Œæ•ˆç‡å¤§å¤§æå‡
```

**æŠ€æœ¯è§£é‡Š**ï¼š
- **æ•°æ®åº“è¿æ¥**å°±åƒé“¶è¡Œçª—å£ï¼Œå»ºç«‹å’Œå…³é—­éƒ½éœ€è¦æ—¶é—´
- **è¿æ¥æ± **æå‰åˆ›å»ºå¥½å¤šä¸ªè¿æ¥ï¼Œéœ€è¦æ—¶ç›´æ¥ä½¿ç”¨
- ç”¨å®Œåæ”¾å›è¿æ¥æ± ï¼Œä¸æ˜¯çœŸæ­£å…³é—­è¿æ¥

### 4.2 ä¸»æµè¿æ¥æ± æŠ€æœ¯å¯¹æ¯”


| è¿æ¥æ±  | **æ€§èƒ½** | **åŠŸèƒ½** | **ä½¿ç”¨éš¾åº¦** | **æ¨èæŒ‡æ•°** |
|--------|---------|---------|-------------|-------------|
| ğŸ”¸ **HikariCP** | âš¡âš¡âš¡âš¡âš¡ | ğŸ”§ğŸ”§ğŸ”§ | â­â­ | â­â­â­â­â­ |
| ğŸ”¸ **Druid** | âš¡âš¡âš¡âš¡ | ğŸ”§ğŸ”§ğŸ”§ğŸ”§ğŸ”§ | â­â­â­ | â­â­â­â­ |
| ğŸ”¸ **C3P0** | âš¡âš¡âš¡ | ğŸ”§ğŸ”§ğŸ”§ | â­â­â­â­ | â­â­ |

> ğŸ’¡ **æ–°æ‰‹æ¨è**ï¼šSpring Booté»˜è®¤ä½¿ç”¨HikariCPï¼Œæ€§èƒ½æœ€å¥½ï¼Œé…ç½®ç®€å•

### 4.3 HikariCPé…ç½®è¯¦è§£


```yaml
# application.yml - HikariCPé…ç½®
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    hikari:
      # è¿æ¥æ± åŸºæœ¬é…ç½®
      minimum-idle: 5          # æœ€å°‘ä¿æŒ5ä¸ªè¿æ¥
      maximum-pool-size: 20    # æœ€å¤š20ä¸ªè¿æ¥
      idle-timeout: 300000     # è¿æ¥ç©ºé—²5åˆ†é’Ÿåå…³é—­
      max-lifetime: 1800000    # è¿æ¥æœ€é•¿ç”Ÿå­˜30åˆ†é’Ÿ
      
      # è¿æ¥æµ‹è¯•é…ç½®  
      connection-test-query: SELECT 1  # æµ‹è¯•è¿æ¥æ˜¯å¦æœ‰æ•ˆ
      validation-timeout: 3000         # æµ‹è¯•è¶…æ—¶æ—¶é—´3ç§’
```

**é…ç½®å‚æ•°é€šä¿—è§£é‡Š**ï¼š
- `minimum-idle`: æ¸¸æ³³æ± é‡Œæœ€å°‘è¦æœ‰å‡ ä¸ªæ•‘ç”Ÿå‘˜å¾…å‘½
- `maximum-pool-size`: æ¸¸æ³³æ± æœ€å¤šèƒ½å®¹çº³å‡ ä¸ªæ•‘ç”Ÿå‘˜
- `idle-timeout`: æ•‘ç”Ÿå‘˜é—²ç½®å¤šä¹…åå¯ä»¥ä¸‹ç­
- `max-lifetime`: æ•‘ç”Ÿå‘˜æœ€å¤šå·¥ä½œå¤šé•¿æ—¶é—´åå¿…é¡»è½®æ¢

### 4.4 Druidè¿æ¥æ± ç‰¹è‰²åŠŸèƒ½


```yaml
# Druidé…ç½®ç¤ºä¾‹
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      # åŸºç¡€é…ç½®
      initial-size: 5
      min-idle: 5  
      max-active: 20
      
      # ç›‘æ§é…ç½®ï¼ˆDruidçš„ç‰¹è‰²åŠŸèƒ½ï¼‰
      stat-view-servlet:
        enabled: true
        url-pattern: /druid/*     # ç›‘æ§é¡µé¢åœ°å€
        login-username: admin     # ç›‘æ§é¡µé¢ç”¨æˆ·å
        login-password: 123456    # ç›‘æ§é¡µé¢å¯†ç 
      
      # SQLç›‘æ§
      filter:
        stat:
          log-slow-sql: true      # è®°å½•æ…¢SQL
          slow-sql-millis: 2000   # è¶…è¿‡2ç§’ç®—æ…¢SQL
```

**Druidç‰¹è‰²åŠŸèƒ½**ï¼š
- ğŸ” **SQLç›‘æ§**ï¼šå¯ä»¥çœ‹åˆ°å“ªäº›SQLæ‰§è¡Œæœ€é¢‘ç¹ã€æœ€æ…¢
- ğŸ“Š **è¿æ¥æ± ç›‘æ§**ï¼šå®æ—¶æŸ¥çœ‹è¿æ¥æ± ä½¿ç”¨æƒ…å†µ
- ğŸ›¡ï¸ **é˜²ç«å¢™**ï¼šå¯ä»¥é˜²æ­¢SQLæ³¨å…¥æ”»å‡»
- ğŸ“ˆ **ç»Ÿè®¡æŠ¥å‘Š**ï¼šè¯¦ç»†çš„æ•°æ®åº“è®¿é—®ç»Ÿè®¡

---

## 5. âš™ï¸ æ•°æ®æºé…ç½®è¯¦è§£


### 5.1 ä»€ä¹ˆæ˜¯æ•°æ®æºï¼Ÿ


**ç®€å•ç†è§£**ï¼šæ•°æ®æºå°±æ˜¯å‘Šè¯‰ä½ çš„ç¨‹åº"æ•°æ®åº“åœ¨å“ªé‡Œï¼Œæ€ä¹ˆè¿æ¥"çš„é…ç½®ä¿¡æ¯

```
å°±åƒä½ è¦æ‰“ç”µè¯ç»™æœ‹å‹ï¼š
- ç”µè¯å·ç ï¼šæ•°æ®åº“åœ°å€å’Œç«¯å£
- èº«ä»½éªŒè¯ï¼šç”¨æˆ·åå’Œå¯†ç   
- é€šè¯æ–¹å¼ï¼šè¿æ¥æ± è®¾ç½®
```

### 5.2 åŸºç¡€æ•°æ®æºé…ç½®


```yaml
# application.yml - åŸºç¡€é…ç½®
spring:
  datasource:
    # æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆå¿…é¡»é…ç½®ï¼‰
    url: jdbc:mysql://localhost:3306/mydb?useUnicode=true&characterEncoding=utf8
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    
    # è¿æ¥æ± é…ç½®ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼ï¼‰
    hikari:
      connection-timeout: 30000    # è·å–è¿æ¥è¶…æ—¶æ—¶é—´
      idle-timeout: 600000         # è¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´
      max-lifetime: 1800000        # è¿æ¥æœ€å¤§ç”Ÿå­˜æ—¶é—´
      minimum-idle: 10             # æœ€å°ç©ºé—²è¿æ¥æ•°
      maximum-pool-size: 60        # æœ€å¤§è¿æ¥æ•°
```

### 5.3 ç”Ÿäº§ç¯å¢ƒé…ç½®å»ºè®®


**ğŸ”¸ å¼€å‘ç¯å¢ƒé…ç½®**ï¼ˆå®½æ¾ï¼‰ï¼š
```yaml
spring:
  datasource:
    hikari:
      minimum-idle: 5        # å¼€å‘æ—¶ç”¨æˆ·å°‘ï¼Œè¿æ¥æ•°å¯ä»¥å°‘
      maximum-pool-size: 10  # æœ€å¤§è¿æ¥æ•°ä¹Ÿä¸ç”¨å¤ªå¤š
      idle-timeout: 300000   # ç©ºé—²æ—¶é—´çŸ­ä¸€ç‚¹ï¼ŒèŠ‚çœèµ„æº
```

**ğŸ”¸ ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼ˆä¸¥æ ¼ï¼‰ï¼š
```yaml
spring:
  datasource:
    hikari:
      minimum-idle: 20       # ç”Ÿäº§ç¯å¢ƒç”¨æˆ·å¤šï¼Œä¿æŒæ›´å¤šè¿æ¥
      maximum-pool-size: 100 # é«˜å³°æœŸéœ€è¦æ›´å¤šè¿æ¥
      idle-timeout: 600000   # ç©ºé—²æ—¶é—´é•¿ä¸€ç‚¹ï¼Œé¿å…é¢‘ç¹åˆ›å»ºè¿æ¥
      leak-detection-threshold: 60000  # è¿æ¥æ³„éœ²æ£€æµ‹
```

### 5.4 é…ç½®éªŒè¯å’Œç›‘æ§


```java
// æ£€æŸ¥æ•°æ®æºé…ç½®æ˜¯å¦æ­£ç¡®
@Component
public class DataSourceHealthCheck {
    
    @Autowired
    private DataSource dataSource;
    
    @PostConstruct
    public void checkDataSource() {
        try {
            Connection connection = dataSource.getConnection();
            System.out.println("âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼");
            connection.close();
        } catch (SQLException e) {
            System.out.println("âŒ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š" + e.getMessage());
        }
    }
}
```

---

## 6. ğŸ”„ äº‹åŠ¡ä¼ æ’­æœºåˆ¶


### 6.1 ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿç”Ÿæ´»åŒ–ç†è§£


**ç”Ÿæ´»ä¾‹å­**ï¼šç½‘ä¸Šè´­ç‰©
```
äº‹åŠ¡å°±åƒä¸€æ¬¡å®Œæ•´çš„è´­ç‰©è¿‡ç¨‹ï¼š
1ï¸âƒ£ é€‰æ‹©å•†å“å¹¶åŠ å…¥è´­ç‰©è½¦
2ï¸âƒ£ å¡«å†™æ”¶è´§åœ°å€  
3ï¸âƒ£ é€‰æ‹©æ”¯ä»˜æ–¹å¼
4ï¸âƒ£ ç¡®è®¤ä»˜æ¬¾

è¦ä¹ˆå…¨éƒ¨æˆåŠŸ âœ… â†’ è´­ç‰©å®Œæˆ
è¦ä¹ˆå…¨éƒ¨å–æ¶ˆ âŒ â†’ å›åˆ°æœ€åˆçŠ¶æ€ï¼ˆè´­ç‰©è½¦æ¸…ç©ºï¼Œé’±æ²¡æ‰£ï¼‰

ä¸èƒ½å‡ºç°ï¼šé’±æ‰£äº†ä½†å•†å“æ²¡å‘è´§ æˆ– å•†å“å‘äº†ä½†é’±æ²¡æ‰£
```

### 6.2 äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼ˆACIDï¼‰


| ç‰¹æ€§ | **ä¸­æ–‡å** | **é€šä¿—è§£é‡Š** | **ä¾‹å­** |
|------|-----------|-------------|---------|
| ğŸ”¸ **A** | `åŸå­æ€§(Atomicity)` | è¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åš | è½¬è´¦ï¼šæ‰£é’±å’ŒåŠ é’±å¿…é¡»åŒæ—¶æˆåŠŸ |
| ğŸ”¸ **C** | `ä¸€è‡´æ€§(Consistency)` | æ•°æ®ä¿æŒé€»è¾‘æ­£ç¡® | è½¬è´¦å‰åæ€»é‡‘é¢ä¸å˜ |
| ğŸ”¸ **I** | `éš”ç¦»æ€§(Isolation)` | ä¸åŒäº‹åŠ¡äº’ä¸å¹²æ‰° | ä½ è½¬è´¦æ—¶åˆ«äººçœ‹ä¸åˆ°ä¸­é—´çŠ¶æ€ |
| ğŸ”¸ **D** | `æŒä¹…æ€§(Durability)` | æˆåŠŸåæ•°æ®æ°¸ä¹…ä¿å­˜ | è½¬è´¦å®Œæˆåæ–­ç”µä¹Ÿä¸ä¼šä¸¢å¤± |

### 6.3 äº‹åŠ¡ä¼ æ’­æœºåˆ¶è¯¦è§£


**ğŸ”¸ REQUIREDï¼ˆé»˜è®¤ï¼‰- æœ€å¸¸ç”¨**
```java
@Transactional(propagation = Propagation.REQUIRED)
public void methodA() {
    // å¦‚æœå·²ç»æœ‰äº‹åŠ¡ï¼Œå°±åŠ å…¥ç°æœ‰äº‹åŠ¡
    // å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºæ–°äº‹åŠ¡
    methodB();  // Bæ–¹æ³•ä¼šåŠ å…¥Açš„äº‹åŠ¡
}

// é€šä¿—ç†è§£ï¼šæ­é¡ºé£è½¦
// æœ‰è½¦å°±ä¸Šè½¦ï¼Œæ²¡è½¦å°±è‡ªå·±å¼€è½¦
```

**ğŸ”¸ REQUIRES_NEW - ç‹¬ç«‹äº‹åŠ¡**
```java
@Transactional(propagation = Propagation.REQUIRES_NEW)  
public void methodB() {
    // æ— è®ºå¦‚ä½•éƒ½åˆ›å»ºæ–°äº‹åŠ¡
    // æš‚åœå½“å‰äº‹åŠ¡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
}

// é€šä¿—ç†è§£ï¼šä¸€å®šè¦è‡ªå·±å¼€è½¦
// å³ä½¿åˆ«äººæœ‰è½¦ä¹Ÿä¸åï¼Œå¿…é¡»è‡ªå·±å¼€
```

**ğŸ”¸ SUPPORTS - éšé‡è€Œå®‰**
```java
@Transactional(propagation = Propagation.SUPPORTS)
public void methodC() {
    // æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡äº‹åŠ¡å°±ä¸ç”¨äº‹åŠ¡
}

// é€šä¿—ç†è§£ï¼šä½›ç³»æ€åº¦  
// æœ‰è½¦å°±åè½¦ï¼Œæ²¡è½¦å°±èµ°è·¯ï¼Œéƒ½è¡Œ
```

### 6.4 äº‹åŠ¡ä¼ æ’­åœºæ™¯å®ä¾‹


```java
@Service
public class OrderService {
    
    @Autowired
    private PaymentService paymentService;
    
    // ä¸‹å•æ–¹æ³• - ä¸»äº‹åŠ¡
    @Transactional
    public void createOrder(Order order) {
        // 1. ä¿å­˜è®¢å•ä¿¡æ¯
        orderRepository.save(order);
        
        // 2. è°ƒç”¨æ”¯ä»˜æœåŠ¡ï¼ˆä¼šåŠ å…¥å½“å‰äº‹åŠ¡ï¼‰
        paymentService.processPayment(order.getAmount());
        
        // 3. æ›´æ–°åº“å­˜
        inventoryService.reduceStock(order.getProductId());
        
        // å¦‚æœä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œæ•´ä¸ªè®¢å•éƒ½ä¼šå›æ»š
    }
}

@Service  
public class PaymentService {
    
    // æ”¯ä»˜å¤„ç† - åŠ å…¥è°ƒç”¨è€…çš„äº‹åŠ¡
    @Transactional(propagation = Propagation.REQUIRED)
    public void processPayment(BigDecimal amount) {
        // å¤„ç†æ”¯ä»˜é€»è¾‘
        // å¦‚æœæ”¯ä»˜å¤±è´¥ï¼Œä¼šå¯¼è‡´æ•´ä¸ªè®¢å•å›æ»š
    }
    
    // è®°å½•æ”¯ä»˜æ—¥å¿— - ç‹¬ç«‹äº‹åŠ¡
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void logPayment(PaymentLog log) {
        // æ— è®ºè®¢å•æ˜¯å¦æˆåŠŸï¼Œéƒ½è¦è®°å½•æ”¯ä»˜å°è¯•
        // å³ä½¿è®¢å•å›æ»šï¼Œæ—¥å¿—ä¹Ÿä¼šä¿å­˜
    }
}
```

---

## 7. ğŸ”€ å¤šæ•°æ®æºé…ç½®


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šæ•°æ®æºï¼Ÿ


**å¸¸è§åœºæ™¯**ï¼š
```
ğŸ”¸ è¯»å†™åˆ†ç¦»ï¼šä¸»åº“å†™æ•°æ®ï¼Œä»åº“è¯»æ•°æ®ï¼ˆæé«˜æ€§èƒ½ï¼‰
ğŸ”¸ ä¸šåŠ¡åˆ†ç¦»ï¼šç”¨æˆ·æ•°æ®åº“ + å•†å“æ•°æ®åº“ + æ—¥å¿—æ•°æ®åº“
ğŸ”¸ æ–°è€ç³»ç»Ÿï¼šæ–°ç³»ç»Ÿç”¨MySQLï¼Œè€ç³»ç»Ÿè¿˜æ˜¯Oracle
ğŸ”¸ å¾®æœåŠ¡ï¼šæ¯ä¸ªæœåŠ¡æœ‰è‡ªå·±çš„æ•°æ®åº“
```

**ç”Ÿæ´»ä¾‹å­**ï¼š
```
å°±åƒä¸€ä¸ªå¤§å…¬å¸ï¼š
- è´¢åŠ¡éƒ¨é—¨ç”¨è´¢åŠ¡ç³»ç»Ÿæ•°æ®åº“ ğŸ’°
- äººäº‹éƒ¨é—¨ç”¨äººäº‹ç³»ç»Ÿæ•°æ®åº“ ğŸ‘¥  
- é”€å”®éƒ¨é—¨ç”¨CRMæ•°æ®åº“ ğŸ“Š
- å„éƒ¨é—¨æ•°æ®åˆ†å¼€ç®¡ç†ï¼Œä½†éƒ½èƒ½è®¿é—®
```

### 7.2 å¤šæ•°æ®æºé…ç½®å®ç°


**ğŸ”¸ é…ç½®æ–‡ä»¶è®¾ç½®**ï¼š
```yaml
# application.yml
spring:
  datasource:
    # ä¸»æ•°æ®æºï¼ˆç”¨æˆ·æ•°æ®ï¼‰
    primary:
      url: jdbc:mysql://localhost:3306/user_db
      username: root
      password: 123456
      driver-class-name: com.mysql.cj.jdbc.Driver
      
    # ä»æ•°æ®æºï¼ˆå•†å“æ•°æ®ï¼‰  
    secondary:
      url: jdbc:mysql://localhost:3306/product_db
      username: root
      password: 123456
      driver-class-name: com.mysql.cj.jdbc.Driver
```

**ğŸ”¸ æ•°æ®æºé…ç½®ç±»**ï¼š
```java
@Configuration
public class DataSourceConfig {
    
    // ä¸»æ•°æ®æº
    @Bean
    @Primary  // é»˜è®¤æ•°æ®æº
    @ConfigurationProperties("spring.datasource.primary")
    public DataSource primaryDataSource() {
        return DruidDataSourceBuilder.create().build();
    }
    
    // ä»æ•°æ®æº
    @Bean
    @ConfigurationProperties("spring.datasource.secondary")  
    public DataSource secondaryDataSource() {
        return DruidDataSourceBuilder.create().build();
    }
}
```

### 7.3 ä¸åŒæ•°æ®æºçš„ä½¿ç”¨æ–¹æ³•


**ğŸ”¸ æ–¹æ³•ä¸€ï¼šä¸åŒçš„Repository**
```java
// ç”¨æˆ·æ•°æ®è®¿é—®ï¼ˆä½¿ç”¨ä¸»æ•°æ®æºï¼‰
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    // è‡ªåŠ¨ä½¿ç”¨primaryæ•°æ®æº
}

// å•†å“æ•°æ®è®¿é—®ï¼ˆä½¿ç”¨ä»æ•°æ®æºï¼‰
@Repository  
@Qualifier("secondary")
public interface ProductRepository extends JpaRepository<Product, Long> {
    // ä½¿ç”¨secondaryæ•°æ®æº
}
```

**ğŸ”¸ æ–¹æ³•äºŒï¼šåŠ¨æ€æ•°æ®æºåˆ‡æ¢**
```java
// è‡ªå®šä¹‰æ³¨è§£
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface DataSource {
    String value() default "primary";
}

// ä½¿ç”¨æ³¨è§£åˆ‡æ¢æ•°æ®æº
@Service
public class BusinessService {
    
    @DataSource("primary")  // ä½¿ç”¨ä¸»æ•°æ®æº
    public User getUser(Long id) {
        return userRepository.findById(id);
    }
    
    @DataSource("secondary")  // ä½¿ç”¨ä»æ•°æ®æº
    public Product getProduct(Long id) {
        return productRepository.findById(id);
    }
}
```

### 7.4 å¤šæ•°æ®æºæ³¨æ„äº‹é¡¹


**âš ï¸ é‡è¦æé†’**ï¼š
```
ğŸ”¸ äº‹åŠ¡ç®¡ç†ï¼šä¸åŒæ•°æ®æºçš„äº‹åŠ¡æ˜¯ç‹¬ç«‹çš„
   - ä¸èƒ½åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ“ä½œå¤šä¸ªæ•°æ®æº
   - éœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡æ‰èƒ½ä¿è¯ä¸€è‡´æ€§

ğŸ”¸ æ€§èƒ½è€ƒè™‘ï¼š
   - è¿æ¥æ± é…ç½®è¦åˆ†åˆ«ä¼˜åŒ–
   - é¿å…é¢‘ç¹åˆ‡æ¢æ•°æ®æº

ğŸ”¸ é…ç½®å¤æ‚åº¦ï¼š
   - é…ç½®æ–‡ä»¶ä¼šæ¯”è¾ƒå¤æ‚
   - éœ€è¦ä»”ç»†æµ‹è¯•å„ç§åœºæ™¯
```

---

## 8. ğŸ“– è¯»å†™åˆ†ç¦»å®ç°


### 8.1 ä»€ä¹ˆæ˜¯è¯»å†™åˆ†ç¦»ï¼Ÿ


**ç®€å•ç†è§£**ï¼šå°±åƒå›¾ä¹¦é¦†çš„ç®¡ç†æ–¹å¼
```
ğŸ“ å†™æ“ä½œï¼ˆå€Ÿä¹¦ã€è¿˜ä¹¦ï¼‰â†’ ä¸»æœåŠ¡å°ï¼ˆä¸»åº“ï¼‰
   - æ‰€æœ‰æ•°æ®ä¿®æ”¹éƒ½åœ¨è¿™é‡Œè¿›è¡Œ
   - ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§

ğŸ“š è¯»æ“ä½œï¼ˆæŸ¥é˜…ã€æµè§ˆï¼‰â†’ é˜…è§ˆå®¤ï¼ˆä»åº“ï¼‰  
   - æŸ¥è¯¢æ“ä½œåˆ†æ•£åˆ°å¤šä¸ªåœ°æ–¹
   - å‡è½»ä¸»æœåŠ¡å°çš„å‹åŠ›ï¼Œæé«˜æ•ˆç‡
```

### 8.2 è¯»å†™åˆ†ç¦»çš„å¥½å¤„


**ğŸ¯ æ€§èƒ½æå‡**ï¼š
```
å•æ•°æ®åº“æ¨¡å¼ï¼š
100ä¸ªç”¨æˆ· â†’ 1ä¸ªæ•°æ®åº“ â†’ å¤„ç†é€Ÿåº¦æ…¢ ğŸ˜«

è¯»å†™åˆ†ç¦»æ¨¡å¼ï¼š  
100ä¸ªç”¨æˆ· â†’ å†™æ“ä½œ(20%) â†’ ä¸»åº“
          â†’ è¯»æ“ä½œ(80%) â†’ ä»åº“1ã€ä»åº“2ã€ä»åº“3
ç»“æœï¼šæ¯ä¸ªæ•°æ®åº“å‹åŠ›å‡å°ï¼Œæ•´ä½“æ€§èƒ½æå‡ ğŸš€
```

**ğŸ›¡ï¸ å¯ç”¨æ€§æå‡**ï¼š
- ä¸»åº“å‡ºé—®é¢˜ï¼Œä»åº“è¿˜èƒ½æä¾›æŸ¥è¯¢æœåŠ¡
- ä»åº“å‡ºé—®é¢˜ï¼Œå…¶ä»–ä»åº“ç»§ç»­å·¥ä½œ
- æ•´ä¸ªç³»ç»Ÿä¸ä¼šå› ä¸ºä¸€å°æœºå™¨æ•…éšœå°±åœæ­¢æœåŠ¡

### 8.3 è¯»å†™åˆ†ç¦»å®ç°æ–¹æ¡ˆ


**ğŸ”¸ æ–¹æ³•ä¸€ï¼šæ³¨è§£æ–¹å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰**
```java
// è‡ªå®šä¹‰è¯»å†™åˆ†ç¦»æ³¨è§£
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface ReadOnly {
}

// æœåŠ¡å±‚ä½¿ç”¨
@Service
public class UserService {
    
    // å†™æ“ä½œ - è‡ªåŠ¨ä½¿ç”¨ä¸»åº“
    @Transactional
    public User saveUser(User user) {
        return userRepository.save(user);
    }
    
    // è¯»æ“ä½œ - è‡ªåŠ¨ä½¿ç”¨ä»åº“  
    @ReadOnly
    public User getUserById(Long id) {
        return userRepository.findById(id).orElse(null);
    }
    
    @ReadOnly
    public List<User> getAllUsers() {
        return userRepository.findAll();
    }
}
```

**ğŸ”¸ æ–¹æ³•äºŒï¼šAOPæ‹¦æˆª**
```java
@Component
@Aspect
public class ReadWriteSplitAspect {
    
    // æ‹¦æˆªæ‰€æœ‰å¸¦@ReadOnlyæ³¨è§£çš„æ–¹æ³•
    @Before("@annotation(readOnly)")
    public void setReadOnlyDataSource(ReadOnly readOnly) {
        // åˆ‡æ¢åˆ°ä»åº“
        DataSourceContextHolder.setDataSourceType("slave");
    }
    
    // æ‹¦æˆªæ‰€æœ‰å¸¦@Transactionalæ³¨è§£çš„æ–¹æ³•  
    @Before("@annotation(org.springframework.transaction.annotation.Transactional)")
    public void setWriteDataSource() {
        // åˆ‡æ¢åˆ°ä¸»åº“
        DataSourceContextHolder.setDataSourceType("master");
    }
}
```

### 8.4 è¯»å†™åˆ†ç¦»é…ç½®å®ä¾‹


```yaml
# application.yml - è¯»å†™åˆ†ç¦»é…ç½®
spring:
  datasource:
    # ä¸»åº“é…ç½®ï¼ˆå†™æ“ä½œï¼‰
    master:
      url: jdbc:mysql://192.168.1.100:3306/mydb
      username: root
      password: 123456
      
    # ä»åº“é…ç½®ï¼ˆè¯»æ“ä½œï¼‰
    slave:
      url: jdbc:mysql://192.168.1.101:3306/mydb  # ä¸åŒIP
      username: readonly  # åªè¯»ç”¨æˆ·
      password: 123456
```

**åŠ¨æ€æ•°æ®æºè·¯ç”±**ï¼š
```java
@Component
public class DynamicDataSource extends AbstractRoutingDataSource {
    
    @Override
    protected Object determineCurrentLookupKey() {
        // æ ¹æ®çº¿ç¨‹å˜é‡å†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®æº
        return DataSourceContextHolder.getDataSourceType();
    }
}

// æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†
public class DataSourceContextHolder {
    private static final ThreadLocal<String> CONTEXT_HOLDER = new ThreadLocal<>();
    
    public static void setDataSourceType(String dataSourceType) {
        CONTEXT_HOLDER.set(dataSourceType);
    }
    
    public static String getDataSourceType() {
        return CONTEXT_HOLDER.get();
    }
    
    public static void clearDataSourceType() {
        CONTEXT_HOLDER.remove();
    }
}
```

### 8.5 è¯»å†™åˆ†ç¦»æ³¨æ„äº‹é¡¹


**âš ï¸ æ•°æ®ä¸€è‡´æ€§é—®é¢˜**ï¼š
```
é—®é¢˜åœºæ™¯ï¼š
1ï¸âƒ£ ç”¨æˆ·åœ¨ä¸»åº“æ›´æ–°äº†ä¸ªäººä¿¡æ¯
2ï¸âƒ£ ç«‹å³æŸ¥è¯¢ä¸ªäººä¿¡æ¯ï¼ˆè¯»ä»åº“ï¼‰
3ï¸âƒ£ ç”±äºä¸»ä»å»¶è¿Ÿï¼Œå¯èƒ½çœ‹åˆ°æ—§æ•°æ®

è§£å†³æ–¹æ¡ˆï¼š
ğŸ”¸ å¼ºåˆ¶è¯»ä¸»åº“ï¼šé‡è¦æ“ä½œåçŸ­æ—¶é—´å†…è¯»ä¸»åº“
ğŸ”¸ å»¶è¿ŸæŸ¥è¯¢ï¼šç­‰å¾…å‡ ç§’åå†æŸ¥è¯¢
ğŸ”¸ ç¼“å­˜ç­–ç•¥ï¼šç”¨Redisç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢
```

**ğŸ“Š æ€§èƒ½ç›‘æ§**ï¼š
```java
// ç›‘æ§è¯»å†™åˆ†ç¦»æ•ˆæœ
@Component
public class DataSourceMonitor {
    private AtomicLong masterCount = new AtomicLong(0);
    private AtomicLong slaveCount = new AtomicLong(0);
    
    public void recordMasterAccess() {
        masterCount.incrementAndGet();
    }
    
    public void recordSlaveAccess() {
        slaveCount.incrementAndGet();
    }
    
    // å®šæ—¶è¾“å‡ºç»Ÿè®¡ä¿¡æ¯
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿè¾“å‡ºä¸€æ¬¡
    public void printStats() {
        long master = masterCount.get();
        long slave = slaveCount.get();
        double readRatio = (double) slave / (master + slave) * 100;
        
        System.out.printf("è¯»å†™åˆ†ç¦»ç»Ÿè®¡ - ä¸»åº“è®¿é—®: %d, ä»åº“è®¿é—®: %d, è¯»æ¯”ä¾‹: %.1f%%\n", 
                         master, slave, readRatio);
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Spring Data JPAï¼šé¢å‘å¯¹è±¡çš„æ•°æ®è®¿é—®ï¼Œè‡ªåŠ¨ç”ŸæˆSQL
ğŸ”¸ MyBatisï¼šæ‰‹å†™SQLçš„çµæ´»æ•°æ®è®¿é—®æ¡†æ¶
ğŸ”¸ è¿æ¥æ± ï¼šæå‰å‡†å¤‡æ•°æ®åº“è¿æ¥ï¼Œæé«˜è®¿é—®æ•ˆç‡
ğŸ”¸ æ•°æ®æºï¼šæ•°æ®åº“è¿æ¥çš„é…ç½®ä¿¡æ¯
ğŸ”¸ äº‹åŠ¡ä¼ æ’­ï¼šå¤šä¸ªæ–¹æ³•é—´äº‹åŠ¡çš„åè°ƒæœºåˆ¶
ğŸ”¸ å¤šæ•°æ®æºï¼šä¸€ä¸ªåº”ç”¨è¿æ¥å¤šä¸ªæ•°æ®åº“
ğŸ”¸ è¯»å†™åˆ†ç¦»ï¼šå†™ä¸»åº“è¯»ä»åº“ï¼Œæé«˜æ€§èƒ½å’Œå¯ç”¨æ€§
```

### 9.2 æŠ€æœ¯é€‰å‹å»ºè®®


**ğŸ¯ æ–°æ‰‹å­¦ä¹ è·¯å¾„**ï¼š
```
ç¬¬1æ­¥ï¼šæŒæ¡Spring Data JPAåŸºç¡€ â­â­
ç¬¬2æ­¥ï¼šç†è§£æ•°æ®åº“è¿æ¥æ± æ¦‚å¿µ â­â­  
ç¬¬3æ­¥ï¼šå­¦ä¼šåŸºç¡€æ•°æ®æºé…ç½® â­â­
ç¬¬4æ­¥ï¼šäº†è§£äº‹åŠ¡çš„åŸºæœ¬ç”¨æ³• â­â­â­
ç¬¬5æ­¥ï¼šå­¦ä¹ MyBatiså¤„ç†å¤æ‚æŸ¥è¯¢ â­â­â­
ç¬¬6æ­¥ï¼šæŒæ¡å¤šæ•°æ®æºé…ç½® â­â­â­â­
ç¬¬7æ­¥ï¼šå®ç°è¯»å†™åˆ†ç¦» â­â­â­â­â­
```

**ğŸ› ï¸ é¡¹ç›®å®è·µå»ºè®®**ï¼š

| é¡¹ç›®è§„æ¨¡ | **æ•°æ®è®¿é—®æŠ€æœ¯** | **è¿æ¥æ± ** | **æ˜¯å¦éœ€è¦å¤šæ•°æ®æº** |
|---------|-----------------|-----------|-------------------|
| ğŸ”¸ **å°é¡¹ç›®**ï¼ˆ<1ä¸‡ç”¨æˆ·ï¼‰ | `Spring Data JPA` | `HikariCP` | âŒ å•æ•°æ®æºå³å¯ |
| ğŸ”¸ **ä¸­å‹é¡¹ç›®**ï¼ˆ1-10ä¸‡ç”¨æˆ·ï¼‰ | `JPA + MyBatis` | `HikariCP` | âœ… è€ƒè™‘è¯»å†™åˆ†ç¦» |
| ğŸ”¸ **å¤§å‹é¡¹ç›®**ï¼ˆ>10ä¸‡ç”¨æˆ·ï¼‰ | `MyBatisä¸ºä¸»` | `Druid+ç›‘æ§` | âœ… å¿…é¡»å¤šæ•°æ®æº |

### 9.3 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


**â“ é—®é¢˜1ï¼šJPAè‡ªåŠ¨ç”Ÿæˆçš„SQLæ€§èƒ½ä¸å¥½æ€ä¹ˆåŠï¼Ÿ**
```
è§£å†³æ–¹æ¡ˆï¼š
âœ… ç®€å•æŸ¥è¯¢ç”¨JPAï¼Œå¤æ‚æŸ¥è¯¢ç”¨MyBatis
âœ… ä½¿ç”¨@Queryæ³¨è§£å†™è‡ªå®šä¹‰SQL
âœ… ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•å’Œè¡¨ç»“æ„
```

**â“ é—®é¢˜2ï¼šå¤šæ•°æ®æºé…ç½®å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™**
```
è§£å†³æ–¹æ¡ˆï¼š  
âœ… ä»å•æ•°æ®æºå¼€å§‹ï¼Œé€æ­¥æ·»åŠ å¤æ‚åº¦
âœ… ä½¿ç”¨é…ç½®ç±»é›†ä¸­ç®¡ç†æ•°æ®æº
âœ… å……åˆ†æµ‹è¯•å„ç§æ•°æ®æºåˆ‡æ¢åœºæ™¯
```

**â“ é—®é¢˜3ï¼šè¯»å†™åˆ†ç¦»åæ•°æ®ä¸ä¸€è‡´**
```
è§£å†³æ–¹æ¡ˆï¼š
âœ… é‡è¦æ“ä½œåçŸ­æ—¶é—´å†…è¯»ä¸»åº“
âœ… ä½¿ç”¨ç¼“å­˜å‡å°‘å¯¹æ•°æ®åº“çš„ä¾èµ–  
âœ… ç›‘æ§ä¸»ä»å»¶è¿Ÿï¼ŒåŠæ—¶å¤„ç†åŒæ­¥é—®é¢˜
```

### 9.4 æœ€ä½³å®è·µæ€»ç»“


**ğŸ’¡ å¼€å‘å»ºè®®**ï¼š
- ğŸ¯ **å…ˆç®€å•åå¤æ‚**ï¼šä»å•æ•°æ®æºJPAå¼€å§‹ï¼Œé€æ­¥å¼•å…¥å¤æ‚ç‰¹æ€§
- ğŸ” **æ€§èƒ½ç›‘æ§**ï¼šä½¿ç”¨Druidç­‰å·¥å…·ç›‘æ§SQLæ‰§è¡Œæƒ…å†µ
- ğŸ›¡ï¸ **å¼‚å¸¸å¤„ç†**ï¼šæ•°æ®åº“æ“ä½œè¦åšå¥½å¼‚å¸¸å¤„ç†å’Œäº‹åŠ¡å›æ»š
- ğŸ“ **æ–‡æ¡£è®°å½•**ï¼šå¤šæ•°æ®æºé…ç½®è¦æœ‰æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜

**ğŸš€ æ€§èƒ½ä¼˜åŒ–**ï¼š
- âš¡ è¿æ¥æ± å‚æ•°æ ¹æ®å®é™…è´Ÿè½½è°ƒæ•´
- ğŸ“Š å®šæœŸåˆ†ææ…¢SQLå¹¶ä¼˜åŒ–
- ğŸ’¾ åˆç†ä½¿ç”¨ç¼“å­˜å‡å°‘æ•°æ®åº“è®¿é—®
- ğŸ”„ è¯»å†™åˆ†ç¦»æé«˜å¹¶å‘å¤„ç†èƒ½åŠ›

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- JPAç®€å•å¿«é€Ÿä¸Šæ‰‹ç”¨ï¼Œå¤æ‚æŸ¥è¯¢MyBatisåŠ©
- è¿æ¥æ± åƒé“¶è¡Œçª—å£ï¼Œæå‰å‡†å¤‡æ•ˆç‡é«˜
- äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´ï¼Œä¼ æ’­æœºåˆ¶è¦ç†è§£  
- å¤šæ•°æ®æºæŒ‰éœ€é…ç½®ï¼Œè¯»å†™åˆ†ç¦»æ€§èƒ½ä¼˜