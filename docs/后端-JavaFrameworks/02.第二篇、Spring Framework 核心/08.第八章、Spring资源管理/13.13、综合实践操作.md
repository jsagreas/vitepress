---
title: 13ã€ç»¼åˆå®è·µæ“ä½œ
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Springï¼Ÿä¸ºä»€ä¹ˆè¦å­¦å®ƒï¼Ÿ](#1-ä»€ä¹ˆæ˜¯springä¸ºä»€ä¹ˆè¦å­¦å®ƒ)
2. [Springæ ¸å¿ƒæ€æƒ³ï¼šæ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥](#2-springæ ¸å¿ƒæ€æƒ³æ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥)
3. [Springå®¹å™¨ï¼šç®¡ç†å¯¹è±¡çš„å¤§ç®¡å®¶](#3-springå®¹å™¨ç®¡ç†å¯¹è±¡çš„å¤§ç®¡å®¶)
4. [é…ç½®æ–¹å¼æ¼”è¿›ï¼šä»XMLåˆ°æ³¨è§£åˆ°çº¯Java](#4-é…ç½®æ–¹å¼æ¼”è¿›ä»xmlåˆ°æ³¨è§£åˆ°çº¯java)
5. [Beanç”Ÿå‘½å‘¨æœŸï¼šå¯¹è±¡ä»å‡ºç”Ÿåˆ°æ­»äº¡çš„è¿‡ç¨‹](#5-beanç”Ÿå‘½å‘¨æœŸå¯¹è±¡ä»å‡ºç”Ÿåˆ°æ­»äº¡çš„è¿‡ç¨‹)
6. [é¢å‘åˆ‡é¢ç¼–ç¨‹AOPï¼šåœ¨ä¸æ”¹ä»£ç çš„æƒ…å†µä¸‹å¢åŠ åŠŸèƒ½](#6-é¢å‘åˆ‡é¢ç¼–ç¨‹aopåœ¨ä¸æ”¹ä»£ç çš„æƒ…å†µä¸‹å¢åŠ åŠŸèƒ½)
7. [SpELè¡¨è¾¾å¼ï¼šSpringçš„å†…ç½®è®¡ç®—å™¨](#7-spelè¡¨è¾¾å¼springçš„å†…ç½®è®¡ç®—å™¨)
8. [äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼šè®©ç»„ä»¶ä¹‹é—´æ¾è€¦åˆé€šä¿¡](#8-äº‹ä»¶é©±åŠ¨ç¼–ç¨‹è®©ç»„ä»¶ä¹‹é—´æ¾è€¦åˆé€šä¿¡)
9. [å›½é™…åŒ–ä¸èµ„æºç®¡ç†ï¼šè®©åº”ç”¨æ”¯æŒå¤šè¯­è¨€](#9-å›½é™…åŒ–ä¸èµ„æºç®¡ç†è®©åº”ç”¨æ”¯æŒå¤šè¯­è¨€)
10. [å¿…åšå®éªŒæ¸…å•ä¸å­¦ä¹ è·¯å¾„](#10-å¿…åšå®éªŒæ¸…å•ä¸å­¦ä¹ è·¯å¾„)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ± ä»€ä¹ˆæ˜¯Springï¼Ÿä¸ºä»€ä¹ˆè¦å­¦å®ƒï¼Ÿ


### 1.1 Springæ˜¯ä»€ä¹ˆï¼Ÿ


æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦å»ºé€ ä¸€ä¸ªå¤æ‚çš„æˆ¿å­ã€‚ä¼ ç»Ÿæ–¹å¼æ˜¯ä½ è¦è‡ªå·±ä¹°ææ–™ã€æ‰¾å·¥äººã€åè°ƒå„ç§å·¥ä½œã€‚è€ŒSpringå°±åƒæ˜¯ä¸€ä¸ª**ä¸“ä¸šçš„è£…ä¿®å…¬å¸**ï¼Œå®ƒå¸®ä½ ç®¡ç†æ‰€æœ‰çš„ææ–™ï¼ˆå¯¹è±¡ï¼‰ã€åè°ƒå„ä¸ªå·¥äººï¼ˆç»„ä»¶ï¼‰ä¹‹é—´çš„å·¥ä½œï¼Œè®©ä½ åªéœ€è¦ä¸“æ³¨äºæˆ¿å­çš„è®¾è®¡ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ã€‚

**ğŸ”¸ ç”¨å¤§ç™½è¯è¯´**ï¼š
- Springæ˜¯ä¸€ä¸ª**Javaæ¡†æ¶**ï¼Œå°±åƒæ˜¯ç»™Javaç¨‹åºå‘˜å‡†å¤‡çš„å·¥å…·ç®±
- å®ƒæœ€å¤§çš„ä½œç”¨æ˜¯**å¸®ä½ ç®¡ç†å¯¹è±¡**ï¼Œè®©å¤æ‚çš„ç¨‹åºå˜å¾—ç®€å•
- ä½ ä¸ç”¨è‡ªå·±newå¯¹è±¡ï¼ŒSpringå¸®ä½ åˆ›å»ºå’Œç®¡ç†
- å®ƒè®©ä»£ç ä¹‹é—´çš„å…³ç³»å˜å¾—æ¾æ•£ï¼Œä¿®æ”¹ä¸€ä¸ªåœ°æ–¹ä¸ä¼šå½±å“å…¶ä»–åœ°æ–¹

### 1.2 ä¸ºä»€ä¹ˆè¦å­¦Springï¼Ÿ


| ğŸ¯ **å­¦ä¹ ç†ç”±** | **å®é™…å¥½å¤„** | **ä¸¾ä¸ªä¾‹å­** |
|---|---|---|
| **ä¼ä¸šæ ‡é…** | 99%çš„Javaä¼ä¸šé¡¹ç›®éƒ½åœ¨ç”¨ | å°±åƒå­¦å¼€è½¦è¦å­¦è‡ªåŠ¨æŒ¡ä¸€æ · |
| **ç®€åŒ–å¼€å‘** | å‡å°‘50%ä»¥ä¸Šçš„é‡å¤ä»£ç  | åŸæ¥å†™100è¡Œï¼Œç°åœ¨å†™30è¡Œ |
| **é™ä½è€¦åˆ** | ç»„ä»¶ç‹¬ç«‹ï¼Œæ–¹ä¾¿æµ‹è¯•å’Œç»´æŠ¤ | æ¢ä¸ªæ•°æ®åº“ä¸ç”¨æ”¹ä¸šåŠ¡ä»£ç  |
| **ç”Ÿæ€ä¸°å¯Œ** | æœ‰å®Œæ•´çš„è§£å†³æ–¹æ¡ˆ | Spring Bootã€Spring Cloudç­‰ |

### 1.3 Springå…¨å®¶æ¡¶æ¦‚è§ˆ


```
Springç”Ÿæ€ç³»ç»Ÿå…¨æ™¯å›¾ï¼š

        Spring Framework (æ ¸å¿ƒåŸºç¡€)
                 |
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    |            |            |
Spring Boot   Spring MVC   Spring Data
(å¿«é€Ÿå¼€å‘)    (Webå¼€å‘)   (æ•°æ®è®¿é—®)
    |            |            |
Spring Cloud  Spring Security Spring Integration
(å¾®æœåŠ¡)      (å®‰å…¨æ¡†æ¶)     (ç³»ç»Ÿé›†æˆ)
```

---

## 2. ğŸ”„ Springæ ¸å¿ƒæ€æƒ³ï¼šæ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥


### 2.1 ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬(IoC)ï¼Ÿ


**ğŸ¤” å…ˆçœ‹ä¸ªç”Ÿæ´»ä¾‹å­**ï¼š

ä¼ ç»Ÿæ–¹å¼å°±åƒä½ è¦å–å’–å•¡ï¼š
```
1. ä½ è¦ä¹°å’–å•¡è±† âŒ
2. ä½ è¦ä¹°å’–å•¡æœº âŒ  
3. ä½ è¦å­¦ä¼šæ“ä½œ âŒ
4. ä½ è¦è‡ªå·±ç…®å’–å•¡ âŒ
```

Springçš„IoCå°±åƒæ˜Ÿå·´å…‹ï¼š
```
1. ä½ åªéœ€è¦è¯´"è¦æ¯æ‹¿é“" âœ…
2. æ˜Ÿå·´å…‹å¸®ä½ å‡†å¤‡ä¸€åˆ‡ âœ…
3. ç›´æ¥ç»™ä½ åšå¥½çš„å’–å•¡ âœ…
```

**ğŸ”¸ ä¸“ä¸šè§£é‡Š**ï¼š
- **æ§åˆ¶åè½¬**ï¼šæŠŠåˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒä»ç¨‹åºå‘˜æ‰‹ä¸­è½¬ç§»ç»™Springå®¹å™¨
- **ä¼ ç»Ÿæ–¹å¼**ï¼šç¨‹åºå‘˜ä¸»åŠ¨newå¯¹è±¡ï¼Œè‡ªå·±æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ
- **IoCæ–¹å¼**ï¼šSpringå®¹å™¨å¸®ä½ åˆ›å»ºå’Œç®¡ç†å¯¹è±¡ï¼Œä½ åªéœ€è¦ä½¿ç”¨

### 2.2 ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥(DI)ï¼Ÿ


**ğŸ’¡ ç”Ÿæ´»åŒ–ç†è§£**ï¼š

å°±åƒä½ ä½é…’åº—ï¼š
- **ä¼ ç»Ÿæ–¹å¼**ï¼šä½ è¦è‡ªå·±å¸¦ç‰™åˆ·ã€æ¯›å·¾ã€æ‹–é‹ï¼ˆè‡ªå·±åˆ›å»ºä¾èµ–ï¼‰
- **é…’åº—æœåŠ¡**ï¼šé…’åº—æå‰å‡†å¤‡å¥½ä¸€åˆ‡ï¼Œä½ å…¥ä½å°±èƒ½ç”¨ï¼ˆä¾èµ–æ³¨å…¥ï¼‰

**ğŸ”§ ä¸‰ç§æ³¨å…¥æ–¹å¼å¯¹æ¯”**ï¼š

```java
// æ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰ - åƒä¹°æˆ¿å­æ—¶å°±ç¡®å®šè£…ä¿®
public class UserService {
    private final UserRepository userRepo;  // finalä¿è¯ä¸å˜
    
    public UserService(UserRepository userRepo) {
        this.userRepo = userRepo;  // æ„é€ æ—¶å°±ç¡®å®šä¾èµ–
    }
}

// Setteræ³¨å…¥ - åƒä½è¿›å»åå†è£…ä¿®
public class OrderService {
    private PaymentService paymentService;
    
    public void setPaymentService(PaymentService paymentService) {
        this.paymentService = paymentService;  // å¯ä»¥åç»­è®¾ç½®
    }
}

// å­—æ®µæ³¨å…¥ï¼ˆä¸æ¨èï¼‰ - åƒé­”æ³•å˜å‡ºæ¥çš„
public class ProductService {
    @Autowired
    private InventoryService inventoryService;  // çœ‹èµ·æ¥ç®€å•ä½†éš¾æµ‹è¯•
}
```

### 2.3 ä¸ºä»€ä¹ˆIoCè¿™ä¹ˆé‡è¦ï¼Ÿ


**ğŸ¯ è§£å†³çš„æ ¹æœ¬é—®é¢˜**ï¼š

```
ä¼ ç»Ÿä»£ç çš„ç—›ç‚¹ï¼š                Spring IoCçš„è§£å†³æ–¹æ¡ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è±¡è€¦åˆä¸¥é‡    â”‚     â†’     â”‚ æ¾è€¦åˆè®¾è®¡      â”‚
â”‚ éš¾ä»¥æµ‹è¯•        â”‚     â†’     â”‚ æ–¹ä¾¿å•å…ƒæµ‹è¯•    â”‚
â”‚ ä»£ç é‡å¤å¤š      â”‚     â†’     â”‚ é…ç½®é©±åŠ¨å¼€å‘    â”‚
â”‚ ä¿®æ”¹å½±å“é¢å¤§    â”‚     â†’     â”‚ ä¿®æ”¹åªæ”¹é…ç½®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âœ¨ å®é™…æ•ˆæœ**ï¼š
- **å¼€å‘æ•ˆç‡** â¬†ï¸ 50%ï¼šä¸ç”¨å†™å¯¹è±¡åˆ›å»ºä»£ç 
- **ä»£ç è´¨é‡** â¬†ï¸ 40%ï¼šä¾èµ–å…³ç³»æ¸…æ™°
- **æµ‹è¯•ä¾¿åˆ©æ€§** â¬†ï¸ 80%ï¼šå¯ä»¥è½»æ¾mockä¾èµ–
- **ç»´æŠ¤æˆæœ¬** â¬‡ï¸ 60%ï¼šä¿®æ”¹é…ç½®è€Œéä»£ç 

---

## 3. ğŸ  Springå®¹å™¨ï¼šç®¡ç†å¯¹è±¡çš„å¤§ç®¡å®¶


### 3.1 å®¹å™¨æ˜¯ä»€ä¹ˆï¼Ÿ


**ğŸ¢ æŠŠSpringå®¹å™¨æƒ³è±¡æˆä¸€ä¸ªæ™ºèƒ½ä»“åº“**ï¼š

```
Springå®¹å™¨å°±åƒä¸€ä¸ªè¶…çº§ä»“åº“ç®¡ç†å‘˜ï¼š

ğŸ“¦ å­˜å‚¨åŠŸèƒ½ï¼šä¿å­˜æ‰€æœ‰çš„Beanå¯¹è±¡
ğŸ”§ ç”Ÿäº§åŠŸèƒ½ï¼šæ ¹æ®é…ç½®åˆ›å»ºå¯¹è±¡
ğŸ“‹ ç®¡ç†åŠŸèƒ½ï¼šæ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ
ğŸšš åˆ†å‘åŠŸèƒ½ï¼šéœ€è¦æ—¶æä¾›å¯¹è±¡
ğŸ” æŸ¥æ‰¾åŠŸèƒ½ï¼šæ ¹æ®åç§°æˆ–ç±»å‹æ‰¾å¯¹è±¡
```

### 3.2 ä¸¤ç§æ ¸å¿ƒå®¹å™¨ç±»å‹


**ğŸ¯ BeanFactory vs ApplicationContext å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | **BeanFactory** | **ApplicationContext** |
|------|-----------------|------------------------|
| **å®šä½** | åŸºç¡€å®¹å™¨ | é«˜çº§å®¹å™¨ï¼ˆæ¨èï¼‰ |
| **å®ä¾‹åŒ–æ—¶æœº** | å»¶è¿ŸåŠ è½½ï¼ˆç”¨æ—¶åˆ›å»ºï¼‰ | ç«‹å³åŠ è½½ï¼ˆå¯åŠ¨æ—¶åˆ›å»ºï¼‰ |
| **åŠŸèƒ½ä¸°å¯Œåº¦** | â­â­â­ | â­â­â­â­â­ |
| **å›½é™…åŒ–æ”¯æŒ** | âŒ | âœ… |
| **äº‹ä»¶å‘å¸ƒ** | âŒ | âœ… |
| **é€‚ç”¨åœºæ™¯** | èµ„æºå—é™ç¯å¢ƒ | ä¼ä¸šçº§åº”ç”¨ |

### 3.3 å®¹å™¨çš„å·¥ä½œæµç¨‹


```
Springå®¹å™¨çš„ä¸€å¤©å·¥ä½œæµç¨‹ï¼š

ğŸŒ… å¯åŠ¨é˜¶æ®µ
â”œâ”€ ğŸ“– è¯»å–é…ç½®æ–‡ä»¶ï¼ˆXML/æ³¨è§£/Javaé…ç½®ï¼‰
â”œâ”€ ğŸ—ï¸ è§£æBeanå®šä¹‰
â”œâ”€ ğŸ“ æ³¨å†ŒBeanå®šä¹‰åˆ°å®¹å™¨
â””â”€ ğŸš€ å®¹å™¨åˆå§‹åŒ–å®Œæˆ

âš¡ è¿è¡Œé˜¶æ®µ  
â”œâ”€ ğŸ” æ¥æ”¶è·å–Beançš„è¯·æ±‚
â”œâ”€ ğŸ­ æ£€æŸ¥Beanæ˜¯å¦å·²åˆ›å»º
â”œâ”€ ğŸ”§ å¦‚æœªåˆ›å»ºåˆ™å®ä¾‹åŒ–Bean
â”œâ”€ ğŸ’‰ æ³¨å…¥ä¾èµ–å…³ç³»
â””â”€ ğŸ“¦ è¿”å›å®Œæ•´çš„Beanå¯¹è±¡

ğŸŒ™ å…³é—­é˜¶æ®µ
â”œâ”€ ğŸ§¹ è°ƒç”¨é”€æ¯æ–¹æ³•
â”œâ”€ ğŸ—‘ï¸ æ¸…ç†èµ„æº
â””â”€ ğŸ‘‹ å®¹å™¨å…³é—­
```

### 3.4 Beançš„ä½œç”¨åŸŸ


**ğŸ­ Beançš„äº”ç§"äººæ ¼"**ï¼š

| ä½œç”¨åŸŸ | **ç‰¹ç‚¹** | **ç”Ÿæ´»åŒ–æ¯”å–»** | **ä½¿ç”¨åœºæ™¯** |
|--------|----------|----------------|--------------|
| **singleton** | æ•´ä¸ªå®¹å™¨åªæœ‰ä¸€ä¸ªå®ä¾‹ | å…¬å¸åªæœ‰ä¸€ä¸ªCEO | æœåŠ¡ç±»ã€DAOç±» |
| **prototype** | æ¯æ¬¡è·å–éƒ½åˆ›å»ºæ–°å®ä¾‹ | æ¯æ¬¡ä¹°æ–°æ¯å­ | æ•°æ®ä¼ è¾“å¯¹è±¡ |
| **request** | æ¯ä¸ªHTTPè¯·æ±‚ä¸€ä¸ªå®ä¾‹ | æ¯ä¸ªé¡¾å®¢ä¸€ä¸ªè´­ç‰©è½¦ | Webç¯å¢ƒ |
| **session** | æ¯ä¸ªHTTPä¼šè¯ä¸€ä¸ªå®ä¾‹ | æ¯ä¸ªç”¨æˆ·ä¸€ä¸ªè´¦æˆ· | ç”¨æˆ·çŠ¶æ€ç®¡ç† |
| **application** | æ•´ä¸ªWebåº”ç”¨ä¸€ä¸ªå®ä¾‹ | æ•´ä¸ªå•†åœºä¸€ä¸ªå¹¿æ’­ç³»ç»Ÿ | å…¨å±€é…ç½® |

---

## 4. ğŸ”§ é…ç½®æ–¹å¼æ¼”è¿›ï¼šä»XMLåˆ°æ³¨è§£åˆ°çº¯Java


### 4.1 é…ç½®æ–¹å¼çš„å†å²æ¼”è¿›


**ğŸ“ˆ Springé…ç½®çš„è¿›åŒ–å²**ï¼š

```
æ—¶é—´è½´ï¼šSpringé…ç½®æ¼”è¿›å†ç¨‹

2003å¹´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2008å¹´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2012å¹´
   â”‚                      â”‚                      â”‚
ğŸ“„ XMLé…ç½®æ—¶ä»£          ğŸ·ï¸ æ³¨è§£é…ç½®æ—¶ä»£        â˜• Javaé…ç½®æ—¶ä»£
   â”‚                      â”‚                      â”‚
   â””â”€ é…ç½®å’Œä»£ç åˆ†ç¦»      â””â”€ æ³¨è§£å°±è¿‘é…ç½®        â””â”€ ç±»å‹å®‰å…¨é…ç½®
      åŠŸèƒ½å®Œæ•´ä½†ç¹ç         å¼€å‘æ•ˆç‡æå‡           ç°ä»£åŒ–æ¨èæ–¹æ¡ˆ
```

### 4.2 ä¸‰ç§é…ç½®æ–¹å¼å¯¹æ¯”å®æˆ˜


**ğŸ¯ åŒä¸€ä¸ªåŠŸèƒ½çš„ä¸‰ç§å†™æ³•**ï¼š

**XMLé…ç½®æ–¹å¼ï¼ˆä¼ ç»Ÿä½†å®Œæ•´ï¼‰**ï¼š
```xml
<!-- applicationContext.xml -->
<beans>
    <!-- é…ç½®æ•°æ®æº -->
    <bean id="dataSource" class="com.mysql.cj.jdbc.MysqlDataSource">
        <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>
        <property name="username" value="root"/>
        <property name="password" value="123456"/>
    </bean>
    
    <!-- é…ç½®DAO -->
    <bean id="userDao" class="com.example.dao.UserDao">
        <property name="dataSource" ref="dataSource"/>
    </bean>
    
    <!-- é…ç½®Service -->
    <bean id="userService" class="com.example.service.UserService">
        <constructor-arg ref="userDao"/>
    </bean>
</beans>
```

**æ³¨è§£é…ç½®æ–¹å¼ï¼ˆç®€åŒ–ä½†éœ€è¦æ‰«æï¼‰**ï¼š
```java
// åœ¨ç±»ä¸ŠåŠ æ³¨è§£
@Repository  // æ ‡è¯†è¿™æ˜¯DAOå±‚
public class UserDao {
    @Autowired
    private DataSource dataSource;
}

@Service    // æ ‡è¯†è¿™æ˜¯æœåŠ¡å±‚
public class UserService {
    private final UserDao userDao;
    
    @Autowired  // è‡ªåŠ¨æ³¨å…¥
    public UserService(UserDao userDao) {
        this.userDao = userDao;
    }
}

// é…ç½®ç±»å¯ç”¨æ‰«æ
@Configuration
@ComponentScan(basePackages = "com.example")
public class AppConfig {
    
    @Bean
    public DataSource dataSource() {
        MysqlDataSource ds = new MysqlDataSource();
        ds.setUrl("jdbc:mysql://localhost:3306/mydb");
        ds.setUsername("root");
        ds.setPassword("123456");
        return ds;
    }
}
```

**çº¯Javaé…ç½®æ–¹å¼ï¼ˆç°ä»£åŒ–æ¨èï¼‰**ï¼š
```java
@Configuration
public class DatabaseConfig {
    
    @Bean
    @Primary  // ä¸»è¦çš„æ•°æ®æº
    public DataSource primaryDataSource() {
        return DataSourceBuilder.create()
                .url("jdbc:mysql://localhost:3306/mydb")
                .username("root")
                .password("123456")
                .build();
    }
    
    @Bean
    public UserDao userDao(DataSource dataSource) {
        return new UserDao(dataSource);  // æ„é€ å™¨æ³¨å…¥
    }
    
    @Bean
    public UserService userService(UserDao userDao) {
        return new UserService(userDao);  // ç±»å‹å®‰å…¨
    }
}
```

### 4.3 ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆé…ç½®ï¼Ÿ


**ğŸ¯ é€‰æ‹©æŒ‡å—**ï¼š

> **ğŸ’¡ æ–°æ‰‹å»ºè®®**
> 
> åˆšå¼€å§‹å­¦ä¹ æ—¶ï¼Œ**XMLé…ç½®**èƒ½è®©ä½ æ›´æ¸…æ¥šåœ°ç†è§£Springçš„å·¥ä½œåŸç†ï¼Œè™½ç„¶ä»£ç å¤šä½†æ¦‚å¿µæ¸…æ™°

> **ğŸš€ å®é™…å¼€å‘**
> 
> **Javaé…ç½® + æ³¨è§£é…ç½®**ç»„åˆä½¿ç”¨ï¼š
> - Javaé…ç½®ï¼šç¬¬ä¸‰æ–¹åº“ã€å¤æ‚åˆå§‹åŒ–é€»è¾‘
> - æ³¨è§£é…ç½®ï¼šè‡ªå·±ç¼–å†™çš„ä¸šåŠ¡ç±»

> **âš ï¸ é¿å…æ··ä¹±**
> 
> ä¸è¦åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­æ··ç”¨å¤ªå¤šé…ç½®æ–¹å¼ï¼Œå®¹æ˜“é€ æˆç»´æŠ¤å›°éš¾

---

## 5. ğŸŒ± Beanç”Ÿå‘½å‘¨æœŸï¼šå¯¹è±¡ä»å‡ºç”Ÿåˆ°æ­»äº¡çš„è¿‡ç¨‹


### 5.1 Beançš„ä¸€ç”Ÿï¼ˆå®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼‰


**ğŸ‘¶ æŠŠBeanæƒ³è±¡æˆä¸€ä¸ªäººçš„æˆé•¿è¿‡ç¨‹**ï¼š

```
Beançš„å®Œæ•´äººç”Ÿå†ç¨‹ï¼š

ğŸ‘¶ å‡ºç”Ÿé˜¶æ®µï¼ˆå®ä¾‹åŒ–ï¼‰
â”œâ”€ ğŸ¥ è°ƒç”¨æ„é€ æ–¹æ³•
â”œâ”€ ğŸ  åˆ†é…å†…å­˜ç©ºé—´
â””â”€ ğŸ“ è·å¾—èº«ä»½ï¼ˆå®ä¾‹å¼•ç”¨ï¼‰

ğŸ“ æˆé•¿é˜¶æ®µï¼ˆå±æ€§å¡«å……ï¼‰
â”œâ”€ ğŸ’‰ ä¾èµ–æ³¨å…¥ï¼ˆå¡«å……å±æ€§ï¼‰
â”œâ”€ ğŸ”— å»ºç«‹ä¸å…¶ä»–Beançš„å…³ç³»
â””â”€ âš™ï¸ è®¾ç½®é…ç½®å±æ€§

ğŸ¯ æˆç†Ÿé˜¶æ®µï¼ˆåˆå§‹åŒ–ï¼‰
â”œâ”€ ğŸ§  å®ç°Awareæ¥å£å›è°ƒ
â”œâ”€ ğŸ”§ BeanPostProcessorå‰ç½®å¤„ç†
â”œâ”€ ğŸš€ è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•
â””â”€ ğŸ”§ BeanPostProcessoråç½®å¤„ç†

ğŸ’¼ å·¥ä½œé˜¶æ®µï¼ˆä½¿ç”¨ï¼‰
â”œâ”€ âœ… Beanå¯ä»¥æ­£å¸¸ä½¿ç”¨
â”œâ”€ ğŸ”„ å¤„ç†ä¸šåŠ¡è¯·æ±‚
â””â”€ ğŸ“Š æä¾›æœåŠ¡

ğŸ‘´ é€€ä¼‘é˜¶æ®µï¼ˆé”€æ¯ï¼‰
â”œâ”€ ğŸ“ è°ƒç”¨é”€æ¯æ–¹æ³•
â”œâ”€ ğŸ§¹ æ¸…ç†èµ„æº
â””â”€ ğŸ‘‹ ä»å®¹å™¨ä¸­ç§»é™¤
```

### 5.2 è‡ªå®šä¹‰ç”Ÿå‘½å‘¨æœŸå›è°ƒ


**ğŸ® ä¸‰ç§æ–¹å¼æ§åˆ¶Beançš„ç”Ÿå‘½å‘¨æœŸ**ï¼š

**æ–¹å¼ä¸€ï¼šå®ç°æ¥å£ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**
```java
public class LifecycleBean implements InitializingBean, DisposableBean {
    private String name;
    
    // åˆå§‹åŒ–å›è°ƒ
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("ğŸš€ " + name + " åˆå§‹åŒ–å®Œæˆï¼Œå‡†å¤‡å·¥ä½œï¼");
        // è¿™é‡Œå¯ä»¥åšå¤æ‚çš„åˆå§‹åŒ–å·¥ä½œ
    }
    
    // é”€æ¯å›è°ƒ  
    @Override
    public void destroy() throws Exception {
        System.out.println("ğŸ‘‹ " + name + " å‡†å¤‡é”€æ¯ï¼Œæ¸…ç†èµ„æºï¼");
        // è¿™é‡Œå¯ä»¥å…³é—­è¿æ¥ã€æ¸…ç†ç¼“å­˜ç­‰
    }
}
```

**æ–¹å¼äºŒï¼šä½¿ç”¨æ³¨è§£ï¼ˆæ¨èæ–¹å¼ï¼‰**
```java
public class UserService {
    private DatabaseConnection connection;
    
    @PostConstruct  // ç›¸å½“äºåˆå§‹åŒ–
    public void init() {
        connection = new DatabaseConnection();
        System.out.println("ğŸ”Œ æ•°æ®åº“è¿æ¥å·²å»ºç«‹");
    }
    
    @PreDestroy    // ç›¸å½“äºé”€æ¯å‰
    public void cleanup() {
        if (connection != null) {
            connection.close();
            System.out.println("ğŸ”Œ æ•°æ®åº“è¿æ¥å·²å…³é—­");
        }
    }
}
```

**æ–¹å¼ä¸‰ï¼šé…ç½®æŒ‡å®šï¼ˆçµæ´»æ–¹å¼ï¼‰**
```java
@Configuration
public class AppConfig {
    
    @Bean(initMethod = "start", destroyMethod = "stop")
    public TaskScheduler taskScheduler() {
        return new CustomTaskScheduler();
    }
}
```

### 5.3 BeanPostProcessorï¼šBeançš„"äººç”Ÿå¯¼å¸ˆ"


**ğŸ­ æƒ³è±¡BeanPostProcessoræ˜¯æ¯ä¸ªBeançš„äººç”Ÿå¯¼å¸ˆ**ï¼š

```java
@Component
public class LoggingBeanPostProcessor implements BeanPostProcessor {
    
    // åˆå§‹åŒ–å‰çš„æŒ‡å¯¼
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) {
        System.out.println("ğŸ“ å¯¼å¸ˆå»ºè®®ï¼š" + beanName + " å‡†å¤‡åˆå§‹åŒ–ï¼Œè¦åŠ æ²¹å“¦ï¼");
        return bean;  // å¯ä»¥è¿”å›åŸå¯¹è±¡æˆ–åŒ…è£…å¯¹è±¡
    }
    
    // åˆå§‹åŒ–åçš„ç¥è´º
    @Override  
    public Object postProcessAfterInitialization(Object bean, String beanName) {
        System.out.println("ğŸ‰ å¯¼å¸ˆç¥è´ºï¼š" + beanName + " åˆå§‹åŒ–æˆåŠŸï¼Œå¯ä»¥å·¥ä½œäº†ï¼");
        return bean;  // è¿™é‡Œå¯ä»¥è¿”å›ä»£ç†å¯¹è±¡
    }
}
```

---

## 6. ğŸ¯ é¢å‘åˆ‡é¢ç¼–ç¨‹AOPï¼šåœ¨ä¸æ”¹ä»£ç çš„æƒ…å†µä¸‹å¢åŠ åŠŸèƒ½


### 6.1 AOPæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ


**ğŸ¬ æŠŠAOPæƒ³è±¡æˆç”µå½±æ‹æ‘„**ï¼š

```
ä¼ ç»Ÿç¼–ç¨‹ = æ¼”å‘˜ç›´æ¥æ¼”æˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¼”å‘˜è¡¨æ¼” + ç¯å…‰ + éŸ³æ•ˆ  â”‚  â† æ‰€æœ‰åŠŸèƒ½æ··åœ¨ä¸€èµ·
â”‚  + ç‰¹æ•ˆ + åæœŸå¤„ç†      â”‚     éš¾ä»¥ç®¡ç†å’Œå¤ç”¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AOPç¼–ç¨‹ = ä¸“ä¸šç”µå½±åˆ¶ä½œï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¼”å‘˜è¡¨æ¼” â”‚  â”‚ ç¯å…‰å¸ˆ  â”‚  â”‚ éŸ³æ•ˆå¸ˆ  â”‚  â† å„å¸å…¶èŒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     ä¸“ä¸šä¸”å¤ç”¨
      â”‚           â”‚           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
              â”‚ å¯¼æ¼”  â”‚  â† AOPæ¡†æ¶è´Ÿè´£åè°ƒ
              â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ å®é™…åº”ç”¨åœºæ™¯**ï¼š
- **æ—¥å¿—è®°å½•**ï¼šåœ¨æ¯ä¸ªæ–¹æ³•æ‰§è¡Œå‰åè®°å½•æ—¥å¿—
- **æ€§èƒ½ç›‘æ§**ï¼šç»Ÿè®¡æ–¹æ³•æ‰§è¡Œæ—¶é—´
- **æƒé™æ£€æŸ¥**ï¼šéªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡Œæ“ä½œ
- **äº‹åŠ¡ç®¡ç†**ï¼šè‡ªåŠ¨å¼€å¯ã€æäº¤æˆ–å›æ»šäº‹åŠ¡
- **ç¼“å­˜ç®¡ç†**ï¼šè‡ªåŠ¨ç¼“å­˜æ–¹æ³•ç»“æœ

### 6.2 AOPæ ¸å¿ƒæ¦‚å¿µï¼ˆç”¨å¤§ç™½è¯è§£é‡Šï¼‰


**ğŸ¯ AOPæœ¯è¯­å¯¹ç…§è¡¨**ï¼š

| AOPæœ¯è¯­ | **å¤§ç™½è¯è§£é‡Š** | **ç”Ÿæ´»ä¾‹å­** |
|---------|----------------|--------------|
| **åˆ‡é¢(Aspect)** | è¦æ·»åŠ çš„åŠŸèƒ½æ¨¡å— | ä¿å®‰çš„å·¥ä½œèŒè´£ |
| **è¿æ¥ç‚¹(Join Point)** | å¯ä»¥æ·»åŠ åŠŸèƒ½çš„åœ°æ–¹ | å¤§æ¥¼çš„æ¯ä¸ªå…¥å£ |
| **åˆ‡å…¥ç‚¹(Pointcut)** | å®é™…æ·»åŠ åŠŸèƒ½çš„åœ°æ–¹ | é€‰å®šçš„ä¸»è¦å…¥å£ |
| **é€šçŸ¥(Advice)** | å…·ä½“çš„åŠŸèƒ½ä»£ç  | ä¿å®‰çš„å…·ä½“è¡Œä¸º |
| **ç›®æ ‡å¯¹è±¡(Target)** | è¢«æ·»åŠ åŠŸèƒ½çš„å¯¹è±¡ | éœ€è¦ä¿æŠ¤çš„å¤§æ¥¼ |
| **ä»£ç†(Proxy)** | å¢å¼ºåçš„å¯¹è±¡ | æœ‰ä¿å®‰çš„å®‰å…¨å¤§æ¥¼ |

### 6.3 äº”ç§é€šçŸ¥ç±»å‹


**â° é€šçŸ¥æ‰§è¡Œæ—¶æœºå›¾**ï¼š

```
æ–¹æ³•æ‰§è¡Œæ—¶åºå›¾ï¼š

    å¼€å§‹
     |
ğŸ“‹ @Before          â† å‰ç½®é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå‰
     |
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ ç›®æ ‡æ–¹æ³• â”‚         â† ä½ çš„ä¸šåŠ¡æ–¹æ³•
â”‚  æ‰§è¡Œ   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     |
ğŸ“‹ @After           â† åç½®é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œåï¼ˆæ— è®ºæˆåŠŸå¤±è´¥ï¼‰
     |
   æˆåŠŸï¼Ÿ
  â”Œâ”€ âœ… â”€â”€â”
ğŸ“‹â”‚@Afterâ”‚ğŸ“‹@After   â† è¿”å›é€šçŸ¥ï¼šæˆåŠŸæ—¶    å¼‚å¸¸é€šçŸ¥ï¼šå¤±è´¥æ—¶
  â”‚Returnâ”‚Exception
  â””â”€â”€â”€â”€â”€â”€â”˜
     |
ğŸ“‹ @Around          â† ç¯ç»•é€šçŸ¥ï¼šå¯ä»¥æ§åˆ¶æ˜¯å¦æ‰§è¡Œç›®æ ‡æ–¹æ³•
     |
    ç»“æŸ
```

### 6.4 AOPå®æˆ˜ï¼šç»™ä¸šåŠ¡æ–¹æ³•åŠ æ—¥å¿—


**ğŸ“ åœºæ™¯ï¼šä¸ºæ‰€æœ‰Serviceå±‚æ–¹æ³•è‡ªåŠ¨åŠ ä¸Šæ—¥å¿—**

```java
// ä¸šåŠ¡æœåŠ¡ç±»ï¼ˆä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä»£ç ï¼‰
@Service
public class UserService {
    
    public User findUserById(Long id) {
        // çº¯ç²¹çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ²¡æœ‰æ—¥å¿—ä»£ç 
        return userRepository.findById(id);
    }
    
    public void deleteUser(Long id) {
        userRepository.deleteById(id);
    }
}

// æ—¥å¿—åˆ‡é¢ç±»
@Aspect
@Component
public class LoggingAspect {
    
    private static final Logger logger = LoggerFactory.getLogger(LoggingAspect.class);
    
    // å®šä¹‰åˆ‡å…¥ç‚¹ï¼šæ‰€æœ‰Serviceå±‚çš„publicæ–¹æ³•
    @Pointcut("execution(public * com.example.service.*.*(..))")
    public void serviceLayer() {}
    
    // ç¯ç»•é€šçŸ¥ï¼šè®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´å’Œå‚æ•°
    @Around("serviceLayer()")
    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {
        long startTime = System.currentTimeMillis();
        
        // è·å–æ–¹æ³•ä¿¡æ¯
        String className = joinPoint.getTarget().getClass().getSimpleName();
        String methodName = joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();
        
        logger.info("ğŸš€ [{}] {}.{}() å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°ï¼š{}", 
                   getCurrentTime(), className, methodName, Arrays.toString(args));
        
        try {
            // æ‰§è¡ŒåŸæ–¹æ³•
            Object result = joinPoint.proceed();
            
            long executionTime = System.currentTimeMillis() - startTime;
            logger.info("âœ… [{}] {}.{}() æ‰§è¡ŒæˆåŠŸï¼Œè€—æ—¶ï¼š{}msï¼Œè¿”å›å€¼ï¼š{}", 
                       getCurrentTime(), className, methodName, executionTime, result);
            
            return result;
            
        } catch (Exception e) {
            long executionTime = System.currentTimeMillis() - startTime;
            logger.error("âŒ [{}] {}.{}() æ‰§è¡Œå¼‚å¸¸ï¼Œè€—æ—¶ï¼š{}msï¼Œå¼‚å¸¸ï¼š{}", 
                        getCurrentTime(), className, methodName, executionTime, e.getMessage());
            throw e;
        }
    }
}
```

**ğŸ“Š æ‰§è¡Œæ•ˆæœ**ï¼š
```
ğŸš€ [14:30:15] UserService.findUserById() å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°ï¼š[123]
âœ… [14:30:15] UserService.findUserById() æ‰§è¡ŒæˆåŠŸï¼Œè€—æ—¶ï¼š45msï¼Œè¿”å›å€¼ï¼šUser{id=123, name='å¼ ä¸‰'}

ğŸš€ [14:30:20] UserService.deleteUser() å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°ï¼š[456]  
âŒ [14:30:20] UserService.deleteUser() æ‰§è¡Œå¼‚å¸¸ï¼Œè€—æ—¶ï¼š12msï¼Œå¼‚å¸¸ï¼šç”¨æˆ·ä¸å­˜åœ¨
```

---

## 7. ğŸ§® SpELè¡¨è¾¾å¼ï¼šSpringçš„å†…ç½®è®¡ç®—å™¨


### 7.1 SpELæ˜¯ä»€ä¹ˆï¼Ÿ


**ğŸ§® æŠŠSpELæƒ³è±¡æˆä¸€ä¸ªè¶…çº§è®¡ç®—å™¨**ï¼š

```
æ™®é€šè®¡ç®—å™¨åªèƒ½ç®—æ•°å­—ï¼š
2 + 3 = 5

Spring ELï¼ˆè¡¨è¾¾å¼è¯­è¨€ï¼‰æ˜¯è¶…çº§è®¡ç®—å™¨ï¼š
âœ… è®¿é—®å¯¹è±¡å±æ€§ï¼šuser.name
âœ… è°ƒç”¨æ–¹æ³•ï¼šuser.getName().toUpperCase()  
âœ… æ•°å­¦è¿ç®—ï¼šprice * 0.8
âœ… é€»è¾‘åˆ¤æ–­ï¼šage >= 18 ? 'æˆå¹´' : 'æœªæˆå¹´'
âœ… é›†åˆæ“ä½œï¼šusers.?[age > 18]ï¼ˆç­›é€‰æˆå¹´ç”¨æˆ·ï¼‰
âœ… ç³»ç»Ÿä¿¡æ¯ï¼šsystemProperties['java.version']
```

### 7.2 SpELçš„ä½¿ç”¨åœºæ™¯


**ğŸ¯ SpELåœ¨Springä¸­çš„åº”ç”¨**ï¼š

| ä½¿ç”¨åœºæ™¯ | **ç¤ºä¾‹** | **è¯´æ˜** |
|---------|----------|----------|
| **å±æ€§æ³¨å…¥** | `@Value("#{user.name}")` | æ³¨å…¥Beançš„å±æ€§å€¼ |
| **æ¡ä»¶åˆ¤æ–­** | `@ConditionalOnExpression` | æ ¹æ®æ¡ä»¶åˆ›å»ºBean |
| **ç¼“å­˜key** | `@Cacheable(key="#{user.id}")` | åŠ¨æ€ç”Ÿæˆç¼“å­˜é”® |
| **å®‰å…¨æ§åˆ¶** | `@PreAuthorize("#{user.role == 'ADMIN'}")` | æƒé™éªŒè¯ |
| **é…ç½®æ–‡ä»¶** | `#{systemProperties['app.version']}` | è¯»å–ç³»ç»Ÿå±æ€§ |

### 7.3 SpELè¯­æ³•å¤§å…¨


**ğŸ“ SpELè¡¨è¾¾å¼è¯­æ³•å‚è€ƒ**ï¼š

```java
@Component
public class SpELExamples {
    
    // ğŸ”¢ åŸºç¡€æ•°å€¼å’Œå­—ç¬¦ä¸²
    @Value("#{100}")
    private int number;
    
    @Value("#{'Hello World'}")
    private String text;
    
    // ğŸ§® æ•°å­¦è¿ç®—
    @Value("#{10 + 5}")              // åŠ æ³•ï¼š15
    private int addition;
    
    @Value("#{10 * 2}")              // ä¹˜æ³•ï¼š20
    private int multiplication;
    
    @Value("#{10 / 3}")              // é™¤æ³•ï¼š3.33...
    private double division;
    
    @Value("#{10 % 3}")              // å–æ¨¡ï¼š1
    private int modulo;
    
    // ğŸ”¤ å­—ç¬¦ä¸²æ“ä½œ
    @Value("#{'Hello' + ' ' + 'World'}")     // å­—ç¬¦ä¸²æ‹¼æ¥
    private String concat;
    
    @Value("#{'Hello World'.length()}")      // å­—ç¬¦ä¸²é•¿åº¦ï¼š11
    private int length;
    
    @Value("#{'Hello World'.substring(0,5)}")  // æˆªå–å­—ç¬¦ä¸²ï¼šHello
    private String substring;
    
    // ğŸ¯ é€»è¾‘è¿ç®—
    @Value("#{10 > 5}")              // å¤§äºï¼štrue
    private boolean greater;
    
    @Value("#{10 == 10}")            // ç­‰äºï¼štrue
    private boolean equals;
    
    @Value("#{true and false}")      // é€»è¾‘ä¸ï¼šfalse
    private boolean and;
    
    @Value("#{true or false}")       // é€»è¾‘æˆ–ï¼štrue
    private boolean or;
    
    // ğŸ”„ æ¡ä»¶è¿ç®—ç¬¦
    @Value("#{user.age >= 18 ? 'æˆå¹´äºº' : 'æœªæˆå¹´'}")
    private String adultCheck;
    
    // ğŸ  è®¿é—®Beanå±æ€§
    @Value("#{userService.currentUser.name}")
    private String currentUserName;
    
    // ğŸ“Š é›†åˆæ“ä½œ
    @Value("#{userService.allUsers.size()}")     // é›†åˆå¤§å°
    private int userCount;
    
    @Value("#{userService.allUsers[0].name}")    // ç¬¬ä¸€ä¸ªç”¨æˆ·å
    private String firstUserName;
    
    // ğŸ” é›†åˆç­›é€‰ï¼ˆSpELçš„é«˜çº§åŠŸèƒ½ï¼‰
    @Value("#{userService.allUsers.?[age > 18]}")  // ç­›é€‰æˆå¹´ç”¨æˆ·
    private List<User> adults;
    
    @Value("#{userService.allUsers.![name]}")      // æå–æ‰€æœ‰ç”¨æˆ·å
    private List<String> userNames;
    
    // ğŸ·ï¸ ç³»ç»Ÿå±æ€§
    @Value("#{systemProperties['java.version']}")   // Javaç‰ˆæœ¬
    private String javaVersion;
    
    @Value("#{systemProperties['user.home']}")      // ç”¨æˆ·ä¸»ç›®å½•
    private String userHome;
    
    // ğŸŒ ç¯å¢ƒå˜é‡
    @Value("#{systemEnvironment['PATH']}")          // PATHç¯å¢ƒå˜é‡
    private String systemPath;
}
```

### 7.4 SpELé«˜çº§ç‰¹æ€§ï¼šé›†åˆå¤„ç†


**ğŸ“Š é›†åˆæ“ä½œå®æˆ˜ä¾‹å­**ï¼š

```java
@Service
public class UserAnalysisService {
    
    @Autowired
    private UserService userService;
    
    // ä½¿ç”¨SpELè¿›è¡Œå¤æ‚çš„ç”¨æˆ·æ•°æ®åˆ†æ
    public void analyzeUsers() {
        
        // è·å–æ‰€æœ‰ç”¨æˆ·
        List<User> allUsers = userService.getAllUsers();
        
        // ä¸‹é¢å±•ç¤ºå¦‚ä½•ç”¨SpELè¡¨è¾¾å¼å¤„ç†è¿™äº›æ•°æ®
        // æ³¨æ„ï¼šè¿™äº›è¡¨è¾¾å¼é€šå¸¸åœ¨é…ç½®æˆ–æ³¨è§£ä¸­ä½¿ç”¨
    }
}

// åœ¨é…ç½®ä¸­ä½¿ç”¨SpELå¤„ç†é›†åˆ
@Configuration
public class AnalysisConfig {
    
    // è·å–æˆå¹´ç”¨æˆ·ï¼ˆç­›é€‰æ“ä½œï¼‰
    @Bean
    public List<User> adultUsers() {
        // SpELè¡¨è¾¾å¼ï¼šuserService.allUsers.?[age >= 18]
        // è§£é‡Šï¼šä»æ‰€æœ‰ç”¨æˆ·ä¸­ç­›é€‰å‡ºå¹´é¾„å¤§äºç­‰äº18çš„ç”¨æˆ·
        return evaluateExpression("#{userService.allUsers.?[age >= 18]}");
    }
    
    // è·å–æ‰€æœ‰ç”¨æˆ·çš„é‚®ç®±ï¼ˆæŠ•å½±æ“ä½œï¼‰  
    @Bean
    public List<String> userEmails() {
        // SpELè¡¨è¾¾å¼ï¼šuserService.allUsers.![email]
        // è§£é‡Šï¼šä»æ‰€æœ‰ç”¨æˆ·ä¸­æå–é‚®ç®±å­—æ®µï¼Œç»„æˆæ–°çš„åˆ—è¡¨
        return evaluateExpression("#{userService.allUsers.![email]}");
    }
    
    // è·å–ç¬¬ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·
    @Bean  
    public User firstAdmin() {
        // SpELè¡¨è¾¾å¼ï¼šuserService.allUsers.?[role == 'ADMIN'][0]
        // è§£é‡Šï¼šç­›é€‰å‡ºç®¡ç†å‘˜ï¼Œç„¶åå–ç¬¬ä¸€ä¸ª
        return evaluateExpression("#{userService.allUsers.?[role == 'ADMIN'][0]}");
    }
}
```

**ğŸ¯ é›†åˆæ“ä½œç¬¦è¯¦è§£**ï¼š

| æ“ä½œç¬¦ | **åç§°** | **ç”¨æ³•ç¤ºä¾‹** | **è¯´æ˜** |
|--------|----------|--------------|----------|
| **?[]** | ç­›é€‰æ“ä½œç¬¦ | `users.?[age > 18]` | ç­›é€‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´  |
| **![]** | æŠ•å½±æ“ä½œç¬¦ | `users.![name]` | æå–æŒ‡å®šå±æ€§ç»„æˆæ–°é›†åˆ |
| **^[]** | ç¬¬ä¸€ä¸ªåŒ¹é… | `users.^[role == 'ADMIN']` | è¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´  |
| **$[]** | æœ€åä¸€ä¸ªåŒ¹é… | `users.$[role == 'USER']` | è¿”å›æœ€åä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´  |

---

## 8. ğŸ“¡ äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼šè®©ç»„ä»¶ä¹‹é—´æ¾è€¦åˆé€šä¿¡


### 8.1 ä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ


**ğŸ“» æŠŠäº‹ä»¶é©±åŠ¨æƒ³è±¡æˆç”µå°å¹¿æ’­**ï¼š

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆç›´æ¥è°ƒç”¨ï¼‰= æ‰“ç”µè¯ï¼š
ç”¨æˆ·æ³¨å†Œ â”€â”€ç›´æ¥è°ƒç”¨â”€â”€> å‘é€é‚®ä»¶
         â”€â”€ç›´æ¥è°ƒç”¨â”€â”€> å‘é€çŸ­ä¿¡  
         â”€â”€ç›´æ¥è°ƒç”¨â”€â”€> æ›´æ–°ç»Ÿè®¡

é—®é¢˜ï¼šæ³¨å†ŒåŠŸèƒ½è¦çŸ¥é“æ‰€æœ‰åç»­æ“ä½œï¼Œè€¦åˆä¸¥é‡

äº‹ä»¶é©±åŠ¨æ–¹å¼ = ç”µå°å¹¿æ’­ï¼š
ç”¨æˆ·æ³¨å†Œ â”€â”€å‘å¸ƒäº‹ä»¶â”€â”€> "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ" äº‹ä»¶
                     â”‚
                     â”œâ”€ é‚®ä»¶æœåŠ¡ç›‘å¬ â†’ å‘é€é‚®ä»¶
                     â”œâ”€ çŸ­ä¿¡æœåŠ¡ç›‘å¬ â†’ å‘é€çŸ­ä¿¡  
                     â””â”€ ç»Ÿè®¡æœåŠ¡ç›‘å¬ â†’ æ›´æ–°ç»Ÿè®¡

ä¼˜ç‚¹ï¼šæ³¨å†ŒåŠŸèƒ½åªéœ€è¦å‘å¸ƒäº‹ä»¶ï¼Œä¸éœ€è¦çŸ¥é“åç»­æ“ä½œ
```

### 8.2 Springäº‹ä»¶æœºåˆ¶çš„ä¸‰è¦ç´ 


**ğŸ­ Springäº‹ä»¶çš„ä¸‰ä¸ªè§’è‰²**ï¼š

```java
// 1ï¸âƒ£ äº‹ä»¶ï¼ˆEventï¼‰- è¦ä¼ æ’­çš„æ¶ˆæ¯
public class UserRegisteredEvent extends ApplicationEvent {
    private final User user;
    private final String registrationTime;
    
    public UserRegisteredEvent(Object source, User user) {
        super(source);  // sourceæ˜¯å‘å¸ƒäº‹ä»¶çš„å¯¹è±¡
        this.user = user;
        this.registrationTime = LocalDateTime.now().toString();
    }
    
    // getteræ–¹æ³•...
}

// 2ï¸âƒ£ äº‹ä»¶å‘å¸ƒè€…ï¼ˆPublisherï¼‰- å¹¿æ’­ç”µå°
@Service
public class UserService {
    
    @Autowired
    private ApplicationEventPublisher eventPublisher;  // Springæä¾›çš„å‘å¸ƒå™¨
    
    public void registerUser(User user) {
        // ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“
        userRepository.save(user);
        
        // å‘å¸ƒç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼ˆå¹¿æ’­æ¶ˆæ¯ï¼‰
        UserRegisteredEvent event = new UserRegisteredEvent(this, user);
        eventPublisher.publishEvent(event);
        
        System.out.println("ğŸ“» ç”¨æˆ·æ³¨å†Œäº‹ä»¶å·²å‘å¸ƒï¼š" + user.getName());
    }
}

// 3ï¸âƒ£ äº‹ä»¶ç›‘å¬è€…ï¼ˆListenerï¼‰- æ”¶éŸ³æœº
@Component
public class UserEventListener {
    
    // ç›‘å¬ç”¨æˆ·æ³¨å†Œäº‹ä»¶
    @EventListener
    public void handleUserRegistered(UserRegisteredEvent event) {
        User user = event.getUser();
        System.out.println("ğŸ“§ å‡†å¤‡å‘é€æ¬¢è¿é‚®ä»¶ç»™ï¼š" + user.getName());
        // å‘é€æ¬¢è¿é‚®ä»¶çš„é€»è¾‘
    }
    
    // å¯ä»¥æœ‰å¤šä¸ªç›‘å¬å™¨ç›‘å¬åŒä¸€ä¸ªäº‹ä»¶
    @EventListener
    public void updateUserStatistics(UserRegisteredEvent event) {
        System.out.println("ğŸ“Š æ›´æ–°ç”¨æˆ·ç»Ÿè®¡æ•°æ®");
        // æ›´æ–°ç»Ÿè®¡çš„é€»è¾‘
    }
}
```

### 8.3 äº‹ä»¶ç›‘å¬çš„å¤šç§æ–¹å¼


**ğŸ›ï¸ å››ç§ç›‘å¬å™¨å†™æ³•å¯¹æ¯”**ï¼š

```java
// æ–¹å¼1ï¼š@EventListeneræ³¨è§£ï¼ˆæ¨èï¼‰
@Component
public class EmailService {
    
    @EventListener
    public void sendWelcomeEmail(UserRegisteredEvent event) {
        // å¤„ç†é€»è¾‘
    }
    
    // å¯ä»¥ç›‘å¬å¤šç§äº‹ä»¶
    @EventListener({UserRegisteredEvent.class, UserUpdatedEvent.class})
    public void handleUserEvents(ApplicationEvent event) {
        // å¤„ç†å¤šç§ç”¨æˆ·äº‹ä»¶
    }
}

// æ–¹å¼2ï¼šå®ç°ApplicationListeneræ¥å£
@Component
public class SmsService implements ApplicationListener<UserRegisteredEvent> {
    
    @Override
    public void onApplicationEvent(UserRegisteredEvent event) {
        System.out.println("ğŸ“± å‘é€æ³¨å†ŒæˆåŠŸçŸ­ä¿¡");
    }
}

// æ–¹å¼3ï¼šå¼‚æ­¥äº‹ä»¶ç›‘å¬ï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰
@Component
public class LoggingService {
    
    @EventListener
    @Async  // å¼‚æ­¥å¤„ç†ï¼Œéœ€è¦@EnableAsync
    public void logUserRegistration(UserRegisteredEvent event) {
        // è¿™ä¸ªæ–¹æ³•å°†åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­æ‰§è¡Œ
        System.out.println("ğŸ“ å¼‚æ­¥è®°å½•ç”¨æˆ·æ³¨å†Œæ—¥å¿—");
    }
}

// æ–¹å¼4ï¼šäº‹åŠ¡äº‹ä»¶ç›‘å¬ï¼ˆäº‹åŠ¡æäº¤åæ‰æ‰§è¡Œï¼‰
@Component
public class RewardService {
    
    @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
    public void giveRegistrationReward(UserRegisteredEvent event) {
        // åªæœ‰åœ¨ç”¨æˆ·æˆåŠŸä¿å­˜åˆ°æ•°æ®åº“åæ‰æ‰§è¡Œ
        System.out.println("ğŸ å‘æ”¾æ³¨å†Œå¥–åŠ±");
    }
}
```

### 8.4 å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†è®¢å•å¤„ç†


**ğŸ›’ ç”µå•†ç³»ç»Ÿä¸­çš„äº‹ä»¶é©±åŠ¨è®¾è®¡**ï¼š

```java
// è®¢å•äº‹ä»¶
public class OrderCreatedEvent extends ApplicationEvent {
    private final Order order;
    
    public OrderCreatedEvent(Object source, Order order) {
        super(source);
        this.order = order;
    }
    
    public Order getOrder() { return order; }
}

// è®¢å•æœåŠ¡ï¼ˆäº‹ä»¶å‘å¸ƒè€…ï¼‰
@Service
@Transactional
public class OrderService {
    
    @Autowired
    private ApplicationEventPublisher eventPublisher;
    
    public void createOrder(Order order) {
        // 1. ä¿å­˜è®¢å•
        orderRepository.save(order);
        
        // 2. å‘å¸ƒè®¢å•åˆ›å»ºäº‹ä»¶
        eventPublisher.publishEvent(new OrderCreatedEvent(this, order));
        
        System.out.println("ğŸ“¦ è®¢å•åˆ›å»ºå®Œæˆï¼š" + order.getOrderNumber());
    }
}

// å„ç§ä¸šåŠ¡æœåŠ¡ï¼ˆäº‹ä»¶ç›‘å¬è€…ï¼‰
@Component
public class OrderEventHandlers {
    
    // åº“å­˜æœåŠ¡ï¼šæ‰£å‡åº“å­˜
    @EventListener
    public void handleInventoryDeduction(OrderCreatedEvent event) {
        Order order = event.getOrder();
        System.out.println("ğŸ“¦ æ‰£å‡å•†å“åº“å­˜ï¼š" + order.getProductName());
        // åº“å­˜æ‰£å‡é€»è¾‘
    }
    
    // æ”¯ä»˜æœåŠ¡ï¼šåˆ›å»ºæ”¯ä»˜å•
    @EventListener  
    public void createPayment(OrderCreatedEvent event) {
        Order order = event.getOrder();
        System.out.println("ğŸ’³ åˆ›å»ºæ”¯ä»˜å•ï¼š" + order.getAmount());
        // åˆ›å»ºæ”¯ä»˜å•é€»è¾‘
    }
    
    // ç‰©æµæœåŠ¡ï¼šå‡†å¤‡å‘è´§
    @EventListener
    @Async  // å¼‚æ­¥å¤„ç†ï¼Œä¸å½±å“è®¢å•åˆ›å»ºé€Ÿåº¦
    public void prepareShipment(OrderCreatedEvent event) {
        Order order = event.getOrder();
        System.out.println("ğŸšš å‡†å¤‡ç‰©æµå‘è´§ï¼š" + order.getDeliveryAddress());
        // ç‰©æµå‡†å¤‡é€»è¾‘
    }
    
    // è¥é”€æœåŠ¡ï¼šå‘é€ç¡®è®¤é‚®ä»¶
    @EventListener
    @Async
    public void sendOrderConfirmation(OrderCreatedEvent event) {
        Order order = event.getOrder();
        System.out.println("ğŸ“§ å‘é€è®¢å•ç¡®è®¤é‚®ä»¶ï¼š" + order.getCustomerEmail());
        // å‘é€é‚®ä»¶é€»è¾‘
    }
    
    // æ•°æ®æœåŠ¡ï¼šæ›´æ–°é”€å”®ç»Ÿè®¡ï¼ˆäº‹åŠ¡æäº¤åæ‰§è¡Œï¼‰
    @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
    public void updateSalesStatistics(OrderCreatedEvent event) {
        Order order = event.getOrder();
        System.out.println("ğŸ“Š æ›´æ–°é”€å”®ç»Ÿè®¡æ•°æ®");
        // ç»Ÿè®¡æ›´æ–°é€»è¾‘
    }
}
```

**ğŸ“Š æ‰§è¡Œæ•ˆæœ**ï¼š
```
å®¢æˆ·ä¸‹å•åçš„æ‰§è¡Œæµç¨‹ï¼š

ğŸ“¦ è®¢å•åˆ›å»ºå®Œæˆï¼šORD20250123001
ğŸ“¦ æ‰£å‡å•†å“åº“å­˜ï¼šiPhone 15
ğŸ’³ åˆ›å»ºæ”¯ä»˜å•ï¼š5999.00
ğŸ“§ å¼‚æ­¥å‘é€è®¢å•ç¡®è®¤é‚®ä»¶ï¼šcustomer@example.com  
ğŸšš å¼‚æ­¥å‡†å¤‡ç‰©æµå‘è´§ï¼šåŒ—äº¬å¸‚æœé˜³åŒº...
ğŸ“Š æ›´æ–°é”€å”®ç»Ÿè®¡æ•°æ®ï¼ˆäº‹åŠ¡æäº¤åæ‰§è¡Œï¼‰
```

---

## 9. ğŸŒ å›½é™…åŒ–ä¸èµ„æºç®¡ç†ï¼šè®©åº”ç”¨æ”¯æŒå¤šè¯­è¨€


### 9.1 ä»€ä¹ˆæ˜¯å›½é™…åŒ–(i18n)ï¼Ÿ


**ğŸ—ºï¸ å›½é™…åŒ–å°±åƒç»™åº”ç”¨é…å¤‡ç¿»è¯‘å®˜**ï¼š

```
æ²¡æœ‰å›½é™…åŒ–çš„åº”ç”¨ï¼š
ç”¨æˆ·ç•Œé¢ â”€â”€â”€â”€â”€> "æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿ"
                    â”‚
                    â””â”€ åªæœ‰ä¸­æ–‡ï¼Œå¤–å›½ç”¨æˆ·çœ‹ä¸æ‡‚

æœ‰å›½é™…åŒ–çš„åº”ç”¨ï¼š
ç”¨æˆ·ç•Œé¢ â”€â”€â”€â”€â”€> æ£€æµ‹ç”¨æˆ·è¯­è¨€
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
    "æ¬¢è¿ä½¿ç”¨..."   "Welcome..."  "Bienvenido..."
    (ä¸­æ–‡ç”¨æˆ·)     (è‹±æ–‡ç”¨æˆ·)    (è¥¿ç­ç‰™è¯­ç”¨æˆ·)
```

### 9.2 Springå›½é™…åŒ–é…ç½®


**ğŸ”§ æ­å»ºå›½é™…åŒ–ç¯å¢ƒçš„ä¸‰æ­¥èµ°**ï¼š

**æ­¥éª¤1ï¼šåˆ›å»ºèµ„æºæ–‡ä»¶**
```
resources/
â”œâ”€â”€ messages.properties          (é»˜è®¤ï¼Œé€šå¸¸æ˜¯è‹±æ–‡)
â”œâ”€â”€ messages_zh_CN.properties   (ä¸­æ–‡)
â”œâ”€â”€ messages_en_US.properties   (ç¾å¼è‹±æ–‡)  
â””â”€â”€ messages_ja_JP.properties   (æ—¥æ–‡)
```

**messages.properties (é»˜è®¤è‹±æ–‡)**
```properties
# ç”¨æˆ·ç›¸å…³
user.welcome=Welcome to our system!
user.login.success=Login successful
user.login.failed=Invalid username or password
user.register.title=User Registration

# è®¢å•ç›¸å…³  
order.create.success=Order created successfully
order.payment.pending=Payment pending
order.shipped=Order has been shipped

# é”™è¯¯æ¶ˆæ¯
error.required=This field is required
error.email.invalid=Please enter a valid email address
```

**messages_zh_CN.properties (ä¸­æ–‡)**
```properties
# ç”¨æˆ·ç›¸å…³
user.welcome=æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿï¼
user.login.success=ç™»å½•æˆåŠŸ
user.login.failed=ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
user.register.title=ç”¨æˆ·æ³¨å†Œ

# è®¢å•ç›¸å…³
order.create.success=è®¢å•åˆ›å»ºæˆåŠŸ
order.payment.pending=ç­‰å¾…æ”¯ä»˜
order.shipped=è®¢å•å·²å‘è´§

# é”™è¯¯æ¶ˆæ¯
error.required=æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹
error.email.invalid=è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€
```

**æ­¥éª¤2ï¼šé…ç½®æ¶ˆæ¯æº**
```java
@Configuration
public class I18nConfig {
    
    // é…ç½®æ¶ˆæ¯æº
    @Bean
    public MessageSource messageSource() {
        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
        messageSource.setBasename("messages");  // èµ„æºæ–‡ä»¶å‰ç¼€
        messageSource.setDefaultEncoding("UTF-8");  // è®¾ç½®ç¼–ç 
        messageSource.setCacheSeconds(3600);  // ç¼“å­˜1å°æ—¶
        return messageSource;
    }
    
    // é…ç½®è¯­è¨€è§£æå™¨
    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver resolver = new SessionLocaleResolver();
        resolver.setDefaultLocale(Locale.CHINA);  // é»˜è®¤ä¸­æ–‡
        return resolver;
    }
    
    // é…ç½®è¯­è¨€åˆ‡æ¢æ‹¦æˆªå™¨
    @Bean
    public LocaleChangeInterceptor localeChangeInterceptor() {
        LocaleChangeInterceptor interceptor = new LocaleChangeInterceptor();
        interceptor.setParamName("lang");  // URLå‚æ•°åï¼š?lang=en
        return interceptor;
    }
}
```

**æ­¥éª¤3ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨**
```java
@Service
public class UserService {
    
    @Autowired
    private MessageSource messageSource;
    
    public String loginUser(String username, String password, Locale locale) {
        if (isValidUser(username, password)) {
            // è·å–å½“å‰è¯­è¨€çš„æˆåŠŸæ¶ˆæ¯
            return messageSource.getMessage("user.login.success", null, locale);
        } else {
            // è·å–å½“å‰è¯­è¨€çš„å¤±è´¥æ¶ˆæ¯  
            return messageSource.getMessage("user.login.failed", null, locale);
        }
    }
    
    // å¸¦å‚æ•°çš„æ¶ˆæ¯
    public String welcomeUser(String username, Locale locale) {
        Object[] args = {username};
        return messageSource.getMessage("user.welcome.withName", args, locale);
    }
}
```

### 9.3 Webç¯å¢ƒä¸­çš„è¯­è¨€åˆ‡æ¢


**ğŸŒ åœ¨Webåº”ç”¨ä¸­å®ç°è¯­è¨€åˆ‡æ¢**ï¼š

```java
@Controller
public class LanguageController {
    
    @Autowired
    private MessageSource messageSource;
    
    // æ˜¾ç¤ºå¤šè¯­è¨€é¡µé¢
    @GetMapping("/welcome")
    public String welcome(Model model, Locale locale) {
        
        // è·å–å½“å‰è¯­è¨€çš„æ¶ˆæ¯
        String welcomeMsg = messageSource.getMessage("user.welcome", null, locale);
        String loginTitle = messageSource.getMessage("user.login.title", null, locale);
        
        model.addAttribute("welcomeMessage", welcomeMsg);
        model.addAttribute("loginTitle", loginTitle);
        model.addAttribute("currentLocale", locale.getDisplayName());
        
        return "welcome";
    }
    
    // è¯­è¨€åˆ‡æ¢API
    @PostMapping("/changeLanguage")
    @ResponseBody
    public Map<String, String> changeLanguage(@RequestParam String lang, 
                                             HttpServletRequest request,
                                             HttpServletResponse response) {
        
        // è®¾ç½®æ–°çš„è¯­è¨€ç¯å¢ƒ
        Locale newLocale = Locale.forLanguageTag(lang);
        LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);
        localeResolver.setLocale(request, response, newLocale);
        
        // è¿”å›æ–°è¯­è¨€çš„æ¶ˆæ¯
        Map<String, String> messages = new HashMap<>();
        messages.put("welcome", messageSource.getMessage("user.welcome", null, newLocale));
        messages.put("success", messageSource.getMessage("change.language.success", null, newLocale));
        
        return messages;
    }
}
```

### 9.4 èµ„æºæ–‡ä»¶çš„é«˜çº§ç‰¹æ€§


**ğŸ¯ æ¶ˆæ¯æ ¼å¼åŒ–å’ŒåŠ¨æ€å‚æ•°**ï¼š

**messages.properties**
```properties
# å¸¦å‚æ•°çš„æ¶ˆæ¯ï¼ˆä½¿ç”¨{0}, {1}å ä½ç¬¦ï¼‰
user.welcome.withName=Welcome, {0}! You have {1} unread messages.
order.total=Order total: ${0,number,currency}
time.created=Created at {0,date,full} {0,time,short}

# å¤æ•°å½¢å¼å¤„ç†
item.count={0,choice,0#No items|1#One item|1<{0,number,integer} items}

# æ¡ä»¶æ¶ˆæ¯
user.status={0,choice,0#Offline|1#Online|2#Away|3#Busy}
```

**messages_zh_CN.properties**
```properties
user.welcome.withName=æ¬¢è¿ï¼Œ{0}ï¼æ‚¨æœ‰{1}æ¡æœªè¯»æ¶ˆæ¯ã€‚
order.total=è®¢å•æ€»è®¡ï¼šï¿¥{0,number,#,##0.00}
time.created=åˆ›å»ºæ—¶é—´ï¼š{0,date,yyyyå¹´MMæœˆddæ—¥} {0,time,HH:mm}

item.count={0,choice,0#æ²¡æœ‰å•†å“|1#1ä¸ªå•†å“|1<{0,number,integer}ä¸ªå•†å“}
user.status={0,choice,0#ç¦»çº¿|1#åœ¨çº¿|2#ç¦»å¼€|3#å¿™ç¢Œ}
```

**Javaä»£ç ä¸­ä½¿ç”¨**ï¼š
```java
@Service
public class MessageService {
    
    @Autowired
    private MessageSource messageSource;
    
    public void demonstrateMessageFormatting(Locale locale) {
        
        // å¸¦å‚æ•°çš„æ¬¢è¿æ¶ˆæ¯
        Object[] welcomeArgs = {"å¼ ä¸‰", 5};
        String welcome = messageSource.getMessage("user.welcome.withName", welcomeArgs, locale);
        System.out.println(welcome);  // ä¸­æ–‡ï¼šæ¬¢è¿ï¼Œå¼ ä¸‰ï¼æ‚¨æœ‰5æ¡æœªè¯»æ¶ˆæ¯ã€‚
        
        // è´§å¸æ ¼å¼
        Object[] priceArgs = {1234.56};
        String orderTotal = messageSource.getMessage("order.total", priceArgs, locale);
        System.out.println(orderTotal);  // ä¸­æ–‡ï¼šè®¢å•æ€»è®¡ï¼šï¿¥1,234.56
        
        // æ—¶é—´æ ¼å¼
        Object[] timeArgs = {new Date()};
        String timeCreated = messageSource.getMessage("time.created", timeArgs, locale);
        System.out.println(timeCreated);  // ä¸­æ–‡ï¼šåˆ›å»ºæ—¶é—´ï¼š2025å¹´01æœˆ23æ—¥ 14:30
        
        // å¤æ•°å¤„ç†
        for (int count : new int[]{0, 1, 5}) {
            Object[] countArgs = {count};
            String itemMessage = messageSource.getMessage("item.count", countArgs, locale);
            System.out.println(count + " -> " + itemMessage);
        }
        // è¾“å‡ºï¼š0 -> æ²¡æœ‰å•†å“
        //      1 -> 1ä¸ªå•†å“  
        //      5 -> 5ä¸ªå•†å“
    }
}
```

---

## 10. ğŸ§ª å¿…åšå®éªŒæ¸…å•ä¸å­¦ä¹ è·¯å¾„


### 10.1 å®éªŒæ¸…å•è¯¦è§£


**ğŸ¯ æŒ‰éš¾åº¦é€’è¿›çš„å®éªŒå®‰æ’**ï¼š

#### **å…¥é—¨çº§å®éªŒ (â˜…â˜†â˜†)**


**ğŸ”¬ å®éªŒ1ï¼šæœ€å°IoCå®¹å™¨é¡¹ç›®æ­å»º**
```java
// ç›®æ ‡ï¼šç†è§£Springå®¹å™¨çš„åŸºæœ¬å·¥ä½œåŸç†
// æ—¶é—´ï¼š1-2å°æ—¶

// åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„Springé¡¹ç›®
@Configuration
public class MinimalConfig {
    
    @Bean
    public UserService userService() {
        return new UserService();
    }
}

public class SpringMinimalApp {
    public static void main(String[] args) {
        ApplicationContext context = new AnnotationConfigApplicationContext(MinimalConfig.class);
        UserService userService = context.getBean(UserService.class);
        System.out.println("ğŸ‰ Springå®¹å™¨å·¥ä½œæ­£å¸¸ï¼š" + userService);
    }
}

// ğŸ“ å®éªŒè¦ç‚¹ï¼š
// 1. ç†è§£ApplicationContextçš„ä½œç”¨
// 2. è§‚å¯ŸBeançš„åˆ›å»ºå’Œè·å–è¿‡ç¨‹
// 3. å¯¹æ¯”æœ‰æ— Springçš„ä»£ç å·®å¼‚
```

**ğŸ”¬ å®éªŒ2ï¼šä¸‰ç§ä¾èµ–æ³¨å…¥æ–¹å¼å¯¹æ¯”å®éªŒ**
```java
// ç›®æ ‡ï¼šæŒæ¡ä¾èµ–æ³¨å…¥çš„ä¸‰ç§æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹
// æ—¶é—´ï¼š2-3å°æ—¶

// å‡†å¤‡è¢«æ³¨å…¥çš„å¯¹è±¡
@Component
public class DatabaseService {
    public void save(String data) {
        System.out.println("ğŸ’¾ ä¿å­˜æ•°æ®ï¼š" + data);
    }
}

// æ–¹å¼1ï¼šæ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰
@Service
public class UserService1 {
    private final DatabaseService databaseService;
    
    public UserService1(DatabaseService databaseService) {
        this.databaseService = databaseService;
        System.out.println("ğŸ—ï¸ æ„é€ å™¨æ³¨å…¥å®Œæˆ");
    }
}

// æ–¹å¼2ï¼šSetteræ³¨å…¥  
@Service
public class UserService2 {
    private DatabaseService databaseService;
    
    @Autowired
    public void setDatabaseService(DatabaseService databaseService) {
        this.databaseService = databaseService;
        System.out.println("âš™ï¸ Setteræ³¨å…¥å®Œæˆ");
    }
}

// æ–¹å¼3ï¼šå­—æ®µæ³¨å…¥
@Service  
public class UserService3 {
    @Autowired
    private DatabaseService databaseService;
    
    @PostConstruct
    public void init() {
        System.out.println("ğŸ’‰ å­—æ®µæ³¨å…¥å®Œæˆ");
    }
}

// ğŸ“Š å¯¹æ¯”æµ‹è¯•
// 1. æµ‹è¯•å„ç§æ–¹å¼çš„Beanåˆ›å»ºé¡ºåº
// 2. æµ‹è¯•å¾ªç¯ä¾èµ–çš„å¤„ç†
// 3. æµ‹è¯•å•å…ƒæµ‹è¯•çš„ä¾¿åˆ©æ€§
```

#### **è¿›é˜¶çº§å®éªŒ (â˜…â˜…â˜†)**


**ğŸ”¬ å®éªŒ3ï¼š@Primaryä¸@Qualifierå†²çªè§£å†³**
```java
// ç›®æ ‡ï¼šè§£å†³å¤šä¸ªåŒç±»å‹Beançš„æ³¨å…¥é—®é¢˜
// æ—¶é—´ï¼š1-2å°æ—¶

// åˆ›å»ºæ¥å£å’Œå¤šä¸ªå®ç°
public interface PaymentService {
    void pay(double amount);
}

@Service
@Primary  // é»˜è®¤é¦–é€‰
public class AlipayService implements PaymentService {
    public void pay(double amount) {
        System.out.println("ğŸ’° æ”¯ä»˜å®æ”¯ä»˜ï¼š" + amount);
    }
}

@Service
@Qualifier("wechat")  // æŒ‡å®šåç§°
public class WechatPayService implements PaymentService {
    public void pay(double amount) {
        System.out.println("ğŸ’š å¾®ä¿¡æ”¯ä»˜ï¼š" + amount);
    }
}

@Service
@Qualifier("bank")
public class BankCardService implements PaymentService {
    public void pay(double amount) {
        System.out.println("ğŸ¦ é“¶è¡Œå¡æ”¯ä»˜ï¼š" + amount);
    }
}

// ä½¿ç”¨ä¸åŒçš„æ³¨å…¥æ–¹å¼
@Controller
public class OrderController {
    
    // é»˜è®¤æ³¨å…¥ï¼ˆä¼šé€‰æ‹©@Primaryï¼‰
    @Autowired
    private PaymentService defaultPayment;  // AlipayService
    
    // æŒ‡å®šæ³¨å…¥
    @Autowired
    @Qualifier("wechat")
    private PaymentService wechatPayment;  // WechatPayService
    
    // æŒ‰åç§°æ³¨å…¥
    @Resource(name = "bankCardService")  
    private PaymentService bankPayment;  // BankCardService
    
    // ğŸ“ å®éªŒä»»åŠ¡ï¼š
    // 1. æµ‹è¯•å„ç§æ³¨å…¥æ–¹å¼çš„ç»“æœ
    // 2. å°è¯•æ³¨é‡Š@Primaryï¼Œè§‚å¯Ÿå¼‚å¸¸
    // 3. å®ç°åŠ¨æ€æ”¯ä»˜æ–¹å¼é€‰æ‹©
}
```

**ğŸ”¬ å®éªŒ4ï¼šè‡ªå®šä¹‰BeanPostProcessorå®ç°**
```java
// ç›®æ ‡ï¼šç†è§£Beançš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œå®ç°è‡ªå®šä¹‰å¤„ç†é€»è¾‘
// æ—¶é—´ï¼š2-3å°æ—¶

// è‡ªå®šä¹‰æ³¨è§£
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Monitor {
    String value() default "";
}

// è‡ªå®šä¹‰BeanPostProcessor
@Component
public class MonitorBeanPostProcessor implements BeanPostProcessor {
    
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) {
        if (bean.getClass().isAnnotationPresent(Monitor.class)) {
            Monitor monitor = bean.getClass().getAnnotation(Monitor.class);
            System.out.println("ğŸ” ç›‘æ§Beanåˆå§‹åŒ–å‰ï¼š" + beanName + ", æè¿°ï¼š" + monitor.value());
        }
        return bean;
    }
    
    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) {
        if (bean.getClass().isAnnotationPresent(Monitor.class)) {
            System.out.println("âœ… ç›‘æ§Beanåˆå§‹åŒ–åï¼š" + beanName + " å·²å°±ç»ª");
            
            // å¯ä»¥è¿”å›ä»£ç†å¯¹è±¡
            return createMonitorProxy(bean);
        }
        return bean;
    }
    
    private Object createMonitorProxy(Object target) {
        return Proxy.newProxyInstance(
            target.getClass().getClassLoader(),
            target.getClass().getInterfaces(),
            (proxy, method, args) -> {
                long start = System.currentTimeMillis();
                Object result = method.invoke(target, args);
                long end = System.currentTimeMillis();
                System.out.println("â±ï¸ " + method.getName() + " æ‰§è¡Œè€—æ—¶ï¼š" + (end - start) + "ms");
                return result;
            }
        );
    }
}

// ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£çš„Bean
@Monitor("ç”¨æˆ·æœåŠ¡ç›‘æ§")
@Service
public class MonitoredUserService implements UserService {
    
    @PostConstruct
    public void init() {
        System.out.println("ğŸš€ MonitoredUserService åˆå§‹åŒ–å®Œæˆ");
    }
    
    @Override
    public void createUser(String name) {
        System.out.println("ğŸ‘¤ åˆ›å»ºç”¨æˆ·ï¼š" + name);
        // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
        try { Thread.sleep(100); } catch (InterruptedException e) {}
    }
}

// ğŸ“ å®éªŒç›®æ ‡ï¼š
// 1. è§‚å¯ŸBeançš„åˆ›å»ºå’Œåˆå§‹åŒ–è¿‡ç¨‹  
// 2. å®ç°æ€§èƒ½ç›‘æ§åŠŸèƒ½
// 3. ç†è§£ä»£ç†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨
```

#### **é«˜çº§çº§å®éªŒ (â˜…â˜…â˜…)**


**ğŸ”¬ å®éªŒ5ï¼šæ„é€ å™¨å¾ªç¯ä¾èµ–å¤ç°ä¸ä¿®å¤**
```java
// ç›®æ ‡ï¼šç†è§£å¾ªç¯ä¾èµ–é—®é¢˜åŠSpringçš„è§£å†³æ–¹æ¡ˆ
// æ—¶é—´ï¼š3-4å°æ—¶

// åˆ›å»ºå¾ªç¯ä¾èµ–åœºæ™¯
@Service
public class OrderService {
    private final CustomerService customerService;
    
    public OrderService(CustomerService customerService) {
        this.customerService = customerService;
        System.out.println("ğŸ“¦ OrderService åˆ›å»ºå®Œæˆ");
    }
}

@Service  
public class CustomerService {
    private final OrderService orderService;
    
    public CustomerService(OrderService orderService) {
        this.orderService = orderService;
        System.out.println("ğŸ‘¤ CustomerService åˆ›å»ºå®Œæˆ");
    }
}

// è¿è¡Œæµ‹è¯•ä¼šæŠ›å‡ºå¾ªç¯ä¾èµ–å¼‚å¸¸
// BeanCurrentlyInCreationException: Error creating bean with name 'orderService'

// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨@Lazyæ³¨è§£
@Service
public class OrderServiceFixed1 {
    private final CustomerService customerService;
    
    public OrderServiceFixed1(@Lazy CustomerService customerService) {
        this.customerService = customerService;
    }
}

// è§£å†³æ–¹æ¡ˆ2ï¼šæ”¹ä¸ºSetteræ³¨å…¥
@Service
public class OrderServiceFixed2 {
    private CustomerService customerService;
    
    @Autowired
    public void setCustomerService(CustomerService customerService) {
        this.customerService = customerService;
    }
}

// è§£å†³æ–¹æ¡ˆ3ï¼šé‡æ–°è®¾è®¡ï¼Œæ¶ˆé™¤å¾ªç¯ä¾èµ–
@Service
public class OrderServiceFixed3 {
    private final ApplicationEventPublisher eventPublisher;
    
    public OrderServiceFixed3(ApplicationEventPublisher eventPublisher) {
        this.eventPublisher = eventPublisher;
    }
    
    public void createOrder() {
        // é€šè¿‡äº‹ä»¶è§£è€¦
        eventPublisher.publishEvent(new OrderCreatedEvent(this));
    }
}

// ğŸ“ å®éªŒä»»åŠ¡ï¼š
// 1. å¤ç°å¾ªç¯ä¾èµ–å¼‚å¸¸
// 2. æµ‹è¯•ä¸‰ç§è§£å†³æ–¹æ¡ˆçš„æ•ˆæœ
// 3. åˆ†æSpringä¸‰çº§ç¼“å­˜çš„å·¥ä½œåŸç†
// 4. è®¾è®¡æ›´å¥½çš„æ¶æ„é¿å…å¾ªç¯ä¾èµ–
```

**ğŸ”¬ å®éªŒ6ï¼š@Aspectæ—¥å¿—åˆ‡é¢ä¸æ€§èƒ½åˆ‡é¢**
```java
// ç›®æ ‡ï¼šæŒæ¡AOPçš„å®é™…åº”ç”¨ï¼Œå®ç°æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§
// æ—¶é—´ï¼š3-4å°æ—¶

// å¯ç”¨AOP
@Configuration
@EnableAspectJAutoProxy
public class AopConfig {
}

// æ—¥å¿—åˆ‡é¢
@Aspect
@Component
public class LoggingAspect {
    
    private static final Logger logger = LoggerFactory.getLogger(LoggingAspect.class);
    
    // åˆ‡å…¥ç‚¹ï¼šæ‰€æœ‰Controllerçš„publicæ–¹æ³•
    @Pointcut("execution(public * com.example.controller.*.*(..))")
    public void controllerMethods() {}
    
    // åˆ‡å…¥ç‚¹ï¼šæ‰€æœ‰Serviceçš„publicæ–¹æ³•
    @Pointcut("execution(public * com.example.service.*.*(..))")
    public void serviceMethods() {}
    
    // å‰ç½®é€šçŸ¥ï¼šè®°å½•æ–¹æ³•è°ƒç”¨
    @Before("controllerMethods() || serviceMethods()")
    public void logMethodCall(JoinPoint joinPoint) {
        String className = joinPoint.getTarget().getClass().getSimpleName();
        String methodName = joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();
        
        logger.info("ğŸ” [{}] è°ƒç”¨æ–¹æ³•: {}.{}(), å‚æ•°: {}", 
                   getCurrentTime(), className, methodName, Arrays.toString(args));
    }
    
    // åç½®è¿”å›é€šçŸ¥ï¼šè®°å½•è¿”å›ç»“æœ
    @AfterReturning(pointcut = "serviceMethods()", returning = "result")
    public void logMethodReturn(JoinPoint joinPoint, Object result) {
        String className = joinPoint.getTarget().getClass().getSimpleName();
        String methodName = joinPoint.getSignature().getName();
        
        logger.info("âœ… [{}] æ–¹æ³•è¿”å›: {}.{}(), ç»“æœ: {}", 
                   getCurrentTime(), className, methodName, result);
    }
    
    // å¼‚å¸¸é€šçŸ¥ï¼šè®°å½•å¼‚å¸¸
    @AfterThrowing(pointcut = "serviceMethods()", throwing = "ex")
    public void logMethodException(JoinPoint joinPoint, Throwable ex) {
        String className = joinPoint.getTarget().getClass().getSimpleName();
        String methodName = joinPoint.getSignature().getName();
        
        logger.error("âŒ [{}] æ–¹æ³•å¼‚å¸¸: {}.{}(), å¼‚å¸¸: {}", 
                    getCurrentTime(), className, methodName, ex.getMessage());
    }
}

// æ€§èƒ½ç›‘æ§åˆ‡é¢
@Aspect
@Component
public class PerformanceAspect {
    
    private static final Logger logger = LoggerFactory.getLogger(PerformanceAspect.class);
    
    // ç¯ç»•é€šçŸ¥ï¼šç›‘æ§æ–¹æ³•æ‰§è¡Œæ—¶é—´
    @Around("@annotation(com.example.annotation.Monitor) || execution(* com.example.service.*.*(..))")
    public Object monitorPerformance(ProceedingJoinPoint joinPoint) throws Throwable {
        
        long startTime = System.currentTimeMillis();
        String className = joinPoint.getTarget().getClass().getSimpleName();
        String methodName = joinPoint.getSignature().getName();
        
        try {
            // æ‰§è¡Œç›®æ ‡æ–¹æ³•
            Object result = joinPoint.proceed();
            
            long executionTime = System.currentTimeMillis() - startTime;
            
            // æ ¹æ®æ‰§è¡Œæ—¶é—´ä½¿ç”¨ä¸åŒçš„æ—¥å¿—çº§åˆ«
            if (executionTime > 1000) {
                logger.warn("ğŸŒ [{}] æ…¢æŸ¥è¯¢è­¦å‘Š: {}.{}() è€—æ—¶ {}ms", 
                           getCurrentTime(), className, methodName, executionTime);
            } else if (executionTime > 500) {
                logger.info("â° [{}] æ€§èƒ½ç›‘æ§: {}.{}() è€—æ—¶ {}ms", 
                           getCurrentTime(), className, methodName, executionTime);
            } else {
                logger.debug("âš¡ [{}] å¿«é€Ÿæ‰§è¡Œ: {}.{}() è€—æ—¶ {}ms", 
                            getCurrentTime(), className, methodName, executionTime);
            }
            
            return result;
            
        } catch (Throwable ex) {
            long executionTime = System.currentTimeMillis() - startTime;
            logger.error("ğŸ’¥ [{}] æ‰§è¡Œå¼‚å¸¸: {}.{}() è€—æ—¶ {}ms, å¼‚å¸¸: {}", 
                        getCurrentTime(), className, methodName, executionTime, ex.getMessage());
            throw ex;
        }
    }
    
    private String getCurrentTime() {
        return LocalDateTime.now().format(DateTimeFormatter.ofPattern("HH:mm:ss.SSS"));
    }
}

// æµ‹è¯•ä¸šåŠ¡ç±»
@Service
public class UserService {
    
    public User findUserById(Long id) {
        // æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢
        try { Thread.sleep(300); } catch (InterruptedException e) {}
        return new User(id, "å¼ ä¸‰");
    }
    
    @Monitor  // è‡ªå®šä¹‰ç›‘æ§æ³¨è§£
    public void slowMethod() {
        // æ¨¡æ‹Ÿæ…¢æ–¹æ³•
        try { Thread.sleep(1200); } catch (InterruptedException e) {}
    }
    
    public void methodWithException() {
        throw new RuntimeException("æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸");
    }
}

// ğŸ“ å®éªŒä»»åŠ¡ï¼š
// 1. è§‚å¯Ÿä¸åŒåˆ‡é¢çš„æ‰§è¡Œé¡ºåº
// 2. æµ‹è¯•å„ç§é€šçŸ¥ç±»å‹çš„è§¦å‘æ¡ä»¶
// 3. å®ç°è‡ªå®šä¹‰æ³¨è§£é©±åŠ¨çš„åˆ‡é¢
// 4. åˆ†æAOPå¯¹æ€§èƒ½çš„å½±å“
```

### 10.2 å­¦ä¹ è·¯å¾„è§„åˆ’


**ğŸ›¤ï¸ 12å‘¨Springå­¦ä¹ è®¡åˆ’**ï¼š

```
Spring Framework å­¦ä¹ è·¯çº¿å›¾ï¼š

ç¬¬1-2å‘¨ï¼šåŸºç¡€æ¦‚å¿µ ğŸŒ±
â”œâ”€ IoCå®¹å™¨åŸç†ç†è§£
â”œâ”€ ä¾èµ–æ³¨å…¥ä¸‰ç§æ–¹å¼
â”œâ”€ åŸºæœ¬é…ç½®æ–¹æ³•æŒæ¡
â””â”€ å®éªŒ1-2å®Œæˆ

ç¬¬3-4å‘¨ï¼šé…ç½®è¿›é˜¶ ğŸ”§
â”œâ”€ XMLé…ç½®è¯¦è§£  
â”œâ”€ æ³¨è§£é…ç½®ä½¿ç”¨
â”œâ”€ Javaé…ç½®æŒæ¡
â””â”€ å®éªŒ3å®Œæˆ

ç¬¬5-6å‘¨ï¼šBeanç”Ÿå‘½å‘¨æœŸ ğŸŒ±â¡ï¸ğŸŒ³
â”œâ”€ Beanåˆ›å»ºè¿‡ç¨‹
â”œâ”€ åˆå§‹åŒ–å’Œé”€æ¯
â”œâ”€ BeanPostProcessor
â””â”€ å®éªŒ4-5å®Œæˆ

ç¬¬7-8å‘¨ï¼šAOPåˆ‡é¢ç¼–ç¨‹ ğŸ¯
â”œâ”€ åˆ‡é¢æ¦‚å¿µç†è§£
â”œâ”€ é€šçŸ¥ç±»å‹æŒæ¡
â”œâ”€ åˆ‡å…¥ç‚¹è¡¨è¾¾å¼
â””â”€ å®éªŒ6-8å®Œæˆ

ç¬¬9-10å‘¨ï¼šé«˜çº§ç‰¹æ€§ ğŸš€
â”œâ”€ SpELè¡¨è¾¾å¼è¯­è¨€
â”œâ”€ äº‹ä»¶é©±åŠ¨ç¼–ç¨‹
â”œâ”€ æ¡ä»¶æ³¨è§£ä½¿ç”¨
â””â”€ å®éªŒ9-10å®Œæˆ

ç¬¬11-12å‘¨ï¼šå›½é™…åŒ–å’Œæ•´åˆ ğŸŒ
â”œâ”€ å›½é™…åŒ–é…ç½®
â”œâ”€ èµ„æºæ–‡ä»¶ç®¡ç†
â”œâ”€ ä¸å…¶ä»–æŠ€æœ¯æ•´åˆ
â””â”€ å®éªŒ11-12å®Œæˆ
```

### 10.3 å­¦ä¹ æ•ˆæœæ£€éªŒ


**ğŸ“Š æ¯å‘¨è‡ªæ£€æ¸…å•**ï¼š

> **âœ… ç¬¬1-2å‘¨æ£€éªŒ**
> 
> - [ ] èƒ½å¤Ÿè§£é‡Šä»€ä¹ˆæ˜¯IoCå’ŒDI
> - [ ] èƒ½å¤Ÿåˆ›å»ºæœ€åŸºæœ¬çš„Springé¡¹ç›®
> - [ ] ç†è§£ApplicationContextçš„ä½œç”¨
> - [ ] æŒæ¡@Componentã€@Serviceç­‰åŸºæœ¬æ³¨è§£

> **âœ… ç¬¬3-4å‘¨æ£€éªŒ**
> 
> - [ ] èƒ½å¤Ÿä½¿ç”¨ä¸‰ç§é…ç½®æ–¹å¼
> - [ ] ç†è§£@Autowiredã€@Resourceçš„åŒºåˆ«
> - [ ] èƒ½å¤Ÿè§£å†³Beanå†²çªé—®é¢˜
> - [ ] æŒæ¡ä½œç”¨åŸŸçš„ä½¿ç”¨

> **âœ… ç¬¬5-6å‘¨æ£€éªŒ**
> 
> - [ ] ç†è§£Beançš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
> - [ ] èƒ½å¤Ÿè‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•
> - [ ] æŒæ¡BeanPostProcessorçš„ä½¿ç”¨
> - [ ] èƒ½å¤Ÿå¤„ç†å¾ªç¯ä¾èµ–é—®é¢˜

> **âœ… ç¬¬7-8å‘¨æ£€éªŒ**
> 
> - [ ] ç†è§£AOPçš„æ ¸å¿ƒæ¦‚å¿µ
> - [ ] èƒ½å¤Ÿç¼–å†™å„ç§ç±»å‹çš„é€šçŸ¥
> - [ ] æŒæ¡åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­æ³•
> - [ ] èƒ½å¤Ÿå®ç°å®é™…çš„ä¸šåŠ¡åˆ‡é¢

> **âœ… ç¬¬9-10å‘¨æ£€éªŒ**
> 
> - [ ] æŒæ¡SpELè¡¨è¾¾å¼çš„ä½¿ç”¨
> - [ ] èƒ½å¤Ÿä½¿ç”¨äº‹ä»¶é©±åŠ¨ç¼–ç¨‹
> - [ ] ç†è§£æ¡ä»¶æ³¨è§£çš„ä½¿ç”¨åœºæ™¯
> - [ ] èƒ½å¤Ÿä¼˜åŒ–åº”ç”¨æ€§èƒ½

> **âœ… ç¬¬11-12å‘¨æ£€éªŒ**
> 
> - [ ] èƒ½å¤Ÿé…ç½®å¤šè¯­è¨€æ”¯æŒ
> - [ ] æŒæ¡èµ„æºæ–‡ä»¶çš„ç®¡ç†
> - [ ] ç†è§£Springä¸å…¶ä»–æ¡†æ¶çš„æ•´åˆ
> - [ ] èƒ½å¤Ÿç‹¬ç«‹å¼€å‘å®Œæ•´é¡¹ç›®

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ IoCå®¹å™¨ï¼šSpringçš„å¿ƒè„ï¼Œç®¡ç†æ‰€æœ‰å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ
ğŸ”¸ ä¾èµ–æ³¨å…¥ï¼šè®©å¯¹è±¡ä¹‹é—´çš„å…³ç³»å˜å¾—æ¾æ•£ï¼Œæé«˜å¯æµ‹è¯•æ€§
ğŸ”¸ Beanç”Ÿå‘½å‘¨æœŸï¼šç†è§£å¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯çš„å®Œæ•´è¿‡ç¨‹
ğŸ”¸ AOPåˆ‡é¢ï¼šåœ¨ä¸ä¿®æ”¹ä»£ç çš„å‰æä¸‹å¢åŠ åŠŸèƒ½
ğŸ”¸ é…ç½®æ–¹å¼ï¼šæŒæ¡XMLã€æ³¨è§£ã€Javaä¸‰ç§é…ç½®æ–¹å¼
ğŸ”¸ SpELè¡¨è¾¾å¼ï¼šSpringçš„å†…ç½®è¡¨è¾¾å¼è¯­è¨€
ğŸ”¸ äº‹ä»¶é©±åŠ¨ï¼šè®©ç»„ä»¶ä¹‹é—´è§£è€¦é€šä¿¡
ğŸ”¸ å›½é™…åŒ–ï¼šæ”¯æŒå¤šè¯­è¨€çš„åº”ç”¨å¼€å‘
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆSpringè¿™ä¹ˆé‡è¦**
```
è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š
- å¯¹è±¡åˆ›å»ºå’Œç®¡ç†çš„å¤æ‚æ€§
- ç»„ä»¶ä¹‹é—´çš„å¼ºè€¦åˆå…³ç³»  
- æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä»£ç é‡å¤
- é…ç½®å’Œä»£ç çš„æ··åˆ

æä¾›çš„æ ¸å¿ƒä»·å€¼ï¼š
- ç®€åŒ–ä¼ä¸šçº§Javaå¼€å‘
- æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§
- å¢å¼ºç³»ç»Ÿçš„å¯æµ‹è¯•æ€§
- æ”¯æŒå„ç§æ¶æ„æ¨¡å¼
```

**ğŸ”¹ Springçš„è®¾è®¡å“²å­¦**
```
éä¾µå…¥å¼ï¼š
- ä¸å¼ºåˆ¶ç»§æ‰¿Springçš„ç±»
- å¯ä»¥ç‹¬ç«‹äºSpringè¿è¡Œ
- æ¸è¿›å¼å¼•å…¥åˆ°ç°æœ‰é¡¹ç›®

çº¦å®šä¼˜äºé…ç½®ï¼š
- æä¾›åˆç†çš„é»˜è®¤å€¼
- å‡å°‘ä¸å¿…è¦çš„é…ç½®
- éµå¾ªå‘½åçº¦å®š

é¢å‘æ¥å£ç¼–ç¨‹ï¼š
- ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- æé«˜ç³»ç»Ÿçš„çµæ´»æ€§
- æ”¯æŒå¤šç§å®ç°æ–¹å¼
```

**ğŸ”¹ å­¦ä¹ Springçš„æ­£ç¡®å§¿åŠ¿**
```
ç†è®ºè”ç³»å®è·µï¼š
- ä¸è¦åªçœ‹æ–‡æ¡£ï¼Œè¦åŠ¨æ‰‹å†™ä»£ç 
- æ¯ä¸ªæ¦‚å¿µéƒ½è¦æœ‰å¯¹åº”çš„å®éªŒ
- ä»ç®€å•ä¾‹å­å¼€å§‹ï¼Œé€æ­¥å¤æ‚åŒ–

å¾ªåºæ¸è¿›ï¼š
- å…ˆæŒæ¡æ ¸å¿ƒæ¦‚å¿µï¼Œå†å­¦ä¹ é«˜çº§ç‰¹æ€§
- ç†è§£åŸç†æ¯”è®°ä½APIæ›´é‡è¦
- å¤šåšå¯¹æ¯”ï¼Œç†è§£è®¾è®¡æ€è·¯

å®é™…åº”ç”¨å¯¼å‘ï¼š
- ç»“åˆå®é™…ä¸šåŠ¡åœºæ™¯å­¦ä¹ 
- å…³æ³¨æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼
- å­¦ä¼šé˜…è¯»Springæºç 
```

### 11.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¼ä¸šå¼€å‘ä¸­çš„åº”ç”¨**
- **Webåº”ç”¨å¼€å‘**ï¼šç»“åˆSpring MVCæ„å»ºWebåº”ç”¨
- **å¾®æœåŠ¡æ¶æ„**ï¼šä½¿ç”¨Spring Bootå¿«é€Ÿå¼€å‘å¾®æœåŠ¡
- **æ•°æ®è®¿é—®**ï¼šé›†æˆSpring Dataç®€åŒ–æ•°æ®åº“æ“ä½œ
- **å®‰å…¨æ¡†æ¶**ï¼šæ•´åˆSpring Securityå®ç°è®¤è¯æˆæƒ
- **æ‰¹å¤„ç†**ï¼šä½¿ç”¨Spring Batchå¤„ç†å¤§é‡æ•°æ®

**ğŸ”§ è§£å†³å®é™…é—®é¢˜**
- **ä»£ç å¤ç”¨**ï¼šé€šè¿‡AOPå‡å°‘é‡å¤ä»£ç 
- **ç³»ç»Ÿè§£è€¦**ï¼šé€šè¿‡IoCé™ä½ç»„ä»¶é—´ä¾èµ–
- **é…ç½®ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†åº”ç”¨é…ç½®
- **æµ‹è¯•å‹å¥½**ï¼šæ”¯æŒå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé€šè¿‡ç¼“å­˜ã€æ± åŒ–ç­‰æå‡æ€§èƒ½

### 11.4 å­¦ä¹ å»ºè®®


**ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„**
```
æŒæ¡Spring Frameworkåï¼Œç»§ç»­å­¦ä¹ ï¼š

Spring Bootï¼š
- å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶
- è‡ªåŠ¨é…ç½®æœºåˆ¶
- ç”Ÿäº§å°±ç»ªç‰¹æ€§

Spring Cloudï¼š  
- å¾®æœåŠ¡æ²»ç†
- æœåŠ¡å‘ç°ä¸é…ç½®
- ç†”æ–­é™æµæœºåˆ¶

Spring Securityï¼š
- è®¤è¯å’Œæˆæƒ
- OAUTH2é›†æˆ
- æ–¹æ³•çº§å®‰å…¨æ§åˆ¶

Spring Dataï¼š
- æ•°æ®è®¿é—®æŠ½è±¡
- å¤šæ•°æ®æºæ”¯æŒ
- NoSQLé›†æˆ
```

**âš ï¸ é¿å…çš„å­¦ä¹ è¯¯åŒº**
```
ä¸è¦æ­»è®°ç¡¬èƒŒï¼š
- ç†è§£åŸç†æ¯”è®°ä½é…ç½®æ›´é‡è¦
- å¤šé—®ä¸ºä»€ä¹ˆï¼Œå°‘é—®æ€ä¹ˆåš

ä¸è¦è´ªå¤šæ±‚å…¨ï¼š
- ä¸€æ¬¡å­¦ä¸€ä¸ªä¸»é¢˜ï¼Œå­¦æ·±å­¦é€
- å®éªŒåšå®Œå†å­¦ä¸‹ä¸€ä¸ªæ¦‚å¿µ

ä¸è¦è„±ç¦»å®é™…ï¼š
- æ¯ä¸ªç‰¹æ€§éƒ½è¦æƒ³å®é™…åº”ç”¨åœºæ™¯
- ç»“åˆä¸šåŠ¡éœ€æ±‚å­¦ä¹ æŠ€æœ¯ç‰¹æ€§
```

**ğŸ’¡ å­¦ä¹ æŠ€å·§**
- **ç”»å›¾ç†è§£**ï¼šç”¨å›¾è¡¨ç†æ¸…æ¦‚å¿µå…³ç³»
- **ä»£ç å¯¹æ¯”**ï¼šå¯¹æ¯”æœ‰æ— Springçš„ä»£ç å·®å¼‚
- **è°ƒè¯•è·Ÿè¸ª**ï¼šé€šè¿‡è°ƒè¯•ç†è§£æ‰§è¡Œæµç¨‹
- **æºç é˜…è¯»**ï¼šé€‚å½“é˜…è¯»Springæºç 
- **å®é™…é¡¹ç›®**ï¼šåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨æ‰€å­¦çŸ¥è¯†

**ğŸ¯ æˆåŠŸæ ‡å‡†**
å½“ä½ èƒ½å¤Ÿç‹¬ç«‹å®Œæˆä»¥ä¸‹ä»»åŠ¡æ—¶ï¼Œè¯´æ˜å·²ç»æŒæ¡äº†Spring Frameworkï¼š
- æ­å»ºä¸€ä¸ªå®Œæ•´çš„Springé¡¹ç›®
- è®¾è®¡åˆç†çš„Beanä¾èµ–å…³ç³»
- å®ç°è‡ªå®šä¹‰çš„AOPåˆ‡é¢
- é…ç½®å¤šç¯å¢ƒçš„åº”ç”¨
- è§£å†³å¸¸è§çš„Springé—®é¢˜
- ä¼˜åŒ–Springåº”ç”¨çš„æ€§èƒ½

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> Springæ¡†æ¶IoCå®¹å™¨ï¼Œç®¡ç†å¯¹è±¡çœŸè½»æ¾  
> ä¾èµ–æ³¨å…¥é™è€¦åˆï¼Œé…ç½®é©±åŠ¨å¥½ç»´æŠ¤  
> AOPåˆ‡é¢åŠ åŠŸèƒ½ï¼Œä¸æ”¹ä»£ç å¢ç‰¹æ€§  
> äº‹ä»¶é©±åŠ¨è§£è€¦åˆï¼Œå›½é™…åŒ–å¤šè¯­è¨€  
> ç†è®ºå®è·µç›¸ç»“åˆï¼Œå¾ªåºæ¸è¿›æ˜¯æ­£é“