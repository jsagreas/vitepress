---
title: 8ã€å ä½ç¬¦è§£æ
---
## ğŸ“š ç›®å½•

1. [å ä½ç¬¦æ˜¯ä»€ä¹ˆ](#1-å ä½ç¬¦æ˜¯ä»€ä¹ˆ)
2. [å ä½ç¬¦çš„åŸºæœ¬ç”¨æ³•](#2-å ä½ç¬¦çš„åŸºæœ¬ç”¨æ³•)
3. [é»˜è®¤å€¼è®¾ç½®](#3-é»˜è®¤å€¼è®¾ç½®)
4. [å±æ€§è¦†ç›–æœºåˆ¶](#4-å±æ€§è¦†ç›–æœºåˆ¶)
5. [è§£æé¡ºåºè¯¦è§£](#5-è§£æé¡ºåºè¯¦è§£)
6. [å¾ªç¯å¼•ç”¨é—®é¢˜](#6-å¾ªç¯å¼•ç”¨é—®é¢˜)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å ä½ç¬¦æ˜¯ä»€ä¹ˆ


### 1.1 é€šä¿—ç†è§£


**ç”Ÿæ´»ä¸­çš„ç±»æ¯”**ï¼š
```
æƒ³è±¡ä½ åœ¨å¡«å†™ä¸€å¼ è¡¨å•ï¼š
å§“åï¼š[è¯·å¡«å†™]  â† è¿™å°±æ˜¯å ä½ç¬¦
å¹´é¾„ï¼š[è¯·å¡«å†™]
åŸå¸‚ï¼š[è¯·å¡«å†™]

æœ€åå¡«å¥½å˜æˆï¼š
å§“åï¼šå¼ ä¸‰
å¹´é¾„ï¼š25
åŸå¸‚ï¼šåŒ—äº¬
```

**Springä¸­çš„å ä½ç¬¦å°±æ˜¯è¿™ä¸ªæ„æ€**ï¼š
- ä½ å…ˆåœ¨ä»£ç é‡Œ**ç•™ä¸ªç©ºä½**ï¼ˆå ä½ç¬¦ï¼‰
- ç­‰ç¨‹åºè¿è¡Œæ—¶ï¼ŒSpringä¼š**è‡ªåŠ¨å¡«å…¥**å®é™…çš„å€¼
- å€¼ä»å“ªæ¥ï¼Ÿä»**é…ç½®æ–‡ä»¶**é‡Œè¯»å–

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å ä½ç¬¦


**ä¸ç”¨å ä½ç¬¦çš„å†™æ³•**ï¼ˆç¡¬ç¼–ç ï¼‰ï¼š
```java
public class DatabaseConfig {
    private String url = "jdbc:mysql://localhost:3306/mydb";
    private String username = "root";
    private String password = "123456";
}
```

**é—®é¢˜æ¥äº†**ï¼š
- ğŸ˜± å¯†ç å†™æ­»åœ¨ä»£ç é‡Œï¼Œä¸å®‰å…¨
- ğŸ˜± æ¢ä¸ªç¯å¢ƒï¼ˆæµ‹è¯•/ç”Ÿäº§ï¼‰è¦æ”¹ä»£ç é‡æ–°ç¼–è¯‘
- ğŸ˜± é…ç½®æ•£è½å„å¤„ï¼Œéš¾ä»¥ç®¡ç†

**ç”¨å ä½ç¬¦çš„å†™æ³•**ï¼š
```java
public class DatabaseConfig {
    @Value("${db.url}")
    private String url;
    
    @Value("${db.username}")
    private String username;
    
    @Value("${db.password}")
    private String password;
}
```

**å¥½å¤„æ˜¾è€Œæ˜“è§**ï¼š
- âœ… é…ç½®å’Œä»£ç åˆ†ç¦»
- âœ… æ¢ç¯å¢ƒåªéœ€æ”¹é…ç½®æ–‡ä»¶
- âœ… æ•æ„Ÿä¿¡æ¯å¯ä»¥åŠ å¯†å­˜å‚¨

### 1.3 å ä½ç¬¦çš„æ ¸å¿ƒç»„ä»¶


```
å ä½ç¬¦è§£æç³»ç»Ÿçš„ä¸‰ä¸ªå…³é”®è§’è‰²ï¼š

ğŸ“ é…ç½®æ–‡ä»¶ï¼ˆapplication.propertiesï¼‰
   â†“ å­˜å‚¨å®é™…çš„å€¼
   
ğŸ”§ PropertyPlaceholderï¼ˆå ä½ç¬¦è§£æå™¨ï¼‰
   â†“ è´Ÿè´£æŸ¥æ‰¾å’Œæ›¿æ¢
   
ğŸ’‰ @Valueæ³¨è§£ï¼ˆä½¿ç”¨å ä½ç¬¦ï¼‰
   â†“ æ ‡è®°éœ€è¦æ³¨å…¥çš„ä½ç½®
```

**å·¥ä½œæµç¨‹å›¾ç¤º**ï¼š
```
1. é…ç½®æ–‡ä»¶ä¸­å®šä¹‰
   db.url=jdbc:mysql://localhost:3306/mydb
   
2. ä»£ç ä¸­ä½¿ç”¨å ä½ç¬¦
   @Value("${db.url}")
   
3. Springå¯åŠ¨æ—¶è§£æ
   PropertyPlaceholder è¯»å–é…ç½®æ–‡ä»¶
   â†“
   æ‰¾åˆ° db.url å¯¹åº”çš„å€¼
   â†“
   æ›¿æ¢ ${db.url} ä¸ºå®é™…å€¼
   â†“
   æ³¨å…¥åˆ°å­—æ®µä¸­
```

---

## 2. ğŸ“ å ä½ç¬¦çš„åŸºæœ¬ç”¨æ³•


### 2.1 ${}å ä½ç¬¦è¯­æ³•


**åŸºæœ¬è¯­æ³•æ ¼å¼**ï¼š
```
${å±æ€§å}
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**  
> - `$`ï¼šç¾å…ƒç¬¦å·ï¼Œå›ºå®šå†™æ³•
> - `{}`ï¼šèŠ±æ‹¬å·åŒ…è£¹å±æ€§å
> - å±æ€§åï¼šå¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„key

**å®Œæ•´ç¤ºä¾‹**ï¼š

**é…ç½®æ–‡ä»¶ï¼ˆapplication.propertiesï¼‰**ï¼š
```properties
# æ•°æ®åº“é…ç½®
app.name=æˆ‘çš„åº”ç”¨
app.version=1.0.0
server.port=8080
```

**ä½¿ç”¨å ä½ç¬¦**ï¼š
```java
@Component
public class AppConfig {
    
    @Value("${app.name}")
    private String appName;
    
    @Value("${app.version}")
    private String version;
    
    @Value("${server.port}")
    private int port;
}
```

### 2.2 ä¸åŒåœºæ™¯çš„ä½¿ç”¨æ–¹å¼


#### ğŸ“Œ åœºæ™¯1ï¼šå­—æ®µæ³¨å…¥


```java
@Component
public class UserService {
    
    // æ³¨å…¥å­—ç¬¦ä¸²
    @Value("${user.default.role}")
    private String defaultRole;
    
    // æ³¨å…¥æ•°å­—
    @Value("${user.max.age}")
    private int maxAge;
    
    // æ³¨å…¥å¸ƒå°”å€¼
    @Value("${user.email.required}")
    private boolean emailRequired;
}
```

**é…ç½®æ–‡ä»¶å¯¹åº”**ï¼š
```properties
user.default.role=MEMBER
user.max.age=120
user.email.required=true
```

#### ğŸ“Œ åœºæ™¯2ï¼šæ–¹æ³•å‚æ•°æ³¨å…¥


```java
@Service
public class EmailService {
    
    public void sendEmail(@Value("${email.from}") String from,
                          @Value("${email.subject}") String subject) {
        System.out.println("ä» " + from + " å‘é€é‚®ä»¶");
        System.out.println("ä¸»é¢˜ï¼š" + subject);
    }
}
```

#### ğŸ“Œ åœºæ™¯3ï¼šæ„é€ å‡½æ•°æ³¨å…¥


```java
@Service
public class PaymentService {
    
    private final String apiKey;
    private final String apiUrl;
    
    public PaymentService(
            @Value("${pay.api.key}") String apiKey,
            @Value("${pay.api.url}") String apiUrl) {
        this.apiKey = apiKey;
        this.apiUrl = apiUrl;
    }
}
```

### 2.3 å¤æ‚ç±»å‹çš„æ³¨å…¥


**æ³¨å…¥Listé›†åˆ**ï¼š
```properties
app.allowed.ips=192.168.1.1,192.168.1.2,192.168.1.3
```

```java
@Value("${app.allowed.ips}")
private List<String> allowedIps;  
// ç»“æœï¼š[192.168.1.1, 192.168.1.2, 192.168.1.3]
```

**æ³¨å…¥Mapé›†åˆ**ï¼š
```properties
app.error.codes={400:'é”™è¯¯è¯·æ±‚',404:'æœªæ‰¾åˆ°',500:'æœåŠ¡å™¨é”™è¯¯'}
```

```java
@Value("#{${app.error.codes}}")
private Map<String, String> errorCodes;
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> Mapç±»å‹éœ€è¦ç”¨`#{}`è€Œä¸æ˜¯`${}`ï¼Œè¿™æ˜¯SpELè¡¨è¾¾å¼

---

## 3. ğŸ¯ é»˜è®¤å€¼è®¾ç½®


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦é»˜è®¤å€¼


**å®é™…åœºæ™¯**ï¼š
```
å¼€å‘ç¯å¢ƒï¼šæœ‰é…ç½®æ–‡ä»¶ï¼Œä¸€åˆ‡æ­£å¸¸
æµ‹è¯•ç¯å¢ƒï¼šé…ç½®æ–‡ä»¶ç¼ºå°‘æŸä¸ªå±æ€§ â†’ ç¨‹åºæŠ¥é”™ï¼
```

**è§£å†³æ–¹æ¡ˆ**ï¼šè®¾ç½®é»˜è®¤å€¼
- å¦‚æœé…ç½®æ–‡ä»¶æœ‰å€¼ï¼Œç”¨é…ç½®çš„å€¼
- å¦‚æœé…ç½®æ–‡ä»¶æ²¡æœ‰ï¼Œç”¨é»˜è®¤å€¼
- ç¨‹åºä¸ä¼šå› ä¸ºç¼ºå°‘é…ç½®è€ŒæŠ¥é”™

### 3.2 é»˜è®¤å€¼è¯­æ³•


**åŸºæœ¬æ ¼å¼**ï¼š
```
${å±æ€§å:é»˜è®¤å€¼}
```

> ğŸ’¡ **è®°å¿†æŠ€å·§**  
> å†’å·`:`åé¢çš„å°±æ˜¯"å…œåº•æ–¹æ¡ˆ"

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š

```java
@Component
public class ServerConfig {
    
    // å¦‚æœæ²¡é…ç½®ç«¯å£ï¼Œé»˜è®¤ç”¨8080
    @Value("${server.port:8080}")
    private int port;
    
    // å¦‚æœæ²¡é…ç½®è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤30ç§’
    @Value("${server.timeout:30}")
    private int timeout;
    
    // å¦‚æœæ²¡é…ç½®åº”ç”¨åï¼Œé»˜è®¤ç”¨"MyApp"
    @Value("${app.name:MyApp}")
    private String appName;
    
    // å¦‚æœæ²¡é…ç½®debugæ¨¡å¼ï¼Œé»˜è®¤å…³é—­
    @Value("${app.debug:false}")
    private boolean debug;
}
```

### 3.3 é»˜è®¤å€¼çš„ç±»å‹å¤„ç†


| é…ç½®ç±»å‹ | é»˜è®¤å€¼å†™æ³• | ç¤ºä¾‹ |
|---------|-----------|------|
| **å­—ç¬¦ä¸²** | `${key:é»˜è®¤æ–‡æœ¬}` | `${app.name:é»˜è®¤åº”ç”¨}` |
| **æ•°å­—** | `${key:æ•°å­—}` | `${app.port:8080}` |
| **å¸ƒå°”** | `${key:true/false}` | `${app.debug:false}` |
| **ç©ºå­—ç¬¦ä¸²** | `${key:}` | `${app.title:}` |
| **å¤šä¸ªå±æ€§** | `${key1:${key2:é»˜è®¤}}` | `${db.url:${backup.url:localhost}}` |

**åµŒå¥—é»˜è®¤å€¼ç¤ºä¾‹**ï¼š
```java
// ä¼˜å…ˆç”¨db.urlï¼Œæ²¡æœ‰å°±ç”¨backup.urlï¼Œéƒ½æ²¡æœ‰å°±ç”¨localhost
@Value("${db.url:${backup.url:localhost}}")
private String databaseUrl;
```

**è§£æé€»è¾‘**ï¼š
```
1. å…ˆæ‰¾ db.url â†’ æ‰¾åˆ°äº†ï¼Œç”¨è¿™ä¸ªå€¼ âœ“
2. æ²¡æ‰¾åˆ° â†’ æ‰¾ backup.url â†’ æ‰¾åˆ°äº†ï¼Œç”¨è¿™ä¸ªå€¼ âœ“
3. è¿˜æ²¡æ‰¾åˆ° â†’ ç”¨ localhost âœ“
```

---

## 4. ğŸ”„ å±æ€§è¦†ç›–æœºåˆ¶


### 4.1 ä»€ä¹ˆæ˜¯å±æ€§è¦†ç›–


**é€šä¿—è§£é‡Š**ï¼š
```
å°±åƒç©¿è¡£æœä¸€æ ·ï¼Œä¸€å±‚ä¸€å±‚å¾€ä¸Šå¥—ï¼š
å†…è¡£ï¼ˆåŸºç¡€é…ç½®ï¼‰
  â†“
è¡¬è¡«ï¼ˆç¯å¢ƒé…ç½®ï¼‰
  â†“  
å¤–å¥—ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰

æœ€å¤–å±‚çš„ä¼šè¦†ç›–é‡Œå±‚çš„ï¼
```

**Springä¸­çš„è¦†ç›–è§„åˆ™**ï¼š
- åŒä¸€ä¸ªå±æ€§ååœ¨**å¤šä¸ªåœ°æ–¹**éƒ½æœ‰å®šä¹‰
- **ä¼˜å…ˆçº§é«˜**çš„ä¼šè¦†ç›–ä¼˜å…ˆçº§ä½çš„
- æœ€ç»ˆåªæœ‰ä¸€ä¸ªå€¼ç”Ÿæ•ˆ

### 4.2 å±æ€§æ¥æºçš„ä¼˜å…ˆçº§


```
ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼ˆæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼š

1. å‘½ä»¤è¡Œå‚æ•°
   java -jar app.jar --server.port=9090
   
2. ç³»ç»Ÿå±æ€§
   System.setProperty("server.port", "9090")
   
3. æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡
   export SERVER_PORT=9090
   
4. application-{profile}.properties
   application-prod.properties
   
5. application.properties
   é»˜è®¤é…ç½®æ–‡ä»¶
```

**å®é™…è¦†ç›–æ¡ˆä¾‹**ï¼š

**application.properties**ï¼ˆåŸºç¡€é…ç½®ï¼‰ï¼š
```properties
server.port=8080
app.name=MyApp
app.env=dev
```

**application-prod.properties**ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š
```properties
server.port=80
app.env=production
```

**å¯åŠ¨å‘½ä»¤**ï¼š
```bash
java -jar app.jar --spring.profiles.active=prod --server.port=9090
```

**æœ€ç»ˆç”Ÿæ•ˆçš„å€¼**ï¼š
```
server.port = 9090  â† å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
app.name = MyApp    â† application.properties
app.env = production â† application-prod.properties
```

### 4.3 è¦†ç›–è§„åˆ™å¯è§†åŒ–


```
é…ç½®æ–‡ä»¶å±‚çº§ç¤ºæ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰      â”‚  --server.port=9090
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç³»ç»Ÿå±æ€§                     â”‚  -Dserver.port=8888
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¯å¢ƒå˜é‡                     â”‚  SERVER_PORT=8000
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  application-prod.properties â”‚  server.port=80
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  application.properties      â”‚  server.port=8080
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    æœ€ç»ˆå€¼ï¼š9090
```

> ğŸ’¡ **è®°å¿†å£è¯€**  
> å‘½ä»¤è¡Œ > ç³»ç»Ÿå±æ€§ > ç¯å¢ƒå˜é‡ > profileé…ç½® > é»˜è®¤é…ç½®

---

## 5. ğŸ” è§£æé¡ºåºè¯¦è§£


### 5.1 PropertyPlaceholderå·¥ä½œåŸç†


**è§£æå™¨çš„å·¥ä½œæµç¨‹**ï¼š
```
æ­¥éª¤1ï¼šæ‰«ææ‰€æœ‰éœ€è¦æ³¨å…¥çš„åœ°æ–¹
    â†“
æ­¥éª¤2ï¼šé‡åˆ° ${} å ä½ç¬¦
    â†“
æ­¥éª¤3ï¼šæŒ‰ä¼˜å…ˆçº§é¡ºåºæŸ¥æ‰¾å±æ€§å€¼
    â†“
æ­¥éª¤4ï¼šæ‰¾åˆ°äº† â†’ æ›¿æ¢å ä½ç¬¦
       æ²¡æ‰¾åˆ° â†’ æ£€æŸ¥æ˜¯å¦æœ‰é»˜è®¤å€¼
    â†“
æ­¥éª¤5ï¼šæ³¨å…¥åˆ°ç›®æ ‡ä½ç½®
```

### 5.2 æŸ¥æ‰¾é¡ºåºç¤ºä¾‹


**ä»£ç ä¸­çš„å ä½ç¬¦**ï¼š
```java
@Value("${db.url}")
private String dbUrl;
```

**è§£æå™¨çš„æŸ¥æ‰¾è¿‡ç¨‹**ï¼š
```
1. æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°
   java -jar app.jar --db.url=xxx
   æ²¡æœ‰ â†’ ç»§ç»­
   
2. æ£€æŸ¥ç³»ç»Ÿå±æ€§
   System.getProperty("db.url")
   æ²¡æœ‰ â†’ ç»§ç»­
   
3. æ£€æŸ¥ç¯å¢ƒå˜é‡
   System.getenv("DB_URL")
   æ²¡æœ‰ â†’ ç»§ç»­
   
4. æ£€æŸ¥application-{profile}.properties
   db.url=jdbc:mysql://prod-server/db
   æ‰¾åˆ°äº†ï¼åœæ­¢æŸ¥æ‰¾ï¼Œä½¿ç”¨è¿™ä¸ªå€¼
```

### 5.3 å¤šä¸ªå ä½ç¬¦çš„è§£æé¡ºåº


**é…ç½®æ–‡ä»¶**ï¼š
```properties
base.path=/app
log.path=${base.path}/logs
data.path=${base.path}/data
```

**è§£æè¿‡ç¨‹åˆ†æ**ï¼š
```
ç¬¬1æ­¥ï¼šè§£æ base.path
   ${base.path} â†’ /app
   
ç¬¬2æ­¥ï¼šè§£æ log.path
   ${base.path}/logs â†’ /app/logs
   ï¼ˆæ­¤æ—¶base.pathå·²ç»è§£æå®Œæˆï¼‰
   
ç¬¬3æ­¥ï¼šè§£æ data.path
   ${base.path}/data â†’ /app/data
```

**ç‰¹æ®Šæƒ…å†µ - ä¾èµ–å…³ç³»**ï¼š
```properties
# é”™è¯¯ç¤ºä¾‹ï¼šç›¸äº’ä¾èµ–
path.a=${path.b}/folder
path.b=${path.a}/folder
# è¿™ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨é”™è¯¯ï¼
```

---

## 6. âš ï¸ å¾ªç¯å¼•ç”¨é—®é¢˜


### 6.1 ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨


**é€šä¿—æ¯”å–»**ï¼š
```
Aè¯´ï¼šæˆ‘çš„å€¼æ˜¯Bçš„å€¼åŠ 1
Bè¯´ï¼šæˆ‘çš„å€¼æ˜¯Açš„å€¼åŠ 1

é—®é¢˜æ¥äº†ï¼šè°å…ˆç®—ï¼Ÿç®—ä¸å‡ºæ¥ï¼
è¿™å°±æ˜¯å¾ªç¯å¼•ç”¨ã€‚
```

**Springä¸­çš„å¾ªç¯å¼•ç”¨**ï¼š
```properties
# æƒ…å†µ1ï¼šç›´æ¥å¾ªç¯
name.a=${name.b}
name.b=${name.a}

# æƒ…å†µ2ï¼šé—´æ¥å¾ªç¯
path.a=${path.b}/data
path.b=${path.c}/logs  
path.c=${path.a}/temp
```

### 6.2 å¾ªç¯å¼•ç”¨çš„è¯†åˆ«


**é”™è¯¯ç¤ºä¾‹åŠåˆ†æ**ï¼š

```properties
# ç¤ºä¾‹1ï¼šä¸¤ä¸ªå±æ€§ç›¸äº’å¼•ç”¨
app.url=${app.domain}/api
app.domain=${app.url}/v1
```

**è§£æè¿‡ç¨‹**ï¼š
```
è§£æ app.url
  â†’ éœ€è¦ app.domain çš„å€¼
    â†’ è§£æ app.domain
      â†’ éœ€è¦ app.url çš„å€¼
        â†’ åˆå›åˆ° app.urlï¼ˆæ­»å¾ªç¯ï¼ï¼‰
          
Springæ£€æµ‹åˆ°å¾ªç¯ â†’ æŠ›å‡ºå¼‚å¸¸
```

**å¸¸è§é”™è¯¯ä¿¡æ¯**ï¼š
```
Circular placeholder reference 'app.url' in property definitions
```

### 6.3 å¦‚ä½•é¿å…å¾ªç¯å¼•ç”¨


> ğŸ’¡ **æ ¸å¿ƒåŸåˆ™**  
> å±æ€§ä¹‹é—´çš„å¼•ç”¨å¿…é¡»æ˜¯**å•å‘çš„**ï¼Œå½¢æˆä¸€ä¸ª**æ ‘çŠ¶ç»“æ„**ï¼Œä¸èƒ½å½¢æˆ**ç¯çŠ¶**

**æ­£ç¡®çš„è®¾è®¡æ¨¡å¼**ï¼š

**âŒ é”™è¯¯å†™æ³•**ï¼š
```properties
base.url=${api.url}/base
api.url=${base.url}/api
```

**âœ… æ­£ç¡®å†™æ³•**ï¼š
```properties
# å®šä¹‰åŸºç¡€è·¯å¾„ï¼ˆä¸ä¾èµ–å…¶ä»–å±æ€§ï¼‰
base.path=/app

# å…¶ä»–è·¯å¾„éƒ½ä¾èµ–base.path
api.url=${base.path}/api
web.url=${base.path}/web
static.url=${base.path}/static
```

**å±æ€§ä¾èµ–å…³ç³»å›¾**ï¼š
```
æ­£ç¡®çš„ä¾èµ–ï¼ˆæ ‘çŠ¶ï¼‰ï¼š

      base.path
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â†“         â†“
 api.url   web.url
    â†“
api.v1.url

é”™è¯¯çš„ä¾èµ–ï¼ˆç¯çŠ¶ï¼‰ï¼š

 A â†â†’ B  (ç›¸äº’ä¾èµ–ï¼Œå¾ªç¯ï¼)
```

### 6.4 å¾ªç¯å¼•ç”¨çš„è§£å†³æ–¹æ¡ˆ


**æ–¹æ¡ˆ1ï¼šé‡æ–°è®¾è®¡å±æ€§ç»“æ„**
```properties
# æ”¹é€ å‰ï¼ˆæœ‰å¾ªç¯ï¼‰
user.home=${user.name}/home
user.name=${user.home}/name

# æ”¹é€ åï¼ˆæ— å¾ªç¯ï¼‰
base.dir=/app
user.home=${base.dir}/home
user.name=admin
```

**æ–¹æ¡ˆ2ï¼šä½¿ç”¨é»˜è®¤å€¼æ‰“ç ´å¾ªç¯**
```properties
# æœ‰é»˜è®¤å€¼ï¼Œä¸ä¼šå½¢æˆå¾ªç¯
app.url=${app.domain:http://localhost}/api
app.domain=${app.default.domain}
app.default.domain=example.com
```

**æ–¹æ¡ˆ3ï¼šåˆ†ç¦»é…ç½®å±‚æ¬¡**
```properties
# åŸºç¡€å±‚ï¼ˆæ— ä¾èµ–ï¼‰
app.name=MyApp
app.version=1.0

# åº”ç”¨å±‚ï¼ˆä¾èµ–åŸºç¡€å±‚ï¼‰
app.full.name=${app.name} v${app.version}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ¦‚å¿µ


```
ğŸ”¸ å ä½ç¬¦è¯­æ³•ï¼š${å±æ€§å}
ğŸ”¸ é»˜è®¤å€¼è¯­æ³•ï¼š${å±æ€§å:é»˜è®¤å€¼}
ğŸ”¸ ä¼˜å…ˆçº§è§„åˆ™ï¼šå‘½ä»¤è¡Œ > ç³»ç»Ÿå±æ€§ > ç¯å¢ƒå˜é‡ > profileé…ç½® > é»˜è®¤é…ç½®
ğŸ”¸ å¾ªç¯å¼•ç”¨ï¼šå±æ€§ä¹‹é—´ä¸èƒ½ç›¸äº’ä¾èµ–å½¢æˆç¯
ğŸ”¸ è§£æé¡ºåºï¼šæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æŸ¥æ‰¾
```

### 7.2 å®ç”¨æŠ€å·§æ€»ç»“


| ä½¿ç”¨åœºæ™¯ | æ¨èåšæ³• | ç¤ºä¾‹ |
|---------|---------|------|
| **æ•æ„Ÿä¿¡æ¯** | ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¤–éƒ¨é…ç½® | `${DB_PASSWORD}` |
| **ç¯å¢ƒå·®å¼‚** | ä½¿ç”¨profileé…ç½® | `application-{env}.properties` |
| **å¯é€‰é…ç½®** | è®¾ç½®é»˜è®¤å€¼ | `${timeout:30}` |
| **å¤šå±‚è·¯å¾„** | ä»åŸºç¡€è·¯å¾„æ„å»º | `${base}/${sub}` |
| **è°ƒè¯•å¼€å…³** | ä½¿ç”¨å¸ƒå°”å ä½ç¬¦ | `${debug:false}` |

### 7.3 å¸¸è§é—®é¢˜ä¸è§£å†³


**é—®é¢˜1ï¼šå±æ€§æ‰¾ä¸åˆ°**
```java
// é”™è¯¯ä¿¡æ¯ï¼šCould not resolve placeholder 'xxx'
@Value("${app.name}")  // app.nameä¸å­˜åœ¨

// è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ é»˜è®¤å€¼
@Value("${app.name:DefaultApp}")
```

**é—®é¢˜2ï¼šç±»å‹è½¬æ¢å¤±è´¥**
```properties
server.port=abc  # ä¸æ˜¯æ•°å­—

// è§£å†³ï¼šç¡®ä¿é…ç½®å€¼ç±»å‹æ­£ç¡®
server.port=8080
```

**é—®é¢˜3ï¼šå¾ªç¯å¼•ç”¨**
```properties
# æ£€æŸ¥æ˜¯å¦æœ‰ç›¸äº’å¼•ç”¨
a=${b}
b=${a}  # å¾ªç¯ï¼

# é‡æ–°è®¾è®¡ä¾èµ–å…³ç³»
```

### 7.4 æœ€ä½³å®è·µå»ºè®®


> ğŸ’¡ **é…ç½®ç®¡ç†åŸåˆ™**
> 1. **é›†ä¸­ç®¡ç†**ï¼šæŠŠé…ç½®ç»Ÿä¸€æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­
> 2. **åˆ†å±‚è®¾è®¡**ï¼šåŸºç¡€é…ç½® â†’ ç¯å¢ƒé…ç½® â†’ ä¸ªæ€§åŒ–é…ç½®
> 3. **æä¾›é»˜è®¤å€¼**ï¼šé¿å…å› é…ç½®ç¼ºå¤±å¯¼è‡´å¯åŠ¨å¤±è´¥
> 4. **é¿å…å¾ªç¯**ï¼šä¿æŒå±æ€§ä¾èµ–çš„å•å‘æ€§
> 5. **ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°**ï¼šè®©é…ç½®åä¸€çœ‹å°±æ‡‚

**é…ç½®æ–‡ä»¶ç»„ç»‡ç¤ºä¾‹**ï¼š
```properties
# ========== åŸºç¡€é…ç½® ==========
app.name=MyApplication
app.version=1.0.0

# ========== æœåŠ¡å™¨é…ç½® ==========
server.port=${SERVER_PORT:8080}
server.timeout=${SERVER_TIMEOUT:30}

# ========== æ•°æ®åº“é…ç½® ==========
db.url=${DB_URL:jdbc:mysql://localhost:3306/mydb}
db.username=${DB_USER:root}
db.password=${DB_PASSWORD:}

# ========== è·¯å¾„é…ç½® ==========
base.path=/app
log.path=${base.path}/logs
data.path=${base.path}/data
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> - å ä½ç¬¦é…ç½®åˆ†ç¦»ï¼Œç¯å¢ƒåˆ‡æ¢æ›´å®¹æ˜“
> - é»˜è®¤å€¼å…œåº•æ–¹æ¡ˆï¼Œç¼ºå°‘é…ç½®ä¸æ…Œå¼ 
> - ä¼˜å…ˆçº§é«˜çš„è¦†ç›–ï¼Œå‘½ä»¤è¡Œæœ€å¤§è¯äº‹æƒ
> - å¾ªç¯å¼•ç”¨è¦é¿å…ï¼Œå•å‘ä¾èµ–ä¸å‡ºé”™