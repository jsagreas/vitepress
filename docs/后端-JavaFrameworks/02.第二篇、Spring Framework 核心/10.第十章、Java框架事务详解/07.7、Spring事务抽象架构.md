---
title: 7ã€Springäº‹åŠ¡æŠ½è±¡æ¶æ„
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯äº‹åŠ¡æŠ½è±¡æ¶æ„](#1-ä»€ä¹ˆæ˜¯äº‹åŠ¡æŠ½è±¡æ¶æ„)
2. [Springä¸ºä»€ä¹ˆè¦æŠ½è±¡äº‹åŠ¡](#2-Springä¸ºä»€ä¹ˆè¦æŠ½è±¡äº‹åŠ¡)
3. [Springäº‹åŠ¡æŠ½è±¡çš„ä¸‰å¤§æ ¸å¿ƒæ¥å£](#3-Springäº‹åŠ¡æŠ½è±¡çš„ä¸‰å¤§æ ¸å¿ƒæ¥å£)
4. [äº‹åŠ¡ç®¡ç†å™¨çš„é€‰æ‹©æœºåˆ¶](#4-äº‹åŠ¡ç®¡ç†å™¨çš„é€‰æ‹©æœºåˆ¶)
5. [AOPä»£ç†å¦‚ä½•å®ç°äº‹åŠ¡](#5-AOPä»£ç†å¦‚ä½•å®ç°äº‹åŠ¡)
6. [æ¶æ„è®¾è®¡åŸç†æ·±åº¦è§£æ](#6-æ¶æ„è®¾è®¡åŸç†æ·±åº¦è§£æ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯äº‹åŠ¡æŠ½è±¡æ¶æ„


### 1.1 å…ˆç†è§£"æŠ½è±¡"è¿™ä¸ªè¯


**é€šä¿—æ¯”å–»**ï¼šå°±åƒé¥æ§å™¨çš„è®¾è®¡
```
ç”µè§†é¥æ§å™¨çš„æŒ‰é’®ï¼š
ğŸ“º å¼€å…³é”® â†’ ä¸ç®¡ä»€ä¹ˆå“ç‰Œçš„ç”µè§†ï¼Œéƒ½èƒ½å¼€å…³
ğŸ”Š éŸ³é‡é”® â†’ ä¸ç®¡ç´¢å°¼ã€ä¸‰æ˜Ÿè¿˜æ˜¯å°ç±³ï¼Œéƒ½èƒ½è°ƒéŸ³é‡
ğŸ“± èœå•é”® â†’ åŠŸèƒ½ä¸€æ ·ï¼Œåªæ˜¯å†…éƒ¨å®ç°ä¸åŒ

è¿™å°±æ˜¯"æŠ½è±¡"ï¼š
- è¡¨é¢æ“ä½œç»Ÿä¸€ï¼ˆæŒ‰é”®ï¼‰
- å†…éƒ¨å®ç°å„å¼‚ï¼ˆä¸åŒå“ç‰Œç”µè§†çš„ç”µè·¯æ¿ï¼‰
- ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒå†…éƒ¨ç»†èŠ‚
```

**Springäº‹åŠ¡æŠ½è±¡å°±æ˜¯è¿™ä¸ªé“ç†**ï¼š
- ä½ åªéœ€è¦ç”¨ç»Ÿä¸€çš„æ–¹å¼æ§åˆ¶äº‹åŠ¡ï¼ˆåƒæŒ‰é¥æ§å™¨ï¼‰
- ä¸ç”¨å…³å¿ƒåº•å±‚æ˜¯MySQLã€Oracleè¿˜æ˜¯MongoDB
- Springå¸®ä½ å¤„ç†ä¸åŒæ•°æ®åº“çš„äº‹åŠ¡å·®å¼‚

### 1.2 ä»€ä¹ˆæ˜¯Springäº‹åŠ¡æŠ½è±¡æ¶æ„


**æ ¸å¿ƒå®šä¹‰**ï¼š
```
Springäº‹åŠ¡æŠ½è±¡ = ç»Ÿä¸€çš„äº‹åŠ¡æ§åˆ¶æ¥å£ + ä¸åŒçš„åº•å±‚å®ç°

å°±åƒï¼š
ç»Ÿä¸€æ¥å£ï¼šå¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡
ä¸åŒå®ç°ï¼š
  - MySQLç”¨JDBCæ–¹å¼
  - Hibernateç”¨Sessionæ–¹å¼  
  - JPAç”¨EntityManageræ–¹å¼
```

**ç”¨äººè¯è¯´å°±æ˜¯**ï¼š
> ğŸ’¡ Springç»™ä½ æä¾›äº†ä¸€å¥—"æ ‡å‡†é¥æ§å™¨"ï¼Œä¸ç®¡ä½ ç”¨ä»€ä¹ˆæ•°æ®åº“ã€ä»€ä¹ˆæŒä¹…åŒ–æ¡†æ¶ï¼Œéƒ½ç”¨è¿™å¥—é¥æ§å™¨æ¥æ§åˆ¶äº‹åŠ¡ã€‚åº•å±‚æ€ä¹ˆå®ç°ï¼ŸSpringè‡ªå·±æå®šï¼Œä½ ä¸ç”¨æ“å¿ƒã€‚

### 1.3 æ¶æ„é•¿ä»€ä¹ˆæ ·


**æ•´ä½“æ¶æ„å›¾**ï¼š
```
ä½ çš„ä¸šåŠ¡ä»£ç 
    â†“
@Transactionalæ³¨è§£ï¼ˆæ ‡è®°éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ï¼‰
    â†“
Spring AOPä»£ç†ï¼ˆæ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼‰
    â†“
PlatformTransactionManagerï¼ˆç»Ÿä¸€äº‹åŠ¡ç®¡ç†å™¨æ¥å£ï¼‰
    â†“
å…·ä½“å®ç°é€‰æ‹©ï¼š
    â”œâ”€ DataSourceTransactionManagerï¼ˆJDBC/MyBatisï¼‰
    â”œâ”€ HibernateTransactionManagerï¼ˆHibernateï¼‰
    â”œâ”€ JpaTransactionManagerï¼ˆJPAï¼‰
    â””â”€ JtaTransactionManagerï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰
    â†“
çœŸæ­£çš„æ•°æ®åº“æ“ä½œ
```

**å…³é”®ç†è§£**ï¼š
- ğŸ¯ ä½ åªå’Œ`@Transactional`æ‰“äº¤é“
- ğŸ”§ Springè´Ÿè´£é€‰æ‹©åˆé€‚çš„äº‹åŠ¡ç®¡ç†å™¨
- âš™ï¸ åº•å±‚è‡ªåŠ¨è°ƒç”¨å¯¹åº”æ•°æ®åº“çš„äº‹åŠ¡API

---

## 2. ğŸ¤” Springä¸ºä»€ä¹ˆè¦æŠ½è±¡äº‹åŠ¡


### 2.1 æ²¡æœ‰æŠ½è±¡å‰çš„ç—›è‹¦


**åœºæ™¯1ï¼šä¸åŒæ¡†æ¶äº‹åŠ¡ä»£ç å®Œå…¨ä¸åŒ**

ä½¿ç”¨JDBCæ—¶ï¼š
```java
Connection conn = dataSource.getConnection();
try {
    conn.setAutoCommit(false);  // å¼€å¯äº‹åŠ¡
    // æ‰§è¡ŒSQL...
    conn.commit();  // æäº¤
} catch (Exception e) {
    conn.rollback();  // å›æ»š
}
```

ä½¿ç”¨Hibernateæ—¶ï¼š
```java
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();  // å¼€å¯äº‹åŠ¡
try {
    // æ‰§è¡Œæ“ä½œ...
    tx.commit();  // æäº¤
} catch (Exception e) {
    tx.rollback();  // å›æ»š
}
```

**é—®é¢˜æ˜¾è€Œæ˜“è§**ï¼š
- âŒ æ¢ä¸ªæ¡†æ¶ï¼Œäº‹åŠ¡ä»£ç è¦å…¨éƒ¨é‡å†™
- âŒ ä»£ç é«˜åº¦è€¦åˆï¼Œéš¾ä»¥ç»´æŠ¤
- âŒ ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ä»£ç æ··åœ¨ä¸€èµ·

### 2.2 ç»Ÿä¸€æŠ½è±¡å¸¦æ¥çš„å¥½å¤„


**å¥½å¤„1ï¼šæ¥å£è§£è€¦**
```
ç»Ÿä¸€ä½¿ç”¨@Transactionalæ³¨è§£ï¼š

@Transactional
public void transferMoney(Long from, Long to, BigDecimal amount) {
    // ä¸šåŠ¡ä»£ç 
    accountDao.deduct(from, amount);
    accountDao.add(to, amount);
}

æ¢æ•°æ®åº“ï¼Ÿæ¢æ¡†æ¶ï¼Ÿä»£ç ä¸ç”¨æ”¹ï¼
åªéœ€è¦æ›´æ¢é…ç½®æ–‡ä»¶ä¸­çš„äº‹åŠ¡ç®¡ç†å™¨
```

**å¥½å¤„2ï¼šä»£ç ç®€æ´æ¸…æ™°**

| å¯¹æ¯”é¡¹ | ä¼ ç»Ÿæ–¹å¼ | SpringæŠ½è±¡æ–¹å¼ |
|--------|---------|---------------|
| **ä»£ç è¡Œæ•°** | 15-20è¡Œï¼ˆå«try-catchï¼‰ | 3-5è¡Œï¼ˆçº¯ä¸šåŠ¡é€»è¾‘ï¼‰ |
| **å¼‚å¸¸å¤„ç†** | æ‰‹åŠ¨æ•è·å’Œå›æ»š | è‡ªåŠ¨å›æ»š |
| **æ¡†æ¶åˆ‡æ¢** | ä»£ç å…¨éƒ¨é‡å†™ | åªæ”¹é…ç½® |
| **å¯è¯»æ€§** | äº‹åŠ¡ä»£ç å¹²æ‰°é˜…è¯» | ä¸šåŠ¡é€»è¾‘æ¸…æ™° |

**å¥½å¤„3ï¼šçµæ´»åˆ‡æ¢æŠ€æœ¯æ ˆ**
```
å¼€å‘é˜¶æ®µï¼šç”¨H2å†…å­˜æ•°æ®åº“ + JDBC
    â†“ åªæ”¹é…ç½®
æµ‹è¯•é˜¶æ®µï¼šç”¨MySQL + MyBatis  
    â†“ åªæ”¹é…ç½®
ç”Ÿäº§é˜¶æ®µï¼šç”¨Oracle + JPA
    â†“ åªæ”¹é…ç½®
åˆ†å¸ƒå¼æ”¹é€ ï¼šç”¨JTAåˆ†å¸ƒå¼äº‹åŠ¡

ä¸šåŠ¡ä»£ç ä¸€è¡Œä¸æ”¹ï¼
```

### 2.3 è®¾è®¡æ€æƒ³ï¼šä¾èµ–å€’ç½®åŸåˆ™


**æ ¸å¿ƒæ€æƒ³**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼š
ä¸šåŠ¡ä»£ç  â†’ ä¾èµ– â†’ JDBCäº‹åŠ¡API
ä¸šåŠ¡ä»£ç  â†’ ä¾èµ– â†’ Hibernateäº‹åŠ¡API
ï¼ˆé«˜å±‚ä¾èµ–ä½å±‚ï¼Œè€¦åˆä¸¥é‡ï¼‰

SpringæŠ½è±¡æ–¹å¼ï¼š
ä¸šåŠ¡ä»£ç  â†’ ä¾èµ– â†’ Springäº‹åŠ¡æ¥å£ï¼ˆæŠ½è±¡ï¼‰
                      â†‘
          JDBCå®ç° â”˜ â”” Hibernateå®ç°
ï¼ˆé«˜å±‚å’Œä½å±‚éƒ½ä¾èµ–æŠ½è±¡ï¼Œè§£è€¦æˆåŠŸï¼‰
```

**ç”¨ç”Ÿæ´»ä¾‹å­ç†è§£**ï¼š
> ğŸ”Œ å°±åƒæ’åº§æ ‡å‡†åŒ–ï¼š
> - ç”µå™¨åªéœ€è¦ç¬¦åˆæ’åº§è§„èŒƒï¼ˆæŠ½è±¡æ¥å£ï¼‰
> - ä¸ç”¨å…³å¿ƒç”µä»å“ªæ¥ï¼ˆç«ç”µã€æ°´ç”µã€æ ¸ç”µï¼‰
> - æ¢ç”µæºæ–¹å¼ï¼Œç”µå™¨ç…§æ ·èƒ½ç”¨

---

## 3. âš™ï¸ Springäº‹åŠ¡æŠ½è±¡çš„ä¸‰å¤§æ ¸å¿ƒæ¥å£


### 3.1 æ ¸å¿ƒæ¥å£æ¶æ„å›¾


```
äº‹åŠ¡æŠ½è±¡ä¸‰å‰‘å®¢ï¼š

PlatformTransactionManager    â† äº‹åŠ¡ç®¡ç†å™¨ï¼ˆè€å¤§ï¼‰
         â†“ ä½¿ç”¨
TransactionDefinition          â† äº‹åŠ¡å®šä¹‰ï¼ˆè§„åˆ™é…ç½®ï¼‰
         â†“ äº§ç”Ÿ
TransactionStatus              â† äº‹åŠ¡çŠ¶æ€ï¼ˆè¿è¡Œæ—¶ä¿¡æ¯ï¼‰
```

### 3.2 æ¥å£ä¸€ï¼šPlatformTransactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰


**è¿™æ˜¯ä»€ä¹ˆï¼Ÿ**
> ğŸ’¡ å¯ä»¥ç†è§£ä¸º"äº‹åŠ¡é¥æ§å™¨"çš„æ¥å£å®šä¹‰ï¼Œè§„å®šäº†é¥æ§å™¨å¿…é¡»æœ‰å“ªäº›æŒ‰é’®

**æ ¸å¿ƒæ–¹æ³•**ï¼š
```java
public interface PlatformTransactionManager {
    
    // å¼€å¯äº‹åŠ¡ï¼ˆæŒ‰ä¸‹"å¼€å§‹"æŒ‰é’®ï¼‰
    TransactionStatus getTransaction(TransactionDefinition definition);
    
    // æäº¤äº‹åŠ¡ï¼ˆæŒ‰ä¸‹"ç¡®è®¤"æŒ‰é’®ï¼‰
    void commit(TransactionStatus status);
    
    // å›æ»šäº‹åŠ¡ï¼ˆæŒ‰ä¸‹"æ’¤é”€"æŒ‰é’®ï¼‰
    void rollback(TransactionStatus status);
}
```

**å¸¸ç”¨å®ç°ç±»å¯¹ç…§è¡¨**ï¼š

| å®ç°ç±» | é€‚ç”¨åœºæ™¯ | åº•å±‚æŠ€æœ¯ | ä½¿ç”¨é¢‘ç‡ |
|--------|---------|---------|---------|
| `DataSourceTransactionManager` | JDBCã€MyBatis | `Connection` | â­â­â­â­â­ |
| `HibernateTransactionManager` | Hibernateæ¡†æ¶ | `Session` | â­â­â­ |
| `JpaTransactionManager` | JPAã€Spring Data JPA | `EntityManager` | â­â­â­â­ |
| `JtaTransactionManager` | åˆ†å¸ƒå¼äº‹åŠ¡ | JTAè§„èŒƒ | â­â­ |

**é€‰æ‹©å»ºè®®**ï¼š
```
å¦‚æœä½ ç”¨çš„æ˜¯ï¼š
ğŸ“Œ SpringBoot + MyBatis  â†’ DataSourceTransactionManager
ğŸ“Œ SpringBoot + JPA      â†’ JpaTransactionManager  
ğŸ“Œ ä¼ ç»ŸSSMæ¡†æ¶          â†’ DataSourceTransactionManager
ğŸ“Œ å¾®æœåŠ¡è·¨åº“æ“ä½œ        â†’ JtaTransactionManager
```

### 3.3 æ¥å£äºŒï¼šTransactionDefinitionï¼ˆäº‹åŠ¡å®šä¹‰ï¼‰


**è¿™æ˜¯ä»€ä¹ˆï¼Ÿ**
> ğŸ’¡ å°±æ˜¯äº‹åŠ¡çš„"é…ç½®å‚æ•°è¡¨"ï¼Œå‘Šè¯‰Springä½ æƒ³è¦ä»€ä¹ˆæ ·çš„äº‹åŠ¡

**æ ¸å¿ƒé…ç½®é¡¹**ï¼š

**1. ä¼ æ’­è¡Œä¸ºï¼ˆPropagationï¼‰**
```
é—®é¢˜ï¼šæ–¹æ³•Aè°ƒç”¨æ–¹æ³•Bï¼Œä¸¤ä¸ªéƒ½è¦äº‹åŠ¡ï¼Œæ€ä¹ˆåŠï¼Ÿ

å¸¸ç”¨é€‰é¡¹ï¼š
REQUIREDï¼ˆé»˜è®¤ï¼‰    â†’ BåŠ å…¥Açš„äº‹åŠ¡ï¼ˆæœ€å¸¸ç”¨ï¼‰
REQUIRES_NEW        â†’ Bå¼€æ–°äº‹åŠ¡ï¼ŒæŒ‚èµ·Açš„äº‹åŠ¡
NESTED              â†’ Bå¼€å­äº‹åŠ¡ï¼ˆåµŒå¥—åœ¨Aé‡Œé¢ï¼‰
SUPPORTS            â†’ æœ‰äº‹åŠ¡å°±ç”¨ï¼Œæ²¡æœ‰å°±ç®—äº†
NOT_SUPPORTED       â†’ ä¸è¦äº‹åŠ¡ï¼Œæœ‰ä¹ŸæŒ‚èµ·
```

**ç”Ÿæ´»åœºæ™¯ç†è§£**ï¼š
```
ğŸª åœºæ™¯ï¼šå»è¶…å¸‚è´­ç‰©

REQUIREDï¼š
- ä½ å’Œæœ‹å‹ä¸€èµ·ç»“è´¦ï¼ˆå…±ç”¨ä¸€ä¸ªè´­ç‰©è½¦ï¼‰
- ä¸€ä¸ªäººçš„å•†å“æœ‰é—®é¢˜ï¼Œæ•´è½¦éƒ½é€€

REQUIRES_NEWï¼š  
- ä½ ä»¬åˆ†å¼€ç»“è´¦ï¼ˆå„ç”¨å„çš„è´­ç‰©è½¦ï¼‰
- ä½ çš„å•†å“æœ‰é—®é¢˜ä¸å½±å“æœ‹å‹

NESTEDï¼š
- æœ‹å‹çš„å•†å“æ”¾ä½ è´­ç‰©è½¦çš„å°ç¯®å­é‡Œ
- å°ç¯®å­å•†å“æœ‰é—®é¢˜å¯ä»¥å•ç‹¬é€€ï¼Œä¸å½±å“å¤§è´­ç‰©è½¦å…¶ä»–å•†å“
```

**2. éš”ç¦»çº§åˆ«ï¼ˆIsolation Levelï¼‰**

| éš”ç¦»çº§åˆ« | è¯´æ˜ | è§£å†³çš„é—®é¢˜ | æ€§èƒ½ |
|---------|------|-----------|-----|
| `READ_UNCOMMITTED` | è¯»æœªæäº¤ | å•¥ä¹Ÿä¸è§£å†³ | âš¡âš¡âš¡âš¡ |
| `READ_COMMITTED` | è¯»å·²æäº¤ | è„è¯» | âš¡âš¡âš¡ |
| `REPEATABLE_READ` | å¯é‡å¤è¯» | è„è¯»ã€ä¸å¯é‡å¤è¯» | âš¡âš¡ |
| `SERIALIZABLE` | ä¸²è¡ŒåŒ– | å…¨éƒ¨è§£å†³ | âš¡ |

**3. è¶…æ—¶æ—¶é—´ï¼ˆTimeoutï¼‰**
```java
@Transactional(timeout = 30)  // 30ç§’è¶…æ—¶
public void slowOperation() {
    // å¦‚æœ30ç§’å†…æ²¡å®Œæˆï¼Œè‡ªåŠ¨å›æ»š
}
```

**4. åªè¯»æ ‡å¿—ï¼ˆRead-onlyï¼‰**
```java
@Transactional(readOnly = true)
public List<User> queryUsers() {
    // å‘Šè¯‰æ•°æ®åº“è¿™æ˜¯åªè¯»æ“ä½œï¼Œå¯ä»¥ä¼˜åŒ–
}
```

### 3.4 æ¥å£ä¸‰ï¼šTransactionStatusï¼ˆäº‹åŠ¡çŠ¶æ€ï¼‰


**è¿™æ˜¯ä»€ä¹ˆï¼Ÿ**
> ğŸ’¡ å°±æ˜¯äº‹åŠ¡è¿è¡Œè¿‡ç¨‹ä¸­çš„"ä»ªè¡¨ç›˜"ï¼Œæ˜¾ç¤ºå½“å‰äº‹åŠ¡çš„çŠ¶æ€ä¿¡æ¯

**æ ¸å¿ƒçŠ¶æ€ä¿¡æ¯**ï¼š
```java
public interface TransactionStatus {
    
    boolean isNewTransaction();      // æ˜¯ä¸æ˜¯æ–°å¼€çš„äº‹åŠ¡ï¼Ÿ
    
    boolean hasSavepoint();          // æœ‰æ²¡æœ‰ä¿å­˜ç‚¹ï¼Ÿ
    
    void setRollbackOnly();          // æ ‡è®°ä¸ºåªèƒ½å›æ»š
    
    boolean isRollbackOnly();        // æ£€æŸ¥æ˜¯å¦æ ‡è®°äº†å›æ»š
    
    boolean isCompleted();           // äº‹åŠ¡å®Œæˆäº†å—ï¼Ÿ
}
```

**å®é™…ç”¨é€”**ï¼š
```java
@Transactional
public void complexOperation() {
    try {
        // ä¸šåŠ¡æ“ä½œ1
        doSomething();
        
        // æ£€æŸ¥äº‹åŠ¡çŠ¶æ€
        TransactionStatus status = 
            TransactionAspectSupport.currentTransactionStatus();
            
        if (someCondition) {
            // æ‰‹åŠ¨æ ‡è®°å›æ»š
            status.setRollbackOnly();
        }
        
        // ä¸šåŠ¡æ“ä½œ2
        doSomethingElse();
        
    } catch (Exception e) {
        // å¼‚å¸¸å¤„ç†
    }
}
```

---

## 4. ğŸ”„ äº‹åŠ¡ç®¡ç†å™¨çš„é€‰æ‹©æœºåˆ¶


### 4.1 Springå¦‚ä½•é€‰æ‹©äº‹åŠ¡ç®¡ç†å™¨


**è‡ªåŠ¨é€‰æ‹©æµç¨‹**ï¼š
```
å¯åŠ¨æ—¶ï¼š
1. æ‰«æé…ç½®æ–‡ä»¶/æ³¨è§£
   â†“
2. æ£€æµ‹Classpathä¸­çš„ä¾èµ–
   å‘ç°MyBatis â†’ æ³¨å†ŒDataSourceTransactionManager
   å‘ç°JPA    â†’ æ³¨å†ŒJpaTransactionManager
   â†“
3. æ³¨å…¥åˆ°Springå®¹å™¨
   â†“
è¿è¡Œæ—¶ï¼š
4. @Transactionalè§¦å‘
   â†“
5. æŸ¥æ‰¾å®¹å™¨ä¸­çš„TransactionManager
   â†“
6. è°ƒç”¨å¯¹åº”çš„äº‹åŠ¡ç®¡ç†å™¨
```

### 4.2 é…ç½®æ–¹å¼å¯¹æ¯”


**æ–¹å¼1ï¼šSpringBootè‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰**
```java
// åªéœ€è¦å¼•å…¥ä¾èµ–ï¼ŒSpringBootè‡ªåŠ¨é…ç½®
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-jdbc</artifactId>
</dependency>

// è‡ªåŠ¨è£…é…DataSourceTransactionManager
```

**æ–¹å¼2ï¼šXMLæ˜¾å¼é…ç½®**
```xml
<!-- é…ç½®æ•°æ®æº -->
<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource">
    <!-- æ•°æ®åº“é…ç½® -->
</bean>

<!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ -->
<bean id="transactionManager" 
      class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>

<!-- å¼€å¯äº‹åŠ¡æ³¨è§£ -->
<tx:annotation-driven transaction-manager="transactionManager"/>
```

**æ–¹å¼3ï¼šJavaé…ç½®ç±»**
```java
@Configuration
@EnableTransactionManagement  // å¼€å¯äº‹åŠ¡ç®¡ç†
public class TransactionConfig {
    
    @Bean
    public PlatformTransactionManager transactionManager(DataSource dataSource) {
        return new DataSourceTransactionManager(dataSource);
    }
}
```

### 4.3 å¤šæ•°æ®æºåœºæ™¯


**é—®é¢˜**ï¼šä¸€ä¸ªé¡¹ç›®åŒæ—¶æ“ä½œMySQLå’ŒMongoDBæ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```java
@Configuration
public class MultiTransactionConfig {
    
    // MySQLäº‹åŠ¡ç®¡ç†å™¨
    @Bean("mysqlTxManager")
    public PlatformTransactionManager mysqlTransactionManager(
            @Qualifier("mysqlDataSource") DataSource dataSource) {
        return new DataSourceTransactionManager(dataSource);
    }
    
    // MongoDBäº‹åŠ¡ç®¡ç†å™¨
    @Bean("mongoTxManager")
    public PlatformTransactionManager mongoTransactionManager(
            MongoDbFactory mongoDbFactory) {
        return new MongoTransactionManager(mongoDbFactory);
    }
}

// ä½¿ç”¨æ—¶æŒ‡å®š
@Transactional("mysqlTxManager")
public void updateMysql() { }

@Transactional("mongoTxManager")  
public void updateMongo() { }
```

---

## 5. ğŸ­ AOPä»£ç†å¦‚ä½•å®ç°äº‹åŠ¡


### 5.1 ä»€ä¹ˆæ˜¯AOPä»£ç†


**é€šä¿—ç†è§£**ï¼š
> ğŸ¬ æƒ³è±¡ä½ æ˜¯æ¼”å‘˜ï¼ŒSpringæ˜¯ä½ çš„æ›¿èº«æ¼”å‘˜
> - å¯¼æ¼”å–Šå¼€æ‹ï¼Œæ›¿èº«å…ˆä¸Šåœºï¼ˆä»£ç†å¯¹è±¡ï¼‰
> - æ›¿èº«å…ˆåšå‡†å¤‡å·¥ä½œï¼ˆå¼€å¯äº‹åŠ¡ï¼‰
> - ç„¶åçœŸæ­£çš„ä½ ä¸Šåœºï¼ˆè°ƒç”¨çœŸå®æ–¹æ³•ï¼‰
> - æ‹å®Œåæ›¿èº«åšæ”¶å°¾å·¥ä½œï¼ˆæäº¤/å›æ»šäº‹åŠ¡ï¼‰

**æŠ€æœ¯åŸç†**ï¼š
```
åŸå§‹å¯¹è±¡ï¼šUserService
         â†“ SpringåŒ…è£…
ä»£ç†å¯¹è±¡ï¼šUserService$$EnhancerBySpringCGLIB$$12345
         â†“ è°ƒç”¨æ–¹æ³•æ—¶
å¢å¼ºæµç¨‹ï¼š
    1. å‰ç½®å¢å¼ºï¼šå¼€å¯äº‹åŠ¡
    2. è°ƒç”¨åŸå§‹æ–¹æ³•
    3. åç½®å¢å¼ºï¼šæäº¤/å›æ»šäº‹åŠ¡
```

### 5.2 ä¸¤ç§ä»£ç†æ–¹å¼


**JDKåŠ¨æ€ä»£ç† vs CGLIBä»£ç†**

| å¯¹æ¯”é¡¹ | JDKåŠ¨æ€ä»£ç† | CGLIBä»£ç† |
|--------|------------|----------|
| **å‰ææ¡ä»¶** | å¿…é¡»æœ‰æ¥å£ | æ— éœ€æ¥å£ |
| **åŸç†** | å®ç°æ¥å£ | ç»§æ‰¿ç±» |
| **æ€§èƒ½** | ç¨å¿« | ç¨æ…¢ |
| **é™åˆ¶** | finalæ–¹æ³•æ— æ³•ä»£ç† | finalç±»æ— æ³•ä»£ç† |

**å®é™…ä¾‹å­**ï¼š
```java
// åœºæ™¯1ï¼šæœ‰æ¥å£ â†’ ä½¿ç”¨JDKä»£ç†
public interface UserService {
    void transfer(Long from, Long to, BigDecimal amount);
}

@Service
public class UserServiceImpl implements UserService {
    @Transactional
    public void transfer(...) { }
}
// Springåˆ›å»ºï¼šUserServiceä»£ç†å¯¹è±¡ï¼ˆJDKæ–¹å¼ï¼‰

// åœºæ™¯2ï¼šæ— æ¥å£ â†’ ä½¿ç”¨CGLIBä»£ç†  
@Service
public class OrderService {
    @Transactional
    public void createOrder(...) { }
}
// Springåˆ›å»ºï¼šOrderService$$CGLIBå­ç±»ä»£ç†å¯¹è±¡
```

### 5.3 ä»£ç†æ‰§è¡Œæµç¨‹


**å®Œæ•´æµç¨‹å›¾**ï¼š
```
å®¢æˆ·ç«¯è°ƒç”¨
    â†“
ä»£ç†å¯¹è±¡æ‹¦æˆª
    â†“
TransactionInterceptorï¼ˆäº‹åŠ¡æ‹¦æˆªå™¨ï¼‰
    â†“
ã€å‰ç½®å¤„ç†ã€‘
â”œâ”€ 1. è·å–äº‹åŠ¡å±æ€§ï¼ˆ@Transactionalé…ç½®ï¼‰
â”œâ”€ 2. è·å–äº‹åŠ¡ç®¡ç†å™¨
â”œâ”€ 3. å¼€å¯äº‹åŠ¡
â”‚     â””â”€ getTransaction(definition)
â”œâ”€ 4. ç»‘å®šäº‹åŠ¡åˆ°å½“å‰çº¿ç¨‹
    â†“
ã€è°ƒç”¨ç›®æ ‡æ–¹æ³•ã€‘
â”œâ”€ 5. åå°„è°ƒç”¨çœŸå®æ–¹æ³•
â”‚     â””â”€ method.invoke(target, args)
    â†“
ã€åç½®å¤„ç†ã€‘
â”œâ”€ 6. æ–¹æ³•æ­£å¸¸è¿”å›
â”‚     â””â”€ commit(status)  âœ… æäº¤äº‹åŠ¡
â”œâ”€ 7. æ–¹æ³•æŠ›å‡ºå¼‚å¸¸
â”‚     â”œâ”€ RuntimeException â†’ rollback(status) âŒ å›æ»š
â”‚     â””â”€ CheckedException â†’ commit(status)  âœ… æäº¤ï¼ˆé»˜è®¤ï¼‰
    â†“
è¿”å›ç»“æœç»™å®¢æˆ·ç«¯
```

### 5.4 å…³é”®ä»£ç æ¨¡æ‹Ÿ


**ç®€åŒ–ç‰ˆäº‹åŠ¡æ‹¦æˆªå™¨é€»è¾‘**ï¼š
```java
public class SimpleTransactionInterceptor {
    
    public Object invoke(MethodInvocation invocation) throws Throwable {
        // 1. è·å–äº‹åŠ¡ç®¡ç†å™¨
        PlatformTransactionManager txManager = getTransactionManager();
        
        // 2. è·å–äº‹åŠ¡å®šä¹‰
        TransactionDefinition definition = getTransactionDefinition();
        
        // 3. å¼€å¯äº‹åŠ¡
        TransactionStatus status = txManager.getTransaction(definition);
        
        try {
            // 4. æ‰§è¡Œç›®æ ‡æ–¹æ³•
            Object result = invocation.proceed();
            
            // 5. æäº¤äº‹åŠ¡
            txManager.commit(status);
            
            return result;
            
        } catch (RuntimeException | Error ex) {
            // 6. å›æ»šäº‹åŠ¡
            txManager.rollback(status);
            throw ex;
        }
    }
}
```

---

## 6. ğŸ—ï¸ æ¶æ„è®¾è®¡åŸç†æ·±åº¦è§£æ


### 6.1 è®¾è®¡æ¨¡å¼åº”ç”¨


**æ¨¡å¼1ï¼šç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰**
```
é—®é¢˜ï¼šä¸åŒæ¡†æ¶äº‹åŠ¡å®ç°ä¸åŒ

è§£å†³ï¼š
PlatformTransactionManagerï¼ˆç­–ç•¥æ¥å£ï¼‰
    â†“
å…·ä½“ç­–ç•¥ï¼š
â”œâ”€ DataSourceTransactionManagerï¼ˆJDBCç­–ç•¥ï¼‰
â”œâ”€ HibernateTransactionManagerï¼ˆHibernateç­–ç•¥ï¼‰  
â””â”€ JpaTransactionManagerï¼ˆJPAç­–ç•¥ï¼‰

å®¢æˆ·ç«¯åªä¾èµ–æ¥å£ï¼Œè¿è¡Œæ—¶é€‰æ‹©å…·ä½“ç­–ç•¥
```

**æ¨¡å¼2ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰**
```
AbstractPlatformTransactionManagerï¼ˆæŠ½è±¡æ¨¡æ¿ç±»ï¼‰
    â†“ å®šä¹‰äº‹åŠ¡æµç¨‹éª¨æ¶
â”œâ”€ doBegin()      â†’ ç•™ç»™å­ç±»å®ç°ï¼ˆå¼€å¯äº‹åŠ¡ï¼‰
â”œâ”€ doCommit()     â†’ ç•™ç»™å­ç±»å®ç°ï¼ˆæäº¤äº‹åŠ¡ï¼‰
â”œâ”€ doRollback()   â†’ ç•™ç»™å­ç±»å®ç°ï¼ˆå›æ»šäº‹åŠ¡ï¼‰
â””â”€ getTransaction() â†’ å›ºå®šæµç¨‹ï¼ˆæ£€æŸ¥ä¼ æ’­è¡Œä¸ºç­‰ï¼‰

ä¸åŒå®ç°ç±»åªéœ€å¡«å……å…·ä½“æ­¥éª¤
```

**æ¨¡å¼3ï¼šä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰**
```
çœŸå®å¯¹è±¡ï¼šUserService
         â†“ åŒ…è£…
ä»£ç†å¯¹è±¡ï¼šUserServiceProxy
         â†“ å¢å¼º
åŠŸèƒ½å¢å¼ºï¼šäº‹åŠ¡æ§åˆ¶ã€æ—¥å¿—è®°å½•ã€æƒé™æ£€æŸ¥
```

### 6.2 åˆ†å±‚æ¶æ„è§£æ


**å››å±‚æ¶æ„æ¨¡å‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰          â”‚
â”‚  - @Transactionalæ³¨è§£                â”‚
â”‚  - ä¸šåŠ¡æ–¹æ³•                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AOPä»£ç†å±‚ï¼ˆProxy Layerï¼‰             â”‚
â”‚  - TransactionInterceptor            â”‚
â”‚  - äº‹åŠ¡æ‹¦æˆªé€»è¾‘                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  äº‹åŠ¡æŠ½è±¡å±‚ï¼ˆAbstraction Layerï¼‰      â”‚
â”‚  - PlatformTransactionManager        â”‚
â”‚  - TransactionDefinition             â”‚
â”‚  - TransactionStatus                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®ç°å±‚ï¼ˆImplementation Layerï¼‰       â”‚
â”‚  - DataSourceTransactionManager      â”‚
â”‚  - JpaTransactionManager             â”‚
â”‚  - å…·ä½“äº‹åŠ¡æ“ä½œ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ†å±‚å¥½å¤„**ï¼š
- ğŸ¯ **åº”ç”¨å±‚**ï¼šå¼€å‘è€…åªå…³å¿ƒä¸šåŠ¡é€»è¾‘
- ğŸ”§ **ä»£ç†å±‚**ï¼šè‡ªåŠ¨ç»‡å…¥äº‹åŠ¡æ§åˆ¶
- ğŸ“¦ **æŠ½è±¡å±‚**ï¼šç»Ÿä¸€äº‹åŠ¡æ¥å£
- âš™ï¸ **å®ç°å±‚**ï¼šé€‚é…ä¸åŒæŠ€æœ¯æ ˆ

### 6.3 çº¿ç¨‹ç»‘å®šæœºåˆ¶


**æ ¸å¿ƒé—®é¢˜**ï¼šäº‹åŠ¡ä¿¡æ¯å¦‚ä½•åœ¨æ–¹æ³•è°ƒç”¨é“¾ä¸­ä¼ é€’ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼šThreadLocal**
```java
// Springå†…éƒ¨ä½¿ç”¨ThreadLocalå­˜å‚¨äº‹åŠ¡
public abstract class TransactionSynchronizationManager {
    
    private static final ThreadLocal<Map<Object, Object>> resources = 
        new NamedThreadLocal<>("Transactional resources");
    
    private static final ThreadLocal<Set<TransactionSynchronization>> synchronizations = 
        new NamedThreadLocal<>("Transaction synchronizations");
}
```

**å·¥ä½œåŸç†**ï¼š
```
çº¿ç¨‹1ï¼š
TransactionManager.getTransaction()
    â†“ å­˜å…¥ThreadLocal
[Thread-1: Transaction-A]
    â†“ æ–¹æ³•è°ƒç”¨
methodA() â†’ methodB() â†’ methodC()
    â†“ éƒ½èƒ½è·å–
åŒä¸€ä¸ªTransaction-A

çº¿ç¨‹2ï¼š
TransactionManager.getTransaction()
    â†“ å­˜å…¥ThreadLocal  
[Thread-2: Transaction-B]
    â†“ äº’ä¸å¹²æ‰°
ä¸çº¿ç¨‹1å®Œå…¨éš”ç¦»
```

**å®é™…åº”ç”¨**ï¼š
```java
@Transactional
public void outerMethod() {
    // å¼€å¯äº‹åŠ¡ï¼Œç»‘å®šåˆ°Thread-1
    
    innerMethod();  // è·å–Thread-1çš„äº‹åŠ¡
}

public void innerMethod() {
    // é€šè¿‡ThreadLocalè·å–å½“å‰çº¿ç¨‹äº‹åŠ¡
    TransactionStatus status = 
        TransactionSynchronizationManager.getCurrentTransactionStatus();
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ äº‹åŠ¡æŠ½è±¡çš„æœ¬è´¨**
```
é—®é¢˜ï¼šä¸åŒæ¡†æ¶äº‹åŠ¡APIä¸åŒ
æ–¹æ¡ˆï¼šSpringæä¾›ç»Ÿä¸€æ¥å£
æ•ˆæœï¼šä¸šåŠ¡ä»£ç ä¸æŠ€æœ¯å®ç°è§£è€¦
```

**ğŸ”¸ ä¸‰å¤§æ ¸å¿ƒæ¥å£èŒè´£**

| æ¥å£ | èŒè´£ | æ¯”å–» |
|------|------|------|
| `PlatformTransactionManager` | æ‰§è¡Œäº‹åŠ¡æ“ä½œ | é¥æ§å™¨ |
| `TransactionDefinition` | å®šä¹‰äº‹åŠ¡è§„åˆ™ | é¥æ§å™¨é…ç½®è¯´æ˜ä¹¦ |
| `TransactionStatus` | è®°å½•è¿è¡ŒçŠ¶æ€ | é¥æ§å™¨æ˜¾ç¤ºå± |

**ğŸ”¸ AOPä»£ç†æœºåˆ¶**
```
ä»£ç†å¯¹è±¡ = åŸå¯¹è±¡ + äº‹åŠ¡å¢å¼º

æ‰§è¡Œæµç¨‹ï¼š
è°ƒç”¨ä»£ç† â†’ å¼€å¯äº‹åŠ¡ â†’ æ‰§è¡Œæ–¹æ³• â†’ æäº¤/å›æ»š
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆè¦æŠ½è±¡ï¼Ÿ**
```
æ ¸å¿ƒä»·å€¼ï¼š
âœ… è§£è€¦ä¸šåŠ¡ä»£ç å’ŒæŠ€æœ¯å®ç°
âœ… åˆ‡æ¢æŠ€æœ¯æ ˆæ— éœ€æ”¹ä»£ç 
âœ… ä»£ç ç®€æ´æ˜“ç»´æŠ¤
âœ… ç¬¦åˆå¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ï¼‰
```

**ğŸ”¹ äº‹åŠ¡ç®¡ç†å™¨å¦‚ä½•é€‰æ‹©ï¼Ÿ**
```
SpringBootç¯å¢ƒï¼š
- è‡ªåŠ¨æ£€æµ‹ä¾èµ–
- è‡ªåŠ¨é…ç½®å¯¹åº”ç®¡ç†å™¨
- å¤šæ•°æ®æºéœ€æ‰‹åŠ¨æŒ‡å®š

ä¼ ç»ŸSpringï¼š
- XMLé…ç½®
- æˆ–Javaé…ç½®ç±»
- æ˜¾å¼å£°æ˜ç®¡ç†å™¨
```

**ğŸ”¹ ä»£ç†ä»€ä¹ˆæ—¶å€™å¤±æ•ˆï¼Ÿ**
```
âš ï¸ å¤±æ•ˆåœºæ™¯ï¼š
1. ç±»å†…éƒ¨æ–¹æ³•è°ƒç”¨ï¼ˆthis.method()ï¼‰
2. privateæ–¹æ³•
3. finalæ–¹æ³•ï¼ˆCGLIBæ— æ³•ä»£ç†ï¼‰
4. éSpringç®¡ç†çš„å¯¹è±¡

âœ… æ­£ç¡®åšæ³•ï¼š
- é€šè¿‡Springæ³¨å…¥çš„Beanè°ƒç”¨
- publicæ–¹æ³•
- éfinalä¿®é¥°
```

### 7.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ’¡ æ—¥å¸¸å¼€å‘å»ºè®®**
```
1. ä¼˜å…ˆä½¿ç”¨@Transactionalæ³¨è§£
   - ç®€æ´æ˜äº†
   - å£°æ˜å¼äº‹åŠ¡

2. åˆç†é…ç½®ä¼ æ’­è¡Œä¸º
   - å¤§å¤šæ•°åœºæ™¯ç”¨REQUIRED
   - éœ€è¦ç‹¬ç«‹äº‹åŠ¡ç”¨REQUIRES_NEW
   - æ—¥å¿—ç­‰æ“ä½œç”¨NOT_SUPPORTED

3. æ³¨æ„å¼‚å¸¸å›æ»šè§„åˆ™
   - RuntimeExceptioné»˜è®¤å›æ»š
   - CheckedExceptioné»˜è®¤ä¸å›æ»š
   - å¯è‡ªå®šä¹‰ï¼šrollbackFor = Exception.class

4. é¿å…é•¿äº‹åŠ¡
   - å°½é‡å‡å°äº‹åŠ¡èŒƒå›´
   - æŸ¥è¯¢æ“ä½œç”¨readOnly=true
   - å¤æ‚é€»è¾‘æ‹†åˆ†å¤šä¸ªäº‹åŠ¡
```

**ğŸš¨ å¸¸è§é—®é¢˜æ’æŸ¥**
```
é—®é¢˜1ï¼šäº‹åŠ¡ä¸ç”Ÿæ•ˆ
â†’ æ£€æŸ¥ï¼šæ˜¯å¦é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨
â†’ æ£€æŸ¥ï¼šæ–¹æ³•æ˜¯å¦public
â†’ æ£€æŸ¥ï¼šç±»æ˜¯å¦è¢«Springç®¡ç†

é—®é¢˜2ï¼šäº‹åŠ¡æ²¡å›æ»š  
â†’ æ£€æŸ¥ï¼šå¼‚å¸¸ç±»å‹ï¼ˆCheckedå¼‚å¸¸é»˜è®¤ä¸å›æ»šï¼‰
â†’ æ£€æŸ¥ï¼šæ˜¯å¦æ‰‹åŠ¨catchäº†å¼‚å¸¸

é—®é¢˜3ï¼šå¤šæ•°æ®æºäº‹åŠ¡æ··ä¹±
â†’ æ£€æŸ¥ï¼šæ˜¯å¦æŒ‡å®štransactionManager
â†’ æ£€æŸ¥ï¼šä¸åŒæ•°æ®æºç”¨ä¸åŒç®¡ç†å™¨
```

### 7.4 è¿›é˜¶å­¦ä¹ è·¯å¾„


**ğŸ“š æ·±å…¥å­¦ä¹ æ–¹å‘**
```
åŸºç¡€æŒæ¡ï¼š
â””â”€ ä¸‰å¤§æ ¸å¿ƒæ¥å£ âœ“
â””â”€ AOPä»£ç†åŸç† âœ“
â””â”€ äº‹åŠ¡ä¼ æ’­è¡Œä¸º âœ“

è¿›é˜¶å­¦ä¹ ï¼š
â””â”€ å£°æ˜å¼äº‹åŠ¡æºç åˆ†æ
â””â”€ ç¼–ç¨‹å¼äº‹åŠ¡ä½¿ç”¨
â””â”€ åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ
â””â”€ äº‹åŠ¡æ€§èƒ½ä¼˜åŒ–

å®æˆ˜æ¼”ç»ƒï¼š
â””â”€ å¤šæ•°æ®æºäº‹åŠ¡é…ç½®
â””â”€ äº‹åŠ¡å¤±æ•ˆé—®é¢˜æ’æŸ¥
â””â”€ äº‹åŠ¡ç›‘æ§å’Œè°ƒä¼˜
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
Springäº‹åŠ¡ä¸‰æ¥å£ï¼Œ
ç®¡ç†å™¨å®šä¹‰å’ŒçŠ¶æ€ã€‚
AOPä»£ç†è‡ªåŠ¨å¢å¼ºï¼Œ
å¼€å¯æäº¤å›æ»šå…¨åŒ…æ½ã€‚
æŠ½è±¡è§£è€¦æ˜¯æ ¸å¿ƒï¼Œ
æ¡†æ¶åˆ‡æ¢ä¸ç”¨æ…Œã€‚
```

---

> ğŸ’¡ **å­¦ä¹ æç¤º**ï¼šäº‹åŠ¡æŠ½è±¡æ˜¯Springçš„æ ¸å¿ƒè®¾è®¡ä¹‹ä¸€ï¼Œç†è§£è¿™å¥—æ¶æ„å¯¹æŒæ¡Springæ¡†æ¶è‡³å…³é‡è¦ã€‚å»ºè®®å¤šåŠ¨æ‰‹å®è·µï¼Œé‡åˆ°äº‹åŠ¡é—®é¢˜æ—¶ç»“åˆæœ¬ç¬”è®°æ’æŸ¥ã€‚

> ğŸ“– **ä¸‹ä¸€èŠ‚é¢„å‘Š**ï¼šæˆ‘ä»¬å°†å­¦ä¹ å£°æ˜å¼äº‹åŠ¡çš„å…·ä½“ä½¿ç”¨ï¼ŒåŒ…æ‹¬`@Transactional`æ³¨è§£çš„å„ç§é…ç½®å’Œæœ€ä½³å®è·µã€‚