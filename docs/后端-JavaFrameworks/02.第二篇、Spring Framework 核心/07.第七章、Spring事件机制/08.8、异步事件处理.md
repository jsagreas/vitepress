---
title: 8ã€å¼‚æ­¥äº‹ä»¶å¤„ç†
---
## ğŸ“š ç›®å½•

1. [å¼‚æ­¥äº‹ä»¶å¤„ç†æ¦‚è¿°](#1-å¼‚æ­¥äº‹ä»¶å¤„ç†æ¦‚è¿°)
2. [@Asyncå¼‚æ­¥å¤„ç†](#2-asyncå¼‚æ­¥å¤„ç†)
3. [çº¿ç¨‹æ± é…ç½®è¯¦è§£](#3-çº¿ç¨‹æ± é…ç½®è¯¦è§£)
4. [å¼‚æ­¥æ‰§è¡Œå™¨å®šåˆ¶](#4-å¼‚æ­¥æ‰§è¡Œå™¨å®šåˆ¶)
5. [å¼‚æ­¥é”™è¯¯å¤„ç†](#5-å¼‚æ­¥é”™è¯¯å¤„ç†)
6. [ç»“æœå›è°ƒæœºåˆ¶](#6-ç»“æœå›è°ƒæœºåˆ¶)
7. [èƒŒå‹æ§åˆ¶ç­–ç•¥](#7-èƒŒå‹æ§åˆ¶ç­–ç•¥)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ å¼‚æ­¥äº‹ä»¶å¤„ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯å¼‚æ­¥äº‹ä»¶å¤„ç†


**é€šä¿—ç†è§£**ï¼š
æƒ³è±¡ä½ åœ¨é¤å…ç‚¹é¤ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š
- **åŒæ­¥æ–¹å¼**ï¼šå¨å¸ˆåšå®Œä½ çš„èœï¼Œä½ æ‰èƒ½ç»§ç»­åšå…¶ä»–äº‹ï¼ˆç­‰å¾…ä¸­ï¼‰
- **å¼‚æ­¥æ–¹å¼**ï¼šç‚¹å®Œé¤æ‹¿ä¸ªå·ç ç‰Œï¼Œä½ å¯ä»¥å…ˆå»ç©æ‰‹æœºã€èŠå¤©ï¼Œèœå¥½äº†å†å«ä½ 

```
Springå¼‚æ­¥äº‹ä»¶å°±æ˜¯è¿™ä¸ªé“ç†ï¼š

åŒæ­¥äº‹ä»¶æµç¨‹ï¼š
å‘å¸ƒäº‹ä»¶ â†’ ç­‰å¾…ç›‘å¬å™¨1æ‰§è¡Œ â†’ ç­‰å¾…ç›‘å¬å™¨2æ‰§è¡Œ â†’ ä¸»çº¿ç¨‹ç»§ç»­
        â³ é˜»å¡ç­‰å¾…æ‰€æœ‰ç›‘å¬å™¨å®Œæˆ

å¼‚æ­¥äº‹ä»¶æµç¨‹ï¼š
å‘å¸ƒäº‹ä»¶ â†’ ç«‹å³è¿”å› â†’ ä¸»çº¿ç¨‹ç»§ç»­
         â†“
      ç›‘å¬å™¨åœ¨åå°çº¿ç¨‹æ‰§è¡Œ âœ¨
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥äº‹ä»¶


**æ ¸å¿ƒåœºæ™¯å¯¹æ¯”**ï¼š

| åœºæ™¯ç±»å‹ | åŒæ­¥å¤„ç† | å¼‚æ­¥å¤„ç† | é€‚ç”¨æƒ…å†µ |
|---------|---------|---------|---------|
| **ç”¨æˆ·æ³¨å†Œ** | æ³¨å†Œâ†’å‘é‚®ä»¶â†’å‘çŸ­ä¿¡â†’è¿”å›<br/>â±ï¸ è€—æ—¶3ç§’ | æ³¨å†Œâ†’ç«‹å³è¿”å›<br/>ğŸ“§ åå°å‘é‚®ä»¶ğŸ“±å‘çŸ­ä¿¡<br/>â±ï¸ è€—æ—¶0.5ç§’ | âœ… å¼‚æ­¥æ›´å¥½ |
| **è®¢å•åˆ›å»º** | åˆ›å»ºâ†’æ‰£åº“å­˜â†’å‘é€šçŸ¥â†’è¿”å› | åˆ›å»ºâ†’åå°å¤„ç†å…¶ä»–æ“ä½œ | âœ… å¼‚æ­¥æ›´å¥½ |
| **æ”¯ä»˜å›è°ƒ** | å¤„ç†â†’æ›´æ–°è®¢å•â†’é€šçŸ¥ç”¨æˆ· | å¿…é¡»ç¡®ä¿é¡ºåºæ‰§è¡Œ | âŒ å¿…é¡»åŒæ­¥ |

**ğŸ’¡ æ ¸å¿ƒä»·å€¼**ï¼š
```
âœ… æå‡å“åº”é€Ÿåº¦ï¼šä¸»æµç¨‹ä¸è¢«è€—æ—¶æ“ä½œé˜»å¡
âœ… æé«˜ç³»ç»Ÿååï¼šå……åˆ†åˆ©ç”¨CPUå’ŒIOèµ„æº
âœ… æ”¹å–„ç”¨æˆ·ä½“éªŒï¼šå¿«é€Ÿè¿”å›ç»“æœç»™ç”¨æˆ·
âœ… è§£è€¦ä¸šåŠ¡é€»è¾‘ï¼šä¸»æµç¨‹å’Œè¾…åŠ©æµç¨‹åˆ†ç¦»
```

### 1.3 å¼‚æ­¥äº‹ä»¶çš„å·¥ä½œåŸç†


**æ‰§è¡Œæµç¨‹å›¾ç¤º**ï¼š
```
ä¸»çº¿ç¨‹                          å·¥ä½œçº¿ç¨‹æ± 
  |                               |
  |--å‘å¸ƒäº‹ä»¶-------------------â†’ |
  |                               |
  |â†--ç«‹å³è¿”å›                     |
  |                               |
  |--ç»§ç»­æ‰§è¡Œä¸šåŠ¡                  |--ç›‘å¬å™¨1æ‰§è¡Œ
  |                               |
  |--å¤„ç†å…¶ä»–è¯·æ±‚                  |--ç›‘å¬å™¨2æ‰§è¡Œ
  |                               |
  â†“                               â†“
```

---

## 2. ğŸ“ @Asyncå¼‚æ­¥å¤„ç†


### 2.1 å¯ç”¨å¼‚æ­¥æ”¯æŒ


**ç¬¬ä¸€æ­¥ï¼šå¼€å¯å¼‚æ­¥åŠŸèƒ½**
```java
@Configuration
@EnableAsync  // â† è¿™ä¸ªæ³¨è§£å¼€å¯å¼‚æ­¥æ”¯æŒ
public class AsyncConfig {
    // é…ç½®å†…å®¹åé¢è¯¦ç»†è¯´æ˜
}
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼š`@EnableAsync` å°±åƒæ‰“å¼€äº†å¼‚æ­¥åŠŸèƒ½çš„å¼€å…³ï¼ŒSpringæ‰ä¼šè¯†åˆ« `@Async` æ³¨è§£

### 2.2 åŸºç¡€ä½¿ç”¨æ–¹å¼


**æ–¹å¼ä¸€ï¼šæœ€ç®€å•çš„å¼‚æ­¥äº‹ä»¶ç›‘å¬**
```java
@Component
public class UserEventListener {
    
    @Async  // â† åŠ è¿™ä¸ªæ³¨è§£å°±å˜æˆå¼‚æ­¥äº†
    @EventListener
    public void handleUserRegister(UserRegisterEvent event) {
        // è¿™ä¸ªæ–¹æ³•ä¼šåœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­æ‰§è¡Œ
        System.out.println("å½“å‰çº¿ç¨‹ï¼š" + Thread.currentThread().getName());
        
        // å‘é€æ¬¢è¿é‚®ä»¶ï¼ˆè€—æ—¶æ“ä½œï¼‰
        sendWelcomeEmail(event.getUser());
    }
}
```

**å¯¹æ¯”åŒæ­¥ä¸å¼‚æ­¥**ï¼š
```
â‘  ä¸åŠ @Asyncï¼ˆåŒæ­¥ï¼‰ï¼š
   ä¸»çº¿ç¨‹ â†’ æ‰§è¡Œç›‘å¬å™¨ â†’ ç»§ç»­ä¸»æµç¨‹
   é—®é¢˜ï¼šä¸»æµç¨‹è¢«é˜»å¡

â‘¡ åŠ äº†@Asyncï¼ˆå¼‚æ­¥ï¼‰ï¼š
   ä¸»çº¿ç¨‹ â†’ æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ±  â†’ ç«‹å³ç»§ç»­
   å·¥ä½œçº¿ç¨‹ â†’ æ‰§è¡Œç›‘å¬å™¨
   ä¼˜åŠ¿ï¼šä¸»æµç¨‹ä¸é˜»å¡
```

### 2.3 è¿›é˜¶ä½¿ç”¨æŠ€å·§


**æŠ€å·§ä¸€ï¼šæŒ‡å®šæ‰§è¡Œå™¨**
```java
@Component
public class OrderEventListener {
    
    // ä½¿ç”¨åä¸º"orderExecutor"çš„çº¿ç¨‹æ± 
    @Async("orderExecutor")
    @EventListener
    public void handleOrderCreate(OrderCreateEvent event) {
        // è®¢å•ç›¸å…³çš„å¼‚æ­¥ä»»åŠ¡ç”¨ä¸“é—¨çš„çº¿ç¨‹æ± 
        processOrder(event.getOrder());
    }
}
```

**æŠ€å·§äºŒï¼šè¿”å›å¼‚æ­¥ç»“æœ**
```java
@Component
public class DataProcessor {
    
    @Async
    public CompletableFuture<String> processData(String data) {
        // æ¨¡æ‹Ÿè€—æ—¶å¤„ç†
        Thread.sleep(2000);
        String result = "å¤„ç†ç»“æœï¼š" + data;
        
        // è¿”å›å¼‚æ­¥ç»“æœ
        return CompletableFuture.completedFuture(result);
    }
}
```

### 2.4 @Asyncä½¿ç”¨æ³¨æ„äº‹é¡¹


**âš ï¸ å¸¸è§é™·é˜±**ï¼š

â‘  **è‡ªè°ƒç”¨é—®é¢˜**ï¼ˆæœ€å¸¸è§çš„å‘ï¼‰
```java
@Service
public class UserService {
    
    public void registerUser(User user) {
        saveUser(user);
        sendEmail(user);  // âŒ è¿™æ ·è°ƒç”¨ä¸ä¼šå¼‚æ­¥ï¼
    }
    
    @Async
    public void sendEmail(User user) {
        // ä¸ä¼šå¼‚æ­¥æ‰§è¡Œï¼Œå› ä¸ºæ˜¯å†…éƒ¨è°ƒç”¨
    }
}

// âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡Springå®¹å™¨è°ƒç”¨
@Service
public class UserService {
    @Autowired
    private UserService self;  // æ³¨å…¥è‡ªå·±
    
    public void registerUser(User user) {
        saveUser(user);
        self.sendEmail(user);  // âœ… é€šè¿‡ä»£ç†è°ƒç”¨ï¼Œä¼šå¼‚æ­¥
    }
}
```

â‘¡ **è¿”å›å€¼é™åˆ¶**
```java
// âŒ é”™è¯¯ï¼š@Asyncæ–¹æ³•ä¸èƒ½æœ‰æ™®é€šè¿”å›å€¼
@Async
public String doSomething() {
    return "ç»“æœ";  // ä¼šè¢«å¿½ç•¥ï¼
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨Futureæˆ–CompletableFuture
@Async
public CompletableFuture<String> doSomething() {
    return CompletableFuture.completedFuture("ç»“æœ");
}
```

---

## 3. ğŸ”§ çº¿ç¨‹æ± é…ç½®è¯¦è§£


### 3.1 ä¸ºä»€ä¹ˆè¦é…ç½®çº¿ç¨‹æ± 


**ä¸é…ç½®çš„åæœ**ï¼š
```
Springé»˜è®¤è¡Œä¸ºï¼š
- ä½¿ç”¨SimpleAsyncTaskExecutor
- æ¯æ¬¡æ‰§è¡Œéƒ½åˆ›å»ºæ–°çº¿ç¨‹
- æ²¡æœ‰çº¿ç¨‹å¤ç”¨
- æ²¡æœ‰é˜Ÿåˆ—ç¼“å†²
- é«˜å¹¶å‘ä¸‹ä¼šåˆ›å»ºå¤§é‡çº¿ç¨‹ â†’ ç³»ç»Ÿå´©æºƒï¼

é…ç½®çº¿ç¨‹æ± çš„å¥½å¤„ï¼š
âœ… çº¿ç¨‹å¤ç”¨ï¼ŒèŠ‚çœèµ„æº
âœ… æ§åˆ¶å¹¶å‘æ•°é‡
âœ… é˜Ÿåˆ—ç¼“å†²è¯·æ±‚
âœ… æ‹’ç»ç­–ç•¥ä¿æŠ¤ç³»ç»Ÿ
```

### 3.2 çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°


**çº¿ç¨‹æ± çš„5ä¸ªå…³é”®å‚æ•°**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çº¿ç¨‹æ± å·¥ä½œæµç¨‹              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â‘ æ–°ä»»åŠ¡æ¥äº† â†’ æ ¸å¿ƒçº¿ç¨‹ç©ºé—²ï¼Ÿ       â”‚
â”‚        â†“ æ˜¯                         â”‚
â”‚    ç«‹å³æ‰§è¡Œ                          â”‚
â”‚        â†“ å¦                         â”‚
â”‚  â‘¡æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ â†’ é˜Ÿåˆ—æ»¡äº†å—ï¼Ÿ     â”‚
â”‚        â†“ å¦                         â”‚
â”‚    æ”¾å…¥é˜Ÿåˆ—                          â”‚
â”‚        â†“ æ˜¯                         â”‚
â”‚  â‘¢é˜Ÿåˆ—æ»¡äº† â†’ è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°å—ï¼Ÿ     â”‚
â”‚        â†“ å¦                         â”‚
â”‚    åˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡Œ                    â”‚
â”‚        â†“ æ˜¯                         â”‚
â”‚  â‘£è§¦å‘æ‹’ç»ç­–ç•¥                      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å‚æ•°è¯¦è§£**ï¼š

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ | ä½œç”¨ç†è§£ |
|-----|------|-------|---------|
| **æ ¸å¿ƒçº¿ç¨‹æ•°** | å¸¸é©»çº¿ç¨‹æ•°é‡ | CPUæ ¸å¿ƒæ•°Ã—2 | å°±åƒå…¬å¸çš„æ­£å¼å‘˜å·¥ |
| **æœ€å¤§çº¿ç¨‹æ•°** | çº¿ç¨‹æ± æœ€å¤§å®¹é‡ | CPUæ ¸å¿ƒæ•°Ã—4 | æ­£å¼å‘˜å·¥+ä¸´æ—¶å·¥æ€»æ•° |
| **é˜Ÿåˆ—å®¹é‡** | ç­‰å¾…é˜Ÿåˆ—å¤§å° | 200-500 | å°±åƒå®¢æˆ·ç­‰å¾…åŒº |
| **ç©ºé—²æ—¶é—´** | ä¸´æ—¶çº¿ç¨‹å­˜æ´»æ—¶é—´ | 60ç§’ | ä¸´æ—¶å·¥æ²¡æ´»å°±è§£é›‡ |
| **æ‹’ç»ç­–ç•¥** | é˜Ÿåˆ—æ»¡äº†æ€ä¹ˆåŠ | CallerRunsPolicy | è€æ¿äº²è‡ªå¹²æ´» |

### 3.3 å®æˆ˜é…ç½®ç¤ºä¾‹


**é…ç½®ä¸€ï¼šé€šç”¨ä¸šåŠ¡çº¿ç¨‹æ± **
```java
@Configuration
@EnableAsync
public class AsyncConfig implements AsyncConfigurer {
    
    @Bean(name = "taskExecutor")
    public Executor taskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        
        // æ ¸å¿ƒçº¿ç¨‹æ•°ï¼šæ ¹æ®CPUæ ¸å¿ƒæ•°è®¾ç½®
        executor.setCorePoolSize(8);
        
        // æœ€å¤§çº¿ç¨‹æ•°ï¼šæ ¸å¿ƒçº¿ç¨‹çš„2å€
        executor.setMaxPoolSize(16);
        
        // é˜Ÿåˆ—å®¹é‡ï¼šç¼“å†²ç­‰å¾…çš„ä»»åŠ¡
        executor.setQueueCapacity(200);
        
        // çº¿ç¨‹åå‰ç¼€ï¼šæ–¹ä¾¿æ—¥å¿—è¿½è¸ª
        executor.setThreadNamePrefix("Async-");
        
        // ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
        executor.setKeepAliveSeconds(60);
        
        // æ‹’ç»ç­–ç•¥ï¼šè®©è°ƒç”¨çº¿ç¨‹æ‰§è¡Œï¼ˆé™çº§æ–¹æ¡ˆï¼‰
        executor.setRejectedExecutionHandler(
            new ThreadPoolExecutor.CallerRunsPolicy()
        );
        
        executor.initialize();
        return executor;
    }
}
```

**é…ç½®äºŒï¼šå¤šçº¿ç¨‹æ± ç­–ç•¥**
```java
@Configuration
public class MultiThreadPoolConfig {
    
    // å¿«é€Ÿä»»åŠ¡çº¿ç¨‹æ± ï¼ˆIOå¯†é›†å‹ï¼‰
    @Bean("fastExecutor")
    public Executor fastExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(20);      // IOå¯†é›†ï¼Œçº¿ç¨‹å¤šä¸€äº›
        executor.setMaxPoolSize(40);
        executor.setQueueCapacity(100);
        executor.setThreadNamePrefix("Fast-");
        executor.initialize();
        return executor;
    }
    
    // æ…¢é€Ÿä»»åŠ¡çº¿ç¨‹æ± ï¼ˆCPUå¯†é›†å‹ï¼‰
    @Bean("slowExecutor")
    public Executor slowExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(4);       // CPUå¯†é›†ï¼Œçº¿ç¨‹å°‘ä¸€äº›
        executor.setMaxPoolSize(8);
        executor.setQueueCapacity(50);
        executor.setThreadNamePrefix("Slow-");
        executor.initialize();
        return executor;
    }
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š
```java
@Component
public class TaskProcessor {
    
    // å‘é€é‚®ä»¶ï¼šIOå¯†é›†ï¼Œç”¨å¿«é€Ÿæ± 
    @Async("fastExecutor")
    public void sendEmail(String email) {
        // å¤§é‡æ—¶é—´åœ¨ç­‰å¾…é‚®ä»¶æœåŠ¡å™¨å“åº”
    }
    
    // æ•°æ®è®¡ç®—ï¼šCPUå¯†é›†ï¼Œç”¨æ…¢é€Ÿæ± 
    @Async("slowExecutor")
    public void calculateData(List<Data> dataList) {
        // å¤§é‡CPUè®¡ç®—
    }
}
```

---

## 4. âš™ï¸ å¼‚æ­¥æ‰§è¡Œå™¨å®šåˆ¶


### 4.1 è‡ªå®šä¹‰æ‰§è¡Œå™¨æ¥å£


**å®ç°AsyncConfigureræ¥å£**ï¼š
```java
@Configuration
@EnableAsync
public class CustomAsyncConfig implements AsyncConfigurer {
    
    @Override
    public Executor getAsyncExecutor() {
        // è¿”å›é»˜è®¤çš„å¼‚æ­¥æ‰§è¡Œå™¨
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(10);
        executor.setMaxPoolSize(20);
        executor.setQueueCapacity(100);
        executor.setThreadNamePrefix("Custom-Async-");
        executor.initialize();
        return executor;
    }
    
    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        // è¿”å›å¼‚å¸¸å¤„ç†å™¨ï¼ˆä¸‹èŠ‚è¯¦ç»†è®²ï¼‰
        return new CustomAsyncExceptionHandler();
    }
}
```

> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼š`AsyncConfigurer` æ¥å£è®©ä½ å…¨é¢æ§åˆ¶å¼‚æ­¥è¡Œä¸º

### 4.2 çº¿ç¨‹æ± ç›‘æ§ä¸è°ƒä¼˜


**æ·»åŠ ç›‘æ§åŠŸèƒ½**ï¼š
```java
@Bean("monitoredExecutor")
public ThreadPoolTaskExecutor monitoredExecutor() {
    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
    
    // åŸºç¡€é…ç½®
    executor.setCorePoolSize(8);
    executor.setMaxPoolSize(16);
    executor.setQueueCapacity(200);
    
    // ä»»åŠ¡è£…é¥°å™¨ï¼šæ·»åŠ ç›‘æ§é€»è¾‘
    executor.setTaskDecorator(runnable -> {
        return () -> {
            long startTime = System.currentTimeMillis();
            try {
                runnable.run();
            } finally {
                long endTime = System.currentTimeMillis();
                System.out.println("ä»»åŠ¡æ‰§è¡Œè€—æ—¶ï¼š" + (endTime - startTime) + "ms");
            }
        };
    });
    
    executor.initialize();
    return executor;
}
```

**ç›‘æ§çº¿ç¨‹æ± çŠ¶æ€**ï¼š
```java
@Component
public class ThreadPoolMonitor {
    
    @Autowired
    @Qualifier("taskExecutor")
    private ThreadPoolTaskExecutor executor;
    
    // å®šæ—¶ç›‘æ§ï¼ˆæ¯30ç§’ï¼‰
    @Scheduled(fixedRate = 30000)
    public void monitorThreadPool() {
        ThreadPoolExecutor pool = executor.getThreadPoolExecutor();
        
        System.out.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
        System.out.println("ğŸ“Š çº¿ç¨‹æ± çŠ¶æ€ç›‘æ§");
        System.out.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
        System.out.println("æ ¸å¿ƒçº¿ç¨‹æ•°ï¼š" + pool.getCorePoolSize());
        System.out.println("å½“å‰çº¿ç¨‹æ•°ï¼š" + pool.getPoolSize());
        System.out.println("æ´»è·ƒçº¿ç¨‹æ•°ï¼š" + pool.getActiveCount());
        System.out.println("é˜Ÿåˆ—ä»»åŠ¡æ•°ï¼š" + pool.getQueue().size());
        System.out.println("å·²å®Œæˆæ•°ï¼š  " + pool.getCompletedTaskCount());
        System.out.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
    }
}
```

### 4.3 åŠ¨æ€çº¿ç¨‹æ± è°ƒæ•´


**è¿è¡Œæ—¶è°ƒæ•´å‚æ•°**ï¼š
```java
@RestController
@RequestMapping("/thread-pool")
public class ThreadPoolController {
    
    @Autowired
    @Qualifier("taskExecutor")
    private ThreadPoolTaskExecutor executor;
    
    // åŠ¨æ€è°ƒæ•´æ ¸å¿ƒçº¿ç¨‹æ•°
    @PostMapping("/core-size")
    public String adjustCoreSize(@RequestParam int size) {
        executor.setCorePoolSize(size);
        return "æ ¸å¿ƒçº¿ç¨‹æ•°å·²è°ƒæ•´ä¸ºï¼š" + size;
    }
    
    // åŠ¨æ€è°ƒæ•´æœ€å¤§çº¿ç¨‹æ•°
    @PostMapping("/max-size")
    public String adjustMaxSize(@RequestParam int size) {
        executor.setMaxPoolSize(size);
        return "æœ€å¤§çº¿ç¨‹æ•°å·²è°ƒæ•´ä¸ºï¼š" + size;
    }
}
```

---

## 5. âš ï¸ å¼‚æ­¥é”™è¯¯å¤„ç†


### 5.1 å¼‚æ­¥å¼‚å¸¸çš„ç‰¹æ®Šæ€§


**åŒæ­¥vså¼‚æ­¥å¼‚å¸¸å¯¹æ¯”**ï¼š
```
åŒæ­¥æ–¹æ³•çš„å¼‚å¸¸ï¼š
try {
    method();  // å¼‚å¸¸ä¼šè¢«catchæ•è·
} catch (Exception e) {
    // å¯ä»¥å¤„ç†å¼‚å¸¸
}

å¼‚æ­¥æ–¹æ³•çš„å¼‚å¸¸ï¼š
@Async
public void method() {
    throw new Exception();  // ğŸ’¥ å¼‚å¸¸åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ï¼
}

é—®é¢˜ï¼šä¸»çº¿ç¨‹çš„try-catchæ•è·ä¸åˆ°ï¼
```

### 5.2 å…¨å±€å¼‚å¸¸å¤„ç†å™¨


**æ–¹å¼ä¸€ï¼šå®ç°AsyncUncaughtExceptionHandler**
```java
public class CustomAsyncExceptionHandler 
    implements AsyncUncaughtExceptionHandler {
    
    @Override
    public void handleUncaughtException(
            Throwable ex, Method method, Object... params) {
        
        // è®°å½•è¯¦ç»†çš„å¼‚å¸¸ä¿¡æ¯
        System.err.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
        System.err.println("âŒ å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå¤±è´¥");
        System.err.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
        System.err.println("å¼‚å¸¸æ–¹æ³•ï¼š" + method.getName());
        System.err.println("å¼‚å¸¸ç±»å‹ï¼š" + ex.getClass().getName());
        System.err.println("å¼‚å¸¸ä¿¡æ¯ï¼š" + ex.getMessage());
        System.err.println("æ–¹æ³•å‚æ•°ï¼š" + Arrays.toString(params));
        System.err.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
        
        // å¯ä»¥åœ¨è¿™é‡Œï¼š
        // 1. è®°å½•æ—¥å¿—åˆ°æ•°æ®åº“
        // 2. å‘é€å‘Šè­¦é€šçŸ¥
        // 3. é‡è¯•å¤±è´¥çš„ä»»åŠ¡
    }
}
```

**æ–¹å¼äºŒï¼šé…ç½®åˆ°Springå®¹å™¨**
```java
@Configuration
@EnableAsync
public class AsyncConfig implements AsyncConfigurer {
    
    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return new CustomAsyncExceptionHandler();
    }
}
```

### 5.3 æ–¹æ³•çº§å¼‚å¸¸å¤„ç†


**ä½¿ç”¨CompletableFutureå¤„ç†å¼‚å¸¸**ï¼š
```java
@Component
public class DataService {
    
    @Async
    public CompletableFuture<String> processWithErrorHandling(String data) {
        return CompletableFuture.supplyAsync(() -> {
            try {
                // æ¨¡æ‹Ÿå¯èƒ½å‡ºé”™çš„å¤„ç†
                if (data == null) {
                    throw new IllegalArgumentException("æ•°æ®ä¸èƒ½ä¸ºç©º");
                }
                return "å¤„ç†ç»“æœï¼š" + data;
                
            } catch (Exception e) {
                // æ–¹æ³•å†…éƒ¨å¤„ç†å¼‚å¸¸
                System.err.println("å¤„ç†å¤±è´¥ï¼š" + e.getMessage());
                return "é»˜è®¤å€¼";  // è¿”å›é™çº§ç»“æœ
            }
        });
    }
    
    // ä½¿ç”¨æ–¹å¼
    public void useExample() {
        processWithErrorHandling("test")
            .thenAccept(result -> {
                System.out.println("æˆåŠŸï¼š" + result);
            })
            .exceptionally(ex -> {
                System.err.println("å¤±è´¥ï¼š" + ex.getMessage());
                return null;
            });
    }
}
```

---

## 6. ğŸ”„ ç»“æœå›è°ƒæœºåˆ¶


### 6.1 CompletableFutureåŸºç¡€å›è°ƒ


**å¸¸ç”¨å›è°ƒæ–¹æ³•**ï¼š
```java
@Component
public class AsyncResultHandler {
    
    @Async
    public CompletableFuture<String> asyncTask() {
        // æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡
        Thread.sleep(2000);
        return CompletableFuture.completedFuture("ä»»åŠ¡å®Œæˆ");
    }
    
    public void demonstrateCallbacks() {
        CompletableFuture<String> future = asyncTask();
        
        // â‘  æˆåŠŸå›è°ƒ
        future.thenAccept(result -> {
            System.out.println("âœ… ä»»åŠ¡æˆåŠŸï¼š" + result);
        });
        
        // â‘¡ å¼‚å¸¸å›è°ƒ
        future.exceptionally(ex -> {
            System.err.println("âŒ ä»»åŠ¡å¤±è´¥ï¼š" + ex.getMessage());
            return "é»˜è®¤å€¼";
        });
        
        // â‘¢ æ— è®ºæˆåŠŸå¤±è´¥éƒ½æ‰§è¡Œ
        future.whenComplete((result, ex) -> {
            if (ex == null) {
                System.out.println("å®Œæˆï¼š" + result);
            } else {
                System.err.println("å¤±è´¥ï¼š" + ex.getMessage());
            }
        });
    }
}
```

### 6.2 é“¾å¼å›è°ƒå¤„ç†


**å¤šæ­¥éª¤å¼‚æ­¥å¤„ç†**ï¼š
```java
@Component
public class OrderProcessor {
    
    @Async
    public CompletableFuture<Order> createOrder(OrderDTO dto) {
        Order order = new Order(dto);
        return CompletableFuture.completedFuture(order);
    }
    
    @Async
    public CompletableFuture<Boolean> deductStock(Order order) {
        // æ‰£å‡åº“å­˜
        boolean success = stockService.deduct(order.getProductId());
        return CompletableFuture.completedFuture(success);
    }
    
    @Async
    public CompletableFuture<Void> sendNotification(Order order) {
        notificationService.send(order);
        return CompletableFuture.completedFuture(null);
    }
    
    // é“¾å¼è°ƒç”¨
    public void processOrder(OrderDTO dto) {
        createOrder(dto)
            .thenCompose(order -> deductStock(order)
                .thenApply(success -> {
                    order.setStockDeducted(success);
                    return order;
                }))
            .thenCompose(order -> sendNotification(order)
                .thenApply(v -> order))
            .thenAccept(order -> {
                System.out.println("âœ… è®¢å•å¤„ç†å®Œæˆï¼š" + order.getId());
            })
            .exceptionally(ex -> {
                System.err.println("âŒ è®¢å•å¤„ç†å¤±è´¥ï¼š" + ex.getMessage());
                return null;
            });
    }
}
```

### 6.3 ç»„åˆå¤šä¸ªå¼‚æ­¥ä»»åŠ¡


**å¹¶è¡Œæ‰§è¡Œå¤šä¸ªä»»åŠ¡**ï¼š
```java
@Component
public class ParallelTaskProcessor {
    
    public void processInParallel(User user) {
        // ä¸‰ä¸ªç‹¬ç«‹çš„å¼‚æ­¥ä»»åŠ¡
        CompletableFuture<Void> emailFuture = 
            CompletableFuture.runAsync(() -> sendEmail(user));
            
        CompletableFuture<Void> smsFuture = 
            CompletableFuture.runAsync(() -> sendSMS(user));
            
        CompletableFuture<Void> pushFuture = 
            CompletableFuture.runAsync(() -> sendPush(user));
        
        // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
        CompletableFuture<Void> allTasks = CompletableFuture.allOf(
            emailFuture, smsFuture, pushFuture
        );
        
        allTasks.thenRun(() -> {
            System.out.println("âœ… æ‰€æœ‰é€šçŸ¥å·²å‘é€");
        });
    }
    
    // ä»»æ„ä¸€ä¸ªå®Œæˆå°±è¿”å›
    public void processAnyOf(String data) {
        CompletableFuture<String> api1 = callApi1(data);
        CompletableFuture<String> api2 = callApi2(data);
        
        // è°å¿«ç”¨è°çš„ç»“æœ
        CompletableFuture<Object> fastest = CompletableFuture.anyOf(api1, api2);
        
        fastest.thenAccept(result -> {
            System.out.println("æœ€å¿«è¿”å›çš„ç»“æœï¼š" + result);
        });
    }
}
```

---

## 7. ğŸ›¡ï¸ èƒŒå‹æ§åˆ¶ç­–ç•¥


### 7.1 ä»€ä¹ˆæ˜¯èƒŒå‹é—®é¢˜


**é€šä¿—ç†è§£**ï¼š
```
æƒ³è±¡ä¸€ä¸ªæ°´ç®¡ç³»ç»Ÿï¼š
                ç”Ÿäº§é€Ÿåº¦
                   â†“
    æ°´é¾™å¤´ â”â”â”â”â”â”â†’ æ°´ç®¡ â”â”â”â”â”â”â†’ æ°´æ¡¶
              â†‘            â†‘
          å¤„ç†é€Ÿåº¦      å®¹é‡é™åˆ¶

èƒŒå‹é—®é¢˜ï¼š
- æ°´é¾™å¤´å¼€å¤ªå¤§ï¼ˆç”Ÿäº§é€Ÿåº¦å¿«ï¼‰
- æ°´ç®¡å¤ªç»†ï¼ˆå¤„ç†é€Ÿåº¦æ…¢ï¼‰  
- æ°´æ¡¶å¤ªå°ï¼ˆé˜Ÿåˆ—å®¹é‡å°ï¼‰
â†’ ç»“æœï¼šæ°´æº¢å‡ºï¼ï¼ˆç³»ç»Ÿå´©æºƒï¼‰
```

**åœ¨å¼‚æ­¥äº‹ä»¶ä¸­**ï¼š
```
äº‹ä»¶å‘å¸ƒè€… â†’ é˜Ÿåˆ— â†’ å¼‚æ­¥å¤„ç†å™¨
   (å¿«)      (æ»¡)      (æ…¢)

é—®é¢˜è¡¨ç°ï¼š
âŒ é˜Ÿåˆ—ç§¯å‹ï¼Œå†…å­˜æº¢å‡º
âŒ çº¿ç¨‹æ± è€—å°½ï¼Œä»»åŠ¡è¢«æ‹’ç»
âŒ ç³»ç»Ÿå“åº”å˜æ…¢
```

### 7.2 èƒŒå‹æ§åˆ¶æ–¹æ¡ˆ


**æ–¹æ¡ˆä¸€ï¼šé™æµæ§åˆ¶**
```java
@Component
public class RateLimitedEventPublisher {
    
    // ä½¿ç”¨Guavaçš„é™æµå™¨ï¼Œæ¯ç§’æœ€å¤š100ä¸ªäº‹ä»¶
    private final RateLimiter rateLimiter = RateLimiter.create(100.0);
    
    @Autowired
    private ApplicationEventPublisher eventPublisher;
    
    public void publishEvent(UserEvent event) {
        // è·å–ä»¤ç‰Œï¼Œå¦‚æœè¶…è¿‡é€Ÿç‡ä¼šç­‰å¾…
        if (rateLimiter.tryAcquire(1, TimeUnit.SECONDS)) {
            eventPublisher.publishEvent(event);
        } else {
            // è¶…è¿‡é™æµï¼Œå¯ä»¥é€‰æ‹©ï¼š
            // 1. ä¸¢å¼ƒäº‹ä»¶
            // 2. è®°å½•æ—¥å¿—
            // 3. é™çº§å¤„ç†
            System.err.println("âš ï¸ äº‹ä»¶å‘å¸ƒè¿‡å¿«ï¼Œå·²é™æµ");
        }
    }
}
```

**æ–¹æ¡ˆäºŒï¼šåŠ¨æ€æ‹’ç»ç­–ç•¥**
```java
@Configuration
public class BackPressureConfig {
    
    @Bean("backPressureExecutor")
    public ThreadPoolTaskExecutor backPressureExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(10);
        executor.setMaxPoolSize(20);
        executor.setQueueCapacity(100);
        
        // è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥
        executor.setRejectedExecutionHandler((runnable, pool) -> {
            // è®°å½•è¢«æ‹’ç»çš„ä»»åŠ¡
            System.err.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
            System.err.println("âš ï¸ ä»»åŠ¡è¢«æ‹’ç»ï¼ˆé˜Ÿåˆ—å·²æ»¡ï¼‰");
            System.err.println("å½“å‰çº¿ç¨‹æ•°ï¼š" + pool.getActiveCount());
            System.err.println("é˜Ÿåˆ—å¤§å°ï¼š" + pool.getQueue().size());
            System.err.println("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”");
            
            // é™çº§æ–¹æ¡ˆï¼š
            // 1. è®°å½•åˆ°æ•°æ®åº“ï¼Œç¨åé‡è¯•
            // 2. å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—
            // 3. è¿”å›å¤±è´¥å“åº”ç»™ç”¨æˆ·
        });
        
        executor.initialize();
        return executor;
    }
}
```

**æ–¹æ¡ˆä¸‰ï¼šåŠ¨æ€æ‰©å®¹**
```java
@Component
public class DynamicThreadPoolManager {
    
    @Autowired
    @Qualifier("taskExecutor")
    private ThreadPoolTaskExecutor executor;
    
    // ç›‘æ§é˜Ÿåˆ—ï¼ŒåŠ¨æ€è°ƒæ•´
    @Scheduled(fixedRate = 5000)
    public void adjustThreadPool() {
        ThreadPoolExecutor pool = executor.getThreadPoolExecutor();
        int queueSize = pool.getQueue().size();
        int activeCount = pool.getActiveCount();
        
        // é˜Ÿåˆ—ç§¯å‹è¶…è¿‡80%ï¼Œå¢åŠ çº¿ç¨‹
        if (queueSize > 80) {
            int newMaxSize = Math.min(pool.getMaximumPoolSize() + 5, 50);
            pool.setMaximumPoolSize(newMaxSize);
            System.out.println("ğŸ“ˆ çº¿ç¨‹æ± æ‰©å®¹è‡³ï¼š" + newMaxSize);
        }
        
        // é˜Ÿåˆ—ç©ºé—²ä¸”çº¿ç¨‹å¤šï¼Œå‡å°‘çº¿ç¨‹
        if (queueSize < 20 && activeCount < pool.getCorePoolSize()) {
            int newMaxSize = Math.max(pool.getMaximumPoolSize() - 5, 
                                     pool.getCorePoolSize());
            pool.setMaximumPoolSize(newMaxSize);
            System.out.println("ğŸ“‰ çº¿ç¨‹æ± ç¼©å®¹è‡³ï¼š" + newMaxSize);
        }
    }
}
```

### 7.3 å®Œæ•´èƒŒå‹æ§åˆ¶ç¤ºä¾‹


**ç»¼åˆåº”ç”¨**ï¼š
```java
@Component
public class RobustAsyncEventHandler {
    
    private final RateLimiter publishLimiter = RateLimiter.create(50.0);
    
    @Autowired
    private ApplicationEventPublisher eventPublisher;
    
    // å‘å¸ƒç«¯ï¼šé™æµ
    public boolean publishEventSafely(BaseEvent event) {
        if (!publishLimiter.tryAcquire(500, TimeUnit.MILLISECONDS)) {
            System.err.println("âš ï¸ å‘å¸ƒé™æµ");
            return false;
        }
        
        try {
            eventPublisher.publishEvent(event);
            return true;
        } catch (Exception e) {
            System.err.println("âŒ å‘å¸ƒå¤±è´¥ï¼š" + e.getMessage());
            return false;
        }
    }
    
    // æ¶ˆè´¹ç«¯ï¼šå¸¦é‡è¯•çš„å¼‚æ­¥å¤„ç†
    @Async("backPressureExecutor")
    @EventListener
    @Retryable(maxAttempts = 3, backoff = @Backoff(delay = 1000))
    public void handleEvent(BaseEvent event) {
        try {
            // å®é™…ä¸šåŠ¡å¤„ç†
            processEvent(event);
        } catch (Exception e) {
            System.err.println("å¤„ç†å¤±è´¥ï¼Œå°†é‡è¯•ï¼š" + e.getMessage());
            throw e;  // è§¦å‘é‡è¯•
        }
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¼‚æ­¥äº‹ä»¶ï¼šåœ¨ç‹¬ç«‹çº¿ç¨‹æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»æµç¨‹
ğŸ”¸ @Asyncæ³¨è§£ï¼šæ ‡è®°æ–¹æ³•å¼‚æ­¥æ‰§è¡Œ
ğŸ”¸ çº¿ç¨‹æ± é…ç½®ï¼šæ§åˆ¶å¹¶å‘ã€é˜Ÿåˆ—ã€æ‹’ç»ç­–ç•¥
ğŸ”¸ å¼‚å¸¸å¤„ç†ï¼šå…¨å±€å¤„ç†å™¨å’Œæ–¹æ³•çº§å¤„ç†
ğŸ”¸ ç»“æœå›è°ƒï¼šCompletableFutureé“¾å¼è°ƒç”¨
ğŸ”¸ èƒŒå‹æ§åˆ¶ï¼šé™æµã€æ‹’ç»ã€åŠ¨æ€æ‰©å®¹
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä½•æ—¶ä½¿ç”¨å¼‚æ­¥äº‹ä»¶**
```
âœ… é€‚åˆå¼‚æ­¥ï¼š
- è€—æ—¶æ“ä½œï¼ˆå‘é‚®ä»¶ã€è°ƒç”¨ç¬¬ä¸‰æ–¹APIï¼‰
- å¯ä»¥å»¶è¿Ÿçš„æ“ä½œï¼ˆæ—¥å¿—è®°å½•ã€æ•°æ®ç»Ÿè®¡ï¼‰
- ä¸å½±å“ä¸»æµç¨‹çš„æ“ä½œï¼ˆå‘é€é€šçŸ¥ï¼‰

âŒ ä¸é€‚åˆå¼‚æ­¥ï¼š
- éœ€è¦ç«‹å³è¿”å›ç»“æœçš„æ“ä½œ
- å¿…é¡»é¡ºåºæ‰§è¡Œçš„æ“ä½œ
- æ¶‰åŠäº‹åŠ¡çš„å…³é”®æ“ä½œ
```

**ğŸ”¹ çº¿ç¨‹æ± å‚æ•°è®¾ç½®åŸåˆ™**
```
CPUå¯†é›†å‹ä»»åŠ¡ï¼š
æ ¸å¿ƒçº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° + 1
æœ€å¤§çº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° Ã— 2

IOå¯†é›†å‹ä»»åŠ¡ï¼š
æ ¸å¿ƒçº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° Ã— 2
æœ€å¤§çº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° Ã— 4

é˜Ÿåˆ—å®¹é‡ï¼š
- å¿«é€Ÿä»»åŠ¡ï¼š100-200
- æ…¢é€Ÿä»»åŠ¡ï¼š50-100
- æ ¹æ®å†…å­˜å’Œä¸šåŠ¡è°ƒæ•´
```

**ğŸ”¹ é¿å…å¸¸è§é™·é˜±**
```
â‘  è‡ªè°ƒç”¨å¤±æ•ˆï¼šé€šè¿‡Springä»£ç†è°ƒç”¨
â‘¡ è¿”å›å€¼ä¸¢å¤±ï¼šä½¿ç”¨CompletableFuture
â‘¢ å¼‚å¸¸ä¸¢å¤±ï¼šé…ç½®å¼‚å¸¸å¤„ç†å™¨
â‘£ çº¿ç¨‹æ³„æ¼ï¼šåˆç†è®¾ç½®è¶…æ—¶å’Œç›‘æ§
â‘¤ é˜Ÿåˆ—å †ç§¯ï¼šå®æ–½èƒŒå‹æ§åˆ¶
```

### 8.3 å®æˆ˜æœ€ä½³å®è·µ


**æ¨èé…ç½®æ¨¡æ¿**ï¼š
```java
@Configuration
@EnableAsync
public class ProductionAsyncConfig implements AsyncConfigurer {
    
    @Bean("asyncExecutor")
    public ThreadPoolTaskExecutor asyncExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        
        // æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´
        executor.setCorePoolSize(10);
        executor.setMaxPoolSize(20);
        executor.setQueueCapacity(200);
        executor.setKeepAliveSeconds(60);
        executor.setThreadNamePrefix("Async-");
        
        // æ¨èä½¿ç”¨CallerRunsPolicy
        executor.setRejectedExecutionHandler(
            new ThreadPoolExecutor.CallerRunsPolicy()
        );
        
        // ä¼˜é›…å…³é—­
        executor.setWaitForTasksToCompleteOnShutdown(true);
        executor.setAwaitTerminationSeconds(60);
        
        executor.initialize();
        return executor;
    }
    
    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return (ex, method, params) -> {
            // è®°å½•è¯¦ç»†æ—¥å¿—
            log.error("å¼‚æ­¥ä»»åŠ¡å¼‚å¸¸ - æ–¹æ³•:{}, å‚æ•°:{}", 
                     method.getName(), Arrays.toString(params), ex);
        };
    }
}
```

**ç›‘æ§å’Œå‘Šè­¦**ï¼š
```java
// å®šæœŸæ£€æŸ¥çº¿ç¨‹æ± å¥åº·çŠ¶æ€
@Scheduled(fixedRate = 60000)
public void checkThreadPoolHealth() {
    ThreadPoolExecutor pool = executor.getThreadPoolExecutor();
    
    double queueUsage = (double) pool.getQueue().size() / 
                        pool.getQueue().remainingCapacity();
    
    if (queueUsage > 0.8) {
        // é˜Ÿåˆ—ä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œå‘é€å‘Šè­¦
        alertService.send("çº¿ç¨‹æ± é˜Ÿåˆ—å‘Šè­¦", 
                         "é˜Ÿåˆ—ä½¿ç”¨ç‡ï¼š" + (queueUsage * 100) + "%");
    }
}
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
å¼‚æ­¥äº‹ä»¶æé€Ÿåº¦ï¼Œ@Asyncæ³¨è§£è¦è®°ä½
çº¿ç¨‹æ± é…è¦åˆç†ï¼Œæ ¸å¿ƒæœ€å¤§é˜Ÿåˆ—é½
è‡ªè°ƒç”¨é—®é¢˜è¦é¿å…ï¼Œä»£ç†è°ƒç”¨æ‰æœ‰æ•ˆ
å¼‚å¸¸å¤„ç†å…¨å±€é…ï¼ŒCompletableFutureå›è°ƒåœ¨
èƒŒå‹æ§åˆ¶é˜²å †ç§¯ï¼Œé™æµæ‹’ç»åŠ ç›‘æ§
ç”Ÿäº§ç¯å¢ƒè¦è°¨æ…ï¼Œç›‘æ§å‘Šè­¦ä¸èƒ½å°‘
```