---
title: 3ã€å†…ç½®äº‹ä»¶ç±»å‹
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Springå†…ç½®äº‹ä»¶](#1-ä»€ä¹ˆæ˜¯springå†…ç½®äº‹ä»¶)
2. [ç”Ÿå‘½å‘¨æœŸäº‹ä»¶è¯¦è§£](#2-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶è¯¦è§£)
3. [Webè¯·æ±‚äº‹ä»¶](#3-webè¯·æ±‚äº‹ä»¶)
4. [äº‹ä»¶ç›‘å¬å®æˆ˜](#4-äº‹ä»¶ç›‘å¬å®æˆ˜)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯Springå†…ç½®äº‹ä»¶


### 1.1 ç†è§£äº‹ä»¶çš„æœ¬è´¨


**ç”Ÿæ´»ä¸­çš„ç±»æ¯”**ï¼š
```
å°±åƒä½ è®¢é˜…äº†å¿«é€’é€šçŸ¥ï¼š
- å¿«é€’å‘è´§æ—¶ â†’ æ”¶åˆ°"å·²å‘è´§"çŸ­ä¿¡
- å¿«é€’åˆ°è¾¾æ—¶ â†’ æ”¶åˆ°"æ´¾é€ä¸­"çŸ­ä¿¡  
- ç­¾æ”¶å®Œæˆæ—¶ â†’ æ”¶åˆ°"å·²ç­¾æ”¶"çŸ­ä¿¡

Springå†…ç½®äº‹ä»¶ä¹Ÿæ˜¯è¿™æ ·ï¼š
- å®¹å™¨å¯åŠ¨æ—¶ â†’ è§¦å‘"å¯åŠ¨å®Œæˆ"äº‹ä»¶
- å®¹å™¨åœæ­¢æ—¶ â†’ è§¦å‘"åœæ­¢"äº‹ä»¶
- Webè¯·æ±‚å®Œæˆæ—¶ â†’ è§¦å‘"è¯·æ±‚å¤„ç†å®Œæˆ"äº‹ä»¶
```

**é€šä¿—è§£é‡Š**ï¼š
> Springå®¹å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨å…³é”®æ—¶åˆ»**è‡ªåŠ¨å‘å¸ƒ**ä¸€äº›äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å°±åƒ"ç³»ç»Ÿå¹¿æ’­"ï¼Œå‘Šè¯‰æ‰€æœ‰å…³å¿ƒçš„ç»„ä»¶ï¼š"å˜¿ï¼Œæˆ‘è¿™é‡Œå‘ç”Ÿäº†æŸä»¶äº‹æƒ…ï¼"

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å†…ç½®äº‹ä»¶


**å®é™…åº”ç”¨åœºæ™¯**ï¼š

| åœºæ™¯ | ä¼ ç»Ÿåšæ³•çš„é—®é¢˜ | ä½¿ç”¨äº‹ä»¶çš„ä¼˜åŠ¿ |
|------|--------------|--------------|
| **å®¹å™¨å¯åŠ¨ååˆå§‹åŒ–** | æ‰‹åŠ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œå®¹æ˜“é—æ¼ | ç›‘å¬`ContextRefreshedEvent`è‡ªåŠ¨æ‰§è¡Œ |
| **ä¼˜é›…å…³é—­èµ„æº** | åœ¨å¤šä¸ªåœ°æ–¹å†™å…³é—­ä»£ç ï¼Œå®¹æ˜“é‡å¤ | ç›‘å¬`ContextClosedEvent`ç»Ÿä¸€å¤„ç† |
| **è®°å½•è¯·æ±‚æ—¥å¿—** | åœ¨æ¯ä¸ªControlleréƒ½è¦å†™æ—¥å¿—ä»£ç  | ç›‘å¬`RequestHandledEvent`é›†ä¸­è®°å½• |
| **ç¼“å­˜é¢„çƒ­** | ä¸çŸ¥é“ä½•æ—¶å¼€å§‹é¢„çƒ­ | ç›‘å¬`ContextRefreshedEvent`è‡ªåŠ¨é¢„çƒ­ |

---

## 2. ğŸ”„ ç”Ÿå‘½å‘¨æœŸäº‹ä»¶è¯¦è§£


### 2.1 ContextRefreshedEventï¼ˆå®¹å™¨åˆ·æ–°å®Œæˆï¼‰


**ğŸ”¸ è¿™æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Ÿ**
```
æ—¶æœºï¼šå½“Springå®¹å™¨åˆå§‹åŒ–å®Œæˆæˆ–åˆ·æ–°å®Œæˆæ—¶å‘å¸ƒ
é€šä¿—ç†è§£ï¼šå°±åƒè¶…å¸‚å¼€é—¨è¥ä¸šå‰ï¼Œæ‰€æœ‰å•†å“éƒ½æ‘†å¥½äº†ï¼Œå¯ä»¥æ¥å¾…é¡¾å®¢äº†

å…¸å‹åœºæ™¯ï¼š
âœ… å®¹å™¨é¦–æ¬¡å¯åŠ¨å®Œæˆ
âœ… è°ƒç”¨refresh()æ–¹æ³•åˆ·æ–°å®¹å™¨
âœ… æ‰€æœ‰Beanéƒ½åˆ›å»ºå¹¶åˆå§‹åŒ–å®Œæ¯•
```

**ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š

```java
@Component
public class CacheWarmer implements ApplicationListener<ContextRefreshedEvent> {
    
    @Autowired
    private ProductService productService;
    
    @Override
    public void onApplicationEvent(ContextRefreshedEvent event) {
        // å®¹å™¨å¯åŠ¨å®Œæˆåï¼Œç«‹å³é¢„çƒ­ç¼“å­˜
        System.out.println("å®¹å™¨å¯åŠ¨å®Œæˆï¼Œå¼€å§‹é¢„çƒ­ç¼“å­˜...");
        productService.warmUpCache();
        System.out.println("ç¼“å­˜é¢„çƒ­å®Œæˆï¼");
    }
}
```

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
> åœ¨`parent-child`å®¹å™¨ç»“æ„ä¸­ï¼ˆæ¯”å¦‚SpringMVCï¼‰ï¼Œè¿™ä¸ªäº‹ä»¶ä¼šè§¦å‘**ä¸¤æ¬¡**ï¼š
> - ç¬¬ä¸€æ¬¡ï¼šçˆ¶å®¹å™¨ï¼ˆRootï¼‰åˆ·æ–°å®Œæˆ
> - ç¬¬äºŒæ¬¡ï¼šå­å®¹å™¨ï¼ˆServletï¼‰åˆ·æ–°å®Œæˆ

**é¿å…é‡å¤æ‰§è¡Œçš„æŠ€å·§**ï¼š
```java
@Override
public void onApplicationEvent(ContextRefreshedEvent event) {
    // åªåœ¨Rootå®¹å™¨è§¦å‘æ—¶æ‰§è¡Œ
    if (event.getApplicationContext().getParent() == null) {
        // è¿™é‡Œçš„ä»£ç åªæ‰§è¡Œä¸€æ¬¡
        initializeOnce();
    }
}
```

---

### 2.2 ContextStartedEventï¼ˆå®¹å™¨å¯åŠ¨ï¼‰


**ğŸ”¸ è¿™æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Ÿ**
```
æ—¶æœºï¼šæ˜¾å¼è°ƒç”¨ApplicationContext.start()æ–¹æ³•æ—¶å‘å¸ƒ
é€šä¿—ç†è§£ï¼šå°±åƒæŒ‰ä¸‹ç”µå™¨çš„"å¼€æœºé”®"ï¼Œè®¾å¤‡å¼€å§‹å·¥ä½œ

ç‰¹ç‚¹ï¼š
- å¿…é¡»æ‰‹åŠ¨è°ƒç”¨start()æ‰ä¼šè§¦å‘
- é€šå¸¸ç”¨äºå¯åŠ¨å®šæ—¶ä»»åŠ¡ã€æ¶ˆæ¯ç›‘å¬ç­‰
```

**ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
@Component
public class ScheduledTaskController implements ApplicationListener<ContextStartedEvent> {
    
    @Override
    public void onApplicationEvent(ContextStartedEvent event) {
        System.out.println("å®¹å™¨å¯åŠ¨ï¼Œå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡...");
        // å¯åŠ¨å®šæ—¶ä»»åŠ¡æˆ–åå°çº¿ç¨‹
    }
}
```

**ğŸ”¹ ä¸ContextRefreshedEventçš„åŒºåˆ«**ï¼š

```
ContextRefreshedEventï¼š
- å®¹å™¨åˆå§‹åŒ–å®Œæˆæ—¶è‡ªåŠ¨è§¦å‘
- ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨
- ç”¨äºåˆå§‹åŒ–æ“ä½œ

ContextStartedEventï¼š
- éœ€è¦æ‰‹åŠ¨è°ƒç”¨start()æ‰è§¦å‘  
- ä¸»åŠ¨æ§åˆ¶å¯åŠ¨æ—¶æœº
- ç”¨äºå¯åŠ¨åå°ä»»åŠ¡
```

---

### 2.3 ContextStoppedEventï¼ˆå®¹å™¨åœæ­¢ï¼‰


**ğŸ”¸ è¿™æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Ÿ**
```
æ—¶æœºï¼šè°ƒç”¨ApplicationContext.stop()æ–¹æ³•æ—¶å‘å¸ƒ
é€šä¿—ç†è§£ï¼šå°±åƒæŒ‰ä¸‹"æš‚åœé”®"ï¼Œè®¾å¤‡åœæ­¢å·¥ä½œä½†æ²¡å…³æœº

åº”ç”¨åœºæ™¯ï¼š
âœ… æš‚åœå®šæ—¶ä»»åŠ¡
âœ… æš‚åœæ¶ˆæ¯ç›‘å¬
âœ… ä¸´æ—¶åœæ­¢æŸäº›æœåŠ¡
```

**ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
@Component
public class TaskManager implements ApplicationListener<ContextStoppedEvent> {
    
    @Override
    public void onApplicationEvent(ContextStoppedEvent event) {
        System.out.println("å®¹å™¨åœæ­¢ï¼Œæš‚åœæ‰€æœ‰å®šæ—¶ä»»åŠ¡...");
        // æš‚åœå®šæ—¶ä»»åŠ¡ï¼Œä½†ä¿ç•™çŠ¶æ€
    }
}
```

---

### 2.4 ContextClosedEventï¼ˆå®¹å™¨å…³é—­ï¼‰


**ğŸ”¸ è¿™æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Ÿ**
```
æ—¶æœºï¼šå®¹å™¨å…³é—­æ—¶å‘å¸ƒï¼ˆè°ƒç”¨close()æˆ–JVMå…³é—­ï¼‰
é€šä¿—ç†è§£ï¼šå°±åƒå…³åº—å‰çš„"æ‰“çƒŠ"ï¼Œè¦æ¸…ç†èµ„æºã€ä¿å­˜æ•°æ®

è¿™æ˜¯æœ€é‡è¦çš„æ¸…ç†äº‹ä»¶ï¼
```

**ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯**ï¼š

```java
@Component
public class ResourceCleaner implements ApplicationListener<ContextClosedEvent> {
    
    @Autowired
    private DataSource dataSource;
    
    @Autowired
    private RedisClient redisClient;
    
    @Override
    public void onApplicationEvent(ContextClosedEvent event) {
        System.out.println("å®¹å™¨å…³é—­ï¼Œå¼€å§‹æ¸…ç†èµ„æº...");
        
        // 1. å…³é—­æ•°æ®åº“è¿æ¥æ± 
        dataSource.close();
        
        // 2. å…³é—­Redisè¿æ¥
        redisClient.shutdown();
        
        // 3. ä¿å­˜æœªå¤„ç†çš„æ•°æ®
        saveUnprocessedData();
        
        System.out.println("èµ„æºæ¸…ç†å®Œæˆï¼");
    }
}
```

**ğŸ”¹ æ‰§è¡Œé¡ºåºå›¾ç¤º**ï¼š

```
åº”ç”¨å…³é—­æµç¨‹ï¼š

1. JVMæ¥æ”¶åˆ°å…³é—­ä¿¡å·
         â†“
2. Springå‘å¸ƒContextClosedEvent
         â†“
3. æ‰€æœ‰ç›‘å¬å™¨ä¾æ¬¡æ‰§è¡Œæ¸…ç†æ“ä½œ
         â†“
4. é”€æ¯æ‰€æœ‰å•ä¾‹Bean
         â†“
5. å®¹å™¨å®Œå…¨å…³é—­
```

---

### 2.5 ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¯¹æ¯”æ€»ç»“


| äº‹ä»¶ç±»å‹ | **è§¦å‘æ—¶æœº** | **è§¦å‘æ–¹å¼** | **å…¸å‹ç”¨é€”** |
|---------|------------|------------|------------|
| `ContextRefreshedEvent` | å®¹å™¨åˆå§‹åŒ–/åˆ·æ–°å®Œæˆ | **è‡ªåŠ¨è§¦å‘** | ç¼“å­˜é¢„çƒ­ã€æ•°æ®åˆå§‹åŒ– |
| `ContextStartedEvent` | å®¹å™¨å¯åŠ¨ | **æ‰‹åŠ¨è°ƒç”¨start()** | å¯åŠ¨å®šæ—¶ä»»åŠ¡ |
| `ContextStoppedEvent` | å®¹å™¨åœæ­¢ | **æ‰‹åŠ¨è°ƒç”¨stop()** | æš‚åœåå°ä»»åŠ¡ |
| `ContextClosedEvent` | å®¹å™¨å…³é—­ | **å…³é—­å®¹å™¨æ—¶** | èµ„æºæ¸…ç†ã€æ•°æ®ä¿å­˜ |

**ğŸ§  è®°å¿†å£è¯€**ï¼š
> åˆ·æ–°å®Œæˆè‡ªåŠ¨æ¥ï¼ˆRefreshedï¼‰ï¼Œå¯åŠ¨åœæ­¢æ‰‹åŠ¨å¼€ï¼ˆStart/Stopï¼‰ï¼Œ  
> å…³é—­æ¸…ç†æœ€é‡è¦ï¼ˆClosedï¼‰ï¼Œèµ„æºé‡Šæ”¾å°‘ä¸äº†

---

## 3. ğŸŒ Webè¯·æ±‚äº‹ä»¶


### 3.1 RequestHandledEventè¯¦è§£


**ğŸ”¸ è¿™æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Ÿ**
```
æ—¶æœºï¼šæ¯ä¸ªHTTPè¯·æ±‚å¤„ç†å®Œæˆåå‘å¸ƒ
ä½œç”¨ï¼šè®°å½•è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯
é€‚ç”¨ï¼šSpring MVCåº”ç”¨

å¯ä»¥è·å–çš„ä¿¡æ¯ï¼š
âœ… è¯·æ±‚URL
âœ… å®¢æˆ·ç«¯IP
âœ… å¤„ç†æ—¶é•¿
âœ… å¤„ç†ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
âœ… Session ID
```

**ğŸ’¡ å®æˆ˜ï¼šç»Ÿä¸€è¯·æ±‚æ—¥å¿—è®°å½•**ï¼š

```java
@Component
public class RequestLogger implements ApplicationListener<RequestHandledEvent> {
    
    private static final Logger logger = LoggerFactory.getLogger(RequestLogger.class);
    
    @Override
    public void onApplicationEvent(RequestHandledEvent event) {
        // è·å–è¯·æ±‚ä¿¡æ¯
        String url = event.getRequestUrl();
        String clientAddress = event.getClientAddress();
        String method = event.getMethod();
        long processingTime = event.getProcessingTimeMillis();
        String sessionId = event.getSessionId();
        
        // è®°å½•è¯¦ç»†æ—¥å¿—
        logger.info("è¯·æ±‚å®Œæˆ - URL: {}, æ–¹æ³•: {}, å®¢æˆ·ç«¯: {}, è€—æ—¶: {}ms, SessionID: {}", 
                    url, method, clientAddress, processingTime, sessionId);
        
        // å¦‚æœå¤„ç†æ—¶é—´è¿‡é•¿ï¼Œå‘å‡ºè­¦å‘Š
        if (processingTime > 1000) {
            logger.warn("æ…¢è¯·æ±‚è­¦å‘Šï¼URL: {} è€—æ—¶ {}ms", url, processingTime);
        }
    }
}
```

**ğŸ”¹ å®é™…åº”ç”¨åœºæ™¯**ï¼š

```
1. æ€§èƒ½ç›‘æ§
   - ç»Ÿè®¡æ¯ä¸ªæ¥å£çš„å¹³å‡å“åº”æ—¶é—´
   - å‘ç°æ…¢è¯·æ±‚å¹¶ä¼˜åŒ–

2. å®‰å…¨å®¡è®¡
   - è®°å½•æ‰€æœ‰è¯·æ±‚æ¥æº
   - æ£€æµ‹å¼‚å¸¸è®¿é—®æ¨¡å¼

3. ç”¨æˆ·è¡Œä¸ºåˆ†æ
   - è®°å½•ç”¨æˆ·è®¿é—®è·¯å¾„
   - åˆ†æçƒ­é—¨åŠŸèƒ½

4. æ•…éšœæ’æŸ¥
   - ä¿ç•™å®Œæ•´çš„è¯·æ±‚æ—¥å¿—
   - å¿«é€Ÿå®šä½é—®é¢˜è¯·æ±‚
```

---

## 4. ğŸ› ï¸ äº‹ä»¶ç›‘å¬å®æˆ˜


### 4.1 æ³¨è§£æ–¹å¼ç›‘å¬ï¼ˆæ¨èï¼‰


**âœ¨ æœ€ç®€å•çš„ç›‘å¬æ–¹å¼**ï¼š

```java
@Component
public class ApplicationEventHandler {
    
    // ç›‘å¬å®¹å™¨åˆ·æ–°äº‹ä»¶
    @EventListener
    public void handleContextRefresh(ContextRefreshedEvent event) {
        System.out.println("å®¹å™¨åˆ·æ–°å®Œæˆï¼å¼€å§‹åˆå§‹åŒ–...");
    }
    
    // ç›‘å¬å®¹å™¨å…³é—­äº‹ä»¶
    @EventListener
    public void handleContextClose(ContextClosedEvent event) {
        System.out.println("å®¹å™¨å³å°†å…³é—­ï¼æ¸…ç†èµ„æº...");
    }
    
    // ç›‘å¬Webè¯·æ±‚äº‹ä»¶
    @EventListener
    public void handleRequest(RequestHandledEvent event) {
        System.out.println("è¯·æ±‚å®Œæˆï¼š" + event.getRequestUrl());
    }
}
```

**ğŸ¯ ä¸€ä¸ªæ–¹æ³•ç›‘å¬å¤šä¸ªäº‹ä»¶**ï¼š

```java
@Component
public class MultiEventHandler {
    
    @EventListener({ContextRefreshedEvent.class, ContextClosedEvent.class})
    public void handleLifecycleEvent(ApplicationContextEvent event) {
        if (event instanceof ContextRefreshedEvent) {
            System.out.println("å®¹å™¨å¯åŠ¨å®Œæˆ");
        } else if (event instanceof ContextClosedEvent) {
            System.out.println("å®¹å™¨å³å°†å…³é—­");
        }
    }
}
```

---

### 4.2 å®æˆ˜æ¡ˆä¾‹ï¼šåº”ç”¨å¯åŠ¨æ£€æŸ¥


**åœºæ™¯**ï¼šåº”ç”¨å¯åŠ¨åï¼Œæ£€æŸ¥å„é¡¹æœåŠ¡æ˜¯å¦æ­£å¸¸

```java
@Component
public class StartupHealthChecker {
    
    @Autowired
    private DataSource dataSource;
    
    @Autowired
    private RedisTemplate redisTemplate;
    
    @EventListener
    public void checkHealthOnStartup(ContextRefreshedEvent event) {
        System.out.println("========== åº”ç”¨å¯åŠ¨å¥åº·æ£€æŸ¥ ==========");
        
        // 1. æ£€æŸ¥æ•°æ®åº“è¿æ¥
        if (checkDatabase()) {
            System.out.println("âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸");
        } else {
            System.err.println("âŒ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼");
        }
        
        // 2. æ£€æŸ¥Redisè¿æ¥
        if (checkRedis()) {
            System.out.println("âœ… Redisè¿æ¥æ­£å¸¸");
        } else {
            System.err.println("âŒ Redisè¿æ¥å¤±è´¥ï¼");
        }
        
        System.out.println("====================================");
    }
    
    private boolean checkDatabase() {
        try {
            dataSource.getConnection().close();
            return true;
        } catch (Exception e) {
            return false;
        }
    }
    
    private boolean checkRedis() {
        try {
            redisTemplate.getConnectionFactory().getConnection().ping();
            return true;
        } catch (Exception e) {
            return false;
        }
    }
}
```

---

### 4.3 å®æˆ˜æ¡ˆä¾‹ï¼šä¼˜é›…å…³é—­


**åœºæ™¯**ï¼šåº”ç”¨å…³é—­å‰ï¼Œä¿å­˜æœªå¤„ç†çš„æ•°æ®

```java
@Component
public class GracefulShutdown {
    
    @Autowired
    private MessageQueue messageQueue;
    
    @EventListener
    public void saveUnprocessedDataOnShutdown(ContextClosedEvent event) {
        System.out.println("åº”ç”¨å³å°†å…³é—­ï¼Œä¿å­˜æœªå¤„ç†çš„æ¶ˆæ¯...");
        
        // è·å–é˜Ÿåˆ—ä¸­æœªå¤„ç†çš„æ¶ˆæ¯
        List<Message> unprocessedMessages = messageQueue.getAllMessages();
        
        // ä¿å­˜åˆ°æ•°æ®åº“
        if (!unprocessedMessages.isEmpty()) {
            saveToDatabase(unprocessedMessages);
            System.out.println("å·²ä¿å­˜ " + unprocessedMessages.size() + " æ¡æœªå¤„ç†æ¶ˆæ¯");
        }
        
        System.out.println("æ•°æ®ä¿å­˜å®Œæˆï¼Œå¯ä»¥å®‰å…¨å…³é—­");
    }
    
    private void saveToDatabase(List<Message> messages) {
        // ä¿å­˜é€»è¾‘
    }
}
```

---

### 4.4 æ¡ä»¶ç›‘å¬


**åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ç›‘å¬äº‹ä»¶**ï¼š

```java
@Component
public class ConditionalEventHandler {
    
    // åªåœ¨ç”Ÿäº§ç¯å¢ƒç›‘å¬
    @EventListener
    @ConditionalOnProperty(name = "app.env", havingValue = "production")
    public void handleInProduction(ContextRefreshedEvent event) {
        System.out.println("ç”Ÿäº§ç¯å¢ƒå¯åŠ¨æ£€æŸ¥...");
    }
    
    // åªåœ¨å¼€å‘ç¯å¢ƒç›‘å¬
    @EventListener
    @ConditionalOnProperty(name = "app.env", havingValue = "dev")
    public void handleInDev(ContextRefreshedEvent event) {
        System.out.println("å¼€å‘ç¯å¢ƒï¼ŒåŠ è½½æµ‹è¯•æ•°æ®...");
    }
}
```

---

## 5. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å†…ç½®äº‹ä»¶æœ¬è´¨ï¼šSpringå®¹å™¨åœ¨å…³é”®æ—¶åˆ»è‡ªåŠ¨å‘å¸ƒçš„ç³»ç»Ÿäº‹ä»¶
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼šRefreshedã€Startedã€Stoppedã€Closed
ğŸ”¸ Webäº‹ä»¶ï¼šRequestHandledEventè®°å½•æ¯ä¸ªè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯
ğŸ”¸ ç›‘å¬æ–¹å¼ï¼š@EventListeneræ³¨è§£æœ€ç®€å•å®ç”¨
```

### 5.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å„äº‹ä»¶çš„å…¸å‹åº”ç”¨**ï¼š
```
ContextRefreshedEventï¼š
- ç¼“å­˜é¢„çƒ­
- æ•°æ®åˆå§‹åŒ–
- å¯åŠ¨å¥åº·æ£€æŸ¥

ContextClosedEventï¼š
- èµ„æºé‡Šæ”¾
- æ•°æ®æŒä¹…åŒ–
- ä¼˜é›…å…³é—­

RequestHandledEventï¼š
- è¯·æ±‚æ—¥å¿—è®°å½•
- æ€§èƒ½ç›‘æ§
- å®‰å…¨å®¡è®¡
```

**ğŸ”¹ äº‹ä»¶æ‰§è¡Œæ—¶æœºè®°å¿†**ï¼š
```
å®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼š
åˆå§‹åŒ– â†’ Refreshedï¼ˆè‡ªåŠ¨ï¼‰
   â†“
å¯åŠ¨ â†’ Startedï¼ˆæ‰‹åŠ¨start()ï¼‰
   â†“
åœæ­¢ â†’ Stoppedï¼ˆæ‰‹åŠ¨stop()ï¼‰
   â†“
å…³é—­ â†’ Closedï¼ˆå…³é—­å®¹å™¨ï¼‰

Webè¯·æ±‚ï¼š
æ¯ä¸ªè¯·æ±‚å®Œæˆ â†’ RequestHandledEvent
```

### 5.3 å®é™…åº”ç”¨ä»·å€¼


**âœ… è§£å†³çš„é—®é¢˜**ï¼š
- **åˆå§‹åŒ–æ—¶æœº**ï¼šä¸ç”¨çŒœæµ‹ä½•æ—¶åˆå§‹åŒ–ï¼Œç›‘å¬Refreshedäº‹ä»¶å³å¯
- **èµ„æºæ¸…ç†**ï¼šä¸ç”¨æ‹…å¿ƒé—æ¼æ¸…ç†ï¼Œç›‘å¬Closedäº‹ä»¶ç»Ÿä¸€å¤„ç†  
- **è¯·æ±‚ç›‘æ§**ï¼šä¸ç”¨åœ¨æ¯ä¸ªæ¥å£å†™æ—¥å¿—ï¼Œç›‘å¬Requestäº‹ä»¶é›†ä¸­è®°å½•
- **ä»£ç è§£è€¦**ï¼šä¸šåŠ¡é€»è¾‘å’Œç›‘æ§ä»£ç åˆ†ç¦»ï¼Œæ›´æ˜“ç»´æŠ¤

**ğŸ¯ æœ€ä½³å®è·µ**ï¼š
```
1. ä¼˜å…ˆä½¿ç”¨@EventListeneræ³¨è§£ï¼Œä»£ç ç®€æ´
2. é¿å…åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ
3. æ³¨æ„parent-childå®¹å™¨çš„é‡å¤è§¦å‘é—®é¢˜
4. åˆç†ä½¿ç”¨æ¡ä»¶ç›‘å¬ï¼Œé¿å…ä¸å¿…è¦çš„æ‰§è¡Œ
5. è®°å½•æ—¥å¿—æ—¶ï¼Œæ³¨æ„æ•æ„Ÿä¿¡æ¯çš„è„±æ•å¤„ç†
```

**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> Refreshedåˆå§‹åŒ–ï¼ŒStartedæ‰‹åŠ¨å¯  
> Stoppedå¯æš‚åœï¼ŒClosedå¿…æ¸…ç†  
> Requestè®°æ—¥å¿—ï¼Œç›‘æ§å…¨é å®ƒ  
> æ³¨è§£æ–¹å¼ç®€å•ï¼Œå®æˆ˜ä»·å€¼å¤§

---

**ğŸ’¡ å­¦ä¹ å»ºè®®**ï¼š
1. å…ˆç†è§£æ¯ä¸ªäº‹ä»¶çš„è§¦å‘æ—¶æœº
2. åŠ¨æ‰‹å†™ä»£ç éªŒè¯äº‹ä»¶æ‰§è¡Œé¡ºåº
3. åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨ï¼Œæ„Ÿå—äº‹ä»¶æœºåˆ¶çš„ä¾¿åˆ©æ€§
4. ç»“åˆæ—¥å¿—è¾“å‡ºï¼Œè§‚å¯Ÿäº‹ä»¶çš„æ‰§è¡Œæµç¨‹