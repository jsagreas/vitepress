---
title: 11ã€PrototypeåŸå‹ä½œç”¨åŸŸ
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯PrototypeåŸå‹ä½œç”¨åŸŸ](#1-ä»€ä¹ˆæ˜¯prototypeåŸå‹ä½œç”¨åŸŸ)
2. [åŸå‹æ¨¡å¼çš„å·¥ä½œåŸç†](#2-åŸå‹æ¨¡å¼çš„å·¥ä½œåŸç†)
3. [æ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹çš„æœºåˆ¶](#3-æ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹çš„æœºåˆ¶)
4. [ç”Ÿå‘½å‘¨æœŸç®¡ç†è¯¦è§£](#4-ç”Ÿå‘½å‘¨æœŸç®¡ç†è¯¦è§£)
5. [é”€æ¯å¤„ç†æœºåˆ¶](#5-é”€æ¯å¤„ç†æœºåˆ¶)
6. [å†…å­˜ç®¡ç†è¦ç‚¹](#6-å†…å­˜ç®¡ç†è¦ç‚¹)
7. [å®é™…ä½¿ç”¨åœºæ™¯](#7-å®é™…ä½¿ç”¨åœºæ™¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯PrototypeåŸå‹ä½œç”¨åŸŸ


### 1.1 åŸºæœ¬æ¦‚å¿µç†è§£


**Prototypeæ˜¯ä»€ä¹ˆï¼Ÿ**

ç®€å•æ¥è¯´ï¼ŒPrototypeï¼ˆåŸå‹ï¼‰å°±æ˜¯Springä¸­çš„ä¸€ç§"æŒ‰éœ€ç”Ÿäº§"æ¨¡å¼ã€‚å°±åƒä½ å»é¥­åº—ç‚¹èœï¼Œæ¯æ¬¡ç‚¹ä¸€ä»½ï¼Œå¨å¸ˆå°±ç»™ä½ åšä¸€ä»½æ–°çš„ï¼Œè€Œä¸æ˜¯æŠŠåšå¥½çš„ä¸€ä»½èœåå¤ç»™ä¸åŒçš„å®¢äººã€‚

```
ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š

å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ï¼š
å°±åƒå…¬å¸çš„æ‰“å°æœºï¼Œæ‰€æœ‰äººå…±ç”¨ä¸€å°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰“å°æœº   â”‚ â† å‘˜å·¥Aä½¿ç”¨
â”‚ (å…±äº«)   â”‚ â† å‘˜å·¥Bä½¿ç”¨  
â”‚         â”‚ â† å‘˜å·¥Cä½¿ç”¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰ï¼š
å°±åƒå¤å°çº¸ï¼Œæ¯ä¸ªäººéœ€è¦æ—¶æ‹¿ä¸€å¼ æ–°çš„
â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
â”‚ çº¸A  â”‚    â”‚ çº¸B  â”‚    â”‚ çº¸C  â”‚
â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜
  â†‘          â†‘          â†‘
å‘˜å·¥A      å‘˜å·¥B      å‘˜å·¥C
```

### 1.2 Springä¸­çš„å®šä¹‰


**å®˜æ–¹å®šä¹‰**ï¼šå½“Beançš„ä½œç”¨åŸŸè®¾ç½®ä¸º`prototype`æ—¶ï¼Œæ¯æ¬¡ä»Springå®¹å™¨è¯·æ±‚è¯¥Beanï¼Œå®¹å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å®ä¾‹è¿”å›ã€‚

**é€šä¿—ç†è§£**ï¼š
- **Singletonï¼ˆå•ä¾‹ï¼‰**ï¼šæ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¤§å®¶å…±ç”¨
- **Prototypeï¼ˆåŸå‹ï¼‰**ï¼šæ¯æ¬¡è¦çš„æ—¶å€™éƒ½ç»™ä½ ä¸€ä¸ªæ–°çš„ï¼Œäº’ä¸å½±å“

```java
// é…ç½®åŸå‹Bean
@Component
@Scope("prototype")  // å…³é”®ï¼šæŒ‡å®šä¸ºåŸå‹ä½œç”¨åŸŸ
public class UserService {
    private String username;
    
    public UserService() {
        System.out.println("åˆ›å»ºäº†æ–°çš„UserServiceå®ä¾‹");
    }
}
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦Prototype


**æ ¸å¿ƒåŸå› **ï¼š

ğŸ”¸ **çŠ¶æ€éš”ç¦»éœ€æ±‚**
- æœ‰äº›å¯¹è±¡éœ€è¦ä¿å­˜ä¸´æ—¶çŠ¶æ€
- ä¸åŒä½¿ç”¨åœºæ™¯éœ€è¦ç‹¬ç«‹çš„å®ä¾‹
- é¿å…å¤šçº¿ç¨‹ä¸‹çš„çŠ¶æ€æ··ä¹±

ğŸ”¸ **çµæ´»æ€§éœ€æ±‚**
- æ¯æ¬¡ä½¿ç”¨éƒ½éœ€è¦å…¨æ–°çš„åˆå§‹çŠ¶æ€
- å¯¹è±¡åŒ…å«ä¼šå˜åŒ–çš„æ•°æ®
- éœ€è¦æ¯æ¬¡é‡æ–°åˆå§‹åŒ–

> ğŸ’¡ **è®°ä½**ï¼šå¦‚æœå¯¹è±¡æœ‰"çŠ¶æ€"ï¼ˆä¼šå˜åŒ–çš„å±æ€§ï¼‰ï¼Œä¸”ä¸åŒåœ°æ–¹ä½¿ç”¨ä¸èƒ½äº’ç›¸å½±å“ï¼Œå°±è€ƒè™‘ç”¨Prototype

---

## 2. âš™ï¸ åŸå‹æ¨¡å¼çš„å·¥ä½œåŸç†


### 2.1 åˆ›å»ºè¿‡ç¨‹è§£æ


**Springå®¹å™¨æ˜¯å¦‚ä½•åˆ›å»ºåŸå‹Beançš„ï¼Ÿ**

```
å·¥ä½œæµç¨‹ï¼š

æ­¥éª¤1ï¼šæ¥æ”¶è¯·æ±‚
  åº”ç”¨ä»£ç  â†’ "æˆ‘è¦ä¸€ä¸ªUserService"
     â†“
æ­¥éª¤2ï¼šæ£€æŸ¥ä½œç”¨åŸŸ
  Springå®¹å™¨æ£€æŸ¥ â†’ "è¿™æ˜¯prototypeç±»å‹"
     â†“
æ­¥éª¤3ï¼šåˆ›å»ºæ–°å®ä¾‹
  æ‰§è¡Œæ„é€ æ–¹æ³• â†’ åˆ›å»ºå…¨æ–°å¯¹è±¡
     â†“
æ­¥éª¤4ï¼šä¾èµ–æ³¨å…¥
  æ³¨å…¥éœ€è¦çš„å…¶ä»–Bean
     â†“
æ­¥éª¤5ï¼šåˆå§‹åŒ–
  æ‰§è¡Œ@PostConstructç­‰åˆå§‹åŒ–æ–¹æ³•
     â†“
æ­¥éª¤6ï¼šè¿”å›å®ä¾‹
  æŠŠæ–°å¯¹è±¡äº¤ç»™è°ƒç”¨è€…
```

**å…³é”®ç‚¹ç†è§£**ï¼š
- æ¯æ¬¡è¯·æ±‚éƒ½èµ°ä¸€éå®Œæ•´çš„åˆ›å»ºæµç¨‹
- ä¸ä¼šç¼“å­˜åˆ°Springå®¹å™¨ä¸­
- å®Œå…¨ç‹¬ç«‹çš„å¯¹è±¡ï¼Œäº’ä¸å½±å“

### 2.2 ä¸å•ä¾‹æ¨¡å¼çš„å¯¹æ¯”


| å¯¹æ¯”ç»´åº¦ | **Singletonï¼ˆå•ä¾‹ï¼‰** | **Prototypeï¼ˆåŸå‹ï¼‰** |
|---------|---------------------|---------------------|
| **åˆ›å»ºæ—¶æœº** | å®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºä¸€æ¬¡ | æ¯æ¬¡è¯·æ±‚æ—¶åˆ›å»º |
| **å®ä¾‹æ•°é‡** | å…¨å±€å”¯ä¸€ä¸€ä¸ª | æ¯æ¬¡éƒ½æ˜¯æ–°çš„ |
| **å†…å­˜å ç”¨** | åªå ä¸€ä»½å†…å­˜ | æœ‰å¤šå°‘æ¬¡è¯·æ±‚å°±å¤šå°‘ä»½ |
| **çŠ¶æ€ç®¡ç†** | å…±äº«çŠ¶æ€ï¼Œéœ€æ³¨æ„çº¿ç¨‹å®‰å…¨ | ç‹¬ç«‹çŠ¶æ€ï¼Œå¤©ç„¶éš”ç¦» |
| **é€‚ç”¨åœºæ™¯** | æ— çŠ¶æ€æœåŠ¡ã€å·¥å…·ç±» | æœ‰çŠ¶æ€å¯¹è±¡ã€ä¸´æ—¶å¯¹è±¡ |

**å®é™…ä¾‹å­å¯¹æ¯”**ï¼š

```java
// å•ä¾‹Bean - æ‰€æœ‰äººå…±ç”¨ä¸€ä¸ª
@Component  // é»˜è®¤å°±æ˜¯singleton
public class ConfigService {
    // è¿™é‡Œçš„é…ç½®æ˜¯å…±äº«çš„
    private final AppConfig config;
}

// åŸå‹Bean - æ¯æ¬¡éƒ½æ˜¯æ–°çš„
@Component
@Scope("prototype")
public class ShoppingCart {
    // æ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è´­ç‰©è½¦
    private List<Item> items = new ArrayList<>();
}
```

### 2.3 è·å–åŸå‹Beançš„æ–¹å¼


**æ–¹å¼ä¸€ï¼šé€šè¿‡ApplicationContextè·å–**

```java
@Autowired
private ApplicationContext context;

public void doSomething() {
    // æ¯æ¬¡è°ƒç”¨getBeanéƒ½ä¼šåˆ›å»ºæ–°å®ä¾‹
    UserService service1 = context.getBean(UserService.class);
    UserService service2 = context.getBean(UserService.class);
    
    System.out.println(service1 == service2);  // è¾“å‡ºï¼šfalseï¼ˆä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰
}
```

**æ–¹å¼äºŒï¼šä½¿ç”¨ObjectFactory**

```java
@Component
public class MyController {
    
    @Autowired
    private ObjectFactory<UserService> userServiceFactory;
    
    public void handleRequest() {
        // æ¯æ¬¡get()éƒ½åˆ›å»ºæ–°å®ä¾‹
        UserService service = userServiceFactory.getObject();
    }
}
```

**æ–¹å¼ä¸‰ï¼šæ–¹æ³•æ³¨å…¥ï¼ˆæ¨èï¼‰**

```java
@Component
public abstract class BaseController {
    
    // æŠ½è±¡æ–¹æ³•ï¼ŒSpringä¼šè‡ªåŠ¨å®ç°
    @Lookup
    protected abstract UserService getUserService();
    
    public void process() {
        // æ¯æ¬¡è°ƒç”¨éƒ½å¾—åˆ°æ–°å®ä¾‹
        UserService service = getUserService();
    }
}
```

> âš ï¸ **æ³¨æ„**ï¼šä¸èƒ½ç”¨`@Autowired`ç›´æ¥æ³¨å…¥prototype Beanåˆ°singleton Beanä¸­ï¼Œé‚£æ ·åªä¼šæ³¨å…¥ä¸€æ¬¡ï¼

---

## 3. ğŸ”„ æ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹çš„æœºåˆ¶


### 3.1 åˆ›å»ºæ–°å®ä¾‹çš„è§¦å‘æ—¶æœº


**ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»ºæ–°å®ä¾‹ï¼Ÿ**

ğŸ”¸ **æ¯æ¬¡getBeanè°ƒç”¨æ—¶**
```java
UserService s1 = context.getBean(UserService.class);  // åˆ›å»ºç¬¬1ä¸ª
UserService s2 = context.getBean(UserService.class);  // åˆ›å»ºç¬¬2ä¸ª
UserService s3 = context.getBean(UserService.class);  // åˆ›å»ºç¬¬3ä¸ª
```

ğŸ”¸ **æ¯æ¬¡ä¾èµ–æŸ¥æ‰¾æ—¶**
```java
@Lookup
protected abstract UserService getService();

UserService s1 = getService();  // åˆ›å»ºæ–°çš„
UserService s2 = getService();  // åˆåˆ›å»ºæ–°çš„
```

ğŸ”¸ **æ¯æ¬¡å·¥å‚æ–¹æ³•è°ƒç”¨æ—¶**
```java
ObjectFactory<UserService> factory = ...;
UserService s1 = factory.getObject();  // æ–°å®ä¾‹
UserService s2 = factory.getObject();  // åˆæ˜¯æ–°å®ä¾‹
```

### 3.2 å®ä¾‹ç‹¬ç«‹æ€§éªŒè¯


**å¦‚ä½•éªŒè¯æ¯æ¬¡éƒ½æ˜¯æ–°å¯¹è±¡ï¼Ÿ**

```java
@Component
@Scope("prototype")
public class TestBean {
    private String id = UUID.randomUUID().toString();
    
    public TestBean() {
        System.out.println("åˆ›å»ºTestBeanï¼ŒID: " + id);
    }
}

// æµ‹è¯•ä»£ç 
public void test() {
    TestBean bean1 = context.getBean(TestBean.class);
    TestBean bean2 = context.getBean(TestBean.class);
    
    System.out.println(bean1 == bean2);        // falseï¼Œä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡
    System.out.println(bean1.getId());         // ä¸åŒçš„UUID
    System.out.println(bean2.getId());         // ä¸åŒçš„UUID
}
```

**è¾“å‡ºç»“æœ**ï¼š
```
åˆ›å»ºTestBeanï¼ŒID: a1b2c3d4-...
åˆ›å»ºTestBeanï¼ŒID: e5f6g7h8-...
false
a1b2c3d4-...
e5f6g7h8-...
```

### 3.3 ä¸å•ä¾‹Beanæ··ç”¨çš„é—®é¢˜


**å¸¸è§é™·é˜±ï¼šå•ä¾‹Beanæ³¨å…¥åŸå‹Bean**

```java
// âŒ é”™è¯¯ç¤ºä¾‹
@Component  // å•ä¾‹
public class SingletonService {
    
    @Autowired  // åªä¼šæ³¨å…¥ä¸€æ¬¡ï¼
    private PrototypeBean prototypeBean;
    
    public void doSomething() {
        // æ¯æ¬¡ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªprototypeBeanå®ä¾‹
        // å¤±å»äº†prototypeçš„æ„ä¹‰
        prototypeBean.process();
    }
}
```

**ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ**
- SingletonServiceåœ¨å®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºä¸€æ¬¡
- åˆ›å»ºæ—¶`@Autowired`æ³¨å…¥äº†ä¸€ä¸ªPrototypeBeanå®ä¾‹
- ä¹‹åSingletonServiceä¸€ç›´å­˜åœ¨ï¼Œé‡Œé¢çš„prototypeBeanä¹Ÿä¸ä¼šå˜

**æ­£ç¡®åšæ³•**ï¼š

```java
// âœ… æ­£ç¡®ç¤ºä¾‹
@Component
public class SingletonService {
    
    @Autowired
    private ApplicationContext context;
    
    public void doSomething() {
        // æ¯æ¬¡ä½¿ç”¨æ—¶åŠ¨æ€è·å–
        PrototypeBean bean = context.getBean(PrototypeBean.class);
        bean.process();
    }
}
```

---

## 4. ğŸ”§ ç”Ÿå‘½å‘¨æœŸç®¡ç†è¯¦è§£


### 4.1 å®Œæ•´ç”Ÿå‘½å‘¨æœŸæµç¨‹


**Prototype Beançš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ**ï¼š

```
é˜¶æ®µ1: å®ä¾‹åŒ–
  â†“
  new PrototypeBean()  â† æ‰§è¡Œæ„é€ æ–¹æ³•
  â†“
é˜¶æ®µ2: å±æ€§å¡«å……
  â†“
  @Autowiredæ³¨å…¥ä¾èµ–  â† æ³¨å…¥å…¶ä»–Bean
  â†“
é˜¶æ®µ3: åˆå§‹åŒ–å‰å¤„ç†
  â†“
  BeanPostProcessor.postProcessBeforeInitialization()
  â†“
é˜¶æ®µ4: åˆå§‹åŒ–
  â†“
  @PostConstructæ–¹æ³•  â† è‡ªå®šä¹‰åˆå§‹åŒ–é€»è¾‘
  InitializingBean.afterPropertiesSet()
  â†“
é˜¶æ®µ5: åˆå§‹åŒ–åå¤„ç†
  â†“
  BeanPostProcessor.postProcessAfterInitialization()
  â†“
é˜¶æ®µ6: ä½¿ç”¨ä¸­
  â†“
  åº”ç”¨ä»£ç ä½¿ç”¨Bean
  â†“
é˜¶æ®µ7: é”€æ¯ï¼ˆéœ€æ‰‹åŠ¨ï¼‰
  â†“
  âš ï¸ Springå®¹å™¨ä¸ç®¡é”€æ¯ï¼éœ€è¦è‡ªå·±å¤„ç†
```

### 4.2 åˆå§‹åŒ–è¿‡ç¨‹è¯¦è§£


**Beanåˆå§‹åŒ–çš„ä¸‰ç§æ–¹å¼**ï¼š

ğŸ”¸ **æ–¹å¼1ï¼š@PostConstructæ³¨è§£**ï¼ˆæ¨èï¼‰
```java
@Component
@Scope("prototype")
public class UserService {
    
    @PostConstruct
    public void init() {
        System.out.println("UserServiceåˆå§‹åŒ–å®Œæˆ");
        // æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘
    }
}
```

ğŸ”¸ **æ–¹å¼2ï¼šå®ç°InitializingBeanæ¥å£**
```java
@Component
@Scope("prototype")
public class UserService implements InitializingBean {
    
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("ä¾èµ–æ³¨å…¥å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–");
    }
}
```

ğŸ”¸ **æ–¹å¼3ï¼š@Beançš„initMethod**
```java
@Configuration
public class AppConfig {
    
    @Bean(initMethod = "customInit")
    @Scope("prototype")
    public UserService userService() {
        return new UserService();
    }
}

public class UserService {
    public void customInit() {
        System.out.println("è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•");
    }
}
```

### 4.3 ä¸å•ä¾‹ç”Ÿå‘½å‘¨æœŸçš„åŒºåˆ«


| ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ | **Singleton** | **Prototype** |
|------------|--------------|--------------|
| **åˆ›å»ºæ—¶æœº** | å®¹å™¨å¯åŠ¨æ—¶ | æ¯æ¬¡è¯·æ±‚æ—¶ |
| **åˆå§‹åŒ–** | æ‰§è¡Œä¸€æ¬¡ | æ¯ä¸ªå®ä¾‹éƒ½æ‰§è¡Œ |
| **ä¾èµ–æ³¨å…¥** | æ³¨å…¥ä¸€æ¬¡ | æ¯ä¸ªå®ä¾‹éƒ½æ³¨å…¥ |
| **é”€æ¯ç®¡ç†** | Springè‡ªåŠ¨ç®¡ç† | âŒ Springä¸ç®¡ç† |
| **@PreDestroy** | âœ… ä¼šæ‰§è¡Œ | âŒ ä¸ä¼šæ‰§è¡Œ |

**å…³é”®å·®å¼‚ç¤ºä¾‹**ï¼š

```java
@Component
@Scope("prototype")
public class PrototypeBean {
    
    @PostConstruct
    public void init() {
        // âœ… æ¯ä¸ªå®ä¾‹åˆ›å»ºæ—¶éƒ½ä¼šæ‰§è¡Œ
        System.out.println("åˆå§‹åŒ–ï¼š" + this);
    }
    
    @PreDestroy
    public void destroy() {
        // âŒ æ°¸è¿œä¸ä¼šè¢«Springè°ƒç”¨
        System.out.println("é”€æ¯ï¼š" + this);
    }
}
```

> ğŸ’¡ **é‡è¦**ï¼šPrototype Beançš„åˆå§‹åŒ–æ–¹æ³•ä¼šæ‰§è¡Œï¼Œä½†é”€æ¯æ–¹æ³•ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼

---

## 5. ğŸ—‘ï¸ é”€æ¯å¤„ç†æœºåˆ¶


### 5.1 ä¸ºä»€ä¹ˆSpringä¸ç®¡ç†é”€æ¯


**æ ¹æœ¬åŸå› **ï¼š

Springå®¹å™¨æ— æ³•è¿½è¸ªPrototype Beançš„å»å‘
  â†“
Beanåˆ›å»ºåäº¤ç»™åº”ç”¨ä»£ç 
  â†“
åº”ç”¨ä»£ç å¯èƒ½ä¼ é€’ã€å­˜å‚¨ã€ä¸¢å¼ƒ
  â†“
Springä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥é”€æ¯
  â†“
æ‰€ä»¥æŠŠé”€æ¯è´£ä»»äº¤ç»™ä½¿ç”¨è€…

**é€šä¿—ç†è§£**ï¼š
- å•ä¾‹Beanï¼šSpringçŸ¥é“åªæœ‰ä¸€ä¸ªï¼Œå®¹å™¨å…³é—­æ—¶é”€æ¯å®ƒ
- åŸå‹Beanï¼šSpringä¸çŸ¥é“åˆ›å»ºäº†å¤šå°‘ä¸ªï¼Œä¹Ÿä¸çŸ¥é“å®ƒä»¬åœ¨å“ªï¼Œæ²¡æ³•ç®¡ç†é”€æ¯

### 5.2 æ‰‹åŠ¨é”€æ¯çš„æ–¹å¼


**æ–¹å¼1ï¼šå®ç°DisposableBeanæ¥å£ï¼ˆéœ€æ‰‹åŠ¨è°ƒç”¨ï¼‰**

```java
@Component
@Scope("prototype")
public class ResourceBean implements DisposableBean {
    
    private Connection connection;
    
    @PostConstruct
    public void init() {
        // åˆå§‹åŒ–èµ„æº
        connection = DataSource.getConnection();
    }
    
    @Override
    public void destroy() throws Exception {
        // æ¸…ç†èµ„æº
        if (connection != null) {
            connection.close();
        }
    }
}

// ä½¿ç”¨æ—¶éœ€è¦æ‰‹åŠ¨è°ƒç”¨
public void useBean() {
    ResourceBean bean = context.getBean(ResourceBean.class);
    try {
        bean.doSomething();
    } finally {
        bean.destroy();  // å¿…é¡»æ‰‹åŠ¨è°ƒç”¨ï¼
    }
}
```

**æ–¹å¼2ï¼šä½¿ç”¨try-with-resourcesï¼ˆæ¨èï¼‰**

```java
@Component
@Scope("prototype")
public class ResourceBean implements AutoCloseable {
    
    private FileInputStream stream;
    
    @Override
    public void close() throws Exception {
        if (stream != null) {
            stream.close();
        }
    }
}

// ä½¿ç”¨æ–¹å¼
public void useBean() {
    try (ResourceBean bean = context.getBean(ResourceBean.class)) {
        bean.process();
    } // è‡ªåŠ¨è°ƒç”¨close()
}
```

**æ–¹å¼3ï¼šè‡ªå®šä¹‰é”€æ¯æ–¹æ³•**

```java
@Component
@Scope("prototype")
public class CacheBean {
    
    private Map<String, Object> cache = new HashMap<>();
    
    public void cleanup() {
        cache.clear();
        System.out.println("ç¼“å­˜å·²æ¸…ç†");
    }
}

// ä½¿ç”¨å®Œåæ‰‹åŠ¨æ¸…ç†
public void process() {
    CacheBean bean = context.getBean(CacheBean.class);
    try {
        bean.put("key", "value");
    } finally {
        bean.cleanup();  // æ‰‹åŠ¨æ¸…ç†
    }
}
```

### 5.3 é”€æ¯æ—¶æœºçš„æœ€ä½³å®è·µ


**æ¨èåšæ³•**ï¼š

```
åœºæ™¯1ï¼šçŸ­æœŸä½¿ç”¨
  â†“
  æ–¹æ³•ç»“æŸæ—¶ç«‹å³é”€æ¯
  
åœºæ™¯2ï¼šé•¿æœŸæŒæœ‰
  â†“
  ä½¿ç”¨å¼±å¼•ç”¨ + å®šæœŸæ¸…ç†
  
åœºæ™¯3ï¼šèµ„æºå¯†é›†å‹
  â†“
  ä½¿ç”¨å¯¹è±¡æ± æ¨¡å¼å¤ç”¨
```

**å…·ä½“å®ç°**ï¼š

```java
// çŸ­æœŸä½¿ç”¨ç¤ºä¾‹
public void shortTermUse() {
    UserService service = context.getBean(UserService.class);
    try {
        service.process();
    } finally {
        // å¦‚æœæœ‰èµ„æºéœ€è¦é‡Šæ”¾
        if (service instanceof AutoCloseable) {
            ((AutoCloseable) service).close();
        }
    }
}

// é•¿æœŸæŒæœ‰ç¤ºä¾‹
public class BeanManager {
    
    private final List<WeakReference<PrototypeBean>> beans = new ArrayList<>();
    
    public PrototypeBean getBean() {
        PrototypeBean bean = context.getBean(PrototypeBean.class);
        beans.add(new WeakReference<>(bean));
        return bean;
    }
    
    @Scheduled(fixedRate = 60000)
    public void cleanup() {
        // å®šæœŸæ¸…ç†å·²è¢«GCçš„å¼•ç”¨
        beans.removeIf(ref -> ref.get() == null);
    }
}
```

> âš ï¸ **å…³é”®ç‚¹**ï¼šå¦‚æœPrototype BeanæŒæœ‰èµ„æºï¼ˆæ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ï¼Œå¿…é¡»ç¡®ä¿æ­£ç¡®é‡Šæ”¾ï¼

---

## 6. ğŸ’¾ å†…å­˜ç®¡ç†è¦ç‚¹


### 6.1 å†…å­˜å ç”¨åˆ†æ


**Prototype Beançš„å†…å­˜ç‰¹ç‚¹**ï¼š

```
å•ä¾‹Beanå†…å­˜å ç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å›ºå®šå¤§å°     â”‚  â† åªæœ‰ä¸€ä¸ªå®ä¾‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸå‹Beanå†…å­˜å ç”¨ï¼š
â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
â”‚å®ä¾‹1â”‚ â”‚å®ä¾‹2â”‚ â”‚å®ä¾‹3â”‚ â”‚... â”‚  â† è¯·æ±‚å¤šå°‘åˆ›å»ºå¤šå°‘
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜
  â†‘      â†‘      â†‘      â†‘
éšè¯·æ±‚æ•°é‡çº¿æ€§å¢é•¿
```

**å†…å­˜è®¡ç®—ç¤ºä¾‹**ï¼š

å‡è®¾ä¸€ä¸ªUserServiceå®ä¾‹å ç”¨1KBå†…å­˜ï¼š
- **Singleton**ï¼š1KBï¼ˆæ— è®ºå¤šå°‘æ¬¡è¯·æ±‚ï¼‰
- **Prototype**ï¼š
  - 100æ¬¡è¯·æ±‚ = 100KB
  - 1000æ¬¡è¯·æ±‚ = 1MB
  - 10000æ¬¡è¯·æ±‚ = 10MB

### 6.2 å†…å­˜æ³„æ¼é£é™©


**å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯**ï¼š

ğŸ”¸ **åœºæ™¯1ï¼šå•ä¾‹BeanæŒæœ‰åŸå‹Beanå¼•ç”¨**

```java
// âŒ å±é™©ç¤ºä¾‹
@Component  // å•ä¾‹
public class CacheService {
    
    private List<PrototypeBean> beans = new ArrayList<>();
    
    public void addBean() {
        // ä¸æ–­åˆ›å»ºå¹¶æŒæœ‰ï¼Œæ°¸ä¸é‡Šæ”¾
        beans.add(context.getBean(PrototypeBean.class));
    }
}
```

**é—®é¢˜**ï¼šå•ä¾‹Beanä¸€ç›´å­˜åœ¨ï¼ŒæŒæœ‰çš„åŸå‹Beanä¹Ÿæ— æ³•è¢«GCå›æ”¶ã€‚

ğŸ”¸ **åœºæ™¯2ï¼šé™æ€é›†åˆæŒæœ‰åŸå‹Bean**

```java
// âŒ å±é™©ç¤ºä¾‹
public class BeanHolder {
    
    private static List<PrototypeBean> allBeans = new ArrayList<>();
    
    public static void register(PrototypeBean bean) {
        allBeans.add(bean);  // é™æ€å¼•ç”¨ï¼Œæ°¸ä¸é‡Šæ”¾
    }
}
```

ğŸ”¸ **åœºæ™¯3ï¼šå¿˜è®°å…³é—­èµ„æºå‹Bean**

```java
// âŒ å±é™©ç¤ºä¾‹
@Component
@Scope("prototype")
public class DatabaseBean {
    
    private Connection connection;
    
    @PostConstruct
    public void init() throws SQLException {
        connection = DriverManager.getConnection(url);
    }
    
    // å¦‚æœä¸è°ƒç”¨closeï¼Œè¿æ¥æ°¸ä¸é‡Šæ”¾
    public void close() throws SQLException {
        if (connection != null) {
            connection.close();
        }
    }
}
```

### 6.3 å†…å­˜ä¼˜åŒ–ç­–ç•¥


**ç­–ç•¥1ï¼šåŠæ—¶é‡Šæ”¾å¼•ç”¨**

```java
public class SafeService {
    
    public void process() {
        PrototypeBean bean = context.getBean(PrototypeBean.class);
        try {
            bean.doWork();
        } finally {
            bean = null;  // å¸®åŠ©GC
        }
    }
}
```

**ç­–ç•¥2ï¼šä½¿ç”¨å¼±å¼•ç”¨**

```java
public class SmartCache {
    
    // ä½¿ç”¨å¼±å¼•ç”¨ï¼Œä¸é˜»æ­¢GC
    private Map<String, WeakReference<PrototypeBean>> cache = new ConcurrentHashMap<>();
    
    public PrototypeBean getOrCreate(String key) {
        WeakReference<PrototypeBean> ref = cache.get(key);
        PrototypeBean bean = ref != null ? ref.get() : null;
        
        if (bean == null) {
            bean = context.getBean(PrototypeBean.class);
            cache.put(key, new WeakReference<>(bean));
        }
        return bean;
    }
}
```

**ç­–ç•¥3ï¼šé™åˆ¶å®ä¾‹æ•°é‡**

```java
public class BoundedFactory {
    
    private final int maxInstances = 100;
    private int currentCount = 0;
    
    public synchronized PrototypeBean getBean() {
        if (currentCount >= maxInstances) {
            throw new IllegalStateException("è¶…è¿‡æœ€å¤§å®ä¾‹æ•°");
        }
        
        currentCount++;
        PrototypeBean bean = context.getBean(PrototypeBean.class);
        
        // è¿”å›å¸¦æ¸…ç†å›è°ƒçš„Bean
        return new PrototypeBean() {
            @Override
            public void close() {
                super.close();
                currentCount--;  // é‡Šæ”¾è®¡æ•°
            }
        };
    }
}
```

**ç­–ç•¥4ï¼šä½¿ç”¨å¯¹è±¡æ± **

```java
@Component
public class PrototypeBeanPool {
    
    private final BlockingQueue<PrototypeBean> pool = new LinkedBlockingQueue<>();
    
    public PrototypeBean borrowBean() {
        PrototypeBean bean = pool.poll();
        if (bean == null) {
            bean = context.getBean(PrototypeBean.class);
        }
        return bean;
    }
    
    public void returnBean(PrototypeBean bean) {
        // é‡ç½®çŠ¶æ€åæ”¾å›æ± ä¸­
        bean.reset();
        pool.offer(bean);
    }
}
```

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š
> - å¦‚æœé¢‘ç¹åˆ›å»ºï¼Œè€ƒè™‘å¯¹è±¡æ± 
> - å¦‚æœæŒæœ‰å¼•ç”¨ï¼Œä½¿ç”¨å¼±å¼•ç”¨
> - å¦‚æœæœ‰èµ„æºï¼Œå¿…é¡»åŠæ—¶é‡Šæ”¾
> - ç›‘æ§å†…å­˜ä½¿ç”¨ï¼Œè®¾ç½®åˆç†ä¸Šé™

---

## 7. ğŸ¯ å®é™…ä½¿ç”¨åœºæ™¯


### 7.1 é€‚åˆä½¿ç”¨Prototypeçš„åœºæ™¯


**åœºæ™¯1ï¼šæœ‰çŠ¶æ€çš„ä¸šåŠ¡å¯¹è±¡**

```java
@Component
@Scope("prototype")
public class OrderProcessor {
    
    private Order currentOrder;  // æ¯ä¸ªå¤„ç†å™¨å¤„ç†ä¸åŒçš„è®¢å•
    private BigDecimal totalAmount;
    private List<String> errors = new ArrayList<>();
    
    public void process(Order order) {
        this.currentOrder = order;
        // å¤„ç†è®¢å•é€»è¾‘
        calculateTotal();
        validateOrder();
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public void handleOrders(List<Order> orders) {
    for (Order order : orders) {
        // æ¯ä¸ªè®¢å•ç”¨ç‹¬ç«‹çš„å¤„ç†å™¨ï¼ŒçŠ¶æ€éš”ç¦»
        OrderProcessor processor = context.getBean(OrderProcessor.class);
        processor.process(order);
    }
}
```

**åœºæ™¯2ï¼šç”¨æˆ·ä¼šè¯ç›¸å…³å¯¹è±¡**

```java
@Component
@Scope("prototype")
public class ShoppingCart {
    
    private String userId;
    private List<CartItem> items = new ArrayList<>();
    private BigDecimal totalPrice = BigDecimal.ZERO;
    
    public void addItem(CartItem item) {
        items.add(item);
        recalculateTotal();
    }
}

// æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ç‹¬ç«‹çš„è´­ç‰©è½¦
public ShoppingCart getUserCart(String userId) {
    ShoppingCart cart = context.getBean(ShoppingCart.class);
    cart.setUserId(userId);
    return cart;
}
```

**åœºæ™¯3ï¼šçº¿ç¨‹ä¸å®‰å…¨çš„å·¥å…·ç±»**

```java
@Component
@Scope("prototype")
public class DateFormatter {
    
    // SimpleDateFormatæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„
    private SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    
    public String format(Date date) {
        return sdf.format(date);  // æ¯ä¸ªçº¿ç¨‹ç”¨ç‹¬ç«‹çš„å®ä¾‹
    }
}
```

**åœºæ™¯4ï¼šä¸´æ—¶ä»»åŠ¡å¤„ç†å™¨**

```java
@Component
@Scope("prototype")
public class FileUploadTask implements Runnable {
    
    private File file;
    private UploadCallback callback;
    
    public void setFile(File file) {
        this.file = file;
    }
    
    @Override
    public void run() {
        // ä¸Šä¼ é€»è¾‘
        uploadToServer(file);
        callback.onComplete();
    }
}

// æ¯ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ›å»ºç‹¬ç«‹çš„ä»»åŠ¡
public void uploadFiles(List<File> files) {
    ExecutorService executor = Executors.newFixedThreadPool(5);
    
    for (File file : files) {
        FileUploadTask task = context.getBean(FileUploadTask.class);
        task.setFile(file);
        executor.submit(task);
    }
}
```

### 7.2 ä¸é€‚åˆä½¿ç”¨Prototypeçš„åœºæ™¯


**âŒ ä¸é€‚åˆåœºæ™¯1ï¼šæ— çŠ¶æ€çš„æœåŠ¡ç±»**

```java
// åº”è¯¥ç”¨Singleton
@Component  // ä¸éœ€è¦@Scope("prototype")
public class MathService {
    
    // æ— çŠ¶æ€ï¼Œçº¯è®¡ç®—
    public int add(int a, int b) {
        return a + b;
    }
}
```

**âŒ ä¸é€‚åˆåœºæ™¯2ï¼šéœ€è¦å…±äº«æ•°æ®çš„ç¼“å­˜**

```java
// åº”è¯¥ç”¨Singleton
@Component
public class UserCache {
    
    // å…¨å±€å…±äº«çš„ç¼“å­˜ï¼Œå¿…é¡»æ˜¯å•ä¾‹
    private Map<String, User> cache = new ConcurrentHashMap<>();
}
```

**âŒ ä¸é€‚åˆåœºæ™¯3ï¼šé¢‘ç¹åˆ›å»ºçš„é«˜æ€§èƒ½è¦æ±‚å¯¹è±¡**

```java
// è€ƒè™‘ç”¨å¯¹è±¡æ± ä»£æ›¿Prototype
public class DatabaseConnection {
    // åˆ›å»ºæˆæœ¬é«˜ï¼Œåº”è¯¥ç”¨è¿æ¥æ± 
}
```

### 7.3 å…¸å‹åº”ç”¨æ¨¡å¼


**æ¨¡å¼1ï¼šå‘½ä»¤æ¨¡å¼**

```java
@Component
@Scope("prototype")
public class SendEmailCommand implements Command {
    
    private String to;
    private String subject;
    private String content;
    
    @Override
    public void execute() {
        emailService.send(to, subject, content);
    }
}

// æ¯ä¸ªå‘½ä»¤éƒ½æ˜¯ç‹¬ç«‹å®ä¾‹
public void sendEmails(List<EmailData> emails) {
    for (EmailData data : emails) {
        SendEmailCommand cmd = context.getBean(SendEmailCommand.class);
        cmd.setTo(data.getTo());
        cmd.setSubject(data.getSubject());
        cmd.setContent(data.getContent());
        cmd.execute();
    }
}
```

**æ¨¡å¼2ï¼šç­–ç•¥æ¨¡å¼**

```java
@Component
@Scope("prototype")
public class DiscountStrategy {
    
    private Customer customer;
    private Order order;
    
    public BigDecimal calculate() {
        if (customer.isVip()) {
            return order.getTotal().multiply(new BigDecimal("0.8"));
        }
        return order.getTotal();
    }
}
```

**æ¨¡å¼3ï¼šå»ºé€ è€…æ¨¡å¼**

```java
@Component
@Scope("prototype")
public class ReportBuilder {
    
    private Report report = new Report();
    
    public ReportBuilder setTitle(String title) {
        report.setTitle(title);
        return this;
    }
    
    public ReportBuilder addSection(Section section) {
        report.addSection(section);
        return this;
    }
    
    public Report build() {
        return report;
    }
}

// æ¯æ¬¡æ„å»ºæ–°æŠ¥è¡¨éƒ½ç”¨æ–°çš„builder
public Report createReport() {
    ReportBuilder builder = context.getBean(ReportBuilder.class);
    return builder
        .setTitle("æœˆåº¦æŠ¥å‘Š")
        .addSection(salesSection)
        .addSection(financialSection)
        .build();
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Prototypeå®šä¹‰ï¼šæ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºæ–°å®ä¾‹çš„Beanä½œç”¨åŸŸ
ğŸ”¸ åˆ›å»ºæœºåˆ¶ï¼šé€šè¿‡getBeanã€@Lookupã€ObjectFactoryç­‰æ–¹å¼è§¦å‘
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸï¼šåˆå§‹åŒ–ç”±Springç®¡ç†ï¼Œé”€æ¯éœ€è¦æ‰‹åŠ¨å¤„ç†
ğŸ”¸ å†…å­˜ç®¡ç†ï¼šæ³¨æ„å†…å­˜æ³„æ¼ï¼ŒåŠæ—¶é‡Šæ”¾èµ„æº
ğŸ”¸ ä½¿ç”¨åœºæ™¯ï¼šé€‚åˆæœ‰çŠ¶æ€ã€éœ€è¦éš”ç¦»çš„å¯¹è±¡
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ Prototypeä¸Singletonçš„æœ¬è´¨åŒºåˆ«**
```
æ ¸å¿ƒå·®å¼‚ï¼š
- Singletonï¼šæ•´ä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªå®ä¾‹ï¼ŒçŠ¶æ€å…±äº«
- Prototypeï¼šæ¯æ¬¡ä½¿ç”¨éƒ½æ˜¯æ–°å®ä¾‹ï¼ŒçŠ¶æ€éš”ç¦»

é€‰æ‹©ä¾æ®ï¼š
- å¯¹è±¡æœ‰çŠ¶æ€å—ï¼Ÿæœ‰ â†’ Prototypeï¼Œæ—  â†’ Singleton
- éœ€è¦éš”ç¦»å—ï¼Ÿéœ€è¦ â†’ Prototypeï¼Œä¸éœ€è¦ â†’ Singleton
- åˆ›å»ºæˆæœ¬é«˜å—ï¼Ÿé«˜ â†’ è€ƒè™‘å¯¹è±¡æ± ï¼Œä½ â†’ Prototype
```

**ğŸ”¹ ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„å…³é”®ç‚¹**
```
åˆå§‹åŒ–ï¼š
âœ… @PostConstructä¼šæ‰§è¡Œ
âœ… InitializingBean.afterPropertiesSet()ä¼šæ‰§è¡Œ
âœ… ä¾èµ–æ³¨å…¥æ­£å¸¸è¿›è¡Œ

é”€æ¯ï¼š
âŒ @PreDestroyä¸ä¼šæ‰§è¡Œ
âŒ DisposableBean.destroy()ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œ
âœ… éœ€è¦æ‰‹åŠ¨æ¸…ç†èµ„æº
```

**ğŸ”¹ å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ**
```
é™·é˜±1ï¼šå•ä¾‹æ³¨å…¥åŸå‹
é—®é¢˜ï¼š@Autowiredæ³¨å…¥prototypeåˆ°singletonï¼Œåªæ³¨å…¥ä¸€æ¬¡
æ–¹æ¡ˆï¼šç”¨@Lookupã€ObjectFactoryæˆ–ApplicationContextåŠ¨æ€è·å–

é™·é˜±2ï¼šå¿˜è®°é”€æ¯
é—®é¢˜ï¼šprototypeæŒæœ‰èµ„æºï¼Œä¸é”€æ¯å¯¼è‡´æ³„æ¼
æ–¹æ¡ˆï¼šå®ç°AutoCloseableï¼Œç”¨try-with-resources

é™·é˜±3ï¼šå†…å­˜æ³„æ¼
é—®é¢˜ï¼šåˆ›å»ºå¤§é‡å®ä¾‹ä¸é‡Šæ”¾
æ–¹æ¡ˆï¼šåŠæ—¶æ¸…é™¤å¼•ç”¨ã€ä½¿ç”¨å¼±å¼•ç”¨ã€é™åˆ¶æ•°é‡
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
- **ç”µå•†ç³»ç»Ÿ**ï¼šè´­ç‰©è½¦ã€è®¢å•å¤„ç†å™¨ç”¨Prototypeï¼Œç”¨æˆ·éš”ç¦»
- **æ–‡ä»¶å¤„ç†**ï¼šæ¯ä¸ªæ–‡ä»¶ç”¨ç‹¬ç«‹çš„å¤„ç†å™¨ï¼Œé¿å…çŠ¶æ€æ··ä¹±
- **å¤šçº¿ç¨‹ä»»åŠ¡**ï¼šæ¯ä¸ªä»»åŠ¡ç‹¬ç«‹å®ä¾‹ï¼Œå¤©ç„¶çº¿ç¨‹å®‰å…¨
- **è¡¨å•æäº¤**ï¼šæ¯ä¸ªè¡¨å•ç”¨ç‹¬ç«‹çš„éªŒè¯å™¨å’Œå¤„ç†å™¨

**æ¶æ„è®¾è®¡ä»·å€¼**ï¼š
- **çŠ¶æ€éš”ç¦»**ï¼šä¸åŒç”¨æˆ·ã€ä¸åŒè¯·æ±‚çš„çŠ¶æ€å®Œå…¨ç‹¬ç«‹
- **å¹¶å‘å®‰å…¨**ï¼šæ¯ä¸ªçº¿ç¨‹ç”¨ç‹¬ç«‹å®ä¾‹ï¼Œæ— éœ€åŒæ­¥
- **çµæ´»æ‰©å±•**ï¼šå¯ä»¥æ ¹æ®ä¸šåŠ¡åŠ¨æ€åˆ›å»ºæ‰€éœ€å¯¹è±¡
- **èµ„æºæ§åˆ¶**ï¼šé…åˆå¯¹è±¡æ± å®ç°èµ„æºå¤ç”¨å’Œé™æµ

### 8.4 æœ€ä½³å®è·µå»ºè®®


```
âœ… æ¨èåšæ³•ï¼š

1. æ˜ç¡®éœ€æ±‚
   - æœ‰çŠ¶æ€ä¸”éœ€è¦éš”ç¦» â†’ ç”¨Prototype
   - æ— çŠ¶æ€æˆ–å…±äº«çŠ¶æ€ â†’ ç”¨Singleton

2. æ­£ç¡®è·å–
   - ä»Singletonä¸­è·å– â†’ ç”¨@Lookupæˆ–ApplicationContext
   - ä»Prototypeä¸­è·å– â†’ ç›´æ¥@Autowiredå³å¯

3. ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
   - æœ‰èµ„æº â†’ å®ç°AutoCloseable
   - æ— èµ„æº â†’ ä½¿ç”¨å®Œç½®nullå¸®åŠ©GC

4. æ§åˆ¶å†…å­˜
   - é¢‘ç¹åˆ›å»º â†’ è€ƒè™‘å¯¹è±¡æ± 
   - é•¿æœŸæŒæœ‰ â†’ ä½¿ç”¨å¼±å¼•ç”¨
   - è®¾ç½®ä¸Šé™ â†’ é˜²æ­¢æ— é™åˆ›å»º

5. ç›‘æ§ä¼˜åŒ–
   - ç›‘æ§å†…å­˜ä½¿ç”¨
   - ç»Ÿè®¡åˆ›å»ºæ¬¡æ•°
   - æ£€æŸ¥æ˜¯å¦æœ‰æ³„æ¼
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- PrototypeæŒ‰éœ€åˆ›å»ºï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°å®ä¾‹
- åˆå§‹åŒ–Springç®¡ï¼Œé”€æ¯è¦è‡ªå·±å¹²  
- çŠ¶æ€è¦éš”ç¦»ï¼Œå°±ç”¨Prototypeå¥½
- å•ä¾‹æ³¨å…¥åŸå‹ï¼Œè®°å¾—ç”¨Lookupæ‰¾
- å†…å­˜è¦å°å¿ƒï¼ŒåŠæ—¶é‡Šæ”¾å¾ˆé‡è¦