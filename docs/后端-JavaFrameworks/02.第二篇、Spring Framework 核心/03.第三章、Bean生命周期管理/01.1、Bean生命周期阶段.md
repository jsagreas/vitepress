---
title: 1ã€Beanç”Ÿå‘½å‘¨æœŸé˜¶æ®µ
---
## ğŸ“š ç›®å½•

1. [Beanç”Ÿå‘½å‘¨æœŸæ¦‚è¿°](#1-Beanç”Ÿå‘½å‘¨æœŸæ¦‚è¿°)
2. [å®ä¾‹åŒ–é˜¶æ®µ](#2-å®ä¾‹åŒ–é˜¶æ®µ)
3. [å±æ€§å¡«å……é˜¶æ®µ](#3-å±æ€§å¡«å……é˜¶æ®µ)
4. [åˆå§‹åŒ–é˜¶æ®µ](#4-åˆå§‹åŒ–é˜¶æ®µ)
5. [ä½¿ç”¨é˜¶æ®µ](#5-ä½¿ç”¨é˜¶æ®µ)
6. [é”€æ¯é˜¶æ®µ](#6-é”€æ¯é˜¶æ®µ)
7. [å®¹å™¨ç”Ÿå‘½å‘¨æœŸ](#7-å®¹å™¨ç”Ÿå‘½å‘¨æœŸ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ± Beanç”Ÿå‘½å‘¨æœŸæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Beanç”Ÿå‘½å‘¨æœŸ


**é€šä¿—ç†è§£**ï¼šBeançš„ç”Ÿå‘½å‘¨æœŸå°±åƒä¸€ä¸ªäººçš„æˆé•¿å†ç¨‹ - ä»å‡ºç”Ÿã€æˆé•¿ã€å·¥ä½œåˆ°é€€ä¼‘ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ç‰¹å®šçš„äº‹æƒ…è¦åšã€‚

```
ğŸ­ ç±»æ¯”ç†è§£ï¼š
äººçš„ä¸€ç”Ÿ              Beançš„ç”Ÿå‘½å‘¨æœŸ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¶ å‡ºç”Ÿ               å®ä¾‹åŒ–ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰
ğŸ“š ä¸Šå­¦ï¼ˆè·å–çŸ¥è¯†ï¼‰     å±æ€§å¡«å……ï¼ˆæ³¨å…¥ä¾èµ–ï¼‰
ğŸ“ æ¯•ä¸šå‡†å¤‡           åˆå§‹åŒ–ï¼ˆå‡†å¤‡å·¥ä½œï¼‰
ğŸ’¼ å·¥ä½œ               ä½¿ç”¨é˜¶æ®µï¼ˆæä¾›æœåŠ¡ï¼‰
ğŸ‘´ é€€ä¼‘               é”€æ¯ï¼ˆé‡Šæ”¾èµ„æºï¼‰
```

**ğŸ”‘ ä¸ºä»€ä¹ˆè¦äº†è§£ç”Ÿå‘½å‘¨æœŸï¼Ÿ**
- çŸ¥é“åœ¨ä»€ä¹ˆæ—¶æœºåšä»€ä¹ˆäº‹æƒ…
- ç†è§£Springçš„å·¥ä½œåŸç†
- è§£å†³å®é™…å¼€å‘ä¸­çš„é—®é¢˜
- æŒæ¡èµ„æºç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–

### 1.2 ç”Ÿå‘½å‘¨æœŸå…¨æ™¯å›¾


Beanä»åˆ›å»ºåˆ°é”€æ¯è¦ç»å†å¤šä¸ªå…³é”®é˜¶æ®µï¼š

```
Beanç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Springå®¹å™¨å¯åŠ¨                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬1é˜¶æ®µï¼šå®ä¾‹åŒ–ï¼ˆInstantiationï¼‰        â”‚
â”‚  â€¢ è¯»å–Beanå®šä¹‰                          â”‚
â”‚  â€¢ è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬2é˜¶æ®µï¼šå±æ€§å¡«å……ï¼ˆPopulateï¼‰           â”‚
â”‚  â€¢ æ³¨å…¥ä¾èµ–çš„Bean                        â”‚
â”‚  â€¢ è®¾ç½®å±æ€§å€¼                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬3é˜¶æ®µï¼šåˆå§‹åŒ–ï¼ˆInitializationï¼‰       â”‚
â”‚  â€¢ æ‰§è¡Œå„ç§åˆå§‹åŒ–å›è°ƒ                    â”‚
â”‚  â€¢ å®ŒæˆBeançš„å‡†å¤‡å·¥ä½œ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬4é˜¶æ®µï¼šä½¿ç”¨ï¼ˆIn Useï¼‰                 â”‚
â”‚  â€¢ Beanå¤„äºå°±ç»ªçŠ¶æ€                      â”‚
â”‚  â€¢ æä¾›ä¸šåŠ¡æœåŠ¡                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬5é˜¶æ®µï¼šé”€æ¯ï¼ˆDestructionï¼‰            â”‚
â”‚  â€¢ æ‰§è¡Œæ¸…ç†å·¥ä½œ                          â”‚
â”‚  â€¢ é‡Šæ”¾èµ„æº                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ç”Ÿå‘½å‘¨æœŸçš„æ‰©å±•ç‚¹


Springæä¾›äº†å¾ˆå¤š"é’©å­"è®©æˆ‘ä»¬å¯ä»¥åœ¨ç‰¹å®šæ—¶åˆ»æ’å…¥è‡ªå·±çš„é€»è¾‘ï¼š

```
ğŸ¯ å¸¸ç”¨æ‰©å±•æ¥å£ï¼š

åˆå§‹åŒ–ç›¸å…³ï¼š
â€¢ InitializingBeanæ¥å£
â€¢ @PostConstructæ³¨è§£
â€¢ init-methodé…ç½®

é”€æ¯ç›¸å…³ï¼š
â€¢ DisposableBeanæ¥å£  
â€¢ @PreDestroyæ³¨è§£
â€¢ destroy-methodé…ç½®

åå¤„ç†å™¨ï¼š
â€¢ BeanPostProcessorï¼ˆBeanåå¤„ç†å™¨ï¼‰
â€¢ InstantiationAwareBeanPostProcessorï¼ˆå®ä¾‹åŒ–æ„ŸçŸ¥åå¤„ç†å™¨ï¼‰
```

---

## 2. ğŸ—ï¸ å®ä¾‹åŒ–é˜¶æ®µ


### 2.1 å®ä¾‹åŒ–çš„æœ¬è´¨


**æ˜¯ä»€ä¹ˆï¼Ÿ**
å®ä¾‹åŒ–å°±æ˜¯"æŠŠBeanä»å›¾çº¸å˜æˆå®ç‰©"çš„è¿‡ç¨‹ï¼Œå°±åƒç›–æˆ¿å­è¦å…ˆæ‰“åœ°åŸºä¸€æ ·ã€‚

```
ğŸ“‹ å®ä¾‹åŒ–å‰çš„å‡†å¤‡ï¼š

ç¬¬1æ­¥ï¼šè¯»å–é…ç½®
â€¢ ä»XML/æ³¨è§£/Javaé…ç½®ä¸­è¯»å–Beanå®šä¹‰
â€¢ ç¡®å®šBeançš„ç±»å‹ã€ä½œç”¨åŸŸç­‰ä¿¡æ¯

ç¬¬2æ­¥ï¼šç¡®å®šå®ä¾‹åŒ–æ–¹å¼
â€¢ æ„é€ æ–¹æ³•å®ä¾‹åŒ– â† æœ€å¸¸ç”¨
â€¢ å·¥å‚æ–¹æ³•å®ä¾‹åŒ–
â€¢ FactoryBeanæ–¹å¼

ç¬¬3æ­¥ï¼šåˆ›å»ºå¯¹è±¡
â€¢ è°ƒç”¨æ„é€ æ–¹æ³•
â€¢ åˆ†é…å†…å­˜ç©ºé—´
â€¢ å¯¹è±¡å¼•ç”¨å‡†å¤‡å°±ç»ª
```

### 2.2 æ„é€ æ–¹æ³•çš„æ‰§è¡Œ


è¿™æ˜¯BeançœŸæ­£è¢«åˆ›å»ºçš„æ—¶åˆ»ï¼š

```java
@Component
public class UserService {
    
    // æ— å‚æ„é€ ï¼ˆSpringé»˜è®¤ä½¿ç”¨ï¼‰
    public UserService() {
        System.out.println("1. UserServiceæ„é€ æ–¹æ³•æ‰§è¡Œ");
        // æ­¤æ—¶å¯¹è±¡åˆšè¢«åˆ›å»ºï¼Œä¾èµ–è¿˜æœªæ³¨å…¥ï¼
    }
    
    // æœ‰å‚æ„é€ ï¼ˆæ„é€ å™¨æ³¨å…¥ï¼‰
    @Autowired
    public UserService(UserRepository userRepository) {
        System.out.println("1. UserServiceæ„é€ æ–¹æ³•æ‰§è¡Œï¼ˆå¸¦å‚æ•°ï¼‰");
        // è¿™ç§æ–¹å¼åœ¨æ„é€ æ—¶å°±æ³¨å…¥äº†ä¾èµ–
    }
}
```

**ğŸ’¡ æ–°æ‰‹è¦ç‚¹**ï¼š
- æ„é€ æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡åˆšè¢«åˆ›å»º
- æ­¤æ—¶å±æ€§è¿˜æ˜¯é»˜è®¤å€¼ï¼ˆé™¤äº†æ„é€ å™¨æ³¨å…¥çš„ï¼‰
- ä¸è¦åœ¨æ„é€ æ–¹æ³•ä¸­åšå¤æ‚æ“ä½œ
- ä¸è¦åœ¨æ„é€ æ–¹æ³•ä¸­ä½¿ç”¨æœªæ³¨å…¥çš„ä¾èµ–

### 2.3 å®ä¾‹åŒ–åçš„åå¤„ç†


Springæä¾›äº†å®ä¾‹åŒ–åçš„æ‰©å±•ç‚¹ï¼š

```java
@Component
public class MyInstantiationProcessor 
    implements InstantiationAwareBeanPostProcessor {
    
    @Override
    public Object postProcessBeforeInstantiation(
        Class<?> beanClass, String beanName) {
        
        System.out.println("Beanå®ä¾‹åŒ–ä¹‹å‰ï¼š" + beanName);
        // å¯ä»¥è¿”å›ä»£ç†å¯¹è±¡æ›¿ä»£åŸå§‹Bean
        return null; // è¿”å›nullç»§ç»­æ­£å¸¸å®ä¾‹åŒ–
    }
    
    @Override
    public boolean postProcessAfterInstantiation(
        Object bean, String beanName) {
        
        System.out.println("Beanå®ä¾‹åŒ–ä¹‹åï¼š" + beanName);
        // è¿”å›trueç»§ç»­å±æ€§å¡«å……ï¼Œfalseè·³è¿‡
        return true;
    }
}
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**ï¼š
- AOPä»£ç†çš„åˆ›å»º
- ç‰¹æ®ŠBeançš„å®šåˆ¶åŒ–å¤„ç†
- æ¡ä»¶æ€§çš„Beanåˆ›å»ºæ§åˆ¶

---

## 3. ğŸ“¦ å±æ€§å¡«å……é˜¶æ®µ


### 3.1 å±æ€§å¡«å……çš„å«ä¹‰


**é€šä¿—è§£é‡Š**ï¼šå¯¹è±¡å·²ç»åˆ›å»ºå¥½äº†ï¼Œä½†è¿˜æ˜¯"ç©ºå£³å­"ï¼Œéœ€è¦æŠŠå„ç§ä¾èµ–å’Œé…ç½®å¡«å……è¿›å»ï¼Œå°±åƒç»™æ–°æˆ¿å­è£…ä¿®å’Œæ·»ç½®å®¶å…·ã€‚

```
ğŸ  æˆ¿å­è£…ä¿®ç±»æ¯”ï¼š

æ¯›å¯æˆ¿ï¼ˆåˆšå®ä¾‹åŒ–çš„Beanï¼‰
    â†“
å®‰è£…æ°´ç”µï¼ˆæ³¨å…¥å¿…è¦çš„ä¾èµ–ï¼‰
    â†“  
æ·»ç½®å®¶å…·ï¼ˆè®¾ç½®å±æ€§å€¼ï¼‰
    â†“
ç²¾è£…æˆ¿ï¼ˆå±æ€§å¡«å……å®Œæˆçš„Beanï¼‰
```

### 3.2 ä¾èµ–æ³¨å…¥çš„ä¸‰ç§æ–¹å¼


**æ–¹å¼ä¸€ï¼šå­—æ®µæ³¨å…¥**ï¼ˆæœ€å¸¸è§ä½†ä¸æ¨èï¼‰
```java
@Component
public class OrderService {
    
    @Autowired
    private UserService userService; // ç›´æ¥åœ¨å­—æ®µä¸Šæ³¨å…¥
    
    // Springä¼šé€šè¿‡åå°„è®¾ç½®è¿™ä¸ªå­—æ®µçš„å€¼
}
```

**æ–¹å¼äºŒï¼šSetteræ³¨å…¥**ï¼ˆçµæ´»ä½†è¾ƒå°‘ç”¨ï¼‰
```java
@Component
public class OrderService {
    
    private UserService userService;
    
    @Autowired
    public void setUserService(UserService userService) {
        System.out.println("2. æ‰§è¡Œsetteræ³¨å…¥");
        this.userService = userService;
    }
}
```

**æ–¹å¼ä¸‰ï¼šæ„é€ å™¨æ³¨å…¥**ï¼ˆå®˜æ–¹æ¨èâœ…ï¼‰
```java
@Component
public class OrderService {
    
    private final UserService userService;
    
    // åªæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•æ—¶@Autowiredå¯ä»¥çœç•¥
    @Autowired
    public OrderService(UserService userService) {
        System.out.println("2. æ„é€ å™¨æ³¨å…¥ï¼ˆåœ¨å®ä¾‹åŒ–é˜¶æ®µå®Œæˆï¼‰");
        this.userService = userService;
    }
}
```

**ğŸ“Š ä¸‰ç§æ–¹å¼å¯¹æ¯”**ï¼š

| æ³¨å…¥æ–¹å¼ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **æ¨èåº¦** |
|---------|---------|---------|----------|
| **å­—æ®µæ³¨å…¥** | `ä»£ç ç®€æ´` | `ä¸èƒ½ç”¨finalã€éš¾ä»¥æµ‹è¯•ã€éšè—ä¾èµ–` | â­â­â˜†â˜†â˜† |
| **Setteræ³¨å…¥** | `å¯é€‰ä¾èµ–ã€å¯å˜ä¾èµ–` | `æ— æ³•ä¿è¯ä¾èµ–å®Œæ•´æ€§` | â­â­â­â˜†â˜† |
| **æ„é€ å™¨æ³¨å…¥** | `ä¾èµ–æ˜ç¡®ã€æ˜“æµ‹è¯•ã€å¯ç”¨final` | `ä»£ç ç¨å¤š` | â­â­â­â­â­ |

### 3.3 å±æ€§å¡«å……çš„è¿‡ç¨‹


```
å±æ€§å¡«å……è¯¦ç»†æµç¨‹ï¼š

Step 1ï¼šæ”¶é›†éœ€è¦æ³¨å…¥çš„å±æ€§
    â†“
æ‰¾åˆ°æ‰€æœ‰æ ‡è®°äº†@Autowired/@Resourceçš„åœ°æ–¹

Step 2ï¼šè§£æä¾èµ–
    â†“
ç¡®å®šæ¯ä¸ªä¾èµ–éœ€è¦æ³¨å…¥ä»€ä¹ˆBean

Step 3ï¼šè·å–ä¾èµ–Bean
    â†“
ä»å®¹å™¨ä¸­è·å–ï¼ˆå¦‚æœä¸å­˜åœ¨ä¼šå…ˆåˆ›å»ºï¼‰

Step 4ï¼šæ‰§è¡Œæ³¨å…¥
    â†“
â€¢ å­—æ®µæ³¨å…¥ï¼šé€šè¿‡åå°„è®¾ç½®å­—æ®µå€¼
â€¢ Setteræ³¨å…¥ï¼šè°ƒç”¨setteræ–¹æ³•
â€¢ æ„é€ å™¨æ³¨å…¥ï¼šåœ¨å®ä¾‹åŒ–æ—¶å°±å®Œæˆ

Step 5ï¼šå±æ€§å¡«å……å®Œæˆ
    â†“
Beançš„ä¾èµ–éƒ½å·²å°±ç»ª
```

### 3.4 å¾ªç¯ä¾èµ–é—®é¢˜


**ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ**
Aä¾èµ–Bï¼ŒBåˆä¾èµ–Aï¼Œå°±åƒ"é¸¡ç”Ÿè›‹ï¼Œè›‹ç”Ÿé¸¡"çš„é—®é¢˜ã€‚

```
ğŸ”„ å¾ªç¯ä¾èµ–ç¤ºä¾‹ï¼š

@Component
class A {
    @Autowired
    private B b;  // Aä¾èµ–B
}

@Component  
class B {
    @Autowired
    private A a;  // Bä¾èµ–A
}

é—®é¢˜ï¼š
â€¢ åˆ›å»ºAéœ€è¦B
â€¢ åˆ›å»ºBéœ€è¦A
â€¢ è°å…ˆåˆ›å»ºï¼Ÿ
```

**Springçš„è§£å†³æ–¹æ¡ˆ**ï¼š
- æ„é€ å™¨å¾ªç¯ä¾èµ–ï¼šæ— æ³•è§£å†³ï¼Œä¼šæŠ¥é”™âŒ
- å­—æ®µæ³¨å…¥å¾ªç¯ä¾èµ–ï¼šä¸‰çº§ç¼“å­˜è§£å†³âœ…
- å•ä¾‹Beanå¯ä»¥è§£å†³ï¼ŒåŸå‹Beanä¸è¡Œ

**ğŸ’¡ æ–°æ‰‹å»ºè®®**ï¼š
- å°½é‡é¿å…å¾ªç¯ä¾èµ–
- ä¼˜å…ˆä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼ˆä¼šæå‰å‘ç°å¾ªç¯ä¾èµ–ï¼‰
- å¦‚æœç¡®å®éœ€è¦ï¼Œä½¿ç”¨å­—æ®µæ³¨å…¥æˆ–`@Lazy`æ³¨è§£

---

## 4. ğŸ¯ åˆå§‹åŒ–é˜¶æ®µ


### 4.1 åˆå§‹åŒ–çš„ä½œç”¨


**ä¸ºä»€ä¹ˆéœ€è¦åˆå§‹åŒ–ï¼Ÿ**
Beanè™½ç„¶åˆ›å»ºå®Œæˆã€ä¾èµ–ä¹Ÿæ³¨å…¥äº†ï¼Œä½†å¯èƒ½è¿˜éœ€è¦ä¸€äº›"å‡†å¤‡å·¥ä½œ"æ‰èƒ½æ­£å¼ä½¿ç”¨ï¼Œå°±åƒæ–°å‘˜å·¥å…¥èŒåè¦åŸ¹è®­ä¸€æ ·ã€‚

```
ğŸ“ æ–°å‘˜å·¥å…¥èŒç±»æ¯”ï¼š

å…¥èŒå½“å¤©ï¼ˆå®ä¾‹åŒ–ï¼‰
    â†“
åˆ†é…å·¥ä½å’Œç”µè„‘ï¼ˆå±æ€§å¡«å……ï¼‰
    â†“
æ–°äººåŸ¹è®­ï¼ˆåˆå§‹åŒ–ï¼‰â† è¿™ä¸€æ­¥ï¼
    â†“
æ­£å¼ä¸Šå²—ï¼ˆå¼€å§‹ä½¿ç”¨ï¼‰
```

**ğŸ”§ åˆå§‹åŒ–é˜¶æ®µåšä»€ä¹ˆï¼Ÿ**
- å»ºç«‹æ•°æ®åº“è¿æ¥
- åŠ è½½é…ç½®æ–‡ä»¶
- ç¼“å­˜é¢„çƒ­
- æ³¨å†Œç›‘å¬å™¨
- éªŒè¯é…ç½®çš„æ­£ç¡®æ€§

### 4.2 åˆå§‹åŒ–çš„ä¸‰ç§æ–¹å¼


**æ–¹å¼ä¸€ï¼š@PostConstructæ³¨è§£**ï¼ˆæ¨èâœ…ï¼‰
```java
@Component
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    @PostConstruct  // JSR-250æ ‡å‡†æ³¨è§£
    public void init() {
        System.out.println("3. @PostConstructåˆå§‹åŒ–æ–¹æ³•");
        // æ­¤æ—¶ä¾èµ–å·²æ³¨å…¥ï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨
        System.out.println("ç”¨æˆ·æ€»æ•°ï¼š" + userRepository.count());
    }
}
```

**æ–¹å¼äºŒï¼šInitializingBeanæ¥å£**
```java
@Component
public class UserService implements InitializingBean {
    
    @Autowired
    private UserRepository userRepository;
    
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("3. InitializingBean.afterPropertiesSet()");
        // å±æ€§è®¾ç½®å®Œæˆåæ‰§è¡Œ
    }
}
```

**æ–¹å¼ä¸‰ï¼šè‡ªå®šä¹‰init-method**
```java
@Component
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    // åœ¨é…ç½®ä¸­æŒ‡å®šinit-method="customInit"
    public void customInit() {
        System.out.println("3. è‡ªå®šä¹‰initæ–¹æ³•");
    }
}

// æˆ–è€…ä½¿ç”¨@Beanæ³¨è§£
@Configuration
public class AppConfig {
    
    @Bean(initMethod = "customInit")
    public UserService userService() {
        return new UserService();
    }
}
```

**ğŸ“Š ä¸‰ç§æ–¹å¼æ‰§è¡Œé¡ºåº**ï¼š
```
æ‰§è¡Œé¡ºåºï¼ˆä»æ—©åˆ°æ™šï¼‰ï¼š

1. @PostConstruct        â† æœ€å…ˆæ‰§è¡Œ
        â†“
2. InitializingBean      â† å…¶æ¬¡
        â†“
3. init-method           â† æœ€åæ‰§è¡Œ
```

### 4.3 Beanåå¤„ç†å™¨çš„ä»‹å…¥


åœ¨åˆå§‹åŒ–å‰åï¼ŒSpringä¼šè°ƒç”¨BeanPostProcessorï¼š

```java
@Component
public class MyBeanPostProcessor implements BeanPostProcessor {
    
    @Override
    public Object postProcessBeforeInitialization(
        Object bean, String beanName) {
        
        System.out.println("åˆå§‹åŒ–ä¹‹å‰ï¼š" + beanName);
        // å¯ä»¥å¯¹Beanè¿›è¡Œä¿®æ”¹
        return bean;
    }
    
    @Override
    public Object postProcessAfterInitialization(
        Object bean, String beanName) {
        
        System.out.println("åˆå§‹åŒ–ä¹‹åï¼š" + beanName);
        // å¯ä»¥è¿”å›ä»£ç†å¯¹è±¡
        return bean;
    }
}
```

**å®Œæ•´çš„åˆå§‹åŒ–æµç¨‹**ï¼š
```
åˆå§‹åŒ–é˜¶æ®µè¯¦ç»†è¿‡ç¨‹ï¼š

1. postProcessBeforeInitializationï¼ˆå‰ç½®å¤„ç†ï¼‰
    â†“
2. @PostConstructæ–¹æ³•
    â†“
3. InitializingBean.afterPropertiesSet()
    â†“  
4. init-methodæ–¹æ³•
    â†“
5. postProcessAfterInitializationï¼ˆåç½®å¤„ç†ï¼‰â† AOPä»£ç†åœ¨è¿™é‡Œåˆ›å»º
    â†“
Beanåˆå§‹åŒ–å®Œæˆ
```

### 4.4 å®é™…åº”ç”¨ç¤ºä¾‹


**åœºæ™¯ï¼šæ•°æ®åº“è¿æ¥æ± åˆå§‹åŒ–**
```java
@Component
public class DatabasePool {
    
    @Value("${db.url}")
    private String dbUrl;
    
    private Connection connection;
    
    @PostConstruct
    public void initPool() {
        System.out.println("åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ± ...");
        // å»ºç«‹æ•°æ®åº“è¿æ¥
        this.connection = createConnection(dbUrl);
        System.out.println("è¿æ¥æ± åˆå§‹åŒ–å®Œæˆ");
    }
    
    private Connection createConnection(String url) {
        // å®é™…çš„è¿æ¥åˆ›å»ºé€»è¾‘
        return null;
    }
}
```

**åœºæ™¯ï¼šç¼“å­˜é¢„çƒ­**
```java
@Component
public class CacheWarmer {
    
    @Autowired
    private DataService dataService;
    
    private Map<String, Object> cache = new HashMap<>();
    
    @PostConstruct
    public void warmUp() {
        System.out.println("å¼€å§‹ç¼“å­˜é¢„çƒ­...");
        // æå‰åŠ è½½çƒ­ç‚¹æ•°æ®
        cache.put("hotData", dataService.loadHotData());
        System.out.println("ç¼“å­˜é¢„çƒ­å®Œæˆ");
    }
}
```

---

## 5. ğŸ’¼ ä½¿ç”¨é˜¶æ®µ


### 5.1 Beançš„å°±ç»ªçŠ¶æ€


**ä½¿ç”¨é˜¶æ®µçš„ç‰¹ç‚¹**ï¼š
è¿™æ˜¯Beançš„"é»„é‡‘æ—¶æœŸ"ï¼Œå®ƒå·²ç»å®Œå…¨å‡†å¤‡å¥½ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬æä¾›æœåŠ¡äº†ã€‚

```
ğŸ¯ ä½¿ç”¨é˜¶æ®µçš„BeançŠ¶æ€ï¼š

âœ… å¯¹è±¡å·²åˆ›å»º
âœ… ä¾èµ–å·²æ³¨å…¥  
âœ… åˆå§‹åŒ–å·²å®Œæˆ
âœ… åå¤„ç†å™¨å·²æ‰§è¡Œ
âœ… ä»£ç†å·²ç”Ÿæˆï¼ˆå¦‚æœéœ€è¦ï¼‰

æ­¤æ—¶Beanå¤„äºï¼š
â€¢ å®Œå…¨å¯ç”¨çŠ¶æ€
â€¢ æä¾›ä¸šåŠ¡æœåŠ¡
â€¢ ç­‰å¾…è¢«è°ƒç”¨
```

### 5.2 ä½œç”¨åŸŸå¯¹ä½¿ç”¨çš„å½±å“


ä¸åŒä½œç”¨åŸŸçš„Beanï¼Œä½¿ç”¨æ–¹å¼ä¸åŒï¼š

**å•ä¾‹Beanï¼ˆSingletonï¼‰- é»˜è®¤**
```java
@Component  // é»˜è®¤æ˜¯å•ä¾‹
public class UserService {
    
    private int counter = 0;  // âš ï¸ å…±äº«çŠ¶æ€ï¼Œè¦å°å¿ƒï¼
    
    public void process() {
        counter++;  // æ‰€æœ‰è¯·æ±‚å…±äº«è¿™ä¸ªè®¡æ•°å™¨
        System.out.println("å¤„ç†æ¬¡æ•°ï¼š" + counter);
    }
}

// ä½¿ç”¨
@Autowired
private UserService userService;  // æ¯æ¬¡æ³¨å…¥çš„æ˜¯åŒä¸€ä¸ªå®ä¾‹
```

**åŸå‹Beanï¼ˆPrototypeï¼‰**
```java
@Component
@Scope("prototype")  // æ¯æ¬¡è·å–éƒ½æ˜¯æ–°å®ä¾‹
public class OrderProcessor {
    
    private Order currentOrder;  // âœ… å¯ä»¥å®‰å…¨ä½¿ç”¨å®ä¾‹å˜é‡
    
    public void process(Order order) {
        this.currentOrder = order;
        // å¤„ç†è®¢å•...
    }
}

// ä½¿ç”¨æ–¹å¼ä¸€ï¼šç›´æ¥æ³¨å…¥ï¼ˆä¸æ¨èï¼‰
@Autowired
private OrderProcessor processor;  // âš ï¸ æ³¨å…¥ä¸€æ¬¡åå°±å›ºå®šäº†

// ä½¿ç”¨æ–¹å¼äºŒï¼šApplicationContextè·å–ï¼ˆæ¨èï¼‰
@Autowired
private ApplicationContext context;

public void handleOrder(Order order) {
    OrderProcessor processor = context.getBean(OrderProcessor.class);
    processor.process(order);  // æ¯æ¬¡éƒ½æ˜¯æ–°å®ä¾‹
}
```

### 5.3 Beançš„è·å–æ–¹å¼


**æ–¹å¼ä¸€ï¼šä¾èµ–æ³¨å…¥**ï¼ˆæœ€å¸¸ç”¨ï¼‰
```java
@Service
public class OrderService {
    
    @Autowired
    private UserService userService;  // Springè‡ªåŠ¨æ³¨å…¥
    
    public void createOrder() {
        userService.getUserInfo();  // ç›´æ¥ä½¿ç”¨
    }
}
```

**æ–¹å¼äºŒï¼šApplicationContextæ‰‹åŠ¨è·å–**
```java
@Service
public class OrderService {
    
    @Autowired
    private ApplicationContext context;
    
    public void createOrder() {
        // æŒ‰ç±»å‹è·å–
        UserService userService = context.getBean(UserService.class);
        
        // æŒ‰åç§°è·å–
        UserService userService2 = 
            (UserService) context.getBean("userService");
        
        // æŒ‰ç±»å‹å’Œåç§°è·å–
        UserService userService3 = 
            context.getBean("userService", UserService.class);
    }
}
```

**æ–¹å¼ä¸‰ï¼šObjectProviderå»¶è¿Ÿè·å–**
```java
@Service
public class OrderService {
    
    @Autowired
    private ObjectProvider<UserService> userServiceProvider;
    
    public void createOrder() {
        // å»¶è¿Ÿè·å–ï¼Œä½¿ç”¨æ—¶æ‰ä»å®¹å™¨ä¸­å–
        UserService userService = userServiceProvider.getObject();
        userService.getUserInfo();
        
        // å¦‚æœBeanä¸å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™
        userServiceProvider.ifAvailable(service -> {
            service.getUserInfo();
        });
    }
}
```

### 5.4 ä½¿ç”¨é˜¶æ®µçš„æ³¨æ„äº‹é¡¹


**âš ï¸ çº¿ç¨‹å®‰å…¨é—®é¢˜**
```java
@Component  // å•ä¾‹Bean
public class UserService {
    
    // âŒ é”™è¯¯ï¼šå®ä¾‹å˜é‡åœ¨å¤šçº¿ç¨‹ä¸‹ä¸å®‰å…¨
    private User currentUser;
    
    public void processUser(User user) {
        this.currentUser = user;  // ä¼šè¢«å…¶ä»–çº¿ç¨‹è¦†ç›–ï¼
        // ... å¤„ç†é€»è¾‘
    }
    
    // âœ… æ­£ç¡®ï¼šä½¿ç”¨å±€éƒ¨å˜é‡
    public void processUserSafely(User user) {
        User localUser = user;  // çº¿ç¨‹å®‰å…¨
        // ... å¤„ç†é€»è¾‘
    }
    
    // âœ… æ­£ç¡®ï¼šæ— çŠ¶æ€æœåŠ¡
    @Autowired
    private UserRepository repository;  // ä¾èµ–æ˜¯å®‰å…¨çš„
    
    public User getUser(Long id) {
        return repository.findById(id);  // çº¿ç¨‹å®‰å…¨
    }
}
```

**ğŸ’¡ æœ€ä½³å®è·µ**ï¼š
- å•ä¾‹Beanå°½é‡è®¾è®¡æˆæ— çŠ¶æ€çš„
- é¿å…åœ¨å•ä¾‹Beanä¸­ä½¿ç”¨å¯å˜çš„å®ä¾‹å˜é‡
- å¦‚æœå¿…é¡»æœ‰çŠ¶æ€ï¼Œè€ƒè™‘ä½¿ç”¨åŸå‹ä½œç”¨åŸŸ
- æˆ–è€…ä½¿ç”¨ThreadLocalä¿è¯çº¿ç¨‹å®‰å…¨

---

## 6. ğŸ”š é”€æ¯é˜¶æ®µ


### 6.1 ä»€ä¹ˆæ—¶å€™é”€æ¯Bean


**è§¦å‘é”€æ¯çš„æ—¶æœº**ï¼š

```
Beané”€æ¯çš„å‡ ç§æƒ…å†µï¼š

1ï¸âƒ£ å®¹å™¨å…³é—­æ—¶
   â€¢ Springåº”ç”¨æ­£å¸¸å…³é—­
   â€¢ å•ä¾‹Beanä¼šè¢«é”€æ¯

2ï¸âƒ£ æ‰‹åŠ¨ç§»é™¤Bean
   â€¢ ä»å®¹å™¨ä¸­ç§»é™¤æŸä¸ªBean
   â€¢ è¾ƒå°‘è§

3ï¸âƒ£ ä½œç”¨åŸŸç»“æŸ
   â€¢ Requestä½œç”¨åŸŸï¼šè¯·æ±‚ç»“æŸ
   â€¢ Sessionä½œç”¨åŸŸï¼šä¼šè¯ç»“æŸ
   â€¢ åŸå‹Beanï¼šä¸å½’å®¹å™¨ç®¡ç†ï¼Œä¸ä¼šè‡ªåŠ¨é”€æ¯
```

### 6.2 é”€æ¯çš„ä¸‰ç§æ–¹å¼


**æ–¹å¼ä¸€ï¼š@PreDestroyæ³¨è§£**ï¼ˆæ¨èâœ…ï¼‰
```java
@Component
public class DatabasePool {
    
    private Connection connection;
    
    @PreDestroy  // JSR-250æ ‡å‡†æ³¨è§£
    public void cleanup() {
        System.out.println("5. @PreDestroyé”€æ¯æ–¹æ³•");
        if (connection != null) {
            try {
                connection.close();
                System.out.println("æ•°æ®åº“è¿æ¥å·²å…³é—­");
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
}
```

**æ–¹å¼äºŒï¼šDisposableBeanæ¥å£**
```java
@Component
public class DatabasePool implements DisposableBean {
    
    private Connection connection;
    
    @Override
    public void destroy() throws Exception {
        System.out.println("5. DisposableBean.destroy()");
        if (connection != null) {
            connection.close();
        }
    }
}
```

**æ–¹å¼ä¸‰ï¼šè‡ªå®šä¹‰destroy-method**
```java
@Component
public class DatabasePool {
    
    private Connection connection;
    
    public void customDestroy() {
        System.out.println("5. è‡ªå®šä¹‰destroyæ–¹æ³•");
        // æ¸…ç†èµ„æº...
    }
}

// é…ç½®ä¸­æŒ‡å®š
@Configuration
public class AppConfig {
    
    @Bean(destroyMethod = "customDestroy")
    public DatabasePool databasePool() {
        return new DatabasePool();
    }
}
```

**ğŸ“Š æ‰§è¡Œé¡ºåº**ï¼š
```
é”€æ¯æ–¹æ³•æ‰§è¡Œé¡ºåºï¼ˆä»æ—©åˆ°æ™šï¼‰ï¼š

1. @PreDestroy           â† æœ€å…ˆæ‰§è¡Œ
        â†“
2. DisposableBean        â† å…¶æ¬¡
        â†“
3. destroy-method        â† æœ€åæ‰§è¡Œ
```

### 6.3 é”€æ¯é˜¶æ®µçš„å…¸å‹åº”ç”¨


**åœºæ™¯ä¸€ï¼šé‡Šæ”¾æ•°æ®åº“è¿æ¥**
```java
@Component
public class DataSource {
    
    private HikariDataSource hikariDataSource;
    
    @PostConstruct
    public void init() {
        hikariDataSource = new HikariDataSource();
        // é…ç½®è¿æ¥æ± ...
    }
    
    @PreDestroy
    public void shutdown() {
        System.out.println("å…³é—­æ•°æ®åº“è¿æ¥æ± ...");
        if (hikariDataSource != null) {
            hikariDataSource.close();
        }
    }
}
```

**åœºæ™¯äºŒï¼šå…³é—­çº¿ç¨‹æ± **
```java
@Component
public class AsyncTaskExecutor {
    
    private ExecutorService executor;
    
    @PostConstruct
    public void init() {
        executor = Executors.newFixedThreadPool(10);
    }
    
    @PreDestroy
    public void cleanup() {
        System.out.println("å…³é—­çº¿ç¨‹æ± ...");
        executor.shutdown();
        try {
            if (!executor.awaitTermination(60, TimeUnit.SECONDS)) {
                executor.shutdownNow();
            }
        } catch (InterruptedException e) {
            executor.shutdownNow();
        }
    }
}
```

**åœºæ™¯ä¸‰ï¼šä¿å­˜ç¼“å­˜æ•°æ®**
```java
@Component
public class CacheManager {
    
    private Map<String, Object> cache = new ConcurrentHashMap<>();
    
    @PreDestroy
    public void persistCache() {
        System.out.println("æŒä¹…åŒ–ç¼“å­˜æ•°æ®...");
        // å°†å†…å­˜ä¸­çš„ç¼“å­˜æ•°æ®ä¿å­˜åˆ°ç£ç›˜
        saveToFile(cache);
    }
    
    private void saveToFile(Map<String, Object> data) {
        // ä¿å­˜é€»è¾‘...
    }
}
```

### 6.4 é”€æ¯é˜¶æ®µæ³¨æ„äº‹é¡¹


**âš ï¸ åŸå‹Beanä¸ä¼šè‡ªåŠ¨é”€æ¯**
```java
@Component
@Scope("prototype")
public class PrototypeBean implements DisposableBean {
    
    @Override
    public void destroy() {
        // âŒ è¿™ä¸ªæ–¹æ³•ä¸ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼
        System.out.println("åŸå‹Beané”€æ¯");
    }
}

// å¦‚æœéœ€è¦é”€æ¯åŸå‹Beanï¼Œè¦æ‰‹åŠ¨å¤„ç†
@Service
public class BeanManager {
    
    @Autowired
    private ApplicationContext context;
    
    public void usePrototypeBean() {
        PrototypeBean bean = context.getBean(PrototypeBean.class);
        try {
            // ä½¿ç”¨Bean...
        } finally {
            // æ‰‹åŠ¨é”€æ¯
            if (bean instanceof DisposableBean) {
                ((DisposableBean) bean).destroy();
            }
        }
    }
}
```

**ğŸ’¡ é”€æ¯é˜¶æ®µæœ€ä½³å®è·µ**ï¼š
- åŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼
- å…³é—­ç½‘ç»œè¿æ¥å’Œæ–‡ä»¶å¥æŸ„
- æ³¨é”€ç›‘å¬å™¨å’Œå›è°ƒ
- ä¿å­˜å¿…è¦çš„çŠ¶æ€æ•°æ®
- æ³¨æ„å¼‚å¸¸å¤„ç†ï¼Œç¡®ä¿æ¸…ç†å®Œæ•´

---

## 7. ğŸ­ å®¹å™¨ç”Ÿå‘½å‘¨æœŸ


### 7.1 å®¹å™¨å¯åŠ¨è¿‡ç¨‹


Springå®¹å™¨çš„å¯åŠ¨æ˜¯Beanç”Ÿå‘½å‘¨æœŸçš„å¤§èƒŒæ™¯ï¼š

```
Springå®¹å™¨å¯åŠ¨æµç¨‹ï¼š

ç¬¬1æ­¥ï¼šåŠ è½½é…ç½®
    â†“
è¯»å–XML/æ³¨è§£/Javaé…ç½®
è§£æBeanå®šä¹‰

ç¬¬2æ­¥ï¼šæ³¨å†ŒBeanDefinition
    â†“
å°†Beanå®šä¹‰ä¿¡æ¯æ³¨å†Œåˆ°å®¹å™¨

ç¬¬3æ­¥ï¼šè°ƒç”¨BeanFactoryPostProcessor
    â†“
å…è®¸ä¿®æ”¹BeanDefinition

ç¬¬4æ­¥ï¼šå®ä¾‹åŒ–Bean
    â†“
æ ¹æ®BeanDefinitionåˆ›å»ºBeanå®ä¾‹

ç¬¬5æ­¥ï¼šå®¹å™¨å¯åŠ¨å®Œæˆ
    â†“
æ‰€æœ‰å•ä¾‹Beanå·²åˆå§‹åŒ–
åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨
```

### 7.2 å®¹å™¨çº§åˆ«çš„æ‰©å±•ç‚¹


**BeanFactoryPostProcessor**ï¼ˆå¤„ç†BeanDefinitionï¼‰
```java
@Component
public class MyBeanFactoryPostProcessor 
    implements BeanFactoryPostProcessor {
    
    @Override
    public void postProcessBeanFactory(
        ConfigurableListableBeanFactory beanFactory) {
        
        System.out.println("å®¹å™¨å¯åŠ¨ï¼šå¤„ç†BeanDefinition");
        
        // å¯ä»¥ä¿®æ”¹Beanå®šä¹‰
        BeanDefinition bd = 
            beanFactory.getBeanDefinition("userService");
        bd.setLazyInit(true);  // ä¿®æ”¹ä¸ºæ‡’åŠ è½½
    }
}
```

**BeanPostProcessor**ï¼ˆå¤„ç†Beanå®ä¾‹ï¼‰
```java
@Component
public class MyBeanPostProcessor implements BeanPostProcessor {
    
    @Override
    public Object postProcessBeforeInitialization(
        Object bean, String beanName) {
        
        if (bean instanceof UserService) {
            System.out.println("æ‹¦æˆªåˆ°UserServiceçš„åˆå§‹åŒ–");
        }
        return bean;
    }
}
```

### 7.3 å®¹å™¨å…³é—­è¿‡ç¨‹


```
å®¹å™¨å…³é—­æµç¨‹ï¼š

ç¬¬1æ­¥ï¼šå‘å¸ƒå…³é—­äº‹ä»¶
    â†“
ContextClosedEventäº‹ä»¶é€šçŸ¥

ç¬¬2æ­¥ï¼šè°ƒç”¨Lifecycle.stop()
    â†“
åœæ­¢æ‰€æœ‰Lifecycle Bean

ç¬¬3æ­¥ï¼šé”€æ¯å•ä¾‹Bean
    â†“
æŒ‰ç…§ä¾èµ–å…³ç³»é€†åºé”€æ¯
æ‰§è¡Œ@PreDestroyç­‰é”€æ¯æ–¹æ³•

ç¬¬4æ­¥ï¼šå…³é—­BeanFactory
    â†“
æ¸…ç†æ‰€æœ‰èµ„æº
```

**ğŸ”§ ä¼˜é›…å…³é—­å®¹å™¨**ï¼š
```java
@SpringBootApplication
public class Application {
    
    public static void main(String[] args) {
        ConfigurableApplicationContext context = 
            SpringApplication.run(Application.class, args);
        
        // æ³¨å†Œå…³é—­é’©å­
        Runtime.getRuntime().addShutdownHook(new Thread(() -> {
            System.out.println("åº”ç”¨ç¨‹åºå…³é—­ä¸­...");
            context.close();
        }));
    }
}
```

### 7.4 å®¹å™¨äº‹ä»¶æœºåˆ¶


Springå®¹å™¨ä¼šåœ¨å…³é”®æ—¶åˆ»å‘å¸ƒäº‹ä»¶ï¼š

```java
// ç›‘å¬å®¹å™¨å¯åŠ¨å®Œæˆäº‹ä»¶
@Component
public class StartupListener {
    
    @EventListener
    public void onApplicationReady(ApplicationReadyEvent event) {
        System.out.println("å®¹å™¨å¯åŠ¨å®Œæˆï¼Œæ‰€æœ‰Beanå·²å°±ç»ª");
    }
    
    @EventListener
    public void onContextRefreshed(ContextRefreshedEvent event) {
        System.out.println("å®¹å™¨åˆ·æ–°å®Œæˆ");
    }
    
    @EventListener
    public void onContextClosed(ContextClosedEvent event) {
        System.out.println("å®¹å™¨å³å°†å…³é—­");
    }
}
```

**ğŸ“Š ä¸»è¦å®¹å™¨äº‹ä»¶**ï¼š
- `ContextRefreshedEvent`ï¼šå®¹å™¨åˆ·æ–°å®Œæˆ
- `ContextStartedEvent`ï¼šå®¹å™¨å¯åŠ¨
- `ContextStoppedEvent`ï¼šå®¹å™¨åœæ­¢
- `ContextClosedEvent`ï¼šå®¹å™¨å…³é—­
- `ApplicationReadyEvent`ï¼šåº”ç”¨å°±ç»ªï¼ˆSpring Bootï¼‰

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 ç”Ÿå‘½å‘¨æœŸé˜¶æ®µé€Ÿè®°


```
ğŸ¯ Beanç”Ÿå‘½å‘¨æœŸè®°å¿†å£è¯€ï¼š

å®ä¾‹åŒ– â†’ å±æ€§å¡«å…… â†’ åˆå§‹åŒ– â†’ ä½¿ç”¨ â†’ é”€æ¯

è¯¦ç»†è®°å¿†ï¼š
1ï¸âƒ£ å®ä¾‹åŒ–ï¼šæ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡
2ï¸âƒ£ å±æ€§å¡«å……ï¼šæ³¨å…¥ä¾èµ–å’Œé…ç½®
3ï¸âƒ£ åˆå§‹åŒ–ï¼šæ‰§è¡Œå‡†å¤‡å·¥ä½œ
4ï¸âƒ£ ä½¿ç”¨ï¼šæä¾›ä¸šåŠ¡æœåŠ¡
5ï¸âƒ£ é”€æ¯ï¼šé‡Šæ”¾èµ„æºæ¸…ç†
```

### 8.2 å…³é”®æ‰©å±•ç‚¹å¯¹æ¯”


| æ‰©å±•ç‚¹ | **æ‰§è¡Œæ—¶æœº** | **ç”¨é€”** | **æ¨èåº¦** |
|-------|------------|---------|----------|
| **æ„é€ æ–¹æ³•** | `å®ä¾‹åŒ–æ—¶` | `å¿…è¦çš„åˆå§‹åŒ–` | â­â­â­â­â­ |
| **@PostConstruct** | `åˆå§‹åŒ–é˜¶æ®µ` | `ä¾èµ–æ³¨å…¥åçš„å‡†å¤‡` | â­â­â­â­â­ |
| **InitializingBean** | `åˆå§‹åŒ–é˜¶æ®µ` | `ä¾µå…¥æ€§å¼ºï¼Œä¸æ¨è` | â­â­â˜†â˜†â˜† |
| **init-method** | `åˆå§‹åŒ–é˜¶æ®µ` | `è§£è€¦çš„åˆå§‹åŒ–é€»è¾‘` | â­â­â­â­â˜† |
| **@PreDestroy** | `é”€æ¯é˜¶æ®µ` | `èµ„æºé‡Šæ”¾` | â­â­â­â­â­ |
| **DisposableBean** | `é”€æ¯é˜¶æ®µ` | `ä¾µå…¥æ€§å¼ºï¼Œä¸æ¨è` | â­â­â˜†â˜†â˜† |
| **destroy-method** | `é”€æ¯é˜¶æ®µ` | `è§£è€¦çš„æ¸…ç†é€»è¾‘` | â­â­â­â­â˜† |

### 8.3 å¸¸è§é—®é¢˜è§£ç­”


**â“ ä¸ºä»€ä¹ˆæ¨èæ„é€ å™¨æ³¨å…¥ï¼Ÿ**
```
âœ… ä¼˜ç‚¹ï¼š
â€¢ ä¾èµ–æ˜ç¡®ï¼Œä¸€ç›®äº†ç„¶
â€¢ å¯ä»¥ä½¿ç”¨finalï¼Œä¿è¯ä¸å˜æ€§
â€¢ ä¾¿äºå•å…ƒæµ‹è¯•
â€¢ å¾ªç¯ä¾èµ–ä¼šç«‹å³æš´éœ²

âŒ å­—æ®µæ³¨å…¥çš„é—®é¢˜ï¼š
â€¢ ä¾èµ–éšè—ï¼Œä¸æ˜“å‘ç°
â€¢ æ— æ³•ä½¿ç”¨final
â€¢ éš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•
â€¢ å¯èƒ½éšè—å¾ªç¯ä¾èµ–
```

**â“ ä»€ä¹ˆæ—¶å€™ç”¨@PostConstructï¼Ÿ**
```
é€‚ç”¨åœºæ™¯ï¼š
â€¢ éœ€è¦ä½¿ç”¨å·²æ³¨å…¥çš„ä¾èµ–
â€¢ æ‰§è¡Œä¸€äº›å‡†å¤‡å·¥ä½œ
â€¢ æ•°æ®åˆå§‹åŒ–
â€¢ å»ºç«‹è¿æ¥

ä¸é€‚ç”¨åœºæ™¯ï¼š
â€¢ ä¾èµ–è¿˜æœªæ³¨å…¥æ—¶ï¼ˆç”¨æ„é€ æ–¹æ³•ï¼‰
â€¢ è€—æ—¶æ“ä½œï¼ˆè€ƒè™‘å¼‚æ­¥ï¼‰
```

**â“ åŸå‹Beanä¸ºä»€ä¹ˆä¸è‡ªåŠ¨é”€æ¯ï¼Ÿ**
```
åŸå› ï¼š
â€¢ åŸå‹Beanæ¯æ¬¡è·å–éƒ½æ˜¯æ–°å®ä¾‹
â€¢ Springä¸è·Ÿè¸ªæ‰€æœ‰åŸå‹Bean
â€¢ æ— æ³•çŸ¥é“ä»€ä¹ˆæ—¶å€™é”€æ¯

è§£å†³æ–¹æ¡ˆï¼š
â€¢ æ‰‹åŠ¨è°ƒç”¨é”€æ¯æ–¹æ³•
â€¢ ä½¿ç”¨try-with-resources
â€¢ å®¹å™¨æä¾›é”€æ¯å›è°ƒ
```

### 8.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ å¼€å‘è§„èŒƒ**ï¼š
```
1. ä¾èµ–æ³¨å…¥ï¼šä¼˜å…ˆä½¿ç”¨æ„é€ å™¨æ³¨å…¥
2. åˆå§‹åŒ–ï¼šä½¿ç”¨@PostConstructè€Œä¸æ˜¯InitializingBean
3. é”€æ¯ï¼šä½¿ç”¨@PreDestroyè€Œä¸æ˜¯DisposableBean
4. æ— çŠ¶æ€ï¼šå•ä¾‹Beanè®¾è®¡æˆæ— çŠ¶æ€çš„
5. èµ„æºç®¡ç†ï¼šåŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…æ³„æ¼
```

**ğŸ”§ è°ƒè¯•æŠ€å·§**ï¼š
```java
// æ‰“å°Beanç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹
@Component
public class LifecycleBean {
    
    private String beanName;
    
    public LifecycleBean() {
        System.out.println("1. æ„é€ æ–¹æ³•æ‰§è¡Œ");
    }
    
    @Autowired
    public void setBeanName(String name) {
        System.out.println("2. å±æ€§æ³¨å…¥ï¼š" + name);
        this.beanName = name;
    }
    
    @PostConstruct
    public void init() {
        System.out.println("3. @PostConstructåˆå§‹åŒ–");
    }
    
    @PreDestroy
    public void destroy() {
        System.out.println("5. @PreDestroyé”€æ¯");
    }
}
```

**ğŸ“Š æ€§èƒ½ä¼˜åŒ–**ï¼š
```
â€¢ æ‡’åŠ è½½ï¼šä¸å¸¸ç”¨çš„Beanä½¿ç”¨@Lazy
â€¢ å¼‚æ­¥åˆå§‹åŒ–ï¼šè€—æ—¶æ“ä½œä½¿ç”¨@Async
â€¢ æ¡ä»¶åˆ›å»ºï¼šä½¿ç”¨@Conditionalæ§åˆ¶Beanåˆ›å»º
â€¢ ä½œç”¨åŸŸé€‰æ‹©ï¼šæ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸ
```

### 8.5 å­¦ä¹ è·¯çº¿å»ºè®®


```
ğŸ“š æŒæ¡é¡ºåºï¼š

åŸºç¡€é˜¶æ®µï¼š
1. ç†è§£Beanç”Ÿå‘½å‘¨æœŸå„é˜¶æ®µ
2. æŒæ¡@PostConstructå’Œ@PreDestroy
3. ç†Ÿæ‚‰ä¾èµ–æ³¨å…¥æ–¹å¼

è¿›é˜¶é˜¶æ®µï¼š
4. ç†è§£BeanPostProcessoråŸç†
5. æŒæ¡ä½œç”¨åŸŸå’Œçº¿ç¨‹å®‰å…¨
6. å­¦ä¹ å®¹å™¨æ‰©å±•ç‚¹

é«˜çº§é˜¶æ®µï¼š
7. ç ”ç©¶æºç å®ç°
8. è‡ªå®šä¹‰BeanPostProcessor
9. æ€§èƒ½è°ƒä¼˜å’Œé—®é¢˜æ’æŸ¥
```

**ğŸ§  æ ¸å¿ƒè®°å¿†**ï¼š
- Beanç”Ÿå‘½å‘¨æœŸå°±æ˜¯ä»åˆ›å»ºåˆ°é”€æ¯çš„å®Œæ•´è¿‡ç¨‹
- æ„é€ â†’æ³¨å…¥â†’åˆå§‹åŒ–â†’ä½¿ç”¨â†’é”€æ¯äº”ä¸ªé˜¶æ®µ
- @PostConstructåˆå§‹åŒ–ï¼Œ@PreDestroyæ¸…ç†
- å•ä¾‹Beanè¦æ³¨æ„çº¿ç¨‹å®‰å…¨
- å®¹å™¨æä¾›å¤šä¸ªæ‰©å±•ç‚¹ï¼ŒæŒ‰éœ€é€‰æ‹©

**ğŸ’¡ å®è·µå»ºè®®**ï¼š
è‡ªå·±å†™ä¸€ä¸ªBeanï¼Œå®ç°æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸæ¥å£ï¼Œè§‚å¯Ÿæ‰§è¡Œé¡ºåºï¼Œè¿™æ˜¯ç†è§£ç”Ÿå‘½å‘¨æœŸæœ€å¥½çš„æ–¹å¼ï¼