---
title: 8ã€BeanFactoryPostProcessorè¯¦è§£
---
## ğŸ“š ç›®å½•

1. [BeanFactoryPostProcessoræ˜¯ä»€ä¹ˆ](#1-BeanFactoryPostProcessoræ˜¯ä»€ä¹ˆ)
2. [æ‰§è¡Œæ—¶æœºä¸ç”Ÿå‘½å‘¨æœŸ](#2-æ‰§è¡Œæ—¶æœºä¸ç”Ÿå‘½å‘¨æœŸ)
3. [BeanDefinitionä¿®æ”¹æœºåˆ¶](#3-BeanDefinitionä¿®æ”¹æœºåˆ¶)
4. [å…¸å‹å®ç°ç±»è¯¦è§£](#4-å…¸å‹å®ç°ç±»è¯¦è§£)
5. [è‡ªå®šä¹‰å®ç°ä¸æœ€ä½³å®è·µ](#5-è‡ªå®šä¹‰å®ç°ä¸æœ€ä½³å®è·µ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ BeanFactoryPostProcessoræ˜¯ä»€ä¹ˆ


### 1.1 æ ¸å¿ƒæ¦‚å¿µç†è§£


**ğŸ”¸ ç”¨äººè¯è§£é‡Š**

æƒ³è±¡ä½ åœ¨è£…ä¿®æˆ¿å­ï¼Œæœ‰ä¸¤ä¸ªé˜¶æ®µï¼š
- **è®¾è®¡é˜¶æ®µ**ï¼šçœ‹å›¾çº¸ã€æ”¹å›¾çº¸ï¼ˆBeanFactoryPostProcessoråœ¨è¿™ä¸ªé˜¶æ®µå·¥ä½œï¼‰
- **è£…ä¿®é˜¶æ®µ**ï¼šçœŸæ­£å¼€å§‹æ–½å·¥ã€æ·»åŠ å®¶å…·ï¼ˆBeançš„åˆ›å»ºå’Œåˆå§‹åŒ–ï¼‰

BeanFactoryPostProcessorå°±æ˜¯åœ¨"å›¾çº¸é˜¶æ®µ"å·¥ä½œçš„ï¼Œå®ƒå¯ä»¥ï¼š
- ğŸ“ ä¿®æ”¹Beançš„è®¾è®¡å›¾çº¸ï¼ˆBeanDefinitionï¼‰
- ğŸ”§ è°ƒæ•´Beançš„é…ç½®ä¿¡æ¯
- â• åŠ¨æ€æ·»åŠ æ–°çš„Beanå®šä¹‰

**ğŸ”¸ å®˜æ–¹å®šä¹‰**

```
BeanFactoryPostProcessorï¼š
â€¢ å®¹å™¨çº§åˆ«çš„åç½®å¤„ç†å™¨
â€¢ åœ¨Beanå®ä¾‹åŒ–ä¹‹å‰æ‰§è¡Œ
â€¢ ä¸»è¦ä½œç”¨æ˜¯ä¿®æ”¹BeanDefinition
â€¢ å¯ä»¥è¯»å–å’Œä¿®æ”¹Beançš„å…ƒæ•°æ®
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å®ƒ


**ğŸ’¡ è§£å†³çš„å®é™…é—®é¢˜**

**åœºæ™¯1ï¼šé…ç½®æ–‡ä»¶çš„å ä½ç¬¦æ›¿æ¢**
```
é—®é¢˜ï¼šé…ç½®æ–‡ä»¶ä¸­æœ‰ ${db.url}ï¼Œå¦‚ä½•æ›¿æ¢æˆçœŸå®å€¼ï¼Ÿ
è§£å†³ï¼šPropertyPlaceholderConfigurer æ›¿æ¢å ä½ç¬¦

æ•°æ®åº“é…ç½®ï¼š
url=${db.url}  â†’  url=jdbc:mysql://localhost:3306/mydb
```

**åœºæ™¯2ï¼šåŠ¨æ€ä¿®æ”¹Beanå±æ€§**
```
é—®é¢˜ï¼šæƒ³åœ¨è¿è¡Œæ—¶æ ¹æ®ç¯å¢ƒä¿®æ”¹Beançš„é…ç½®
è§£å†³ï¼šè‡ªå®šä¹‰BeanFactoryPostProcessorä¿®æ”¹BeanDefinition

å¼€å‘ç¯å¢ƒï¼šdataSourceçš„maxPoolSize=10
ç”Ÿäº§ç¯å¢ƒï¼šdataSourceçš„maxPoolSize=100
```

**åœºæ™¯3ï¼šæ‰¹é‡æ³¨å†ŒBean**
```
é—®é¢˜ï¼šéœ€è¦æ‰«ææŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»å¹¶æ³¨å†Œä¸ºBean
è§£å†³ï¼šClassPathBeanDefinitionScanneræ‰«æå¹¶æ³¨å†Œ

è‡ªåŠ¨æ‰«æï¼šcom.example.serviceåŒ…ä¸‹æ‰€æœ‰@Serviceæ³¨è§£çš„ç±»
```

### 1.3 ä¸BeanPostProcessorçš„åŒºåˆ«


| å¯¹æ¯”ç»´åº¦ | **BeanFactoryPostProcessor** | **BeanPostProcessor** |
|---------|---------------------------|---------------------|
| ğŸ¯ **ä½œç”¨å¯¹è±¡** | `æ“ä½œBeanDefinitionï¼ˆè®¾è®¡å›¾ï¼‰` | `æ“ä½œBeanå®ä¾‹ï¼ˆæˆå“ï¼‰` |
| â° **æ‰§è¡Œæ—¶æœº** | `Beanå®ä¾‹åŒ–ä¹‹å‰` | `Beanåˆå§‹åŒ–å‰å` |
| ğŸ”§ **ä¸»è¦ç”¨é€”** | `ä¿®æ”¹Beanå…ƒæ•°æ®ã€æ·»åŠ Beanå®šä¹‰` | `å¢å¼ºBeanå®ä¾‹ã€AOPä»£ç†` |
| ğŸ“Š **ä½œç”¨èŒƒå›´** | `å®¹å™¨çº§åˆ«ï¼Œå½±å“æ‰€æœ‰Bean` | `Beançº§åˆ«ï¼Œåªå½±å“å½“å‰Bean` |
| ğŸ’¡ **å…¸å‹åº”ç”¨** | `é…ç½®å ä½ç¬¦æ›¿æ¢ã€å±æ€§è¦†ç›–` | `æ³¨è§£å¤„ç†ã€ä¾èµ–æ³¨å…¥ã€ä»£ç†åˆ›å»º` |

**ğŸ” ç”Ÿæ´»ç±»æ¯”**

```
ç›–æˆ¿å­çš„è¿‡ç¨‹ï¼š

BeanFactoryPostProcessor = å»ºç­‘å¸ˆ
â€¢ åœ¨æ–½å·¥å‰ä¿®æ”¹è®¾è®¡å›¾çº¸
â€¢ è°ƒæ•´æˆ¿é—´å¤§å°ã€ä½ç½®
â€¢ å†³å®šç”¨ä»€ä¹ˆææ–™

BeanPostProcessor = è£…ä¿®å·¥äºº  
â€¢ æˆ¿å­å»ºå¥½åè¿›è¡Œè£…ä¿®
â€¢ åˆ·æ¼†ã€è´´å£çº¸
â€¢ å®‰è£…å®¶å…·
```

---

## 2. â° æ‰§è¡Œæ—¶æœºä¸ç”Ÿå‘½å‘¨æœŸ


### 2.1 Springå®¹å™¨å¯åŠ¨æµç¨‹


**ğŸ“ˆ å®Œæ•´å¯åŠ¨æ—¶åº**

```
Springå®¹å™¨å¯åŠ¨æµç¨‹ï¼š

1. åŠ è½½é…ç½®æ–‡ä»¶/æ‰«ææ³¨è§£
   â†“
2. è§£æé…ç½®ï¼Œåˆ›å»ºBeanDefinition
   â†“
3. ğŸ”¥ æ‰§è¡ŒBeanFactoryPostProcessor  â† æˆ‘ä»¬åœ¨è¿™é‡Œï¼
   â†“
4. å®ä¾‹åŒ–Beanï¼ˆåå°„åˆ›å»ºå¯¹è±¡ï¼‰
   â†“
5. æ‰§è¡ŒBeanPostProcessor.postProcessBeforeInitialization
   â†“
6. æ‰§è¡ŒBeançš„åˆå§‹åŒ–æ–¹æ³•ï¼ˆ@PostConstructã€InitializingBeanï¼‰
   â†“
7. æ‰§è¡ŒBeanPostProcessor.postProcessAfterInitialization
   â†“
8. Beanå°±ç»ªï¼Œå¯ä»¥ä½¿ç”¨
```

**âš¡ å…³é”®ç†è§£ç‚¹**

> **ä¸ºä»€ä¹ˆè¦åœ¨å®ä¾‹åŒ–ä¹‹å‰æ‰§è¡Œï¼Ÿ**
> 
> å› ä¸ºBeanFactoryPostProcessorä¿®æ”¹çš„æ˜¯"è®¾è®¡å›¾çº¸"ï¼ˆBeanDefinitionï¼‰ï¼Œ
> å¦‚æœBeanå·²ç»åˆ›å»ºäº†ï¼Œå†ä¿®æ”¹å›¾çº¸å°±æ²¡æ„ä¹‰äº†ã€‚
> å°±åƒæˆ¿å­å·²ç»ç›–å¥½äº†ï¼Œå†æ”¹å›¾çº¸ä¹Ÿæ¥ä¸åŠäº†ã€‚

### 2.2 æ‰§è¡Œé¡ºåºæ§åˆ¶


**ğŸ¯ å¤šä¸ªåç½®å¤„ç†å™¨çš„æ‰§è¡Œé¡ºåº**

Springæä¾›äº†ä¸¤ç§æ–¹å¼æ§åˆ¶æ‰§è¡Œé¡ºåºï¼š

**æ–¹å¼1ï¼šå®ç°Orderedæ¥å£**
```java
public class MyPostProcessor implements BeanFactoryPostProcessor, Ordered {
    
    @Override
    public int getOrder() {
        return 1;  // æ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜
    }
    
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        // å¤„ç†é€»è¾‘
    }
}
```

**æ–¹å¼2ï¼šä½¿ç”¨@Orderæ³¨è§£**
```java
@Component
@Order(1)  // æ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜
public class MyPostProcessor implements BeanFactoryPostProcessor {
    // å®ç°é€»è¾‘
}
```

**ğŸ“Š æ‰§è¡Œé¡ºåºç¤ºä¾‹**

```
å‡è®¾æœ‰ä¸‰ä¸ªåç½®å¤„ç†å™¨ï¼š

PostProcessor A: @Order(1)   â† æœ€å…ˆæ‰§è¡Œ
PostProcessor B: @Order(5)   â† ç¬¬äºŒæ‰§è¡Œ
PostProcessor C: @Order(10)  â† æœ€åæ‰§è¡Œ

æ‰§è¡Œé¡ºåºï¼šA â†’ B â†’ C
```

**âš ï¸ æ³¨æ„äº‹é¡¹**

> **é‡è¦æç¤ºï¼š**
> - ä¸åŒç±»å‹çš„åç½®å¤„ç†å™¨æœ‰ä¸åŒçš„æ‰§è¡Œæ—¶æœº
> - åŒç±»å‹çš„æŒ‰Orderå€¼æ’åº
> - æœªæŒ‡å®šOrderçš„é»˜è®¤å€¼ä¸ºInteger.MAX_VALUEï¼ˆæœ€åæ‰§è¡Œï¼‰

### 2.3 ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³•


**ğŸ”§ æ ¸å¿ƒæ–¹æ³•è§£æ**

```java
@FunctionalInterface
public interface BeanFactoryPostProcessor {
    
    /**
     * è¿™æ˜¯å”¯ä¸€éœ€è¦å®ç°çš„æ–¹æ³•
     * 
     * @param beanFactoryï¼šå¯é…ç½®çš„Beanå·¥å‚
     *        - å¯ä»¥è·å–BeanDefinition
     *        - å¯ä»¥ä¿®æ”¹Beançš„å…ƒæ•°æ®
     *        - å¯ä»¥æ³¨å†Œæ–°çš„Beanå®šä¹‰
     */
    void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) 
        throws BeansException;
}
```

**ğŸ’¡ æ–¹æ³•å‚æ•°è¯¦è§£**

| å‚æ•°ç±»å‹ | **ä½œç”¨è¯´æ˜** | **å¸¸ç”¨æ“ä½œ** |
|---------|------------|------------|
| `ConfigurableListableBeanFactory` | `Springçš„Beanå·¥å‚` | `è·å–/ä¿®æ”¹BeanDefinition` |
| å¯ä»¥è·å– | `æ‰€æœ‰Beançš„å®šä¹‰ä¿¡æ¯` | `beanFactory.getBeanDefinition("beanName")` |
| å¯ä»¥ä¿®æ”¹ | `Beançš„å±æ€§å€¼` | `beanDef.getPropertyValues().add(...)` |
| å¯ä»¥æ·»åŠ  | `æ–°çš„Beanå®šä¹‰` | `beanFactory.registerBeanDefinition(...)` |

---

## 3. ğŸ“ BeanDefinitionä¿®æ”¹æœºåˆ¶


### 3.1 ä»€ä¹ˆæ˜¯BeanDefinition


**ğŸ”¸ æ ¸å¿ƒç†è§£**

BeanDefinitionå°±æ˜¯Beançš„"èº«ä»½è¯"æˆ–"è®¾è®¡å›¾çº¸"ï¼Œè®°å½•äº†ï¼š

```
BeanDefinitionåŒ…å«çš„ä¿¡æ¯ï¼š

ğŸ“‹ åŸºæœ¬ä¿¡æ¯
â€¢ Beançš„ç±»åï¼šcom.example.UserService
â€¢ Beançš„ä½œç”¨åŸŸï¼šsingleton/prototype
â€¢ æ˜¯å¦æ‡’åŠ è½½ï¼šlazy-init=true/false
â€¢ æ˜¯å¦æŠ½è±¡ï¼šabstract=true/false

ğŸ”§ é…ç½®ä¿¡æ¯  
â€¢ æ„é€ å‡½æ•°å‚æ•°ï¼šconstructor-arg
â€¢ å±æ€§å€¼ï¼šproperty name/value
â€¢ ä¾èµ–çš„Beanï¼šdepends-on
â€¢ è‡ªåŠ¨è£…é…æ¨¡å¼ï¼šautowire

ğŸ¯ åˆå§‹åŒ–ä¿¡æ¯
â€¢ åˆå§‹åŒ–æ–¹æ³•ï¼šinit-method
â€¢ é”€æ¯æ–¹æ³•ï¼šdestroy-method
â€¢ å·¥å‚æ–¹æ³•ï¼šfactory-method
```

**ğŸ  ç”Ÿæ´»ç±»æ¯”**

```
BeanDefinition = æˆ¿å±‹è®¾è®¡å›¾çº¸

å›¾çº¸ä¸Šæ ‡æ³¨ï¼š
â€¢ æˆ¿å‹ï¼šä¸‰å®¤ä¸¤å…ï¼ˆç±»åï¼‰
â€¢ é¢ç§¯ï¼š120å¹³ï¼ˆå±æ€§ï¼‰
â€¢ æœå‘ï¼šå—åŒ—é€šé€ï¼ˆé…ç½®ï¼‰
â€¢ è£…ä¿®é£æ ¼ï¼šç°ä»£ç®€çº¦ï¼ˆåˆå§‹åŒ–æ–¹æ³•ï¼‰

æ ¹æ®å›¾çº¸å»ºæˆ¿å­ = æ ¹æ®BeanDefinitionåˆ›å»ºBean
```

### 3.2 è·å–BeanDefinition


**ğŸ” ä¸‰ç§è·å–æ–¹å¼**

```java
public class MyPostProcessor implements BeanFactoryPostProcessor {
    
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        
        // æ–¹å¼1ï¼šæ ¹æ®åç§°è·å–å•ä¸ªBeanDefinition
        BeanDefinition userServiceDef = beanFactory.getBeanDefinition("userService");
        
        // æ–¹å¼2ï¼šè·å–æ‰€æœ‰Beançš„åç§°
        String[] beanNames = beanFactory.getBeanDefinitionNames();
        for (String beanName : beanNames) {
            BeanDefinition bd = beanFactory.getBeanDefinition(beanName);
            // å¤„ç†æ¯ä¸ªBeanå®šä¹‰
        }
        
        // æ–¹å¼3ï¼šæ ¹æ®ç±»å‹è·å–Beanåç§°
        String[] userServiceBeans = beanFactory.getBeanNamesForType(UserService.class);
    }
}
```

### 3.3 ä¿®æ”¹BeanDefinition


**ğŸ”§ å¸¸è§ä¿®æ”¹æ“ä½œ**

**æ“ä½œ1ï¼šä¿®æ”¹Beanå±æ€§å€¼**
```java
// è·å–BeanDefinition
BeanDefinition beanDef = beanFactory.getBeanDefinition("dataSource");

// ä¿®æ”¹å±æ€§å€¼
MutablePropertyValues pvs = beanDef.getPropertyValues();
pvs.add("maxPoolSize", 100);        // æ·»åŠ æ–°å±æ€§
pvs.add("url", "jdbc:mysql://...");  // ä¿®æ”¹å·²æœ‰å±æ€§
```

**æ“ä½œ2ï¼šä¿®æ”¹ä½œç”¨åŸŸ**
```java
// åŸæœ¬æ˜¯singletonï¼Œæ”¹ä¸ºprototype
beanDef.setScope(BeanDefinition.SCOPE_PROTOTYPE);
```

**æ“ä½œ3ï¼šä¿®æ”¹æ‡’åŠ è½½**
```java
// è®¾ç½®ä¸ºæ‡’åŠ è½½
beanDef.setLazyInit(true);
```

**æ“ä½œ4ï¼šä¿®æ”¹åˆå§‹åŒ–æ–¹æ³•**
```java
// è®¾ç½®åˆå§‹åŒ–æ–¹æ³•
beanDef.setInitMethodName("customInit");

// è®¾ç½®é”€æ¯æ–¹æ³•
beanDef.setDestroyMethodName("customDestroy");
```

**ğŸ¯ å®æˆ˜æ¡ˆä¾‹ï¼šåŠ¨æ€è°ƒæ•´æ•°æ®åº“è¿æ¥æ± å¤§å°**

```java
@Component
public class DataSourceConfigurer implements BeanFactoryPostProcessor {
    
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        
        // è·å–å½“å‰ç¯å¢ƒ
        String env = System.getProperty("spring.profiles.active", "dev");
        
        // è·å–æ•°æ®æºçš„BeanDefinition
        BeanDefinition dataSourceDef = beanFactory.getBeanDefinition("dataSource");
        
        // æ ¹æ®ç¯å¢ƒè°ƒæ•´è¿æ¥æ± å¤§å°
        MutablePropertyValues pvs = dataSourceDef.getPropertyValues();
        
        if ("prod".equals(env)) {
            pvs.add("maxPoolSize", 200);     // ç”Ÿäº§ç¯å¢ƒï¼šå¤§è¿æ¥æ± 
            pvs.add("minPoolSize", 20);
        } else {
            pvs.add("maxPoolSize", 10);      // å¼€å‘ç¯å¢ƒï¼šå°è¿æ¥æ± 
            pvs.add("minPoolSize", 2);
        }
        
        System.out.println("æ•°æ®æºé…ç½®å·²æ ¹æ®ç¯å¢ƒ[" + env + "]è°ƒæ•´");
    }
}
```

**æ‰§è¡Œæ•ˆæœï¼š**
```
å¼€å‘ç¯å¢ƒè¿è¡Œï¼š
æ•°æ®æºé…ç½®å·²æ ¹æ®ç¯å¢ƒ[dev]è°ƒæ•´
â†’ maxPoolSize=10, minPoolSize=2

ç”Ÿäº§ç¯å¢ƒè¿è¡Œï¼š
æ•°æ®æºé…ç½®å·²æ ¹æ®ç¯å¢ƒ[prod]è°ƒæ•´  
â†’ maxPoolSize=200, minPoolSize=20
```

---

## 4. ğŸ”¨ å…¸å‹å®ç°ç±»è¯¦è§£


### 4.1 PropertyPlaceholderConfigurer


**ğŸ”¸ ä½œç”¨è¯´æ˜**

è¿™æ˜¯æœ€å¸¸ç”¨çš„åç½®å¤„ç†å™¨ï¼Œç”¨äºæ›¿æ¢é…ç½®æ–‡ä»¶ä¸­çš„å ä½ç¬¦ã€‚

**ğŸ’¡ è§£å†³çš„é—®é¢˜**

```
é—®é¢˜åœºæ™¯ï¼š
é…ç½®æ–‡ä»¶ä¸­æœ‰å¾ˆå¤šå˜é‡ï¼Œä¸åŒç¯å¢ƒå€¼ä¸åŒ

å¼€å‘ç¯å¢ƒï¼š
db.url=jdbc:mysql://localhost:3306/dev_db
db.username=dev_user

ç”Ÿäº§ç¯å¢ƒï¼š
db.url=jdbc:mysql://prod-server:3306/prod_db  
db.username=prod_user

å¦‚ä½•ç®¡ç†è¿™äº›å˜é‡ï¼Ÿ
```

**ğŸ”§ ä½¿ç”¨æ–¹å¼**

**æ–¹å¼1ï¼šXMLé…ç½®ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**
```xml
<!-- å®šä¹‰å±æ€§æ–‡ä»¶ä½ç½® -->
<context:property-placeholder location="classpath:database.properties"/>

<!-- ä½¿ç”¨å ä½ç¬¦ -->
<bean id="dataSource" class="com.zaxxer.hikari.HikariDataSource">
    <property name="url" value="${db.url}"/>
    <property name="username" value="${db.username}"/>
    <property name="password" value="${db.password}"/>
</bean>
```

**æ–¹å¼2ï¼šJavaConfigï¼ˆæ¨èï¼‰**
```java
@Configuration
@PropertySource("classpath:database.properties")
public class DataSourceConfig {
    
    @Value("${db.url}")
    private String dbUrl;
    
    @Value("${db.username}")
    private String dbUsername;
    
    @Value("${db.password}")
    private String dbPassword;
    
    @Bean
    public DataSource dataSource() {
        HikariDataSource ds = new HikariDataSource();
        ds.setJdbcUrl(dbUrl);
        ds.setUsername(dbUsername);
        ds.setPassword(dbPassword);
        return ds;
    }
}
```

**ğŸ“ å±æ€§æ–‡ä»¶ç¤ºä¾‹ï¼ˆdatabase.propertiesï¼‰**
```properties
# æ•°æ®åº“é…ç½®
db.url=jdbc:mysql://localhost:3306/mydb
db.username=root
db.password=123456
db.maxPoolSize=20
```

**âš¡ å·¥ä½œåŸç†**

```
æ›¿æ¢æµç¨‹ï¼š

1. åŠ è½½propertiesæ–‡ä»¶
   database.properties â†’ å†…å­˜Map

2. æ‰«æBeanDefinition
   å‘ç° ${db.url} å ä½ç¬¦

3. ä»Mapä¸­æŸ¥æ‰¾key
   db.url â†’ jdbc:mysql://localhost:3306/mydb

4. æ›¿æ¢å ä½ç¬¦
   ${db.url} â†’ jdbc:mysql://localhost:3306/mydb
```

**ğŸ¯ é«˜çº§ç”¨æ³•ï¼šå¤šç¯å¢ƒé…ç½®**

```java
@Configuration
public class MultiEnvConfig {
    
    @Bean
    public static PropertySourcesPlaceholderConfigurer propertyConfigurer() {
        PropertySourcesPlaceholderConfigurer configurer = 
            new PropertySourcesPlaceholderConfigurer();
        
        // æ ¹æ®ç¯å¢ƒåŠ è½½ä¸åŒçš„é…ç½®æ–‡ä»¶
        String env = System.getProperty("spring.profiles.active", "dev");
        Resource resource = new ClassPathResource("application-" + env + ".properties");
        
        configurer.setLocation(resource);
        configurer.setIgnoreUnresolvablePlaceholders(true);  // å¿½ç•¥æ— æ³•è§£æçš„å ä½ç¬¦
        
        return configurer;
    }
}
```

### 4.2 PropertyOverrideConfigurer


**ğŸ”¸ ä½œç”¨è¯´æ˜**

å¼ºåˆ¶è¦†ç›–Beançš„å±æ€§å€¼ï¼Œå³ä½¿Beanå®šä¹‰ä¸­å·²ç»è®¾ç½®äº†å€¼ã€‚

**ğŸ’¡ åº”ç”¨åœºæ™¯**

```
åœºæ™¯ï¼šæµ‹è¯•ç¯å¢ƒéœ€è¦è¦†ç›–é…ç½®

Beanå®šä¹‰ä¸­ï¼š
maxPoolSize=10  ï¼ˆå¼€å‘æ—¶çš„é»˜è®¤å€¼ï¼‰

æµ‹è¯•æ—¶éœ€è¦ï¼š
maxPoolSize=100  ï¼ˆæµ‹è¯•éœ€è¦å¤§è¿æ¥æ± ï¼‰

ä¸ä¿®æ”¹ä»£ç ï¼Œåªé€šè¿‡é…ç½®æ–‡ä»¶è¦†ç›–
```

**ğŸ”§ ä½¿ç”¨ç¤ºä¾‹**

**é…ç½®æ–‡ä»¶ï¼ˆoverride.propertiesï¼‰**
```properties
# æ ¼å¼ï¼šbeanName.propertyName=value

dataSource.maxPoolSize=100
dataSource.url=jdbc:mysql://test-server:3306/test_db

userService.cacheEnabled=false
userService.timeout=5000
```

**Javaé…ç½®**
```java
@Configuration
public class OverrideConfig {
    
    @Bean
    public static PropertyOverrideConfigurer propertyOverrideConfigurer() {
        PropertyOverrideConfigurer configurer = new PropertyOverrideConfigurer();
        configurer.setLocation(new ClassPathResource("override.properties"));
        configurer.setIgnoreInvalidKeys(true);  // å¿½ç•¥æ— æ•ˆçš„key
        return configurer;
    }
}
```

**ğŸ“Š è¦†ç›–æ•ˆæœå¯¹æ¯”**

| Beanå±æ€§ | **åŸå§‹å€¼** | **è¦†ç›–å** | **è¯´æ˜** |
|---------|----------|----------|---------|
| `dataSource.maxPoolSize` | `10` | `100` | `å·²è¦†ç›–` |
| `dataSource.url` | `jdbc:mysql://localhost:3306/dev_db` | `jdbc:mysql://test-server:3306/test_db` | `å·²è¦†ç›–` |
| `userService.cacheEnabled` | `true` | `false` | `å·²è¦†ç›–` |

### 4.3 CustomEditorConfigurer


**ğŸ”¸ ä½œç”¨è¯´æ˜**

æ³¨å†Œè‡ªå®šä¹‰çš„å±æ€§ç¼–è¾‘å™¨ï¼Œç”¨äºç±»å‹è½¬æ¢ã€‚

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦å®ƒ**

```
é—®é¢˜ï¼šSpringæ€ä¹ˆçŸ¥é“å¦‚ä½•è½¬æ¢ç‰¹æ®Šç±»å‹ï¼Ÿ

é…ç½®æ–‡ä»¶ï¼š
user.birthday=2000-01-01  ï¼ˆå­—ç¬¦ä¸²ï¼‰

Beanå±æ€§ï¼š
private LocalDate birthday;  ï¼ˆLocalDateç±»å‹ï¼‰

Springéœ€è¦æŠŠå­—ç¬¦ä¸²è½¬æˆLocalDateï¼Œæ€ä¹ˆè½¬ï¼Ÿ
â†’ é€šè¿‡PropertyEditorï¼ˆå±æ€§ç¼–è¾‘å™¨ï¼‰
```

**ğŸ”§ è‡ªå®šä¹‰å±æ€§ç¼–è¾‘å™¨**

**æ­¥éª¤1ï¼šåˆ›å»ºè‡ªå®šä¹‰ç¼–è¾‘å™¨**
```java
public class LocalDateEditor extends PropertyEditorSupport {
    
    private final DateTimeFormatter formatter;
    
    public LocalDateEditor(String pattern) {
        this.formatter = DateTimeFormatter.ofPattern(pattern);
    }
    
    @Override
    public void setAsText(String text) {
        // å­—ç¬¦ä¸² â†’ LocalDate
        LocalDate date = LocalDate.parse(text, formatter);
        setValue(date);
    }
    
    @Override
    public String getAsText() {
        // LocalDate â†’ å­—ç¬¦ä¸²
        LocalDate date = (LocalDate) getValue();
        return date != null ? date.format(formatter) : "";
    }
}
```

**æ­¥éª¤2ï¼šæ³¨å†Œç¼–è¾‘å™¨**
```java
@Configuration
public class CustomEditorConfig {
    
    @Bean
    public static CustomEditorConfigurer customEditorConfigurer() {
        CustomEditorConfigurer configurer = new CustomEditorConfigurer();
        
        Map<Class<?>, Class<? extends PropertyEditor>> customEditors = new HashMap<>();
        customEditors.put(LocalDate.class, LocalDateEditor.class);
        
        configurer.setCustomEditors(customEditors);
        return configurer;
    }
}
```

**æ­¥éª¤3ï¼šä½¿ç”¨æ•ˆæœ**
```java
@Component
public class User {
    
    @Value("${user.birthday}")  // 2000-01-01
    private LocalDate birthday;  // è‡ªåŠ¨è½¬æ¢ä¸ºLocalDateå¯¹è±¡
    
    // Springä¼šè‡ªåŠ¨ä½¿ç”¨LocalDateEditorè¿›è¡Œè½¬æ¢
}
```

**ğŸ¯ å¸¸è§ç±»å‹è½¬æ¢åœºæ™¯**

```
å†…ç½®æ”¯æŒçš„è½¬æ¢ï¼š
String â†’ int/Integer
String â†’ boolean/Boolean  
String â†’ Dateï¼ˆé»˜è®¤æ ¼å¼ï¼‰
String â†’ File/URL

éœ€è¦è‡ªå®šä¹‰çš„è½¬æ¢ï¼š
String â†’ LocalDate/LocalDateTime
String â†’ è‡ªå®šä¹‰æšä¸¾
String â†’ è‡ªå®šä¹‰å¤æ‚å¯¹è±¡
```

---

## 5. ğŸš€ è‡ªå®šä¹‰å®ç°ä¸æœ€ä½³å®è·µ


### 5.1 è‡ªå®šä¹‰å®ç°æ­¥éª¤


**ğŸ“ å®Œæ•´å®ç°æµç¨‹**

```
æ­¥éª¤1ï¼šåˆ›å»ºç±»å®ç°BeanFactoryPostProcessoræ¥å£
        â†“
æ­¥éª¤2ï¼šé‡å†™postProcessBeanFactoryæ–¹æ³•
        â†“
æ­¥éª¤3ï¼šåœ¨æ–¹æ³•ä¸­ç¼–å†™Beanå®šä¹‰ä¿®æ”¹é€»è¾‘
        â†“
æ­¥éª¤4ï¼šæ³¨å†Œåˆ°Springå®¹å™¨ï¼ˆ@Componentæˆ–æ‰‹åŠ¨æ³¨å†Œï¼‰
```

**ğŸ”§ å®æˆ˜æ¡ˆä¾‹1ï¼šåŠ¨æ€Beanæ³¨å†Œå™¨**

```java
/**
 * åŠŸèƒ½ï¼šæ‰«ææŒ‡å®šåŒ…ï¼Œè‡ªåŠ¨æ³¨å†Œæ‰€æœ‰Serviceç±»ä¸ºBean
 */
@Component
public class DynamicBeanRegister implements BeanFactoryPostProcessor {
    
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        
        // 1. æ‰«ææŒ‡å®šåŒ…
        String basePackage = "com.example.service";
        List<Class<?>> serviceClasses = scanPackage(basePackage);
        
        // 2. éå†ç±»ï¼Œæ³¨å†Œä¸ºBean
        for (Class<?> serviceClass : serviceClasses) {
            String beanName = generateBeanName(serviceClass);
            
            // åˆ›å»ºBeanDefinition
            BeanDefinitionBuilder builder = BeanDefinitionBuilder
                .genericBeanDefinition(serviceClass);
            
            // æ³¨å†Œåˆ°å®¹å™¨
            BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;
            registry.registerBeanDefinition(beanName, builder.getBeanDefinition());
            
            System.out.println("å·²æ³¨å†ŒBeanï¼š" + beanName + " -> " + serviceClass.getName());
        }
    }
    
    // æ‰«æåŒ…ä¸‹çš„æ‰€æœ‰ç±»
    private List<Class<?>> scanPackage(String basePackage) {
        // å®ç°åŒ…æ‰«æé€»è¾‘ï¼ˆä½¿ç”¨ClassPathScanningCandidateComponentProviderï¼‰
        return new ArrayList<>();
    }
    
    // ç”ŸæˆBeanåç§°
    private String generateBeanName(Class<?> clazz) {
        String simpleName = clazz.getSimpleName();
        return Character.toLowerCase(simpleName.charAt(0)) + simpleName.substring(1);
    }
}
```

**ğŸ”§ å®æˆ˜æ¡ˆä¾‹2ï¼šæ¡ä»¶åŒ–Beané…ç½®**

```java
/**
 * åŠŸèƒ½ï¼šæ ¹æ®é…ç½®æ–‡ä»¶åŠ¨æ€è°ƒæ•´Beançš„å±æ€§
 */
@Component
public class ConditionalBeanConfigurer implements BeanFactoryPostProcessor {
    
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        
        // è¯»å–é…ç½®
        boolean enableCache = Boolean.parseBoolean(
            System.getProperty("app.cache.enabled", "false")
        );
        
        // è·å–æ‰€æœ‰Serviceç±»å‹çš„Bean
        String[] serviceBeans = beanFactory.getBeanNamesForType(Object.class);
        
        for (String beanName : serviceBeans) {
            BeanDefinition beanDef = beanFactory.getBeanDefinition(beanName);
            
            // åªå¤„ç†æˆ‘ä»¬è‡ªå·±çš„Serviceç±»
            if (beanDef.getBeanClassName() != null && 
                beanDef.getBeanClassName().contains("com.example.service")) {
                
                // æ ¹æ®é…ç½®æ·»åŠ ç¼“å­˜ç›¸å…³å±æ€§
                MutablePropertyValues pvs = beanDef.getPropertyValues();
                pvs.add("cacheEnabled", enableCache);
                
                if (enableCache) {
                    pvs.add("cacheTimeout", 3600);  // 1å°æ—¶
                    System.out.println("å·²ä¸º " + beanName + " å¯ç”¨ç¼“å­˜");
                }
            }
        }
    }
}
```

### 5.2 æœ€ä½³å®è·µå»ºè®®


**âœ… æ¨èåšæ³•**

**1. ä½¿ç”¨é™æ€æ–¹æ³•æ³¨å†Œ**
```java
@Configuration
public class MyConfig {
    
    // âœ… æ¨èï¼šä½¿ç”¨staticæ–¹æ³•
    @Bean
    public static BeanFactoryPostProcessor myPostProcessor() {
        return beanFactory -> {
            // å¤„ç†é€»è¾‘
        };
    }
}
```

> **ä¸ºä»€ä¹ˆç”¨staticï¼Ÿ**
> å› ä¸ºBeanFactoryPostProcessoråœ¨å®¹å™¨åˆå§‹åŒ–å¾ˆæ—©æœŸå°±æ‰§è¡Œï¼Œ
> å¦‚æœä¸æ˜¯staticæ–¹æ³•ï¼Œé…ç½®ç±»æœ¬èº«å¯èƒ½è¿˜æ²¡åˆå§‹åŒ–å®Œæˆã€‚

**2. åˆç†ä½¿ç”¨Orderæ§åˆ¶é¡ºåº**
```java
@Component
@Order(Ordered.HIGHEST_PRECEDENCE)  // æœ€é«˜ä¼˜å…ˆçº§
public class HighPriorityProcessor implements BeanFactoryPostProcessor {
    // éœ€è¦æœ€å…ˆæ‰§è¡Œçš„é€»è¾‘
}

@Component  
@Order(Ordered.LOWEST_PRECEDENCE)   // æœ€ä½ä¼˜å…ˆçº§
public class LowPriorityProcessor implements BeanFactoryPostProcessor {
    // å¯ä»¥æœ€åæ‰§è¡Œçš„é€»è¾‘
}
```

**3. é¿å…è¿‡æ—©å®ä¾‹åŒ–Bean**
```java
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
    
    // âŒ é”™è¯¯ï¼šä¸è¦è°ƒç”¨getBean()
    // UserService service = beanFactory.getBean(UserService.class);
    
    // âœ… æ­£ç¡®ï¼šåªæ“ä½œBeanDefinition
    BeanDefinition beanDef = beanFactory.getBeanDefinition("userService");
    // ä¿®æ”¹å®šä¹‰...
}
```

> **é‡è¦æé†’ï¼š**
> åœ¨BeanFactoryPostProcessorä¸­ä¸è¦è°ƒç”¨getBean()ï¼Œ
> è¿™ä¼šå¯¼è‡´Beanè¿‡æ—©å®ä¾‹åŒ–ï¼Œç ´åæ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸã€‚

**4. å¼‚å¸¸å¤„ç†è¦å®Œå–„**
```java
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
    
    try {
        // å¤„ç†é€»è¾‘
        BeanDefinition beanDef = beanFactory.getBeanDefinition("myBean");
        // ...
        
    } catch (NoSuchBeanDefinitionException e) {
        // Beanä¸å­˜åœ¨ï¼Œè®°å½•æ—¥å¿—ä½†ä¸å½±å“å¯åŠ¨
        System.out.println("è­¦å‘Šï¼šæœªæ‰¾åˆ°Beanå®šä¹‰ - " + e.getBeanName());
        
    } catch (Exception e) {
        // å…¶ä»–å¼‚å¸¸ï¼Œè®°å½•è¯¦ç»†ä¿¡æ¯
        throw new BeanInitializationException("åç½®å¤„ç†å™¨æ‰§è¡Œå¤±è´¥", e);
    }
}
```

**âŒ å¸¸è§é”™è¯¯**

**é”™è¯¯1ï¼šä¿®æ”¹äº†ä¸è¯¥ä¿®æ”¹çš„Bean**
```java
// âŒ é”™è¯¯åšæ³•
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
    // ä¿®æ”¹äº†Springæ¡†æ¶è‡ªå·±çš„Beanï¼Œå¯èƒ½å¯¼è‡´æ¡†æ¶å¼‚å¸¸
    BeanDefinition beanDef = beanFactory.getBeanDefinition("org.springframework...");
    // ...
}

// âœ… æ­£ç¡®åšæ³•ï¼šåªä¿®æ”¹è‡ªå·±çš„Bean
@Override  
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
    // åªå¤„ç†è‡ªå·±åŒ…ä¸‹çš„Bean
    if (beanDef.getBeanClassName().startsWith("com.example")) {
        // ä¿®æ”¹é€»è¾‘
    }
}
```

**é”™è¯¯2ï¼šä¾èµ–å…¶ä»–Bean**
```java
// âŒ é”™è¯¯ï¼šåœ¨åç½®å¤„ç†å™¨ä¸­æ³¨å…¥å…¶ä»–Bean
@Component
public class MyProcessor implements BeanFactoryPostProcessor {
    
    @Autowired  // âŒ è¿™ä¸ªä¾èµ–å¯èƒ½è¿˜æ²¡å‡†å¤‡å¥½
    private DataSource dataSource;
    
    @Override
    public void postProcessBeanFactory(...) {
        // ä½¿ç”¨dataSource...
    }
}

// âœ… æ­£ç¡®ï¼šé€šè¿‡beanFactoryè·å–BeanDefinition
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
    BeanDefinition dataSourceDef = beanFactory.getBeanDefinition("dataSource");
    // æ“ä½œå®šä¹‰è€Œä¸æ˜¯å®ä¾‹
}
```

### 5.3 å®ç”¨å·¥å…·ç±»å°è£…


**ğŸ”§ å°è£…ä¸€ä¸ªé€šç”¨çš„å±æ€§ä¿®æ”¹å™¨**

```java
/**
 * Beanå±æ€§æ‰¹é‡ä¿®æ”¹å·¥å…·
 */
public class BeanPropertyModifier implements BeanFactoryPostProcessor {
    
    private final Map<String, Map<String, Object>> modifications = new HashMap<>();
    
    /**
     * æ·»åŠ ä¿®æ”¹è§„åˆ™
     * @param beanName Beanåç§°
     * @param property å±æ€§å
     * @param value æ–°å€¼
     */
    public BeanPropertyModifier modify(String beanName, String property, Object value) {
        modifications.computeIfAbsent(beanName, k -> new HashMap<>())
                     .put(property, value);
        return this;
    }
    
    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        
        modifications.forEach((beanName, properties) -> {
            try {
                BeanDefinition beanDef = beanFactory.getBeanDefinition(beanName);
                MutablePropertyValues pvs = beanDef.getPropertyValues();
                
                properties.forEach(pvs::add);
                
                System.out.println("å·²ä¿®æ”¹Bean[" + beanName + "]çš„å±æ€§: " + properties);
                
            } catch (NoSuchBeanDefinitionException e) {
                System.err.println("è­¦å‘Šï¼šBeanä¸å­˜åœ¨ - " + beanName);
            }
        });
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```java
@Configuration
public class ModifierConfig {
    
    @Bean
    public static BeanFactoryPostProcessor propertyModifier() {
        return new BeanPropertyModifier()
            .modify("dataSource", "maxPoolSize", 100)
            .modify("dataSource", "timeout", 30000)
            .modify("userService", "cacheEnabled", true);
    }
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æœ¬è´¨ç†è§£ï¼šå®¹å™¨çº§åç½®å¤„ç†å™¨ï¼Œåœ¨Beanå®ä¾‹åŒ–å‰æ‰§è¡Œ
ğŸ”¸ æ ¸å¿ƒä½œç”¨ï¼šä¿®æ”¹BeanDefinitionï¼ˆBeançš„è®¾è®¡å›¾çº¸ï¼‰
ğŸ”¸ æ‰§è¡Œæ—¶æœºï¼šé…ç½®è§£æåã€Beanåˆ›å»ºå‰
ğŸ”¸ å…¸å‹åº”ç”¨ï¼šå ä½ç¬¦æ›¿æ¢ã€å±æ€§è¦†ç›–ã€åŠ¨æ€æ³¨å†ŒBean
ğŸ”¸ å…³é”®åŒºåˆ«ï¼šæ“ä½œå…ƒæ•°æ®ï¼Œä¸æ˜¯æ“ä½œBeanå®ä¾‹
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆåœ¨å®ä¾‹åŒ–ä¹‹å‰æ‰§è¡Œ**
```
Beanåˆ›å»ºæµç¨‹ï¼š
è®¾è®¡é˜¶æ®µï¼ˆBeanDefinitionï¼‰ â†’ æ–½å·¥é˜¶æ®µï¼ˆBeanå®ä¾‹ï¼‰

BeanFactoryPostProcessoråœ¨è®¾è®¡é˜¶æ®µå·¥ä½œï¼š
â€¢ ä¿®æ”¹è®¾è®¡å›¾çº¸ï¼ˆBeanDefinitionï¼‰
â€¢ è°ƒæ•´é…ç½®å‚æ•°
â€¢ å†³å®šå¦‚ä½•åˆ›å»ºBean

å¦‚æœBeanå·²ç»åˆ›å»ºï¼Œå†æ”¹å›¾çº¸å°±æ²¡æ„ä¹‰äº†
```

**ğŸ”¹ ä¸BeanPostProcessorçš„æœ¬è´¨åŒºåˆ«**
```
BeanFactoryPostProcessorï¼š
â€¢ ä½œç”¨å¯¹è±¡ï¼šBeanDefinitionï¼ˆè®¾è®¡å›¾ï¼‰
â€¢ æ‰§è¡Œæ—¶æœºï¼šBeanå®ä¾‹åŒ–ä¹‹å‰
â€¢ å…¸å‹åº”ç”¨ï¼šé…ç½®ä¿®æ”¹ã€Beanæ³¨å†Œ

BeanPostProcessorï¼š  
â€¢ ä½œç”¨å¯¹è±¡ï¼šBeanå®ä¾‹ï¼ˆæˆå“ï¼‰
â€¢ æ‰§è¡Œæ—¶æœºï¼šBeanåˆå§‹åŒ–å‰å
â€¢ å…¸å‹åº”ç”¨ï¼šAOPä»£ç†ã€æ³¨è§£å¤„ç†
```

**ğŸ”¹ ä¸‰ä¸ªå…¸å‹å®ç°ç±»çš„åº”ç”¨åœºæ™¯**
```
PropertyPlaceholderConfigurerï¼š
â†’ æ›¿æ¢ ${...} å ä½ç¬¦
â†’ ç®¡ç†å¤šç¯å¢ƒé…ç½®

PropertyOverrideConfigurerï¼š
â†’ å¼ºåˆ¶è¦†ç›–Beanå±æ€§
â†’ æµ‹è¯•ç¯å¢ƒé…ç½®è¦†ç›–

CustomEditorConfigurerï¼š
â†’ æ³¨å†Œè‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨
â†’ å¤„ç†ç‰¹æ®Šç±»å‹çš„å±æ€§æ³¨å…¥
```

### 6.3 æœ€ä½³å®è·µè¦ç‚¹


**âœ… æ¨èåšæ³•**
- ğŸ”¸ ä½¿ç”¨`static`æ–¹æ³•æ³¨å†Œï¼Œé¿å…å¾ªç¯ä¾èµ–
- ğŸ”¸ åˆç†ä½¿ç”¨`@Order`æ§åˆ¶æ‰§è¡Œé¡ºåº
- ğŸ”¸ åªæ“ä½œBeanDefinitionï¼Œä¸è¦è°ƒç”¨`getBean()`
- ğŸ”¸ å®Œå–„å¼‚å¸¸å¤„ç†ï¼Œé¿å…å½±å“å®¹å™¨å¯åŠ¨
- ğŸ”¸ åªä¿®æ”¹è‡ªå·±çš„Beanï¼Œä¸è¦åŠ¨æ¡†æ¶çš„Bean

**âŒ é¿å…é”™è¯¯**
- ğŸš« ä¸è¦åœ¨åç½®å¤„ç†å™¨ä¸­æ³¨å…¥å…¶ä»–Bean
- ğŸš« ä¸è¦è¿‡æ—©å®ä¾‹åŒ–Beanï¼ˆè°ƒç”¨getBeanï¼‰
- ğŸš« ä¸è¦ä¿®æ”¹Springæ¡†æ¶çš„å†…éƒ¨Bean
- ğŸš« ä¸è¦å¿½ç•¥å¼‚å¸¸ï¼Œå¯¼è‡´å¯åŠ¨å¤±è´¥

### 6.4 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **å¤šç¯å¢ƒé…ç½®**ï¼šå¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢é…ç½®
- **åŠ¨æ€Beanæ³¨å†Œ**ï¼šæ ¹æ®æ¡ä»¶è‡ªåŠ¨æ³¨å†ŒBean
- **å±æ€§æ‰¹é‡ä¿®æ”¹**ï¼šç»Ÿä¸€è°ƒæ•´Beançš„é…ç½®å‚æ•°
- **ç±»å‹è½¬æ¢æ‰©å±•**ï¼šæ”¯æŒè‡ªå®šä¹‰ç±»å‹çš„å±æ€§æ³¨å…¥

**ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹**
- **ä¿®æ”¹Beanå®šä¹‰**ï¼šè°ƒæ•´ä½œç”¨åŸŸã€æ‡’åŠ è½½ã€å±æ€§å€¼
- **æ³¨å†Œæ–°Bean**ï¼šåŠ¨æ€æ‰«æåŒ…å¹¶æ³¨å†ŒBean
- **å ä½ç¬¦æ›¿æ¢**ï¼špropertiesæ–‡ä»¶å˜é‡æ›¿æ¢
- **å±æ€§è¦†ç›–**ï¼šæµ‹è¯•ç¯å¢ƒå¼ºåˆ¶è¦†ç›–é…ç½®

**ğŸ’¡ æ ¸å¿ƒè®°å¿†å£è¯€**
```
å®¹å™¨å¯åŠ¨å…ˆæ‰§è¡Œï¼ŒBeanå®šä¹‰æ¥ä¿®æ”¹
å ä½æ›¿æ¢é…ç½®æ”¹ï¼ŒåŠ¨æ€æ³¨å†Œä¹Ÿèƒ½æ¥
å®ä¾‹åŒ–å‰æ˜¯æ—¶æœºï¼ŒBeanDefinitionæ˜¯å¯¹è±¡
é™æ€æ–¹æ³•æ¥æ³¨å†Œï¼Œé¡ºåºæ§åˆ¶ç”¨Order
åªæ”¹å®šä¹‰ä¸å–Beanï¼Œå¼‚å¸¸å¤„ç†è¦å‘¨å…¨
```

### 6.5 å­¦ä¹ æ£€æŸ¥ç‚¹


**ğŸ“ è‡ªæˆ‘æ£€æµ‹**

- [ ] èƒ½è§£é‡ŠBeanFactoryPostProcessorçš„ä½œç”¨å’Œæ‰§è¡Œæ—¶æœº
- [ ] ç†è§£BeanDefinitionæ˜¯ä»€ä¹ˆï¼ŒåŒ…å«å“ªäº›ä¿¡æ¯  
- [ ] æŒæ¡å¦‚ä½•è·å–å’Œä¿®æ”¹BeanDefinition
- [ ] äº†è§£ä¸‰ä¸ªå…¸å‹å®ç°ç±»çš„åº”ç”¨åœºæ™¯
- [ ] èƒ½å¤Ÿè‡ªå®šä¹‰å®ç°BeanFactoryPostProcessor
- [ ] çŸ¥é“ä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ

**ğŸ” æ·±å…¥æ€è€ƒ**
> ä¸ºä»€ä¹ˆSpringè¦è®¾è®¡BeanFactoryPostProcessorè¿™ä¸ªæœºåˆ¶ï¼Ÿ
> å¦‚æœæ²¡æœ‰å®ƒï¼Œæˆ‘ä»¬å¦‚ä½•å®ç°é…ç½®æ–‡ä»¶çš„å ä½ç¬¦æ›¿æ¢ï¼Ÿ
> åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ ä¼šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨å®ƒï¼Ÿ

**ğŸš€ è¿›é˜¶å­¦ä¹ æ–¹å‘**
- ç ”ç©¶Spring Bootçš„è‡ªåŠ¨é…ç½®åŸç†ï¼ˆå¤§é‡ä½¿ç”¨åç½®å¤„ç†å™¨ï¼‰
- å­¦ä¹ @ConfigurationPropertiesçš„å®ç°æœºåˆ¶
- äº†è§£Spring Cloud Configçš„é…ç½®åˆ·æ–°åŸç†
- æ¢ç´¢è‡ªå®šä¹‰Starterçš„å®ç°æ–¹å¼

---

**ç›¸å…³ä¸»é¢˜é“¾æ¥**
- ğŸ“– Beanç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹
- ğŸ”— BeanPostProcessorè¯¦è§£  
- ğŸ’¡ Spring Bootè‡ªåŠ¨é…ç½®åŸç†
- ğŸ¯ è‡ªå®šä¹‰Starterå¼€å‘æŒ‡å—