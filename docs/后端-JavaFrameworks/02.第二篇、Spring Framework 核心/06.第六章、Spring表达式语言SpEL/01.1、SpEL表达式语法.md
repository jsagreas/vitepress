---
title: 1ã€SpELè¡¨è¾¾å¼è¯­æ³•
---
## ğŸ“š ç›®å½•

1. [SpELæ˜¯ä»€ä¹ˆ](#1-SpELæ˜¯ä»€ä¹ˆ)
2. [å­—é¢é‡è¡¨è¾¾å¼](#2-å­—é¢é‡è¡¨è¾¾å¼)
3. [å˜é‡å¼•ç”¨](#3-å˜é‡å¼•ç”¨)
4. [æ–¹æ³•è°ƒç”¨](#4-æ–¹æ³•è°ƒç”¨)
5. [è¿ç®—ç¬¦è¯¦è§£](#5-è¿ç®—ç¬¦è¯¦è§£)
6. [å±æ€§è®¿é—®](#6-å±æ€§è®¿é—®)
7. [è°ƒç”¨é“¾æœºåˆ¶](#7-è°ƒç”¨é“¾æœºåˆ¶)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ SpELæ˜¯ä»€ä¹ˆ


### 1.1 SpELçš„æœ¬è´¨ç†è§£


**SpELå…¨ç§°**ï¼šSpring Expression Languageï¼ˆSpringè¡¨è¾¾å¼è¯­è¨€ï¼‰

**é€šä¿—è§£é‡Š**ï¼š
æƒ³è±¡ä½ åœ¨å†™ç¨‹åºæ—¶ï¼Œç»å¸¸éœ€è¦ä»å¯¹è±¡ä¸­å–å€¼ã€è®¡ç®—ç»“æœã€è°ƒç”¨æ–¹æ³•ã€‚ä¼ ç»Ÿæ–¹å¼éœ€è¦å†™ä¸€å †Javaä»£ç ï¼Œä½†SpELå°±åƒä¸€ä¸ª**"è¶…èƒ½åŠ›è®¡ç®—å™¨"**ï¼Œè®©ä½ ç”¨ä¸€è¡Œç®€çŸ­çš„è¡¨è¾¾å¼å°±èƒ½å®Œæˆè¿™äº›æ“ä½œã€‚

```
ä¼ ç»ŸJavaä»£ç ï¼š
User user = getUser();
String name = user.getName();
String upper = name.toUpperCase();

SpELè¡¨è¾¾å¼ï¼š
#{user.name.toUpperCase()}  â† ä¸€è¡Œæå®šï¼
```

### 1.2 SpELçš„ä½¿ç”¨åœºæ™¯


**ä¸»è¦ç”¨åœ¨å“ªé‡Œ**ï¼š
- âœ… **é…ç½®æ–‡ä»¶ä¸­** - åŠ¨æ€è®¾ç½®Beançš„å±æ€§å€¼
- âœ… **æ³¨è§£ä¸­** - `@Value`ã€`@ConditionalOnExpression`ç­‰
- âœ… **å®‰å…¨æ¡†æ¶** - Spring Securityçš„æƒé™åˆ¤æ–­
- âœ… **æ¨¡æ¿å¼•æ“** - Thymeleafç­‰è§†å›¾æ¨¡æ¿

**å®é™…ä¾‹å­**ï¼š
```java
// åœ¨é…ç½®ä¸­ä½¿ç”¨SpEL
@Value("#{systemProperties['user.home']}")  // è·å–ç³»ç»Ÿå±æ€§
private String userHome;

@Value("#{user.age > 18 ? 'adult' : 'minor'}")  // æ¡ä»¶åˆ¤æ–­
private String ageGroup;
```

### 1.3 SpELè¡¨è¾¾å¼çš„åŸºæœ¬æ ¼å¼


**ä¸¤ç§å†™æ³•**ï¼š

| æ ¼å¼ | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|------|---------|------|
| `#{ }` | **Springé…ç½®ä¸­** | `#{user.name}` |
| `${ }` | **å±æ€§æ–‡ä»¶å ä½ç¬¦** | `${server.port}` |

**é‡è¦åŒºåˆ«**ï¼š
```
#{...}  â†’ SpELè¡¨è¾¾å¼ï¼Œå¯ä»¥å†™é€»è¾‘ã€è°ƒç”¨æ–¹æ³•
${...}  â†’ åªèƒ½è¯»å–é…ç½®æ–‡ä»¶çš„å€¼ï¼Œä¸èƒ½è®¡ç®—

ç¤ºä¾‹ï¼š
#{user.age + 10}     âœ… å¯ä»¥è®¡ç®—
${app.version + 10}  âŒ ä¸èƒ½è®¡ç®—ï¼Œåªèƒ½å–å€¼
```

---

## 2. ğŸ“ å­—é¢é‡è¡¨è¾¾å¼


### 2.1 ä»€ä¹ˆæ˜¯å­—é¢é‡


**é€šä¿—ç†è§£**ï¼šå­—é¢é‡å°±æ˜¯**ç›´æ¥å†™åœ¨è¡¨è¾¾å¼é‡Œçš„å›ºå®šå€¼**ï¼Œä¸éœ€è¦ä»å…¶ä»–åœ°æ–¹è·å–ã€‚

### 2.2 å„ç§å­—é¢é‡ç±»å‹


#### ğŸ”¢ æ•°å­—å­—é¢é‡


```java
// æ•´æ•°
@Value("#{100}")
private int count;           // ç»“æœï¼š100

// å°æ•°
@Value("#{3.14}")
private double pi;           // ç»“æœï¼š3.14

// ç§‘å­¦è®¡æ•°æ³•
@Value("#{1.5e3}")
private double number;       // ç»“æœï¼š1500.0

// åå…­è¿›åˆ¶
@Value("#{0xFF}")
private int hex;             // ç»“æœï¼š255
```

#### ğŸ“œ å­—ç¬¦ä¸²å­—é¢é‡


```java
// å•å¼•å·åŒ…è£¹
@Value("#{'Hello World'}")
private String message;      // ç»“æœï¼šHello World

// è½¬ä¹‰å­—ç¬¦
@Value("#{'It\'s a book'}")
private String text;         // ç»“æœï¼šIt's a book

// æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆç”¨åŠ å·ï¼‰
@Value("#{'Hello' + ' ' + 'SpEL'}")
private String greeting;     // ç»“æœï¼šHello SpEL
```

#### âœ… å¸ƒå°”å­—é¢é‡


```java
@Value("#{true}")
private boolean isActive;    // ç»“æœï¼štrue

@Value("#{false}")
private boolean isDeleted;   // ç»“æœï¼šfalse
```

#### ğŸš« nullå­—é¢é‡


```java
@Value("#{null}")
private String value;        // ç»“æœï¼šnull

// å®é™…åº”ç”¨ï¼šæä¾›é»˜è®¤å€¼
@Value("#{user.email ?: 'no-email@example.com'}")
private String email;        // å¦‚æœemailæ˜¯nullï¼Œç”¨é»˜è®¤å€¼
```

### 2.3 å­—é¢é‡å®é™…åº”ç”¨


**é…ç½®é»˜è®¤å€¼**ï¼š
```java
@Component
public class AppConfig {
    // è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤30ç§’
    @Value("#{30}")
    private int timeout;
    
    // åº”ç”¨åç§°ï¼Œé»˜è®¤å€¼
    @Value("#{'MyApp'}")
    private String appName;
    
    // æ˜¯å¦å¼€å¯è°ƒè¯•ï¼Œé»˜è®¤å…³é—­
    @Value("#{false}")
    private boolean debug;
}
```

---

## 3. ğŸ”— å˜é‡å¼•ç”¨


### 3.1 ä»€ä¹ˆæ˜¯å˜é‡å¼•ç”¨


**é€šä¿—ç†è§£**ï¼šå˜é‡å¼•ç”¨å°±æ˜¯**ä»Springå®¹å™¨ä¸­æ‰¾åˆ°æŸä¸ªå¯¹è±¡æˆ–å€¼ï¼Œç„¶ååœ¨è¡¨è¾¾å¼é‡Œä½¿ç”¨å®ƒ**ã€‚

### 3.2 å¼•ç”¨Beanå¯¹è±¡


**åŸºæœ¬è¯­æ³•**ï¼š`#{beanåç§°}`

```java
// å‡è®¾æœ‰ä¸€ä¸ªé…ç½®Bean
@Component("appConfig")
public class AppConfig {
    private String name = "MyApplication";
    private int maxUsers = 100;
    
    // getteræ–¹æ³•...
}

// åœ¨å…¶ä»–åœ°æ–¹å¼•ç”¨è¿™ä¸ªBean
@Component
public class UserService {
    // å¼•ç”¨æ•´ä¸ªBean
    @Value("#{appConfig}")
    private AppConfig config;
    
    // å¼•ç”¨Beançš„å±æ€§
    @Value("#{appConfig.name}")
    private String appName;           // ç»“æœï¼šMyApplication
    
    // å¼•ç”¨Beançš„å±æ€§å¹¶è®¡ç®—
    @Value("#{appConfig.maxUsers * 2}")
    private int totalCapacity;        // ç»“æœï¼š200
}
```

### 3.3 å¼•ç”¨ç³»ç»Ÿå±æ€§å’Œç¯å¢ƒå˜é‡


**ç³»ç»Ÿå±æ€§**ï¼š
```java
// è·å–Javaç³»ç»Ÿå±æ€§
@Value("#{systemProperties['user.home']}")
private String userHome;           // ä¾‹å¦‚ï¼šC:\Users\YourName

@Value("#{systemProperties['os.name']}")
private String osName;             // ä¾‹å¦‚ï¼šWindows 10

@Value("#{systemProperties['java.version']}")
private String javaVersion;        // ä¾‹å¦‚ï¼š11.0.10
```

**ç¯å¢ƒå˜é‡**ï¼š
```java
// è·å–æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡
@Value("#{systemEnvironment['PATH']}")
private String path;

@Value("#{systemEnvironment['JAVA_HOME']}")
private String javaHome;
```

### 3.4 å¼•ç”¨é…ç½®æ–‡ä»¶çš„å€¼


**application.properties**ï¼š
```properties
app.name=MyApp
app.version=1.0.0
server.port=8080
```

**åœ¨ä»£ç ä¸­å¼•ç”¨**ï¼š
```java
@Component
public class AppInfo {
    // æ³¨æ„ï¼šè¿™é‡Œç”¨${}ä¸æ˜¯#{}
    @Value("${app.name}")
    private String name;              // ç»“æœï¼šMyApp
    
    // ç»“åˆSpELä½¿ç”¨
    @Value("#{${server.port} + 1000}")
    private int backupPort;           // ç»“æœï¼š9080
    
    // æä¾›é»˜è®¤å€¼
    @Value("${app.author:Unknown}")
    private String author;            // å¦‚æœæ²¡é…ç½®ï¼Œç”¨Unknown
}
```

### 3.5 å˜é‡å¼•ç”¨çš„å®é™…æ¡ˆä¾‹


**åœºæ™¯ï¼šæ ¹æ®ç¯å¢ƒåŠ¨æ€é…ç½®**

```java
@Component
public class DataSourceConfig {
    
    // å¼€å‘ç¯å¢ƒç”¨æœ¬åœ°æ•°æ®åº“
    @Value("#{systemEnvironment['ENV'] == 'dev' ? 'localhost' : 'prod-server'}")
    private String dbHost;
    
    // æ ¹æ®æ˜¯å¦æ˜¯ç”Ÿäº§ç¯å¢ƒå†³å®šè¿æ¥æ± å¤§å°
    @Value("#{systemEnvironment['ENV'] == 'prod' ? 100 : 10}")
    private int poolSize;
    
    // ç»„åˆå¤šä¸ªé…ç½®
    @Value("#{${db.username} + '@' + ${db.domain}}")
    private String fullUsername;
}
```

---

## 4. ğŸ“ æ–¹æ³•è°ƒç”¨


### 4.1 ä»€ä¹ˆæ˜¯æ–¹æ³•è°ƒç”¨


**é€šä¿—ç†è§£**ï¼šåœ¨SpELä¸­ï¼Œä½ å¯ä»¥**ç›´æ¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•**ï¼Œå°±åƒåœ¨Javaä»£ç é‡Œä¸€æ ·ï¼Œä½†æ›´ç®€æ´ã€‚

### 4.2 è°ƒç”¨å¯¹è±¡æ–¹æ³•


**åŸºæœ¬è¯­æ³•**ï¼š`#{å¯¹è±¡.æ–¹æ³•å(å‚æ•°)}`

```java
@Component
public class StringOperations {
    
    // è°ƒç”¨å­—ç¬¦ä¸²æ–¹æ³•
    @Value("#{'hello'.toUpperCase()}")
    private String upper;              // ç»“æœï¼šHELLO
    
    @Value("#{'WORLD'.toLowerCase()}")
    private String lower;              // ç»“æœï¼šworld
    
    @Value("#{'  trim me  '.trim()}")
    private String trimmed;            // ç»“æœï¼štrim me
    
    // å¸¦å‚æ•°çš„æ–¹æ³•
    @Value("#{'hello world'.substring(0, 5)}")
    private String sub;                // ç»“æœï¼šhello
    
    @Value("#{'apple,banana,orange'.split(',')}")
    private String[] fruits;           // ç»“æœï¼š[apple, banana, orange]
}
```

### 4.3 è°ƒç”¨Beançš„æ–¹æ³•


```java
// å‡è®¾æœ‰ä¸ªå·¥å…·Bean
@Component
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
    
    public String format(String template, Object... args) {
        return String.format(template, args);
    }
}

// ä½¿ç”¨æ–¹æ³•è°ƒç”¨
@Component
public class MathService {
    
    @Value("#{calculator.add(10, 20)}")
    private int sum;                   // ç»“æœï¼š30
    
    @Value("#{calculator.add(5 * 2, 15)}")
    private int result;                // ç»“æœï¼š25ï¼ˆå…ˆç®—5*2=10ï¼Œå†åŠ 15ï¼‰
    
    @Value("#{calculator.format('Hello %s', 'World')}")
    private String message;            // ç»“æœï¼šHello World
}
```

### 4.4 è°ƒç”¨é™æ€æ–¹æ³•


**è¯­æ³•**ï¼š`T(ç±»å…¨å).é™æ€æ–¹æ³•()`

```java
@Component
public class UtilityService {
    
    // è°ƒç”¨Mathç±»çš„é™æ€æ–¹æ³•
    @Value("#{T(java.lang.Math).random()}")
    private double random;             // ç»“æœï¼šéšæœºæ•° 0.0~1.0
    
    @Value("#{T(java.lang.Math).max(10, 20)}")
    private int max;                   // ç»“æœï¼š20
    
    @Value("#{T(java.lang.Math).PI}")
    private double pi;                 // ç»“æœï¼š3.141592653589793
    
    // è°ƒç”¨è‡ªå®šä¹‰å·¥å…·ç±»
    @Value("#{T(com.example.Utils).getCurrentDate()}")
    private String today;              // è°ƒç”¨è‡ªå·±å†™çš„å·¥å…·ç±»
}
```

### 4.5 é“¾å¼æ–¹æ³•è°ƒç”¨


**å¤šä¸ªæ–¹æ³•è¿ç»­è°ƒç”¨**ï¼š
```java
@Component
public class TextProcessor {
    
    // é“¾å¼è°ƒç”¨ï¼šå»ç©ºæ ¼â†’è½¬å¤§å†™â†’æˆªå–
    @Value("#{'  hello world  '.trim().toUpperCase().substring(0, 5)}")
    private String processed;          // ç»“æœï¼šHELLO
    
    // å®é™…åº”ç”¨ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥
    @Value("#{userInput.trim().toLowerCase().replaceAll('[^a-z]', '')}")
    private String cleanInput;         // å»é™¤éå­—æ¯å­—ç¬¦
}
```

### 4.6 æ–¹æ³•è°ƒç”¨çš„å®é™…åº”ç”¨


**åœºæ™¯ï¼šæ—¥æœŸæ ¼å¼åŒ–**ï¼š
```java
@Component
public class DateService {
    
    @Value("#{T(java.time.LocalDate).now()}")
    private LocalDate today;
    
    @Value("#{T(java.time.LocalDate).now().plusDays(7)}")
    private LocalDate nextWeek;
    
    @Value("#{T(java.time.LocalDate).now().format(T(java.time.format.DateTimeFormatter).ISO_DATE)}")
    private String todayStr;           // ç»“æœï¼š2025-09-24
}
```

---

## 5. âš™ï¸ è¿ç®—ç¬¦è¯¦è§£


### 5.1 ç®—æœ¯è¿ç®—ç¬¦


**åŸºæœ¬è¿ç®—**ï¼š`+`ã€`-`ã€`*`ã€`/`ã€`%`ã€`^`

```java
@Component
public class MathOperations {
    
    @Value("#{10 + 20}")
    private int addition;              // 30
    
    @Value("#{50 - 30}")
    private int subtraction;           // 20
    
    @Value("#{6 * 7}")
    private int multiplication;        // 42
    
    @Value("#{100 / 4}")
    private int division;              // 25
    
    @Value("#{17 % 5}")
    private int modulo;                // 2ï¼ˆä½™æ•°ï¼‰
    
    @Value("#{2 ^ 3}")
    private int power;                 // 8ï¼ˆ2çš„3æ¬¡æ–¹ï¼‰
}
```

**å­—ç¬¦ä¸²ç›¸åŠ **ï¼š
```java
@Value("#{'Hello' + ' ' + 'World'}")
private String concat;                 // Hello World

@Value("#{user.firstName + ' ' + user.lastName}")
private String fullName;               // æ‹¼æ¥å§“å
```

### 5.2 æ¯”è¾ƒè¿ç®—ç¬¦


**ç¬¦å·å½¢å¼**ï¼š`<`ã€`>`ã€`<=`ã€`>=`ã€`==`ã€`!=`  
**æ–‡æœ¬å½¢å¼**ï¼š`lt`ã€`gt`ã€`le`ã€`ge`ã€`eq`ã€`ne`

```java
@Component
public class ComparisonService {
    
    @Value("#{10 > 5}")
    private boolean greater;           // true
    
    @Value("#{age >= 18}")
    private boolean isAdult;           // æ ¹æ®ageå˜é‡åˆ¤æ–­
    
    // æ–‡æœ¬å½¢å¼ï¼ˆåœ¨XMLä¸­æ¨èç”¨è¿™ç§ï¼‰
    @Value("#{price lt 100}")
    private boolean affordable;        // price < 100
    
    @Value("#{status eq 'active'}")
    private boolean isActive;          // status == 'active'
    
    // å­—ç¬¦ä¸²æ¯”è¾ƒ
    @Value("#{'abc' == 'abc'}")
    private boolean same;              // true
}
```

**è¿ç®—ç¬¦å¯¹ç…§è¡¨**ï¼š

| ç¬¦å· | æ–‡æœ¬ | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|------|
| `<` | `lt` | å°äº | `#{5 lt 10}` â†’ true |
| `>` | `gt` | å¤§äº | `#{10 gt 5}` â†’ true |
| `<=` | `le` | å°äºç­‰äº | `#{5 le 5}` â†’ true |
| `>=` | `ge` | å¤§äºç­‰äº | `#{10 ge 5}` â†’ true |
| `==` | `eq` | ç­‰äº | `#{5 eq 5}` â†’ true |
| `!=` | `ne` | ä¸ç­‰äº | `#{5 ne 10}` â†’ true |

### 5.3 é€»è¾‘è¿ç®—ç¬¦


**è¿ç®—ç¬¦**ï¼š`and`ã€`or`ã€`not`ã€`!`

```java
@Component
public class LogicService {
    
    // ä¸è¿ç®—
    @Value("#{age >= 18 and age <= 60}")
    private boolean workingAge;        // 18åˆ°60å²ä¹‹é—´
    
    // æˆ–è¿ç®—
    @Value("#{role == 'admin' or role == 'manager'}")
    private boolean hasPermission;     // æ˜¯ç®¡ç†å‘˜æˆ–ç»ç†
    
    // éè¿ç®—
    @Value("#{not isDeleted}")
    private boolean isActive;          // æœªåˆ é™¤çš„
    
    @Value("#{!user.isBlocked}")
    private boolean canLogin;          // æœªè¢«å°ç¦çš„
    
    // ç»„åˆä½¿ç”¨
    @Value("#{(age >= 18 and country == 'CN') or isVip}")
    private boolean canAccess;         // ä¸­å›½æˆå¹´äººæˆ–VIPç”¨æˆ·
}
```

### 5.4 ä¸‰å…ƒè¿ç®—ç¬¦


**è¯­æ³•**ï¼š`æ¡ä»¶ ? å€¼1 : å€¼2`

```java
@Component
public class ConditionalService {
    
    @Value("#{age >= 18 ? 'adult' : 'minor'}")
    private String ageGroup;           // æ ¹æ®å¹´é¾„åˆ†ç»„
    
    @Value("#{score >= 60 ? 'pass' : 'fail'}")
    private String result;             // åŠæ ¼æˆ–ä¸åŠæ ¼
    
    // åµŒå¥—ä¸‰å…ƒè¿ç®—
    @Value("#{score >= 90 ? 'A' : score >= 80 ? 'B' : score >= 60 ? 'C' : 'D'}")
    private String grade;              // åˆ†æ•°ç­‰çº§
    
    // å®é™…åº”ç”¨ï¼šåŠ¨æ€æ–‡æ¡ˆ
    @Value("#{orderCount > 0 ? orderCount + ' orders' : 'No orders'}")
    private String message;            // æœ‰è®¢å•æ˜¾ç¤ºæ•°é‡ï¼Œæ— è®¢å•æ˜¾ç¤ºæç¤º
}
```

### 5.5 Elvisè¿ç®—ç¬¦ï¼ˆç©ºå€¼å¤„ç†ï¼‰


**è¯­æ³•**ï¼š`å˜é‡ ?: é»˜è®¤å€¼`ï¼ˆå˜é‡ä¸ºnullæ—¶ç”¨é»˜è®¤å€¼ï¼‰

```java
@Component
public class DefaultValueService {
    
    @Value("#{user.nickname ?: 'Guest'}")
    private String displayName;        // æ˜µç§°ä¸ºnullæ—¶æ˜¾ç¤ºGuest
    
    @Value("#{config.timeout ?: 30}")
    private int timeout;               // è¶…æ—¶æ—¶é—´é»˜è®¤30ç§’
    
    @Value("#{user.email ?: 'no-email@example.com'}")
    private String email;              // é‚®ç®±ä¸ºnullæ—¶ç”¨é»˜è®¤å€¼
    
    // é“¾å¼ä½¿ç”¨
    @Value("#{user.nickname ?: user.username ?: 'Anonymous'}")
    private String name;               // æ˜µç§°â†’ç”¨æˆ·åâ†’åŒ¿åï¼Œä¾æ¬¡å°è¯•
}
```

### 5.6 å®‰å…¨å¯¼èˆªè¿ç®—ç¬¦


**è¯­æ³•**ï¼š`?.`ï¼ˆé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰

```java
@Component
public class SafeAccessService {
    
    // æ™®é€šè®¿é—®ï¼šå¦‚æœuseræ˜¯nullä¼šæŠ¥é”™
    @Value("#{user.address.city}")     // âŒ å¯èƒ½ç©ºæŒ‡é’ˆå¼‚å¸¸
    
    // å®‰å…¨è®¿é—®ï¼šå¦‚æœuseræˆ–addressæ˜¯nullï¼Œè¿”å›nullè€Œä¸æŠ¥é”™
    @Value("#{user?.address?.city}")   // âœ… å®‰å…¨ï¼Œä¸ä¼šæŠ¥é”™
    private String city;
    
    // ç»“åˆElvisè¿ç®—ç¬¦æä¾›é»˜è®¤å€¼
    @Value("#{user?.address?.city ?: 'Unknown'}")
    private String cityWithDefault;    // å¦‚æœcityæ˜¯nullï¼Œç”¨Unknown
    
    // å®é™…åº”ç”¨ï¼šå¤šå±‚å¯¹è±¡è®¿é—®
    @Value("#{order?.customer?.address?.zipCode ?: '000000'}")
    private String zipCode;            // å®‰å…¨è·å–é‚®ç¼–
}
```

---

## 6. ğŸ  å±æ€§è®¿é—®


### 6.1 ä»€ä¹ˆæ˜¯å±æ€§è®¿é—®


**é€šä¿—ç†è§£**ï¼šå±æ€§è®¿é—®å°±æ˜¯**ä»å¯¹è±¡ä¸­å–å‡ºæŸä¸ªå±æ€§çš„å€¼**ï¼Œç±»ä¼¼äºè°ƒç”¨`getter`æ–¹æ³•ã€‚

### 6.2 å¯¹è±¡å±æ€§è®¿é—®


**åŸºæœ¬è¯­æ³•**ï¼š`#{å¯¹è±¡.å±æ€§å}`

```java
// Userç±»
public class User {
    private String name;
    private int age;
    private String email;
    // getter/setter...
}

// è®¿é—®å±æ€§
@Component
public class UserService {
    
    @Value("#{user.name}")
    private String userName;           // è·å–nameå±æ€§
    
    @Value("#{user.age}")
    private int userAge;               // è·å–ageå±æ€§
    
    @Value("#{user.email}")
    private String userEmail;          // è·å–emailå±æ€§
}
```

**æœ¬è´¨ç†è§£**ï¼š
```
#{user.name}  å®é™…ä¸Šè°ƒç”¨çš„æ˜¯  user.getName()

SpELä¼šè‡ªåŠ¨ï¼š
1. å…ˆæ‰¾åä¸ºnameçš„å±æ€§
2. è°ƒç”¨å¯¹åº”çš„getteræ–¹æ³•
3. è¿”å›å±æ€§å€¼
```

### 6.3 åµŒå¥—å±æ€§è®¿é—®


**å¤šå±‚å¯¹è±¡ç»“æ„**ï¼š
```java
// å¤šå±‚åµŒå¥—çš„ç±»
public class Order {
    private Customer customer;
    // getter/setter
}

public class Customer {
    private Address address;
    // getter/setter
}

public class Address {
    private String city;
    private String zipCode;
    // getter/setter
}

// è®¿é—®åµŒå¥—å±æ€§
@Component
public class OrderService {
    
    @Value("#{order.customer.address.city}")
    private String city;               // ä¸€è·¯è®¿é—®åˆ°city
    
    @Value("#{order.customer.address.zipCode}")
    private String zipCode;            // è®¿é—®é‚®ç¼–
}
```

**è®¿é—®è·¯å¾„å›¾ç¤º**ï¼š
```
orderï¼ˆè®¢å•å¯¹è±¡ï¼‰
  â””â”€â†’ customerï¼ˆå®¢æˆ·å¯¹è±¡ï¼‰
       â””â”€â†’ addressï¼ˆåœ°å€å¯¹è±¡ï¼‰
            â”œâ”€â†’ cityï¼ˆåŸå¸‚ï¼‰
            â””â”€â†’ zipCodeï¼ˆé‚®ç¼–ï¼‰

è¡¨è¾¾å¼ï¼š#{order.customer.address.city}
ç­‰åŒäºï¼šorder.getCustomer().getAddress().getCity()
```

### 6.4 é›†åˆå±æ€§è®¿é—®


#### ğŸ“‹ Listè®¿é—®


```java
@Component
public class ListService {
    
    @Value("#{users}")
    private List<User> allUsers;       // æ•´ä¸ªåˆ—è¡¨
    
    @Value("#{users[0]}")
    private User firstUser;            // ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼•0ï¼‰
    
    @Value("#{users[1].name}")
    private String secondName;         // ç¬¬äºŒä¸ªå…ƒç´ çš„name
    
    @Value("#{users.size()}")
    private int userCount;             // åˆ—è¡¨å¤§å°
    
    @Value("#{users.isEmpty()}")
    private boolean empty;             // æ˜¯å¦ä¸ºç©º
}
```

#### ğŸ“¦ Mapè®¿é—®


```java
@Component
public class MapService {
    
    @Value("#{config}")
    private Map<String, Object> allConfig;  // æ•´ä¸ªMap
    
    @Value("#{config['timeout']}")
    private int timeout;               // ç”¨é”®è·å–å€¼
    
    @Value("#{config.appName}")        // ä¹Ÿå¯ä»¥ç”¨ç‚¹å·
    private String appName;
    
    @Value("#{config.get('version')}")
    private String version;            // ç”¨getæ–¹æ³•
    
    @Value("#{config.containsKey('debug')}")
    private boolean hasDebug;          // æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
}
```

#### ğŸ¯ Arrayè®¿é—®


```java
@Component
public class ArrayService {
    
    @Value("#{numbers}")
    private int[] allNumbers;          // æ•´ä¸ªæ•°ç»„
    
    @Value("#{numbers[0]}")
    private int first;                 // ç¬¬ä¸€ä¸ªå…ƒç´ 
    
    @Value("#{numbers.length}")
    private int size;                  // æ•°ç»„é•¿åº¦
}
```

### 6.5 å±æ€§è®¿é—®çš„å®é™…åº”ç”¨


**åœºæ™¯1ï¼šé…ç½®ç®¡ç†**ï¼š
```java
@Component
public class AppConfig {
    
    // ä»é…ç½®Beanä¸­è·å–å„ç§é…ç½®
    @Value("#{configBean.database.host}")
    private String dbHost;
    
    @Value("#{configBean.database.port}")
    private int dbPort;
    
    @Value("#{configBean.features['enableCache']}")
    private boolean cacheEnabled;
    
    @Value("#{configBean.allowedRoles[0]}")
    private String primaryRole;
}
```

**åœºæ™¯2ï¼šåŠ¨æ€å›½é™…åŒ–**ï¼š
```java
@Component
public class I18nService {
    
    @Value("#{messages[locale + '.welcome']}")
    private String welcome;            // æ ¹æ®localeåŠ¨æ€è·å–
    
    // locale='en' â†’ messages['en.welcome'] â†’ "Welcome"
    // locale='zh' â†’ messages['zh.welcome'] â†’ "æ¬¢è¿"
}
```

---

## 7. ğŸ”— è°ƒç”¨é“¾æœºåˆ¶


### 7.1 ä»€ä¹ˆæ˜¯è°ƒç”¨é“¾


**é€šä¿—ç†è§£**ï¼šè°ƒç”¨é“¾å°±æ˜¯**æŠŠå¤šä¸ªæ“ä½œä¸²è”èµ·æ¥ï¼Œä¸€æ­¥ä¸€æ­¥æ‰§è¡Œ**ï¼Œå‰ä¸€æ­¥çš„ç»“æœä½œä¸ºåä¸€æ­¥çš„è¾“å…¥ã€‚

**å½¢è±¡æ¯”å–»**ï¼š
```
å°±åƒç”Ÿäº§æµæ°´çº¿ï¼š
åŸææ–™ â†’ åˆ‡å‰² â†’ æ‰“ç£¨ â†’ ä¸Šè‰² â†’ åŒ…è£… â†’ æˆå“

è°ƒç”¨é“¾ï¼š
åˆå§‹å€¼ â†’ æ–¹æ³•1 â†’ æ–¹æ³•2 â†’ æ–¹æ³•3 â†’ æœ€ç»ˆç»“æœ
```

### 7.2 æ–¹æ³•è°ƒç”¨é“¾


**åŸºæœ¬ç¤ºä¾‹**ï¼š
```java
@Component
public class ChainService {
    
    // ç®€å•é“¾å¼è°ƒç”¨
    @Value("#{'hello'.toUpperCase().substring(0, 3)}")
    private String result;             // "HEL"
    
    // æ‰§è¡Œè¿‡ç¨‹ï¼š
    // 1. 'hello' â†’ å­—ç¬¦ä¸²å¯¹è±¡
    // 2. .toUpperCase() â†’ "HELLO"
    // 3. .substring(0, 3) â†’ "HEL"
}
```

**å¤æ‚é“¾å¼è°ƒç”¨**ï¼š
```java
@Component
public class ComplexChain {
    
    @Value("#{'  Hello World  '.trim().toLowerCase().replace(' ', '-').concat('!')}")
    private String processed;          // "hello-world!"
    
    // æ‰§è¡Œæ­¥éª¤åˆ†è§£ï¼š
    // 1. '  Hello World  '      â†’ åŸå§‹å­—ç¬¦ä¸²
    // 2. .trim()                â†’ "Hello World"ï¼ˆå»ç©ºæ ¼ï¼‰
    // 3. .toLowerCase()         â†’ "hello world"ï¼ˆè½¬å°å†™ï¼‰
    // 4. .replace(' ', '-')     â†’ "hello-world"ï¼ˆæ›¿æ¢ç©ºæ ¼ï¼‰
    // 5. .concat('!')           â†’ "hello-world!"ï¼ˆæ‹¼æ¥æ„Ÿå¹å·ï¼‰
}
```

### 7.3 å±æ€§è®¿é—®é“¾


**åµŒå¥—å¯¹è±¡è®¿é—®**ï¼š
```java
@Component
public class PropertyChain {
    
    @Value("#{order.customer.address.city}")
    private String city;
    
    // è°ƒç”¨é“¾è¿‡ç¨‹ï¼š
    // 1. order â†’ è®¢å•å¯¹è±¡
    // 2. .customer â†’ è·å–å®¢æˆ·å¯¹è±¡
    // 3. .address â†’ è·å–åœ°å€å¯¹è±¡
    // 4. .city â†’ è·å–åŸå¸‚å±æ€§
}
```

### 7.4 æ··åˆè°ƒç”¨é“¾


**å±æ€§+æ–¹æ³•æ··åˆ**ï¼š
```java
@Component
public class MixedChain {
    
    // è·å–å±æ€§åè°ƒç”¨æ–¹æ³•
    @Value("#{user.name.toUpperCase()}")
    private String upperName;
    
    // è°ƒç”¨æ–¹æ³•åè®¿é—®å±æ€§
    @Value("#{userService.getCurrentUser().email}")
    private String email;
    
    // å¤æ‚æ··åˆé“¾
    @Value("#{order.items[0].product.name.substring(0, 10).toUpperCase()}")
    private String shortName;
    
    // æ‰§è¡Œè¿‡ç¨‹ï¼š
    // 1. order â†’ è®¢å•å¯¹è±¡
    // 2. .items[0] â†’ ç¬¬ä¸€ä¸ªè®¢å•é¡¹
    // 3. .product â†’ è·å–å•†å“å¯¹è±¡
    // 4. .name â†’ è·å–å•†å“åç§°
    // 5. .substring(0, 10) â†’ æˆªå–å‰10ä¸ªå­—ç¬¦
    // 6. .toUpperCase() â†’ è½¬å¤§å†™
}
```

### 7.5 å®‰å…¨è°ƒç”¨é“¾ï¼ˆé¿å…ç©ºæŒ‡é’ˆï¼‰


**ä½¿ç”¨`?.`å®‰å…¨å¯¼èˆª**ï¼š
```java
@Component
public class SafeChain {
    
    // æ™®é€šé“¾ï¼šä»»ä½•ä¸€æ­¥ä¸ºnulléƒ½ä¼šæŠ¥é”™
    @Value("#{user.profile.avatar.url}")     // âŒ å±é™©
    
    // å®‰å…¨é“¾ï¼šä»»ä½•ä¸€æ­¥ä¸ºnullè¿”å›nullï¼Œä¸æŠ¥é”™
    @Value("#{user?.profile?.avatar?.url}")  // âœ… å®‰å…¨
    private String avatarUrl;
    
    // å®‰å…¨é“¾+é»˜è®¤å€¼
    @Value("#{user?.profile?.avatar?.url ?: '/default-avatar.png'}")
    private String safeAvatar;         // å¦‚æœä»»ä½•ä¸€æ­¥nullï¼Œç”¨é»˜è®¤å¤´åƒ
}
```

### 7.6 è°ƒç”¨é“¾çš„å®é™…åº”ç”¨


**åœºæ™¯1ï¼šæ•°æ®æ¸…æ´—**ï¼š
```java
@Component
public class DataCleaner {
    
    // æ¸…ç†ç”¨æˆ·è¾“å…¥ï¼šå»ç©ºæ ¼â†’è½¬å°å†™â†’å»é™¤ç‰¹æ®Šå­—ç¬¦
    @Value("#{userInput.trim().toLowerCase().replaceAll('[^a-z0-9]', '')}")
    private String cleanedInput;
    
    // æ ¼å¼åŒ–ç”µè¯å·ç ï¼šå»é™¤éæ•°å­—â†’æˆªå–â†’æ ¼å¼åŒ–
    @Value("#{phone.replaceAll('[^0-9]', '').substring(0, 11)}")
    private String formattedPhone;
}
```

**åœºæ™¯2ï¼šåŠ¨æ€URLç”Ÿæˆ**ï¼š
```java
@Component
public class UrlBuilder {
    
    // ç”Ÿæˆç”¨æˆ·å¤´åƒURL
    @Value("#{baseUrl + '/avatar/' + user.id + '/' + user.avatar.filename}")
    private String avatarUrl;
    
    // ç”Ÿæˆæ–‡ä»¶ä¸‹è½½é“¾æ¥
    @Value("#{cdnUrl + '/files/' + file.category.toLowerCase() + '/' + file.name}")
    private String downloadUrl;
}
```

**åœºæ™¯3ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘**ï¼š
```java
@Component
public class BusinessLogic {
    
    // è®¡ç®—æŠ˜æ‰£åä»·æ ¼ï¼šåŸä»·â†’åº”ç”¨ä¼šå‘˜æŠ˜æ‰£â†’åº”ç”¨ä¿ƒé”€â†’å–æ•´
    @Value("#{product.price * member.discount * promotion.rate}")
    private double finalPrice;
    
    // åˆ¤æ–­ç”¨æˆ·æƒé™ï¼šæ£€æŸ¥è§’è‰²â†’æ£€æŸ¥VIPâ†’æ£€æŸ¥å¹´é¾„
    @Value("#{(user.role == 'admin' or user.isVip) and user.age >= 18}")
    private boolean hasAccess;
}
```

### 7.7 è°ƒç”¨é“¾æ‰§è¡Œæµç¨‹å›¾


```
ç¤ºä¾‹ï¼š#{user.name.toUpperCase().substring(0, 3)}

æ‰§è¡Œæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  user   â”‚ â†’ Userå¯¹è±¡
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .name  â”‚ â†’ "hello" (String)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚.toUpperCase()â”‚ â†’ "HELLO"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚.substring(0, 3) â”‚ â†’ "HEL"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
   ã€æœ€ç»ˆç»“æœã€‘
```

**è°ƒç”¨é“¾çš„æ ¸å¿ƒåŸç†**ï¼š
```
æ¯ä¸€æ­¥çš„è¿”å›å€¼éƒ½æ˜¯ä¸‹ä¸€æ­¥çš„è°ƒç”¨å¯¹è±¡

user              â†’ è¿”å›Userå¯¹è±¡
user.name         â†’ è¿”å›Stringå¯¹è±¡
name.toUpperCase()â†’ è¿”å›æ–°Stringå¯¹è±¡
...               â†’ ä¾æ­¤ç±»æ¨
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ SpELæœ¬è´¨ï¼šSpringçš„è¡¨è¾¾å¼è¯­è¨€ï¼Œç”¨ç®€çŸ­è¡¨è¾¾å¼å®Œæˆå¤æ‚æ“ä½œ
ğŸ”¸ åŸºæœ¬æ ¼å¼ï¼š#{è¡¨è¾¾å¼} ç”¨äºé…ç½®ï¼Œ${...} ç”¨äºå±æ€§å ä½ç¬¦
ğŸ”¸ å…­å¤§æ ¸å¿ƒï¼šå­—é¢é‡ã€å˜é‡ã€æ–¹æ³•ã€è¿ç®—ç¬¦ã€å±æ€§ã€è°ƒç”¨é“¾
ğŸ”¸ å®‰å…¨æœºåˆ¶ï¼š?. é¿å…ç©ºæŒ‡é’ˆï¼Œ?: æä¾›é»˜è®¤å€¼
ğŸ”¸ åº”ç”¨åœºæ™¯ï¼šé…ç½®æ³¨å…¥ã€æ¡ä»¶åˆ¤æ–­ã€æ•°æ®å¤„ç†
```

### 8.2 å…³é”®è¯­æ³•é€ŸæŸ¥è¡¨


| åŠŸèƒ½ | è¯­æ³•ç¤ºä¾‹ | è¯´æ˜ |
|------|---------|------|
| **å­—é¢é‡** | `#{'hello'}` `#{100}` `#{true}` | ç›´æ¥å†™å›ºå®šå€¼ |
| **å˜é‡å¼•ç”¨** | `#{user}` `#{user.name}` | å¼•ç”¨Beanæˆ–å±æ€§ |
| **æ–¹æ³•è°ƒç”¨** | `#{str.toUpperCase()}` | è°ƒç”¨å¯¹è±¡æ–¹æ³• |
| **é™æ€æ–¹æ³•** | `#{T(Math).random()}` | è°ƒç”¨é™æ€æ–¹æ³• |
| **ç®—æœ¯è¿ç®—** | `#{10 + 20}` `#{a * b}` | åŠ å‡ä¹˜é™¤ |
| **æ¯”è¾ƒè¿ç®—** | `#{age >= 18}` `#{a eq b}` | å¤§å°æ¯”è¾ƒ |
| **é€»è¾‘è¿ç®—** | `#{a and b}` `#{not c}` | ä¸æˆ–é |
| **ä¸‰å…ƒè¿ç®—** | `#{æ¡ä»¶ ? å€¼1 : å€¼2}` | æ¡ä»¶é€‰æ‹© |
| **Elvisè¿ç®—** | `#{name ?: 'Guest'}` | ç©ºå€¼é»˜è®¤ |
| **å®‰å…¨å¯¼èˆª** | `#{user?.name}` | é¿å…ç©ºæŒ‡é’ˆ |
| **é›†åˆè®¿é—®** | `#{list[0]}` `#{map['key']}` | ç´¢å¼•/é”®è®¿é—® |
| **è°ƒç”¨é“¾** | `#{user.name.toUpperCase()}` | è¿ç»­è°ƒç”¨ |

### 8.3 å®é™…åº”ç”¨è®°å¿†è¦ç‚¹


**ğŸ”¹ é…ç½®æ³¨å…¥ä¸‰æ­¥éª¤**ï¼š
```
1. ç¡®å®šæ•°æ®æºï¼ˆBeanã€é…ç½®æ–‡ä»¶ã€ç³»ç»Ÿå±æ€§ï¼‰
2. é€‰æ‹©åˆé€‚çš„è¯­æ³•ï¼ˆ#{}ã€${}ã€T()ç­‰ï¼‰
3. æ·»åŠ å®‰å…¨å¤„ç†ï¼ˆ?.ã€?:ï¼‰
```

**ğŸ”¹ è¿ç®—ç¬¦é€‰æ‹©åŸåˆ™**ï¼š
```
æ–‡æœ¬å½¢å¼ vs ç¬¦å·å½¢å¼ï¼š
- XMLé…ç½®ä¸­ç”¨æ–‡æœ¬ï¼ˆltã€gtã€andç­‰ï¼‰â†’ é¿å…è½¬ä¹‰
- Javaæ³¨è§£ä¸­ç”¨ç¬¦å·ï¼ˆ<ã€>ã€&&ç­‰ï¼‰â†’ æ›´ç›´è§‚
```

**ğŸ”¹ è°ƒç”¨é“¾è®¾è®¡æŠ€å·§**ï¼š
```
âœ… é€‚åº¦ä½¿ç”¨ï¼š2-4æ­¥æœ€ä½³
âŒ è¿‡é•¿é“¾å¼ï¼šéš¾ä»¥è°ƒè¯•å’Œç»´æŠ¤
âœ… æ·»åŠ å®‰å…¨å¯¼èˆªï¼š?.é¿å…ç©ºæŒ‡é’ˆ
âœ… æä¾›é»˜è®¤å€¼ï¼š?:ä¿è¯æœ‰å€¼
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
```
1. ç®€å•å–å€¼ä¼˜å…ˆç”¨${}ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
2. å¤æ‚è®¡ç®—æ‰ç”¨#{}
3. é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨å¤æ‚SpEL
4. é™æ€æ–¹æ³•è°ƒç”¨ç¼“å­˜ç»“æœ
```

### 8.4 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â“ é—®é¢˜1ï¼šè¡¨è¾¾å¼ä¸ç”Ÿæ•ˆ**
```
åŸå› ï¼šæ ¼å¼é”™è¯¯æˆ–ç¼ºå°‘@Valueæ³¨è§£
è§£å†³ï¼šæ£€æŸ¥#{}æ ¼å¼ï¼Œç¡®ä¿ç±»æœ‰@Componentç­‰æ³¨è§£
```

**â“ é—®é¢˜2ï¼šç©ºæŒ‡é’ˆå¼‚å¸¸**
```
åŸå› ï¼šå¯¹è±¡ä¸ºnullæ—¶è®¿é—®å±æ€§
è§£å†³ï¼šä½¿ç”¨ ?. å®‰å…¨å¯¼èˆªç¬¦
ç¤ºä¾‹ï¼š#{user?.name} æ›¿ä»£ #{user.name}
```

**â“ é—®é¢˜3ï¼šç±»å‹è½¬æ¢é”™è¯¯**
```
åŸå› ï¼šè¡¨è¾¾å¼ç»“æœç±»å‹ä¸å˜é‡ç±»å‹ä¸åŒ¹é…
è§£å†³ï¼šæ·»åŠ ç±»å‹è½¬æ¢æˆ–è°ƒæ•´å˜é‡ç±»å‹
ç¤ºä¾‹ï¼š@Value("#{T(Integer).parseInt(str)}")
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- SpELè¡¨è¾¾å¼åŠŸèƒ½å¼ºï¼Œäº•å·å¤§æ‹¬å·ä¸èƒ½å¿˜
- å­—é¢å˜é‡å’Œæ–¹æ³•ï¼Œè¿ç®—å±æ€§åŠ è°ƒç”¨é“¾
- å®‰å…¨å¯¼èˆªç”¨é—®å·ï¼Œé»˜è®¤å€¼ç”¨å†’å·å¸®
- é…ç½®æ³¨å…¥æœ€å¸¸ç”¨ï¼ŒåŠ¨æ€çµæ´»æ˜“æ‰©å¼ 