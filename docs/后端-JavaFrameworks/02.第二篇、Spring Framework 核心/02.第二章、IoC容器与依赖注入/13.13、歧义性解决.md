---
title: 13ã€æ­§ä¹‰æ€§è§£å†³
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯æ³¨å…¥æ­§ä¹‰æ€§é—®é¢˜](#1-ä»€ä¹ˆæ˜¯æ³¨å…¥æ­§ä¹‰æ€§é—®é¢˜)
2. [Primaryä¼˜å…ˆçº§è§£å†³æ–¹æ¡ˆ](#2-Primaryä¼˜å…ˆçº§è§£å†³æ–¹æ¡ˆ)
3. [Qualifieré™å®šç¬¦ç²¾ç¡®åŒ¹é…](#3-Qualifieré™å®šç¬¦ç²¾ç¡®åŒ¹é…)
4. [Orderæ’åºæ§åˆ¶æ³¨å…¥é¡ºåº](#4-Orderæ’åºæ§åˆ¶æ³¨å…¥é¡ºåº)
5. [æ­§ä¹‰æ€§é—®é¢˜æ’æŸ¥æ€è·¯](#5-æ­§ä¹‰æ€§é—®é¢˜æ’æŸ¥æ€è·¯)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä»€ä¹ˆæ˜¯æ³¨å…¥æ­§ä¹‰æ€§é—®é¢˜


### 1.1 é—®é¢˜çš„æœ¬è´¨


**ç®€å•ç†è§£**ï¼šå½“Springå®¹å™¨ä¸­æœ‰å¤šä¸ªåŒç±»å‹çš„Beanæ—¶ï¼ŒSpringä¸çŸ¥é“è¯¥æ³¨å…¥å“ªä¸€ä¸ªï¼Œå°±åƒä½ å»é¤å…ç‚¹"ä¸€æ¯å’–å•¡"ï¼ŒæœåŠ¡å‘˜é—®ä½ "è¦ç¾å¼è¿˜æ˜¯æ‹¿é“ï¼Ÿ"

```
çœŸå®åœºæ™¯ç±»æ¯”ï¼š

ä½ éœ€è¦ä¸€ä¸ª"æ”¯ä»˜æœåŠ¡"
å®¹å™¨ä¸­æœ‰ï¼š
  â”œâ”€â”€ æ”¯ä»˜å®æ”¯ä»˜æœåŠ¡
  â”œâ”€â”€ å¾®ä¿¡æ”¯ä»˜æœåŠ¡  
  â””â”€â”€ é“¶è¡Œå¡æ”¯ä»˜æœåŠ¡

Springï¼šæˆ‘è¯¥ç»™ä½ å“ªä¸€ä¸ªï¼Ÿï¼Ÿï¼ŸğŸ˜µ
```

### 1.2 è§¦å‘æ­§ä¹‰çš„å…¸å‹åœºæ™¯


**åœºæ™¯ä¸€ï¼šæ¥å£æœ‰å¤šä¸ªå®ç°ç±»**
```java
// å®šä¹‰æ”¯ä»˜æ¥å£
public interface PaymentService {
    void pay(double amount);
}

// å®ç°ç±»1ï¼šæ”¯ä»˜å®
@Service
public class AlipayService implements PaymentService {
    public void pay(double amount) {
        System.out.println("æ”¯ä»˜å®æ”¯ä»˜ï¼š" + amount);
    }
}

// å®ç°ç±»2ï¼šå¾®ä¿¡æ”¯ä»˜
@Service  
public class WechatPayService implements PaymentService {
    public void pay(double amount) {
        System.out.println("å¾®ä¿¡æ”¯ä»˜ï¼š" + amount);
    }
}

// æ³¨å…¥æ—¶äº§ç”Ÿæ­§ä¹‰ âŒ
@Service
public class OrderService {
    @Autowired
    private PaymentService paymentService; // Springä¸çŸ¥é“æ³¨å…¥å“ªä¸ªï¼
}
```

**åœºæ™¯äºŒï¼šåŒç±»å‹å¤šä¸ªBean**
```java
@Configuration
public class DatabaseConfig {
    
    @Bean
    public DataSource mysqlDataSource() {
        // MySQLæ•°æ®æºé…ç½®
        return new HikariDataSource();
    }
    
    @Bean
    public DataSource postgresDataSource() {
        // PostgreSQLæ•°æ®æºé…ç½®
        return new HikariDataSource();
    }
}

// æ³¨å…¥æ—¶æ­§ä¹‰ âŒ
@Service
public class UserService {
    @Autowired
    private DataSource dataSource; // è¦å“ªä¸ªæ•°æ®æºï¼Ÿ
}
```

### 1.3 æ­§ä¹‰å¼‚å¸¸çš„è¡¨ç°


```
é”™è¯¯ä¿¡æ¯ç¤ºä¾‹ï¼š

org.springframework.beans.factory.NoUniqueBeanDefinitionException: 
No qualifying bean of type 'com.example.PaymentService' available: 
expected single matching bean but found 2: alipayService,wechatPayService

ç¿»è¯‘ï¼šæ‰¾åˆ°äº†2ä¸ªPaymentServiceç±»å‹çš„Beanï¼Œä¸çŸ¥é“ç”¨å“ªä¸ªï¼
```

> âš ï¸ **æ–°æ‰‹å¸¸è§è¯¯åŒº**  
> ä¸æ˜¯è¯´å®¹å™¨ä¸­ä¸èƒ½æœ‰å¤šä¸ªåŒç±»å‹Beanï¼Œè€Œæ˜¯åœ¨æ³¨å…¥æ—¶å¿…é¡»æ˜ç¡®å‘Šè¯‰Springç”¨å“ªä¸€ä¸ª

---

## 2. ğŸ† Primaryä¼˜å…ˆçº§è§£å†³æ–¹æ¡ˆ


### 2.1 Primaryæ³¨è§£çš„ä½œç”¨


**@Primary**ï¼šç»™æŸä¸ªBeanè´´ä¸Š"ä¼˜å…ˆé€‰æ‹©"çš„æ ‡ç­¾ï¼Œå½“å‡ºç°æ­§ä¹‰æ—¶ï¼ŒSpringä¼šä¼˜å…ˆé€‰æ‹©å®ƒ

```
ç†è§£è®°å¿†ï¼š

å°±åƒç­çº§é€‰ç­é•¿ï¼Œæœ‰å¤šä¸ªå€™é€‰äºº
åŠ äº†@Primary = è€å¸ˆæ¨èçš„å€™é€‰äºº
æ²¡æœ‰æ˜ç¡®æŒ‡å®šæ—¶ï¼Œå°±é€‰è€å¸ˆæ¨èçš„
```

### 2.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


**æ–¹å¼ä¸€ï¼šåœ¨å®ç°ç±»ä¸Šæ ‡æ³¨**
```java
// æ”¯ä»˜å®ä½œä¸ºé»˜è®¤æ”¯ä»˜æ–¹å¼
@Primary  // ğŸ‘ˆ æ ‡è®°ä¸ºé¦–é€‰
@Service
public class AlipayService implements PaymentService {
    public void pay(double amount) {
        System.out.println("é»˜è®¤ä½¿ç”¨æ”¯ä»˜å®ï¼š" + amount);
    }
}

@Service
public class WechatPayService implements PaymentService {
    public void pay(double amount) {
        System.out.println("å¾®ä¿¡æ”¯ä»˜ï¼š" + amount);
    }
}

// ç°åœ¨æ³¨å…¥ä¸ä¼šæŠ¥é”™äº† âœ…
@Service
public class OrderService {
    @Autowired
    private PaymentService paymentService; // è‡ªåŠ¨æ³¨å…¥ AlipayService
}
```

**æ–¹å¼äºŒï¼šåœ¨@Beanæ–¹æ³•ä¸Šæ ‡æ³¨**
```java
@Configuration
public class PaymentConfig {
    
    @Primary  // ğŸ‘ˆ æ ‡è®°ä¸ºä¸»æ•°æ®æº
    @Bean
    public DataSource primaryDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/main");
        return dataSource;
    }
    
    @Bean
    public DataSource backupDataSource() {
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl("jdbc:mysql://localhost:3306/backup");
        return dataSource;
    }
}
```

### 2.3 Primaryçš„å±€é™æ€§


```
ä¼˜ç‚¹ï¼š
âœ… è®¾ç½®ç®€å•ï¼Œä¸€ä¸ªæ³¨è§£æå®š
âœ… é€‚åˆæœ‰æ˜ç¡®é»˜è®¤é€‰æ‹©çš„åœºæ™¯
âœ… ä¸å½±å“å…¶ä»–æ³¨å…¥ç‚¹

ç¼ºç‚¹ï¼š
âŒ åªèƒ½æ ‡è®°ä¸€ä¸ªBeanä¸ºPrimary
âŒ å¦‚æœéœ€è¦çµæ´»åˆ‡æ¢ï¼Œä¸å¤Ÿçµæ´»
âŒ æ— æ³•åœ¨æ³¨å…¥æ—¶åŠ¨æ€é€‰æ‹©
```

> ğŸ’¡ **ä½¿ç”¨å»ºè®®**  
> Primaryé€‚åˆ"å¤§éƒ¨åˆ†æƒ…å†µç”¨è¿™ä¸ªï¼Œå°‘æ•°æƒ…å†µç‰¹æ®ŠæŒ‡å®š"çš„åœºæ™¯

---

## 3. ğŸ¯ Qualifieré™å®šç¬¦ç²¾ç¡®åŒ¹é…


### 3.1 Qualifierçš„å·¥ä½œåŸç†


**@Qualifier**ï¼šé€šè¿‡åç§°ç²¾ç¡®æŒ‡å®šè¦æ³¨å…¥å“ªä¸ªBeanï¼Œå°±åƒç‚¹èœæ—¶è¯´"æˆ‘è¦é‚£ä¸ªæ‹›ç‰Œèœ"

```
å·¥ä½œæœºåˆ¶ï¼š

å®¹å™¨ä¸­çš„Beanï¼š
  alipayService    (åç§°)
  wechatPayService (åç§°)

@Qualifier("alipayService") 
         â†“
   ç²¾ç¡®åŒ¹é…åç§°
         â†“
   æ³¨å…¥ alipayService
```

### 3.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


**æŒ‰Beanåç§°é™å®š**
```java
@Service
public class OrderService {
    
    // æ˜ç¡®æŒ‡å®šä½¿ç”¨æ”¯ä»˜å®
    @Autowired
    @Qualifier("alipayService")  // ğŸ‘ˆ æŒ‡å®šBeanåç§°
    private PaymentService alipayPayment;
    
    // æ˜ç¡®æŒ‡å®šä½¿ç”¨å¾®ä¿¡
    @Autowired
    @Qualifier("wechatPayService")
    private PaymentService wechatPayment;
    
    public void payByAlipay(double amount) {
        alipayPayment.pay(amount);
    }
    
    public void payByWechat(double amount) {
        wechatPayment.pay(amount);
    }
}
```

**æ„é€ å™¨æ³¨å…¥ä¸­ä½¿ç”¨**
```java
@Service
public class PaymentProcessor {
    
    private final PaymentService paymentService;
    
    // æ„é€ å™¨å‚æ•°ä¸Šä½¿ç”¨Qualifier
    @Autowired
    public PaymentProcessor(
        @Qualifier("alipayService") PaymentService paymentService
    ) {
        this.paymentService = paymentService;
    }
}
```

### 3.3 è‡ªå®šä¹‰é™å®šç¬¦


**åˆ›å»ºè¯­ä¹‰åŒ–çš„é™å®šç¬¦æ³¨è§£**
```java
// è‡ªå®šä¹‰é™å®šç¬¦æ³¨è§£
@Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface Alipay {
}

@Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface WechatPay {
}
```

**ä½¿ç”¨è‡ªå®šä¹‰é™å®šç¬¦**
```java
// åœ¨å®ç°ç±»ä¸Šæ ‡æ³¨
@Service
@Alipay  // ğŸ‘ˆ ä½¿ç”¨è‡ªå®šä¹‰é™å®šç¬¦
public class AlipayService implements PaymentService {
    // ...
}

@Service
@WechatPay
public class WechatPayService implements PaymentService {
    // ...
}

// æ³¨å…¥æ—¶ä½¿ç”¨
@Service
public class OrderService {
    
    @Autowired
    @Alipay  // ğŸ‘ˆ è¯­ä¹‰æ›´æ¸…æ™°
    private PaymentService alipayPayment;
    
    @Autowired
    @WechatPay
    private PaymentService wechatPayment;
}
```

### 3.4 Qualifier vs Primaryå¯¹æ¯”


| å¯¹æ¯”ç»´åº¦ | **@Primary** | **@Qualifier** |
|---------|-------------|---------------|
| ğŸ“ **ä½œç”¨èŒƒå›´** | `å…¨å±€é»˜è®¤é€‰æ‹©` | `ç²¾ç¡®æŒ‡å®šæ³¨å…¥ç›®æ ‡` |
| ğŸ¯ **ä½¿ç”¨ä½ç½®** | `Beanå®šä¹‰å¤„` | `æ³¨å…¥ç‚¹` |
| ğŸ”¢ **æ•°é‡é™åˆ¶** | `æ¯ç§ç±»å‹åªèƒ½ä¸€ä¸ª` | `å¯å¤šä¸ªï¼ŒæŒ‰éœ€é€‰æ‹©` |
| ğŸ”§ **çµæ´»æ€§** | `è¾ƒä½ï¼Œå…¨å±€ç”Ÿæ•ˆ` | `é«˜ï¼Œæ¯ä¸ªæ³¨å…¥ç‚¹å¯ä¸åŒ` |
| ğŸ“ **é€‚ç”¨åœºæ™¯** | `æœ‰æ˜ç¡®é»˜è®¤é€‰æ‹©` | `éœ€è¦çµæ´»åˆ‡æ¢` |

```
é€‰æ‹©å»ºè®®ï¼š

å•ä¸€é»˜è®¤åœºæ™¯ï¼š
â””â”€â”€ ä½¿ç”¨ @Primary
    ä¾‹ï¼šå¤§éƒ¨åˆ†åœ°æ–¹ç”¨MySQLï¼Œå°‘æ•°ç”¨PostgreSQL

å¤šåœºæ™¯å¹¶å­˜ï¼š
â””â”€â”€ ä½¿ç”¨ @Qualifier  
    ä¾‹ï¼šè®¢å•ç”¨MySQLï¼Œæ—¥å¿—ç”¨MongoDBï¼Œç¼“å­˜ç”¨Redis
```

---

## 4. ğŸ“Š Orderæ’åºæ§åˆ¶æ³¨å…¥é¡ºåº


### 4.1 Orderæ³¨è§£çš„ä½œç”¨


**@Order**ï¼šå½“æ³¨å…¥`List`æˆ–`æ•°ç»„`ç±»å‹æ—¶ï¼Œæ§åˆ¶Beançš„æ³¨å…¥é¡ºåº

```
åº”ç”¨åœºæ™¯ï¼š

éœ€è¦æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œå¤šä¸ªå¤„ç†å™¨ï¼š
  â””â”€â”€ æ•°æ®éªŒè¯å™¨ï¼ˆå…ˆæ‰§è¡Œï¼‰
  â””â”€â”€ æ•°æ®è½¬æ¢å™¨ï¼ˆåæ‰§è¡Œï¼‰
  â””â”€â”€ æ•°æ®æŒä¹…åŒ–ï¼ˆæœ€åæ‰§è¡Œï¼‰
```

### 4.2 Listé›†åˆæ³¨å…¥æ’åº


**å®šä¹‰å¤šä¸ªå¤„ç†å™¨**
```java
// æ•°æ®å¤„ç†å™¨æ¥å£
public interface DataProcessor {
    void process(String data);
}

// éªŒè¯å¤„ç†å™¨ - ä¼˜å…ˆçº§æœ€é«˜
@Order(1)  // ğŸ‘ˆ æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
@Component
public class ValidationProcessor implements DataProcessor {
    public void process(String data) {
        System.out.println("1. éªŒè¯æ•°æ®ï¼š" + data);
    }
}

// è½¬æ¢å¤„ç†å™¨ - ä¼˜å…ˆçº§ä¸­ç­‰
@Order(2)
@Component
public class TransformProcessor implements DataProcessor {
    public void process(String data) {
        System.out.println("2. è½¬æ¢æ•°æ®ï¼š" + data);
    }
}

// æŒä¹…åŒ–å¤„ç†å™¨ - ä¼˜å…ˆçº§æœ€ä½
@Order(3)
@Component
public class PersistenceProcessor implements DataProcessor {
    public void process(String data) {
        System.out.println("3. ä¿å­˜æ•°æ®ï¼š" + data);
    }
}
```

**æ³¨å…¥Listå¹¶æŒ‰é¡ºåºæ‰§è¡Œ**
```java
@Service
public class DataService {
    
    // æ³¨å…¥æ‰€æœ‰DataProcessorï¼Œè‡ªåŠ¨æŒ‰@Orderæ’åº
    @Autowired
    private List<DataProcessor> processors;
    
    public void handleData(String data) {
        // æŒ‰Orderé¡ºåºæ‰§è¡Œï¼š1 -> 2 -> 3
        for (DataProcessor processor : processors) {
            processor.process(data);
        }
    }
}

// æ‰§è¡Œç»“æœï¼š
// 1. éªŒè¯æ•°æ®ï¼štest
// 2. è½¬æ¢æ•°æ®ï¼štest  
// 3. ä¿å­˜æ•°æ®ï¼štest
```

### 4.3 Orderçš„ä¼˜å…ˆçº§è§„åˆ™


```
æ’åºè§„åˆ™ï¼š

æ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼š
  @Order(1)  -> ç¬¬ä¸€ä¸ªæ‰§è¡Œ
  @Order(2)  -> ç¬¬äºŒä¸ªæ‰§è¡Œ
  @Order(10) -> é åæ‰§è¡Œ

ç‰¹æ®Šå€¼ï¼š
  @Order(Ordered.HIGHEST_PRECEDENCE) -> æœ€é«˜ä¼˜å…ˆçº§ï¼ˆInteger.MIN_VALUEï¼‰
  @Order(Ordered.LOWEST_PRECEDENCE)  -> æœ€ä½ä¼˜å…ˆçº§ï¼ˆInteger.MAX_VALUEï¼‰

é»˜è®¤å€¼ï¼š
  ä¸åŠ @Orderçš„Beané»˜è®¤ä¸º Ordered.LOWEST_PRECEDENCE
```

**å®é™…åº”ç”¨ç¤ºä¾‹**
```java
// æ”¯ä»˜æ–¹å¼æŒ‰ä¼˜å…ˆçº§æ’åº
@Order(1)
@Service
public class AlipayService implements PaymentService {
    // ä¼˜å…ˆæ¨èæ”¯ä»˜å®
}

@Order(2)  
@Service
public class WechatPayService implements PaymentService {
    // æ¬¡é€‰å¾®ä¿¡æ”¯ä»˜
}

@Order(3)
@Service
public class BankCardService implements PaymentService {
    // æœ€åé€‰æ‹©é“¶è¡Œå¡
}

@Service
public class PaymentManager {
    
    @Autowired
    private List<PaymentService> paymentServices;
    
    public void showPaymentOptions() {
        // æŒ‰ä¼˜å…ˆçº§å±•ç¤ºæ”¯ä»˜æ–¹å¼
        for (PaymentService service : paymentServices) {
            System.out.println(service.getClass().getSimpleName());
        }
    }
}
```

### 4.4 Orderæ³¨æ„äº‹é¡¹


> âš ï¸ **é‡è¦æé†’**
> - `@Order`åªå¯¹List/æ•°ç»„æ³¨å…¥æœ‰æ•ˆ
> - å•ä¸ªBeanæ³¨å…¥æ—¶Orderä¸èµ·ä½œç”¨
> - éœ€è¦é…åˆé›†åˆæ³¨å…¥ä½¿ç”¨

```java
// âœ… Orderç”Ÿæ•ˆ
@Autowired
private List<PaymentService> services;

// âŒ Orderä¸ç”Ÿæ•ˆï¼ˆä¼šæŠ¥æ­§ä¹‰é”™è¯¯ï¼‰
@Autowired
private PaymentService service;
```

---

## 5. ğŸ” æ­§ä¹‰æ€§é—®é¢˜æ’æŸ¥æ€è·¯


### 5.1 å¿«é€Ÿå®šä½é—®é¢˜


**æ­¥éª¤ä¸€ï¼šçœ‹é”™è¯¯ä¿¡æ¯**
```
NoUniqueBeanDefinitionException: 
expected single matching bean but found 2: beanA, beanB
                                          â†‘
                              è¿™é‡Œä¼šå‘Šè¯‰ä½ å†²çªçš„Beanåç§°
```

**æ­¥éª¤äºŒï¼šæ£€æŸ¥Beanå®šä¹‰**
```java
// æ‰¾åˆ°è¿™ä¸¤ä¸ªBeançš„å®šä¹‰ä½ç½®
// çœ‹å®ƒä»¬æ˜¯å¦å®ç°äº†åŒä¸€ä¸ªæ¥å£æˆ–ç»§æ‰¿åŒä¸€ä¸ªç±»

@Service("beanA")  // ğŸ‘ˆ è®°ä½è¿™ä¸ªåç§°
public class ServiceA implements MyService { }

@Service("beanB")  // ğŸ‘ˆ è®°ä½è¿™ä¸ªåç§°  
public class ServiceB implements MyService { }
```

### 5.2 è§£å†³æ–¹æ¡ˆå†³ç­–æ ‘


```
é‡åˆ°æ­§ä¹‰é—®é¢˜æ—¶çš„å†³ç­–æµç¨‹ï¼š

æ˜¯å¦æœ‰æ˜ç¡®çš„é»˜è®¤é€‰æ‹©ï¼Ÿ
  â”œâ”€â”€ æ˜¯ â†’ åœ¨é»˜è®¤Beanä¸ŠåŠ  @Primary
  â”‚        â””â”€â”€ å®Œæˆ âœ…
  â”‚
  â””â”€â”€ å¦ â†’ ä¸åŒåœºæ™¯éœ€è¦ä¸åŒBeanï¼Ÿ
            â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨ @Qualifier ç²¾ç¡®æŒ‡å®š
            â”‚        â””â”€â”€ å®Œæˆ âœ…
            â”‚
            â””â”€â”€ å¦ â†’ éœ€è¦æ³¨å…¥æ‰€æœ‰Beanï¼Ÿ
                      â””â”€â”€ æ”¹ä¸ºæ³¨å…¥ List<T>
                           â”œâ”€â”€ éœ€è¦æ’åºï¼Ÿâ†’ åŠ  @Order
                           â””â”€â”€ ä¸éœ€è¦æ’åºï¼Ÿâ†’ ç›´æ¥ç”¨å³å¯
                                â””â”€â”€ å®Œæˆ âœ…
```

### 5.3 å¸¸è§é—®é¢˜ä¸è§£å†³


**é—®é¢˜1ï¼šBeanåç§°ä¸ç¡®å®š**
```java
// âŒ ä¸ç¡®å®šBeanåç§°
@Qualifier("???")  // è¿™ä¸ªåå­—æ˜¯å•¥ï¼Ÿ

// âœ… æŸ¥çœ‹Beanåç§°çš„æ–¹æ³•
@Service  // é»˜è®¤åç§°ï¼šç±»åé¦–å­—æ¯å°å†™ alipayService
public class AlipayService { }

@Service("myAlipay")  // è‡ªå®šä¹‰åç§°ï¼šmyAlipay
public class AlipayService { }

@Bean  // é»˜è®¤åç§°ï¼šæ–¹æ³•å paymentService
public PaymentService paymentService() { }
```

**é—®é¢˜2ï¼šPrimaryå’ŒQualifierå†²çª**
```java
@Primary
@Service
public class AlipayService implements PaymentService { }

@Service  
public class WechatPayService implements PaymentService { }

// æƒ…å†µ1ï¼šä¸æŒ‡å®šQualifier
@Autowired
private PaymentService service;  // æ³¨å…¥ AlipayServiceï¼ˆPrimaryç”Ÿæ•ˆï¼‰

// æƒ…å†µ2ï¼šæŒ‡å®šQualifier  
@Autowired
@Qualifier("wechatPayService")
private PaymentService service;  // æ³¨å…¥ WechatPayServiceï¼ˆQualifierä¼˜å…ˆï¼‰
```

> ğŸ’¡ **ä¼˜å…ˆçº§è§„åˆ™**  
> `@Qualifier` > `@Primary` > æŒ‰ç±»å‹åŒ¹é…

**é—®é¢˜3ï¼šæ‰¾ä¸åˆ°Bean**
```java
// æŠ¥é”™ï¼šNo qualifying bean of type 'PaymentService'

æ’æŸ¥æ¸…å•ï¼š
â–¡ Beanä¸Šæœ‰ @Component/@Service ç­‰æ³¨è§£å—ï¼Ÿ
â–¡ Beanæ‰€åœ¨çš„åŒ…è¢« @ComponentScan æ‰«æäº†å—ï¼Ÿ
â–¡ Beançš„æ¡ä»¶æ³¨è§£ï¼ˆ@Conditionalï¼‰æ»¡è¶³å—ï¼Ÿ
â–¡ æ‹¼å†™æ˜¯å¦æ­£ç¡®ï¼Ÿå¤§å°å†™å¯¹å—ï¼Ÿ
```

### 5.4 è°ƒè¯•æŠ€å·§


**æŸ¥çœ‹å®¹å™¨ä¸­çš„æ‰€æœ‰Bean**
```java
@Component
public class BeanPrinter implements ApplicationContextAware {
    
    @Override
    public void setApplicationContext(ApplicationContext context) {
        // è·å–æ‰€æœ‰PaymentServiceç±»å‹çš„Bean
        Map<String, PaymentService> beans = 
            context.getBeansOfType(PaymentService.class);
            
        System.out.println("=== PaymentServiceç±»å‹çš„Bean ===");
        beans.forEach((name, bean) -> {
            System.out.println("åç§°: " + name);
            System.out.println("ç±»å‹: " + bean.getClass().getName());
            System.out.println("---");
        });
    }
}
```

**æ—¥å¿—çº§åˆ«è°ƒæ•´**
```properties
# application.properties
# å¼€å¯Springå®¹å™¨æ—¥å¿—ï¼ŒæŸ¥çœ‹Beanæ³¨å†Œè¿‡ç¨‹
logging.level.org.springframework.beans=DEBUG
logging.level.org.springframework.context=DEBUG
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 ä¸‰ç§è§£å†³æ–¹æ¡ˆå¯¹æ¯”


| æ–¹æ¡ˆ | **ä½¿ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|------|------------|---------|---------|
| ğŸ† **@Primary** | `æœ‰æ˜ç¡®é»˜è®¤Bean` | `ç®€å•ï¼Œå…¨å±€ç”Ÿæ•ˆ` | `åªèƒ½æ ‡è®°ä¸€ä¸ª` |
| ğŸ¯ **@Qualifier** | `éœ€è¦ç²¾ç¡®æŒ‡å®šBean` | `çµæ´»ï¼Œæ¯ä¸ªæ³¨å…¥ç‚¹å¯ä¸åŒ` | `éœ€è¦çŸ¥é“Beanåç§°` |
| ğŸ“Š **@Order** | `Listæ³¨å…¥éœ€è¦æ’åº` | `æ§åˆ¶æ‰§è¡Œé¡ºåº` | `åªå¯¹é›†åˆæœ‰æ•ˆ` |

### 6.2 è®°å¿†å£è¯€


```
æ­§ä¹‰é—®é¢˜ä¸‰æŠŠæ–§ï¼š

Primaryè®¾é»˜è®¤ï¼Œå…¨å±€éƒ½ç”¨å®ƒ
QualifieræŒ‡åé“å§“ï¼Œç²¾ç¡®ä¸ä¼šé”™  
Orderæ’é¡ºåºï¼Œåˆ—è¡¨ä¸ä¹±å¥—
```

### 6.3 æœ€ä½³å®è·µå»ºè®®


**âœ… æ¨èåšæ³•**
- æ¥å£æœ‰å¤šä¸ªå®ç°æ—¶ï¼Œæå‰è§„åˆ’å¥½é»˜è®¤å®ç°ï¼ˆ@Primaryï¼‰
- ä½¿ç”¨è¯­ä¹‰åŒ–çš„Beanåç§°æˆ–è‡ªå®šä¹‰é™å®šç¬¦
- é›†åˆæ³¨å…¥æ—¶åˆç†ä½¿ç”¨@Orderæ§åˆ¶é¡ºåº
- ä¿æŒä¸€è‡´çš„å‘½åè§„èŒƒï¼ˆå¦‚ï¼šxxxServiceã€xxxProcessorï¼‰

**âŒ é¿å…åšæ³•**  
- ä¸è¦åœ¨åŒä¸€ç±»å‹ä¸Šæ ‡è®°å¤šä¸ª@Primary
- é¿å…ä½¿ç”¨è¿‡äºç›¸ä¼¼çš„Beanåç§°
- ä¸è¦åœ¨ä¸éœ€è¦çš„åœ°æ–¹è¿‡åº¦ä½¿ç”¨@Qualifier

### 6.4 æ–°æ‰‹æ³¨æ„äº‹é¡¹


> ğŸ’¡ **å­¦ä¹ å»ºè®®**
> 1. **å…ˆç†è§£é—®é¢˜**ï¼šæ˜ç™½ä¸ºä»€ä¹ˆä¼šæœ‰æ­§ä¹‰
> 2. **æŒ‰éœ€é€‰æ‹©**ï¼šæ ¹æ®å®é™…åœºæ™¯é€‰æ‹©åˆé€‚æ–¹æ¡ˆ
> 3. **å¤šå®è·µ**ï¼šåŠ¨æ‰‹å†™ä»£ç ï¼Œé‡åˆ°é—®é¢˜å†æŸ¥æ–‡æ¡£
> 4. **çœ‹æ—¥å¿—**ï¼šå­¦ä¼šé€šè¿‡æ—¥å¿—å®šä½é—®é¢˜

**å…¸å‹é”™è¯¯ä¸è§£å†³**
```java
// âŒ é”™è¯¯1ï¼šå¿˜è®°æŒ‡å®šQualifier
@Autowired
private PaymentService service;  // å¤šä¸ªå®ç°æ—¶æŠ¥é”™

// âœ… æ”¹æ­£ï¼šåŠ ä¸ŠQualifier
@Autowired
@Qualifier("alipayService")
private PaymentService service;

// âŒ é”™è¯¯2ï¼šQualifieråç§°å†™é”™
@Qualifier("aliPay")  // å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªåå­—

// âœ… æ”¹æ­£ï¼šä½¿ç”¨æ­£ç¡®çš„Beanåç§°
@Qualifier("alipayService")

// âŒ é”™è¯¯3ï¼šå¤šä¸ªPrimary
@Primary
@Service
public class ServiceA { }

@Primary  // æŠ¥é”™ï¼šä¸èƒ½æœ‰ä¸¤ä¸ªPrimary
@Service  
public class ServiceB { }
```

### 6.5 å®æˆ˜ç»éªŒæ€»ç»“


```
å¼€å‘ä¸­çš„å¸¸è§å¥—è·¯ï¼š

1. ç­–ç•¥æ¨¡å¼åœºæ™¯
   â””â”€â”€ å®šä¹‰æ¥å£ â†’ å¤šä¸ªå®ç°
       â””â”€â”€ ç”¨@Qualifieré€‰æ‹©å…·ä½“ç­–ç•¥

2. å¤šæ•°æ®æºåœºæ™¯  
   â””â”€â”€ ä¸»æ•°æ®æºç”¨@Primary
       â””â”€â”€ å…¶ä»–æ•°æ®æºç”¨@QualifieræŒ‡å®š

3. å¤„ç†å™¨é“¾åœºæ™¯
   â””â”€â”€ æ³¨å…¥List<Processor>
       â””â”€â”€ ç”¨@Orderæ§åˆ¶æ‰§è¡Œé¡ºåº

4. å¼€å…³åˆ‡æ¢åœºæ™¯
   â””â”€â”€ ç”¨@Conditional + @Primary
       â””â”€â”€ æ ¹æ®é…ç½®æ¿€æ´»ä¸åŒå®ç°
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- æ­§ä¹‰é—®é¢˜æœ¬è´¨ï¼šSpringä¸çŸ¥é“é€‰å“ªä¸ªBean
- è§£å†³æ€è·¯ï¼šè¦ä¹ˆè®¾é»˜è®¤ï¼Œè¦ä¹ˆæ˜ç¡®æŒ‡å®š
- Primaryå…¨å±€é»˜è®¤ï¼ŒQualifierç²¾ç¡®åŒ¹é…ï¼ŒOrderæ§åˆ¶é¡ºåº
- çœ‹é”™è¯¯ä¿¡æ¯ï¼Œç†è§£åŸç†ï¼Œé€‰å¯¹æ–¹æ¡ˆ