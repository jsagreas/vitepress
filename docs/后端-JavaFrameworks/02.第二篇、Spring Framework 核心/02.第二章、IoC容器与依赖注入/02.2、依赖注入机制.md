---
title: 2ã€ä¾èµ–æ³¨å…¥æœºåˆ¶
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥](#1-ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥)
2. [æ„é€ å™¨æ³¨å…¥](#2-æ„é€ å™¨æ³¨å…¥)
3. [Setteræ³¨å…¥](#3-Setteræ³¨å…¥)
4. [å­—æ®µæ³¨å…¥](#4-å­—æ®µæ³¨å…¥)
5. [æ¥å£æ³¨å…¥](#5-æ¥å£æ³¨å…¥)
6. [æ³¨å…¥æ–¹å¼å…¨é¢å¯¹æ¯”](#6-æ³¨å…¥æ–¹å¼å…¨é¢å¯¹æ¯”)
7. [æœ€ä½³å®è·µä¸å»ºè®®](#7-æœ€ä½³å®è·µä¸å»ºè®®)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥


### 1.1 ä¾èµ–æ³¨å…¥çš„æœ¬è´¨


**é€šä¿—ç†è§£**ï¼šä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰å°±åƒæ˜¯"é€è´§ä¸Šé—¨"æœåŠ¡ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆè‡ªå·±newå¯¹è±¡ï¼‰ï¼š
ä½ æƒ³å–å’–å•¡ â†’ è‡ªå·±ä¹°å’–å•¡è±† â†’ è‡ªå·±ç£¨è±† â†’ è‡ªå·±ç…®å’–å•¡
ï¼ˆå¯¹è±¡å†…éƒ¨è‡ªå·±åˆ›å»ºä¾èµ–ï¼‰

ä¾èµ–æ³¨å…¥æ–¹å¼ï¼š
ä½ æƒ³å–å’–å•¡ â†’ å‘Šè¯‰Spring â†’ Springç›´æ¥é€æ¥ä¸€æ¯å’–å•¡
ï¼ˆç”±å¤–éƒ¨å®¹å™¨æä¾›ä¾èµ–å¯¹è±¡ï¼‰
```

> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**ï¼šä¸æ˜¯å¯¹è±¡è‡ªå·±å»åˆ›å»ºæˆ–æŸ¥æ‰¾ä¾èµ–å¯¹è±¡ï¼Œè€Œæ˜¯ç”±å¤–éƒ¨ï¼ˆSpringå®¹å™¨ï¼‰ä¸»åŠ¨æä¾›ä¾èµ–å¯¹è±¡ã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥


**ä¼ ç»Ÿä»£ç çš„é—®é¢˜**ï¼š

```java
// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šç±»ä¹‹é—´å¼ºè€¦åˆ
public class OrderService {
    private UserDao userDao = new UserDao();  // ç›´æ¥newï¼Œå¼ºä¾èµ–
    
    public void createOrder() {
        userDao.save();
    }
}
```

**å­˜åœ¨çš„é—®é¢˜**ï¼š
- ğŸ”´ **å¼ºè€¦åˆ**ï¼šOrderServiceç›´æ¥ä¾èµ–UserDaoçš„å…·ä½“å®ç°
- ğŸ”´ **éš¾æµ‹è¯•**ï¼šæ— æ³•æ›¿æ¢ä¸ºæµ‹è¯•ç”¨çš„Mockå¯¹è±¡
- ğŸ”´ **éš¾æ‰©å±•**ï¼šæƒ³æ¢ä¸ªUserDaoå®ç°ï¼Œå¿…é¡»ä¿®æ”¹OrderServiceä»£ç 

**ä¾èµ–æ³¨å…¥çš„è§£å†³æ–¹æ¡ˆ**ï¼š

```java
// âœ… ä¾èµ–æ³¨å…¥ï¼šè§£è€¦åˆ
public class OrderService {
    private UserDao userDao;  // ä¸è‡ªå·±åˆ›å»º
    
    // é€šè¿‡æ„é€ å™¨æ³¨å…¥
    public OrderService(UserDao userDao) {
        this.userDao = userDao;  // ç”±å¤–éƒ¨ä¼ å…¥
    }
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… **ä½è€¦åˆ**ï¼šåªä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
- âœ… **æ˜“æµ‹è¯•**ï¼šå¯ä»¥æ³¨å…¥Mockå¯¹è±¡è¿›è¡Œå•å…ƒæµ‹è¯•
- âœ… **æ˜“æ‰©å±•**ï¼šæ›´æ¢å®ç°åªéœ€ä¿®æ”¹é…ç½®ï¼Œä¸æ”¹ä»£ç 

### 1.3 ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼


Springæä¾›äº†å¤šç§æ³¨å…¥æ–¹å¼ï¼š

```
ğŸ“¦ ä¾èµ–æ³¨å…¥æ–¹å¼
â”œâ”€â”€ â­ æ„é€ å™¨æ³¨å…¥ (æ¨è)
â”œâ”€â”€ ğŸ”¸ Setteræ³¨å…¥
â”œâ”€â”€ ğŸ”¸ å­—æ®µæ³¨å…¥
â””â”€â”€ ğŸ”¹ æ¥å£æ³¨å…¥ (å°‘ç”¨)
```

---

## 2. ğŸ—ï¸ æ„é€ å™¨æ³¨å…¥


### 2.1 ä»€ä¹ˆæ˜¯æ„é€ å™¨æ³¨å…¥


**å®šä¹‰**ï¼šé€šè¿‡ç±»çš„æ„é€ æ–¹æ³•æ¥ä¼ å…¥ä¾èµ–å¯¹è±¡ã€‚

> ğŸ’¡ **å½¢è±¡ç†è§£**ï¼šå°±åƒç›–æˆ¿å­ï¼Œåœ°åŸºï¼ˆä¾èµ–ï¼‰å¿…é¡»åœ¨å»ºé€ æ—¶å°±æ‰“å¥½ï¼Œæˆ¿å­ï¼ˆå¯¹è±¡ï¼‰æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚

### 2.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


**Javaé…ç½®æ–¹å¼**ï¼š

```java
// 1. å®šä¹‰æ¥å£
public interface UserDao {
    void save();
}

// 2. å®ç°ç±»
@Repository
public class UserDaoImpl implements UserDao {
    public void save() {
        System.out.println("ä¿å­˜ç”¨æˆ·æ•°æ®");
    }
}

// 3. é€šè¿‡æ„é€ å™¨æ³¨å…¥
@Service
public class UserService {
    private final UserDao userDao;
    
    // @Autowired å¯ä»¥çœç•¥ï¼ˆå•æ„é€ å™¨æ—¶ï¼‰
    public UserService(UserDao userDao) {
        this.userDao = userDao;
    }
    
    public void register() {
        userDao.save();
    }
}
```

**å…³é”®ç‚¹è¯´æ˜**ï¼š
- `private final`ï¼šå£°æ˜ä¸ºfinalï¼Œä¿è¯ä¾èµ–ä¸å¯å˜
- `@Autowired`ï¼šSpringä¼šè‡ªåŠ¨æ‰¾åˆ°UserDaoç±»å‹çš„Beanæ³¨å…¥
- å•æ„é€ å™¨æ—¶ï¼Œ`@Autowired`å¯ä»¥çœç•¥

**XMLé…ç½®æ–¹å¼**ï¼š

```xml
<bean id="userDao" class="com.example.UserDaoImpl"/>

<bean id="userService" class="com.example.UserService">
    <constructor-arg ref="userDao"/>
</bean>
```

### 2.3 å¤šä¸ªä¾èµ–çš„æ³¨å…¥


```java
@Service
public class OrderService {
    private final UserDao userDao;
    private final ProductDao productDao;
    private final OrderDao orderDao;
    
    // æ³¨å…¥å¤šä¸ªä¾èµ–
    public OrderService(UserDao userDao, 
                       ProductDao productDao, 
                       OrderDao orderDao) {
        this.userDao = userDao;
        this.productDao = productDao;
        this.orderDao = orderDao;
    }
}
```

### 2.4 æ„é€ å™¨æ³¨å…¥çš„ä¼˜åŠ¿


| ä¼˜åŠ¿ | è¯´æ˜ |
|-----|------|
| âœ… **ä¿è¯å®Œæ•´æ€§** | å¯¹è±¡åˆ›å»ºæ—¶å°±å¿…é¡»æä¾›æ‰€æœ‰ä¾èµ–ï¼Œä¸ä¼šå‡ºç°åŠåˆå§‹åŒ–çŠ¶æ€ |
| âœ… **ä¾èµ–ä¸å¯å˜** | ä½¿ç”¨finalä¿®é¥°ï¼Œä¾èµ–å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ |
| âœ… **ä¾¿äºæµ‹è¯•** | å¯ä»¥ç›´æ¥newå¯¹è±¡å¹¶ä¼ å…¥Mockä¾èµ– |
| âœ… **å¾ªç¯ä¾èµ–æ£€æµ‹** | Springèƒ½åœ¨å¯åŠ¨æ—¶å‘ç°å¾ªç¯ä¾èµ–é—®é¢˜ |

---

## 3. ğŸ”§ Setteræ³¨å…¥


### 3.1 ä»€ä¹ˆæ˜¯Setteræ³¨å…¥


**å®šä¹‰**ï¼šé€šè¿‡setteræ–¹æ³•æ¥è®¾ç½®ä¾èµ–å¯¹è±¡ã€‚

> ğŸ’¡ **å½¢è±¡ç†è§£**ï¼šåƒå®¶å…·çš„ç»„è£…ï¼Œæˆ¿å­å»ºå¥½åå†æŠŠå®¶å…·ï¼ˆä¾èµ–ï¼‰æ¬è¿›æ¥ã€‚

### 3.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


```java
@Service
public class UserService {
    private UserDao userDao;
    
    // é€šè¿‡setteræ–¹æ³•æ³¨å…¥
    @Autowired
    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }
    
    public void register() {
        userDao.save();
    }
}
```

**XMLé…ç½®æ–¹å¼**ï¼š

```xml
<bean id="userService" class="com.example.UserService">
    <property name="userDao" ref="userDao"/>
</bean>
```

### 3.3 å¯é€‰ä¾èµ–çš„å¤„ç†


```java
@Service
public class EmailService {
    private MailSender mailSender;
    
    // å¯é€‰ä¾èµ–ï¼šrequired=false
    @Autowired(required = false)
    public void setMailSender(MailSender mailSender) {
        this.mailSender = mailSender;
    }
    
    public void sendEmail(String to, String content) {
        if (mailSender != null) {
            mailSender.send(to, content);
        } else {
            System.out.println("é‚®ä»¶æœåŠ¡æœªé…ç½®ï¼Œè·³è¿‡å‘é€");
        }
    }
}
```

### 3.4 Setteræ³¨å…¥çš„ç‰¹ç‚¹


**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ”¸ ä¾èµ–æ˜¯**å¯é€‰çš„**ï¼Œä¸æ˜¯å¿…é¡»çš„
- ğŸ”¸ ä¾èµ–å¯èƒ½éœ€è¦**é‡æ–°é…ç½®**
- ğŸ”¸ å­˜åœ¨**å¾ªç¯ä¾èµ–**æ—¶çš„è§£å†³æ–¹æ¡ˆ

**æ³¨æ„äº‹é¡¹**ï¼š
- âš ï¸ ä¸èƒ½ç”¨finalä¿®é¥°å­—æ®µ
- âš ï¸ å¯¹è±¡å¯èƒ½å¤„äºä¸å®Œæ•´çŠ¶æ€ï¼ˆä¾èµ–è¿˜æœªæ³¨å…¥ï¼‰
- âš ï¸ éœ€è¦æ£€æŸ¥ä¾èµ–æ˜¯å¦ä¸ºnull

---

## 4. ğŸ’‰ å­—æ®µæ³¨å…¥


### 4.1 ä»€ä¹ˆæ˜¯å­—æ®µæ³¨å…¥


**å®šä¹‰**ï¼šç›´æ¥åœ¨å­—æ®µä¸Šä½¿ç”¨`@Autowired`æ³¨è§£ã€‚

> ğŸ’¡ **å½¢è±¡ç†è§£**ï¼šåƒé­”æ³•ä¸€æ ·ï¼Œç›´æ¥æŠŠä¾èµ–"å˜"åˆ°å­—æ®µé‡Œï¼Œä¸éœ€è¦æ„é€ å™¨æˆ–setterã€‚

### 4.2 åŸºæœ¬ä½¿ç”¨æ–¹å¼


```java
@Service
public class UserService {
    @Autowired
    private UserDao userDao;  // ç›´æ¥åœ¨å­—æ®µä¸Šæ³¨å…¥
    
    @Autowired
    private EmailService emailService;
    
    public void register(User user) {
        userDao.save(user);
        emailService.sendWelcomeEmail(user.getEmail());
    }
}
```

### 4.3 å­—æ®µæ³¨å…¥çš„é—®é¢˜


**çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™éšæ‚£å¤š**ï¼š

```
âŒ é—®é¢˜1ï¼šè¿èƒŒå°è£…åŸåˆ™
privateå­—æ®µå´èƒ½è¢«å¤–éƒ¨ä¿®æ”¹ï¼ˆé€šè¿‡åå°„ï¼‰

âŒ é—®é¢˜2ï¼šéš¾ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•
æ— æ³•ç›´æ¥newå¯¹è±¡å¹¶ä¼ å…¥Mockä¾èµ–

âŒ é—®é¢˜3ï¼šå®¹æ˜“å‡ºç°NullPointerException
å¦‚æœæ³¨å…¥å¤±è´¥ï¼Œå­—æ®µæ˜¯null

âŒ é—®é¢˜4ï¼šéšè—äº†ä¾èµ–å…³ç³»
ä»å¤–éƒ¨çœ‹ä¸å‡ºè¿™ä¸ªç±»ä¾èµ–äº†ä»€ä¹ˆ
```

**æµ‹è¯•å›°éš¾ç¤ºä¾‹**ï¼š

```java
// ä½¿ç”¨å­—æ®µæ³¨å…¥çš„ç±»
@Service
public class UserService {
    @Autowired
    private UserDao userDao;
}

// æµ‹è¯•ä»£ç å¾ˆéº»çƒ¦
@Test
public void testRegister() {
    UserService service = new UserService();
    // æ— æ³•è®¾ç½®userDaoï¼Œå› ä¸ºå®ƒæ˜¯privateçš„
    // å¿…é¡»ä½¿ç”¨åå°„æˆ–ä¾èµ–Springæµ‹è¯•æ¡†æ¶
}
```

### 4.4 ä¸ºä»€ä¹ˆè¿˜åœ¨ç”¨å­—æ®µæ³¨å…¥


**å†å²åŸå› **ï¼š
- æ—©æœŸSpringæ¨èçš„æ–¹å¼
- ä»£ç çœ‹èµ·æ¥ç®€æ´
- å¾ˆå¤šè€é¡¹ç›®åœ¨ç”¨

> âš ï¸ **é‡è¦æé†’**ï¼šè™½ç„¶å­—æ®µæ³¨å…¥ä»£ç ç®€æ´ï¼Œä½†**ä¸æ¨èåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨**ã€‚IDEAç­‰å·¥å…·ä¼šç»™å‡ºè­¦å‘Šã€‚

---

## 5. ğŸ”Œ æ¥å£æ³¨å…¥


### 5.1 ä»€ä¹ˆæ˜¯æ¥å£æ³¨å…¥


**å®šä¹‰**ï¼šé€šè¿‡å®ç°ç‰¹å®šæ¥å£çš„æ–¹æ³•æ¥æ¥æ”¶ä¾èµ–ã€‚

> ğŸ’¡ **ç†è§£**ï¼šå°±åƒå¿«é€’å¿…é¡»é€åˆ°æŒ‡å®šçš„æ”¶è´§ç‚¹ï¼Œä¾èµ–å¿…é¡»é€šè¿‡ç‰¹å®šæ¥å£æ–¹æ³•æ³¨å…¥ã€‚

### 5.2 Springä¸­çš„æ¥å£æ³¨å…¥ç¤ºä¾‹


```java
// Springçš„Awareæ¥å£ç³»åˆ—
@Service
public class MyService implements ApplicationContextAware {
    private ApplicationContext context;
    
    // Springä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ³¨å…¥ApplicationContext
    @Override
    public void setApplicationContext(ApplicationContext context) 
            throws BeansException {
        this.context = context;
    }
    
    public void doSomething() {
        // å¯ä»¥ä½¿ç”¨æ³¨å…¥çš„context
        String[] beanNames = context.getBeanDefinitionNames();
    }
}
```

**å¸¸è§çš„Awareæ¥å£**ï¼š

| æ¥å£ | æ³¨å…¥çš„å¯¹è±¡ | ç”¨é€” |
|-----|----------|------|
| `ApplicationContextAware` | ApplicationContext | è·å–Springå®¹å™¨ |
| `BeanNameAware` | Beançš„åç§° | è·å–å½“å‰Beançš„åå­— |
| `BeanFactoryAware` | BeanFactory | è·å–Beanå·¥å‚ |

### 5.3 æ¥å£æ³¨å…¥çš„ä½¿ç”¨åœºæ™¯


```java
// å®é™…åº”ç”¨ï¼šåŠ¨æ€è·å–Bean
@Service
public class BeanManager implements ApplicationContextAware {
    private ApplicationContext context;
    
    @Override
    public void setApplicationContext(ApplicationContext context) {
        this.context = context;
    }
    
    // æ ¹æ®ç±»å‹åŠ¨æ€è·å–Bean
    public <T> T getBean(Class<T> clazz) {
        return context.getBean(clazz);
    }
}
```

> ğŸ“ **è¯´æ˜**ï¼šæ¥å£æ³¨å…¥åœ¨Springä¸­ä¸»è¦ç”¨äºæ³¨å…¥**å®¹å™¨ç›¸å…³çš„å¯¹è±¡**ï¼Œæ—¥å¸¸ä¸šåŠ¡å¼€å‘è¾ƒå°‘ä½¿ç”¨ã€‚

---

## 6. âš–ï¸ æ³¨å…¥æ–¹å¼å…¨é¢å¯¹æ¯”


### 6.1 å¯¹æ¯”æ€»è§ˆè¡¨


| æ³¨å…¥æ–¹å¼ | ä»£ç ç¤ºä¾‹ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|---------|---------|------|------|--------|
| **æ„é€ å™¨æ³¨å…¥** | `public UserService(UserDao dao)` | ä¾èµ–ä¸å¯å˜ã€ä¿è¯å®Œæ•´æ€§ã€ä¾¿äºæµ‹è¯• | å‚æ•°å¤šæ—¶æ„é€ å™¨å¤æ‚ | â­â­â­â­â­ |
| **Setteræ³¨å…¥** | `@Autowired setUserDao(...)` | æ”¯æŒå¯é€‰ä¾èµ–ã€å¯é‡æ–°é…ç½® | ä¾èµ–å¯èƒ½ä¸ºnullã€å¯¹è±¡å¯èƒ½ä¸å®Œæ•´ | â­â­â­ |
| **å­—æ®µæ³¨å…¥** | `@Autowired private UserDao dao` | ä»£ç ç®€æ´ | éš¾æµ‹è¯•ã€è¿èƒŒå°è£…ã€éšè—ä¾èµ– | â­ |
| **æ¥å£æ³¨å…¥** | `implements xxxAware` | æ³¨å…¥å®¹å™¨å¯¹è±¡ | ä»£ç ä¾µå…¥æ€§å¼º | â­â­ |

### 6.2 é€‚ç”¨åœºæ™¯å¯¹æ¯”


```
ğŸ¯ æ„é€ å™¨æ³¨å…¥ - é€‚ç”¨åœºæ™¯ï¼š
âœ… å¿…éœ€çš„ä¾èµ–ï¼ˆä¸šåŠ¡é€»è¾‘å¿…é¡»æœ‰çš„ï¼‰
âœ… ä¾èµ–ä¸åº”è¯¥æ”¹å˜çš„æƒ…å†µ
âœ… éœ€è¦ä¿è¯å¯¹è±¡å®Œæ•´æ€§
âœ… å•å…ƒæµ‹è¯•é¢‘ç¹çš„ç±»

ğŸ“ ç¤ºä¾‹ï¼š
@Service
public class OrderService {
    private final UserDao userDao;  // å¿…éœ€ä¾èµ–
    
    public OrderService(UserDao userDao) {
        this.userDao = userDao;
    }
}
```

```
ğŸ¯ Setteræ³¨å…¥ - é€‚ç”¨åœºæ™¯ï¼š
âœ… å¯é€‰çš„ä¾èµ–ï¼ˆæœ‰æ›´å¥½ï¼Œæ²¡æœ‰ä¹Ÿè¡Œï¼‰
âœ… å¯èƒ½éœ€è¦é‡æ–°é…ç½®çš„ä¾èµ–
âœ… è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜

ğŸ“ ç¤ºä¾‹ï¼š
@Service
public class NotificationService {
    private SmsService smsService;  // å¯é€‰ä¾èµ–
    
    @Autowired(required = false)
    public void setSmsService(SmsService sms) {
        this.smsService = sms;
    }
}
```

### 6.3 å¾ªç¯ä¾èµ–å¤„ç†


**ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–**ï¼š

```
Aä¾èµ–Bï¼ŒBåˆä¾èµ–Aï¼š
A â†’ B
â†‘   â†“
â””â”€â”€â”€â”˜

ä»£ç ç¤ºä¾‹ï¼š
class A {
    private B b;  // Aä¾èµ–B
}

class B {
    private A a;  // Bä¾èµ–A
}
```

**ä¸åŒæ³¨å…¥æ–¹å¼çš„å¤„ç†**ï¼š

| æ³¨å…¥æ–¹å¼ | å¾ªç¯ä¾èµ–å¤„ç† | è¯´æ˜ |
|---------|------------|------|
| æ„é€ å™¨æ³¨å…¥ | âŒ æ— æ³•è§£å†³ | å¯åŠ¨æ—¶ç›´æ¥æŠ¥é”™ |
| Setteræ³¨å…¥ | âœ… å¯ä»¥è§£å†³ | Springé€šè¿‡ä¸‰çº§ç¼“å­˜å¤„ç† |
| å­—æ®µæ³¨å…¥ | âœ… å¯ä»¥è§£å†³ | å®é™…ä¹Ÿæ˜¯é€šè¿‡setteræ–¹å¼ |

> âš ï¸ **æœ€ä½³å®è·µ**ï¼šåº”è¯¥é€šè¿‡**é‡æ„ä»£ç **é¿å…å¾ªç¯ä¾èµ–ï¼Œè€Œä¸æ˜¯ä¾èµ–Springçš„å¤„ç†æœºåˆ¶ã€‚

---

## 7. ğŸ¯ æœ€ä½³å®è·µä¸å»ºè®®


### 7.1 å®˜æ–¹æ¨èæ–¹æ¡ˆ


**Springå®˜æ–¹å»ºè®®**ï¼š

```
â‘  ä¼˜å…ˆä½¿ç”¨ï¼šæ„é€ å™¨æ³¨å…¥
â‘¡ å¯é€‰ä¾èµ–ï¼šSetteræ³¨å…¥
â‘¢ é¿å…ä½¿ç”¨ï¼šå­—æ®µæ³¨å…¥
â‘£ ç‰¹æ®Šåœºæ™¯ï¼šæ¥å£æ³¨å…¥
```

### 7.2 å®é™…é¡¹ç›®ä¸­çš„æœ€ä½³å®è·µ


**è§„åˆ™1ï¼šå¿…éœ€ä¾èµ–ç”¨æ„é€ å™¨**

```java
// âœ… æ¨èï¼šå¿…éœ€ä¾èµ–ç”¨æ„é€ å™¨
@Service
public class OrderService {
    private final OrderRepository orderRepository;
    private final UserService userService;
    
    public OrderService(OrderRepository repository, 
                       UserService userService) {
        this.orderRepository = repository;
        this.userService = userService;
    }
}
```

**è§„åˆ™2ï¼šå¯é€‰ä¾èµ–ç”¨Setter**

```java
// âœ… æ¨èï¼šå¯é€‰ä¾èµ–ç”¨Setter
@Service
public class EmailService {
    private MailSender mailSender;
    
    @Autowired(required = false)
    public void setMailSender(MailSender sender) {
        this.mailSender = sender;
    }
}
```

**è§„åˆ™3ï¼šä¾èµ–å°‘äº3ä¸ªç”¨æ„é€ å™¨ï¼Œå¤šäº†ç”¨@RequiredArgsConstructor**

```java
// ä½¿ç”¨Lombokç®€åŒ–æ„é€ å™¨æ³¨å…¥
@Service
@RequiredArgsConstructor  // Lombokè‡ªåŠ¨ç”Ÿæˆæ„é€ å™¨
public class OrderService {
    private final OrderRepository orderRepository;
    private final UserService userService;
    private final ProductService productService;
    private final PaymentService paymentService;
    // ä¸éœ€è¦æ‰‹å†™æ„é€ å™¨äº†
}
```

### 7.3 ä¾èµ–æ³¨å…¥çš„ä»£ç è§„èŒƒ


**âœ… å¥½çš„å®è·µ**ï¼š

```java
// 1. ä½¿ç”¨finalä¿è¯ä¸å¯å˜
private final UserDao userDao;

// 2. é€šè¿‡æ¥å£ä¾èµ–ï¼Œä¸ä¾èµ–å®ç°
private final UserService userService;  // æ¥å£ç±»å‹

// 3. å•ä¸€èŒè´£ï¼Œä¾èµ–ä¸è¦å¤ªå¤š
// å¦‚æœæ„é€ å™¨å‚æ•°è¶…è¿‡5ä¸ªï¼Œè€ƒè™‘ç±»æ˜¯å¦èŒè´£è¿‡é‡
```

**âŒ é¿å…çš„åšæ³•**ï¼š

```java
// 1. é¿å…å­—æ®µæ³¨å…¥
@Autowired
private UserDao userDao;  // ä¸æ¨è

// 2. é¿å…ä¾èµ–å…·ä½“å®ç°
private UserDaoImpl userDao;  // åº”è¯¥ä¾èµ–æ¥å£

// 3. é¿å…å¾ªç¯ä¾èµ–
// Aä¾èµ–Bï¼ŒBä¾èµ–Açš„è®¾è®¡æœ¬èº«æœ‰é—®é¢˜
```

### 7.4 ç‰¹æ®Šåœºæ™¯å¤„ç†


**åœºæ™¯1ï¼šæ³¨å…¥é›†åˆç±»å‹**

```java
@Service
public class NotificationService {
    private final List<MessageSender> senders;
    
    // Springä¼šè‡ªåŠ¨æ³¨å…¥æ‰€æœ‰MessageSenderç±»å‹çš„Bean
    public NotificationService(List<MessageSender> senders) {
        this.senders = senders;
    }
    
    public void sendAll(String message) {
        senders.forEach(sender -> sender.send(message));
    }
}
```

**åœºæ™¯2ï¼šæŒ‰åç§°æ³¨å…¥**

```java
@Service
public class OrderService {
    private final PaymentService paymentService;
    
    // @QualifieræŒ‡å®šBeanåç§°
    public OrderService(@Qualifier("alipayService") 
                       PaymentService paymentService) {
        this.paymentService = paymentService;
    }
}
```

**åœºæ™¯3ï¼šæ¡ä»¶æ³¨å…¥**

```java
@Service
public class CacheService {
    private final CacheProvider cacheProvider;
    
    public CacheService(
            @ConditionalOnProperty(name = "cache.type", havingValue = "redis")
            CacheProvider provider) {
        this.cacheProvider = provider;
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…è®°çŸ¥è¯†ç‚¹


```
ğŸ”¸ ä¾èµ–æ³¨å…¥æœ¬è´¨ï¼šç”±å®¹å™¨è´Ÿè´£åˆ›å»ºå’Œæ³¨å…¥ä¾èµ–ï¼Œå¯¹è±¡æœ¬èº«ä¸åˆ›å»ºä¾èµ–
ğŸ”¸ å››ç§æ³¨å…¥æ–¹å¼ï¼šæ„é€ å™¨ã€Setterã€å­—æ®µã€æ¥å£
ğŸ”¸ æ¨èé¡ºåºï¼šæ„é€ å™¨ > Setter > å­—æ®µ > æ¥å£
ğŸ”¸ æ„é€ å™¨æ³¨å…¥ï¼šä¿è¯ä¾èµ–å®Œæ•´æ€§ï¼Œé€‚åˆå¿…éœ€ä¾èµ–
ğŸ”¸ Setteræ³¨å…¥ï¼šæ”¯æŒå¯é€‰ä¾èµ–å’Œå¾ªç¯ä¾èµ–
ğŸ”¸ å­—æ®µæ³¨å…¥ï¼šè™½ç„¶ç®€æ´ä½†ä¸æ¨èä½¿ç”¨
```

### 8.2 å¿«é€Ÿå†³ç­–æŒ‡å—


```
é€‰æ‹©æ³¨å…¥æ–¹å¼çš„å†³ç­–æµç¨‹ï¼š

å¼€å§‹
  â†“
ä¾èµ–æ˜¯å¦å¿…éœ€ï¼Ÿ
  â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ âœ…
  â””â”€â”€ å¦ â†’ ä¾èµ–æ˜¯å¦å¯èƒ½æ”¹å˜ï¼Ÿ
            â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨Setteræ³¨å…¥ âœ…
            â””â”€â”€ å¦ â†’ ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ âœ…
```

### 8.3 å¸¸è§é—®é¢˜é€ŸæŸ¥


**Q1ï¼šä¸ºä»€ä¹ˆæ¨èæ„é€ å™¨æ³¨å…¥ï¼Ÿ**
> ç­”ï¼šä¿è¯å¯¹è±¡åˆ›å»ºæ—¶ä¾èµ–å®Œæ•´ã€ä¾èµ–ä¸å¯å˜ã€ä¾¿äºæµ‹è¯•ã€å®¹æ˜“å‘ç°å¾ªç¯ä¾èµ–ã€‚

**Q2ï¼šä»€ä¹ˆæ—¶å€™ç”¨Setteræ³¨å…¥ï¼Ÿ**
> ç­”ï¼šä¾èµ–æ˜¯å¯é€‰çš„ã€ä¾èµ–å¯èƒ½éœ€è¦é‡æ–°é…ç½®ã€å­˜åœ¨å¾ªç¯ä¾èµ–æ—¶ã€‚

**Q3ï¼šå­—æ®µæ³¨å…¥æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ**
> ç­”ï¼šéš¾ä»¥æµ‹è¯•ã€è¿èƒŒå°è£…ã€éšè—ä¾èµ–å…³ç³»ã€å®¹æ˜“å‡ºç°NPEã€‚

**Q4ï¼šå¾ªç¯ä¾èµ–æ€ä¹ˆå¤„ç†ï¼Ÿ**
> ç­”ï¼šä¼˜å…ˆé‡æ„ä»£ç é¿å…å¾ªç¯ä¾èµ–ï¼›å®åœ¨æ— æ³•é¿å…æ—¶ä½¿ç”¨Setteræ³¨å…¥ã€‚

### 8.4 è®°å¿†å£è¯€


```
ä¾èµ–æ³¨å…¥é€‰æ–¹å¼ï¼Œ
æ„é€ ä¼˜å…ˆè¦ç‰¢è®°ï¼›
å¿…éœ€ä¾èµ–ç”¨æ„é€ ï¼Œ
å¯é€‰ä¾èµ–setteræ›¿ï¼›
å­—æ®µæ³¨å…¥è™½ç®€æ´ï¼Œ
æµ‹è¯•å›°éš¾è¦è¿œç¦»ï¼›
æ¥å£æ³¨å…¥åœºæ™¯å°‘ï¼Œ
å®¹å™¨å¯¹è±¡æ‰ä½¿ç”¨ã€‚
```

### 8.5 å®æˆ˜å»ºè®®


**æ–°æ‰‹å»ºè®®**ï¼š
- â‘  ç»Ÿä¸€ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œå…»æˆå¥½ä¹ æƒ¯
- â‘¡ ä½¿ç”¨Lombokçš„`@RequiredArgsConstructor`ç®€åŒ–ä»£ç 
- â‘¢ é¿å…å¾ªç¯ä¾èµ–ï¼Œå‡ºç°æ—¶é‡æ„è®¾è®¡
- â‘£ ä¾èµ–é€šè¿‡æ¥å£æ³¨å…¥ï¼Œä¸ä¾èµ–å…·ä½“å®ç°

**è€é¡¹ç›®è¿ç§»**ï¼š
- â‘  æ–°ä»£ç ä½¿ç”¨æ„é€ å™¨æ³¨å…¥
- â‘¡ é€æ­¥é‡æ„å­—æ®µæ³¨å…¥ä¸ºæ„é€ å™¨æ³¨å…¥
- â‘¢ ä¿æŒå›¢é˜Ÿç¼–ç é£æ ¼ç»Ÿä¸€
- â‘£ ä½¿ç”¨ä»£ç æ£€æŸ¥å·¥å…·å¼ºåˆ¶è§„èŒƒ