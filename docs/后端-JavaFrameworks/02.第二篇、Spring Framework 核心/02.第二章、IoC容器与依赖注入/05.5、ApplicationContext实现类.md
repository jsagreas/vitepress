---
title: 5ã€ApplicationContextå®ç°ç±»
---
## ğŸ“š ç›®å½•

1. [ApplicationContextæ˜¯ä»€ä¹ˆ](#1-ApplicationContextæ˜¯ä»€ä¹ˆ)
2. [æ ¸å¿ƒå®ç°ç±»è¯¦è§£](#2-æ ¸å¿ƒå®ç°ç±»è¯¦è§£)
3. [ä½¿ç”¨åœºæ™¯å¯¹æ¯”](#3-ä½¿ç”¨åœºæ™¯å¯¹æ¯”)
4. [é…ç½®æ–¹å¼è¯¦è§£](#4-é…ç½®æ–¹å¼è¯¦è§£)
5. [æœ€ä½³å®è·µå»ºè®®](#5-æœ€ä½³å®è·µå»ºè®®)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ApplicationContextæ˜¯ä»€ä¹ˆ


### 1.1 é€šä¿—ç†è§£


**ç®€å•æ¯”å–»**ï¼šæŠŠApplicationContextæƒ³è±¡æˆä¸€ä¸ª"æ™ºèƒ½ä»“åº“ç®¡ç†å‘˜"

```
ä¼ ç»Ÿæ–¹å¼åˆ›å»ºå¯¹è±¡ï¼š
ä½ éœ€è¦ä»€ä¹ˆ â†’ è‡ªå·±newä¸€ä¸ª â†’ è‡ªå·±ç®¡ç†å¯¹è±¡

Springçš„ApplicationContextæ–¹å¼ï¼š
ä½ å‘Šè¯‰ä»“åº“ç®¡ç†å‘˜éœ€è¦ä»€ä¹ˆ â†’ ç®¡ç†å‘˜å¸®ä½ åˆ›å»ºå¥½ â†’ ç®¡ç†å‘˜è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ

å°±åƒä½ å»é¤å…ç‚¹èœï¼š
- ä¸éœ€è¦è‡ªå·±åšé¥­ï¼ˆä¸éœ€è¦newå¯¹è±¡ï¼‰
- åªéœ€è¦å‘Šè¯‰æœåŠ¡å‘˜è¦ä»€ä¹ˆï¼ˆé…ç½®ä¾èµ–å…³ç³»ï¼‰
- å¨æˆ¿å¸®ä½ å‡†å¤‡å¥½ï¼ˆSpringå®¹å™¨åˆ›å»ºå¯¹è±¡ï¼‰
```

### 1.2 æ ¸å¿ƒä½œç”¨


**ApplicationContextçš„ä¸‰å¤§èŒè´£**ï¼š

ğŸ”¸ **å¯¹è±¡å·¥å‚**
- æ ¹æ®é…ç½®åˆ›å»ºå’Œç®¡ç†Javaå¯¹è±¡ï¼ˆBeanï¼‰
- è‡ªåŠ¨å¤„ç†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»

ğŸ”¸ **ç”Ÿå‘½å‘¨æœŸç®¡ç†**
- æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºæ—¶æœº
- ç®¡ç†å¯¹è±¡çš„åˆå§‹åŒ–å’Œé”€æ¯

ğŸ”¸ **èµ„æºè®¿é—®**
- ç»Ÿä¸€ç®¡ç†é…ç½®æ–‡ä»¶
- æä¾›å›½é™…åŒ–ã€äº‹ä»¶å‘å¸ƒç­‰é«˜çº§åŠŸèƒ½

### 1.3 ä¸BeanFactoryçš„å…³ç³»


```
BeanFactoryï¼ˆåŸºç¡€ç‰ˆï¼‰           ApplicationContextï¼ˆå¢å¼ºç‰ˆï¼‰
     â†“                               â†“
 åŸºæœ¬çš„å®¹å™¨åŠŸèƒ½                  BeanFactoryçš„æ‰€æœ‰åŠŸèƒ½
 åªç®¡åˆ›å»ºå¯¹è±¡                    +
                              æ›´å¤šä¼ä¸šçº§åŠŸèƒ½ï¼š
                              - è‡ªåŠ¨è£…é…
                              - äº‹ä»¶æœºåˆ¶
                              - å›½é™…åŒ–
                              - AOPé›†æˆ
                              
å…³ç³»ï¼šApplicationContextæ˜¯BeanFactoryçš„å‡çº§ç‰ˆ
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šå®é™…å¼€å‘ä¸­éƒ½ç”¨ApplicationContextï¼ŒåŠŸèƒ½æ›´å¼ºå¤§å®Œå–„

---

## 2. ğŸ”§ æ ¸å¿ƒå®ç°ç±»è¯¦è§£


### 2.1 ClassPathXmlApplicationContext


**ğŸ“‹ æ ¸å¿ƒæ¦‚å¿µ**
- **ä½œç”¨**ï¼šä»ç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸‹åŠ è½½XMLé…ç½®æ–‡ä»¶
- **è·¯å¾„ä½ç½®**ï¼šé…ç½®æ–‡ä»¶æ”¾åœ¨é¡¹ç›®çš„`src/main/resources`ç›®å½•ä¸‹

**ğŸ¯ é€šä¿—ç†è§£**
```
ç±»è·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ
å°±æ˜¯ä½ é¡¹ç›®ç¼–è¯‘åclassæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®

src/main/resources/beans.xml  â†’  ç¼–è¯‘å  â†’  target/classes/beans.xml
                                            ï¼ˆè¿™å°±æ˜¯ç±»è·¯å¾„ï¼‰

ClassPathXmlçš„"ClassPath"å°±æ˜¯æŒ‡è¿™ä¸ªä½ç½®
```

**ğŸ’» ä»£ç ç¤ºä¾‹**

```java
// 1. æœ€ç®€å•çš„ç”¨æ³•
ApplicationContext context = 
    new ClassPathXmlApplicationContext("beans.xml");

// 2. æŒ‡å®šå¤šä¸ªé…ç½®æ–‡ä»¶
ApplicationContext context = 
    new ClassPathXmlApplicationContext(
        "spring-beans.xml", 
        "spring-db.xml"
    );

// 3. æŒ‡å®šå­ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶
ApplicationContext context = 
    new ClassPathXmlApplicationContext("config/beans.xml");
```

**XMLé…ç½®æ–‡ä»¶ç¤ºä¾‹**ï¼š

```xml
<!-- beans.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="...">
    
    <!-- é…ç½®ä¸€ä¸ªç®€å•çš„Bean -->
    <bean id="userService" class="com.example.UserService">
        <property name="userName" value="å¼ ä¸‰"/>
    </bean>
</beans>
```

**âœ… é€‚ç”¨åœºæ™¯**
- ä¼ ç»Ÿçš„XMLé…ç½®æ–¹å¼
- é…ç½®æ–‡ä»¶éœ€è¦æ‰“åŒ…åˆ°jaråŒ…ä¸­
- é¡¹ç›®ä½¿ç”¨Maven/Gradleæ ‡å‡†ç›®å½•ç»“æ„

**âŒ ä¸é€‚åˆåœºæ™¯**
- é…ç½®æ–‡ä»¶åœ¨å¤–éƒ¨è·¯å¾„ï¼ˆç£ç›˜ä¸Šï¼‰
- ä¸æƒ³ä½¿ç”¨XMLé…ç½®

---

### 2.2 FileSystemXmlApplicationContext


**ğŸ“‹ æ ¸å¿ƒæ¦‚å¿µ**
- **ä½œç”¨**ï¼šä»æ–‡ä»¶ç³»ç»Ÿçš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„åŠ è½½XMLé…ç½®
- **è·¯å¾„ä½ç½®**ï¼šå¯ä»¥æ˜¯ç”µè„‘ç¡¬ç›˜ä¸Šçš„ä»»æ„ä½ç½®

**ğŸ¯ é€šä¿—ç†è§£**
```
ClassPathXml vs FileSystemXmlï¼š

ClassPathXmlï¼šåªèƒ½æ‰¾é¡¹ç›®å†…éƒ¨çš„é…ç½®æ–‡ä»¶
ç±»ä¼¼ï¼šåœ¨ä½ å®¶é‡Œï¼ˆé¡¹ç›®ç›®å½•ï¼‰æ‰¾ä¸œè¥¿

FileSystemXmlï¼šå¯ä»¥æ‰¾ç”µè„‘ä»»æ„ä½ç½®çš„é…ç½®æ–‡ä»¶  
ç±»ä¼¼ï¼šåœ¨æ•´ä¸ªåŸå¸‚ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰æ‰¾ä¸œè¥¿
```

**ğŸ’» ä»£ç ç¤ºä¾‹**

```java
// 1. ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆå®Œæ•´è·¯å¾„ï¼‰
ApplicationContext context = 
    new FileSystemXmlApplicationContext(
        "D:/config/beans.xml"
    );

// 2. ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
ApplicationContext context = 
    new FileSystemXmlApplicationContext(
        "config/beans.xml"
    );

// 3. å¸¦file:å‰ç¼€çš„å†™æ³•
ApplicationContext context = 
    new FileSystemXmlApplicationContext(
        "file:///D:/config/beans.xml"
    );
```

**ğŸ“Š è·¯å¾„å¯¹æ¯”è¡¨**

| è·¯å¾„ç±»å‹ | å†™æ³•ç¤ºä¾‹ | è¯´æ˜ |
|---------|---------|------|
| **ç»å¯¹è·¯å¾„** | `D:/config/beans.xml` | Windowsç³»ç»Ÿå®Œæ•´è·¯å¾„ |
| **ç»å¯¹è·¯å¾„** | `/home/user/beans.xml` | Linuxç³»ç»Ÿå®Œæ•´è·¯å¾„ |
| **ç›¸å¯¹è·¯å¾„** | `config/beans.xml` | ç›¸å¯¹é¡¹ç›®æ ¹ç›®å½• |
| **fileåè®®** | `file:///D:/config/beans.xml` | æ˜ç¡®æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿ |

**âœ… é€‚ç”¨åœºæ™¯**
- é…ç½®æ–‡ä»¶åœ¨é¡¹ç›®å¤–éƒ¨ï¼ˆä¾¿äºä¿®æ”¹ï¼Œä¸ç”¨é‡æ–°æ‰“åŒ…ï¼‰
- é…ç½®æ–‡ä»¶è·¯å¾„åœ¨æœåŠ¡å™¨ä¸Šå›ºå®š
- éœ€è¦åŠ¨æ€åŠ è½½ä¸åŒä½ç½®çš„é…ç½®

**âŒ ä¸é€‚åˆåœºæ™¯**
- é…ç½®éœ€è¦æ‰“åŒ…è¿›jaråŒ…
- è·¨å¹³å°éƒ¨ç½²ï¼ˆè·¯å¾„å¯èƒ½ä¸åŒï¼‰

---

### 2.3 AnnotationConfigApplicationContext


**ğŸ“‹ æ ¸å¿ƒæ¦‚å¿µ**
- **ä½œç”¨**ï¼šä½¿ç”¨Javaæ³¨è§£ä»£æ›¿XMLé…ç½®
- **æ ¸å¿ƒæ€æƒ³**ï¼šé…ç½®å³ä»£ç ï¼Œç”¨@Configurationç­‰æ³¨è§£é…ç½®Bean

**ğŸ¯ é€šä¿—ç†è§£**
```
ä¼ ç»ŸXMLé…ç½®ï¼š
å†™ä¸€å †XMLæ ‡ç­¾ â†’ é…ç½®ç¹ç â†’ å®¹æ˜“å‡ºé”™

æ³¨è§£é…ç½®ï¼š
ç›´æ¥åœ¨Javaç±»ä¸ŠåŠ æ³¨è§£ â†’ ç®€æ´ç›´è§‚ â†’ IDEæ”¯æŒå¥½

å¥½æ¯”ï¼š
XMLé…ç½® = ç”¨Wordå†™è¯´æ˜ä¹¦
æ³¨è§£é…ç½® = ç›´æ¥åœ¨ä»£ç ä¸Šè´´æ ‡ç­¾
```

**ğŸ’» ä»£ç ç¤ºä¾‹**

**é…ç½®ç±»å†™æ³•**ï¼š

```java
// 1. åˆ›å»ºé…ç½®ç±»
@Configuration  // è¡¨æ˜è¿™æ˜¯ä¸ªé…ç½®ç±»
public class AppConfig {
    
    @Bean  // å‘Šè¯‰Springï¼šè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡è¦æ”¾å…¥å®¹å™¨
    public UserService userService() {
        return new UserService();
    }
    
    @Bean
    public OrderService orderService() {
        OrderService service = new OrderService();
        // æ³¨å…¥ä¾èµ–
        service.setUserService(userService());
        return service;
    }
}
```

**å¯åŠ¨å®¹å™¨**ï¼š

```java
// æ–¹å¼1ï¼šåŠ è½½å•ä¸ªé…ç½®ç±»
ApplicationContext context = 
    new AnnotationConfigApplicationContext(AppConfig.class);

// æ–¹å¼2ï¼šåŠ è½½å¤šä¸ªé…ç½®ç±»
ApplicationContext context = 
    new AnnotationConfigApplicationContext(
        AppConfig.class, 
        DatabaseConfig.class
    );

// æ–¹å¼3ï¼šæ‰«æåŒ…ï¼ˆè‡ªåŠ¨æ‰¾@Componentç­‰æ³¨è§£ï¼‰
ApplicationContext context = 
    new AnnotationConfigApplicationContext("com.example");
```

**å¸¸ç”¨æ³¨è§£è¯´æ˜**ï¼š

| æ³¨è§£ | ä½œç”¨ | ä½¿ç”¨ä½ç½® |
|-----|------|---------|
| `@Configuration` | å£°æ˜é…ç½®ç±» | ç±»ä¸Š |
| `@Bean` | å®šä¹‰Bean | æ–¹æ³•ä¸Š |
| `@ComponentScan` | æ‰«æç»„ä»¶ | é…ç½®ç±»ä¸Š |
| `@Component` | æ™®é€šç»„ä»¶ | ç±»ä¸Š |
| `@Service` | ä¸šåŠ¡å±‚ç»„ä»¶ | ç±»ä¸Š |
| `@Repository` | æ•°æ®å±‚ç»„ä»¶ | ç±»ä¸Š |

**âœ… é€‚ç”¨åœºæ™¯**
- **ç°ä»£Springé¡¹ç›®**ï¼ˆSpring Booté»˜è®¤æ–¹å¼ï¼‰
- å¸Œæœ›é…ç½®å’Œä»£ç åœ¨ä¸€èµ·
- éœ€è¦IDEçš„æ™ºèƒ½æç¤ºå’Œé‡æ„æ”¯æŒ
- å›¢é˜Ÿä¹ æƒ¯Javaé…ç½®

**âŒ ä¸é€‚åˆåœºæ™¯**
- è€é¡¹ç›®æ”¹é€ ï¼ˆå·²æœ‰å¤§é‡XMLé…ç½®ï¼‰
- å›¢é˜Ÿä¸ç†Ÿæ‚‰æ³¨è§£é…ç½®

---

### 2.4 WebApplicationContext


**ğŸ“‹ æ ¸å¿ƒæ¦‚å¿µ**
- **ä½œç”¨**ï¼šä¸“é—¨ä¸ºWebåº”ç”¨è®¾è®¡çš„ApplicationContext
- **ç‰¹ç‚¹**ï¼šä¸Servletå®¹å™¨é›†æˆï¼Œèƒ½è®¿é—®Webèµ„æº

**ğŸ¯ é€šä¿—ç†è§£**
```
æ™®é€šApplicationContextï¼š
é€‚åˆç‹¬ç«‹çš„Javaåº”ç”¨ï¼ˆæ§åˆ¶å°ç¨‹åºã€å®šæ—¶ä»»åŠ¡ç­‰ï¼‰

WebApplicationContextï¼š
ä¸“ä¸ºWebåº”ç”¨è®¾è®¡ï¼ŒçŸ¥é“è‡ªå·±åœ¨Webç¯å¢ƒä¸­è¿è¡Œ

å¥½æ¯”ï¼š
ApplicationContext = æ™®é€šå‘˜å·¥
WebApplicationContext = æ‡‚Webä¸šåŠ¡çš„ä¸“å‘˜
```

**ğŸŒ Webç¯å¢ƒç‰¹ç‚¹**

```
Webåº”ç”¨çš„ç‰¹æ®Šéœ€æ±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æµè§ˆå™¨è¯·æ±‚         â”‚
â”‚        â†“            â”‚
â”‚   Servletå®¹å™¨       â”‚  â† WebApplicationContextåœ¨è¿™é‡Œå·¥ä½œ
â”‚   (Tomcatç­‰)       â”‚
â”‚        â†“            â”‚
â”‚   Spring MVC        â”‚  â† éœ€è¦è®¿é—®requestã€sessionç­‰
â”‚        â†“            â”‚
â”‚   ä¸šåŠ¡é€»è¾‘          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’» å®ç°ç±»å¯¹æ¯”**

**1. XmlWebApplicationContext**ï¼ˆXMLé…ç½®ï¼‰

```xml
<!-- web.xmlé…ç½® -->
<web-app>
    <!-- æŒ‡å®šSpringé…ç½®æ–‡ä»¶ä½ç½® -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-config.xml</param-value>
    </context-param>
    
    <!-- Springå®¹å™¨ç›‘å¬å™¨ -->
    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>
</web-app>
```

**2. AnnotationConfigWebApplicationContext**ï¼ˆæ³¨è§£é…ç½®ï¼‰

```java
// WebConfig.java
@Configuration
@EnableWebMvc  // å¯ç”¨Spring MVC
@ComponentScan("com.example.web")
public class WebConfig {
    
    @Bean
    public ViewResolver viewResolver() {
        InternalResourceViewResolver resolver = 
            new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
}
```

```java
// åœ¨Servlet 3.0+ç¯å¢ƒä¸­åˆå§‹åŒ–
public class WebAppInitializer 
    implements WebApplicationInitializer {
    
    @Override
    public void onStartup(ServletContext container) {
        // åˆ›å»ºWebå®¹å™¨
        AnnotationConfigWebApplicationContext context = 
            new AnnotationConfigWebApplicationContext();
        context.register(WebConfig.class);
        
        // æ³¨å†ŒDispatcherServlet
        ServletRegistration.Dynamic dispatcher = 
            container.addServlet("dispatcher", 
                new DispatcherServlet(context));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
    }
}
```

**ğŸ”¸ ç‰¹æœ‰åŠŸèƒ½**

```java
// åœ¨Controllerä¸­å¯ä»¥è®¿é—®
@Controller
public class UserController {
    
    @Autowired
    private WebApplicationContext webContext;
    
    public void someMethod() {
        // 1. è·å–ServletContext
        ServletContext servletContext = 
            webContext.getServletContext();
        
        // 2. è®¿é—®Webèµ„æº
        String realPath = 
            servletContext.getRealPath("/WEB-INF/data");
        
        // 3. è®¿é—®è¯·æ±‚ä½œç”¨åŸŸçš„Beanï¼ˆå¦‚æœé…ç½®äº†ï¼‰
        Object bean = webContext.getBean("requestScopedBean");
    }
}
```

**âœ… é€‚ç”¨åœºæ™¯**
- Spring MVC Webåº”ç”¨
- éœ€è¦è®¿é—®ServletContext
- éœ€è¦Webä½œç”¨åŸŸçš„Beanï¼ˆrequestã€sessionç­‰ï¼‰

**âŒ ä¸é€‚åˆåœºæ™¯**
- éWebåº”ç”¨ï¼ˆç”¨æ™®é€šApplicationContextï¼‰
- çº¯REST APIï¼ˆå¯ä»¥ç”¨Spring Bootç®€åŒ–ï¼‰

---

## 3. ğŸ“Š ä½¿ç”¨åœºæ™¯å¯¹æ¯”


### 3.1 åœºæ™¯é€‰æ‹©å†³ç­–æ ‘


```
å¼€å§‹é€‰æ‹©ApplicationContextå®ç°ç±»
         â†“
   æ˜¯Webåº”ç”¨å—ï¼Ÿ
    /        \
  æ˜¯          å¦
  â†“           â†“
WebApplicationContext    æ˜¯å¦ä½¿ç”¨æ³¨è§£é…ç½®ï¼Ÿ
  â†“                      /            \
Spring MVCé¡¹ç›®          æ˜¯             å¦
(é€šå¸¸ç”¨æ³¨è§£é…ç½®)        â†“              â†“
                 AnnotationConfig   é…ç½®æ–‡ä»¶åœ¨å“ªï¼Ÿ
                 ApplicationContext  /          \
                                  é¡¹ç›®å†…       é¡¹ç›®å¤–
                                   â†“            â†“
                            ClassPathXml   FileSystemXml
                            ApplicationContext ApplicationContext
```

### 3.2 å®é™…é¡¹ç›®åœºæ™¯


**ğŸ¯ åœºæ™¯1ï¼šSpring Booté¡¹ç›®**
```java
// Spring Bootè‡ªåŠ¨é…ç½®ï¼Œä½ ä¸ç”¨è‡ªå·±åˆ›å»º
// æ¡†æ¶å†…éƒ¨ä½¿ç”¨AnnotationConfigApplicationContext

@SpringBootApplication
public class MyApp {
    public static void main(String[] args) {
        // Bootå¸®ä½ åˆ›å»ºäº†ApplicationContext
        SpringApplication.run(MyApp.class, args);
    }
}
```

**ğŸ¯ åœºæ™¯2ï¼šä¼ ç»ŸSSMé¡¹ç›®**
```java
// Spring + Spring MVC + MyBatis
// web.xmlä¸­é…ç½®WebApplicationContext

// Springå®¹å™¨ï¼ˆä¸šåŠ¡å±‚ï¼‰
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring-context.xml</param-value>
</context-param>

// Spring MVCå®¹å™¨ï¼ˆè¡¨ç°å±‚ï¼‰
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring-mvc.xml</param-value>
    </init-param>
</servlet>
```

**ğŸ¯ åœºæ™¯3ï¼šç‹¬ç«‹è¿è¡Œç¨‹åº**
```java
// æ¯”å¦‚å®šæ—¶ä»»åŠ¡ã€æ•°æ®å¯¼å…¥å·¥å…·ç­‰
public class DataImportTool {
    public static void main(String[] args) {
        // ä½¿ç”¨æ³¨è§£é…ç½®
        ApplicationContext context = 
            new AnnotationConfigApplicationContext(AppConfig.class);
        
        DataService service = context.getBean(DataService.class);
        service.importData();
    }
}
```

### 3.3 é…ç½®æ–¹å¼å¯¹æ¯”


| é…ç½®æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|---------|
| **XMLé…ç½®** | é…ç½®é›†ä¸­ç®¡ç†<br>ä¿®æ”¹ä¸éœ€è¦é‡æ–°ç¼–è¯‘ | é…ç½®ç¹ç<br>æ²¡æœ‰ç±»å‹æ£€æŸ¥ | è€é¡¹ç›®<br>é…ç½®éœ€è¦ç»å¸¸è°ƒæ•´ |
| **æ³¨è§£é…ç½®** | ä»£ç å³é…ç½®<br>IDEæ”¯æŒå¥½<br>ç±»å‹å®‰å…¨ | é…ç½®åˆ†æ•£<br>ä¿®æ”¹éœ€è¦é‡æ–°ç¼–è¯‘ | æ–°é¡¹ç›®<br>Spring Booté¡¹ç›® |
| **Javaé…ç½®** | çµæ´»æ€§æœ€é«˜<br>å¯ä»¥å†™é€»è¾‘åˆ¤æ–­ | é…ç½®ä»£ç è¾ƒå¤š | å¤æ‚é…ç½®åœºæ™¯ |
| **æ··åˆé…ç½®** | ç»“åˆå„è‡ªä¼˜ç‚¹ | å­¦ä¹ æˆæœ¬é«˜ | è€é¡¹ç›®æ”¹é€  |

---

## 4. ğŸ”¨ é…ç½®æ–¹å¼è¯¦è§£


### 4.1 çº¯XMLé…ç½®æ–¹å¼


**ğŸ“ é¡¹ç›®ç»“æ„**
```
src/main/resources/
â”œâ”€â”€ spring-beans.xml      # Beanå®šä¹‰
â”œâ”€â”€ spring-db.xml        # æ•°æ®åº“é…ç½®
â””â”€â”€ spring-mvc.xml       # MVCé…ç½®
```

**åŸºç¡€Beané…ç½®**ï¼š

```xml
<!-- spring-beans.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="...">
    
    <!-- 1. ç®€å•Bean -->
    <bean id="userService" class="com.example.UserService"/>
    
    <!-- 2. å¸¦å±æ€§çš„Bean -->
    <bean id="orderService" class="com.example.OrderService">
        <property name="maxOrderCount" value="100"/>
    </bean>
    
    <!-- 3. ä¾èµ–æ³¨å…¥ -->
    <bean id="userController" class="com.example.UserController">
        <property name="userService" ref="userService"/>
    </bean>
</beans>
```

**åŠ è½½é…ç½®**ï¼š

```java
ApplicationContext context = 
    new ClassPathXmlApplicationContext(
        "spring-beans.xml",
        "spring-db.xml"
    );
```

---

### 4.2 çº¯æ³¨è§£é…ç½®æ–¹å¼


**é…ç½®ç±»ç¤ºä¾‹**ï¼š

```java
@Configuration
@ComponentScan(basePackages = "com.example")  // æ‰«æç»„ä»¶
@PropertySource("classpath:app.properties")   // åŠ è½½é…ç½®æ–‡ä»¶
public class AppConfig {
    
    // è¯»å–é…ç½®æ–‡ä»¶çš„å€¼
    @Value("${db.url}")
    private String dbUrl;
    
    // å®šä¹‰Bean
    @Bean
    public DataSource dataSource() {
        DruidDataSource ds = new DruidDataSource();
        ds.setUrl(dbUrl);
        return ds;
    }
    
    // Beanä¹‹é—´çš„ä¾èµ–
    @Bean
    public UserDao userDao(DataSource dataSource) {
        return new UserDao(dataSource);
    }
}
```

**ç»„ä»¶æ‰«æ**ï¼š

```java
// ä¸šåŠ¡ç±»åŠ æ³¨è§£
@Service
public class UserService {
    
    @Autowired  // è‡ªåŠ¨æ³¨å…¥
    private UserDao userDao;
    
    public void saveUser(User user) {
        userDao.save(user);
    }
}
```

**å¯åŠ¨å®¹å™¨**ï¼š

```java
ApplicationContext context = 
    new AnnotationConfigApplicationContext(AppConfig.class);
```

---

### 4.3 æ··åˆé…ç½®æ–¹å¼


**åœºæ™¯**ï¼šå·²æœ‰XMLé…ç½®ï¼Œæƒ³é€æ­¥è¿ç§»åˆ°æ³¨è§£

**æ–¹å¼1ï¼šåœ¨XMLä¸­å¼•å…¥æ³¨è§£é…ç½®**

```xml
<!-- spring-config.xml -->
<beans ...>
    <!-- å¯ç”¨æ³¨è§£é…ç½® -->
    <context:annotation-config/>
    <context:component-scan base-package="com.example"/>
    
    <!-- ä»ç„¶ä¿ç•™éƒ¨åˆ†XMLé…ç½® -->
    <bean id="dataSource" class="...">
        ...
    </bean>
</beans>
```

**æ–¹å¼2ï¼šåœ¨Javaé…ç½®ä¸­å¼•å…¥XML**

```java
@Configuration
@ImportResource("classpath:legacy-config.xml")  // å¯¼å…¥XML
public class AppConfig {
    
    @Bean
    public UserService userService() {
        return new UserService();
    }
}
```

**æ–¹å¼3ï¼šå¤šä¸ªé…ç½®ç±»ç»„åˆ**

```java
// ä¸»é…ç½®ç±»
@Configuration
@Import({DatabaseConfig.class, WebConfig.class})  // å¯¼å…¥å…¶ä»–é…ç½®
public class MainConfig {
    // ...
}

// æ•°æ®åº“é…ç½®ç±»
@Configuration
public class DatabaseConfig {
    @Bean
    public DataSource dataSource() { ... }
}

// Webé…ç½®ç±»
@Configuration
public class WebConfig {
    @Bean
    public ViewResolver viewResolver() { ... }
}
```

---

## 5. ğŸ’¡ æœ€ä½³å®è·µå»ºè®®


### 5.1 é€‰æ‹©åŸåˆ™


**ğŸ”¸ æ–°é¡¹ç›®**
```
æ¨èï¼šAnnotationConfigApplicationContext + æ³¨è§£é…ç½®

åŸå› ï¼š
âœ… Spring Bootæ ‡å‡†åšæ³•
âœ… é…ç½®ç®€æ´ï¼Œå¼€å‘æ•ˆç‡é«˜
âœ… IDEæ”¯æŒå¥½ï¼Œæ˜“äºé‡æ„
âœ… ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æœŸæ£€æŸ¥
```

**ğŸ”¸ è€é¡¹ç›®ç»´æŠ¤**
```
ä¿æŒç°æœ‰æ–¹å¼ï¼Œæˆ–æ¸è¿›å¼è¿ç§»

ç­–ç•¥ï¼š
1. ä¿æŒXMLé…ç½®ä¸å˜
2. æ–°åŠŸèƒ½ç”¨æ³¨è§£å¼€å‘
3. ä½¿ç”¨@ImportResourceæ··åˆé…ç½®
4. é€æ­¥é‡æ„è€ä»£ç 
```

**ğŸ”¸ Webé¡¹ç›®**
```
Spring MVCï¼šWebApplicationContext
Spring Bootï¼šè‡ªåŠ¨é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»º

æ³¨æ„ï¼š
- ç†è§£çˆ¶å­å®¹å™¨å…³ç³»ï¼ˆSpring + Spring MVCï¼‰
- Webä½œç”¨åŸŸçš„Beané…ç½®
- é™æ€èµ„æºå¤„ç†é…ç½®
```

### 5.2 å¸¸è§é—®é¢˜


**â“ é—®é¢˜1ï¼šé…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°**

```java
// âŒ é”™è¯¯å†™æ³•
new ClassPathXmlApplicationContext("/beans.xml");  // å¤šäº†æ–œæ 

// âœ… æ­£ç¡®å†™æ³•  
new ClassPathXmlApplicationContext("beans.xml");

// âœ… å­ç›®å½•å†™æ³•
new ClassPathXmlApplicationContext("config/beans.xml");
```

**â“ é—®é¢˜2ï¼šæ³¨è§£æ‰«æä¸åˆ°Bean**

```java
// æ£€æŸ¥ä¸‰ç‚¹ï¼š
// 1. é…ç½®ç±»æœ‰@Configurationæ³¨è§£å—ï¼Ÿ
// 2. æœ‰@ComponentScanæ³¨è§£å—ï¼ŸåŒ…åå¯¹å—ï¼Ÿ
// 3. Beanç±»æœ‰@Component/@Serviceç­‰æ³¨è§£å—ï¼Ÿ

@Configuration
@ComponentScan("com.example")  // ç¡®ä¿åŒ…åæ­£ç¡®
public class AppConfig {
}
```

**â“ é—®é¢˜3ï¼šå¾ªç¯ä¾èµ–é—®é¢˜**

```java
// åœºæ™¯ï¼šAä¾èµ–Bï¼ŒBä¾èµ–A

// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨@Lazyå»¶è¿ŸåŠ è½½
@Service
public class ServiceA {
    @Autowired
    @Lazy  // å»¶è¿Ÿæ³¨å…¥
    private ServiceB serviceB;
}

// è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨Setteræ³¨å…¥ä»£æ›¿æ„é€ å™¨æ³¨å…¥
@Service
public class ServiceA {
    private ServiceB serviceB;
    
    @Autowired
    public void setServiceB(ServiceB serviceB) {
        this.serviceB = serviceB;
    }
}
```

### 5.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**ğŸš€ å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–**

```java
// 1. ç¼©å°æ‰«æèŒƒå›´
@ComponentScan(basePackages = "com.example.service")  // ç²¾ç¡®åŒ…å

// 2. ä½¿ç”¨excludeFiltersæ’é™¤ä¸éœ€è¦çš„ç±»
@ComponentScan(
    basePackages = "com.example",
    excludeFilters = @Filter(
        type = FilterType.REGEX,
        pattern = "com.example.test.*"
    )
)

// 3. æ‡’åŠ è½½éå¿…éœ€Bean
@Bean
@Lazy
public ExpensiveService expensiveService() {
    return new ExpensiveService();
}
```

**ğŸ’¾ å†…å­˜ä¼˜åŒ–**

```java
// 1. å•ä¾‹Beanä½¿ç”¨@Scopeæ§åˆ¶
@Service
@Scope("prototype")  // åŸå‹ä½œç”¨åŸŸï¼Œéœ€è¦æ—¶æ‰åˆ›å»º
public class StatefulService {
}

// 2. åŠæ—¶å…³é—­å®¹å™¨é‡Šæ”¾èµ„æº
ConfigurableApplicationContext context = 
    new AnnotationConfigApplicationContext(AppConfig.class);
try {
    // ä½¿ç”¨å®¹å™¨
} finally {
    context.close();  // å…³é—­å®¹å™¨
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„çŸ¥è¯†ç‚¹


**ğŸ”¸ ç†è§£ApplicationContextçš„ä½œç”¨**
```
ApplicationContext = å¯¹è±¡å·¥å‚ + ç”Ÿå‘½å‘¨æœŸç®¡ç† + èµ„æºè®¿é—®
æ ¸å¿ƒï¼šç®¡ç†Beançš„åˆ›å»ºã€ä¾èµ–æ³¨å…¥ã€ç”Ÿå‘½å‘¨æœŸ
```

**ğŸ”¸ å››ç§æ ¸å¿ƒå®ç°ç±»**
```
ClassPathXml â†’ ç±»è·¯å¾„åŠ è½½XMLï¼ˆé¡¹ç›®å†…ï¼‰
FileSystemXml â†’ æ–‡ä»¶ç³»ç»ŸåŠ è½½XMLï¼ˆä»»æ„ä½ç½®ï¼‰
AnnotationConfig â†’ æ³¨è§£é…ç½®ï¼ˆç°ä»£é¦–é€‰ï¼‰
WebApplicationContext â†’ Webç¯å¢ƒä¸“ç”¨
```

**ğŸ”¸ é…ç½®æ–¹å¼é€‰æ‹©**
```
XMLé…ç½® â†’ è€é¡¹ç›®ã€é…ç½®é›†ä¸­ç®¡ç†
æ³¨è§£é…ç½® â†’ æ–°é¡¹ç›®ã€Spring Boot
æ··åˆé…ç½® â†’ è¿‡æ¸¡æ–¹æ¡ˆ
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ’¡ è·¯å¾„åŠ è½½çš„åŒºåˆ«**
```
ClassPath:
- ä»ç¼–è¯‘åçš„ç±»è·¯å¾„åŠ è½½
- é€šå¸¸æ˜¯target/classesæˆ–WEB-INF/classes
- é…ç½®æ–‡ä»¶æ‰“åŒ…åœ¨jar/warä¸­

FileSystem:
- ä»æ–‡ä»¶ç³»ç»Ÿç»å¯¹/ç›¸å¯¹è·¯å¾„åŠ è½½
- é…ç½®æ–‡ä»¶å¯ä»¥åœ¨é¡¹ç›®å¤–éƒ¨
- æ–¹ä¾¿è¿ç»´ä¿®æ”¹é…ç½®æ— éœ€é‡æ–°æ‰“åŒ…
```

**ğŸ’¡ Webå®¹å™¨çš„ç‰¹æ®Šæ€§**
```
WebApplicationContextç»§æ‰¿ApplicationContext
é¢å¤–åŠŸèƒ½ï¼š
- è®¿é—®ServletContext
- æ”¯æŒWebä½œç”¨åŸŸï¼ˆrequestã€sessionï¼‰
- ä¸Servletå®¹å™¨ç”Ÿå‘½å‘¨æœŸç»‘å®š
```

**ğŸ’¡ æ³¨è§£é…ç½®çš„ä¼˜åŠ¿**
```
ç±»å‹å®‰å…¨ â†’ ç¼–è¯‘æœŸæ£€æŸ¥ï¼Œå‡å°‘é”™è¯¯
IDEå‹å¥½ â†’ è‡ªåŠ¨è¡¥å…¨ã€é‡æ„æ”¯æŒ
é…ç½®å³ä»£ç  â†’ æ–¹ä¾¿ç‰ˆæœ¬æ§åˆ¶å’ŒCodeReview
```

### 6.3 å®é™…åº”ç”¨å»ºè®®


**æ–°æ‰‹èµ·æ­¥**ï¼š
1. å…ˆå­¦æ³¨è§£é…ç½®ï¼ˆAnnotationConfigApplicationContextï¼‰
2. ç†è§£@Configurationã€@Beanã€@ComponentScan
3. æŒæ¡å¸¸ç”¨æ³¨è§£ï¼š@Componentã€@Serviceã€@Autowired

**è¿›é˜¶å­¦ä¹ **ï¼š
1. ç†è§£ä¸åŒå®ç°ç±»çš„ä½¿ç”¨åœºæ™¯
2. æŒæ¡XMLå’Œæ³¨è§£çš„æ··åˆé…ç½®
3. å­¦ä¹ Webç¯å¢ƒçš„å®¹å™¨é…ç½®

**å®æˆ˜æŠ€å·§**ï¼š
- Spring Booté¡¹ç›®ï¼šä½¿ç”¨é»˜è®¤çš„æ³¨è§£é…ç½®
- ä¼ ç»Ÿé¡¹ç›®ï¼šæ ¹æ®ç°æœ‰é…ç½®æ–¹å¼é€‰æ‹©
- é…ç½®æ–‡ä»¶å¤–éƒ¨åŒ–ï¼šè€ƒè™‘ä½¿ç”¨FileSystemXmlæˆ–é…ç½®ä¸­å¿ƒ

### 6.4 è®°å¿†å£è¯€


```
ApplicationContextæœ‰å››ç§ï¼Œ
ClassPathé¡¹ç›®å†…ä¸­ç”¨ï¼Œ
FileSystemå¤–éƒ¨è·¯å¾„é€šï¼Œ
AnnotationConfigæ³¨è§£é£ï¼Œ
WebContextä¸“ä¸ºWebåº”ç”¨å·¥ã€‚

é…ç½®æ–¹å¼ä¸‰é€‰ä¸€ï¼Œ
XMLè€é¡¹ç›®ä¼ ç»Ÿç»ï¼Œ
æ³¨è§£æ–°é¡¹ç›®æ›´è½»ç›ˆï¼Œ
æ··åˆæ–¹å¼åšè¿‡æ¸¡ï¼Œ
æ ¹æ®åœºæ™¯çµæ´»ç”¨ã€‚
```

---

> ğŸ¯ **å­¦ä¹ æ£€æŸ¥æ¸…å•**
> 
> - [ ] ç†è§£ApplicationContextçš„æ ¸å¿ƒä½œç”¨
> - [ ] æŒæ¡ClassPathXmlå’ŒFileSystemXmlçš„åŒºåˆ«
> - [ ] ä¼šç”¨AnnotationConfigApplicationContexté…ç½®Bean
> - [ ] äº†è§£WebApplicationContextçš„ä½¿ç”¨åœºæ™¯
> - [ ] èƒ½æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®ç°ç±»
> - [ ] æŒæ¡XMLã€æ³¨è§£ã€æ··åˆä¸‰ç§é…ç½®æ–¹å¼
> - [ ] çŸ¥é“å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ