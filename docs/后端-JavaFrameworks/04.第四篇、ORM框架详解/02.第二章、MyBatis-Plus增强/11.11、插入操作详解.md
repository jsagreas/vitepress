---
title: 11ã€æ’å…¥æ“ä½œè¯¦è§£
---
## ğŸ“š ç›®å½•

1. [æ’å…¥æ“ä½œåŸºç¡€è®¤çŸ¥](#1-æ’å…¥æ“ä½œåŸºç¡€è®¤çŸ¥)
2. [å•æ¡æ•°æ®æ’å…¥](#2-å•æ¡æ•°æ®æ’å…¥)
3. [æ‰¹é‡æ•°æ®æ’å…¥](#3-æ‰¹é‡æ•°æ®æ’å…¥)
4. [ä¸»é”®å›å¡«æœºåˆ¶](#4-ä¸»é”®å›å¡«æœºåˆ¶)
5. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#5-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ’å…¥æ“ä½œåŸºç¡€è®¤çŸ¥


### 1.1 ä»€ä¹ˆæ˜¯æ’å…¥æ“ä½œ


**é€šä¿—ç†è§£**ï¼šå°±åƒå¾€Excelè¡¨æ ¼é‡Œæ·»åŠ æ–°çš„ä¸€è¡Œæ•°æ®ï¼ŒæŠŠä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚

```
ç°å®åœºæ™¯ç±»æ¯”ï¼š
æ³¨å†Œæ–°ç”¨æˆ· â†’ æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥æ•°æ®åº“
å‘å¸ƒæ–°æ–‡ç«  â†’ æŠŠæ–‡ç« å†…å®¹å­˜å…¥æ•°æ®åº“
æ·»åŠ å•†å“   â†’ æŠŠå•†å“ä¿¡æ¯å­˜å…¥æ•°æ®åº“

æ•°æ®æµå‘ï¼š
Javaå¯¹è±¡(å†…å­˜) â†’ MyBatis-Plus â†’ æ•°æ®åº“è¡¨(ç£ç›˜)
```

### 1.2 MyBatis-Plusä¸ºä»€ä¹ˆè¦å¢å¼ºæ’å…¥


**ä¼ ç»ŸMyBatisçš„ç—›ç‚¹**ï¼š
```
âŒ éœ€è¦æ‰‹å†™SQLæ’å…¥è¯­å¥
âŒ ä¸»é”®ç”Ÿæˆéœ€è¦é¢å¤–é…ç½®
âŒ æ‰¹é‡æ’å…¥éœ€è¦å†™å¤æ‚çš„XML
âŒ ä»£ç é‡å¤åº¦é«˜ï¼Œç»´æŠ¤æˆæœ¬å¤§
```

**MyBatis-Plusçš„å¢å¼º**ï¼š
```
âœ… è‡ªåŠ¨ç”ŸæˆINSERTè¯­å¥
âœ… æ™ºèƒ½ä¸»é”®ç­–ç•¥ï¼Œè‡ªåŠ¨å›å¡«
âœ… ç®€å•APIæå®šæ‰¹é‡æ’å…¥
âœ… ä¸€è¡Œä»£ç å®Œæˆæ’å…¥æ“ä½œ
```

### 1.3 æ’å…¥æ“ä½œçš„æœ¬è´¨æµç¨‹


```
åº”ç”¨å±‚                     æ¡†æ¶å±‚                    æ•°æ®åº“å±‚
  |                         |                          |
  |--[1]åˆ›å»ºå®ä½“å¯¹è±¡-------->|                          |
  |   User user = new()     |                          |
  |                         |                          |
  |--[2]è°ƒç”¨insertæ–¹æ³•----->|                          |
  |   userMapper.insert()   |                          |
  |                         |--[3]ç”ŸæˆSQLè¯­å¥--------->|
  |                         |   INSERT INTO user...    |
  |                         |                          |
  |                         |<--[4]è¿”å›å½±å“è¡Œæ•°--------|
  |                         |   rows = 1               |
  |                         |                          |
  |<--[5]ä¸»é”®å›å¡«å¯¹è±¡--------|                          |
  |   user.getId() = 123    |                          |
```

---

## 2. ğŸ“ å•æ¡æ•°æ®æ’å…¥


### 2.1 åŸºç¡€æ’å…¥æ–¹æ³• - insert()


**æ–¹æ³•å®šä¹‰**ï¼š
```java
int insert(T entity);
```

**å‚æ•°è¯´æ˜**ï¼š
- `T entity`ï¼šè¦æ’å…¥çš„å®ä½“å¯¹è±¡
- **è¿”å›å€¼**ï¼šå½±å“çš„è¡Œæ•°ï¼ˆæˆåŠŸé€šå¸¸è¿”å›1ï¼‰

**åŸºç¡€ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
// åˆ›å»ºç”¨æˆ·å¯¹è±¡
User user = new User();
user.setName("å¼ ä¸‰");
user.setAge(25);
user.setEmail("zhangsan@example.com");

// æ‰§è¡Œæ’å…¥
int rows = userMapper.insert(user);

// åˆ¤æ–­ç»“æœ
if (rows > 0) {
    System.out.println("æ’å…¥æˆåŠŸ");
    System.out.println("è‡ªåŠ¨ç”Ÿæˆçš„IDï¼š" + user.getId());
}
```

**ğŸ” å¹•åå‘ç”Ÿäº†ä»€ä¹ˆ**ï¼š
```
1. MyBatis-Plusåˆ†æUserå®ä½“ç±»
2. æ ¹æ®æ³¨è§£å’Œå­—æ®µè‡ªåŠ¨ç”ŸæˆSQLï¼š
   INSERT INTO user (name, age, email) VALUES ('å¼ ä¸‰', 25, 'zhangsan@example.com')
3. æ‰§è¡ŒSQLå¹¶è¿”å›å½±å“è¡Œæ•°
4. å¦‚æœæœ‰ä¸»é”®ç­–ç•¥ï¼Œè‡ªåŠ¨å›å¡«IDåˆ°userå¯¹è±¡
```

### 2.2 å®ä½“å¯¹è±¡è®¾è®¡è¦ç‚¹


**å®ä½“ç±»ç¤ºä¾‹**ï¼š
```java
@TableName("user")  // æŒ‡å®šè¡¨å
public class User {
    
    @TableId(type = IdType.AUTO)  // ä¸»é”®è‡ªå¢
    private Long id;
    
    private String name;
    
    private Integer age;
    
    private String email;
    
    @TableField(fill = FieldFill.INSERT)  // æ’å…¥æ—¶è‡ªåŠ¨å¡«å……
    private Date createTime;
    
    // getter/setterçœç•¥
}
```

**ğŸ”¸ å…³é”®æ³¨è§£è¯´æ˜**ï¼š

| æ³¨è§£ | ä½œç”¨ | ç¤ºä¾‹ |
|------|------|------|
| `@TableName` | æŒ‡å®šæ•°æ®åº“è¡¨å | `@TableName("sys_user")` |
| `@TableId` | æ ‡è®°ä¸»é”®å­—æ®µ | `@TableId(type = IdType.AUTO)` |
| `@TableField` | å­—æ®µå±æ€§é…ç½® | `@TableField(fill = FieldFill.INSERT)` |

### 2.3 æ’å…¥æ—¶çš„å­—æ®µå¤„ç†


**ğŸ”¹ NULLå€¼å¤„ç†**ï¼š
```java
User user = new User();
user.setName("æå››");
// ageå’Œemailæ²¡è®¾ç½®ï¼Œé»˜è®¤ä¸ºnull

userMapper.insert(user);
// SQL: INSERT INTO user (name) VALUES ('æå››')
// ageå’Œemailä¸ºnullä¸ä¼šæ’å…¥åˆ°SQLä¸­
```

**ğŸ”¹ é»˜è®¤å€¼å¤„ç†**ï¼š
```java
@TableField(fill = FieldFill.INSERT)
private Date createTime;  // é€šè¿‡å¡«å……å™¨è‡ªåŠ¨è®¾ç½®

// å¡«å……å™¨é…ç½®
@Component
public class MyMetaObjectHandler implements MetaObjectHandler {
    @Override
    public void insertFill(MetaObject metaObject) {
        this.setFieldValByName("createTime", new Date(), metaObject);
    }
}
```

---

## 3. ğŸ“¦ æ‰¹é‡æ•°æ®æ’å…¥


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡æ’å…¥


**æ€§èƒ½å¯¹æ¯”**ï¼š
```
å¾ªç¯æ’å…¥ï¼ˆ1000æ¡æ•°æ®ï¼‰ï¼š
for (int i = 0; i < 1000; i++) {
    userMapper.insert(user);  // æ‰§è¡Œ1000æ¬¡æ•°æ®åº“äº¤äº’
}
è€—æ—¶ï¼šçº¦3-5ç§’

æ‰¹é‡æ’å…¥ï¼ˆ1000æ¡æ•°æ®ï¼‰ï¼š
userMapper.insertBatch(userList);  // ä¸€æ¬¡æ€§æ’å…¥
è€—æ—¶ï¼šçº¦0.3-0.5ç§’

æ€§èƒ½æå‡ï¼š10å€ä»¥ä¸Šï¼
```

### 3.2 æ‰¹é‡æ’å…¥æ–¹æ³• - insertBatch()


> ğŸ’¡ **æ³¨æ„**ï¼š`insertBatch` ä¸æ˜¯MyBatis-Pluså†…ç½®æ–¹æ³•ï¼Œéœ€è¦é€šè¿‡Serviceæˆ–è‡ªå®šä¹‰å®ç°

**æ–¹å¼ä¸€ï¼šä½¿ç”¨Serviceæ‰¹é‡æ’å…¥ï¼ˆæ¨èï¼‰**ï¼š
```java
@Service
public class UserServiceImpl extends ServiceImpl<UserMapper, User> 
    implements IUserService {
    
    public boolean batchInsert(List<User> userList) {
        // saveBatchå†…éƒ¨ä¼˜åŒ–äº†æ‰¹é‡æ’å…¥
        return this.saveBatch(userList);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
List<User> userList = new ArrayList<>();
for (int i = 0; i < 1000; i++) {
    User user = new User();
    user.setName("ç”¨æˆ·" + i);
    user.setAge(20 + i % 30);
    userList.add(user);
}

userService.saveBatch(userList);  // æ‰¹é‡æ’å…¥
```

**æ–¹å¼äºŒï¼šè‡ªå®šä¹‰æ‰¹é‡æ’å…¥SQL**ï¼š
```java
// Mapperæ¥å£
public interface UserMapper extends BaseMapper<User> {
    // è‡ªå®šä¹‰æ‰¹é‡æ’å…¥æ–¹æ³•
    int insertBatch(@Param("list") List<User> userList);
}
```

```xml
<!-- UserMapper.xml -->
<insert id="insertBatch" parameterType="java.util.List">
    INSERT INTO user (name, age, email)
    VALUES
    <foreach collection="list" item="item" separator=",">
        (#{item.name}, #{item.age}, #{item.email})
    </foreach>
</insert>
```

### 3.3 æ‰¹é‡æ’å…¥æ€§èƒ½ä¼˜åŒ–


**ğŸ”¸ åˆ†æ‰¹å¤„ç†ç­–ç•¥**ï¼š
```java
// æ¯æ¬¡æ’å…¥500æ¡ï¼Œé¿å…SQLè¿‡é•¿
int batchSize = 500;
for (int i = 0; i < userList.size(); i += batchSize) {
    int end = Math.min(i + batchSize, userList.size());
    List<User> batch = userList.subList(i, end);
    userService.saveBatch(batch);
}
```

**ğŸ”¸ é…ç½®ä¼˜åŒ–**ï¼š
```yaml
# application.yml
mybatis-plus:
  global-config:
    db-config:
      # æ‰¹é‡æ’å…¥å¤§å°
      insert-batch-size: 1000
```

**ğŸ“Š æ‰¹é‡å¤§å°é€‰æ‹©å»ºè®®**ï¼š

| æ•°æ®é‡ | æ¨èæ‰¹æ¬¡å¤§å° | åŸå›  |
|--------|------------|------|
| < 100æ¡ | ä¸€æ¬¡æ€§æ’å…¥ | æ•°æ®é‡å°ï¼Œæ— éœ€åˆ†æ‰¹ |
| 100-1000æ¡ | 500æ¡/æ‰¹ | å¹³è¡¡æ€§èƒ½å’Œå®‰å…¨æ€§ |
| 1000-10000æ¡ | 500-1000æ¡/æ‰¹ | é¿å…SQLè¿‡é•¿ |
| > 10000æ¡ | 1000æ¡/æ‰¹ | åˆ†æ‰¹æäº¤ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º |

---

## 4. ğŸ”‘ ä¸»é”®å›å¡«æœºåˆ¶


### 4.1 ä»€ä¹ˆæ˜¯ä¸»é”®å›å¡«


**é€šä¿—ç†è§£**ï¼šæ’å…¥æ•°æ®åï¼Œæ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„IDå€¼ä¼šè‡ªåŠ¨å¡«å……åˆ°Javaå¯¹è±¡ä¸­ã€‚

```
æ’å…¥å‰ï¼š
User user = new User();
user.setName("ç‹äº”");
System.out.println(user.getId());  // null

æ’å…¥åï¼š
userMapper.insert(user);
System.out.println(user.getId());  // 123ï¼ˆæ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„IDï¼‰
```

### 4.2 ä¸»é”®ç”Ÿæˆç­–ç•¥


**å¸¸ç”¨ä¸»é”®ç­–ç•¥å¯¹æ¯”**ï¼š

| ç­–ç•¥ç±»å‹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|---------|------|---------|------|
| `AUTO` | æ•°æ®åº“è‡ªå¢ | MySQLç­‰æ”¯æŒè‡ªå¢çš„æ•°æ®åº“ | `@TableId(type = IdType.AUTO)` |
| `ASSIGN_ID` | é›ªèŠ±ç®—æ³•ID | åˆ†å¸ƒå¼ç³»ç»Ÿ | `@TableId(type = IdType.ASSIGN_ID)` |
| `ASSIGN_UUID` | UUIDå­—ç¬¦ä¸² | éœ€è¦å­—ç¬¦ä¸²ä¸»é”® | `@TableId(type = IdType.ASSIGN_UUID)` |
| `INPUT` | æ‰‹åŠ¨è¾“å…¥ | ä¸šåŠ¡IDä½œä¸ºä¸»é”® | `@TableId(type = IdType.INPUT)` |

**ğŸ”¸ AUTO - æ•°æ®åº“è‡ªå¢**ï¼š
```java
@TableId(type = IdType.AUTO)
private Long id;

// ä½¿ç”¨
User user = new User();
user.setName("å¼ ä¸‰");
userMapper.insert(user);
// æ’å…¥åidè‡ªåŠ¨å›å¡«ï¼šuser.getId() = 1
```

**ğŸ”¸ ASSIGN_ID - é›ªèŠ±ç®—æ³•**ï¼š
```java
@TableId(type = IdType.ASSIGN_ID)
private Long id;

// ä½¿ç”¨
User user = new User();
user.setName("æå››");
userMapper.insert(user);
// æ’å…¥å‰å°±ç”ŸæˆIDï¼šuser.getId() = 1234567890123456789
```

**ğŸ”¸ INPUT - æ‰‹åŠ¨è¾“å…¥**ï¼š
```java
@TableId(type = IdType.INPUT)
private String id;

// ä½¿ç”¨
User user = new User();
user.setId("USER_001");  // å¿…é¡»æ‰‹åŠ¨è®¾ç½®
user.setName("ç‹äº”");
userMapper.insert(user);
```

### 4.3 ä¸»é”®å›å¡«åŸç†


**å›å¡«æµç¨‹å›¾**ï¼š
```
åº”ç”¨å±‚              MyBatis-Plus             æ•°æ®åº“
  |                      |                      |
  |--æ’å…¥userå¯¹è±¡------->|                      |
  |  id=null            |                      |
  |                     |--æ‰§è¡ŒINSERT--------->|
  |                     |                      |
  |                     |<--è¿”å›è‡ªå¢ID---------|
  |                     |  LAST_INSERT_ID()    |
  |                     |                      |
  |<--å›å¡«IDåˆ°å¯¹è±¡------|                      |
  |  user.id=123        |                      |
```

**æ ¸å¿ƒä»£ç é€»è¾‘**ï¼š
```java
// MyBatis-Pluså†…éƒ¨å¤„ç†æµç¨‹
public int insert(User user) {
    // 1. å¦‚æœæ˜¯AUTOç­–ç•¥ï¼Œæ‰§è¡Œæ’å…¥
    int rows = sqlSession.insert("insert", user);
    
    // 2. è·å–æ•°æ®åº“ç”Ÿæˆçš„ä¸»é”®
    Long generatedId = getGeneratedKey();
    
    // 3. åå°„è®¾ç½®åˆ°userå¯¹è±¡çš„idå­—æ®µ
    user.setId(generatedId);
    
    return rows;
}
```

---

## 5. âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 5.1 æ‰¹é‡æ’å…¥ä¼˜åŒ–æŠ€å·§


**ğŸ”¹ æŠ€å·§1ï¼šä½¿ç”¨JDBCæ‰¹å¤„ç†**ï¼š
```yaml
# application.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true
    # rewriteBatchedStatements=true å¼€å¯æ‰¹å¤„ç†ä¼˜åŒ–
```

**æ•ˆæœå¯¹æ¯”**ï¼š
```
æœªå¼€å¯æ‰¹å¤„ç†ï¼š
INSERT INTO user VALUES (...)
INSERT INTO user VALUES (...)
INSERT INTO user VALUES (...)
æ¯æ¡éƒ½æ˜¯å•ç‹¬è¯·æ±‚ï¼Œæ…¢ï¼

å¼€å¯æ‰¹å¤„ç†ï¼š
INSERT INTO user VALUES (...),(...),(...)
åˆå¹¶æˆä¸€æ¡SQLï¼Œå¿«10å€ï¼
```

**ğŸ”¹ æŠ€å·§2ï¼šå…³é—­ä¸»é”®å›å¡«ï¼ˆå¤§æ‰¹é‡åœºæ™¯ï¼‰**ï¼š
```java
// å¦‚æœä¸éœ€è¦ä¸»é”®å›å¡«ï¼Œå¯ä»¥æå‡æ€§èƒ½
@TableId(type = IdType.NONE)  // ä¸å¤„ç†ä¸»é”®
private Long id;
```

**ğŸ”¹ æŠ€å·§3ï¼šäº‹åŠ¡æ§åˆ¶**ï¼š
```java
@Transactional
public void batchInsert(List<User> userList) {
    // æ•´ä¸ªæ‰¹é‡æ’å…¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­
    // è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»š
    userService.saveBatch(userList);
}
```

### 5.2 æ’å…¥æ€§èƒ½æµ‹è¯•å¯¹æ¯”


**ğŸ“Š æ€§èƒ½æµ‹è¯•æ•°æ®**ï¼ˆæ’å…¥10000æ¡æ•°æ®ï¼‰ï¼š

| æ–¹å¼ | è€—æ—¶ | ä¼˜åŒ–å»ºè®® |
|------|------|---------|
| å¾ªç¯insert | çº¦15ç§’ | âŒ ä¸æ¨è |
| insertBatch | çº¦1.5ç§’ | âœ… æ¨è |
| insertBatch + æ‰¹å¤„ç† | çº¦0.5ç§’ | ğŸ”¥ æœ€ä½³ |
| insertBatch + æ‰¹å¤„ç† + æ— ä¸»é”®å›å¡« | çº¦0.3ç§’ | âš¡ æè‡´æ€§èƒ½ |

### 5.3 å¸¸è§æ€§èƒ½é™·é˜±


**âŒ é™·é˜±1ï¼šå¾ªç¯è°ƒç”¨insert**ï¼š
```java
// é”™è¯¯ç¤ºèŒƒ
for (User user : userList) {
    userMapper.insert(user);  // æ¯æ¬¡éƒ½æ˜¯ä¸€æ¬¡æ•°æ®åº“äº¤äº’
}

// æ­£ç¡®åšæ³•
userService.saveBatch(userList);  // æ‰¹é‡æ’å…¥
```

**âŒ é™·é˜±2ï¼šæ‰¹é‡è¿‡å¤§**ï¼š
```java
// å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºæˆ–SQLè¿‡é•¿
List<User> hugeList = ...; // 10ä¸‡æ¡æ•°æ®
userService.saveBatch(hugeList);  // âŒ å±é™©

// æ­£ç¡®åšæ³•ï¼šåˆ†æ‰¹å¤„ç†
int batchSize = 1000;
for (int i = 0; i < hugeList.size(); i += batchSize) {
    List<User> batch = hugeList.subList(i, Math.min(i + batchSize, hugeList.size()));
    userService.saveBatch(batch);
}
```

**âŒ é™·é˜±3ï¼šå¿˜è®°å¼€å¯æ‰¹å¤„ç†å‚æ•°**ï¼š
```yaml
# å¦‚æœä¸åŠ rewriteBatchedStatements=true
# æ‰¹é‡æ’å…¥æ€§èƒ½æå‡æœ‰é™
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test  # âŒ æœªä¼˜åŒ–
    url: jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true  # âœ… å·²ä¼˜åŒ–
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ’å…¥æ“ä½œæœ¬è´¨ï¼šæŠŠJavaå¯¹è±¡æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“è¡¨ä¸­
ğŸ”¸ insertæ–¹æ³•ï¼šå•æ¡æ•°æ®æ’å…¥ï¼Œè‡ªåŠ¨ç”ŸæˆSQL
ğŸ”¸ æ‰¹é‡æ’å…¥ï¼šé€šè¿‡Serviceçš„saveBatchæ–¹æ³•å®ç°
ğŸ”¸ ä¸»é”®å›å¡«ï¼šæ’å…¥åæ•°æ®åº“ç”Ÿæˆçš„IDè‡ªåŠ¨å¡«å……åˆ°å¯¹è±¡
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡å¤„ç† + JDBCæ‰¹å¤„ç†å‚æ•° + åˆç†åˆ†æ‰¹
```

### 6.2 ä¸»é”®ç­–ç•¥é€‰æ‹©å»ºè®®


**ğŸ“Œ é€‰æ‹©å†³ç­–æ ‘**ï¼š
```
æ˜¯å¦åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿ
â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ ASSIGN_IDï¼ˆé›ªèŠ±ç®—æ³•ï¼‰
â””â”€ å¦ â†’ æ•°æ®åº“æ”¯æŒè‡ªå¢ï¼Ÿ
       â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ AUTOï¼ˆæ•°æ®åº“è‡ªå¢ï¼‰
       â””â”€ å¦ â†’ ä¸šåŠ¡æœ‰ç‰¹æ®ŠIDè§„åˆ™ï¼Ÿ
              â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ INPUTï¼ˆæ‰‹åŠ¨è¾“å…¥ï¼‰
              â””â”€ å¦ â†’ ä½¿ç”¨ ASSIGN_IDï¼ˆé›ªèŠ±ç®—æ³•ï¼‰
```

### 6.3 æ‰¹é‡æ’å…¥æœ€ä½³å®è·µ


**âœ… æ¨èåšæ³•**ï¼š
```java
@Transactional
public void importUsers(List<User> userList) {
    // 1. å‚æ•°æ ¡éªŒ
    if (userList == null || userList.isEmpty()) {
        return;
    }
    
    // 2. åˆ†æ‰¹å¤„ç†
    int batchSize = 500;
    for (int i = 0; i < userList.size(); i += batchSize) {
        int end = Math.min(i + batchSize, userList.size());
        List<User> batch = userList.subList(i, end);
        
        // 3. æ‰¹é‡æ’å…¥
        this.saveBatch(batch);
    }
}
```

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
- å•æ¬¡æ‰¹é‡ä¸è¶…è¿‡1000æ¡
- å¼€å¯JDBCæ‰¹å¤„ç†å‚æ•°
- è€ƒè™‘äº‹åŠ¡å¤§å°ï¼Œé¿å…é•¿äº‹åŠ¡
- å¤§æ•°æ®é‡å»ºè®®å¼‚æ­¥å¤„ç†

### 6.4 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ å…¸å‹åœºæ™¯**ï¼š

| åœºæ™¯ | æ–¹æ³•é€‰æ‹© | è¯´æ˜ |
|------|---------|------|
| ç”¨æˆ·æ³¨å†Œ | `insert()` | å•æ¡æ’å…¥å³å¯ |
| æ•°æ®å¯¼å…¥ | `saveBatch()` | æ‰¹é‡æ’å…¥ï¼Œæ³¨æ„åˆ†æ‰¹ |
| æ—¥å¿—è®°å½• | `insert()` | å®æ—¶å•æ¡æ’å…¥ |
| Excelå¯¼å…¥ | `saveBatch()` | å…ˆè¯»å–åˆ°Listï¼Œå†æ‰¹é‡æ’å…¥ |

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æ’å…¥æ•°æ®ç”¨insertï¼Œå•æ¡æ‰¹é‡è¦åˆ†æ¸…
ä¸»é”®ç­–ç•¥é€‰å¯¹åº”ï¼Œè‡ªå¢é›ªèŠ±çœ‹åœºæ™¯
æ‰¹é‡æ’å…¥è«å¾ªç¯ï¼Œåˆ†æ‰¹å¤„ç†æ€§èƒ½èµ¢
å›å¡«æœºåˆ¶è¦ç†è§£ï¼Œå¯¹è±¡IDè‡ªåŠ¨å¡«
```