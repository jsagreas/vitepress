---
title: 71ã€ä¼ä¸šåº”ç”¨é¢è¯•é¢˜
---
## ğŸ“š ç›®å½•

1. [å¤šæ•°æ®æºé…ç½®æ–¹æ¡ˆ](#1-å¤šæ•°æ®æºé…ç½®æ–¹æ¡ˆ)
2. [äº‹åŠ¡ç®¡ç†æœ€ä½³å®è·µ](#2-äº‹åŠ¡ç®¡ç†æœ€ä½³å®è·µ)
3. [å®‰å…¨é˜²æŠ¤æªæ–½](#3-å®‰å…¨é˜²æŠ¤æªæ–½)
4. [ç›‘æ§å‘Šè­¦æœºåˆ¶](#4-ç›‘æ§å‘Šè­¦æœºåˆ¶)
5. [ç”Ÿäº§ç¯å¢ƒé…ç½®](#5-ç”Ÿäº§ç¯å¢ƒé…ç½®)
6. [å›¢é˜Ÿåä½œè§„èŒƒ](#6-å›¢é˜Ÿåä½œè§„èŒƒ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ å¤šæ•°æ®æºé…ç½®æ–¹æ¡ˆ


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šæ•°æ®æº


**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
æƒ³è±¡ä½ ç»è¥ä¸€å®¶è¿é”è¶…å¸‚ï¼Œæ€»éƒ¨æœ‰ä¸ªå¤§ä»“åº“ï¼ˆä¸»æ•°æ®åº“ï¼‰ï¼Œå„ä¸ªåˆ†åº—ä¹Ÿæœ‰è‡ªå·±çš„å°ä»“åº“ï¼ˆä»æ•°æ®åº“ï¼‰ã€‚æœ‰æ—¶å€™éœ€è¦ä»æ€»ä»“åº“æ‹¿è´§ï¼Œæœ‰æ—¶å€™ä»åˆ†åº—ä»“åº“æ‹¿è´§ï¼Œè¿™å°±æ˜¯å¤šæ•°æ®æºçš„åº”ç”¨åœºæ™¯ã€‚

```
ğŸ“Š ä¼ä¸šå¸¸è§åœºæ™¯ï¼š
åœºæ™¯1ï¼šè¯»å†™åˆ†ç¦»
â€¢ ä¸»åº“ï¼šå¤„ç†å¢åˆ æ”¹æ“ä½œ
â€¢ ä»åº“ï¼šå¤„ç†æŸ¥è¯¢æ“ä½œ
â€¢ ç›®çš„ï¼šåˆ†æ‹…æ•°æ®åº“å‹åŠ›ï¼Œæå‡æ€§èƒ½

åœºæ™¯2ï¼šä¸šåŠ¡éš”ç¦»  
â€¢ è®¢å•åº“ï¼šå­˜å‚¨è®¢å•ç›¸å…³æ•°æ®
â€¢ ç”¨æˆ·åº“ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯
â€¢ å•†å“åº“ï¼šå­˜å‚¨å•†å“ä¿¡æ¯
â€¢ ç›®çš„ï¼šæ•°æ®éš”ç¦»ï¼Œä¾¿äºç®¡ç†

åœºæ™¯3ï¼šå¤šç§Ÿæˆ·ç³»ç»Ÿ
â€¢ ç§Ÿæˆ·Aæ•°æ®åº“
â€¢ ç§Ÿæˆ·Bæ•°æ®åº“
â€¢ ç›®çš„ï¼šæ•°æ®å®Œå…¨éš”ç¦»ï¼Œä¿è¯å®‰å…¨
```

### 1.2 Dynamic-DataSourceå®ç°æ–¹æ¡ˆ


**ğŸ”§ æ ¸å¿ƒé…ç½®æ€è·¯**ï¼š
```yaml
# application.yml - é€šä¿—ç†è§£ï¼šç»™æ¯ä¸ªæ•°æ®åº“èµ·ä¸ªåå­—
spring:
  datasource:
    dynamic:
      primary: master  # é»˜è®¤ç”¨è¿™ä¸ªæ•°æ®åº“
      strict: false    # ä¸ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰¾ä¸åˆ°æ•°æ®æºä¸æŠ¥é”™
      datasource:
        # ä¸»åº“é…ç½® - ç›¸å½“äº"æ€»ä»“åº“"
        master:
          url: jdbc:mysql://localhost:3306/db_master
          username: root
          password: 123456
          driver-class-name: com.mysql.cj.jdbc.Driver
        
        # ä»åº“é…ç½® - ç›¸å½“äº"åˆ†ä»“åº“"
        slave:
          url: jdbc:mysql://localhost:3306/db_slave
          username: root
          password: 123456
          driver-class-name: com.mysql.cj.jdbc.Driver
```

**ğŸ’¡ å¦‚ä½•ä½¿ç”¨å¤šæ•°æ®æº**ï¼š
```java
// ä½¿ç”¨@DSæ³¨è§£åˆ‡æ¢æ•°æ®æº - å°±åƒå‘Šè¯‰ç³»ç»Ÿ"å»å“ªä¸ªä»“åº“æ‹¿è´§"
@Service
public class OrderService {
    
    // ä¸åŠ æ³¨è§£ï¼Œé»˜è®¤ä½¿ç”¨masterä¸»åº“
    public void createOrder(Order order) {
        orderMapper.insert(order);
    }
    
    // @DS("slave") - æŒ‡å®šä½¿ç”¨slaveä»åº“
    @DS("slave")
    public List<Order> queryOrders() {
        return orderMapper.selectList(null);
    }
    
    // å¯ä»¥åœ¨ç±»ä¸ŠåŠ ï¼Œè¡¨ç¤ºæ•´ä¸ªç±»éƒ½ç”¨è¿™ä¸ªæ•°æ®æº
    @DS("user-db")
    public User getUserInfo(Long userId) {
        return userMapper.selectById(userId);
    }
}
```

### 1.3 è¯»å†™åˆ†ç¦»æœ€ä½³å®è·µ


**ğŸ“– è¯»å†™åˆ†ç¦»åŸç†å›¾**ï¼š
```
å®¢æˆ·ç«¯è¯·æ±‚
    â†“
ä¸šåŠ¡é€»è¾‘å±‚åˆ¤æ–­
    â†“
   å†™æ“ä½œï¼Ÿ â”€â”€æ˜¯â”€â”€> ä¸»åº“(Master) â”€â”€> æ‰§è¡Œå†™å…¥
    â†“ å¦                              â†“
   è¯»æ“ä½œ â”€â”€â”€â”€â”€â”€> ä»åº“(Slave)  <â”€â”€â”€â”€â”€ æ•°æ®åŒæ­¥
                    â†“
                è¿”å›æŸ¥è¯¢ç»“æœ
```

**âš™ï¸ è‡ªåŠ¨è·¯ç”±é…ç½®**ï¼š
```java
// é€šè¿‡AOPå®ç°è‡ªåŠ¨è·¯ç”± - ä¸ç”¨æ¯ä¸ªæ–¹æ³•éƒ½å†™@DSæ³¨è§£
@Aspect
@Component
public class DataSourceAspect {
    
    // æ‹¦æˆªæ‰€æœ‰æŸ¥è¯¢æ–¹æ³•ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä»åº“
    @Around("execution(* com.example.service..*.*select*(..)) || " +
            "execution(* com.example.service..*.*query*(..)) || " +
            "execution(* com.example.service..*.*get*(..))")
    public Object routeToSlave(ProceedingJoinPoint point) throws Throwable {
        // åˆ‡æ¢åˆ°ä»åº“
        DynamicDataSourceContextHolder.push("slave");
        try {
            return point.proceed();
        } finally {
            DynamicDataSourceContextHolder.poll();
        }
    }
    
    // æ‹¦æˆªæ‰€æœ‰å†™æ“ä½œæ–¹æ³•ï¼Œç¡®ä¿ç”¨ä¸»åº“
    @Around("execution(* com.example.service..*.*save*(..)) || " +
            "execution(* com.example.service..*.*update*(..)) || " +
            "execution(* com.example.service..*.*delete*(..))")
    public Object routeToMaster(ProceedingJoinPoint point) throws Throwable {
        // åˆ‡æ¢åˆ°ä¸»åº“
        DynamicDataSourceContextHolder.push("master");
        try {
            return point.proceed();
        } finally {
            DynamicDataSourceContextHolder.poll();
        }
    }
}
```

### 1.4 å¤šæ•°æ®æºå¸¸è§é—®é¢˜


**â— é¢è¯•é«˜é¢‘é—®é¢˜**ï¼š

**Q1ï¼šå¤šæ•°æ®æºä¸‹äº‹åŠ¡æ€ä¹ˆå¤„ç†ï¼Ÿ**
```
é—®é¢˜ï¼šè·¨æ•°æ®æºæ— æ³•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§

è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š
æ–¹æ¡ˆ1ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰
â€¢ ä¼˜ç‚¹ï¼šå¼ºä¸€è‡´æ€§ä¿è¯
â€¢ ç¼ºç‚¹ï¼šæ€§èƒ½å¼€é”€å¤§ï¼Œå¤æ‚åº¦é«˜
â€¢ é€‚ç”¨ï¼šé‡‘èç­‰å¼ºä¸€è‡´æ€§åœºæ™¯

æ–¹æ¡ˆ2ï¼šæœ€ç»ˆä¸€è‡´æ€§ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰
â€¢ ä¼˜ç‚¹ï¼šæ€§èƒ½å¥½ï¼Œè§£è€¦
â€¢ ç¼ºç‚¹ï¼šçŸ­æš‚ä¸ä¸€è‡´
â€¢ é€‚ç”¨ï¼šå¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯

æ–¹æ¡ˆ3ï¼šé¿å…è·¨åº“äº‹åŠ¡
â€¢ ä¼˜ç‚¹ï¼šç®€å•å¯é 
â€¢ ç¼ºç‚¹ï¼šéœ€è¦é‡æ„ä¸šåŠ¡
â€¢ é€‚ç”¨ï¼šæ–°é¡¹ç›®è®¾è®¡æ—¶è€ƒè™‘
```

**Q2ï¼šä»åº“å»¶è¿Ÿæ€ä¹ˆåŠï¼Ÿ**
```
é—®é¢˜ç°è±¡ï¼š
åˆšå†™å…¥ä¸»åº“çš„æ•°æ®ï¼Œç«‹å³æŸ¥ä»åº“å¯èƒ½æŸ¥ä¸åˆ°

è§£å†³æ–¹æ¡ˆï¼š
1. å¼ºåˆ¶ä¸»åº“æŸ¥è¯¢
   @DS("master")  // å…³é”®æ•°æ®ç›´æ¥æŸ¥ä¸»åº“
   
2. å»¶è¿ŸåŒåˆ 
   å†™å…¥ååˆ é™¤ç¼“å­˜ â†’ å»¶è¿ŸNç§’ â†’ å†åˆ ä¸€æ¬¡
   
3. ç›‘æ§ä»åº“å»¶è¿Ÿ
   è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸»åº“
```

**ğŸ¯ æœ€ä½³å®è·µå»ºè®®**ï¼š
```
ä¼ä¸šçº§é…ç½®å»ºè®®ï¼š
1. æ•°æ®æºå‘½åè§„èŒƒ
   âœ… masterã€slave_1ã€slave_2
   âŒ db1ã€db2ã€database

2. è¿æ¥æ± å‚æ•°è°ƒä¼˜
   â€¢ æœ€å°è¿æ¥æ•°ï¼š5-10
   â€¢ æœ€å¤§è¿æ¥æ•°ï¼š20-50
   â€¢ è¶…æ—¶æ—¶é—´ï¼š30ç§’

3. å¥åº·æ£€æŸ¥
   â€¢ å®šæœŸæ£€æµ‹æ•°æ®æºå¯ç”¨æ€§
   â€¢ è‡ªåŠ¨å‰”é™¤æ•…éšœæ•°æ®æº
   â€¢ æ•…éšœæ¢å¤åè‡ªåŠ¨åŠ å…¥
```

---

## 2. ğŸ” äº‹åŠ¡ç®¡ç†æœ€ä½³å®è·µ


### 2.1 äº‹åŠ¡åŸºç¡€æ¦‚å¿µå›é¡¾


**é€šä¿—ç†è§£äº‹åŠ¡**ï¼š
äº‹åŠ¡å°±åƒ"ç½‘è´­ä¸‹å•"è¿™ä¸ªè¿‡ç¨‹ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼ˆæ‰£æ¬¾+å‡åº“å­˜+ç”Ÿæˆè®¢å•ï¼‰ï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼ˆå›é€€æ‰€æœ‰æ“ä½œï¼‰ï¼Œä¸èƒ½åªåšä¸€åŠã€‚

```
ğŸ¯ äº‹åŠ¡å››å¤§ç‰¹æ€§ï¼ˆACIDï¼‰ï¼š
A - Atomicityï¼ˆåŸå­æ€§ï¼‰
â€¢ æ¯”å–»ï¼šè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åš
â€¢ ä¾‹å­ï¼šè½¬è´¦è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ï¼Œä¸èƒ½é’±æ‰£äº†ä½†æ²¡åˆ°è´¦

C - Consistencyï¼ˆä¸€è‡´æ€§ï¼‰  
â€¢ æ¯”å–»ï¼šæ•°æ®å‰åè¦åŒ¹é…
â€¢ ä¾‹å­ï¼šè½¬è´¦å‰åæ€»é‡‘é¢ä¸å˜

I - Isolationï¼ˆéš”ç¦»æ€§ï¼‰
â€¢ æ¯”å–»ï¼šå„åšå„çš„ï¼Œäº’ä¸å¹²æ‰°
â€¢ ä¾‹å­ï¼šAè½¬è´¦ç»™Bæ—¶ï¼ŒCçœ‹ä¸åˆ°ä¸­é—´çŠ¶æ€

D - Durabilityï¼ˆæŒä¹…æ€§ï¼‰
â€¢ æ¯”å–»ï¼šåšå®Œå°±ä¸èƒ½åæ‚”
â€¢ ä¾‹å­ï¼šäº¤æ˜“æˆåŠŸåï¼Œæ•°æ®åº“å´©æºƒä¹Ÿèƒ½æ¢å¤
```

### 2.2 Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶


**ğŸ”„ ä¼ æ’­è¡Œä¸ºè¯¦è§£**ï¼š

| ä¼ æ’­è¡Œä¸º | **é€šä¿—è§£é‡Š** | **ä½¿ç”¨åœºæ™¯** |
|---------|-------------|-------------|
| **REQUIRED** | `æœ‰å°±ç”¨ç°æœ‰çš„ï¼Œæ²¡æœ‰å°±æ–°å»º` | `æœ€å¸¸ç”¨ï¼Œé»˜è®¤å€¼` |
| **REQUIRES_NEW** | `ä¸ç®¡æœ‰æ²¡æœ‰ï¼Œéƒ½æ–°å»ºä¸€ä¸ª` | `ç‹¬ç«‹çš„å­æ“ä½œ` |
| **SUPPORTS** | `æœ‰å°±ç”¨ï¼Œæ²¡æœ‰å°±ç®—äº†` | `æŸ¥è¯¢æ“ä½œ` |
| **NOT_SUPPORTED** | `æŒ‚èµ·äº‹åŠ¡ï¼Œä¸ç”¨äº‹åŠ¡` | `ä¸é‡è¦çš„æ“ä½œ` |
| **NEVER** | `ç»ä¸ç”¨äº‹åŠ¡ï¼Œæœ‰å°±æŠ¥é”™` | `çº¯æŸ¥è¯¢åœºæ™¯` |
| **MANDATORY** | `å¿…é¡»æœ‰äº‹åŠ¡ï¼Œæ²¡æœ‰å°±æŠ¥é”™` | `å¼ºåˆ¶è¦æ±‚åœºæ™¯` |
| **NESTED** | `åµŒå¥—äº‹åŠ¡ï¼Œå¤±è´¥å¯ä»¥å›æ»š` | `éƒ¨åˆ†å¤±è´¥åœºæ™¯` |

**ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```java
// åœºæ™¯ï¼šè®¢å•æœåŠ¡è°ƒç”¨ç§¯åˆ†æœåŠ¡
@Service
public class OrderService {
    
    @Autowired
    private PointsService pointsService;
    
    // ä¸»ä¸šåŠ¡ï¼šåˆ›å»ºè®¢å•ï¼ˆå¿…é¡»æœ‰äº‹åŠ¡ï¼‰
    @Transactional
    public void createOrder(Order order) {
        // 1. ä¿å­˜è®¢å•
        orderMapper.insert(order);
        
        // 2. å¢åŠ ç§¯åˆ†ï¼ˆæ–°äº‹åŠ¡ï¼Œå³ä½¿å¤±è´¥ä¹Ÿä¸å½±å“è®¢å•ï¼‰
        pointsService.addPoints(order.getUserId(), 100);
        
        // 3. å‘é€é€šçŸ¥ï¼ˆä¸éœ€è¦äº‹åŠ¡ï¼‰
        notifyService.sendOrderNotify(order);
    }
}

@Service  
public class PointsService {
    
    // æ–°äº‹åŠ¡ï¼šç§¯åˆ†æ“ä½œç‹¬ç«‹ï¼Œå¤±è´¥ä¸å½±å“è®¢å•
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void addPoints(Long userId, Integer points) {
        // å¢åŠ ç§¯åˆ†
        pointsMapper.updatePoints(userId, points);
    }
}

@Service
public class NotifyService {
    
    // ä¸éœ€è¦äº‹åŠ¡ï¼šå‘é€é€šçŸ¥å¤±è´¥ä¸å›æ»š
    @Transactional(propagation = Propagation.NOT_SUPPORTED)
    public void sendOrderNotify(Order order) {
        // å‘é€çŸ­ä¿¡ã€é‚®ä»¶ç­‰
        messageService.send(order);
    }
}
```

### 2.3 äº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åœºæ™¯


**âŒ é¢è¯•å¿…è€ƒï¼šäº‹åŠ¡ä¸ºä»€ä¹ˆå¤±æ•ˆï¼Ÿ**

```
å¤±æ•ˆåŸå› 1ï¼šæ–¹æ³•ä¸æ˜¯public
@Transactional  
private void saveUser() {  // âŒ ç§æœ‰æ–¹æ³•ï¼Œäº‹åŠ¡å¤±æ•ˆ
    userMapper.insert(user);
}

è§£å†³ï¼šæ”¹ä¸ºpublicæ–¹æ³•
@Transactional
public void saveUser() {   // âœ… å…¬å¼€æ–¹æ³•ï¼Œäº‹åŠ¡ç”Ÿæ•ˆ
    userMapper.insert(user);
}

---

å¤±æ•ˆåŸå› 2ï¼šåŒç±»å†…éƒ¨è°ƒç”¨
@Service
public class UserService {
    // æ²¡æœ‰@Transactional
    public void methodA() {
        this.methodB();  // âŒ å†…éƒ¨è°ƒç”¨ï¼Œäº‹åŠ¡å¤±æ•ˆ
    }
    
    @Transactional
    public void methodB() {
        userMapper.insert(user);
    }
}

è§£å†³æ–¹æ¡ˆï¼š
æ–¹æ¡ˆ1ï¼šæ³¨å…¥è‡ªå·±ï¼Œç”¨ä»£ç†å¯¹è±¡è°ƒç”¨
@Autowired
private UserService self;

public void methodA() {
    self.methodB();  // âœ… ç”¨ä»£ç†å¯¹è±¡è°ƒç”¨
}

æ–¹æ¡ˆ2ï¼šmethodAä¹ŸåŠ @Transactional

---

å¤±æ•ˆåŸå› 3ï¼šå¼‚å¸¸è¢«æ•è·
@Transactional
public void saveUser() {
    try {
        userMapper.insert(user);
    } catch (Exception e) {
        // âŒ å¼‚å¸¸è¢«åƒæ‰äº†ï¼Œäº‹åŠ¡ä¸ä¼šå›æ»š
        log.error("ä¿å­˜å¤±è´¥", e);
    }
}

è§£å†³ï¼šé‡æ–°æŠ›å‡ºå¼‚å¸¸
@Transactional
public void saveUser() {
    try {
        userMapper.insert(user);
    } catch (Exception e) {
        log.error("ä¿å­˜å¤±è´¥", e);
        throw e;  // âœ… é‡æ–°æŠ›å‡ºï¼Œè§¦å‘å›æ»š
    }
}

---

å¤±æ•ˆåŸå› 4ï¼šå¼‚å¸¸ç±»å‹ä¸åŒ¹é…
@Transactional  // é»˜è®¤åªå›æ»šRuntimeException
public void saveUser() throws Exception {
    userMapper.insert(user);
    throw new Exception("é”™è¯¯");  // âŒ æ£€æŸ¥å¼‚å¸¸ï¼Œä¸ä¼šå›æ»š
}

è§£å†³ï¼šæŒ‡å®šå›æ»šå¼‚å¸¸ç±»å‹
@Transactional(rollbackFor = Exception.class)  // âœ… æ‰€æœ‰å¼‚å¸¸éƒ½å›æ»š
public void saveUser() throws Exception {
    userMapper.insert(user);
}
```

### 2.4 åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ


**ğŸŒ åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„äº‹åŠ¡é—®é¢˜**ï¼š
```
å•ä½“åº”ç”¨ï¼š
è®¢å•æœåŠ¡ â”€â”€äº‹åŠ¡â”€â”€> æ•°æ®åº“
ï¼ˆç®€å•ï¼ŒSpringäº‹åŠ¡å³å¯ï¼‰

åˆ†å¸ƒå¼åº”ç”¨ï¼š
è®¢å•æœåŠ¡ â”€â”€â”
           â”œâ”€â”€> éœ€è¦ä¿è¯ä¸€è‡´æ€§
åº“å­˜æœåŠ¡ â”€â”€â”˜
ï¼ˆå¤æ‚ï¼Œéœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰
```

**ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”**ï¼š

```
æ–¹æ¡ˆ1ï¼š2PC/3PCï¼ˆä¸¤é˜¶æ®µ/ä¸‰é˜¶æ®µæäº¤ï¼‰
åŸç†ï¼šåè°ƒè€…ç»Ÿä¸€æ§åˆ¶ï¼Œå‚ä¸è€…åŒæ­¥æäº¤
ä¼˜ç‚¹ï¼šå¼ºä¸€è‡´æ€§
ç¼ºç‚¹ï¼šæ€§èƒ½å·®ï¼ŒåŒæ­¥é˜»å¡
é€‚ç”¨ï¼šä¼ ç»Ÿé“¶è¡Œç³»ç»Ÿ

æ–¹æ¡ˆ2ï¼šTCCï¼ˆTry-Confirm-Cancelï¼‰  
åŸç†ï¼šä¸šåŠ¡å±‚é¢è¡¥å¿ï¼Œä¸‰ä¸ªé˜¶æ®µæ§åˆ¶
ä¼˜ç‚¹ï¼šæ€§èƒ½è¾ƒå¥½ï¼Œçµæ´»
ç¼ºç‚¹ï¼šä»£ç ä¾µå…¥æ€§å¤§
é€‚ç”¨ï¼šæ”¯ä»˜ã€è®¢å•åœºæ™¯

æ–¹æ¡ˆ3ï¼šSagaï¼ˆé•¿äº‹åŠ¡ï¼‰
åŸç†ï¼šæœ¬åœ°äº‹åŠ¡+è¡¥å¿æœºåˆ¶
ä¼˜ç‚¹ï¼šæ€§èƒ½å¥½ï¼Œé€‚åˆé•¿æµç¨‹
ç¼ºç‚¹ï¼šåªä¿è¯æœ€ç»ˆä¸€è‡´æ€§
é€‚ç”¨ï¼šè·¨å¤šä¸ªæœåŠ¡çš„ä¸šåŠ¡æµç¨‹

æ–¹æ¡ˆ4ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰
åŸç†ï¼šäº‹åŠ¡æ¶ˆæ¯ç¡®ä¿æŠ•é€’
ä¼˜ç‚¹ï¼šæ€§èƒ½æœ€å¥½ï¼Œè§£è€¦
ç¼ºç‚¹ï¼šçŸ­æš‚ä¸ä¸€è‡´
é€‚ç”¨ï¼šå¤§å¤šæ•°äº’è”ç½‘åœºæ™¯
```

**ğŸ’¼ ä¼ä¸šå®é™…é€‰æ‹©**ï¼š
```
åœºæ™¯åˆ†æï¼š
é‡‘èæ”¯ä»˜ â†’ Seata TCCæ¨¡å¼
ç”µå•†è®¢å• â†’ RocketMQäº‹åŠ¡æ¶ˆæ¯
åº“å­˜æ‰£å‡ â†’ Sagaè¡¥å¿æ¨¡å¼
ç§¯åˆ†èµ é€ â†’ æ™®é€šMQå¼‚æ­¥å¤„ç†
```

---

## 3. ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤æªæ–½


### 3.1 SQLæ³¨å…¥é˜²æŠ¤


**ğŸ’‰ ä»€ä¹ˆæ˜¯SQLæ³¨å…¥ï¼Ÿ**
æƒ³è±¡ä½ åœ¨ç½‘ç«™ç™»å½•æ¡†è¾“å…¥ç”¨æˆ·åï¼Œæ­£å¸¸åº”è¯¥è¾“å…¥"admin"ï¼Œä½†é»‘å®¢è¾“å…¥`admin' OR '1'='1`ï¼Œè¿™æ ·å°±èƒ½ç»•è¿‡å¯†ç éªŒè¯ã€‚

```
å±é™©ç¤ºä¾‹ï¼ˆåƒä¸‡åˆ«è¿™ä¹ˆå†™ï¼‰ï¼š
String username = request.getParameter("username");
String sql = "SELECT * FROM user WHERE username = '" + username + "'";

ç”¨æˆ·è¾“å…¥ï¼šadmin' OR '1'='1
å®é™…SQLï¼šSELECT * FROM user WHERE username = 'admin' OR '1'='1'
ç»“æœï¼šæŸ¥å‡ºæ‰€æœ‰ç”¨æˆ·ï¼
```

**âœ… MyBatis-Pluså®‰å…¨é˜²æŠ¤**ï¼š
```java
// æ–¹æ¡ˆ1ï¼šä½¿ç”¨#{} å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆæ¨èï¼‰
@Select("SELECT * FROM user WHERE username = #{username}")
User findByUsername(String username);
// MyBatisä¼šè‡ªåŠ¨è½¬ä¹‰ï¼Œè¾“å…¥ä»»ä½•å†…å®¹éƒ½å®‰å…¨

// æ–¹æ¡ˆ2ï¼šä½¿ç”¨Wrapperï¼ˆæ›´æ¨èï¼‰
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getUsername, username);  // è‡ªåŠ¨å‚æ•°åŒ–
userMapper.selectOne(wrapper);

// âŒ å±é™©åšæ³•ï¼ˆä¸è¦ç”¨${}ï¼‰
@Select("SELECT * FROM user WHERE username = '${username}'")
User findByUsername(String username);  // å®¹æ˜“è¢«æ³¨å…¥
```

**ğŸ”’ ç‰¹æ®Šåœºæ™¯å¤„ç†**ï¼š
```java
// åœºæ™¯ï¼šåŠ¨æ€è¡¨åã€å­—æ®µåï¼ˆå¿…é¡»ç”¨${}æ—¶çš„å®‰å…¨æªæ–½ï¼‰
public List<User> queryByDynamicColumn(String columnName, String value) {
    // 1. ç™½åå•æ ¡éªŒ
    List<String> allowedColumns = Arrays.asList("username", "email", "phone");
    if (!allowedColumns.contains(columnName)) {
        throw new IllegalArgumentException("éæ³•å­—æ®µå");
    }
    
    // 2. å†æ‰§è¡ŒSQL
    String sql = "SELECT * FROM user WHERE " + columnName + " = #{value}";
    return userMapper.selectList(sql, value);
}
```

### 3.2 æ•æ„Ÿæ•°æ®åŠ å¯†


**ğŸ” æ•°æ®åŠ å¯†ç­–ç•¥**ï¼š
```
éœ€è¦åŠ å¯†çš„æ•°æ®ç±»å‹ï¼š
ğŸ”¸ å¼ºæ•æ„Ÿï¼šå¯†ç ã€é“¶è¡Œå¡å·ã€èº«ä»½è¯å·
ğŸ”¸ ä¸­æ•æ„Ÿï¼šæ‰‹æœºå·ã€é‚®ç®±ã€åœ°å€
ğŸ”¸ å¼±æ•æ„Ÿï¼šç”¨æˆ·å§“åã€æ˜µç§°

åŠ å¯†æ–¹å¼é€‰æ‹©ï¼š
å¯†ç  â†’ å•å‘åŠ å¯†ï¼ˆBCryptã€Argon2ï¼‰
å¡å· â†’ å¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰
é€šä¿¡ â†’ éå¯¹ç§°åŠ å¯†ï¼ˆRSAï¼‰
```

**ğŸ’¡ MyBatis-PlusåŠ å¯†å®ç°**ï¼š
```java
// 1. è‡ªå®šä¹‰åŠ å¯†å¤„ç†å™¨
@Component
public class EncryptHandler implements TypeHandler<String> {
    
    @Override
    public void setParameter(PreparedStatement ps, int i, 
                            String parameter, JdbcType jdbcType) throws SQLException {
        // å­˜å…¥æ•°æ®åº“å‰åŠ å¯†
        ps.setString(i, AESUtil.encrypt(parameter));
    }
    
    @Override
    public String getResult(ResultSet rs, String columnName) throws SQLException {
        // ä»æ•°æ®åº“å–å‡ºåè§£å¯†
        String encrypted = rs.getString(columnName);
        return AESUtil.decrypt(encrypted);
    }
}

// 2. åœ¨å®ä½“ç±»ä¸­ä½¿ç”¨
@TableName(value = "user", autoResultMap = true)
public class User {
    private Long id;
    
    // æ‰‹æœºå·è‡ªåŠ¨åŠ è§£å¯†
    @TableField(typeHandler = EncryptHandler.class)
    private String phone;
    
    // èº«ä»½è¯å·è‡ªåŠ¨åŠ è§£å¯†
    @TableField(typeHandler = EncryptHandler.class)
    private String idCard;
}
```

### 3.3 æ•°æ®è„±æ•å±•ç¤º


**ğŸ‘€ è„±æ•è§„åˆ™è®¾è®¡**ï¼š
```
å¸¸ç”¨è„±æ•è§„åˆ™ï¼š
æ‰‹æœºå·ï¼š138****5678
èº«ä»½è¯ï¼š3301**********1234
é“¶è¡Œå¡ï¼š6222 **** **** 1234
é‚®ç®±ï¼šabc***@qq.com
å§“åï¼šå¼ *ã€æ**
```

**ğŸ¨ è„±æ•å®ç°æ–¹æ¡ˆ**ï¼š
```java
// æ–¹æ¡ˆ1ï¼šJSONåºåˆ—åŒ–æ—¶è„±æ•ï¼ˆå‰ç«¯å±•ç¤ºï¼‰
public class User {
    private Long id;
    
    @JsonSerialize(using = PhoneDesensitizer.class)
    private String phone;  // è¿”å›ç»™å‰ç«¯æ—¶è‡ªåŠ¨è„±æ•
    
    @JsonSerialize(using = IdCardDesensitizer.class)  
    private String idCard;
}

// è‡ªå®šä¹‰è„±æ•å™¨
public class PhoneDesensitizer extends JsonSerializer<String> {
    @Override
    public void serialize(String value, JsonGenerator gen, 
                         SerializerProvider serializers) throws IOException {
        if (StringUtils.isEmpty(value) || value.length() != 11) {
            gen.writeString(value);
            return;
        }
        // 138****5678
        String maskedPhone = value.substring(0, 3) + "****" + value.substring(7);
        gen.writeString(maskedPhone);
    }
}

// æ–¹æ¡ˆ2ï¼šæŸ¥è¯¢æ—¶è„±æ•ï¼ˆæ•°æ®åº“å±‚é¢ï¼‰
@Select("SELECT id, CONCAT(SUBSTRING(phone, 1, 3), '****', SUBSTRING(phone, 8)) as phone FROM user")
List<User> selectMaskedUsers();
```

### 3.4 æƒé™æ§åˆ¶


**ğŸ”‘ æ•°æ®æƒé™æ§åˆ¶**ï¼š
```java
// åœºæ™¯ï¼šä¸åŒè§’è‰²çœ‹åˆ°ä¸åŒæ•°æ®
// æ™®é€šç”¨æˆ·åªèƒ½çœ‹è‡ªå·±çš„æ•°æ®ï¼Œç®¡ç†å‘˜èƒ½çœ‹æ‰€æœ‰æ•°æ®

// 1. ä½¿ç”¨æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ æ•°æ®æƒé™
@Component
public class DataPermissionInterceptor extends JsqlParserSupport implements InnerInterceptor {
    
    @Override
    public void beforeQuery(Executor executor, MappedStatement ms, 
                           Object parameter, RowBounds rowBounds, 
                           ResultHandler resultHandler, BoundSql boundSql) {
        // è·å–å½“å‰ç™»å½•ç”¨æˆ·
        User currentUser = SecurityUtils.getCurrentUser();
        
        if (!"admin".equals(currentUser.getRole())) {
            // éç®¡ç†å‘˜ï¼Œè‡ªåŠ¨æ·»åŠ æŸ¥è¯¢æ¡ä»¶
            PluginUtils.MPBoundSql mpBs = PluginUtils.mpBoundSql(boundSql);
            mpBs.sql("SELECT * FROM user WHERE user_id = " + currentUser.getId());
        }
    }
}

// 2. ä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒæƒé™
@Service
public class UserService {
    
    // ä¼šè‡ªåŠ¨æ·»åŠ æ•°æ®æƒé™è¿‡æ»¤
    public List<User> getAllUsers() {
        return userMapper.selectList(null);
        // æ™®é€šç”¨æˆ·ï¼šWHERE user_id = å½“å‰ç”¨æˆ·ID
        // ç®¡ç†å‘˜ï¼šæ— æ¡ä»¶é™åˆ¶
    }
}
```

---

## 4. ğŸ“Š ç›‘æ§å‘Šè­¦æœºåˆ¶


### 4.1 æ€§èƒ½ç›‘æ§æŒ‡æ ‡


**ğŸ“ˆ å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIï¼‰**ï¼š
```
æ•°æ®åº“å±‚é¢ï¼š
â€¢ SQLæ‰§è¡Œæ—¶é—´ï¼šè¶…è¿‡500mséœ€è¦ä¼˜åŒ–
â€¢ æ…¢SQLæ•°é‡ï¼šæ¯å°æ—¶ä¸è¶…è¿‡10æ¡
â€¢ è¿æ¥æ± ä½¿ç”¨ç‡ï¼šä¸è¶…è¿‡80%
â€¢ æ­»é”æ¬¡æ•°ï¼šæ¯å¤©ä¸è¶…è¿‡3æ¬¡

åº”ç”¨å±‚é¢ï¼š
â€¢ QPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰ï¼šè§‚å¯Ÿå³°å€¼
â€¢ å“åº”æ—¶é—´ï¼šP95ä¸è¶…è¿‡200ms
â€¢ é”™è¯¯ç‡ï¼šä¸è¶…è¿‡0.1%
â€¢ CPU/å†…å­˜ä½¿ç”¨ç‡ï¼šä¸è¶…è¿‡70%
```

**ğŸ” ç›‘æ§å®ç°æ–¹æ¡ˆ**ï¼š
```java
// 1. è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§æ’ä»¶
@Component
public class PerformanceInterceptor extends JsqlParserSupport implements InnerInterceptor {
    
    @Override
    public void beforeQuery(Executor executor, MappedStatement ms, 
                           Object parameter, RowBounds rowBounds, 
                           ResultHandler resultHandler, BoundSql boundSql) {
        // è®°å½•å¼€å§‹æ—¶é—´
        long startTime = System.currentTimeMillis();
        
        // æ‰§è¡ŒSQLå...
        long endTime = System.currentTimeMillis();
        long cost = endTime - startTime;
        
        // æ…¢SQLå‘Šè­¦ï¼ˆè¶…è¿‡500msï¼‰
        if (cost > 500) {
            log.warn("æ…¢SQLå‘Šè­¦: {}ms, SQL: {}", cost, boundSql.getSql());
            // å‘é€å‘Šè­¦é€šçŸ¥
            alertService.sendSlowSqlAlert(boundSql.getSql(), cost);
        }
        
        // è®°å½•åˆ°ç›‘æ§ç³»ç»Ÿ
        metricsService.recordSqlCost(ms.getId(), cost);
    }
}
```

### 4.2 æ…¢SQLç›‘æ§


**ğŸŒ æ…¢SQLè¯†åˆ«ä¸ä¼˜åŒ–**ï¼š
```
è¯†åˆ«æ…¢SQLçš„æ–¹æ³•ï¼š
1. æ•°æ®åº“å±‚é¢
   â€¢ MySQLæ…¢æŸ¥è¯¢æ—¥å¿—
   â€¢ æ‰§è¡Œè®¡åˆ’åˆ†æ(EXPLAIN)

2. åº”ç”¨å±‚é¢  
   â€¢ MyBatis-Plusæ€§èƒ½æ’ä»¶
   â€¢ APMç›‘æ§å·¥å…·(SkyWalking)
   â€¢ æ—¥å¿—åˆ†æ

3. ä¸­é—´ä»¶å±‚é¢
   â€¢ Druidç›‘æ§é¡µé¢
   â€¢ HikariCPæŒ‡æ ‡ç»Ÿè®¡
```

**ğŸ’¡ æ…¢SQLä¼˜åŒ–æ­¥éª¤**ï¼š
```
æ­¥éª¤1ï¼šå®šä½é—®é¢˜SQL
# å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—
slow_query_log = 1
long_query_time = 0.5  # è¶…è¿‡0.5ç§’è®°å½•

æ­¥éª¤2ï¼šåˆ†ææ‰§è¡Œè®¡åˆ’
EXPLAIN SELECT * FROM orders WHERE user_id = 123;

æ­¥éª¤3ï¼šå¸¸è§é—®é¢˜åŠè§£å†³
é—®é¢˜1ï¼šæ²¡æœ‰ç´¢å¼•
è§£å†³ï¼šæ·»åŠ ç´¢å¼•
CREATE INDEX idx_user_id ON orders(user_id);

é—®é¢˜2ï¼šç´¢å¼•å¤±æ•ˆ
åŸå› ï¼šä½¿ç”¨äº†å‡½æ•°ã€ç±»å‹è½¬æ¢ã€ORæ¡ä»¶
è§£å†³ï¼šæ”¹å†™SQLï¼Œé¿å…ç´¢å¼•å¤±æ•ˆ

é—®é¢˜3ï¼šæŸ¥è¯¢å­—æ®µå¤ªå¤š
åŸå› ï¼šSELECT *
è§£å†³ï¼šåªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ

é—®é¢˜4ï¼šJOINè¡¨å¤ªå¤š
åŸå› ï¼šå…³è”è¶…è¿‡3å¼ è¡¨
è§£å†³ï¼šæ‹†åˆ†æŸ¥è¯¢ï¼Œä¸šåŠ¡å±‚ç»„è£…
```

### 4.3 è¿æ¥æ± ç›‘æ§


**ğŸŠ è¿æ¥æ± å¥åº·æ£€æŸ¥**ï¼š
```yaml
# HikariCPé…ç½®ï¼ˆæ¨èï¼‰
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    hikari:
      # è¿æ¥æ± å¤§å°
      minimum-idle: 5           # æœ€å°ç©ºé—²è¿æ¥
      maximum-pool-size: 20     # æœ€å¤§è¿æ¥æ•°
      
      # è¶…æ—¶æ—¶é—´
      connection-timeout: 30000 # è·å–è¿æ¥è¶…æ—¶30ç§’
      idle-timeout: 600000      # ç©ºé—²è¿æ¥10åˆ†é’Ÿå›æ”¶
      max-lifetime: 1800000     # è¿æ¥æœ€å¤§å­˜æ´»30åˆ†é’Ÿ
      
      # å¥åº·æ£€æŸ¥
      connection-test-query: SELECT 1
      validation-timeout: 3000
      
      # ç›‘æ§
      register-mbeans: true     # å¼€å¯JMXç›‘æ§
```

**ğŸ“Š ç›‘æ§æŒ‡æ ‡é‡‡é›†**ï¼š
```java
// è·å–è¿æ¥æ± ç›‘æ§æ•°æ®
@Component
public class DataSourceMonitor {
    
    @Autowired
    private HikariDataSource dataSource;
    
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡
    public void collectMetrics() {
        HikariPoolMXBean poolProxy = dataSource.getHikariPoolMXBean();
        
        // æ´»è·ƒè¿æ¥æ•°
        int activeConnections = poolProxy.getActiveConnections();
        // ç©ºé—²è¿æ¥æ•°
        int idleConnections = poolProxy.getIdleConnections();
        // æ€»è¿æ¥æ•°
        int totalConnections = poolProxy.getTotalConnections();
        // ç­‰å¾…çº¿ç¨‹æ•°
        int threadsAwaitingConnection = poolProxy.getThreadsAwaitingConnection();
        
        // å‘Šè­¦åˆ¤æ–­
        if (activeConnections > 15) {  // è¶…è¿‡75%ä½¿ç”¨ç‡
            log.warn("è¿æ¥æ± ä½¿ç”¨ç‡è¿‡é«˜: {}/{}", activeConnections, 20);
            alertService.send("è¿æ¥æ± å‘Šè­¦", "æ´»è·ƒè¿æ¥æ•°: " + activeConnections);
        }
        
        // ä¸ŠæŠ¥åˆ°ç›‘æ§å¹³å°
        metricsService.gauge("db.pool.active", activeConnections);
        metricsService.gauge("db.pool.idle", idleConnections);
    }
}
```

### 4.4 å‘Šè­¦é€šçŸ¥æœºåˆ¶


**ğŸ”” å‘Šè­¦è§„åˆ™è®¾è®¡**ï¼š
```
å‘Šè­¦çº§åˆ«åˆ†ç±»ï¼š
P0 - ç´§æ€¥ï¼šæ•°æ®åº“å®•æœºã€æœåŠ¡ä¸å¯ç”¨
â€¢ ç«‹å³é€šçŸ¥ï¼šç”µè¯+çŸ­ä¿¡+ä¼ä¸šå¾®ä¿¡
â€¢ å¤„ç†æ—¶é™ï¼š15åˆ†é’Ÿå†…å“åº”

P1 - ä¸¥é‡ï¼šæ…¢SQLé¢‘ç¹ã€è¿æ¥æ± æ»¡
â€¢ é€šçŸ¥æ–¹å¼ï¼šçŸ­ä¿¡+ä¼ä¸šå¾®ä¿¡
â€¢ å¤„ç†æ—¶é™ï¼š30åˆ†é’Ÿå†…å“åº”

P2 - è­¦å‘Šï¼šæ€§èƒ½ä¸‹é™ã€é”™è¯¯ç‡ä¸Šå‡
â€¢ é€šçŸ¥æ–¹å¼ï¼šä¼ä¸šå¾®ä¿¡+é‚®ä»¶
â€¢ å¤„ç†æ—¶é™ï¼š2å°æ—¶å†…å¤„ç†

P3 - æç¤ºï¼šä¸€èˆ¬æ€§èƒ½é—®é¢˜
â€¢ é€šçŸ¥æ–¹å¼ï¼šé‚®ä»¶
â€¢ å¤„ç†æ—¶é™ï¼š24å°æ—¶å†…å¤„ç†
```

**ğŸ“± å‘Šè­¦å®ç°**ï¼š
```java
@Service
public class AlertService {
    
    @Autowired
    private WechatService wechatService;
    
    @Autowired
    private SmsService smsService;
    
    // å‘é€å‘Šè­¦
    public void sendAlert(AlertLevel level, String title, String content) {
        switch (level) {
            case P0:  // ç´§æ€¥å‘Šè­¦
                // ç”µè¯å‘Šè­¦
                callService.call("13800138000", content);
                // çŸ­ä¿¡å‘Šè­¦
                smsService.send("13800138000", content);
                // ä¼ä¸šå¾®ä¿¡å‘Šè­¦
                wechatService.sendToGroup("DBAç»„", title, content);
                break;
                
            case P1:  // ä¸¥é‡å‘Šè­¦
                smsService.send("13800138000", content);
                wechatService.sendToGroup("è¿ç»´ç»„", title, content);
                break;
                
            case P2:  // è­¦å‘Š
                wechatService.sendToGroup("æŠ€æœ¯ç»„", title, content);
                emailService.send("tech@company.com", title, content);
                break;
                
            case P3:  // æç¤º
                emailService.send("tech@company.com", title, content);
                break;
        }
        
        // è®°å½•å‘Šè­¦å†å²
        alertRecordService.save(level, title, content);
    }
}
```

---

## 5. âš™ï¸ ç”Ÿäº§ç¯å¢ƒé…ç½®


### 5.1 é…ç½®æ–‡ä»¶ç®¡ç†


**ğŸ“‚ ç¯å¢ƒé…ç½®éš”ç¦»**ï¼š
```yaml
# application.yml - å…¬å…±é…ç½®
spring:
  application:
    name: my-application
  profiles:
    active: @profileActive@  # MavenåŠ¨æ€æ›¿æ¢

mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl

---
# application-dev.yml - å¼€å‘ç¯å¢ƒ
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/dev_db
    username: dev_user
    password: dev_password
  
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # æ§åˆ¶å°æ‰“å°SQL

---
# application-prod.yml - ç”Ÿäº§ç¯å¢ƒ
spring:
  datasource:
    url: jdbc:mysql://prod-db:3306/prod_db
    username: prod_user
    password: ${DB_PASSWORD}  # ä»ç¯å¢ƒå˜é‡è¯»å–
    
  # ç”Ÿäº§ç¯å¢ƒå…³é—­SQLæ—¥å¿—
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl
```

**ğŸ” æ•æ„Ÿä¿¡æ¯ç®¡ç†**ï¼š
```
æ–¹æ¡ˆ1ï¼šç¯å¢ƒå˜é‡
export DB_PASSWORD=xxx
java -jar app.jar

æ–¹æ¡ˆ2ï¼šé…ç½®ä¸­å¿ƒï¼ˆæ¨èï¼‰
â€¢ Nacosé…ç½®ä¸­å¿ƒ
â€¢ Apolloé…ç½®ä¸­å¿ƒ  
â€¢ Spring Cloud Config

æ–¹æ¡ˆ3ï¼šå¯†é’¥ç®¡ç†ç³»ç»Ÿ
â€¢ HashiCorp Vault
â€¢ é˜¿é‡Œäº‘KMS
â€¢ AWS Secrets Manager
```

### 5.2 æ€§èƒ½ä¼˜åŒ–é…ç½®


**âš¡ æ•°æ®åº“è¿æ¥ä¼˜åŒ–**ï¼š
```yaml
spring:
  datasource:
    hikari:
      # æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
      minimum-idle: 10                    # æœ€å°è¿æ¥æ•°
      maximum-pool-size: 50               # æœ€å¤§è¿æ¥æ•°
      connection-timeout: 20000           # è¿æ¥è¶…æ—¶20ç§’
      idle-timeout: 300000                # ç©ºé—²è¿æ¥5åˆ†é’Ÿå›æ”¶
      max-lifetime: 1200000               # è¿æ¥æœ€å¤§å­˜æ´»20åˆ†é’Ÿ
      
      # æ€§èƒ½ä¼˜åŒ–
      auto-commit: false                  # å…³é—­è‡ªåŠ¨æäº¤
      connection-test-query: SELECT 1     # è¿æ¥æµ‹è¯•æŸ¥è¯¢
      validation-timeout: 3000            # éªŒè¯è¶…æ—¶
      
      # æ³„æ¼æ£€æµ‹ï¼ˆå¼€å‘ç¯å¢ƒå¼€å¯ï¼‰
      leak-detection-threshold: 60000     # 60ç§’æœªå½’è¿˜è§†ä¸ºæ³„æ¼
```

**ğŸš€ MyBatis-Plusæ€§èƒ½é…ç½®**ï¼š
```yaml
mybatis-plus:
  # å…¨å±€é…ç½®
  global-config:
    db-config:
      # ä¸»é”®ç­–ç•¥ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èé›ªèŠ±IDï¼‰
      id-type: ASSIGN_ID
      # é€»è¾‘åˆ é™¤
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
    
    # æ€§èƒ½ä¼˜åŒ–
    banner: false  # å…³é—­Bannerè¾“å‡º
    
  # é…ç½®é¡¹
  configuration:
    # äºŒçº§ç¼“å­˜ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
    cache-enabled: false
    # æ‡’åŠ è½½
    lazy-loading-enabled: true
    aggressive-lazy-loading: false
    # ç»“æœé›†æ˜ å°„
    use-column-label: true
    # é©¼å³°è½¬æ¢
    map-underscore-to-camel-case: true
```

### 5.3 æ—¥å¿—é…ç½®


**ğŸ“ æ—¥å¿—çº§åˆ«è®¾ç½®**ï¼š
```yaml
# logback-spring.xml æˆ– application.yml
logging:
  level:
    root: INFO                                    # å…¨å±€INFO
    com.example.mapper: WARN                      # Mapperåªè®°å½•è­¦å‘Š
    com.baomidou.mybatisplus: WARN               # MPæ¡†æ¶è­¦å‘Š
    com.example.service: INFO                     # ä¸šåŠ¡æ—¥å¿—INFO
    
  # ç”Ÿäº§ç¯å¢ƒæ—¥å¿—é…ç½®
  file:
    name: /var/log/app/application.log
    max-size: 100MB                              # å•ä¸ªæ–‡ä»¶æœ€å¤§100MB
    max-history: 30                              # ä¿ç•™30å¤©
    total-size-cap: 10GB                         # æ€»å¤§å°ä¸è¶…è¿‡10GB
```

**ğŸ¯ SQLæ—¥å¿—ç­–ç•¥**ï¼š
```
å¼€å‘ç¯å¢ƒï¼š
â€¢ æ‰“å°æ‰€æœ‰SQL
â€¢ æ‰“å°æ‰§è¡Œæ—¶é—´
â€¢ æ‰“å°å‚æ•°å’Œç»“æœ

æµ‹è¯•ç¯å¢ƒï¼š
â€¢ æ‰“å°æ…¢SQLï¼ˆ>100msï¼‰
â€¢ è®°å½•é”™è¯¯SQL

ç”Ÿäº§ç¯å¢ƒï¼š
â€¢ åªè®°å½•é”™è¯¯SQL
â€¢ æ…¢SQLå•ç‹¬è®°å½•
â€¢ æ•æ„Ÿä¿¡æ¯è„±æ•
```

### 5.4 å®¹ç¾å¤‡ä»½


**ğŸ”„ å®¹ç¾æ–¹æ¡ˆè®¾è®¡**ï¼š
```
å¤šå±‚å®¹ç¾ä½“ç³»ï¼š
1. æ•°æ®åº“å±‚
   â€¢ ä¸»ä»å¤åˆ¶
   â€¢ å®šæ—¶å¤‡ä»½
   â€¢ å¼‚åœ°å®¹ç¾

2. åº”ç”¨å±‚
   â€¢ å¤šèŠ‚ç‚¹éƒ¨ç½²
   â€¢ è´Ÿè½½å‡è¡¡
   â€¢ ç†”æ–­é™çº§

3. æ•°æ®å±‚
   â€¢ æ•°æ®å¤‡ä»½
   â€¢ å¿«ç…§æ¢å¤
   â€¢ å¢é‡å¤‡ä»½
```

**ğŸ’¾ å¤‡ä»½ç­–ç•¥**ï¼š
```bash
# 1. å…¨é‡å¤‡ä»½ï¼ˆæ¯å‘¨ä¸€æ¬¡ï¼‰
0 2 * * 0 mysqldump -u root -p database > /backup/full_$(date +\%Y\%m\%d).sql

# 2. å¢é‡å¤‡ä»½ï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰
0 2 * * 1-6 mysqlbinlog --start-datetime="æ˜¨å¤©" > /backup/incr_$(date +\%Y\%m\%d).sql

# 3. å¤‡ä»½éªŒè¯ï¼ˆå®šæœŸæ¢å¤æµ‹è¯•ï¼‰
# æ¯æœˆéªŒè¯å¤‡ä»½å¯ç”¨æ€§

# 4. å¼‚åœ°å¤‡ä»½ï¼ˆé‡è¦ï¼‰
rsync -avz /backup/ remote-server:/backup/
```

---

## 6. ğŸ‘¥ å›¢é˜Ÿåä½œè§„èŒƒ


### 6.1 ä»£ç è§„èŒƒ


**ğŸ“ MyBatis-Plusç¼–ç è§„èŒƒ**ï¼š
```java
// 1. Mapperæ¥å£è§„èŒƒ
public interface UserMapper extends BaseMapper<User> {
    
    // âœ… æ–¹æ³•å‘½åæ¸…æ™°
    List<User> selectActiveUsers(@Param("status") Integer status);
    
    // âŒ é¿å…æ¨¡ç³Šå‘½å
    // List<User> getList();
    
    // âœ… ä½¿ç”¨@Paramæ˜ç¡®å‚æ•°å
    User selectByPhone(@Param("phone") String phone);
    
    // âŒ é¿å…ç›´æ¥ç”¨å‚æ•°
    // User selectByPhone(String phone);
}

// 2. Serviceè§„èŒƒ
@Service
@Transactional(rollbackFor = Exception.class)  // âœ… æ˜ç¡®å›æ»šç­–ç•¥
public class UserService extends ServiceImpl<UserMapper, User> {
    
    // âœ… ä¸šåŠ¡æ–¹æ³•èŒè´£å•ä¸€
    public boolean registerUser(UserDTO userDTO) {
        // 1. å‚æ•°æ ¡éªŒ
        validateUserDTO(userDTO);
        
        // 2. ä¸šåŠ¡é€»è¾‘
        User user = convertToEntity(userDTO);
        boolean saved = save(user);
        
        // 3. åç½®å¤„ç†
        if (saved) {
            sendWelcomeEmail(user);
        }
        
        return saved;
    }
    
    // âŒ é¿å…å¤§è€Œå…¨çš„æ–¹æ³•
    // public void processUserData() { ... }
}

// 3. å®ä½“ç±»è§„èŒƒ
@Data
@TableName("sys_user")
public class User implements Serializable {
    
    @TableId(type = IdType.ASSIGN_ID)  // âœ… æ˜ç¡®ä¸»é”®ç­–ç•¥
    private Long id;
    
    @TableField("user_name")           // âœ… å­—æ®µæ˜ å°„æ¸…æ™°
    private String username;
    
    @TableField(fill = FieldFill.INSERT)  // âœ… è‡ªåŠ¨å¡«å……ç­–ç•¥
    private LocalDateTime createTime;
    
    @TableLogic                        // âœ… é€»è¾‘åˆ é™¤æ ‡è¯†
    private Integer deleted;
    
    @TableField(exist = false)         // âœ… éæ•°æ®åº“å­—æ®µæ ‡æ³¨
    private String extraInfo;
}
```

### 6.2 SQLç¼–å†™è§„èŒƒ


**ğŸ“ SQLæœ€ä½³å®è·µ**ï¼š
```xml
<!-- 1. åŠ¨æ€SQLè§„èŒƒ -->
<select id="selectUsers" resultType="User">
    SELECT 
        id, username, email, phone  <!-- âœ… æ˜ç¡®åˆ—å‡ºå­—æ®µ -->
    FROM sys_user
    <where>
        <if test="username != null and username != ''">
            AND username LIKE CONCAT('%', #{username}, '%')  <!-- âœ… é˜²æ­¢SQLæ³¨å…¥ -->
        </if>
        <if test="status != null">
            AND status = #{status}
        </if>
        AND deleted = 0  <!-- âœ… é€»è¾‘åˆ é™¤æ¡ä»¶ -->
    </where>
    ORDER BY create_time DESC
    <if test="limit != null">
        LIMIT #{limit}  <!-- âœ… åˆ†é¡µé™åˆ¶ -->
    </if>
</select>

<!-- 2. æ‰¹é‡æ“ä½œè§„èŒƒ -->
<insert id="batchInsert">
    INSERT INTO sys_user (id, username, email)
    VALUES
    <foreach collection="list" item="item" separator=",">
        (#{item.id}, #{item.username}, #{item.email})
    </foreach>
</insert>

<!-- 3. JOINæŸ¥è¯¢è§„èŒƒ -->
<select id="selectUserOrders" resultType="UserOrderVO">
    SELECT 
        u.id AS userId,
        u.username,
        o.id AS orderId,
        o.order_no AS orderNo
    FROM sys_user u
    LEFT JOIN sys_order o ON u.id = o.user_id  <!-- âœ… æ˜ç¡®å…³è”æ¡ä»¶ -->
    WHERE u.deleted = 0
      AND o.deleted = 0
    LIMIT 1000  <!-- âœ… é˜²æ­¢å¤§é‡æ•°æ® -->
</select>
```

### 6.3 Gitæäº¤è§„èŒƒ


**ğŸ“¦ æäº¤ä¿¡æ¯è§„èŒƒ**ï¼š
```bash
# æäº¤æ ¼å¼
<type>(<scope>): <subject>

# typeç±»å‹
feat:     æ–°åŠŸèƒ½
fix:      ä¿®å¤bug
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: é‡æ„
perf:     æ€§èƒ½ä¼˜åŒ–
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»º/å·¥å…·é…ç½®

# ç¤ºä¾‹
feat(user): æ·»åŠ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
fix(order): ä¿®å¤è®¢å•é‡‘é¢è®¡ç®—é”™è¯¯
perf(query): ä¼˜åŒ–ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢æ€§èƒ½
docs(readme): æ›´æ–°å®‰è£…æ–‡æ¡£
```

### 6.4 Code Reviewæ£€æŸ¥ç‚¹


**âœ… å¿…æŸ¥é¡¹æ¸…å•**ï¼š
```
åŠŸèƒ½å±‚é¢ï¼š
â–¡ æ˜¯å¦æ»¡è¶³éœ€æ±‚
â–¡ è¾¹ç•Œæ¡ä»¶å¤„ç†
â–¡ å¼‚å¸¸æƒ…å†µå¤„ç†
â–¡ å•å…ƒæµ‹è¯•è¦†ç›–

æ€§èƒ½å±‚é¢ï¼š
â–¡ SQLæ˜¯å¦æœ‰ç´¢å¼•
â–¡ æ˜¯å¦æœ‰N+1æŸ¥è¯¢
â–¡ æ˜¯å¦æœ‰å¤§äº‹åŠ¡
â–¡ ç¼“å­˜ä½¿ç”¨æ˜¯å¦åˆç†

å®‰å…¨å±‚é¢ï¼š
â–¡ SQLæ³¨å…¥é˜²æŠ¤
â–¡ æƒé™æ ¡éªŒ
â–¡ æ•æ„Ÿæ•°æ®åŠ å¯†
â–¡ å‚æ•°æ ¡éªŒ

ä»£ç è´¨é‡ï¼š
â–¡ å‘½åæ˜¯å¦è§„èŒƒ
â–¡ æ³¨é‡Šæ˜¯å¦æ¸…æ™°
â–¡ ä»£ç æ˜¯å¦å†—ä½™
â–¡ æ˜¯å¦éµå¾ªè®¾è®¡æ¨¡å¼
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„çŸ¥è¯†ç‚¹


```
ğŸ”¸ å¤šæ•°æ®æºï¼šDynamic-DataSourceå®ç°ï¼Œè¯»å†™åˆ†ç¦»ç­–ç•¥
ğŸ”¸ äº‹åŠ¡ç®¡ç†ï¼šä¼ æ’­æœºåˆ¶ç†è§£ï¼Œå¤±æ•ˆåœºæ™¯å¤„ç†ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡é€‰å‹
ğŸ”¸ å®‰å…¨é˜²æŠ¤ï¼šSQLæ³¨å…¥é˜²æŠ¤ï¼Œæ•æ„Ÿæ•°æ®åŠ å¯†ï¼Œæ•°æ®æƒé™æ§åˆ¶
ğŸ”¸ æ€§èƒ½ç›‘æ§ï¼šæ…¢SQLç›‘æ§ï¼Œè¿æ¥æ± ç›‘æ§ï¼Œå‘Šè­¦æœºåˆ¶è®¾è®¡
ğŸ”¸ ç”Ÿäº§é…ç½®ï¼šç¯å¢ƒéš”ç¦»ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œå®¹ç¾å¤‡ä»½
ğŸ”¸ å›¢é˜Ÿè§„èŒƒï¼šä»£ç è§„èŒƒï¼ŒSQLè§„èŒƒï¼ŒCode Reviewæ ‡å‡†
```

### 7.2 é¢è¯•é«˜é¢‘é—®é¢˜


**ğŸ’¬ ç»å…¸é¢è¯•é¢˜**ï¼š

**Q1ï¼šå¦‚ä½•å®ç°è¯»å†™åˆ†ç¦»ï¼Ÿ**
```
å›ç­”è¦ç‚¹ï¼š
1. æŠ€æœ¯é€‰å‹ï¼šDynamic-DataSource + AOP
2. ä¸»ä»é…ç½®ï¼šmasterå†™ï¼Œslaveè¯»
3. è·¯ç”±ç­–ç•¥ï¼šæ ¹æ®æ–¹æ³•åè‡ªåŠ¨è·¯ç”±
4. æ³¨æ„äº‹é¡¹ï¼šä»åº“å»¶è¿Ÿã€äº‹åŠ¡ä¸€è‡´æ€§
5. å®é™…æ¡ˆä¾‹ï¼šè®¢å•ç³»ç»Ÿè¯»å†™åˆ†ç¦»å®ç°
```

**Q2ï¼šäº‹åŠ¡ä¸ºä»€ä¹ˆä¼šå¤±æ•ˆï¼Ÿ**
```
å›ç­”è¦ç‚¹ï¼š
1. æ–¹æ³•ä¸æ˜¯public
2. åŒç±»å†…éƒ¨è°ƒç”¨ï¼ˆæœªèµ°ä»£ç†ï¼‰
3. å¼‚å¸¸è¢«catchæ²¡æœ‰æŠ›å‡º
4. å¼‚å¸¸ç±»å‹ä¸åŒ¹é…
5. è§£å†³æ–¹æ¡ˆï¼šæ¯ä¸ªé—®é¢˜å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ
```

**Q3ï¼šå¦‚ä½•é˜²æ­¢SQLæ³¨å…¥ï¼Ÿ**
```
å›ç­”è¦ç‚¹ï¼š
1. ä½¿ç”¨#{} è€Œä¸æ˜¯ ${}
2. ä½¿ç”¨Wrapperæ„å»ºæŸ¥è¯¢
3. åŠ¨æ€å­—æ®µç™½åå•æ ¡éªŒ
4. è¾“å…¥å‚æ•°æ ¡éªŒ
5. é¢„ç¼–è¯‘è¯­å¥åŸç†è¯´æ˜
```

**Q4ï¼šç”Ÿäº§ç¯å¢ƒå¦‚ä½•é…ç½®ï¼Ÿ**
```
å›ç­”è¦ç‚¹ï¼š
1. è¿æ¥æ± å‚æ•°è°ƒä¼˜
2. æ—¥å¿—çº§åˆ«è®¾ç½®
3. ç›‘æ§å‘Šè­¦æœºåˆ¶
4. å¤‡ä»½ç­–ç•¥
5. é…ç½®ä¸­å¿ƒç®¡ç†æ•æ„Ÿä¿¡æ¯
```

### 7.3 æœ€ä½³å®è·µæ€»ç»“


**ğŸ¯ ä¼ä¸šçº§å¼€å‘å»ºè®®**ï¼š
```
å¼€å‘é˜¶æ®µï¼š
â€¢ ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨æé«˜æ•ˆç‡
â€¢ ç¼–å†™å•å…ƒæµ‹è¯•ä¿è¯è´¨é‡
â€¢ éµå¾ªå›¢é˜Ÿç¼–ç è§„èŒƒ

æµ‹è¯•é˜¶æ®µï¼š
â€¢ å‹åŠ›æµ‹è¯•éªŒè¯æ€§èƒ½
â€¢ SQLå®¡æŸ¥ä¼˜åŒ–æ…¢æŸ¥è¯¢
â€¢ æ¨¡æ‹Ÿå¼‚å¸¸åœºæ™¯æµ‹è¯•

ä¸Šçº¿é˜¶æ®µï¼š
â€¢ ç°åº¦å‘å¸ƒé™ä½é£é™©
â€¢ å®æ—¶ç›‘æ§å…³é”®æŒ‡æ ‡
â€¢ å‡†å¤‡å›æ»šé¢„æ¡ˆ

è¿ç»´é˜¶æ®µï¼š
â€¢ å®šæœŸå¤‡ä»½éªŒè¯
â€¢ æ€§èƒ½æŒç»­ä¼˜åŒ–
â€¢ å®‰å…¨è¡¥ä¸åŠæ—¶æ›´æ–°
```

**ğŸ” é—®é¢˜æ’æŸ¥æ€è·¯**ï¼š
```
Step 1ï¼šç°è±¡åˆ†æ
â€¢ æ”¶é›†æ—¥å¿—ã€ç›‘æ§æ•°æ®
â€¢ ç¡®å®šé—®é¢˜èŒƒå›´

Step 2ï¼šåŸå› å®šä½
â€¢ æ…¢SQLåˆ†æ
â€¢ ä»£ç é€»è¾‘æ£€æŸ¥
â€¢ é…ç½®é—®é¢˜æ’æŸ¥

Step 3ï¼šè§£å†³æ–¹æ¡ˆ
â€¢ ä¸´æ—¶æ–¹æ¡ˆå¿«é€Ÿæ­¢æŸ
â€¢ æ ¹æœ¬æ–¹æ¡ˆå½»åº•è§£å†³

Step 4ï¼šé¢„é˜²æªæ–½
â€¢ æ€»ç»“é—®é¢˜æ ¹å› 
â€¢ å®Œå–„ç›‘æ§å‘Šè­¦
â€¢ æ›´æ–°å¼€å‘è§„èŒƒ
```

**ğŸ’¡ æŒç»­æ”¹è¿›æ–¹å‘**ï¼š
```
æŠ€æœ¯å±‚é¢ï¼š
â€¢ å…³æ³¨æ–°ç‰ˆæœ¬ç‰¹æ€§
â€¢ å­¦ä¹ æ€§èƒ½ä¼˜åŒ–æŠ€å·§
â€¢ ç ”ç©¶åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆ

ä¸šåŠ¡å±‚é¢ï¼š
â€¢ ç†è§£ä¸šåŠ¡åœºæ™¯
â€¢ ä¼˜åŒ–æŸ¥è¯¢é€»è¾‘
â€¢ æå‡ç”¨æˆ·ä½“éªŒ

å›¢é˜Ÿå±‚é¢ï¼š
â€¢ çŸ¥è¯†åˆ†äº«ä¼ æ‰¿
â€¢ Code Reviewäº’å­¦
â€¢ æœ€ä½³å®è·µæ²‰æ·€
```

### 7.4 å­¦ä¹ å»ºè®®


**ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„**ï¼š
```
åˆçº§é˜¶æ®µï¼ˆ1-3ä¸ªæœˆï¼‰ï¼š
â€¢ æŒæ¡MyBatis-PlusåŸºç¡€ç”¨æ³•
â€¢ ç†è§£ORMæ˜ å°„åŸç†
â€¢ ç†Ÿæ‚‰å¸¸ç”¨æ³¨è§£å’Œé…ç½®

ä¸­çº§é˜¶æ®µï¼ˆ3-6ä¸ªæœˆï¼‰ï¼š
â€¢ å¤šæ•°æ®æºé…ç½®å®è·µ
â€¢ æ€§èƒ½ä¼˜åŒ–æŠ€å·§
â€¢ åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†
â€¢ ç›‘æ§å‘Šè­¦æ­å»º

é«˜çº§é˜¶æ®µï¼ˆ6-12ä¸ªæœˆï¼‰ï¼š
â€¢ æºç é˜…è¯»ç†è§£
â€¢ æ’ä»¶å¼€å‘å®šåˆ¶
â€¢ ä¼ä¸šçº§æ¶æ„è®¾è®¡
â€¢ ç–‘éš¾é—®é¢˜è§£å†³

ä¸“å®¶é˜¶æ®µï¼ˆ1å¹´ä»¥ä¸Šï¼‰ï¼š
â€¢ æ¡†æ¶é€‰å‹å†³ç­–
â€¢ æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡
â€¢ å›¢é˜ŸæŠ€æœ¯æŒ‡å¯¼
â€¢ å¼€æºé¡¹ç›®è´¡çŒ®
```

**ğŸ§  è®°å¿†è¦ç‚¹**ï¼š
- å¤šæ•°æ®æºé…ç½®è¦åˆ†æ¸…ä¸»ä»ï¼Œè¯»å†™åˆ†ç¦»æ˜¯å…³é”®
- äº‹åŠ¡å¤±æ•ˆå››å¤§åœºæ™¯è¦ç‰¢è®°ï¼Œè§£å†³æ–¹æ¡ˆè¦æ¸…æ¥š
- SQLæ³¨å…¥é˜²æŠ¤ç”¨#{}ï¼Œæ•æ„Ÿæ•°æ®å¿…é¡»åŠ å¯†
- æ…¢SQLç›‘æ§è¦å®Œå–„ï¼Œè¿æ¥æ± å‚æ•°è¦è°ƒä¼˜
- ç”Ÿäº§é…ç½®è¦ä¸¥è°¨ï¼Œå¤‡ä»½å®¹ç¾ä¸èƒ½å¿˜
- å›¢é˜Ÿè§„èŒƒè¦æ‰§è¡Œï¼ŒCode Reviewä¿è´¨é‡

**æ ¸å¿ƒç†å¿µ**ï¼šä¼ä¸šçº§å¼€å‘ä¸åªæ˜¯å†™ä»£ç ï¼Œæ›´è¦å…³æ³¨æ€§èƒ½ã€å®‰å…¨ã€ç¨³å®šæ€§ã€‚æŒæ¡MyBatis-Plusä¸ä»…è¦ä¼šç”¨ï¼Œæ›´è¦ç†è§£åŸç†ã€æ‡‚å¾—ä¼˜åŒ–ã€èƒ½å¤Ÿæ’æŸ¥é—®é¢˜ã€‚è®°ä½ï¼šä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œè§„èŒƒå’Œå¯ç»´æŠ¤æ€§åŒæ ·é‡è¦ï¼