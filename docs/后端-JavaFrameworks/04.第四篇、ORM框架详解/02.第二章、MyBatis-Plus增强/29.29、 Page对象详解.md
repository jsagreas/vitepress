---
title: 29ã€ Pageå¯¹è±¡è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [Pageå¯¹è±¡åŸºç¡€è®¤çŸ¥](#1-Pageå¯¹è±¡åŸºç¡€è®¤çŸ¥)
2. [Pageå¯¹è±¡æ ¸å¿ƒå±æ€§](#2-Pageå¯¹è±¡æ ¸å¿ƒå±æ€§)
3. [Pageå¯¹è±¡æ„é€ æ–¹å¼](#3-Pageå¯¹è±¡æ„é€ æ–¹å¼)
4. [åˆ†é¡µå‚æ•°è®¾ç½®ä¸æ ¡éªŒ](#4-åˆ†é¡µå‚æ•°è®¾ç½®ä¸æ ¡éªŒ)
5. [åˆ†é¡µè¾¹ç•Œå¤„ç†ç­–ç•¥](#5-åˆ†é¡µè¾¹ç•Œå¤„ç†ç­–ç•¥)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“– Pageå¯¹è±¡åŸºç¡€è®¤çŸ¥


### 1.1 ä»€ä¹ˆæ˜¯Pageå¯¹è±¡


> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> Pageå¯¹è±¡æ˜¯MyBatis-Plusæä¾›çš„**åˆ†é¡µæŸ¥è¯¢å®¹å™¨**ï¼Œå®ƒæ—¢æ˜¯**åˆ†é¡µå‚æ•°çš„è¾“å…¥è½½ä½“**ï¼Œä¹Ÿæ˜¯**åˆ†é¡µç»“æœçš„è¾“å‡ºå®¹å™¨**ã€‚

**é€šä¿—ç†è§£**ï¼š
```
ç±»æ¯”ç”Ÿæ´»åœºæ™¯ï¼š
ä½ å»å›¾ä¹¦é¦†å€Ÿä¹¦ï¼Œç®¡ç†å‘˜é—®ä½ ï¼š
- "ç¬¬å‡ é¡µçš„ä¹¦ï¼Ÿ" â†’ currentï¼ˆå½“å‰é¡µç ï¼‰
- "ä¸€é¡µè¦å‡ æœ¬ï¼Ÿ" â†’ sizeï¼ˆæ¯é¡µå¤§å°ï¼‰
- "ä¸€å…±æœ‰å¤šå°‘æœ¬ï¼Ÿ" â†’ totalï¼ˆæ€»è®°å½•æ•°ï¼‰
- "å…·ä½“æ˜¯å“ªäº›ä¹¦ï¼Ÿ" â†’ recordsï¼ˆæ•°æ®åˆ—è¡¨ï¼‰

Pageå¯¹è±¡å°±æ˜¯è¿™ä¸ª"å€Ÿä¹¦æ¸…å•"ï¼
```

**Pageå¯¹è±¡çš„åŒé‡èº«ä»½**ï¼š
```
è¾“å…¥æ—¶ï¼šå‘Šè¯‰MyBatis-Plusä½ è¦æŸ¥ç¬¬å‡ é¡µã€æ¯é¡µå¤šå°‘æ¡
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ current = 2  â”‚ â†’ æˆ‘è¦ç¬¬2é¡µ
â”‚ size = 10    â”‚ â†’ æ¯é¡µ10æ¡æ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è¾“å‡ºæ—¶ï¼šMyBatis-PlusæŠŠæŸ¥è¯¢ç»“æœè£…è¿›Pageå¯¹è±¡è¿”å›ç»™ä½ 
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ total = 100      â”‚ â†’ æ€»å…±100æ¡æ•°æ®
â”‚ records = [...]  â”‚ â†’ ç¬¬2é¡µçš„10æ¡æ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Pageå¯¹è±¡åœ¨åˆ†é¡µæŸ¥è¯¢ä¸­çš„ä½ç½®


**å®Œæ•´åˆ†é¡µæŸ¥è¯¢æµç¨‹**ï¼š
```
ç”¨æˆ·è¯·æ±‚           Controller          Service           MyBatis-Plus
   |                  |                  |                     |
   |--ç¿»åˆ°ç¬¬2é¡µ------->|                  |                     |
   |                  |--åˆ›å»ºPageå¯¹è±¡---->|                     |
   |                  |  (current=2)     |                     |
   |                  |  (size=10)       |                     |
   |                  |                  |--ä¼ å…¥Pageå¯¹è±¡------->|
   |                  |                  |                     |
   |                  |                  |<--è¿”å›Pageå¯¹è±¡------|
   |                  |                  |  (total=100)        |
   |                  |                  |  (records=[...])    |
   |                  |<--è¿”å›åˆ†é¡µæ•°æ®----|                     |
   |<--æ˜¾ç¤ºç¬¬2é¡µæ•°æ®---|                  |                     |
```

---

## 2. ğŸ”§ Pageå¯¹è±¡æ ¸å¿ƒå±æ€§


### 2.1 äº”å¤§æ ¸å¿ƒå±æ€§è¯¦è§£


| å±æ€§å | ç±»å‹ | ä½œç”¨è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|------|---------|--------|
| **current** | `long` | å½“å‰é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ | `2`è¡¨ç¤ºç¬¬2é¡µ |
| **size** | `long` | æ¯é¡µæ˜¾ç¤ºæ¡æ•° | `10`è¡¨ç¤ºæ¯é¡µ10æ¡ |
| **total** | `long` | æ€»è®°å½•æ•°ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰ | `100`è¡¨ç¤ºå…±100æ¡ |
| **records** | `List<T>` | å½“å‰é¡µçš„æ•°æ®åˆ—è¡¨ | ç¬¬2é¡µçš„10æ¡æ•°æ® |
| **pages** | `long` | æ€»é¡µæ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰ | `10`è¡¨ç¤ºå…±10é¡µ |

### 2.2 å±æ€§è¯¦ç»†è¯´æ˜


**ğŸ”¸ current - å½“å‰é¡µç **
```java
// ä½œç”¨ï¼šå‘Šè¯‰MyBatis-Plusè¦æŸ¥è¯¢ç¬¬å‡ é¡µ
Page<User> page = new Page<>(2, 10);  // æŸ¥è¯¢ç¬¬2é¡µ
                                       // â†‘ currentå±æ€§

// é‡è¦ç‰¹ç‚¹ï¼š
// 1. é¡µç ä»1å¼€å§‹è®¡æ•°ï¼ˆç¬¬1é¡µã€ç¬¬2é¡µ...ï¼‰
// 2. å¦‚æœä¼ å…¥0æˆ–è´Ÿæ•°ï¼Œä¼šè¢«è‡ªåŠ¨çº æ­£ä¸º1
// 3. å¦‚æœä¼ å…¥è¶…è¿‡æœ€å¤§é¡µæ•°ï¼Œè¿”å›ç©ºæ•°æ®
```

**ğŸ”¸ size - æ¯é¡µå¤§å°**
```java
// ä½œç”¨ï¼šæ§åˆ¶æ¯é¡µè¿”å›å¤šå°‘æ¡æ•°æ®
Page<User> page = new Page<>(1, 20);  // æ¯é¡µ20æ¡
                                       //    â†‘ sizeå±æ€§

// å®é™…åº”ç”¨åœºæ™¯ï¼š
// PCç«¯ï¼šæ¯é¡µ20-50æ¡ï¼ˆå±å¹•å¤§ï¼‰
// ç§»åŠ¨ç«¯ï¼šæ¯é¡µ10-15æ¡ï¼ˆå±å¹•å°ï¼‰
// åå°ç®¡ç†ï¼šæ¯é¡µ30-100æ¡ï¼ˆéœ€è¦æ‰¹é‡æ“ä½œï¼‰
```

**ğŸ”¸ total - æ€»è®°å½•æ•°**
```java
// ä½œç”¨ï¼šå‘Šè¯‰ä½ æ•°æ®åº“ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•
// ç‰¹ç‚¹ï¼šè¿™ä¸ªå€¼æ˜¯MyBatis-Plusè‡ªåŠ¨æŸ¥è¯¢å¹¶å¡«å……çš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®

Page<User> page = userMapper.selectPage(new Page<>(1, 10), null);
System.out.println("æ€»è®°å½•æ•°ï¼š" + page.getTotal());  // è‡ªåŠ¨å¡«å……çš„å€¼
// è¾“å‡ºï¼šæ€»è®°å½•æ•°ï¼š156
```

**ğŸ”¸ records - æ•°æ®åˆ—è¡¨**
```java
// ä½œç”¨ï¼šå­˜å‚¨å½“å‰é¡µçš„å®é™…æ•°æ®
Page<User> page = userMapper.selectPage(new Page<>(2, 10), null);
List<User> users = page.getRecords();  // è·å–ç¬¬2é¡µçš„æ•°æ®

// recordsä¸­å­˜å‚¨çš„æ˜¯ä»€ä¹ˆï¼Ÿ
// ç¬¬1é¡µï¼šç¬¬1-10æ¡æ•°æ®
// ç¬¬2é¡µï¼šç¬¬11-20æ¡æ•°æ®
// ç¬¬3é¡µï¼šç¬¬21-30æ¡æ•°æ®
// ...ä¾æ­¤ç±»æ¨
```

**ğŸ”¸ pages - æ€»é¡µæ•°**
```java
// ä½œç”¨ï¼šå‘Šè¯‰ä½ ä¸€å…±æœ‰å¤šå°‘é¡µï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
// è®¡ç®—å…¬å¼ï¼špages = (total + size - 1) / size

// ç¤ºä¾‹ï¼š
// total = 156æ¡, size = 10æ¡/é¡µ
// pages = (156 + 10 - 1) / 10 = 16é¡µ

Page<User> page = userMapper.selectPage(new Page<>(1, 10), null);
System.out.println("æ€»é¡µæ•°ï¼š" + page.getPages());  // è‡ªåŠ¨è®¡ç®—çš„å€¼
```

### 2.3 å±æ€§ä¹‹é—´çš„å…³ç³»


```
æ ¸å¿ƒå…³ç³»å›¾ï¼š
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  total  â”‚ æ€»è®°å½•æ•°ï¼ˆæŸ¥è¯¢å¾—åˆ°ï¼‰
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚
                    è®¡ç®—å…³ç³»
                         â”‚
                         â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                                      â”‚
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
  â”‚  size  â”‚ æ¯é¡µå¤§å°ï¼ˆè¾“å…¥å‚æ•°ï¼‰      â”‚  pages  â”‚ æ€»é¡µæ•°ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                      â”‚
      â”‚                                      â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            å†³å®šèŒƒå›´
                 â”‚
                 â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ current  â”‚ å½“å‰é¡µç ï¼ˆè¾“å…¥å‚æ•°ï¼‰
           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                 â”‚
            å†³å®šæŸ¥è¯¢
                 â”‚
                 â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ records  â”‚ å½“å‰é¡µæ•°æ®ï¼ˆæŸ¥è¯¢ç»“æœï¼‰
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ğŸ”¨ Pageå¯¹è±¡æ„é€ æ–¹å¼


### 3.1 åŸºç¡€æ„é€ æ–¹å¼


**æ–¹å¼1ï¼šä¸¤å‚æ•°æ„é€ ï¼ˆæœ€å¸¸ç”¨ï¼‰**
```java
// è¯­æ³•ï¼šnew Page<>(å½“å‰é¡µ, æ¯é¡µå¤§å°)
Page<User> page = new Page<>(1, 10);

// ç­‰ä»·äºï¼š
Page<User> page = new Page<>();
page.setCurrent(1);   // è®¾ç½®ç¬¬1é¡µ
page.setSize(10);     // æ¯é¡µ10æ¡
```

**æ–¹å¼2ï¼šæ— å‚æ„é€ ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰**
```java
Page<User> page = new Page<>();
// é»˜è®¤å€¼ï¼šcurrent = 1, size = 10

// é€‚ç”¨åœºæ™¯ï¼šå¿«é€Ÿæµ‹è¯•ã€ä¸å…³å¿ƒåˆ†é¡µå‚æ•°æ—¶ä½¿ç”¨
```

**æ–¹å¼3ï¼šå®Œæ•´å‚æ•°æ„é€ **
```java
// è¯­æ³•ï¼šnew Page<>(å½“å‰é¡µ, æ¯é¡µå¤§å°, æ€»è®°å½•æ•°)
Page<User> page = new Page<>(2, 10, 100);

// æ³¨æ„ï¼štotalå‚æ•°ä¸€èˆ¬ä¸æ‰‹åŠ¨è®¾ç½®
// å› ä¸ºMyBatis-Plusä¼šè‡ªåŠ¨æŸ¥è¯¢å¹¶è¦†ç›–è¿™ä¸ªå€¼
```

### 3.2 å®é™…å¼€å‘ä¸­çš„æ„é€ ç¤ºä¾‹


**ğŸ“± åœºæ™¯1ï¼šç§»åŠ¨ç«¯APPåˆ†é¡µ**
```java
@GetMapping("/users")
public Page<User> getUserList(
    @RequestParam(defaultValue = "1") Integer pageNum,
    @RequestParam(defaultValue = "10") Integer pageSize
) {
    // ç§»åŠ¨ç«¯é€šå¸¸æ¯é¡µ10-15æ¡
    Page<User> page = new Page<>(pageNum, pageSize);
    return userService.page(page);
}
```

**ğŸ’» åœºæ™¯2ï¼šPCç«¯åå°ç®¡ç†**
```java
@GetMapping("/admin/users")
public Page<User> getAdminUserList(
    @RequestParam(defaultValue = "1") Long current,
    @RequestParam(defaultValue = "30") Long size
) {
    // åå°ç®¡ç†é€šå¸¸æ¯é¡µ30-50æ¡ï¼Œæ–¹ä¾¿æ‰¹é‡æ“ä½œ
    Page<User> page = new Page<>(current, size);
    return userService.page(page);
}
```

**ğŸ” åœºæ™¯3ï¼šæœç´¢ç»“æœåˆ†é¡µ**
```java
@PostMapping("/search")
public Page<User> searchUsers(
    @RequestBody SearchDTO dto
) {
    // æœç´¢ç»“æœé€šå¸¸æ¯é¡µ20æ¡
    Page<User> page = new Page<>(dto.getPageNum(), 20);
    
    // æ„å»ºæŸ¥è¯¢æ¡ä»¶
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
    wrapper.like(User::getName, dto.getKeyword());
    
    return userService.page(page, wrapper);
}
```

---

## 4. âœ… åˆ†é¡µå‚æ•°è®¾ç½®ä¸æ ¡éªŒ


### 4.1 currentå½“å‰é¡µè®¾ç½®


**ğŸ”¸ åŸºæœ¬è®¾ç½®æ–¹æ³•**
```java
// æ–¹æ³•1ï¼šæ„é€ æ—¶è®¾ç½®
Page<User> page = new Page<>(3, 10);  // ç¬¬3é¡µ

// æ–¹æ³•2ï¼šsetteræ–¹æ³•è®¾ç½®
Page<User> page = new Page<>();
page.setCurrent(3);  // è®¾ç½®ä¸ºç¬¬3é¡µ
```

**ğŸ”¸ å‚æ•°æ ¡éªŒè§„åˆ™**
```java
// è§„åˆ™1ï¼šé¡µç å¿…é¡» â‰¥ 1
Page<User> page1 = new Page<>(0, 10);   // é”™è¯¯ï¼ä¼šè¢«çº æ­£ä¸º1
Page<User> page2 = new Page<>(-1, 10);  // é”™è¯¯ï¼ä¼šè¢«çº æ­£ä¸º1
Page<User> page3 = new Page<>(1, 10);   // æ­£ç¡®

// è§„åˆ™2ï¼šè¶…è¿‡æœ€å¤§é¡µç æ—¶çš„å¤„ç†
// å‡è®¾æ€»å…±10é¡µæ•°æ®
Page<User> page = new Page<>(100, 10);  // æŸ¥è¯¢ç¬¬100é¡µ
List<User> records = page.getRecords(); // è¿”å›ç©ºåˆ—è¡¨[]
```

**ğŸ”¸ å®é™…å¼€å‘ä¸­çš„æ ¡éªŒå®ç°**
```java
@GetMapping("/users")
public Page<User> getUserList(
    @RequestParam(required = false) Long current,
    @RequestParam(required = false) Long size
) {
    // æ ¡éªŒå¹¶è®¾ç½®é»˜è®¤å€¼
    long pageNum = (current != null && current > 0) ? current : 1;
    long pageSize = (size != null && size > 0) ? size : 10;
    
    // é™åˆ¶æ¯é¡µæœ€å¤§æ¡æ•°ï¼ˆé˜²æ­¢æŸ¥è¯¢è¿‡å¤šæ•°æ®ï¼‰
    if (pageSize > 100) {
        pageSize = 100;
    }
    
    Page<User> page = new Page<>(pageNum, pageSize);
    return userService.page(page);
}
```

### 4.2 sizeé¡µé¢å¤§å°é…ç½®


**ğŸ”¸ åˆç†çš„sizeå€¼è®¾ç½®**

| åœºæ™¯ç±»å‹ | æ¨èsizeå€¼ | åŸå› è¯´æ˜ |
|---------|-----------|----------|
| ğŸ“± ç§»åŠ¨ç«¯åˆ—è¡¨ | `10-15` | å±å¹•å°ï¼Œæ•°æ®å°‘æ›´æµç•… |
| ğŸ’» PCç«¯åˆ—è¡¨ | `20-30` | å±å¹•å¤§ï¼Œå¯å±•ç¤ºæ›´å¤š |
| ğŸ¢ åå°ç®¡ç† | `30-100` | éœ€è¦æ‰¹é‡æ“ä½œ |
| ğŸ” æœç´¢ç»“æœ | `15-20` | å¹³è¡¡ä½“éªŒå’Œæ€§èƒ½ |

**ğŸ”¸ sizeé…ç½®ç¤ºä¾‹**
```java
// é…ç½®1ï¼šå‰ç«¯ä¼ å‚æ§åˆ¶ï¼ˆçµæ´»ï¼‰
Page<User> page = new Page<>(current, size);

// é…ç½®2ï¼šå›ºå®šå€¼ï¼ˆç®€å•ï¼‰
Page<User> page = new Page<>(current, 20);  // å›ºå®šæ¯é¡µ20æ¡

// é…ç½®3ï¼šä»é…ç½®æ–‡ä»¶è¯»å–ï¼ˆå¯ç»´æŠ¤ï¼‰
@Value("${page.default-size:15}")
private Integer defaultPageSize;

Page<User> page = new Page<>(current, size != null ? size : defaultPageSize);
```

**ğŸ”¸ sizeå€¼çš„è¾¹ç•Œä¿æŠ¤**
```java
public Page<User> getUserList(Long current, Long size) {
    // é˜²æ­¢sizeè¿‡å°ï¼ˆè‡³å°‘5æ¡ï¼‰
    if (size == null || size < 5) {
        size = 10L;
    }
    
    // é˜²æ­¢sizeè¿‡å¤§ï¼ˆæœ€å¤š100æ¡ï¼Œé¿å…æŸ¥è¯¢è¿‡å¤šæ•°æ®ï¼‰
    if (size > 100) {
        size = 100L;
    }
    
    return new Page<>(current, size);
}
```

### 4.3 totalæ€»æ•°ç»Ÿè®¡åŸç†


**ğŸ”¸ totalæ˜¯å¦‚ä½•è·å–çš„**
```
æŸ¥è¯¢æµç¨‹ï¼š
1ï¸âƒ£ ç”¨æˆ·è¯·æ±‚ï¼šæŸ¥è¯¢ç¬¬2é¡µæ•°æ®
   â†“
2ï¸âƒ£ MyBatis-Pluså…ˆæ‰§è¡Œï¼šSELECT COUNT(*) FROM user
   â†’ è·å¾—total = 156
   â†“
3ï¸âƒ£ å†æ‰§è¡Œï¼šSELECT * FROM user LIMIT 10, 10
   â†’ è·å¾—ç¬¬2é¡µçš„10æ¡æ•°æ®
   â†“
4ï¸âƒ£ æŠŠç»“æœå°è£…åˆ°Pageå¯¹è±¡ï¼š
   - page.total = 156
   - page.records = [10æ¡æ•°æ®]
```

**ğŸ”¸ å®é™…æ‰§è¡Œçš„SQL**
```sql
-- ç¬¬1æ¡SQLï¼šæŸ¥è¯¢æ€»æ•°
SELECT COUNT(*) FROM user WHERE status = 1;
-- ç»“æœï¼š156

-- ç¬¬2æ¡SQLï¼šæŸ¥è¯¢å½“å‰é¡µæ•°æ®
SELECT * FROM user WHERE status = 1 LIMIT 10 OFFSET 10;
-- ç»“æœï¼šç¬¬11-20æ¡æ•°æ®ï¼ˆç¬¬2é¡µï¼‰
```

**ğŸ”¸ ä¼˜åŒ–totalæŸ¥è¯¢æ€§èƒ½**
```java
// åœºæ™¯1ï¼šä¸éœ€è¦totalæ—¶å¯ä»¥å…³é—­countæŸ¥è¯¢
Page<User> page = new Page<>(1, 10);
page.setSearchCount(false);  // å…³é—­countæŸ¥è¯¢
// è¿™æ ·åªæ‰§è¡Œæ•°æ®æŸ¥è¯¢ï¼Œä¸æ‰§è¡ŒcountæŸ¥è¯¢ï¼Œæå‡æ€§èƒ½

// åœºæ™¯2ï¼šä½¿ç”¨ç¼“å­˜çš„totalå€¼ï¼ˆé€‚åˆtotalå˜åŒ–ä¸é¢‘ç¹çš„åœºæ™¯ï¼‰
@Cacheable("userTotal")
public Long getUserTotal() {
    return userMapper.selectCount(null);
}

// æ‰‹åŠ¨è®¾ç½®totalï¼Œé¿å…æ¯æ¬¡éƒ½æŸ¥è¯¢
Page<User> page = new Page<>(current, size);
page.setTotal(getUserTotal());  // ä½¿ç”¨ç¼“å­˜çš„total
```

### 4.4 recordsè®°å½•é›†åˆå¤„ç†


**ğŸ”¸ è·å–recordsçš„æ–¹å¼**
```java
// æ–¹å¼1ï¼šç›´æ¥è·å–List
Page<User> page = userMapper.selectPage(new Page<>(1, 10), null);
List<User> users = page.getRecords();

// æ–¹å¼2ï¼šéå†å¤„ç†
page.getRecords().forEach(user -> {
    System.out.println(user.getName());
});

// æ–¹å¼3ï¼šè½¬æ¢ä¸ºå…¶ä»–ç±»å‹
List<UserVO> voList = page.getRecords().stream()
    .map(user -> BeanUtil.copyProperties(user, UserVO.class))
    .collect(Collectors.toList());
```

**ğŸ”¸ recordsä¸ºç©ºçš„æƒ…å†µ**
```java
Page<User> page = userMapper.selectPage(new Page<>(100, 10), null);

// æƒ…å†µ1ï¼šé¡µç è¶…è¿‡æœ€å¤§é¡µ
if (page.getRecords().isEmpty()) {
    // records = []
    // totalä»ç„¶æœ‰å€¼ï¼Œæ¯”å¦‚156
    System.out.println("å½“å‰é¡µæ— æ•°æ®");
}

// æƒ…å†µ2ï¼šè¡¨ä¸­æœ¬èº«å°±æ²¡æ•°æ®
if (page.getTotal() == 0) {
    // records = []
    // total = 0
    System.out.println("è¡¨ä¸­æ— ä»»ä½•æ•°æ®");
}
```

---

## 5. ğŸ›¡ï¸ åˆ†é¡µè¾¹ç•Œå¤„ç†ç­–ç•¥


### 5.1 é¡µç è¶Šç•Œå¤„ç†


**ğŸ”¸ é—®é¢˜åœºæ™¯**
```
æ•°æ®æ€»é‡ï¼štotal = 95æ¡
æ¯é¡µå¤§å°ï¼šsize = 10æ¡
æ€»é¡µæ•°ï¼špages = 10é¡µ

ç”¨æˆ·è¯·æ±‚ï¼šç¬¬15é¡µï¼ˆè¶…å‡ºèŒƒå›´ï¼‰
åº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ
```

**ğŸ”¸ å¤„ç†ç­–ç•¥å¯¹æ¯”**

| ç­–ç•¥ | å®ç°æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|-----|---------|-----|------|---------|
| **è¿”å›ç©ºæ•°æ®** | ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ | ç®€å•ç›´æ¥ | ç”¨æˆ·ä½“éªŒå·® | å†…éƒ¨API |
| **é‡å®šå‘åˆ°æœ€åä¸€é¡µ** | current > pagesæ—¶ï¼Œè®¾ä¸ºpages | ç”¨æˆ·å‹å¥½ | éœ€è¦é¢å¤–åˆ¤æ–­ | å‰å°é¡µé¢ |
| **æŠ›å‡ºå¼‚å¸¸** | æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸ | æ˜ç¡®é”™è¯¯ | éœ€è¦å¼‚å¸¸å¤„ç† | ä¸¥æ ¼åœºæ™¯ |

**ğŸ”¸ å®ç°ç¤ºä¾‹**

```java
// ç­–ç•¥1ï¼šè¿”å›ç©ºæ•°æ®ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
Page<User> page = userMapper.selectPage(new Page<>(15, 10), null);
// page.getRecords() = []  ç©ºåˆ—è¡¨

// ç­–ç•¥2ï¼šé‡å®šå‘åˆ°æœ€åä¸€é¡µ
public Page<User> getUserListSafe(Long current, Long size) {
    Page<User> page = new Page<>(current, size);
    Page<User> result = userMapper.selectPage(page, null);
    
    // å¦‚æœå½“å‰é¡µè¶…è¿‡æ€»é¡µæ•°ï¼Œé‡æ–°æŸ¥è¯¢æœ€åä¸€é¡µ
    if (current > result.getPages() && result.getPages() > 0) {
        page.setCurrent(result.getPages());
        result = userMapper.selectPage(page, null);
    }
    
    return result;
}

// ç­–ç•¥3ï¼šæŠ›å‡ºå¼‚å¸¸
public Page<User> getUserListStrict(Long current, Long size) {
    Page<User> result = userMapper.selectPage(new Page<>(current, size), null);
    
    if (current > result.getPages() && result.getPages() > 0) {
        throw new BusinessException("é¡µç è¶…å‡ºèŒƒå›´ï¼Œå½“å‰æœ€å¤§é¡µç ä¸ºï¼š" + result.getPages());
    }
    
    return result;
}
```

### 5.2 å‚æ•°éæ³•å¤„ç†


**ğŸ”¸ å¸¸è§éæ³•å‚æ•°**
```java
// 1. currentä¸ºnullæˆ–0æˆ–è´Ÿæ•°
Page<User> page1 = new Page<>(null, 10);  // è¢«çº æ­£ä¸º1
Page<User> page2 = new Page<>(0, 10);     // è¢«çº æ­£ä¸º1
Page<User> page3 = new Page<>(-5, 10);    // è¢«çº æ­£ä¸º1

// 2. sizeä¸ºnullæˆ–0æˆ–è´Ÿæ•°
Page<User> page4 = new Page<>(1, null);   // è¢«çº æ­£ä¸ºé»˜è®¤å€¼10
Page<User> page5 = new Page<>(1, 0);      // è¢«çº æ­£ä¸ºé»˜è®¤å€¼10
Page<User> page6 = new Page<>(1, -10);    // è¢«çº æ­£ä¸ºé»˜è®¤å€¼10
```

**ğŸ”¸ ç»Ÿä¸€å‚æ•°æ ¡éªŒå·¥å…·**
```java
public class PageUtils {
    
    private static final long DEFAULT_CURRENT = 1L;
    private static final long DEFAULT_SIZE = 10L;
    private static final long MAX_SIZE = 100L;
    
    /**
     * åˆ›å»ºå®‰å…¨çš„Pageå¯¹è±¡
     */
    public static <T> Page<T> buildSafePage(Long current, Long size) {
        // æ ¡éªŒcurrent
        long safeCurrent = (current != null && current > 0) ? current : DEFAULT_CURRENT;
        
        // æ ¡éªŒsize
        long safeSize = (size != null && size > 0) ? size : DEFAULT_SIZE;
        safeSize = Math.min(safeSize, MAX_SIZE);  // é™åˆ¶æœ€å¤§å€¼
        
        return new Page<>(safeCurrent, safeSize);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
@GetMapping("/users")
public Page<User> getUserList(Long current, Long size) {
    Page<User> page = PageUtils.buildSafePage(current, size);
    return userService.page(page);
}
```

### 5.3 ç©ºæ•°æ®å¤„ç†


**ğŸ”¸ ç©ºæ•°æ®çš„ä¸¤ç§æƒ…å†µ**
```java
// æƒ…å†µ1ï¼šè¡¨ä¸­æœ‰æ•°æ®ï¼Œä½†å½“å‰é¡µä¸ºç©ºï¼ˆé¡µç è¶…å‡ºï¼‰
Page<User> page1 = userMapper.selectPage(new Page<>(100, 10), null);
// page1.getTotal() = 95ï¼ˆæœ‰æ€»æ•°ï¼‰
// page1.getRecords() = []ï¼ˆå½“å‰é¡µæ— æ•°æ®ï¼‰

// æƒ…å†µ2ï¼šè¡¨ä¸­å®Œå…¨æ²¡æœ‰æ•°æ®
Page<User> page2 = userMapper.selectPage(new Page<>(1, 10), wrapper);
// page2.getTotal() = 0ï¼ˆæ— æ€»æ•°ï¼‰
// page2.getRecords() = []ï¼ˆæ— æ•°æ®ï¼‰
```

**ğŸ”¸ å‰ç«¯å‹å¥½çš„ç©ºæ•°æ®å¤„ç†**
```java
@GetMapping("/users")
public Result<PageVO<UserVO>> getUserList(Long current, Long size) {
    Page<User> page = userService.page(new Page<>(current, size));
    
    // å°è£…è¿”å›å¯¹è±¡
    PageVO<UserVO> pageVO = new PageVO<>();
    pageVO.setTotal(page.getTotal());
    pageVO.setPages(page.getPages());
    pageVO.setCurrent(page.getCurrent());
    pageVO.setSize(page.getSize());
    
    // ç©ºæ•°æ®å¤„ç†
    if (page.getRecords().isEmpty()) {
        pageVO.setRecords(Collections.emptyList());
        pageVO.setMessage("æš‚æ— æ•°æ®");  // ç»™å‰ç«¯å‹å¥½æç¤º
    } else {
        // è½¬æ¢ä¸ºVOå¯¹è±¡
        List<UserVO> voList = page.getRecords().stream()
            .map(this::toVO)
            .collect(Collectors.toList());
        pageVO.setRecords(voList);
    }
    
    return Result.success(pageVO);
}
```

### 5.4 å¹¶å‘åœºæ™¯ä¸‹çš„è¾¹ç•Œé—®é¢˜


**ğŸ”¸ é—®é¢˜åœºæ™¯**
```
åœºæ™¯ï¼šç”¨æˆ·Aæ­£åœ¨æŸ¥çœ‹ç¬¬10é¡µï¼ˆæœ€åä¸€é¡µï¼‰
æ—¶åˆ»1ï¼šæ•°æ®æ€»é‡100æ¡ï¼Œå…±10é¡µ
      â†“
æ—¶åˆ»2ï¼šç®¡ç†å‘˜åˆ é™¤äº†20æ¡æ•°æ®
      â†“
æ—¶åˆ»3ï¼šæ•°æ®æ€»é‡80æ¡ï¼Œåªæœ‰8é¡µäº†
      â†“
æ—¶åˆ»4ï¼šç”¨æˆ·Aåˆ·æ–°ç¬¬10é¡µ â†’ é¡µç è¶…å‡ºï¼
```

**ğŸ”¸ è§£å†³æ–¹æ¡ˆ**
```java
public Page<User> getUserListWithConcurrency(Long current, Long size) {
    // ç¬¬1æ¬¡æŸ¥è¯¢
    Page<User> page = new Page<>(current, size);
    Page<User> result = userMapper.selectPage(page, null);
    
    // æ£€æŸ¥å¹¶å‘é—®é¢˜ï¼šå½“å‰é¡µè¶…å‡ºèŒƒå›´
    if (current > result.getPages() && result.getPages() > 0) {
        // æ–¹æ¡ˆ1ï¼šè‡ªåŠ¨å›é€€åˆ°æœ€åä¸€é¡µ
        page.setCurrent(result.getPages());
        result = userMapper.selectPage(page, null);
        
        // æç¤ºç”¨æˆ·æ•°æ®å·²å˜åŒ–
        result.setMessage("æ•°æ®å·²æ›´æ–°ï¼Œå·²ä¸ºæ‚¨è·³è½¬åˆ°æœ€åä¸€é¡µ");
    }
    
    return result;
}
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


> ğŸ“Œ **Pageå¯¹è±¡çš„æœ¬è´¨**  
> Pageæ˜¯åˆ†é¡µçš„"å®¹å™¨"ï¼Œæ—¢æ˜¯è¾“å…¥å‚æ•°ï¼ˆå‘Šè¯‰è¦æŸ¥ç¬¬å‡ é¡µï¼‰ï¼Œä¹Ÿæ˜¯è¾“å‡ºç»“æœï¼ˆè¿”å›æ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯ï¼‰

**ğŸ”¸ äº”å¤§æ ¸å¿ƒå±æ€§è®°å¿†**
```
current â†’ è¦æŸ¥ç¬¬å‡ é¡µï¼ˆä½ è¾“å…¥çš„ï¼‰
size â†’ æ¯é¡µå‡ æ¡æ•°æ®ï¼ˆä½ è¾“å…¥çš„ï¼‰
total â†’ ä¸€å…±å¤šå°‘æ¡ï¼ˆMPè‡ªåŠ¨æŸ¥çš„ï¼‰
records â†’ å½“å‰é¡µæ•°æ®ï¼ˆMPè‡ªåŠ¨æŸ¥çš„ï¼‰
pages â†’ ä¸€å…±å¤šå°‘é¡µï¼ˆMPè‡ªåŠ¨ç®—çš„ï¼‰
```

**ğŸ”¸ æ ¸å¿ƒä½¿ç”¨æµç¨‹**
```
1ï¸âƒ£ åˆ›å»ºPageå¯¹è±¡ï¼šnew Page<>(é¡µç , æ¯é¡µå¤§å°)
2ï¸âƒ£ ä¼ å…¥Mapperæ–¹æ³•ï¼šmapper.selectPage(page, æŸ¥è¯¢æ¡ä»¶)
3ï¸âƒ£ è·å–åˆ†é¡µç»“æœï¼špage.getRecords()è·å–æ•°æ®
4ï¸âƒ£ è·å–åˆ†é¡µä¿¡æ¯ï¼špage.getTotal()ç­‰è·å–ç»Ÿè®¡
```

### 6.2 å®é™…å¼€å‘å…³é”®ç‚¹


**âœ… å‚æ•°æ ¡éªŒè¦ç‚¹**
- currentå’Œsizeå¿…é¡» > 0ï¼Œå¦åˆ™ä¼šè¢«çº æ­£
- sizeå»ºè®®é™åˆ¶æœ€å¤§å€¼ï¼ˆå¦‚100ï¼‰ï¼Œé¿å…æŸ¥è¯¢è¿‡å¤š
- é¡µç è¶…å‡ºæ—¶è¦å‹å¥½å¤„ç†ï¼Œä¸è¦ç›´æ¥è¿”å›ç©º

**âœ… æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
- ä¸éœ€è¦totalæ—¶è®¾ç½®`setSearchCount(false)`
- totalå˜åŒ–ä¸é¢‘ç¹æ—¶å¯ä»¥ä½¿ç”¨ç¼“å­˜
- é¿å…æ·±åˆ†é¡µï¼ˆå¦‚ç¬¬1000é¡µï¼‰ï¼Œè€ƒè™‘æ»šåŠ¨åŠ è½½

**âœ… è¾¹ç•Œå¤„ç†è¦ç‚¹**
- é¡µç è¶…å‡ºèŒƒå›´ï¼šè¿”å›ç©ºæˆ–é‡å®šå‘æœ€åä¸€é¡µ
- å¹¶å‘æ•°æ®å˜åŒ–ï¼šæ£€æµ‹å¹¶è‡ªåŠ¨è°ƒæ•´é¡µç 
- ç©ºæ•°æ®åœºæ™¯ï¼šåŒºåˆ†"å½“å‰é¡µç©º"å’Œ"å®Œå…¨æ— æ•°æ®"

### 6.3 å¸¸è§é—®é¢˜é€ŸæŸ¥


| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|-----|------|---------|
| recordsä¸ºç©ºä½†totalæœ‰å€¼ | é¡µç è¶…å‡ºèŒƒå›´ | é‡å®šå‘åˆ°æœ€åä¸€é¡µ |
| totalä¸º0ä½†è®¾ç½®äº†å€¼ | MPä¼šè‡ªåŠ¨è¦†ç›– | ä¸è¦æ‰‹åŠ¨è®¾ç½®total |
| åˆ†é¡µä¸ç”Ÿæ•ˆ | æœªé…ç½®åˆ†é¡µæ’ä»¶ | æ£€æŸ¥MPé…ç½® |
| æŸ¥è¯¢å¾ˆæ…¢ | æ·±åˆ†é¡µé—®é¢˜ | é™åˆ¶æœ€å¤§é¡µç æˆ–æ”¹ç”¨æ»šåŠ¨ |

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
Pageå¯¹è±¡ä¸¤èº«ä»½ï¼Œè¾“å…¥è¾“å‡ºéƒ½é å®ƒ
currentå’Œsizeä½ æ¥å®šï¼Œtotalå’Œrecordså®ƒæŸ¥è¯¢
å‚æ•°æ ¡éªŒè¦ä¸¥æ ¼ï¼Œè¾¹ç•Œå¤„ç†è¦å‹å¥½
æ€§èƒ½ä¼˜åŒ–åˆ«å¿˜è®°ï¼Œåˆ†é¡µæ’ä»¶æ˜¯åŸºç¡€
```