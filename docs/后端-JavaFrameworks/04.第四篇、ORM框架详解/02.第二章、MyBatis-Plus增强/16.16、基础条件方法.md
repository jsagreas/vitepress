---
title: 16、基础条件方法
---
## 📚 目录

1. [条件构造器是什么](#1-条件构造器是什么)
2. [QueryWrapper核心概念](#2-QueryWrapper核心概念)
3. [等值与比较条件](#3-等值与比较条件)
4. [范围条件查询](#4-范围条件查询)
5. [模糊查询条件](#5-模糊查询条件)
6. [集合条件查询](#6-集合条件查询)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🎯 条件构造器是什么


### 1.1 传统查询的痛点


**没有条件构造器之前的写法**：
```java
// 传统写法：需要手写SQL语句
@Select("SELECT * FROM user WHERE age > #{age} AND name LIKE CONCAT('%', #{name}, '%')")
List<User> selectUsers(@Param("age") Integer age, @Param("name") String name);
```

**存在的问题**：
- 🔸 SQL语句写起来繁琐
- 🔸 容易出现拼写错误
- 🔸 动态条件处理复杂
- 🔸 代码可读性差

### 1.2 条件构造器的作用


**简单理解**：条件构造器就像是一个"查询条件的组装工具"，让你用Java代码的方式来表达SQL查询条件，不用手写SQL语句。

```
传统方式：手写SQL → "SELECT * FROM user WHERE age > 18"
条件构造器：用代码表达 → wrapper.gt("age", 18)

效果一样，但是：
✅ 不用写SQL字符串
✅ IDE有代码提示
✅ 编译时就能检查错误
✅ 代码更清晰易读
```

### 1.3 QueryWrapper简介


**核心定义**：
```
QueryWrapper = Query（查询） + Wrapper（包装器）
作用：把查询条件"包装"起来，用Java方法链的方式构建SQL的WHERE条件
```

**实际对比**：
```java
// SQL方式
SELECT * FROM user WHERE age > 18 AND name LIKE '%张%'

// QueryWrapper方式
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.gt("age", 18)           // 大于18岁
       .like("name", "张");     // 名字包含"张"
```

---

## 2. 🔧 QueryWrapper核心概念


### 2.1 基本使用流程


**三步走流程**：
```
步骤①：创建QueryWrapper对象
      ↓
步骤②：链式调用添加条件方法
      ↓
步骤③：传给Mapper的查询方法
```

**代码演示**：
```java
// ① 创建条件构造器
QueryWrapper<User> queryWrapper = new QueryWrapper<>();

// ② 添加查询条件（可以连续调用）
queryWrapper.eq("name", "张三")      // 名字等于"张三"
            .gt("age", 18);          // 年龄大于18

// ③ 执行查询
List<User> users = userMapper.selectList(queryWrapper);
```

### 2.2 泛型的含义


**为什么要写 `<User>`**：
```java
QueryWrapper<User> wrapper = new QueryWrapper<>();
               ↑
               这里指定查询的是User表
```

**作用说明**：
- 🔸 告诉编译器：这是查询User表的条件
- 🔸 提供类型安全：防止写错字段名
- 🔸 代码提示友好：IDE能提示User类的字段

### 2.3 方法链式调用原理


**什么是链式调用**：
```java
// 链式调用：一个方法接一个方法
wrapper.eq("name", "张三").gt("age", 18).like("email", "qq.com");

// 等价于分开写
wrapper.eq("name", "张三");
wrapper.gt("age", 18);
wrapper.like("email", "qq.com");
```

**为什么能这样写**：
```
每个条件方法执行后，都返回wrapper自己
所以可以继续调用下一个方法
就像搭积木一样，一块接一块
```

---

## 3. ⚖️ 等值与比较条件


### 3.1 eq - 等于条件


**含义解释**：
- `eq` = equal（等于）
- 对应SQL：`WHERE 字段 = 值`
- 用途：查找**完全匹配**的数据

**基础用法**：
```java
// 查询名字等于"张三"的用户
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.eq("name", "张三");

// 生成SQL：WHERE name = '张三'
List<User> users = userMapper.selectList(wrapper);
```

**多条件组合**：
```java
// 查询名字是"张三"且年龄是25岁的用户
wrapper.eq("name", "张三")
       .eq("age", 25);

// 生成SQL：WHERE name = '张三' AND age = 25
```

**实际应用场景**：
- ✅ 根据ID查询：`wrapper.eq("id", 1001)`
- ✅ 根据用户名查询：`wrapper.eq("username", "admin")`
- ✅ 根据状态查询：`wrapper.eq("status", 1)`

### 3.2 ne - 不等于条件


**含义解释**：
- `ne` = not equal（不等于）
- 对应SQL：`WHERE 字段 != 值` 或 `WHERE 字段 <> 值`
- 用途：排除特定值的数据

**基础用法**：
```java
// 查询名字不是"张三"的用户
wrapper.ne("name", "张三");

// 生成SQL：WHERE name <> '张三'
```

**典型应用**：
```java
// 查询所有未删除的用户（删除标记不等于1）
wrapper.ne("deleted", 1);

// 查询非管理员用户
wrapper.ne("role", "admin");
```

### 3.3 gt - 大于条件


**含义解释**：
- `gt` = greater than（大于）
- 对应SQL：`WHERE 字段 > 值`
- 用途：查找**超过**某个值的数据

**基础用法**：
```java
// 查询年龄大于18岁的用户
wrapper.gt("age", 18);

// 生成SQL：WHERE age > 18
```

**数值比较示例**：
```java
// 查询价格高于100的商品
wrapper.gt("price", 100);

// 查询库存大于50的商品
wrapper.gt("stock", 50);
```

### 3.4 ge - 大于等于条件


**含义解释**：
- `ge` = greater than or equal（大于等于）
- 对应SQL：`WHERE 字段 >= 值`
- 用途：包含边界值的范围查询

**基础用法**：
```java
// 查询年龄≥18岁的用户（包含18岁）
wrapper.ge("age", 18);

// 生成SQL：WHERE age >= 18
```

**gt vs ge 的区别**：
```
gt("age", 18)  → 查询19岁及以上  （不含18）
ge("age", 18)  → 查询18岁及以上  （含18）

实际数据：
年龄为18岁的用户：
- gt("age", 18) ❌ 查不到
- ge("age", 18) ✅ 能查到
```

### 3.5 lt - 小于条件


**含义解释**：
- `lt` = less than（小于）
- 对应SQL：`WHERE 字段 < 值`
- 用途：查找**低于**某个值的数据

**基础用法**：
```java
// 查询年龄小于60岁的用户
wrapper.lt("age", 60);

// 生成SQL：WHERE age < 60
```

### 3.6 le - 小于等于条件


**含义解释**：
- `le` = less than or equal（小于等于）
- 对应SQL：`WHERE 字段 <= 值`
- 用途：包含边界值的小于查询

**基础用法**：
```java
// 查询年龄≤60岁的用户（包含60岁）
wrapper.le("age", 60);

// 生成SQL：WHERE age <= 60
```

### 3.7 比较条件组合应用


**年龄区间查询**：
```java
// 查询18-60岁之间的用户
wrapper.ge("age", 18)    // 年龄 >= 18
       .le("age", 60);   // 年龄 <= 60

// 生成SQL：WHERE age >= 18 AND age <= 60
```

**价格筛选**：
```java
// 查询价格在100-500之间的商品
wrapper.ge("price", 100)
       .le("price", 500);
```

---

## 4. 📊 范围条件查询


### 4.1 between - 区间范围


**含义解释**：
- `between` = 在...之间
- 对应SQL：`WHERE 字段 BETWEEN 值1 AND 值2`
- 特点：**包含两端边界值**

**基础语法**：
```java
wrapper.between("字段名", 起始值, 结束值);
```

**实际应用**：
```java
// 查询年龄在18到60岁之间的用户（包含18和60）
wrapper.between("age", 18, 60);

// 生成SQL：WHERE age BETWEEN 18 AND 60
```

**between vs ge+le 对比**：
```
方式一：between
wrapper.between("age", 18, 60);

方式二：ge + le
wrapper.ge("age", 18).le("age", 60);

效果完全相同！
between更简洁，ge+le更灵活
```

**典型场景**：
```java
// 日期范围查询（查询3月份的订单）
wrapper.between("create_time", "2024-03-01", "2024-03-31");

// 价格区间查询
wrapper.between("price", 100, 500);

// 成绩区间查询
wrapper.between("score", 60, 100);
```

### 4.2 notBetween - 区间之外


**含义解释**：
- `notBetween` = 不在...之间
- 对应SQL：`WHERE 字段 NOT BETWEEN 值1 AND 值2`
- 用途：排除某个区间的数据

**基础用法**：
```java
// 查询年龄不在18-60岁之间的用户
wrapper.notBetween("age", 18, 60);

// 生成SQL：WHERE age NOT BETWEEN 18 AND 60
// 结果：年龄 < 18 或 年龄 > 60 的用户
```

**应用场景**：
```java
// 查询非工作日时间的订单（排除周一到周五）
wrapper.notBetween("week_day", 1, 5);

// 查询异常温度数据（排除正常范围）
wrapper.notBetween("temperature", 18, 26);
```

---

## 5. 🔍 模糊查询条件


### 5.1 like - 包含匹配


**含义解释**：
- `like` = 像、类似
- 对应SQL：`WHERE 字段 LIKE '%值%'`
- 用途：查找**包含**指定内容的数据
- 特点：前后都有 `%`，可以匹配任意位置

**基础用法**：
```java
// 查询名字中包含"张"的用户
wrapper.like("name", "张");

// 生成SQL：WHERE name LIKE '%张%'
// 能匹配：张三、李张飞、王小张等
```

**匹配规则图解**：
```
like("name", "张")  →  LIKE '%张%'

匹配成功的例子：
✅ "张三"      （开头有张）
✅ "李张飞"    （中间有张）
✅ "王小张"    （结尾有张）
✅ "张小张"    （多个张）

匹配失败的例子：
❌ "李四"      （没有张）
❌ "王五"      （没有张）
```

**实际应用**：
```java
// 搜索功能：查询标题包含关键词的文章
wrapper.like("title", "MyBatis");

// 模糊查询邮箱
wrapper.like("email", "qq.com");

// 查询地址包含"北京"的用户
wrapper.like("address", "北京");
```

### 5.2 notLike - 不包含匹配


**含义解释**：
- `notLike` = 不像、不包含
- 对应SQL：`WHERE 字段 NOT LIKE '%值%'`
- 用途：排除包含指定内容的数据

**基础用法**：
```java
// 查询名字中不包含"张"的用户
wrapper.notLike("name", "张");

// 生成SQL：WHERE name NOT LIKE '%张%'
```

### 5.3 likeLeft - 以...结尾


**含义解释**：
- `likeLeft` = 左边模糊（结尾匹配）
- 对应SQL：`WHERE 字段 LIKE '%值'`
- 用途：查找**以指定内容结尾**的数据
- 特点：只在左边有 `%`

**基础用法**：
```java
// 查询以"三"结尾的名字
wrapper.likeLeft("name", "三");

// 生成SQL：WHERE name LIKE '%三'
// 能匹配：张三、李三、王小三
// 不匹配：三哥、三娃（开头的不行）
```

**匹配规则**：
```
likeLeft("name", "三")  →  LIKE '%三'

✅ "张三"      （结尾是三）
✅ "李三"      （结尾是三）
❌ "三哥"      （开头是三，不匹配）
❌ "张三丰"    （三在中间，不匹配）
```

**典型场景**：
```java
// 查询.com结尾的邮箱
wrapper.likeLeft("email", ".com");

// 查询以"省"结尾的地址
wrapper.likeLeft("address", "省");
```

### 5.4 likeRight - 以...开头


**含义解释**：
- `likeRight` = 右边模糊（开头匹配）
- 对应SQL：`WHERE 字段 LIKE '值%'`
- 用途：查找**以指定内容开头**的数据
- 特点：只在右边有 `%`

**基础用法**：
```java
// 查询以"张"开头的名字
wrapper.likeRight("name", "张");

// 生成SQL：WHERE name LIKE '张%'
// 能匹配：张三、张飞、张小明
// 不匹配：李张三（开头不是张）
```

**匹配规则**：
```
likeRight("name", "张")  →  LIKE '张%'

✅ "张三"      （开头是张）
✅ "张飞"      （开头是张）
✅ "张小明"    （开头是张）
❌ "李张三"    （开头不是张）
```

**实际应用**：
```java
// 查询以"138"开头的手机号
wrapper.likeRight("phone", "138");

// 查询以"admin"开头的用户名
wrapper.likeRight("username", "admin");

// 查询以"北京市"开头的地址
wrapper.likeRight("address", "北京市");
```

### 5.5 四种like的对比总结


| 方法 | SQL | 含义 | 匹配位置 | 示例 |
|------|-----|------|----------|------|
| `like` | `LIKE '%值%'` | 包含 | 任意位置 | `like("name","张")` 匹配"张三"、"李张飞" |
| `notLike` | `NOT LIKE '%值%'` | 不包含 | 任意位置 | `notLike("name","张")` 排除含"张"的 |
| `likeLeft` | `LIKE '%值'` | 以...结尾 | 必须在结尾 | `likeLeft("name","三")` 匹配"张三" |
| `likeRight` | `LIKE '值%'` | 以...开头 | 必须在开头 | `likeRight("name","张")` 匹配"张三" |

**记忆技巧**：
```
Left（左）  → % 在左边  → '%三'  → 结尾匹配
Right（右） → % 在右边  → '张%'  → 开头匹配
```

---

## 6. 🎯 集合条件查询


### 6.1 in - 在集合中


**含义解释**：
- `in` = 在...之中
- 对应SQL：`WHERE 字段 IN (值1, 值2, 值3...)`
- 用途：查找字段值**在给定集合中**的数据
- 理解：就像"在这些选项中选一个"

**基础用法**：
```java
// 查询ID为1、2、3的用户
wrapper.in("id", 1, 2, 3);

// 生成SQL：WHERE id IN (1, 2, 3)
```

**使用集合作为参数**：
```java
// 用List作为参数
List<Integer> ids = Arrays.asList(1, 2, 3, 4, 5);
wrapper.in("id", ids);

// 生成SQL：WHERE id IN (1, 2, 3, 4, 5)
```

**实际应用场景**：

**场景1：批量查询用户**
```java
// 查询指定的几个用户
List<Long> userIds = Arrays.asList(1001L, 1002L, 1003L);
wrapper.in("user_id", userIds);
```

**场景2：根据角色查询**
```java
// 查询管理员或编辑角色的用户
wrapper.in("role", "admin", "editor");

// 生成SQL：WHERE role IN ('admin', 'editor')
```

**场景3：多状态查询**
```java
// 查询已完成或已发货的订单
wrapper.in("status", "completed", "shipped");
```

**场景4：地区筛选**
```java
// 查询北京、上海、广州的用户
List<String> cities = Arrays.asList("北京", "上海", "广州");
wrapper.in("city", cities);
```

### 6.2 notIn - 不在集合中


**含义解释**：
- `notIn` = 不在...之中
- 对应SQL：`WHERE 字段 NOT IN (值1, 值2, 值3...)`
- 用途：排除字段值在给定集合中的数据

**基础用法**：
```java
// 查询ID不是1、2、3的用户
wrapper.notIn("id", 1, 2, 3);

// 生成SQL：WHERE id NOT IN (1, 2, 3)
```

**实际应用**：
```java
// 排除某些用户
List<Long> excludeIds = Arrays.asList(100L, 101L, 102L);
wrapper.notIn("user_id", excludeIds);

// 排除测试账号
wrapper.notIn("username", "test1", "test2", "admin");

// 排除已删除和已禁用的状态
wrapper.notIn("status", "deleted", "disabled");
```

### 6.3 in vs 多个eq的区别


**写法对比**：
```java
// 方式一：使用in（推荐）
wrapper.in("id", 1, 2, 3);
→ WHERE id IN (1, 2, 3)

// 方式二：使用or + eq（不推荐）
wrapper.eq("id", 1)
       .or()
       .eq("id", 2)
       .or()
       .eq("id", 3);
→ WHERE id = 1 OR id = 2 OR id = 3
```

**为什么用in更好**：
- ✅ 代码更简洁
- ✅ SQL更优雅
- ✅ 性能更好（数据库优化）
- ✅ 可读性更强

### 6.4 集合为空的处理


**重要提示**：
```java
List<Integer> ids = new ArrayList<>();  // 空集合

wrapper.in("id", ids);
// 生成SQL：WHERE id IN ()  ← 这是错误的SQL！

解决方案：
if (!ids.isEmpty()) {
    wrapper.in("id", ids);
}
```

**实际开发建议**：
```java
// 安全的写法
List<Long> userIds = getUserIds();  // 可能返回空集合

if (userIds != null && !userIds.isEmpty()) {
    wrapper.in("user_id", userIds);
}
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念


```
🔸 条件构造器：用Java代码构建SQL查询条件的工具
🔸 QueryWrapper：查询条件包装器，链式调用添加条件
🔸 方法命名规律：都是SQL关键字的缩写（eq=equal, gt=greater than）
🔸 链式调用：每个方法返回自身，可以连续调用
🔸 字段名：用字符串表示数据库字段名（建议用常量）
```

### 7.2 九大基础方法速查


| 🔥方法 | SQL | 含义 | 示例 | 典型场景 |
|--------|-----|------|------|----------|
| `eq` | `=` | 等于 | `eq("name","张三")` | 精确查询 |
| `ne` | `<>` | 不等于 | `ne("status",0)` | 排除特定值 |
| `gt` | `>` | 大于 | `gt("age",18)` | 最小值筛选 |
| `ge` | `>=` | 大于等于 | `ge("age",18)` | 含边界最小值 |
| `lt` | `<` | 小于 | `lt("age",60)` | 最大值筛选 |
| `le` | `<=` | 小于等于 | `le("age",60)` | 含边界最大值 |
| `between` | `BETWEEN` | 区间范围 | `between("age",18,60)` | 范围查询 |
| `like` | `LIKE '%值%'` | 模糊包含 | `like("name","张")` | 搜索功能 |
| `in` | `IN` | 在集合中 | `in("id",1,2,3)` | 批量查询 |

### 7.3 实际开发记忆口诀


```
等于用eq不等ne，
大于gt小于lt，
加个e带等号，
范围查询between好。

模糊查询记like，
左右前缀要分清，
集合查询就用in，
条件组合链式行。
```

### 7.4 常见使用场景归纳


**📌 精确查询**：
```java
// 根据唯一标识查询
wrapper.eq("id", 1001)
       .eq("username", "admin");
```

**📌 范围筛选**：
```java
// 年龄、价格、日期区间
wrapper.between("age", 18, 60)
       .between("price", 100, 500);
```

**📌 搜索功能**：
```java
// 关键词搜索
wrapper.like("title", keyword)
       .or()
       .like("content", keyword);
```

**📌 批量操作**：
```java
// 批量ID查询
List<Long> ids = Arrays.asList(1L, 2L, 3L);
wrapper.in("id", ids);
```

### 7.5 新手常见错误


❌ **错误1：字段名写错**
```java
wrapper.eq("Name", "张三");  // ✗ 大小写错误
wrapper.eq("name", "张三");  // ✓ 正确
```

❌ **错误2：空集合未判断**
```java
wrapper.in("id", emptyList);  // ✗ 空集合报错
if (!list.isEmpty()) {        // ✓ 先判断
    wrapper.in("id", list);
}
```

❌ **错误3：like的%自己加**
```java
wrapper.like("name", "%张%");  // ✗ 不需要自己加%
wrapper.like("name", "张");    // ✓ 自动加%
```

### 7.6 学习建议


**🎯 循序渐进**：
```
第1步：掌握eq、ne等基础比较
      ↓
第2步：学会between、like等常用条件
      ↓
第3步：理解in集合查询
      ↓
第4步：组合多个条件使用
```

**💡 实践提示**：
- 建议创建实体类常量：`User.ID`、`User.NAME` 避免字符串硬编码
- 多个条件默认AND连接，需要OR时显式调用`or()`方法
- 复杂条件可以用lambda表达式：`wrapper.and(w -> w.eq(...).gt(...))`
- 善用IDEA的代码提示，快速找到需要的方法

**核心记忆**：
```
条件构造器本质是SQL的Java化
每个方法对应一个SQL关键字
链式调用就是AND连接条件
掌握基础方法就掌握了80%的查询场景
```