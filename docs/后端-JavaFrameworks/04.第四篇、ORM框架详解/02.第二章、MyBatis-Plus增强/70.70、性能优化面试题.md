---
title: 70ã€æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜
---
## ğŸ“š ç›®å½•

1. [æ‰¹é‡æ“ä½œä¼˜åŒ–ç­–ç•¥](#1-æ‰¹é‡æ“ä½œä¼˜åŒ–ç­–ç•¥)
2. [åˆ†é¡µæŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–](#2-åˆ†é¡µæŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–)
3. [ç¼“å­˜åº”ç”¨åœºæ™¯](#3-ç¼“å­˜åº”ç”¨åœºæ™¯)
4. [æ…¢æŸ¥è¯¢ä¼˜åŒ–æ–¹æ³•](#4-æ…¢æŸ¥è¯¢ä¼˜åŒ–æ–¹æ³•)
5. [å¤§æ•°æ®é‡å¤„ç†æ–¹æ¡ˆ](#5-å¤§æ•°æ®é‡å¤„ç†æ–¹æ¡ˆ)
6. [æ•°æ®åº“è¿æ¥æ± é…ç½®](#6-æ•°æ®åº“è¿æ¥æ± é…ç½®)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ æ‰¹é‡æ“ä½œä¼˜åŒ–ç­–ç•¥


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡æ“ä½œä¼˜åŒ–


**ä¼ ç»Ÿå¾ªç¯æ’å…¥çš„é—®é¢˜**ï¼š
```
å‡è®¾è¦æ’å…¥1000æ¡ç”¨æˆ·æ•°æ®

âŒ ä½æ•ˆåšæ³•ï¼š
for (User user : userList) {
    userMapper.insert(user);  // æ‰§è¡Œ1000æ¬¡æ•°æ®åº“æ“ä½œ
}

æ‰§è¡Œæ—¶é—´ï¼šçº¦10-20ç§’
åŸå› ï¼šæ¯æ¬¡insertéƒ½è¦ï¼š
â€¢ å»ºç«‹æ•°æ®åº“è¿æ¥
â€¢ æ‰§è¡ŒSQL
â€¢ ç­‰å¾…å“åº”
â€¢ å…³é—­è¿æ¥
```

**æ‰¹é‡æ“ä½œçš„ä¼˜åŠ¿**ï¼š
```
âœ… é«˜æ•ˆåšæ³•ï¼š
userMapper.insertBatch(userList);  // ä¸€æ¬¡æ€§æ’å…¥1000æ¡

æ‰§è¡Œæ—¶é—´ï¼šçº¦0.5-1ç§’
ä¼˜åŠ¿ï¼š
â€¢ åªå»ºç«‹ä¸€æ¬¡è¿æ¥
â€¢ ä¸€æ¡SQLæ’å…¥å¤šè¡Œæ•°æ®
â€¢ å‡å°‘ç½‘ç»œä¼ è¾“æ¬¡æ•°
â€¢ æ•°æ®åº“å¯ä»¥æ‰¹é‡ä¼˜åŒ–
```

### 1.2 MyBatis-Plusæ‰¹é‡æ’å…¥æ–¹æ¡ˆ


**æ–¹æ¡ˆä¸€ï¼šsaveBatch() æ–¹æ³•**
```java
// Serviceå±‚ç›´æ¥ä½¿ç”¨
@Service
public class UserService extends ServiceImpl<UserMapper, User> {
    
    public void batchInsert(List<User> userList) {
        // è‡ªåŠ¨åˆ†æ‰¹å¤„ç†ï¼Œé»˜è®¤æ¯æ‰¹1000æ¡
        this.saveBatch(userList);
        
        // å¯ä»¥æŒ‡å®šæ¯æ‰¹æ•°é‡
        this.saveBatch(userList, 500);  // æ¯æ‰¹500æ¡
    }
}
```

> ğŸ’¡ **å·¥ä½œåŸç†**ï¼šMyBatis-Plusä¼šè‡ªåŠ¨å°†å¤§é‡æ•°æ®æ‹†åˆ†æˆå¤šæ‰¹ï¼Œé¿å…ä¸€æ¬¡æ€§æ’å…¥è¿‡å¤šæ•°æ®å¯¼è‡´å†…å­˜æº¢å‡º

**æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰æ‰¹é‡æ’å…¥SQL**
```java
// Mapperæ¥å£
public interface UserMapper extends BaseMapper<User> {
    
    // è‡ªå®šä¹‰æ‰¹é‡æ’å…¥
    void insertBatchCustom(@Param("list") List<User> userList);
}
```

```xml
<!-- Mapper.xml -->
<insert id="insertBatchCustom">
    INSERT INTO user (name, age, email)
    VALUES
    <foreach collection="list" item="user" separator=",">
        (#{user.name}, #{user.age}, #{user.email})
    </foreach>
</insert>
```

### 1.3 æ‰¹é‡æ›´æ–°ä¼˜åŒ–


**æ‰¹é‡æ›´æ–°çš„å¸¸è§åœºæ™¯**ï¼š
```
åœºæ™¯ï¼šå°†æ‰€æœ‰VIPç”¨æˆ·çš„ç§¯åˆ†+100

âŒ ä½æ•ˆæ–¹æ³•ï¼š
for (User user : vipUsers) {
    user.setPoints(user.getPoints() + 100);
    userMapper.updateById(user);
}
```

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```java
// æ–¹å¼1ï¼šä½¿ç”¨updateBatchByIdï¼ˆéœ€è¦é…ç½®ï¼‰
userService.updateBatchById(userList);

// æ–¹å¼2ï¼šä½¿ç”¨æ¡ä»¶æ›´æ–°
LambdaUpdateWrapper<User> wrapper = new LambdaUpdateWrapper<>();
wrapper.eq(User::getUserType, "VIP")
       .setSql("points = points + 100");
userMapper.update(null, wrapper);
```

### 1.4 æ‰¹é‡æ“ä½œæ€§èƒ½å¯¹æ¯”


| æ“ä½œæ–¹å¼ | **1000æ¡æ•°æ®è€—æ—¶** | **10000æ¡æ•°æ®è€—æ—¶** | **é€‚ç”¨åœºæ™¯** |
|---------|-------------------|---------------------|-------------|
| `é€æ¡insert` | `~15ç§’` | `~150ç§’` | `âŒ ä¸æ¨è` |
| `saveBatch()` | `~1ç§’` | `~8ç§’` | `âœ… é€šç”¨æ¨è` |
| `è‡ªå®šä¹‰æ‰¹é‡SQL` | `~0.5ç§’` | `~4ç§’` | `âœ… æ€§èƒ½è¦æ±‚é«˜` |
| `æ¡ä»¶æ‰¹é‡æ›´æ–°` | `~0.3ç§’` | `~2ç§’` | `âœ… ç›¸åŒæ¡ä»¶æ›´æ–°` |

---

## 2. ğŸ“„ åˆ†é¡µæŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–


### 2.1 åˆ†é¡µæŸ¥è¯¢çš„åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯åˆ†é¡µæŸ¥è¯¢**ï¼š
```
åœºæ™¯ï¼šæŸ¥è¯¢100ä¸‡æ¡ç”¨æˆ·æ•°æ®

å¦‚æœä¸€æ¬¡æ€§æŸ¥è¯¢ï¼š
â€¢ æ•°æ®åº“éœ€è¦è¿”å›100ä¸‡æ¡æ•°æ®
â€¢ å ç”¨å¤§é‡å†…å­˜
â€¢ ç½‘ç»œä¼ è¾“ç¼“æ…¢
â€¢ å‰ç«¯æ— æ³•å±•ç¤º

åˆ†é¡µæŸ¥è¯¢æ–¹æ¡ˆï¼š
â€¢ ç¬¬1é¡µï¼šæŸ¥è¯¢ç¬¬1-20æ¡
â€¢ ç¬¬2é¡µï¼šæŸ¥è¯¢ç¬¬21-40æ¡
â€¢ ç¬¬3é¡µï¼šæŸ¥è¯¢ç¬¬41-60æ¡
...

æ¯æ¬¡åªæŸ¥è¯¢éœ€è¦çš„æ•°æ®ï¼Œå¤§å¤§æå‡æ€§èƒ½
```

### 2.2 MyBatis-Plusåˆ†é¡µé…ç½®


**ç¬¬ä¸€æ­¥ï¼šé…ç½®åˆ†é¡µæ’ä»¶**
```java
@Configuration
public class MyBatisPlusConfig {
    
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        
        // æ·»åŠ åˆ†é¡µæ’ä»¶
        PaginationInnerInterceptor paginationInterceptor = 
            new PaginationInnerInterceptor(DbType.MYSQL);
        
        // è®¾ç½®å•é¡µæœ€å¤§é™åˆ¶ï¼ˆé˜²æ­¢æ¶æ„æŸ¥è¯¢ï¼‰
        paginationInterceptor.setMaxLimit(500L);
        
        interceptor.addInnerInterceptor(paginationInterceptor);
        return interceptor;
    }
}
```

**ç¬¬äºŒæ­¥ï¼šä½¿ç”¨åˆ†é¡µæŸ¥è¯¢**
```java
@Service
public class UserService extends ServiceImpl<UserMapper, User> {
    
    public IPage<User> getUsersByPage(int pageNo, int pageSize) {
        // åˆ›å»ºåˆ†é¡µå¯¹è±¡
        Page<User> page = new Page<>(pageNo, pageSize);
        
        // æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢
        LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
        wrapper.eq(User::getStatus, 1)
               .orderByDesc(User::getCreateTime);
        
        return this.page(page, wrapper);
    }
}
```

### 2.3 åˆ†é¡µæŸ¥è¯¢æ€§èƒ½é—®é¢˜


**æ·±åº¦åˆ†é¡µé—®é¢˜**ï¼š
```
é—®é¢˜åœºæ™¯ï¼š
SELECT * FROM user LIMIT 1000000, 20

æ•°æ®åº“æ‰§è¡Œè¿‡ç¨‹ï¼š
1. æ‰«æå‰1000020æ¡æ•°æ®
2. ä¸¢å¼ƒå‰1000000æ¡
3. åªè¿”å›æœ€å20æ¡

ç»“æœï¼šè¶Šå¾€åç¿»é¡µè¶Šæ…¢ï¼
```

**ä¼˜åŒ–æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼ˆæ¨èï¼‰**
```java
// è®°å½•ä¸Šä¸€é¡µçš„æœ€åä¸€æ¡è®°å½•ID
public IPage<User> cursorPagination(Long lastId, int pageSize) {
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
    
    if (lastId != null) {
        // ä½¿ç”¨WHERE id > lastId ä»£æ›¿ LIMIT offset
        wrapper.gt(User::getId, lastId);
    }
    
    wrapper.orderByAsc(User::getId)
           .last("LIMIT " + pageSize);
    
    return this.page(new Page<>(1, pageSize), wrapper);
}
```

**ä¼˜åŒ–æ–¹æ¡ˆäºŒï¼šå»¶è¿Ÿå…³è”**
```java
// å…ˆæŸ¥è¯¢IDï¼Œå†å…³è”æŸ¥è¯¢è¯¦ç»†æ•°æ®
public IPage<User> optimizedPagination(int pageNo, int pageSize) {
    // ç¬¬ä¸€æ­¥ï¼šåªæŸ¥è¯¢IDï¼ˆé€Ÿåº¦å¿«ï¼‰
    List<Long> ids = userMapper.selectIdsByPage(pageNo, pageSize);
    
    // ç¬¬äºŒæ­¥ï¼šæ ¹æ®IDæŸ¥è¯¢å®Œæ•´æ•°æ®
    if (ids.isEmpty()) {
        return new Page<>();
    }
    
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
    wrapper.in(User::getId, ids);
    
    return this.page(new Page<>(1, ids.size()), wrapper);
}
```

### 2.4 åˆ†é¡µæŸ¥è¯¢æœ€ä½³å®è·µ


**åˆ†é¡µå‚æ•°æ ¡éªŒ**ï¼š
```java
public IPage<User> safePage(Integer pageNo, Integer pageSize) {
    // å‚æ•°æ ¡éªŒ
    if (pageNo == null || pageNo < 1) {
        pageNo = 1;
    }
    
    if (pageSize == null || pageSize < 1) {
        pageSize = 10;
    }
    
    // é™åˆ¶æœ€å¤§é¡µå¤§å°
    if (pageSize > 100) {
        pageSize = 100;
    }
    
    Page<User> page = new Page<>(pageNo, pageSize);
    return this.page(page);
}
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š
> - é¿å…æŸ¥è¯¢æ€»è®°å½•æ•°ï¼ˆcountï¼‰å¯¹æ€§èƒ½å½±å“å¤§
> - æ·±åº¦åˆ†é¡µå»ºè®®ä½¿ç”¨æ¸¸æ ‡æ–¹æ¡ˆ
> - è®¾ç½®åˆç†çš„å•é¡µæœ€å¤§é™åˆ¶

---

## 3. ğŸ’¾ ç¼“å­˜åº”ç”¨åœºæ™¯


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜


**ç¼“å­˜çš„ä½œç”¨**ï¼š
```
æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µï¼š
ç”¨æˆ·è¯·æ±‚ â†’ æŸ¥è¯¢æ•°æ®åº“ â†’ è¿”å›ç»“æœ
æ¯æ¬¡è¯·æ±‚éƒ½è¦è®¿é—®æ•°æ®åº“ï¼Œå‹åŠ›å¤§

ä½¿ç”¨ç¼“å­˜çš„æƒ…å†µï¼š
ç¬¬ä¸€æ¬¡ï¼šç”¨æˆ·è¯·æ±‚ â†’ æŸ¥è¯¢æ•°æ®åº“ â†’ å­˜å…¥ç¼“å­˜ â†’ è¿”å›ç»“æœ
ç¬¬äºŒæ¬¡ï¼šç”¨æˆ·è¯·æ±‚ â†’ ç›´æ¥ä»ç¼“å­˜å– â†’ è¿”å›ç»“æœ

å¥½å¤„ï¼š
â€¢ å‡å°‘æ•°æ®åº“è®¿é—®
â€¢ æå‡å“åº”é€Ÿåº¦
â€¢ é™ä½ç³»ç»Ÿå‹åŠ›
```

### 3.2 MyBatisä¸€çº§ç¼“å­˜


**ä¸€çº§ç¼“å­˜ç‰¹ç‚¹**ï¼š
```
ä½œç”¨èŒƒå›´ï¼šåŒä¸€ä¸ªSqlSessionå†…
ç”Ÿå‘½å‘¨æœŸï¼šSqlSessionå…³é—­æ—¶å¤±æ•ˆ
é»˜è®¤å¼€å¯ï¼šæ— éœ€é…ç½®

å·¥ä½œæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SqlSession  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç¼“å­˜  â”‚  â”‚ â†’ ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼šå­˜å…¥ç¼“å­˜
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â†’ ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼šç›´æ¥è¿”å›
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸€çº§ç¼“å­˜ç¤ºä¾‹**ï¼š
```java
// åŒä¸€ä¸ªSqlSessionå†…
User user1 = userMapper.selectById(1L);  // æŸ¥è¯¢æ•°æ®åº“
User user2 = userMapper.selectById(1L);  // ç›´æ¥ä»ç¼“å­˜å–ï¼Œä¸æŸ¥æ•°æ®åº“

System.out.println(user1 == user2);  // trueï¼ŒåŒä¸€ä¸ªå¯¹è±¡
```

> ğŸ’¡ **å®é™…åº”ç”¨**ï¼šä¸€çº§ç¼“å­˜åœ¨äº‹åŠ¡æ“ä½œä¸­å¾ˆæœ‰ç”¨ï¼ŒåŒä¸€äº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢åŒä¸€æ•°æ®ä¸ä¼šé‡å¤è®¿é—®æ•°æ®åº“

### 3.3 MyBatisäºŒçº§ç¼“å­˜


**äºŒçº§ç¼“å­˜ç‰¹ç‚¹**ï¼š
```
ä½œç”¨èŒƒå›´ï¼šåŒä¸€ä¸ªMapperï¼ˆè·¨SqlSessionï¼‰
éœ€è¦é…ç½®ï¼šæ‰‹åŠ¨å¼€å¯
æ•°æ®å…±äº«ï¼šå¤šä¸ªSqlSessionå…±äº«ç¼“å­˜

å·¥ä½œæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Session A â”‚  â”‚Session B â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ äºŒçº§ç¼“å­˜ â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äºŒçº§ç¼“å­˜é…ç½®**ï¼š
```java
// 1. åœ¨Mapperæ¥å£ä¸Šå¼€å¯
@CacheNamespace
public interface UserMapper extends BaseMapper<User> {
}

// 2. å®ä½“ç±»å®ç°Serializable
@Data
public class User implements Serializable {
    private Long id;
    private String name;
}

// 3. é…ç½®æ–‡ä»¶å¼€å¯
mybatis-plus:
  configuration:
    cache-enabled: true
```

### 3.4 Redisç¼“å­˜é›†æˆ


**ä¸ºä»€ä¹ˆé€‰æ‹©Redis**ï¼š
```
MyBatisç¼“å­˜çš„å±€é™ï¼š
â€¢ åªåœ¨åº”ç”¨å†…å­˜ä¸­
â€¢ åº”ç”¨é‡å¯å°±ä¸¢å¤±
â€¢ åˆ†å¸ƒå¼ç¯å¢ƒä¸å…±äº«

Redisçš„ä¼˜åŠ¿ï¼š
â€¢ ç‹¬ç«‹çš„ç¼“å­˜æœåŠ¡å™¨
â€¢ æŒä¹…åŒ–å­˜å‚¨
â€¢ åˆ†å¸ƒå¼å…±äº«
â€¢ æ”¯æŒè¿‡æœŸæ—¶é—´
```

**Redisç¼“å­˜å®ç°**ï¼š
```java
@Service
public class UserService extends ServiceImpl<UserMapper, User> {
    
    @Autowired
    private RedisTemplate<String, User> redisTemplate;
    
    public User getUserById(Long id) {
        String key = "user:" + id;
        
        // 1. å…ˆæŸ¥Redisç¼“å­˜
        User user = redisTemplate.opsForValue().get(key);
        
        if (user != null) {
            System.out.println("ä»ç¼“å­˜è·å–");
            return user;
        }
        
        // 2. ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“
        user = this.getById(id);
        
        if (user != null) {
            // 3. å­˜å…¥ç¼“å­˜ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´30åˆ†é’Ÿ
            redisTemplate.opsForValue().set(key, user, 30, TimeUnit.MINUTES);
        }
        
        return user;
    }
}
```

### 3.5 ç¼“å­˜åº”ç”¨åœºæ™¯æ€»ç»“


| ç¼“å­˜ç±»å‹ | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|---------|------------|---------|---------|
| `ä¸€çº§ç¼“å­˜` | `äº‹åŠ¡å†…é‡å¤æŸ¥è¯¢` | `è‡ªåŠ¨å¼€å¯ï¼Œæ— éœ€é…ç½®` | `ä½œç”¨åŸŸå°ï¼Œäº‹åŠ¡ç»“æŸå¤±æ•ˆ` |
| `äºŒçº§ç¼“å­˜` | `åŒä¸€Mapperé¢‘ç¹æŸ¥è¯¢` | `è·¨Sessionå…±äº«` | `æ›´æ–°åŒæ­¥å¤æ‚` |
| `Redisç¼“å­˜` | `é«˜é¢‘æŸ¥è¯¢ã€åˆ†å¸ƒå¼ç³»ç»Ÿ` | `ç‹¬ç«‹æœåŠ¡ã€æŒä¹…åŒ–` | `éœ€è¦é¢å¤–ç»´æŠ¤` |

> ğŸ”¥ **æœ€ä½³å®è·µ**ï¼šç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨Redisç¼“å­˜ï¼Œé…åˆåˆç†çš„è¿‡æœŸç­–ç•¥

---

## 4. ğŸŒ æ…¢æŸ¥è¯¢ä¼˜åŒ–æ–¹æ³•


### 4.1 ä»€ä¹ˆæ˜¯æ…¢æŸ¥è¯¢


**æ…¢æŸ¥è¯¢çš„å®šä¹‰**ï¼š
```
æ…¢æŸ¥è¯¢ï¼šæ‰§è¡Œæ—¶é—´è¶…è¿‡é˜ˆå€¼çš„SQLè¯­å¥

å¸¸è§é˜ˆå€¼è®¾ç½®ï¼š
â€¢ 1ç§’ä»¥ä¸Šï¼šä¸¥é‡æ…¢æŸ¥è¯¢
â€¢ 0.5ç§’ï¼šéœ€è¦ä¼˜åŒ–
â€¢ 0.1ç§’ï¼šå¯æ¥å—èŒƒå›´

å½±å“ï¼š
â€¢ ç”¨æˆ·ä½“éªŒå·®
â€¢ å ç”¨æ•°æ®åº“èµ„æº
â€¢ å¯èƒ½å¯¼è‡´ç³»ç»Ÿé›ªå´©
```

### 4.2 æ…¢æŸ¥è¯¢å®šä½æ–¹æ³•


**æ–¹å¼ä¸€ï¼šå¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—**
```yaml
# application.yml
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    
spring:
  datasource:
    # MySQLæ…¢æŸ¥è¯¢é…ç½®
    url: jdbc:mysql://localhost:3306/db?logger=Slf4JLogger&profileSQL=true
```

**æ–¹å¼äºŒï¼šä½¿ç”¨æ€§èƒ½åˆ†ææ’ä»¶**
```java
@Configuration
public class MyBatisPlusConfig {
    
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        
        // æ·»åŠ æ€§èƒ½åˆ†ææ’ä»¶ï¼ˆå¼€å‘ç¯å¢ƒä½¿ç”¨ï¼‰
        PerformanceInterceptor performanceInterceptor = 
            new PerformanceInterceptor();
        performanceInterceptor.setMaxTime(1000);  // è¶…è¿‡1ç§’æŠ¥è­¦
        
        return interceptor;
    }
}
```

### 4.3 æ…¢æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥


**ç­–ç•¥ä¸€ï¼šç´¢å¼•ä¼˜åŒ–**
```
é—®é¢˜SQLï¼š
SELECT * FROM user WHERE email = 'xxx@qq.com'
æ‰§è¡Œæ—¶é—´ï¼š2.5ç§’
åŸå› ï¼šemailå­—æ®µæ²¡æœ‰ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æ

ä¼˜åŒ–æ–¹æ¡ˆï¼š
CREATE INDEX idx_email ON user(email);

ä¼˜åŒ–åï¼š0.05ç§’
åŸç†ï¼šé€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½æ•°æ®
```

**ç­–ç•¥äºŒï¼šé¿å…SELECT ***
```java
// âŒ ä¸æ¨èï¼šæŸ¥è¯¢æ‰€æœ‰å­—æ®µ
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getStatus, 1);
List<User> users = userMapper.selectList(wrapper);

// âœ… æ¨èï¼šåªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
wrapper.select(User::getId, User::getName, User::getEmail);
List<User> users = userMapper.selectList(wrapper);
```

**ç­–ç•¥ä¸‰ï¼šé¿å…æ·±åº¦åˆ†é¡µ**
```java
// âŒ æ·±åº¦åˆ†é¡µæ…¢
// SELECT * FROM user LIMIT 100000, 20

// âœ… ä½¿ç”¨å­æŸ¥è¯¢ä¼˜åŒ–
SELECT * FROM user 
WHERE id >= (SELECT id FROM user LIMIT 100000, 1)
LIMIT 20
```

**ç­–ç•¥å››ï¼šåˆç†ä½¿ç”¨è¦†ç›–ç´¢å¼•**
```
è¦†ç›–ç´¢å¼•ï¼šç´¢å¼•åŒ…å«äº†æŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰å­—æ®µ

ç¤ºä¾‹ï¼š
ç´¢å¼•ï¼šCREATE INDEX idx_name_age ON user(name, age)

æŸ¥è¯¢ï¼šSELECT name, age FROM user WHERE name = 'Tom'

å¥½å¤„ï¼š
â€¢ åªéœ€è¦è®¿é—®ç´¢å¼•ï¼Œä¸éœ€è¦å›è¡¨
â€¢ é€Ÿåº¦æ›´å¿«
```

### 4.4 æ…¢æŸ¥è¯¢ä¼˜åŒ–å®æˆ˜


**åœºæ™¯ï¼šæŸ¥è¯¢æœ€è¿‘7å¤©æ´»è·ƒç”¨æˆ·**
```java
// âŒ æ…¢æŸ¥è¯¢å†™æ³•
public List<User> getActiveUsers() {
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
    wrapper.ge(User::getLastLoginTime, 
               LocalDateTime.now().minusDays(7));
    return userMapper.selectList(wrapper);
}

// âœ… ä¼˜åŒ–å†™æ³•
public List<User> getActiveUsersOptimized() {
    // 1. åªæŸ¥è¯¢å¿…è¦å­—æ®µ
    // 2. ç¡®ä¿last_login_timeæœ‰ç´¢å¼•
    // 3. é™åˆ¶æŸ¥è¯¢æ•°é‡
    
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
    wrapper.select(User::getId, User::getName, User::getLastLoginTime)
           .ge(User::getLastLoginTime, 
               LocalDateTime.now().minusDays(7))
           .orderByDesc(User::getLastLoginTime)
           .last("LIMIT 1000");
    
    return userMapper.selectList(wrapper);
}
```

---

## 5. ğŸ“Š å¤§æ•°æ®é‡å¤„ç†æ–¹æ¡ˆ


### 5.1 å¤§æ•°æ®é‡åœºæ™¯åˆ†ç±»


**å¸¸è§å¤§æ•°æ®é‡åœºæ™¯**ï¼š
```
åœºæ™¯1ï¼šæ‰¹é‡å¯¼å…¥æ•°æ®
â€¢ ä»Excelå¯¼å…¥10ä¸‡æ¡ç”¨æˆ·æ•°æ®
â€¢ æ•°æ®è¿ç§»ã€ç³»ç»Ÿåˆå§‹åŒ–

åœºæ™¯2ï¼šæ‰¹é‡å¯¼å‡ºæ•°æ®
â€¢ å¯¼å‡º100ä¸‡æ¡è®¢å•è®°å½•åˆ°Excel
â€¢ ç”ŸæˆæŠ¥è¡¨ã€æ•°æ®åˆ†æ

åœºæ™¯3ï¼šå¤§æ•°æ®é‡æŸ¥è¯¢
â€¢ ç»Ÿè®¡åˆ†æå…¨è¡¨æ•°æ®
â€¢ æ•°æ®æ¸…æ´—ã€æ•°æ®å¤„ç†
```

### 5.2 æµå¼æŸ¥è¯¢å¤„ç†


**ä¸ºä»€ä¹ˆéœ€è¦æµå¼æŸ¥è¯¢**ï¼š
```
æ™®é€šæŸ¥è¯¢é—®é¢˜ï¼š
List<User> users = userMapper.selectList(null);

å¦‚æœè¡¨æœ‰100ä¸‡æ¡æ•°æ®ï¼š
â€¢ ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜
â€¢ å ç”¨çº¦500MBå†…å­˜
â€¢ å¯èƒ½å¯¼è‡´OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰

æµå¼æŸ¥è¯¢ä¼˜åŠ¿ï¼š
â€¢ é€æ¡è¯»å–ï¼Œä¸å ç”¨å¤§é‡å†…å­˜
â€¢ å¤„ç†å®Œä¸€æ¡é‡Šæ”¾ä¸€æ¡
â€¢ é€‚åˆå¤§æ•°æ®é‡åœºæ™¯
```

**æµå¼æŸ¥è¯¢å®ç°**ï¼š
```java
@Mapper
public interface UserMapper extends BaseMapper<User> {
    
    // ä½¿ç”¨@ResultTypeæ³¨è§£ï¼Œè¿”å›Cursor
    @Select("SELECT * FROM user WHERE status = 1")
    @ResultType(User.class)
    Cursor<User> selectCursor();
}

// Serviceå±‚å¤„ç†
@Service
public class UserService {
    
    @Autowired
    private UserMapper userMapper;
    
    public void processLargeData() {
        try (Cursor<User> cursor = userMapper.selectCursor()) {
            // é€æ¡å¤„ç†
            cursor.forEach(user -> {
                // ä¸šåŠ¡å¤„ç†
                System.out.println(user.getName());
            });
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### 5.3 åˆ†æ‰¹å¤„ç†æ–¹æ¡ˆ


**åˆ†æ‰¹å¤„ç†åŸç†**ï¼š
```
åŸç†ï¼šå°†å¤§ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡

ç¤ºä¾‹ï¼šå¯¼å…¥10ä¸‡æ¡æ•°æ®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  10ä¸‡æ¡æ•°æ®                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
    â”‚1000æ¡â”‚1000æ¡â”‚1000æ¡â”‚...  â”‚
    â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
       â†“     â†“     â†“     â†“
    æ‰¹æ¬¡1  æ‰¹æ¬¡2  æ‰¹æ¬¡3  ...

å¥½å¤„ï¼š
â€¢ æ§åˆ¶å†…å­˜ä½¿ç”¨
â€¢ é¿å…é•¿äº‹åŠ¡
â€¢ æé«˜æˆåŠŸç‡
```

**åˆ†æ‰¹å¯¼å…¥å®ç°**ï¼š
```java
public void batchImport(List<User> allUsers) {
    int batchSize = 1000;  // æ¯æ‰¹1000æ¡
    int total = allUsers.size();
    
    for (int i = 0; i < total; i += batchSize) {
        int end = Math.min(i + batchSize, total);
        List<User> batch = allUsers.subList(i, end);
        
        // åˆ†æ‰¹ä¿å­˜
        userService.saveBatch(batch);
        
        // å¯é€‰ï¼šè®°å½•è¿›åº¦
        System.out.println("å·²å¤„ç†ï¼š" + end + "/" + total);
    }
}
```

### 5.4 å¼‚æ­¥å¤„ç†æ–¹æ¡ˆ


**ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥å¤„ç†**ï¼š
```
åŒæ­¥å¤„ç†é—®é¢˜ï¼š
ç”¨æˆ·ç‚¹å‡»å¯¼å‡º â†’ ç­‰å¾…å¤„ç† â†’ ä¸‹è½½æ–‡ä»¶
å¦‚æœæ•°æ®é‡å¤§ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…å¾ˆä¹…

å¼‚æ­¥å¤„ç†æ–¹æ¡ˆï¼š
ç”¨æˆ·ç‚¹å‡»å¯¼å‡º â†’ ç«‹å³è¿”å› â†’ åå°å¤„ç† â†’ å®Œæˆåé€šçŸ¥

æµç¨‹å›¾ï¼š
ç”¨æˆ·è¯·æ±‚ â”€â”€â†’ åˆ›å»ºä»»åŠ¡ â”€â”€â†’ è¿”å›ä»»åŠ¡ID
                           â†“
                      åå°å¼‚æ­¥å¤„ç†
                           â†“
                      å¤„ç†å®Œæˆé€šçŸ¥
```

**å¼‚æ­¥å¯¼å‡ºå®ç°**ï¼š
```java
@Service
public class ExportService {
    
    @Async
    public void asyncExport(Long userId) {
        try {
            // 1. æŸ¥è¯¢æ•°æ®
            List<User> users = userMapper.selectList(null);
            
            // 2. ç”ŸæˆExcelæ–‡ä»¶
            String filePath = "/tmp/export_" + userId + ".xlsx";
            ExcelWriter.write(filePath, users);
            
            // 3. é€šçŸ¥ç”¨æˆ·ï¼ˆå‘é€æ¶ˆæ¯æˆ–é‚®ä»¶ï¼‰
            notifyUser(userId, filePath);
            
        } catch (Exception e) {
            // é”™è¯¯å¤„ç†
            log.error("å¯¼å‡ºå¤±è´¥", e);
        }
    }
}
```

### 5.5 å¤§æ•°æ®é‡å¤„ç†å¯¹æ¯”


| æ–¹æ¡ˆ | **æ•°æ®é‡** | **å†…å­˜å ç”¨** | **å¤„ç†é€Ÿåº¦** | **å¤æ‚åº¦** |
|-----|----------|------------|------------|-----------|
| `ä¸€æ¬¡æ€§æŸ¥è¯¢` | `< 1ä¸‡` | `é«˜` | `å¿«` | `ä½` |
| `åˆ†é¡µæŸ¥è¯¢` | `< 10ä¸‡` | `ä¸­` | `ä¸­` | `ä¸­` |
| `æµå¼æŸ¥è¯¢` | `> 10ä¸‡` | `ä½` | `ä¸­` | `ä¸­` |
| `åˆ†æ‰¹å¤„ç†` | `> 10ä¸‡` | `å¯æ§` | `å¿«` | `é«˜` |
| `å¼‚æ­¥å¤„ç†` | `ä¸é™` | `å¯æ§` | `å–å†³äºå®ç°` | `é«˜` |

---

## 6. ğŸ”Œ æ•°æ®åº“è¿æ¥æ± é…ç½®


### 6.1 ä»€ä¹ˆæ˜¯æ•°æ®åº“è¿æ¥æ± 


**è¿æ¥æ± çš„ä½œç”¨**ï¼š
```
æ²¡æœ‰è¿æ¥æ± ï¼š
è¯·æ±‚1 â†’ åˆ›å»ºè¿æ¥ â†’ æ‰§è¡ŒSQL â†’ å…³é—­è¿æ¥
è¯·æ±‚2 â†’ åˆ›å»ºè¿æ¥ â†’ æ‰§è¡ŒSQL â†’ å…³é—­è¿æ¥
è¯·æ±‚3 â†’ åˆ›å»ºè¿æ¥ â†’ æ‰§è¡ŒSQL â†’ å…³é—­è¿æ¥

é—®é¢˜ï¼š
â€¢ åˆ›å»ºè¿æ¥è€—æ—¶ï¼ˆ100-200msï¼‰
â€¢ é¢‘ç¹åˆ›å»º/å…³é—­æµªè´¹èµ„æº
â€¢ é«˜å¹¶å‘æ—¶æ€§èƒ½å·®

ä½¿ç”¨è¿æ¥æ± ï¼š
è¿æ¥æ±  â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”
      â”‚è¿æ¥1â”‚â”‚è¿æ¥2â”‚â”‚è¿æ¥3â”‚
      â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜
         â†‘      â†‘      â†‘
      è¯·æ±‚1  è¯·æ±‚2  è¯·æ±‚3

å¥½å¤„ï¼š
â€¢ è¿æ¥å¤ç”¨ï¼Œæé«˜æ€§èƒ½
â€¢ æ§åˆ¶è¿æ¥æ•°ï¼Œé¿å…èµ„æºè€—å°½
â€¢ è¿æ¥ç®¡ç†ï¼Œè‡ªåŠ¨å›æ”¶
```

### 6.2 HikariCPè¿æ¥æ± é…ç½®


**HikariCPç‰¹ç‚¹**ï¼š
```
Spring Booté»˜è®¤è¿æ¥æ± ï¼šHikariCP

ä¼˜åŠ¿ï¼š
â€¢ æ€§èƒ½æœ€ä¼˜ï¼ˆå·ç§°æœ€å¿«çš„è¿æ¥æ± ï¼‰
â€¢ ä»£ç ç®€æ´
â€¢ ç¨³å®šå¯é 
â€¢ é›¶ä¾èµ–
```

**åŸºç¡€é…ç½®**ï¼š
```yaml
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/db
    username: root
    password: 123456
    
    hikari:
      # è¿æ¥æ± åç§°
      pool-name: MyHikariPool
      
      # æœ€å°ç©ºé—²è¿æ¥æ•°
      minimum-idle: 5
      
      # æœ€å¤§è¿æ¥æ•°
      maximum-pool-size: 20
      
      # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      connection-timeout: 30000
      
      # ç©ºé—²è¿æ¥æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      idle-timeout: 600000
      
      # è¿æ¥æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      max-lifetime: 1800000
```

### 6.3 è¿æ¥æ± å‚æ•°è¯¦è§£


**æ ¸å¿ƒå‚æ•°è¯´æ˜**ï¼š

**â‘  minimum-idleï¼ˆæœ€å°ç©ºé—²è¿æ¥ï¼‰**
```
ä½œç”¨ï¼šè¿æ¥æ± ä¸­ä¿æŒçš„æœ€å°ç©ºé—²è¿æ¥æ•°

è®¾ç½®å»ºè®®ï¼š
â€¢ è®¾ç½®è¿‡å°ï¼šé«˜å³°æœŸè¿æ¥ä¸å¤Ÿï¼Œéœ€è¦ä¸´æ—¶åˆ›å»º
â€¢ è®¾ç½®è¿‡å¤§ï¼šæµªè´¹èµ„æº

æ¨èå€¼ï¼š
â€¢ ä½å¹¶å‘ï¼š5-10
â€¢ ä¸­å¹¶å‘ï¼š10-20
â€¢ é«˜å¹¶å‘ï¼š20-50
```

**â‘¡ maximum-pool-sizeï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰**
```
ä½œç”¨ï¼šè¿æ¥æ± æœ€å¤šåˆ›å»ºçš„è¿æ¥æ•°

è®¾ç½®å»ºè®®ï¼š
â€¢ è®¾ç½®è¿‡å°ï¼šé«˜å¹¶å‘æ—¶è¿æ¥ä¸å¤Ÿï¼Œè¯·æ±‚ç­‰å¾…
â€¢ è®¾ç½®è¿‡å¤§ï¼šè¶…è¿‡æ•°æ®åº“æœ€å¤§è¿æ¥æ•°é™åˆ¶

æ¨èå€¼ï¼š
â€¢ ä½å¹¶å‘ï¼š20-50
â€¢ ä¸­å¹¶å‘ï¼š50-100
â€¢ é«˜å¹¶å‘ï¼š100-200

è®¡ç®—å…¬å¼ï¼š
æœ€å¤§è¿æ¥æ•° = ((æ ¸å¿ƒæ•° * 2) + ç£ç›˜æ•°) * æ¯ä¸ªè¿æ¥çš„å¤„ç†æ—¶é—´ / å•ä¸ªè¯·æ±‚æ—¶é—´
```

**â‘¢ connection-timeoutï¼ˆè¿æ¥è¶…æ—¶ï¼‰**
```
ä½œç”¨ï¼šè·å–è¿æ¥çš„æœ€å¤§ç­‰å¾…æ—¶é—´

è®¾ç½®å»ºè®®ï¼š
â€¢ è®¾ç½®è¿‡å°ï¼šè¯·æ±‚å®¹æ˜“å¤±è´¥
â€¢ è®¾ç½®è¿‡å¤§ï¼šç”¨æˆ·ç­‰å¾…æ—¶é—´é•¿

æ¨èå€¼ï¼š
â€¢ 30000msï¼ˆ30ç§’ï¼‰é€‚åˆå¤§å¤šæ•°åœºæ™¯
â€¢ å¿«é€Ÿå¤±è´¥åœºæ™¯å¯è®¾ç½®10000ms
```

### 6.4 è¿æ¥æ± æ€§èƒ½ä¼˜åŒ–


**ä¼˜åŒ–ç­–ç•¥ä¸€ï¼šåˆç†è®¾ç½®è¿æ¥æ•°**
```java
// æ ¹æ®å®é™…å‹æµ‹è°ƒæ•´
hikari:
  maximum-pool-size: ${POOL_SIZE:50}
  
// å‹æµ‹æ–¹æ³•ï¼š
// 1. ä»å°åˆ°å¤§é€æ­¥å¢åŠ è¿æ¥æ•°
// 2. è§‚å¯Ÿå“åº”æ—¶é—´å’Œååé‡
// 3. æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹
```

**ä¼˜åŒ–ç­–ç•¥äºŒï¼šè¿æ¥æœ‰æ•ˆæ€§æ£€æµ‹**
```yaml
hikari:
  # è¿æ¥æµ‹è¯•æŸ¥è¯¢
  connection-test-query: SELECT 1
  
  # è¿æ¥éªŒè¯è¶…æ—¶
  validation-timeout: 5000
```

**ä¼˜åŒ–ç­–ç•¥ä¸‰ï¼šç›‘æ§è¿æ¥æ± çŠ¶æ€**
```java
@Component
public class HikariMonitor {
    
    @Autowired
    private HikariDataSource hikariDataSource;
    
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿæ£€æŸ¥
    public void monitor() {
        HikariPoolMXBean poolMXBean = hikariDataSource.getHikariPoolMXBean();
        
        System.out.println("æ´»è·ƒè¿æ¥æ•°ï¼š" + poolMXBean.getActiveConnections());
        System.out.println("ç©ºé—²è¿æ¥æ•°ï¼š" + poolMXBean.getIdleConnections());
        System.out.println("æ€»è¿æ¥æ•°ï¼š" + poolMXBean.getTotalConnections());
        System.out.println("ç­‰å¾…çº¿ç¨‹æ•°ï¼š" + poolMXBean.getThreadsAwaitingConnection());
    }
}
```

### 6.5 å¸¸è§è¿æ¥æ± é—®é¢˜


**é—®é¢˜ä¸€ï¼šè¿æ¥æ³„æ¼**
```
ç—‡çŠ¶ï¼šè¿æ¥æ•°æŒç»­å¢é•¿ï¼Œæœ€ç»ˆè€—å°½

åŸå› ï¼š
â€¢ å¿˜è®°å…³é—­è¿æ¥
â€¢ å¼‚å¸¸æ—¶æœªé‡Šæ”¾è¿æ¥

è§£å†³ï¼š
// âŒ å®¹æ˜“æ³„æ¼
Connection conn = dataSource.getConnection();
// ... ä½¿ç”¨è¿æ¥
// å¦‚æœä¸­é€”å¼‚å¸¸ï¼Œè¿æ¥æœªå…³é—­

// âœ… ä½¿ç”¨try-with-resources
try (Connection conn = dataSource.getConnection()) {
    // ... ä½¿ç”¨è¿æ¥
}  // è‡ªåŠ¨å…³é—­
```

**é—®é¢˜äºŒï¼šè¿æ¥è¶…æ—¶**
```
ç—‡çŠ¶ï¼šå¤§é‡è¯·æ±‚ç­‰å¾…è¿æ¥è¶…æ—¶

åŸå› ï¼š
â€¢ è¿æ¥æ•°ä¸è¶³
â€¢ SQLæ‰§è¡Œæ—¶é—´è¿‡é•¿

è§£å†³ï¼š
1. å¢å¤§maximum-pool-size
2. ä¼˜åŒ–æ…¢SQL
3. è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒæ€æƒ³**
```
æ‰¹é‡æ“ä½œï¼šå‡å°‘æ•°æ®åº“äº¤äº’æ¬¡æ•°
åˆ†é¡µæŸ¥è¯¢ï¼šé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®
ç¼“å­˜åº”ç”¨ï¼šå‡å°‘æ•°æ®åº“è®¿é—®é¢‘ç‡
æ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼šæå‡å•æ¬¡æŸ¥è¯¢æ•ˆç‡
å¤§æ•°æ®å¤„ç†ï¼šåˆç†åˆ†é…ç³»ç»Ÿèµ„æº
è¿æ¥æ± é…ç½®ï¼šæ§åˆ¶æ•°æ®åº“è¿æ¥ä½¿ç”¨
```

### 7.2 å…³é”®ä¼˜åŒ–ç­–ç•¥


**ğŸ”¹ æ‰¹é‡æ“ä½œä¼˜åŒ–**
```
â€¢ ä½¿ç”¨saveBatch()ä»£æ›¿å¾ªç¯insert
â€¢ è‡ªå®šä¹‰æ‰¹é‡SQLæå‡æ€§èƒ½
â€¢ æ‰¹é‡æ›´æ–°ä½¿ç”¨æ¡ä»¶æ›´æ–°
â€¢ åˆç†æ§åˆ¶æ¯æ‰¹æ•°é‡ï¼ˆ500-1000æ¡ï¼‰
```

**ğŸ”¹ åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–**
```
â€¢ é…ç½®åˆ†é¡µæ’ä»¶
â€¢ é¿å…æ·±åº¦åˆ†é¡µï¼ˆä½¿ç”¨æ¸¸æ ‡ï¼‰
â€¢ åªæŸ¥è¯¢å¿…è¦å­—æ®µ
â€¢ è®¾ç½®åˆç†çš„å•é¡µé™åˆ¶
```

**ğŸ”¹ ç¼“å­˜ä½¿ç”¨ç­–ç•¥**
```
â€¢ ä¸€çº§ç¼“å­˜ï¼šäº‹åŠ¡å†…è‡ªåŠ¨ç”Ÿæ•ˆ
â€¢ äºŒçº§ç¼“å­˜ï¼šMapperçº§åˆ«å…±äº«
â€¢ Redisç¼“å­˜ï¼šç”Ÿäº§ç¯å¢ƒæ¨è
â€¢ è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
```

**ğŸ”¹ æ…¢æŸ¥è¯¢ä¼˜åŒ–**
```
â€¢ å»ºç«‹åˆé€‚çš„ç´¢å¼•
â€¢ é¿å…SELECT *
â€¢ ä½¿ç”¨è¦†ç›–ç´¢å¼•
â€¢ å®šæœŸåˆ†ææ‰§è¡Œè®¡åˆ’
```

**ğŸ”¹ å¤§æ•°æ®å¤„ç†**
```
â€¢ æµå¼æŸ¥è¯¢ï¼šé€æ¡å¤„ç†ï¼ŒèŠ‚çœå†…å­˜
â€¢ åˆ†æ‰¹å¤„ç†ï¼šæ§åˆ¶æ¯æ‰¹æ•°é‡
â€¢ å¼‚æ­¥å¤„ç†ï¼šæå‡ç”¨æˆ·ä½“éªŒ
â€¢ æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚æ–¹æ¡ˆ
```

**ğŸ”¹ è¿æ¥æ± é…ç½®**
```
â€¢ åˆç†è®¾ç½®æœ€å¤§è¿æ¥æ•°
â€¢ é…ç½®è¿æ¥è¶…æ—¶æ—¶é—´
â€¢ å®šæœŸç›‘æ§è¿æ¥æ± çŠ¶æ€
â€¢ é˜²æ­¢è¿æ¥æ³„æ¼
```

### 7.3 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•


> ğŸ“ **å¼€å‘é˜¶æ®µæ£€æŸ¥**
> - [ ] æ˜¯å¦ä½¿ç”¨äº†æ‰¹é‡æ“ä½œ
> - [ ] åˆ†é¡µæŸ¥è¯¢æ˜¯å¦é…ç½®æ­£ç¡®
> - [ ] SQLæ˜¯å¦æ·»åŠ äº†å¿…è¦ç´¢å¼•
> - [ ] æ˜¯å¦é¿å…äº†SELECT *
> - [ ] å¤§æ•°æ®é‡æ˜¯å¦åˆ†æ‰¹å¤„ç†

> ğŸ” **æµ‹è¯•é˜¶æ®µæ£€æŸ¥**
> - [ ] æ˜¯å¦è¿›è¡Œäº†å‹åŠ›æµ‹è¯•
> - [ ] æ…¢æŸ¥è¯¢æ˜¯å¦å·²ä¼˜åŒ–
> - [ ] ç¼“å­˜å‘½ä¸­ç‡æ˜¯å¦è¾¾æ ‡
> - [ ] è¿æ¥æ± é…ç½®æ˜¯å¦åˆç†
> - [ ] æ˜¯å¦ç›‘æ§äº†æ€§èƒ½æŒ‡æ ‡

> ğŸš€ **ä¸Šçº¿é˜¶æ®µæ£€æŸ¥**
> - [ ] ç”Ÿäº§ç¯å¢ƒé…ç½®æ˜¯å¦ä¼˜åŒ–
> - [ ] ç›‘æ§å‘Šè­¦æ˜¯å¦é…ç½®
> - [ ] åº”æ€¥é¢„æ¡ˆæ˜¯å¦å‡†å¤‡
> - [ ] æ€§èƒ½åŸºçº¿æ˜¯å¦å»ºç«‹
> - [ ] æ‰©å®¹æ–¹æ¡ˆæ˜¯å¦æ˜ç¡®

### 7.4 å®é™…åº”ç”¨ä»·å€¼


**ä¸šåŠ¡åœºæ™¯åº”ç”¨**ï¼š
```
ç”µå•†ç³»ç»Ÿï¼š
â€¢ å•†å“åˆ—è¡¨ï¼šåˆ†é¡µæŸ¥è¯¢ + Redisç¼“å­˜
â€¢ æ‰¹é‡å¯¼å…¥ï¼šsaveBatchåˆ†æ‰¹å¤„ç†
â€¢ è®¢å•å¯¼å‡ºï¼šå¼‚æ­¥å¤„ç†å¤§æ•°æ®é‡

å†…å®¹å¹³å°ï¼š
â€¢ æ–‡ç« åˆ—è¡¨ï¼šæ¸¸æ ‡åˆ†é¡µé¿å…æ·±åº¦åˆ†é¡µ
â€¢ çƒ­é—¨å†…å®¹ï¼šRedisç¼“å­˜æå‡è®¿é—®é€Ÿåº¦
â€¢ æ•°æ®ç»Ÿè®¡ï¼šæµå¼æŸ¥è¯¢å¤„ç†å¤§é‡æ•°æ®

ç®¡ç†ç³»ç»Ÿï¼š
â€¢ ç”¨æˆ·ç®¡ç†ï¼šåˆç†çš„åˆ†é¡µé…ç½®
â€¢ æ‰¹é‡æ“ä½œï¼šæ‰¹é‡æ›´æ–°ç”¨æˆ·çŠ¶æ€
â€¢ æ•°æ®å¯¼å‡ºï¼šå¼‚æ­¥å¯¼å‡ºExcel
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æ‰¹é‡æ“ä½œå‡äº¤äº’ï¼Œåˆ†é¡µæŸ¥è¯¢æ§æ•°é‡
ç¼“å­˜åº”ç”¨æé€Ÿåº¦ï¼Œæ…¢æŸ¥ä¼˜åŒ–å»ºç´¢å¼•
å¤§æ•°æ®é‡è¦åˆ†æ‰¹,è¿æ¥æ± é…è¦åˆç†
æ€§èƒ½ä¼˜åŒ–æ— æ­¢å¢ƒï¼Œç›‘æ§åˆ†ææ˜¯å…³é”®
```