---
title: 25ã€é“¾å¼æŸ¥è¯¢æ“ä½œ
---
## ğŸ“š ç›®å½•


1. [é“¾å¼è°ƒç”¨æ¦‚è¿°](#1-é“¾å¼è°ƒç”¨æ¦‚è¿°)
2. [queryé“¾å¼æŸ¥è¯¢](#2-queryé“¾å¼æŸ¥è¯¢)
3. [lambdaQueryå®‰å…¨æŸ¥è¯¢](#3-lambdaQueryå®‰å…¨æŸ¥è¯¢)
4. [é“¾å¼APIè®¾è®¡åŸç†](#4-é“¾å¼APIè®¾è®¡åŸç†)
5. [æ¡ä»¶æ„é€ é“¾å¼æ“ä½œ](#5-æ¡ä»¶æ„é€ é“¾å¼æ“ä½œ)
6. [æŸ¥è¯¢ç»“æœå¤„ç†](#6-æŸ¥è¯¢ç»“æœå¤„ç†)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ é“¾å¼è°ƒç”¨æ¦‚è¿°



### 1.1 ä»€ä¹ˆæ˜¯é“¾å¼è°ƒç”¨



**é€šä¿—ç†è§£**ï¼š
> ğŸ—ï¸ **å»ºæˆ¿å­ç±»æ¯”**  
> ä¼ ç»Ÿæ–¹å¼ï¼šå…ˆæ‰“åœ°åŸºï¼Œå†å»ºå¢™ï¼Œå†è£…çª—æˆ·ï¼Œæ¯æ­¥éƒ½è¦é‡æ–°å¼€å§‹  
> é“¾å¼æ–¹å¼ï¼šä¸€æ°”å‘µæˆ â†’ æ‰“åœ°åŸº.å»ºå¢™.è£…çª—æˆ·.åˆ·æ¼†ï¼Œè¿ç»­å®Œæˆ

**æœ¬è´¨å®šä¹‰**ï¼š
```
é“¾å¼è°ƒç”¨ = æ–¹æ³•è¿”å›è‡ªèº«å¯¹è±¡ + è¿ç»­è°ƒç”¨å¤šä¸ªæ–¹æ³•

ä¼ ç»Ÿå†™æ³•ï¼ˆåˆ†æ­¥éª¤ï¼‰ï¼š
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.eq("age", 18);
wrapper.like("name", "å¼ ");
List<User> list = userMapper.selectList(wrapper);

é“¾å¼å†™æ³•ï¼ˆä¸€æ°”å‘µæˆï¼‰ï¼š
List<User> list = userService.lambdaQuery()
    .eq(User::getAge, 18)
    .like(User::getName, "å¼ ")
    .list();
```

### 1.2 ä¸ºä»€ä¹ˆè¦ç”¨é“¾å¼è°ƒç”¨



**æ ¸å¿ƒä¼˜åŠ¿å¯¹æ¯”**ï¼š

| ç»´åº¦ | **ä¼ ç»Ÿæ–¹å¼** | **é“¾å¼æ–¹å¼** | **ä¼˜åŠ¿è¯´æ˜** |
|------|------------|------------|------------|
| ğŸ”¸ **ä»£ç é•¿åº¦** | `éœ€è¦å¤šè¡Œä»£ç ` | `ä¸€è¡Œæå®š` | `å‡å°‘50%ä»£ç é‡` |
| ğŸ”¸ **å¯è¯»æ€§** | `æ­¥éª¤åˆ†æ•£` | `é€»è¾‘è¿è´¯` | `åƒè¯»ä¸€å¥è¯` |
| ğŸ”¸ **ç±»å‹å®‰å…¨** | `å­—ç¬¦ä¸²å­—æ®µå` | `æ–¹æ³•å¼•ç”¨` | `ç¼–è¯‘æœŸæ£€æŸ¥` |
| ğŸ”¸ **ç»´æŠ¤æ€§** | `å­—æ®µæ”¹åéœ€æ‰‹åŠ¨æ‰¾` | `IDEè‡ªåŠ¨é‡æ„` | `é‡æ„å‹å¥½` |

**å®é™…åœºæ™¯ä½“éªŒ**ï¼š
```java
// åœºæ™¯ï¼šæŸ¥è¯¢å¹´é¾„18å²ã€å§“å¼ ã€æŒ‰åˆ›å»ºæ—¶é—´å€’åºçš„ç”¨æˆ·

// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šåˆ†æ•£ã€å®¹æ˜“å‡ºé”™
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.eq("age", 18);              // å­—æ®µåå®¹æ˜“å†™é”™
wrapper.like("name", "å¼ ");
wrapper.orderByDesc("create_time");  // å­—æ®µåå’Œæ•°æ®åº“è¦ä¸€è‡´
List<User> users = userMapper.selectList(wrapper);

// âœ… é“¾å¼æ–¹å¼ï¼šè¿è´¯ã€å®‰å…¨
List<User> users = userService.lambdaQuery()
    .eq(User::getAge, 18)           // æ–¹æ³•å¼•ç”¨ï¼Œå†™é”™ç›´æ¥æŠ¥é”™
    .like(User::getName, "å¼ ")
    .orderByDesc(User::getCreateTime)
    .list();                         // ä¸€æ°”å‘µæˆ
```

### 1.3 MyBatis-Plusæä¾›çš„é“¾å¼å·¥å…·



**ä¸‰å¤§é“¾å¼APIå®¶æ—**ï¼š

```
æŸ¥è¯¢å®¶æ—ï¼š
â”œâ”€ query()         â†’ æ™®é€šé“¾å¼æŸ¥è¯¢ï¼ˆå­—ç¬¦ä¸²å­—æ®µåï¼‰
â”œâ”€ lambdaQuery()   â†’ Lambdaé“¾å¼æŸ¥è¯¢ï¼ˆç±»å‹å®‰å…¨ï¼‰
â””â”€ chainQuery()    â†’ å®Œæ•´é“¾å¼æŸ¥è¯¢ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰

æ›´æ–°å®¶æ—ï¼š
â”œâ”€ update()        â†’ æ™®é€šé“¾å¼æ›´æ–°
â”œâ”€ lambdaUpdate()  â†’ Lambdaé“¾å¼æ›´æ–°
â””â”€ chainUpdate()   â†’ å®Œæ•´é“¾å¼æ›´æ–°

åˆ é™¤å®¶æ—ï¼š
â””â”€ lambdaQuery().remove() â†’ æ¡ä»¶åˆ é™¤
```

---

## 2. âš™ï¸ queryé“¾å¼æŸ¥è¯¢



### 2.1 åŸºç¡€query()ç”¨æ³•



**æ ¸å¿ƒè¯­æ³•**ï¼š
```java
// query()è¿”å›QueryChainWrapperå¯¹è±¡ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨
userService.query()
    .æ¡ä»¶1()
    .æ¡ä»¶2()
    .ç»“æœå¤„ç†();
```

**ğŸ”¸ ç®€å•æŸ¥è¯¢ç¤ºä¾‹**ï¼š
```java
// ç¤ºä¾‹1ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº18å²çš„ç”¨æˆ·
List<User> adults = userService.query()
    .gt("age", 18)          // greater thanï¼šage > 18
    .list();                // è¿”å›List<User>

// ç¤ºä¾‹2ï¼šæŸ¥è¯¢åå­—åŒ…å«"å¼ "ä¸”æ€§åˆ«ä¸ºç”·çš„ç”¨æˆ·
List<User> users = userService.query()
    .like("name", "å¼ ")     // name LIKE '%å¼ %'
    .eq("gender", "ç”·")     // gender = 'ç”·'
    .list();

// ç¤ºä¾‹3ï¼šåˆ†é¡µæŸ¥è¯¢
Page<User> page = userService.query()
    .like("name", "æ")
    .page(new Page<>(1, 10)); // ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡
```

### 2.2 å¸¸ç”¨æ¡ä»¶æ–¹æ³•



**æ¡ä»¶æ–¹æ³•é€ŸæŸ¥**ï¼š

```java
// ç­‰å€¼åˆ¤æ–­
.eq("age", 18)              // age = 18
.ne("status", 0)            // status != 0 (not equal)

// èŒƒå›´åˆ¤æ–­
.gt("age", 18)              // age > 18 (greater than)
.ge("age", 18)              // age >= 18 (greater or equal)
.lt("age", 60)              // age < 60 (less than)
.le("age", 60)              // age <= 60 (less or equal)
.between("age", 18, 60)     // age BETWEEN 18 AND 60

// æ¨¡ç³ŠæŸ¥è¯¢
.like("name", "å¼ ")         // name LIKE '%å¼ %'
.likeLeft("name", "å¼ ")     // name LIKE '%å¼ '
.likeRight("name", "å¼ ")    // name LIKE 'å¼ %'

// ç©ºå€¼åˆ¤æ–­
.isNull("email")            // email IS NULL
.isNotNull("phone")         // phone IS NOT NULL

// é›†åˆåˆ¤æ–­
.in("id", Arrays.asList(1,2,3))  // id IN (1,2,3)
.notIn("status", 0, 1)           // status NOT IN (0,1)

// æ’åº
.orderByAsc("age")          // ORDER BY age ASC
.orderByDesc("create_time") // ORDER BY create_time DESC
```

### 2.3 ç»“æœå¤„ç†æ–¹æ³•



**ğŸ¯ è·å–ç»“æœçš„å¤šç§æ–¹å¼**ï¼š

```java
// 1. è·å–åˆ—è¡¨
List<User> list = userService.query()
    .eq("status", 1)
    .list();                    // è¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è®°å½•

// 2. è·å–å•ä¸ªå¯¹è±¡
User user = userService.query()
    .eq("id", 1)
    .one();                     // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¤šæ¡ä¼šæŠ¥é”™

// 3. è·å–æ•°é‡
long count = userService.query()
    .like("name", "å¼ ")
    .count();                   // è¿”å›ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°

// 4. åˆ†é¡µæŸ¥è¯¢
Page<User> page = userService.query()
    .gt("age", 18)
    .page(new Page<>(1, 10));   // è¿”å›åˆ†é¡µå¯¹è±¡

// 5. åªæŸ¥è¯¢éƒ¨åˆ†å­—æ®µ
List<Map<String, Object>> maps = userService.query()
    .select("id", "name")       // åªæŸ¥idå’Œnameå­—æ®µ
    .eq("status", 1)
    .listMaps();                // è¿”å›Mapé›†åˆ
```

**âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹**ï¼š

> **æ˜“é”™ç‚¹1ï¼šå­—æ®µåå†™é”™**
> ```java
> // âŒ é”™è¯¯ï¼šå­—æ®µåæ‹¼å†™é”™è¯¯ï¼Œè¿è¡Œæ—¶æ‰å‘ç°
> .eq("user_name", "å¼ ä¸‰")  // å®é™…å­—æ®µæ˜¯username
> 
> // âœ… æ­£ç¡®ï¼šä½¿ç”¨Lambdaé¿å…æ­¤é—®é¢˜ï¼ˆè§ä¸‹ä¸€èŠ‚ï¼‰
> .eq(User::getUsername, "å¼ ä¸‰")
> ```

> **æ˜“é”™ç‚¹2ï¼šone()æ–¹æ³•è¯¯ç”¨**
> ```java
> // âŒ é”™è¯¯ï¼šæŸ¥è¯¢ç»“æœæœ‰å¤šæ¡ï¼Œone()ä¼šæŠ›å¼‚å¸¸
> User user = userService.query()
>     .like("name", "å¼ ")
>     .one();  // å¦‚æœæœ‰å¤šä¸ªå§“å¼ çš„ï¼ŒæŠ¥é”™ï¼
> 
> // âœ… æ­£ç¡®ï¼šä½¿ç”¨list()æˆ–é™åˆ¶ç»“æœæ•°
> List<User> users = userService.query()
>     .like("name", "å¼ ")
>     .last("LIMIT 1")  // SQLæœ«å°¾åŠ LIMIT
>     .list();
> ```

---

## 3. ğŸ”’ lambdaQueryå®‰å…¨æŸ¥è¯¢



### 3.1 ä¸ºä»€ä¹ˆéœ€è¦LambdaæŸ¥è¯¢



**æ ¸å¿ƒé—®é¢˜**ï¼šä¼ ç»Ÿquery()ä½¿ç”¨å­—ç¬¦ä¸²å­—æ®µåï¼Œå®¹æ˜“å‡ºé”™ä¸”ä¸åˆ©äºé‡æ„

**å¯¹æ¯”ç¤ºä¾‹**ï¼š
```java
// åœºæ™¯ï¼šUserç±»çš„usernameå­—æ®µæ”¹åä¸ºloginName

// âŒ query()æ–¹å¼ï¼šéœ€è¦æ‰‹åŠ¨æŸ¥æ‰¾æ‰€æœ‰å­—ç¬¦ä¸²
userService.query()
    .eq("username", "å¼ ä¸‰")  // æ”¹ååè¿™é‡Œä¸ä¼šæŠ¥é”™ï¼Œä½†æŸ¥è¯¢ä¼šå¤±è´¥
    .list();

// âœ… lambdaQuery()æ–¹å¼ï¼šIDEè‡ªåŠ¨é‡æ„
userService.lambdaQuery()
    .eq(User::getUsername, "å¼ ä¸‰")  // æ”¹ååIDEä¼šæç¤ºï¼Œè‡ªåŠ¨é‡æ„
    .list();
```

### 3.2 lambdaQueryåŸºç¡€ç”¨æ³•



**æ ¸å¿ƒè¯­æ³•**ï¼š
```java
// æ–¹æ³•å¼•ç”¨æ ¼å¼ï¼šç±»å::æ–¹æ³•å
userService.lambdaQuery()
    .eq(User::getAge, 18)       // User::getAge æŒ‡å‘ getAge() æ–¹æ³•
    .like(User::getName, "å¼ ")  // User::getName æŒ‡å‘ getName() æ–¹æ³•
    .list();
```

**ğŸ”¸ æ–¹æ³•å¼•ç”¨åŸç†**ï¼š

```
æ–¹æ³•å¼•ç”¨è¡¨è¾¾å¼ï¼šUser::getAge

å·¥ä½œåŸç†ï¼š
1. MyBatis-Plusè§£æ User::getAge
2. è·å–getAgeæ–¹æ³•å¯¹åº”çš„å­—æ®µå â†’ age
3. ç”ŸæˆSQLï¼šWHERE age = 18

ç±»æ¯”ç†è§£ï¼š
â†’ å°±åƒé¥æ§å™¨çš„æŒ‰é’®ï¼Œä¸ç”¨è®°é¢‘é“å·ï¼ŒæŒ‰"CCTV1"æŒ‰é’®å°±è¡Œ
â†’ User::getAge å°±æ˜¯"ageå­—æ®µ"çš„æŒ‰é’®
```

### 3.3 LambdaæŸ¥è¯¢å®Œæ•´ç¤ºä¾‹



**å®æˆ˜åœºæ™¯ï¼šç”¨æˆ·æŸ¥è¯¢åŠŸèƒ½**

```java
@Service
public class UserService extends ServiceImpl<UserMapper, User> {
    
    // åœºæ™¯1ï¼šæŒ‰æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
    public List<User> searchUsers(String name, Integer minAge, Integer maxAge) {
        return this.lambdaQuery()
            // åŠ¨æ€æ¡ä»¶ï¼šnameä¸ä¸ºç©ºæ‰æŸ¥è¯¢
            .like(StringUtils.isNotBlank(name), User::getName, name)
            // å¹´é¾„èŒƒå›´
            .ge(minAge != null, User::getAge, minAge)  // age >= minAge
            .le(maxAge != null, User::getAge, maxAge)  // age <= maxAge
            // åªæŸ¥è¯¢æœ‰æ•ˆç”¨æˆ·
            .eq(User::getStatus, 1)
            // æŒ‰åˆ›å»ºæ—¶é—´å€’åº
            .orderByDesc(User::getCreateTime)
            .list();
    }
    
    // åœºæ™¯2ï¼šæŸ¥è¯¢å•ä¸ªç”¨æˆ·
    public User getUserByPhone(String phone) {
        return this.lambdaQuery()
            .eq(User::getPhone, phone)
            .one();  // æ‰‹æœºå·å”¯ä¸€ï¼Œç”¨one()
    }
    
    // åœºæ™¯3ï¼šç»Ÿè®¡æ•°é‡
    public long countAdults() {
        return this.lambdaQuery()
            .ge(User::getAge, 18)
            .count();
    }
    
    // åœºæ™¯4ï¼šåˆ†é¡µæŸ¥è¯¢
    public Page<User> pageUsers(int pageNum, int pageSize, String keyword) {
        return this.lambdaQuery()
            .like(StringUtils.isNotBlank(keyword), 
                  User::getName, keyword)
            .or()
            .like(StringUtils.isNotBlank(keyword), 
                  User::getPhone, keyword)
            .orderByDesc(User::getCreateTime)
            .page(new Page<>(pageNum, pageSize));
    }
}
```

### 3.4 LambdaæŸ¥è¯¢çš„é«˜çº§ç‰¹æ€§



**ğŸ¯ ç‰¹æ€§1ï¼šæ¡ä»¶åˆ¤æ–­**

```java
// è¯­æ³•ï¼š.æ¡ä»¶æ–¹æ³•(boolean condition, å­—æ®µ, å€¼)
// conditionä¸ºtrueæ—¶æ‰æ‹¼æ¥è¯¥æ¡ä»¶

String name = "å¼ ä¸‰";  // å¯èƒ½ä¸ºnullæˆ–ç©º
Integer age = null;

List<User> users = userService.lambdaQuery()
    // nameä¸ä¸ºç©ºæ‰æŸ¥è¯¢
    .like(StringUtils.isNotBlank(name), User::getName, name)
    // ageä¸ä¸ºnullæ‰æŸ¥è¯¢
    .eq(age != null, User::getAge, age)
    .list();

// ç­‰ä»·SQLï¼ˆæ ¹æ®å‚æ•°åŠ¨æ€ç”Ÿæˆï¼‰ï¼š
// å¦‚æœname="å¼ ä¸‰", age=null â†’ WHERE name LIKE '%å¼ ä¸‰%'
// å¦‚æœname=null, age=18 â†’ WHERE age = 18
// å¦‚æœéƒ½æœ‰å€¼ â†’ WHERE name LIKE '%å¼ ä¸‰%' AND age = 18
```

**ğŸ¯ ç‰¹æ€§2ï¼šORæ¡ä»¶**

```java
// æŸ¥è¯¢ï¼šnameåŒ…å«"å¼ " æˆ–è€… age=18
List<User> users = userService.lambdaQuery()
    .like(User::getName, "å¼ ")
    .or()  // å…³é”®ï¼šè¿æ¥ORæ¡ä»¶
    .eq(User::getAge, 18)
    .list();
// SQL: WHERE name LIKE '%å¼ %' OR age = 18

// å¤æ‚ORï¼š(nameåŒ…å«"å¼ " AND age>18) OR (status=1)
List<User> users = userService.lambdaQuery()
    .and(w -> w.like(User::getName, "å¼ ")
               .gt(User::getAge, 18))
    .or()
    .eq(User::getStatus, 1)
    .list();
```

**ğŸ¯ ç‰¹æ€§3ï¼šåµŒå¥—æŸ¥è¯¢**

```java
// æŸ¥è¯¢ï¼š(age>18 AND gender='ç”·') OR (vip=true)
List<User> users = userService.lambdaQuery()
    .nested(w -> w.gt(User::getAge, 18)
                  .eq(User::getGender, "ç”·"))
    .or()
    .eq(User::getVip, true)
    .list();
// SQL: WHERE (age > 18 AND gender = 'ç”·') OR vip = true
```

---

## 4. ğŸ—ï¸ é“¾å¼APIè®¾è®¡åŸç†



### 4.1 æµç•…æ¥å£æ¨¡å¼ï¼ˆFluent Interfaceï¼‰



**è®¾è®¡æ€æƒ³**ï¼š
```
æ ¸å¿ƒç†å¿µï¼šè®©ä»£ç è¯»èµ·æ¥åƒè‡ªç„¶è¯­è¨€

ä¼ ç»ŸAPIï¼š
setName("å¼ ä¸‰");
setAge(18);
setGender("ç”·");

æµç•…æ¥å£ï¼š
user.setName("å¼ ä¸‰").setAge(18).setGender("ç”·");
â†’ è¯»èµ·æ¥åƒï¼šè®¾ç½®åå­—ä¸ºå¼ ä¸‰ï¼Œè®¾ç½®å¹´é¾„ä¸º18ï¼Œè®¾ç½®æ€§åˆ«ä¸ºç”·
```

**å®ç°åŸç†**ï¼š
```java
// é“¾å¼è°ƒç”¨çš„ç§˜å¯†ï¼šæ–¹æ³•è¿”å›thisï¼ˆè‡ªèº«å¯¹è±¡ï¼‰

public class QueryChainWrapper<T> {
    
    // æ¯ä¸ªæ–¹æ³•éƒ½è¿”å›thisï¼Œæ”¯æŒé“¾å¼è°ƒç”¨
    public QueryChainWrapper<T> eq(String column, Object val) {
        // æ·»åŠ ç­‰å€¼æ¡ä»¶
        addCondition("=", column, val);
        return this;  // è¿”å›è‡ªå·±ï¼Œç»§ç»­é“¾å¼
    }
    
    public QueryChainWrapper<T> like(String column, Object val) {
        addCondition("LIKE", column, val);
        return this;  // è¿”å›è‡ªå·±
    }
    
    public List<T> list() {
        // æœ€ç»ˆæ‰§è¡ŒæŸ¥è¯¢
        return executeQuery();
    }
}

// ä½¿ç”¨æ—¶ï¼š
query().eq("age", 18).like("name", "å¼ ").list();
//  â†“        â†“            â†“              â†“
// å¯¹è±¡A  è¿”å›A(this)   è¿”å›A(this)   æ‰§è¡ŒæŸ¥è¯¢
```

### 4.2 é“¾å¼APIçš„è®¾è®¡ä¼˜åŠ¿



**ä»£ç å¯è¯»æ€§å¯¹æ¯”**ï¼š

```java
// åœºæ™¯ï¼šæŸ¥è¯¢å¹´é¾„18-60å²ã€å§“å¼ ã€çŠ¶æ€æ­£å¸¸ã€VIPç”¨æˆ·ï¼ŒæŒ‰æ—¶é—´å€’åº

// âŒ ä¼ ç»Ÿæ–¹å¼ï¼šé€»è¾‘åˆ†æ•£
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.between("age", 18, 60);
wrapper.like("name", "å¼ ");
wrapper.eq("status", 1);
wrapper.eq("vip", true);
wrapper.orderByDesc("create_time");
List<User> users = userMapper.selectList(wrapper);
// é—®é¢˜ï¼š6è¡Œä»£ç ï¼Œé€»è¾‘åˆ†æ•£ï¼Œéš¾ä»¥ä¸€çœ¼çœ‹å‡ºæŸ¥è¯¢æ„å›¾

// âœ… é“¾å¼æ–¹å¼ï¼šé€»è¾‘è¿è´¯
List<User> users = userService.lambdaQuery()
    .between(User::getAge, 18, 60)
    .like(User::getName, "å¼ ")
    .eq(User::getStatus, 1)
    .eq(User::getVip, true)
    .orderByDesc(User::getCreateTime)
    .list();
// ä¼˜åŠ¿ï¼šé€»è¾‘åƒå¥å­ä¸€æ ·æµç•…ï¼Œä¸€çœ¼çœ‹å‡º"æŸ¥è¯¢18-60å²å§“å¼ çš„æ­£å¸¸VIPç”¨æˆ·"
```

**ç±»å‹å®‰å…¨ç¤ºæ„**ï¼š

```
ä¼ ç»Ÿæ–¹å¼çš„éšæ‚£ï¼š
wrapper.eq("user_name", "å¼ ä¸‰");  â† å­—æ®µåæ‹¼é”™
wrapper.gt("user_age", "18");     â† ç±»å‹é”™è¯¯ï¼ˆåº”è¯¥æ˜¯Integerï¼‰
è¿è¡Œæ—¶æ‰å‘ç°é”™è¯¯ â†’ ğŸ˜±

Lambdaæ–¹å¼çš„ä¿æŠ¤ï¼š
.eq(User::getUserName, "å¼ ä¸‰")    â† IDEä¼šæç¤ºæ–¹æ³•ä¸å­˜åœ¨
.gt(User::getUserAge, "18")       â† ç¼–è¯‘æŠ¥é”™ï¼ˆç±»å‹ä¸åŒ¹é…ï¼‰
ç¼–è¯‘æœŸå°±å‘ç°é—®é¢˜ â†’ ğŸ˜Š
```

---

## 5. ğŸ”— æ¡ä»¶æ„é€ é“¾å¼æ“ä½œ



### 5.1 å¤æ‚æ¡ä»¶ç»„è£…



**ANDæ¡ä»¶ç»„åˆ**ï¼š
```java
// åœºæ™¯ï¼šæŸ¥è¯¢å¹´é¾„18-30å² ä¸” (å§“å¼  æˆ– å§“æ) çš„ç”¨æˆ·

List<User> users = userService.lambdaQuery()
    // æ¡ä»¶1ï¼šå¹´é¾„èŒƒå›´
    .between(User::getAge, 18, 30)
    // æ¡ä»¶2ï¼šå§“å¼ æˆ–å§“æï¼ˆä½¿ç”¨andåµŒå¥—ï¼‰
    .and(w -> w.like(User::getName, "å¼ ")
               .or()
               .like(User::getName, "æ"))
    .list();

// ç”ŸæˆSQLï¼š
// WHERE age BETWEEN 18 AND 30 
//   AND (name LIKE '%å¼ %' OR name LIKE '%æ%')
```

**ORæ¡ä»¶ç»„åˆ**ï¼š
```java
// åœºæ™¯ï¼šVIPç”¨æˆ· æˆ– æ¶ˆè´¹æ»¡1000å…ƒçš„ç”¨æˆ·

List<User> users = userService.lambdaQuery()
    .eq(User::getVip, true)
    .or()
    .ge(User::getTotalAmount, 1000)
    .list();

// SQL: WHERE vip = true OR total_amount >= 1000
```

### 5.2 åŠ¨æ€æ¡ä»¶æ„å»º



**å®æˆ˜åœºæ™¯ï¼šæœç´¢åŠŸèƒ½**

```java
// ç”¨æˆ·æœç´¢ï¼šå¯èƒ½æœ‰å¤šä¸ªå¯é€‰æ¡ä»¶
public List<User> searchUsers(UserSearchDTO dto) {
    return this.lambdaQuery()
        // åå­—æ¡ä»¶ï¼ˆå¯é€‰ï¼‰
        .like(StringUtils.isNotBlank(dto.getName()), 
              User::getName, dto.getName())
        // å¹´é¾„èŒƒå›´ï¼ˆå¯é€‰ï¼‰
        .ge(dto.getMinAge() != null, 
            User::getAge, dto.getMinAge())
        .le(dto.getMaxAge() != null, 
            User::getAge, dto.getMaxAge())
        // æ€§åˆ«æ¡ä»¶ï¼ˆå¯é€‰ï¼‰
        .eq(dto.getGender() != null, 
            User::getGender, dto.getGender())
        // æ³¨å†Œæ—¶é—´èŒƒå›´ï¼ˆå¯é€‰ï¼‰
        .between(dto.getStartTime() != null && dto.getEndTime() != null,
                User::getCreateTime, dto.getStartTime(), dto.getEndTime())
        // å›ºå®šæ¡ä»¶ï¼šåªæŸ¥è¯¢æœ‰æ•ˆç”¨æˆ·
        .eq(User::getStatus, 1)
        .orderByDesc(User::getCreateTime)
        .list();
}

// ä¼˜åŠ¿ï¼šæ ¹æ®ä¼ å…¥å‚æ•°åŠ¨æ€ç”ŸæˆSQLï¼Œä¸ç”¨å†™if-else
```

### 5.3 åˆ†ç»„ä¸å»é‡



**åˆ†ç»„æŸ¥è¯¢ç¤ºä¾‹**ï¼š
```java
// åœºæ™¯ï¼šç»Ÿè®¡æ¯ä¸ªåŸå¸‚çš„ç”¨æˆ·æ•°é‡

// æ–¹å¼1ï¼šä½¿ç”¨åŸç”ŸSQL
List<Map<String, Object>> cityStats = userService.listMaps(
    Wrappers.lambdaQuery(User.class)
        .select(User::getCity, "COUNT(*) as count")
        .groupBy(User::getCity)
);

// æ–¹å¼2ï¼šè‡ªå®šä¹‰SQLï¼ˆæ¨èå¤æ‚ç»Ÿè®¡ï¼‰
@Select("SELECT city, COUNT(*) as user_count FROM user GROUP BY city")
List<CityStatVO> getCityStats();
```

**å»é‡æŸ¥è¯¢**ï¼š
```java
// æŸ¥è¯¢æ‰€æœ‰ä¸åŒçš„åŸå¸‚ï¼ˆå»é‡ï¼‰
List<String> cities = userService.lambdaQuery()
    .select(User::getCity)
    .list()
    .stream()
    .map(User::getCity)
    .distinct()
    .collect(Collectors.toList());
```

---

## 6. ğŸ“Š æŸ¥è¯¢ç»“æœå¤„ç†



### 6.1 å¤šç§ç»“æœæ ¼å¼



**ç»“æœå¤„ç†æ–¹æ³•å¯¹æ¯”**ï¼š

| æ–¹æ³• | **è¿”å›ç±»å‹** | **é€‚ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|------|------------|------------|---------|
| `list()` | `List<T>` | `æŸ¥è¯¢å¤šæ¡è®°å½•` | `userService.lambdaQuery().list()` |
| `one()` | `T` | `æŸ¥è¯¢å•æ¡è®°å½•` | `userService.lambdaQuery().eq(User::getId,1).one()` |
| `count()` | `long` | `ç»Ÿè®¡æ•°é‡` | `userService.lambdaQuery().like(User::getName,"å¼ ").count()` |
| `page()` | `Page<T>` | `åˆ†é¡µæŸ¥è¯¢` | `userService.lambdaQuery().page(new Page<>(1,10))` |
| `listMaps()` | `List<Map>` | `æŸ¥è¯¢æŒ‡å®šå­—æ®µ` | `userService.lambdaQuery().select(...).listMaps()` |

### 6.2 åˆ†é¡µæŸ¥è¯¢è¯¦è§£



**åˆ†é¡µæŸ¥è¯¢å®Œæ•´æµç¨‹**ï¼š

```java
// æ­¥éª¤1ï¼šæ¥æ”¶å‰ç«¯åˆ†é¡µå‚æ•°
@GetMapping("/users/page")
public Result pageUsers(
    @RequestParam(defaultValue = "1") int pageNum,
    @RequestParam(defaultValue = "10") int pageSize,
    String keyword
) {
    // æ­¥éª¤2ï¼šæ„å»ºåˆ†é¡µå¯¹è±¡
    Page<User> page = new Page<>(pageNum, pageSize);
    
    // æ­¥éª¤3ï¼šé“¾å¼æŸ¥è¯¢ + åˆ†é¡µ
    Page<User> result = userService.lambdaQuery()
        .like(StringUtils.isNotBlank(keyword), 
              User::getName, keyword)
        .orderByDesc(User::getCreateTime)
        .page(page);  // ä¼ å…¥åˆ†é¡µå¯¹è±¡
    
    // æ­¥éª¤4ï¼šè¿”å›åˆ†é¡µç»“æœ
    return Result.ok(result);
}

// è¿”å›çš„Pageå¯¹è±¡åŒ…å«ï¼š
// result.getRecords()  â†’ å½“å‰é¡µæ•°æ® List<User>
// result.getTotal()    â†’ æ€»è®°å½•æ•°
// result.getCurrent()  â†’ å½“å‰é¡µç 
// result.getSize()     â†’ æ¯é¡µå¤§å°
```

**åˆ†é¡µç»“æœå¤„ç†**ï¼š
```java
Page<User> page = userService.lambdaQuery()
    .like(User::getName, "å¼ ")
    .page(new Page<>(1, 10));

// è·å–åˆ†é¡µä¿¡æ¯
List<User> users = page.getRecords();      // å½“å‰é¡µæ•°æ®
long total = page.getTotal();              // æ€»è®°å½•æ•°
long pages = page.getPages();              // æ€»é¡µæ•°
long current = page.getCurrent();          // å½“å‰é¡µç 
long size = page.getSize();                // æ¯é¡µå¤§å°

System.out.println("å…±" + total + "æ¡è®°å½•ï¼Œå½“å‰ç¬¬" + current + "é¡µ");
```

### 6.3 ç»“æœè½¬æ¢å¤„ç†



**åœºæ™¯1ï¼šå®ä½“è½¬VOï¼ˆè§†å›¾å¯¹è±¡ï¼‰**

```java
// Userå®ä½“ â†’ UserVOï¼ˆå‰ç«¯éœ€è¦çš„æ ¼å¼ï¼‰
public List<UserVO> getUserVOList(String keyword) {
    return userService.lambdaQuery()
        .like(StringUtils.isNotBlank(keyword), 
              User::getName, keyword)
        .list()
        .stream()
        .map(user -> {
            UserVO vo = new UserVO();
            vo.setId(user.getId());
            vo.setName(user.getName());
            vo.setAge(user.getAge());
            // é¢å¤–å¤„ç†ï¼šæ€§åˆ«è½¬æ¢
            vo.setGenderText(user.getGender() == 1 ? "ç”·" : "å¥³");
            return vo;
        })
        .collect(Collectors.toList());
}
```

**åœºæ™¯2ï¼šåªæŸ¥è¯¢éƒ¨åˆ†å­—æ®µ**

```java
// åªéœ€è¦idå’Œnameï¼Œä¸æŸ¥è¯¢å…¨éƒ¨å­—æ®µ
List<User> simpleUsers = userService.lambdaQuery()
    .select(User::getId, User::getName)  // åªæŸ¥è¿™ä¸¤ä¸ªå­—æ®µ
    .eq(User::getStatus, 1)
    .list();

// æˆ–è€…ç”¨Mapæ¥æ”¶
List<Map<String, Object>> maps = userService.lambdaQuery()
    .select(User::getId, User::getName)
    .listMaps();  // è¿”å› [{id=1, name="å¼ ä¸‰"}, {id=2, name="æå››"}]
```

**åœºæ™¯3ï¼šç»“æœèšåˆå¤„ç†**

```java
// æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„å¹³å‡å¹´é¾„
Double avgAge = userService.lambdaQuery()
    .list()
    .stream()
    .mapToInt(User::getAge)
    .average()
    .orElse(0.0);

// åˆ†ç»„ç»Ÿè®¡ï¼šæŒ‰æ€§åˆ«ç»Ÿè®¡äººæ•°
Map<Integer, Long> genderCount = userService.lambdaQuery()
    .list()
    .stream()
    .collect(Collectors.groupingBy(
        User::getGender,
        Collectors.counting()
    ));
// ç»“æœï¼š{1=50, 2=30} â†’ ç”·50äººï¼Œå¥³30äºº
```

### 6.4 æ€§èƒ½ä¼˜åŒ–æŠ€å·§



**ä¼˜åŒ–1ï¼šé¿å…æŸ¥è¯¢å…¨éƒ¨å­—æ®µ**
```java
// âŒ ä¸æ¨èï¼šæŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆåŒ…æ‹¬å¤§å­—æ®µï¼‰
List<User> users = userService.lambdaQuery()
    .eq(User::getStatus, 1)
    .list();  // SELECT * FROM user

// âœ… æ¨èï¼šåªæŸ¥éœ€è¦çš„å­—æ®µ
List<User> users = userService.lambdaQuery()
    .select(User::getId, User::getName, User::getAge)
    .eq(User::getStatus, 1)
    .list();  // SELECT id, name, age FROM user
```

**ä¼˜åŒ–2ï¼šä½¿ç”¨count()è€Œélist().size()**
```java
// âŒ ä¸æ¨èï¼šæŸ¥è¯¢æ‰€æœ‰æ•°æ®å†è®¡æ•°
int count = userService.lambdaQuery()
    .like(User::getName, "å¼ ")
    .list().size();  // æŸ¥è¯¢æ‰€æœ‰è®°å½•ï¼Œæµªè´¹å†…å­˜

// âœ… æ¨èï¼šç›´æ¥count
long count = userService.lambdaQuery()
    .like(User::getName, "å¼ ")
    .count();  // SELECT COUNT(*) FROM userï¼Œåªè¿”å›æ•°é‡
```

**ä¼˜åŒ–3ï¼šåˆ†é¡µæŸ¥è¯¢é¿å…æ·±åº¦åˆ†é¡µ**
```java
// âŒ æ·±åº¦åˆ†é¡µæ€§èƒ½å·®
Page<User> page = userService.lambdaQuery()
    .orderByDesc(User::getCreateTime)
    .page(new Page<>(1000, 10));  // ç¬¬1000é¡µï¼Œéœ€è¦è·³è¿‡9990æ¡

// âœ… ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼ˆè®°å½•ä¸Šæ¬¡æœ€åä¸€æ¡çš„IDï¼‰
List<User> users = userService.lambdaQuery()
    .gt(User::getId, lastId)  // ä»ä¸Šæ¬¡æœ€åçš„IDå¼€å§‹
    .orderByAsc(User::getId)
    .last("LIMIT 10")
    .list();
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ é“¾å¼è°ƒç”¨æœ¬è´¨ï¼šæ–¹æ³•è¿”å›è‡ªèº«å¯¹è±¡ï¼Œå®ç°è¿ç»­è°ƒç”¨
ğŸ”¸ query() vs lambdaQuery()ï¼šå­—ç¬¦ä¸²å­—æ®µ vs æ–¹æ³•å¼•ç”¨
ğŸ”¸ Lambdaä¼˜åŠ¿ï¼šç±»å‹å®‰å…¨ã€é‡æ„å‹å¥½ã€ç¼–è¯‘æ£€æŸ¥
ğŸ”¸ ç»“æœå¤„ç†ï¼šlist/one/count/page/listMaps å¤šç§æ ¼å¼
ğŸ”¸ åŠ¨æ€æ¡ä»¶ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ§åˆ¶æ˜¯å¦æ‹¼æ¥æ¡ä»¶
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ ä¸ºä»€ä¹ˆé“¾å¼è°ƒç”¨æ›´å¥½ç”¨**
```
ä»£ç å¯¹æ¯”ï¼š
ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦7-8è¡Œä»£ç ï¼Œé€»è¾‘åˆ†æ•£
é“¾å¼æ–¹å¼ï¼š1è¡Œä»£ç ï¼Œé€»è¾‘è¿è´¯ï¼Œåƒè¯»ä¸€å¥è¯

ç±»æ¯”ç†è§£ï¼š
ä¼ ç»Ÿæ–¹å¼ = åˆ†æ­¥åšèœï¼šåˆ‡èœã€ç‚’èœã€è£…ç›˜
é“¾å¼æ–¹å¼ = æµæ°´çº¿ï¼šä¸€æ°”å‘µæˆå®Œæˆæ‰€æœ‰æ­¥éª¤
```

**ğŸ”¹ LambdaæŸ¥è¯¢çš„æ ¸å¿ƒä»·å€¼**
```
ç±»å‹å®‰å…¨ï¼š
.eq(User::getAge, 18)  â† å†™é”™æ–¹æ³•åç›´æ¥æŠ¥é”™
.eq("age", 18)         â† å†™é”™å­—ç¬¦ä¸²è¿è¡Œæ‰çŸ¥é“

é‡æ„å‹å¥½ï¼š
å­—æ®µæ”¹ååï¼ŒLambdaä¼šè‡ªåŠ¨æ›´æ–°
å­—ç¬¦ä¸²éœ€è¦æ‰‹åŠ¨æŸ¥æ‰¾æ›¿æ¢ï¼Œå®¹æ˜“é—æ¼
```

**ğŸ”¹ åŠ¨æ€æ¡ä»¶çš„å¦™ç”¨**
```
è¯­æ³•ï¼š.æ¡ä»¶æ–¹æ³•(boolean, å­—æ®µ, å€¼)

ä¼˜åŠ¿ï¼š
ä¸ç”¨å†™ if (name != null) { wrapper.like("name", name); }
ç›´æ¥å†™ .like(name != null, User::getName, name)
ä»£ç æ›´ç®€æ´ï¼Œé€»è¾‘æ›´æ¸…æ™°
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼



**åº”ç”¨åœºæ™¯æ€»ç»“**ï¼š

```
ğŸ¯ åœºæ™¯1ï¼šå¤æ‚æŸ¥è¯¢
é—®é¢˜ï¼šå¤šæ¡ä»¶ã€åŠ¨æ€æ¡ä»¶ã€åµŒå¥—æ¡ä»¶
æ–¹æ¡ˆï¼šlambdaQuery() + æ¡ä»¶åˆ¤æ–­ + é€»è¾‘åµŒå¥—
ç¤ºä¾‹ï¼šç”¨æˆ·æœç´¢ã€å•†å“ç­›é€‰ã€è®¢å•æŸ¥è¯¢

ğŸ¯ åœºæ™¯2ï¼šåˆ†é¡µåˆ—è¡¨
é—®é¢˜ï¼šå‰ç«¯éœ€è¦åˆ†é¡µæ•°æ®
æ–¹æ¡ˆï¼špage() + Pageå¯¹è±¡
ç¤ºä¾‹ï¼šç”¨æˆ·åˆ—è¡¨ã€æ–‡ç« åˆ—è¡¨ã€è¯„è®ºåˆ—è¡¨

ğŸ¯ åœºæ™¯3ï¼šæ•°æ®ç»Ÿè®¡
é—®é¢˜ï¼šéœ€è¦ç»Ÿè®¡æ•°é‡ã€åˆ†ç»„æ±‡æ€»
æ–¹æ¡ˆï¼šcount() + groupBy() + Streamèšåˆ
ç¤ºä¾‹ï¼šé”€å”®ç»Ÿè®¡ã€ç”¨æˆ·åˆ†æã€æ•°æ®æŠ¥è¡¨

ğŸ¯ åœºæ™¯4ï¼šæ€§èƒ½ä¼˜åŒ–
é—®é¢˜ï¼šæŸ¥è¯¢æ…¢ã€å†…å­˜å ç”¨é«˜
æ–¹æ¡ˆï¼šselectæŒ‡å®šå­—æ®µ + countä»£æ›¿list().size()
ç¤ºä¾‹ï¼šåˆ—è¡¨ä¼˜åŒ–ã€æ¥å£åŠ é€Ÿã€èµ„æºèŠ‚çœ
```

### 7.4 æœ€ä½³å®è·µå»ºè®®



**âœ… æ¨èåšæ³•**ï¼š
```java
// 1. ä¼˜å…ˆä½¿ç”¨lambdaQuery()
userService.lambdaQuery()  // è€Œéquery()
    .eq(User::getAge, 18)
    .list();

// 2. åŠ¨æ€æ¡ä»¶ç”¨æ¡ä»¶åˆ¤æ–­
.like(StringUtils.isNotBlank(name), User::getName, name)

// 3. å¤æ‚é€»è¾‘ç”¨åµŒå¥—
.and(w -> w.like(User::getName, "å¼ ").or().like(User::getName, "æ"))

// 4. åªæŸ¥éœ€è¦çš„å­—æ®µ
.select(User::getId, User::getName)

// 5. ç»Ÿè®¡ç”¨count()
.count()  // è€Œé.list().size()
```

**âŒ é¿å…åšæ³•**ï¼š
```java
// 1. é¿å…æ··ç”¨query()å’ŒlambdaQuery()
// ä¿æŒé£æ ¼ç»Ÿä¸€

// 2. é¿å…æ·±åº¦åˆ†é¡µ
new Page<>(1000, 10)  // æ€§èƒ½å·®

// 3. é¿å…åœ¨å¾ªç¯ä¸­æŸ¥è¯¢
for (User user : users) {
    // é¿å…åœ¨è¿™é‡ŒæŸ¥æ•°æ®åº“
}

// 4. é¿å…æŸ¥è¯¢æ‰€æœ‰å­—æ®µååªç”¨éƒ¨åˆ†
.list()  // æŸ¥äº†æ‰€æœ‰å­—æ®µ
.stream().map(User::getId)  // åªç”¨äº†ID
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
é“¾å¼è°ƒç”¨åƒå¥å­ï¼Œæ–¹æ³•è¿”å›æ˜¯è‡ªå·±
Lambdaå®‰å…¨ç±»å‹å¼ºï¼Œå­—æ®µæ”¹åä¸ç”¨æ…Œ  
åŠ¨æ€æ¡ä»¶åˆ¤æ–­åŠ ï¼Œå¤æ‚é€»è¾‘åµŒå¥—æ­
ç»“æœå¤„ç†é€‰å¯¹æ³•ï¼Œæ€§èƒ½ä¼˜åŒ–è¦è®°ç‰¢
```

---

# ğŸ“ å­¦ä¹ æ£€æŸ¥æ¸…å•



**âœ… å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼Œè¯´æ˜ä½ å·²æŒæ¡é“¾å¼æŸ¥è¯¢**ï¼š

- [ ] èƒ½å†™å‡ºåŸºç¡€çš„query()é“¾å¼æŸ¥è¯¢
- [ ] ç†è§£lambdaQuery()çš„ä¼˜åŠ¿ï¼ŒçŸ¥é“ä¸ºä»€ä¹ˆç”¨å®ƒ
- [ ] èƒ½ä½¿ç”¨åŠ¨æ€æ¡ä»¶å®ç°æœç´¢åŠŸèƒ½  
- [ ] æŒæ¡AND/ORæ¡ä»¶çš„åµŒå¥—å†™æ³•
- [ ] èƒ½æ­£ç¡®ä½¿ç”¨list/one/count/pageç­‰ç»“æœæ–¹æ³•
- [ ] çŸ¥é“å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼ˆselectæŒ‡å®šå­—æ®µã€é¿å…æ·±åº¦åˆ†é¡µï¼‰
- [ ] èƒ½å°†æŸ¥è¯¢ç»“æœè½¬æ¢ä¸ºVOå¯¹è±¡

**ğŸ’¡ å­¦ä¹ å»ºè®®**ï¼š
1. å…ˆç†è§£é“¾å¼è°ƒç”¨çš„åŸç†ï¼ˆè¿”å›thisï¼‰
2. ä»ç®€å•çš„eq/likeå¼€å§‹ç»ƒä¹ 
3. é€æ­¥æŒæ¡å¤æ‚çš„åµŒå¥—æ¡ä»¶
4. åœ¨å®é™…é¡¹ç›®ä¸­å¤šç”¨lambdaQuery()
5. å…³æ³¨æ€§èƒ½ä¼˜åŒ–æŠ€å·§

