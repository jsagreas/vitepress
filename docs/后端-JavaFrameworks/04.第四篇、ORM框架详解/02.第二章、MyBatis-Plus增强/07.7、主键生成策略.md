---
title: 7ã€ä¸»é”®ç”Ÿæˆç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [ä¸»é”®ç”Ÿæˆç­–ç•¥æ¦‚è¿°](#1-ä¸»é”®ç”Ÿæˆç­–ç•¥æ¦‚è¿°)
2. [IdTypeæšä¸¾ç±»å‹è¯¦è§£](#2-IdTypeæšä¸¾ç±»å‹è¯¦è§£)
3. [AUTOè‡ªå¢ä¸»é”®](#3-AUTOè‡ªå¢ä¸»é”®)
4. [ASSIGN_IDé›ªèŠ±ç®—æ³•](#4-ASSIGN_IDé›ªèŠ±ç®—æ³•)
5. [ASSIGN_UUIDå”¯ä¸€æ ‡è¯†](#5-ASSIGN_UUIDå”¯ä¸€æ ‡è¯†)
6. [INPUTæ‰‹åŠ¨è¾“å…¥](#6-INPUTæ‰‹åŠ¨è¾“å…¥)
7. [åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆ](#7-åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆ)
8. [è‡ªå®šä¹‰ä¸»é”®ç­–ç•¥](#8-è‡ªå®šä¹‰ä¸»é”®ç­–ç•¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä¸»é”®ç”Ÿæˆç­–ç•¥æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ä¸»é”®ç”Ÿæˆç­–ç•¥


**é€šä¿—ç†è§£**ï¼šä¸»é”®å°±åƒæ˜¯æ¯æ¡æ•°æ®çš„"èº«ä»½è¯å·"ï¼Œè€Œä¸»é”®ç”Ÿæˆç­–ç•¥å°±æ˜¯å†³å®šè¿™ä¸ª"èº«ä»½è¯å·"æ€ä¹ˆäº§ç”Ÿçš„è§„åˆ™ã€‚

```
æ¯”å¦‚å­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼š
å­¦ç”ŸAï¼šå­¦å· 2024001ï¼ˆè‡ªåŠ¨é€’å¢ï¼‰
å­¦ç”ŸBï¼šå­¦å· 2024002ï¼ˆè‡ªåŠ¨é€’å¢ï¼‰
å­¦ç”ŸCï¼šå­¦å· UUID-xxxxï¼ˆéšæœºç”Ÿæˆï¼‰

ä¸åŒçš„åœºæ™¯éœ€è¦ä¸åŒçš„ç”Ÿæˆæ–¹å¼
```

**ä¸ºä»€ä¹ˆéœ€è¦ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Ÿ**

```
âŒ æ²¡æœ‰ç­–ç•¥çš„é—®é¢˜ï¼š
- æ‰‹åŠ¨è¾“å…¥å®¹æ˜“é‡å¤
- å¤šäººåŒæ—¶æ“ä½œå¯èƒ½å†²çª
- åˆ†å¸ƒå¼ç³»ç»Ÿæ— æ³•ä¿è¯å”¯ä¸€æ€§

âœ… æœ‰äº†ç­–ç•¥çš„å¥½å¤„ï¼š
- è‡ªåŠ¨ç”Ÿæˆï¼Œä¸ç”¨æ“å¿ƒ
- ä¿è¯å”¯ä¸€æ€§ï¼Œä¸ä¼šé‡å¤
- é€‚é…ä¸åŒåœºæ™¯éœ€æ±‚
```

### 1.2 MyBatis-Plusä¸­çš„ä½¿ç”¨åœºæ™¯


**å®ä½“ç±»ä¸­çš„ä¸»é”®æ ‡è¯†**ï¼š

```java
@TableName("user")
public class User {
    @TableId(type = IdType.AUTO)  // æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥
    private Long id;
    
    private String name;
    private Integer age;
}
```

**ä½¿ç”¨æ—¶æœºè¯´æ˜**ï¼š

| åœºæ™¯ | æ¨èç­–ç•¥ | åŸå›  |
|------|---------|------|
| å•ä½“åº”ç”¨ + MySQL | `AUTO` | æ•°æ®åº“è‡ªå¢ç®€å•é«˜æ•ˆ |
| åˆ†å¸ƒå¼ç³»ç»Ÿ | `ASSIGN_ID` | é›ªèŠ±ç®—æ³•å…¨å±€å”¯ä¸€ |
| éœ€è¦å­—ç¬¦ä¸²ID | `ASSIGN_UUID` | UUIDå­—ç¬¦ä¸²æ ‡è¯† |
| å¤–éƒ¨ç³»ç»Ÿå¯¹æ¥ | `INPUT` | ä½¿ç”¨å¤–éƒ¨ä¼ å…¥çš„ID |

---

## 2. ğŸ“‹ IdTypeæšä¸¾ç±»å‹è¯¦è§£


### 2.1 IdTypeæ˜¯ä»€ä¹ˆ


**ç®€å•ç†è§£**ï¼šIdTypeå°±æ˜¯MyBatis-Plusæä¾›çš„"ä¸»é”®ç”Ÿæˆç­–ç•¥èœå•"ï¼Œé‡Œé¢åˆ—å‡ºäº†æ‰€æœ‰å¯é€‰çš„ç”Ÿæˆæ–¹å¼ã€‚

```
å°±åƒç‚¹é¤ï¼š
IdType.AUTO      â†’ æˆ‘è¦è‡ªå¢å¥—é¤
IdType.ASSIGN_ID â†’ æˆ‘è¦é›ªèŠ±ç®—æ³•å¥—é¤
IdType.ASSIGN_UUID â†’ æˆ‘è¦UUIDå¥—é¤
IdType.INPUT     â†’ æˆ‘è‡ªå·±å¸¦é¥­ï¼ˆæ‰‹åŠ¨è¾“å…¥ï¼‰
```

### 2.2 æ‰€æœ‰IdTypeç±»å‹å¯¹ç…§


```java
public enum IdType {
    AUTO(0),          // æ•°æ®åº“è‡ªå¢
    NONE(1),          // æ— ç­–ç•¥ï¼ˆå·²å¼ƒç”¨ï¼‰
    INPUT(2),         // æ‰‹åŠ¨è¾“å…¥
    ASSIGN_ID(3),     // é›ªèŠ±ç®—æ³•ï¼ˆé»˜è®¤ï¼‰
    ASSIGN_UUID(4);   // UUIDç”Ÿæˆ
}
```

**ç±»å‹ç‰¹ç‚¹å¯¹æ¯”**ï¼š

| IdType | ç”Ÿæˆæ–¹å¼ | IDç±»å‹ | é€‚ç”¨åœºæ™¯ | æ€§èƒ½ |
|--------|---------|--------|---------|------|
| **AUTO** | `æ•°æ®åº“è‡ªå¢` | Long | å•æœºMySQL | â­â­â­â­â­ |
| **ASSIGN_ID** | `é›ªèŠ±ç®—æ³•` | Long | åˆ†å¸ƒå¼ç³»ç»Ÿ | â­â­â­â­ |
| **ASSIGN_UUID** | `UUIDç®—æ³•` | String | éœ€è¦å­—ç¬¦ä¸²ID | â­â­â­ |
| **INPUT** | `æ‰‹åŠ¨è¾“å…¥` | ä»»æ„ | ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚ | - |

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šå¦‚æœä¸ç¡®å®šç”¨å“ªä¸ªï¼Œå•ä½“åº”ç”¨ç”¨`AUTO`ï¼Œåˆ†å¸ƒå¼ç”¨`ASSIGN_ID`

---

## 3. ğŸ”¢ AUTOè‡ªå¢ä¸»é”®


### 3.1 ä»€ä¹ˆæ˜¯AUTOè‡ªå¢


**é€šä¿—è§£é‡Š**ï¼šAUTOå°±æ˜¯è®©æ•°æ®åº“è‡ªå·±ç»™æ¯æ¡è®°å½•ç¼–å·ï¼Œå°±åƒæ’é˜Ÿå–å·ä¸€æ ·ï¼Œå‰ä¸€ä¸ªæ˜¯1å·ï¼Œåä¸€ä¸ªå°±æ˜¯2å·ã€‚

```
æ•°æ®åº“è‡ªåŠ¨ç¼–å·è¿‡ç¨‹ï¼š
ç¬¬1æ¡è®°å½• â†’ ID: 1
ç¬¬2æ¡è®°å½• â†’ ID: 2
ç¬¬3æ¡è®°å½• â†’ ID: 3
...
åˆ é™¤ç¬¬2æ¡å
æ–°æ’å…¥è®°å½• â†’ ID: 4ï¼ˆç»§ç»­å¾€åç¼–å·ï¼‰
```

### 3.2 å¦‚ä½•ä½¿ç”¨AUTO


**æ­¥éª¤1ï¼šæ•°æ®åº“è¡¨è®¾ç½®è‡ªå¢**

```sql
CREATE TABLE user (
    id BIGINT NOT NULL AUTO_INCREMENT,  -- è®¾ç½®è‡ªå¢
    name VARCHAR(30),
    age INT,
    PRIMARY KEY (id)
);
```

**æ­¥éª¤2ï¼šå®ä½“ç±»é…ç½®**

```java
@TableName("user")
public class User {
    @TableId(type = IdType.AUTO)  // æŒ‡å®šè‡ªå¢ç­–ç•¥
    private Long id;
    
    private String name;
    private Integer age;
}
```

**æ­¥éª¤3ï¼šæ’å…¥æ•°æ®æ—¶ä¸ç”¨ç®¡ID**

```java
User user = new User();
user.setName("å¼ ä¸‰");
user.setAge(20);
// æ³¨æ„ï¼šä¸éœ€è¦è®¾ç½®idï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨ç”Ÿæˆ

userMapper.insert(user);
// æ’å…¥åï¼Œuserå¯¹è±¡çš„idä¼šè‡ªåŠ¨å›å¡«
System.out.println("ç”Ÿæˆçš„ID: " + user.getId());
```

### 3.3 AUTOçš„ä¼˜ç¼ºç‚¹


**âœ… ä¼˜ç‚¹**ï¼š
```
ç®€å•ç›´æ¥ â†’ é…ç½®ç®€å•ï¼Œæ–°æ‰‹å‹å¥½
æ€§èƒ½é«˜   â†’ æ•°æ®åº“åŸç”Ÿæ”¯æŒï¼Œæ•ˆç‡æœ€é«˜
è¿ç»­æ€§   â†’ IDè¿ç»­é€’å¢ï¼Œæ–¹ä¾¿æ’åº
```

**âŒ ç¼ºç‚¹**ï¼š
```
ä¾èµ–æ•°æ®åº“ â†’ å¿…é¡»æ•°æ®åº“æ”¯æŒè‡ªå¢ï¼ˆMySQLæ”¯æŒï¼ŒOracleä¸æ”¯æŒï¼‰
åˆ†åº“åˆ†è¡¨é—®é¢˜ â†’ å¤šä¸ªæ•°æ®åº“å„è‡ªè‡ªå¢ä¼šé‡å¤
æš´éœ²æ•°æ®é‡ â†’ IDè¿ç»­å¯ä»¥æ¨ç®—å‡ºè¡¨ä¸­æ•°æ®é‡
```

> âš ï¸ **æ³¨æ„**ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¤šä¸ªæ•°æ®åº“ï¼‰ä¸å»ºè®®ç”¨AUTOï¼Œä¼šå¯¼è‡´IDé‡å¤ï¼

---

## 4. â„ï¸ ASSIGN_IDé›ªèŠ±ç®—æ³•


### 4.1 ä»€ä¹ˆæ˜¯é›ªèŠ±ç®—æ³•


**å½¢è±¡æ¯”å–»**ï¼šé›ªèŠ±ç®—æ³•å°±åƒç»™æ¯ç‰‡é›ªèŠ±ç¼–å·ï¼Œå³ä½¿å…¨ä¸–ç•ŒåŒæ—¶ä¸‹é›ªï¼Œæ¯ç‰‡é›ªèŠ±çš„ç¼–å·ä¹Ÿä¸ä¼šé‡å¤ã€‚

**é›ªèŠ±IDçš„ç»„æˆç»“æ„**ï¼š

```
é›ªèŠ±IDï¼ˆ64ä½ï¼‰çš„æ„æˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ä½ç¬¦å· â”‚ 41ä½æ—¶é—´æˆ³ â”‚ 10ä½æœºå™¨ID â”‚ 12ä½åºåˆ—å· â”‚
â”‚   0     â”‚ æ—¶é—´æ¯«ç§’æ•°  â”‚  æœºå™¨ç¼–å·  â”‚  åŒæ¯«ç§’é€’å¢ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸¾ä¾‹è¯´æ˜ï¼š
ID: 1234567890123456789
    â†“
0 â”‚ 123456789012 â”‚ 001 â”‚ 0001
  â”‚   æ—¶é—´éƒ¨åˆ†   â”‚æœºå™¨1â”‚ åºå·
```

**ä¸ºä»€ä¹ˆèƒ½ä¿è¯å”¯ä¸€æ€§ï¼Ÿ**

```
ä¸‰é‡ä¿è¯ï¼š
1ï¸âƒ£ æ—¶é—´æˆ³ä¸åŒ â†’ ä¸åŒæ—¶åˆ»ç”Ÿæˆçš„IDå¿…ç„¶ä¸åŒ
2ï¸âƒ£ æœºå™¨IDä¸åŒ â†’ ä¸åŒæœåŠ¡å™¨ç”Ÿæˆçš„IDå¿…ç„¶ä¸åŒ  
3ï¸âƒ£ åºåˆ—å·ä¸åŒ â†’ åŒä¸€æ¯«ç§’å†…ä¹Ÿèƒ½ç”Ÿæˆ4096ä¸ªä¸åŒID
```

### 4.2 å¦‚ä½•ä½¿ç”¨ASSIGN_ID


**æ–¹å¼1ï¼šå®ä½“ç±»æŒ‡å®š**

```java
@TableName("user")
public class User {
    @TableId(type = IdType.ASSIGN_ID)  // ä½¿ç”¨é›ªèŠ±ç®—æ³•
    private Long id;  // æ³¨æ„ï¼šå¿…é¡»æ˜¯Longç±»å‹
    
    private String name;
    private Integer age;
}
```

**æ–¹å¼2ï¼šå…¨å±€é…ç½®ï¼ˆæ¨èï¼‰**

```yaml
# application.yml
mybatis-plus:
  global-config:
    db-config:
      id-type: ASSIGN_ID  # å…¨å±€é»˜è®¤ä½¿ç”¨é›ªèŠ±ç®—æ³•
```

**æ’å…¥æ•°æ®ç¤ºä¾‹**ï¼š

```java
User user = new User();
user.setName("æå››");
user.setAge(25);
// ä¸éœ€è¦è®¾ç½®idï¼ŒMyBatis-Plusä¼šè‡ªåŠ¨ç”Ÿæˆé›ªèŠ±ID

userMapper.insert(user);
System.out.println("é›ªèŠ±ID: " + user.getId());
// è¾“å‡ºç±»ä¼¼ï¼š1234567890123456789
```

### 4.3 é›ªèŠ±ç®—æ³•çš„ä¼˜åŠ¿


**âœ… åˆ†å¸ƒå¼å‹å¥½**ï¼š
```
æœåŠ¡å™¨Aç”Ÿæˆï¼š1234567890123456001
æœåŠ¡å™¨Bç”Ÿæˆï¼š1234567890123456002
æœåŠ¡å™¨Cç”Ÿæˆï¼š1234567890123456003
â†’ ç»å¯¹ä¸ä¼šé‡å¤
```

**âœ… é«˜æ€§èƒ½**ï¼š
```
æœ¬åœ°ç”Ÿæˆ â†’ ä¸éœ€è¦è®¿é—®æ•°æ®åº“
æ¯«ç§’çº§ â†’ æ¯æ¯«ç§’å¯ç”Ÿæˆ4096ä¸ªID
æ— é”è®¾è®¡ â†’ å¹¶å‘æ€§èƒ½å¥½
```

**âœ… è¶‹åŠ¿é€’å¢**ï¼š
```
æ—¶é—´é å‰çš„IDæ•°å€¼å°
æ—¶é—´é åçš„IDæ•°å€¼å¤§
â†’ æœ‰åˆ©äºæ•°æ®åº“ç´¢å¼•æ€§èƒ½
```

> ğŸ’¡ **æ–°æ‰‹å»ºè®®**ï¼šåˆ†å¸ƒå¼é¡¹ç›®é¦–é€‰ASSIGN_IDï¼Œæ€§èƒ½å¥½ä¸”ä¸ä¼šé‡å¤

---

## 5. ğŸ†” ASSIGN_UUIDå”¯ä¸€æ ‡è¯†


### 5.1 ä»€ä¹ˆæ˜¯UUID


**é€šä¿—è§£é‡Š**ï¼šUUIDå°±åƒä¸€ä¸²"éšæœºå¯†ç "ï¼Œç”±å­—æ¯å’Œæ•°å­—ç»„æˆï¼Œé‡å¤çš„æ¦‚ç‡æä½ï¼ˆå‡ ä¹ä¸º0ï¼‰ã€‚

```
UUIDç¤ºä¾‹ï¼š
550e8400-e29b-41d4-a716-446655440000

ç‰¹ç‚¹ï¼š
- 32ä½16è¿›åˆ¶å­—ç¬¦
- ç”¨"-"åˆ†éš”æˆ5æ®µ
- çœ‹èµ·æ¥åƒä¹±ç ï¼Œä½†æœ‰è§„åˆ™
```

**UUIDçš„ç”Ÿæˆé€»è¾‘**ï¼š

```
UUIDç”±å¤šä¸ªå› ç´ ç»„åˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¶é—´æˆ³ + MACåœ°å€ + éšæœºæ•° + æ—¶é’Ÿåºåˆ— â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
ç”Ÿæˆ32ä½å”¯ä¸€å­—ç¬¦ä¸²
```

### 5.2 å¦‚ä½•ä½¿ç”¨ASSIGN_UUID


**å®ä½“ç±»é…ç½®**ï¼š

```java
@TableName("user")
public class User {
    @TableId(type = IdType.ASSIGN_UUID)  // ä½¿ç”¨UUIDç­–ç•¥
    private String id;  // æ³¨æ„ï¼šå¿…é¡»æ˜¯Stringç±»å‹
    
    private String name;
    private Integer age;
}
```

**å¯¹åº”çš„æ•°æ®åº“è¡¨**ï¼š

```sql
CREATE TABLE user (
    id VARCHAR(32) PRIMARY KEY,  -- å­—ç¬¦ä¸²ç±»å‹ï¼Œé•¿åº¦32
    name VARCHAR(30),
    age INT
);
```

**æ’å…¥æ•°æ®**ï¼š

```java
User user = new User();
user.setName("ç‹äº”");
user.setAge(30);
// ä¸éœ€è¦è®¾ç½®id

userMapper.insert(user);
System.out.println("UUID: " + user.getId());
// è¾“å‡ºï¼š550e8400e29b41d4a716446655440000ï¼ˆå»é™¤äº†"-"ï¼‰
```

### 5.3 UUIDçš„ç‰¹ç‚¹


**âœ… ä¼˜ç‚¹**ï¼š
```
å…¨å±€å”¯ä¸€ â†’ ä¸ä¾èµ–æ•°æ®åº“ï¼Œä»»ä½•ç¯å¢ƒéƒ½å”¯ä¸€
å­—ç¬¦ä¸²æ ¼å¼ â†’ é€‚åˆæŸäº›ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚
æ— åºæ€§ â†’ ä¸ä¼šæš´éœ²æ•°æ®è§„å¾‹
```

**âŒ ç¼ºç‚¹**ï¼š
```
å ç”¨ç©ºé—´å¤§ â†’ 32å­—èŠ‚ vs Longçš„8å­—èŠ‚
æ— åºæ€§ â†’ ä¸åˆ©äºæ•°æ®åº“ç´¢å¼•ï¼ˆMySQLï¼‰
å¯è¯»æ€§å·® â†’ äººçœ¼å¾ˆéš¾è¯†åˆ«å’Œè®°å¿†
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | ASSIGN_ID(é›ªèŠ±) | ASSIGN_UUID |
|------|----------------|-------------|
| å­˜å‚¨ç©ºé—´ | `8å­—èŠ‚` | `32å­—èŠ‚` |
| ç´¢å¼•æ€§èƒ½ | `é«˜ï¼ˆæœ‰åºï¼‰` | `ä½ï¼ˆæ— åºï¼‰` |
| å¯è¯»æ€§ | `è¾ƒå¥½` | `å·®` |
| åˆ†å¸ƒå¼ | `âœ…æ”¯æŒ` | `âœ…æ”¯æŒ` |

> âš ï¸ **å»ºè®®**ï¼šé™¤éä¸šåŠ¡æ˜ç¡®è¦æ±‚å­—ç¬¦ä¸²IDï¼Œå¦åˆ™ä¼˜å…ˆç”¨ASSIGN_ID

---

## 6. âœï¸ INPUTæ‰‹åŠ¨è¾“å…¥


### 6.1 ä»€ä¹ˆæ˜¯INPUTæ¨¡å¼


**ç®€å•ç†è§£**ï¼šINPUTå°±æ˜¯"æˆ‘è‡ªå·±æ¥"ï¼ŒIDç”±ç¨‹åºå‘˜æ‰‹åŠ¨è®¾ç½®ï¼ŒMyBatis-Plusä¸ç®¡ã€‚

```
ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹ï¼š
- å¯¹æ¥å¤–éƒ¨ç³»ç»Ÿï¼ŒIDç”±å¤–éƒ¨æä¾›
- ä½¿ç”¨ç‰¹æ®Šç¼–ç è§„åˆ™ï¼ˆå¦‚ï¼šUSER202401001ï¼‰
- ä¸šåŠ¡ä¸»é”®ï¼ˆå¦‚ï¼šèº«ä»½è¯å·ã€è®¢å•å·ï¼‰
```

### 6.2 å¦‚ä½•ä½¿ç”¨INPUT


**å®ä½“ç±»é…ç½®**ï¼š

```java
@TableName("user")
public class User {
    @TableId(type = IdType.INPUT)  // æ‰‹åŠ¨è¾“å…¥æ¨¡å¼
    private Long id;
    
    private String name;
    private Integer age;
}
```

**æ’å…¥æ—¶å¿…é¡»è®¾ç½®ID**ï¼š

```java
User user = new User();
user.setId(1001L);  // å¿…é¡»æ‰‹åŠ¨è®¾ç½®ID
user.setName("èµµå…­");
user.setAge(28);

userMapper.insert(user);
```

**è‡ªå®šä¹‰IDè§„åˆ™ç¤ºä¾‹**ï¼š

```java
// ä¸šåŠ¡åœºæ™¯ï¼šç”Ÿæˆè‡ªå®šä¹‰æ ¼å¼çš„ç”¨æˆ·ID
public class UserService {
    
    public void createUser(String name, Integer age) {
        User user = new User();
        
        // è‡ªå®šä¹‰IDç”Ÿæˆè§„åˆ™ï¼šUSER + æ—¥æœŸ + åºå·
        String customId = generateUserId();
        user.setId(customId);  // USER20240923001
        
        user.setName(name);
        user.setAge(age);
        
        userMapper.insert(user);
    }
    
    private String generateUserId() {
        String date = LocalDate.now().format(DateTimeFormatter.BASIC_ISO_DATE);
        int sequence = getNextSequence(); // è·å–åºå·
        return "USER" + date + String.format("%03d", sequence);
    }
}
```

### 6.3 INPUTçš„æ³¨æ„äº‹é¡¹


> âš ï¸ **é‡è¦æé†’**ï¼š
> - å¿…é¡»æ‰‹åŠ¨è®¾ç½®IDï¼Œå¦åˆ™ä¼šæŠ¥é”™
> - è¦è‡ªå·±ä¿è¯IDçš„å”¯ä¸€æ€§
> - é€‚åˆæœ‰ç‰¹æ®ŠIDè§„åˆ™çš„åœºæ™¯

**å¸¸è§é”™è¯¯**ï¼š

```java
âŒ é”™è¯¯ç¤ºä¾‹ï¼š
User user = new User();
user.setName("æµ‹è¯•");
// å¿˜è®°è®¾ç½®ID
userMapper.insert(user);  // æŠ¥é”™ï¼šIDä¸èƒ½ä¸ºç©º

âœ… æ­£ç¡®ç¤ºä¾‹ï¼š
User user = new User();
user.setId(generateCustomId());  // æ‰‹åŠ¨ç”ŸæˆID
user.setName("æµ‹è¯•");
userMapper.insert(user);  // æˆåŠŸ
```

---

## 7. ğŸŒ åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆ


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼ID


**é—®é¢˜åœºæ™¯æ¼”ç¤º**ï¼š

```
å•æ•°æ®åº“ï¼ˆæ²¡é—®é¢˜ï¼‰ï¼š
æ•°æ®åº“Aï¼šç”¨æˆ·1, 2, 3, 4, 5...
         â†“
      IDè‡ªå¢ï¼Œä¸é‡å¤ âœ…

åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆæœ‰é—®é¢˜ï¼‰ï¼š
æ•°æ®åº“Aï¼šç”¨æˆ·1, 2, 3...
æ•°æ®åº“Bï¼šç”¨æˆ·1, 2, 3...  â† IDé‡å¤äº†ï¼âŒ
æ•°æ®åº“Cï¼šç”¨æˆ·1, 2, 3...
```

**åˆ†å¸ƒå¼IDçš„è¦æ±‚**ï¼š

```
âœ… å…¨å±€å”¯ä¸€æ€§ â†’ ä»»ä½•æ—¶åˆ»ã€ä»»ä½•æœºå™¨ç”Ÿæˆçš„IDéƒ½ä¸é‡å¤
âœ… è¶‹åŠ¿é€’å¢   â†’ æœ‰åˆ©äºæ•°æ®åº“ç´¢å¼•
âœ… é«˜æ€§èƒ½     â†’ æ¯ç§’ç”Ÿæˆå¤§é‡ID
âœ… é«˜å¯ç”¨     â†’ ä¸ä¾èµ–å•ç‚¹æœåŠ¡
```

### 7.2 å¸¸è§åˆ†å¸ƒå¼IDæ–¹æ¡ˆå¯¹æ¯”


**æ–¹æ¡ˆå¯¹æ¯”è¡¨**ï¼š

| æ–¹æ¡ˆ | åŸç† | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|------|---------|
| **é›ªèŠ±ç®—æ³•** | `æ—¶é—´æˆ³+æœºå™¨ID+åºåˆ—å·` | æ€§èƒ½é«˜ã€æœ¬åœ°ç”Ÿæˆ | æ—¶é’Ÿå›æ‹¨é—®é¢˜ | â­â­â­â­â­ é¦–é€‰ |
| **æ•°æ®åº“å·æ®µ** | `æ‰¹é‡è·å–IDæ®µ` | ç®€å•æ˜“æ‡‚ | ä¾èµ–æ•°æ®åº“ | â­â­â­ å°è§„æ¨¡ |
| **Redisè‡ªå¢** | `Redis INCRå‘½ä»¤` | æ€§èƒ½å¥½ | ä¾èµ–Redis | â­â­â­â­ å¤‡é€‰ |
| **UUID** | `éšæœºç®—æ³•` | ç»å¯¹å”¯ä¸€ | æ— åºã€å ç©ºé—´ | â­â­ ç‰¹æ®Šåœºæ™¯ |

### 7.3 MyBatis-Plusä¸­çš„åˆ†å¸ƒå¼æ–¹æ¡ˆ


**é»˜è®¤æ–¹æ¡ˆï¼šé›ªèŠ±ç®—æ³•ï¼ˆASSIGN_IDï¼‰**

```java
// å…¨å±€é…ç½®é›ªèŠ±ç®—æ³•
@Configuration
public class MybatisPlusConfig {
    
    @Bean
    public MybatisPlusPropertiesCustomizer plusPropertiesCustomizer() {
        return plusProperties -> {
            GlobalConfig globalConfig = plusProperties.getGlobalConfig();
            globalConfig.getDbConfig().setIdType(IdType.ASSIGN_ID);
        };
    }
}
```

**é…ç½®å·¥ä½œæœºå™¨IDï¼ˆå¤šæœåŠ¡å™¨ï¼‰**ï¼š

```yaml
# application.yml
mybatis-plus:
  global-config:
    db-config:
      id-type: ASSIGN_ID
      
# å¦‚æœæœ‰å¤šå°æœåŠ¡å™¨ï¼Œéœ€è¦é…ç½®ä¸åŒçš„workerId
spring:
  application:
    name: user-service
    
# å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®ä¸­å¿ƒè®¾ç½®
# -Dmybatis-plus.worker-id=1
# -Dmybatis-plus.datacenter-id=1
```

**åˆ†å¸ƒå¼åœºæ™¯å®æˆ˜**ï¼š

```
å¾®æœåŠ¡æ¶æ„ç¤ºä¾‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœåŠ¡å™¨A      â”‚  â”‚ æœåŠ¡å™¨B      â”‚  â”‚ æœåŠ¡å™¨C      â”‚
â”‚ WorkerId:1  â”‚  â”‚ WorkerId:2  â”‚  â”‚ WorkerId:3  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ç”ŸæˆID:      â”‚  â”‚ç”ŸæˆID:      â”‚  â”‚ç”ŸæˆID:      â”‚
â”‚123...001    â”‚  â”‚123...002    â”‚  â”‚123...003    â”‚
â”‚123...004    â”‚  â”‚123...005    â”‚  â”‚123...006    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“              â†“              â†“
            å…¨éƒ¨å†™å…¥åŒä¸€ä¸ªæ•°æ®åº“
                 ç»ä¸é‡å¤ï¼âœ…
```

> ğŸ’¡ **å®æˆ˜å»ºè®®**ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿç›´æ¥ç”¨ASSIGN_IDï¼Œé…ç½®ç®€å•æ•ˆæœå¥½

---

## 8. ğŸ”§ è‡ªå®šä¹‰ä¸»é”®ç­–ç•¥


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰


**ä¸šåŠ¡åœºæ™¯ä¸¾ä¾‹**ï¼š

```
åœºæ™¯1ï¼šè®¢å•å·ç”Ÿæˆ
æ ¼å¼ï¼šORD + æ—¥æœŸ + 6ä½åºå·
ç¤ºä¾‹ï¼šORD20240923000001

åœºæ™¯2ï¼šä¼šå‘˜å¡å·ç”Ÿæˆ  
æ ¼å¼ï¼šVIP + å¹´ä»½ + éšæœº8ä½
ç¤ºä¾‹ï¼šVIP2024AB12CD34

è¿™äº›éƒ½éœ€è¦è‡ªå®šä¹‰ä¸»é”®ç­–ç•¥
```

### 8.2 å®ç°è‡ªå®šä¹‰ç­–ç•¥çš„æ­¥éª¤


**æ­¥éª¤1ï¼šåˆ›å»ºIDç”Ÿæˆå™¨**

```java
@Component
public class CustomIdGenerator implements IdentifierGenerator {
    
    private static final AtomicLong counter = new AtomicLong(1);
    
    @Override
    public Number nextId(Object entity) {
        // è‡ªå®šä¹‰ç”Ÿæˆé€»è¾‘
        String date = LocalDate.now().format(
            DateTimeFormatter.BASIC_ISO_DATE
        );
        long sequence = counter.getAndIncrement();
        
        // æ‹¼æ¥æˆï¼š202409230001æ ¼å¼
        return Long.parseLong(date + String.format("%04d", sequence));
    }
    
    @Override
    public String nextUUID(Object entity) {
        // è‡ªå®šä¹‰UUIDé€»è¾‘
        return "CUSTOM-" + UUID.randomUUID().toString();
    }
}
```

**æ­¥éª¤2ï¼šæ³¨å†Œåˆ°Springå®¹å™¨**

```java
@Configuration
public class MybatisPlusConfig {
    
    @Bean
    public IdentifierGenerator customIdGenerator() {
        return new CustomIdGenerator();
    }
}
```

**æ­¥éª¤3ï¼šå®ä½“ç±»ä½¿ç”¨**

```java
@TableName("orders")
public class Order {
    @TableId(type = IdType.ASSIGN_ID)  // ä¼šè‡ªåŠ¨ä½¿ç”¨è‡ªå®šä¹‰ç”Ÿæˆå™¨
    private Long id;
    
    private String orderNo;
    private BigDecimal amount;
}
```

### 8.3 æ›´å¤æ‚çš„è‡ªå®šä¹‰ç¤ºä¾‹


**ä¸šåŠ¡è®¢å•å·ç”Ÿæˆå™¨**ï¼š

```java
@Component
public class OrderIdGenerator implements IdentifierGenerator {
    
    @Autowired
    private RedisTemplate<String, Long> redisTemplate;
    
    @Override
    public Number nextId(Object entity) {
        // ä½¿ç”¨Redisä¿è¯åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åºå·å”¯ä¸€
        String dateKey = "order:id:" + LocalDate.now();
        Long sequence = redisTemplate.opsForValue().increment(dateKey);
        
        // è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç¬¬äºŒå¤©å‡Œæ™¨è¿‡æœŸï¼‰
        LocalDateTime tomorrow = LocalDate.now().plusDays(1).atStartOfDay();
        Duration ttl = Duration.between(LocalDateTime.now(), tomorrow);
        redisTemplate.expire(dateKey, ttl.getSeconds(), TimeUnit.SECONDS);
        
        // æ ¼å¼ï¼šORD + YYYYMMDD + 6ä½åºå·
        String dateStr = LocalDate.now().format(
            DateTimeFormatter.BASIC_ISO_DATE
        );
        return Long.parseLong("999" + dateStr + 
            String.format("%06d", sequence));
    }
}
```

**ä½¿ç”¨è¯´æ˜**ï¼š

```
ç”Ÿæˆæ•ˆæœï¼š
ç¬¬1ä¸ªè®¢å•ï¼š99920240923000001
ç¬¬2ä¸ªè®¢å•ï¼š99920240923000002
...

ä¼˜åŠ¿ï¼š
âœ… å¯è¯»æ€§å¼ºï¼ˆèƒ½çœ‹å‡ºæ—¥æœŸï¼‰
âœ… åˆ†å¸ƒå¼å®‰å…¨ï¼ˆRedisä¿è¯å”¯ä¸€ï¼‰
âœ… è‡ªåŠ¨é‡ç½®ï¼ˆæ¯å¤©ä»1å¼€å§‹ï¼‰
```

> ğŸ¯ **åº”ç”¨åœºæ™¯**ï¼šè®¢å•ç³»ç»Ÿã€æµæ°´å·ã€ä¸šåŠ¡å•æ®ç¼–å·ç­‰

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 äº”ç§ç­–ç•¥å¿«é€Ÿé€‰æ‹©


```
ğŸ“Š ç­–ç•¥é€‰æ‹©å†³ç­–æ ‘ï¼š

ä½ çš„é¡¹ç›®æ˜¯åˆ†å¸ƒå¼çš„å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ ç”¨ ASSIGN_IDï¼ˆé›ªèŠ±ç®—æ³•ï¼‰âœ…
â”‚       â””â”€ éœ€è¦å­—ç¬¦ä¸²IDï¼Ÿâ†’ ASSIGN_UUID
â”‚
â””â”€ å¦ï¼ˆå•ä½“åº”ç”¨ï¼‰
    â”œâ”€ æ•°æ®åº“æ”¯æŒè‡ªå¢ï¼Ÿ
    â”‚   â”œâ”€ æ˜¯ â†’ ç”¨ AUTOï¼ˆè‡ªå¢ï¼‰âœ…
    â”‚   â””â”€ å¦ â†’ ç”¨ ASSIGN_ID
    â”‚
    â””â”€ æœ‰ç‰¹æ®ŠIDè§„åˆ™ï¼Ÿâ†’ ç”¨ INPUTï¼ˆè‡ªå®šä¹‰ï¼‰
```

### 9.2 å„ç­–ç•¥å¯¹æ¯”æ€»ç»“


| ç­–ç•¥ | æ•°æ®ç±»å‹ | åˆ†å¸ƒå¼ | æ€§èƒ½ | å¤æ‚åº¦ | æ¨èæŒ‡æ•° |
|------|---------|--------|------|--------|---------|
| **AUTO** | `Long` | `âŒ` | `â­â­â­â­â­` | `ä½` | â­â­â­â­ |
| **ASSIGN_ID** | `Long` | `âœ…` | `â­â­â­â­` | `ä½` | â­â­â­â­â­ |
| **ASSIGN_UUID** | `String` | `âœ…` | `â­â­â­` | `ä½` | â­â­â­ |
| **INPUT** | `ä»»æ„` | `çœ‹å®ç°` | `çœ‹å®ç°` | `é«˜` | â­â­ |

### 9.3 å®æˆ˜å»ºè®®


**âœ… æ–°æ‰‹å»ºè®®**ï¼š
```
1. å•ä½“é¡¹ç›® â†’ ç›´æ¥ç”¨ AUTO
2. åˆ†å¸ƒå¼é¡¹ç›® â†’ ç›´æ¥ç”¨ ASSIGN_ID  
3. ä¸ç¡®å®š â†’ ç”¨ ASSIGN_IDï¼ˆæ›´é€šç”¨ï¼‰
```

**âœ… å…¨å±€é…ç½®æ¨è**ï¼š

```yaml
# æ¨èçš„å…¨å±€é…ç½®ï¼ˆé€‚åˆå¤§å¤šæ•°é¡¹ç›®ï¼‰
mybatis-plus:
  global-config:
    db-config:
      id-type: ASSIGN_ID  # é»˜è®¤é›ªèŠ±ç®—æ³•
```

**âœ… å¸¸è§é—®é¢˜å¤„ç†**ï¼š

> **Qï¼šä¸ºä»€ä¹ˆæ’å…¥åIDè¿˜æ˜¯nullï¼Ÿ**
> Aï¼šæ£€æŸ¥æ˜¯å¦é…ç½®äº†IdTypeï¼Œé»˜è®¤æ˜¯ASSIGN_IDä½†è¦ç¡®ä¿å­—æ®µæ˜¯Longç±»å‹

> **Qï¼šé›ªèŠ±IDå¤ªé•¿ï¼Œå‰ç«¯å±•ç¤ºä¸äº†ï¼Ÿ**  
> Aï¼šå¯ä»¥è½¬æˆStringä¼ ç»™å‰ç«¯ï¼Œæˆ–è€…ç”¨ASSIGN_UUID

> **Qï¼šå¤šä¸ªæ•°æ®åº“AUTOä¼šé‡å¤å—ï¼Ÿ**
> Aï¼šä¼šï¼åˆ†åº“åˆ†è¡¨åœºæ™¯å¿…é¡»ç”¨ASSIGN_IDæˆ–è‡ªå®šä¹‰ç­–ç•¥

### 9.4 æ ¸å¿ƒè®°å¿†è¦ç‚¹


```
ğŸ”¸ AUTOï¼šæ•°æ®åº“è‡ªå¢ï¼Œç®€å•é«˜æ•ˆï¼Œå•ä½“åº”ç”¨é¦–é€‰
ğŸ”¸ ASSIGN_IDï¼šé›ªèŠ±ç®—æ³•ï¼Œåˆ†å¸ƒå¼å¿…å¤‡ï¼Œæ€§èƒ½å¥½
ğŸ”¸ ASSIGN_UUIDï¼šUUIDç”Ÿæˆï¼Œå­—ç¬¦ä¸²IDï¼Œå ç©ºé—´å¤§
ğŸ”¸ INPUTï¼šæ‰‹åŠ¨è¾“å…¥ï¼Œç‰¹æ®Šä¸šåŠ¡ï¼Œéœ€è‡ªå·±ä¿è¯å”¯ä¸€
ğŸ”¸ è‡ªå®šä¹‰ï¼šå®ç°IdentifierGeneratoræ¥å£ï¼Œä¸šåŠ¡ç¼–å·ä¸“ç”¨
```

**æœ€åå»ºè®®**ï¼š
- ğŸ“ é¡¹ç›®åˆæœŸå°±ç¡®å®šå¥½ç­–ç•¥ï¼ŒåæœŸæ”¹å¾ˆéº»çƒ¦
- ğŸ¯ ä¼˜å…ˆç”¨æ¡†æ¶æä¾›çš„ï¼Œå¤Ÿç”¨å°±ä¸è¦è‡ªå®šä¹‰
- âš¡ åˆ†å¸ƒå¼åœºæ™¯ASSIGN_IDæ˜¯æœ€ä½³é€‰æ‹©
- ğŸ”§ ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚å†è€ƒè™‘è‡ªå®šä¹‰å®ç°