---
title: 40ã€SQLæ€§èƒ½åˆ†ææ’ä»¶
---
## ğŸ“š ç›®å½•


1. [æ€§èƒ½åˆ†ææ’ä»¶åŸºç¡€](#1-æ€§èƒ½åˆ†ææ’ä»¶åŸºç¡€)
2. [æ€§èƒ½åˆ†ææ’ä»¶é…ç½®](#2-æ€§èƒ½åˆ†ææ’ä»¶é…ç½®)
3. [æ…¢SQLæ£€æµ‹é˜ˆå€¼è®¾ç½®](#3-æ…¢sqlæ£€æµ‹é˜ˆå€¼è®¾ç½®)
4. [æ‰§è¡Œæ—¶é—´ç»Ÿè®¡åˆ†æ](#4-æ‰§è¡Œæ—¶é—´ç»Ÿè®¡åˆ†æ)
5. [å¼€å‘ç¯å¢ƒè°ƒè¯•æŠ€å·§](#5-å¼€å‘ç¯å¢ƒè°ƒè¯•æŠ€å·§)
6. [SQLæ‰§è¡Œæ—¥å¿—ç®¡ç†](#6-sqlæ‰§è¡Œæ—¥å¿—ç®¡ç†)
7. [æ€§èƒ½ç“¶é¢ˆå®šä½æ–¹æ³•](#7-æ€§èƒ½ç“¶é¢ˆå®šä½æ–¹æ³•)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

# ğŸ¯ **å­¦ä¹ è·¯å¾„å¯¼èˆª**


**å‰ç½®çŸ¥è¯†**ï¼šMyBatis-PlusåŸºç¡€ä½¿ç”¨ã€æ•°æ®åº“SQLä¼˜åŒ–åŸºç¡€ â†’ **å½“å‰å†…å®¹**ï¼šSQLæ€§èƒ½åˆ†ææ’ä»¶ â†’ **åç»­å­¦ä¹ **ï¼šå»ºè®®å­¦ä¹ åˆ†å¸ƒå¼äº‹åŠ¡ã€ç¼“å­˜ä¼˜åŒ–

â±ï¸ **é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼šæœ¬ç« é¢„è®¡45åˆ†é’Ÿ | å®è·µç»ƒä¹ 30åˆ†é’Ÿ

---

## 1. ğŸ” æ€§èƒ½åˆ†ææ’ä»¶åŸºç¡€



### 1.1 ä»€ä¹ˆæ˜¯SQLæ€§èƒ½åˆ†ææ’ä»¶



**æ ¸å¿ƒå®šä¹‰**
```
æ€§èƒ½åˆ†ææ’ä»¶ï¼šè‡ªåŠ¨ç›‘æµ‹SQLæ‰§è¡Œæƒ…å†µçš„å·¥å…·
ä½œç”¨ï¼šå¸®ä½ æ‰¾å‡ºè¿è¡Œæ…¢çš„SQLè¯­å¥
ç›®çš„ï¼šå‘ç°æ€§èƒ½é—®é¢˜ï¼Œä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
```

**ğŸ’¡ é€šä¿—ç†è§£**
æƒ³è±¡ä½ å¼€äº†ä¸€å®¶é¤å…ï¼š
- **æ²¡æœ‰ç›‘æ§**ï¼šä¸çŸ¥é“å“ªä¸ªå¨å¸ˆåšèœæ…¢
- **æœ‰äº†æ’ä»¶**ï¼šè‡ªåŠ¨è®°å½•æ¯é“èœçš„åˆ¶ä½œæ—¶é—´ï¼Œè¶…æ—¶å°±æé†’

è¿™ä¸ªæ’ä»¶å°±åƒé¤å…çš„"æ•ˆç‡ç›‘æ§ç³»ç»Ÿ"ï¼Œå¸®ä½ å‘ç°å“ªäº›SQLè¯­å¥å¤ªæ…¢äº†ã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ€§èƒ½åˆ†æ



**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**

| **å¸¸è§é—®é¢˜** | **æ’ä»¶å¸®ä½ åšä»€ä¹ˆ** | **æ•ˆæœ** |
|-------------|------------------|---------|
| SQLæ‰§è¡Œæ…¢ï¼Œä½†ä¸çŸ¥é“æ…¢åœ¨å“ª | è‡ªåŠ¨è®°å½•æ¯æ¡SQLè€—æ—¶ | å¿«é€Ÿå®šä½æ…¢æŸ¥è¯¢ â­â­â­â­â­ |
| å¼€å‘æ—¶å‘ç°ä¸äº†æ€§èƒ½é—®é¢˜ | å¼€å‘ç¯å¢ƒå®æ—¶æé†’ | æå‰å‘ç°é—®é¢˜ â­â­â­â­ |
| ä¸çŸ¥é“ä¼˜åŒ–æ•ˆæœå¦‚ä½• | å¯¹æ¯”ä¼˜åŒ–å‰åè€—æ—¶ | é‡åŒ–ä¼˜åŒ–æ•ˆæœ â­â­â­â­ |

**âš ï¸ ä½¿ç”¨åœºæ™¯è¯´æ˜**
```
âœ… å¼€å‘ç¯å¢ƒï¼šå¼ºçƒˆæ¨èï¼Œå¸®åŠ©å‘ç°æ€§èƒ½é—®é¢˜
âœ… æµ‹è¯•ç¯å¢ƒï¼šå¯ä»¥ä½¿ç”¨ï¼ŒéªŒè¯ä¼˜åŒ–æ•ˆæœ
âŒ ç”Ÿäº§ç¯å¢ƒï¼šä¸è¦ä½¿ç”¨ï¼Œä¼šå½±å“æ€§èƒ½
```

> ğŸ’¡ **é‡è¦æé†’**ï¼šæ€§èƒ½åˆ†ææ’ä»¶æœ¬èº«ä¼šæ¶ˆè€—èµ„æºï¼Œåªåœ¨å¼€å‘å’Œæµ‹è¯•æ—¶ä½¿ç”¨ï¼

### 1.3 æ’ä»¶å·¥ä½œåŸç†



**ğŸ”„ æ‰§è¡Œæµç¨‹ç¤ºæ„**
```
ä½ çš„ä»£ç è°ƒç”¨             MyBatis-Pluså¤„ç†              æ•°æ®åº“æ‰§è¡Œ
   |                          |                          |
   |--[æŸ¥è¯¢ç”¨æˆ·]------------->|                          |
                              |--[è®°å½•å¼€å§‹æ—¶é—´]           |
                              |--[æ‰§è¡ŒSQL]--------------->|
                              |                          |--[æŸ¥è¯¢æ•°æ®]
                              |<-[è¿”å›ç»“æœ]---------------|
                              |--[è®°å½•ç»“æŸæ—¶é—´]           |
                              |--[è®¡ç®—è€—æ—¶]               |
                              |--[åˆ¤æ–­æ˜¯å¦è¶…æ—¶]           |
   |<-[è¿”å›æ•°æ®+æ€§èƒ½ä¿¡æ¯]------|                          |
```

**å…³é”®æ­¥éª¤è§£é‡Š**ï¼š
1. **æ‹¦æˆªSQL**ï¼šæ’ä»¶æ‹¦æˆªæ‰€æœ‰SQLæ‰§è¡Œ
2. **è®°å½•æ—¶é—´**ï¼šæ‰§è¡Œå‰åè®°å½•æ—¶é—´æˆ³
3. **è®¡ç®—è€—æ—¶**ï¼šç”¨ç»“æŸæ—¶é—´å‡å»å¼€å§‹æ—¶é—´
4. **è¶…æ—¶æ£€æµ‹**ï¼šå¦‚æœè€—æ—¶è¶…è¿‡è®¾å®šå€¼å°±æŠ¥è­¦

---

## 2. âš™ï¸ æ€§èƒ½åˆ†ææ’ä»¶é…ç½®



### 2.1 åŸºç¡€é…ç½®æ­¥éª¤



**ğŸ“ ç¬¬ä¸€æ­¥ï¼šæ·»åŠ æ’ä»¶ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰**

å¤§éƒ¨åˆ†æƒ…å†µä¸‹MyBatis-Pluså·²ç»åŒ…å«äº†æ€§èƒ½åˆ†æåŠŸèƒ½ï¼Œæ— éœ€é¢å¤–ä¾èµ–ã€‚

**ğŸ“ ç¬¬äºŒæ­¥ï¼šé…ç½®æ’ä»¶**

```java
@Configuration
public class MybatisPlusConfig {
    
    /**
     * SQLæ€§èƒ½åˆ†ææ’ä»¶
     * ä½œç”¨ï¼šç›‘æ§SQLæ‰§è¡Œæ—¶é—´ï¼Œå‘ç°æ…¢æŸ¥è¯¢
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        
        // æ·»åŠ æ€§èƒ½åˆ†ææ’ä»¶
        interceptor.addInnerInterceptor(new PerformanceInterceptor());
        
        return interceptor;
    }
}
```

**ğŸ”§ é…ç½®è¯´æ˜**ï¼š
- `MybatisPlusInterceptor`ï¼šMyBatis-Plusçš„æ‹¦æˆªå™¨å®¹å™¨
- `PerformanceInterceptor`ï¼šæ€§èƒ½åˆ†æçš„æ ¸å¿ƒæ’ä»¶
- `addInnerInterceptor`ï¼šæŠŠæ€§èƒ½æ’ä»¶æ·»åŠ åˆ°æ‹¦æˆªå™¨é“¾

### 2.2 ç¯å¢ƒéš”ç¦»é…ç½®



**ğŸ’¡ åªåœ¨å¼€å‘ç¯å¢ƒå¯ç”¨**

```java
@Configuration
public class MybatisPlusConfig {
    
    // è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„ç¯å¢ƒæ ‡è¯†
    @Value("${spring.profiles.active:dev}")
    private String env;
    
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        
        // åªåœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒå¯ç”¨æ€§èƒ½åˆ†æ
        if ("dev".equals(env) || "test".equals(env)) {
            interceptor.addInnerInterceptor(new PerformanceInterceptor());
            System.out.println("âœ… æ€§èƒ½åˆ†ææ’ä»¶å·²å¯ç”¨ï¼ˆ" + env + "ç¯å¢ƒï¼‰");
        }
        
        return interceptor;
    }
}
```

**ğŸ·ï¸ ç¯å¢ƒé…ç½®æ–‡ä»¶ç¤ºä¾‹**

```yaml
# application-dev.ymlï¼ˆå¼€å‘ç¯å¢ƒï¼‰

spring:
  profiles:
    active: dev

# application-prod.ymlï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

spring:
  profiles:
    active: prod
```

**âš ï¸ ä¸ºä»€ä¹ˆè¦ç¯å¢ƒéš”ç¦»ï¼Ÿ**
```
å¼€å‘ç¯å¢ƒï¼š
âœ… éœ€è¦æ’ä»¶å¸®åŠ©å‘ç°é—®é¢˜
âœ… å¯ä»¥æ¥å—ä¸€å®šçš„æ€§èƒ½æŸè€—

ç”Ÿäº§ç¯å¢ƒï¼š
âŒ æ€§èƒ½è¦æ±‚é«˜ï¼Œä¸èƒ½æœ‰é¢å¤–å¼€é”€
âŒ æ—¥å¿—é‡å¤§ï¼Œå½±å“æœåŠ¡å™¨æ€§èƒ½
```

---

## 3. â±ï¸ æ…¢SQLæ£€æµ‹é˜ˆå€¼è®¾ç½®



### 3.1 ä»€ä¹ˆæ˜¯æ…¢SQLé˜ˆå€¼



**æ ¸å¿ƒæ¦‚å¿µ**
```
æ…¢SQLé˜ˆå€¼ï¼šå®šä¹‰"å¤šæ…¢ç®—æ…¢"çš„æ ‡å‡†
æ¯”å¦‚ï¼šè®¾ç½®100æ¯«ç§’ä¸ºé˜ˆå€¼
     - æ‰§è¡Œ50msçš„SQLï¼šæ­£å¸¸ï¼Œä¸æé†’
     - æ‰§è¡Œ150msçš„SQLï¼šå¤ªæ…¢ï¼Œå‘å‡ºè­¦å‘Š
```

**ğŸ’¡ ç”Ÿæ´»åŒ–ç±»æ¯”**
å°±åƒå¿«é€’é…é€æ—¶é—´ï¼š
- **æ ‡å‡†æ—¶æ•ˆ**ï¼š3å¤©å†…é€åˆ°ç®—æ­£å¸¸
- **è¶…æ—¶å®šä¹‰**ï¼šè¶…è¿‡3å¤©å°±ç®—æ…¢äº†ï¼Œéœ€è¦å…³æ³¨

### 3.2 é…ç½®æ…¢SQLé˜ˆå€¼



```java
@Bean
public MybatisPlusInterceptor mybatisPlusInterceptor() {
    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
    
    // åˆ›å»ºæ€§èƒ½åˆ†ææ’ä»¶
    PerformanceInterceptor performanceInterceptor = new PerformanceInterceptor();
    
    // è®¾ç½®æ…¢SQLé˜ˆå€¼ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰
    performanceInterceptor.setMaxTime(100);  // 100ms
    
    // è®¾ç½®æ˜¯å¦æ ¼å¼åŒ–SQLï¼Œä¾¿äºé˜…è¯»
    performanceInterceptor.setFormat(true);
    
    interceptor.addInnerInterceptor(performanceInterceptor);
    
    return interceptor;
}
```

**ğŸ”¢ å‚æ•°è¯´æ˜**ï¼š
- `setMaxTime(100)`ï¼šè¶…è¿‡100æ¯«ç§’å°±ç®—æ…¢SQL
- `setFormat(true)`ï¼šæŠŠSQLè¯­å¥æ ¼å¼åŒ–ï¼Œæ–¹ä¾¿æŸ¥çœ‹

### 3.3 é˜ˆå€¼è®¾ç½®å»ºè®®



**ğŸ“Š ä¸åŒåœºæ™¯çš„é˜ˆå€¼å‚è€ƒ**

| **æŸ¥è¯¢ç±»å‹** | **å»ºè®®é˜ˆå€¼** | **è¯´æ˜** |
|-------------|------------|---------|
| ğŸ” ä¸»é”®æŸ¥è¯¢ | 10-50ms | æœ€å¿«ï¼Œæœ‰ç´¢å¼•æ”¯æŒ |
| ğŸ“‹ åˆ—è¡¨æŸ¥è¯¢ | 50-200ms | ä¸€èˆ¬æŸ¥è¯¢ï¼Œæ•°æ®é‡å° |
| ğŸ“Š ç»Ÿè®¡æŸ¥è¯¢ | 200-500ms | å¤æ‚è®¡ç®—ï¼Œå¯ä»¥ç¨æ…¢ |
| ğŸ“ˆ æŠ¥è¡¨æŸ¥è¯¢ | 500-1000ms | å¤§é‡æ•°æ®ï¼Œå…è®¸æ›´æ…¢ |

**ğŸ’¡ è®¾ç½®æŠ€å·§**
```
1. ä»ä¸¥æ ¼å¼€å§‹ï¼š
   - å…ˆè®¾ç½®è¾ƒå°çš„é˜ˆå€¼ï¼ˆå¦‚50msï¼‰
   - çœ‹çœ‹æœ‰å“ªäº›SQLè¶…æ—¶

2. é€æ­¥è°ƒæ•´ï¼š
   - åˆç†çš„SQLé€‚å½“æ”¾å®½é˜ˆå€¼
   - ä¸åˆç†çš„SQLè¿›è¡Œä¼˜åŒ–

3. åŒºåˆ†ç¯å¢ƒï¼š
   - å¼€å‘ç¯å¢ƒï¼šé˜ˆå€¼ä¸¥æ ¼ï¼Œå°½æ—©å‘ç°é—®é¢˜
   - æµ‹è¯•ç¯å¢ƒï¼šé˜ˆå€¼é€‚ä¸­ï¼Œæ¨¡æ‹ŸçœŸå®æƒ…å†µ
```

---

## 4. ğŸ“Š æ‰§è¡Œæ—¶é—´ç»Ÿè®¡åˆ†æ



### 4.1 æŸ¥çœ‹SQLæ‰§è¡Œæ—¶é—´



**ğŸ” æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹**
```
=========================== SQLæ‰§è¡Œä¿¡æ¯ ===========================
æ‰§è¡ŒSQLï¼šSELECT id, name, age FROM user WHERE age > 18
æ‰§è¡Œè€—æ—¶ï¼š85 ms
æ‰§è¡Œæ—¶é—´ï¼š2025-09-23 14:30:15
===================================================================

âš ï¸ æ…¢SQLè­¦å‘Šï¼šä»¥ä¸‹SQLæ‰§è¡Œæ—¶é—´è¶…è¿‡é˜ˆå€¼ï¼ˆ100msï¼‰
æ‰§è¡ŒSQLï¼šSELECT * FROM order WHERE create_time > '2025-01-01'
æ‰§è¡Œè€—æ—¶ï¼š256 ms  << è¶…è¿‡é˜ˆå€¼ï¼
å»ºè®®ï¼šæ£€æŸ¥ç´¢å¼•æˆ–ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶
===================================================================
```

### 4.2 ç»Ÿè®¡ä¿¡æ¯è§£è¯»



**ğŸ“ˆ æ€§èƒ½æ•°æ®å«ä¹‰**

```
æ—¶é—´ç»´åº¦ç»Ÿè®¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SQLæ‰§è¡Œæ—¶é—´åˆ†å¸ƒ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0-50ms:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45%     â”‚ â† å¿«é€ŸæŸ¥è¯¢
â”‚ 50-100ms:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   30%     â”‚ â† æ­£å¸¸æŸ¥è¯¢  
â”‚ 100-200ms: â–ˆâ–ˆâ–ˆ      15%     â”‚ â† éœ€è¦å…³æ³¨
â”‚ 200ms+:    â–ˆâ–ˆ       10%     â”‚ â† éœ€è¦ä¼˜åŒ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ¯ åˆ†æé‡ç‚¹**
- **å¤§éƒ¨åˆ†æŸ¥è¯¢**ï¼šåº”è¯¥åœ¨50mså†…å®Œæˆ
- **å°‘æ•°æ…¢æŸ¥è¯¢**ï¼šè¶…è¿‡100mséœ€è¦ä¼˜åŒ–
- **ææ…¢æŸ¥è¯¢**ï¼šè¶…è¿‡500mså¿…é¡»ä¼˜åŒ–

### 4.3 è‡ªå®šä¹‰ç»Ÿè®¡æ—¥å¿—



```java
@Component
public class SqlPerformanceLogger {
    
    private static final Logger log = LoggerFactory.getLogger(SqlPerformanceLogger.class);
    
    /**
     * è®°å½•SQLæ‰§è¡Œä¿¡æ¯
     */
    public void logSqlPerformance(String sql, long executeTime) {
        
        // æ ¹æ®æ‰§è¡Œæ—¶é—´åˆ†çº§è®°å½•
        if (executeTime < 50) {
            // å¿«é€ŸæŸ¥è¯¢ï¼Œdebugçº§åˆ«
            log.debug("âœ… å¿«é€ŸSQL [{}ms]: {}", executeTime, sql);
            
        } else if (executeTime < 200) {
            // æ­£å¸¸æŸ¥è¯¢ï¼Œinfoçº§åˆ«
            log.info("âš¡ æ­£å¸¸SQL [{}ms]: {}", executeTime, sql);
            
        } else if (executeTime < 500) {
            // æ…¢æŸ¥è¯¢ï¼Œwarnçº§åˆ«
            log.warn("âš ï¸ æ…¢SQL [{}ms]: {}", executeTime, sql);
            
        } else {
            // ææ…¢æŸ¥è¯¢ï¼Œerrorçº§åˆ«
            log.error("âŒ ææ…¢SQL [{}ms]: {}", executeTime, sql);
        }
    }
}
```

---

## 5. ğŸ› ï¸ å¼€å‘ç¯å¢ƒè°ƒè¯•æŠ€å·§



### 5.1 å¼€å‘ç¯å¢ƒé…ç½®ä¼˜åŒ–



**ğŸ“ application-dev.ymlé…ç½®**
```yaml
# MyBatis-Plusé…ç½®

mybatis-plus:
  configuration:
#    # æ‰“å°å®Œæ•´SQL
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  
#  # æ€§èƒ½åˆ†æé…ç½®
  performance:
#    # å¯ç”¨æ€§èƒ½åˆ†æ
    enable: true
#    # æ…¢SQLé˜ˆå€¼ï¼ˆæ¯«ç§’ï¼‰
    max-time: 100
#    # æ ¼å¼åŒ–SQL
    format: true

# æ—¥å¿—é…ç½®

logging:
  level:
#    # MyBatisæ—¥å¿—çº§åˆ«
    com.baomidou.mybatisplus: debug
#    # ä½ çš„Mapperæ¥å£åŒ…
    com.example.mapper: debug
```

### 5.2 å®æ—¶è°ƒè¯•æ–¹æ³•



**ğŸ” è°ƒè¯•æ­¥éª¤æ¼”ç¤º**

```java
@Service
public class UserService {
    
    @Autowired
    private UserMapper userMapper;
    
    /**
     * æµ‹è¯•æ…¢SQLæ£€æµ‹
     */
    public void testSlowSql() {
        
        // ç¬¬1æ­¥ï¼šæ‰§è¡Œä¸€ä¸ªå¿«é€ŸæŸ¥è¯¢
        System.out.println(">>> æµ‹è¯•å¿«é€ŸæŸ¥è¯¢");
        User user = userMapper.selectById(1);
        // è¾“å‡ºï¼šâœ… å¿«é€ŸSQL [15ms]: SELECT * FROM user WHERE id = 1
        
        // ç¬¬2æ­¥ï¼šæ‰§è¡Œä¸€ä¸ªæ…¢æŸ¥è¯¢ï¼ˆæ²¡æœ‰ç´¢å¼•ï¼‰
        System.out.println(">>> æµ‹è¯•æ…¢æŸ¥è¯¢");
        List<User> users = userMapper.selectList(
            new QueryWrapper<User>().like("address", "åŒ—äº¬")
        );
        // è¾“å‡ºï¼šâš ï¸ æ…¢SQL [156ms]: SELECT * FROM user WHERE address LIKE '%åŒ—äº¬%'
        
        // ç¬¬3æ­¥ï¼šæŸ¥çœ‹æ€§èƒ½å»ºè®®
        // æ§åˆ¶å°ä¼šæç¤ºï¼šå»ºè®®ä¸ºaddresså­—æ®µæ·»åŠ ç´¢å¼•
    }
}
```

### 5.3 å¸¸è§è°ƒè¯•åœºæ™¯



**ğŸ“‹ è°ƒè¯•æ£€æŸ¥æ¸…å•**

- [ ] **æ£€æŸ¥SQLæ˜¯å¦æ­£ç¡®ç”Ÿæˆ**
  ```
  é—®é¢˜ï¼šå‚æ•°ç»‘å®šé”™è¯¯
  è§£å†³ï¼šæŸ¥çœ‹å®Œæ•´SQLï¼Œæ£€æŸ¥å‚æ•°å€¼
  ```

- [ ] **éªŒè¯ç´¢å¼•æ˜¯å¦ç”Ÿæ•ˆ**
  ```
  é—®é¢˜ï¼šæ‰§è¡Œæ—¶é—´å¼‚å¸¸é•¿
  è§£å†³ï¼šæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œç¡®è®¤ç”¨äº†ç´¢å¼•
  ```

- [ ] **åˆ†æN+1æŸ¥è¯¢é—®é¢˜**
  ```
  é—®é¢˜ï¼šå¾ªç¯ä¸­æŸ¥è¯¢æ•°æ®åº“
  è§£å†³ï¼šçœ‹SQLæ‰§è¡Œæ¬¡æ•°ï¼Œæ”¹ç”¨æ‰¹é‡æŸ¥è¯¢
  ```

**ğŸ’¡ è°ƒè¯•æŠ€å·§**
```
1. å¯¹æ¯”æµ‹è¯•ï¼š
   - ä¼˜åŒ–å‰è®°å½•æ‰§è¡Œæ—¶é—´
   - ä¼˜åŒ–åå†æ¬¡è®°å½•
   - å¯¹æ¯”æ€§èƒ½æå‡

2. é€æ­¥æ’æŸ¥ï¼š
   - å…ˆçœ‹æ˜¯å¦æœ‰ç´¢å¼•
   - å†çœ‹æŸ¥è¯¢æ¡ä»¶æ˜¯å¦åˆç†
   - æœ€åçœ‹æ˜¯å¦æœ‰N+1é—®é¢˜

3. ä½¿ç”¨explainï¼š
   - æŸ¥çœ‹SQLæ‰§è¡Œè®¡åˆ’
   - ç¡®è®¤ç´¢å¼•ä½¿ç”¨æƒ…å†µ
```

---

## 6. ğŸ“ SQLæ‰§è¡Œæ—¥å¿—ç®¡ç†



### 6.1 æ—¥å¿—çº§åˆ«é…ç½®



**ğŸ¯ ä¸åŒçº§åˆ«çš„æ—¥å¿—å†…å®¹**

```yaml
logging:
  level:
#    # TRACEï¼šæœ€è¯¦ç»†ï¼ŒåŒ…å«å‚æ•°ç»‘å®šè¿‡ç¨‹
    com.baomidou.mybatisplus: TRACE
    
#    # DEBUGï¼šè¯¦ç»†SQLå’Œæ‰§è¡Œæ—¶é—´
    com.baomidou.mybatisplus: DEBUG
    
#    # INFOï¼šé‡è¦æ“ä½œå’Œæ…¢SQL
    com.baomidou.mybatisplus: INFO
    
#    # WARNï¼šåªæ˜¾ç¤ºè­¦å‘Šï¼ˆæ…¢SQLï¼‰
    com.baomidou.mybatisplus: WARN
```

**ğŸ“Š å„çº§åˆ«è¾“å‡ºå¯¹æ¯”**

| **çº§åˆ«** | **è¾“å‡ºå†…å®¹** | **ä¿¡æ¯é‡** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|-----------|------------|
| TRACE | SQL+å‚æ•°+ç»“æœ+è€—æ—¶ | â­â­â­â­â­ | æ·±åº¦è°ƒè¯• |
| DEBUG | SQL+å‚æ•°+è€—æ—¶ | â­â­â­â­ | æ—¥å¸¸å¼€å‘ |
| INFO | é‡è¦æ“ä½œ+æ…¢SQL | â­â­â­ | æµ‹è¯•ç¯å¢ƒ |
| WARN | ä»…æ…¢SQLè­¦å‘Š | â­â­ | ç”Ÿäº§ç›‘æ§ |

### 6.2 æ—¥å¿—è¾“å‡ºæ ¼å¼åŒ–



**ğŸ“„ è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼**

```java
@Slf4j
@Component
public class SqlLogFormatter {
    
    /**
     * æ ¼å¼åŒ–SQLæ—¥å¿—
     */
    public String formatSqlLog(String sql, long executeTime, Object result) {
        
        StringBuilder log = new StringBuilder();
        log.append("\n========== SQLæ‰§è¡Œæ—¥å¿— ==========\n");
        
        // 1. SQLè¯­å¥ï¼ˆæ ¼å¼åŒ–ï¼‰
        log.append("SQLè¯­å¥ï¼š\n");
        log.append(formatSql(sql));
        log.append("\n");
        
        // 2. æ‰§è¡Œæ—¶é—´ï¼ˆå¸¦é¢œè‰²æ ‡è¯†ï¼‰
        log.append("æ‰§è¡Œè€—æ—¶ï¼š");
        log.append(formatTime(executeTime));
        log.append("\n");
        
        // 3. ç»“æœæ‘˜è¦
        log.append("ç»“æœï¼š");
        if (result instanceof List) {
            log.append("æŸ¥è¯¢åˆ° ").append(((List<?>) result).size()).append(" æ¡è®°å½•");
        } else if (result instanceof Integer) {
            log.append("å½±å“ ").append(result).append(" è¡Œ");
        }
        log.append("\n");
        
        log.append("===================================\n");
        
        return log.toString();
    }
    
    // æ ¼å¼åŒ–SQLè¯­å¥
    private String formatSql(String sql) {
        return sql.replaceAll("\\s+", " ")  // å¤šä¸ªç©ºæ ¼å˜ä¸€ä¸ª
                  .replaceAll(",", ",\n  ")  // é€—å·åæ¢è¡Œ
                  .replaceAll(" WHERE ", "\nWHERE ")  // WHEREæ¢è¡Œ
                  .replaceAll(" FROM ", "\nFROM ");   // FROMæ¢è¡Œ
    }
    
    // æ ¼å¼åŒ–æ‰§è¡Œæ—¶é—´ï¼ˆå¸¦å›¾æ ‡ï¼‰
    private String formatTime(long ms) {
        if (ms < 50) return "âš¡ " + ms + "msï¼ˆå¿«é€Ÿï¼‰";
        if (ms < 200) return "âœ… " + ms + "msï¼ˆæ­£å¸¸ï¼‰";
        if (ms < 500) return "âš ï¸ " + ms + "msï¼ˆåæ…¢ï¼‰";
        return "âŒ " + ms + "msï¼ˆå¾ˆæ…¢ï¼ï¼‰";
    }
}
```

### 6.3 æ—¥å¿—æ–‡ä»¶ç®¡ç†



**ğŸ“ æ—¥å¿—åˆ†ç±»å­˜å‚¨**

```yaml
logging:
  file:
#    # æ‰€æœ‰æ—¥å¿—
    name: logs/application.log
  pattern:
#    # æ—¥å¿—æ ¼å¼
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  
#  # æŒ‰æ—¥å¿—çº§åˆ«åˆ†æ–‡ä»¶
  logback:
    rollingpolicy:
#      # æ…¢SQLå•ç‹¬è®°å½•
      file-name-pattern: logs/slow-sql-%d{yyyy-MM-dd}.log
      max-file-size: 10MB
      max-history: 30
```

---

## 7. ğŸ¯ æ€§èƒ½ç“¶é¢ˆå®šä½æ–¹æ³•



### 7.1 è¯†åˆ«æ€§èƒ½é—®é¢˜



**ğŸ” é—®é¢˜è¯Šæ–­æµç¨‹å›¾**
```
å‘ç°æ…¢SQL
    â†“
æ£€æŸ¥SQLæ‰§è¡Œè®¡åˆ’
    â†“
åˆ¤æ–­é—®é¢˜ç±»å‹
    â”œâ”€â†’ æ²¡æœ‰ç´¢å¼• â†’ æ·»åŠ ç´¢å¼•
    â”œâ”€â†’ ç´¢å¼•å¤±æ•ˆ â†’ ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶
    â”œâ”€â†’ æ•°æ®é‡å¤§ â†’ åˆ†é¡µæˆ–åˆ†è¡¨
    â””â”€â†’ æŸ¥è¯¢å¤æ‚ â†’ ç®€åŒ–SQLæˆ–ç¼“å­˜
```

### 7.2 å¸¸è§æ€§èƒ½é—®é¢˜å®šä½



**ğŸ“‹ æ€§èƒ½é—®é¢˜æ£€æŸ¥è¡¨**

**ğŸ”¸ ç´¢å¼•é—®é¢˜**
```sql
-- é—®é¢˜SQLï¼šå…¨è¡¨æ‰«æ
SELECT * FROM user WHERE name LIKE '%å¼ %';

-- å®šä½æ–¹æ³•ï¼š
EXPLAIN SELECT * FROM user WHERE name LIKE '%å¼ %';
-- è¾“å‡ºï¼štype=ALLï¼ˆå…¨è¡¨æ‰«æï¼Œå¾ˆæ…¢ï¼ï¼‰

-- è§£å†³æ–¹æ¡ˆï¼š
-- 1. æ”¹ç”¨å‰ç¼€åŒ¹é…
SELECT * FROM user WHERE name LIKE 'å¼ %';
-- 2. ä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼ˆå¦‚æœéœ€è¦æ¨¡ç³ŠæŸ¥è¯¢ï¼‰
```

**ğŸ”¸ N+1æŸ¥è¯¢é—®é¢˜**
```java
// é—®é¢˜ä»£ç ï¼šå¾ªç¯æŸ¥è¯¢ï¼ˆN+1é—®é¢˜ï¼‰
List<Order> orders = orderMapper.selectList(null);
for (Order order : orders) {
    // æ¯æ¬¡å¾ªç¯éƒ½æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼
    User user = userMapper.selectById(order.getUserId());
    order.setUser(user);
}

// æ—¥å¿—æ˜¾ç¤ºï¼š
// SQL [15ms]: SELECT * FROM order          â† 1æ¬¡æŸ¥è¯¢
// SQL [8ms]: SELECT * FROM user WHERE id=1  â† Næ¬¡æŸ¥è¯¢
// SQL [8ms]: SELECT * FROM user WHERE id=2
// SQL [8ms]: SELECT * FROM user WHERE id=3
// ...æ€»è®¡æŸ¥è¯¢äº†N+1æ¬¡ï¼

// è§£å†³æ–¹æ¡ˆï¼šæ‰¹é‡æŸ¥è¯¢
List<Order> orders = orderMapper.selectList(null);
List<Long> userIds = orders.stream()
    .map(Order::getUserId)
    .collect(Collectors.toList());
// ä¸€æ¬¡æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
List<User> users = userMapper.selectBatchIds(userIds);
```

**ğŸ”¸ æ•°æ®é‡é—®é¢˜**
```java
// é—®é¢˜ï¼šä¸€æ¬¡æŸ¥è¯¢å¤ªå¤šæ•°æ®
List<Order> orders = orderMapper.selectList(null);
// æ—¥å¿—ï¼šSQL [2560ms]: SELECT * FROM order  â† 100ä¸‡æ¡æ•°æ®ï¼

// è§£å†³æ–¹æ¡ˆï¼šåˆ†é¡µæŸ¥è¯¢
Page<Order> page = new Page<>(1, 100);  // æ¯é¡µ100æ¡
Page<Order> result = orderMapper.selectPage(page, null);
// æ—¥å¿—ï¼šSQL [25ms]: SELECT * FROM order LIMIT 100
```

### 7.3 æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ¡ˆä¾‹



**ğŸ“š æ¡ˆä¾‹1ï¼šå•†å“åˆ—è¡¨æŸ¥è¯¢ä¼˜åŒ–**

```java
// ä¼˜åŒ–å‰ï¼šæ…¢SQLï¼ˆæ‰§è¡Œ356msï¼‰
@GetMapping("/products")
public List<Product> getProducts(String category) {
    return productMapper.selectList(
        new QueryWrapper<Product>()
            .eq("category", category)
            .orderBy(true, false, "create_time")  // æ²¡æœ‰ç´¢å¼•æ’åº
    );
}

// æ€§èƒ½åˆ†ææ˜¾ç¤ºï¼š
// âš ï¸ æ…¢SQL [356ms]: 
// SELECT * FROM product WHERE category = 'ç”µå­' ORDER BY create_time DESC
// é—®é¢˜ï¼šcreate_timeæ²¡æœ‰ç´¢å¼•ï¼Œæ’åºæ…¢

// ä¼˜åŒ–æ–¹æ¡ˆï¼š
// 1. æ·»åŠ ç´¢å¼•
ALTER TABLE product ADD INDEX idx_category_time(category, create_time);

// 2. ä¼˜åŒ–æŸ¥è¯¢
@GetMapping("/products")
public List<Product> getProducts(String category) {
    return productMapper.selectList(
        new QueryWrapper<Product>()
            .eq("category", category)
            .orderByDesc("create_time")
            .last("LIMIT 100")  // é™åˆ¶è¿”å›æ•°é‡
    );
}

// ä¼˜åŒ–åï¼š
// âœ… å¿«é€ŸSQL [18ms]: æ‰§è¡Œæ—¶é—´é™ä½95%ï¼
```

**ğŸ“š æ¡ˆä¾‹2ï¼šç»Ÿè®¡æŸ¥è¯¢ä¼˜åŒ–**

```java
// ä¼˜åŒ–å‰ï¼šææ…¢SQLï¼ˆæ‰§è¡Œ1250msï¼‰
@GetMapping("/order/stats")
public Map<String, Object> getOrderStats() {
    // åˆ†åˆ«ç»Ÿè®¡ï¼ˆ3æ¬¡æŸ¥è¯¢ï¼‰
    Integer todayCount = orderMapper.selectCount(
        new QueryWrapper<Order>()
            .ge("create_time", LocalDate.now())
    );
    Integer monthCount = orderMapper.selectCount(
        new QueryWrapper<Order>()
            .ge("create_time", LocalDate.now().withDayOfMonth(1))
    );
    BigDecimal totalAmount = orderMapper.selectTotalAmount();
    
    // è¿”å›ç»“æœ...
}

// ä¼˜åŒ–åï¼šä¸€æ¬¡æŸ¥è¯¢å®Œæˆï¼ˆæ‰§è¡Œ85msï¼‰
@GetMapping("/order/stats")
public Map<String, Object> getOrderStats() {
    // ä½¿ç”¨è‡ªå®šä¹‰SQLï¼Œä¸€æ¬¡æ€§æŸ¥å‡ºæ‰€æœ‰ç»Ÿè®¡
    return orderMapper.getOrderStatistics();
}

// Mapperä¸­çš„SQL
@Select("SELECT " +
        "COUNT(CASE WHEN DATE(create_time) = CURDATE() THEN 1 END) as todayCount, " +
        "COUNT(CASE WHEN DATE(create_time) >= DATE_FORMAT(NOW(),'%Y-%m-01') THEN 1 END) as monthCount, " +
        "IFNULL(SUM(amount), 0) as totalAmount " +
        "FROM orders")
Map<String, Object> getOrderStatistics();

// æ€§èƒ½æå‡ï¼š1250ms â†’ 85msï¼ˆæå‡93%ï¼‰
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ æ€§èƒ½æ’ä»¶ä½œç”¨ï¼šè‡ªåŠ¨ç›‘æµ‹SQLæ‰§è¡Œæ—¶é—´ï¼Œå‘ç°æ…¢æŸ¥è¯¢
ğŸ”¸ æ…¢SQLé˜ˆå€¼ï¼šå®šä¹‰å¤šæ…¢ç®—æ…¢çš„æ ‡å‡†ï¼ˆå»ºè®®50-200msï¼‰
ğŸ”¸ ç¯å¢ƒéš”ç¦»ï¼šåªåœ¨å¼€å‘/æµ‹è¯•ç¯å¢ƒå¯ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒç¦ç”¨
ğŸ”¸ æ—¥å¿—åˆ†æï¼šé€šè¿‡æ—¥å¿—å‘ç°æ€§èƒ½ç“¶é¢ˆï¼ŒæŒ‡å¯¼ä¼˜åŒ–
ğŸ”¸ é—®é¢˜å®šä½ï¼šç´¢å¼•ã€N+1ã€æ•°æ®é‡æ˜¯æœ€å¸¸è§çš„ä¸‰å¤§é—®é¢˜
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ æ€§èƒ½åˆ†æçš„ä»·å€¼**
```
æå‰å‘ç°é—®é¢˜ï¼š
- å¼€å‘é˜¶æ®µå°±èƒ½å‘ç°æ…¢SQL
- é¿å…é—®é¢˜å¸¦åˆ°ç”Ÿäº§ç¯å¢ƒ
- é™ä½çº¿ä¸Šæ•…éšœé£é™©

é‡åŒ–ä¼˜åŒ–æ•ˆæœï¼š
- ä¼˜åŒ–å‰åè€—æ—¶å¯¹æ¯”
- ç”¨æ•°æ®è¯´è¯ï¼Œæ•ˆæœä¸€ç›®äº†ç„¶
```

**ğŸ”¹ ä½¿ç”¨æ³¨æ„äº‹é¡¹**
```
âœ… æ­£ç¡®ä½¿ç”¨ï¼š
- å¼€å‘ç¯å¢ƒå¿…é¡»å¼€å¯
- è®¾ç½®åˆç†çš„é˜ˆå€¼
- åŠæ—¶ä¼˜åŒ–æ…¢SQL

âŒ é¿å…è¯¯ç”¨ï¼š
- ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨
- ä¸è¦å¿½ç•¥æ€§èƒ½è­¦å‘Š
- ä¸è¦åªçœ‹ä¸ä¼˜åŒ–
```

### 8.3 å®é™…åº”ç”¨å»ºè®®



**ğŸ› ï¸ æ—¥å¸¸å¼€å‘æœ€ä½³å®è·µ**

```
1. å¼€å‘é˜¶æ®µï¼š
   âœ… å¯ç”¨æ€§èƒ½åˆ†ææ’ä»¶
   âœ… è®¾ç½®ä¸¥æ ¼çš„é˜ˆå€¼ï¼ˆå¦‚50msï¼‰
   âœ… æ¯æ¬¡æäº¤ä»£ç å‰æ£€æŸ¥æ…¢SQL

2. æµ‹è¯•é˜¶æ®µï¼š
   âœ… æ¨¡æ‹ŸçœŸå®æ•°æ®é‡
   âœ… éªŒè¯ä¼˜åŒ–æ•ˆæœ
   âœ… è®°å½•æ€§èƒ½åŸºå‡†

3. ä¸Šçº¿å‰ï¼š
   âœ… å…³é—­æ€§èƒ½åˆ†ææ’ä»¶
   âœ… æ¸…ç†è°ƒè¯•æ—¥å¿—
   âœ… é…ç½®ç”Ÿäº§çº§åˆ«æ—¥å¿—
```

**ğŸ“Š æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆçº§**
```
ä¼˜å…ˆçº§æ’åºï¼š
1. æ²¡æœ‰ç´¢å¼• â†’ ç«‹å³æ·»åŠ ï¼ˆæå‡10-100å€ï¼‰
2. N+1æŸ¥è¯¢ â†’ æ”¹æ‰¹é‡æŸ¥è¯¢ï¼ˆæå‡5-50å€ï¼‰
3. å…¨è¡¨æŸ¥è¯¢ â†’ åŠ æ¡ä»¶é™åˆ¶ï¼ˆæå‡2-10å€ï¼‰
4. å¤æ‚SQL â†’ ç®€åŒ–æˆ–æ‹†åˆ†ï¼ˆæå‡2-5å€ï¼‰
```

### 8.4 å­¦ä¹ æ£€æŸ¥æ¸…å•



- [ ] ç†è§£æ€§èƒ½åˆ†ææ’ä»¶çš„ä½œç”¨
- [ ] ä¼šé…ç½®æ…¢SQLæ£€æµ‹é˜ˆå€¼
- [ ] èƒ½é€šè¿‡æ—¥å¿—å‘ç°æ€§èƒ½é—®é¢˜
- [ ] æŒæ¡å¸¸è§æ€§èƒ½é—®é¢˜çš„å®šä½æ–¹æ³•
- [ ] çŸ¥é“å¦‚ä½•ä¼˜åŒ–æ…¢SQL

**ğŸ”‘ æ ¸å¿ƒè®°å¿†å£è¯€**
> æ€§èƒ½æ’ä»¶å¸®ä½ æ‰¾ï¼Œæ…¢SQLä¸€ä¸ªéƒ½è·‘ä¸æ‰
> å¼€å‘ç¯å¢ƒå¿…é¡»å¼€ï¼Œç”Ÿäº§ç¯å¢ƒè¦å…³æ‰
> ç´¢å¼•N+1æ•°æ®é‡ï¼Œä¸‰å¤§é—®é¢˜è¦è®°ç‰¢
> æ—¥å¿—åˆ†ææ˜¯å…³é”®ï¼Œä¼˜åŒ–æ•ˆæœçœ‹å¾—åˆ°

**ğŸ’¡ å»¶ä¼¸å­¦ä¹ å»ºè®®**
- æ·±å…¥å­¦ä¹ MySQLç´¢å¼•åŸç†
- äº†è§£æ•°æ®åº“æ‰§è¡Œè®¡åˆ’åˆ†æ
- ç ”ç©¶åˆ†å¸ƒå¼ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–
- å­¦ä¹ ç¼“å­˜æŠ€æœ¯ï¼ˆRedisç­‰ï¼‰

---

# ğŸ¯ **å®è·µç»ƒä¹ å»ºè®®**



**ç»ƒä¹ 1ï¼šé…ç½®æ€§èƒ½æ’ä»¶**
```
ä»»åŠ¡ï¼šåœ¨é¡¹ç›®ä¸­é…ç½®æ€§èƒ½åˆ†ææ’ä»¶
è¦æ±‚ï¼š
1. åªåœ¨å¼€å‘ç¯å¢ƒå¯ç”¨
2. è®¾ç½®é˜ˆå€¼ä¸º100ms
3. éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
```

**ç»ƒä¹ 2ï¼šå‘ç°å¹¶ä¼˜åŒ–æ…¢SQL**
```
ä»»åŠ¡ï¼šæ‰¾å‡ºé¡¹ç›®ä¸­çš„æ…¢SQLå¹¶ä¼˜åŒ–
æ­¥éª¤ï¼š
1. è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹æ€§èƒ½æ—¥å¿—
2. æ‰¾å‡ºæ‰§è¡Œæ—¶é—´è¶…è¿‡é˜ˆå€¼çš„SQL
3. åˆ†æåŸå› ï¼ˆç´¢å¼•/N+1/æ•°æ®é‡ï¼‰
4. è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹æ¯”æ•ˆæœ
```

**ç»ƒä¹ 3ï¼šæ€§èƒ½æµ‹è¯•æŠ¥å‘Š**
```
ä»»åŠ¡ï¼šç”Ÿæˆä¸€ä»½æ€§èƒ½åˆ†ææŠ¥å‘Š
å†…å®¹ï¼š
1. åˆ—å‡ºæ‰€æœ‰æ…¢SQL
2. åˆ†ææ…¢çš„åŸå› 
3. è®°å½•ä¼˜åŒ–æ–¹æ¡ˆ
4. å¯¹æ¯”ä¼˜åŒ–å‰åçš„æ€§èƒ½
```