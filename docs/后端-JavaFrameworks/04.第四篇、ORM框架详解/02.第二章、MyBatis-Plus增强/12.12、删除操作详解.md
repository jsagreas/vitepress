---
title: 12ã€åˆ é™¤æ“ä½œè¯¦è§£
---
## ğŸ“š ç›®å½•

1. [åˆ é™¤æ“ä½œæ¦‚è¿°](#1-åˆ é™¤æ“ä½œæ¦‚è¿°)
2. [ä¸»é”®åˆ é™¤deleteById](#2-ä¸»é”®åˆ é™¤deleteById)
3. [æ‰¹é‡åˆ é™¤deleteBatchIds](#3-æ‰¹é‡åˆ é™¤deleteBatchIds)
4. [æ¡ä»¶åˆ é™¤deleteByMap](#4-æ¡ä»¶åˆ é™¤deleteByMap)
5. [æ¡ä»¶æ„é€ å™¨åˆ é™¤delete](#5-æ¡ä»¶æ„é€ å™¨åˆ é™¤delete)
6. [ç‰©ç†åˆ é™¤ä¸é€»è¾‘åˆ é™¤](#6-ç‰©ç†åˆ é™¤ä¸é€»è¾‘åˆ é™¤)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—‘ï¸ åˆ é™¤æ“ä½œæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åˆ é™¤æ“ä½œ


**é€šä¿—ç†è§£**ï¼šåˆ é™¤æ“ä½œå°±åƒä»ä¹¦æ¶ä¸Šæ‹¿æ‰ä¸€æœ¬ä¹¦ï¼Œè®©å®ƒä¸å†å­˜åœ¨ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œåˆ é™¤å°±æ˜¯æŠŠä¸éœ€è¦çš„æ•°æ®ç§»é™¤ã€‚

```
ç”Ÿæ´»åœºæ™¯ç±»æ¯”ï¼š
ğŸ“š ä¹¦æ¶ä¸Šçš„ä¹¦ â†’ æ•°æ®åº“ä¸­çš„è®°å½•
ğŸ—‘ï¸ æ‰”è¿›åƒåœ¾æ¡¶ â†’ ç‰©ç†åˆ é™¤ï¼ˆå½»åº•åˆ æ‰ï¼‰
ğŸ“¦ æ”¾è¿›å‚¨è—å®¤ â†’ é€»è¾‘åˆ é™¤ï¼ˆæ ‡è®°ä¸ºåˆ é™¤ï¼Œä½†è¿˜åœ¨ï¼‰
```

### 1.2 MyBatis-Plusæä¾›çš„åˆ é™¤æ–¹æ³•


**BaseMapperæ¥å£ä¸­çš„åˆ é™¤æ–¹æ³•å…¨å®¶ç¦**ï¼š

| æ–¹æ³•å | ä½œç”¨ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| `deleteById` | æ ¹æ®ä¸»é”®åˆ é™¤ä¸€æ¡è®°å½• | çŸ¥é“å…·ä½“IDï¼Œåˆ å•æ¡æ•°æ® |
| `deleteBatchIds` | æ ¹æ®ä¸»é”®æ‰¹é‡åˆ é™¤ | çŸ¥é“å¤šä¸ªIDï¼Œæ‰¹é‡åˆ é™¤ |
| `deleteByMap` | æ ¹æ®Mapæ¡ä»¶åˆ é™¤ | ç®€å•æ¡ä»¶åˆ é™¤ |
| `delete` | æ ¹æ®æ¡ä»¶æ„é€ å™¨åˆ é™¤ | å¤æ‚æ¡ä»¶åˆ é™¤ |

### 1.3 åˆ é™¤æ“ä½œçš„ä¸¤ç§æœ¬è´¨


```
ç‰©ç†åˆ é™¤ï¼ˆçœŸåˆ é™¤ï¼‰ï¼š
DELETE FROM user WHERE id = 1
â†“
æ•°æ®åº“è®°å½•ç›´æ¥æ¶ˆå¤±ï¼Œæ— æ³•æ¢å¤

é€»è¾‘åˆ é™¤ï¼ˆå‡åˆ é™¤ï¼‰ï¼š
UPDATE user SET deleted = 1 WHERE id = 1
â†“
æ•°æ®è¿˜åœ¨ï¼Œåªæ˜¯æ ‡è®°ä¸º"å·²åˆ é™¤"
```

**ä¸ºä»€ä¹ˆéœ€è¦é€»è¾‘åˆ é™¤ï¼Ÿ**
- âœ… æ•°æ®å¯ä»¥æ¢å¤ï¼ˆåæ‚”æ“ä½œï¼‰
- âœ… ä¿ç•™å†å²è®°å½•ï¼ˆæ•°æ®å®¡è®¡ï¼‰
- âœ… å…³è”æ•°æ®ä¸ä¼šä¸¢å¤±ï¼ˆè®¢å•å…³è”çš„ç”¨æˆ·ï¼‰
- âœ… ç¬¦åˆæŸäº›æ³•è§„è¦æ±‚ï¼ˆæ•°æ®ç•™å­˜æ”¿ç­–ï¼‰

---

## 2. ğŸ¯ ä¸»é”®åˆ é™¤deleteById


### 2.1 åŸºæœ¬æ¦‚å¿µ


**deleteById**ï¼šé€šè¿‡ä¸»é”®IDåˆ é™¤ä¸€æ¡è®°å½•ï¼Œè¿™æ˜¯æœ€ç®€å•ç›´æ¥çš„åˆ é™¤æ–¹å¼ã€‚

```
ç±»æ¯”ç†è§£ï¼š
å°±åƒä½ çŸ¥é“ä¸€æœ¬ä¹¦çš„ç¼–å·ï¼Œç›´æ¥ä»ä¹¦æ¶ä¸Šæ‹¿ä¸‹æ¥æ‰”æ‰
ä¹¦ç±ç¼–å· = ä¸»é”®ID
æ‹¿ä¸‹æ¥æ‰”æ‰ = deleteById
```

### 2.2 æ–¹æ³•å®šä¹‰


```java
// BaseMapperæ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰
int deleteById(Serializable id);
```

**å‚æ•°è¯´æ˜**ï¼š
- `id`ï¼šè¦åˆ é™¤è®°å½•çš„ä¸»é”®å€¼
- è¿”å›å€¼ï¼šå—å½±å“çš„è¡Œæ•°ï¼ˆæˆåŠŸåˆ é™¤è¿”å›1ï¼Œå¤±è´¥è¿”å›0ï¼‰

### 2.3 åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹


```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // ç¤ºä¾‹1ï¼šåˆ é™¤æŒ‡å®šç”¨æˆ·
    public void deleteUser() {
        // åˆ é™¤IDä¸º1çš„ç”¨æˆ·
        int result = userMapper.deleteById(1L);
        
        if (result > 0) {
            System.out.println("åˆ é™¤æˆåŠŸï¼");
        } else {
            System.out.println("åˆ é™¤å¤±è´¥ï¼Œç”¨æˆ·ä¸å­˜åœ¨");
        }
    }
}
```

**æ‰§è¡Œçš„SQL**ï¼š
```sql
DELETE FROM user WHERE id = 1
```

### 2.4 ä¸åŒä¸»é”®ç±»å‹çš„åˆ é™¤


```java
// Longç±»å‹ä¸»é”®
userMapper.deleteById(1L);

// Stringç±»å‹ä¸»é”®
userMapper.deleteById("user_001");

// Integerç±»å‹ä¸»é”®  
userMapper.deleteById(1);
```

### 2.5 è¿”å›å€¼çš„å®é™…æ„ä¹‰


```java
public void testDeleteResult() {
    // åˆ é™¤å­˜åœ¨çš„è®°å½•
    int result1 = userMapper.deleteById(1L);
    System.out.println(result1);  // è¾“å‡ºï¼š1ï¼ˆåˆ é™¤æˆåŠŸï¼‰
    
    // åˆ é™¤ä¸å­˜åœ¨çš„è®°å½•
    int result2 = userMapper.deleteById(999L);
    System.out.println(result2);  // è¾“å‡ºï¼š0ï¼ˆè®°å½•ä¸å­˜åœ¨ï¼‰
}
```

**å…³é”®ç†è§£**ï¼š
- è¿”å›å€¼ **1** = æˆåŠŸåˆ é™¤äº†1æ¡è®°å½•
- è¿”å›å€¼ **0** = æ²¡æœ‰åˆ é™¤ä»»ä½•è®°å½•ï¼ˆIDä¸å­˜åœ¨ï¼‰
- **ä¸ä¼šæŠ›å¼‚å¸¸**ï¼Œé€šè¿‡è¿”å›å€¼åˆ¤æ–­ç»“æœ

### 2.6 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯1ï¼šç”¨æˆ·æ³¨é”€è´¦å·**
```java
public boolean cancelAccount(Long userId) {
    int result = userMapper.deleteById(userId);
    return result > 0;
}
```

**åœºæ™¯2ï¼šåˆ é™¤è´­ç‰©è½¦å•†å“**
```java
public void removeCartItem(Long itemId) {
    int rows = cartMapper.deleteById(itemId);
    if (rows == 0) {
        throw new BusinessException("å•†å“ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤");
    }
}
```

---

## 3. ğŸ“¦ æ‰¹é‡åˆ é™¤deleteBatchIds


### 3.1 æ‰¹é‡åˆ é™¤çš„æ„ä¹‰


**ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡åˆ é™¤ï¼Ÿ**

```
å•æ¡åˆ é™¤ï¼ˆæ•ˆç‡ä½ï¼‰ï¼š
DELETE FROM user WHERE id = 1;
DELETE FROM user WHERE id = 2;
DELETE FROM user WHERE id = 3;
â†“ æ‰§è¡Œ3æ¬¡æ•°æ®åº“æ“ä½œ

æ‰¹é‡åˆ é™¤ï¼ˆæ•ˆç‡é«˜ï¼‰ï¼š
DELETE FROM user WHERE id IN (1, 2, 3);
â†“ åªæ‰§è¡Œ1æ¬¡æ•°æ®åº“æ“ä½œ
```

**æ€§èƒ½å¯¹æ¯”**ï¼š
- å•æ¬¡åˆ é™¤100æ¡ï¼šéœ€è¦100æ¬¡æ•°æ®åº“äº¤äº’
- æ‰¹é‡åˆ é™¤100æ¡ï¼šåªéœ€1æ¬¡æ•°æ®åº“äº¤äº’
- **æ€§èƒ½æå‡çº¦100å€**

### 3.2 æ–¹æ³•å®šä¹‰


```java
// BaseMapperæ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰
int deleteBatchIds(Collection<?> idList);
```

**å‚æ•°è¯´æ˜**ï¼š
- `idList`ï¼šä¸»é”®IDçš„é›†åˆï¼ˆListã€Setç­‰ï¼‰
- è¿”å›å€¼ï¼šæˆåŠŸåˆ é™¤çš„è®°å½•æ•°

### 3.3 åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹


```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // ç¤ºä¾‹1ï¼šåˆ é™¤å¤šä¸ªç”¨æˆ·
    public void batchDelete() {
        // æ–¹å¼1ï¼šä½¿ç”¨Arrays.asList()
        List<Long> ids = Arrays.asList(1L, 2L, 3L);
        int count = userMapper.deleteBatchIds(ids);
        System.out.println("åˆ é™¤äº†" + count + "æ¡è®°å½•");
    }
    
    // ç¤ºä¾‹2ï¼šåˆ é™¤é€‰ä¸­çš„å•†å“
    public void deleteSelectedProducts(List<Long> productIds) {
        if (productIds == null || productIds.isEmpty()) {
            return;
        }
        userMapper.deleteBatchIds(productIds);
    }
}
```

**æ‰§è¡Œçš„SQL**ï¼š
```sql
DELETE FROM user WHERE id IN (1, 2, 3)
```

### 3.4 ä¸åŒé›†åˆç±»å‹çš„ä½¿ç”¨


```java
// æ–¹å¼1ï¼šListé›†åˆ
List<Long> list = new ArrayList<>();
list.add(1L);
list.add(2L);
userMapper.deleteBatchIds(list);

// æ–¹å¼2ï¼šç›´æ¥ä½¿ç”¨Arrays.asList
userMapper.deleteBatchIds(Arrays.asList(1L, 2L, 3L));

// æ–¹å¼3ï¼šSeté›†åˆï¼ˆè‡ªåŠ¨å»é‡ï¼‰
Set<Long> set = new HashSet<>();
set.add(1L);
set.add(2L);
set.add(2L);  // é‡å¤çš„ä¼šè¢«å»é‡
userMapper.deleteBatchIds(set);  // å®é™…åªåˆ é™¤1å’Œ2
```

### 3.5 è¿”å›å€¼çš„å®é™…å«ä¹‰


```java
public void testBatchDeleteResult() {
    // å‡†å¤‡è¦åˆ é™¤çš„IDåˆ—è¡¨
    List<Long> ids = Arrays.asList(1L, 2L, 999L);
    
    // æ‰§è¡Œæ‰¹é‡åˆ é™¤
    int count = userMapper.deleteBatchIds(ids);
    
    // count = 2ï¼ˆåªåˆ é™¤äº†å­˜åœ¨çš„1å’Œ2ï¼Œ999ä¸å­˜åœ¨ï¼‰
    System.out.println("æˆåŠŸåˆ é™¤: " + count + "æ¡");
}
```

**å…³é”®ç†è§£**ï¼š
- è¿”å›å€¼ = **å®é™…åˆ é™¤çš„è®°å½•æ•°**
- ä¸å­˜åœ¨çš„IDä¼šè¢«**è‡ªåŠ¨å¿½ç•¥**
- **ä¸ä¼šå› ä¸ºæŸä¸ªIDä¸å­˜åœ¨è€ŒæŠ¥é”™**

### 3.6 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯1ï¼šæ‰¹é‡åˆ é™¤è´­ç‰©è½¦å•†å“**
```java
// ç”¨æˆ·å‹¾é€‰å¤šä¸ªå•†å“åæ‰¹é‡åˆ é™¤
public int clearSelectedItems(List<Long> itemIds) {
    if (itemIds.isEmpty()) {
        return 0;
    }
    return cartMapper.deleteBatchIds(itemIds);
}
```

**åœºæ™¯2ï¼šæ¸…ç©ºå›æ”¶ç«™**
```java
// å½»åº•åˆ é™¤å›æ”¶ç«™ä¸­çš„æ–‡ä»¶
public void emptyRecycleBin(Long userId) {
    // å…ˆæŸ¥è¯¢è¯¥ç”¨æˆ·å›æ”¶ç«™çš„æ‰€æœ‰æ–‡ä»¶ID
    List<Long> fileIds = fileMapper.getRecycleFileIds(userId);
    
    if (!fileIds.isEmpty()) {
        fileMapper.deleteBatchIds(fileIds);
    }
}
```

### 3.7 æ‰¹é‡åˆ é™¤çš„æ³¨æ„äº‹é¡¹


**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š

```java
// âŒ é”™è¯¯ï¼šç©ºé›†åˆ
List<Long> emptyList = new ArrayList<>();
userMapper.deleteBatchIds(emptyList);  // ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¹Ÿä¸ä¼šåˆ é™¤

// âœ… æ­£ç¡®ï¼šå…ˆåˆ¤æ–­
if (!idList.isEmpty()) {
    userMapper.deleteBatchIds(idList);
}

// âŒ é”™è¯¯ï¼šnullé›†åˆ
List<Long> nullList = null;
userMapper.deleteBatchIds(nullList);  // ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼

// âœ… æ­£ç¡®ï¼šå…ˆåˆ¤æ–­null
if (idList != null && !idList.isEmpty()) {
    userMapper.deleteBatchIds(idList);
}
```

**æ•°é‡é™åˆ¶æé†’**ï¼š
```
å¤§æ‰¹é‡åˆ é™¤å»ºè®®ï¼š
- å°‘äº1000æ¡ï¼šç›´æ¥æ‰¹é‡åˆ é™¤
- 1000-10000æ¡ï¼šåˆ†æ‰¹åˆ é™¤ï¼ˆæ¯æ‰¹1000æ¡ï¼‰
- è¶…è¿‡10000æ¡ï¼šè€ƒè™‘å¼‚æ­¥å¤„ç†
```

---

## 4. ğŸ” æ¡ä»¶åˆ é™¤deleteByMap


### 4.1 ä»€ä¹ˆæ˜¯Mapæ¡ä»¶åˆ é™¤


**é€šä¿—ç†è§£**ï¼šdeleteByMapå°±åƒç»™åˆ é™¤æ“ä½œè®¾ç½®å¤šä¸ªæ¡ä»¶ï¼Œåªæœ‰åŒæ—¶æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„æ•°æ®æ‰ä¼šè¢«åˆ é™¤ã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
ä»ä¹¦æ¶åˆ ä¹¦ï¼Œè¦æ±‚ï¼š
- ä½œè€… = "å¼ ä¸‰"
- å‡ºç‰ˆå¹´ä»½ = 2020
- ç±»åˆ« = "å°è¯´"

åªæœ‰ä¸‰ä¸ªæ¡ä»¶éƒ½ç¬¦åˆçš„ä¹¦æ‰åˆ é™¤
```

### 4.2 æ–¹æ³•å®šä¹‰


```java
// BaseMapperæ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰
int deleteByMap(Map<String, Object> columnMap);
```

**å‚æ•°è¯´æ˜**ï¼š
- `columnMap`ï¼šåˆ—åä¸å€¼çš„æ˜ å°„å…³ç³»
- **é”®ï¼ˆKeyï¼‰**ï¼šæ•°æ®åº“**åˆ—å**ï¼ˆä¸æ˜¯å®ä½“ç±»å±æ€§åï¼ï¼‰
- **å€¼ï¼ˆValueï¼‰**ï¼šè¦åŒ¹é…çš„å€¼
- è¿”å›å€¼ï¼šåˆ é™¤çš„è®°å½•æ•°

### 4.3 åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹


```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // ç¤ºä¾‹1ï¼šæ ¹æ®å•ä¸ªæ¡ä»¶åˆ é™¤
    public void deleteByAge() {
        Map<String, Object> map = new HashMap<>();
        map.put("age", 18);  // åˆ é™¤å¹´é¾„ä¸º18çš„ç”¨æˆ·
        
        int count = userMapper.deleteByMap(map);
        System.out.println("åˆ é™¤äº†" + count + "ä¸ªç”¨æˆ·");
    }
    
    // ç¤ºä¾‹2ï¼šæ ¹æ®å¤šä¸ªæ¡ä»¶åˆ é™¤
    public void deleteByConditions() {
        Map<String, Object> map = new HashMap<>();
        map.put("age", 18);
        map.put("name", "å¼ ä¸‰");
        map.put("email", "zhangsan@qq.com");
        
        userMapper.deleteByMap(map);
    }
}
```

**æ‰§è¡Œçš„SQL**ï¼š
```sql
-- å•æ¡ä»¶
DELETE FROM user WHERE age = 18

-- å¤šæ¡ä»¶ï¼ˆANDå…³ç³»ï¼‰
DELETE FROM user WHERE age = 18 AND name = 'å¼ ä¸‰' AND email = 'zhangsan@qq.com'
```

### 4.4 åˆ—åä¸å±æ€§åçš„åŒºåˆ«


**âš ï¸ é‡è¦æé†’**ï¼šMapçš„Keyå¿…é¡»æ˜¯**æ•°æ®åº“åˆ—å**ï¼Œä¸æ˜¯å®ä½“ç±»å±æ€§åï¼

```java
// å®ä½“ç±»å®šä¹‰
@TableName("user")
public class User {
    @TableId
    private Long userId;      // å±æ€§å
    
    @TableField("user_name")  // æ•°æ®åº“åˆ—å
    private String userName;  // å±æ€§å
}

// âŒ é”™è¯¯å†™æ³•ï¼šä½¿ç”¨å±æ€§å
Map<String, Object> wrongMap = new HashMap<>();
wrongMap.put("userName", "å¼ ä¸‰");  // é”™è¯¯ï¼æ‰¾ä¸åˆ°userNameåˆ—

// âœ… æ­£ç¡®å†™æ³•ï¼šä½¿ç”¨åˆ—å
Map<String, Object> rightMap = new HashMap<>();
rightMap.put("user_name", "å¼ ä¸‰");  // æ­£ç¡®ï¼
```

### 4.5 æ¡ä»¶å…³ç³»è¯´æ˜


```
Mapä¸­å¤šä¸ªæ¡ä»¶çš„å…³ç³»ï¼š

æ¡ä»¶1ï¼šage = 18
æ¡ä»¶2ï¼šname = å¼ ä¸‰
æ¡ä»¶3ï¼šcity = åŒ—äº¬

å…³ç³»ï¼šæ¡ä»¶1 AND æ¡ä»¶2 AND æ¡ä»¶3
      â†“
åªæœ‰ä¸‰ä¸ªæ¡ä»¶éƒ½æ»¡è¶³æ‰åˆ é™¤
```

**å¯¹æ¯”å›¾ç¤º**ï¼š
```
æ•°æ®åº“è®°å½•ï¼š
ID  name   age  city
1   å¼ ä¸‰   18   åŒ—äº¬    â† æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œä¼šè¢«åˆ é™¤
2   æå››   18   ä¸Šæµ·    â† ageæ»¡è¶³ï¼Œcityä¸æ»¡è¶³ï¼Œä¸åˆ é™¤
3   å¼ ä¸‰   20   åŒ—äº¬    â† nameå’Œcityæ»¡è¶³ï¼Œageä¸æ»¡è¶³ï¼Œä¸åˆ é™¤
```

### 4.6 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯1ï¼šæ¸…ç†æµ‹è¯•æ•°æ®**
```java
public void clearTestData() {
    Map<String, Object> map = new HashMap<>();
    map.put("is_test", 1);  // æµ‹è¯•æ•°æ®æ ‡è®°
    map.put("status", 0);   // æœªæ¿€æ´»çŠ¶æ€
    
    int count = userMapper.deleteByMap(map);
    System.out.println("æ¸…ç†äº†" + count + "æ¡æµ‹è¯•æ•°æ®");
}
```

**åœºæ™¯2ï¼šåˆ é™¤è¿‡æœŸä¼˜æƒ åˆ¸**
```java
public void deleteExpiredCoupons(String userId) {
    Map<String, Object> map = new HashMap<>();
    map.put("user_id", userId);
    map.put("status", "expired");  // å·²è¿‡æœŸ
    
    couponMapper.deleteByMap(map);
}
```

### 4.7 deleteByMapçš„ä¼˜ç¼ºç‚¹


| ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|
| âœ… ä½¿ç”¨ç®€å•ï¼Œæ— éœ€å­¦ä¹ SQL | âŒ åªæ”¯æŒ**ç­‰å€¼**æ¡ä»¶ï¼ˆWHERE column = valueï¼‰ |
| âœ… ä»£ç ç›´è§‚ï¼Œæ˜“äºç†è§£ | âŒ åªæ”¯æŒ**AND**å…³ç³»ï¼Œä¸æ”¯æŒOR |
| âœ… é€‚åˆç®€å•æ¡ä»¶åˆ é™¤ | âŒ ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆ>ã€<ã€BETWEENï¼‰ |
| âœ… ç±»å‹å®‰å…¨ | âŒ ä¸æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ï¼ˆLIKEï¼‰ |

**ä½•æ—¶ä½¿ç”¨deleteByMapï¼Ÿ**
- âœ… æ¡ä»¶ç®€å•ï¼Œéƒ½æ˜¯ç­‰å€¼åˆ¤æ–­
- âœ… å¤šä¸ªæ¡ä»¶æ˜¯ANDå…³ç³»
- âœ… å¿«é€Ÿå¼€å‘ï¼Œä¸æƒ³å†™å¤æ‚æ¡ä»¶

**ä½•æ—¶ä¸ç”¨deleteByMapï¼Ÿ**
- âŒ éœ€è¦ORæ¡ä»¶
- âŒ éœ€è¦èŒƒå›´æŸ¥è¯¢
- âŒ éœ€è¦æ¨¡ç³ŠåŒ¹é…
- âŒ æ¡ä»¶å¤æ‚ â†’ ä½¿ç”¨ä¸‹ä¸€èŠ‚çš„æ¡ä»¶æ„é€ å™¨

---

## 5. âš™ï¸ æ¡ä»¶æ„é€ å™¨åˆ é™¤delete


### 5.1 æ¡ä»¶æ„é€ å™¨æ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**ï¼šæ¡ä»¶æ„é€ å™¨å°±åƒä¸€ä¸ªæ™ºèƒ½çš„SQLç”Ÿæˆå™¨ï¼Œä½ ç”¨Javaä»£ç å‘Šè¯‰å®ƒä½ çš„æ¡ä»¶ï¼Œå®ƒè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„SQLè¯­å¥ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆå†™SQLï¼‰ï¼š
DELETE FROM user WHERE age > 18 AND name LIKE 'å¼ %'

æ¡ä»¶æ„é€ å™¨æ–¹å¼ï¼ˆå†™Javaï¼‰ï¼š
new QueryWrapper<User>()
    .gt("age", 18)
    .likeRight("name", "å¼ ");
```

**ä¸ºä»€ä¹ˆéœ€è¦æ¡ä»¶æ„é€ å™¨ï¼Ÿ**
- âœ… ä¸ç”¨æ‰‹å†™SQLï¼Œé¿å…è¯­æ³•é”™è¯¯
- âœ… æ”¯æŒå¤æ‚æ¡ä»¶ï¼ˆORã€èŒƒå›´ã€æ¨¡ç³Šç­‰ï¼‰
- âœ… ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æœŸæ£€æŸ¥
- âœ… ä»£ç å¯è¯»æ€§æ›´å¥½

### 5.2 æ–¹æ³•å®šä¹‰


```java
// BaseMapperæ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰
int delete(Wrapper<T> wrapper);
```

**å‚æ•°è¯´æ˜**ï¼š
- `wrapper`ï¼šæ¡ä»¶æ„é€ å™¨ï¼ˆQueryWrapperæˆ–UpdateWrapperï¼‰
- è¿”å›å€¼ï¼šåˆ é™¤çš„è®°å½•æ•°

### 5.3 QueryWrapperåŸºæœ¬ä½¿ç”¨


```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // ç¤ºä¾‹1ï¼šå•ä¸ªæ¡ä»¶åˆ é™¤
    public void deleteByAge() {
        QueryWrapper<User> wrapper = new QueryWrapper<>();
        wrapper.eq("age", 18);  // age = 18
        
        userMapper.delete(wrapper);
    }
    
    // ç¤ºä¾‹2ï¼šå¤šæ¡ä»¶ANDå…³ç³»
    public void deleteByMultiConditions() {
        QueryWrapper<User> wrapper = new QueryWrapper<>();
        wrapper.eq("age", 18)           // age = 18
               .eq("name", "å¼ ä¸‰");      // AND name = 'å¼ ä¸‰'
        
        userMapper.delete(wrapper);
    }
}
```

**æ‰§è¡Œçš„SQL**ï¼š
```sql
-- å•æ¡ä»¶
DELETE FROM user WHERE age = 18

-- å¤šæ¡ä»¶
DELETE FROM user WHERE age = 18 AND name = 'å¼ ä¸‰'
```

### 5.4 å¸¸ç”¨æ¡ä»¶æ–¹æ³•è¯¦è§£


**ç­‰å€¼æ¡ä»¶**ï¼š
```java
// eqï¼šç­‰äºï¼ˆequalï¼‰
wrapper.eq("age", 18);
// SQL: WHERE age = 18

// neï¼šä¸ç­‰äºï¼ˆnot equalï¼‰
wrapper.ne("status", 0);
// SQL: WHERE status != 0
```

**èŒƒå›´æ¡ä»¶**ï¼š
```java
// gtï¼šå¤§äºï¼ˆgreater thanï¼‰
wrapper.gt("age", 18);
// SQL: WHERE age > 18

// geï¼šå¤§äºç­‰äºï¼ˆgreater or equalï¼‰
wrapper.ge("age", 18);
// SQL: WHERE age >= 18

// ltï¼šå°äºï¼ˆless thanï¼‰
wrapper.lt("age", 60);
// SQL: WHERE age < 60

// leï¼šå°äºç­‰äºï¼ˆless or equalï¼‰
wrapper.le("age", 60);
// SQL: WHERE age <= 60

// betweenï¼šåŒºé—´èŒƒå›´
wrapper.between("age", 18, 60);
// SQL: WHERE age BETWEEN 18 AND 60
```

**æ¨¡ç³Šæ¡ä»¶**ï¼š
```java
// likeï¼šåŒ…å«
wrapper.like("name", "å¼ ");
// SQL: WHERE name LIKE '%å¼ %'

// likeLeftï¼šå·¦æ¨¡ç³Š
wrapper.likeLeft("name", "ä¸‰");
// SQL: WHERE name LIKE '%ä¸‰'

// likeRightï¼šå³æ¨¡ç³Š
wrapper.likeRight("name", "å¼ ");
// SQL: WHERE name LIKE 'å¼ %'
```

**ç©ºå€¼æ¡ä»¶**ï¼š
```java
// isNullï¼šä¸ºç©º
wrapper.isNull("email");
// SQL: WHERE email IS NULL

// isNotNullï¼šä¸ä¸ºç©º
wrapper.isNotNull("email");
// SQL: WHERE email IS NOT NULL
```

### 5.5 ORæ¡ä»¶çš„ä½¿ç”¨


```java
// ç¤ºä¾‹ï¼šåˆ é™¤å¹´é¾„å¤§äº60æˆ–å°äº18çš„ç”¨æˆ·
public void deleteByAgeRange() {
    QueryWrapper<User> wrapper = new QueryWrapper<>();
    wrapper.gt("age", 60)      // age > 60
           .or()                // ORå…³é”®å­—
           .lt("age", 18);      // age < 18
    
    userMapper.delete(wrapper);
}
```

**æ‰§è¡Œçš„SQL**ï¼š
```sql
DELETE FROM user WHERE age > 60 OR age < 18
```

**ORåµŒå¥—æ¡ä»¶**ï¼š
```java
// å¤æ‚ORæ¡ä»¶ï¼š(age > 60 OR age < 18) AND name = 'å¼ ä¸‰'
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.and(w -> w.gt("age", 60).or().lt("age", 18))
       .eq("name", "å¼ ä¸‰");
```

### 5.6 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯1ï¼šåˆ é™¤è¿‡æœŸè®¢å•**
```java
public void deleteExpiredOrders() {
    QueryWrapper<Order> wrapper = new QueryWrapper<>();
    wrapper.eq("status", "unpaid")                    // æœªæ”¯ä»˜
           .lt("create_time", LocalDateTime.now().minusDays(7));  // 7å¤©å‰
    
    int count = orderMapper.delete(wrapper);
    System.out.println("åˆ é™¤äº†" + count + "ä¸ªè¿‡æœŸè®¢å•");
}
```

**åœºæ™¯2ï¼šæ¸…ç†æ— æ•ˆæ•°æ®**
```java
public void cleanInvalidData() {
    QueryWrapper<User> wrapper = new QueryWrapper<>();
    wrapper.isNull("email")        // é‚®ç®±ä¸ºç©º
           .or()
           .isNull("phone")        // æˆ–æ‰‹æœºå·ä¸ºç©º
           .eq("status", 0);       // å¹¶ä¸”çŠ¶æ€ä¸ºæœªæ¿€æ´»
    
    userMapper.delete(wrapper);
}
```

**åœºæ™¯3ï¼šæ‰¹é‡åˆ é™¤åŒ¹é…çš„è®°å½•**
```java
public void deleteByNamePattern(String keyword) {
    QueryWrapper<Product> wrapper = new QueryWrapper<>();
    wrapper.like("product_name", keyword)    // åç§°åŒ…å«å…³é”®è¯
           .eq("is_deleted", 0);             // æœªè¢«åˆ é™¤è¿‡
    
    productMapper.delete(wrapper);
}
```

### 5.7 æ¡ä»¶æ„é€ å™¨çš„è¿›é˜¶æŠ€å·§


**åŠ¨æ€æ¡ä»¶ï¼ˆæ¡ä»¶å¯é€‰ï¼‰**ï¼š
```java
public void dynamicDelete(String name, Integer minAge, Integer maxAge) {
    QueryWrapper<User> wrapper = new QueryWrapper<>();
    
    // åªæœ‰å½“nameä¸ä¸ºç©ºæ—¶ï¼Œæ‰æ·»åŠ nameæ¡ä»¶
    if (name != null && !name.isEmpty()) {
        wrapper.eq("name", name);
    }
    
    // åªæœ‰å½“minAgeä¸ä¸ºç©ºæ—¶ï¼Œæ‰æ·»åŠ å¹´é¾„ä¸‹é™
    if (minAge != null) {
        wrapper.ge("age", minAge);
    }
    
    // åªæœ‰å½“maxAgeä¸ä¸ºç©ºæ—¶ï¼Œæ‰æ·»åŠ å¹´é¾„ä¸Šé™
    if (maxAge != null) {
        wrapper.le("age", maxAge);
    }
    
    userMapper.delete(wrapper);
}
```

**Lambdaæ¡ä»¶æ„é€ å™¨ï¼ˆç±»å‹å®‰å…¨ï¼‰**ï¼š
```java
// ä½¿ç”¨LambdaQueryWrapperï¼Œé¿å…å­—ç¬¦ä¸²ç¡¬ç¼–ç 
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getAge, 18)          // ä½¿ç”¨æ–¹æ³•å¼•ç”¨
       .like(User::getName, "å¼ ");     // IDEæœ‰æç¤ºï¼Œä¸ä¼šå†™é”™åˆ—å

userMapper.delete(wrapper);
```

---

## 6. ğŸ”„ ç‰©ç†åˆ é™¤ä¸é€»è¾‘åˆ é™¤


### 6.1 ä¸¤ç§åˆ é™¤æ–¹å¼å¯¹æ¯”


```
ç‰©ç†åˆ é™¤ vs é€»è¾‘åˆ é™¤

ç‰©ç†åˆ é™¤ï¼š
æ•°æ®åº“æ“ä½œï¼šDELETE FROM user WHERE id = 1
ç»“æœï¼šè®°å½•å½»åº•æ¶ˆå¤±
ç‰¹ç‚¹ï¼šæ•°æ®æ— æ³•æ¢å¤

é€»è¾‘åˆ é™¤ï¼š
æ•°æ®åº“æ“ä½œï¼šUPDATE user SET deleted = 1 WHERE id = 1
ç»“æœï¼šè®°å½•è¿˜åœ¨ï¼Œåªæ˜¯æ ‡è®°åˆ é™¤
ç‰¹ç‚¹ï¼šæ•°æ®å¯ä»¥æ¢å¤
```

**ç”Ÿæ´»ç±»æ¯”**ï¼š
```
ç‰©ç†åˆ é™¤ = æŠŠä¹¦æ‰”è¿›ç¢çº¸æœºï¼ˆå½»åº•é”€æ¯ï¼‰
é€»è¾‘åˆ é™¤ = æŠŠä¹¦æ”¾è¿›å‚¨è—å®¤ï¼ˆè¿˜èƒ½æ‰¾å›æ¥ï¼‰
```

### 6.2 ç‰©ç†åˆ é™¤å®ç°


ç‰©ç†åˆ é™¤å°±æ˜¯å‰é¢è®²çš„æ‰€æœ‰åˆ é™¤æ–¹æ³•çš„**é»˜è®¤è¡Œä¸º**ï¼Œæ‰§è¡ŒDELETEè¯­å¥ã€‚

```java
// ç‰©ç†åˆ é™¤ç¤ºä¾‹
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // ç›´æ¥åˆ é™¤ï¼Œæ•°æ®å½»åº•æ¶ˆå¤±
    public void physicalDelete(Long id) {
        userMapper.deleteById(id);
        // SQL: DELETE FROM user WHERE id = ?
    }
}
```

**ç‰©ç†åˆ é™¤çš„é€‚ç”¨åœºæ™¯**ï¼š
- âœ… æµ‹è¯•æ•°æ®ã€åƒåœ¾æ•°æ®
- âœ… ä¸éœ€è¦ä¿ç•™å†å²è®°å½•
- âœ… æ•°æ®é‡å¤§ï¼Œéœ€è¦é‡Šæ”¾ç©ºé—´
- âœ… æ•æ„Ÿæ•°æ®ï¼Œå¿…é¡»å½»åº•åˆ é™¤

### 6.3 é€»è¾‘åˆ é™¤çš„é…ç½®


**ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“æ·»åŠ åˆ é™¤æ ‡è®°å­—æ®µ**

```sql
-- åœ¨è¡¨ä¸­æ·»åŠ deletedå­—æ®µ
ALTER TABLE user ADD COLUMN deleted INT DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤ï¼š0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤';
```

**ç¬¬äºŒæ­¥ï¼šå®ä½“ç±»æ·»åŠ @TableLogicæ³¨è§£**

```java
@Data
@TableName("user")
public class User {
    @TableId
    private Long id;
    
    private String name;
    
    private Integer age;
    
    // é€»è¾‘åˆ é™¤å­—æ®µ
    @TableLogic
    private Integer deleted;  // 0=æœªåˆ é™¤ï¼Œ1=å·²åˆ é™¤
}
```

**ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ–‡ä»¶è®¾ç½®ï¼ˆå¯é€‰ï¼‰**

```yaml
mybatis-plus:
  global-config:
    db-config:
      logic-delete-field: deleted  # å…¨å±€é€»è¾‘åˆ é™¤å­—æ®µå
      logic-delete-value: 1        # é€»è¾‘å·²åˆ é™¤å€¼ï¼ˆé»˜è®¤1ï¼‰
      logic-not-delete-value: 0    # é€»è¾‘æœªåˆ é™¤å€¼ï¼ˆé»˜è®¤0ï¼‰
```

### 6.4 é€»è¾‘åˆ é™¤çš„è‡ªåŠ¨å¤„ç†


é…ç½®å¥½åï¼ŒMyBatis-Plusä¼š**è‡ªåŠ¨è½¬æ¢**åˆ é™¤å’ŒæŸ¥è¯¢æ“ä½œï¼š

```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // è°ƒç”¨åˆ é™¤æ–¹æ³•
    public void logicDelete(Long id) {
        userMapper.deleteById(id);
        // å®é™…æ‰§è¡Œï¼šUPDATE user SET deleted = 1 WHERE id = ? AND deleted = 0
    }
    
    // è°ƒç”¨æŸ¥è¯¢æ–¹æ³•
    public List<User> getUsers() {
        return userMapper.selectList(null);
        // å®é™…æ‰§è¡Œï¼šSELECT * FROM user WHERE deleted = 0
    }
}
```

**è‡ªåŠ¨å¤„ç†è§„åˆ™**ï¼š

| æ“ä½œç±»å‹ | åŸå§‹SQL | é€»è¾‘åˆ é™¤åSQL |
|---------|---------|--------------|
| **åˆ é™¤** | `DELETE FROM user WHERE id = 1` | `UPDATE user SET deleted = 1 WHERE id = 1 AND deleted = 0` |
| **æŸ¥è¯¢** | `SELECT * FROM user` | `SELECT * FROM user WHERE deleted = 0` |
| **æ›´æ–°** | `UPDATE user SET name = ? WHERE id = 1` | `UPDATE user SET name = ? WHERE id = 1 AND deleted = 0` |

### 6.5 é€»è¾‘åˆ é™¤çš„å®Œæ•´ç¤ºä¾‹


```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // æµ‹è¯•é€»è¾‘åˆ é™¤
    public void testLogicDelete() {
        // 1. æ’å…¥æµ‹è¯•æ•°æ®
        User user = new User();
        user.setName("æµ‹è¯•ç”¨æˆ·");
        user.setAge(25);
        userMapper.insert(user);
        System.out.println("æ’å…¥ç”¨æˆ·ID: " + user.getId());
        
        // 2. æŸ¥è¯¢ç”¨æˆ·ï¼ˆèƒ½æŸ¥åˆ°ï¼‰
        User found1 = userMapper.selectById(user.getId());
        System.out.println("åˆ é™¤å‰æŸ¥è¯¢: " + found1.getName());
        
        // 3. é€»è¾‘åˆ é™¤
        userMapper.deleteById(user.getId());
        System.out.println("å·²æ‰§è¡Œé€»è¾‘åˆ é™¤");
        
        // 4. å†æ¬¡æŸ¥è¯¢ï¼ˆæŸ¥ä¸åˆ°ï¼‰
        User found2 = userMapper.selectById(user.getId());
        System.out.println("åˆ é™¤åæŸ¥è¯¢: " + found2);  // null
        
        // 5. ç›´æ¥SQLæŸ¥è¯¢ï¼ˆèƒ½çœ‹åˆ°æ•°æ®è¿˜åœ¨ï¼‰
        // SELECT * FROM user WHERE id = ? 
        // ç»“æœï¼šid=1, name='æµ‹è¯•ç”¨æˆ·', deleted=1
    }
}
```

**æ‰§è¡Œè¿‡ç¨‹å›¾ç¤º**ï¼š
```
1. æ’å…¥æ•°æ®
   â†’ INSERT INTO user (name, age, deleted) VALUES ('æµ‹è¯•ç”¨æˆ·', 25, 0)
   
2. æŸ¥è¯¢æ•°æ®
   â†’ SELECT * FROM user WHERE id = 1 AND deleted = 0
   â†’ ç»“æœï¼šæ‰¾åˆ°æ•°æ®
   
3. é€»è¾‘åˆ é™¤
   â†’ UPDATE user SET deleted = 1 WHERE id = 1 AND deleted = 0
   
4. å†æ¬¡æŸ¥è¯¢
   â†’ SELECT * FROM user WHERE id = 1 AND deleted = 0
   â†’ ç»“æœï¼šNULLï¼ˆå› ä¸ºdeleted=1ï¼Œä¸ç¬¦åˆæ¡ä»¶ï¼‰
   
5. æ•°æ®åº“å®é™…çŠ¶æ€
   id  name      age  deleted
   1   æµ‹è¯•ç”¨æˆ·   25   1        â† æ•°æ®è¿˜åœ¨ï¼Œåªæ˜¯æ ‡è®°ä¸ºå·²åˆ é™¤
```

### 6.6 é€»è¾‘åˆ é™¤çš„æ³¨æ„äº‹é¡¹


**âš ï¸ é‡è¦æé†’**ï¼š

```java
// âŒ å”¯ä¸€ç´¢å¼•é—®é¢˜
// å¦‚æœemailæœ‰å”¯ä¸€ç´¢å¼•ï¼Œé€»è¾‘åˆ é™¤åæ— æ³•æ’å…¥ç›¸åŒemail
CREATE UNIQUE INDEX idx_email ON user(email);

// è§£å†³æ–¹æ¡ˆ1ï¼šè”åˆå”¯ä¸€ç´¢å¼•ï¼ˆemail + deletedï¼‰
CREATE UNIQUE INDEX idx_email_deleted ON user(email, deleted);

// è§£å†³æ–¹æ¡ˆ2ï¼šåˆ é™¤æ—¶æ¸…ç©ºæ•æ„Ÿå­—æ®µ
UPDATE user SET deleted = 1, email = NULL WHERE id = ?
```

**æ€§èƒ½è€ƒè™‘**ï¼š
```java
// é€»è¾‘åˆ é™¤ä¼šå¯¼è‡´deletedå­—æ®µè¦åŠ ç´¢å¼•
CREATE INDEX idx_deleted ON user(deleted);

// æŸ¥è¯¢æ—¶è®°å¾—è¿‡æ»¤å·²åˆ é™¤æ•°æ®
SELECT * FROM user WHERE deleted = 0;  // ä¼šèµ°ç´¢å¼•
```

**æ•°æ®æ¢å¤**ï¼š
```java
// æ¢å¤å·²åˆ é™¤æ•°æ®ï¼ˆéœ€è¦è‡ªå·±å†™SQLï¼‰
@Update("UPDATE user SET deleted = 0 WHERE id = #{id}")
int recoverById(@Param("id") Long id);
```

### 6.7 å¦‚ä½•é€‰æ‹©åˆ é™¤æ–¹å¼


**é€‰æ‹©å†³ç­–å›¾**ï¼š
```
éœ€è¦ä¿ç•™å†å²æ•°æ®ï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ ä½¿ç”¨é€»è¾‘åˆ é™¤
    â”‚        â””â”€â”€ éœ€è¦æ¢å¤åŠŸèƒ½ï¼Ÿ
    â”‚             â”œâ”€â”€ æ˜¯ â†’ é€»è¾‘åˆ é™¤ + æ¢å¤æ¥å£
    â”‚             â””â”€â”€ å¦ â†’ çº¯é€»è¾‘åˆ é™¤
    â”‚
    â””â”€â”€ å¦ â†’ éœ€è¦é‡Šæ”¾ç©ºé—´ï¼Ÿ
             â”œâ”€â”€ æ˜¯ â†’ ç‰©ç†åˆ é™¤
             â””â”€â”€ å¦ â†’ æ ¹æ®ä¸šåŠ¡å†³å®š
```

**å®é™…å»ºè®®**ï¼š

| åœºæ™¯ | æ¨èæ–¹å¼ | åŸå›  |
|------|---------|------|
| ç”¨æˆ·æ•°æ® | é€»è¾‘åˆ é™¤ | å¯èƒ½éœ€è¦æ¢å¤ï¼Œæœ‰æ³•å¾‹è¦æ±‚ |
| è®¢å•æ•°æ® | é€»è¾‘åˆ é™¤ | è´¢åŠ¡å®¡è®¡ï¼Œå†å²è¿½æº¯ |
| æ—¥å¿—æ•°æ® | ç‰©ç†åˆ é™¤ | é‡å¤§ï¼Œæ— éœ€ä¿ç•™ |
| æµ‹è¯•æ•°æ® | ç‰©ç†åˆ é™¤ | åƒåœ¾æ•°æ®ï¼Œç›´æ¥æ¸…ç† |
| ä¸´æ—¶æ•°æ® | ç‰©ç†åˆ é™¤ | æ— ä¿ç•™ä»·å€¼ |

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 åˆ é™¤æ–¹æ³•å¯¹æ¯”æ€»ç»“


| æ–¹æ³• | ä½¿ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|---------|------|------|
| **deleteById** | çŸ¥é“å…·ä½“IDï¼Œåˆ å•æ¡ | ç®€å•ç›´æ¥ | åªèƒ½åˆ ä¸€æ¡ |
| **deleteBatchIds** | æ‰¹é‡åˆ é™¤å¤šæ¡ | é«˜æ•ˆï¼Œå‡å°‘æ•°æ®åº“äº¤äº’ | åªæ”¯æŒä¸»é”®åˆ é™¤ |
| **deleteByMap** | ç®€å•ç­‰å€¼æ¡ä»¶ | ä½¿ç”¨ç®€å•ï¼Œæ— éœ€SQL | åªæ”¯æŒANDå’Œç­‰å€¼ |
| **delete(Wrapper)** | å¤æ‚æ¡ä»¶åˆ é™¤ | åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå„ç§æ¡ä»¶ | å­¦ä¹ æˆæœ¬ç¨é«˜ |

### 7.2 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒçŸ¥è¯†


```
ğŸ”¸ åˆ é™¤æ“ä½œæœ¬è´¨ï¼š
   - ç‰©ç†åˆ é™¤ = DELETEè¯­å¥ï¼Œæ•°æ®å½»åº•æ¶ˆå¤±
   - é€»è¾‘åˆ é™¤ = UPDATEè¯­å¥ï¼Œæ ‡è®°ä¸ºåˆ é™¤

ğŸ”¸ è¿”å›å€¼å«ä¹‰ï¼š
   - è¿”å›å€¼ = å®é™…å½±å“çš„è¡Œæ•°
   - 0 = æ²¡æœ‰åˆ é™¤ä»»ä½•æ•°æ®ï¼ˆä¸æŠ¥é”™ï¼‰
   - >0 = æˆåŠŸåˆ é™¤çš„è®°å½•æ•°

ğŸ”¸ æ¡ä»¶å…³ç³»ï¼š
   - deleteByMapï¼šæ‰€æœ‰æ¡ä»¶éƒ½æ˜¯ANDå…³ç³»
   - delete(Wrapper)ï¼šæ”¯æŒANDã€ORã€åµŒå¥—

ğŸ”¸ é€»è¾‘åˆ é™¤è‡ªåŠ¨è½¬æ¢ï¼š
   - åˆ é™¤æ“ä½œ â†’ UPDATE SET deleted = 1
   - æŸ¥è¯¢æ“ä½œ â†’ WHERE deleted = 0
   - æ›´æ–°æ“ä½œ â†’ WHERE deleted = 0
```

### 7.3 æœ€ä½³å®è·µå»ºè®®


**âœ… æ¨èåšæ³•**ï¼š

```java
// 1. åˆ é™¤å‰å…ˆåˆ¤æ–­
if (id != null) {
    int count = userMapper.deleteById(id);
    if (count == 0) {
        throw new BusinessException("æ•°æ®ä¸å­˜åœ¨");
    }
}

// 2. æ‰¹é‡åˆ é™¤åˆ¤ç©º
if (ids != null && !ids.isEmpty()) {
    userMapper.deleteBatchIds(ids);
}

// 3. å¤æ‚æ¡ä»¶ç”¨Wrapper
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.eq(User::getAge, 18)
       .like(User::getName, "å¼ ");
userMapper.delete(wrapper);

// 4. é‡è¦æ•°æ®ç”¨é€»è¾‘åˆ é™¤
@TableLogic
private Integer deleted;
```

**âŒ é¿å…é”™è¯¯**ï¼š

```java
// âŒ ä¸åˆ¤æ–­nullï¼Œå¯èƒ½ç©ºæŒ‡é’ˆ
userMapper.deleteBatchIds(ids);

// âŒ Mapçš„Keyç”¨äº†å±æ€§åè€Œéåˆ—å
map.put("userName", "å¼ ä¸‰");  // åº”è¯¥æ˜¯user_name

// âŒ é€»è¾‘åˆ é™¤åï¼Œå¿˜è®°å”¯ä¸€ç´¢å¼•ä¼šå†²çª
CREATE UNIQUE INDEX idx_email ON user(email);  // åº”è¯¥åŠ deletedå­—æ®µ
```

### 7.4 è®°å¿†å£è¯€


```
åˆ é™¤æ–¹æ³•å››å…„å¼Ÿï¼Œåœºæ™¯ä¸åŒå„æœ‰æŠ€ï¼š
deleteByIdåˆ å•ä¸ªï¼Œä¸»é”®ç›´è¾¾æœ€ç®€æ˜“
deleteBatchIdsæ‰¹é‡å¼ºï¼Œå¤šæ¡ä¸€æ¬¡æ•ˆç‡é«˜
deleteByMapç®€å•ç”¨ï¼Œç­‰å€¼æ¡ä»¶ANDå…³ç³»
deleteæ„é€ å™¨æœ€çµæ´»ï¼Œå¤æ‚æ¡ä»¶éƒ½èƒ½æ

ç‰©ç†é€»è¾‘ä¸¤åˆ é™¤ï¼Œä¸šåŠ¡éœ€æ±‚æ¥é€‰æ‹©ï¼š
ç‰©ç†åˆ é™¤çœŸé”€æ¯ï¼ŒèŠ‚çœç©ºé—´ä¸ç•™ç—•
é€»è¾‘åˆ é™¤å‡æ ‡è®°ï¼Œæ•°æ®ä¿ç•™å¯æ¢å¤
```