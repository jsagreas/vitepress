---
title: 53ã€ç»Ÿä¸€å“åº”å°è£…å¼‚å¸¸
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”å°è£…](#1-ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”å°è£…)
2. [Resultå“åº”ç±»è®¾è®¡](#2-Resultå“åº”ç±»è®¾è®¡)
3. [çŠ¶æ€ç æ ‡å‡†åŒ–ä½“ç³»](#3-çŠ¶æ€ç æ ‡å‡†åŒ–ä½“ç³»)
4. [æ•°æ®æ ¼å¼ä¸€è‡´æ€§å®ç°](#4-æ•°æ®æ ¼å¼ä¸€è‡´æ€§å®ç°)
5. [æˆåŠŸå¤±è´¥å°è£…æœ€ä½³å®è·µ](#5-æˆåŠŸå¤±è´¥å°è£…æœ€ä½³å®è·µ)
6. [åˆ†é¡µç»“æœå°è£…æ–¹æ¡ˆ](#6-åˆ†é¡µç»“æœå°è£…æ–¹æ¡ˆ)
7. [å‰ç«¯äº¤äº’åè®®è®¾è®¡](#7-å‰ç«¯äº¤äº’åè®®è®¾è®¡)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”å°è£…


### 1.1 å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹


**åœºæ™¯1ï¼šå‰ç«¯ä¸çŸ¥é“å¦‚ä½•å¤„ç†å“åº”**
```
åç«¯è¿”å›çš„æ•°æ®äº”èŠ±å…«é—¨ï¼š
âœ… æˆåŠŸæ—¶è¿”å›ï¼š{ id: 1, name: "å¼ ä¸‰" }
âŒ å¤±è´¥æ—¶è¿”å›ï¼š{ error: "ç”¨æˆ·ä¸å­˜åœ¨" }
âŒ æœ‰æ—¶è¿”å›ï¼š{ code: 500, msg: "æœåŠ¡å™¨é”™è¯¯" }

å‰ç«¯å¼€å‘è€…ï¼š"æˆ‘è¯¥å¦‚ä½•åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Ÿ"
```

**åœºæ™¯2ï¼šé”™è¯¯ä¿¡æ¯ä¸ç»Ÿä¸€**
```
æ¥å£Aè¿”å›ï¼š{ "msg": "å¤±è´¥" }
æ¥å£Bè¿”å›ï¼š{ "message": "é”™è¯¯" }  
æ¥å£Cè¿”å›ï¼š{ "error": "å¼‚å¸¸" }

å‰ç«¯ï¼š"ä¸ºä»€ä¹ˆæ¯ä¸ªæ¥å£çš„é”™è¯¯å­—æ®µéƒ½ä¸ä¸€æ ·ï¼Ÿ"
```

**åœºæ™¯3ï¼šæ•°æ®ç»“æ„ä¸ä¸€è‡´**
```
æŸ¥è¯¢å•ä¸ªç”¨æˆ·ï¼š{ id: 1, name: "å¼ ä¸‰" }
æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼š[{ id: 1 }, { id: 2 }]
åˆ†é¡µæŸ¥è¯¢ï¼š{ records: [...], total: 100 }

å‰ç«¯ï¼š"èƒ½ä¸èƒ½ç»Ÿä¸€ä¸€ä¸‹æ ¼å¼ï¼Ÿ"
```

### 1.2 ç»Ÿä¸€å“åº”çš„æ ¸å¿ƒä»·å€¼


> ğŸ’¡ **é€šä¿—ç†è§£**
> 
> ç»Ÿä¸€å“åº”å°±åƒ**å¿«é€’åŒ…è£…æ ‡å‡†åŒ–**ï¼š
> - æ‰€æœ‰å¿«é€’éƒ½ç”¨ç»Ÿä¸€çš„åŒ…è£…ç›’ ğŸ“¦
> - ç›’å­ä¸Šéƒ½æœ‰ç»Ÿä¸€çš„æ ‡ç­¾æ ¼å¼ ğŸ·ï¸
> - æ”¶ä»¶äººä¸€çœ‹å°±çŸ¥é“æ˜¯ä»€ä¹ˆå†…å®¹ ğŸ‘€

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

| ä¼˜åŠ¿ | è¯´æ˜ | å®é™…æ•ˆæœ |
|------|------|----------|
| ğŸ¯ **è§„èŒƒç»Ÿä¸€** | æ‰€æœ‰æ¥å£è¿”å›æ ¼å¼ä¸€è‡´ | å‰ç«¯å¤„ç†é€»è¾‘ç®€åŒ– |
| ğŸ”§ **æ˜“äºç»´æŠ¤** | ä¿®æ”¹å“åº”æ ¼å¼åªéœ€æ”¹ä¸€å¤„ | é™ä½ç»´æŠ¤æˆæœ¬ |
| ğŸ› **é”™è¯¯è¿½è¸ª** | ç»Ÿä¸€çš„é”™è¯¯ç ä½“ç³» | å¿«é€Ÿå®šä½é—®é¢˜ |
| ğŸ“± **å‰åç«¯åä½œ** | æ˜ç¡®çš„æ•°æ®å¥‘çº¦ | å‡å°‘æ²Ÿé€šæˆæœ¬ |

### 1.3 å®ç°åŸç†å›¾ç¤º


```
å®¢æˆ·ç«¯è¯·æ±‚                åç«¯å¤„ç†æµç¨‹                    ç»Ÿä¸€å“åº”
    |                         |                              |
    |--[HTTP Request]--------->|                              |
    |                         |                              |
    |                    [1]Controller                        |
    |                    æ¥æ”¶è¯·æ±‚å‚æ•°                          |
    |                         â†“                              |
    |                    [2]Service                           |
    |                    æ‰§è¡Œä¸šåŠ¡é€»è¾‘                          |
    |                         â†“                              |
    |                    [3]Mapper                            |
    |                    æ•°æ®åº“æ“ä½œ                            |
    |                         â†“                              |
    |                    [4]ç»Ÿä¸€å°è£…                          |
    |                    Result.success(data)                |
    |                         â†“                              |
    |<--[HTTP Response]-----{                                |
    |     "code": 200,         |                             |
    |     "msg": "æˆåŠŸ",       |                             |
    |     "data": {...}        |                             |
    |   }                      |                             |
```

---

## 2. ğŸ“¦ Resultå“åº”ç±»è®¾è®¡


### 2.1 æ ¸å¿ƒç»“æ„è®¾è®¡


> ğŸ¯ **è®¾è®¡æ€è·¯**
> 
> Resultç±»å°±åƒä¸€ä¸ª**ç»Ÿä¸€çš„ä¿¡å°**ï¼š
> - `code`ï¼šä¿¡å°ä¸Šçš„çŠ¶æ€æ ‡ç­¾ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
> - `msg`ï¼šç»™æ”¶ä»¶äººçš„ç•™è¨€ï¼ˆæç¤ºä¿¡æ¯ï¼‰
> - `data`ï¼šä¿¡å°é‡Œçš„å®é™…å†…å®¹ï¼ˆä¸šåŠ¡æ•°æ®ï¼‰

**åŸºç¡€Resultç±»ï¼š**

```java
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Result<T> implements Serializable {
    
    /** çŠ¶æ€ç  */
    private Integer code;
    
    /** æç¤ºä¿¡æ¯ */
    private String msg;
    
    /** å“åº”æ•°æ® */
    private T data;
    
    /** æ—¶é—´æˆ³ */
    private Long timestamp;
}
```

**å“åº”ç¤ºä¾‹å¯¹æ¯”ï¼š**

| åœºæ™¯ | ä¼ ç»Ÿè¿”å› | ç»Ÿä¸€å“åº”è¿”å› |
|------|----------|-------------|
| âœ… **æˆåŠŸæŸ¥è¯¢** | `Userå¯¹è±¡` | `{"code":200, "msg":"æˆåŠŸ", "data":{Userå¯¹è±¡}}` |
| âŒ **æŸ¥è¯¢å¤±è´¥** | `null` æˆ– å¼‚å¸¸ | `{"code":404, "msg":"ç”¨æˆ·ä¸å­˜åœ¨", "data":null}` |
| ğŸ“‹ **åˆ—è¡¨æ•°æ®** | `List<User>` | `{"code":200, "msg":"æˆåŠŸ", "data":[...]}` |

### 2.2 é™æ€å·¥å‚æ–¹æ³•è®¾è®¡


> ğŸ’¡ **ä¸ºä»€ä¹ˆç”¨é™æ€æ–¹æ³•ï¼Ÿ**
> 
> å°±åƒç‚¹å¤–å–ï¼š
> - `Result.success(data)` â†’ "æ¥ä¸€ä»½æˆåŠŸå¥—é¤"
> - `Result.fail(msg)` â†’ "æ¥ä¸€ä»½å¤±è´¥å¥—é¤"
> 
> ä¸ç”¨è‡ªå·±new Result()ï¼Œæ›´ç®€æ´æ–¹ä¾¿ï¼

**å®Œæ•´çš„å·¥å‚æ–¹æ³•ï¼š**

```java
public class Result<T> {
    
    // ===== æˆåŠŸå“åº” =====
    
    /** æˆåŠŸï¼ˆæ— æ•°æ®ï¼‰ */
    public static <T> Result<T> success() {
        return new Result<>(200, "æ“ä½œæˆåŠŸ", null, System.currentTimeMillis());
    }
    
    /** æˆåŠŸï¼ˆæœ‰æ•°æ®ï¼‰ */
    public static <T> Result<T> success(T data) {
        return new Result<>(200, "æ“ä½œæˆåŠŸ", data, System.currentTimeMillis());
    }
    
    /** æˆåŠŸï¼ˆè‡ªå®šä¹‰æ¶ˆæ¯ï¼‰ */
    public static <T> Result<T> success(String msg, T data) {
        return new Result<>(200, msg, data, System.currentTimeMillis());
    }
    
    // ===== å¤±è´¥å“åº” =====
    
    /** å¤±è´¥ï¼ˆé»˜è®¤æ¶ˆæ¯ï¼‰ */
    public static <T> Result<T> fail() {
        return new Result<>(500, "æ“ä½œå¤±è´¥", null, System.currentTimeMillis());
    }
    
    /** å¤±è´¥ï¼ˆè‡ªå®šä¹‰æ¶ˆæ¯ï¼‰ */
    public static <T> Result<T> fail(String msg) {
        return new Result<>(500, msg, null, System.currentTimeMillis());
    }
    
    /** å¤±è´¥ï¼ˆè‡ªå®šä¹‰çŠ¶æ€ç å’Œæ¶ˆæ¯ï¼‰ */
    public static <T> Result<T> fail(Integer code, String msg) {
        return new Result<>(code, msg, null, System.currentTimeMillis());
    }
}
```

### 2.3 å®é™…ä½¿ç”¨ç¤ºä¾‹


**Controllerå±‚çš„ä¼˜é›…ä½¿ç”¨ï¼š**

```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    /** æŸ¥è¯¢ç”¨æˆ· - æˆåŠŸè¿”å›æ•°æ® */
    @GetMapping("/{id}")
    public Result<User> getUser(@PathVariable Long id) {
        User user = userService.getById(id);
        if (user != null) {
            return Result.success(user);  // æˆåŠŸ
        }
        return Result.fail("ç”¨æˆ·ä¸å­˜åœ¨");   // å¤±è´¥
    }
    
    /** æ·»åŠ ç”¨æˆ· - æˆåŠŸè¿”å›æç¤º */
    @PostMapping
    public Result<Void> addUser(@RequestBody User user) {
        boolean saved = userService.save(user);
        return saved ? Result.success("æ·»åŠ æˆåŠŸ") 
                    : Result.fail("æ·»åŠ å¤±è´¥");
    }
    
    /** æŸ¥è¯¢åˆ—è¡¨ - è¿”å›é›†åˆ */
    @GetMapping("/list")
    public Result<List<User>> getUserList() {
        List<User> list = userService.list();
        return Result.success(list);
    }
}
```

---

## 3. ğŸ·ï¸ çŠ¶æ€ç æ ‡å‡†åŒ–ä½“ç³»


### 3.1 çŠ¶æ€ç è®¾è®¡åŸåˆ™


> ğŸ¯ **çŠ¶æ€ç å°±åƒäº¤é€šä¿¡å·ç¯**
> 
> - `2xx` ç»¿ç¯ ğŸŸ¢ â†’ ä¸€åˆ‡æ­£å¸¸ï¼Œé€šè¡Œ
> - `4xx` é»„ç¯ ğŸŸ¡ â†’ å®¢æˆ·ç«¯é—®é¢˜ï¼Œè¯·æ£€æŸ¥
> - `5xx` çº¢ç¯ ğŸ”´ â†’ æœåŠ¡å™¨é—®é¢˜ï¼Œè¯·ç­‰å¾…

**çŠ¶æ€ç åˆ†ç±»ä½“ç³»ï¼š**

```
çŠ¶æ€ç èŒƒå›´åˆ’åˆ†ï¼š
â”œâ”€â”€ 2xx æˆåŠŸçŠ¶æ€
â”‚   â”œâ”€â”€ 200 - æ“ä½œæˆåŠŸ
â”‚   â”œâ”€â”€ 201 - åˆ›å»ºæˆåŠŸ
â”‚   â””â”€â”€ 204 - åˆ é™¤æˆåŠŸï¼ˆæ— å†…å®¹ï¼‰
â”‚
â”œâ”€â”€ 4xx å®¢æˆ·ç«¯é”™è¯¯
â”‚   â”œâ”€â”€ 400 - è¯·æ±‚å‚æ•°é”™è¯¯
â”‚   â”œâ”€â”€ 401 - æœªæˆæƒï¼ˆæœªç™»å½•ï¼‰
â”‚   â”œâ”€â”€ 403 - ç¦æ­¢è®¿é—®ï¼ˆæ— æƒé™ï¼‰
â”‚   â”œâ”€â”€ 404 - èµ„æºä¸å­˜åœ¨
â”‚   â””â”€â”€ 422 - å‚æ•°æ ¡éªŒå¤±è´¥
â”‚
â””â”€â”€ 5xx æœåŠ¡å™¨é”™è¯¯
    â”œâ”€â”€ 500 - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
    â”œâ”€â”€ 502 - ç½‘å…³é”™è¯¯
    â””â”€â”€ 503 - æœåŠ¡ä¸å¯ç”¨
```

### 3.2 è‡ªå®šä¹‰ä¸šåŠ¡çŠ¶æ€ç 


**æšä¸¾ç±»è®¾è®¡ï¼š**

```java
@Getter
@AllArgsConstructor
public enum ResultCode {
    
    // ===== æˆåŠŸçŠ¶æ€ç  =====
    SUCCESS(200, "æ“ä½œæˆåŠŸ"),
    CREATED(201, "åˆ›å»ºæˆåŠŸ"),
    
    // ===== å®¢æˆ·ç«¯é”™è¯¯ç  =====
    BAD_REQUEST(400, "è¯·æ±‚å‚æ•°é”™è¯¯"),
    UNAUTHORIZED(401, "æœªç™»å½•æˆ–ç™»å½•å·²è¿‡æœŸ"),
    FORBIDDEN(403, "æ²¡æœ‰æƒé™è®¿é—®"),
    NOT_FOUND(404, "è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨"),
    VALIDATION_ERROR(422, "å‚æ•°æ ¡éªŒå¤±è´¥"),
    
    // ===== æœåŠ¡å™¨é”™è¯¯ç  =====
    INTERNAL_ERROR(500, "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"),
    SERVICE_UNAVAILABLE(503, "æœåŠ¡æš‚ä¸å¯ç”¨"),
    
    // ===== ä¸šåŠ¡é”™è¯¯ç ï¼ˆè‡ªå®šä¹‰ï¼‰ =====
    USER_NOT_EXIST(1001, "ç”¨æˆ·ä¸å­˜åœ¨"),
    USER_ALREADY_EXIST(1002, "ç”¨æˆ·å·²å­˜åœ¨"),
    PASSWORD_ERROR(1003, "å¯†ç é”™è¯¯"),
    ACCOUNT_LOCKED(1004, "è´¦æˆ·å·²è¢«é”å®š"),
    
    ORDER_NOT_EXIST(2001, "è®¢å•ä¸å­˜åœ¨"),
    ORDER_PAID(2002, "è®¢å•å·²æ”¯ä»˜"),
    ORDER_EXPIRED(2003, "è®¢å•å·²è¿‡æœŸ");
    
    private final Integer code;
    private final String msg;
}
```

### 3.3 çŠ¶æ€ç ä½¿ç”¨è§„èŒƒ


**è§„èŒƒå¯¹ç…§è¡¨ï¼š**

| åœºæ™¯ | é”™è¯¯ç¤ºèŒƒ âŒ | æ­£ç¡®ç¤ºèŒƒ âœ… |
|------|------------|------------|
| ç”¨æˆ·æœªç™»å½• | `code: 500` | `code: 401` |
| å‚æ•°æ ¡éªŒå¤±è´¥ | `code: 500` | `code: 422` |
| æ•°æ®ä¸å­˜åœ¨ | `code: 500` | `code: 404` |
| æƒé™ä¸è¶³ | `code: 500` | `code: 403` |
| ä¸šåŠ¡é€»è¾‘é”™è¯¯ | `code: 500` | `code: è‡ªå®šä¹‰(å¦‚1001)` |

**æ”¹è¿›åçš„Resultç±»ï¼š**

```java
public class Result<T> {
    
    /** ä½¿ç”¨æšä¸¾çŠ¶æ€ç  */
    public static <T> Result<T> success(T data) {
        return new Result<>(
            ResultCode.SUCCESS.getCode(),
            ResultCode.SUCCESS.getMsg(),
            data,
            System.currentTimeMillis()
        );
    }
    
    /** ä½¿ç”¨æšä¸¾è¿”å›å¤±è´¥ */
    public static <T> Result<T> fail(ResultCode resultCode) {
        return new Result<>(
            resultCode.getCode(),
            resultCode.getMsg(),
            null,
            System.currentTimeMillis()
        );
    }
}
```

---

## 4. ğŸ“Š æ•°æ®æ ¼å¼ä¸€è‡´æ€§å®ç°


### 4.1 JSONæ ¼å¼æ ‡å‡†åŒ–


> ğŸ’¡ **ä¸ºä»€ä¹ˆè¦ç»Ÿä¸€JSONæ ¼å¼ï¼Ÿ**
> 
> å°±åƒæ‰€æœ‰å¿«é€’éƒ½ç”¨ç»Ÿä¸€çš„é¢å•ï¼š
> - å­—æ®µåç§°ç»Ÿä¸€ï¼ˆé©¼å³°å‘½åï¼‰
> - æ—¶é—´æ ¼å¼ç»Ÿä¸€ï¼ˆyyyy-MM-dd HH:mm:ssï¼‰
> - ç©ºå€¼å¤„ç†ç»Ÿä¸€ï¼ˆnullæˆ–ä¸è¿”å›ï¼‰

**Jacksoné…ç½®ç±»ï¼š**

```java
@Configuration
public class JacksonConfig {
    
    @Bean
    public ObjectMapper objectMapper() {
        ObjectMapper mapper = new ObjectMapper();
        
        // 1. æ—¥æœŸæ ¼å¼ç»Ÿä¸€
        mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
        
        // 2. ç©ºå€¼å¤„ç†
        mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
        
        // 3. æœªçŸ¥å±æ€§ä¸æŠ¥é”™
        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        
        // 4. é©¼å³°å‘½åè½¬æ¢
        mapper.setPropertyNamingStrategy(PropertyNamingStrategies.LOWER_CAMEL_CASE);
        
        return mapper;
    }
}
```

### 4.2 å­—æ®µå‘½åè§„èŒƒ


**ç»Ÿä¸€å‘½åå¯¹ç…§ï¼š**

```
æ•°æ®åº“å­—æ®µ        Javaå­—æ®µ         JSONå­—æ®µ
user_name    â†’   userName    â†’   userName
create_time  â†’   createTime  â†’   createTime
is_deleted   â†’   isDeleted   â†’   isDeleted

ğŸ”¸ å…¨éƒ¨é‡‡ç”¨é©¼å³°å‘½åæ³•
ğŸ”¸ å‰åç«¯ä¿æŒä¸€è‡´
ğŸ”¸ é¿å…ä¸‹åˆ’çº¿å‘½å
```

### 4.3 ç‰¹æ®Šç±»å‹å¤„ç†


**Longç±»å‹ç²¾åº¦é—®é¢˜ï¼š**

> âš ï¸ **æ³¨æ„**
> 
> JavaScriptä¸­çš„Numberç±»å‹æœ€å¤§å®‰å…¨æ•´æ•°æ˜¯ï¼š`2^53 - 1`
> è¶…è¿‡è¿™ä¸ªå€¼ä¼šå¯¼è‡´ç²¾åº¦ä¸¢å¤±ï¼

**è§£å†³æ–¹æ¡ˆï¼š**

```java
@Data
public class User {
    
    /** Longç±»å‹è½¬Stringè¿”å›å‰ç«¯ */
    @JsonSerialize(using = ToStringSerializer.class)
    private Long id;
    
    /** æ—¥æœŸæ ¼å¼åŒ– */
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
    private Date createTime;
    
    /** é‡‘é¢æ ¼å¼åŒ–ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰ */
    @JsonSerialize(using = CustomMoneySerializer.class)
    private BigDecimal amount;
}
```

---

## 5. âœ… æˆåŠŸå¤±è´¥å°è£…æœ€ä½³å®è·µ


### 5.1 æˆåŠŸå“åº”çš„å¤šç§åœºæ™¯


**åœºæ™¯åˆ†ç±»ï¼š**

```
æˆåŠŸå“åº”ç±»å‹ï¼š
â”œâ”€â”€ ğŸ“„ è¿”å›å•ä¸ªå¯¹è±¡
â”‚   â””â”€â”€ Result.success(user)
â”‚
â”œâ”€â”€ ğŸ“‹ è¿”å›åˆ—è¡¨æ•°æ®
â”‚   â””â”€â”€ Result.success(userList)
â”‚
â”œâ”€â”€ ğŸ“‘ è¿”å›åˆ†é¡µæ•°æ®
â”‚   â””â”€â”€ Result.success(pageData)
â”‚
â”œâ”€â”€ âœ… ä»…è¿”å›æˆåŠŸæç¤º
â”‚   â””â”€â”€ Result.success("æ“ä½œæˆåŠŸ")
â”‚
â””â”€â”€ ğŸ”¢ è¿”å›å½±å“è¡Œæ•°
    â””â”€â”€ Result.success("åˆ é™¤æˆåŠŸ", count)
```

**å®é™…åº”ç”¨ç¤ºä¾‹ï¼š**

```java
@RestController
@RequestMapping("/api")
public class DemoController {
    
    // åœºæ™¯1ï¼šæŸ¥è¯¢è¯¦æƒ…
    @GetMapping("/user/{id}")
    public Result<User> detail(@PathVariable Long id) {
        User user = userService.getById(id);
        return Result.success(user);
    }
    
    // åœºæ™¯2ï¼šæŸ¥è¯¢åˆ—è¡¨
    @GetMapping("/users")
    public Result<List<User>> list() {
        List<User> list = userService.list();
        return Result.success(list);
    }
    
    // åœºæ™¯3ï¼šæ–°å¢æ“ä½œï¼ˆæ— éœ€è¿”å›æ•°æ®ï¼‰
    @PostMapping("/user")
    public Result<Void> add(@RequestBody User user) {
        userService.save(user);
        return Result.success("æ·»åŠ æˆåŠŸ");
    }
    
    // åœºæ™¯4ï¼šæ‰¹é‡åˆ é™¤ï¼ˆè¿”å›å½±å“è¡Œæ•°ï¼‰
    @DeleteMapping("/users")
    public Result<Integer> batchDelete(@RequestBody List<Long> ids) {
        int count = userService.removeByIds(ids);
        return Result.success("åˆ é™¤æˆåŠŸ", count);
    }
}
```

### 5.2 å¤±è´¥å“åº”çš„ä¼˜é›…å¤„ç†


**å¤±è´¥åœºæ™¯åˆ†ç±»ï¼š**

| å¤±è´¥ç±»å‹ | å¤„ç†æ–¹å¼ | ç¤ºä¾‹ |
|---------|---------|------|
| ğŸ” **ä¸šåŠ¡åˆ¤æ–­å¤±è´¥** | è¿”å›å…·ä½“é”™è¯¯ä¿¡æ¯ | `Result.fail("ç”¨æˆ·ä¸å­˜åœ¨")` |
| âš ï¸ **å‚æ•°æ ¡éªŒå¤±è´¥** | è¿”å›æ ¡éªŒé”™è¯¯æç¤º | `Result.fail(422, "æ‰‹æœºå·æ ¼å¼é”™è¯¯")` |
| ğŸ” **æƒé™ä¸è¶³** | è¿”å›æƒé™é”™è¯¯ç  | `Result.fail(ResultCode.FORBIDDEN)` |
| ğŸ’¥ **ç³»ç»Ÿå¼‚å¸¸** | ç»Ÿä¸€å¼‚å¸¸æ‹¦æˆªå¤„ç† | è§å¼‚å¸¸å¤„ç†ç« èŠ‚ |

**ä¸šåŠ¡æ ¡éªŒç¤ºä¾‹ï¼š**

```java
@Service
public class UserServiceImpl implements UserService {
    
    public Result<Void> updatePassword(Long userId, String oldPwd, String newPwd) {
        
        // 1. æŸ¥è¯¢ç”¨æˆ·
        User user = this.getById(userId);
        if (user == null) {
            return Result.fail(ResultCode.USER_NOT_EXIST);
        }
        
        // 2. éªŒè¯æ—§å¯†ç 
        if (!passwordEncoder.matches(oldPwd, user.getPassword())) {
            return Result.fail(ResultCode.PASSWORD_ERROR);
        }
        
        // 3. æ£€æŸ¥è´¦æˆ·çŠ¶æ€
        if (user.getStatus() == 0) {
            return Result.fail(ResultCode.ACCOUNT_LOCKED);
        }
        
        // 4. æ›´æ–°å¯†ç 
        user.setPassword(passwordEncoder.encode(newPwd));
        this.updateById(user);
        
        return Result.success("å¯†ç ä¿®æ”¹æˆåŠŸ");
    }
}
```

### 5.3 é“¾å¼è°ƒç”¨ä¼˜åŒ–


**Builderæ¨¡å¼å¢å¼ºï¼š**

```java
public class Result<T> {
    
    /** é“¾å¼è®¾ç½®æ•°æ® */
    public Result<T> data(T data) {
        this.data = data;
        return this;
    }
    
    /** é“¾å¼è®¾ç½®æ¶ˆæ¯ */
    public Result<T> message(String msg) {
        this.msg = msg;
        return this;
    }
    
    /** é“¾å¼è®¾ç½®çŠ¶æ€ç  */
    public Result<T> code(Integer code) {
        this.code = code;
        return this;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
return Result.success()
        .message("æŸ¥è¯¢æˆåŠŸ")
        .data(userList)
        .code(200);
```

---

## 6. ğŸ“„ åˆ†é¡µç»“æœå°è£…æ–¹æ¡ˆ


### 6.1 åˆ†é¡µæ•°æ®ç»“æ„è®¾è®¡


> ğŸ¯ **åˆ†é¡µå“åº”è®¾è®¡æ€è·¯**
> 
> åˆ†é¡µå°±åƒä¸€æœ¬ä¹¦ï¼š
> - `records`ï¼šå½“å‰é¡µçš„å†…å®¹ï¼ˆæ•°æ®åˆ—è¡¨ï¼‰
> - `total`ï¼šæ•´æœ¬ä¹¦çš„æ€»é¡µæ•°ï¼ˆæ€»è®°å½•æ•°ï¼‰
> - `current`ï¼šå½“å‰åœ¨ç¬¬å‡ é¡µ
> - `size`ï¼šæ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡

**PageResultåˆ†é¡µå“åº”ç±»ï¼š**

```java
@Data
@NoArgsConstructor
@AllArgsConstructor
public class PageResult<T> implements Serializable {
    
    /** æ•°æ®åˆ—è¡¨ */
    private List<T> records;
    
    /** æ€»è®°å½•æ•° */
    private Long total;
    
    /** å½“å‰é¡µç  */
    private Long current;
    
    /** æ¯é¡µå¤§å° */
    private Long size;
    
    /** æ€»é¡µæ•° */
    private Long pages;
    
    /** æ˜¯å¦æœ‰ä¸Šä¸€é¡µ */
    private Boolean hasPrevious;
    
    /** æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ */
    private Boolean hasNext;
    
    /** ä»MyBatis-Plusçš„Pageå¯¹è±¡è½¬æ¢ */
    public static <T> PageResult<T> from(Page<T> page) {
        PageResult<T> result = new PageResult<>();
        result.setRecords(page.getRecords());
        result.setTotal(page.getTotal());
        result.setCurrent(page.getCurrent());
        result.setSize(page.getSize());
        result.setPages(page.getPages());
        result.setHasPrevious(page.hasPrevious());
        result.setHasNext(page.hasNext());
        return result;
    }
}
```

### 6.2 åˆ†é¡µæŸ¥è¯¢æœ€ä½³å®è·µ


**Controllerå±‚åˆ†é¡µå¤„ç†ï¼š**

```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    @GetMapping("/page")
    public Result<PageResult<User>> page(
            @RequestParam(defaultValue = "1") Long current,
            @RequestParam(defaultValue = "10") Long size,
            @RequestParam(required = false) String keyword) {
        
        // 1. åˆ›å»ºåˆ†é¡µå¯¹è±¡
        Page<User> page = new Page<>(current, size);
        
        // 2. æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
        if (StrUtil.isNotBlank(keyword)) {
            wrapper.like(User::getName, keyword)
                   .or()
                   .like(User::getPhone, keyword);
        }
        
        // 3. æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢
        userService.page(page, wrapper);
        
        // 4. è½¬æ¢å¹¶è¿”å›
        return Result.success(PageResult.from(page));
    }
}
```

### 6.3 å‰ç«¯åˆ†é¡µå“åº”ç¤ºä¾‹


**è¿”å›çš„JSONæ ¼å¼ï¼š**

```json
{
  "code": 200,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {"id": 1, "name": "å¼ ä¸‰", "age": 20},
      {"id": 2, "name": "æå››", "age": 22}
    ],
    "total": 100,
    "current": 1,
    "size": 10,
    "pages": 10,
    "hasPrevious": false,
    "hasNext": true
  },
  "timestamp": 1695456789000
}
```

**å‰ç«¯å¤„ç†å‚è€ƒï¼š**

```javascript
// Axiosè¯·æ±‚ç¤ºä¾‹
axios.get('/user/page', {
  params: { current: 1, size: 10, keyword: 'å¼ ä¸‰' }
}).then(res => {
  if (res.data.code === 200) {
    const pageData = res.data.data;
    
    // æ¸²æŸ“æ•°æ®åˆ—è¡¨
    this.tableData = pageData.records;
    
    // è®¾ç½®åˆ†é¡µä¿¡æ¯
    this.pagination = {
      total: pageData.total,
      current: pageData.current,
      pageSize: pageData.size
    };
  }
});
```

---

## 7. ğŸ”— å‰ç«¯äº¤äº’åè®®è®¾è®¡


### 7.1 è¯·æ±‚å“åº”å®Œæ•´æµç¨‹


```
å‰ç«¯                          åç«¯                     æ•°æ®åº“
  |                            |                         |
  |--[1]å‘é€HTTPè¯·æ±‚----------->|                         |
  |   GET /api/user/1          |                         |
  |                            |                         |
  |                     [2]Controlleræ¥æ”¶                 |
  |                            |                         |
  |                     [3]å‚æ•°æ ¡éªŒ                       |
  |                         æˆåŠŸ â†“ å¤±è´¥                   |
  |                            |   â†“                     |
  |                            | return Result.fail()    |
  |                            |   â†“                     |
  |                     [4]Serviceå¤„ç†                    |
  |                            |--------SQLæŸ¥è¯¢---------->|
  |                            |<-------è¿”å›æ•°æ®----------|
  |                            |                         |
  |                     [5]Resultå°è£…                     |
  |                            |                         |
  |<--[6]è¿”å›JSONå“åº”----------|                         |
  |   {code:200, data:{...}}   |                         |
  |                            |                         |
  |   [7]å‰ç«¯åˆ¤æ–­code           |                         |
  |   200â†’æ¸²æŸ“æ•°æ®              |                         |
  |   å…¶ä»–â†’æ˜¾ç¤ºé”™è¯¯              |                         |
```

### 7.2 å‰åç«¯åè®®è§„èŒƒ


**HTTPæ–¹æ³•ä¸æ“ä½œæ˜ å°„ï¼š**

| HTTPæ–¹æ³• | æ“ä½œ | è¯·æ±‚ç¤ºä¾‹ | å“åº”ç¤ºä¾‹ |
|---------|------|---------|---------|
| `GET` | æŸ¥è¯¢ | `/user/1` | `Result.success(user)` |
| `POST` | æ–°å¢ | `/user` + body | `Result.success("æ·»åŠ æˆåŠŸ")` |
| `PUT` | ä¿®æ”¹ | `/user/1` + body | `Result.success("æ›´æ–°æˆåŠŸ")` |
| `DELETE` | åˆ é™¤ | `/user/1` | `Result.success("åˆ é™¤æˆåŠŸ")` |

**è¯·æ±‚å‚æ•°è§„èŒƒï¼š**

```
URLå‚æ•°ï¼šç”¨äºç®€å•æŸ¥è¯¢
GET /user/page?current=1&size=10&keyword=å¼ ä¸‰

è¯·æ±‚ä½“ï¼šç”¨äºå¤æ‚æ•°æ®
POST /user
{
  "name": "å¼ ä¸‰",
  "age": 20,
  "email": "zhangsan@example.com"
}

è·¯å¾„å‚æ•°ï¼šç”¨äºæŒ‡å®šèµ„æº
GET /user/{id}
DELETE /order/{orderId}
```

### 7.3 é”™è¯¯å¤„ç†åè®®


**å‰ç«¯é”™è¯¯å¤„ç†æ ‡å‡†æµç¨‹ï¼š**

```javascript
// Axioså…¨å±€å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(
  response => {
    const res = response.data;
    
    // æ ¹æ®codeåˆ¤æ–­
    if (res.code === 200) {
      return res.data;  // è¿”å›ä¸šåŠ¡æ•°æ®
    } else if (res.code === 401) {
      // æœªç™»å½•ï¼Œè·³è½¬ç™»å½•é¡µ
      router.push('/login');
    } else if (res.code === 403) {
      // æ— æƒé™æç¤º
      Message.error('æ‚¨æ²¡æœ‰æƒé™è®¿é—®');
    } else {
      // å…¶ä»–é”™è¯¯æç¤º
      Message.error(res.msg || 'æ“ä½œå¤±è´¥');
    }
    
    return Promise.reject(res);
  },
  error => {
    Message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
    return Promise.reject(error);
  }
);
```

### 7.4 å“åº”æ—¶é—´ä¼˜åŒ–


> âš¡ **æ€§èƒ½ä¼˜åŒ–å»ºè®®**

**å“åº”æ—¶é—´æ ‡å‡†ï¼š**

```
ğŸŸ¢ ä¼˜ç§€ï¼š< 100ms
ğŸŸ¡ è‰¯å¥½ï¼š100-300ms  
ğŸŸ  å¯æ¥å—ï¼š300-1000ms
ğŸ”´ éœ€ä¼˜åŒ–ï¼š> 1000ms
```

**ä¼˜åŒ–ç­–ç•¥ï¼š**

| é—®é¢˜ | ä¼˜åŒ–æ–¹æ¡ˆ | æ•ˆæœ |
|------|---------|------|
| ğŸŒ æŸ¥è¯¢æ…¢ | æ·»åŠ æ•°æ®åº“ç´¢å¼• | æŸ¥è¯¢é€Ÿåº¦æå‡10-100å€ |
| ğŸ“¦ æ•°æ®é‡å¤§ | åˆ†é¡µæŸ¥è¯¢ + å­—æ®µè£å‰ª | å‡å°‘ç½‘ç»œä¼ è¾“ |
| ğŸ”„ é‡å¤æŸ¥è¯¢ | æ·»åŠ Redisç¼“å­˜ | å“åº”æ—¶é—´é™ä½90% |
| ğŸŒ ç½‘ç»œå»¶è¿Ÿ | å¯ç”¨GZIPå‹ç¼© | ä¼ è¾“é‡å‡å°‘70% |

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 ç»Ÿä¸€å“åº”å°è£…è¦ç‚¹


```
ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š
â”œâ”€â”€ Resultå“åº”ç±»
â”‚   â”œâ”€â”€ åŒ…å«ï¼šcodeã€msgã€dataã€timestamp
â”‚   â”œâ”€â”€ æ³›å‹è®¾è®¡ï¼šæ”¯æŒä»»æ„ç±»å‹æ•°æ®
â”‚   â””â”€â”€ å·¥å‚æ–¹æ³•ï¼šsuccess()ã€fail()
â”‚
â”œâ”€â”€ çŠ¶æ€ç ä½“ç³»
â”‚   â”œâ”€â”€ 2xxï¼šæˆåŠŸçŠ¶æ€
â”‚   â”œâ”€â”€ 4xxï¼šå®¢æˆ·ç«¯é”™è¯¯
â”‚   â”œâ”€â”€ 5xxï¼šæœåŠ¡å™¨é”™è¯¯
â”‚   â””â”€â”€ è‡ªå®šä¹‰ï¼šä¸šåŠ¡é”™è¯¯ç ï¼ˆ1000+ï¼‰
â”‚
â”œâ”€â”€ æ•°æ®æ ¼å¼
â”‚   â”œâ”€â”€ JSONæ ‡å‡†åŒ–ï¼ˆé©¼å³°å‘½åï¼‰
â”‚   â”œâ”€â”€ æ—¥æœŸæ ¼å¼ç»Ÿä¸€
â”‚   â””â”€â”€ ç‰¹æ®Šç±»å‹å¤„ç†ï¼ˆLongâ†’Stringï¼‰
â”‚
â””â”€â”€ åˆ†é¡µå°è£…
    â”œâ”€â”€ PageResultä¸“ç”¨ç±»
    â”œâ”€â”€ åŒ…å«åˆ†é¡µå…ƒæ•°æ®
    â””â”€â”€ ä¾¿æ·è½¬æ¢æ–¹æ³•
```

### 8.2 å®è·µå»ºè®®


> ğŸ’¡ **æ–°æ‰‹å®¹æ˜“è¸©çš„å‘**

**å¸¸è§é”™è¯¯1ï¼šçŠ¶æ€ç æ»¥ç”¨**
```
âŒ é”™è¯¯ï¼šæ‰€æœ‰é”™è¯¯éƒ½è¿”å›500
âœ… æ­£ç¡®ï¼šæ ¹æ®é”™è¯¯ç±»å‹è¿”å›å¯¹åº”çŠ¶æ€ç 
   - æœªç™»å½•ï¼š401
   - æ— æƒé™ï¼š403
   - å‚æ•°é”™è¯¯ï¼š400/422
   - ä¸šåŠ¡é”™è¯¯ï¼šè‡ªå®šä¹‰ç 
```

**å¸¸è§é”™è¯¯2ï¼šæ¶ˆæ¯æç¤ºä¸å‹å¥½**
```
âŒ é”™è¯¯ï¼š"error"ã€"fail"ã€"å¼‚å¸¸"
âœ… æ­£ç¡®ï¼š"ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·æ›´æ¢"
        "å¯†ç é•¿åº¦å¿…é¡»åœ¨6-20ä½ä¹‹é—´"
        "è®¢å•å·²æ”¯ä»˜ï¼Œæ— æ³•å–æ¶ˆ"
```

**å¸¸è§é”™è¯¯3ï¼šæ•°æ®æ ¼å¼ä¸ä¸€è‡´**
```
âŒ é”™è¯¯ï¼šæœ‰æ—¶è¿”å›dataï¼Œæœ‰æ—¶ç›´æ¥è¿”å›å¯¹è±¡
âœ… æ­£ç¡®ï¼šå§‹ç»ˆä½¿ç”¨ResultåŒ…è£…
```

### 8.3 æœ€ä½³å®è·µæ¸…å•


**å¼€å‘è§„èŒƒæ£€æŸ¥è¡¨ï¼š**

- [ ] âœ… æ‰€æœ‰æ¥å£éƒ½è¿”å›ç»Ÿä¸€çš„Resultæ ¼å¼
- [ ] âœ… çŠ¶æ€ç ä½¿ç”¨æšä¸¾ç®¡ç†ï¼Œä¸å‡ºç°é­”æ³•æ•°å­—
- [ ] âœ… é”™è¯¯ä¿¡æ¯æ¸…æ™°æ˜ç¡®ï¼Œä¾¿äºç”¨æˆ·ç†è§£
- [ ] âœ… åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨PageResultå°è£…
- [ ] âœ… æ—¥æœŸã€é‡‘é¢ç­‰ç‰¹æ®Šå­—æ®µæ ¼å¼åŒ–
- [ ] âœ… Longç±»å‹IDè½¬Stringé¿å…ç²¾åº¦ä¸¢å¤±
- [ ] âœ… å‰åç«¯çº¦å®šç»Ÿä¸€çš„é”™è¯¯å¤„ç†åè®®
- [ ] âœ… å®šæœŸreviewå“åº”æ—¶é—´ï¼ŒåŠæ—¶ä¼˜åŒ–

### 8.4 è¿›é˜¶å­¦ä¹ è·¯å¾„


**å­¦ä¹ è·¯çº¿ï¼š**

```
åŸºç¡€ç¯‡ï¼ˆå·²å®Œæˆï¼‰              è¿›é˜¶ç¯‡ï¼ˆä¸‹ä¸€æ­¥ï¼‰
    â†“                           â†“
ç»Ÿä¸€å“åº”å°è£…    â†’    å…¨å±€å¼‚å¸¸å¤„ç†
    â†“                           â†“
çŠ¶æ€ç æ ‡å‡†åŒ–    â†’    å‚æ•°æ ¡éªŒå¢å¼º
    â†“                           â†“
åˆ†é¡µç»“æœå°è£…    â†’    æ¥å£æ–‡æ¡£ç”Ÿæˆ
    â†“                           â†“
å‰åç«¯åè®®      â†’    æ¥å£å®‰å…¨é˜²æŠ¤
```

**æ¨èæ‰©å±•çŸ¥è¯†ï¼š**
- ğŸ”¸ å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼ˆ@ControllerAdviceï¼‰
- ğŸ”¸ å‚æ•°æ ¡éªŒæ¡†æ¶ï¼ˆValidationï¼‰
- ğŸ”¸ æ¥å£æ–‡æ¡£å·¥å…·ï¼ˆSwagger/Knife4jï¼‰
- ğŸ”¸ æ—¥å¿—é“¾è·¯è¿½è¸ªï¼ˆMDC + TraceIdï¼‰

---

> ğŸ“ **å­¦ä¹ å¿ƒå¾—**
>
> ç»Ÿä¸€å“åº”å°è£…æ˜¯åç«¯å¼€å‘çš„**åŸºç¡€è®¾æ–½**ï¼š
> - å°±åƒå»ºæˆ¿å­å…ˆæ‰“åœ°åŸº ğŸ—ï¸
> - ä¸€æ¬¡è®¾è®¡ï¼Œå…¨é¡¹ç›®å—ç›Š âœ¨
> - å‰åç«¯åä½œæ›´é¡ºç•… ğŸ¤
> - ç³»ç»Ÿç»´æŠ¤æ›´è½»æ¾ ğŸ”§
>
> **è®°ä½ï¼šè§„èŒƒçš„ä»£ç æ˜¯ç»™æœªæ¥çš„è‡ªå·±æœ€å¥½çš„ç¤¼ç‰©ï¼** ğŸ