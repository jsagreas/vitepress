---
title: 39ã€Criteriaæ’åºä¸åˆ†é¡µ
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯æ’åºä¸åˆ†é¡µ](#1-ä»€ä¹ˆæ˜¯æ’åºä¸åˆ†é¡µ)
2. [Orderæ’åºå¯¹è±¡è¯¦è§£](#2-Orderæ’åºå¯¹è±¡è¯¦è§£)
3. [åˆ†é¡µæŸ¥è¯¢å®ç°](#3-åˆ†é¡µæŸ¥è¯¢å®ç°)
4. [æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ](#4-æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“Š ä»€ä¹ˆæ˜¯æ’åºä¸åˆ†é¡µ


### 1.1 ç”Ÿæ´»ä¸­çš„æ’åºä¸åˆ†é¡µ


> ğŸ’¡ **ç”Ÿæ´»ç±»æ¯”**ï¼š
> æƒ³è±¡ä½ åœ¨è´­ç‰©ç½‘ç«™æœç´¢å•†å“ï¼š
> - **æ’åº**ï¼šæŒ‰ä»·æ ¼ä»ä½åˆ°é«˜ã€æŒ‰é”€é‡ä»é«˜åˆ°ä½
> - **åˆ†é¡µ**ï¼šä¸€é¡µæ˜¾ç¤º20ä¸ªå•†å“ï¼Œç‚¹å‡»"ä¸‹ä¸€é¡µ"çœ‹æ›´å¤š

**åœ¨æ•°æ®åº“ä¸­åŒæ ·çš„é“ç†**ï¼š
```
æ²¡æœ‰æ’åºå’Œåˆ†é¡µçš„é—®é¢˜ï¼š
âŒ æ•°æ®æ‚ä¹±æ— ç« ï¼Œæ‰¾ä¸åˆ°æƒ³è¦çš„
âŒ ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®ï¼Œé¡µé¢å¡æ­»
âŒ æµªè´¹å†…å­˜å’Œç½‘ç»œæµé‡

ä½¿ç”¨æ’åºå’Œåˆ†é¡µçš„å¥½å¤„ï¼š
âœ… æ•°æ®æœ‰åºå±•ç¤ºï¼Œç¬¦åˆç”¨æˆ·æœŸæœ›
âœ… åˆ†æ‰¹åŠ è½½ï¼Œæ€§èƒ½æ›´å¥½
âœ… ç”¨æˆ·ä½“éªŒæµç•…
```

### 1.2 Criteriaä¸­çš„æ’åºä¸åˆ†é¡µæ˜¯ä»€ä¹ˆ


**æ ¸å¿ƒæ¦‚å¿µè§£é‡Š**ï¼š

ğŸ”¸ **æ’åºï¼ˆOrderï¼‰**ï¼š
- å°±æ˜¯å‘Šè¯‰æ•°æ®åº“"æŒ‰ä»€ä¹ˆå­—æ®µã€ä»€ä¹ˆé¡ºåº"è¿”å›æ•°æ®
- ç±»ä¼¼Excelä¸­çš„æ’åºåŠŸèƒ½
- Hibernateç”¨`Order`å¯¹è±¡æ¥è¡¨ç¤ºæ’åºè§„åˆ™

ğŸ”¸ **åˆ†é¡µï¼ˆPaginationï¼‰**ï¼š
- å°±æ˜¯"æ¯æ¬¡å–å¤šå°‘æ¡ã€ä»ç¬¬å‡ æ¡å¼€å§‹å–"
- é¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®
- ç”¨`setFirstResult`å’Œ`setMaxResults`æ¥æ§åˆ¶

**å®é™…åº”ç”¨åœºæ™¯**ï¼š
```
ç”µå•†ç½‘ç«™ï¼š
- å•†å“åˆ—è¡¨æŒ‰ä»·æ ¼æ’åº
- æ¯é¡µæ˜¾ç¤º20ä¸ªå•†å“

è®ºå›ç³»ç»Ÿï¼š
- å¸–å­æŒ‰å‘å¸ƒæ—¶é—´å€’åº
- æ¯é¡µæ˜¾ç¤º10æ¡è®°å½•

åå°ç®¡ç†ï¼š
- ç”¨æˆ·åˆ—è¡¨æŒ‰æ³¨å†Œæ—¶é—´æ’åº
- æ”¯æŒç¿»é¡µæŸ¥çœ‹
```

---

## 2. ğŸ”„ Orderæ’åºå¯¹è±¡è¯¦è§£


### 2.1 Orderå¯¹è±¡æ˜¯ä»€ä¹ˆ


**ç®€å•ç†è§£**ï¼š
- `Order`å°±æ˜¯ä¸€ä¸ª"æ’åºè§„åˆ™"å¯¹è±¡
- ä½ å‘Šè¯‰å®ƒï¼šæŒ‰å“ªä¸ªå­—æ®µã€æ˜¯å‡åºè¿˜æ˜¯é™åº
- Hibernateä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„SQL `ORDER BY`å­å¥

### 2.2 å‡åºæ’åºï¼ˆascï¼‰


**ä»€ä¹ˆæ˜¯å‡åº**ï¼š
- ä»å°åˆ°å¤§ã€ä»ä½åˆ°é«˜ã€ä»æ—©åˆ°æ™š
- æ•°å­—ï¼š1, 2, 3, 4...
- æ—¶é—´ï¼šè¿‡å» â†’ ç°åœ¨ â†’ å°†æ¥
- å­—æ¯ï¼šA â†’ B â†’ C â†’ Z

**ä»£ç å®ç°**ï¼š
```java
// æŒ‰ä»·æ ¼ä»ä½åˆ°é«˜æ’åº
Criteria criteria = session.createCriteria(Product.class);
criteria.addOrder(Order.asc("price"));  // asc = ascending å‡åº
List<Product> products = criteria.list();

// å®é™…ç”Ÿæˆçš„SQLå¤§æ¦‚æ˜¯ï¼š
// SELECT * FROM product ORDER BY price ASC
```

**å®é™…æ•ˆæœ**ï¼š
```
æ’åºå‰ï¼š
å•†å“A - 99å…ƒ
å•†å“B - 59å…ƒ  
å•†å“C - 199å…ƒ

æŒ‰ä»·æ ¼å‡åºåï¼š
å•†å“B - 59å…ƒ   â† æœ€ä¾¿å®œ
å•†å“A - 99å…ƒ
å•†å“C - 199å…ƒ  â† æœ€è´µ
```

### 2.3 é™åºæ’åºï¼ˆdescï¼‰


**ä»€ä¹ˆæ˜¯é™åº**ï¼š
- ä»å¤§åˆ°å°ã€ä»é«˜åˆ°ä½ã€ä»æ™šåˆ°æ—©
- æ•°å­—ï¼š10, 9, 8, 7...
- æ—¶é—´ï¼šå°†æ¥ â†’ ç°åœ¨ â†’ è¿‡å»
- é”€é‡ï¼šçƒ­é—¨ â†’ å†·é—¨

**ä»£ç å®ç°**ï¼š
```java
// æŒ‰åˆ›å»ºæ—¶é—´ä»æ–°åˆ°æ—§æ’åº
Criteria criteria = session.createCriteria(Article.class);
criteria.addOrder(Order.desc("createTime"));  // desc = descending é™åº
List<Article> articles = criteria.list();

// ç”ŸæˆSQLï¼š
// SELECT * FROM article ORDER BY create_time DESC
```

**å¸¸è§åº”ç”¨**ï¼š
```
âœ… æœ€æ–°æ–‡ç« åˆ—è¡¨ï¼šæŒ‰å‘å¸ƒæ—¶é—´é™åº
âœ… é”€é‡æ’è¡Œæ¦œï¼šæŒ‰é”€é‡é™åº
âœ… ç§¯åˆ†æ’åï¼šæŒ‰ç§¯åˆ†é™åº
âœ… æœ€æ–°è¯„è®ºï¼šæŒ‰è¯„è®ºæ—¶é—´é™åº
```

### 2.4 å¤šå­—æ®µæ’åºï¼ˆaddOrderï¼‰


**ä¸ºä»€ä¹ˆéœ€è¦å¤šå­—æ®µæ’åº**ï¼š
- æœ‰æ—¶å€™ä¸€ä¸ªæ’åºæ¡ä»¶ä¸å¤Ÿ
- æ¯”å¦‚ï¼šå…ˆæŒ‰åˆ†ç±»ï¼ŒåŒåˆ†ç±»å†…å†æŒ‰ä»·æ ¼

**å¦‚ä½•å®ç°**ï¼š
```java
// å…ˆæŒ‰åˆ†ç±»å‡åºï¼ŒåŒåˆ†ç±»å†…æŒ‰ä»·æ ¼é™åº
Criteria criteria = session.createCriteria(Product.class);
criteria.addOrder(Order.asc("category"));   // ç¬¬ä¸€ä¼˜å…ˆçº§
criteria.addOrder(Order.desc("price"));     // ç¬¬äºŒä¼˜å…ˆçº§
List<Product> products = criteria.list();

// ç”ŸæˆSQLï¼š
// SELECT * FROM product ORDER BY category ASC, price DESC
```

**æ’åºæ•ˆæœæ¼”ç¤º**ï¼š
```
æ’åºå‰ï¼š
æ‰‹æœº - iPhone - 8999
ç”µè„‘ - MacBook - 12999
æ‰‹æœº - å°ç±³ - 2999
ç”µè„‘ - è”æƒ³ - 5999

å¤šå­—æ®µæ’åºåï¼š
ç”µè„‘ - MacBook - 12999  â† ç”µè„‘åˆ†ç±»ï¼Œä»·æ ¼é«˜çš„åœ¨å‰
ç”µè„‘ - è”æƒ³ - 5999
æ‰‹æœº - iPhone - 8999    â† æ‰‹æœºåˆ†ç±»ï¼Œä»·æ ¼é«˜çš„åœ¨å‰
æ‰‹æœº - å°ç±³ - 2999
```

**æ’åºä¼˜å…ˆçº§**ï¼š
```
ç†è§£è¦ç‚¹ï¼š
1ï¸âƒ£ å…ˆæŒ‰ç¬¬ä¸€ä¸ªOrderæ’åº
2ï¸âƒ£ ç¬¬ä¸€ä¸ªç›¸åŒæ—¶ï¼Œæ‰çœ‹ç¬¬äºŒä¸ªOrder
3ï¸âƒ£ ä¾æ­¤ç±»æ¨ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ’åºæ¡ä»¶

è®°å¿†æŠ€å·§ï¼š
å°±åƒç­çº§æ’é˜Ÿ â†’
å…ˆæŒ‰èº«é«˜æ’ï¼Œèº«é«˜ç›¸åŒçš„å†æŒ‰å­¦å·æ’
```

---

## 3. ğŸ“„ åˆ†é¡µæŸ¥è¯¢å®ç°


### 3.1 åˆ†é¡µçš„æœ¬è´¨æ˜¯ä»€ä¹ˆ


**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
```
åˆ†é¡µå°±æ˜¯"åˆ‡è›‹ç³•"ï¼š
ğŸ‚ å®Œæ•´è›‹ç³• = æ‰€æœ‰æ•°æ®ï¼ˆæ¯”å¦‚1000æ¡ï¼‰
ğŸ° æ¯ä¸€å— = ä¸€é¡µæ•°æ®ï¼ˆæ¯”å¦‚æ¯é¡µ20æ¡ï¼‰
ğŸ”ª åˆ‡çš„ä½ç½® = ä»ç¬¬å‡ æ¡å¼€å§‹

åˆ†é¡µå‚æ•°ï¼š
â€¢ èµ·å§‹ä½ç½®ï¼ˆä»å“ªå¼€å§‹åˆ‡ï¼‰
â€¢ æ¯é¡µå¤§å°ï¼ˆåˆ‡å¤šå¤§ä¸€å—ï¼‰
```

### 3.2 setFirstResult - è®¾ç½®èµ·å§‹ä½ç½®


**æ˜¯ä»€ä¹ˆ**ï¼š
- å‘Šè¯‰æ•°æ®åº“"ä»ç¬¬å‡ æ¡è®°å½•å¼€å§‹å–"
- æ³¨æ„ï¼š**ç´¢å¼•ä»0å¼€å§‹**ï¼ˆç¬¬ä¸€æ¡æ˜¯0ï¼Œä¸æ˜¯1ï¼‰

**å¦‚ä½•è®¡ç®—**ï¼š
```
å‡è®¾æ¯é¡µ10æ¡æ•°æ®ï¼š

ç¬¬1é¡µï¼šä»ç¬¬0æ¡å¼€å§‹
firstResult = 0

ç¬¬2é¡µï¼šä»ç¬¬10æ¡å¼€å§‹  
firstResult = 10

ç¬¬3é¡µï¼šä»ç¬¬20æ¡å¼€å§‹
firstResult = 20

è®¡ç®—å…¬å¼ï¼š
firstResult = (å½“å‰é¡µç  - 1) Ã— æ¯é¡µå¤§å°
```

**ä»£ç ç¤ºä¾‹**ï¼š
```java
// è·å–ç¬¬2é¡µçš„æ•°æ®ï¼ˆæ¯é¡µ10æ¡ï¼‰
int pageNum = 2;
int pageSize = 10;
int firstResult = (pageNum - 1) * pageSize;  // (2-1) * 10 = 10

Criteria criteria = session.createCriteria(User.class);
criteria.setFirstResult(firstResult);  // ä»ç¬¬10æ¡å¼€å§‹
```

### 3.3 setMaxResults - è®¾ç½®æœ€å¤§ç»“æœæ•°


**æ˜¯ä»€ä¹ˆ**ï¼š
- å‘Šè¯‰æ•°æ®åº“"æœ€å¤šå–å¤šå°‘æ¡è®°å½•"
- å°±æ˜¯"æ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡"

**å¸¸ç”¨å€¼**ï¼š
```
ä¸åŒåœºæ™¯çš„é¡µé¢å¤§å°ï¼š
â€¢ ç§»åŠ¨ç«¯åˆ—è¡¨ï¼š10-15æ¡ï¼ˆå±å¹•å°ï¼‰
â€¢ PCç«¯åˆ—è¡¨ï¼š20-30æ¡ï¼ˆå±å¹•å¤§ï¼‰
â€¢ åå°ç®¡ç†ï¼š50-100æ¡ï¼ˆæ•ˆç‡ä¼˜å…ˆï¼‰
â€¢ æ•°æ®å¯¼å‡ºï¼š1000+æ¡ï¼ˆæ‰¹é‡å¤„ç†ï¼‰
```

**ä»£ç ç¤ºä¾‹**ï¼š
```java
// æ¯é¡µæ˜¾ç¤º20æ¡æ•°æ®
Criteria criteria = session.createCriteria(Product.class);
criteria.setMaxResults(20);  // æœ€å¤šè¿”å›20æ¡
```

### 3.4 å®Œæ•´åˆ†é¡µå®ç°


**æ ‡å‡†åˆ†é¡µæŸ¥è¯¢**ï¼š
```java
public class PageHelper {
    /**
     * é€šç”¨åˆ†é¡µæŸ¥è¯¢æ–¹æ³•
     * @param pageNum é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
     * @param pageSize æ¯é¡µå¤§å°
     */
    public List<User> getUsers(int pageNum, int pageSize) {
        Session session = sessionFactory.openSession();
        
        // åˆ›å»ºCriteria
        Criteria criteria = session.createCriteria(User.class);
        
        // æ·»åŠ æ’åºï¼ˆå¯é€‰ï¼‰
        criteria.addOrder(Order.desc("createTime"));
        
        // è®¾ç½®åˆ†é¡µå‚æ•°
        int firstResult = (pageNum - 1) * pageSize;
        criteria.setFirstResult(firstResult);
        criteria.setMaxResults(pageSize);
        
        // æ‰§è¡ŒæŸ¥è¯¢
        List<User> users = criteria.list();
        
        session.close();
        return users;
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
// è·å–ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡
List<User> page1 = pageHelper.getUsers(1, 10);  
// SQL: SELECT * FROM user ORDER BY create_time DESC LIMIT 0, 10

// è·å–ç¬¬3é¡µï¼Œæ¯é¡µ20æ¡  
List<User> page3 = pageHelper.getUsers(3, 20);
// SQL: SELECT * FROM user ORDER BY create_time DESC LIMIT 40, 20
```

### 3.5 åˆ†é¡µæ•°æ®å®Œæ•´æ–¹æ¡ˆ


**é—®é¢˜**ï¼šé™¤äº†æ•°æ®ï¼Œè¿˜éœ€è¦æ€»æ•°å’Œæ€»é¡µæ•°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```java
public class PageResult<T> {
    private List<T> data;        // å½“å‰é¡µæ•°æ®
    private long total;          // æ€»è®°å½•æ•°
    private int pageNum;         // å½“å‰é¡µç 
    private int pageSize;        // æ¯é¡µå¤§å°
    private int totalPages;      // æ€»é¡µæ•°
    
    // è®¡ç®—æ€»é¡µæ•°
    public PageResult(List<T> data, long total, int pageNum, int pageSize) {
        this.data = data;
        this.total = total;
        this.pageNum = pageNum;
        this.pageSize = pageSize;
        this.totalPages = (int) Math.ceil((double) total / pageSize);
    }
}
```

**å®Œæ•´åˆ†é¡µæŸ¥è¯¢**ï¼š
```java
public PageResult<User> getUserPage(int pageNum, int pageSize) {
    Session session = sessionFactory.openSession();
    
    // 1. æŸ¥è¯¢æ€»è®°å½•æ•°
    Criteria countCriteria = session.createCriteria(User.class);
    countCriteria.setProjection(Projections.rowCount());
    Long total = (Long) countCriteria.uniqueResult();
    
    // 2. æŸ¥è¯¢å½“å‰é¡µæ•°æ®
    Criteria dataCriteria = session.createCriteria(User.class);
    dataCriteria.addOrder(Order.desc("createTime"));
    dataCriteria.setFirstResult((pageNum - 1) * pageSize);
    dataCriteria.setMaxResults(pageSize);
    List<User> users = dataCriteria.list();
    
    // 3. å°è£…ç»“æœ
    PageResult<User> result = new PageResult<>(users, total, pageNum, pageSize);
    
    session.close();
    return result;
}
```

**è¿”å›ç»“æœç¤ºä¾‹**ï¼š
```
{
  "data": [ç”¨æˆ·1, ç”¨æˆ·2, ...],
  "total": 156,           // æ€»å…±156æ¡è®°å½•
  "pageNum": 2,           // å½“å‰ç¬¬2é¡µ
  "pageSize": 20,         // æ¯é¡µ20æ¡
  "totalPages": 8         // æ€»å…±8é¡µ
}
```

---

## 4. âš¡ æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ


### 4.1 æ€§èƒ½é—®é¢˜åˆ†æ


**å¸¸è§æ€§èƒ½é—®é¢˜**ï¼š

ğŸ”¸ **é—®é¢˜1ï¼šæ¯æ¬¡æŸ¥æ€»æ•°å¾ˆæ…¢**
```
ç°è±¡ï¼š
åˆ†é¡µæ—¶éœ€è¦ COUNT(*) ç»Ÿè®¡æ€»æ•°
æ•°æ®é‡å¤§æ—¶ï¼ŒCOUNTå¾ˆæ…¢

è§£å†³æ–¹æ¡ˆï¼š
â€¢ ç¼“å­˜æ€»æ•°ï¼ˆçŸ­æ—¶é—´å†…ä¸ä¼šå˜ï¼‰
â€¢ åªåœ¨ç¬¬ä¸€é¡µæŸ¥è¯¢æ€»æ•°
â€¢ ä½¿ç”¨è¿‘ä¼¼å€¼ï¼ˆä¸éœ€è¦å®Œå…¨ç²¾ç¡®ï¼‰
```

ğŸ”¸ **é—®é¢˜2ï¼šæ·±åº¦åˆ†é¡µå¾ˆæ…¢**
```
ç°è±¡ï¼š
ç¬¬1é¡µå¾ˆå¿«ï¼Œç¬¬1000é¡µå¾ˆæ…¢
æ•°æ®åº“éœ€è¦è·³è¿‡å‰é¢çš„æ‰€æœ‰æ•°æ®

è§£å†³æ–¹æ¡ˆï¼š
â€¢ é™åˆ¶æœ€å¤§é¡µç ï¼ˆå¦‚åªèƒ½ç¿»åˆ°100é¡µï¼‰
â€¢ ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼ˆåŸºäºIDï¼‰
â€¢ æç¤ºç”¨æˆ·ä¼˜åŒ–æœç´¢æ¡ä»¶
```

ğŸ”¸ **é—®é¢˜3ï¼šæ²¡æœ‰ç´¢å¼•å¯¼è‡´æ…¢**
```
ç°è±¡ï¼š
æ’åºå­—æ®µæ²¡ç´¢å¼•ï¼Œæ¯æ¬¡éƒ½å…¨è¡¨æ‰«æ

è§£å†³æ–¹æ¡ˆï¼š
â€¢ ç»™æ’åºå­—æ®µåŠ ç´¢å¼•
â€¢ ç»™å¸¸ç”¨æŸ¥è¯¢æ¡ä»¶åŠ ç´¢å¼•
â€¢ ä½¿ç”¨å¤åˆç´¢å¼•ä¼˜åŒ–å¤šå­—æ®µæ’åº
```

### 4.2 ç´¢å¼•ä¼˜åŒ–å»ºè®®


**æ’åºå­—æ®µå¿…é¡»åŠ ç´¢å¼•**ï¼š
```sql
-- å¦‚æœç»å¸¸æŒ‰create_timeæ’åº
CREATE INDEX idx_create_time ON user(create_time);

-- å¦‚æœç»å¸¸å¤šå­—æ®µæ’åº
CREATE INDEX idx_category_price ON product(category, price);
```

**ç´¢å¼•å¯¹åˆ†é¡µçš„å½±å“**ï¼š
```
æœ‰ç´¢å¼•çš„æƒ…å†µï¼š
âœ… æ•°æ®åº“ç›´æ¥å®šä½ï¼Œé€Ÿåº¦å¿«
âœ… æ·±åº¦åˆ†é¡µä¹Ÿèƒ½ä¿æŒæ€§èƒ½

æ— ç´¢å¼•çš„æƒ…å†µï¼š  
âŒ å…¨è¡¨æ‰«æï¼Œé€Ÿåº¦æ…¢
âŒ æ•°æ®é‡å¤§æ—¶å‡ ä¹ä¸å¯ç”¨
```

### 4.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ åˆç†è®¾ç½®é¡µé¢å¤§å°**ï¼š
```
ä¸åŒåœºæ™¯çš„æ¨èå€¼ï¼š

ç§»åŠ¨ç«¯ï¼š
â€¢ é¦–å±ï¼š10-15æ¡
â€¢ ä¸‹æ‹‰åˆ·æ–°ï¼š5-10æ¡

PCç«¯ï¼š  
â€¢ åˆ—è¡¨é¡µï¼š20-30æ¡
â€¢ è¡¨æ ¼ï¼š50-100æ¡

åŸåˆ™ï¼š
å¹³è¡¡ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½
ä¸è¦ä¸€é¡µå¤ªå¤šä¹Ÿä¸è¦å¤ªå°‘
```

**ğŸ¯ ä½¿ç”¨åˆç†çš„æ’åº**ï¼š
```
ä¼˜å…ˆçº§æ’åºå»ºè®®ï¼š

1ï¸âƒ£ å¿…è¦æ€§æ’åºï¼š
   ç”¨æˆ·æœŸæœ›çœ‹åˆ°çš„é¡ºåº
   
2ï¸âƒ£ æ€§èƒ½è€ƒè™‘ï¼š
   æœ‰ç´¢å¼•çš„å­—æ®µä¼˜å…ˆ
   
3ï¸âƒ£ ç¨³å®šæ€§æ’åºï¼š
   åŠ ä¸Šå”¯ä¸€å­—æ®µï¼ˆå¦‚IDï¼‰ä¿è¯ç¨³å®š
```

**ğŸ¯ ç¼“å­˜ä¼˜åŒ–ç­–ç•¥**ï¼š
```java
// ç¼“å­˜æ€»è®°å½•æ•°ï¼ˆ5åˆ†é’Ÿï¼‰
@Cacheable(value = "userCount", ttl = 300)
public Long getUserCount() {
    // æŸ¥è¯¢æ€»æ•°çš„ä»£ç 
}

// ç¼“å­˜çƒ­é—¨é¡µé¢ï¼ˆ1åˆ†é’Ÿï¼‰
@Cacheable(value = "userPage", key = "#pageNum", ttl = 60)
public PageResult<User> getUserPage(int pageNum) {
    // åˆ†é¡µæŸ¥è¯¢ä»£ç 
}
```

### 4.4 å¸¸è§é™·é˜±ä¸é¿å…


**âŒ é™·é˜±1ï¼šå¿˜è®°åŠ æ’åº**
```java
// é”™è¯¯ï¼šæ²¡æœ‰æ’åºï¼Œæ¯æ¬¡ç»“æœå¯èƒ½ä¸åŒ
criteria.setFirstResult(0);
criteria.setMaxResults(10);

// æ­£ç¡®ï¼šåŠ ä¸Šç¨³å®šçš„æ’åº
criteria.addOrder(Order.desc("id"));  // ç”¨IDä¿è¯ç¨³å®šæ€§
criteria.setFirstResult(0);
criteria.setMaxResults(10);
```

**âŒ é™·é˜±2ï¼šé¡µç ä»0å¼€å§‹**
```java
// é”™è¯¯ï¼šå‰ç«¯ä¼ æ¥çš„é¡µç é€šå¸¸ä»1å¼€å§‹
int firstResult = pageNum * pageSize;  // ç¬¬1é¡µä¼šè·³è¿‡æ•°æ®

// æ­£ç¡®ï¼šè¦å‡1
int firstResult = (pageNum - 1) * pageSize;
```

**âŒ é™·é˜±3ï¼šä¸é™åˆ¶æœ€å¤§é¡µæ•°**
```java
// é”™è¯¯ï¼šå…è®¸æŸ¥è¯¢ä»»æ„é¡µæ•°
if (pageNum < 1) {
    pageNum = 1;
}

// æ­£ç¡®ï¼šé™åˆ¶æœ€å¤§é¡µæ•°
if (pageNum < 1) {
    pageNum = 1;
} else if (pageNum > 100) {
    pageNum = 100;  // æœ€å¤šç¿»åˆ°100é¡µ
}
```

---

## 5. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 æ ¸å¿ƒæ¦‚å¿µå›é¡¾


```
ğŸ”¸ Orderæ’åºå¯¹è±¡ï¼š
   è¡¨ç¤ºä¸€ä¸ªæ’åºè§„åˆ™ï¼ŒæŒ‡å®šå­—æ®µå’Œæ–¹å‘
   
ğŸ”¸ å‡åºï¼ˆascï¼‰ï¼š
   ä»å°åˆ°å¤§ã€ä»ä½åˆ°é«˜ã€ä»æ—©åˆ°æ™š
   
ğŸ”¸ é™åºï¼ˆdescï¼‰ï¼š
   ä»å¤§åˆ°å°ã€ä»é«˜åˆ°ä½ã€ä»æ™šåˆ°æ—©
   
ğŸ”¸ åˆ†é¡µå‚æ•°ï¼š
   â€¢ setFirstResultï¼šä»ç¬¬å‡ æ¡å¼€å§‹
   â€¢ setMaxResultsï¼šæœ€å¤šè¿”å›å‡ æ¡
```

### 5.2 å…³é”®çŸ¥è¯†ç‚¹


**ğŸ”¹ æ’åºä½¿ç”¨è¦ç‚¹**ï¼š
```
âœ… å•å­—æ®µæ’åºï¼šOrder.asc("field")
âœ… å¤šå­—æ®µæ’åºï¼šå¤šæ¬¡addOrderï¼Œæœ‰ä¼˜å…ˆçº§
âœ… ç¨³å®šæ’åºï¼šæœ€å¥½åŠ ä¸ŠIDä¿è¯ä¸€è‡´æ€§
âœ… æ€§èƒ½è€ƒè™‘ï¼šæ’åºå­—æ®µè¦æœ‰ç´¢å¼•
```

**ğŸ”¹ åˆ†é¡µè®¡ç®—å…¬å¼**ï¼š
```
èµ·å§‹ä½ç½® = (é¡µç  - 1) Ã— æ¯é¡µå¤§å°
æ€»é¡µæ•° = æ€»è®°å½•æ•° Ã· æ¯é¡µå¤§å°ï¼ˆå‘ä¸Šå–æ•´ï¼‰

ç¤ºä¾‹ï¼š
100æ¡æ•°æ®ï¼Œæ¯é¡µ10æ¡
ç¬¬1é¡µï¼šä»0å¼€å§‹ï¼Œå–10æ¡
ç¬¬5é¡µï¼šä»40å¼€å§‹ï¼Œå–10æ¡  
æ€»é¡µæ•°ï¼š100 Ã· 10 = 10é¡µ
```

**ğŸ”¹ å®Œæ•´åˆ†é¡µæ­¥éª¤**ï¼š
```
1ï¸âƒ£ æŸ¥è¯¢æ€»è®°å½•æ•°ï¼ˆCOUNTï¼‰
2ï¸âƒ£ è®¡ç®—èµ·å§‹ä½ç½®
3ï¸âƒ£ è®¾ç½®åˆ†é¡µå‚æ•°
4ï¸âƒ£ æ·»åŠ æ’åº
5ï¸âƒ£ æ‰§è¡ŒæŸ¥è¯¢
6ï¸âƒ£ å°è£…åˆ†é¡µç»“æœ
```

### 5.3 å®æˆ˜åº”ç”¨æŒ‡å—


| åœºæ™¯ | æ’åºæ–¹æ¡ˆ | åˆ†é¡µè®¾ç½® | æ³¨æ„äº‹é¡¹ |
|------|---------|---------|---------|
| ğŸ“± **å•†å“åˆ—è¡¨** | `Order.desc("salesCount")` | æ¯é¡µ20æ¡ | åŠ é”€é‡ç´¢å¼• |
| ğŸ“ **æ–‡ç« åˆ—è¡¨** | `Order.desc("publishTime")` | æ¯é¡µ15æ¡ | åŠ æ—¶é—´ç´¢å¼• |
| ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** | `Order.asc("id")` | æ¯é¡µ50æ¡ | IDè‡ªå¸¦ç´¢å¼• |
| ğŸ’¬ **è¯„è®ºå±•ç¤º** | `Order.desc("createTime")` | æ¯é¡µ10æ¡ | é™åˆ¶æœ€å¤§é¡µ |

### 5.4 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•


**ä¸Šçº¿å‰æ£€æŸ¥**ï¼š
```
â–¡ æ’åºå­—æ®µæ˜¯å¦æœ‰ç´¢å¼•ï¼Ÿ
â–¡ é¡µé¢å¤§å°æ˜¯å¦åˆç†ï¼Ÿ
â–¡ æ˜¯å¦é™åˆ¶äº†æœ€å¤§é¡µæ•°ï¼Ÿ
â–¡ æ€»æ•°æŸ¥è¯¢æ˜¯å¦æœ‰ç¼“å­˜ï¼Ÿ
â–¡ æ˜¯å¦æœ‰ç¨³å®šçš„æ’åºå­—æ®µï¼Ÿ
â–¡ æ·±åº¦åˆ†é¡µæ˜¯å¦åšäº†ä¼˜åŒ–ï¼Ÿ
```

### 5.5 è®°å¿†è¦ç‚¹


> ğŸ”‘ **ä¸€å¥è¯æ€»ç»“**ï¼š
> Criteriaçš„æ’åºç”¨Orderå¯¹è±¡ï¼Œåˆ†é¡µç”¨setFirstResultå’ŒsetMaxResultsï¼Œè®°ä½ç´¢å¼•å’Œåˆç†é¡µé¢å¤§å°æ˜¯æ€§èƒ½å…³é”®ã€‚

> ğŸ“Œ **å¿…è®°å…¬å¼**ï¼š
> ```
> firstResult = (pageNum - 1) Ã— pageSize
> totalPages = Math.ceil(total / pageSize)
> ```

> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼š
> - æ’åº = å‘Šè¯‰æ•°æ®åº“è¿”å›é¡ºåº
> - åˆ†é¡µ = åˆ‡è›‹ç³•ï¼Œä¸€æ¬¡å–ä¸€å—
> - ç´¢å¼• = åˆ†é¡µå’Œæ’åºçš„æ€§èƒ½ä¿è¯

**å­¦ä¹ å»ºè®®**ï¼š
- âœ… å…ˆç†è§£æ’åºå’Œåˆ†é¡µçš„æ¦‚å¿µ
- âœ… æ‰‹å†™ä¸€éå®Œæ•´åˆ†é¡µä»£ç 
- âœ… ç†è§£æ€§èƒ½ä¼˜åŒ–çš„åŸç†
- âœ… åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨å’Œä¼˜åŒ–