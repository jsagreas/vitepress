---
title: 7ã€å­—æ®µæ˜ å°„è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [å­—æ®µæ˜ å°„åŸºç¡€æ¦‚å¿µ](#1-å­—æ®µæ˜ å°„åŸºç¡€æ¦‚å¿µ)
2. [Javaç±»å‹ä¸æ•°æ®åº“ç±»å‹æ˜ å°„](#2-Javaç±»å‹ä¸æ•°æ®åº“ç±»å‹æ˜ å°„)
3. [@Columnå±æ€§è¯¦è§£](#3-Columnå±æ€§è¯¦è§£)
4. [æ—¶é—´ç±»å‹æ˜ å°„@Temporal](#4-æ—¶é—´ç±»å‹æ˜ å°„Temporal)
5. [å¤§å¯¹è±¡å¤„ç†@Lob](#5-å¤§å¯¹è±¡å¤„ç†Lob)
6. [æšä¸¾ç±»å‹æ˜ å°„@Enumerated](#6-æšä¸¾ç±»å‹æ˜ å°„Enumerated)
7. [ä¸´æ—¶å­—æ®µ@Transient](#7-ä¸´æ—¶å­—æ®µTransient)
8. [å­—æ®µç±»å‹è½¬æ¢](#8-å­—æ®µç±»å‹è½¬æ¢)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å­—æ®µæ˜ å°„åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å­—æ®µæ˜ å°„


**é€šä¿—ç†è§£**ï¼šå­—æ®µæ˜ å°„å°±åƒæ˜¯Javaå¯¹è±¡å’Œæ•°æ®åº“è¡¨ä¹‹é—´çš„"ç¿»è¯‘å®˜"

```
Javaå®ä½“ç±»ä¸­ï¼š                æ•°æ®åº“è¡¨ä¸­ï¼š
private String name;    â†’    name VARCHAR(50)
private int age;        â†’    age INT
private Date birthday;  â†’    birthday DATE
```

**ä¸ºä»€ä¹ˆéœ€è¦å­—æ®µæ˜ å°„ï¼Ÿ**
- Javaå’Œæ•°æ®åº“è¯´çš„æ˜¯"ä¸¤ç§è¯­è¨€"
- Javaæœ‰`String`ã€`int`ã€`Date`ç­‰ç±»å‹
- æ•°æ®åº“æœ‰`VARCHAR`ã€`INT`ã€`DATE`ç­‰ç±»å‹
- å­—æ®µæ˜ å°„è´Ÿè´£æŠŠä¸¤è€…å¯¹åº”èµ·æ¥

### 1.2 å­—æ®µæ˜ å°„çš„æ ¸å¿ƒä½œç”¨


> ğŸ’¡ **æ ¸å¿ƒä½œç”¨**ï¼šå‘Šè¯‰Hibernateå¦‚ä½•æŠŠJavaå¯¹è±¡çš„å±æ€§å­˜å‚¨åˆ°æ•°æ®åº“è¡¨çš„åˆ—ä¸­

**ä¸‰å¤§æ ¸å¿ƒä»»åŠ¡**ï¼š
1. **ç±»å‹è½¬æ¢**ï¼šJavaç±»å‹ â†” æ•°æ®åº“ç±»å‹
2. **å±æ€§è®¾ç½®**ï¼šåˆ—åã€é•¿åº¦ã€æ˜¯å¦ä¸ºç©ºç­‰
3. **ç‰¹æ®Šå¤„ç†**ï¼šå¤§å¯¹è±¡ã€æšä¸¾ã€æ—¶é—´ç­‰ç‰¹æ®Šç±»å‹

---

## 2. ğŸ”„ Javaç±»å‹ä¸æ•°æ®åº“ç±»å‹æ˜ å°„


### 2.1 è‡ªåŠ¨æ˜ å°„è§„åˆ™


Hibernateä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ˜ å°„ï¼Œä¸éœ€è¦ä½ æ‰‹åŠ¨æŒ‡å®šæ¯ä¸€ä¸ªï¼š

| Javaç±»å‹ | æ•°æ®åº“ç±»å‹(MySQL) | è¯´æ˜ |
|---------|------------------|------|
| `String` | `VARCHAR` | æ–‡æœ¬å†…å®¹ |
| `int` / `Integer` | `INT` | æ•´æ•° |
| `long` / `Long` | `BIGINT` | é•¿æ•´æ•° |
| `double` / `Double` | `DOUBLE` | æµ®ç‚¹æ•° |
| `boolean` / `Boolean` | `TINYINT(1)` | å¸ƒå°”å€¼ |
| `Date` | `TIMESTAMP` | æ—¥æœŸæ—¶é—´ |
| `BigDecimal` | `DECIMAL` | ç²¾ç¡®å°æ•° |

**ç¤ºä¾‹ç†è§£**ï¼š

```java
@Entity
public class User {
    @Id
    private Long id;           // â†’ BIGINT
    private String username;   // â†’ VARCHAR(255)
    private int age;          // â†’ INT
    private boolean active;   // â†’ TINYINT(1)
}
```

### 2.2 åŸºæœ¬ç±»å‹ vs åŒ…è£…ç±»å‹


**é‡è¦åŒºåˆ«**ï¼š

```
åŸºæœ¬ç±»å‹ï¼šint, long, boolean
- ä¸èƒ½ä¸ºnull
- é»˜è®¤å€¼ï¼š0æˆ–false
- æ•°æ®åº“å­—æ®µè®¾ç½®ä¸ºNOT NULL

åŒ…è£…ç±»å‹ï¼šInteger, Long, Boolean  
- å¯ä»¥ä¸ºnull
- é»˜è®¤å€¼ï¼šnull
- æ•°æ®åº“å­—æ®µå…è®¸ä¸ºNULL
```

**å®é™…åº”ç”¨**ï¼š

```java
// å¹´é¾„å¿…é¡»æœ‰å€¼ï¼Œç”¨åŸºæœ¬ç±»å‹
private int age;  // NOT NULLï¼Œé»˜è®¤0

// å¯é€‰çš„ç”µè¯å·ç ï¼Œç”¨åŒ…è£…ç±»å‹
private Integer phoneNumber;  // å…è®¸NULL
```

> âš ï¸ **æ³¨æ„**ï¼šæ¨èä½¿ç”¨åŒ…è£…ç±»å‹ï¼Œå› ä¸ºnullå¯ä»¥è¡¨ç¤º"æœªè®¾ç½®"çš„çŠ¶æ€

---

## 3. ğŸ“ @Columnå±æ€§è¯¦è§£


### 3.1 åŸºæœ¬ç”¨æ³•


`@Column`æ³¨è§£ç”¨æ¥å®šä¹‰æ•°æ®åº“åˆ—çš„è¯¦ç»†å±æ€§ï¼š

```java
@Entity
public class Product {
    @Column(
        name = "product_name",      // åˆ—å
        length = 100,               // é•¿åº¦
        nullable = false,           // ä¸èƒ½ä¸ºç©º
        unique = true              // å”¯ä¸€çº¦æŸ
    )
    private String name;
}
```

### 3.2 å¸¸ç”¨å±æ€§è¯¦è§£


**ğŸ“Œ nameå±æ€§ - æŒ‡å®šåˆ—å**

```java
// Javaå±æ€§åå’Œæ•°æ®åº“åˆ—åä¸ä¸€è‡´æ—¶ä½¿ç”¨
@Column(name = "user_name")
private String username;  // Javaä¸­å«usernameï¼Œæ•°æ®åº“ä¸­å«user_name
```

**ğŸ“Œ lengthå±æ€§ - å­—ç¬¦ä¸²é•¿åº¦**

```java
@Column(length = 50)
private String shortText;   // VARCHAR(50)

@Column(length = 500)
private String longText;    // VARCHAR(500)
```

**ğŸ“Œ nullableå±æ€§ - æ˜¯å¦å…è®¸ä¸ºç©º**

```java
@Column(nullable = false)
private String required;    // NOT NULLï¼Œå¿…é¡»æœ‰å€¼

@Column(nullable = true)    // é»˜è®¤å°±æ˜¯true
private String optional;    // å¯ä»¥ä¸ºNULL
```

**ğŸ“Œ uniqueå±æ€§ - å”¯ä¸€æ€§çº¦æŸ**

```java
@Column(unique = true)
private String email;       // é‚®ç®±ä¸èƒ½é‡å¤

@Column(unique = true)
private String idCard;      // èº«ä»½è¯å·ä¸èƒ½é‡å¤
```

**ğŸ“Œ precisionå’Œscale - å°æ•°ç²¾åº¦**

```java
// precisionæ€»ä½æ•°ï¼Œscaleå°æ•°ä½æ•°
@Column(precision = 10, scale = 2)
private BigDecimal price;   // DECIMAL(10,2)
// ä¾‹å¦‚ï¼š12345678.99ï¼ˆæ€»å…±10ä½ï¼Œå°æ•°2ä½ï¼‰
```

### 3.3 å®Œæ•´ç¤ºä¾‹


```java
@Entity
@Table(name = "products")
public class Product {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // å•†å“åç§°ï¼šæœ€å¤š100å­—ç¬¦ï¼Œä¸èƒ½ä¸ºç©º
    @Column(name = "product_name", length = 100, nullable = false)
    private String name;
    
    // å•†å“ç¼–å·ï¼šå”¯ä¸€ï¼Œä¸èƒ½é‡å¤
    @Column(name = "product_code", unique = true, nullable = false)
    private String code;
    
    // ä»·æ ¼ï¼š10ä½æ•°å­—ï¼Œ2ä½å°æ•°
    @Column(precision = 10, scale = 2)
    private BigDecimal price;
    
    // æè¿°ï¼šå¯ä»¥ä¸ºç©ºï¼Œæœ€å¤š500å­—ç¬¦
    @Column(length = 500)
    private String description;
}
```

---

## 4. â° æ—¶é—´ç±»å‹æ˜ å°„@Temporal


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦@Temporal


**é—®é¢˜åœºæ™¯**ï¼šJavaçš„`Date`ç±»å‹åŒ…å«æ—¥æœŸå’Œæ—¶é—´ï¼Œä½†æ•°æ®åº“æœ‰ä¸‰ç§æ—¶é—´ç±»å‹

```
Java:              æ•°æ®åº“:
Date  â†’  éœ€è¦é€‰æ‹©  DATE      (åªå­˜æ—¥æœŸï¼š2024-01-15)
                  TIME      (åªå­˜æ—¶é—´ï¼š14:30:00)
                  TIMESTAMP (å­˜æ—¥æœŸ+æ—¶é—´ï¼š2024-01-15 14:30:00)
```

### 4.2 ä¸‰ç§æ—¶é—´ç±»å‹


**ğŸ“… DATE - åªå­˜å‚¨æ—¥æœŸ**

```java
@Temporal(TemporalType.DATE)
private Date birthday;  // å­˜å‚¨ï¼š2024-01-15ï¼ˆç”Ÿæ—¥åªéœ€è¦æ—¥æœŸï¼‰
```

**ğŸ• TIME - åªå­˜å‚¨æ—¶é—´**

```java
@Temporal(TemporalType.TIME)
private Date workTime;  // å­˜å‚¨ï¼š09:00:00ï¼ˆä¸Šç­æ—¶é—´åªéœ€è¦æ—¶é—´ï¼‰
```

**ğŸ“† TIMESTAMP - å­˜å‚¨æ—¥æœŸ+æ—¶é—´**

```java
@Temporal(TemporalType.TIMESTAMP)
private Date createTime;  // å­˜å‚¨ï¼š2024-01-15 14:30:00ï¼ˆåˆ›å»ºæ—¶é—´éœ€è¦ç²¾ç¡®ï¼‰
```

### 4.3 å®é™…åº”ç”¨ç¤ºä¾‹


```java
@Entity
public class Employee {
    
    @Id
    private Long id;
    
    // å‡ºç”Ÿæ—¥æœŸï¼ˆåªéœ€è¦å¹´æœˆæ—¥ï¼‰
    @Temporal(TemporalType.DATE)
    private Date birthday;
    
    // ä¸Šç­æ‰“å¡æ—¶é—´ï¼ˆåªéœ€è¦æ—¶åˆ†ç§’ï¼‰
    @Temporal(TemporalType.TIME)
    private Date checkInTime;
    
    // å…¥èŒæ—¶é—´ï¼ˆéœ€è¦å®Œæ•´æ—¥æœŸæ—¶é—´ï¼‰
    @Temporal(TemporalType.TIMESTAMP)
    private Date hireDate;
}
```

> ğŸ’¡ **æ–°å†™æ³•æ¨è**ï¼šJava 8+å¯ä»¥ç”¨`LocalDate`ã€`LocalTime`ã€`LocalDateTime`ï¼Œä¸éœ€è¦@Temporal

```java
// æ¨èçš„æ–°å†™æ³•ï¼ˆJava 8+ï¼‰
private LocalDate birthday;        // è‡ªåŠ¨æ˜ å°„ä¸ºDATE
private LocalTime checkInTime;     // è‡ªåŠ¨æ˜ å°„ä¸ºTIME
private LocalDateTime hireDate;    // è‡ªåŠ¨æ˜ å°„ä¸ºTIMESTAMP
```

---

## 5. ğŸ“¦ å¤§å¯¹è±¡å¤„ç†@Lob


### 5.1 ä»€ä¹ˆæ˜¯å¤§å¯¹è±¡


**é€šä¿—ç†è§£**ï¼šå­˜å‚¨ä½“ç§¯å¾ˆå¤§çš„æ•°æ®ï¼Œæ¯”å¦‚æ–‡ç« å†…å®¹ã€å›¾ç‰‡ã€æ–‡ä»¶

```
æ™®é€šå­—æ®µï¼šå‡ ä¸ªå­—åˆ°å‡ ç™¾ä¸ªå­—
å¤§å¯¹è±¡å­—æ®µï¼šå‡ åƒå­—çš„æ–‡ç« ã€å‡ MBçš„å›¾ç‰‡
```

### 5.2 @Lobçš„ä½¿ç”¨


**æ–‡æœ¬å¤§å¯¹è±¡ï¼ˆCLOBï¼‰**

```java
@Entity
public class Article {
    
    @Id
    private Long id;
    
    private String title;  // æ™®é€šæ ‡é¢˜
    
    @Lob  // é•¿æ–‡æœ¬å†…å®¹
    private String content;  // æ•°æ®åº“ç±»å‹ï¼šTEXTæˆ–CLOB
    // å¯ä»¥å­˜å‚¨å‡ åƒå­—çš„æ–‡ç« å†…å®¹
}
```

**äºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼ˆBLOBï¼‰**

```java
@Entity
public class Attachment {
    
    @Id
    private Long id;
    
    @Lob  // äºŒè¿›åˆ¶æ•°æ®
    private byte[] fileData;  // æ•°æ®åº“ç±»å‹ï¼šBLOB
    // å¯ä»¥å­˜å‚¨å›¾ç‰‡ã€æ–‡ä»¶ç­‰äºŒè¿›åˆ¶æ•°æ®
}
```

### 5.3 å®é™…åº”ç”¨åœºæ™¯


| ä½¿ç”¨åœºæ™¯ | Javaç±»å‹ | æ•°æ®åº“ç±»å‹ | ç”¨é€” |
|---------|---------|-----------|------|
| æ–‡ç« å†…å®¹ | `String` + `@Lob` | `TEXT/CLOB` | å­˜å‚¨é•¿æ–‡ç«  |
| ç”¨æˆ·å¤´åƒ | `byte[]` + `@Lob` | `BLOB` | å­˜å‚¨å›¾ç‰‡ |
| æ–‡ä»¶é™„ä»¶ | `byte[]` + `@Lob` | `BLOB` | å­˜å‚¨æ–‡ä»¶ |

```java
@Entity
public class BlogPost {
    
    @Id
    private Long id;
    
    private String title;  // æ ‡é¢˜ï¼ˆçŸ­æ–‡æœ¬ï¼‰
    
    @Lob
    private String content;  // æ­£æ–‡ï¼ˆé•¿æ–‡æœ¬ï¼‰
    
    @Lob
    private byte[] coverImage;  // å°é¢å›¾ç‰‡ï¼ˆäºŒè¿›åˆ¶ï¼‰
}
```

> âš ï¸ **æ€§èƒ½æç¤º**ï¼šå¤§å¯¹è±¡å­—æ®µä¼šå½±å“æŸ¥è¯¢æ€§èƒ½ï¼Œå»ºè®®æŒ‰éœ€åŠ è½½ï¼ˆåç»­ç« èŠ‚ä¼šè®²æ‡’åŠ è½½ï¼‰

---

## 6. ğŸ·ï¸ æšä¸¾ç±»å‹æ˜ å°„@Enumerated


### 6.1 ä»€ä¹ˆæ˜¯æšä¸¾æ˜ å°„


**åœºæ™¯**ï¼šJavaä¸­ç”¨æšä¸¾è¡¨ç¤ºå›ºå®šçš„å‡ ä¸ªé€‰é¡¹ï¼Œå¦‚ä½•å­˜åˆ°æ•°æ®åº“ï¼Ÿ

```java
// Javaæšä¸¾ç±»
public enum UserStatus {
    ACTIVE,    // æ¿€æ´»
    INACTIVE,  // æœªæ¿€æ´»
    BANNED     // å°ç¦
}
```

### 6.2 ä¸¤ç§å­˜å‚¨æ–¹å¼


**æ–¹å¼1ï¼šå­˜å‚¨æšä¸¾åç§°ï¼ˆæ¨èï¼‰**

```java
@Enumerated(EnumType.STRING)
private UserStatus status;

// æ•°æ®åº“å­˜å‚¨ï¼š
// ACTIVEã€INACTIVEã€BANNEDï¼ˆå­—ç¬¦ä¸²ï¼‰
// ä¼˜ç‚¹ï¼šå¯è¯»æ€§å¥½ï¼Œæ•°æ®åº“èƒ½çœ‹æ‡‚
// ç¼ºç‚¹ï¼šå ç”¨ç©ºé—´ç¨å¤§
```

**æ–¹å¼2ï¼šå­˜å‚¨æšä¸¾åºå·**

```java
@Enumerated(EnumType.ORDINAL)
private UserStatus status;

// æ•°æ®åº“å­˜å‚¨ï¼š
// 0ã€1ã€2ï¼ˆæ•°å­—ï¼Œå¯¹åº”æšä¸¾é¡ºåºï¼‰
// ä¼˜ç‚¹ï¼šå ç”¨ç©ºé—´å°
// ç¼ºç‚¹ï¼šæšä¸¾é¡ºåºæ”¹å˜ä¼šå‡ºé—®é¢˜
```

### 6.3 å®Œæ•´ç¤ºä¾‹


```java
// 1. å®šä¹‰æšä¸¾ç±»
public enum OrderStatus {
    PENDING,    // å¾…æ”¯ä»˜
    PAID,       // å·²æ”¯ä»˜
    SHIPPED,    // å·²å‘è´§
    COMPLETED,  // å·²å®Œæˆ
    CANCELLED   // å·²å–æ¶ˆ
}

// 2. å®ä½“ç±»ä½¿ç”¨
@Entity
public class Order {
    
    @Id
    private Long id;
    
    @Enumerated(EnumType.STRING)  // æ¨èç”¨STRING
    private OrderStatus status;    // æ•°æ®åº“å­˜ï¼šPENDINGã€PAIDç­‰
    
    private BigDecimal amount;
}

// 3. ä½¿ç”¨ç¤ºä¾‹
Order order = new Order();
order.setStatus(OrderStatus.PENDING);  // è®¾ç½®ä¸ºå¾…æ”¯ä»˜
```

> ğŸ’¡ **æ¨èåšæ³•**ï¼šä½¿ç”¨`EnumType.STRING`ï¼Œå³ä½¿å¤šå ç‚¹ç©ºé—´ï¼Œä½†æ›´å®‰å…¨å¯è¯»

---

## 7. ğŸš« ä¸´æ—¶å­—æ®µ@Transient


### 7.1 ä»€ä¹ˆæ˜¯ä¸´æ—¶å­—æ®µ


**åœºæ™¯**ï¼šæœ‰äº›Javaå±æ€§ä¸éœ€è¦å­˜åˆ°æ•°æ®åº“

```java
@Entity
public class User {
    
    @Id
    private Long id;
    
    private String password;  // éœ€è¦å­˜æ•°æ®åº“
    
    @Transient
    private String confirmPassword;  // åªç”¨äºæ³¨å†Œç¡®è®¤ï¼Œä¸å­˜æ•°æ®åº“
    
    @Transient
    private int age;  // æ ¹æ®ç”Ÿæ—¥è®¡ç®—çš„ï¼Œä¸å­˜æ•°æ®åº“
}
```

### 7.2 ä½¿ç”¨åœºæ™¯


**å¸¸è§åº”ç”¨**ï¼š

```java
@Entity
public class Product {
    
    @Id
    private Long id;
    
    private BigDecimal price;        // å­˜æ•°æ®åº“
    private BigDecimal discount;     // å­˜æ•°æ®åº“
    
    @Transient
    private BigDecimal finalPrice;   // è®¡ç®—å¾—å‡ºï¼Œä¸å­˜æ•°æ®åº“
    
    // è·å–æœ€ç»ˆä»·æ ¼ï¼ˆåŠ¨æ€è®¡ç®—ï¼‰
    public BigDecimal getFinalPrice() {
        return price.multiply(discount);
    }
}
```

**å…¸å‹åœºæ™¯æ€»ç»“**ï¼š

| åœºæ™¯ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|-----|
| è®¡ç®—å­—æ®µ | ç”±å…¶ä»–å­—æ®µè®¡ç®—å¾—å‡º | æ€»ä»· = å•ä»· Ã— æ•°é‡ |
| ä¸´æ—¶éªŒè¯ | åªç”¨äºè¾“å…¥éªŒè¯ | ç¡®è®¤å¯†ç å­—æ®µ |
| UIè¾…åŠ© | åªç”¨äºé¡µé¢æ˜¾ç¤º | æ ¼å¼åŒ–åçš„æ—¥æœŸ |

---

## 8. ğŸ”§ å­—æ®µç±»å‹è½¬æ¢


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦ç±»å‹è½¬æ¢


**é—®é¢˜**ï¼šJavaç±»å‹å’Œæ•°æ®åº“ç±»å‹ä¸åŒ¹é…æ—¶æ€ä¹ˆåŠï¼Ÿ

```
é—®é¢˜ç¤ºä¾‹ï¼š
Java: List<String> tags = ["Java", "MySQL"]
æ•°æ®åº“: VARCHARç±»å‹åªèƒ½å­˜ä¸€ä¸ªå­—ç¬¦ä¸²

è§£å†³ï¼šéœ€è¦æŠŠListè½¬æ¢æˆå­—ç¬¦ä¸²å­˜å‚¨
```

### 8.2 ä½¿ç”¨AttributeConverter


**æ­¥éª¤1ï¼šåˆ›å»ºè½¬æ¢å™¨**

```java
// æŠŠList<String>è½¬æˆé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²
@Converter
public class StringListConverter implements AttributeConverter<List<String>, String> {
    
    // Java â†’ æ•°æ®åº“ï¼šListè½¬String
    @Override
    public String convertToDatabaseColumn(List<String> list) {
        if (list == null || list.isEmpty()) {
            return "";
        }
        return String.join(",", list);  // ["Java","MySQL"] â†’ "Java,MySQL"
    }
    
    // æ•°æ®åº“ â†’ Javaï¼šStringè½¬List
    @Override
    public List<String> convertToEntityAttribute(String joined) {
        if (joined == null || joined.isEmpty()) {
            return new ArrayList<>();
        }
        return Arrays.asList(joined.split(","));  // "Java,MySQL" â†’ ["Java","MySQL"]
    }
}
```

**æ­¥éª¤2ï¼šä½¿ç”¨è½¬æ¢å™¨**

```java
@Entity
public class Article {
    
    @Id
    private Long id;
    
    @Convert(converter = StringListConverter.class)
    private List<String> tags;  // Javaä¸­æ˜¯Listï¼Œæ•°æ®åº“ä¸­æ˜¯VARCHAR
}

// ä½¿ç”¨ç¤ºä¾‹
Article article = new Article();
article.setTags(Arrays.asList("Java", "MySQL", "Hibernate"));
// æ•°æ®åº“å­˜å‚¨ï¼š"Java,MySQL,Hibernate"
```

### 8.3 å®é™…åº”ç”¨æ¡ˆä¾‹


**æ¡ˆä¾‹1ï¼šå­˜å‚¨JSONæ•°æ®**

```java
@Converter
public class JsonConverter implements AttributeConverter<Map<String, Object>, String> {
    
    @Override
    public String convertToDatabaseColumn(Map<String, Object> map) {
        // æŠŠMapè½¬æˆJSONå­—ç¬¦ä¸²
        return new Gson().toJson(map);
    }
    
    @Override
    public Map<String, Object> convertToEntityAttribute(String json) {
        // æŠŠJSONå­—ç¬¦ä¸²è½¬å›Map
        return new Gson().fromJson(json, Map.class);
    }
}

@Entity
public class Config {
    @Convert(converter = JsonConverter.class)
    private Map<String, Object> settings;  // æ•°æ®åº“å­˜JSONå­—ç¬¦ä¸²
}
```

**æ¡ˆä¾‹2ï¼šåŠ å¯†å­˜å‚¨**

```java
@Converter
public class EncryptConverter implements AttributeConverter<String, String> {
    
    @Override
    public String convertToDatabaseColumn(String raw) {
        // åŠ å¯†åå­˜å‚¨
        return encrypt(raw);
    }
    
    @Override
    public String convertToEntityAttribute(String encrypted) {
        // è§£å¯†åè¿”å›
        return decrypt(encrypted);
    }
}

@Entity
public class User {
    @Convert(converter = EncryptConverter.class)
    private String phone;  // æ•°æ®åº“å­˜åŠ å¯†åçš„æ‰‹æœºå·
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å­—æ®µæ˜ å°„æœ¬è´¨ï¼šJavaç±»å‹å’Œæ•°æ®åº“ç±»å‹çš„å¯¹åº”å…³ç³»
ğŸ”¸ @Columnä½œç”¨ï¼šå®šä¹‰æ•°æ®åº“åˆ—çš„è¯¦ç»†å±æ€§ï¼ˆåç§°ã€é•¿åº¦ã€çº¦æŸç­‰ï¼‰
ğŸ”¸ @Temporalä½œç”¨ï¼šæŒ‡å®šDateç±»å‹å¦‚ä½•å­˜å‚¨ï¼ˆDATE/TIME/TIMESTAMPï¼‰
ğŸ”¸ @Lobä½œç”¨ï¼šå­˜å‚¨å¤§æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®
ğŸ”¸ @Enumeratedä½œç”¨ï¼šæšä¸¾ç±»å‹çš„å­˜å‚¨æ–¹å¼
ğŸ”¸ @Transientä½œç”¨ï¼šæ ‡è®°ä¸éœ€è¦æŒä¹…åŒ–çš„å­—æ®µ
ğŸ”¸ AttributeConverterä½œç”¨ï¼šè‡ªå®šä¹‰ç±»å‹è½¬æ¢é€»è¾‘
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç±»å‹é€‰æ‹©åŸåˆ™**

```
åŸºæœ¬ç±»å‹ vs åŒ…è£…ç±»å‹ï¼š
- å¿…å¡«å­—æ®µç”¨åŸºæœ¬ç±»å‹ï¼ˆintã€longã€booleanï¼‰
- å¯é€‰å­—æ®µç”¨åŒ…è£…ç±»å‹ï¼ˆIntegerã€Longã€Booleanï¼‰

æ—¶é—´ç±»å‹é€‰æ‹©ï¼š
- LocalDateï¼šåªéœ€è¦æ—¥æœŸ
- LocalTimeï¼šåªéœ€è¦æ—¶é—´
- LocalDateTimeï¼šéœ€è¦å®Œæ•´æ—¶é—´

æšä¸¾å­˜å‚¨æ–¹å¼ï¼š
- æ¨èSTRINGï¼šå¯è¯»æ€§å¥½ï¼Œå®‰å…¨
- æ…ç”¨ORDINALï¼šèŠ‚çœç©ºé—´ï¼Œä½†æœ‰é£é™©
```

**ğŸ”¹ å¸¸ç”¨æ³¨è§£å¯¹æ¯”**

| æ³¨è§£ | ç”¨é€” | å…¸å‹åœºæ™¯ |
|-----|------|---------|
| `@Column` | å®šä¹‰åˆ—å±æ€§ | è®¾ç½®é•¿åº¦ã€éç©ºã€å”¯ä¸€ |
| `@Temporal` | æ—¶é—´ç±»å‹ | Dateç±»å‹çš„å­˜å‚¨æ ¼å¼ |
| `@Lob` | å¤§å¯¹è±¡ | é•¿æ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶ |
| `@Enumerated` | æšä¸¾ç±»å‹ | çŠ¶æ€ã€ç±»å‹ç­‰å›ºå®šé€‰é¡¹ |
| `@Transient` | ä¸´æ—¶å­—æ®µ | è®¡ç®—å­—æ®µã€è¾…åŠ©å­—æ®µ |
| `@Convert` | ç±»å‹è½¬æ¢ | è‡ªå®šä¹‰å­˜å‚¨æ ¼å¼ |

### 9.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ’¡ æœ€ä½³å®è·µ**

```java
@Entity
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // âœ… æ¨èï¼šæ˜ç¡®æŒ‡å®šåˆ—å±æ€§
    @Column(length = 50, nullable = false, unique = true)
    private String username;
    
    // âœ… æ¨èï¼šç”¨åŒ…è£…ç±»å‹è¡¨ç¤ºå¯é€‰å­—æ®µ
    @Column(length = 11)
    private String phone;
    
    // âœ… æ¨èï¼šç”¨LocalDateTimeä»£æ›¿Date
    private LocalDateTime createTime;
    
    // âœ… æ¨èï¼šæšä¸¾ç”¨STRINGå­˜å‚¨
    @Enumerated(EnumType.STRING)
    private UserStatus status;
    
    // âœ… æ¨èï¼šä¸´æ—¶å­—æ®µæ ‡è®°æ¸…æ¥š
    @Transient
    private String confirmPassword;
}
```

**âš ï¸ å¸¸è§é”™è¯¯**

```java
// âŒ é”™è¯¯1ï¼šå¿˜è®°è®¾ç½®é•¿åº¦
@Column
private String description;  // é»˜è®¤255å¯èƒ½ä¸å¤Ÿ

// âœ… æ­£ç¡®åšæ³•
@Column(length = 500)
private String description;

// âŒ é”™è¯¯2ï¼šæšä¸¾ç”¨ORDINAL
@Enumerated(EnumType.ORDINAL)
private Status status;  // é¡ºåºæ”¹å˜ä¼šå‡ºé”™

// âœ… æ­£ç¡®åšæ³•
@Enumerated(EnumType.STRING)
private Status status;

// âŒ é”™è¯¯3ï¼šå¤§å¯¹è±¡ä¸æ ‡è®°@Lob
private String longText;  // å¯èƒ½è¢«æˆªæ–­

// âœ… æ­£ç¡®åšæ³•
@Lob
private String longText;
```

### 9.4 å­¦ä¹ å»ºè®®


**å­¦ä¹ è·¯å¾„**ï¼š
1. å…ˆæŒæ¡åŸºæœ¬ç±»å‹æ˜ å°„ï¼ˆStringã€intã€Dateç­‰ï¼‰
2. ç†è§£@Columnçš„å¸¸ç”¨å±æ€§ï¼ˆnameã€lengthã€nullableï¼‰
3. å­¦ä¼šå¤„ç†ç‰¹æ®Šç±»å‹ï¼ˆæ—¶é—´ã€æšä¸¾ã€å¤§å¯¹è±¡ï¼‰
4. æŒæ¡@Transientçš„ä½¿ç”¨åœºæ™¯
5. æœ€åå­¦ä¹ è‡ªå®šä¹‰ç±»å‹è½¬æ¢

**è®°å¿†æŠ€å·§**ï¼š
- @Column â†’ æ§åˆ¶åˆ—å±æ€§
- @Temporal â†’ æ—¶é—´ç²¾åº¦
- @Lob â†’ å¤§å¯¹è±¡
- @Enumerated â†’ æšä¸¾å­˜å‚¨
- @Transient â†’ ä¸å­˜æ•°æ®åº“
- @Convert â†’ è‡ªå®šä¹‰è½¬æ¢