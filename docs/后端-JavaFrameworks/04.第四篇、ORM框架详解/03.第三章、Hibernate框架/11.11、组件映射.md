---
title: 11ã€ç»„ä»¶æ˜ å°„
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ç»„ä»¶å’Œå€¼å¯¹è±¡](#1-ä»€ä¹ˆæ˜¯ç»„ä»¶å’Œå€¼å¯¹è±¡)
2. [@Embeddableå€¼å¯¹è±¡è¯¦è§£](#2-Embeddableå€¼å¯¹è±¡è¯¦è§£)
3. [@EmbeddedåµŒå…¥å¼ç»„ä»¶](#3-EmbeddedåµŒå…¥å¼ç»„ä»¶)
4. [å¤åˆå±æ€§æ˜ å°„](#4-å¤åˆå±æ€§æ˜ å°„)
5. [ç»„ä»¶é‡å†™æœºåˆ¶](#5-ç»„ä»¶é‡å†™æœºåˆ¶)
6. [å®é™…åº”ç”¨åœºæ™¯](#6-å®é™…åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯ç»„ä»¶å’Œå€¼å¯¹è±¡


### 1.1 é€šä¿—ç†è§£


**ç°å®åœºæ™¯ç±»æ¯”**ï¼š
```
æƒ³è±¡ä½ åœ¨å¡«å†™ä¸ªäººä¿¡æ¯è¡¨ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å§“åï¼šå¼ ä¸‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åœ°å€ä¿¡æ¯ï¼š            â”‚   â”‚
â”‚  â”‚  - çœä»½ï¼šå¹¿ä¸œçœ       â”‚   â”‚
â”‚  â”‚  - åŸå¸‚ï¼šæ·±åœ³å¸‚       â”‚   â”‚
â”‚  â”‚  - è¡—é“ï¼šå—å±±åŒºXXè·¯   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœ°å€ä¿¡æ¯è¿™ä¸€å—æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå®ƒä¸æ˜¯å•ç‹¬çš„å®ä½“
è€Œæ˜¯"ä¾é™„"åœ¨ç”¨æˆ·ä¿¡æ¯ä¸­çš„"ä¸€ç»„å±æ€§"
```

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- ğŸ”¸ **å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰**ï¼šå°±åƒåœ°å€ä¿¡æ¯ï¼Œå®ƒæœ¬èº«æ²¡æœ‰ç‹¬ç«‹çš„IDï¼Œä¸èƒ½å•ç‹¬å­˜åœ¨
- ğŸ”¸ **ç»„ä»¶ï¼ˆComponentï¼‰**ï¼šæŠŠç›¸å…³çš„å±æ€§"æ‰“åŒ…"åœ¨ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“ä½¿ç”¨
- ğŸ”¸ **åµŒå…¥å¼ï¼ˆEmbeddedï¼‰**ï¼šæŠŠè¿™ä¸ª"å±æ€§åŒ…"åµŒå…¥åˆ°ä¸»å®ä½“ä¸­

### 1.2 ä¸æ™®é€šå®ä½“çš„åŒºåˆ«


| ç‰¹æ€§ | **å®ä½“ï¼ˆEntityï¼‰** | **å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰** |
|------|-------------------|---------------------------|
| **ç‹¬ç«‹æ€§** | æœ‰ç‹¬ç«‹çš„IDï¼Œå¯å•ç‹¬å­˜åœ¨ | æ²¡æœ‰IDï¼Œä¾é™„äºå®ä½“ |
| **è¡¨ç»“æ„** | ç‹¬ç«‹çš„æ•°æ®è¡¨ | åµŒå…¥åˆ°å®ä½“è¡¨ä¸­ |
| **ç”Ÿå‘½å‘¨æœŸ** | ç‹¬ç«‹ç®¡ç† | è·Ÿéšå®ä½“ç”Ÿå‘½å‘¨æœŸ |
| **ç›¸ç­‰åˆ¤æ–­** | é€šè¿‡IDåˆ¤æ–­ | é€šè¿‡å±æ€§å€¼åˆ¤æ–­ |

**ç®€å•ä¾‹å­**ï¼š
```
ç”¨æˆ·ï¼ˆEntityï¼‰        åœ°å€ï¼ˆValue Objectï¼‰
- æœ‰ç”¨æˆ·ID            - æ²¡æœ‰åœ°å€ID
- å¯ä»¥å•ç‹¬æŸ¥è¯¢         - ä¸èƒ½å•ç‹¬æŸ¥è¯¢
- æœ‰ç‹¬ç«‹çš„Userè¡¨       - å­—æ®µåœ¨Userè¡¨ä¸­
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦ç»„ä»¶æ˜ å°„


**é—®é¢˜åœºæ™¯**ï¼š
```java
// âŒ ä¸ä½¿ç”¨ç»„ä»¶ï¼šå±æ€§æ•£ä¹±ï¼Œéš¾ä»¥ç®¡ç†
public class User {
    private Long id;
    private String name;
    private String province;    // åœ°å€ç›¸å…³
    private String city;        // åœ°å€ç›¸å…³
    private String street;      // åœ°å€ç›¸å…³
    private String zipCode;     // åœ°å€ç›¸å…³
}

// âœ… ä½¿ç”¨ç»„ä»¶ï¼šç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
public class User {
    private Long id;
    private String name;
    private Address address;    // åœ°å€ç»„ä»¶
}
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- ğŸ“Œ **ä»£ç å¤ç”¨**ï¼šå¤šä¸ªå®ä½“å¯ä»¥å…±ç”¨åŒä¸€ä¸ªåœ°å€ç»„ä»¶
- ğŸ“Œ **ç»“æ„æ¸…æ™°**ï¼šç›¸å…³å±æ€§èšåˆåœ¨ä¸€èµ·ï¼Œé€»è¾‘æ›´æ¸…æ™°
- ğŸ“Œ **ä¾¿äºç»´æŠ¤**ï¼šä¿®æ”¹åœ°å€ç»“æ„åªéœ€æ”¹ä¸€ä¸ªç±»
- ğŸ“Œ **ä¸šåŠ¡å«ä¹‰**ï¼šä»£ç ç»“æ„æ›´è´´è¿‘çœŸå®ä¸šåŠ¡æ¨¡å‹

---

## 2. ğŸ“¦ @Embeddableå€¼å¯¹è±¡è¯¦è§£


### 2.1 @EmbeddableåŸºæœ¬ç”¨æ³•


**å®šä¹‰ä¸€ä¸ªå€¼å¯¹è±¡**ï¼š
```java
@Embeddable  // æ ‡è®°è¿™æ˜¯ä¸€ä¸ªå¯åµŒå…¥çš„ç»„ä»¶
public class Address {
    private String province;
    private String city;
    private String street;
    private String zipCode;
    
    // æ„é€ å™¨ã€getter/setter
    public Address() {}
    
    public Address(String province, String city, String street) {
        this.province = province;
        this.city = city;
        this.street = street;
    }
}
```

**å…³é”®ç†è§£**ï¼š
- ğŸ”¸ `@Embeddable` å‘Šè¯‰Hibernateï¼šè¿™ä¸ªç±»æ˜¯ç”¨æ¥"åµŒå…¥"åˆ°å…¶ä»–å®ä½“çš„
- ğŸ”¸ å®ƒè‡ªå·±ä¸æ˜¯å®ä½“ï¼Œæ²¡æœ‰ `@Entity` æ³¨è§£
- ğŸ”¸ ä¸éœ€è¦IDå±æ€§ï¼Œå› ä¸ºå®ƒä¸ä¼šæœ‰ç‹¬ç«‹çš„è¡¨

### 2.2 å€¼å¯¹è±¡çš„ç‰¹æ€§


**ğŸ’¡ é‡è¦ç‰¹æ€§**ï¼š

**1. å€¼è¯­ä¹‰**ï¼š
```java
Address addr1 = new Address("å¹¿ä¸œ", "æ·±åœ³", "å—å±±åŒº");
Address addr2 = new Address("å¹¿ä¸œ", "æ·±åœ³", "å—å±±åŒº");

// ä¸¤ä¸ªåœ°å€å¯¹è±¡è™½ç„¶æ˜¯ä¸åŒçš„å¯¹è±¡
// ä½†å› ä¸ºå±æ€§å€¼ç›¸åŒï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬æ˜¯"ç›¸ç­‰"çš„
addr1.equals(addr2);  // åº”è¯¥è¿”å›true
```

**2. ä¸å¯å˜æ€§**ï¼ˆæ¨èåšæ³•ï¼‰ï¼š
```java
@Embeddable
public class Address {
    private final String province;
    private final String city;
    
    public Address(String province, String city) {
        this.province = province;
        this.city = city;
    }
    
    // åªæœ‰getterï¼Œæ²¡æœ‰setter
    public String getProvince() { return province; }
    public String getCity() { return city; }
}
```

**3. æ— ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ**ï¼š
```java
// âŒ ä¸èƒ½è¿™æ ·åš
Address addr = new Address("å¹¿ä¸œ", "æ·±åœ³", "å—å±±åŒº");
entityManager.persist(addr);  // é”™è¯¯ï¼å€¼å¯¹è±¡ä¸èƒ½å•ç‹¬ä¿å­˜

// âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡å®ä½“ä¿å­˜
User user = new User();
user.setAddress(addr);
entityManager.persist(user);  // ä¿å­˜ç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨ä¿å­˜åœ°å€
```

### 2.3 æ•°æ®åº“æ˜ å°„ç»“æœ


**å®ä½“å®šä¹‰**ï¼š
```java
@Entity
public class User {
    @Id
    private Long id;
    private String name;
    
    @Embedded
    private Address address;
}
```

**ç”Ÿæˆçš„è¡¨ç»“æ„**ï¼š
```sql
CREATE TABLE user (
    id BIGINT PRIMARY KEY,
    name VARCHAR(255),
    province VARCHAR(255),  -- æ¥è‡ªAddress
    city VARCHAR(255),      -- æ¥è‡ªAddress
    street VARCHAR(255),    -- æ¥è‡ªAddress
    zip_code VARCHAR(255)   -- æ¥è‡ªAddress
);
```

**å…³é”®ç‚¹**ï¼š
- ğŸ¯ ä¸ä¼šç”Ÿæˆå•ç‹¬çš„Addressè¡¨
- ğŸ¯ Addressçš„æ‰€æœ‰å­—æ®µéƒ½"å¹³é“º"åœ¨Userè¡¨ä¸­
- ğŸ¯ å­—æ®µåé»˜è®¤å°±æ˜¯Addressç±»ä¸­çš„å±æ€§å

---

## 3. ğŸ”— @EmbeddedåµŒå…¥å¼ç»„ä»¶


### 3.1 åŸºæœ¬ä½¿ç”¨


**åœ¨å®ä½“ä¸­åµŒå…¥ç»„ä»¶**ï¼š
```java
@Entity
public class Employee {
    @Id
    private Long id;
    private String name;
    
    @Embedded  // åµŒå…¥åœ°å€ç»„ä»¶
    private Address homeAddress;
    
    @Embedded  // å¯ä»¥åµŒå…¥å¤šä¸ªç›¸åŒç±»å‹çš„ç»„ä»¶
    private Address workAddress;
}
```

**ğŸ’­ æ€è€ƒé—®é¢˜**ï¼š
```
ä¸¤ä¸ªAddresså­—æ®µéƒ½ä¼šæ˜ å°„åˆ°è¡¨ä¸­
ä½†å®ƒä»¬çš„åˆ—åä¼šå†²çªæ€ä¹ˆåŠï¼Ÿ

userè¡¨ï¼š
- home_addressçš„province  ï¼Ÿ
- work_addressçš„province  ï¼Ÿ
```

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `@AttributeOverrides` é‡å†™åˆ—åï¼ˆä¸‹æ–‡è¯¦è§£ï¼‰

### 3.2 @Embeddedçš„ç‰¹ç‚¹


**1. å¯é€‰æ€§æ§åˆ¶**ï¼š
```java
@Entity
public class User {
    @Id
    private Long id;
    
    @Embedded
    private Address address;  // addresså¯ä»¥ä¸ºnull
}

// å¦‚æœaddressä¸ºnullï¼Œå¯¹åº”çš„åˆ—å€¼ä¹Ÿæ˜¯NULL
User user = new User();
user.setAddress(null);
entityManager.persist(user);

// æ•°æ®åº“ï¼šprovince=NULL, city=NULL, street=NULL
```

**2. ç»„ä»¶å…±äº«**ï¼š
```java
// å¯ä»¥åœ¨å¤šä¸ªå®ä½“ä¸­ä½¿ç”¨åŒä¸€ä¸ªç»„ä»¶ç±»
@Entity
public class Company {
    @Id
    private Long id;
    
    @Embedded
    private Address address;  // å¤ç”¨Addressç»„ä»¶
}

@Entity
public class Store {
    @Id
    private Long id;
    
    @Embedded
    private Address address;  // åŒæ ·å¤ç”¨Addressç»„ä»¶
}
```

### 3.3 åµŒå¥—ç»„ä»¶


**ç»„ä»¶é‡Œè¿˜å¯ä»¥åµŒå¥—ç»„ä»¶**ï¼š
```java
@Embeddable
public class Address {
    private String street;
    
    @Embedded
    private GeoLocation location;  // åµŒå¥—åœ°ç†ä½ç½®ç»„ä»¶
}

@Embeddable
public class GeoLocation {
    private Double latitude;   // çº¬åº¦
    private Double longitude;  // ç»åº¦
}

@Entity
public class Store {
    @Id
    private Long id;
    
    @Embedded
    private Address address;  // addressé‡ŒåŒ…å«location
}
```

**ç”Ÿæˆçš„è¡¨ç»“æ„**ï¼š
```sql
CREATE TABLE store (
    id BIGINT PRIMARY KEY,
    street VARCHAR(255),      -- æ¥è‡ªAddress
    latitude DOUBLE,          -- æ¥è‡ªGeoLocation
    longitude DOUBLE          -- æ¥è‡ªGeoLocation
);
```

---

## 4. ğŸ”§ å¤åˆå±æ€§æ˜ å°„


### 4.1 ä»€ä¹ˆæ˜¯å¤åˆå±æ€§


**é€šä¿—ç†è§£**ï¼š
```
å¤åˆå±æ€§ = æŠŠå¤šä¸ªç›¸å…³çš„å­—æ®µç»„åˆæˆä¸€ä¸ªé€»è¾‘å•å…ƒ

ä¾‹å¦‚ï¼š
- å§“å = å§“ + å
- é‡‘é¢ = æ•°å€¼ + è´§å¸å•ä½
- æ—¥æœŸèŒƒå›´ = å¼€å§‹æ—¥æœŸ + ç»“æŸæ—¥æœŸ
```

### 4.2 å¤åˆä¸»é”®


**ä½¿ç”¨åœºæ™¯**ï¼š
```
è®¢å•æ˜ç»†è¡¨é€šå¸¸ç”¨"è®¢å•ID + å•†å“ID"ä½œä¸ºè”åˆä¸»é”®

è®¢å•æ˜ç»†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¢å•ID    â”‚ å•†å“ID    â”‚ æ•°é‡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1001     â”‚ 5001     â”‚ 2      â”‚
â”‚ 1001     â”‚ 5002     â”‚ 1      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

(1001, 5001) æ˜¯ä¸€ä¸ªå¤åˆä¸»é”®
```

**ä»£ç å®ç°**ï¼š
```java
// æ­¥éª¤1ï¼šå®šä¹‰å¤åˆä¸»é”®ç±»
@Embeddable
public class OrderItemId implements Serializable {
    private Long orderId;
    private Long productId;
    
    // å¿…é¡»é‡å†™equals()å’ŒhashCode()
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        OrderItemId that = (OrderItemId) o;
        return Objects.equals(orderId, that.orderId) &&
               Objects.equals(productId, that.productId);
    }
    
    @Override
    public int hashCode() {
        return Objects.hash(orderId, productId);
    }
}

// æ­¥éª¤2ï¼šåœ¨å®ä½“ä¸­ä½¿ç”¨
@Entity
public class OrderItem {
    @EmbeddedId  // ä½¿ç”¨åµŒå…¥å¼å¤åˆä¸»é”®
    private OrderItemId id;
    
    private Integer quantity;
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
// åˆ›å»ºè®¢å•æ˜ç»†
OrderItemId id = new OrderItemId(1001L, 5001L);
OrderItem item = new OrderItem();
item.setId(id);
item.setQuantity(2);
entityManager.persist(item);

// æŸ¥è¯¢è®¢å•æ˜ç»†
OrderItemId searchId = new OrderItemId(1001L, 5001L);
OrderItem found = entityManager.find(OrderItem.class, searchId);
```

### 4.3 å¤åˆå€¼å¯¹è±¡


**é‡‘é¢ç»„ä»¶ç¤ºä¾‹**ï¼š
```java
@Embeddable
public class Money {
    private BigDecimal amount;     // é‡‘é¢æ•°å€¼
    private String currency;       // è´§å¸å•ä½
    
    public Money(BigDecimal amount, String currency) {
        this.amount = amount;
        this.currency = currency;
    }
    
    // ä¸šåŠ¡æ–¹æ³•
    public Money add(Money other) {
        if (!this.currency.equals(other.currency)) {
            throw new IllegalArgumentException("è´§å¸å•ä½ä¸åŒï¼Œä¸èƒ½ç›¸åŠ ");
        }
        return new Money(
            this.amount.add(other.amount), 
            this.currency
        );
    }
}

@Entity
public class Product {
    @Id
    private Long id;
    
    @Embedded
    private Money price;  // ä»·æ ¼åŒ…å«é‡‘é¢å’Œè´§å¸
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
// åˆ›å»ºå•†å“
Product product = new Product();
product.setPrice(new Money(new BigDecimal("99.99"), "CNY"));
entityManager.persist(product);

// æ•°æ®åº“å­˜å‚¨ï¼š
// amount = 99.99, currency = 'CNY'
```

---

## 5. ğŸ¨ ç»„ä»¶é‡å†™æœºåˆ¶


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦é‡å†™


**é—®é¢˜åœºæ™¯**ï¼š
```java
@Entity
public class Person {
    @Id
    private Long id;
    
    @Embedded
    private Address homeAddress;
    
    @Embedded
    private Address workAddress;
}
```

**ä¼šå¯¼è‡´åˆ—åå†²çª**ï¼š
```sql
CREATE TABLE person (
    id BIGINT,
    province VARCHAR(255),  -- homeAddressçš„ï¼Ÿè¿˜æ˜¯workAddressçš„ï¼Ÿ
    city VARCHAR(255),      -- å†²çªï¼
    street VARCHAR(255)     -- å†²çªï¼
);
```

### 5.2 @AttributeOverridesé‡å†™


**å•ä¸ªå±æ€§é‡å†™**ï¼š
```java
@Entity
public class Person {
    @Id
    private Long id;
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", column = @Column(name = "home_province")),
        @AttributeOverride(name = "city", column = @Column(name = "home_city")),
        @AttributeOverride(name = "street", column = @Column(name = "home_street"))
    })
    private Address homeAddress;
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", column = @Column(name = "work_province")),
        @AttributeOverride(name = "city", column = @Column(name = "work_city")),
        @AttributeOverride(name = "street", column = @Column(name = "work_street"))
    })
    private Address workAddress;
}
```

**ç”Ÿæˆçš„è¡¨ç»“æ„**ï¼š
```sql
CREATE TABLE person (
    id BIGINT PRIMARY KEY,
    home_province VARCHAR(255),
    home_city VARCHAR(255),
    home_street VARCHAR(255),
    work_province VARCHAR(255),
    work_city VARCHAR(255),
    work_street VARCHAR(255)
);
```

### 5.3 æ›´ç®€æ´çš„å†™æ³•


**ä½¿ç”¨å‰ç¼€çº¦å®š**ï¼š
```java
@Entity
public class Person {
    @Id
    private Long id;
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", 
            column = @Column(name = "home_province")),
        @AttributeOverride(name = "city", 
            column = @Column(name = "home_city"))
    })
    private Address homeAddress;
}
```

**ğŸ’¡ å®ç”¨æŠ€å·§**ï¼š
```java
// å¯ä»¥åªé‡å†™éƒ¨åˆ†å±æ€§
@AttributeOverrides({
    @AttributeOverride(name = "city", 
        column = @Column(name = "home_city", nullable = false))
})
private Address homeAddress;

// å…¶ä»–å±æ€§ä½¿ç”¨é»˜è®¤åˆ—å
```

### 5.4 åµŒå¥—ç»„ä»¶é‡å†™


**å¤æ‚åœºæ™¯**ï¼š
```java
@Embeddable
public class Address {
    private String street;
    
    @Embedded
    private GeoLocation location;
}

@Entity
public class Store {
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "street", 
            column = @Column(name = "store_street")),
        @AttributeOverride(name = "location.latitude", 
            column = @Column(name = "store_lat")),
        @AttributeOverride(name = "location.longitude", 
            column = @Column(name = "store_lng"))
    })
    private Address address;
}
```

**å…³é”®ç‚¹**ï¼š
- ğŸ¯ åµŒå¥—å±æ€§ç”¨"."åˆ†éš”ï¼š`location.latitude`
- ğŸ¯ å¯ä»¥é‡å†™ä»»æ„æ·±åº¦çš„åµŒå¥—å±æ€§

---

## 6. ğŸš€ å®é™…åº”ç”¨åœºæ™¯


### 6.1 ç”¨æˆ·åœ°å€ç®¡ç†


**ä¸šåŠ¡åœºæ™¯**ï¼š
```
ç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªåœ°å€ï¼ˆæ”¶è´§åœ°å€ã€è´¦å•åœ°å€ç­‰ï¼‰
æ¯ä¸ªåœ°å€åŒ…å«ï¼šçœã€å¸‚ã€åŒºã€è¯¦ç»†åœ°å€ã€é‚®ç¼–ç­‰
```

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
@Embeddable
public class Address {
    private String province;
    private String city;
    private String district;
    private String detail;
    private String zipCode;
    private String contactPhone;
}

@Entity
public class User {
    @Id
    private Long id;
    private String name;
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", 
            column = @Column(name = "shipping_province")),
        @AttributeOverride(name = "city", 
            column = @Column(name = "shipping_city"))
        // ... å…¶ä»–é‡å†™
    })
    private Address shippingAddress;  // æ”¶è´§åœ°å€
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", 
            column = @Column(name = "billing_province"))
        // ... å…¶ä»–é‡å†™
    })
    private Address billingAddress;  // è´¦å•åœ°å€
}
```

### 6.2 è®¢å•é‡‘é¢è®¡ç®—


**ä¸šåŠ¡åœºæ™¯**ï¼š
```
è®¢å•åŒ…å«ï¼šå•†å“é‡‘é¢ã€è¿è´¹ã€æŠ˜æ‰£ã€ç¨è´¹ç­‰
æ¯ä¸ªé‡‘é¢éƒ½æœ‰è´§å¸å•ä½
```

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
@Embeddable
public class Money {
    private BigDecimal amount;
    private String currency;
    
    public Money add(Money other) {
        // ä¸šåŠ¡é€»è¾‘
    }
}

@Entity
public class Order {
    @Id
    private Long id;
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "amount", 
            column = @Column(name = "product_amount")),
        @AttributeOverride(name = "currency", 
            column = @Column(name = "product_currency"))
    })
    private Money productTotal;  // å•†å“æ€»é¢
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "amount", 
            column = @Column(name = "shipping_amount"))
    })
    private Money shippingFee;  // è¿è´¹
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "amount", 
            column = @Column(name = "final_amount"))
    })
    private Money finalTotal;  // æœ€ç»ˆé‡‘é¢
}
```

### 6.3 å®¡è®¡ä¿¡æ¯


**ä¸šåŠ¡åœºæ™¯**ï¼š
```
å¾ˆå¤šå®ä½“éƒ½éœ€è¦è®°å½•ï¼šåˆ›å»ºäººã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹äººã€ä¿®æ”¹æ—¶é—´
```

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
@Embeddable
public class AuditInfo {
    private String createdBy;
    private LocalDateTime createdAt;
    private String updatedBy;
    private LocalDateTime updatedAt;
}

@Entity
public class Product {
    @Id
    private Long id;
    private String name;
    
    @Embedded
    private AuditInfo auditInfo;  // å®¡è®¡ä¿¡æ¯
}

@Entity
public class Order {
    @Id
    private Long id;
    
    @Embedded
    private AuditInfo auditInfo;  // å¤ç”¨å®¡è®¡ä¿¡æ¯
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… ä»£ç å¤ç”¨ï¼Œå¤šä¸ªå®ä½“å…±ç”¨å®¡è®¡é€»è¾‘
- âœ… ç»Ÿä¸€ç®¡ç†ï¼Œä¿®æ”¹å®¡è®¡å­—æ®µåªéœ€æ”¹ä¸€å¤„
- âœ… ç»“æ„æ¸…æ™°ï¼Œå®¡è®¡ç›¸å…³å­—æ®µèšåˆåœ¨ä¸€èµ·

### 6.4 åœ°ç†ä½ç½®ä¿¡æ¯


**ä¸šåŠ¡åœºæ™¯**ï¼š
```
é—¨åº—ã€ç”¨æˆ·ã€è®¢å•å¯èƒ½éƒ½éœ€è¦è®°å½•åœ°ç†ä½ç½®
åŒ…æ‹¬ï¼šç»çº¬åº¦ã€åœ°å€æè¿°ç­‰
```

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
@Embeddable
public class Location {
    private Double latitude;
    private Double longitude;
    private String description;
    
    // è®¡ç®—ä¸¤ç‚¹è·ç¦»çš„ä¸šåŠ¡æ–¹æ³•
    public double distanceTo(Location other) {
        // ä½¿ç”¨ç»çº¬åº¦è®¡ç®—è·ç¦»
    }
}

@Entity
public class Store {
    @Id
    private Long id;
    
    @Embedded
    private Location location;
}

@Entity  
public class DeliveryOrder {
    @Id
    private Long id;
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "latitude", 
            column = @Column(name = "pickup_lat")),
        @AttributeOverride(name = "longitude", 
            column = @Column(name = "pickup_lng"))
    })
    private Location pickupLocation;  // å–è´§ä½ç½®
    
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "latitude", 
            column = @Column(name = "delivery_lat"))
    })
    private Location deliveryLocation;  // é…é€ä½ç½®
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ¦‚å¿µ


```
ğŸ”¸ å€¼å¯¹è±¡ï¼šæ²¡æœ‰ç‹¬ç«‹IDï¼Œä¾é™„äºå®ä½“çš„ä¸€ç»„å±æ€§
ğŸ”¸ @Embeddableï¼šæ ‡è®°ä¸€ä¸ªç±»å¯ä»¥è¢«åµŒå…¥åˆ°å®ä½“ä¸­
ğŸ”¸ @Embeddedï¼šåœ¨å®ä½“ä¸­åµŒå…¥å€¼å¯¹è±¡
ğŸ”¸ ç»„ä»¶é‡å†™ï¼šç”¨@AttributeOverridesè§£å†³åˆ—åå†²çª
ğŸ”¸ å¤åˆå±æ€§ï¼šæŠŠç›¸å…³å­—æ®µç»„åˆæˆé€»è¾‘å•å…ƒ
```

### 7.2 å€¼å¯¹è±¡ vs å®ä½“å¯¹æ¯”


| å¯¹æ¯”é¡¹ | **å€¼å¯¹è±¡** | **å®ä½“** |
|--------|-----------|---------|
| **æ ‡è¯†** | æ— IDï¼Œé€šè¿‡å±æ€§å€¼åˆ¤æ–­ç›¸ç­‰ | æœ‰IDï¼Œé€šè¿‡IDåˆ¤æ–­ç›¸ç­‰ |
| **è¡¨ç»“æ„** | å­—æ®µåµŒå…¥åˆ°å®ä½“è¡¨ä¸­ | æœ‰ç‹¬ç«‹çš„æ•°æ®è¡¨ |
| **ç”Ÿå‘½å‘¨æœŸ** | ä¾é™„å®ä½“ï¼Œä¸èƒ½å•ç‹¬æ“ä½œ | ç‹¬ç«‹å­˜åœ¨ï¼Œå¯å•ç‹¬æ“ä½œ |
| **å¯å˜æ€§** | æ¨èä¸å¯å˜ | å¯ä»¥ä¿®æ”¹ |
| **ä½¿ç”¨åœºæ™¯** | åœ°å€ã€é‡‘é¢ã€æ—¥æœŸèŒƒå›´ç­‰ | ç”¨æˆ·ã€è®¢å•ã€å•†å“ç­‰ |

### 7.3 ä½¿ç”¨å»ºè®®


**âœ… é€‚åˆç”¨å€¼å¯¹è±¡çš„åœºæ™¯**ï¼š
- ğŸ“Œ å±æ€§é€»è¾‘ä¸Šæ˜¯ä¸€ä¸ªæ•´ä½“ï¼ˆå¦‚åœ°å€ã€é‡‘é¢ï¼‰
- ğŸ“Œ éœ€è¦åœ¨å¤šä¸ªå®ä½“é—´å¤ç”¨
- ğŸ“Œ ç›¸ç­‰åˆ¤æ–­åŸºäºå±æ€§å€¼è€ŒéID
- ğŸ“Œ ä¸éœ€è¦å•ç‹¬æŸ¥è¯¢æˆ–ä¿®æ”¹

**âŒ ä¸é€‚åˆç”¨å€¼å¯¹è±¡çš„åœºæ™¯**ï¼š
- ğŸ“Œ éœ€è¦ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ğŸ“Œ éœ€è¦å•ç‹¬æŸ¥è¯¢æˆ–å¼•ç”¨
- ğŸ“Œ æœ‰å¤æ‚çš„å…³è”å…³ç³»
- ğŸ“Œ æ•°æ®é‡å¤§ï¼Œéœ€è¦ç‹¬ç«‹è¡¨ä¼˜åŒ–æŸ¥è¯¢

### 7.4 å®æˆ˜æŠ€å·§


**ğŸ’¡ æœ€ä½³å®è·µ**ï¼š

1ï¸âƒ£ **å€¼å¯¹è±¡ä¿æŒç®€å•**ï¼š
```java
// âœ… å¥½çš„åšæ³•ï¼šç®€å•æ¸…æ™°
@Embeddable
public class Address {
    private String province;
    private String city;
    private String street;
}

// âŒ é¿å…è¿‡äºå¤æ‚
@Embeddable
public class ComplexAddress {
    private String province;
    // ... 20ä¸ªå­—æ®µ
    @Embedded
    private GeoLocation location;
    @Embedded
    private ContactInfo contact;
    // åµŒå¥—å¤ªæ·±ï¼Œéš¾ä»¥ç»´æŠ¤
}
```

2ï¸âƒ£ **åˆç†ä½¿ç”¨é‡å†™**ï¼š
```java
// å½“æœ‰å¤šä¸ªç›¸åŒç±»å‹ç»„ä»¶æ—¶ï¼Œå¿…é¡»é‡å†™
@Embedded
@AttributeOverrides({
    @AttributeOverride(name = "province", 
        column = @Column(name = "home_province"))
})
private Address homeAddress;
```

3ï¸âƒ£ **å¤ç”¨å¸¸ç”¨ç»„ä»¶**ï¼š
```java
// åˆ›å»ºé€šç”¨ç»„ä»¶åº“
@Embeddable
public class AuditInfo { ... }

@Embeddable  
public class Address { ... }

@Embeddable
public class Money { ... }

// åœ¨å¤šä¸ªå®ä½“ä¸­å¤ç”¨
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å€¼å¯¹è±¡å°±åƒ"å±æ€§åŒ…"ï¼ŒæŠŠç›¸å…³å­—æ®µæ‰“åŒ…ä½¿ç”¨
- @Embeddable å®šä¹‰å¯åµŒå…¥çš„ç»„ä»¶
- @Embedded æŠŠç»„ä»¶åµŒå…¥åˆ°å®ä½“ä¸­
- å¤šä¸ªç›¸åŒç»„ä»¶è¦ç”¨ @AttributeOverrides é‡å†™åˆ—å
- é€‚åˆå¤ç”¨çš„ã€é€»è¾‘æ•´ä½“çš„å±æ€§ç»„åˆ