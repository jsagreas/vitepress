---
title: 8ã€å­—æ®µæ˜ å°„é…ç½®
---
## ğŸ“š ç›®å½•

1. [å­—æ®µæ˜ å°„åŸºç¡€æ¦‚å¿µ](#1-å­—æ®µæ˜ å°„åŸºç¡€æ¦‚å¿µ)
2. [@Columnæ ¸å¿ƒå±æ€§è¯¦è§£](#2-Columnæ ¸å¿ƒå±æ€§è¯¦è§£)
3. [æ•°å€¼ç²¾åº¦ä¸å°æ•°ä½æ§åˆ¶](#3-æ•°å€¼ç²¾åº¦ä¸å°æ•°ä½æ§åˆ¶)
4. [å­—æ®µæ“ä½œæ§åˆ¶](#4-å­—æ®µæ“ä½œæ§åˆ¶)
5. [è‡ªå®šä¹‰åˆ—å®šä¹‰](#5-è‡ªå®šä¹‰åˆ—å®šä¹‰)
6. [å¿½ç•¥å­—æ®µæ˜ å°„](#6-å¿½ç•¥å­—æ®µæ˜ å°„)
7. [å®æˆ˜åº”ç”¨åœºæ™¯](#7-å®æˆ˜åº”ç”¨åœºæ™¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å­—æ®µæ˜ å°„åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å­—æ®µæ˜ å°„


**é€šä¿—ç†è§£**ï¼š
å­—æ®µæ˜ å°„å°±æ˜¯å‘Šè¯‰JPA"Javaç±»çš„å±æ€§"å’Œ"æ•°æ®åº“è¡¨çš„åˆ—"ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚

```
ç®€å•ç±»æ¯”ï¼š
Javaç±»å°±åƒæ˜¯ä½ çš„é€šè®¯å½•
æ•°æ®åº“è¡¨å°±åƒæ˜¯Excelè¡¨æ ¼

å­—æ®µæ˜ å°„ = å‘Šè¯‰ç³»ç»Ÿ"å§“å"è¿™ä¸€æ å¯¹åº”Excelçš„å“ªä¸€åˆ—
```

**å®é™…åœºæ™¯**ï¼š
```java
// Javaç±»ä¸­çš„å±æ€§
private String userName;

// å¯¹åº”æ•°æ®åº“è¡¨ä¸­çš„åˆ—
// user_name VARCHAR(50)
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å­—æ®µæ˜ å°„


**æ ¸å¿ƒåŸå› **ï¼š
- âœ… **å‘½åé£æ ¼ä¸åŒ**ï¼šJavaç”¨é©¼å³°å‘½åï¼Œæ•°æ®åº“ç”¨ä¸‹åˆ’çº¿å‘½å
- âœ… **æ•°æ®ç±»å‹è½¬æ¢**ï¼šJavaçš„Stringè¦å¯¹åº”æ•°æ®åº“çš„VARCHAR
- âœ… **çº¦æŸæ¡ä»¶**ï¼šå‘Šè¯‰æ•°æ®åº“è¿™ä¸ªå­—æ®µèƒ½ä¸èƒ½ä¸ºç©ºã€æœ‰å¤šé•¿
- âœ… **ç‰¹æ®Šå¤„ç†**ï¼šæŸäº›å­—æ®µåªç”¨æ¥è®¡ç®—ï¼Œä¸éœ€è¦å­˜åˆ°æ•°æ®åº“

**ä¸¾ä¸ªä¾‹å­**ï¼š
```
ä½ åœ¨Javaé‡Œå†™ï¼š
private String email;

æ•°æ®åº“éœ€è¦çŸ¥é“ï¼š
- è¿™ä¸ªå­—æ®µå«ä»€ä¹ˆåå­—ï¼Ÿ(email è¿˜æ˜¯ user_email?)
- èƒ½å­˜å¤šé•¿çš„æ–‡æœ¬ï¼Ÿ(50ä¸ªå­—ç¬¦ï¼Ÿ200ä¸ªå­—ç¬¦ï¼Ÿ)
- èƒ½ä¸èƒ½ä¸ºç©ºï¼Ÿ(å¿…é¡»å¡«é‚®ç®±å—ï¼Ÿ)
- éœ€è¦å”¯ä¸€å—ï¼Ÿ(åŒä¸€ä¸ªé‚®ç®±èƒ½æ³¨å†Œå¤šä¸ªè´¦å·å—ï¼Ÿ)
```

### 1.3 æ˜ å°„çš„åŸºæœ¬æ–¹å¼


**ä¸¤ç§æ–¹å¼å¯¹æ¯”**ï¼š

| æ–¹å¼ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| **é»˜è®¤æ˜ å°„** | ä¸å†™ä»»ä½•æ³¨è§£ï¼ŒJPAè‡ªåŠ¨å¤„ç† | å­—æ®µåå’Œåˆ—åä¸€è‡´ï¼Œæ— ç‰¹æ®Šè¦æ±‚ |
| **@Columnæ˜ å°„** | æ‰‹åŠ¨æŒ‡å®šè¯¦ç»†é…ç½® | éœ€è¦è‡ªå®šä¹‰åˆ—åã€é•¿åº¦ã€çº¦æŸç­‰ |

**ç¤ºä¾‹å¯¹æ¯”**ï¼š
```java
// æ–¹å¼1ï¼šé»˜è®¤æ˜ å°„ï¼ˆJPAè‡ªåŠ¨å¤„ç†ï¼‰
private String name;
// æ•°æ®åº“åˆ—ï¼šname VARCHAR(255)

// æ–¹å¼2ï¼šæ‰‹åŠ¨æ˜ å°„ï¼ˆç²¾ç¡®æ§åˆ¶ï¼‰
@Column(name = "user_name", length = 50, nullable = false)
private String name;
// æ•°æ®åº“åˆ—ï¼šuser_name VARCHAR(50) NOT NULL
```

---

## 2. ğŸ“ @Columnæ ¸å¿ƒå±æ€§è¯¦è§£


### 2.1 nameå±æ€§ - æŒ‡å®šåˆ—å


**ä½œç”¨**ï¼šå‘Šè¯‰JPAåœ¨æ•°æ®åº“ä¸­è¿™ä¸ªå­—æ®µå«ä»€ä¹ˆåå­—

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… Javaå±æ€§åå’Œæ•°æ®åº“åˆ—åä¸ä¸€è‡´æ—¶
- âœ… éµå¾ªæ•°æ®åº“å‘½åè§„èŒƒï¼ˆå¦‚ä¸‹åˆ’çº¿é£æ ¼ï¼‰

```java
// â­ åŸºç¡€ç”¨æ³•
@Column(name = "user_email")
private String email;

// å¸¸è§å‘½åè½¬æ¢
private String userName;    â†’ @Column(name = "user_name")
private String phoneNumber; â†’ @Column(name = "phone_number")
private String isActive;    â†’ @Column(name = "is_active")
```

**å®é™…æ•ˆæœ**ï¼š
```
Javaä»£ç å†™ï¼š           æ•°æ®åº“è¡¨ä¸­ï¼š
email          â†’      user_email
userName       â†’      user_name
```

### 2.2 nullableå±æ€§ - æ§åˆ¶å¯ç©ºæ€§


**ä½œç”¨**ï¼šè¿™ä¸ªå­—æ®µèƒ½ä¸èƒ½ä¸ºç©ºï¼ˆnullï¼‰

**å–å€¼è¯´æ˜**ï¼š
- `nullable = false` â†’ **å¿…å¡«**ï¼Œæ•°æ®åº“æ·»åŠ  `NOT NULL` çº¦æŸ
- `nullable = true` â†’ **å¯é€‰**ï¼Œé»˜è®¤å€¼ï¼Œå¯ä»¥ä¸ºç©º

```java
// â­ å¿…å¡«å­—æ®µ
@Column(nullable = false)
private String email;        // é‚®ç®±å¿…é¡»å¡«

@Column(nullable = false)
private String password;     // å¯†ç å¿…é¡»å¡«

// â­ å¯é€‰å­—æ®µ
@Column(nullable = true)     // å¯ä»¥çœç•¥ï¼Œé»˜è®¤å°±æ˜¯true
private String nickname;     // æ˜µç§°å¯ä»¥ä¸å¡«

private String address;      // ä¸å†™æ³¨è§£ï¼Œé»˜è®¤å¯ä»¥ä¸ºç©º
```

**æ•°æ®åº“å¯¹åº”**ï¼š
```sql
-- nullable = false ç”Ÿæˆï¼š
email VARCHAR(255) NOT NULL

-- nullable = true ç”Ÿæˆï¼š
nickname VARCHAR(255) NULL
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šç”¨æˆ·æ³¨å†Œæ—¶ï¼Œé‚®ç®±ã€å¯†ç å¿…å¡«å°±ç”¨ `nullable = false`ï¼Œæ˜µç§°ã€åœ°å€å¯é€‰å°±ç”¨ `nullable = true`

### 2.3 lengthå±æ€§ - å­—ç¬¦é•¿åº¦é™åˆ¶


**ä½œç”¨**ï¼šé™åˆ¶å­—ç¬¦ä¸²ç±»å‹å­—æ®µçš„æœ€å¤§é•¿åº¦

**é€‚ç”¨ç±»å‹**ï¼šåªå¯¹ `String` ç±»å‹æœ‰æ•ˆ

```java
// â­ å¸¸è§é•¿åº¦è®¾ç½®
@Column(length = 50)
private String username;     // ç”¨æˆ·åæœ€å¤š50ä¸ªå­—ç¬¦

@Column(length = 100)
private String email;        // é‚®ç®±æœ€å¤š100ä¸ªå­—ç¬¦

@Column(length = 500)
private String description;  // æè¿°æœ€å¤š500ä¸ªå­—ç¬¦

@Column(length = 2000)
private String content;      // æ–‡ç« å†…å®¹æœ€å¤š2000ä¸ªå­—ç¬¦
```

**é•¿åº¦é€‰æ‹©å»ºè®®**ï¼š

| å­—æ®µç±»å‹ | æ¨èé•¿åº¦ | è¯´æ˜ |
|---------|---------|------|
| ç”¨æˆ·å | `50-100` | ä¸€èˆ¬å¤Ÿç”¨ |
| é‚®ç®± | `100` | æ ‡å‡†é‚®ç®±é•¿åº¦ |
| æ‰‹æœºå· | `20` | åŒ…å«å›½é™…å·ç  |
| å¯†ç ï¼ˆåŠ å¯†åï¼‰ | `255` | åŠ å¯†åä¼šå˜é•¿ |
| ç®€çŸ­æè¿° | `200-500` | ä¸€ä¸¤å¥è¯ |
| è¯¦ç»†å†…å®¹ | `2000+` | æ–‡ç« ã€è¯„è®ºç­‰ |

> âš ï¸ **æ³¨æ„**ï¼šlengthåªå½±å“æ•°æ®åº“VARCHARçš„é•¿åº¦ï¼Œä¸ä¼šè‡ªåŠ¨éªŒè¯Javaè¾“å…¥

### 2.4 uniqueå±æ€§ - å”¯ä¸€æ€§çº¦æŸ


**ä½œç”¨**ï¼šä¿è¯è¿™ä¸ªå­—æ®µçš„å€¼åœ¨æ•´ä¸ªè¡¨ä¸­ä¸é‡å¤

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… é‚®ç®±åœ°å€ï¼ˆä¸€ä¸ªé‚®ç®±åªèƒ½æ³¨å†Œä¸€æ¬¡ï¼‰
- âœ… ç”¨æˆ·åï¼ˆä¸èƒ½é‡å¤ï¼‰
- âœ… èº«ä»½è¯å·ï¼ˆå…¨å›½å”¯ä¸€ï¼‰
- âœ… æ‰‹æœºå·ï¼ˆä¸€ä¸ªå·ç ä¸€ä¸ªè´¦æˆ·ï¼‰

```java
// â­ å”¯ä¸€å­—æ®µç¤ºä¾‹
@Column(unique = true)
private String email;        // é‚®ç®±å”¯ä¸€

@Column(unique = true, length = 50)
private String username;     // ç”¨æˆ·åå”¯ä¸€

@Column(unique = true)
private String idCard;       // èº«ä»½è¯å·å”¯ä¸€
```

**æ•°æ®åº“æ•ˆæœ**ï¼š
```sql
-- unique = true ä¼šåˆ›å»ºå”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX idx_email ON user(email);
```

**å®é™…è¡Œä¸º**ï¼š
```java
// ç¬¬ä¸€æ¬¡æ’å…¥
User user1 = new User();
user1.setEmail("test@example.com");
userRepository.save(user1);  // âœ… æˆåŠŸ

// ç¬¬äºŒæ¬¡æ’å…¥ç›¸åŒé‚®ç®±
User user2 = new User();
user2.setEmail("test@example.com");
userRepository.save(user2);  // âŒ æŠ¥é”™ï¼šè¿åå”¯ä¸€çº¦æŸ
```

---

## 3. ğŸ”¢ æ•°å€¼ç²¾åº¦ä¸å°æ•°ä½æ§åˆ¶


### 3.1 precisionå’Œscaleçš„å«ä¹‰


**é€šä¿—è§£é‡Š**ï¼š
- **precisionï¼ˆç²¾åº¦ï¼‰**ï¼šè¿™ä¸ªæ•°å­—æ€»å…±èƒ½æœ‰å¤šå°‘ä½ï¼ˆåŒ…æ‹¬å°æ•°ï¼‰
- **scaleï¼ˆå°æ•°ä½æ•°ï¼‰**ï¼šå°æ•°ç‚¹åé¢æœ‰å‡ ä½

```
ç¤ºä¾‹ç†è§£ï¼š
æ•°å­—ï¼š123.45

precision = 5  ï¼ˆæ€»å…±5ä½æ•°å­—ï¼š1,2,3,4,5ï¼‰
scale = 2      ï¼ˆå°æ•°ç‚¹å2ä½ï¼š4,5ï¼‰
```

**æ•°å­¦è¡¨ç¤º**ï¼š
```
precision = æ€»ä½æ•°
scale = å°æ•°ä½æ•°
æ•´æ•°ä½æ•° = precision - scale

ä¾‹å¦‚ï¼šprecision=10, scale=2
å¯ä»¥è¡¨ç¤ºçš„èŒƒå›´ï¼š-99999999.99 åˆ° 99999999.99
```

### 3.2 å®é™…åº”ç”¨åœºæ™¯


**ğŸ’° é‡‘é¢å­—æ®µ**ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼š
```java
// â­ å•†å“ä»·æ ¼
@Column(precision = 10, scale = 2)
private BigDecimal price;
// å¯ä»¥å­˜ï¼š12345678.99
// æœ€å¤§å€¼ï¼š99999999.99ï¼ˆ8ä½æ•´æ•° + 2ä½å°æ•°ï¼‰

// â­ è®¢å•é‡‘é¢
@Column(precision = 12, scale = 2)
private BigDecimal totalAmount;
// å¯ä»¥å­˜ï¼š9999999999.99ï¼ˆ10ä½æ•´æ•° + 2ä½å°æ•°ï¼‰
```

**ğŸ“Š ç™¾åˆ†æ¯”å­—æ®µ**ï¼š
```java
// â­ æŠ˜æ‰£ç‡
@Column(precision = 5, scale = 2)
private BigDecimal discountRate;
// å¯ä»¥å­˜ï¼š0.85ï¼ˆè¡¨ç¤º85%æŠ˜æ‰£ï¼‰
// èŒƒå›´ï¼š0.00 ~ 999.99
```

**ğŸ“ å°ºå¯¸ã€é‡é‡å­—æ®µ**ï¼š
```java
// â­ å•†å“é‡é‡ï¼ˆå…‹ï¼‰
@Column(precision = 8, scale = 2)
private BigDecimal weight;
// å¯ä»¥å­˜ï¼š123456.78 å…‹

// â­ å•†å“é•¿åº¦ï¼ˆç±³ï¼‰
@Column(precision = 6, scale = 3)
private BigDecimal length;
// å¯ä»¥å­˜ï¼š123.456 ç±³ï¼ˆ3ä½å°æ•°æ›´ç²¾ç¡®ï¼‰
```

### 3.3 å¸¸ç”¨é…ç½®å‚è€ƒ


| åº”ç”¨åœºæ™¯ | precision | scale | è¯´æ˜ |
|---------|-----------|-------|------|
| **å°é‡‘é¢** | 10 | 2 | æœ€å¤§99999999.99å…ƒ |
| **å¤§é‡‘é¢** | 15 | 2 | æœ€å¤§9999999999999.99å…ƒ |
| **æŠ˜æ‰£ç‡** | 5 | 4 | 0.0001 ~ 9.9999 |
| **é‡é‡** | 8 | 2 | ç²¾ç¡®åˆ°å…‹ |
| **é•¿åº¦** | 6 | 3 | ç²¾ç¡®åˆ°æ¯«ç±³ |

> âš ï¸ **é‡è¦æé†’**ï¼šå¤„ç†é‡‘é¢æ—¶å¿…é¡»ç”¨ `BigDecimal`ï¼Œä¸èƒ½ç”¨ `double` æˆ– `float`ï¼ˆä¼šæœ‰ç²¾åº¦ä¸¢å¤±ï¼‰

---

## 4. ğŸ”§ å­—æ®µæ“ä½œæ§åˆ¶


### 4.1 insertableå±æ€§ - æ§åˆ¶æ’å…¥


**ä½œç”¨**ï¼šå†³å®šæ–°å¢æ•°æ®æ—¶ï¼Œè¿™ä¸ªå­—æ®µèƒ½ä¸èƒ½è¢«å†™å…¥

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µï¼ˆå¦‚åˆ›å»ºæ—¶é—´ï¼‰
- âœ… åªè¯»å­—æ®µ
- âœ… ç”±æ•°æ®åº“è§¦å‘å™¨ç»´æŠ¤çš„å­—æ®µ

```java
// â­ åŸºç¡€ç¤ºä¾‹
@Column(insertable = false)
private Date createdAt;
// æ–°å¢æ—¶å¿½ç•¥è¿™ä¸ªå­—æ®µï¼Œç”±æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆ

// â­ å®é™…åº”ç”¨
@Column(insertable = false, updatable = false)
private Long id;  // IDå®Œå…¨ç”±æ•°æ®åº“ç®¡ç†

@Column(insertable = false)
private Date lastLoginTime;  // ç™»å½•æ—¶é—´åç»­æ›´æ–°ï¼Œåˆ›å»ºæ—¶ä¸è®¾ç½®
```

**è¡Œä¸ºè¯´æ˜**ï¼š
```java
User user = new User();
user.setUsername("å¼ ä¸‰");
user.setCreatedAt(new Date());  // å³ä½¿è®¾ç½®äº†è¿™ä¸ªå€¼

userRepository.save(user);       // insertable=false ä¼šå¿½ç•¥createdAt
// æ•°æ®åº“ä¸­createdAtç”±DEFAULT CURRENT_TIMESTAMPç”Ÿæˆ
```

### 4.2 updatableå±æ€§ - æ§åˆ¶æ›´æ–°


**ä½œç”¨**ï¼šå†³å®šä¿®æ”¹æ•°æ®æ—¶ï¼Œè¿™ä¸ªå­—æ®µèƒ½ä¸èƒ½è¢«æ›´æ–°

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… åˆ›å»ºæ—¶é—´ï¼ˆä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½æ”¹ï¼‰
- âœ… åˆ›å»ºäººï¼ˆè®°å½•è°åˆ›å»ºçš„ï¼Œä¸èƒ½ä¿®æ”¹ï¼‰
- âœ… æŸäº›å®¡è®¡å­—æ®µ

```java
// â­ åªèƒ½å†™å…¥ä¸€æ¬¡çš„å­—æ®µ
@Column(updatable = false)
private Date createdAt;  // åˆ›å»ºæ—¶é—´ä¸èƒ½ä¿®æ”¹

@Column(updatable = false)
private String createdBy;  // åˆ›å»ºäººä¸èƒ½ä¿®æ”¹

// â­ å®Œå…¨åªè¯»å­—æ®µ
@Column(insertable = false, updatable = false)
private Integer viewCount;  // æµè§ˆé‡ç”±è§¦å‘å™¨ç»´æŠ¤ï¼Œä¸å…è®¸æ‰‹åŠ¨æ”¹
```

**è¡Œä¸ºè¯´æ˜**ï¼š
```java
// æŸ¥è¯¢å‡ºç”¨æˆ·
User user = userRepository.findById(1L).get();
user.setCreatedAt(new Date());  // å°è¯•ä¿®æ”¹åˆ›å»ºæ—¶é—´

userRepository.save(user);       // updatable=false ä¼šå¿½ç•¥è¿™ä¸ªä¿®æ”¹
// æ•°æ®åº“ä¸­createdAtä¿æŒä¸å˜
```

### 4.3 ç»„åˆä½¿ç”¨åœºæ™¯


**åœºæ™¯1ï¼šå®Œå…¨ç”±æ•°æ®åº“æ§åˆ¶çš„å­—æ®µ**
```java
@Column(insertable = false, updatable = false)
private Integer version;  // ç‰ˆæœ¬å·ç”±æ•°æ®åº“è§¦å‘å™¨è‡ªåŠ¨ç»´æŠ¤
```

**åœºæ™¯2ï¼šåªèƒ½åˆ›å»ºæ—¶è®¾ç½®çš„å­—æ®µ**
```java
@Column(insertable = true, updatable = false)
private String orderNumber;  // è®¢å•å·åˆ›å»ºæ—¶ç”Ÿæˆï¼Œä¹‹åä¸èƒ½æ”¹
```

**åœºæ™¯3ï¼šåªèƒ½æ›´æ–°çš„å­—æ®µ**
```java
@Column(insertable = false, updatable = true)
private Date lastModifiedAt;  // æœ€åä¿®æ”¹æ—¶é—´ï¼Œåˆ›å»ºæ—¶ä¸ºç©ºï¼Œåç»­æ›´æ–°
```

---

## 5. ğŸ› ï¸ è‡ªå®šä¹‰åˆ—å®šä¹‰


### 5.1 columnDefinitionåŸºæœ¬ç”¨æ³•


**ä½œç”¨**ï¼šç›´æ¥å†™SQLè¯­å¥æ¥å®šä¹‰æ•°æ®åº“åˆ—çš„ç±»å‹å’Œå±æ€§

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… ä½¿ç”¨æ•°æ®åº“ç‰¹æœ‰çš„æ•°æ®ç±»å‹
- âœ… è®¾ç½®é»˜è®¤å€¼
- âœ… æ·»åŠ ç‰¹æ®Šçº¦æŸ
- âœ… JPAæ³¨è§£æ— æ³•æ»¡è¶³çš„éœ€æ±‚

```java
// â­ è®¾ç½®é»˜è®¤å€¼
@Column(columnDefinition = "VARCHAR(100) DEFAULT 'active'")
private String status;

@Column(columnDefinition = "INT DEFAULT 0")
private Integer loginCount;

// â­ ä½¿ç”¨ç‰¹æ®Šç±»å‹
@Column(columnDefinition = "TEXT")
private String content;  // é•¿æ–‡æœ¬

@Column(columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
private Date createdAt;  // è‡ªåŠ¨è®°å½•åˆ›å»ºæ—¶é—´
```

### 5.2 å¸¸ç”¨å®šä¹‰ç¤ºä¾‹


**ğŸ“… æ—¶é—´å­—æ®µè‡ªåŠ¨ç»´æŠ¤**ï¼š
```java
// åˆ›å»ºæ—¶é—´è‡ªåŠ¨è®°å½•
@Column(columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
private Date createdAt;

// æ›´æ–°æ—¶é—´è‡ªåŠ¨æ›´æ–°
@Column(columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP")
private Date updatedAt;
```

**ğŸ“ æ–‡æœ¬ç±»å‹ä¼˜åŒ–**ï¼š
```java
// çŸ­æ–‡æœ¬
@Column(columnDefinition = "VARCHAR(200) CHARACTER SET utf8mb4")
private String title;

// é•¿æ–‡æœ¬
@Column(columnDefinition = "TEXT CHARACTER SET utf8mb4")
private String content;

// è¶…å¤§æ–‡æœ¬
@Column(columnDefinition = "LONGTEXT")
private String detail;
```

**ğŸ”¢ æ•°å€¼ç±»å‹ç²¾ç¡®æ§åˆ¶**ï¼š
```java
// æ— ç¬¦å·æ•´æ•°
@Column(columnDefinition = "INT UNSIGNED DEFAULT 0")
private Integer viewCount;

// å°æ•°ç±»å‹
@Column(columnDefinition = "DECIMAL(10,2) DEFAULT 0.00")
private BigDecimal price;
```

### 5.3 æ³¨æ„äº‹é¡¹


> âš ï¸ **é‡è¦æé†’**ï¼š
> - columnDefinitionæ˜¯æ•°æ®åº“ç›¸å…³çš„ï¼Œä¸åŒæ•°æ®åº“è¯­æ³•å¯èƒ½ä¸åŒ
> - MySQLå¯ä»¥ç”¨ `INT UNSIGNED`ï¼ŒPostgreSQLè¦ç”¨ `INTEGER`
> - å°½é‡ç”¨JPAæ³¨è§£ï¼Œåªåœ¨å¿…è¦æ—¶ç”¨columnDefinition

**å¯¹æ¯”é€‰æ‹©**ï¼š
```java
// âœ… æ¨èï¼šç”¨JPAæ³¨è§£ï¼ˆè·¨æ•°æ®åº“å…¼å®¹ï¼‰
@Column(nullable = false, length = 100)
private String email;

// âš ï¸ è°¨æ…ä½¿ç”¨ï¼šç›´æ¥å†™SQLï¼ˆæ•°æ®åº“ç›¸å…³ï¼‰
@Column(columnDefinition = "VARCHAR(100) NOT NULL")
private String email;
```

---

## 6. ğŸš« å¿½ç•¥å­—æ®µæ˜ å°„


### 6.1 @Transientæ³¨è§£è¯¦è§£


**ä½œç”¨**ï¼šå‘Šè¯‰JPA"è¿™ä¸ªå­—æ®µä¸è¦å­˜åˆ°æ•°æ®åº“"

**é€šä¿—ç†è§£**ï¼š
```
æŠŠJavaç±»æƒ³è±¡æˆä¸€å¼ è¡¨å•ï¼š
- æœ‰äº›ä¿¡æ¯éœ€è¦ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆå§“åã€å¹´é¾„ï¼‰
- æœ‰äº›ä¿¡æ¯åªæ˜¯ä¸´æ—¶è®¡ç®—çš„ï¼ˆå¹´é¾„æ®µã€å…¨åï¼‰

@Transientå°±æ˜¯è¯´ï¼šè¿™ä¸ªä¿¡æ¯æˆ‘è‡ªå·±ç®—ï¼Œä¸ç”¨å­˜æ•°æ®åº“
```

### 6.2 å¸¸è§ä½¿ç”¨åœºæ™¯


**åœºæ™¯1ï¼šè®¡ç®—å­—æ®µ**
```java
@Entity
public class User {
    @Column(length = 50)
    private String firstName;  // å­˜æ•°æ®åº“
    
    @Column(length = 50)
    private String lastName;   // å­˜æ•°æ®åº“
    
    @Transient
    private String fullName;   // ä¸å­˜æ•°æ®åº“ï¼Œç”±firstName+lastNameè®¡ç®—
    
    // è·å–å…¨åï¼ˆä¸´æ—¶è®¡ç®—ï¼‰
    public String getFullName() {
        return firstName + " " + lastName;
    }
}
```

**åœºæ™¯2ï¼šä¸´æ—¶çŠ¶æ€æ ‡è®°**
```java
@Entity
public class Order {
    @Column
    private BigDecimal totalAmount;  // å­˜æ•°æ®åº“
    
    @Column
    private BigDecimal paidAmount;   // å­˜æ•°æ®åº“
    
    @Transient
    private boolean isPaid;          // ä¸å­˜æ•°æ®åº“ï¼Œé€šè¿‡æ¯”è¾ƒé‡‘é¢åˆ¤æ–­
    
    public boolean isPaid() {
        return paidAmount.compareTo(totalAmount) >= 0;
    }
}
```

**åœºæ™¯3ï¼šæ•æ„Ÿä¿¡æ¯ä¸´æ—¶å­˜å‚¨**
```java
@Entity
public class User {
    @Column
    private String passwordHash;  // å­˜æ•°æ®åº“ï¼ˆåŠ å¯†åçš„å¯†ç ï¼‰
    
    @Transient
    private String plainPassword;  // ä¸å­˜æ•°æ®åº“ï¼ˆæ˜æ–‡å¯†ç ï¼Œä»…ç”¨äºéªŒè¯ï¼‰
    
    public void setPassword(String password) {
        this.plainPassword = password;
        this.passwordHash = encryptPassword(password);  // åŠ å¯†åå­˜å‚¨
    }
}
```

### 6.3 transientå…³é”®å­— vs @Transientæ³¨è§£


**ä¸¤ç§æ–¹å¼å¯¹æ¯”**ï¼š

| æ–¹å¼ | è¯´æ˜ | åºåˆ—åŒ– | ä½¿ç”¨åœºæ™¯ |
|------|------|--------|----------|
| `@Transient` | JPAæ³¨è§£ | ä»å¯åºåˆ—åŒ– | ä¸å­˜æ•°æ®åº“ï¼Œä½†å¯èƒ½éœ€è¦ä¼ è¾“ |
| `transient` | Javaå…³é”®å­— | ä¸å¯åºåˆ—åŒ– | æ—¢ä¸å­˜æ•°æ®åº“ï¼Œä¹Ÿä¸ä¼ è¾“ |

```java
@Entity
public class User {
    @Transient
    private String tempToken;     // ä¸å­˜æ•°æ®åº“ï¼Œä½†å¯ä»¥JSONåºåˆ—åŒ–ä¼ ç»™å‰ç«¯
    
    private transient String secretKey;  // ä¸å­˜æ•°æ®åº“ï¼Œä¹Ÿä¸åºåˆ—åŒ–
}
```

> ğŸ’¡ **é€‰æ‹©å»ºè®®**ï¼š
> - è®¡ç®—å­—æ®µã€ä¸´æ—¶æ ‡è®° â†’ ç”¨ `@Transient`
> - çœŸæ­£çš„ä¸´æ—¶å˜é‡ã€å¯†é’¥ â†’ ç”¨ `transient` å…³é”®å­—

---

## 7. ğŸ’¼ å®æˆ˜åº”ç”¨åœºæ™¯


### 7.1 ç”¨æˆ·è¡¨è®¾è®¡


```java
@Entity
@Table(name = "sys_user")
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // â­ ç”¨æˆ·åï¼šå”¯ä¸€ã€å¿…å¡«ã€é™é•¿
    @Column(name = "username", unique = true, nullable = false, length = 50)
    private String username;
    
    // â­ é‚®ç®±ï¼šå”¯ä¸€ã€å¿…å¡«
    @Column(name = "email", unique = true, nullable = false, length = 100)
    private String email;
    
    // â­ å¯†ç ï¼šå¿…å¡«ã€åŠ å¯†åä¼šå˜é•¿
    @Column(name = "password", nullable = false, length = 255)
    private String password;
    
    // â­ æ˜µç§°ï¼šå¯é€‰
    @Column(name = "nickname", length = 100)
    private String nickname;
    
    // â­ åˆ›å»ºæ—¶é—´ï¼šè‡ªåŠ¨ç”Ÿæˆã€ä¸å¯ä¿®æ”¹
    @Column(name = "created_at", updatable = false,
            columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
    private Date createdAt;
    
    // â­ æ›´æ–°æ—¶é—´ï¼šè‡ªåŠ¨æ›´æ–°
    @Column(name = "updated_at",
            columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP")
    private Date updatedAt;
    
    // â­ ç™»å½•æ¬¡æ•°ï¼šé»˜è®¤0
    @Column(name = "login_count", columnDefinition = "INT DEFAULT 0")
    private Integer loginCount;
    
    // â­ è´¦æˆ·çŠ¶æ€ï¼šé»˜è®¤æ¿€æ´»
    @Column(name = "status", length = 20, columnDefinition = "VARCHAR(20) DEFAULT 'active'")
    private String status;
    
    // â­ å¹´é¾„ï¼šè®¡ç®—å­—æ®µï¼Œä¸å­˜æ•°æ®åº“
    @Transient
    private Integer age;
    
    public Integer getAge() {
        // æ ¹æ®ç”Ÿæ—¥è®¡ç®—å¹´é¾„
        return calculateAge(this.birthday);
    }
}
```

### 7.2 å•†å“è¡¨è®¾è®¡


```java
@Entity
@Table(name = "product")
public class Product {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // â­ å•†å“åç§°
    @Column(name = "product_name", nullable = false, length = 200)
    private String productName;
    
    // â­ å•†å“ä»·æ ¼ï¼š10ä½æ•°å­—ï¼Œ2ä½å°æ•°
    @Column(name = "price", nullable = false, precision = 10, scale = 2)
    private BigDecimal price;
    
    // â­ åº“å­˜æ•°é‡ï¼šæ— ç¬¦å·æ•´æ•°
    @Column(name = "stock", columnDefinition = "INT UNSIGNED DEFAULT 0")
    private Integer stock;
    
    // â­ å•†å“æè¿°ï¼šé•¿æ–‡æœ¬
    @Column(name = "description", columnDefinition = "TEXT")
    private String description;
    
    // â­ å•†å“ç¼–å·ï¼šå”¯ä¸€ã€åˆ›å»ºåä¸å¯ä¿®æ”¹
    @Column(name = "product_code", unique = true, nullable = false, 
            length = 50, updatable = false)
    private String productCode;
    
    // â­ æ˜¯å¦ä¸Šæ¶ï¼šè®¡ç®—å­—æ®µ
    @Transient
    private boolean isAvailable;
    
    public boolean isAvailable() {
        return stock > 0 && "active".equals(status);
    }
}
```

### 7.3 è®¢å•è¡¨è®¾è®¡


```java
@Entity
@Table(name = "orders")
public class Order {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // â­ è®¢å•å·ï¼šå”¯ä¸€ã€åˆ›å»ºåä¸å¯ä¿®æ”¹
    @Column(name = "order_number", unique = true, nullable = false,
            length = 50, updatable = false)
    private String orderNumber;
    
    // â­ è®¢å•é‡‘é¢ï¼š12ä½æ•°å­—ï¼Œ2ä½å°æ•°
    @Column(name = "total_amount", nullable = false, precision = 12, scale = 2)
    private BigDecimal totalAmount;
    
    // â­ å·²æ”¯ä»˜é‡‘é¢
    @Column(name = "paid_amount", precision = 12, scale = 2,
            columnDefinition = "DECIMAL(12,2) DEFAULT 0.00")
    private BigDecimal paidAmount;
    
    // â­ è®¢å•çŠ¶æ€
    @Column(name = "status", length = 20,
            columnDefinition = "VARCHAR(20) DEFAULT 'pending'")
    private String status;
    
    // â­ ä¸‹å•æ—¶é—´ï¼šè‡ªåŠ¨è®°å½•
    @Column(name = "order_time", updatable = false,
            columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
    private Date orderTime;
    
    // â­ æ˜¯å¦å·²æ”¯ä»˜ï¼šè®¡ç®—å­—æ®µ
    @Transient
    private boolean isPaid;
    
    public boolean isPaid() {
        return paidAmount.compareTo(totalAmount) >= 0;
    }
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ @Columnæ³¨è§£ï¼šæ§åˆ¶å­—æ®µå¦‚ä½•æ˜ å°„åˆ°æ•°æ®åº“åˆ—
ğŸ”¸ nameå±æ€§ï¼šæŒ‡å®šæ•°æ®åº“åˆ—å
ğŸ”¸ nullableå±æ€§ï¼šæ§åˆ¶å­—æ®µæ˜¯å¦å¿…å¡«
ğŸ”¸ lengthå±æ€§ï¼šé™åˆ¶å­—ç¬¦ä¸²é•¿åº¦
ğŸ”¸ uniqueå±æ€§ï¼šä¿è¯å­—æ®µå€¼å”¯ä¸€
ğŸ”¸ precision/scaleï¼šæ§åˆ¶æ•°å€¼ç²¾åº¦å’Œå°æ•°ä½
ğŸ”¸ insertable/updatableï¼šæ§åˆ¶æ’å…¥å’Œæ›´æ–°è¡Œä¸º
ğŸ”¸ columnDefinitionï¼šè‡ªå®šä¹‰åˆ—å®šä¹‰
ğŸ”¸ @Transientï¼šæ ‡è®°ä¸å­˜æ•°æ®åº“çš„å­—æ®µ
```

### 8.2 å¸¸ç”¨é…ç½®é€ŸæŸ¥


| éœ€æ±‚ | é…ç½®æ–¹å¼ | ç¤ºä¾‹ |
|------|---------|------|
| **æ”¹åˆ—å** | `@Column(name="...")` | `@Column(name="user_name")` |
| **å¿…å¡«å­—æ®µ** | `nullable=false` | `@Column(nullable=false)` |
| **å”¯ä¸€å­—æ®µ** | `unique=true` | `@Column(unique=true)` |
| **é™åˆ¶é•¿åº¦** | `length=æ•°å­—` | `@Column(length=50)` |
| **é‡‘é¢å­—æ®µ** | `precision/scale` | `@Column(precision=10, scale=2)` |
| **åªè¯»å­—æ®µ** | `insertable/updatable=false` | `@Column(updatable=false)` |
| **é»˜è®¤å€¼** | `columnDefinition` | `columnDefinition="INT DEFAULT 0"` |
| **ä¸å­˜æ•°æ®åº“** | `@Transient` | `@Transient private String temp` |

### 8.3 å®æˆ˜åº”ç”¨å»ºè®®


**è®¾è®¡åŸåˆ™**ï¼š
- âœ… é‚®ç®±ã€ç”¨æˆ·åç­‰å¿…é¡»åŠ  `unique=true`
- âœ… å¿…å¡«ä¿¡æ¯å¿…é¡»åŠ  `nullable=false`
- âœ… å­—ç¬¦ä¸²å­—æ®µåˆç†è®¾ç½® `length`
- âœ… é‡‘é¢å­—æ®µå¿…é¡»ç”¨ `BigDecimal` + `precision/scale`
- âœ… åˆ›å»ºæ—¶é—´ç”¨ `updatable=false`
- âœ… è®¡ç®—å­—æ®µç”¨ `@Transient`

**å¸¸è§é”™è¯¯**ï¼š
- âŒ é‡‘é¢ç”¨doubleæˆ–floatï¼ˆç²¾åº¦ä¸¢å¤±ï¼‰
- âŒ å¿˜è®°è®¾ç½®å­—ç¬¦ä¸²é•¿åº¦ï¼ˆé»˜è®¤255å¯èƒ½ä¸å¤Ÿï¼‰
- âŒ è¯¥åŠ uniqueçš„æ²¡åŠ ï¼ˆæ•°æ®é‡å¤ï¼‰
- âŒ è®¡ç®—å­—æ®µå­˜æ•°æ®åº“ï¼ˆå†—ä½™æ•°æ®ï¼‰

**è®°å¿†å£è¯€**ï¼š
```
åˆ—ånameè¦å¯¹åº”ï¼Œ
nullableæ§åˆ¶ç©ºä¸ç©ºï¼Œ
lengthé™åˆ¶å­—ç¬¦é•¿ï¼Œ
uniqueä¿è¯ä¸é‡æ ·ã€‚

é‡‘é¢ç²¾åº¦è¦è®¾å¥½ï¼Œ
æ’å…¥æ›´æ–°åˆ†æ¸…æ¥šï¼Œ
è‡ªå®šä¹‰åˆ—ç”¨å®šä¹‰ï¼Œ
ä¸´æ—¶å­—æ®µåŠ Transientã€‚
```