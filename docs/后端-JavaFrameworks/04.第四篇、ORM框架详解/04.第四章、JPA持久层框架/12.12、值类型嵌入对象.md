---
title: 12ã€å€¼ç±»å‹åµŒå…¥å¯¹è±¡
---
## ğŸ“š ç›®å½•

1. [åµŒå…¥å¼å¯¹è±¡æ˜¯ä»€ä¹ˆ](#1-åµŒå…¥å¼å¯¹è±¡æ˜¯ä»€ä¹ˆ)
2. [ä¸ºä»€ä¹ˆéœ€è¦åµŒå…¥å¼å¯¹è±¡](#2-ä¸ºä»€ä¹ˆéœ€è¦åµŒå…¥å¼å¯¹è±¡)
3. [åŸºç¡€ä½¿ç”¨æ–¹å¼](#3-åŸºç¡€ä½¿ç”¨æ–¹å¼)
4. [å±æ€§è¦†ç›–æœºåˆ¶](#4-å±æ€§è¦†ç›–æœºåˆ¶)
5. [é‡ç‚¹æ³¨æ„äº‹é¡¹](#5-é‡ç‚¹æ³¨æ„äº‹é¡¹)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ åµŒå…¥å¼å¯¹è±¡æ˜¯ä»€ä¹ˆ


### 1.1 é€šä¿—ç†è§£


**ç”Ÿæ´»ä¸­çš„ä¾‹å­**ï¼š
```
æƒ³è±¡ä½ åœ¨å¡«å†™å¿«é€’å•ï¼š
æ”¶ä»¶äººå§“åï¼šå¼ ä¸‰
æ”¶ä»¶äººç”µè¯ï¼š13800138000
æ”¶ä»¶åœ°å€-çœï¼šå¹¿ä¸œçœ
æ”¶ä»¶åœ°å€-å¸‚ï¼šæ·±åœ³å¸‚
æ”¶ä»¶åœ°å€-åŒºï¼šå—å±±åŒº
æ”¶ä»¶åœ°å€-è¡—é“ï¼šç§‘æŠ€å›­è·¯xxå·

å¯„ä»¶äººå§“åï¼šæå››
å¯„ä»¶äººç”µè¯ï¼š13900139000
å¯„ä»¶åœ°å€-çœï¼šåŒ—äº¬å¸‚
å¯„ä»¶åœ°å€-å¸‚ï¼šæœé˜³åŒº
...
```

ä½ ä¼šå‘ç°"åœ°å€"è¿™ä¸ªä¿¡æ¯åœ¨ä¸åŒåœ°æ–¹**é‡å¤å‡ºç°**ï¼Œå®ƒåŒ…æ‹¬çœã€å¸‚ã€åŒºã€è¡—é“ç­‰å›ºå®šç»“æ„ã€‚å¦‚æœæ¯æ¬¡éƒ½å†™ä¸€éå¾ˆéº»çƒ¦ï¼Œèƒ½ä¸èƒ½æŠŠ"åœ°å€"å•ç‹¬å®šä¹‰ï¼Œç„¶åå¤ç”¨å‘¢ï¼Ÿ

**åµŒå…¥å¼å¯¹è±¡å°±æ˜¯å¹²è¿™ä¸ªçš„**ï¼

### 1.2 æŠ€æœ¯å®šä¹‰


**åµŒå…¥å¼å¯¹è±¡ï¼ˆEmbedded Objectï¼‰**ï¼š
- ä¸æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼Œæ²¡æœ‰è‡ªå·±çš„æ•°æ®åº“è¡¨
- æ˜¯ä¸€ç»„**ç›¸å…³å­—æ®µçš„å°è£…**ï¼Œä¼šåµŒå…¥åˆ°ä¸»å®ä½“çš„è¡¨ä¸­
- å¯ä»¥åœ¨å¤šä¸ªå®ä½“ä¸­**é‡å¤ä½¿ç”¨**
- æœ¬è´¨æ˜¯**å€¼å¯¹è±¡**ï¼ˆValue Objectï¼‰ï¼Œæè¿°å®ä½“çš„æŸä¸ªå±æ€§

**æ•°æ®åº“è§†è§’**ï¼š
```
ä¸ä½¿ç”¨åµŒå…¥å¼å¯¹è±¡ï¼š
Userè¡¨ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name â”‚ provinceâ”‚  city  â”‚districtâ”‚ street â”‚  phone  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ å¼ ä¸‰ â”‚ å¹¿ä¸œçœ  â”‚ æ·±åœ³å¸‚ â”‚ å—å±±åŒº â”‚ xxè·¯   â”‚13800... â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨åµŒå…¥å¼å¯¹è±¡ï¼ˆæ•°æ®åº“è¡¨ç»“æ„ä¸€æ ·ï¼Œä½†ä»£ç æ›´æ¸…æ™°ï¼‰ï¼š
Userè¡¨ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name â”‚ provinceâ”‚  city  â”‚districtâ”‚ street â”‚  phone  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘      â””â”€â”€â”€â”€ Addresså¯¹è±¡çš„å­—æ®µå±•å¼€ â”€â”€â”€â”€â”˜
```

### 1.3 æ ¸å¿ƒæ¦‚å¿µå›¾ç¤º


```
å®ä½“ç±»å±‚é¢ï¼š                    æ•°æ®åº“å±‚é¢ï¼š

User å®ä½“                       user è¡¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id          â”‚                â”‚ id           â”‚
â”‚ name        â”‚                â”‚ name         â”‚
â”‚ Address     â”‚ â”€â”€å±•å¼€æ˜ å°„â”€â”€â”€â†’  â”‚ province     â”‚
â”‚   â”œprovince â”‚                â”‚ city         â”‚
â”‚   â”œcity     â”‚                â”‚ district     â”‚
â”‚   â”œdistrict â”‚                â”‚ street       â”‚
â”‚   â””street   â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Address ä¸æ˜¯ç‹¬ç«‹è¡¨ï¼Œè€Œæ˜¯"å€¼å¯¹è±¡"
```

---

## 2. ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦åµŒå…¥å¼å¯¹è±¡


### 2.1 è§£å†³çš„æ ¸å¿ƒé—®é¢˜


**é—®é¢˜1ï¼šä»£ç é‡å¤å†—ä½™**
```java
// âŒ æ²¡æœ‰åµŒå…¥å¼å¯¹è±¡ï¼Œæ¯ä¸ªå®ä½“éƒ½è¦é‡å¤å®šä¹‰åœ°å€å­—æ®µ
public class User {
    private String province;
    private String city;
    private String district;
    private String street;
}

public class Company {
    private String province;  // åˆé‡å¤ä¸€é
    private String city;
    private String district;
    private String street;
}

// âœ… ä½¿ç”¨åµŒå…¥å¼å¯¹è±¡ï¼Œå®šä¹‰ä¸€æ¬¡ï¼Œåˆ°å¤„ä½¿ç”¨
public class Address {
    private String province;
    private String city;
    private String district;
    private String street;
}

public class User {
    private Address address;  // ç®€æ´æ¸…æ™°
}

public class Company {
    private Address address;  // å¤ç”¨
}
```

**é—®é¢˜2ï¼šæ¦‚å¿µä¸æ¸…æ™°**
```
æ²¡æœ‰Addresså¯¹è±¡ï¼šå­—æ®µæ•£ä¹±ï¼Œçœ‹ä¸å‡ºæ˜¯"åœ°å€"è¿™ä¸ªæ•´ä½“æ¦‚å¿µ
æœ‰Addresså¯¹è±¡ï¼šä¸€çœ‹å°±çŸ¥é“è¿™æ˜¯"åœ°å€ä¿¡æ¯"ï¼Œè¯­ä¹‰æ˜ç¡®
```

### 2.2 å®é™…åº”ç”¨åœºæ™¯


**å…¸å‹çš„åµŒå…¥å¼å¯¹è±¡**ï¼š

ğŸ”¸ **åœ°å€ä¿¡æ¯ï¼ˆAddressï¼‰**
```
çœã€å¸‚ã€åŒºã€è¡—é“ã€é‚®ç¼–
â†’ ç”¨æˆ·åœ°å€ã€å…¬å¸åœ°å€ã€æ”¶è´§åœ°å€
```

ğŸ”¸ **é‡‘é¢å¯¹è±¡ï¼ˆMoneyï¼‰**
```
é‡‘é¢æ•°å€¼ã€å¸ç§
â†’ è®¢å•é‡‘é¢ã€å•†å“ä»·æ ¼ã€è´¦æˆ·ä½™é¢
```

ğŸ”¸ **æ—¶é—´æ®µï¼ˆPeriodï¼‰**
```
å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´
â†’ æ´»åŠ¨æ—¶é—´ã€åˆåŒæœŸé™ã€ä¿ƒé”€æ—¶æ®µ
```

ğŸ”¸ **è”ç³»æ–¹å¼ï¼ˆContactï¼‰**
```
ç”µè¯ã€é‚®ç®±ã€å¾®ä¿¡
â†’ ä¸ªäººè”ç³»ã€ä¼ä¸šè”ç³»
```

### 2.3 ä¼˜åŠ¿æ€»ç»“


| ä¼˜åŠ¿ | è¯´æ˜ | å®é™…ä»·å€¼ |
|------|------|---------|
| **ä»£ç å¤ç”¨** | ä¸€æ¬¡å®šä¹‰ï¼Œå¤šå¤„ä½¿ç”¨ | å‡å°‘é‡å¤ä»£ç  |
| **è¯­ä¹‰æ¸…æ™°** | æ¦‚å¿µå°è£…ï¼Œæ˜“äºç†è§£ | æé«˜å¯è¯»æ€§ |
| **ç»´æŠ¤æ–¹ä¾¿** | ç»Ÿä¸€ä¿®æ”¹ï¼Œå½±å“å…¨å±€ | é™ä½ç»´æŠ¤æˆæœ¬ |
| **èŒè´£æ˜ç¡®** | ç›¸å…³å­—æ®µèšåˆ | ç¬¦åˆé¢å‘å¯¹è±¡åŸåˆ™ |

---

## 3. ğŸ”§ åŸºç¡€ä½¿ç”¨æ–¹å¼


### 3.1 å®šä¹‰åµŒå…¥å¼å¯¹è±¡


**æ ¸å¿ƒæ³¨è§£ï¼š`@Embeddable`**

```java
import javax.persistence.Embeddable;

@Embeddable  // æ ‡è®°è¿™æ˜¯å¯åµŒå…¥çš„å¯¹è±¡
public class Address {
    
    private String province;  // çœä»½
    private String city;      // åŸå¸‚
    private String district;  // åŒºåŸŸ
    private String street;    // è¡—é“
    
    // å¿…é¡»æœ‰æ— å‚æ„é€ å™¨ï¼ˆJPAè¦æ±‚ï¼‰
    public Address() {}
    
    public Address(String province, String city, String district, String street) {
        this.province = province;
        this.city = city;
        this.district = district;
        this.street = street;
    }
    
    // getter/setter...
}
```

**å…³é”®ç‚¹è§£æ**ï¼š
- `@Embeddable`ï¼šå‘Šè¯‰JPAè¿™æ˜¯"å€¼å¯¹è±¡"ï¼Œå¯ä»¥è¢«åµŒå…¥
- **æ— å‚æ„é€ å™¨**ï¼šJPAåˆ›å»ºå¯¹è±¡å¿…éœ€
- **æ²¡æœ‰@Id**ï¼šä¸æ˜¯å®ä½“ï¼Œä¸éœ€è¦ä¸»é”®
- **å­—æ®µæ˜ å°„**ï¼šé»˜è®¤å­—æ®µåå°±æ˜¯æ•°æ®åº“åˆ—å

### 3.2 ä½¿ç”¨åµŒå…¥å¼å¯¹è±¡


**æ ¸å¿ƒæ³¨è§£ï¼š`@Embedded`**

```java
import javax.persistence.*;

@Entity
@Table(name = "t_user")
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    
    @Embedded  // åµŒå…¥Addresså¯¹è±¡
    private Address address;
    
    // getter/setter...
}
```

**ç”Ÿæˆçš„æ•°æ®åº“è¡¨**ï¼š
```sql
CREATE TABLE t_user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50),
    province VARCHAR(50),    -- Addressçš„å­—æ®µ
    city VARCHAR(50),        -- Addressçš„å­—æ®µ
    district VARCHAR(50),    -- Addressçš„å­—æ®µ
    street VARCHAR(255)      -- Addressçš„å­—æ®µ
);
```

**æ•°æ®ç¤ºä¾‹**ï¼š
```
æ’å…¥æ•°æ®ï¼š
User user = new User();
user.setName("å¼ ä¸‰");
user.setAddress(new Address("å¹¿ä¸œçœ", "æ·±åœ³å¸‚", "å—å±±åŒº", "ç§‘æŠ€å›­è·¯1å·"));

æ•°æ®åº“è®°å½•ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name â”‚ provinceâ”‚  city  â”‚districtâ”‚    street    â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ å¼ ä¸‰ â”‚ å¹¿ä¸œçœ  â”‚ æ·±åœ³å¸‚ â”‚ å—å±±åŒº â”‚ ç§‘æŠ€å›­è·¯1å·  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 å®Œæ•´å®ä¾‹æ¼”ç¤º


**åœºæ™¯ï¼šå…¬å¸å®ä½“ä¹Ÿéœ€è¦åœ°å€**

```java
@Entity
@Table(name = "t_company")
public class Company {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String companyName;
    
    @Embedded  // å¤ç”¨Addresså¯¹è±¡
    private Address address;
    
    // getter/setter...
}
```

**æ•°æ®æµç¨‹å›¾ç¤º**ï¼š
```
Javaå¯¹è±¡å±‚ï¼š                æ•°æ®åº“å±‚ï¼š

User                      t_userè¡¨
â”œâ”€ name: "å¼ ä¸‰"           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€ address               â”‚ name           â”‚
   â”œâ”€ province: "å¹¿ä¸œ"    â”‚ province       â”‚
   â”œâ”€ city: "æ·±åœ³"        â”‚ city           â”‚
   â””â”€ ...                â”‚ ...            â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Company                   t_companyè¡¨
â”œâ”€ companyName: "xxx"    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€ address               â”‚ company_name   â”‚
   â”œâ”€ province: "åŒ—äº¬"    â”‚ province       â”‚
   â”œâ”€ city: "æœé˜³"        â”‚ city           â”‚
   â””â”€ ...                â”‚ ...            â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ğŸ› ï¸ å±æ€§è¦†ç›–æœºåˆ¶


### 4.1 ä»€ä¹ˆæ˜¯å±æ€§è¦†ç›–


**é—®é¢˜åœºæ™¯**ï¼š
```
Useræœ‰ä¸€ä¸ªåœ°å€ï¼Œå«"å®¶åº­åœ°å€"
ä½†å¦‚æœUserè¿˜è¦å­˜"å…¬å¸åœ°å€"å‘¢ï¼Ÿ

@Embedded
private Address homeAddress;   // å®¶åº­åœ°å€

@Embedded  
private Address workAddress;   // å·¥ä½œåœ°å€

é—®é¢˜ï¼šä¸¤ä¸ªAddressçš„å­—æ®µåä¼šå†²çªï¼
provinceã€city... è¿™äº›åˆ—åé‡å¤äº†
```

**è§£å†³æ–¹æ¡ˆï¼šå±æ€§è¦†ç›–** - ç»™å­—æ®µæ”¹ä¸ªåå­—

### 4.2 å•ä¸ªå±æ€§è¦†ç›–


**ä½¿ç”¨ `@AttributeOverride`**

```java
@Entity
@Table(name = "t_user")
public class User {
    
    @Id
    private Long id;
    private String name;
    
    // å®¶åº­åœ°å€ï¼ˆä½¿ç”¨é»˜è®¤å­—æ®µåï¼‰
    @Embedded
    private Address homeAddress;
    
    // å·¥ä½œåœ°å€ï¼ˆé‡å‘½åå­—æ®µï¼Œé¿å…å†²çªï¼‰
    @Embedded
    @AttributeOverride(
        name = "province",           // Addressä¸­çš„å­—æ®µå
        column = @Column(name = "work_province")  // æ˜ å°„ä¸ºwork_provinceåˆ—
    )
    private Address workAddress;
}
```

**ç”Ÿæˆçš„è¡¨ç»“æ„**ï¼š
```sql
CREATE TABLE t_user (
    id BIGINT PRIMARY KEY,
    name VARCHAR(50),
    
    -- å®¶åº­åœ°å€ï¼ˆé»˜è®¤å­—æ®µåï¼‰
    province VARCHAR(50),
    city VARCHAR(50),
    district VARCHAR(50),
    street VARCHAR(255),
    
    -- å·¥ä½œåœ°å€ï¼ˆè¦†ç›–åçš„å­—æ®µåï¼‰
    work_province VARCHAR(50),  -- â† è¢«è¦†ç›–äº†
    city VARCHAR(50),           -- â† å†²çªï¼è¿˜æ˜¯é‡å¤
    ...
);
```

> âš ï¸ **æ³¨æ„**ï¼šå•ä¸ªè¦†ç›–ä¸å¤Ÿï¼Œè¿˜æœ‰å…¶ä»–å­—æ®µå†²çªï¼

### 4.3 æ‰¹é‡å±æ€§è¦†ç›–


**ä½¿ç”¨ `@AttributeOverrides`ï¼ˆå¤æ•°å½¢å¼ï¼‰**

```java
@Entity
@Table(name = "t_user")
public class User {
    
    @Id
    private Long id;
    private String name;
    
    // å®¶åº­åœ°å€
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", column = @Column(name = "home_province")),
        @AttributeOverride(name = "city", column = @Column(name = "home_city")),
        @AttributeOverride(name = "district", column = @Column(name = "home_district")),
        @AttributeOverride(name = "street", column = @Column(name = "home_street"))
    })
    private Address homeAddress;
    
    // å·¥ä½œåœ°å€
    @Embedded
    @AttributeOverrides({
        @AttributeOverride(name = "province", column = @Column(name = "work_province")),
        @AttributeOverride(name = "city", column = @Column(name = "work_city")),
        @AttributeOverride(name = "district", column = @Column(name = "work_district")),
        @AttributeOverride(name = "street", column = @Column(name = "work_street"))
    })
    private Address workAddress;
}
```

**å®Œç¾çš„è¡¨ç»“æ„**ï¼š
```sql
CREATE TABLE t_user (
    id BIGINT PRIMARY KEY,
    name VARCHAR(50),
    
    -- å®¶åº­åœ°å€
    home_province VARCHAR(50),
    home_city VARCHAR(50),
    home_district VARCHAR(50),
    home_street VARCHAR(255),
    
    -- å·¥ä½œåœ°å€
    work_province VARCHAR(50),
    work_city VARCHAR(50),
    work_district VARCHAR(50),
    work_street VARCHAR(255)
);
```

### 4.4 è¦†ç›–æœºåˆ¶å›¾è§£


```
Addresså¯¹è±¡                     Userå®ä½“è¡¨

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ province    â”‚ â”€â”€é»˜è®¤æ˜ å°„â”€â”€â†’  â”‚ province         â”‚
â”‚ city        â”‚                â”‚ city             â”‚
â”‚ district    â”‚                â”‚ district         â”‚
â”‚ street      â”‚                â”‚ street           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨@AttributeOverridesåï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ province    â”‚ â”€â”€è¦†ç›–æ˜ å°„â”€â”€â†’  â”‚ home_province    â”‚
â”‚ city        â”‚                â”‚ home_city        â”‚
â”‚ district    â”‚                â”‚ home_district    â”‚
â”‚ street      â”‚                â”‚ home_street      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. âš ï¸ é‡ç‚¹æ³¨æ„äº‹é¡¹


### 5.1 equalså’ŒhashCode


**æ ¸å¿ƒé—®é¢˜**ï¼šåµŒå…¥å¼å¯¹è±¡æ˜¯"å€¼å¯¹è±¡"ï¼Œéœ€è¦æ­£ç¡®å®ç°ç›¸ç­‰æ€§åˆ¤æ–­

```java
@Embeddable
public class Address {
    private String province;
    private String city;
    private String district;
    private String street;
    
    // âœ… å¿…é¡»é‡å†™equals
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Address address = (Address) o;
        return Objects.equals(province, address.province) &&
               Objects.equals(city, address.city) &&
               Objects.equals(district, address.district) &&
               Objects.equals(street, address.street);
    }
    
    // âœ… å¿…é¡»é‡å†™hashCode
    @Override
    public int hashCode() {
        return Objects.hash(province, city, district, street);
    }
}
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
```java
Address addr1 = new Address("å¹¿ä¸œçœ", "æ·±åœ³å¸‚", "å—å±±åŒº", "xxè·¯");
Address addr2 = new Address("å¹¿ä¸œçœ", "æ·±åœ³å¸‚", "å—å±±åŒº", "xxè·¯");

// æ²¡é‡å†™equalsï¼šaddr1.equals(addr2) â†’ falseï¼ˆåœ°å€ä¸åŒï¼‰
// é‡å†™equalsï¼šaddr1.equals(addr2) â†’ trueï¼ˆå†…å®¹ç›¸åŒï¼‰

// åœ¨é›†åˆä¸­ä½¿ç”¨æ—¶å°¤å…¶é‡è¦ï¼š
Set<Address> addresses = new HashSet<>();
addresses.add(addr1);
addresses.contains(addr2);  // åªæœ‰é‡å†™equalsæ‰ä¼šè¿”å›true
```

### 5.2 å¯ç©ºæ€§å¤„ç†


**åµŒå…¥å¼å¯¹è±¡å¯ä»¥ä¸ºnull**

```java
@Entity
public class User {
    @Id
    private Long id;
    
    @Embedded
    private Address address;  // å¯ä»¥ä¸ºnull
    
    // getter/setter...
}

// ä½¿ç”¨æ—¶æ³¨æ„åˆ¤ç©º
User user = new User();
user.setAddress(null);  // å…è®¸

// æŸ¥è¯¢æ—¶
if (user.getAddress() != null) {
    String city = user.getAddress().getCity();
}
```

**æ•°æ®åº“è¡¨ç°**ï¼š
```
addressä¸ºnullæ—¶ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name â”‚ provinceâ”‚ city â”‚ districtâ”‚ street â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ å¼ ä¸‰ â”‚  NULL   â”‚ NULL â”‚  NULL   â”‚  NULL  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰€æœ‰Addresså­—æ®µéƒ½æ˜¯NULL
```

### 5.3 ä¸èƒ½ç”¨ä½œæŸ¥è¯¢å…³è”


**åµŒå…¥å¼å¯¹è±¡çš„é™åˆ¶**ï¼š

```java
// âŒ ä¸èƒ½è¿™æ ·åšï¼ˆAddressä¸æ˜¯å®ä½“ï¼Œæ²¡æœ‰ç‹¬ç«‹IDï¼‰
@OneToMany(mappedBy = "address")  // é”™è¯¯ï¼
private List<Order> orders;

// âœ… åªèƒ½ä½œä¸ºæŸ¥è¯¢æ¡ä»¶
userRepository.findByAddress_City("æ·±åœ³å¸‚");  // æ­£ç¡®
```

**åŸå› **ï¼š
- åµŒå…¥å¼å¯¹è±¡æ²¡æœ‰ç‹¬ç«‹è¡¨ï¼Œæ²¡æœ‰ä¸»é”®
- ä¸èƒ½å»ºç«‹å¤–é”®å…³è”
- åªæ˜¯"å€¼çš„å°è£…"ï¼Œä¸æ˜¯ç‹¬ç«‹å®ä½“

### 5.4 ä½¿ç”¨å»ºè®®


**é€‚åˆç”¨åµŒå…¥å¼å¯¹è±¡**ï¼š
- âœ… çº¯ç²¹çš„å€¼å¯¹è±¡ï¼ˆåœ°å€ã€é‡‘é¢ã€æ—¶é—´æ®µï¼‰
- âœ… ä¸éœ€è¦å•ç‹¬æŸ¥è¯¢çš„æ•°æ®
- âœ… å¤šä¸ªå®ä½“å…±ç”¨çš„å­—æ®µç»„åˆ
- âœ… éœ€è¦æ•´ä½“æ“ä½œçš„ç›¸å…³å­—æ®µ

**ä¸é€‚åˆç”¨åµŒå…¥å¼å¯¹è±¡**ï¼š
- âŒ éœ€è¦ç‹¬ç«‹ç®¡ç†çš„æ•°æ®
- âŒ éœ€è¦å»ºç«‹å…³è”å…³ç³»
- âŒ éœ€è¦å•ç‹¬æŸ¥è¯¢ç»Ÿè®¡
- âŒ ä¼šé¢‘ç¹å˜åŒ–çš„ç»“æ„

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åµŒå…¥å¼å¯¹è±¡æœ¬è´¨ï¼šå€¼å¯¹è±¡ï¼Œä¸æ˜¯ç‹¬ç«‹å®ä½“
ğŸ”¸ æ ¸å¿ƒæ³¨è§£ï¼š@Embeddableï¼ˆå®šä¹‰ï¼‰+ @Embeddedï¼ˆä½¿ç”¨ï¼‰
ğŸ”¸ å±æ€§è¦†ç›–ï¼š@AttributeOverrides è§£å†³å­—æ®µå†²çª
ğŸ”¸ æ•°æ®åº“æ˜ å°„ï¼šå­—æ®µå±•å¼€åˆ°ä¸»è¡¨ï¼Œæ²¡æœ‰ç‹¬ç«‹è¡¨
ğŸ”¸ equals/hashCodeï¼šå€¼å¯¹è±¡å¿…é¡»æ­£ç¡®å®ç°
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ åµŒå…¥å¼å¯¹è±¡ vs å®ä½“**

| å¯¹æ¯”é¡¹ | åµŒå…¥å¼å¯¹è±¡ | å®ä½“ |
|-------|-----------|------|
| **ç‹¬ç«‹æ€§** | ä¾é™„äºä¸»å®ä½“ | ç‹¬ç«‹å­˜åœ¨ |
| **æ•°æ®åº“è¡¨** | æ— ç‹¬ç«‹è¡¨ | æœ‰ç‹¬ç«‹è¡¨ |
| **ä¸»é”®** | æ—  | æœ‰@Id |
| **å…³è”å…³ç³»** | ä¸èƒ½ä½œä¸ºå…³è”ç«¯ | å¯ä»¥å»ºç«‹å…³è” |
| **æŸ¥è¯¢** | åªèƒ½ä½œä¸ºæ¡ä»¶ | å¯ä»¥ç‹¬ç«‹æŸ¥è¯¢ |
| **ç”¨é€”** | å€¼çš„å°è£… | ä¸šåŠ¡å®ä½“ |

**ğŸ”¹ ä½•æ—¶ä½¿ç”¨å±æ€§è¦†ç›–**

```
å•ä¸ªåµŒå…¥å¯¹è±¡ï¼šä¸éœ€è¦è¦†ç›–ï¼Œç”¨é»˜è®¤å­—æ®µå
å¤šä¸ªåŒç±»åµŒå…¥å¯¹è±¡ï¼šå¿…é¡»è¦†ç›–ï¼Œé¿å…å­—æ®µå†²çª

ç¤ºä¾‹ï¼š
User {
    @Embedded Address address;        // ä¸è¦†ç›–
    @Embedded @AttributeOverrides({...}) Address homeAddress;  // è¦†ç›–
    @Embedded @AttributeOverrides({...}) Address workAddress;  // è¦†ç›–
}
```

### 6.3 å®é™…åº”ç”¨ä»·å€¼


**å…¸å‹åº”ç”¨åœºæ™¯**ï¼š

**ç”µå•†ç³»ç»Ÿ**ï¼š
```java
Order {
    @Embedded Address shippingAddress;  // æ”¶è´§åœ°å€
    @Embedded Address billingAddress;   // è´¦å•åœ°å€
    @Embedded Money totalAmount;        // è®¢å•é‡‘é¢
}
```

**ç”¨æˆ·ç³»ç»Ÿ**ï¼š
```java
User {
    @Embedded Contact personalContact;  // ä¸ªäººè”ç³»æ–¹å¼
    @Embedded Contact emergencyContact; // ç´§æ€¥è”ç³»äºº
    @Embedded Address residence;        // å±…ä½åœ°å€
}
```

**æ´»åŠ¨ç³»ç»Ÿ**ï¼š
```java
Activity {
    @Embedded Period validPeriod;      // æœ‰æ•ˆæœŸ
    @Embedded Money budget;            // é¢„ç®—
    @Embedded Address venue;           // æ´»åŠ¨åœ°ç‚¹
}
```

### 6.4 è®°å¿†è¦ç‚¹


**æ ¸å¿ƒå£è¯€**ï¼š
```
åµŒå…¥å¯¹è±¡å€¼å°è£…ï¼Œå¤ç”¨å­—æ®µä¸å»ºè¡¨
Embeddableæ¥å®šä¹‰ï¼ŒEmbeddedå»ä½¿ç”¨
å¤šä¸ªåŒç±»è¦è¦†ç›–ï¼Œé¿å…å­—æ®µèµ·å†²çª
equalså’Œhashé‡å†™ï¼Œå€¼å¯¹è±¡å®Œæ•´æ€§
```

**å­¦ä¹ è·¯å¾„**ï¼š
```
1. ç†è§£æ¦‚å¿µï¼šä»€ä¹ˆæ˜¯å€¼å¯¹è±¡ï¼Œä¸ºä»€ä¹ˆè¦å°è£…
2. æŒæ¡æ³¨è§£ï¼š@Embeddable å’Œ @Embedded
3. è§£å†³å†²çªï¼š@AttributeOverrides çš„ä½¿ç”¨
4. æ³¨æ„ç»†èŠ‚ï¼šequals/hashCodeã€å¯ç©ºæ€§
5. å®æˆ˜åº”ç”¨ï¼šåœ°å€ã€é‡‘é¢ã€æ—¶é—´æ®µç­‰å¸¸ç”¨åœºæ™¯
```