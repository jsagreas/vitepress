---
title: 10ã€æ—¶é—´æ—¥æœŸæ˜ å°„
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦æ—¶é—´æ˜ å°„](#1-ä¸ºä»€ä¹ˆéœ€è¦æ—¶é—´æ˜ å°„)
2. [ç°ä»£æ—¶é—´ç±»å‹æ˜ å°„ï¼ˆæ¨èï¼‰](#2-ç°ä»£æ—¶é—´ç±»å‹æ˜ å°„æ¨è)
3. [ä¼ ç»Ÿæ—¶é—´æ˜ å°„æ–¹å¼](#3-ä¼ ç»Ÿæ—¶é—´æ˜ å°„æ–¹å¼)
4. [è‡ªåŠ¨å¡«å……æ—¶é—´æˆ³](#4-è‡ªåŠ¨å¡«å……æ—¶é—´æˆ³)
5. [æ—¶åŒºé—®é¢˜å¤„ç†](#5-æ—¶åŒºé—®é¢˜å¤„ç†)
6. [æ•°æ®åº“æ—¶é—´ç±»å‹é€‰æ‹©](#6-æ•°æ®åº“æ—¶é—´ç±»å‹é€‰æ‹©)
7. [æœ€ä½³å®è·µæ€»ç»“](#7-æœ€ä½³å®è·µæ€»ç»“)

---

## 1. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦æ—¶é—´æ˜ å°„


### 1.1 é—®é¢˜çš„æœ¬è´¨


**ç®€å•ç†è§£**ï¼šJavaä¸­çš„æ—¶é—´ç±»å‹å’Œæ•°æ®åº“ä¸­çš„æ—¶é—´ç±»å‹**ä¸æ˜¯ä¸€å›äº‹**ï¼Œéœ€è¦å»ºç«‹å¯¹åº”å…³ç³»ã€‚

```
Javaä¸–ç•Œ                    æ•°æ®åº“ä¸–ç•Œ
LocalDateTime  â†â†’æ˜ å°„â†’  DATETIME/TIMESTAMP
LocalDate      â†â†’æ˜ å°„â†’  DATE
LocalTime      â†â†’æ˜ å°„â†’  TIME
```

**ä¸ºä»€ä¹ˆéœ€è¦æ˜ å°„**ï¼Ÿ
- Javaæœ‰è‡ªå·±çš„æ—¶é—´è¡¨ç¤ºæ–¹å¼ï¼ˆç±»ï¼‰
- æ•°æ®åº“æœ‰è‡ªå·±çš„æ—¶é—´æ•°æ®ç±»å‹
- JPAéœ€è¦çŸ¥é“å¦‚ä½•åœ¨ä¸¤è€…ä¹‹é—´**è½¬æ¢**

### 1.2 å¸¸è§ä½¿ç”¨åœºæ™¯


**å®é™…å¼€å‘ä¸­çš„éœ€æ±‚**ï¼š
- âœ… è®°å½•ç”¨æˆ·**æ³¨å†Œæ—¶é—´**
- âœ… è®°å½•æ–‡ç« **å‘å¸ƒæ—¶é—´**
- âœ… è®°å½•è®¢å•**åˆ›å»ºæ—¶é—´**å’Œ**æ›´æ–°æ—¶é—´**
- âœ… è®°å½•å‘˜å·¥**å…¥èŒæ—¥æœŸ**
- âœ… è®°å½•è¥ä¸šæ—¶é—´ï¼ˆåªéœ€è¦æ—¶åˆ†ç§’ï¼‰

---

## 2. ğŸš€ ç°ä»£æ—¶é—´ç±»å‹æ˜ å°„ï¼ˆæ¨èï¼‰


### 2.1 ä¸ºä»€ä¹ˆæ¨èjava.timeåŒ…


**java.timeåŒ…**æ˜¯Java 8å¼•å…¥çš„æ–°æ—¶é—´APIï¼Œç›¸æ¯”æ—§çš„Dateç±»æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼š

| ç‰¹ç‚¹ | java.timeåŒ… | æ—§Dateç±» |
|------|------------|----------|
| **çº¿ç¨‹å®‰å…¨** | âœ… ä¸å¯å˜ï¼Œå¤©ç”Ÿçº¿ç¨‹å®‰å…¨ | âŒ å¯å˜ï¼Œéçº¿ç¨‹å®‰å…¨ |
| **æ˜“ç”¨æ€§** | âœ… APIè®¾è®¡æ¸…æ™°ç›´è§‚ | âŒ APIè®¾è®¡æ··ä¹± |
| **æ—¶åŒºå¤„ç†** | âœ… å®Œå–„çš„æ—¶åŒºæ”¯æŒ | âŒ æ—¶åŒºå¤„ç†å¤æ‚ |
| **å‘½åæ¸…æ™°** | âœ… LocalDate/LocalDateTime | âŒ Dateæ—¢æœ‰æ—¥æœŸåˆæœ‰æ—¶é—´ |

### 2.2 æ ¸å¿ƒæ—¶é—´ç±»å‹è¯¦è§£


#### ğŸ“… LocalDate - åªè¦æ—¥æœŸ


**å«ä¹‰**ï¼šåªåŒ…å«**å¹´æœˆæ—¥**ï¼Œä¸åŒ…å«æ—¶åˆ†ç§’ã€‚

```java
@Entity
public class Employee {
    @Id
    private Long id;
    
    // å‘˜å·¥å…¥èŒæ—¥æœŸï¼ˆåªéœ€è¦å¹´æœˆæ—¥ï¼‰
    private LocalDate hireDate;  // 2024-03-15
    
    // å‘˜å·¥ç”Ÿæ—¥
    private LocalDate birthday;   // 1990-05-20
}
```

**å¯¹åº”æ•°æ®åº“ç±»å‹**ï¼š`DATE`

**å®é™…ä¾‹å­**ï¼š
```
Javaä¸­å­˜å‚¨ï¼š    LocalDate.of(2024, 3, 15)
æ•°æ®åº“ä¸­å­˜å‚¨ï¼š  2024-03-15
```

#### â° LocalTime - åªè¦æ—¶é—´


**å«ä¹‰**ï¼šåªåŒ…å«**æ—¶åˆ†ç§’**ï¼Œä¸åŒ…å«æ—¥æœŸã€‚

```java
@Entity
public class Store {
    @Id
    private Long id;
    
    // è¥ä¸šå¼€å§‹æ—¶é—´ï¼ˆåªéœ€è¦æ—¶åˆ†ç§’ï¼‰
    private LocalTime openTime;   // 09:00:00
    
    // è¥ä¸šç»“æŸæ—¶é—´
    private LocalTime closeTime;  // 21:30:00
}
```

**å¯¹åº”æ•°æ®åº“ç±»å‹**ï¼š`TIME`

**å®é™…ä¾‹å­**ï¼š
```
Javaä¸­å­˜å‚¨ï¼š    LocalTime.of(9, 0)
æ•°æ®åº“ä¸­å­˜å‚¨ï¼š  09:00:00
```

#### ğŸ“† LocalDateTime - å®Œæ•´æ—¥æœŸæ—¶é—´


**å«ä¹‰**ï¼šåŒ…å«**å¹´æœˆæ—¥æ—¶åˆ†ç§’**ï¼Œæœ€å¸¸ç”¨çš„ç±»å‹ã€‚

```java
@Entity
public class Article {
    @Id
    private Long id;
    
    // æ–‡ç« å‘å¸ƒæ—¶é—´ï¼ˆéœ€è¦ç²¾ç¡®åˆ°ç§’ï¼‰
    private LocalDateTime publishTime;  // 2024-03-15 14:30:25
    
    // æ–‡ç« æœ€åä¿®æ”¹æ—¶é—´
    private LocalDateTime updateTime;   // 2024-03-20 10:15:00
}
```

**å¯¹åº”æ•°æ®åº“ç±»å‹**ï¼š`DATETIME`æˆ–`TIMESTAMP`

**å®é™…ä¾‹å­**ï¼š
```
Javaä¸­å­˜å‚¨ï¼š    LocalDateTime.now()
æ•°æ®åº“ä¸­å­˜å‚¨ï¼š  2024-03-15 14:30:25
```

#### ğŸŒ Instant - æ—¶é—´æˆ³ï¼ˆUTCï¼‰


**å«ä¹‰**ï¼šè¡¨ç¤º**æ—¶é—´çº¿ä¸Šçš„ä¸€ä¸ªç¬æ—¶ç‚¹**ï¼ŒåŸºäºUTCæ—¶åŒºã€‚

**ä»€ä¹ˆæ—¶å€™ç”¨**ï¼Ÿ
- éœ€è¦è·¨æ—¶åŒºè®°å½•å‡†ç¡®æ—¶é—´ç‚¹
- ç³»ç»Ÿæ—¥å¿—è®°å½•
- éœ€è¦ç²¾ç¡®åˆ°çº³ç§’çº§åˆ«

```java
@Entity
public class SystemLog {
    @Id
    private Long id;
    
    // æ—¥å¿—è®°å½•æ—¶é—´ï¼ˆç²¾ç¡®æ—¶é—´æˆ³ï¼‰
    private Instant createTime;
}
```

**ç‰¹ç‚¹å¯¹æ¯”**ï¼š
```
LocalDateTimeï¼š  æœ¬åœ°æ—¶é—´ï¼Œä¸å¸¦æ—¶åŒºä¿¡æ¯
Instantï¼š        UTCæ—¶é—´æˆ³ï¼Œç²¾ç¡®çš„æ—¶é—´ç‚¹
```

### 2.3 Hibernate 5.2+çš„è‡ªåŠ¨æ”¯æŒ


**é‡è¦æç¤º**ï¼šHibernate 5.2åŠä»¥ä¸Šç‰ˆæœ¬**è‡ªåŠ¨æ”¯æŒ**java.timeåŒ…ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼

```java
// âœ… ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•æ³¨è§£
@Entity
public class Order {
    @Id
    private Long id;
    
    private LocalDateTime createTime;   // è‡ªåŠ¨æ˜ å°„åˆ°DATETIME
    private LocalDate orderDate;        // è‡ªåŠ¨æ˜ å°„åˆ°DATE
}
```

**ä¸éœ€è¦**ï¼š
- âŒ ä¸éœ€è¦@Temporalæ³¨è§£
- âŒ ä¸éœ€è¦@Typeæ³¨è§£
- âŒ ä¸éœ€è¦è‡ªå®šä¹‰è½¬æ¢å™¨

---

## 3. ğŸ“œ ä¼ ç»Ÿæ—¶é—´æ˜ å°„æ–¹å¼


### 3.1 @Temporalæ³¨è§£ï¼ˆå†å²åŒ…è¢±ï¼‰


**ä»€ä¹ˆæ˜¯@Temporal**ï¼Ÿ
- è¿™æ˜¯ç”¨äº**æ—§Dateç±»å‹**çš„æ˜ å°„æ³¨è§£
- ç°åœ¨åŸºæœ¬**ä¸æ¨èä½¿ç”¨**
- åªæ˜¯ä¸ºäº†ç»´æŠ¤è€é¡¹ç›®éœ€è¦äº†è§£

**ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ³¨è§£**ï¼Ÿ

```
é—®é¢˜ï¼šjava.util.DateåŒ…å«äº†æ—¥æœŸå’Œæ—¶é—´
     ä½†æ•°æ®åº“æœ‰DATEã€TIMEã€TIMESTAMPä¸‰ç§ç±»å‹
     
@Temporalçš„ä½œç”¨ï¼šå‘Šè¯‰JPAå…·ä½“è¦æ˜ å°„æˆå“ªç§æ•°æ®åº“ç±»å‹
```

### 3.2 @Temporalçš„ä¸‰ç§ç±»å‹


```java
@Entity
public class OldStyleEntity {
    @Id
    private Long id;
    
    // â‘  åªå­˜å‚¨æ—¥æœŸï¼ˆå¹´æœˆæ—¥ï¼‰
    @Temporal(TemporalType.DATE)
    private Date birthDate;        // â†’ æ•°æ®åº“DATEç±»å‹
    
    // â‘¡ åªå­˜å‚¨æ—¶é—´ï¼ˆæ—¶åˆ†ç§’ï¼‰
    @Temporal(TemporalType.TIME)
    private Date workTime;         // â†’ æ•°æ®åº“TIMEç±»å‹
    
    // â‘¢ å­˜å‚¨å®Œæ•´æ—¥æœŸæ—¶é—´
    @Temporal(TemporalType.TIMESTAMP)
    private Date createTime;       // â†’ æ•°æ®åº“TIMESTAMPç±»å‹
}
```

**ä¸‰ç§ç±»å‹å¯¹æ¯”**ï¼š

| TemporalType | å­˜å‚¨å†…å®¹ | æ•°æ®åº“ç±»å‹ | ç¤ºä¾‹å€¼ |
|--------------|---------|-----------|--------|
| **DATE** | åªæœ‰å¹´æœˆæ—¥ | DATE | 2024-03-15 |
| **TIME** | åªæœ‰æ—¶åˆ†ç§’ | TIME | 14:30:25 |
| **TIMESTAMP** | å®Œæ•´æ—¥æœŸæ—¶é—´ | TIMESTAMP | 2024-03-15 14:30:25 |

### 3.3 ä¸ºä»€ä¹ˆä¸æ¨èDateç±»


**Dateç±»çš„é—®é¢˜**ï¼š
```java
// âŒ æ—§æ–¹å¼ï¼šå„ç§é—®é¢˜
Date date = new Date();
// é—®é¢˜1ï¼šå¯å˜å¯¹è±¡ï¼Œçº¿ç¨‹ä¸å®‰å…¨
date.setTime(123456789);  // å¯ä»¥éšæ„ä¿®æ”¹

// é—®é¢˜2ï¼šæœˆä»½ä»0å¼€å§‹ï¼Œå®¹æ˜“æ··æ·†
Date d = new Date(2024, 3, 15);  // å®é™…æ˜¯2024å¹´4æœˆï¼

// é—®é¢˜3ï¼šAPIè®¾è®¡æ··ä¹±
int year = date.getYear();  // è¿”å›çš„æ˜¯year-1900ï¼
```

**ç°ä»£æ–¹å¼çš„ä¼˜åŠ¿**ï¼š
```java
// âœ… æ–°æ–¹å¼ï¼šæ¸…æ™°ç›´è§‚
LocalDateTime now = LocalDateTime.now();
// ä¸å¯å˜ï¼Œçº¿ç¨‹å®‰å…¨
// æœˆä»½æ­£å¸¸ï¼Œ1-12
// APIè®¾è®¡åˆç†
```

---

## 4. âš¡ è‡ªåŠ¨å¡«å……æ—¶é—´æˆ³


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨å¡«å……


**å®é™…åœºæ™¯**ï¼šå‡ ä¹æ¯ä¸ªè¡¨éƒ½éœ€è¦è®°å½•**åˆ›å»ºæ—¶é—´**å’Œ**æ›´æ–°æ—¶é—´**

```
æ‰‹åŠ¨è®¾ç½®çš„é—®é¢˜ï¼š
âŒ æ¯æ¬¡ä¿å­˜éƒ½è¦è®°å¾—è®¾ç½®æ—¶é—´
âŒ å®¹æ˜“å¿˜è®°
âŒ ä»£ç é‡å¤

è‡ªåŠ¨å¡«å……çš„å¥½å¤„ï¼š
âœ… æ¡†æ¶è‡ªåŠ¨å¤„ç†
âœ… ä¸ä¼šå¿˜è®°
âœ… ä»£ç ç®€æ´
```

### 4.2 JPAç”Ÿå‘½å‘¨æœŸå›è°ƒ


**æ ¸å¿ƒæ¦‚å¿µ**ï¼šJPAæä¾›äº†**ç”Ÿå‘½å‘¨æœŸäº‹ä»¶**ï¼Œå¯ä»¥åœ¨ç‰¹å®šæ—¶æœºè‡ªåŠ¨æ‰§è¡Œä»£ç ã€‚

#### ğŸ“Œ @PrePersist - ä¿å­˜å‰æ‰§è¡Œ


**è§¦å‘æ—¶æœº**ï¼šå®ä½“**ç¬¬ä¸€æ¬¡ä¿å­˜åˆ°æ•°æ®åº“å‰**æ‰§è¡Œ

```java
@Entity
public class Article {
    @Id
    private Long id;
    
    private String title;
    private LocalDateTime createTime;
    private LocalDateTime updateTime;
    
    // åœ¨ä¿å­˜å‰è‡ªåŠ¨æ‰§è¡Œ
    @PrePersist
    public void onCreate() {
        this.createTime = LocalDateTime.now();
        this.updateTime = LocalDateTime.now();
    }
}
```

**æ‰§è¡Œæµç¨‹**ï¼š
```
åˆ›å»ºæ–‡ç« å¯¹è±¡
    â†“
è°ƒç”¨save()æ–¹æ³•
    â†“
è§¦å‘@PrePersist â†’ è®¾ç½®åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´
    â†“
ä¿å­˜åˆ°æ•°æ®åº“
```

#### ğŸ”„ @PreUpdate - æ›´æ–°å‰æ‰§è¡Œ


**è§¦å‘æ—¶æœº**ï¼šå®ä½“**æ›´æ–°åˆ°æ•°æ®åº“å‰**æ‰§è¡Œ

```java
@Entity
public class Article {
    @Id
    private Long id;
    
    private String title;
    private LocalDateTime createTime;
    private LocalDateTime updateTime;
    
    @PrePersist
    public void onCreate() {
        this.createTime = LocalDateTime.now();
        this.updateTime = LocalDateTime.now();
    }
    
    // æ¯æ¬¡æ›´æ–°å‰è‡ªåŠ¨æ‰§è¡Œ
    @PreUpdate
    public void onUpdate() {
        this.updateTime = LocalDateTime.now();  // åªæ›´æ–°ä¿®æ”¹æ—¶é—´
    }
}
```

**å®Œæ•´æµç¨‹ç¤ºæ„**ï¼š
```
â‘  é¦–æ¬¡ä¿å­˜ï¼š
   new Article() â†’ save() 
   â†’ @PrePersistè§¦å‘ 
   â†’ createTimeå’ŒupdateTimeéƒ½è®¾ç½®ä¸ºå½“å‰æ—¶é—´

â‘¡ åç»­æ›´æ–°ï¼š
   ä¿®æ”¹æ–‡ç«  â†’ save()
   â†’ @PreUpdateè§¦å‘
   â†’ updateTimeæ›´æ–°ä¸ºå½“å‰æ—¶é—´ï¼ˆcreateTimeä¸å˜ï¼‰
```

### 4.3 Hibernateçš„@CreationTimestampå’Œ@UpdateTimestamp


**æ›´ç®€å•çš„æ–¹å¼**ï¼šHibernateæä¾›äº†ä¸“é—¨çš„æ³¨è§£

```java
@Entity
public class Order {
    @Id
    private Long id;
    
    private String orderNo;
    
    // è‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´ï¼ˆåªåœ¨æ’å…¥æ—¶ï¼‰
    @CreationTimestamp
    private LocalDateTime createTime;
    
    // è‡ªåŠ¨è®¾ç½®æ›´æ–°æ—¶é—´ï¼ˆæ¯æ¬¡æ›´æ–°æ—¶ï¼‰
    @UpdateTimestamp
    private LocalDateTime updateTime;
}
```

**å¯¹æ¯”è¯´æ˜**ï¼š

| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| **@PrePersist/@PreUpdate** | JPAæ ‡å‡†ï¼Œé€šç”¨æ€§å¥½ | éœ€è¦å†™æ–¹æ³• |
| **@CreationTimestamp/@UpdateTimestamp** | æ›´ç®€æ´ï¼Œè‡ªåŠ¨å®Œæˆ | Hibernateä¸“å± |

**æ¨èåšæ³•**ï¼š
- å¦‚æœåªç”¨Hibernate â†’ ç”¨`@CreationTimestamp`ç­‰ï¼Œæ›´ç®€æ´
- å¦‚æœè€ƒè™‘åˆ‡æ¢JPAå®ç° â†’ ç”¨`@PrePersist`ç­‰ï¼Œæ›´é€šç”¨

### 4.4 å®Œæ•´ç¤ºä¾‹


```java
@Entity
@Table(name = "blog_article")
public class Article {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String title;
    private String content;
    
    // æ–¹å¼1ï¼šä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå›è°ƒ
    private LocalDateTime createTime;
    private LocalDateTime updateTime;
    
    @PrePersist
    protected void onCreate() {
        createTime = LocalDateTime.now();
        updateTime = LocalDateTime.now();
    }
    
    @PreUpdate
    protected void onUpdate() {
        updateTime = LocalDateTime.now();
    }
}

// æˆ–è€…æ–¹å¼2ï¼šä½¿ç”¨Hibernateæ³¨è§£ï¼ˆæ›´ç®€æ´ï¼‰
@Entity
@Table(name = "blog_article")
public class ArticleSimple {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String title;
    private String content;
    
    @CreationTimestamp
    private LocalDateTime createTime;
    
    @UpdateTimestamp
    private LocalDateTime updateTime;
}
```

---

## 5. ğŸŒ æ—¶åŒºé—®é¢˜å¤„ç†


### 5.1 æ—¶åŒºé—®é¢˜çš„æœ¬è´¨


**ä»€ä¹ˆæ˜¯æ—¶åŒºé—®é¢˜**ï¼Ÿ

```
åœºæ™¯ï¼šä¸­å›½ç”¨æˆ·åœ¨åŒ—äº¬å‘å¸ƒæ–‡ç« ï¼ˆåŒ—äº¬æ—¶é—´14:00ï¼‰
     ç¾å›½ç”¨æˆ·æŸ¥çœ‹æ—¶åº”è¯¥æ˜¾ç¤ºä»€ä¹ˆæ—¶é—´ï¼Ÿ

é—®é¢˜æ ¸å¿ƒï¼šåŒä¸€æ—¶åˆ»åœ¨ä¸åŒåœ°åŒºçš„"æœ¬åœ°æ—¶é—´"ä¸åŒ
```

**å›¾ç¤ºè¯´æ˜**ï¼š
```
å…¨çƒæ—¶é—´è½´ï¼ˆUTCï¼‰
================â€¢================
               åŒä¸€æ—¶åˆ»
                â†“
åŒ—äº¬æ—¶é—´ï¼š  14:00ï¼ˆUTC+8ï¼‰
çº½çº¦æ—¶é—´ï¼š  01:00ï¼ˆUTC-5ï¼‰
ä¼¦æ•¦æ—¶é—´ï¼š  06:00ï¼ˆUTC+0ï¼‰
```

### 5.2 LocalDateTime vs Instant


**å…³é”®åŒºåˆ«**ï¼š

#### LocalDateTime - æœ¬åœ°æ—¶é—´ï¼ˆæ— æ—¶åŒºï¼‰


```java
// LocalDateTimeï¼šåªè®°å½•"æœ¬åœ°çœ‹åˆ°çš„æ—¶é—´"
LocalDateTime time = LocalDateTime.of(2024, 3, 15, 14, 0);
// å­˜å‚¨ï¼š2024-03-15 14:00
// é—®é¢˜ï¼šä¸çŸ¥é“è¿™æ˜¯å“ªä¸ªæ—¶åŒºçš„14:00ï¼
```

**é€‚ç”¨åœºæ™¯**ï¼š
- âœ… å•æ—¶åŒºåº”ç”¨ï¼ˆæ¯”å¦‚åªåœ¨ä¸­å›½ä½¿ç”¨çš„ç³»ç»Ÿï¼‰
- âœ… æ—¶åŒºæ— å…³çš„æ—¶é—´ï¼ˆæ¯”å¦‚"æ¯å¤©9ç‚¹è¥ä¸š"ï¼‰

#### Instant - æ—¶é—´æˆ³ï¼ˆæœ‰æ—¶åŒºï¼‰


```java
// Instantï¼šè®°å½•çš„æ˜¯"UTCæ—¶é—´çº¿ä¸Šçš„ç²¾ç¡®ç‚¹"
Instant instant = Instant.now();
// å­˜å‚¨ï¼š2024-03-15T06:00:00Zï¼ˆè¿™æ˜¯UTCæ—¶é—´ï¼‰
// ä¼˜åŠ¿ï¼šå…¨çƒå”¯ä¸€ï¼Œä»»ä½•åœ°æ–¹éƒ½èƒ½è½¬æ¢æˆæœ¬åœ°æ—¶é—´
```

**é€‚ç”¨åœºæ™¯**ï¼š
- âœ… å¤šæ—¶åŒºåº”ç”¨ï¼ˆå…¨çƒåŒ–ç³»ç»Ÿï¼‰
- âœ… éœ€è¦ç²¾ç¡®è®°å½•"ä»€ä¹ˆæ—¶å€™å‘ç”Ÿ"
- âœ… è·¨æ—¶åŒºåä½œ

### 5.3 å®é™…è§£å†³æ–¹æ¡ˆ


**æ–¹æ¡ˆ1ï¼šä½¿ç”¨Instantå­˜å‚¨**

```java
@Entity
public class GlobalArticle {
    @Id
    private Long id;
    
    private String title;
    
    // å­˜å‚¨UTCæ—¶é—´æˆ³
    private Instant publishTime;
    
    // æŸ¥è¯¢æ—¶è½¬æ¢ä¸ºç”¨æˆ·æ—¶åŒº
    public LocalDateTime getPublishTimeInZone(ZoneId userZone) {
        return LocalDateTime.ofInstant(publishTime, userZone);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
article.setPublishTime(Instant.now());  // å­˜å‚¨UTCæ—¶é—´

// ä¸­å›½ç”¨æˆ·æŸ¥çœ‹
LocalDateTime cnTime = article.getPublishTimeInZone(
    ZoneId.of("Asia/Shanghai")
);

// ç¾å›½ç”¨æˆ·æŸ¥çœ‹
LocalDateTime usTime = article.getPublishTimeInZone(
    ZoneId.of("America/New_York")
);
```

**æ–¹æ¡ˆ2ï¼šé…ç½®æ•°æ®åº“è¿æ¥æ—¶åŒº**

```yaml
# application.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb?serverTimezone=UTC
  jpa:
    properties:
      hibernate:
        jdbc:
          time_zone: UTC
```

**è¯´æ˜**ï¼š
- åº”ç”¨å’Œæ•°æ®åº“ç»Ÿä¸€ä½¿ç”¨**UTCæ—¶åŒº**
- å±•ç¤ºæ—¶æ ¹æ®ç”¨æˆ·æ—¶åŒºè½¬æ¢

### 5.4 æ—¶åŒºå¤„ç†æœ€ä½³å®è·µ


**æ¨èåšæ³•**ï¼š

```
â‘  å­˜å‚¨å±‚ï¼šç»Ÿä¸€ä½¿ç”¨UTC
   â†“
â‘¡ ä¸šåŠ¡å±‚ï¼šä½¿ç”¨Instantæˆ–æ˜ç¡®æ—¶åŒºçš„ZonedDateTime
   â†“
â‘¢ å±•ç¤ºå±‚ï¼šè½¬æ¢ä¸ºç”¨æˆ·æœ¬åœ°æ—¶åŒºæ˜¾ç¤º
```

**å®Œæ•´ç¤ºä¾‹**ï¼š
```java
@Entity
public class Event {
    @Id
    private Long id;
    
    private String name;
    
    // å­˜å‚¨ï¼šUTCæ—¶é—´æˆ³
    private Instant eventTime;
    
    // ä¸šåŠ¡æ–¹æ³•ï¼šè·å–ç‰¹å®šæ—¶åŒºçš„æ—¶é—´
    public ZonedDateTime getEventTimeInZone(String zoneId) {
        return eventTime.atZone(ZoneId.of(zoneId));
    }
    
    // å‰ç«¯å±•ç¤º
    public String getDisplayTime(String userZoneId) {
        ZonedDateTime zonedTime = getEventTimeInZone(userZoneId);
        return zonedTime.format(
            DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm")
        );
    }
}
```

---

## 6. ğŸ’¾ æ•°æ®åº“æ—¶é—´ç±»å‹é€‰æ‹©


### 6.1 MySQLæ—¶é—´ç±»å‹å¯¹æ¯”


**MySQLä¸»è¦æ—¶é—´ç±»å‹**ï¼š

| æ•°æ®åº“ç±»å‹ | å­˜å‚¨èŒƒå›´ | å­˜å‚¨ç©ºé—´ | æ—¶åŒºå½±å“ | æ¨èJavaç±»å‹ |
|-----------|---------|---------|---------|-------------|
| **DATE** | 1000-01-01 ~ 9999-12-31 | 3å­—èŠ‚ | âŒ æ—  | LocalDate |
| **TIME** | -838:59:59 ~ 838:59:59 | 3å­—èŠ‚ | âŒ æ—  | LocalTime |
| **DATETIME** | 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59 | 8å­—èŠ‚ | âŒ æ—  | LocalDateTime |
| **TIMESTAMP** | 1970-01-01 00:00:01 ~ 2038-01-19 03:14:07 | 4å­—èŠ‚ | âœ… æœ‰ | Instant |

### 6.2 DATETIME vs TIMESTAMP


**å…³é”®åŒºåˆ«**ï¼š

#### DATETIME - å›ºå®šæ—¶é—´


```sql
-- DATETIMEï¼šå­˜å‚¨çš„æ˜¯"å­—é¢æ—¶é—´"
CREATE TABLE article (
    id BIGINT PRIMARY KEY,
    title VARCHAR(200),
    publish_time DATETIME  -- å­˜å‚¨ï¼š2024-03-15 14:00:00
);

-- ç‰¹ç‚¹ï¼š
-- â‘  ä¸å—æ—¶åŒºå½±å“
-- â‘¡ å­˜ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆ
-- â‘¢ èŒƒå›´æ›´å¤§ï¼ˆåˆ°9999å¹´ï¼‰
```

**é€‚åˆåœºæ™¯**ï¼š
- âœ… å•æ—¶åŒºåº”ç”¨
- âœ… å†å²æ•°æ®ï¼ˆå¯èƒ½è¶…è¿‡2038å¹´ï¼‰
- âœ… ä¸éœ€è¦æ—¶åŒºè½¬æ¢

#### TIMESTAMP - æ—¶é—´æˆ³


```sql
-- TIMESTAMPï¼šå­˜å‚¨çš„æ˜¯"æ—¶é—´æˆ³"
CREATE TABLE event (
    id BIGINT PRIMARY KEY,
    event_name VARCHAR(200),
    event_time TIMESTAMP  -- å­˜å‚¨ï¼šUTCæ—¶é—´æˆ³
);

-- ç‰¹ç‚¹ï¼š
-- â‘  è‡ªåŠ¨è½¬æ¢æ—¶åŒº
-- â‘¡ å­˜å‚¨UTCï¼Œè¯»å–æ—¶è½¬ä¸ºè¿æ¥æ—¶åŒº
-- â‘¢ èŒƒå›´æœ‰é™ï¼ˆåˆ°2038å¹´ï¼‰
```

**é€‚åˆåœºæ™¯**ï¼š
- âœ… å¤šæ—¶åŒºåº”ç”¨
- âœ… éœ€è¦è®°å½•"ç»å¯¹æ—¶é—´ç‚¹"
- âœ… è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³

### 6.3 é€‰æ‹©å»ºè®®


**å†³ç­–æµç¨‹**ï¼š
```
æ˜¯å¦éœ€è¦è·¨æ—¶åŒºï¼Ÿ
    â”œâ”€ æ˜¯ â†’ ç”¨TIMESTAMPï¼ˆé…åˆInstantï¼‰
    â””â”€ å¦ â†’ ç”¨DATETIMEï¼ˆé…åˆLocalDateTimeï¼‰

æ˜¯å¦éœ€è¦2038å¹´åçš„æ—¥æœŸï¼Ÿ
    â”œâ”€ æ˜¯ â†’ å¿…é¡»ç”¨DATETIME
    â””â”€ å¦ â†’ éƒ½å¯ä»¥

æ˜¯å¦åªéœ€è¦æ—¥æœŸï¼Ÿ
    â””â”€ æ˜¯ â†’ ç”¨DATEï¼ˆé…åˆLocalDateï¼‰

æ˜¯å¦åªéœ€è¦æ—¶é—´ï¼Ÿ
    â””â”€ æ˜¯ â†’ ç”¨TIMEï¼ˆé…åˆLocalTimeï¼‰
```

**å®é™…å»ºè®®**ï¼š
```java
// æ¨èç»„åˆ1ï¼šæœ¬åœ°åŒ–åº”ç”¨
@Entity
public class Article {
    private LocalDateTime createTime;   // â†’ DATETIME
    private LocalDate publishDate;      // â†’ DATE
}

// æ¨èç»„åˆ2ï¼šå›½é™…åŒ–åº”ç”¨
@Entity
public class GlobalEvent {
    private Instant eventTime;          // â†’ TIMESTAMP
    private LocalDate eventDate;        // â†’ DATE
}
```

---

## 7. ğŸ“‹ æœ€ä½³å®è·µæ€»ç»“


### 7.1 å¿«é€Ÿå†³ç­–æŒ‡å—


**â‘  æ—¶é—´ç±»å‹é€‰æ‹©**ï¼š
```
åªè¦æ—¥æœŸï¼Ÿ           â†’ LocalDate
åªè¦æ—¶é—´ï¼Ÿ           â†’ LocalTime  
éœ€è¦æ—¥æœŸ+æ—¶é—´ï¼Ÿ      â†’ LocalDateTimeï¼ˆå•æ—¶åŒºï¼‰æˆ–Instantï¼ˆå¤šæ—¶åŒºï¼‰
éœ€è¦ç²¾ç¡®æ—¶é—´æˆ³ï¼Ÿ     â†’ Instant
```

**â‘¡ æ•°æ®åº“ç±»å‹é€‰æ‹©**ï¼š
```
LocalDate          â†’ DATE
LocalTime          â†’ TIME
LocalDateTime      â†’ DATETIME
Instant            â†’ TIMESTAMP
```

**â‘¢ è‡ªåŠ¨æ—¶é—´æˆ³**ï¼š
```
ç®€å•é¡¹ç›®           â†’ @CreationTimestamp / @UpdateTimestamp
éœ€è¦é€šç”¨æ€§         â†’ @PrePersist / @PreUpdate
```

### 7.2 æ ¸å¿ƒè¦ç‚¹è®°å¿†


**ğŸ”¥ å¿…è®°è¦ç‚¹**ï¼š

1. **ä¼˜å…ˆä½¿ç”¨java.timeåŒ…**ï¼ˆLocalDateTimeç­‰ï¼‰ï¼Œä¸ç”¨Date
2. **Hibernate 5.2+è‡ªåŠ¨æ”¯æŒ**ï¼Œæ— éœ€@Temporal
3. **å•æ—¶åŒºç”¨LocalDateTime**ï¼Œå¤šæ—¶åŒºç”¨Instant
4. **æ—¶é—´æˆ³ç”¨@CreationTimestamp**æœ€ç®€å•
5. **æ•°æ®åº“ç»Ÿä¸€UTCæ—¶åŒº**ï¼Œæ˜¾ç¤ºæ—¶è½¬æ¢

### 7.3 å¸¸è§é”™è¯¯é¿å…


**âŒ é”™è¯¯åšæ³•**ï¼š
```java
// é”™è¯¯1ï¼šè¿˜åœ¨ç”¨Date
@Temporal(TemporalType.TIMESTAMP)
private Date createTime;  // ä¸æ¨èï¼

// é”™è¯¯2ï¼šæ‰‹åŠ¨è®¾ç½®æ—¶é—´
article.setCreateTime(LocalDateTime.now());  // å®¹æ˜“å¿˜è®°

// é”™è¯¯3ï¼šæ—¶åŒºæ··ä¹±
LocalDateTime time = LocalDateTime.now();  // ä¸çŸ¥é“æ˜¯å“ªä¸ªæ—¶åŒº
```

**âœ… æ­£ç¡®åšæ³•**ï¼š
```java
// æ­£ç¡®1ï¼šä½¿ç”¨ç°ä»£API
private LocalDateTime createTime;  // ç®€æ´æ¸…æ™°

// æ­£ç¡®2ï¼šè‡ªåŠ¨å¡«å……
@CreationTimestamp
private LocalDateTime createTime;  // è‡ªåŠ¨å¤„ç†

// æ­£ç¡®3ï¼šæ˜ç¡®æ—¶åŒº
private Instant eventTime;  // æ˜ç¡®çš„UTCæ—¶é—´æˆ³
```

### 7.4 å®æˆ˜æ¨¡æ¿


**é€šç”¨å®ä½“åŸºç±»**ï¼š
```java
@MappedSuperclass
public abstract class BaseEntity {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // åˆ›å»ºæ—¶é—´ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰
    @CreationTimestamp
    private LocalDateTime createTime;
    
    // æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰
    @UpdateTimestamp
    private LocalDateTime updateTime;
    
    // getter/setterçœç•¥
}

// å…¶ä»–å®ä½“ç»§æ‰¿å³å¯
@Entity
public class Article extends BaseEntity {
    private String title;
    private String content;
    // è‡ªåŠ¨æ‹¥æœ‰idã€createTimeã€updateTime
}
```

**é…ç½®æ£€æŸ¥æ¸…å•**ï¼š
- [ ] ç¡®è®¤Hibernateç‰ˆæœ¬â‰¥5.2
- [ ] æ•°æ®åº“è¿æ¥é…ç½®æ—¶åŒºï¼ˆserverTimezone=UTCï¼‰
- [ ] ç»Ÿä¸€ä½¿ç”¨java.timeåŒ…
- [ ] åŸºç±»é…ç½®è‡ªåŠ¨æ—¶é—´æˆ³
- [ ] å¤šæ—¶åŒºåº”ç”¨ä½¿ç”¨Instant

---

## ğŸ’¡ æ€»ç»“


**æ ¸å¿ƒæ¦‚å¿µå›é¡¾**ï¼š
- **æ—¶é—´æ˜ å°„**ï¼šJavaæ—¶é—´ç±»å‹ä¸æ•°æ®åº“ç±»å‹çš„å¯¹åº”å…³ç³»
- **ç°ä»£æ–¹å¼**ï¼šjava.timeåŒ…ï¼ˆLocalDateTime/LocalDate/Instantï¼‰
- **è‡ªåŠ¨å¡«å……**ï¼š@CreationTimestampæˆ–@PrePersist
- **æ—¶åŒºå¤„ç†**ï¼šå•æ—¶åŒºç”¨LocalDateTimeï¼Œå¤šæ—¶åŒºç”¨Instant

**è®°å¿†å£è¯€**ï¼š
```
æ—¥æœŸæ—¶é—´è¦æ˜ å°„ï¼Œjava.timeæ˜¯é¦–é€‰
æœ¬åœ°æ—¶åŒºLocalDateTimeï¼Œå…¨çƒæ—¶åŒºInstantç”¨
è‡ªåŠ¨æ—¶é—´æˆ³ç®€å•ï¼ŒCreationTimestampæœ€æ–¹ä¾¿
æ•°æ®åº“é€‰DATETIMEï¼Œè·¨æ—¶åŒºTIMESTAMPè§
```