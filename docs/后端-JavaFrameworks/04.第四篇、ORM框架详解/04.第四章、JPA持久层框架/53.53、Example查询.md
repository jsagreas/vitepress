---
title: 53ã€ExampleæŸ¥è¯¢
---
## ğŸ“š ç›®å½•

1. [ExampleæŸ¥è¯¢æ˜¯ä»€ä¹ˆ](#1-ExampleæŸ¥è¯¢æ˜¯ä»€ä¹ˆ)
2. [ä¸ºä»€ä¹ˆéœ€è¦ExampleæŸ¥è¯¢](#2-ä¸ºä»€ä¹ˆéœ€è¦ExampleæŸ¥è¯¢)
3. [å¿«é€Ÿä¸Šæ‰‹ExampleæŸ¥è¯¢](#3-å¿«é€Ÿä¸Šæ‰‹ExampleæŸ¥è¯¢)
4. [ExampleMatcheråŒ¹é…å™¨è¯¦è§£](#4-ExampleMatcheråŒ¹é…å™¨è¯¦è§£)
5. [å®æˆ˜åº”ç”¨åœºæ™¯](#5-å®æˆ˜åº”ç”¨åœºæ™¯)
6. [æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹](#6-æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” ExampleæŸ¥è¯¢æ˜¯ä»€ä¹ˆ


### 1.1 ç”Ÿæ´»åŒ–ç†è§£


æƒ³è±¡ä½ åœ¨æ·˜å®æœç´¢å•†å“æ—¶çš„åœºæ™¯ï¼š

```
ä½ æƒ³æ‰¾ä¸€ä»¶è¡£æœï¼Œä½†ä¸ç¡®å®šå…·ä½“è¦ä»€ä¹ˆï¼š
- ğŸ¨ é¢œè‰²ï¼šå¯èƒ½æ˜¯çº¢è‰²ï¼Ÿä¸ç¡®å®š...
- ğŸ’° ä»·æ ¼ï¼š100-200ä¹‹é—´ï¼Ÿä¹Ÿå¯ä»¥ä¸é™...
- ğŸ“ å°ºç ï¼šMç ï¼Ÿæˆ–è€…Lç ä¹Ÿè¡Œ...

ä½ ä¸éœ€è¦æŠŠæ‰€æœ‰æ¡ä»¶éƒ½å†™æ¸…æ¥šï¼Œåªéœ€è¦ï¼š
"ç»™æˆ‘çœ‹çœ‹æœ‰çº¢è‰²çš„è¡£æœ"
"å†å¸®æˆ‘è¿‡æ»¤ä¸€ä¸‹100-200ä»·ä½çš„"
```

**ExampleæŸ¥è¯¢å°±æ˜¯è¿™æ ·ï¼** å®ƒè®©ä½ ç”¨ä¸€ä¸ª"æ ·ä¾‹å¯¹è±¡"æ¥æè¿°æŸ¥è¯¢æ¡ä»¶ï¼Œ**æœ‰å€¼çš„å­—æ®µå°±å½“æ¡ä»¶ï¼Œæ²¡å€¼çš„å°±å¿½ç•¥**ã€‚

### 1.2 æŠ€æœ¯å®šä¹‰


> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**
>
> ExampleæŸ¥è¯¢æ˜¯Spring Data JPAæä¾›çš„ä¸€ç§**åŸºäºå®ä¾‹çš„åŠ¨æ€æŸ¥è¯¢æ–¹å¼**ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªå®ä½“å¯¹è±¡ä½œä¸º"æŸ¥è¯¢æ¨¡æ¿"ï¼Œè‡ªåŠ¨æ ¹æ®å¯¹è±¡ä¸­éç©ºçš„å±æ€§å€¼ç”ŸæˆæŸ¥è¯¢æ¡ä»¶ã€‚

**ç»„æˆä¸‰è¦ç´ ï¼š**

```
ExampleæŸ¥è¯¢ = å®ä½“å¯¹è±¡(Probe) + åŒ¹é…å™¨(ExampleMatcher) + æ‰§è¡Œå™¨(Repository)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ExampleæŸ¥è¯¢æ¶æ„              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  1ï¸âƒ£ å‡†å¤‡æ ·ä¾‹å¯¹è±¡(Probe)              â”‚
â”‚     User user = new User();          â”‚
â”‚     user.setName("å¼ ä¸‰");             â”‚
â”‚                                      â”‚
â”‚  2ï¸âƒ£ é…ç½®åŒ¹é…è§„åˆ™(Matcher)            â”‚
â”‚     ExampleMatcher matcher = ...     â”‚
â”‚                                      â”‚
â”‚  3ï¸âƒ£ æ‰§è¡ŒæŸ¥è¯¢                         â”‚
â”‚     Example<User> example = ...      â”‚
â”‚     repository.findAll(example);     â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ä¸å…¶ä»–æŸ¥è¯¢æ–¹å¼å¯¹æ¯”


| ğŸ†š å¯¹æ¯”ç»´åº¦ | **ExampleæŸ¥è¯¢** | **JPQLæŸ¥è¯¢** | **CriteriaæŸ¥è¯¢** |
|------------|----------------|-------------|-----------------|
| å­¦ä¹ éš¾åº¦ | â­ æœ€ç®€å• | â­â­ ä¸­ç­‰ | â­â­â­ è¾ƒéš¾ |
| ä»£ç é‡ | âœ… å°‘ | âš ï¸ ä¸­ç­‰ | âŒ å¤š |
| åŠ¨æ€æŸ¥è¯¢ | âœ… å¤©ç„¶æ”¯æŒ | âš ï¸ éœ€è¦æ‹¼æ¥ | âœ… æ”¯æŒ |
| æŸ¥è¯¢çµæ´»æ€§ | âš ï¸ æœ‰é™åˆ¶ | âœ… çµæ´» | âœ… æœ€çµæ´» |
| é€‚ç”¨åœºæ™¯ | ç®€å•æ¡ä»¶ç»„åˆ | å¤æ‚æŸ¥è¯¢ | å¤æ‚åŠ¨æ€æŸ¥è¯¢ |

---

## 2. ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ExampleæŸ¥è¯¢


### 2.1 ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹


**åœºæ™¯ï¼šç”¨æˆ·æœç´¢é¡µé¢ï¼Œå¯ä»¥æŒ‰å§“åã€å¹´é¾„ã€åŸå¸‚æœç´¢**

âŒ **ä¼ ç»Ÿæ–¹æ³•1 - ä¸ºæ¯ç§ç»„åˆå†™æ–¹æ³•ï¼š**

```java
// æ–¹æ³•ä¼šçˆ†ç‚¸å¼å¢é•¿ï¼
findByName(String name);
findByAge(Integer age);
findByNameAndAge(String name, Integer age);
findByNameAndCity(String name, String city);
findByAgeAndCity(Integer age, String city);
findByNameAndAgeAndCity(...);  // ğŸ¤¯ å¤ªå¤šäº†ï¼
```

> âš ï¸ **é—®é¢˜ï¼š** 3ä¸ªæ¡ä»¶å°±éœ€è¦7ä¸ªæ–¹æ³•ï¼Œ5ä¸ªæ¡ä»¶éœ€è¦31ä¸ªæ–¹æ³•ï¼

âŒ **ä¼ ç»Ÿæ–¹æ³•2 - æ‰‹åŠ¨æ‹¼æ¥JPQLï¼š**

```java
String jpql = "SELECT u FROM User u WHERE 1=1";
if (name != null) jpql += " AND u.name = :name";
if (age != null) jpql += " AND u.age = :age";
// ğŸ˜° ä»£ç åˆè‡­åˆé•¿ï¼Œå®¹æ˜“å‡ºé”™
```

### 2.2 ExampleæŸ¥è¯¢çš„ä¼˜åŠ¿


âœ… **æ–¹æ³•3 - ä½¿ç”¨ExampleæŸ¥è¯¢ï¼š**

```java
// 1. å‡†å¤‡æ ·ä¾‹ï¼ˆåªè®¾ç½®æœ‰å€¼çš„æ¡ä»¶ï¼‰
User probe = new User();
if (name != null) probe.setName(name);
if (age != null) probe.setAge(age);
if (city != null) probe.setCity(city);

// 2. ä¸€è¡Œæå®šï¼
Example<User> example = Example.of(probe);
List<User> users = userRepository.findAll(example);
```

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

```
ğŸ¯ ä¼˜åŠ¿å¯¹æ¯”ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼š
æ¡ä»¶1    â†’  å†™1ä¸ªæ–¹æ³•
æ¡ä»¶2    â†’  å†™1ä¸ªæ–¹æ³•  
æ¡ä»¶1+2  â†’  å†å†™1ä¸ªæ–¹æ³•
...      â†’  æŒ‡æ•°çº§å¢é•¿ ğŸ’¥

Exampleæ–¹å¼ï¼š
ä»»æ„æ¡ä»¶ç»„åˆ  â†’  1ä¸ªæ–¹æ³•æå®š âœ…
```

---

## 3. ğŸš€ å¿«é€Ÿä¸Šæ‰‹ExampleæŸ¥è¯¢


### 3.1 å‡†å¤‡å·¥ä½œ


**Step 1ï¸âƒ£ï¼šRepositoryæ¥å£ç»§æ‰¿æ­£ç¡®çš„æ¥å£**

```java
// å¿…é¡»ç»§æ‰¿ QueryByExampleExecutor
public interface UserRepository extends JpaRepository<User, Long>, 
                                       QueryByExampleExecutor<User> {
    // ä¸éœ€è¦å†™ä»»ä½•æ–¹æ³•ï¼
}
```

> ğŸ’¡ **æç¤ºï¼š** `QueryByExampleExecutor`æä¾›äº†ExampleæŸ¥è¯¢çš„æ‰€æœ‰æ–¹æ³•

**å¯ç”¨çš„æŸ¥è¯¢æ–¹æ³•ï¼š**

| æ–¹æ³•å | è¿”å›ç±»å‹ | è¯´æ˜ |
|--------|---------|------|
| `findOne(Example)` | `Optional<T>` | æŸ¥è¯¢å•ä¸ªç»“æœ |
| `findAll(Example)` | `List<T>` | æŸ¥è¯¢æ‰€æœ‰ç»“æœ |
| `findAll(Example, Sort)` | `List<T>` | æŸ¥è¯¢å¹¶æ’åº |
| `findAll(Example, Pageable)` | `Page<T>` | åˆ†é¡µæŸ¥è¯¢ |
| `count(Example)` | `long` | ç»Ÿè®¡æ•°é‡ |
| `exists(Example)` | `boolean` | åˆ¤æ–­æ˜¯å¦å­˜åœ¨ |

### 3.2 åŸºç¡€ç”¨æ³• - ç²¾ç¡®åŒ¹é…


**å®ä½“ç±»ï¼š**

```java
@Entity
public class User {
    @Id @GeneratedValue
    private Long id;
    private String name;
    private Integer age;
    private String city;
    // getter/setter...
}
```

**ç¤ºä¾‹1ï¼šå•æ¡ä»¶æŸ¥è¯¢**

```java
// æŸ¥è¯¢å§“åä¸º"å¼ ä¸‰"çš„ç”¨æˆ·
User probe = new User();
probe.setName("å¼ ä¸‰");

Example<User> example = Example.of(probe);
List<User> users = userRepository.findAll(example);

// ğŸ’¡ ç­‰ä»·SQL: SELECT * FROM user WHERE name = 'å¼ ä¸‰'
```

**ç¤ºä¾‹2ï¼šå¤šæ¡ä»¶æŸ¥è¯¢**

```java
// æŸ¥è¯¢å§“åä¸º"å¼ ä¸‰"ä¸”å¹´é¾„ä¸º25çš„ç”¨æˆ·
User probe = new User();
probe.setName("å¼ ä¸‰");
probe.setAge(25);

Example<User> example = Example.of(probe);
List<User> users = userRepository.findAll(example);

// ğŸ’¡ ç­‰ä»·SQL: SELECT * FROM user WHERE name = 'å¼ ä¸‰' AND age = 25
```

### 3.3 åŠ¨æ€æ¡ä»¶æŸ¥è¯¢


**åœºæ™¯ï¼šæ ¹æ®å‰ç«¯ä¼ å…¥çš„å‚æ•°åŠ¨æ€æŸ¥è¯¢**

```java
@GetMapping("/search")
public List<User> search(String name, Integer age, String city) {
    
    // 1. åˆ›å»ºæ¢é’ˆå¯¹è±¡
    User probe = new User();
    
    // 2. åªè®¾ç½®éç©ºçš„æ¡ä»¶ï¼ˆè¿™æ˜¯å…³é”®ï¼ï¼‰
    if (name != null && !name.isEmpty()) {
        probe.setName(name);
    }
    if (age != null) {
        probe.setAge(age);
    }
    if (city != null && !city.isEmpty()) {
        probe.setCity(city);
    }
    
    // 3. æ‰§è¡ŒæŸ¥è¯¢
    return userRepository.findAll(Example.of(probe));
}
```

**æ‰§è¡Œæ•ˆæœæ¼”ç¤ºï¼š**

```
ğŸ“Š ä¸åŒå‚æ•°ç»„åˆçš„æŸ¥è¯¢æ•ˆæœï¼š

åœºæ™¯1ï¼šname="å¼ ä¸‰"
ç”ŸæˆSQL: WHERE name = 'å¼ ä¸‰'

åœºæ™¯2ï¼šname="å¼ ä¸‰", age=25  
ç”ŸæˆSQL: WHERE name = 'å¼ ä¸‰' AND age = 25

åœºæ™¯3ï¼šage=25, city="åŒ—äº¬"
ç”ŸæˆSQL: WHERE age = 25 AND city = 'åŒ—äº¬'

åœºæ™¯4ï¼šæ‰€æœ‰å‚æ•°éƒ½ä¸ºç©º
ç”ŸæˆSQL: æŸ¥è¯¢å…¨éƒ¨ï¼ˆæ— WHEREæ¡ä»¶ï¼‰
```

---

## 4. ğŸ”§ ExampleMatcheråŒ¹é…å™¨è¯¦è§£


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦åŒ¹é…å™¨


é»˜è®¤çš„ExampleæŸ¥è¯¢åªèƒ½**ç²¾ç¡®åŒ¹é…**ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­ç»å¸¸éœ€è¦ï¼š

```
âŒ é»˜è®¤æ–¹å¼çš„å±€é™ï¼š
probe.setName("å¼ ä¸‰");  â†’  åªèƒ½åŒ¹é… name = 'å¼ ä¸‰'

âœ… æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼š
- æ¨¡ç³ŠæŸ¥è¯¢ï¼šname LIKE '%å¼ ä¸‰%'  
- å¿½ç•¥å¤§å°å†™ï¼šUPPER(name) = 'ZHANGSAN'
- å¿½ç•¥æŸäº›å­—æ®µï¼šä¸è¦æŠŠidä½œä¸ºæ¡ä»¶
- è‡ªå®šä¹‰åŒ¹é…ï¼šage > 18
```

**ExampleMatcherå°±æ˜¯ç”¨æ¥è§£å†³è¿™äº›é—®é¢˜çš„ï¼**

### 4.2 åˆ›å»ºåŒ¹é…å™¨çš„æ–¹å¼


**æ–¹å¼1ï¼šé™æ€æ–¹æ³•åˆ›å»ºï¼ˆå¸¸ç”¨ï¼‰**

```java
// åŒ¹é…æ‰€æœ‰å­—æ®µ
ExampleMatcher matcher = ExampleMatcher.matching();

// åŒ¹é…ä»»æ„ä¸€ä¸ªæ¡ä»¶å³å¯ï¼ˆORå…³ç³»ï¼‰
ExampleMatcher matcher = ExampleMatcher.matchingAny();

// åŒ¹é…æ‰€æœ‰æ¡ä»¶ï¼ˆANDå…³ç³»ï¼Œé»˜è®¤ï¼‰
ExampleMatcher matcher = ExampleMatcher.matchingAll();
```

**æ–¹å¼2ï¼šé“¾å¼é…ç½®ï¼ˆæ¨èï¼‰**

```java
ExampleMatcher matcher = ExampleMatcher.matching()
    .withIgnoreCase()              // å¿½ç•¥å¤§å°å†™
    .withStringMatcher(...)        // å­—ç¬¦ä¸²åŒ¹é…ç­–ç•¥
    .withIgnorePaths("id");        // å¿½ç•¥æŸäº›å­—æ®µ
```

### 4.3 å­—ç¬¦ä¸²åŒ¹é…ç­–ç•¥


**6ç§åŒ¹é…ç­–ç•¥å¯¹æ¯”ï¼š**

| ç­–ç•¥ | æšä¸¾å€¼ | æ•ˆæœ | SQLç¤ºä¾‹ |
|------|-------|------|---------|
| **é»˜è®¤** | `DEFAULT` | ç²¾ç¡®åŒ¹é… | `name = 'å¼ ä¸‰'` |
| **å®Œå…¨åŒ¹é…** | `EXACT` | ç²¾ç¡®åŒ¹é… | `name = 'å¼ ä¸‰'` |
| **å¼€å¤´åŒ¹é…** | `STARTING` | å‰ç¼€åŒ¹é… | `name LIKE 'å¼ ä¸‰%'` |
| **ç»“å°¾åŒ¹é…** | `ENDING` | åç¼€åŒ¹é… | `name LIKE '%å¼ ä¸‰'` |
| **åŒ…å«** | `CONTAINING` | æ¨¡ç³ŠåŒ¹é… | `name LIKE '%å¼ ä¸‰%'` |
| **æ­£åˆ™** | `REGEX` | æ­£åˆ™è¡¨è¾¾å¼ | `name REGEXP '...'` |

**ä»£ç ç¤ºä¾‹ï¼š**

```java
// ç¤ºä¾‹1ï¼šæ¨¡ç³ŠæŸ¥è¯¢ï¼ˆæœ€å¸¸ç”¨ï¼‰
User probe = new User();
probe.setName("å¼ ");

ExampleMatcher matcher = ExampleMatcher.matching()
    .withMatcher("name", match -> match.contains()); // LIKE '%å¼ %'

Example<User> example = Example.of(probe, matcher);

// ç¤ºä¾‹2ï¼šå‰ç¼€åŒ¹é…
ExampleMatcher matcher = ExampleMatcher.matching()
    .withMatcher("name", match -> match.startsWith()); // LIKE 'å¼ %'

// ç¤ºä¾‹3ï¼šå¿½ç•¥å¤§å°å†™çš„åŒ…å«æŸ¥è¯¢
ExampleMatcher matcher = ExampleMatcher.matching()
    .withMatcher("name", match -> match
        .contains()           // åŒ…å«
        .ignoreCase());       // å¿½ç•¥å¤§å°å†™
// SQL: UPPER(name) LIKE UPPER('%zhang%')
```

### 4.4 å¿½ç•¥å±æ€§é…ç½®


**åœºæ™¯ï¼šæŸäº›å­—æ®µä¸æƒ³ä½œä¸ºæŸ¥è¯¢æ¡ä»¶**

```java
User probe = new User();
probe.setId(1L);        // ä¸æƒ³ç”¨idæŸ¥è¯¢
probe.setName("å¼ ä¸‰");
probe.setAge(null);     // nullä¼šè‡ªåŠ¨å¿½ç•¥

// æ–¹å¼1ï¼šå¿½ç•¥æŒ‡å®šå­—æ®µ
ExampleMatcher matcher = ExampleMatcher.matching()
    .withIgnorePaths("id");  // å¿½ç•¥idå­—æ®µ

// æ–¹å¼2ï¼šå¿½ç•¥å¤šä¸ªå­—æ®µ  
ExampleMatcher matcher = ExampleMatcher.matching()
    .withIgnorePaths("id", "createTime", "updateTime");

// æ–¹å¼3ï¼šå¿½ç•¥nullå€¼ï¼ˆé»˜è®¤å°±æ˜¯è¿™æ ·ï¼‰
ExampleMatcher matcher = ExampleMatcher.matching()
    .withIncludeNullValues();  // åŒ…å«nullå€¼ï¼ˆå°‘ç”¨ï¼‰
```

**å¿½ç•¥ç­–ç•¥å¯¹æ¯”ï¼š**

```
é»˜è®¤è¡Œä¸ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User probe = new User();        â”‚
â”‚ probe.setName("å¼ ä¸‰");           â”‚
â”‚ probe.setAge(null);  â† è‡ªåŠ¨å¿½ç•¥  â”‚
â”‚ probe.setCity(null); â† è‡ªåŠ¨å¿½ç•¥  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç”ŸæˆSQL: WHERE name = 'å¼ ä¸‰'

æ‰‹åŠ¨å¿½ç•¥ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ probe.setId(1L);                â”‚
â”‚ probe.setName("å¼ ä¸‰");           â”‚
â”‚ .withIgnorePaths("id") â† å¼ºåˆ¶å¿½ç•¥â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç”ŸæˆSQL: WHERE name = 'å¼ ä¸‰' (idè¢«å¿½ç•¥)
```

### 4.5 å®Œæ•´é…ç½®ç¤ºä¾‹


**ç»¼åˆåº”ç”¨ï¼šç”¨æˆ·æœç´¢åŠŸèƒ½**

```java
@Service
public class UserSearchService {
    
    @Autowired
    private UserRepository userRepository;
    
    public List<User> searchUsers(String keyword, Integer minAge, String city) {
        
        // 1. æ„å»ºæ¢é’ˆå¯¹è±¡
        User probe = new User();
        if (keyword != null) probe.setName(keyword);
        if (minAge != null) probe.setAge(minAge);
        if (city != null) probe.setCity(city);
        
        // 2. é…ç½®åŒ¹é…å™¨
        ExampleMatcher matcher = ExampleMatcher.matching()
            // å…¨å±€ï¼šå¿½ç•¥å¤§å°å†™
            .withIgnoreCase()
            // å…¨å±€ï¼šå¿½ç•¥nullå€¼
            .withIgnoreNullValues()
            // å§“åï¼šæ¨¡ç³ŠåŒ¹é…
            .withMatcher("name", match -> match.contains())
            // åŸå¸‚ï¼šç²¾ç¡®åŒ¹é…
            .withMatcher("city", match -> match.exact())
            // å¿½ç•¥IDå’Œæ—¶é—´å­—æ®µ
            .withIgnorePaths("id", "createTime", "updateTime");
        
        // 3. æ‰§è¡ŒæŸ¥è¯¢
        Example<User> example = Example.of(probe, matcher);
        return userRepository.findAll(example);
    }
}
```

**æ‰§è¡Œæ•ˆæœï¼š**

```
ğŸ“Š å‚æ•°ä¼ å…¥æ•ˆæœæ¼”ç¤ºï¼š

è¾“å…¥: keyword="å¼ ", city="åŒ—äº¬"
SQL: SELECT * FROM user 
     WHERE UPPER(name) LIKE UPPER('%å¼ %') 
     AND city = 'åŒ—äº¬'

è¾“å…¥: keyword="Li", minAge=25
SQL: SELECT * FROM user
     WHERE UPPER(name) LIKE UPPER('%Li%')
     AND age = 25
```

---

## 5. ğŸ’¼ å®æˆ˜åº”ç”¨åœºæ™¯


### 5.1 åœºæ™¯1ï¼šå•†å“æœç´¢


**éœ€æ±‚ï¼šç”µå•†å¹³å°çš„å•†å“æœç´¢é¡µé¢**

```java
@RestController
@RequestMapping("/products")
public class ProductController {
    
    @Autowired
    private ProductRepository productRepository;
    
    @GetMapping("/search")
    public Page<Product> search(
            String name,           // å•†å“åç§°
            String category,       // åˆ†ç±»
            BigDecimal minPrice,   // æœ€ä½ä»·æ ¼
            BigDecimal maxPrice,   // æœ€é«˜ä»·æ ¼
            Pageable pageable) {
        
        Product probe = new Product();
        if (name != null) probe.setName(name);
        if (category != null) probe.setCategory(category);
        
        ExampleMatcher matcher = ExampleMatcher.matching()
            .withMatcher("name", m -> m.contains().ignoreCase())
            .withMatcher("category", m -> m.exact())
            .withIgnorePaths("price", "stock", "createTime");
        
        // ğŸ’¡ æ³¨æ„ï¼šä»·æ ¼åŒºé—´æŸ¥è¯¢Exampleæ— æ³•å®ç°ï¼Œéœ€è¦ç»“åˆSpecification
        return productRepository.findAll(Example.of(probe, matcher), pageable);
    }
}
```

**é€‚ç”¨æ€§åˆ†æï¼š**

```
âœ… é€‚åˆExampleçš„æ¡ä»¶ï¼š
- å•†å“åç§°æ¨¡ç³ŠæŸ¥è¯¢
- åˆ†ç±»ç²¾ç¡®åŒ¹é…
- å“ç‰Œç²¾ç¡®åŒ¹é…

âŒ ä¸é€‚åˆExampleçš„æ¡ä»¶ï¼š
- ä»·æ ¼åŒºé—´ï¼ˆminPrice ~ maxPriceï¼‰
- æ—¥æœŸèŒƒå›´ï¼ˆstartDate ~ endDateï¼‰  
- å¤§äº/å°äºåˆ¤æ–­ï¼ˆage > 18ï¼‰

ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼šExample + Specificationç»„åˆä½¿ç”¨
```

### 5.2 åœºæ™¯2ï¼šç”¨æˆ·ç®¡ç†åˆ—è¡¨


**éœ€æ±‚ï¼šåå°ç®¡ç†ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨ç­›é€‰**

```java
@Service
public class UserManageService {
    
    public Page<User> getUserList(UserQueryDTO dto, Pageable pageable) {
        
        // DTOè½¬Probe
        User probe = new User();
        probe.setUsername(dto.getUsername());
        probe.setEmail(dto.getEmail());
        probe.setStatus(dto.getStatus());
        probe.setRole(dto.getRole());
        
        // é…ç½®åŒ¹é…è§„åˆ™
        ExampleMatcher matcher = ExampleMatcher.matching()
            // ç”¨æˆ·åï¼šåŒ…å«æŸ¥è¯¢
            .withMatcher("username", m -> m.contains())
            // é‚®ç®±ï¼šå¼€å¤´åŒ¹é…
            .withMatcher("email", m -> m.startsWith())
            // çŠ¶æ€/è§’è‰²ï¼šç²¾ç¡®åŒ¹é…
            .withMatcher("status", m -> m.exact())
            .withMatcher("role", m -> m.exact())
            // å¿½ç•¥è‡ªå¢ID
            .withIgnorePaths("id");
        
        return userRepository.findAll(Example.of(probe, matcher), pageable);
    }
}
```

### 5.3 åœºæ™¯3ï¼šæ—¥å¿—æŸ¥è¯¢


**éœ€æ±‚ï¼šç³»ç»Ÿæ—¥å¿—çš„å¤šæ¡ä»¶ç­›é€‰**

```java
public List<SystemLog> queryLogs(LogSearchDTO search) {
    
    SystemLog probe = new SystemLog();
    probe.setUsername(search.getUsername());
    probe.setModule(search.getModule());
    probe.setOperation(search.getOperation());
    
    ExampleMatcher matcher = ExampleMatcher.matching()
        // ç”¨æˆ·åï¼šç²¾ç¡®åŒ¹é…
        .withMatcher("username", ExampleMatcher.GenericPropertyMatchers.exact())
        // æ¨¡å—ï¼šç²¾ç¡®åŒ¹é…
        .withMatcher("module", ExampleMatcher.GenericPropertyMatchers.exact())
        // æ“ä½œï¼šåŒ…å«æŸ¥è¯¢
        .withMatcher("operation", ExampleMatcher.GenericPropertyMatchers.contains())
        // å¿½ç•¥æ—¶é—´å­—æ®µï¼ˆç”¨å…¶ä»–æ–¹å¼å¤„ç†ï¼‰
        .withIgnorePaths("createTime", "id");
    
    Example<SystemLog> example = Example.of(probe, matcher);
    
    // æŒ‰æ—¶é—´å€’åº
    Sort sort = Sort.by(Sort.Direction.DESC, "createTime");
    return logRepository.findAll(example, sort);
}
```

---

## 6. ğŸ“‹ æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹


### 6.1 ExampleæŸ¥è¯¢çš„å±€é™æ€§


> âš ï¸ **é‡è¦æç¤ºï¼šExampleæŸ¥è¯¢ä¸æ˜¯ä¸‡èƒ½çš„ï¼**

**æ— æ³•å®ç°çš„æŸ¥è¯¢ï¼š**

| âŒ æ— æ³•æ”¯æŒ | ç¤ºä¾‹ | æ›¿ä»£æ–¹æ¡ˆ |
|-----------|------|---------|
| **èŒƒå›´æŸ¥è¯¢** | `age BETWEEN 18 AND 30` | Specification |
| **å¤§äº/å°äº** | `price > 100` | @Query |
| **ORæ¡ä»¶** | `name='å¼ ä¸‰' OR age=25` | Specification |
| **INæŸ¥è¯¢** | `city IN ('åŒ—äº¬','ä¸Šæµ·')` | @Query |
| **æ’åº** | `ORDER BY age DESC` | `Sort`å‚æ•° |
| **åˆ†ç»„** | `GROUP BY category` | @Query |
| **èšåˆå‡½æ•°** | `COUNT(*), SUM(price)` | @Query |

**å¯¹æ¯”ç¤ºä¾‹ï¼š**

```java
// âŒ Exampleæ— æ³•å®ç°çš„æŸ¥è¯¢
// éœ€æ±‚ï¼šæŸ¥è¯¢18-30å²ä¹‹é—´çš„ç”¨æˆ·
User probe = new User();
probe.setAge(18);  // åªèƒ½è®¾ç½®ä¸€ä¸ªå€¼ï¼Œæ— æ³•è¡¨ç¤ºèŒƒå›´

// âœ… æ­£ç¡®åšæ³•ï¼šä½¿ç”¨Specification
Specification<User> spec = (root, query, cb) -> {
    return cb.between(root.get("age"), 18, 30);
};
```

### 6.2 ä½¿ç”¨å»ºè®®


**âœ… é€‚åˆç”¨Exampleçš„åœºæ™¯ï¼š**

```
1ï¸âƒ£ ç®€å•çš„ç²¾ç¡®åŒ¹é…
   WHERE name = 'å¼ ä¸‰' AND city = 'åŒ—äº¬'

2ï¸âƒ£ å­—ç¬¦ä¸²æ¨¡ç³ŠæŸ¥è¯¢  
   WHERE name LIKE '%å¼ %'

3ï¸âƒ£ æ¡ä»¶æ•°é‡ä¸ç¡®å®šçš„åŠ¨æ€æŸ¥è¯¢
   ç”¨æˆ·å¯èƒ½è¾“å…¥1ä¸ªæ¡ä»¶ï¼Œä¹Ÿå¯èƒ½è¾“å…¥5ä¸ª

4ï¸âƒ£ å¿«é€ŸåŸå‹å¼€å‘
   ä¸æƒ³å†™å¤ªå¤šRepositoryæ–¹æ³•
```

**âŒ ä¸é€‚åˆç”¨Exampleçš„åœºæ™¯ï¼š**

```
1ï¸âƒ£ å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
   å¤šè¡¨å…³è”ã€å­æŸ¥è¯¢ã€èšåˆå‡½æ•°

2ï¸âƒ£ èŒƒå›´æ¡ä»¶æŸ¥è¯¢
   æ—¥æœŸåŒºé—´ã€ä»·æ ¼åŒºé—´ã€æ•°å€¼èŒƒå›´

3ï¸âƒ£ ORæ¡ä»¶ç»„åˆ
   name='å¼ ä¸‰' OR age > 18

4ï¸âƒ£ æ€§èƒ½è¦æ±‚æé«˜çš„æŸ¥è¯¢
   Exampleä¼šå¤šä¸€å±‚å¯¹è±¡è½¬æ¢å¼€é”€
```

### 6.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**æŠ€å·§1ï¼šåˆç†è®¾ç½®å¿½ç•¥å­—æ®µ**

```java
// âŒ ä¸å¥½çš„åšæ³•ï¼šè®©Exampleå¤„ç†æ‰€æœ‰å­—æ®µ
User probe = new User();
probe.setCreateTime(new Date());  // æ—¶é—´å­—æ®µä¸åº”è¯¥ç”¨Example
probe.setUpdateTime(new Date());

// âœ… å¥½çš„åšæ³•ï¼šæ˜ç¡®å¿½ç•¥ä¸éœ€è¦çš„å­—æ®µ
ExampleMatcher matcher = ExampleMatcher.matching()
    .withIgnorePaths("id", "createTime", "updateTime", "version");
```

**æŠ€å·§2ï¼šé¿å…æ¨¡ç³ŠæŸ¥è¯¢æ»¥ç”¨**

```java
// âŒ æ€§èƒ½å·®ï¼šæ‰€æœ‰å­—æ®µéƒ½æ¨¡ç³ŠæŸ¥è¯¢
ExampleMatcher matcher = ExampleMatcher.matching()
    .withStringMatcher(ExampleMatcher.StringMatcher.CONTAINING);

// âœ… æ€§èƒ½å¥½ï¼šåªå¯¹éœ€è¦çš„å­—æ®µæ¨¡ç³ŠæŸ¥è¯¢
ExampleMatcher matcher = ExampleMatcher.matching()
    .withMatcher("name", m -> m.contains())
    .withMatcher("email", m -> m.exact());  // é‚®ç®±ç²¾ç¡®åŒ¹é…æ›´å¿«
```

**æŠ€å·§3ï¼šåˆç†ä½¿ç”¨åˆ†é¡µ**

```java
// âœ… å¤§æ•°æ®é‡å¿…é¡»åˆ†é¡µ
Pageable pageable = PageRequest.of(0, 20);
Page<User> page = userRepository.findAll(example, pageable);

// âœ… é…åˆæ’åºä½¿ç”¨
Pageable pageable = PageRequest.of(0, 20, 
    Sort.by(Sort.Direction.DESC, "createTime"));
```

### 6.4 å¸¸è§é”™è¯¯ä¸è§£å†³


**é”™è¯¯1ï¼šå¿˜è®°ç»§æ‰¿QueryByExampleExecutor**

```java
// âŒ é”™è¯¯å†™æ³•
public interface UserRepository extends JpaRepository<User, Long> {
    // æ²¡æœ‰ExampleæŸ¥è¯¢æ–¹æ³•ï¼
}

// âœ… æ­£ç¡®å†™æ³•  
public interface UserRepository extends JpaRepository<User, Long>,
                                       QueryByExampleExecutor<User> {
    // è‡ªåŠ¨æ‹¥æœ‰findAll(Example)ç­‰æ–¹æ³•
}
```

**é”™è¯¯2ï¼šè¯¯ä»¥ä¸ºnullå€¼ä¼šä½œä¸ºæ¡ä»¶**

```java
User probe = new User();
probe.setName(null);  // â† nullä¼šè¢«è‡ªåŠ¨å¿½ç•¥ï¼
probe.setAge(25);

// ç”ŸæˆSQL: WHERE age = 25  (nameä¸ä¼šå‡ºç°åœ¨æ¡ä»¶ä¸­)
```

**é”™è¯¯3ï¼šå­—ç¬¦ä¸²åŒ¹é…å™¨é…ç½®é”™è¯¯**

```java
// âŒ é”™è¯¯ï¼šå…¨å±€é…ç½®å½±å“æ‰€æœ‰å­—æ®µ
ExampleMatcher matcher = ExampleMatcher.matching()
    .withStringMatcher(StringMatcher.CONTAINING);  // æ‰€æœ‰å­—æ®µéƒ½LIKE

// âœ… æ­£ç¡®ï¼šé’ˆå¯¹ç‰¹å®šå­—æ®µé…ç½®
ExampleMatcher matcher = ExampleMatcher.matching()
    .withMatcher("name", m -> m.contains())
    .withMatcher("email", m -> m.exact());
```

---

## 7. ğŸ“š æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ¦‚å¿µ


```
ğŸ¯ ExampleæŸ¥è¯¢ä¸‰è¦ç´ ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ Probeï¼ˆæ¢é’ˆå¯¹è±¡ï¼‰                â”‚
â”‚    â†“ è®¾ç½®æŸ¥è¯¢æ¡ä»¶çš„æ ·ä¾‹å®ä½“          â”‚
â”‚                                     â”‚
â”‚ 2ï¸âƒ£ ExampleMatcherï¼ˆåŒ¹é…å™¨ï¼‰         â”‚
â”‚    â†“ é…ç½®å¦‚ä½•åŒ¹é…ï¼ˆæ¨¡ç³Š/ç²¾ç¡®/å¿½ç•¥ï¼‰   â”‚
â”‚                                     â”‚
â”‚ 3ï¸âƒ£ QueryByExampleExecutorï¼ˆæ‰§è¡Œå™¨ï¼‰ â”‚
â”‚    â†“ Repositoryæ¥å£ï¼Œæ‰§è¡ŒæŸ¥è¯¢        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å…³é”®çŸ¥è¯†ç‚¹


| çŸ¥è¯†ç‚¹ | æ ¸å¿ƒå†…å®¹ | è®°å¿†æŠ€å·§ |
|--------|---------|---------|
| **åŸºæœ¬åŸç†** | æ ¹æ®å¯¹è±¡éç©ºå±æ€§ç”ŸæˆæŸ¥è¯¢æ¡ä»¶ | æœ‰å€¼å°±æŸ¥ï¼Œæ— å€¼å°±å¿½ç•¥ |
| **åŒ¹é…ç­–ç•¥** | 6ç§å­—ç¬¦ä¸²åŒ¹é…æ–¹å¼ | ç²¾ç¡®/å¼€å¤´/ç»“å°¾/åŒ…å«/æ­£åˆ™ |
| **å¿½ç•¥é…ç½®** | `withIgnorePaths()` | IDå’Œæ—¶é—´å­—æ®µå¸¸å¿½ç•¥ |
| **é€‚ç”¨åœºæ™¯** | ç®€å•åŠ¨æ€æŸ¥è¯¢ | æ¡ä»¶ä¸ç¡®å®šæ—¶é¦–é€‰ |
| **å±€é™æ€§** | æ— æ³•èŒƒå›´/OR/èšåˆæŸ¥è¯¢ | å¤æ‚æŸ¥è¯¢ç”¨Specification |

### 7.3 å®æˆ˜æ£€æŸ¥æ¸…å•


```
ğŸ¯ å¼€å‘å‰æ£€æŸ¥ï¼š

â–¡ Repositoryæ˜¯å¦ç»§æ‰¿QueryByExampleExecutorï¼Ÿ
â–¡ æŸ¥è¯¢æ¡ä»¶æ˜¯å¦éƒ½æ˜¯ç®€å•çš„ç­‰å€¼åˆ¤æ–­ï¼Ÿ
â–¡ æ˜¯å¦éœ€è¦èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚æœéœ€è¦ï¼Œç”¨Specificationï¼‰ï¼Ÿ
â–¡ å­—ç¬¦ä¸²å­—æ®µæ˜¯å¦éœ€è¦æ¨¡ç³ŠæŸ¥è¯¢ï¼Ÿ
â–¡ æ˜¯å¦é…ç½®äº†å¿½ç•¥IDç­‰æ— å…³å­—æ®µï¼Ÿ

ğŸ¯ ä»£ç ç¼–å†™ï¼š

â–¡ Probeå¯¹è±¡åªè®¾ç½®æœ‰å€¼çš„å­—æ®µ
â–¡ ExampleMatcheré…ç½®ç¬¦åˆä¸šåŠ¡éœ€æ±‚
â–¡ å¤§æ•°æ®é‡æ˜¯å¦åŠ äº†åˆ†é¡µï¼Ÿ
â–¡ æ˜¯å¦è€ƒè™‘äº†æ€§èƒ½ä¼˜åŒ–ï¼Ÿ

ğŸ¯ æµ‹è¯•éªŒè¯ï¼š

â–¡ æ‰“å°SQLç¡®è®¤æ¡ä»¶æ­£ç¡®
â–¡ æµ‹è¯•å„ç§å‚æ•°ç»„åˆçš„æŸ¥è¯¢æ•ˆæœ
â–¡ éªŒè¯nullå€¼æ˜¯å¦æ­£ç¡®å¿½ç•¥
```

### 7.4 è®°å¿†å£è¯€


> ğŸ§  **ExampleæŸ¥è¯¢å£è¯€**
>
> *æ¢é’ˆå¯¹è±¡è®¾æ¡ä»¶ï¼Œæœ‰å€¼æ‰æŸ¥æ— å€¼å…*  
> *åŒ¹é…å™¨æ¥å®šè§„åˆ™ï¼Œæ¨¡ç³Šç²¾ç¡®ä»»ä½ é€‰*  
> *ç®€å•æŸ¥è¯¢å®ƒæœ€å¼ºï¼Œå¤æ‚æ¡ä»¶åˆ«å‹‰å¼º*  
> *åŠ¨æ€ç­›é€‰ç¬¬ä¸€é€‰ï¼Œä»£ç ç®€æ´åˆå¥½çœ‹*

### 7.5 å­¦ä¹ è·¯å¾„å»ºè®®


```
å­¦ä¹ è¿›åº¦å»ºè®®ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… ç¬¬1å¤©ï¼šç†è§£ExampleæŸ¥è¯¢åŸç†        â”‚
â”‚          æŒæ¡åŸºæœ¬çš„ç²¾ç¡®åŒ¹é…           â”‚
â”‚                                      â”‚
â”‚ ğŸ“… ç¬¬2å¤©ï¼šå­¦ä¹ ExampleMatcheré…ç½®     â”‚
â”‚          å®ç°æ¨¡ç³ŠæŸ¥è¯¢å’Œå¿½ç•¥å­—æ®µ       â”‚
â”‚                                      â”‚
â”‚ ğŸ“… ç¬¬3å¤©ï¼šç»“åˆå®é™…é¡¹ç›®ç»ƒä¹            â”‚
â”‚          å®Œæˆç”¨æˆ·æœç´¢ã€å•†å“ç­›é€‰ç­‰åŠŸèƒ½ â”‚
â”‚                                      â”‚
â”‚ ğŸ“… ç¬¬4å¤©ï¼šäº†è§£å±€é™æ€§                 â”‚
â”‚          å­¦ä¹ ä½•æ—¶è¯¥ç”¨Specification    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ å†™åœ¨æœ€å


ExampleæŸ¥è¯¢æ˜¯Spring Data JPAæä¾›çš„ä¸€ä¸ª**ç®€å•è€Œå¼ºå¤§**çš„åŠ¨æ€æŸ¥è¯¢å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆ**æ¡ä»¶ä¸ç¡®å®šçš„æœç´¢åœºæ™¯**ã€‚

**é€‚åˆåˆå­¦è€…çš„åŸå› ï¼š**
- âœ… å­¦ä¹ æ›²çº¿å¹³ç¼“ï¼Œæ— éœ€å¤æ‚çš„SQLçŸ¥è¯†
- âœ… ä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤
- âœ… å¤©ç„¶æ”¯æŒåŠ¨æ€æŸ¥è¯¢ï¼Œä¸éœ€è¦æ‹¼æ¥å­—ç¬¦ä¸²

**è¿›é˜¶å»ºè®®ï¼š**
- ğŸ¯ æŒæ¡Exampleåï¼Œå­¦ä¹ Specificationå¤„ç†å¤æ‚æŸ¥è¯¢
- ğŸ¯ äº†è§£QueryDSLï¼Œå®ç°ç±»å‹å®‰å…¨çš„åŠ¨æ€æŸ¥è¯¢
- ğŸ¯ ç»“åˆå®é™…ä¸šåŠ¡ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æŸ¥è¯¢æ–¹å¼

> ğŸ“š **ä¸‹ä¸€æ­¥å­¦ä¹ **ï¼š[Specificationè§„æ ¼æŸ¥è¯¢] - è§£é”æ›´å¼ºå¤§çš„åŠ¨æ€æŸ¥è¯¢èƒ½åŠ›ï¼