---
title: 49ã€åˆ†é¡µä¸æ’åºPageable
---
## ğŸ“š ç›®å½•

1. [åˆ†é¡µä¸æ’åºåŸºç¡€æ¦‚å¿µ](#1-åˆ†é¡µä¸æ’åºåŸºç¡€æ¦‚å¿µ)
2. [Pageableåˆ†é¡µå‚æ•°è¯¦è§£](#2-Pageableåˆ†é¡µå‚æ•°è¯¦è§£)
3. [Pageåˆ†é¡µç»“æœå¤„ç†](#3-Pageåˆ†é¡µç»“æœå¤„ç†)
4. [Sortæ’åºå‚æ•°åº”ç”¨](#4-Sortæ’åºå‚æ•°åº”ç”¨)
5. [åˆ†é¡µæ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#5-åˆ†é¡µæ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“– åˆ†é¡µä¸æ’åºåŸºç¡€æ¦‚å¿µ


### 1.1 ä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µ


**ç°å®åœºæ™¯ç†è§£**
```
æƒ³è±¡ä½ åœ¨ç½‘ä¸Šè´­ç‰©ï¼š
âŒ ä¸åˆ†é¡µï¼šä¸€æ¬¡åŠ è½½10000ä¸ªå•†å“ â†’ é¡µé¢å¡æ­»ï¼Œç­‰å¾…å¾ˆä¹…
âœ… åˆ†é¡µåï¼šæ¯é¡µæ˜¾ç¤º20ä¸ªå•†å“ â†’ å¿«é€ŸåŠ è½½ï¼Œä½“éªŒæµç•…

æ•°æ®åº“å±‚é¢ï¼š
âŒ æŸ¥è¯¢å…¨éƒ¨ï¼šSELECT * FROM products (10ä¸‡æ¡)
   â†’ å†…å­˜å ç”¨å¤§ï¼Œä¼ è¾“æ…¢ï¼Œç”¨æˆ·ç­‰å¾…é•¿
âœ… åˆ†é¡µæŸ¥è¯¢ï¼šSELECT * FROM products LIMIT 20 OFFSET 0
   â†’ åªå–éœ€è¦çš„æ•°æ®ï¼Œé€Ÿåº¦å¿«ï¼Œèµ„æºçœ
```

**åˆ†é¡µçš„æœ¬è´¨ä½œç”¨**
- **å‡å°‘æ•°æ®ä¼ è¾“**ï¼šåªæŸ¥è¯¢å½“å‰éœ€è¦æ˜¾ç¤ºçš„æ•°æ®
- **æå‡å“åº”é€Ÿåº¦**ï¼šæ•°æ®é‡å°ï¼ŒæŸ¥è¯¢å’Œä¼ è¾“éƒ½æ›´å¿«
- **é™ä½å†…å­˜å‹åŠ›**ï¼šé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®
- **æ”¹å–„ç”¨æˆ·ä½“éªŒ**ï¼šå¿«é€Ÿæ˜¾ç¤ºç»“æœï¼ŒæŒ‰éœ€åŠ è½½æ›´å¤š

### 1.2 Spring Data JPAçš„åˆ†é¡µæ–¹æ¡ˆ


**æ ¸å¿ƒç»„ä»¶å…³ç³»**
```
ç”¨æˆ·è¯·æ±‚ â†’ Controllerå±‚ â†’ Serviceå±‚ â†’ Repositoryå±‚ â†’ æ•°æ®åº“
           â†“              â†“              â†“
        æ¥æ”¶é¡µç       ä¼ é€’Pageable    æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢
           â†“              â†“              â†“
        è¿”å›ç»“æœ    å¤„ç†Pageå¯¹è±¡    è¿”å›Page<T>

å…³é”®å¯¹è±¡ï¼š
â€¢ Pageableï¼šåˆ†é¡µè¯·æ±‚å‚æ•°ï¼ˆé¡µç ã€æ¯é¡µæ¡æ•°ã€æ’åºï¼‰
â€¢ Pageï¼šåˆ†é¡µç»“æœï¼ˆæ•°æ®åˆ—è¡¨+æ€»æ•°+é¡µç ä¿¡æ¯ï¼‰
â€¢ Sortï¼šæ’åºå‚æ•°ï¼ˆæŒ‰å“ªä¸ªå­—æ®µã€å‡åºè¿˜æ˜¯é™åºï¼‰
```

---

## 2. ğŸ”§ Pageableåˆ†é¡µå‚æ•°è¯¦è§£


### 2.1 Pageableæ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**
```
Pageableå°±åƒä½ å¯¹æœåŠ¡å‘˜è¯´çš„ç‚¹é¤éœ€æ±‚ï¼š
"ç»™æˆ‘ç¬¬2é¡µçš„æ•°æ®ï¼Œæ¯é¡µæ˜¾ç¤º20æ¡ï¼ŒæŒ‰ä»·æ ¼ä»ä½åˆ°é«˜æ’åº"

è½¬æ¢æˆä»£ç ï¼š
PageRequest.of(
    1,              // ç¬¬2é¡µï¼ˆé¡µç ä»0å¼€å§‹ï¼Œæ‰€ä»¥1ä»£è¡¨ç¬¬2é¡µï¼‰
    20,             // æ¯é¡µ20æ¡
    Sort.by("price").ascending()  // æŒ‰ä»·æ ¼å‡åº
)
```

**Pageableæ¥å£çš„ä½œç”¨**
- **å°è£…åˆ†é¡µå‚æ•°**ï¼šé¡µç ã€æ¯é¡µæ¡æ•°ã€æ’åºè§„åˆ™
- **ç»Ÿä¸€åˆ†é¡µæ ‡å‡†**ï¼šæ‰€æœ‰Repositoryæ–¹æ³•éƒ½ç”¨è¿™ä¸ªæ¥å£
- **è‡ªåŠ¨SQLè½¬æ¢**ï¼šJPAä¼šè‡ªåŠ¨è½¬æ¢æˆæ•°æ®åº“çš„åˆ†é¡µè¯­å¥

### 2.2 åˆ›å»ºPageableå¯¹è±¡çš„æ–¹å¼


#### ğŸŸ¢ **æ–¹å¼1ï¼šPageRequest.of()ï¼ˆæœ€å¸¸ç”¨ï¼‰**


```java
// åŸºç¡€ç”¨æ³•ï¼šåªæŒ‡å®šé¡µç å’Œæ¯é¡µæ¡æ•°
Pageable pageable = PageRequest.of(0, 10);  // ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡

// å¸¦æ’åºçš„åˆ†é¡µ
Pageable pageable = PageRequest.of(
    0,                              // é¡µç 
    20,                             // æ¯é¡µæ¡æ•°
    Sort.by("createTime").descending()  // æŒ‰åˆ›å»ºæ—¶é—´é™åº
);

// å¤šå­—æ®µæ’åº
Pageable pageable = PageRequest.of(0, 10,
    Sort.by("price").ascending()        // å…ˆæŒ‰ä»·æ ¼å‡åº
        .and(Sort.by("sales").descending())  // ä»·æ ¼ç›¸åŒæ—¶æŒ‰é”€é‡é™åº
);
```

#### ğŸŸ¡ **æ–¹å¼2ï¼šåœ¨Controllerä¸­æ¥æ”¶**


```java
@RestController
public class ProductController {
    
    @Autowired
    private ProductRepository productRepository;
    
    // Springä¼šè‡ªåŠ¨æŠŠè¯·æ±‚å‚æ•°è½¬æ¢æˆPageableå¯¹è±¡
    @GetMapping("/products")
    public Page<Product> getProducts(Pageable pageable) {
        // å‰ç«¯è¯·æ±‚ï¼š/products?page=0&size=20&sort=price,asc
        // Springè‡ªåŠ¨åˆ›å»ºï¼šPageRequest.of(0, 20, Sort.by("price").ascending())
        return productRepository.findAll(pageable);
    }
}
```

> ğŸ’¡ **æç¤º**ï¼šControlleræ¥æ”¶Pageableæ—¶ï¼Œå‰ç«¯éœ€è¦ä¼ é€’çš„å‚æ•°ï¼š
> - `page`ï¼šé¡µç ï¼ˆä»0å¼€å§‹ï¼‰
> - `size`ï¼šæ¯é¡µæ¡æ•°
> - `sort`ï¼šæ’åºå­—æ®µå’Œæ–¹å‘ï¼Œæ ¼å¼ï¼š`å­—æ®µå,asc/desc`

### 2.3 Pageableæ ¸å¿ƒå‚æ•°è¯´æ˜


| å‚æ•° | **å«ä¹‰** | **ç¤ºä¾‹** | **æ³¨æ„äº‹é¡¹** |
|------|---------|---------|------------|
| **page** | `é¡µç ï¼ˆä»0å¼€å§‹ï¼‰` | `0è¡¨ç¤ºç¬¬1é¡µ` | `ä¼ 1è¡¨ç¤ºç¬¬2é¡µï¼Œå®¹æ˜“æ··æ·†` |
| **size** | `æ¯é¡µæ˜¾ç¤ºæ¡æ•°` | `10è¡¨ç¤ºæ¯é¡µ10æ¡` | `å»ºè®®è®¾ç½®ä¸Šé™ï¼Œå¦‚æœ€å¤§100` |
| **sort** | `æ’åºè§„åˆ™` | `Sort.by("name").asc()` | `å¯å¤šå­—æ®µæ’åº` |

**é¡µç ä»0å¼€å§‹çš„åŸå› **
```
è®¡ç®—æœºåº•å±‚é€»è¾‘ï¼š
OFFSET = é¡µç  Ã— æ¯é¡µæ¡æ•°

ç¬¬1é¡µï¼šOFFSET = 0 Ã— 10 = 0  â†’ ä»ç¬¬0æ¡å¼€å§‹å–
ç¬¬2é¡µï¼šOFFSET = 1 Ã— 10 = 10 â†’ ä»ç¬¬10æ¡å¼€å§‹å–
ç¬¬3é¡µï¼šOFFSET = 2 Ã— 10 = 20 â†’ ä»ç¬¬20æ¡å¼€å§‹å–

å¦‚æœé¡µç ä»1å¼€å§‹ï¼š
ç¬¬1é¡µï¼šéœ€è¦æ‰‹åŠ¨ (1-1) Ã— 10 = 0
ç¬¬2é¡µï¼šéœ€è¦æ‰‹åŠ¨ (2-1) Ã— 10 = 10
å¢åŠ äº†é¢å¤–çš„è®¡ç®—æ­¥éª¤
```

---

## 3. ğŸ“„ Pageåˆ†é¡µç»“æœå¤„ç†


### 3.1 Pageå¯¹è±¡æ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**
```
Page<T>å°±åƒä¸€æœ¬ä¹¦çš„ä¸€é¡µï¼ŒåŒ…å«ï¼š
ğŸ“– å½“å‰é¡µçš„å†…å®¹ï¼ˆè¿™ä¸€é¡µæ˜¾ç¤ºçš„å…·ä½“æ•°æ®ï¼‰
ğŸ“Š æ•´æœ¬ä¹¦çš„ä¿¡æ¯ï¼ˆæ€»å…±å¤šå°‘é¡µã€å¤šå°‘æ¡æ•°æ®ï¼‰
ğŸ”– å½“å‰é¡µçš„ä½ç½®ï¼ˆå½“å‰ç¬¬å‡ é¡µï¼‰

ç¤ºä¾‹ï¼š
Page<Product> result = productRepository.findAll(pageable);

resultåŒ…å«ï¼š
â€¢ å½“å‰é¡µçš„å•†å“åˆ—è¡¨
â€¢ æ€»å•†å“æ•°é‡
â€¢ æ€»é¡µæ•°
â€¢ å½“å‰é¡µç 
â€¢ æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€é¡µ
â€¢ ...
```

### 3.2 Pageå¯¹è±¡å¸¸ç”¨æ–¹æ³•


```java
Page<Product> page = productRepository.findAll(PageRequest.of(0, 10));

// ========== è·å–æ•°æ® ==========
List<Product> products = page.getContent();  // å½“å‰é¡µçš„æ•°æ®åˆ—è¡¨

// ========== åˆ†é¡µä¿¡æ¯ ==========
int totalPages = page.getTotalPages();      // æ€»é¡µæ•°
long totalElements = page.getTotalElements();  // æ€»è®°å½•æ•°
int currentPage = page.getNumber();         // å½“å‰é¡µç ï¼ˆä»0å¼€å§‹ï¼‰
int pageSize = page.getSize();              // æ¯é¡µæ¡æ•°

// ========== åˆ¤æ–­æ–¹æ³• ==========
boolean hasNext = page.hasNext();           // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
boolean hasPrevious = page.hasPrevious();   // æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
boolean isFirst = page.isFirst();           // æ˜¯å¦æ˜¯ç¬¬ä¸€é¡µ
boolean isLast = page.isLast();             // æ˜¯å¦æ˜¯æœ€åä¸€é¡µ

// ========== æ•°æ®è½¬æ¢ ==========
Page<ProductDTO> dtoPage = page.map(product -> {
    // å°†Entityè½¬æ¢ä¸ºDTO
    return new ProductDTO(product.getId(), product.getName());
});
```

### 3.3 Repositoryä¸­çš„åˆ†é¡µæŸ¥è¯¢æ–¹æ³•


```java
public interface ProductRepository extends JpaRepository<Product, Long> {
    
    // æ–¹å¼1ï¼šä½¿ç”¨Spring Data JPAè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•
    Page<Product> findAll(Pageable pageable);
    
    // æ–¹å¼2ï¼šè‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•
    Page<Product> findByCategory(String category, Pageable pageable);
    
    // æ–¹å¼3ï¼šä½¿ç”¨@Queryæ³¨è§£
    @Query("SELECT p FROM Product p WHERE p.price > :minPrice")
    Page<Product> findExpensiveProducts(@Param("minPrice") BigDecimal minPrice, 
                                        Pageable pageable);
}
```

> âš¡ **é‡è¦æç¤º**ï¼šåªè¦æ–¹æ³•è¿”å›ç±»å‹æ˜¯`Page<T>`å¹¶ä¸”å‚æ•°ä¸­æœ‰`Pageable`ï¼ŒSpring Data JPAä¼šè‡ªåŠ¨ï¼š
> - æ‰§è¡ŒcountæŸ¥è¯¢è·å–æ€»æ•°
> - æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢è·å–æ•°æ®
> - å°è£…æˆPageå¯¹è±¡è¿”å›

### 3.4 å®é™…åº”ç”¨ç¤ºä¾‹


```java
@Service
public class ProductService {
    
    @Autowired
    private ProductRepository productRepository;
    
    // åˆ†é¡µæŸ¥è¯¢å•†å“
    public Map<String, Object> getProducts(int page, int size, String sortBy) {
        // 1. åˆ›å»ºåˆ†é¡µå‚æ•°
        Sort sort = Sort.by(sortBy).descending();
        Pageable pageable = PageRequest.of(page, size, sort);
        
        // 2. æ‰§è¡ŒæŸ¥è¯¢
        Page<Product> productPage = productRepository.findAll(pageable);
        
        // 3. ç»„è£…è¿”å›ç»“æœ
        Map<String, Object> result = new HashMap<>();
        result.put("products", productPage.getContent());     // å½“å‰é¡µæ•°æ®
        result.put("currentPage", productPage.getNumber());   // å½“å‰é¡µç 
        result.put("totalPages", productPage.getTotalPages()); // æ€»é¡µæ•°
        result.put("totalItems", productPage.getTotalElements()); // æ€»æ¡æ•°
        result.put("hasNext", productPage.hasNext());         // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
        
        return result;
    }
}
```

**å‰ç«¯æ¥æ”¶çš„æ•°æ®æ ¼å¼**
```json
{
  "products": [
    {"id": 1, "name": "å•†å“1", "price": 99.99},
    {"id": 2, "name": "å•†å“2", "price": 199.99}
  ],
  "currentPage": 0,
  "totalPages": 50,
  "totalItems": 1000,
  "hasNext": true
}
```

---

## 4. ğŸ”€ Sortæ’åºå‚æ•°åº”ç”¨


### 4.1 Sortæ’åºçš„åŸºæœ¬ç”¨æ³•


**åˆ›å»ºSortå¯¹è±¡çš„æ–¹å¼**

```java
// æ–¹å¼1ï¼šå•å­—æ®µå‡åº
Sort sort1 = Sort.by("price");  // é»˜è®¤å‡åº

// æ–¹å¼2ï¼šå•å­—æ®µé™åº
Sort sort2 = Sort.by("price").descending();

// æ–¹å¼3ï¼šå•å­—æ®µæ˜ç¡®æŒ‡å®šæ–¹å‘
Sort sort3 = Sort.by(Sort.Direction.ASC, "price");   // å‡åº
Sort sort4 = Sort.by(Sort.Direction.DESC, "price");  // é™åº

// æ–¹å¼4ï¼šå¤šå­—æ®µæ’åº
Sort sort5 = Sort.by("price").ascending()           // å…ˆæŒ‰ä»·æ ¼å‡åº
                 .and(Sort.by("sales").descending()); // ä»·æ ¼ç›¸åŒæŒ‰é”€é‡é™åº

// æ–¹å¼5ï¼šä½¿ç”¨Orderå¯¹è±¡ï¼ˆæ›´çµæ´»ï¼‰
Sort sort6 = Sort.by(
    Sort.Order.asc("category"),   // å…ˆæŒ‰ç±»åˆ«å‡åº
    Sort.Order.desc("price"),     // å†æŒ‰ä»·æ ¼é™åº
    Sort.Order.asc("name")        // æœ€åæŒ‰åç§°å‡åº
);
```

### 4.2 æ’åºåœ¨åˆ†é¡µä¸­çš„åº”ç”¨


```java
// åœºæ™¯1ï¼šç”µå•†å•†å“åˆ—è¡¨ - æŒ‰ä»·æ ¼ä»ä½åˆ°é«˜
Pageable pageable1 = PageRequest.of(0, 20, 
    Sort.by("price").ascending()
);

// åœºæ™¯2ï¼šæ–°é—»åˆ—è¡¨ - æŒ‰å‘å¸ƒæ—¶é—´ä»æ–°åˆ°æ—§
Pageable pageable2 = PageRequest.of(0, 10, 
    Sort.by("publishTime").descending()
);

// åœºæ™¯3ï¼šé”€å”®æ’è¡Œæ¦œ - å…ˆæŒ‰é”€é‡é™åºï¼Œé”€é‡ç›¸åŒæŒ‰ä»·æ ¼å‡åº
Pageable pageable3 = PageRequest.of(0, 50,
    Sort.by("sales").descending()
        .and(Sort.by("price").ascending())
);
```

### 4.3 åŠ¨æ€æ’åºå®ç°


```java
@Service
public class ProductService {
    
    // æ ¹æ®å‰ç«¯å‚æ•°åŠ¨æ€æ„å»ºæ’åº
    public Page<Product> searchProducts(String keyword, 
                                         String sortField, 
                                         String sortDirection,
                                         int page, 
                                         int size) {
        
        // æ„å»ºæ’åºå¯¹è±¡
        Sort.Direction direction = "desc".equalsIgnoreCase(sortDirection) 
            ? Sort.Direction.DESC 
            : Sort.Direction.ASC;
        
        Sort sort = Sort.by(direction, sortField);
        
        // åˆ›å»ºåˆ†é¡µå¯¹è±¡
        Pageable pageable = PageRequest.of(page, size, sort);
        
        // æ‰§è¡ŒæŸ¥è¯¢
        return productRepository.findByNameContaining(keyword, pageable);
    }
}
```

**å‰ç«¯è°ƒç”¨ç¤ºä¾‹**
```
GET /products/search?keyword=æ‰‹æœº&sortField=price&sortDirection=asc&page=0&size=20
â†’ æŸ¥è¯¢åŒ…å«"æ‰‹æœº"çš„å•†å“ï¼ŒæŒ‰ä»·æ ¼å‡åºï¼Œç¬¬1é¡µï¼Œæ¯é¡µ20æ¡
```

---

## 5. âš¡ åˆ†é¡µæ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 5.1 countæŸ¥è¯¢çš„æ€§èƒ½ä»£ä»·


**é—®é¢˜ç†è§£**
```
æ¯æ¬¡åˆ†é¡µæŸ¥è¯¢å®é™…æ‰§è¡Œä¸¤æ¡SQLï¼š

1. COUNTæŸ¥è¯¢ï¼šSELECT COUNT(*) FROM products WHERE ...
   â†’ è·å–æ€»è®°å½•æ•°ï¼Œè®¡ç®—æ€»é¡µæ•°
   
2. æ•°æ®æŸ¥è¯¢ï¼šSELECT * FROM products WHERE ... LIMIT 20 OFFSET 0
   â†’ è·å–å½“å‰é¡µæ•°æ®

é—®é¢˜ï¼šå½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼ŒCOUNTæŸ¥è¯¢å¾ˆæ…¢
ç¤ºä¾‹ï¼š1000ä¸‡æ¡æ•°æ®çš„COUNTå¯èƒ½éœ€è¦å‡ ç§’é’Ÿ
```

**è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨Sliceä»£æ›¿Page**

```java
public interface ProductRepository extends JpaRepository<Product, Long> {
    
    // è¿”å›Sliceï¼šä¸æ‰§è¡ŒcountæŸ¥è¯¢
    Slice<Product> findByCategory(String category, Pageable pageable);
    
    // å¯¹æ¯”ï¼šè¿”å›Pageä¼šæ‰§è¡ŒcountæŸ¥è¯¢
    Page<Product> findByName(String name, Pageable pageable);
}
```

**Slice vs Pageçš„åŒºåˆ«**

| ç‰¹æ€§ | **Page** | **Slice** |
|------|---------|----------|
| **countæŸ¥è¯¢** | `ä¼šæ‰§è¡Œï¼Œè·å–æ€»æ•°` | `ä¸æ‰§è¡Œï¼Œæ²¡æœ‰æ€»æ•°` |
| **æ€»é¡µæ•°** | `å¯ä»¥è·å–` | `æ— æ³•è·å–` |
| **æ€»è®°å½•æ•°** | `å¯ä»¥è·å–` | `æ— æ³•è·å–` |
| **æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ** | `å¯ä»¥åˆ¤æ–­` | `å¯ä»¥åˆ¤æ–­` |
| **æ€§èƒ½** | `è¾ƒæ…¢ï¼ˆæœ‰countï¼‰` | `è¾ƒå¿«ï¼ˆæ— countï¼‰` |
| **é€‚ç”¨åœºæ™¯** | `éœ€è¦æ˜¾ç¤ºæ€»é¡µæ•°` | `åªéœ€"åŠ è½½æ›´å¤š"æŒ‰é’®` |

**Sliceçš„ä½¿ç”¨ç¤ºä¾‹**
```java
@Service
public class ProductService {
    
    // é€‚åˆç§»åŠ¨ç«¯"åŠ è½½æ›´å¤š"åœºæ™¯
    public List<Product> loadMore(String category, int page) {
        Pageable pageable = PageRequest.of(page, 20);
        Slice<Product> slice = productRepository.findByCategory(category, pageable);
        
        // å‰ç«¯åªéœ€è¦çŸ¥é“ï¼š
        // 1. å½“å‰é¡µçš„æ•°æ®
        // 2. æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€é¡µï¼ˆç”¨äºæ˜¾ç¤º"åŠ è½½æ›´å¤š"æŒ‰é’®ï¼‰
        Map<String, Object> result = new HashMap<>();
        result.put("products", slice.getContent());
        result.put("hasNext", slice.hasNext());
        
        return slice.getContent();
    }
}
```

### 5.2 æ·±åº¦åˆ†é¡µçš„æ€§èƒ½é—®é¢˜


**é—®é¢˜è¯´æ˜**
```
æŸ¥è¯¢ç¬¬1é¡µï¼š   LIMIT 20 OFFSET 0      â†’ å¾ˆå¿«
æŸ¥è¯¢ç¬¬100é¡µï¼š LIMIT 20 OFFSET 2000   â†’ è¾ƒæ…¢
æŸ¥è¯¢ç¬¬1000é¡µï¼šLIMIT 20 OFFSET 20000  â†’ å¾ˆæ…¢

åŸå› ï¼šæ•°æ®åº“éœ€è¦æ‰«æå‰20000æ¡æ•°æ®ï¼Œç„¶åä¸¢å¼ƒï¼Œåªè¿”å›å20æ¡
```

**ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šé™åˆ¶æœ€å¤§é¡µç **
```java
@GetMapping("/products")
public Page<Product> getProducts(@RequestParam int page, 
                                  @RequestParam int size) {
    // é™åˆ¶æœ€å¤§é¡µç ä¸º100
    if (page > 100) {
        throw new IllegalArgumentException("æœ€å¤šåªèƒ½æŸ¥è¯¢å‰100é¡µ");
    }
    
    Pageable pageable = PageRequest.of(page, size);
    return productRepository.findAll(pageable);
}
```

**ä¼˜åŒ–æ–¹æ¡ˆ2ï¼šä½¿ç”¨æ¸¸æ ‡åˆ†é¡µï¼ˆé€‚åˆæ— é™æ»šåŠ¨ï¼‰**
```java
public interface ProductRepository extends JpaRepository<Product, Long> {
    
    // ä½¿ç”¨IDä½œä¸ºæ¸¸æ ‡
    @Query("SELECT p FROM Product p WHERE p.id > :lastId ORDER BY p.id")
    List<Product> findNextPage(@Param("lastId") Long lastId, Pageable pageable);
}

// ä½¿ç”¨æ–¹å¼
public List<Product> getNextPage(Long lastProductId) {
    Pageable pageable = PageRequest.of(0, 20);
    return productRepository.findNextPage(lastProductId, pageable);
}
```

### 5.3 åˆ†é¡µä¼˜åŒ–æœ€ä½³å®è·µ


```
ğŸŸ¢ æ¨èåšæ³•ï¼š
1. å‰ç«¯åˆ†é¡µï¼šæ•°æ®é‡å°ï¼ˆ<1000æ¡ï¼‰æ—¶ï¼Œä¸€æ¬¡æŸ¥å…¨éƒ¨ï¼Œå‰ç«¯åˆ†é¡µ
2. Sliceåˆ†é¡µï¼šç§»åŠ¨ç«¯"åŠ è½½æ›´å¤š"åœºæ™¯ï¼Œä¸éœ€è¦æ€»æ•°
3. é™åˆ¶æ·±åº¦ï¼šPCç«¯åˆ†é¡µæœ€å¤šæ˜¾ç¤ºå‰Né¡µï¼ˆå¦‚100é¡µï¼‰
4. æ¸¸æ ‡åˆ†é¡µï¼šæ— é™æ»šåŠ¨åœºæ™¯ï¼ŒæŒ‰IDæˆ–æ—¶é—´æˆ³åˆ†é¡µ

âš ï¸ é¿å…é—®é¢˜ï¼š
1. é¿å…åœ¨å¤§è¡¨ä¸Šé¢‘ç¹count
2. é¿å…è®©ç”¨æˆ·è·³è½¬åˆ°å¾ˆå¤§çš„é¡µç 
3. é¿å…æ¯é¡µæ˜¾ç¤ºè¿‡å¤šæ•°æ®ï¼ˆå»ºè®®â‰¤100æ¡ï¼‰
4. é¿å…åœ¨å¤æ‚æŸ¥è¯¢ä¸Šä½¿ç”¨åˆ†é¡µï¼ˆå…ˆä¼˜åŒ–æŸ¥è¯¢ï¼‰
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Pageableï¼šåˆ†é¡µè¯·æ±‚å‚æ•°ï¼ŒåŒ…å«é¡µç ã€æ¯é¡µæ¡æ•°ã€æ’åºè§„åˆ™
ğŸ”¸ Pageï¼šåˆ†é¡µç»“æœå¯¹è±¡ï¼ŒåŒ…å«æ•°æ®åˆ—è¡¨å’Œåˆ†é¡µä¿¡æ¯
ğŸ”¸ Sliceï¼šè½»é‡çº§åˆ†é¡µç»“æœï¼Œä¸åŒ…å«æ€»æ•°ï¼Œæ€§èƒ½æ›´å¥½
ğŸ”¸ Sortï¼šæ’åºå‚æ•°ï¼Œå¯å•å­—æ®µæˆ–å¤šå­—æ®µæ’åº
ğŸ”¸ PageRequestï¼šåˆ›å»ºPageableå¯¹è±¡çš„å·¥å…·ç±»
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ åˆ†é¡µçš„æœ¬è´¨**
```
æ ¸å¿ƒç›®çš„ï¼š
â€¢ å‡å°‘æ•°æ®ä¼ è¾“é‡
â€¢ æå‡å“åº”é€Ÿåº¦
â€¢ é™ä½å†…å­˜å‹åŠ›
â€¢ æ”¹å–„ç”¨æˆ·ä½“éªŒ

å®ç°æ–¹å¼ï¼š
â€¢ æ•°æ®åº“å±‚ï¼šLIMIT + OFFSET
â€¢ JPAå±‚ï¼šPageable + Page
â€¢ å‰ç«¯å±‚ï¼šé¡µç  + æ¯é¡µæ¡æ•°
```

**ğŸ”¹ Page vs Sliceçš„é€‰æ‹©**
```
ä½¿ç”¨Pageçš„åœºæ™¯ï¼š
â€¢ PCç«¯åˆ†é¡µï¼Œéœ€è¦æ˜¾ç¤ºæ€»é¡µæ•°
â€¢ éœ€è¦è·³è½¬åˆ°æŒ‡å®šé¡µ
â€¢ æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§

ä½¿ç”¨Sliceçš„åœºæ™¯ï¼š
â€¢ ç§»åŠ¨ç«¯"åŠ è½½æ›´å¤š"
â€¢ æ— é™æ»šåŠ¨åˆ—è¡¨
â€¢ å¤§æ•°æ®é‡æŸ¥è¯¢
â€¢ åªå…³å¿ƒæ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
```

**ğŸ”¹ æ’åºçš„çµæ´»åº”ç”¨**
```
å•å­—æ®µæ’åºï¼š
Sort.by("price").ascending()

å¤šå­—æ®µæ’åºï¼š
Sort.by("category").ascending()
    .and(Sort.by("price").descending())

åŠ¨æ€æ’åºï¼š
æ ¹æ®å‰ç«¯å‚æ•°æ„å»ºSortå¯¹è±¡
```

### 6.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ“Š ç”µå•†å•†å“åˆ—è¡¨**
```java
// æ”¯æŒå¤šç§æ’åºï¼šç»¼åˆã€ä»·æ ¼ã€é”€é‡
PageRequest.of(page, 20, Sort.by(sortField).descending())
```

**ğŸ“° æ–°é—»èµ„è®¯åˆ—è¡¨**
```java
// æŒ‰æ—¶é—´å€’åºï¼Œæœ€æ–°çš„åœ¨å‰
PageRequest.of(page, 10, Sort.by("publishTime").descending())
```

**ğŸ“± ç§»åŠ¨ç«¯æ»šåŠ¨åŠ è½½**
```java
// ä½¿ç”¨Sliceï¼Œæ€§èƒ½æ›´å¥½
Slice<Product> slice = repository.findAll(pageable);
return slice.getContent();  // åªè¿”å›æ•°æ®ï¼Œä¸è¿”å›æ€»æ•°
```

**ğŸ” æœç´¢ç»“æœåˆ†é¡µ**
```java
// é™åˆ¶æœ€å¤§é¡µç ï¼Œé¿å…æ·±åº¦åˆ†é¡µ
if (page > 50) {
    throw new BusinessException("è¶…å‡ºæŸ¥è¯¢èŒƒå›´");
}
```

### 6.4 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒ


```
âš¡ ä¼˜åŒ–åŸåˆ™ï¼š
1. èƒ½ç”¨Sliceå°±ä¸ç”¨Pageï¼ˆå‡å°‘countæŸ¥è¯¢ï¼‰
2. é™åˆ¶æœ€å¤§é¡µç ï¼ˆé¿å…æ·±åº¦åˆ†é¡µï¼‰
3. åˆç†è®¾ç½®æ¯é¡µæ¡æ•°ï¼ˆæ¨è10-50æ¡ï¼‰
4. å¤§æ•°æ®é‡è€ƒè™‘æ¸¸æ ‡åˆ†é¡µï¼ˆç”¨IDæˆ–æ—¶é—´æˆ³ï¼‰

ğŸš« å¸¸è§è¯¯åŒºï¼š
1. åœ¨å¤§è¡¨ä¸Šä½¿ç”¨PageæŸ¥è¯¢åå‡ ç™¾é¡µ
2. æ¯é¡µè®¾ç½®è¿‡å¤§çš„æ¡æ•°ï¼ˆå¦‚500æ¡ï¼‰
3. å¤æ‚æŸ¥è¯¢ä¸Šç›´æ¥åˆ†é¡µï¼ˆåº”å…ˆä¼˜åŒ–æŸ¥è¯¢ï¼‰
4. å¿½ç•¥countæŸ¥è¯¢çš„æ€§èƒ½å½±å“
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
åˆ†é¡µæŸ¥è¯¢ä¸‰è¦ç´ ï¼Œé¡µç æ¡æ•°æ’åºè®°
PageåŒ…å«æ€»æ•°ä¿¡æ¯ï¼ŒSliceè½»é‡æ€§èƒ½å¥½
æ·±åº¦åˆ†é¡µè¦é¿å…ï¼Œæ¸¸æ ‡æ»šåŠ¨æ˜¯å¦™æ‹›
å‰ç«¯ä¼ å‚åç«¯æ”¶ï¼ŒPageableè‡ªåŠ¨è½¬
```