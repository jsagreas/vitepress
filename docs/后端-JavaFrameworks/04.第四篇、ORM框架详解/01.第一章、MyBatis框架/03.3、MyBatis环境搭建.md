---
title: 3ã€MyBatisç¯å¢ƒæ­å»º
---
## ğŸ“š ç›®å½•

1. [ç¯å¢ƒæ­å»ºå‰çš„å‡†å¤‡](#1-ç¯å¢ƒæ­å»ºå‰çš„å‡†å¤‡)
2. [Mavenæ–¹å¼æ­å»ºç¯å¢ƒ](#2-Mavenæ–¹å¼æ­å»ºç¯å¢ƒ)
3. [Gradleæ–¹å¼æ­å»ºç¯å¢ƒ](#3-Gradleæ–¹å¼æ­å»ºç¯å¢ƒ)
4. [é¡¹ç›®ç»“æ„è§„åˆ’](#4-é¡¹ç›®ç»“æ„è§„åˆ’)
5. [æ•°æ®åº“è¿æ¥é…ç½®](#5-æ•°æ®åº“è¿æ¥é…ç½®)
6. [æ—¥å¿—æ¡†æ¶é›†æˆ](#6-æ—¥å¿—æ¡†æ¶é›†æˆ)
7. [å¼€å‘å·¥å…·é…ç½®](#7-å¼€å‘å·¥å…·é…ç½®)
8. [è°ƒè¯•ç¯å¢ƒæ­å»º](#8-è°ƒè¯•ç¯å¢ƒæ­å»º)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ› ï¸ ç¯å¢ƒæ­å»ºå‰çš„å‡†å¤‡


### 1.1 ä»€ä¹ˆæ˜¯ç¯å¢ƒæ­å»ºï¼Ÿ


> ğŸ’¡ **æ–°æ‰‹ç†è§£**
> 
> æƒ³è±¡ä½ è¦åšä¸€é“èœï¼Œç¯å¢ƒæ­å»ºå°±åƒæ˜¯å‡†å¤‡å¨æˆ¿ã€ä¹°é£Ÿæã€æ‘†å¥½å·¥å…·ã€‚åªæœ‰è¿™äº›éƒ½å‡†å¤‡å¥½äº†ï¼Œä½ æ‰èƒ½å¼€å§‹çœŸæ­£çš„çƒ¹é¥ªï¼ˆå†™ä»£ç ï¼‰ã€‚

**ç¯å¢ƒæ­å»ºåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š**
- ğŸ”§ **å·¥å…·å‡†å¤‡** - JDKã€å¼€å‘å·¥å…·ã€æ„å»ºå·¥å…·
- ğŸ“¦ **ä¾èµ–ç®¡ç†** - å¼•å…¥MyBatisç›¸å…³çš„jaråŒ…
- âš™ï¸ **é…ç½®æ–‡ä»¶** - å‘Šè¯‰MyBatisæ€ä¹ˆè¿æ¥æ•°æ®åº“ã€æ€ä¹ˆå·¥ä½œ

### 1.2 éœ€è¦å‡†å¤‡çš„å·¥å…·æ¸…å•


| å·¥å…·ç±»å‹ | æ¨èç‰ˆæœ¬ | ä½œç”¨è¯´æ˜ | å¿…éœ€æ€§ |
|---------|---------|---------|--------|
| **JDK** | `JDK 8+` | Javaå¼€å‘æ ¸å¿ƒç¯å¢ƒ | âœ… å¿…éœ€ |
| **Maven/Gradle** | `Maven 3.6+` / `Gradle 7.0+` | é¡¹ç›®æ„å»ºå’Œä¾èµ–ç®¡ç† | âœ… å¿…éœ€ï¼ˆäºŒé€‰ä¸€ï¼‰ |
| **IDE** | `IDEA` / `Eclipse` | ä»£ç ç¼–è¾‘å™¨ | âœ… å¿…éœ€ |
| **æ•°æ®åº“** | `MySQL 5.7+` / `PostgreSQL` | æ•°æ®å­˜å‚¨ | âœ… å¿…éœ€ |
| **æ•°æ®åº“å®¢æˆ·ç«¯** | `Navicat` / `DBeaver` | æ•°æ®åº“å¯è§†åŒ–ç®¡ç† | â­ æ¨è |

**å®‰è£…è¿›åº¦æ£€æŸ¥ï¼š**
```
âœ… JDKå®‰è£…        [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] å·²å®Œæˆ
âœ… Maven/Gradle   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] å·²å®Œæˆ  
âœ… IDEé…ç½®        [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] å·²å®Œæˆ
âœ… æ•°æ®åº“å®‰è£…      [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] å·²å®Œæˆ
```

### 1.3 ç‰ˆæœ¬å…¼å®¹æ€§è¯´æ˜


```
MyBatisç‰ˆæœ¬é€‰æ‹©å»ºè®®ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MyBatisç‰ˆæœ¬ â”‚   JDKè¦æ±‚    â”‚   æ¨èåœºæ™¯   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3.5.x       â”‚   JDK 8+     â”‚  ğŸŸ¢ æ–°é¡¹ç›®   â”‚
â”‚ 3.4.x       â”‚   JDK 6+     â”‚  ğŸŸ¡ è€é¡¹ç›®   â”‚
â”‚ 3.3.xåŠä»¥ä¸‹ â”‚   JDK 5+     â”‚  ğŸ”´ ä¸æ¨è   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> âš ï¸ **é‡è¦æç¤º**
> 
> å¦‚æœä½ çš„é¡¹ç›®éœ€è¦ä½¿ç”¨Java 17æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå»ºè®®ä½¿ç”¨MyBatis 3.5.10+ç‰ˆæœ¬ï¼Œä»¥è·å¾—æ›´å¥½çš„å…¼å®¹æ€§æ”¯æŒã€‚

---

## 2. ğŸ“¦ Mavenæ–¹å¼æ­å»ºç¯å¢ƒ


### 2.1 Mavenæ˜¯ä»€ä¹ˆï¼Ÿ


**é€šä¿—ç†è§£ï¼š**
> Mavenå°±åƒä¸€ä¸ª**æ™ºèƒ½ç®¡å®¶**ï¼Œä½ åªéœ€è¦å‘Šè¯‰å®ƒ"æˆ‘éœ€è¦MyBatis"ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ ï¼š
> - ğŸ“¥ ä¸‹è½½MyBatisçš„jaråŒ…
> - ğŸ”— ä¸‹è½½MyBatisä¾èµ–çš„å…¶ä»–jaråŒ…
> - ğŸ“‚ æŠŠæ‰€æœ‰jaråŒ…æ•´ç†å¥½æ”¾åœ¨æ­£ç¡®çš„ä½ç½®

### 2.2 åˆ›å»ºMavené¡¹ç›®æ­¥éª¤


**æ­¥éª¤ 1ï¸âƒ£ï¼šåˆ›å»ºé¡¹ç›®ç»“æ„**

åœ¨IDEAä¸­ï¼š`File` â†’ `New` â†’ `Project` â†’ é€‰æ‹© `Maven`

**æ­¥éª¤ 2ï¸âƒ£ï¼šé…ç½®åŸºç¡€ä¿¡æ¯**
- **GroupId**: `com.example` ï¼ˆå…¬å¸åŸŸåå€’å†™ï¼‰
- **ArtifactId**: `mybatis-demo` ï¼ˆé¡¹ç›®åç§°ï¼‰
- **Version**: `1.0-SNAPSHOT` ï¼ˆç‰ˆæœ¬å·ï¼‰

**æ­¥éª¤ 3ï¸âƒ£ï¼šæ·»åŠ MyBatisä¾èµ–**

æ‰“å¼€é¡¹ç›®ä¸­çš„ `pom.xml` æ–‡ä»¶ï¼Œè¿™æ˜¯Mavençš„"è´­ç‰©æ¸…å•"ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>mybatis-demo</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <!-- è®¾ç½®ç¼–ç å’ŒJavaç‰ˆæœ¬ -->
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.compiler.source>8</maven.compiler.source>
        <maven.compiler.target>8</maven.compiler.target>
    </properties>

    <dependencies>
        <!-- MyBatisæ ¸å¿ƒä¾èµ– -->
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>3.5.13</version>
        </dependency>

        <!-- MySQLæ•°æ®åº“é©±åŠ¨ -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.33</version>
        </dependency>

        <!-- æ—¥å¿—æ¡†æ¶ï¼ˆå¯é€‰ä½†æ¨èï¼‰ -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.36</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.2.11</version>
        </dependency>

        <!-- JUnitæµ‹è¯•æ¡†æ¶ -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.13.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project>
```

### 2.3 ä¾èµ–è¯´æ˜è¯¦è§£


**ğŸ”¸ æ ¸å¿ƒä¾èµ–è§£æ**

| ä¾èµ–åç§° | ä½œç”¨è¯´æ˜ | æ˜¯å¦å¿…éœ€ |
|---------|---------|---------|
| `mybatis` | MyBatisæ ¸å¿ƒæ¡†æ¶ | âœ… å¿…éœ€ |
| `mysql-connector-java` | MySQLæ•°æ®åº“é©±åŠ¨ | âœ… å¿…éœ€ |
| `slf4j-api` + `logback-classic` | æ—¥å¿—è®°å½• | â­ å¼ºçƒˆæ¨è |
| `junit` | å•å…ƒæµ‹è¯•æ¡†æ¶ | â­ æ¨è |

> ğŸ’¡ **å°è´´å£«**
> 
> **å¦‚ä½•é€‰æ‹©æ•°æ®åº“é©±åŠ¨ï¼Ÿ**
> - MySQL â†’ `mysql-connector-java`
> - Oracle â†’ `ojdbc8`
> - PostgreSQL â†’ `postgresql`
> - SQL Server â†’ `mssql-jdbc`

### 2.4 Mavenä¾èµ–ä¸‹è½½æµç¨‹


```
å¼€å‘è€…ç¼–å†™pom.xml
        â†“
Mavenè¯»å–ä¾èµ–é…ç½®
        â†“
æ£€æŸ¥æœ¬åœ°ä»“åº“æ˜¯å¦å­˜åœ¨
        â†“
    â”Œâ”€å­˜åœ¨â”€â†’ ç›´æ¥ä½¿ç”¨
    â”‚
    â””â”€ä¸å­˜åœ¨â”€â†’ ä»ä¸­å¤®ä»“åº“ä¸‹è½½
              â†“
         ä¿å­˜åˆ°æœ¬åœ°ä»“åº“
              â†“
         æ·»åŠ åˆ°é¡¹ç›®classpath
```

**éªŒè¯ä¾èµ–æ˜¯å¦ä¸‹è½½æˆåŠŸï¼š**
- åœ¨IDEAå³ä¾§ç‚¹å‡» `Maven` é¢æ¿
- å±•å¼€ `Dependencies` æŸ¥çœ‹ä¾èµ–æ ‘
- çœ‹åˆ° `mybatis-3.5.13.jar` ç­‰æ–‡ä»¶å³è¡¨ç¤ºæˆåŠŸ

---

## 3. ğŸ˜ Gradleæ–¹å¼æ­å»ºç¯å¢ƒ


### 3.1 Gradle vs Maven


**ç®€å•å¯¹æ¯”ï¼š**

```
Maven (ä¼ ç»Ÿæ–¹å¼)          Gradle (ç°ä»£æ–¹å¼)
é…ç½®æ–‡ä»¶: pom.xml        é…ç½®æ–‡ä»¶: build.gradle
æ ¼å¼: XML               æ ¼å¼: Groovy/Kotlin
æ„å»ºé€Ÿåº¦: è¾ƒæ…¢           æ„å»ºé€Ÿåº¦: æ›´å¿«
å­¦ä¹ æ›²çº¿: å¹³ç¼“           å­¦ä¹ æ›²çº¿: ç¨é™¡
```

> ğŸ’¡ **æ–°æ‰‹å»ºè®®**
> 
> å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å­¦ä¹ ï¼Œå»ºè®®ä½¿ç”¨Mavenï¼Œå› ä¸ºï¼š
> - ğŸ“š å­¦ä¹ èµ„æ–™æ›´å¤š
> - ğŸ”§ IDEæ”¯æŒæ›´å¥½
> - ğŸ‘¥ ç¤¾åŒºæ›´æˆç†Ÿ

### 3.2 åˆ›å»ºGradleé¡¹ç›®


**æ­¥éª¤ 1ï¸âƒ£ï¼š** åœ¨IDEAä¸­é€‰æ‹© `New Project` â†’ `Gradle` â†’ `Java`

**æ­¥éª¤ 2ï¸âƒ£ï¼š** é…ç½® `build.gradle` æ–‡ä»¶

```groovy
plugins {
    id 'java'
}

group 'com.example'
version '1.0-SNAPSHOT'

// è®¾ç½®Javaç‰ˆæœ¬
sourceCompatibility = 1.8
targetCompatibility = 1.8

// è®¾ç½®ç¼–ç 
tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

// é…ç½®Mavenä¸­å¤®ä»“åº“
repositories {
    mavenCentral()
}

// ä¾èµ–é…ç½®
dependencies {
    // MyBatisæ ¸å¿ƒ
    implementation 'org.mybatis:mybatis:3.5.13'
    
    // MySQLé©±åŠ¨
    implementation 'mysql:mysql-connector-java:8.0.33'
    
    // æ—¥å¿—æ¡†æ¶
    implementation 'org.slf4j:slf4j-api:1.7.36'
    implementation 'ch.qos.logback:logback-classic:1.2.11'
    
    // æµ‹è¯•æ¡†æ¶
    testImplementation 'junit:junit:4.13.2'
}
```

### 3.3 Gradleä¾èµ–é…ç½®è¯´æ˜


**ä¾èµ–ä½œç”¨åŸŸï¼š**
- `implementation` - ç¼–è¯‘å’Œè¿è¡Œæ—¶éƒ½éœ€è¦
- `testImplementation` - ä»…æµ‹è¯•æ—¶éœ€è¦
- `compileOnly` - ä»…ç¼–è¯‘æ—¶éœ€è¦
- `runtimeOnly` - ä»…è¿è¡Œæ—¶éœ€è¦

---

## 4. ğŸ“ é¡¹ç›®ç»“æ„è§„åˆ’


### 4.1 æ ‡å‡†é¡¹ç›®ç›®å½•ç»“æ„


```
mybatis-demo/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ main/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ java/                    # Javaæºä»£ç 
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ com/example/
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ entity/          # å®ä½“ç±»ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ mapper/          # Mapperæ¥å£
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ service/         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ Main.java        # ä¸»ç¨‹åºå…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ resources/               # é…ç½®æ–‡ä»¶å’Œèµ„æº
â”‚   â”‚       â”œâ”€â”€ ğŸ“ mapper/              # Mapper XMLæ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ mybatis-config.xml   # MyBatisæ ¸å¿ƒé…ç½®
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ db.properties        # æ•°æ®åº“é…ç½®
â”‚   â”‚       â””â”€â”€ ğŸ“„ logback.xml          # æ—¥å¿—é…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ test/                        # æµ‹è¯•ä»£ç 
â”‚       â””â”€â”€ ğŸ“ java/
â”‚           â””â”€â”€ ğŸ“ com/example/
â”‚               â””â”€â”€ ğŸ“„ MapperTest.java
â”‚
â”œâ”€â”€ ğŸ“„ pom.xml / build.gradle           # æ„å»ºé…ç½®æ–‡ä»¶
â””â”€â”€ ğŸ“„ README.md                        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### 4.2 ç›®å½•èŒè´£è¯´æ˜


| ç›®å½•/æ–‡ä»¶ | èŒè´£è¯´æ˜ | é‡è¦ç¨‹åº¦ |
|----------|---------|---------|
| `entity/` | å­˜æ”¾JavaBeanï¼Œå¯¹åº”æ•°æ®åº“è¡¨ç»“æ„ | ğŸ”¥ğŸ”¥ğŸ”¥ |
| `mapper/` (java) | å­˜æ”¾Mapperæ¥å£ï¼Œå®šä¹‰æ•°æ®åº“æ“ä½œæ–¹æ³• | ğŸ”¥ğŸ”¥ğŸ”¥ |
| `mapper/` (resources) | å­˜æ”¾Mapper XMLï¼Œç¼–å†™SQLè¯­å¥ | ğŸ”¥ğŸ”¥ğŸ”¥ |
| `mybatis-config.xml` | MyBatiså…¨å±€é…ç½®æ–‡ä»¶ | ğŸ”¥ğŸ”¥ğŸ”¥ |
| `service/` | ä¸šåŠ¡é€»è¾‘å±‚ï¼Œè°ƒç”¨Mapperå®Œæˆä¸šåŠ¡ | ğŸ”¥ğŸ”¥ |
| `db.properties` | æ•°æ®åº“è¿æ¥ä¿¡æ¯é…ç½® | ğŸ”¥ğŸ”¥ |

> âš ï¸ **å‘½åè§„èŒƒå»ºè®®**
> 
> - **å®ä½“ç±»ï¼š** `User.java`, `Order.java` ï¼ˆé¦–å­—æ¯å¤§å†™ï¼Œå•æ•°å½¢å¼ï¼‰
> - **Mapperæ¥å£ï¼š** `UserMapper.java`, `OrderMapper.java`
> - **Mapper XMLï¼š** `UserMapper.xml`, `OrderMapper.xml`
> - **ä¿æŒä¸€è‡´ï¼š** æ¥å£å’ŒXMLæ–‡ä»¶åå¿…é¡»å®Œå…¨ä¸€è‡´

### 4.3 åˆ›å»ºåŸºç¡€ç»“æ„


**åœ¨IDEAä¸­å¿«é€Ÿåˆ›å»ºï¼š**

```
æ­¥éª¤ 1ï¸âƒ£ï¼šå³é”® src/main/java â†’ New â†’ Package
       è¾“å…¥ï¼šcom.example.entity

æ­¥éª¤ 2ï¸âƒ£ï¼šå³é”® src/main/java â†’ New â†’ Package  
       è¾“å…¥ï¼šcom.example.mapper

æ­¥éª¤ 3ï¸âƒ£ï¼šå³é”® src/main/resources â†’ New â†’ Directory
       è¾“å…¥ï¼šmapper
```

---

## 5. ğŸ”Œ æ•°æ®åº“è¿æ¥é…ç½®


### 5.1 åˆ›å»ºæ•°æ®åº“é…ç½®æ–‡ä»¶


**æ–‡ä»¶ä½ç½®ï¼š** `src/main/resources/db.properties`

```properties
# MySQLæ•°æ®åº“è¿æ¥é…ç½®
jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/mybatis_demo?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf8
jdbc.username=root
jdbc.password=123456
```

> ğŸ’¡ **é…ç½®å‚æ•°è¯¦è§£**
> 
> **URLå‚æ•°è¯´æ˜ï¼š**
> - `localhost:3306` - æ•°æ®åº“æœåŠ¡å™¨åœ°å€å’Œç«¯å£
> - `mybatis_demo` - æ•°æ®åº“åç§°
> - `useSSL=false` - å…³é—­SSLè¿æ¥ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
> - `serverTimezone=Asia/Shanghai` - è®¾ç½®æ—¶åŒº
> - `characterEncoding=utf8` - è®¾ç½®å­—ç¬¦ç¼–ç 

### 5.2 åˆ›å»ºMyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶


**æ–‡ä»¶ä½ç½®ï¼š** `src/main/resources/mybatis-config.xml`

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    
    <!-- è¯»å–æ•°æ®åº“é…ç½®æ–‡ä»¶ -->
    <properties resource="db.properties"/>
    
    <!-- å…¨å±€è®¾ç½® -->
    <settings>
        <!-- å¼€å¯é©¼å³°å‘½åæ˜ å°„ï¼šuser_name â†’ userName -->
        <setting name="mapUnderscoreToCamelCase" value="true"/>
        <!-- å¼€å¯æ—¥å¿— -->
        <setting name="logImpl" value="STDOUT_LOGGING"/>
    </settings>
    
    <!-- ç±»å‹åˆ«åï¼šç®€åŒ–å®ä½“ç±»çš„å¼•ç”¨ -->
    <typeAliases>
        <package name="com.example.entity"/>
    </typeAliases>
    
    <!-- ç¯å¢ƒé…ç½® -->
    <environments default="development">
        <environment id="development">
            <!-- äº‹åŠ¡ç®¡ç†å™¨ -->
            <transactionManager type="JDBC"/>
            <!-- æ•°æ®æºé…ç½® -->
            <dataSource type="POOLED">
                <property name="driver" value="${jdbc.driver}"/>
                <property name="url" value="${jdbc.url}"/>
                <property name="username" value="${jdbc.username}"/>
                <property name="password" value="${jdbc.password}"/>
            </dataSource>
        </environment>
    </environments>
    
    <!-- æ³¨å†ŒMapper -->
    <mappers>
        <!-- æ–¹å¼1ï¼šå•ä¸ªæ³¨å†Œ -->
        <!-- <mapper resource="mapper/UserMapper.xml"/> -->
        
        <!-- æ–¹å¼2ï¼šåŒ…æ‰«ææ³¨å†Œï¼ˆæ¨èï¼‰ -->
        <package name="com.example.mapper"/>
    </mappers>
    
</configuration>
```

### 5.3 é…ç½®æ–‡ä»¶æ ¸å¿ƒæ ‡ç­¾è¯´æ˜


```
MyBatisé…ç½®æ–‡ä»¶ç»“æ„ï¼š
â”Œâ”€ <configuration>  æ ¹å…ƒç´ 
â”‚
â”œâ”€ <properties>     å¤–éƒ¨é…ç½®æ–‡ä»¶å¼•å…¥
â”‚
â”œâ”€ <settings>       å…¨å±€é…ç½®è®¾ç½®
â”‚
â”œâ”€ <typeAliases>    ç±»å‹åˆ«åé…ç½®
â”‚
â”œâ”€ <environments>   ç¯å¢ƒé…ç½®ï¼ˆæ•°æ®åº“è¿æ¥ï¼‰
â”‚  â””â”€ <environment> 
â”‚     â”œâ”€ <transactionManager>  äº‹åŠ¡ç®¡ç†
â”‚     â””â”€ <dataSource>           æ•°æ®æº
â”‚
â””â”€ <mappers>        Mapperæ³¨å†Œ
```

**å¸¸ç”¨settingsé…ç½®ï¼š**

| é…ç½®é¡¹ | ä½œç”¨ | æ¨èå€¼ |
|-------|------|-------|
| `mapUnderscoreToCamelCase` | å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³° | `true` |
| `cacheEnabled` | å¼€å¯äºŒçº§ç¼“å­˜ | `true` |
| `lazyLoadingEnabled` | å¼€å¯å»¶è¿ŸåŠ è½½ | `false` |
| `logImpl` | æ—¥å¿—å®ç° | `STDOUT_LOGGING` / `SLF4J` |

---

## 6. ğŸ“ æ—¥å¿—æ¡†æ¶é›†æˆ


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—ï¼Ÿ


**æ—¥å¿—çš„ä½œç”¨ï¼š**
- ğŸ” **è°ƒè¯•ä»£ç ** - æŸ¥çœ‹SQLæ‰§è¡Œè¿‡ç¨‹
- ğŸ“Š **æ€§èƒ½åˆ†æ** - ç›‘æ§SQLæ‰§è¡Œæ—¶é—´
- ğŸ› **é”™è¯¯æ’æŸ¥** - å¿«é€Ÿå®šä½é—®é¢˜
- ğŸ“ˆ **è¿è¡Œç›‘æ§** - ç”Ÿäº§ç¯å¢ƒé—®é¢˜è¿½è¸ª

### 6.2 æ—¥å¿—çº§åˆ«è¯´æ˜


```
æ—¥å¿—çº§åˆ«ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
ERROR  ğŸ”´  é”™è¯¯ä¿¡æ¯ï¼Œç³»ç»Ÿæ•…éšœ
 â†“
WARN   ğŸŸ¡  è­¦å‘Šä¿¡æ¯ï¼Œæ½œåœ¨é—®é¢˜
 â†“
INFO   ğŸ”µ  ä¸€èˆ¬ä¿¡æ¯ï¼Œä¸šåŠ¡æµç¨‹
 â†“
DEBUG  ğŸŸ¢  è°ƒè¯•ä¿¡æ¯ï¼Œè¯¦ç»†è¿‡ç¨‹
 â†“
TRACE  âšª  è¿½è¸ªä¿¡æ¯ï¼Œæœ€è¯¦ç»†
```

> ğŸ’¡ **å¼€å‘å»ºè®®**
> 
> - **å¼€å‘ç¯å¢ƒï¼š** ä½¿ç”¨ `DEBUG` çº§åˆ«ï¼ŒæŸ¥çœ‹è¯¦ç»†SQL
> - **æµ‹è¯•ç¯å¢ƒï¼š** ä½¿ç”¨ `INFO` çº§åˆ«ï¼Œè®°å½•å…³é”®æ“ä½œ
> - **ç”Ÿäº§ç¯å¢ƒï¼š** ä½¿ç”¨ `WARN` æˆ– `ERROR` çº§åˆ«ï¼Œåªè®°å½•é—®é¢˜

### 6.3 Logbackæ—¥å¿—é…ç½®


**æ–‡ä»¶ä½ç½®ï¼š** `src/main/resources/logback.xml`

```xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    
    <!-- æ§åˆ¶å°è¾“å‡º -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    
    <!-- æ–‡ä»¶è¾“å‡º -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/mybatis.log</file>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/mybatis.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
    </appender>
    
    <!-- MyBatisæ—¥å¿—é…ç½® -->
    <logger name="com.example.mapper" level="DEBUG"/>
    
    <!-- æ ¹æ—¥å¿—é…ç½® -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>
    
</configuration>
```

### 6.4 æ—¥å¿—è¾“å‡ºç¤ºä¾‹


**é…ç½®æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ï¼š**

```
14:23:45.123 [main] DEBUG com.example.mapper.UserMapper.selectById - ==>  Preparing: SELECT * FROM user WHERE id = ?
14:23:45.145 [main] DEBUG com.example.mapper.UserMapper.selectById - ==> Parameters: 1(Integer)
14:23:45.167 [main] DEBUG com.example.mapper.UserMapper.selectById - <==      Total: 1
```

**æ—¥å¿—è§£è¯»ï¼š**
- `==>` è¡¨ç¤ºSQLå‡†å¤‡é˜¶æ®µ
- `Preparing:` åé¢æ˜¯é¢„ç¼–è¯‘çš„SQL
- `Parameters:` æ˜¯ä¼ å…¥çš„å‚æ•°å€¼
- `<==` è¡¨ç¤ºSQLæ‰§è¡Œå®Œæˆ
- `Total:` æ˜¯è¿”å›çš„è®°å½•æ•°

---

## 7. ğŸ”§ å¼€å‘å·¥å…·é…ç½®


### 7.1 IDEAæ’ä»¶æ¨è


**å¿…è£…æ’ä»¶ï¼š**

| æ’ä»¶åç§° | ä½œç”¨ | é‡è¦åº¦ |
|---------|------|--------|
| `MyBatisX` | Mapperè·³è½¬ã€ä»£ç ç”Ÿæˆ | â­â­â­â­â­ |
| `Free MyBatis Plugin` | XMLä¸æ¥å£å¯¼èˆª | â­â­â­â­ |
| `Maven Helper` | Mavenä¾èµ–åˆ†æ | â­â­â­ |
| `Rainbow Brackets` | å½©è™¹æ‹¬å· | â­â­ |

**å®‰è£…æ­¥éª¤ï¼š**
```
æ­¥éª¤ 1ï¸âƒ£ï¼šFile â†’ Settings â†’ Plugins
æ­¥éª¤ 2ï¸âƒ£ï¼šæœç´¢æ’ä»¶åç§°
æ­¥éª¤ 3ï¸âƒ£ï¼šç‚¹å‡» Install
æ­¥éª¤ 4ï¸âƒ£ï¼šé‡å¯ IDEA
```

### 7.2 IDEAå¿«æ·é”®é…ç½®


**å¸¸ç”¨å¿«æ·é”®ï¼š**
- <kbd>Ctrl</kbd> + <kbd>N</kbd> - å¿«é€ŸæŸ¥æ‰¾ç±»
- <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>N</kbd> - å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶
- <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>B</kbd> - è·³è½¬åˆ°å®ç°ç±»
- <kbd>Alt</kbd> + <kbd>Enter</kbd> - å¿«é€Ÿä¿®å¤
- <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>L</kbd> - æ ¼å¼åŒ–ä»£ç 

### 7.3 æ•°æ®åº“å·¥å…·é…ç½®


**åœ¨IDEAä¸­é…ç½®æ•°æ®åº“è¿æ¥ï¼š**

```
æ­¥éª¤ 1ï¸âƒ£ï¼šç‚¹å‡»å³ä¾§ Database é¢æ¿
æ­¥éª¤ 2ï¸âƒ£ï¼šç‚¹å‡» + å· â†’ Data Source â†’ MySQL
æ­¥éª¤ 3ï¸âƒ£ï¼šå¡«å†™è¿æ¥ä¿¡æ¯ï¼š
        Host: localhost
        Port: 3306
        Database: mybatis_demo
        User: root
        Password: 123456
æ­¥éª¤ 4ï¸âƒ£ï¼šç‚¹å‡» Test Connection
æ­¥éª¤ 5ï¸âƒ£ï¼šæµ‹è¯•æˆåŠŸåç‚¹å‡» OK
```

---

## 8. ğŸ› è°ƒè¯•ç¯å¢ƒæ­å»º


### 8.1 ç¼–å†™æµ‹è¯•ä»£ç 


**åˆ›å»ºæµ‹è¯•ç±»ï¼š** `src/test/java/com/example/MybatisTest.java`

```java
public class MybatisTest {
    
    @Test
    public void testEnvironment() throws IOException {
        // 1. è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶
        String resource = "mybatis-config.xml";
        InputStream inputStream = Resources.getResourceAsStream(resource);
        
        // 2. åˆ›å»ºSqlSessionFactory
        SqlSessionFactory sqlSessionFactory = 
            new SqlSessionFactoryBuilder().build(inputStream);
        
        // 3. è·å–SqlSession
        SqlSession sqlSession = sqlSessionFactory.openSession();
        
        // 4. æµ‹è¯•è¾“å‡º
        System.out.println("MyBatisç¯å¢ƒæ­å»ºæˆåŠŸï¼");
        System.out.println("SqlSession: " + sqlSession);
        
        // 5. å…³é—­èµ„æº
        sqlSession.close();
    }
}
```

### 8.2 è¿è¡Œæµ‹è¯•éªŒè¯


**è¿è¡Œæµ‹è¯•çš„æ–¹å¼ï¼š**

```
æ–¹å¼ 1ï¸âƒ£ï¼šå³é”®æµ‹è¯•ç±» â†’ Run 'MybatisTest'
æ–¹å¼ 2ï¸âƒ£ï¼šç‚¹å‡»æ–¹æ³•å·¦ä¾§çš„ç»¿è‰²ä¸‰è§’ â–¶ï¸
æ–¹å¼ 3ï¸âƒ£ï¼šä½¿ç”¨å¿«æ·é”® Ctrl + Shift + F10
```

**æˆåŠŸæ ‡å¿—ï¼š**
```
âœ… æ§åˆ¶å°è¾“å‡ºï¼šMyBatisç¯å¢ƒæ­å»ºæˆåŠŸï¼
âœ… æ— æŠ¥é”™ä¿¡æ¯
âœ… æ˜¾ç¤º SqlSession å¯¹è±¡ä¿¡æ¯
```

### 8.3 å¸¸è§é”™è¯¯æ’æŸ¥


**é”™è¯¯ 1ï¼šæ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶**
```
é”™è¯¯ä¿¡æ¯ï¼šCould not find resource mybatis-config.xml
è§£å†³æ–¹æ¡ˆï¼š
  âœ“ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨ src/main/resources ç›®å½•ä¸‹
  âœ“ æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
  âœ“ Mavené¡¹ç›®éœ€è¦æ‰§è¡Œ mvn clean compile
```

**é”™è¯¯ 2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥**
```
é”™è¯¯ä¿¡æ¯ï¼šCommunications link failure
è§£å†³æ–¹æ¡ˆï¼š
  âœ“ æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å¯åŠ¨
  âœ“ æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
  âœ“ æ£€æŸ¥ç«¯å£å·æ˜¯å¦æ­£ç¡®ï¼ˆMySQLé»˜è®¤3306ï¼‰
  âœ“ æ£€æŸ¥æ—¶åŒºé…ç½® serverTimezone=Asia/Shanghai
```

**é”™è¯¯ 3ï¼šæ‰¾ä¸åˆ°é©±åŠ¨ç±»**
```
é”™è¯¯ä¿¡æ¯ï¼šCould not load JDBC driver class
è§£å†³æ–¹æ¡ˆï¼š
  âœ“ æ£€æŸ¥pom.xmlä¸­æ˜¯å¦æ·»åŠ äº†mysql-connector-javaä¾èµ–
  âœ“ Mavenä¾èµ–æ˜¯å¦ä¸‹è½½æˆåŠŸ
  âœ“ æ‰§è¡Œ mvn clean install é‡æ–°ä¸‹è½½ä¾èµ–
```

### 8.4 è°ƒè¯•æŠ€å·§


**æ–­ç‚¹è°ƒè¯•æµç¨‹ï¼š**

```
è®¾ç½®æ–­ç‚¹ â†’ è¿è¡ŒDebugæ¨¡å¼ â†’ è§‚å¯Ÿå˜é‡å€¼ â†’ å•æ­¥æ‰§è¡Œ
    â†“           â†“              â†“            â†“
åœ¨ä»£ç è¡Œ     å³é”®é€‰æ‹©        æŸ¥çœ‹å¯¹è±¡      F8ä¸‹ä¸€æ­¥
å·¦ä¾§ç‚¹å‡»     Debugè¿è¡Œ       å†…éƒ¨çŠ¶æ€      F7è¿›å…¥æ–¹æ³•
```

**ç›‘æ§SQLæ‰§è¡Œï¼š**
- å¼€å¯ `STDOUT_LOGGING` æ—¥å¿—
- è§‚å¯Ÿæ§åˆ¶å°SQLè¾“å‡º
- æ£€æŸ¥å‚æ•°ç»‘å®šæ˜¯å¦æ­£ç¡®
- ç¡®è®¤è¿”å›ç»“æœæ•°é‡

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 ç¯å¢ƒæ­å»ºæ£€æŸ¥æ¸…å•


**åŸºç¡€ç¯å¢ƒï¼š**
- [ ] âœ… JDK 8+ å·²å®‰è£…å¹¶é…ç½®ç¯å¢ƒå˜é‡
- [ ] âœ… Maven/Gradle å·²å®‰è£…
- [ ] âœ… IDEA å¼€å‘å·¥å…·å·²å®‰è£…
- [ ] âœ… MySQL æ•°æ®åº“å·²å®‰è£…å¹¶å¯åŠ¨

**é¡¹ç›®é…ç½®ï¼š**
- [ ] âœ… åˆ›å»ºMaven/Gradleé¡¹ç›®
- [ ] âœ… æ·»åŠ MyBatisæ ¸å¿ƒä¾èµ–
- [ ] âœ… æ·»åŠ æ•°æ®åº“é©±åŠ¨ä¾èµ–
- [ ] âœ… é…ç½® mybatis-config.xml
- [ ] âœ… é…ç½® db.properties
- [ ] âœ… é…ç½®æ—¥å¿—æ¡†æ¶

**ç›®å½•ç»“æ„ï¼š**
- [ ] âœ… åˆ›å»º entity åŒ…
- [ ] âœ… åˆ›å»º mapper åŒ…ï¼ˆjavaï¼‰
- [ ] âœ… åˆ›å»º mapper ç›®å½•ï¼ˆresourcesï¼‰
- [ ] âœ… åˆ›å»ºæµ‹è¯•ç±»

**éªŒè¯æµ‹è¯•ï¼š**
- [ ] âœ… è¿è¡Œæµ‹è¯•ä»£ç 
- [ ] âœ… æŸ¥çœ‹æ—¥å¿—è¾“å‡º
- [ ] âœ… ç¡®è®¤æ•°æ®åº“è¿æ¥æˆåŠŸ

### 9.2 æ ¸å¿ƒé…ç½®æ–‡ä»¶å¯¹æ¯”


| æ–‡ä»¶å | ä½ç½® | ä½œç”¨ | å¿…éœ€æ€§ |
|-------|------|------|--------|
| `pom.xml` / `build.gradle` | é¡¹ç›®æ ¹ç›®å½• | ä¾èµ–ç®¡ç† | âœ… å¿…éœ€ |
| `mybatis-config.xml` | `resources/` | MyBatiså…¨å±€é…ç½® | âœ… å¿…éœ€ |
| `db.properties` | `resources/` | æ•°æ®åº“è¿æ¥ä¿¡æ¯ | â­ æ¨è |
| `logback.xml` | `resources/` | æ—¥å¿—é…ç½® | â­ æ¨è |
| `XxxMapper.xml` | `resources/mapper/` | SQLæ˜ å°„æ–‡ä»¶ | âœ… å¿…éœ€ |

### 9.3 å­¦ä¹ è·¯çº¿å›¾


```
ç¯å¢ƒæ­å»ºå®Œæˆ âœ…
    â†“
å­¦ä¹ åŸºç¡€æŸ¥è¯¢
    â†“
æŒæ¡CRUDæ“ä½œ
    â†“
ç†è§£åŠ¨æ€SQL
    â†“
å­¦ä¹ é«˜çº§æ˜ å°„
    â†“
æŒæ¡ç¼“å­˜æœºåˆ¶
    â†“
é¡¹ç›®å®æˆ˜åº”ç”¨
```

### 9.4 ä¸‹ä¸€æ­¥å­¦ä¹ å†…å®¹


**å³å°†å­¦ä¹ ï¼š**
- ğŸ¯ MyBatisåŸºç¡€æŸ¥è¯¢æ“ä½œ
- ğŸ¯ å®ä½“ç±»ä¸æ•°æ®åº“æ˜ å°„
- ğŸ¯ Mapperæ¥å£å¼€å‘
- ğŸ¯ å¸¸ç”¨å¢åˆ æ”¹æŸ¥æ“ä½œ

> ğŸ‰ **æ­å–œä½ ï¼**
> 
> MyBatiså¼€å‘ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆï¼ç°åœ¨ä½ å·²ç»å…·å¤‡äº†ä½¿ç”¨MyBatisè¿›è¡Œæ•°æ®åº“å¼€å‘çš„åŸºç¡€æ¡ä»¶ã€‚
> 
> æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å­¦ä¹ å¦‚ä½•ä½¿ç”¨MyBatisæ“ä½œæ•°æ®åº“å§ï¼

---

**ğŸ”– å¿«é€Ÿå‚è€ƒ**

```java
// è·å–SqlSessionçš„æ ‡å‡†ä»£ç æ¨¡æ¿
String resource = "mybatis-config.xml";
InputStream inputStream = Resources.getResourceAsStream(resource);
SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(inputStream);
SqlSession session = factory.openSession();

try {
    // æ‰§è¡Œæ•°æ®åº“æ“ä½œ
    // ...
    session.commit(); // æäº¤äº‹åŠ¡
} finally {
    session.close(); // å…³é—­èµ„æº
}
```

**æ ¸å¿ƒè®°å¿†å£è¯€ï¼š**
> ç¯å¢ƒæ­å»ºå››æ­¥èµ°ï¼Œä¾èµ–é…ç½®ä¸èƒ½ä¸¢  
> ç›®å½•ç»“æ„è¦è§„èŒƒï¼Œé…ç½®æ–‡ä»¶è¦é…é½  
> æ—¥å¿—æ¡†æ¶åŠ©è°ƒè¯•ï¼Œæµ‹è¯•éªŒè¯ä¿æ— è¯¯