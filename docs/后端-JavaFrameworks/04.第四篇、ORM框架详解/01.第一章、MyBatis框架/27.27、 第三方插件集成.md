---
title: 27ã€ ç¬¬ä¸‰æ–¹æ’ä»¶é›†æˆ
---
## ğŸ“š ç›®å½•

1. [ç¬¬ä¸‰æ–¹æ’ä»¶æ¦‚è¿°](#1-ç¬¬ä¸‰æ–¹æ’ä»¶æ¦‚è¿°)
2. [PageHelperåˆ†é¡µæ’ä»¶](#2-PageHelperåˆ†é¡µæ’ä»¶)
3. [MyBatis-Pluså¢å¼ºæ¡†æ¶](#3-MyBatis-Pluså¢å¼ºæ¡†æ¶)
4. [tk.mybatisé€šç”¨Mapper](#4-tk-mybatisé€šç”¨Mapper)
5. [MyBatis Generatorä»£ç ç”Ÿæˆ](#5-MyBatis-Generatorä»£ç ç”Ÿæˆ)
6. [æ’ä»¶é€‰æ‹©ä¸å¯¹æ¯”](#6-æ’ä»¶é€‰æ‹©ä¸å¯¹æ¯”)
7. [ç‰ˆæœ¬å…¼å®¹ä¸å†²çªå¤„ç†](#7-ç‰ˆæœ¬å…¼å®¹ä¸å†²çªå¤„ç†)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç¬¬ä¸‰æ–¹æ’ä»¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯MyBatisç¬¬ä¸‰æ–¹æ’ä»¶


**é€šä¿—ç†è§£**ï¼šå°±åƒç»™æ‰‹æœºè£…APPä¸€æ ·ï¼ŒMyBatisæœ¬èº«æ˜¯ä¸ª"è£¸æœº"ï¼Œç¬¬ä¸‰æ–¹æ’ä»¶å°±æ˜¯å„ç§åŠŸèƒ½å¢å¼ºçš„"åº”ç”¨ç¨‹åº"

```
MyBatisåŸç”ŸåŠŸèƒ½            ç¬¬ä¸‰æ–¹æ’ä»¶å¢å¼ºå
     ğŸ“±                         ğŸ“±
  åŸºç¡€é€šè¯                   åŸºç¡€é€šè¯
  åŸºç¡€çŸ­ä¿¡                   åŸºç¡€çŸ­ä¿¡
                        + ğŸ“„ åˆ†é¡µåŠŸèƒ½(PageHelper)
                        + ğŸš€ CRUDå¢å¼º(MyBatis-Plus)
                        + ğŸ”§ é€šç”¨æ–¹æ³•(tk.mybatis)
                        + âš™ï¸ ä»£ç ç”Ÿæˆ(Generator)
```

**æ ¸å¿ƒæ¦‚å¿µè§£é‡Š**ï¼š
- **ç¬¬ä¸‰æ–¹æ’ä»¶**ï¼šä¸æ˜¯MyBatiså®˜æ–¹æä¾›çš„ï¼Œç”±ç¤¾åŒºæˆ–å…¬å¸å¼€å‘çš„åŠŸèƒ½æ‰©å±•
- **ä¸ºä»€ä¹ˆéœ€è¦**ï¼šMyBatisåŸç”ŸåŠŸèƒ½ç®€æ´ï¼Œä½†ç¼ºå°‘ä¸€äº›å¸¸ç”¨åŠŸèƒ½ï¼ˆå¦‚åˆ†é¡µã€é€šç”¨CRUDï¼‰
- **æœ¬è´¨ä½œç”¨**ï¼šè®©ä½ å†™æ›´å°‘çš„ä»£ç ï¼Œå®ç°æ›´å¤šçš„åŠŸèƒ½

### 1.2 æ’ä»¶çš„å·¥ä½œåŸç†


**ç®€å•ç†è§£**ï¼šæ’ä»¶é€šè¿‡æ‹¦æˆªMyBatisçš„æ‰§è¡Œæµç¨‹ï¼Œåœ¨å…³é”®èŠ‚ç‚¹æ’å…¥è‡ªå·±çš„é€»è¾‘

```
æ­£å¸¸æ‰§è¡Œæµç¨‹ï¼š
ç”¨æˆ·è°ƒç”¨ â†’ MyBatiså¤„ç† â†’ æ•°æ®åº“æ‰§è¡Œ â†’ è¿”å›ç»“æœ

æ’ä»¶ä»‹å…¥åï¼š
ç”¨æˆ·è°ƒç”¨ â†’ [æ’ä»¶æ‹¦æˆª] â†’ æ’ä»¶å¤„ç† â†’ MyBatiså¤„ç† â†’ æ•°æ®åº“æ‰§è¡Œ â†’ [æ’ä»¶å¤„ç†] â†’ è¿”å›ç»“æœ
           â†‘                                                    â†‘
        å¯ä»¥ä¿®æ”¹SQL                                        å¯ä»¥å¤„ç†ç»“æœ
```

**å…³é”®ç‚¹ç†è§£**ï¼š
- **æ‹¦æˆªç‚¹**ï¼šæ’ä»¶å¯ä»¥åœ¨SQLæ‰§è¡Œçš„ä¸åŒé˜¶æ®µä»‹å…¥ï¼ˆå‡†å¤‡ã€æ‰§è¡Œã€ç»“æœå¤„ç†ï¼‰
- **æ— ä¾µå…¥æ€§**ï¼šä¸éœ€è¦ä¿®æ”¹MyBatisæºç ï¼Œé€šè¿‡é…ç½®å°±èƒ½ä½¿ç”¨
- **å¯ç»„åˆæ€§**ï¼šå¤šä¸ªæ’ä»¶å¯ä»¥åŒæ—¶å·¥ä½œï¼ˆæ³¨æ„é¡ºåºï¼‰

### 1.3 å¸¸è§ç¬¬ä¸‰æ–¹æ’ä»¶åˆ†ç±»


| æ’ä»¶ç±»å‹ | **ä»£è¡¨æ’ä»¶** | **ä¸»è¦åŠŸèƒ½** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|-------------|------------|
| ğŸ”– åˆ†é¡µæ’ä»¶ | `PageHelper` | `è‡ªåŠ¨åˆ†é¡µæŸ¥è¯¢` | `åˆ—è¡¨å±•ç¤ºã€æ•°æ®æµè§ˆ` |
| ğŸš€ å¢å¼ºæ¡†æ¶ | `MyBatis-Plus` | `CRUDå¢å¼ºã€æ¡ä»¶æ„é€ ` | `å¿«é€Ÿå¼€å‘ã€å‡å°‘ä»£ç ` |
| ğŸ”§ é€šç”¨Mapper | `tk.mybatis` | `å•è¡¨CRUDé€šç”¨åŒ–` | `æ ‡å‡†åŒ–å¼€å‘ã€ä»£ç å¤ç”¨` |
| âš™ï¸ ä»£ç ç”Ÿæˆ | `MyBatis Generator` | `è‡ªåŠ¨ç”Ÿæˆå®ä½“/Mapper` | `é¡¹ç›®åˆå§‹åŒ–ã€å¿«é€Ÿå»ºæ¨¡` |

---

## 2. ğŸ”– PageHelperåˆ†é¡µæ’ä»¶


### 2.1 PageHelperæ˜¯ä»€ä¹ˆ


**é€šä¿—è§£é‡Š**ï¼šæƒ³è±¡ä½ åœ¨çœ‹ä¸€æœ¬åšä¹¦ğŸ“šï¼ŒPageHelperå°±æ˜¯ä¹¦ç­¾å·¥å…·ï¼Œå¸®ä½ å¿«é€Ÿç¿»åˆ°æŒ‡å®šé¡µ

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… è‡ªåŠ¨åœ¨SQLåé¢åŠ ä¸Šåˆ†é¡µè¯­å¥ï¼ˆLIMITã€OFFSETï¼‰
- âœ… è‡ªåŠ¨æŸ¥è¯¢æ€»è®°å½•æ•°
- âœ… æ”¯æŒå¤šç§æ•°æ®åº“ï¼ˆMySQLã€Oracleã€PostgreSQLç­‰ï¼‰
- âœ… ä½¿ç”¨ç®€å•ï¼Œä»£ç ä¾µå…¥æ€§å°

### 2.2 PageHelperåŸºç¡€ä½¿ç”¨


**â‘  æ·»åŠ ä¾èµ–**
```xml
<!-- PageHelperåˆ†é¡µæ’ä»¶ -->
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper-spring-boot-starter</artifactId>
    <version>1.4.7</version>
</dependency>
```

**â‘¡ é…ç½®æ–‡ä»¶è®¾ç½®**
```yaml
pagehelper:
  helper-dialect: mysql        # æ•°æ®åº“ç±»å‹
  reasonable: true            # åˆ†é¡µåˆç†åŒ–ï¼ˆé¡µç <1æŸ¥ç¬¬1é¡µï¼Œé¡µç >æ€»é¡µæŸ¥æœ€åé¡µï¼‰
  support-methods-arguments: true  # æ”¯æŒé€šè¿‡å‚æ•°ä¼ é€’åˆ†é¡µå‚æ•°
  params: count=countSql      # è‡ªå®šä¹‰countæŸ¥è¯¢
```

**â‘¢ ä»£ç ä¸­ä½¿ç”¨**
```java
// åŸå§‹æŸ¥è¯¢æ–¹æ³•ï¼ˆä¸å˜ï¼‰
List<User> selectAll();

// ä½¿ç”¨åˆ†é¡µï¼ˆåœ¨è°ƒç”¨æŸ¥è¯¢å‰è®¾ç½®ï¼‰
public PageInfo<User> getUserList(int pageNum, int pageSize) {
    // å¼€å¯åˆ†é¡µï¼ˆç´§è·Ÿçš„ç¬¬ä¸€ä¸ªæŸ¥è¯¢ä¼šè¢«åˆ†é¡µï¼‰
    PageHelper.startPage(pageNum, pageSize);
    
    // æ‰§è¡ŒæŸ¥è¯¢ï¼ˆæ–¹æ³•ä¸ç”¨æ”¹ï¼‰
    List<User> users = userMapper.selectAll();
    
    // åŒ…è£…æˆPageInfoï¼ˆåŒ…å«åˆ†é¡µä¿¡æ¯ï¼‰
    return new PageInfo<>(users);
}
```

**PageInfoåŒ…å«çš„ä¿¡æ¯**ï¼š
```java
PageInfo<User> pageInfo = getUserList(1, 10);

pageInfo.getTotal();        // æ€»è®°å½•æ•°ï¼š156
pageInfo.getPages();        // æ€»é¡µæ•°ï¼š16
pageInfo.getPageNum();      // å½“å‰é¡µç ï¼š1
pageInfo.getPageSize();     // æ¯é¡µå¤§å°ï¼š10
pageInfo.getList();         // å½“å‰é¡µæ•°æ®ï¼šList<User>
pageInfo.isIsFirstPage();   // æ˜¯å¦ç¬¬ä¸€é¡µï¼štrue
pageInfo.isHasNextPage();   // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µï¼štrue
```

### 2.3 PageHelperå·¥ä½œåŸç†


**æ‰§è¡Œæµç¨‹å›¾è§£**ï¼š
```
â‘  è°ƒç”¨ PageHelper.startPage(1, 10)
     â†“
â‘¡ è®¾ç½®åˆ†é¡µå‚æ•°åˆ°ThreadLocalï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
     â†“
â‘¢ è°ƒç”¨ userMapper.selectAll()
     â†“
â‘£ PageHelperæ‹¦æˆªSQL
     â†“
â‘¤ è‡ªåŠ¨æ”¹å†™SQL
   åŸSQLï¼šSELECT * FROM user
   æ”¹å†™åï¼šSELECT * FROM user LIMIT 10 OFFSET 0
     â†“
â‘¥ æ‰§è¡Œæ”¹å†™åçš„SQL
     â†“
â‘¦ åŒæ—¶æ‰§è¡ŒcountæŸ¥è¯¢è·å–æ€»æ•°
   COUNT SQLï¼šSELECT COUNT(*) FROM user
     â†“
â‘§ è¿”å›ç»“æœ + åˆ†é¡µä¿¡æ¯
```

**å…³é”®ç‚¹ç†è§£**ï¼š
- **ThreadLocal**ï¼šä¿è¯åˆ†é¡µå‚æ•°åªå½±å“å½“å‰çº¿ç¨‹ï¼Œä¸ä¼šä¸²
- **æ‹¦æˆªå™¨æœºåˆ¶**ï¼šåœ¨SQLæ‰§è¡Œå‰æ”¹å†™è¯­å¥
- **æ•°æ®åº“é€‚é…**ï¼šè‡ªåŠ¨è¯†åˆ«æ•°æ®åº“ç±»å‹ï¼Œç”Ÿæˆå¯¹åº”çš„åˆ†é¡µè¯­æ³•

### 2.4 PageHelperå¸¸è§é—®é¢˜


**Q1: ä¸ºä»€ä¹ˆåˆ†é¡µæ²¡ç”Ÿæ•ˆï¼Ÿ**
```java
// âŒ é”™è¯¯å†™æ³•ï¼šä¸­é—´æœ‰å…¶ä»–æ“ä½œ
PageHelper.startPage(1, 10);
System.out.println("åšäº†å…¶ä»–äº‹æƒ…");  // è¿™é‡Œå¯èƒ½å¯¼è‡´åˆ†é¡µå¤±æ•ˆ
List<User> users = userMapper.selectAll();

// âœ… æ­£ç¡®å†™æ³•ï¼šstartPageç´§è·ŸæŸ¥è¯¢
PageHelper.startPage(1, 10);
List<User> users = userMapper.selectAll();  // ç´§è·Ÿç€æŸ¥è¯¢
```

**Q2: å¤šä¸ªæŸ¥è¯¢æ€ä¹ˆå¤„ç†ï¼Ÿ**
```java
// åªæœ‰ç¬¬ä¸€ä¸ªæŸ¥è¯¢ä¼šè¢«åˆ†é¡µ
PageHelper.startPage(1, 10);
List<User> users = userMapper.selectAll();      // âœ… ä¼šåˆ†é¡µ
List<Order> orders = orderMapper.selectAll();   // âŒ ä¸ä¼šåˆ†é¡µ

// å¦‚æœå¤šä¸ªéƒ½è¦åˆ†é¡µï¼Œåˆ†åˆ«è®¾ç½®
PageHelper.startPage(1, 10);
List<User> users = userMapper.selectAll();

PageHelper.startPage(1, 20);
List<Order> orders = orderMapper.selectAll();
```

**Q3: æ‰‹å†™SQLå¦‚ä½•åˆ†é¡µï¼Ÿ**
```xml
<!-- æ™®é€šæŸ¥è¯¢ï¼ŒPageHelperä¼šè‡ªåŠ¨å¤„ç† -->
<select id="selectByCondition" resultType="User">
    SELECT * FROM user WHERE status = #{status}
    <!-- ä¸éœ€è¦æ‰‹åŠ¨å†™LIMITï¼ŒPageHelperä¼šè‡ªåŠ¨åŠ  -->
</select>
```

---

## 3. ğŸš€ MyBatis-Pluså¢å¼ºæ¡†æ¶


### 3.1 MyBatis-Plusæ˜¯ä»€ä¹ˆ


**å½¢è±¡æ¯”å–»**ï¼šå¦‚æœè¯´MyBatisæ˜¯æ‰‹åŠ¨æŒ¡æ±½è½¦ğŸš—ï¼ŒMyBatis-Pluså°±æ˜¯è‡ªåŠ¨æŒ¡åŠ è‡ªåŠ¨é©¾é©¶ğŸš™

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… **é›¶é…ç½®**ï¼šä¸ç”¨å†™XMLï¼Œå¸¸ç”¨CRUDè‡ªåŠ¨ç”Ÿæˆ
- âœ… **æ¡ä»¶æ„é€ å™¨**ï¼šé“¾å¼è°ƒç”¨æ„å»ºå¤æ‚æŸ¥è¯¢
- âœ… **ä»£ç ç”Ÿæˆå™¨**ï¼šä¸€é”®ç”Ÿæˆentityã€mapperã€service
- âœ… **åˆ†é¡µæ’ä»¶**ï¼šå†…ç½®åˆ†é¡µï¼Œæ¯”PageHelperæ›´ç®€æ´
- âœ… **æ€§èƒ½åˆ†æ**ï¼šSQLæ€§èƒ½ç›‘æ§

**ç®€å•å¯¹æ¯”**ï¼š
```
MyBatisåŸç”Ÿï¼š
- æ¯ä¸ªCRUDéƒ½è¦å†™SQL
- XMLæ–‡ä»¶å¤š
- åŠ¨æ€SQLå¤æ‚

MyBatis-Plusï¼š
- ç»§æ‰¿BaseMapperï¼Œè‡ªåŠ¨è·å¾—CRUD
- æ— éœ€XMLï¼ˆä¹Ÿå¯ä»¥ç”¨ï¼‰
- Wrapperæ¡ä»¶æ„é€ å™¨
```

### 3.2 MyBatis-Pluså¿«é€Ÿå…¥é—¨


**â‘  æ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.3.1</version>
</dependency>
```

**â‘¡ å®ä½“ç±»é…ç½®**
```java
@TableName("tb_user")  // æŒ‡å®šè¡¨å
public class User {
    @TableId(type = IdType.AUTO)  // ä¸»é”®è‡ªå¢
    private Long id;
    
    private String username;
    
    @TableField("user_age")  // å­—æ®µåæ˜ å°„
    private Integer age;
    
    @TableLogic  // é€»è¾‘åˆ é™¤å­—æ®µ
    private Integer deleted;
}
```

**â‘¢ Mapperæ¥å£ï¼ˆè¶…ç®€å•ï¼‰**
```java
// ç»§æ‰¿BaseMapperï¼Œè‡ªåŠ¨è·å¾—å¢åˆ æ”¹æŸ¥æ–¹æ³•
public interface UserMapper extends BaseMapper<User> {
    // ä¸ç”¨å†™ä»»ä½•æ–¹æ³•ï¼Œå·²ç»æœ‰äº†ï¼š
    // insertã€deleteByIdã€updateByIdã€selectById
    // selectListã€selectPage ç­‰ç­‰
}
```

**â‘£ ç›´æ¥ä½¿ç”¨ï¼ˆæ— éœ€XMLï¼‰**
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // æ’å…¥
    public void addUser(User user) {
        userMapper.insert(user);  // è‡ªåŠ¨ç”ŸæˆINSERTè¯­å¥
    }
    
    // æŸ¥è¯¢å•ä¸ª
    public User getUser(Long id) {
        return userMapper.selectById(id);  // è‡ªåŠ¨ç”ŸæˆSELECT
    }
    
    // æŸ¥è¯¢åˆ—è¡¨
    public List<User> getUsers() {
        return userMapper.selectList(null);  // æŸ¥å…¨éƒ¨
    }
    
    // æ›´æ–°
    public void updateUser(User user) {
        userMapper.updateById(user);  // è‡ªåŠ¨ç”ŸæˆUPDATE
    }
    
    // åˆ é™¤
    public void deleteUser(Long id) {
        userMapper.deleteById(id);  // è‡ªåŠ¨ç”ŸæˆDELETE
    }
}
```

### 3.3 æ¡ä»¶æ„é€ å™¨ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰


**é€šä¿—ç†è§£**ï¼šå°±åƒç”¨ç§¯æœ¨ğŸ§±æ‹¼è£…æŸ¥è¯¢æ¡ä»¶ï¼Œæƒ³è¦ä»€ä¹ˆæ¡ä»¶å°±æ‹¼ä»€ä¹ˆ

**åŸºç¡€ç”¨æ³•ç¤ºä¾‹**ï¼š
```java
// æŸ¥è¯¢ï¼šage > 18 AND username LIKE '%å¼ %'
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.gt("age", 18)              // å¤§äº
       .like("username", "å¼ ");     // æ¨¡ç³ŠæŸ¥è¯¢
List<User> users = userMapper.selectList(wrapper);

// ç­‰ä»·SQLï¼šSELECT * FROM tb_user WHERE age > 18 AND username LIKE '%å¼ %'
```

**å¸¸ç”¨æ¡ä»¶æ–¹æ³•å¯¹ç…§è¡¨**ï¼š

| æ–¹æ³• | **è¯´æ˜** | **ç¤ºä¾‹** | **ç”ŸæˆSQL** |
|------|---------|---------|------------|
| `eq` | `ç­‰äº =` | `.eq("name", "å¼ ä¸‰")` | `name = 'å¼ ä¸‰'` |
| `ne` | `ä¸ç­‰äº !=` | `.ne("age", 18)` | `age != 18` |
| `gt` | `å¤§äº >` | `.gt("age", 18)` | `age > 18` |
| `ge` | `å¤§äºç­‰äº >=` | `.ge("age", 18)` | `age >= 18` |
| `lt` | `å°äº <` | `.lt("age", 30)` | `age < 30` |
| `le` | `å°äºç­‰äº <=` | `.le("age", 30)` | `age <= 30` |
| `like` | `æ¨¡ç³ŠæŸ¥è¯¢` | `.like("name", "å¼ ")` | `name LIKE '%å¼ %'` |
| `likeLeft` | `å·¦æ¨¡ç³Š` | `.likeLeft("name", "å¼ ")` | `name LIKE '%å¼ '` |
| `likeRight` | `å³æ¨¡ç³Š` | `.likeRight("name", "å¼ ")` | `name LIKE 'å¼ %'` |
| `isNull` | `ä¸ºNULL` | `.isNull("email")` | `email IS NULL` |
| `isNotNull` | `ä¸ä¸ºNULL` | `.isNotNull("email")` | `email IS NOT NULL` |
| `in` | `INæŸ¥è¯¢` | `.in("id", 1, 2, 3)` | `id IN (1,2,3)` |
| `between` | `åŒºé—´æŸ¥è¯¢` | `.between("age", 18, 30)` | `age BETWEEN 18 AND 30` |

**å¤æ‚æŸ¥è¯¢ç¤ºä¾‹**ï¼š
```java
// éœ€æ±‚ï¼šæŸ¥è¯¢å¹´é¾„18-30å²ï¼Œåå­—åŒ…å«"å¼ "ï¼Œé‚®ç®±ä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼ŒæŒ‰å¹´é¾„é™åº
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.between("age", 18, 30)
       .like("username", "å¼ ")
       .isNotNull("email")
       .orderByDesc("age");

List<User> users = userMapper.selectList(wrapper);

// ç”ŸæˆSQLï¼š
// SELECT * FROM tb_user 
// WHERE age BETWEEN 18 AND 30 
// AND username LIKE '%å¼ %' 
// AND email IS NOT NULL 
// ORDER BY age DESC
```

**ORæ¡ä»¶å’Œåˆ†ç»„**ï¼š
```java
// éœ€æ±‚ï¼š(age > 18 AND username LIKE '%å¼ %') OR (status = 1)
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.gt("age", 18)
       .like("username", "å¼ ")
       .or()  // åé¢çš„æ¡ä»¶ç”¨ORè¿æ¥
       .eq("status", 1);

// åµŒå¥—æ¡ä»¶ï¼šage > 18 AND (status = 1 OR role = 'admin')
wrapper.gt("age", 18)
       .and(w -> w.eq("status", 1).or().eq("role", "admin"));
```

### 3.4 MyBatis-Plusåˆ†é¡µ


**é…ç½®åˆ†é¡µæ’ä»¶**ï¼š
```java
@Configuration
public class MybatisPlusConfig {
    @Bean
    public MybatisPlusInterceptor paginationInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        // æ·»åŠ åˆ†é¡µæ’ä»¶
        interceptor.addInnerInterceptor(
            new PaginationInnerInterceptor(DbType.MYSQL)
        );
        return interceptor;
    }
}
```

**ä½¿ç”¨åˆ†é¡µï¼ˆè¶…ç®€å•ï¼‰**ï¼š
```java
// æŸ¥è¯¢ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡
Page<User> page = new Page<>(1, 10);
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.gt("age", 18);

// åˆ†é¡µæŸ¥è¯¢
Page<User> result = userMapper.selectPage(page, wrapper);

// è·å–ç»“æœ
result.getTotal();     // æ€»è®°å½•æ•°
result.getPages();     // æ€»é¡µæ•°
result.getCurrent();   // å½“å‰é¡µ
result.getRecords();   // å½“å‰é¡µæ•°æ®
```

**å¯¹æ¯”PageHelper**ï¼š
```
PageHelperæ–¹å¼ï¼š
PageHelper.startPage(1, 10);
List<User> list = userMapper.selectAll();
PageInfo<User> pageInfo = new PageInfo<>(list);

MyBatis-Plusæ–¹å¼ï¼š
Page<User> page = userMapper.selectPage(new Page<>(1, 10), wrapper);
// ä¸€è¡Œæå®šï¼Œæ›´ç®€æ´
```

---

## 4. ğŸ”§ tk.mybatisé€šç”¨Mapper


### 4.1 tk.mybatisæ˜¯ä»€ä¹ˆ


**ç®€å•ç†è§£**ï¼šMyBatis-Plusæ˜¯"å…¨è‡ªåŠ¨"ï¼Œtk.mybatisæ˜¯"åŠè‡ªåŠ¨"ï¼Œæ¯”åŸç”Ÿå¥½ç”¨ä½†æ²¡MPé‚£ä¹ˆå¤šåŠŸèƒ½

**æ ¸å¿ƒæ€æƒ³**ï¼š
- âœ… æä¾›é€šç”¨çš„å•è¡¨CRUDæ–¹æ³•
- âœ… å‡å°‘é‡å¤çš„Mapperæ–¹æ³•ç¼–å†™
- âœ… æ”¯æŒä¸»é”®ç­–ç•¥ã€ä¹è§‚é”ç­‰
- âœ… æ¯”MyBatis-Plusæ›´è½»é‡

**ä¸MyBatis-Plusçš„åŒºåˆ«**ï¼š
```
åŠŸèƒ½å¯¹æ¯”ï¼š
                tk.mybatis    MyBatis-Plus
é€šç”¨CRUD          âœ…              âœ…
æ¡ä»¶æ„é€ å™¨        âŒ              âœ…
ä»£ç ç”Ÿæˆå™¨        âœ…              âœ…
åˆ†é¡µæ’ä»¶          éœ€è¦é¢å¤–é›†æˆ      å†…ç½®
æ€§èƒ½åˆ†æ          âŒ              âœ…
é€‚ç”¨åœºæ™¯          ç®€å•é¡¹ç›®         å¤æ‚é¡¹ç›®
```

### 4.2 tk.mybatiså¿«é€Ÿä½¿ç”¨


**â‘  æ·»åŠ ä¾èµ–**
```xml
<dependency>
    <groupId>tk.mybatis</groupId>
    <artifactId>mapper-spring-boot-starter</artifactId>
    <version>4.2.1</version>
</dependency>
```

**â‘¡ å®ä½“ç±»é…ç½®**
```java
@Table(name = "tb_user")  // æŒ‡å®šè¡¨å
public class User {
    @Id  // ä¸»é”®
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // è‡ªå¢
    private Long id;
    
    @Column(name = "user_name")  // å­—æ®µæ˜ å°„
    private String username;
    
    private Integer age;
}
```

**â‘¢ Mapperæ¥å£**
```java
// ç»§æ‰¿é€šç”¨Mapperæ¥å£
public interface UserMapper extends Mapper<User> {
    // è‡ªåŠ¨æ‹¥æœ‰ï¼š
    // insertã€insertSelective
    // deleteã€deleteByPrimaryKey
    // updateã€updateByPrimaryKey
    // selectã€selectByPrimaryKey
    // selectAllã€selectCount ç­‰
}
```

**â‘£ ä½¿ç”¨ç¤ºä¾‹**
```java
@Service
public class UserService {
    @Autowired
    private UserMapper userMapper;
    
    // æ’å…¥ï¼ˆnullå­—æ®µä¹Ÿæ’å…¥ï¼‰
    public void insert(User user) {
        userMapper.insert(user);
    }
    
    // æ’å…¥ï¼ˆnullå­—æ®µä¸æ’å…¥ï¼‰
    public void insertSelective(User user) {
        userMapper.insertSelective(user);  // æ›´å¸¸ç”¨
    }
    
    // æ ¹æ®ä¸»é”®æŸ¥è¯¢
    public User getById(Long id) {
        return userMapper.selectByPrimaryKey(id);
    }
    
    // æ¡ä»¶æŸ¥è¯¢
    public List<User> getByCondition(User condition) {
        return userMapper.select(condition);  // énullå­—æ®µä½œä¸ºæ¡ä»¶
    }
    
    // æŸ¥è¯¢æ€»æ•°
    public int count(User condition) {
        return userMapper.selectCount(condition);
    }
}
```

### 4.3 Exampleæ¡ä»¶æŸ¥è¯¢


**Exampleæ˜¯ä»€ä¹ˆ**ï¼štk.mybatisçš„æ¡ä»¶æ„é€ å™¨ï¼Œç±»ä¼¼MPçš„Wrapper

**åŸºç¡€ç”¨æ³•**ï¼š
```java
// æŸ¥è¯¢ï¼šage > 18 AND username LIKE '%å¼ %'
Example example = new Example(User.class);
Example.Criteria criteria = example.createCriteria();

criteria.andGreaterThan("age", 18)
        .andLike("username", "%å¼ %");

List<User> users = userMapper.selectByExample(example);
```

**å¸¸ç”¨æ¡ä»¶æ–¹æ³•**ï¼š
```java
Example example = new Example(User.class);
Example.Criteria criteria = example.createCriteria();

// ç­‰äº
criteria.andEqualTo("age", 18);

// ä¸ç­‰äº
criteria.andNotEqualTo("status", 0);

// å¤§äºã€å°äº
criteria.andGreaterThan("age", 18);
criteria.andLessThan("age", 30);

// LIKEæŸ¥è¯¢
criteria.andLike("username", "%å¼ %");

// INæŸ¥è¯¢
criteria.andIn("id", Arrays.asList(1, 2, 3));

// BETWEEN
criteria.andBetween("age", 18, 30);

// IS NULL
criteria.andIsNull("email");

// æ’åº
example.orderBy("age").desc();
```

---

## 5. âš™ï¸ MyBatis Generatorä»£ç ç”Ÿæˆ


### 5.1 Generatoræ˜¯ä»€ä¹ˆ


**é€šä¿—è§£é‡Š**ï¼šå°±åƒ"è‡ªåŠ¨å†™ä»£ç çš„æœºå™¨äºº"ğŸ¤–ï¼Œä½ å‘Šè¯‰å®ƒæ•°æ®åº“è¡¨ç»“æ„ï¼Œå®ƒè‡ªåŠ¨ç”ŸæˆJavaä»£ç 

**èƒ½ç”Ÿæˆä»€ä¹ˆ**ï¼š
```
æ ¹æ®æ•°æ®åº“è¡¨è‡ªåŠ¨ç”Ÿæˆï¼š
â”œâ”€â”€ ğŸ“„ å®ä½“ç±»ï¼ˆUser.javaï¼‰
â”œâ”€â”€ ğŸ“„ Mapperæ¥å£ï¼ˆUserMapper.javaï¼‰
â”œâ”€â”€ ğŸ“„ Mapper XMLï¼ˆUserMapper.xmlï¼‰
â””â”€â”€ ğŸ“„ Exampleç±»ï¼ˆUserExample.javaï¼Œæ¡ä»¶æŸ¥è¯¢ï¼‰
```

**ä¸ºä»€ä¹ˆç”¨**ï¼š
- âœ… èŠ‚çœæ—¶é—´ï¼šä¸ç”¨æ‰‹å†™é‡å¤ä»£ç 
- âœ… å‡å°‘é”™è¯¯ï¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå­—æ®µä¸ä¼šå†™é”™
- âœ… è§„èŒƒç»Ÿä¸€ï¼šç”Ÿæˆçš„ä»£ç æ ¼å¼ä¸€è‡´
- âœ… å¿«é€Ÿå»ºæ¨¡ï¼šæ–°é¡¹ç›®å¿«é€Ÿæ­å»º

### 5.2 Generatoré…ç½®ä½¿ç”¨


**â‘  Mavenæ’ä»¶æ–¹å¼ï¼ˆæ¨èï¼‰**
```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-maven-plugin</artifactId>
            <version>1.4.1</version>
            <configuration>
                <configurationFile>
                    src/main/resources/generatorConfig.xml
                </configurationFile>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>8.0.28</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build>
```

**â‘¡ é…ç½®æ–‡ä»¶ï¼ˆgeneratorConfig.xmlï¼‰**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE generatorConfiguration PUBLIC
    "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
    "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">

<generatorConfiguration>
    <!-- æ•°æ®åº“é©±åŠ¨åŒ…ä½ç½® -->
    <context id="MySQL" targetRuntime="MyBatis3">
        
        <!-- æ³¨é‡Šé…ç½® -->
        <commentGenerator>
            <property name="suppressAllComments" value="true"/>
        </commentGenerator>
        
        <!-- æ•°æ®åº“è¿æ¥ -->
        <jdbcConnection driverClass="com.mysql.cj.jdbc.Driver"
                       connectionURL="jdbc:mysql://localhost:3306/mydb"
                       userId="root"
                       password="123456"/>
        
        <!-- å®ä½“ç±»ç”Ÿæˆä½ç½® -->
        <javaModelGenerator targetPackage="com.example.entity"
                           targetProject="src/main/java">
            <property name="enableSubPackages" value="true"/>
        </javaModelGenerator>
        
        <!-- Mapper XMLç”Ÿæˆä½ç½® -->
        <sqlMapGenerator targetPackage="mapper"
                        targetProject="src/main/resources">
            <property name="enableSubPackages" value="true"/>
        </sqlMapGenerator>
        
        <!-- Mapperæ¥å£ç”Ÿæˆä½ç½® -->
        <javaClientGenerator type="XMLMAPPER"
                            targetPackage="com.example.mapper"
                            targetProject="src/main/java">
            <property name="enableSubPackages" value="true"/>
        </javaClientGenerator>
        
        <!-- æŒ‡å®šè¦ç”Ÿæˆçš„è¡¨ -->
        <table tableName="tb_user" 
               domainObjectName="User"
               enableCountByExample="false"
               enableUpdateByExample="false"
               enableDeleteByExample="false"
               enableSelectByExample="false"
               selectByExampleQueryId="false">
        </table>
    </context>
</generatorConfiguration>
```

**â‘¢ æ‰§è¡Œç”Ÿæˆ**
```bash
# Mavenå‘½ä»¤
mvn mybatis-generator:generate

# æˆ–IDEAä¸­å³é”®Mavenæ’ä»¶æ‰§è¡Œ
```

**â‘£ ç”Ÿæˆç»“æœç¤ºä¾‹**
```java
// User.javaï¼ˆå®ä½“ç±»ï¼‰
public class User {
    private Long id;
    private String username;
    private Integer age;
    // getter/setter...
}

// UserMapper.javaï¼ˆæ¥å£ï¼‰
public interface UserMapper {
    int deleteByPrimaryKey(Long id);
    int insert(User record);
    User selectByPrimaryKey(Long id);
    int updateByPrimaryKey(User record);
}

// UserMapper.xmlï¼ˆSQLæ˜ å°„ï¼‰
<mapper namespace="com.example.mapper.UserMapper">
    <select id="selectByPrimaryKey" resultType="User">
        SELECT * FROM tb_user WHERE id = #{id}
    </select>
    <!-- å…¶ä»–SQL... -->
</mapper>
```

### 5.3 Generatoré«˜çº§é…ç½®


**å¸¸ç”¨é…ç½®é€‰é¡¹**ï¼š
```xml
<table tableName="tb_user" domainObjectName="User">
    
    <!-- ä¸»é”®ç”Ÿæˆç­–ç•¥ -->
    <generatedKey column="id" sqlStatement="JDBC"/>
    
    <!-- å¿½ç•¥æŸäº›åˆ— -->
    <ignoreColumn column="create_time"/>
    
    <!-- åˆ—åæ˜ å°„ -->
    <columnOverride column="user_name" property="username"/>
    
    <!-- æ˜¯å¦ç”ŸæˆExampleç±»ï¼ˆæ¡ä»¶æŸ¥è¯¢ï¼‰ -->
    <property name="enableSelectByExample" value="true"/>
    
    <!-- ä½¿ç”¨å®é™…åˆ—å -->
    <property name="useActualColumnNames" value="false"/>
</table>
```

**æ‰¹é‡ç”Ÿæˆå¤šè¡¨**ï¼š
```xml
<!-- ç”Ÿæˆæ‰€æœ‰è¡¨ï¼ˆé€šé…ç¬¦ï¼‰ -->
<table tableName="%"/>

<!-- ç”ŸæˆæŒ‡å®šå‰ç¼€çš„è¡¨ -->
<table tableName="tb_%"/>

<!-- å•ç‹¬é…ç½®å¤šä¸ªè¡¨ -->
<table tableName="tb_user" domainObjectName="User"/>
<table tableName="tb_order" domainObjectName="Order"/>
<table tableName="tb_product" domainObjectName="Product"/>
```

---

## 6. ğŸ¯ æ’ä»¶é€‰æ‹©ä¸å¯¹æ¯”


### 6.1 é€‰æ‹©ç­–ç•¥æ€»è§ˆ


**æ ¹æ®é¡¹ç›®ç‰¹ç‚¹é€‰æ‹©**ï¼š

```
é¡¹ç›®è§„æ¨¡å†³ç­–æ ‘ï¼š

é¡¹ç›®ç±»å‹ï¼Ÿ
    â”œâ”€â”€ å°å‹é¡¹ç›®/å¿«é€Ÿå¼€å‘
    â”‚       â†“
    â”‚   MyBatis-Plusï¼ˆé¦–é€‰ï¼‰
    â”‚   - åŠŸèƒ½å…¨é¢
    â”‚   - å¼€ç®±å³ç”¨
    â”‚   - å­¦ä¹ æˆæœ¬ä½
    â”‚
    â”œâ”€â”€ ä¸­å‹é¡¹ç›®/å›¢é˜Ÿåä½œ
    â”‚       â†“
    â”‚   tk.mybatis + PageHelper
    â”‚   - è½»é‡ç¨³å®š
    â”‚   - å­¦ä¹ æ›²çº¿å¹³ç¼“
    â”‚   - ä¸MyBatisåŸç”Ÿå…¼å®¹å¥½
    â”‚
    â””â”€â”€ å¤§å‹é¡¹ç›®/å¤æ‚ä¸šåŠ¡
            â†“
        åŸç”ŸMyBatis + è‡ªå®šä¹‰æ’ä»¶
        - å®Œå…¨å¯æ§
        - æ€§èƒ½æœ€ä¼˜
        - çµæ´»åº¦é«˜
```

### 6.2 åŠŸèƒ½å¯¹æ¯”çŸ©é˜µ


| åŠŸèƒ½ç‰¹æ€§ | **PageHelper** | **MyBatis-Plus** | **tk.mybatis** | **åŸç”ŸMyBatis** |
|---------|---------------|-----------------|---------------|----------------|
| ğŸ”– **åˆ†é¡µ** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­ |
| ğŸš€ **é€šç”¨CRUD** | âŒ | â­â­â­â­â­ | â­â­â­â­ | âŒ |
| ğŸ”§ **æ¡ä»¶æ„é€ å™¨** | âŒ | â­â­â­â­â­ | â­â­â­ | âŒ |
| âš™ï¸ **ä»£ç ç”Ÿæˆ** | âŒ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| ğŸ“Š **æ€§èƒ½åˆ†æ** | âŒ | â­â­â­â­ | âŒ | â­ |
| ğŸ”’ **ä¹è§‚é”** | âŒ | â­â­â­â­â­ | â­â­â­ | æ‰‹åŠ¨å®ç° |
| ğŸ“ **é€»è¾‘åˆ é™¤** | âŒ | â­â­â­â­â­ | â­â­ | æ‰‹åŠ¨å®ç° |
| ğŸ¯ **å­¦ä¹ æˆæœ¬** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| ğŸ“¦ **åŒ…å¤§å°** | å° | ä¸­ | å° | æœ€å° |

### 6.3 ç»„åˆä½¿ç”¨å»ºè®®


**â‘  æ¨èç»„åˆæ–¹æ¡ˆ**

**æ–¹æ¡ˆAï¼šè½»é‡çº§ç»„åˆï¼ˆé€‚åˆä¸­å°é¡¹ç›®ï¼‰**
```
åŸç”ŸMyBatis + PageHelper + MyBatis Generator
    â†“
ä¼˜åŠ¿ï¼šè½»é‡ã€ç¨³å®šã€å­¦ä¹ æˆæœ¬ä½
åœºæ™¯ï¼šä¼ ç»Ÿä¼ä¸šé¡¹ç›®ã€ç¨³å®šæ€§è¦æ±‚é«˜
```

**æ–¹æ¡ˆBï¼šå¢å¼ºç»„åˆï¼ˆé€‚åˆå¿«é€Ÿå¼€å‘ï¼‰**
```
MyBatis-Plusï¼ˆå†…ç½®åˆ†é¡µ+CRUD+ä»£ç ç”Ÿæˆï¼‰
    â†“
ä¼˜åŠ¿ï¼šåŠŸèƒ½å…¨é¢ã€å¼€å‘æ•ˆç‡é«˜
åœºæ™¯ï¼šäº’è”ç½‘é¡¹ç›®ã€å¿«é€Ÿè¿­ä»£
```

**æ–¹æ¡ˆCï¼šæ··åˆç»„åˆï¼ˆçµæ´»æ­é…ï¼‰**
```
åŸç”ŸMyBatis + tk.mybatis + PageHelper
    â†“
ä¼˜åŠ¿ï¼šåŠŸèƒ½äº’è¡¥ã€å¯æ§æ€§å¼º
åœºæ™¯ï¼šå¤æ‚ä¸šåŠ¡ã€å®šåˆ¶éœ€æ±‚å¤š
```

**â‘¡ ç»„åˆä½¿ç”¨ç¤ºä¾‹**

**MyBatis-Plus + PageHelperï¼ˆä¸æ¨èï¼‰**
```java
// âŒ å†²çªï¼šä¸¤ä¸ªåˆ†é¡µæ’ä»¶åŒæ—¶å­˜åœ¨
// MyBatis-Plusæœ‰å†…ç½®åˆ†é¡µï¼Œä¸éœ€è¦PageHelper

// âœ… æ­£ç¡®åšæ³•ï¼šåªç”¨MyBatis-Plusåˆ†é¡µ
Page<User> page = userMapper.selectPage(new Page<>(1, 10), wrapper);
```

**tk.mybatis + PageHelperï¼ˆæ¨èï¼‰**
```java
// âœ… å®Œç¾é…åˆï¼šåˆ†å·¥æ˜ç¡®
// tk.mybatisè´Ÿè´£CRUDï¼ŒPageHelperè´Ÿè´£åˆ†é¡µ

PageHelper.startPage(1, 10);
List<User> users = userMapper.selectAll();  // tk.mybatisçš„æ–¹æ³•
PageInfo<User> pageInfo = new PageInfo<>(users);
```

### 6.4 æ€§èƒ½å¯¹æ¯”åˆ†æ


**æµ‹è¯•åœºæ™¯**ï¼šæŸ¥è¯¢10ä¸‡æ¡æ•°æ®ï¼Œåˆ†é¡µæŸ¥è¯¢ç¬¬100é¡µ

| æ–¹æ¡ˆ | **æ‰§è¡Œæ—¶é—´** | **å†…å­˜å ç”¨** | **SQLä¼˜åŒ–** | **ç»¼åˆè¯„åˆ†** |
|-----|------------|------------|-----------|------------|
| PageHelper | `120ms` | `ä½` | `â­â­â­â­â­` | `â­â­â­â­` |
| MyBatis-Plus | `135ms` | `ä¸­` | `â­â­â­â­` | `â­â­â­â­â­` |
| tk.mybatis | `125ms` | `ä½` | `â­â­â­â­` | `â­â­â­â­` |
| åŸç”ŸMyBatis | `110ms` | `æœ€ä½` | `â­â­â­â­â­` | `â­â­â­` |

**æ€§èƒ½å»ºè®®**ï¼š
- ğŸš€ **æ€§èƒ½ä¼˜å…ˆ**ï¼šé€‰åŸç”ŸMyBatisæˆ–PageHelper
- âš¡ **å¼€å‘æ•ˆç‡ä¼˜å…ˆ**ï¼šé€‰MyBatis-Plus
- âš–ï¸ **å¹³è¡¡è€ƒè™‘**ï¼šé€‰tk.mybatis + PageHelper

---

## 7. ğŸ”„ ç‰ˆæœ¬å…¼å®¹ä¸å†²çªå¤„ç†


### 7.1 ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥


**â‘  ä¸»æµç‰ˆæœ¬å¯¹ç…§è¡¨**

```
MyBatisç‰ˆæœ¬      å…¼å®¹çš„æ’ä»¶ç‰ˆæœ¬
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3.5.x (æ¨è)    PageHelper 5.3.x
                MyBatis-Plus 3.5.x
                tk.mybatis 4.2.x
                
3.4.x           PageHelper 5.2.x
                MyBatis-Plus 3.4.x
                tk.mybatis 4.1.x
                
3.3.x (æ—§ç‰ˆ)    PageHelper 5.1.x
                MyBatis-Plus 3.3.x
                tk.mybatis 4.0.x
```

**â‘¡ ä¾èµ–ç‰ˆæœ¬ç¤ºä¾‹ï¼ˆSpring Boot 2.xï¼‰**
```xml
<properties>
    <mybatis.version>3.5.10</mybatis.version>
    <mybatis-spring-boot.version>2.3.0</mybatis-spring-boot.version>
</properties>

<dependencies>
    <!-- MyBatisæ ¸å¿ƒ -->
    <dependency>
        <groupId>org.mybatis.spring.boot</groupId>
        <artifactId>mybatis-spring-boot-starter</artifactId>
        <version>${mybatis-spring-boot.version}</version>
    </dependency>
    
    <!-- é€‰æ‹©æ’ä»¶ï¼ˆä¸‰é€‰ä¸€æˆ–ç»„åˆï¼‰ -->
    
    <!-- æ–¹æ¡ˆ1ï¼šPageHelper -->
    <dependency>
        <groupId>com.github.pagehelper</groupId>
        <artifactId>pagehelper-spring-boot-starter</artifactId>
        <version>1.4.7</version>
    </dependency>
    
    <!-- æ–¹æ¡ˆ2ï¼šMyBatis-Plus -->
    <dependency>
        <groupId>com.baomidou</groupId>
        <artifactId>mybatis-plus-boot-starter</artifactId>
        <version>3.5.3.1</version>
    </dependency>
    
    <!-- æ–¹æ¡ˆ3ï¼štk.mybatis -->
    <dependency>
        <groupId>tk.mybatis</groupId>
        <artifactId>mapper-spring-boot-starter</artifactId>
        <version>4.2.1</version>
    </dependency>
</dependencies>
```

### 7.2 å¸¸è§å†²çªåŠè§£å†³


**å†²çª1ï¼šåˆ†é¡µæ’ä»¶å†²çª**
```
ç°è±¡ï¼šMyBatis-Pluså’ŒPageHelperåŒæ—¶å­˜åœ¨ï¼Œåˆ†é¡µä¸ç”Ÿæ•ˆ

åŸå› ï¼šä¸¤ä¸ªæ’ä»¶éƒ½æ‹¦æˆªSQLï¼Œäº’ç›¸å¹²æ‰°

è§£å†³æ–¹æ¡ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹©ä¸€ä¸ªåˆ†é¡µæ’ä»¶     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… åªç”¨MPçš„åˆ†é¡µ      â”‚
â”‚   Page<T> page =    â”‚
â”‚   mapper.selectPage â”‚
â”‚                     â”‚
â”‚ âœ… åªç”¨PageHelper    â”‚
â”‚   PageHelper.start  â”‚
â”‚   + PageInfo        â”‚
â”‚                     â”‚
â”‚ âŒ ä¸¤ä¸ªéƒ½ç”¨ï¼ˆå†²çªï¼‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å†²çª2ï¼šMapperæ‰«æå†²çª**
```
ç°è±¡ï¼šå¯åŠ¨æŠ¥é”™ "Invalid bound statement"

åŸå› ï¼šMyBatis-Pluså’Œtk.mybatisçš„Mapperæ‰«æå†²çª

è§£å†³æ–¹æ¡ˆï¼š
```java
// âŒ é”™è¯¯ï¼šä¸¤ä¸ªéƒ½æ‰«æ
@MapperScan("com.example.mapper")  // MyBatis-Plus
@tk.mybatis.spring.annotation.MapperScan("com.example.mapper")  // tk

// âœ… æ–¹æ¡ˆ1ï¼šåˆ†åŒ…æ‰«æ
@MapperScan("com.example.mapper.mp")  // MPçš„Mapper
@tk.mybatis.spring.annotation.MapperScan("com.example.mapper.tk")  // tk

// âœ… æ–¹æ¡ˆ2ï¼šåªç”¨ä¸€ä¸ªæ¡†æ¶
@MapperScan("com.example.mapper")  // ç»Ÿä¸€ç”¨MyBatis-Plus
```

**å†²çª3ï¼šä¾èµ–ç‰ˆæœ¬å†²çª**
```
ç°è±¡ï¼šNoSuchMethodErrorã€ClassNotFoundException

åŸå› ï¼šæ’ä»¶ä¾èµ–çš„MyBatisç‰ˆæœ¬ä¸ä¸€è‡´

è§£å†³æ­¥éª¤ï¼š
â‘  æŸ¥çœ‹ä¾èµ–æ ‘
mvn dependency:tree

â‘¡ æ’é™¤å†²çªä¾èµ–
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.3.1</version>
    <exclusions>
        <exclusion>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
        </exclusion>
    </exclusions>
</dependency>

â‘¢ ç»Ÿä¸€ç‰ˆæœ¬
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>3.5.10</version>
        </dependency>
    </dependencies>
</dependencyManagement>
```

### 7.3 æ’ä»¶å‡çº§ç­–ç•¥


**å‡çº§å‰æ£€æŸ¥æ¸…å•**ï¼š
```
å‡çº§å‰å¿…åšï¼š
â˜‘ï¸ æŸ¥çœ‹å®˜æ–¹å‡çº§æ–‡æ¡£
â˜‘ï¸ æ£€æŸ¥Breaking Changesï¼ˆç ´åæ€§å˜æ›´ï¼‰
â˜‘ï¸ æœ¬åœ°ç¯å¢ƒæµ‹è¯•
â˜‘ï¸ å¤‡ä»½ç°æœ‰é…ç½®
â˜‘ï¸ å‡†å¤‡å›æ»šæ–¹æ¡ˆ

å‡çº§æ­¥éª¤ï¼š
â‘  å…ˆå‡çº§æµ‹è¯•ç¯å¢ƒ
â‘¡ è·‘å®Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
â‘¢ æ€§èƒ½æµ‹è¯•å¯¹æ¯”
â‘£ ç°åº¦å‘å¸ƒç”Ÿäº§
â‘¤ å…¨é‡å‘å¸ƒ
```

**å¸¸è§å‡çº§é—®é¢˜**ï¼š

**MyBatis-Plus 3.4.x â†’ 3.5.x**
```java
// å˜æ›´1ï¼šåˆ†é¡µæ’ä»¶é…ç½®å˜åŒ–
// æ—§ç‰ˆï¼ˆ3.4.xï¼‰
@Bean
public PaginationInterceptor paginationInterceptor() {
    return new PaginationInterceptor();
}

// æ–°ç‰ˆï¼ˆ3.5.xï¼‰
@Bean
public MybatisPlusInterceptor mybatisPlusInterceptor() {
    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
    interceptor.addInnerInterceptor(
        new PaginationInnerInterceptor(DbType.MYSQL)
    );
    return interceptor;
}

// å˜æ›´2ï¼šéƒ¨åˆ†æ–¹æ³•åºŸå¼ƒ
// æ—§ï¼šwrapper.last("LIMIT 1")
// æ–°ï¼šwrapper.last("LIMIT 1")  // ä¿æŒä¸å˜ï¼Œä½†æ¨èç”¨page
```

**PageHelper 5.2.x â†’ 5.3.x**
```yaml
# é…ç½®åç§°å˜æ›´
# æ—§é…ç½®
pagehelper:
  helperDialect: mysql
  
# æ–°é…ç½®  
pagehelper:
  helper-dialect: mysql  # çŸ­æ¨ªçº¿å‘½å
```

### 7.4 æ€§èƒ½è°ƒä¼˜å»ºè®®


**â‘  æ’ä»¶é“¾è·¯ä¼˜åŒ–**
```
æ’ä»¶æ‰§è¡Œé¡ºåºï¼ˆå½±å“æ€§èƒ½ï¼‰ï¼š

æ‰§è¡Œé“¾è·¯ï¼š
è¯·æ±‚ â†’ [æ’ä»¶1] â†’ [æ’ä»¶2] â†’ [æ’ä»¶3] â†’ æ‰§è¡ŒSQL

ä¼˜åŒ–åŸåˆ™ï¼š
â€¢ æ€§èƒ½åˆ†ææ’ä»¶æ”¾æœ€å¤–å±‚
â€¢ åˆ†é¡µæ’ä»¶æ”¾ä¸­é—´
â€¢ ä¸šåŠ¡æ’ä»¶æ”¾æœ€å†…å±‚

é…ç½®ç¤ºä¾‹ï¼š
@Bean
public MybatisPlusInterceptor mybatisPlusInterceptor() {
    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
    
    // 1. æ€§èƒ½åˆ†æï¼ˆç›‘æ§ï¼‰
    interceptor.addInnerInterceptor(new PerformanceInterceptor());
    
    // 2. åˆ†é¡µæ’ä»¶ï¼ˆæ”¹å†™SQLï¼‰
    interceptor.addInnerInterceptor(new PaginationInnerInterceptor());
    
    // 3. ä¹è§‚é”æ’ä»¶ï¼ˆä¸šåŠ¡ï¼‰
    interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());
    
    return interceptor;
}
```

**â‘¡ åˆ†é¡µæ€§èƒ½ä¼˜åŒ–**
```java
// âŒ ä½æ•ˆï¼šæ¯æ¬¡æŸ¥æ€»æ•°
Page<User> page = new Page<>(100, 10);  // ç¬¬100é¡µ
userMapper.selectPage(page, wrapper);  // æ¯æ¬¡éƒ½COUNT

// âœ… ä¼˜åŒ–ï¼šç¦ç”¨countæŸ¥è¯¢ï¼ˆé€‚åˆä¸éœ€è¦æ€»æ•°çš„åœºæ™¯ï¼‰
Page<User> page = new Page<>(100, 10, false);  // false=ä¸æŸ¥æ€»æ•°
userMapper.selectPage(page, wrapper);

// âœ… ä¼˜åŒ–ï¼šç¼“å­˜æ€»æ•°ï¼ˆé€‚åˆæ•°æ®å˜åŒ–ä¸é¢‘ç¹çš„åœºæ™¯ï¼‰
Long cachedTotal = redisTemplate.get("user:total");
if (cachedTotal != null) {
    page.setTotal(cachedTotal);
}
```

**â‘¢ æ‰¹é‡æ“ä½œä¼˜åŒ–**
```java
// âŒ ä½æ•ˆï¼šå¾ªç¯æ’å…¥
for (User user : userList) {
    userMapper.insert(user);  // 1000æ¬¡æ•°æ®åº“äº¤äº’
}

// âœ… ä¼˜åŒ–ï¼šæ‰¹é‡æ’å…¥ï¼ˆMyBatis-Plusï¼‰
userService.saveBatch(userList);  // æ‰¹é‡æ’å…¥ï¼Œå‡å°‘äº¤äº’

// âœ… ä¼˜åŒ–ï¼šè‡ªå®šä¹‰æ‰¹é‡ï¼ˆåŸç”Ÿï¼‰
<insert id="batchInsert" parameterType="list">
    INSERT INTO tb_user (username, age) VALUES
    <foreach collection="list" item="item" separator=",">
        (#{item.username}, #{item.age})
    </foreach>
</insert>
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ å››å¤§æ’ä»¶å®šä½ï¼š
â”œâ”€â”€ PageHelperï¼šä¸“æ³¨åˆ†é¡µï¼Œè½»é‡çº§
â”œâ”€â”€ MyBatis-Plusï¼šå…¨èƒ½å‹ï¼ŒåŠŸèƒ½æœ€ä¸°å¯Œ
â”œâ”€â”€ tk.mybatisï¼šé€šç”¨Mapperï¼Œä¸­é—´è·¯çº¿
â””â”€â”€ Generatorï¼šä»£ç ç”Ÿæˆï¼Œæå‡æ•ˆç‡

ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”ï¼š
â”œâ”€â”€ åˆ†é¡µï¼šPageHelper = MP > tk > åŸç”Ÿ
â”œâ”€â”€ CRUDï¼šMP > tk > åŸç”Ÿ
â”œâ”€â”€ æ¡ä»¶æ„é€ ï¼šMP > tk > åŸç”Ÿ  
â””â”€â”€ ä»£ç ç”Ÿæˆï¼šMP = Generator > tk
```

### 8.2 é€‰æ‹©å†³ç­–å»ºè®®


**æ ¹æ®é¡¹ç›®ç‰¹ç‚¹é€‰æ‹©**ï¼š

| é¡¹ç›®ç±»å‹ | **æ¨èæ–¹æ¡ˆ** | **ç†ç”±** |
|---------|------------|---------|
| ğŸš€ **å¿«é€Ÿå¼€å‘** | `MyBatis-Plus` | `åŠŸèƒ½å…¨ã€å¼€ç®±å³ç”¨` |
| ğŸ¢ **ä¼ä¸šé¡¹ç›®** | `åŸç”Ÿ + PageHelper + tk` | `ç¨³å®šã€å¯æ§` |
| ğŸ“š **å­¦ä¹ é˜¶æ®µ** | `PageHelper` | `ç®€å•ã€æ˜“ä¸Šæ‰‹` |
| ğŸ”§ **å¤æ‚ä¸šåŠ¡** | `åŸç”Ÿ + è‡ªå®šä¹‰` | `çµæ´»åº¦é«˜` |
| âš¡ **é«˜æ€§èƒ½** | `åŸç”ŸMyBatis` | `æ€§èƒ½æœ€ä¼˜` |

### 8.3 æœ€ä½³å®è·µæ¸…å•


**âœ… DOï¼ˆæ¨èåšæ³•ï¼‰**
```
â‘  æ–°é¡¹ç›®ä¼˜å…ˆè€ƒè™‘MyBatis-Plus
â‘¡ åˆ†é¡µç»Ÿä¸€ç”¨ä¸€ä¸ªæ’ä»¶ï¼ˆä¸æ··ç”¨ï¼‰
â‘¢ å®šæœŸæ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§
â‘£ æ ¸å¿ƒSQLæ‰‹å†™ï¼Œç®€å•CRUDç”¨æ’ä»¶
â‘¤ å¼€å¯SQLæ€§èƒ½ç›‘æ§
â‘¥ é…ç½®åˆç†çš„ç¼“å­˜ç­–ç•¥
```

**âŒ DON'Tï¼ˆé¿å…åšæ³•ï¼‰**
```
â‘  ä¸è¦åŒæ—¶ç”¨å¤šä¸ªåˆ†é¡µæ’ä»¶
â‘¡ ä¸è¦è¿‡åº¦ä¾èµ–æ’ä»¶ï¼ˆå¤±å»å¯¹SQLçš„æ§åˆ¶ï¼‰
â‘¢ ä¸è¦å¿½ç•¥ç‰ˆæœ¬å…¼å®¹æ€§
â‘£ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒå¼€å¯SQLæ‰“å°
â‘¤ ä¸è¦æ— è„‘æ‰¹é‡å¯¼å…¥æ‰€æœ‰ä¾èµ–
```

### 8.4 å¸¸è§é—®é¢˜é€ŸæŸ¥


**Q1: åˆ†é¡µä¸ç”Ÿæ•ˆï¼Ÿ**
```
æ£€æŸ¥é¡¹ï¼š
â˜‘ï¸ PageHelper.startPageç´§è·ŸæŸ¥è¯¢
â˜‘ï¸ åˆ†é¡µæ’ä»¶æ˜¯å¦é…ç½®
â˜‘ï¸ æ˜¯å¦æœ‰å¤šä¸ªåˆ†é¡µæ’ä»¶å†²çª
â˜‘ï¸ æ•°æ®åº“æ–¹è¨€æ˜¯å¦æ­£ç¡®
```

**Q2: Mapperæ‰«æä¸åˆ°ï¼Ÿ**
```
æ£€æŸ¥é¡¹ï¼š
â˜‘ï¸ @MapperScanåŒ…è·¯å¾„æ˜¯å¦æ­£ç¡®
â˜‘ï¸ æ˜¯å¦æœ‰å¤šä¸ªæ‰«ææ³¨è§£å†²çª
â˜‘ï¸ Mapperæ¥å£æ˜¯å¦ç»§æ‰¿æ­£ç¡®çˆ¶ç±»
â˜‘ï¸ XMLæ–‡ä»¶namespaceæ˜¯å¦æ­£ç¡®
```

**Q3: ä¾èµ–å†²çªï¼Ÿ**
```
è§£å†³æ­¥éª¤ï¼š
â‘  mvn dependency:tree æŸ¥çœ‹ä¾èµ–æ ‘
â‘¡ æ’é™¤å†²çªçš„ä¼ é€’ä¾èµ–
â‘¢ ç»Ÿä¸€ç‰ˆæœ¬å·ç®¡ç†
â‘£ ä½¿ç”¨Spring Bootç‰ˆæœ¬ä»²è£
```

**Q4: æ€§èƒ½é—®é¢˜ï¼Ÿ**
```
ä¼˜åŒ–æ–¹å‘ï¼š
âš¡ ç¦ç”¨ä¸å¿…è¦çš„countæŸ¥è¯¢
âš¡ ä½¿ç”¨æ‰¹é‡æ“ä½œä»£æ›¿å¾ªç¯
âš¡ åˆç†ä½¿ç”¨ç¼“å­˜
âš¡ ç›‘æ§æ…¢SQLå¹¶ä¼˜åŒ–
âš¡ è°ƒæ•´æ’ä»¶æ‰§è¡Œé¡ºåº
```

### 8.5 å­¦ä¹ è·¯å¾„å»ºè®®


```
å­¦ä¹ é˜¶æ®µ             å»ºè®®æ’ä»¶ç»„åˆ              å­¦ä¹ é‡ç‚¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â‘  å…¥é—¨é˜¶æ®µ          PageHelper              åˆ†é¡µåŸç†
(1-2å‘¨)                                     åŸºç¡€ä½¿ç”¨

â‘¡ è¿›é˜¶é˜¶æ®µ          MyBatis-Plus            æ¡ä»¶æ„é€ å™¨
(2-4å‘¨)                                     é€šç”¨CRUD
                                           ä»£ç ç”Ÿæˆ

â‘¢ ç†Ÿç»ƒé˜¶æ®µ          tk.mybatis              çµæ´»ç»„åˆ
(1-2æœˆ)             + PageHelper            æ€§èƒ½ä¼˜åŒ–
                                           æºç ç†è§£

â‘£ ç²¾é€šé˜¶æ®µ          åŸç”Ÿ + è‡ªå®šä¹‰æ’ä»¶         è‡ªå®šä¹‰å¼€å‘
(3æœˆ+)                                      æ¶æ„è®¾è®¡
                                           æ€§èƒ½è°ƒä¼˜
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- **åˆ†é¡µé¦–é€‰PageHelperï¼Œå¢å¼ºå°±ç”¨Plus**
- **é€šç”¨Mapperæ‰¾tkï¼Œä»£ç ç”Ÿæˆæ‰¾Generator**  
- **æ’ä»¶ä¸æ··ç”¨ï¼Œç‰ˆæœ¬è¦å…¼å®¹**
- **æ€§èƒ½ä¼˜å…ˆåŸç”Ÿï¼Œæ•ˆç‡ä¼˜å…ˆæ’ä»¶**
- **æ ¸å¿ƒSQLæ‰‹å†™ï¼Œç®€å•CRUDæ’ä»¶**