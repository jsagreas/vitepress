---
title: 3ã€Spring MVCå®ç°RESTæœåŠ¡
---
## ğŸ“š ç›®å½•

1. [RESTæ§åˆ¶å™¨åŸºç¡€](#1-RESTæ§åˆ¶å™¨åŸºç¡€)
2. [CRUDæ“ä½œå®Œæ•´å®ç°](#2-CRUDæ“ä½œå®Œæ•´å®ç°)
3. [è·¯å¾„å˜é‡ä¸è¯·æ±‚å‚æ•°](#3-è·¯å¾„å˜é‡ä¸è¯·æ±‚å‚æ•°)
4. [è¯·æ±‚ä½“ä¸å“åº”ä½“å¤„ç†](#4-è¯·æ±‚ä½“ä¸å“åº”ä½“å¤„ç†)
5. [HTTPçŠ¶æ€ç ç®¡ç†](#5-HTTPçŠ¶æ€ç ç®¡ç†)
6. [å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å“åº”](#6-å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å“åº”)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ RESTæ§åˆ¶å™¨åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯RESTæ§åˆ¶å™¨


**ğŸ“Œ æ ¸å¿ƒç†è§£**
```
ä¼ ç»ŸControllerï¼š
- è¿”å›è§†å›¾é¡µé¢ï¼ˆHTMLï¼‰
- ç”¨@Controlleræ³¨è§£
- æ–¹æ³•è¿”å›å€¼æ˜¯é¡µé¢åç§°

REST Controllerï¼š
- è¿”å›æ•°æ®ï¼ˆJSON/XMLï¼‰
- ç”¨@RestControlleræ³¨è§£
- æ–¹æ³•è¿”å›å€¼ç›´æ¥æ˜¯æ•°æ®å¯¹è±¡
```

**ğŸ’¡ ç”Ÿæ´»ç±»æ¯”**
```
æƒ³è±¡ä¸€ä¸ªé¤å…ï¼š

ä¼ ç»ŸController = å ‚é£ŸæœåŠ¡å‘˜
â€¢ ç«¯èœåˆ°ä½ æ¡Œä¸Šï¼ˆè¿”å›é¡µé¢ï¼‰
â€¢ ä½ åœ¨é¤å…é‡Œç”¨é¤

REST Controller = å¤–å–æ‰“åŒ…å‘˜
â€¢ æŠŠèœæ‰“åŒ…å¥½ï¼ˆè¿”å›æ•°æ®ï¼‰
â€¢ ä½ æ‹¿å›å»è‡ªå·±å¤„ç†
```

### 1.2 @RestControlleræ³¨è§£è¯¦è§£


**ğŸ”¸ æœ¬è´¨ç†è§£**

`@RestController` = `@Controller` + `@ResponseBody`

```java
// ä¼ ç»Ÿæ–¹å¼ - éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•ä¸ŠåŠ @ResponseBody
@Controller
public class UserController {
    
    @GetMapping("/users")
    @ResponseBody  // è¿™ä¸ªæ³¨è§£ä¸èƒ½å°‘
    public List<User> getUsers() {
        return userList;
    }
}

// RESTæ–¹å¼ - è‡ªåŠ¨ç»™æ‰€æœ‰æ–¹æ³•æ·»åŠ @ResponseBody
@RestController
public class UserController {
    
    @GetMapping("/users")
    public List<User> getUsers() {
        return userList;  // è‡ªåŠ¨è½¬æˆJSONè¿”å›
    }
}
```

**ğŸ¯ æ ¸å¿ƒä½œç”¨**
- **è‡ªåŠ¨åºåˆ—åŒ–**ï¼šJavaå¯¹è±¡ â†’ JSONæ ¼å¼
- **ç®€åŒ–ä»£ç **ï¼šä¸ç”¨æ¯ä¸ªæ–¹æ³•éƒ½å†™@ResponseBody
- **ä¸“æ³¨æ•°æ®**ï¼šåªè¿”å›æ•°æ®ï¼Œä¸æ¶‰åŠé¡µé¢

### 1.3 REST APIè®¾è®¡è§„èŒƒ


**ğŸ“‹ URLè®¾è®¡åŸåˆ™**
```
èµ„æºå¯¼å‘ï¼ˆä¸æ˜¯åŠ¨ä½œå¯¼å‘ï¼‰ï¼š

âŒ é”™è¯¯ç¤ºä¾‹ï¼š
/getUserById?id=1
/deleteUser
/createUser

âœ… æ­£ç¡®ç¤ºä¾‹ï¼š
GET    /users/1        # è·å–IDä¸º1çš„ç”¨æˆ·
DELETE /users/1        # åˆ é™¤IDä¸º1çš„ç”¨æˆ·
POST   /users          # åˆ›å»ºæ–°ç”¨æˆ·
```

**ğŸ”„ HTTPæ–¹æ³•æ˜ å°„**
| HTTPæ–¹æ³• | **æ“ä½œ** | **ç¤ºä¾‹URL** | **è¯´æ˜** |
|---------|---------|------------|---------|
| `GET` | `æŸ¥è¯¢` | `/users` | `è·å–ç”¨æˆ·åˆ—è¡¨` |
| `GET` | `æŸ¥è¯¢` | `/users/1` | `è·å–å•ä¸ªç”¨æˆ·` |
| `POST` | `åˆ›å»º` | `/users` | `åˆ›å»ºæ–°ç”¨æˆ·` |
| `PUT` | `æ›´æ–°` | `/users/1` | `å®Œæ•´æ›´æ–°ç”¨æˆ·` |
| `PATCH` | `æ›´æ–°` | `/users/1` | `éƒ¨åˆ†æ›´æ–°ç”¨æˆ·` |
| `DELETE` | `åˆ é™¤` | `/users/1` | `åˆ é™¤ç”¨æˆ·` |

---

## 2. ğŸ“ CRUDæ“ä½œå®Œæ•´å®ç°


### 2.1 æŸ¥è¯¢æ“ä½œ - GETè¯·æ±‚


**ğŸ” è·å–åˆ—è¡¨æ•°æ®**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // è·å–æ‰€æœ‰ç”¨æˆ·
    @GetMapping
    public List<User> getAllUsers() {
        return userService.findAll();
    }
    
    // æ ¹æ®IDè·å–å•ä¸ªç”¨æˆ·
    @GetMapping("/{id}")
    public User getUserById(@PathVariable Long id) {
        return userService.findById(id);
    }
}
```

**ğŸ’­ é€šä¿—ç†è§£**
```
@GetMapping = è¯»å–æ•°æ®çš„æ¥å£

å°±åƒå»å›¾ä¹¦é¦†ï¼š
â€¢ GET /users â†’ æŸ¥çœ‹æ‰€æœ‰ä¹¦ç±ç›®å½•
â€¢ GET /users/1 â†’ æŸ¥çœ‹1å·ä¹¦çš„è¯¦ç»†ä¿¡æ¯
```

### 2.2 åˆ›å»ºæ“ä½œ - POSTè¯·æ±‚


**â• æ·»åŠ æ–°æ•°æ®**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // åˆ›å»ºæ–°ç”¨æˆ·
    @PostMapping
    public User createUser(@RequestBody User user) {
        return userService.save(user);
    }
}
```

**ğŸ“¤ è¯·æ±‚ç¤ºä¾‹**
```
POST /api/users
Content-Type: application/json

{
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "age": 25
}
```

**ğŸ¯ å…³é”®ç‚¹ç†è§£**
- `@PostMapping`ï¼šæŒ‡å®šPOSTè¯·æ±‚
- `@RequestBody`ï¼šå‘Šè¯‰Spring"è¯·æ±‚ä½“é‡Œæœ‰æ•°æ®ï¼Œå¸®æˆ‘è½¬æˆUserå¯¹è±¡"
- è¿”å›å€¼ï¼šé€šå¸¸è¿”å›åˆ›å»ºåçš„å®Œæ•´å¯¹è±¡ï¼ˆåŒ…å«ç”Ÿæˆçš„IDï¼‰

### 2.3 æ›´æ–°æ“ä½œ - PUTè¯·æ±‚


**ğŸ”„ ä¿®æ”¹ç°æœ‰æ•°æ®**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // å®Œæ•´æ›´æ–°ç”¨æˆ·
    @PutMapping("/{id}")
    public User updateUser(
            @PathVariable Long id,
            @RequestBody User user) {
        
        user.setId(id);  // ç¡®ä¿IDä¸€è‡´
        return userService.update(user);
    }
}
```

**ğŸ“¤ è¯·æ±‚ç¤ºä¾‹**
```
PUT /api/users/1
Content-Type: application/json

{
    "name": "å¼ ä¸‰(ä¿®æ”¹)",
    "email": "new@example.com",
    "age": 26
}
```

**ğŸ’¡ PUT vs PATCHåŒºåˆ«**
```
PUTï¼ˆå®Œæ•´æ›´æ–°ï¼‰ï¼š
â€¢ å¿…é¡»æä¾›æ‰€æœ‰å­—æ®µ
â€¢ ç¼ºå¤±çš„å­—æ®µä¼šè¢«æ¸…ç©º

PATCHï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰ï¼š
â€¢ åªæä¾›è¦ä¿®æ”¹çš„å­—æ®µ
â€¢ å…¶ä»–å­—æ®µä¿æŒä¸å˜
```

### 2.4 åˆ é™¤æ“ä½œ - DELETEè¯·æ±‚


**ğŸ—‘ï¸ åˆ é™¤æ•°æ®**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // åˆ é™¤ç”¨æˆ·
    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable Long id) {
        userService.deleteById(id);
    }
}
```

**ğŸ¯ è¿”å›å€¼è¯´æ˜**
```
åˆ é™¤æ“ä½œçš„è¿”å›å€¼é€‰æ‹©ï¼š

1. void - ä¸è¿”å›ä»»ä½•å†…å®¹
   DELETE /users/1 â†’ 204 No Content

2. ResponseEntity - è¿”å›è¯¦ç»†çŠ¶æ€
   DELETE /users/1 â†’ 200 OK + æç¤ºä¿¡æ¯

3. boolean - è¿”å›æ“ä½œç»“æœ
   DELETE /users/1 â†’ true/false
```

---

## 3. ğŸ”— è·¯å¾„å˜é‡ä¸è¯·æ±‚å‚æ•°


### 3.1 è·¯å¾„å˜é‡ @PathVariable


**ğŸ“ ä»€ä¹ˆæ˜¯è·¯å¾„å˜é‡**
```
è·¯å¾„å˜é‡ï¼šURLè·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼Œè¡¨ç¤ºèµ„æºæ ‡è¯†

ç¤ºä¾‹URLï¼š
/users/123
       â†‘
      è¿™ä¸ªå°±æ˜¯è·¯å¾„å˜é‡
```

**ğŸ”§ åŸºæœ¬ç”¨æ³•**

```java
@RestController
@RequestMapping("/api")
public class UserController {
    
    // å•ä¸ªè·¯å¾„å˜é‡
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
    
    // å¤šä¸ªè·¯å¾„å˜é‡
    @GetMapping("/users/{userId}/orders/{orderId}")
    public Order getUserOrder(
            @PathVariable Long userId,
            @PathVariable Long orderId) {
        
        return orderService.findOrder(userId, orderId);
    }
}
```

**ğŸ’¡ å˜é‡åä¸ä¸€è‡´æ—¶çš„å¤„ç†**

```java
// å¦‚æœè·¯å¾„å˜é‡åå’Œæ–¹æ³•å‚æ•°åä¸åŒ
@GetMapping("/users/{id}")
public User getUser(@PathVariable("id") Long userId) {
    return userService.findById(userId);
}
```

### 3.2 è¯·æ±‚å‚æ•° @RequestParam


**ğŸ“‹ ä»€ä¹ˆæ˜¯è¯·æ±‚å‚æ•°**
```
è¯·æ±‚å‚æ•°ï¼šURLé—®å·åé¢çš„é”®å€¼å¯¹

ç¤ºä¾‹URLï¼š
/users?page=1&size=10
        â†‘
      è¿™äº›æ˜¯è¯·æ±‚å‚æ•°
```

**ğŸ”§ åŸºæœ¬ç”¨æ³•**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // è·å–å¸¦åˆ†é¡µçš„ç”¨æˆ·åˆ—è¡¨
    @GetMapping
    public List<User> getUsers(
            @RequestParam(defaultValue = "1") int page,
            @RequestParam(defaultValue = "10") int size) {
        
        return userService.findByPage(page, size);
    }
    
    // å¯é€‰å‚æ•°
    @GetMapping("/search")
    public List<User> searchUsers(
            @RequestParam(required = false) String name,
            @RequestParam(required = false) Integer age) {
        
        return userService.search(name, age);
    }
}
```

**âš™ï¸ å‚æ•°è¯´æ˜**
| å±æ€§ | **è¯´æ˜** | **ç¤ºä¾‹** |
|------|---------|---------|
| `defaultValue` | `å‚æ•°ç¼ºå¤±æ—¶çš„é»˜è®¤å€¼` | `@RequestParam(defaultValue = "1")` |
| `required` | `æ˜¯å¦å¿…éœ€ï¼Œé»˜è®¤true` | `@RequestParam(required = false)` |
| `name/value` | `å‚æ•°åï¼Œé»˜è®¤ç”¨æ–¹æ³•å‚æ•°å` | `@RequestParam("pageNum")` |

### 3.3 è·¯å¾„å˜é‡ vs è¯·æ±‚å‚æ•°


**ğŸ”„ ä½¿ç”¨åœºæ™¯å¯¹æ¯”**
```
è·¯å¾„å˜é‡ï¼ˆ@PathVariableï¼‰ï¼š
é€‚ç”¨åœºæ™¯ï¼š
â€¢ æ ‡è¯†å”¯ä¸€èµ„æºï¼š/users/123
â€¢ è¡¨ç¤ºå±‚çº§å…³ç³»ï¼š/users/1/orders/2
â€¢ RESTfulé£æ ¼å¿…ç”¨

è¯·æ±‚å‚æ•°ï¼ˆ@RequestParamï¼‰ï¼š
é€‚ç”¨åœºæ™¯ï¼š
â€¢ æŸ¥è¯¢è¿‡æ»¤æ¡ä»¶ï¼š/users?name=å¼ ä¸‰
â€¢ åˆ†é¡µæ’åºï¼š/users?page=1&sort=name
â€¢ å¯é€‰æ¡ä»¶ï¼š/users?active=true
```

---

## 4. ğŸ“¦ è¯·æ±‚ä½“ä¸å“åº”ä½“å¤„ç†


### 4.1 è¯·æ±‚ä½“è§£æ @RequestBody


**ğŸ“¥ ä»€ä¹ˆæ˜¯è¯·æ±‚ä½“**
```
HTTPè¯·æ±‚ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯·æ±‚è¡Œï¼ˆURL+æ–¹æ³•ï¼‰    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·æ±‚å¤´ï¼ˆHeaderï¼‰      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·æ±‚ä½“ï¼ˆBodyï¼‰        â”‚ â† @RequestBodyå¤„ç†è¿™éƒ¨åˆ†
â”‚ {                   â”‚
â”‚   "name": "å¼ ä¸‰"     â”‚
â”‚ }                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ è‡ªåŠ¨è½¬æ¢æœºåˆ¶**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @PostMapping
    public User createUser(@RequestBody User user) {
        // Springè‡ªåŠ¨æŠŠJSONè½¬æˆUserå¯¹è±¡
        // {
        //   "name": "å¼ ä¸‰",
        //   "age": 25
        // }
        // â†“ è‡ªåŠ¨è½¬æ¢
        // Userå¯¹è±¡: name="å¼ ä¸‰", age=25
        
        return userService.save(user);
    }
}
```

**ğŸ’¡ æ”¯æŒçš„æ•°æ®æ ¼å¼**
```
å¸¸è§æ ¼å¼ï¼š
â€¢ JSONï¼ˆæœ€å¸¸ç”¨ï¼‰â†’ application/json
â€¢ XML â†’ application/xml
â€¢ Formè¡¨å• â†’ application/x-www-form-urlencoded

Springä¼šæ ¹æ®Content-Typeè‡ªåŠ¨é€‰æ‹©è½¬æ¢å™¨
```

### 4.2 å“åº”ä½“è¿”å›æœºåˆ¶


**ğŸ“¤ è‡ªåŠ¨åºåˆ—åŒ–è¿‡ç¨‹**
```
æµç¨‹å›¾ï¼š
Javaå¯¹è±¡ â†’ JSONè½¬æ¢å™¨ â†’ JSONå­—ç¬¦ä¸² â†’ HTTPå“åº”

Userå¯¹è±¡              å“åº”ä½“
name: "å¼ ä¸‰"    â†’    {
age: 25               "name": "å¼ ä¸‰",
                      "age": 25
                    }
```

**ğŸ”§ å“åº”åŒ…è£…ç¤ºä¾‹**

```java
// ç»Ÿä¸€å“åº”æ ¼å¼
public class Result<T> {
    private int code;
    private String message;
    private T data;
    
    // æ„é€ æ–¹æ³•çœç•¥...
}

@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public Result<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        
        return Result.success(user);
        // è¿”å›ï¼š
        // {
        //   "code": 200,
        //   "message": "æˆåŠŸ",
        //   "data": { "id": 1, "name": "å¼ ä¸‰" }
        // }
    }
}
```

### 4.3 å¸¸è§æ•°æ®ç±»å‹å¤„ç†


**ğŸ¯ ä¸åŒè¿”å›ç±»å‹ç¤ºä¾‹**

```java
@RestController
@RequestMapping("/api")
public class DataController {
    
    // 1. è¿”å›å•ä¸ªå¯¹è±¡
    @GetMapping("/user")
    public User getUser() {
        return new User("å¼ ä¸‰", 25);
    }
    
    // 2. è¿”å›åˆ—è¡¨
    @GetMapping("/users")
    public List<User> getUsers() {
        return Arrays.asList(
            new User("å¼ ä¸‰", 25),
            new User("æå››", 30)
        );
    }
    
    // 3. è¿”å›Map
    @GetMapping("/stats")
    public Map<String, Object> getStats() {
        Map<String, Object> stats = new HashMap<>();
        stats.put("total", 100);
        stats.put("active", 80);
        return stats;
    }
    
    // 4. è¿”å›ç®€å•å€¼
    @GetMapping("/count")
    public int getCount() {
        return 100;
    }
}
```

---

## 5. ğŸ¨ HTTPçŠ¶æ€ç ç®¡ç†


### 5.1 å¸¸ç”¨HTTPçŠ¶æ€ç 


**ğŸ“Š çŠ¶æ€ç åˆ†ç±»**
```
çŠ¶æ€ç åˆ†ç»„ï¼š
2xx - æˆåŠŸ
3xx - é‡å®šå‘
4xx - å®¢æˆ·ç«¯é”™è¯¯
5xx - æœåŠ¡å™¨é”™è¯¯
```

**ğŸ”‘ æ ¸å¿ƒçŠ¶æ€ç å«ä¹‰**
| çŠ¶æ€ç  | **åç§°** | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** |
|--------|---------|---------|-------------|
| `200` | `OK` | `è¯·æ±‚æˆåŠŸ` | `GET/PUTæˆåŠŸ` |
| `201` | `Created` | `èµ„æºå·²åˆ›å»º` | `POSTåˆ›å»ºæˆåŠŸ` |
| `204` | `No Content` | `æ— è¿”å›å†…å®¹` | `DELETEæˆåŠŸ` |
| `400` | `Bad Request` | `è¯·æ±‚å‚æ•°é”™è¯¯` | `å‚æ•°éªŒè¯å¤±è´¥` |
| `404` | `Not Found` | `èµ„æºä¸å­˜åœ¨` | `æŸ¥è¯¢ä¸åˆ°æ•°æ®` |
| `500` | `Server Error` | `æœåŠ¡å™¨é”™è¯¯` | `ç³»ç»Ÿå¼‚å¸¸` |

### 5.2 çŠ¶æ€ç è®¾ç½®æ–¹å¼


**ğŸ”§ æ–¹å¼ä¸€ï¼šä½¿ç”¨ResponseEntity**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // è¿”å›200 OK
    @GetMapping("/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        return ResponseEntity.ok(user);
    }
    
    // è¿”å›201 Created
    @PostMapping
    public ResponseEntity<User> createUser(@RequestBody User user) {
        User saved = userService.save(user);
        return ResponseEntity
            .status(HttpStatus.CREATED)
            .body(saved);
    }
    
    // è¿”å›204 No Content
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
        userService.deleteById(id);
        return ResponseEntity.noContent().build();
    }
}
```

**ğŸ”§ æ–¹å¼äºŒï¼šä½¿ç”¨@ResponseStatus**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @PostMapping
    @ResponseStatus(HttpStatus.CREATED)  // å›ºå®šè¿”å›201
    public User createUser(@RequestBody User user) {
        return userService.save(user);
    }
    
    @DeleteMapping("/{id}")
    @ResponseStatus(HttpStatus.NO_CONTENT)  // å›ºå®šè¿”å›204
    public void deleteUser(@PathVariable Long id) {
        userService.deleteById(id);
    }
}
```

### 5.3 ResponseEntityè¯¦è§£


**ğŸ¯ ResponseEntityçš„ä¼˜åŠ¿**
```
ResponseEntity = HTTPå“åº”çš„å®Œæ•´æ§åˆ¶

å¯ä»¥æ§åˆ¶ï¼š
â€¢ çŠ¶æ€ç ï¼ˆstatusï¼‰
â€¢ å“åº”å¤´ï¼ˆheadersï¼‰
â€¢ å“åº”ä½“ï¼ˆbodyï¼‰
```

**ğŸ”§ å®Œæ•´ç¤ºä¾‹**

```java
@GetMapping("/{id}")
public ResponseEntity<User> getUser(@PathVariable Long id) {
    User user = userService.findById(id);
    
    if (user == null) {
        // 404 Not Found
        return ResponseEntity.notFound().build();
    }
    
    // 200 OK + è‡ªå®šä¹‰å“åº”å¤´
    return ResponseEntity
        .ok()
        .header("Custom-Header", "value")
        .body(user);
}
```

**ğŸ’¡ ResponseEntityå¸¸ç”¨æ–¹æ³•**
```
æ„å»ºæ–¹æ³•ï¼š
â€¢ ok() â†’ 200çŠ¶æ€
â€¢ created(URI) â†’ 201çŠ¶æ€
â€¢ noContent() â†’ 204çŠ¶æ€
â€¢ notFound() â†’ 404çŠ¶æ€
â€¢ badRequest() â†’ 400çŠ¶æ€
â€¢ status(HttpStatus) â†’ è‡ªå®šä¹‰çŠ¶æ€

é“¾å¼è°ƒç”¨ï¼š
â€¢ header(name, value) â†’ æ·»åŠ å“åº”å¤´
â€¢ body(data) â†’ è®¾ç½®å“åº”ä½“
â€¢ build() â†’ å®Œæˆæ„å»º
```

---

## 6. âš ï¸ å¼‚å¸¸å¤„ç†ä¸é”™è¯¯å“åº”


### 6.1 å¼‚å¸¸å¤„ç†çš„å¿…è¦æ€§


**ğŸš¨ ä¸ºä»€ä¹ˆéœ€è¦å¼‚å¸¸å¤„ç†**
```
æ²¡æœ‰å¼‚å¸¸å¤„ç†ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ å‘ç”Ÿé”™è¯¯ â†’ 500é”™è¯¯ + å †æ ˆä¿¡æ¯
                    â†“
                  ç³Ÿç³•çš„ä½“éªŒ

æœ‰å¼‚å¸¸å¤„ç†ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ å‘ç”Ÿé”™è¯¯ â†’ å‹å¥½çš„é”™è¯¯æç¤º
                    â†“
                  è‰¯å¥½çš„ä½“éªŒ
```

**ğŸ’­ ç”Ÿæ´»ç±»æ¯”**
```
æƒ³è±¡å»é“¶è¡ŒåŠä¸šåŠ¡ï¼š

æ²¡å¼‚å¸¸å¤„ç† = æŸœå‘˜ç›´æ¥è¯´"ç³»ç»Ÿå´©æºƒäº†"
â€¢ ç”¨æˆ·ä¸€è„¸æ‡µé€¼
â€¢ ä¸çŸ¥é“æ€ä¹ˆåŠ

æœ‰å¼‚å¸¸å¤„ç† = æŸœå‘˜è¯´"æ‚¨çš„èº«ä»½è¯è¿‡æœŸäº†ï¼Œè¯·æ›´æ–°"
â€¢ ç”¨æˆ·æ˜ç™½é—®é¢˜
â€¢ çŸ¥é“å¦‚ä½•è§£å†³
```

### 6.2 æ–¹æ³•çº§å¼‚å¸¸å¤„ç†


**ğŸ”§ @ExceptionHandlerä½¿ç”¨**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        
        if (user == null) {
            throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨ï¼š" + id);
        }
        
        return user;
    }
    
    // å¤„ç†UserNotFoundException
    @ExceptionHandler(UserNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleUserNotFound(
            UserNotFoundException ex) {
        
        ErrorResponse error = new ErrorResponse(
            404,
            ex.getMessage(),
            System.currentTimeMillis()
        );
        
        return ResponseEntity
            .status(HttpStatus.NOT_FOUND)
            .body(error);
    }
}
```

**ğŸ“¦ é”™è¯¯å“åº”å¯¹è±¡**
```java
public class ErrorResponse {
    private int status;
    private String message;
    private long timestamp;
    
    // æ„é€ æ–¹æ³•å’Œgetterçœç•¥...
}

// è¿”å›çš„JSONæ ¼å¼ï¼š
// {
//   "status": 404,
//   "message": "ç”¨æˆ·ä¸å­˜åœ¨ï¼š123",
//   "timestamp": 1632825600000
// }
```

### 6.3 å…¨å±€å¼‚å¸¸å¤„ç†


**ğŸŒ @RestControllerAdviceå…¨å±€å¤„ç†**

```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    // å¤„ç†èµ„æºä¸å­˜åœ¨
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleNotFound(
            ResourceNotFoundException ex) {
        
        ErrorResponse error = new ErrorResponse(
            404,
            ex.getMessage()
        );
        
        return ResponseEntity
            .status(HttpStatus.NOT_FOUND)
            .body(error);
    }
    
    // å¤„ç†å‚æ•°æ ¡éªŒå¤±è´¥
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ErrorResponse> handleValidation(
            MethodArgumentNotValidException ex) {
        
        ErrorResponse error = new ErrorResponse(
            400,
            "å‚æ•°éªŒè¯å¤±è´¥ï¼š" + ex.getBindingResult().getFieldError().getDefaultMessage()
        );
        
        return ResponseEntity
            .badRequest()
            .body(error);
    }
    
    // å¤„ç†æ‰€æœ‰å…¶ä»–å¼‚å¸¸
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ErrorResponse> handleGeneral(
            Exception ex) {
        
        ErrorResponse error = new ErrorResponse(
            500,
            "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"
        );
        
        return ResponseEntity
            .status(HttpStatus.INTERNAL_SERVER_ERROR)
            .body(error);
    }
}
```

**ğŸ¯ å…¨å±€å¤„ç†çš„ä¼˜åŠ¿**
```
é›†ä¸­ç®¡ç†ï¼š
â€¢ æ‰€æœ‰Controllerå…±äº«
â€¢ ç»Ÿä¸€é”™è¯¯æ ¼å¼
â€¢ å‡å°‘é‡å¤ä»£ç 

åˆ†å±‚å¤„ç†ï¼š
â€¢ ä¸šåŠ¡å¼‚å¸¸ â†’ 4xxçŠ¶æ€
â€¢ ç³»ç»Ÿå¼‚å¸¸ â†’ 5xxçŠ¶æ€
â€¢ æœªçŸ¥å¼‚å¸¸ â†’ å…œåº•å¤„ç†
```

### 6.4 è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸


**ğŸ”§ åˆ›å»ºä¸šåŠ¡å¼‚å¸¸ç±»**

```java
// åŸºç¡€ä¸šåŠ¡å¼‚å¸¸
public class BusinessException extends RuntimeException {
    private int code;
    
    public BusinessException(int code, String message) {
        super(message);
        this.code = code;
    }
    
    public int getCode() {
        return code;
    }
}

// å…·ä½“ä¸šåŠ¡å¼‚å¸¸
public class UserNotFoundException extends BusinessException {
    public UserNotFoundException(String message) {
        super(404, message);
    }
}

public class InvalidParameterException extends BusinessException {
    public InvalidParameterException(String message) {
        super(400, message);
    }
}
```

**ğŸ¯ ä½¿ç”¨ç¤ºä¾‹**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @PostMapping
    public User createUser(@RequestBody User user) {
        
        // å‚æ•°æ ¡éªŒ
        if (user.getAge() < 0) {
            throw new InvalidParameterException("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°");
        }
        
        // ä¸šåŠ¡æ ¡éªŒ
        if (userService.existsByEmail(user.getEmail())) {
            throw new BusinessException(409, "é‚®ç®±å·²å­˜åœ¨");
        }
        
        return userService.save(user);
    }
}

// å…¨å±€å¤„ç†
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(BusinessException.class)
    public ResponseEntity<ErrorResponse> handleBusiness(
            BusinessException ex) {
        
        return ResponseEntity
            .status(ex.getCode())
            .body(new ErrorResponse(ex.getCode(), ex.getMessage()));
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ @RestControllerï¼šä¸“é—¨è¿”å›æ•°æ®çš„æ§åˆ¶å™¨ï¼Œè‡ªåŠ¨JSONåºåˆ—åŒ–
ğŸ”¸ CRUDæ˜ å°„ï¼šGETæŸ¥ã€POSTå¢ã€PUTæ”¹ã€DELETEåˆ 
ğŸ”¸ @PathVariableï¼šè·å–URLè·¯å¾„ä¸­çš„å˜é‡å€¼
ğŸ”¸ @RequestBodyï¼šè§£æè¯·æ±‚ä½“JSONä¸ºJavaå¯¹è±¡
ğŸ”¸ ResponseEntityï¼šå®Œæ•´æ§åˆ¶HTTPå“åº”ï¼ˆçŠ¶æ€ç +å¤´+ä½“ï¼‰
ğŸ”¸ @RestControllerAdviceï¼šå…¨å±€å¼‚å¸¸å¤„ç†å™¨
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ RESTé£æ ¼è®¾è®¡**
```
æ ¸å¿ƒåŸåˆ™ï¼š
â€¢ èµ„æºå¯¼å‘ï¼ˆåè¯è€ŒéåŠ¨è¯ï¼‰
â€¢ ç»Ÿä¸€æ¥å£ï¼ˆæ ‡å‡†HTTPæ–¹æ³•ï¼‰
â€¢ æ— çŠ¶æ€ï¼ˆæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹ï¼‰
â€¢ åˆç†çŠ¶æ€ç ï¼ˆæ˜ç¡®è¡¨è¾¾ç»“æœï¼‰
```

**ğŸ”¹ æ³¨è§£ä½¿ç”¨åœºæ™¯**
```
URLå˜é‡ â†’ @PathVariable
â€¢ /users/{id} â†’ è·å–idå€¼

æŸ¥è¯¢å‚æ•° â†’ @RequestParam  
â€¢ /users?page=1 â†’ è·å–pageå€¼

è¯·æ±‚ä½“ â†’ @RequestBody
â€¢ POST/PUTçš„JSONæ•°æ® â†’ è½¬Javaå¯¹è±¡

å“åº”ä½“ â†’ è‡ªåŠ¨å¤„ç†
â€¢ æ–¹æ³•è¿”å›å€¼ â†’ è‡ªåŠ¨è½¬JSON
```

**ğŸ”¹ å¼‚å¸¸å¤„ç†ç­–ç•¥**
```
åˆ†å±‚å¤„ç†ï¼š
1. ä¸šåŠ¡å¼‚å¸¸ â†’ è‡ªå®šä¹‰å¼‚å¸¸ç±» â†’ 4xxçŠ¶æ€
2. ç³»ç»Ÿå¼‚å¸¸ â†’ Exception â†’ 5xxçŠ¶æ€
3. ç»Ÿä¸€æ ¼å¼ â†’ ErrorResponseå¯¹è±¡
4. å…¨å±€å¤„ç† â†’ @RestControllerAdvice
```

### 7.3 å®æˆ˜å¼€å‘å»ºè®®


**ğŸ¯ å¼€å‘è§„èŒƒ**
```
1. URLè®¾è®¡ï¼š
   â€¢ ä½¿ç”¨å¤æ•°åè¯ï¼š/users è€Œé /user
   â€¢ å°å†™å­—æ¯ï¼š/user-orders è€Œé /UserOrders
   â€¢ å±‚çº§æ¸…æ™°ï¼š/users/{id}/orders

2. çŠ¶æ€ç ä½¿ç”¨ï¼š
   â€¢ æˆåŠŸæ“ä½œï¼š200/201/204
   â€¢ å®¢æˆ·ç«¯é”™è¯¯ï¼š400/404
   â€¢ æœåŠ¡å™¨é”™è¯¯ï¼š500
   
3. å“åº”æ ¼å¼ï¼š
   â€¢ ç»Ÿä¸€åŒ…è£…ï¼š{code, message, data}
   â€¢ é”™è¯¯ä¿¡æ¯ï¼š{status, message, timestamp}
   
4. å¼‚å¸¸å¤„ç†ï¼š
   â€¢ è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
   â€¢ å…¨å±€ç»Ÿä¸€å¤„ç†
   â€¢ å‹å¥½é”™è¯¯æç¤º
```

**ğŸ”§ å¸¸ç”¨å·¥å…·æ¨è**
```
APIæµ‹è¯•å·¥å…·ï¼š
â€¢ Postman - åŠŸèƒ½å¼ºå¤§çš„APIæµ‹è¯•å·¥å…·
â€¢ Apifox - å›½äº§APIç®¡ç†å·¥å…·
â€¢ curlå‘½ä»¤ - å‘½ä»¤è¡Œå¿«é€Ÿæµ‹è¯•

æ–‡æ¡£å·¥å…·ï¼š
â€¢ Swagger/OpenAPI - è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£
â€¢ Knife4j - Swaggerå¢å¼ºç‰ˆï¼ˆå›½äº§ï¼‰
```

### 7.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“š è¿›é˜¶å­¦ä¹ é¡ºåº**
```
ç¬¬1æ­¥ï¼šæŒæ¡åŸºç¡€
âœ“ @RestControlleråŸºæœ¬ç”¨æ³•
âœ“ CRUDæ“ä½œå®ç°
âœ“ è·¯å¾„å˜é‡å’Œè¯·æ±‚å‚æ•°

ç¬¬2æ­¥ï¼šæ·±å…¥ç†è§£
âœ“ ResponseEntityè¯¦ç»†ç”¨æ³•
âœ“ çŠ¶æ€ç åˆç†ä½¿ç”¨
âœ“ å…¨å±€å¼‚å¸¸å¤„ç†

ç¬¬3æ­¥ï¼šå®æˆ˜ä¼˜åŒ–
âœ“ ç»Ÿä¸€å“åº”æ ¼å¼
âœ“ å‚æ•°æ ¡éªŒï¼ˆBean Validationï¼‰
âœ“ APIç‰ˆæœ¬æ§åˆ¶

ç¬¬4æ­¥ï¼šé«˜çº§ç‰¹æ€§
âœ“ HATEOASï¼ˆè¶…åª’ä½“ï¼‰
âœ“ å†…å®¹åå•†ï¼ˆJSON/XMLï¼‰
âœ“ APIé™æµä¸å®‰å…¨
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- RESTæ§åˆ¶å™¨è¿”æ•°æ®ï¼Œæ³¨è§£é…ç½®ä¸å¤æ‚
- è·¯å¾„å˜é‡é—®å·å‚ï¼Œè¯·æ±‚å“åº”ä½“è‡ªåŠ¨è½¬
- çŠ¶æ€ç è¦ç”¨å¯¹ï¼Œå¼‚å¸¸å¤„ç†å…¨å±€æ•
- èµ„æºå¯¼å‘è®¾è®¡å¥½ï¼ŒRESTfulè§„èŒƒè¦è®°ç‰¢

---

## ğŸ’¡ è¡¥å……è¯´æ˜


**å­¦ä¹ å»ºè®®**ï¼š
1. å…ˆç†è§£æ¦‚å¿µï¼Œå†åŠ¨æ‰‹å®è·µ
2. æ¯ä¸ªæ³¨è§£éƒ½è¦äº²è‡ªæµ‹è¯•
3. ä½¿ç”¨Postmanæµ‹è¯•æ¯ä¸ªæ¥å£
4. æŸ¥çœ‹æµè§ˆå™¨Networké¢æ¿ç†è§£è¯·æ±‚å“åº”
5. é‡åˆ°é—®é¢˜å…ˆçœ‹å¼‚å¸¸ä¿¡æ¯ï¼Œå†æŸ¥æ–‡æ¡£

**å¸¸è§é—®é¢˜**ï¼š
```
Q: @RestControllerå’Œ@ControlleråŒºåˆ«ï¼Ÿ
A: @RestController = @Controller + @ResponseBody
   å‰è€…è¿”å›æ•°æ®ï¼Œåè€…è¿”å›è§†å›¾

Q: ä»€ä¹ˆæ—¶å€™ç”¨@PathVariableï¼Œä»€ä¹ˆæ—¶å€™ç”¨@RequestParamï¼Ÿ
A: èµ„æºæ ‡è¯†ç”¨PathVariableï¼ˆ/users/1ï¼‰
   æŸ¥è¯¢æ¡ä»¶ç”¨RequestParamï¼ˆ/users?name=å¼ ä¸‰ï¼‰

Q: ResponseEntityæœ‰ä»€ä¹ˆç”¨ï¼Ÿ
A: å®Œæ•´æ§åˆ¶HTTPå“åº”ï¼Œè®¾ç½®çŠ¶æ€ç ã€å“åº”å¤´ã€å“åº”ä½“
```