---
title: 4ã€å†…å®¹åå•†ä¸è¿”å›æ ¼å¼
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯å†…å®¹åå•†](#1-ä»€ä¹ˆæ˜¯å†…å®¹åå•†)
2. [Acceptè¯·æ±‚å¤´å¤„ç†](#2-acceptè¯·æ±‚å¤´å¤„ç†)
3. [Content-Typeå“åº”è®¾ç½®](#3-content-typeå“åº”è®¾ç½®)
4. [JSONæ ¼å¼æ”¯æŒ](#4-jsonæ ¼å¼æ”¯æŒ)
5. [XMLæ ¼å¼æ”¯æŒ](#5-xmlæ ¼å¼æ”¯æŒ)
6. [å¤šæ ¼å¼å“åº”ç­–ç•¥](#6-å¤šæ ¼å¼å“åº”ç­–ç•¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤ ä»€ä¹ˆæ˜¯å†…å®¹åå•†


### 1.1 å†…å®¹åå•†çš„æœ¬è´¨


**é€šä¿—ç†è§£**ï¼šå°±åƒå»é¤å…ç‚¹é¤
```
ä½ å¯¹æœåŠ¡å‘˜è¯´ï¼š"æˆ‘è¦ä¸€æ¯é¥®æ–™"
æœåŠ¡å‘˜é—®ï¼š"è¦å¯ä¹ã€æœæ±è¿˜æ˜¯å’–å•¡ï¼Ÿ"
ä½ å›ç­”ï¼š"å¯ä¹"
æœåŠ¡å‘˜ç»™ä½ ç«¯æ¥å¯ä¹

â†“ å¯¹åº”åˆ°Webè¯·æ±‚ â†“

å®¢æˆ·ç«¯è¯´ï¼š"ç»™æˆ‘ç”¨æˆ·æ•°æ®"
æœåŠ¡å™¨é—®ï¼š"è¦JSONæ ¼å¼è¿˜æ˜¯XMLæ ¼å¼ï¼Ÿ"
å®¢æˆ·ç«¯å›ç­”ï¼š"JSON"
æœåŠ¡å™¨è¿”å›JSONæ ¼å¼çš„æ•°æ®
```

**ä¸“ä¸šå®šä¹‰**ï¼š
- **å†…å®¹åå•†ï¼ˆContent Negotiationï¼‰**ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åå•†ç¡®å®šå“åº”æ•°æ®çš„æ ¼å¼
- **æ ¸å¿ƒç›®çš„**ï¼šè®©åŒä¸€ä¸ªæ¥å£èƒ½å¤Ÿè¿”å›ä¸åŒæ ¼å¼çš„æ•°æ®ï¼Œæ»¡è¶³ä¸åŒå®¢æˆ·ç«¯çš„éœ€æ±‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å†…å®¹åå•†


**å®é™…åœºæ™¯å¯¹æ¯”**ï¼š

```
âŒ æ²¡æœ‰å†…å®¹åå•†çš„åšæ³•ï¼š
/api/users/json    â†’ è¿”å›JSONæ ¼å¼
/api/users/xml     â†’ è¿”å›XMLæ ¼å¼
é—®é¢˜ï¼šæ¥å£é‡å¤ï¼Œç»´æŠ¤éº»çƒ¦

âœ… ä½¿ç”¨å†…å®¹åå•†çš„åšæ³•ï¼š
/api/users         â†’ æ ¹æ®è¯·æ±‚è‡ªåŠ¨è¿”å›JSONæˆ–XML
ä¼˜åŠ¿ï¼šä¸€ä¸ªæ¥å£ï¼Œçµæ´»å“åº”
```

**å…¸å‹åº”ç”¨åœºæ™¯**ï¼š
- ğŸŒ **æµè§ˆå™¨è®¿é—®**ï¼šå¸Œæœ›å¾—åˆ°HTMLé¡µé¢
- ğŸ“± **ç§»åŠ¨APP**ï¼šå¸Œæœ›å¾—åˆ°JSONæ•°æ®
- ğŸ–¥ï¸ **ä¼ä¸šç³»ç»Ÿ**ï¼šå¸Œæœ›å¾—åˆ°XMLæ•°æ®
- ğŸ“Š **æ•°æ®åˆ†æ**ï¼šå¸Œæœ›å¾—åˆ°CSVæ–‡ä»¶

### 1.3 å†…å®¹åå•†çš„å·¥ä½œæµç¨‹


```
å®¢æˆ·ç«¯                          æœåŠ¡å™¨
   |                              |
   |---[1]å‘é€è¯·æ±‚------------------>|
   |   Accept: application/json   |
   |                              |
   |                         [2]è§£æAcceptå¤´
   |                         [3]é€‰æ‹©åˆé€‚çš„æ ¼å¼
   |                         [4]è½¬æ¢æ•°æ®æ ¼å¼
   |                              |
   |<--[5]è¿”å›å“åº”------------------|
   |   Content-Type: application/json
   |   {"name":"å¼ ä¸‰"}             |
```

**æ ¸å¿ƒè¦ç´ **ï¼š
- ğŸ”¸ **è¯·æ±‚é˜¶æ®µ**ï¼šå®¢æˆ·ç«¯é€šè¿‡`Accept`å¤´å‘Šè¯‰æœåŠ¡å™¨æƒ³è¦ä»€ä¹ˆæ ¼å¼
- ğŸ”¸ **å¤„ç†é˜¶æ®µ**ï¼šæœåŠ¡å™¨è§£æè¯·æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„è½¬æ¢å™¨
- ğŸ”¸ **å“åº”é˜¶æ®µ**ï¼šæœåŠ¡å™¨é€šè¿‡`Content-Type`å¤´å‘Šè¯‰å®¢æˆ·ç«¯è¿”å›çš„æ˜¯ä»€ä¹ˆæ ¼å¼

---

## 2. ğŸ“¨ Acceptè¯·æ±‚å¤´å¤„ç†


### 2.1 Acceptå¤´çš„ä½œç”¨


**Acceptå¤´ï¼ˆæ¥å—å¤´ï¼‰**ï¼šå®¢æˆ·ç«¯ç”¨æ¥å‘Šè¯‰æœåŠ¡å™¨"æˆ‘èƒ½æ¥å—ä»€ä¹ˆæ ¼å¼çš„æ•°æ®"

```
Acceptè¯·æ±‚å¤´ç¤ºä¾‹ï¼š

Accept: application/json          â†’ æˆ‘è¦JSONæ ¼å¼
Accept: application/xml           â†’ æˆ‘è¦XMLæ ¼å¼
Accept: text/html                 â†’ æˆ‘è¦HTMLé¡µé¢
Accept: */*                       â†’ ä»€ä¹ˆæ ¼å¼éƒ½å¯ä»¥
```

**å¤šä¸ªæ ¼å¼çš„ä¼˜å…ˆçº§**ï¼š
```
Accept: application/json, application/xml;q=0.8, */*;q=0.5

è§£è¯»ï¼š
- application/json       ä¼˜å…ˆçº§ï¼š1.0ï¼ˆé»˜è®¤æœ€é«˜ï¼‰
- application/xml        ä¼˜å…ˆçº§ï¼š0.8
- */*ï¼ˆå…¶ä»–æ ¼å¼ï¼‰         ä¼˜å…ˆçº§ï¼š0.5

æœåŠ¡å™¨ä¼šä¼˜å…ˆè¿”å›JSONï¼Œå¦‚æœä¸æ”¯æŒå†è¿”å›XML
```

### 2.2 Spring MVCå¦‚ä½•å¤„ç†Acceptå¤´


**è‡ªåŠ¨åŒ¹é…æœºåˆ¶**ï¼š

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // è¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ®Acceptå¤´è‡ªåŠ¨è¿”å›ä¸åŒæ ¼å¼
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        User user = new User(id, "å¼ ä¸‰", "zhangsan@example.com");
        return user;  // Springä¼šè‡ªåŠ¨è½¬æ¢æ ¼å¼
    }
}
```

**è¯·æ±‚ä¸å“åº”å¯¹æ¯”**ï¼š

| **å®¢æˆ·ç«¯Acceptå¤´** | **æœåŠ¡å™¨è¿”å›æ ¼å¼** | **Content-Typeå“åº”å¤´** |
|-------------------|-------------------|----------------------|
| `application/json` | `{"id":1,"name":"å¼ ä¸‰"}` | `application/json` |
| `application/xml` | `<user><id>1</id><name>å¼ ä¸‰</name></user>` | `application/xml` |
| `text/html` | `<h1>å¼ ä¸‰</h1>` | `text/html` |

### 2.3 å¸¸è§çš„åª’ä½“ç±»å‹


**æ ¸å¿ƒåª’ä½“ç±»å‹ï¼ˆMIME Typeï¼‰**ï¼š

```
ğŸ“‹ å¸¸ç”¨æ ¼å¼é€ŸæŸ¥ï¼š

application/json       â†’ JSONæ•°æ®æ ¼å¼
application/xml        â†’ XMLæ•°æ®æ ¼å¼
text/html             â†’ HTMLç½‘é¡µ
text/plain            â†’ çº¯æ–‡æœ¬
application/pdf       â†’ PDFæ–‡æ¡£
image/jpeg            â†’ JPEGå›¾ç‰‡
multipart/form-data   â†’ è¡¨å•æ–‡ä»¶ä¸Šä¼ 
```

**æ ¼å¼è¯´æ˜**ï¼š
- ğŸ”¸ **ä¸»ç±»å‹/å­ç±»å‹**ï¼šæ ¼å¼ä¸º`ä¸»ç±»å‹/å­ç±»å‹`
- ğŸ”¸ **application**ï¼šåº”ç”¨ç¨‹åºæ•°æ®ç±»å‹
- ğŸ”¸ **text**ï¼šæ–‡æœ¬ç±»å‹
- ğŸ”¸ **image**ï¼šå›¾ç‰‡ç±»å‹

---

## 3. ğŸ“¤ Content-Typeå“åº”è®¾ç½®


### 3.1 Content-Typeçš„å«ä¹‰


**Content-Typeï¼ˆå†…å®¹ç±»å‹ï¼‰**ï¼šæœåŠ¡å™¨ç”¨æ¥å‘Šè¯‰å®¢æˆ·ç«¯"æˆ‘è¿”å›çš„æ˜¯ä»€ä¹ˆæ ¼å¼çš„æ•°æ®"

```
å“åº”ç¤ºä¾‹ï¼š

HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{"name":"å¼ ä¸‰","age":25}

â†‘ å‘Šè¯‰å®¢æˆ·ç«¯ï¼šè¿™æ˜¯JSONæ ¼å¼çš„æ•°æ®ï¼Œä½¿ç”¨UTF-8ç¼–ç 
```

### 3.2 è‡ªåŠ¨è®¾ç½®Content-Type


**Spring MVCçš„æ™ºèƒ½å¤„ç†**ï¼š

```java
@RestController
public class DataController {
    
    // æ–¹å¼1ï¼šè‡ªåŠ¨è®¾ç½®ï¼ˆæ¨èï¼‰
    @GetMapping("/user")
    public User getUser() {
        return new User("å¼ ä¸‰", 25);
        // Springè‡ªåŠ¨æ ¹æ®è¿”å›ç±»å‹å’ŒAcceptå¤´è®¾ç½®Content-Type
    }
    
    // æ–¹å¼2ï¼šæ‰‹åŠ¨æŒ‡å®š
    @GetMapping(value = "/user/json", produces = "application/json")
    public User getUserJson() {
        return new User("å¼ ä¸‰", 25);
        // æ˜ç¡®æŒ‡å®šåªè¿”å›JSONæ ¼å¼
    }
    
    // æ–¹å¼3ï¼šæ”¯æŒå¤šç§æ ¼å¼
    @GetMapping(value = "/user/multi", 
                produces = {"application/json", "application/xml"})
    public User getUserMulti() {
        return new User("å¼ ä¸‰", 25);
        // æ ¹æ®Acceptå¤´è¿”å›JSONæˆ–XML
    }
}
```

### 3.3 produceså±æ€§è¯¦è§£


**producesçš„ä½œç”¨**ï¼šé™å®šæ–¹æ³•èƒ½äº§ç”Ÿçš„å“åº”æ ¼å¼

```java
// ç¤ºä¾‹ï¼šæ˜ç¡®æŒ‡å®šå“åº”æ ¼å¼
@GetMapping(value = "/report", produces = "application/pdf")
public byte[] getReport() {
    // åªèƒ½è¿”å›PDFæ ¼å¼
    return generatePdfReport();
}

// ç¤ºä¾‹ï¼šå¤šæ ¼å¼æ”¯æŒ
@GetMapping(value = "/data", 
            produces = {"application/json", "application/xml"})
public Data getData() {
    // å¯ä»¥è¿”å›JSONæˆ–XMLï¼Œæ ¹æ®Acceptå¤´å†³å®š
    return new Data();
}
```

**å¯¹æ¯”è¡¨æ ¼**ï¼š

| **é…ç½®æ–¹å¼** | **å«ä¹‰** | **é€‚ç”¨åœºæ™¯** |
|------------|---------|------------|
| ä¸è®¾ç½®produces | è‡ªåŠ¨åå•† | ä¸€èˆ¬æƒ…å†µï¼Œæœ€çµæ´» |
| `produces = "application/json"` | åªè¿”å›JSON | æ˜ç¡®åªæ”¯æŒJSONçš„æ¥å£ |
| `produces = {"json", "xml"}` | æ”¯æŒå¤šç§æ ¼å¼ | éœ€è¦å…¼å®¹ä¸åŒå®¢æˆ·ç«¯ |

---

## 4. ğŸ“Š JSONæ ¼å¼æ”¯æŒ


### 4.1 JSONæ ¼å¼åŸºç¡€


**JSONï¼ˆJavaScript Object Notationï¼‰**ï¼šæœ€å¸¸ç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼

```
Javaå¯¹è±¡ï¼š                    JSONå­—ç¬¦ä¸²ï¼š
User user = new User();      {
user.setId(1);                 "id": 1,
user.setName("å¼ ä¸‰");          "name": "å¼ ä¸‰",
user.setAge(25);               "age": 25
                             }
```

### 4.2 å¯ç”¨JSONæ”¯æŒ


**Spring Bootè‡ªåŠ¨é…ç½®**ï¼ˆæ¨èï¼‰ï¼š

```java
// 1. æ·»åŠ ä¾èµ–ï¼ˆpom.xmlï¼‰
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <!-- è‡ªåŠ¨åŒ…å«Jacksonï¼Œæ— éœ€é¢å¤–é…ç½® -->
</dependency>

// 2. ç›´æ¥ä½¿ç”¨ï¼ˆå·²è‡ªåŠ¨é…ç½®å¥½ï¼‰
@RestController
public class UserController {
    
    @GetMapping("/user")
    public User getUser() {
        return new User(1L, "å¼ ä¸‰", 25);
        // è‡ªåŠ¨è½¬æ¢ä¸ºJSONè¿”å›
    }
}
```

**ä¼ ç»ŸSpring MVCé…ç½®**ï¼š

```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void configureMessageConverters(
            List<HttpMessageConverter<?>> converters) {
        
        // æ·»åŠ JSONè½¬æ¢å™¨
        MappingJackson2HttpMessageConverter jsonConverter = 
            new MappingJackson2HttpMessageConverter();
        converters.add(jsonConverter);
    }
}
```

### 4.3 JSONè½¬æ¢ç¤ºä¾‹


**å®ä½“ç±»å®šä¹‰**ï¼š

```java
public class User {
    private Long id;
    private String name;
    private Integer age;
    private LocalDateTime createTime;
    
    // æ„é€ å™¨ã€getterã€setterçœç•¥
}
```

**æ§åˆ¶å™¨æ–¹æ³•**ï¼š

```java
@RestController
@RequestMapping("/api")
public class UserApiController {
    
    // è¿”å›å•ä¸ªå¯¹è±¡
    @GetMapping("/user/{id}")
    public User getUser(@PathVariable Long id) {
        return new User(id, "å¼ ä¸‰", 25, LocalDateTime.now());
    }
    // è¿”å›ï¼š{"id":1,"name":"å¼ ä¸‰","age":25,"createTime":"2024-01-15T10:30:00"}
    
    // è¿”å›åˆ—è¡¨
    @GetMapping("/users")
    public List<User> getUsers() {
        return Arrays.asList(
            new User(1L, "å¼ ä¸‰", 25, LocalDateTime.now()),
            new User(2L, "æå››", 28, LocalDateTime.now())
        );
    }
    // è¿”å›ï¼š[{"id":1,"name":"å¼ ä¸‰",...}, {"id":2,"name":"æå››",...}]
}
```

### 4.4 JSONæ ¼å¼æ§åˆ¶


**å¸¸ç”¨æ³¨è§£**ï¼š

```java
public class User {
    
    private Long id;
    
    @JsonProperty("userName")  // æŒ‡å®šJSONä¸­çš„å­—æ®µå
    private String name;
    
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")  // æ—¥æœŸæ ¼å¼åŒ–
    private LocalDateTime createTime;
    
    @JsonIgnore  // ä¸è¿”å›æ­¤å­—æ®µï¼ˆå¦‚å¯†ç ï¼‰
    private String password;
    
    // getterã€setterçœç•¥
}

// è¿”å›ç»“æœï¼š
{
  "id": 1,
  "userName": "å¼ ä¸‰",           â† å­—æ®µåæ”¹å˜
  "createTime": "2024-01-15 10:30:00",  â† æ—¥æœŸæ ¼å¼åŒ–
  // passwordå­—æ®µä¸ä¼šå‡ºç°
}
```

---

## 5. ğŸ“‹ XMLæ ¼å¼æ”¯æŒ


### 5.1 XMLæ ¼å¼åŸºç¡€


**XMLï¼ˆeXtensible Markup Languageï¼‰**ï¼šä¼ä¸šç³»ç»Ÿå¸¸ç”¨çš„æ•°æ®æ ¼å¼

```
Javaå¯¹è±¡ï¼š                    XMLå­—ç¬¦ä¸²ï¼š
User user = new User();      <user>
user.setId(1);                 <id>1</id>
user.setName("å¼ ä¸‰");          <name>å¼ ä¸‰</name>
user.setAge(25);               <age>25</age>
                             </user>
```

### 5.2 å¯ç”¨XMLæ”¯æŒ


**æ·»åŠ ä¾èµ–**ï¼š

```xml
<!-- pom.xml -->
<dependency>
    <groupId>com.fasterxml.jackson.dataformat</groupId>
    <artifactId>jackson-dataformat-xml</artifactId>
</dependency>
```

**å®ä½“ç±»é…ç½®**ï¼š

```java
@JacksonXmlRootElement(localName = "user")  // XMLæ ¹å…ƒç´ åç§°
public class User {
    
    @JacksonXmlProperty(localName = "id")
    private Long id;
    
    @JacksonXmlProperty(localName = "name")
    private String name;
    
    @JacksonXmlProperty(localName = "age")
    private Integer age;
    
    // getterã€setterçœç•¥
}
```

### 5.3 XMLè½¬æ¢ç¤ºä¾‹


**æ§åˆ¶å™¨æ–¹æ³•**ï¼š

```java
@RestController
@RequestMapping("/api")
public class UserXmlController {
    
    @GetMapping(value = "/user/{id}", 
                produces = {"application/json", "application/xml"})
    public User getUser(@PathVariable Long id) {
        return new User(id, "å¼ ä¸‰", 25);
    }
}
```

**è¯·æ±‚ä¸å“åº”**ï¼š

```
è¯·æ±‚1ï¼šAccept: application/json
å“åº”1ï¼š
{
  "id": 1,
  "name": "å¼ ä¸‰",
  "age": 25
}

è¯·æ±‚2ï¼šAccept: application/xml
å“åº”2ï¼š
<user>
  <id>1</id>
  <name>å¼ ä¸‰</name>
  <age>25</age>
</user>
```

---

## 6. ğŸ”„ å¤šæ ¼å¼å“åº”ç­–ç•¥


### 6.1 ä¸‰ç§åå•†ç­–ç•¥


**ç­–ç•¥å¯¹æ¯”**ï¼š

| **ç­–ç•¥** | **å®ç°æ–¹å¼** | **ç¤ºä¾‹** | **ä¼˜ç¼ºç‚¹** |
|---------|------------|---------|-----------|
| **è¯·æ±‚å¤´åå•†** | Acceptå¤´ | `Accept: application/json` | âœ… æ ‡å‡†RESTful<br>âŒ éœ€è¦è®¾ç½®è¯·æ±‚å¤´ |
| **æ‰©å±•ååå•†** | URLåç¼€ | `/user.json` `/user.xml` | âœ… ç®€å•ç›´è§‚<br>âŒ ä¸å¤ŸRESTful |
| **å‚æ•°åå•†** | è¯·æ±‚å‚æ•° | `/user?format=json` | âœ… çµæ´»æ–¹ä¾¿<br>âŒ æ±¡æŸ“URL |

### 6.2 è¯·æ±‚å¤´åå•†ï¼ˆæ¨èï¼‰


**æ ‡å‡†åšæ³•**ï¼š

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```
è¯·æ±‚ï¼š
GET /api/users/1
Accept: application/json

å“åº”ï¼š
Content-Type: application/json
{"id":1,"name":"å¼ ä¸‰"}
```

### 6.3 æ‰©å±•ååå•†


**é…ç½®æ–¹å¼**ï¼š

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void configureContentNegotiation(
            ContentNegotiationConfigurer configurer) {
        
        configurer
            .favorPathExtension(true)  // å¯ç”¨æ‰©å±•ååå•†
            .mediaType("json", MediaType.APPLICATION_JSON)
            .mediaType("xml", MediaType.APPLICATION_XML);
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```
/api/users/1.json    â†’ è¿”å›JSONæ ¼å¼
/api/users/1.xml     â†’ è¿”å›XMLæ ¼å¼
```

### 6.4 å‚æ•°åå•†


**é…ç½®æ–¹å¼**ï¼š

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void configureContentNegotiation(
            ContentNegotiationConfigurer configurer) {
        
        configurer
            .favorParameter(true)  // å¯ç”¨å‚æ•°åå•†
            .parameterName("format")  // å‚æ•°åç§°
            .mediaType("json", MediaType.APPLICATION_JSON)
            .mediaType("xml", MediaType.APPLICATION_XML);
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```
/api/users/1?format=json    â†’ è¿”å›JSONæ ¼å¼
/api/users/1?format=xml     â†’ è¿”å›XMLæ ¼å¼
```

### 6.5 é»˜è®¤æ ¼å¼é…ç½®


**è®¾ç½®é»˜è®¤å“åº”æ ¼å¼**ï¼š

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void configureContentNegotiation(
            ContentNegotiationConfigurer configurer) {
        
        configurer
            .defaultContentType(MediaType.APPLICATION_JSON)  // é»˜è®¤JSON
            .mediaType("json", MediaType.APPLICATION_JSON)
            .mediaType("xml", MediaType.APPLICATION_XML);
    }
}
```

**ä½œç”¨è¯´æ˜**ï¼š
- ğŸ”¸ å½“å®¢æˆ·ç«¯ä¸æŒ‡å®šAcceptå¤´æ—¶ï¼Œè¿”å›é»˜è®¤æ ¼å¼
- ğŸ”¸ å½“å®¢æˆ·ç«¯æŒ‡å®š`*/*`ï¼ˆä»»æ„æ ¼å¼ï¼‰æ—¶ï¼Œè¿”å›é»˜è®¤æ ¼å¼

### 6.6 å®Œæ•´é…ç½®ç¤ºä¾‹


**æ¨èçš„åå•†é…ç½®**ï¼š

```java
@Configuration
public class ContentNegotiationConfig implements WebMvcConfigurer {
    
    @Override
    public void configureContentNegotiation(
            ContentNegotiationConfigurer configurer) {
        
        configurer
            // ä¼˜å…ˆçº§ï¼šè¯·æ±‚å¤´ > æ‰©å±•å > å‚æ•°
            .favorParameter(true)           // å¯ç”¨å‚æ•°åå•†
            .parameterName("format")        // å‚æ•°å
            .favorPathExtension(true)       // å¯ç”¨æ‰©å±•ååå•†
            .ignoreAcceptHeader(false)      // ä¸å¿½ç•¥Acceptå¤´
            
            // é»˜è®¤æ ¼å¼
            .defaultContentType(MediaType.APPLICATION_JSON)
            
            // æ”¯æŒçš„æ ¼å¼
            .mediaType("json", MediaType.APPLICATION_JSON)
            .mediaType("xml", MediaType.APPLICATION_XML)
            .mediaType("html", MediaType.TEXT_HTML);
    }
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å†…å®¹åå•†ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åå•†å“åº”æ•°æ®çš„æ ¼å¼
ğŸ”¸ Acceptå¤´ï¼šå®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨æƒ³è¦ä»€ä¹ˆæ ¼å¼
ğŸ”¸ Content-Typeå¤´ï¼šæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯è¿”å›çš„æ˜¯ä»€ä¹ˆæ ¼å¼
ğŸ”¸ åª’ä½“ç±»å‹ï¼šapplication/jsonã€application/xmlç­‰æ ‡å‡†æ ¼å¼
ğŸ”¸ æ¶ˆæ¯è½¬æ¢å™¨ï¼šSpringç”¨æ¥è½¬æ¢Javaå¯¹è±¡å’Œå„ç§æ ¼å¼çš„å·¥å…·
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å†…å®¹åå•†çš„æœ¬è´¨**
```
å°±åƒç‚¹é¤ï¼š
- å®¢æˆ·è¯´"æˆ‘è¦é¥®æ–™"ï¼ˆå‘è¯·æ±‚ï¼‰
- æœåŠ¡å‘˜é—®"è¦ä»€ä¹ˆé¥®æ–™"ï¼ˆåå•†æ ¼å¼ï¼‰
- å®¢æˆ·å›ç­”"å¯ä¹"ï¼ˆAcceptå¤´ï¼‰
- æœåŠ¡å‘˜ç«¯æ¥å¯ä¹ï¼ˆè¿”å›æŒ‡å®šæ ¼å¼ï¼‰
```

**ğŸ”¹ ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„å…³ç³»**
```
Acceptï¼ˆè¯·æ±‚å¤´ï¼‰        â†’ å®¢æˆ·ç«¯è¯´ï¼šæˆ‘æƒ³è¦JSONæ ¼å¼
å†…å®¹åå•†ï¼ˆæœåŠ¡å™¨å¤„ç†ï¼‰   â†’ æœåŠ¡å™¨è¯´ï¼šå¥½çš„ï¼Œæˆ‘ç»™ä½ JSON
Content-Typeï¼ˆå“åº”å¤´ï¼‰  â†’ æœåŠ¡å™¨è¯´ï¼šè¿™å°±æ˜¯JSONæ ¼å¼çš„æ•°æ®
```

**ğŸ”¹ æ ¼å¼åå•†çš„ä¼˜å…ˆçº§**
```
1. Acceptè¯·æ±‚å¤´ï¼ˆæœ€æ ‡å‡†ï¼‰
2. URLæ‰©å±•åï¼ˆæœ€ç›´è§‚ï¼‰
3. è¯·æ±‚å‚æ•°ï¼ˆæœ€çµæ´»ï¼‰

æ¨èä½¿ç”¨Acceptå¤´æ–¹å¼ï¼Œç¬¦åˆRESTfulè§„èŒƒ
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**å¸¸è§åœºæ™¯**ï¼š
- ğŸŒ **å‰åç«¯åˆ†ç¦»**ï¼šå‰ç«¯ç”¨JSONï¼Œå…¶ä»–ç³»ç»Ÿå¯èƒ½ç”¨XML
- ğŸ“± **ç§»åŠ¨åº”ç”¨**ï¼šAPPé€šå¸¸ä½¿ç”¨JSONæ ¼å¼
- ğŸ¢ **ä¼ä¸šé›†æˆ**ï¼šè€ç³»ç»Ÿå¯èƒ½éœ€è¦XMLæ ¼å¼
- ğŸ“Š **æ•°æ®å¯¼å‡º**ï¼šæ”¯æŒJSONã€XMLã€CSVç­‰å¤šç§æ ¼å¼

**æœ€ä½³å®è·µ**ï¼š
- âœ… Spring Booté¡¹ç›®é»˜è®¤æ”¯æŒJSONï¼Œå¼€ç®±å³ç”¨
- âœ… éœ€è¦XMLæ—¶æ·»åŠ `jackson-dataformat-xml`ä¾èµ–
- âœ… ä½¿ç”¨`@RestController`è‡ªåŠ¨å¤„ç†æ ¼å¼è½¬æ¢
- âœ… ç”¨`produces`å±æ€§æ˜ç¡®æ¥å£æ”¯æŒçš„æ ¼å¼
- âœ… é…ç½®é»˜è®¤æ ¼å¼é¿å…å®¢æˆ·ç«¯ä¸æŒ‡å®šAcceptå¤´

### 7.4 å¿«é€Ÿä¸Šæ‰‹æ­¥éª¤


```
æ­¥éª¤1ï¼šæ·»åŠ ä¾èµ–
    â””â”€ Spring Boot Webï¼ˆè‡ªåŠ¨æ”¯æŒJSONï¼‰
    â””â”€ jackson-dataformat-xmlï¼ˆéœ€è¦XMLæ—¶æ·»åŠ ï¼‰

æ­¥éª¤2ï¼šç¼–å†™æ§åˆ¶å™¨
    â””â”€ ä½¿ç”¨@RestController
    â””â”€ è¿”å›Javaå¯¹è±¡ï¼ˆè‡ªåŠ¨è½¬æ¢æ ¼å¼ï¼‰

æ­¥éª¤3ï¼šæµ‹è¯•æ¥å£
    â””â”€ è®¾ç½®Accept: application/jsonï¼ˆæµ‹è¯•JSONï¼‰
    â””â”€ è®¾ç½®Accept: application/xmlï¼ˆæµ‹è¯•XMLï¼‰

æ­¥éª¤4ï¼šé«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰
    â””â”€ é…ç½®é»˜è®¤æ ¼å¼
    â””â”€ æ”¯æŒæ‰©å±•å/å‚æ•°åå•†
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å†…å®¹åå•†è®©ä¸€ä¸ªæ¥å£æ”¯æŒå¤šç§æ ¼å¼å“åº”
- Acceptå¤´æ˜¯å®¢æˆ·ç«¯çš„"ç‚¹å•"ï¼ŒContent-Typeæ˜¯æœåŠ¡å™¨çš„"ä¸Šèœ"
- Spring Booté»˜è®¤æ”¯æŒJSONï¼ŒXMLéœ€è¦é¢å¤–ä¾èµ–
- ä½¿ç”¨@RestControllerå°±èƒ½è‡ªåŠ¨å¤„ç†æ ¼å¼è½¬æ¢
- è®°ä½ï¼šè¯·æ±‚è¯´è¦ä»€ä¹ˆï¼Œå“åº”å°±ç»™ä»€ä¹ˆ