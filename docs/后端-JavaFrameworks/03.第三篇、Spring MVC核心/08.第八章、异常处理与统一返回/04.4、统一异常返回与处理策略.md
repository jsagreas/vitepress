---
title: 4ã€ç»Ÿä¸€å¼‚å¸¸è¿”å›ä¸å¤„ç†ç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å¼‚å¸¸å¤„ç†](#1-ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å¼‚å¸¸å¤„ç†)
2. [ç»Ÿä¸€è¿”å›å¯¹è±¡è®¾è®¡](#2-ç»Ÿä¸€è¿”å›å¯¹è±¡è®¾è®¡)
3. [é”™è¯¯ç è®¾è®¡è§„èŒƒ](#3-é”™è¯¯ç è®¾è®¡è§„èŒƒ)
4. [å…¨å±€å¼‚å¸¸å¤„ç†å™¨](#4-å…¨å±€å¼‚å¸¸å¤„ç†å™¨)
5. [ç»Ÿä¸€å“åº”åŒ…è£…](#5-ç»Ÿä¸€å“åº”åŒ…è£…)
6. [å¼‚å¸¸æ—¥å¿—è®°å½•](#6-å¼‚å¸¸æ—¥å¿—è®°å½•)
7. [å®‰å…¨ä¿¡æ¯å¤„ç†](#7-å®‰å…¨ä¿¡æ¯å¤„ç†)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

### 1. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å¼‚å¸¸å¤„ç†


#### 1.1 ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜


**æ²¡æœ‰ç»Ÿä¸€å¤„ç†æ—¶çš„æ··ä¹±åœºæ™¯**ï¼š

```
æƒ…å†µ1ï¼šå¼€å‘äººå‘˜Açš„è¿”å›
{ "code": 200, "msg": "æˆåŠŸ", "data": {...} }

æƒ…å†µ2ï¼šå¼€å‘äººå‘˜Bçš„è¿”å›  
{ "status": "ok", "result": {...} }

æƒ…å†µ3ï¼šå¼‚å¸¸æ—¶çš„è¿”å›
500 Internal Server Error (ä¸€å †å †æ ˆä¿¡æ¯æš´éœ²ç»™ç”¨æˆ·)

é—®é¢˜æ˜¾è€Œæ˜“è§ï¼š
âŒ å‰ç«¯ä¸çŸ¥é“æŒ‰å“ªä¸ªæ ¼å¼è§£æ
âŒ é”™è¯¯ä¿¡æ¯ç›´æ¥æš´éœ²ç»™ç”¨æˆ·ï¼Œä¸å®‰å…¨
âŒ æ²¡æœ‰ç»Ÿä¸€çš„é”™è¯¯ç ï¼Œæ— æ³•å®šä½é—®é¢˜
âŒ å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¿¡æ¯æ··åœ¨ä¸€èµ·
```

#### 1.2 ç»Ÿä¸€å¤„ç†çš„å¥½å¤„


> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†å°±åƒç»™ä½ çš„åº”ç”¨é…ä¸€ä¸ª"ç¿»è¯‘å®˜"ï¼ŒæŠŠå„ç§ä¹±ä¸ƒå…«ç³Ÿçš„é”™è¯¯éƒ½ç¿»è¯‘æˆç»Ÿä¸€ã€è§„èŒƒã€å‹å¥½çš„æ ¼å¼

**å¸¦æ¥çš„æ”¹å˜**ï¼š

```
âœ… å‰ç«¯å¼€å‘ä½“éªŒ
   - ç»Ÿä¸€çš„æ•°æ®æ ¼å¼ï¼Œä¸€å¥—ä»£ç æå®šæ‰€æœ‰å“åº”
   - æ˜ç¡®çš„é”™è¯¯ç ï¼Œå¿«é€Ÿå®šä½é—®é¢˜
   - å‹å¥½çš„é”™è¯¯æç¤ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ

âœ… åç«¯å¼€å‘æ•ˆç‡  
   - ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨åˆ°å¤„å†™try-catch
   - å¼‚å¸¸è‡ªåŠ¨æ•è·å’Œè½¬æ¢
   - ç»Ÿä¸€çš„æ—¥å¿—è®°å½•

âœ… ç³»ç»Ÿå®‰å…¨æ€§
   - æ•æ„Ÿä¿¡æ¯ä¸å¤–æ³„
   - å¼€å‘ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯åˆ†ç¦»
   - å¯æ§çš„é”™è¯¯ä¿¡æ¯å±•ç¤º
```

---

### 2. ğŸ“¦ ç»Ÿä¸€è¿”å›å¯¹è±¡è®¾è®¡


#### 2.1 åŸºç¡€è¿”å›å¯¹è±¡


**è®¾è®¡æ€è·¯**ï¼šæ‰€æœ‰æ¥å£éƒ½è¿”å›ç›¸åŒçš„æ•°æ®ç»“æ„

```java
/**
 * ç»Ÿä¸€è¿”å›å¯¹è±¡
 * å°±åƒä¸€ä¸ªæ ‡å‡†çš„å¿«é€’ç›’å­ï¼Œä¸ç®¡è£…ä»€ä¹ˆä¸œè¥¿ï¼Œå¤–åŒ…è£…éƒ½ä¸€æ ·
 */
public class Result<T> {
    private Integer code;      // çŠ¶æ€ç ï¼šå‘Šè¯‰ä½ æˆåŠŸè¿˜æ˜¯å¤±è´¥
    private String message;    // æç¤ºä¿¡æ¯ï¼šç»™ç”¨æˆ·çœ‹çš„å‹å¥½è¯´æ˜
    private T data;           // æ•°æ®ï¼šå®é™…è¦è¿”å›çš„å†…å®¹
    private Long timestamp;   // æ—¶é—´æˆ³ï¼šä»€ä¹ˆæ—¶å€™è¿”å›çš„
    
    // æˆåŠŸæ—¶ä½¿ç”¨
    public static <T> Result<T> success(T data) {
        return new Result<>(200, "æ“ä½œæˆåŠŸ", data);
    }
    
    // å¤±è´¥æ—¶ä½¿ç”¨
    public static <T> Result<T> error(Integer code, String message) {
        return new Result<>(code, message, null);
    }
}
```

**å®é™…ä½¿ç”¨æ•ˆæœ**ï¼š

```
æˆåŠŸå“åº”ç¤ºä¾‹ï¼š
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ", 
  "data": {
    "id": 1,
    "name": "å¼ ä¸‰"
  },
  "timestamp": 1695012345678
}

å¤±è´¥å“åº”ç¤ºä¾‹ï¼š
{
  "code": 40001,
  "message": "ç”¨æˆ·åä¸èƒ½ä¸ºç©º",
  "data": null,
  "timestamp": 1695012345678  
}
```

#### 2.2 åˆ†é¡µè¿”å›å¯¹è±¡


**ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„åˆ†é¡µå¯¹è±¡**ï¼Ÿ

```
ğŸ’­ æƒ³è±¡ä¸€ä¸‹ï¼š
æŸ¥è¯¢å•†å“åˆ—è¡¨ï¼Œæœ‰10000ä¸ªå•†å“ï¼Œæ€»ä¸èƒ½ä¸€æ¬¡å…¨è¿”å›å§ï¼Ÿ
éœ€è¦å‘Šè¯‰å‰ç«¯ï¼š
- è¿™æ˜¯ç¬¬å‡ é¡µçš„æ•°æ®  
- ä¸€å…±æœ‰å¤šå°‘æ¡
- æ€»å…±å¤šå°‘é¡µ
```

```java
/**
 * åˆ†é¡µè¿”å›å¯¹è±¡
 */
public class PageResult<T> {
    private List<T> list;       // å½“å‰é¡µæ•°æ®
    private Long total;         // æ€»è®°å½•æ•°
    private Integer pageNum;    // å½“å‰é¡µç 
    private Integer pageSize;   // æ¯é¡µå¤§å°
    
    // ä¾¿æ·æ–¹æ³•ï¼šè‡ªåŠ¨è®¡ç®—æ€»é¡µæ•°
    public Integer getTotalPages() {
        return (int) Math.ceil((double) total / pageSize);
    }
}
```

---

### 3. ğŸ”¢ é”™è¯¯ç è®¾è®¡è§„èŒƒ


#### 3.1 é”™è¯¯ç åˆ†ç±»ç­–ç•¥


**è®¾è®¡åŸåˆ™**ï¼šé”™è¯¯ç è¦èƒ½"æœ›æ–‡ç”Ÿä¹‰"

```
é”™è¯¯ç ç»“æ„è®¾è®¡ï¼ˆ5ä½æ•°ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ 1ä½ â”‚ 2ä½  â”‚ 2ä½  â”‚
â”‚æ¨¡å— â”‚ç±»å‹  â”‚å…·ä½“ç â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

ç¤ºä¾‹è¯´æ˜ï¼š
40001 = 4(ç”¨æˆ·æ¨¡å—) + 00(å‚æ•°é”™è¯¯) + 01(ç¬¬1ä¸ªé”™è¯¯)
50102 = 5(è®¢å•æ¨¡å—) + 01(ä¸šåŠ¡é”™è¯¯) + 02(ç¬¬2ä¸ªé”™è¯¯)
```

#### 3.2 å¸¸ç”¨é”™è¯¯ç å®šä¹‰


**ä½¿ç”¨æšä¸¾ç®¡ç†é”™è¯¯ç **ï¼š

```java
/**
 * é”™è¯¯ç æšä¸¾
 * å¥½å¤„ï¼šç»Ÿä¸€ç®¡ç†ï¼Œé¿å…é‡å¤ï¼ŒIDEæœ‰æç¤º
 */
public enum ErrorCode {
    
    // é€šç”¨é”™è¯¯ (1xxxx)
    SUCCESS(10000, "æ“ä½œæˆåŠŸ"),
    SYSTEM_ERROR(10001, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"),
    PARAM_ERROR(10002, "å‚æ•°é”™è¯¯"),
    
    // ç”¨æˆ·æ¨¡å— (4xxxx)  
    USER_NOT_FOUND(40001, "ç”¨æˆ·ä¸å­˜åœ¨"),
    USERNAME_EXIST(40002, "ç”¨æˆ·åå·²å­˜åœ¨"),
    PASSWORD_ERROR(40003, "å¯†ç é”™è¯¯"),
    
    // è®¢å•æ¨¡å— (5xxxx)
    ORDER_NOT_FOUND(50001, "è®¢å•ä¸å­˜åœ¨"),
    STOCK_NOT_ENOUGH(50002, "åº“å­˜ä¸è¶³");
    
    private final Integer code;
    private final String message;
    
    // æ„é€ æ–¹æ³•å’Œgetter...
}
```

**é”™è¯¯ç ä½¿ç”¨ç¤ºä¾‹**ï¼š

| é”™è¯¯ç  | å«ä¹‰ | ç”¨æˆ·çœ‹åˆ°çš„æç¤º | å¼€å‘çœ‹åˆ°çš„æ—¥å¿— |
|-------|------|--------------|--------------|
| `10001` | ç³»ç»Ÿå¼‚å¸¸ | "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•" | "NullPointerException..." |
| `40001` | ç”¨æˆ·ä¸å­˜åœ¨ | "ç”¨æˆ·ä¸å­˜åœ¨" | "User id=123 not found" |
| `50002` | åº“å­˜ä¸è¶³ | "å•†å“åº“å­˜ä¸è¶³" | "Product id=456 stock=0" |

---

### 4. ğŸ›¡ï¸ å…¨å±€å¼‚å¸¸å¤„ç†å™¨


#### 4.1 å¼‚å¸¸å¤„ç†å™¨åŸç†


> ğŸ’¡ **é€šä¿—ç†è§£**ï¼šå…¨å±€å¼‚å¸¸å¤„ç†å™¨å°±åƒä¸€ä¸ª"æ¥çƒæ‰‹"ï¼Œä¸ç®¡å“ªä¸ªæ¥å£æŠ›å‡ºå¼‚å¸¸ï¼Œå®ƒéƒ½èƒ½æ¥ä½å¹¶è½¬æ¢æˆç»Ÿä¸€æ ¼å¼

**å·¥ä½œæµç¨‹å›¾**ï¼š

```
ControlleræŠ›å‡ºå¼‚å¸¸
        â†“
å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ•è·
        â†“
åˆ¤æ–­å¼‚å¸¸ç±»å‹
    â†™        â†˜
è‡ªå®šä¹‰å¼‚å¸¸    ç³»ç»Ÿå¼‚å¸¸  
    â†“          â†“
è¿”å›é”™è¯¯ç     è®°å½•æ—¥å¿—+é€šç”¨æç¤º
    â†“          â†“
ç»Ÿä¸€è¿”å›æ ¼å¼è¾“å‡º
```

#### 4.2 å¼‚å¸¸å¤„ç†å™¨å®ç°


```java
/**
 * å…¨å±€å¼‚å¸¸å¤„ç†å™¨
 * @ControllerAdviceï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå…¨å±€å¤„ç†å™¨
 */
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    /**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     * è¿™æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å¼‚å¸¸ï¼ŒçŸ¥é“å…·ä½“åŸå› 
     */
    @ExceptionHandler(BusinessException.class)
    public Result<?> handleBusinessException(BusinessException e) {
        log.warn("ä¸šåŠ¡å¼‚å¸¸ï¼š{}", e.getMessage());
        return Result.error(e.getCode(), e.getMessage());
    }
    
    /**
     * å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸
     * ç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¸ç¬¦åˆè¦æ±‚
     */
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public Result<?> handleValidException(MethodArgumentNotValidException e) {
        // è·å–ç¬¬ä¸€ä¸ªæ ¡éªŒå¤±è´¥çš„ä¿¡æ¯
        String message = e.getBindingResult()
            .getFieldError()
            .getDefaultMessage();
        log.warn("å‚æ•°æ ¡éªŒå¤±è´¥ï¼š{}", message);
        return Result.error(10002, message);
    }
    
    /**
     * å¤„ç†å…¶ä»–æ‰€æœ‰å¼‚å¸¸
     * å…œåº•æ–¹æ¡ˆï¼šä¸‡ä¸€å‡ºç°æ²¡é¢„æ–™åˆ°çš„å¼‚å¸¸
     */
    @ExceptionHandler(Exception.class)
    public Result<?> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸ï¼š", e);
        // ä¸è¦æŠŠè¯¦ç»†é”™è¯¯ä¿¡æ¯æš´éœ²ç»™ç”¨æˆ·
        return Result.error(10001, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

#### 4.3 è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸


**ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰å¼‚å¸¸**ï¼Ÿ

```
ğŸ’­ æ€è€ƒåœºæ™¯ï¼š
ç”¨æˆ·ä¸‹å•æ—¶åº“å­˜ä¸è¶³ï¼Œæ€ä¹ˆåŠï¼Ÿ
- æŠ›Exceptionï¼Ÿå¤ªç¬¼ç»Ÿï¼Œä¸çŸ¥é“å…·ä½“åŸå› 
- è¿”å›nullï¼Ÿè°ƒç”¨æ–¹è¿˜è¦åˆ¤æ–­ï¼Œéº»çƒ¦
- è‡ªå®šä¹‰å¼‚å¸¸ï¼Ÿæ˜ç¡®åŸå› ï¼Œç»Ÿä¸€å¤„ç† âœ…
```

```java
/**
 * ä¸šåŠ¡å¼‚å¸¸ç±»
 * ç”¨äºä¸šåŠ¡é€»è¾‘ä¸­çš„å¯é¢„æœŸå¼‚å¸¸
 */
public class BusinessException extends RuntimeException {
    private Integer code;
    private String message;
    
    // ä½¿ç”¨é”™è¯¯ç æšä¸¾æ„é€ 
    public BusinessException(ErrorCode errorCode) {
        this.code = errorCode.getCode();
        this.message = errorCode.getMessage();
    }
    
    // ä½¿ç”¨ç¤ºä¾‹
    public void createOrder(Long productId) {
        Product product = productService.getById(productId);
        if (product.getStock() <= 0) {
            // ç›´æ¥æŠ›å¼‚å¸¸ï¼Œè®©å…¨å±€å¤„ç†å™¨å¤„ç†
            throw new BusinessException(ErrorCode.STOCK_NOT_ENOUGH);
        }
        // ç»§ç»­ä¸šåŠ¡é€»è¾‘...
    }
}
```

---

### 5. ğŸ ç»Ÿä¸€å“åº”åŒ…è£…


#### 5.1 ä¸ºä»€ä¹ˆéœ€è¦å“åº”åŒ…è£…


**é—®é¢˜åœºæ™¯**ï¼š

```
ControlleråŸå§‹ä»£ç ï¼š
public User getUser(Long id) {
    return userService.getById(id);
}

è¿”å›çš„æ˜¯ï¼š
{ "id": 1, "name": "å¼ ä¸‰" }

ä½†æˆ‘ä»¬å¸Œæœ›è¿”å›ï¼š
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": { "id": 1, "name": "å¼ ä¸‰" }
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å“åº”å¢å¼ºå™¨è‡ªåŠ¨åŒ…è£…

```java
/**
 * å“åº”å¢å¼ºå™¨
 * @RestControllerAdviceï¼šå…¨å±€å¢å¼º
 * ResponseBodyAdviceï¼šå“åº”ä½“å¤„ç†æ¥å£
 */
@RestControllerAdvice
public class ResponseAdvice implements ResponseBodyAdvice<Object> {
    
    /**
     * åˆ¤æ–­æ˜¯å¦éœ€è¦åŒ…è£…
     */
    @Override
    public boolean supports(MethodParameter returnType, 
                           Class converterType) {
        // å·²ç»æ˜¯Resultç±»å‹çš„ä¸å†åŒ…è£…
        return !returnType.getParameterType()
                         .equals(Result.class);
    }
    
    /**
     * åŒ…è£…å“åº”ä½“
     */
    @Override
    public Object beforeBodyWrite(Object body, 
                                  MethodParameter returnType,
                                  MediaType selectedContentType,
                                  Class selectedConverterType,
                                  ServerHttpRequest request,
                                  ServerHttpResponse response) {
        // è‡ªåŠ¨åŒ…è£…æˆResult
        return Result.success(body);
    }
}
```

**ä½¿ç”¨æ•ˆæœå¯¹æ¯”**ï¼š

```
âœ… å¼€å¯å“åº”åŒ…è£…åï¼š
Controlleråªéœ€è¦ï¼š
public User getUser(Long id) {
    return userService.getById(id);  // ç›´æ¥è¿”å›å¯¹è±¡
}

è‡ªåŠ¨å˜æˆï¼š
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": { "id": 1, "name": "å¼ ä¸‰" }
}
```

---

### 6. ğŸ“ å¼‚å¸¸æ—¥å¿—è®°å½•


#### 6.1 æ—¥å¿—è®°å½•ç­–ç•¥


**æ—¥å¿—åˆ†çº§åŸåˆ™**ï¼š

```
æ—¥å¿—çº§åˆ«ä½¿ç”¨åœºæ™¯ï¼š

ERRORï¼šç³»ç»Ÿå¼‚å¸¸ï¼Œéœ€è¦ç«‹å³å¤„ç†
â”œâ”€ æ•°æ®åº“è¿æ¥å¤±è´¥
â”œâ”€ ç©ºæŒ‡é’ˆå¼‚å¸¸
â””â”€ ç¬¬ä¸‰æ–¹æœåŠ¡è°ƒç”¨å¤±è´¥

WARNï¼šä¸šåŠ¡å¼‚å¸¸ï¼Œå¯é¢„æœŸçš„é”™è¯¯  
â”œâ”€ ç”¨æˆ·åå·²å­˜åœ¨
â”œâ”€ åº“å­˜ä¸è¶³
â””â”€ å‚æ•°æ ¡éªŒå¤±è´¥

INFOï¼šå…³é”®ä¸šåŠ¡èŠ‚ç‚¹
â”œâ”€ ç”¨æˆ·ç™»å½•æˆåŠŸ
â”œâ”€ è®¢å•åˆ›å»ºæˆåŠŸ
â””â”€ æ”¯ä»˜å®Œæˆ

DEBUGï¼šè¯¦ç»†è°ƒè¯•ä¿¡æ¯ï¼ˆç”Ÿäº§ç¯å¢ƒå…³é—­ï¼‰
â””â”€ æ–¹æ³•å‚æ•°ã€è¿”å›å€¼ç­‰
```

#### 6.2 æ—¥å¿—è®°å½•å®ç°


```java
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    @ExceptionHandler(BusinessException.class)
    public Result<?> handleBusinessException(BusinessException e) {
        // ä¸šåŠ¡å¼‚å¸¸ç”¨WARNçº§åˆ«ï¼ŒåŒ…å«å…³é”®ä¿¡æ¯
        log.warn("ä¸šåŠ¡å¼‚å¸¸ - é”™è¯¯ç ï¼š{}ï¼Œä¿¡æ¯ï¼š{}ï¼Œä½ç½®ï¼š{}", 
                 e.getCode(), 
                 e.getMessage(),
                 e.getStackTrace()[0]);
        return Result.error(e.getCode(), e.getMessage());
    }
    
    @ExceptionHandler(Exception.class)  
    public Result<?> handleException(Exception e, HttpServletRequest request) {
        // ç³»ç»Ÿå¼‚å¸¸ç”¨ERRORçº§åˆ«ï¼Œè®°å½•è¯¦ç»†å †æ ˆ
        log.error("ç³»ç»Ÿå¼‚å¸¸ - è¯·æ±‚è·¯å¾„ï¼š{}ï¼Œå¼‚å¸¸ä¿¡æ¯ï¼š", 
                  request.getRequestURI(), 
                  e);
        return Result.error(10001, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

**æ—¥å¿—è¾“å‡ºç¤ºä¾‹**ï¼š

```
ä¸šåŠ¡å¼‚å¸¸æ—¥å¿—ï¼š
2025-09-24 10:30:25 WARN  ä¸šåŠ¡å¼‚å¸¸ - é”™è¯¯ç ï¼š50002ï¼Œä¿¡æ¯ï¼šåº“å­˜ä¸è¶³ï¼Œ
ä½ç½®ï¼šOrderService.createOrder(OrderService.java:45)

ç³»ç»Ÿå¼‚å¸¸æ—¥å¿—ï¼š
2025-09-24 10:35:12 ERROR ç³»ç»Ÿå¼‚å¸¸ - è¯·æ±‚è·¯å¾„ï¼š/api/user/1ï¼Œå¼‚å¸¸ä¿¡æ¯ï¼š
java.lang.NullPointerException: Cannot invoke "User.getName()"
    at UserController.getUser(UserController.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    ...
```

---

### 7. ğŸ”’ å®‰å…¨ä¿¡æ¯å¤„ç†


#### 7.1 ç”Ÿäº§ç¯å¢ƒä¿¡æ¯éšè—


**å®‰å…¨é—®é¢˜ç¤ºä¾‹**ï¼š

```
âŒ å±é™©çš„åšæ³•ï¼ˆç›´æ¥æš´éœ²å †æ ˆï¼‰ï¼š
{
  "error": "NullPointerException",
  "trace": "at com.example.UserService.getUser(UserService.java:45)",
  "path": "/api/user/getById",
  "timestamp": "2025-09-24T10:30:00"
}

é»‘å®¢å¯èƒ½è·å–ï¼š
- ä»£ç ç»“æ„ä¿¡æ¯
- æ–‡ä»¶è·¯å¾„
- æ¡†æ¶ç‰ˆæœ¬
- ä¸šåŠ¡é€»è¾‘
```

#### 7.2 ç¯å¢ƒåŒºåˆ†å¤„ç†


```java
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    @Value("${spring.profiles.active}")
    private String env;  // å½“å‰ç¯å¢ƒï¼šdev/test/prod
    
    @ExceptionHandler(Exception.class)
    public Result<?> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸ï¼š", e);
        
        // å¼€å‘ç¯å¢ƒï¼šè¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒè¯•
        if ("dev".equals(env)) {
            return Result.error(10001, e.getMessage());
        }
        
        // ç”Ÿäº§ç¯å¢ƒï¼šè¿”å›å‹å¥½æç¤ºï¼Œéšè—ç»†èŠ‚
        return Result.error(10001, "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
    }
}
```

#### 7.3 ç”¨æˆ·å‹å¥½æç¤ºè®¾è®¡


**æç¤ºä¿¡æ¯è®¾è®¡åŸåˆ™**ï¼š

```
âœ… å¥½çš„é”™è¯¯æç¤ºï¼š
"ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·æ›´æ¢"           â† æ˜ç¡®é—®é¢˜ï¼Œç»™å‡ºæ–¹æ¡ˆ
"å¯†ç é•¿åº¦éœ€è¦8-20ä½"              â† å…·ä½“è¦æ±‚
"éªŒè¯ç å·²è¿‡æœŸï¼Œè¯·é‡æ–°è·å–"         â† è¯´æ˜åŸå› ï¼ŒæŒ‡å¼•æ“ä½œ

âŒ ä¸å¥½çš„é”™è¯¯æç¤ºï¼š
"error code: 40001"               â† ç”¨æˆ·çœ‹ä¸æ‡‚
"æ“ä½œå¤±è´¥"                        â† å¤ªç¬¼ç»Ÿ
"NullPointerException"            â† æŠ€æœ¯æœ¯è¯­
```

**é’ˆå¯¹ä¸åŒè§’è‰²çš„é”™è¯¯ä¿¡æ¯**ï¼š

| åœºæ™¯ | æ™®é€šç”¨æˆ·çœ‹åˆ° | å¼€å‘äººå‘˜çœ‹åˆ°ï¼ˆæ—¥å¿—ï¼‰ | è¿ç»´äººå‘˜çœ‹åˆ°ï¼ˆç›‘æ§ï¼‰ |
|-----|------------|------------------|------------------|
| åº“å­˜ä¸è¶³ | "å•†å“åº“å­˜ä¸è¶³" | "Product[id=123] stock=0" | "åº“å­˜å¼‚å¸¸å‘Šè­¦" |
| æ•°æ®åº“å¼‚å¸¸ | "ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•" | "SQLException: Connection timeout" | "æ•°æ®åº“è¿æ¥æ± å‘Šè­¦" |
| å‚æ•°é”™è¯¯ | "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®" | "Validation failed: phone format error" | - |

---

### 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


#### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç»Ÿä¸€è¿”å›å¯¹è±¡ï¼šæ‰€æœ‰æ¥å£è¿”å›ç›¸åŒæ ¼å¼ï¼Œå‰ç«¯åªéœ€ä¸€å¥—è§£æé€»è¾‘
ğŸ”¸ é”™è¯¯ç è®¾è®¡ï¼šè§ç çŸ¥æ„ï¼Œå¿«é€Ÿå®šä½é—®é¢˜æ ¹æº  
ğŸ”¸ å…¨å±€å¼‚å¸¸å¤„ç†ï¼šé›†ä¸­æ•è·è½¬æ¢ï¼Œä¸šåŠ¡ä»£ç æ›´ç®€æ´
ğŸ”¸ å“åº”åŒ…è£…ï¼šè‡ªåŠ¨åŒ…è£…è¿”å›å€¼ï¼Œå¼€å‘æ›´é«˜æ•ˆ
ğŸ”¸ æ—¥å¿—åˆ†çº§ï¼šæ ¹æ®ä¸¥é‡ç¨‹åº¦è®°å½•ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
ğŸ”¸ å®‰å…¨éšè—ï¼šç”Ÿäº§ç¯å¢ƒéšè—æ•æ„Ÿä¿¡æ¯ï¼Œä¿æŠ¤ç³»ç»Ÿå®‰å…¨
ğŸ”¸ å‹å¥½æç¤ºï¼šç”¨æˆ·èƒ½çœ‹æ‡‚çš„é”™è¯¯è¯´æ˜ï¼Œæå‡ä½“éªŒ
```

#### 8.2 å®é™…åº”ç”¨ä»·å€¼


**å¼€å‘æ•ˆç‡æå‡**ï¼š

```
ä¼ ç»Ÿå¼€å‘ï¼š
æ¯ä¸ªæ¥å£éƒ½è¦ï¼š
1. try-catchæ•è·å¼‚å¸¸
2. æ‰‹åŠ¨å°è£…è¿”å›å¯¹è±¡
3. å†™æ—¥å¿—è®°å½•ä»£ç 
4. åˆ¤æ–­ç¯å¢ƒè¿”å›ä¸åŒä¿¡æ¯

ç»Ÿä¸€å¤„ç†åï¼š
åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼š
public User getUser(Long id) {
    if (id == null) {
        throw new BusinessException(ErrorCode.PARAM_ERROR);
    }
    return userService.getById(id);
}
```

**ç³»ç»Ÿç¨³å®šæ€§æå‡**ï¼š

```
âœ… å¼‚å¸¸å…œåº•æœºåˆ¶
   - ä»»ä½•å¼‚å¸¸éƒ½èƒ½è¢«æ•è·
   - ä¸ä¼šå‡ºç°500é”™è¯¯é¡µé¢
   - ç³»ç»Ÿä¸ä¼šå› ä¸ºå¼‚å¸¸å´©æºƒ

âœ… é—®é¢˜å¿«é€Ÿå®šä½
   - ç»Ÿä¸€çš„é”™è¯¯ç ä½“ç³»
   - å®Œæ•´çš„å¼‚å¸¸æ—¥å¿—
   - æ¸…æ™°çš„è°ƒç”¨é“¾è·¯
```

#### 8.3 æœ€ä½³å®è·µå»ºè®®


**å¼€å‘é˜¶æ®µ**ï¼š

```
ğŸ’¡ å®šä¹‰æ¸…æ™°çš„é”™è¯¯ç ï¼š
- æŒ‰æ¨¡å—åˆ’åˆ†é”™è¯¯ç èŒƒå›´
- é”™è¯¯ä¿¡æ¯è¦å‡†ç¡®æè¿°é—®é¢˜
- å®šæœŸreviewå’Œæ›´æ–°é”™è¯¯ç 

ğŸ’¡ åˆç†ä½¿ç”¨å¼‚å¸¸ï¼š
- ä¸šåŠ¡å¼‚å¸¸ç”¨BusinessException
- ä¸è¦æ»¥ç”¨å¼‚å¸¸æ§åˆ¶æµç¨‹
- å…³é”®èŠ‚ç‚¹è®°å½•æ—¥å¿—
```

**ä¸Šçº¿é˜¶æ®µ**ï¼š

```
ğŸ’¡ ç¯å¢ƒé…ç½®æ£€æŸ¥ï¼š
- ç¡®è®¤ç”Ÿäº§ç¯å¢ƒå·²å±è”½è¯¦ç»†é”™è¯¯
- é…ç½®å¥½æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºè·¯å¾„
- è®¾ç½®å¼‚å¸¸å‘Šè­¦æœºåˆ¶

ğŸ’¡ ç›‘æ§å’Œä¼˜åŒ–ï¼š
- ç›‘æ§é«˜é¢‘é”™è¯¯ç 
- åˆ†æå¼‚å¸¸è¶‹åŠ¿
- ä¼˜åŒ–é”™è¯¯æç¤ºæ–‡æ¡ˆ
```

---

## ğŸ¯ å­¦ä¹ æ£€æŸ¥æ¸…å•


å­¦å®Œæœ¬èŠ‚ä½ åº”è¯¥èƒ½å¤Ÿï¼š
- [x] ç†è§£ç»Ÿä¸€å¼‚å¸¸å¤„ç†çš„é‡è¦æ€§å’Œå¥½å¤„
- [x] è®¾è®¡ç¬¦åˆè§„èŒƒçš„ç»Ÿä¸€è¿”å›å¯¹è±¡
- [x] åˆ¶å®šæ¸…æ™°æ˜“æ‡‚çš„é”™è¯¯ç ä½“ç³»  
- [x] å®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨
- [x] é…ç½®å“åº”è‡ªåŠ¨åŒ…è£…
- [x] åˆç†è®°å½•å¼‚å¸¸æ—¥å¿—
- [x] åŒºåˆ†ç¯å¢ƒå¤„ç†æ•æ„Ÿä¿¡æ¯
- [x] ç¼–å†™ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ”— ç›¸å…³é“¾æ¥


**â† å‰ç½®çŸ¥è¯†**ï¼š
- [Spring MVC åŸºç¡€æ¦‚å¿µ](/pages/springmvc-basic/)
- [Spring Boot è‡ªåŠ¨é…ç½®](/pages/springboot-auto/)

**â†’ åç»­å­¦ä¹ **ï¼š
- [Spring MVC æ‹¦æˆªå™¨](/pages/springmvc-interceptor/)
- [Spring Security å®‰å…¨æ¡†æ¶](/pages/spring-security/)

---

> ğŸ’¡ **ä¸€å¥è¯æ€»ç»“**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†å°±æ˜¯ç»™ç³»ç»Ÿè£…ä¸ª"ç¿»è¯‘å™¨"ï¼ŒæŠŠå„ç§é”™è¯¯éƒ½ç¿»è¯‘æˆç”¨æˆ·èƒ½çœ‹æ‡‚ã€å¼€å‘èƒ½å®šä½ã€ç³»ç»Ÿèƒ½å…œåº•çš„æ ‡å‡†æ ¼å¼ã€‚

> ğŸ”‘ **æ ¸å¿ƒè®°å¿†**ï¼š
> - æ ¼å¼ç»Ÿä¸€ï¼šResultå¯¹è±¡æ ‡å‡†åŒ–è¿”å›
> - ç è§å…¶æ„ï¼šé”™è¯¯ç è®¾è®¡è¦æ¸…æ™°  
> - å…¨å±€å…œåº•ï¼šå¼‚å¸¸å¤„ç†å™¨å…¨æ•è·
> - ç¯å¢ƒåŒºåˆ†ï¼šå¼€å‘è¯¦ç»†ç”Ÿäº§å‹å¥½
> - æ—¥å¿—å®Œæ•´ï¼šåˆ†çº§è®°å½•ä¾¿æ’æŸ¥