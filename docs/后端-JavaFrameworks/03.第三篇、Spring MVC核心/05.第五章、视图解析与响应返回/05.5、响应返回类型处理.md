---
title: 5ã€å“åº”è¿”å›ç±»å‹å¤„ç†
---
## ğŸ“š ç›®å½•

1. [å“åº”è¿”å›åŸºç¡€æ¦‚å¿µ](#1-å“åº”è¿”å›åŸºç¡€æ¦‚å¿µ)
2. [JSONå“åº”å¤„ç†](#2-JSONå“åº”å¤„ç†)
3. [å“åº”çŠ¶æ€ç æ§åˆ¶](#3-å“åº”çŠ¶æ€ç æ§åˆ¶)
4. [å­—ç¬¦ä¸²è§†å›¾è¿”å›](#4-å­—ç¬¦ä¸²è§†å›¾è¿”å›)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å“åº”è¿”å›åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å“åº”è¿”å›


**é€šä¿—ç†è§£**ï¼š
```
å°±åƒä½ å»é¤å…ç‚¹é¤ï¼š
é¡¾å®¢ï¼ˆæµè§ˆå™¨ï¼‰ â†’ æœåŠ¡å‘˜ï¼ˆControllerï¼‰ â†’ å¨æˆ¿ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰

å“åº”è¿”å›å°±æ˜¯ï¼š
å¨æˆ¿åšå¥½èœ â†’ æœåŠ¡å‘˜ç«¯å‡ºæ¥ â†’ é¡¾å®¢æ”¶åˆ°

Spring MVCçš„å“åº”å°±æ˜¯æŠŠå¤„ç†ç»“æœ"ç«¯ç»™"æµè§ˆå™¨
```

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **å“åº”**ï¼šControllerå¤„ç†å®Œè¯·æ±‚åï¼Œè¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®
- **è¿”å›ç±»å‹**ï¼šæ•°æ®å¯ä»¥æ˜¯ç½‘é¡µã€JSONã€XMLç­‰ä¸åŒæ ¼å¼
- **è‡ªåŠ¨è½¬æ¢**ï¼šSpring MVCèƒ½è‡ªåŠ¨æŠŠJavaå¯¹è±¡è½¬æˆéœ€è¦çš„æ ¼å¼

### 1.2 å¸¸è§å“åº”ç±»å‹å¯¹æ¯”


| å“åº”ç±»å‹ | **ç”¨é€”åœºæ™¯** | **è¿”å›å†…å®¹** | **å…¸å‹åº”ç”¨** |
|---------|------------|------------|------------|
| **è§†å›¾åç§°** | `è¿”å›ç½‘é¡µé¡µé¢` | `å­—ç¬¦ä¸²(é¡µé¢å)` | `ä¼ ç»ŸWebåº”ç”¨` |
| **JSONæ•°æ®** | `å‰åç«¯åˆ†ç¦»` | `JSONæ ¼å¼æ•°æ®` | `RESTful API` |
| **XMLæ•°æ®** | `ç³»ç»Ÿå¯¹æ¥` | `XMLæ ¼å¼æ•°æ®` | `ä¼ä¸šé›†æˆ` |
| **æ–‡ä»¶ä¸‹è½½** | `èµ„æºä¸‹è½½` | `æ–‡ä»¶æµ` | `æ–‡æ¡£ä¸‹è½½` |

### 1.3 å“åº”å¤„ç†æµç¨‹


```
è¯·æ±‚å¤„ç†æµç¨‹ï¼š

æµè§ˆå™¨å‘è¯·æ±‚
    â†“
Controlleræ¥æ”¶
    â†“
æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å†³å®šè¿”å›ä»€ä¹ˆæ ¼å¼ï¼Ÿ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“           â†“
è¿”å›è§†å›¾      è¿”å›æ•°æ®
    â†“           â†“
JSPé¡µé¢      JSON/XML
    â†“           â†“
æµè§ˆå™¨å±•ç¤º    å‰ç«¯å¤„ç†
```

---

## 2. ğŸ“¡ JSONå“åº”å¤„ç†


### 2.1 @ResponseBodyæ³¨è§£è¯¦è§£


**æ ¸å¿ƒä½œç”¨**ï¼š
> ğŸ¯ **@ResponseBodyçš„æœ¬è´¨**ï¼šå‘Šè¯‰Spring"ä¸è¦æ‰¾é¡µé¢äº†ï¼Œç›´æ¥æŠŠæ•°æ®è¿”å›ç»™æµè§ˆå™¨"

**åŸºç¡€ä½¿ç”¨**ï¼š

```java
@Controller
public class UserController {
    
    // è¿”å›JSONæ•°æ®ï¼ˆå•ä¸ªæ³¨è§£æ–¹å¼ï¼‰
    @GetMapping("/user/{id}")
    @ResponseBody  // å…³é”®ï¼šåŠ ä¸Šè¿™ä¸ªæ³¨è§£
    public User getUser(@PathVariable Long id) {
        User user = new User(id, "å¼ ä¸‰", 25);
        return user;  // Springè‡ªåŠ¨è½¬æˆJSON
    }
}
```

**è¿”å›æ•ˆæœ**ï¼š
```json
{
  "id": 1,
  "name": "å¼ ä¸‰",
  "age": 25
}
```

**ğŸ”¹ å·¥ä½œåŸç†**ï¼š
```
æ²¡æœ‰@ResponseBodyï¼š
è¿”å›Userå¯¹è±¡ â†’ Springæ‰¾"user"é¡µé¢ â†’ 404é”™è¯¯

æœ‰@ResponseBodyï¼š
è¿”å›Userå¯¹è±¡ â†’ è½¬æˆJSON â†’ ç›´æ¥è¿”å›æµè§ˆå™¨ âœ“
```

### 2.2 @RestControlleræ³¨è§£


**ç®€åŒ–å†™æ³•**ï¼š
> ğŸ’¡ **@RestController = @Controller + @ResponseBody**
> 
> ç›¸å½“äºç»™ç±»ä¸­æ‰€æœ‰æ–¹æ³•éƒ½åŠ äº†@ResponseBody

**å¯¹æ¯”ä½¿ç”¨**ï¼š

```java
// æ–¹å¼1ï¼šæ¯ä¸ªæ–¹æ³•éƒ½åŠ @ResponseBodyï¼ˆéº»çƒ¦ï¼‰
@Controller
public class UserController {
    @GetMapping("/user/{id}")
    @ResponseBody
    public User getUser(@PathVariable Long id) { }
    
    @GetMapping("/users")
    @ResponseBody
    public List<User> getUsers() { }
}

// æ–¹å¼2ï¼šç›´æ¥ç”¨@RestControllerï¼ˆæ¨èï¼‰
@RestController  // ç±»ä¸ŠåŠ ä¸€æ¬¡å°±å¤Ÿäº†
public class UserController {
    @GetMapping("/user/{id}")
    public User getUser(@PathVariable Long id) { }
    
    @GetMapping("/users")
    public List<User> getUsers() { }
}
```

**ğŸ”¸ é€‰æ‹©å»ºè®®**ï¼š
- **å‰åç«¯åˆ†ç¦»é¡¹ç›®**ï¼šç”¨`@RestController`ï¼ˆéƒ½è¿”å›æ•°æ®ï¼‰
- **ä¼ ç»ŸWebé¡¹ç›®**ï¼šç”¨`@Controller`ï¼ˆè¿”å›é¡µé¢ä¸ºä¸»ï¼‰
- **æ··åˆé¡¹ç›®**ï¼šç”¨`@Controller` + éœ€è¦çš„åœ°æ–¹åŠ `@ResponseBody`

### 2.3 JSONåºåˆ—åŒ–é…ç½®


**ä»€ä¹ˆæ˜¯åºåˆ—åŒ–**ï¼š
```
Javaå¯¹è±¡ â†’ JSONå­—ç¬¦ä¸² çš„è¿‡ç¨‹

ä¸¾ä¾‹ï¼š
Userå¯¹è±¡(å†…å­˜ä¸­) â†’ {"id":1,"name":"å¼ ä¸‰"} (å­—ç¬¦ä¸²)
```

**Jacksoné…ç½®**ï¼ˆSpring MVCé»˜è®¤ä½¿ç”¨Jacksonï¼‰ï¼š

```java
@Configuration
public class WebConfig {
    
    @Bean
    public ObjectMapper objectMapper() {
        ObjectMapper mapper = new ObjectMapper();
        
        // æ—¥æœŸæ ¼å¼åŒ–ï¼šæ—¶é—´æ˜¾ç¤ºæˆ 2024-09-24 è€Œä¸æ˜¯æ—¶é—´æˆ³
        mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
        
        // å¿½ç•¥nullå€¼ï¼šæœ‰äº›å­—æ®µæ˜¯nullå°±ä¸è¿”å›
        mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
        
        // å¿½ç•¥æœªçŸ¥å±æ€§ï¼šå‰ç«¯ä¼ æ¥å¤šä½™å­—æ®µä¸æŠ¥é”™
        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        
        return mapper;
    }
}
```

**å¸¸ç”¨Jacksonæ³¨è§£**ï¼š

```java
public class User {
    private Long id;
    
    @JsonProperty("userName")  // JSONä¸­å­—æ®µåå«userName
    private String name;
    
    @JsonFormat(pattern = "yyyy-MM-dd")  // æ—¥æœŸæ ¼å¼
    private Date birthday;
    
    @JsonIgnore  // ä¸è¿”å›ç»™å‰ç«¯ï¼ˆå¦‚å¯†ç ï¼‰
    private String password;
    
    // æ„é€ å™¨ã€getterã€setter...
}
```

**è¿”å›æ•ˆæœå¯¹æ¯”**ï¼š
```json
// é»˜è®¤è¿”å›ï¼ˆå¯èƒ½æœ‰é—®é¢˜ï¼‰
{
  "id": 1,
  "name": "å¼ ä¸‰",
  "birthday": 1695552000000,  // æ—¶é—´æˆ³ï¼Œéš¾è¯»
  "password": "123456"        // å¯†ç æ³„éœ²ï¼
}

// é…ç½®åè¿”å›ï¼ˆä¼˜åŒ–ï¼‰
{
  "id": 1,
  "userName": "å¼ ä¸‰",         // å­—æ®µåæ”¹äº†
  "birthday": "2024-09-24"    // æ ¼å¼åŒ–äº†
  // passwordå­—æ®µä¸è§äº† âœ“
}
```

### 2.4 è¿”å›é›†åˆæ•°æ®


**è¿”å›åˆ—è¡¨**ï¼š

```java
@RestController
@RequestMapping("/api")
public class UserController {
    
    // è¿”å›ç”¨æˆ·åˆ—è¡¨
    @GetMapping("/users")
    public List<User> getUserList() {
        List<User> users = Arrays.asList(
            new User(1L, "å¼ ä¸‰", 25),
            new User(2L, "æå››", 30),
            new User(3L, "ç‹äº”", 28)
        );
        return users;  // è‡ªåŠ¨è½¬æˆJSONæ•°ç»„
    }
}
```

**è¿”å›ç»“æœ**ï¼š
```json
[
  {"id": 1, "name": "å¼ ä¸‰", "age": 25},
  {"id": 2, "name": "æå››", "age": 30},
  {"id": 3, "name": "ç‹äº”", "age": 28}
]
```

**è¿”å›Map**ï¼š

```java
@GetMapping("/stats")
public Map<String, Object> getStats() {
    Map<String, Object> result = new HashMap<>();
    result.put("totalUsers", 100);
    result.put("activeUsers", 80);
    result.put("successRate", 0.95);
    return result;
}
```

**è¿”å›ç»“æœ**ï¼š
```json
{
  "totalUsers": 100,
  "activeUsers": 80,
  "successRate": 0.95
}
```

---

## 3. ğŸšï¸ å“åº”çŠ¶æ€ç æ§åˆ¶


### 3.1 HTTPçŠ¶æ€ç åŸºç¡€


**çŠ¶æ€ç å«ä¹‰**ï¼ˆè®°ä½æ ¸å¿ƒçš„å°±è¡Œï¼‰ï¼š

```
æˆåŠŸç±»(2xx)ï¼š
200 OK           - æˆåŠŸäº†
201 Created      - åˆ›å»ºæˆåŠŸ

å®¢æˆ·ç«¯é”™è¯¯(4xx)ï¼š
400 Bad Request  - è¯·æ±‚æœ‰é—®é¢˜
401 Unauthorized - æ²¡ç™»å½•
403 Forbidden    - æ²¡æƒé™
404 Not Found    - æ‰¾ä¸åˆ°

æœåŠ¡ç«¯é”™è¯¯(5xx)ï¼š
500 Internal Error - æœåŠ¡å™¨å‡ºé”™äº†
```

**ğŸ”¹ ä¸ºä»€ä¹ˆè¦è®¾ç½®çŠ¶æ€ç **ï¼š
```
åœºæ™¯ï¼šç”¨æˆ·æ³¨å†Œ

æˆåŠŸï¼šè¿”å›201 Createdï¼ˆå‘Šè¯‰å‰ç«¯ï¼šæ–°ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼‰
å¤±è´¥ï¼šè¿”å›400 Bad Requestï¼ˆå‘Šè¯‰å‰ç«¯ï¼šæäº¤çš„æ•°æ®æœ‰é—®é¢˜ï¼‰

å‰ç«¯æ ¹æ®çŠ¶æ€ç å°±çŸ¥é“è¯¥å¹²ä»€ä¹ˆï¼š
- 201ï¼šè·³è½¬åˆ°ç™»å½•é¡µ
- 400ï¼šæ˜¾ç¤ºé”™è¯¯æç¤º
```

### 3.2 @ResponseStatusæ³¨è§£


**åŸºç¡€ç”¨æ³•**ï¼š

```java
@RestController
public class UserController {
    
    // åˆ›å»ºç”¨æˆ·ï¼šæˆåŠŸè¿”å›201
    @PostMapping("/user")
    @ResponseStatus(HttpStatus.CREATED)  // è¿”å›201çŠ¶æ€ç 
    public User createUser(@RequestBody User user) {
        // ä¿å­˜ç”¨æˆ·é€»è¾‘
        return user;
    }
    
    // åˆ é™¤ç”¨æˆ·ï¼šæˆåŠŸè¿”å›204ï¼ˆæ— å†…å®¹ï¼‰
    @DeleteMapping("/user/{id}")
    @ResponseStatus(HttpStatus.NO_CONTENT)  // è¿”å›204
    public void deleteUser(@PathVariable Long id) {
        // åˆ é™¤é€»è¾‘
    }
}
```

**è‡ªå®šä¹‰å¼‚å¸¸çŠ¶æ€ç **ï¼š

```java
// è‡ªå®šä¹‰å¼‚å¸¸ç±»
@ResponseStatus(HttpStatus.NOT_FOUND)  // æŠ›å‡ºæ—¶è¿”å›404
public class UserNotFoundException extends RuntimeException {
    public UserNotFoundException(String message) {
        super(message);
    }
}

// Controllerä¸­ä½¿ç”¨
@GetMapping("/user/{id}")
public User getUser(@PathVariable Long id) {
    User user = userService.findById(id);
    if (user == null) {
        throw new UserNotFoundException("ç”¨æˆ·ä¸å­˜åœ¨: " + id);
    }
    return user;
}
```

**æ•ˆæœ**ï¼š
```
è®¿é—® /user/999ï¼ˆä¸å­˜åœ¨çš„IDï¼‰
â†“
æŠ›å‡ºUserNotFoundException
â†“
è‡ªåŠ¨è¿”å›404çŠ¶æ€ç  + é”™è¯¯ä¿¡æ¯
```

### 3.3 ResponseEntityè¯¦è§£


**ä»€ä¹ˆæ˜¯ResponseEntity**ï¼š
> ğŸ¯ **ResponseEntity = æ•°æ® + çŠ¶æ€ç  + å“åº”å¤´** çš„å®Œæ•´åŒ…è£…

**åŸºç¡€ç”¨æ³•**ï¼š

```java
@RestController
public class UserController {
    
    // æ–¹å¼1ï¼šåªè¿”å›æ•°æ®ï¼ˆç®€å•ï¼‰
    @GetMapping("/user/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
    
    // æ–¹å¼2ï¼šè¿”å›å®Œæ•´å“åº”ï¼ˆçµæ´»ï¼‰
    @GetMapping("/user/detail/{id}")
    public ResponseEntity<User> getUserDetail(@PathVariable Long id) {
        User user = userService.findById(id);
        
        if (user == null) {
            // è¿”å›404
            return ResponseEntity.notFound().build();
        }
        
        // è¿”å›200 + æ•°æ®
        return ResponseEntity.ok(user);
    }
}
```

**å®Œæ•´æ§åˆ¶ç¤ºä¾‹**ï¼š

```java
@PostMapping("/user")
public ResponseEntity<User> createUser(@RequestBody User user) {
    // å‚æ•°æ ¡éªŒ
    if (user.getName() == null) {
        return ResponseEntity
            .status(HttpStatus.BAD_REQUEST)  // 400çŠ¶æ€ç 
            .body(null);
    }
    
    // ä¿å­˜ç”¨æˆ·
    User saved = userService.save(user);
    
    // è¿”å›201 + æ•°æ® + è‡ªå®šä¹‰å“åº”å¤´
    return ResponseEntity
        .status(HttpStatus.CREATED)  // 201
        .header("Location", "/user/" + saved.getId())  // æ·»åŠ å“åº”å¤´
        .body(saved);
}
```

**å¸¸ç”¨å¿«æ·æ–¹æ³•**ï¼š

```java
// æˆåŠŸå“åº”ï¼ˆ200ï¼‰
ResponseEntity.ok(data)

// åˆ›å»ºæˆåŠŸï¼ˆ201ï¼‰
ResponseEntity.status(HttpStatus.CREATED).body(data)

// æ— å†…å®¹ï¼ˆ204ï¼‰
ResponseEntity.noContent().build()

// æœªæ‰¾åˆ°ï¼ˆ404ï¼‰
ResponseEntity.notFound().build()

// é”™è¯¯è¯·æ±‚ï¼ˆ400ï¼‰
ResponseEntity.badRequest().body("å‚æ•°é”™è¯¯")

// æœåŠ¡å™¨é”™è¯¯ï¼ˆ500ï¼‰
ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body("ç³»ç»Ÿé”™è¯¯")
```

### 3.4 ç»Ÿä¸€å“åº”æ ¼å¼


**ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€æ ¼å¼**ï¼š
```
é—®é¢˜åœºæ™¯ï¼š

æ¥å£1è¿”å›ï¼š{"id": 1, "name": "å¼ ä¸‰"}
æ¥å£2è¿”å›ï¼š[1, 2, 3]
æ¥å£3è¿”å›ï¼š{"error": "å¤±è´¥äº†"}

å‰ç«¯è¦å†™å¾ˆå¤šif-elseåˆ¤æ–­ï¼Œå¤ªéº»çƒ¦ï¼

è§£å†³ï¼šç»Ÿä¸€æˆè¿™æ ·
{
  "code": 200,        // ä¸šåŠ¡çŠ¶æ€ç 
  "message": "æˆåŠŸ",
  "data": {...}       // å®é™…æ•°æ®
}
```

**å®šä¹‰ç»Ÿä¸€å“åº”ç±»**ï¼š

```java
public class Result<T> {
    private Integer code;      // ä¸šåŠ¡çŠ¶æ€ç 
    private String message;    // æç¤ºä¿¡æ¯
    private T data;           // æ•°æ®

    // æˆåŠŸå“åº”
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.code = 200;
        result.message = "æ“ä½œæˆåŠŸ";
        result.data = data;
        return result;
    }

    // å¤±è´¥å“åº”
    public static <T> Result<T> error(String message) {
        Result<T> result = new Result<>();
        result.code = 500;
        result.message = message;
        return result;
    }
    
    // getter/setter...
}
```

**Controllerä½¿ç”¨**ï¼š

```java
@RestController
public class UserController {
    
    @GetMapping("/user/{id}")
    public Result<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        if (user == null) {
            return Result.error("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        return Result.success(user);
    }
    
    @GetMapping("/users")
    public Result<List<User>> getUsers() {
        List<User> users = userService.findAll();
        return Result.success(users);
    }
}
```

**ç»Ÿä¸€åçš„è¿”å›æ ¼å¼**ï¼š
```json
// æˆåŠŸ
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "name": "å¼ ä¸‰"
  }
}

// å¤±è´¥
{
  "code": 500,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```

---

## 4. ğŸ“„ å­—ç¬¦ä¸²è§†å›¾è¿”å›


### 4.1 è§†å›¾åç§°è¿”å›


**åŸºç¡€æ¦‚å¿µ**ï¼š
> ğŸ“– è¿”å›å­—ç¬¦ä¸² = å‘Šè¯‰Springå»æ‰¾å¯¹åº”çš„é¡µé¢æ–‡ä»¶

**åŸºç¡€ç”¨æ³•**ï¼š

```java
@Controller  // æ³¨æ„ï¼šè¿™é‡Œä¸æ˜¯@RestController
public class PageController {
    
    @GetMapping("/home")
    public String homePage() {
        return "home";  // è¿”å›å­—ç¬¦ä¸²"home"
    }
    
    // Springçš„æŸ¥æ‰¾è¿‡ç¨‹ï¼š
    // "home" â†’ /WEB-INF/views/home.jsp
}
```

**è§†å›¾è§£æé…ç½®**ï¼š

```java
@Configuration
public class WebMvcConfig implements WebMvcConfigurer {
    
    @Bean
    public ViewResolver viewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");  // å‰ç¼€
        resolver.setSuffix(".jsp");              // åç¼€
        return resolver;
    }
}
```

**æŸ¥æ‰¾è§„åˆ™**ï¼š
```
é…ç½®ï¼šprefix = "/WEB-INF/views/"  suffix = ".jsp"

è¿”å›"home"      â†’ /WEB-INF/views/home.jsp
è¿”å›"user/list" â†’ /WEB-INF/views/user/list.jsp
è¿”å›"admin/dashboard" â†’ /WEB-INF/views/admin/dashboard.jsp
```

### 4.2 è½¬å‘ä¸é‡å®šå‘


**è½¬å‘(forward)**ï¼š
```
ç‰¹ç‚¹ï¼š
- æµè§ˆå™¨åœ°å€æ ä¸å˜
- å¯ä»¥å…±äº«requestæ•°æ®
- æœåŠ¡å™¨å†…éƒ¨è·³è½¬

ä½¿ç”¨åœºæ™¯ï¼š
å¤„ç†å®Œä¸šåŠ¡ â†’ è½¬å‘åˆ°ç»“æœé¡µé¢
```

```java
@Controller
public class OrderController {
    
    @PostMapping("/order/submit")
    public String submitOrder(Order order, Model model) {
        // å¤„ç†è®¢å•
        orderService.save(order);
        
        // è½¬å‘åˆ°æˆåŠŸé¡µé¢
        model.addAttribute("orderId", order.getId());
        return "forward:/order/success";  // åŠ forward:å‰ç¼€
    }
    
    @GetMapping("/order/success")
    public String orderSuccess() {
        return "order-success";  // æ˜¾ç¤ºæˆåŠŸé¡µé¢
    }
}
```

**é‡å®šå‘(redirect)**ï¼š
```
ç‰¹ç‚¹ï¼š
- æµè§ˆå™¨åœ°å€æ ä¼šå˜
- ä¸èƒ½å…±äº«requestæ•°æ®
- æµè§ˆå™¨é‡æ–°å‘èµ·è¯·æ±‚

ä½¿ç”¨åœºæ™¯ï¼š
æ“ä½œæˆåŠŸåè·³è½¬åˆ°åˆ—è¡¨é¡µ
```

```java
@Controller
public class UserController {
    
    @PostMapping("/user/save")
    public String saveUser(User user) {
        userService.save(user);
        
        // é‡å®šå‘åˆ°åˆ—è¡¨é¡µ
        return "redirect:/user/list";  // åŠ redirect:å‰ç¼€
    }
    
    @GetMapping("/user/list")
    public String userList(Model model) {
        model.addAttribute("users", userService.findAll());
        return "user-list";  // æ˜¾ç¤ºåˆ—è¡¨é¡µé¢
    }
}
```

**å¯¹æ¯”æ€»ç»“**ï¼š

| ç‰¹æ€§ | **forwardè½¬å‘** | **redirecté‡å®šå‘** |
|-----|----------------|-------------------|
| åœ°å€æ  | `ä¸å˜` | `æ”¹å˜` |
| è¯·æ±‚æ¬¡æ•° | `1æ¬¡ï¼ˆæœåŠ¡å™¨å†…éƒ¨ï¼‰` | `2æ¬¡ï¼ˆå®¢æˆ·ç«¯å‘èµ·æ–°è¯·æ±‚ï¼‰` |
| æ•°æ®å…±äº« | `å¯ä»¥ï¼ˆåŒä¸€ä¸ªrequestï¼‰` | `ä¸å¯ä»¥ï¼ˆæ–°è¯·æ±‚ï¼‰` |
| ä½¿ç”¨åœºæ™¯ | `é¡µé¢è·³è½¬ã€é”™è¯¯å¤„ç†` | `æ“ä½œåè·³è½¬ã€é˜²é‡å¤æäº¤` |

### 4.3 æ··åˆä½¿ç”¨åœºæ™¯


**ä¼ ç»Ÿé¡µé¢ + AJAXæ¥å£**ï¼š

```java
@Controller
@RequestMapping("/product")
public class ProductController {
    
    // è¿”å›é¡µé¢
    @GetMapping("/list")
    public String listPage(Model model) {
        model.addAttribute("categories", categoryService.findAll());
        return "product-list";  // è¿”å›é¡µé¢
    }
    
    // è¿”å›JSONæ•°æ®
    @GetMapping("/data")
    @ResponseBody  // åŠ è¿™ä¸ªè¿”å›JSON
    public List<Product> listData() {
        return productService.findAll();
    }
}
```

**é¡µé¢åŠ è½½æµç¨‹**ï¼š
```
ç”¨æˆ·è®¿é—® /product/list
    â†“
è¿”å›product-list.jspé¡µé¢
    â†“
é¡µé¢ä¸­çš„JavaScriptè¯·æ±‚ /product/data
    â†“
è¿”å›JSONæ•°æ®
    â†“
é¡µé¢åŠ¨æ€æ¸²æŸ“æ•°æ®
```

---

## 5. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ @ResponseBodyï¼šè®©æ–¹æ³•è¿”å›æ•°æ®è€Œä¸æ˜¯é¡µé¢
ğŸ”¸ @RestControllerï¼š@Controller + @ResponseBodyçš„ç»„åˆ
ğŸ”¸ JSONåºåˆ—åŒ–ï¼šJavaå¯¹è±¡è‡ªåŠ¨è½¬æˆJSONå­—ç¬¦ä¸²
ğŸ”¸ çŠ¶æ€ç ï¼šå‘Šè¯‰å‰ç«¯è¯·æ±‚ç»“æœï¼ˆ200æˆåŠŸ/404æœªæ‰¾åˆ°/500é”™è¯¯ï¼‰
ğŸ”¸ ResponseEntityï¼šå®Œæ•´æ§åˆ¶å“åº”ï¼ˆæ•°æ®+çŠ¶æ€ç +å“åº”å¤´ï¼‰
```

### 5.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™è¿”å›ä»€ä¹ˆ**ï¼š
```
è¿”å›é¡µé¢ï¼š
- ç”¨@Controller
- æ–¹æ³•è¿”å›å­—ç¬¦ä¸²ï¼ˆè§†å›¾åï¼‰
- é€‚åˆä¼ ç»ŸWebé¡¹ç›®

è¿”å›æ•°æ®ï¼š
- ç”¨@RestControlleræˆ–@ResponseBody
- æ–¹æ³•è¿”å›å¯¹è±¡/é›†åˆ
- é€‚åˆå‰åç«¯åˆ†ç¦»é¡¹ç›®
```

**ğŸ”¹ Jacksoné…ç½®è¦ç‚¹**ï¼š
```
æ—¥æœŸæ ¼å¼åŒ–ï¼š
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")

å¿½ç•¥nullå€¼ï¼š
setSerializationInclusion(JsonInclude.Include.NON_NULL)

å¿½ç•¥å¯†ç ç­‰æ•æ„Ÿå­—æ®µï¼š
@JsonIgnore
```

**ğŸ”¹ çŠ¶æ€ç ä½¿ç”¨åŸåˆ™**ï¼š
```
åˆ›å»ºèµ„æº â†’ 201 Created
åˆ é™¤æˆåŠŸ â†’ 204 No Content
æ‰¾ä¸åˆ°   â†’ 404 Not Found
å‚æ•°é”™è¯¯ â†’ 400 Bad Request
æœåŠ¡å™¨é”™ â†’ 500 Internal Server Error
```

### 5.3 å®é™…åº”ç”¨åœºæ™¯


**åœºæ™¯1ï¼šå‰åç«¯åˆ†ç¦»é¡¹ç›®**
```java
@RestController
@RequestMapping("/api")
public class ApiController {
    
    @GetMapping("/users")
    public Result<List<User>> getUsers() {
        return Result.success(userService.findAll());
    }
}
```

**åœºæ™¯2ï¼šä¼ ç»ŸWebé¡¹ç›®**
```java
@Controller
@RequestMapping("/admin")
public class AdminController {
    
    @GetMapping("/users")
    public String userManage(Model model) {
        model.addAttribute("users", userService.findAll());
        return "admin/user-list";
    }
}
```

**åœºæ™¯3ï¼šæ··åˆé¡¹ç›®**
```java
@Controller
public class HybridController {
    
    // é¡µé¢æ¥å£
    @GetMapping("/dashboard")
    public String dashboard() {
        return "dashboard";
    }
    
    // æ•°æ®æ¥å£
    @GetMapping("/api/stats")
    @ResponseBody
    public Map<String, Object> getStats() {
        return statsService.getData();
    }
}
```

### 5.4 å¸¸è§é—®é¢˜è§£å†³


**âŒ é—®é¢˜1ï¼šè¿”å›å¯¹è±¡å˜æˆä¸‹è½½æ–‡ä»¶**
```
åŸå› ï¼šå¿˜è®°åŠ @ResponseBody
è§£å†³ï¼šåŠ ä¸Š@ResponseBodyæˆ–ç”¨@RestController
```

**âŒ é—®é¢˜2ï¼šJSONä¸­æ–‡ä¹±ç **
```java
// è§£å†³æ–¹æ³•ï¼šé…ç½®å­—ç¬¦ç¼–ç 
@RequestMapping(value = "/user", produces = "application/json;charset=UTF-8")
```

**âŒ é—®é¢˜3ï¼šæ—¥æœŸæ ¼å¼ä¸å¯¹**
```java
// è§£å†³æ–¹æ³•ï¼šé…ç½®æ—¥æœŸæ ¼å¼
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
```

**âŒ é—®é¢˜4ï¼šå¾ªç¯å¼•ç”¨æŠ¥é”™**
```java
// è§£å†³æ–¹æ³•ï¼šå¿½ç•¥æŸä¸€æ–¹çš„å¼•ç”¨
@JsonIgnoreProperties("orders")  // Userç±»ä¸­
private List<Order> orders;
```

### 5.5 æœ€ä½³å®è·µå»ºè®®


**âœ… ç»Ÿä¸€å“åº”æ ¼å¼**ï¼š
```java
// æ¨èï¼šæ‰€æœ‰æ¥å£éƒ½ç”¨ç»Ÿä¸€æ ¼å¼
public Result<User> getUser() {
    return Result.success(user);
}

// ä¸æ¨èï¼šæ¯ä¸ªæ¥å£æ ¼å¼ä¸ä¸€æ ·
public User getUser() { ... }
public Map getData() { ... }
```

**âœ… åˆç†ä½¿ç”¨çŠ¶æ€ç **ï¼š
```java
// æ¨èï¼šæ˜ç¡®çš„çŠ¶æ€ç 
@PostMapping("/user")
@ResponseStatus(HttpStatus.CREATED)  // 201
public User create(@RequestBody User user) { ... }

// ä¸æ¨èï¼šéƒ½ç”¨200
@PostMapping("/user")
public User create(@RequestBody User user) { ... }
```

**âœ… å¼‚å¸¸ç»Ÿä¸€å¤„ç†**ï¼š
```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(Exception.class)
    public Result<Void> handleException(Exception e) {
        return Result.error(e.getMessage());
    }
}
```

---

## ğŸ“Œ è®°å¿†è¦ç‚¹


**ä¸€å¥è¯ç²¾å**ï¼š
> @ResponseBodyè®©æ•°æ®ç›´æ¥è¿”å›ï¼Œ@RestControllerè®©æ•´ä¸ªç±»éƒ½è¿”å›æ•°æ®ï¼ŒResponseEntityè®©ä½ å®Œå…¨æ§åˆ¶å“åº”

**æ ¸å¿ƒå¯¹æ¯”**ï¼š
```
@Controller            â†’ è¿”å›é¡µé¢åç§°
@RestController        â†’ è¿”å›JSONæ•°æ®
@ResponseBody          â†’ å•ä¸ªæ–¹æ³•è¿”å›æ•°æ®
ResponseEntity         â†’ å®Œæ•´æ§åˆ¶å“åº”ï¼ˆæ•°æ®+çŠ¶æ€ç +å¤´ï¼‰
```

**è®°å¿†å£è¯€**ï¼š
```
è¿”å›é¡µé¢ç”¨Controllerï¼Œè¿”å›æ•°æ®ResponseBody
å…¨è¿”å›æ•°æ®RestControllerï¼Œå®Œæ•´æ§åˆ¶ResponseEntity
çŠ¶æ€ç è¦è®¾ç½®å¯¹ï¼Œå‰ç«¯æ‰èƒ½å¥½åˆ¤æ–­
JSONé…ç½®è¦åšå¥½ï¼Œæ—¥æœŸæ ¼å¼å’Œä¹±ç éƒ½è¦ç®¡
```