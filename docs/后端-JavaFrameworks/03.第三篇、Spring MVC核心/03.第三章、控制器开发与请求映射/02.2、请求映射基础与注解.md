---
title: 2ã€è¯·æ±‚æ˜ å°„åŸºç¡€ä¸æ³¨è§£
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯è¯·æ±‚æ˜ å°„](#1-ä»€ä¹ˆæ˜¯è¯·æ±‚æ˜ å°„)
2. [@RequestMapping æ ¸å¿ƒæ³¨è§£](#2-RequestMapping-æ ¸å¿ƒæ³¨è§£)
3. [HTTPæ–¹æ³•ä¸“ç”¨æ³¨è§£](#3-HTTPæ–¹æ³•ä¸“ç”¨æ³¨è§£)
4. [è·¯å¾„æ˜ å°„è¯¦è§£](#4-è·¯å¾„æ˜ å°„è¯¦è§£)
5. [æ–¹æ³•é™å®šä¸è¯·æ±‚çº¦æŸ](#5-æ–¹æ³•é™å®šä¸è¯·æ±‚çº¦æŸ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯è¯·æ±‚æ˜ å°„


### 1.1 è¯·æ±‚æ˜ å°„çš„æœ¬è´¨


**é€šä¿—ç†è§£**ï¼šè¯·æ±‚æ˜ å°„å°±åƒæ˜¯ç»™ä½ å®¶é—¨ç‰Œå·è´´æ ‡ç­¾ï¼Œå‘Šè¯‰å¿«é€’å‘˜è¯¥æŠŠåŒ…è£¹é€åˆ°å“ªä¸ªé—¨ã€‚

```
æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080/user/login
               â†“
Spring MVCï¼š   "å“¦ï¼Œè¦æ‰¾ /user/loginï¼Œæˆ‘çœ‹çœ‹æ˜¯å“ªä¸ªæ–¹æ³•å¤„ç†..."
               â†“
æ‰¾åˆ°æ ‡è®°ï¼š     @RequestMapping("/user/login") çš„æ–¹æ³•
               â†“
æ‰§è¡Œæ–¹æ³•ï¼š     è¿”å›ç™»å½•é¡µé¢æˆ–å¤„ç†ç™»å½•é€»è¾‘
```

**ä¸“ä¸šå®šä¹‰**ï¼šè¯·æ±‚æ˜ å°„æ˜¯ Spring MVC å°†å®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚ **URL** ä¸æ§åˆ¶å™¨ä¸­çš„ **å¤„ç†æ–¹æ³•** å»ºç«‹å¯¹åº”å…³ç³»çš„æœºåˆ¶ã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚æ˜ å°„


**æ²¡æœ‰è¯·æ±‚æ˜ å°„çš„å›°å¢ƒ**ï¼š
```
ç”¨æˆ·è®¿é—®ï¼š/user/list
ç³»ç»Ÿæ‡µäº†ï¼šè¿™ä¹ˆå¤šæ–¹æ³•ï¼Œå“ªä¸ªè¯¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Ÿ âŒ
```

**æœ‰äº†è¯·æ±‚æ˜ å°„çš„ä¼˜åŠ¿**ï¼š
```
ç”¨æˆ·è®¿é—®ï¼š/user/list
ç³»ç»Ÿæ˜ç¡®ï¼šæ‰¾åˆ° @GetMapping("/user/list") æ ‡è®°çš„æ–¹æ³• âœ…
ç²¾å‡†æ‰§è¡Œï¼šè°ƒç”¨ getUserList() æ–¹æ³•
```

| å¯¹æ¯”é¡¹ | ä¼ ç»ŸServlet | Spring MVCè¯·æ±‚æ˜ å°„ |
|--------|------------|-------------------|
| **é…ç½®æ–¹å¼** | `web.xml`é…ç½®URLæ˜ å°„ | `æ³¨è§£`ç›´æ¥æ ‡è®°æ–¹æ³• |
| **çµæ´»æ€§** | ä¸€ä¸ªServletå¤„ç†å¤šä¸ªè¯·æ±‚éœ€æ‰‹åŠ¨åˆ¤æ–­ | ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªè¯·æ±‚ï¼Œæ¸…æ™°æ˜ç¡® |
| **ç»´æŠ¤æ€§** | é…ç½®åˆ†æ•£ï¼Œéš¾ä»¥ç»´æŠ¤ | æ³¨è§£ä¸æ–¹æ³•åœ¨ä¸€èµ·ï¼Œä¸€ç›®äº†ç„¶ |

### 1.3 è¯·æ±‚æ˜ å°„çš„å·¥ä½œæµç¨‹


```
â‘  å®¢æˆ·ç«¯å‘é€è¯·æ±‚
   GET /user/123
        â†“
â‘¡ DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰æ¥æ”¶
   "æ”¶åˆ°è¯·æ±‚ï¼Œå¼€å§‹åŒ¹é…..."
        â†“
â‘¢ HandlerMappingï¼ˆå¤„ç†å™¨æ˜ å°„å™¨ï¼‰æŸ¥æ‰¾
   "æ‰«ææ‰€æœ‰@RequestMappingæ³¨è§£..."
        â†“
â‘£ æ‰¾åˆ°åŒ¹é…çš„å¤„ç†æ–¹æ³•
   @GetMapping("/user/{id}")
   public User getUser(@PathVariable Long id)
        â†“
â‘¤ æ‰§è¡Œæ–¹æ³•å¹¶è¿”å›ç»“æœ
   è¿”å› Userå¯¹è±¡ â†’ è½¬æ¢ä¸ºJSON â†’ å“åº”ç»™å®¢æˆ·ç«¯
```

---

## 2. ğŸ“ @RequestMapping æ ¸å¿ƒæ³¨è§£


### 2.1 åŸºç¡€ç”¨æ³•


**`@RequestMapping`** æ˜¯ Spring MVC ä¸­æœ€åŸºç¡€ã€æœ€æ ¸å¿ƒçš„è¯·æ±‚æ˜ å°„æ³¨è§£ï¼Œå…¶ä»–æ˜ å°„æ³¨è§£éƒ½æ˜¯åŸºäºå®ƒçš„ç®€åŒ–ç‰ˆæœ¬ã€‚

**åŸºæœ¬è¯­æ³•**ï¼š
```java
@RequestMapping(value = "è¯·æ±‚è·¯å¾„", method = RequestMethod.GET)
```

**å…¥é—¨ç¤ºä¾‹**ï¼š
```java
@Controller
public class UserController {
    
    // æœ€ç®€å•çš„æ˜ å°„ï¼šå¤„ç† /hello è¯·æ±‚
    @RequestMapping("/hello")
    public String hello() {
        return "hello"; // è¿”å›è§†å›¾åç§°
    }
}
```

**è®¿é—®æ•ˆæœ**ï¼š
```
æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:8080/hello
         â†“
Spring MVC æ‰¾åˆ° @RequestMapping("/hello") æ ‡è®°çš„æ–¹æ³•
         â†“
æ‰§è¡Œ hello() æ–¹æ³•ï¼Œè¿”å› "hello"
         â†“
è§†å›¾è§£æå™¨æ‰¾åˆ° hello.jsp æˆ– hello.html é¡µé¢
         â†“
æµè§ˆå™¨æ˜¾ç¤ºè¯¥é¡µé¢
```

### 2.2 æ ¸å¿ƒå±æ€§è¯¦è§£


#### ğŸ”¸ value å±æ€§ï¼ˆè·¯å¾„æ˜ å°„ï¼‰


**ä½œç”¨**ï¼šæŒ‡å®šè¯·æ±‚çš„ URL è·¯å¾„

```java
// å•ä¸ªè·¯å¾„
@RequestMapping("/user")

// å¤šä¸ªè·¯å¾„ï¼ˆéƒ½èƒ½è®¿é—®åˆ°åŒä¸€ä¸ªæ–¹æ³•ï¼‰
@RequestMapping({"/user", "/member", "/account"})
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š
```java
@Controller
@RequestMapping("/user")  // ç±»çº§åˆ«ï¼šç»Ÿä¸€å‰ç¼€
public class UserController {
    
    // æ–¹æ³•çº§åˆ«ï¼š/user/list
    @RequestMapping("/list")
    public String userList() {
        return "userList";
    }
    
    // å®Œæ•´è·¯å¾„ï¼š/user/detail
    @RequestMapping("/detail")
    public String userDetail() {
        return "userDetail";
    }
}
```

**è·¯å¾„ç»„åˆè§„åˆ™**ï¼š
```
ç±»ä¸Šçš„è·¯å¾„ + æ–¹æ³•ä¸Šçš„è·¯å¾„ = å®Œæ•´è®¿é—®è·¯å¾„

@RequestMapping("/user")     â† ç±»çº§åˆ«
  + @RequestMapping("/list")  â† æ–¹æ³•çº§åˆ«
  = /user/list               â† æœ€ç»ˆè®¿é—®è·¯å¾„
```

#### ğŸ”¸ method å±æ€§ï¼ˆHTTPæ–¹æ³•é™å®šï¼‰


**ä½œç”¨**ï¼šé™å®šè¯·æ±‚çš„ HTTP æ–¹æ³•ç±»å‹

```java
// åªæ¥å— GET è¯·æ±‚
@RequestMapping(value = "/user", method = RequestMethod.GET)

// åªæ¥å— POST è¯·æ±‚
@RequestMapping(value = "/user", method = RequestMethod.POST)

// æ¥å—å¤šç§è¯·æ±‚æ–¹æ³•
@RequestMapping(value = "/user", 
    method = {RequestMethod.GET, RequestMethod.POST})
```

**HTTP æ–¹æ³•å¯¹ç…§è¡¨**ï¼š

| HTTPæ–¹æ³• | ä½œç”¨ | å¸¸è§åœºæ™¯ |
|---------|------|---------|
| **GET** | è·å–èµ„æº | æŸ¥è¯¢æ•°æ®ã€æ˜¾ç¤ºé¡µé¢ |
| **POST** | åˆ›å»ºèµ„æº | æäº¤è¡¨å•ã€æ–°å¢æ•°æ® |
| **PUT** | æ›´æ–°èµ„æºï¼ˆå®Œæ•´ï¼‰ | ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆå…¨éƒ¨å­—æ®µï¼‰ |
| **DELETE** | åˆ é™¤èµ„æº | åˆ é™¤æ•°æ® |
| **PATCH** | æ›´æ–°èµ„æºï¼ˆéƒ¨åˆ†ï¼‰ | ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆéƒ¨åˆ†å­—æ®µï¼‰ |

**æ–¹æ³•é™å®šçš„é‡è¦æ€§**ï¼š
```java
@Controller
public class UserController {
    
    // GETè¯·æ±‚ï¼šæŸ¥è¯¢ç”¨æˆ·
    @RequestMapping(value = "/user", method = RequestMethod.GET)
    public String getUser() {
        return "user";
    }
    
    // POSTè¯·æ±‚ï¼šåˆ›å»ºç”¨æˆ·
    @RequestMapping(value = "/user", method = RequestMethod.POST)
    public String createUser() {
        return "success";
    }
}
```

**æµ‹è¯•æ•ˆæœ**ï¼š
```
GET  /user  â†’ æ‰§è¡Œ getUser()   âœ…
POST /user  â†’ æ‰§è¡Œ createUser() âœ…
PUT  /user  â†’ 405 Method Not Allowed âŒ
```

#### ğŸ”¸ params å±æ€§ï¼ˆå‚æ•°çº¦æŸï¼‰


**ä½œç”¨**ï¼šè¦æ±‚è¯·æ±‚å¿…é¡»åŒ…å«æŒ‡å®šçš„å‚æ•°

```java
// å¿…é¡»æœ‰ username å‚æ•°
@RequestMapping(value = "/login", params = "username")

// å¿…é¡»æœ‰ usernameï¼Œä¸”å€¼å¿…é¡»æ˜¯ admin
@RequestMapping(value = "/login", params = "username=admin")

// å¿…é¡»æ²¡æœ‰ test å‚æ•°
@RequestMapping(value = "/login", params = "!test")
```

**å®é™…ç¤ºä¾‹**ï¼š
```java
@Controller
public class LoginController {
    
    // åªæœ‰å¸¦äº† type=admin å‚æ•°æ‰åŒ¹é…
    @RequestMapping(value = "/login", params = "type=admin")
    public String adminLogin() {
        return "adminLogin";
    }
    
    // åªæœ‰å¸¦äº† type=user å‚æ•°æ‰åŒ¹é…
    @RequestMapping(value = "/login", params = "type=user")
    public String userLogin() {
        return "userLogin";
    }
}
```

**è®¿é—®æµ‹è¯•**ï¼š
```
/login?type=admin  â†’ æ‰§è¡Œ adminLogin()  âœ…
/login?type=user   â†’ æ‰§è¡Œ userLogin()   âœ…
/login             â†’ 404 Not Found      âŒ
```

#### ğŸ”¸ headers å±æ€§ï¼ˆè¯·æ±‚å¤´çº¦æŸï¼‰


**ä½œç”¨**ï¼šè¦æ±‚è¯·æ±‚å¿…é¡»åŒ…å«æŒ‡å®šçš„è¯·æ±‚å¤´

```java
// å¿…é¡»æ˜¯Ajaxè¯·æ±‚ï¼ˆXMLHttpRequestï¼‰
@RequestMapping(value = "/api/data", 
    headers = "X-Requested-With=XMLHttpRequest")

// å¿…é¡»æ¥å—JSONæ ¼å¼
@RequestMapping(value = "/api/user", 
    headers = "Accept=application/json")
```

### 2.3 å¸¸è§ä½¿ç”¨æ¨¡å¼


**â‘  ç±» + æ–¹æ³•ç»„åˆï¼ˆæœ€å¸¸ç”¨ï¼‰**ï¼š
```java
@Controller
@RequestMapping("/product")  // å…¬å…±å‰ç¼€
public class ProductController {
    
    @RequestMapping("/list")    // /product/list
    public String list() { }
    
    @RequestMapping("/detail")  // /product/detail
    public String detail() { }
}
```

**â‘¡ RESTful é£æ ¼**ï¼š
```java
@RestController
@RequestMapping("/api/users")
public class UserApiController {
    
    @RequestMapping(method = RequestMethod.GET)
    public List<User> getAllUsers() { }  // GET /api/users
    
    @RequestMapping(method = RequestMethod.POST)
    public User createUser() { }         // POST /api/users
}
```

---

## 3. ğŸš€ HTTPæ–¹æ³•ä¸“ç”¨æ³¨è§£


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦ä¸“ç”¨æ³¨è§£


**é—®é¢˜åœºæ™¯**ï¼š
```java
// ä½¿ç”¨ @RequestMapping å†™èµ·æ¥å¾ˆç¹ç
@RequestMapping(value = "/user", method = RequestMethod.GET)
@RequestMapping(value = "/user", method = RequestMethod.POST)
@RequestMapping(value = "/user", method = RequestMethod.PUT)
// æ¯æ¬¡éƒ½è¦å†™ method = RequestMethod.XXXï¼Œå¤ªéº»çƒ¦äº†ï¼
```

**è§£å†³æ–¹æ¡ˆ**ï¼šSpring 4.3 å¼•å…¥äº†ä¸“ç”¨æ³¨è§£ï¼Œè®©ä»£ç æ›´ç®€æ´

```java
// ç®€åŒ–åçš„å†™æ³•
@GetMapping("/user")     // ç­‰ä»·äº @RequestMapping(value="/user", method=GET)
@PostMapping("/user")    // ç­‰ä»·äº @RequestMapping(value="/user", method=POST)
@PutMapping("/user")     // ç­‰ä»·äº @RequestMapping(value="/user", method=PUT)
```

### 3.2 å„ä¸“ç”¨æ³¨è§£è¯¦è§£


#### ğŸ”¹ @GetMappingï¼ˆæŸ¥è¯¢/è·å–ï¼‰


**ä½œç”¨**ï¼šå¤„ç† GET è¯·æ±‚ï¼Œç”¨äºè·å–èµ„æºæˆ–æ˜¾ç¤ºé¡µé¢

```java
@RestController
@RequestMapping("/users")
public class UserController {
    
    // è·å–ç”¨æˆ·åˆ—è¡¨
    @GetMapping
    public List<User> getAllUsers() {
        return userService.findAll();
    }
    
    // è·å–å•ä¸ªç”¨æˆ·
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… æ˜¾ç¤ºé¡µé¢
- âœ… æŸ¥è¯¢æ•°æ®åˆ—è¡¨
- âœ… è·å–è¯¦æƒ…ä¿¡æ¯
- âœ… æœç´¢åŠŸèƒ½

#### ğŸ”¹ @PostMappingï¼ˆåˆ›å»º/æäº¤ï¼‰


**ä½œç”¨**ï¼šå¤„ç† POST è¯·æ±‚ï¼Œç”¨äºæäº¤æ•°æ®ã€åˆ›å»ºèµ„æº

```java
@RestController
@RequestMapping("/users")
public class UserController {
    
    // åˆ›å»ºæ–°ç”¨æˆ·
    @PostMapping
    public User createUser(@RequestBody User user) {
        return userService.save(user);
    }
    
    // ç”¨æˆ·ç™»å½•
    @PostMapping("/login")
    public String login(@RequestBody LoginForm form) {
        return authService.login(form);
    }
}
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… è¡¨å•æäº¤
- âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- âœ… åˆ›å»ºæ–°æ•°æ®
- âœ… æ–‡ä»¶ä¸Šä¼ 

#### ğŸ”¹ @PutMappingï¼ˆå®Œæ•´æ›´æ–°ï¼‰


**ä½œç”¨**ï¼šå¤„ç† PUT è¯·æ±‚ï¼Œç”¨äºå®Œæ•´æ›´æ–°èµ„æºï¼ˆæ‰€æœ‰å­—æ®µï¼‰

```java
@RestController
@RequestMapping("/users")
public class UserController {
    
    // æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆå®Œæ•´ï¼‰
    @PutMapping("/{id}")
    public User updateUser(@PathVariable Long id, 
                          @RequestBody User user) {
        user.setId(id);
        return userService.update(user);
    }
}
```

**PUT vs POST çš„åŒºåˆ«**ï¼š
```
POST /users      â†’ åˆ›å»ºæ–°ç”¨æˆ·ï¼ˆIDç”±æœåŠ¡å™¨ç”Ÿæˆï¼‰
PUT  /users/123  â†’ æ›´æ–°IDä¸º123çš„ç”¨æˆ·ï¼ˆIDå·²çŸ¥ï¼‰

POSTï¼šä¸çŸ¥é“èµ„æºIDï¼Œè®©æœåŠ¡å™¨åˆ›å»º
PUTï¼šå·²çŸ¥èµ„æºIDï¼Œè¦æ±‚å®Œæ•´æ›¿æ¢
```

#### ğŸ”¹ @DeleteMappingï¼ˆåˆ é™¤ï¼‰


**ä½œç”¨**ï¼šå¤„ç† DELETE è¯·æ±‚ï¼Œç”¨äºåˆ é™¤èµ„æº

```java
@RestController
@RequestMapping("/users")
public class UserController {
    
    // åˆ é™¤ç”¨æˆ·
    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable Long id) {
        userService.deleteById(id);
    }
    
    // æ‰¹é‡åˆ é™¤
    @DeleteMapping
    public void batchDelete(@RequestParam List<Long> ids) {
        userService.deleteByIds(ids);
    }
}
```

#### ğŸ”¹ @PatchMappingï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰


**ä½œç”¨**ï¼šå¤„ç† PATCH è¯·æ±‚ï¼Œç”¨äºéƒ¨åˆ†æ›´æ–°èµ„æºï¼ˆåªæ›´æ–°æŒ‡å®šå­—æ®µï¼‰

```java
@RestController
@RequestMapping("/users")
public class UserController {
    
    // éƒ¨åˆ†æ›´æ–°ç”¨æˆ·ä¿¡æ¯
    @PatchMapping("/{id}")
    public User patchUser(@PathVariable Long id, 
                         @RequestBody Map<String, Object> updates) {
        return userService.partialUpdate(id, updates);
    }
}
```

**PATCH vs PUT çš„åŒºåˆ«**ï¼š
```
PUT è¯·æ±‚ä½“ï¼š
{
  "id": 123,
  "username": "zhangsan",
  "email": "new@example.com",
  "phone": "13800138000",
  "address": "åŒ—äº¬"
}
â†’ å¿…é¡»æä¾›æ‰€æœ‰å­—æ®µï¼Œå®Œæ•´æ›¿æ¢

PATCH è¯·æ±‚ä½“ï¼š
{
  "email": "new@example.com"  // åªæ›´æ–°é‚®ç®±
}
â†’ åªæä¾›è¦ä¿®æ”¹çš„å­—æ®µï¼Œå…¶ä»–å­—æ®µä¸å˜
```

### 3.3 ä¸“ç”¨æ³¨è§£å¯¹ç…§è¡¨


| æ³¨è§£ | ç­‰ä»·å†™æ³• | HTTPæ–¹æ³• | å¸¸ç”¨åœºæ™¯ |
|------|---------|---------|---------|
| **@GetMapping** | `@RequestMapping(method=GET)` | GET | æŸ¥è¯¢ã€æ˜¾ç¤º |
| **@PostMapping** | `@RequestMapping(method=POST)` | POST | åˆ›å»ºã€æäº¤ |
| **@PutMapping** | `@RequestMapping(method=PUT)` | PUT | å®Œæ•´æ›´æ–° |
| **@DeleteMapping** | `@RequestMapping(method=DELETE)` | DELETE | åˆ é™¤ |
| **@PatchMapping** | `@RequestMapping(method=PATCH)` | PATCH | éƒ¨åˆ†æ›´æ–° |

### 3.4 RESTful API å®Œæ•´ç¤ºä¾‹


```java
@RestController
@RequestMapping("/api/articles")
public class ArticleController {
    
    // GET /api/articles - è·å–æ–‡ç« åˆ—è¡¨
    @GetMapping
    public List<Article> getArticles() {
        return articleService.findAll();
    }
    
    // GET /api/articles/123 - è·å–æŒ‡å®šæ–‡ç« 
    @GetMapping("/{id}")
    public Article getArticle(@PathVariable Long id) {
        return articleService.findById(id);
    }
    
    // POST /api/articles - åˆ›å»ºæ–°æ–‡ç« 
    @PostMapping
    public Article createArticle(@RequestBody Article article) {
        return articleService.create(article);
    }
    
    // PUT /api/articles/123 - å®Œæ•´æ›´æ–°æ–‡ç« 
    @PutMapping("/{id}")
    public Article updateArticle(@PathVariable Long id, 
                                @RequestBody Article article) {
        return articleService.update(id, article);
    }
    
    // PATCH /api/articles/123 - éƒ¨åˆ†æ›´æ–°ï¼ˆå¦‚ä¿®æ”¹æ ‡é¢˜ï¼‰
    @PatchMapping("/{id}")
    public Article patchArticle(@PathVariable Long id, 
                               @RequestBody Map<String, Object> updates) {
        return articleService.partialUpdate(id, updates);
    }
    
    // DELETE /api/articles/123 - åˆ é™¤æ–‡ç« 
    @DeleteMapping("/{id}")
    public void deleteArticle(@PathVariable Long id) {
        articleService.delete(id);
    }
}
```

---

## 4. ğŸ›£ï¸ è·¯å¾„æ˜ å°„è¯¦è§£


### 4.1 ç²¾ç¡®è·¯å¾„åŒ¹é…


**æœ€ç®€å•ç›´æ¥çš„æ˜ å°„æ–¹å¼**ï¼š
```java
@GetMapping("/user/profile")  // åªåŒ¹é… /user/profile
```

**è®¿é—®æµ‹è¯•**ï¼š
```
âœ… /user/profile      â†’ åŒ¹é…æˆåŠŸ
âŒ /user/profile/     â†’ ä¸åŒ¹é…ï¼ˆå¤šäº†æ–œæ ï¼‰
âŒ /user/profile/123  â†’ ä¸åŒ¹é…ï¼ˆå¤šäº†è·¯å¾„ï¼‰
```

### 4.2 è·¯å¾„å˜é‡ï¼ˆåŠ¨æ€è·¯å¾„ï¼‰


**è¯­æ³•**ï¼š`{å˜é‡å}` è¡¨ç¤ºè·¯å¾„ä¸­çš„åŠ¨æ€éƒ¨åˆ†

```java
@GetMapping("/user/{id}")
public User getUser(@PathVariable Long id) {
    return userService.findById(id);
}
```

**åŒ¹é…è§„åˆ™**ï¼š
```
è®¿é—® /user/123  â†’ id = 123
è®¿é—® /user/456  â†’ id = 456
è®¿é—® /user/abc  â†’ id = abcï¼ˆä¼šå°è¯•è½¬æ¢ä¸ºLongï¼Œå¤±è´¥åˆ™æŠ¥é”™ï¼‰
```

**å¤šä¸ªè·¯å¾„å˜é‡**ï¼š
```java
// è·¯å¾„ï¼š/order/{orderId}/item/{itemId}
@GetMapping("/order/{orderId}/item/{itemId}")
public OrderItem getOrderItem(@PathVariable Long orderId,
                             @PathVariable Long itemId) {
    return orderService.findItem(orderId, itemId);
}
```

**è®¿é—®ç¤ºä¾‹**ï¼š
```
/order/100/item/5  â†’ orderId=100, itemId=5
/order/200/item/8  â†’ orderId=200, itemId=8
```

**è‡ªå®šä¹‰å˜é‡å**ï¼š
```java
@GetMapping("/user/{userId}")
public User getUser(@PathVariable("userId") Long id) {
    // è·¯å¾„å˜é‡åæ˜¯ userIdï¼Œæ–¹æ³•å‚æ•°åæ˜¯ id
    return userService.findById(id);
}
```

### 4.3 é€šé…ç¬¦è·¯å¾„


#### ğŸ”¸ å•å±‚è·¯å¾„é€šé…ç¬¦ `*`


**è¯­æ³•**ï¼š`*` åŒ¹é…å•å±‚è·¯å¾„ä¸­çš„ä»»æ„å­—ç¬¦

```java
@GetMapping("/file/*.html")
```

**åŒ¹é…è§„åˆ™**ï¼š
```
âœ… /file/index.html    â†’ åŒ¹é…
âœ… /file/about.html    â†’ åŒ¹é…
âŒ /file/a/b.html      â†’ ä¸åŒ¹é…ï¼ˆå¤šå±‚è·¯å¾„ï¼‰
âŒ /file/index.jsp     â†’ ä¸åŒ¹é…ï¼ˆåç¼€ä¸å¯¹ï¼‰
```

#### ğŸ”¸ å¤šå±‚è·¯å¾„é€šé…ç¬¦ `**`


**è¯­æ³•**ï¼š`**` åŒ¹é…å¤šå±‚è·¯å¾„

```java
@GetMapping("/files/**")
public String getFile() {
    return "file";
}
```

**åŒ¹é…è§„åˆ™**ï¼š
```
âœ… /files/a.txt           â†’ åŒ¹é…
âœ… /files/docs/b.txt      â†’ åŒ¹é…
âœ… /files/docs/2024/c.txt â†’ åŒ¹é…ï¼ˆä»»æ„å±‚çº§ï¼‰
```

**å®é™…åº”ç”¨**ï¼š
```java
// å¤„ç†æ‰€æœ‰é™æ€èµ„æºè¯·æ±‚
@GetMapping("/static/**")
public void getStaticResource() { }

// åŒ¹é…ï¼š
// /static/css/style.css
// /static/js/app.js
// /static/images/logo.png
```

### 4.4 è·¯å¾„ä¼˜å…ˆçº§


**å½“å¤šä¸ªè·¯å¾„éƒ½èƒ½åŒ¹é…æ—¶ï¼ŒSpring MVC æŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆçº§é€‰æ‹©**ï¼š

```
ç²¾ç¡®åŒ¹é… > è·¯å¾„å˜é‡ > é€šé…ç¬¦

ä¼˜å…ˆçº§ç¤ºä¾‹ï¼š
@GetMapping("/user/list")        // â‘  æœ€é«˜ä¼˜å…ˆçº§ï¼ˆç²¾ç¡®ï¼‰
@GetMapping("/user/{id}")        // â‘¡ ä¸­ç­‰ä¼˜å…ˆçº§ï¼ˆå˜é‡ï¼‰
@GetMapping("/user/*")           // â‘¢ è¾ƒä½ä¼˜å…ˆçº§ï¼ˆå•å±‚é€šé…ï¼‰
@GetMapping("/user/**")          // â‘£ æœ€ä½ä¼˜å…ˆçº§ï¼ˆå¤šå±‚é€šé…ï¼‰
```

**æµ‹è¯•éªŒè¯**ï¼š
```java
@Controller
public class PriorityController {
    
    @GetMapping("/test/abc")
    public String exact() { return "ç²¾ç¡®åŒ¹é…"; }
    
    @GetMapping("/test/{name}")
    public String variable() { return "è·¯å¾„å˜é‡"; }
    
    @GetMapping("/test/*")
    public String wildcard() { return "é€šé…ç¬¦"; }
}
```

**è®¿é—®ç»“æœ**ï¼š
```
/test/abc  â†’ "ç²¾ç¡®åŒ¹é…"   ï¼ˆä¼˜å…ˆé€‰æ‹©ç²¾ç¡®åŒ¹é…ï¼‰
/test/xyz  â†’ "è·¯å¾„å˜é‡"   ï¼ˆæ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œé€‰æ‹©å˜é‡ï¼‰
```

---

## 5. âš™ï¸ æ–¹æ³•é™å®šä¸è¯·æ±‚çº¦æŸ


### 5.1 HTTP æ–¹æ³•é™å®š


**ä½œç”¨**ï¼šç¡®ä¿æ¥å£æŒ‰è®¾è®¡çš„æ–¹å¼è¢«è°ƒç”¨

```java
@Controller
public class MethodController {
    
    // åªå…è®¸ GET
    @RequestMapping(value = "/search", method = RequestMethod.GET)
    public String search() { }
    
    // åªå…è®¸ POST
    @RequestMapping(value = "/submit", method = RequestMethod.POST)
    public String submit() { }
    
    // å…è®¸å¤šç§æ–¹æ³•
    @RequestMapping(value = "/data", 
        method = {RequestMethod.GET, RequestMethod.POST})
    public String data() { }
}
```

**è¿åé™å®šçš„åæœ**ï¼š
```
å®šä¹‰ï¼š@GetMapping("/user")
è®¿é—®ï¼šPOST /user  â†’ 405 Method Not Allowed âŒ
```

### 5.2 è¯·æ±‚å‚æ•°çº¦æŸ


**params å±æ€§çš„å¤šç§ç”¨æ³•**ï¼š

```java
// â‘  å¿…é¡»åŒ…å«æŸå‚æ•°
@RequestMapping(value = "/search", params = "keyword")
// è®¿é—®å¿…é¡»ï¼š/search?keyword=xxx

// â‘¡ å‚æ•°å¿…é¡»ç­‰äºæŸå€¼
@RequestMapping(value = "/admin", params = "role=admin")
// è®¿é—®å¿…é¡»ï¼š/admin?role=admin

// â‘¢ å‚æ•°ä¸èƒ½ç­‰äºæŸå€¼
@RequestMapping(value = "/user", params = "role!=guest")
// /user?role=guest â†’ ä¸åŒ¹é… âŒ
// /user?role=user  â†’ åŒ¹é… âœ…

// â‘£ å¿…é¡»ä¸åŒ…å«æŸå‚æ•°
@RequestMapping(value = "/public", params = "!token")
// /public?token=xxx â†’ ä¸åŒ¹é… âŒ
// /public           â†’ åŒ¹é… âœ…
```

**ç»„åˆçº¦æŸ**ï¼š
```java
@RequestMapping(value = "/api", 
    params = {"appid", "secret", "version=2.0"})
// å¿…é¡»åŒæ—¶æ»¡è¶³ï¼šæœ‰appidå‚æ•°ã€æœ‰secretå‚æ•°ã€version=2.0
```

### 5.3 è¯·æ±‚å¤´çº¦æŸ


**headers å±æ€§çš„å®é™…åº”ç”¨**ï¼š

```java
// â‘  åŒºåˆ† Ajax è¯·æ±‚å’Œæ™®é€šè¯·æ±‚
@RequestMapping(value = "/data", 
    headers = "X-Requested-With=XMLHttpRequest")
public String ajaxData() {
    return "json";  // Ajaxè¯·æ±‚è¿”å›JSON
}

@RequestMapping("/data")
public String normalData() {
    return "page";  // æ™®é€šè¯·æ±‚è¿”å›é¡µé¢
}
```

```java
// â‘¡ é™å®šå†…å®¹ç±»å‹
@RequestMapping(value = "/upload", 
    headers = "Content-Type=multipart/form-data")
public String upload() {
    // åªæ¥å—æ–‡ä»¶ä¸Šä¼ è¯·æ±‚
}
```

```java
// â‘¢ APIç‰ˆæœ¬æ§åˆ¶
@RequestMapping(value = "/api/user", 
    headers = "API-Version=1.0")
public User getUserV1() { }

@RequestMapping(value = "/api/user", 
    headers = "API-Version=2.0")
public UserDTO getUserV2() { }
```

### 5.4 å†…å®¹ç±»å‹çº¦æŸ


#### ğŸ”¸ consumesï¼ˆé™å®šè¯·æ±‚å†…å®¹ç±»å‹ï¼‰


**ä½œç”¨**ï¼šé™å®šå®¢æˆ·ç«¯å‘é€çš„æ•°æ®æ ¼å¼

```java
// åªæ¥å— JSON æ ¼å¼
@PostMapping(value = "/user", 
    consumes = "application/json")
public User createUser(@RequestBody User user) { }

// åªæ¥å—è¡¨å•æ ¼å¼
@PostMapping(value = "/login", 
    consumes = "application/x-www-form-urlencoded")
public String login() { }
```

#### ğŸ”¸ producesï¼ˆé™å®šå“åº”å†…å®¹ç±»å‹ï¼‰


**ä½œç”¨**ï¼šæŒ‡å®šæœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ ¼å¼

```java
// è¿”å› JSON
@GetMapping(value = "/user", 
    produces = "application/json")
public User getUser() { }

// è¿”å› XML
@GetMapping(value = "/user", 
    produces = "application/xml")
public User getUserXml() { }
```

**å†…å®¹åå•†ç¤ºä¾‹**ï¼š
```java
@RestController
@RequestMapping("/api/user")
public class UserApiController {
    
    // æ ¹æ®å®¢æˆ·ç«¯Acceptå¤´è¿”å›ä¸åŒæ ¼å¼
    @GetMapping(produces = "application/json")
    public User getUserJson() {
        return new User();  // è¿”å›JSON
    }
    
    @GetMapping(produces = "application/xml")
    public User getUserXml() {
        return new User();  // è¿”å›XML
    }
}
```

**å®¢æˆ·ç«¯è¯·æ±‚ç¤ºä¾‹**ï¼š
```
è¯·æ±‚å¤´ï¼šAccept: application/json
å“åº”ï¼š  {"id":1,"name":"å¼ ä¸‰"}

è¯·æ±‚å¤´ï¼šAccept: application/xml  
å“åº”ï¼š  <user><id>1</id><name>å¼ ä¸‰</name></user>
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 è¯·æ±‚æ˜ å°„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ è¯·æ±‚æ˜ å°„ = URLè·¯å¾„ + å¤„ç†æ–¹æ³•çš„ç»‘å®šå…³ç³»
ğŸ¯ @RequestMapping = æœ€åŸºç¡€çš„æ˜ å°„æ³¨è§£ï¼ŒåŠŸèƒ½æœ€å…¨
ğŸ¯ ä¸“ç”¨æ³¨è§£ = @GetMappingç­‰ï¼Œç®€åŒ–ç‰ˆçš„@RequestMapping
ğŸ¯ è·¯å¾„æ˜ å°„ = ç²¾ç¡®è·¯å¾„ã€è·¯å¾„å˜é‡ã€é€šé…ç¬¦ä¸‰ç§æ–¹å¼
ğŸ¯ æ–¹æ³•é™å®š = é€šè¿‡HTTPæ–¹æ³•ã€å‚æ•°ã€è¯·æ±‚å¤´ç­‰çº¦æŸè¯·æ±‚
```

### 6.2 æ³¨è§£é€‰æ‹©æŒ‡å—


| åœºæ™¯ | æ¨èæ³¨è§£ | ç†ç”± |
|------|---------|------|
| **æŸ¥è¯¢æ•°æ®** | `@GetMapping` | è¯­ä¹‰æ¸…æ™°ï¼ŒRESTfulé£æ ¼ |
| **æäº¤è¡¨å•** | `@PostMapping` | ç¬¦åˆHTTPè§„èŒƒ |
| **æ›´æ–°æ•°æ®ï¼ˆå…¨éƒ¨ï¼‰** | `@PutMapping` | RESTfulæ ‡å‡†åšæ³• |
| **æ›´æ–°æ•°æ®ï¼ˆéƒ¨åˆ†ï¼‰** | `@PatchMapping` | èŠ‚çœæµé‡ï¼Œæ›´é«˜æ•ˆ |
| **åˆ é™¤æ•°æ®** | `@DeleteMapping` | è¯­ä¹‰æ˜ç¡® |
| **éœ€è¦å¤æ‚çº¦æŸ** | `@RequestMapping` | åŠŸèƒ½æœ€å…¨ï¼Œçµæ´»æ€§é«˜ |

### 6.3 è·¯å¾„è®¾è®¡æœ€ä½³å®è·µ


**âœ… æ¨èåšæ³•**ï¼š
```java
// ä½¿ç”¨å¤æ•°åè¯
@RequestMapping("/users")      // âœ… è€Œä¸æ˜¯ /user
@RequestMapping("/articles")   // âœ… è€Œä¸æ˜¯ /article

// ç±»å’Œæ–¹æ³•åˆ†å±‚
@RequestMapping("/api/users")  // ç±»çº§åˆ«ï¼šç»Ÿä¸€å‰ç¼€
@GetMapping("/{id}")          // æ–¹æ³•çº§åˆ«ï¼šå…·ä½“è·¯å¾„

// ä½¿ç”¨è·¯å¾„å˜é‡
@GetMapping("/users/{id}")    // âœ… è€Œä¸æ˜¯ /users?id=123
```

**âŒ é¿å…çš„åšæ³•**ï¼š
```java
// ä¸è¦åœ¨URLä¸­ä½¿ç”¨åŠ¨è¯
@GetMapping("/getUser")       // âŒ åŠ¨è¯å¤šä½™
@GetMapping("/users")         // âœ… ç”¨HTTPæ–¹æ³•è¡¨è¾¾åŠ¨ä½œ

// ä¸è¦ä½¿ç”¨å¤æ‚çš„æŸ¥è¯¢å‚æ•°
@GetMapping("/search?type=user&status=active&page=1")  // âŒ
@GetMapping("/users?status=active&page=1")             // âœ…
```

### 6.4 å¸¸è§é—®é¢˜ä¸è§£å†³


**é—®é¢˜1ï¼šè·¯å¾„å†²çª**
```java
// âŒ ä¼šå†²çª
@GetMapping("/user/{id}")
@GetMapping("/user/{name}")

// âœ… è§£å†³æ–¹æ¡ˆ
@GetMapping("/user/id/{id}")
@GetMapping("/user/name/{name}")
```

**é—®é¢˜2ï¼š405 Method Not Allowed**
```
åŸå› ï¼šHTTPæ–¹æ³•ä¸åŒ¹é…
è§£å†³ï¼šæ£€æŸ¥æ³¨è§£çš„methodå±æ€§æˆ–ä½¿ç”¨æ­£ç¡®çš„ä¸“ç”¨æ³¨è§£
```

**é—®é¢˜3ï¼š404 Not Found**
```
åŸå› ï¼šè·¯å¾„ä¸åŒ¹é…
æ£€æŸ¥ï¼š
1. è·¯å¾„æ˜¯å¦æ‹¼å†™æ­£ç¡®
2. ç±»å’Œæ–¹æ³•çš„@RequestMappingæ˜¯å¦æ­£ç¡®ç»„åˆ
3. æ˜¯å¦æœ‰æ‹¦æˆªå™¨æˆ–è¿‡æ»¤å™¨å½±å“
```

### 6.5 è®°å¿†å£è¯€


```
è¯·æ±‚æ˜ å°„è¿æ¥çº¿ï¼ŒURLæ–¹æ³•ç´§ç›¸è¿
@RequestMappingæ˜¯åŸºç¡€ï¼Œä¸“ç”¨æ³¨è§£æ›´ç®€ä¾¿
GetæŸ¥Postå¢Putæ”¹å…¨ï¼ŒDeleteåˆ Patchæ”¹éƒ¨åˆ†
è·¯å¾„ç²¾ç¡®å˜é‡é…ï¼Œé€šé…ç¬¦å·åˆ†å±‚çº§
æ–¹æ³•é™å®šä¿å®‰å…¨ï¼Œå‚æ•°å¤´éƒ¨åšçº¦æŸ
RESTfulè®¾è®¡è¦è§„èŒƒï¼Œæ¸…æ™°è¯­ä¹‰æ˜“ç»´æŠ¤
```