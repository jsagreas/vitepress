---
title: 1ã€å‰åç«¯åˆ†ç¦»æ¶æ„è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [å‰åç«¯åˆ†ç¦»æ¶æ„æ ¸å¿ƒç†å¿µ](#1-å‰åç«¯åˆ†ç¦»æ¶æ„æ ¸å¿ƒç†å¿µ)
2. [å‰åç«¯è§£è€¦å®ç°](#2-å‰åç«¯è§£è€¦å®ç°)
3. [JSONé€šä¿¡æœºåˆ¶](#3-JSONé€šä¿¡æœºåˆ¶)
4. [REST APIè®¾è®¡åŸåˆ™](#4-REST-APIè®¾è®¡åŸåˆ™)
5. [æ¥å£è§„èŒƒè®¾è®¡](#5-æ¥å£è§„èŒƒè®¾è®¡)
6. [æ•°æ®æ ¼å¼çº¦å®š](#6-æ•°æ®æ ¼å¼çº¦å®š)
7. [APIç‰ˆæœ¬ç®¡ç†](#7-APIç‰ˆæœ¬ç®¡ç†)
8. [APIæ–‡æ¡£ç®¡ç†](#8-APIæ–‡æ¡£ç®¡ç†)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å‰åç«¯åˆ†ç¦»æ¶æ„æ ¸å¿ƒç†å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å‰åç«¯åˆ†ç¦»

ğŸ¯ **é€šä¿—ç†è§£**ï¼šå‰åç«¯åˆ†ç¦»å°±åƒ"é¤å…ç‚¹é¤ç³»ç»Ÿ"

```
ä¼ ç»Ÿæ¨¡å¼ï¼ˆå‰åç«¯ä¸åˆ†ç¦»ï¼‰ï¼š
é¡¾å®¢ â†’ æœåŠ¡å‘˜ â†’ å¨æˆ¿ â†’ æœåŠ¡å‘˜ç«¯èœ â†’ é¡¾å®¢
â€¢ æœåŠ¡å‘˜æ—¢è¦ç‚¹å•ï¼Œåˆè¦ç«¯èœï¼Œè¿˜è¦ç»“è´¦
â€¢ å¨æˆ¿å’ŒæœåŠ¡å‘˜è€¦åˆåœ¨ä¸€èµ·ï¼Œæ•ˆç‡ä½

å‰åç«¯åˆ†ç¦»æ¨¡å¼ï¼š
é¡¾å®¢ â†’ ç‚¹é¤APP â†’ åå¨ç³»ç»Ÿ â†’ é…é€
â€¢ ç‚¹é¤APPï¼ˆå‰ç«¯ï¼‰ï¼šè´Ÿè´£ç•Œé¢å±•ç¤ºå’Œäº¤äº’
â€¢ åå¨ç³»ç»Ÿï¼ˆåç«¯ï¼‰ï¼šè´Ÿè´£å¤„ç†è®¢å•å’Œåšèœ
â€¢ é€šè¿‡æ ‡å‡†åŒ–èœå•ï¼ˆAPIï¼‰è¿›è¡Œæ²Ÿé€š
â€¢ å„è‡ªç‹¬ç«‹å·¥ä½œï¼Œäº’ä¸å¹²æ‰°
```

**ğŸ”¸ æ ¸å¿ƒä»·å€¼ä½“ç°**

| ä¼ ç»Ÿæ¨¡å¼ | **å‰åç«¯åˆ†ç¦»** | **ä¼˜åŠ¿** |
|---------|---------------|---------|
| ğŸ”¸ **å¼€å‘æ–¹å¼** | `æ··åœ¨ä¸€èµ·å†™` â†’ `ç‹¬ç«‹å¼€å‘` | `å¹¶è¡Œå¼€å‘ï¼Œæå‡æ•ˆç‡` |
| ğŸ”¸ **æŠ€æœ¯é€‰å‹** | `å—é™äºåç«¯æ¡†æ¶` â†’ `è‡ªç”±é€‰æ‹©` | `å‰ç«¯å¯ç”¨React/Vueç­‰` |
| ğŸ”¸ **éƒ¨ç½²æ–¹å¼** | `æ†ç»‘éƒ¨ç½²` â†’ `ç‹¬ç«‹éƒ¨ç½²` | `å‰åç«¯ç‹¬ç«‹å‡çº§` |
| ğŸ”¸ **å›¢é˜Ÿåä½œ** | `ç›¸äº’ç­‰å¾…` â†’ `å¹¶è¡Œå¼€å‘` | `å‡å°‘ä¾èµ–ï¼Œæé«˜äº§å‡º` |

### 1.2 æ¶æ„æ¼”è¿›è¿‡ç¨‹

**ğŸ“ˆ ä»ä¼ ç»Ÿåˆ°ç°ä»£çš„æ¼”å˜**

```
é˜¶æ®µ1ï¼šä¼ ç»ŸJSPæ¨¡å¼
æµè§ˆå™¨ â†’ Tomcat(JSP+Servlet) â†’ æ•°æ®åº“
ç‰¹ç‚¹ï¼šHTMLå’ŒJavaä»£ç æ··åœ¨ä¸€èµ·ï¼Œéš¾ä»¥ç»´æŠ¤

é˜¶æ®µ2ï¼šåŠåˆ†ç¦»æ¨¡å¼
æµè§ˆå™¨ â†’ åç«¯æ¸²æŸ“æ¨¡æ¿ â†’ æ•°æ®åº“
ç‰¹ç‚¹ï¼šä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œä½†ä»åœ¨åç«¯æ¸²æŸ“

é˜¶æ®µ3ï¼šå‰åç«¯åˆ†ç¦»
æµè§ˆå™¨(Vue/React) â†â†’ REST API(Spring Boot) â†â†’ æ•°æ®åº“
ç‰¹ç‚¹ï¼šå‰ç«¯æ˜¯ç‹¬ç«‹åº”ç”¨ï¼Œé€šè¿‡APIä¸åç«¯é€šä¿¡
```

**ğŸ’¡ åˆ†ç¦»æ¶æ„çš„å·¥ä½œæµç¨‹**
```
å‰ç«¯å¼€å‘æµç¨‹ï¼š
1. ä½¿ç”¨Vue/Reactç­‰æ¡†æ¶å¼€å‘ç•Œé¢
2. è°ƒç”¨åç«¯APIè·å–æ•°æ®
3. åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“é¡µé¢
4. ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²åˆ°Nginxç­‰æœåŠ¡å™¨

åç«¯å¼€å‘æµç¨‹ï¼š
1. ä½¿ç”¨Spring Bootå¼€å‘APIæ¥å£
2. å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æ“ä½œ
3. è¿”å›JSONæ ¼å¼æ•°æ®
4. ç‹¬ç«‹éƒ¨ç½²åˆ°JavaæœåŠ¡å™¨

æ•°æ®äº¤äº’ï¼š
å‰ç«¯ --HTTPè¯·æ±‚(JSON)--> åç«¯
å‰ç«¯ <--HTTPå“åº”(JSON)-- åç«¯
```

### 1.3 å‰åç«¯åˆ†ç¦»çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜

**âœ… æ ¸å¿ƒä¼˜åŠ¿**
```
å¼€å‘æ•ˆç‡æå‡ï¼š
â€¢ å‰åç«¯å¹¶è¡Œå¼€å‘ï¼Œäº’ä¸é˜»å¡
â€¢ æŠ€æœ¯æ ˆç‹¬ç«‹é€‰æ‹©ï¼Œå‘æŒ¥å„è‡ªä¼˜åŠ¿
â€¢ ä»£ç èŒè´£æ¸…æ™°ï¼Œç»´æŠ¤æˆæœ¬é™ä½

ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼š
â€¢ å‰ç«¯å¯å®ç°å•é¡µåº”ç”¨ï¼ˆSPAï¼‰
â€¢ é¡µé¢åˆ‡æ¢æ— åˆ·æ–°ï¼Œä½“éªŒæµç•…
â€¢ å¯ä»¥åšç¦»çº¿ç¼“å­˜ï¼Œæå‡æ€§èƒ½

ç³»ç»Ÿæ¶æ„çµæ´»ï¼š
â€¢ ä¸€å¥—åç«¯APIå¯æœåŠ¡å¤šä¸ªå‰ç«¯ï¼ˆWebã€Appã€å°ç¨‹åºï¼‰
â€¢ å‰åç«¯ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
â€¢ ä¾¿äºå¾®æœåŠ¡åŒ–æ”¹é€ 
```

**âš ï¸ é¢ä¸´çš„æŒ‘æˆ˜**
```
å¼€å‘å¤æ‚åº¦ï¼š
â€¢ éœ€è¦å®šä¹‰æ¸…æ™°çš„æ¥å£è§„èŒƒ
â€¢ è·¨åŸŸé—®é¢˜éœ€è¦å¤„ç†
â€¢ å‰åç«¯è”è°ƒæˆæœ¬å¢åŠ 

æŠ€æœ¯è¦æ±‚ï¼š
â€¢ å‰ç«¯éœ€è¦æŒæ¡ç°ä»£æ¡†æ¶
â€¢ åç«¯éœ€è¦è®¾è®¡å¥½API
â€¢ å›¢é˜Ÿéœ€è¦ç»Ÿä¸€è§„èŒƒ

å®‰å…¨æ€§è€ƒè™‘ï¼š
â€¢ APIæš´éœ²åœ¨å…¬ç½‘ï¼Œéœ€è¦é‰´æƒ
â€¢ å‰ç«¯ä»£ç å¯è§ï¼Œä¸èƒ½å­˜æ•æ„Ÿä¿¡æ¯
â€¢ éœ€è¦é˜²èŒƒCSRFã€XSSç­‰æ”»å‡»
```

---

## 2. ğŸ”— å‰åç«¯è§£è€¦å®ç°


### 2.1 è§£è€¦çš„æ ¸å¿ƒæ€æƒ³

**ğŸ¯ ç†è§£"è§£è€¦"çš„æœ¬è´¨**

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
â€¢ æ’åº§å’Œç”µå™¨ï¼šæ ‡å‡†åŒ–çš„æ¥å£ï¼ˆ220Væ’åº§ï¼‰
â€¢ ä¸åŒç”µå™¨ï¼ˆç”µè§†ã€å†°ç®±ï¼‰éƒ½èƒ½ç”¨åŒä¸€ä¸ªæ’åº§
â€¢ æ¢ç”µå™¨ä¸ç”¨æ”¹æ’åº§ï¼Œæ¢æ’åº§ä¸ç”¨æ”¹ç”µå™¨

å‰åç«¯è§£è€¦ï¼š
â€¢ å‰ç«¯å’Œåç«¯ï¼šæ ‡å‡†åŒ–çš„æ¥å£ï¼ˆREST APIï¼‰
â€¢ ä¸åŒå‰ç«¯ï¼ˆWebã€Appï¼‰éƒ½èƒ½ç”¨åŒä¸€å¥—API
â€¢ æ¢å‰ç«¯æ¡†æ¶ä¸ç”¨æ”¹åç«¯ï¼Œæ”¹åç«¯é€»è¾‘ä¸å½±å“å‰ç«¯
```

**ğŸ”¸ è§£è€¦çš„å®ç°æ–¹å¼**
```
æŠ€æœ¯å±‚é¢è§£è€¦ï¼š
å‰ç«¯æŠ€æœ¯æ ˆï¼šVue/React/Angular + æ‰“åŒ…å·¥å…·
åç«¯æŠ€æœ¯æ ˆï¼šSpring Boot + RESTful API
ä¸­é—´æ¡¥æ¢ï¼šHTTPåè®® + JSONæ•°æ®æ ¼å¼

éƒ¨ç½²å±‚é¢è§£è€¦ï¼š
å‰ç«¯éƒ¨ç½²ï¼šNginxé™æ€æœåŠ¡å™¨
åç«¯éƒ¨ç½²ï¼šTomcat/Spring Bootå†…ç½®æœåŠ¡å™¨
é€šè¿‡åå‘ä»£ç†è¿æ¥ï¼ˆå¦‚Nginxè½¬å‘ï¼‰

å¼€å‘å±‚é¢è§£è€¦ï¼š
å‰ç«¯å›¢é˜Ÿï¼šä¸“æ³¨UIå’Œäº¤äº’
åç«¯å›¢é˜Ÿï¼šä¸“æ³¨ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®
é€šè¿‡APIæ–‡æ¡£åä½œ
```

### 2.2 Spring Bootä¸­çš„è§£è€¦å®è·µ

**ğŸ“ åç«¯APIå¼€å‘è§„èŒƒ**

```java
// 1. ä½¿ç”¨@RestControlleræ›¿ä»£@Controller
@RestController  // ç»„åˆäº†@Controllerå’Œ@ResponseBody
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // è¿”å›JSONæ ¼å¼æ•°æ®ï¼Œä¸è¿”å›è§†å›¾
    @GetMapping("/{id}")
    public Result<User> getUserById(@PathVariable Long id) {
        User user = userService.findById(id);
        return Result.success(user);
    }
}

// 2. ç»Ÿä¸€è¿”å›ç»“æœå°è£…
public class Result<T> {
    private Integer code;      // çŠ¶æ€ç 
    private String message;    // æç¤ºä¿¡æ¯
    private T data;           // è¿”å›æ•°æ®
    
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.code = 200;
        result.message = "æ“ä½œæˆåŠŸ";
        result.data = data;
        return result;
    }
    
    public static <T> Result<T> error(String message) {
        Result<T> result = new Result<>();
        result.code = 500;
        result.message = message;
        return result;
    }
}
```

**ğŸ”§ å‰ç«¯è°ƒç”¨ç¤ºä¾‹**
```javascript
// å‰ç«¯ä½¿ç”¨axiosè°ƒç”¨API
import axios from 'axios'

// è·å–ç”¨æˆ·ä¿¡æ¯
async function getUserInfo(userId) {
    try {
        const response = await axios.get(`/api/users/${userId}`)
        
        if (response.data.code === 200) {
            // æˆåŠŸè·å–æ•°æ®
            console.log('ç”¨æˆ·ä¿¡æ¯ï¼š', response.data.data)
            return response.data.data
        } else {
            // ä¸šåŠ¡é”™è¯¯å¤„ç†
            console.error('è·å–å¤±è´¥ï¼š', response.data.message)
        }
    } catch (error) {
        // ç½‘ç»œé”™è¯¯å¤„ç†
        console.error('è¯·æ±‚å¤±è´¥ï¼š', error)
    }
}
```

### 2.3 è·¨åŸŸé—®é¢˜è§£å†³

**ğŸš« ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜**

```
è·¨åŸŸäº§ç”ŸåŸå› ï¼š
å‰ç«¯åœ°å€ï¼šhttp://localhost:8080 (Vueå¼€å‘æœåŠ¡å™¨)
åç«¯åœ°å€ï¼šhttp://localhost:9090 (Spring Boot)

æµè§ˆå™¨å®‰å…¨ç­–ç•¥ï¼š
â€¢ ä¸åŒç«¯å£ç®—è·¨åŸŸ
â€¢ ä¸åŒåŸŸåç®—è·¨åŸŸ
â€¢ ä¸åŒåè®®ç®—è·¨åŸŸ

ç»“æœï¼šæµè§ˆå™¨ä¼šæ‹¦æˆªå‰ç«¯çš„APIè¯·æ±‚
```

**âœ… Spring Bootè·¨åŸŸè§£å†³æ–¹æ¡ˆ**

```java
// æ–¹æ¡ˆ1ï¼šå…¨å±€CORSé…ç½®ï¼ˆæ¨èï¼‰
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/**")           // å¯¹å“ªäº›è·¯å¾„ç”Ÿæ•ˆ
                .allowedOrigins("http://localhost:8080")  // å…è®¸çš„å‰ç«¯åœ°å€
                .allowedMethods("GET", "POST", "PUT", "DELETE")  // å…è®¸çš„æ–¹æ³•
                .allowedHeaders("*")             // å…è®¸çš„è¯·æ±‚å¤´
                .allowCredentials(true)          // å…è®¸æºå¸¦cookie
                .maxAge(3600);                   // é¢„æ£€è¯·æ±‚ç¼“å­˜æ—¶é—´
    }
}

// æ–¹æ¡ˆ2ï¼šæ³¨è§£æ–¹å¼ï¼ˆå•ä¸ªæ¥å£ï¼‰
@RestController
@CrossOrigin(origins = "http://localhost:8080")  // å…è®¸è¯¥åœ°å€è·¨åŸŸ
public class UserController {
    // ...
}

// æ–¹æ¡ˆ3ï¼šç”Ÿäº§ç¯å¢ƒç”¨Nginxåå‘ä»£ç†ï¼ˆæœ€ä½³å®è·µï¼‰
// å‰ç«¯å’Œåç«¯éƒ½é€šè¿‡åŒä¸€ä¸ªåŸŸåè®¿é—®ï¼Œä»æ ¹æœ¬ä¸Šé¿å…è·¨åŸŸ
```

---

## 3. ğŸ“¡ JSONé€šä¿¡æœºåˆ¶


### 3.1 ä¸ºä»€ä¹ˆä½¿ç”¨JSON

**ğŸ¯ JSONçš„ä¼˜åŠ¿**

```
å¯¹æ¯”å…¶ä»–æ•°æ®æ ¼å¼ï¼š

XMLæ ¼å¼ï¼š
<user>
    <id>1</id>
    <name>å¼ ä¸‰</name>
</user>
â€¢ å†—é•¿ç¹çï¼Œæ ‡ç­¾å ç”¨ç©ºé—´å¤§
â€¢ è§£æå¤æ‚

JSONæ ¼å¼ï¼š
{
    "id": 1,
    "name": "å¼ ä¸‰"
}
â€¢ ç®€æ´æ˜äº†ï¼Œæ•°æ®é‡å°
â€¢ JavaScriptåŸç”Ÿæ”¯æŒ
â€¢ æ˜“äºäººç±»é˜…è¯»å’Œç¼–å†™
```

**ğŸ”¸ JSONçš„æ ¸å¿ƒç‰¹ç‚¹**
```
è½»é‡çº§ï¼š
â€¢ æ¯”XMLå‡å°‘çº¦30-50%çš„æ•°æ®é‡
â€¢ ä¼ è¾“é€Ÿåº¦å¿«ï¼ŒèŠ‚çœå¸¦å®½

é€šç”¨æ€§ï¼š
â€¢ å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒ
â€¢ å‰ç«¯JavaScriptç›´æ¥ä½¿ç”¨
â€¢ åç«¯å„ç§æ¡†æ¶éƒ½æœ‰JSONåº“

ç»“æ„åŒ–ï¼š
â€¢ æ”¯æŒå¯¹è±¡å’Œæ•°ç»„åµŒå¥—
â€¢ å¯ä»¥è¡¨ç¤ºå¤æ‚çš„æ•°æ®ç»“æ„
â€¢ ä¾¿äºç»´æŠ¤å’Œæ‰©å±•
```

### 3.2 Spring Bootä¸­çš„JSONå¤„ç†

**ğŸ“¦ è‡ªåŠ¨JSONè½¬æ¢**

```java
// Spring Booté»˜è®¤ä½¿ç”¨Jacksonå¤„ç†JSON

// 1. Javaå¯¹è±¡è‡ªåŠ¨è½¬JSONï¼ˆåºåˆ—åŒ–ï¼‰
@RestController
public class ProductController {
    
    @GetMapping("/api/products/{id}")
    public Product getProduct(@PathVariable Long id) {
        Product product = new Product();
        product.setId(id);
        product.setName("iPhone 15");
        product.setPrice(5999.0);
        
        // Spring Bootè‡ªåŠ¨å°†Productå¯¹è±¡è½¬ä¸ºJSONè¿”å›
        return product;
    }
}

// è¿”å›çš„JSONï¼š
// {
//     "id": 1,
//     "name": "iPhone 15",
//     "price": 5999.0
// }

// 2. JSONè‡ªåŠ¨è½¬Javaå¯¹è±¡ï¼ˆååºåˆ—åŒ–ï¼‰
@PostMapping("/api/products")
public Result<Product> createProduct(@RequestBody Product product) {
    // @RequestBodyè‡ªåŠ¨å°†å‰ç«¯JSONè½¬ä¸ºProductå¯¹è±¡
    productService.save(product);
    return Result.success(product);
}
```

**ğŸ”§ JSONæ ¼å¼å®šåˆ¶**

```java
// ä½¿ç”¨Jacksonæ³¨è§£å®šåˆ¶JSONæ ¼å¼
public class User {
    
    private Long id;
    
    @JsonProperty("username")  // æŒ‡å®šJSONå­—æ®µå
    private String name;
    
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")  // æ—¥æœŸæ ¼å¼åŒ–
    private Date createTime;
    
    @JsonIgnore  // å¿½ç•¥è¯¥å­—æ®µï¼Œä¸åºåˆ—åŒ–åˆ°JSON
    private String password;
    
    // çœç•¥getter/setter
}

// è¿”å›JSONç¤ºä¾‹ï¼š
// {
//     "id": 1,
//     "username": "å¼ ä¸‰",    // nameå­—æ®µæ”¹ä¸ºusername
//     "createTime": "2024-01-10 10:30:00"  // æ ¼å¼åŒ–çš„æ—¥æœŸ
//     // passwordå­—æ®µè¢«å¿½ç•¥
// }
```

### 3.3 å¤æ‚æ•°æ®ç»“æ„å¤„ç†

**ğŸ“Š åµŒå¥—å¯¹è±¡å’Œé›†åˆ**

```java
// è®¢å•å¯¹è±¡åŒ…å«å•†å“åˆ—è¡¨
public class Order {
    private Long orderId;
    private String orderNo;
    private List<OrderItem> items;  // è®¢å•é¡¹åˆ—è¡¨
    
    public static class OrderItem {
        private Long productId;
        private String productName;
        private Integer quantity;
        private Double price;
    }
}

// è‡ªåŠ¨è½¬ä¸ºåµŒå¥—JSON
@GetMapping("/api/orders/{id}")
public Order getOrder(@PathVariable Long id) {
    return orderService.findById(id);
}

// è¿”å›JSONï¼š
// {
//     "orderId": 100,
//     "orderNo": "ORD20240110001",
//     "items": [
//         {
//             "productId": 1,
//             "productName": "iPhone 15",
//             "quantity": 1,
//             "price": 5999.0
//         },
//         {
//             "productId": 2,
//             "productName": "AirPods",
//             "quantity": 2,
//             "price": 1299.0
//         }
//     ]
// }
```

---

## 4. ğŸŒ REST APIè®¾è®¡åŸåˆ™


### 4.1 ä»€ä¹ˆæ˜¯REST

**ğŸ¯ RESTfulæ¶æ„é£æ ¼ç†è§£**

```
REST = Representational State Transfer
ï¼ˆè¡¨è¿°æ€§çŠ¶æ€è½¬ç§»ï¼‰

é€šä¿—ç†è§£ï¼š
â€¢ èµ„æºï¼ˆResourceï¼‰ï¼šURLä»£è¡¨ä¸€ä¸ªèµ„æº
â€¢ è¡¨è¿°ï¼ˆRepresentationï¼‰ï¼šç”¨JSONç­‰æ ¼å¼è¡¨ç¤ºèµ„æº
â€¢ çŠ¶æ€è½¬ç§»ï¼ˆState Transferï¼‰ï¼šé€šè¿‡HTTPæ–¹æ³•æ“ä½œèµ„æº

ç”Ÿæ´»ç±»æ¯”ï¼š
å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ
â€¢ èµ„æºï¼šæ¯æœ¬ä¹¦
â€¢ URLï¼š/books/123 è¡¨ç¤ºIDä¸º123çš„ä¹¦
â€¢ æ“ä½œï¼šå€Ÿä¹¦(GET)ã€è¿˜ä¹¦(PUT)ã€æ–°ä¹¦å…¥åº“(POST)ã€ä¸‹æ¶(DELETE)
```

**ğŸ”¸ RESTçš„æ ¸å¿ƒçº¦æŸ**

| çº¦æŸ | **è¯´æ˜** | **å®é™…æ„ä¹‰** |
|------|---------|-------------|
| ğŸ”¸ **ç»Ÿä¸€æ¥å£** | `ä½¿ç”¨æ ‡å‡†HTTPæ–¹æ³•` | `GETæŸ¥è¯¢ã€POSTæ–°å¢ã€PUTä¿®æ”¹ã€DELETEåˆ é™¤` |
| ğŸ”¸ **æ— çŠ¶æ€** | `æ¯æ¬¡è¯·æ±‚ç‹¬ç«‹å®Œæ•´` | `æœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€ï¼Œä¾¿äºæ‰©å±•` |
| ğŸ”¸ **å¯ç¼“å­˜** | `å“åº”å¯è¢«ç¼“å­˜` | `æé«˜æ€§èƒ½ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½` |
| ğŸ”¸ **åˆ†å±‚ç³»ç»Ÿ** | `å®¢æˆ·ç«¯ä¸çŸ¥é“ä¸­é—´å±‚` | `å¯æ·»åŠ è´Ÿè½½å‡è¡¡ã€ç¼“å­˜å±‚ç­‰` |

### 4.2 HTTPæ–¹æ³•è¯­ä¹‰

**ğŸ“‹ æ ‡å‡†HTTPæ–¹æ³•ä½¿ç”¨**

```
èµ„æºæ“ä½œå¯¹åº”å…³ç³»ï¼š

GET - è·å–èµ„æºï¼ˆæŸ¥è¯¢ï¼‰
â€¢ GET /api/users          è·å–ç”¨æˆ·åˆ—è¡¨
â€¢ GET /api/users/1        è·å–IDä¸º1çš„ç”¨æˆ·
â€¢ ç‰¹ç‚¹ï¼šå®‰å…¨ã€å¹‚ç­‰ã€å¯ç¼“å­˜

POST - åˆ›å»ºèµ„æºï¼ˆæ–°å¢ï¼‰
â€¢ POST /api/users         åˆ›å»ºæ–°ç”¨æˆ·
â€¢ ç‰¹ç‚¹ï¼šéå¹‚ç­‰ï¼ˆå¤šæ¬¡æ‰§è¡Œç»“æœä¸åŒï¼‰

PUT - æ›´æ–°èµ„æºï¼ˆä¿®æ”¹ï¼‰
â€¢ PUT /api/users/1        æ›´æ–°IDä¸º1çš„ç”¨æˆ·å…¨éƒ¨ä¿¡æ¯
â€¢ ç‰¹ç‚¹ï¼šå¹‚ç­‰ï¼ˆå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼‰

PATCH - éƒ¨åˆ†æ›´æ–°
â€¢ PATCH /api/users/1      åªæ›´æ–°ç”¨æˆ·éƒ¨åˆ†å­—æ®µ
â€¢ ç‰¹ç‚¹ï¼šå¹‚ç­‰

DELETE - åˆ é™¤èµ„æº
â€¢ DELETE /api/users/1     åˆ é™¤IDä¸º1çš„ç”¨æˆ·
â€¢ ç‰¹ç‚¹ï¼šå¹‚ç­‰
```

**ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // GET - æŸ¥è¯¢åˆ—è¡¨
    @GetMapping
    public Result<List<User>> list() {
        return Result.success(userService.findAll());
    }
    
    // GET - æŸ¥è¯¢å•ä¸ª
    @GetMapping("/{id}")
    public Result<User> get(@PathVariable Long id) {
        return Result.success(userService.findById(id));
    }
    
    // POST - åˆ›å»º
    @PostMapping
    public Result<User> create(@RequestBody User user) {
        userService.save(user);
        return Result.success(user);
    }
    
    // PUT - å®Œæ•´æ›´æ–°
    @PutMapping("/{id}")
    public Result<User> update(@PathVariable Long id, 
                               @RequestBody User user) {
        user.setId(id);
        userService.update(user);
        return Result.success(user);
    }
    
    // DELETE - åˆ é™¤
    @DeleteMapping("/{id}")
    public Result<Void> delete(@PathVariable Long id) {
        userService.deleteById(id);
        return Result.success(null);
    }
}
```

### 4.3 RESTful URLè®¾è®¡è§„èŒƒ

**ğŸ¨ ä¼˜é›…çš„URLè®¾è®¡**

```
URLè®¾è®¡åŸåˆ™ï¼š

1. ä½¿ç”¨åè¯ï¼Œä¸ç”¨åŠ¨è¯
âŒ /api/getUser?id=1
âœ… /api/users/1

2. ä½¿ç”¨å¤æ•°å½¢å¼
âŒ /api/user/1
âœ… /api/users/1

3. ä½“ç°èµ„æºå±‚çº§å…³ç³»
âœ… /api/users/1/orders          ç”¨æˆ·1çš„è®¢å•åˆ—è¡¨
âœ… /api/users/1/orders/100      ç”¨æˆ·1çš„è®¢å•100

4. ä½¿ç”¨"-"åˆ†éš”å•è¯ï¼Œä¸ç”¨"_"
âŒ /api/user_orders
âœ… /api/user-orders

5. å…¨å°å†™
âŒ /api/Users
âœ… /api/users

6. é¿å…å¤šå±‚åµŒå¥—ï¼ˆä¸è¶…è¿‡3å±‚ï¼‰
âŒ /api/users/1/orders/100/items/1/details
âœ… /api/order-items/1
```

**ğŸ“ å®é™…URLè®¾è®¡ç¤ºä¾‹**

```
ç”¨æˆ·ç®¡ç†ï¼š
GET    /api/users              è·å–ç”¨æˆ·åˆ—è¡¨
GET    /api/users/1            è·å–ç”¨æˆ·è¯¦æƒ…
POST   /api/users              åˆ›å»ºç”¨æˆ·
PUT    /api/users/1            æ›´æ–°ç”¨æˆ·
DELETE /api/users/1            åˆ é™¤ç”¨æˆ·

è®¢å•ç®¡ç†ï¼š
GET    /api/orders             è·å–è®¢å•åˆ—è¡¨
GET    /api/orders/100         è·å–è®¢å•è¯¦æƒ…
POST   /api/orders             åˆ›å»ºè®¢å•
PUT    /api/orders/100/status  æ›´æ–°è®¢å•çŠ¶æ€

ç”¨æˆ·è®¢å•å…³è”ï¼š
GET    /api/users/1/orders     è·å–ç”¨æˆ·1çš„æ‰€æœ‰è®¢å•
POST   /api/users/1/orders     ä¸ºç”¨æˆ·1åˆ›å»ºè®¢å•

æŸ¥è¯¢å‚æ•°ç”¨äºè¿‡æ»¤å’Œåˆ†é¡µï¼š
GET    /api/users?page=1&size=10&status=active
GET    /api/orders?startDate=2024-01-01&endDate=2024-01-31
```

---

## 5. ğŸ“‹ æ¥å£è§„èŒƒè®¾è®¡


### 5.1 ç»Ÿä¸€å“åº”æ ¼å¼

**ğŸ¯ æ ‡å‡†åŒ–çš„è¿”å›ç»“æ„**

```java
// ç»Ÿä¸€å“åº”ç±»è®¾è®¡
public class ApiResponse<T> {
    private Integer code;        // ä¸šåŠ¡çŠ¶æ€ç 
    private String message;      // æç¤ºä¿¡æ¯
    private T data;             // è¿”å›æ•°æ®
    private Long timestamp;     // æ—¶é—´æˆ³
    
    // æˆåŠŸå“åº”
    public static <T> ApiResponse<T> success(T data) {
        ApiResponse<T> response = new ApiResponse<>();
        response.code = 200;
        response.message = "æ“ä½œæˆåŠŸ";
        response.data = data;
        response.timestamp = System.currentTimeMillis();
        return response;
    }
    
    // å¤±è´¥å“åº”
    public static <T> ApiResponse<T> error(Integer code, String message) {
        ApiResponse<T> response = new ApiResponse<>();
        response.code = code;
        response.message = message;
        response.timestamp = System.currentTimeMillis();
        return response;
    }
}

// å®é™…è¿”å›ç¤ºä¾‹ï¼š
// {
//     "code": 200,
//     "message": "æ“ä½œæˆåŠŸ",
//     "data": {
//         "id": 1,
//         "name": "å¼ ä¸‰"
//     },
//     "timestamp": 1704873600000
// }
```

**ğŸ“Š åˆ†é¡µæ•°æ®è¿”å›æ ¼å¼**

```java
// åˆ†é¡µå“åº”å°è£…
public class PageResult<T> {
    private List<T> records;     // æ•°æ®åˆ—è¡¨
    private Long total;          // æ€»è®°å½•æ•°
    private Long pageNum;        // å½“å‰é¡µç 
    private Long pageSize;       // æ¯é¡µå¤§å°
    private Long totalPages;     // æ€»é¡µæ•°
    
    // æ„é€ æ–¹æ³•å’Œgetter/setterçœç•¥
}

// ä½¿ç”¨ç¤ºä¾‹
@GetMapping("/api/users")
public ApiResponse<PageResult<User>> getUsers(
    @RequestParam(defaultValue = "1") Long pageNum,
    @RequestParam(defaultValue = "10") Long pageSize
) {
    PageResult<User> pageResult = userService.findByPage(pageNum, pageSize);
    return ApiResponse.success(pageResult);
}

// è¿”å›JSONï¼š
// {
//     "code": 200,
//     "message": "æ“ä½œæˆåŠŸ",
//     "data": {
//         "records": [{...}, {...}],
//         "total": 100,
//         "pageNum": 1,
//         "pageSize": 10,
//         "totalPages": 10
//     }
// }
```

### 5.2 çŠ¶æ€ç è§„èŒƒ

**ğŸ”¢ ä¸šåŠ¡çŠ¶æ€ç è®¾è®¡**

```java
// çŠ¶æ€ç å¸¸é‡ç±»
public class ApiCode {
    // æˆåŠŸçŠ¶æ€ç 
    public static final int SUCCESS = 200;
    
    // å®¢æˆ·ç«¯é”™è¯¯ 4xx
    public static final int BAD_REQUEST = 400;      // è¯·æ±‚å‚æ•°é”™è¯¯
    public static final int UNAUTHORIZED = 401;     // æœªè®¤è¯
    public static final int FORBIDDEN = 403;        // æ— æƒé™
    public static final int NOT_FOUND = 404;        // èµ„æºä¸å­˜åœ¨
    
    // æœåŠ¡å™¨é”™è¯¯ 5xx
    public static final int SERVER_ERROR = 500;     // æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
    public static final int SERVICE_UNAVAILABLE = 503;  // æœåŠ¡ä¸å¯ç”¨
    
    // ä¸šåŠ¡é”™è¯¯ç  1000+
    public static final int USER_NOT_FOUND = 1001;      // ç”¨æˆ·ä¸å­˜åœ¨
    public static final int DUPLICATE_USERNAME = 1002;   // ç”¨æˆ·åé‡å¤
    public static final int INVALID_PASSWORD = 1003;     // å¯†ç é”™è¯¯
    public static final int INSUFFICIENT_BALANCE = 2001; // ä½™é¢ä¸è¶³
}

// ä½¿ç”¨ç¤ºä¾‹
@GetMapping("/api/users/{id}")
public ApiResponse<User> getUser(@PathVariable Long id) {
    User user = userService.findById(id);
    if (user == null) {
        return ApiResponse.error(ApiCode.USER_NOT_FOUND, "ç”¨æˆ·ä¸å­˜åœ¨");
    }
    return ApiResponse.success(user);
}
```

### 5.3 å‚æ•°æ ¡éªŒè§„èŒƒ

**âœ… ç»Ÿä¸€çš„å‚æ•°éªŒè¯**

```java
// ä½¿ç”¨Bean Validationè¿›è¡Œå‚æ•°æ ¡éªŒ
public class UserCreateRequest {
    
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦åœ¨3-20ä¹‹é—´")
    private String username;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$",
             message = "å¯†ç è‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—")
    private String password;
    
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    @NotNull(message = "å¹´é¾„ä¸èƒ½ä¸ºç©º")
    @Min(value = 18, message = "å¹´é¾„ä¸èƒ½å°äº18å²")
    @Max(value = 120, message = "å¹´é¾„ä¸èƒ½å¤§äº120å²")
    private Integer age;
}

// Controllerä¸­ä½¿ç”¨@Validè§¦å‘æ ¡éªŒ
@PostMapping("/api/users")
public ApiResponse<User> createUser(@Valid @RequestBody UserCreateRequest request) {
    // æ ¡éªŒä¸é€šè¿‡ä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸
    User user = userService.create(request);
    return ApiResponse.success(user);
}

// å…¨å±€å¼‚å¸¸å¤„ç†å™¨å¤„ç†æ ¡éªŒå¼‚å¸¸
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ApiResponse<?> handleValidationException(MethodArgumentNotValidException ex) {
        // è·å–ç¬¬ä¸€ä¸ªæ ¡éªŒé”™è¯¯ä¿¡æ¯
        String message = ex.getBindingResult()
                          .getFieldErrors()
                          .get(0)
                          .getDefaultMessage();
        
        return ApiResponse.error(ApiCode.BAD_REQUEST, message);
    }
}
```

---

## 6. ğŸ“¦ æ•°æ®æ ¼å¼çº¦å®š


### 6.1 è¯·æ±‚å‚æ•°æ ¼å¼

**ğŸ“ ä¸åŒåœºæ™¯çš„å‚æ•°ä¼ é€’**

```
1. è·¯å¾„å‚æ•°ï¼ˆPath Variableï¼‰
é€‚ç”¨ï¼šèµ„æºæ ‡è¯†
ç¤ºä¾‹ï¼šGET /api/users/123
è¯´æ˜ï¼š123æ˜¯ç”¨æˆ·IDï¼Œç›´æ¥åœ¨URLä¸­

2. æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parameterï¼‰
é€‚ç”¨ï¼šè¿‡æ»¤ã€æ’åºã€åˆ†é¡µ
ç¤ºä¾‹ï¼šGET /api/users?page=1&size=10&status=active
è¯´æ˜ï¼šç”¨äºæ¡ä»¶æŸ¥è¯¢ï¼Œéå¿…å¡«å‚æ•°

3. è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰
é€‚ç”¨ï¼šå¤æ‚æ•°æ®æäº¤
ç¤ºä¾‹ï¼šPOST /api/users
{
    "username": "zhangsan",
    "email": "zhangsan@example.com"
}
è¯´æ˜ï¼šç”¨äºåˆ›å»ºæˆ–æ›´æ–°èµ„æº

4. è¯·æ±‚å¤´ï¼ˆRequest Headerï¼‰
é€‚ç”¨ï¼šè®¤è¯ä¿¡æ¯ã€å…ƒæ•°æ®
ç¤ºä¾‹ï¼šAuthorization: Bearer token123
è¯´æ˜ï¼šæºå¸¦Tokenç­‰è®¤è¯ä¿¡æ¯
```

**ğŸ”§ Spring Bootä¸­çš„æ¥æ”¶æ–¹å¼**

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    // 1. æ¥æ”¶è·¯å¾„å‚æ•°
    @GetMapping("/{id}")
    public ApiResponse<User> get(@PathVariable Long id) {
        return ApiResponse.success(userService.findById(id));
    }
    
    // 2. æ¥æ”¶æŸ¥è¯¢å‚æ•°
    @GetMapping
    public ApiResponse<PageResult<User>> list(
        @RequestParam(defaultValue = "1") Integer page,
        @RequestParam(defaultValue = "10") Integer size,
        @RequestParam(required = false) String status
    ) {
        return ApiResponse.success(userService.findByPage(page, size, status));
    }
    
    // 3. æ¥æ”¶è¯·æ±‚ä½“JSON
    @PostMapping
    public ApiResponse<User> create(@RequestBody UserCreateRequest request) {
        return ApiResponse.success(userService.create(request));
    }
    
    // 4. æ¥æ”¶è¯·æ±‚å¤´
    @GetMapping("/profile")
    public ApiResponse<User> getProfile(
        @RequestHeader("Authorization") String token
    ) {
        User user = userService.findByToken(token);
        return ApiResponse.success(user);
    }
}
```

### 6.2 å“åº”æ•°æ®æ ¼å¼

**ğŸ“Š æ ‡å‡†åŒ–çš„å“åº”ç»“æ„**

```
æˆåŠŸå“åº”æ ¼å¼ï¼š
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
        // å®é™…ä¸šåŠ¡æ•°æ®
    },
    "timestamp": 1704873600000
}

åˆ—è¡¨æ•°æ®å“åº”ï¼š
{
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": {
        "records": [
            {"id": 1, "name": "å¼ ä¸‰"},
            {"id": 2, "name": "æå››"}
        ],
        "total": 100,
        "pageNum": 1,
        "pageSize": 10
    }
}

é”™è¯¯å“åº”æ ¼å¼ï¼š
{
    "code": 1001,
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "data": null,
    "timestamp": 1704873600000
}

å­—æ®µè¯´æ˜ï¼š
â€¢ codeï¼šä¸šåŠ¡çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ
â€¢ messageï¼šç»™ç”¨æˆ·çœ‹çš„æç¤ºä¿¡æ¯
â€¢ dataï¼šå®é™…è¿”å›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„ã€null
â€¢ timestampï¼šå“åº”æ—¶é—´æˆ³ï¼Œæ–¹ä¾¿è¿½è¸ªé—®é¢˜
```

### 6.3 æ—¥æœŸæ—¶é—´æ ¼å¼

**ğŸ“… ç»Ÿä¸€çš„æ—¶é—´æ ¼å¼å¤„ç†**

```java
// å…¨å±€æ—¥æœŸæ ¼å¼é…ç½®
@Configuration
public class JacksonConfig {
    
    @Bean
    public Jackson2ObjectMapperBuilderCustomizer customizer() {
        return builder -> {
            // æ—¥æœŸæ ¼å¼åŒ–
            builder.simpleDateFormat("yyyy-MM-dd HH:mm:ss");
            
            // æ—¶åŒºè®¾ç½®
            builder.timeZone("GMT+8");
            
            // æ•°å­—æ ¼å¼ï¼ˆä¿ç•™å°æ•°ï¼‰
            builder.featuresToEnable(
                SerializationFeature.WRITE_BIGDECIMAL_AS_PLAIN
            );
        };
    }
}

// å®ä½“ç±»ä¸­çš„æ—¶é—´å­—æ®µ
public class Order {
    private Long id;
    
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "GMT+8")
    private Date createTime;  // åˆ›å»ºæ—¶é—´
    
    @JsonFormat(pattern = "yyyy-MM-dd", timezone = "GMT+8")
    private Date deliveryDate;  // äº¤ä»˜æ—¥æœŸï¼ˆåªè¦æ—¥æœŸï¼‰
}

// è¿”å›JSONç¤ºä¾‹ï¼š
// {
//     "id": 100,
//     "createTime": "2024-01-10 15:30:00",
//     "deliveryDate": "2024-01-15"
// }
```

---

## 7. ğŸ”„ APIç‰ˆæœ¬ç®¡ç†


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬ç®¡ç†

**ğŸ¯ ç‰ˆæœ¬ç®¡ç†çš„é‡è¦æ€§**

```
å®é™…åœºæ™¯ï¼š
â€¢ ä½ å¼€å‘äº†ä¸€ä¸ªç”¨æˆ·APIï¼šGET /api/users
â€¢ ç§»åŠ¨App 1.0ç‰ˆæœ¬åœ¨ä½¿ç”¨
â€¢ ç°åœ¨è¦æ”¹APIç»“æ„ï¼Œå¢åŠ æ–°å­—æ®µ

é—®é¢˜ï¼š
â€¢ ç›´æ¥æ”¹APIï¼Œæ—§ç‰ˆAppä¼šå‡ºé”™
â€¢ ä¸æ”¹APIï¼Œæ–°åŠŸèƒ½æ— æ³•å®ç°

è§£å†³æ–¹æ¡ˆï¼š
â€¢ ä½¿ç”¨APIç‰ˆæœ¬ç®¡ç†
â€¢ æ—§ç‰ˆæœ¬ç»§ç»­ç»´æŠ¤ï¼Œæ–°ç‰ˆæœ¬ç‹¬ç«‹å¼€å‘
â€¢ ç»™å®¢æˆ·ç«¯æ—¶é—´é€æ­¥å‡çº§
```

**ğŸ”¸ ç‰ˆæœ¬æ¼”è¿›ç¤ºä¾‹**
```
ç‰ˆæœ¬1ï¼ˆv1ï¼‰ï¼šåŸºç¡€åŠŸèƒ½
GET /api/v1/users
è¿”å›ï¼š{ "id": 1, "name": "å¼ ä¸‰" }

ç‰ˆæœ¬2ï¼ˆv2ï¼‰ï¼šå¢åŠ è¯¦ç»†ä¿¡æ¯
GET /api/v2/users  
è¿”å›ï¼š{ 
    "id": 1, 
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "phone": "13800138000"
}

ç‰ˆæœ¬3ï¼ˆv3ï¼‰ï¼šé‡æ„æ•°æ®ç»“æ„
GET /api/v3/users
è¿”å›ï¼š{
    "userId": 1,
    "profile": {
        "name": "å¼ ä¸‰",
        "contact": {
            "email": "zhangsan@example.com",
            "phone": "13800138000"
        }
    }
}
```

### 7.2 ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

**ğŸ“‹ å¸¸è§çš„ç‰ˆæœ¬ç®¡ç†æ–¹å¼**

```
1. URLè·¯å¾„ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
GET /api/v1/users
GET /api/v2/users
â€¢ ä¼˜ç‚¹ï¼šæ¸…æ™°ç›´è§‚ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
â€¢ ç¼ºç‚¹ï¼šURLä¼šå˜åŒ–

2. è¯·æ±‚å¤´ç‰ˆæœ¬
GET /api/users
Header: Api-Version: 2
â€¢ ä¼˜ç‚¹ï¼šURLä¿æŒä¸å˜
â€¢ ç¼ºç‚¹ï¼šä¸å¤Ÿç›´è§‚ï¼Œæµ‹è¯•ä¸ä¾¿

3. å‚æ•°ç‰ˆæœ¬
GET /api/users?version=2
â€¢ ä¼˜ç‚¹ï¼šçµæ´»
â€¢ ç¼ºç‚¹ï¼šå®¹æ˜“è¢«å¿½ç•¥

4. åª’ä½“ç±»å‹ç‰ˆæœ¬
GET /api/users
Accept: application/vnd.company.v2+json
â€¢ ä¼˜ç‚¹ï¼šRESTfulè§„èŒƒ
â€¢ ç¼ºç‚¹ï¼šå¤æ‚ï¼Œå­¦ä¹ æˆæœ¬é«˜
```

**ğŸ”§ Spring Bootå®ç°ç‰ˆæœ¬ç®¡ç†**

```java
// æ–¹å¼1ï¼šé€šè¿‡URLè·¯å¾„ç®¡ç†ç‰ˆæœ¬ï¼ˆæœ€å¸¸ç”¨ï¼‰
@RestController
@RequestMapping("/api/v1/users")
public class UserControllerV1 {
    @GetMapping("/{id}")
    public ApiResponse<UserV1> get(@PathVariable Long id) {
        // V1ç‰ˆæœ¬é€»è¾‘
        return ApiResponse.success(userService.findByIdV1(id));
    }
}

@RestController
@RequestMapping("/api/v2/users")
public class UserControllerV2 {
    @GetMapping("/{id}")
    public ApiResponse<UserV2> get(@PathVariable Long id) {
        // V2ç‰ˆæœ¬é€»è¾‘
        return ApiResponse.success(userService.findByIdV2(id));
    }
}

// æ–¹å¼2ï¼šé€šè¿‡è¯·æ±‚å¤´ç®¡ç†ç‰ˆæœ¬
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping(value = "/{id}", headers = "Api-Version=1")
    public ApiResponse<UserV1> getV1(@PathVariable Long id) {
        return ApiResponse.success(userService.findByIdV1(id));
    }
    
    @GetMapping(value = "/{id}", headers = "Api-Version=2")
    public ApiResponse<UserV2> getV2(@PathVariable Long id) {
        return ApiResponse.success(userService.findByIdV2(id));
    }
}
```

### 7.3 ç‰ˆæœ¬å…¼å®¹æ€§å¤„ç†

**ğŸ”„ æ¸è¿›å¼ç‰ˆæœ¬å‡çº§**

```java
// ç‰ˆæœ¬å…¼å®¹ç­–ç•¥
public class ApiVersionStrategy {
    
    // 1. ä¿æŒå‘åå…¼å®¹ï¼ˆæ–°å­—æ®µå¯é€‰ï¼‰
    public class UserV2 {
        private Long id;
        private String name;
        private String email;      // æ–°å¢å­—æ®µï¼Œå¯ä¸ºnull
        private String phone;      // æ–°å¢å­—æ®µï¼Œå¯ä¸ºnull
        
        // ä»V1è½¬æ¢åˆ°V2
        public static UserV2 fromV1(UserV1 userV1) {
            UserV2 userV2 = new UserV2();
            userV2.setId(userV1.getId());
            userV2.setName(userV1.getName());
            // emailå’Œphoneä¸ºnullï¼Œä¸å½±å“æ—§å®¢æˆ·ç«¯
            return userV2;
        }
    }
    
    // 2. åºŸå¼ƒé€šçŸ¥ï¼ˆç»™å®¢æˆ·ç«¯é¢„è­¦ï¼‰
    @GetMapping("/api/v1/users/{id}")
    @Deprecated  // æ ‡è®°ä¸ºåºŸå¼ƒ
    public ApiResponse<UserV1> getV1(@PathVariable Long id) {
        UserV1 user = userService.findByIdV1(id);
        
        // åœ¨å“åº”å¤´ä¸­æ·»åŠ åºŸå¼ƒæç¤º
        HttpServletResponse response = ...;
        response.setHeader("Warning", "299 - \"API v1 will be deprecated on 2024-12-31, please upgrade to v2\"");
        
        return ApiResponse.success(user);
    }
    
    // 3. ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç®¡ç†
    // å‘å¸ƒæ—¶é—´ï¼š2024-01-01  æ¨å‡ºv2
    // åºŸå¼ƒé€šçŸ¥ï¼š2024-06-01  å¼€å§‹æç¤ºv1å³å°†åºŸå¼ƒ
    // åœç”¨æ—¶é—´ï¼š2024-12-31  v1æ­£å¼åœç”¨
}
```

---

## 8. ğŸ“– APIæ–‡æ¡£ç®¡ç†


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦APIæ–‡æ¡£

**ğŸ¯ APIæ–‡æ¡£çš„ä»·å€¼**

```
å‰åç«¯åä½œåœºæ™¯ï¼š

æ²¡æœ‰æ–‡æ¡£çš„ç—›è‹¦ï¼š
å‰ç«¯ï¼š"è¿™ä¸ªæ¥å£å‚æ•°æ€ä¹ˆä¼ ï¼Ÿ"
åç«¯ï¼š"ä½ çœ‹ä»£ç å§..."
å‰ç«¯ï¼š"è¿”å›çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"
åç«¯ï¼š"æˆ‘ä¹Ÿä¸è®°å¾—äº†ï¼Œä½ è°ƒè¯•çœ‹çœ‹..."
ç»“æœï¼šæ¥å›æ²Ÿé€šï¼Œæ•ˆç‡ä½ä¸‹

æœ‰æ–‡æ¡£çš„é«˜æ•ˆï¼š
å‰ç«¯ï¼šæŸ¥çœ‹æ–‡æ¡£ â†’ äº†è§£æ¥å£ â†’ ç›´æ¥å¼€å‘
åç«¯ï¼šæ›´æ–°æ¥å£ â†’ åŒæ­¥æ–‡æ¡£ â†’ å‰ç«¯çŸ¥æ™“
ç»“æœï¼šå„è‡ªç‹¬ç«‹å¼€å‘ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬
```

**ğŸ”¸ APIæ–‡æ¡£åº”åŒ…å«çš„ä¿¡æ¯**
```
å¿…å¤‡å†…å®¹ï¼š
â€¢ æ¥å£åœ°å€ï¼šPOST /api/users
â€¢ è¯·æ±‚å‚æ•°ï¼šå­—æ®µåã€ç±»å‹ã€æ˜¯å¦å¿…å¡«ã€è¯´æ˜
â€¢ å“åº”ç»“æœï¼šæˆåŠŸ/å¤±è´¥çš„è¿”å›æ ¼å¼
â€¢ çŠ¶æ€ç ï¼šå„ç§ä¸šåŠ¡çŠ¶æ€ç çš„å«ä¹‰
â€¢ ç¤ºä¾‹ï¼šè¯·æ±‚ç¤ºä¾‹å’Œå“åº”ç¤ºä¾‹

å¯é€‰å†…å®¹ï¼š
â€¢ è®¤è¯æ–¹å¼ï¼šå¦‚ä½•æºå¸¦Token
â€¢ é™æµè§„åˆ™ï¼šæ¯åˆ†é’Ÿæœ€å¤šè°ƒç”¨å¤šå°‘æ¬¡
â€¢ é”™è¯¯å¤„ç†ï¼šå¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ
â€¢ ç‰ˆæœ¬ä¿¡æ¯ï¼šAPIç‰ˆæœ¬åŠå˜æ›´è®°å½•
```

### 8.2 Swagger/OpenAPIè‡ªåŠ¨æ–‡æ¡£

**ğŸ“š ä½¿ç”¨Swaggerç”ŸæˆAPIæ–‡æ¡£**

```java
// 1. æ·»åŠ ä¾èµ–ï¼ˆMavenï¼‰
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    <version>2.0.2</version>
</dependency>

// 2. é…ç½®Swagger
@Configuration
public class SwaggerConfig {
    
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("ç”¨æˆ·ç®¡ç†ç³»ç»ŸAPI")
                .version("v1.0")
                .description("æä¾›ç”¨æˆ·ã€è®¢å•ç­‰ç›¸å…³æ¥å£")
                .contact(new Contact()
                    .name("æŠ€æœ¯æ”¯æŒ")
                    .email("support@example.com")))
            .externalDocs(new ExternalDocumentation()
                .description("æ›´å¤šæ–‡æ¡£")
                .url("https://docs.example.com"));
    }
}

// 3. åœ¨Controllerä¸­æ·»åŠ æ³¨è§£
@RestController
@RequestMapping("/api/users")
@Tag(name = "ç”¨æˆ·ç®¡ç†", description = "ç”¨æˆ·ç›¸å…³æ¥å£")
public class UserController {
    
    @Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…", description = "æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯")
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "æ“ä½œæˆåŠŸ"),
        @ApiResponse(responseCode = "404", description = "ç”¨æˆ·ä¸å­˜åœ¨")
    })
    @GetMapping("/{id}")
    public ApiResponse<User> get(
        @Parameter(description = "ç”¨æˆ·ID", required = true)
        @PathVariable Long id
    ) {
        return ApiResponse.success(userService.findById(id));
    }
    
    @Operation(summary = "åˆ›å»ºç”¨æˆ·", description = "åˆ›å»ºæ–°ç”¨æˆ·è´¦å·")
    @PostMapping
    public ApiResponse<User> create(
        @io.swagger.v3.oas.annotations.parameters.RequestBody(
            description = "ç”¨æˆ·ä¿¡æ¯",
            required = true,
            content = @Content(schema = @Schema(implementation = UserCreateRequest.class))
        )
        @RequestBody UserCreateRequest request
    ) {
        return ApiResponse.success(userService.create(request));
    }
}

// 4. åœ¨å®ä½“ç±»ä¸­æ·»åŠ è¯´æ˜
@Schema(description = "ç”¨æˆ·ä¿¡æ¯")
public class User {
    
    @Schema(description = "ç”¨æˆ·ID", example = "1")
    private Long id;
    
    @Schema(description = "ç”¨æˆ·å", example = "zhangsan")
    private String username;
    
    @Schema(description = "é‚®ç®±", example = "zhangsan@example.com")
    private String email;
}

// 5. è®¿é—®æ–‡æ¡£
// å¯åŠ¨åº”ç”¨åè®¿é—®ï¼šhttp://localhost:8080/swagger-ui/index.html
```

### 8.3 æ–‡æ¡£ç»´æŠ¤æœ€ä½³å®è·µ

**âœ… ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥**

```
æ–‡æ¡£ç»´æŠ¤ç­–ç•¥ï¼š

1. ä»£ç å³æ–‡æ¡£ï¼ˆCode as Documentationï¼‰
â€¢ ä½¿ç”¨Swaggerç­‰å·¥å…·ä»ä»£ç ç”Ÿæˆæ–‡æ¡£
â€¢ ä¿®æ”¹ä»£ç æ—¶ï¼Œæ–‡æ¡£è‡ªåŠ¨æ›´æ–°
â€¢ é¿å…æ–‡æ¡£ä¸å®é™…ä¸ç¬¦

2. ç‰ˆæœ¬åŒ–ç®¡ç†
â€¢ ä¸ºæ¯ä¸ªAPIç‰ˆæœ¬ç»´æŠ¤ç‹¬ç«‹æ–‡æ¡£
â€¢ æ¸…æ™°æ ‡æ³¨åºŸå¼ƒçš„æ¥å£
â€¢ è®°å½•ç‰ˆæœ¬å˜æ›´å†å²

3. ç¤ºä¾‹é©±åŠ¨
â€¢ æä¾›çœŸå®çš„è¯·æ±‚å’Œå“åº”ç¤ºä¾‹
â€¢ åŒ…å«å¸¸è§åœºæ™¯çš„ä½¿ç”¨æ–¹æ³•
â€¢ è¯´æ˜å¼‚å¸¸æƒ…å†µçš„å¤„ç†

4. æŒç»­æ›´æ–°
â€¢ APIå˜æ›´ç«‹å³æ›´æ–°æ–‡æ¡£
â€¢ å®šæœŸå®¡æŸ¥æ–‡æ¡£å®Œæ•´æ€§
â€¢ æ”¶é›†ç”¨æˆ·åé¦ˆæ”¹è¿›æ–‡æ¡£
```

**ğŸ”§ æ–‡æ¡£è‡ªåŠ¨åŒ–ç”Ÿæˆè„šæœ¬**

```java
// å•å…ƒæµ‹è¯•ç”ŸæˆAPIæ–‡æ¡£
@SpringBootTest
@AutoConfigureMockMvc
class ApiDocumentationTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @Test
    void generateApiDoc() throws Exception {
        // æ¨¡æ‹ŸAPIè°ƒç”¨
        mockMvc.perform(get("/api/users/1")
                .header("Authorization", "Bearer token"))
                .andDo(document("get-user",  // ç”Ÿæˆæ–‡æ¡£ç‰‡æ®µ
                    pathParameters(
                        parameterWithName("id").description("ç”¨æˆ·ID")
                    ),
                    responseFields(
                        fieldWithPath("code").description("çŠ¶æ€ç "),
                        fieldWithPath("message").description("æç¤ºä¿¡æ¯"),
                        fieldWithPath("data.id").description("ç”¨æˆ·ID"),
                        fieldWithPath("data.username").description("ç”¨æˆ·å")
                    )
                ));
    }
}

// ç”Ÿæˆçš„æ–‡æ¡£å¯ä»¥å¯¼å‡ºä¸ºMarkdownã€HTMLç­‰æ ¼å¼
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å‰åç«¯åˆ†ç¦»ï¼šå‰ç«¯è´Ÿè´£å±•ç¤ºï¼Œåç«¯è´Ÿè´£é€»è¾‘ï¼Œé€šè¿‡APIé€šä¿¡
ğŸ”¸ å‰åç«¯è§£è€¦ï¼šæŠ€æœ¯æ ˆç‹¬ç«‹ã€éƒ¨ç½²ç‹¬ç«‹ã€å¼€å‘ç‹¬ç«‹
ğŸ”¸ JSONé€šä¿¡ï¼šè½»é‡çº§æ•°æ®æ ¼å¼ï¼Œå‰åç«¯æ•°æ®äº¤æ¢æ ‡å‡†
ğŸ”¸ REST APIï¼šåŸºäºHTTPçš„èµ„æºæ“ä½œè§„èŒƒ
ğŸ”¸ æ¥å£è§„èŒƒï¼šç»Ÿä¸€çš„è¯·æ±‚å“åº”æ ¼å¼ã€çŠ¶æ€ç ã€å‚æ•°æ ¡éªŒ
ğŸ”¸ æ•°æ®æ ¼å¼ï¼šè¯·æ±‚å‚æ•°ã€å“åº”æ•°æ®ã€æ—¥æœŸæ—¶é—´çš„æ ‡å‡†åŒ–
ğŸ”¸ ç‰ˆæœ¬ç®¡ç†ï¼šAPIå‘åå…¼å®¹ã€æ¸è¿›å¼å‡çº§ç­–ç•¥
ğŸ”¸ APIæ–‡æ¡£ï¼šSwaggerè‡ªåŠ¨åŒ–æ–‡æ¡£ã€ä¿æŒä¸ä»£ç åŒæ­¥
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å‰åç«¯åˆ†ç¦»çš„æœ¬è´¨**
```
æ¶æ„æ¼”è¿›ï¼š
ä¼ ç»Ÿæ¨¡å¼ â†’ å‰åç«¯æ··åˆå¼€å‘ï¼Œæ•ˆç‡ä½
åˆ†ç¦»æ¨¡å¼ â†’ å„è‡ªä¸“æ³¨ï¼Œå¹¶è¡Œå¼€å‘ï¼Œæ•ˆç‡é«˜

æ ¸å¿ƒä»·å€¼ï¼š
â€¢ èŒè´£æ¸…æ™°ï¼šå‰ç«¯UIï¼Œåç«¯é€»è¾‘
â€¢ æŠ€æœ¯è§£è€¦ï¼šå¯ç‹¬ç«‹é€‰æ‹©æŠ€æœ¯æ ˆ
â€¢ å¼€å‘ææ•ˆï¼šå›¢é˜Ÿå¹¶è¡Œå·¥ä½œ
â€¢ æ˜“äºæ‰©å±•ï¼šä¸€å¥—APIå¤šç«¯å¤ç”¨
```

**ğŸ”¹ REST APIçš„è®¾è®¡ç†å¿µ**
```
é¢å‘èµ„æºï¼š
â€¢ URLè¡¨ç¤ºèµ„æºï¼š/api/users è¡¨ç¤ºç”¨æˆ·èµ„æº
â€¢ HTTPæ–¹æ³•è¡¨ç¤ºæ“ä½œï¼šGETæŸ¥è¯¢ã€POSTåˆ›å»ºã€PUTæ›´æ–°ã€DELETEåˆ é™¤
â€¢ çŠ¶æ€ç è¡¨ç¤ºç»“æœï¼š200æˆåŠŸã€404æœªæ‰¾åˆ°ã€500é”™è¯¯

æœ€ä½³å®è·µï¼š
â€¢ ä½¿ç”¨åè¯ä¸ç”¨åŠ¨è¯
â€¢ URLç”¨å¤æ•°å½¢å¼
â€¢ ä½“ç°å±‚çº§å…³ç³»
â€¢ å‚æ•°ç”¨äºè¿‡æ»¤
```

**ğŸ”¹ ç»Ÿä¸€è§„èŒƒçš„é‡è¦æ€§**
```
è§„èŒƒåŒ–æ”¶ç›Šï¼š
â€¢ é™ä½æ²Ÿé€šæˆæœ¬ï¼šå‰åç«¯å¯¹æ¥æ•ˆç‡é«˜
â€¢ æå‡å¼€å‘ä½“éªŒï¼šä»£ç é£æ ¼ä¸€è‡´
â€¢ ä¾¿äºé—®é¢˜å®šä½ï¼šé”™è¯¯ç ã€æ—¥å¿—ç»Ÿä¸€
â€¢ æ”¯æŒè‡ªåŠ¨åŒ–ï¼šæ–‡æ¡£ã€æµ‹è¯•è‡ªåŠ¨ç”Ÿæˆ

æ ¸å¿ƒè§„èŒƒï¼š
â€¢ å“åº”æ ¼å¼ç»Ÿä¸€
â€¢ çŠ¶æ€ç è¯­ä¹‰æ¸…æ™°  
â€¢ å‚æ•°æ ¡éªŒå®Œæ•´
â€¢ é”™è¯¯å¤„ç†è§„èŒƒ
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ çœŸå®ä¸šåŠ¡åœºæ™¯**
- **ç”µå•†å¹³å°**ï¼šå•†å“APIä¾›Webã€Appã€å°ç¨‹åºå¤šç«¯ä½¿ç”¨
- **ç¤¾äº¤åº”ç”¨**ï¼šç”¨æˆ·APIæ”¯æŒåŠ¨æ€ã€æ¶ˆæ¯ã€å…³æ³¨ç­‰åŠŸèƒ½
- **ä¼ä¸šç³»ç»Ÿ**ï¼šç»Ÿä¸€APIæ¥å£ï¼Œå¯¹æ¥å„ä¸šåŠ¡ç³»ç»Ÿ
- **å¼€æ”¾å¹³å°**ï¼šæä¾›æ ‡å‡†APIï¼Œä¾›ç¬¬ä¸‰æ–¹è°ƒç”¨

**ğŸ”§ å¼€å‘å®è·µå»ºè®®**
- **å‰åç«¯åä½œ**ï¼šå…ˆå®šä¹‰APIæ–‡æ¡£ï¼Œå†å¹¶è¡Œå¼€å‘
- **ç‰ˆæœ¬è§„åˆ’**ï¼šæå‰è§„åˆ’ç‰ˆæœ¬æ¼”è¿›è·¯çº¿
- **æ¥å£è®¾è®¡**ï¼šéµå¾ªRESTfulè§„èŒƒï¼Œä¾¿äºç†è§£å’Œä½¿ç”¨
- **æ–‡æ¡£å…ˆè¡Œ**ï¼šç”¨Swaggerç­‰å·¥å…·ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥

**ğŸ“ˆ æŠ€æœ¯å‘å±•è¶‹åŠ¿**
- **GraphQL**ï¼šæ›´çµæ´»çš„APIæŸ¥è¯¢è¯­è¨€
- **gRPC**ï¼šé«˜æ€§èƒ½RPCæ¡†æ¶
- **APIç½‘å…³**ï¼šç»Ÿä¸€å…¥å£ã€é‰´æƒã€é™æµ
- **å¾®æœåŠ¡**ï¼šæœåŠ¡æ‹†åˆ†ï¼ŒAPIç²’åº¦æ›´ç»†

**æ ¸å¿ƒè®°å¿†**ï¼š
- å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œè§£è€¦å¼€å‘æ•ˆç‡é«˜
- RESTè®¾è®¡è§„èŒƒï¼Œèµ„æºæ“ä½œè¦è®°ç‰¢
- JSONè½»é‡é€šä¿¡ï¼Œæ•°æ®äº¤æ¢æ ‡å‡†å¥½
- æ¥å£è§„èŒƒç»Ÿä¸€ï¼Œç‰ˆæœ¬ç®¡ç†ä¸å¯å°‘
- Swaggerè‡ªåŠ¨æ–‡æ¡£,ä»£ç æ³¨é‡Šè¦å†™å¥½