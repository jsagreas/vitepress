---
title: 1ã€å›½é™…åŒ–é…ç½®ä¸å®ç°
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯å›½é™…åŒ–](#1-ä»€ä¹ˆæ˜¯å›½é™…åŒ–)
2. [MessageSourceé…ç½®è¯¦è§£](#2-messagesourceé…ç½®è¯¦è§£)
3. [èµ„æºæ–‡ä»¶ç®¡ç†](#3-èµ„æºæ–‡ä»¶ç®¡ç†)
4. [LocaleResolveråŒºåŸŸè§£æ](#4-localeresolveråŒºåŸŸè§£æ)
5. [ç¼–ç ä¸ç¼“å­˜é…ç½®](#5-ç¼–ç ä¸ç¼“å­˜é…ç½®)
6. [å®æˆ˜åº”ç”¨åœºæ™¯](#6-å®æˆ˜åº”ç”¨åœºæ™¯)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ ä»€ä¹ˆæ˜¯å›½é™…åŒ–


### 1.1 å›½é™…åŒ–çš„é€šä¿—ç†è§£


**ç”Ÿæ´»ä¸­çš„ä¾‹å­**
```
ä½ å»éº¦å½“åŠ³ç‚¹é¤ï¼š
â€¢ åœ¨ä¸­å›½ â†’ æœåŠ¡å‘˜è¯´ä¸­æ–‡ï¼Œèœå•æ˜¾ç¤º"å·¨æ— éœ¸"
â€¢ åœ¨ç¾å›½ â†’ æœåŠ¡å‘˜è¯´è‹±æ–‡ï¼Œèœå•æ˜¾ç¤º"Big Mac"
â€¢ åœ¨æ—¥æœ¬ â†’ æœåŠ¡å‘˜è¯´æ—¥è¯­ï¼Œèœå•æ˜¾ç¤º"ãƒ“ãƒƒã‚°ãƒãƒƒã‚¯"

åŒä¸€ä¸ªæ±‰å ¡ï¼Œä¸åŒå›½å®¶ä¸åŒè¯­è¨€ â†’ è¿™å°±æ˜¯å›½é™…åŒ–ï¼
```

**ğŸ”¸ æ ¸å¿ƒæ¦‚å¿µ**
- **å›½é™…åŒ–ï¼ˆi18nï¼‰**ï¼šè®©åŒä¸€ä¸ªç³»ç»Ÿèƒ½æ˜¾ç¤ºä¸åŒè¯­è¨€çš„å†…å®¹
- **æœ¬åœ°åŒ–ï¼ˆL10nï¼‰**ï¼šé’ˆå¯¹ç‰¹å®šåœ°åŒºå®šåˆ¶å†…å®¹ï¼ˆè¯­è¨€ã€è´§å¸ã€æ—¥æœŸæ ¼å¼ç­‰ï¼‰
- **ç›®çš„**ï¼šä¸€å¥—ä»£ç ï¼ŒæœåŠ¡å…¨çƒç”¨æˆ·

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å›½é™…åŒ–


**ä¼ ç»Ÿåšæ³•çš„é—®é¢˜**
```
âŒ é”™è¯¯æ–¹å¼ï¼šå†™æ­»æ–‡å­—å†…å®¹
System.out.println("æ¬¢è¿ç™»å½•");  // ä¸­æ–‡ç”¨æˆ·èƒ½çœ‹æ‡‚
System.out.println("Welcome");   // è‹±æ–‡ç”¨æˆ·èƒ½çœ‹æ‡‚
â†’ é—®é¢˜ï¼šéœ€è¦ç»´æŠ¤å¤šå¥—ä»£ç ï¼Œæ”¹èµ·æ¥å¾ˆéº»çƒ¦

âœ… æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨å›½é™…åŒ–
message.get("welcome");
â†’ ä¸­æ–‡ç¯å¢ƒï¼šè‡ªåŠ¨è¿”å›"æ¬¢è¿ç™»å½•"
â†’ è‹±æ–‡ç¯å¢ƒï¼šè‡ªåŠ¨è¿”å›"Welcome"
â†’ ä¼˜åŠ¿ï¼šä¸€å¥—ä»£ç ï¼Œè‡ªåŠ¨é€‚é…è¯­è¨€
```

**å®é™…åº”ç”¨ä»·å€¼**
| åœºæ™¯ | é—®é¢˜ | å›½é™…åŒ–æ–¹æ¡ˆ |
|------|------|-----------|
| **è·¨å›½ç”µå•†** | ä¸­å›½ç”¨æˆ·çœ‹ä¸­æ–‡ï¼Œç¾å›½ç”¨æˆ·çœ‹è‹±æ–‡ | æ ¹æ®åœ°åŒºè‡ªåŠ¨åˆ‡æ¢è¯­è¨€ |
| **å¤šè¯­è¨€APP** | åŒä¸€ä¸ªæŒ‰é’®ï¼Œä¸åŒè¯­è¨€æ˜¾ç¤º | é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†æ–‡å­— |
| **ä¼ä¸šç³»ç»Ÿ** | æ€»éƒ¨ä¸­æ–‡ï¼Œæµ·å¤–åˆ†å…¬å¸è‹±æ–‡ | ç”¨æˆ·è‡ªä¸»é€‰æ‹©è¯­è¨€ |

---

## 2. ğŸ“ MessageSourceé…ç½®è¯¦è§£


### 2.1 MessageSourceæ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**
```
MessageSource = ç¿»è¯‘å­—å…¸

å°±åƒä½ ç”¨ç¿»è¯‘è½¯ä»¶ï¼š
1. è¾“å…¥ä¸­æ–‡å…³é”®è¯ï¼š"æ¬¢è¿"
2. é€‰æ‹©ç›®æ ‡è¯­è¨€ï¼šEnglish
3. å¾—åˆ°ç¿»è¯‘ç»“æœï¼š"Welcome"

MessageSourceå·¥ä½œåŸç†ï¼š
1. ä½ ç»™å®ƒä¸€ä¸ªkeyï¼š"welcome.message"
2. å®ƒæ ¹æ®å½“å‰è¯­è¨€ç¯å¢ƒ
3. è¿”å›å¯¹åº”çš„æ–‡å­—å†…å®¹
```

### 2.2 é…ç½®MessageSource


**Javaé…ç½®æ–¹å¼**
```java
@Configuration
public class I18nConfig {
    
    @Bean
    public MessageSource messageSource() {
        // åˆ›å»ºèµ„æºæ–‡ä»¶æ¶ˆæ¯æº
        ResourceBundleMessageSource source = new ResourceBundleMessageSource();
        
        // è®¾ç½®èµ„æºæ–‡ä»¶åŸºç¡€åç§°ï¼ˆä¸å«è¯­è¨€åç¼€å’Œ.propertiesï¼‰
        source.setBasename("messages");  
        // å®é™…ä¼šæ‰¾ï¼šmessages_zh_CN.propertiesã€messages_en_US.properties
        
        // è®¾ç½®ç¼–ç ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç 
        source.setDefaultEncoding("UTF-8");
        
        // è®¾ç½®ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œ-1è¡¨ç¤ºæ°¸ä¹…ç¼“å­˜
        source.setCacheSeconds(3600);  // 1å°æ—¶åˆ·æ–°ä¸€æ¬¡
        
        return source;
    }
}
```

**ğŸ“‹ é…ç½®è¯´æ˜**
| é…ç½®é¡¹ | ä½œç”¨ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|-------|------|--------|------|
| **basename** | èµ„æºæ–‡ä»¶å | `"messages"` | ä¸å«è¯­è¨€å’Œæ‰©å±•å |
| **defaultEncoding** | æ–‡ä»¶ç¼–ç  | `"UTF-8"` | é˜²æ­¢ä¸­æ–‡ä¹±ç  |
| **cacheSeconds** | ç¼“å­˜æ—¶é—´ | `3600` | ç§’ä¸ºå•ä½ï¼Œ-1æ°¸ä¹…ç¼“å­˜ |

**Spring Booté…ç½®ï¼ˆæ›´ç®€å•ï¼‰**
```properties
# application.properties
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.cache-duration=3600
```

### 2.3 MessageSourceçš„ä½¿ç”¨æ–¹å¼


**åœ¨ä»£ç ä¸­ä½¿ç”¨**
```java
@Controller
public class UserController {
    
    @Autowired
    private MessageSource messageSource;
    
    @GetMapping("/welcome")
    public String welcome(Locale locale) {
        // è·å–å½“å‰è¯­è¨€ç¯å¢ƒçš„æ¶ˆæ¯
        String message = messageSource.getMessage(
            "welcome.message",      // æ¶ˆæ¯key
            null,                   // å‚æ•°ï¼ˆæš‚æ—¶æ²¡æœ‰ï¼‰
            locale                  // å½“å‰è¯­è¨€ç¯å¢ƒ
        );
        
        return message;  // è‡ªåŠ¨è¿”å›å¯¹åº”è¯­è¨€çš„æ–‡å­—
    }
}
```

**å¸¦å‚æ•°çš„æ¶ˆæ¯**
```java
// èµ„æºæ–‡ä»¶ä¸­ï¼šwelcome.user=æ¬¢è¿æ‚¨ï¼Œ{0}å…ˆç”Ÿ/å¥³å£«
String message = messageSource.getMessage(
    "welcome.user",
    new Object[]{"å¼ ä¸‰"},  // å‚æ•°æ•°ç»„ï¼Œ{0}ä¼šè¢«æ›¿æ¢
    locale
);
// ç»“æœï¼šæ¬¢è¿æ‚¨ï¼Œå¼ ä¸‰å…ˆç”Ÿ/å¥³å£«
```

---

## 3. ğŸ“ èµ„æºæ–‡ä»¶ç®¡ç†


### 3.1 èµ„æºæ–‡ä»¶çš„å‘½åè§„åˆ™


**æ–‡ä»¶å‘½åæ ¼å¼**
```
åŸºç¡€æ–‡ä»¶å_è¯­è¨€ä»£ç _å›½å®¶ä»£ç .properties

ç¤ºä¾‹ï¼š
messages.properties           â†’ é»˜è®¤ï¼ˆæ‰¾ä¸åˆ°å…¶ä»–è¯­è¨€æ—¶ç”¨è¿™ä¸ªï¼‰
messages_zh.properties        â†’ ä¸­æ–‡ï¼ˆæ‰€æœ‰ä¸­æ–‡åœ°åŒºé€šç”¨ï¼‰
messages_zh_CN.properties     â†’ ç®€ä½“ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰
messages_zh_TW.properties     â†’ ç¹ä½“ä¸­æ–‡ï¼ˆå°æ¹¾ï¼‰
messages_en.properties        â†’ è‹±æ–‡ï¼ˆæ‰€æœ‰è‹±æ–‡åœ°åŒºé€šç”¨ï¼‰
messages_en_US.properties     â†’ ç¾å¼è‹±è¯­
messages_en_GB.properties     â†’ è‹±å¼è‹±è¯­
```

**ğŸ” æŸ¥æ‰¾é¡ºåºï¼ˆé‡è¦ï¼‰**
```
ç”¨æˆ·è¯·æ±‚ï¼šzh_CNï¼ˆä¸­æ–‡-ä¸­å›½ï¼‰

SpringæŸ¥æ‰¾é¡ºåºï¼š
1. messages_zh_CN.properties  â† æœ€ç²¾ç¡®åŒ¹é…
2. messages_zh.properties     â† åŒ¹é…è¯­è¨€
3. messages.properties        â† é»˜è®¤æ–‡ä»¶
```

### 3.2 èµ„æºæ–‡ä»¶å†…å®¹ç¼–å†™


**messages_zh_CN.propertiesï¼ˆä¸­æ–‡ï¼‰**
```properties
# åŸºæœ¬æ¶ˆæ¯
welcome.message=æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„ç½‘ç«™
login.success=ç™»å½•æˆåŠŸ
login.failed=ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯

# å¸¦å‚æ•°çš„æ¶ˆæ¯
welcome.user=æ¬¢è¿æ‚¨ï¼Œ{0}
order.info=è®¢å•å·ï¼š{0}ï¼Œé‡‘é¢ï¼š{1}å…ƒ

# éªŒè¯æ¶ˆæ¯
user.name.required=ç”¨æˆ·åä¸èƒ½ä¸ºç©º
user.email.invalid=é‚®ç®±æ ¼å¼ä¸æ­£ç¡®
```

**messages_en_US.propertiesï¼ˆè‹±æ–‡ï¼‰**
```properties
# Basic Messages
welcome.message=Welcome to our website
login.success=Login successful
login.failed=Invalid username or password

# Parameterized Messages
welcome.user=Welcome, {0}
order.info=Order No: {0}, Amount: ${1}

# Validation Messages
user.name.required=Username is required
user.email.invalid=Invalid email format
```

**ğŸ’¡ ç¼–å†™æŠ€å·§**
- **keyå‘½å**ï¼šç”¨ç‚¹åˆ†éš”ï¼Œä½“ç°å±‚æ¬¡å…³ç³»ï¼ˆå¦‚`user.name.required`ï¼‰
- **å‚æ•°å ä½**ï¼šç”¨`{0}`ã€`{1}`è¡¨ç¤ºå‚æ•°ä½ç½®
- **æ³¨é‡Šè¯´æ˜**ï¼šç”¨`#`æ·»åŠ æ³¨é‡Šï¼Œæ–¹ä¾¿ç»´æŠ¤
- **åˆ†ç±»ç»„ç»‡**ï¼šç›¸å…³çš„æ¶ˆæ¯æ”¾åœ¨ä¸€èµ·ï¼Œä¾¿äºæŸ¥æ‰¾

### 3.3 èµ„æºæ–‡ä»¶çš„ç›®å½•ç»“æ„


**æ¨èçš„é¡¹ç›®ç»“æ„**
```
src/main/resources/
â”œâ”€â”€ messages.properties              # é»˜è®¤ï¼ˆè‹±æ–‡æˆ–å¸¸ç”¨è¯­è¨€ï¼‰
â”œâ”€â”€ messages_zh_CN.properties        # ç®€ä½“ä¸­æ–‡
â”œâ”€â”€ messages_en_US.properties        # ç¾å¼è‹±è¯­
â”œâ”€â”€ i18n/                           # ä¹Ÿå¯ä»¥æ”¾å­ç›®å½•
â”‚   â”œâ”€â”€ errors_zh_CN.properties     # é”™è¯¯æ¶ˆæ¯-ä¸­æ–‡
â”‚   â”œâ”€â”€ errors_en_US.properties     # é”™è¯¯æ¶ˆæ¯-è‹±æ–‡
â”‚   â”œâ”€â”€ validation_zh_CN.properties # éªŒè¯æ¶ˆæ¯-ä¸­æ–‡
â”‚   â””â”€â”€ validation_en_US.properties # éªŒè¯æ¶ˆæ¯-è‹±æ–‡
```

**å¤šæ–‡ä»¶é…ç½®**
```java
@Bean
public MessageSource messageSource() {
    ResourceBundleMessageSource source = new ResourceBundleMessageSource();
    
    // æ”¯æŒå¤šä¸ªèµ„æºæ–‡ä»¶
    source.setBasenames(
        "messages",           // é€šç”¨æ¶ˆæ¯
        "i18n/errors",       // é”™è¯¯æ¶ˆæ¯
        "i18n/validation"    // éªŒè¯æ¶ˆæ¯
    );
    
    source.setDefaultEncoding("UTF-8");
    return source;
}
```

---

## 4. ğŸŒ LocaleResolveråŒºåŸŸè§£æ


### 4.1 LocaleResolveræ˜¯ä»€ä¹ˆ


**é€šä¿—ç†è§£**
```
LocaleResolver = è¯­è¨€æ£€æµ‹å™¨

å°±åƒä½ æ‰‹æœºçš„è¯­è¨€è®¾ç½®ï¼š
1. ç³»ç»Ÿæ£€æµ‹ï¼šä½ åœ¨å“ªä¸ªå›½å®¶
2. è¯»å–è®¾ç½®ï¼šä½ é€‰æ‹©äº†ä»€ä¹ˆè¯­è¨€
3. åº”ç”¨è¯­è¨€ï¼šæ‰€æœ‰APPç”¨è¿™ä¸ªè¯­è¨€æ˜¾ç¤º

LocaleResolverå·¥ä½œæµç¨‹ï¼š
ç”¨æˆ·è¯·æ±‚ â†’ LocaleResolveræ£€æµ‹è¯­è¨€ â†’ è¿”å›Localeå¯¹è±¡ â†’ MessageSourceè¿”å›å¯¹åº”æ–‡å­—
```

### 4.2 å¸¸ç”¨çš„LocaleResolverç±»å‹


**ç±»å‹å¯¹æ¯”**
| è§£æå™¨ç±»å‹ | å·¥ä½œæ–¹å¼ | é€‚ç”¨åœºæ™¯ | ä¼˜ç¼ºç‚¹ |
|-----------|---------|---------|--------|
| **AcceptHeaderLocaleResolver** | è¯»å–æµè§ˆå™¨è¯­è¨€è®¾ç½® | ç®€å•åœºæ™¯ | âœ…ç®€å• âŒä¸èƒ½åˆ‡æ¢ |
| **SessionLocaleResolver** | ä¿å­˜åœ¨Sessionä¸­ | ç”¨æˆ·å¯åˆ‡æ¢è¯­è¨€ | âœ…å¯åˆ‡æ¢ âŒé‡å¯ä¸¢å¤± |
| **CookieLocaleResolver** | ä¿å­˜åœ¨Cookieä¸­ | éœ€è¦è®°ä½ç”¨æˆ·é€‰æ‹© | âœ…æŒä¹…åŒ– âŒéšç§é—®é¢˜ |
| **FixedLocaleResolver** | å›ºå®šè¯­è¨€ | å•è¯­è¨€ç³»ç»Ÿ | âœ…ç¨³å®š âŒä¸çµæ´» |

### 4.3 é…ç½®SessionLocaleResolverï¼ˆæ¨èï¼‰


**ä¸ºä»€ä¹ˆé€‰æ‹©Sessionæ–¹å¼**
```
ä¼˜åŠ¿åˆ†æï¼š
âœ… ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€
âœ… åˆ‡æ¢åç«‹å³ç”Ÿæ•ˆ
âœ… ä¸ä¾èµ–æµè§ˆå™¨è®¾ç½®
âœ… æœåŠ¡å™¨ç«¯æ§åˆ¶ï¼Œæ›´å®‰å…¨

ä½¿ç”¨åœºæ™¯ï¼š
â€¢ ç”µå•†ç½‘ç«™ï¼šç”¨æˆ·é€‰æ‹©ä¸­æ–‡/è‹±æ–‡è´­ç‰©
â€¢ ä¼ä¸šç³»ç»Ÿï¼šå‘˜å·¥æ ¹æ®ä¹ æƒ¯é€‰è¯­è¨€
â€¢ å¤šè¯­è¨€ç¤¾åŒºï¼šç”¨æˆ·è‡ªä¸»åˆ‡æ¢
```

**é…ç½®ä»£ç **
```java
@Configuration
public class LocaleConfig {
    
    // 1. é…ç½®LocaleResolver
    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver resolver = new SessionLocaleResolver();
        
        // è®¾ç½®é»˜è®¤è¯­è¨€ï¼ˆæ‰¾ä¸åˆ°æ—¶ç”¨è¿™ä¸ªï¼‰
        resolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);
        
        return resolver;
    }
    
    // 2. é…ç½®æ‹¦æˆªå™¨ï¼ˆç”¨äºåˆ‡æ¢è¯­è¨€ï¼‰
    @Bean
    public LocaleChangeInterceptor localeChangeInterceptor() {
        LocaleChangeInterceptor interceptor = new LocaleChangeInterceptor();
        
        // è®¾ç½®å‚æ•°åï¼ˆURLä¸­ä¼ é€’è¯­è¨€å‚æ•°ï¼‰
        interceptor.setParamName("lang");  
        // è®¿é—®ï¼š/page?lang=en â†’ åˆ‡æ¢ä¸ºè‹±æ–‡
        
        return interceptor;
    }
    
    // 3. æ³¨å†Œæ‹¦æˆªå™¨
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(localeChangeInterceptor());
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**
```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š
1. è®¿é—®é¦–é¡µï¼š/home â†’ æ˜¾ç¤ºä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
2. ç‚¹å‡»Englishï¼š/home?lang=en â†’ åˆ‡æ¢ä¸ºè‹±æ–‡
3. ç»§ç»­è®¿é—®å…¶ä»–é¡µé¢ â†’ ä¿æŒè‹±æ–‡çŠ¶æ€
4. ç‚¹å‡»ä¸­æ–‡ï¼š/home?lang=zh_CN â†’ åˆ‡æ¢å›ä¸­æ–‡
```

### 4.4 Cookieæ–¹å¼é…ç½®ï¼ˆæŒä¹…åŒ–ï¼‰


**é…ç½®ç¤ºä¾‹**
```java
@Bean
public LocaleResolver localeResolver() {
    CookieLocaleResolver resolver = new CookieLocaleResolver();
    
    // Cookieåç§°
    resolver.setCookieName("language");
    
    // Cookieæœ‰æ•ˆæœŸï¼ˆç§’ï¼‰ï¼Œ-1è¡¨ç¤ºæµè§ˆå™¨å…³é—­æ—¶åˆ é™¤
    resolver.setCookieMaxAge(604800);  // 7å¤©
    
    // Cookieè·¯å¾„
    resolver.setCookiePath("/");
    
    // é»˜è®¤è¯­è¨€
    resolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);
    
    return resolver;
}
```

**ä¼˜åŠ¿åœºæ™¯**
```
é€‚åˆåœºæ™¯ï¼š
â€¢ ç”¨æˆ·ä¸‹æ¬¡è®¿é—®è®°ä½è¯­è¨€é€‰æ‹©
â€¢ è·¨æµè§ˆå™¨tabé¡µä¿æŒè¯­è¨€
â€¢ å‡è½»æœåŠ¡å™¨Sessionå‹åŠ›

æ³¨æ„äº‹é¡¹ï¼š
âš ï¸ Cookieå¯èƒ½è¢«ç¦ç”¨
âš ï¸ éœ€è¦è€ƒè™‘éšç§åˆè§„
âš ï¸ è·¨åŸŸè®¿é—®éœ€è¦ç‰¹æ®Šå¤„ç†
```

---

## 5. âš™ï¸ ç¼–ç ä¸ç¼“å­˜é…ç½®


### 5.1 ç¼–ç é…ç½®ï¼ˆé˜²æ­¢ä¹±ç ï¼‰


**ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ç¼–ç **
```
é—®é¢˜åœºæ™¯ï¼š
èµ„æºæ–‡ä»¶ï¼šwelcome.message=æ¬¢è¿
æ˜¾ç¤ºç»“æœï¼šwelcome.message=Ã¤Â¸Â­Ã¦â€“â€¡Ã¤Â¹Â±Ã§ 

åŸå› ï¼šæ–‡ä»¶ç¼–ç ä¸ç»Ÿä¸€
è§£å†³ï¼šç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç 
```

**å®Œæ•´ç¼–ç é…ç½®**
```java
@Bean
public MessageSource messageSource() {
    ResourceBundleMessageSource source = new ResourceBundleMessageSource();
    source.setBasename("messages");
    
    // ğŸ”¸ å…³é”®ï¼šè®¾ç½®æ–‡ä»¶ç¼–ç 
    source.setDefaultEncoding("UTF-8");
    
    // å¦‚æœæ‰¾ä¸åˆ°æ¶ˆæ¯ï¼Œè¿”å›keyæœ¬èº«è€Œä¸æ˜¯æŠ¥é”™
    source.setUseCodeAsDefaultMessage(true);
    
    return source;
}
```

**IDEAé…ç½®ï¼ˆé‡è¦ï¼‰**
```
File â†’ Settings â†’ Editor â†’ File Encodings
âœ… Global Encoding: UTF-8
âœ… Project Encoding: UTF-8
âœ… Properties Files: UTF-8
âœ… Transparent native-to-ascii conversion: å‹¾é€‰
```

### 5.2 ç¼“å­˜ç­–ç•¥é…ç½®


**ç¼“å­˜çš„ä½œç”¨**
```
æ€§èƒ½å¯¹æ¯”ï¼š
âŒ æ— ç¼“å­˜ï¼šæ¯æ¬¡è¯·æ±‚éƒ½è¯»å–æ–‡ä»¶
   1000æ¬¡è¯·æ±‚ = 1000æ¬¡IOæ“ä½œ â†’ æ…¢

âœ… æœ‰ç¼“å­˜ï¼šæ–‡ä»¶å†…å®¹ä¿å­˜åœ¨å†…å­˜
   1000æ¬¡è¯·æ±‚ = 1æ¬¡IO + 999æ¬¡å†…å­˜è¯»å– â†’ å¿«
```

**ç¼“å­˜é…ç½®è¯¦è§£**
```java
@Bean
public MessageSource messageSource() {
    ResourceBundleMessageSource source = new ResourceBundleMessageSource();
    source.setBasename("messages");
    source.setDefaultEncoding("UTF-8");
    
    // ğŸ”¸ ç¼“å­˜æ—¶é—´é…ç½®
    source.setCacheSeconds(3600);  // 3600ç§’ = 1å°æ—¶
    
    // ç‰¹æ®Šå€¼è¯´æ˜ï¼š
    // -1ï¼šæ°¸ä¹…ç¼“å­˜ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
    //  0ï¼šä¸ç¼“å­˜ï¼ˆå¼€å‘ç¯å¢ƒè°ƒè¯•ç”¨ï¼‰
    // >0ï¼šå®šæ—¶åˆ·æ–°ï¼ˆæ ¹æ®éœ€æ±‚è®¾ç½®ï¼‰
    
    return source;
}
```

**ç¯å¢ƒé…ç½®å»ºè®®**
| ç¯å¢ƒ | ç¼“å­˜è®¾ç½® | åŸå›  |
|------|---------|------|
| **å¼€å‘ç¯å¢ƒ** | `0`ç§’ï¼ˆä¸ç¼“å­˜ï¼‰ | ä¿®æ”¹èµ„æºæ–‡ä»¶ç«‹å³ç”Ÿæ•ˆï¼Œæ–¹ä¾¿è°ƒè¯• |
| **æµ‹è¯•ç¯å¢ƒ** | `300`ç§’ï¼ˆ5åˆ†é’Ÿï¼‰ | å¹³è¡¡æ€§èƒ½å’Œæ›´æ–°é€Ÿåº¦ |
| **ç”Ÿäº§ç¯å¢ƒ** | `-1`ï¼ˆæ°¸ä¹…ç¼“å­˜ï¼‰ | æœ€ä½³æ€§èƒ½ï¼Œæ–‡ä»¶ä¸å¸¸å˜åŠ¨ |

**Spring Booté…ç½®**
```properties
# å¼€å‘ç¯å¢ƒ
spring.messages.cache-duration=0

# ç”Ÿäº§ç¯å¢ƒ
spring.messages.cache-duration=-1
```

### 5.3 å®Œæ•´é…ç½®ç¤ºä¾‹


**ç»¼åˆé…ç½®ç±»**
```java
@Configuration
public class I18nConfiguration {
    
    @Bean
    public MessageSource messageSource() {
        ResourceBundleMessageSource source = new ResourceBundleMessageSource();
        
        // èµ„æºæ–‡ä»¶åŸºç¡€å
        source.setBasename("messages");
        
        // ç¼–ç é…ç½®
        source.setDefaultEncoding("UTF-8");
        
        // ç¼“å­˜é…ç½®ï¼ˆæ ¹æ®ç¯å¢ƒè°ƒæ•´ï¼‰
        source.setCacheSeconds(
            env.getProperty("app.env").equals("prod") ? -1 : 0
        );
        
        // æ‰¾ä¸åˆ°æ¶ˆæ¯æ—¶ä½¿ç”¨keyä½œä¸ºé»˜è®¤å€¼
        source.setUseCodeAsDefaultMessage(true);
        
        return source;
    }
    
    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver resolver = new SessionLocaleResolver();
        resolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);
        return resolver;
    }
    
    @Bean
    public LocaleChangeInterceptor localeChangeInterceptor() {
        LocaleChangeInterceptor interceptor = new LocaleChangeInterceptor();
        interceptor.setParamName("lang");
        return interceptor;
    }
}
```

---

## 6. ğŸš€ å®æˆ˜åº”ç”¨åœºæ™¯


### 6.1 é¡µé¢ä¸­ä½¿ç”¨å›½é™…åŒ–


**JSPé¡µé¢**
```jsp
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>

<h1><spring:message code="welcome.message"/></h1>
<p><spring:message code="welcome.user" arguments="${username}"/></p>

<!-- è¯­è¨€åˆ‡æ¢é“¾æ¥ -->
<a href="?lang=zh_CN">ä¸­æ–‡</a> | <a href="?lang=en_US">English</a>
```

**Thymeleafæ¨¡æ¿**
```html
<h1 th:text="#{welcome.message}">æ¬¢è¿</h1>
<p th:text="#{welcome.user(${username})}">æ¬¢è¿ç”¨æˆ·</p>

<!-- è¯­è¨€åˆ‡æ¢ -->
<a th:href="@{/(lang='zh_CN')}">ä¸­æ–‡</a> |
<a th:href="@{/(lang='en_US')}">English</a>
```

### 6.2 åœ¨Controllerä¸­ä½¿ç”¨


**ç¤ºä¾‹ä»£ç **
```java
@Controller
public class ProductController {
    
    @Autowired
    private MessageSource messageSource;
    
    @PostMapping("/product/add")
    public String addProduct(@Valid Product product, 
                            BindingResult result,
                            Locale locale,
                            Model model) {
        if (result.hasErrors()) {
            // è·å–å›½é™…åŒ–é”™è¯¯æ¶ˆæ¯
            String error = messageSource.getMessage(
                "product.add.failed", 
                null, 
                locale
            );
            model.addAttribute("message", error);
            return "error";
        }
        
        // æˆåŠŸæ¶ˆæ¯
        String success = messageSource.getMessage(
            "product.add.success",
            new Object[]{product.getName()},
            locale
        );
        model.addAttribute("message", success);
        return "success";
    }
}
```

### 6.3 è¡¨å•éªŒè¯å›½é™…åŒ–


**å®ä½“ç±»**
```java
public class User {
    
    @NotBlank(message = "{user.name.required}")
    private String name;
    
    @Email(message = "{user.email.invalid}")
    private String email;
    
    @Size(min = 6, message = "{user.password.length}")
    private String password;
}
```

**ValidationMessages.properties**
```properties
# ValidationMessages_zh_CN.properties
user.name.required=ç”¨æˆ·åä¸èƒ½ä¸ºç©º
user.email.invalid=é‚®ç®±æ ¼å¼ä¸æ­£ç¡®
user.password.length=å¯†ç é•¿åº¦è‡³å°‘6ä½

# ValidationMessages_en_US.properties
user.name.required=Username is required
user.email.invalid=Invalid email format
user.password.length=Password must be at least 6 characters
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ å›½é™…åŒ–æœ¬è´¨**
```
ä¸€å¥—ä»£ç  + å¤šä¸ªèµ„æºæ–‡ä»¶ = æ”¯æŒå¤šè¯­è¨€

æ ¸å¿ƒç»„ä»¶ï¼š
â€¢ MessageSourceï¼šæ¶ˆæ¯ç¿»è¯‘å™¨
â€¢ LocaleResolverï¼šè¯­è¨€æ£€æµ‹å™¨
â€¢ èµ„æºæ–‡ä»¶ï¼šç¿»è¯‘å†…å®¹å­˜å‚¨
```

**ğŸ”¸ å·¥ä½œæµç¨‹**
```
è¯·æ±‚åˆ°è¾¾ 
   â†“
LocaleResolveræ£€æµ‹è¯­è¨€ç¯å¢ƒ
   â†“
Controllerè·å–Localeå¯¹è±¡
   â†“
MessageSourceæ ¹æ®LocaleæŸ¥æ‰¾èµ„æºæ–‡ä»¶
   â†“
è¿”å›å¯¹åº”è¯­è¨€çš„æ–‡å­—å†…å®¹
```

### 7.2 å…³é”®é…ç½®è¦ç‚¹


| é…ç½®é¡¹ | æ ¸å¿ƒä½œç”¨ | æ¨èé…ç½® |
|-------|---------|---------|
| **MessageSource** | æ¶ˆæ¯æºç®¡ç† | ResourceBundleMessageSource |
| **basename** | èµ„æºæ–‡ä»¶å | "messages" |
| **defaultEncoding** | æ–‡ä»¶ç¼–ç  | "UTF-8" |
| **LocaleResolver** | è¯­è¨€è§£æå™¨ | SessionLocaleResolver |
| **cacheSeconds** | ç¼“å­˜æ—¶é—´ | å¼€å‘:0 ç”Ÿäº§:-1 |

### 7.3 å®é™…åº”ç”¨å»ºè®®


**âœ… æœ€ä½³å®è·µ**
- ç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç ï¼Œé¿å…ä¹±ç 
- èµ„æºæ–‡ä»¶æŒ‰æ¨¡å—åˆ†ç±»ç®¡ç†
- keyå‘½åè§„èŒƒï¼Œä½“ç°å±‚æ¬¡å…³ç³»
- å¼€å‘ç¯å¢ƒå…³é—­ç¼“å­˜ï¼Œç”Ÿäº§å¼€å¯ç¼“å­˜
- æä¾›é»˜è®¤è¯­è¨€ï¼Œé˜²æ­¢æ‰¾ä¸åˆ°èµ„æº

**âš ï¸ å¸¸è§é™·é˜±**
- å¿˜è®°é…ç½®æ–‡ä»¶ç¼–ç å¯¼è‡´ä¸­æ–‡ä¹±ç 
- èµ„æºæ–‡ä»¶å‘½åé”™è¯¯ï¼ˆè¯­è¨€ä»£ç ä¸å¯¹ï¼‰
- ç¼“å­˜æ—¶é—´è®¾ç½®ä¸å½“å½±å“è°ƒè¯•
- LocaleResolveré…ç½®é—æ¼
- å¤šä¸ªbasenameé…ç½®é¡ºåºé”™è¯¯

### 7.4 å­¦ä¹ æ£€éªŒ


**ğŸ¯ è‡ªæ£€æ¸…å•**
- [ ] ç†è§£å›½é™…åŒ–çš„åŸºæœ¬æ¦‚å¿µå’Œä½œç”¨
- [ ] ä¼šé…ç½®MessageSourceå’ŒLocaleResolver
- [ ] æŒæ¡èµ„æºæ–‡ä»¶çš„å‘½åè§„åˆ™
- [ ] èƒ½åœ¨é¡µé¢å’ŒControllerä¸­ä½¿ç”¨å›½é™…åŒ–
- [ ] äº†è§£ä¸åŒLocaleResolverçš„é€‚ç”¨åœºæ™¯
- [ ] çŸ¥é“å¦‚ä½•é…ç½®ç¼–ç å’Œç¼“å­˜

**ğŸ’¡ æ ¸å¿ƒè®°å¿†**
- å›½é™…åŒ– = MessageSourceï¼ˆç¿»è¯‘å™¨ï¼‰+ LocaleResolverï¼ˆæ£€æµ‹å™¨ï¼‰+ èµ„æºæ–‡ä»¶ï¼ˆè¯å…¸ï¼‰
- æ–‡ä»¶å‘½åï¼šbasename_è¯­è¨€_å›½å®¶.properties
- æŸ¥æ‰¾é¡ºåºï¼šç²¾ç¡®åŒ¹é… â†’ è¯­è¨€åŒ¹é… â†’ é»˜è®¤æ–‡ä»¶
- Sessionæ–¹å¼å¯åˆ‡æ¢ï¼ŒCookieæ–¹å¼å¯æŒä¹…
- UTF-8ç¼–ç é˜²ä¹±ç ï¼Œç¼“å­˜é…ç½®ææ€§èƒ½