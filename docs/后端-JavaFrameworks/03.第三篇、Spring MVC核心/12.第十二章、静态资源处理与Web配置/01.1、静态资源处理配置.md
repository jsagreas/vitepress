---
title: 1ã€é™æ€èµ„æºå¤„ç†é…ç½®
---
## ğŸ“š ç›®å½•

1. [é™æ€èµ„æºå¤„ç†åŸºç¡€](#1-é™æ€èµ„æºå¤„ç†åŸºç¡€)
2. [ResourceHandleræ ¸å¿ƒé…ç½®](#2-ResourceHandleræ ¸å¿ƒé…ç½®)
3. [èµ„æºè·¯å¾„æ˜ å°„è¯¦è§£](#3-èµ„æºè·¯å¾„æ˜ å°„è¯¦è§£)
4. [ç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ–](#4-ç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ–)
5. [ç‰ˆæœ¬ç®¡ç†ä¸CDNé›†æˆ](#5-ç‰ˆæœ¬ç®¡ç†ä¸CDNé›†æˆ)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“ é™æ€èµ„æºå¤„ç†åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯é™æ€èµ„æº


**ğŸ”¸ é™æ€èµ„æºçš„æ¦‚å¿µ**

> **é€šä¿—ç†è§£**ï¼šé™æ€èµ„æºå°±æ˜¯ç½‘ç«™ä¸­é‚£äº›**ä¸éœ€è¦æœåŠ¡å™¨å¤„ç†ã€ç›´æ¥å‘é€ç»™æµè§ˆå™¨**çš„æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ã€CSSæ ·å¼è¡¨ã€JavaScriptè„šæœ¬ã€å­—ä½“æ–‡ä»¶ç­‰ã€‚è¿™äº›æ–‡ä»¶çš„å†…å®¹æ˜¯å›ºå®šçš„ï¼Œä¸åƒåŠ¨æ€é¡µé¢é‚£æ ·éœ€è¦æœåŠ¡å™¨å®æ—¶ç”Ÿæˆã€‚

```
é™æ€èµ„æº vs åŠ¨æ€èµ„æºå¯¹æ¯”ï¼š

é™æ€èµ„æºï¼ˆä¸éœ€è¦æœåŠ¡å™¨å¤„ç†ï¼‰          åŠ¨æ€èµ„æºï¼ˆéœ€è¦æœåŠ¡å™¨å¤„ç†ï¼‰
    â”œâ”€â”€ å›¾ç‰‡æ–‡ä»¶                          â”œâ”€â”€ JSPé¡µé¢
    â”‚   (logo.png, banner.jpg)           â”‚   (userInfo.jsp)
    â”œâ”€â”€ æ ·å¼æ–‡ä»¶                          â”œâ”€â”€ ç”¨æˆ·æ•°æ®
    â”‚   (style.css)                      â”‚   (æ•°æ®åº“æŸ¥è¯¢ç»“æœ)
    â”œâ”€â”€ è„šæœ¬æ–‡ä»¶                          â””â”€â”€ APIæ¥å£
    â”‚   (main.js)                            (è¿”å›JSONæ•°æ®)
    â””â”€â”€ å­—ä½“æ–‡ä»¶
        (font.woff)

ç‰¹ç‚¹ï¼šå†…å®¹å›ºå®šï¼Œå¯ä»¥ç¼“å­˜              ç‰¹ç‚¹ï¼šå†…å®¹åŠ¨æ€å˜åŒ–ï¼Œä¸èƒ½ç¼“å­˜
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦é™æ€èµ„æºå¤„ç†


**ğŸ¯ æ ¸å¿ƒé—®é¢˜**

åœ¨Spring MVCä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹**æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šè¢«DispatcherServletæ‹¦æˆªå¤„ç†**ã€‚è¿™å°±å¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼š

```
é—®é¢˜åœºæ™¯æ¼”ç¤ºï¼š

ç”¨æˆ·è®¿é—® http://localhost:8080/css/style.css
         â†“
DispatcherServletæ‹¦æˆª â†’ æ‰¾ä¸åˆ°å¯¹åº”çš„Controller â†’ è¿”å›404é”™è¯¯
         â†“
CSSæ–‡ä»¶æ— æ³•åŠ è½½ï¼Œé¡µé¢æ ·å¼ä¸¢å¤±ï¼
```

**ğŸ’¡ è§£å†³æ€è·¯**

æˆ‘ä»¬éœ€è¦å‘Šè¯‰Spring MVCï¼š**å“ªäº›è¯·æ±‚æ˜¯è®¿é—®é™æ€èµ„æºçš„ï¼Œè¿™äº›è¯·æ±‚ä¸è¦æ‹¦æˆªï¼Œç›´æ¥è¿”å›æ–‡ä»¶å°±è¡Œ**ã€‚

### 1.3 Spring MVCå¤„ç†é™æ€èµ„æºçš„æ–¹å¼


**ğŸ“Š ä¸‰ç§ä¸»æµæ–¹æ¡ˆå¯¹æ¯”**

| æ–¹æ¡ˆ | å·¥ä½œåŸç† | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|---------|------|------|---------|
| **é»˜è®¤Servlet** | äº¤ç»™Tomcatå¤„ç† | ç®€å•å¿«é€Ÿ | åŠŸèƒ½æœ‰é™ | ç®€å•é¡¹ç›® |
| **ResourceHandler** | Springè‡ªå·±å¤„ç† | åŠŸèƒ½å¼ºå¤§ï¼Œå¯æ§åˆ¶ | é…ç½®ç¨å¤æ‚ | ä¼ä¸šé¡¹ç›® â­ |
| **å¤–éƒ¨æœåŠ¡å™¨** | Nginxå¤„ç† | æ€§èƒ½æœ€ä½³ | éœ€è¦é¢å¤–éƒ¨ç½² | å¤§å‹é¡¹ç›® |

> **ğŸ’¡ æ–°æ‰‹å»ºè®®**ï¼šå­¦ä¹ é˜¶æ®µä½¿ç”¨ResourceHandleré…ç½®å³å¯ï¼Œæ—¢èƒ½å­¦åˆ°Spring MVCçš„ç‰¹æ€§ï¼Œåˆæ»¡è¶³é¡¹ç›®éœ€æ±‚ã€‚

---

## 2. âš™ï¸ ResourceHandleræ ¸å¿ƒé…ç½®


### 2.1 ResourceHandleræ˜¯ä»€ä¹ˆ


**ğŸ”¸ é€šä¿—è§£é‡Š**

ResourceHandlerå°±åƒæ˜¯ä¸€ä¸ª**é™æ€èµ„æºçš„"æœåŠ¡å‘˜"**ï¼Œå®ƒè´Ÿè´£ï¼š
- **æ¥æ”¶**ï¼šè¯†åˆ«å“ªäº›è¯·æ±‚æ˜¯è¦è®¿é—®é™æ€èµ„æº
- **æŸ¥æ‰¾**ï¼šåœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹é‡Œæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶
- **è¿”å›**ï¼šæŠŠæ–‡ä»¶å†…å®¹å‘é€ç»™æµè§ˆå™¨

```
ResourceHandlerå·¥ä½œæµç¨‹ï¼š

ç”¨æˆ·è¯·æ±‚ /images/logo.png
    â†“
ResourceHandlerè¯†åˆ«ï¼šè¿™æ˜¯è¦è®¿é—®å›¾ç‰‡
    â†“
åœ¨ /static/images/ ç›®å½•ä¸‹æŸ¥æ‰¾ logo.png
    â†“
æ‰¾åˆ°æ–‡ä»¶ â†’ è¯»å–å†…å®¹ â†’ è¿”å›ç»™æµè§ˆå™¨
```

### 2.2 åŸºç¡€é…ç½®æ–¹å¼


**ğŸ”§ Javaé…ç½®æ–¹å¼ï¼ˆæ¨èï¼‰**

```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        // é…ç½®å›¾ç‰‡èµ„æº
        registry.addResourceHandler("/images/**")  // è®¿é—®è·¯å¾„
                .addResourceLocations("/static/images/"); // å®é™…æ–‡ä»¶ä½ç½®
        
        // é…ç½®CSSèµ„æº
        registry.addResourceHandler("/css/**")
                .addResourceLocations("/static/css/");
        
        // é…ç½®JSèµ„æº
        registry.addResourceHandler("/js/**")
                .addResourceLocations("/static/js/");
    }
}
```

**ğŸ“ é…ç½®è§£è¯»**

- `addResourceHandler("/images/**")`ï¼šå‘Šè¯‰Springï¼Œå‡¡æ˜¯ä»¥ `/images/` å¼€å¤´çš„è¯·æ±‚ï¼Œéƒ½æ˜¯è¦è®¿é—®å›¾ç‰‡
- `addResourceLocations("/static/images/")`ï¼šå‘Šè¯‰Springï¼Œå»é¡¹ç›®çš„ `/static/images/` æ–‡ä»¶å¤¹é‡Œæ‰¾æ–‡ä»¶
- `**`ï¼šé€šé…ç¬¦ï¼Œè¡¨ç¤ºåŒ¹é…ä»»æ„å¤šå±‚è·¯å¾„

```
é…ç½®æ•ˆæœç¤ºæ„ï¼š

é¡¹ç›®ç›®å½•ç»“æ„ï¼š                     è®¿é—®URLï¼š
webapp/                         
  â””â”€â”€ static/                   
      â”œâ”€â”€ images/                http://localhost:8080/images/logo.png
      â”‚   â””â”€â”€ logo.png          â†‘ æ˜ å°„åˆ° â†‘
      â”œâ”€â”€ css/                   webapp/static/images/logo.png
      â”‚   â””â”€â”€ style.css         
      â””â”€â”€ js/                    http://localhost:8080/css/style.css
          â””â”€â”€ main.js           â†‘ æ˜ å°„åˆ° â†‘
                                 webapp/static/css/style.css
```

### 2.3 XMLé…ç½®æ–¹å¼


**ğŸ”§ ä¼ ç»ŸXMLé…ç½®**

```xml
<!-- spring-mvc.xml -->
<mvc:resources mapping="/images/**" location="/static/images/" />
<mvc:resources mapping="/css/**" location="/static/css/" />
<mvc:resources mapping="/js/**" location="/static/js/" />
```

> **ğŸ’¡ æç¤º**ï¼šç°ä»£é¡¹ç›®æ›´æ¨èJavaé…ç½®æ–¹å¼ï¼Œä»£ç æ›´æ¸…æ™°ï¼Œç±»å‹å®‰å…¨ã€‚

---

## 3. ğŸ—ºï¸ èµ„æºè·¯å¾„æ˜ å°„è¯¦è§£


### 3.1 è·¯å¾„æ˜ å°„è§„åˆ™


**ğŸ”¸ é€šé…ç¬¦ç”¨æ³•**

```
è·¯å¾„åŒ¹é…è§„åˆ™è¯´æ˜ï¼š

/images/*        åªåŒ¹é…ä¸€å±‚ï¼š/images/logo.png âœ“
                             /images/user/avatar.png âœ—

/images/**       åŒ¹é…å¤šå±‚ï¼š  /images/logo.png âœ“
                             /images/user/avatar.png âœ“
                             /images/2024/01/photo.png âœ“

/static/**       åŒ¹é…æ‰€æœ‰ï¼š  /static/css/style.css âœ“
                             /static/js/main.js âœ“
                             /static/images/logo.png âœ“
```

**ğŸ“Š è·¯å¾„æ˜ å°„ç¤ºä¾‹**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    // ç¤ºä¾‹1ï¼šå•ä¸€ç›®å½•æ˜ å°„
    registry.addResourceHandler("/assets/**")
            .addResourceLocations("/static/");
    
    // ç¤ºä¾‹2ï¼šå¤šä¸ªç›®å½•æ˜ å°„ï¼ˆä¼šä¾æ¬¡æŸ¥æ‰¾ï¼‰
    registry.addResourceHandler("/resources/**")
            .addResourceLocations("/public/", "/static/", "/resources/");
    
    // ç¤ºä¾‹3ï¼šç±»è·¯å¾„èµ„æºæ˜ å°„
    registry.addResourceHandler("/webjars/**")
            .addResourceLocations("classpath:/META-INF/resources/webjars/");
}
```

### 3.2 èµ„æºä½ç½®ç±»å‹


**ğŸ“ å››ç§èµ„æºä½ç½®**

| ä½ç½®ç±»å‹ | å‰ç¼€å†™æ³• | å®é™…è·¯å¾„ç¤ºä¾‹ | ä½¿ç”¨åœºæ™¯ |
|---------|---------|-------------|---------|
| **Webåº”ç”¨æ ¹ç›®å½•** | `/` | `/static/css/` | å¸¸è§„é™æ€èµ„æº |
| **ç±»è·¯å¾„** | `classpath:/` | `classpath:/static/` | JARåŒ…å†…èµ„æº |
| **æ–‡ä»¶ç³»ç»Ÿ** | `file:` | `file:/var/www/static/` | å¤–éƒ¨æ–‡ä»¶ |
| **URLèµ„æº** | `http://` | `http://cdn.example.com/` | CDNèµ„æº |

```java
// å®é™…é…ç½®ç¤ºä¾‹
registry.addResourceHandler("/css/**")
    .addResourceLocations(
        "/static/css/",                    // Webæ ¹ç›®å½•
        "classpath:/static/css/",          // ç±»è·¯å¾„
        "file:/var/www/static/css/",      // æ–‡ä»¶ç³»ç»Ÿ
        "http://cdn.example.com/css/"     // CDN
    );
```

---

## 4. âš¡ ç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ–


### 4.1 æµè§ˆå™¨ç¼“å­˜æ§åˆ¶


**ğŸ”¸ ç¼“å­˜çš„ä½œç”¨**

> **é€šä¿—ç†è§£**ï¼šæµè§ˆå™¨ç¼“å­˜å°±åƒæ˜¯æŠŠå¸¸ç”¨çš„ä¸œè¥¿æ”¾åœ¨èº«è¾¹ï¼Œä¸‹æ¬¡ç”¨çš„æ—¶å€™ä¸ç”¨å†å»è¿œå¤„æ‹¿ã€‚å¯¹äºä¸ç»å¸¸å˜åŒ–çš„CSSã€JSæ–‡ä»¶ï¼Œè®©æµè§ˆå™¨ç¼“å­˜èµ·æ¥ï¼Œå¯ä»¥å¤§å¤§æé«˜è®¿é—®é€Ÿåº¦ã€‚

**â±ï¸ ç¼“å­˜æ—¶é•¿é…ç½®**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/static/**")
            .addResourceLocations("/static/")
            .setCachePeriod(31536000);  // ç¼“å­˜1å¹´ï¼ˆå•ä½ï¼šç§’ï¼‰
}
```

**ğŸ“Š ç¼“å­˜æ—¶é•¿å»ºè®®**

| èµ„æºç±»å‹ | æ¨èç¼“å­˜æ—¶é•¿ | åŸå›  |
|---------|-------------|------|
| **CSS/JS** | 1å¹´ (31536000ç§’) | å¾ˆå°‘æ”¹å˜ï¼Œé…åˆç‰ˆæœ¬å·ä½¿ç”¨ |
| **å›¾ç‰‡** | 1ä¸ªæœˆ (2592000ç§’) | ç›¸å¯¹ç¨³å®š |
| **å­—ä½“æ–‡ä»¶** | 1å¹´ | åŸºæœ¬ä¸å˜ |
| **HTML** | ä¸ç¼“å­˜æˆ–å¾ˆçŸ­ | ç»å¸¸æ›´æ–° |

### 4.2 é«˜çº§ç¼“å­˜é…ç½®


**ğŸ”§ CacheControlç²¾ç»†æ§åˆ¶**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/static/**")
            .addResourceLocations("/static/")
            .setCacheControl(
                CacheControl.maxAge(365, TimeUnit.DAYS)  // æœ€å¤§ç¼“å­˜æ—¶é—´
                    .cachePublic()                        // å…è®¸CDNç¼“å­˜
                    .mustRevalidate()                     // è¿‡æœŸå¿…é¡»éªŒè¯
            );
}
```

**ğŸ“ CacheControlå‚æ•°è¯´æ˜**

- `maxAge()`ï¼šè®¾ç½®ç¼“å­˜æœ€å¤§æ—¶é—´
- `cachePublic()`ï¼šå…è®¸ä»»ä½•ç¼“å­˜æœåŠ¡å™¨ï¼ˆåŒ…æ‹¬CDNï¼‰ç¼“å­˜
- `cachePrivate()`ï¼šåªå…è®¸æµè§ˆå™¨ç¼“å­˜ï¼Œä¸å…è®¸CDNç¼“å­˜
- `mustRevalidate()`ï¼šç¼“å­˜è¿‡æœŸåå¿…é¡»å‘æœåŠ¡å™¨éªŒè¯
- `noCache()`ï¼šæ¯æ¬¡éƒ½è¦éªŒè¯ï¼Œä½†å¯ä»¥ä½¿ç”¨ç¼“å­˜
- `noStore()`ï¼šå®Œå…¨ä¸ç¼“å­˜

### 4.3 èµ„æºå‹ç¼©ä¼˜åŒ–


**ğŸ—œï¸ Gzipå‹ç¼©é…ç½®**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/js/**")
            .addResourceLocations("/static/js/")
            .resourceChain(true)  // å¯ç”¨èµ„æºé“¾
            .addResolver(new GzipResourceResolver())  // Gzipå‹ç¼©
            .addResolver(new PathResourceResolver());
}
```

**ğŸ“Š å‹ç¼©æ•ˆæœå¯¹æ¯”**

```
æ–‡ä»¶å¤§å°å¯¹æ¯”ï¼š

jquery.min.js
  åŸå§‹å¤§å°ï¼š   86KB
  Gzipå‹ç¼©åï¼š 30KB  â†“ èŠ‚çœ 65%

bootstrap.min.css
  åŸå§‹å¤§å°ï¼š   120KB
  Gzipå‹ç¼©åï¼š 20KB   â†“ èŠ‚çœ 83%
```

---

## 5. ğŸ·ï¸ ç‰ˆæœ¬ç®¡ç†ä¸CDNé›†æˆ


### 5.1 ç‰ˆæœ¬ç®¡ç†ç­–ç•¥


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬ç®¡ç†**

> **é—®é¢˜åœºæ™¯**ï¼šä½ æ›´æ–°äº†ç½‘ç«™çš„CSSæ–‡ä»¶ï¼Œä½†ç”¨æˆ·æµè§ˆå™¨è¿˜åœ¨ä½¿ç”¨ç¼“å­˜çš„æ—§ç‰ˆæœ¬ï¼Œå¯¼è‡´é¡µé¢æ ·å¼é”™ä¹±ã€‚

**ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼šç‰ˆæœ¬å·ç­–ç•¥**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    // æ–¹å¼1ï¼šå†…å®¹æ‘˜è¦ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
    registry.addResourceHandler("/static/**")
            .addResourceLocations("/static/")
            .resourceChain(true)
            .addResolver(new VersionResourceResolver()
                .addContentVersionStrategy("/**"));  // æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆç‰ˆæœ¬å·
}
```

**ğŸ“ ç‰ˆæœ¬å·å·¥ä½œåŸç†**

```
æ–‡ä»¶ç‰ˆæœ¬åŒ–è¿‡ç¨‹ï¼š

åŸå§‹å¼•ç”¨ï¼š<link href="/css/style.css">
         â†“
è‡ªåŠ¨è½¬æ¢ï¼š<link href="/css/style-d41d8cd98f.css">
         â†“
æ–‡ä»¶å†…å®¹å˜åŒ– â†’ ç‰ˆæœ¬å·è‡ªåŠ¨æ”¹å˜ â†’ æµè§ˆå™¨é‡æ–°ä¸‹è½½
```

### 5.2 å›ºå®šç‰ˆæœ¬å·ç­–ç•¥


```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    // æ–¹å¼2ï¼šå›ºå®šç‰ˆæœ¬å·
    registry.addResourceHandler("/v1.0/**")
            .addResourceLocations("/static/")
            .resourceChain(true)
            .addResolver(new VersionResourceResolver()
                .addFixedVersionStrategy("1.0", "/**"));
}
```

```
ä½¿ç”¨å›ºå®šç‰ˆæœ¬å·ï¼š

è®¿é—®ï¼š/v1.0/css/style.css
    â†“
æ˜ å°„åˆ°ï¼š/static/css/style.css

ç‰ˆæœ¬å‡çº§æ—¶ï¼Œä¿®æ”¹é…ç½®ä¸º /v2.0/** å³å¯
```

### 5.3 CDNé›†æˆé…ç½®


**ğŸŒ ä»€ä¹ˆæ˜¯CDN**

> **é€šä¿—ç†è§£**ï¼šCDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰å°±åƒåœ¨å…¨å›½å„åœ°å¼€è¿é”åº—ï¼Œç”¨æˆ·è®¿é—®æ—¶è‡ªåŠ¨é€‰æ‹©æœ€è¿‘çš„"åº—"æ¥è·å–èµ„æºï¼Œé€Ÿåº¦æ›´å¿«ã€‚

**ğŸ”§ CDNé…ç½®ç¤ºä¾‹**

```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    
    @Value("${cdn.enabled:false}")
    private boolean cdnEnabled;
    
    @Value("${cdn.url:}")
    private String cdnUrl;
    
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        if (cdnEnabled) {
            // ä½¿ç”¨CDN
            registry.addResourceHandler("/static/**")
                    .addResourceLocations(cdnUrl + "/static/")
                    .setCacheControl(CacheControl.maxAge(365, TimeUnit.DAYS));
        } else {
            // æœ¬åœ°èµ„æº
            registry.addResourceHandler("/static/**")
                    .addResourceLocations("/static/");
        }
    }
}
```

**ğŸ“‹ é…ç½®æ–‡ä»¶ï¼ˆapplication.propertiesï¼‰**

```properties
# å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æœ¬åœ°èµ„æº
cdn.enabled=false

# ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨CDN
cdn.enabled=true
cdn.url=https://cdn.example.com
```

---

## 6. ğŸ” èµ„æºè¿‡æ»¤ä¸å®‰å…¨


### 6.1 èµ„æºè®¿é—®æ§åˆ¶


**ğŸ”’ é™åˆ¶æ•æ„Ÿèµ„æºè®¿é—®**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    // åªå…è®¸è®¿é—®publicç›®å½•ï¼Œä¸å…è®¸è®¿é—®privateç›®å½•
    registry.addResourceHandler("/public/**")
            .addResourceLocations("/static/public/");
    
    // WEB-INFç›®å½•çš„èµ„æºé»˜è®¤ä¸å¯è®¿é—®ï¼ˆå®‰å…¨ï¼‰
    // ä¸è¦é…ç½®ï¼šregistry.addResourceHandler("/**").addResourceLocations("/WEB-INF/")
}
```

### 6.2 è·¯å¾„éå†æ”»å‡»é˜²æŠ¤


**âš ï¸ å®‰å…¨éšæ‚£ç¤ºä¾‹**

```
å±é™©é…ç½®ï¼š
registry.addResourceHandler("/**")
        .addResourceLocations("file:/var/www/");

æ”»å‡»åœºæ™¯ï¼š
ç”¨æˆ·è®¿é—®ï¼š/../../etc/passwd
å¯èƒ½è®¿é—®åˆ°ç³»ç»Ÿæ•æ„Ÿæ–‡ä»¶ï¼
```

**âœ… å®‰å…¨é…ç½®**

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    // ä½¿ç”¨PathResourceResolverè‡ªåŠ¨é˜²æŠ¤
    registry.addResourceHandler("/static/**")
            .addResourceLocations("/static/")
            .resourceChain(true)
            .addResolver(new PathResourceResolver());  // è‡ªåŠ¨é˜»æ­¢è·¯å¾„éå†
}
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é™æ€èµ„æºï¼šä¸éœ€è¦æœåŠ¡å™¨å¤„ç†çš„å›ºå®šæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€CSSã€JSç­‰ï¼‰
ğŸ”¸ ResourceHandlerï¼šSpring MVCå¤„ç†é™æ€èµ„æºçš„æ ¸å¿ƒç»„ä»¶
ğŸ”¸ è·¯å¾„æ˜ å°„ï¼šå°†URLè·¯å¾„æ˜ å°„åˆ°å®é™…æ–‡ä»¶ä½ç½®
ğŸ”¸ æµè§ˆå™¨ç¼“å­˜ï¼šé€šè¿‡ç¼“å­˜æ§åˆ¶æé«˜è®¿é—®é€Ÿåº¦
ğŸ”¸ ç‰ˆæœ¬ç®¡ç†ï¼šè§£å†³ç¼“å­˜æ›´æ–°é—®é¢˜
ğŸ”¸ CDNé›†æˆï¼šåˆ©ç”¨åˆ†å¸ƒå¼ç½‘ç»œåŠ é€Ÿèµ„æºè®¿é—®
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é…ç½®åŸåˆ™**

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|-----|
| **æ˜ç¡®æ˜ å°„** | URLè·¯å¾„è¦æ¸…æ™°æ˜äº† | `/images/**` æ¯” `/**` æ›´å¥½ |
| **å®‰å…¨ç¬¬ä¸€** | ä¸è¦æš´éœ²æ•æ„Ÿç›®å½• | é¿å…æ˜ å°„`/WEB-INF/` |
| **åˆç†ç¼“å­˜** | æ ¹æ®èµ„æºç±»å‹è®¾ç½®ç¼“å­˜ | CSS/JSç¼“å­˜1å¹´ï¼ŒHTMLä¸ç¼“å­˜ |
| **ç‰ˆæœ¬æ§åˆ¶** | é•¿ç¼“å­˜å¿…é¡»é…åˆç‰ˆæœ¬å· | ä½¿ç”¨å†…å®¹æ‘˜è¦ç‰ˆæœ¬ç­–ç•¥ |

### 7.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ’¼ ä¼ä¸šé¡¹ç›®æœ€ä½³å®è·µ**

```java
@Configuration
public class StaticResourceConfig implements WebMvcConfigurer {
    
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        // 1. åŸºç¡€é™æ€èµ„æºï¼ˆå¼€å¯ç¼“å­˜å’Œç‰ˆæœ¬ç®¡ç†ï¼‰
        registry.addResourceHandler("/static/**")
                .addResourceLocations("/static/")
                .setCacheControl(CacheControl.maxAge(365, TimeUnit.DAYS))
                .resourceChain(true)
                .addResolver(new VersionResourceResolver()
                    .addContentVersionStrategy("/**"));
        
        // 2. ç¬¬ä¸‰æ–¹åº“èµ„æºï¼ˆWebJarsï¼‰
        registry.addResourceHandler("/webjars/**")
                .addResourceLocations("classpath:/META-INF/resources/webjars/")
                .setCacheControl(CacheControl.maxAge(365, TimeUnit.DAYS));
        
        // 3. ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ï¼ˆçŸ­æœŸç¼“å­˜ï¼Œä¸å‹ç¼©ï¼‰
        registry.addResourceHandler("/uploads/**")
                .addResourceLocations("file:/var/uploads/")
                .setCacheControl(CacheControl.maxAge(7, TimeUnit.DAYS));
    }
}
```

### 7.4 å¸¸è§é—®é¢˜ä¸è§£å†³


**â“ å¸¸è§ç–‘é—®è§£ç­”**

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|-----|------|---------|
| **é™æ€èµ„æº404** | è·¯å¾„æ˜ å°„é”™è¯¯ | æ£€æŸ¥`addResourceHandler`å’Œ`addResourceLocations`é…ç½® |
| **ä¿®æ”¹CSSä¸ç”Ÿæ•ˆ** | æµè§ˆå™¨ç¼“å­˜ | æ·»åŠ ç‰ˆæœ¬å·æˆ–æ¸…é™¤ç¼“å­˜ |
| **èµ„æºåŠ è½½æ…¢** | æœªå¯ç”¨ç¼“å­˜/å‹ç¼© | é…ç½®`setCacheControl`å’Œ`GzipResourceResolver` |
| **CDNèµ„æºå¤±æ•ˆ** | CDNæœªåŒæ­¥ | æ£€æŸ¥CDNé…ç½®å’Œèµ„æºä¸Šä¼  |

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
é™æ€èµ„æºè¦æ˜ å°„ï¼ŒResourceHandleræ¥å¸®å¿™
è·¯å¾„é€šé…è¦æ˜ç¡®ï¼Œå®‰å…¨ç›®å½•åˆ«æš´éœ²
ç¼“å­˜æ—¶é•¿è¦åˆç†ï¼Œç‰ˆæœ¬ç®¡ç†è§£æ›´æ–°
CDNåŠ é€Ÿæ€§èƒ½å¥½ï¼Œå‹ç¼©ä¼˜åŒ–å°‘ä¸äº†
```

**ğŸ¯ å­¦ä¹ æ£€æŸ¥ç‚¹**ï¼š
- [ ] ç†è§£é™æ€èµ„æºä¸åŠ¨æ€èµ„æºçš„åŒºåˆ«
- [ ] æŒæ¡ResourceHandleråŸºç¡€é…ç½®
- [ ] ç†è§£è·¯å¾„æ˜ å°„è§„åˆ™å’Œé€šé…ç¬¦
- [ ] ä¼šé…ç½®æµè§ˆå™¨ç¼“å­˜ç­–ç•¥
- [ ] äº†è§£ç‰ˆæœ¬ç®¡ç†çš„é‡è¦æ€§
- [ ] çŸ¥é“å¦‚ä½•é›†æˆCDN
- [ ] äº†è§£åŸºæœ¬çš„å®‰å…¨é˜²æŠ¤æªæ–½