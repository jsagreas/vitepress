---
title: 1ã€Exporterç”Ÿæ€ç³»ç»Ÿ
---
## ğŸ“š ç›®å½•

1. [Exporterç”Ÿæ€ç³»ç»Ÿæ¦‚è¿°](#1-exporterç”Ÿæ€ç³»ç»Ÿæ¦‚è¿°)
2. [Node Exporter ç³»ç»Ÿç›‘æ§](#2-node-exporter-ç³»ç»Ÿç›‘æ§)
3. [cAdvisor å®¹å™¨ç›‘æ§](#3-cadvisor-å®¹å™¨ç›‘æ§)
4. [Blackbox Exporter é»‘ç›’ç›‘æ§](#4-blackbox-exporter-é»‘ç›’ç›‘æ§)
5. [MySQL Exporter æ•°æ®åº“ç›‘æ§](#5-mysql-exporter-æ•°æ®åº“ç›‘æ§)
6. [Redis Exporter ç¼“å­˜ç›‘æ§](#6-redis-exporter-ç¼“å­˜ç›‘æ§)
7. [Nginx Exporter WebæœåŠ¡ç›‘æ§](#7-nginx-exporter-webæœåŠ¡ç›‘æ§)
8. [JMX Exporter Javaåº”ç”¨ç›‘æ§](#8-jmx-exporter-javaåº”ç”¨ç›‘æ§)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ Exporterç”Ÿæ€ç³»ç»Ÿæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Exporterï¼Ÿ


> ğŸ­ **ç”Ÿæ´»ç±»æ¯”**ï¼š
> 
> Exporterå°±åƒå„ç§ä¸“ä¸šçš„"ç¿»è¯‘å®˜"ï¼Œè´Ÿè´£æŠŠä¸åŒç³»ç»Ÿçš„"æ–¹è¨€"ç¿»è¯‘æˆPrometheusèƒ½ç†è§£çš„"æ ‡å‡†è¯­è¨€"

**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
- **Exporter**ï¼šè´Ÿè´£æ”¶é›†ç›®æ ‡ç³»ç»ŸæŒ‡æ ‡å¹¶è½¬æ¢ä¸ºPrometheusæ ¼å¼çš„ç»„ä»¶
- **ä½œç”¨**ï¼šå……å½“Prometheusä¸å„ç§ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢
- **æœ¬è´¨**ï¼šä¸€ä¸ªHTTPæœåŠ¡ï¼Œæä¾› `/metrics` ç«¯ç‚¹ä¾›PrometheusæŠ“å–

### 1.2 Exporterçš„å·¥ä½œæœºåˆ¶


```
ç›®æ ‡ç³»ç»Ÿ â†’ Exporter â†’ Prometheus â†’ Grafana
   â†“         â†“          â†“         â†“
 åŸå§‹æ•°æ®   æ ‡å‡†æ ¼å¼   æ—¶åºå­˜å‚¨   å¯è§†åŒ–

å…·ä½“æµç¨‹ï¼š
1. Exporterè¿æ¥åˆ°ç›®æ ‡ç³»ç»Ÿ
2. æ”¶é›†ç³»ç»ŸæŒ‡æ ‡æ•°æ®
3. è½¬æ¢ä¸ºPrometheus metricsæ ¼å¼
4. é€šè¿‡HTTPæ¥å£æš´éœ²ç»™Prometheus
5. Prometheuså®šæœŸæŠ“å–è¿™äº›æŒ‡æ ‡
```

### 1.3 Exporteråˆ†ç±»


| ç±»å‹ | **è¯´æ˜** | **ä»£è¡¨äº§å“** | **é€‚ç”¨åœºæ™¯** |
|------|----------|-------------|-------------|
| ğŸ–¥ï¸ **ç³»ç»Ÿçº§** | `ç›‘æ§æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶` | `Node Exporter` | `æœåŠ¡å™¨åŸºç¡€ç›‘æ§` |
| ğŸ³ **å®¹å™¨çº§** | `ç›‘æ§å®¹å™¨è¿è¡ŒçŠ¶æ€` | `cAdvisor` | `Docker/K8sç¯å¢ƒ` |
| ğŸŒ **ç½‘ç»œçº§** | `ç›‘æ§ç½‘ç»œæœåŠ¡å¯ç”¨æ€§` | `Blackbox Exporter` | `å¤–éƒ¨æœåŠ¡æ£€æŸ¥` |
| ğŸ—„ï¸ **æ•°æ®åº“** | `ç›‘æ§æ•°æ®åº“æ€§èƒ½` | `MySQL/Redis Exporter` | `æ•°æ®åº“è¿ç»´` |
| â˜• **åº”ç”¨çº§** | `ç›‘æ§åº”ç”¨ç¨‹åºæŒ‡æ ‡` | `JMX Exporter` | `Javaåº”ç”¨ç›‘æ§` |

---

## 2. ğŸ–¥ï¸ Node Exporter ç³»ç»Ÿç›‘æ§


### 2.1 Node ExporteråŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯Node Exporterï¼Ÿ**
- **å®šä¹‰**ï¼šä¸“é—¨ç›‘æ§Linux/Unixç³»ç»Ÿç¡¬ä»¶å’Œæ“ä½œç³»ç»ŸæŒ‡æ ‡çš„exporter
- **åœ°ä½**ï¼šPrometheusç”Ÿæ€ä¸­æœ€é‡è¦çš„exporterä¹‹ä¸€
- **è¦†ç›–é¢**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿç­‰

> ğŸ’¡ **ç®€å•ç†è§£**ï¼š
> 
> Node Exporterå°±åƒæœåŠ¡å™¨çš„"ä½“æ£€åŒ»ç”Ÿ"ï¼Œå®šæœŸæ£€æŸ¥CPUæ¸©åº¦ã€å†…å­˜ä½¿ç”¨ã€ç¡¬ç›˜ç©ºé—´ç­‰å„é¡¹"å¥åº·æŒ‡æ ‡"

### 2.2 å®‰è£…ä¸é…ç½®


**å¿«é€Ÿå®‰è£…æ–¹å¼**ï¼š

**æ–¹å¼1ï¼šäºŒè¿›åˆ¶å®‰è£…**
```bash
# ä¸‹è½½å¹¶å®‰è£…
wget https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz
tar xzf node_exporter-1.6.1.linux-amd64.tar.gz
sudo mv node_exporter-1.6.1.linux-amd64/node_exporter /usr/local/bin/

# å¯åŠ¨æœåŠ¡
nohup node_exporter &
```

**æ–¹å¼2ï¼šDockeræ–¹å¼**
```bash
docker run -d \
  --name node-exporter \
  -p 9100:9100 \
  prom/node-exporter
```

### 2.3 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ”¸ CPUç›¸å…³æŒ‡æ ‡**
```
node_cpu_seconds_total        # CPUä½¿ç”¨æ—¶é—´ï¼ˆæŒ‰æ¨¡å¼åˆ†ç±»ï¼‰
node_load1                    # 1åˆ†é’Ÿè´Ÿè½½
node_load5                    # 5åˆ†é’Ÿè´Ÿè½½  
node_load15                   # 15åˆ†é’Ÿè´Ÿè½½

å®é™…åº”ç”¨ï¼š
- CPUä½¿ç”¨ç‡ = 100 - idle%
- è´Ÿè½½è¿‡é«˜ = load > CPUæ ¸å¿ƒæ•°
```

**ğŸ”¸ å†…å­˜ç›¸å…³æŒ‡æ ‡**
```
node_memory_MemTotal_bytes     # æ€»å†…å­˜
node_memory_MemFree_bytes      # ç©ºé—²å†…å­˜
node_memory_MemAvailable_bytes # å¯ç”¨å†…å­˜
node_memory_Buffers_bytes      # ç¼“å†²åŒº
node_memory_Cached_bytes       # ç¼“å­˜

å†…å­˜ä½¿ç”¨ç‡è®¡ç®—ï¼š
ä½¿ç”¨ç‡ = (Total - Available) / Total * 100%
```

**ğŸ”¸ ç£ç›˜ç›¸å…³æŒ‡æ ‡**
```
node_filesystem_size_bytes     # æ–‡ä»¶ç³»ç»Ÿæ€»å¤§å°
node_filesystem_free_bytes     # æ–‡ä»¶ç³»ç»Ÿç©ºé—²ç©ºé—´
node_disk_io_time_seconds_total # ç£ç›˜IOæ—¶é—´
node_disk_reads_completed_total # è¯»æ“ä½œæ¬¡æ•°
```

### 2.4 å¸¸ç”¨å‘Šè­¦è§„åˆ™


```yaml
# CPUä½¿ç”¨ç‡è¿‡é«˜
- alert: HighCPUUsage
  expr: 100 - (avg by(instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
  for: 5m
  labels:
    severity: warning
  annotations:
    summary: "CPUä½¿ç”¨ç‡è¿‡é«˜"
    description: "{{ $labels.instance }} CPUä½¿ç”¨ç‡è¶…è¿‡80%"

# å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜  
- alert: HighMemoryUsage
  expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 85
  for: 5m
  labels:
    severity: warning
  annotations:
    summary: "å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
```

---

## 3. ğŸ³ cAdvisor å®¹å™¨ç›‘æ§


### 3.1 cAdvisoråŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯cAdvisorï¼Ÿ**
- **å…¨ç§°**ï¼šContainer Advisorï¼ˆå®¹å™¨é¡¾é—®ï¼‰
- **å¼€å‘è€…**ï¼šGoogleå¼€æºé¡¹ç›®
- **ä½œç”¨**ï¼šè‡ªåŠ¨å‘ç°å¹¶ç›‘æ§å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ
- **ä¼˜åŠ¿**ï¼šé›¶é…ç½®ï¼Œè‡ªåŠ¨å‘ç°æ‰€æœ‰å®¹å™¨

> ğŸ” **å½¢è±¡æ¯”å–»**ï¼š
> 
> cAdvisorå°±åƒå®¹å™¨ä¸–ç•Œçš„"ç›‘å·¥"ï¼Œæ—¶åˆ»ç›¯ç€æ¯ä¸ªå®¹å™¨çš„å·¥ä½œçŠ¶æ€ï¼Œè®°å½•å®ƒä»¬æ¶ˆè€—äº†å¤šå°‘CPUã€å†…å­˜ç­‰èµ„æº

### 3.2 éƒ¨ç½²æ–¹å¼


**Dockeræ–¹å¼éƒ¨ç½²**ï¼š
```bash
docker run \
  --volume=/:/rootfs:ro \
  --volume=/var/run:/var/run:ro \
  --volume=/sys:/sys:ro \
  --volume=/var/lib/docker/:/var/lib/docker:ro \
  --volume=/dev/disk/:/dev/disk:ro \
  --publish=8080:8080 \
  --detach=true \
  --name=cadvisor \
  --privileged \
  gcr.io/cadvisor/cadvisor:latest
```

**Kubernetes DaemonSetéƒ¨ç½²**ï¼š
```yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: cadvisor
spec:
  selector:
    matchLabels:
      name: cadvisor
  template:
    metadata:
      labels:
        name: cadvisor
    spec:
      containers:
      - name: cadvisor
        image: gcr.io/cadvisor/cadvisor:latest
        ports:
        - containerPort: 8080
        volumeMounts:
        - name: rootfs
          mountPath: /rootfs
          readOnly: true
```

### 3.3 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ”¸ å®¹å™¨èµ„æºä½¿ç”¨**
```
container_cpu_usage_seconds_total    # å®¹å™¨CPUä½¿ç”¨æ—¶é—´
container_memory_usage_bytes         # å®¹å™¨å†…å­˜ä½¿ç”¨é‡
container_memory_working_set_bytes   # å®¹å™¨å·¥ä½œé›†å†…å­˜
container_fs_usage_bytes             # å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨é‡
container_network_receive_bytes_total # å®¹å™¨ç½‘ç»œæ¥æ”¶å­—èŠ‚
container_network_transmit_bytes_total # å®¹å™¨ç½‘ç»œå‘é€å­—èŠ‚
```

**ğŸ”¸ å®ç”¨æŸ¥è¯¢ç¤ºä¾‹**
```bash
# æŸ¥çœ‹å®¹å™¨CPUä½¿ç”¨ç‡
rate(container_cpu_usage_seconds_total[5m]) * 100

# æŸ¥çœ‹å®¹å™¨å†…å­˜ä½¿ç”¨ç‡  
container_memory_usage_bytes / container_spec_memory_limit_bytes * 100

# æŸ¥çœ‹å®¹å™¨ç½‘ç»œIO
rate(container_network_receive_bytes_total[5m])
```

### 3.4 ä¸Kubernetesé›†æˆ


**ServiceMonitoré…ç½®**ï¼š
```yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: cadvisor
spec:
  selector:
    matchLabels:
      app: cadvisor
  endpoints:
  - port: http
    interval: 30s
    path: /metrics
```

---

## 4. ğŸŒ Blackbox Exporter é»‘ç›’ç›‘æ§


### 4.1 é»‘ç›’ç›‘æ§æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯é»‘ç›’ç›‘æ§ï¼Ÿ**
- **é»‘ç›’**ï¼šä»å¤–éƒ¨è§’åº¦ç›‘æ§ï¼Œä¸å…³å¿ƒå†…éƒ¨å®ç°
- **ç™½ç›’**ï¼šä»å†…éƒ¨è§’åº¦ç›‘æ§ï¼Œäº†è§£å†…éƒ¨çŠ¶æ€
- **Blackbox Exporter**ï¼šä¸“é—¨è¿›è¡Œå¤–éƒ¨æ¢æµ‹çš„å·¥å…·

> ğŸª **ç”Ÿæ´»ç±»æ¯”**ï¼š
> 
> é»‘ç›’ç›‘æ§å°±åƒé¡¾å®¢ä½“éªŒï¼Œä¸ç®¡é¤å…åå¨æ€ä¹ˆè¿ä½œï¼Œåªå…³å¿ƒèœå“æ˜¯å¦åŠæ—¶ä¸Šæ¡Œã€å‘³é“æ˜¯å¦æ­£å¸¸

### 4.2 æ”¯æŒçš„æ¢æµ‹ç±»å‹


| æ¢æµ‹ç±»å‹ | **è¯´æ˜** | **åº”ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|----------|----------|-------------|----------|
| ğŸŒ **HTTP** | `HTTP/HTTPSæœåŠ¡æ£€æŸ¥` | `ç½‘ç«™å¯ç”¨æ€§ç›‘æ§` | `æ£€æŸ¥é¦–é¡µæ˜¯å¦æ­£å¸¸` |
| ğŸ”Œ **TCP** | `TCPç«¯å£è¿é€šæ€§` | `æœåŠ¡ç«¯å£æ£€æŸ¥` | `æ•°æ®åº“ç«¯å£æ˜¯å¦å¼€æ”¾` |
| ğŸ“§ **ICMP** | `ç½‘ç»œè¿é€šæ€§æ£€æŸ¥` | `ä¸»æœºå­˜æ´»æ£€æµ‹` | `pingæ£€æŸ¥` |
| ğŸ”’ **DNS** | `DNSè§£ææ£€æŸ¥` | `åŸŸåè§£æç›‘æ§` | `åŸŸåæ˜¯å¦æ­£å¸¸è§£æ` |

### 4.3 é…ç½®ç¤ºä¾‹


**blackbox.ymlé…ç½®æ–‡ä»¶**ï¼š
```yaml
modules:
  http_2xx:
    prober: http
    http:
      valid_http_versions: ["HTTP/1.1", "HTTP/2.0"]
      valid_status_codes: []  # é»˜è®¤2xxçŠ¶æ€ç 
      method: GET
      fail_if_ssl: false
      fail_if_not_ssl: false
      
  tcp_connect:
    prober: tcp
    tcp:
      query_response:
      - expect: "^+OK"
      
  icmp:
    prober: icmp
    
  dns:
    prober: dns
    dns:
      query_name: "example.com"
      query_type: "A"
```

### 4.4 Prometheusé›†æˆ


**prometheus.ymlé…ç½®**ï¼š
```yaml
scrape_configs:
  - job_name: 'blackbox'
    static_configs:
      - targets:
        - http://example.com    # è¦æ£€æŸ¥çš„ç›®æ ‡
        - https://google.com
    metrics_path: /probe
    params:
      module: [http_2xx]        # ä½¿ç”¨çš„æ£€æŸ¥æ¨¡å—
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: blackbox-exporter:9115  # Blackbox exporteråœ°å€
```

### 4.5 å¸¸ç”¨å‘Šè­¦è§„åˆ™


```yaml
# ç½‘ç«™ä¸å¯è®¿é—®
- alert: WebsiteDown
  expr: probe_success == 0
  for: 5m
  labels:
    severity: critical
  annotations:
    summary: "ç½‘ç«™{{ $labels.instance }}ä¸å¯è®¿é—®"
    
# HTTPå“åº”æ—¶é—´è¿‡é•¿
- alert: SlowResponse
  expr: probe_duration_seconds > 5
  for: 2m
  labels:
    severity: warning
  annotations:
    summary: "{{ $labels.instance }}å“åº”æ—¶é—´è¿‡é•¿"
```

---

## 5. ğŸ—„ï¸ MySQL Exporter æ•°æ®åº“ç›‘æ§


### 5.1 MySQL Exporteræ¦‚è¿°


**ä¸ºä»€ä¹ˆéœ€è¦MySQLç›‘æ§ï¼Ÿ**
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå‘ç°æ…¢æŸ¥è¯¢ã€é”ç­‰å¾…ç­‰é—®é¢˜
- **å®¹é‡è§„åˆ’**ï¼šç›‘æ§è¿æ¥æ•°ã€å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒ…å†µ
- **æ•…éšœé¢„è­¦**ï¼šåŠæ—¶å‘ç°æ•°æ®åº“å¼‚å¸¸çŠ¶æ€

> ğŸ“Š **æ•°æ®åº“ç›‘æ§çš„é‡è¦æ€§**ï¼š
> 
> æ•°æ®åº“æ˜¯åº”ç”¨çš„å¿ƒè„ï¼Œä¸€æ—¦å‡ºé—®é¢˜æ•´ä¸ªç³»ç»Ÿéƒ½ä¼šå—å½±å“ï¼Œæ‰€ä»¥å¿…é¡»æ—¶åˆ»ç›‘æ§å…¶å¥åº·çŠ¶æ€

### 5.2 å®‰è£…é…ç½®


**Step 1: åˆ›å»ºç›‘æ§ç”¨æˆ·**
```sql
-- åˆ›å»ºä¸“é—¨çš„ç›‘æ§ç”¨æˆ·
CREATE USER 'exporter'@'localhost' IDENTIFIED BY 'password';
GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO 'exporter'@'localhost';
FLUSH PRIVILEGES;
```

**Step 2: éƒ¨ç½²Exporter**
```bash
# Dockeræ–¹å¼
docker run -d \
  --name mysql-exporter \
  -p 9104:9104 \
  -e DATA_SOURCE_NAME="exporter:password@(mysql:3306)/" \
  prom/mysqld-exporter
```

**Step 3: é…ç½®æ–‡ä»¶æ–¹å¼**
```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > ~/.my.cnf << EOF
[client]
user=exporter
password=password
host=localhost
port=3306
EOF

# å¯åŠ¨exporter
mysqld_exporter --config.my-cnf=~/.my.cnf
```

### 5.3 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ”¸ è¿æ¥ç›¸å…³æŒ‡æ ‡**
```
mysql_global_status_threads_connected     # å½“å‰è¿æ¥æ•°
mysql_global_variables_max_connections    # æœ€å¤§è¿æ¥æ•°
mysql_global_status_aborted_connects      # è¿æ¥å¤±è´¥æ¬¡æ•°

è¿æ¥ä½¿ç”¨ç‡ = threads_connected / max_connections * 100%
```

**ğŸ”¸ æ€§èƒ½ç›¸å…³æŒ‡æ ‡**
```
mysql_global_status_queries              # æŸ¥è¯¢æ€»æ•°
mysql_global_status_slow_queries         # æ…¢æŸ¥è¯¢æ•°é‡
mysql_global_status_innodb_rows_read     # InnoDBè¯»å–è¡Œæ•°
mysql_global_status_innodb_rows_inserted # InnoDBæ’å…¥è¡Œæ•°

QPS = rate(mysql_global_status_queries[5m])
```

**ğŸ”¸ å­˜å‚¨ç›¸å…³æŒ‡æ ‡**
```
mysql_global_status_innodb_data_reads    # æ•°æ®è¯»å–æ¬¡æ•°
mysql_global_status_innodb_data_writes   # æ•°æ®å†™å…¥æ¬¡æ•°
mysql_global_status_innodb_buffer_pool_pages_total # ç¼“å†²æ± æ€»é¡µæ•°
mysql_global_status_innodb_buffer_pool_pages_free  # ç¼“å†²æ± ç©ºé—²é¡µæ•°
```

### 5.4 å®ç”¨æŸ¥è¯¢å’Œå‘Šè­¦


**å¸¸ç”¨PromQLæŸ¥è¯¢**ï¼š
```bash
# MySQLå¯ç”¨æ€§
up{job="mysql"}

# è¿æ¥æ•°ä½¿ç”¨ç‡
mysql_global_status_threads_connected / mysql_global_variables_max_connections * 100

# QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰
rate(mysql_global_status_queries[5m])

# æ…¢æŸ¥è¯¢ç‡
rate(mysql_global_status_slow_queries[5m]) / rate(mysql_global_status_queries[5m]) * 100
```

**å…³é”®å‘Šè­¦è§„åˆ™**ï¼š
```yaml
# MySQLæœåŠ¡ä¸å¯ç”¨
- alert: MySQLDown
  expr: up{job="mysql"} == 0
  for: 1m
  
# è¿æ¥æ•°è¿‡é«˜
- alert: MySQLHighConnections
  expr: mysql_global_status_threads_connected / mysql_global_variables_max_connections * 100 > 80
  for: 5m
  
# æ…¢æŸ¥è¯¢è¿‡å¤š
- alert: MySQLSlowQueries
  expr: rate(mysql_global_status_slow_queries[5m]) > 10
  for: 5m
```

---

## 6. ğŸ”´ Redis Exporter ç¼“å­˜ç›‘æ§


### 6.1 Redisç›‘æ§çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆè¦ç›‘æ§Redisï¼Ÿ**
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼šå½±å“åº”ç”¨æ€§èƒ½çš„å…³é”®æŒ‡æ ‡
- **å†…å­˜ä½¿ç”¨**ï¼šRedisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå†…å­˜ç›‘æ§å¾ˆé‡è¦
- **è¿æ¥çŠ¶æ€**ï¼šè¿æ¥æ•°è¿‡å¤šä¼šå½±å“æ€§èƒ½
- **ä¸»ä»åŒæ­¥**ï¼šé›†ç¾¤ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§

> âš¡ **Redisçš„ç‰¹æ®Šæ€§**ï¼š
> 
> Redisä½œä¸ºç¼“å­˜ï¼Œå…¶æ€§èƒ½ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€‚ç¼“å­˜å¤±æ•ˆå¯èƒ½å¯¼è‡´æ•°æ®åº“å‹åŠ›éª¤å¢ï¼Œå¼•å‘è¿é”ååº”

### 6.2 éƒ¨ç½²Redis Exporter


**Dockeræ–¹å¼éƒ¨ç½²**ï¼š
```bash
docker run -d \
  --name redis-exporter \
  -p 9121:9121 \
  oliver006/redis_exporter \
  --redis.addr=redis://redis:6379
```

**æ”¯æŒè®¤è¯çš„Redis**ï¼š
```bash
docker run -d \
  --name redis-exporter \
  -p 9121:9121 \
  oliver006/redis_exporter \
  --redis.addr=redis://redis:6379 \
  --redis.password=mypassword
```

### 6.3 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ”¸ è¿æ¥å’Œå®¢æˆ·ç«¯**
```
redis_connected_clients          # å½“å‰è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡
redis_rejected_connections_total # å› è¾¾åˆ°æœ€å¤§è¿æ¥æ•°é™åˆ¶è¢«æ‹’ç»çš„è¿æ¥
redis_blocked_clients           # å› BLPOPç­‰å‘½ä»¤é˜»å¡çš„å®¢æˆ·ç«¯æ•°
```

**ğŸ”¸ å†…å­˜ä½¿ç”¨æƒ…å†µ**
```
redis_memory_used_bytes         # å·²ä½¿ç”¨å†…å­˜
redis_memory_max_bytes          # æœ€å¤§å†…å­˜é™åˆ¶
redis_memory_used_rss_bytes     # RSSå†…å­˜ä½¿ç”¨é‡

å†…å­˜ä½¿ç”¨ç‡ = redis_memory_used_bytes / redis_memory_max_bytes * 100%
```

**ğŸ”¸ æ€§èƒ½æŒ‡æ ‡**
```
redis_commands_processed_total  # å¤„ç†çš„å‘½ä»¤æ€»æ•°
redis_keyspace_hits_total      # å‘½ä¸­æ¬¡æ•°
redis_keyspace_misses_total    # æœªå‘½ä¸­æ¬¡æ•°

ç¼“å­˜å‘½ä¸­ç‡ = hits / (hits + misses) * 100%
QPS = rate(redis_commands_processed_total[5m])
```

**ğŸ”¸ æŒä¹…åŒ–æŒ‡æ ‡**
```
redis_rdb_last_save_timestamp_seconds # æœ€åä¸€æ¬¡RDBä¿å­˜æ—¶é—´
redis_rdb_changes_since_last_save     # è‡ªä¸Šæ¬¡ä¿å­˜åçš„å˜æ›´æ•°
redis_aof_enabled                     # æ˜¯å¦å¯ç”¨AOF
```

### 6.4 å®ç”¨æŸ¥è¯¢ç¤ºä¾‹


```bash
# Rediså¯ç”¨æ€§æ£€æŸ¥
up{job="redis"}

# ç¼“å­˜å‘½ä¸­ç‡
redis_keyspace_hits_total / (redis_keyspace_hits_total + redis_keyspace_misses_total) * 100

# å†…å­˜ä½¿ç”¨ç‡
redis_memory_used_bytes / redis_memory_max_bytes * 100

# QPS
rate(redis_commands_processed_total[5m])

# è¿æ¥æ•°ä½¿ç”¨æƒ…å†µ
redis_connected_clients
```

### 6.5 å‘Šè­¦é…ç½®


```yaml
# RedisæœåŠ¡ä¸å¯ç”¨
- alert: RedisDown
  expr: up{job="redis"} == 0
  for: 1m
  
# å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜
- alert: RedisHighMemoryUsage
  expr: redis_memory_used_bytes / redis_memory_max_bytes * 100 > 90
  for: 5m
  
# ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½
- alert: RedisLowHitRate
  expr: redis_keyspace_hits_total / (redis_keyspace_hits_total + redis_keyspace_misses_total) * 100 < 80
  for: 10m
  
# è¿æ¥æ•°è¿‡å¤š
- alert: RedisHighConnections
  expr: redis_connected_clients > 1000
  for: 5m
```

---

## 7. ğŸŒ Nginx Exporter WebæœåŠ¡ç›‘æ§


### 7.1 Nginxç›‘æ§æ¦‚è¿°


**ä¸ºä»€ä¹ˆç›‘æ§Nginxï¼Ÿ**
- **è¯·æ±‚å¤„ç†æ€§èƒ½**ï¼šQPSã€å“åº”æ—¶é—´ç­‰å…³é”®æŒ‡æ ‡
- **è¿æ¥çŠ¶æ€**ï¼šæ´»è·ƒè¿æ¥ã€ç­‰å¾…è¿æ¥æ•°é‡
- **é”™è¯¯ç‡ç›‘æ§**ï¼š4xxã€5xxé”™è¯¯çš„ç»Ÿè®¡
- **ä¸Šæ¸¸æœåŠ¡çŠ¶æ€**ï¼šåç«¯æœåŠ¡å™¨çš„å¥åº·çŠ¶å†µ

> ğŸšª **Nginxçš„è§’è‰²**ï¼š
> 
> Nginxé€šå¸¸ä½œä¸ºWebæœåŠ¡çš„"é—¨å«"ï¼Œæ‰€æœ‰ç”¨æˆ·è¯·æ±‚éƒ½è¦ç»è¿‡å®ƒï¼Œç›‘æ§Nginxå°±èƒ½äº†è§£æ•´ä¸ªWebæœåŠ¡çš„å¥åº·çŠ¶æ€

### 7.2 å¯ç”¨NginxçŠ¶æ€æ¨¡å—


**Step 1: é…ç½®statusé¡µé¢**
```nginx
# åœ¨nginx.confä¸­æ·»åŠ 
server {
    listen 80;
    server_name localhost;
    
    location /nginx_status {
        stub_status on;
        access_log off;
        allow 127.0.0.1;  # ä»…å…è®¸æœ¬åœ°è®¿é—®
        deny all;
    }
}
```

**Step 2: éªŒè¯é…ç½®**
```bash
# é‡è½½é…ç½®
nginx -s reload

# æµ‹è¯•è®¿é—®
curl http://localhost/nginx_status
```

**è¿”å›ç¤ºä¾‹**ï¼š
```
Active connections: 291 
server accepts handled requests
 16630948 16630948 31070465 
Reading: 6 Writing: 179 Waiting: 106
```

### 7.3 éƒ¨ç½²Nginx Exporter


**æ–¹å¼1: äºŒè¿›åˆ¶éƒ¨ç½²**
```bash
# ä¸‹è½½å¹¶å®‰è£…
wget https://github.com/nginxinc/nginx-prometheus-exporter/releases/download/v0.10.0/nginx-prometheus-exporter-0.10.0-linux-amd64.tar.gz
tar xzf nginx-prometheus-exporter-0.10.0-linux-amd64.tar.gz

# å¯åŠ¨exporter
./nginx-prometheus-exporter -nginx.scrape-uri=http://localhost/nginx_status
```

**æ–¹å¼2: Dockeréƒ¨ç½²**
```bash
docker run -d \
  --name nginx-exporter \
  -p 9113:9113 \
  nginx/nginx-prometheus-exporter:latest \
  -nginx.scrape-uri=http://nginx:80/nginx_status
```

### 7.4 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ”¸ è¿æ¥ç›¸å…³æŒ‡æ ‡**
```
nginx_connections_active     # æ´»è·ƒè¿æ¥æ•°
nginx_connections_reading    # æ­£åœ¨è¯»å–è¯·æ±‚çš„è¿æ¥æ•°
nginx_connections_writing    # æ­£åœ¨å†™å…¥å“åº”çš„è¿æ¥æ•°
nginx_connections_waiting    # ç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚çš„è¿æ¥æ•°ï¼ˆkeep-aliveï¼‰
```

**ğŸ”¸ è¯·æ±‚å¤„ç†æŒ‡æ ‡**
```
nginx_connections_accepted_total # æ¥å—çš„è¿æ¥æ€»æ•°
nginx_connections_handled_total  # å¤„ç†çš„è¿æ¥æ€»æ•°
nginx_http_requests_total        # HTTPè¯·æ±‚æ€»æ•°

è¿æ¥æˆåŠŸç‡ = handled / accepted * 100%
QPS = rate(nginx_http_requests_total[5m])
```

### 7.5 é«˜çº§ç›‘æ§ï¼ˆnginx-module-vtsï¼‰


**å®‰è£…VTSæ¨¡å—**ï¼ˆéœ€è¦é‡æ–°ç¼–è¯‘nginxï¼‰ï¼š
```bash
# ä¸‹è½½æ¨¡å—
git clone https://github.com/vozlt/nginx-module-vts.git

# é‡æ–°ç¼–è¯‘nginxï¼ˆæ·»åŠ æ¨¡å—ï¼‰
./configure --add-module=nginx-module-vts
make && make install
```

**VTSé…ç½®**ï¼š
```nginx
http {
    vhost_traffic_status_zone;
    
    server {
        location /status {
            vhost_traffic_status_display;
            vhost_traffic_status_display_format json;
        }
    }
}
```

**VTSæä¾›çš„ä¸°å¯ŒæŒ‡æ ‡**ï¼š
```
nginx_vts_server_requests_total      # æŒ‰çŠ¶æ€ç åˆ†ç±»çš„è¯·æ±‚æ•°
nginx_vts_server_request_duration    # è¯·æ±‚å¤„ç†æ—¶é—´
nginx_vts_server_bytes_sent          # å‘é€å­—èŠ‚æ•°
nginx_vts_upstream_requests_total    # ä¸Šæ¸¸æœåŠ¡å™¨è¯·æ±‚æ•°
nginx_vts_upstream_response_time     # ä¸Šæ¸¸å“åº”æ—¶é—´
```

### 7.6 å‘Šè­¦é…ç½®


```yaml
# NginxæœåŠ¡ä¸å¯ç”¨
- alert: NginxDown
  expr: up{job="nginx"} == 0
  for: 1m
  
# æ´»è·ƒè¿æ¥æ•°è¿‡é«˜
- alert: NginxHighConnections
  expr: nginx_connections_active > 1000
  for: 5m
  
# é”™è¯¯ç‡è¿‡é«˜ï¼ˆéœ€è¦VTSæ¨¡å—ï¼‰
- alert: NginxHighErrorRate
  expr: rate(nginx_vts_server_requests_total{code=~"5.."}[5m]) / rate(nginx_vts_server_requests_total[5m]) * 100 > 5
  for: 5m
```

---

## 8. â˜• JMX Exporter Javaåº”ç”¨ç›‘æ§


### 8.1 JMXç›‘æ§åŸºç¡€


**ä»€ä¹ˆæ˜¯JMXï¼Ÿ**
- **JMX**ï¼šJava Management Extensionsï¼ˆJavaç®¡ç†æ‰©å±•ï¼‰
- **ä½œç”¨**ï¼šJavaå¹³å°æ ‡å‡†çš„ç›‘æ§å’Œç®¡ç†æ¥å£
- **MBean**ï¼šManaged Beanï¼Œè¢«ç®¡ç†çš„Javaå¯¹è±¡

> â˜• **Javaåº”ç”¨çš„ç‰¹æ®Šæ€§**ï¼š
> 
> Javaåº”ç”¨è¿è¡Œåœ¨JVMä¸Šï¼Œæœ‰è‡ªå·±çš„å†…å­˜ç®¡ç†ï¼ˆå †ã€æ ˆã€GCï¼‰å’Œçº¿ç¨‹æ¨¡å‹ï¼Œéœ€è¦ä¸“é—¨çš„ç›‘æ§å·¥å…·

**JMX Exporterçš„ä¸¤ç§æ¨¡å¼**ï¼š

```
JavaAgentæ¨¡å¼ï¼š
    JVMå¯åŠ¨æ—¶åŠ è½½ â†’ ä½œä¸ºåº”ç”¨çš„ä¸€éƒ¨åˆ†è¿è¡Œ
    
Standaloneæ¨¡å¼ï¼š
    ç‹¬ç«‹è¿›ç¨‹ â†’ é€šè¿‡RMIè¿æ¥åˆ°JVM
```

### 8.2 JavaAgentæ¨¡å¼éƒ¨ç½²


**Step 1: ä¸‹è½½JMX Exporter**
```bash
wget https://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.19.0/jmx_prometheus_javaagent-0.19.0.jar
```

**Step 2: åˆ›å»ºé…ç½®æ–‡ä»¶**
```yaml
# jmx_config.yaml
rules:
  # JVMåŸºç¡€æŒ‡æ ‡
  - pattern: 'java.lang<type=Memory><>HeapMemoryUsage'
    name: jvm_memory_heap_used
    labels:
      area: heap
    help: "JVM heap memory used"
    type: GAUGE
    
  # åƒåœ¾å›æ”¶æŒ‡æ ‡
  - pattern: 'java.lang<type=GarbageCollector, name=(.*)><>CollectionCount'
    name: jvm_gc_collection_total
    labels:
      gc: "$1"
    help: "GC collection count"
    type: COUNTER
```

**Step 3: å¯åŠ¨Javaåº”ç”¨**
```bash
java -javaagent:jmx_prometheus_javaagent-0.19.0.jar=8080:jmx_config.yaml \
     -jar your-application.jar
```

### 8.3 æ ¸å¿ƒJVMæŒ‡æ ‡


**ğŸ”¸ å†…å­˜ä½¿ç”¨æŒ‡æ ‡**
```
jvm_memory_heap_used              # å †å†…å­˜ä½¿ç”¨é‡
jvm_memory_heap_max               # å †å†…å­˜æœ€å¤§å€¼
jvm_memory_nonheap_used           # éå †å†…å­˜ä½¿ç”¨é‡
jvm_memory_pool_bytes_used        # å„å†…å­˜æ± ä½¿ç”¨é‡

å †å†…å­˜ä½¿ç”¨ç‡ = heap_used / heap_max * 100%
```

**ğŸ”¸ åƒåœ¾å›æ”¶æŒ‡æ ‡**
```
jvm_gc_collection_seconds_sum     # GCæ€»æ—¶é—´
jvm_gc_collection_seconds_count   # GCæ¬¡æ•°

å¹³å‡GCæ—¶é—´ = sum / count
GCé¢‘ç‡ = rate(count[5m])
```

**ğŸ”¸ çº¿ç¨‹ç›¸å…³æŒ‡æ ‡**
```
jvm_threads_current               # å½“å‰çº¿ç¨‹æ•°
jvm_threads_peak                  # å³°å€¼çº¿ç¨‹æ•°
jvm_threads_daemon                # å®ˆæŠ¤çº¿ç¨‹æ•°
jvm_threads_deadlocked            # æ­»é”çº¿ç¨‹æ•°
```

**ğŸ”¸ ç±»åŠ è½½æŒ‡æ ‡**
```
jvm_classes_loaded                # å·²åŠ è½½ç±»æ•°é‡
jvm_classes_loaded_total          # ç´¯è®¡åŠ è½½ç±»æ•°é‡
jvm_classes_unloaded_total        # ç´¯è®¡å¸è½½ç±»æ•°é‡
```

### 8.4 åº”ç”¨ç‰¹å®šæŒ‡æ ‡


**è‡ªå®šä¹‰MBeanç¤ºä¾‹**ï¼š
```java
// åˆ›å»ºè‡ªå®šä¹‰MBean
@Component
public class ApplicationMetrics implements ApplicationMetricsMBean {
    private final AtomicLong requestCount = new AtomicLong(0);
    private final AtomicLong errorCount = new AtomicLong(0);
    
    @Override
    public long getRequestCount() {
        return requestCount.get();
    }
    
    @Override
    public long getErrorCount() {
        return errorCount.get();
    }
    
    public void incrementRequest() {
        requestCount.incrementAndGet();
    }
    
    public void incrementError() {
        errorCount.incrementAndGet();
    }
}
```

**é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡**ï¼š
```yaml
rules:
  - pattern: 'com.example<type=ApplicationMetrics><>RequestCount'
    name: app_requests_total
    help: "Total application requests"
    type: COUNTER
    
  - pattern: 'com.example<type=ApplicationMetrics><>ErrorCount'
    name: app_errors_total
    help: "Total application errors"
    type: COUNTER
```

### 8.5 Spring Booté›†æˆ


**Spring Boot Actuator + Micrometer**ï¼š
```xml
<!-- pom.xml -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-registry-prometheus</artifactId>
</dependency>
```

**application.ymlé…ç½®**ï¼š
```yaml
management:
  endpoints:
    web:
      exposure:
        include: prometheus,health,info
  endpoint:
    prometheus:
      enabled: true
  metrics:
    export:
      prometheus:
        enabled: true
```

**è‡ªå®šä¹‰æŒ‡æ ‡ä»£ç **ï¼š
```java
@RestController
public class MetricsController {
    private final Counter requestCounter;
    private final Timer responseTimer;
    
    public MetricsController(MeterRegistry meterRegistry) {
        this.requestCounter = Counter.builder("api_requests_total")
            .description("Total API requests")
            .register(meterRegistry);
            
        this.responseTimer = Timer.builder("api_response_time")
            .description("API response time")
            .register(meterRegistry);
    }
    
    @GetMapping("/api/data")
    public String getData() {
        requestCounter.increment();
        Timer.Sample sample = Timer.start();
        
        // ä¸šåŠ¡é€»è¾‘
        String result = processData();
        
        sample.stop(responseTimer);
        return result;
    }
}
```

### 8.6 JVMå‘Šè­¦è§„åˆ™


```yaml
# JVMå†…å­˜ä½¿ç”¨ç‡è¿‡é«˜
- alert: JVMHighHeapUsage
  expr: jvm_memory_heap_used / jvm_memory_heap_max * 100 > 85
  for: 5m
  labels:
    severity: warning
  annotations:
    summary: "JVMå †å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
    
# GCé¢‘ç‡è¿‡é«˜
- alert: HighGCFrequency
  expr: rate(jvm_gc_collection_seconds_count[5m]) > 1
  for: 5m
  labels:
    severity: warning
  annotations:
    summary: "GCé¢‘ç‡è¿‡é«˜"
    
# çº¿ç¨‹æ­»é”
- alert: JVMDeadlock
  expr: jvm_threads_deadlocked > 0
  for: 1m
  labels:
    severity: critical
  annotations:
    summary: "æ£€æµ‹åˆ°JVMçº¿ç¨‹æ­»é”"
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 Exporteré€‰æ‹©æŒ‡å—


**ğŸ”¸ ç³»ç»Ÿç›‘æ§ â†’ Node Exporter**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… æœåŠ¡å™¨åŸºç¡€ç›‘æ§ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œï¼‰
âœ… è£¸æœºã€è™šæ‹Ÿæœºç¯å¢ƒ
âœ… æ“ä½œç³»ç»Ÿçº§åˆ«çš„æ€§èƒ½åˆ†æ

æ ¸å¿ƒä»·å€¼ï¼š
- æœ€åŸºç¡€ä½†æœ€é‡è¦çš„ç›‘æ§
- é—®é¢˜æ’æŸ¥çš„ç¬¬ä¸€æ‰‹èµ„æ–™
- å®¹é‡è§„åˆ’çš„æ•°æ®åŸºç¡€
```

**ğŸ”¸ å®¹å™¨ç›‘æ§ â†’ cAdvisor**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… Dockerå®¹å™¨ç¯å¢ƒ
âœ… Kubernetesé›†ç¾¤
âœ… å®¹å™¨èµ„æºä½¿ç”¨åˆ†æ

æ ¸å¿ƒä»·å€¼ï¼š
- è‡ªåŠ¨å‘ç°å®¹å™¨
- ç»†ç²’åº¦çš„èµ„æºç›‘æ§
- å®¹å™¨æ€§èƒ½ä¼˜åŒ–ä¾æ®
```

**ğŸ”¸ å¤–éƒ¨ç›‘æ§ â†’ Blackbox Exporter**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… ç½‘ç«™å¯ç”¨æ€§æ£€æŸ¥
âœ… APIæ¥å£ç›‘æ§
âœ… ç½‘ç»œè¿é€šæ€§æµ‹è¯•

æ ¸å¿ƒä»·å€¼ï¼š
- ç”¨æˆ·è§†è§’çš„ç›‘æ§
- ç«¯åˆ°ç«¯çš„å¯ç”¨æ€§æ£€æŸ¥
- SLAæŒ‡æ ‡çš„æ•°æ®æ¥æº
```

### 9.2 æ•°æ®åº“ç›‘æ§æœ€ä½³å®è·µ


**ğŸ”¹ ç›‘æ§ç­–ç•¥**
```
åŸºç¡€ç›‘æ§ï¼š
- æœåŠ¡å¯ç”¨æ€§ï¼ˆup/downï¼‰
- è¿æ¥æ•°ä½¿ç”¨æƒ…å†µ
- åŸºæœ¬æ€§èƒ½æŒ‡æ ‡ï¼ˆQPSã€TPSï¼‰

æ€§èƒ½ç›‘æ§ï¼š
- æ…¢æŸ¥è¯¢åˆ†æ
- é”ç­‰å¾…æ£€æµ‹
- ç´¢å¼•ä½¿ç”¨æ•ˆç‡

å®¹é‡ç›‘æ§ï¼š
- å­˜å‚¨ç©ºé—´ä½¿ç”¨
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- è¿æ¥æ± çŠ¶æ€
```

**ğŸ”¹ å‘Šè­¦ä¼˜å…ˆçº§**
```
ğŸ”´ Criticalï¼ˆä¸¥é‡ï¼‰ï¼š
- æ•°æ®åº“æœåŠ¡ä¸å¯ç”¨
- è¿æ¥æ•°è¾¾åˆ°ä¸Šé™
- ç£ç›˜ç©ºé—´å³å°†è€—å°½

ğŸŸ¡ Warningï¼ˆè­¦å‘Šï¼‰ï¼š
- æ…¢æŸ¥è¯¢æ•°é‡å¢åŠ 
- è¿æ¥æ•°ä½¿ç”¨ç‡è¿‡é«˜
- ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™
```

### 9.3 Javaåº”ç”¨ç›‘æ§è¦ç‚¹


**ğŸ”¹ JVMæ ¸å¿ƒæŒ‡æ ‡**
```
å†…å­˜ç›‘æ§ï¼š
- å †å†…å­˜ä½¿ç”¨ç‡ < 85%
- GCé¢‘ç‡å’Œæ—¶é—´åˆç†
- æ— å†…å­˜æ³„æ¼è¿¹è±¡

çº¿ç¨‹ç›‘æ§ï¼š
- çº¿ç¨‹æ•°åœ¨åˆç†èŒƒå›´
- æ— æ­»é”ç°è±¡
- CPUä½¿ç”¨ç‡æ­£å¸¸

ç±»åŠ è½½ï¼š
- ç±»åŠ è½½æ•°é‡ç¨³å®š
- æ— é¢‘ç¹ç±»å¸è½½
```

**ğŸ”¹ åº”ç”¨çº§æŒ‡æ ‡**
```
ä¸šåŠ¡æŒ‡æ ‡ï¼š
- è¯·æ±‚æˆåŠŸç‡ > 99%
- å“åº”æ—¶é—´ < 500ms
- é”™è¯¯ç‡ < 1%

æ€§èƒ½æŒ‡æ ‡ï¼š
- QPSè¶‹åŠ¿ç¨³å®š
- èµ„æºä½¿ç”¨åˆç†
- ä¾èµ–æœåŠ¡æ­£å¸¸
```

### 9.4 ç›‘æ§æ¶æ„å»ºè®®


**ğŸ—ï¸ åˆ†å±‚ç›‘æ§ä½“ç³»**
```
åŸºç¡€è®¾æ–½å±‚ï¼š
Node Exporter â†’ æœåŠ¡å™¨ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿ

å®¹å™¨å±‚ï¼š
cAdvisor â†’ å®¹å™¨èµ„æºä½¿ç”¨

åº”ç”¨å±‚ï¼š
JMX Exporter â†’ Javaåº”ç”¨å’ŒJVM
Custom Exporter â†’ ä¸šåŠ¡æŒ‡æ ‡

æœåŠ¡å±‚ï¼š
MySQL/Redis Exporter â†’ ä¸­é—´ä»¶

ç½‘ç»œå±‚ï¼š
Blackbox Exporter â†’ ç«¯åˆ°ç«¯å¯ç”¨æ€§
```

### 9.5 å®æ–½å»ºè®®


**ğŸ¯ å¾ªåºæ¸è¿›çš„éƒ¨ç½²ç­–ç•¥**
```
ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç›‘æ§
1. éƒ¨ç½²Node Exporter
2. é…ç½®åŸºæœ¬çš„ç³»ç»Ÿå‘Šè­¦
3. å»ºç«‹ç›‘æ§å¤§ç›˜

ç¬¬äºŒé˜¶æ®µï¼šåº”ç”¨ç›‘æ§
1. æ ¹æ®æŠ€æœ¯æ ˆé€‰æ‹©å¯¹åº”Exporter
2. é…ç½®åº”ç”¨çº§å‘Šè­¦
3. å®Œå–„ç›‘æ§è¦†ç›–é¢

ç¬¬ä¸‰é˜¶æ®µï¼šä¸šåŠ¡ç›‘æ§
1. æ·»åŠ è‡ªå®šä¹‰ä¸šåŠ¡æŒ‡æ ‡
2. å»ºç«‹SLAç›‘æ§
3. ä¼˜åŒ–å‘Šè­¦ç­–ç•¥
```

**ğŸ”§ è¿ç»´æœ€ä½³å®è·µ**
```
ç›‘æ§å³ä»£ç ï¼š
- é…ç½®æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
- è‡ªåŠ¨åŒ–éƒ¨ç½²
- æ ‡å‡†åŒ–å‘½åè§„èŒƒ

å‘Šè­¦ç­–ç•¥ï¼š
- é¿å…å‘Šè­¦é£æš´
- åˆ†çº§å‘Šè­¦å¤„ç†
- å®šæœŸå›é¡¾å’Œä¼˜åŒ–

æ–‡æ¡£ç»´æŠ¤ï¼š
- ç›‘æ§æŒ‡æ ‡è¯´æ˜
- å‘Šè­¦å¤„ç†æ‰‹å†Œ
- æ•…éšœå¤„ç†æµç¨‹
```

### 9.6 å­¦ä¹ æ€»ç»“


**ğŸ“ æ ¸å¿ƒç†è§£**
```
Exporteræœ¬è´¨ï¼š
- æ•°æ®è½¬æ¢å™¨ï¼šå°†å„ç§æ ¼å¼è½¬ä¸ºPrometheusæ ‡å‡†æ ¼å¼
- æ ‡å‡†åŒ–æ¥å£ï¼šæä¾›ç»Ÿä¸€çš„/metricsç«¯ç‚¹
- ç”Ÿæ€æ¡¥æ¢ï¼šè¿æ¥Prometheusä¸å„ç§ç³»ç»Ÿ

é€‰æ‹©åŸåˆ™ï¼š
- å®˜æ–¹ä¼˜å…ˆï¼šä¼˜å…ˆé€‰æ‹©å®˜æ–¹æˆ–çŸ¥åçš„Exporter
- åŠŸèƒ½åŒ¹é…ï¼šé€‰æ‹©åŠŸèƒ½æœ€è´´åˆéœ€æ±‚çš„
- ç¤¾åŒºæ´»è·ƒï¼šé€‰æ‹©ç»´æŠ¤æ´»è·ƒã€æ–‡æ¡£å®Œå–„çš„

éƒ¨ç½²è€ƒè™‘ï¼š
- èµ„æºæ¶ˆè€—ï¼šExporteræœ¬èº«çš„èµ„æºä½¿ç”¨
- ç½‘ç»œå®‰å…¨ï¼šç›‘æ§æ•°æ®çš„å®‰å…¨ä¼ è¾“
- é«˜å¯ç”¨æ€§ï¼šExporterçš„å¯ç”¨æ€§ä¿éšœ
```

**ğŸ’¡ å…³é”®è®°å¿†ç‚¹**
- **Node Exporter**ï¼šç³»ç»Ÿç›‘æ§çš„åŸºçŸ³ï¼Œå¿…è£…
- **cAdvisor**ï¼šå®¹å™¨ç¯å¢ƒçš„åˆ©å™¨ï¼Œè‡ªåŠ¨å‘ç°
- **Blackbox Exporter**ï¼šç”¨æˆ·è§†è§’ç›‘æ§ï¼Œé»‘ç›’æ£€æµ‹
- **æ•°æ®åº“Exporter**ï¼šæ ¹æ®ä½¿ç”¨çš„æ•°æ®åº“é€‰æ‹©å¯¹åº”çš„
- **JMX Exporter**ï¼šJavaåº”ç”¨ç›‘æ§çš„æ ‡å‡†æ–¹æ¡ˆ

**ğŸš€ è¿›é˜¶æ–¹å‘**
- è‡ªå®šä¹‰Exporterå¼€å‘
- ç›‘æ§æ•°æ®çš„é«˜çº§æŸ¥è¯¢å’Œåˆ†æ
- ç›‘æ§ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–
- å¤§è§„æ¨¡ç¯å¢ƒä¸‹çš„ç›‘æ§æ¶æ„è®¾è®¡