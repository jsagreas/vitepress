---
title: 2ã€Alertmanagerå®‰è£…ä¸Žéƒ¨ç½²
---
## ðŸ“š ç›®å½•

1. [Alertmanageræ˜¯ä»€ä¹ˆ](#1-alertmanageræ˜¯ä»€ä¹ˆ)
2. [å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ](#2-å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ)
3. [äºŒè¿›åˆ¶å®‰è£…æ–¹å¼](#3-äºŒè¿›åˆ¶å®‰è£…æ–¹å¼)
4. [Dockerå®¹å™¨éƒ¨ç½²](#4-dockerå®¹å™¨éƒ¨ç½²)
5. [Kuberneteséƒ¨ç½²](#5-kuberneteséƒ¨ç½²)
6. [ç³»ç»ŸæœåŠ¡é…ç½®](#6-ç³»ç»ŸæœåŠ¡é…ç½®)
7. [ç½‘ç»œä¸Žç«¯å£é…ç½®](#7-ç½‘ç»œä¸Žç«¯å£é…ç½®)
8. [å­˜å‚¨ä¸Žæ—¥å¿—é…ç½®](#8-å­˜å‚¨ä¸Žæ—¥å¿—é…ç½®)
9. [Webç•Œé¢è®¿é—®é…ç½®](#9-webç•Œé¢è®¿é—®é…ç½®)
10. [éƒ¨ç½²éªŒè¯ä¸Žå¥åº·æ£€æŸ¥](#10-éƒ¨ç½²éªŒè¯ä¸Žå¥åº·æ£€æŸ¥)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ¤” Alertmanageræ˜¯ä»€ä¹ˆ


### 1.1 é€šä¿—ç†è§£Alertmanager


**ç®€å•æ¥è¯´**ï¼šAlertmanagerå°±åƒæ˜¯ä¸€ä¸ª**æ™ºèƒ½çš„è­¦æŠ¥ç®¡ç†å‘˜**

```
æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼š
ä½ å®¶é‡Œè£…äº†å¾ˆå¤šçƒŸé›¾æŠ¥è­¦å™¨ï¼ˆè¿™äº›å°±åƒPrometheusï¼‰
å½“å‘ç”Ÿç«ç¾æ—¶ï¼Œæ‰€æœ‰æŠ¥è­¦å™¨éƒ½ä¼šå“
ä½†æ˜¯ä½ ä¸å¸Œæœ›ï¼š
âŒ æ¯ä¸ªæŠ¥è­¦å™¨éƒ½å•ç‹¬ç»™ä½ æ‰“ç”µè¯
âŒ é‡å¤æ”¶åˆ°ç›¸åŒçš„ç«è­¦é€šçŸ¥
âŒ åŠå¤œä¸‰æ›´æ”¶åˆ°ä¸é‡è¦çš„è­¦æŠ¥

Alertmanagerå°±æ˜¯é‚£ä¸ªèªæ˜Žçš„ç®¡ç†å‘˜ï¼š
âœ… æŠŠç›¸åŒç±»åž‹çš„è­¦æŠ¥åˆå¹¶æˆä¸€æ¡é€šçŸ¥
âœ… æ ¹æ®æ—¶é—´æ®µå†³å®šç”¨ä»€ä¹ˆæ–¹å¼é€šçŸ¥ä½ 
âœ… è®°ä½å“ªäº›è­¦æŠ¥å·²ç»å¤„ç†è¿‡äº†
âœ… æŒ‰ç…§é‡è¦ç¨‹åº¦åˆ†åˆ«å¤„ç†
```

### 1.2 Alertmanagerçš„æ ¸å¿ƒä½œç”¨


**ðŸ”¸ è­¦æŠ¥åŽ»é‡ï¼ˆDeduplicationï¼‰**
```
å¤šä¸ªPrometheuså®žä¾‹å¯èƒ½å‘é€ç›¸åŒè­¦æŠ¥
Alertmanagerä¼šè¯†åˆ«å¹¶åˆå¹¶é‡å¤è­¦æŠ¥
é¿å…ä½ æ”¶åˆ°å¤§é‡ç›¸åŒå†…å®¹çš„é€šçŸ¥
```

**ðŸ”¸ è­¦æŠ¥åˆ†ç»„ï¼ˆGroupingï¼‰**
```
æŠŠç›¸å…³çš„è­¦æŠ¥ç»„åˆåœ¨ä¸€èµ·
æ¯”å¦‚ï¼šåŒä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªå®žä¾‹éƒ½å‡ºé—®é¢˜
ä¼šç»„åˆæˆä¸€æ¡"XXæœåŠ¡é›†ç¾¤æ•…éšœ"çš„é€šçŸ¥
è€Œä¸æ˜¯åˆ†åˆ«å‘é€10æ¡ç›¸åŒçš„è­¦æŠ¥
```

**ðŸ”¸ é™é»˜ç®¡ç†ï¼ˆSilencingï¼‰**
```
æš‚æ—¶å…³é—­æŸäº›è­¦æŠ¥
æ¯”å¦‚ï¼šç³»ç»Ÿç»´æŠ¤æœŸé—´ï¼Œæš‚åœç›¸å…³è­¦æŠ¥
ç»´æŠ¤ç»“æŸåŽè‡ªåŠ¨æ¢å¤è­¦æŠ¥
```

**ðŸ”¸ è·¯ç”±åˆ†å‘ï¼ˆRoutingï¼‰**
```
æ ¹æ®è­¦æŠ¥ç±»åž‹å‘é€ç»™ä¸åŒçš„äºº
æ¯”å¦‚ï¼š
- æ•°æ®åº“é—®é¢˜ â†’ å‘ç»™DBAå›¢é˜Ÿ
- ç½‘ç»œé—®é¢˜ â†’ å‘ç»™ç½‘ç»œå·¥ç¨‹å¸ˆ
- åº”ç”¨é—®é¢˜ â†’ å‘ç»™å¼€å‘å›¢é˜Ÿ
```

### 1.3 åœ¨ç›‘æŽ§ä½“ç³»ä¸­çš„ä½ç½®


```
ç›‘æŽ§æ•°æ®æµå‘ï¼š
åº”ç”¨æœåŠ¡ â†’ Prometheusé‡‡é›† â†’ è§¦å‘è­¦æŠ¥è§„åˆ™ â†’ Alertmanagerå¤„ç† â†’ å‘é€é€šçŸ¥

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨æœåŠ¡   â”‚â”€â”€â”€â–¶â”‚ Prometheus  â”‚â”€â”€â”€â–¶â”‚Alertmanager â”‚â”€â”€â”€â–¶â”‚  é€šçŸ¥æ¸ é“   â”‚
â”‚  (äº§ç”ŸæŒ‡æ ‡)  â”‚    â”‚ (ç›‘æŽ§å‘Šè­¦)  â”‚    â”‚ (å¤„ç†è­¦æŠ¥)  â”‚    â”‚(é‚®ä»¶/å¾®ä¿¡ç­‰)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ðŸ› ï¸ å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ


### 2.1 ç³»ç»Ÿè¦æ±‚æ£€æŸ¥


**æ“ä½œç³»ç»Ÿæ”¯æŒ**ï¼š
- âœ… **Linuxç³»ç»Ÿ**ï¼ˆæŽ¨èCentOS 7+ã€Ubuntu 18+ï¼‰
- âœ… **Windowsç³»ç»Ÿ**ï¼ˆæ”¯æŒä½†ä¸æŽ¨èç”Ÿäº§çŽ¯å¢ƒï¼‰
- âœ… **macOSç³»ç»Ÿ**ï¼ˆå¼€å‘æµ‹è¯•ç”¨ï¼‰

**ç¡¬ä»¶æœ€ä½Žè¦æ±‚**ï¼š

| çŽ¯å¢ƒç±»åž‹ | **CPU** | **å†…å­˜** | **ç£ç›˜ç©ºé—´** | **ç½‘ç»œ** |
|---------|---------|----------|-------------|----------|
| ðŸ§ª **æµ‹è¯•çŽ¯å¢ƒ** | `1æ ¸å¿ƒ` | `512MB` | `1GB` | `100Mbps` |
| ðŸ¢ **å°åž‹ç”Ÿäº§** | `2æ ¸å¿ƒ` | `2GB` | `10GB` | `1Gbps` |
| ðŸ­ **å¤§åž‹ç”Ÿäº§** | `4æ ¸å¿ƒ` | `8GB` | `50GB` | `1Gbps` |

### 2.2 ç½‘ç»œç«¯å£è§„åˆ’


**ðŸ”¸ é»˜è®¤ç«¯å£è¯´æ˜Ž**ï¼š
```
9093ç«¯å£ï¼šAlertmanager Web UIå’ŒAPIæŽ¥å£
9094ç«¯å£ï¼šé›†ç¾¤å†…éƒ¨é€šä¿¡ç«¯å£ï¼ˆé›†ç¾¤æ¨¡å¼éœ€è¦ï¼‰
```

**ðŸ”¸ é˜²ç«å¢™é…ç½®**ï¼š
```bash
# CentOS/RHELç³»ç»Ÿ
sudo firewall-cmd --permanent --add-port=9093/tcp
sudo firewall-cmd --permanent --add-port=9094/tcp
sudo firewall-cmd --reload

# Ubuntuç³»ç»Ÿ
sudo ufw allow 9093/tcp
sudo ufw allow 9094/tcp
```

### 2.3 ç”¨æˆ·æƒé™å‡†å¤‡


**åˆ›å»ºä¸“ç”¨ç”¨æˆ·**ï¼ˆæŽ¨èåšæ³•ï¼‰ï¼š
```bash
# åˆ›å»ºalertmanagerç”¨æˆ·
sudo useradd --no-create-home --shell /bin/false alertmanager

# åˆ›å»ºå¿…è¦çš„ç›®å½•
sudo mkdir -p /opt/alertmanager
sudo mkdir -p /etc/alertmanager
sudo mkdir -p /var/lib/alertmanager

# è®¾ç½®ç›®å½•æƒé™
sudo chown alertmanager:alertmanager /opt/alertmanager
sudo chown alertmanager:alertmanager /etc/alertmanager
sudo chown alertmanager:alertmanager /var/lib/alertmanager
```

ðŸ’¡ **ä¸ºä»€ä¹ˆè¦åˆ›å»ºä¸“ç”¨ç”¨æˆ·**ï¼š
- **å®‰å…¨æ€§**ï¼šé¿å…ä½¿ç”¨rootæƒé™è¿è¡Œ
- **éš”ç¦»æ€§**ï¼šä¸Žå…¶ä»–æœåŠ¡éš”ç¦»
- **ç®¡ç†æ€§**ï¼šä¾¿äºŽæƒé™ç®¡ç†å’Œæ•…éšœæŽ’æŸ¥

---

## 3. ðŸ“¦ äºŒè¿›åˆ¶å®‰è£…æ–¹å¼


### 3.1 ä¸‹è½½å®‰è£…åŒ…


**ðŸ”¸ èŽ·å–æœ€æ–°ç‰ˆæœ¬**ï¼š
```bash
# æ–¹æ³•1ï¼šä»ŽGitHubèŽ·å–æœ€æ–°ç‰ˆæœ¬å·
LATEST_VERSION=$(curl -s https://api.github.com/repos/prometheus/alertmanager/releases/latest | grep tag_name | cut -d '"' -f 4)
echo "æœ€æ–°ç‰ˆæœ¬: $LATEST_VERSION"

# æ–¹æ³•2ï¼šæ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬ï¼ˆæŽ¨èç”Ÿäº§çŽ¯å¢ƒï¼‰
VERSION="v0.26.0"
```

**ðŸ”¸ ä¸‹è½½å®‰è£…åŒ…**ï¼š
```bash
# ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…
wget https://github.com/prometheus/alertmanager/releases/download/${VERSION}/alertmanager-${VERSION}.linux-amd64.tar.gz

# è§£åŽ‹å®‰è£…åŒ…
tar -xzf alertmanager-${VERSION}.linux-amd64.tar.gz

# ç§»åŠ¨åˆ°å®‰è£…ç›®å½•
sudo mv alertmanager-${VERSION}.linux-amd64/* /opt/alertmanager/

# åˆ›å»ºè½¯é“¾æŽ¥ï¼ˆæ–¹ä¾¿ç®¡ç†ï¼‰
sudo ln -s /opt/alertmanager/alertmanager /usr/local/bin/
sudo ln -s /opt/alertmanager/amtool /usr/local/bin/
```

### 3.2 åŸºç¡€é…ç½®æ–‡ä»¶


**åˆ›å»ºåŸºæœ¬é…ç½®æ–‡ä»¶**ï¼š
```yaml
# /etc/alertmanager/alertmanager.yml
global:
  # SMTPé‚®ä»¶æœåŠ¡å™¨é…ç½®
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alertmanager@yourcompany.com'

# è·¯ç”±é…ç½®ï¼šå†³å®šè­¦æŠ¥å‘é€ç»™è°
route:
  group_by: ['alertname']          # æŒ‰è­¦æŠ¥åç§°åˆ†ç»„
  group_wait: 10s                  # åˆ†ç»„ç­‰å¾…æ—¶é—´
  group_interval: 10s              # åˆ†ç»„å‘é€é—´éš”
  repeat_interval: 1h              # é‡å¤å‘é€é—´éš”
  receiver: 'web.hook'             # é»˜è®¤æŽ¥æ”¶è€…

# æŽ¥æ”¶è€…é…ç½®ï¼šå®šä¹‰é€šçŸ¥æ–¹å¼
receivers:
- name: 'web.hook'
  email_configs:
  - to: 'admin@yourcompany.com'
    subject: 'ã€è­¦æŠ¥ã€‘{{ .GroupLabels.alertname }}'
    body: |
      è­¦æŠ¥è¯¦æƒ…ï¼š
      {{ range .Alerts }}
      è­¦æŠ¥åç§°: {{ .Annotations.summary }}
      è¯¦ç»†æè¿°: {{ .Annotations.description }}
      å¼€å§‹æ—¶é—´: {{ .StartsAt }}
      {{ end }}
```

ðŸ’¡ **é…ç½®æ–‡ä»¶å…³é”®æ¦‚å¿µ**ï¼š
- **route**ï¼šå†³å®šè­¦æŠ¥çš„å¤„ç†æµç¨‹
- **receivers**ï¼šå®šä¹‰å…·ä½“çš„é€šçŸ¥æ–¹å¼
- **global**ï¼šå…¨å±€é…ç½®ï¼Œå¦‚é‚®ä»¶æœåŠ¡å™¨

### 3.3 å¯åŠ¨æµ‹è¯•


**æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•**ï¼š
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
/opt/alertmanager/amtool config check /etc/alertmanager/alertmanager.yml

# æ‰‹åŠ¨å¯åŠ¨ï¼ˆæµ‹è¯•ç”¨ï¼‰
sudo -u alertmanager /opt/alertmanager/alertmanager \
  --config.file=/etc/alertmanager/alertmanager.yml \
  --storage.path=/var/lib/alertmanager \
  --web.listen-address=:9093 \
  --log.level=info

# æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ
curl http://localhost:9093/-/healthy
```

âš ï¸ **å¸¸è§å¯åŠ¨é”™è¯¯**ï¼š
- **é…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯**ï¼šä½¿ç”¨`amtool config check`æ£€æŸ¥
- **æƒé™é—®é¢˜**ï¼šç¡®ä¿alertmanagerç”¨æˆ·æœ‰è¯»å†™æƒé™
- **ç«¯å£å ç”¨**ï¼šä½¿ç”¨`netstat -tlnp | grep 9093`æ£€æŸ¥

---

## 4. ðŸ³ Dockerå®¹å™¨éƒ¨ç½²


### 4.1 ä½¿ç”¨å®˜æ–¹é•œåƒ


**ðŸ”¸ æ‹‰å–å®˜æ–¹é•œåƒ**ï¼š
```bash
# æ‹‰å–æœ€æ–°ç‰ˆæœ¬
docker pull prom/alertmanager:latest

# æˆ–è€…æŒ‡å®šç‰ˆæœ¬ï¼ˆæŽ¨èï¼‰
docker pull prom/alertmanager:v0.26.0
```

**ðŸ”¸ åˆ›å»ºé…ç½®ç›®å½•**ï¼š
```bash
# åˆ›å»ºæœ¬åœ°é…ç½®ç›®å½•
mkdir -p /opt/alertmanager-docker/config
mkdir -p /opt/alertmanager-docker/data

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > /opt/alertmanager-docker/config/alertmanager.yml << 'EOF'
global:
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alertmanager@yourcompany.com'

route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'default'

receivers:
- name: 'default'
  email_configs:
  - to: 'admin@yourcompany.com'
    subject: 'Alertmanageré€šçŸ¥'
EOF
```

### 4.2 å®¹å™¨å¯åŠ¨å‘½ä»¤


**ðŸ”¸ åŸºç¡€å¯åŠ¨æ–¹å¼**ï¼š
```bash
docker run -d \
  --name alertmanager \
  --restart unless-stopped \
  -p 9093:9093 \
  -v /opt/alertmanager-docker/config:/etc/alertmanager \
  -v /opt/alertmanager-docker/data:/alertmanager \
  prom/alertmanager:v0.26.0 \
  --config.file=/etc/alertmanager/alertmanager.yml \
  --storage.path=/alertmanager \
  --web.external-url=http://localhost:9093
```

**ðŸ”¸ ç”Ÿäº§çŽ¯å¢ƒå¯åŠ¨**ï¼š
```bash
docker run -d \
  --name alertmanager \
  --restart unless-stopped \
  --user $(id -u):$(id -g) \
  -p 9093:9093 \
  -v /opt/alertmanager-docker/config:/etc/alertmanager:ro \
  -v /opt/alertmanager-docker/data:/alertmanager \
  --memory=512m \
  --cpus=1 \
  prom/alertmanager:v0.26.0 \
  --config.file=/etc/alertmanager/alertmanager.yml \
  --storage.path=/alertmanager \
  --web.external-url=http://your-domain.com:9093 \
  --log.level=info
```

### 4.3 Docker Composeéƒ¨ç½²


**åˆ›å»ºdocker-compose.yml**ï¼š
```yaml
version: '3.8'

services:
  alertmanager:
    image: prom/alertmanager:v0.26.0
    container_name: alertmanager
    restart: unless-stopped
    ports:
      - "9093:9093"
    volumes:
      - ./config:/etc/alertmanager:ro
      - ./data:/alertmanager
    command:
      - '--config.file=/etc/alertmanager/alertmanager.yml'
      - '--storage.path=/alertmanager'
      - '--web.external-url=http://localhost:9093'
      - '--log.level=info'
    networks:
      - monitoring
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '1'
        reservations:
          memory: 256M
          cpus: '0.5'

networks:
  monitoring:
    driver: bridge
```

**å¯åŠ¨æœåŠ¡**ï¼š
```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f alertmanager

# åœæ­¢æœåŠ¡
docker-compose down
```

---

## 5. â˜¸ï¸ Kuberneteséƒ¨ç½²


### 5.1 ä½¿ç”¨YAMLæ¸…å•éƒ¨ç½²


**ðŸ”¸ åˆ›å»ºConfigMapé…ç½®**ï¼š
```yaml
# alertmanager-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-config
  namespace: monitoring
data:
  alertmanager.yml: |
    global:
      smtp_smarthost: 'localhost:587'
      smtp_from: 'alertmanager@yourcompany.com'
    
    route:
      group_by: ['alertname']
      group_wait: 10s
      group_interval: 10s
      repeat_interval: 1h
      receiver: 'default'
    
    receivers:
    - name: 'default'
      email_configs:
      - to: 'admin@yourcompany.com'
        subject: 'K8sé›†ç¾¤è­¦æŠ¥'
```

**ðŸ”¸ åˆ›å»ºDeployment**ï¼š
```yaml
# alertmanager-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: alertmanager
  namespace: monitoring
  labels:
    app: alertmanager
spec:
  replicas: 2
  selector:
    matchLabels:
      app: alertmanager
  template:
    metadata:
      labels:
        app: alertmanager
    spec:
      containers:
      - name: alertmanager
        image: prom/alertmanager:v0.26.0
        ports:
        - containerPort: 9093
        - containerPort: 9094
        args:
          - '--config.file=/etc/alertmanager/alertmanager.yml'
          - '--storage.path=/alertmanager'
          - '--web.external-url=http://alertmanager.yourcompany.com'
          - '--cluster.listen-address=0.0.0.0:9094'
          - '--cluster.peer=alertmanager-0.alertmanager.monitoring.svc.cluster.local:9094'
          - '--cluster.peer=alertmanager-1.alertmanager.monitoring.svc.cluster.local:9094'
        volumeMounts:
        - name: config-volume
          mountPath: /etc/alertmanager
        - name: storage-volume
          mountPath: /alertmanager
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
      volumes:
      - name: config-volume
        configMap:
          name: alertmanager-config
      - name: storage-volume
        persistentVolumeClaim:
          claimName: alertmanager-pvc
```

**ðŸ”¸ åˆ›å»ºService**ï¼š
```yaml
# alertmanager-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: alertmanager
  namespace: monitoring
  labels:
    app: alertmanager
spec:
  type: ClusterIP
  ports:
  - name: web
    port: 9093
    targetPort: 9093
  - name: cluster
    port: 9094
    targetPort: 9094
  selector:
    app: alertmanager
```

### 5.2 ä½¿ç”¨Helméƒ¨ç½²


**ðŸ”¸ æ·»åŠ Prometheusç¤¾åŒºHelmä»“åº“**ï¼š
```bash
# æ·»åŠ ä»“åº“
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update

# æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬
helm search repo prometheus-community/alertmanager
```

**ðŸ”¸ åˆ›å»ºvalues.yamlé…ç½®**ï¼š
```yaml
# values.yaml
replicaCount: 2

image:
  repository: prom/alertmanager
  tag: v0.26.0
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 9093

ingress:
  enabled: true
  hosts:
    - host: alertmanager.yourcompany.com
      paths:
        - path: /
          pathType: Prefix

persistence:
  enabled: true
  size: 10Gi
  storageClass: "standard"

resources:
  requests:
    memory: 256Mi
    cpu: 250m
  limits:
    memory: 512Mi
    cpu: 500m

config:
  global:
    smtp_smarthost: 'localhost:587'
    smtp_from: 'alertmanager@yourcompany.com'
  
  route:
    group_by: ['alertname']
    group_wait: 10s
    group_interval: 10s
    repeat_interval: 1h
    receiver: 'default'
  
  receivers:
  - name: 'default'
    email_configs:
    - to: 'admin@yourcompany.com'
      subject: 'K8s Alertmanageré€šçŸ¥'
```

**ðŸ”¸ éƒ¨ç½²Alertmanager**ï¼š
```bash
# åˆ›å»ºå‘½åç©ºé—´
kubectl create namespace monitoring

# ä½¿ç”¨Helmå®‰è£…
helm install alertmanager prometheus-community/alertmanager \
  --namespace monitoring \
  --values values.yaml

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods -n monitoring
kubectl get svc -n monitoring
```

---

## 6. ðŸ”§ ç³»ç»ŸæœåŠ¡é…ç½®


### 6.1 åˆ›å»ºsystemdæœåŠ¡


**ðŸ”¸ åˆ›å»ºæœåŠ¡æ–‡ä»¶**ï¼š
```ini
# /etc/systemd/system/alertmanager.service
[Unit]
Description=Alertmanager
Documentation=https://prometheus.io/docs/alerting/alertmanager/
Wants=network-online.target
After=network-online.target

[Service]
Type=simple
User=alertmanager
Group=alertmanager
ExecReload=/bin/kill -HUP $MAINPID
ExecStart=/opt/alertmanager/alertmanager \
  --config.file=/etc/alertmanager/alertmanager.yml \
  --storage.path=/var/lib/alertmanager \
  --web.listen-address=0.0.0.0:9093 \
  --web.external-url=http://localhost:9093 \
  --log.level=info \
  --log.format=logfmt

SyslogIdentifier=alertmanager
Restart=always
RestartSec=5
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
```

**ðŸ”¸ å¯ç”¨å’Œç®¡ç†æœåŠ¡**ï¼š
```bash
# é‡æ–°åŠ è½½systemdé…ç½®
sudo systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
sudo systemctl enable alertmanager

# å¯åŠ¨æœåŠ¡
sudo systemctl start alertmanager

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status alertmanager

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
sudo journalctl -u alertmanager -f
```

### 6.2 æœåŠ¡ç®¡ç†å‘½ä»¤


**ðŸ”¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤**ï¼š

| æ“ä½œ | **å‘½ä»¤** | **è¯´æ˜Ž** |
|------|----------|----------|
| ðŸš€ **å¯åŠ¨æœåŠ¡** | `sudo systemctl start alertmanager` | `ç«‹å³å¯åŠ¨æœåŠ¡` |
| ðŸ›‘ **åœæ­¢æœåŠ¡** | `sudo systemctl stop alertmanager` | `ç«‹å³åœæ­¢æœåŠ¡` |
| ðŸ”„ **é‡å¯æœåŠ¡** | `sudo systemctl restart alertmanager` | `é‡å¯æœåŠ¡` |
| ðŸ“Š **æŸ¥çœ‹çŠ¶æ€** | `sudo systemctl status alertmanager` | `æŸ¥çœ‹è¿è¡ŒçŠ¶æ€` |
| ðŸ“ **æŸ¥çœ‹æ—¥å¿—** | `sudo journalctl -u alertmanager -f` | `å®žæ—¶æŸ¥çœ‹æ—¥å¿—` |
| âš™ï¸ **é‡è½½é…ç½®** | `sudo systemctl reload alertmanager` | `é‡æ–°åŠ è½½é…ç½®` |

**ðŸ”¸ é…ç½®æ–‡ä»¶é‡æ–°åŠ è½½**ï¼š
```bash
# æ–¹æ³•1ï¼šå‘é€SIGHUPä¿¡å·
sudo kill -HUP $(pgrep alertmanager)

# æ–¹æ³•2ï¼šä½¿ç”¨systemctl reload
sudo systemctl reload alertmanager

# æ–¹æ³•3ï¼šä½¿ç”¨HTTP API
curl -X POST http://localhost:9093/-/reload
```

---

## 7. ðŸŒ ç½‘ç»œä¸Žç«¯å£é…ç½®


### 7.1 ç«¯å£åŠŸèƒ½è¯´æ˜Ž


**ðŸ”¸ Alertmanagerç«¯å£ç”¨é€”**ï¼š

| ç«¯å£ | **ç”¨é€”** | **åè®®** | **è®¿é—®èŒƒå›´** |
|------|----------|----------|-------------|
| `9093` | `Web UIå’ŒAPIæŽ¥å£` | `HTTP` | `å¤–éƒ¨è®¿é—®` |
| `9094` | `é›†ç¾¤é€šä¿¡ç«¯å£` | `TCP` | `å†…éƒ¨é›†ç¾¤` |

### 7.2 ç½‘ç»œè®¿é—®é…ç½®


**ðŸ”¸ ç›‘å¬åœ°å€é…ç½®**ï¼š
```bash
# åªç›‘å¬æœ¬åœ°ï¼ˆå®‰å…¨ï¼Œéœ€è¦åå‘ä»£ç†ï¼‰
--web.listen-address=127.0.0.1:9093

# ç›‘å¬æ‰€æœ‰ç½‘å¡ï¼ˆæ–¹ä¾¿ä½†ä¸å®‰å…¨ï¼‰
--web.listen-address=0.0.0.0:9093

# ç›‘å¬ç‰¹å®šç½‘å¡
--web.listen-address=192.168.1.100:9093
```

**ðŸ”¸ å¤–éƒ¨URLé…ç½®**ï¼š
```bash
# é…ç½®å¤–éƒ¨è®¿é—®URLï¼ˆé‡è¦ï¼ï¼‰
--web.external-url=http://alertmanager.yourcompany.com
--web.external-url=https://monitoring.yourcompany.com/alertmanager
```

ðŸ’¡ **external-urlçš„é‡è¦æ€§**ï¼š
- **é‚®ä»¶é“¾æŽ¥**ï¼šé‚®ä»¶ä¸­çš„é“¾æŽ¥ä¼šä½¿ç”¨è¿™ä¸ªURL
- **å›žè°ƒåœ°å€**ï¼šWebhookå›žè°ƒä¼šä½¿ç”¨è¿™ä¸ªåœ°å€
- **ç•Œé¢è·³è½¬**ï¼šç¡®ä¿ç•Œé¢å†…çš„é“¾æŽ¥æ­£ç¡®

### 7.3 åå‘ä»£ç†é…ç½®


**ðŸ”¸ Nginxåå‘ä»£ç†é…ç½®**ï¼š
```nginx
server {
    listen 80;
    server_name alertmanager.yourcompany.com;
    
    location / {
        proxy_pass http://127.0.0.1:9093;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

**ðŸ”¸ HTTPSé…ç½®ç¤ºä¾‹**ï¼š
```nginx
server {
    listen 443 ssl http2;
    server_name alertmanager.yourcompany.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://127.0.0.1:9093;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto https;
    }
}
```

---

## 8. ðŸ’¾ å­˜å‚¨ä¸Žæ—¥å¿—é…ç½®


### 8.1 æ•°æ®å­˜å‚¨é…ç½®


**ðŸ”¸ å­˜å‚¨è·¯å¾„è¯´æ˜Ž**ï¼š
```
/var/lib/alertmanager/           # é»˜è®¤æ•°æ®ç›®å½•
â”œâ”€â”€ nflog                        # é€šçŸ¥æ—¥å¿—
â”œâ”€â”€ silences                     # é™é»˜è§„åˆ™
â””â”€â”€ cluster                      # é›†ç¾¤çŠ¶æ€
```

**ðŸ”¸ å­˜å‚¨å‚æ•°é…ç½®**ï¼š
```bash
# æ•°æ®ä¿ç•™æ—¶é—´é…ç½®
--data.retention=120h            # æ•°æ®ä¿ç•™5å¤©
--data.retention=720h            # æ•°æ®ä¿ç•™30å¤©

# æ¸…ç†ç­–ç•¥
--storage.path=/var/lib/alertmanager
--data.maintenance-interval=15m   # æ¸…ç†é—´éš”
```

### 8.2 æ—¥å¿—é…ç½®ç®¡ç†


**ðŸ”¸ æ—¥å¿—çº§åˆ«è®¾ç½®**ï¼š

| çº§åˆ« | **è¯¦ç»†ç¨‹åº¦** | **é€‚ç”¨åœºæ™¯** |
|------|-------------|-------------|
| `debug` | `æœ€è¯¦ç»†` | `å¼€å‘è°ƒè¯•` |
| `info` | `ä¸€èˆ¬ä¿¡æ¯` | `æ­£å¸¸è¿è¡Œ` |
| `warn` | `è­¦å‘Šä¿¡æ¯` | `ç”Ÿäº§çŽ¯å¢ƒ` |
| `error` | `é”™è¯¯ä¿¡æ¯` | `é—®é¢˜æŽ’æŸ¥` |

**ðŸ”¸ æ—¥å¿—æ ¼å¼é…ç½®**ï¼š
```bash
# ç»“æž„åŒ–æ—¥å¿—ï¼ˆæŽ¨èï¼‰
--log.format=json
--log.level=info

# ä¼ ç»Ÿæ ¼å¼æ—¥å¿—
--log.format=logfmt
--log.level=info
```

**ðŸ”¸ æ—¥å¿—è½®è½¬é…ç½®**ï¼š
```bash
# /etc/logrotate.d/alertmanager
/var/log/alertmanager/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    sharedscripts
    postrotate
        /bin/kill -HUP $(cat /var/run/alertmanager.pid 2> /dev/null) 2> /dev/null || true
    endscript
}
```

### 8.3 ç›‘æŽ§å­˜å‚¨ä½¿ç”¨


**ðŸ”¸ å­˜å‚¨ç©ºé—´ç›‘æŽ§**ï¼š
```bash
# æŸ¥çœ‹å­˜å‚¨ä½¿ç”¨æƒ…å†µ
du -sh /var/lib/alertmanager/

# ç›‘æŽ§ç£ç›˜ä½¿ç”¨
df -h /var/lib/alertmanager/

# æŸ¥çœ‹æ•°æ®åº“æ–‡ä»¶
ls -la /var/lib/alertmanager/
```

---

## 9. ðŸ–¥ï¸ Webç•Œé¢è®¿é—®é…ç½®


### 9.1 Web UIåŸºæœ¬ä»‹ç»


**ðŸ”¸ è®¿é—®åœ°å€**ï¼š
- **é»˜è®¤åœ°å€**ï¼š`http://localhost:9093`
- **è‡ªå®šä¹‰åœ°å€**ï¼šé€šè¿‡`--web.external-url`é…ç½®

**ðŸ”¸ ä¸»è¦ç•Œé¢åŠŸèƒ½**ï¼š
```
ðŸ“Š Alertsé¡µé¢ï¼šæŸ¥çœ‹å½“å‰æ‰€æœ‰è­¦æŠ¥
ðŸ”‡ Silencesé¡µé¢ï¼šç®¡ç†é™é»˜è§„åˆ™
âš™ï¸ Statusé¡µé¢ï¼šæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
ðŸ“Š Configé¡µé¢ï¼šæŸ¥çœ‹å½“å‰é…ç½®
```

### 9.2 ç•Œé¢è®¿é—®æŽ§åˆ¶


**ðŸ”¸ åŸºç¡€è®¤è¯é…ç½®**ï¼š
```yaml
# åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ 
global:
  http_config:
    basic_auth:
      username: admin
      password: your-secure-password
```

**ðŸ”¸ é€šè¿‡åå‘ä»£ç†è®¤è¯**ï¼š
```nginx
# NginxåŸºç¡€è®¤è¯
location / {
    auth_basic "Alertmanager";
    auth_basic_user_file /etc/nginx/.htpasswd;
    
    proxy_pass http://127.0.0.1:9093;
    proxy_set_header Host $host;
}
```

### 9.3 APIæŽ¥å£é…ç½®


**ðŸ”¸ ä¸»è¦APIç«¯ç‚¹**ï¼š

| ç«¯ç‚¹ | **åŠŸèƒ½** | **æ–¹æ³•** |
|------|----------|----------|
| `/api/v1/alerts` | `æŸ¥çœ‹è­¦æŠ¥` | `GET` |
| `/api/v1/silences` | `ç®¡ç†é™é»˜` | `GET/POST` |
| `/api/v1/status` | `ç³»ç»ŸçŠ¶æ€` | `GET` |
| `/-/healthy` | `å¥åº·æ£€æŸ¥` | `GET` |
| `/-/ready` | `å°±ç»ªæ£€æŸ¥` | `GET` |
| `/-/reload` | `é‡è½½é…ç½®` | `POST` |

**ðŸ”¸ APIä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹å½“å‰è­¦æŠ¥
curl http://localhost:9093/api/v1/alerts

# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
curl http://localhost:9093/api/v1/status

# å¥åº·æ£€æŸ¥
curl http://localhost:9093/-/healthy
```

---

## 10. âœ… éƒ¨ç½²éªŒè¯ä¸Žå¥åº·æ£€æŸ¥


### 10.1 åŸºç¡€åŠŸèƒ½éªŒè¯


**ðŸ”¸ æœåŠ¡å¯åŠ¨éªŒè¯**ï¼š
```bash
# 1. æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œ
ps aux | grep alertmanager

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
netstat -tlnp | grep 9093
# æˆ–è€…ä½¿ç”¨sså‘½ä»¤
ss -tlnp | grep 9093

# 3. æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status alertmanager
```

**ðŸ”¸ Webç•Œé¢è®¿é—®éªŒè¯**ï¼š
```bash
# 1. å¥åº·æ£€æŸ¥
curl -I http://localhost:9093/-/healthy
# æœŸæœ›è¿”å›žï¼šHTTP/1.1 200 OK

# 2. å°±ç»ªæ£€æŸ¥
curl http://localhost:9093/-/ready
# æœŸæœ›è¿”å›žï¼šAlertmanager is Ready.

# 3. è®¿é—®ä¸»é¡µ
curl http://localhost:9093/
# æœŸæœ›è¿”å›žï¼šHTMLé¡µé¢å†…å®¹
```

### 10.2 é…ç½®æ–‡ä»¶éªŒè¯


**ðŸ”¸ é…ç½®è¯­æ³•æ£€æŸ¥**ï¼š
```bash
# ä½¿ç”¨amtoolæ£€æŸ¥é…ç½®
/opt/alertmanager/amtool config check /etc/alertmanager/alertmanager.yml

# æœŸæœ›è¾“å‡ºï¼š
# Checking '/etc/alertmanager/alertmanager.yml'  SUCCESS
# Found:
# - global config
# - route
# - 1 inhibit rules
# - 1 receivers
# - 0 templates
```

**ðŸ”¸ é…ç½®åŠ è½½éªŒè¯**ï¼š
```bash
# æŸ¥çœ‹å½“å‰é…ç½®
curl http://localhost:9093/api/v1/status | jq .

# é‡æ–°åŠ è½½é…ç½®
curl -X POST http://localhost:9093/-/reload
```

### 10.3 å‘Šè­¦åŠŸèƒ½æµ‹è¯•


**ðŸ”¸ å‘é€æµ‹è¯•è­¦æŠ¥**ï¼š
```bash
# åˆ›å»ºæµ‹è¯•è­¦æŠ¥JSON
cat > test_alert.json << 'EOF'
[
  {
    "labels": {
      "alertname": "TestAlert",
      "service": "test-service",
      "severity": "warning"
    },
    "annotations": {
      "summary": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è­¦æŠ¥",
      "description": "ç”¨äºŽéªŒè¯Alertmanageræ˜¯å¦æ­£å¸¸å·¥ä½œ"
    },
    "generatorURL": "http://localhost:9090/graph"
  }
]
EOF

# å‘é€æµ‹è¯•è­¦æŠ¥
curl -XPOST http://localhost:9093/api/v1/alerts -H "Content-Type: application/json" -d @test_alert.json
```

**ðŸ”¸ éªŒè¯è­¦æŠ¥å¤„ç†**ï¼š
```bash
# æŸ¥çœ‹è­¦æŠ¥æ˜¯å¦æŽ¥æ”¶åˆ°
curl http://localhost:9093/api/v1/alerts | jq .

# åœ¨Webç•Œé¢æŸ¥çœ‹
# è®¿é—® http://localhost:9093/#/alerts
```

### 10.4 ç›‘æŽ§æŒ‡æ ‡éªŒè¯


**ðŸ”¸ æŸ¥çœ‹å†…ç½®æŒ‡æ ‡**ï¼š
```bash
# èŽ·å–PrometheusæŒ‡æ ‡
curl http://localhost:9093/metrics

# å…³é”®æŒ‡æ ‡æ£€æŸ¥
curl http://localhost:9093/metrics | grep alertmanager_alerts
curl http://localhost:9093/metrics | grep alertmanager_notifications
```

**ðŸ”¸ é›†ç¾¤çŠ¶æ€éªŒè¯**ï¼ˆå¦‚æžœä½¿ç”¨é›†ç¾¤æ¨¡å¼ï¼‰ï¼š
```bash
# æŸ¥çœ‹é›†ç¾¤çŠ¶æ€
curl http://localhost:9093/api/v1/status | jq .cluster

# æ£€æŸ¥é›†ç¾¤æˆå‘˜
curl http://localhost:9093/api/v1/status | jq .cluster.peers
```

### 10.5 å¸¸è§é—®é¢˜æŽ’æŸ¥


**ðŸ”¸ å¯åŠ¨å¤±è´¥æŽ’æŸ¥**ï¼š

| é—®é¢˜çŽ°è±¡ | **å¯èƒ½åŽŸå› ** | **è§£å†³æ–¹æ³•** |
|---------|-------------|-------------|
| `ç«¯å£å·²å ç”¨` | `9093ç«¯å£è¢«å…¶ä»–è¿›ç¨‹å ç”¨` | `netstat -tlnp \| grep 9093` |
| `é…ç½®æ–‡ä»¶é”™è¯¯` | `YAMLè¯­æ³•é”™è¯¯` | `amtool config check` |
| `æƒé™ä¸è¶³` | `ç”¨æˆ·æƒé™é—®é¢˜` | `æ£€æŸ¥æ–‡ä»¶å’Œç›®å½•æƒé™` |
| `ç½‘ç»œä¸é€š` | `é˜²ç«å¢™é˜»æ­¢` | `æ£€æŸ¥é˜²ç«å¢™é…ç½®` |

**ðŸ”¸ æ—¥å¿—åˆ†æžæŠ€å·§**ï¼š
```bash
# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯æ—¥å¿—
sudo journalctl -u alertmanager --since "1 hour ago" | grep ERROR

# å®žæ—¶ç›‘æŽ§æ—¥å¿—
sudo journalctl -u alertmanager -f

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µæ—¥å¿—
sudo journalctl -u alertmanager --since "2023-01-01 00:00:00" --until "2023-01-01 23:59:59"
```

---

## 11. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŽŒæ¡çš„å…³é”®æ¦‚å¿µ


```
ðŸ”¸ Alertmanagerä½œç”¨ï¼šæ™ºèƒ½çš„è­¦æŠ¥ç®¡ç†ç³»ç»Ÿï¼Œè´Ÿè´£åŽ»é‡ã€åˆ†ç»„ã€è·¯ç”±ã€é™é»˜
ðŸ”¸ éƒ¨ç½²æ–¹å¼ï¼šäºŒè¿›åˆ¶ã€Dockerã€Kubernetesä¸‰ç§ä¸»è¦æ–¹å¼
ðŸ”¸ æ ¸å¿ƒé…ç½®ï¼šroute(è·¯ç”±)ã€receivers(æŽ¥æ”¶è€…)ã€global(å…¨å±€è®¾ç½®)
ðŸ”¸ ç«¯å£åŠŸèƒ½ï¼š9093(Web UI/API)ã€9094(é›†ç¾¤é€šä¿¡)
ðŸ”¸ æ•°æ®å­˜å‚¨ï¼šé€šçŸ¥æ—¥å¿—ã€é™é»˜è§„åˆ™ã€é›†ç¾¤çŠ¶æ€
```

### 11.2 éƒ¨ç½²æœ€ä½³å®žè·µ


**ðŸ”¹ å®‰å…¨æ€§è€ƒè™‘**ï¼š
```
ä¸“ç”¨ç”¨æˆ·è¿è¡Œï¼šåˆ›å»ºalertmanagerç”¨æˆ·ï¼Œé¿å…rootæƒé™
ç½‘ç»œéš”ç¦»ï¼šé…ç½®é˜²ç«å¢™ï¼Œé™åˆ¶è®¿é—®ç«¯å£
è®¤è¯æŽˆæƒï¼šé…ç½®åŸºç¡€è®¤è¯æˆ–åå‘ä»£ç†è®¤è¯
HTTPSåŠ å¯†ï¼šç”Ÿäº§çŽ¯å¢ƒå»ºè®®ä½¿ç”¨HTTPS
```

**ðŸ”¹ é«˜å¯ç”¨é…ç½®**ï¼š
```
é›†ç¾¤éƒ¨ç½²ï¼šå¤šå®žä¾‹éƒ¨ç½²ï¼Œé…ç½®é›†ç¾¤å‘çŽ°
è´Ÿè½½å‡è¡¡ï¼šä½¿ç”¨åå‘ä»£ç†å®žçŽ°è´Ÿè½½å‡è¡¡
æ•°æ®å¤‡ä»½ï¼šå®šæœŸå¤‡ä»½é…ç½®å’ŒçŠ¶æ€æ•°æ®
ç›‘æŽ§å‘Šè­¦ï¼šå¯¹Alertmanageræœ¬èº«è¿›è¡Œç›‘æŽ§
```

**ðŸ”¹ æ€§èƒ½ä¼˜åŒ–**ï¼š
```
èµ„æºè§„åˆ’ï¼šæ ¹æ®è­¦æŠ¥é‡åˆç†åˆ†é…CPUå’Œå†…å­˜
å­˜å‚¨ç®¡ç†ï¼šé…ç½®åˆé€‚çš„æ•°æ®ä¿ç•™ç­–ç•¥
æ—¥å¿—ç®¡ç†ï¼šé…ç½®æ—¥å¿—è½®è½¬ï¼Œé¿å…ç£ç›˜æ»¡
ç½‘ç»œä¼˜åŒ–ï¼šä¼˜åŒ–ç½‘ç»œé…ç½®ï¼Œå‡å°‘å»¶è¿Ÿ
```

### 11.3 å¸¸ç”¨è¿ç»´å‘½ä»¤


**ðŸ”¹ é…ç½®ç®¡ç†**ï¼š
```bash
# æ£€æŸ¥é…ç½®è¯­æ³•
amtool config check /etc/alertmanager/alertmanager.yml

# é‡æ–°åŠ è½½é…ç½®
curl -X POST http://localhost:9093/-/reload

# æŸ¥çœ‹å½“å‰é…ç½®
curl http://localhost:9093/api/v1/status
```

**ðŸ”¹ æœåŠ¡ç®¡ç†**ï¼š
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start alertmanager

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status alertmanager

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u alertmanager -f
```

**ðŸ”¹ å¥åº·æ£€æŸ¥**ï¼š
```bash
# å¥åº·çŠ¶æ€æ£€æŸ¥
curl http://localhost:9093/-/healthy

# å°±ç»ªçŠ¶æ€æ£€æŸ¥
curl http://localhost:9093/-/ready

# æŸ¥çœ‹æŒ‡æ ‡
curl http://localhost:9093/metrics
```

### 11.4 ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘


- **é…ç½®æ–‡ä»¶è¯¦è§£**ï¼šæ·±å…¥å­¦ä¹ è·¯ç”±è§„åˆ™ã€æŽ¥æ”¶è€…é…ç½®
- **é€šçŸ¥æ¸ é“é…ç½®**ï¼šé‚®ä»¶ã€é’‰é’‰ã€å¾®ä¿¡ç­‰é€šçŸ¥æ–¹å¼
- **é«˜çº§åŠŸèƒ½**ï¼šé™é»˜ç®¡ç†ã€æ¨¡æ¿å®šåˆ¶ã€é›†ç¾¤é…ç½®
- **ç›‘æŽ§é›†æˆ**ï¼šä¸ŽPrometheusé›†æˆï¼Œé…ç½®å‘Šè­¦è§„åˆ™
- **æ•…éšœæŽ’æŸ¥**ï¼šå¸¸è§é—®é¢˜è¯Šæ–­å’Œè§£å†³æ–¹æ³•

**ðŸŽ¯ å­¦ä¹ é‡ç‚¹**ï¼š
ç†è§£Alertmanageråœ¨æ•´ä¸ªç›‘æŽ§ä½“ç³»ä¸­çš„ä½œç”¨ï¼ŒæŽŒæ¡åŸºæœ¬çš„å®‰è£…éƒ¨ç½²æ–¹æ³•ï¼Œä¸ºåŽç»­æ·±å…¥å­¦ä¹ é…ç½®ç®¡ç†æ‰“ä¸‹åŸºç¡€ã€‚é‡ç‚¹å…³æ³¨é…ç½®æ–‡ä»¶çš„ç»“æž„å’ŒåŸºæœ¬æ¦‚å¿µï¼Œè¿™æ˜¯åŽç»­æ‰€æœ‰é«˜çº§åŠŸèƒ½çš„åŸºç¡€ã€‚