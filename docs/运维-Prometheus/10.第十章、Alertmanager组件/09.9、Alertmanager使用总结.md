---
title: 9ã€Alertmanagerä½¿ç”¨æ€»ç»“
---
## ğŸ“š ç›®å½•

1. [Alertmanager æ˜¯ä»€ä¹ˆ](#1-alertmanager-æ˜¯ä»€ä¹ˆ)
2. [ä¸ºä»€ä¹ˆéœ€è¦ Alertmanager](#2-ä¸ºä»€ä¹ˆéœ€è¦-alertmanager)
3. [æ ¸å¿ƒå·¥ä½œåŸç†](#3-æ ¸å¿ƒå·¥ä½œåŸç†)
4. [é…ç½®æ–‡ä»¶è¯¦è§£](#4-é…ç½®æ–‡ä»¶è¯¦è§£)
5. [è·¯ç”±ç­–ç•¥é…ç½®](#5-è·¯ç”±ç­–ç•¥é…ç½®)
6. [é€šçŸ¥æ¸ é“é…ç½®](#6-é€šçŸ¥æ¸ é“é…ç½®)
7. [é«˜çº§åŠŸèƒ½é…ç½®](#7-é«˜çº§åŠŸèƒ½é…ç½®)
8. [å®æˆ˜é…ç½®ç¤ºä¾‹](#8-å®æˆ˜é…ç½®ç¤ºä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Alertmanager æ˜¯ä»€ä¹ˆ


### 1.1 ç®€å•ç†è§£ Alertmanager


**ğŸ”¸ ç”¨ç”Ÿæ´»ä¾‹å­æ¥ç†è§£**
```
æƒ³è±¡ä½ å®¶é‡Œè£…äº†å¾ˆå¤šçƒŸé›¾æŠ¥è­¦å™¨ï¼š
â€¢ å¨æˆ¿ã€å§å®¤ã€å®¢å…éƒ½æœ‰çƒŸé›¾æ¢æµ‹å™¨ â† è¿™å°±åƒ Prometheus ç›‘æ§å„ä¸ªæœåŠ¡
â€¢ ä½†æ˜¯æ¯ä¸ªæ¢æµ‹å™¨éƒ½"å˜Ÿå˜Ÿå˜Ÿ"ä¹±å«å¾ˆçƒ¦äºº â† æ²¡æœ‰ Alertmanager å°±æ˜¯è¿™æ ·
â€¢ ä½ éœ€è¦ä¸€ä¸ª"æ™ºèƒ½ç®¡å®¶" â† Alertmanager å°±æ˜¯è¿™ä¸ªç®¡å®¶
â€¢ ç®¡å®¶å†³å®šï¼šå“ªäº›è­¦æŠ¥é‡è¦ã€é€šçŸ¥è°ã€æ€ä¹ˆé€šçŸ¥ã€è¦ä¸è¦é‡å¤é€šçŸ¥

è¿™ä¸ª"æ™ºèƒ½ç®¡å®¶"å°±æ˜¯ Alertmanagerï¼
```

**ğŸ“‹ å®˜æ–¹å®šä¹‰**
> **Alertmanager** æ˜¯ Prometheus ç”Ÿæ€ç³»ç»Ÿä¸­çš„å‘Šè­¦ç®¡ç†ç»„ä»¶ï¼Œè´Ÿè´£æ¥æ”¶ã€å¤„ç†å’Œåˆ†å‘å‘Šè­¦é€šçŸ¥ã€‚

### 1.2 Alertmanager çš„æ ¸å¿ƒèŒè´£


**ğŸ­ å››å¤§æ ¸å¿ƒèŒè´£**
```
1. ğŸ“¨ æ¥æ”¶å‘Šè­¦
   ä» Prometheus æœåŠ¡å™¨æ¥æ”¶å‘Šè­¦ä¿¡æ¯

2. ğŸ¯ è·¯ç”±åˆ†å‘  
   æ ¹æ®è§„åˆ™å†³å®šå‘Šè­¦å‘ç»™è°

3. ğŸ“¢ å‘é€é€šçŸ¥
   é€šè¿‡é‚®ä»¶ã€å¾®ä¿¡ã€çŸ­ä¿¡ç­‰æ–¹å¼é€šçŸ¥ç›¸å…³äººå‘˜

4. ğŸ”‡ å‘Šè­¦ç®¡ç†
   å»é‡ã€åˆ†ç»„ã€é™é»˜ã€æŠ‘åˆ¶ç­‰é«˜çº§åŠŸèƒ½
```

### 1.3 åœ¨ç›‘æ§ä½“ç³»ä¸­çš„ä½ç½®


**ğŸ—ï¸ ç›‘æ§ç³»ç»Ÿæ¶æ„å›¾**
```
åº”ç”¨æœåŠ¡ â†’ æš´éœ²æŒ‡æ ‡ â†’ Prometheus â†’ è§¦å‘å‘Šè­¦ â†’ Alertmanager â†’ å‘é€é€šçŸ¥
   â†“              â†“           â†“           â†“             â†“
  /metrics      æŠ“å–æ•°æ®    å­˜å‚¨åˆ†æ    å‘Šè­¦è§„åˆ™      æ™ºèƒ½åˆ†å‘
   ç«¯ç‚¹          å®šæ—¶      æ—¶åºæ•°æ®     è§„åˆ™è¯„ä¼°      å¤šç§æ¸ é“

å…·ä½“æµç¨‹ï¼š
WebæœåŠ¡å™¨ CPU ä½¿ç”¨ç‡ 90% â†’ Prometheus å‘ç°å¼‚å¸¸ â†’ è§¦å‘å‘Šè­¦è§„åˆ™ 
â†’ å‘é€åˆ° Alertmanager â†’ åˆ¤æ–­ä¸¥é‡ç¨‹åº¦ â†’ å‘é‚®ä»¶ç»™è¿ç»´å›¢é˜Ÿ
```

---

## 2. ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ Alertmanager


### 2.1 æ²¡æœ‰ Alertmanager çš„ç—›è‹¦


**ğŸ˜µ å‘Šè­¦æ··ä¹±çš„åœºæ™¯**
```
âŒ é—®é¢˜åœºæ™¯ï¼š
â€¢ ç³»ç»Ÿæœ‰ 50 ä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½å•ç‹¬å‘å‘Šè­¦
â€¢ æ•°æ®åº“è¿æ¥æ–­å¼€ï¼Œç¬é—´æ”¶åˆ° 100 å°é‚®ä»¶
â€¢ å‡Œæ™¨ 3 ç‚¹å› ä¸ºä¸é‡è¦çš„å‘Šè­¦è¢«åµé†’
â€¢ å…³é”®å‘Šè­¦æ·¹æ²¡åœ¨å¤§é‡æ— å…³å‘Šè­¦ä¸­
â€¢ ä¸åŒå›¢é˜Ÿæ”¶åˆ°ä¸ç›¸å…³çš„å‘Šè­¦

ğŸ’¡ ç”Ÿæ´»ç±»æ¯”ï¼š
å°±åƒæ¯ä¸ªæˆ¿é—´çš„çƒŸé›¾æŠ¥è­¦å™¨éƒ½ç›´æ¥è¿åˆ°ä½ çš„æ‰‹æœº
å¨æˆ¿åšé¥­æœ‰ç‚¹çƒŸ â†’ æ‰‹æœºç–¯ç‹‚å“
çœŸæ­£ç€ç«äº† â†’ ä½ å´ä»¥ä¸ºåˆæ˜¯è¯¯æŠ¥å¿½ç•¥äº†
```

### 2.2 Alertmanager è§£å†³çš„æ ¸å¿ƒé—®é¢˜


**âœ… æ™ºèƒ½å‘Šè­¦ç®¡ç†**

| é—®é¢˜ | **æ²¡æœ‰ Alertmanager** | **æœ‰äº† Alertmanager** |
|------|---------------------|---------------------|
| ğŸ“§ **å‘Šè­¦æ³›æ»¥** | `æ¯ä¸ªæœåŠ¡å•ç‹¬å‘é‚®ä»¶` | `åŒç±»å‘Šè­¦åˆå¹¶æˆä¸€å°é‚®ä»¶` |
| ğŸ¯ **ç²¾å‡†é€šçŸ¥** | `æ‰€æœ‰äººæ”¶åˆ°æ‰€æœ‰å‘Šè­¦` | `æ•°æ®åº“é—®é¢˜åªé€šçŸ¥ DBA` |
| â° **æ—¶é—´æ§åˆ¶** | `24å°æ—¶æ— å·®åˆ«è½°ç‚¸` | `å·¥ä½œæ—¶é—´é‚®ä»¶ï¼Œéå·¥ä½œæ—¶é—´çŸ­ä¿¡` |
| ğŸ”‡ **å‘Šè­¦ä¼˜å…ˆçº§** | `é‡è¦å’Œä¸é‡è¦æ··åœ¨ä¸€èµ·` | `ä¸¥é‡å‘Šè­¦ç«‹å³é€šçŸ¥ï¼Œä¸€èˆ¬å‘Šè­¦å®šæ—¶æ±‡æ€»` |
| ğŸ› ï¸ **ç»´æŠ¤æ¨¡å¼** | `ç»´æŠ¤æœŸé—´ä¾ç„¶ç–¯ç‹‚å‘Šè­¦` | `ç»´æŠ¤æœŸé—´è‡ªåŠ¨é™é»˜ç›¸å…³å‘Šè­¦` |

---

## 3. âš™ï¸ æ ¸å¿ƒå·¥ä½œåŸç†


### 3.1 Alertmanager çš„å·¥ä½œæµç¨‹


**ğŸ“Š è¯¦ç»†å·¥ä½œæµç¨‹å›¾**
```
Prometheus â†’ Alertmanager çš„å®Œæ•´æµç¨‹ï¼š

ç¬¬1æ­¥ï¼šæ¥æ”¶å‘Šè­¦
Prometheus Server â†’ [HTTP POST] â†’ Alertmanager
                     (å‘Šè­¦æ•°æ®)

ç¬¬2æ­¥ï¼šå‘Šè­¦å¤„ç†
Alertmanager å†…éƒ¨å¤„ç†ï¼š
è¾“å…¥å‘Šè­¦ â†’ å»é‡å¤ â†’ åˆ†ç»„ â†’ è·¯ç”±åŒ¹é… â†’ æŠ‘åˆ¶æ£€æŸ¥ â†’ é™é»˜æ£€æŸ¥

ç¬¬3æ­¥ï¼šé€šçŸ¥å‘é€  
å‘Šè­¦é˜Ÿåˆ— â†’ é‚®ä»¶/çŸ­ä¿¡/å¾®ä¿¡ â†’ ç›¸å…³è´Ÿè´£äºº

ç¬¬4æ­¥ï¼šçŠ¶æ€ç®¡ç†
ç­‰å¾…ç¡®è®¤ â†’ é‡å¤é€šçŸ¥ â†’ è‡ªåŠ¨æ¢å¤ â†’ é€šçŸ¥æ¢å¤
```

### 3.2 æ ¸å¿ƒæ¦‚å¿µè¯¦è§£


**ğŸ”‘ äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ**

**â‘  å‘Šè­¦ï¼ˆAlertï¼‰**
```
å‘Šè­¦å°±æ˜¯ä¸€æ¡"å‡ºäº‹äº†"çš„æ¶ˆæ¯
åŒ…å«ä¿¡æ¯ï¼š
â€¢ ä»€ä¹ˆæ—¶é—´ï¼ˆtimestampï¼‰
â€¢ ä»€ä¹ˆæœåŠ¡ï¼ˆlabelsï¼‰  
â€¢ ä»€ä¹ˆé—®é¢˜ï¼ˆannotationsï¼‰
â€¢ ä¸¥é‡ç¨‹åº¦ï¼ˆseverityï¼‰

ç¤ºä¾‹ï¼š
æœåŠ¡å: web-server
é—®é¢˜: CPUä½¿ç”¨ç‡95%
æ—¶é—´: 2024-09-21 15:30:00
ä¸¥é‡ç¨‹åº¦: critical
```

**â‘¡ åˆ†ç»„ï¼ˆGroupingï¼‰**
```
ğŸ’¡ ç”Ÿæ´»ç±»æ¯”ï¼š
æ”¶å¿«é€’æ—¶ï¼Œå¿«é€’å‘˜ä¸ä¼šä¸€ä¸ªåŒ…è£¹æ•²ä¸€æ¬¡é—¨
è€Œæ˜¯æ”’å¤Ÿå‡ ä¸ªåŒ…è£¹ä¸€èµ·é€

Alertmanager ä¹Ÿæ˜¯è¿™æ ·ï¼š
â€¢ ç›¸åŒç±»å‹çš„å‘Šè­¦ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´
â€¢ æ”’å¤Ÿä¸€æ‰¹åä¸€èµ·å‘é€é€šçŸ¥
â€¢ é¿å…çŸ­æ—¶é—´å†…æ”¶åˆ°å¤§é‡é‡å¤é‚®ä»¶

é…ç½®ç¤ºä¾‹ï¼š
group_by: ['alertname', 'service']  # æŒ‰å‘Šè­¦åç§°å’ŒæœåŠ¡åˆ†ç»„
group_wait: 30s                     # ç­‰å¾…30ç§’æ”¶é›†åŒç»„å‘Šè­¦
```

**â‘¢ è·¯ç”±ï¼ˆRoutingï¼‰**
```
ğŸ¯ æ™ºèƒ½åˆ†å‘æœºåˆ¶ï¼š
å°±åƒé‚®å±€æ ¹æ®åœ°å€æŠŠä¿¡ä»¶é€åˆ°ä¸åŒåœ°æ–¹

å‘Šè­¦è·¯ç”±è§„åˆ™ï¼š
â€¢ æ•°æ®åº“å‘Šè­¦ â†’ å‘ç»™ DBA å›¢é˜Ÿ
â€¢ ç½‘ç»œå‘Šè­¦ â†’ å‘ç»™ç½‘ç»œå·¥ç¨‹å¸ˆ  
â€¢ ä¸¥é‡å‘Šè­¦ â†’ ç«‹å³é€šçŸ¥ + ç”µè¯
â€¢ ä¸€èˆ¬å‘Šè­¦ â†’ é‚®ä»¶é€šçŸ¥å³å¯
```

**â‘£ æŠ‘åˆ¶ï¼ˆInhibitionï¼‰**
```
ğŸ”‡ æ™ºèƒ½é™å™ªæœºåˆ¶ï¼š
å½“å¤§é—®é¢˜å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨å±è”½ç›¸å…³çš„å°é—®é¢˜å‘Šè­¦

å®é™…ä¾‹å­ï¼š
â€¢ æœåŠ¡å™¨å®•æœºäº†ï¼ˆä¸¥é‡å‘Šè­¦ï¼‰
â€¢ åŒæ—¶ä¼šè§¦å‘"æœåŠ¡ä¸å¯ç”¨"ã€"å“åº”æ—¶é—´è¿‡é•¿"ç­‰å‘Šè­¦
â€¢ æŠ‘åˆ¶æœºåˆ¶ä¼šè‡ªåŠ¨å±è”½åé¢è¿™äº›"è¿å¸¦å‘Šè­¦"
â€¢ åªä¿ç•™æ ¹æœ¬åŸå› çš„å‘Šè­¦

é…ç½®é€»è¾‘ï¼š
å¦‚æœæœ‰ severity=critical çš„å‘Šè­¦
é‚£ä¹ˆå±è”½åŒä¸€æœåŠ¡çš„ severity=warning å‘Šè­¦
```

**â‘¤ é™é»˜ï¼ˆSilencingï¼‰**
```
ğŸ› ï¸ ä¸´æ—¶å±è”½æœºåˆ¶ï¼š
ç³»ç»Ÿç»´æŠ¤æœŸé—´æš‚æ—¶å…³é—­ç‰¹å®šå‘Šè­¦

ä½¿ç”¨åœºæ™¯ï¼š
â€¢ æœåŠ¡å™¨ç»´æŠ¤æœŸé—´ï¼Œå±è”½è¯¥æœåŠ¡å™¨çš„æ‰€æœ‰å‘Šè­¦
â€¢ ç½‘ç»œå‡çº§æœŸé—´ï¼Œå±è”½ç½‘ç»œç›¸å…³å‘Šè­¦
â€¢ å·²çŸ¥é—®é¢˜ä¿®å¤ä¸­ï¼Œä¸´æ—¶å±è”½ç›¸å…³å‘Šè­¦

æ“ä½œæ–¹å¼ï¼š
â€¢ Webç•Œé¢æ‰‹åŠ¨è®¾ç½®
â€¢ APIæ¥å£æ‰¹é‡è®¾ç½®
â€¢ å¯ä»¥è®¾ç½®æ—¶é—´èŒƒå›´
```

---

## 4. ğŸ“ é…ç½®æ–‡ä»¶è¯¦è§£


### 4.1 é…ç½®æ–‡ä»¶æ•´ä½“ç»“æ„


**ğŸ—ï¸ alertmanager.yml ç»“æ„å›¾**
```
alertmanager.yml
â”œâ”€â”€ global          # å…¨å±€é…ç½®ï¼ˆé‚®ä»¶æœåŠ¡å™¨ç­‰ï¼‰
â”œâ”€â”€ templates        # é€šçŸ¥æ¨¡æ¿ç›®å½•
â”œâ”€â”€ route           # è·¯ç”±è§„åˆ™ï¼ˆæ ¸å¿ƒé…ç½®ï¼‰
â”‚   â”œâ”€â”€ receiver    # é»˜è®¤æ¥æ”¶è€…
â”‚   â”œâ”€â”€ group_by    # åˆ†ç»„è§„åˆ™
â”‚   â”œâ”€â”€ routes      # å­è·¯ç”±è§„åˆ™
â”‚   â””â”€â”€ ...
â”œâ”€â”€ receivers       # é€šçŸ¥æ¥æ”¶è€…é…ç½®
â”‚   â”œâ”€â”€ email_configs
â”‚   â”œâ”€â”€ slack_configs  
â”‚   â””â”€â”€ ...
â”œâ”€â”€ inhibit_rules   # æŠ‘åˆ¶è§„åˆ™
â””â”€â”€ templates       # æ¶ˆæ¯æ¨¡æ¿
```

### 4.2 å…¨å±€é…ç½®ï¼ˆglobalï¼‰


**ğŸ“§ é‚®ä»¶æœåŠ¡å™¨é…ç½®**
```yaml
global:
  # é‚®ä»¶æœåŠ¡å™¨åœ°å€å’Œç«¯å£
  smtp_smarthost: 'smtp.163.com:587'
  
  # å‘ä»¶äººé‚®ç®±
  smtp_from: 'monitor@company.com'
  
  # é‚®ç®±è®¤è¯ä¿¡æ¯
  smtp_auth_username: 'monitor@company.com'
  smtp_auth_password: 'your_password'
  
  # æ˜¯å¦éœ€è¦TLSåŠ å¯†
  smtp_require_tls: true
```

**ğŸŒ å…¶ä»–å…¨å±€é…ç½®**
```yaml
global:
  # å‘Šè­¦æ¢å¤åç­‰å¾…æ—¶é—´ï¼ˆé¿å…æŠ–åŠ¨ï¼‰
  resolve_timeout: 5m
  
  # HTTPå®¢æˆ·ç«¯é…ç½®
  http_config:
    # è¯·æ±‚è¶…æ—¶æ—¶é—´
    timeout: 10s
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼šå…¨å±€é…ç½®å°±åƒ"é»˜è®¤è®¾ç½®"ï¼Œå¦‚æœå…·ä½“çš„é€šçŸ¥æ¸ é“æ²¡æœ‰å•ç‹¬é…ç½®ï¼Œå°±ä½¿ç”¨è¿™é‡Œçš„é»˜è®¤å€¼ã€‚

### 4.3 è·¯ç”±é…ç½®ï¼ˆrouteï¼‰


**ğŸ¯ è·¯ç”±é…ç½®æ ¸å¿ƒå‚æ•°**

```yaml
route:
  # é»˜è®¤æ¥æ”¶è€…ï¼ˆå¿…å¡«ï¼‰
  receiver: 'default-team'
  
  # åˆ†ç»„æ¡ä»¶ï¼šç›¸åŒæ¡ä»¶çš„å‘Šè­¦ä¼šåˆå¹¶
  group_by: ['alertname', 'service', 'instance']
  
  # ç­‰å¾…æ—¶é—´ï¼šæ”¶åˆ°ç¬¬ä¸€ä¸ªå‘Šè­¦åç­‰å¾…å¤šä¹…å†å‘é€
  group_wait: 30s
  
  # é—´éš”æ—¶é—´ï¼šåŒä¸€ç»„å‘Šè­¦çš„å‘é€é—´éš”  
  group_interval: 5m
  
  # é‡å¤æ—¶é—´ï¼šå¤šä¹…é‡å¤å‘é€ä¸€æ¬¡ï¼ˆç”¨äºæŒç»­å‘Šè­¦ï¼‰
  repeat_interval: 4h
```

**ğŸ“– å‚æ•°è¯¦ç»†è¯´æ˜**

| å‚æ•° | **ä½œç”¨** | **é€šä¿—è§£é‡Š** | **æ¨èå€¼** |
|------|---------|-------------|-----------|
| `group_wait` | **ç­‰å¾…æ”¶é›†æ—¶é—´** | `å°±åƒç­‰ç”µæ¢¯ï¼Œç­‰30ç§’çœ‹è¿˜æœ‰æ²¡æœ‰äºº` | `10s-30s` |
| `group_interval` | **åŒç»„é—´éš”æ—¶é—´** | `åŒä¸€é—®é¢˜ä¸è¦é¢‘ç¹æ‰“æ‰°ï¼Œè‡³å°‘éš”5åˆ†é’Ÿ` | `5m-10m` |
| `repeat_interval` | **é‡å¤æé†’æ—¶é—´** | `é—®é¢˜æ²¡è§£å†³ï¼Œæ¯4å°æ—¶æé†’ä¸€æ¬¡` | `1h-12h` |

---

## 5. ğŸ¯ è·¯ç”±ç­–ç•¥é…ç½®


### 5.1 åŸºç¡€è·¯ç”±è§„åˆ™


**ğŸ”€ è·¯ç”±åŒ¹é…é€»è¾‘**
```
å‘Šè­¦è¿›æ¥ â†’ ä»ä¸Šåˆ°ä¸‹åŒ¹é…è·¯ç”±è§„åˆ™ â†’ æ‰¾åˆ°åŒ¹é…çš„ â†’ å‘é€ç»™å¯¹åº”æ¥æ”¶è€…

åŒ¹é…æ–¹å¼ï¼š
â€¢ match: ç²¾ç¡®åŒ¹é…
â€¢ match_re: æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
â€¢ æ²¡åŒ¹é…åˆ°ï¼šä½¿ç”¨é»˜è®¤receiver
```

**ğŸ“ åŸºç¡€è·¯ç”±é…ç½®ç¤ºä¾‹**
```yaml
route:
  receiver: 'default'  # é»˜è®¤æ¥æ”¶è€…
  group_by: ['alertname']
  
  routes:
    # ä¸¥é‡å‘Šè­¦ç«‹å³é€šçŸ¥
    - match:
        severity: critical
      receiver: 'critical-team'
      group_wait: 0s      # ç«‹å³å‘é€
      repeat_interval: 30m # 30åˆ†é’Ÿé‡å¤ä¸€æ¬¡
    
    # æ•°æ®åº“ç›¸å…³å‘Šè­¦
    - match:
        service: database
      receiver: 'dba-team'
    
    # ç½‘ç»œç›¸å…³å‘Šè­¦  
    - match_re:
        alertname: ^Network.*
      receiver: 'network-team'
```

### 5.2 é«˜çº§è·¯ç”±ç­–ç•¥


**ğŸ›ï¸ å¤æ‚è·¯ç”±é…ç½®**
```yaml
route:
  receiver: 'default'
  group_by: ['alertname', 'cluster', 'service']
  
  routes:
    # ç”Ÿäº§ç¯å¢ƒçš„ä¸¥é‡å‘Šè­¦
    - match:
        env: production
      receiver: 'prod-oncall'
      routes:
        # ç”Ÿäº§ç¯å¢ƒä¸­çš„æ•°æ®åº“å‘Šè­¦
        - match:
            service: database
          receiver: 'prod-dba'
          group_wait: 0s
        
        # ç”Ÿäº§ç¯å¢ƒä¸­çš„æ”¯ä»˜ç›¸å…³å‘Šè­¦
        - match:
            component: payment  
          receiver: 'payment-team'
          group_wait: 0s
          repeat_interval: 15m
    
    # æµ‹è¯•ç¯å¢ƒå‘Šè­¦ï¼ˆä¼˜å…ˆçº§è¾ƒä½ï¼‰
    - match:
        env: testing
      receiver: 'dev-team'
      group_wait: 5m
      repeat_interval: 2h
```

### 5.3 è·¯ç”±æœ€ä½³å®è·µ


**ğŸ¯ è·¯ç”±è®¾è®¡åŸåˆ™**

**â‘  æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†å±‚**
```yaml
# ç¬¬ä¸€å±‚ï¼šæŒ‰ä¸¥é‡ç¨‹åº¦
routes:
  - match:
      severity: critical     # ä¸¥é‡å‘Šè­¦
    receiver: 'oncall-team'
    group_wait: 0s          # ç«‹å³å‘é€
    
  - match:  
      severity: warning      # è­¦å‘Šå‘Šè­¦
    receiver: 'dev-team'
    group_wait: 30s         # ç­‰å¾…30ç§’
    
  - match:
      severity: info         # ä¿¡æ¯å‘Šè­¦  
    receiver: 'log-team'
    group_wait: 5m          # ç­‰å¾…5åˆ†é’Ÿ
```

**â‘¡ æŒ‰ä¸šåŠ¡å›¢é˜Ÿåˆ†ç»„**
```yaml
# ç¬¬äºŒå±‚ï¼šæŒ‰ä¸šåŠ¡å›¢é˜Ÿ
routes:
  - match_re:
      service: ^(user|auth|profile).*
    receiver: 'user-team'    # ç”¨æˆ·ç›¸å…³æœåŠ¡
    
  - match_re:
      service: ^(order|payment|billing).*  
    receiver: 'payment-team' # æ”¯ä»˜ç›¸å…³æœåŠ¡
    
  - match_re:
      service: ^(search|recommend).*
    receiver: 'algorithm-team' # ç®—æ³•ç›¸å…³æœåŠ¡
```

**ğŸ”¸ è·¯ç”±ä¼˜å…ˆçº§è¯´æ˜**
```
è·¯ç”±åŒ¹é…æ˜¯æŒ‰é¡ºåºè¿›è¡Œçš„ï¼š
1. å…ˆåŒ¹é…åˆ°çš„è§„åˆ™ä¼šè¢«ä½¿ç”¨
2. ä¸€ä¸ªå‘Šè­¦åªä¼šåŒ¹é…ä¸€ä¸ªè·¯ç”±
3. å­è·¯ç”±ä¼šç»§æ‰¿çˆ¶è·¯ç”±çš„é…ç½®
4. å…·ä½“é…ç½®ä¼šè¦†ç›–é»˜è®¤é…ç½®
```

---

## 6. ğŸ“¢ é€šçŸ¥æ¸ é“é…ç½®


### 6.1 é‚®ä»¶é€šçŸ¥é…ç½®


**ğŸ“§ åŸºç¡€é‚®ä»¶é…ç½®**
```yaml
receivers:
- name: 'email-team'
  email_configs:
  - to: 'admin@company.com'
    subject: 'ğŸš¨ å‘Šè­¦ï¼š{{ .GroupLabels.alertname }}'
    body: |
      äº²çˆ±çš„è¿ç»´åŒäº‹ï¼š
      
      å‘Šè­¦è¯¦æƒ…ï¼š
      {{ range .Alerts }}
      â€¢ æœåŠ¡ï¼š{{ .Labels.service }}
      â€¢ é—®é¢˜ï¼š{{ .Annotations.summary }}
      â€¢ æ—¶é—´ï¼š{{ .StartsAt.Format "2006-01-02 15:04:05" }}
      {{ end }}
      
      è¯·åŠæ—¶å¤„ç†ï¼
      
    # å¯é€‰ï¼šæ·»åŠ HTMLæ ¼å¼
    html: |
      <h2>ğŸš¨ ç³»ç»Ÿå‘Šè­¦</h2>
      <table border="1">
        <tr><th>æœåŠ¡</th><th>é—®é¢˜</th><th>æ—¶é—´</th></tr>
        {{ range .Alerts }}
        <tr>
          <td>{{ .Labels.service }}</td>
          <td>{{ .Annotations.summary }}</td>
          <td>{{ .StartsAt.Format "2006-01-02 15:04:05" }}</td>
        </tr>
        {{ end }}
      </table>
```

**ğŸ¨ é‚®ä»¶æ¨¡æ¿å˜é‡è¯´æ˜**
| å˜é‡ | **å«ä¹‰** | **ç¤ºä¾‹** |
|------|---------|---------|
| `.GroupLabels` | **åˆ†ç»„æ ‡ç­¾** | `{alertname: "HighCPU", service: "web"}` |
| `.Alerts` | **å‘Šè­¦åˆ—è¡¨** | `æ‰€æœ‰ç›¸å…³å‘Šè­¦çš„æ•°ç»„` |
| `.Labels` | **å•ä¸ªå‘Šè­¦æ ‡ç­¾** | `{instance: "server-01", job: "web"}` |
| `.Annotations` | **å‘Šè­¦æ³¨é‡Š** | `{summary: "CPUä½¿ç”¨ç‡è¿‡é«˜", description: "..."}` |
| `.StartsAt` | **å‘Šè­¦å¼€å§‹æ—¶é—´** | `2024-09-21T15:30:00Z` |

### 6.2 Slack é€šçŸ¥é…ç½®


**ğŸ’¬ Slack é›†æˆé…ç½®**
```yaml
receivers:
- name: 'slack-team'
  slack_configs:
  - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'
    channel: '#alerts'
    title: 'ğŸš¨ {{ .GroupLabels.alertname }}'
    text: |
      {{ range .Alerts }}
      *æœåŠ¡*: {{ .Labels.service }}
      *é—®é¢˜*: {{ .Annotations.summary }}  
      *ä¸¥é‡ç¨‹åº¦*: {{ .Labels.severity }}
      {{ end }}
    
    # å¯é€‰ï¼šè‡ªå®šä¹‰é¢œè‰²
    color: '{{ if eq .Status "firing" }}danger{{ else }}good{{ end }}'
    
    # å¯é€‰ï¼šæ·»åŠ æ“ä½œæŒ‰é’®
    actions:
    - type: button
      text: 'æŸ¥çœ‹è¯¦æƒ…'
      url: 'http://prometheus:9090/alerts'
```

### 6.3 ä¼ä¸šå¾®ä¿¡é€šçŸ¥é…ç½®


**ğŸ“± ä¼ä¸šå¾®ä¿¡ Webhook é…ç½®**
```yaml
receivers:
- name: 'wechat-team'
  webhook_configs:
  - url: 'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY'
    send_resolved: true
    http_config:
      timeout: 10s
    
    # ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ ¼å¼
    title: 'ç›‘æ§å‘Šè­¦'
    message: |
      {{ range .Alerts }}
      **å‘Šè­¦åç§°**: {{ .Labels.alertname }}
      **æœåŠ¡åç§°**: {{ .Labels.service }}  
      **å‘Šè­¦çº§åˆ«**: {{ .Labels.severity }}
      **å‘Šè­¦è¯¦æƒ…**: {{ .Annotations.summary }}
      **å‘Šè­¦æ—¶é—´**: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
      {{ end }}
```

### 6.4 å¤šæ¸ é“ç»„åˆé…ç½®


**ğŸ“¡ å¤šæ¸ é“é€šçŸ¥ç­–ç•¥**
```yaml
receivers:
# ä¸¥é‡å‘Šè­¦ï¼šå¤šç§æ–¹å¼åŒæ—¶é€šçŸ¥
- name: 'critical-alerts'
  email_configs:
  - to: 'oncall@company.com'
    subject: 'ğŸ”¥ ä¸¥é‡å‘Šè­¦ï¼š{{ .GroupLabels.alertname }}'
  
  slack_configs:
  - api_url: 'https://hooks.slack.com/services/xxx'
    channel: '#critical-alerts'
    text: '@here ä¸¥é‡å‘Šè­¦éœ€è¦ç«‹å³å¤„ç†'
  
  webhook_configs:
  - url: 'https://api.pagerduty.com/integration/xxx'  # PagerDuty
  - url: 'https://oapi.dingtalk.com/robot/send?xxx'   # é’‰é’‰

# ä¸€èˆ¬å‘Šè­¦ï¼šåªå‘é‚®ä»¶
- name: 'warning-alerts'  
  email_configs:
  - to: 'dev-team@company.com'
    subject: 'âš ï¸ è­¦å‘Šï¼š{{ .GroupLabels.alertname }}'
```

---

## 7. ğŸ”§ é«˜çº§åŠŸèƒ½é…ç½®


### 7.1 å‘Šè­¦æŠ‘åˆ¶è§„åˆ™


**ğŸ”‡ æŠ‘åˆ¶è§„åˆ™åŸç†**
```
æŠ‘åˆ¶è§„åˆ™çš„ä½œç”¨ï¼š
å½“Aå‘Šè­¦å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨å±è”½Bå‘Šè­¦

ğŸ’¡ ç”Ÿæ´»ä¾‹å­ï¼š
æˆ¿å­ç€ç«äº†ï¼ˆä¸¥é‡å‘Šè­¦ï¼‰
â†“
çƒŸé›¾æŠ¥è­¦å™¨å“ï¼ˆç›¸å…³å‘Šè­¦ï¼‰
ç¯æ³¡çƒ§åäº†ï¼ˆæ— å…³å‘Šè­¦ï¼‰
â†“  
åªé€šçŸ¥"ç€ç«"ï¼Œå±è”½"çƒŸé›¾"
ä¸å±è”½"ç¯æ³¡çƒ§å"ï¼ˆä¸ç›¸å…³ï¼‰
```

**ğŸ“ æŠ‘åˆ¶è§„åˆ™é…ç½®**
```yaml
inhibit_rules:
# è§„åˆ™1ï¼šæœåŠ¡å™¨å®•æœºæ—¶ï¼ŒæŠ‘åˆ¶è¯¥æœåŠ¡å™¨çš„å…¶ä»–å‘Šè­¦
- source_match:
    alertname: 'InstanceDown'    # æºå‘Šè­¦ï¼šæœåŠ¡å™¨å®•æœº
  target_match:
    severity: 'warning'          # ç›®æ ‡å‘Šè­¦ï¼šè­¦å‘Šçº§åˆ«
  equal: ['instance']            # ç›¸åŒå®ä¾‹çš„å‘Šè­¦æ‰æŠ‘åˆ¶

# è§„åˆ™2ï¼šä¸¥é‡å‘Šè­¦æŠ‘åˆ¶è­¦å‘Šå‘Šè­¦  
- source_match:
    severity: 'critical'         # æºå‘Šè­¦ï¼šä¸¥é‡çº§åˆ«
  target_match:
    severity: 'warning'          # ç›®æ ‡å‘Šè­¦ï¼šè­¦å‘Šçº§åˆ«  
  equal: ['alertname', 'service'] # ç›¸åŒå‘Šè­¦åç§°å’ŒæœåŠ¡

# è§„åˆ™3ï¼šæ•°æ®åº“ä¸»åº“å¼‚å¸¸æ—¶ï¼ŒæŠ‘åˆ¶ä»åº“å‘Šè­¦
- source_match:
    alertname: 'DatabaseMasterDown'
    role: 'master'
  target_match_re:
    alertname: 'Database.*'
    role: 'slave'
  equal: ['cluster']             # ç›¸åŒæ•°æ®åº“é›†ç¾¤
```

### 7.2 é™é»˜ç®¡ç†


**ğŸ› ï¸ é™é»˜åŠŸèƒ½ä½¿ç”¨åœºæ™¯**

**â‘  è®¡åˆ’ç»´æŠ¤é™é»˜**
```yaml
# é€šè¿‡ API åˆ›å»ºé™é»˜è§„åˆ™
curl -X POST http://alertmanager:9093/api/v1/silences \
  -H "Content-Type: application/json" \
  -d '{
    "matchers": [
      {
        "name": "service",
        "value": "web-server",
        "isRegex": false
      }
    ],
    "startsAt": "2024-09-21T20:00:00Z",
    "endsAt": "2024-09-21T22:00:00Z", 
    "comment": "webæœåŠ¡å™¨ç»´æŠ¤å‡çº§",
    "createdBy": "admin@company.com"
  }'
```

**â‘¡ Web ç•Œé¢é™é»˜æ“ä½œ**
```
é€šè¿‡ Alertmanager Web ç•Œé¢ï¼š
1. è®¿é—® http://alertmanager:9093
2. ç‚¹å‡» "Silences" æ ‡ç­¾é¡µ
3. ç‚¹å‡» "New Silence" æŒ‰é’®
4. å¡«å†™åŒ¹é…æ¡ä»¶ï¼š
   - service = "database"
   - instance = "db-01"
5. è®¾ç½®æ—¶é—´èŒƒå›´
6. æ·»åŠ å¤‡æ³¨è¯´æ˜
7. ç‚¹å‡» "Create" åˆ›å»ºé™é»˜
```

### 7.3 å‘Šè­¦æ¨¡æ¿å®šåˆ¶


**ğŸ¨ è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿**

**â‘  åˆ›å»ºæ¨¡æ¿æ–‡ä»¶**
```yaml
# /etc/alertmanager/templates/custom.tmpl
{{ define "email.subject" }}
[{{ .Status | toUpper }}] {{ .GroupLabels.alertname }} ({{ len .Alerts }} ä¸ªå‘Šè­¦)
{{ end }}

{{ define "email.body" }}
{{ if eq .Status "firing" }}
ğŸš¨ å‘ç° {{ len .Alerts }} ä¸ªæ–°å‘Šè­¦ï¼š
{{ else }}
âœ… ä»¥ä¸‹ {{ len .Alerts }} ä¸ªå‘Šè­¦å·²æ¢å¤ï¼š  
{{ end }}

{{ range .Alerts }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ å‘Šè­¦åç§°: {{ .Labels.alertname }}
ğŸ·ï¸  æœåŠ¡åç§°: {{ .Labels.service }}
ğŸ“ å®ä¾‹åœ°å€: {{ .Labels.instance }}
âš ï¸  ä¸¥é‡ç¨‹åº¦: {{ .Labels.severity }}
ğŸ“ é—®é¢˜æè¿°: {{ .Annotations.summary }}
ğŸ• å¼€å§‹æ—¶é—´: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
{{ if .EndsAt }}ğŸ•‘ ç»“æŸæ—¶é—´: {{ .EndsAt.Format "2006-01-02 15:04:05" }}{{ end }}
{{ end }}

ğŸ”— æŸ¥çœ‹è¯¦æƒ…: http://prometheus:9090/alerts
{{ end }}
```

**â‘¡ åœ¨é…ç½®ä¸­ä½¿ç”¨æ¨¡æ¿**
```yaml
# alertmanager.yml
templates:
  - '/etc/alertmanager/templates/*.tmpl'

receivers:
- name: 'email-team'
  email_configs:
  - to: 'admin@company.com'
    subject: '{{ template "email.subject" . }}'
    body: '{{ template "email.body" . }}'
```

---

## 8. ğŸ® å®æˆ˜é…ç½®ç¤ºä¾‹


### 8.1 å°å‹å›¢é˜Ÿé…ç½®


**ğŸ‘¥ é€‚ç”¨åœºæ™¯**ï¼š10äººä»¥ä¸‹çš„å°å›¢é˜Ÿï¼ŒæœåŠ¡è¾ƒå°‘

```yaml
global:
  smtp_smarthost: 'smtp.163.com:587'
  smtp_from: 'alert@yourcompany.com'
  smtp_auth_username: 'alert@yourcompany.com'
  smtp_auth_password: 'your_password'

route:
  receiver: 'team-all'
  group_by: ['alertname']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 2h

receivers:
- name: 'team-all'
  email_configs:
  - to: 'team@yourcompany.com'
    subject: 'å‘Šè­¦ï¼š{{ .GroupLabels.alertname }}'
    body: |
      {{ range .Alerts }}
      æœåŠ¡ï¼š{{ .Labels.service }}
      é—®é¢˜ï¼š{{ .Annotations.summary }}
      æ—¶é—´ï¼š{{ .StartsAt.Format "2006-01-02 15:04:05" }}
      {{ end }}
```

### 8.2 ä¸­å‹ä¼ä¸šé…ç½®


**ğŸ¢ é€‚ç”¨åœºæ™¯**ï¼š50-200äººï¼Œå¤šä¸ªä¸šåŠ¡å›¢é˜Ÿ

```yaml
global:
  smtp_smarthost: 'mail.company.com:587'
  smtp_from: 'alertmanager@company.com'

route:
  receiver: 'default'
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  
  routes:
  # ä¸¥é‡å‘Šè­¦ç«‹å³é€šçŸ¥å€¼ç­äººå‘˜
  - match:
      severity: critical
    receiver: 'oncall-team'
    group_wait: 0s
    repeat_interval: 30m
    
  # æ•°æ®åº“å‘Šè­¦é€šçŸ¥DBAå›¢é˜Ÿ
  - match_re:
      service: ^(mysql|postgres|redis).*
    receiver: 'dba-team'
    
  # å‰ç«¯æœåŠ¡å‘Šè­¦é€šçŸ¥å‰ç«¯å›¢é˜Ÿ  
  - match_re:
      service: ^(web|frontend|nginx).*
    receiver: 'frontend-team'
    
  # åç«¯APIå‘Šè­¦é€šçŸ¥åç«¯å›¢é˜Ÿ
  - match_re:
      service: ^(api|backend|microservice).*
    receiver: 'backend-team'

receivers:
- name: 'default'
  email_configs:
  - to: 'ops@company.com'

- name: 'oncall-team'
  email_configs:
  - to: 'oncall@company.com'
    subject: 'ğŸ”¥ ä¸¥é‡å‘Šè­¦ï¼š{{ .GroupLabels.alertname }}'
  slack_configs:
  - api_url: 'https://hooks.slack.com/services/xxx'
    channel: '#critical-alerts'
    text: '@channel ä¸¥é‡å‘Šè­¦ï¼Œéœ€è¦ç«‹å³å¤„ç†ï¼'

- name: 'dba-team'
  email_configs:
  - to: 'dba@company.com'
    subject: 'ğŸ—„ï¸ æ•°æ®åº“å‘Šè­¦ï¼š{{ .GroupLabels.alertname }}'

- name: 'frontend-team'  
  email_configs:
  - to: 'frontend@company.com'

- name: 'backend-team'
  email_configs:
  - to: 'backend@company.com'

# æŠ‘åˆ¶è§„åˆ™ï¼šä¸¥é‡å‘Šè­¦ä¼šæŠ‘åˆ¶è­¦å‘Šå‘Šè­¦
inhibit_rules:
- source_match:
    severity: 'critical'
  target_match:
    severity: 'warning'
  equal: ['alertname', 'instance']
```

### 8.3 å¤§å‹ä¼ä¸šé…ç½®


**ğŸ­ é€‚ç”¨åœºæ™¯**ï¼š500äººä»¥ä¸Šï¼Œå¤æ‚å¾®æœåŠ¡æ¶æ„

```yaml
global:
  smtp_smarthost: 'relay.company.com:25'
  smtp_from: 'noreply-alerts@company.com'
  resolve_timeout: 5m

route:
  receiver: 'null'  # é»˜è®¤ä¸¢å¼ƒ
  group_by: ['alertname', 'cluster', 'service', 'environment']
  group_wait: 15s
  group_interval: 30s
  repeat_interval: 4h
  
  routes:
  # ç”Ÿäº§ç¯å¢ƒå‘Šè­¦
  - match:
      environment: production
    receiver: 'prod-default'
    routes:
    # ç”Ÿäº§ç¯å¢ƒä¸¥é‡å‘Šè­¦
    - match:
        severity: critical
      receiver: 'prod-critical'
      group_wait: 0s
      repeat_interval: 15m
      
    # ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“å‘Šè­¦  
    - match:
        component: database
      receiver: 'prod-dba'
      
    # ç”Ÿäº§ç¯å¢ƒæ”¯ä»˜ç³»ç»Ÿå‘Šè­¦
    - match:
        business: payment
      receiver: 'payment-oncall'
      group_wait: 0s
      
  # æµ‹è¯•ç¯å¢ƒå‘Šè­¦ï¼ˆè¾ƒä½ä¼˜å…ˆçº§ï¼‰
  - match:
      environment: staging
    receiver: 'staging-team'
    group_wait: 5m
    repeat_interval: 8h

receivers:
- name: 'null'      # ç©ºæ¥æ”¶è€…ï¼Œç”¨äºä¸¢å¼ƒä¸é‡è¦å‘Šè­¦

- name: 'prod-critical'
  email_configs:
  - to: 'prod-oncall@company.com'
    subject: 'ğŸš¨ã€ç”Ÿäº§ä¸¥é‡ã€‘{{ .GroupLabels.alertname }}'
  slack_configs:  
  - api_url: 'https://hooks.slack.com/services/xxx'
    channel: '#prod-critical'
    username: 'AlertBot'
    title: 'ç”Ÿäº§ç¯å¢ƒä¸¥é‡å‘Šè­¦'
    text: '@here éœ€è¦ç«‹å³å¤„ç†çš„ä¸¥é‡å‘Šè­¦'
  pagerduty_configs:
  - service_key: 'YOUR_PAGERDUTY_KEY'

- name: 'prod-dba'
  email_configs:
  - to: 'dba-oncall@company.com'
    cc: 'dba-team@company.com'
  slack_configs:
  - api_url: 'https://hooks.slack.com/services/xxx'  
    channel: '#dba-alerts'

- name: 'payment-oncall'
  email_configs:
  - to: 'payment-oncall@company.com'
  webhook_configs:
  - url: 'https://api.pagerduty.com/integration/xxx'

# å¤æ‚æŠ‘åˆ¶è§„åˆ™
inhibit_rules:
# èŠ‚ç‚¹å®•æœºæŠ‘åˆ¶è¯¥èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰æœåŠ¡å‘Šè­¦
- source_match:
    alertname: 'NodeDown'
  target_match_re:
    alertname: '^(HighCPU|HighMemory|DiskSpaceLow)$'
  equal: ['instance']

# æ•°æ®åº“ä¸»ä»åˆ‡æ¢æœŸé—´æŠ‘åˆ¶è¿æ¥å‘Šè­¦  
- source_match:
    alertname: 'DatabaseFailover'
  target_match:
    alertname: 'DatabaseConnectionFailed'
  equal: ['cluster']
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”‘ äº”å¤§æ ¸å¿ƒåŠŸèƒ½**
```
ğŸ“¨ æ¥æ”¶å‘Šè­¦ï¼šä» Prometheus æ¥æ”¶å‘Šè­¦ä¿¡æ¯
ğŸ¯ æ™ºèƒ½è·¯ç”±ï¼šæ ¹æ®è§„åˆ™åˆ†å‘ç»™ä¸åŒå›¢é˜Ÿ
ğŸ“¢ å¤šæ¸ é“é€šçŸ¥ï¼šé‚®ä»¶ã€Slackã€å¾®ä¿¡ç­‰
ğŸ”‡ é™å™ªå¤„ç†ï¼šå»é‡ã€åˆ†ç»„ã€æŠ‘åˆ¶ã€é™é»˜
ğŸ”„ çŠ¶æ€ç®¡ç†ï¼šè·Ÿè¸ªå‘Šè­¦ç”Ÿå‘½å‘¨æœŸ
```

### 9.2 å…³é”®é…ç½®è¦ç‚¹


**âš™ï¸ é…ç½®æœ€ä½³å®è·µ**

| é…ç½®é¡¹ | **æ¨èåšæ³•** | **å¸¸è§é”™è¯¯** |
|-------|-------------|-------------|
| **group_wait** | `ç”Ÿäº§ç¯å¢ƒ0-30sï¼Œæµ‹è¯•ç¯å¢ƒ1-5m` | `è®¾ç½®è¿‡é•¿å¯¼è‡´ä¸¥é‡å‘Šè­¦å»¶è¿Ÿ` |
| **repeat_interval** | `ä¸¥é‡å‘Šè­¦15-30mï¼Œä¸€èˆ¬å‘Šè­¦2-4h` | `è®¾ç½®è¿‡çŸ­é€ æˆå‘Šè­¦è½°ç‚¸` |
| **è·¯ç”±è§„åˆ™** | `ä¸¥é‡ç¨‹åº¦ä¼˜å…ˆï¼Œç„¶åæŒ‰å›¢é˜Ÿåˆ†ç»„` | `è§„åˆ™è¿‡äºå¤æ‚éš¾ä»¥ç»´æŠ¤` |
| **æŠ‘åˆ¶è§„åˆ™** | `åªæŠ‘åˆ¶æ˜ç¡®çš„å› æœå…³ç³»` | `è¿‡åº¦æŠ‘åˆ¶é—æ¼é‡è¦å‘Šè­¦` |

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ è§£å†³çš„æ ¸å¿ƒä¸šåŠ¡é—®é¢˜**
- **å‘Šè­¦é£æš´**ï¼šä»æ¯åˆ†é’Ÿ100å°é‚®ä»¶åˆ°æ¯å°æ—¶1å°æ±‡æ€»
- **ç²¾å‡†é€šçŸ¥**ï¼šæ•°æ®åº“é—®é¢˜ä¸å†é€šçŸ¥å‰ç«¯å›¢é˜Ÿ
- **å“åº”é€Ÿåº¦**ï¼šä¸¥é‡å‘Šè­¦0ç§’å‘é€ï¼Œä¸€èˆ¬å‘Šè­¦æ™ºèƒ½ç­‰å¾…
- **è¿ç»´æ•ˆç‡**ï¼šç»´æŠ¤æœŸé—´è‡ªåŠ¨é™é»˜ï¼Œå‡å°‘æ— æ•ˆå‘Šè­¦

### 9.4 å­¦ä¹ å»ºè®®


**ğŸ“š æ¸è¿›å¼å­¦ä¹ è·¯å¾„**
```
ç¬¬1é˜¶æ®µï¼šåŸºç¡€é…ç½®
â€¢ æŒæ¡åŸºæœ¬çš„é‚®ä»¶é€šçŸ¥é…ç½®
â€¢ ç†è§£ group_by å’Œæ—¶é—´å‚æ•°

ç¬¬2é˜¶æ®µï¼šè·¯ç”±è§„åˆ™  
â€¢ å­¦ä¼šæŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»
â€¢ æŒæ¡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…

ç¬¬3é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½
â€¢ é…ç½®æŠ‘åˆ¶è§„åˆ™é™å™ª
â€¢ ä½¿ç”¨é™é»˜åŠŸèƒ½

ç¬¬4é˜¶æ®µï¼šç”Ÿäº§ä¼˜åŒ–
â€¢ å¤šæ¸ é“é€šçŸ¥é›†æˆ
â€¢ è‡ªå®šä¹‰æ¨¡æ¿å’Œç›‘æ§
```

**ğŸ¯ å…³é”®è®°å¿†ç‚¹**
- Alertmanager æ˜¯å‘Šè­¦çš„"æ™ºèƒ½ç®¡å®¶"
- è·¯ç”±è§„åˆ™å†³å®š"è°"æ”¶åˆ°å‘Šè­¦
- æ—¶é—´å‚æ•°æ§åˆ¶"ä½•æ—¶"å‘é€å‘Šè­¦  
- æŠ‘åˆ¶å’Œé™é»˜ç”¨äº"é™å™ª"
- é…ç½®è¦ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥å®Œå–„

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æ¥æ”¶è·¯ç”±é€šçŸ¥ç®¡ï¼Œåˆ†ç»„å»é‡æŠ‘åˆ¶å…¨
ä¸¥é‡ç«‹å‘ä¸€èˆ¬ç­‰ï¼Œå›¢é˜Ÿåˆ†å·¥èŒè´£æ¸…
```