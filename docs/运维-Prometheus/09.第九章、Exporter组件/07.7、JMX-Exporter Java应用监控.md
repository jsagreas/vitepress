---
title: 7ã€JMX-Exporter Javaåº”ç”¨ç›‘æ§
---
## ğŸ“š ç›®å½•

1. [JMX ExporteråŸºç¡€æ¦‚å¿µ](#1-JMX-ExporteråŸºç¡€æ¦‚å¿µ)
2. [å®‰è£…ä¸åŸºæœ¬é…ç½®](#2-å®‰è£…ä¸åŸºæœ¬é…ç½®)
3. [Javaåº”ç”¨ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡](#3-Javaåº”ç”¨ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡)
4. [é…ç½®æ–‡ä»¶æ·±åº¦è§£æ](#4-é…ç½®æ–‡ä»¶æ·±åº¦è§£æ)
5. [å¸¸è§åº”ç”¨é›†æˆå®è·µ](#5-å¸¸è§åº”ç”¨é›†æˆå®è·µ)
6. [ç›‘æ§ç­–ç•¥ä¸æœ€ä½³å®è·µ](#6-ç›‘æ§ç­–ç•¥ä¸æœ€ä½³å®è·µ)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ JMX ExporteråŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯JMX Exporter


**ğŸ”¸ ç®€å•ç†è§£**
JMX Exporterå°±åƒæ˜¯Javaåº”ç”¨çš„"ä½“æ£€åŒ»ç”Ÿ"ï¼Œå®ƒèƒ½è¯»æ‡‚Javaç¨‹åºå†…éƒ¨çš„è¿è¡ŒçŠ¶æ€ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯ç¿»è¯‘æˆPrometheusèƒ½ç†è§£çš„æ ¼å¼ã€‚

```
Javaåº”ç”¨å†…éƒ¨çŠ¶æ€ â†’ JMX Exporter â†’ PrometheusæŒ‡æ ‡æ ¼å¼
(åªæœ‰Javaæ‡‚)      (ç¿»è¯‘å®˜)      (ç›‘æ§ç³»ç»Ÿèƒ½æ‡‚)
```

**ğŸ’¡ æ ¸å¿ƒä½œç”¨**
- **æ•°æ®æ¡¥æ¢**ï¼šå°†Javaçš„JMXæ•°æ®è½¬æ¢ä¸ºPrometheusæŒ‡æ ‡
- **æ— ä¾µå…¥ç›‘æ§**ï¼šä¸éœ€è¦ä¿®æ”¹åº”ç”¨ä»£ç å°±èƒ½è·å–ç›‘æ§æ•°æ®
- **æ ‡å‡†åŒ–è¾“å‡º**ï¼šç»Ÿä¸€çš„æŒ‡æ ‡æ ¼å¼ä¾¿äºç›‘æ§å’Œå‘Šè­¦

### 1.2 JMXæ˜¯ä»€ä¹ˆ


**ğŸ”¸ JMXå…¨ç§°**ï¼šJava Management Extensionsï¼ˆJavaç®¡ç†æ‰©å±•ï¼‰

**é€šä¿—è§£é‡Š**ï¼š
JMXå°±åƒæ˜¯Javaåº”ç”¨çš„"ä»ªè¡¨ç›˜"ï¼Œè®°å½•ç€ç¨‹åºè¿è¡Œçš„å„ç§çŠ¶æ€ï¼š
- ç”¨äº†å¤šå°‘å†…å­˜
- åˆ›å»ºäº†å¤šå°‘çº¿ç¨‹
- åƒåœ¾å›æ”¶äº†å‡ æ¬¡
- åŠ è½½äº†å¤šå°‘ä¸ªç±»

```
æƒ³è±¡ä¸€ä¸‹æ±½è½¦ä»ªè¡¨ç›˜ï¼š
ğŸš— æ±½è½¦ä»ªè¡¨ç›˜æ˜¾ç¤ºï¼šé€Ÿåº¦ã€æ²¹é‡ã€æ¸©åº¦
â˜• JMXæ˜¾ç¤ºï¼šå†…å­˜ã€çº¿ç¨‹ã€GCçŠ¶æ€
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦JMX Exporter


**ğŸ”¹ ç›‘æ§ç—›ç‚¹**
- Javaåº”ç”¨è¿è¡Œåœ¨"é»‘ç›’"ä¸­ï¼Œå¤–éƒ¨çœ‹ä¸åˆ°å†…éƒ¨çŠ¶æ€
- å‡ºé—®é¢˜æ—¶ä¸çŸ¥é“æ˜¯å†…å­˜ä¸å¤Ÿè¿˜æ˜¯çº¿ç¨‹å¡æ­»
- æ€§èƒ½è°ƒä¼˜æ²¡æœ‰æ•°æ®æ”¯æ’‘

**ğŸ”¹ è§£å†³æ–¹æ¡ˆ**
JMX Exporterè®©æˆ‘ä»¬èƒ½å¤Ÿï¼š
- **å®æ—¶æŸ¥çœ‹**ï¼šåº”ç”¨çš„å¥åº·çŠ¶å†µ
- **æå‰é¢„è­¦**ï¼šå‘ç°æ½œåœ¨é—®é¢˜
- **æ•°æ®åˆ†æ**ï¼šåŸºäºæŒ‡æ ‡ä¼˜åŒ–æ€§èƒ½

---

## 2. ğŸ› ï¸ å®‰è£…ä¸åŸºæœ¬é…ç½®


### 2.1 è·å–JMX Exporter


**ğŸ“¦ ä¸‹è½½æ–¹å¼**
```bash
# ä»GitHubä¸‹è½½æœ€æ–°ç‰ˆæœ¬
wget https://repo1.maven.org/maven2/io/prometheus/jmx/jmx_prometheus_javaagent/0.19.0/jmx_prometheus_javaagent-0.19.0.jar

# å»ºè®®æ”¾åœ¨ç»Ÿä¸€ç›®å½•
mkdir -p /opt/monitoring/jmx
mv jmx_prometheus_javaagent-0.19.0.jar /opt/monitoring/jmx/
```

**ğŸ” æ–‡ä»¶è¯´æ˜**
- **jmx_prometheus_javaagent.jar**ï¼šè¿™æ˜¯æ ¸å¿ƒç¨‹åºï¼Œç›¸å½“äºç›‘æ§"æ¢é’ˆ"
- å¤§å°çº¦1-2MBï¼Œå¯åŠ¨æ—¶ä¼šé™„åŠ åˆ°Javaåº”ç”¨ä¸Š

### 2.2 åŸºç¡€é…ç½®æ–‡ä»¶


**ğŸ“ åˆ›å»ºé…ç½®æ–‡ä»¶**
```yaml
# /opt/monitoring/jmx/config.yaml
# åŸºç¡€é…ç½® - ç›‘æ§æœ€é‡è¦çš„æŒ‡æ ‡

# å…¨å±€è®¾ç½®
startDelaySeconds: 0        # å¯åŠ¨å»¶è¿Ÿï¼ˆç§’ï¼‰
hostPort: 127.0.0.1:1234   # JMXè¿æ¥åœ°å€ï¼ˆå¯é€‰ï¼‰
username:                   # JMXç”¨æˆ·åï¼ˆå¯é€‰ï¼‰
password:                   # JMXå¯†ç ï¼ˆå¯é€‰ï¼‰
ssl: false                  # æ˜¯å¦ä½¿ç”¨SSL

# è§„åˆ™é…ç½®
rules:
  # å†…å­˜ä½¿ç”¨æƒ…å†µ
  - pattern: "java.lang<type=Memory><>HeapMemoryUsage"
    name: "jvm_memory_heap_bytes"
    help: "JVMå †å†…å­˜ä½¿ç”¨æƒ…å†µ"
    type: GAUGE
    
  # GCåƒåœ¾å›æ”¶
  - pattern: "java.lang<type=GarbageCollector, name=(.*)><>CollectionCount"
    name: "jvm_gc_collection_total"
    help: "GCåƒåœ¾å›æ”¶æ¬¡æ•°"
    type: COUNTER
    labels:
      gc_name: "$1"
```

**ğŸ¯ é…ç½®æ–‡ä»¶è¯´æ˜**
- **startDelaySeconds**ï¼šåº”ç”¨å¯åŠ¨åå¤šå°‘ç§’å¼€å§‹æ”¶é›†æŒ‡æ ‡
- **rules**ï¼šå®šä¹‰è¦æ”¶é›†å“ªäº›æŒ‡æ ‡ä»¥åŠå¦‚ä½•è½¬æ¢
- **pattern**ï¼šåŒ¹é…JMX Beançš„è§„åˆ™ï¼ˆæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼‰
- **name**ï¼šè½¬æ¢åçš„PrometheusæŒ‡æ ‡åç§°

### 2.3 å¯åŠ¨åº”ç”¨


**ğŸš€ Javaåº”ç”¨å¯åŠ¨ç¤ºä¾‹**
```bash
# åŸºæœ¬å¯åŠ¨æ–¹å¼
java -javaagent:/opt/monitoring/jmx/jmx_prometheus_javaagent-0.19.0.jar=8080:/opt/monitoring/jmx/config.yaml \
     -jar your-application.jar

# å‚æ•°è§£é‡Šï¼š
# 8080: JMX Exporteræš´éœ²æŒ‡æ ‡çš„ç«¯å£
# config.yaml: é…ç½®æ–‡ä»¶è·¯å¾„
# your-application.jar: ä½ çš„Javaåº”ç”¨
```

**ğŸ’¡ å¯åŠ¨å‚æ•°è¯¦è§£**
```
-javaagent:jaråŒ…è·¯å¾„=ç«¯å£:é…ç½®æ–‡ä»¶

ğŸ”¸ jaråŒ…è·¯å¾„ï¼šJMX Exporterçš„ä½ç½®
ğŸ”¸ ç«¯å£ï¼šPrometheusæŠ“å–æŒ‡æ ‡çš„ç«¯å£
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼šå®šä¹‰æ”¶é›†è§„åˆ™çš„YAMLæ–‡ä»¶
```

### 2.4 éªŒè¯å®‰è£…


**âœ… æ£€æŸ¥æ˜¯å¦æ­£å¸¸å·¥ä½œ**
```bash
# è®¿é—®æŒ‡æ ‡ç«¯ç‚¹
curl http://localhost:8080/metrics

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# jvm_memory_heap_bytes{area="heap",id="used"} 123456789
# jvm_gc_collection_total{gc_name="G1 Young Generation"} 42
```

**ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥**
- **ç«¯å£è¢«å ç”¨**ï¼šæ›´æ¢ç«¯å£å·æˆ–æ£€æŸ¥å…¶ä»–è¿›ç¨‹
- **é…ç½®æ–‡ä»¶é”™è¯¯**ï¼šæ£€æŸ¥YAMLè¯­æ³•å’Œè·¯å¾„
- **æƒé™é—®é¢˜**ï¼šç¡®ä¿Javaè¿›ç¨‹æœ‰è¯»å–é…ç½®æ–‡ä»¶çš„æƒé™

---

## 3. ğŸ“Š Javaåº”ç”¨ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡


### 3.1 å†…å­˜ç›‘æ§æŒ‡æ ‡


**ğŸ§  å †å†…å­˜ä½¿ç”¨æƒ…å†µ**

å †å†…å­˜å°±åƒæ˜¯Javaç¨‹åºçš„"å·¥ä½œå°"ï¼Œå­˜æ”¾ç€ç¨‹åºè¿è¡Œæ—¶åˆ›å»ºçš„å¯¹è±¡ã€‚

```yaml
# å †å†…å­˜æ€»é‡
- pattern: "java.lang<type=Memory><>HeapMemoryUsage"
  name: "jvm_memory_heap_bytes"
  help: "JVMå †å†…å­˜ä½¿ç”¨é‡"
  type: GAUGE
  
# éå †å†…å­˜ï¼ˆæ–¹æ³•åŒºã€ä»£ç ç¼“å­˜ç­‰ï¼‰
- pattern: "java.lang<type=Memory><>NonHeapMemoryUsage" 
  name: "jvm_memory_nonheap_bytes"
  help: "JVMéå †å†…å­˜ä½¿ç”¨é‡"
  type: GAUGE
```

**ğŸ¯ å…³é”®ç†è§£**ï¼š
- **used**ï¼šå½“å‰æ­£åœ¨ä½¿ç”¨çš„å†…å­˜
- **committed**ï¼šå·²åˆ†é…ç»™JVMçš„å†…å­˜
- **max**ï¼šæœ€å¤§å¯ç”¨å†…å­˜ï¼ˆ-Xmxè®¾ç½®çš„å€¼ï¼‰

**âš ï¸ ç›‘æ§é‡ç‚¹**ï¼š
- å †å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%éœ€è¦å…³æ³¨
- é¢‘ç¹æ¥è¿‘maxå€¼å¯èƒ½å¯¼è‡´OutOfMemoryError

### 3.2 åƒåœ¾å›æ”¶ç›‘æ§


**ğŸ—‘ï¸ GCåƒåœ¾å›æ”¶ç›‘æ§**

åƒåœ¾å›æ”¶å°±åƒæ˜¯ç¨‹åºçš„"æ¸…æ´å·¥"ï¼Œå®šæœŸæ¸…ç†ä¸ç”¨çš„å¯¹è±¡é‡Šæ”¾å†…å­˜ã€‚

```yaml
# GCå›æ”¶æ¬¡æ•°
- pattern: "java.lang<type=GarbageCollector, name=(.*)><>CollectionCount"
  name: "jvm_gc_collection_total"
  help: "åƒåœ¾å›æ”¶æ€»æ¬¡æ•°"
  type: COUNTER
  labels:
    gc_name: "$1"

# GCè€—æ—¶
- pattern: "java.lang<type=GarbageCollector, name=(.*)><>CollectionTime"
  name: "jvm_gc_collection_seconds_total"
  help: "åƒåœ¾å›æ”¶æ€»è€—æ—¶(æ¯«ç§’)"
  type: COUNTER
  labels:
    gc_name: "$1"
```

**ğŸ“ˆ å¸¸è§GCç±»å‹**ï¼š
- **G1 Young Generation**ï¼šå¹´è½»ä»£å›æ”¶ï¼ˆé¢‘ç¹ä½†å¿«é€Ÿï¼‰
- **G1 Old Generation**ï¼šè€å¹´ä»£å›æ”¶ï¼ˆè¾ƒæ…¢ä½†å½»åº•ï¼‰
- **PS Scavenge / PS MarkSweep**ï¼šParallel GCçš„å¹´è½»ä»£/è€å¹´ä»£

**ğŸ”” å‘Šè­¦å»ºè®®**ï¼š
- GCé¢‘ç‡è¿‡é«˜ï¼ˆ>10æ¬¡/åˆ†é’Ÿï¼‰
- å•æ¬¡GCè€—æ—¶è¿‡é•¿ï¼ˆ>100msï¼‰
- Full GCé¢‘ç¹å‘ç”Ÿ

### 3.3 çº¿ç¨‹æ± ç›‘æ§


**ğŸ§µ çº¿ç¨‹çŠ¶æ€ç›‘æ§**

çº¿ç¨‹å°±åƒæ˜¯ç¨‹åºçš„"å·¥äºº"ï¼Œè´Ÿè´£æ‰§è¡Œå…·ä½“ä»»åŠ¡ã€‚

```yaml
# çº¿ç¨‹æ€»æ•°
- pattern: "java.lang<type=Threading><>ThreadCount"
  name: "jvm_threads_current"
  help: "å½“å‰çº¿ç¨‹æ•°é‡"
  type: GAUGE

# å³°å€¼çº¿ç¨‹æ•°
- pattern: "java.lang<type=Threading><>PeakThreadCount"
  name: "jvm_threads_peak"
  help: "å†å²å³°å€¼çº¿ç¨‹æ•°"
  type: GAUGE

# å®ˆæŠ¤çº¿ç¨‹æ•°
- pattern: "java.lang<type=Threading><>DaemonThreadCount"
  name: "jvm_threads_daemon"
  help: "å®ˆæŠ¤çº¿ç¨‹æ•°é‡"
  type: GAUGE
```

**ğŸ¯ çº¿ç¨‹çŠ¶æ€è¯´æ˜**ï¼š
- **NEW**ï¼šçº¿ç¨‹å·²åˆ›å»ºä½†æœªå¯åŠ¨
- **RUNNABLE**ï¼šæ­£åœ¨è¿è¡Œæˆ–ç­‰å¾…CPUè°ƒåº¦
- **BLOCKED**ï¼šç­‰å¾…è·å–é”
- **WAITING**ï¼šæ— é™æœŸç­‰å¾…
- **TIMED_WAITING**ï¼šæœ‰æ—¶é™çš„ç­‰å¾…
- **TERMINATED**ï¼šçº¿ç¨‹å·²ç»“æŸ

### 3.4 ç±»åŠ è½½ç›‘æ§


**ğŸ“š ç±»åŠ è½½ç»Ÿè®¡**

```yaml
# å·²åŠ è½½ç±»æ•°é‡
- pattern: "java.lang<type=ClassLoading><>LoadedClassCount"
  name: "jvm_classes_loaded"
  help: "å½“å‰å·²åŠ è½½çš„ç±»æ•°é‡"
  type: GAUGE

# æ€»åŠ è½½ç±»æ•°é‡
- pattern: "java.lang<type=ClassLoading><>TotalLoadedClassCount"
  name: "jvm_classes_loaded_total"
  help: "ç´¯è®¡åŠ è½½çš„ç±»æ•°é‡"
  type: COUNTER

# å¸è½½ç±»æ•°é‡
- pattern: "java.lang<type=ClassLoading><>UnloadedClassCount"
  name: "jvm_classes_unloaded_total"
  help: "ç´¯è®¡å¸è½½çš„ç±»æ•°é‡"
  type: COUNTER
```

### 3.5 CPUä½¿ç”¨ç‡ç›‘æ§


**âš¡ CPUæ€§èƒ½æŒ‡æ ‡**

```yaml
# è¿›ç¨‹CPUä½¿ç”¨ç‡
- pattern: "java.lang<type=OperatingSystem><>ProcessCpuLoad"
  name: "process_cpu_usage_ratio"
  help: "è¿›ç¨‹CPUä½¿ç”¨ç‡"
  type: GAUGE

# ç³»ç»ŸCPUä½¿ç”¨ç‡
- pattern: "java.lang<type=OperatingSystem><>SystemCpuLoad"
  name: "system_cpu_usage_ratio"
  help: "ç³»ç»ŸCPUä½¿ç”¨ç‡"
  type: GAUGE
```

**ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡æ€»è§ˆè¡¨**

| æŒ‡æ ‡ç±»å‹ | æ ¸å¿ƒä½œç”¨ | å…³æ³¨é‡ç‚¹ | å‘Šè­¦é˜ˆå€¼å»ºè®® |
|---------|---------|---------|-------------|
| **å †å†…å­˜** | åº”ç”¨å†…å­˜ä½¿ç”¨ | ä½¿ç”¨ç‡ã€å¢é•¿è¶‹åŠ¿ | >80%å‘Šè­¦ |
| **GCå›æ”¶** | åƒåœ¾å›æ”¶æ•ˆç‡ | é¢‘ç‡ã€è€—æ—¶ | >10æ¬¡/åˆ†é’Ÿ |
| **çº¿ç¨‹æ•°** | å¹¶å‘å¤„ç†èƒ½åŠ› | æ€»æ•°ã€çŠ¶æ€åˆ†å¸ƒ | >500ä¸ªçº¿ç¨‹ |
| **ç±»åŠ è½½** | åº”ç”¨å¤æ‚åº¦ | åŠ è½½é€Ÿåº¦ã€å†…å­˜æ³„æ¼ | æŒç»­å¢é•¿ |
| **CPUä½¿ç”¨** | å¤„ç†å™¨è´Ÿè½½ | ä½¿ç”¨ç‡ã€è´Ÿè½½å‡è¡¡ | >70%æŒç»­ |

---

## 4. âš™ï¸ é…ç½®æ–‡ä»¶æ·±åº¦è§£æ


### 4.1 è§„åˆ™é…ç½®è¯­æ³•è¯¦è§£


**ğŸ¯ PatternåŒ¹é…è§„åˆ™**

Patternå°±åƒæ˜¯"åœ°å€"ï¼Œå‘Šè¯‰JMX Exporterå»å“ªé‡Œæ‰¾æ•°æ®ã€‚

```yaml
# åŸºæœ¬è¯­æ³•ç»“æ„
- pattern: "åŸŸå<å±æ€§åˆ—è¡¨><>å±æ€§å"
  name: "prometheus_metric_name"
  help: "æŒ‡æ ‡è¯´æ˜"
  type: GAUGE/COUNTER/HISTOGRAM
  labels:
    label_name: "label_value"
```

**ğŸ“ å®é™…ç¤ºä¾‹è§£æ**
```yaml
# ç¤ºä¾‹1ï¼šç®€å•åŒ¹é…
- pattern: "java.lang<type=Memory><>HeapMemoryUsage"
  # åŒ¹é…ï¼šjava.langåŸŸä¸‹Memoryç±»å‹çš„HeapMemoryUsageå±æ€§
  
# ç¤ºä¾‹2ï¼šæ­£åˆ™åŒ¹é…
- pattern: "java.lang<type=GarbageCollector, name=(.*)><>CollectionCount"
  # (.*)è¡¨ç¤ºæ•è·ä»»æ„GCåç§°ï¼Œå¦‚"G1 Young Generation"
  
# ç¤ºä¾‹3ï¼šå¤æ‚åŒ¹é…
- pattern: "kafka.server<type=(.+), name=(.+)><>Value"
  # åŒ¹é…Kafkaçš„æ‰€æœ‰serveræŒ‡æ ‡ï¼Œæ•è·typeå’Œname
```

**ğŸ” Patternè¯­æ³•è¦ç‚¹**ï¼š
- **<>**ï¼šåˆ†éš”å±æ€§åˆ—è¡¨å’Œå±æ€§å
- **()**ï¼šæ­£åˆ™æ•è·ç»„ï¼Œå¯ä»¥åœ¨labelsä¸­å¼•ç”¨
- **.\***ï¼šåŒ¹é…ä»»æ„å­—ç¬¦
- **+**ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦

### 4.2 æŒ‡æ ‡ç±»å‹è¯¦è§£


**ğŸ“Š å››ç§æŒ‡æ ‡ç±»å‹**

```yaml
# GAUGE: ç¬æ—¶å€¼ï¼ˆå¯å¢å¯å‡ï¼‰
- pattern: "java.lang<type=Memory><>HeapMemoryUsage"
  type: GAUGE  # å†…å­˜ä½¿ç”¨é‡ä¼šå¢å‡
  
# COUNTER: è®¡æ•°å™¨ï¼ˆåªå¢ä¸å‡ï¼‰
- pattern: "java.lang<type=GarbageCollector, name=(.*)><>CollectionCount"
  type: COUNTER  # GCæ¬¡æ•°åªä¼šå¢åŠ 
  
# HISTOGRAM: ç›´æ–¹å›¾åˆ†å¸ƒ
- pattern: "com.example<type=RequestProcessor><>ResponseTime"
  type: HISTOGRAM  # å“åº”æ—¶é—´åˆ†å¸ƒ
  
# SUMMARY: æ‘˜è¦ç»Ÿè®¡
- pattern: "com.example<type=RequestProcessor><>RequestSize"
  type: SUMMARY  # è¯·æ±‚å¤§å°ç»Ÿè®¡
```

**ğŸ’¡ ç±»å‹é€‰æ‹©æŒ‡å—**ï¼š
- **å½“å‰çŠ¶æ€å€¼** â†’ GAUGEï¼ˆå†…å­˜ã€çº¿ç¨‹æ•°ã€è¿æ¥æ•°ï¼‰
- **ç´¯è®¡è®¡æ•°** â†’ COUNTERï¼ˆè¯·æ±‚æ€»æ•°ã€é”™è¯¯æ€»æ•°ï¼‰
- **æ—¶é—´åˆ†å¸ƒ** â†’ HISTOGRAMï¼ˆå“åº”æ—¶é—´ã€è¯·æ±‚å¤§å°ï¼‰
- **ç™¾åˆ†ä½ç»Ÿè®¡** â†’ SUMMARYï¼ˆP95ã€P99å“åº”æ—¶é—´ï¼‰

### 4.3 æ ‡ç­¾é‡å†™è§„åˆ™


**ğŸ·ï¸ æ ‡ç­¾å°±æ˜¯ç»™æŒ‡æ ‡è´´"æ ‡ç­¾"**

æ ‡ç­¾è®©åŒä¸€ä¸ªæŒ‡æ ‡å¯ä»¥åŒºåˆ†ä¸åŒçš„ç»´åº¦ï¼Œæ¯”å¦‚ä¸åŒçš„GCç±»å‹ã€ä¸åŒçš„çº¿ç¨‹æ± ç­‰ã€‚

```yaml
# åŸºç¡€æ ‡ç­¾ä½¿ç”¨
- pattern: "java.lang<type=GarbageCollector, name=(.*)><>CollectionCount"
  name: "jvm_gc_collection_total"
  labels:
    gc_name: "$1"  # $1å¼•ç”¨ç¬¬ä¸€ä¸ªæ•è·ç»„

# å¤šæ ‡ç­¾ç¤ºä¾‹
- pattern: "kafka.server<type=(.+), name=(.+), topic=(.*)><>Value"
  name: "kafka_server_metrics"
  labels:
    metric_type: "$1"
    metric_name: "$2" 
    topic: "$3"

# å›ºå®šæ ‡ç­¾
- pattern: "com.example<type=Database><>ConnectionCount"
  name: "app_db_connections"
  labels:
    component: "database"
    environment: "production"
```

**ğŸ¨ æ ‡ç­¾å‘½åè§„èŒƒ**ï¼š
- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- é¿å…ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦
- åç§°è¦æœ‰æ„ä¹‰ï¼Œæ˜“äºç†è§£

### 4.4 æŒ‡æ ‡è¿‡æ»¤æœºåˆ¶


**ğŸ”½ è¿‡æ»¤ä¸éœ€è¦çš„æŒ‡æ ‡**

æœ‰äº›JMXæŒ‡æ ‡æˆ‘ä»¬å¹¶ä¸å…³å¿ƒï¼Œå¯ä»¥é€šè¿‡è¿‡æ»¤å‡å°‘æ•°æ®é‡ã€‚

```yaml
# ç™½åå•æ¨¡å¼ï¼šåªæ”¶é›†åŒ¹é…çš„æŒ‡æ ‡
whitelistObjectNames:
  - "java.lang:type=Memory"
  - "java.lang:type=GarbageCollector,*"
  - "java.lang:type=Threading"

# é»‘åå•æ¨¡å¼ï¼šæ’é™¤ç‰¹å®šæŒ‡æ ‡
blacklistObjectNames:
  - "java.lang:type=Compilation"
  - "com.sun.*:*"

# è§„åˆ™çº§è¿‡æ»¤
rules:
  - pattern: ".*"  # åŒ¹é…æ‰€æœ‰
    name: "default_metric"
    type: GAUGE
    # åªæœ‰valueå¤§äº0çš„æŒ‡æ ‡æ‰æ”¶é›†
    valueFactor: 1
```

**âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
- åªæ”¶é›†çœŸæ­£éœ€è¦çš„æŒ‡æ ‡
- ä½¿ç”¨ç™½åå•æ¨¡å¼æ›´ç²¾ç¡®
- é¿å…æ”¶é›†å˜åŒ–é¢‘ç¹çš„æ ‡ç­¾

---

## 5. ğŸ”— å¸¸è§åº”ç”¨é›†æˆå®è·µ


### 5.1 Spring Bootåº”ç”¨é›†æˆ


**ğŸŒ± Spring Bootæ˜¯æœ€å¸¸è§çš„Java Webæ¡†æ¶**

```yaml
# Spring Bootä¸“ç”¨é…ç½®
# /opt/monitoring/jmx/springboot-config.yaml

rules:
  # Tomcatè¿æ¥æ± ç›‘æ§
  - pattern: "Tomcat<type=ThreadPool, name=(.*)><>(.+)"
    name: "tomcat_threadpool_$2"
    help: "Tomcatçº¿ç¨‹æ± æŒ‡æ ‡"
    type: GAUGE
    labels:
      pool_name: "$1"

  # HTTPè¯·æ±‚ç»Ÿè®¡
  - pattern: "Tomcat<type=GlobalRequestProcessor, name=(.*)><>(.+)"
    name: "tomcat_request_$2"
    help: "Tomcatè¯·æ±‚å¤„ç†æŒ‡æ ‡"
    type: GAUGE
    labels:
      connector: "$1"

  # Spring Boot ActuatoræŒ‡æ ‡
  - pattern: "org.springframework.boot<type=Endpoint, name=(.*)><>(.+)"
    name: "springboot_actuator_$2"
    help: "Spring Boot ActuatoræŒ‡æ ‡"
    labels:
      endpoint: "$1"
```

**ğŸš€ å¯åŠ¨Spring Bootåº”ç”¨**
```bash
# æ·»åŠ JMX Exporteråˆ°Spring Boot
java -javaagent:/opt/monitoring/jmx/jmx_prometheus_javaagent-0.19.0.jar=8080:/opt/monitoring/jmx/springboot-config.yaml \
     -Dspring.jmx.enabled=true \
     -jar myapp.jar
```

### 5.2 Tomcatç›‘æ§é›†æˆ


**ğŸ­ Tomcat WebæœåŠ¡å™¨ç›‘æ§**

```yaml
# Tomcatä¸“ç”¨ç›‘æ§é…ç½®
rules:
  # è¿æ¥å™¨çŠ¶æ€
  - pattern: "Catalina<type=Connector, port=(.*)><>(.+)"
    name: "tomcat_connector_$2"
    labels:
      port: "$1"

  # ä¼šè¯ç®¡ç†
  - pattern: "Catalina<type=Manager, context=(.+), host=(.+)><>(.+)"
    name: "tomcat_session_$3"
    labels:
      context: "$1"
      host: "$2"

  # æ•°æ®åº“è¿æ¥æ± ï¼ˆå¦‚æœä½¿ç”¨Tomcat JDBC Poolï¼‰
  - pattern: "tomcat.jdbc<type=ConnectionPool, name=(.*)><>(.+)"
    name: "tomcat_jdbc_$2"
    labels:
      pool_name: "$1"
```

### 5.3 Kafkaç›‘æ§é›†æˆ


**ğŸ“¨ Kafkaæ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§**

Kafkaæœ‰å¾ˆå¤šé‡è¦çš„ç›‘æ§æŒ‡æ ‡ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£æ¶ˆæ¯å¤„ç†æƒ…å†µã€‚

```yaml
# Kafka Brokerç›‘æ§
rules:
  # æ¶ˆæ¯ç”Ÿäº§é€Ÿç‡
  - pattern: "kafka.server<type=BrokerTopicMetrics, name=MessagesInPerSec, topic=(.*)><>OneMinuteRate"
    name: "kafka_topic_messages_in_per_sec"
    labels:
      topic: "$1"

  # å­—èŠ‚å¤„ç†é€Ÿç‡  
  - pattern: "kafka.server<type=BrokerTopicMetrics, name=BytesInPerSec, topic=(.*)><>OneMinuteRate"
    name: "kafka_topic_bytes_in_per_sec"
    labels:
      topic: "$1"

  # å‰¯æœ¬æ»å
  - pattern: "kafka.server<type=ReplicaManager, name=(.*)><>Value"
    name: "kafka_replica_manager_$1"

  # åˆ†åŒºæ•°é‡
  - pattern: "kafka.server<type=ReplicaManager, name=PartitionCount><>Value"
    name: "kafka_partitions_count"
```

### 5.4 Elasticsearchç›‘æ§


**ğŸ” Elasticsearchæœç´¢å¼•æ“ç›‘æ§**

```yaml
# ElasticsearchèŠ‚ç‚¹ç›‘æ§
rules:
  # èŠ‚ç‚¹çŠ¶æ€
  - pattern: "org.elasticsearch.node<type=node, name=(.*)><>(.+)"
    name: "elasticsearch_node_$2"
    labels:
      node_name: "$1"

  # ç´¢å¼•æ“ä½œ
  - pattern: "org.elasticsearch.index<type=indexing, index=(.*)><>(.+)"
    name: "elasticsearch_index_$2"
    labels:
      index: "$1"

  # æœç´¢æ€§èƒ½
  - pattern: "org.elasticsearch.index<type=search, index=(.*)><>(.+)"
    name: "elasticsearch_search_$2"
    labels:
      index: "$1"
```

### 5.5 å¾®æœåŠ¡ç›‘æ§å®è·µ


**ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„ç›‘æ§ç­–ç•¥**

```yaml
# å¾®æœåŠ¡é€šç”¨ç›‘æ§é…ç½®
rules:
  # æœåŠ¡å¥åº·æ£€æŸ¥
  - pattern: "com.example.service<type=HealthCheck, service=(.*)><>(.+)"
    name: "microservice_health_$2"
    labels:
      service_name: "$1"

  # APIè°ƒç”¨ç»Ÿè®¡
  - pattern: "com.example.api<type=RequestMetrics, endpoint=(.*)><>(.+)"
    name: "api_request_$2"
    labels:
      endpoint: "$1"

  # ä¸šåŠ¡æŒ‡æ ‡
  - pattern: "com.example.business<type=(.+), metric=(.+)><>(.+)"
    name: "business_$1_$2"
    help: "ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§"
```

**ğŸ¯ å¾®æœåŠ¡ç›‘æ§è¦ç‚¹**ï¼š
- **æœåŠ¡å‘ç°**ï¼šæ¯ä¸ªæœåŠ¡å®ä¾‹éƒ½è¦é…ç½®JMX Exporter
- **ç»Ÿä¸€é…ç½®**ï¼šä½¿ç”¨é…ç½®ä¸­å¿ƒç®¡ç†ç›‘æ§é…ç½®
- **æ ‡ç­¾è§„èŒƒ**ï¼šç»Ÿä¸€çš„æœåŠ¡åã€ç‰ˆæœ¬å·æ ‡ç­¾
- **å‘Šè­¦èšåˆ**ï¼šæŒ‰æœåŠ¡ç»´åº¦èšåˆå‘Šè­¦

---

## 6. ğŸ“ˆ ç›‘æ§ç­–ç•¥ä¸æœ€ä½³å®è·µ


### 6.1 ä¸šåŠ¡æŒ‡æ ‡æš´éœ²


**ğŸ’¼ è‡ªå®šä¹‰ä¸šåŠ¡æŒ‡æ ‡**

é™¤äº†JVMæŒ‡æ ‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç›‘æ§ä¸šåŠ¡ç›¸å…³çš„æ•°æ®ã€‚

```java
// Javaä»£ç ç¤ºä¾‹ï¼šåˆ›å»ºè‡ªå®šä¹‰MBean
@Component
public class BusinessMetrics implements BusinessMetricsMBean {
    
    private long orderCount = 0;
    private long paymentTotal = 0;
    
    @Override
    public long getOrderCount() {
        return orderCount;
    }
    
    @Override
    public long getPaymentTotal() {
        return paymentTotal;
    }
    
    // ä¸šåŠ¡é€»è¾‘ä¸­è°ƒç”¨
    public void recordOrder(long amount) {
        orderCount++;
        paymentTotal += amount;
    }
}

// MBeanæ¥å£
public interface BusinessMetricsMBean {
    long getOrderCount();
    long getPaymentTotal();
}
```

```yaml
# å¯¹åº”çš„JMX Exporteré…ç½®
rules:
  - pattern: "com.example<type=BusinessMetrics><>OrderCount"
    name: "business_orders_total"
    help: "è®¢å•æ€»æ•°"
    type: COUNTER

  - pattern: "com.example<type=BusinessMetrics><>PaymentTotal"
    name: "business_payment_amount_total"
    help: "æ”¯ä»˜æ€»é‡‘é¢"
    type: COUNTER
```

### 6.2 æ€§èƒ½è°ƒä¼˜å»ºè®®


**âš¡ JMX Exporteræ€§èƒ½ä¼˜åŒ–**

```yaml
# ä¼˜åŒ–é…ç½®ç¤ºä¾‹
startDelaySeconds: 10  # åº”ç”¨å¯åŠ¨åå†å¼€å§‹æ”¶é›†

# é‡‡æ ·é¢‘ç‡æ§åˆ¶
sampleRate: 0.1  # 10%é‡‡æ ·ç‡

# åªæ”¶é›†å¿…è¦æŒ‡æ ‡
whitelistObjectNames:
  - "java.lang:type=Memory"
  - "java.lang:type=GarbageCollector,*"
  - "java.lang:type=Threading"
  - "com.example:type=BusinessMetrics"

# é¿å…é«˜åŸºæ•°æ ‡ç­¾
rules:
  - pattern: "com.example<type=UserAction, userId=(.*)><>Count"
    # âŒ é”™è¯¯ï¼šuserIdä¼šäº§ç”Ÿå¤§é‡ä¸åŒæ ‡ç­¾å€¼
    
  - pattern: "com.example<type=UserAction><>Count"  
    # âœ… æ­£ç¡®ï¼šç»Ÿè®¡æ‰€æœ‰ç”¨æˆ·è¡Œä¸ºæ€»æ•°
    name: "user_actions_total"
```

**ğŸ¯ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**ï¼š
- **å‡å°‘æŒ‡æ ‡æ•°é‡**ï¼šåªæ”¶é›†çœŸæ­£éœ€è¦çš„æŒ‡æ ‡
- **æ§åˆ¶æ ‡ç­¾åŸºæ•°**ï¼šé¿å…ç”¨æˆ·IDç­‰é«˜åŸºæ•°æ ‡ç­¾
- **åˆç†é‡‡æ ·**ï¼šé«˜é¢‘æŒ‡æ ‡å¯ä»¥é™ä½é‡‡æ ·ç‡
- **å»¶è¿Ÿå¯åŠ¨**ï¼šç­‰åº”ç”¨å®Œå…¨å¯åŠ¨åå†å¼€å§‹ç›‘æ§

### 6.3 å‘Šè­¦é…ç½®ç­–ç•¥


**ğŸš¨ é‡è¦å‘Šè­¦è§„åˆ™**

```yaml
# Prometheuså‘Šè­¦è§„åˆ™ç¤ºä¾‹
groups:
  - name: jvm_alerts
    rules:
      # å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦
      - alert: HighMemoryUsage
        expr: (jvm_memory_heap_bytes{area="heap",id="used"} / jvm_memory_heap_bytes{area="heap",id="max"}) * 100 > 80
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "JVMå †å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
          description: "å®ä¾‹ {{ $labels.instance }} å †å†…å­˜ä½¿ç”¨ç‡ {{ $value }}%"

      # GCé¢‘ç‡å‘Šè­¦  
      - alert: HighGCRate
        expr: rate(jvm_gc_collection_total[5m]) > 0.2
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "GCé¢‘ç‡è¿‡é«˜"
          description: "å®ä¾‹ {{ $labels.instance }} GCé¢‘ç‡ {{ $value }}/ç§’"

      # çº¿ç¨‹æ•°å‘Šè­¦
      - alert: HighThreadCount
        expr: jvm_threads_current > 500
        for: 3m
        labels:
          severity: warning
        annotations:
          summary: "çº¿ç¨‹æ•°è¿‡å¤š"
          description: "å®ä¾‹ {{ $labels.instance }} å½“å‰çº¿ç¨‹æ•° {{ $value }}"
```

### 6.4 ç›‘æ§ä»ªè¡¨æ¿è®¾è®¡


**ğŸ“Š Grafanaä»ªè¡¨æ¿å»ºè®®**

```
JVMç›‘æ§ä»ªè¡¨æ¿å¸ƒå±€ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å†…å­˜ä½¿ç”¨ç‡       â”‚      GCç»Ÿè®¡         â”‚
â”‚   ğŸ“ˆ å †/éå †å†…å­˜    â”‚   ğŸ—‘ï¸ å›æ”¶æ¬¡æ•°/è€—æ—¶   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     çº¿ç¨‹çŠ¶æ€        â”‚      ç±»åŠ è½½         â”‚
â”‚   ğŸ§µ çº¿ç¨‹æ•°/çŠ¶æ€åˆ†å¸ƒ â”‚   ğŸ“š åŠ è½½/å¸è½½ç»Ÿè®¡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     CPUä½¿ç”¨ç‡       â”‚     ä¸šåŠ¡æŒ‡æ ‡        â”‚
â”‚   âš¡ è¿›ç¨‹/ç³»ç»ŸCPU   â”‚   ğŸ’¼ è®¢å•/æ”¯ä»˜ç­‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ¨ ä»ªè¡¨æ¿è®¾è®¡åŸåˆ™**ï¼š
- **åˆ†å±‚å±•ç¤º**ï¼šç³»ç»ŸæŒ‡æ ‡åœ¨ä¸Šï¼Œä¸šåŠ¡æŒ‡æ ‡åœ¨ä¸‹
- **å…³è”åˆ†æ**ï¼šç›¸å…³æŒ‡æ ‡æ”¾åœ¨ä¸€èµ·
- **æ—¶é—´å¯¹é½**ï¼šæ‰€æœ‰å›¾è¡¨ä½¿ç”¨ç›¸åŒæ—¶é—´èŒƒå›´
- **å‘Šè­¦å¯è§†åŒ–**ï¼šé‡è¦é˜ˆå€¼çº¿æ ‡æ³¨æ¸…æ¥š

### 6.5 é…ç½®æ–‡ä»¶ç®¡ç†


**ğŸ“ ä¼ä¸šçº§é…ç½®ç®¡ç†**

```bash
# ç›®å½•ç»“æ„å»ºè®®
/opt/monitoring/jmx/
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ common.yaml          # é€šç”¨JVMæŒ‡æ ‡
â”‚   â”œâ”€â”€ springboot.yaml      # Spring Bootä¸“ç”¨
â”‚   â”œâ”€â”€ kafka.yaml           # Kafkaä¸“ç”¨
â”‚   â”œâ”€â”€ elasticsearch.yaml   # ESä¸“ç”¨
â”‚   â””â”€â”€ business.yaml        # ä¸šåŠ¡æŒ‡æ ‡
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ app-template.yaml    # åº”ç”¨é…ç½®æ¨¡æ¿
â””â”€â”€ scripts/
    â”œâ”€â”€ deploy.sh           # éƒ¨ç½²è„šæœ¬
    â””â”€â”€ validate.sh         # é…ç½®éªŒè¯è„šæœ¬
```

```yaml
# common.yaml - åŸºç¡€JVMæŒ‡æ ‡
startDelaySeconds: 10
rules:
  # JVMåŸºç¡€æŒ‡æ ‡
  - pattern: "java.lang<type=Memory><>HeapMemoryUsage"
    name: "jvm_memory_heap_bytes"
    type: GAUGE
  # ... å…¶ä»–é€šç”¨æŒ‡æ ‡

# é…ç½®ç»§æ‰¿æœºåˆ¶
includes:
  - "common.yaml"  # å¼•å…¥åŸºç¡€é…ç½®
  
# åº”ç”¨ç‰¹å®šæŒ‡æ ‡
rules:
  - pattern: "com.myapp<type=(.*)><>(.+)"
    name: "myapp_$1_$2"
    labels:
      application: "myapp"
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ JMX Exporteræœ¬è´¨ï¼šJavaåº”ç”¨ç›‘æ§æ•°æ®çš„"ç¿»è¯‘å®˜"
ğŸ”¸ æ ¸å¿ƒä½œç”¨ï¼šå°†JMXæ•°æ®è½¬æ¢ä¸ºPrometheusæ ¼å¼
ğŸ”¸ éƒ¨ç½²æ–¹å¼ï¼šä½œä¸ºJava Agenté™„åŠ åˆ°åº”ç”¨è¿›ç¨‹
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼šYAMLæ ¼å¼ï¼Œå®šä¹‰æ•°æ®æ”¶é›†å’Œè½¬æ¢è§„åˆ™
ğŸ”¸ æŒ‡æ ‡ç±»å‹ï¼šGAUGE(ç¬æ—¶å€¼)ã€COUNTER(è®¡æ•°å™¨)ç­‰
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç›‘æ§æŒ‡æ ‡çš„é‡è¦æ€§æ’åº**
```
1ï¸âƒ£ å†…å­˜ä½¿ç”¨ç‡ - æœ€åŸºç¡€ï¼Œå½±å“åº”ç”¨ç¨³å®šæ€§
2ï¸âƒ£ GCåƒåœ¾å›æ”¶ - å½±å“åº”ç”¨æ€§èƒ½å’Œå“åº”æ—¶é—´  
3ï¸âƒ£ çº¿ç¨‹çŠ¶æ€ - åæ˜ å¹¶å‘å¤„ç†èƒ½åŠ›
4ï¸âƒ£ CPUä½¿ç”¨ç‡ - åæ˜ èµ„æºæ¶ˆè€—æƒ…å†µ
5ï¸âƒ£ ä¸šåŠ¡æŒ‡æ ‡ - åæ˜ ä¸šåŠ¡è¿è¡ŒçŠ¶å†µ
```

**ğŸ”¹ é…ç½®æ–‡ä»¶ç¼–å†™è¦é¢†**
```
PatternåŒ¹é…ï¼šæŒæ¡JMX Beanè·¯å¾„æ ¼å¼
æ­£åˆ™æ•è·ï¼šä½¿ç”¨()æ•è·åŠ¨æ€éƒ¨åˆ†ä½œä¸ºæ ‡ç­¾
æŒ‡æ ‡å‘½åï¼šéµå¾ªPrometheuså‘½åè§„èŒƒ
æ ‡ç­¾è®¾è®¡ï¼šé¿å…é«˜åŸºæ•°ï¼Œä¿æŒæœ‰æ„ä¹‰
ç±»å‹é€‰æ‹©ï¼šæ ¹æ®æ•°æ®ç‰¹ç‚¹é€‰æ‹©åˆé€‚ç±»å‹
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–é‡ç‚¹**
```
æŒ‡æ ‡ç­›é€‰ï¼šåªæ”¶é›†çœŸæ­£éœ€è¦çš„æŒ‡æ ‡
æ ‡ç­¾æ§åˆ¶ï¼šé¿å…ç”¨æˆ·IDç­‰é«˜åŸºæ•°æ ‡ç­¾
å¯åŠ¨å»¶è¿Ÿï¼šç­‰åº”ç”¨ç¨³å®šåå†å¼€å§‹æ”¶é›†
é‡‡æ ·ç‡æ§åˆ¶ï¼šé«˜é¢‘æŒ‡æ ‡å¯ä»¥é™ä½ç²¾åº¦
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**
- **å¯è§‚æµ‹æ€§**ï¼šJavaåº”ç”¨ä»"é»‘ç›’"å˜"ç™½ç›’"
- **æ•…éšœè¯Šæ–­**ï¼šå¿«é€Ÿå®šä½å†…å­˜æ³„æ¼ã€GCå¼‚å¸¸ç­‰é—®é¢˜
- **æ€§èƒ½è°ƒä¼˜**ï¼šåŸºäºæ•°æ®è¿›è¡ŒJVMå‚æ•°ä¼˜åŒ–
- **å®¹é‡è§„åˆ’**ï¼šæ ¹æ®å†å²æ•°æ®é¢„æµ‹èµ„æºéœ€æ±‚
- **ä¸šåŠ¡ç›‘æ§**ï¼šå®æ—¶äº†è§£ä¸šåŠ¡æŒ‡æ ‡å˜åŒ–

**ğŸ› ï¸ å®è·µå»ºè®®**
- **ä»ç®€å•å¼€å§‹**ï¼šå…ˆç›‘æ§åŸºç¡€JVMæŒ‡æ ‡
- **é€æ­¥æ‰©å±•**ï¼šæ ¹æ®éœ€è¦æ·»åŠ åº”ç”¨ç‰¹å®šæŒ‡æ ‡
- **æ ‡å‡†åŒ–é…ç½®**ï¼šå›¢é˜Ÿå†…ç»Ÿä¸€é…ç½®æ–‡ä»¶æ ¼å¼
- **æ–‡æ¡£å®Œå–„**ï¼šè®°å½•æ¯ä¸ªæŒ‡æ ‡çš„å«ä¹‰å’Œç”¨é€”
- **å®šæœŸä¼˜åŒ–**ï¼šæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´é…ç½®

### 7.4 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


| é—®é¢˜ç±»å‹ | ç—‡çŠ¶è¡¨ç° | è§£å†³æ–¹æ¡ˆ |
|---------|---------|---------|
| **å†…å­˜æ³„æ¼** | å †å†…å­˜æŒç»­å¢é•¿ | æ£€æŸ¥å¯¹è±¡å¼•ç”¨ï¼Œåˆ†æå †è½¬å‚¨ |
| **GCå¼‚å¸¸** | GCæ—¶é—´è¿‡é•¿æˆ–é¢‘ç‡è¿‡é«˜ | è°ƒæ•´å †å¤§å°ï¼Œé€‰æ‹©åˆé€‚GCç®—æ³• |
| **çº¿ç¨‹é˜»å¡** | çº¿ç¨‹æ•°å¢é•¿ä½†å“åº”æ…¢ | åˆ†æçº¿ç¨‹è½¬å‚¨ï¼Œæ£€æŸ¥æ­»é” |
| **é…ç½®é”™è¯¯** | æŒ‡æ ‡æ”¶é›†ä¸å…¨æˆ–æ ¼å¼é”™è¯¯ | éªŒè¯YAMLè¯­æ³•ï¼Œæ£€æŸ¥PatternåŒ¹é… |

### 7.5 è¿›é˜¶å­¦ä¹ æ–¹å‘


**ğŸ“š æ·±å…¥å­¦ä¹ å»ºè®®**
- **JVMè°ƒä¼˜**ï¼šæ·±å…¥ç†è§£ä¸åŒGCç®—æ³•ç‰¹ç‚¹
- **APMå·¥å…·**ï¼šç»“åˆåº”ç”¨æ€§èƒ½ç›‘æ§å·¥å…·ä½¿ç”¨
- **åˆ†å¸ƒå¼è¿½è¸ª**ï¼šé›†æˆJaegerã€Zipkinç­‰å·¥å…·
- **æ—¥å¿—å…³è”**ï¼šå°†ç›‘æ§æŒ‡æ ‡ä¸æ—¥å¿—äº‹ä»¶å…³è”
- **æœºå™¨å­¦ä¹ **ï¼šä½¿ç”¨æŒ‡æ ‡æ•°æ®è¿›è¡Œå¼‚å¸¸æ£€æµ‹

**æ ¸å¿ƒè®°å¿†**ï¼š
- JMX Exporteræ˜¯Javaåº”ç”¨ç›‘æ§çš„é‡è¦å·¥å…·
- é…ç½®æ–‡ä»¶æ˜¯æ ¸å¿ƒï¼ŒPatternåŒ¹é…æ˜¯å…³é”®
- ä»åŸºç¡€JVMæŒ‡æ ‡å¼€å§‹ï¼Œé€æ­¥æ‰©å±•ä¸šåŠ¡æŒ‡æ ‡
- æ€§èƒ½ä¼˜åŒ–å’Œåˆç†å‘Šè­¦åŒæ ·é‡è¦
- ç›‘æ§ä¸æ˜¯ç›®çš„ï¼Œå¿«é€Ÿå‘ç°å’Œè§£å†³é—®é¢˜æ‰æ˜¯ç›®æ ‡