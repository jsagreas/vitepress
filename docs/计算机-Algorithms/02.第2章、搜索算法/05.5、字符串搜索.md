---
title: 5ã€å­—ç¬¦ä¸²æœç´¢
---
## ğŸ“š ç›®å½•

1. [ç®—æ³•æ¦‚è¿°](#1-ç®—æ³•æ¦‚è¿°)
2. [æœ´ç´ æœç´¢ç®—æ³•](#2-æœ´ç´ æœç´¢ç®—æ³•)
3. [KMPç®—æ³•è¯¦è§£](#3-kmpç®—æ³•è¯¦è§£)
4. [å®ç°æ–¹æ³•](#4-å®ç°æ–¹æ³•)
5. [ç®—æ³•åˆ†æ](#5-ç®—æ³•åˆ†æ)
6. [å…¸å‹åº”ç”¨](#6-å…¸å‹åº”ç”¨)
7. [å¯¹æ¯”åˆ†æ](#7-å¯¹æ¯”åˆ†æ)
8. [æ€»ç»“](#8-æ€»ç»“)

---

## 1. ğŸ“– ç®—æ³•æ¦‚è¿°


### 1.1 å®šä¹‰

å­—ç¬¦ä¸²æœç´¢æ˜¯åœ¨æ–‡æœ¬ä¸²ä¸­æŸ¥æ‰¾æ¨¡å¼ä¸²çš„ç®—æ³•ã€‚ç»™å®šæ–‡æœ¬ä¸²Tï¼ˆé•¿åº¦nï¼‰å’Œæ¨¡å¼ä¸²Pï¼ˆé•¿åº¦mï¼‰ï¼Œæ‰¾å‡ºPåœ¨Tä¸­æ‰€æœ‰å‡ºç°çš„ä½ç½®ã€‚

### 1.2 åŸºæœ¬æ¦‚å¿µ

- **æ–‡æœ¬ä¸²ï¼ˆTextï¼‰**ï¼šè¢«æœç´¢çš„å­—ç¬¦ä¸²ï¼Œè®°ä¸ºT
- **æ¨¡å¼ä¸²ï¼ˆPatternï¼‰**ï¼šè¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ï¼Œè®°ä¸ºP
- **åŒ¹é…**ï¼šæ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²ä¸­çš„ä¸€ä¸ªå‡ºç°ä½ç½®
- **å¤±é…**ï¼šæ¯”è¾ƒè¿‡ç¨‹ä¸­å‘ç°å­—ç¬¦ä¸ç›¸ç­‰

### 1.3 é—®é¢˜æè¿°

```
ç¤ºä¾‹ï¼š
æ–‡æœ¬ä¸² T = "ABAAABCDABABCABCABCDAB"
æ¨¡å¼ä¸² P = "ABCAB"

ç›®æ ‡ï¼šæ‰¾å‡ºPåœ¨Tä¸­çš„æ‰€æœ‰å‡ºç°ä½ç½®
ç»“æœï¼šä½ç½®10å’Œä½ç½®15

T: A B A A A B C D A B A B C A B C A B C D A B
                          â†‘           â†‘
                       ä½ç½®10      ä½ç½®15
```

---

## 2. æœ´ç´ æœç´¢ç®—æ³•


### 2.1 åŸºæœ¬æ€æƒ³

æœ´ç´ æœç´¢æ˜¯æœ€ç›´è§‚çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼š
1. **é€ä½æ¯”è¾ƒ**ï¼šä»æ–‡æœ¬ä¸²çš„æ¯ä¸ªä½ç½®å¼€å§‹å°è¯•åŒ¹é…
2. **å­—ç¬¦å¯¹æ¯”**ï¼šé€ä¸ªå­—ç¬¦ä¸æ¨¡å¼ä¸²è¿›è¡Œæ¯”è¾ƒ
3. **å¤±é…å›é€€**ï¼šä¸€æ—¦å¤±é…ï¼Œæ–‡æœ¬ä¸²ä½ç½®å‰ç§»1ä½ï¼Œé‡æ–°å¼€å§‹
4. **å®Œæ•´éå†**ï¼šæ£€æŸ¥æ–‡æœ¬ä¸²çš„æ¯ä¸ªå¯èƒ½ä½ç½®

### 2.2 å·¥ä½œè¿‡ç¨‹è¯¦è§£

```
æ–‡æœ¬ä¸²: A B A A B A B A
æ¨¡å¼ä¸²: A B A

è¯¦ç»†æ¯”è¾ƒè¿‡ç¨‹ï¼š

ä½ç½®0: A B A A B A B A
       A B A           
       â†“ â†“ â†“           
       âœ“ âœ“ âœ“  â†’ åŒ¹é…æˆåŠŸï¼è®°å½•ä½ç½®0

ä½ç½®1: A B A A B A B A
         A B A         
         â†“ â†“           
         Bâ‰ A  â†’ ç¬¬2ä¸ªå­—ç¬¦å¤±é…ï¼Œç»§ç»­

ä½ç½®2: A B A A B A B A
           A B A       
           â†“ â†“         
           Aâ‰ B  â†’ ç¬¬2ä¸ªå­—ç¬¦å¤±é…ï¼Œç»§ç»­

ä½ç½®3: A B A A B A B A
             A B A     
             â†“ â†“ â†“     
             âœ“ âœ“ âœ“  â†’ åŒ¹é…æˆåŠŸï¼è®°å½•ä½ç½®3

ä½ç½®4: A B A A B A B A
               A B A   
               â†“ â†“     
               Bâ‰ A  â†’ ç¬¬2ä¸ªå­—ç¬¦å¤±é…ï¼Œç»§ç»­

ä½ç½®5: A B A A B A B A
                 A B A 
                 â†“ â†“ â†“ 
                 âœ“ âœ“ âœ“  â†’ åŒ¹é…æˆåŠŸï¼è®°å½•ä½ç½®5

ç»“æœï¼šæ‰¾åˆ°3ä¸ªåŒ¹é…ä½ç½® [0, 3, 5]
```

### 2.3 ç®—æ³•ç‰¹ç‚¹

- **ğŸ”¸ ç®€å•ç›´è§‚**ï¼šç®—æ³•é€»è¾‘æœ€å®¹æ˜“ç†è§£
- **ğŸ”¸ å®ç°ç®€å•**ï¼šä»£ç å®ç°éå¸¸ç›´æ¥
- **ğŸ”¸ æ•ˆç‡è¾ƒä½**ï¼šå­˜åœ¨å¤§é‡é‡å¤æ¯”è¾ƒ
- **ğŸ”¸ æœ€åæƒ…å†µå·®**ï¼šæ—¶é—´å¤æ‚åº¦å¯è¾¾O(nm)

---

## 3. KMPç®—æ³•è¯¦è§£


### 3.1 ç®—æ³•åŠ¨æœº


#### 3.1.1 æœ´ç´ ç®—æ³•çš„é—®é¢˜

```
è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š
æ–‡æœ¬ä¸²: A A A A A A A B
æ¨¡å¼ä¸²: A A A B

æœ´ç´ ç®—æ³•çš„æ¯”è¾ƒè¿‡ç¨‹ï¼š
ä½ç½®0: A A A A A A A B
       A A A B
       â†“ â†“ â†“ â†“
       âœ“ âœ“ âœ“ âœ—  â†’ ç¬¬4ä¸ªå­—ç¬¦å¤±é…

ä½ç½®1: A A A A A A A B
         A A A B
         â†“ â†“ â†“ â†“
         âœ“ âœ“ âœ“ âœ—  â†’ ç¬¬4ä¸ªå­—ç¬¦å¤±é…

é—®é¢˜ï¼šå·²ç»çŸ¥é“å‰3ä¸ªå­—ç¬¦éƒ½æ˜¯Aï¼Œä¸ºä»€ä¹ˆè¿˜è¦é‡å¤æ¯”è¾ƒï¼Ÿ
```

#### 3.1.2 KMPçš„æ”¹è¿›æ€è·¯

KMPç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼š**åˆ©ç”¨å·²åŒ¹é…çš„ä¿¡æ¯ï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤æ¯”è¾ƒ**

- å½“å¤±é…å‘ç”Ÿæ—¶ï¼Œä¸æ˜¯ç®€å•åœ°ç§»åŠ¨1ä½
- æ ¹æ®æ¨¡å¼ä¸²çš„å†…éƒ¨ç»“æ„ï¼Œå†³å®šè·³è·ƒçš„è·ç¦»
- æ–‡æœ¬ä¸²çš„æŒ‡é’ˆæ°¸è¿œä¸å›é€€

### 3.2 å‰ç¼€å‡½æ•°ï¼ˆå¤±æ•ˆå‡½æ•°ï¼‰


#### 3.2.1 å®šä¹‰å’Œå«ä¹‰

å‰ç¼€å‡½æ•°Ï€[i]å®šä¹‰ä¸ºï¼šä»¥ä½ç½®iç»“å°¾çš„å­ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦

```
ä»€ä¹ˆæ˜¯å‰ç¼€å’Œåç¼€ï¼Ÿ
å¯¹äºå­—ç¬¦ä¸² "ABCAB"ï¼š
- å‰ç¼€ï¼šA, AB, ABC, ABCAï¼ˆä¸åŒ…æ‹¬æ•´ä¸ªå­—ç¬¦ä¸²ï¼‰
- åç¼€ï¼šB, AB, CAB, BCABï¼ˆä¸åŒ…æ‹¬æ•´ä¸ªå­—ç¬¦ä¸²ï¼‰

ç›¸ç­‰å‰åç¼€ï¼šå‰ç¼€å’Œåç¼€ç›¸åŒçš„éƒ¨åˆ†
- "A" å’Œ "B"ï¼šä¸ç›¸ç­‰
- "AB" å’Œ "AB"ï¼šç›¸ç­‰ï¼Œé•¿åº¦ä¸º2
```

#### 3.2.2 å‰ç¼€å‡½æ•°è®¡ç®—è¿‡ç¨‹

```
æ¨¡å¼ä¸²: A B C A B
ç´¢å¼•:   0 1 2 3 4

é€æ­¥è®¡ç®—ï¼š
Ï€[0] = 0  (å•ä¸ªå­—ç¬¦æ²¡æœ‰çœŸå‰ç¼€åç¼€)

Ï€[1] = 0  ("AB"çš„å‰ç¼€"A"å’Œåç¼€"B"ä¸ç›¸ç­‰)

Ï€[2] = 0  ("ABC"æ²¡æœ‰ç›¸ç­‰çš„å‰åç¼€)

Ï€[3] = 1  ("ABCA"çš„å‰ç¼€"A"å’Œåç¼€"A"ç›¸ç­‰ï¼Œé•¿åº¦1)

Ï€[4] = 2  ("ABCAB"çš„å‰ç¼€"AB"å’Œåç¼€"AB"ç›¸ç­‰ï¼Œé•¿åº¦2)

ç»“æœï¼šÏ€ = [0, 0, 0, 1, 2]
```

#### 3.2.3 å‰ç¼€å‡½æ•°çš„ç›´è§‚ç†è§£

```
ä¸ºä»€ä¹ˆÏ€[4] = 2æœ‰ç”¨ï¼Ÿ

å½“åœ¨ä½ç½®4å¤±é…æ—¶ï¼š
æ–‡æœ¬ä¸²: ... A B C A B X ...
æ¨¡å¼ä¸²:     A B C A B
                    â†‘ å¤±é…ä½ç½®

ç”±äºÏ€[4] = 2ï¼Œæˆ‘ä»¬çŸ¥é“ï¼š
- å·²åŒ¹é…éƒ¨åˆ†"ABCAB"çš„å‰ç¼€"AB"ç­‰äºåç¼€"AB"
- å¯ä»¥å°†æ¨¡å¼ä¸²å‘å³ç§»åŠ¨åˆ°å‰ç¼€"AB"å¯¹é½åç¼€"AB"çš„ä½ç½®
- ä¸‹æ¬¡ä»æ¨¡å¼ä¸²çš„ä½ç½®2å¼€å§‹æ¯”è¾ƒï¼Œè€Œä¸æ˜¯ä»ä½ç½®0

è¿™æ ·é¿å…äº†é‡å¤æ¯”è¾ƒå·²çŸ¥ç›¸ç­‰çš„å­—ç¬¦ï¼
```

### 3.3 å‰ç¼€å‡½æ•°è®¡ç®—ç®—æ³•


#### 3.3.1 æš´åŠ›æ–¹æ³•ï¼ˆä½æ•ˆï¼‰

```python
def compute_prefix_naive(pattern):
    """
    æš´åŠ›è®¡ç®—å‰ç¼€å‡½æ•°ï¼ˆä»…ç”¨äºç†è§£ï¼‰
    æ—¶é—´å¤æ‚åº¦ï¼šO(mÂ³)
    """
    m = len(pattern)
    prefix = [0] * m
    
    for i in range(1, m):
        # æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„å‰ç¼€é•¿åº¦
        for length in range(i, 0, -1):
            prefix_str = pattern[:length]
            suffix_str = pattern[i-length+1:i+1]
            
            if prefix_str == suffix_str:
                prefix[i] = length
                break
    
    return prefix
```

#### 3.3.2 é«˜æ•ˆæ–¹æ³•ï¼ˆKMPæ ¸å¿ƒï¼‰

```python
def compute_prefix_function(pattern):
    """
    é«˜æ•ˆè®¡ç®—å‰ç¼€å‡½æ•°
    æ—¶é—´å¤æ‚åº¦ï¼šO(m)
    """
    m = len(pattern)
    prefix = [0] * m
    j = 0  # å½“å‰æœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦
    
    for i in range(1, m):
        # å½“å­—ç¬¦ä¸åŒ¹é…æ—¶ï¼Œå›é€€åˆ°æ›´çŸ­çš„å‰ç¼€
        while j > 0 and pattern[i] != pattern[j]:
            j = prefix[j - 1]
        
        # å­—ç¬¦åŒ¹é…ï¼Œæ‰©å±•ç›¸ç­‰å‰åç¼€
        if pattern[i] == pattern[j]:
            j += 1
        
        prefix[i] = j
    
    return prefix
```

#### 3.3.3 ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ç¤ºä¾‹

```
è®¡ç®—æ¨¡å¼ä¸² "ABABACA" çš„å‰ç¼€å‡½æ•°ï¼š

åˆå§‹ï¼šj = 0, prefix = [0, 0, 0, 0, 0, 0, 0]

i=1: pattern[1]='B', pattern[0]='A'
     'B' â‰  'A', ä¸åŒ¹é…
     prefix[1] = 0

i=2: pattern[2]='A', pattern[0]='A'  
     'A' = 'A', åŒ¹é…, j=1
     prefix[2] = 1

i=3: pattern[3]='B', pattern[1]='B'
     'B' = 'B', åŒ¹é…, j=2  
     prefix[3] = 2

i=4: pattern[4]='A', pattern[2]='A'
     'A' = 'A', åŒ¹é…, j=3
     prefix[4] = 3

i=5: pattern[5]='C', pattern[3]='B'
     'C' â‰  'B', ä¸åŒ¹é…
     j = prefix[3-1] = prefix[2] = 1
     pattern[5]='C', pattern[1]='B'
     'C' â‰  'B', ä¸åŒ¹é…  
     j = prefix[1-1] = prefix[0] = 0
     pattern[5]='C', pattern[0]='A'
     'C' â‰  'A', ä¸åŒ¹é…
     prefix[5] = 0

i=6: pattern[6]='A', pattern[0]='A'
     'A' = 'A', åŒ¹é…, j=1
     prefix[6] = 1

æœ€ç»ˆç»“æœï¼šprefix = [0, 0, 1, 2, 3, 0, 1]
```

### 3.4 KMPæœç´¢è¿‡ç¨‹


#### 3.4.1 ç®—æ³•æµç¨‹

```
KMPæœç´¢çš„å…³é”®æ€æƒ³ï¼š
1. é¢„å¤„ç†ï¼šè®¡ç®—æ¨¡å¼ä¸²çš„å‰ç¼€å‡½æ•°
2. æœç´¢ï¼šä½¿ç”¨å‰ç¼€å‡½æ•°æŒ‡å¯¼è·³è·ƒ
3. åŸåˆ™ï¼šæ–‡æœ¬ä¸²æŒ‡é’ˆiæ°¸ä¸å›é€€ï¼Œåªæœ‰æ¨¡å¼ä¸²æŒ‡é’ˆjä¼šå›é€€
```

#### 3.4.2 è¯¦ç»†æœç´¢è¿‡ç¨‹

```
æ–‡æœ¬ä¸²: A B A B A C A A B A B A B A
æ¨¡å¼ä¸²: A B A B A C A
å‰ç¼€å‡½æ•°: [0, 0, 1, 2, 3, 0, 1]

æœç´¢è¿‡ç¨‹ï¼š
i=0, j=0: A=A, åŒ¹é…, i++, j++
i=1, j=1: B=B, åŒ¹é…, i++, j++  
i=2, j=2: A=A, åŒ¹é…, i++, j++
i=3, j=3: B=B, åŒ¹é…, i++, j++
i=4, j=4: A=A, åŒ¹é…, i++, j++
i=5, j=5: C=C, åŒ¹é…, i++, j++
i=6, j=6: A=A, åŒ¹é…, i++, j++
j=7: æ¨¡å¼ä¸²åŒ¹é…å®Œæˆï¼æ‰¾åˆ°åŒ¹é…ä½ç½®0

ç»§ç»­æœç´¢ï¼šj = prefix[6] = 1
i=7, j=1: A=B, ä¸åŒ¹é…
         j = prefix[0] = 0
i=7, j=0: A=A, åŒ¹é…, i++, j++
i=8, j=1: A=B, ä¸åŒ¹é…
         j = prefix[0] = 0  
i=8, j=0: A=A, åŒ¹é…, i++, j++
...ç»§ç»­æœç´¢...
```

#### 3.4.3 ä¸ºä»€ä¹ˆKMPé«˜æ•ˆï¼Ÿ

```
å…³é”®ä¼˜åŠ¿ï¼š
1. æ–‡æœ¬ä¸²æŒ‡é’ˆä»ä¸å›é€€ï¼šiåªå¢ä¸å‡ï¼Œæ¯ä¸ªå­—ç¬¦æœ€å¤šè¢«æ£€æŸ¥ä¸€æ¬¡
2. æ¨¡å¼ä¸²æŒ‡é’ˆæ™ºèƒ½è·³è·ƒï¼šåˆ©ç”¨å·²åŒ¹é…ä¿¡æ¯ï¼Œè·³è¿‡ä¸å¯èƒ½åŒ¹é…çš„ä½ç½®
3. é¿å…é‡å¤æ¯”è¾ƒï¼šå·²çŸ¥ç›¸ç­‰çš„å‰åç¼€ä¸éœ€è¦é‡æ–°æ¯”è¾ƒ

æ—¶é—´å¤æ‚åº¦åˆ†æï¼š
- æ–‡æœ¬ä¸²æŒ‡é’ˆiæœ€å¤šç§»åŠ¨næ¬¡
- æ¨¡å¼ä¸²æŒ‡é’ˆjæœ€å¤šå›é€€næ¬¡ï¼ˆæ€»çš„å›é€€é‡ä¸è¶…è¿‡å‰è¿›é‡ï¼‰
- æ€»å¤æ‚åº¦ï¼šO(n + m)
```

---

## 4. ğŸ”¨ å®ç°æ–¹æ³•


### 4.1 æœ´ç´ æœç´¢å®ç°


```python
def naive_search(text, pattern):
    """
    æœ´ç´ å­—ç¬¦ä¸²æœç´¢ç®—æ³•
    æ—¶é—´å¤æ‚åº¦: O(nm)
    ç©ºé—´å¤æ‚åº¦: O(1)
    """
    n, m = len(text), len(pattern)
    positions = []
    
    # éå†æ‰€æœ‰å¯èƒ½çš„èµ·å§‹ä½ç½®
    for i in range(n - m + 1):
        match = True
        # é€å­—ç¬¦æ¯”è¾ƒ
        for j in range(m):
            if text[i + j] != pattern[j]:
                match = False
                break
        
        if match:
            positions.append(i)
    
    return positions

def naive_search_with_counter(text, pattern):
    """
    å¸¦æ¯”è¾ƒæ¬¡æ•°ç»Ÿè®¡çš„æœ´ç´ æœç´¢
    """
    n, m = len(text), len(pattern)
    positions = []
    comparisons = 0
    
    for i in range(n - m + 1):
        j = 0
        while j < m and text[i + j] == pattern[j]:
            comparisons += 1
            j += 1
        
        if j < m:  # å¤±é…
            comparisons += 1
        
        if j == m:  # å®Œå…¨åŒ¹é…
            positions.append(i)
    
    return positions, comparisons
```

### 4.2 KMPç®—æ³•å®ç°


```python
def compute_prefix_function(pattern):
    """
    è®¡ç®—æ¨¡å¼ä¸²çš„å‰ç¼€å‡½æ•°
    æ—¶é—´å¤æ‚åº¦: O(m)
    ç©ºé—´å¤æ‚åº¦: O(m)
    """
    m = len(pattern)
    prefix = [0] * m
    j = 0
    
    for i in range(1, m):
        # å¤„ç†ä¸åŒ¹é…çš„æƒ…å†µ
        while j > 0 and pattern[i] != pattern[j]:
            j = prefix[j - 1]
        
        # å¤„ç†åŒ¹é…çš„æƒ…å†µ
        if pattern[i] == pattern[j]:
            j += 1
        
        prefix[i] = j
    
    return prefix

def kmp_search(text, pattern):
    """
    KMPå­—ç¬¦ä¸²æœç´¢ç®—æ³•
    æ—¶é—´å¤æ‚åº¦: O(n + m)
    ç©ºé—´å¤æ‚åº¦: O(m)
    """
    n, m = len(text), len(pattern)
    if m == 0:
        return []
    
    # é¢„å¤„ç†ï¼šè®¡ç®—å‰ç¼€å‡½æ•°
    prefix = compute_prefix_function(pattern)
    positions = []
    j = 0  # æ¨¡å¼ä¸²å½“å‰ä½ç½®
    
    # åœ¨æ–‡æœ¬ä¸²ä¸­æœç´¢
    for i in range(n):
        # å¤„ç†ä¸åŒ¹é…çš„æƒ…å†µï¼šåˆ©ç”¨å‰ç¼€å‡½æ•°è·³è·ƒ
        while j > 0 and text[i] != pattern[j]:
            j = prefix[j - 1]
        
        # å¤„ç†åŒ¹é…çš„æƒ…å†µ
        if text[i] == pattern[j]:
            j += 1
        
        # æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°å®Œæ•´åŒ¹é…
        if j == m:
            positions.append(i - m + 1)
            j = prefix[j - 1]  # ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…
    
    return positions

def kmp_search_with_details(text, pattern):
    """
    å¸¦è¯¦ç»†ä¿¡æ¯çš„KMPæœç´¢
    """
    n, m = len(text), len(pattern)
    prefix = compute_prefix_function(pattern)
    positions = []
    comparisons = 0
    j = 0
    
    print(f"æ¨¡å¼ä¸²: {pattern}")
    print(f"å‰ç¼€å‡½æ•°: {prefix}")
    print("\næœç´¢è¿‡ç¨‹:")
    
    for i in range(n):
        while j > 0 and text[i] != pattern[j]:
            print(f"  ä½ç½®{i}: {text[i]} â‰  {pattern[j]}, jä»{j}è·³åˆ°{prefix[j-1]}")
            j = prefix[j - 1]
            comparisons += 1
        
        comparisons += 1
        if text[i] == pattern[j]:
            print(f"  ä½ç½®{i}: {text[i]} = {pattern[j]}, j={j+1}")
            j += 1
        else:
            print(f"  ä½ç½®{i}: {text[i]} â‰  {pattern[j]}")
        
        if j == m:
            positions.append(i - m + 1)
            print(f"  æ‰¾åˆ°åŒ¹é…ï¼ä½ç½®: {i - m + 1}")
            j = prefix[j - 1]
    
    return positions, comparisons
```

### 4.3 Javaå®ç°


```java
public class StringSearch {
    // æœ´ç´ æœç´¢
    public static List<Integer> naiveSearch(String text, String pattern) {
        List<Integer> positions = new ArrayList<>();
        int n = text.length(), m = pattern.length();
        
        for (int i = 0; i <= n - m; i++) {
            boolean match = true;
            for (int j = 0; j < m; j++) {
                if (text.charAt(i + j) != pattern.charAt(j)) {
                    match = false;
                    break;
                }
            }
            if (match) {
                positions.add(i);
            }
        }
        
        return positions;
    }
    
    // è®¡ç®—å‰ç¼€å‡½æ•°
    private static int[] computePrefixFunction(String pattern) {
        int m = pattern.length();
        int[] prefix = new int[m];
        int j = 0;
        
        for (int i = 1; i < m; i++) {
            while (j > 0 && pattern.charAt(i) != pattern.charAt(j)) {
                j = prefix[j - 1];
            }
            
            if (pattern.charAt(i) == pattern.charAt(j)) {
                j++;
            }
            
            prefix[i] = j;
        }
        
        return prefix;
    }
    
    // KMPæœç´¢
    public static List<Integer> kmpSearch(String text, String pattern) {
        List<Integer> positions = new ArrayList<>();
        int n = text.length(), m = pattern.length();
        
        if (m == 0) return positions;
        
        int[] prefix = computePrefixFunction(pattern);
        int j = 0;
        
        for (int i = 0; i < n; i++) {
            while (j > 0 && text.charAt(i) != pattern.charAt(j)) {
                j = prefix[j - 1];
            }
            
            if (text.charAt(i) == pattern.charAt(j)) {
                j++;
            }
            
            if (j == m) {
                positions.add(i - m + 1);
                j = prefix[j - 1];
            }
        }
        
        return positions;
    }
}
```

### 4.4 C++å®ç°


```cpp
#include <vector>
#include <string>
using namespace std;

// è®¡ç®—å‰ç¼€å‡½æ•°
vector<int> computePrefixFunction(const string& pattern) {
    int m = pattern.length();
    vector<int> prefix(m, 0);
    int j = 0;
    
    for (int i = 1; i < m; i++) {
        while (j > 0 && pattern[i] != pattern[j]) {
            j = prefix[j - 1];
        }
        
        if (pattern[i] == pattern[j]) {
            j++;
        }
        
        prefix[i] = j;
    }
    
    return prefix;
}

// KMPæœç´¢
vector<int> kmpSearch(const string& text, const string& pattern) {
    vector<int> positions;
    int n = text.length(), m = pattern.length();
    
    if (m == 0) return positions;
    
    vector<int> prefix = computePrefixFunction(pattern);
    int j = 0;
    
    for (int i = 0; i < n; i++) {
        while (j > 0 && text[i] != pattern[j]) {
            j = prefix[j - 1];
        }
        
        if (text[i] == pattern[j]) {
            j++;
        }
        
        if (j == m) {
            positions.push_back(i - m + 1);
            j = prefix[j - 1];
        }
    }
    
    return positions;
}
```

---

## 5. ğŸ“Š ç®—æ³•åˆ†æ


### 5.1 æ—¶é—´å¤æ‚åº¦è¯¦ç»†åˆ†æ


#### 5.1.1 æœ´ç´ æœç´¢

```
æœ€å¥½æƒ…å†µ: O(n)
- å‘ç”Ÿæ¡ä»¶ï¼šæ¨¡å¼ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨æ–‡æœ¬ä¸²ä¸­ä¸å­˜åœ¨
- ç¤ºä¾‹ï¼šæ–‡æœ¬"BBBBBB"ï¼Œæ¨¡å¼"AAA"
- æ¯ä¸ªä½ç½®åªéœ€æ¯”è¾ƒ1æ¬¡å°±å¤±é…

å¹³å‡æƒ…å†µ: O(n + nm/Ïƒ)  
- Ïƒæ˜¯å­—ç¬¦é›†å¤§å°
- éšæœºæ–‡æœ¬ä¸‹çš„æœŸæœ›æ€§èƒ½

æœ€åæƒ…å†µ: O(nm)
- å‘ç”Ÿæ¡ä»¶ï¼šæ¯æ¬¡éƒ½åœ¨æœ€åä¸€ä¸ªå­—ç¬¦å¤±é…
- ç¤ºä¾‹ï¼šæ–‡æœ¬"AAAAAAB"ï¼Œæ¨¡å¼"AAAB"
- æ¯ä¸ªä½ç½®éƒ½éœ€è¦æ¯”è¾ƒmæ¬¡
```

#### 5.1.2 KMPç®—æ³•

```
é¢„å¤„ç†: O(m)
- è®¡ç®—å‰ç¼€å‡½æ•°éœ€è¦O(m)æ—¶é—´
- è™½ç„¶æœ‰åµŒå¥—å¾ªç¯ï¼Œä½†æ€»çš„è·³è·ƒæ¬¡æ•°ä¸è¶…è¿‡m

æœç´¢è¿‡ç¨‹: O(n)  
- æ–‡æœ¬ä¸²æŒ‡é’ˆiéå†nä¸ªå­—ç¬¦ï¼šO(n)
- æ¨¡å¼ä¸²æŒ‡é’ˆjæ€»å›é€€æ¬¡æ•°ä¸è¶…è¿‡å‰è¿›æ¬¡æ•°ï¼šO(n)
- æ€»è®¡ï¼šO(n)

æ€»æ—¶é—´å¤æ‚åº¦: O(n + m)
- åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯çº¿æ€§æ—¶é—´ï¼
```

### 5.2 ç©ºé—´å¤æ‚åº¦åˆ†æ

```
æœ´ç´ æœç´¢: O(1)
- åªéœ€è¦å¸¸æ•°ä¸ªå˜é‡

KMPç®—æ³•: O(m)  
- éœ€è¦å­˜å‚¨é•¿åº¦ä¸ºmçš„å‰ç¼€æ•°ç»„
- å¦‚æœåªéœ€è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨åŒ¹é…ï¼Œå¯ä»¥ä¼˜åŒ–åˆ°O(1)
```

### 5.3 å®é™…æ€§èƒ½å¯¹æ¯”


```python
def performance_test():
    """
    æ€§èƒ½æµ‹è¯•å¯¹æ¯”
    """
    import time
    
    # æ„é€ æœ€åæƒ…å†µçš„æµ‹è¯•æ•°æ®
    text = "A" * 10000 + "B"
    pattern = "A" * 100 + "B"
    
    # æœ´ç´ æœç´¢æµ‹è¯•
    start = time.time()
    naive_result, naive_comps = naive_search_with_counter(text, pattern)
    naive_time = time.time() - start
    
    # KMPæœç´¢æµ‹è¯•  
    start = time.time()
    kmp_result = kmp_search(text, pattern)
    kmp_time = time.time() - start
    
    print(f"æœ´ç´ æœç´¢: {naive_time:.6f}s, {naive_comps} æ¬¡æ¯”è¾ƒ")
    print(f"KMPæœç´¢:  {kmp_time:.6f}s")
    print(f"é€Ÿåº¦æå‡: {naive_time/kmp_time:.1f}å€")
```

---

## 6. ğŸ¯ å…¸å‹åº”ç”¨


### 6.1 æ–‡æœ¬ç¼–è¾‘å™¨


```python
def find_and_replace(text, old_pattern, new_pattern):
    """
    æŸ¥æ‰¾å¹¶æ›¿æ¢åŠŸèƒ½
    """
    positions = kmp_search(text, old_pattern)
    
    if not positions:
        return text
    
    # ä»åå‘å‰æ›¿æ¢ï¼Œé¿å…ä½ç½®åç§»
    result = text
    for pos in reversed(positions):
        end_pos = pos + len(old_pattern)
        result = result[:pos] + new_pattern + result[end_pos:]
    
    return result
```

### 6.2 æ—¥å¿—åˆ†æ


```python
def find_error_patterns(log_content):
    """
    åœ¨æ—¥å¿—ä¸­æŸ¥æ‰¾é”™è¯¯æ¨¡å¼
    """
    error_patterns = ["ERROR", "FATAL", "Exception"]
    results = {}
    
    for pattern in error_patterns:
        positions = kmp_search(log_content, pattern)
        results[pattern] = len(positions)
    
    return results
```

### 6.3 DNAåºåˆ—åŒ¹é…


```python
def dna_pattern_search(dna_sequence, pattern):
    """
    DNAåºåˆ—ä¸­çš„æ¨¡å¼æœç´¢
    """
    return kmp_search(dna_sequence.upper(), pattern.upper())
```

---

## 7. âš–ï¸ å¯¹æ¯”åˆ†æ


### 7.1 ç®—æ³•å¯¹æ¯”è¡¨


| ç‰¹æ€§ | æœ´ç´ æœç´¢ | KMPç®—æ³• |
|------|----------|---------|
| **æ—¶é—´å¤æ‚åº¦** | O(nm) | O(n+m) |
| **ç©ºé—´å¤æ‚åº¦** | O(1) | O(m) |
| **é¢„å¤„ç†æ—¶é—´** | O(1) | O(m) |
| **å®ç°éš¾åº¦** | <span style="color:#22c55e">âœ… ç®€å•</span> | <span style="color:#f59e0b">âš ï¸ ä¸­ç­‰</span> |
| **é€‚ç”¨åœºæ™¯** | çŸ­æ¨¡å¼ä¸² | é•¿æ¨¡å¼ä¸²/å¤šæ¬¡æœç´¢ |

### 7.2 é€‰æ‹©å»ºè®®


```python
def choose_algorithm(text_length, pattern_length, search_frequency):
    """
    ç®—æ³•é€‰æ‹©å»ºè®®
    """
    if pattern_length <= 5:
        return "æœ´ç´ æœç´¢ - çŸ­æ¨¡å¼ä¸²æ—¶ç®€å•é«˜æ•ˆ"
    
    if search_frequency > 1:
        return "KMP - å¤šæ¬¡æœç´¢æ—¶é¢„å¤„ç†æˆæœ¬è¢«æ‘Šé”€"
    
    if text_length > pattern_length * 100:
        return "KMP - æ–‡æœ¬å¾ˆé•¿æ—¶é¿å…æœ€åæƒ…å†µ"
    
    return "æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©"
```

---

## 8. ğŸ“‹ æ€»ç»“


### 8.1 æ ¸å¿ƒè¦ç‚¹

1. **ğŸ”¸ æœ´ç´ æœç´¢**ï¼šç®€å•ç›´è§‚ï¼Œé€‚åˆçŸ­æ¨¡å¼ä¸²å’Œç®€å•åœºæ™¯
2. **ğŸ”¸ KMPç®—æ³•**ï¼šçº¿æ€§æ—¶é—´ï¼Œé€šè¿‡å‰ç¼€å‡½æ•°é¿å…é‡å¤æ¯”è¾ƒ
3. **ğŸ”¸ å‰ç¼€å‡½æ•°**ï¼šKMPçš„æ ¸å¿ƒï¼Œè®°å½•æ¨¡å¼ä¸²çš„è‡ªç›¸ä¼¼æ€§
4. **ğŸ”¸ æ—¶é—´å¤æ‚åº¦**ï¼šKMPåœ¨æœ€åæƒ…å†µä¸‹ä»ä¿æŒO(n+m)
5. **ğŸ”¸ å®é™…åº”ç”¨**ï¼šæ–‡æœ¬å¤„ç†ã€ç”Ÿç‰©ä¿¡æ¯å­¦ã€ç¼–è¯‘å™¨ç­‰é¢†åŸŸ

### 8.2 å…³é”®æŠ€æœ¯ç‚¹

- **å‰ç¼€å‡½æ•°è®¡ç®—**ï¼šKMPç®—æ³•çš„é¢„å¤„ç†æ ¸å¿ƒ
- **å¤±é…æ—¶çš„è·³è·ƒ**ï¼šåˆ©ç”¨å·²åŒ¹é…ä¿¡æ¯æ™ºèƒ½ç§»åŠ¨
- **çº¿æ€§æ—¶é—´ä¿è¯**ï¼šæ–‡æœ¬ä¸²æŒ‡é’ˆä¸å›é€€çš„é‡è¦æ€§
- **ç©ºé—´æ—¶é—´æƒè¡¡**ï¼šé¢å¤–O(m)ç©ºé—´æ¢å–æ—¶é—´æ•ˆç‡


### 8.3 å¸¸è§è¯¯åŒº

- **å‰ç¼€å‡½æ•°å«ä¹‰**ï¼šä¸æ˜¯ç®€å•çš„é‡å¤å­—ç¬¦è®¡æ•°
- **è·³è·ƒè·ç¦»**ï¼šå¤±é…æ—¶è·³è·ƒåˆ°å‰ç¼€å‡½æ•°æŒ‡å®šä½ç½®
- **è¾¹ç•Œå¤„ç†**ï¼šæ­£ç¡®å¤„ç†å­—ç¬¦ä¸²å¼€å§‹å’Œç»“æŸ
- **å¤æ‚åº¦åˆ†æ**ï¼šç†è§£ä¸ºä»€ä¹ˆKMPçš„åµŒå¥—å¾ªç¯ä»æ˜¯çº¿æ€§æ—¶é—´

