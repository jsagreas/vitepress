---
title: 4ã€å¸Œå°”æ’åº
---
# ğŸŒŸ å¸Œå°”æ’åº (Shell Sort) å®Œæ•´ç¬”è®°

### ğŸ“š ç›®å½•
1. [ç®—æ³•æ¦‚è¿°](#1-ç®—æ³•æ¦‚è¿°)
2. [åŸºæœ¬æ€æƒ³](#2-åŸºæœ¬æ€æƒ³)
3. [ç®—æ³•åŸç†](#3-ç®—æ³•åŸç†)
4. [å®ç°æ–¹æ³•](#4-å®ç°æ–¹æ³•)
5. [ç®—æ³•åˆ†æ](#5-ç®—æ³•åˆ†æ)
6. [å¢é‡åºåˆ—](#6-å¢é‡åºåˆ—)
7. [åº”ç”¨åœºæ™¯](#7-åº”ç”¨åœºæ™¯)
8. [å¯¹æ¯”åˆ†æ](#8-å¯¹æ¯”åˆ†æ)
9. [å®é™…åº”ç”¨](#9-å®é™…åº”ç”¨)
10. [æ€»ç»“](#10-æ€»ç»“)

---

### 1. ğŸ“– ç®—æ³•æ¦‚è¿°

#### 1.1 å®šä¹‰
å¸Œå°”æ’åºï¼ˆShell Sortï¼‰æ˜¯æ’å…¥æ’åºçš„ä¸€ç§é«˜æ•ˆæ”¹è¿›ç®—æ³•ï¼Œä¹Ÿç§°ä¸º"ç¼©å°å¢é‡æ’åº"ã€‚å®ƒé€šè¿‡å°†åŸå§‹æ•°æ®åˆ†æˆè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œå¯¹å„ä¸ªå­åºåˆ—åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åºï¼Œç„¶åé€æ­¥ç¼©å°å¢é‡ï¼Œæœ€ç»ˆå®ç°æ•´ä¸ªåºåˆ—çš„æ’åºã€‚

#### 1.2 å†å²èƒŒæ™¯
- **å‘æ˜è€…**ï¼šDonald Shellï¼ˆ1959å¹´ï¼‰
- **æ„ä¹‰**ï¼šç¬¬ä¸€ä¸ªçªç ´O(nÂ²)æ—¶é—´å¤æ‚åº¦çš„æ’åºç®—æ³•
- **åœ°ä½**ï¼šç»å…¸çš„æ’åºç®—æ³•ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ä»æœ‰é‡è¦ä»·å€¼

#### 1.3 æ ¸å¿ƒç‰¹å¾
- **ğŸ”¹ ä¸ç¨³å®šæ’åº**ï¼šç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®å¯èƒ½æ”¹å˜
- **ğŸ”¹ åŸåœ°æ’åº**ï¼šåªéœ€è¦ O(1) çš„é¢å¤–å†…å­˜ç©ºé—´
- **ğŸ”¹ è‡ªé€‚åº”æ€§**ï¼šå¯¹äºéƒ¨åˆ†æœ‰åºçš„æ•°ç»„æ•ˆç‡è¾ƒé«˜
- **ğŸ”¹ å¢é‡å¼**ï¼šé€šè¿‡é€æ­¥ç¼©å°å¢é‡å®ç°æ’åº

#### 1.4 ç®—æ³•åˆ†ç±»
- æ¯”è¾ƒæ’åºç®—æ³•
- å†…éƒ¨æ’åºç®—æ³•
- å¢é‡å¼æ’åºç®—æ³•
- æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆ

---

### 2. ğŸ’¡ åŸºæœ¬æ€æƒ³

#### 2.1 æ ¸å¿ƒæ€æƒ³
å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼š
1. **åˆ†ç»„æ’åº**ï¼šå°†æ•°ç»„æŒ‰ç…§ä¸€å®šçš„å¢é‡ï¼ˆé—´éš”ï¼‰åˆ†æˆå¤šä¸ªå­åºåˆ—
2. **æ’å…¥æ’åº**ï¼šå¯¹æ¯ä¸ªå­åºåˆ—åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åº
3. **ç¼©å°å¢é‡**ï¼šé€æ­¥å‡å°å¢é‡ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹
4. **æœ€ç»ˆæ’åº**ï¼šå½“å¢é‡ä¸º1æ—¶ï¼Œè¿›è¡Œæœ€åä¸€æ¬¡æ’å…¥æ’åº

#### 2.2 ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ
- **å‡å°‘æ¯”è¾ƒæ¬¡æ•°**ï¼šé€šè¿‡å¤§é—´éš”çš„é¢„æ’åºï¼Œå‡å°‘å°é—´éš”æ—¶çš„ç§»åŠ¨æ¬¡æ•°
- **åˆ©ç”¨æ’å…¥æ’åºä¼˜åŠ¿**ï¼šå½“æ•°ç»„åŸºæœ¬æœ‰åºæ—¶ï¼Œæ’å…¥æ’åºæ•ˆç‡å¾ˆé«˜
- **é€æ­¥ä¼˜åŒ–**ï¼šæ¯æ¬¡æ’åºéƒ½ä½¿æ•°ç»„æ›´åŠ æœ‰åº

#### 2.3 æ’åºè¿‡ç¨‹ç¤ºä¾‹
ä»¥æ•°ç»„ [8, 3, 5, 4, 7, 6, 1, 2] ä¸ºä¾‹ï¼Œä½¿ç”¨å¢é‡åºåˆ— [4, 2, 1]ï¼š

```
åŸå§‹æ•°ç»„: [8, 3, 5, 4, 7, 6, 1, 2]

å¢é‡gap=4æ—¶åˆ†ç»„:
ç»„1: [8, 7] -> [7, 8]
ç»„2: [3, 6] -> [3, 6]  
ç»„3: [5, 1] -> [1, 5]
ç»„4: [4, 2] -> [2, 4]
ç»“æœ: [7, 3, 1, 2, 8, 6, 5, 4]

å¢é‡gap=2æ—¶åˆ†ç»„:
ç»„1: [7, 1, 8, 5] -> [1, 5, 7, 8]
ç»„2: [3, 2, 6, 4] -> [2, 3, 4, 6]
ç»“æœ: [1, 2, 5, 3, 7, 4, 8, 6]

å¢é‡gap=1æ—¶(æ ‡å‡†æ’å…¥æ’åº):
ç»“æœ: [1, 2, 3, 4, 5, 6, 7, 8]
```

---

### 3. âš™ï¸ ç®—æ³•åŸç†

#### 3.1 å·¥ä½œæœºåˆ¶
1. **é€‰æ‹©å¢é‡åºåˆ—**ï¼šç¡®å®šä¸€ä¸ªé€’å‡çš„å¢é‡åºåˆ—ï¼Œæœ€åä¸€ä¸ªå¢é‡å¿…é¡»ä¸º1
2. **åˆ†ç»„å¤„ç†**ï¼šæŒ‰ç…§å½“å‰å¢é‡å°†æ•°ç»„å…ƒç´ åˆ†æˆè‹¥å¹²ç»„
3. **ç»„å†…æ’åº**ï¼šå¯¹æ¯ç»„å…ƒç´ è¿›è¡Œæ’å…¥æ’åº
4. **ç¼©å°å¢é‡**ï¼šé€‰æ‹©ä¸‹ä¸€ä¸ªæ›´å°çš„å¢é‡
5. **é‡å¤è¿‡ç¨‹**ï¼šé‡å¤æ­¥éª¤2-4ï¼Œç›´åˆ°å¢é‡ä¸º1

#### 3.2 å…³é”®æ¦‚å¿µ

###### 3.2.1 å¢é‡ï¼ˆGapï¼‰
- **å®šä¹‰**ï¼šå°†æ•°ç»„åˆ†ç»„çš„é—´éš”å¤§å°
- **ä½œç”¨**ï¼šå†³å®šäº†åˆ†ç»„æ–¹å¼å’Œç®—æ³•æ€§èƒ½
- **è¦æ±‚**ï¼šå¿…é¡»æ˜¯æ­£æ•´æ•°ä¸”é€’å‡ï¼Œæœ€åä¸€ä¸ªå¢é‡å¿…é¡»ä¸º1

###### 3.2.2 å¢é‡åºåˆ—
- **å®šä¹‰**ï¼šä¸€ç³»åˆ—é€’å‡çš„å¢é‡å€¼
- **é‡è¦æ€§**ï¼šç›´æ¥å½±å“ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦
- **å¸¸è§åºåˆ—**ï¼šShellåºåˆ—ã€Hibbardåºåˆ—ã€Knuthåºåˆ—ç­‰

#### 3.3 æ’åºä¸å˜å¼
- ç»è¿‡å¢é‡hçš„æ’åºåï¼Œæ•°ç»„å˜ä¸ºhæœ‰åº
- hæœ‰åºæ„å‘³ç€ï¼šå¯¹äºä»»æ„iï¼Œarr[i] â‰¤ arr[i+h]
- è¾ƒå¤§çš„å¢é‡ä½¿æ•°ç»„ç²—ç•¥æœ‰åºï¼Œè¾ƒå°çš„å¢é‡ä½¿æ•°ç»„ç²¾ç»†æœ‰åº

---

### 4. ğŸ”¨ å®ç°æ–¹æ³•

#### 4.1 åŸºç¡€å®ç°ï¼ˆPythonï¼‰

```python
def shell_sort(arr):
    """
    å¸Œå°”æ’åºçš„åŸºæœ¬å®ç°
    ä½¿ç”¨ShellåŸå§‹å¢é‡åºåˆ—: n/2, n/4, n/8, ..., 1
    """
    n = len(arr)
    gap = n // 2
    
    # é€æ­¥ç¼©å°å¢é‡
    while gap > 0:
        # å¯¹æ¯ä¸ªå¢é‡è¿›è¡Œæ’å…¥æ’åº
        for i in range(gap, n):
            temp = arr[i]
            j = i
            
            # åœ¨å¢é‡åˆ†ç»„å†…è¿›è¡Œæ’å…¥æ’åº
            while j >= gap and arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
            
            arr[j] = temp
        
        gap //= 2
    
    return arr
```

#### 4.2 ä¼˜åŒ–å®ç°ï¼ˆKnuthåºåˆ—ï¼‰

```python
def shell_sort_knuth(arr):
    """
    ä½¿ç”¨Knuthå¢é‡åºåˆ—çš„å¸Œå°”æ’åº
    å¢é‡åºåˆ—: 1, 4, 13, 40, 121, ... (3^k - 1) / 2
    """
    n = len(arr)
    
    # è®¡ç®—æœ€å¤§å¢é‡
    gap = 1
    while gap < n // 3:
        gap = 3 * gap + 1  # ç”ŸæˆKnuthåºåˆ—
    
    # é€æ­¥ç¼©å°å¢é‡
    while gap > 0:
        for i in range(gap, n):
            temp = arr[i]
            j = i
            
            while j >= gap and arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
            
            arr[j] = temp
        
        gap //= 3
    
    return arr
```

#### 4.3 Java å®ç°

```java
public class ShellSort {
    public static void shellSort(int[] arr) {
        int n = arr.length;
        
        // ä½¿ç”¨ShellåŸå§‹å¢é‡åºåˆ—
        for (int gap = n / 2; gap > 0; gap /= 2) {
            // å¯¹æ¯ä¸ªå¢é‡è¿›è¡Œæ’å…¥æ’åº
            for (int i = gap; i < n; i++) {
                int temp = arr[i];
                int j = i;
                
                while (j >= gap && arr[j - gap] > temp) {
                    arr[j] = arr[j - gap];
                    j -= gap;
                }
                
                arr[j] = temp;
            }
        }
    }
    
    // Knuthåºåˆ—å®ç°
    public static void shellSortKnuth(int[] arr) {
        int n = arr.length;
        int gap = 1;
        
        // è®¡ç®—æœ€å¤§å¢é‡
        while (gap < n / 3) {
            gap = 3 * gap + 1;
        }
        
        while (gap > 0) {
            for (int i = gap; i < n; i++) {
                int temp = arr[i];
                int j = i;
                
                while (j >= gap && arr[j - gap] > temp) {
                    arr[j] = arr[j - gap];
                    j -= gap;
                }
                
                arr[j] = temp;
            }
            
            gap /= 3;
        }
    }
}
```

#### 4.4 C++ å®ç°

```cpp
#include <vector>
using namespace std;

void shellSort(vector<int>& arr) {
    int n = arr.size();
    
    // ä½¿ç”¨ShellåŸå§‹å¢é‡åºåˆ—
    for (int gap = n / 2; gap > 0; gap /= 2) {
        for (int i = gap; i < n; i++) {
            int temp = arr[i];
            int j = i;
            
            while (j >= gap && arr[j - gap] > temp) {
                arr[j] = arr[j - gap];
                j -= gap;
            }
            
            arr[j] = temp;
        }
    }
}

// Sedgewickåºåˆ—å®ç°
void shellSortSedgewick(vector<int>& arr) {
    int n = arr.size();
    vector<int> gaps;
    
    // ç”ŸæˆSedgewickåºåˆ—
    int k = 0;
    while (true) {
        int gap;
        if (k % 2 == 0) {
            gap = 9 * (1 << k) - 9 * (1 << (k/2)) + 1;
        } else {
            gap = 8 * (1 << k) - 6 * (1 << ((k+1)/2)) + 1;
        }
        
        if (gap >= n) break;
        gaps.push_back(gap);
        k++;
    }
    
    // ä»å¤§åˆ°å°ä½¿ç”¨å¢é‡
    for (int i = gaps.size() - 1; i >= 0; i--) {
        int gap = gaps[i];
        for (int j = gap; j < n; j++) {
            int temp = arr[j];
            int k = j;
            
            while (k >= gap && arr[k - gap] > temp) {
                arr[k] = arr[k - gap];
                k -= gap;
            }
            
            arr[k] = temp;
        }
    }
}
```

---

### 5. ğŸ“Š ç®—æ³•åˆ†æ

#### 5.1 æ—¶é—´å¤æ‚åº¦

###### 5.1.1 ä¸åŒå¢é‡åºåˆ—çš„å¤æ‚åº¦
- **ShellåŸå§‹åºåˆ—**ï¼š`O(nÂ²)` <span style="color:#f59e0b">âš ï¸ è¾ƒå·®</span>
- **Hibbardåºåˆ—**ï¼š`O(n^1.5)` <span style="color:#22c55e">âœ… è‰¯å¥½</span>
- **Knuthåºåˆ—**ï¼š`O(n^1.5)` <span style="color:#22c55e">âœ… è‰¯å¥½</span>
- **Sedgewickåºåˆ—**ï¼š`O(n^1.33)` <span style="color:#22c55e">âœ… ä¼˜ç§€</span>

###### 5.1.2 å¹³å‡æƒ…å†µ
- **ä¸€èˆ¬æƒ…å†µ**ï¼š`O(n^1.25)` åˆ° `O(n^1.5)` ä¹‹é—´
- **å®é™…æ€§èƒ½**ï¼šé€šå¸¸æ¯”O(nÂ²)ç®—æ³•å¿«å¾—å¤š

###### 5.1.3 æœ€å¥½æƒ…å†µ
- **æ¡ä»¶**ï¼šæ•°ç»„å·²ç»åŸºæœ¬æœ‰åº
- **å¤æ‚åº¦**ï¼šæ¥è¿‘ `O(n log n)`

#### 5.2 ç©ºé—´å¤æ‚åº¦
- **å¤æ‚åº¦**ï¼š`O(1)` <span style="color:#22c55e">âœ… ä¼˜ç§€</span>
- **åŸå› **ï¼šåªä½¿ç”¨äº†å¸¸æ•°ä¸ªé¢å¤–å˜é‡

#### 5.3 ç¨³å®šæ€§åˆ†æ
- **ä¸ç¨³å®šæ’åº**ï¼šç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®å¯èƒ½æ”¹å˜
- **åŸå› **ï¼šå¤§å¢é‡å¯èƒ½å¯¼è‡´ç›¸ç­‰å…ƒç´ è·¨è¶Šè¾ƒå¤§è·ç¦»

#### 5.4 æ€§èƒ½ç‰¹ç‚¹
- **ğŸ”¸ é€‚åº”æ€§å¼º**ï¼šå¯¹äºéƒ¨åˆ†æœ‰åºçš„æ•°ç»„è¡¨ç°è‰¯å¥½
- **ğŸ”¸ å®ç”¨æ€§é«˜**ï¼šåœ¨ä¸­ç­‰è§„æ¨¡æ•°æ®ä¸Šæ€§èƒ½ä¼˜ç§€
- **ğŸ”¸ å®ç°ç®€å•**ï¼šç›¸æ¯”å…¶ä»–é«˜æ•ˆç®—æ³•ï¼Œå®ç°è¾ƒä¸ºç®€å•

---

### 6. ğŸš€ å¢é‡åºåˆ—

#### 6.1 ShellåŸå§‹åºåˆ—
```
åºåˆ—: n/2, n/4, n/8, ..., 1
ç”Ÿæˆ: gap = n/2; gap > 0; gap /= 2
æ—¶é—´å¤æ‚åº¦: O(nÂ²)
ç‰¹ç‚¹: å®ç°ç®€å•ï¼Œä½†æ€§èƒ½ä¸æ˜¯æœ€ä¼˜
```

#### 6.2 Hibbardåºåˆ—
```
åºåˆ—: 1, 3, 7, 15, 31, ... (2^k - 1)
ç”Ÿæˆ: gap = 2^k - 1, k = 1, 2, 3, ...
æ—¶é—´å¤æ‚åº¦: O(n^1.5)
ç‰¹ç‚¹: ç†è®ºæ€§èƒ½å¥½ï¼Œå®é™…åº”ç”¨å¹¿æ³›
```

#### 6.3 Knuthåºåˆ—
```
åºåˆ—: 1, 4, 13, 40, 121, ... ((3^k - 1) / 2)
ç”Ÿæˆ: gap = (3^k - 1) / 2, k = 1, 2, 3, ...
æ—¶é—´å¤æ‚åº¦: O(n^1.5)
ç‰¹ç‚¹: å®é™…æ€§èƒ½ä¼˜ç§€ï¼Œå¹¿æ³›ä½¿ç”¨
```

#### 6.4 Sedgewickåºåˆ—
```
åºåˆ—: 1, 5, 19, 41, 109, 209, ...
ç”Ÿæˆ: å¤æ‚å…¬å¼ï¼Œäº¤æ›¿ä½¿ç”¨ä¸¤ç§è®¡ç®—æ–¹å¼
æ—¶é—´å¤æ‚åº¦: O(n^1.33)
ç‰¹ç‚¹: ç†è®ºä¸Šæœ€ä¼˜ï¼Œä½†å®ç°è¾ƒå¤æ‚
```

#### 6.5 å¢é‡åºåˆ—å®ç°

```python
def generate_shell_gaps(n):
    """ç”ŸæˆShellåŸå§‹å¢é‡åºåˆ—"""
    gaps = []
    gap = n // 2
    while gap > 0:
        gaps.append(gap)
        gap //= 2
    return gaps

def generate_hibbard_gaps(n):
    """ç”ŸæˆHibbardå¢é‡åºåˆ—"""
    gaps = []
    k = 1
    while True:
        gap = (1 << k) - 1  # 2^k - 1
        if gap >= n:
            break
        gaps.append(gap)
        k += 1
    return gaps[::-1]  # ä»å¤§åˆ°å°

def generate_knuth_gaps(n):
    """ç”ŸæˆKnuthå¢é‡åºåˆ—"""
    gaps = []
    gap = 1
    while gap < n:
        gaps.append(gap)
        gap = 3 * gap + 1
    return gaps[::-1]  # ä»å¤§åˆ°å°

def generate_sedgewick_gaps(n):
    """ç”ŸæˆSedgewickå¢é‡åºåˆ—"""
    gaps = []
    k = 0
    while True:
        if k % 2 == 0:
            gap = 9 * (1 << k) - 9 * (1 << (k // 2)) + 1
        else:
            gap = 8 * (1 << k) - 6 * (1 << ((k + 1) // 2)) + 1
        
        if gap >= n:
            break
        gaps.append(gap)
        k += 1
    return gaps[::-1]  # ä»å¤§åˆ°å°
```

---

### 7. ğŸ¯ åº”ç”¨åœºæ™¯

#### 7.1 é€‚ç”¨æƒ…å†µ
- **ğŸ”¸ ä¸­ç­‰è§„æ¨¡æ•°æ®**ï¼šæ•°æ®é‡åœ¨å‡ åƒåˆ°å‡ ä¸‡ä¹‹é—´
- **ğŸ”¸ å†…å­˜å—é™**ï¼šéœ€è¦åŸåœ°æ’åºçš„åœºæ™¯
- **ğŸ”¸ ç®€å•å®ç°**ï¼šéœ€è¦ä¸€ä¸ªæ˜“äºç†è§£å’Œå®ç°çš„é«˜æ•ˆç®—æ³•
- **ğŸ”¸ éƒ¨åˆ†æœ‰åº**ï¼šæ•°æ®å·²ç»éƒ¨åˆ†æœ‰åº

#### 7.2 ä¸é€‚ç”¨æƒ…å†µ
- **ğŸ”¸ å¤§è§„æ¨¡æ•°æ®**ï¼šè¶…å¤§æ•°æ®é›†ï¼Œæ›´é€‚åˆç”¨å¿«é€Ÿæ’åºæˆ–å½’å¹¶æ’åº
- **ğŸ”¸ ç¨³å®šæ€§è¦æ±‚**ï¼šéœ€è¦ä¿æŒç›¸ç­‰å…ƒç´ ç›¸å¯¹ä½ç½®çš„åœºæ™¯
- **ğŸ”¸ æœ€ä¼˜æ€§èƒ½**ï¼šéœ€è¦ç†è®ºæœ€ä¼˜æ—¶é—´å¤æ‚åº¦çš„åœºæ™¯

#### 7.3 å®é™…åº”ç”¨ç¤ºä¾‹

```python
def process_student_scores(scores):
    """
    å¤„ç†å­¦ç”Ÿæˆç»© - å¸Œå°”æ’åºçš„å…¸å‹åº”ç”¨
    ä¸­ç­‰è§„æ¨¡æ•°æ®ï¼Œä¸è¦æ±‚ç¨³å®šæ€§
    """
    print(f"æ’åºå‰: {scores[:10]}...")  # æ˜¾ç¤ºå‰10ä¸ª
    
    # ä½¿ç”¨å¸Œå°”æ’åº
    shell_sort_knuth(scores)
    
    print(f"æ’åºå: {scores[:10]}...")
    return scores

def sort_inventory_items(items):
    """
    åº“å­˜å•†å“æ’åº - æŒ‰ä»·æ ¼æ’åº
    """
    # æŒ‰ä»·æ ¼æ’åºï¼Œä½¿ç”¨å¸Œå°”æ’åº
    def shell_sort_by_price(arr):
        n = len(arr)
        gap = 1
        while gap < n // 3:
            gap = 3 * gap + 1
        
        while gap > 0:
            for i in range(gap, n):
                temp = arr[i]
                j = i
                
                while j >= gap and arr[j - gap]['price'] > temp['price']:
                    arr[j] = arr[j - gap]
                    j -= gap
                
                arr[j] = temp
            
            gap //= 3
        
        return arr
    
    return shell_sort_by_price(items)
```

---

### 8. âš–ï¸ å¯¹æ¯”åˆ†æ

#### 8.1 ä¸å…¶ä»–æ’åºç®—æ³•å¯¹æ¯”

| ç®—æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | ç¨³å®šæ€§ | é€‚ç”¨åœºæ™¯ |
|------|------------|------------|---------|----------|
| å¸Œå°”æ’åº | O(n^1.3) | O(1) | <span style="color:#ef4444">âŒ ä¸ç¨³å®š</span> | <span style="color:#22c55e">âœ… ä¸­ç­‰æ•°æ®</span> |
| æ’å…¥æ’åº | O(nÂ²) | O(1) | <span style="color:#22c55e">âœ… ç¨³å®š</span> | <span style="color:#f59e0b">âš ï¸ å°æ•°æ®</span> |
| å¿«é€Ÿæ’åº | O(n log n) | O(log n) | <span style="color:#ef4444">âŒ ä¸ç¨³å®š</span> | <span style="color:#22c55e">âœ… å¤§æ•°æ®</span> |
| å½’å¹¶æ’åº | O(n log n) | O(n) | <span style="color:#22c55e">âœ… ç¨³å®š</span> | <span style="color:#22c55e">âœ… å¤§æ•°æ®</span> |
| å †æ’åº | O(n log n) | O(1) | <span style="color:#ef4444">âŒ ä¸ç¨³å®š</span> | <span style="color:#22c55e">âœ… å¤§æ•°æ®</span> |

#### 8.2 æ€§èƒ½ç‰¹ç‚¹å¯¹æ¯”
- **å¸Œå°”æ’åº vs æ’å…¥æ’åº**ï¼šå¸Œå°”æ’åºåœ¨å¤§æ•°æ®ä¸Šæ€§èƒ½æ˜¾è‘—ä¼˜äºæ’å…¥æ’åº
- **å¸Œå°”æ’åº vs å¿«é€Ÿæ’åº**ï¼šå¸Œå°”æ’åºå®ç°ç®€å•ï¼Œä½†å¤§æ•°æ®æ€§èƒ½ç•¥å·®
- **å¸Œå°”æ’åº vs å½’å¹¶æ’åº**ï¼šå¸Œå°”æ’åºç©ºé—´å¤æ‚åº¦æ›´ä¼˜ï¼Œä½†æ—¶é—´å¤æ‚åº¦ç•¥å·®

#### 8.3 å®é™…æ€§èƒ½æµ‹è¯•

```python
import time
import random

def performance_comparison():
    """æ€§èƒ½å¯¹æ¯”æµ‹è¯•"""
    sizes = [1000, 5000, 10000, 20000]
    
    for size in sizes:
        # ç”Ÿæˆéšæœºæ•°æ®
        data = [random.randint(1, 10000) for _ in range(size)]
        
        # å¸Œå°”æ’åºæµ‹è¯•
        arr1 = data.copy()
        start = time.time()
        shell_sort_knuth(arr1)
        shell_time = time.time() - start
        
        # æ’å…¥æ’åºæµ‹è¯•
        arr2 = data.copy()
        start = time.time()
        insertion_sort(arr2)
        insertion_time = time.time() - start
        
        # Pythonå†…ç½®æ’åºæµ‹è¯•
        arr3 = data.copy()
        start = time.time()
        arr3.sort()
        builtin_time = time.time() - start
        
        print(f"Size: {size}")
        print(f"  Shell Sort: {shell_time:.6f}s")
        print(f"  Insertion Sort: {insertion_time:.6f}s")
        print(f"  Built-in Sort: {builtin_time:.6f}s")
        print(f"  Speedup vs Insertion: {insertion_time/shell_time:.2f}x")
        print()

def insertion_sort(arr):
    """æ’å…¥æ’åºå®ç°"""
    for i in range(1, len(arr)):
        key = arr[i]
        j = i - 1
        while j >= 0 and arr[j] > key:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = key
    return arr
```

---

### 9. ğŸ› ï¸ å®é™…åº”ç”¨

#### 9.1 åµŒå…¥å¼ç³»ç»Ÿ
å¸Œå°”æ’åºåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­çš„åº”ç”¨ï¼š
- **å†…å­˜é™åˆ¶**ï¼šO(1)ç©ºé—´å¤æ‚åº¦é€‚åˆå†…å­˜å—é™çš„ç¯å¢ƒ
- **ä¸­ç­‰æ€§èƒ½**ï¼šåœ¨ä¸­ç­‰è§„æ¨¡æ•°æ®ä¸Šæ€§èƒ½è‰¯å¥½
- **å®ç°ç®€å•**ï¼šä»£ç é‡å°ï¼Œæ˜“äºç»´æŠ¤

```c
// åµŒå…¥å¼ç³»ç»Ÿä¸­çš„å¸Œå°”æ’åºå®ç°
void embedded_shell_sort(int arr[], int n) {
    // ä½¿ç”¨ç®€å•çš„Shellåºåˆ—ä»¥èŠ‚çœå†…å­˜
    for (int gap = n / 2; gap > 0; gap /= 2) {
        for (int i = gap; i < n; i++) {
            int temp = arr[i];
            int j = i;
            
            while (j >= gap && arr[j - gap] > temp) {
                arr[j] = arr[j - gap];
                j -= gap;
            }
            
            arr[j] = temp;
        }
    }
}
```

#### 9.2 æ•°æ®åº“ç³»ç»Ÿ
åœ¨æ•°æ®åº“ç´¢å¼•æ„å»ºä¸­çš„åº”ç”¨ï¼š
- **B+æ ‘èŠ‚ç‚¹æ’åº**ï¼šèŠ‚ç‚¹å†…éƒ¨è®°å½•çš„æ’åº
- **ä¸´æ—¶ç»“æœæ’åº**ï¼šæŸ¥è¯¢ä¸­é—´ç»“æœçš„æ’åº
- **æ‰¹é‡æ’å…¥ä¼˜åŒ–**ï¼šå¤§æ‰¹é‡æ•°æ®æ’å…¥å‰çš„é¢„æ’åº

#### 9.3 å›¾å½¢å¤„ç†
åœ¨å›¾å½¢å¤„ç†ä¸­çš„åº”ç”¨ï¼š
```python
def sort_vertices_by_distance(vertices, camera_pos):
    """
    æŒ‰åˆ°ç›¸æœºçš„è·ç¦»æ’åºé¡¶ç‚¹ - ç”¨äºæ·±åº¦æ’åº
    """
    # è®¡ç®—è·ç¦»
    for vertex in vertices:
        dx = vertex.x - camera_pos.x
        dy = vertex.y - camera_pos.y
        dz = vertex.z - camera_pos.z
        vertex.distance = dx*dx + dy*dy + dz*dz
    
    # ä½¿ç”¨å¸Œå°”æ’åºæŒ‰è·ç¦»æ’åº
    n = len(vertices)
    gap = 1
    while gap < n // 3:
        gap = 3 * gap + 1
    
    while gap > 0:
        for i in range(gap, n):
            temp = vertices[i]
            j = i
            
            while j >= gap and vertices[j - gap].distance > temp.distance:
                vertices[j] = vertices[j - gap]
                j -= gap
            
            vertices[j] = temp
        
        gap //= 3
    
    return vertices
```

#### 9.4 ç³»ç»Ÿçº§åº”ç”¨
åœ¨æ“ä½œç³»ç»Ÿä¸­çš„åº”ç”¨ï¼š
- **è¿›ç¨‹è°ƒåº¦**ï¼šæŒ‰ä¼˜å…ˆçº§æ’åºå°±ç»ªé˜Ÿåˆ—
- **å†…å­˜ç®¡ç†**ï¼šç©ºé—²å†…å­˜å—æŒ‰å¤§å°æ’åº
- **æ–‡ä»¶ç³»ç»Ÿ**ï¼šç›®å½•é¡¹æ’åº

---

### 10. ğŸ“‹ æ€»ç»“

#### 10.1 æ ¸å¿ƒä¼˜åŠ¿
1. **ğŸ”¸ æ€§èƒ½ä¼˜ç§€**ï¼šæ—¶é—´å¤æ‚åº¦ä¼˜äºO(nÂ²)ï¼Œå®é™…æ€§èƒ½è‰¯å¥½
2. **ğŸ”¸ å†…å­˜é«˜æ•ˆ**ï¼šåªéœ€O(1)çš„é¢å¤–ç©ºé—´
3. **ğŸ”¸ å®ç°ç®€å•**ï¼šç›¸æ¯”å…¶ä»–é«˜æ•ˆç®—æ³•ï¼Œå®ç°è¾ƒä¸ºç®€å•
4. **ğŸ”¸ é€‚åº”æ€§å¼º**ï¼šå¯¹äºéƒ¨åˆ†æœ‰åºçš„æ•°æ®è¡¨ç°ä¼˜ç§€
5. **ğŸ”¸ å®ç”¨æ€§é«˜**ï¼šåœ¨ä¸­ç­‰è§„æ¨¡æ•°æ®ä¸Šæ˜¯å¾ˆå¥½çš„é€‰æ‹©

#### 10.2 ä¸»è¦åŠ£åŠ¿
1. **ğŸ”¸ ä¸ç¨³å®š**ï¼šä¸èƒ½ä¿æŒç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®
2. **ğŸ”¸ å¤æ‚åº¦åˆ†æå›°éš¾**ï¼šæ—¶é—´å¤æ‚åº¦åˆ†ææ¯”è¾ƒå¤æ‚
3. **ğŸ”¸ å¢é‡åºåˆ—ä¾èµ–**ï¼šæ€§èƒ½é«˜åº¦ä¾èµ–äºå¢é‡åºåˆ—çš„é€‰æ‹©
4. **ğŸ”¸ å¤§æ•°æ®æ€§èƒ½**ï¼šåœ¨è¶…å¤§æ•°æ®é›†ä¸Šä¸å¦‚å¿«é€Ÿæ’åºç­‰ç®—æ³•

#### 10.3 é€‰æ‹©å»ºè®®

###### 10.3.1 é€‚åˆä½¿ç”¨å¸Œå°”æ’åºçš„åœºæ™¯
- âœ… æ•°æ®é‡åœ¨1000-50000ä¹‹é—´
- âœ… å†…å­˜ç©ºé—´å—é™
- âœ… ä¸è¦æ±‚ç¨³å®šæ€§
- âœ… éœ€è¦ç®€å•å®ç°çš„é«˜æ•ˆç®—æ³•
- âœ… æ•°æ®éƒ¨åˆ†æœ‰åº

###### 10.3.2 ä¸é€‚åˆä½¿ç”¨å¸Œå°”æ’åºçš„åœºæ™¯
- âŒ è¶…å¤§æ•°æ®é›†ï¼ˆ>100000ï¼‰
- âŒ è¦æ±‚ç¨³å®šæ’åº
- âŒ éœ€è¦ç†è®ºæœ€ä¼˜æ—¶é—´å¤æ‚åº¦
- âŒ å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯




