---
title: 2、层级与过滤选择器
---
## 📚 目录

1. [层级选择器核心用法](#1-层级选择器核心用法)
2. [过滤选择器必备技巧](#2-过滤选择器必备技巧)
3. [可见性选择器实战](#3-可见性选择器实战)
4. [选择器组合使用](#4-选择器组合使用)
5. [核心要点总结](#5-核心要点总结)

---

## 1. 🔍 层级选择器核心用法


### 1.1 四种层级关系


**层级关系图解**：
```
      父元素 (parent)
        |
    ┌───┴───┐
   子A     子B (child)
    |       |
   孙1     孙2 (后代)
```

### 1.2 后代选择器 - 最常用


**🔸 基本语法**
```javascript
$("parent child")  // 选择parent内的所有child
```

**💡 实际应用**
```html
<div class="container">
  <p>我会被选中</p>
  <div>
    <p>我也会被选中</p>  <!-- 孙子级别也能选到 -->
  </div>
</div>
```

```javascript
// 选择container内的所有p标签
$(".container p").css("color", "red");
```

**⚡ 使用场景**：
- 导航菜单样式设置
- 文章内容区域的段落操作
- 表格内特定单元格处理

### 1.3 子元素选择器 - 精准控制


**🔸 基本语法**
```javascript
$("parent > child")  // 只选择直接子元素
```

**💡 对比演示**
```html
<ul class="menu">
  <li>一级菜单1</li>     <!-- 会被选中 -->
  <li>一级菜单2         <!-- 会被选中 -->
    <ul>
      <li>二级菜单</li>  <!-- 不会被选中 -->
    </ul>
  </li>
</ul>
```

```javascript
// 只选择一级菜单项
$(".menu > li").addClass("active");

// 对比：后代选择器会选择所有li
$(".menu li");  // 包括二级菜单的li
```

### 1.4 兄弟选择器 - 相邻操作


**🔸 相邻兄弟选择器**
```javascript
$("prev + next")  // 选择紧挨着prev的下一个next元素
```

**🔸 通用兄弟选择器**
```javascript
$("prev ~ siblings")  // 选择prev后面所有的siblings元素
```

**💡 实战例子**
```html
<h2>标题</h2>
<p>第一段</p>    <!-- + 能选中这个 -->
<p>第二段</p>    <!-- ~ 能选中这个 -->
<p>第三段</p>    <!-- ~ 能选中这个 -->
```

```javascript
// 选择标题后的第一段
$("h2 + p").css("font-weight", "bold");

// 选择标题后的所有段落
$("h2 ~ p").css("margin-left", "20px");
```

---

## 2. 🎯 过滤选择器必备技巧


### 2.1 位置过滤器


**🔸 核心语法**
```javascript
:first    // 第一个元素
:last     // 最后一个元素
:eq(n)    // 第n个元素（从0开始）
```

**💡 常见用法**
```html
<ul>
  <li>项目1</li>  <!-- :first 选中这个 -->
  <li>项目2</li>  <!-- :eq(1) 选中这个 -->
  <li>项目3</li>  <!-- :last 选中这个 -->
</ul>
```

```javascript
// 高亮第一个和最后一个
$("li:first").addClass("first-item");
$("li:last").addClass("last-item");

// 选择第二个（索引为1）
$("li:eq(1)").css("background", "yellow");
```

### 2.2 奇偶选择器 - 表格必备


**🔸 核心语法**
```javascript
:odd     // 奇数行（索引1,3,5...）
:even    // 偶数行（索引0,2,4...）
```

**💡 表格斑马纹效果**
```html
<table>
  <tr><td>第1行</td></tr>  <!-- :even 白色 -->
  <tr><td>第2行</td></tr>  <!-- :odd 灰色 -->
  <tr><td>第3行</td></tr>  <!-- :even 白色 -->
</table>
```

```javascript
// 经典斑马纹表格
$("tr:even").css("background", "#f9f9f9");
$("tr:odd").css("background", "#ffffff");
```

**⚠️ 重要提醒**：
- jQuery的`:odd`和`:even`是基于**索引**（从0开始）
- 所以`:even`对应第1、3、5行，`:odd`对应第2、4、6行

---

## 3. 👁️ 可见性选择器实战


### 3.1 显示隐藏状态


**🔸 基本概念**
```javascript
:visible   // 可见元素
:hidden    // 隐藏元素
```

**💡 什么算隐藏？**
```css
/* 这些情况算隐藏 */
display: none;
visibility: hidden;
width: 0; height: 0;
```

### 3.2 实战应用场景


**🔸 显示隐藏的表单项**
```html
<div class="form-group">
  <input type="text" class="required">
</div>
<div class="form-group" style="display:none">
  <input type="email" class="optional">
</div>
```

```javascript
// 只验证可见的必填项
$("input.required:visible").each(function() {
  if ($(this).val() === "") {
    alert("请填写必填项");
  }
});
```

**🔸 动态内容处理**
```javascript
// 隐藏所有错误提示，然后显示特定的
$(".error-msg:visible").hide();
$("#username-error").show();
```

---

## 4. 🎯 选择器组合使用


### 4.1 多重过滤组合


**💡 实用组合技巧**
```javascript
// 选择第一个可见的列表项
$("li:visible:first").addClass("highlight");

// 选择偶数行的链接
$("tr:even a").css("color", "blue");

// 选择表单中可见的必填输入框
$("input[required]:visible").addClass("required-field");
```

### 4.2 性能优化小贴士


**🔸 选择器性能对比**
```javascript
// ❌ 性能较差
$(".container").find("div").filter(":visible");

// ✅ 性能更好
$(".container div:visible");

// ✅ 最优写法（如果有ID）
$("#container div:visible");
```

**⚡ 优化原则**：
- 优先使用ID选择器
- 避免过于复杂的选择器嵌套
- 缓存重复使用的选择器结果

---

## 5. 📋 核心要点总结


### 5.1 必须掌握的选择器


| 选择器 | **语法** | **作用** | **使用频率** |
|--------|---------|---------|-------------|
| 后代选择器 | `parent child` | 选择所有后代元素 | ⭐⭐⭐⭐⭐ |
| 子选择器 | `parent > child` | 只选择直接子元素 | ⭐⭐⭐⭐ |
| 相邻兄弟 | `prev + next` | 选择紧邻的下一个 | ⭐⭐⭐ |
| `:first/:last` | `:first` `:last` | 第一个/最后一个 | ⭐⭐⭐⭐ |
| `:eq()` | `:eq(index)` | 指定索引的元素 | ⭐⭐⭐ |
| `:odd/:even` | `:odd` `:even` | 奇偶行选择 | ⭐⭐⭐⭐ |
| `:visible/:hidden` | `:visible` `:hidden` | 可见性状态 | ⭐⭐⭐ |

### 5.2 实际工作中的应用


**🔸 最常用的5个场景**：
```javascript
// 1. 导航菜单操作
$(".nav > li").hover(function() {
  $(this).find("ul").slideDown();
});

// 2. 表格斑马纹
$("tbody tr:even").addClass("even-row");

// 3. 表单验证
$("input:visible[required]").blur(function() {
  // 验证逻辑
});

// 4. 列表首尾特殊样式
$(".list-item:first").addClass("first");
$(".list-item:last").addClass("last");

// 5. 动态内容显示
$(".content:hidden").fadeIn();
```

### 5.3 选择器使用技巧


**🔹 记忆口诀**：
```
空格后代全选中，大于号只选儿子
加号选择紧邻弟，波浪选择后面兄
first last 选首尾，eq括号选索引
odd even 做斑马，visible hidden 看显隐
```

**🔹 常见误区**：
- **后代vs子元素**：空格选所有层级，`>`只选一层
- **奇偶索引**：`:odd`是索引奇数（第2、4、6行）
- **可见性判断**：`display:none`和`visibility:hidden`都算隐藏

### 5.4 实用价值


- **提高开发效率**：精准选择元素，减少代码量
- **增强用户体验**：轻松实现交互效果
- **简化DOM操作**：复杂选择器一行搞定
- **跨浏览器兼容**：jQuery处理了兼容性问题

**核心记忆**：
- 层级选择器解决**父子关系**定位问题
- 过滤选择器解决**批量筛选**操作问题  
- 组合使用让选择更**精准高效**
- 工作中80%的选择需求都能覆盖