---
title: 1ã€æ€§èƒ½åŸºå‡†æµ‹è¯•
---
## ğŸ“š ç›®å½•

1. [æ€§èƒ½åŸºå‡†æµ‹è¯•æ¦‚è¿°](#1-æ€§èƒ½åŸºå‡†æµ‹è¯•æ¦‚è¿°)
2. [å®˜æ–¹æµ‹è¯•å·¥å…·è¯¦è§£](#2-å®˜æ–¹æµ‹è¯•å·¥å…·è¯¦è§£)
3. [ç¬¬ä¸‰æ–¹æµ‹è¯•å·¥å…·](#3-ç¬¬ä¸‰æ–¹æµ‹è¯•å·¥å…·)
4. [æµ‹è¯•åœºæ™¯è®¾è®¡](#4-æµ‹è¯•åœºæ™¯è®¾è®¡)
5. [æ€§èƒ½æŒ‡æ ‡åˆ†æ](#5-æ€§èƒ½æŒ‡æ ‡åˆ†æ)
6. [ç“¶é¢ˆè¯†åˆ«ä¸ä¼˜åŒ–](#6-ç“¶é¢ˆè¯†åˆ«ä¸ä¼˜åŒ–)
7. [æ€§èƒ½åŸºçº¿å»ºç«‹](#7-æ€§èƒ½åŸºçº¿å»ºç«‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ€§èƒ½åŸºå‡†æµ‹è¯•æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯æ€§èƒ½åŸºå‡†æµ‹è¯•


**ğŸ”¸ ç®€å•ç†è§£**
æ€§èƒ½åŸºå‡†æµ‹è¯•å°±åƒç»™ä½ çš„æ±½è½¦åšä½“æ£€ï¼Œçœ‹çœ‹å®ƒåœ¨ä¸åŒè·¯å†µä¸‹èƒ½è·‘å¤šå¿«ã€æ²¹è€—å¦‚ä½•ã€‚å¯¹äºKafkaæ¥è¯´ï¼Œæˆ‘ä»¬è¦æµ‹è¯•å®ƒåœ¨ä¸åŒè´Ÿè½½ä¸‹èƒ½å¤„ç†å¤šå°‘æ¶ˆæ¯ï¼Œå“åº”æ—¶é—´æœ‰å¤šå¿«ã€‚

**ğŸ”¸ æ ¸å¿ƒç›®çš„**
```
ä¸ºä»€ä¹ˆè¦åšæ€§èƒ½æµ‹è¯•ï¼Ÿ

ğŸ¯ äº†è§£ç³»ç»Ÿèƒ½åŠ›æé™
â€¢ æœ€å¤§èƒ½æ‰¿å—å¤šå°‘å¹¶å‘
â€¢ æ¯ç§’èƒ½å¤„ç†å¤šå°‘æ¶ˆæ¯
â€¢ ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°ç“¶é¢ˆ

ğŸ¯ åˆ¶å®šå®¹é‡è§„åˆ’
â€¢ éœ€è¦å¤šå°‘å°æœåŠ¡å™¨
â€¢ å¦‚ä½•åˆ†é…åˆ†åŒºæ•°é‡
â€¢ ä½•æ—¶éœ€è¦æ‰©å®¹

ğŸ¯ ä¼˜åŒ–é…ç½®å‚æ•°
â€¢ å“ªäº›å‚æ•°å½±å“æ€§èƒ½
â€¢ å¦‚ä½•è°ƒä¼˜è·å¾—æœ€ä½³æ•ˆæœ
â€¢ ä¸åŒåœºæ™¯çš„æœ€ä¼˜é…ç½®
```

### 1.2 æµ‹è¯•çš„é‡è¦æ€§


**ğŸ’¡ å®é™…ä»·å€¼ä½“ç°**
```
ç”Ÿäº§ç¯å¢ƒé£é™©æ§åˆ¶ï¼š
â€¢ é¿å…ä¸Šçº¿åæ€§èƒ½ä¸è¶³
â€¢ é¢„çŸ¥ç³»ç»Ÿæ‰¿è½½èƒ½åŠ›
â€¢ åˆ¶å®šåº”æ€¥é¢„æ¡ˆ

æˆæœ¬æ•ˆç›Šä¼˜åŒ–ï¼š
â€¢ åˆç†é…ç½®ç¡¬ä»¶èµ„æº
â€¢ é¿å…è¿‡åº¦æˆ–ä¸è¶³é…ç½®
â€¢ æé«˜èµ„æºåˆ©ç”¨ç‡

ä¸šåŠ¡ä¿éšœï¼š
â€¢ ç¡®ä¿ç”¨æˆ·ä½“éªŒ
â€¢ ä¿è¯ç³»ç»Ÿç¨³å®šæ€§
â€¢ æ”¯æ’‘ä¸šåŠ¡å¢é•¿
```

### 1.3 æµ‹è¯•ç»´åº¦æ¦‚è§ˆ


```
ååé‡æµ‹è¯•ï¼š
â”œâ”€â”€ ç”Ÿäº§è€…ååé‡ â†’ æ¯ç§’èƒ½å‘é€å¤šå°‘æ¶ˆæ¯
â”œâ”€â”€ æ¶ˆè´¹è€…ååé‡ â†’ æ¯ç§’èƒ½æ¶ˆè´¹å¤šå°‘æ¶ˆæ¯
â””â”€â”€ é›†ç¾¤æ€»ååé‡ â†’ æ•´ä¸ªé›†ç¾¤çš„å¤„ç†èƒ½åŠ›

å»¶è¿Ÿæµ‹è¯•ï¼š
â”œâ”€â”€ ç«¯åˆ°ç«¯å»¶è¿Ÿ â†’ æ¶ˆæ¯ä»å‘é€åˆ°æ¶ˆè´¹çš„æ€»æ—¶é—´
â”œâ”€â”€ ç”Ÿäº§å»¶è¿Ÿ â†’ æ¶ˆæ¯å‘é€ç¡®è®¤çš„æ—¶é—´
â””â”€â”€ æ¶ˆè´¹å»¶è¿Ÿ â†’ æ¶ˆæ¯è¢«æ¶ˆè´¹å¤„ç†çš„æ—¶é—´

ç¨³å®šæ€§æµ‹è¯•ï¼š
â”œâ”€â”€ é•¿æ—¶é—´è¿è¡Œ â†’ æŒç»­è¿è¡Œæ˜¯å¦ç¨³å®š
â”œâ”€â”€ å¼‚å¸¸æ¢å¤ â†’ æ•…éšœåæ˜¯å¦èƒ½å¿«é€Ÿæ¢å¤
â””â”€â”€ èµ„æºä½¿ç”¨ â†’ CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ
```

---

## 2. ğŸ› ï¸ å®˜æ–¹æµ‹è¯•å·¥å…·è¯¦è§£


### 2.1 kafka-producer-perf-test ç”Ÿäº§è€…æ€§èƒ½æµ‹è¯•


**ğŸ”¸ å·¥å…·ç®€ä»‹**
è¿™æ˜¯Kafkaå®˜æ–¹æä¾›çš„ç”Ÿäº§è€…æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå°±åƒä¸€ä¸ªä¸“é—¨çš„"æ¶ˆæ¯å‘å°„å™¨"ï¼Œå¯ä»¥æ¨¡æ‹Ÿå¤§é‡å®¢æˆ·ç«¯å‘Kafkaå‘é€æ¶ˆæ¯ã€‚

**ğŸ”¸ åŸºæœ¬ä½¿ç”¨æ–¹æ³•**
```bash
# åŸºç¡€æµ‹è¯•å‘½ä»¤
kafka-producer-perf-test.sh \
  --topic test-topic \
  --num-records 100000 \
  --record-size 1024 \
  --throughput 10000 \
  --producer-props bootstrap.servers=localhost:9092
```

**ğŸ“Š å‚æ•°è¯¦è§£**

| å‚æ•° | å«ä¹‰ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|-------|------|
| `--topic` | æµ‹è¯•çš„ä¸»é¢˜åç§° | `test-topic` | æ¶ˆæ¯å‘é€çš„ç›®æ ‡ä¸»é¢˜ |
| `--num-records` | å‘é€æ¶ˆæ¯æ€»æ•° | `100000` | æ€»å…±è¦å‘é€å¤šå°‘æ¡æ¶ˆæ¯ |
| `--record-size` | å•æ¡æ¶ˆæ¯å¤§å° | `1024` | æ¯æ¡æ¶ˆæ¯çš„å­—èŠ‚æ•° |
| `--throughput` | ç›®æ ‡ååé‡ | `10000` | æ¯ç§’æœŸæœ›å‘é€çš„æ¶ˆæ¯æ•° |
| `--producer-props` | ç”Ÿäº§è€…é…ç½® | `bootstrap.servers=...` | è¿æ¥å‚æ•°ç­‰é…ç½® |

**ğŸ’¡ å®é™…æµ‹è¯•ç¤ºä¾‹**
```bash
# åœºæ™¯1ï¼šé«˜ååé‡æµ‹è¯•ï¼ˆå°æ¶ˆæ¯ï¼‰
kafka-producer-perf-test.sh \
  --topic perf-test \
  --num-records 1000000 \
  --record-size 100 \
  --throughput 50000 \
  --producer-props bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092

# åœºæ™¯2ï¼šå¤§æ¶ˆæ¯æµ‹è¯•
kafka-producer-perf-test.sh \
  --topic perf-test \
  --num-records 10000 \
  --record-size 10240 \
  --throughput 1000 \
  --producer-props bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092 \
                    acks=all \
                    compression.type=lz4

# åœºæ™¯3ï¼šæ— é™åˆ¶ååé‡æµ‹è¯•ï¼ˆçœ‹æé™èƒ½åŠ›ï¼‰
kafka-producer-perf-test.sh \
  --topic perf-test \
  --num-records 500000 \
  --record-size 1024 \
  --throughput -1 \
  --producer-props bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092
```

**ğŸ“ˆ ç»“æœè§£è¯»**
```bash
# å…¸å‹è¾“å‡ºç»“æœ
50000 records sent, 9999.600080 records/sec (9.54 MB/sec), 
1.50 ms avg latency, 45.00 ms max latency.
100000 records sent, 10000.000000 records/sec (9.54 MB/sec), 
1.45 ms avg latency, 67.00 ms max latency.

è§£è¯»è¯´æ˜ï¼š
â€¢ records/secï¼šæ¯ç§’å‘é€çš„æ¶ˆæ¯æ•°é‡
â€¢ MB/secï¼šæ¯ç§’å‘é€çš„æ•°æ®é‡
â€¢ avg latencyï¼šå¹³å‡å»¶è¿Ÿæ—¶é—´
â€¢ max latencyï¼šæœ€å¤§å»¶è¿Ÿæ—¶é—´
```

### 2.2 kafka-consumer-perf-test æ¶ˆè´¹è€…æ€§èƒ½æµ‹è¯•


**ğŸ”¸ å·¥å…·ç®€ä»‹**
è¿™æ˜¯æµ‹è¯•æ¶ˆè´¹è€…æ€§èƒ½çš„å·¥å…·ï¼Œæ¨¡æ‹Ÿå®¢æˆ·ç«¯ä»Kafkaæ¶ˆè´¹æ¶ˆæ¯çš„è¿‡ç¨‹ï¼Œå¯ä»¥æµ‹è¯•æ¶ˆè´¹é€Ÿåº¦å’Œå¤„ç†èƒ½åŠ›ã€‚

**ğŸ”¸ åŸºæœ¬ä½¿ç”¨æ–¹æ³•**
```bash
# åŸºç¡€æ¶ˆè´¹æµ‹è¯•
kafka-consumer-perf-test.sh \
  --topic test-topic \
  --messages 100000 \
  --threads 1 \
  --bootstrap-server localhost:9092
```

**ğŸ“Š å‚æ•°è¯¦è§£**

| å‚æ•° | å«ä¹‰ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|-------|------|
| `--topic` | æ¶ˆè´¹çš„ä¸»é¢˜ | `test-topic` | è¦æ¶ˆè´¹æ¶ˆæ¯çš„ä¸»é¢˜ |
| `--messages` | æ¶ˆè´¹æ¶ˆæ¯æ•°é‡ | `100000` | æ€»å…±è¦æ¶ˆè´¹å¤šå°‘æ¡æ¶ˆæ¯ |
| `--threads` | æ¶ˆè´¹çº¿ç¨‹æ•° | `4` | å¹¶å‘æ¶ˆè´¹çš„çº¿ç¨‹æ•°é‡ |
| `--bootstrap-server` | æœåŠ¡å™¨åœ°å€ | `localhost:9092` | Kafkaé›†ç¾¤åœ°å€ |

**ğŸ’¡ å®é™…æµ‹è¯•ç¤ºä¾‹**
```bash
# åœºæ™¯1ï¼šå•çº¿ç¨‹æ¶ˆè´¹æµ‹è¯•
kafka-consumer-perf-test.sh \
  --topic perf-test \
  --messages 1000000 \
  --threads 1 \
  --bootstrap-server kafka1:9092,kafka2:9092,kafka3:9092

# åœºæ™¯2ï¼šå¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹
kafka-consumer-perf-test.sh \
  --topic perf-test \
  --messages 1000000 \
  --threads 8 \
  --bootstrap-server kafka1:9092,kafka2:9092,kafka3:9092

# åœºæ™¯3ï¼šæŒ‡å®šæ¶ˆè´¹ç»„æµ‹è¯•
kafka-consumer-perf-test.sh \
  --topic perf-test \
  --messages 500000 \
  --threads 4 \
  --group-id perf-consumer-group \
  --bootstrap-server kafka1:9092,kafka2:9092,kafka3:9092
```

**ğŸ“ˆ ç»“æœè§£è¯»**
```bash
# å…¸å‹è¾“å‡ºç»“æœ
start.time, end.time, data.consumed.in.MB, MB.sec, data.consumed.in.nMsg, nMsg.sec
2024-01-15 10:00:00, 2024-01-15 10:01:30, 976.563, 10.851, 1000000, 11111.111

è§£è¯»è¯´æ˜ï¼š
â€¢ data.consumed.in.MBï¼šæ¶ˆè´¹çš„æ€»æ•°æ®é‡ï¼ˆMBï¼‰
â€¢ MB.secï¼šæ¯ç§’æ¶ˆè´¹çš„æ•°æ®é‡
â€¢ data.consumed.in.nMsgï¼šæ¶ˆè´¹çš„æ¶ˆæ¯æ€»æ•°
â€¢ nMsg.secï¼šæ¯ç§’æ¶ˆè´¹çš„æ¶ˆæ¯æ•°é‡
```

---

## 3. ğŸ”§ ç¬¬ä¸‰æ–¹æµ‹è¯•å·¥å…·


### 3.1 å¸¸ç”¨ç¬¬ä¸‰æ–¹å·¥å…·æ¦‚è§ˆ


**ğŸ“Š å·¥å…·å¯¹æ¯”**

| å·¥å…·åç§° | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ |
|---------|------|----------|------|
| **JMeter** | å›¾å½¢åŒ–ç•Œé¢ï¼Œæ˜“æ“ä½œ | åŠŸèƒ½æµ‹è¯•ã€å‹åŠ›æµ‹è¯• | ç›´è§‚ï¼Œæ’ä»¶ä¸°å¯Œ |
| **wrk** | è½»é‡çº§HTTPè´Ÿè½½æµ‹è¯• | REST APIæµ‹è¯• | ç®€å•é«˜æ•ˆ |
| **Artillery** | ç°ä»£åŒ–è´Ÿè½½æµ‹è¯• | å¤æ‚åœºæ™¯æµ‹è¯• | é…ç½®çµæ´» |
| **Gatling** | é«˜æ€§èƒ½è´Ÿè½½æµ‹è¯• | å¤§è§„æ¨¡æ€§èƒ½æµ‹è¯• | æ€§èƒ½ä¼˜ç§€ï¼ŒæŠ¥å‘Šè¯¦ç»† |

### 3.2 JMeter æµ‹è¯• Kafka


**ğŸ”¸ é…ç½®æ­¥éª¤**
```
æ­¥éª¤1ï¼šå®‰è£…Kafkaæ’ä»¶
â€¢ ä¸‹è½½pepperbox-kafka-load-generatoræ’ä»¶
â€¢ æ”¾å…¥JMeterçš„lib/extç›®å½•
â€¢ é‡å¯JMeter

æ­¥éª¤2ï¼šåˆ›å»ºæµ‹è¯•è®¡åˆ’
â€¢ æ·»åŠ çº¿ç¨‹ç»„
â€¢ é…ç½®Kafka Producer Sampler
â€¢ è®¾ç½®ç›‘å¬å™¨æŸ¥çœ‹ç»“æœ

æ­¥éª¤3ï¼šé…ç½®å‚æ•°
â€¢ BootstrapæœåŠ¡å™¨åœ°å€
â€¢ ä¸»é¢˜åç§°
â€¢ æ¶ˆæ¯å†…å®¹æ¨¡æ¿
â€¢ å¹¶å‘ç”¨æˆ·æ•°
```

**ğŸ’¡ JMeteré…ç½®ç¤ºä¾‹**
```
çº¿ç¨‹ç»„é…ç½®ï¼š
â€¢ çº¿ç¨‹æ•°ï¼š100ï¼ˆæ¨¡æ‹Ÿ100ä¸ªå¹¶å‘ç”Ÿäº§è€…ï¼‰
â€¢ å¾ªç¯æ¬¡æ•°ï¼š1000ï¼ˆæ¯ä¸ªçº¿ç¨‹å‘é€1000æ¡æ¶ˆæ¯ï¼‰
â€¢ å¯åŠ¨æ—¶é—´ï¼š60ç§’ï¼ˆ60ç§’å†…é€æ­¥å¯åŠ¨æ‰€æœ‰çº¿ç¨‹ï¼‰

Kafka Produceré…ç½®ï¼š
â€¢ BootstrapæœåŠ¡å™¨ï¼škafka1:9092,kafka2:9092
â€¢ ä¸»é¢˜ï¼šperformance-test
â€¢ é”®ï¼š${__Random(1,1000000)}
â€¢ æ¶ˆæ¯ï¼š{"id":"${__Random(1,1000000)}","timestamp":"${__time()}","data":"test message"}
```

### 3.3 è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬


**ğŸ”¸ Pythonæµ‹è¯•è„šæœ¬ç¤ºä¾‹**
```python
# ç®€å•çš„ç”Ÿäº§è€…æ€§èƒ½æµ‹è¯•è„šæœ¬
import time
import threading
from kafka import KafkaProducer
import json

class KafkaPerformanceTest:
    def __init__(self, servers, topic):
        self.servers = servers
        self.topic = topic
        self.producer = KafkaProducer(
            bootstrap_servers=servers,
            value_serializer=lambda v: json.dumps(v).encode('utf-8')
        )
        self.sent_count = 0
        self.start_time = None
    
    def send_messages(self, num_messages, thread_id):
        """å‘é€æ¶ˆæ¯çš„æ–¹æ³•"""
        for i in range(num_messages):
            message = {
                'thread_id': thread_id,
                'message_id': i,
                'timestamp': time.time(),
                'data': f'test message from thread {thread_id}'
            }
            self.producer.send(self.topic, value=message)
            self.sent_count += 1
    
    def run_test(self, num_threads, messages_per_thread):
        """è¿è¡Œæ€§èƒ½æµ‹è¯•"""
        self.start_time = time.time()
        threads = []
        
        # åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹
        for i in range(num_threads):
            thread = threading.Thread(
                target=self.send_messages, 
                args=(messages_per_thread, i)
            )
            threads.append(thread)
            thread.start()
        
        # ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ
        for thread in threads:
            thread.join()
        
        # ç¡®ä¿æ‰€æœ‰æ¶ˆæ¯éƒ½å‘é€å®Œæˆ
        self.producer.flush()
        end_time = time.time()
        
        # è®¡ç®—æ€§èƒ½æŒ‡æ ‡
        total_time = end_time - self.start_time
        total_messages = num_threads * messages_per_thread
        throughput = total_messages / total_time
        
        print(f"æµ‹è¯•å®Œæˆï¼")
        print(f"æ€»æ¶ˆæ¯æ•°: {total_messages}")
        print(f"æ€»è€—æ—¶: {total_time:.2f} ç§’")
        print(f"ååé‡: {throughput:.2f} æ¶ˆæ¯/ç§’")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    test = KafkaPerformanceTest(
        servers=['localhost:9092'],
        topic='performance-test'
    )
    test.run_test(num_threads=10, messages_per_thread=1000)
```

---

## 4. ğŸ“‹ æµ‹è¯•åœºæ™¯è®¾è®¡


### 4.1 æµ‹è¯•åœºæ™¯åˆ†ç±»


**ğŸ¯ åŸºç¡€æ€§èƒ½æµ‹è¯•åœºæ™¯**
```
ååé‡æé™æµ‹è¯•ï¼š
ç›®çš„ï¼šæ‰¾å‡ºç³»ç»Ÿæœ€å¤§å¤„ç†èƒ½åŠ›
æ–¹æ³•ï¼šé€æ­¥å¢åŠ è´Ÿè½½ç›´åˆ°æ€§èƒ½ä¸‹é™
æŒ‡æ ‡ï¼šæœ€å¤§TPSã€CPUä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡

å»¶è¿Ÿæ•æ„Ÿæµ‹è¯•ï¼š
ç›®çš„ï¼šæµ‹è¯•ä½å»¶è¿Ÿåœºæ™¯çš„è¡¨ç°
æ–¹æ³•ï¼šå°æ‰¹é‡ã€ä½å»¶è¿Ÿé…ç½®
æŒ‡æ ‡ï¼šP99å»¶è¿Ÿã€å¹³å‡å»¶è¿Ÿã€æŠ–åŠ¨

ç¨³å®šæ€§æµ‹è¯•ï¼š
ç›®çš„ï¼šé•¿æ—¶é—´è¿è¡Œçš„ç¨³å®šæ€§
æ–¹æ³•ï¼šä¸­ç­‰è´Ÿè½½é•¿æ—¶é—´è¿è¡Œ
æŒ‡æ ‡ï¼šé”™è¯¯ç‡ã€èµ„æºä½¿ç”¨è¶‹åŠ¿ã€æ€§èƒ½è¡°å‡
```

### 4.2 çœŸå®ä¸šåŠ¡åœºæ™¯æ¨¡æ‹Ÿ


**ğŸ“Š å¸¸è§ä¸šåŠ¡åœºæ™¯**

```
ç”µå•†è®¢å•åœºæ™¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¢å•ç³»ç»Ÿ â†’ Kafka â†’ åº“å­˜/æ”¯ä»˜/ç‰©æµ   â”‚
â”‚                                     â”‚
â”‚ ç‰¹ç‚¹ï¼š                               â”‚
â”‚ â€¢ æ¶ˆæ¯å¤§å°ï¼š1-5KB                    â”‚
â”‚ â€¢ å³°å€¼TPSï¼š10ä¸‡/ç§’                   â”‚
â”‚ â€¢ å»¶è¿Ÿè¦æ±‚ï¼š< 100ms                  â”‚
â”‚ â€¢ å¯é æ€§ï¼šä¸èƒ½ä¸¢å¤±                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ—¥å¿—æ”¶é›†åœºæ™¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨æ—¥å¿— â†’ Kafka â†’ åˆ†æç³»ç»Ÿ          â”‚
â”‚                                     â”‚
â”‚ ç‰¹ç‚¹ï¼š                               â”‚
â”‚ â€¢ æ¶ˆæ¯å¤§å°ï¼š0.5-2KB                  â”‚
â”‚ â€¢ æŒç»­TPSï¼š5ä¸‡/ç§’                    â”‚
â”‚ â€¢ å»¶è¿Ÿè¦æ±‚ï¼š< 1ç§’                    â”‚
â”‚ â€¢ å¯é æ€§ï¼šå…è®¸å°‘é‡ä¸¢å¤±                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®æ—¶åˆ†æåœºæ™¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¼ æ„Ÿå™¨æ•°æ® â†’ Kafka â†’ å®æ—¶è®¡ç®—        â”‚
â”‚                                     â”‚
â”‚ ç‰¹ç‚¹ï¼š                               â”‚
â”‚ â€¢ æ¶ˆæ¯å¤§å°ï¼š100-500B                 â”‚
â”‚ â€¢ å³°å€¼TPSï¼š50ä¸‡/ç§’                   â”‚
â”‚ â€¢ å»¶è¿Ÿè¦æ±‚ï¼š< 10ms                   â”‚
â”‚ â€¢ å¯é æ€§ï¼šæ—¶æ•ˆæ€§ä¼˜äºå¯é æ€§            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 æµ‹è¯•å‚æ•°è®¾è®¡çŸ©é˜µ


**ğŸ“ˆ å‚æ•°ç»„åˆè®¾è®¡**

| æµ‹è¯•åœºæ™¯ | æ¶ˆæ¯å¤§å° | å¹¶å‘æ•° | ç›®æ ‡TPS | æŒç»­æ—¶é—´ | é¢„æœŸç›®æ ‡ |
|---------|---------|-------|---------|----------|----------|
| **å°æ¶ˆæ¯é«˜å¹¶å‘** | 100B | 100 | 100K | 10åˆ†é’Ÿ | æµ‹è¯•æé™ååé‡ |
| **ä¸­ç­‰æ¶ˆæ¯å¸¸è§„** | 1KB | 50 | 50K | 30åˆ†é’Ÿ | æ¨¡æ‹Ÿå¸¸è§„ä¸šåŠ¡ |
| **å¤§æ¶ˆæ¯ä½å¹¶å‘** | 10KB | 10 | 5K | 60åˆ†é’Ÿ | æµ‹è¯•å¤§æ•°æ®å¤„ç† |
| **æ··åˆåœºæ™¯** | éšæœº100B-5KB | 80 | 80K | 120åˆ†é’Ÿ | æ¨¡æ‹ŸçœŸå®ç¯å¢ƒ |

---

## 5. ğŸ“Š æ€§èƒ½æŒ‡æ ‡åˆ†æ


### 5.1 æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡


**ğŸ”¸ ååé‡æŒ‡æ ‡**
```
ç”Ÿäº§è€…ååé‡ï¼ˆProducer Throughputï¼‰ï¼š
â€¢ å«ä¹‰ï¼šæ¯ç§’èƒ½å‘é€å¤šå°‘æ¡æ¶ˆæ¯
â€¢ è®¡ç®—ï¼šæ€»æ¶ˆæ¯æ•° Ã· æ€»æ—¶é—´
â€¢ å•ä½ï¼šrecords/sec æˆ– MB/sec
â€¢ å½±å“å› ç´ ï¼šæ‰¹æ¬¡å¤§å°ã€å‹ç¼©ã€ç½‘ç»œ

æ¶ˆè´¹è€…ååé‡ï¼ˆConsumer Throughputï¼‰ï¼š
â€¢ å«ä¹‰ï¼šæ¯ç§’èƒ½æ¶ˆè´¹å¤šå°‘æ¡æ¶ˆæ¯
â€¢ è®¡ç®—ï¼šæ€»æ¶ˆè´¹æ•° Ã· æ€»æ—¶é—´
â€¢ å•ä½ï¼šrecords/sec æˆ– MB/sec
â€¢ å½±å“å› ç´ ï¼šæ‰¹æ¬¡å¤§å°ã€å¹¶å‘æ•°ã€å¤„ç†é€»è¾‘
```

**ğŸ”¸ å»¶è¿ŸæŒ‡æ ‡**
```
ç«¯åˆ°ç«¯å»¶è¿Ÿï¼ˆEnd-to-End Latencyï¼‰ï¼š
â€¢ å«ä¹‰ï¼šæ¶ˆæ¯ä»å‘é€åˆ°è¢«æ¶ˆè´¹çš„æ€»æ—¶é—´
â€¢ ç»„æˆï¼šç”Ÿäº§å»¶è¿Ÿ + å­˜å‚¨å»¶è¿Ÿ + æ¶ˆè´¹å»¶è¿Ÿ
â€¢ å…³é”®æŒ‡æ ‡ï¼šP50ã€P95ã€P99å»¶è¿Ÿ

ç”Ÿäº§å»¶è¿Ÿï¼ˆProducer Latencyï¼‰ï¼š
â€¢ å«ä¹‰ï¼šæ¶ˆæ¯å‘é€ç¡®è®¤çš„æ—¶é—´
â€¢ å½±å“å› ç´ ï¼šacksé…ç½®ã€ç½‘ç»œçŠ¶å†µã€brokerè´Ÿè½½

æ¶ˆè´¹å»¶è¿Ÿï¼ˆConsumer Lagï¼‰ï¼š
â€¢ å«ä¹‰ï¼šæ¶ˆè´¹è€…è½åçš„æ¶ˆæ¯æ•°é‡
â€¢ è®¡ç®—ï¼šæœ€æ–°offset - å½“å‰æ¶ˆè´¹offset
â€¢ ç›‘æ§ï¼šå®æ—¶ç›‘æ§é˜²æ­¢ç§¯å‹
```

### 5.2 æŒ‡æ ‡é‡‡é›†æ–¹æ³•


**ğŸ“ˆ æ€§èƒ½æ•°æ®æ”¶é›†**
```bash
# 1. ä½¿ç”¨Kafkaè‡ªå¸¦çš„JMXæŒ‡æ ‡
# å¯åŠ¨æ—¶æ·»åŠ JMXå‚æ•°
export KAFKA_JMX_OPTS="-Dcom.sun.management.jmxremote \
-Dcom.sun.management.jmxremote.authenticate=false \
-Dcom.sun.management.jmxremote.ssl=false \
-Dcom.sun.management.jmxremote.port=9999"

# 2. æŸ¥çœ‹é‡è¦çš„JMXæŒ‡æ ‡
# ç”Ÿäº§è€…æŒ‡æ ‡
kafka.producer:type=producer-metrics,client-id=*
- record-send-rateï¼šå‘é€é€Ÿç‡
- record-send-totalï¼šæ€»å‘é€æ•°
- request-latency-avgï¼šå¹³å‡è¯·æ±‚å»¶è¿Ÿ

# æ¶ˆè´¹è€…æŒ‡æ ‡  
kafka.consumer:type=consumer-metrics,client-id=*
- records-consumed-rateï¼šæ¶ˆè´¹é€Ÿç‡
- records-lag-maxï¼šæœ€å¤§æ¶ˆè´¹å»¶è¿Ÿ

# 3. BrokeræŒ‡æ ‡
kafka.server:type=BrokerTopicMetrics,name=MessagesInPerSec
- æ¯ç§’æ¥æ”¶æ¶ˆæ¯æ•°

kafka.server:type=BrokerTopicMetrics,name=BytesInPerSec  
- æ¯ç§’æ¥æ”¶å­—èŠ‚æ•°
```

### 5.3 åŸºå‡†æ€§èƒ½å‚è€ƒ


**ğŸ“Š å…¸å‹ç¡¬ä»¶é…ç½®ä¸‹çš„æ€§èƒ½åŸºå‡†**

```
æ™®é€šé…ç½®ï¼ˆ4æ ¸8Gï¼ŒSATA SSDï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§è€…ååé‡ï¼š5ä¸‡ records/sec     â”‚
â”‚ æ¶ˆè´¹è€…ååé‡ï¼š8ä¸‡ records/sec     â”‚  
â”‚ ç«¯åˆ°ç«¯å»¶è¿Ÿï¼š< 10msï¼ˆP95ï¼‰         â”‚
â”‚ ç½‘ç»œå¸¦å®½ï¼š100MB/sec              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é«˜æ€§èƒ½é…ç½®ï¼ˆ16æ ¸32Gï¼ŒNVMe SSDï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§è€…ååé‡ï¼š20ä¸‡ records/sec    â”‚
â”‚ æ¶ˆè´¹è€…ååé‡ï¼š30ä¸‡ records/sec    â”‚
â”‚ ç«¯åˆ°ç«¯å»¶è¿Ÿï¼š< 5msï¼ˆP95ï¼‰          â”‚
â”‚ ç½‘ç»œå¸¦å®½ï¼š500MB/sec              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼ä¸šçº§é…ç½®ï¼ˆ32æ ¸64Gï¼Œé«˜é€Ÿå­˜å‚¨ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§è€…ååé‡ï¼š50ä¸‡ records/sec    â”‚
â”‚ æ¶ˆè´¹è€…ååé‡ï¼š80ä¸‡ records/sec    â”‚
â”‚ ç«¯åˆ°ç«¯å»¶è¿Ÿï¼š< 2msï¼ˆP95ï¼‰          â”‚
â”‚ ç½‘ç»œå¸¦å®½ï¼š1GB/sec                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ğŸ” ç“¶é¢ˆè¯†åˆ«ä¸ä¼˜åŒ–


### 6.1 å¸¸è§æ€§èƒ½ç“¶é¢ˆ


**ğŸš¨ ç³»ç»Ÿèµ„æºç“¶é¢ˆ**
```
CPUç“¶é¢ˆï¼š
ç°è±¡ï¼šCPUä½¿ç”¨ç‡æŒç»­é«˜äº80%
åŸå› ï¼š
â€¢ å‹ç¼©/è§£å‹ç¼©å¼€é”€å¤§
â€¢ åºåˆ—åŒ–/ååºåˆ—åŒ–è€—æ—¶
â€¢ ç½‘ç»œå¤„ç†è´Ÿè½½é‡
è§£å†³ï¼š
â€¢ é€‰æ‹©é«˜æ•ˆå‹ç¼©ç®—æ³•
â€¢ ä½¿ç”¨é«˜æ•ˆåºåˆ—åŒ–æ ¼å¼
â€¢ å¢åŠ CPUæ ¸æ•°

å†…å­˜ç“¶é¢ˆï¼š
ç°è±¡ï¼šé¢‘ç¹GCï¼Œå†…å­˜ä¸è¶³
åŸå› ï¼š
â€¢ ç¼“å­˜é…ç½®è¿‡å¤§
â€¢ æ‰¹æ¬¡å¤§å°è®¾ç½®ä¸å½“
â€¢ å†…å­˜æ³„æ¼
è§£å†³ï¼š
â€¢ è°ƒæ•´ç¼“å­˜å¤§å°
â€¢ ä¼˜åŒ–æ‰¹æ¬¡é…ç½®
â€¢ å¢åŠ å†…å­˜å®¹é‡

ç£ç›˜I/Oç“¶é¢ˆï¼š
ç°è±¡ï¼šç£ç›˜ä½¿ç”¨ç‡100%ï¼Œå†™å…¥å»¶è¿Ÿé«˜
åŸå› ï¼š
â€¢ ç£ç›˜IOPSä¸è¶³
â€¢ æ—¥å¿—æ®µè¿‡å°å¯¼è‡´é¢‘ç¹åˆ·ç›˜
â€¢ å¤šä¸ªåˆ†åŒºç«äº‰åŒä¸€ç£ç›˜
è§£å†³ï¼š
â€¢ ä½¿ç”¨SSDå­˜å‚¨
â€¢ è°ƒæ•´åˆ·ç›˜å‚æ•°
â€¢ åˆ†åŒºåˆ†å¸ƒä¼˜åŒ–
```

### 6.2 ç½‘ç»œç“¶é¢ˆè¯†åˆ«


**ğŸŒ ç½‘ç»œæ€§èƒ½ä¼˜åŒ–**
```
ç½‘ç»œå¸¦å®½ç“¶é¢ˆï¼š
æ£€æŸ¥æ–¹æ³•ï¼š
â€¢ ç›‘æ§ç½‘ç»œä½¿ç”¨ç‡
â€¢ æµ‹è¯•ç½‘ç»œå³°å€¼å¸¦å®½
â€¢ è§‚å¯Ÿç½‘ç»œä¸¢åŒ…ç‡

ä¼˜åŒ–ç­–ç•¥ï¼š
â€¢ å¯ç”¨æ¶ˆæ¯å‹ç¼©
â€¢ è°ƒæ•´æ‰¹æ¬¡å¤§å°
â€¢ ä½¿ç”¨é«˜é€Ÿç½‘ç»œ

ç½‘ç»œå»¶è¿Ÿé—®é¢˜ï¼š
æ£€æŸ¥æ–¹æ³•ï¼š
â€¢ pingæµ‹è¯•å»¶è¿Ÿ
â€¢ ç›‘æ§TCPè¿æ¥æ—¶é—´
â€¢ æ£€æŸ¥ç½‘ç»œè·³æ•°

ä¼˜åŒ–ç­–ç•¥ï¼š
â€¢ å‡å°‘ç½‘ç»œè·³æ•°
â€¢ ä½¿ç”¨ä¸“ç”¨ç½‘ç»œ
â€¢ è°ƒæ•´TCPå‚æ•°
```

### 6.3 é…ç½®ä¼˜åŒ–å»ºè®®


**âš™ï¸ å…³é”®é…ç½®è°ƒä¼˜**

| é…ç½®é¡¹ | è°ƒä¼˜ç›®æ ‡ | æ¨èå€¼ | è¯´æ˜ |
|-------|----------|-------|------|
| `batch.size` | æé«˜ååé‡ | 16384-65536 | æ‰¹æ¬¡è¶Šå¤§ååé‡è¶Šé«˜ï¼Œä½†å»¶è¿Ÿå¢åŠ  |
| `linger.ms` | å¹³è¡¡ååä¸å»¶è¿Ÿ | 5-100 | ç­‰å¾…æ—¶é—´ï¼Œå…è®¸æ‰¹æ¬¡ç§¯ç´¯æ›´å¤šæ¶ˆæ¯ |
| `compression.type` | å‡å°‘ç½‘ç»œä¼ è¾“ | lz4/snappy | å‹ç¼©å¯å‡å°‘ç½‘ç»œè´Ÿè½½ |
| `acks` | å¹³è¡¡æ€§èƒ½ä¸å¯é æ€§ | 1 | 0æ€§èƒ½æœ€å¥½ä½†å¯èƒ½ä¸¢æ•°æ®ï¼Œallæœ€å¯é ä½†æ€§èƒ½å·® |
| `buffer.memory` | é¿å…é˜»å¡ | 67108864 | ç”Ÿäº§è€…ç¼“å†²åŒºå¤§å° |

**ğŸ’¡ å®é™…è°ƒä¼˜ç¤ºä¾‹**
```bash
# é«˜ååé‡é…ç½®ç¤ºä¾‹
bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092
batch.size=65536
linger.ms=50
compression.type=lz4
acks=1
buffer.memory=134217728
max.in.flight.requests.per.connection=5

# ä½å»¶è¿Ÿé…ç½®ç¤ºä¾‹  
bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092
batch.size=1024
linger.ms=1
compression.type=none
acks=1
buffer.memory=33554432
max.in.flight.requests.per.connection=1
```

---

## 7. ğŸ“ æ€§èƒ½åŸºçº¿å»ºç«‹


### 7.1 åŸºçº¿æµ‹è¯•æµç¨‹


**ğŸ”¸ åŸºçº¿å»ºç«‹æ­¥éª¤**
```
ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡
â€¢ æ ‡å‡†åŒ–ç¡¬ä»¶é…ç½®
â€¢ ç»Ÿä¸€è½¯ä»¶ç‰ˆæœ¬
â€¢ æ¸…ç†æµ‹è¯•ç¯å¢ƒ
â€¢ ç¡®ä¿ç½‘ç»œç¨³å®š

ç¬¬äºŒæ­¥ï¼šåŸºç¡€æµ‹è¯•
â€¢ å•ç”Ÿäº§è€…æµ‹è¯•
â€¢ å•æ¶ˆè´¹è€…æµ‹è¯•  
â€¢ è®°å½•åŸºç¡€æ€§èƒ½æ•°æ®
â€¢ å»ºç«‹æ€§èƒ½æ¡£æ¡ˆ

ç¬¬ä¸‰æ­¥ï¼šåœºæ™¯æµ‹è¯•
â€¢ æ¨¡æ‹ŸçœŸå®ä¸šåŠ¡åœºæ™¯
â€¢ ä¸åŒè´Ÿè½½çº§åˆ«æµ‹è¯•
â€¢ å³°å€¼å®¹é‡æµ‹è¯•
â€¢ æ•…éšœæ¢å¤æµ‹è¯•

ç¬¬å››æ­¥ï¼šåŸºçº¿ç¡®å®š
â€¢ åˆ†ææµ‹è¯•æ•°æ®
â€¢ ç¡®å®šæ€§èƒ½åŸºå‡†å€¼
â€¢ å»ºç«‹ç›‘æ§é˜ˆå€¼
â€¢ åˆ¶å®šå‘Šè­¦ç­–ç•¥
```

### 7.2 åŸºçº¿æ•°æ®è®°å½•


**ğŸ“Š æ€§èƒ½åŸºçº¿æ¨¡æ¿**
```
ç¯å¢ƒä¿¡æ¯ï¼š
â€¢ Kafkaç‰ˆæœ¬ï¼š2.8.0
â€¢ ç¡¬ä»¶é…ç½®ï¼š16æ ¸32Gï¼ŒNVMe SSD
â€¢ ç½‘ç»œç¯å¢ƒï¼šåƒå…†å†…ç½‘
â€¢ JVMé…ç½®ï¼š-Xmx8g -Xms8g

åŸºçº¿æ€§èƒ½æ•°æ®ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æµ‹è¯•åœºæ™¯     â”‚ ååé‡      â”‚ P95å»¶è¿Ÿ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å°æ¶ˆæ¯é«˜å¹¶å‘  â”‚ 15ä¸‡/ç§’     â”‚ 8ms        â”‚
â”‚ ä¸­ç­‰æ¶ˆæ¯å¸¸è§„  â”‚ 8ä¸‡/ç§’      â”‚ 12ms       â”‚  
â”‚ å¤§æ¶ˆæ¯ä½å¹¶å‘  â”‚ 3ä¸‡/ç§’      â”‚ 25ms       â”‚
â”‚ æ··åˆåœºæ™¯     â”‚ 10ä¸‡/ç§’     â”‚ 15ms       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

èµ„æºä½¿ç”¨åŸºçº¿ï¼š
â€¢ CPUä½¿ç”¨ç‡ï¼š70%
â€¢ å†…å­˜ä½¿ç”¨ç‡ï¼š60%  
â€¢ ç£ç›˜I/Oï¼š40%
â€¢ ç½‘ç»œå¸¦å®½ï¼š30%
```

### 7.3 åŸºçº¿ç»´æŠ¤æ›´æ–°


**ğŸ”„ åŸºçº¿æ›´æ–°ç­–ç•¥**
```
å®šæœŸæ›´æ–°è§¦å‘æ¡ä»¶ï¼š
â€¢ ç¡¬ä»¶ç¯å¢ƒå˜æ›´
â€¢ Kafkaç‰ˆæœ¬å‡çº§
â€¢ ä¸šåŠ¡æ¨¡å¼å˜åŒ–
â€¢ æ€§èƒ½ä¼˜åŒ–å

æ›´æ–°æµç¨‹ï¼š
1. é‡æ–°æ‰§è¡ŒåŸºçº¿æµ‹è¯•
2. å¯¹æ¯”å†å²æ•°æ®å˜åŒ–
3. åˆ†ææ€§èƒ½å·®å¼‚åŸå› 
4. æ›´æ–°åŸºçº¿æ•°æ®
5. è°ƒæ•´ç›‘æ§é˜ˆå€¼

åŸºçº¿åº”ç”¨ï¼š
â€¢ å®¹é‡è§„åˆ’å‚è€ƒ
â€¢ æ€§èƒ½å›å½’æ£€æµ‹
â€¢ é—®é¢˜æ’æŸ¥åŸºå‡†
â€¢ ä¼˜åŒ–æ•ˆæœè¯„ä¼°
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ æ€§èƒ½æµ‹è¯•ç›®çš„ï¼šäº†è§£ç³»ç»Ÿèƒ½åŠ›æé™ï¼Œåˆ¶å®šå®¹é‡è§„åˆ’ï¼Œä¼˜åŒ–é…ç½®å‚æ•°
ğŸ”¸ å®˜æ–¹æµ‹è¯•å·¥å…·ï¼škafka-producer-perf-testå’Œkafka-consumer-perf-test
ğŸ”¸ æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ï¼šååé‡ã€å»¶è¿Ÿã€ç¨³å®šæ€§ã€èµ„æºä½¿ç”¨ç‡
ğŸ”¸ ç“¶é¢ˆè¯†åˆ«ï¼šCPUã€å†…å­˜ã€ç£ç›˜I/Oã€ç½‘ç»œç­‰ç³»ç»Ÿèµ„æºç“¶é¢ˆ
ğŸ”¸ æ€§èƒ½åŸºçº¿ï¼šæ ‡å‡†ç¯å¢ƒä¸‹çš„æ€§èƒ½åŸºå‡†æ•°æ®ï¼Œç”¨äºå¯¹æ¯”å’Œç›‘æ§
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ€§èƒ½æµ‹è¯•çš„æœ¬è´¨**
```
æ€§èƒ½æµ‹è¯•ä¸æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼š
â€¢ éœ€è¦æŒç»­è¿›è¡Œå’Œæ›´æ–°
â€¢ éšç€ä¸šåŠ¡å‘å±•ä¸æ–­è°ƒæ•´
â€¢ ä¸å®é™…ä¸šåŠ¡åœºæ™¯ç´§å¯†ç»“åˆ

æ€§èƒ½ä¼˜åŒ–æ˜¯å¹³è¡¡çš„è‰ºæœ¯ï¼š
â€¢ ååé‡ vs å»¶è¿Ÿ
â€¢ æ€§èƒ½ vs å¯é æ€§  
â€¢ èµ„æºä½¿ç”¨ vs æˆæœ¬
```

**ğŸ”¹ å·¥å…·é€‰æ‹©åŸåˆ™**
```
å®˜æ–¹å·¥å…·ä¼˜å…ˆï¼š
â€¢ kafka-producer-perf-testï¼šç®€å•ç›´æ¥
â€¢ kafka-consumer-perf-testï¼šæ ‡å‡†åŒ–æµ‹è¯•

ç¬¬ä¸‰æ–¹å·¥å…·è¡¥å……ï¼š
â€¢ JMeterï¼šå¤æ‚åœºæ™¯æ¨¡æ‹Ÿ
â€¢ è‡ªå®šä¹‰è„šæœ¬ï¼šç‰¹æ®Šä¸šåŠ¡é€»è¾‘

é€‰æ‹©ä¾æ®ï¼š
â€¢ æµ‹è¯•å¤æ‚åº¦
â€¢ å›¢é˜ŸæŠ€èƒ½
â€¢ ç»´æŠ¤æˆæœ¬
```

**ğŸ”¹ æŒ‡æ ‡è§£è¯»è¦ç‚¹**
```
å…³æ³¨æ ¸å¿ƒæŒ‡æ ‡ï¼š
â€¢ ååé‡ï¼šç³»ç»Ÿå¤„ç†èƒ½åŠ›
â€¢ P95/P99å»¶è¿Ÿï¼šç”¨æˆ·ä½“éªŒ
â€¢ èµ„æºä½¿ç”¨ç‡ï¼šç³»ç»Ÿå¥åº·åº¦

æŒ‡æ ‡å…³è”åˆ†æï¼š
â€¢ å•ä¸€æŒ‡æ ‡å¯èƒ½è¯¯å¯¼
â€¢ éœ€è¦ç»¼åˆåˆ†æåˆ¤æ–­
â€¢ ç»“åˆä¸šåŠ¡åœºæ™¯ç†è§£
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **å®¹é‡è§„åˆ’**ï¼šæ ¹æ®åŸºçº¿æ•°æ®è§„åˆ’ç¡¬ä»¶èµ„æº
- **æ€§èƒ½ç›‘æ§**ï¼šå»ºç«‹å‘Šè­¦é˜ˆå€¼å’Œç›‘æ§ä½“ç³»
- **é—®é¢˜æ’æŸ¥**ï¼šæ€§èƒ½é—®é¢˜çš„å¿«é€Ÿå®šä½å’Œè§£å†³
- **ä¼˜åŒ–éªŒè¯**ï¼šéªŒè¯ä¼˜åŒ–æªæ–½çš„å®é™…æ•ˆæœ

**ğŸ”§ è¿ç»´å®è·µè¦ç‚¹**
- **ç¯å¢ƒæ ‡å‡†åŒ–**ï¼šç¡®ä¿æµ‹è¯•ç¯å¢ƒçš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§
- **åœºæ™¯è®¾è®¡**ï¼šè´´è¿‘çœŸå®ä¸šåŠ¡çš„æµ‹è¯•åœºæ™¯è®¾è®¡
- **æ•°æ®åˆ†æ**ï¼šç§‘å­¦åˆ†ææµ‹è¯•æ•°æ®ï¼Œå‘ç°æ€§èƒ½ç“¶é¢ˆ
- **æŒç»­æ”¹è¿›**ï¼šåŸºäºæµ‹è¯•ç»“æœæŒç»­ä¼˜åŒ–ç³»ç»Ÿé…ç½®

**æ ¸å¿ƒè®°å¿†**ï¼š
- æ€§èƒ½æµ‹è¯•æ˜¯ç³»ç»Ÿè¿ç»´çš„åŸºç¡€å·¥ä½œï¼Œéœ€è¦æŒç»­è¿›è¡Œ
- å·¥å…·é€‰æ‹©è¦ç»“åˆå®é™…éœ€æ±‚ï¼Œå®˜æ–¹å·¥å…·ç®€å•æœ‰æ•ˆ
- æŒ‡æ ‡åˆ†æè¦ç»¼åˆè€ƒè™‘ï¼Œä¸èƒ½åªçœ‹å•ä¸€æ•°æ®
- åŸºçº¿å»ºç«‹æ˜¯æ€§èƒ½ç®¡ç†çš„å…³é”®ï¼Œè¦å®šæœŸæ›´æ–°ç»´æŠ¤