---
title: 15ã€SSLå®‰å…¨é…ç½®
---
## ğŸ“š ç›®å½•

1. [SSLå®‰å…¨é…ç½®åŸºç¡€æ¦‚å¿µ](#1-SSLå®‰å…¨é…ç½®åŸºç¡€æ¦‚å¿µ)
2. [å¯†é’¥åº“ä¸ä¿¡ä»»åº“é…ç½®](#2-å¯†é’¥åº“ä¸ä¿¡ä»»åº“é…ç½®)
3. [SSLåè®®ä¸è®¤è¯é…ç½®](#3-SSLåè®®ä¸è®¤è¯é…ç½®)
4. [å®‰å…¨å¢å¼ºé…ç½®](#4-å®‰å…¨å¢å¼ºé…ç½®)
5. [SSLé…ç½®å®è·µæŒ‡å—](#5-SSLé…ç½®å®è·µæŒ‡å—)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” SSLå®‰å…¨é…ç½®åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Kafka SSLé…ç½®


**ğŸ”¸ SSLçš„ä½œç”¨**
SSLï¼ˆSecure Sockets Layerï¼‰å°±åƒç»™ä½ çš„æ•°æ®ç©¿ä¸Šä¸€ä»¶é˜²æŠ¤æœï¼Œç¡®ä¿æ•°æ®åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šè¢«å·çœ‹æˆ–ç¯¡æ”¹ã€‚

```
æƒ³è±¡ä¸€ä¸‹é‚®å¯„é‡è¦æ–‡ä»¶ï¼š
æ™®é€šä¼ è¾“ = æ˜ä¿¡ç‰‡ â†’ ä»»ä½•äººéƒ½èƒ½çœ‹åˆ°å†…å®¹
SSLä¼ è¾“ = å¯†å°ä¿¡å° â†’ åªæœ‰æ”¶ä»¶äººèƒ½æ‰“å¼€æŸ¥çœ‹

Kafkaä¸­çš„SSLä½œç”¨ï¼š
â€¢ åŠ å¯†æ•°æ®ä¼ è¾“ï¼Œé˜²æ­¢æ•°æ®æ³„éœ²
â€¢ éªŒè¯é€šä¿¡åŒæ–¹èº«ä»½ï¼Œé˜²æ­¢ä¼ªè£…æ”»å‡»
â€¢ ç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œé˜²æ­¢ç¯¡æ”¹
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦SSLé…ç½®**
åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼ŒKafkaç»å¸¸ä¼ è¾“æ•æ„Ÿä¸šåŠ¡æ•°æ®ï¼Œå¦‚æœä¸åŠ å¯†ï¼š
- ç½‘ç»œç®¡ç†å‘˜å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ¶ˆæ¯å†…å®¹
- é»‘å®¢å¯èƒ½æ‹¦æˆªå¹¶ç¯¡æ”¹æ•°æ®
- æ¶æ„ç¨‹åºå¯èƒ½ä¼ªè£…æˆåˆæ³•å®¢æˆ·ç«¯

### 1.2 SSLé…ç½®çš„åŸºæœ¬ç»„æˆ


**ğŸ—ï¸ SSLé…ç½®æ¶æ„å›¾**
```
å®¢æˆ·ç«¯                    KafkaæœåŠ¡å™¨
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚å¯†é’¥åº“   â”‚ â†â”€â”€â”€â”€SSLâ”€â”€â†’   â”‚å¯†é’¥åº“   â”‚
  â”‚ä¿¡ä»»åº“   â”‚   åŠ å¯†é€šä¿¡    â”‚ä¿¡ä»»åº“   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“                         â†“
  éªŒè¯æœåŠ¡å™¨                éªŒè¯å®¢æˆ·ç«¯
```

**ğŸ“‹ æ ¸å¿ƒç»„ä»¶è¯´æ˜**
- **å¯†é’¥åº“ï¼ˆKeystoreï¼‰**ï¼šå­˜æ”¾è‡ªå·±çš„ç§é’¥å’Œè¯ä¹¦ï¼Œå°±åƒèº«ä»½è¯
- **ä¿¡ä»»åº“ï¼ˆTruststoreï¼‰**ï¼šå­˜æ”¾ä¿¡ä»»çš„è¯ä¹¦ï¼Œå°±åƒé€šè®¯å½•
- **è¯ä¹¦ï¼ˆCertificateï¼‰**ï¼šæ•°å­—èº«ä»½è¯æ˜ï¼Œè¯æ˜"æˆ‘æ˜¯è°"
- **ç§é’¥ï¼ˆPrivate Keyï¼‰**ï¼šç”¨äºè§£å¯†å’Œç­¾åçš„å¯†é’¥

---

## 2. ğŸ—ï¸ å¯†é’¥åº“ä¸ä¿¡ä»»åº“é…ç½®


### 2.1 å¯†é’¥åº“ä½ç½®é…ç½®


**ssl.keystore.location** - å¯†é’¥åº“æ–‡ä»¶ä½ç½®

```bash
# æœåŠ¡å™¨ç«¯é…ç½®
ssl.keystore.location=/opt/kafka/ssl/kafka-server.keystore.jks

# å®¢æˆ·ç«¯é…ç½®  
ssl.keystore.location=/home/user/kafka/client.keystore.jks
```

**ğŸ”¸ é…ç½®è¯´æ˜**
è¿™ä¸ªå‚æ•°æŒ‡å®šå¯†é’¥åº“æ–‡ä»¶å­˜æ”¾çš„å®Œæ•´è·¯å¾„ã€‚å¯†é’¥åº“å°±åƒä½ çš„ä¿é™©ç®±ï¼Œé‡Œé¢å­˜æ”¾ç€è¯æ˜èº«ä»½çš„é‡è¦æ–‡ä»¶ã€‚

> ğŸ’¡ **å®ç”¨å»ºè®®**  
> å»ºè®®å°†å¯†é’¥åº“æ–‡ä»¶æ”¾åœ¨å—ä¿æŠ¤çš„ç›®å½•ä¸­ï¼Œè®¾ç½®é€‚å½“çš„æ–‡ä»¶æƒé™ï¼ˆå¦‚600ï¼‰ï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·å¯ä»¥è®¿é—®ã€‚

### 2.2 å¯†é’¥åº“å¯†ç é…ç½®


**ssl.keystore.password** - å¯†é’¥åº“å¯†ç 

```bash
# å¯†é’¥åº“è®¿é—®å¯†ç 
ssl.keystore.password=your-keystore-password

# ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨å¯†ç æ–‡ä»¶
ssl.keystore.password=${file:/opt/kafka/ssl/keystore.password}
```

**ssl.key.password** - ç§é’¥å¯†ç 

```bash
# ç§é’¥è§£é”å¯†ç 
ssl.key.password=your-private-key-password

# ä½¿ç”¨ç¯å¢ƒå˜é‡
ssl.key.password=${env:KAFKA_SSL_KEY_PASSWORD}
```

**ğŸ”’ å¯†ç å®‰å…¨ç®¡ç†**
```
å¯†ç å®‰å…¨ç­‰çº§ï¼š
ğŸ”´ æ˜æ–‡é…ç½®     - ä¸æ¨èï¼Œå®‰å…¨é£é™©é«˜
ğŸŸ¡ ç¯å¢ƒå˜é‡     - ä¸€èˆ¬å®‰å…¨ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ  
ğŸŸ¢ å¯†ç æ–‡ä»¶     - æ¨èæ–¹å¼ï¼Œç”Ÿäº§ç¯å¢ƒé¦–é€‰
ğŸŸ¢ å¯†é’¥ç®¡ç†ç³»ç»Ÿ - æœ€ä½³å®è·µï¼Œä¼ä¸šçº§åº”ç”¨
```

### 2.3 ä¿¡ä»»åº“é…ç½®


**ssl.truststore.location** - ä¿¡ä»»åº“æ–‡ä»¶ä½ç½®

```bash
# ä¿¡ä»»åº“ä½ç½®é…ç½®
ssl.truststore.location=/opt/kafka/ssl/kafka-truststore.jks
```

**ssl.truststore.password** - ä¿¡ä»»åº“å¯†ç 

```bash
# ä¿¡ä»»åº“è®¿é—®å¯†ç 
ssl.truststore.password=truststore-password
```

**ğŸ¤ ä¿¡ä»»åº“çš„ä½œç”¨æœºåˆ¶**
```
ä¿¡ä»»å…³ç³»å»ºç«‹è¿‡ç¨‹ï¼š
å®¢æˆ·ç«¯ â†’ æŸ¥çœ‹æœåŠ¡å™¨è¯ä¹¦ â†’ åœ¨ä¿¡ä»»åº“ä¸­éªŒè¯ â†’ å»ºç«‹è¿æ¥

æ¯”å¦‚ä½ çš„æ‰‹æœºï¼š
ç³»ç»Ÿå†…ç½®äº†å„å¤§CAæœºæ„çš„æ ¹è¯ä¹¦ = ä¿¡ä»»åº“
è®¿é—®HTTPSç½‘ç«™æ—¶è‡ªåŠ¨éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§
```

### 2.4 å¯†é’¥åº“å’Œä¿¡ä»»åº“ç±»å‹


**ssl.keystore.type** - å¯†é’¥åº“ç±»å‹

```bash
# å¸¸è§çš„å¯†é’¥åº“ç±»å‹
ssl.keystore.type=JKS        # Javaå¯†é’¥åº“ï¼ˆé»˜è®¤ï¼‰
ssl.keystore.type=PKCS12     # è·¨å¹³å°æ ‡å‡†æ ¼å¼
ssl.keystore.type=PEM        # æ–‡æœ¬æ ¼å¼è¯ä¹¦
```

**ssl.truststore.type** - ä¿¡ä»»åº“ç±»å‹

```bash
# ä¿¡ä»»åº“ç±»å‹é…ç½®
ssl.truststore.type=JKS      # ä¸å¯†é’¥åº“ç±»å‹ä¿æŒä¸€è‡´
```

**ğŸ“‹ å¯†é’¥åº“ç±»å‹å¯¹æ¯”**

| ç±»å‹ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **é€‚ç”¨åœºæ™¯** |
|------|----------|----------|-------------|
| ğŸ”§ **JKS** | `JavaåŸç”Ÿæ”¯æŒï¼Œæˆç†Ÿç¨³å®š` | `ä»…Javaå¹³å°ä½¿ç”¨` | `çº¯Javaç¯å¢ƒ` |
| ğŸŒ **PKCS12** | `è·¨å¹³å°æ ‡å‡†ï¼Œå…¼å®¹æ€§å¥½` | `é…ç½®ç¨å¤æ‚` | `å¤šè¯­è¨€ç¯å¢ƒ` |
| ğŸ“„ **PEM** | `æ–‡æœ¬æ ¼å¼ï¼Œæ˜“äºç®¡ç†` | `éœ€è¦å¤šä¸ªæ–‡ä»¶` | `å®¹å™¨åŒ–éƒ¨ç½²` |

---

## 3. ğŸ›¡ï¸ SSLåè®®ä¸è®¤è¯é…ç½®


### 3.1 å®¢æˆ·ç«¯è®¤è¯é…ç½®


**ssl.client.auth** - å®¢æˆ·ç«¯è®¤è¯è¦æ±‚

```bash
# è®¤è¯çº§åˆ«é…ç½®
ssl.client.auth=none         # ä¸è¦æ±‚å®¢æˆ·ç«¯è®¤è¯
ssl.client.auth=requested    # è¯·æ±‚ä½†ä¸å¼ºåˆ¶å®¢æˆ·ç«¯è®¤è¯  
ssl.client.auth=required     # å¼ºåˆ¶è¦æ±‚å®¢æˆ·ç«¯è®¤è¯
```

**ğŸ” è®¤è¯çº§åˆ«è¯¦è§£**
```
è®¤è¯çº§åˆ«å®‰å…¨æ€§å¯¹æ¯”ï¼š

none (æ— è®¤è¯)
â”œâ”€ åªéªŒè¯æœåŠ¡å™¨èº«ä»½
â”œâ”€ é€‚åˆï¼šå…¬å¼€è®¿é—®çš„æœåŠ¡
â””â”€ é£é™©ï¼šæ— æ³•è¯†åˆ«å®¢æˆ·ç«¯èº«ä»½

requested (è¯·æ±‚è®¤è¯)  
â”œâ”€ æœåŠ¡å™¨è¯·æ±‚å®¢æˆ·ç«¯è¯ä¹¦ï¼Œä½†ä¸å¼ºåˆ¶
â”œâ”€ é€‚åˆï¼šå…¼å®¹æ€§è¦æ±‚é«˜çš„ç¯å¢ƒ
â””â”€ ç‰¹ç‚¹ï¼šå‘åå…¼å®¹ï¼Œå¯é€‰å®‰å…¨

required (å¼ºåˆ¶è®¤è¯)
â”œâ”€ åŒå‘è®¤è¯ï¼Œæœ€é«˜å®‰å…¨çº§åˆ«
â”œâ”€ é€‚åˆï¼šä¼ä¸šå†…éƒ¨é«˜å®‰å…¨è¦æ±‚
â””â”€ ç‰¹ç‚¹ï¼šæœ€å®‰å…¨ï¼Œä½†é…ç½®å¤æ‚
```

### 3.2 SSLåè®®ç‰ˆæœ¬é…ç½®


**ssl.enabled.protocols** - å¯ç”¨çš„SSLåè®®

```bash
# æ¨èçš„å®‰å…¨åè®®é…ç½®
ssl.enabled.protocols=TLSv1.2,TLSv1.3

# ç¦ç”¨ä¸å®‰å…¨çš„åè®®ï¼ˆä¸è¦è¿™æ ·é…ç½®ï¼‰
# ssl.enabled.protocols=SSLv3,TLSv1.0  # å®‰å…¨é£é™©ï¼
```

**ğŸ“Š SSLåè®®ç‰ˆæœ¬å®‰å…¨å¯¹æ¯”**
```
åè®®å®‰å…¨ç­‰çº§ï¼š
ğŸ”´ SSLv3, TLSv1.0    - å·²çŸ¥æ¼æ´ï¼Œç¦æ­¢ä½¿ç”¨
ğŸŸ¡ TLSv1.1           - è¾ƒæ—§ç‰ˆæœ¬ï¼Œä¸æ¨è
ğŸŸ¢ TLSv1.2           - å®‰å…¨ç¨³å®šï¼Œæ¨èä½¿ç”¨
ğŸŸ¢ TLSv1.3           - æœ€æ–°æ ‡å‡†ï¼Œæ€§èƒ½æœ€ä½³
```

### 3.3 ç«¯ç‚¹è¯†åˆ«ç®—æ³•


**ssl.endpoint.identification.algorithm** - ç«¯ç‚¹è¯†åˆ«ç®—æ³•

```bash
# å¯ç”¨ä¸»æœºåéªŒè¯ï¼ˆæ¨èï¼‰
ssl.endpoint.identification.algorithm=HTTPS

# ç¦ç”¨ä¸»æœºåéªŒè¯ï¼ˆä¸å®‰å…¨ï¼Œä»…æµ‹è¯•ç¯å¢ƒï¼‰
ssl.endpoint.identification.algorithm=
```

**ğŸ¯ ç«¯ç‚¹éªŒè¯çš„é‡è¦æ€§**
```
ä¸»æœºåéªŒè¯æµç¨‹ï¼š
å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ â†’ æ£€æŸ¥è¯ä¹¦ â†’ éªŒè¯ä¸»æœºååŒ¹é… â†’ å»ºç«‹è¿æ¥

é˜²æŠ¤æ•ˆæœï¼š
âœ… é˜²æ­¢ä¸­é—´äººæ”»å‡»
âœ… ç¡®ä¿è¿æ¥åˆ°æ­£ç¡®çš„æœåŠ¡å™¨  
âœ… éªŒè¯è¯ä¹¦ä¸ä¸»æœºåä¸€è‡´æ€§

å®‰å…¨å»ºè®®ï¼š
ç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨ = HTTPS
æµ‹è¯•ç¯å¢ƒå¯ä»¥æš‚æ—¶ç¦ç”¨ = ç©ºå€¼
```

---

## 4. ğŸ”’ å®‰å…¨å¢å¼ºé…ç½®


### 4.1 å¯†ç å¥—ä»¶é…ç½®


**ssl.cipher.suites** - å¯†ç å¥—ä»¶é…ç½®

```bash
# é«˜å®‰å…¨æ€§å¯†ç å¥—ä»¶ï¼ˆæ¨èï¼‰
ssl.cipher.suites=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_RSA_WITH_AES_256_GCM_SHA384

# ç¦ç”¨å¼±å¯†ç å¥—ä»¶
ssl.cipher.suites=!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA
```

**ğŸ” å¯†ç å¥—ä»¶ç»„æˆè§£æ**
```
ä»¥ TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 ä¸ºä¾‹ï¼š

TLS         â†’ åè®®ç‰ˆæœ¬
ECDHE       â†’ å¯†é’¥äº¤æ¢ç®—æ³•ï¼ˆæ¤­åœ†æ›²çº¿ï¼‰
RSA         â†’ è®¤è¯ç®—æ³•  
AES_256     â†’ å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆ256ä½å¯†é’¥ï¼‰
GCM         â†’ åŠ å¯†æ¨¡å¼
SHA384      â†’ æ‘˜è¦ç®—æ³•
```

### 4.2 å®‰å…¨éšæœºæ•°é…ç½®


**ssl.secure.random.implementation** - å®‰å…¨éšæœºæ•°å®ç°

```bash
# ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨
ssl.secure.random.implementation=

# æŒ‡å®šç‰¹å®šçš„éšæœºæ•°ç”Ÿæˆå™¨ï¼ˆé«˜å®‰å…¨è¦æ±‚ï¼‰
ssl.secure.random.implementation=NativePRNG
```

**ğŸ² éšæœºæ•°ç”Ÿæˆå™¨è¯´æ˜**
éšæœºæ•°åœ¨SSLä¸­çš„ä½œç”¨å°±åƒå¯†ç çš„"ç›"ï¼Œç¡®ä¿æ¯æ¬¡åŠ å¯†éƒ½æ˜¯å”¯ä¸€çš„ã€‚

```
å¸¸è§éšæœºæ•°ç”Ÿæˆå™¨ï¼š
- NativePRNG: ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„éšæœºæ•°æº
- SHA1PRNG: åŸºäºSHA1çš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨  
- é»˜è®¤: Javaè‡ªåŠ¨é€‰æ‹©æœ€ä½³å®ç°
```

---

## 5. âš™ï¸ SSLé…ç½®å®è·µæŒ‡å—


### 5.1 å®Œæ•´çš„æœåŠ¡å™¨SSLé…ç½®ç¤ºä¾‹


```bash
# ==================== KafkaæœåŠ¡å™¨SSLé…ç½® ====================

# ç›‘å¬å™¨é…ç½®
listeners=PLAINTEXT://:9092,SSL://:9093
advertised.listeners=PLAINTEXT://kafka1:9092,SSL://kafka1:9093

# SSLåŸºç¡€é…ç½®
security.inter.broker.protocol=SSL
ssl.client.auth=required

# å¯†é’¥åº“é…ç½®
ssl.keystore.location=/opt/kafka/ssl/kafka-server.keystore.jks
ssl.keystore.password=${file:/opt/kafka/ssl/keystore.password}
ssl.key.password=${file:/opt/kafka/ssl/key.password}

# ä¿¡ä»»åº“é…ç½®
ssl.truststore.location=/opt/kafka/ssl/kafka-truststore.jks  
ssl.truststore.password=${file:/opt/kafka/ssl/truststore.password}

# åè®®å’Œå®‰å…¨é…ç½®
ssl.enabled.protocols=TLSv1.2,TLSv1.3
ssl.keystore.type=JKS
ssl.truststore.type=JKS
ssl.endpoint.identification.algorithm=HTTPS

# é«˜çº§å®‰å…¨é…ç½®
ssl.cipher.suites=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
ssl.secure.random.implementation=NativePRNG
```

### 5.2 å®¢æˆ·ç«¯SSLé…ç½®ç¤ºä¾‹


```bash
# ==================== Kafkaå®¢æˆ·ç«¯SSLé…ç½® ====================

# è¿æ¥é…ç½®
bootstrap.servers=kafka1:9093,kafka2:9093,kafka3:9093
security.protocol=SSL

# å¯†é’¥åº“é…ç½®ï¼ˆåŒå‘è®¤è¯æ—¶éœ€è¦ï¼‰
ssl.keystore.location=/home/user/ssl/client.keystore.jks
ssl.keystore.password=client-keystore-password
ssl.key.password=client-key-password

# ä¿¡ä»»åº“é…ç½®  
ssl.truststore.location=/home/user/ssl/client.truststore.jks
ssl.truststore.password=client-truststore-password

# åè®®é…ç½®
ssl.enabled.protocols=TLSv1.2,TLSv1.3
ssl.keystore.type=JKS
ssl.truststore.type=JKS
ssl.endpoint.identification.algorithm=HTTPS
```

### 5.3 SSLé…ç½®éªŒè¯æ­¥éª¤


**ğŸ” é…ç½®éªŒè¯æ¸…å•**

> ğŸ“Œ **éªŒè¯æ­¥éª¤**  
> 1. **è¯ä¹¦æœ‰æ•ˆæ€§æ£€æŸ¥**ï¼šç¡®è®¤è¯ä¹¦æœªè¿‡æœŸï¼Œç­¾åæ­£ç¡®
> 2. **ç½‘ç»œè¿é€šæ€§æµ‹è¯•**ï¼šä½¿ç”¨opensslæµ‹è¯•SSLè¿æ¥
> 3. **Kafkaè¿æ¥æµ‹è¯•**ï¼šä½¿ç”¨kafka-consoleå·¥å…·éªŒè¯
> 4. **æ€§èƒ½åŸºå‡†æµ‹è¯•**ï¼šå¯¹æ¯”SSLå‰åçš„æ€§èƒ½å·®å¼‚

```bash
# SSLè¿æ¥æµ‹è¯•å‘½ä»¤
openssl s_client -connect kafka1:9093 -servername kafka1

# Kafka SSLç”Ÿäº§è€…æµ‹è¯•
kafka-console-producer.sh --broker-list kafka1:9093 \
  --topic test-ssl --producer.config ssl.properties

# Kafka SSLæ¶ˆè´¹è€…æµ‹è¯•  
kafka-console-consumer.sh --bootstrap-server kafka1:9093 \
  --topic test-ssl --consumer.config ssl.properties
```

### 5.4 å¸¸è§SSLé…ç½®é—®é¢˜æ’æŸ¥


**ğŸ› å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**

| é—®é¢˜ç°è±¡ | **å¯èƒ½åŸå› ** | **è§£å†³æ–¹æ¡ˆ** |
|---------|-------------|-------------|
| ğŸ”´ **è¿æ¥è¢«æ‹’ç»** | `é˜²ç«å¢™é˜»æŒ¡SSLç«¯å£` | `å¼€æ”¾9093ç«¯å£` |
| ğŸ”´ **è¯ä¹¦éªŒè¯å¤±è´¥** | `ä¸»æœºåä¸åŒ¹é…` | `æ£€æŸ¥è¯ä¹¦CNå­—æ®µ` |
| ğŸ”´ **æ¡æ‰‹å¤±è´¥** | `åè®®ç‰ˆæœ¬ä¸å…¼å®¹` | `ç»Ÿä¸€TLSç‰ˆæœ¬` |
| ğŸ”´ **è®¤è¯å¤±è´¥** | `å®¢æˆ·ç«¯è¯ä¹¦é—®é¢˜` | `æ£€æŸ¥å®¢æˆ·ç«¯å¯†é’¥åº“` |

```bash
# å¼€å¯SSLè°ƒè¯•æ—¥å¿—
export KAFKA_OPTS="-Djavax.net.debug=ssl:handshake:verbose"

# æŸ¥çœ‹SSLé…ç½®è¯¦æƒ…
kafka-configs.sh --bootstrap-server kafka1:9093 \
  --entity-type brokers --entity-name 1 --describe
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SSLé…ç½®æœ¬è´¨ï¼šä¸ºKafkaé€šä¿¡ç©¿ä¸Šå®‰å…¨é˜²æŠ¤æœ
ğŸ”¸ å¯†é’¥åº“ä½œç”¨ï¼šå­˜æ”¾è‡ªå·±çš„èº«ä»½è¯æ˜ï¼ˆç§é’¥+è¯ä¹¦ï¼‰
ğŸ”¸ ä¿¡ä»»åº“ä½œç”¨ï¼šå­˜æ”¾ä¿¡ä»»çš„å¯¹æ–¹èº«ä»½è¯æ˜
ğŸ”¸ å®¢æˆ·ç«¯è®¤è¯ï¼šnone < requested < required ä¸‰ä¸ªå®‰å…¨çº§åˆ«
ğŸ”¸ åè®®é€‰æ‹©ï¼šä¼˜å…ˆä½¿ç”¨TLSv1.2å’ŒTLSv1.3
ğŸ”¸ ä¸»æœºåéªŒè¯ï¼šé˜²æ­¢ä¸­é—´äººæ”»å‡»çš„é‡è¦æœºåˆ¶
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ SSLé…ç½®çš„å®‰å…¨æ€ç»´**
```
å®‰å…¨é…ç½®åŸåˆ™ï¼š
çºµæ·±é˜²æŠ¤ = SSLåè®® + è¯ä¹¦è®¤è¯ + ä¸»æœºåéªŒè¯ + å¼ºå¯†ç å¥—ä»¶
æœ€å°æƒé™ = åªå¼€æ”¾å¿…è¦çš„åè®®å’Œç®—æ³•
å®šæœŸæ›´æ–° = åŠæ—¶æ›´æ–°è¯ä¹¦å’Œåè®®ç‰ˆæœ¬
```

**ğŸ”¹ ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ**
```
è¯ä¹¦ç®¡ç†ï¼š
- ä½¿ç”¨CAç­¾å‘çš„æ­£å¼è¯ä¹¦
- è®¾ç½®åˆç†çš„è¯ä¹¦æœ‰æ•ˆæœŸ
- å»ºç«‹è¯ä¹¦æ›´æ–°æµç¨‹

å¯†ç ç®¡ç†ï¼š  
- ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥
- å¯†ç æ–‡ä»¶æƒé™æ§åˆ¶
- å®šæœŸè½®æ¢å¯†ç 

ç›‘æ§å‘Šè­¦ï¼š
- è¯ä¹¦åˆ°æœŸæé†’
- SSLæ¡æ‰‹å¤±è´¥å‘Šè­¦
- æ€§èƒ½æŒ‡æ ‡ç›‘æ§
```

### 6.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **é‡‘èç³»ç»Ÿ**ï¼šä¿æŠ¤äº¤æ˜“æ•°æ®ä¼ è¾“å®‰å…¨
- **ç”µå•†å¹³å°**ï¼šç¡®ä¿ç”¨æˆ·æ•°æ®éšç§ä¿æŠ¤  
- **IoTè®¾å¤‡**ï¼šè®¾å¤‡ä¸äº‘ç«¯çš„å®‰å…¨é€šä¿¡
- **å¾®æœåŠ¡æ¶æ„**ï¼šæœåŠ¡é—´è°ƒç”¨çš„å®‰å…¨ä¿éšœ

**ğŸ”§ è¿ç»´å®è·µè¦ç‚¹**
- **é…ç½®æ ‡å‡†åŒ–**ï¼šåˆ¶å®šç»Ÿä¸€çš„SSLé…ç½®æ¨¡æ¿
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šä½¿ç”¨è„šæœ¬è‡ªåŠ¨é…ç½®SSLè¯ä¹¦
- **æ•…éšœæ’æŸ¥**ï¼šæŒæ¡SSLé—®é¢˜çš„è¯Šæ–­æ–¹æ³•
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå¹³è¡¡å®‰å…¨æ€§ä¸æ€§èƒ½çš„å…³ç³»

**ğŸ’¡ å­¦ä¹ è¿›é˜¶å»ºè®®**
```
å­¦ä¹ è·¯å¾„ï¼š
åŸºç¡€é˜¶æ®µï¼šç†è§£SSLåŸºæœ¬æ¦‚å¿µå’Œé…ç½®æ–¹æ³•
è¿›é˜¶é˜¶æ®µï¼šæŒæ¡è¯ä¹¦ç®¡ç†å’Œæ•…éšœæ’æŸ¥  
é«˜çº§é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨åŠ å›ºç­–ç•¥

å®è·µå»ºè®®ï¼š
1. æ­å»ºæµ‹è¯•ç¯å¢ƒç»ƒä¹ SSLé…ç½®
2. æ¨¡æ‹Ÿå¸¸è§æ•…éšœè¿›è¡Œæ’æŸ¥è®­ç»ƒ  
3. å¯¹æ¯”ä¸åŒé…ç½®çš„æ€§èƒ½å½±å“
4. å­¦ä¹ è¯ä¹¦ç”Ÿæˆå’Œç®¡ç†å·¥å…·
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- SSLä¸ºKafkaç©¿é˜²æŠ¤æœï¼Œå¯†é’¥åº“æ˜¯èº«ä»½è¯ï¼Œä¿¡ä»»åº“æ˜¯é€šè®¯å½•
- ä¸‰çº§è®¤è¯none/requested/requiredï¼ŒTLSç‰ˆæœ¬é€‰æ‹©1.2/1.3
- ä¸»æœºåéªŒè¯é˜²ä¸­é—´äººï¼Œå¯†ç å¥—ä»¶è¦é€‰å¼ºåŠ å¯†
- ç”Ÿäº§ç¯å¢ƒé‡å®‰å…¨ï¼Œæµ‹è¯•ç¯å¢ƒé‡ä¾¿åˆ©ï¼Œç›‘æ§å‘Šè­¦ä¸å¯å°‘