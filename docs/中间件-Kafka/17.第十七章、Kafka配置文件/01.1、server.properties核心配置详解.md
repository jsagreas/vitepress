---
title: 1ã€server.propertiesæ ¸å¿ƒé…ç½®è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [Kafkaé…ç½®æ–‡ä»¶æ¦‚è§ˆ](#1-Kafkaé…ç½®æ–‡ä»¶æ¦‚è§ˆ)
2. [æ ¸å¿ƒèº«ä»½é…ç½®](#2-æ ¸å¿ƒèº«ä»½é…ç½®)
3. [ç½‘ç»œè¿æ¥é…ç½®](#3-ç½‘ç»œè¿æ¥é…ç½®)
4. [æ•°æ®å­˜å‚¨é…ç½®](#4-æ•°æ®å­˜å‚¨é…ç½®)
5. [æ€§èƒ½è°ƒä¼˜é…ç½®](#5-æ€§èƒ½è°ƒä¼˜é…ç½®)
6. [å‰¯æœ¬ä¸åˆ†åŒºé…ç½®](#6-å‰¯æœ¬ä¸åˆ†åŒºé…ç½®)
7. [å®é™…é…ç½®ç¤ºä¾‹](#7-å®é™…é…ç½®ç¤ºä¾‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Kafkaé…ç½®æ–‡ä»¶æ¦‚è§ˆ


### 1.1 ä»€ä¹ˆæ˜¯server.properties

**é€šä¿—ç†è§£**ï¼šserver.propertieså°±åƒæ˜¯KafkaæœåŠ¡å™¨çš„"èº«ä»½è¯"å’Œ"å·¥ä½œæ‰‹å†Œ"

```
æ‰“ä¸ªæ¯”æ–¹ï¼š
å°±åƒä½ å¼€ä¸€å®¶é¤å…éœ€è¦ï¼š
ğŸª é—¨ç‰Œå·ç  (broker.id)
ğŸ“ è”ç³»ç”µè¯ (listeners) 
ğŸ  ä»“åº“åœ°å€ (log.dirs)
ğŸ‘¥ å‘˜å·¥æ•°é‡ (threadsé…ç½®)
ğŸ“‹ è¥ä¸šè§„åˆ™ (å„ç§ä¸šåŠ¡é…ç½®)

Kafkaçš„server.propertieså°±æ˜¯è¿™æ ·ä¸€ä¸ª"å¼€åº—æ‰‹å†Œ"
```

### 1.2 é…ç½®æ–‡ä»¶çš„ä½œç”¨

**æ ¸å¿ƒä½œç”¨**ï¼šå‘Šè¯‰KafkaæœåŠ¡å™¨"æˆ‘æ˜¯è°"ã€"åœ¨å“ªé‡Œ"ã€"æ€ä¹ˆå·¥ä½œ"

```
é…ç½®æ–‡ä»¶å†³å®šäº†ï¼š
âœ… æœåŠ¡å™¨èº«ä»½æ ‡è¯†
âœ… ç½‘ç»œé€šä¿¡æ–¹å¼  
âœ… æ•°æ®å­˜å‚¨ä½ç½®
âœ… æ€§èƒ½è¡¨ç°æ°´å¹³
âœ… é›†ç¾¤åä½œæ–¹å¼
```

### 1.3 é…ç½®æ–‡ä»¶ä½ç½®

**é»˜è®¤è·¯å¾„**ï¼š`$KAFKA_HOME/config/server.properties`

```
æ–‡ä»¶ç»“æ„ç¤ºæ„ï¼š
kafka/
â”œâ”€â”€ bin/           â† å¯åŠ¨è„šæœ¬
â”œâ”€â”€ config/        â† é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ server.properties      â† æœåŠ¡å™¨ä¸»é…ç½®
â”‚   â”œâ”€â”€ zookeeper.properties   â† ZooKeeperé…ç½®
â”‚   â””â”€â”€ producer.properties    â† ç”Ÿäº§è€…é…ç½®
â””â”€â”€ logs/          â† æ—¥å¿—æ–‡ä»¶
```

---

## 2. ğŸ†” æ ¸å¿ƒèº«ä»½é…ç½®


### 2.1 broker.id - æœåŠ¡å™¨å”¯ä¸€æ ‡è¯†


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# æ¯ä¸ªKafkaæœåŠ¡å™¨çš„å”¯ä¸€ç¼–å·
broker.id=0
```

**ğŸ” é€šä¿—è§£é‡Š**
- **åƒä»€ä¹ˆ**ï¼šå°±åƒæ¯ä¸ªäººçš„èº«ä»½è¯å·ç 
- **ä½œç”¨**ï¼šåœ¨Kafkaé›†ç¾¤ä¸­åŒºåˆ†ä¸åŒçš„æœåŠ¡å™¨
- **é‡è¦æ€§**ï¼šç»å¯¹ä¸èƒ½é‡å¤ï¼Œå¦åˆ™ä¼šå†²çª

**ğŸ’¡ é…ç½®å»ºè®®**
```
å•æœºéƒ¨ç½²ï¼šbroker.id=0
é›†ç¾¤éƒ¨ç½²ï¼š
- æœåŠ¡å™¨1ï¼šbroker.id=0  
- æœåŠ¡å™¨2ï¼šbroker.id=1
- æœåŠ¡å™¨3ï¼šbroker.id=2

è§„å¾‹ï¼šä»0å¼€å§‹ï¼Œä¾æ¬¡é€’å¢
```

### 2.2 é›†ç¾¤èº«ä»½ç®¡ç†


**ğŸ¢ é›†ç¾¤æ ‡è¯†é…ç½®**
```properties
# é›†ç¾¤åç§°ï¼ˆå¯é€‰ï¼‰
cluster.id=my-kafka-cluster
```

**å®é™…åº”ç”¨åœºæ™¯**
```
å¼€å‘ç¯å¢ƒï¼šbroker.id=0,1,2
æµ‹è¯•ç¯å¢ƒï¼šbroker.id=10,11,12  
ç”Ÿäº§ç¯å¢ƒï¼šbroker.id=100,101,102

è¿™æ ·ä¸åŒç¯å¢ƒä¸ä¼šææ··
```

---

## 3. ğŸŒ ç½‘ç»œè¿æ¥é…ç½®


### 3.1 listeners - æœåŠ¡å™¨ç›‘å¬åœ°å€


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# KafkaæœåŠ¡å™¨ç›‘å¬çš„ç½‘ç»œåœ°å€
listeners=PLAINTEXT://localhost:9092
```

**ğŸ” é€šä¿—è§£é‡Š**
- **åƒä»€ä¹ˆ**ï¼šå°±åƒé¤å…çš„é—¨ç‰Œåœ°å€ï¼Œå®¢æˆ·çŸ¥é“åœ¨å“ªé‡Œæ‰¾åˆ°ä½ 
- **æ ¼å¼**ï¼š`åè®®://ä¸»æœº:ç«¯å£`
- **ä½œç”¨**ï¼šå‘Šè¯‰å®¢æˆ·ç«¯æ€ä¹ˆè¿æ¥åˆ°è¿™å°KafkaæœåŠ¡å™¨

**ğŸ’¡ å¸¸è§é…ç½®æ–¹å¼**

| éƒ¨ç½²åœºæ™¯ | **é…ç½®ç¤ºä¾‹** | **è¯´æ˜** |
|---------|-------------|---------|
| **æœ¬åœ°å¼€å‘** | `PLAINTEXT://localhost:9092` | åªèƒ½æœ¬æœºè®¿é—® |
| **å±€åŸŸç½‘éƒ¨ç½²** | `PLAINTEXT://192.168.1.100:9092` | å±€åŸŸç½‘å†…å¯è®¿é—® |
| **å…¬ç½‘éƒ¨ç½²** | `PLAINTEXT://0.0.0.0:9092` | æ‰€æœ‰ç½‘ç»œéƒ½å¯è®¿é—® |

### 3.2 advertised.listeners - å¯¹å¤–å…¬å¸ƒåœ°å€


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# å‘Šè¯‰å®¢æˆ·ç«¯å®é™…è¿æ¥åœ°å€
advertised.listeners=PLAINTEXT://192.168.1.100:9092
```

**ğŸ” æ·±å…¥ç†è§£**
```
é—®é¢˜åœºæ™¯ï¼š
ä½ çš„Kafkaè¿è¡Œåœ¨Dockerå®¹å™¨å†…ï¼Œå†…éƒ¨åœ°å€æ˜¯172.17.0.2
ä½†å®¢æˆ·ç«¯éœ€è¦é€šè¿‡å®¿ä¸»æœº192.168.1.100æ¥è®¿é—®

è§£å†³æ–¹æ¡ˆï¼š
listeners=PLAINTEXT://172.17.0.2:9092        â† å®¹å™¨å†…ç›‘å¬
advertised.listeners=PLAINTEXT://192.168.1.100:9092  â† å®¢æˆ·ç«¯ä½¿ç”¨
```

**ğŸš¨ å¸¸è§é—®é¢˜**
```
âŒ é”™è¯¯é…ç½®ï¼šåªé…ç½®äº†listenersï¼Œæ²¡é…ç½®advertised.listeners
ç»“æœï¼šå®¢æˆ·ç«¯è¿ä¸ä¸ŠæœåŠ¡å™¨

âœ… æ­£ç¡®é…ç½®ï¼šä¸¤ä¸ªéƒ½è¦é…ç½®ï¼Œåœ°å€è¦å¯¹åº”å®é™…ç½‘ç»œç¯å¢ƒ
```

### 3.3 ç½‘ç»œå®‰å…¨é…ç½®


**ğŸ”’ å®‰å…¨åè®®é€‰æ‹©**
```properties
# ä¸åŒå®‰å…¨çº§åˆ«çš„ç›‘å¬é…ç½®
listeners=PLAINTEXT://localhost:9092,SSL://localhost:9093

# å¯¹åº”çš„å®‰å…¨é…ç½®
ssl.keystore.location=/path/to/kafka.server.keystore.jks
ssl.keystore.password=test1234
ssl.key.password=test1234
```

---

## 4. ğŸ’¾ æ•°æ®å­˜å‚¨é…ç½®


### 4.1 log.dirs - æ•°æ®å­˜å‚¨ç›®å½•


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# Kafkaæ•°æ®å­˜å‚¨ç›®å½•
log.dirs=/var/kafka-logs
```

**ğŸ” é€šä¿—è§£é‡Š**
- **åƒä»€ä¹ˆ**ï¼šå°±åƒä»“åº“çš„ä½ç½®ï¼Œæ‰€æœ‰å•†å“ï¼ˆæ•°æ®ï¼‰éƒ½å­˜åœ¨è¿™é‡Œ
- **é‡è¦æ€§**ï¼šè¿™é‡Œå­˜å‚¨æ‰€æœ‰çš„æ¶ˆæ¯æ•°æ®
- **æ³¨æ„**ï¼šç›®å½•å¿…é¡»å­˜åœ¨ä¸”æœ‰è¯»å†™æƒé™

**ğŸ’¡ å¤šç›®å½•é…ç½®**
```properties
# å¯ä»¥é…ç½®å¤šä¸ªç›®å½•ï¼Œæé«˜æ€§èƒ½
log.dirs=/data1/kafka-logs,/data2/kafka-logs,/data3/kafka-logs
```

**ğŸ“Š å¤šç›®å½•çš„å¥½å¤„**
```
æ€§èƒ½æå‡åŸç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç£ç›˜1     â”‚  â”‚   ç£ç›˜2     â”‚  â”‚   ç£ç›˜3     â”‚
â”‚ Topic-A     â”‚  â”‚ Topic-B     â”‚  â”‚ Topic-C     â”‚
â”‚ åˆ†åŒº0,3,6   â”‚  â”‚ åˆ†åŒº1,4,7   â”‚  â”‚ åˆ†åŒº2,5,8   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è´Ÿè½½åˆ†æ•£åˆ°å¤šä¸ªç£ç›˜ï¼Œè¯»å†™æ›´å¿«
```

### 4.2 æ•°æ®ä¿ç•™é…ç½®


**ğŸ“Œ æ ¸å¿ƒä¿ç•™å‚æ•°**
```properties
# æ—¥å¿—ä¿ç•™æ—¶é—´ï¼ˆ7å¤©ï¼‰
log.retention.hours=168

# æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆ1GBï¼‰
log.segment.bytes=1073741824

# æ£€æŸ¥è¿‡æœŸæ—¥å¿—çš„é¢‘ç‡ï¼ˆ5åˆ†é’Ÿï¼‰
log.retention.check.interval.ms=300000
```

**ğŸ” å‚æ•°å«ä¹‰è§£é‡Š**

| å‚æ•° | **å«ä¹‰** | **å®é™…å½±å“** |
|------|---------|-------------|
| `log.retention.hours` | æ•°æ®ä¿ç•™å¤šé•¿æ—¶é—´ | è¶…è¿‡æ—¶é—´çš„æ•°æ®ä¼šè¢«åˆ é™¤ |
| `log.segment.bytes` | å•ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°ä¸Šé™ | è¶…è¿‡å¤§å°ä¼šåˆ›å»ºæ–°æ–‡ä»¶ |
| `log.retention.check.interval.ms` | å¤šä¹…æ£€æŸ¥ä¸€æ¬¡è¿‡æœŸæ•°æ® | å½±å“æ•°æ®æ¸…ç†çš„åŠæ—¶æ€§ |

---

## 5. âš¡ æ€§èƒ½è°ƒä¼˜é…ç½®


### 5.1 ç½‘ç»œçº¿ç¨‹é…ç½®


**ğŸ“Œ æ ¸å¿ƒçº¿ç¨‹å‚æ•°**
```properties
# å¤„ç†ç½‘ç»œè¯·æ±‚çš„çº¿ç¨‹æ•°
num.network.threads=3

# å¤„ç†ç£ç›˜I/Oçš„çº¿ç¨‹æ•°  
num.io.threads=8
```

**ğŸ” é€šä¿—ç†è§£**
```
é¤å…ç±»æ¯”ï¼š
num.network.threads = æœåŠ¡å‘˜æ•°é‡
- è´Ÿè´£æ¥å¾…å®¢æˆ·ã€è®°å½•è®¢å•
- å¤„ç†ç½‘ç»œé€šä¿¡

num.io.threads = å¨å¸ˆæ•°é‡  
- è´Ÿè´£åšèœï¼ˆè¯»å†™ç£ç›˜ï¼‰
- å¤„ç†å®é™…æ•°æ®æ“ä½œ

åˆç†é…ç½®ï¼šå®¢æˆ·å¤šå°±å¤šé…æœåŠ¡å‘˜ï¼Œè®¢å•å¤šå°±å¤šé…å¨å¸ˆ
```

**ğŸ’¡ é…ç½®å»ºè®®**
```properties
# æ ¹æ®CPUæ ¸æ•°é…ç½®
# ç½‘ç»œçº¿ç¨‹ï¼šCPUæ ¸æ•°çš„1-2å€
# I/Oçº¿ç¨‹ï¼šCPUæ ¸æ•°çš„2-3å€

# 4æ ¸CPUå»ºè®®é…ç½®ï¼š
num.network.threads=4
num.io.threads=8

# 8æ ¸CPUå»ºè®®é…ç½®ï¼š
num.network.threads=8  
num.io.threads=16
```

### 5.2 ç¼“å†²åŒºé…ç½®


**ğŸ“Œ ç¼“å†²åŒºå¤§å°è®¾ç½®**
```properties
# TCPå‘é€ç¼“å†²åŒºå¤§å°ï¼ˆ100KBï¼‰
socket.send.buffer.bytes=102400

# TCPæ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼ˆ100KBï¼‰
socket.receive.buffer.bytes=102400

# å•ä¸ªè¯·æ±‚æœ€å¤§å¤§å°ï¼ˆ100MBï¼‰
socket.request.max.bytes=104857600
```

**ğŸ” ç¼“å†²åŒºä½œç”¨åŸç†**
```
æ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼š
å®¢æˆ·ç«¯ â”€[å‘é€ç¼“å†²åŒº]â”€> ç½‘ç»œ â”€[æ¥æ”¶ç¼“å†²åŒº]â”€> KafkaæœåŠ¡å™¨

å‘é€ç¼“å†²åŒºï¼šæš‚å­˜å¾…å‘é€æ•°æ®ï¼Œé¿å…ç½‘ç»œæ‹¥å µ
æ¥æ”¶ç¼“å†²åŒºï¼šæš‚å­˜å·²æ¥æ”¶æ•°æ®ï¼Œæé«˜å¤„ç†æ•ˆç‡
```

### 5.3 å†…å­˜ç®¡ç†é…ç½®


**âš ï¸ JVMå†…å­˜è®¾ç½®**
```bash
# åœ¨å¯åŠ¨è„šæœ¬ä¸­è®¾ç½®JVMå‚æ•°
export KAFKA_HEAP_OPTS="-Xmx4G -Xms4G"

# æ¨èé…ç½®ï¼š
# å°å‹éƒ¨ç½²ï¼š-Xmx2G -Xms2G
# ä¸­å‹éƒ¨ç½²ï¼š-Xmx4G -Xms4G  
# å¤§å‹éƒ¨ç½²ï¼š-Xmx8G -Xms8G
```

---

## 6. ğŸ”„ å‰¯æœ¬ä¸åˆ†åŒºé…ç½®


### 6.1 num.partitions - é»˜è®¤åˆ†åŒºæ•°


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# æ–°å»ºTopicçš„é»˜è®¤åˆ†åŒºæ•°
num.partitions=1
```

**ğŸ” åˆ†åŒºæ¦‚å¿µç†è§£**
```
åˆ†åŒºå°±åƒå›¾ä¹¦é¦†çš„ä¹¦æ¶ï¼š

å•åˆ†åŒºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Topic-A     â”‚
â”‚   æ‰€æœ‰æ¶ˆæ¯      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æ‰€æœ‰æ¶ˆæ¯æ’é˜Ÿåœ¨ä¸€ä¸ªé˜Ÿåˆ—

å¤šåˆ†åŒºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Topic-A  â”‚ â”‚Topic-A  â”‚ â”‚Topic-A  â”‚
â”‚ åˆ†åŒº0   â”‚ â”‚ åˆ†åŒº1   â”‚ â”‚ åˆ†åŒº2   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æ¶ˆæ¯åˆ†æ•£åˆ°å¤šä¸ªé˜Ÿåˆ—ï¼Œå¹¶è¡Œå¤„ç†
```

**ğŸ’¡ åˆ†åŒºæ•°é‡å»ºè®®**
```properties
# æ ¹æ®ä¸šåŠ¡é‡é…ç½®ï¼š
# ä½æµé‡ï¼šnum.partitions=1
# ä¸­æµé‡ï¼šnum.partitions=3  
# é«˜æµé‡ï¼šnum.partitions=6æˆ–æ›´å¤š

# å»ºè®®ï¼šåˆ†åŒºæ•° = æ¶ˆè´¹è€…æ•°é‡
```

### 6.2 default.replication.factor - é»˜è®¤å‰¯æœ¬å› å­


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# æ–°å»ºTopicçš„é»˜è®¤å‰¯æœ¬æ•°
default.replication.factor=1
```

**ğŸ” å‰¯æœ¬æœºåˆ¶ç†è§£**
```
å‰¯æœ¬å°±åƒé‡è¦æ–‡ä»¶çš„å¤‡ä»½ï¼š

å‰¯æœ¬å› å­=1ï¼ˆæ— å¤‡ä»½ï¼‰ï¼š
æœåŠ¡å™¨1ï¼š[Topic-AåŸä»¶]
å¦‚æœæœåŠ¡å™¨1åäº†ï¼Œæ•°æ®å°±ä¸¢äº† âŒ

å‰¯æœ¬å› å­=3ï¼ˆ2ä¸ªå¤‡ä»½ï¼‰ï¼š
æœåŠ¡å™¨1ï¼š[Topic-AåŸä»¶]    â† Leader
æœåŠ¡å™¨2ï¼š[Topic-Aå‰¯æœ¬1]   â† Follower  
æœåŠ¡å™¨3ï¼š[Topic-Aå‰¯æœ¬2]   â† Follower
å³ä½¿æœåŠ¡å™¨1åäº†ï¼Œæ•°æ®è¿˜åœ¨ âœ…
```

### 6.3 min.insync.replicas - æœ€å°åŒæ­¥å‰¯æœ¬


**ğŸ“Œ é…ç½®è¯´æ˜**
```properties
# è‡³å°‘è¦æœ‰å‡ ä¸ªå‰¯æœ¬åŒæ­¥æˆåŠŸ
min.insync.replicas=1
```

**ğŸ” åŒæ­¥æœºåˆ¶è¯¦è§£**
```
æ•°æ®å†™å…¥æµç¨‹ï¼š
ç”Ÿäº§è€… â”€â”€æ¶ˆæ¯â”€â”€> Leaderå‰¯æœ¬ â”€â”€åŒæ­¥â”€â”€> Followerå‰¯æœ¬ä»¬

min.insync.replicas=2çš„å«ä¹‰ï¼š
è‡³å°‘è¦æœ‰2ä¸ªå‰¯æœ¬ï¼ˆåŒ…æ‹¬Leaderï¼‰ç¡®è®¤æ”¶åˆ°æ•°æ®ï¼Œ
å†™å…¥æ“ä½œæ‰ç®—æˆåŠŸ

å®‰å…¨çº§åˆ«ï¼š
min.insync.replicas=1ï¼šå¿«é€Ÿä½†ä¸å®‰å…¨
min.insync.replicas=2ï¼šå¹³è¡¡å®‰å…¨ä¸æ€§èƒ½  
min.insync.replicas=3ï¼šæœ€å®‰å…¨ä½†è¾ƒæ…¢
```

---

## 7. ğŸ› ï¸ å®é™…é…ç½®ç¤ºä¾‹


### 7.1 å•æœºå¼€å‘ç¯å¢ƒé…ç½®


```properties
############################ åŸºç¡€é…ç½® #############################

# æœåŠ¡å™¨å”¯ä¸€æ ‡è¯†
broker.id=0

# ç½‘ç»œç›‘å¬é…ç½®  
listeners=PLAINTEXT://localhost:9092
advertised.listeners=PLAINTEXT://localhost:9092

# æ•°æ®å­˜å‚¨ç›®å½•
log.dirs=/tmp/kafka-logs

############################ æ€§èƒ½é…ç½® #############################

# çº¿ç¨‹é…ç½®ï¼ˆé€‚åˆå•æœºï¼‰
num.network.threads=3
num.io.threads=8

# ç¼“å†²åŒºé…ç½®
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400  
socket.request.max.bytes=104857600

############################ ä¸šåŠ¡é…ç½® #############################

# é»˜è®¤åˆ†åŒºæ•°ï¼ˆå¼€å‘ç¯å¢ƒç”¨1ä¸ªå°±å¤Ÿï¼‰
num.partitions=1

# å‰¯æœ¬å› å­ï¼ˆå•æœºåªèƒ½æ˜¯1ï¼‰
default.replication.factor=1
min.insync.replicas=1

# æ•°æ®ä¿ç•™æ—¶é—´ï¼ˆå¼€å‘ç¯å¢ƒä¿ç•™24å°æ—¶å³å¯ï¼‰
log.retention.hours=24
```

### 7.2 ç”Ÿäº§ç¯å¢ƒä¸‰èŠ‚ç‚¹é›†ç¾¤é…ç½®


**æœåŠ¡å™¨1é…ç½®**
```properties
############################ èŠ‚ç‚¹1é…ç½® #############################

broker.id=0
listeners=PLAINTEXT://192.168.1.101:9092
advertised.listeners=PLAINTEXT://192.168.1.101:9092
log.dirs=/data1/kafka-logs,/data2/kafka-logs

# æ€§èƒ½è°ƒä¼˜ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
num.network.threads=8
num.io.threads=16
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400

# é«˜å¯ç”¨é…ç½®
num.partitions=3
default.replication.factor=3
min.insync.replicas=2

# æ•°æ®ä¿ç•™ï¼ˆ7å¤©ï¼‰
log.retention.hours=168
```

**æœåŠ¡å™¨2é…ç½®**
```properties
############################ èŠ‚ç‚¹2é…ç½® #############################

broker.id=1
listeners=PLAINTEXT://192.168.1.102:9092
advertised.listeners=PLAINTEXT://192.168.1.102:9092
log.dirs=/data1/kafka-logs,/data2/kafka-logs

# å…¶ä»–é…ç½®ä¸èŠ‚ç‚¹1ç›¸åŒ...
```

**æœåŠ¡å™¨3é…ç½®**
```properties
############################ èŠ‚ç‚¹3é…ç½® #############################

broker.id=2
listeners=PLAINTEXT://192.168.1.103:9092
advertised.listeners=PLAINTEXT://192.168.1.103:9092
log.dirs=/data1/kafka-logs,/data2/kafka-logs

# å…¶ä»–é…ç½®ä¸èŠ‚ç‚¹1ç›¸åŒ...
```

### 7.3 é…ç½®éªŒè¯æ–¹æ³•


**ğŸ” å¯åŠ¨åæ£€æŸ¥é…ç½®**
```bash
# 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨
jps | grep Kafka

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
netstat -an | grep 9092

# 3. æ£€æŸ¥æ—¥å¿—è¾“å‡º
tail -f $KAFKA_HOME/logs/server.log

# 4. æµ‹è¯•è¿æ¥
$KAFKA_HOME/bin/kafka-topics.sh --list --bootstrap-server localhost:9092
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒé…ç½®


```
ğŸ”¸ èº«ä»½é…ç½®ï¼šbroker.idï¼ˆé›†ç¾¤ä¸­å”¯ä¸€æ ‡è¯†ï¼‰
ğŸ”¸ ç½‘ç»œé…ç½®ï¼šlisteners + advertised.listenersï¼ˆç½‘ç»œé€šä¿¡ï¼‰
ğŸ”¸ å­˜å‚¨é…ç½®ï¼šlog.dirsï¼ˆæ•°æ®å­˜å‚¨ä½ç½®ï¼‰
ğŸ”¸ æ€§èƒ½é…ç½®ï¼šnum.network.threads + num.io.threadsï¼ˆå¤„ç†èƒ½åŠ›ï¼‰
ğŸ”¸ ä¸šåŠ¡é…ç½®ï¼šnum.partitions + replication.factorï¼ˆä¸šåŠ¡ç‰¹æ€§ï¼‰
```

### 8.2 é…ç½®ä¼˜åŒ–å»ºè®®


**ğŸ”¹ æ ¹æ®ç¯å¢ƒé€‰æ‹©é…ç½®**
```
å¼€å‘ç¯å¢ƒï¼š
âœ… å•æœºéƒ¨ç½²ï¼Œé…ç½®ç®€å•
âœ… å‰¯æœ¬å› å­=1ï¼Œåˆ†åŒºæ•°=1
âœ… æ•°æ®ä¿ç•™æ—¶é—´çŸ­

ç”Ÿäº§ç¯å¢ƒï¼š
âœ… é›†ç¾¤éƒ¨ç½²ï¼Œé«˜å¯ç”¨é…ç½®
âœ… å‰¯æœ¬å› å­â‰¥3ï¼Œåˆ†åŒºæ•°â‰¥3
âœ… æ•°æ®ä¿ç•™æ—¶é—´æ ¹æ®ä¸šåŠ¡éœ€æ±‚
```

**ğŸ”¹ æ€§èƒ½è°ƒä¼˜è¦ç‚¹**
```
ç¡¬ä»¶èµ„æºï¼š
- CPUæ ¸æ•°å½±å“çº¿ç¨‹é…ç½®
- å†…å­˜å¤§å°å½±å“JVMé…ç½®  
- ç£ç›˜æ€§èƒ½å½±å“I/Oé…ç½®

ç½‘ç»œç¯å¢ƒï¼š
- å¸¦å®½å½±å“ç¼“å†²åŒºé…ç½®
- å»¶è¿Ÿå½±å“è¶…æ—¶é…ç½®
```

### 8.3 å¸¸è§é…ç½®é”™è¯¯


| é”™è¯¯ç±»å‹ | **é—®é¢˜ç°è±¡** | **è§£å†³æ–¹æ¡ˆ** |
|---------|-------------|-------------|
| **broker.idé‡å¤** | é›†ç¾¤å¯åŠ¨å¤±è´¥ | ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹IDå”¯ä¸€ |
| **listenersé…ç½®é”™è¯¯** | å®¢æˆ·ç«¯è¿ä¸ä¸Š | æ£€æŸ¥IPå’Œç«¯å£é…ç½® |
| **log.dirsæƒé™é—®é¢˜** | å¯åŠ¨æŠ¥é”™ | ç¡®ä¿ç›®å½•å­˜åœ¨ä¸”æœ‰æƒé™ |
| **å†…å­˜é…ç½®è¿‡å°** | æ€§èƒ½å·®æˆ–OOM | é€‚å½“å¢åŠ JVMå†…å­˜ |

### 8.4 å­¦ä¹ å»ºè®®


**ğŸ“š å­¦ä¹ è·¯å¾„**
```
1. å…ˆç†è§£æ¯ä¸ªé…ç½®çš„å«ä¹‰å’Œä½œç”¨
2. åœ¨å¼€å‘ç¯å¢ƒå®é™…é…ç½®å’Œæµ‹è¯•
3. é€æ­¥å°è¯•ä¸åŒçš„é…ç½®ç»„åˆ
4. ç›‘æ§é…ç½®å˜æ›´å¯¹æ€§èƒ½çš„å½±å“
5. æ€»ç»“é€‚åˆè‡ªå·±ä¸šåŠ¡çš„æœ€ä½³é…ç½®
```

**ğŸ¯ å®è·µè¦ç‚¹**
- é…ç½®ä¿®æ”¹åè¦é‡å¯Kafkaæ‰èƒ½ç”Ÿæ•ˆ
- é‡è¦é…ç½®å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
- åšå¥½é…ç½®æ–‡ä»¶çš„å¤‡ä»½å’Œç‰ˆæœ¬ç®¡ç†
- å…³æ³¨Kafkaæ—¥å¿—ï¼ŒåŠæ—¶å‘ç°é…ç½®é—®é¢˜

**æ ¸å¿ƒè®°å¿†**ï¼š
- Kafkaé…ç½®å°±åƒå¼€åº—æ‰‹å†Œï¼Œå‘Šè¯‰æœåŠ¡å™¨æ€ä¹ˆå·¥ä½œ
- æ ¸å¿ƒä¸‰è¦ç´ ï¼šèº«ä»½(broker.id)ã€åœ°å€(listeners)ã€ä»“åº“(log.dirs)
- æ€§èƒ½é…ç½®è¦ç»“åˆå®é™…ç¡¬ä»¶èµ„æº
- é«˜å¯ç”¨éœ€è¦å¤šå‰¯æœ¬å’Œåˆç†çš„åˆ†åŒºç­–ç•¥