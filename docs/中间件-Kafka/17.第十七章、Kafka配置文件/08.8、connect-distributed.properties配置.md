---
title: 8ã€connect-distributed.propertiesé…ç½®
---
## ğŸ“š ç›®å½•


1. [Kafka ConnectåŸºæœ¬æ¦‚å¿µ](#1-kafka-connectåŸºæœ¬æ¦‚å¿µ)
2. [connect-distributed.propertiesæ ¸å¿ƒé…ç½®](#2-connect-distributedpropertiesæ ¸å¿ƒé…ç½®)
3. [é›†ç¾¤åœ°å€ä¸ç»„ç®¡ç†é…ç½®](#3-é›†ç¾¤åœ°å€ä¸ç»„ç®¡ç†é…ç½®)
4. [æ•°æ®è½¬æ¢å™¨é…ç½®è¯¦è§£](#4-æ•°æ®è½¬æ¢å™¨é…ç½®è¯¦è§£)
5. [å†…éƒ¨å­˜å‚¨Topicé…ç½®](#5-å†…éƒ¨å­˜å‚¨topicé…ç½®)
6. [å‰¯æœ¬ä¸å®¹é”™é…ç½®](#6-å‰¯æœ¬ä¸å®¹é”™é…ç½®)
7. [é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹](#7-é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ Kafka ConnectåŸºæœ¬æ¦‚å¿µ



### 1.1 ä»€ä¹ˆæ˜¯Kafka Connect



**ç®€å•ç†è§£**ï¼šKafka Connectå°±åƒæ˜¯ä¸€ä¸ª**æ•°æ®æ¬è¿å·¥**ï¼Œä¸“é—¨è´Ÿè´£åœ¨Kafkaå’Œå…¶ä»–ç³»ç»Ÿä¹‹é—´æ¬è¿æ•°æ®ã€‚

```
æ•°æ®æµå‘ç¤ºæ„ï¼š
æ•°æ®åº“ â†â†’ Kafka Connect â†â†’ Kafka â†â†’ Kafka Connect â†â†’ æ–‡ä»¶ç³»ç»Ÿ
              â†‘                                â†‘
           Sourceè¿æ¥å™¨                    Sinkè¿æ¥å™¨
           (æ•°æ®æ¥æº)                      (æ•°æ®ç›®æ ‡)
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- **æ•°æ®å¯¼å…¥**ï¼šä»å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç­‰ï¼‰å¯¼å…¥æ•°æ®åˆ°Kafka
- **æ•°æ®å¯¼å‡º**ï¼šä»Kafkaå¯¼å‡ºæ•°æ®åˆ°å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç­‰ï¼‰
- **å®æ—¶åŒæ­¥**ï¼šä¿æŒæ•°æ®åœ¨ä¸åŒç³»ç»Ÿé—´çš„å®æ—¶åŒæ­¥

### 1.2 åˆ†å¸ƒå¼æ¨¡å¼ vs ç‹¬ç«‹æ¨¡å¼



**ä¸¤ç§è¿è¡Œæ–¹å¼å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | **ç‹¬ç«‹æ¨¡å¼(Standalone)** | **åˆ†å¸ƒå¼æ¨¡å¼(Distributed)** |
|------|------------------------|---------------------------|
| ğŸ¯ **é€‚ç”¨åœºæ™¯** | `å¼€å‘æµ‹è¯•ã€å°è§„æ¨¡åº”ç”¨` | `ç”Ÿäº§ç¯å¢ƒã€å¤§è§„æ¨¡åº”ç”¨` |
| ğŸ”§ **é…ç½®å¤æ‚åº¦** | `ç®€å•ï¼Œå•æ–‡ä»¶é…ç½®` | `å¤æ‚ï¼Œéœ€è¦é›†ç¾¤é…ç½®` |
| ğŸš€ **æ‰©å±•æ€§** | `æ— æ³•æ‰©å±•` | `å¯æ°´å¹³æ‰©å±•` |
| ğŸ›¡ï¸ **å®¹é”™èƒ½åŠ›** | `å•ç‚¹æ•…éšœ` | `é«˜å¯ç”¨ï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»` |
| âš–ï¸ **è´Ÿè½½å‡è¡¡** | `ä¸æ”¯æŒ` | `è‡ªåŠ¨è´Ÿè½½å‡è¡¡` |

**åˆ†å¸ƒå¼æ¨¡å¼çš„ä¼˜åŠ¿**ï¼š
```
é›†ç¾¤æ¶æ„ç¤ºæ„ï¼š
     WorkerèŠ‚ç‚¹1 â†â†’ åè°ƒé€šä¿¡ â†â†’ WorkerèŠ‚ç‚¹2
          â†“                        â†“
     è¿æ¥å™¨ä»»åŠ¡A                è¿æ¥å™¨ä»»åŠ¡B
          â†“                        â†“
       Kafkaé›†ç¾¤              Kafkaé›†ç¾¤
```

---

## 2. âš™ï¸ connect-distributed.propertiesæ ¸å¿ƒé…ç½®



### 2.1 é…ç½®æ–‡ä»¶ä½œç”¨



**é…ç½®æ–‡ä»¶ä½ç½®**ï¼š`$KAFKA_HOME/config/connect-distributed.properties`

**ä¸»è¦åŠŸèƒ½**ï¼š
- ğŸ”— å®šä¹‰Kafkaé›†ç¾¤è¿æ¥ä¿¡æ¯
- ğŸ‘¥ é…ç½®Connecté›†ç¾¤çš„ç»„ç®¡ç†
- ğŸ”„ è®¾ç½®æ•°æ®è½¬æ¢å’Œåºåˆ—åŒ–æ–¹å¼
- ğŸ’¾ æŒ‡å®šå†…éƒ¨çŠ¶æ€å­˜å‚¨ä½ç½®

### 2.2 é…ç½®æ–‡ä»¶ç»“æ„æ¦‚è§ˆ



```
connect-distributed.propertiesé…ç½®ç»“æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      é›†ç¾¤è¿æ¥é…ç½®                â”‚ â† bootstrap.servers
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      ç»„ç®¡ç†é…ç½®                  â”‚ â† group.id
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      æ•°æ®è½¬æ¢é…ç½®                â”‚ â† key/value.converter
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      å†…éƒ¨å­˜å‚¨é…ç½®                â”‚ â† offset/config/status.storage
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      å‰¯æœ¬ä¸å®¹é”™é…ç½®              â”‚ â† replication.factor
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ğŸ”— é›†ç¾¤åœ°å€ä¸ç»„ç®¡ç†é…ç½®



### 3.1 bootstrap.servers - Kafkaé›†ç¾¤åœ°å€



**ä½œç”¨**ï¼šå‘Šè¯‰Connectå»å“ªé‡Œæ‰¾Kafkaé›†ç¾¤

**é…ç½®ç¤ºä¾‹**ï¼š
```properties
# å•ä¸ªKafkaèŠ‚ç‚¹

bootstrap.servers=localhost:9092

# å¤šä¸ªKafkaèŠ‚ç‚¹ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092

# ä½¿ç”¨IPåœ°å€

bootstrap.servers=192.168.1.10:9092,192.168.1.11:9092,192.168.1.12:9092
```

**ğŸ’¡ æœ€ä½³å®è·µ**ï¼š
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šè‡³å°‘é…ç½®3ä¸ªèŠ‚ç‚¹åœ°å€
- **å¼€å‘ç¯å¢ƒ**ï¼šå•ä¸ªèŠ‚ç‚¹å³å¯
- **ç½‘ç»œè€ƒè™‘**ï¼šä½¿ç”¨å†…ç½‘åœ°å€ï¼Œé¿å…å…¬ç½‘ä¼ è¾“

### 3.2 group.id - Connecté›†ç¾¤ç»„ID



**ä½œç”¨**ï¼šæ ‡è¯†Connecté›†ç¾¤çš„å”¯ä¸€èº«ä»½ï¼ŒåŒä¸€ä¸ªç»„å†…çš„Workerä¼šåè°ƒå·¥ä½œ

**é…ç½®ç¤ºä¾‹**ï¼š
```properties
# è¿æ¥å™¨é›†ç¾¤ç»„å

group.id=connect-cluster

# ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒç»„å

group.id=connect-cluster-prod
group.id=connect-cluster-test
```

**ğŸ”¸ é‡è¦è¯´æ˜**ï¼š
- åŒä¸€ä¸ª `group.id` çš„Workerä¼šå½¢æˆä¸€ä¸ªé›†ç¾¤
- ä¸åŒç»„ä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¼šç›¸äº’å½±å“
- ç»„åè¦æœ‰æ„ä¹‰ï¼Œä¾¿äºç®¡ç†å’ŒåŒºåˆ†

**ç»„ç®¡ç†å·¥ä½œåŸç†**ï¼š
```
Connecté›†ç¾¤åè°ƒè¿‡ç¨‹ï¼š

æ­¥éª¤1: Workerå¯åŠ¨ â†’ åŠ å…¥æŒ‡å®šç»„
æ­¥éª¤2: ç»„å†…é€‰ä¸¾ â†’ é€‰å‡ºLeader
æ­¥éª¤3: ä»»åŠ¡åˆ†é… â†’ Leaderåˆ†é…è¿æ¥å™¨ä»»åŠ¡
æ­¥éª¤4: çŠ¶æ€åŒæ­¥ â†’ æ‰€æœ‰WorkeråŒæ­¥çŠ¶æ€
æ­¥éª¤5: æ•…éšœæ£€æµ‹ â†’ è‡ªåŠ¨é‡æ–°å¹³è¡¡ä»»åŠ¡
```

---

## 4. ğŸ”„ æ•°æ®è½¬æ¢å™¨é…ç½®è¯¦è§£



### 4.1 è½¬æ¢å™¨çš„ä½œç”¨



**ç®€å•ç†è§£**ï¼šè½¬æ¢å™¨å°±åƒæ˜¯**ç¿»è¯‘å®˜**ï¼Œè´Ÿè´£åœ¨ä¸åŒæ•°æ®æ ¼å¼ä¹‹é—´è¿›è¡Œç¿»è¯‘ã€‚

```
æ•°æ®è½¬æ¢æµç¨‹ï¼š
å¤–éƒ¨ç³»ç»Ÿæ•°æ® â†’ è½¬æ¢å™¨ â†’ Kafkaå†…éƒ¨æ ¼å¼ â†’ è½¬æ¢å™¨ â†’ å¤–éƒ¨ç³»ç»Ÿæ•°æ®
     â†‘              â†‘              â†‘              â†‘
   åŸå§‹æ ¼å¼      åºåˆ—åŒ–å¤„ç†      ååºåˆ—åŒ–å¤„ç†    ç›®æ ‡æ ¼å¼
```

### 4.2 key.converter - é”®è½¬æ¢å™¨é…ç½®



**ä½œç”¨**ï¼šå¤„ç†æ¶ˆæ¯é”®(Key)çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–

**å¸¸ç”¨é…ç½®é€‰é¡¹**ï¼š
```properties
# JSONæ ¼å¼è½¬æ¢å™¨ï¼ˆæ¨èï¼Œæ˜“è¯»æ˜“è°ƒè¯•ï¼‰

key.converter=org.apache.kafka.connect.json.JsonConverter

# Avroæ ¼å¼è½¬æ¢å™¨ï¼ˆé«˜æ•ˆï¼Œéœ€è¦Schema Registryï¼‰

key.converter=io.confluent.connect.avro.AvroConverter

# å­—ç¬¦ä¸²è½¬æ¢å™¨ï¼ˆç®€å•ï¼Œé€‚åˆçº¯æ–‡æœ¬ï¼‰

key.converter=org.apache.kafka.connect.storage.StringConverter

# å­—èŠ‚æ•°ç»„è½¬æ¢å™¨ï¼ˆåŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼‰

key.converter=org.apache.kafka.connect.converters.ByteArrayConverter
```

### 4.3 value.converter - å€¼è½¬æ¢å™¨é…ç½®



**ä½œç”¨**ï¼šå¤„ç†æ¶ˆæ¯å€¼(Value)çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–

**é…ç½®ç¤ºä¾‹**ï¼š
```properties
# ä½¿ç”¨JSONè½¬æ¢å™¨ï¼ˆæœ€å¸¸ç”¨ï¼‰

value.converter=org.apache.kafka.connect.json.JsonConverter

# é…ç½®ç¤ºä¾‹æ•°æ®è½¬æ¢æ•ˆæœï¼š

# åŸå§‹æ•°æ®: {"id": 1, "name": "å¼ ä¸‰", "age": 25}

# è½¬æ¢å: JSONå­—ç¬¦ä¸²å­˜å‚¨åœ¨Kafkaä¸­

```

### 4.4 Schemaå¯ç”¨é…ç½®



**key.converter.schemas.enable / value.converter.schemas.enable**

**ä½œç”¨**ï¼šæ§åˆ¶æ˜¯å¦åœ¨æ¶ˆæ¯ä¸­åŒ…å«Schemaä¿¡æ¯

```properties
# å¯ç”¨Schemaï¼ˆæ•°æ®ç»“æ„æ›´ä¸¥æ ¼ï¼‰

key.converter.schemas.enable=true
value.converter.schemas.enable=true

# ç¦ç”¨Schemaï¼ˆæ•°æ®æ›´çµæ´»ï¼ŒJSONæ›´ç®€æ´ï¼‰

key.converter.schemas.enable=false
value.converter.schemas.enable=false
```

**Schemaå¯ç”¨æ•ˆæœå¯¹æ¯”**ï¼š

| é…ç½® | **å¯ç”¨Schema** | **ç¦ç”¨Schema** |
|------|---------------|---------------|
| ğŸ“„ **æ•°æ®æ ¼å¼** | `åŒ…å«schemaå’Œpayloadä¸¤éƒ¨åˆ†` | `åªæœ‰çº¯æ•°æ®å†…å®¹` |
| ğŸ” **æ•°æ®æ ¡éªŒ** | `ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥` | `çµæ´»çš„æ•°æ®æ ¼å¼` |
| ğŸ“¦ **æ¶ˆæ¯å¤§å°** | `è¾ƒå¤§ï¼ˆåŒ…å«Schemaä¿¡æ¯ï¼‰` | `è¾ƒå°ï¼ˆçº¯æ•°æ®ï¼‰` |
| ğŸ› ï¸ **è°ƒè¯•éš¾åº¦** | `å¤æ‚ï¼ˆéœ€è¦è§£æSchemaï¼‰` | `ç®€å•ï¼ˆç›´æ¥è¯»å–JSONï¼‰` |

**ğŸ’¡ å»ºè®®**ï¼š
- **å¼€å‘æµ‹è¯•**ï¼šç¦ç”¨Schemaï¼Œæ–¹ä¾¿è°ƒè¯•
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šå¯ç”¨Schemaï¼Œä¿è¯æ•°æ®è´¨é‡

---

## 5. ğŸ’¾ å†…éƒ¨å­˜å‚¨Topicé…ç½®



### 5.1 ä¸‰ä¸ªå†…éƒ¨Topicçš„ä½œç”¨



Kafka Connectä½¿ç”¨ä¸‰ä¸ªç‰¹æ®Šçš„Topicæ¥å­˜å‚¨è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯ï¼š

```
Connectå†…éƒ¨Topicæ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  offset.storage â”‚    â”‚ config.storage  â”‚    â”‚ status.storage  â”‚
â”‚     åç§»é‡å­˜å‚¨   â”‚    â”‚    é…ç½®å­˜å‚¨     â”‚    â”‚    çŠ¶æ€å­˜å‚¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                       â†“                       â†“
   è®°å½•æ•°æ®å¤„ç†è¿›åº¦         å­˜å‚¨è¿æ¥å™¨é…ç½®        è®°å½•è¿æ¥å™¨è¿è¡ŒçŠ¶æ€
```

### 5.2 offset.storage.topic - åç§»é‡å­˜å‚¨



**ä½œç”¨**ï¼šè®°å½•æ¯ä¸ªè¿æ¥å™¨å¤„ç†æ•°æ®çš„è¿›åº¦ï¼Œç±»ä¼¼äºä¹¦ç­¾

**é…ç½®ç¤ºä¾‹**ï¼š
```properties
# åç§»é‡å­˜å‚¨Topicåç§°

offset.storage.topic=connect-offsets

# åç§»é‡å‰¯æœ¬æ•°é‡

offset.storage.replication.factor=3
```

**å®é™…æ„ä¹‰**ï¼š
- ğŸ“ **æ–­ç‚¹ç»­ä¼ **ï¼šé‡å¯åä»ä¸Šæ¬¡åœæ­¢çš„ä½ç½®ç»§ç»­å¤„ç†
- ğŸ”„ **é‡å¤å¤„ç†é˜²æŠ¤**ï¼šé¿å…é‡å¤å¤„ç†åŒä¸€æ¡æ•°æ®
- ğŸ“Š **è¿›åº¦è·Ÿè¸ª**ï¼šç›‘æ§æ•°æ®å¤„ç†è¿›åº¦

### 5.3 config.storage.topic - é…ç½®å­˜å‚¨



**ä½œç”¨**ï¼šå­˜å‚¨æ‰€æœ‰è¿æ¥å™¨çš„é…ç½®ä¿¡æ¯

**é…ç½®ç¤ºä¾‹**ï¼š
```properties
# é…ç½®å­˜å‚¨Topicåç§°

config.storage.topic=connect-configs

# é…ç½®å‰¯æœ¬æ•°é‡

config.storage.replication.factor=3
```

**å­˜å‚¨å†…å®¹**ï¼š
- ğŸ”§ è¿æ¥å™¨é…ç½®å‚æ•°
- ğŸ¯ ä»»åŠ¡åˆ†é…ä¿¡æ¯
- âš™ï¸ è½¬æ¢å™¨è®¾ç½®

### 5.4 status.storage.topic - çŠ¶æ€å­˜å‚¨



**ä½œç”¨**ï¼šè®°å½•è¿æ¥å™¨å’Œä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€

**é…ç½®ç¤ºä¾‹**ï¼š
```properties
# çŠ¶æ€å­˜å‚¨Topicåç§°

status.storage.topic=connect-status

# çŠ¶æ€å‰¯æœ¬æ•°é‡

status.storage.replication.factor=3
```

**çŠ¶æ€ä¿¡æ¯åŒ…æ‹¬**ï¼š
- âœ… è¿æ¥å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
- âš ï¸ ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯
- ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡å’Œç»Ÿè®¡æ•°æ®

---

## 6. ğŸ›¡ï¸ å‰¯æœ¬ä¸å®¹é”™é…ç½®



### 6.1 å‰¯æœ¬å› å­çš„é‡è¦æ€§



**å‰¯æœ¬å› å­(Replication Factor)**ï¼šå†³å®šæ•°æ®åœ¨é›†ç¾¤ä¸­çš„å¤‡ä»½æ•°é‡

**å®¹é”™èƒ½åŠ›è®¡ç®—**ï¼š
```
å®¹é”™å…¬å¼ï¼šå®¹é”™èŠ‚ç‚¹æ•° = å‰¯æœ¬æ•° - 1

ä¾‹å¦‚ï¼š
å‰¯æœ¬æ•°=1ï¼šå®¹é”™0ä¸ªèŠ‚ç‚¹ï¼ˆæ— å®¹é”™èƒ½åŠ›ï¼‰
å‰¯æœ¬æ•°=2ï¼šå®¹é”™1ä¸ªèŠ‚ç‚¹
å‰¯æœ¬æ•°=3ï¼šå®¹é”™2ä¸ªèŠ‚ç‚¹ï¼ˆæ¨èé…ç½®ï¼‰
```

### 6.2 å„å­˜å‚¨Topicå‰¯æœ¬é…ç½®



**æ¨èé…ç½®**ï¼š
```properties
# åç§»é‡å­˜å‚¨å‰¯æœ¬ï¼ˆæœ€é‡è¦ï¼Œä¸¢å¤±ä¼šå½±å“æ•°æ®ä¸€è‡´æ€§ï¼‰

offset.storage.replication.factor=3

# é…ç½®å­˜å‚¨å‰¯æœ¬ï¼ˆé‡è¦ï¼Œä¸¢å¤±éœ€è¦é‡æ–°é…ç½®ï¼‰

config.storage.replication.factor=3

# çŠ¶æ€å­˜å‚¨å‰¯æœ¬ï¼ˆç›¸å¯¹ä¸é‡è¦ï¼Œå¯ä»¥é‡å»ºï¼‰

status.storage.replication.factor=3
```

**ğŸ”¸ é…ç½®å»ºè®®**ï¼š

| ç¯å¢ƒç±»å‹ | **å‰¯æœ¬å› å­å»ºè®®** | **åŸå› è¯´æ˜** |
|---------|----------------|-------------|
| ğŸ§ª **å¼€å‘æµ‹è¯•** | `1` | `èŠ‚çœèµ„æºï¼Œå¿«é€ŸéªŒè¯` |
| ğŸ¢ **ç”Ÿäº§ç¯å¢ƒ** | `3` | `ä¿è¯é«˜å¯ç”¨æ€§` |
| ğŸŒ **å…³é”®ä¸šåŠ¡** | `5` | `è¶…é«˜å¯ç”¨æ€§è¦æ±‚` |

---

## 7. ğŸ“‹ é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹



### 7.1 ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®



```properties
#==================================================


# Kafka Connect åˆ†å¸ƒå¼æ¨¡å¼é…ç½®æ–‡ä»¶


# é€‚ç”¨ç¯å¢ƒï¼šç”Ÿäº§ç¯å¢ƒ


# æ›´æ–°æ—¶é—´ï¼š2025-09-20


#==================================================



#----- é›†ç¾¤è¿æ¥é…ç½® -----

# Kafkaé›†ç¾¤åœ°å€ï¼ˆå¿…é¡»é…ç½®ï¼‰

bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092

#----- ç»„ç®¡ç†é…ç½® -----

# Connecté›†ç¾¤ç»„IDï¼ˆåŒä¸€ç»„å†…çš„Workerä¼šåè°ƒå·¥ä½œï¼‰

group.id=connect-cluster-prod

#----- æ•°æ®è½¬æ¢é…ç½® -----

# é”®è½¬æ¢å™¨ï¼ˆæ¨èJSONæ ¼å¼ï¼‰

key.converter=org.apache.kafka.connect.json.JsonConverter
# å€¼è½¬æ¢å™¨ï¼ˆæ¨èJSONæ ¼å¼ï¼‰

value.converter=org.apache.kafka.connect.json.JsonConverter

# Schemaé…ç½®ï¼ˆfalse=æ›´ç®€æ´çš„JSONæ ¼å¼ï¼‰

key.converter.schemas.enable=false
value.converter.schemas.enable=false

#----- å†…éƒ¨å­˜å‚¨Topicé…ç½® -----

# åç§»é‡å­˜å‚¨Topic

offset.storage.topic=connect-offsets
offset.storage.replication.factor=3

# é…ç½®å­˜å‚¨Topic

config.storage.topic=connect-configs
config.storage.replication.factor=3

# çŠ¶æ€å­˜å‚¨Topic

status.storage.topic=connect-status
status.storage.replication.factor=3

#----- æ€§èƒ½è°ƒä¼˜é…ç½® -----

# ä»»åŠ¡æ£€æŸ¥é—´éš”ï¼ˆæ¯«ç§’ï¼‰

offset.flush.interval.ms=10000

# REST APIç«¯å£

rest.port=8083

# æ’ä»¶è·¯å¾„

plugin.path=/usr/local/share/kafka/plugins
```

### 7.2 å¼€å‘ç¯å¢ƒç®€åŒ–é…ç½®



```properties
#==================================================


# Kafka Connect å¼€å‘ç¯å¢ƒé…ç½®


#==================================================



#----- åŸºç¡€é…ç½® -----

bootstrap.servers=localhost:9092
group.id=connect-cluster-dev

#----- æ•°æ®è½¬æ¢é…ç½® -----

key.converter=org.apache.kafka.connect.json.JsonConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
key.converter.schemas.enable=false
value.converter.schemas.enable=false

#----- å†…éƒ¨å­˜å‚¨é…ç½®ï¼ˆå•å‰¯æœ¬ï¼Œé€‚åˆå¼€å‘ï¼‰-----

offset.storage.topic=connect-offsets-dev
offset.storage.replication.factor=1

config.storage.topic=connect-configs-dev
config.storage.replication.factor=1

status.storage.topic=connect-status-dev
status.storage.replication.factor=1

#----- å¼€å‘ä¾¿åˆ©é…ç½® -----

rest.port=8083
plugin.path=./plugins
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ Connectä½œç”¨ï¼šKafkaä¸å¤–éƒ¨ç³»ç»Ÿçš„æ•°æ®æ¡¥æ¢
ğŸ”¸ åˆ†å¸ƒå¼æ¨¡å¼ï¼šç”Ÿäº§ç¯å¢ƒçš„é«˜å¯ç”¨æ–¹æ¡ˆ
ğŸ”¸ ç»„ç®¡ç†ï¼šé€šè¿‡group.idå®ç°é›†ç¾¤åè°ƒ
ğŸ”¸ æ•°æ®è½¬æ¢ï¼šé€šè¿‡converterå®ç°æ ¼å¼è½¬æ¢
ğŸ”¸ å†…éƒ¨å­˜å‚¨ï¼šä¸‰ä¸ªTopicä¿å­˜è¿è¡ŒçŠ¶æ€
ğŸ”¸ å‰¯æœ¬é…ç½®ï¼šä¿è¯æ•°æ®å®‰å…¨å’Œå®¹é”™èƒ½åŠ›
```

### 8.2 å…³é”®é…ç½®è®°å¿†



**ğŸ”¹ æ ¸å¿ƒé…ç½®ä¼˜å…ˆçº§**ï¼š
```
1. bootstrap.servers â†’ æ‰¾åˆ°Kafkaé›†ç¾¤
2. group.id â†’ å½¢æˆConnecté›†ç¾¤
3. converter â†’ å¤„ç†æ•°æ®æ ¼å¼
4. storage.topic â†’ ä¿å­˜è¿è¡ŒçŠ¶æ€
5. replication.factor â†’ ä¿è¯æ•°æ®å®‰å…¨
```

**ğŸ”¹ é…ç½®é€‰æ‹©åŸåˆ™**ï¼š
```
å¼€å‘ç¯å¢ƒï¼š
- å•å‰¯æœ¬é…ç½®
- ç®€åŒ–çš„è½¬æ¢å™¨è®¾ç½®
- æœ¬åœ°åŒ–é…ç½®

ç”Ÿäº§ç¯å¢ƒï¼š
- å¤šå‰¯æœ¬é…ç½®ï¼ˆæ¨è3ä¸ªï¼‰
- å®Œæ•´çš„å®¹é”™è®¾ç½®
- é›†ç¾¤åŒ–é…ç½®
```

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼



**ğŸ“ é…ç½®æ­¥éª¤**ï¼š
1. **ç¡®å®šç¯å¢ƒ**ï¼šå¼€å‘/æµ‹è¯•/ç”Ÿäº§
2. **é…ç½®é›†ç¾¤åœ°å€**ï¼šæ ¹æ®Kafkaé›†ç¾¤ä¿¡æ¯
3. **è®¾ç½®ç»„å**ï¼šä¾¿äºç®¡ç†çš„æœ‰æ„ä¹‰åç§°
4. **é€‰æ‹©è½¬æ¢å™¨**ï¼šæ ¹æ®æ•°æ®æ ¼å¼éœ€æ±‚
5. **é…ç½®å‰¯æœ¬æ•°**ï¼šæ ¹æ®å®¹é”™è¦æ±‚
6. **æµ‹è¯•éªŒè¯**ï¼šå¯åŠ¨åæ£€æŸ¥è¿æ¥çŠ¶æ€

**âš ï¸ å¸¸è§é—®é¢˜**ï¼š
- **è¿æ¥å¤±è´¥**ï¼šæ£€æŸ¥ `bootstrap.servers` åœ°å€æ˜¯å¦æ­£ç¡®
- **ä»»åŠ¡å¼‚å¸¸**ï¼šæ£€æŸ¥å†…éƒ¨Topicæ˜¯å¦åˆ›å»ºæˆåŠŸ
- **æ•°æ®æ ¼å¼é”™è¯¯**ï¼šæ£€æŸ¥converteré…ç½®æ˜¯å¦åŒ¹é…
- **æ€§èƒ½é—®é¢˜**ï¼šé€‚å½“è°ƒæ•´å‰¯æœ¬æ•°å’Œåˆ·æ–°é—´éš”

**æ ¸å¿ƒè®°å¿†**ï¼š
- Connecté…ç½®æ ¸å¿ƒåœ¨äº"è¿æ¥ã€è½¬æ¢ã€å­˜å‚¨"
- åˆ†å¸ƒå¼æ¨¡å¼é€šè¿‡ç»„åè°ƒå®ç°é«˜å¯ç”¨
- ä¸‰ä¸ªå†…éƒ¨Topicä¿å­˜Connectè¿è¡ŒçŠ¶æ€
- å‰¯æœ¬æ•°é‡ç›´æ¥å½±å“å®¹é”™èƒ½åŠ›å’Œæ€§èƒ½