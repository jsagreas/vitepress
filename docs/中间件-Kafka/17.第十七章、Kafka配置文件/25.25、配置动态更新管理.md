---
title: 25ã€é…ç½®åŠ¨æ€æ›´æ–°ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [åŠ¨æ€é…ç½®æ¦‚è¿°](#1-åŠ¨æ€é…ç½®æ¦‚è¿°)
2. [åŠ¨æ€é…ç½®æ›´æ–°å‘½ä»¤è¯¦è§£](#2-åŠ¨æ€é…ç½®æ›´æ–°å‘½ä»¤è¯¦è§£)
3. [é›†ç¾¤çº§åˆ«é…ç½®ç®¡ç†](#3-é›†ç¾¤çº§åˆ«é…ç½®ç®¡ç†)
4. [Brokerçº§åˆ«é…ç½®ç®¡ç†](#4-brokerçº§åˆ«é…ç½®ç®¡ç†)
5. [Topicçº§åˆ«é…ç½®ç®¡ç†](#5-topicçº§åˆ«é…ç½®ç®¡ç†)
6. [å®¢æˆ·ç«¯é…ç½®åŠ¨æ€æ›´æ–°](#6-å®¢æˆ·ç«¯é…ç½®åŠ¨æ€æ›´æ–°)
7. [é…ç½®éªŒè¯ä¸å®‰å…¨æœºåˆ¶](#7-é…ç½®éªŒè¯ä¸å®‰å…¨æœºåˆ¶)
8. [é…ç½®å›æ»šä¸æ•…éšœå¤„ç†](#8-é…ç½®å›æ»šä¸æ•…éšœå¤„ç†)
9. [é…ç½®ç›‘æ§ä¸æœ€ä½³å®è·µ](#9-é…ç½®ç›‘æ§ä¸æœ€ä½³å®è·µ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ åŠ¨æ€é…ç½®æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åŠ¨æ€é…ç½®


> ğŸ’¡ **ç®€å•ç†è§£**ï¼šåŠ¨æ€é…ç½®å°±æ˜¯åœ¨Kafkaé›†ç¾¤è¿è¡Œæ—¶ï¼Œä¸éœ€è¦é‡å¯æœåŠ¡å°±èƒ½ä¿®æ”¹é…ç½®å‚æ•°

**ä¼ ç»Ÿé…ç½® vs åŠ¨æ€é…ç½®å¯¹æ¯”ï¼š**

```
ä¼ ç»Ÿé™æ€é…ç½®ï¼š
ä¿®æ”¹server.properties â†’ é‡å¯Broker â†’ ç”Ÿæ•ˆ
ç¼ºç‚¹ï¼šæœåŠ¡ä¸­æ–­ï¼Œå½±å“ä¸šåŠ¡

åŠ¨æ€é…ç½®ï¼š
åœ¨çº¿ä¿®æ”¹ â†’ ç«‹å³ç”Ÿæ•ˆ â†’ æ— éœ€é‡å¯
ä¼˜ç‚¹ï¼šé›¶åœæœºï¼Œä¸šåŠ¡æ— æ„ŸçŸ¥
```

### 1.2 åŠ¨æ€é…ç½®çš„å¥½å¤„


**ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿ï¼š**

| ç‰¹æ€§ | **é™æ€é…ç½®** | **åŠ¨æ€é…ç½®** | **å®é™…ä»·å€¼** |
|------|-------------|-------------|-------------|
| ğŸ“Š **æ›´æ–°æ–¹å¼** | `ä¿®æ”¹æ–‡ä»¶+é‡å¯` | `å‘½ä»¤è¡Œå³æ—¶æ›´æ–°` | `è¿ç»´æ•ˆç‡æå‡10å€` |
| â° **ç”Ÿæ•ˆæ—¶é—´** | `éœ€è¦é‡å¯(åˆ†é’Ÿçº§)` | `ç§’çº§ç”Ÿæ•ˆ` | `ä¸šåŠ¡é›¶ä¸­æ–­` |
| ğŸ”„ **å›æ»šèƒ½åŠ›** | `æ‰‹åŠ¨æ¢å¤æ–‡ä»¶` | `ä¸€é”®å›æ»š` | `æ•…éšœæ¢å¤å¿«é€Ÿ` |
| ğŸ“ˆ **è¿ç»´æˆæœ¬** | `é«˜é£é™©æ“ä½œ` | `å®‰å…¨ä¾¿æ·` | `é™ä½äººä¸ºé”™è¯¯` |

### 1.3 æ”¯æŒåŠ¨æ€æ›´æ–°çš„é…ç½®ç±»å‹


**é…ç½®å±‚çº§æ¶æ„ï¼š**
```
é›†ç¾¤çº§é…ç½® (Cluster-wide)
    â†“
Brokerçº§é…ç½® (Broker-specific)  
    â†“
Topicçº§é…ç½® (Topic-specific)
    â†“
å®¢æˆ·ç«¯é…ç½® (Client-specific)
```

**ğŸ”¸ å¸¸è§åŠ¨æ€é…ç½®å‚æ•°ï¼š**
- **æ€§èƒ½è°ƒä¼˜**ï¼š`num.network.threads`ã€`num.io.threads`
- **å­˜å‚¨ç®¡ç†**ï¼š`log.retention.hours`ã€`log.segment.bytes`  
- **å®‰å…¨è®¤è¯**ï¼š`ssl.truststore.password`ã€`sasl.jaas.config`
- **é™æµæ§åˆ¶**ï¼š`producer.purgatory.purge.interval.requests`

---

## 2. âš¡ åŠ¨æ€é…ç½®æ›´æ–°å‘½ä»¤è¯¦è§£


### 2.1 åŸºç¡€å‘½ä»¤æ ¼å¼


> ğŸ“ **æ ¸å¿ƒå·¥å…·**ï¼š`kafka-configs.sh` - Kafkaå®˜æ–¹æä¾›çš„é…ç½®ç®¡ç†å·¥å…·

**åŸºç¡€è¯­æ³•ç»“æ„ï¼š**
```bash
kafka-configs.sh \
  --bootstrap-server <é›†ç¾¤åœ°å€> \
  --entity-type <é…ç½®ç±»å‹> \
  --entity-name <å®ä½“åç§°> \
  --alter \
  --add-config <é…ç½®å‚æ•°>
```

**ğŸ” å‚æ•°è¯¦è§£ï¼š**
- `--bootstrap-server`ï¼šKafkaé›†ç¾¤çš„è¿æ¥åœ°å€
- `--entity-type`ï¼šé…ç½®ç±»å‹ï¼ˆbrokers/topics/clients/usersï¼‰
- `--entity-name`ï¼šå…·ä½“çš„å®ä½“åç§°ï¼ˆå¦‚broker IDã€topicåç§°ï¼‰
- `--alter`ï¼šè¡¨ç¤ºè¦ä¿®æ”¹é…ç½®
- `--add-config`ï¼šè¦æ·»åŠ æˆ–ä¿®æ”¹çš„é…ç½®å‚æ•°

### 2.2 æŸ¥çœ‹é…ç½®å‘½ä»¤


**æŸ¥çœ‹å½“å‰é…ç½®ï¼š**
```bash
# æŸ¥çœ‹æ‰€æœ‰brokerçš„åŠ¨æ€é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --describe

# æŸ¥çœ‹æŒ‡å®šbrokerçš„é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --describe
```

**ğŸ“Š è¾“å‡ºç¤ºä¾‹è§£è¯»ï¼š**
```
Configs for broker 1 are:
  log.retention.hours=168 sensitive=false synonyms={DYNAMIC_BROKER_CONFIG:log.retention.hours=168, DEFAULT_CONFIG:log.retention.hours=168}
  num.network.threads=8 sensitive=false synonyms={DYNAMIC_BROKER_CONFIG:num.network.threads=8}
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼š
> - `DYNAMIC_BROKER_CONFIG`ï¼šåŠ¨æ€é…ç½®çš„å€¼
> - `DEFAULT_CONFIG`ï¼šé»˜è®¤é…ç½®å€¼
> - `sensitive=false`ï¼šè¡¨ç¤ºéæ•æ„Ÿé…ç½®ï¼Œå¯ä»¥æ˜æ–‡æ˜¾ç¤º

---

## 3. ğŸŒ é›†ç¾¤çº§åˆ«é…ç½®ç®¡ç†


### 3.1 é›†ç¾¤é…ç½®æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯é›†ç¾¤çº§é…ç½®ï¼Ÿ**
- å½±å“æ•´ä¸ªKafkaé›†ç¾¤çš„å…¨å±€é…ç½®
- å¯¹æ‰€æœ‰brokeréƒ½ç”Ÿæ•ˆ
- å¸¸ç”¨äºæ€§èƒ½è°ƒä¼˜å’Œå®‰å…¨è®¾ç½®

### 3.2 å¸¸ç”¨é›†ç¾¤çº§é…ç½®


**ğŸ”§ æ ¸å¿ƒé›†ç¾¤é…ç½®å‚æ•°ï¼š**

| é…ç½®å‚æ•° | **ä½œç”¨è¯´æ˜** | **å…¸å‹å€¼** | **ä½¿ç”¨åœºæ™¯** |
|---------|------------|-----------|-------------|
| `metric.reporters` | **ç›‘æ§æŠ¥å‘Šå™¨** | `JmxReporter` | `é›†ç¾¤ç›‘æ§` |
| `security.inter.broker.protocol` | **brokeré—´é€šä¿¡åè®®** | `SASL_SSL` | `å®‰å…¨åŠ å›º` |
| `default.replication.factor` | **é»˜è®¤å‰¯æœ¬æ•°** | `3` | `æ•°æ®å¯é æ€§` |
| `min.insync.replicas` | **æœ€å°åŒæ­¥å‰¯æœ¬æ•°** | `2` | `ä¸€è‡´æ€§ä¿è¯` |

### 3.3 é›†ç¾¤é…ç½®æ›´æ–°å®ä¾‹


**ç¤ºä¾‹1ï¼šæ›´æ–°é›†ç¾¤ç›‘æ§é…ç½®**
```bash
# æ·»åŠ JMXç›‘æ§æŠ¥å‘Šå™¨
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-default \
  --alter \
  --add-config "metric.reporters=kafka.server.JmxReporter"
```

**ç¤ºä¾‹2ï¼šæ‰¹é‡æ›´æ–°å¤šä¸ªé…ç½®**
```bash
# åŒæ—¶æ›´æ–°å¤šä¸ªé›†ç¾¤çº§é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-default \
  --alter \
  --add-config "default.replication.factor=3,min.insync.replicas=2"
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š
> - `--entity-default` è¡¨ç¤ºå¯¹æ‰€æœ‰brokerç”Ÿæ•ˆ
> - å¤šä¸ªé…ç½®ç”¨é€—å·åˆ†éš”
> - é…ç½®ç«‹å³ç”Ÿæ•ˆï¼Œè¯·è°¨æ…æ“ä½œ

---

## 4. ğŸ–¥ï¸ Brokerçº§åˆ«é…ç½®ç®¡ç†


### 4.1 Brokeré…ç½®ç‰¹ç‚¹


**Brokerçº§é…ç½® vs é›†ç¾¤çº§é…ç½®ï¼š**
```
é›†ç¾¤çº§é…ç½®ï¼š
æ‰€æœ‰Broker â†’ ç»Ÿä¸€é…ç½® â†’ å…¨å±€ç”Ÿæ•ˆ

Brokerçº§é…ç½®ï¼š  
ç‰¹å®šBroker â†’ ä¸ªæ€§åŒ–é…ç½® â†’ å±€éƒ¨ç”Ÿæ•ˆ
```

**ğŸ’¡ åº”ç”¨åœºæ™¯ï¼š**
- ä¸åŒè§„æ ¼çš„æœåŠ¡å™¨éœ€è¦ä¸åŒçš„æ€§èƒ½å‚æ•°
- ç‰¹å®šbrokeræ‰¿æ‹…ç‰¹æ®Šè§’è‰²ï¼ˆå¦‚controllerä¼˜åŒ–ï¼‰
- æ•…éšœbrokerçš„ä¸´æ—¶é…ç½®è°ƒæ•´

### 4.2 æ ¸å¿ƒBrokerçº§é…ç½®


**ğŸ”¸ æ€§èƒ½è°ƒä¼˜é…ç½®ï¼š**

```bash
# ç½‘ç»œçº¿ç¨‹æ•°è°ƒä¼˜
num.network.threads=8

# IOçº¿ç¨‹æ•°è°ƒä¼˜  
num.io.threads=16

# æ—¥å¿—åˆ·ç›˜é¢‘ç‡
log.flush.interval.messages=10000
log.flush.interval.ms=1000

# å†…å­˜ä½¿ç”¨ä¼˜åŒ–
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
```

### 4.3 Brokeré…ç½®æ›´æ–°å®ä¾‹


**ç¤ºä¾‹1ï¼šå•ä¸ªbrokeræ€§èƒ½è°ƒä¼˜**
```bash
# ä¸ºbroker 1å¢åŠ ç½‘ç»œçº¿ç¨‹æ•°
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --add-config "num.network.threads=12,num.io.threads=20"
```

**ç¤ºä¾‹2ï¼šSSLé…ç½®åŠ¨æ€æ›´æ–°**
```bash
# æ›´æ–°brokerçš„SSLé…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --add-config "ssl.truststore.password=newpassword"
```

**ğŸ“Š é…ç½®ä¼˜å…ˆçº§è¯´æ˜ï¼š**
```
é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
1. Brokerçº§åŠ¨æ€é…ç½®
2. é›†ç¾¤çº§åŠ¨æ€é…ç½®  
3. é™æ€é…ç½®æ–‡ä»¶
4. ç³»ç»Ÿé»˜è®¤é…ç½®
```

---

## 5. ğŸ“ Topicçº§åˆ«é…ç½®ç®¡ç†


### 5.1 Topicé…ç½®ç®¡ç†æ¦‚è¿°


**Topicé…ç½®çš„ä½œç”¨ï¼š**
- æ§åˆ¶ç‰¹å®šä¸»é¢˜çš„è¡Œä¸º
- ç‹¬ç«‹äºbrokerçš„å…¨å±€è®¾ç½®
- å¯ä»¥è¦†ç›–é›†ç¾¤çº§é»˜è®¤é…ç½®

### 5.2 é‡è¦Topicé…ç½®å‚æ•°


**ğŸ”¸ æ ¸å¿ƒTopicé…ç½®åˆ—è¡¨ï¼š**

| é…ç½®å‚æ•° | **å«ä¹‰è§£é‡Š** | **é»˜è®¤å€¼** | **è°ƒä¼˜å»ºè®®** |
|---------|------------|-----------|-------------|
| `retention.ms` | **æ¶ˆæ¯ä¿ç•™æ—¶é—´(æ¯«ç§’)** | `604800000 (7å¤©)` | `æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´` |
| `retention.bytes` | **æ¶ˆæ¯ä¿ç•™å¤§å°** | `-1 (æ— é™åˆ¶)` | `é˜²æ­¢ç£ç›˜çˆ†æ»¡` |
| `segment.ms` | **æ®µæ–‡ä»¶åˆ‡æ¢æ—¶é—´** | `604800000 (7å¤©)` | `å½±å“æ¶ˆæ¯è¿‡æœŸç²¾åº¦` |
| `compression.type` | **å‹ç¼©ç®—æ³•** | `producer` | `snappy/lz4æ¨è` |
| `cleanup.policy` | **æ¸…ç†ç­–ç•¥** | `delete` | `delete/compact` |
| `min.insync.replicas` | **æœ€å°åŒæ­¥å‰¯æœ¬** | `1` | `å¼ºä¸€è‡´æ€§è®¾ä¸º2+` |
| `max.message.bytes` | **æœ€å¤§æ¶ˆæ¯å¤§å°** | `1000012` | `æ ¹æ®æ¶ˆæ¯å¤§å°è°ƒæ•´` |

### 5.3 Topicé…ç½®å®è·µæ“ä½œ


**åˆ›å»ºTopicæ—¶æŒ‡å®šé…ç½®ï¼š**
```bash
# åˆ›å»ºå…·æœ‰ç‰¹å®šé…ç½®çš„topic
kafka-topics.sh \
  --bootstrap-server localhost:9092 \
  --create \
  --topic user-events \
  --partitions 6 \
  --replication-factor 3 \
  --config retention.ms=86400000 \
  --config compression.type=snappy
```

**åŠ¨æ€ä¿®æ”¹å·²å­˜åœ¨Topicé…ç½®ï¼š**
```bash
# ä¿®æ”¹æ¶ˆæ¯ä¿ç•™æ—¶é—´ä¸º3å¤©
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type topics \
  --entity-name user-events \
  --alter \
  --add-config "retention.ms=259200000"

# åŒæ—¶ä¿®æ”¹å¤šä¸ªé…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type topics \
  --entity-name user-events \
  --alter \
  --add-config "retention.ms=259200000,compression.type=lz4,segment.ms=86400000"
```

**æŸ¥çœ‹Topicé…ç½®ï¼š**
```bash
# æŸ¥çœ‹æŒ‡å®štopicçš„é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type topics \
  --entity-name user-events \
  --describe
```

### 5.4 Topicé…ç½®æœ€ä½³å®è·µ


**ğŸ¯ é…ç½®ä¼˜åŒ–å»ºè®®ï¼š**

```
é«˜ååé‡åœºæ™¯ï¼š
âœ… compression.type=lz4
âœ… batch.size=65536  
âœ… linger.ms=100

ä½å»¶è¿Ÿåœºæ™¯ï¼š
âœ… compression.type=none
âœ… batch.size=1024
âœ… linger.ms=0

é•¿æœŸå­˜å‚¨åœºæ™¯ï¼š
âœ… retention.ms=604800000 (7å¤©+)
âœ… compression.type=snappy
âœ… segment.ms=86400000 (1å¤©)
```

---

## 6. ğŸ‘¥ å®¢æˆ·ç«¯é…ç½®åŠ¨æ€æ›´æ–°


### 6.1 å®¢æˆ·ç«¯é…ç½®ç®¡ç†


**å®¢æˆ·ç«¯é…ç½®èŒƒå›´ï¼š**
- Produceré…ç½®ï¼šç”Ÿäº§è€…è¡Œä¸ºæ§åˆ¶
- Consumeré…ç½®ï¼šæ¶ˆè´¹è€…è¡Œä¸ºæ§åˆ¶  
- ç‰¹å®šå®¢æˆ·ç«¯IDé…ç½®ï¼šç²¾ç¡®æ§åˆ¶

### 6.2 å®¢æˆ·ç«¯é…ç½®å‚æ•°


**ğŸ”¸ Produceré…ç½®å‚æ•°ï¼š**

```bash
# ç”Ÿäº§è€…é‡è¦é…ç½®
producer.purgatory.purge.interval.requests=1000
request.timeout.ms=30000
retries=2147483647
batch.size=16384
linger.ms=0
buffer.memory=33554432
```

**ğŸ”¸ Consumeré…ç½®å‚æ•°ï¼š**

```bash
# æ¶ˆè´¹è€…é‡è¦é…ç½®  
fetch.min.bytes=1
fetch.max.wait.ms=500
max.partition.fetch.bytes=1048576
session.timeout.ms=10000
heartbeat.interval.ms=3000
```

### 6.3 å®¢æˆ·ç«¯é…ç½®æ›´æ–°æ“ä½œ


**æ›´æ–°ç‰¹å®šå®¢æˆ·ç«¯é…ç½®ï¼š**
```bash
# ä¸ºç‰¹å®šclient IDè®¾ç½®é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type clients \
  --entity-name my-producer-client \
  --alter \
  --add-config "producer.purgatory.purge.interval.requests=2000"

# æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type clients \
  --entity-name my-producer-client \
  --describe
```

**ç”¨æˆ·çº§åˆ«é…ç½®ç®¡ç†ï¼š**
```bash
# SASLç”¨æˆ·é…ç½®æ›´æ–°
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type users \
  --entity-name alice \
  --alter \
  --add-config "producer_byte_rate=102400,consumer_byte_rate=204800"
```

---

## 7. ğŸ”’ é…ç½®éªŒè¯ä¸å®‰å…¨æœºåˆ¶


### 7.1 é…ç½®éªŒè¯æœºåˆ¶


**Kafkaé…ç½®éªŒè¯æµç¨‹ï¼š**
```
é…ç½®æäº¤ â†’ è¯­æ³•æ£€æŸ¥ â†’ å‚æ•°éªŒè¯ â†’ å…¼å®¹æ€§æ£€æŸ¥ â†’ åº”ç”¨é…ç½®
    â†“           â†“          â†“           â†“          â†“
  æ ¼å¼æ­£ç¡®    å€¼èŒƒå›´åˆæ³•   ä¾èµ–å…³ç³»æ­£ç¡®  ç‰ˆæœ¬å…¼å®¹   ç”Ÿæ•ˆæˆåŠŸ
```

### 7.2 é…ç½®éªŒè¯å®ä¾‹


**æŸ¥çœ‹é…ç½®éªŒè¯ç»“æœï¼š**
```bash
# éªŒè¯é…ç½®è¯­æ³•ï¼ˆä¸å®é™…åº”ç”¨ï¼‰
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --add-config "num.network.threads=abc" \
  --validate-only
```

> âš ï¸ **å¸¸è§éªŒè¯é”™è¯¯**ï¼š
> - æ•°å€¼ç±»å‹é”™è¯¯ï¼šå­—ç¬¦ä¸²ä¼ ç»™æ•°å€¼å‚æ•°
> - å–å€¼èŒƒå›´é”™è¯¯ï¼šè¶…å‡ºå…è®¸çš„æœ€å¤§æœ€å°å€¼
> - ä¾èµ–å…³ç³»é”™è¯¯ï¼šç›¸å…³å‚æ•°é…ç½®å†²çª

### 7.3 å®‰å…¨é…ç½®ç®¡ç†


**æ•æ„Ÿé…ç½®å¤„ç†ï¼š**
```bash
# æ•æ„Ÿé…ç½®ä¼šè¢«æ ‡è®°å’ŒåŠ å¯†å­˜å‚¨
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --add-config "ssl.key.password=secret123"

# æŸ¥çœ‹æ—¶æ•æ„Ÿé…ç½®ä¸ä¼šæ˜¾ç¤ºæ˜æ–‡
# è¾“å‡ºï¼šssl.key.password=[hidden] sensitive=true
```

**ğŸ” å®‰å…¨é…ç½®ç±»åˆ«ï¼š**
- `ssl.key.password`ï¼šSSLç§é’¥å¯†ç 
- `ssl.keystore.password`ï¼šå¯†é’¥åº“å¯†ç 
- `ssl.truststore.password`ï¼šä¿¡ä»»åº“å¯†ç 
- `sasl.jaas.config`ï¼šSASLè®¤è¯é…ç½®

---

## 8. ğŸ”„ é…ç½®å›æ»šä¸æ•…éšœå¤„ç†


### 8.1 é…ç½®å›æ»šæœºåˆ¶


**ä¸ºä»€ä¹ˆéœ€è¦é…ç½®å›æ»šï¼Ÿ**
- é…ç½®é”™è¯¯å¯¼è‡´æ€§èƒ½ä¸‹é™
- æ–°é…ç½®å¼•å‘ç³»ç»Ÿå¼‚å¸¸
- è¯¯æ“ä½œéœ€è¦å¿«é€Ÿæ¢å¤

### 8.2 é…ç½®å›æ»šæ“ä½œ


**åˆ é™¤åŠ¨æ€é…ç½®ï¼ˆå›æ»šåˆ°é»˜è®¤å€¼ï¼‰ï¼š**
```bash
# åˆ é™¤æŒ‡å®šé…ç½®é¡¹
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --delete-config "num.network.threads"

# æ‰¹é‡åˆ é™¤å¤šä¸ªé…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type topics \
  --entity-name user-events \
  --alter \
  --delete-config "retention.ms,compression.type"
```

**é…ç½®ç‰ˆæœ¬ç®¡ç†ç­–ç•¥ï¼š**
```bash
# 1. å¤‡ä»½å½“å‰é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --describe > broker-1-config-backup.txt

# 2. åº”ç”¨æ–°é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --add-config "num.network.threads=16"

# 3. å¦‚éœ€å›æ»šï¼Œåˆ é™¤é…ç½®æ¢å¤é»˜è®¤
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --delete-config "num.network.threads"
```

### 8.3 æ•…éšœå¤„ç†æµç¨‹


**é…ç½®æ•…éšœåº”æ€¥å¤„ç†ï¼š**

```
æ­¥éª¤1ï¼šé—®é¢˜è¯†åˆ«
â†’ ç›‘æ§å‘Šè­¦ â†’ æ€§èƒ½å¼‚å¸¸ â†’ é”™è¯¯æ—¥å¿—

æ­¥éª¤2ï¼šå¿«é€Ÿè¯Šæ–­  
â†’ æŸ¥çœ‹æœ€è¿‘é…ç½®å˜æ›´ â†’ å¯¹æ¯”é…ç½®å·®å¼‚

æ­¥éª¤3ï¼šç´§æ€¥å›æ»š
â†’ åˆ é™¤é—®é¢˜é…ç½® â†’ æ¢å¤åˆ°å·²çŸ¥è‰¯å¥½çŠ¶æ€

æ­¥éª¤4ï¼šæ ¹å› åˆ†æ
â†’ åˆ†æé…ç½®å½±å“ â†’ åˆ¶å®šæ­£ç¡®é…ç½®æ–¹æ¡ˆ
```

---

## 9. ğŸ“Š é…ç½®ç›‘æ§ä¸æœ€ä½³å®è·µ


### 9.1 é…ç½®å˜æ›´ç›‘æ§


**ç›‘æ§é…ç½®å˜æ›´çš„é‡è¦æ€§ï¼š**
- è·Ÿè¸ªé…ç½®å†å²å˜åŒ–
- å¿«é€Ÿå®šä½æ€§èƒ½é—®é¢˜æ ¹å›   
- ç¡®ä¿é…ç½®åˆè§„æ€§

**é…ç½®å˜æ›´æ—¥å¿—ç¤ºä¾‹ï¼š**
```bash
# æŸ¥çœ‹é…ç½®å˜æ›´å†å²ï¼ˆä»ZooKeeperè·¯å¾„ï¼‰
kafka-log-dirs.sh \
  --bootstrap-server localhost:9092 \
  --describe \
  --json | jq '.configs'
```

### 9.2 é…ç½®ç®¡ç†æœ€ä½³å®è·µ


**ğŸ¯ é…ç½®ç®¡ç†é»„é‡‘åŸåˆ™ï¼š**

| åŸåˆ™ | **å…·ä½“è¦æ±‚** | **æ‰§è¡Œæ–¹æ³•** |
|------|------------|-------------|
| ğŸ“ **å˜æ›´è®°å½•** | `æ¯æ¬¡é…ç½®å˜æ›´éƒ½è¦è®°å½•` | `ç»´æŠ¤é…ç½®å˜æ›´æ—¥å¿—` |
| ğŸ§ª **æµ‹è¯•éªŒè¯** | `å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯` | `ç”Ÿäº§å‰å……åˆ†æµ‹è¯•` |
| ğŸ”„ **æ¸è¿›å‘å¸ƒ** | `é€æ­¥åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ` | `å…ˆå•èŠ‚ç‚¹å†æ‰©å±•` |
| ğŸ“Š **ç›‘æ§è·Ÿè¸ª** | `å®æ—¶ç›‘æ§é…ç½®æ•ˆæœ` | `è®¾ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦` |
| ğŸ”’ **æƒé™æ§åˆ¶** | `ä¸¥æ ¼æ§åˆ¶é…ç½®æƒé™` | `åªæœ‰è¿ç»´äººå‘˜å¯ä¿®æ”¹` |
| ğŸ’¾ **å¤‡ä»½ç­–ç•¥** | `é…ç½®å˜æ›´å‰å¤‡ä»½` | `è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬` |

### 9.3 é…ç½®ä¼˜åŒ–å»ºè®®


**ğŸš€ æ€§èƒ½ä¼˜åŒ–é…ç½®ç»„åˆï¼š**

```bash
# é«˜ååé‡åœºæ™¯é…ç½®æ¨¡æ¿
# Brokerçº§é…ç½®
num.network.threads=8
num.io.threads=16
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400

# Topicçº§é…ç½®  
compression.type=lz4
batch.size=65536
linger.ms=100
segment.ms=86400000
```

**ğŸ”§ æ•…éšœæ¢å¤é…ç½®æ¨¡æ¿ï¼š**

```bash
# å¿«é€Ÿæ¢å¤é»˜è®¤é…ç½®
kafka-configs.sh \
  --bootstrap-server localhost:9092 \
  --entity-type brokers \
  --entity-name 1 \
  --alter \
  --delete-config "num.network.threads,num.io.threads,socket.send.buffer.bytes"
```

### 9.4 è‡ªåŠ¨åŒ–é…ç½®ç®¡ç†


**é…ç½®ç®¡ç†è„šæœ¬ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash
# Kafkaé…ç½®ç®¡ç†è„šæœ¬

KAFKA_HOME="/opt/kafka"
BOOTSTRAP_SERVER="localhost:9092"

# é…ç½®å¤‡ä»½å‡½æ•°
backup_config() {
    local entity_type=$1
    local entity_name=$2
    local backup_file="config-backup-$(date +%Y%m%d-%H%M%S).txt"
    
    $KAFKA_HOME/bin/kafka-configs.sh \
        --bootstrap-server $BOOTSTRAP_SERVER \
        --entity-type $entity_type \
        --entity-name $entity_name \
        --describe > $backup_file
    
    echo "é…ç½®å·²å¤‡ä»½åˆ°: $backup_file"
}

# é…ç½®æ›´æ–°å‡½æ•°
update_config() {
    local entity_type=$1
    local entity_name=$2
    local config_params=$3
    
    # å…ˆå¤‡ä»½
    backup_config $entity_type $entity_name
    
    # å†æ›´æ–°
    $KAFKA_HOME/bin/kafka-configs.sh \
        --bootstrap-server $BOOTSTRAP_SERVER \
        --entity-type $entity_type \
        --entity-name $entity_name \
        --alter \
        --add-config "$config_params"
    
    echo "é…ç½®æ›´æ–°å®Œæˆ"
}

# ä½¿ç”¨ç¤ºä¾‹
# update_config "brokers" "1" "num.network.threads=12"
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åŠ¨æ€é…ç½®ï¼šè¿è¡Œæ—¶æ— éœ€é‡å¯å°±èƒ½ä¿®æ”¹é…ç½®çš„èƒ½åŠ›
ğŸ”¸ é…ç½®å±‚çº§ï¼šé›†ç¾¤çº§ > Brokerçº§ > Topicçº§ > å®¢æˆ·ç«¯çº§
ğŸ”¸ é…ç½®å·¥å…·ï¼škafka-configs.shæ˜¯é…ç½®ç®¡ç†çš„æ ¸å¿ƒå·¥å…·
ğŸ”¸ é…ç½®éªŒè¯ï¼šæ‰€æœ‰é…ç½®å˜æ›´éƒ½ä¼šç»è¿‡éªŒè¯æœºåˆ¶
ğŸ”¸ é…ç½®å®‰å…¨ï¼šæ•æ„Ÿé…ç½®ä¼šè¢«åŠ å¯†å­˜å‚¨å’Œä¼ è¾“
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ åŠ¨æ€é…ç½®çš„ä»·å€¼**
```
ä¸šåŠ¡ä»·å€¼ï¼š
â€¢ é›¶åœæœºé…ç½®è°ƒæ•´ â†’ æå‡æœåŠ¡å¯ç”¨æ€§
â€¢ å¿«é€Ÿå“åº”æ€§èƒ½é—®é¢˜ â†’ é™ä½æ•…éšœå½±å“
â€¢ çµæ´»çš„è¿ç»´ç®¡ç† â†’ æé«˜è¿ç»´æ•ˆç‡

æŠ€æœ¯ä»·å€¼ï¼š  
â€¢ é…ç½®çƒ­æ›´æ–° â†’ é¿å…é‡å¯å¼€é”€
â€¢ ç²¾ç»†åŒ–ç®¡ç† â†’ ä¸åŒå®ä½“ç‹¬ç«‹é…ç½®
â€¢ å¯å›æ»šæœºåˆ¶ â†’ é™ä½å˜æ›´é£é™©
```

**ğŸ”¹ é…ç½®ç®¡ç†æœ€ä½³è·¯å¾„**
```
å­¦ä¹ è·¯å¾„ï¼š
1. ç†è§£é…ç½®å±‚çº§å’Œä¼˜å…ˆçº§
2. æŒæ¡åŸºç¡€å‘½ä»¤æ“ä½œ
3. å®è·µå¸¸ç”¨é…ç½®åœºæ™¯
4. å»ºç«‹ç›‘æ§å’Œå¤‡ä»½æœºåˆ¶
5. å½¢æˆæ ‡å‡†åŒ–è¿ç»´æµç¨‹
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ ä½¿ç”¨åœºæ™¯åˆ¤æ–­ï¼š**

```
é€‰æ‹©åŠ¨æ€é…ç½®çš„æ—¶æœºï¼š
âœ… éœ€è¦æ€§èƒ½è°ƒä¼˜æ—¶
âœ… å¤„ç†çªå‘æ•…éšœæ—¶  
âœ… ä¸šåŠ¡éœ€æ±‚å˜åŒ–æ—¶
âœ… å®‰å…¨é…ç½®æ›´æ–°æ—¶

é¿å…åŠ¨æ€é…ç½®çš„åœºæ™¯ï¼š
âŒ æ ¸å¿ƒæ¶æ„å˜æ›´
âŒ ä¸ç†Ÿæ‚‰çš„å¤æ‚é…ç½®
âŒ æ²¡æœ‰å¤‡ä»½å’Œç›‘æ§æ—¶
âŒ ç”Ÿäº§é«˜å³°æœŸæ“ä½œ
```

**ğŸ”§ æ“ä½œå®‰å…¨åŸåˆ™ï¼š**
```
é…ç½®å˜æ›´å®‰å…¨æ¸…å•ï¼š
â–¡ å˜æ›´å‰å¤‡ä»½å½“å‰é…ç½®
â–¡ åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯æ•ˆæœ  
â–¡ é€‰æ‹©ä¸šåŠ¡ä½å³°æœŸæ“ä½œ
â–¡ å‡†å¤‡å›æ»šé¢„æ¡ˆ
â–¡ è®¾ç½®ç›‘æ§å‘Šè­¦
â–¡ è®°å½•å˜æ›´æ—¥å¿—
```

### 10.4 è¿›é˜¶å­¦ä¹ æ–¹å‘


**ğŸ“š æ·±å…¥å­¦ä¹ å»ºè®®ï¼š**
- **é…ç½®è°ƒä¼˜**ï¼šæ·±å…¥ç†è§£å„å‚æ•°å¯¹æ€§èƒ½çš„å½±å“
- **ç›‘æ§é›†æˆ**ï¼šç»“åˆPrometheusã€Grafanaç­‰ç›‘æ§å·¥å…·
- **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šå¼€å‘é…ç½®ç®¡ç†å¹³å°å’Œå·¥å…·
- **æœ€ä½³å®è·µ**ï¼šå­¦ä¹ å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ç­–ç•¥

**ğŸ”‘ è®°å¿†è¦ç‚¹ï¼š**
- åŠ¨æ€é…ç½®è®©Kafkaè¿ç»´æ›´çµæ´»é«˜æ•ˆ
- é…ç½®æœ‰å±‚çº§ï¼Œè¶Šå…·ä½“ä¼˜å…ˆçº§è¶Šé«˜
- æ‰€æœ‰æ“ä½œéƒ½å¯å›æ»šï¼Œä½†é¢„é˜²æ¯”æ²»ç–—é‡è¦
- è‡ªåŠ¨åŒ–å’Œç›‘æ§æ˜¯è§„æ¨¡åŒ–è¿ç»´çš„åŸºç¡€

> ğŸ’¡ **ä¸€å¥è¯æ€»ç»“**ï¼š  
> KafkaåŠ¨æ€é…ç½®ç®¡ç†å°±åƒç»™ç³»ç»Ÿè£…ä¸Šäº†"çƒ­æ’æ‹”"èƒ½åŠ›ï¼Œè®©è¿ç»´å·¥ä½œä»"æ‰‹æœ¯"å˜æˆäº†"è°ƒéŸ³"ï¼Œç²¾å‡†ã€å®‰å…¨ã€é«˜æ•ˆã€‚