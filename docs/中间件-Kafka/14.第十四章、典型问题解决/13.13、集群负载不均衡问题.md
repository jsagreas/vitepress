---
title: 13ã€é›†ç¾¤è´Ÿè½½ä¸å‡è¡¡é—®é¢˜
---
## ğŸ“š ç›®å½•

1. [è´Ÿè½½ä¸å‡è¡¡é—®é¢˜æ¦‚è¿°](#1-è´Ÿè½½ä¸å‡è¡¡é—®é¢˜æ¦‚è¿°)
2. [è´Ÿè½½ä¸å‡è¡¡çš„è¡¨ç°å½¢å¼](#2-è´Ÿè½½ä¸å‡è¡¡çš„è¡¨ç°å½¢å¼)
3. [é—®é¢˜äº§ç”Ÿçš„æ ¹æœ¬åŸå› ](#3-é—®é¢˜äº§ç”Ÿçš„æ ¹æœ¬åŸå› )
4. [ç›‘æ§å’Œè¯Šæ–­æ–¹æ³•](#4-ç›‘æ§å’Œè¯Šæ–­æ–¹æ³•)
5. [è§£å†³æ–¹æ¡ˆè¯¦è§£](#5-è§£å†³æ–¹æ¡ˆè¯¦è§£)
6. [é¢„é˜²å’Œä¼˜åŒ–ç­–ç•¥](#6-é¢„é˜²å’Œä¼˜åŒ–ç­–ç•¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ è´Ÿè½½ä¸å‡è¡¡é—®é¢˜æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Kafkaé›†ç¾¤è´Ÿè½½ä¸å‡è¡¡


**ğŸ”¸ é€šä¿—ç†è§£**
æƒ³è±¡ä¸€ä¸ªå¿«é€’åˆ†æ‹£ä¸­å¿ƒï¼Œç†æƒ³æƒ…å†µä¸‹æ¯ä¸ªå·¥ä½œå°çš„å·¥ä½œé‡åº”è¯¥å·®ä¸å¤šã€‚ä½†å®é™…ä¸Šå¯èƒ½å‡ºç°ï¼š
- æœ‰çš„å·¥ä½œå°å †æ»¡äº†åŒ…è£¹ï¼Œå·¥ä½œäººå‘˜å¿™å¾—å›¢å›¢è½¬
- æœ‰çš„å·¥ä½œå°å´å¾ˆç©ºé—²ï¼Œå·¥ä½œäººå‘˜æ²¡ä»€ä¹ˆäº‹åš
- è¿™å°±æ˜¯"è´Ÿè½½ä¸å‡è¡¡"

```
ç†æƒ³çš„Kafkaé›†ç¾¤ï¼š        å®é™…å¯èƒ½å‡ºç°çš„æƒ…å†µï¼š
    Broker1: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         Broker1: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    Broker2: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         Broker2: â–ˆâ–ˆâ–ˆ
    Broker3: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         Broker3: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    (è´Ÿè½½å‡è¡¡)                (è´Ÿè½½ä¸¥é‡ä¸å‡)
```

**ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ**
```
è´Ÿè½½ä¸å‡è¡¡æŒ‡çš„æ˜¯ï¼š
âœ… ä¸åŒBrokerä¹‹é—´çš„å·¥ä½œå‹åŠ›å·®å¼‚å¾ˆå¤§
âœ… æŸäº›Brokeræ‰¿æ‹…è¿‡å¤šè¯»å†™è¯·æ±‚
âœ… èµ„æºåˆ©ç”¨ç‡å‚å·®ä¸é½
âœ… é›†ç¾¤æ•´ä½“æ€§èƒ½å—åˆ°å½±å“
```

### 1.2 ä¸ºä»€ä¹ˆè´Ÿè½½å‡è¡¡å¾ˆé‡è¦


**ğŸ¯ å½±å“åˆ†æ**
```
è´Ÿè½½å‡è¡¡çš„é‡è¦æ€§ï¼š

æ€§èƒ½æ–¹é¢ï¼š
â€¢ é¿å…å•ç‚¹ç“¶é¢ˆï¼šé˜²æ­¢æŸä¸ªBrokeræˆä¸ºæ€§èƒ½ç“¶é¢ˆ
â€¢ æå‡ååé‡ï¼šæ‰€æœ‰æœºå™¨éƒ½èƒ½å……åˆ†å‘æŒ¥ä½œç”¨
â€¢ é™ä½å»¶è¿Ÿï¼šé¿å…çƒ­ç‚¹Brokerå“åº”ç¼“æ…¢

ç¨³å®šæ€§æ–¹é¢ï¼š
â€¢ å‡å°‘æ•…éšœé£é™©ï¼šé¿å…é«˜è´Ÿè½½Brokerå´©æºƒ
â€¢ æé«˜å¯ç”¨æ€§ï¼šè´Ÿè½½åˆ†æ•£åæ›´ç¨³å®š
â€¢ ä¾¿äºæ‰©å®¹ï¼šæ–°å¢èŠ‚ç‚¹èƒ½å¿«é€Ÿåˆ†æ‹…å‹åŠ›

è¿ç»´æ–¹é¢ï¼š
â€¢ èµ„æºåˆ©ç”¨æœ€å¤§åŒ–ï¼šæ¯å°æœºå™¨éƒ½ç‰©å°½å…¶ç”¨
â€¢ ç»´æŠ¤æˆæœ¬é™ä½ï¼šä¸éœ€è¦å•ç‹¬ä¼˜åŒ–çƒ­ç‚¹æœºå™¨
â€¢ ç›‘æ§é¢„è­¦ç®€åŒ–ï¼šæŒ‡æ ‡æ›´åŠ ç»Ÿä¸€
```

---

## 2. ğŸ“Š è´Ÿè½½ä¸å‡è¡¡çš„è¡¨ç°å½¢å¼


### 2.1 Brokerè´Ÿè½½åˆ†å¸ƒä¸å‡


**ğŸ”¸ CPUä½¿ç”¨ç‡å·®å¼‚**
```
å…¸å‹è¡¨ç°ï¼š
Broker-1: CPU 85%  â† é«˜è´Ÿè½½
Broker-2: CPU 25%  â† ä½è´Ÿè½½  
Broker-3: CPU 30%  â† ä½è´Ÿè½½

åˆ¤æ–­æ ‡å‡†ï¼š
â€¢ CPUä½¿ç”¨ç‡å·®å¼‚è¶…è¿‡30%
â€¢ æœ€é«˜å’Œæœ€ä½ä½¿ç”¨ç‡ç›¸å·®2å€ä»¥ä¸Š
â€¢ æŒç»­æ—¶é—´è¶…è¿‡1å°æ—¶
```

**ğŸ’¾ å†…å­˜ä½¿ç”¨ä¸å‡**
```
å†…å­˜è´Ÿè½½è¡¨ç°ï¼š
â€¢ é¡µé¢ç¼“å­˜å¤§å°å·®å¼‚å·¨å¤§
â€¢ JVMå †å†…å­˜ä½¿ç”¨ç‡ä¸ä¸€è‡´
â€¢ æ“ä½œç³»ç»Ÿå¯ç”¨å†…å­˜å·®è·æ˜æ˜¾

å½±å“ï¼š
â€¢ é«˜å†…å­˜Brokerï¼šå“åº”é€Ÿåº¦æ…¢ï¼ŒGCé¢‘ç¹
â€¢ ä½å†…å­˜Brokerï¼šèµ„æºæµªè´¹ï¼Œæ€§èƒ½æœªå……åˆ†åˆ©ç”¨
```

### 2.2 åˆ†åŒºLeaderåˆ†å¸ƒä¸å‡


**âš–ï¸ Leaderåˆ†å¸ƒé—®é¢˜**
```
æ­£å¸¸åˆ†å¸ƒï¼š                   å¼‚å¸¸åˆ†å¸ƒï¼š
Broker-1: 10ä¸ªLeader        Broker-1: 25ä¸ªLeader  â† è¿‡å¤š
Broker-2: 10ä¸ªLeader        Broker-2: 3ä¸ªLeader   â† è¿‡å°‘
Broker-3: 10ä¸ªLeader        Broker-3: 2ä¸ªLeader   â† è¿‡å°‘

é—®é¢˜ï¼š
â€¢ Leaderè´Ÿè´£æ‰€æœ‰è¯»å†™è¯·æ±‚
â€¢ Leaderè¿‡å¤šçš„Brokerå‹åŠ›å·¨å¤§
â€¢ å…¶ä»–Brokerèµ„æºé—²ç½®
```

**ğŸ“‹ æŸ¥çœ‹Leaderåˆ†å¸ƒçš„æ–¹æ³•**
```bash
# æŸ¥çœ‹Topicçš„åˆ†åŒºåˆ†å¸ƒ
kafka-topics.sh --bootstrap-server localhost:9092 \
  --describe --topic your-topic

# è¾“å‡ºç¤ºä¾‹ï¼š
Topic: user-events  Partition: 0  Leader: 1  Replicas: 1,2,3
Topic: user-events  Partition: 1  Leader: 1  Replicas: 2,3,1  â† Leaderéƒ½åœ¨Broker-1
Topic: user-events  Partition: 2  Leader: 1  Replicas: 3,1,2
```

### 2.3 ç£ç›˜ä½¿ç”¨ä¸å‡


**ğŸ’½ ç£ç›˜ç©ºé—´å·®å¼‚**
```
ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š
/kafka-logs-1: 850GB/1TB (85%)  â† æ¥è¿‘æ»¡è½½
/kafka-logs-2: 300GB/1TB (30%)  â† ä½¿ç”¨ç‡ä½
/kafka-logs-3: 250GB/1TB (25%)  â† ä½¿ç”¨ç‡ä½

åŸå› åˆ†æï¼š
â€¢ çƒ­é—¨Topicçš„åˆ†åŒºé›†ä¸­åœ¨æŸäº›Broker
â€¢ æ•°æ®ä¿ç•™ç­–ç•¥é…ç½®ä¸å½“
â€¢ åˆ†åŒºå‰¯æœ¬åˆ†å¸ƒä¸åˆç†
```

### 2.4 ç½‘ç»œæµé‡å€¾æ–œ


**ğŸŒ ç½‘ç»œè´Ÿè½½ä¸å‡**
```
ç½‘ç»œæµé‡ç›‘æ§ï¼š
Broker-1: å…¥æµé‡ 500MB/sï¼Œå‡ºæµé‡ 800MB/s  â† é«˜æµé‡
Broker-2: å…¥æµé‡ 100MB/sï¼Œå‡ºæµé‡ 150MB/s  â† ä½æµé‡
Broker-3: å…¥æµé‡ 80MB/sï¼Œå‡ºæµé‡ 120MB/s   â† ä½æµé‡

è¡¨ç°ï¼š
â€¢ ç½‘ç»œå¸¦å®½åˆ©ç”¨ç‡å·®å¼‚å·¨å¤§
â€¢ é«˜æµé‡Brokerå¯èƒ½å‡ºç°ç½‘ç»œæ‹¥å¡
â€¢ ä½æµé‡Brokerç½‘ç»œèµ„æºæµªè´¹
```

---

## 3. ğŸ” é—®é¢˜äº§ç”Ÿçš„æ ¹æœ¬åŸå› 


### 3.1 åˆ†åŒºåˆ†é…ç­–ç•¥é—®é¢˜


**ğŸ“ åˆ›å»ºTopicæ—¶çš„é—®é¢˜**
```
å¸¸è§é”™è¯¯åœºæ™¯ï¼š

æ‰‹åŠ¨æŒ‡å®šåˆ†åŒºåˆ†å¸ƒï¼š
â€¢ ç®¡ç†å‘˜æ‰‹åŠ¨æŒ‡å®šåˆ†åŒºå‰¯æœ¬ä½ç½®
â€¢ æ²¡æœ‰è€ƒè™‘è´Ÿè½½å‡è¡¡
â€¢ å¯¼è‡´åˆ†åŒºé›†ä¸­åœ¨å°‘æ•°Broker

é»˜è®¤åˆ†é…ç®—æ³•ç¼ºé™·ï¼š
â€¢ æ—©æœŸKafkaç‰ˆæœ¬åˆ†é…ç®—æ³•ç®€å•
â€¢ æ²¡æœ‰è€ƒè™‘Brokerçš„å®é™…è´Ÿè½½
â€¢ æ–°å¢Brokerååˆ†åŒºä¸ä¼šè‡ªåŠ¨è¿ç§»
```

**ğŸ¯ åˆ†åŒºåˆ†é…çš„å½±å“**
```
åˆ†åŒºåˆ†é…å¯¹è´Ÿè½½çš„å½±å“ï¼š

Producerå†™å…¥ï¼š
â€¢ æ•°æ®å†™å…¥åˆ†åŒºçš„Leader
â€¢ Leaderé›†ä¸­ â†’ å†™å…¥è´Ÿè½½é›†ä¸­

Consumerè¯»å–ï¼š
â€¢ é€šå¸¸ä»Leaderè¯»å–æ•°æ®
â€¢ Leaderé›†ä¸­ â†’ è¯»å–è´Ÿè½½é›†ä¸­

å‰¯æœ¬åŒæ­¥ï¼š
â€¢ Followerä»LeaderåŒæ­¥æ•°æ®
â€¢ Leaderå‹åŠ›è¿›ä¸€æ­¥å¢å¤§
```

### 3.2 Preferred Leaderé€‰ä¸¾é—®é¢˜


**ğŸ”„ Leaderé€‰ä¸¾æœºåˆ¶**
```
ä»€ä¹ˆæ˜¯Preferred Leaderï¼š
â€¢ æ¯ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ª"é¦–é€‰Leader"
â€¢ é€šå¸¸æ˜¯å‰¯æœ¬åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªBroker
â€¢ æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥ç”±Preferred Leaderæ‹…ä»»å®é™…Leader

é—®é¢˜åœºæ™¯ï¼š
åŸå§‹åˆ†åŒºï¼šReplicas: [1,2,3]  Preferred Leader: 1
Broker-1æ•…éšœåï¼šLeaderå˜ä¸º2
Broker-1æ¢å¤åï¼šLeaderä»ç„¶æ˜¯2  â† æ²¡æœ‰åˆ‡å›é¦–é€‰Leader
```

**âš ï¸ ä¸è¿›è¡ŒPreferred Leaderé€‰ä¸¾çš„åæœ**
```
é•¿æœŸå½±å“ï¼š
â€¢ Leaderåˆ†å¸ƒè¶Šæ¥è¶Šä¸å‡åŒ€
â€¢ æŸäº›Brokerè´Ÿè½½æŒç»­åé«˜
â€¢ é›†ç¾¤æ€§èƒ½é€æ¸ä¸‹é™
â€¢ æ•…éšœæ¢å¤åè´Ÿè½½ä¸ä¼šè‡ªåŠ¨å¹³è¡¡
```

### 3.3 åŠ¨æ€æ‰©å®¹åçš„é—®é¢˜


**ğŸ“ˆ é›†ç¾¤æ‰©å®¹å¯¼è‡´çš„ä¸å‡è¡¡**
```
æ‰©å®¹åœºæ™¯ï¼š
åŸæœ‰é›†ç¾¤ï¼š3ä¸ªBrokerï¼Œ30ä¸ªåˆ†åŒº
æ‰©å®¹åï¼š6ä¸ªBrokerï¼Œ30ä¸ªåˆ†åŒº

é—®é¢˜ï¼š
â€¢ æ–°å¢çš„3ä¸ªBrokeræ²¡æœ‰åˆ†åŒº
â€¢ åŸæœ‰3ä¸ªBrokerä»ç„¶æ‰¿æ‹…æ‰€æœ‰è´Ÿè½½
â€¢ æ–°Brokerå®Œå…¨é—²ç½®ï¼Œèµ„æºæµªè´¹

è§£å†³å‰ï¼š                è§£å†³åï¼š
Broker 1,2,3: é«˜è´Ÿè½½    Broker 1-6: è´Ÿè½½å‡åŒ€
Broker 4,5,6: æ— è´Ÿè½½    æ‰€æœ‰Brokeréƒ½æœ‰åˆ†åŒº
```

### 3.4 çƒ­ç‚¹æ•°æ®é—®é¢˜


**ğŸ”¥ æ•°æ®å€¾æ–œå¯¼è‡´çš„è´Ÿè½½ä¸å‡**
```
çƒ­ç‚¹Topicç¤ºä¾‹ï¼š
Topic: user-clicks
â€¢ æŸäº›ç”¨æˆ·æ´»è·ƒåº¦æé«˜
â€¢ å¯¹åº”åˆ†åŒºæ•°æ®é‡å·¨å¤§
â€¢ æ‰¿è½½è¿™äº›åˆ†åŒºçš„Brokerè´Ÿè½½å¾ˆé«˜

çƒ­ç‚¹æ—¶é—´æ®µï¼š
â€¢ ç”µå•†ä¿ƒé”€æœŸé—´è®¢å•æš´å¢
â€¢ ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—æ•°æ®æ¿€å¢
â€¢ æŸäº›åˆ†åŒºçŸ­æ—¶é—´å†…è´Ÿè½½æé«˜
```

---

## 4. ğŸ“Š ç›‘æ§å’Œè¯Šæ–­æ–¹æ³•


### 4.1 ç³»ç»Ÿèµ„æºç›‘æ§


**ğŸ–¥ï¸ åŸºç¡€èµ„æºæŒ‡æ ‡**
```bash
# CPUä½¿ç”¨ç‡ç›‘æ§
top -p $(pgrep -f kafka)

# å†…å­˜ä½¿ç”¨æƒ…å†µ
free -h
cat /proc/meminfo | grep -E "(MemTotal|MemFree|Cached)"

# ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h /kafka-logs-*
iostat -x 1 5  # ç£ç›˜IOç»Ÿè®¡

# ç½‘ç»œæµé‡ç›‘æ§
iftop -i eth0  # å®æ—¶ç½‘ç»œæµé‡
```

**ğŸ“ˆ å…³é”®æŒ‡æ ‡è§£è¯»**
```
CPUè´Ÿè½½åˆ¤æ–­ï¼š
â€¢ å•æ ¸CPUä½¿ç”¨ç‡ > 80%ï¼šé«˜è´Ÿè½½
â€¢ Load Average > CPUæ ¸å¿ƒæ•°ï¼šç³»ç»Ÿè¿‡è½½
â€¢ åŒæ—¶å…³æ³¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€CPUä½¿ç”¨ç‡

å†…å­˜ä½¿ç”¨åˆ¤æ–­ï¼š
â€¢ JVMå †å†…å­˜ä½¿ç”¨ç‡ > 80%ï¼šéœ€è¦å…³æ³¨
â€¢ é¡µé¢ç¼“å­˜å¤§å°å·®å¼‚ > 50%ï¼šå¯èƒ½ä¸å‡è¡¡
â€¢ Swapä½¿ç”¨ > 0ï¼šå†…å­˜ä¸è¶³

ç£ç›˜IOåˆ¤æ–­ï¼š
â€¢ ç£ç›˜ä½¿ç”¨ç‡ > 85%ï¼šæ¥è¿‘å®¹é‡ä¸Šé™
â€¢ IOç­‰å¾…æ—¶é—´ > 10msï¼šå¯èƒ½å­˜åœ¨ç“¶é¢ˆ
â€¢ è¯»å†™IOPSå·®å¼‚å·¨å¤§ï¼šè´Ÿè½½ä¸å‡
```

### 4.2 Kafkaä¸“ç”¨ç›‘æ§


**ğŸ“Š JMXæŒ‡æ ‡ç›‘æ§**
```bash
# é‡è¦çš„JMXæŒ‡æ ‡
BytesInPerSec          # å…¥æµé‡é€Ÿç‡
BytesOutPerSec         # å‡ºæµé‡é€Ÿç‡
MessagesInPerSec       # æ¶ˆæ¯å…¥é€Ÿç‡
RequestsPerSec         # è¯·æ±‚é€Ÿç‡
LeaderCount            # Leaderæ•°é‡
PartitionCount         # åˆ†åŒºæ•°é‡
UnderReplicatedPartitions  # å‰¯æœ¬ä¸è¶³çš„åˆ†åŒº
```

**ğŸ”§ ä½¿ç”¨Kafka ManageræŸ¥çœ‹**
```
Kafka Managerç•Œé¢ä¿¡æ¯ï¼š
â€¢ Brokeråˆ—è¡¨åŠè´Ÿè½½æƒ…å†µ
â€¢ Topicåˆ†åŒºåˆ†å¸ƒ
â€¢ Leaderåˆ†å¸ƒç»Ÿè®¡
â€¢ æ¶ˆè´¹è€…ç»„çŠ¶æ€
â€¢ é›†ç¾¤å¥åº·åº¦è¯„ä¼°

é‡ç‚¹å…³æ³¨ï¼š
â€¢ Brokerä¹‹é—´çš„Leaderæ•°é‡å·®å¼‚
â€¢ åˆ†åŒºå¤§å°åˆ†å¸ƒæ˜¯å¦å‡åŒ€
â€¢ ç½‘ç»œIOæ˜¯å¦å¹³è¡¡
```

### 4.3 è´Ÿè½½å‡è¡¡è¯„ä¼°


**ğŸ“ è´Ÿè½½å‡è¡¡åº¦é‡æ ‡å‡†**
```
é‡åŒ–è¯„ä¼°æ–¹æ³•ï¼š

CPUä½¿ç”¨ç‡æ ‡å‡†å·®ï¼š
â€¢ è®¡ç®—æ‰€æœ‰Brokerçš„CPUä½¿ç”¨ç‡
â€¢ è®¡ç®—æ ‡å‡†å·®ï¼Œæ ‡å‡†å·®è¶Šå°è¶Šå‡è¡¡
â€¢ æ ‡å‡†å·® < 10%ï¼šè¾ƒå¥½
â€¢ æ ‡å‡†å·® > 30%ï¼šéœ€è¦è°ƒæ•´

Leaderåˆ†å¸ƒè¯„ä¼°ï¼š
ç†æƒ³Leaderæ•° = æ€»åˆ†åŒºæ•° / Brokeræ•°é‡
å®é™…åå·® = |å®é™…Leaderæ•° - ç†æƒ³Leaderæ•°|
åå·®ç‡ = åå·® / ç†æƒ³Leaderæ•° * 100%
â€¢ åå·®ç‡ < 20%ï¼šå¯æ¥å—
â€¢ åå·®ç‡ > 50%ï¼šä¸¥é‡ä¸å‡è¡¡
```

**ğŸ¯ å…³é”®è¯„ä¼°æŒ‡æ ‡**
```
ç»¼åˆè¯„ä¼°è¡¨ï¼š

æŒ‡æ ‡ç±»å‹          æ­£å¸¸èŒƒå›´        å…³æ³¨é˜ˆå€¼        ä¸¥é‡é˜ˆå€¼
CPUä½¿ç”¨ç‡å·®å¼‚     < 20%          20-40%         > 40%
å†…å­˜ä½¿ç”¨ç‡å·®å¼‚    < 25%          25-45%         > 45%
Leaderåˆ†å¸ƒåå·®    < 20%          20-50%         > 50%
ç£ç›˜ä½¿ç”¨å·®å¼‚      < 30%          30-60%         > 60%
ç½‘ç»œæµé‡å·®å¼‚      < 35%          35-70%         > 70%
```

---

## 5. ğŸ› ï¸ è§£å†³æ–¹æ¡ˆè¯¦è§£


### 5.1 åˆ†åŒºé‡åˆ†é…å·¥å…·


**ğŸ”§ kafka-reassign-partitions.sh å·¥å…·**
```bash
# 1. ç”Ÿæˆé‡åˆ†é…æ–¹æ¡ˆ
kafka-reassign-partitions.sh \
  --bootstrap-server localhost:9092 \
  --topics-to-move-json-file topics.json \
  --broker-list "1,2,3,4,5,6" \
  --generate

# topics.json æ–‡ä»¶å†…å®¹
{
  "topics": [
    {"topic": "user-events"},
    {"topic": "order-logs"}
  ],
  "version": 1
}
```

**ğŸ“‹ é‡åˆ†é…æ­¥éª¤è¯¦è§£**
```bash
# 2. ä¿å­˜ç”Ÿæˆçš„é‡åˆ†é…è®¡åˆ’åˆ°æ–‡ä»¶
# å·¥å…·ä¼šè¾“å‡ºå½“å‰åˆ†é…å’Œå»ºè®®åˆ†é…ä¸¤ä¸ªJSON

# 3. æ‰§è¡Œé‡åˆ†é…
kafka-reassign-partitions.sh \
  --bootstrap-server localhost:9092 \
  --reassignment-json-file reassignment.json \
  --execute

# 4. ç›‘æ§é‡åˆ†é…è¿›åº¦
kafka-reassign-partitions.sh \
  --bootstrap-server localhost:9092 \
  --reassignment-json-file reassignment.json \
  --verify
```

**âš ï¸ é‡åˆ†é…æ³¨æ„äº‹é¡¹**
```
æ‰§è¡Œå‰å‡†å¤‡ï¼š
â€¢ åœ¨ä½å³°æœŸæ‰§è¡Œï¼Œé¿å…å½±å“ä¸šåŠ¡
â€¢ å¤‡ä»½å½“å‰åˆ†åŒºåˆ†é…æ–¹æ¡ˆ
â€¢ è¯„ä¼°é‡åˆ†é…å¯¹æ€§èƒ½çš„å½±å“
â€¢ å‡†å¤‡å›æ»šæ–¹æ¡ˆ

æ‰§è¡Œè¿‡ç¨‹ç›‘æ§ï¼š
â€¢ ç›‘æ§ç½‘ç»œå¸¦å®½ä½¿ç”¨æƒ…å†µ
â€¢ å…³æ³¨ç£ç›˜IOè´Ÿè½½
â€¢ æ£€æŸ¥é‡åˆ†é…è¿›åº¦
â€¢ è§‚å¯Ÿä¸šåŠ¡å½±å“

å®‰å…¨æªæ–½ï¼š
â€¢ å¯ä»¥é€šè¿‡ --throttle å‚æ•°é™åˆ¶å¸¦å®½
â€¢ å¿…è¦æ—¶å¯ä»¥å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„é‡åˆ†é…
â€¢ åˆ†æ‰¹æ¬¡è¿›è¡Œï¼Œé™ä½é£é™©
```

### 5.2 Preferred Leaderé€‰ä¸¾


**ğŸ‘‘ è‡ªåŠ¨Leaderå¹³è¡¡**
```bash
# æ‰‹åŠ¨è§¦å‘Preferred Leaderé€‰ä¸¾
kafka-preferred-replica-election.sh \
  --bootstrap-server localhost:9092 \
  --all-topic-partitions

# é’ˆå¯¹ç‰¹å®šåˆ†åŒº
kafka-preferred-replica-election.sh \
  --bootstrap-server localhost:9092 \
  --path-to-json-file election.json
```

**ğŸ”„ é…ç½®è‡ªåŠ¨Leaderå¹³è¡¡**
```properties
# server.properties é…ç½®
auto.leader.rebalance.enable=true
leader.imbalance.per.broker.percentage=10
leader.imbalance.check.interval.seconds=300

è§£é‡Šï¼š
â€¢ auto.leader.rebalance.enableï¼šå¼€å¯è‡ªåŠ¨Leaderå¹³è¡¡
â€¢ leader.imbalance.per.broker.percentageï¼šä¸å¹³è¡¡é˜ˆå€¼10%
â€¢ leader.imbalance.check.interval.secondsï¼šæ£€æŸ¥é—´éš”5åˆ†é’Ÿ
```

**ğŸ“Š Leaderå¹³è¡¡æ•ˆæœéªŒè¯**
```bash
# æŸ¥çœ‹Leaderåˆ†å¸ƒ
kafka-topics.sh --bootstrap-server localhost:9092 \
  --describe | grep "Leader:" | awk '{print $6}' | sort | uniq -c

# è¾“å‡ºç¤ºä¾‹ï¼š
# 15 1    â† Broker-1æœ‰15ä¸ªLeader
# 14 2    â† Broker-2æœ‰14ä¸ªLeader  
# 16 3    â† Broker-3æœ‰16ä¸ªLeader
# åˆ†å¸ƒç›¸å¯¹å‡åŒ€
```

### 5.3 åŠ¨æ€è´Ÿè½½è°ƒæ•´


**ğŸ“ˆ æ–°å¢Brokeråçš„åˆ†åŒºè¿ç§»**
```bash
# æ‰©å®¹åçš„åˆ†åŒºé‡åˆ†é…ç¤ºä¾‹
# å‡è®¾ä»3ä¸ªBrokeræ‰©å®¹åˆ°6ä¸ªBroker

# 1. ç”Ÿæˆæ–°çš„åˆ†é…æ–¹æ¡ˆ
kafka-reassign-partitions.sh \
  --bootstrap-server localhost:9092 \
  --topics-to-move-json-file all-topics.json \
  --broker-list "1,2,3,4,5,6" \
  --generate > reassignment-plan.json

# 2. åˆ†æç”Ÿæˆçš„æ–¹æ¡ˆ
# ç¡®ä¿æ–°Brokerè·å¾—åˆç†çš„åˆ†åŒºåˆ†é…

# 3. åˆ†æ‰¹æ‰§è¡Œè¿ç§»
# å¯ä»¥å°†å¤§Topicæ‹†åˆ†æˆå¤šä¸ªæ‰¹æ¬¡è¿ç§»
```

**ğŸ¯ æ™ºèƒ½åˆ†åŒºåˆ†é…ç­–ç•¥**
```
åˆ†åŒºåˆ†é…æœ€ä½³å®è·µï¼š

å‰¯æœ¬åˆ†å¸ƒåŸåˆ™ï¼š
â€¢ å‰¯æœ¬åˆ†æ•£åœ¨ä¸åŒæœºæ¶çš„Brokerä¸Š
â€¢ é¿å…å°†æ‰€æœ‰å‰¯æœ¬æ”¾åœ¨ç›¸åŒæ•…éšœåŸŸ
â€¢ Leaderå’ŒFolloweråˆ†å¸ƒè¦å‡åŒ€

åˆ†åŒºæ•°é‡è§„åˆ’ï¼š
â€¢ åˆ†åŒºæ•°åº”è¯¥æ˜¯Brokeræ•°çš„æ•´æ•°å€
â€¢ è€ƒè™‘æœªæ¥æ‰©å®¹ï¼Œé¢„ç•™ä¸€å®šç©ºé—´
â€¢ çƒ­é—¨Topicå¯ä»¥é€‚å½“å¢åŠ åˆ†åŒºæ•°

è´Ÿè½½è¯„ä¼°ï¼š
â€¢ æ ¹æ®å†å²æ•°æ®é¢„æµ‹åˆ†åŒºè´Ÿè½½
â€¢ è€ƒè™‘Topicçš„è¯»å†™ç‰¹æ€§
â€¢ å¹³è¡¡CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œè´Ÿè½½
```

### 5.4 å®æ—¶è´Ÿè½½ç›‘æ§å’Œè‡ªåŠ¨è°ƒæ•´


**ğŸ“Š ç›‘æ§ç³»ç»Ÿé›†æˆ**
```bash
# ä½¿ç”¨Prometheusç›‘æ§KafkaæŒ‡æ ‡
# é…ç½®å‘Šè­¦è§„åˆ™

# CPUä½¿ç”¨ç‡ä¸å‡è¡¡å‘Šè­¦
- alert: KafkaBrokerCPUImbalance
  expr: |
    (
      max(kafka_server_broker_topic_metrics_bytes_in_per_sec_rate) by (instance) -
      min(kafka_server_broker_topic_metrics_bytes_in_per_sec_rate) by (instance)
    ) / avg(kafka_server_broker_topic_metrics_bytes_in_per_sec_rate) > 0.5
  for: 10m
  labels:
    severity: warning
  annotations:
    summary: "Kafka broker load imbalance detected"
```

**ğŸ¤– è‡ªåŠ¨åŒ–è´Ÿè½½å‡è¡¡è„šæœ¬**
```bash
#!/bin/bash
# è‡ªåŠ¨è´Ÿè½½å‡è¡¡è„šæœ¬ç¤ºä¾‹

# æ£€æŸ¥Leaderåˆ†å¸ƒ
check_leader_balance() {
    leaders=$(kafka-topics.sh --bootstrap-server $KAFKA_BROKERS \
        --describe | grep "Leader:" | awk '{print $6}' | sort | uniq -c)
    
    # è®¡ç®—æœ€å¤§æœ€å°å·®å¼‚
    max_leaders=$(echo "$leaders" | awk '{print $1}' | sort -n | tail -1)
    min_leaders=$(echo "$leaders" | awk '{print $1}' | sort -n | head -1)
    
    imbalance_ratio=$(echo "scale=2; ($max_leaders - $min_leaders) / $min_leaders" | bc)
    
    if (( $(echo "$imbalance_ratio > 0.3" | bc -l) )); then
        echo "Leader imbalance detected: $imbalance_ratio"
        trigger_rebalance
    fi
}

# è§¦å‘é‡å¹³è¡¡
trigger_rebalance() {
    echo "Triggering preferred leader election..."
    kafka-preferred-replica-election.sh \
        --bootstrap-server $KAFKA_BROKERS \
        --all-topic-partitions
}
```

---

## 6. ğŸ›¡ï¸ é¢„é˜²å’Œä¼˜åŒ–ç­–ç•¥


### 6.1 å®¹é‡è§„åˆ’è®¾è®¡


**ğŸ“Š é›†ç¾¤å®¹é‡è§„åˆ’**
```
å®¹é‡è§„åˆ’æ ¸å¿ƒè¦ç´ ï¼š

æ•°æ®é‡è§„åˆ’ï¼š
â€¢ æ¯æ—¥æ•°æ®äº§ç”Ÿé‡
â€¢ æ•°æ®ä¿ç•™å‘¨æœŸ
â€¢ å‰¯æœ¬å› å­è®¾ç½®
â€¢ å‹ç¼©æ¯”ä¼°ç®—

æ€§èƒ½éœ€æ±‚è§„åˆ’ï¼š
â€¢ å³°å€¼ååé‡è¦æ±‚
â€¢ å»¶è¿Ÿè¦æ±‚
â€¢ å¹¶å‘è¿æ¥æ•°
â€¢ å¯ç”¨æ€§è¦æ±‚

ç¡¬ä»¶èµ„æºè§„åˆ’ï¼š
â€¢ CPUæ ¸å¿ƒæ•°å’Œä¸»é¢‘
â€¢ å†…å­˜å®¹é‡åˆ†é…
â€¢ ç£ç›˜ç±»å‹å’Œå®¹é‡
â€¢ ç½‘ç»œå¸¦å®½è¦æ±‚
```

**ğŸ¯ Brokeræ•°é‡å’Œåˆ†åŒºæ•°è§„åˆ’**
```
åˆ†åŒºæ•°é‡è®¡ç®—å…¬å¼ï¼š

ç›®æ ‡ååé‡è®¡ç®—ï¼š
åˆ†åŒºæ•° = max(
    ç›®æ ‡ååé‡ / å•åˆ†åŒºProducerååé‡,
    ç›®æ ‡ååé‡ / å•åˆ†åŒºConsumerååé‡
)

å®é™…æ¡ˆä¾‹ï¼š
â€¢ ç›®æ ‡ååé‡ï¼š1000 MB/s
â€¢ å•åˆ†åŒºProducerååé‡ï¼š50 MB/s
â€¢ å•åˆ†åŒºConsumerååé‡ï¼š100 MB/s
â€¢ éœ€è¦åˆ†åŒºæ•°ï¼šmax(1000/50, 1000/100) = 20ä¸ªåˆ†åŒº

Brokeræ•°é‡è®¡ç®—ï¼š
â€¢ è‡³å°‘éœ€è¦ï¼šå‰¯æœ¬å› å­æ•°é‡çš„Broker
â€¢ æ¨èé…ç½®ï¼šåˆ†åŒºæ•° / æœŸæœ›çš„æ¯Brokeråˆ†åŒºæ•°
â€¢ è€ƒè™‘æ•…éšœå®¹å¿ï¼šé¢å¤–å¢åŠ 1-2ä¸ªBroker
```

### 6.2 è´Ÿè½½å‡è¡¡ç­–ç•¥


**âš–ï¸ åˆ†åŒºåˆ†é…æœ€ä½³å®è·µ**
```
åˆ›å»ºTopicæ—¶çš„æœ€ä½³å®è·µï¼š

ä½¿ç”¨è½®è¯¢åˆ†é…ï¼š
kafka-topics.sh --create \
  --bootstrap-server localhost:9092 \
  --topic user-events \
  --partitions 24 \
  --replication-factor 3
  # è®©Kafkaè‡ªåŠ¨è¿›è¡Œè½®è¯¢åˆ†é…

é¿å…æ‰‹åŠ¨æŒ‡å®šï¼š
# ä¸æ¨èæ‰‹åŠ¨æŒ‡å®šåˆ†åŒºåˆ†é…
--replica-assignment 1:2:3,1:2:3,1:2:3

æœºæ¶æ„ŸçŸ¥é…ç½®ï¼š
# åœ¨server.propertiesä¸­é…ç½®
broker.rack=rack1
# ç¡®ä¿å‰¯æœ¬åˆ†å¸ƒåœ¨ä¸åŒæœºæ¶
```

**ğŸ”„ å®šæœŸè´Ÿè½½æ£€æŸ¥**
```bash
# å®šæœŸæ‰§è¡Œçš„è´Ÿè½½æ£€æŸ¥è„šæœ¬
#!/bin/bash

# 1. æ£€æŸ¥CPUè´Ÿè½½å‡è¡¡åº¦
check_cpu_balance() {
    # è·å–æ‰€æœ‰Brokerçš„CPUä½¿ç”¨ç‡
    # è®¡ç®—æ ‡å‡†å·®
    # è¶…è¿‡é˜ˆå€¼åˆ™å‘Šè­¦
}

# 2. æ£€æŸ¥Leaderåˆ†å¸ƒ
check_leader_distribution() {
    # ç»Ÿè®¡æ¯ä¸ªBrokerçš„Leaderæ•°é‡
    # è®¡ç®—åˆ†å¸ƒå·®å¼‚
    # å¿…è¦æ—¶è§¦å‘preferred leader election
}

# 3. æ£€æŸ¥ç£ç›˜ä½¿ç”¨
check_disk_usage() {
    # æ£€æŸ¥ç£ç›˜ä½¿ç”¨ç‡å·®å¼‚
    # é¢„è­¦æ¥è¿‘å®¹é‡ä¸Šé™çš„åˆ†åŒº
    # å»ºè®®åˆ†åŒºè¿ç§»æ–¹æ¡ˆ
}

# è®¾ç½®ä¸ºå®šæ—¶ä»»åŠ¡
# 0 */6 * * * /path/to/kafka_load_check.sh
```

### 6.3 æ‰©å®¹ç¼©å®¹ç­–ç•¥


**ğŸ“ˆ å¹³æ»‘æ‰©å®¹æµç¨‹**
```
æ‰©å®¹æ ‡å‡†æ“ä½œæµç¨‹ï¼š

1. è¯„ä¼°æ‰©å®¹éœ€æ±‚ï¼š
   â€¢ ç›‘æ§å½“å‰èµ„æºä½¿ç”¨ç‡
   â€¢ é¢„æµ‹æœªæ¥å¢é•¿è¶‹åŠ¿
   â€¢ ç¡®å®šæ‰©å®¹ç›®æ ‡å®¹é‡

2. å‡†å¤‡æ–°Brokerï¼š
   â€¢ å®‰è£…é…ç½®Kafka
   â€¢ è®¾ç½®æ­£ç¡®çš„broker.id
   â€¢ é…ç½®ç›¸åŒçš„é›†ç¾¤å‚æ•°

3. åŠ å…¥é›†ç¾¤ï¼š
   â€¢ å¯åŠ¨æ–°Broker
   â€¢ éªŒè¯é›†ç¾¤çŠ¶æ€
   â€¢ ç¡®è®¤æ–°Brokeræ­£å¸¸å·¥ä½œ

4. æ•°æ®è¿ç§»ï¼š
   â€¢ ç”Ÿæˆåˆ†åŒºé‡åˆ†é…æ–¹æ¡ˆ
   â€¢ åˆ†æ‰¹æ¬¡æ‰§è¡Œè¿ç§»
   â€¢ ç›‘æ§è¿ç§»è¿›åº¦å’Œæ€§èƒ½å½±å“

5. éªŒè¯ç»“æœï¼š
   â€¢ æ£€æŸ¥è´Ÿè½½åˆ†å¸ƒ
   â€¢ éªŒè¯ä¸šåŠ¡åŠŸèƒ½æ­£å¸¸
   â€¢ ç›‘æ§æ€§èƒ½æŒ‡æ ‡
```

**ğŸ“‰ å®‰å…¨ç¼©å®¹æµç¨‹**
```
ç¼©å®¹æ³¨æ„äº‹é¡¹ï¼š

ç¼©å®¹å‰å‡†å¤‡ï¼š
â€¢ ç¡®ä¿è¦åˆ é™¤çš„Brokerä¸Šæ²¡æœ‰å”¯ä¸€å‰¯æœ¬
â€¢ å°†æ‰€æœ‰åˆ†åŒºè¿ç§»åˆ°ä¿ç•™çš„Broker
â€¢ åœæ­¢å‘å¾…åˆ é™¤Brokerå‘é€æ–°æ•°æ®

è¿ç§»æ­¥éª¤ï¼š
1. ç”Ÿæˆæ’é™¤å¾…åˆ é™¤Brokerçš„é‡åˆ†é…æ–¹æ¡ˆ
2. æ‰§è¡Œåˆ†åŒºè¿ç§»
3. ç­‰å¾…è¿ç§»å®Œæˆ
4. éªŒè¯æ•°æ®å®Œæ•´æ€§
5. å…³é—­å¹¶ç§»é™¤Broker

éªŒè¯æ£€æŸ¥ï¼š
â€¢ ç¡®è®¤æ‰€æœ‰åˆ†åŒºéƒ½æœ‰è¶³å¤Ÿå‰¯æœ¬
â€¢ æ£€æŸ¥Topicå¯è¯»å†™æ­£å¸¸
â€¢ ç›‘æ§å‰©ä½™Brokerè´Ÿè½½æƒ…å†µ
```

### 6.4 è‡ªåŠ¨åŒ–è¿ç»´


**ğŸ¤– è‡ªåŠ¨åŒ–è´Ÿè½½ç®¡ç†**
```python
# Pythonè‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹
import time
import json
import subprocess
from kafka.admin import KafkaAdminClient

class KafkaLoadBalancer:
    def __init__(self, bootstrap_servers):
        self.admin_client = KafkaAdminClient(
            bootstrap_servers=bootstrap_servers
        )
    
    def check_leader_balance(self):
        """æ£€æŸ¥Leaderåˆ†å¸ƒå‡è¡¡åº¦"""
        # è·å–æ‰€æœ‰Topicåˆ†åŒºä¿¡æ¯
        topics_metadata = self.admin_client.describe_topics()
        
        leader_count = {}
        for topic, metadata in topics_metadata.items():
            for partition in metadata.partitions:
                leader = partition.leader
                leader_count[leader] = leader_count.get(leader, 0) + 1
        
        # è®¡ç®—ä¸å¹³è¡¡åº¦
        max_leaders = max(leader_count.values())
        min_leaders = min(leader_count.values())
        imbalance_ratio = (max_leaders - min_leaders) / min_leaders
        
        return imbalance_ratio > 0.3  # 30%é˜ˆå€¼
    
    def trigger_preferred_leader_election(self):
        """è§¦å‘Preferred Leaderé€‰ä¸¾"""
        cmd = [
            "kafka-preferred-replica-election.sh",
            "--bootstrap-server", self.bootstrap_servers,
            "--all-topic-partitions"
        ]
        result = subprocess.run(cmd, capture_output=True, text=True)
        return result.returncode == 0
    
    def auto_balance(self):
        """è‡ªåŠ¨è´Ÿè½½å‡è¡¡"""
        if self.check_leader_balance():
            print("Leader imbalance detected, triggering rebalance...")
            success = self.trigger_preferred_leader_election()
            if success:
                print("Preferred leader election completed")
            else:
                print("Preferred leader election failed")

# ä½¿ç”¨ç¤ºä¾‹
balancer = KafkaLoadBalancer("localhost:9092")
balancer.auto_balance()
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 è´Ÿè½½ä¸å‡è¡¡çš„æ ¸å¿ƒé—®é¢˜


```
ğŸ”¸ æ ¹æœ¬åŸå› ï¼šåˆ†åŒºå’ŒLeaderåˆ†å¸ƒä¸åˆç†
ğŸ”¸ ä¸»è¦è¡¨ç°ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨ç‡å·®å¼‚å·¨å¤§
ğŸ”¸ å½±å“èŒƒå›´ï¼šé›†ç¾¤æ€§èƒ½ã€ç¨³å®šæ€§ã€èµ„æºåˆ©ç”¨ç‡
ğŸ”¸ æ£€æµ‹æ–¹æ³•ï¼šç³»ç»Ÿç›‘æ§ + Kafkaä¸“ç”¨æŒ‡æ ‡
ğŸ”¸ è§£å†³å·¥å…·ï¼šåˆ†åŒºé‡åˆ†é… + Preferred Leaderé€‰ä¸¾
```

### 7.2 å…³é”®è¯Šæ–­æŒ‡æ ‡


**ğŸ“Š ç›‘æ§é‡ç‚¹**
```
ç³»ç»Ÿå±‚é¢ï¼š
â€¢ CPUä½¿ç”¨ç‡å·®å¼‚ < 30%
â€¢ å†…å­˜ä½¿ç”¨ç‡å·®å¼‚ < 25%  
â€¢ ç£ç›˜ä½¿ç”¨ç‡å·®å¼‚ < 30%
â€¢ ç½‘ç»œæµé‡å·®å¼‚ < 35%

Kafkaå±‚é¢ï¼š
â€¢ Leaderåˆ†å¸ƒåå·® < 20%
â€¢ åˆ†åŒºå¤§å°å·®å¼‚åˆç†
â€¢ å‰¯æœ¬åŒæ­¥å»¶è¿Ÿæ­£å¸¸
â€¢ è¯·æ±‚å“åº”æ—¶é—´å‡è¡¡
```

### 7.3 æœ€ä½³å®è·µæ€»ç»“


**âœ… é¢„é˜²æªæ–½**
```
è®¾è®¡é˜¶æ®µï¼š
â€¢ åˆç†è§„åˆ’åˆ†åŒºæ•°é‡
â€¢ è€ƒè™‘å‰¯æœ¬åˆ†å¸ƒç­–ç•¥
â€¢ é¢„ç•™æ‰©å®¹ç©ºé—´
â€¢ é…ç½®æœºæ¶æ„ŸçŸ¥

è¿ç»´é˜¶æ®µï¼š
â€¢ å¼€å¯è‡ªåŠ¨Leaderå¹³è¡¡
â€¢ å®šæœŸæ£€æŸ¥è´Ÿè½½åˆ†å¸ƒ
â€¢ ç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡
â€¢ å»ºç«‹å‘Šè­¦æœºåˆ¶

æ‰©å®¹æ—¶ï¼š
â€¢ åŠæ—¶è¿›è¡Œåˆ†åŒºé‡åˆ†é…
â€¢ åˆ†æ‰¹æ¬¡å¹³æ»‘è¿ç§»
â€¢ éªŒè¯è¿ç§»æ•ˆæœ
â€¢ ç›‘æ§ä¸šåŠ¡å½±å“
```

**ğŸ¯ å¤„ç†æµç¨‹**
```
å‘ç°é—®é¢˜ â†’ è¯Šæ–­åˆ†æ â†’ åˆ¶å®šæ–¹æ¡ˆ â†’ æ‰§è¡Œè°ƒæ•´ â†’ éªŒè¯æ•ˆæœ

1. å‘ç°ï¼šé€šè¿‡ç›‘æ§å‘ç°è´Ÿè½½ä¸å‡
2. è¯Šæ–­ï¼šåˆ†æä¸å‡è¡¡çš„å…·ä½“åŸå› 
3. æ–¹æ¡ˆï¼šé€‰æ‹©åˆé€‚çš„è§£å†³å·¥å…·
4. æ‰§è¡Œï¼šåœ¨ä½å³°æœŸè°¨æ…æ‰§è¡Œ
5. éªŒè¯ï¼šç¡®è®¤é—®é¢˜å¾—åˆ°è§£å†³
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- è´Ÿè½½å‡è¡¡æ˜¯Kafkaé›†ç¾¤ç¨³å®šè¿è¡Œçš„åŸºç¡€
- é¢„é˜²æ¯”æ²»ç–—æ›´é‡è¦ï¼Œåˆç†çš„åˆå§‹è®¾è®¡å¾ˆå…³é”®
- åˆ†åŒºé‡åˆ†é…å’ŒLeaderé€‰ä¸¾æ˜¯ä¸¤å¤§æ ¸å¿ƒå·¥å…·
- è‡ªåŠ¨åŒ–ç›‘æ§å’Œå®šæœŸæ£€æŸ¥å¿…ä¸å¯å°‘
- æ‰©å®¹åå¿…é¡»ä¸»åŠ¨è¿›è¡Œè´Ÿè½½é‡åˆ†é…