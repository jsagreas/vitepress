---
title: 17ã€æ¶ˆè´¹è€…é—®é¢˜æ’æŸ¥
---
## ğŸ“š ç›®å½•

1. [æ¶ˆè´¹è€…é—®é¢˜æ¦‚è¿°](#1-æ¶ˆè´¹è€…é—®é¢˜æ¦‚è¿°)
2. [é‡å¹³è¡¡é—®é¢˜è¯Šæ–­](#2-é‡å¹³è¡¡é—®é¢˜è¯Šæ–­)
3. [æ¶ˆè´¹å»¶è¿Ÿä¸æ€§èƒ½é—®é¢˜](#3-æ¶ˆè´¹å»¶è¿Ÿä¸æ€§èƒ½é—®é¢˜)
4. [æ¶ˆæ¯é‡å¤ä¸ä¸¢å¤±é—®é¢˜](#4-æ¶ˆæ¯é‡å¤ä¸ä¸¢å¤±é—®é¢˜)
5. [åç§»é‡ç®¡ç†é—®é¢˜](#5-åç§»é‡ç®¡ç†é—®é¢˜)
6. [è¿æ¥ä¸åºåˆ—åŒ–é—®é¢˜](#6-è¿æ¥ä¸åºåˆ—åŒ–é—®é¢˜)
7. [æ¶ˆè´¹è€…ç»„åè°ƒé—®é¢˜](#7-æ¶ˆè´¹è€…ç»„åè°ƒé—®é¢˜)
8. [ç›‘æ§ä¸è¯Šæ–­å·¥å…·](#8-ç›‘æ§ä¸è¯Šæ–­å·¥å…·)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” æ¶ˆè´¹è€…é—®é¢˜æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯Kafkaæ¶ˆè´¹è€…é—®é¢˜


**ğŸ¯ æ¶ˆè´¹è€…çš„ä½œç”¨**
> Kafkaæ¶ˆè´¹è€…å°±åƒæ˜¯é¤å…çš„æœåŠ¡å‘˜ï¼Œè´Ÿè´£ä»å¨æˆ¿(ç”Ÿäº§è€…)æ‹¿å–åšå¥½çš„èœå“(æ¶ˆæ¯)ï¼Œç„¶ååˆ†å‘ç»™ç›¸åº”çš„é¤æ¡Œ(åº”ç”¨ç¨‹åº)ã€‚å¦‚æœæœåŠ¡å‘˜å‡ºäº†é—®é¢˜ï¼Œæ•´ä¸ªç”¨é¤ä½“éªŒå°±ä¼šå—å½±å“ã€‚

**âš ï¸ å¸¸è§æ¶ˆè´¹è€…é—®é¢˜åˆ†ç±»**

```
æ¶ˆè´¹è€…é—®é¢˜åˆ†ç±»å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Kafkaæ¶ˆè´¹è€…é—®é¢˜                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ€§èƒ½é—®é¢˜   â”‚   æ•°æ®é—®é¢˜   â”‚   è¿æ¥é—®é¢˜   â”‚     ç®¡ç†é—®é¢˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚â€¢ æ¶ˆè´¹å»¶è¿Ÿ   â”‚â€¢ é‡å¤æ¶ˆè´¹   â”‚â€¢ è¿æ¥æ–­å¼€   â”‚â€¢ é‡å¹³è¡¡é¢‘ç¹     â”‚
â”‚â€¢ å¤„ç†ç¼“æ…¢   â”‚â€¢ æ¶ˆæ¯ä¸¢å¤±   â”‚â€¢ ç½‘ç»œè¶…æ—¶   â”‚â€¢ åç§»é‡é”™è¯¯     â”‚
â”‚â€¢ ç§¯å‹ä¸¥é‡   â”‚â€¢ é¡ºåºé”™ä¹±   â”‚â€¢ è®¤è¯å¤±è´¥   â”‚â€¢ åè°ƒå™¨å¼‚å¸¸     â”‚
â”‚â€¢ CPUå ç”¨é«˜  â”‚â€¢ æ•°æ®ä¹±ç    â”‚â€¢ åºåˆ—åŒ–é”™   â”‚â€¢ ç›‘æ§ä¸å‡†ç¡®     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 é—®é¢˜è¯Šæ–­çš„åŸºæœ¬æ€è·¯


**ğŸ”§ è¯Šæ–­é—®é¢˜çš„æ­¥éª¤**
1. **è§‚å¯Ÿç°è±¡** - é—®é¢˜å…·ä½“è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿ
2. **æ”¶é›†ä¿¡æ¯** - æŸ¥çœ‹æ—¥å¿—ã€ç›‘æ§æŒ‡æ ‡
3. **åˆ†æåŸå› ** - æ‰¾åˆ°é—®é¢˜çš„æ ¹æœ¬åŸå› 
4. **åˆ¶å®šæ–¹æ¡ˆ** - ç¡®å®šè§£å†³æ–¹æ³•
5. **å®æ–½ä¿®å¤** - æ‰§è¡Œè§£å†³æ–¹æ¡ˆ
6. **éªŒè¯æ•ˆæœ** - ç¡®è®¤é—®é¢˜å·²è§£å†³

> **ğŸ’¡ ç»éªŒåˆ†äº«**ï¼šå°±åƒåŒ»ç”Ÿçœ‹ç—…ä¸€æ ·ï¼Œå…ˆå¬ç—…äººæè¿°ç—‡çŠ¶ï¼Œå†åšæ£€æŸ¥åŒ–éªŒï¼Œæœ€åæ‰èƒ½å¯¹ç—‡ä¸‹è¯ã€‚è¯Šæ–­Kafkaé—®é¢˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸èƒ½ä¸€ä¸Šæ¥å°±çæ”¹é…ç½®ã€‚

---

## 2. ğŸ”„ é‡å¹³è¡¡é—®é¢˜è¯Šæ–­


### 2.1 ä»€ä¹ˆæ˜¯é‡å¹³è¡¡


**ğŸ­ é‡å¹³è¡¡çš„æœ¬è´¨**
> é‡å¹³è¡¡å°±åƒæ˜¯é¤å…é‡æ–°åˆ†é…æœåŠ¡å‘˜çš„å·¥ä½œåŒºåŸŸã€‚å½“æœ‰æ–°æœåŠ¡å‘˜åŠ å…¥ã€è€æœåŠ¡å‘˜ç¦»å¼€ï¼Œæˆ–è€…æœ‰æœåŠ¡å‘˜"ç½¢å·¥"æ—¶ï¼Œé¤å…ç»ç†éœ€è¦é‡æ–°åˆ†é…æ¯ä¸ªæœåŠ¡å‘˜è´Ÿè´£å“ªäº›é¤æ¡Œã€‚

**ğŸ“Š é‡å¹³è¡¡è§¦å‘æ¡ä»¶**

| **è§¦å‘æƒ…å†µ** | **å…·ä½“åœºæ™¯** | **å½±å“ç¨‹åº¦** |
|-------------|-------------|-------------|
| **æ¶ˆè´¹è€…åŠ å…¥** | `æ–°å®ä¾‹å¯åŠ¨` | `ğŸŸ¡ ä¸­ç­‰å½±å“` |
| **æ¶ˆè´¹è€…ç¦»å¼€** | `å®ä¾‹å…³é—­æˆ–å´©æºƒ` | `ğŸŸ¡ ä¸­ç­‰å½±å“` |
| **æ¶ˆè´¹è€…è¶…æ—¶** | `å¿ƒè·³è¶…æ—¶æˆ–å¤„ç†è¶…æ—¶` | `ğŸ”´ ä¸¥é‡å½±å“` |
| **ä¸»é¢˜åˆ†åŒºå˜åŒ–** | `å¢åŠ åˆ†åŒºæ•°é‡` | `ğŸŸ¢ è½»å¾®å½±å“` |

### 2.2 é‡å¹³è¡¡é¢‘ç¹çš„å¸¸è§åŸå› 


**âš¡ å¤„ç†æ—¶é—´è¿‡é•¿å¯¼è‡´è¶…æ—¶**

```java
// é—®é¢˜ä»£ç ï¼šå¤„ç†æ—¶é—´å¤ªé•¿
@KafkaListener(topics = "user-events")
public void handleMessage(String message) {
    // è¿™é‡Œå¤„ç†æ—¶é—´è¶…è¿‡äº†max.poll.interval.ms(é»˜è®¤5åˆ†é’Ÿ)
    complexBusinessProcess(message); // è€—æ—¶10åˆ†é’Ÿçš„ä¸šåŠ¡å¤„ç†
}
```

**è§£å†³æ–¹æ¡ˆï¼š**
```java
// æ–¹æ¡ˆ1ï¼šå¢åŠ è¶…æ—¶æ—¶é—´
Properties props = new Properties();
props.put("max.poll.interval.ms", 600000); // 10åˆ†é’Ÿ

// æ–¹æ¡ˆ2ï¼šå¼‚æ­¥å¤„ç†
@KafkaListener(topics = "user-events")
public void handleMessage(String message) {
    // å¿«é€Ÿå°†æ¶ˆæ¯æ”¾å…¥é˜Ÿåˆ—
    messageQueue.offer(message);
    // å¦å¤–çš„çº¿ç¨‹æ± å¤„ç†å…·ä½“ä¸šåŠ¡
}
```

**ğŸ”§ ç½‘ç»œä¸ç¨³å®šå¯¼è‡´å¿ƒè·³è¶…æ—¶**

```java
// è°ƒæ•´å¿ƒè·³å’Œä¼šè¯è¶…æ—¶é…ç½®
Properties props = new Properties();
props.put("heartbeat.interval.ms", 3000);        // å¿ƒè·³é—´éš”3ç§’
props.put("session.timeout.ms", 30000);          // ä¼šè¯è¶…æ—¶30ç§’
props.put("request.timeout.ms", 40000);          // è¯·æ±‚è¶…æ—¶40ç§’
```

### 2.3 é‡å¹³è¡¡é—®é¢˜æ’æŸ¥


**ğŸ“ æŸ¥çœ‹é‡å¹³è¡¡æ—¥å¿—**
```bash
# åœ¨æ¶ˆè´¹è€…æ—¥å¿—ä¸­æŸ¥æ‰¾é‡å¹³è¡¡ç›¸å…³ä¿¡æ¯
grep -i "rebalance\|coordinator" /path/to/consumer.log

# å…¸å‹çš„é‡å¹³è¡¡æ—¥å¿—
2024-01-20 10:30:15 INFO  Revoking previously assigned partitions
2024-01-20 10:30:16 INFO  Successfully joined group with generation 15
2024-01-20 10:30:16 INFO  Adding newly assigned partitions: topic-0, topic-1
```

**ğŸ“Š ç›‘æ§é‡å¹³è¡¡æŒ‡æ ‡**

| **æŒ‡æ ‡åç§°** | **æ­£å¸¸èŒƒå›´** | **å¼‚å¸¸è¡¨ç°** | **æ’æŸ¥æ–¹å‘** |
|-------------|-------------|-------------|-------------|
| **é‡å¹³è¡¡é¢‘ç‡** | `< 1æ¬¡/å°æ—¶` | `> 5æ¬¡/å°æ—¶` | `æ£€æŸ¥å¤„ç†æ—¶é—´å’Œç½‘ç»œ` |
| **é‡å¹³è¡¡è€—æ—¶** | `< 10ç§’` | `> 30ç§’` | `æ£€æŸ¥åˆ†åŒºæ•°é‡å’Œç»„å¤§å°` |
| **å¿ƒè·³æˆåŠŸç‡** | `> 99%` | `< 95%` | `æ£€æŸ¥ç½‘ç»œè¿æ¥è´¨é‡` |

> **âš ï¸ é‡è¦æé†’**ï¼šé‡å¹³è¡¡æœŸé—´æ‰€æœ‰æ¶ˆè´¹è€…éƒ½ä¼šåœæ­¢å·¥ä½œï¼Œå°±åƒé¤å…é‡æ–°åˆ†é…å·¥ä½œæ—¶ï¼Œæ‰€æœ‰æœåŠ¡å‘˜éƒ½è¦æš‚åœæœåŠ¡ã€‚é¢‘ç¹é‡å¹³è¡¡ä¼šä¸¥é‡å½±å“æ¶ˆè´¹æ€§èƒ½ã€‚

---

## 3. ğŸŒ æ¶ˆè´¹å»¶è¿Ÿä¸æ€§èƒ½é—®é¢˜


### 3.1 æ¶ˆè´¹å»¶è¿Ÿçš„è¡¨ç°ä¸åŸå› 


**ğŸ• ä»€ä¹ˆæ˜¯æ¶ˆè´¹å»¶è¿Ÿ**
> æ¶ˆè´¹å»¶è¿Ÿå°±åƒå¤–å–è¿Ÿåˆ°ä¸€æ ·ï¼Œæœ¬æ¥åº”è¯¥20åˆ†é’Ÿé€åˆ°çš„å¤–å–ï¼Œç»“æœ1å°æ—¶æ‰åˆ°ã€‚åœ¨Kafkaä¸­ï¼Œå°±æ˜¯æ¶ˆæ¯ä»å‘é€åˆ°è¢«æ¶ˆè´¹å®Œæˆçš„æ—¶é—´è¿‡é•¿ã€‚

**ğŸ“ˆ æ¶ˆè´¹å»¶è¿Ÿçš„ç›‘æ§æŒ‡æ ‡**

```
æ¶ˆè´¹å»¶è¿Ÿç›‘æ§ä½“ç³»ï¼š

ç”Ÿäº§æ—¶é—´ â†’ å­˜å‚¨æ—¶é—´ â†’ æ‹‰å–æ—¶é—´ â†’ å¤„ç†æ—¶é—´ â†’ æäº¤æ—¶é—´
    â†“        â†“        â†“        â†“        â†“
  æ—¶é—´æˆ³   åˆ†åŒºå»¶è¿Ÿ   ç½‘ç»œå»¶è¿Ÿ  ä¸šåŠ¡å»¶è¿Ÿ  åç§»é‡å»¶è¿Ÿ
```

### 3.2 å¤„ç†èƒ½åŠ›ä¸è¶³é—®é¢˜


**ğŸš§ å•ä¸ªæ¶ˆè´¹è€…å¤„ç†æ…¢**

```java
// é—®é¢˜ï¼šåŒæ­¥å¤„ç†ï¼Œæ•ˆç‡ä½
@KafkaListener(topics = "orders")
public void processOrder(String orderData) {
    // æ¯ä¸ªè®¢å•å¤„ç†éœ€è¦2ç§’
    Order order = parseOrder(orderData);        // 0.1ç§’
    validateOrder(order);                       // 0.5ç§’  
    saveToDatabase(order);                      // 1ç§’
    sendNotification(order);                    // 0.4ç§’
}
```

**è§£å†³æ–¹æ¡ˆï¼šæ‰¹é‡å¤„ç†**
```java
@KafkaListener(topics = "orders", 
    containerFactory = "batchKafkaListenerContainerFactory")
public void processOrdersBatch(List<String> orders) {
    // æ‰¹é‡å¤„ç†ï¼Œæé«˜æ•ˆç‡
    List<Order> orderList = orders.stream()
        .map(this::parseOrder)
        .collect(Collectors.toList());
    
    // æ‰¹é‡éªŒè¯
    validateOrdersBatch(orderList);
    // æ‰¹é‡ä¿å­˜
    saveOrdersBatch(orderList);
    // æ‰¹é‡é€šçŸ¥
    sendNotificationsBatch(orderList);
}
```

### 3.3 æ¶ˆè´¹ç§¯å‹é—®é¢˜è§£å†³


**ğŸ“¦ æ¶ˆæ¯ç§¯å‹çš„åˆ¤æ–­**
```bash
# æŸ¥çœ‹æ¶ˆè´¹è€…ç»„çš„å»¶è¿Ÿæƒ…å†µ
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --describe --group my-consumer-group

# è¾“å‡ºç¤ºä¾‹ï¼š
# TOPIC     PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG
# orders    0          1000            5000           4000  <- ç§¯å‹4000æ¡
# orders    1          2000            3000           1000  <- ç§¯å‹1000æ¡
```

**ğŸš€ æ‰©å®¹æ¶ˆè´¹è€…å®ä¾‹**

```java
// æ–¹æ¡ˆ1ï¼šå¢åŠ æ¶ˆè´¹è€…å®ä¾‹æ•°é‡
// å¯åŠ¨å¤šä¸ªç›¸åŒçš„æ¶ˆè´¹è€…å®ä¾‹ï¼Œè‡ªåŠ¨åˆ†æ‘Šè´Ÿè½½

// æ–¹æ¡ˆ2ï¼šè°ƒæ•´å¹¶å‘å¤„ç†
@KafkaListener(topics = "orders", concurrency = "3")
public void processOrder(String orderData) {
    // 3ä¸ªçº¿ç¨‹å¹¶å‘å¤„ç†åŒä¸€ä¸ªåˆ†åŒºçš„æ¶ˆæ¯
}

// æ–¹æ¡ˆ3ï¼šä¼˜åŒ–æ‰¹é‡å¤§å°
Properties props = new Properties();
props.put("max.poll.records", 1000);      // æ¯æ¬¡æ‹‰å–1000æ¡
props.put("fetch.min.bytes", 1024 * 1024); // è‡³å°‘1MBæ‰è¿”å›
```

> **ğŸ’¡ æ‰©å®¹åŸåˆ™**ï¼šæ¶ˆè´¹è€…å®ä¾‹æ•°é‡ä¸èƒ½è¶…è¿‡åˆ†åŒºæ•°é‡ï¼Œå°±åƒä¸€ä¸ªåˆ†åŒºåªèƒ½ç”±ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†ï¼Œå¤šäº†ä¹Ÿæ²¡ç”¨ã€‚

---

## 4. ğŸ” æ¶ˆæ¯é‡å¤ä¸ä¸¢å¤±é—®é¢˜


### 4.1 æ¶ˆæ¯é‡å¤æ¶ˆè´¹é—®é¢˜


**ğŸ”„ ä¸ºä»€ä¹ˆä¼šé‡å¤æ¶ˆè´¹**
> å°±åƒä½ åœ¨é¤å…ç‚¹é¤ï¼ŒæœåŠ¡å‘˜æ²¡å¬æ¸…åˆé—®äº†ä¸€éï¼Œç»“æœä½ è¯´äº†ä¸¤æ¬¡åŒæ ·çš„èœï¼Œå¨æˆ¿å°±åšäº†ä¸¤ä»½ã€‚Kafkaä¸­çš„é‡å¤æ¶ˆè´¹é€šå¸¸æ˜¯å› ä¸ºåç§»é‡æäº¤å‡ºäº†é—®é¢˜ã€‚

**ğŸ¯ é‡å¤æ¶ˆè´¹çš„å¸¸è§åœºæ™¯**

| **åœºæ™¯** | **åŸå› ** | **è¡¨ç°** |
|---------|---------|---------|
| **è‡ªåŠ¨æäº¤å¤±è´¥** | `ç½‘ç»œé—®é¢˜å¯¼è‡´åç§»é‡æäº¤å¤±è´¥` | `é‡å¯åé‡å¤å¤„ç†ç›¸åŒæ¶ˆæ¯` |
| **æ‰‹åŠ¨æäº¤æ—¶æœºé”™è¯¯** | `ä¸šåŠ¡å¤„ç†å‰å°±æäº¤äº†åç§»é‡` | `å¤„ç†å¤±è´¥ä½†åç§»é‡å·²æäº¤` |
| **é‡å¹³è¡¡æœŸé—´** | `é‡å¹³è¡¡æ—¶åç§»é‡ä¸¢å¤±` | `éƒ¨åˆ†æ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…å¤„ç†` |

**ğŸ›  è§£å†³é‡å¤æ¶ˆè´¹**

```java
// æ–¹æ¡ˆ1ï¼šå¹‚ç­‰æ€§å¤„ç†
@KafkaListener(topics = "orders")
public void processOrder(String orderData) {
    Order order = parseOrder(orderData);
    
    // ä½¿ç”¨è®¢å•IDä½œä¸ºå¹‚ç­‰æ€§æ£€æŸ¥
    if (orderService.isOrderProcessed(order.getId())) {
        log.info("è®¢å•{}å·²å¤„ç†è¿‡ï¼Œè·³è¿‡", order.getId());
        return;
    }
    
    // å¤„ç†è®¢å•
    orderService.processOrder(order);
    // æ ‡è®°å·²å¤„ç†
    orderService.markAsProcessed(order.getId());
}

// æ–¹æ¡ˆ2ï¼šç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰(éœ€è¦æ”¯æŒäº‹åŠ¡)
@Transactional
@KafkaListener(topics = "orders")
public void processOrderExactlyOnce(String orderData) {
    // åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤„ç†ä¸šåŠ¡å’Œæäº¤åç§»é‡
    processBusinessLogic(orderData);
}
```

### 4.2 æ¶ˆæ¯ä¸¢å¤±é—®é¢˜


**ğŸ’” æ¶ˆæ¯ä¸¢å¤±çš„åŸå› **
> æ¶ˆæ¯ä¸¢å¤±å°±åƒå¯„å‡ºçš„å¿«é€’åœ¨è·¯ä¸Šå¼„ä¸¢äº†ï¼Œå¯èƒ½æ˜¯å¿«é€’å‘˜å¼„ä¸¢äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»“åº“æé”™äº†ã€‚

**âš ï¸ å¸¸è§ä¸¢å¤±åœºæ™¯**

```java
// é”™è¯¯ç¤ºä¾‹ï¼šè‡ªåŠ¨æäº¤å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±
Properties props = new Properties();
props.put("enable.auto.commit", "true");
props.put("auto.commit.interval.ms", "1000");

@KafkaListener(topics = "orders")
public void processOrder(String orderData) {
    // å¦‚æœè¿™é‡Œå¤„ç†å¤±è´¥æŠ›å¼‚å¸¸
    // ä½†åç§»é‡å¯èƒ½å·²ç»è‡ªåŠ¨æäº¤äº†
    // æ¶ˆæ¯å°±æ°¸è¿œæ‰¾ä¸å›æ¥äº†
    processBusinessLogic(orderData); // å¯èƒ½å¤±è´¥
}
```

**âœ… é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±**

```java
// æ­£ç¡®ç¤ºä¾‹ï¼šæ‰‹åŠ¨æäº¤åç§»é‡
Properties props = new Properties();
props.put("enable.auto.commit", "false");

@KafkaListener(topics = "orders")
public void processOrder(String orderData, Acknowledgment ack) {
    try {
        // å…ˆå¤„ç†ä¸šåŠ¡é€»è¾‘
        processBusinessLogic(orderData);
        
        // å¤„ç†æˆåŠŸåæ‰æäº¤åç§»é‡
        ack.acknowledge();
        
    } catch (Exception e) {
        // å¤„ç†å¤±è´¥ä¸æäº¤åç§»é‡ï¼Œæ¶ˆæ¯ä¼šé‡æ–°æ¶ˆè´¹
        log.error("å¤„ç†æ¶ˆæ¯å¤±è´¥: {}", orderData, e);
        // å¯ä»¥é€‰æ‹©é‡è¯•æˆ–å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—
    }
}
```

---

## 5. ğŸ“ åç§»é‡ç®¡ç†é—®é¢˜


### 5.1 åç§»é‡çš„ä½œç”¨æœºåˆ¶


**ğŸ“š åç§»é‡å°±åƒä¹¦ç­¾**
> åç§»é‡å°±åƒçœ‹ä¹¦æ—¶ç”¨çš„ä¹¦ç­¾ï¼Œè®°å½•ä½ è¯»åˆ°äº†ç¬¬å‡ é¡µã€‚ä¸‹æ¬¡æ‰“å¼€ä¹¦æ—¶ï¼Œå¯ä»¥ä»ä¹¦ç­¾ä½ç½®ç»§ç»­è¯»ï¼Œè€Œä¸ç”¨ä»å¤´å¼€å§‹ã€‚

```
åç§»é‡ç®¡ç†æµç¨‹ï¼š

æ¶ˆè´¹æ¶ˆæ¯ â†’ å¤„ç†æ¶ˆæ¯ â†’ æäº¤åç§»é‡ â†’ è®°å½•ä½ç½®
    â†“         â†“         â†“         â†“
  offset=100  ä¸šåŠ¡å¤„ç†   offset=101  ä¿å­˜è¿›åº¦
```

### 5.2 åç§»é‡æäº¤å¤±è´¥


**ğŸš¨ æäº¤å¤±è´¥çš„è¡¨ç°**
```bash
# æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
ERROR Failed to commit offsets for group my-group: 
Coordinator not available exception

# æˆ–è€…è¶…æ—¶é”™è¯¯
WARN Offset commit failed on partition orders-0 at offset 12345: 
Request timeout
```

**ğŸ”§ æäº¤å¤±è´¥çš„è§£å†³æ–¹æ¡ˆ**

```java
// æ–¹æ¡ˆ1ï¼šå¢åŠ é‡è¯•æœºåˆ¶
Properties props = new Properties();
props.put("retries", 5);                    // é‡è¯•5æ¬¡
props.put("retry.backoff.ms", 1000);        // é‡è¯•é—´éš”1ç§’
props.put("request.timeout.ms", 30000);     // è¯·æ±‚è¶…æ—¶30ç§’

// æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨é‡è¯•æäº¤
@KafkaListener(topics = "orders")
public void processOrder(String orderData, Acknowledgment ack) {
    try {
        processBusinessLogic(orderData);
        
        // å¸¦é‡è¯•çš„åç§»é‡æäº¤
        retryCommitOffset(ack, 3);
        
    } catch (Exception e) {
        log.error("å¤„ç†å¤±è´¥", e);
    }
}

private void retryCommitOffset(Acknowledgment ack, int maxRetries) {
    for (int i = 0; i < maxRetries; i++) {
        try {
            ack.acknowledge();
            return; // æäº¤æˆåŠŸï¼Œé€€å‡º
        } catch (Exception e) {
            log.warn("åç§»é‡æäº¤å¤±è´¥ï¼Œé‡è¯•ç¬¬{}æ¬¡", i + 1, e);
            try {
                Thread.sleep(1000); // ç­‰å¾…1ç§’åé‡è¯•
            } catch (InterruptedException ie) {
                Thread.currentThread().interrupt();
                break;
            }
        }
    }
    log.error("åç§»é‡æäº¤æœ€ç»ˆå¤±è´¥");
}
```

### 5.3 åç§»é‡é‡ç½®é—®é¢˜


**ğŸ”„ åç§»é‡é‡ç½®ç­–ç•¥**

| **ç­–ç•¥** | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** |
|---------|---------|-------------|
| **earliest** | `ä»æœ€æ—©çš„æ¶ˆæ¯å¼€å§‹æ¶ˆè´¹` | `éœ€è¦å¤„ç†å†å²æ•°æ®` |
| **latest** | `ä»æœ€æ–°çš„æ¶ˆæ¯å¼€å§‹æ¶ˆè´¹` | `åªå…³å¿ƒæ–°æ¶ˆæ¯` |
| **none** | `å¦‚æœæ²¡æœ‰åç§»é‡å°±æŠ¥é”™` | `ä¸¥æ ¼æ§åˆ¶æ¶ˆè´¹ä½ç½®` |

```java
// é…ç½®åç§»é‡é‡ç½®ç­–ç•¥
Properties props = new Properties();
props.put("auto.offset.reset", "earliest");

// æ‰‹åŠ¨é‡ç½®åç§»é‡åˆ°æŒ‡å®šä½ç½®
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --group my-group --topic orders --reset-offsets \
  --to-offset 1000 --execute
```

---

## 6. ğŸ”Œ è¿æ¥ä¸åºåˆ—åŒ–é—®é¢˜


### 6.1 è¿æ¥æ–­å¼€é—®é¢˜


**ğŸ”— ç½‘ç»œè¿æ¥ä¸ç¨³å®š**
> å°±åƒæ‰“ç”µè¯æ—¶ä¿¡å·ä¸å¥½ä¼šæ–­çº¿ä¸€æ ·ï¼ŒKafkaæ¶ˆè´¹è€…ä¹Ÿå¯èƒ½å› ä¸ºç½‘ç»œé—®é¢˜æ–­å¼€è¿æ¥ã€‚

**ğŸ“Š è¿æ¥é—®é¢˜çš„å…¸å‹è¡¨ç°**

```bash
# å¸¸è§çš„è¿æ¥é”™è¯¯æ—¥å¿—
ERROR Connection to node -1 could not be established. 
Broker may not be available.

WARN Connection to broker localhost:9092 failed: 
java.net.ConnectException: Connection refused

ERROR Disconnected from the target broker localhost:9092
```

**ğŸ›  è¿æ¥é—®é¢˜è§£å†³æ–¹æ¡ˆ**

```java
// å¢å¼ºè¿æ¥ç¨³å®šæ€§é…ç½®
Properties props = new Properties();
props.put("connections.max.idle.ms", 540000);    // è¿æ¥æœ€å¤§ç©ºé—²æ—¶é—´9åˆ†é’Ÿ
props.put("reconnect.backoff.ms", 1000);         // é‡è¿å»¶è¿Ÿ1ç§’
props.put("reconnect.backoff.max.ms", 10000);    // æœ€å¤§é‡è¿å»¶è¿Ÿ10ç§’
props.put("retries", Integer.MAX_VALUE);         // æ— é™é‡è¯•
props.put("retry.backoff.ms", 1000);             // é‡è¯•é—´éš”1ç§’

// æ·»åŠ è¿æ¥çŠ¶æ€ç›‘å¬
consumer.subscribe(Arrays.asList("orders"), new ConsumerRebalanceListener() {
    @Override
    public void onPartitionsRevoked(Collection<TopicPartition> partitions) {
        log.info("åˆ†åŒºè¢«å›æ”¶: {}", partitions);
    }
    
    @Override
    public void onPartitionsAssigned(Collection<TopicPartition> partitions) {
        log.info("åˆ†åŒºè¢«åˆ†é…: {}", partitions);
    }
});
```

### 6.2 ååºåˆ—åŒ–å¼‚å¸¸


**ğŸ”¤ åºåˆ—åŒ–é—®é¢˜çš„æœ¬è´¨**
> åºåˆ—åŒ–å°±åƒæŠŠä¸œè¥¿æ‰“åŒ…å¯„é€ï¼Œååºåˆ—åŒ–å°±æ˜¯æ”¶åˆ°åæ‹†åŒ…ã€‚å¦‚æœå‘é€æ—¶ç”¨äº†Aæ ¼å¼æ‰“åŒ…ï¼Œæ¥æ”¶æ—¶ç”¨Bæ ¼å¼æ‹†åŒ…ï¼Œè‚¯å®šä¼šå‡ºé”™ã€‚

**âŒ å¸¸è§ååºåˆ—åŒ–é”™è¯¯**

```java
// é”™è¯¯ç¤ºä¾‹ï¼šæ•°æ®æ ¼å¼ä¸åŒ¹é…
// ç”Ÿäº§è€…å‘é€çš„æ˜¯JSONæ ¼å¼
producer.send(new ProducerRecord<>("orders", "{\"id\":123,\"amount\":99.99}"));

// æ¶ˆè´¹è€…æœŸæœ›çš„æ˜¯Avroæ ¼å¼
@KafkaListener(topics = "orders")
public void processOrder(Order order) { // Orderæ˜¯Avroç”Ÿæˆçš„ç±»
    // è¿™é‡Œä¼šæŠ›å‡ºåºåˆ—åŒ–å¼‚å¸¸
}
```

**âœ… å¤„ç†åºåˆ—åŒ–å¼‚å¸¸**

```java
// æ–¹æ¡ˆ1ï¼šé”™è¯¯å¤„ç†å™¨
@Component
public class CustomErrorHandler implements ConsumerAwareListenerErrorHandler {
    
    @Override
    public Object handleError(Message<?> message, ListenerExecutionFailedException exception,
                            Consumer<?, ?> consumer) {
        
        if (exception.getCause() instanceof SerializationException) {
            log.error("åºåˆ—åŒ–é”™è¯¯ï¼Œè·³è¿‡æ¶ˆæ¯: {}", message.getPayload());
            // è·³è¿‡è¿™æ¡æ¶ˆæ¯ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€æ¡
            return null;
        }
        
        // å…¶ä»–å¼‚å¸¸ç»§ç»­æŠ›å‡º
        throw exception;
    }
}

// æ–¹æ¡ˆ2ï¼šä½¿ç”¨ByteArrayæ¥æ”¶ï¼Œæ‰‹åŠ¨è§£æ
@KafkaListener(topics = "orders")
public void processOrder(byte[] orderData) {
    try {
        // å°è¯•JSONè§£æ
        Order order = objectMapper.readValue(orderData, Order.class);
        processOrderLogic(order);
        
    } catch (JsonProcessingException e) {
        try {
            // JSONå¤±è´¥ï¼Œå°è¯•å…¶ä»–æ ¼å¼
            Order order = avroDeserializer.deserialize(orderData);
            processOrderLogic(order);
        } catch (Exception e2) {
            log.error("æ— æ³•è§£ææ¶ˆæ¯: {}", new String(orderData), e2);
            // å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—æˆ–å‘Šè­¦
        }
    }
}
```

---

## 7. ğŸ‘¥ æ¶ˆè´¹è€…ç»„åè°ƒé—®é¢˜


### 7.1 åè°ƒå™¨å¼‚å¸¸


**ğŸ¯ åè°ƒå™¨çš„ä½œç”¨**
> åè°ƒå™¨å°±åƒå›¢é˜Ÿçš„é¡¹ç›®ç»ç†ï¼Œè´Ÿè´£åˆ†é…ä»»åŠ¡ã€åè°ƒæˆå‘˜ã€å¤„ç†å†²çªã€‚å¦‚æœé¡¹ç›®ç»ç†å‡ºé—®é¢˜äº†ï¼Œæ•´ä¸ªå›¢é˜Ÿå°±ä¹±å¥—äº†ã€‚

**âš ï¸ åè°ƒå™¨å¼‚å¸¸çš„è¡¨ç°**

```bash
# åè°ƒå™¨å¼‚å¸¸æ—¥å¿—
ERROR [Consumer clientId=consumer-1, groupId=my-group] 
Coordinator discovery failed

WARN [Consumer clientId=consumer-1, groupId=my-group] 
Group coordinator lookup failed: Group coordinator not available

ERROR Coordinator not available exception while committing offsets
```

### 7.2 åè°ƒå™¨é—®é¢˜è§£å†³


**ğŸ”§ åè°ƒå™¨é…ç½®ä¼˜åŒ–**

```java
Properties props = new Properties();
// å¢åŠ åè°ƒå™¨å‘ç°è¶…æ—¶æ—¶é—´
props.put("metadata.max.age.ms", 300000);           // 5åˆ†é’Ÿ
// å¢åŠ ç»„åè°ƒè¯·æ±‚è¶…æ—¶
props.put("request.timeout.ms", 60000);             // 60ç§’
// å¿ƒè·³é—´éš”é…ç½®
props.put("heartbeat.interval.ms", 3000);           // 3ç§’
props.put("session.timeout.ms", 30000);             // 30ç§’
```

**ğŸ“ åè°ƒå™¨å¥åº·æ£€æŸ¥**

```bash
# æ£€æŸ¥å“ªä¸ªbrokeræ˜¯åè°ƒå™¨
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --describe --group my-group --verbose

# æŸ¥çœ‹æ¶ˆè´¹è€…ç»„çŠ¶æ€
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --list --state

# æ£€æŸ¥åè°ƒå™¨æ—¥å¿—
grep -i "coordinator\|group.*my-group" /path/to/kafka/logs/server.log
```

---

## 8. ğŸ“Š ç›‘æ§ä¸è¯Šæ–­å·¥å…·


### 8.1 å…³é”®ç›‘æ§æŒ‡æ ‡


**ğŸ“ˆ æ¶ˆè´¹è€…å¥åº·åº¦æŒ‡æ ‡ä½“ç³»**

```
æ¶ˆè´¹è€…ç›‘æ§æŒ‡æ ‡é‡‘å­—å¡”ï¼š

                    æ•´ä½“å¥åº·åº¦
                   /           \
               æ€§èƒ½æŒ‡æ ‡        ç¨³å®šæ€§æŒ‡æ ‡
              /       \      /         \
         æ¶ˆè´¹é€Ÿç‡   å»¶è¿Ÿæ—¶é—´  é‡å¹³è¡¡é¢‘ç‡  é”™è¯¯ç‡
        /    |    \    |     |    |     |    \
    TPS  ç§¯å‹é‡ å¹³å‡å»¶è¿Ÿ P99  é¢‘æ¬¡ è€—æ—¶  å¼‚å¸¸  è¶…æ—¶
```

**ğŸ“‹ æ ¸å¿ƒç›‘æ§æŒ‡æ ‡**

| **æŒ‡æ ‡ç±»åˆ«** | **æŒ‡æ ‡åç§°** | **æ­£å¸¸èŒƒå›´** | **å‘Šè­¦é˜ˆå€¼** |
|-------------|-------------|-------------|-------------|
| **æ€§èƒ½æŒ‡æ ‡** | `æ¶ˆè´¹TPS` | `> 1000/ç§’` | `< 100/ç§’` |
| **æ€§èƒ½æŒ‡æ ‡** | `æ¶ˆè´¹å»¶è¿Ÿ` | `< 1ç§’` | `> 10ç§’` |
| **ç¨³å®šæ€§æŒ‡æ ‡** | `é‡å¹³è¡¡é¢‘ç‡` | `< 1æ¬¡/å°æ—¶` | `> 5æ¬¡/å°æ—¶` |
| **ç¨³å®šæ€§æŒ‡æ ‡** | `é”™è¯¯ç‡` | `< 1%` | `> 5%` |

### 8.2 è¯Šæ–­å‘½ä»¤å·¥å…·é›†


**ğŸ”§ å¸¸ç”¨è¯Šæ–­å‘½ä»¤**

```bash
# 1. æŸ¥çœ‹æ¶ˆè´¹è€…ç»„è¯¦æƒ…
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --describe --group my-group

# 2. æŸ¥çœ‹æ¶ˆè´¹è€…ç»„çŠ¶æ€
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --list --state

# 3. é‡ç½®æ¶ˆè´¹è€…ç»„åç§»é‡
kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --group my-group --reset-offsets --to-latest \
  --topic orders --execute

# 4. æŸ¥çœ‹ä¸»é¢˜åˆ†åŒºè¯¦æƒ…  
kafka-topics.sh --bootstrap-server localhost:9092 \
  --describe --topic orders

# 5. å®æ—¶ç›‘æ§æ¶ˆè´¹è¿›åº¦
watch -n 1 "kafka-consumer-groups.sh --bootstrap-server localhost:9092 \
  --describe --group my-group"
```

### 8.3 æ—¥å¿—åˆ†ææŠ€å·§


**ğŸ“ æ—¥å¿—åˆ†ææ¨¡å¼**

```bash
# æŸ¥æ‰¾é‡å¹³è¡¡ç›¸å…³æ—¥å¿—
grep -E "(rebalance|coordinator|assigned|revoked)" consumer.log

# æŸ¥æ‰¾é”™è¯¯å’Œå¼‚å¸¸
grep -E "(ERROR|WARN|Exception)" consumer.log | tail -50

# ç»Ÿè®¡æ¶ˆè´¹é€Ÿç‡
grep "Consumed" consumer.log | awk '{print $1,$2}' | uniq -c

# æŸ¥æ‰¾è¿æ¥é—®é¢˜
grep -i "connection\|disconnect\|timeout" consumer.log
```

**ğŸ” æ€§èƒ½åˆ†æ**

```java
// æ·»åŠ æ¶ˆè´¹æ€§èƒ½ç›‘æ§
@KafkaListener(topics = "orders")
public void processOrder(String orderData) {
    long startTime = System.currentTimeMillis();
    
    try {
        // ä¸šåŠ¡å¤„ç†
        processBusinessLogic(orderData);
        
    } finally {
        long endTime = System.currentTimeMillis();
        long duration = endTime - startTime;
        
        // è®°å½•å¤„ç†æ—¶é—´
        meterRegistry.timer("kafka.consumer.process.time")
            .record(duration, TimeUnit.MILLISECONDS);
            
        if (duration > 5000) { // è¶…è¿‡5ç§’å‘Šè­¦
            log.warn("æ¶ˆæ¯å¤„ç†è€—æ—¶è¿‡é•¿: {}ms, å†…å®¹: {}", duration, orderData);
        }
    }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 é—®é¢˜è¯Šæ–­æ ¸å¿ƒæ€è·¯


```
ğŸ”¸ è§‚å¯Ÿç°è±¡ï¼šå…ˆçœ‹è¡¨é¢ç—‡çŠ¶ï¼Œä¸è¦æ€¥äºä¸‹ç»“è®º
ğŸ”¸ æ”¶é›†æ•°æ®ï¼šæ—¥å¿—ã€ç›‘æ§ã€é…ç½®ä¿¡æ¯ä¸€ä¸ªä¸è½
ğŸ”¸ åˆ†ææ ¹å› ï¼šä»ç°è±¡æ¨å¯¼å‡ºæ ¹æœ¬åŸå› 
ğŸ”¸ å¯¹ç—‡ä¸‹è¯ï¼šé’ˆå¯¹æ ¹å› åˆ¶å®šè§£å†³æ–¹æ¡ˆ
ğŸ”¸ éªŒè¯æ•ˆæœï¼šç¡®ä¿é—®é¢˜çœŸæ­£è§£å†³äº†
ğŸ”¸ é¢„é˜²æªæ–½ï¼šé¿å…åŒæ ·é—®é¢˜å†æ¬¡å‘ç”Ÿ
```

### 9.2 å¸¸è§é—®é¢˜è§£å†³è·¯å¾„


**ğŸ”„ é‡å¹³è¡¡é—®é¢˜è§£å†³è·¯å¾„**
```
æ£€æŸ¥å¤„ç†æ—¶é—´ â†’ è°ƒæ•´è¶…æ—¶é…ç½® â†’ ä¼˜åŒ–ä¸šåŠ¡é€»è¾‘ â†’ ç›‘æ§æ•ˆæœ
```

**ğŸŒ æ€§èƒ½é—®é¢˜è§£å†³è·¯å¾„**  
```
å®šä½ç“¶é¢ˆ â†’ æ‰©å®¹å®ä¾‹ â†’ æ‰¹é‡å¤„ç† â†’ å¼‚æ­¥åŒ–æ”¹é€ 
```

**ğŸ” é‡å¤æ¶ˆè´¹è§£å†³è·¯å¾„**
```
ç¡®è®¤å¹‚ç­‰æ€§ â†’ æ£€æŸ¥æäº¤æœºåˆ¶ â†’ ä¼˜åŒ–å¼‚å¸¸å¤„ç† â†’ éªŒè¯å»é‡æ•ˆæœ
```

**ğŸ’” æ¶ˆæ¯ä¸¢å¤±è§£å†³è·¯å¾„**
```
ç¦ç”¨è‡ªåŠ¨æäº¤ â†’ æ‰‹åŠ¨ç¡®è®¤æœºåˆ¶ â†’ å¼‚å¸¸é‡è¯• â†’ æ­»ä¿¡é˜Ÿåˆ—æ‰˜åº•
```

### 9.3 é¢„é˜²æ€§æœ€ä½³å®è·µ


**âš¡ é…ç½®æœ€ä½³å®è·µ**
```java
// æ¨èçš„ç”Ÿäº§ç¯å¢ƒé…ç½®
Properties props = new Properties();
props.put("enable.auto.commit", "false");           // æ‰‹åŠ¨æäº¤
props.put("max.poll.interval.ms", 300000);          // 5åˆ†é’Ÿå¤„ç†æ—¶é—´
props.put("heartbeat.interval.ms", 3000);           // 3ç§’å¿ƒè·³
props.put("session.timeout.ms", 30000);             // 30ç§’ä¼šè¯è¶…æ—¶
props.put("request.timeout.ms", 40000);             // 40ç§’è¯·æ±‚è¶…æ—¶
props.put("connections.max.idle.ms", 540000);       // 9åˆ†é’Ÿç©ºé—²è¶…æ—¶
props.put("retries", Integer.MAX_VALUE);            // æ— é™é‡è¯•
props.put("max.poll.records", 500);                 // æ¯æ¬¡æ‹‰å–500æ¡
```

**ğŸ“Š ç›‘æ§æœ€ä½³å®è·µ**
- **å®æ—¶ç›‘æ§**ï¼šæ¶ˆè´¹å»¶è¿Ÿã€é”™è¯¯ç‡ã€é‡å¹³è¡¡é¢‘ç‡
- **å†å²è¶‹åŠ¿**ï¼šæ¶ˆè´¹é€Ÿç‡å˜åŒ–ã€æ€§èƒ½è¶‹åŠ¿åˆ†æ  
- **å‘Šè­¦è®¾ç½®**ï¼šå»¶è¿Ÿè¶…æ—¶ã€ç§¯å‹ä¸¥é‡ã€é”™è¯¯ç‡é«˜
- **æ—¥å¿—æ”¶é›†**ï¼šç»“æ„åŒ–æ—¥å¿—ã€é›†ä¸­å­˜å‚¨åˆ†æ

**ğŸ›  å¼€å‘æœ€ä½³å®è·µ**
- **å¹‚ç­‰å¤„ç†**ï¼šæ‰€æœ‰æ¶ˆè´¹é€»è¾‘éƒ½è¦è€ƒè™‘é‡å¤æ¶ˆè´¹
- **å¼‚å¸¸å¤„ç†**ï¼šåŒºåˆ†å¯é‡è¯•å’Œä¸å¯é‡è¯•å¼‚å¸¸
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæ‰¹é‡å¤„ç†ã€å¼‚æ­¥åŒ–ã€è¿æ¥æ± 
- **ç›‘æ§åŸ‹ç‚¹**ï¼šå…³é”®èŠ‚ç‚¹è®°å½•è€—æ—¶å’ŒçŠ¶æ€

### 9.4 æ•…éšœåº”æ€¥é¢„æ¡ˆ


**ğŸš¨ ç´§æ€¥æƒ…å†µå¤„ç†**

| **æ•…éšœç±»å‹** | **åº”æ€¥æªæ–½** | **æ¢å¤æ—¶é—´** |
|-------------|-------------|-------------|
| **å¤§é‡ç§¯å‹** | `æ‰©å®¹æ¶ˆè´¹è€…å®ä¾‹` | `10-30åˆ†é’Ÿ` |
| **é‡å¤æ¶ˆè´¹** | `æš‚åœæ¶ˆè´¹,æ£€æŸ¥å¹‚ç­‰æ€§` | `5-15åˆ†é’Ÿ` |
| **æ¶ˆè´¹åœæ»** | `é‡å¯æ¶ˆè´¹è€…,é‡ç½®åç§»é‡` | `5-10åˆ†é’Ÿ` |
| **æ•°æ®ä¹±ç ** | `æ£€æŸ¥åºåˆ—åŒ–é…ç½®` | `10-20åˆ†é’Ÿ` |

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
æ¶ˆè´¹è€…é—®é¢˜è¦ç»†å¿ƒï¼Œæ—¥å¿—ç›‘æ§æ˜¯æ³•å®
é‡å¹³è¡¡é¢‘ç¹æŸ¥è¶…æ—¶ï¼Œæ€§èƒ½é—®é¢˜çœ‹ç§¯å‹  
é‡å¤æ¶ˆè´¹è¦å¹‚ç­‰ï¼Œæ¶ˆæ¯ä¸¢å¤±ç¦è‡ªåŠ¨
åºåˆ—åŒ–é”™è¦å®¹é”™ï¼Œåè°ƒå™¨é—®é¢˜æŸ¥ç½‘ç»œ
ç›‘æ§å‘Šè­¦è¦åŠæ—¶ï¼Œé¢„é˜²èƒœè¿‡æ²»ç–—å¥½
```

> **ğŸ’¡ ç»éªŒæ€»ç»“**ï¼šKafkaæ¶ˆè´¹è€…é—®é¢˜è™½ç„¶å¤æ‚ï¼Œä½†åªè¦æŒæ¡äº†è¯Šæ–­æ€è·¯å’Œè§£å†³æ–¹æ³•ï¼Œå¤§éƒ¨åˆ†é—®é¢˜éƒ½èƒ½å¿«é€Ÿå®šä½å’Œä¿®å¤ã€‚å…³é”®æ˜¯è¦æœ‰è€å¿ƒï¼Œä¸€æ­¥ä¸€æ­¥åˆ†æï¼Œä¸è¦ç—…æ€¥ä¹±æŠ•åŒ»ã€‚