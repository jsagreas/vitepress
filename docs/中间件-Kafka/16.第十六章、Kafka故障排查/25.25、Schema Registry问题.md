---
title: 25ã€Schema Registryé—®é¢˜
---
## ğŸ“š ç›®å½•

1. [Schema RegistryåŸºç¡€æ¦‚å¿µ](#1-Schema-RegistryåŸºç¡€æ¦‚å¿µ)
2. [Schemaæ³¨å†ŒæœåŠ¡ä¸å¯ç”¨](#2-Schemaæ³¨å†ŒæœåŠ¡ä¸å¯ç”¨)
3. [Schemaç‰ˆæœ¬å…¼å®¹æ€§å†²çª](#3-Schemaç‰ˆæœ¬å…¼å®¹æ€§å†²çª)
4. [Schemaç¼“å­˜é—®é¢˜](#4-Schemaç¼“å­˜é—®é¢˜)
5. [åºåˆ—åŒ–IDå†²çª](#5-åºåˆ—åŒ–IDå†²çª)
6. [Schemaå­˜å‚¨åç«¯å¼‚å¸¸](#6-Schemaå­˜å‚¨åç«¯å¼‚å¸¸)
7. [å…¼å®¹æ€§æ£€æŸ¥å¤±è´¥](#7-å…¼å®¹æ€§æ£€æŸ¥å¤±è´¥)
8. [Schemaåˆ é™¤å¤±è´¥](#8-Schemaåˆ é™¤å¤±è´¥)
9. [å¤šç¯å¢ƒSchemaåŒæ­¥é—®é¢˜](#9-å¤šç¯å¢ƒSchemaåŒæ­¥é—®é¢˜)
10. [Schema Registryé›†ç¾¤é—®é¢˜](#10-Schema-Registryé›†ç¾¤é—®é¢˜)
11. [è®¿é—®æƒé™é…ç½®é”™è¯¯](#11-è®¿é—®æƒé™é…ç½®é”™è¯¯)
12. [Schemaè¿ç§»å¤±è´¥](#12-Schemaè¿ç§»å¤±è´¥)
13. [APIè°ƒç”¨é™æµé—®é¢˜](#13-APIè°ƒç”¨é™æµé—®é¢˜)
14. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#14-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ Schema RegistryåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Schema Registry


**ç®€å•ç†è§£**ï¼šSchema Registryå°±åƒæ˜¯ä¸€ä¸ª**æ•°æ®æ ¼å¼ç®¡ç†å‘˜**ï¼Œä¸“é—¨è´Ÿè´£ç®¡ç†Kafkaæ¶ˆæ¯çš„æ•°æ®ç»“æ„å®šä¹‰ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆå®¹æ˜“å‡ºé”™ï¼‰ï¼š
ç”Ÿäº§è€… â†’ å‘é€ä»»æ„æ ¼å¼æ•°æ® â†’ Kafka â†’ æ¶ˆè´¹è€…ï¼ˆä¸çŸ¥é“æ•°æ®æ ¼å¼ï¼‰

ä½¿ç”¨Schema Registryï¼š
ç”Ÿäº§è€… â†’ æ³¨å†Œæ•°æ®æ ¼å¼ â†’ Schema Registry â†’ æ¶ˆè´¹è€…è·å–æ ¼å¼å®šä¹‰
              â†“
         Kafkaï¼ˆå¸¦æ ¼å¼æ ‡è¯†çš„æ•°æ®ï¼‰
```

### 1.2 æ ¸å¿ƒä½œç”¨


**ğŸ”¸ æ•°æ®æ ¼å¼ç»Ÿä¸€ç®¡ç†**
```
ä½œç”¨ï¼šç¡®ä¿æ‰€æœ‰åº”ç”¨ä½¿ç”¨ç›¸åŒçš„æ•°æ®æ ¼å¼
å¥½å¤„ï¼šé¿å…"é¸¡åŒé¸­è®²"çš„é—®é¢˜
ä¾‹å­ï¼šç”¨æˆ·ä¿¡æ¯å¿…é¡»åŒ…å«å§“åã€å¹´é¾„ã€é‚®ç®±ä¸‰ä¸ªå­—æ®µ
```

**ğŸ”¸ ç‰ˆæœ¬å…¼å®¹æ€§æ§åˆ¶**
```
æ–°ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥ï¼š
- æ–°å¢å­—æ®µ âœ… å…è®¸ï¼ˆå‘å‰å…¼å®¹ï¼‰
- åˆ é™¤å¿…å¡«å­—æ®µ âŒ ç¦æ­¢ï¼ˆç ´åå…¼å®¹æ€§ï¼‰
- ä¿®æ”¹å­—æ®µç±»å‹ âŒ ç¦æ­¢ï¼ˆç ´åå…¼å®¹æ€§ï¼‰
```

### 1.3 å·¥ä½œåŸç†å›¾ç¤º


```
Schema Registryæ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§è€…åº”ç”¨  â”‚    â”‚ Schema Registry â”‚    â”‚  æ¶ˆè´¹è€…åº”ç”¨  â”‚
â”‚            â”‚    â”‚                â”‚    â”‚            â”‚
â”‚ 1.æ³¨å†ŒSchemaâ”‚â”€â”€â”€â–¶â”‚  Schemaå­˜å‚¨     â”‚â—€â”€â”€â”€â”‚ 3.è·å–Schemaâ”‚
â”‚ 2.å‘é€æ•°æ®  â”‚    â”‚  å…¼å®¹æ€§æ£€æŸ¥     â”‚    â”‚ 4.è§£ææ•°æ®  â”‚
â”‚            â”‚    â”‚  ç‰ˆæœ¬ç®¡ç†       â”‚    â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼          â–¼          â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚         Kafka Cluster          â”‚
           â”‚   æ¶ˆæ¯ = æ•°æ® + Schema ID      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸš« Schemaæ³¨å†ŒæœåŠ¡ä¸å¯ç”¨


### 2.1 é—®é¢˜ç°è±¡


**å…¸å‹é”™è¯¯ä¿¡æ¯**ï¼š
- `Connection refused to Schema Registry`
- `Schema Registry service unavailable`
- `Unable to register schema`

**è¡¨ç°ç—‡çŠ¶**ï¼š
- åº”ç”¨å¯åŠ¨å¤±è´¥ï¼Œæ— æ³•è¿æ¥Schema Registry
- ç”Ÿäº§è€…æ— æ³•å‘é€æ¶ˆæ¯
- æ¶ˆè´¹è€…æ— æ³•è§£ææ¶ˆæ¯

### 2.2 æ•…éšœæ’æŸ¥æ­¥éª¤


**ğŸ” ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€**
```bash
# æ£€æŸ¥Schema Registryè¿›ç¨‹
ps aux | grep schema-registry

# æ£€æŸ¥ç«¯å£ç›‘å¬çŠ¶æ€
netstat -tlnp | grep 8081

# æµ‹è¯•æœåŠ¡å“åº”
curl http://localhost:8081/subjects
```

**ğŸ” ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹æœåŠ¡æ—¥å¿—**
```bash
# æŸ¥çœ‹Schema Registryæ—¥å¿—
tail -f /var/log/schema-registry/schema-registry.log

# å¸¸è§é”™è¯¯æ¨¡å¼
grep -i "error\|exception\|failed" schema-registry.log
```

### 2.3 å¸¸è§åŸå› ä¸è§£å†³æ–¹æ¡ˆ


**ğŸ”¸ åŸå› 1ï¼šæœåŠ¡æœªå¯åŠ¨**
```bash
# è§£å†³æ–¹æ¡ˆï¼šå¯åŠ¨æœåŠ¡
systemctl start confluent-schema-registry

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
/usr/bin/schema-registry-start /etc/schema-registry/schema-registry.properties
```

**ğŸ”¸ åŸå› 2ï¼šé…ç½®æ–‡ä»¶é”™è¯¯**
```properties
# æ£€æŸ¥å…³é”®é…ç½® schema-registry.properties
listeners=http://0.0.0.0:8081
kafkastore.bootstrap.servers=localhost:9092
kafkastore.topic=_schemas
debug=true
```

**ğŸ”¸ åŸå› 3ï¼šKafkaè¿æ¥é—®é¢˜**
```bash
# æ£€æŸ¥Kafkaè¿æ¥
kafka-topics --bootstrap-server localhost:9092 --list

# æ£€æŸ¥_schemasä¸»é¢˜
kafka-topics --bootstrap-server localhost:9092 --describe --topic _schemas
```

### 2.4 åº”æ€¥å¤„ç†æ–¹æ¡ˆ


**ä¸´æ—¶è§£å†³æ–¹æ¡ˆ**ï¼š
```
1. é‡å¯Schema RegistryæœåŠ¡
2. æ£€æŸ¥å¹¶ä¿®å¤é…ç½®æ–‡ä»¶
3. ç¡®ä¿Kafkaé›†ç¾¤æ­£å¸¸è¿è¡Œ
4. å¦‚æœä»å¤±è´¥ï¼Œè€ƒè™‘ä½¿ç”¨å¤‡ç”¨Schema Registryå®ä¾‹
```

---

## 3. âš¡ Schemaç‰ˆæœ¬å…¼å®¹æ€§å†²çª


### 3.1 å…¼å®¹æ€§ç±»å‹ç†è§£


**ğŸ”¸ å‘å‰å…¼å®¹ï¼ˆForward Compatibilityï¼‰**
```
å«ä¹‰ï¼šæ–°çš„Schemaå¯ä»¥è¯»å–è€ç‰ˆæœ¬çš„æ•°æ®
åº”ç”¨åœºæ™¯ï¼šæ¶ˆè´¹è€…å‡çº§æ¯”ç”Ÿäº§è€…å¿«çš„æƒ…å†µ

ç¤ºä¾‹ï¼š
è€ç‰ˆæœ¬Schemaï¼ˆv1ï¼‰ï¼š{ "name": "string", "age": "int" }
æ–°ç‰ˆæœ¬Schemaï¼ˆv2ï¼‰ï¼š{ "name": "string", "age": "int", "email": "string" }
ç»“æœï¼šv2æ¶ˆè´¹è€…å¯ä»¥è¯»å–v1ç”Ÿäº§è€…çš„æ•°æ® âœ…
```

**ğŸ”¸ å‘åå…¼å®¹ï¼ˆBackward Compatibilityï¼‰**
```
å«ä¹‰ï¼šè€çš„Schemaå¯ä»¥è¯»å–æ–°ç‰ˆæœ¬çš„æ•°æ®
åº”ç”¨åœºæ™¯ï¼šç”Ÿäº§è€…å‡çº§æ¯”æ¶ˆè´¹è€…å¿«çš„æƒ…å†µ

ç¤ºä¾‹ï¼š
è€ç‰ˆæœ¬Schemaï¼ˆv1ï¼‰ï¼š{ "name": "string", "age": "int", "email": "string" }
æ–°ç‰ˆæœ¬Schemaï¼ˆv2ï¼‰ï¼š{ "name": "string", "age": "int" }
ç»“æœï¼šv1æ¶ˆè´¹è€…å¯ä»¥è¯»å–v2ç”Ÿäº§è€…çš„æ•°æ® âœ…
```

### 3.2 å…¼å®¹æ€§å†²çªåœºæ™¯


**âŒ ç ´åå…¼å®¹æ€§çš„æ“ä½œ**

| æ“ä½œç±»å‹ | **å‘å‰å…¼å®¹** | **å‘åå…¼å®¹** | **è¯´æ˜** |
|---------|------------|------------|---------|
| åˆ é™¤å­—æ®µ | âŒ | âœ… | è€æ¶ˆè´¹è€…æ‰¾ä¸åˆ°å­—æ®µ |
| æ·»åŠ å¿…å¡«å­—æ®µ | âœ… | âŒ | è€æ•°æ®ç¼ºå°‘æ–°å­—æ®µ |
| ä¿®æ”¹å­—æ®µç±»å‹ | âŒ | âŒ | æ•°æ®ç±»å‹ä¸åŒ¹é… |
| é‡å‘½åå­—æ®µ | âŒ | âŒ | å­—æ®µåä¸ä¸€è‡´ |

**ğŸ”¸ å¸¸è§é”™è¯¯ç¤ºä¾‹**
```json
// åŸå§‹Schema v1
{
  "type": "record",
  "name": "User",
  "fields": [
    {"name": "id", "type": "int"},
    {"name": "name", "type": "string"},
    {"name": "email", "type": "string"}
  ]
}

// é”™è¯¯çš„v2 - åˆ é™¤äº†emailå­—æ®µ
{
  "type": "record", 
  "name": "User",
  "fields": [
    {"name": "id", "type": "int"},
    {"name": "name", "type": "string"}
  ]
}
// é”™è¯¯ï¼šç ´åäº†å‘å‰å…¼å®¹æ€§ï¼
```

### 3.3 è§£å†³å…¼å®¹æ€§å†²çª


**ğŸ”§ æ­£ç¡®çš„æ¼”è¿›æ–¹å¼**
```json
// æ­£ç¡®çš„v2 - æ–°å¢å¯é€‰å­—æ®µ
{
  "type": "record",
  "name": "User", 
  "fields": [
    {"name": "id", "type": "int"},
    {"name": "name", "type": "string"},
    {"name": "email", "type": "string"},
    {"name": "phone", "type": ["null", "string"], "default": null}
  ]
}
```

**ğŸ”§ å…¼å®¹æ€§ç­–ç•¥é…ç½®**
```bash
# è®¾ç½®å…¼å®¹æ€§çº§åˆ«
curl -X PUT http://localhost:8081/config/user-topic-value \
  -H "Content-Type: application/json" \
  -d '{"compatibility": "BACKWARD"}'

# å…¼å®¹æ€§çº§åˆ«è¯´æ˜ï¼š
# BACKWARD: å‘åå…¼å®¹
# FORWARD: å‘å‰å…¼å®¹  
# FULL: å®Œå…¨å…¼å®¹
# NONE: ä¸æ£€æŸ¥å…¼å®¹æ€§
```

---

## 4. ğŸ’¾ Schemaç¼“å­˜é—®é¢˜


### 4.1 ç¼“å­˜æœºåˆ¶ç†è§£


**ğŸ”¸ ç¼“å­˜çš„ä½œç”¨**
```
ç›®çš„ï¼šæé«˜æ€§èƒ½ï¼Œé¿å…é¢‘ç¹æŸ¥è¯¢Schema Registry
æœºåˆ¶ï¼šå®¢æˆ·ç«¯æœ¬åœ°ç¼“å­˜Schemaå®šä¹‰
é—®é¢˜ï¼šç¼“å­˜è¿‡æœŸæˆ–ä¸ä¸€è‡´æ—¶å‡ºç°æ•°æ®è§£æé”™è¯¯
```

**ğŸ”¸ ç¼“å­˜å·¥ä½œæµç¨‹**
```
ç¬¬ä¸€æ¬¡ä½¿ç”¨Schemaï¼š
å®¢æˆ·ç«¯ â†’ æŸ¥è¯¢Schema Registry â†’ è·å–Schema â†’ ç¼“å­˜åˆ°æœ¬åœ°

åç»­ä½¿ç”¨ï¼š
å®¢æˆ·ç«¯ â†’ æ£€æŸ¥æœ¬åœ°ç¼“å­˜ â†’ ç›´æ¥ä½¿ç”¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                      â†’ æŸ¥è¯¢è¿œç¨‹ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
```

### 4.2 ç¼“å­˜é—®é¢˜è¡¨ç°


**å¸¸è§ç—‡çŠ¶**ï¼š
- æ–°Schemaç‰ˆæœ¬ä¸ç”Ÿæ•ˆ
- æ•°æ®è§£æå‡ºç°æ—§æ ¼å¼
- å®¢æˆ·ç«¯ä½¿ç”¨è¿‡æœŸSchemaå®šä¹‰

**é”™è¯¯æ—¥å¿—ç¤ºä¾‹**ï¼š
```
Schema version mismatch: expected v2, got v1
Cached schema is outdated
Failed to deserialize with cached schema
```

### 4.3 ç¼“å­˜é—®é¢˜è§£å†³


**ğŸ”§ æ¸…ç†å®¢æˆ·ç«¯ç¼“å­˜**
```bash
# é‡å¯åº”ç”¨ï¼ˆæœ€ç®€å•æ–¹å¼ï¼‰
systemctl restart your-kafka-app

# æˆ–è€…ç¨‹åºå†…æ¸…ç†ç¼“å­˜
# Javaç¤ºä¾‹ï¼ˆå¦‚æœä½¿ç”¨Confluentå®¢æˆ·ç«¯ï¼‰
schemaRegistryClient.reset()
```

**ğŸ”§ è°ƒæ•´ç¼“å­˜é…ç½®**
```properties
# å®¢æˆ·ç«¯é…ç½®
schema.registry.url=http://localhost:8081
# ç¼“å­˜å¤§å°
max.schemas.per.subject=1000
# ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
schema.registry.cache.capacity=500
```

**ğŸ”§ å¼ºåˆ¶åˆ·æ–°ç­–ç•¥**
```java
// Javaä»£ç ç¤ºä¾‹
Properties props = new Properties();
props.put("schema.registry.url", "http://localhost:8081");
// ç¦ç”¨ç¼“å­˜è¿›è¡Œæµ‹è¯•
props.put("use.latest.version", "true");
```

---

## 5. ğŸ”¢ åºåˆ—åŒ–IDå†²çª


### 5.1 åºåˆ—åŒ–IDæœºåˆ¶


**ğŸ”¸ IDåˆ†é…åŸç†**
```
Schema Registryä¸ºæ¯ä¸ªSchemaç‰ˆæœ¬åˆ†é…å”¯ä¸€IDï¼š
- Schema v1 â†’ ID: 1
- Schema v2 â†’ ID: 2  
- Schema v3 â†’ ID: 3

æ¶ˆæ¯æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Schema IDâ”‚   å®é™…æ•°æ®      â”‚
â”‚ (4å­—èŠ‚)  â”‚   (å˜é•¿)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 IDå†²çªåœºæ™¯


**ğŸ”¸ å¤šç¯å¢ƒIDä¸ä¸€è‡´**
```
å¼€å‘ç¯å¢ƒï¼šuser-schema â†’ ID: 1
æµ‹è¯•ç¯å¢ƒï¼šuser-schema â†’ ID: 3
ç”Ÿäº§ç¯å¢ƒï¼šuser-schema â†’ ID: 5

é—®é¢˜ï¼šæ¶ˆæ¯åœ¨ç¯å¢ƒé—´è¿ç§»æ—¶IDå¯¹åº”é”™è¯¯
```

**ğŸ”¸ Schemaé‡å¤æ³¨å†Œ**
```bash
# é”™è¯¯ç¤ºä¾‹ï¼šåœ¨ä¸åŒæ—¶é—´æ³¨å†Œç›¸åŒSchema
curl -X POST http://localhost:8081/subjects/user-value/versions \
  -H "Content-Type: application/json" \
  -d '{"schema": "..."}'  # ç¬¬ä¸€æ¬¡ï¼šID=1

# ç¨åå†æ¬¡æ³¨å†Œ
curl -X POST http://localhost:8081/subjects/user-value/versions \
  -H "Content-Type: application/json" \
  -d '{"schema": "..."}'  # å¯èƒ½åˆ†é…ä¸åŒID
```

### 5.3 è§£å†³IDå†²çª


**ğŸ”§ ç¯å¢ƒåŒæ­¥æ–¹æ¡ˆ**
```bash
# å¯¼å‡ºSchemaå®šä¹‰
curl http://source-registry:8081/subjects > schemas-backup.json

# åœ¨ç›®æ ‡ç¯å¢ƒæŒ‰é¡ºåºæ³¨å†Œ
for schema in schemas-backup.json; do
  curl -X POST http://target-registry:8081/subjects/... \
    -d "$schema"
done
```

**ğŸ”§ ä½¿ç”¨Schemaåç§°è€ŒéID**
```properties
# é…ç½®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬è€Œéå›ºå®šID
use.latest.version=true
# æˆ–æŒ‡å®šç‰ˆæœ¬
specific.avro.reader=true
```

---

## 6. ğŸ—„ï¸ Schemaå­˜å‚¨åç«¯å¼‚å¸¸


### 6.1 å­˜å‚¨åç«¯ç†è§£


**ğŸ”¸ å­˜å‚¨æœºåˆ¶**
```
Schema Registryå°†Schemaå­˜å‚¨åœ¨Kafkaçš„ç‰¹æ®Šä¸»é¢˜ä¸­ï¼š
ä¸»é¢˜åï¼š_schemas
ä½œç”¨ï¼šæŒä¹…åŒ–ä¿å­˜æ‰€æœ‰Schemaå®šä¹‰å’Œç‰ˆæœ¬ä¿¡æ¯
```

**ğŸ”¸ å­˜å‚¨ç»“æ„**
```
_schemasä¸»é¢˜å†…å®¹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Key     â”‚         Value           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ subject:1   â”‚ Schema v1 definition    â”‚
â”‚ subject:2   â”‚ Schema v2 definition    â”‚
â”‚ config:...  â”‚ å…¼å®¹æ€§é…ç½®ä¿¡æ¯           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å­˜å‚¨å¼‚å¸¸è¡¨ç°


**å¸¸è§é”™è¯¯**ï¼š
- `Cannot write to _schemas topic`
- `Schema storage backend unavailable`
- `Inconsistent schema storage state`

### 6.3 æ’æŸ¥å­˜å‚¨é—®é¢˜


**ğŸ” æ£€æŸ¥_schemasä¸»é¢˜**
```bash
# æŸ¥çœ‹ä¸»é¢˜çŠ¶æ€
kafka-topics --bootstrap-server localhost:9092 \
  --describe --topic _schemas

# æ£€æŸ¥ä¸»é¢˜æ•°æ®
kafka-console-consumer --bootstrap-server localhost:9092 \
  --topic _schemas --from-beginning
```

**ğŸ” æ£€æŸ¥æƒé™é…ç½®**
```bash
# ç¡®ä¿Schema Registryæœ‰å†™å…¥æƒé™
kafka-acls --bootstrap-server localhost:9092 \
  --list --topic _schemas
```

### 6.4 ä¿®å¤å­˜å‚¨é—®é¢˜


**ğŸ”§ é‡å»º_schemasä¸»é¢˜**
```bash
# æ³¨æ„ï¼šè¿™ä¼šä¸¢å¤±æ‰€æœ‰Schemaï¼ä»…åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨
kafka-topics --bootstrap-server localhost:9092 \
  --delete --topic _schemas

kafka-topics --bootstrap-server localhost:9092 \
  --create --topic _schemas \
  --partitions 1 --replication-factor 3 \
  --config cleanup.policy=compact
```

---

## 7. âœ… å…¼å®¹æ€§æ£€æŸ¥å¤±è´¥


### 7.1 å…¼å®¹æ€§æ£€æŸ¥æœºåˆ¶


**ğŸ”¸ æ£€æŸ¥æ—¶æœº**
```
Schemaæ³¨å†Œæ—¶çš„æ£€æŸ¥æµç¨‹ï¼š
1. æ¥æ”¶æ–°Schemaæ³¨å†Œè¯·æ±‚
2. è·å–å½“å‰å…¼å®¹æ€§ç­–ç•¥
3. æ¯”è¾ƒæ–°Schemaä¸ç°æœ‰ç‰ˆæœ¬
4. é€šè¿‡ â†’ æ³¨å†ŒæˆåŠŸ
   å¤±è´¥ â†’ è¿”å›é”™è¯¯ï¼Œæ‹’ç»æ³¨å†Œ
```

### 7.2 æ£€æŸ¥å¤±è´¥åŸå› 


**ğŸ”¸ å¸¸è§å…¼å®¹æ€§é”™è¯¯**

| é”™è¯¯ç±»å‹ | **é”™è¯¯ä¿¡æ¯** | **è§£å†³æ–¹æ¡ˆ** |
|---------|------------|------------|
| å­—æ®µåˆ é™¤ | `Field removed breaks compatibility` | æ ‡è®°å­—æ®µä¸ºå¯é€‰è€Œéåˆ é™¤ |
| ç±»å‹å˜æ›´ | `Type change not allowed` | åˆ›å»ºæ–°å­—æ®µï¼Œä¿ç•™æ—§å­—æ®µ |
| å¿…å¡«å­—æ®µ | `Required field added` | æ·»åŠ é»˜è®¤å€¼ |

### 7.3 è§£å†³å…¼å®¹æ€§æ£€æŸ¥å¤±è´¥


**ğŸ”§ æ–¹æ¡ˆ1ï¼šä¿®æ”¹Schemaè®¾è®¡**
```json
// é”™è¯¯ç¤ºä¾‹
{
  "fields": [
    {"name": "id", "type": "string"}  // ä»intæ”¹ä¸ºstring âŒ
  ]
}

// æ­£ç¡®ç¤ºä¾‹  
{
  "fields": [
    {"name": "id", "type": "int"},              // ä¿ç•™åŸå­—æ®µ
    {"name": "id_str", "type": "string"}        // æ–°å¢å­—æ®µ
  ]
}
```

**ğŸ”§ æ–¹æ¡ˆ2ï¼šè°ƒæ•´å…¼å®¹æ€§ç­–ç•¥**
```bash
# ä¸´æ—¶æ”¾å®½å…¼å®¹æ€§è¦æ±‚ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
curl -X PUT http://localhost:8081/config/user-topic-value \
  -H "Content-Type: application/json" \
  -d '{"compatibility": "NONE"}'
```

**ğŸ”§ æ–¹æ¡ˆ3ï¼šå¼ºåˆ¶æ³¨å†Œï¼ˆç´§æ€¥æƒ…å†µï¼‰**
```bash
# ä½¿ç”¨forceå‚æ•°è·³è¿‡å…¼å®¹æ€§æ£€æŸ¥
curl -X POST http://localhost:8081/subjects/user-value/versions \
  -H "Content-Type: application/json" \
  -d '{"schema": "...", "force": true}'
```

---

## 8. ğŸ—‘ï¸ Schemaåˆ é™¤å¤±è´¥


### 8.1 åˆ é™¤é™åˆ¶ç†è§£


**ğŸ”¸ åˆ é™¤ç­–ç•¥**
```
Schema Registryåˆ é™¤é™åˆ¶ï¼š
- è½¯åˆ é™¤ï¼šæ ‡è®°ä¸ºåˆ é™¤ï¼Œä½†æ•°æ®ä»å­˜åœ¨
- ç¡¬åˆ é™¤ï¼šæ°¸ä¹…ç§»é™¤Schemaå’Œæ•°æ®
- ç‰ˆæœ¬åˆ é™¤ï¼šåˆ é™¤ç‰¹å®šç‰ˆæœ¬
- ä¸»é¢˜åˆ é™¤ï¼šåˆ é™¤æ•´ä¸ªä¸»é¢˜çš„æ‰€æœ‰Schema
```

### 8.2 åˆ é™¤å¤±è´¥åŸå› 


**ğŸ”¸ å¼•ç”¨ä¾èµ–é—®é¢˜**
```
Schema A å¼•ç”¨ Schema B
å°è¯•åˆ é™¤ Schema B â†’ å¤±è´¥
åŸå› ï¼šSchema A ä»åœ¨ä½¿ç”¨Schema B
```

**ğŸ”¸ æƒé™ä¸è¶³**
```
é”™è¯¯ä¿¡æ¯ï¼šPermission denied to delete schema
åŸå› ï¼šç”¨æˆ·æ²¡æœ‰åˆ é™¤Schemaçš„æƒé™
```

### 8.3 è§£å†³åˆ é™¤é—®é¢˜


**ğŸ”§ æ£€æŸ¥ä¾èµ–å…³ç³»**
```bash
# æŸ¥æ‰¾Schemaå¼•ç”¨å…³ç³»
curl http://localhost:8081/subjects/user-value/versions/1/referencedby
```

**ğŸ”§ æ­£ç¡®çš„åˆ é™¤é¡ºåº**
```bash
# 1. å…ˆåˆ é™¤å¼•ç”¨Schemaçš„ç‰ˆæœ¬
curl -X DELETE http://localhost:8081/subjects/dependent-schema/versions/1

# 2. å†åˆ é™¤è¢«å¼•ç”¨çš„Schema
curl -X DELETE http://localhost:8081/subjects/base-schema/versions/1

# 3. ç¡¬åˆ é™¤ï¼ˆå¦‚æœéœ€è¦ï¼‰
curl -X DELETE http://localhost:8081/subjects/base-schema?permanent=true
```

---

## 9. ğŸ”„ å¤šç¯å¢ƒSchemaåŒæ­¥é—®é¢˜


### 9.1 åŒæ­¥æŒ‘æˆ˜


**ğŸ”¸ ç¯å¢ƒå·®å¼‚**
```
å¸¸è§é—®é¢˜ï¼š
- å¼€å‘ç¯å¢ƒSchemaç‰ˆæœ¬ï¼šv1.5
- æµ‹è¯•ç¯å¢ƒSchemaç‰ˆæœ¬ï¼šv1.3  
- ç”Ÿäº§ç¯å¢ƒSchemaç‰ˆæœ¬ï¼šv1.2
ç»“æœï¼šæ¶ˆæ¯æ ¼å¼ä¸å…¼å®¹ï¼Œåº”ç”¨æŠ¥é”™
```

### 9.2 åŒæ­¥ç­–ç•¥


**ğŸ”¸ Schemaç‰ˆæœ¬ç®¡ç†æµç¨‹**
```
Schemaæ¼”è¿›æµç¨‹ï¼š
å¼€å‘ç¯å¢ƒ â†’ æµ‹è¯•ç¯å¢ƒ â†’ é¢„ç”Ÿäº§ç¯å¢ƒ â†’ ç”Ÿäº§ç¯å¢ƒ
   â†“         â†“           â†“           â†“
  æµ‹è¯•      é›†æˆæµ‹è¯•    æ€§èƒ½æµ‹è¯•     æ­£å¼å‘å¸ƒ
```

### 9.3 è‡ªåŠ¨åŒ–åŒæ­¥æ–¹æ¡ˆ


**ğŸ”§ å¯¼å‡ºå¯¼å…¥è„šæœ¬**
```bash
#!/bin/bash
# schema-sync.sh

SOURCE_REGISTRY="http://dev-registry:8081"
TARGET_REGISTRY="http://prod-registry:8081"

# å¯¼å‡ºæ‰€æœ‰Schema
curl $SOURCE_REGISTRY/subjects | jq -r '.[]' | while read subject; do
  echo "Syncing $subject..."
  
  # è·å–æœ€æ–°ç‰ˆæœ¬Schema
  schema=$(curl $SOURCE_REGISTRY/subjects/$subject/versions/latest)
  
  # å¯¼å…¥åˆ°ç›®æ ‡ç¯å¢ƒ
  curl -X POST $TARGET_REGISTRY/subjects/$subject/versions \
    -H "Content-Type: application/json" \
    -d "$schema"
done
```

**ğŸ”§ ç‰ˆæœ¬æ§åˆ¶é›†æˆ**
```bash
# å°†Schemaå®šä¹‰å­˜å‚¨åœ¨Gitä¸­
mkdir schemas/
curl http://registry:8081/subjects | jq -r '.[]' | while read subject; do
  curl http://registry:8081/subjects/$subject/versions/latest \
    > schemas/$subject.json
done

git add schemas/
git commit -m "Update schemas to latest version"
```

---

## 10. ğŸ—ï¸ Schema Registryé›†ç¾¤é—®é¢˜


### 10.1 é›†ç¾¤æ¶æ„ç†è§£


**ğŸ”¸ é›†ç¾¤éƒ¨ç½²æ¨¡å¼**
```
Schema Registryé›†ç¾¤ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Registry1  â”‚    â”‚  Registry2  â”‚    â”‚  Registry3  â”‚
â”‚   (Master)  â”‚    â”‚   (Slave)   â”‚    â”‚   (Slave)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Kafka Cluster   â”‚
                â”‚  (_schemas)     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 é›†ç¾¤é—®é¢˜è¡¨ç°


**ğŸ”¸ è„‘è£‚é—®é¢˜**
```
ç—‡çŠ¶ï¼šå¤šä¸ªèŠ‚ç‚¹åŒæ—¶è®¤ä¸ºè‡ªå·±æ˜¯ä¸»èŠ‚ç‚¹
ç»“æœï¼šSchemaæ³¨å†Œå†²çªï¼Œæ•°æ®ä¸ä¸€è‡´
åŸå› ï¼šç½‘ç»œåˆ†åŒºæˆ–é…ç½®é”™è¯¯
```

**ğŸ”¸ ä¸»èŠ‚ç‚¹åˆ‡æ¢å¤±è´¥**
```
ç—‡çŠ¶ï¼šä¸»èŠ‚ç‚¹æ•…éšœåï¼Œä»èŠ‚ç‚¹æ— æ³•æ¥ç®¡
è¡¨ç°ï¼šSchema RegistryæœåŠ¡ä¸å¯ç”¨
æ—¥å¿—ï¼šLeader election failed
```

### 10.3 é›†ç¾¤é—®é¢˜è§£å†³


**ğŸ”§ æ£€æŸ¥é›†ç¾¤çŠ¶æ€**
```bash
# æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çŠ¶æ€
curl http://registry1:8081/v1/metadata/id
curl http://registry2:8081/v1/metadata/id  
curl http://registry3:8081/v1/metadata/id

# æ£€æŸ¥ä¸»ä»å…³ç³»
for node in registry1 registry2 registry3; do
  echo "Node: $node"
  curl http://$node:8081/v1/mode
done
```

**ğŸ”§ ä¿®å¤é›†ç¾¤é…ç½®**
```properties
# schema-registry.properties
listeners=http://0.0.0.0:8081
kafkastore.bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092

# é›†ç¾¤é…ç½®
kafkastore.group.id=schema-registry
schema.registry.inter.instance.protocol=http
schema.registry.group.id=schema-registry
master.eligibility=true
```

---

## 11. ğŸ” è®¿é—®æƒé™é…ç½®é”™è¯¯


### 11.1 æƒé™æ¨¡å‹ç†è§£


**ğŸ”¸ Schema Registryæƒé™ä½“ç³»**
```
æƒé™å±‚çº§ï¼š
1. å…¨å±€æƒé™ï¼šç®¡ç†æ•´ä¸ªSchema Registry
2. ä¸»é¢˜æƒé™ï¼šç‰¹å®šä¸»é¢˜çš„Schemaæ“ä½œ
3. ç‰ˆæœ¬æƒé™ï¼šç‰¹å®šSchemaç‰ˆæœ¬çš„æ“ä½œ
```

### 11.2 å¸¸è§æƒé™é”™è¯¯


**ğŸ”¸ è®¤è¯å¤±è´¥**
```
é”™è¯¯ä¿¡æ¯ï¼šAuthentication failed
åŸå› ï¼šç”¨æˆ·åå¯†ç é”™è¯¯æˆ–æœªé…ç½®è®¤è¯
```

**ğŸ”¸ æˆæƒä¸è¶³**
```
é”™è¯¯ä¿¡æ¯ï¼šUser not authorized for operation
åŸå› ï¼šç”¨æˆ·æœ‰è®¤è¯ä½†æ²¡æœ‰ç›¸åº”æ“ä½œæƒé™
```

### 11.3 æƒé™é…ç½®ä¿®å¤


**ğŸ”§ RBACæƒé™é…ç½®**
```properties
# å¯ç”¨è®¤è¯
authentication.method=BASIC
authentication.realm=SchemaRegistry-Props
authentication.roles=admin,developer,readonly

# ç”¨æˆ·é…ç½®
admin: admin_password,admin
developer: dev_password,developer  
readonly: read_password,readonly
```

**ğŸ”§ æƒé™åˆ†é…ç¤ºä¾‹**
```bash
# ä¸ºå¼€å‘è€…åˆ†é…Schemaè¯»å†™æƒé™
curl -X POST http://admin:password@localhost:8081/security/1.0/principals/developer/roles/DeveloperWrite

# ä¸ºåªè¯»ç”¨æˆ·åˆ†é…è¯»å–æƒé™  
curl -X POST http://admin:password@localhost:8081/security/1.0/principals/readonly/roles/SystemAdmin
```

---

## 12. ğŸ“¦ Schemaè¿ç§»å¤±è´¥


### 12.1 è¿ç§»åœºæ™¯


**ğŸ”¸ å¸¸è§è¿ç§»éœ€æ±‚**
```
è¿ç§»åœºæ™¯ï¼š
1. å‡çº§Schema Registryç‰ˆæœ¬
2. æ›´æ¢Schema Registryå®ä¾‹
3. è·¨é›†ç¾¤æ•°æ®è¿ç§»
4. ç¾éš¾æ¢å¤åœºæ™¯
```

### 12.2 è¿ç§»å¤±è´¥åŸå› 


**ğŸ”¸ ç‰ˆæœ¬ä¸å…¼å®¹**
```
æºç‰ˆæœ¬ï¼šSchema Registry 5.x
ç›®æ ‡ç‰ˆæœ¬ï¼šSchema Registry 7.x
é—®é¢˜ï¼šå­˜å‚¨æ ¼å¼å˜åŒ–å¯¼è‡´è¿ç§»å¤±è´¥
```

**ğŸ”¸ æ•°æ®å®Œæ•´æ€§é—®é¢˜**
```
é—®é¢˜ï¼šéƒ¨åˆ†Schemaç‰ˆæœ¬ä¸¢å¤±
åŸå› ï¼š_schemasä¸»é¢˜æ•°æ®ä¸å®Œæ•´
è¡¨ç°ï¼šè¿ç§»åSchemaç‰ˆæœ¬ä¸è¿ç»­
```

### 12.3 è¿ç§»è§£å†³æ–¹æ¡ˆ


**ğŸ”§ å®Œæ•´è¿ç§»æ­¥éª¤**
```bash
# 1. å¤‡ä»½æºSchema Registry
curl http://source:8081/subjects > subjects-backup.json

# 2. å¯¼å‡ºæ¯ä¸ªä¸»é¢˜çš„æ‰€æœ‰ç‰ˆæœ¬
for subject in $(cat subjects-backup.json | jq -r '.[]'); do
  mkdir -p backup/$subject
  versions=$(curl http://source:8081/subjects/$subject/versions)
  
  for version in $(echo $versions | jq -r '.[]'); do
    curl http://source:8081/subjects/$subject/versions/$version \
      > backup/$subject/v$version.json
  done
done

# 3. åœ¨ç›®æ ‡ç¯å¢ƒæŒ‰é¡ºåºå¯¼å…¥
for subject in backup/*/; do
  subject_name=$(basename $subject)
  for version_file in $subject/v*.json; do
    curl -X POST http://target:8081/subjects/$subject_name/versions \
      -H "Content-Type: application/json" \
      -d @$version_file
  done
done
```

---

## 13. ğŸš¦ APIè°ƒç”¨é™æµé—®é¢˜


### 13.1 é™æµæœºåˆ¶ç†è§£


**ğŸ”¸ é™æµçš„ç›®çš„**
```
ä¿æŠ¤Schema Registryå…å—ä»¥ä¸‹å½±å“ï¼š
- æ¶æ„å¤§é‡è¯·æ±‚æ”»å‡»
- å®¢æˆ·ç«¯é”™è¯¯é…ç½®å¯¼è‡´çš„è¯·æ±‚é£æš´
- å•ä¸ªå®¢æˆ·ç«¯å ç”¨è¿‡å¤šèµ„æº
```

### 13.2 é™æµé”™è¯¯è¡¨ç°


**ğŸ”¸ å…¸å‹é”™è¯¯ä¿¡æ¯**
```
HTTP 429: Too Many Requests
Rate limit exceeded for client
API quota exhausted
```

**ğŸ”¸ é™æµè§¦å‘åœºæ™¯**
```
å¸¸è§è§¦å‘æƒ…å†µï¼š
1. é¢‘ç¹çš„SchemaæŸ¥è¯¢è¯·æ±‚
2. æ‰¹é‡Schemaæ³¨å†Œæ“ä½œ
3. å®¢æˆ·ç«¯é‡è¯•é€»è¾‘é”™è¯¯
4. å¤šä¸ªåº”ç”¨å…±äº«åŒä¸€å®¢æˆ·ç«¯é…ç½®
```

### 13.3 é™æµé—®é¢˜è§£å†³


**ğŸ”§ è°ƒæ•´é™æµé…ç½®**
```properties
# schema-registry.properties
# æ¯ç§’æœ€å¤§è¯·æ±‚æ•°
rate.limit.requests.per.second=100

# çªå‘è¯·æ±‚ç¼“å†²åŒºå¤§å°
rate.limit.burst.capacity=200

# é’ˆå¯¹ç‰¹å®šå®¢æˆ·ç«¯çš„é™åˆ¶
rate.limit.per.client=50
```

**ğŸ”§ å®¢æˆ·ç«¯ä¼˜åŒ–ç­–ç•¥**
```java
// å®ç°è¯·æ±‚é‡è¯•å’Œé€€é¿
public class SchemaRegistryClient {
    private static final int MAX_RETRIES = 3;
    private static final long RETRY_DELAY_MS = 1000;
    
    public Schema getSchema(int id) {
        for (int i = 0; i < MAX_RETRIES; i++) {
            try {
                return registryClient.getSchemaById(id);
            } catch (RateLimitException e) {
                if (i < MAX_RETRIES - 1) {
                    Thread.sleep(RETRY_DELAY_MS * (i + 1)); // æŒ‡æ•°é€€é¿
                } else {
                    throw e;
                }
            }
        }
    }
}
```

**ğŸ”§ ä½¿ç”¨è¿æ¥æ± å’Œç¼“å­˜**
```properties
# å®¢æˆ·ç«¯é…ç½®
schema.registry.url=http://localhost:8081
# å¯ç”¨å®¢æˆ·ç«¯ç¼“å­˜
max.schemas.per.subject=1000
# è¿æ¥æ± é…ç½®
schema.registry.connection.timeout.ms=30000
schema.registry.read.timeout.ms=30000
```

---

## 14. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 14.1 Schema Registryæ•…éšœåˆ†ç±»


```
ğŸ”¸ æœåŠ¡çº§æ•…éšœï¼š
â€¢ æœåŠ¡ä¸å¯ç”¨ â†’ æ£€æŸ¥è¿›ç¨‹ã€é…ç½®ã€ç½‘ç»œ
â€¢ é›†ç¾¤é—®é¢˜ â†’ æ£€æŸ¥ä¸»ä»çŠ¶æ€ã€é€‰ä¸¾æœºåˆ¶
â€¢ å­˜å‚¨åç«¯å¼‚å¸¸ â†’ æ£€æŸ¥_schemasä¸»é¢˜çŠ¶æ€

ğŸ”¸ æ•°æ®çº§æ•…éšœï¼š
â€¢ å…¼å®¹æ€§å†²çª â†’ æ£€æŸ¥Schemaæ¼”è¿›ç­–ç•¥
â€¢ ç‰ˆæœ¬é—®é¢˜ â†’ æ£€æŸ¥ç‰ˆæœ¬åºåˆ—å’ŒIDåˆ†é…
â€¢ ç¼“å­˜é—®é¢˜ â†’ æ¸…ç†å®¢æˆ·ç«¯ç¼“å­˜

ğŸ”¸ è®¿é—®çº§æ•…éšœï¼š
â€¢ æƒé™é”™è¯¯ â†’ æ£€æŸ¥è®¤è¯æˆæƒé…ç½®
â€¢ é™æµé—®é¢˜ â†’ è°ƒæ•´é€Ÿç‡é™åˆ¶å’Œå®¢æˆ·ç«¯ç­–ç•¥
â€¢ ç½‘ç»œé—®é¢˜ â†’ æ£€æŸ¥è¿æ¥å’Œè·¯ç”±é…ç½®
```

### 14.2 æ•…éšœæ’æŸ¥å·¥ä½œæµç¨‹


```
æ•…éšœæ’æŸ¥æ ‡å‡†æµç¨‹ï¼š

ç¬¬ä¸€æ­¥ï¼šç°è±¡ç¡®è®¤
â”œâ”€â”€ æ”¶é›†é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—
â”œâ”€â”€ ç¡®å®šå½±å“èŒƒå›´å’Œæ—¶é—´
â””â”€â”€ è¯„ä¼°ç´§æ€¥ç¨‹åº¦

ç¬¬äºŒæ­¥ï¼šåˆæ­¥è¯Šæ–­  
â”œâ”€â”€ æ£€æŸ¥æœåŠ¡åŸºæœ¬çŠ¶æ€
â”œâ”€â”€ éªŒè¯ç½‘ç»œè¿é€šæ€§
â””â”€â”€ æŸ¥çœ‹å…³é”®é…ç½®é¡¹

ç¬¬ä¸‰æ­¥ï¼šæ·±å…¥åˆ†æ
â”œâ”€â”€ åˆ†æè¯¦ç»†æ—¥å¿—
â”œâ”€â”€ æ£€æŸ¥ç›¸å…³ç»„ä»¶çŠ¶æ€
â””â”€â”€ å¤ç°é—®é¢˜åœºæ™¯

ç¬¬å››æ­¥ï¼šé—®é¢˜è§£å†³
â”œâ”€â”€ é€‰æ‹©é€‚å½“è§£å†³æ–¹æ¡ˆ
â”œâ”€â”€ å®æ–½ä¿®å¤æªæ–½
â””â”€â”€ éªŒè¯ä¿®å¤æ•ˆæœ

ç¬¬äº”æ­¥ï¼šé¢„é˜²æªæ–½
â”œâ”€â”€ æ€»ç»“é—®é¢˜åŸå› 
â”œâ”€â”€ ä¼˜åŒ–é…ç½®å’Œç›‘æ§
â””â”€â”€ åˆ¶å®šé¢„é˜²æ–¹æ¡ˆ
```

### 14.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ é¢„é˜²æ€§æªæ–½**
- **ç›‘æ§ä½“ç³»**ï¼šå»ºç«‹å®Œå–„çš„Schema Registryå¥åº·ç›‘æ§
- **å¤‡ä»½ç­–ç•¥**ï¼šå®šæœŸå¤‡ä»½Schemaå®šä¹‰å’Œé…ç½®
- **ç‰ˆæœ¬ç®¡ç†**ï¼šå»ºç«‹è§„èŒƒçš„Schemaç‰ˆæœ¬æ¼”è¿›æµç¨‹
- **æµ‹è¯•éªŒè¯**ï¼šåœ¨éç”Ÿäº§ç¯å¢ƒå……åˆ†æµ‹è¯•Schemaå˜æ›´

**ğŸ¯ åº”æ€¥å“åº”**
- **æ•…éšœæ‰‹å†Œ**ï¼šå‡†å¤‡è¯¦ç»†çš„æ•…éšœå¤„ç†æ‰‹å†Œ
- **è”ç³»æœºåˆ¶**ï¼šå»ºç«‹å¿«é€Ÿå“åº”å’Œå‡çº§æœºåˆ¶  
- **å›æ»šæ–¹æ¡ˆ**ï¼šå‡†å¤‡Schemaå’Œé…ç½®çš„å¿«é€Ÿå›æ»šæ–¹æ¡ˆ
- **é€šä¿¡è®¡åˆ’**ï¼šåŠæ—¶é€šçŸ¥ç›¸å…³å›¢é˜Ÿå’Œç”¨æˆ·

**æ ¸å¿ƒè®°å¿†**ï¼š
- Schema Registryæ˜¯Kafkaç”Ÿæ€ä¸­çš„**æ•°æ®æ ¼å¼ç®¡ç†ä¸­å¿ƒ**
- å¤§éƒ¨åˆ†é—®é¢˜éƒ½ä¸**å…¼å®¹æ€§ã€ç¼“å­˜ã€æƒé™**ç›¸å…³
- æ•…éšœæ’æŸ¥è¦**ç”±è¡¨åŠé‡Œï¼Œé€å±‚æ·±å…¥**
- é¢„é˜²èƒœäºæ²»ç–—ï¼Œ**ç›‘æ§å’Œè§„èŒƒ**æ˜¯å…³é”®