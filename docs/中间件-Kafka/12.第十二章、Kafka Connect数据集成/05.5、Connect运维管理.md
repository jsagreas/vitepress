---
title: 5ã€Connectè¿ç»´ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [Connecté›†ç¾¤éƒ¨ç½²](#1-Connecté›†ç¾¤éƒ¨ç½²)
2. [Workeré…ç½®è¯¦è§£](#2-Workeré…ç½®è¯¦è§£)
3. [è¿æ¥å™¨ç®¡ç†å®æˆ˜](#3-è¿æ¥å™¨ç®¡ç†å®æˆ˜)
4. [REST APIä½¿ç”¨æŒ‡å—](#4-REST-APIä½¿ç”¨æŒ‡å—)
5. [ç›‘æ§æŒ‡æ ‡ä½“ç³»](#5-ç›‘æ§æŒ‡æ ‡ä½“ç³»)
6. [æ—¥å¿—ç®¡ç†ç­–ç•¥](#6-æ—¥å¿—ç®¡ç†ç­–ç•¥)
7. [æ•…éšœæ’æŸ¥å®æˆ˜](#7-æ•…éšœæ’æŸ¥å®æˆ˜)
8. [æ€§èƒ½è°ƒä¼˜æŒ‡å—](#8-æ€§èƒ½è°ƒä¼˜æŒ‡å—)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ Connecté›†ç¾¤éƒ¨ç½²


### 1.1 ä»€ä¹ˆæ˜¯Kafka Connect


**ç®€å•ç†è§£**ï¼šæŠŠKafka Connectæƒ³è±¡æˆä¸€ä¸ª"æ•°æ®æ¬è¿å·¥"ï¼Œå®ƒä¸“é—¨è´Ÿè´£æŠŠæ•°æ®ä»å„ç§åœ°æ–¹ï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ã€å…¶ä»–ç³»ç»Ÿï¼‰æ¬åˆ°Kafkaï¼Œæˆ–è€…ä»Kafkaæ¬åˆ°å…¶ä»–åœ°æ–¹ã€‚

**ä¸ºä»€ä¹ˆéœ€è¦Connect**ï¼š
- **è§£å†³ç—›ç‚¹**ï¼šä¸ç”¨è‡ªå·±å†™ä»£ç å°±èƒ½å®ç°æ•°æ®åŒæ­¥
- **æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„æ•°æ®ä¼ è¾“æ–¹å¼
- **å¯é æ€§**ï¼šè‡ªåŠ¨å¤„ç†å¤±è´¥é‡è¯•ã€å®¹é”™ç­‰é—®é¢˜

```
ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦è‡ªå·±å†™ç¨‹åº
åº”ç”¨ â†’ è‡ªå†™ä»£ç  â†’ Kafka â†’ è‡ªå†™ä»£ç  â†’ æ•°æ®åº“

Connectæ–¹å¼ï¼šä½¿ç”¨ç°æˆçš„è¿æ¥å™¨
åº”ç”¨ â†’ Source Connector â†’ Kafka â†’ Sink Connector â†’ æ•°æ®åº“
```

### 1.2 Connecté›†ç¾¤æ¶æ„


**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **Worker**ï¼šè¿è¡Œè¿æ¥å™¨çš„å·¥ä½œè¿›ç¨‹ï¼ˆå°±åƒå·¥å‚é‡Œçš„å·¥äººï¼‰
- **Connector**ï¼šè¿æ¥å™¨é…ç½®ï¼ˆå‘Šè¯‰å·¥äººè¦åšä»€ä¹ˆå·¥ä½œï¼‰
- **Task**ï¼šå…·ä½“çš„å·¥ä½œä»»åŠ¡ï¼ˆå·¥äººæ‰‹ä¸­çš„å…·ä½“æ´»å„¿ï¼‰

```
Connecté›†ç¾¤æ¶æ„ç¤ºæ„å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Kafka Connecté›†ç¾¤                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Worker-1     â”‚    Worker-2     â”‚     Worker-3        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚Connector Aâ”‚  â”‚  â”‚Connector Bâ”‚  â”‚   â”‚Connector Câ”‚     â”‚
â”‚  â”‚  Task-1   â”‚  â”‚  â”‚  Task-1   â”‚  â”‚   â”‚  Task-1   â”‚     â”‚
â”‚  â”‚  Task-2   â”‚  â”‚  â”‚  Task-2   â”‚  â”‚   â”‚  Task-2   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Kafka     â”‚
                    â”‚   Cluster   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 éƒ¨ç½²æ¨¡å¼é€‰æ‹©


| éƒ¨ç½²æ¨¡å¼ | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŠ¿** | **åŠ£åŠ¿** |
|---------|------------|---------|---------|
| ğŸ”„ **åˆ†å¸ƒå¼æ¨¡å¼** | `ç”Ÿäº§ç¯å¢ƒï¼Œå¤šè¿æ¥å™¨` | `é«˜å¯ç”¨ï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»` | `é…ç½®å¤æ‚ï¼Œèµ„æºæ¶ˆè€—å¤§` |
| ğŸ  **ç‹¬ç«‹æ¨¡å¼** | `å¼€å‘æµ‹è¯•ï¼Œå•è¿æ¥å™¨` | `é…ç½®ç®€å•ï¼Œèµ„æºæ¶ˆè€—å°` | `æ— æ•…éšœè½¬ç§»ï¼Œå•ç‚¹æ•…éšœ` |

### 1.4 åˆ†å¸ƒå¼æ¨¡å¼éƒ¨ç½²å®æˆ˜


**ğŸ”§ ç¯å¢ƒå‡†å¤‡**
```bash
# 1. ç¡®ä¿Kafkaé›†ç¾¤å·²å¯åŠ¨
jps | grep Kafka

# 2. å‡†å¤‡Connecté…ç½®ç›®å½•
mkdir -p /opt/kafka/connect-configs
cd /opt/kafka/connect-configs
```

**ğŸ“ Workeré…ç½®æ–‡ä»¶**
```properties
# connect-distributed.properties
# æ ¸å¿ƒé…ç½®ï¼šå‘Šè¯‰Workeræ€ä¹ˆå·¥ä½œ

# é›†ç¾¤æ ‡è¯†ï¼ˆåŒä¸€é›†ç¾¤çš„Workerå¿…é¡»ç›¸åŒï¼‰
group.id=connect-cluster-1

# Kafkaé›†ç¾¤åœ°å€
bootstrap.servers=localhost:9092,localhost:9093,localhost:9094

# å­˜å‚¨é…ç½®ä¿¡æ¯çš„Topicï¼ˆConnectè‡ªåŠ¨åˆ›å»ºï¼‰
config.storage.topic=connect-configs
config.storage.replication.factor=3

# å­˜å‚¨åç§»é‡çš„Topic
offset.storage.topic=connect-offsets
offset.storage.replication.factor=3

# å­˜å‚¨çŠ¶æ€ä¿¡æ¯çš„Topic
status.storage.topic=connect-status
status.storage.replication.factor=3

# REST APIç«¯å£ï¼ˆç”¨äºç®¡ç†è¿æ¥å™¨ï¼‰
rest.port=8083

# æ•°æ®æ ¼å¼è½¬æ¢å™¨
key.converter=org.apache.kafka.connect.json.JsonConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
key.converter.schemas.enable=false
value.converter.schemas.enable=false
```

**ğŸš€ å¯åŠ¨Workeré›†ç¾¤**
```bash
# å¯åŠ¨ç¬¬ä¸€ä¸ªWorkerï¼ˆåœ¨æœåŠ¡å™¨1ä¸Šï¼‰
nohup bin/connect-distributed.sh config/connect-distributed.properties > logs/connect-1.log 2>&1 &

# å¯åŠ¨ç¬¬äºŒä¸ªWorkerï¼ˆåœ¨æœåŠ¡å™¨2ä¸Šï¼Œç«¯å£æ”¹ä¸º8084ï¼‰
# ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ rest.port=8084
nohup bin/connect-distributed.sh config/connect-distributed-2.properties > logs/connect-2.log 2>&1 &

# å¯åŠ¨ç¬¬ä¸‰ä¸ªWorkerï¼ˆåœ¨æœåŠ¡å™¨3ä¸Šï¼Œç«¯å£æ”¹ä¸º8085ï¼‰
nohup bin/connect-distributed.sh config/connect-distributed-3.properties > logs/connect-3.log 2>&1 &
```

**âœ… éªŒè¯é›†ç¾¤çŠ¶æ€**
```bash
# æ£€æŸ¥Workeræ˜¯å¦å¯åŠ¨æˆåŠŸ
curl http://localhost:8083/
curl http://localhost:8084/
curl http://localhost:8085/

# æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯
curl http://localhost:8083/connectors
```

---

## 2. âš™ï¸ Workeré…ç½®è¯¦è§£


### 2.1 Workeré…ç½®åˆ†ç±»


**ğŸ¯ æ ¸å¿ƒé…ç½®**ï¼šå¿…é¡»æ­£ç¡®è®¾ç½®çš„å…³é”®å‚æ•°
**ğŸ”§ æ€§èƒ½é…ç½®**ï¼šå½±å“è¿è¡Œæ•ˆç‡çš„å‚æ•°
**ğŸ›¡ï¸ å®‰å…¨é…ç½®**ï¼šä¿éšœæ•°æ®å®‰å…¨çš„å‚æ•°

### 2.2 å…³é”®é…ç½®å‚æ•°è§£æ


**ğŸ“‹ é›†ç¾¤ç›¸å…³é…ç½®**
```properties
# é›†ç¾¤æ ‡è¯†ï¼ˆé‡è¦ï¼ï¼‰
# ä½œç”¨ï¼šåŒºåˆ†ä¸åŒçš„Connecté›†ç¾¤
# æ³¨æ„ï¼šåŒä¸€é›†ç¾¤çš„æ‰€æœ‰Workerå¿…é¡»ç›¸åŒ
group.id=my-connect-cluster

# Kafkaè¿æ¥é…ç½®
bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092
# å®‰å…¨è¿æ¥é…ç½®ï¼ˆå¦‚æœKafkaå¯ç”¨äº†å®‰å…¨è®¤è¯ï¼‰
security.protocol=SASL_PLAINTEXT
sasl.mechanism=PLAIN
```

**ğŸ“Š å­˜å‚¨é…ç½®**
```properties
# é…ç½®å­˜å‚¨Topic
config.storage.topic=connect-configs
config.storage.replication.factor=3
config.storage.partitions=1

# åç§»é‡å­˜å‚¨Topic
offset.storage.topic=connect-offsets
offset.storage.replication.factor=3
offset.storage.partitions=25

# çŠ¶æ€å­˜å‚¨Topic
status.storage.topic=connect-status
status.storage.replication.factor=3
status.storage.partitions=5
```

**ğŸ’¡ é…ç½®è¯´æ˜**ï¼š
- **config.storage.topic**ï¼šå­˜å‚¨è¿æ¥å™¨é…ç½®ä¿¡æ¯
- **offset.storage.topic**ï¼šå­˜å‚¨æ•°æ®åŒæ­¥çš„è¿›åº¦ä¿¡æ¯
- **status.storage.topic**ï¼šå­˜å‚¨è¿æ¥å™¨å’Œä»»åŠ¡çš„çŠ¶æ€ä¿¡æ¯

### 2.3 æ€§èƒ½è°ƒä¼˜é…ç½®


**âš¡ ä»»åŠ¡æ‰§è¡Œé…ç½®**
```properties
# ä»»åŠ¡æ‰§è¡Œé…ç½®
tasks.max=8                    # å•ä¸ªè¿æ¥å™¨æœ€å¤§ä»»åŠ¡æ•°
task.shutdown.graceful.timeout.ms=30000  # ä»»åŠ¡ä¼˜é›…å…³é—­æ—¶é—´

# å†…éƒ¨Topicé…ç½®
offset.flush.interval.ms=10000  # åç§»é‡åˆ·æ–°é—´éš”
offset.flush.timeout.ms=5000   # åç§»é‡åˆ·æ–°è¶…æ—¶æ—¶é—´
```

**ğŸ”„ é‡è¯•å’Œå®¹é”™é…ç½®**
```properties
# é‡è¯•é…ç½®
retry.backoff.ms=100           # é‡è¯•é—´éš”
reconnect.backoff.ms=50        # é‡è¿é—´éš”
reconnect.backoff.max.ms=1000  # æœ€å¤§é‡è¿é—´éš”

# å¿ƒè·³é…ç½®
heartbeat.interval.ms=3000     # å¿ƒè·³é—´éš”
session.timeout.ms=30000       # ä¼šè¯è¶…æ—¶æ—¶é—´
```

### 2.4 è½¬æ¢å™¨é…ç½®è¯¦è§£


**æ•°æ®æ ¼å¼è½¬æ¢å™¨çš„ä½œç”¨**ï¼šæŠŠæ•°æ®åœ¨ä¸åŒæ ¼å¼ä¹‹é—´è½¬æ¢

```
æ•°æ®æµè½¬è¿‡ç¨‹ï¼š
å¤–éƒ¨ç³»ç»Ÿ â†’ Source Connector â†’ å†…éƒ¨æ ¼å¼ â†’ Kafka Topic â†’ å†…éƒ¨æ ¼å¼ â†’ Sink Connector â†’ å¤–éƒ¨ç³»ç»Ÿ
           â†‘                   â†‘                        â†‘                   â†‘
        åºåˆ—åŒ–è½¬æ¢å™¨          Key/Valueè½¬æ¢å™¨           ååºåˆ—åŒ–è½¬æ¢å™¨
```

**ğŸ“ å¸¸ç”¨è½¬æ¢å™¨é…ç½®**
```properties
# JSONè½¬æ¢å™¨ï¼ˆæœ€å¸¸ç”¨ï¼‰
key.converter=org.apache.kafka.connect.json.JsonConverter
value.converter=org.apache.kafka.connect.json.JsonConverter
key.converter.schemas.enable=false
value.converter.schemas.enable=false

# Avroè½¬æ¢å™¨ï¼ˆæ€§èƒ½æ›´å¥½ï¼Œä½†éœ€è¦Schema Registryï¼‰
# key.converter=io.confluent.connect.avro.AvroConverter
# value.converter=io.confluent.connect.avro.AvroConverter
# key.converter.schema.registry.url=http://localhost:8081
# value.converter.schema.registry.url=http://localhost:8081

# Stringè½¬æ¢å™¨ï¼ˆç®€å•æ•°æ®ï¼‰
# key.converter=org.apache.kafka.connect.storage.StringConverter
# value.converter=org.apache.kafka.connect.storage.StringConverter
```

---

## 3. ğŸ”— è¿æ¥å™¨ç®¡ç†å®æˆ˜


### 3.1 è¿æ¥å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†


**è¿æ¥å™¨çŠ¶æ€æµè½¬å›¾**ï¼š
```
[æœªåˆ›å»º] â†’ create â†’ [è¿è¡Œä¸­] â†’ pause â†’ [æš‚åœ]
   â†‘                    â†“                 â†“
   â””â”€â”€ delete â†â”€â”€â”€ resume â†â”€â”€â”€ [æš‚åœ] â”€â”€â†’ delete
                     â†‘
                  restart
```

### 3.2 Sourceè¿æ¥å™¨å®æˆ˜


**ğŸ”¸ FileStream Sourceè¿æ¥å™¨**ï¼šä»æ–‡ä»¶è¯»å–æ•°æ®å‘é€åˆ°Kafka

```bash
# 1. å‡†å¤‡æµ‹è¯•æ•°æ®æ–‡ä»¶
echo "line1: Hello Kafka Connect
line2: This is a test
line3: Data integration made easy" > /tmp/test-source.txt
```

**ğŸ“ åˆ›å»ºè¿æ¥å™¨é…ç½®**
```json
{
  "name": "file-source-connector",
  "config": {
    "connector.class": "FileStreamSource",
    "file": "/tmp/test-source.txt",
    "topic": "connect-test-topic",
    "tasks.max": "1"
  }
}
```

**ğŸš€ éƒ¨ç½²è¿æ¥å™¨**
```bash
# é€šè¿‡REST APIåˆ›å»ºè¿æ¥å™¨
curl -X POST http://localhost:8083/connectors \
  -H "Content-Type: application/json" \
  -d '{
    "name": "file-source-connector",
    "config": {
      "connector.class": "FileStreamSource",
      "file": "/tmp/test-source.txt",
      "topic": "connect-test-topic",
      "tasks.max": "1"
    }
  }'
```

### 3.3 Sinkè¿æ¥å™¨å®æˆ˜


**ğŸ”¸ FileStream Sinkè¿æ¥å™¨**ï¼šä»Kafkaè¯»å–æ•°æ®å†™å…¥æ–‡ä»¶

```bash
# åˆ›å»ºSinkè¿æ¥å™¨
curl -X POST http://localhost:8083/connectors \
  -H "Content-Type: application/json" \
  -d '{
    "name": "file-sink-connector",
    "config": {
      "connector.class": "FileStreamSink",
      "file": "/tmp/test-sink.txt",
      "topics": "connect-test-topic",
      "tasks.max": "1"
    }
  }'
```

**âœ… éªŒè¯æ•°æ®ä¼ è¾“**
```bash
# æŸ¥çœ‹è¾“å‡ºæ–‡ä»¶
cat /tmp/test-sink.txt

# å‘æºæ–‡ä»¶è¿½åŠ æ•°æ®æµ‹è¯•
echo "line4: New data added" >> /tmp/test-source.txt

# ç­‰å¾…å‡ ç§’åå†æ¬¡æŸ¥çœ‹è¾“å‡ºæ–‡ä»¶
sleep 5
cat /tmp/test-sink.txt
```

### 3.4 æ•°æ®åº“è¿æ¥å™¨é…ç½®


**ğŸ—„ï¸ JDBC Sourceè¿æ¥å™¨**ï¼šä»æ•°æ®åº“åŒæ­¥æ•°æ®åˆ°Kafka

```json
{
  "name": "mysql-source-connector",
  "config": {
    "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
    "connection.url": "jdbc:mysql://localhost:3306/testdb",
    "connection.user": "kafka_user",
    "connection.password": "kafka_pass",
    "table.whitelist": "users,orders",
    "mode": "incrementing",
    "incrementing.column.name": "id",
    "topic.prefix": "mysql-",
    "poll.interval.ms": "60000",
    "tasks.max": "3"
  }
}
```

**ğŸ“Š é…ç½®å‚æ•°è¯´æ˜**ï¼š
- **connection.url**ï¼šæ•°æ®åº“è¿æ¥åœ°å€
- **table.whitelist**ï¼šè¦åŒæ­¥çš„è¡¨åï¼ˆç™½åå•ï¼‰
- **mode**ï¼šåŒæ­¥æ¨¡å¼ï¼ˆincrementing/timestamp/bulkï¼‰
- **incrementing.column.name**ï¼šå¢é‡åŒæ­¥çš„åˆ—å
- **poll.interval.ms**ï¼šè½®è¯¢é—´éš”ï¼ˆæ¯«ç§’ï¼‰

---

## 4. ğŸŒ REST APIä½¿ç”¨æŒ‡å—


### 4.1 REST APIæ¦‚è§ˆ


**APIçš„ä½œç”¨**ï¼šé€šè¿‡HTTPè¯·æ±‚ç®¡ç†Connecté›†ç¾¤å’Œè¿æ¥å™¨

**åŸºæœ¬URLæ ¼å¼**ï¼š`http://worker-host:port/api-path`

### 4.2 é›†ç¾¤ç®¡ç†API


**ğŸ“Š æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯**
```bash
# æŸ¥çœ‹Connecté›†ç¾¤åŸºæœ¬ä¿¡æ¯
curl http://localhost:8083/

# æŸ¥çœ‹é›†ç¾¤ä¸­çš„Workeråˆ—è¡¨
curl http://localhost:8083/admin/loggers

# æŸ¥çœ‹è¿æ¥å™¨æ’ä»¶åˆ—è¡¨
curl http://localhost:8083/connector-plugins
```

**ğŸ”§ é›†ç¾¤é…ç½®ç®¡ç†**
```bash
# æŸ¥çœ‹é›†ç¾¤é…ç½®
curl http://localhost:8083/admin/loggers

# åŠ¨æ€ä¿®æ”¹æ—¥å¿—çº§åˆ«
curl -X PUT http://localhost:8083/admin/loggers/org.apache.kafka.connect \
  -H "Content-Type: application/json" \
  -d '{"level": "DEBUG"}'
```

### 4.3 è¿æ¥å™¨ç®¡ç†API


**ğŸ“‹ è¿æ¥å™¨CRUDæ“ä½œ**
```bash
# 1. æŸ¥çœ‹æ‰€æœ‰è¿æ¥å™¨
curl http://localhost:8083/connectors

# 2. æŸ¥çœ‹ç‰¹å®šè¿æ¥å™¨çŠ¶æ€
curl http://localhost:8083/connectors/file-source-connector/status

# 3. æŸ¥çœ‹è¿æ¥å™¨é…ç½®
curl http://localhost:8083/connectors/file-source-connector/config

# 4. æ›´æ–°è¿æ¥å™¨é…ç½®
curl -X PUT http://localhost:8083/connectors/file-source-connector/config \
  -H "Content-Type: application/json" \
  -d '{
    "connector.class": "FileStreamSource",
    "file": "/tmp/updated-source.txt",
    "topic": "connect-test-topic",
    "tasks.max": "2"
  }'

# 5. åˆ é™¤è¿æ¥å™¨
curl -X DELETE http://localhost:8083/connectors/file-source-connector
```

### 4.4 è¿æ¥å™¨ç”Ÿå‘½å‘¨æœŸæ§åˆ¶


**â¯ï¸ å¯åœæ§åˆ¶**
```bash
# æš‚åœè¿æ¥å™¨
curl -X PUT http://localhost:8083/connectors/file-source-connector/pause

# æ¢å¤è¿æ¥å™¨
curl -X PUT http://localhost:8083/connectors/file-source-connector/resume

# é‡å¯è¿æ¥å™¨
curl -X POST http://localhost:8083/connectors/file-source-connector/restart

# é‡å¯ç‰¹å®šä»»åŠ¡
curl -X POST http://localhost:8083/connectors/file-source-connector/tasks/0/restart
```

### 4.5 ä»»åŠ¡ç®¡ç†API


**ğŸ“ˆ ä»»åŠ¡çŠ¶æ€ç›‘æ§**
```bash
# æŸ¥çœ‹è¿æ¥å™¨çš„æ‰€æœ‰ä»»åŠ¡
curl http://localhost:8083/connectors/file-source-connector/tasks

# æŸ¥çœ‹ç‰¹å®šä»»åŠ¡çŠ¶æ€
curl http://localhost:8083/connectors/file-source-connector/tasks/0/status

# è·å–ä»»åŠ¡é…ç½®
curl http://localhost:8083/connectors/file-source-connector/tasks/0/config
```

---

## 5. ğŸ“Š ç›‘æ§æŒ‡æ ‡ä½“ç³»


### 5.1 ç›‘æ§æŒ‡æ ‡åˆ†ç±»


**ğŸ¯ å…³é”®ç›‘æ§ç»´åº¦**ï¼š
- **è¿æ¥å™¨çº§åˆ«**ï¼šè¿æ¥å™¨çŠ¶æ€ã€ä»»åŠ¡æ•°é‡
- **ä»»åŠ¡çº§åˆ«**ï¼šä»»åŠ¡çŠ¶æ€ã€å¤„ç†é€Ÿåº¦
- **Workerçº§åˆ«**ï¼šèµ„æºä½¿ç”¨ã€é”™è¯¯ç‡
- **é›†ç¾¤çº§åˆ«**ï¼šæ•´ä½“å¥åº·çŠ¶å†µ

### 5.2 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**âš¡ æ€§èƒ½æŒ‡æ ‡**
```
æ•°æ®å¤„ç†æ€§èƒ½ï¼š
â”œâ”€â”€ source-record-poll-rate          # Sourceè®°å½•è½®è¯¢é€Ÿç‡
â”œâ”€â”€ source-record-write-rate         # Sourceè®°å½•å†™å…¥é€Ÿç‡  
â”œâ”€â”€ sink-record-read-rate            # Sinkè®°å½•è¯»å–é€Ÿç‡
â”œâ”€â”€ sink-record-send-rate            # Sinkè®°å½•å‘é€é€Ÿç‡
â””â”€â”€ task-error-rate                  # ä»»åŠ¡é”™è¯¯ç‡
```

**ğŸ¥ å¥åº·çŠ¶æ€æŒ‡æ ‡**
```
è¿æ¥å™¨å¥åº·çŠ¶æ€ï¼š
â”œâ”€â”€ connector-startup-attempts       # è¿æ¥å™¨å¯åŠ¨å°è¯•æ¬¡æ•°
â”œâ”€â”€ connector-startup-success        # è¿æ¥å™¨å¯åŠ¨æˆåŠŸæ¬¡æ•°
â”œâ”€â”€ task-startup-attempts           # ä»»åŠ¡å¯åŠ¨å°è¯•æ¬¡æ•°
â”œâ”€â”€ task-startup-failure             # ä»»åŠ¡å¯åŠ¨å¤±è´¥æ¬¡æ•°
â””â”€â”€ connector-destroyed-task-count   # é”€æ¯çš„ä»»åŠ¡æ•°é‡
```

### 5.3 JMXç›‘æ§é…ç½®


**ğŸ”§ å¯ç”¨JMXç›‘æ§**
```bash
# å¯åŠ¨Workeræ—¶æ·»åŠ JMXå‚æ•°
export KAFKA_JMX_OPTS="-Dcom.sun.management.jmxremote \
  -Dcom.sun.management.jmxremote.authenticate=false \
  -Dcom.sun.management.jmxremote.ssl=false \
  -Dcom.sun.management.jmxremote.port=9999"

# å¯åŠ¨Connect Worker
bin/connect-distributed.sh config/connect-distributed.properties
```

**ğŸ“ˆ ç›‘æ§æŒ‡æ ‡æŸ¥è¯¢**
```bash
# ä½¿ç”¨JConsoleæˆ–è€…ç¼–ç¨‹æ–¹å¼æŸ¥è¯¢æŒ‡æ ‡
# è¿æ¥å™¨çŠ¶æ€æŒ‡æ ‡
kafka.connect:type=connector-metrics,connector=file-source-connector

# ä»»åŠ¡çŠ¶æ€æŒ‡æ ‡  
kafka.connect:type=task-metrics,connector=file-source-connector,task=0

# WorkerçŠ¶æ€æŒ‡æ ‡
kafka.connect:type=connect-worker-metrics
```

### 5.4 å‘Šè­¦è§„åˆ™è®¾ç½®


**âš ï¸ å…³é”®å‘Šè­¦æŒ‡æ ‡**

| æŒ‡æ ‡ç±»å‹ | **å‘Šè­¦æ¡ä»¶** | **ä¸¥é‡çº§åˆ«** | **è¯´æ˜** |
|---------|------------|-------------|---------|
| ğŸ”´ **è¿æ¥å™¨çŠ¶æ€** | `çŠ¶æ€ != RUNNING` | `ä¸¥é‡` | `è¿æ¥å™¨æ— æ³•æ­£å¸¸è¿è¡Œ` |
| ğŸŸ¡ **ä»»åŠ¡é”™è¯¯ç‡** | `é”™è¯¯ç‡ > 5%` | `è­¦å‘Š` | `ä»»åŠ¡å¤„ç†å¼‚å¸¸å¢å¤š` |
| ğŸ”´ **æ•°æ®å»¶è¿Ÿ** | `å»¶è¿Ÿ > 5åˆ†é’Ÿ` | `ä¸¥é‡` | `æ•°æ®åŒæ­¥ä¸¥é‡å»¶è¿Ÿ` |
| ğŸŸ¡ **èµ„æºä½¿ç”¨** | `CPU > 80%` | `è­¦å‘Š` | `Workerèµ„æºç´§å¼ ` |

---

## 6. ğŸ“ æ—¥å¿—ç®¡ç†ç­–ç•¥


### 6.1 æ—¥å¿—åˆ†ç±»ä¸é…ç½®


**ğŸ“‹ Connectæ—¥å¿—ä½“ç³»**ï¼š
```
Connectæ—¥å¿—åˆ†ç±»ï¼š
â”œâ”€â”€ connect.log              # ä¸»è¦æ—¥å¿—ï¼ˆWorkerå¯åŠ¨ã€é…ç½®ç­‰ï¼‰
â”œâ”€â”€ connect-gc.log          # GCæ—¥å¿—
â”œâ”€â”€ kafka-request.log       # Kafkaè¯·æ±‚æ—¥å¿—
â””â”€â”€ è‡ªå®šä¹‰è¿æ¥å™¨æ—¥å¿—         # è¿æ¥å™¨ç‰¹å®šæ—¥å¿—
```

### 6.2 æ—¥å¿—çº§åˆ«é…ç½®


**ğŸ”§ Log4jé…ç½®æ–‡ä»¶**
```properties
# connect-log4j.properties
log4j.rootLogger=INFO, stdout, connectAppender

# Connectæ ¸å¿ƒæ—¥å¿—
log4j.logger.org.apache.kafka.connect=INFO, connectAppender
log4j.additivity.org.apache.kafka.connect=false

# è¿æ¥å™¨æ—¥å¿—
log4j.logger.io.confluent.connect=DEBUG, connectorAppender
log4j.additivity.io.confluent.connect=false

# æ–‡ä»¶è¾“å‡ºé…ç½®
log4j.appender.connectAppender=org.apache.log4j.RollingFileAppender
log4j.appender.connectAppender.File=/opt/kafka/logs/connect.log
log4j.appender.connectAppender.MaxFileSize=100MB
log4j.appender.connectAppender.MaxBackupIndex=10
log4j.appender.connectAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.connectAppender.layout.ConversionPattern=[%d] %p %m (%c)%n
```

### 6.3 åŠ¨æ€æ—¥å¿—çº§åˆ«è°ƒæ•´


**ğŸ”„ è¿è¡Œæ—¶è°ƒæ•´æ—¥å¿—çº§åˆ«**
```bash
# æŸ¥çœ‹å½“å‰æ—¥å¿—çº§åˆ«
curl http://localhost:8083/admin/loggers/org.apache.kafka.connect

# è°ƒæ•´ä¸ºDEBUGçº§åˆ«ï¼ˆç”¨äºæ•…éšœæ’æŸ¥ï¼‰
curl -X PUT http://localhost:8083/admin/loggers/org.apache.kafka.connect \
  -H "Content-Type: application/json" \
  -d '{"level": "DEBUG"}'

# æ¢å¤ä¸ºINFOçº§åˆ«
curl -X PUT http://localhost:8083/admin/loggers/org.apache.kafka.connect \
  -H "Content-Type: application/json" \
  -d '{"level": "INFO"}'
```

### 6.4 æ—¥å¿—åˆ†æä¸ç›‘æ§


**ğŸ“Š å…³é”®æ—¥å¿—æ¨¡å¼**
```bash
# æŸ¥çœ‹è¿æ¥å™¨å¯åŠ¨æ—¥å¿—
grep "Starting connector" /opt/kafka/logs/connect.log

# æŸ¥çœ‹ä»»åŠ¡åˆ›å»ºæ—¥å¿—
grep "Creating task" /opt/kafka/logs/connect.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" /opt/kafka/logs/connect.log | tail -20

# æŸ¥çœ‹è¿æ¥å™¨çŠ¶æ€å˜åŒ–
grep "State transition" /opt/kafka/logs/connect.log
```

**ğŸ” æ—¥å¿—ç›‘æ§è„šæœ¬ç¤ºä¾‹**
```bash
#!/bin/bash
# monitor-connect.sh
LOG_FILE="/opt/kafka/logs/connect.log"
ERROR_COUNT=$(grep "ERROR" $LOG_FILE | wc -l)
WARN_COUNT=$(grep "WARN" $LOG_FILE | wc -l)

echo "Connectæ—¥å¿—ç›‘æ§æŠ¥å‘Š:"
echo "é”™è¯¯æ•°é‡: $ERROR_COUNT"
echo "è­¦å‘Šæ•°é‡: $WARN_COUNT"

# å¦‚æœé”™è¯¯æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼Œå‘é€å‘Šè­¦
if [ $ERROR_COUNT -gt 10 ]; then
    echo "è­¦å‘Šï¼šé”™è¯¯æ•°é‡è¿‡å¤šï¼Œè¯·æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ï¼"
fi
```

---

## 7. ğŸš¨ æ•…éšœæ’æŸ¥å®æˆ˜


### 7.1 å¸¸è§æ•…éšœåˆ†ç±»


**ğŸ’¥ æ•…éšœç±»å‹æ¦‚è§ˆ**ï¼š
```
Connectæ•…éšœåˆ†ç±»ï¼š
â”œâ”€â”€ ğŸ”Œ è¿æ¥é—®é¢˜       # æ— æ³•è¿æ¥åˆ°Kafkaæˆ–å¤–éƒ¨ç³»ç»Ÿ
â”œâ”€â”€ ğŸ”§ é…ç½®é—®é¢˜       # è¿æ¥å™¨é…ç½®é”™è¯¯  
â”œâ”€â”€ ğŸƒ æ€§èƒ½é—®é¢˜       # å¤„ç†é€Ÿåº¦æ…¢ã€å»¶è¿Ÿé«˜
â”œâ”€â”€ ğŸ’¾ èµ„æºé—®é¢˜       # å†…å­˜ã€CPUã€ç£ç›˜ä¸è¶³
â””â”€â”€ ğŸ”’ æƒé™é—®é¢˜       # è®¤è¯ã€æˆæƒå¤±è´¥
```

### 7.2 è¿æ¥å™¨æ— æ³•å¯åŠ¨


**âŒ ç—‡çŠ¶**ï¼šè¿æ¥å™¨çŠ¶æ€æ˜¾ç¤ºFAILED

**ğŸ” æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æŸ¥çœ‹è¿æ¥å™¨çŠ¶æ€è¯¦æƒ…
curl http://localhost:8083/connectors/my-connector/status

# 2. æŸ¥çœ‹ä»»åŠ¡é”™è¯¯ä¿¡æ¯
curl http://localhost:8083/connectors/my-connector/tasks/0/status

# 3. æ£€æŸ¥Workeræ—¥å¿—
tail -f /opt/kafka/logs/connect.log | grep my-connector

# 4. éªŒè¯é…ç½®æ–‡ä»¶
curl http://localhost:8083/connectors/my-connector/config
```

**ğŸ”§ å¸¸è§è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡å¯è¿æ¥å™¨
curl -X POST http://localhost:8083/connectors/my-connector/restart

# å¦‚æœé…ç½®æœ‰è¯¯ï¼Œåˆ é™¤åé‡æ–°åˆ›å»º
curl -X DELETE http://localhost:8083/connectors/my-connector
# ç„¶åé‡æ–°åˆ›å»ºè¿æ¥å™¨
```

### 7.3 æ•°æ®åŒæ­¥å»¶è¿Ÿé—®é¢˜


**â° ç—‡çŠ¶**ï¼šæ•°æ®åŒæ­¥ä¸¥é‡å»¶è¿Ÿ

**ğŸ“Š æ€§èƒ½æ£€æŸ¥æ¸…å•**ï¼š
- âœ… **æ£€æŸ¥ä»»åŠ¡æ•°é‡**ï¼š`tasks.max`æ˜¯å¦è¶³å¤Ÿ
- âœ… **æ£€æŸ¥æ‰¹æ¬¡å¤§å°**ï¼šæ‰¹å¤„ç†é…ç½®æ˜¯å¦åˆç†
- âœ… **æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ**ï¼šKafkaé›†ç¾¤è¿æ¥æ˜¯å¦æ­£å¸¸
- âœ… **æ£€æŸ¥èµ„æºä½¿ç”¨**ï¼šCPUã€å†…å­˜æ˜¯å¦å……è¶³

**ğŸ”§ ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```json
{
  "name": "optimized-connector",
  "config": {
    "connector.class": "JdbcSourceConnector",
    "tasks.max": "4",                    # å¢åŠ å¹¶è¡Œåº¦
    "batch.max.rows": "5000",           # å¢å¤§æ‰¹æ¬¡å¤§å°
    "poll.interval.ms": "30000",        # å‡å°‘è½®è¯¢é—´éš”
    "connection.attempts": "6",         # å¢åŠ é‡è¯•æ¬¡æ•°
    "connection.backoff.ms": "10000"    # é‡è¯•é—´éš”
  }
}
```

### 7.4 å†…å­˜æº¢å‡ºé—®é¢˜


**ğŸ’¾ ç—‡çŠ¶**ï¼šWorkerè¿›ç¨‹OOMï¼Œæ—¥å¿—ä¸­å‡ºç°OutOfMemoryError

**ğŸ” æ’æŸ¥æ–¹æ³•**ï¼š
```bash
# æŸ¥çœ‹Workerè¿›ç¨‹å†…å­˜ä½¿ç”¨
jstat -gc [worker-pid]

# æŸ¥çœ‹å †å†…å­˜è½¬å‚¨ï¼ˆå¦‚æœæœ‰ï¼‰
jmap -dump:format=b,file=connect-heap.hprof [worker-pid]

# æ£€æŸ¥GCæ—¥å¿—
tail -f /opt/kafka/logs/connect-gc.log
```

**âš™ï¸ å†…å­˜ä¼˜åŒ–é…ç½®**ï¼š
```bash
# è°ƒæ•´Worker JVMå‚æ•°
export KAFKA_HEAP_OPTS="-Xmx2G -Xms2G"
export KAFKA_JVM_PERFORMANCE_OPTS="-XX:+UseG1GC -XX:MaxGCPauseMillis=20"

# é™åˆ¶è¿æ¥å™¨èµ„æºä½¿ç”¨
# åœ¨è¿æ¥å™¨é…ç½®ä¸­æ·»åŠ ï¼š
"producer.max.request.size": "1048576",     # é™åˆ¶å•æ¬¡è¯·æ±‚å¤§å°
"consumer.max.poll.records": "1000"         # é™åˆ¶å•æ¬¡æ‹‰å–è®°å½•æ•°
```

### 7.5 ç½‘ç»œè¿æ¥é—®é¢˜


**ğŸŒ ç—‡çŠ¶**ï¼šè¿æ¥å¤–éƒ¨ç³»ç»Ÿå¤±è´¥

**ğŸ” ç½‘ç»œè¯Šæ–­**ï¼š
```bash
# æµ‹è¯•Kafkaè¿æ¥
telnet kafka-broker 9092

# æµ‹è¯•æ•°æ®åº“è¿æ¥
telnet mysql-server 3306

# æ£€æŸ¥DNSè§£æ
nslookup kafka-broker

# æŸ¥çœ‹ç½‘ç»œé…ç½®
netstat -an | grep 8083
```

**ğŸ”§ ç½‘ç»œé—®é¢˜è§£å†³**ï¼š
```properties
# è°ƒæ•´è¿æ¥è¶…æ—¶é…ç½®
connection.timeout.ms=30000
request.timeout.ms=60000
retry.backoff.ms=1000
```

---

## 8. âš¡ æ€§èƒ½è°ƒä¼˜æŒ‡å—


### 8.1 æ€§èƒ½è°ƒä¼˜ç­–ç•¥


**ğŸ¯ è°ƒä¼˜ç›®æ ‡**ï¼š
- **ååé‡ä¼˜åŒ–**ï¼šæé«˜æ•°æ®å¤„ç†é€Ÿåº¦
- **å»¶è¿Ÿä¼˜åŒ–**ï¼šå‡å°‘æ•°æ®åŒæ­¥å»¶è¿Ÿ
- **èµ„æºä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨CPUã€å†…å­˜èµ„æº
- **ç¨³å®šæ€§ä¼˜åŒ–**ï¼šå‡å°‘é”™è¯¯å’Œé‡å¯

### 8.2 Workerçº§åˆ«è°ƒä¼˜


**ğŸ”§ JVMå‚æ•°ä¼˜åŒ–**
```bash
# ç”Ÿäº§ç¯å¢ƒæ¨èJVMå‚æ•°
export KAFKA_HEAP_OPTS="-Xmx4G -Xms4G"
export KAFKA_JVM_PERFORMANCE_OPTS="
  -XX:+UseG1GC 
  -XX:MaxGCPauseMillis=20 
  -XX:InitiatingHeapOccupancyPercent=35 
  -XX:+ExplicitGCInvokesConcurrent 
  -Djava.awt.headless=true"
```

**âš™ï¸ Workeré…ç½®ä¼˜åŒ–**
```properties
# æé«˜å¹¶å‘å¤„ç†èƒ½åŠ›
tasks.max=8
max.poll.records=5000
fetch.min.bytes=50000

# ä¼˜åŒ–å†…å­˜ä½¿ç”¨
receive.buffer.bytes=131072
send.buffer.bytes=131072
buffer.memory=67108864

# è¿æ¥æ± ä¼˜åŒ–
connections.max.idle.ms=600000
reconnect.backoff.ms=50
```

### 8.3 è¿æ¥å™¨çº§åˆ«è°ƒä¼˜


**ğŸ“Š Sourceè¿æ¥å™¨ä¼˜åŒ–**
```json
{
  "name": "optimized-source",
  "config": {
    "connector.class": "JdbcSourceConnector",
    "tasks.max": "4",
    "batch.max.rows": "10000",          # å¢å¤§æ‰¹æ¬¡å¤§å°
    "poll.interval.ms": "30000",        # é€‚ä¸­çš„è½®è¯¢é—´éš”
    "query.timeout.ms": "60000",        # æŸ¥è¯¢è¶…æ—¶æ—¶é—´
    "connection.attempts": "6",         # è¿æ¥é‡è¯•æ¬¡æ•°
    "timestamp.delay.interval.ms": "1000"  # æ—¶é—´æˆ³å»¶è¿Ÿé—´éš”
  }
}
```

**ğŸ’¾ Sinkè¿æ¥å™¨ä¼˜åŒ–**
```json
{
  "name": "optimized-sink", 
  "config": {
    "connector.class": "JdbcSinkConnector",
    "tasks.max": "4",
    "batch.size": "5000",              # æ‰¹å¤„ç†å¤§å°
    "connection.attempts": "6",
    "retry.backoff.ms": "10000",
    "auto.create": "true",             # è‡ªåŠ¨åˆ›å»ºè¡¨
    "auto.evolve": "true",             # è‡ªåŠ¨æ¼”åŒ–schema
    "insert.mode": "upsert"            # ä½¿ç”¨upsertæ¨¡å¼
  }
}
```

### 8.4 Kafkaé›†ç¾¤ä¼˜åŒ–


**ğŸ”§ Produceré…ç½®ä¼˜åŒ–**
```properties
# åœ¨è¿æ¥å™¨é…ç½®ä¸­æ·»åŠ producerè¦†ç›–é…ç½®
producer.compression.type=snappy       # å¯ç”¨å‹ç¼©
producer.batch.size=65536              # å¢å¤§æ‰¹æ¬¡å¤§å°
producer.linger.ms=5                   # é€‚åº¦å»¶è¿Ÿå‘é€
producer.acks=1                        # å¹³è¡¡æ€§èƒ½å’Œå¯é æ€§
producer.retries=2147483647            # æ— é™é‡è¯•
producer.enable.idempotence=true       # å¯ç”¨å¹‚ç­‰æ€§
```

**ğŸ“¥ Consumeré…ç½®ä¼˜åŒ–**
```properties
# Sinkè¿æ¥å™¨çš„consumeré…ç½®ä¼˜åŒ–
consumer.max.poll.records=5000         # å¢å¤§æ‹‰å–è®°å½•æ•°
consumer.fetch.min.bytes=50000         # å¢å¤§æœ€å°æ‹‰å–å­—èŠ‚æ•°
consumer.fetch.max.wait.ms=1000        # æ‹‰å–ç­‰å¾…æ—¶é—´
consumer.session.timeout.ms=30000      # ä¼šè¯è¶…æ—¶æ—¶é—´
consumer.heartbeat.interval.ms=3000    # å¿ƒè·³é—´éš”
```

### 8.5 æ€§èƒ½ç›‘æ§ä¸åŸºå‡†æµ‹è¯•


**ğŸ“ˆ æ€§èƒ½åŸºå‡†æµ‹è¯•**
```bash
# ä½¿ç”¨Kafkaè‡ªå¸¦å·¥å…·æµ‹è¯•ååé‡
# æµ‹è¯•Produceræ€§èƒ½
kafka-producer-perf-test.sh \
  --topic connect-test-topic \
  --num-records 1000000 \
  --record-size 1000 \
  --throughput 50000 \
  --producer-props bootstrap.servers=localhost:9092

# æµ‹è¯•Consumeræ€§èƒ½  
kafka-consumer-perf-test.sh \
  --topic connect-test-topic \
  --messages 1000000 \
  --bootstrap-server localhost:9092
```

**ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡**
```bash
# ä½¿ç”¨JMXç›‘æ§å…³é”®æŒ‡æ ‡
# è®°å½•å¤„ç†é€Ÿç‡
kafka.connect:type=source-task-metrics,connector=my-source,task=0:source-record-poll-rate

# æ•°æ®ä¼ è¾“é€Ÿç‡
kafka.connect:type=sink-task-metrics,connector=my-sink,task=0:sink-record-send-rate

# é”™è¯¯ç‡ç›‘æ§
kafka.connect:type=task-error-metrics,connector=my-connector,task=0:total-error-rate
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Connectæ¶æ„ï¼šWorker + Connector + Task ä¸‰å±‚æ¶æ„
ğŸ”¸ éƒ¨ç½²æ¨¡å¼ï¼šåˆ†å¸ƒå¼æ¨¡å¼é€‚åˆç”Ÿäº§ï¼Œç‹¬ç«‹æ¨¡å¼é€‚åˆå¼€å‘
ğŸ”¸ é…ç½®ç®¡ç†ï¼šWorkeré…ç½® + è¿æ¥å™¨é…ç½® + è½¬æ¢å™¨é…ç½®
ğŸ”¸ REST APIï¼šå®Œæ•´çš„è¿æ¥å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¥å£
ğŸ”¸ ç›‘æ§ä½“ç³»ï¼šæ€§èƒ½æŒ‡æ ‡ + å¥åº·çŠ¶æ€ + æ—¥å¿—ç®¡ç†
ğŸ”¸ æ•…éšœæ’æŸ¥ï¼šç³»ç»Ÿæ€§è¯Šæ–­æ–¹æ³•å’Œå¸¸è§é—®é¢˜è§£å†³
ğŸ”¸ æ€§èƒ½è°ƒä¼˜ï¼šWorker + è¿æ¥å™¨ + Kafka å…¨é“¾è·¯ä¼˜åŒ–
```

### 9.2 å…³é”®è¿ç»´è¦ç‚¹


**ğŸ”§ éƒ¨ç½²æœ€ä½³å®è·µ**ï¼š
```
ç”Ÿäº§ç¯å¢ƒå»ºè®®ï¼š
â”œâ”€â”€ è‡³å°‘3ä¸ªWorkerèŠ‚ç‚¹ï¼ˆé«˜å¯ç”¨ï¼‰
â”œâ”€â”€ åˆç†çš„JVMå†…å­˜é…ç½®ï¼ˆ4G+ï¼‰
â”œâ”€â”€ ç‹¬ç«‹çš„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
â”œâ”€â”€ å®Œå–„çš„æ—¥å¿—ç®¡ç†ç­–ç•¥
â””â”€â”€ å®šæœŸçš„æ€§èƒ½åŸºå‡†æµ‹è¯•
```

**âš¡ æ€§èƒ½ä¼˜åŒ–åŸåˆ™**ï¼š
```
ä¼˜åŒ–ä¼˜å…ˆçº§ï¼š
1ï¸âƒ£ è¿æ¥å™¨ä»»åŠ¡æ•°ï¼ˆå¹¶è¡Œåº¦ï¼‰
2ï¸âƒ£ æ‰¹å¤„ç†å¤§å°ï¼ˆååé‡ï¼‰
3ï¸âƒ£ è½®è¯¢é—´éš”ï¼ˆå»¶è¿Ÿï¼‰
4ï¸âƒ£ JVMå‚æ•°ï¼ˆç¨³å®šæ€§ï¼‰
5ï¸âƒ£ Kafkaé…ç½®ï¼ˆæ•´ä½“æ€§èƒ½ï¼‰
```

**ğŸš¨ æ•…éšœé¢„é˜²ç­–ç•¥**ï¼š
```
é¢„é˜²æªæ–½ï¼š
âœ… å®Œå–„çš„ç›‘æ§å‘Šè­¦
âœ… å®šæœŸçš„å¥åº·æ£€æŸ¥
âœ… åˆç†çš„èµ„æºé…ç½®
âœ… æ ‡å‡†çš„é…ç½®ç®¡ç†
âœ… è¯¦ç»†çš„æ“ä½œæ–‡æ¡£
```

### 9.3 å®é™…åº”ç”¨å»ºè®®


**ğŸ¯ é€‚ç”¨åœºæ™¯åˆ¤æ–­**ï¼š
- âœ… **æ•°æ®é›†æˆåœºæ™¯**ï¼šå¤šç³»ç»Ÿé—´æ•°æ®åŒæ­¥
- âœ… **å®æ—¶æ•°æ®æµ**ï¼šå‡†å®æ—¶æ•°æ®å¤„ç†ç®¡é“
- âœ… **æ‰¹é‡æ•°æ®è¿ç§»**ï¼šå¤§è§„æ¨¡æ•°æ®è¿ç§»é¡¹ç›®
- âŒ **è¶…ä½å»¶è¿Ÿ**ï¼šæ¯«ç§’çº§å»¶è¿Ÿè¦æ±‚çš„åœºæ™¯
- âŒ **å¤æ‚è½¬æ¢**ï¼šéœ€è¦å¤æ‚ä¸šåŠ¡é€»è¾‘çš„æ•°æ®å¤„ç†

**ğŸ’¡ è¿ç»´ç»éªŒæ€»ç»“**ï¼š
- **æ¸è¿›å¼éƒ¨ç½²**ï¼šå…ˆå°è§„æ¨¡è¯•è¿è¡Œï¼Œå†å…¨é‡éƒ¨ç½²
- **é…ç½®æ ‡å‡†åŒ–**ï¼šå»ºç«‹ç»Ÿä¸€çš„é…ç½®æ¨¡æ¿å’Œè§„èŒƒ
- **ç›‘æ§è‡ªåŠ¨åŒ–**ï¼šå®ç°è‡ªåŠ¨åŒ–ç›‘æ§å’Œå‘Šè­¦
- **æ–‡æ¡£å®Œå–„**ï¼šç»´æŠ¤è¯¦ç»†çš„æ“ä½œå’Œæ•…éšœå¤„ç†æ–‡æ¡£
- **å›¢é˜ŸåŸ¹è®­**ï¼šç¡®ä¿è¿ç»´å›¢é˜ŸæŒæ¡Connectè¿ç»´æŠ€èƒ½

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
Connectè¿ç»´ä¸‰è¦ç´ ï¼šéƒ¨ç½²ã€ç›‘æ§ã€è°ƒä¼˜
éƒ¨ç½²è¦è€ƒè™‘é«˜å¯ç”¨ï¼Œç›‘æ§è¦åšå…¨æ–¹ä½
è°ƒä¼˜ä»ä»»åŠ¡æ•°å¼€å§‹ï¼Œæ•…éšœæ’æŸ¥çœ‹æ—¥å¿—
REST APIæ˜¯ç®¡ç†å·¥å…·ï¼ŒWorkeré…ç½®æ˜¯åŸºç¡€
```