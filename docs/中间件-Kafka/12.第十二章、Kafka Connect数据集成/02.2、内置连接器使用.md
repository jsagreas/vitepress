---
title: 2ã€å†…ç½®è¿žæŽ¥å™¨ä½¿ç”¨
---
## ðŸ“š ç›®å½•

1. [å†…ç½®è¿žæŽ¥å™¨æ¦‚è¿°](#1-å†…ç½®è¿žæŽ¥å™¨æ¦‚è¿°)
2. [FileStream Connectoræ–‡ä»¶è¿žæŽ¥å™¨](#2-FileStream-Connectoræ–‡ä»¶è¿žæŽ¥å™¨)
3. [JDBC Connectoræ•°æ®åº“è¿žæŽ¥å™¨](#3-JDBC-Connectoræ•°æ®åº“è¿žæŽ¥å™¨)
4. [Elasticsearch Connectoræœç´¢å¼•æ“Žè¿žæŽ¥å™¨](#4-Elasticsearch-Connectoræœç´¢å¼•æ“Žè¿žæŽ¥å™¨)
5. [HDFS Connectorå¤§æ•°æ®å­˜å‚¨è¿žæŽ¥å™¨](#5-HDFS-Connectorå¤§æ•°æ®å­˜å‚¨è¿žæŽ¥å™¨)
6. [S3 Connectoräº‘å­˜å‚¨è¿žæŽ¥å™¨](#6-S3-Connectoräº‘å­˜å‚¨è¿žæŽ¥å™¨)
7. [æ•°æ®æ ¼å¼è½¬æ¢ä¸Žå¤„ç†](#7-æ•°æ®æ ¼å¼è½¬æ¢ä¸Žå¤„ç†)
8. [é”™è¯¯å¤„ç†ä¸Žç›‘æŽ§](#8-é”™è¯¯å¤„ç†ä¸Žç›‘æŽ§)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ”Œ å†…ç½®è¿žæŽ¥å™¨æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯å†…ç½®è¿žæŽ¥å™¨


**è¿žæŽ¥å™¨çš„æœ¬è´¨**ï¼šè¿žæŽ¥å™¨å°±åƒæ˜¯"æ•°æ®æ¬è¿å·¥"ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨Kafkaå’Œå¤–éƒ¨ç³»ç»Ÿä¹‹é—´æ¬è¿æ•°æ®ã€‚

```
å¤–éƒ¨ç³»ç»Ÿ â†’ Source Connector â†’ Kafka Topic â†’ Sink Connector â†’ å¤–éƒ¨ç³»ç»Ÿ
   â†‘                                                           â†“
æ•°æ®åº“/æ–‡ä»¶              Kafkaé›†ç¾¤                        æ•°æ®åº“/æ–‡ä»¶
```

**ðŸ”¸ è¿žæŽ¥å™¨ç±»åž‹**
- **Source Connectorï¼ˆæºè¿žæŽ¥å™¨ï¼‰**ï¼šä»Žå¤–éƒ¨ç³»ç»Ÿè¯»å–æ•°æ®ï¼Œå†™å…¥Kafka
- **Sink Connectorï¼ˆç›®æ ‡è¿žæŽ¥å™¨ï¼‰**ï¼šä»ŽKafkaè¯»å–æ•°æ®ï¼Œå†™å…¥å¤–éƒ¨ç³»ç»Ÿ

**ðŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦è¿žæŽ¥å™¨**
```
ä¼ ç»Ÿæ–¹å¼ï¼š
å¼€å‘è€… â†’ ç¼–å†™ä»£ç  â†’ è¿žæŽ¥å¤–éƒ¨ç³»ç»Ÿ â†’ å¤„ç†æ•°æ®æ ¼å¼ â†’ å†™å…¥Kafka

ä½¿ç”¨è¿žæŽ¥å™¨ï¼š
è¿ç»´äººå‘˜ â†’ é…ç½®æ–‡ä»¶ â†’ å¯åŠ¨è¿žæŽ¥å™¨ â†’ è‡ªåŠ¨å¤„ç†æ•°æ®æµ
```

### 1.2 å†…ç½®è¿žæŽ¥å™¨çš„ä¼˜åŠ¿


**ðŸŒŸ ä¸»è¦ä¼˜åŠ¿**
- **å¼€ç®±å³ç”¨**ï¼šæ— éœ€ç¼–å†™ä»£ç ï¼Œåªéœ€é…ç½®
- **é«˜å¯é æ€§**ï¼šå†…ç½®å®¹é”™å’Œé‡è¯•æœºåˆ¶
- **æ˜“äºŽç®¡ç†**ï¼šé€šè¿‡REST APIç»Ÿä¸€ç®¡ç†
- **æ‰©å±•æ€§å¼º**ï¼šæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²

**ðŸ“Š å¸¸ç”¨å†…ç½®è¿žæŽ¥å™¨å¯¹æ¯”**

| è¿žæŽ¥å™¨ç±»åž‹ | **ä¸»è¦ç”¨é€”** | **é€‚ç”¨åœºæ™¯** | **é…ç½®éš¾åº¦** |
|-----------|------------|-------------|-------------|
| **FileStream** | `æ–‡ä»¶æ•°æ®å¯¼å…¥å¯¼å‡º` | `æ—¥å¿—æ”¶é›†ã€æ•°æ®å¤‡ä»½` | `â­` |
| **JDBC** | `æ•°æ®åº“æ•°æ®åŒæ­¥` | `æ•°æ®åº“é›†æˆã€ETL` | `â­â­` |
| **Elasticsearch** | `æœç´¢å¼•æ“Žæ•°æ®åŒæ­¥` | `æ—¥å¿—åˆ†æžã€æœç´¢` | `â­â­â­` |
| **HDFS** | `å¤§æ•°æ®å­˜å‚¨` | `æ•°æ®æ¹–ã€æ‰¹å¤„ç†` | `â­â­â­` |
| **S3** | `äº‘å­˜å‚¨` | `æ•°æ®å½’æ¡£ã€å¤‡ä»½` | `â­â­` |

---

## 2. ðŸ“„ FileStream Connectoræ–‡ä»¶è¿žæŽ¥å™¨


### 2.1 FileStreamåŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯FileStream Connector**ï¼š
FileStream Connectoræ˜¯æœ€ç®€å•çš„è¿žæŽ¥å™¨ï¼Œç”¨äºŽè¯»å–æ–‡ä»¶å†…å®¹åˆ°Kafkaæˆ–å°†Kafkaæ•°æ®å†™å…¥æ–‡ä»¶ã€‚

```
æ–‡ä»¶ç›‘æŽ§ç¤ºæ„å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ç›‘æŽ§æ–‡ä»¶å˜åŒ–    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ—¥å¿—æ–‡ä»¶   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Sourceè¿žæŽ¥å™¨ â”‚
â”‚             â”‚                â”‚             â”‚
â”‚ app.log     â”‚                â”‚ è¯»å–æ–°å¢žè¡Œ   â”‚
â”‚ error.log   â”‚                â”‚ å‘é€åˆ°Topic â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Kafka Topic â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 FileStream Source Connectoré…ç½®


**ðŸ”¸ åŸºç¡€é…ç½®ç¤ºä¾‹**
```json
{
  "name": "file-source-connector",
  "config": {
    "connector.class": "FileStreamSource",
    "tasks.max": "1",
    "file": "/var/log/app.log",
    "topic": "app-logs"
  }
}
```

**ðŸ“ é…ç½®å‚æ•°è¯¦è§£**
- **`connector.class`**ï¼šæŒ‡å®šè¿žæŽ¥å™¨ç±»åž‹
- **`tasks.max`**ï¼šæœ€å¤§ä»»åŠ¡æ•°ï¼ˆæ–‡ä»¶è¿žæŽ¥å™¨é€šå¸¸è®¾ä¸º1ï¼‰
- **`file`**ï¼šè¦ç›‘æŽ§çš„æ–‡ä»¶è·¯å¾„
- **`topic`**ï¼šç›®æ ‡Kafka Topicåç§°

**ðŸ’¡ å®žé™…ä½¿ç”¨åœºæ™¯**
```bash
# 1. åˆ›å»ºé…ç½®æ–‡ä»¶
cat > file-source.json << EOF
{
  "name": "log-file-source",
  "config": {
    "connector.class": "FileStreamSource",
    "tasks.max": "1",
    "file": "/var/log/nginx/access.log",
    "topic": "nginx-logs"
  }
}
EOF

# 2. å¯åŠ¨è¿žæŽ¥å™¨
curl -X POST http://localhost:8083/connectors \
  -H "Content-Type: application/json" \
  -d @file-source.json
```

### 2.3 FileStream Sink Connectoré…ç½®


**ðŸ”¸ å°†Kafkaæ•°æ®å†™å…¥æ–‡ä»¶**
```json
{
  "name": "file-sink-connector",
  "config": {
    "connector.class": "FileStreamSink",
    "tasks.max": "1",
    "file": "/tmp/kafka-output.txt",
    "topics": "processed-data"
  }
}
```

**âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹**
- **æ–‡ä»¶æƒé™**ï¼šç¡®ä¿Kafka Connectæœ‰è¯»å†™æƒé™
- **æ–‡ä»¶è½®è½¬**ï¼šå¤§æ–‡ä»¶éœ€è¦è€ƒè™‘æ—¥å¿—è½®è½¬
- **ç½‘ç»œå­˜å‚¨**ï¼šé¿å…ä½¿ç”¨ç½‘ç»œæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ

---

## 3. ðŸ—„ï¸ JDBC Connectoræ•°æ®åº“è¿žæŽ¥å™¨


### 3.1 JDBC ConnectoråŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯JDBC Connector**ï¼š
JDBC Connectorç”¨äºŽåœ¨Kafkaå’Œå…³ç³»åž‹æ•°æ®åº“ä¹‹é—´åŒæ­¥æ•°æ®ï¼Œæ”¯æŒå¢žé‡æ›´æ–°å’Œå…¨é‡åŒæ­¥ã€‚

```
æ•°æ®åº“åŒæ­¥æž¶æž„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Sourceè¿žæŽ¥å™¨    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Sinkè¿žæŽ¥å™¨    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æºæ•°æ®åº“   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Kafka Topic â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  ç›®æ ‡æ•°æ®åº“  â”‚
â”‚             â”‚                â”‚             â”‚                â”‚             â”‚
â”‚   MySQL     â”‚                â”‚ user-topic  â”‚                â”‚ PostgreSQL  â”‚
â”‚   usersè¡¨   â”‚                â”‚             â”‚                â”‚   usersè¡¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 JDBC Source Connectoré…ç½®


**ðŸ”¸ ä»Žæ•°æ®åº“è¯»å–æ•°æ®åˆ°Kafka**
```json
{
  "name": "mysql-source-connector",
  "config": {
    "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
    "connection.url": "jdbc:mysql://localhost:3306/mydb",
    "connection.user": "kafka_user",
    "connection.password": "password",
    "table.whitelist": "users,orders",
    "mode": "incrementing",
    "incrementing.column.name": "id",
    "topic.prefix": "mysql-"
  }
}
```

**ðŸ“ æ ¸å¿ƒé…ç½®è¯´æ˜Ž**
- **`connection.url`**ï¼šæ•°æ®åº“è¿žæŽ¥åœ°å€
- **`table.whitelist`**ï¼šè¦åŒæ­¥çš„è¡¨åˆ—è¡¨
- **`mode`**ï¼šåŒæ­¥æ¨¡å¼ï¼ˆincrementing/timestamp/bulkï¼‰
- **`incrementing.column.name`**ï¼šå¢žé‡å­—æ®µï¼ˆé€šå¸¸æ˜¯è‡ªå¢žIDï¼‰

**ðŸ”„ åŒæ­¥æ¨¡å¼è¯¦è§£**

| æ¨¡å¼ | **å·¥ä½œåŽŸç†** | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç¼ºç‚¹** |
|------|------------|-------------|-----------|
| **incrementing** | `åŸºäºŽè‡ªå¢žIDåŒæ­¥` | `æœ‰è‡ªå¢žä¸»é”®çš„è¡¨` | `ç®€å•å¯é ï¼Œä½†æ— æ³•åŒæ­¥åˆ é™¤` |
| **timestamp** | `åŸºäºŽæ—¶é—´æˆ³åŒæ­¥` | `æœ‰æ›´æ–°æ—¶é—´å­—æ®µçš„è¡¨` | `å¯ä»¥åŒæ­¥æ›´æ–°ï¼Œä½†éœ€è¦æ—¶é—´å­—æ®µ` |
| **bulk** | `å…¨é‡å®šæœŸåŒæ­¥` | `å°è¡¨æˆ–ä¸€æ¬¡æ€§å¯¼å…¥` | `ç®€å•ä½†æ€§èƒ½å·®` |

### 3.3 JDBC Sink Connectoré…ç½®


**ðŸ”¸ ä»ŽKafkaå†™å…¥æ•°æ®åˆ°æ•°æ®åº“**
```json
{
  "name": "postgres-sink-connector",
  "config": {
    "connector.class": "io.confluent.connect.jdbc.JdbcSinkConnector",
    "connection.url": "jdbc:postgresql://localhost:5432/target_db",
    "connection.user": "postgres",
    "connection.password": "password",
    "topics": "mysql-users,mysql-orders",
    "auto.create": "true",
    "auto.evolve": "true",
    "insert.mode": "upsert",
    "pk.fields": "id",
    "pk.mode": "record_key"
  }
}
```

**ðŸ’¡ Sinké…ç½®å…³é”®ç‚¹**
- **`auto.create`**ï¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æž„
- **`auto.evolve`**ï¼šè‡ªåŠ¨æ›´æ–°è¡¨ç»“æž„
- **`insert.mode`**ï¼šæ’å…¥æ¨¡å¼ï¼ˆinsert/upsertï¼‰
- **`pk.fields`**ï¼šä¸»é”®å­—æ®µ

---

## 4. ðŸ” Elasticsearch Connectoræœç´¢å¼•æ“Žè¿žæŽ¥å™¨


### 4.1 Elasticsearch Connectoræ¦‚è¿°


**åº”ç”¨åœºæ™¯**ï¼š
Elasticsearch Connectorä¸»è¦ç”¨äºŽå°†Kafkaä¸­çš„æ—¥å¿—ã€äº‹ä»¶æ•°æ®å®žæ—¶å†™å…¥Elasticsearchï¼Œç”¨äºŽæ—¥å¿—åˆ†æžå’Œæœç´¢ã€‚

```
æ—¥å¿—åˆ†æžæµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨æ—¥å¿—    â”‚ â†’ â”‚ Kafka Topic â”‚ â†’ â”‚ ES Connectorâ”‚ â†’ â”‚Elasticsearchâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                               â†“
                                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                        â”‚   Kibana    â”‚
                                                        â”‚  å¯è§†åŒ–åˆ†æž  â”‚
                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 é…ç½®Elasticsearch Sink Connector


**ðŸ”¸ åŸºç¡€é…ç½®**
```json
{
  "name": "elasticsearch-sink-connector",
  "config": {
    "connector.class": "io.confluent.connect.elasticsearch.ElasticsearchSinkConnector",
    "topics": "app-logs,error-logs",
    "connection.url": "http://localhost:9200",
    "type.name": "_doc",
    "key.ignore": "false",
    "schema.ignore": "true"
  }
}
```

### 4.3 é«˜çº§é…ç½®é€‰é¡¹


**ðŸ”§ ç´¢å¼•ç®¡ç†é…ç½®**
```json
{
  "name": "es-logs-connector",
  "config": {
    "connector.class": "io.confluent.connect.elasticsearch.ElasticsearchSinkConnector",
    "topics": "nginx-logs",
    "connection.url": "http://es-cluster:9200",
    "type.name": "_doc",
    "index.write.method": "time_based",
    "time.field": "timestamp",
    "time.zone": "Asia/Shanghai",
    "index.prefix": "nginx-logs-",
    "index.suffix": "yyyy-MM-dd"
  }
}
```

**ðŸ“ é…ç½®è¯´æ˜Ž**
- **`index.write.method`**ï¼šç´¢å¼•å†™å…¥æ–¹å¼
- **`time.field`**ï¼šæ—¶é—´å­—æ®µå
- **`index.prefix/suffix`**ï¼šç´¢å¼•åå‰ç¼€å’ŒåŽç¼€

**âš ï¸ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
- **æ‰¹é‡å†™å…¥**ï¼šè®¾ç½®åˆé€‚çš„`batch.size`
- **ç´¢å¼•æ¨¡æ¿**ï¼šé¢„å…ˆåˆ›å»ºç´¢å¼•æ¨¡æ¿
- **åˆ†ç‰‡ç­–ç•¥**ï¼šåˆç†è®¾ç½®åˆ†ç‰‡æ•°é‡

---

## 5. ðŸ—‚ï¸ HDFS Connectorå¤§æ•°æ®å­˜å‚¨è¿žæŽ¥å™¨


### 5.1 HDFS Connectoråº”ç”¨åœºæ™¯


**ä»€ä¹ˆæ˜¯HDFS Connector**ï¼š
ç”¨äºŽå°†Kafkaä¸­çš„æ•°æ®æ‰¹é‡å†™å…¥Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œé€šå¸¸ç”¨äºŽæ•°æ®æ¹–å’Œå¤§æ•°æ®åˆ†æžåœºæ™¯ã€‚

```
å¤§æ•°æ®å¤„ç†æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®žæ—¶æ•°æ®    â”‚ â†’ â”‚ Kafka Topic â”‚ â†’ â”‚HDFS Connectorâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚    HDFS     â”‚
                                    â”‚  åˆ†åŒºå­˜å‚¨    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚    Hive     â”‚    â”‚   Spark     â”‚
                              â”‚  æ•°æ®ä»“åº“    â”‚    â”‚  æ•°æ®åˆ†æž    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 HDFS Sink Connectoré…ç½®


**ðŸ”¸ åŸºç¡€é…ç½®**
```json
{
  "name": "hdfs-sink-connector",
  "config": {
    "connector.class": "io.confluent.connect.hdfs.HdfsSinkConnector",
    "topics": "user-events",
    "hdfs.url": "hdfs://namenode:8020",
    "flush.size": "1000",
    "format.class": "io.confluent.connect.hdfs.parquet.ParquetFormat",
    "partitioner.class": "io.confluent.connect.hdfs.partitioner.TimeBasedPartitioner",
    "path.format": "yyyy/MM/dd/HH",
    "timezone": "Asia/Shanghai"
  }
}
```

### 5.3 åˆ†åŒºå’Œæ ¼å¼é…ç½®


**ðŸ—‚ï¸ åˆ†åŒºç­–ç•¥**
- **æ—¶é—´åˆ†åŒº**ï¼šæŒ‰æ—¶é—´è‡ªåŠ¨åˆ†åŒºå­˜å‚¨
- **å­—æ®µåˆ†åŒº**ï¼šæŒ‰æ•°æ®å­—æ®µå€¼åˆ†åŒº
- **é»˜è®¤åˆ†åŒº**ï¼šä¸åˆ†åŒºç›´æŽ¥å­˜å‚¨

**ðŸ“„ æ–‡ä»¶æ ¼å¼é€‰æ‹©**

| æ ¼å¼ | **ç‰¹ç‚¹** | **é€‚ç”¨åœºæ™¯** |
|------|---------|-------------|
| **Parquet** | `åˆ—å¼å­˜å‚¨ï¼ŒåŽ‹ç¼©çŽ‡é«˜` | `å¤§æ•°æ®åˆ†æžï¼ŒæŸ¥è¯¢æ€§èƒ½å¥½` |
| **Avro** | `Schemaæ¼”è¿›æ”¯æŒå¥½` | `æ•°æ®ç»“æž„å˜åŒ–é¢‘ç¹` |
| **JSON** | `äººç±»å¯è¯»ï¼Œè°ƒè¯•æ–¹ä¾¿` | `å¼€å‘æµ‹è¯•çŽ¯å¢ƒ` |

---

## 6. â˜ï¸ S3 Connectoräº‘å­˜å‚¨è¿žæŽ¥å™¨


### 6.1 S3 Connectoræ¦‚è¿°


**åº”ç”¨åœºæ™¯**ï¼š
S3 Connectorç”¨äºŽå°†Kafkaæ•°æ®å¤‡ä»½åˆ°äº‘å­˜å‚¨ï¼Œæ”¯æŒæ•°æ®å½’æ¡£å’Œç¾éš¾æ¢å¤ã€‚

```
äº‘å­˜å‚¨æž¶æž„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kafka Topic â”‚ â†’ â”‚ S3 Connectorâ”‚ â†’ â”‚  Amazon S3  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚     æ•°æ®ç”Ÿå‘½å‘¨æœŸ     â”‚
                              â”‚ Standard â†’ IA â†’ Glacier â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 S3 Sink Connectoré…ç½®


**ðŸ”¸ åŸºç¡€é…ç½®**
```json
{
  "name": "s3-sink-connector",
  "config": {
    "connector.class": "io.confluent.connect.s3.S3SinkConnector",
    "topics": "transaction-logs",
    "s3.bucket.name": "kafka-backup-bucket",
    "s3.region": "us-west-2",
    "flush.size": "1000",
    "storage.class": "io.confluent.connect.s3.storage.S3Storage",
    "format.class": "io.confluent.connect.s3.format.json.JsonFormat",
    "partitioner.class": "io.confluent.connect.storage.partitioner.TimeBasedPartitioner",
    "path.format": "year=YYYY/month=MM/day=dd/hour=HH",
    "timezone": "UTC"
  }
}
```

### 6.3 å®‰å…¨å’Œæƒé™é…ç½®


**ðŸ” AWSå‡­è¯é…ç½®**
```json
{
  "aws.access.key.id": "${env:AWS_ACCESS_KEY_ID}",
  "aws.secret.access.key": "${env:AWS_SECRET_ACCESS_KEY}",
  "s3.part.size": "5242880",
  "s3.sse.algorithm": "AES256"
}
```

**âš ï¸ å®‰å…¨æœ€ä½³å®žè·µ**
- ä½¿ç”¨IAMè§’è‰²è€Œä¸æ˜¯è®¿é—®å¯†é’¥
- å¯ç”¨S3æœåŠ¡ç«¯åŠ å¯†
- è®¾ç½®åˆé€‚çš„å­˜å‚¨æ¡¶ç­–ç•¥

---

## 7. ðŸ”„ æ•°æ®æ ¼å¼è½¬æ¢ä¸Žå¤„ç†


### 7.1 æ•°æ®æ ¼å¼è½¬æ¢æ¦‚è¿°


**ä¸ºä»€ä¹ˆéœ€è¦æ ¼å¼è½¬æ¢**ï¼š
ä¸åŒç³»ç»Ÿæ”¯æŒçš„æ•°æ®æ ¼å¼ä¸åŒï¼Œè¿žæŽ¥å™¨éœ€è¦åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚

```
æ•°æ®æ ¼å¼è½¬æ¢æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æºç³»ç»Ÿæ ¼å¼  â”‚ â†’ â”‚  è½¬æ¢å™¨å¤„ç†  â”‚ â†’ â”‚ ç›®æ ‡ç³»ç»Ÿæ ¼å¼ â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚  JSON       â”‚    â”‚ Converter   â”‚    â”‚  Avro       â”‚
â”‚  CSV        â”‚    â”‚ Transform   â”‚    â”‚  Parquet    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å¸¸ç”¨è½¬æ¢å™¨é…ç½®


**ðŸ”§ JSONè½¬æ¢å™¨**
```json
{
  "key.converter": "org.apache.kafka.connect.json.JsonConverter",
  "value.converter": "org.apache.kafka.connect.json.JsonConverter",
  "key.converter.schemas.enable": "false",
  "value.converter.schemas.enable": "false"
}
```

**ðŸ”§ Avroè½¬æ¢å™¨**
```json
{
  "key.converter": "io.confluent.connect.avro.AvroConverter",
  "value.converter": "io.confluent.connect.avro.AvroConverter",
  "key.converter.schema.registry.url": "http://localhost:8081",
  "value.converter.schema.registry.url": "http://localhost:8081"
}
```

### 7.3 å•æ¶ˆæ¯è½¬æ¢ï¼ˆSMTï¼‰


**ðŸ”„ å¸¸ç”¨è½¬æ¢æ“ä½œ**
```json
{
  "transforms": "addTimestamp,filterFields",
  "transforms.addTimestamp.type": "org.apache.kafka.connect.transforms.InsertField$Value",
  "transforms.addTimestamp.timestamp.field": "processed_at",
  "transforms.filterFields.type": "org.apache.kafka.connect.transforms.ReplaceField$Value",
  "transforms.filterFields.exclude": "internal_id,temp_field"
}
```

**ðŸ“ SMTè½¬æ¢ç±»åž‹**
- **InsertField**ï¼šæ’å…¥æ–°å­—æ®µ
- **ReplaceField**ï¼šæ›¿æ¢æˆ–è¿‡æ»¤å­—æ®µ
- **TimestampConverter**ï¼šæ—¶é—´æ ¼å¼è½¬æ¢
- **Cast**ï¼šæ•°æ®ç±»åž‹è½¬æ¢

---

## 8. âš ï¸ é”™è¯¯å¤„ç†ä¸Žç›‘æŽ§


### 8.1 é”™è¯¯å¤„ç†ç­–ç•¥


**ðŸš¨ å¸¸è§é”™è¯¯ç±»åž‹**
- **è¿žæŽ¥é”™è¯¯**ï¼šç½‘ç»œä¸­æ–­ã€æœåŠ¡ä¸å¯ç”¨
- **æ•°æ®é”™è¯¯**ï¼šæ ¼å¼ä¸åŒ¹é…ã€schemaå˜æ›´
- **æƒé™é”™è¯¯**ï¼šè®¤è¯å¤±è´¥ã€æŽˆæƒä¸è¶³

```
é”™è¯¯å¤„ç†æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    é‡åˆ°é”™è¯¯    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­£å¸¸å¤„ç†    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  é”™è¯¯æ£€æµ‹    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  é‡è¯•æœºåˆ¶    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  æ­»ä¿¡é˜Ÿåˆ—    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 é”™è¯¯å¤„ç†é…ç½®


**ðŸ”§ é‡è¯•é…ç½®**
```json
{
  "errors.retry.timeout": "300000",
  "errors.retry.delay.max.ms": "60000",
  "errors.tolerance": "all",
  "errors.log.enable": "true",
  "errors.log.include.messages": "true"
}
```

**ðŸ—‚ï¸ æ­»ä¿¡é˜Ÿåˆ—é…ç½®**
```json
{
  "errors.deadletterqueue.topic.name": "failed-records",
  "errors.deadletterqueue.topic.replication.factor": "3",
  "errors.deadletterqueue.context.headers.enable": "true"
}
```

### 8.3 ç›‘æŽ§å’Œå‘Šè­¦


**ðŸ“Š å…³é”®ç›‘æŽ§æŒ‡æ ‡**
- **è¿žæŽ¥å™¨çŠ¶æ€**ï¼šRUNNING/PAUSED/FAILED
- **ä»»åŠ¡çŠ¶æ€**ï¼šæ¯ä¸ªä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€
- **åžåé‡**ï¼šæ¯ç§’å¤„ç†çš„è®°å½•æ•°
- **é”™è¯¯çŽ‡**ï¼šå¤±è´¥è®°å½•çš„æ¯”ä¾‹

**ðŸ” ç›‘æŽ§å‘½ä»¤**
```bash
# æŸ¥çœ‹è¿žæŽ¥å™¨çŠ¶æ€
curl http://localhost:8083/connectors/mysql-source/status

# æŸ¥çœ‹è¿žæŽ¥å™¨é…ç½®
curl http://localhost:8083/connectors/mysql-source/config

# é‡å¯è¿žæŽ¥å™¨
curl -X POST http://localhost:8083/connectors/mysql-source/restart
```

**âš ï¸ å‘Šè­¦è®¾ç½®å»ºè®®**
- è¿žæŽ¥å™¨çŠ¶æ€å˜ä¸ºFAILEDæ—¶ç«‹å³å‘Šè­¦
- é”™è¯¯çŽ‡è¶…è¿‡5%æ—¶å‘å‡ºè­¦å‘Š
- åžåé‡å¼‚å¸¸ä¸‹é™æ—¶å‘Šè­¦

---

## 9. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸ”¸ è¿žæŽ¥å™¨æœ¬è´¨ï¼šKafkaä¸Žå¤–éƒ¨ç³»ç»Ÿé—´çš„æ•°æ®æ¡¥æ¢
ðŸ”¸ Source vs Sinkï¼šæ•°æ®æµå…¥Kafka vs æ•°æ®æµå‡ºKafka  
ðŸ”¸ é…ç½®é©±åŠ¨ï¼šé€šè¿‡JSONé…ç½®æ–‡ä»¶æŽ§åˆ¶è¿žæŽ¥å™¨è¡Œä¸º
ðŸ”¸ æ ¼å¼è½¬æ¢ï¼šä¸åŒç³»ç»Ÿé—´çš„æ•°æ®æ ¼å¼é€‚é…
ðŸ”¸ é”™è¯¯å¤„ç†ï¼šé‡è¯•æœºåˆ¶+æ­»ä¿¡é˜Ÿåˆ—ä¿è¯å¯é æ€§
```

### 9.2 è¿žæŽ¥å™¨é€‰æ‹©æŒ‡å—


**ðŸŽ¯ æ ¹æ®åœºæ™¯é€‰æ‹©è¿žæŽ¥å™¨**
```
æ–‡ä»¶å¤„ç†ï¼š
â†’ FileStream Connector
â†’ ç®€å•æ˜“ç”¨ï¼Œé€‚åˆæ—¥å¿—æ”¶é›†

æ•°æ®åº“åŒæ­¥ï¼š
â†’ JDBC Connector  
â†’ æ”¯æŒå¢žé‡åŒæ­¥ï¼Œé€‚åˆä¸šåŠ¡æ•°æ®

æœç´¢åˆ†æžï¼š
â†’ Elasticsearch Connector
â†’ å®žæ—¶ç´¢å¼•ï¼Œé€‚åˆæ—¥å¿—åˆ†æž

å¤§æ•°æ®å­˜å‚¨ï¼š
â†’ HDFS Connector
â†’ æ‰¹é‡å­˜å‚¨ï¼Œé€‚åˆæ•°æ®æ¹–

äº‘ç«¯å¤‡ä»½ï¼š
â†’ S3 Connector
â†’ æ•°æ®å½’æ¡£ï¼Œé€‚åˆé•¿æœŸå­˜å‚¨
```

### 9.3 æœ€ä½³å®žè·µæ€»ç»“


**ðŸ”§ é…ç½®æœ€ä½³å®žè·µ**
- **åˆç†è®¾ç½®æ‰¹æ¬¡å¤§å°**ï¼šå¹³è¡¡æ€§èƒ½å’Œå»¶è¿Ÿ
- **å¯ç”¨Schema Registry**ï¼šä¿è¯æ•°æ®æ ¼å¼ä¸€è‡´æ€§
- **é…ç½®é”™è¯¯å¤„ç†**ï¼šé¿å…å•ä¸ªé”™è¯¯å½±å“æ•´ä½“æµç¨‹
- **ç›‘æŽ§è¿žæŽ¥å™¨çŠ¶æ€**ï¼šåŠæ—¶å‘çŽ°å’Œå¤„ç†é—®é¢˜

**ðŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
- **å¹¶è¡Œåº¦é…ç½®**ï¼šæ ¹æ®æ•°æ®é‡è°ƒæ•´tasks.max
- **æ‰¹å¤„ç†ä¼˜åŒ–**ï¼šè®¾ç½®åˆé€‚çš„flush.size
- **ç½‘ç»œä¼˜åŒ–**ï¼šè¿žæŽ¥å™¨å°½é‡éƒ¨ç½²åœ¨æ•°æ®æºé™„è¿‘
- **èµ„æºåˆ†é…**ï¼šä¸ºConnecté›†ç¾¤åˆ†é…è¶³å¤Ÿçš„CPUå’Œå†…å­˜

**âš ï¸ å¸¸è§é™·é˜±é¿å…**
- **æ•°æ®ä¸¢å¤±**ï¼šç¡®ä¿at-least-onceè¯­ä¹‰
- **é‡å¤æ•°æ®**ï¼šåœ¨Sinkç«¯åšå¥½åŽ»é‡å¤„ç†
- **Schemaæ¼”è¿›**ï¼šè°¨æ…Žå¤„ç†æ•°æ®ç»“æž„å˜æ›´
- **è¿žæŽ¥æ± **ï¼šåˆç†é…ç½®æ•°æ®åº“è¿žæŽ¥æ± å¤§å°

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- å†…ç½®è¿žæŽ¥å™¨ç®€åŒ–äº†Kafkaä¸Žå¤–éƒ¨ç³»ç»Ÿçš„é›†æˆ
- é€šè¿‡é…ç½®è€Œéžç¼–ç çš„æ–¹å¼å®žçŽ°æ•°æ®æµè½¬
- ä¸åŒè¿žæŽ¥å™¨é€‚ç”¨äºŽä¸åŒçš„ä¸šåŠ¡åœºæ™¯
- é”™è¯¯å¤„ç†å’Œç›‘æŽ§æ˜¯ç”Ÿäº§çŽ¯å¢ƒçš„å¿…å¤‡è¦ç´ 