---
title: 6ã€SSHé…ç½®ä¸å¯†é’¥ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [SSHåœ¨Gitä¸­çš„ä½œç”¨](#1-SSHåœ¨Gitä¸­çš„ä½œç”¨)
2. [SSHå¯†é’¥ç”Ÿæˆä¸ç®¡ç†](#2-SSHå¯†é’¥ç”Ÿæˆä¸ç®¡ç†)
3. [SSHé…ç½®æ–‡ä»¶è¯¦è§£](#3-SSHé…ç½®æ–‡ä»¶è¯¦è§£)
4. [å¤šè´¦æˆ·é…ç½®å®æˆ˜](#4-å¤šè´¦æˆ·é…ç½®å®æˆ˜)
5. [SSHä»£ç†ä¸å¯†é’¥ç®¡ç†](#5-SSHä»£ç†ä¸å¯†é’¥ç®¡ç†)
6. [è¿æ¥æµ‹è¯•ä¸æ•…éšœæ’é™¤](#6-è¿æ¥æµ‹è¯•ä¸æ•…éšœæ’é™¤)
7. [å®‰å…¨æœ€ä½³å®è·µ](#7-å®‰å…¨æœ€ä½³å®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” SSHåœ¨Gitä¸­çš„ä½œç”¨


### 1.1 ä»€ä¹ˆæ˜¯SSH


**ğŸ”¸ SSHç®€å•ç†è§£**
```
SSH = Secure Shell = å®‰å…¨å¤–å£³åè®®
ä½œç”¨ï¼šåœ¨ç½‘ç»œä¸Šå®‰å…¨åœ°ä¼ è¾“æ•°æ®
æ¯”å–»ï¼šå°±åƒç»™æ•°æ®ç©¿ä¸Šä¸€å±‚é˜²æŠ¤æœï¼Œä¿è¯ä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«çªƒå–
```

**ğŸ’¡ ä¸ºä»€ä¹ˆGitè¦ç”¨SSHï¼Ÿ**
- **å®‰å…¨æ€§**ï¼šæ•°æ®ä¼ è¾“åŠ å¯†ï¼Œé˜²æ­¢å¯†ç æ³„éœ²
- **ä¾¿æ·æ€§**ï¼šä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨ï¼Œä¸ç”¨æ¯æ¬¡è¾“å¯†ç 
- **èº«ä»½éªŒè¯**ï¼šé€šè¿‡å¯†é’¥å¯¹è¯æ˜ä½ çš„èº«ä»½

### 1.2 SSH vs HTTPSå¯¹æ¯”


| ç‰¹æ€§ | **SSHæ–¹å¼** | **HTTPSæ–¹å¼** |
|------|------------|---------------|
| ğŸ”’ **å®‰å…¨æ€§** | `å¯†é’¥è®¤è¯ï¼Œæ›´å®‰å…¨` | `ç”¨æˆ·åå¯†ç ï¼Œç›¸å¯¹ç®€å•` |
| ğŸš€ **ä¾¿æ·æ€§** | `ä¸€æ¬¡é…ç½®ï¼Œå…å¯†æ“ä½œ` | `æ¯æ¬¡å¯èƒ½éœ€è¦è¾“å¯†ç ` |
| âš™ï¸ **é…ç½®éš¾åº¦** | `åˆæ¬¡é…ç½®ç¨å¤æ‚` | `ç®€å•ç›´æ¥` |
| ğŸŒ **ç½‘ç»œè¦æ±‚** | `éœ€è¦SSHç«¯å£22å¼€æ”¾` | `HTTP/HTTPSç«¯å£é€šç”¨` |
| ğŸ¯ **æ¨èåœºæ™¯** | `æ—¥å¸¸å¼€å‘ï¼Œé¢‘ç¹æ“ä½œ` | `ä¸´æ—¶ä½¿ç”¨ï¼Œç®€å•åœºæ™¯` |

### 1.3 SSHå·¥ä½œåŸç†å›¾ç¤º


```
æœ¬åœ°Gitæ“ä½œ                    è¿œç¨‹ä»“åº“(GitHub/GitLab)
     |                               |
     |--[1]ä½¿ç”¨ç§é’¥ç­¾å----------->|
     |   (è¯æ˜èº«ä»½)                  |
     |                              |--[2]ç”¨å…¬é’¥éªŒè¯ç­¾å
     |                              |   (ç¡®è®¤èº«ä»½)
     |<-[3]å»ºç«‹å®‰å…¨è¿æ¥-------------|
     |   (å¼€å§‹æ•°æ®ä¼ è¾“)               |

æ ¸å¿ƒï¼šç§é’¥åœ¨æœ¬åœ°ï¼Œå…¬é’¥åœ¨è¿œç¨‹ï¼Œé…å¯¹éªŒè¯èº«ä»½
```

---

## 2. ğŸ”‘ SSHå¯†é’¥ç”Ÿæˆä¸ç®¡ç†


### 2.1 å¯†é’¥ç±»å‹é€‰æ‹©


**ğŸ”¸ å¸¸ç”¨å¯†é’¥ç®—æ³•å¯¹æ¯”**

| ç®—æ³•ç±»å‹ | **å®‰å…¨æ€§** | **æ€§èƒ½** | **å…¼å®¹æ€§** | **æ¨èæŒ‡æ•°** |
|---------|-----------|---------|-----------|-------------|
| ğŸ” **RSA** | `ä¸­ç­‰(2048ä½)` | `ä¸€èˆ¬` | `æå¥½` | `â˜…â˜…â˜…â˜†â˜†` |
| ğŸš€ **Ed25519** | `å¾ˆé«˜` | `æå¥½` | `å¥½` | `â˜…â˜…â˜…â˜…â˜…` |
| ğŸ”’ **ECDSA** | `é«˜` | `å¥½` | `è¾ƒå¥½` | `â˜…â˜…â˜…â˜…â˜†` |

> ğŸ’¡ **æ–°æ‰‹æ¨è**ï¼šä¼˜å…ˆé€‰æ‹©Ed25519ï¼Œå®ƒæ˜¯ç›®å‰æœ€å®‰å…¨ä¸”æ€§èƒ½æœ€å¥½çš„ç®—æ³•

### 2.2 ç”ŸæˆSSHå¯†é’¥


**ğŸ”¸ Ed25519å¯†é’¥ç”Ÿæˆï¼ˆæ¨èï¼‰**
```bash
# ç”ŸæˆEd25519å¯†é’¥
ssh-keygen -t ed25519 -C "your.email@example.com"

# å‘½ä»¤è§£æï¼š
# -t ed25519    : æŒ‡å®šå¯†é’¥ç±»å‹ä¸ºEd25519
# -C "é‚®ç®±"     : æ·»åŠ æ³¨é‡Šï¼Œé€šå¸¸ç”¨é‚®ç®±æ ‡è¯†
```

**ğŸ”¸ RSAå¯†é’¥ç”Ÿæˆï¼ˆå…¼å®¹æ€§æ›´å¥½ï¼‰**
```bash
# ç”Ÿæˆ4096ä½RSAå¯†é’¥
ssh-keygen -t rsa -b 4096 -C "your.email@example.com"

# å‘½ä»¤è§£æï¼š
# -t rsa        : æŒ‡å®šå¯†é’¥ç±»å‹ä¸ºRSA
# -b 4096       : æŒ‡å®šå¯†é’¥é•¿åº¦ä¸º4096ä½
```

### 2.3 å¯†é’¥ç”Ÿæˆäº¤äº’è¿‡ç¨‹


```
ç”Ÿæˆå¯†é’¥æ—¶çš„äº¤äº’ç¤ºä¾‹ï¼š

1. é€‰æ‹©ä¿å­˜ä½ç½®
Enter file in which to save the key (/Users/username/.ssh/id_ed25519): 
â†’ ç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤ä½ç½®

2. è®¾ç½®å¯†é’¥å¯†ç ï¼ˆå¯é€‰ï¼‰
Enter passphrase (empty for no passphrase): 
â†’ å¯ä»¥è®¾ç½®å¯†ç å¢åŠ å®‰å…¨æ€§ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å›è½¦

3. ç¡®è®¤å¯†ç 
Enter same passphrase again: 
â†’ å†æ¬¡è¾“å…¥å¯†ç ç¡®è®¤

ç”Ÿæˆç»“æœï¼š
- ç§é’¥ï¼š~/.ssh/id_ed25519     (ç»å¯¹ä¸èƒ½æ³„éœ²)
- å…¬é’¥ï¼š~/.ssh/id_ed25519.pub (å¯ä»¥å…¬å¼€)
```

### 2.4 æŸ¥çœ‹å’Œç®¡ç†å¯†é’¥


**ğŸ“‹ æŸ¥çœ‹ç°æœ‰å¯†é’¥**
```bash
# æŸ¥çœ‹SSHç›®å½•ä¸­çš„æ‰€æœ‰å¯†é’¥
ls -la ~/.ssh/

# å¸¸è§æ–‡ä»¶è¯´æ˜ï¼š
# id_ed25519     - Ed25519ç§é’¥
# id_ed25519.pub - Ed25519å…¬é’¥  
# id_rsa         - RSAç§é’¥
# id_rsa.pub     - RSAå…¬é’¥
# config         - SSHé…ç½®æ–‡ä»¶
# known_hosts    - å·²çŸ¥ä¸»æœºåˆ—è¡¨
```

**ğŸ” æŸ¥çœ‹å…¬é’¥å†…å®¹**
```bash
# æŸ¥çœ‹Ed25519å…¬é’¥
cat ~/.ssh/id_ed25519.pub

# æŸ¥çœ‹RSAå…¬é’¥
cat ~/.ssh/id_rsa.pub

# è¾“å‡ºç¤ºä¾‹ï¼š
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... your.email@example.com
```

---

## 3. âš™ï¸ SSHé…ç½®æ–‡ä»¶è¯¦è§£


### 3.1 é…ç½®æ–‡ä»¶åŸºç¡€


**ğŸ”¸ é…ç½®æ–‡ä»¶ä½ç½®å’Œä½œç”¨**
```
æ–‡ä»¶è·¯å¾„ï¼š~/.ssh/config
ä½œç”¨ï¼šç®€åŒ–SSHè¿æ¥ï¼Œè®¾ç½®åˆ«åå’Œå‚æ•°
å¥½å¤„ï¼šä¸ç”¨æ¯æ¬¡è¾“å…¥å®Œæ•´çš„è¿æ¥ä¿¡æ¯
```

### 3.2 åŸºç¡€é…ç½®è¯­æ³•


**ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„**
```bash
# ~/.ssh/config æ–‡ä»¶ç¤ºä¾‹

# GitHubé…ç½®
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519
    PreferredAuthentications publickey

# é…ç½®è§£é‡Šï¼š
# Host: åˆ«åï¼Œå¯ä»¥è‡ªå®šä¹‰
# HostName: çœŸå®çš„æœåŠ¡å™¨åœ°å€
# User: ç™»å½•ç”¨æˆ·å
# IdentityFile: ä½¿ç”¨çš„ç§é’¥æ–‡ä»¶
# PreferredAuthentications: é¦–é€‰è®¤è¯æ–¹å¼
```

### 3.3 å¸¸ç”¨é…ç½®å‚æ•°è¯¦è§£


| å‚æ•°åç§° | **ä½œç”¨è¯´æ˜** | **ç¤ºä¾‹å€¼** |
|---------|-------------|-----------|
| ğŸ·ï¸ **Host** | `è®¾ç½®åˆ«å` | `github.com` |
| ğŸŒ **HostName** | `çœŸå®æœåŠ¡å™¨åœ°å€` | `github.com` |
| ğŸ‘¤ **User** | `ç™»å½•ç”¨æˆ·å` | `git` |
| ğŸ”‘ **IdentityFile** | `ç§é’¥æ–‡ä»¶è·¯å¾„` | `~/.ssh/id_ed25519` |
| ğŸšª **Port** | `SSHç«¯å£` | `22` (é»˜è®¤) |
| â±ï¸ **ConnectTimeout** | `è¿æ¥è¶…æ—¶æ—¶é—´` | `10` |
| ğŸ” **PreferredAuthentications** | `è®¤è¯æ–¹å¼` | `publickey` |

### 3.4 å®ç”¨é…ç½®æŠ€å·§


**ğŸ”¸ è®¾ç½®è¿æ¥è¶…æ—¶å’Œé‡è¯•**
```bash
Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
    ConnectTimeout 10
    
# è§£é‡Šï¼š
# ServerAliveInterval: æ¯60ç§’å‘é€ä¸€æ¬¡å¿ƒè·³
# ServerAliveCountMax: æœ€å¤šé‡è¯•3æ¬¡
# ConnectTimeout: è¿æ¥è¶…æ—¶10ç§’
```

**ğŸ”¸ ç¦ç”¨å¯†ç è®¤è¯ï¼Œåªç”¨å¯†é’¥**
```bash
Host github.com
    PasswordAuthentication no
    PreferredAuthentications publickey
    PubkeyAuthentication yes
```

---

## 4. ğŸ‘¥ å¤šè´¦æˆ·é…ç½®å®æˆ˜


### 4.1 å¤šè´¦æˆ·åœºæ™¯éœ€æ±‚


**ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯**
- **ä¸ªäºº + å…¬å¸**ï¼šä¸ªäººGitHub + å…¬å¸GitLab
- **å¤šä¸ªGitHubè´¦æˆ·**ï¼šå·¥ä½œè´¦æˆ· + ä¸ªäººè´¦æˆ·
- **ä¸åŒå¹³å°**ï¼šGitHub + GitLab + Gitee

### 4.2 å¤šè´¦æˆ·å¯†é’¥ç”Ÿæˆ


**ğŸ”¸ ä¸ºä¸åŒè´¦æˆ·ç”Ÿæˆä¸“ç”¨å¯†é’¥**
```bash
# ä¸ªäººGitHubè´¦æˆ·å¯†é’¥
ssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_personal -C "personal@gmail.com"

# å·¥ä½œGitHubè´¦æˆ·å¯†é’¥  
ssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_work -C "work@company.com"

# å…¬å¸GitLabå¯†é’¥
ssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_gitlab -C "name@company.com"

# è¯´æ˜ï¼š-f å‚æ•°æŒ‡å®šå¯†é’¥æ–‡ä»¶åï¼Œé¿å…è¦†ç›–
```

### 4.3 å¤šè´¦æˆ·SSHé…ç½®


**ğŸ“ å®Œæ•´çš„å¤šè´¦æˆ·é…ç½®ç¤ºä¾‹**
```bash
# ~/.ssh/config

# ä¸ªäººGitHubï¼ˆé»˜è®¤ï¼‰
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    PreferredAuthentications publickey

# å·¥ä½œGitHubï¼ˆä½¿ç”¨åˆ«åï¼‰
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    PreferredAuthentications publickey

# å…¬å¸GitLab
Host gitlab-company
    HostName gitlab.company.com
    User git
    IdentityFile ~/.ssh/id_ed25519_gitlab
    Port 22
    PreferredAuthentications publickey

# Giteeé…ç½®
Host gitee.com
    HostName gitee.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    PreferredAuthentications publickey
```

### 4.4 å¤šè´¦æˆ·ä»“åº“URLä½¿ç”¨


**ğŸ”¸ ä¸åŒé…ç½®ä¸‹çš„ä»“åº“å…‹éš†æ–¹å¼**
```bash
# ä¸ªäººGitHubä»“åº“ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
git clone git@github.com:username/repo.git

# å·¥ä½œGitHubä»“åº“ï¼ˆä½¿ç”¨workåˆ«åï¼‰
git clone git@github-work:company/repo.git

# å…¬å¸GitLabä»“åº“ï¼ˆä½¿ç”¨companyåˆ«åï¼‰
git clone git@gitlab-company:team/project.git

# ä¿®æ”¹ç°æœ‰ä»“åº“çš„remote URL
git remote set-url origin git@github-work:company/repo.git
```

### 4.5 å¤šè´¦æˆ·Gité…ç½®ç®¡ç†


**ğŸ”¸ é’ˆå¯¹ä¸åŒé¡¹ç›®è®¾ç½®ä¸åŒç”¨æˆ·ä¿¡æ¯**
```bash
# è¿›å…¥å·¥ä½œé¡¹ç›®ç›®å½•
cd /path/to/work-project

# è®¾ç½®å·¥ä½œé‚®ç®±å’Œç”¨æˆ·åï¼ˆä»…å¯¹å½“å‰ä»“åº“æœ‰æ•ˆï¼‰
git config user.email "work@company.com"
git config user.name "Work Name"

# è¿›å…¥ä¸ªäººé¡¹ç›®ç›®å½•
cd /path/to/personal-project

# è®¾ç½®ä¸ªäººé‚®ç®±å’Œç”¨æˆ·å
git config user.email "personal@gmail.com"  
git config user.name "Personal Name"

# æŸ¥çœ‹å½“å‰é…ç½®
git config --list --local
```

---

## 5. ğŸ”§ SSHä»£ç†ä¸å¯†é’¥ç®¡ç†


### 5.1 ä»€ä¹ˆæ˜¯SSHä»£ç†


**ğŸ”¸ SSH Agentç®€å•ç†è§£**
```
SSH Agent = å¯†é’¥ç®¡å®¶
ä½œç”¨ï¼šåœ¨å†…å­˜ä¸­ç®¡ç†ä½ çš„ç§é’¥ï¼Œé¿å…é‡å¤è¾“å…¥å¯†ç 
å¥½å¤„ï¼šä¸€æ¬¡è§£é”ï¼Œæ•´ä¸ªä¼šè¯æœŸé—´éƒ½å¯ä»¥ä½¿ç”¨
```

### 5.2 å¯åŠ¨å’Œä½¿ç”¨SSH Agent


**ğŸ”¸ å¯åŠ¨SSH Agent**
```bash
# å¯åŠ¨ssh-agentï¼ˆLinux/Macï¼‰
eval "$(ssh-agent -s)"

# æŸ¥çœ‹agentæ˜¯å¦è¿è¡Œ
echo $SSH_AGENT_PID

# Windows Git Bashä¸­å¯åŠ¨
eval `ssh-agent -s`
```

**ğŸ”¸ æ·»åŠ å¯†é’¥åˆ°Agent**
```bash
# æ·»åŠ é»˜è®¤å¯†é’¥
ssh-add ~/.ssh/id_ed25519

# æ·»åŠ ç‰¹å®šå¯†é’¥
ssh-add ~/.ssh/id_ed25519_work
ssh-add ~/.ssh/id_ed25519_personal

# æ·»åŠ æ‰€æœ‰å¯†é’¥
ssh-add ~/.ssh/id_*

# å¦‚æœå¯†é’¥æœ‰å¯†ç ï¼Œä¼šæç¤ºè¾“å…¥
```

### 5.3 ç®¡ç†Agentä¸­çš„å¯†é’¥


**ğŸ“‹ å¯†é’¥ç®¡ç†å‘½ä»¤**
```bash
# æŸ¥çœ‹å·²åŠ è½½çš„å¯†é’¥
ssh-add -l

# åˆ é™¤æ‰€æœ‰å¯†é’¥
ssh-add -D

# åˆ é™¤ç‰¹å®šå¯†é’¥
ssh-add -d ~/.ssh/id_ed25519_work

# æµ‹è¯•å¯†é’¥æ˜¯å¦å¯ç”¨
ssh-add -T ~/.ssh/id_ed25519.pub
```

### 5.4 è‡ªåŠ¨åŠ è½½å¯†é’¥é…ç½®


**ğŸ”¸ macOSè‡ªåŠ¨åŠ è½½é…ç½®**
```bash
# ~/.ssh/config ä¸­æ·»åŠ 
Host *
    AddKeysToAgent yes
    UseKeychain yes
    IdentitiesOnly yes

# è¿™æ ·é…ç½®åï¼Œå¯†é’¥ä¼šè‡ªåŠ¨åŠ è½½åˆ°agentå¹¶ä¿å­˜åˆ°keychain
```

**ğŸ”¸ Linuxè‡ªåŠ¨å¯åŠ¨é…ç½®**
```bash
# åœ¨ ~/.bashrc æˆ– ~/.zshrc ä¸­æ·»åŠ 
if [ -z "$SSH_AUTH_SOCK" ]; then
    eval "$(ssh-agent -s)"
    ssh-add ~/.ssh/id_ed25519
fi
```

---

## 6. ğŸ§ª è¿æ¥æµ‹è¯•ä¸æ•…éšœæ’é™¤


### 6.1 åŸºæœ¬è¿æ¥æµ‹è¯•


**ğŸ”¸ æµ‹è¯•SSHè¿æ¥**
```bash
# æµ‹è¯•GitHubè¿æ¥
ssh -T git@github.com

# æˆåŠŸè¾“å‡ºç¤ºä¾‹ï¼š
Hi username! You've successfully authenticated, but GitHub does not provide shell access.

# æµ‹è¯•ç‰¹å®šHosté…ç½®
ssh -T git@github-work

# æµ‹è¯•GitLabè¿æ¥
ssh -T git@gitlab.com
```

### 6.2 è¯¦ç»†è°ƒè¯•ä¿¡æ¯


**ğŸ” å¯ç”¨è¯¦ç»†è°ƒè¯•æ¨¡å¼**
```bash
# æ˜¾ç¤ºè¯¦ç»†è¿æ¥ä¿¡æ¯
ssh -vT git@github.com

# æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
ssh -vvT git@github.com

# æœ€è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
ssh -vvvT git@github.com

# è°ƒè¯•ä¿¡æ¯ä¼šæ˜¾ç¤ºï¼š
# - ä½¿ç”¨çš„é…ç½®æ–‡ä»¶
# - å°è¯•çš„å¯†é’¥æ–‡ä»¶
# - è¿æ¥è¿‡ç¨‹
# - è®¤è¯è¿‡ç¨‹
```

### 6.3 å¸¸è§é—®é¢˜è§£å†³


**âŒ é—®é¢˜1ï¼šPermission denied (publickey)**
```bash
è§£å†³æ­¥éª¤ï¼š
1. æ£€æŸ¥å…¬é’¥æ˜¯å¦å·²æ·»åŠ åˆ°è¿œç¨‹ä»“åº“
   cat ~/.ssh/id_ed25519.pub

2. æ£€æŸ¥ç§é’¥æƒé™
   chmod 600 ~/.ssh/id_ed25519

3. æ£€æŸ¥SSH Agent
   ssh-add -l
   ssh-add ~/.ssh/id_ed25519

4. æµ‹è¯•è¿æ¥
   ssh -vT git@github.com
```

**âŒ é—®é¢˜2ï¼šCould not open a connection to your authentication agent**
```bash
è§£å†³æ–¹æ³•ï¼š
# å¯åŠ¨SSH Agent
eval "$(ssh-agent -s)"

# æ·»åŠ å¯†é’¥
ssh-add ~/.ssh/id_ed25519
```

**âŒ é—®é¢˜3ï¼šHost key verification failed**
```bash
è§£å†³æ–¹æ³•ï¼š
# åˆ é™¤known_hostsä¸­çš„æ—§è®°å½•
ssh-keygen -R github.com

# é‡æ–°è¿æ¥å¹¶æ¥å—æ–°çš„host key
ssh -T git@github.com
```

### 6.4 æ–‡ä»¶æƒé™æ£€æŸ¥


**ğŸ”’ SSHæ–‡ä»¶æƒé™è¦æ±‚**
```bash
# æ£€æŸ¥å’Œä¿®å¤æƒé™
chmod 700 ~/.ssh                    # SSHç›®å½•æƒé™
chmod 600 ~/.ssh/id_ed25519         # ç§é’¥æƒé™
chmod 644 ~/.ssh/id_ed25519.pub     # å…¬é’¥æƒé™  
chmod 600 ~/.ssh/config             # é…ç½®æ–‡ä»¶æƒé™
chmod 644 ~/.ssh/known_hosts        # known_hostsæƒé™

# æŸ¥çœ‹å½“å‰æƒé™
ls -la ~/.ssh/
```

---

## 7. ğŸ›¡ï¸ å®‰å…¨æœ€ä½³å®è·µ


### 7.1 å¯†é’¥å®‰å…¨ç®¡ç†


**ğŸ” å¯†é’¥å®‰å…¨åŸåˆ™**
```
âœ… ç§é’¥ç»ä¸å¤–ä¼ ï¼šç§é’¥åªèƒ½åœ¨æœ¬åœ°ï¼Œç»ä¸èƒ½å‘é€ç»™ä»»ä½•äºº
âœ… ä½¿ç”¨å¼ºå¯†ç ï¼šä¸ºç§é’¥è®¾ç½®å¤æ‚å¯†ç 
âœ… å®šæœŸè½®æ¢ï¼šå®šæœŸæ›´æ¢å¯†é’¥ï¼Œç‰¹åˆ«æ˜¯ç¦»èŒæ—¶
âœ… å¤‡ä»½å®‰å…¨ï¼šå¤‡ä»½å¯†é’¥æ—¶è¦åŠ å¯†å­˜å‚¨
âœ… æƒé™æ§åˆ¶ï¼šä¸¥æ ¼æ§åˆ¶å¯†é’¥æ–‡ä»¶æƒé™
```

### 7.2 å¯†é’¥å¯†ç ç®¡ç†


**ğŸ”¸ è®¾ç½®å¯†é’¥å¯†ç **
```bash
# ä¸ºç°æœ‰å¯†é’¥æ·»åŠ å¯†ç 
ssh-keygen -p -f ~/.ssh/id_ed25519

# ç”Ÿæˆæ—¶ç›´æ¥è®¾ç½®å¯†ç 
ssh-keygen -t ed25519 -C "email@example.com"
# åœ¨äº¤äº’è¿‡ç¨‹ä¸­è¾“å…¥å¯†ç 

# å¯†ç çš„ä½œç”¨ï¼š
# - å³ä½¿ç§é’¥æ–‡ä»¶è¢«ç›—ï¼Œæ²¡æœ‰å¯†ç ä¹Ÿæ— æ³•ä½¿ç”¨
# - å¤šä¸€å±‚å®‰å…¨ä¿æŠ¤
```

### 7.3 å¤šè®¾å¤‡å¯†é’¥ç®¡ç†


**ğŸ–¥ï¸ å¤šè®¾å¤‡å®‰å…¨ç­–ç•¥**
```
âŒ é”™è¯¯åšæ³•ï¼š
- å¤åˆ¶ç§é’¥åˆ°å¤šå°è®¾å¤‡
- ä½¿ç”¨Uç›˜ä¼ è¾“ç§é’¥
- é€šè¿‡ç½‘ç»œä¼ è¾“ç§é’¥

âœ… æ­£ç¡®åšæ³•ï¼š
- æ¯å°è®¾å¤‡ç”Ÿæˆç‹¬ç«‹å¯†é’¥å¯¹
- åˆ†åˆ«æ·»åŠ å„è®¾å¤‡çš„å…¬é’¥åˆ°è¿œç¨‹ä»“åº“
- å„è®¾å¤‡ç‹¬ç«‹ç®¡ç†è‡ªå·±çš„ç§é’¥
```

### 7.4 ä¼ä¸šç¯å¢ƒå®‰å…¨é…ç½®


**ğŸ¢ ä¼ä¸šçº§å®‰å…¨é…ç½®ç¤ºä¾‹**
```bash
# ~/.ssh/config
Host *.company.com
    User git
    IdentitiesOnly yes
    PreferredAuthentications publickey
    PasswordAuthentication no
    PubkeyAcceptedKeyTypes ssh-ed25519,ssh-rsa
    KexAlgorithms curve25519-sha256@libssh.org
    Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com
    MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com
    
# è§£é‡Šï¼š
# IdentitiesOnly yes     : åªä½¿ç”¨æŒ‡å®šçš„å¯†é’¥
# PasswordAuthentication no : ç¦ç”¨å¯†ç è®¤è¯
# å…¶ä»–å‚æ•°æŒ‡å®šäº†å®‰å…¨çš„åŠ å¯†ç®—æ³•
```

### 7.5 å®šæœŸå®‰å…¨æ£€æŸ¥


**ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å•**
- [ ] **å¯†é’¥æƒé™**ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™æ˜¯å¦æ­£ç¡®
- [ ] **å¯†é’¥å¼ºåº¦**ï¼šä½¿ç”¨Ed25519æˆ–4096ä½RSA
- [ ] **å¯†é’¥å¯†ç **ï¼šç§é’¥æ˜¯å¦è®¾ç½®äº†å¼ºå¯†ç 
- [ ] **è¿‡æœŸæ¸…ç†**ï¼šåˆ é™¤ä¸å†ä½¿ç”¨çš„å¯†é’¥
- [ ] **è®¿é—®å®¡è®¡**ï¼šæ£€æŸ¥è¿œç¨‹ä»“åº“çš„å¯†é’¥åˆ—è¡¨
- [ ] **é…ç½®å®¡æŸ¥**ï¼šæ£€æŸ¥SSHé…ç½®æ˜¯å¦å®‰å…¨

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ SSHä½œç”¨ï¼šå®‰å…¨è¿æ¥Gitä»“åº“ï¼Œå…å¯†æ“ä½œ
ğŸ”¸ å¯†é’¥å¯¹ï¼šç§é’¥åœ¨æœ¬åœ°ï¼Œå…¬é’¥åœ¨è¿œç¨‹ï¼Œé…å¯¹éªŒè¯èº«ä»½  
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼š~/.ssh/configï¼Œç®€åŒ–è¿æ¥å‚æ•°
ğŸ”¸ å¤šè´¦æˆ·ï¼šä¸åŒå¯†é’¥é…ä¸åŒHoståˆ«å
ğŸ”¸ SSH Agentï¼šå†…å­˜ä¸­ç®¡ç†å¯†é’¥ï¼Œé¿å…é‡å¤è¾“å…¥å¯†ç 
ğŸ”¸ å®‰å…¨åŸåˆ™ï¼šç§é’¥ä¸å¤–ä¼ ï¼Œè®¾ç½®å¼ºå¯†ç ï¼Œå®šæœŸè½®æ¢
```

### 8.2 å…³é”®æ“ä½œæµç¨‹


**ğŸ”¹ é¦–æ¬¡é…ç½®SSHæµç¨‹**
```
ç¬¬1æ­¥ï¼šç”Ÿæˆå¯†é’¥å¯¹
ssh-keygen -t ed25519 -C "your.email@example.com"

ç¬¬2æ­¥ï¼šæ·»åŠ å…¬é’¥åˆ°è¿œç¨‹ä»“åº“
å¤åˆ¶ ~/.ssh/id_ed25519.pub å†…å®¹åˆ°GitHub/GitLab

ç¬¬3æ­¥ï¼šæµ‹è¯•è¿æ¥
ssh -T git@github.com

ç¬¬4æ­¥ï¼šå…‹éš†ä»“åº“
git clone git@github.com:username/repo.git
```

**ğŸ”¹ å¤šè´¦æˆ·é…ç½®æµç¨‹**
```
ç¬¬1æ­¥ï¼šä¸ºæ¯ä¸ªè´¦æˆ·ç”Ÿæˆä¸“ç”¨å¯†é’¥
ç¬¬2æ­¥ï¼šé…ç½® ~/.ssh/config æ–‡ä»¶è®¾ç½®Hoståˆ«å
ç¬¬3æ­¥ï¼šåˆ†åˆ«æµ‹è¯•å„ä¸ªè´¦æˆ·è¿æ¥
ç¬¬4æ­¥ï¼šå…‹éš†æ—¶ä½¿ç”¨ç›¸åº”çš„Hoståˆ«å
```

### 8.3 æ•…éšœæ’é™¤æ€è·¯


**ğŸ”§ è¿æ¥é—®é¢˜è¯Šæ–­æ­¥éª¤**
```
1. æ£€æŸ¥å¯†é’¥æ˜¯å¦å­˜åœ¨ï¼šls ~/.ssh/
2. æ£€æŸ¥å…¬é’¥æ˜¯å¦å·²æ·»åŠ åˆ°è¿œç¨‹ä»“åº“
3. æ£€æŸ¥æ–‡ä»¶æƒé™ï¼šchmod 600 ~/.ssh/id_*
4. å¯åŠ¨SSH Agentï¼ševal "$(ssh-agent -s)"
5. æ·»åŠ å¯†é’¥ï¼šssh-add ~/.ssh/id_ed25519
6. è¯¦ç»†æµ‹è¯•ï¼šssh -vT git@github.com
```

### 8.4 å®‰å…¨è¦ç‚¹è®°å¿†


**ğŸ›¡ï¸ SSHå®‰å…¨è®°å¿†å£è¯€**
```
ç§é’¥æœ¬åœ°è—ï¼Œå…¬é’¥è¿œç¨‹æ”¾
æƒé™è¦è®¾å¯¹ï¼Œå¯†ç è¦åŠ å¼º
å¤šè´¦æˆ·åˆ†ç¦»ï¼Œåˆ«åæ¥å¸®å¿™
å®šæœŸè¦æ£€æŸ¥ï¼Œå®‰å…¨æ— éšæ‚£
```

### 8.5 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ æ—¥å¸¸å¼€å‘ä¼˜åŠ¿**
- **æå‡æ•ˆç‡**ï¼šä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…å…å¯†æ“ä½œ
- **å¢å¼ºå®‰å…¨**ï¼šå¯†é’¥è®¤è¯æ¯”å¯†ç æ›´å®‰å…¨
- **ç®€åŒ–ç®¡ç†**ï¼šå¤šè´¦æˆ·æ— ç¼åˆ‡æ¢
- **æ ‡å‡†è§„èŒƒ**ï¼šä¼ä¸šå¼€å‘çš„æ ‡å‡†åšæ³•

**ğŸš€ è¿›é˜¶æŠ€èƒ½**
- ç†Ÿç»ƒé…ç½®å¤šè´¦æˆ·SSHæ˜¯é«˜çº§å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½
- ç†è§£SSHåŸç†æœ‰åŠ©äºè§£å†³å„ç§è¿æ¥é—®é¢˜
- æŒæ¡å®‰å…¨æœ€ä½³å®è·µï¼Œä¿æŠ¤ä»£ç å’Œç³»ç»Ÿå®‰å…¨

**æ ¸å¿ƒè®°å¿†**ï¼š
- SSHè®©Gitæ“ä½œæ›´å®‰å…¨æ›´ä¾¿æ·
- å¯†é’¥å¯¹æ˜¯æ ¸å¿ƒï¼Œé…ç½®æ–‡ä»¶æ˜¯å…³é”®
- å¤šè´¦æˆ·ç®¡ç†é Hoståˆ«ååŒºåˆ†
- å®‰å…¨ç¬¬ä¸€ï¼Œç§é’¥ä¿æŠ¤æœ€é‡è¦