---
title: 4、历史查看与版本对比
---
## 📚 目录

1. [理解Git历史记录](#1-理解Git历史记录)
2. [git log - 历史查看神器](#2-git-log-历史查看神器)
3. [git show - 单个提交详情](#3-git-show-单个提交详情)
4. [git diff - 差异对比专家](#4-git-diff-差异对比专家)
5. [git blame - 代码侦探](#5-git-blame-代码侦探)
6. [历史搜索与过滤技巧](#6-历史搜索与过滤技巧)
7. [实战应用场景](#7-实战应用场景)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🕰️ 理解Git历史记录


### 1.1 什么是Git历史记录


**简单理解**：Git历史记录就像是项目的"时光机"，记录了项目从创建到现在的所有变化。

```
想象一下写作文的过程：
第一版：只有标题
第二版：写了开头段落
第三版：补充了主体内容
第四版：修改了结尾
...

Git就是这样记录代码的每次"修改版本"
```

### 1.2 历史记录的组成部分


┌─ Git提交记录 ────────────────────┐
│ **提交哈希值**：每次提交的唯一ID │
│ **作者信息**：谁写的这次修改     │
│ **提交时间**：什么时候提交的     │
│ **提交消息**：这次改了什么       │
│ **文件变化**：具体修改了哪些文件 │
└──────────────────────────────────┘

### 1.3 为什么要查看历史


**实际需求场景**：
- 🔍 **找bug**：代码什么时候出问题的？
- 👥 **协作**：同事改了什么？
- 📝 **回顾**：项目是怎么一步步完善的？
- 🔄 **回退**：需要撤销某些修改
- 📊 **统计**：谁贡献了多少代码？

---

## 2. 📖 git log - 历史查看神器


### 2.1 基础用法：最简单的历史查看


```bash
git log
```

**输出示例**：
```
commit 2f8a9b3c1e4d6f7a8b9c0d1e2f3a4b5c6d7e8f9a
Author: 张三 <zhangsan@example.com>
Date:   Sat Sep 21 14:30:22 2025 +0800

    添加用户登录功能

commit 1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b
Author: 李四 <lisi@example.com>
Date:   Fri Sep 20 16:45:10 2025 +0800

    修复页面样式问题
```

🎯 **新手理解**：这就像翻阅一本日记，最新的内容在最上面。

### 2.2 一行显示：简洁版本


```bash
git log --oneline
```

**输出示例**：
```
2f8a9b3 添加用户登录功能
1a2b3c4 修复页面样式问题
9e8f7d6 创建首页模板
5c4b3a2 初始化项目
```

💡 **为什么这样好用**：
- 一眼就能看出项目发展脉络
- 哈希值缩短了，但依然唯一
- 适合快速浏览历史

### 2.3 图形化显示：看分支合并


```bash
git log --oneline --graph --all
```

**输出示例**：
```
*   2f8a9b3 (HEAD -> main) 合并登录功能
|\  
| * 1e2f3a4 (feature/login) 完善登录验证
| * 9d8c7b6 添加登录页面
|/  
* 5a4b3c2 修复首页bug
* 3f2e1d0 创建首页
```

🌳 **图形含义**：
- `*` 代表一个提交
- `|` 代表分支线
- `\` `/` 代表分支的分叉和合并

### 2.4 限制显示数量


```bash
# 只看最近5次提交
git log --oneline -5

# 只看最近10次提交
git log -10
```

💪 **实用技巧**：大项目历史很长，限制数量避免信息过载。

### 2.5 按时间过滤


```bash
# 查看最近一周的提交
git log --since="1 week ago"

# 查看某个日期之后的提交
git log --since="2025-09-01"

# 查看某个时间段的提交
git log --since="2025-09-01" --until="2025-09-10"
```

📅 **常用时间表达式**：
- `"1 day ago"` - 一天前
- `"2 weeks ago"` - 两周前
- `"3 months ago"` - 三个月前
- `"2025-09-01"` - 具体日期

### 2.6 按作者过滤


```bash
# 查看张三的所有提交
git log --author="张三"

# 查看包含"张"的作者提交
git log --author="张"
```

---

## 3. 🔍 git show - 单个提交详情


### 3.1 查看最近一次提交


```bash
git show
```

**作用**：显示最新提交的详细信息，包括：
- 提交信息
- 修改了哪些文件
- 具体修改了什么内容

### 3.2 查看指定提交


```bash
# 使用完整哈希值
git show 2f8a9b3c1e4d6f7a8b9c0d1e2f3a4b5c6d7e8f9a

# 使用简短哈希值（推荐）
git show 2f8a9b3

# 使用相对引用
git show HEAD~1  # 上一次提交
git show HEAD~2  # 上两次提交
```

🎯 **新手提示**：哈希值只需要输入前7-8位就够了，Git会自动识别。

### 3.3 只看提交信息，不看文件变化


```bash
git show --stat 2f8a9b3
```

**输出示例**：
```
commit 2f8a9b3c1e4d6f7a8b9c0d1e2f3a4b5c6d7e8f9a
Author: 张三 <zhangsan@example.com>
Date:   Sat Sep 21 14:30:22 2025 +0800

    添加用户登录功能

 login.html    | 25 +++++++++++++++++++++++++
 login.js      | 15 +++++++++++++++
 style.css     |  8 ++++++++
 3 files changed, 48 insertions(+)
```

💡 **理解`--stat`**：只显示统计信息，不显示具体代码变化，适合快速了解改动规模。

---

## 4. ⚖️ git diff - 差异对比专家


### 4.1 理解diff的作用


**生活类比**：
```
就像用Word的"修订模式"比较两个文档：
- 红色：删除的内容
- 绿色：新增的内容
- 对比两个版本的差异
```

### 4.2 工作区 vs 暂存区


```bash
# 查看工作区与暂存区的差异
git diff
```

**使用场景**：修改了文件但还没add时，看看改了什么。

┌─ 实际操作示例 ─────────────────┐
│ 1. 修改了 index.html 文件      │
│ 2. 运行 git diff              │
│ 3. 看到具体修改内容           │
│ 4. 确认无误后再 git add       │
└────────────────────────────────┘

### 4.3 暂存区 vs 最新提交


```bash
# 查看暂存区与最新提交的差异
git diff --staged
# 或者
git diff --cached
```

**使用场景**：文件已经add到暂存区，想确认即将提交的内容。

🎯 **记忆技巧**：
- `git diff` = 工作区的变化（还没add）
- `git diff --staged` = 暂存区的变化（已经add，准备commit）

### 4.4 工作区 vs 最新提交


```bash
# 查看工作区与最新提交的差异
git diff HEAD
```

**作用**：无论文件是否已add，都能看到与最新提交的总体差异。

### 4.5 比较不同提交


```bash
# 比较两个提交之间的差异
git diff HEAD~2 HEAD~1

# 比较指定提交
git diff 1a2b3c4 2f8a9b3

# 比较某个文件在两个提交间的差异
git diff HEAD~1 HEAD -- index.html
```

### 4.6 diff输出解读


**输出示例**：
```diff
diff --git a/index.html b/index.html
index 1a2b3c4..2f8a9b3 100644
--- a/index.html
+++ b/index.html
$$ -10,7 +10,8 $$
 <body>
     <h1>欢迎来到我的网站</h1>
-    <p>这是一个简单的网页</p>
+    <p>这是一个精美的网页</p>
+    <p>新增的段落内容</p>
 </body>
```

📖 **符号含义**：
- `---` 旧版本文件
- `+++` 新版本文件  
- `-` 删除的行（红色显示）
- `+` 新增的行（绿色显示）
- `$$` 行号信息

---

## 5. 🔎 git blame - 代码侦探


### 5.1 什么是blame


**作用**：查看文件每一行代码是谁写的、什么时候写的。

**生活类比**：
```
就像在一份合作报告上看批注：
- 这段话是张三昨天写的
- 那个数据是李四上周添加的
- 这个结论是王五本月修改的
```

### 5.2 基本用法


```bash
# 查看文件每行的作者信息
git blame index.html
```

**输出示例**：
```
2f8a9b3c (张三    2025-09-21 14:30:22 +0800  1) <!DOCTYPE html>
1a2b3c4d (李四    2025-09-20 16:45:10 +0800  2) <html>
9e8f7d6c (张三    2025-09-21 14:30:22 +0800  3) <head>
5c4b3a2e (王五    2025-09-19 10:20:15 +0800  4)     <title>我的网站</title>
```

📝 **信息解读**：
- `2f8a9b3c` - 提交哈希值
- `张三` - 作者
- `2025-09-21 14:30:22` - 提交时间
- `1)` - 行号
- 后面是具体代码内容

### 5.3 查看指定行范围


```bash
# 只看第10到20行
git blame -L 10,20 index.html

# 从第10行到文件末尾
git blame -L 10, index.html
```

### 5.4 实际应用场景


**🐛 bug定位**：
```
1. 发现某行代码有问题
2. git blame 查看是谁写的
3. 找到对应提交，了解当时的背景
4. 联系作者或查看相关提交信息
```

**📚 代码学习**：
```
1. 看到优秀的代码实现
2. git blame 查看作者和时间
3. 学习编写思路和技巧
```

---

## 6. 🔍 历史搜索与过滤技巧


### 6.1 按提交消息搜索


```bash
# 搜索包含"登录"的提交
git log --grep="登录"

# 搜索包含"bug"或"修复"的提交
git log --grep="bug\|修复"
```

💡 **实用场景**：快速找到特定功能的相关提交。

### 6.2 按文件搜索


```bash
# 查看某个文件的提交历史
git log -- index.html

# 查看某个目录的提交历史
git log -- src/components/
```

### 6.3 按代码内容搜索


```bash
# 搜索添加或删除了"function login"的提交
git log -S "function login"

# 搜索修改了包含"password"的行的提交
git log -G "password"
```

🔍 **区别理解**：
- `-S` 搜索添加或删除了指定字符串的提交
- `-G` 搜索修改了匹配正则表达式的行的提交

### 6.4 组合搜索条件


```bash
# 查看张三最近一周关于登录功能的提交
git log --author="张三" --since="1 week ago" --grep="登录"

# 查看修改了CSS文件的最近10次提交
git log -10 -- "*.css"
```

### 6.5 格式化输出


```bash
# 自定义输出格式
git log --pretty=format:"%h - %an, %ar : %s"
```

**输出示例**：
```
2f8a9b3 - 张三, 2 hours ago : 添加用户登录功能
1a2b3c4 - 李四, 1 day ago : 修复页面样式问题
```

**常用格式符号**：
- `%h` - 简短哈希值
- `%an` - 作者姓名
- `%ar` - 相对时间
- `%s` - 提交消息

---

## 7. 🚀 实战应用场景


### 7.1 场景一：查找bug引入时间


**问题**：用户反馈登录功能有bug，需要找到是什么时候引入的。

**解决步骤**：
```bash
# 1. 查看登录相关的提交历史
git log --oneline --grep="登录"

# 2. 查看登录文件的修改历史
git log -- login.js

# 3. 逐个查看可疑提交的详细内容
git show 2f8a9b3

# 4. 如果需要，使用blame查看具体行
git blame login.js
```

### 7.2 场景二：了解新项目


**情况**：刚接手一个项目，需要快速了解项目发展历程。

**操作流程**：
```bash
# 1. 查看项目整体历史
git log --oneline --graph --all -20

# 2. 查看主要贡献者
git log --pretty=format:"%an" | sort | uniq -c | sort -rn

# 3. 查看最近的重要变更
git log --since="1 month ago" --oneline

# 4. 查看具体重要提交
git show HEAD~5
```

### 7.3 场景三：代码审查


**任务**：审查同事的提交，确保代码质量。

**审查步骤**：
```bash
# 1. 查看同事最近的提交
git log --author="同事名字" -10 --oneline

# 2. 查看具体提交内容
git show 提交哈希值

# 3. 对比修改前后
git diff HEAD~1 HEAD

# 4. 查看修改的文件列表
git show --stat HEAD
```

### 7.4 场景四：准备版本发布


**需求**：整理从上个版本到现在的更新内容。

**操作方法**：
```bash
# 1. 查看从上个版本标签到现在的提交
git log v1.0.0..HEAD --oneline

# 2. 按分类整理提交
git log v1.0.0..HEAD --grep="feat" --oneline  # 新功能
git log v1.0.0..HEAD --grep="fix" --oneline   # bug修复

# 3. 生成变更统计
git diff --stat v1.0.0 HEAD
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的命令


┌─ 核心命令速查 ──────────────────┐
│ **基础查看**                   │
│ • git log --oneline           │
│ • git show                    │
│ • git diff                    │
│                               │
│ **进阶技巧**                   │
│ • git log --graph --all       │
│ • git diff --staged           │
│ • git blame 文件名            │
│                               │
│ **搜索过滤**                   │
│ • git log --grep="关键词"     │
│ • git log --author="作者"     │
│ • git log --since="时间"      │
└───────────────────────────────┘

### 8.2 三种对比状态理解


```
工作区 ←→ 暂存区 ←→ 本地仓库
  |        |         |
git diff  git diff  git diff
          --staged   HEAD
```

**记忆要点**：
- **工作区**：你正在编辑的文件
- **暂存区**：git add 后的文件
- **本地仓库**：git commit 后的文件

### 8.3 常用组合命令


```bash
# 查看项目概况
git log --oneline --graph --all -20

# 查看今天的工作
git log --since="today" --author="$(git config user.name)"

# 查看某个功能的完整历史
git log --grep="功能名" --oneline

# 准备提交前的检查
git diff --staged
```

### 8.4 实用技巧总结


🎯 **快速定位**：
- 用 `--oneline` 快速浏览
- 用 `--grep` 搜索关键词
- 用 `-数字` 限制显示数量

🔍 **深入分析**：
- 用 `git show` 查看单个提交
- 用 `git blame` 追踪代码作者
- 用 `git diff` 对比不同版本

📊 **团队协作**：
- 用 `--author` 查看成员贡献
- 用 `--since/--until` 按时间过滤
- 用 `--graph` 理解分支合并

### 8.5 学习建议


💪 **新手练习步骤**：
1. 先熟练使用 `git log --oneline`
2. 学会用 `git show` 查看提交详情
3. 掌握 `git diff` 的三种用法
4. 逐步学习搜索和过滤技巧

🚀 **进阶方向**：
- 学习更复杂的格式化输出
- 掌握正则表达式搜索
- 结合其他Git命令使用
- 编写Git别名简化常用操作

**记忆口诀**：
```
log查历史show详情，diff对比blame追踪
grep搜索author过滤，since时间until限制
oneline简洁graph分支，staged暂存HEAD当前
```

---

🎉 **恭喜！** 你已经掌握了Git历史查看与版本对比的核心技能。这些命令是Git日常使用的基础，熟练掌握后会大大提高你的开发效率和代码管理能力。记住：多练习，多实践，Git的强大功能需要在实际项目中才能真正体会到！