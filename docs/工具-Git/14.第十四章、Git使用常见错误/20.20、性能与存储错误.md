---
title: 20ã€æ€§èƒ½ä¸å­˜å‚¨é”™è¯¯
---
## ğŸ“š ç›®å½•

1. [ä»“åº“å­˜å‚¨ç©ºé—´é—®é¢˜](#1-ä»“åº“å­˜å‚¨ç©ºé—´é—®é¢˜)
2. [Gitåƒåœ¾å›æ”¶é”™è¯¯](#2-gitåƒåœ¾å›æ”¶é”™è¯¯)
3. [ä»“åº“æŸåä¿®å¤](#3-ä»“åº“æŸåä¿®å¤)
4. [ç´¢å¼•æ–‡ä»¶å¼‚å¸¸å¤„ç†](#4-ç´¢å¼•æ–‡ä»¶å¼‚å¸¸å¤„ç†)
5. [å¯¹è±¡æ•°æ®åº“é—®é¢˜](#5-å¯¹è±¡æ•°æ®åº“é—®é¢˜)
6. [ç£ç›˜ç©ºé—´ä¸è¶³é”™è¯¯](#6-ç£ç›˜ç©ºé—´ä¸è¶³é”™è¯¯)
7. [å†…å­˜ä¸è¶³æ€§èƒ½é—®é¢˜](#7-å†…å­˜ä¸è¶³æ€§èƒ½é—®é¢˜)
8. [ç½‘ç»œå¸¦å®½ä¼˜åŒ–](#8-ç½‘ç»œå¸¦å®½ä¼˜åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ’¾ ä»“åº“å­˜å‚¨ç©ºé—´é—®é¢˜


### 1.1 .gitç›®å½•è¿‡å¤§çš„åŸå› 


**ğŸ”¸ ä¸ºä»€ä¹ˆ.gitç›®å½•ä¼šå˜å¾—å¾ˆå¤§ï¼Ÿ**

æƒ³è±¡ä¸€ä¸‹ï¼ŒGitå°±åƒä¸€ä¸ªéå¸¸ç»†å¿ƒçš„"æ¡£æ¡ˆç®¡ç†å‘˜"ï¼Œå®ƒä¼šæŠŠä½ é¡¹ç›®çš„**æ¯ä¸€ä¸ªå†å²ç‰ˆæœ¬**éƒ½å®Œæ•´ä¿å­˜ä¸‹æ¥ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œè¿™ä¸ª"æ¡£æ¡ˆå®¤"(.gitç›®å½•)è‡ªç„¶ä¼šè¶Šæ¥è¶Šå¤§ã€‚

```
é¡¹ç›®æ¼”å˜è¿‡ç¨‹ï¼š
åˆå§‹é¡¹ç›® â†’ ç‰ˆæœ¬1 â†’ ç‰ˆæœ¬2 â†’ ç‰ˆæœ¬3 â†’ ... â†’ ç‰ˆæœ¬N
     |        |        |        |              |
   ä¿å­˜    ä¿å­˜     ä¿å­˜     ä¿å­˜            ä¿å­˜
```

**å¸¸è§å¯¼è‡´ç©ºé—´è†¨èƒ€çš„æƒ…å†µï¼š**

| åŸå›  | è¯´æ˜ | å½±å“ç¨‹åº¦ |
|------|------|---------|
| **å†å²æ–‡ä»¶è¿‡å¤š** | é•¿æœŸå¼€å‘ç§¯ç´¯å¤§é‡æäº¤ | `ğŸ”¥ ä¸­ç­‰` |
| **å¤§æ–‡ä»¶è¯¯æäº¤** | å›¾ç‰‡ã€è§†é¢‘ã€ç¼–è¯‘æ–‡ä»¶ç­‰ | `ğŸš¨ ä¸¥é‡` |
| **äºŒè¿›åˆ¶æ–‡ä»¶é¢‘ç¹ä¿®æ”¹** | Wordæ–‡æ¡£ã€å›¾ç‰‡åå¤æ›´æ–° | `ğŸ”¥ ä¸­ç­‰` |
| **æœªåŠæ—¶æ¸…ç†** | åˆ é™¤çš„æ–‡ä»¶ä»åœ¨å†å²ä¸­ | `âš ï¸ è½»å¾®` |

### 1.2 æ£€æŸ¥ä»“åº“å¤§å°çš„æ–¹æ³•


**ğŸ” å¿«é€Ÿè¯Šæ–­ä»“åº“å¤§å°ï¼š**

```bash
# æŸ¥çœ‹.gitç›®å½•æ€»å¤§å°
du -sh .git/

# æŸ¥çœ‹ä»“åº“å„éƒ¨åˆ†å¤§å°åˆ†å¸ƒ
du -sh .git/*

# æ‰¾å‡ºæœ€å¤§çš„æ–‡ä»¶ï¼ˆå‰10ä¸ªï¼‰
git rev-list --objects --all | \
grep "$(git verify-pack -v .git/objects/pack/*.idx | \
sort -k 3 -nr | head -10 | awk '{print$1}')"
```

**ğŸ“Š å¤§å°åˆ†æç¤ºä¾‹ï¼š**

```
ä»“åº“å¤§å°åˆ†æç»“æœï¼š
.git/objects/pack/    850MB  â† ä¸»è¦å­˜å‚¨åŒºåŸŸ
.git/refs/           2MB    â† åˆ†æ”¯å¼•ç”¨ä¿¡æ¯  
.git/logs/           5MB    â† æ“ä½œæ—¥å¿—
.git/hooks/          1MB    â† é’©å­è„šæœ¬
æ€»è®¡ï¼š               858MB
```

### 1.3 æ¸…ç†ç­–ç•¥æ–¹æ¡ˆ


**ğŸ§¹ æ¸è¿›å¼æ¸…ç†æ–¹æ³•ï¼š**

```bash
# ç¬¬ä¸€æ­¥ï¼šåŸºç¡€æ¸…ç†ï¼ˆå®‰å…¨ï¼‰
git gc --aggressive          # åƒåœ¾å›æ”¶
git prune                   # æ¸…ç†æ‚¬ç©ºå¯¹è±¡

# ç¬¬äºŒæ­¥ï¼šæ¸…ç†è¿œç¨‹åˆ†æ”¯ç¼“å­˜
git remote prune origin     # æ¸…ç†å·²åˆ é™¤çš„è¿œç¨‹åˆ†æ”¯

# ç¬¬ä¸‰æ­¥ï¼šé‡å†™å†å²ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git filter-branch --tree-filter 'rm -f å¤§æ–‡ä»¶å' HEAD
```

> **âš ï¸ é‡è¦æé†’**ï¼šé‡å†™å†å²ä¼šæ”¹å˜æäº¤IDï¼Œå›¢é˜Ÿå¼€å‘æ—¶éœ€è¦æ‰€æœ‰æˆå‘˜é‡æ–°å…‹éš†ä»“åº“ã€‚

---

## 2. ğŸ—‘ï¸ Gitåƒåœ¾å›æ”¶é”™è¯¯


### 2.1 ä»€ä¹ˆæ˜¯Gitåƒåœ¾å›æ”¶


**ğŸ’¡ é€šä¿—ç†è§£ï¼š**

Gitåƒåœ¾å›æ”¶(gc)å°±åƒç”µè„‘çš„"ç£ç›˜æ¸…ç†å·¥å…·"ã€‚å½“ä½ åˆ é™¤æ–‡ä»¶ã€é‡ç½®æäº¤æ—¶ï¼Œè¿™äº›æ•°æ®å¹¶ä¸ä¼šç«‹å³æ¶ˆå¤±ï¼Œè€Œæ˜¯å˜æˆ"åƒåœ¾"ç•™åœ¨ä»“åº“é‡Œã€‚`git gc`å‘½ä»¤å°±æ˜¯ä¸“é—¨æ¸…ç†è¿™äº›åƒåœ¾çš„ã€‚

```
åƒåœ¾å›æ”¶è¿‡ç¨‹ç¤ºæ„ï¼š
ä½¿ç”¨ä¸­çš„å¯¹è±¡ â”€â”€ä¿ç•™â”€â”€> å‹ç¼©å­˜å‚¨
    |
æ— å¼•ç”¨å¯¹è±¡ â”€â”€æ¸…ç†â”€â”€> é‡Šæ”¾ç©ºé—´
    |
æ‚¬ç©ºå¯¹è±¡ â”€â”€â”€â”€åˆ é™¤â”€â”€> å›æ”¶å†…å­˜
```

### 2.2 å¸¸è§gcå¤±è´¥åœºæ™¯


**ğŸš¨ å…¸å‹é”™è¯¯ä¿¡æ¯ï¼š**

```bash
# é”™è¯¯1ï¼šæƒé™é—®é¢˜
error: cannot lock ref 'refs/heads/master'
fatal: gc failed

# é”™è¯¯2ï¼šç£ç›˜ç©ºé—´ä¸è¶³  
fatal: Out of memory, malloc failed
error: failed to run repack

# é”™è¯¯3ï¼šå¯¹è±¡æŸå
error: bad object refs/heads/feature
fatal: gc failed
```

**ğŸ”§ å¯¹åº”è§£å†³æ–¹æ¡ˆï¼š**

```bash
# è§£å†³æƒé™é—®é¢˜
sudo chown -R $USER:$USER .git/
git gc

# è§£å†³ç©ºé—´ä¸è¶³ï¼ˆåˆ†æ‰¹å¤„ç†ï¼‰
git repack -a -d --window=50 --depth=50
git gc --prune=now

# ä¿®å¤æŸåçš„å¼•ç”¨
git update-ref -d refs/heads/æŸåçš„åˆ†æ”¯å
git gc
```

### 2.3 æ‰‹åŠ¨åƒåœ¾å›æ”¶æ“ä½œ


**ğŸ“‹ æ ‡å‡†gcæ“ä½œæµç¨‹ï¼š**

```bash
# æ£€æŸ¥ä»“åº“çŠ¶æ€
git fsck --full

# æ¸©å’Œçš„åƒåœ¾å›æ”¶
git gc

# æ¿€è¿›çš„åƒåœ¾å›æ”¶ï¼ˆæ›´å½»åº•ï¼‰
git gc --aggressive --prune=now

# éªŒè¯æ¸…ç†æ•ˆæœ
du -sh .git/
```

**â±ï¸ é¢„è®¡æ“ä½œæ—¶é—´ï¼š**
- å°å‹ä»“åº“ï¼ˆ<100MBï¼‰ï¼š`30ç§’-2åˆ†é’Ÿ`
- ä¸­å‹ä»“åº“ï¼ˆ100MB-1GBï¼‰ï¼š`2-10åˆ†é’Ÿ`  
- å¤§å‹ä»“åº“ï¼ˆ>1GBï¼‰ï¼š`10åˆ†é’Ÿ-1å°æ—¶`

---

## 3. ğŸ”§ ä»“åº“æŸåä¿®å¤


### 3.1 ä»“åº“æŸåçš„è¡¨ç°


**ğŸ” æŸåçš„å…¸å‹ç—‡çŠ¶ï¼š**

å½“Gitä»“åº“å‡ºç°é—®é¢˜æ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™äº›"æ±‚æ•‘ä¿¡å·"ï¼š

```bash
# æç¤º1ï¼šå¯¹è±¡ä¸¢å¤±
error: object file .git/objects/xx/xxxxx is empty
fatal: loose object is corrupt

# æç¤º2ï¼šå¼•ç”¨æŸå  
error: refs/heads/master does not point to a valid object
fatal: your current branch appears to be broken

# æç¤º3ï¼šç´¢å¼•æŸå
error: bad index file sha1 signature
fatal: index file corrupt
```

### 3.2 æŸåç¨‹åº¦è¯„ä¼°


**ğŸ“Š æŸåä¸¥é‡ç¨‹åº¦åˆ†ç±»ï¼š**

| æŸåçº§åˆ« | è¡¨ç° | ä¿®å¤éš¾åº¦ | æ•°æ®é£é™© |
|---------|------|---------|---------|
| **ğŸŸ¢ è½»å¾®** | ä¸ªåˆ«æ–‡ä»¶æ ¡éªŒå¤±è´¥ | `ç®€å•` | `ä½` |
| **ğŸŸ¡ ä¸­ç­‰** | åˆ†æ”¯å¼•ç”¨é”™è¯¯ | `ä¸­ç­‰` | `ä¸­` |
| **ğŸ”´ ä¸¥é‡** | å¯¹è±¡æ•°æ®åº“æŸå | `å›°éš¾` | `é«˜` |
| **ğŸ’€ è‡´å‘½** | .gitç›®å½•å®Œå…¨æŸå | `æéš¾` | `æé«˜` |

### 3.3 ä¿®å¤æ“ä½œæ­¥éª¤


**ğŸ› ï¸ åˆ†çº§ä¿®å¤ç­–ç•¥ï¼š**

```bash
# ç¬¬ä¸€çº§ï¼šåŸºç¡€æ£€æŸ¥ä¿®å¤
git fsck --full --strict      # å…¨é¢æ£€æŸ¥
git gc --aggressive           # åƒåœ¾å›æ”¶ä¿®å¤

# ç¬¬äºŒçº§ï¼šå¼•ç”¨ä¿®å¤
git update-ref refs/heads/master HEAD~1    # é‡ç½®æŸåçš„åˆ†æ”¯
git symbolic-ref HEAD refs/heads/master    # ä¿®å¤HEADæŒ‡é’ˆ

# ç¬¬ä¸‰çº§ï¼šå¯¹è±¡æ¢å¤ï¼ˆé«˜é£é™©ï¼‰
git cat-file -p æŸåå¯¹è±¡ID               # å°è¯•è¯»å–å¯¹è±¡
git hash-object -w æ–‡ä»¶å                # é‡æ–°åˆ›å»ºå¯¹è±¡
```

**ğŸ’¡ ä¿é™©åšæ³•ï¼š**

åœ¨ä¿®å¤å‰ï¼ŒåŠ¡å¿…**å¤‡ä»½æ•´ä¸ªé¡¹ç›®ç›®å½•**ï¼š

```bash
# åˆ›å»ºå®Œæ•´å¤‡ä»½
cp -r é¡¹ç›®ç›®å½• é¡¹ç›®ç›®å½•_backup_$(date +%Y%m%d)

# æˆ–è€…æ‰“åŒ…å¤‡ä»½
tar -czf é¡¹ç›®å¤‡ä»½_$(date +%Y%m%d).tar.gz é¡¹ç›®ç›®å½•/
```

---

## 4. ğŸ“ ç´¢å¼•æ–‡ä»¶å¼‚å¸¸å¤„ç†


### 4.1 ç´¢å¼•æ–‡ä»¶çš„ä½œç”¨


**ğŸ’¡ ä»€ä¹ˆæ˜¯ç´¢å¼•æ–‡ä»¶ï¼Ÿ**

ç´¢å¼•æ–‡ä»¶å°±åƒGitçš„"è´­ç‰©è½¦"ã€‚å½“ä½ ç”¨`git add`æ·»åŠ æ–‡ä»¶æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠæ–‡ä»¶æ”¾å…¥è¿™ä¸ª"è´­ç‰©è½¦"ï¼Œç­‰å¾…`git commit`æ—¶ä¸€èµ·"ç»“è´¦"ã€‚

```
å·¥ä½œæµç¨‹å›¾ç¤ºï¼š
å·¥ä½œç›®å½• â”€â”€git addâ”€â”€> ç´¢å¼•åŒºåŸŸ â”€â”€git commitâ”€â”€> ä»“åº“
    |                    |                      |
 æ–‡ä»¶ä¿®æ”¹              æš‚å­˜æ”¹åŠ¨               æ°¸ä¹…ä¿å­˜
```

**ğŸ“‚ ç´¢å¼•æ–‡ä»¶ä½ç½®ï¼š**
`.git/index` - è¿™å°±æ˜¯é‚£ä¸ªé‡è¦çš„"è´­ç‰©è½¦"æ–‡ä»¶

### 4.2 ç´¢å¼•æŸåçš„ç—‡çŠ¶


**ğŸš¨ å¸¸è§é”™è¯¯æç¤ºï¼š**

```bash
# ç´¢å¼•æ–‡ä»¶æŸå
error: bad index file sha1 signature
fatal: index file corrupt

# ç´¢å¼•é”å®š
fatal: Unable to create '.git/index.lock': File exists
Another git process seems to be running in this repository

# ç´¢å¼•ä¸ä¸€è‡´
error: Your local changes to the following files would be overwritten
```

### 4.3 ç´¢å¼•ä¿®å¤æ–¹æ³•


**ğŸ”§ å¿«é€Ÿä¿®å¤ç´¢å¼•ï¼š**

```bash
# æ–¹æ³•1ï¼šé‡å»ºç´¢å¼•ï¼ˆæœ€å¸¸ç”¨ï¼‰
rm .git/index
git reset HEAD

# æ–¹æ³•2ï¼šå¼ºåˆ¶è§£é”
rm .git/index.lock
git add .

# æ–¹æ³•3ï¼šä»HEADé‡å»ºï¼ˆä¸¢å¤±æš‚å­˜å†…å®¹ï¼‰
git read-tree HEAD
git checkout-index -f -a
```

**âš ï¸ æ³¨æ„äº‹é¡¹ï¼š**
- æ–¹æ³•1ä¼šä¸¢å¤±å½“å‰æš‚å­˜çš„å†…å®¹
- æ–¹æ³•2åªæ˜¯è§£é”ï¼Œä¸è§£å†³æŸåé—®é¢˜
- æ–¹æ³•3ä¼šè¦†ç›–å·¥ä½œç›®å½•çš„ä¿®æ”¹

---

## 5. ğŸ—„ï¸ å¯¹è±¡æ•°æ®åº“é—®é¢˜


### 5.1 Gitå¯¹è±¡å­˜å‚¨æœºåˆ¶


**ğŸ“¦ Gitå­˜å‚¨çš„å››ç§å¯¹è±¡ç±»å‹ï¼š**

GitæŠŠæ‰€æœ‰æ•°æ®éƒ½å½“ä½œ"å¯¹è±¡"æ¥å­˜å‚¨ï¼Œå°±åƒå›¾ä¹¦é¦†çš„åˆ†ç±»ç³»ç»Ÿï¼š

```
Gitå¯¹è±¡ç±»å‹å›¾ç¤ºï¼š
blobå¯¹è±¡    â† æ–‡ä»¶å†…å®¹ï¼ˆä¹¦çš„å†…å®¹ï¼‰
    |
treeå¯¹è±¡    â† ç›®å½•ç»“æ„ï¼ˆä¹¦æ¶å¸ƒå±€ï¼‰  
    |
commitå¯¹è±¡  â† æäº¤ä¿¡æ¯ï¼ˆå€Ÿé˜…è®°å½•ï¼‰
    |
tagå¯¹è±¡     â† æ ‡ç­¾ä¿¡æ¯ï¼ˆç‰¹æ®Šæ ‡è®°ï¼‰
```

### 5.2 å¯¹è±¡æŸåè¯Šæ–­


**ğŸ” æ£€æµ‹å¯¹è±¡å®Œæ•´æ€§ï¼š**

```bash
# å…¨é¢æ£€æŸ¥æ‰€æœ‰å¯¹è±¡
git fsck --full --strict

# æ£€æŸ¥ç‰¹å®šå¯¹è±¡
git cat-file -t å¯¹è±¡ID     # æŸ¥çœ‹å¯¹è±¡ç±»å‹
git cat-file -p å¯¹è±¡ID     # æŸ¥çœ‹å¯¹è±¡å†…å®¹

# éªŒè¯å¯¹è±¡æ ¡éªŒå’Œ
git verify-pack -v .git/objects/pack/*.idx
```

**ğŸ“Š æ£€æŸ¥ç»“æœè§£è¯»ï¼š**

```
fsckæ£€æŸ¥ç»“æœç¤ºä¾‹ï¼š
dangling commit abc123    â† æ‚¬ç©ºæäº¤ï¼ˆå¯åˆ é™¤ï¼‰
dangling blob def456      â† æ‚¬ç©ºæ–‡ä»¶ï¼ˆå¯åˆ é™¤ï¼‰
missing blob ghi789       â† ä¸¢å¤±å¯¹è±¡ï¼ˆéœ€ä¿®å¤ï¼‰
broken link jkl012        â† é“¾æ¥æŸåï¼ˆéœ€ä¿®å¤ï¼‰
```

### 5.3 å¯¹è±¡ä¿®å¤ç­–ç•¥


**ğŸ› ï¸ å¯¹è±¡æ¢å¤æ–¹æ³•ï¼š**

```bash
# ä»å…¶ä»–åˆ†æ”¯æ¢å¤å¯¹è±¡
git log --all --full-history -- æ–‡ä»¶å
git show æäº¤ID:æ–‡ä»¶å > æ¢å¤çš„æ–‡ä»¶å

# ä»reflogæ¢å¤ä¸¢å¤±çš„æäº¤
git reflog
git branch æ¢å¤åˆ†æ”¯ æäº¤ID

# é‡æ–°æ‰“åŒ…æŸåçš„å¯¹è±¡
git repack -a -d
```

---

## 6. ğŸ’¿ ç£ç›˜ç©ºé—´ä¸è¶³é”™è¯¯


### 6.1 ç©ºé—´ä¸è¶³çš„è¡¨ç°


**ğŸš¨ å…¸å‹é”™è¯¯ä¿¡æ¯ï¼š**

```bash
# å†™å…¥å¤±è´¥
fatal: write error: No space left on device
fatal: sha1 file write error: No space left on device

# åˆ›å»ºæ–‡ä»¶å¤±è´¥
fatal: cannot create directory: No space left on device
error: unable to create temporary file: No space left on device
```

### 6.2 ç©ºé—´é—®é¢˜å¿«é€Ÿè¯Šæ–­


**ğŸ“Š ç£ç›˜ä½¿ç”¨æƒ…å†µæ£€æŸ¥ï¼š**

```bash
# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# æŸ¥çœ‹å½“å‰ç›®å½•å¤§å°
du -sh *

# æ‰¾å‡ºæœ€å¤§çš„æ–‡ä»¶
find . -type f -size +100M -exec ls -lh {} \;
```

**ğŸ’¾ ç©ºé—´éœ€æ±‚è¯„ä¼°ï¼š**

| æ“ä½œç±»å‹ | é¢„ä¼°ç©ºé—´éœ€æ±‚ | è¯´æ˜ |
|---------|-------------|------|
| **æ™®é€šæäº¤** | æ–‡ä»¶å¤§å°Ã—1.5 | åŒ…å«å‹ç¼©å’Œç´¢å¼• |
| **å¤§æ–‡ä»¶æäº¤** | æ–‡ä»¶å¤§å°Ã—2-3 | å‹ç¼©æ•ˆæœæœ‰é™ |
| **åƒåœ¾å›æ”¶** | å½“å‰ä»“åº“Ã—0.5 | ä¸´æ—¶éœ€è¦é¢å¤–ç©ºé—´ |
| **å…‹éš†æ“ä½œ** | è¿œç¨‹ä»“åº“Ã—1.2 | ä¸‹è½½å’Œè§£å‹ç¼© |

### 6.3 ç©ºé—´æ¸…ç†æ–¹æ¡ˆ


**ğŸ§¹ ç´§æ€¥ç©ºé—´æ¸…ç†ï¼š**

```bash
# ç«‹å³æ¸…ç†ç³»ç»Ÿåƒåœ¾
sudo apt-get clean          # Ubuntu/Debian
sudo yum clean all          # CentOS/RHEL

# æ¸…ç†Gitä»“åº“ç©ºé—´
git gc --aggressive --prune=now
git remote prune origin

# æ¸…ç†å¤§æ–‡ä»¶ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git filter-branch --index-filter 'git rm --cached --ignore-unmatch å¤§æ–‡ä»¶è·¯å¾„'
```

---

## 7. ğŸ§  å†…å­˜ä¸è¶³æ€§èƒ½é—®é¢˜


### 7.1 å†…å­˜ä½¿ç”¨ç‰¹ç‚¹


**ğŸ’­ Gitå†…å­˜ä½¿ç”¨è§„å¾‹ï¼š**

Gitåœ¨å¤„ç†å¤§å‹ä»“åº“æ—¶ï¼Œå†…å­˜ä½¿ç”¨æœ‰æ˜æ˜¾çš„ç‰¹ç‚¹ï¼š

```
å†…å­˜ä½¿ç”¨æ¨¡å¼ï¼š
æ­£å¸¸æ“ä½œ    â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 20-30% å†…å­˜
å¤§å‹åˆå¹¶    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60-70% å†…å­˜  
åƒåœ¾å›æ”¶    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80-90% å†…å­˜
æŸåä¿®å¤    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ æ¥è¿‘100% å†…å­˜
```

### 7.2 å†…å­˜ä¸è¶³ç—‡çŠ¶


**âš ï¸ å¸¸è§å†…å­˜é—®é¢˜è¡¨ç°ï¼š**

```bash
# å†…å­˜ä¸è¶³é”™è¯¯
fatal: Out of memory, malloc failed
fatal: pack-objects died of signal 9   # è¢«ç³»ç»Ÿå¼ºåˆ¶ç»ˆæ­¢

# ç³»ç»Ÿäº¤æ¢é¢‘ç¹
fatal: The remote end hung up unexpectedly
error: RPC failed; curl transfer closed with outstanding read data
```

### 7.3 å†…å­˜ä¼˜åŒ–é…ç½®


**âš™ï¸ Gitå†…å­˜ä¼˜åŒ–è®¾ç½®ï¼š**

```bash
# è°ƒæ•´Gitå†…å­˜é…ç½®
git config core.preloadindex true
git config core.fscache true
git config gc.auto 256

# è®¾ç½®æ‰“åŒ…çª—å£å¤§å°ï¼ˆå‡å°‘å†…å­˜ä½¿ç”¨ï¼‰
git config pack.windowMemory 100m
git config pack.packSizeLimit 100m

# è°ƒæ•´å·®å¼‚ç®—æ³•ï¼ˆèŠ‚çœå†…å­˜ï¼‰
git config diff.algorithm patience
```

**ğŸ”§ åˆ†æ‰¹å¤„ç†ç­–ç•¥ï¼š**

```bash
# åˆ†æ‰¹å¤„ç†å¤§æ–‡ä»¶
git add -N .                    # å…ˆæ·»åŠ åˆ°ç´¢å¼•
git add --patch                 # åˆ†å—ç¡®è®¤æ·»åŠ 

# åˆ†æ­¥åƒåœ¾å›æ”¶  
git repack -a -d --window=50    # è¾ƒå°çš„çª—å£å¤§å°
git prune-packed                # åˆ†æ­¥æ¸…ç†
```

---

## 8. ğŸŒ ç½‘ç»œå¸¦å®½ä¼˜åŒ–


### 8.1 ç½‘ç»œé—®é¢˜è¡¨ç°


**ğŸ”Œ å¸¸è§ç½‘ç»œç›¸å…³é”™è¯¯ï¼š**

```bash
# è¿æ¥è¶…æ—¶
fatal: unable to access 'https://github.com/user/repo.git/':
Connection timed out after 300000 milliseconds

# ä¼ è¾“ä¸­æ–­
error: RPC failed; curl 56 GnuTLS recv error
fatal: The remote end hung up unexpectedly

# æ•°æ®åŒ…ä¸¢å¤±
error: RPC failed; curl 18 transfer closed with outstanding read data
```

### 8.2 ç½‘ç»œä¼˜åŒ–é…ç½®


**âš¡ ç½‘ç»œä¼ è¾“ä¼˜åŒ–ï¼š**

```bash
# å¢åŠ HTTPç¼“å†²åŒº
git config http.postBuffer 524288000   # 500MBç¼“å†²åŒº
git config http.maxRequestBuffer 100M

# å¯ç”¨ä¼ è¾“å‹ç¼©
git config core.compression 9
git config core.loosecompression 9

# è®¾ç½®è¶…æ—¶æ—¶é—´
git config http.lowSpeedLimit 1000
git config http.lowSpeedTime 300
```

### 8.3 åˆ†æ‰¹ä¼ è¾“ç­–ç•¥


**ğŸ“¦ å¤§ä»“åº“ä¼ è¾“æŠ€å·§ï¼š**

```bash
# æµ…å…‹éš†ï¼ˆåªä¸‹è½½æœ€è¿‘å†å²ï¼‰
git clone --depth 1 ä»“åº“åœ°å€

# å•åˆ†æ”¯å…‹éš†
git clone --single-branch --branch main ä»“åº“åœ°å€

# éƒ¨åˆ†å…‹éš†ï¼ˆGit 2.19+ï¼‰
git clone --filter=blob:limit=100k ä»“åº“åœ°å€
```

**ğŸ“Š ä¼ è¾“æ•ˆæœå¯¹æ¯”ï¼š**

| æ–¹æ³• | ä¸‹è½½å¤§å° | æ—¶é—´èŠ‚çœ | åŠŸèƒ½é™åˆ¶ |
|------|---------|---------|---------|
| **å®Œæ•´å…‹éš†** | 100% | æ—  | æ— é™åˆ¶ |
| **æµ…å…‹éš†** | 10-20% | 80-90% | æ— å†å²è®°å½• |
| **å•åˆ†æ”¯** | 30-50% | 50-70% | ä»…ä¸€ä¸ªåˆ†æ”¯ |
| **éƒ¨åˆ†å…‹éš†** | 40-60% | 40-60% | å¤§æ–‡ä»¶æŒ‰éœ€ä¸‹è½½ |

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 é—®é¢˜ä¼˜å…ˆçº§å¤„ç†


**ğŸ¯ æŒ‰ä¸¥é‡ç¨‹åº¦å¤„ç†ï¼š**

```
ç´§æ€¥ç¨‹åº¦æ’åºï¼š
ğŸš¨ æ•°æ®ä¸¢å¤±é£é™©    â†’ ç«‹å³å¤‡ä»½ï¼Œè°¨æ…æ“ä½œ
ğŸ”¥ æ— æ³•æ­£å¸¸å·¥ä½œ    â†’ ä¼˜å…ˆä¿®å¤ç´¢å¼•å’Œå¼•ç”¨  
âš ï¸  æ€§èƒ½å½±å“      â†’ ç©ºé—´æ¸…ç†ï¼Œé…ç½®ä¼˜åŒ–
ğŸ’¡ é¢„é˜²æ€§ç»´æŠ¤     â†’ å®šæœŸgcï¼Œç›‘æ§ç©ºé—´
```

### 9.2 é¢„é˜²æ€§ç»´æŠ¤å»ºè®®


**ğŸ“… å®šæœŸç»´æŠ¤æ¸…å•ï¼š**

- **æ¯å‘¨**ï¼š`â˜ git gc` æ¸…ç†åƒåœ¾
- **æ¯æœˆ**ï¼š`â˜ du -sh .git/` æ£€æŸ¥ä»“åº“å¤§å°
- **æ¯å­£åº¦**ï¼š`â˜ git fsck --full` å®Œæ•´æ€§æ£€æŸ¥
- **é‡è¦æ“ä½œå‰**ï¼š`â˜ å®Œæ•´å¤‡ä»½` é¡¹ç›®ç›®å½•

### 9.3 åº”æ€¥å¤„ç†æµç¨‹


**ğŸš‘ é—®é¢˜å‘ç”Ÿæ—¶çš„æ ‡å‡†æµç¨‹ï¼š**

```
åº”æ€¥å¤„ç†æ­¥éª¤ï¼š
1. åœæ­¢å½“å‰æ“ä½œ      â† é¿å…æ‰©å¤§æŸå¤±
2. å¤‡ä»½å½“å‰çŠ¶æ€      â† ä¿æŠ¤ç°æœ‰æ•°æ®  
3. è¯Šæ–­é—®é¢˜åŸå›       â† æ‰¾å‡†é—®é¢˜æ ¹æº
4. é€‰æ‹©ä¿®å¤æ–¹æ¡ˆ      â† é£é™©æœ€å°çš„æ–¹æ³•
5. æ‰§è¡Œä¿®å¤æ“ä½œ      â† å°å¿ƒè°¨æ…æ‰§è¡Œ
6. éªŒè¯ä¿®å¤ç»“æœ      â† ç¡®ä¿é—®é¢˜è§£å†³
```

### 9.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ æ—¥å¸¸ä½¿ç”¨å»ºè®®ï¼š**

- **å®šæœŸå¤‡ä»½**ï¼šé‡è¦é¡¹ç›®è¦æœ‰å¤šä¸ªå¤‡ä»½
- **åˆç†ä½¿ç”¨**ï¼šé¿å…æäº¤å¤§æ–‡ä»¶åˆ°Git
- **ç›‘æ§ç©ºé—´**ï¼šå…³æ³¨.gitç›®å½•å¤§å°å˜åŒ–
- **åŠæ—¶æ¸…ç†**ï¼šä¸è¦è®©åƒåœ¾æ–‡ä»¶å †ç§¯
- **é…ç½®ä¼˜åŒ–**ï¼šæ ¹æ®é¡¹ç›®è§„æ¨¡è°ƒæ•´Gité…ç½®

**ğŸ”§ é…ç½®æ¨èï¼š**

```bash
# æ–°æ‰‹å‹å¥½çš„Gité…ç½®
git config --global core.autocrlf true
git config --global core.safecrlf warn  
git config --global gc.auto 256
git config --global http.postBuffer 524288000
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- Gitæ€§èƒ½é—®é¢˜å¤šæºäºç©ºé—´å’Œé…ç½®
- é¢„é˜²æ¯”ä¿®å¤æ›´é‡è¦ï¼Œå®šæœŸç»´æŠ¤æ˜¯å…³é”®
- é‡åˆ°é—®é¢˜å…ˆå¤‡ä»½ï¼Œå†è¯Šæ–­ï¼Œåä¿®å¤
- ç½‘ç»œå’Œå†…å­˜ä¼˜åŒ–èƒ½æ˜¾è‘—æå‡ä½¿ç”¨ä½“éªŒ