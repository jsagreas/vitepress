---
title: 2ã€å¯æ‰§è¡ŒJARåŒ…æ„å»º
---
## ğŸ“š ç›®å½•

1. [å¯æ‰§è¡ŒJARåŒ…åŸºç¡€æ¦‚å¿µ](#1-å¯æ‰§è¡ŒjaråŒ…åŸºç¡€æ¦‚å¿µ)
2. [maven-shade-pluginæ’ä»¶è¯¦è§£](#2-maven-shade-pluginæ’ä»¶è¯¦è§£)
3. [maven-assembly-pluginæ’ä»¶è¯¦è§£](#3-maven-assembly-pluginæ’ä»¶è¯¦è§£)
4. [spring-boot-maven-pluginæ’ä»¶è¯¦è§£](#4-spring-boot-maven-pluginæ’ä»¶è¯¦è§£)
5. [Fat JARæ„å»ºåŸç†ä¸å®è·µ](#5-fat-jaræ„å»ºåŸç†ä¸å®è·µ)
6. [ä¸»ç±»é…ç½®ä¸å…¥å£è®¾ç½®](#6-ä¸»ç±»é…ç½®ä¸å…¥å£è®¾ç½®)
7. [ä¾èµ–å†…åµŒä¸å†²çªå¤„ç†](#7-ä¾èµ–å†…åµŒä¸å†²çªå¤„ç†)
8. [æ„å»ºé…ç½®æœ€ä½³å®è·µ](#8-æ„å»ºé…ç½®æœ€ä½³å®è·µ)
9. [å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#9-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å¯æ‰§è¡ŒJARåŒ…åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¯æ‰§è¡ŒJARåŒ…


**ğŸ”¸ é€šä¿—ç†è§£**
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å†™äº†ä¸€ä¸ªJavaç¨‹åºï¼Œéœ€è¦ç»™æœ‹å‹ä½¿ç”¨ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæœ‹å‹éœ€è¦ï¼š
- å®‰è£…Javaå¼€å‘ç¯å¢ƒ
- ä¸‹è½½ä½ çš„ç¨‹åºä»£ç 
- ä¸‹è½½æ‰€æœ‰ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“
- é…ç½®ç±»è·¯å¾„
- æ‰èƒ½è¿è¡Œä½ çš„ç¨‹åº

è¿™å°±åƒé€æœ‹å‹ä¸€é“èœï¼Œå´è¦æœ‹å‹è‡ªå·±å‡†å¤‡æ‰€æœ‰é£Ÿæå’Œè°ƒæ–™ä¸€æ ·éº»çƒ¦ã€‚

**å¯æ‰§è¡ŒJARåŒ…å°±åƒæ˜¯æ‰“åŒ…å¥½çš„å¤–å–**ï¼š
- æ‰€æœ‰ä¾èµ–éƒ½åŒ…å«åœ¨å†…
- æœ‹å‹åªéœ€è¦æœ‰Javaè¿è¡Œç¯å¢ƒ
- ä¸€ä¸ªå‘½ä»¤å°±èƒ½è¿è¡Œï¼š`java -jar your-app.jar`

### 1.2 æ™®é€šJAR vs å¯æ‰§è¡ŒJAR


```
æ™®é€šJARåŒ…å†…å®¹ï¼š                  å¯æ‰§è¡ŒJARåŒ…å†…å®¹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ çš„.classæ–‡ä»¶  â”‚             â”‚  ä½ çš„.classæ–‡ä»¶  â”‚
â”‚                â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  èµ„æºæ–‡ä»¶       â”‚             â”‚  èµ„æºæ–‡ä»¶       â”‚
â”‚                â”‚    VS       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  META-INF/      â”‚             â”‚  æ‰€æœ‰ä¾èµ–åº“     â”‚
â”‚    MANIFEST.MF  â”‚             â”‚  (lib1.jar)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  (lib2.jar)    â”‚
                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
è¿è¡Œæ–¹å¼ï¼š                        â”‚  META-INF/      â”‚
java -cp your-app.jar:lib1.jar:  â”‚    MANIFEST.MF  â”‚
lib2.jar:lib3.jar MainClass      â”‚  (å«ä¸»ç±»ä¿¡æ¯)   â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                è¿è¡Œæ–¹å¼ï¼š
                                java -jar your-app.jar
```

### 1.3 å¯æ‰§è¡ŒJARçš„æ ¸å¿ƒè¦ç´ 


**ğŸ“‹ ä¸‰ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†**

**ä¸»ç±»å£°æ˜ï¼ˆMain-Classï¼‰**ï¼š
- å‘Šè¯‰JVMä»å“ªä¸ªç±»å¼€å§‹æ‰§è¡Œ
- å¿…é¡»åŒ…å« `public static void main(String[] args)` æ–¹æ³•
- åœ¨MANIFEST.MFæ–‡ä»¶ä¸­å£°æ˜

**ä¾èµ–åº“å¤„ç†**ï¼š
- æŠŠæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“æ‰“åŒ…è¿›JAR
- æˆ–è€…é€šè¿‡Class-PathæŒ‡å®šå¤–éƒ¨ä¾èµ–è·¯å¾„
- è§£å†³ä¾èµ–å†²çªé—®é¢˜

**èµ„æºæ–‡ä»¶åŒ…å«**ï¼š
- é…ç½®æ–‡ä»¶ã€æ¨¡æ¿æ–‡ä»¶ç­‰
- ç¡®ä¿è¿è¡Œæ—¶èƒ½æ­£ç¡®æ‰¾åˆ°
- ä¿æŒæ­£ç¡®çš„ç›®å½•ç»“æ„

---

## 2. ğŸ”§ maven-shade-pluginæ’ä»¶è¯¦è§£


### 2.1 Shadeæ’ä»¶çš„ä½œç”¨åŸç†


**ğŸ¨ ä»€ä¹ˆæ˜¯"Shade"**
"Shade"è¿™ä¸ªè¯åŸæœ¬æ˜¯"é˜´å½±ã€é®è”½"çš„æ„æ€ï¼Œåœ¨Mavenä¸­æŒ‡çš„æ˜¯**å°†ä¾èµ–åº“"éšè—"åœ¨æœ€ç»ˆJARåŒ…å†…éƒ¨**ã€‚

å°±åƒåšæ‹¼è£…ç©å…·ï¼š
- åŸæ¥ï¼šç©å…·æœ¬ä½“ + ä¸€å †é›¶ä»¶åŒ…è£…è¢‹
- Shadeåï¼šä¸€ä¸ªå®Œæ•´çš„ç©å…·ï¼Œé›¶ä»¶éƒ½ç»„è£…å¥½äº†

**æ ¸å¿ƒå·¥ä½œè¿‡ç¨‹**ï¼š
```
ç¬¬1æ­¥ï¼šæ”¶é›†ä¾èµ–
â”œâ”€â”€ your-project.jar
â”œâ”€â”€ commons-lang3-3.12.jar  
â”œâ”€â”€ jackson-core-2.13.jar
â””â”€â”€ slf4j-api-1.7.30.jar

ç¬¬2æ­¥ï¼šè§£å‹æ‰€æœ‰JAR
â”œâ”€â”€ com/yourcompany/YourClass.class
â”œâ”€â”€ org/apache/commons/lang3/StringUtils.class
â”œâ”€â”€ com/fasterxml/jackson/core/JsonParser.class
â””â”€â”€ org/slf4j/Logger.class

ç¬¬3æ­¥ï¼šé‡æ–°æ‰“åŒ…æˆä¸€ä¸ªJAR
â””â”€â”€ your-app-shaded.jar
    â”œâ”€â”€ æ‰€æœ‰.classæ–‡ä»¶
    â”œâ”€â”€ æ‰€æœ‰èµ„æºæ–‡ä»¶
    â””â”€â”€ MANIFEST.MF (å«ä¸»ç±»ä¿¡æ¯)
```

### 2.2 åŸºç¡€é…ç½®ç¤ºä¾‹


**âš™ï¸ æœ€ç®€å•çš„Shadeé…ç½®**

åœ¨`pom.xml`ä¸­æ·»åŠ ï¼š

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>3.4.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>com.example.MainApp</mainClass>
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

**å…³é”®é…ç½®è¯´æ˜**ï¼š
- `<phase>package</phase>`ï¼šåœ¨Mavençš„packageé˜¶æ®µæ‰§è¡Œ
- `<mainClass>`ï¼šæŒ‡å®šç¨‹åºå…¥å£ç±»
- `ManifestResourceTransformer`ï¼šå¤„ç†MANIFEST.MFæ–‡ä»¶

### 2.3 é«˜çº§åŠŸèƒ½é…ç½®


**ğŸ¯ æ’é™¤ä¸éœ€è¦çš„ä¾èµ–**

æœ‰æ—¶å€™ä½ æƒ³æ’é™¤æŸäº›ä¾èµ–ï¼ˆæ¯”å¦‚åªåœ¨æµ‹è¯•æ—¶éœ€è¦çš„åº“ï¼‰ï¼š

```xml
<configuration>
    <artifactSet>
        <excludes>
            <!-- æ’é™¤JUnitæµ‹è¯•åº“ -->
            <exclude>junit:junit</exclude>
            <!-- æ’é™¤Mockitoæµ‹è¯•åº“ -->
            <exclude>org.mockito:*</exclude>
        </excludes>
    </artifactSet>
</configuration>
```

**ğŸ”„ åŒ…é‡å‘½åï¼ˆRelocationï¼‰**

è§£å†³ç±»å†²çªé—®é¢˜ï¼ŒæŠŠç¬¬ä¸‰æ–¹åº“çš„åŒ…åæ”¹æ‰ï¼š

```xml
<configuration>
    <relocations>
        <relocation>
            <!-- æŠŠorg.apache.commonsæ”¹åä¸ºcom.example.shaded.commons -->
            <pattern>org.apache.commons</pattern>
            <shadedPattern>com.example.shaded.commons</shadedPattern>
        </relocation>
    </relocations>
</configuration>
```

**ä¸ºä»€ä¹ˆéœ€è¦åŒ…é‡å‘½åï¼Ÿ**
å‡è®¾ä½ çš„é¡¹ç›®ç”¨äº†Commons Lang 3.10ï¼Œä½†ä¾èµ–çš„æŸä¸ªåº“ç”¨äº†Commons Lang 3.5ï¼Œå¯èƒ½ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ã€‚é‡å‘½ååå°±åƒç»™å®ƒä»¬èµ·äº†ä¸åŒçš„"å°å"ï¼Œé¿å…å†²çªã€‚

### 2.4 å®Œæ•´é…ç½®ç¤ºä¾‹


```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>3.4.1</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <!-- ç”Ÿæˆçš„JARæ–‡ä»¶å -->
                <finalName>my-app-with-dependencies</finalName>
                
                <!-- ä¾èµ–è¿‡æ»¤ -->
                <artifactSet>
                    <excludes>
                        <exclude>junit:junit</exclude>
                    </excludes>
                </artifactSet>
                
                <!-- æ–‡ä»¶è¿‡æ»¤ -->
                <filters>
                    <filter>
                        <artifact>*:*</artifact>
                        <excludes>
                            <!-- æ’é™¤ç­¾åæ–‡ä»¶ï¼Œé¿å…å®‰å…¨éªŒè¯é—®é¢˜ -->
                            <exclude>META-INF/*.SF</exclude>
                            <exclude>META-INF/*.DSA</exclude>
                            <exclude>META-INF/*.RSA</exclude>
                        </excludes>
                    </filter>
                </filters>
                
                <transformers>
                    <!-- ä¸»ç±»è®¾ç½® -->
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <mainClass>com.example.MainApp</mainClass>
                    </transformer>
                </transformers>
            </configuration>
        </execution>
    </executions>
</plugin>
```

---

## 3. ğŸ”¨ maven-assembly-pluginæ’ä»¶è¯¦è§£


### 3.1 Assemblyæ’ä»¶çš„ç‰¹ç‚¹


**ğŸª Assembly = è£…é…å·¥å‚**

å¦‚æœè¯´Shadeæ’ä»¶åƒæ˜¯"å‹ç¼©é¥¼å¹²"ï¼ˆæŠŠæ‰€æœ‰ä¸œè¥¿å‹åœ¨ä¸€èµ·ï¼‰ï¼Œé‚£Assemblyæ’ä»¶å°±åƒæ˜¯"å·¥å‚è£…é…çº¿"ï¼ˆæŒ‰ä½ çš„è¦æ±‚ç»„è£…äº§å“ï¼‰ã€‚

**Assemblyæ’ä»¶çš„ä¼˜åŠ¿**ï¼š
- **çµæ´»æ€§æ›´é«˜**ï¼šä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶ä»€ä¹ˆæ–‡ä»¶æ”¾åœ¨å“ªé‡Œ
- **æ”¯æŒå¤šç§æ ¼å¼**ï¼šä¸ä»…ä»…æ˜¯JARï¼Œè¿˜å¯ä»¥ç”ŸæˆZIPã€TARç­‰
- **ç›®å½•ç»“æ„å¯å®šåˆ¶**ï¼šå¯ä»¥åˆ›å»ºå¤æ‚çš„å‘å¸ƒåŒ…ç»“æ„

### 3.2 é¢„å®šä¹‰æè¿°ç¬¦ä½¿ç”¨


**ğŸ å¼€ç®±å³ç”¨çš„é…ç½®**

Assemblyæ’ä»¶æä¾›äº†å‡ ä¸ªé¢„å®šä¹‰çš„"è£…é…æ–¹æ¡ˆ"ï¼š

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>3.6.0</version>
    <configuration>
        <descriptorRefs>
            <!-- jar-with-dependencies: åŒ…å«æ‰€æœ‰ä¾èµ–çš„JAR -->
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <!-- è®¾ç½®ä¸»ç±» -->
        <archive>
            <manifest>
                <mainClass>com.example.MainApp</mainClass>
            </manifest>
        </archive>
    </configuration>
    <executions>
        <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

**å…¶ä»–é¢„å®šä¹‰æè¿°ç¬¦**ï¼š
- `jar-with-dependencies`ï¼šæ‰€æœ‰ä¾èµ–æ‰“åŒ…åœ¨ä¸€ä¸ªJARä¸­
- `bin`ï¼šç”ŸæˆåŒ…å«å¯æ‰§è¡Œæ–‡ä»¶çš„å‘å¸ƒåŒ…
- `src`ï¼šç”Ÿæˆæºç åŒ…
- `project`ï¼šç”Ÿæˆå®Œæ•´é¡¹ç›®åŒ…

### 3.3 è‡ªå®šä¹‰è£…é…æè¿°ç¬¦


**ğŸ“‹ åˆ›å»ºè‡ªå®šä¹‰è£…é…æ–¹æ¡ˆ**

åœ¨`src/assembly/`ç›®å½•ä¸‹åˆ›å»º`distribution.xml`ï¼š

```xml
<assembly xmlns="http://maven.apache.org/ASSEMBLY/2.1.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/ASSEMBLY/2.1.0 
          http://maven.apache.org/xsd/assembly-2.1.0.xsd">
          
    <id>distribution</id>
    
    <!-- è¾“å‡ºæ ¼å¼ -->
    <formats>
        <format>zip</format>
        <format>tar.gz</format>
    </formats>
    
    <!-- åŒ…å«ç›®å½•ç»“æ„ -->
    <fileSets>
        <!-- ä¸»JARæ–‡ä»¶ -->
        <fileSet>
            <directory>${project.build.directory}</directory>
            <outputDirectory>lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        
        <!-- é…ç½®æ–‡ä»¶ -->
        <fileSet>
            <directory>src/main/resources</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*.properties</include>
                <include>*.xml</include>
            </includes>
        </fileSet>
        
        <!-- å¯åŠ¨è„šæœ¬ -->
        <fileSet>
            <directory>src/assembly/scripts</directory>
            <outputDirectory>bin</outputDirectory>
            <fileMode>0755</fileMode>
        </fileSet>
    </fileSets>
    
    <!-- ä¾èµ–åº“ -->
    <dependencySets>
        <dependencySet>
            <outputDirectory>lib</outputDirectory>
        </dependencySet>
    </dependencySets>
</assembly>
```

**ç”Ÿæˆçš„ç›®å½•ç»“æ„**ï¼š
```
my-app-distribution.zip
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ my-app-1.0.jar
â”‚   â”œâ”€â”€ commons-lang3-3.12.jar
â”‚   â””â”€â”€ jackson-core-2.13.jar
â”œâ”€â”€ conf/
â”‚   â”œâ”€â”€ application.properties
â”‚   â””â”€â”€ logback.xml
â””â”€â”€ bin/
    â”œâ”€â”€ startup.sh
    â””â”€â”€ shutdown.sh
```

### 3.4 Assembly vs Shade é€‰æ‹©æŒ‡å—


| ç‰¹æ€§å¯¹æ¯” | **Assemblyæ’ä»¶** | **Shadeæ’ä»¶** |
|---------|-----------------|---------------|
| **ä½¿ç”¨éš¾åº¦** | ğŸ”¶ ä¸­ç­‰ï¼Œéœ€è¦é…ç½®æè¿°ç¬¦ | ğŸ”¹ ç®€å•ï¼Œé…ç½®å°‘ |
| **çµæ´»æ€§** | ğŸ”¶ æé«˜ï¼Œå®Œå…¨è‡ªå®šä¹‰ | ğŸ”¹ ä¸­ç­‰ï¼Œä¸»è¦æ˜¯JAR |
| **è¾“å‡ºæ ¼å¼** | ğŸ”¶ ZIP/TAR/JARç­‰å¤šç§ | ğŸ”¹ ä¸»è¦æ˜¯JAR |
| **ä¾èµ–å¤„ç†** | ğŸ”¶ å¯åˆ†ç¦»æ”¾ç½® | ğŸ”¹ åˆå¹¶åˆ°ä¸€ä¸ªJAR |
| **å¯åŠ¨è„šæœ¬** | ğŸ”¶ å¯åŒ…å«è„šæœ¬æ–‡ä»¶ | ğŸ”¹ éœ€è¦å•ç‹¬å¤„ç† |
| **æ–‡ä»¶å¤§å°** | ğŸ”¶ è¾ƒå¤§ï¼ˆåˆ†ç¦»å­˜å‚¨ï¼‰ | ğŸ”¹ è¾ƒå°ï¼ˆåˆå¹¶å­˜å‚¨ï¼‰ |

**é€‰æ‹©å»ºè®®**ï¼š
- **ç®€å•åº”ç”¨**ï¼šé€‰æ‹©Shadeæ’ä»¶
- **ä¼ä¸šçº§åˆ†å‘**ï¼šé€‰æ‹©Assemblyæ’ä»¶
- **å¾®æœåŠ¡**ï¼šé€‰æ‹©Shadeæ’ä»¶
- **æ¡Œé¢åº”ç”¨**ï¼šé€‰æ‹©Assemblyæ’ä»¶

---

## 4. ğŸš€ spring-boot-maven-pluginæ’ä»¶è¯¦è§£


### 4.1 Spring Bootæ’ä»¶çš„ç‹¬ç‰¹ä¼˜åŠ¿


**ğŸ¯ ä¸ºSpring Booté‡èº«å®šåˆ¶**

å¦‚æœä½ åœ¨å¼€å‘Spring Bootåº”ç”¨ï¼Œé‚£è¿™ä¸ªæ’ä»¶å°±æ˜¯ä¸“é—¨ä¸ºä½ æ‰“é€ çš„"é»„é‡‘å·¥å…·"ã€‚

**æ™®é€šæ’ä»¶ vs Spring Bootæ’ä»¶**ï¼š

```
ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜ï¼š
my-app.jar
â”œâ”€â”€ ä½ çš„ä¸šåŠ¡ä»£ç 
â”œâ”€â”€ Springæ¡†æ¶ç±»
â”œâ”€â”€ å…¶ä»–ä¾èµ–ç±»
â””â”€â”€ éƒ½æ··åœ¨ä¸€èµ·ï¼Œå¯åŠ¨æ…¢

Spring Bootæ–¹å¼çš„ä¼˜åŒ–ï¼š
my-app.jar
â”œâ”€â”€ BOOT-INF/classes/     â† ä½ çš„ä¸šåŠ¡ä»£ç 
â”œâ”€â”€ BOOT-INF/lib/         â† ä¾èµ–JARæ–‡ä»¶ï¼ˆä¿æŒåŸå§‹æ ¼å¼ï¼‰
â”œâ”€â”€ org/springframework/  â† Spring Bootå¯åŠ¨å™¨
â””â”€â”€ META-INF/MANIFEST.MF  â† ç‰¹æ®Šçš„å¯åŠ¨é…ç½®
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- **å¯åŠ¨æ›´å¿«**ï¼šä¾èµ–JARä¿æŒåŸå§‹æ ¼å¼ï¼Œå‡å°‘è§£å‹æ—¶é—´
- **ç±»åŠ è½½ä¼˜åŒ–**ï¼šSpring Bootå®šåˆ¶çš„ç±»åŠ è½½å™¨
- **å†…åµŒæœåŠ¡å™¨**ï¼šTomcat/Jettyç›´æ¥æ‰“åŒ…è¿›å»
- **é…ç½®ç®€å•**ï¼šå‡ ä¹é›¶é…ç½®å°±èƒ½ä½¿ç”¨

### 4.2 åŸºç¡€ä½¿ç”¨é…ç½®


**âš™ï¸ æœ€ç®€é…ç½®**

```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <version>2.7.0</version>
    <executions>
        <execution>
            <goals>
                <goal>repackage</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

**é…ç½®è¯´æ˜**ï¼š
- `repackage`ç›®æ ‡ï¼šé‡æ–°æ‰“åŒ…åŸå§‹JARï¼Œæ·»åŠ ä¾èµ–å’Œå¯åŠ¨å™¨
- æ— éœ€æŒ‡å®šä¸»ç±»ï¼šSpring Bootä¼šè‡ªåŠ¨å¯»æ‰¾`@SpringBootApplication`æ³¨è§£çš„ç±»

**æ„å»ºåçš„æ–‡ä»¶**ï¼š
- `my-app-1.0.jar`ï¼šå¯æ‰§è¡Œçš„Fat JAR
- `my-app-1.0.jar.original`ï¼šåŸå§‹çš„ç˜¦JARï¼ˆä»…åŒ…å«ä½ çš„ä»£ç ï¼‰

### 4.3 é«˜çº§é…ç½®é€‰é¡¹


**ğŸ”§ è‡ªå®šä¹‰ä¸»ç±»å’ŒJVMå‚æ•°**

```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <configuration>
        <!-- æŒ‡å®šä¸»ç±»ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰ -->
        <mainClass>com.example.Application</mainClass>
        
        <!-- æ’é™¤æŸäº›ä¾èµ– -->
        <excludes>
            <exclude>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok</artifactId>
            </exclude>
        </excludes>
        
        <!-- JVMå¯åŠ¨å‚æ•° -->
        <jvmArguments>
            -Xmx512m -Dspring.profiles.active=prod
        </jvmArguments>
    </configuration>
</plugin>
```

### 4.4 åˆ†å±‚JARæ„å»º


**ğŸ“‚ Dockerä¼˜åŒ–çš„åˆ†å±‚ç»“æ„**

Spring Boot 2.3+æ”¯æŒåˆ†å±‚JARï¼Œç‰¹åˆ«é€‚åˆDockeré•œåƒä¼˜åŒ–ï¼š

```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <configuration>
        <layers>
            <enabled>true</enabled>
        </layers>
    </configuration>
</plugin>
```

**åˆ†å±‚ç»“æ„è§£é‡Š**ï¼š
```
my-app.jar (åˆ†å±‚JAR)
â”œâ”€â”€ dependencies/     â† ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆå˜åŒ–å°‘ï¼‰
â”œâ”€â”€ spring-boot-loader/ â† Spring BootåŠ è½½å™¨ï¼ˆå‡ ä¹ä¸å˜ï¼‰
â”œâ”€â”€ snapshot-dependencies/ â† å¿«ç…§ä¾èµ–ï¼ˆå¯èƒ½å˜åŒ–ï¼‰
â””â”€â”€ application/      â† ä½ çš„åº”ç”¨ä»£ç ï¼ˆå˜åŒ–å¤šï¼‰
```

**Dockeræ„å»ºä¼˜åŠ¿**ï¼š
- ç¬¬ä¸‰æ–¹ä¾èµ–å±‚å¾ˆå°‘å˜åŒ–ï¼ŒDockerå¯ä»¥é‡ç”¨ç¼“å­˜
- åªæœ‰åº”ç”¨ä»£ç å˜åŒ–æ—¶æ‰é‡æ–°æ„å»ºå¯¹åº”å±‚
- å¤§å¤§åŠ å¿«Dockeré•œåƒæ„å»ºå’Œæ¨é€é€Ÿåº¦

### 4.5 æœ¬åœ°è¿è¡Œå’Œè°ƒè¯•


**ğŸƒ å¼€å‘é˜¶æ®µçš„ä¾¿åˆ©åŠŸèƒ½**

```bash
# ç›´æ¥è¿è¡ŒSpring Bootåº”ç”¨ï¼ˆæ— éœ€å…ˆæ‰“åŒ…ï¼‰
mvn spring-boot:run

# æŒ‡å®šé…ç½®æ–‡ä»¶
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# æŒ‡å®šJVMå‚æ•°
mvn spring-boot:run -Dspring-boot.run.jvmArguments="-Xmx256m -Xms128m"

# ä¼ é€’ç¨‹åºå‚æ•°
mvn spring-boot:run -Dspring-boot.run.arguments="--server.port=8081"
```

**è°ƒè¯•æ¨¡å¼**ï¼š
```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆç›‘å¬5005ç«¯å£ï¼‰
mvn spring-boot:run -Dspring-boot.run.jvmArguments="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"
```

---

## 5. ğŸ’ª Fat JARæ„å»ºåŸç†ä¸å®è·µ


### 5.1 ä»€ä¹ˆæ˜¯Fat JAR


**ğŸ­ Fat JARçš„æ¯”å–»**

æƒ³è±¡ä½ è¦å‡ºé—¨æ—…è¡Œï¼š

**ç˜¦JARï¼ˆThin JARï¼‰**å°±åƒåªå¸¦äº†ä¸€ä¸ªç©ºè¡Œæç®±ï¼š
- è¡Œæç®±é‡Œåªæœ‰ä½ çš„ä¸ªäººç‰©å“
- åˆ°äº†ç›®çš„åœ°è¿˜éœ€è¦ä¹°æ´—æ¼±ç”¨å“ã€æ¢æ´—è¡£ç‰©ç­‰
- éº»çƒ¦ï¼Œä½†è¡Œæç®±å¾ˆè½»

**èƒ–JARï¼ˆFat JARï¼‰**å°±åƒå¸¦äº†ä¸€ä¸ªè£…æ»¡æ‰€æœ‰ç”¨å“çš„è¡Œæç®±ï¼š
- æ´—æ¼±ç”¨å“ã€è¡£ç‰©ã€è¯å“ã€å……ç”µå™¨...å…¨éƒ½å¸¦ä¸Š
- åˆ°äº†ç›®çš„åœ°ç«‹åˆ»å°±èƒ½ç”¨
- æ–¹ä¾¿ï¼Œä½†è¡Œæç®±å¾ˆé‡

### 5.2 Fat JARæ„å»ºç­–ç•¥å¯¹æ¯”


**ğŸ“Š ä¸åŒæ’ä»¶çš„Fat JARæ„å»ºæ–¹å¼**

| æ„å»ºæ–¹å¼ | **Shade Plugin** | **Assembly Plugin** | **Spring Boot Plugin** |
|---------|------------------|-------------------|----------------------|
| **ä¾èµ–å¤„ç†** | è§£å‹åé‡æ–°æ‰“åŒ… | è§£å‹åé‡æ–°æ‰“åŒ… | ä¿æŒJARæ ¼å¼åµŒå¥— |
| **æ–‡ä»¶ç»“æ„** | æ‰å¹³åŒ–.classæ–‡ä»¶ | æ‰å¹³åŒ–.classæ–‡ä»¶ | åˆ†å±‚ç›®å½•ç»“æ„ |
| **å¯åŠ¨é€Ÿåº¦** | ğŸ”¹ ä¸­ç­‰ | ğŸ”¹ ä¸­ç­‰ | ğŸ”¶ è¾ƒå¿« |
| **æ–‡ä»¶å¤§å°** | ğŸ”¹ è¾ƒå° | ğŸ”¹ è¾ƒå° | ğŸ”¶ ç¨å¤§ |
| **å…¼å®¹æ€§** | ğŸ”¶ å¯èƒ½æœ‰å†²çª | ğŸ”¶ å¯èƒ½æœ‰å†²çª | ğŸ”¹ ä¸“é—¨ä¼˜åŒ– |

### 5.3 Fat JARå†…éƒ¨ç»“æ„åˆ†æ


**ğŸ” Shadeæ–¹å¼çš„ç»“æ„**

```
my-app-shaded.jar
â”œâ”€â”€ com/
â”‚   â”œâ”€â”€ example/
â”‚   â”‚   â””â”€â”€ MainApp.class          â† ä½ çš„ä¸»ç±»
â”‚   â””â”€â”€ fasterxml/                 â† Jacksonåº“çš„ç±»
â”‚       â””â”€â”€ jackson/...
â”œâ”€â”€ org/
â”‚   â”œâ”€â”€ apache/commons/...         â† Commonsåº“çš„ç±»
â”‚   â””â”€â”€ springframework/...        â† Springæ¡†æ¶çš„ç±»
â”œâ”€â”€ META-INF/
â”‚   â”œâ”€â”€ MANIFEST.MF               â† åŒ…å«Main-Classå£°æ˜
â”‚   â””â”€â”€ maven/...
â””â”€â”€ å„ç§é…ç½®æ–‡ä»¶å’Œèµ„æº
```

**ğŸ” Spring Bootæ–¹å¼çš„ç»“æ„**

```
my-app-boot.jar
â”œâ”€â”€ BOOT-INF/
â”‚   â”œâ”€â”€ classes/                   â† ä½ çš„.classæ–‡ä»¶å’Œèµ„æº
â”‚   â”‚   â”œâ”€â”€ com/example/MainApp.class
â”‚   â”‚   â””â”€â”€ application.properties
â”‚   â””â”€â”€ lib/                       â† ä¾èµ–JARæ–‡ä»¶ï¼ˆå®Œæ•´ä¿å­˜ï¼‰
â”‚       â”œâ”€â”€ spring-boot-2.7.0.jar
â”‚       â”œâ”€â”€ jackson-core-2.13.jar
â”‚       â””â”€â”€ commons-lang3-3.12.jar
â”œâ”€â”€ org/springframework/boot/loader/ â† Spring Bootå¯åŠ¨å™¨
â”‚   â”œâ”€â”€ JarLauncher.class
â”‚   â””â”€â”€ LaunchedURLClassLoader.class
â””â”€â”€ META-INF/
    â””â”€â”€ MANIFEST.MF                â† Main-ClassæŒ‡å‘JarLauncher
```

### 5.4 é€‰æ‹©åˆé€‚çš„Fat JARæ–¹æ¡ˆ


**ğŸ¯ å†³ç­–æ ‘æŒ‡å—**

```
ä½ åœ¨å¼€å‘ä»€ä¹ˆåº”ç”¨ï¼Ÿ
â”œâ”€ Spring Bootåº”ç”¨
â”‚  â””â”€ é€‰æ‹©ï¼šspring-boot-maven-plugin âœ…
â”œâ”€ ç®€å•çš„å‘½ä»¤è¡Œå·¥å…·
â”‚  â””â”€ é€‰æ‹©ï¼šmaven-shade-plugin âœ…
â”œâ”€ éœ€è¦å¤æ‚çš„å‘å¸ƒåŒ…ï¼ˆå«è„šæœ¬ã€é…ç½®ç­‰ï¼‰
â”‚  â””â”€ é€‰æ‹©ï¼šmaven-assembly-plugin âœ…
â””â”€ ä¼ä¸šçº§åº”ç”¨ï¼ˆéœ€è¦çµæ´»çš„ç›®å½•ç»“æ„ï¼‰
   â””â”€ é€‰æ‹©ï¼šmaven-assembly-plugin âœ…
```

**å®é™…é¡¹ç›®ç»éªŒåˆ†äº«**ï¼š
- **å¾®æœåŠ¡é¡¹ç›®**ï¼š99%ä½¿ç”¨Spring Bootæ’ä»¶
- **å·¥å…·ç±»é¡¹ç›®**ï¼šShadeæ’ä»¶ï¼Œç®€å•ç›´æ¥
- **æ¡Œé¢åº”ç”¨**ï¼šAssemblyæ’ä»¶ï¼Œå¯ä»¥åŒ…å«å¯åŠ¨è„šæœ¬
- **æ‰¹å¤„ç†ä½œä¸š**ï¼šShadeæ’ä»¶ï¼Œéƒ¨ç½²ç®€å•

---

## 6. ğŸª ä¸»ç±»é…ç½®ä¸å…¥å£è®¾ç½®


### 6.1 ä¸»ç±»çš„ä½œç”¨æœºåˆ¶


**ğŸšª ç¨‹åºçš„"å¤§é—¨"**

ä¸»ç±»å°±åƒæ˜¯ä½ å®¶çš„å¤§é—¨ï¼ŒJVMéœ€è¦çŸ¥é“ä»å“ªé‡Œ"è¿›å…¥"ä½ çš„ç¨‹åºã€‚

**æ ‡å‡†ä¸»ç±»è¦æ±‚**ï¼š
```java
public class MainApp {
    // å¿…é¡»æ˜¯public static void main
    // å‚æ•°å¿…é¡»æ˜¯String[]æˆ–String...  
    public static void main(String[] args) {
        System.out.println("ç¨‹åºå¼€å§‹è¿è¡Œ...");
        // ä½ çš„ç¨‹åºé€»è¾‘
    }
}
```

**MANIFEST.MFæ–‡ä»¶ä¸­çš„å£°æ˜**ï¼š
```
Manifest-Version: 1.0
Main-Class: com.example.MainApp
```

å½“ä½ è¿è¡Œ`java -jar app.jar`æ—¶ï¼š
1. JVMè¯»å–JARä¸­çš„MANIFEST.MFæ–‡ä»¶
2. æ‰¾åˆ°Main-Classå£°æ˜çš„ç±»
3. è°ƒç”¨è¯¥ç±»çš„mainæ–¹æ³•
4. ç¨‹åºå¼€å§‹æ‰§è¡Œ

### 6.2 ä¸åŒæ’ä»¶çš„ä¸»ç±»é…ç½®


**âš™ï¸ Maven Shade Plugin**

```xml
<transformers>
    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
        <mainClass>com.example.MainApp</mainClass>
    </transformer>
</transformers>
```

**âš™ï¸ Maven Assembly Plugin**

```xml
<configuration>
    <archive>
        <manifest>
            <mainClass>com.example.MainApp</mainClass>
        </manifest>
    </archive>
</configuration>
```

**âš™ï¸ Spring Boot Plugin**

```java
// æ–¹å¼1ï¼šä½¿ç”¨@SpringBootApplicationæ³¨è§£ï¼ˆæ¨èï¼‰
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}

// æ–¹å¼2ï¼šåœ¨æ’ä»¶ä¸­æ˜¾å¼æŒ‡å®š
```

```xml
<configuration>
    <mainClass>com.example.Application</mainClass>
</configuration>
```

### 6.3 å¤šä¸»ç±»é¡¹ç›®å¤„ç†


**ğŸ­ ä¸€ä¸ªé¡¹ç›®ï¼Œå¤šä¸ªå…¥å£**

æœ‰æ—¶å€™ä¸€ä¸ªé¡¹ç›®éœ€è¦å¤šä¸ªå¯æ‰§è¡Œå…¥å£ï¼Œæ¯”å¦‚ï¼š
- ä¸»æœåŠ¡ç¨‹åº
- æ•°æ®è¿ç§»å·¥å…·
- é…ç½®æ£€æŸ¥å·¥å…·

**è§£å†³æ–¹æ¡ˆ1ï¼šå¤šä¸ªå¯æ‰§è¡ŒJAR**

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <executions>
        <!-- ä¸»æœåŠ¡JAR -->
        <execution>
            <id>main-service</id>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <finalName>my-app-service</finalName>
                <transformers>
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <mainClass>com.example.ServiceMain</mainClass>
                    </transformer>
                </transformers>
            </configuration>
        </execution>
        
        <!-- å·¥å…·JAR -->
        <execution>
            <id>tools</id>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <finalName>my-app-tools</finalName>
                <transformers>
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <mainClass>com.example.ToolsMain</mainClass>
                    </transformer>
                </transformers>
            </configuration>
        </execution>
    </executions>
</plugin>
```

**è§£å†³æ–¹æ¡ˆ2ï¼šå‘½ä»¤è¡Œå‚æ•°é€‰æ‹©**

```java
public class UniversalMain {
    public static void main(String[] args) {
        if (args.length == 0) {
            showUsage();
            return;
        }
        
        String command = args[0];
        String[] subArgs = Arrays.copyOfRange(args, 1, args.length);
        
        switch (command) {
            case "server":
                ServerMain.main(subArgs);
                break;
            case "migrate":
                MigrationTool.main(subArgs);
                break;
            case "check":
                ConfigChecker.main(subArgs);
                break;
            default:
                System.err.println("æœªçŸ¥å‘½ä»¤: " + command);
                showUsage();
        }
    }
    
    private static void showUsage() {
        System.out.println("ç”¨æ³•ï¼š");
        System.out.println("  java -jar app.jar server   # å¯åŠ¨æœåŠ¡");
        System.out.println("  java -jar app.jar migrate  # æ•°æ®è¿ç§»");
        System.out.println("  java -jar app.jar check    # é…ç½®æ£€æŸ¥");
    }
}
```

### 6.4 ä¸»ç±»æŸ¥æ‰¾çš„è‡ªåŠ¨åŒ–


**ğŸ” è®©Mavenè‡ªåŠ¨æ‰¾åˆ°ä¸»ç±»**

æœ‰äº›æ’ä»¶å¯ä»¥è‡ªåŠ¨å‘ç°ä¸»ç±»ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼š

```xml
<!-- è‡ªåŠ¨æ£€æµ‹ä¸»ç±» -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <!-- è‡ªåŠ¨æ£€æµ‹ä¸»ç±» -->
                <mainClass>${start-class}</mainClass>
            </manifest>
        </archive>
    </configuration>
</plugin>
```

**Spring Bootçš„æ™ºèƒ½æ£€æµ‹**ï¼š
Spring Bootæ’ä»¶ä¼šè‡ªåŠ¨æœç´¢åŒ…å«ä»¥ä¸‹ç‰¹å¾çš„ç±»ä½œä¸ºä¸»ç±»ï¼š
- æœ‰`public static void main(String[] args)`æ–¹æ³•
- æœ‰`@SpringBootApplication`æ³¨è§£
- æˆ–è€…æœ‰`@EnableAutoConfiguration`æ³¨è§£

---

## 7. ğŸ“¦ ä¾èµ–å†…åµŒä¸å†²çªå¤„ç†


### 7.1 ä¾èµ–å†²çªçš„æ ¹æº


**ğŸ”¥ ç‰ˆæœ¬åœ°ç‹±é—®é¢˜**

æƒ³è±¡ä½ åœ¨ç»„ç»‡ä¸€ä¸ªèšä¼šï¼Œé‚€è¯·äº†å¾ˆå¤šæœ‹å‹ï¼š
- å¼ ä¸‰å–œæ¬¢å¬æµè¡ŒéŸ³ä¹
- æå››å–œæ¬¢å¬å¤å…¸éŸ³ä¹
- ç‹äº”å–œæ¬¢å¬æ‘‡æ»šéŸ³ä¹

å¦‚æœåªæœ‰ä¸€ä¸ªéŸ³å“ç³»ç»Ÿï¼Œå°±ä¼šäº§ç”Ÿ"éŸ³ä¹å†²çª"ã€‚

åœ¨Javaé¡¹ç›®ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼š
```
ä½ çš„é¡¹ç›®ä¾èµ–ï¼š
â”œâ”€â”€ Library A v2.0 â†’ ä¾èµ– Commons Lang v3.10
â””â”€â”€ Library B v1.5 â†’ ä¾èµ– Commons Lang v2.6

é—®é¢˜ï¼šä¸¤ä¸ªç‰ˆæœ¬çš„Commons Langæœ‰ä¸å…¼å®¹çš„API
ç»“æœï¼šè¿è¡Œæ—¶NoSuchMethodErroræˆ–ClassCastException
```

### 7.2 Mavenä¾èµ–è§£ææœºåˆ¶


**ğŸ¯ Mavençš„é€‰æ‹©ç­–ç•¥**

Mavenä½¿ç”¨**"æœ€è¿‘è€…ä¼˜å…ˆ"**åŸåˆ™ï¼š

```
ä¾èµ–æ ‘ç¤ºä¾‹ï¼š
my-project
â”œâ”€â”€ library-a:1.0
â”‚   â””â”€â”€ commons-lang:3.10    â† è·ç¦»æ ¹ç›®å½•2å±‚
â””â”€â”€ commons-lang:2.6         â† è·ç¦»æ ¹ç›®å½•1å±‚ï¼ˆèƒœå‡ºï¼‰

æœ€ç»ˆé€‰æ‹©ï¼šcommons-lang:2.6
```

**æŸ¥çœ‹ä¾èµ–æ ‘çš„å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹å®Œæ•´ä¾èµ–æ ‘
mvn dependency:tree

# æŸ¥çœ‹å†²çªä¿¡æ¯
mvn dependency:tree -Dverbose

# åˆ†æç‰¹å®šä¾èµ–
mvn dependency:tree -Dincludes=commons-lang:commons-lang
```

### 7.3 Shadeæ’ä»¶çš„ä¾èµ–å¤„ç†


**ğŸ¨ åŒ…é‡å‘½åè§£å†³å†²çª**

Shadeæ’ä»¶çš„æ€æ‰‹é”åŠŸèƒ½ï¼šç»™å†²çªçš„åŒ…"æ”¹å"

```xml
<relocations>
    <relocation>
        <!-- æŠŠä¸€ä¸ªç‰ˆæœ¬çš„åŒ…åæ”¹æ‰ -->
        <pattern>org.apache.commons.lang3</pattern>
        <shadedPattern>shaded.org.apache.commons.lang3</shadedPattern>
    </relocation>
</relocations>
```

**é‡å‘½åå‰åå¯¹æ¯”**ï¼š
```
é‡å‘½åå‰ï¼š
â”œâ”€â”€ org.apache.commons.lang3.StringUtils (v3.10)
â””â”€â”€ org.apache.commons.lang3.StringUtils (v2.6) â† å†²çªï¼

é‡å‘½ååï¼š
â”œâ”€â”€ shaded.org.apache.commons.lang3.StringUtils (v3.10)
â””â”€â”€ org.apache.commons.lang3.StringUtils (v2.6)    â† å’Œè°å…±å­˜
```

**ä¾èµ–æ’é™¤é…ç½®**ï¼š
```xml
<artifactSet>
    <excludes>
        <!-- å®Œå…¨æ’é™¤æŸäº›ä¾èµ– -->
        <exclude>junit:junit</exclude>
        <exclude>org.mockito:*</exclude>
    </excludes>
</artifactSet>

<filters>
    <filter>
        <artifact>commons-logging:commons-logging</artifact>
        <excludes>
            <!-- æ’é™¤ç‰¹å®šç±»æ–‡ä»¶ -->
            <exclude>org/apache/commons/logging/impl/LogKit*</exclude>
        </excludes>
    </filter>
</filters>
```

### 7.4 Spring Bootçš„ä¾èµ–ç®¡ç†


**ğŸš€ Spring Bootçš„ä¼˜é›…è§£å†³æ–¹æ¡ˆ**

Spring Booté€šè¿‡**åˆ†å±‚åŠ è½½**é¿å…äº†å¾ˆå¤šå†²çªé—®é¢˜ï¼š

```
ç±»åŠ è½½é¡ºåºï¼š
1. BOOT-INF/classes/     â† ä½ çš„åº”ç”¨ç±»ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. BOOT-INF/lib/         â† ä¾èµ–åº“ï¼ˆä¿æŒéš”ç¦»ï¼‰
3. ç³»ç»Ÿç±»è·¯å¾„             â† JDKæ ¸å¿ƒç±»
```

**è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†**ï¼š
```xml
<!-- Spring Bootä¼šè‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬ï¼Œé¿å…å†²çª -->
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.7.0</version>
</parent>

<dependencies>
    <!-- æ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œè‡ªåŠ¨é€‰æ‹©å…¼å®¹ç‰ˆæœ¬ -->
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
    </dependency>
</dependencies>
```

### 7.5 å†²çªè¯Šæ–­å’Œè§£å†³æµç¨‹


**ğŸ” é—®é¢˜è¯Šæ–­æ­¥éª¤**

**æ­¥éª¤1ï¼šå‘ç°é—®é¢˜**
```bash
# è¿è¡Œæ—¶å‡ºç°ç±»ä¼¼é”™è¯¯ï¼š
java.lang.NoSuchMethodError: org.apache.commons.lang3.StringUtils.isBlank(Ljava/lang/String;)Z
```

**æ­¥éª¤2ï¼šåˆ†æä¾èµ–æ ‘**
```bash
mvn dependency:tree -Dverbose | grep commons-lang
```

**æ­¥éª¤3ï¼šè§£å†³æ–¹æ¡ˆé€‰æ‹©**

```
æƒ…å†µ1ï¼šç‰ˆæœ¬å†²çª
è§£å†³ï¼šä½¿ç”¨<exclusions>æ’é™¤ä½ç‰ˆæœ¬ï¼Œæˆ–ä½¿ç”¨shadeé‡å‘½å

æƒ…å†µ2ï¼šä¼ é€’ä¾èµ–é—®é¢˜  
è§£å†³ï¼šæ˜¾å¼å£°æ˜éœ€è¦çš„ç‰ˆæœ¬

æƒ…å†µ3ï¼šåŒ…å†²çª
è§£å†³ï¼šä½¿ç”¨shadeæ’ä»¶é‡å‘½ååŒ…
```

**å®é™…è§£å†³ç¤ºä¾‹**ï¼š
```xml
<!-- æ–¹æ¡ˆ1ï¼šæ’é™¤å†²çªä¾èµ– -->
<dependency>
    <groupId>some.library</groupId>
    <artifactId>library-with-old-commons</artifactId>
    <version>1.0</version>
    <exclusions>
        <exclusion>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<!-- æ–¹æ¡ˆ2ï¼šæ˜¾å¼å£°æ˜æ–°ç‰ˆæœ¬ -->
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.12.0</version>
</dependency>
```

---

## 8. ğŸ† æ„å»ºé…ç½®æœ€ä½³å®è·µ


### 8.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


**âš¡ æ„å»ºé€Ÿåº¦ä¼˜åŒ–**

**å¹¶è¡Œæ„å»º**ï¼š
```bash
# ä½¿ç”¨å¤šçº¿ç¨‹æ„å»ºï¼ˆæ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´ï¼‰
mvn clean package -T 4

# æˆ–è€…è‡ªåŠ¨æ£€æµ‹CPUæ ¸å¿ƒæ•°
mvn clean package -T 1C
```

**å¢é‡ç¼–è¯‘é…ç½®**ï¼š
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <!-- å¯ç”¨å¢é‡ç¼–è¯‘ -->
        <useIncrementalCompilation>true</useIncrementalCompilation>
    </configuration>
</plugin>
```

**è·³è¿‡ä¸å¿…è¦çš„é˜¶æ®µ**ï¼š
```bash
# è·³è¿‡æµ‹è¯•ï¼ˆä»…åœ¨ç¡®ä¿å®‰å…¨æ—¶ä½¿ç”¨ï¼‰
mvn clean package -DskipTests

# è·³è¿‡JavaDocç”Ÿæˆ
mvn clean package -Dmaven.javadoc.skip=true
```

### 8.2 æ–‡ä»¶å¤§å°ä¼˜åŒ–


**ğŸ—œï¸ å‡å°JARåŒ…ä½“ç§¯**

**ç§»é™¤è°ƒè¯•ä¿¡æ¯**ï¼š
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <configuration>
        <filters>
            <filter>
                <artifact>*:*</artifact>
                <excludes>
                    <!-- ç§»é™¤è°ƒè¯•ä¿¡æ¯ -->
                    <exclude>**/*.java</exclude>
                    <exclude>**/*Test.class</exclude>
                    <!-- ç§»é™¤ç­¾åæ–‡ä»¶ -->
                    <exclude>META-INF/*.SF</exclude>
                    <exclude>META-INF/*.DSA</exclude>
                    <exclude>META-INF/*.RSA</exclude>
                </excludes>
            </filter>
        </filters>
        
        <!-- æœ€å°åŒ–JAR -->
        <minimizeJar>true</minimizeJar>
    </configuration>
</plugin>
```

**ProGuardé›†æˆ**ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰ï¼š
```xml
<plugin>
    <groupId>com.github.wvengen</groupId>
    <artifactId>proguard-maven-plugin</artifactId>
    <version>2.6.0</version>
    <configuration>
        <obfuscate>true</obfuscate>
        <options>
            <option>-keep public class * { public static void main(java.lang.String[]); }</option>
        </options>
    </configuration>
</plugin>
```

### 8.3 å¤šç¯å¢ƒé…ç½®


**ğŸŒ ç¯å¢ƒæ„ŸçŸ¥çš„æ„å»º**

**Maven Profileé…ç½®**ï¼š
```xml
<profiles>
    <!-- å¼€å‘ç¯å¢ƒ -->
    <profile>
        <id>dev</id>
        <properties>
            <build.profile.id>dev</build.profile.id>
            <skip.integration.tests>true</skip.integration.tests>
        </properties>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
    </profile>
    
    <!-- ç”Ÿäº§ç¯å¢ƒ -->
    <profile>
        <id>prod</id>
        <properties>
            <build.profile.id>prod</build.profile.id>
            <skip.integration.tests>false</skip.integration.tests>
        </properties>
        
        <build>
            <plugins>
                <!-- ç”Ÿäº§ç¯å¢ƒé¢å¤–çš„ä¼˜åŒ– -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-shade-plugin</artifactId>
                    <configuration>
                        <minimizeJar>true</minimizeJar>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles>
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# å¼€å‘ç¯å¢ƒæ„å»º
mvn clean package

# ç”Ÿäº§ç¯å¢ƒæ„å»º
mvn clean package -Pprod
```

### 8.4 CI/CDé›†æˆé…ç½®


**ğŸ”„ æŒç»­é›†æˆä¼˜åŒ–**

**GitHub Actionsç¤ºä¾‹**ï¼š
```yaml
name: Build and Package
on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up JDK 11
      uses: actions/setup-java@v3
      with:
        java-version: '11'
        distribution: 'temurin'
        
    # Mavenä¾èµ–ç¼“å­˜
    - name: Cache Maven dependencies
      uses: actions/cache@v3
      with:
        path: ~/.m2/repository
        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
        
    - name: Build with Maven
      run: mvn clean package -B -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=WARN
      
    - name: Upload artifacts
      uses: actions/upload-artifact@v3
      with:
        name: jar-artifacts
        path: target/*.jar
```

**Dockerå¤šé˜¶æ®µæ„å»º**ï¼š
```dockerfile
# æ„å»ºé˜¶æ®µ
FROM maven:3.8-openjdk-11 AS build
COPY pom.xml .
COPY src ./src
RUN mvn clean package -DskipTests

# è¿è¡Œé˜¶æ®µ
FROM openjdk:11-jre-slim
COPY --from=build target/my-app-*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

### 8.5 é…ç½®ç®¡ç†æœ€ä½³å®è·µ


**ğŸ“‹ æ ‡å‡†åŒ–çš„pom.xmlç»“æ„**

```xml
<project>
    <modelVersion>4.0.0</modelVersion>
    
    <!-- é¡¹ç›®åŸºæœ¬ä¿¡æ¯ -->
    <groupId>com.example</groupId>
    <artifactId>my-application</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>
    
    <!-- å±æ€§å®šä¹‰ -->
    <properties>
        <maven.compiler.source>11</maven.compiler.source>
        <maven.compiler.target>11</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        
        <!-- æ’ä»¶ç‰ˆæœ¬ç»Ÿä¸€ç®¡ç† -->
        <maven-shade-plugin.version>3.4.1</maven-shade-plugin.version>
        <maven-assembly-plugin.version>3.6.0</maven-assembly-plugin.version>
    </properties>
    
    <!-- æ’ä»¶ç®¡ç† -->
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-shade-plugin</artifactId>
                    <version>${maven-shade-plugin.version}</version>
                </plugin>
            </plugins>
        </pluginManagement>
        
        <!-- å®é™…ä½¿ç”¨çš„æ’ä»¶ -->
        <plugins>
            <!-- å…·ä½“é…ç½® -->
        </plugins>
    </build>
</project>
```

---

## 9. ğŸ”§ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


### 9.1 "No main manifest attribute"é”™è¯¯


**âŒ é”™è¯¯ç°è±¡**
```bash
$ java -jar my-app.jar
no main manifest attribute, in my-app.jar
```

**ğŸ” é—®é¢˜åŸå› **
JARåŒ…ä¸­çš„MANIFEST.MFæ–‡ä»¶ç¼ºå°‘Main-Classå£°æ˜ã€‚

**âœ… è§£å†³æ–¹æ¡ˆ**

**æ£€æŸ¥MANIFEST.MFæ–‡ä»¶**ï¼š
```bash
# è§£å‹JARæŸ¥çœ‹MANIFEST.MF
jar -tf my-app.jar | grep MANIFEST
jar -xf my-app.jar META-INF/MANIFEST.MF
cat META-INF/MANIFEST.MF
```

æ­£ç¡®çš„MANIFEST.MFåº”è¯¥åŒ…å«ï¼š
```
Manifest-Version: 1.0
Main-Class: com.example.MainApp
```

**æ’ä»¶é…ç½®ä¿®å¤**ï¼š
```xml
<!-- Maven Jar Plugin -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <mainClass>com.example.MainApp</mainClass>
            </manifest>
        </archive>
    </configuration>
</plugin>
```

### 9.2 "ClassNotFoundException"é”™è¯¯


**âŒ é”™è¯¯ç°è±¡**
```bash
Exception in thread "main" java.lang.ClassNotFoundException: org.apache.commons.lang3.StringUtils
```

**ğŸ” é—®é¢˜åŸå› **
ä¾èµ–åº“æ²¡æœ‰åŒ…å«åœ¨å¯æ‰§è¡ŒJARä¸­ã€‚

**âœ… è§£å†³æ–¹æ¡ˆ**

**ç¡®è®¤æ˜¯å¦ä¸ºå¯æ‰§è¡ŒJAR**ï¼š
```bash
# æ£€æŸ¥JARå†…å®¹
jar -tf my-app.jar | head -20

# åº”è¯¥çœ‹åˆ°ä¾èµ–åº“çš„.classæ–‡ä»¶æˆ–libç›®å½•
```

**ä½¿ç”¨æ­£ç¡®çš„æ’ä»¶**ï¼š
```xml
<!-- ç¡®ä¿ä½¿ç”¨äº†shadeæˆ–assemblyæ’ä»¶ -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

### 9.3 Spring Bootå¯åŠ¨å¤±è´¥


**âŒ é”™è¯¯ç°è±¡**
```bash
Error: Could not find or load main class org.springframework.boot.loader.JarLauncher
```

**ğŸ” é—®é¢˜åŸå› **
ä½¿ç”¨äº†é”™è¯¯çš„æ’ä»¶æ„å»ºSpring Bootåº”ç”¨ã€‚

**âœ… è§£å†³æ–¹æ¡ˆ**

**æ£€æŸ¥æ’ä»¶é…ç½®**ï¼š
```xml
<!-- å¿…é¡»ä½¿ç”¨Spring Bootæ’ä»¶ -->
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <executions>
        <execution>
            <goals>
                <goal>repackage</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

**æ£€æŸ¥Spring Bootä¾èµ–**ï¼š
```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.7.0</version>
</parent>
```

### 9.4 ä¾èµ–ç‰ˆæœ¬å†²çª


**âŒ é”™è¯¯ç°è±¡**
```bash
java.lang.NoSuchMethodError: org.apache.commons.lang3.StringUtils.isBlank
```

**ğŸ” è¯Šæ–­æ­¥éª¤**

```bash
# æŸ¥çœ‹ä¾èµ–æ ‘
mvn dependency:tree -Dverbose | grep commons-lang

# æŸ¥çœ‹å…·ä½“å†²çª
mvn dependency:analyze-duplicate
```

**âœ… è§£å†³æ–¹æ¡ˆ**

**æ–¹æ¡ˆ1ï¼šæ’é™¤å†²çªä¾èµ–**
```xml
<dependency>
    <groupId>some.library</groupId>
    <artifactId>problematic-lib</artifactId>
    <exclusions>
        <exclusion>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
        </exclusion>
    </exclusions>
</dependency>
```

**æ–¹æ¡ˆ2ï¼šä½¿ç”¨Shadeé‡å‘½å**
```xml
<relocations>
    <relocation>
        <pattern>org.apache.commons.lang3</pattern>
        <shadedPattern>shaded.commons.lang3</shadedPattern>
    </relocation>
</relocations>
```

### 9.5 å†…å­˜ä¸è¶³é—®é¢˜


**âŒ é”™è¯¯ç°è±¡**
```bash
java.lang.OutOfMemoryError: Java heap space
```

**ğŸ” é—®é¢˜åˆ†æ**
Fat JARåŒ…å«äº†æ‰€æœ‰ä¾èµ–ï¼Œå¯èƒ½å¢åŠ å†…å­˜ä½¿ç”¨ã€‚

**âœ… ä¼˜åŒ–æ–¹æ¡ˆ**

**æ„å»ºæ—¶ä¼˜åŒ–**ï¼š
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <configuration>
        <!-- å¯ç”¨æœ€å°åŒ– -->
        <minimizeJar>true</minimizeJar>
        
        <filters>
            <filter>
                <artifact>*:*</artifact>
                <excludes>
                    <!-- æ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶ -->
                    <exclude>**/*Test.class</exclude>
                    <exclude>**/test-*.xml</exclude>
                </excludes>
            </filter>
        </filters>
    </configuration>
</plugin>
```

**è¿è¡Œæ—¶ä¼˜åŒ–**ï¼š
```bash
# è°ƒæ•´JVMå‚æ•°
java -Xmx512m -Xms256m -jar my-app.jar

# Spring Bootåº”ç”¨
java -jar my-app.jar --server.tomcat.max-threads=50
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ å¯æ‰§è¡ŒJARï¼šåŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œå¯ç›´æ¥è¿è¡Œçš„JARåŒ…
ğŸ”¸ Fat JARï¼šåŒå¯æ‰§è¡ŒJARï¼Œå¼ºè°ƒåŒ…å«æ‰€æœ‰ä¾èµ–çš„"åšé‡"ç‰¹ç‚¹
ğŸ”¸ ä¸»ç±»é…ç½®ï¼šæŒ‡å®šç¨‹åºå…¥å£ç‚¹ï¼Œå¿…é¡»æœ‰mainæ–¹æ³•
ğŸ”¸ ä¾èµ–å†…åµŒï¼šå°†ç¬¬ä¸‰æ–¹åº“åŒ…å«åˆ°æœ€ç»ˆJARä¸­
ğŸ”¸ æ’ä»¶é€‰æ‹©ï¼šæ ¹æ®é¡¹ç›®ç±»å‹é€‰æ‹©åˆé€‚çš„æ„å»ºæ’ä»¶
```

### 10.2 ä¸‰å¤§æ’ä»¶ç‰¹ç‚¹å¯¹æ¯”


| ç‰¹å¾å¯¹æ¯” | **Shade Plugin** | **Assembly Plugin** | **Spring Boot Plugin** |
|---------|------------------|-------------------|----------------------|
| **é€‚ç”¨åœºæ™¯** | ğŸ”¹ é€šç”¨Javaåº”ç”¨ | ğŸ”¹ å¤æ‚å‘å¸ƒåŒ… | ğŸ”¹ Spring Bootä¸“ç”¨ |
| **é…ç½®å¤æ‚åº¦** | ğŸ”¹ ç®€å• | ğŸ”¶ ä¸­ç­‰ | ğŸ”¹ æç®€ |
| **æ–‡ä»¶ç»“æ„** | ğŸ”¹ æ‰å¹³åŒ– | ğŸ”¶ å¯è‡ªå®šä¹‰ | ğŸ”¹ åˆ†å±‚ç»“æ„ |
| **å¯åŠ¨æ€§èƒ½** | ğŸ”¹ ä¸€èˆ¬ | ğŸ”¹ ä¸€èˆ¬ | ğŸ”¶ ä¼˜åŒ– |
| **å†²çªå¤„ç†** | ğŸ”¶ åŒ…é‡å‘½å | ğŸ”¹ ä¾èµ–åˆ†ç¦» | ğŸ”¶ è‡ªåŠ¨ç®¡ç† |

### 10.3 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é€‰æ‹©æ’ä»¶çš„å†³ç­–æ ‘**
```
ä½ çš„é¡¹ç›®ç±»å‹ï¼š
â”œâ”€â”€ Spring Bootåº”ç”¨ â†’ spring-boot-maven-plugin
â”œâ”€â”€ ç®€å•å‘½ä»¤è¡Œå·¥å…· â†’ maven-shade-plugin  
â”œâ”€â”€ éœ€è¦å¯åŠ¨è„šæœ¬çš„åº”ç”¨ â†’ maven-assembly-plugin
â””â”€â”€ ä¼ä¸šçº§å¤æ‚åº”ç”¨ â†’ maven-assembly-plugin
```

**ğŸ”¹ å¸¸è§é—®é¢˜çš„æ ¹æœ¬åŸå› **
```
"No main manifest attribute"ï¼š
â†’ æ ¹æœ¬åŸå› ï¼šMANIFEST.MFç¼ºå°‘Main-Classå£°æ˜
â†’ é¢„é˜²æ–¹æ³•ï¼šæ­£ç¡®é…ç½®æ’ä»¶çš„ä¸»ç±»è®¾ç½®

"ClassNotFoundException"ï¼š
â†’ æ ¹æœ¬åŸå› ï¼šä¾èµ–æ²¡æœ‰åŒ…å«åœ¨JARä¸­
â†’ é¢„é˜²æ–¹æ³•ï¼šä½¿ç”¨æ­£ç¡®çš„Fat JARæ„å»ºæ’ä»¶

ä¾èµ–å†²çªï¼š
â†’ æ ¹æœ¬åŸå› ï¼šå¤šä¸ªç‰ˆæœ¬çš„åŒä¸€ä¸ªåº“å…±å­˜
â†’ é¢„é˜²æ–¹æ³•ï¼šä½¿ç”¨ä¾èµ–ç®¡ç†å’Œå†²çªè§£å†³ç­–ç•¥
```

### 10.4 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ æ–°æ‰‹å‹å¥½çš„å®è·µè·¯å¾„**

**ç¬¬ä¸€æ­¥ï¼šé€‰å¯¹æ’ä»¶**
- Spring Booté¡¹ç›®ï¼šç›´æ¥ç”¨Spring Bootæ’ä»¶
- å…¶ä»–é¡¹ç›®ï¼šå…ˆå°è¯•Shadeæ’ä»¶

**ç¬¬äºŒæ­¥ï¼šåŸºç¡€é…ç½®**
- ç¡®ä¿ä¸»ç±»é…ç½®æ­£ç¡®
- æµ‹è¯•åŸºæœ¬çš„å¯æ‰§è¡ŒJARæ„å»º

**ç¬¬ä¸‰æ­¥ï¼šé€æ­¥ä¼˜åŒ–**
- å¤„ç†ä¾èµ–å†²çª
- ä¼˜åŒ–æ–‡ä»¶å¤§å°
- æ·»åŠ å¤šç¯å¢ƒæ”¯æŒ

**ç¬¬å››æ­¥ï¼šæŒç»­æ”¹è¿›**
- é›†æˆåˆ°CI/CDæµç¨‹
- ç›‘æ§å’Œæ€§èƒ½è°ƒä¼˜
- æ–‡æ¡£åŒ–é…ç½®é€‰æ‹©

### 10.5 å®é™…é¡¹ç›®ç»éªŒæ€»ç»“


**ğŸ¯ ä¸åŒé¡¹ç›®è§„æ¨¡çš„é€‰æ‹©å»ºè®®**

**å°å‹é¡¹ç›®ï¼ˆä¸ªäººé¡¹ç›®ã€å­¦ä¹ é¡¹ç›®ï¼‰**ï¼š
- æ¨èï¼šmaven-shade-plugin
- ç†ç”±ï¼šé…ç½®ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½
- é…ç½®ï¼šåŸºç¡€çš„ä¸»ç±»è®¾ç½®å³å¯

**ä¸­å‹é¡¹ç›®ï¼ˆå›¢é˜Ÿé¡¹ç›®ã€ä¼ä¸šå†…éƒ¨å·¥å…·ï¼‰**ï¼š
- æ¨èï¼šæ ¹æ®æŠ€æœ¯æ ˆé€‰æ‹©
- Spring Boot â†’ spring-boot-maven-plugin
- å…¶ä»–æ¡†æ¶ â†’ maven-assembly-plugin
- ç†ç”±ï¼šéœ€è¦è€ƒè™‘éƒ¨ç½²å’Œè¿ç»´ä¾¿åˆ©æ€§

**å¤§å‹é¡¹ç›®ï¼ˆå•†ä¸šäº§å“ã€å¾®æœåŠ¡ç³»ç»Ÿï¼‰**ï¼š
- æ¨èï¼šspring-boot-maven-plugin + å®¹å™¨åŒ–éƒ¨ç½²
- ç†ç”±ï¼šæ ‡å‡†åŒ–ã€å¯æ‰©å±•ã€ä¾¿äºç»´æŠ¤
- é¢å¤–è€ƒè™‘ï¼šåˆ†å±‚æ„å»ºã€Dockerä¼˜åŒ–

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- å¯æ‰§è¡ŒJARæ˜¯Javaåº”ç”¨åˆ†å‘çš„æ ‡å‡†æ–¹å¼
- é€‰æ‹©æ’ä»¶è¦è€ƒè™‘é¡¹ç›®ç‰¹ç‚¹å’Œå›¢é˜ŸæŠ€æœ¯æ ˆ
- ä¸»ç±»é…ç½®æ˜¯æˆåŠŸæ„å»ºçš„å…³é”®
- ä¾èµ–ç®¡ç†æ˜¯é¿å…è¿è¡Œæ—¶é—®é¢˜çš„æ ¸å¿ƒ
- å®è·µä¸­è¦å¹³è¡¡ç®€å•æ€§å’ŒåŠŸèƒ½æ€§