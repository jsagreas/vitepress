---
title: 4、项目属性配置
---
## 📚 目录

1. [什么是Maven属性](#1-什么是Maven属性)
2. [properties标签详解](#2-properties标签详解)
3. [内置属性深入理解](#3-内置属性深入理解)
4. [自定义属性实战](#4-自定义属性实战)
5. [属性引用机制](#5-属性引用机制)
6. [系统属性与环境变量](#6-系统属性与环境变量)
7. [属性配置最佳实践](#7-属性配置最佳实践)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🔧 什么是Maven属性


### 1.1 属性的概念理解


**简单来说**：Maven属性就像是编程中的"变量"，可以存储一些值，然后在需要的地方重复使用。

```
就像生活中的例子：
你有个常用的电话号码 → 存到通讯录里起个名字
需要拨打时 → 直接找这个名字就行

Maven属性也是一样：
项目中有重复使用的值 → 定义成属性
需要使用时 → 通过属性名引用
```

**为什么需要属性？**
- **避免重复**：同样的版本号不用写很多遍
- **统一管理**：要改版本时只需要改一个地方
- **提高维护性**：代码更清晰，错误更少
- **支持灵活配置**：不同环境可以有不同的值

### 1.2 属性的工作原理


```
属性定义阶段：
<properties>
  <spring.version>5.3.21</spring.version>
</properties>

属性使用阶段：
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-core</artifactId>
  <version>${spring.version}</version>
</dependency>

实际效果：
Maven会把${spring.version}替换成5.3.21
```

**工作流程图示：**
```
POM文件解析
     ↓
读取properties配置
     ↓
识别${属性名}占位符
     ↓
用实际值替换占位符
     ↓
生成最终配置
```

---

## 2. 📝 properties标签详解


### 2.1 基本语法结构


**properties标签**就是Maven中专门用来定义属性的地方，就像一个"配置仓库"。

```xml
<project>
  <!-- 其他配置 -->
  
  <properties>
    <!-- 在这里定义各种属性 -->
    <属性名>属性值</属性名>
    <另一个属性名>另一个属性值</另一个属性名>
  </properties>
  
  <!-- 其他配置 -->
</project>
```

### 2.2 属性命名规范


**命名建议**：
- 使用**小写字母**和**点号分隔**：`spring.version`
- 体现**层次关系**：`database.mysql.version`
- 保持**语义清晰**：`junit.version`而不是`j.v`

```xml
<properties>
  <!-- ✅ 推荐的命名方式 -->
  <spring.version>5.3.21</spring.version>
  <mysql.connector.version>8.0.29</mysql.connector.version>
  <project.encoding>UTF-8</project.encoding>
  
  <!-- ❌ 不推荐的命名方式 -->
  <SpringVersion>5.3.21</SpringVersion>
  <mysql_version>8.0.29</mysql_version>
  <v1>UTF-8</v1>
</properties>
```

### 2.3 常用属性配置示例


```xml
<properties>
  <!-- 编码相关 -->
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  <maven.compiler.encoding>UTF-8</maven.compiler.encoding>
  
  <!-- Java版本 -->
  <maven.compiler.source>11</maven.compiler.source>
  <maven.compiler.target>11</maven.compiler.target>
  
  <!-- 依赖版本管理 -->
  <spring.version>5.3.21</spring.version>
  <junit.version>5.8.2</junit.version>
  <mysql.version>8.0.29</mysql.version>
  
  <!-- 插件版本 -->
  <maven.compiler.plugin.version>3.8.1</maven.compiler.plugin.version>
</properties>
```

---

## 3. 🏠 内置属性深入理解


### 3.1 什么是内置属性


**内置属性**就是Maven自己提供的一些"现成变量"，不需要你定义，直接就可以使用。

**就像手机里的系统信息**：
- 手机型号、系统版本 → 手机自带，不用你设置
- Maven内置属性 → Maven自带，直接使用

### 3.2 项目基本信息属性


这些属性来自POM文件的基本信息：

| **属性名** | **含义** | **示例值** |
|----------|---------|-----------|
| `${project.groupId}` | 项目组ID | `com.example` |
| `${project.artifactId}` | 项目名称 | `my-project` |
| `${project.version}` | 项目版本 | `1.0.0` |
| `${project.name}` | 项目显示名 | `My Application` |
| `${project.description}` | 项目描述 | `A demo application` |

**实际使用场景**：
```xml
<!-- 在插件配置中使用项目信息 -->
<plugin>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-maven-plugin</artifactId>
  <configuration>
    <finalName>${project.artifactId}-${project.version}</finalName>
  </configuration>
</plugin>
```

### 3.3 构建路径属性


这些属性告诉你项目各个目录的位置：

| **属性名** | **默认值** | **用途说明** |
|----------|-----------|-------------|
| `${project.basedir}` | `项目根目录` | 项目的最顶层目录 |
| `${project.build.directory}` | `target` | 编译输出目录 |
| `${project.build.sourceDirectory}` | `src/main/java` | Java源码目录 |
| `${project.build.testSourceDirectory}` | `src/test/java` | 测试代码目录 |
| `${project.build.outputDirectory}` | `target/classes` | 编译后的class文件目录 |

**目录结构示意图**：
```
项目根目录 (${project.basedir})
├── src/
│   ├── main/
│   │   └── java/ (${project.build.sourceDirectory})
│   └── test/
│       └── java/ (${project.build.testSourceDirectory})
└── target/ (${project.build.directory})
    └── classes/ (${project.build.outputDirectory})
```

### 3.4 设置相关属性


从Maven的settings.xml文件中读取的配置：

```xml
<!-- 引用settings.xml中的本地仓库路径 -->
<outputDirectory>${settings.localRepository}</outputDirectory>

<!-- 引用用户目录 -->
<directory>${user.home}/.m2/repository</directory>
```

---

## 4. 🎨 自定义属性实战


### 4.1 版本号统一管理


**问题场景**：Spring框架有很多模块，版本号应该保持一致
```xml
<!-- ❌ 没有使用属性的写法 - 容易出错 -->
<dependencies>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>5.3.21</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>5.3.20</version>  <!-- 版本不一致！ -->
  </dependency>
</dependencies>
```

**✅ 使用属性的正确写法**：
```xml
<properties>
  <spring.version>5.3.21</spring.version>
</properties>

<dependencies>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
  </dependency>
  <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
  </dependency>
</dependencies>
```

### 4.2 环境配置管理


**应用场景**：不同环境使用不同的数据库配置

```xml
<properties>
  <!-- 数据库配置 -->
  <db.driver>com.mysql.cj.jdbc.Driver</db.driver>
  <db.url>jdbc:mysql://localhost:3306/mydb</db.url>
  <db.username>root</db.username>
  
  <!-- 日志级别 -->
  <log.level>INFO</log.level>
  
  <!-- 服务器配置 -->
  <server.port>8080</server.port>
</properties>
```

### 4.3 编码和构建配置


```xml
<properties>
  <!-- 字符编码统一设置 -->
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
  <maven.compiler.encoding>UTF-8</maven.compiler.encoding>
  
  <!-- Java版本设置 -->
  <java.version>11</java.version>
  <maven.compiler.source>${java.version}</maven.compiler.source>
  <maven.compiler.target>${java.version}</maven.compiler.target>
  
  <!-- 跳过测试（开发阶段） -->
  <maven.test.skip>false</maven.test.skip>
</properties>
```

---

## 5. 🔗 属性引用机制


### 5.1 基本引用语法


**引用格式**：`${属性名}`

```xml
<properties>
  <mysql.version>8.0.29</mysql.version>
</properties>

<!-- 在依赖中引用 -->
<dependency>
  <groupId>mysql</groupId>
  <artifactId>mysql-connector-java</artifactId>
  <version>${mysql.version}</version>
</dependency>

<!-- 在插件中引用 -->
<plugin>
  <configuration>
    <source>${java.version}</source>
    <target>${java.version}</target>
  </configuration>
</plugin>
```

### 5.2 属性嵌套使用


属性可以引用其他属性，形成**嵌套引用**：

```xml
<properties>
  <project.version>1.0.0</project.version>
  <project.name>my-application</project.name>
  
  <!-- 嵌套引用：使用其他属性来构建新属性 -->
  <final.name>${project.name}-${project.version}</final.name>
  <docker.image>${project.name}:${project.version}</docker.image>
</properties>

<!-- 使用嵌套属性 -->
<build>
  <finalName>${final.name}</finalName>
</build>
```

### 5.3 属性优先级规则


当同名属性在多个地方定义时，Maven按以下优先级选择：

```
优先级（从高到低）：
1. 命令行参数     → mvn clean install -Dspring.version=5.3.22
2. POM文件属性   → <properties>标签中的定义
3. settings.xml  → Maven配置文件中的属性
4. 系统属性      → System.getProperty()
5. 环境变量      → System.getenv()
```

**实际示例**：
```bash
# 命令行覆盖POM中的属性
mvn clean install -Dspring.version=5.3.22

# 即使POM中定义了spring.version=5.3.21，实际使用5.3.22
```

---

## 6. ⚙️ 系统属性与环境变量


### 6.1 系统属性访问


**系统属性**就是Java虚拟机提供的一些系统信息，可以直接在Maven中使用：

| **系统属性** | **含义** | **示例值** |
|-------------|---------|-----------|
| `${user.name}` | 当前用户名 | `zhangsan` |
| `${user.home}` | 用户主目录 | `/home/zhangsan` |
| `${java.version}` | Java版本 | `11.0.12` |
| `${os.name}` | 操作系统名 | `Linux` |
| `${file.separator}` | 文件分隔符 | `/` 或 `\` |

**使用示例**：
```xml
<properties>
  <!-- 使用用户主目录 -->
  <config.dir>${user.home}/.myapp</config.dir>
  
  <!-- 根据操作系统设置不同路径 -->
  <native.lib.path>${project.basedir}/lib/${os.name}</native.lib.path>
</properties>
```

### 6.2 环境变量引用


**环境变量**是操作系统级别的变量，Maven可以通过`${env.变量名}`的方式访问：

```xml
<properties>
  <!-- 引用环境变量 -->
  <database.url>${env.DATABASE_URL}</database.url>
  <java.home>${env.JAVA_HOME}</java.home>
  <maven.home>${env.M2_HOME}</maven.home>
</properties>
```

**设置环境变量示例**：
```bash
# Linux/Mac系统
export DATABASE_URL=jdbc:mysql://localhost:3306/mydb
export JAVA_HOME=/usr/lib/jvm/java-11-openjdk

# Windows系统
set DATABASE_URL=jdbc:mysql://localhost:3306/mydb
set JAVA_HOME=C:\Program Files\Java\jdk-11
```

### 6.3 条件属性配置


结合Profile可以实现条件属性配置：

```xml
<profiles>
  <profile>
    <id>development</id>
    <properties>
      <db.url>jdbc:mysql://localhost:3306/dev_db</db.url>
      <log.level>DEBUG</log.level>
    </properties>
  </profile>
  
  <profile>
    <id>production</id>
    <properties>
      <db.url>${env.PROD_DATABASE_URL}</db.url>
      <log.level>WARN</log.level>
    </properties>
  </profile>
</profiles>
```

---

## 7. 💡 属性配置最佳实践


### 7.1 属性分类组织


**按用途分组**，让POM文件更清晰：
```xml
<properties>
  <!-- === 编码和构建配置 === -->
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  <maven.compiler.source>11</maven.compiler.source>
  <maven.compiler.target>11</maven.compiler.target>
  
  <!-- === 核心框架版本 === -->
  <spring.version>5.3.21</spring.version>
  <spring.boot.version>2.7.0</spring.boot.version>
  
  <!-- === 数据库相关 === -->
  <mysql.version>8.0.29</mysql.version>
  <mybatis.version>3.5.10</mybatis.version>
  
  <!-- === 测试框架 === -->
  <junit.version>5.8.2</junit.version>
  <mockito.version>4.6.1</mockito.version>
  
  <!-- === 工具类库 === -->
  <lombok.version>1.18.24</lombok.version>
  <commons.lang3.version>3.12.0</commons.lang3.version>
</properties>
```

### 7.2 版本号管理策略


**统一版本管理的好处**：
- ✅ **一致性保证**：相关依赖使用相同版本
- ✅ **升级便利**：只需修改一个地方
- ✅ **错误减少**：避免版本不匹配问题

```xml
<properties>
  <!-- Spring生态版本统一 -->
  <spring.version>5.3.21</spring.version>
  <spring.security.version>5.7.2</spring.security.version>
  <spring.data.version>2.7.0</spring.data.version>
  
  <!-- 日志框架版本统一 -->
  <slf4j.version>1.7.36</slf4j.version>
  <logback.version>1.2.11</logback.version>
</properties>
```

### 7.3 默认值设置


为属性提供**合理的默认值**：
```xml
<properties>
  <!-- 提供默认值，可被外部覆盖 -->
  <maven.test.skip>false</maven.test.skip>
  <maven.javadoc.skip>false</maven.javadoc.skip>
  
  <!-- 环境相关配置的默认值 -->
  <server.port>8080</server.port>
  <log.level>INFO</log.level>
  <db.pool.size>10</db.pool.size>
</properties>
```

### 7.4 属性文档化


**为重要属性添加注释说明**：
```xml
<properties>
  <!-- Java编译版本：项目使用Java 11 -->
  <maven.compiler.source>11</maven.compiler.source>
  <maven.compiler.target>11</maven.compiler.target>
  
  <!-- Spring框架版本：使用LTS版本确保稳定性 -->
  <spring.version>5.3.21</spring.version>
  
  <!-- 数据库连接池最大连接数：生产环境建议根据实际情况调整 -->
  <db.pool.max.size>20</db.pool.max.size>
</properties>
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的基本概念


```
🔸 Maven属性本质：存储和重用配置值的机制，类似编程中的变量
🔸 properties标签：专门定义自定义属性的地方
🔸 内置属性：Maven自带的属性，直接使用无需定义
🔸 引用语法：${属性名} 格式引用属性值
🔸 属性优先级：命令行 > POM > settings.xml > 系统 > 环境变量
🔸 系统属性和环境变量：可直接在Maven中使用的外部属性
```

### 8.2 关键理解要点


**🔹 为什么需要属性配置**
```
实际问题：
- 版本号重复出现，修改麻烦
- 配置值散乱分布，维护困难
- 不同环境需要不同配置

属性解决方案：
- 统一管理：一处定义，多处使用
- 灵活配置：支持环境差异化
- 降低错误：避免手工重复输入
```

**🔹 属性的工作机制**
```
定义阶段：在<properties>中设置属性
        ↓
使用阶段：通过${属性名}引用
        ↓
解析阶段：Maven替换占位符为实际值
        ↓
构建阶段：使用最终的配置值
```

**🔹 内置属性的价值**
```
项目信息属性：获取POM基本信息
路径属性：获取项目目录结构
设置属性：获取Maven配置信息
系统属性：获取运行环境信息
```

### 8.3 实际应用场景


**版本管理应用**：
- 统一管理Spring框架各模块版本
- 控制测试框架版本一致性
- 管理插件版本避免兼容问题

**环境配置应用**：
- 开发、测试、生产环境差异化配置
- 数据库连接信息管理
- 日志级别控制

**构建配置应用**：
- Java版本设置
- 字符编码统一
- 编译参数配置

### 8.4 最佳实践要点


```
属性命名：
✅ 使用小写和点分隔：spring.version
✅ 体现语义层次：database.mysql.version
❌ 避免大写混合：SpringVersion

属性组织：
✅ 按功能分组排列
✅ 添加必要注释说明
✅ 提供合理默认值

使用原则：
✅ 重复出现的值定义为属性
✅ 版本号统一管理
✅ 环境相关配置参数化
❌ 不要过度使用，简单值直接写
```

**核心记忆**：
- 属性是Maven的"变量系统"，统一管理重复配置
- properties定义，${}引用，优先级决定最终值
- 内置属性提供项目和环境信息，直接使用
- 合理使用属性让项目配置更清晰、更易维护