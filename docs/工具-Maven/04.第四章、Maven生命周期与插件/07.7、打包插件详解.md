---
title: 7ã€æ‰“åŒ…æ’ä»¶è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [æ‰“åŒ…æ’ä»¶æ¦‚è¿°](#1-æ‰“åŒ…æ’ä»¶æ¦‚è¿°)
2. [maven-jar-pluginè¯¦è§£](#2-maven-jar-pluginè¯¦è§£)
3. [maven-war-pluginè¯¦è§£](#3-maven-war-pluginè¯¦è§£)
4. [MANIFEST.MFé…ç½®è¯¦è§£](#4-manifest-mfé…ç½®è¯¦è§£)
5. [å¯æ‰§è¡ŒJARåˆ¶ä½œ](#5-å¯æ‰§è¡Œjaråˆ¶ä½œ)
6. [èµ„æºåŒ…å«ä¸æ’é™¤](#6-èµ„æºåŒ…å«ä¸æ’é™¤)
7. [è‡ªå®šä¹‰æ‰“åŒ…ç­–ç•¥](#7-è‡ªå®šä¹‰æ‰“åŒ…ç­–ç•¥)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“¦ æ‰“åŒ…æ’ä»¶æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯æ‰“åŒ…æ’ä»¶ï¼Ÿ


**ğŸ¯ é€šä¿—ç†è§£**
æ‰“åŒ…æ’ä»¶å°±åƒæ˜¯ä¸€ä¸ª"è£…ç®±å·¥äºº"ï¼Œå®ƒè´Ÿè´£æŠŠä½ å†™å¥½çš„ä»£ç ã€é…ç½®æ–‡ä»¶ã€ä¾èµ–åº“ç­‰æ‰€æœ‰éœ€è¦çš„ä¸œè¥¿ï¼ŒæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™æ‰“åŒ…æˆä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ã€‚

```
æƒ³è±¡ä¸€ä¸‹æ¬å®¶ï¼š
åŸå§‹çŠ¶æ€ï¼šå®¶é‡Œçš„ä¸œè¥¿æ•£è½å„å¤„ï¼ˆæºä»£ç ã€é…ç½®æ–‡ä»¶ã€ä¾èµ–ï¼‰
æ‰“åŒ…è¿‡ç¨‹ï¼šè£…ç®±å·¥äººæŠŠä¸œè¥¿åˆ†ç±»è£…ç®±ï¼ˆæ‰“åŒ…æ’ä»¶å·¥ä½œï¼‰
æœ€ç»ˆç»“æœï¼šæ•´é½çš„åŒ…è£¹ï¼Œæ–¹ä¾¿è¿è¾“ï¼ˆJAR/WARæ–‡ä»¶ï¼‰
```

**ğŸ“‹ æ ¸å¿ƒä½œç”¨**
- **æ”¶é›†æ–‡ä»¶**ï¼šæŠŠé¡¹ç›®ä¸­çš„æ‰€æœ‰å¿…è¦æ–‡ä»¶æ”¶é›†èµ·æ¥
- **ç»„ç»‡ç»“æ„**ï¼šæŒ‰ç…§æ ‡å‡†æ ¼å¼æ’åˆ—æ–‡ä»¶ä½ç½®
- **å‹ç¼©æ‰“åŒ…**ï¼šç”Ÿæˆå¯éƒ¨ç½²çš„å‹ç¼©æ–‡ä»¶
- **æ·»åŠ å…ƒä¿¡æ¯**ï¼šåŒ…å«ç‰ˆæœ¬ã€ä¾èµ–ç­‰æè¿°ä¿¡æ¯

### 1.2 å¸¸è§æ‰“åŒ…æ’ä»¶ç±»å‹


**ğŸ” æ’ä»¶åˆ†ç±»å¯¹æ¯”**

| æ’ä»¶ç±»å‹ | **ç”¨é€”** | **ç”Ÿæˆæ–‡ä»¶** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|-------------|-------------|
| `maven-jar-plugin` | æ™®é€šJavaåº”ç”¨æ‰“åŒ… | `.jaræ–‡ä»¶` | ç‹¬ç«‹åº”ç”¨ã€å·¥å…·åº“ |
| `maven-war-plugin` | Webåº”ç”¨æ‰“åŒ… | `.waræ–‡ä»¶` | Webé¡¹ç›®ã€Servletåº”ç”¨ |
| `maven-shade-plugin` | åŒ…å«ä¾èµ–çš„èƒ–JAR | `èƒ–.jaræ–‡ä»¶` | ç‹¬ç«‹è¿è¡Œçš„åº”ç”¨ |
| `maven-assembly-plugin` | è‡ªå®šä¹‰æ‰“åŒ… | `å¤šç§æ ¼å¼` | å¤æ‚åˆ†å‘éœ€æ±‚ |

### 1.3 æ‰“åŒ…æ’ä»¶å·¥ä½œæµç¨‹


```
Mavenæ‰“åŒ…æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¼–è¯‘å®Œæˆ   â”‚â”€â”€â”€â–¶â”‚  æ’ä»¶å¯åŠ¨   â”‚â”€â”€â”€â–¶â”‚  æ”¶é›†èµ„æº   â”‚
â”‚ (classes)   â”‚    â”‚            â”‚    â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡ä»¶æ•´ç†   â”‚â”€â”€â”€â–¶â”‚  ç”Ÿæˆæ¸…å•   â”‚â”€â”€â”€â–¶â”‚  æœ€ç»ˆæ‰“åŒ…   â”‚
â”‚            â”‚    â”‚(MANIFEST.MF)â”‚    â”‚   (.jar)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸº maven-jar-pluginè¯¦è§£


### 2.1 JARæ’ä»¶åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯JARï¼Ÿ**
JARï¼ˆJava Archiveï¼‰å°±æ˜¯Javaçš„"å‹ç¼©åŒ…"ï¼Œå®ƒæŠŠä½ çš„æ‰€æœ‰Javaç±»æ–‡ä»¶ã€èµ„æºæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿åˆ†å‘å’Œè¿è¡Œã€‚

**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦JARæ’ä»¶ï¼Ÿ**
- **æ ‡å‡†åŒ–**ï¼šç¡®ä¿JARæ–‡ä»¶ç¬¦åˆJavaè§„èŒƒ
- **è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨å®Œæˆå¤æ‚çš„æ‰“åŒ…æµç¨‹
- **å¯é…ç½®**ï¼šæ”¯æŒå„ç§ä¸ªæ€§åŒ–æ‰“åŒ…éœ€æ±‚

### 2.2 åŸºç¡€é…ç½®ä½¿ç”¨


**ğŸ“ æœ€ç®€å•çš„é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>3.2.2</version>
    <configuration>
        <!-- JARæ–‡ä»¶åç§° -->
        <finalName>my-app-${project.version}</finalName>
    </configuration>
</plugin>
```

**ğŸ¯ é…ç½®è¯´æ˜**
- `finalName`ï¼šæŒ‡å®šç”Ÿæˆçš„JARæ–‡ä»¶å
- ä¸æŒ‡å®šæ—¶é»˜è®¤ä½¿ç”¨ï¼š`é¡¹ç›®å-ç‰ˆæœ¬å·.jar`

### 2.3 å¸¸ç”¨é…ç½®é€‰é¡¹


**ğŸ“‹ æ ¸å¿ƒé…ç½®å‚æ•°**
```xml
<configuration>
    <!-- è¾“å‡ºç›®å½• -->
    <outputDirectory>${project.build.directory}</outputDirectory>
    
    <!-- åˆ†ç±»å™¨ï¼ˆç”Ÿæˆå¤šä¸ªç‰ˆæœ¬ï¼‰ -->
    <classifier>sources</classifier>
    
    <!-- æ˜¯å¦åŒ…å«ç©ºç›®å½• -->
    <includeEmptyDirs>false</includeEmptyDirs>
    
    <!-- å¼ºåˆ¶é‡æ–°åˆ›å»º -->
    <forceCreation>true</forceCreation>
</configuration>
```

**ğŸ’¡ å‚æ•°å«ä¹‰è§£é‡Š**
- **outputDirectory**ï¼šJARæ–‡ä»¶æ”¾åœ¨å“ªä¸ªæ–‡ä»¶å¤¹
- **classifier**ï¼šç»™JARæ–‡ä»¶åŠ ä¸ª"æ ‡ç­¾"ï¼Œæ¯”å¦‚`sources`è¡¨ç¤ºæºç åŒ…
- **includeEmptyDirs**ï¼šç©ºæ–‡ä»¶å¤¹è¦ä¸è¦åŒ…å«è¿›å»
- **forceCreation**ï¼šå³ä½¿æ²¡æœ‰å˜åŒ–ä¹Ÿé‡æ–°æ‰“åŒ…

### 2.4 å¤šJARæ–‡ä»¶ç”Ÿæˆ


**ğŸ”„ ç”Ÿæˆå¤šç§ç±»å‹çš„JAR**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>3.2.2</version>
    <executions>
        <!-- æ™®é€šJAR -->
        <execution>
            <id>default-jar</id>
            <phase>package</phase>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
        
        <!-- æºç JAR -->
        <execution>
            <id>source-jar</id>
            <phase>package</phase>
            <goals>
                <goal>jar</goal>
            </goals>
            <configuration>
                <classifier>sources</classifier>
                <includes>
                    <include>**/*.java</include>
                </includes>
            </configuration>
        </execution>
    </executions>
</plugin>
```

**ğŸ“¦ ç”Ÿæˆç»“æœç¤ºä¾‹**
```
target/
â”œâ”€â”€ my-app-1.0.jar          â† æ™®é€šJARåŒ…
â””â”€â”€ my-app-1.0-sources.jar  â† æºç JARåŒ…
```

---

## 3. ğŸŒ maven-war-pluginè¯¦è§£


### 3.1 WARæ’ä»¶åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯WARï¼Ÿ**
WARï¼ˆWeb Archiveï¼‰æ˜¯ä¸“é—¨ä¸ºWebåº”ç”¨è®¾è®¡çš„æ‰“åŒ…æ ¼å¼ï¼Œå®ƒåŒ…å«äº†Webåº”ç”¨è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼š

```
WARæ–‡ä»¶ç»“æ„ï¼š
my-webapp.war
â”œâ”€â”€ META-INF/           â† å…ƒä¿¡æ¯ç›®å½•
â”‚   â””â”€â”€ MANIFEST.MF
â”œâ”€â”€ WEB-INF/            â† Webåº”ç”¨é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ classes/        â† ç¼–è¯‘åçš„Javaç±»
â”‚   â”œâ”€â”€ lib/            â† ä¾èµ–JARåŒ…
â”‚   â””â”€â”€ web.xml         â† Webåº”ç”¨é…ç½®æ–‡ä»¶
â”œâ”€â”€ css/                â† é™æ€èµ„æº
â”œâ”€â”€ js/
â”œâ”€â”€ images/
â””â”€â”€ index.html          â† å‰ç«¯é¡µé¢æ–‡ä»¶
```

### 3.2 åŸºç¡€é…ç½®ä½¿ç”¨


**ğŸ“ åŸºæœ¬é…ç½®ç¤ºä¾‹**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>3.3.1</version>
    <configuration>
        <!-- WARæ–‡ä»¶å -->
        <warName>my-webapp</warName>
        
        <!-- Webåº”ç”¨ç›®å½• -->
        <warSourceDirectory>src/main/webapp</warSourceDirectory>
        
        <!-- æ˜¯å¦æ£€æŸ¥web.xml -->
        <failOnMissingWebXml>false</failOnMissingWebXml>
    </configuration>
</plugin>
```

**ğŸ¯ é…ç½®å‚æ•°è¯´æ˜**
- **warName**ï¼šç”Ÿæˆçš„WARæ–‡ä»¶åï¼ˆä¸å«.waræ‰©å±•åï¼‰
- **warSourceDirectory**ï¼šWebèµ„æºæ–‡ä»¶çš„æºç›®å½•
- **failOnMissingWebXml**ï¼šæ‰¾ä¸åˆ°web.xmlæ—¶æ˜¯å¦æŠ¥é”™

### 3.3 Webèµ„æºå¤„ç†


**ğŸ“ èµ„æºç›®å½•æ˜ å°„**
```xml
<configuration>
    <webResources>
        <!-- é¢å¤–çš„èµ„æºç›®å½• -->
        <resource>
            <directory>src/main/config</directory>
            <targetPath>WEB-INF/classes</targetPath>
            <filtering>true</filtering>
        </resource>
        
        <!-- é™æ€èµ„æº -->
        <resource>
            <directory>src/main/assets</directory>
            <targetPath>static</targetPath>
        </resource>
    </webResources>
</configuration>
```

**ğŸ’¡ èµ„æºå¤„ç†è¯´æ˜**
- **directory**ï¼šæºèµ„æºåœ¨å“ªä¸ªç›®å½•
- **targetPath**ï¼šæ‰“åŒ…åæ”¾åœ¨WARçš„å“ªä¸ªä½ç½®
- **filtering**ï¼šæ˜¯å¦è¿›è¡Œå˜é‡æ›¿æ¢ï¼ˆå¦‚${project.version}ï¼‰

### 3.4 ä¾èµ–ç®¡ç†é…ç½®


**ğŸ”— ä¾èµ–åŒ…å«æ’é™¤æ§åˆ¶**
```xml
<configuration>
    <!-- æ’é™¤ç‰¹å®šä¾èµ– -->
    <packagingExcludes>
        WEB-INF/lib/servlet-api-*.jar,
        WEB-INF/lib/jsp-api-*.jar
    </packagingExcludes>
    
    <!-- ä»…åŒ…å«ç‰¹å®šä¾èµ– -->
    <packagingIncludes>
        WEB-INF/lib/spring-*.jar,
        WEB-INF/lib/commons-*.jar
    </packagingIncludes>
</configuration>
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**
- **æ’é™¤**ï¼šæœåŠ¡å™¨å·²æä¾›çš„APIåŒ…ï¼ˆå¦‚Servlet APIï¼‰
- **åŒ…å«**ï¼šåªæ‰“åŒ…æ ¸å¿ƒä¾èµ–ï¼Œå‡å°WARæ–‡ä»¶å¤§å°

---

## 4. ğŸ“„ MANIFEST.MFé…ç½®è¯¦è§£


### 4.1 æ¸…å•æ–‡ä»¶åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯MANIFEST.MFï¼Ÿ**
MANIFEST.MFå°±åƒæ˜¯åŒ…è£¹çš„"è¿å•"ï¼Œè®°å½•äº†è¿™ä¸ªJAR/WARåŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼š

```
MANIFEST.MFæ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š
Manifest-Version: 1.0
Created-By: Apache Maven 3.8.6
Built-By: developer
Build-Jdk: 11.0.16
Main-Class: com.example.MainApp
Class-Path: lib/spring-core-5.3.21.jar lib/commons-lang3-3.12.0.jar
Implementation-Title: My Application
Implementation-Version: 1.0.0
```

### 4.2 JARæ¸…å•æ–‡ä»¶é…ç½®


**ğŸ“ åŸºç¡€æ¸…å•é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <!-- æ·»åŠ ç±»è·¯å¾„ -->
                <addClasspath>true</addClasspath>
                
                <!-- ç±»è·¯å¾„å‰ç¼€ -->
                <classpathPrefix>lib/</classpathPrefix>
                
                <!-- ä¸»ç±» -->
                <mainClass>com.example.Application</mainClass>
                
                <!-- æ·»åŠ é»˜è®¤å®ç°æ¡ç›® -->
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
            </manifest>
            
            <!-- è‡ªå®šä¹‰æ¸…å•æ¡ç›® -->
            <manifestEntries>
                <Implementation-Title>${project.name}</Implementation-Title>
                <Implementation-Version>${project.version}</Implementation-Version>
                <Built-Date>${maven.build.timestamp}</Built-Date>
            </manifestEntries>
        </archive>
    </configuration>
</plugin>
```

**ğŸ’¡ é…ç½®è¯´æ˜**
- **addClasspath**ï¼šåœ¨æ¸…å•ä¸­åŒ…å«ä¾èµ–JARçš„è·¯å¾„
- **classpathPrefix**ï¼šä¾èµ–JARå­˜æ”¾çš„ç›¸å¯¹è·¯å¾„
- **mainClass**ï¼šå¯æ‰§è¡ŒJARçš„å…¥å£ç±»
- **manifestEntries**ï¼šè‡ªå®šä¹‰çš„æ¸…å•ä¿¡æ¯

### 4.3 WARæ¸…å•æ–‡ä»¶é…ç½®


**ğŸ“ Webåº”ç”¨æ¸…å•é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
            </manifest>
            <manifestEntries>
                <Application-Name>${project.name}</Application-Name>
                <Application-Version>${project.version}</Application-Version>
                <Build-Time>${maven.build.timestamp}</Build-Time>
            </manifestEntries>
        </archive>
    </configuration>
</plugin>
```

### 4.4 æ¸…å•æ–‡ä»¶çš„å®é™…ä½œç”¨


**ğŸ¯ ä¸»è¦ç”¨é€”**
```
è¿è¡Œæ—¶ä¿¡æ¯æŸ¥çœ‹ï¼š
java -jar my-app.jar --version  â†’ æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

ä¾èµ–è·¯å¾„è§£æï¼š
java -jar my-app.jar           â†’ è‡ªåŠ¨åŠ è½½lib/ç›®å½•ä¸‹çš„ä¾èµ–

åº”ç”¨ç¨‹åºå¯åŠ¨ï¼š
java -jar my-app.jar           â†’ æ‰§è¡ŒMain-ClassæŒ‡å®šçš„ä¸»ç±»
```

---

## 5. âš¡ å¯æ‰§è¡ŒJARåˆ¶ä½œ


### 5.1 å¯æ‰§è¡ŒJARåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯å¯æ‰§è¡ŒJARï¼Ÿ**
å¯æ‰§è¡ŒJARå°±åƒæ˜¯Windowsçš„`.exe`æ–‡ä»¶ï¼ŒåŒå‡»å°±èƒ½è¿è¡Œï¼Œæˆ–è€…ç”¨`java -jar`å‘½ä»¤ç›´æ¥æ‰§è¡Œã€‚

**ğŸ”¸ ä¸æ™®é€šJARçš„åŒºåˆ«**
```
æ™®é€šJARï¼š
â”œâ”€â”€ com/example/        â† åªåŒ…å«è‡ªå·±çš„ä»£ç 
â”‚   â””â”€â”€ MyClass.class
â””â”€â”€ META-INF/
    â””â”€â”€ MANIFEST.MF     â† æ²¡æœ‰ä¸»ç±»ä¿¡æ¯

å¯æ‰§è¡ŒJARï¼š
â”œâ”€â”€ com/example/        â† åŒ…å«è‡ªå·±çš„ä»£ç 
â”œâ”€â”€ lib/                â† ä¾èµ–çš„å…¶ä»–JARåŒ…
â”œâ”€â”€ META-INF/
â”‚   â””â”€â”€ MANIFEST.MF     â† åŒ…å«Main-Classä¿¡æ¯
â””â”€â”€ å¯åŠ¨è„šæœ¬/ç±»åŠ è½½å™¨    â† èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†ä¾èµ–
```

### 5.2 ç®€å•å¯æ‰§è¡ŒJARé…ç½®


**ğŸ“ åŸºç¡€é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <!-- æŒ‡å®šä¸»ç±» -->
                <mainClass>com.example.MainApplication</mainClass>
                
                <!-- æ·»åŠ ä¾èµ–åˆ°ç±»è·¯å¾„ -->
                <addClasspath>true</addClasspath>
                
                <!-- ä¾èµ–JARçš„å­˜æ”¾è·¯å¾„ -->
                <classpathPrefix>lib/</classpathPrefix>
            </manifest>
        </archive>
    </configuration>
</plugin>

<!-- å¤åˆ¶ä¾èµ–æ’ä»¶ -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>copy-dependencies</goal>
            </goals>
            <configuration>
                <outputDirectory>${project.build.directory}/lib</outputDirectory>
            </configuration>
        </execution>
    </executions>
</plugin>
```

### 5.3 èƒ–JARï¼ˆFat JARï¼‰åˆ¶ä½œ


**ğŸ”¸ ä»€ä¹ˆæ˜¯èƒ–JARï¼Ÿ**
èƒ–JARæŠŠæ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå°±åƒæ˜¯æŠŠæ‰€æœ‰è¡Œæè£…è¿›ä¸€ä¸ªå¤§ç®±å­ï¼Œåˆ°å“ªé‡Œéƒ½åªéœ€è¦å¸¦è¿™ä¸€ä¸ªæ–‡ä»¶ã€‚

**ğŸ“ ä½¿ç”¨maven-shade-plugin**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>3.4.1</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <transformers>
                    <!-- æŒ‡å®šä¸»ç±» -->
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <mainClass>com.example.MainApplication</mainClass>
                    </transformer>
                </transformers>
            </configuration>
        </execution>
    </executions>
</plugin>
```

### 5.4 Spring Bootå¯æ‰§è¡ŒJAR


**ğŸ“ Spring Bootæ–¹å¼**
```xml
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <configuration>
        <mainClass>com.example.Application</mainClass>
        <!-- åŒ…å«æ‰€æœ‰ä¾èµ– -->
        <includeSystemScope>true</includeSystemScope>
    </configuration>
</plugin>
```

**ğŸ¯ Spring Bootçš„ä¼˜åŠ¿**
- **è‡ªåŠ¨é…ç½®**ï¼šè‡ªåŠ¨å¤„ç†å¤æ‚çš„ç±»åŠ è½½
- **å†…åµŒæœåŠ¡å™¨**ï¼šWebåº”ç”¨å¯ä»¥ç‹¬ç«‹è¿è¡Œ
- **å¼€å‘å‹å¥½**ï¼šæä¾›äº†å¾ˆå¤šä¾¿åˆ©åŠŸèƒ½

---

## 6. ğŸ“‚ èµ„æºåŒ…å«ä¸æ’é™¤


### 6.1 èµ„æºè¿‡æ»¤åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦èµ„æºè¿‡æ»¤ï¼Ÿ**
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ï¼š
- **æ’é™¤æµ‹è¯•æ–‡ä»¶**ï¼šä¸è¦æŠŠæµ‹è¯•ç”¨çš„æ–‡ä»¶æ‰“åŒ…åˆ°ç”Ÿäº§ç¯å¢ƒ
- **åŒ…å«é…ç½®æ–‡ä»¶**ï¼šæ ¹æ®ç¯å¢ƒåŒ…å«ä¸åŒçš„é…ç½®
- **è¿‡æ»¤æ•æ„Ÿä¿¡æ¯**ï¼šæ’é™¤åŒ…å«å¯†ç çš„æ–‡ä»¶

### 6.2 JARèµ„æºè¿‡æ»¤


**ğŸ“ åŒ…å«å’Œæ’é™¤é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <!-- åŒ…å«çš„æ–‡ä»¶ -->
        <includes>
            <include>**/*.class</include>
            <include>**/*.properties</include>
            <include>META-INF/**</include>
        </includes>
        
        <!-- æ’é™¤çš„æ–‡ä»¶ -->
        <excludes>
            <exclude>**/*Test.class</exclude>
            <exclude>**/test-*.properties</exclude>
            <exclude>**/*.md</exclude>
        </excludes>
    </configuration>
</plugin>
```

**ğŸ’¡ è·¯å¾„åŒ¹é…è§„åˆ™**
- `**`ï¼šåŒ¹é…ä»»æ„å±‚çº§ç›®å½•
- `*`ï¼šåŒ¹é…åŒçº§ç›®å½•ä¸‹çš„æ–‡ä»¶
- `*.class`ï¼šåŒ¹é…æ‰€æœ‰.classæ–‡ä»¶
- `**/test/**`ï¼šåŒ¹é…ä»»ä½•testç›®å½•ä¸‹çš„å†…å®¹

### 6.3 WARèµ„æºè¿‡æ»¤


**ğŸ“ Webèµ„æºè¿‡æ»¤é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
        <!-- WARåŒ…æ’é™¤ -->
        <packagingExcludes>
            <!-- æ’é™¤æµ‹è¯•ç›¸å…³ -->
            WEB-INF/classes/**/*Test.class,
            WEB-INF/classes/**/test/**,
            
            <!-- æ’é™¤å¼€å‘å·¥å…·ä¾èµ– -->
            WEB-INF/lib/*-sources.jar,
            WEB-INF/lib/*-javadoc.jar,
            
            <!-- æ’é™¤æœ¬åœ°é…ç½® -->
            WEB-INF/classes/**/local-*.properties
        </packagingExcludes>
        
        <!-- ä»…åŒ…å«ç‰¹å®šèµ„æº -->
        <packagingIncludes>
            WEB-INF/classes/**/*.class,
            WEB-INF/classes/**/*.properties,
            WEB-INF/classes/**/*.xml
        </packagingIncludes>
    </configuration>
</plugin>
```

### 6.4 ç¯å¢ƒç›¸å…³èµ„æºå¤„ç†


**ğŸ“ å¤šç¯å¢ƒé…ç½®**
```xml
<profiles>
    <!-- å¼€å‘ç¯å¢ƒ -->
    <profile>
        <id>dev</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <configuration>
                        <webResources>
                            <resource>
                                <directory>src/main/config/dev</directory>
                                <targetPath>WEB-INF/classes</targetPath>
                            </resource>
                        </webResources>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
    
    <!-- ç”Ÿäº§ç¯å¢ƒ -->
    <profile>
        <id>prod</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <configuration>
                        <webResources>
                            <resource>
                                <directory>src/main/config/prod</directory>
                                <targetPath>WEB-INF/classes</targetPath>
                            </resource>
                        </webResources>
                        <!-- ç”Ÿäº§ç¯å¢ƒæ’é™¤è°ƒè¯•æ–‡ä»¶ -->
                        <packagingExcludes>
                            **/*-debug.js,
                            **/*.map,
                            **/debug/**
                        </packagingExcludes>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles>
```

**ğŸš€ ä½¿ç”¨æ–¹æ³•**
```bash
# å¼€å‘ç¯å¢ƒæ‰“åŒ…
mvn clean package -Pdev

# ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…
mvn clean package -Pprod
```

---

## 7. ğŸ¨ è‡ªå®šä¹‰æ‰“åŒ…ç­–ç•¥


### 7.1 è‡ªå®šä¹‰æ‰“åŒ…éœ€æ±‚


**ğŸ”¸ å¸¸è§è‡ªå®šä¹‰éœ€æ±‚**
```
å®é™…é¡¹ç›®ä¸­çš„å¤æ‚éœ€æ±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éœ€æ±‚ç±»å‹          â”‚   è§£å†³æ–¹æ¡ˆ      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤šæ¨¡å—é¡¹ç›®æ‰“åŒ…    â”‚  Assemblyæ’ä»¶   â”‚
â”‚  åˆ†å±‚éƒ¨ç½²         â”‚  è‡ªå®šä¹‰ç›®å½•ç»“æ„  â”‚
â”‚  ç‰ˆæœ¬åŒ–å‘å¸ƒ       â”‚  åŠ¨æ€æ–‡ä»¶å     â”‚
â”‚  å¤šç¯å¢ƒæ‰“åŒ…       â”‚  Profileé…ç½®    â”‚
â”‚  ä¾èµ–é‡å®šä½       â”‚  Shadeæ’ä»¶      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Assemblyæ’ä»¶è‡ªå®šä¹‰æ‰“åŒ…


**ğŸ“ Assemblyæ’ä»¶é…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>3.4.2</version>
    <configuration>
        <descriptors>
            <descriptor>src/assembly/distribution.xml</descriptor>
        </descriptors>
    </configuration>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

**ğŸ“ Assemblyæè¿°æ–‡ä»¶ç¤ºä¾‹**
```xml
<!-- src/assembly/distribution.xml -->
<assembly>
    <id>distribution</id>
    <formats>
        <format>zip</format>
        <format>tar.gz</format>
    </formats>
    
    <fileSets>
        <!-- ä¸»ç¨‹åºJAR -->
        <fileSet>
            <directory>${project.build.directory}</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        
        <!-- ä¾èµ–JAR -->
        <fileSet>
            <directory>${project.build.directory}/dependency</directory>
            <outputDirectory>lib</outputDirectory>
        </fileSet>
        
        <!-- é…ç½®æ–‡ä»¶ -->
        <fileSet>
            <directory>src/main/config</directory>
            <outputDirectory>config</outputDirectory>
        </fileSet>
        
        <!-- å¯åŠ¨è„šæœ¬ -->
        <fileSet>
            <directory>src/main/scripts</directory>
            <outputDirectory>bin</outputDirectory>
            <fileMode>755</fileMode>
        </fileSet>
    </fileSets>
</assembly>
```

### 7.3 åˆ†æ¨¡å—æ‰“åŒ…ç­–ç•¥


**ğŸ“¦ å¤šæ¨¡å—é¡¹ç›®ç»“æ„**
```
parent-project/
â”œâ”€â”€ common-module/          â† å…¬å…±æ¨¡å—
â”œâ”€â”€ service-module/         â† æœåŠ¡æ¨¡å—
â”œâ”€â”€ web-module/            â† Webæ¨¡å—
â””â”€â”€ assembly-module/       â† æ‰“åŒ…æ¨¡å—
```

**ğŸ“ çˆ¶æ¨¡å—æ‰“åŒ…é…ç½®**
```xml
<!-- åœ¨assembly-moduleä¸­ -->
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <descriptors>
            <descriptor>src/assembly/full-distribution.xml</descriptor>
        </descriptors>
    </configuration>
</plugin>
```

### 7.4 ç‰ˆæœ¬åŒ–å’Œç¯å¢ƒåŒ–æ‰“åŒ…


**ğŸ“ åŠ¨æ€æ–‡ä»¶åé…ç½®**
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <!-- åŠ¨æ€æ–‡ä»¶å -->
        <finalName>${project.artifactId}-${project.version}-${build.profile}-${maven.build.timestamp}</finalName>
        
        <archive>
            <manifestEntries>
                <Build-Environment>${build.profile}</Build-Environment>
                <Build-Timestamp>${maven.build.timestamp}</Build-Timestamp>
                <Git-Commit>${git.commit.id}</Git-Commit>
            </manifestEntries>
        </archive>
    </configuration>
</plugin>

<!-- æ—¶é—´æˆ³æ ¼å¼é…ç½® -->
<properties>
    <maven.build.timestamp.format>yyyyMMdd-HHmm</maven.build.timestamp.format>
</properties>
```

**ğŸ¯ ç”Ÿæˆæ–‡ä»¶ç¤ºä¾‹**
```
target/
â”œâ”€â”€ my-app-1.0.0-dev-20231201-1430.jar
â”œâ”€â”€ my-app-1.0.0-test-20231201-1445.jar
â””â”€â”€ my-app-1.0.0-prod-20231201-1500.jar
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ¯ æ‰“åŒ…æ’ä»¶æ ¸å¿ƒç†è§£**
```
ğŸ”¸ JARæ’ä»¶ï¼šæ™®é€šJavaåº”ç”¨çš„æ ‡å‡†æ‰“åŒ…æ–¹å¼
ğŸ”¸ WARæ’ä»¶ï¼šWebåº”ç”¨çš„ä¸“ç”¨æ‰“åŒ…æ ¼å¼
ğŸ”¸ MANIFEST.MFï¼šåŒ…çš„"èº«ä»½è¯"ï¼Œè®°å½•é‡è¦ä¿¡æ¯
ğŸ”¸ å¯æ‰§è¡ŒJARï¼šèƒ½å¤Ÿç›´æ¥è¿è¡Œçš„ç‹¬ç«‹åº”ç”¨åŒ…
ğŸ”¸ èµ„æºè¿‡æ»¤ï¼šæ§åˆ¶å“ªäº›æ–‡ä»¶åŒ…å«æˆ–æ’é™¤åœ¨åŒ…ä¸­
ğŸ”¸ è‡ªå®šä¹‰æ‰“åŒ…ï¼šæ»¡è¶³å¤æ‚é¡¹ç›®çš„ç‰¹æ®Šæ‰“åŒ…éœ€æ±‚
```

### 8.2 å…³é”®å®è·µè¦ç‚¹


**ğŸ’¡ JARæ‰“åŒ…æœ€ä½³å®è·µ**
```
é€‰æ‹©åˆé€‚çš„æ‰“åŒ…æ–¹å¼ï¼š
â€¢ ç®€å•åº”ç”¨ â†’ maven-jar-plugin + dependencyæ’ä»¶
â€¢ ç‹¬ç«‹è¿è¡Œ â†’ maven-shade-pluginï¼ˆèƒ–JARï¼‰
â€¢ Springåº”ç”¨ â†’ spring-boot-maven-plugin
â€¢ å¤æ‚åˆ†å‘ â†’ maven-assembly-plugin
```

**ğŸ’¡ WARæ‰“åŒ…æœ€ä½³å®è·µ**
```
Webåº”ç”¨æ‰“åŒ…è¦ç‚¹ï¼š
â€¢ åˆç†é…ç½®webResourceså¤„ç†é™æ€èµ„æº
â€¢ ä½¿ç”¨packagingExcludesæ’é™¤ä¸éœ€è¦çš„ä¾èµ–
â€¢ é’ˆå¯¹ä¸åŒç¯å¢ƒä½¿ç”¨Profileé…ç½®
â€¢ æ³¨æ„servletå®¹å™¨æä¾›çš„APIè¦æ’é™¤
```

### 8.3 å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ


**â“ å¸¸è§æ‰“åŒ…é—®é¢˜**

| é—®é¢˜æè¿° | **åŸå› åˆ†æ** | **è§£å†³æ–¹æ¡ˆ** |
|---------|-------------|-------------|
| JARæ— æ³•æ‰§è¡Œ | ç¼ºå°‘Main-Classé…ç½® | åœ¨MANIFEST.MFä¸­æŒ‡å®šä¸»ç±» |
| æ‰¾ä¸åˆ°ä¾èµ–ç±» | ç±»è·¯å¾„é…ç½®é”™è¯¯ | æ£€æŸ¥classpathè®¾ç½® |
| WARéƒ¨ç½²å¤±è´¥ | web.xmlæ ¼å¼é—®é¢˜ | è®¾ç½®failOnMissingWebXml |
| åŒ…æ–‡ä»¶è¿‡å¤§ | åŒ…å«äº†ä¸å¿…è¦çš„ä¾èµ– | ä½¿ç”¨excludesæ’é™¤æ— ç”¨æ–‡ä»¶ |
| å¤šç¯å¢ƒé…ç½®æ··ä¹± | æ²¡æœ‰ä½¿ç”¨Profile | é…ç½®ä¸åŒç¯å¢ƒçš„Profile |

### 8.4 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸš€ é¡¹ç›®åº”ç”¨å»ºè®®**
```
æ ¹æ®é¡¹ç›®ç±»å‹é€‰æ‹©ç­–ç•¥ï¼š

æ¡Œé¢åº”ç”¨/å·¥å…·ï¼š
â†’ maven-shade-pluginåˆ¶ä½œèƒ–JAR
â†’ é…ç½®Main-Classç›´æ¥è¿è¡Œ

Webåº”ç”¨ï¼š
â†’ maven-war-pluginæ ‡å‡†æ‰“åŒ…
â†’ æ ¹æ®æœåŠ¡å™¨æ’é™¤providedä¾èµ–

å¾®æœåŠ¡åº”ç”¨ï¼š
â†’ spring-boot-maven-plugin
â†’ å†…åµŒæœåŠ¡å™¨ï¼Œç‹¬ç«‹éƒ¨ç½²

ä¼ä¸šçº§åº”ç”¨ï¼š
â†’ maven-assembly-plugin
â†’ å¤æ‚çš„ç›®å½•ç»“æ„å’Œå¯åŠ¨è„šæœ¬
```

**ğŸ”§ é…ç½®ç»´æŠ¤å»ºè®®**
- **ç‰ˆæœ¬ç»Ÿä¸€**ï¼šåœ¨çˆ¶POMä¸­ç»Ÿä¸€ç®¡ç†æ’ä»¶ç‰ˆæœ¬
- **é…ç½®å¤ç”¨**ï¼šå°†é€šç”¨é…ç½®æå–åˆ°çˆ¶POMæˆ–Profileä¸­
- **ç¯å¢ƒéš”ç¦»**ï¼šä½¿ç”¨ProfileåŒºåˆ†ä¸åŒç¯å¢ƒçš„é…ç½®
- **æ„å»ºä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨ç¼“å­˜å’Œå¹¶è¡Œæ„å»ºæé«˜æ•ˆç‡

### 8.5 å­¦ä¹ è¿›é˜¶è·¯å¾„


**ğŸ“š æ·±å…¥å­¦ä¹ æ–¹å‘**
```
åŸºç¡€æŒæ¡ â†’ é«˜çº§é…ç½® â†’ ä¼ä¸šå®è·µ
    â†“           â†“           â†“
åŸºæœ¬æ‰“åŒ…    è‡ªå®šä¹‰assembly   CI/CDé›†æˆ
æ’ä»¶é…ç½®    å¤šæ¨¡å—åè°ƒ       ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
èµ„æºè¿‡æ»¤    ç‰ˆæœ¬ç®¡ç†        æ€§èƒ½è°ƒä¼˜
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- Mavenæ‰“åŒ…æ’ä»¶æ˜¯æ„å»ºæµç¨‹çš„å…³é”®ç¯èŠ‚ï¼Œè´Ÿè´£ç”Ÿæˆå¯éƒ¨ç½²çš„åº”ç”¨åŒ…
- JARé€‚åˆæ™®é€šåº”ç”¨ï¼ŒWARé€‚åˆWebåº”ç”¨ï¼Œé€‰æ‹©åˆé€‚çš„æ‰“åŒ…æ–¹å¼å¾ˆé‡è¦
- MANIFEST.MFæ˜¯åŒ…çš„å…ƒä¿¡æ¯è½½ä½“ï¼Œé…ç½®å¥½å®ƒæ‰èƒ½åˆ¶ä½œå‡ºå¯æ‰§è¡Œçš„JAR
- èµ„æºåŒ…å«æ’é™¤æœºåˆ¶å¸®åŠ©æˆ‘ä»¬ç²¾ç¡®æ§åˆ¶åŒ…çš„å†…å®¹ï¼Œé¿å…å†—ä½™å’Œå®‰å…¨é—®é¢˜
- è‡ªå®šä¹‰æ‰“åŒ…ç­–ç•¥å¯ä»¥æ»¡è¶³å¤æ‚é¡¹ç›®çš„ç‰¹æ®Šéœ€æ±‚ï¼ŒAssemblyæ’ä»¶æ˜¯æœ€ä½³é€‰æ‹©