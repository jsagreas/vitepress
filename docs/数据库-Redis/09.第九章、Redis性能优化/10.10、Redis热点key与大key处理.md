---
title: 10ã€Redisçƒ­ç‚¹keyä¸å¤§keyå¤„ç†
---
## ğŸ“š ç›®å½•

1. [Redisæ€§èƒ½é—®é¢˜æ¦‚è¿°](#1-Redisæ€§èƒ½é—®é¢˜æ¦‚è¿°)
2. [çƒ­ç‚¹keyé—®é¢˜åˆ†æ](#2-çƒ­ç‚¹keyé—®é¢˜åˆ†æ)
3. [å¤§keyé—®é¢˜åˆ†æ](#3-å¤§keyé—®é¢˜åˆ†æ)
4. [çƒ­ç‚¹keyè§£å†³æ–¹æ¡ˆ](#4-çƒ­ç‚¹keyè§£å†³æ–¹æ¡ˆ)
5. [å¤§keyè§£å†³æ–¹æ¡ˆ](#5-å¤§keyè§£å†³æ–¹æ¡ˆ)
6. [ç›‘æ§ä¸é¢„é˜²ç­–ç•¥](#6-ç›‘æ§ä¸é¢„é˜²ç­–ç•¥)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš¨ Redisæ€§èƒ½é—®é¢˜æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯çƒ­ç‚¹keyå’Œå¤§key


**ğŸ“– åŸºæœ¬æ¦‚å¿µ**

> **çƒ­ç‚¹key**ï¼šè¢«å¤§é‡å®¢æˆ·ç«¯é¢‘ç¹è®¿é—®çš„Redisé”®ï¼Œå°±åƒå•†åœºé‡Œçš„çˆ†æ¬¾å•†å“ï¼Œæ‰€æœ‰äººéƒ½è¦ä¹°
> **å¤§key**ï¼šå­˜å‚¨æ•°æ®é‡ç‰¹åˆ«å¤§çš„Redisé”®ï¼Œå°±åƒä¸€ä¸ªå·¨å¤§çš„åŒ…è£¹ï¼Œå¤„ç†èµ·æ¥å¾ˆè´¹åŠ²

```
ç”Ÿæ´»åŒ–ç†è§£ï¼š

çƒ­ç‚¹key = ç½‘çº¢å¥¶èŒ¶åº—
â”œâ”€ æ‰€æœ‰äººéƒ½è¦æ’é˜Ÿä¹° â†’ å¤§é‡å¹¶å‘è®¿é—®
â”œâ”€ åº—å‘˜å¿™ä¸è¿‡æ¥ â†’ æœåŠ¡å™¨å‹åŠ›å¤§  
â””â”€ é˜Ÿä¼è¶Šæ’è¶Šé•¿ â†’ å“åº”å˜æ…¢

å¤§key = è¶…å¤§å¿«é€’åŒ…è£¹
â”œâ”€ æ¬è¿è´¹æ—¶è´¹åŠ› â†’ æ“ä½œè€—æ—¶é•¿
â”œâ”€ å ç”¨å¤§é‡ç©ºé—´ â†’ å†…å­˜æ¶ˆè€—å¤§
â””â”€ å½±å“å…¶ä»–åŒ…è£¹ â†’ é˜»å¡å…¶ä»–æ“ä½œ
```

### 1.2 é—®é¢˜çš„ä¸¥é‡æ€§


**âš¡ æ€§èƒ½å½±å“ç¨‹åº¦**

```
Redisæ€§èƒ½é—®é¢˜å½±å“é“¾ï¼š

å•ä¸ªæ…¢æ“ä½œ â†’ CPUå ç”¨é«˜ â†’ é˜»å¡å…¶ä»–è¯·æ±‚ â†’ æ•´ä½“æ€§èƒ½ä¸‹é™
     â†“            â†“           â†“            â†“
  çƒ­ç‚¹key      å†…å­˜å ç”¨     ç½‘ç»œå¸¦å®½      ç”¨æˆ·ä½“éªŒ
  å¤§keyæ“ä½œ    è€—æ—¶        ä¼ è¾“å»¶è¿Ÿ       ç³»ç»Ÿå´©æºƒ
```

| **é—®é¢˜ç±»å‹** | **ç›´æ¥å½±å“** | **é—´æ¥å½±å“** | **ä¸¥é‡ç¨‹åº¦** |
|-------------|-------------|-------------|-------------|
| **çƒ­ç‚¹key** | `æŸä¸ªRedisèŠ‚ç‚¹CPUé£™å‡` | `é›†ç¾¤è´Ÿè½½ä¸å‡ã€é›ªå´©é£é™©` | ğŸ”´ **é«˜** |
| **å¤§key** | `å•æ¬¡æ“ä½œè€—æ—¶é•¿` | `é˜»å¡æ•´ä¸ªRediså®ä¾‹` | ğŸ”´ **æé«˜** |

---

## 2. ğŸ”¥ çƒ­ç‚¹keyé—®é¢˜åˆ†æ


### 2.1 çƒ­ç‚¹keyäº§ç”ŸåŸå› 


**ğŸ¯ å…¸å‹åœºæ™¯åˆ†æ**

```
çƒ­ç‚¹keyäº§ç”Ÿçš„å¸¸è§åœºæ™¯ï¼š

ç”¨æˆ·è¡Œä¸ºé©±åŠ¨ï¼š
è¥é”€æ´»åŠ¨ â†’ é™æ—¶ç§’æ€å•†å“ä¿¡æ¯ â†’ ç¬é—´å¤§é‡æŸ¥è¯¢
çƒ­é—¨è¯é¢˜ â†’ å¾®åšçƒ­æœæ•°æ® â†’ æŒç»­é«˜é¢‘è®¿é—®  
ç›´æ’­æ´»åŠ¨ â†’ åœ¨çº¿äººæ•°ç»Ÿè®¡ â†’ å®æ—¶é¢‘ç¹æ›´æ–°

ä¸šåŠ¡é€»è¾‘è®¾è®¡ï¼š
å…¨å±€é…ç½® â†’ ç³»ç»Ÿé…ç½®å‚æ•° â†’ æ‰€æœ‰è¯·æ±‚éƒ½è¦è¯»å–
ç”¨æˆ·ä¼šè¯ â†’ çƒ­é—¨ç”¨æˆ·ä¿¡æ¯ â†’ ç²‰ä¸é¢‘ç¹è®¿é—®
ç¼“å­˜è®¾è®¡ â†’ å…¬å…±ç¼“å­˜æ•°æ® â†’ å¤šä¸ªæœåŠ¡å…±äº«è®¿é—®
```

**ğŸ“Š çƒ­ç‚¹keyè¯†åˆ«ç‰¹å¾**

| **æŒ‡æ ‡** | **æ­£å¸¸key** | **çƒ­ç‚¹key** | **åˆ¤æ–­æ ‡å‡†** |
|---------|-------------|-------------|-------------|
| **QPS** | `< 1000/s` | `> 10000/s` | `è¶…è¿‡å•æœºå¤„ç†èƒ½åŠ›` |
| **CPUä½¿ç”¨ç‡** | `< 50%` | `> 80%` | `å•ä¸ªkeyå ç”¨è¿‡å¤šCPU` |
| **ç½‘ç»œå¸¦å®½** | `æ­£å¸¸` | `æ¥è¿‘ä¸Šé™` | `ç½‘ç»œæˆä¸ºç“¶é¢ˆ` |
| **å“åº”æ—¶é—´** | `< 1ms` | `> 10ms` | `æ˜æ˜¾æ€§èƒ½ä¸‹é™` |

### 2.2 çƒ­ç‚¹keyå±å®³åˆ†æ


**ğŸ’¥ æ€§èƒ½å½±å“é“¾æ¡**

```
çƒ­ç‚¹keyå±å®³ä¼ æ’­è·¯å¾„ï¼š

å•ä¸ªRediså®ä¾‹
â”œâ”€ CPUä½¿ç”¨ç‡é£™å‡ â†’ å¤„ç†é€Ÿåº¦ä¸‹é™
â”œâ”€ ç½‘ç»œå¸¦å®½å æ»¡ â†’ å…¶ä»–è¯·æ±‚å—å½±å“  
â”œâ”€ å†…å­˜è®¿é—®é¢‘ç¹ â†’ ç¼“å­˜æ•ˆç‡ä¸‹é™
â””â”€ å•ç‚¹æ•…éšœé£é™© â†’ æœåŠ¡å®Œå…¨ä¸å¯ç”¨

é›†ç¾¤æ•´ä½“
â”œâ”€ è´Ÿè½½ä¸å‡è¡¡ â†’ æŸäº›èŠ‚ç‚¹è¿‡è½½
â”œâ”€ é›ªå´©æ•ˆåº” â†’ æ•…éšœèŠ‚ç‚¹å½±å“å…¨å±€
â”œâ”€ æ‰©å®¹å›°éš¾ â†’ çƒ­ç‚¹åˆ†å¸ƒä¸å‡
â””â”€ ç›‘æ§å¤æ‚ â†’ éš¾ä»¥å®šä½é—®é¢˜
```

**ğŸ” å®é™…æ¡ˆä¾‹åˆ†æ**

```bash
# çƒ­ç‚¹keyç›‘æ§å‘½ä»¤
redis-cli --hotkeys           # æŸ¥æ‰¾çƒ­ç‚¹key
redis-cli --bigkeys           # æŸ¥æ‰¾å¤§key
redis-cli monitor             # å®æ—¶ç›‘æ§æ‰€æœ‰æ“ä½œ

# å…¸å‹çƒ­ç‚¹keyç¤ºä¾‹
Key: "product:12345:info"     # çˆ†æ¬¾å•†å“ä¿¡æ¯
QPS: 50000/s                  # æ¯ç§’5ä¸‡æ¬¡æŸ¥è¯¢
èŠ‚ç‚¹CPU: 95%                  # CPUå‡ ä¹æ»¡è½½
ç½‘ç»œ: 800MB/s                 # ç½‘ç»œæ¥è¿‘æé™
```

---

## 3. ğŸ“¦ å¤§keyé—®é¢˜åˆ†æ


### 3.1 ä»€ä¹ˆç®—æ˜¯å¤§key


**ğŸ“ å¤§keyåˆ¤æ–­æ ‡å‡†**

> **å¤§keyå®šä¹‰**ï¼šå ç”¨å†…å­˜è¿‡å¤šæˆ–æ“ä½œè€—æ—¶è¿‡é•¿çš„Redisé”®

```
å¤§keyåˆ¤æ–­ç»´åº¦ï¼š

å†…å­˜ç»´åº¦ï¼š
â”œâ”€ Stringç±»å‹ â†’ è¶…è¿‡10MBç®—å¤§key
â”œâ”€ Listç±»å‹ â†’ è¶…è¿‡10000ä¸ªå…ƒç´ 
â”œâ”€ Hashç±»å‹ â†’ è¶…è¿‡5000ä¸ªå­—æ®µ
â”œâ”€ Setç±»å‹ â†’ è¶…è¿‡5000ä¸ªæˆå‘˜
â””â”€ ZSetç±»å‹ â†’ è¶…è¿‡5000ä¸ªæˆå‘˜

æ“ä½œç»´åº¦ï¼š
â”œâ”€ å•æ¬¡æ“ä½œè¶…è¿‡10ms
â”œâ”€ ç½‘ç»œä¼ è¾“è¶…è¿‡100ms
â””â”€ åºåˆ—åŒ–/ååºåˆ—åŒ–è€—æ—¶é•¿
```

**ğŸ” å¤§keyè¯†åˆ«æ–¹æ³•**

```bash
# 1. ä½¿ç”¨redis-cliå·¥å…·
redis-cli --bigkeys                    # æ‰«æå¤§key

# 2. ä½¿ç”¨memory usageå‘½ä»¤
redis-cli
> MEMORY USAGE mykey                   # æŸ¥çœ‹keyå ç”¨å†…å­˜

# 3. ä½¿ç”¨infoå‘½ä»¤ç›‘æ§
> INFO memory                          # æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ

# 4. è‡ªå®šä¹‰æ‰«æè„šæœ¬
for key in $(redis-cli keys "*"); do
    size=$(redis-cli memory usage $key)
    if [ $size -gt 10485760 ]; then   # 10MB
        echo "Big key found: $key ($size bytes)"
    fi
done
```

### 3.2 å¤§keyäº§ç”ŸåŸå› 


**ğŸ­ å…¸å‹åœºæ™¯å‰–æ**

```
å¤§keyäº§ç”Ÿçš„ä¸šåŠ¡åœºæ™¯ï¼š

æ•°æ®è®¾è®¡ä¸å½“ï¼š
ç”¨æˆ·ç”»åƒ â†’ æŠŠæ‰€æœ‰å±æ€§æ”¾åœ¨ä¸€ä¸ªHash â†’ å‡ åƒä¸ªå­—æ®µ
èŠå¤©è®°å½• â†’ ä¸€ä¸ªListå­˜å‚¨å…¨éƒ¨æ¶ˆæ¯ â†’ å‡ ä¸‡æ¡æ¶ˆæ¯  
å•†å“è¯„è®º â†’ å•ä¸ªå•†å“çš„æ‰€æœ‰è¯„è®º â†’ æ•°æ®é‡å·¨å¤§

ç¼“å­˜ç­–ç•¥å¤±è¯¯ï¼š  
é¡µé¢ç¼“å­˜ â†’ æ•´ä¸ªé¡µé¢HTMLå­˜å‚¨ â†’ å•ä¸ªå€¼å‡ MB
æ—¥å¿—èšåˆ â†’ ä¸€å¤©çš„æ—¥å¿—æ”¾ä¸€ä¸ªkey â†’ æ•°æ®é‡æš´å¢
æ–‡ä»¶ç¼“å­˜ â†’ ç›´æ¥å­˜å‚¨å¤§æ–‡ä»¶å†…å®¹ â†’ è¶…å‡ºå†…å­˜é™åˆ¶
```

### 3.3 å¤§keyå±å®³åˆ†æ


**ğŸ’£ æ€§èƒ½æ€æ‰‹æ•ˆåº”**

```
å¤§keyæ“ä½œå½±å“åˆ†æï¼š

è¯»å–å¤§keyï¼š
â”œâ”€ ç½‘ç»œä¼ è¾“æ—¶é—´é•¿ â†’ ç”¨æˆ·ç­‰å¾…
â”œâ”€ åºåˆ—åŒ–å¼€é”€å¤§ â†’ CPUæ¶ˆè€—é«˜
â””â”€ å†…å­˜æ‹·è´è€—æ—¶ â†’ ç³»ç»Ÿå“åº”æ…¢

å†™å…¥å¤§keyï¼š
â”œâ”€ å†…å­˜åˆ†é…å‹åŠ› â†’ å¯èƒ½è§¦å‘å†…å­˜æ•´ç†
â”œâ”€ æŒä¹…åŒ–è´Ÿæ‹…é‡ â†’ RDB/AOFæ–‡ä»¶å·¨å¤§  
â””â”€ ä¸»ä»åŒæ­¥æ…¢ â†’ å¤åˆ¶å»¶è¿Ÿä¸¥é‡

åˆ é™¤å¤§keyï¼š
â”œâ”€ é˜»å¡Rediså®ä¾‹ â†’ å…¶ä»–æ“ä½œç­‰å¾…
â”œâ”€ å†…å­˜é‡Šæ”¾æ…¢ â†’ å¯èƒ½å¯¼è‡´OOM
â””â”€ åŒæ­¥åˆ é™¤é£é™© â†’ æœåŠ¡æš‚æ—¶ä¸å¯ç”¨
```

**â±ï¸ æ€§èƒ½æµ‹è¯•å¯¹æ¯”**

| **æ“ä½œç±»å‹** | **æ™®é€škey(1KB)** | **å¤§key(10MB)** | **æ€§èƒ½å·®å¼‚** |
|-------------|-----------------|----------------|-------------|
| **GETæ“ä½œ** | `0.1ms` | `100ms` | `æ…¢1000å€` |
| **SETæ“ä½œ** | `0.2ms` | `200ms` | `æ…¢1000å€` |
| **DELæ“ä½œ** | `0.1ms` | `500ms` | `æ…¢5000å€` |
| **ç½‘ç»œä¼ è¾“** | `å¿½ç•¥ä¸è®¡` | `æ˜æ˜¾å»¶è¿Ÿ` | `æˆä¸ºç“¶é¢ˆ` |

---

## 4. ğŸ›¡ï¸ çƒ­ç‚¹keyè§£å†³æ–¹æ¡ˆ


### 4.1 çƒ­ç‚¹keyéš”ç¦»ç­–ç•¥


**ğŸ—ï¸ æ¶æ„éš”ç¦»æ–¹æ¡ˆ**

```
çƒ­ç‚¹keyéš”ç¦»æ¶æ„ï¼š

                    å®¢æˆ·ç«¯è¯·æ±‚
                        â”‚
                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                   â”‚  ä»£ç†å±‚  â”‚
                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚çƒ­ç‚¹Redis â”‚    â”‚æ™®é€šRedis â”‚    â”‚æ™®é€šRedis â”‚
   â”‚ä¸“ç”¨å®ä¾‹  â”‚    â”‚  å®ä¾‹1   â”‚    â”‚  å®ä¾‹2   â”‚  
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ éš”ç¦»å®ç°ç­–ç•¥**

```java
// çƒ­ç‚¹keyè·¯ç”±ç­–ç•¥
@Component
public class RedisKeyRouter {
    
    private final RedisTemplate<String, Object> hotRedis;    // çƒ­ç‚¹ä¸“ç”¨
    private final RedisTemplate<String, Object> normalRedis; // æ™®é€šRedis
    private final Set<String> hotKeyPatterns;               // çƒ­ç‚¹keyæ¨¡å¼
    
    public Object getValue(String key) {
        if (isHotKey(key)) {
            return hotRedis.opsForValue().get(key);  // ä»çƒ­ç‚¹å®ä¾‹è·å–
        }
        return normalRedis.opsForValue().get(key);   // ä»æ™®é€šå®ä¾‹è·å–
    }
    
    private boolean isHotKey(String key) {
        // åˆ¤æ–­æ˜¯å¦ä¸ºçƒ­ç‚¹key
        return hotKeyPatterns.stream()
            .anyMatch(pattern -> key.matches(pattern));
    }
}
```

### 4.2 çƒ­ç‚¹keyé™æµæ–¹æ¡ˆ


**ğŸš° é™æµç­–ç•¥è®¾è®¡**

```
é™æµå±‚æ¬¡æ¶æ„ï¼š

å®¢æˆ·ç«¯é™æµ â†’ ä»£ç†å±‚é™æµ â†’ Rediså®ä¾‹é™æµ
     â†“            â†“            â†“
  æœ¬åœ°ç¼“å­˜      ä»¤ç‰Œæ¡¶ç®—æ³•     æ…¢æŸ¥è¯¢ç›‘æ§
  é¢‘ç‡æ§åˆ¶      æ»‘åŠ¨çª—å£       è¿æ¥æ•°æ§åˆ¶
```

**ğŸ”§ ä»¤ç‰Œæ¡¶é™æµå®ç°**

```java
// åŸºäºä»¤ç‰Œæ¡¶çš„çƒ­ç‚¹keyé™æµ
@Component
public class HotKeyLimiter {
    
    // æ¯ä¸ªçƒ­ç‚¹keyå¯¹åº”ä¸€ä¸ªä»¤ç‰Œæ¡¶
    private final Map<String, RateLimiter> limiters = new ConcurrentHashMap<>();
    
    public boolean tryAccess(String key) {
        if (!isHotKey(key)) {
            return true;  // éçƒ­ç‚¹keyç›´æ¥é€šè¿‡
        }
        
        // è·å–æˆ–åˆ›å»ºé™æµå™¨
        RateLimiter limiter = limiters.computeIfAbsent(key, 
            k -> RateLimiter.create(1000.0)); // é™åˆ¶æ¯ç§’1000æ¬¡
            
        return limiter.tryAcquire(100, TimeUnit.MILLISECONDS);
    }
    
    public Object getWithLimit(String key) {
        if (!tryAccess(key)) {
            throw new RuntimeException("è®¿é—®é¢‘ç‡è¶…é™ï¼š" + key);
        }
        
        return redisTemplate.opsForValue().get(key);
    }
}
```

### 4.3 æœ¬åœ°ç¼“å­˜åˆ†æµ


**ğŸ’¾ å¤šçº§ç¼“å­˜ç­–ç•¥**

```
å¤šçº§ç¼“å­˜æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ°ç¼“å­˜    â”‚    â”‚  Redisç¼“å­˜   â”‚    â”‚   æ•°æ®åº“     â”‚
â”‚  (L1 Cache) â”‚    â”‚  (L2 Cache) â”‚    â”‚  (æ•°æ®æº)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚â€¢ å“åº”æå¿«    â”‚    â”‚â€¢ åˆ†å¸ƒå¼å…±äº«  â”‚    â”‚â€¢ æŒä¹…åŒ–å­˜å‚¨  â”‚
â”‚â€¢ å®¹é‡æœ‰é™    â”‚    â”‚â€¢ å®¹é‡è¾ƒå¤§    â”‚    â”‚â€¢ è®¿é—®è¾ƒæ…¢    â”‚
â”‚â€¢ å‡å°‘ç½‘ç»œIO  â”‚    â”‚â€¢ ç½‘ç»œè®¿é—®    â”‚    â”‚â€¢ æ•°æ®æƒå¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```java
// æœ¬åœ°ç¼“å­˜ + Redisç¼“å­˜ç»„åˆ
@Service
public class CacheService {
    
    // æœ¬åœ°ç¼“å­˜ï¼ˆçƒ­ç‚¹æ•°æ®ï¼‰
    private final Cache<String, Object> localCache = Caffeine.newBuilder()
        .maximumSize(1000)                    // æœ€å¤§1000ä¸ªkey
        .expireAfterWrite(5, TimeUnit.MINUTES) // 5åˆ†é’Ÿè¿‡æœŸ
        .build();
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    public Object get(String key) {
        // 1. å…ˆæŸ¥æœ¬åœ°ç¼“å­˜
        Object value = localCache.getIfPresent(key);
        if (value != null) {
            return value;  // æœ¬åœ°å‘½ä¸­ï¼Œç›´æ¥è¿”å›
        }
        
        // 2. æŸ¥è¯¢Redisç¼“å­˜  
        value = redisTemplate.opsForValue().get(key);
        if (value != null) {
            // çƒ­ç‚¹æ•°æ®æ”¾å…¥æœ¬åœ°ç¼“å­˜
            if (isHotKey(key)) {
                localCache.put(key, value);
            }
            return value;
        }
        
        // 3. ä»æ•°æ®åº“åŠ è½½
        value = loadFromDatabase(key);
        if (value != null) {
            redisTemplate.opsForValue().set(key, value, 30, TimeUnit.MINUTES);
        }
        
        return value;
    }
}
```

### 4.4 çƒ­ç‚¹keyåˆ†ç‰‡ç­–ç•¥


**ğŸ”€ æ•°æ®åˆ†ç‰‡æ–¹æ¡ˆ**

```
çƒ­ç‚¹keyåˆ†ç‰‡æ€è·¯ï¼š

åŸå§‹çƒ­ç‚¹keyï¼šuser:12345:infoï¼ˆè¢«ç–¯ç‹‚è®¿é—®ï¼‰
             â†“
åˆ†ç‰‡åï¼š
â”œâ”€ user:12345:info:0  â”
â”œâ”€ user:12345:info:1  â”œâ”€ å¤šä¸ªå‰¯æœ¬åˆ†æ•£å‹åŠ›
â”œâ”€ user:12345:info:2  â”‚
â””â”€ user:12345:info:3  â”˜
```

```java
// çƒ­ç‚¹keyåˆ†ç‰‡å®ç°
@Component
public class HotKeySharding {
    
    private static final int SHARD_COUNT = 10;  // åˆ†ç‰‡æ•°é‡
    private final RedisTemplate<String, Object> redisTemplate;
    
    public Object getHotKey(String originalKey) {
        // éšæœºé€‰æ‹©ä¸€ä¸ªåˆ†ç‰‡
        int shardIndex = ThreadLocalRandom.current().nextInt(SHARD_COUNT);
        String shardKey = originalKey + ":shard:" + shardIndex;
        
        Object value = redisTemplate.opsForValue().get(shardKey);
        if (value == null) {
            // å¦‚æœåˆ†ç‰‡ä¸å­˜åœ¨ï¼Œä»åŸå§‹æ•°æ®æºåŠ è½½
            value = loadOriginalData(originalKey);
            // åŒæ—¶å†™å…¥æ‰€æœ‰åˆ†ç‰‡
            writeToAllShards(originalKey, value);
        }
        
        return value;
    }
    
    private void writeToAllShards(String originalKey, Object value) {
        for (int i = 0; i < SHARD_COUNT; i++) {
            String shardKey = originalKey + ":shard:" + i;
            redisTemplate.opsForValue().set(shardKey, value, 10, TimeUnit.MINUTES);
        }
    }
}
```

---

## 5. ğŸ“¦ å¤§keyè§£å†³æ–¹æ¡ˆ


### 5.1 å¤§keyæ‹†åˆ†ç­–ç•¥


**âœ‚ï¸ æ•°æ®æ‹†åˆ†åŸåˆ™**

> **æ‹†åˆ†æ€è·¯**ï¼šæŠŠå¤§æ•°æ®åˆ†è§£æˆå°å—ï¼Œå°±åƒæŠŠå¤§æ–‡ä»¶åˆ†å‰²æˆå°æ–‡ä»¶ä¸€æ ·

```
å¤§keyæ‹†åˆ†æ–¹æ¡ˆå¯¹æ¯”ï¼š

åŸå§‹å¤§Hashï¼ˆç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼‰ï¼š
user:12345 â†’ {
  basicInfo: {...},      â† åŸºæœ¬ä¿¡æ¯
  preferences: {...},    â† ç”¨æˆ·åå¥½  
  loginHistory: [...],   â† ç™»å½•å†å²
  orderHistory: [...]    â† è®¢å•å†å²
}

æ‹†åˆ†åçš„å°keyï¼š
â”œâ”€ user:12345:basic     â†’ åŸºæœ¬ä¿¡æ¯ï¼ˆç»å¸¸è®¿é—®ï¼‰
â”œâ”€ user:12345:pref      â†’ åå¥½è®¾ç½®ï¼ˆå¶å°”è®¿é—®ï¼‰
â”œâ”€ user:12345:login     â†’ ç™»å½•å†å²ï¼ˆæŒ‰éœ€è®¿é—®ï¼‰
â””â”€ user:12345:orders    â†’ è®¢å•å†å²ï¼ˆåˆ†é¡µè®¿é—®ï¼‰
```

**ğŸ”§ Hashæ‹†åˆ†å®ç°**

```java
// å¤§Hashæ‹†åˆ†æœåŠ¡
@Service
public class BigHashSplitter {
    
    // åŸå§‹å¤§Hashè¯»å–
    public Map<String, Object> getLargeUserInfo(String userId) {
        return redisTemplate.opsForHash().entries("user:" + userId);
        // é—®é¢˜ï¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®ï¼Œå†…å­˜å’Œç½‘ç»œå‹åŠ›å¤§
    }
    
    // æ‹†åˆ†åçš„è¯»å–ç­–ç•¥
    public UserInfo getUserInfo(String userId) {
        UserInfo user = new UserInfo();
        
        // åªåŠ è½½éœ€è¦çš„éƒ¨åˆ†
        Map<String, Object> basic = redisTemplate.opsForHash()
            .entries("user:" + userId + ":basic");
        user.setBasicInfo(basic);
        
        // æŒ‰éœ€åŠ è½½å…¶ä»–éƒ¨åˆ†
        return user;
    }
    
    // æŒ‰éœ€åŠ è½½ç”¨æˆ·åå¥½
    public Map<String, Object> getUserPreferences(String userId) {
        return redisTemplate.opsForHash()
            .entries("user:" + userId + ":pref");
    }
    
    // åˆ†é¡µåŠ è½½è®¢å•å†å²
    public List<Object> getUserOrders(String userId, int page, int size) {
        long start = page * size;
        long end = start + size - 1;
        return redisTemplate.opsForList()
            .range("user:" + userId + ":orders", start, end);
    }
}
```

### 5.2 Listå¤§keyå¤„ç†


**ğŸ“œ Liståˆ†é¡µç­–ç•¥**

```java
// å¤§Liståˆ†é¡µå¤„ç†
@Component
public class BigListHandler {
    
    private static final int PAGE_SIZE = 100;  // æ¯é¡µ100æ¡
    
    // åˆ†é¡µè¯»å–å¤§List
    public List<Object> getListPage(String key, int page) {
        long start = (long) page * PAGE_SIZE;
        long end = start + PAGE_SIZE - 1;
        
        return redisTemplate.opsForList().range(key, start, end);
    }
    
    // è·å–æ€»é¡µæ•°
    public int getTotalPages(String key) {
        Long size = redisTemplate.opsForList().size(key);
        return (int) Math.ceil(size.doubleValue() / PAGE_SIZE);
    }
    
    // å®‰å…¨åˆ é™¤å¤§List
    public void deleteBigList(String key) {
        while (redisTemplate.opsForList().size(key) > 0) {
            // æ¯æ¬¡åˆ é™¤100ä¸ªå…ƒç´ 
            for (int i = 0; i < 100; i++) {
                redisTemplate.opsForList().rightPop(key);
            }
            // çŸ­æš‚ä¼‘çœ ï¼Œé¿å…é˜»å¡
            try { Thread.sleep(10); } catch (InterruptedException e) {}
        }
        // æœ€ååˆ é™¤key
        redisTemplate.delete(key);
    }
}
```

### 5.3 å¼‚æ­¥å¤„ç†å¤§key


**â° å¼‚æ­¥æ“ä½œç­–ç•¥**

```java
// å¤§keyå¼‚æ­¥å¤„ç†æ¡†æ¶
@Service
public class AsyncBigKeyProcessor {
    
    @Async("bigKeyExecutor")  // å¼‚æ­¥çº¿ç¨‹æ± 
    public CompletableFuture<Void> deleteBigKeyAsync(String key) {
        return CompletableFuture.runAsync(() -> {
            deleteBigKeyInChunks(key);
        });
    }
    
    private void deleteBigKeyInChunks(String key) {
        String type = redisTemplate.type(key).code();
        
        switch (type) {
            case "string":
                redisTemplate.delete(key);
                break;
            case "list":
                deleteListInChunks(key);
                break;
            case "hash":
                deleteHashInChunks(key);
                break;
            case "set":
                deleteSetInChunks(key);
                break;
        }
    }
    
    private void deleteListInChunks(String key) {
        // åˆ†æ‰¹åˆ é™¤Listå…ƒç´ 
        while (redisTemplate.opsForList().size(key) > 0) {
            redisTemplate.opsForList().trim(key, 100, -1);  // ä¿ç•™å100ä¸ªå…ƒç´ 
            Thread.sleep(50);  // é¿å…é˜»å¡å¤ªä¹…
        }
    }
}

// çº¿ç¨‹æ± é…ç½®
@Configuration
public class AsyncConfig {
    
    @Bean("bigKeyExecutor")
    public ThreadPoolTaskExecutor bigKeyExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(2);
        executor.setMaxPoolSize(4);
        executor.setQueueCapacity(100);
        executor.setThreadNamePrefix("BigKey-");
        return executor;
    }
}
```

---

## 6. ğŸ“Š ç›‘æ§ä¸é¢„é˜²ç­–ç•¥


### 6.1 å®æ—¶ç›‘æ§ä½“ç³»


**ğŸ“ˆ ç›‘æ§æŒ‡æ ‡è®¾è®¡**

```
Redisç›‘æ§ä½“ç³»æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç›‘æ§æ•°æ®æ”¶é›†                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ€§èƒ½æŒ‡æ ‡   â”‚   keyæŒ‡æ ‡   â”‚   å†…å­˜æŒ‡æ ‡   â”‚    ç½‘ç»œæŒ‡æ ‡     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚â€¢ QPS        â”‚â€¢ è®¿é—®é¢‘ç‡    â”‚â€¢ å†…å­˜ä½¿ç”¨ç‡  â”‚â€¢ ç½‘ç»œå¸¦å®½       â”‚
â”‚â€¢ å“åº”æ—¶é—´    â”‚â€¢ keyå¤§å°    â”‚â€¢ å†…å­˜ç¢ç‰‡    â”‚â€¢ è¿æ¥æ•°         â”‚
â”‚â€¢ CPUä½¿ç”¨ç‡   â”‚â€¢ è¿‡æœŸæ—¶é—´    â”‚â€¢ é”®å€¼å æ¯”    â”‚â€¢ ç½‘ç»œå»¶è¿Ÿ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‘Šè­¦ä¸å¤„ç†                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   é˜ˆå€¼å‘Šè­¦   â”‚   è¶‹åŠ¿åˆ†æ   â”‚   è‡ªåŠ¨å¤„ç†   â”‚    äººå·¥ä»‹å…¥     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚â€¢ å®æ—¶å‘Šè­¦    â”‚â€¢ å¢é•¿é¢„æµ‹    â”‚â€¢ é™æµå¯åŠ¨    â”‚â€¢ ç´§æ€¥å¤„ç†       â”‚
â”‚â€¢ é‚®ä»¶é€šçŸ¥    â”‚â€¢ å®¹é‡è§„åˆ’    â”‚â€¢ ç¼“å­˜é¢„çƒ­    â”‚â€¢ æ¶æ„è°ƒæ•´       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ” ç›‘æ§å®ç°ç¤ºä¾‹**

```java
// çƒ­ç‚¹keyç›‘æ§æœåŠ¡
@Component
public class RedisMonitorService {
    
    private final Map<String, AtomicLong> keyAccessCount = new ConcurrentHashMap<>();
    private final Map<String, Long> keySize = new ConcurrentHashMap<>();
    
    // è®°å½•keyè®¿é—®æ¬¡æ•°
    public void recordKeyAccess(String key) {
        keyAccessCount.computeIfAbsent(key, k -> new AtomicLong(0)).incrementAndGet();
    }
    
    // æ£€æµ‹çƒ­ç‚¹key
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    public void detectHotKeys() {
        keyAccessCount.forEach((key, count) -> {
            long qps = count.get() / 60;  // è®¡ç®—æ¯ç§’è®¿é—®æ¬¡æ•°
            
            if (qps > 1000) {  // QPSè¶…è¿‡1000è®¤ä¸ºæ˜¯çƒ­ç‚¹
                log.warn("å‘ç°çƒ­ç‚¹key: {} QPS: {}", key, qps);
                handleHotKey(key, qps);
            }
        });
        
        // æ¸…ç©ºè®¡æ•°å™¨
        keyAccessCount.clear();
    }
    
    // æ£€æµ‹å¤§key
    public void checkKeySize(String key) {
        try {
            String type = redisTemplate.type(key).code();
            long size = 0;
            
            switch (type) {
                case "string":
                    String value = redisTemplate.opsForValue().get(key).toString();
                    size = value.getBytes().length;
                    break;
                case "list":
                    size = redisTemplate.opsForList().size(key);
                    break;
                case "hash":
                    size = redisTemplate.opsForHash().size(key);
                    break;
            }
            
            if (size > 10 * 1024 * 1024) {  // è¶…è¿‡10MB
                log.warn("å‘ç°å¤§key: {} å¤§å°: {}MB", key, size / (1024 * 1024));
                handleBigKey(key, size);
            }
            
        } catch (Exception e) {
            log.error("æ£€æŸ¥keyå¤§å°å¤±è´¥: {}", key, e);
        }
    }
}
```

### 6.2 é¢„é˜²ç­–ç•¥ä½“ç³»


**ğŸ›¡ï¸ è®¾è®¡é˜¶æ®µé¢„é˜²**

| **é¢„é˜²ç­–ç•¥** | **è®¾è®¡åŸåˆ™** | **å…·ä½“åšæ³•** | **æ•ˆæœ** |
|-------------|-------------|-------------|---------|
| **æ•°æ®å»ºæ¨¡** | `åˆç†æ‹†åˆ†` | `æŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†key` | `é¿å…å¤§keyäº§ç”Ÿ` |
| **è®¿é—®æ¨¡å¼** | `åˆ†æ•£çƒ­ç‚¹` | `ä½¿ç”¨åˆ†ç‰‡ã€å‰¯æœ¬` | `åˆ†æ•£è®¿é—®å‹åŠ›` |
| **ç¼“å­˜ç­–ç•¥** | `åˆ†çº§ç¼“å­˜` | `æœ¬åœ°+Redis+DB` | `å‡å°‘Rediså‹åŠ›` |
| **ç›‘æ§é¢„è­¦** | `ä¸»åŠ¨å‘ç°` | `å®æ—¶ç›‘æ§+å‘Šè­¦` | `åŠæ—¶å¤„ç†é—®é¢˜` |

**ğŸ”§ é¢„é˜²é…ç½®ç¤ºä¾‹**

```yaml
# Redisé›†ç¾¤é…ç½®ï¼ˆé¢„é˜²çƒ­ç‚¹ï¼‰
redis:
  cluster:
    nodes: 
      - 192.168.1.10:7000
      - 192.168.1.11:7000  
      - 192.168.1.12:7000
    max-redirects: 3
  
  # è¿æ¥æ± é…ç½®
  jedis:
    pool:
      max-active: 200      # æœ€å¤§è¿æ¥æ•°
      max-wait: 2000       # æœ€å¤§ç­‰å¾…æ—¶é—´
      max-idle: 20         # æœ€å¤§ç©ºé—²è¿æ¥
  
# ç›‘æ§é…ç½®
monitoring:
  hotkey:
    qps-threshold: 1000    # çƒ­ç‚¹key QPSé˜ˆå€¼
    check-interval: 60     # æ£€æŸ¥é—´éš”(ç§’)
  bigkey:
    size-threshold: 10MB   # å¤§keyå¤§å°é˜ˆå€¼
    scan-batch: 1000       # æ‰«ææ‰¹æ¬¡å¤§å°
```

### 6.3 åº”æ€¥å¤„ç†é¢„æ¡ˆ


**ğŸš¨ ç´§æ€¥å¤„ç†æµç¨‹**

```
çƒ­ç‚¹keyåº”æ€¥å¤„ç†æµç¨‹ï¼š

å‘ç°çƒ­ç‚¹key â†’ è¯„ä¼°å½±å“ â†’ é€‰æ‹©ç­–ç•¥ â†’ æ‰§è¡Œå¤„ç† â†’ æ•ˆæœéªŒè¯
     â†“           â†“         â†“         â†“         â†“
  ç›‘æ§å‘Šè­¦     ä¸šåŠ¡å½±å“   é™æµ/åˆ†ç‰‡   é…ç½®ç”Ÿæ•ˆ   æ€§èƒ½æ¢å¤
```

```bash
# åº”æ€¥å¤„ç†å‘½ä»¤é›†åˆ

# 1. å¿«é€Ÿè¯†åˆ«é—®é¢˜key
redis-cli --hotkeys
redis-cli --bigkeys  
redis-cli monitor | grep "å¤§é‡å‡ºç°çš„key"

# 2. ä¸´æ—¶é™æµæªæ–½
# åœ¨ä»£ç†å±‚é™åˆ¶è®¿é—®é¢‘ç‡
# æˆ–åœ¨Rediså±‚é¢ä½¿ç”¨CLIENT PAUSEå‘½ä»¤

# 3. å¿«é€Ÿæ•°æ®è¿ç§»
redis-cli --scan --pattern "hotkey*" | xargs redis-cli del  # åˆ é™¤çƒ­ç‚¹key
redis-cli dump key1 | redis-cli -h target-host restore key1 0  # è¿ç§»key

# 4. é›†ç¾¤é‡å¹³è¡¡
redis-cli --cluster rebalance 192.168.1.10:7000  # é›†ç¾¤è´Ÿè½½é‡å¹³è¡¡
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ çƒ­ç‚¹keyï¼šé«˜é¢‘è®¿é—®çš„keyï¼Œä¼šé€ æˆå•ç‚¹å‹åŠ›å’Œæ€§èƒ½ç“¶é¢ˆ
ğŸ”¸ å¤§keyï¼šå ç”¨å†…å­˜è¿‡å¤šçš„keyï¼Œæ“ä½œè€—æ—¶é•¿ä¸”å½±å“æ•´ä½“æ€§èƒ½
ğŸ”¸ éš”ç¦»ç­–ç•¥ï¼šé€šè¿‡ä¸“ç”¨å®ä¾‹ã€åˆ†ç‰‡ç­‰æ–¹å¼åˆ†æ•£å‹åŠ›
ğŸ”¸ é™æµæœºåˆ¶ï¼šä»¤ç‰Œæ¡¶ã€æ»‘åŠ¨çª—å£ç­‰ç®—æ³•æ§åˆ¶è®¿é—®é¢‘ç‡
ğŸ”¸ åˆ†çº§ç¼“å­˜ï¼šæœ¬åœ°ç¼“å­˜+Redisç¼“å­˜+æ•°æ®åº“çš„å¤šå±‚æ¶æ„
ğŸ”¸ æ‹†åˆ†ç­–ç•¥ï¼šå°†å¤§æ•°æ®åˆç†æ‹†åˆ†ä¸ºå°æ•°æ®å—
ğŸ”¸ ç›‘æ§ä½“ç³»ï¼šå®æ—¶ç›‘æ§ã€é¢„è­¦å‘Šè­¦ã€è‡ªåŠ¨å¤„ç†
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ çƒ­ç‚¹keyçš„æœ¬è´¨é—®é¢˜**
```
æ ¸å¿ƒé—®é¢˜ï¼šè®¿é—®åˆ†å¸ƒä¸å‡
æ ¹æœ¬åŸå› ï¼šä¸šåŠ¡ç‰¹æ€§å¯¼è‡´æŸäº›æ•°æ®è¢«é›†ä¸­è®¿é—®
è§£å†³æ€è·¯ï¼šåˆ†æ•£å‹åŠ›ã€éš”ç¦»å½±å“ã€é™åˆ¶é¢‘ç‡
```

**ğŸ”¹ å¤§keyçš„å±å®³æœºåˆ¶**
```
ä¸»è¦å±å®³ï¼šå•æ¬¡æ“ä½œè€—æ—¶é•¿ï¼Œé˜»å¡æ•´ä¸ªå®ä¾‹
å¤„ç†åŸåˆ™ï¼šèƒ½æ‹†å°±æ‹†ï¼Œèƒ½å¼‚æ­¥å°±å¼‚æ­¥ï¼Œèƒ½é¿å…å°±é¿å…
å…³é”®æŠ€å·§ï¼šåˆ†æ‰¹å¤„ç†ã€å¼‚æ­¥æ‰§è¡Œã€å®šæ—¶æ¸…ç†
```

**ğŸ”¹ æ²»ç†ç­–ç•¥çš„é€‰æ‹©**
```
é¢„é˜²ä¼˜äºæ²»ç–—ï¼šè®¾è®¡é˜¶æ®µå°±è¦è€ƒè™‘keyçš„åˆç†æ€§
ç›‘æ§åŠæ—¶å‘ç°ï¼šé€šè¿‡ç›‘æ§æŒ‡æ ‡åŠæ—¶å‘ç°é—®é¢˜  
å¤šç­–ç•¥ç»„åˆï¼šå•ä¸€ç­–ç•¥æ•ˆæœæœ‰é™ï¼Œéœ€è¦ç»„åˆä½¿ç”¨
ä¸šåŠ¡åœºæ™¯é€‚é…ï¼šä¸åŒä¸šåŠ¡åœºæ™¯é€‰æ‹©ä¸åŒçš„è§£å†³æ–¹æ¡ˆ
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ç”Ÿäº§ç¯å¢ƒå®è·µ**
- **ç”µå•†ç§’æ€**ï¼šå•†å“ä¿¡æ¯çƒ­ç‚¹keyåˆ†ç‰‡ï¼Œé™æµä¿æŠ¤
- **ç¤¾äº¤å¹³å°**ï¼šçƒ­é—¨ç”¨æˆ·ä¿¡æ¯ç¼“å­˜ä¼˜åŒ–ï¼Œå¤§keyæ‹†åˆ†
- **æ¸¸æˆæœåŠ¡**ï¼šæ’è¡Œæ¦œæ•°æ®åˆ†é¡µï¼Œç©å®¶æ•°æ®åˆ†ç‰‡  
- **ç›´æ’­å¹³å°**ï¼šæˆ¿é—´ä¿¡æ¯çƒ­ç‚¹å¤„ç†ï¼Œå¼¹å¹•å¤§keyæ‹†åˆ†

**ğŸ”§ è¿ç»´æœ€ä½³å®è·µ**
- **è®¾è®¡é˜¶æ®µ**ï¼šè¯„ä¼°keyçš„è®¿é—®æ¨¡å¼å’Œæ•°æ®å¤§å°
- **å¼€å‘é˜¶æ®µ**ï¼šä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„å’Œç¼“å­˜ç­–ç•¥  
- **æµ‹è¯•é˜¶æ®µ**ï¼šå‹åŠ›æµ‹è¯•éªŒè¯çƒ­ç‚¹keyå¤„ç†æ•ˆæœ
- **è¿ç»´é˜¶æ®µ**ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

**âš ï¸ é¿å…çš„å¸¸è§é”™è¯¯**
```
è®¾è®¡é”™è¯¯ï¼šæŠŠæ‰€æœ‰ç›¸å…³æ•°æ®éƒ½æ”¾åœ¨ä¸€ä¸ªkeyé‡Œ
ç›‘æ§ç¼ºå¤±ï¼šæ²¡æœ‰åŠæ—¶å‘ç°çƒ­ç‚¹keyå’Œå¤§key
å¤„ç†ä¸å½“ï¼šç›´æ¥åˆ é™¤å¤§keyå¯¼è‡´Redisé˜»å¡
åº”æ€¥ä¸è¶³ï¼šæ²¡æœ‰é¢„æ¡ˆï¼Œé—®é¢˜å‡ºç°æ—¶æ‰‹å¿™è„šä¹±
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
çƒ­ç‚¹keyè®¿é—®é›†ä¸­è¦åˆ†æ•£ï¼Œéš”ç¦»åˆ†ç‰‡åŠ é™æµ
å¤§keyæ•°æ®åºå¤§éœ€æ‹†åˆ†ï¼Œåˆ†æ‰¹å¼‚æ­¥ä¸é˜»å¡
ç›‘æ§é¢„è­¦è¦åŠæ—¶ï¼Œé¢„é˜²æ²»ç–—ä¸¤æ‰‹æŠ“
è®¾è®¡é˜¶æ®µæƒ³å‘¨å…¨ï¼Œè¿ç»´é˜¶æ®µæœ‰é¢„æ¡ˆ
```