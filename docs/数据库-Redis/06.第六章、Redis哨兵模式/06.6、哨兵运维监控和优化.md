---
title: 6ã€å“¨å…µè¿ç»´ç›‘æ§å’Œä¼˜åŒ–
---
## ğŸ“š ç›®å½•

1. [å“¨å…µç›‘æ§ä½“ç³»](#1-å“¨å…µç›‘æ§ä½“ç³»)
2. [å“¨å…µå‚æ•°è°ƒä¼˜](#2-å“¨å…µå‚æ•°è°ƒä¼˜)
3. [ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ](#3-ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ)
4. [æ•…éšœå¤„ç†ä¸æ¼”ç»ƒ](#4-æ•…éšœå¤„ç†ä¸æ¼”ç»ƒ)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ‘€ å“¨å…µç›‘æ§ä½“ç³»


### 1.1 ä»€ä¹ˆæ˜¯å“¨å…µç›‘æ§


**ğŸ’¡ ç›‘æ§çš„æœ¬è´¨**
å“¨å…µç›‘æ§å°±åƒç»™ Redis ç³»ç»Ÿå®‰è£…ä¸€å¥—"å¥åº·ä½“æ£€ç³»ç»Ÿ"ï¼Œå®æ—¶è§‚å¯Ÿ Redis ä¸»ä»èŠ‚ç‚¹çš„è¿è¡ŒçŠ¶æ€ï¼Œä¸€æ—¦å‘ç°é—®é¢˜ç«‹å³æŠ¥è­¦å¹¶è‡ªåŠ¨å¤„ç†ã€‚

```
ç®€å•ç†è§£ï¼š
å“¨å…µ = åŒ»ç”Ÿ + æŠ¤å£« + æ€¥æ•‘å‘˜
â€¢ åŒ»ç”Ÿï¼šå®šæœŸä½“æ£€ï¼Œå‘ç°å¥åº·é—®é¢˜
â€¢ æŠ¤å£«ï¼šè®°å½•å„ç§å¥åº·æŒ‡æ ‡
â€¢ æ€¥æ•‘å‘˜ï¼šç´§æ€¥æƒ…å†µä¸‹ç«‹å³æ•‘æ²»

Rediså“¨å…µç›‘æ§ = çŠ¶æ€æ£€æŸ¥ + æŒ‡æ ‡è®°å½• + è‡ªåŠ¨æ•…éšœè½¬ç§»
```

### 1.2 å“¨å…µçŠ¶æ€ç›‘æ§


**ğŸ” ç›‘æ§å“¨å…µè‡ªèº«çŠ¶æ€**

```bash
# æŸ¥çœ‹å“¨å…µåŸºæœ¬ä¿¡æ¯
redis-cli -p 26379 info sentinel

# æŸ¥çœ‹ç›‘æ§çš„ä¸»æœåŠ¡å™¨
redis-cli -p 26379 sentinel masters

# æŸ¥çœ‹å“¨å…µé›†ç¾¤çŠ¶æ€  
redis-cli -p 26379 sentinel sentinels mymaster
```

**ğŸ“Š å…³é”®çŠ¶æ€æŒ‡æ ‡**
- **å“¨å…µæ•°é‡**ï¼šå½“å‰æ´»è·ƒçš„å“¨å…µèŠ‚ç‚¹æ•°
- **ç›‘æ§ç›®æ ‡**ï¼šæ­£åœ¨ç›‘æ§çš„ä¸»ä»èŠ‚ç‚¹
- **æœ€åå¿ƒè·³æ—¶é—´**ï¼šå„èŠ‚ç‚¹æœ€è¿‘ä¸€æ¬¡å“åº”æ—¶é—´
- **æ•…éšœçŠ¶æ€**ï¼šæ˜¯å¦æœ‰èŠ‚ç‚¹è¢«æ ‡è®°ä¸ºä¸‹çº¿

> ğŸ’¡ **å®ç”¨æŠ€å·§**  
> å¯ä»¥å†™ä¸ªç›‘æ§è„šæœ¬ï¼Œæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡å“¨å…µçŠ¶æ€ï¼Œç¡®ä¿ç›‘æ§ç³»ç»Ÿæœ¬èº«æ­£å¸¸è¿è¡Œ

### 1.3 æ•…éšœè½¬ç§»æ—¥å¿—åˆ†æ


**ğŸ“ æ—¥å¿—éƒ½è®°å½•äº†ä»€ä¹ˆ**

æ•…éšœè½¬ç§»æ—¥å¿—å°±åƒåŒ»é™¢çš„ç—…å†è®°å½•ï¼Œè¯¦ç»†è®°å½•äº†æ¯æ¬¡"æŠ¢æ•‘"çš„è¿‡ç¨‹ï¼š

```
å…¸å‹æ•…éšœè½¬ç§»æ—¥å¿—ï¼š
+sdown master mymaster 127.0.0.1 6379    # ä¸»è§‚ä¸‹çº¿æ£€æµ‹
+odown master mymaster 127.0.0.1 6379    # å®¢è§‚ä¸‹çº¿ç¡®è®¤  
+vote-for-leader                          # å¼€å§‹é€‰ä¸¾é¢†å¯¼è€…
+elected-leader                          # é€‰å‡ºé¢†å¯¼å“¨å…µ
+failover-state-select-slave             # é€‰æ‹©æ–°ä¸»èŠ‚ç‚¹
+selected-slave slave 127.0.0.1:6380     # ç¡®å®šæ–°ä¸»èŠ‚ç‚¹
+failover-state-send-slaveof-noone       # æå‡ä»èŠ‚ç‚¹ä¸ºä¸»
+failover-state-wait-promotion           # ç­‰å¾…æå‡å®Œæˆ
+promoted-slave slave 127.0.0.1:6380     # æå‡æˆåŠŸ
+failover-state-reconf-slaves            # é‡æ–°é…ç½®å…¶ä»–ä»èŠ‚ç‚¹
+slave-reconf-sent                       # å‘é€é‡é…ç½®å‘½ä»¤
+slave-reconf-inprog                     # é‡é…ç½®è¿›è¡Œä¸­
+slave-reconf-done                       # é‡é…ç½®å®Œæˆ
+failover-end                            # æ•…éšœè½¬ç§»ç»“æŸ
```

**ğŸ”§ æ—¥å¿—åˆ†æè¦ç‚¹**
```
å…³æ³¨é‡ç‚¹ï¼š
â€¢ æ•…éšœæ£€æµ‹æ—¶é—´ï¼šä»å‘ç°é—®é¢˜åˆ°ç¡®è®¤ä¸‹çº¿ç”¨äº†å¤šä¹…
â€¢ é€‰ä¸¾è¿‡ç¨‹ï¼šå“¨å…µé€‰ä¸¾æ˜¯å¦é¡ºåˆ©ï¼Œæœ‰æ— å†²çª
â€¢ åˆ‡æ¢æ—¶é—´ï¼šä»å¼€å§‹åˆ°å®Œæˆæ€»å…±ç”¨æ—¶
â€¢ æ•°æ®ä¸€è‡´æ€§ï¼šæ–°ä¸»èŠ‚ç‚¹æ•°æ®æ˜¯å¦å®Œæ•´

å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼š
â€¢ é¢‘ç¹false positiveï¼šè¯¯åˆ¤å¯¼è‡´çš„ä¸å¿…è¦åˆ‡æ¢
â€¢ é€‰ä¸¾è¶…æ—¶ï¼šå“¨å…µæ•°é‡ä¸å¤Ÿæˆ–ç½‘ç»œé—®é¢˜
â€¢ æ•°æ®ä¸¢å¤±ï¼šä»èŠ‚ç‚¹æ•°æ®ä¸åŒæ­¥
â€¢ å›åˆ‡å¤±è´¥ï¼šåŸä¸»èŠ‚ç‚¹æ¢å¤åæ— æ³•æ­£ç¡®åŠ å…¥
```

### 1.4 æ€§èƒ½æŒ‡æ ‡ç›‘æ§


**ğŸ“ˆ æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡**

```
Redis ä¸»ä»èŠ‚ç‚¹æŒ‡æ ‡ï¼š
â€¢ è¿æ¥æ•°ï¼šå½“å‰å®¢æˆ·ç«¯è¿æ¥æ•°é‡
â€¢ å†…å­˜ä½¿ç”¨ï¼šå·²ä½¿ç”¨å†…å­˜/æ€»å†…å­˜æ¯”ä¾‹
â€¢ CPUä½¿ç”¨ç‡ï¼šRedisè¿›ç¨‹CPUå ç”¨
â€¢ ç½‘ç»œIOï¼šè¯»å†™æµé‡ç»Ÿè®¡
â€¢ å‘½ä»¤æ‰§è¡Œï¼šQPSï¼ˆæ¯ç§’æŸ¥è¯¢æ•°ï¼‰
â€¢ å»¶è¿Ÿç»Ÿè®¡ï¼šå‘½ä»¤æ‰§è¡Œå¹³å‡æ—¶é—´

å“¨å…µç‰¹æœ‰æŒ‡æ ‡ï¼š
â€¢ å¿ƒè·³å»¶è¿Ÿï¼špingå‘½ä»¤å“åº”æ—¶é—´
â€¢ ä¸»è§‚ä¸‹çº¿æ¬¡æ•°ï¼šå•ä¸ªå“¨å…µåˆ¤æ–­ä¸‹çº¿çš„é¢‘ç‡
â€¢ å®¢è§‚ä¸‹çº¿æ¬¡æ•°ï¼šé›†ä½“ç¡®è®¤ä¸‹çº¿çš„é¢‘ç‡
â€¢ æ•…éšœè½¬ç§»æ¬¡æ•°ï¼šå®é™…å‘ç”Ÿåˆ‡æ¢çš„æ¬¡æ•°
â€¢ é€‰ä¸¾æˆåŠŸç‡ï¼šå“¨å…µé€‰ä¸¾çš„æˆåŠŸæ¯”ä¾‹
```

**ğŸ“Š ç›‘æ§å®ç°ç¤ºä¾‹**
```python
import redis
import time

def monitor_redis_sentinel():
    # è¿æ¥å“¨å…µ
    sentinel = redis.Redis(host='127.0.0.1', port=26379)
    
    while True:
        try:
            # è·å–ä¸»èŠ‚ç‚¹ä¿¡æ¯
            masters = sentinel.execute_command('SENTINEL', 'masters')
            
            for master_info in masters:
                master_name = master_info[1].decode()
                master_ip = master_info[3].decode() 
                master_port = master_info[5].decode()
                
                # æ£€æŸ¥ä¸»èŠ‚ç‚¹çŠ¶æ€
                flags = master_info[9].decode()
                
                print(f"ä¸»èŠ‚ç‚¹ {master_name}: {master_ip}:{master_port}")
                print(f"çŠ¶æ€: {flags}")
                
                # å¦‚æœçŠ¶æ€å¼‚å¸¸ï¼Œå‘é€å‘Šè­¦
                if 'down' in flags:
                    send_alert(f"Redisä¸»èŠ‚ç‚¹å¼‚å¸¸: {master_name}")
                    
        except Exception as e:
            print(f"ç›‘æ§å¼‚å¸¸: {e}")
            
        time.sleep(10)  # æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡

def send_alert(message):
    # å‘é€å‘Šè­¦é€šçŸ¥ï¼ˆé‚®ä»¶ã€çŸ­ä¿¡ã€é’‰é’‰ç­‰ï¼‰
    print(f"ğŸš¨ å‘Šè­¦: {message}")
```

### 1.5 å‘Šè­¦è§„åˆ™è®¾ç½®


**ğŸš¨ åˆç†çš„å‘Šè­¦ç­–ç•¥**

å‘Šè­¦å°±åƒè®¾å®šä½“æ¸©è®¡çš„å‘çƒ§æ ‡å‡†ï¼Œå¤ªæ•æ„Ÿä¼šè¯¯æŠ¥ï¼Œå¤ªè¿Ÿé’ä¼šé”™è¿‡çœŸæ­£çš„é—®é¢˜ï¼š

```
å‘Šè­¦çº§åˆ«è®¾è®¡ï¼š

ğŸ”´ ç´§æ€¥å‘Šè­¦ï¼ˆç«‹å³å¤„ç†ï¼‰ï¼š
â€¢ ä¸»èŠ‚ç‚¹å®•æœº
â€¢ å“¨å…µé›†ç¾¤æ•°é‡ä¸è¶³
â€¢ æ•…éšœè½¬ç§»å¤±è´¥
â€¢ æ•°æ®ä¸¢å¤±

ğŸŸ¡ è­¦å‘Šå‘Šè­¦ï¼ˆåŠæ—¶å…³æ³¨ï¼‰ï¼š
â€¢ å†…å­˜ä½¿ç”¨ç‡ > 80%
â€¢ è¿æ¥æ•°æ¥è¿‘ä¸Šé™
â€¢ ä¸»ä»å»¶è¿Ÿ > 1ç§’
â€¢ å“¨å…µå¿ƒè·³å¼‚å¸¸

ğŸ”µ ä¿¡æ¯å‘Šè­¦ï¼ˆè®°å½•å³å¯ï¼‰ï¼š
â€¢ æ•…éšœè½¬ç§»æˆåŠŸ
â€¢ é…ç½®å˜æ›´
â€¢ æ€§èƒ½æŒ‡æ ‡å˜åŒ–è¶‹åŠ¿
```

**âš™ï¸ å‘Šè­¦è§„åˆ™é…ç½®**
```yaml
# ç›‘æ§é…ç½®ç¤ºä¾‹
redis_monitoring:
  master_down:
    condition: "master_status == 'down'"
    level: "critical"
    action: "immediate_alert"
    
  memory_usage:
    condition: "memory_usage > 80%"
    level: "warning" 
    action: "notify_admin"
    
  replication_lag:
    condition: "repl_lag > 1000ms"
    level: "warning"
    action: "log_and_notify"
```

---

## 2. âš™ï¸ å“¨å…µå‚æ•°è°ƒä¼˜


### 2.1 ä¸ºä»€ä¹ˆéœ€è¦å‚æ•°è°ƒä¼˜


**ğŸ¯ è°ƒä¼˜çš„ç›®çš„**
å°±åƒè°ƒæ•´æ±½è½¦çš„æ€ é€Ÿå’Œæ²¹é—¨å“åº”ï¼Œè®©ç³»ç»Ÿåœ¨ä¸åŒç¯å¢ƒä¸‹éƒ½èƒ½ç¨³å®šé«˜æ•ˆè¿è¡Œï¼š

- **å‡å°‘è¯¯åˆ¤**ï¼šé¿å…ç½‘ç»œæŠ–åŠ¨å¯¼è‡´çš„é”™è¯¯åˆ‡æ¢
- **æé«˜å“åº”é€Ÿåº¦**ï¼šçœŸæ­£æ•…éšœæ—¶èƒ½å¿«é€Ÿåˆ‡æ¢
- **é€‚åº”ç½‘ç»œç¯å¢ƒ**ï¼šä¸åŒç½‘ç»œè´¨é‡éœ€è¦ä¸åŒå‚æ•°
- **å¹³è¡¡ç¨³å®šæ€§**ï¼šåœ¨å¿«é€Ÿå“åº”å’Œç¨³å®šæ€§ä¹‹é—´æ‰¾å¹³è¡¡

### 2.2 æ•…éšœæ£€æµ‹æ—¶é—´ä¼˜åŒ–


**ğŸ• å…³é”®æ—¶é—´å‚æ•°**

```
down-after-millisecondsï¼šå¤šé•¿æ—¶é—´æ— å“åº”åˆ¤å®šä¸ºä¸»è§‚ä¸‹çº¿
é»˜è®¤å€¼ï¼š30000msï¼ˆ30ç§’ï¼‰

è°ƒä¼˜ç­–ç•¥ï¼š
â€¢ ç½‘ç»œç¨³å®šï¼šå¯ä»¥è®¾ç½®ä¸º 15000msï¼Œæé«˜å“åº”é€Ÿåº¦
â€¢ ç½‘ç»œä¸ç¨³å®šï¼šè®¾ç½®ä¸º 60000msï¼Œå‡å°‘è¯¯åˆ¤
â€¢ ç”Ÿäº§ç¯å¢ƒï¼šå»ºè®® 30000-60000ms ä¹‹é—´

parallel-syncsï¼šæ•…éšœè½¬ç§»æ—¶å¹¶è¡ŒåŒæ­¥çš„ä»èŠ‚ç‚¹æ•°
é»˜è®¤å€¼ï¼š1
è°ƒä¼˜ç­–ç•¥ï¼š
â€¢ ä»èŠ‚ç‚¹å°‘ï¼ˆ<5ä¸ªï¼‰ï¼šè®¾ç½®ä¸º2-3ï¼ŒåŠ å¿«æ¢å¤
â€¢ ä»èŠ‚ç‚¹å¤šï¼ˆ>10ä¸ªï¼‰ï¼šä¿æŒ1ï¼Œé¿å…æ–°ä¸»èŠ‚ç‚¹å‹åŠ›è¿‡å¤§
```

**ğŸ”§ å®é™…é…ç½®ç¤ºä¾‹**
```bash
# å“¨å…µé…ç½®æ–‡ä»¶ sentinel.conf
sentinel monitor mymaster 127.0.0.1 6379 2
sentinel down-after-milliseconds mymaster 30000  # 30ç§’æ— å“åº”åˆ¤å®šä¸‹çº¿
sentinel parallel-syncs mymaster 2               # åŒæ—¶2ä¸ªä»èŠ‚ç‚¹åŒæ­¥
sentinel failover-timeout mymaster 180000        # æ•…éšœè½¬ç§»è¶…æ—¶3åˆ†é’Ÿ

# æ ¹æ®ç¯å¢ƒè°ƒæ•´
# å†…ç½‘ç¯å¢ƒï¼ˆç½‘ç»œç¨³å®šï¼‰
sentinel down-after-milliseconds mymaster 15000  # 15ç§’

# è·¨æœºæˆ¿ç¯å¢ƒï¼ˆç½‘ç»œä¸ç¨³å®šï¼‰  
sentinel down-after-milliseconds mymaster 60000  # 60ç§’
```

### 2.3 é€‰ä¸¾è¶…æ—¶å‚æ•°è°ƒæ•´


**ğŸ—³ï¸ é€‰ä¸¾æœºåˆ¶å‚æ•°**

é€‰ä¸¾å°±åƒç­çº§é€‰ç­é•¿ï¼Œéœ€è¦è¶³å¤Ÿæ—¶é—´è®©å¤§å®¶æŠ•ç¥¨ï¼Œä½†ä¹Ÿä¸èƒ½æ‹–å¤ªä¹…ï¼š

```
failover-timeoutï¼šæ•…éšœè½¬ç§»æ€»è¶…æ—¶æ—¶é—´
ä½œç”¨ï¼šåŒ…å«é€‰ä¸¾ã€æå‡ã€é‡é…ç½®çš„æ€»æ—¶é—´é™åˆ¶
é»˜è®¤å€¼ï¼š180000msï¼ˆ3åˆ†é’Ÿï¼‰

è®¡ç®—å…¬å¼ï¼š
failover-timeout â‰¥ down-after-milliseconds Ã— 10

å®é™…è°ƒä¼˜ï¼š
â€¢ å°é›†ç¾¤ï¼ˆ3-5èŠ‚ç‚¹ï¼‰ï¼š120000msï¼ˆ2åˆ†é’Ÿï¼‰
â€¢ å¤§é›†ç¾¤ï¼ˆ10+èŠ‚ç‚¹ï¼‰ï¼š300000msï¼ˆ5åˆ†é’Ÿï¼‰
â€¢ è·¨æœºæˆ¿éƒ¨ç½²ï¼š600000msï¼ˆ10åˆ†é’Ÿï¼‰
```

### 2.4 ç½‘ç»œè¶…æ—¶é…ç½®


**ğŸŒ ç½‘ç»œç›¸å…³å‚æ•°**

```bash
# å“¨å…µå†…éƒ¨é€šä¿¡è¶…æ—¶
sentinel announce-ip 192.168.1.100    # å“¨å…µå¯¹å¤–å®£å‘Šçš„IP
sentinel announce-port 26379           # å“¨å…µå¯¹å¤–å®£å‘Šçš„ç«¯å£

# Rediså®ä¾‹è¿æ¥è¶…æ—¶
# åœ¨redis.confä¸­é…ç½®
timeout 300                            # å®¢æˆ·ç«¯ç©ºé—²è¿æ¥è¶…æ—¶ï¼ˆç§’ï¼‰
tcp-keepalive 60                       # TCP keepalive æ—¶é—´
```

**ğŸ”§ ç½‘ç»œç¯å¢ƒé€‚é…**
```
æœ¬åœ°æœºæˆ¿ï¼ˆä½å»¶è¿Ÿï¼‰ï¼š
down-after-milliseconds: 15000
failover-timeout: 120000

è·¨åŸæœºæˆ¿ï¼ˆä¸­å»¶è¿Ÿï¼‰ï¼š
down-after-milliseconds: 30000  
failover-timeout: 180000

è·¨å›½æœºæˆ¿ï¼ˆé«˜å»¶è¿Ÿï¼‰ï¼š
down-after-milliseconds: 60000
failover-timeout: 300000
```

### 2.5 å¹¶è¡ŒåŒæ­¥é™åˆ¶é…ç½®


**ğŸ“Š åŒæ­¥å‚æ•°è¯´æ˜**

```
parallel-syncs çš„å«ä¹‰ï¼š
æ•…éšœè½¬ç§»æ—¶ï¼Œå…è®¸åŒæ—¶å‘æ–°ä¸»èŠ‚ç‚¹åŒæ­¥çš„ä»èŠ‚ç‚¹æ•°é‡

å½±å“å› ç´ ï¼š
â€¢ æ–°ä¸»èŠ‚ç‚¹æ€§èƒ½ï¼šCPUã€å†…å­˜ã€ç½‘ç»œå¸¦å®½
â€¢ ä»èŠ‚ç‚¹æ•°é‡ï¼šæ€»å…±æœ‰å¤šå°‘ä¸ªä»èŠ‚ç‚¹
â€¢ ä¸šåŠ¡å½±å“ï¼šåŒæ­¥æœŸé—´ä»èŠ‚ç‚¹æ— æ³•æä¾›è¯»æœåŠ¡

æ¨èé…ç½®ï¼š
ä»èŠ‚ç‚¹æ•°é‡    æ¨èparallel-syncs
2-3ä¸ª         2  
4-6ä¸ª         2-3
7-10ä¸ª        3-4
10ä¸ªä»¥ä¸Š      ä¸è¶…è¿‡æ€»æ•°çš„30%
```

**âš¡ é…ç½®ç¤ºä¾‹**
```bash
# 3ä¸ªä»èŠ‚ç‚¹çš„å°é›†ç¾¤
sentinel parallel-syncs mymaster 2

# 8ä¸ªä»èŠ‚ç‚¹çš„ä¸­ç­‰é›†ç¾¤  
sentinel parallel-syncs mymaster 3

# 15ä¸ªä»èŠ‚ç‚¹çš„å¤§é›†ç¾¤
sentinel parallel-syncs mymaster 4
```

---

## 3. ğŸ—ï¸ ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ


### 3.1 å“¨å…µéƒ¨ç½²æ¶æ„å»ºè®®


**ğŸ¯ éƒ¨ç½²åŸåˆ™**

```
ç‰©ç†åˆ†ç¦»åŸåˆ™ï¼š
å“¨å…µèŠ‚ç‚¹è¦å’ŒRedisèŠ‚ç‚¹åˆ†å¼€éƒ¨ç½²ï¼Œé¿å…åŒæ—¶æ•…éšœ

ä¸¾ä¾‹è¯´æ˜ï¼š
é”™è¯¯éƒ¨ç½²ï¼š
æœåŠ¡å™¨Aï¼šRedisä¸» + å“¨å…µ1
æœåŠ¡å™¨Bï¼šRedisä» + å“¨å…µ2  
æœåŠ¡å™¨Cï¼šRedisä» + å“¨å…µ3

é—®é¢˜ï¼šæœåŠ¡å™¨Aå®•æœºï¼ŒåŒæ—¶ä¸¢å¤±Redisä¸»å’Œå“¨å…µ1

æ­£ç¡®éƒ¨ç½²ï¼š
æœåŠ¡å™¨Aï¼šRedisä¸»
æœåŠ¡å™¨Bï¼šRedisä»  
æœåŠ¡å™¨Cï¼šRedisä»
æœåŠ¡å™¨Dï¼šå“¨å…µ1
æœåŠ¡å™¨Eï¼šå“¨å…µ2
æœåŠ¡å™¨Fï¼šå“¨å…µ3
```

**ğŸ¢ æ¨èéƒ¨ç½²æ¶æ„**

```
å°å‹ç¯å¢ƒï¼ˆ3å°æœåŠ¡å™¨ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Server A â”‚  â”‚Server B â”‚  â”‚Server C â”‚
â”‚Redisä¸»  â”‚  â”‚Redisä»  â”‚  â”‚Redisä»  â”‚
â”‚å“¨å…µ1    â”‚  â”‚å“¨å…µ2    â”‚  â”‚å“¨å…µ3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¤§å‹ç¯å¢ƒï¼ˆ6å°æœåŠ¡å™¨ï¼‰ï¼š
Rediså±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Server A â”‚  â”‚Server B â”‚  â”‚Server C â”‚  
â”‚Redisä¸»  â”‚  â”‚Redisä»1 â”‚  â”‚Redisä»2 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å“¨å…µå±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Server D â”‚  â”‚Server E â”‚  â”‚Server F â”‚
â”‚å“¨å…µ1    â”‚  â”‚å“¨å…µ2    â”‚  â”‚å“¨å…µ3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å“¨å…µèŠ‚ç‚¹åˆ†å¸ƒç­–ç•¥


**ğŸ“ æœºæˆ¿åˆ†å¸ƒè€ƒè™‘**

```
å•æœºæˆ¿éƒ¨ç½²ï¼š
ä¼˜ç‚¹ï¼šç½‘ç»œå»¶è¿Ÿä½ï¼Œæ•…éšœæ£€æµ‹å¿«
ç¼ºç‚¹ï¼šæœºæˆ¿æ•´ä½“æ•…éšœæ—¶æ— æ³•å·¥ä½œ
é€‚åˆï¼šå¯¹å¯ç”¨æ€§è¦æ±‚ä¸é«˜çš„ç¯å¢ƒ

è·¨æœºæˆ¿éƒ¨ç½²ï¼š
æœºæˆ¿Aï¼šå“¨å…µ1 + Redisä¸»
æœºæˆ¿Bï¼šå“¨å…µ2 + Redisä»1
æœºæˆ¿Cï¼šå“¨å…µ3 + Redisä»2

ä¼˜ç‚¹ï¼šå®¹ç¾èƒ½åŠ›å¼º
ç¼ºç‚¹ï¼šç½‘ç»œå»¶è¿Ÿå½±å“åˆ¤æ–­å‡†ç¡®æ€§
```

**ğŸ”¢ å“¨å…µæ•°é‡è§„åˆ’**

| RedisèŠ‚ç‚¹æ•° | æ¨èå“¨å…µæ•° | è¯´æ˜ |
|------------|-----------|------|
| **2-3ä¸ª** | `3ä¸ª` | æœ€å°å¯ç”¨é…ç½® |
| **4-10ä¸ª** | `3-5ä¸ª` | å¹³è¡¡æ€§èƒ½å’Œå¯é æ€§ |
| **10ä¸ªä»¥ä¸Š** | `5-7ä¸ª` | å¤§è§„æ¨¡é›†ç¾¤é…ç½® |

> âš ï¸ **é‡è¦æé†’**  
> å“¨å…µæ•°é‡å¿…é¡»æ˜¯å¥‡æ•°ï¼Œè¿™æ ·åœ¨ç½‘ç»œåˆ†åŒºæ—¶èƒ½é¿å…"è„‘è£‚"é—®é¢˜

### 3.3 ç½‘ç»œåˆ†åŒºå¤„ç†æ–¹æ¡ˆ


**ğŸŒ ä»€ä¹ˆæ˜¯ç½‘ç»œåˆ†åŒº**

ç½‘ç»œåˆ†åŒºå°±åƒåœ°éœ‡æŠŠåŸå¸‚åˆ†å‰²æˆå‡ ä¸ªå­¤ç«‹çš„åŒºåŸŸï¼Œå„åŒºåŸŸå†…éƒ¨èƒ½é€šä¿¡ï¼Œä½†åŒºåŸŸä¹‹é—´æ— æ³•è”ç³»ï¼š

```
æ­£å¸¸æƒ…å†µï¼š
å“¨å…µ1 â†â†’ å“¨å…µ2 â†â†’ å“¨å…µ3
  â†“       â†“       â†“
Redisä¸»  Redisä»1 Redisä»2

ç½‘ç»œåˆ†åŒºï¼š
å“¨å…µ1     |     å“¨å…µ2 â†â†’ å“¨å…µ3
  â†“       |       â†“       â†“  
Redisä¸»    |    Redisä»1 Redisä»2

åˆ†åŒºA      |      åˆ†åŒºB
```

**ğŸ›¡ï¸ åˆ†åŒºå¤„ç†ç­–ç•¥**

```bash
# é…ç½®æœ€å°å“¨å…µæ•°é‡è¦æ±‚
sentinel monitor mymaster 127.0.0.1 6379 2  # éœ€è¦2ä¸ªå“¨å…µåŒæ„æ‰è§¦å‘æ•…éšœè½¬ç§»

# è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
sentinel down-after-milliseconds mymaster 30000

# é…ç½®åˆ†åŒºå®¹å¿åº¦
min-slaves-to-write 1              # è‡³å°‘1ä¸ªä»èŠ‚ç‚¹æ‰å…è®¸å†™å…¥
min-slaves-max-lag 10              # ä»èŠ‚ç‚¹å»¶è¿Ÿä¸è¶…è¿‡10ç§’
```

**ğŸ”„ åˆ†åŒºæ¢å¤å¤„ç†**

```
æ¢å¤åœºæ™¯1ï¼šåŸä¸»èŠ‚ç‚¹æ¢å¤
1. æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§
2. å¦‚æœæ•°æ®è½åï¼Œè‡ªåŠ¨å˜ä¸ºæ–°ä¸»çš„ä»èŠ‚ç‚¹
3. å®Œæˆæ•°æ®åŒæ­¥åæ­£å¸¸æä¾›æœåŠ¡

æ¢å¤åœºæ™¯2ï¼šç½‘ç»œå®Œå…¨æ¢å¤
1. å“¨å…µé‡æ–°å‘ç°æ‰€æœ‰èŠ‚ç‚¹
2. ç¡®è®¤å½“å‰æ‹“æ‰‘ç»“æ„æ­£ç¡®æ€§
3. è®°å½•åˆ†åŒºæœŸé—´çš„çŠ¶æ€å˜åŒ–æ—¥å¿—

å¤„ç†è„šæœ¬ç¤ºä¾‹ï¼š
#!/bin/bash
# ç½‘ç»œæ¢å¤åçš„æ£€æŸ¥è„šæœ¬
redis-cli -p 26379 sentinel masters
redis-cli -p 26379 sentinel slaves mymaster
redis-cli -p 26379 sentinel sentinels mymaster
```

### 3.4 è¿ç»´è„šæœ¬å¼€å‘


**ğŸ”¨ å¸¸ç”¨è¿ç»´è„šæœ¬**

<details>
<summary>ğŸ”§ ç‚¹å‡»æŸ¥çœ‹å“¨å…µçŠ¶æ€æ£€æŸ¥è„šæœ¬</summary>

```bash
#!/bin/bash
# sentinel_check.sh - å“¨å…µçŠ¶æ€æ£€æŸ¥è„šæœ¬

SENTINEL_HOSTS=("127.0.0.1:26379" "127.0.0.1:26380" "127.0.0.1:26381")

echo "=== Rediså“¨å…µçŠ¶æ€æ£€æŸ¥ ==="
echo "æ£€æŸ¥æ—¶é—´: $(date)"
echo ""

for host in "${SENTINEL_HOSTS[@]}"; do
    ip=$(echo $host | cut -d: -f1)
    port=$(echo $host | cut -d: -f2)
    
    echo "æ£€æŸ¥å“¨å…µ $host:"
    
    # æ£€æŸ¥å“¨å…µæ˜¯å¦åœ¨çº¿
    if redis-cli -h $ip -p $port ping > /dev/null 2>&1; then
        echo "  âœ… å“¨å…µåœ¨çº¿"
        
        # è·å–ç›‘æ§çš„ä¸»èŠ‚ç‚¹
        masters=$(redis-cli -h $ip -p $port sentinel masters | grep -A 50 "mymaster")
        echo "  ğŸ“Š ç›‘æ§çŠ¶æ€æ­£å¸¸"
    else
        echo "  âŒ å“¨å…µç¦»çº¿"
    fi
    echo ""
done
```
</details>

<details>
<summary>ğŸ”§ ç‚¹å‡»æŸ¥çœ‹æ•…éšœè½¬ç§»æµ‹è¯•è„šæœ¬</summary>

```python
# failover_test.py - æ•…éšœè½¬ç§»æµ‹è¯•è„šæœ¬
import redis
import time
import threading

class FailoverTester:
    def __init__(self):
        self.sentinel = redis.Redis(host='127.0.0.1', port=26379)
        self.running = True
        
    def monitor_writes(self):
        """ç›‘æ§å†™å…¥æ“ä½œçš„æˆåŠŸç‡"""
        success_count = 0
        total_count = 0
        
        while self.running:
            try:
                # è·å–å½“å‰ä¸»èŠ‚ç‚¹
                master_addr = self.sentinel.execute_command(
                    'SENTINEL', 'get-master-addr-by-name', 'mymaster'
                )
                
                if master_addr:
                    master_ip, master_port = master_addr
                    master_client = redis.Redis(host=master_ip, port=master_port)
                    
                    # å°è¯•å†™å…¥æµ‹è¯•æ•°æ®
                    master_client.set(f'test_key_{int(time.time())}', 'test_value')
                    success_count += 1
                    
                total_count += 1
                
                if total_count % 10 == 0:
                    success_rate = (success_count / total_count) * 100
                    print(f"å†™å…¥æˆåŠŸç‡: {success_rate:.1f}% ({success_count}/{total_count})")
                    
            except Exception as e:
                print(f"å†™å…¥å¤±è´¥: {e}")
                total_count += 1
                
            time.sleep(1)
    
    def simulate_failover(self):
        """æ¨¡æ‹Ÿæ•…éšœè½¬ç§»æµ‹è¯•"""
        print("å¼€å§‹æ•…éšœè½¬ç§»æµ‹è¯•...")
        
        # å¯åŠ¨ç›‘æ§çº¿ç¨‹
        monitor_thread = threading.Thread(target=self.monitor_writes)
        monitor_thread.start()
        
        time.sleep(10)  # ç­‰å¾…10ç§’
        print("æ¨¡æ‹Ÿä¸»èŠ‚ç‚¹æ•…éšœ...")
        
        # è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ•…éšœæ¨¡æ‹Ÿä»£ç 
        # æ¯”å¦‚åœæ­¢Redisä¸»è¿›ç¨‹æˆ–æ–­å¼€ç½‘ç»œ
        
        time.sleep(60)  # è§‚å¯Ÿ60ç§’
        self.running = False
        monitor_thread.join()

if __name__ == "__main__":
    tester = FailoverTester()
    tester.simulate_failover()
```
</details>

### 2.3 é€‰ä¸¾è¶…æ—¶å‚æ•°è°ƒæ•´


**â±ï¸ é€‰ä¸¾ç›¸å…³å‚æ•°**

```
é€‰ä¸¾è¶…æ—¶è®¡ç®—ï¼š
é€‰ä¸¾è¶…æ—¶ = failover-timeout / 2

å½±å“å› ç´ ï¼š
â€¢ å“¨å…µæ•°é‡ï¼šè¶Šå¤šéœ€è¦è¶Šé•¿æ—¶é—´è¾¾æˆå…±è¯†
â€¢ ç½‘ç»œå»¶è¿Ÿï¼šè·¨æœºæˆ¿éƒ¨ç½²éœ€è¦æ›´é•¿æ—¶é—´
â€¢ ç³»ç»Ÿè´Ÿè½½ï¼šé«˜è´Ÿè½½æ—¶å“åº”å˜æ…¢

å®é™…é…ç½®ï¼š
# 3ä¸ªå“¨å…µï¼Œæœ¬åœ°æœºæˆ¿
sentinel failover-timeout mymaster 120000  # 2åˆ†é’Ÿ

# 5ä¸ªå“¨å…µï¼Œè·¨æœºæˆ¿
sentinel failover-timeout mymaster 300000  # 5åˆ†é’Ÿ

# æ£€æŸ¥é€‰ä¸¾æ˜¯å¦æ­£å¸¸
redis-cli -p 26379 sentinel election-timeout mymaster
```

---

## 4. ğŸ­ æ•…éšœå¤„ç†ä¸æ¼”ç»ƒ


### 4.1 æ•…éšœæ¼”ç»ƒè®¡åˆ’


**ğŸ¯ ä¸ºä»€ä¹ˆè¦åšæ•…éšœæ¼”ç»ƒ**

å°±åƒæ¶ˆé˜²æ¼”ä¹ ï¼Œå¹³æ—¶å¤šç»ƒä¹ ï¼ŒçœŸæ­£ç«ç¾æ—¶æ‰ä¸ä¼šæ…Œï¼š

```
æ¼”ç»ƒç›®çš„ï¼š
â€¢ éªŒè¯ç›‘æ§å‘Šè­¦æ˜¯å¦åŠæ—¶æœ‰æ•ˆ
â€¢ æµ‹è¯•æ•…éšœè½¬ç§»æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ  
â€¢ ç†Ÿæ‚‰æ•…éšœå¤„ç†æµç¨‹å’Œæ“ä½œå‘½ä»¤
â€¢ è¯„ä¼°ä¸šåŠ¡å½±å“æ—¶é—´å’Œæ•°æ®ä¸¢å¤±é£é™©
â€¢ ä¼˜åŒ–å‚æ•°é…ç½®å’Œè¿ç»´è„šæœ¬
```

**ğŸ“‹ æ¼”ç»ƒæ£€æŸ¥æ¸…å•**

- [x] **å‡†å¤‡é˜¶æ®µ**ï¼šå¤‡ä»½æ•°æ®ï¼Œé€šçŸ¥ç›¸å…³äººå‘˜
- [x] **æ‰§è¡Œé˜¶æ®µ**ï¼šæ¨¡æ‹Ÿæ•…éšœï¼Œè®°å½•å“åº”æ—¶é—´  
- [x] **æ¢å¤é˜¶æ®µ**ï¼šéªŒè¯æœåŠ¡æ­£å¸¸ï¼Œæ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- [x] **æ€»ç»“é˜¶æ®µ**ï¼šåˆ†æé—®é¢˜ï¼Œä¼˜åŒ–é…ç½®å’Œæµç¨‹

### 4.2 å¸¸è§æ•…éšœå¤„ç†


**ğŸš¨ ä¸»èŠ‚ç‚¹å®•æœºå¤„ç†**

```bash
# 1. ç¡®è®¤æ•…éšœè½¬ç§»çŠ¶æ€
redis-cli -p 26379 sentinel masters
redis-cli -p 26379 sentinel slaves mymaster

# 2. æ£€æŸ¥æ–°ä¸»èŠ‚ç‚¹çŠ¶æ€  
redis-cli -h <æ–°ä¸»IP> -p <æ–°ä¸»ç«¯å£> info replication

# 3. éªŒè¯ä»èŠ‚ç‚¹åŒæ­¥
redis-cli -h <ä»èŠ‚ç‚¹IP> -p <ä»èŠ‚ç‚¹ç«¯å£> info replication

# 4. æ£€æŸ¥å®¢æˆ·ç«¯è¿æ¥
redis-cli -h <æ–°ä¸»IP> -p <æ–°ä¸»ç«¯å£> client list
```

**ğŸ”„ åŸä¸»èŠ‚ç‚¹æ¢å¤å¤„ç†**

```bash
# åŸä¸»èŠ‚ç‚¹æ¢å¤åçš„å¤„ç†æµç¨‹

# 1. æ£€æŸ¥åŸä¸»èŠ‚ç‚¹çŠ¶æ€ï¼ˆç°åœ¨åº”è¯¥æ˜¯ä»èŠ‚ç‚¹ï¼‰
redis-cli -h <åŸä¸»IP> -p <åŸä¸»ç«¯å£> info replication

# 2. ç¡®è®¤æ•°æ®åŒæ­¥æ­£å¸¸
redis-cli -h <åŸä¸»IP> -p <åŸä¸»ç«¯å£> info stats

# 3. å¦‚éœ€æ‰‹åŠ¨åˆ‡å›åŸèŠ‚ç‚¹ï¼ˆé€šå¸¸ä¸æ¨èï¼‰
redis-cli -p 26379 sentinel failover mymaster
```

### 4.3 å“¨å…µèŠ‚ç‚¹æ•…éšœå¤„ç†


**ğŸ› ï¸ å“¨å…µå¼‚å¸¸å¤„ç†**

```
åœºæ™¯1ï¼šå•ä¸ªå“¨å…µèŠ‚ç‚¹å®•æœº
å½±å“ï¼šç›‘æ§èƒ½åŠ›ä¸‹é™ï¼Œä½†ä¸å½±å“RedisæœåŠ¡
å¤„ç†ï¼š
1. é‡å¯å“¨å…µæœåŠ¡
2. æ£€æŸ¥é…ç½®æ–‡ä»¶æ­£ç¡®æ€§
3. ç¡®è®¤é‡æ–°åŠ å…¥é›†ç¾¤

åœºæ™¯2ï¼šå¤šæ•°å“¨å…µèŠ‚ç‚¹å®•æœº  
å½±å“ï¼šæ— æ³•è¿›è¡Œæ•…éšœè½¬ç§»
å¤„ç†ï¼š
1. ç´§æ€¥æ¢å¤å“¨å…µèŠ‚ç‚¹
2. å¦‚æ¢å¤å›°éš¾ï¼Œå‡†å¤‡æ‰‹åŠ¨åˆ‡æ¢é¢„æ¡ˆ
3. é€šçŸ¥ä¸šåŠ¡æ–¹ï¼Œå‡†å¤‡é™çº§æ–¹æ¡ˆ

æ¢å¤éªŒè¯å‘½ä»¤ï¼š
redis-cli -p 26379 sentinel sentinels mymaster
redis-cli -p 26379 sentinel ckquorum mymaster
```

---

## 5. ğŸ“Š æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 ç›‘æ§ä½“ç³»è¦ç‚¹


```
ğŸ”¸ ç›‘æ§å±‚æ¬¡ï¼šå“¨å…µè‡ªèº«çŠ¶æ€ + RedisèŠ‚ç‚¹çŠ¶æ€ + ä¸šåŠ¡æŒ‡æ ‡
ğŸ”¸ å‘Šè­¦ç­–ç•¥ï¼šåˆ†çº§å‘Šè­¦ï¼Œé¿å…å‘Šè­¦ç–²åŠ³
ğŸ”¸ æ—¥å¿—åˆ†æï¼šé‡ç‚¹å…³æ³¨æ•…éšœè½¬ç§»è¿‡ç¨‹å’Œå¼‚å¸¸æ¨¡å¼
ğŸ”¸ æ€§èƒ½æŒ‡æ ‡ï¼šå»¶è¿Ÿã€ååé‡ã€é”™è¯¯ç‡æ˜¯æ ¸å¿ƒæŒ‡æ ‡
```

### 5.2 å‚æ•°è°ƒä¼˜è¦ç‚¹


```
ğŸ”¸ æ£€æµ‹æ—¶é—´ï¼šå¹³è¡¡å“åº”é€Ÿåº¦ä¸è¯¯åˆ¤ç‡
ğŸ”¸ é€‰ä¸¾è¶…æ—¶ï¼šç¡®ä¿æœ‰è¶³å¤Ÿæ—¶é—´å®Œæˆé€‰ä¸¾  
ğŸ”¸ å¹¶è¡ŒåŒæ­¥ï¼šæ ¹æ®é›†ç¾¤è§„æ¨¡åˆç†è®¾ç½®
ğŸ”¸ ç½‘ç»œé€‚é…ï¼šæ ¹æ®ç½‘ç»œç¯å¢ƒè°ƒæ•´è¶…æ—¶å‚æ•°
```

### 5.3 ç”Ÿäº§éƒ¨ç½²è¦ç‚¹


```
ğŸ”¸ ç‰©ç†åˆ†ç¦»ï¼šå“¨å…µä¸RedisèŠ‚ç‚¹åˆ†å¼€éƒ¨ç½²
ğŸ”¸ å¥‡æ•°åŸåˆ™ï¼šå“¨å…µæ•°é‡å¿…é¡»ä¸ºå¥‡æ•°
ğŸ”¸ è·¨æœºæˆ¿è€ƒè™‘ï¼šç½‘ç»œå»¶è¿Ÿå¯¹å‚æ•°çš„å½±å“
ğŸ”¸ å®¹ç¾è®¾è®¡ï¼šè€ƒè™‘å„ç§æ•…éšœåœºæ™¯çš„å¤„ç†æ–¹æ¡ˆ
```

### 5.4 å®é™…è¿ç»´æŒ‡å¯¼


| ç¯å¢ƒç±»å‹ | **å“¨å…µæ•°é‡** | **æ£€æµ‹æ—¶é—´** | **æ•…éšœè½¬ç§»è¶…æ—¶** | **éƒ¨ç½²æ–¹å¼** |
|---------|-------------|-------------|----------------|-------------|
| ğŸ  **å¼€å‘ç¯å¢ƒ** | `3ä¸ª` | `15ç§’` | `2åˆ†é’Ÿ` | `å•æœºæˆ¿` |
| ğŸ¢ **ç”Ÿäº§ç¯å¢ƒ** | `3-5ä¸ª` | `30ç§’` | `3åˆ†é’Ÿ` | `è·¨æœºæˆ¿` |  
| ğŸŒ **å¤§è§„æ¨¡é›†ç¾¤** | `5-7ä¸ª` | `60ç§’` | `5åˆ†é’Ÿ` | `å¤šåœ°åŸŸ` |

### 5.5 è¿ç»´æˆåŠŸçš„å…³é”®


> ğŸ’¡ **æ ¸å¿ƒç†å¿µ**  
> ç›‘æ§ä¸æ˜¯ç›®çš„ï¼Œè€Œæ˜¯æ‰‹æ®µã€‚çœŸæ­£çš„ç›®æ ‡æ˜¯ä¿éšœä¸šåŠ¡çš„é«˜å¯ç”¨æ€§

```
æˆåŠŸè¦ç´ ï¼š
1. ğŸ“Š å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼šåŠæ—¶å‘ç°é—®é¢˜
2. âš™ï¸ åˆç†çš„å‚æ•°é…ç½®ï¼šé€‚åº”ç¯å¢ƒç‰¹ç‚¹
3. ğŸ­ å®šæœŸçš„æ•…éšœæ¼”ç»ƒï¼šéªŒè¯æ–¹æ¡ˆæœ‰æ•ˆæ€§
4. ğŸ“‹ æ¸…æ™°çš„æ“ä½œæ‰‹å†Œï¼šæ ‡å‡†åŒ–å¤„ç†æµç¨‹
5. ğŸ‘¥ ç†Ÿç»ƒçš„è¿ç»´å›¢é˜Ÿï¼šå¿«é€Ÿå“åº”å’Œå¤„ç†
```

### 5.6 é¿å…çš„å¸¸è§é”™è¯¯


```
âŒ ç›‘æ§è¿‡åº¦ï¼šè®¾ç½®è¿‡å¤šæ— æ„ä¹‰çš„å‘Šè­¦
âŒ å‚æ•°è¿‡æ•ï¼šé¢‘ç¹è°ƒæ•´å‚æ•°å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®š
âŒ æ¼”ç»ƒä¸è¶³ï¼šåªåœ¨ç†è®ºä¸Šäº†è§£ï¼Œç¼ºä¹å®è·µ
âŒ æ–‡æ¡£ç¼ºå¤±ï¼šæ•…éšœå¤„ç†æ—¶æ‰¾ä¸åˆ°æ“ä½œæ‰‹å†Œ
âŒ å•ç‚¹ä¾èµ–ï¼šç›‘æ§ç³»ç»Ÿæœ¬èº«æˆä¸ºå•ç‚¹æ•…éšœ
```

**è®°å¿†è¦ç‚¹**ï¼š
- å“¨å…µç›‘æ§å¦‚ä½“æ£€åŒ»ç”Ÿï¼ŒåŠæ—¶å‘ç°åŠæ—¶æ²»ç–—
- å‚æ•°è°ƒä¼˜è¦é€‚åº¦ï¼Œè¿‡çŠ¹ä¸åŠéƒ½æœ‰å®³  
- ç”Ÿäº§éƒ¨ç½²æ±‚ç¨³å®šï¼Œç‰©ç†åˆ†ç¦»æ˜¯å…³é”®
- æ•…éšœæ¼”ç»ƒè¦å¸¸åšï¼Œä¸´æ—¶æŠ±ä½›è„šä¸è¡Œ