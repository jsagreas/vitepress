---
title: 5ã€Redissonæ¡†æ¶è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [Redissonæ¡†æ¶ç®€ä»‹](#1-Redissonæ¡†æ¶ç®€ä»‹)
2. [åˆ†å¸ƒå¼é”è¯¦è§£](#2-åˆ†å¸ƒå¼é”è¯¦è§£)
3. [åˆ†å¸ƒå¼å¯¹è±¡ç³»ç»Ÿ](#3-åˆ†å¸ƒå¼å¯¹è±¡ç³»ç»Ÿ)
4. [åˆ†å¸ƒå¼æœåŠ¡åŠŸèƒ½](#4-åˆ†å¸ƒå¼æœåŠ¡åŠŸèƒ½)
5. [é”ç»­æœŸæœºåˆ¶åŸç†](#5-é”ç»­æœŸæœºåˆ¶åŸç†)
6. [æœ€ä½³å®è·µä¸ä¼˜åŒ–](#6-æœ€ä½³å®è·µä¸ä¼˜åŒ–)
7. [ç”Ÿäº§ç¯å¢ƒå®è·µ](#7-ç”Ÿäº§ç¯å¢ƒå®è·µ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ Redissonæ¡†æ¶ç®€ä»‹


### 1.1 ä»€ä¹ˆæ˜¯Redisson


**æ ¸å¿ƒå®šä¹‰**
```
Redisson = Redis + Javaåˆ†å¸ƒå¼æ¡†æ¶
æœ¬è´¨ï¼šåŸºäºRedisçš„Javaåˆ†å¸ƒå¼å¯¹è±¡å’ŒæœåŠ¡æ¡†æ¶
ç›®æ ‡ï¼šè®©Javaå¼€å‘è€…åƒä½¿ç”¨æœ¬åœ°å¯¹è±¡ä¸€æ ·ä½¿ç”¨åˆ†å¸ƒå¼å¯¹è±¡
```

**é€šä¿—ç†è§£**ï¼š
æƒ³è±¡ä½ æœ‰ä¸€æŠŠé”ï¼ŒåŸæœ¬åªèƒ½åœ¨ä¸€å°æœºå™¨ä¸Šä½¿ç”¨ã€‚Redissonå°±åƒæ˜¯æŠŠè¿™æŠŠé”å˜æˆäº†"ç½‘ç»œé”"ï¼Œå¤šå°æœºå™¨éƒ½å¯ä»¥é€šè¿‡ç½‘ç»œæ¥äº‰å¤ºå’Œé‡Šæ”¾è¿™æŠŠé”ã€‚ä¸ä»…ä»…æ˜¯é”ï¼Œè¿Mapã€Listè¿™äº›æ•°æ®ç»“æ„ä¹Ÿèƒ½å˜æˆ"ç½‘ç»œç‰ˆæœ¬"ï¼Œå¤šå°æœºå™¨å…±äº«ä½¿ç”¨ã€‚

### 1.2 åŠŸèƒ½ç‰¹æ€§æ¦‚è§ˆ


**ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**
```
åˆ†å¸ƒå¼é”ç³»ç»Ÿï¼š
â€¢ å¯é‡å…¥é” - åŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–
â€¢ å…¬å¹³é” - æŒ‰è¯·æ±‚é¡ºåºåˆ†é…é”
â€¢ è¯»å†™é” - è¯»è¯»å…±äº«ï¼Œè¯»å†™äº’æ–¥
â€¢ ä¿¡å·é‡ - æ§åˆ¶å¹¶å‘æ•°é‡

åˆ†å¸ƒå¼æ•°æ®ç»“æ„ï¼š
â€¢ åˆ†å¸ƒå¼Map - ç½‘ç»œç‰ˆHashMap
â€¢ åˆ†å¸ƒå¼List - ç½‘ç»œç‰ˆArrayList  
â€¢ åˆ†å¸ƒå¼Set - ç½‘ç»œç‰ˆHashSet
â€¢ åŸå­å¯¹è±¡ - åˆ†å¸ƒå¼è®¡æ•°å™¨

é«˜çº§æœåŠ¡ï¼š
â€¢ è¿œç¨‹æœåŠ¡è°ƒç”¨ - è·¨æœºå™¨æ–¹æ³•è°ƒç”¨
â€¢ åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ - å®šæ—¶ä»»åŠ¡ç®¡ç†
â€¢ åˆ†å¸ƒå¼æ‰§è¡Œå™¨ - å¹¶å‘ä»»åŠ¡å¤„ç†
```

### 1.3 æ¶æ„è®¾è®¡ç†å¿µ


**è®¾è®¡å“²å­¦**
```
Javaç¨‹åºå‘˜è§†è§’çš„åˆ†å¸ƒå¼ç¼–ç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬åœ°ç¼–ç¨‹       â”‚    â”‚   åˆ†å¸ƒå¼ç¼–ç¨‹     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Map map = new   â”‚ => â”‚ RMap map =      â”‚
â”‚ HashMap()       â”‚    â”‚ redisson.getMap â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Lock lock = new â”‚ => â”‚ RLock lock =    â”‚
â”‚ ReentrantLock() â”‚    â”‚ redisson.getLockâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ ¸å¿ƒæ€æƒ³ï¼šAPIä½¿ç”¨æ–¹å¼ä¿æŒä¸€è‡´ï¼Œåº•å±‚è‡ªåŠ¨å¤„ç†ç½‘ç»œé€šä¿¡
```

### 1.4 ç‰ˆæœ¬é€‰æ‹©æŒ‡å¯¼


| **Redissonç‰ˆæœ¬** | **æ”¯æŒRedisç‰ˆæœ¬** | **JDKè¦æ±‚** | **é€‚ç”¨åœºæ™¯** |
|-----------------|------------------|-------------|-------------|
| `3.15.x` | `Redis 2.8+` | `JDK 8+` | ğŸŸ¢ç”Ÿäº§ç¯å¢ƒæ¨è |
| `3.16.x` | `Redis 3.0+` | `JDK 11+` | ğŸŸ¡æ–°ç‰¹æ€§å°é²œ |
| `3.17.x` | `Redis 4.0+` | `JDK 17+` | ğŸ”´æœ€æ–°åŠŸèƒ½ |

**é€‰æ‹©å»ºè®®**ï¼š
- **ç¨³å®šä¼˜å…ˆ**ï¼šé€‰æ‹©3.15.xï¼Œç»è¿‡å……åˆ†æµ‹è¯•
- **åŠŸèƒ½éœ€æ±‚**ï¼šéœ€è¦æ–°ç‰¹æ€§æ—¶é€‰æ‹©æ›´é«˜ç‰ˆæœ¬
- **å…¼å®¹æ€§è€ƒè™‘**ï¼šè€é¡¹ç›®ä¼˜å…ˆè€ƒè™‘å‘åå…¼å®¹

---

## 2. ğŸ” åˆ†å¸ƒå¼é”è¯¦è§£


### 2.1 åˆ†å¸ƒå¼é”çš„æœ¬è´¨é—®é¢˜


**ä¸ºä»€ä¹ˆéœ€è¦åˆ†å¸ƒå¼é”ï¼Ÿ**
```
å•æœºç¯å¢ƒï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨A     â”‚ <- synchronizedå…³é”®å­—è¶³å¤Ÿ
â”‚   Lockå¯¹è±¡  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†å¸ƒå¼ç¯å¢ƒï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨A     â”‚    â”‚   åº”ç”¨B     â”‚    â”‚   åº”ç”¨C     â”‚
â”‚   Lockå¯¹è±¡  â”‚    â”‚   Lockå¯¹è±¡  â”‚    â”‚   Lockå¯¹è±¡  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                   â†“                   â†“
                  éœ€è¦ç»Ÿä¸€çš„é”æœºåˆ¶ï¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚      Redis         â”‚
                 â”‚   åˆ†å¸ƒå¼é”å­˜å‚¨      â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼šå¤šä¸ªåº”ç”¨å¦‚ä½•åè°ƒè®¿é—®å…±äº«èµ„æºï¼Ÿ
```

### 2.2 å¯é‡å…¥é”ï¼ˆRLockï¼‰


**ä»€ä¹ˆæ˜¯å¯é‡å…¥ï¼Ÿ**
```
å¯é‡å…¥çš„å«ä¹‰ï¼š
åŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼Œä¸ä¼šè¢«è‡ªå·±é”æ­»

ç”Ÿæ´»æ¯”å–»ï¼š
ä½ æœ‰å®¶é—¨é’¥åŒ™ï¼Œå¼€é—¨è¿›å±‹åï¼Œå¦‚æœå†æƒ³è¿›å…¥ä¹¦æˆ¿ï¼Œ
ä¸éœ€è¦é‡æ–°ç”³è¯·é’¥åŒ™ï¼Œç›´æ¥ç”¨åŒä¸€æŠŠé’¥åŒ™å¼€ä¹¦æˆ¿é—¨å³å¯
```

**ä»£ç å®ç°ç¤ºä¾‹**
```java
// åŸºç¡€ä½¿ç”¨æ–¹å¼
RedissonClient redisson = Redisson.create();
RLock lock = redisson.getLock("myLock");

// æ ‡å‡†åŠ é”æ¨¡å¼
lock.lock();
try {
    // ä¸šåŠ¡ä»£ç 
    System.out.println("æ‰§è¡Œä¸šåŠ¡é€»è¾‘");
    
    // å¯é‡å…¥ç‰¹æ€§ï¼šåŒä¸€çº¿ç¨‹å¯å†æ¬¡è·å–é”
    lock.lock();  // ä¸ä¼šé˜»å¡ï¼
    try {
        System.out.println("åµŒå¥—ä¸šåŠ¡é€»è¾‘");
    } finally {
        lock.unlock();  // ç¬¬äºŒæ¬¡é‡Šæ”¾
    }
} finally {
    lock.unlock();  // ç¬¬ä¸€æ¬¡é‡Šæ”¾
}
```

**â— é‡è¦å®‰å…¨è§„åˆ™**
- è·å–é”å‡ æ¬¡ï¼Œå°±å¿…é¡»é‡Šæ”¾å‡ æ¬¡
- ä½¿ç”¨try-finallyç¡®ä¿é”ä¸€å®šä¼šè¢«é‡Šæ”¾
- é¿å…åœ¨finallyå—å¤–é‡Šæ”¾é”

### 2.3 å…¬å¹³é”ï¼ˆFair Lockï¼‰


**ä»€ä¹ˆæ˜¯å…¬å¹³æ€§ï¼Ÿ**
```
éå…¬å¹³é”ï¼ˆé»˜è®¤ï¼‰ï¼š
çº¿ç¨‹Aï¼šæˆ‘è¦é”ï¼
çº¿ç¨‹Bï¼šæˆ‘è¦é”ï¼  
çº¿ç¨‹Cï¼šæˆ‘è¦é”ï¼
Redisï¼šè°å…ˆæŠ¢åˆ°ç®—è°çš„ï¼ˆå¯èƒ½æ’é˜Ÿï¼‰

å…¬å¹³é”ï¼š
çº¿ç¨‹Aï¼šæˆ‘è¦é”ï¼ï¼ˆæ’é˜Ÿå·1ï¼‰
çº¿ç¨‹Bï¼šæˆ‘è¦é”ï¼ï¼ˆæ’é˜Ÿå·2ï¼‰
çº¿ç¨‹Cï¼šæˆ‘è¦é”ï¼ï¼ˆæ’é˜Ÿå·3ï¼‰  
Redisï¼šä¸¥æ ¼æŒ‰ç…§æ’é˜Ÿé¡ºåºåˆ†é…
```

**ä½¿ç”¨åœºæ™¯å¯¹æ¯”**
```java
// éå…¬å¹³é”ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
RLock lock = redisson.getLock("orderLock");

// å…¬å¹³é”ï¼ˆä¿è¯é¡ºåºï¼‰
RLock fairLock = redisson.getFairLock("fairOrderLock");

// å®é™…åº”ç”¨åœºæ™¯
if (éœ€è¦ä¸¥æ ¼æŒ‰ç…§è¯·æ±‚é¡ºåºå¤„ç†) {
    ä½¿ç”¨å…¬å¹³é”;  // ä¾‹ï¼šé“¶è¡Œæ’é˜Ÿå–å·
} else {
    ä½¿ç”¨éå…¬å¹³é”;  // ä¾‹ï¼šæŠ¢è´­å•†å“
}
```

### 2.4 è¯»å†™é”ï¼ˆReadWriteLockï¼‰


**è¯»å†™åˆ†ç¦»çš„æ™ºæ…§**
```
è¯»å†™é”çš„æ ¸å¿ƒè§„åˆ™ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é”ç±»å‹ â”‚ è¯»æ“ä½œ  â”‚ å†™æ“ä½œ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¢è¯»é”   â”‚   å…è®¸   â”‚  é˜»å¡   â”‚
â”‚ ğŸ”´å†™é”   â”‚   é˜»å¡   â”‚  é˜»å¡   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é€šä¿—ç†è§£ï¼š
è¯»æ•°æ®ï¼šå¤šäººå¯ä»¥åŒæ—¶çœ‹ä¹¦ï¼ˆå…±äº«ï¼‰
å†™æ•°æ®ï¼šåªèƒ½ä¸€äººä¿®æ”¹ï¼Œå…¶ä»–äººç­‰å¾…ï¼ˆæ’æ–¥ï¼‰
```

**å®é™…åº”ç”¨ç¤ºä¾‹**
```java
RReadWriteLock rwlock = redisson.getReadWriteLock("configLock");

// è¯»å–é…ç½®ï¼ˆå¤šçº¿ç¨‹å¯å¹¶å‘ï¼‰
RLock readLock = rwlock.readLock();
readLock.lock();
try {
    String config = getConfigFromRedis();
    return config;
} finally {
    readLock.unlock();
}

// æ›´æ–°é…ç½®ï¼ˆç‹¬å æ“ä½œï¼‰
RLock writeLock = rwlock.writeLock();  
writeLock.lock();
try {
    updateConfigToRedis(newConfig);
} finally {
    writeLock.unlock();
}
```

### 2.5 ä¿¡å·é‡ï¼ˆSemaphoreï¼‰


**ä»€ä¹ˆæ˜¯ä¿¡å·é‡ï¼Ÿ**
```
ä¿¡å·é‡ = åœè½¦åœºç®¡ç†ç³»ç»Ÿ

åœè½¦åœºæœ‰10ä¸ªè½¦ä½ï¼ˆä¿¡å·é‡å€¼=10ï¼‰ï¼š
ğŸš— è½¦æ¥äº†ï¼Œæœ‰ç©ºä½å°±åœï¼ˆacquireæˆåŠŸï¼‰
ğŸš— è½¦ä½æ»¡äº†ï¼Œæ’é˜Ÿç­‰å¾…ï¼ˆacquireé˜»å¡ï¼‰  
ğŸš™ è½¦èµ°äº†ï¼Œé‡Šæ”¾è½¦ä½ï¼ˆreleaseï¼‰
ğŸš— ç­‰å¾…çš„è½¦å¯ä»¥è¿›å…¥

ç¼–ç¨‹ä¸­çš„ä¿¡å·é‡ï¼š
æ§åˆ¶åŒæ—¶è®¿é—®æŸèµ„æºçš„çº¿ç¨‹æ•°é‡
```

**ä»£ç ç¤ºä¾‹**
```java
// åˆ›å»ºä¿¡å·é‡ï¼Œå…è®¸3ä¸ªå¹¶å‘
RSemaphore semaphore = redisson.getSemaphore("connectionPool");
semaphore.trySetPermits(3);  // è®¾ç½®è®¸å¯è¯æ•°é‡

// è·å–è®¸å¯è¯
if (semaphore.tryAcquire(1, 5, TimeUnit.SECONDS)) {
    try {
        // æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥æ“ä½œ
        System.out.println("è·å¾—è¿æ¥ï¼Œå¤„ç†ä¸šåŠ¡");
        Thread.sleep(2000);
    } finally {
        semaphore.release();  // é‡Šæ”¾è®¸å¯è¯
    }
} else {
    System.out.println("è·å–è¿æ¥è¶…æ—¶");
}
```

---

## 3. ğŸ“¦ åˆ†å¸ƒå¼å¯¹è±¡ç³»ç»Ÿ


### 3.1 åˆ†å¸ƒå¼é›†åˆçš„æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é›†åˆï¼Ÿ**
```
æœ¬åœ°é›†åˆï¼šæ•°æ®å­˜åœ¨JVMå†…å­˜ä¸­
List<String> localList = new ArrayList<>();
localList.add("item1");  // åªæœ‰å½“å‰JVMèƒ½çœ‹åˆ°

åˆ†å¸ƒå¼é›†åˆï¼šæ•°æ®å­˜åœ¨Redisä¸­ï¼Œå¤šä¸ªJVMå…±äº«
RList<String> distributedList = redisson.getList("myList");
distributedList.add("item1");  // æ‰€æœ‰è¿æ¥çš„åº”ç”¨éƒ½èƒ½çœ‹åˆ°

ä½¿ç”¨åœºæ™¯ï¼šå¤šä¸ªåº”ç”¨éœ€è¦å…±äº«åŒä¸€ä¸ªæ•°æ®ç»“æ„
```

### 3.2 åˆ†å¸ƒå¼Mapè¯¦è§£


**RMapçš„ç‰¹è‰²åŠŸèƒ½**
```java
RMap<String, User> userMap = redisson.getMap("userCache");

// åŸºæœ¬æ“ä½œï¼ˆä¸HashMapä¸€è‡´ï¼‰
userMap.put("user1", new User("å¼ ä¸‰", 25));
User user = userMap.get("user1");

// åˆ†å¸ƒå¼ç‰¹æœ‰åŠŸèƒ½
// 1. è¿‡æœŸæ—¶é—´è®¾ç½®
userMap.put("sessionUser", user, 30, TimeUnit.MINUTES);

// 2. æ¡ä»¶æ“ä½œï¼ˆåŸå­æ€§ï¼‰
User oldUser = userMap.putIfAbsent("user2", new User("æå››", 30));

// 3. æ‰¹é‡æ“ä½œ
Map<String, User> batch = new HashMap<>();
batch.put("user3", new User("ç‹äº”", 35));
batch.put("user4", new User("èµµå…­", 28));
userMap.putAll(batch);  // åŸå­æ€§æ‰¹é‡æ’å…¥
```

**ä¸RedisåŸç”Ÿå‘½ä»¤å¯¹æ¯”**
| **Redissonæ“ä½œ** | **å¯¹åº”Rediså‘½ä»¤** | **ä¼˜åŠ¿è¯´æ˜** |
|-----------------|------------------|-------------|
| `map.put(k,v)` | `HSET key field value` | ğŸŸ¢è‡ªåŠ¨åºåˆ—åŒ–Javaå¯¹è±¡ |
| `map.get(k)` | `HGET key field` | ğŸŸ¢è‡ªåŠ¨ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ |
| `map.putIfAbsent()` | `HSETNX key field value` | ğŸŸ¢åŸå­æ€§æ“ä½œä¿è¯ |

### 3.3 åŸå­å¯¹è±¡æ“ä½œ


**åˆ†å¸ƒå¼åŸå­è®¡æ•°å™¨**
```java
// åˆ›å»ºåŸå­è®¡æ•°å™¨
RAtomicLong counter = redisson.getAtomicLong("pageViews");

// çº¿ç¨‹å®‰å…¨çš„é€’å¢æ“ä½œ
long currentCount = counter.incrementAndGet();
System.out.println("å½“å‰é¡µé¢è®¿é—®é‡ï¼š" + currentCount);

// æ¯”è¾ƒå¹¶è®¾ç½®ï¼ˆCASæ“ä½œï¼‰
boolean success = counter.compareAndSet(100, 200);
if (success) {
    System.out.println("æˆåŠŸä»100æ›´æ–°åˆ°200");
}

å®é™…åº”ç”¨ï¼š
â€¢ å…¨å±€IDç”Ÿæˆå™¨
â€¢ è®¿é—®é‡ç»Ÿè®¡
â€¢ åº“å­˜æ•°é‡æ§åˆ¶
```

**åˆ†å¸ƒå¼BitSet**
```java
RBitSet bitSet = redisson.getBitSet("userOnlineStatus");

// è®¾ç½®ç”¨æˆ·åœ¨çº¿çŠ¶æ€
bitSet.set(userId);        // ç”¨æˆ·ä¸Šçº¿
bitSet.clear(userId);      // ç”¨æˆ·ä¸‹çº¿  
boolean isOnline = bitSet.get(userId);  // æ£€æŸ¥çŠ¶æ€

ä¼˜åŠ¿ï¼š
â€¢ å†…å­˜æ•ˆç‡æé«˜ï¼ˆ1ä½è¡¨ç¤º1ä¸ªç”¨æˆ·ï¼‰
â€¢ æ”¯æŒå¤§è§„æ¨¡ç”¨æˆ·çŠ¶æ€ç®¡ç†
â€¢ åŸå­æ€§æ“ä½œä¿è¯æ•°æ®ä¸€è‡´æ€§
```

---

## 4. ğŸŒ åˆ†å¸ƒå¼æœåŠ¡åŠŸèƒ½


### 4.1 è¿œç¨‹æœåŠ¡è°ƒç”¨


**ä»€ä¹ˆæ˜¯è¿œç¨‹æœåŠ¡ï¼Ÿ**
```
ä¼ ç»Ÿæ–¹å¼ï¼šåº”ç”¨é—´é€šä¿¡éœ€è¦HTTP/RPCæ¡†æ¶

Redissonæ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨A     â”‚                    â”‚   åº”ç”¨B     â”‚
â”‚             â”‚                    â”‚             â”‚
â”‚ è°ƒç”¨service â”‚ â”€â”€â”€ Redisé€šé“ â”€â”€â†’  â”‚ æ‰§è¡Œservice â”‚
â”‚ .calculate()â”‚                    â”‚ .calculate()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ„Ÿè§‰å°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼Œå®é™…æ˜¯è·¨ç½‘ç»œè°ƒç”¨ï¼
```

**ä»£ç å®ç°ç¤ºä¾‹**
```java
// å®šä¹‰æœåŠ¡æ¥å£
public interface MathService {
    int add(int a, int b);
    double calculate(String expression);
}

// æœåŠ¡æä¾›æ–¹ï¼ˆåº”ç”¨Bï¼‰
public class MathServiceImpl implements MathService {
    public int add(int a, int b) {
        return a + b;
    }
    
    public double calculate(String expression) {
        // å¤æ‚è®¡ç®—é€»è¾‘
        return result;
    }
}

// æ³¨å†ŒæœåŠ¡
RRemoteService remoteService = redisson.getRemoteService();
remoteService.register(MathService.class, new MathServiceImpl());

// æœåŠ¡è°ƒç”¨æ–¹ï¼ˆåº”ç”¨Aï¼‰
MathService mathService = remoteService.get(MathService.class);
int result = mathService.add(10, 20);  // å®é™…åœ¨åº”ç”¨Bä¸­æ‰§è¡Œ
```

### 4.2 åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦


**ä»»åŠ¡è°ƒåº¦å™¨çš„ä½œç”¨**
```
å•æœºå®šæ—¶ä»»åŠ¡é—®é¢˜ï¼š
åº”ç”¨A: æ¯å¤©å‡Œæ™¨2ç‚¹æ¸…ç†æ—¥å¿—
åº”ç”¨B: æ¯å¤©å‡Œæ™¨2ç‚¹æ¸…ç†æ—¥å¿—  
åº”ç”¨C: æ¯å¤©å‡Œæ™¨2ç‚¹æ¸…ç†æ—¥å¿—
ç»“æœï¼šåŒä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ3éï¼æµªè´¹èµ„æº

åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦è§£å†³æ–¹æ¡ˆï¼š
åªæœ‰ä¸€ä¸ªåº”ç”¨å®ä¾‹ä¼šæ‰§è¡Œä»»åŠ¡ï¼Œå…¶ä»–å®ä¾‹è‡ªåŠ¨è·³è¿‡
```

**ä½¿ç”¨ç¤ºä¾‹**
```java
RScheduledExecutorService executor = 
    redisson.getExecutorService("taskScheduler");

// å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡
executor.schedule(() -> {
    System.out.println("5åˆ†é’Ÿåæ‰§è¡Œçš„ä»»åŠ¡");
    cleanupTempFiles();
}, 5, TimeUnit.MINUTES);

// å®šæœŸæ‰§è¡Œä»»åŠ¡
executor.scheduleAtFixedRate(() -> {
    System.out.println("æ¯å°æ—¶æ‰§è¡Œçš„æ•°æ®åŒæ­¥ä»»åŠ¡");
    syncDataFromApi();
}, 0, 1, TimeUnit.HOURS);

å…³é”®ç‰¹ç‚¹ï¼š
â€¢ åˆ†å¸ƒå¼ç¯å¢ƒä¸‹åªä¼šåœ¨ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œ
â€¢ æ”¯æŒèŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨è½¬ç§»åˆ°å…¶ä»–èŠ‚ç‚¹
â€¢ ä»»åŠ¡çŠ¶æ€åœ¨Redisä¸­æŒä¹…åŒ–
```

### 4.3 åˆ†å¸ƒå¼æ‰§è¡Œå™¨


**æ‰¹é‡ä»»åŠ¡å¤„ç†**
```java
RExecutorService executor = redisson.getExecutorService("batchProcessor");

// æäº¤å¤šä¸ªå¹¶å‘ä»»åŠ¡
List<Future<String>> futures = new ArrayList<>();
for (int i = 0; i < 10; i++) {
    final int taskId = i;
    Future<String> future = executor.submit(() -> {
        return "å¤„ç†ä»»åŠ¡" + taskId + "çš„ç»“æœ";
    });
    futures.add(future);
}

// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
for (Future<String> future : futures) {
    String result = future.get();
    System.out.println(result);
}

åº”ç”¨åœºæ™¯ï¼š
â€¢ å¤§æ–‡ä»¶åˆ†ç‰‡å¤„ç†
â€¢ æ‰¹é‡æ•°æ®å¯¼å…¥
â€¢ å›¾ç‰‡æ‰¹é‡å‹ç¼©
```

---

## 5. ğŸ”„ é”ç»­æœŸæœºåˆ¶åŸç†


### 5.1 é”è¶…æ—¶é—®é¢˜çš„æŒ‘æˆ˜


**ä¸ºä»€ä¹ˆéœ€è¦é”ç»­æœŸï¼Ÿ**
```
é—®é¢˜åœºæ™¯ï¼š
1. çº¿ç¨‹Aè·å–é”ï¼Œè®¾ç½®30ç§’è¶…æ—¶
2. ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡30ç§’
3. é”è‡ªåŠ¨è¿‡æœŸé‡Šæ”¾
4. çº¿ç¨‹Bè·å–é”ï¼Œå¼€å§‹æ‰§è¡Œ
5. çº¿ç¨‹Aä¸šåŠ¡å®Œæˆï¼Œå°è¯•é‡Šæ”¾é”
6. ç»“æœï¼šçº¿ç¨‹Aé‡Šæ”¾äº†çº¿ç¨‹Bçš„é”ï¼ğŸ’¥

æ—¶é—´çº¿ç¤ºä¾‹ï¼š
t=0s   : Aè·å–é”ï¼ˆ30sè¶…æ—¶ï¼‰
t=35s  : é”è‡ªåŠ¨è¿‡æœŸï¼ŒBè·å–é”
t=40s  : Aå®Œæˆä¸šåŠ¡ï¼Œé”™è¯¯é‡Šæ”¾Bçš„é”
t=45s  : Cä¹Ÿè·å–é”ï¼Œä¸Bäº§ç”Ÿå†²çª
```

### 5.2 Redissonè‡ªåŠ¨ç»­æœŸæœºåˆ¶


**çœ‹é—¨ç‹—ï¼ˆWatchdogï¼‰åŸç†**
```
Redissonçš„æ™ºèƒ½è§£å†³æ–¹æ¡ˆï¼š

è·å–é”æ—¶ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   çº¿ç¨‹A     â”‚    â”‚  çœ‹é—¨ç‹—çº¿ç¨‹  â”‚    â”‚    Redis    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è·å–é”      â”‚ â†’  â”‚ å¯åŠ¨å®šæ—¶å™¨   â”‚ â†’  â”‚ è®¾ç½®é”30s   â”‚
â”‚ æ‰§è¡Œä¸šåŠ¡... â”‚    â”‚             â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»­æœŸè¿‡ç¨‹ï¼š
æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡ï¼š
â€¢ çº¿ç¨‹Aè¿˜åœ¨æ‰§è¡Œä¸šåŠ¡å—ï¼Ÿæ˜¯ â†’ ç»­æœŸ30ç§’
â€¢ çº¿ç¨‹Aæ‰§è¡Œå®Œæ¯•äº†ï¼Ÿæ˜¯ â†’ åœæ­¢ç»­æœŸï¼Œé‡Šæ”¾é”

è‡ªåŠ¨æœºåˆ¶ï¼š
â€¢ æ— éœ€æ‰‹åŠ¨è®¾ç½®è¶…æ—¶æ—¶é—´
â€¢ ä¸šåŠ¡æ‰§è¡Œå¤šä¹…ï¼Œé”å°±ä¿æŒå¤šä¹…
â€¢ å¼‚å¸¸é€€å‡ºæ—¶é”ä¼šè‡ªåŠ¨è¿‡æœŸï¼ˆé»˜è®¤30ç§’ï¼‰
```

### 5.3 ç»­æœŸæœºåˆ¶æºç è§£æ


**å…³é”®å®ç°é€»è¾‘**
```java
// Redissonå†…éƒ¨ç»­æœŸé€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼‰
private void renewExpiration() {
    Timeout task = commandExecutor.getConnectionManager()
        .newTimeout(new TimerTask() {
            @Override
            public void run(Timeout timeout) {
                // ç»­æœŸLuaè„šæœ¬
                RFuture<Boolean> future = renewExpirationAsync();
                future.onComplete((res, e) -> {
                    if (e != null) {
                        log.error("ç»­æœŸå¤±è´¥", e);
                        return;
                    }
                    
                    if (res) {
                        // ç»­æœŸæˆåŠŸï¼Œå®‰æ’ä¸‹æ¬¡ç»­æœŸ
                        renewExpiration();
                    }
                    // ç»­æœŸå¤±è´¥è¯´æ˜é”å·²é‡Šæ”¾ï¼Œåœæ­¢ç»­æœŸ
                });
            }
        }, internalLockLeaseTime / 3, TimeUnit.MILLISECONDS);
    // æ¯1/3è¶…æ—¶æ—¶é—´æ‰§è¡Œä¸€æ¬¡ç»­æœŸ
}
```

### 5.4 æ‰‹åŠ¨æ§åˆ¶é”æ—¶é—´


**ç‰¹æ®Šæƒ…å†µå¤„ç†**
```java
// åœºæ™¯1ï¼šæ˜ç¡®çŸ¥é“ä¸šåŠ¡æ‰§è¡Œæ—¶é—´
RLock lock = redisson.getLock("quickTask");
lock.lock(10, TimeUnit.SECONDS);  // 10ç§’åè‡ªåŠ¨é‡Šæ”¾
try {
    quickBusinessLogic();  // ç¡®ä¿10ç§’å†…å®Œæˆ
} finally {
    lock.unlock();
}

// åœºæ™¯2ï¼šå°è¯•è·å–é”ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…
if (lock.tryLock(5, TimeUnit.SECONDS)) {
    try {
        businessLogic();
    } finally {
        lock.unlock();
    }
} else {
    System.out.println("è·å–é”è¶…æ—¶ï¼Œæ‰§è¡Œé™çº§é€»è¾‘");
    fallbackLogic();
}
```

---

## 6. ğŸ› ï¸ æœ€ä½³å®è·µä¸ä¼˜åŒ–


### 6.1 é…ç½®ä¼˜åŒ–æŒ‡å—


**è¿æ¥æ± é…ç½®**
```java
Config config = new Config();
// å•æœºæ¨¡å¼é…ç½®
config.useSingleServer()
    .setAddress("redis://localhost:6379")
    .setConnectionPoolSize(50)      // è¿æ¥æ± å¤§å°
    .setConnectionMinimumIdleSize(10)  // æœ€å°ç©ºé—²è¿æ¥
    .setTimeout(3000)               // å‘½ä»¤è¶…æ—¶æ—¶é—´
    .setRetryAttempts(3)           // é‡è¯•æ¬¡æ•°
    .setRetryInterval(1500);       // é‡è¯•é—´éš”

RedissonClient redisson = Redisson.create(config);
```

**é›†ç¾¤æ¨¡å¼é…ç½®**
```java
Config config = new Config();
config.useClusterServers()
    .setScanInterval(2000)  // é›†ç¾¤æ‰«æé—´éš”
    .addNodeAddress("redis://127.0.0.1:7000")
    .addNodeAddress("redis://127.0.0.1:7001")
    .addNodeAddress("redis://127.0.0.1:7002");
```

### 6.2 æ€§èƒ½è°ƒä¼˜ç­–ç•¥


**ğŸ”¸ é”ç²’åº¦æ§åˆ¶**
```
ç²—ç²’åº¦é”ï¼ˆé¿å…ï¼‰ï¼š
RLock globalLock = redisson.getLock("global");
// æ‰€æœ‰ç”¨æˆ·æ“ä½œéƒ½ç”¨åŒä¸€æŠŠé”ï¼Œå¹¶å‘æ€§æå·®

ç»†ç²’åº¦é”ï¼ˆæ¨èï¼‰ï¼š
RLock userLock = redisson.getLock("user:" + userId);  
// æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„é”ï¼Œå¹¶å‘æ€§å¥½

ä¸šåŠ¡é”ï¼ˆæœ€ä½³ï¼‰ï¼š
RLock orderLock = redisson.getLock("order:" + orderId);
// é’ˆå¯¹å…·ä½“ä¸šåŠ¡å¯¹è±¡çš„é”
```

**ğŸ”¸ è¿æ¥å¤ç”¨ä¼˜åŒ–**
```java
// âŒ é”™è¯¯æ–¹å¼ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„Redissonå®¢æˆ·ç«¯
public void badExample() {
    RedissonClient redisson = Redisson.create();  // é¢‘ç¹åˆ›å»º
    RLock lock = redisson.getLock("test");
    // ä½¿ç”¨å®Œå°±å…³é—­ï¼Œæµªè´¹èµ„æº
    redisson.shutdown();
}

// âœ… æ­£ç¡®æ–¹å¼ï¼šå¤ç”¨Redissonå®¢æˆ·ç«¯
@Component
public class RedissonService {
    private static final RedissonClient redisson = Redisson.create(config);
    
    public RLock getLock(String lockName) {
        return redisson.getLock(lockName);
    }
    
    @PreDestroy
    public void shutdown() {
        redisson.shutdown();
    }
}
```

### 6.3 å¸¸è§é—®é¢˜æ’æŸ¥


**ğŸ”¸ é”æ— æ³•é‡Šæ”¾**
```java
// é—®é¢˜ä»£ç 
RLock lock = redisson.getLock("problemLock");
lock.lock();
if (someCondition) {
    return;  // ğŸ’¥ å¿˜è®°é‡Šæ”¾é”ï¼
}
lock.unlock();

// è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨try-with-resources
try (RLock lock = redisson.getLock("safeLock")) {
    lock.lock();
    businessLogic();
    // è‡ªåŠ¨é‡Šæ”¾é”
}
```

**ğŸ”¸ æ­»é”æ£€æµ‹**
```
æ­»é”åœºæ™¯ï¼š
çº¿ç¨‹Aï¼šè·å–é”1 â†’ ç­‰å¾…é”2
çº¿ç¨‹Bï¼šè·å–é”2 â†’ ç­‰å¾…é”1

è§£å†³ç­–ç•¥ï¼š
1. ç»Ÿä¸€é”é¡ºåºï¼šæ€»æ˜¯å…ˆè·å–IDå°çš„é”
2. è®¾ç½®è¶…æ—¶æ—¶é—´ï¼šé¿å…æ— é™ç­‰å¾…
3. ä½¿ç”¨tryLockï¼šéé˜»å¡å°è¯•è·å–
```

---

## 7. ğŸ­ ç”Ÿäº§ç¯å¢ƒå®è·µ


### 7.1 ç”µå•†ç§’æ€åœºæ™¯


**åº“å­˜æ‰£å‡é˜²è¶…å–**
```java
@Service
public class SeckillService {
    
    public boolean buySeckillProduct(Long productId, Long userId) {
        String lockKey = "seckill:product:" + productId;
        RLock lock = redisson.getLock(lockKey);
        
        try {
            // å°è¯•è·å–é”ï¼Œæœ€å¤šç­‰å¾…3ç§’
            if (lock.tryLock(3, TimeUnit.SECONDS)) {
                try {
                    // æ£€æŸ¥åº“å­˜
                    Integer stock = getStockFromRedis(productId);
                    if (stock > 0) {
                        // æ‰£å‡åº“å­˜
                        decreaseStock(productId);
                        // åˆ›å»ºè®¢å•
                        createOrder(productId, userId);
                        return true;
                    }
                    return false;  // åº“å­˜ä¸è¶³
                } finally {
                    lock.unlock();
                }
            } else {
                return false;  // è·å–é”è¶…æ—¶
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            return false;
        }
    }
}

å…³é”®è¦ç‚¹ï¼š
â€¢ é”ç²’åº¦ï¼šæŒ‰å•†å“IDåˆ†é”ï¼Œä¸åŒå•†å“ä¸äº’æ–¥
â€¢ è¶…æ—¶æ§åˆ¶ï¼šé¿å…ç”¨æˆ·é•¿æ—¶é—´ç­‰å¾…
â€¢ å¼‚å¸¸å¤„ç†ï¼šç¡®ä¿é”ä¸€å®šä¼šè¢«é‡Šæ”¾
```

### 7.2 åˆ†å¸ƒå¼é™æµå®ç°


**åŸºäºä»¤ç‰Œæ¡¶çš„é™æµ**
```java
@Component
public class RateLimitService {
    
    public boolean tryAcquire(String key, int permits) {
        RRateLimiter rateLimiter = redisson.getRateLimiter(key);
        
        // è®¾ç½®é™æµè§„åˆ™ï¼šæ¯ç§’æœ€å¤š10ä¸ªè¯·æ±‚
        rateLimiter.trySetRate(RateType.OVERALL, 10, 1, RateIntervalUnit.SECONDS);
        
        // å°è¯•è·å–ä»¤ç‰Œ
        return rateLimiter.tryAcquire(permits);
    }
}

// åœ¨Controllerä¸­ä½¿ç”¨
@RestController
public class ApiController {
    
    @Autowired
    private RateLimitService rateLimitService;
    
    @GetMapping("/api/data")
    public ResponseEntity<?> getData() {
        if (!rateLimitService.tryAcquire("api:data", 1)) {
            return ResponseEntity.status(429)
                .body("è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•");
        }
        
        // æ­£å¸¸ä¸šåŠ¡é€»è¾‘
        return ResponseEntity.ok(businessService.getData());
    }
}
```

### 7.3 åˆ†å¸ƒå¼ç¼“å­˜æ–¹æ¡ˆ


**å¤šçº§ç¼“å­˜æ¶æ„**
```java
@Service  
public class UserService {
    
    // L1ç¼“å­˜ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆé€Ÿåº¦æœ€å¿«ï¼‰
    private final Cache<String, User> localCache = 
        CacheBuilder.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(5, TimeUnit.MINUTES)
            .build();
    
    // L2ç¼“å­˜ï¼šRedisåˆ†å¸ƒå¼ç¼“å­˜
    private final RMap<String, User> redisCache = 
        redisson.getMap("userCache");
    
    public User getUserById(String userId) {
        // 1. æŸ¥è¯¢æœ¬åœ°ç¼“å­˜
        User user = localCache.getIfPresent(userId);
        if (user != null) {
            return user;
        }
        
        // 2. æŸ¥è¯¢Redisç¼“å­˜  
        user = redisCache.get(userId);
        if (user != null) {
            localCache.put(userId, user);  // å›å†™æœ¬åœ°ç¼“å­˜
            return user;
        }
        
        // 3. æŸ¥è¯¢æ•°æ®åº“
        user = userRepository.findById(userId);
        if (user != null) {
            redisCache.put(userId, user, 30, TimeUnit.MINUTES);
            localCache.put(userId, user);
        }
        
        return user;
    }
}

ç¼“å­˜å±‚æ¬¡æ•ˆæœï¼š
L1æœ¬åœ°ç¼“å­˜ï¼š1mså“åº”æ—¶é—´
L2Redisç¼“å­˜ï¼š5mså“åº”æ—¶é—´  
L3æ•°æ®åº“æŸ¥è¯¢ï¼š100mså“åº”æ—¶é—´
```

### 7.4 ç›‘æ§ä¸å‘Šè­¦


**å…³é”®ç›‘æ§æŒ‡æ ‡**
```java
@Component
public class RedissonMonitor {
    
    @Scheduled(fixedRate = 60000)  // æ¯åˆ†é’Ÿæ£€æŸ¥
    public void monitorLockStatus() {
        // é”ç­‰å¾…æ—¶é—´ç»Ÿè®¡
        RMap<String, Long> lockWaitTimes = 
            redisson.getMap("lock:waitTimes");
        
        // è¿æ¥æ± çŠ¶æ€æ£€æŸ¥
        ConnectionManager connectionManager = 
            redisson.getConfig().getConnectionManager();
        
        if (connectionManager.getConnectionPoolSize() < 5) {
            alertService.sendAlert("Redisè¿æ¥æ± ä¸è¶³");
        }
        
        // å†…å­˜ä½¿ç”¨æ£€æŸ¥
        RAtomicLong memoryUsage = redisson.getAtomicLong("memory:usage");
        if (memoryUsage.get() > MEMORY_THRESHOLD) {
            alertService.sendAlert("Rediså†…å­˜ä½¿ç”¨è¿‡é«˜");
        }
    }
}

æ ¸å¿ƒç›‘æ§é¡¹ï¼š
â€¢ é”è·å–æˆåŠŸç‡
â€¢ é”ç­‰å¾…æ—¶é—´åˆ†å¸ƒ  
â€¢ è¿æ¥æ± ä½¿ç”¨æƒ…å†µ
â€¢ å†…å­˜ä½¿ç”¨è¶‹åŠ¿
â€¢ ç½‘ç»œå»¶è¿Ÿç»Ÿè®¡
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Redissonæœ¬è´¨ï¼šRedis + Javaåˆ†å¸ƒå¼å¯¹è±¡æ¡†æ¶
ğŸ”¸ åˆ†å¸ƒå¼é”ï¼šè§£å†³å¤šåº”ç”¨åè°ƒè®¿é—®å…±äº«èµ„æºé—®é¢˜
ğŸ”¸ è‡ªåŠ¨ç»­æœŸï¼šçœ‹é—¨ç‹—æœºåˆ¶è‡ªåŠ¨å»¶é•¿é”æœ‰æ•ˆæœŸ
ğŸ”¸ ä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼šMapã€Listã€Setç­‰åˆ†å¸ƒå¼ç‰ˆæœ¬
ğŸ”¸ è¿œç¨‹æœåŠ¡ï¼šè·¨åº”ç”¨çš„æ–¹æ³•è°ƒç”¨èƒ½åŠ›
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ åˆ†å¸ƒå¼é”çš„ä»·å€¼**
```
è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š
â€¢ é˜²æ­¢é‡å¤æ‰§è¡Œï¼šå®šæ—¶ä»»åŠ¡ã€å¹‚ç­‰æ“ä½œ
â€¢ èµ„æºç«äº‰æ§åˆ¶ï¼šåº“å­˜æ‰£å‡ã€åº§ä½é¢„è®¢
â€¢ æ•°æ®ä¸€è‡´æ€§ï¼šé˜²æ­¢å¹¶å‘ä¿®æ”¹å†²çª

ä¸šåŠ¡ä»·å€¼ï¼š
â€¢ ä¿è¯ä¸šåŠ¡æ­£ç¡®æ€§
â€¢ æå‡ç³»ç»Ÿç¨³å®šæ€§  
â€¢ ç®€åŒ–å¹¶å‘ç¼–ç¨‹å¤æ‚åº¦
```

**ğŸ”¹ è‡ªåŠ¨ç»­æœŸçš„é‡è¦æ€§**
```
ä¼ ç»Ÿåˆ†å¸ƒå¼é”é—®é¢˜ï¼š
â€¢ è¶…æ—¶æ—¶é—´éš¾ä»¥é¢„ä¼°
â€¢ ä¸šåŠ¡æ‰§è¡Œæ—¶é—´ä¸å›ºå®š
â€¢ äººå·¥è®¾ç½®å®¹æ˜“å‡ºé”™

Redissonç»­æœŸä¼˜åŠ¿ï¼š
â€¢ è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæ— éœ€äººå·¥å¹²é¢„
â€¢ é¿å…é”æå‰é‡Šæ”¾çš„å®‰å…¨é—®é¢˜
â€¢ ä¸šåŠ¡ä¸“æ³¨åº¦æ›´é«˜ï¼Œä¸ç”¨è€ƒè™‘é”ç®¡ç†
```

**ğŸ”¹ é€‰æ‹©åˆé€‚çš„é”ç±»å‹**
```
ä¸šåŠ¡åœºæ™¯å†³ç­–ï¼š

è¯»å¤šå†™å°‘ â†’ è¯»å†™é”
â€¢ é…ç½®è¯»å–ã€ç¼“å­˜æŸ¥è¯¢

ä¸¥æ ¼é¡ºåº â†’ å…¬å¹³é”  
â€¢ æ’é˜Ÿç³»ç»Ÿã€é¡ºåºå¤„ç†

é™åˆ¶å¹¶å‘æ•° â†’ ä¿¡å·é‡
â€¢ è¿æ¥æ± ã€èµ„æºæ§åˆ¶

ä¸€èˆ¬äº’æ–¥ â†’ å¯é‡å…¥é”
â€¢ åº“å­˜æ“ä½œã€çŠ¶æ€ä¿®æ”¹
```

### 8.3 ç”Ÿäº§ç¯å¢ƒè¦ç‚¹


**ğŸ¯ æ¶æ„è®¾è®¡åŸåˆ™**
- **é”ç²’åº¦**ï¼šè¶Šç»†è¶Šå¥½ï¼Œæé«˜å¹¶å‘æ€§
- **è¶…æ—¶ç­–ç•¥**ï¼šåˆç†è®¾ç½®ï¼Œé¿å…æ­»é”
- **å¼‚å¸¸å¤„ç†**ï¼šç¡®ä¿é”ä¸€å®šä¼šé‡Šæ”¾
- **ç›‘æ§å‘Šè­¦**ï¼šå…³æ³¨å…³é”®æ€§èƒ½æŒ‡æ ‡

**ğŸ’¡ å¸¸è§é™·é˜±é¿å…**
- **å¿˜è®°é‡Šæ”¾é”**ï¼šä½¿ç”¨try-finallyæˆ–try-with-resources
- **é”ç²’åº¦è¿‡ç²—**ï¼šå½±å“ç³»ç»Ÿå¹¶å‘æ€§èƒ½
- **æ— é™ç­‰å¾…**ï¼šè®¾ç½®åˆç†çš„è·å–é”è¶…æ—¶æ—¶é—´
- **é‡å¤åˆ›å»ºå®¢æˆ·ç«¯**ï¼šå¤ç”¨RedissonClientå®ä¾‹

**ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
- **è¿æ¥æ± è°ƒä¼˜**ï¼šæ ¹æ®å¹¶å‘é‡è°ƒæ•´è¿æ¥æ•°
- **åºåˆ—åŒ–ä¼˜åŒ–**ï¼šé€‰æ‹©é«˜æ•ˆçš„åºåˆ—åŒ–æ–¹å¼
- **ç½‘ç»œä¼˜åŒ–**ï¼šRediséƒ¨ç½²ä½ç½®é è¿‘åº”ç”¨æœåŠ¡å™¨
- **ç›‘æ§é©±åŠ¨**ï¼šåŸºäºç›‘æ§æ•°æ®æŒç»­ä¼˜åŒ–

**æ ¸å¿ƒè®°å¿†**ï¼š
- Redissonè®©åˆ†å¸ƒå¼ç¼–ç¨‹åƒæœ¬åœ°ç¼–ç¨‹ä¸€æ ·ç®€å•
- è‡ªåŠ¨ç»­æœŸæœºåˆ¶æ˜¯Redissoné”çš„æ ¸å¿ƒä¼˜åŠ¿
- åˆç†é€‰æ‹©é”ç±»å‹ï¼Œé¿å…è¿‡åº¦è®¾è®¡
- ç”Ÿäº§ç¯å¢ƒå¿…é¡»åšå¥½ç›‘æ§å’Œå¼‚å¸¸å¤„ç†