---
title: 24ã€æŒä¹…åŒ–ä¸Žå¤‡ä»½ç­–ç•¥ç»¼åˆ
---
## ðŸ“š ç›®å½•

1. [å¤‡ä»½ä½“ç³»åŸºç¡€æ¦‚å¿µ](#1-å¤‡ä»½ä½“ç³»åŸºç¡€æ¦‚å¿µ)
2. [å¤šå±‚æ¬¡å¤‡ä»½ä½“ç³»](#2-å¤šå±‚æ¬¡å¤‡ä»½ä½“ç³»)
3. [å¤‡ä»½ç­–ç•¥åˆ¶å®š](#3-å¤‡ä»½ç­–ç•¥åˆ¶å®š)
4. [ç¾éš¾æ¢å¤ä½“ç³»](#4-ç¾éš¾æ¢å¤ä½“ç³»)
5. [å¤‡ä»½æœ€ä½³å®žè·µ](#5-å¤‡ä»½æœ€ä½³å®žè·µ)
6. [å¤‡ä»½å·¥å…·ä¸Žæ“ä½œ](#6-å¤‡ä»½å·¥å…·ä¸Žæ“ä½œ)
7. [æ¢å¤æ¼”ç»ƒä¸Žæµ‹è¯•](#7-æ¢å¤æ¼”ç»ƒä¸Žæµ‹è¯•)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸŽ¯ å¤‡ä»½ä½“ç³»åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¤‡ä»½ä½“ç³»


**ðŸ“ é€šä¿—ç†è§£**
```
å¤‡ä»½ä½“ç³»å°±åƒç»™é‡è¦æ–‡ä»¶ä¹°ä¿é™©
æ­£å¸¸æƒ…å†µï¼šæ–‡ä»¶æ”¾åœ¨ç”µè„‘é‡Œæ­£å¸¸ä½¿ç”¨
æ„å¤–æƒ…å†µï¼šç”µè„‘åäº†ã€æ–‡ä»¶ä¸¢äº†ï¼Œä»Žå¤‡ä»½ä¸­æ¢å¤

Rediså¤‡ä»½ä½“ç³» = å¤šé‡ä¿é™©æœºåˆ¶
ç¡®ä¿å³ä½¿æœåŠ¡å™¨å‡ºé—®é¢˜ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±
```

**ðŸ”¸ å¤‡ä»½çš„æ ¸å¿ƒç›®æ ‡**
```
æ•°æ®å®‰å…¨ï¼šé˜²æ­¢æ•°æ®æ°¸ä¹…ä¸¢å¤±
ä¸šåŠ¡è¿žç»­ï¼šæœåŠ¡å™¨æ•…éšœæ—¶å¿«é€Ÿæ¢å¤
åˆè§„è¦æ±‚ï¼šæ»¡è¶³æ³•å¾‹æ³•è§„å¯¹æ•°æ®ä¿æŠ¤çš„è¦æ±‚

ç”Ÿæ´»ç±»æ¯”ï¼š
é‡è¦æ–‡ä»¶ â†’ å¤å°ä»¶æ”¾ä¿é™©ç®±
Redisæ•°æ® â†’ å¤‡ä»½æ–‡ä»¶å­˜å¤šä¸ªåœ°æ–¹
```

### 1.2 å¤‡ä»½ä¸ŽæŒä¹…åŒ–çš„åŒºåˆ«


**ðŸ”¸ æ¦‚å¿µåŒºåˆ†**
```
æŒä¹…åŒ–ï¼šRedisè‡ªåŠ¨å°†å†…å­˜æ•°æ®å†™å…¥ç£ç›˜æ–‡ä»¶
å¤‡ä»½ï¼šäººä¸ºå°†æŒä¹…åŒ–æ–‡ä»¶å¤åˆ¶åˆ°å®‰å…¨ä½ç½®

æŒä¹…åŒ– = æŠŠå†…å­˜ä¸­çš„è´¦æœ¬æŠ„å†™åˆ°çº¸ä¸Š
å¤‡ä»½ = æŠŠçº¸è´¨è´¦æœ¬å¤å°å¤šä»½æ”¾åœ¨ä¸åŒåœ°æ–¹

å…³ç³»ï¼šæŒä¹…åŒ–æ˜¯å¤‡ä»½çš„åŸºç¡€ï¼Œå¤‡ä»½æ˜¯æŒä¹…åŒ–çš„å»¶ä¼¸
```

### 1.3 æ•°æ®ä¸¢å¤±çš„å¸¸è§åœºæ™¯


**ðŸ”¸ ç¡¬ä»¶æ•…éšœ**
```
æœåŠ¡å™¨å®•æœºï¼šçªç„¶æ–­ç”µã€ç¡¬ä»¶æŸå
ç£ç›˜æ•…éšœï¼šç¡¬ç›˜åé“ã€å­˜å‚¨å™¨æŸå
ç½‘ç»œæ•…éšœï¼šç½‘ç»œä¸­æ–­å¯¼è‡´æ•°æ®åŒæ­¥å¤±è´¥

åº”å¯¹ç­–ç•¥ï¼šå¤šé‡å¤‡ä»½ï¼Œåˆ†æ•£é£Žé™©
```

**ðŸ”¸ äººä¸ºæ“ä½œå¤±è¯¯**
```
è¯¯åˆ æ•°æ®ï¼šé”™è¯¯æ‰§è¡ŒFLUSHDBã€DELå‘½ä»¤
é…ç½®é”™è¯¯ï¼šé”™è¯¯ä¿®æ”¹é…ç½®å¯¼è‡´æ•°æ®ä¸¢å¤±
ç‰ˆæœ¬å‡çº§ï¼šå‡çº§è¿‡ç¨‹ä¸­å‡ºçŽ°å…¼å®¹æ€§é—®é¢˜

åº”å¯¹ç­–ç•¥ï¼šæ“ä½œå‰å¤‡ä»½ï¼Œæƒé™æŽ§åˆ¶
```

**ðŸ”¸ è½¯ä»¶ç¼ºé™·**
```
Redis Bugï¼šè½¯ä»¶æ¼æ´žå¯¼è‡´æ•°æ®æŸå
æ“ä½œç³»ç»Ÿé—®é¢˜ï¼šç³»ç»Ÿçº§åˆ«çš„æ•…éšœ
ç¬¬ä¸‰æ–¹å·¥å…·é—®é¢˜ï¼šç›‘æŽ§æˆ–ç®¡ç†å·¥å…·å¼‚å¸¸

åº”å¯¹ç­–ç•¥ï¼šç‰ˆæœ¬ç®¡ç†ï¼Œå¤šçŽ¯å¢ƒéªŒè¯
```

---

## 2. ðŸ—ï¸ å¤šå±‚æ¬¡å¤‡ä»½ä½“ç³»


### 2.1 å®žæ—¶æŒä¹…åŒ–å±‚


**ðŸ”¸ AOFå®žæ—¶æŒä¹…åŒ–**
```bash
# AOFé…ç½®ï¼ˆæ¯ç§’åˆ·ç›˜ï¼‰
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# ä¼˜åŠ¿ï¼š
# âœ… æ•°æ®ä¸¢å¤±æœ€å°‘ï¼ˆæœ€å¤šä¸¢å¤±1ç§’ï¼‰
# âœ… æ–‡ä»¶å¯è¯»ï¼Œä¾¿äºŽåˆ†æž
# âœ… è‡ªåŠ¨é‡å†™åŽ‹ç¼©æ–‡ä»¶å¤§å°

# åŠ£åŠ¿ï¼š
# âŒ æ–‡ä»¶ä½“ç§¯å¤§
# âŒ æ¢å¤é€Ÿåº¦æ…¢
# âŒ å†™å…¥æ€§èƒ½å½±å“
```

**ðŸ”¸ æ··åˆæŒä¹…åŒ–**
```bash
# å¯ç”¨RDB+AOFæ··åˆæ¨¡å¼
aof-use-rdb-preamble yes

# å·¥ä½œåŽŸç†ï¼š
# RDBå¿«ç…§ + AOFå¢žé‡ = æ··åˆæŒä¹…åŒ–æ–‡ä»¶
# å¿«é€Ÿæ¢å¤ï¼ˆRDBï¼‰ + æ•°æ®å®Œæ•´ï¼ˆAOFï¼‰

å®žé™…æ•ˆæžœï¼š
æ¢å¤æ—¶é—´ï¼šä»ŽAOFçš„å‡ åˆ†é’Ÿç¼©çŸ­åˆ°å‡ ç§’é’Ÿ
æ•°æ®å®‰å…¨ï¼šä»ç„¶ä¿æŒAOFçš„æ•°æ®å®Œæ•´æ€§
æ–‡ä»¶å¤§å°ï¼šæ¯”çº¯AOFå°ï¼Œæ¯”çº¯RDBå¤§ä¸€äº›
```

**ðŸŒ° å®žæ—¶æŒä¹…åŒ–é…ç½®ç¤ºä¾‹**
```bash
# redis.confé…ç½®
appendonly yes                    # å¼€å¯AOF
appendfilename "appendonly.aof"   # AOFæ–‡ä»¶å
appendfsync everysec             # æ¯ç§’åˆ·ç›˜
aof-use-rdb-preamble yes         # æ··åˆæŒä¹…åŒ–

# æŸ¥çœ‹æŒä¹…åŒ–çŠ¶æ€
127.0.0.1:6379> INFO persistence
# aof_enabled:1
# aof_rewrite_in_progress:0
# aof_rewrite_scheduled:0
# aof_last_rewrite_time_sec:5
# aof_current_rewrite_time_sec:-1
# aof_last_bgrewrite_status:ok
```

### 2.2 å®šæœŸå¿«ç…§å±‚


**ðŸ”¸ RDBå®šæ—¶å¤‡ä»½**
```bash
# RDBè‡ªåŠ¨ä¿å­˜é…ç½®
save 900 1      # 900ç§’å†…è‡³å°‘1ä¸ªé”®å˜åŒ–æ—¶ä¿å­˜
save 300 10     # 300ç§’å†…è‡³å°‘10ä¸ªé”®å˜åŒ–æ—¶ä¿å­˜  
save 60 10000   # 60ç§’å†…è‡³å°‘10000ä¸ªé”®å˜åŒ–æ—¶ä¿å­˜

# æ‰‹åŠ¨è§¦å‘å¤‡ä»½
127.0.0.1:6379> BGSAVE
Background saving started

# é˜»å¡žå¼å¤‡ä»½ï¼ˆè°¨æ…Žä½¿ç”¨ï¼‰
127.0.0.1:6379> SAVE
OK

# æ£€æŸ¥å¤‡ä»½çŠ¶æ€
127.0.0.1:6379> LASTSAVE
(integer) 1609459200  # æœ€åŽä¸€æ¬¡ä¿å­˜çš„æ—¶é—´æˆ³
```

**ðŸ”¸ å¤‡ä»½æ–‡ä»¶ç®¡ç†**
```bash
# å¤‡ä»½æ–‡ä»¶ä½ç½®é…ç½®
dir /var/lib/redis              # å¤‡ä»½æ–‡ä»¶ç›®å½•
dbfilename dump.rdb             # RDBæ–‡ä»¶å

# å¤‡ä»½æ–‡ä»¶æ“ä½œ
# å¤åˆ¶å¤‡ä»½æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®
cp /var/lib/redis/dump.rdb /backup/redis/dump-$(date +%Y%m%d-%H%M%S).rdb

# å®šæ—¶å¤‡ä»½è„šæœ¬
#!/bin/bash
DATE=$(date +%Y%m%d-%H%M%S)
BACKUP_DIR="/backup/redis"
REDIS_DIR="/var/lib/redis"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# è§¦å‘Rediså¤‡ä»½
redis-cli BGSAVE

# ç­‰å¾…å¤‡ä»½å®Œæˆ
while [ $(redis-cli LASTSAVE) -eq $LAST_SAVE ]; do
    sleep 1
done

# å¤åˆ¶å¤‡ä»½æ–‡ä»¶
cp $REDIS_DIR/dump.rdb $BACKUP_DIR/dump-$DATE.rdb
echo "å¤‡ä»½å®Œæˆ: dump-$DATE.rdb"
```

### 2.3 å¼‚åœ°å¤‡ä»½å±‚


**ðŸ”¸ è·¨æœºæˆ¿å¤‡ä»½ç­–ç•¥**
```
ä¸»æœºæˆ¿ï¼šå®žæ—¶æŒä¹…åŒ– + æœ¬åœ°RDBå¤‡ä»½
å¤‡æœºæˆ¿ï¼šä¸»ä»ŽåŒæ­¥ + ç‹¬ç«‹RDBå¤‡ä»½
å¼‚åœ°æœºæˆ¿ï¼šå®šæœŸä¼ è¾“å¤‡ä»½æ–‡ä»¶

æ•°æ®æµå‘ï¼š
ä¸»Redis â†’ æœ¬åœ°å¤‡ä»½æ–‡ä»¶ â†’ ä¼ è¾“åˆ°å¤‡æœºæˆ¿ â†’ å¤‡æœºæˆ¿å­˜å‚¨
        â†˜ ä¸»ä»ŽåŒæ­¥ â†’ å¤‡Redis â†’ å¤‡æœºæˆ¿å¤‡ä»½æ–‡ä»¶

åœ°ç†åˆ†å¸ƒï¼š
æœºæˆ¿Aï¼ˆä¸»ï¼‰â”€â”€â”€â”€ ç½‘ç»œåŒæ­¥ â”€â”€â”€â”€æœºæˆ¿Bï¼ˆå¤‡ï¼‰
   |                           |
   â””â”€â”€ æ–‡ä»¶ä¼ è¾“ â†’ å¼‚åœ°å­˜å‚¨ â†â”€â”€ æ–‡ä»¶ä¼ è¾“ â”€â”€â”˜
```

**ðŸ”¸ æ–‡ä»¶ä¼ è¾“æ–¹æ¡ˆ**
```bash
# rsyncåŒæ­¥æ–¹æ¡ˆ
# æ¯å°æ—¶åŒæ­¥å¤‡ä»½æ–‡ä»¶åˆ°è¿œç¨‹æœºæˆ¿
rsync -avz /backup/redis/ backup-server:/remote/backup/redis/

# scpä¼ è¾“æ–¹æ¡ˆ  
# ä¼ è¾“æœ€æ–°å¤‡ä»½æ–‡ä»¶
scp /backup/redis/dump-latest.rdb backup-server:/remote/backup/

# äº‘å­˜å‚¨åŒæ­¥
# ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆå¦‚é˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSï¼‰
aws s3 cp /backup/redis/ s3://my-redis-backup/ --recursive
```

### 2.4 äº‘ç«¯å¤‡ä»½å±‚


**ðŸ”¸ äº‘å­˜å‚¨å¤‡ä»½æ–¹æ¡ˆ**
```
å¯¹è±¡å­˜å‚¨ï¼šé˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSã€AWS S3
ç‰¹ç‚¹ï¼š
âœ… æ— é™å®¹é‡ï¼ŒæŒ‰é‡ä»˜è´¹
âœ… å¤šåœ°åŸŸè‡ªåŠ¨åŒæ­¥
âœ… ç‰ˆæœ¬ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸ
âœ… é«˜å¯é æ€§ï¼ˆ99.999999999%ï¼‰

å¤‡ä»½æµç¨‹ï¼š
æœ¬åœ°å¤‡ä»½ â†’ åŽ‹ç¼©åŠ å¯† â†’ ä¸Šä¼ äº‘å­˜å‚¨ â†’ ç‰ˆæœ¬ç®¡ç†
```

**ðŸ”¸ äº‘å¤‡ä»½è‡ªåŠ¨åŒ–è„šæœ¬**
```bash
#!/bin/bash
# Redisäº‘å¤‡ä»½è„šæœ¬

DATE=$(date +%Y%m%d-%H%M%S)
BACKUP_FILE="/tmp/redis-backup-$DATE.tar.gz"
REDIS_DATA_DIR="/var/lib/redis"

# 1. è§¦å‘Rediså¤‡ä»½
redis-cli BGSAVE

# 2. ç­‰å¾…å¤‡ä»½å®Œæˆ
echo "ç­‰å¾…å¤‡ä»½å®Œæˆ..."
sleep 30

# 3. æ‰“åŒ…åŽ‹ç¼©å¤‡ä»½æ–‡ä»¶
tar -czf $BACKUP_FILE $REDIS_DATA_DIR/dump.rdb $REDIS_DATA_DIR/appendonly.aof

# 4. ä¸Šä¼ åˆ°äº‘å­˜å‚¨
aws s3 cp $BACKUP_FILE s3://my-redis-backup/daily/

# 5. æ¸…ç†æœ¬åœ°ä¸´æ—¶æ–‡ä»¶
rm $BACKUP_FILE

echo "äº‘å¤‡ä»½å®Œæˆ: redis-backup-$DATE.tar.gz"
```

---

## 3. ðŸ“Š å¤‡ä»½ç­–ç•¥åˆ¶å®š


### 3.1 å¤‡ä»½é¢‘çŽ‡è§„åˆ’


**ðŸ”¸ ä¸šåŠ¡å½±å“è¯„ä¼°**
```
é«˜é¢‘ä¸šåŠ¡ï¼šç”µå•†è®¢å•ã€æ”¯ä»˜äº¤æ˜“
å¤‡ä»½é¢‘çŽ‡ï¼šæ¯5åˆ†é’ŸAOF + æ¯30åˆ†é’ŸRDB
æ•°æ®ä»·å€¼ï¼šæžé«˜ï¼Œä¸¢å¤±æˆæœ¬å·¨å¤§

ä¸­é¢‘ä¸šåŠ¡ï¼šç”¨æˆ·è¡Œä¸ºè®°å½•ã€ç»Ÿè®¡æ•°æ®  
å¤‡ä»½é¢‘çŽ‡ï¼šæ¯å°æ—¶RDB + æ¯å¤©å…¨é‡å¤‡ä»½
æ•°æ®ä»·å€¼ï¼šè¾ƒé«˜ï¼Œä¸¢å¤±æœ‰ä¸€å®šå½±å“

ä½Žé¢‘ä¸šåŠ¡ï¼šé…ç½®ä¿¡æ¯ã€é™æ€æ•°æ®
å¤‡ä»½é¢‘çŽ‡ï¼šæ¯å¤©RDB + æ¯å‘¨å…¨é‡å¤‡ä»½
æ•°æ®ä»·å€¼ï¼šä¸€èˆ¬ï¼Œä¸¢å¤±å½±å“æœ‰é™
```

**ðŸ”¸ é¢‘çŽ‡é…ç½®å¯¹ç…§è¡¨**

| ä¸šåŠ¡ç±»åž‹ | **RDBé¢‘çŽ‡** | **AOFé…ç½®** | **äº‘å¤‡ä»½é¢‘çŽ‡** | **æ•°æ®ä¸¢å¤±å®¹å¿åº¦** |
|---------|-----------|-----------|-------------|-----------------|
| **äº¤æ˜“ç³»ç»Ÿ** | `æ¯15åˆ†é’Ÿ` | `æ¯ç§’åˆ·ç›˜` | `æ¯å°æ—¶` | `0-1ç§’` |
| **ç”¨æˆ·ç³»ç»Ÿ** | `æ¯å°æ—¶` | `æ¯ç§’åˆ·ç›˜` | `æ¯6å°æ—¶` | `1-60ç§’` |
| **ç¼“å­˜ç³»ç»Ÿ** | `æ¯4å°æ—¶` | `å…³é—­æˆ–æ¯ç§’` | `æ¯å¤©` | `5-60åˆ†é’Ÿ` |
| **é…ç½®ç³»ç»Ÿ** | `æ¯å¤©` | `å…³é—­` | `æ¯å‘¨` | `å‡ å°æ—¶åˆ°1å¤©` |

### 3.2 å¤‡ä»½ä¿ç•™å‘¨æœŸ


**ðŸ”¸ åˆ†çº§ä¿ç•™ç­–ç•¥**
```
çƒ­å¤‡ä»½ï¼ˆ7å¤©ï¼‰ï¼š
- æ¯å°æ—¶å¤‡ä»½ä¿ç•™7å¤©
- ç”¨äºŽå¿«é€Ÿæ¢å¤æœ€è¿‘çš„æ•°æ®
- å­˜å‚¨åœ¨é«˜é€Ÿå­˜å‚¨è®¾å¤‡

æ¸©å¤‡ä»½ï¼ˆ30å¤©ï¼‰ï¼š  
- æ¯å¤©å¤‡ä»½ä¿ç•™30å¤©
- ç”¨äºŽæ¢å¤è¾ƒé•¿æ—¶é—´å‰çš„çŠ¶æ€
- å­˜å‚¨åœ¨å¸¸è§„å­˜å‚¨è®¾å¤‡

å†·å¤‡ä»½ï¼ˆ1å¹´ï¼‰ï¼š
- æ¯æœˆå¤‡ä»½ä¿ç•™12ä¸ªæœˆ
- ç”¨äºŽåˆè§„å’Œé•¿æœŸæ•°æ®æ¢å¤
- å­˜å‚¨åœ¨å½’æ¡£å­˜å‚¨è®¾å¤‡
```

**ðŸ”¸ ä¿ç•™ç­–ç•¥é…ç½®**
```bash
# è‡ªåŠ¨æ¸…ç†è„šæœ¬
#!/bin/bash
BACKUP_DIR="/backup/redis"

# æ¸…ç†7å¤©å‰çš„å°æ—¶å¤‡ä»½
find $BACKUP_DIR/hourly -name "*.rdb" -mtime +7 -delete

# æ¸…ç†30å¤©å‰çš„æ—¥å¤‡ä»½
find $BACKUP_DIR/daily -name "*.rdb" -mtime +30 -delete

# æ¸…ç†1å¹´å‰çš„æœˆå¤‡ä»½
find $BACKUP_DIR/monthly -name "*.rdb" -mtime +365 -delete

echo "å¤‡ä»½æ¸…ç†å®Œæˆ"
```

### 3.3 å¤‡ä»½å­˜å‚¨è§„åˆ’


**ðŸ”¸ å­˜å‚¨å®¹é‡è®¡ç®—**
```
Redisæ•°æ®é‡ï¼š10GB
RDBæ–‡ä»¶å¤§å°ï¼šçº¦8GBï¼ˆåŽ‹ç¼©åŽï¼‰
AOFæ–‡ä»¶å¤§å°ï¼šçº¦15GB

æ¯æ—¥å¤‡ä»½é‡è®¡ç®—ï¼š
- RDBå¤‡ä»½ï¼š24æ¬¡ Ã— 8GB = 192GB/å¤©
- ä¿ç•™7å¤©ï¼š192GB Ã— 7 = 1.3TB
- åŠ ä¸ŠAOFå’Œå…¶ä»–ï¼šæ€»è®¡çº¦2TB

å­˜å‚¨è§„åˆ’ï¼š
æœ¬åœ°å­˜å‚¨ï¼š2TB SSDï¼ˆçƒ­å¤‡ä»½ï¼‰
ç½‘ç»œå­˜å‚¨ï¼š5TB NASï¼ˆæ¸©å¤‡ä»½ï¼‰  
äº‘ç«¯å­˜å‚¨ï¼šæ— é™å®¹é‡ï¼ˆå†·å¤‡ä»½ï¼‰
```

**ðŸ”¸ å­˜å‚¨æž¶æž„è®¾è®¡**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬åœ°é«˜é€Ÿå­˜å‚¨    â”‚    â”‚   ç½‘ç»œå…±äº«å­˜å‚¨    â”‚    â”‚   äº‘ç«¯å¯¹è±¡å­˜å‚¨    â”‚
â”‚   SSD 2TB       â”‚â”€â”€â”€â–¶â”‚   NAS 5TB       â”‚â”€â”€â”€â–¶â”‚   S3 æ— é™å®¹é‡    â”‚
â”‚   çƒ­å¤‡ä»½(7å¤©)    â”‚    â”‚   æ¸©å¤‡ä»½(30å¤©)   â”‚    â”‚   å†·å¤‡ä»½(1å¹´)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â–²                       â–²                       â–²
        â”‚                       â”‚                       â”‚
   å®žæ—¶å†™å…¥              æ¯æ—¥ä¼ è¾“              æ¯æœˆå½’æ¡£
```

### 3.4 å¤‡ä»½éªŒè¯æœºåˆ¶


**ðŸ”¸ å¤‡ä»½å®Œæ•´æ€§éªŒè¯**
```bash
# 1. æ–‡ä»¶å¤§å°éªŒè¯
BACKUP_FILE="/backup/redis/dump-$(date +%Y%m%d).rdb"
ORIGINAL_SIZE=$(redis-cli DEBUG OBJECT somekey | grep serializedlength)
BACKUP_SIZE=$(ls -l $BACKUP_FILE | awk '{print $5}')

# 2. æ–‡ä»¶æ ¼å¼éªŒè¯
redis-check-rdb $BACKUP_FILE
if [ $? -eq 0 ]; then
    echo "RDBæ–‡ä»¶æ ¼å¼æ­£ç¡®"
else
    echo "RDBæ–‡ä»¶æŸå"
    exit 1
fi

# 3. æ•°æ®ä¸€è‡´æ€§éªŒè¯ï¼ˆæŠ½æ ·æ£€æŸ¥ï¼‰
# æ¢å¤å¤‡ä»½åˆ°æµ‹è¯•çŽ¯å¢ƒï¼ŒéªŒè¯å…³é”®æ•°æ®
redis-server --port 6380 --dbfilename dump-test.rdb
redis-cli -p 6380 GET critical_key
```

**ðŸ”¸ è‡ªåŠ¨åŒ–éªŒè¯æµç¨‹**
```bash
#!/bin/bash
# å¤‡ä»½éªŒè¯è„šæœ¬

BACKUP_FILE=$1
TEST_PORT=6380
TEST_DIR="/tmp/redis-test"

# åˆ›å»ºæµ‹è¯•çŽ¯å¢ƒ
mkdir -p $TEST_DIR
cp $BACKUP_FILE $TEST_DIR/dump.rdb

# å¯åŠ¨æµ‹è¯•Rediså®žä¾‹
redis-server --port $TEST_PORT --dir $TEST_DIR --daemonize yes

# ç­‰å¾…å¯åŠ¨å®Œæˆ
sleep 5

# éªŒè¯å…³é”®æ•°æ®
RESULT=$(redis-cli -p $TEST_PORT GET verification_key)
if [ "$RESULT" = "expected_value" ]; then
    echo "å¤‡ä»½éªŒè¯æˆåŠŸ"
    EXIT_CODE=0
else
    echo "å¤‡ä»½éªŒè¯å¤±è´¥"  
    EXIT_CODE=1
fi

# æ¸…ç†æµ‹è¯•çŽ¯å¢ƒ
redis-cli -p $TEST_PORT SHUTDOWN
rm -rf $TEST_DIR

exit $EXIT_CODE
```

---

## 4. ðŸš¨ ç¾éš¾æ¢å¤ä½“ç³»


### 4.1 æ¢å¤ç›®æ ‡è®¾å®š


**ðŸ”¸ RTOï¼ˆæ¢å¤æ—¶é—´ç›®æ ‡ï¼‰**
```
RTOï¼šRecovery Time Objectiveï¼Œç³»ç»Ÿæ¢å¤åˆ°æ­£å¸¸è¿è¡ŒçŠ¶æ€æ‰€éœ€çš„æ—¶é—´

ä¸šåŠ¡åˆ†çº§ï¼š
æ ¸å¿ƒä¸šåŠ¡ï¼šRTO â‰¤ 5åˆ†é’Ÿï¼ˆå¦‚æ”¯ä»˜ç³»ç»Ÿï¼‰
é‡è¦ä¸šåŠ¡ï¼šRTO â‰¤ 30åˆ†é’Ÿï¼ˆå¦‚è®¢å•ç³»ç»Ÿï¼‰
ä¸€èˆ¬ä¸šåŠ¡ï¼šRTO â‰¤ 2å°æ—¶ï¼ˆå¦‚ç»Ÿè®¡ç³»ç»Ÿï¼‰
è¾…åŠ©ä¸šåŠ¡ï¼šRTO â‰¤ 24å°æ—¶ï¼ˆå¦‚æ—¥å¿—ç³»ç»Ÿï¼‰

å½±å“å› ç´ ï¼š
- å¤‡ä»½æ–‡ä»¶å¤§å°
- ç½‘ç»œä¼ è¾“é€Ÿåº¦  
- æœåŠ¡å™¨æ€§èƒ½
- æ¢å¤æµç¨‹å¤æ‚åº¦
```

**ðŸ”¸ RPOï¼ˆæ¢å¤ç‚¹ç›®æ ‡ï¼‰**
```
RPOï¼šRecovery Point Objectiveï¼Œèƒ½å¤Ÿå®¹å¿çš„æœ€å¤§æ•°æ®ä¸¢å¤±é‡

æ•°æ®åˆ†çº§ï¼š
é‡‘èžæ•°æ®ï¼šRPO = 0ï¼ˆä¸èƒ½ä¸¢å¤±ä»»ä½•æ•°æ®ï¼‰
ç”¨æˆ·æ•°æ®ï¼šRPO â‰¤ 1åˆ†é’Ÿï¼ˆä¸¢å¤±1åˆ†é’Ÿå†…çš„æ•°æ®ï¼‰
è¡Œä¸ºæ•°æ®ï¼šRPO â‰¤ 1å°æ—¶ï¼ˆå¯æŽ¥å—å°æ—¶çº§æ•°æ®ä¸¢å¤±ï¼‰
æ—¥å¿—æ•°æ®ï¼šRPO â‰¤ 24å°æ—¶ï¼ˆå¯æŽ¥å—å¤©çº§æ•°æ®ä¸¢å¤±ï¼‰

é…ç½®å¯¹åº”ï¼š
RPO = 0ï¼šä¸»ä»ŽåŒæ­¥ + AOFæ¯æ¬¡åˆ·ç›˜
RPO â‰¤ 1åˆ†é’Ÿï¼šAOFæ¯ç§’ + ä»Žåº“
RPO â‰¤ 1å°æ—¶ï¼šRDBæ¯å°æ—¶ + AOF
RPO â‰¤ 24å°æ—¶ï¼šRDBæ¯å¤©
```

### 4.2 ç¾éš¾åœºæ™¯åˆ†ç±»


**ðŸ”¸ å±€éƒ¨æ•…éšœ**
```
å•æœºæ•…éšœï¼šä¸»Rediså®•æœº
å½±å“èŒƒå›´ï¼šå•ä¸ªæœåŠ¡èŠ‚ç‚¹
æ¢å¤æ–¹æ¡ˆï¼šä»Žåº“åˆ‡æ¢ä¸ºä¸»åº“
æ¢å¤æ—¶é—´ï¼š30ç§’-2åˆ†é’Ÿï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰

åº”å¯¹æµç¨‹ï¼š
1. ç›‘æŽ§æ£€æµ‹æ•…éšœ
2. è‡ªåŠ¨åˆ‡æ¢åˆ°ä»Žåº“
3. ä¿®å¤ä¸»åº“é—®é¢˜
4. é‡æ–°å»ºç«‹ä¸»ä»Žå…³ç³»
```

**ðŸ”¸ åŒºåŸŸæ•…éšœ**
```
æœºæˆ¿æ•…éšœï¼šæ•´ä¸ªæ•°æ®ä¸­å¿ƒä¸å¯ç”¨
å½±å“èŒƒå›´ï¼šä¸»ä»Žéƒ½åœ¨åŒä¸€æœºæˆ¿
æ¢å¤æ–¹æ¡ˆï¼šåˆ‡æ¢åˆ°å¼‚åœ°å¤‡ä»½æœºæˆ¿
æ¢å¤æ—¶é—´ï¼š10-30åˆ†é’Ÿ

åº”å¯¹æµç¨‹ï¼š
1. ç¡®è®¤æœºæˆ¿çº§æ•…éšœ
2. å¯åŠ¨å¼‚åœ°æœºæˆ¿Redis
3. ä»Žæœ€æ–°å¤‡ä»½æ¢å¤æ•°æ®
4. åˆ‡æ¢åº”ç”¨è¿žæŽ¥åœ°å€
```

**ðŸ”¸ å¤§è§„æ¨¡ç¾éš¾**
```
åœ°åŒºç¾éš¾ï¼šåœ°éœ‡ã€ç«ç¾ç­‰è‡ªç„¶ç¾å®³
å½±å“èŒƒå›´ï¼šå¤šä¸ªæœºæˆ¿åŒæ—¶å—å½±å“
æ¢å¤æ–¹æ¡ˆï¼šä»Žäº‘ç«¯å¤‡ä»½é‡å»ºæœåŠ¡
æ¢å¤æ—¶é—´ï¼š1-4å°æ—¶

åº”å¯¹æµç¨‹ï¼š
1. å¯åŠ¨ç¾éš¾æ¢å¤é¢„æ¡ˆ
2. åœ¨å®‰å…¨åœ°åŒºéƒ¨ç½²æ–°çŽ¯å¢ƒ
3. ä»Žäº‘å¤‡ä»½æ¢å¤æ•°æ®
4. é‡å»ºä¸šåŠ¡æœåŠ¡
5. åˆ‡æ¢DNSæŒ‡å‘æ–°çŽ¯å¢ƒ
```

### 4.3 æ¢å¤ä¼˜å…ˆçº§æŽ’åº


**ðŸ”¸ ä¸šåŠ¡ä¼˜å…ˆçº§çŸ©é˜µ**

| ä¸šåŠ¡ç³»ç»Ÿ | **æ•°æ®é‡è¦æ€§** | **æ—¶æ•ˆæ€§è¦æ±‚** | **æ¢å¤ä¼˜å…ˆçº§** | **RTOç›®æ ‡** |
|---------|--------------|--------------|-------------|-----------|
| **æ”¯ä»˜ç³»ç»Ÿ** | `æžé«˜` | `æžé«˜` | `P0ï¼ˆæœ€é«˜ï¼‰` | `5åˆ†é’Ÿ` |
| **è®¢å•ç³»ç»Ÿ** | `é«˜` | `é«˜` | `P1` | `15åˆ†é’Ÿ` |
| **ç”¨æˆ·ç³»ç»Ÿ** | `é«˜` | `ä¸­` | `P2` | `30åˆ†é’Ÿ` |
| **å•†å“ç³»ç»Ÿ** | `ä¸­` | `ä¸­` | `P3` | `1å°æ—¶` |
| **ç»Ÿè®¡ç³»ç»Ÿ** | `ä¸­` | `ä½Ž` | `P4` | `4å°æ—¶` |
| **æ—¥å¿—ç³»ç»Ÿ** | `ä½Ž` | `ä½Ž` | `P5` | `24å°æ—¶` |

**ðŸ”¸ æ¢å¤èµ„æºåˆ†é…**
```
P0çº§åˆ«ï¼šä¸“ç”¨æœåŠ¡å™¨ + ä¸“ç”¨ç½‘ç»œ + 24å°æ—¶å¾…å‘½
P1çº§åˆ«ï¼šå…±äº«æœåŠ¡å™¨ + ä¼˜å…ˆç½‘ç»œ + å·¥ä½œæ—¶é—´å“åº”
P2çº§åˆ«ï¼šè™šæ‹Ÿæœº + æ™®é€šç½‘ç»œ + å·¥ä½œæ—¶é—´å“åº”
P3-P5çº§åˆ«ï¼šæŒ‰éœ€åˆ†é… + è®¡åˆ’æ¢å¤
```

---

## 5. ðŸ“‹ å¤‡ä»½æœ€ä½³å®žè·µ


### 5.1 3-2-1å¤‡ä»½åŽŸåˆ™


**ðŸ”¸ 3-2-1åŽŸåˆ™è§£é‡Š**
```
3ï¼šè‡³å°‘ä¿å­˜3ä»½æ•°æ®å‰¯æœ¬
2ï¼šä½¿ç”¨è‡³å°‘2ç§ä¸åŒçš„å­˜å‚¨ä»‹è´¨  
1ï¼šè‡³å°‘1ä»½å¤‡ä»½ä¿å­˜åœ¨å¼‚åœ°

Redisåº”ç”¨ï¼š
å‰¯æœ¬1ï¼šRedisä¸»åº“ï¼ˆå†…å­˜ + æŒä¹…åŒ–æ–‡ä»¶ï¼‰
å‰¯æœ¬2ï¼šRedisä»Žåº“ï¼ˆå¦ä¸€å°æœåŠ¡å™¨ï¼‰
å‰¯æœ¬3ï¼šRDBå¤‡ä»½æ–‡ä»¶ï¼ˆæœ¬åœ°ç£ç›˜ï¼‰

å­˜å‚¨ä»‹è´¨ï¼š
ä»‹è´¨1ï¼šSSDå›ºæ€ç¡¬ç›˜ï¼ˆé«˜æ€§èƒ½ï¼‰
ä»‹è´¨2ï¼šæœºæ¢°ç¡¬ç›˜ï¼ˆå¤§å®¹é‡ï¼‰

å¼‚åœ°å¤‡ä»½ï¼š
äº‘ç«¯å­˜å‚¨æˆ–è¿œç¨‹æœºæˆ¿å¤‡ä»½
```

**ðŸ”¸ å®žæ–½æž¶æž„å›¾**
```
ç”Ÿäº§çŽ¯å¢ƒ                     å¤‡ä»½çŽ¯å¢ƒ                   å¼‚åœ°çŽ¯å¢ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redisä¸»åº“   â”‚ â•â•â•åŒæ­¥â•â•â•â–¶ â”‚ Redisä»Žåº“   â”‚           â”‚             â”‚
â”‚ (å†…å­˜+AOF)  â”‚             â”‚ (å†…å­˜+RDB)  â”‚           â”‚  äº‘ç«¯å¤‡ä»½   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ (å®šæœŸä¸Šä¼ )  â”‚
       â”‚                           â”‚                  â”‚             â”‚
       â–¼                           â–¼                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â–²
â”‚ æœ¬åœ°SSDå¤‡ä»½ â”‚             â”‚ ç½‘ç»œå­˜å‚¨å¤‡ä»½ â”‚ â”€â”€â”€â”€â”€â”€æ–‡ä»¶ä¼ è¾“â”€â”€â”€â”€â”€â”€â”˜
â”‚ (æ¯å°æ—¶)    â”‚             â”‚ (æ¯å¤©)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å¤‡ä»½æ–‡ä»¶ç®¡ç†è§„èŒƒ


**ðŸ”¸ å‘½åè§„èŒƒ**
```bash
# æ ‡å‡†å¤‡ä»½æ–‡ä»¶å‘½å
redis-{instance}-{type}-{timestamp}.{ext}

ç¤ºä¾‹ï¼š
redis-prod-rdb-20250828-143000.rdb      # ç”Ÿäº§çŽ¯å¢ƒRDBå¤‡ä»½
redis-prod-aof-20250828-143000.aof      # ç”Ÿäº§çŽ¯å¢ƒAOFå¤‡ä»½
redis-test-full-20250828-000000.tar.gz  # æµ‹è¯•çŽ¯å¢ƒå…¨é‡å¤‡ä»½

# ç›®å½•ç»“æž„
/backup/redis/
â”œâ”€â”€ hourly/           # å°æ—¶å¤‡ä»½ï¼ˆä¿ç•™7å¤©ï¼‰
â”œâ”€â”€ daily/            # æ—¥å¤‡ä»½ï¼ˆä¿ç•™30å¤©ï¼‰  
â”œâ”€â”€ weekly/           # å‘¨å¤‡ä»½ï¼ˆä¿ç•™12å‘¨ï¼‰
â”œâ”€â”€ monthly/          # æœˆå¤‡ä»½ï¼ˆä¿ç•™12ä¸ªæœˆï¼‰
â””â”€â”€ archive/          # å½’æ¡£å¤‡ä»½ï¼ˆé•¿æœŸä¿å­˜ï¼‰
```

**ðŸ”¸ æ–‡ä»¶æ ‡ç­¾å’Œå…ƒä¿¡æ¯**
```bash
# å¤‡ä»½æ–‡ä»¶ä¿¡æ¯è®°å½•
echo "backup_info" > redis-prod-rdb-20250828-143000.info
cat << EOF > redis-prod-rdb-20250828-143000.info
backup_type=rdb
backup_time=2025-08-28 14:30:00
source_server=redis-prod-01
redis_version=7.0.0
data_size=2.5GB
keys_count=1500000
backup_duration=45s
verification_status=passed
EOF
```

### 5.3 æ¢å¤æ¼”ç»ƒåˆ¶åº¦


**ðŸ”¸ æ¼”ç»ƒè®¡åˆ’**
```
æœˆåº¦æ¼”ç»ƒï¼šæ¢å¤æœ€è¿‘çš„å¤‡ä»½åˆ°æµ‹è¯•çŽ¯å¢ƒ
å­£åº¦æ¼”ç»ƒï¼šæ¨¡æ‹Ÿæœºæˆ¿æ•…éšœï¼Œå¼‚åœ°æ¢å¤
å¹´åº¦æ¼”ç»ƒï¼šæ¨¡æ‹Ÿå¤§è§„æ¨¡ç¾éš¾ï¼Œå…¨é¢æ¢å¤

æ¼”ç»ƒå†…å®¹ï¼š
1. å¤‡ä»½æ–‡ä»¶èŽ·å–å’Œä¼ è¾“
2. çŽ¯å¢ƒå‡†å¤‡å’Œé…ç½®
3. æ•°æ®æ¢å¤å’ŒéªŒè¯  
4. æœåŠ¡å¯åŠ¨å’Œæµ‹è¯•
5. é—®é¢˜è®°å½•å’Œæ”¹è¿›
```

**ðŸ”¸ æ¼”ç»ƒè„šæœ¬**
```bash
#!/bin/bash
# æ¢å¤æ¼”ç»ƒè„šæœ¬

BACKUP_FILE=$1
TEST_ENV_DIR="/tmp/redis-recovery-test"
TEST_PORT=6380

echo "å¼€å§‹æ¢å¤æ¼”ç»ƒ..."

# 1. å‡†å¤‡æµ‹è¯•çŽ¯å¢ƒ
mkdir -p $TEST_ENV_DIR
cd $TEST_ENV_DIR

# 2. å¤åˆ¶å¤‡ä»½æ–‡ä»¶
cp $BACKUP_FILE ./dump.rdb

# 3. å¯åŠ¨æµ‹è¯•Rediså®žä¾‹
redis-server --port $TEST_PORT --dir $TEST_ENV_DIR --daemonize yes

# 4. ç­‰å¾…å¯åŠ¨å®Œæˆ
sleep 5

# 5. éªŒè¯æ¢å¤ç»“æžœ
echo "éªŒè¯å…³é”®æ•°æ®..."
redis-cli -p $TEST_PORT DBSIZE
redis-cli -p $TEST_PORT GET test_key
redis-cli -p $TEST_PORT INFO memory

# 6. è®°å½•æ¼”ç»ƒç»“æžœ
echo "æ¼”ç»ƒæ—¶é—´: $(date)" >> recovery_drill.log
echo "å¤‡ä»½æ–‡ä»¶: $BACKUP_FILE" >> recovery_drill.log
echo "æ¢å¤çŠ¶æ€: æˆåŠŸ" >> recovery_drill.log

# 7. æ¸…ç†æµ‹è¯•çŽ¯å¢ƒ
redis-cli -p $TEST_PORT SHUTDOWN
rm -rf $TEST_ENV_DIR

echo "æ¢å¤æ¼”ç»ƒå®Œæˆ"
```

### 5.4 æŒç»­æ”¹è¿›æœºåˆ¶


**ðŸ”¸ ç›‘æŽ§æŒ‡æ ‡ä½“ç³»**
```
å¤‡ä»½æˆåŠŸçŽ‡ï¼š
- ç›®æ ‡ï¼š99.9%
- ç›‘æŽ§ï¼šæ¯æ¬¡å¤‡ä»½æ˜¯å¦æˆåŠŸ
- å‘Šè­¦ï¼šè¿žç»­å¤±è´¥2æ¬¡

æ¢å¤æ—¶é—´ç›‘æŽ§ï¼š
- ç›®æ ‡ï¼šç¬¦åˆRTOè¦æ±‚
- ç›‘æŽ§ï¼šå®žé™…æ¢å¤æ—¶é—´æµ‹é‡
- ä¼˜åŒ–ï¼šæµç¨‹æ”¹è¿›å’Œèµ„æºè°ƒæ•´

æ•°æ®ä¸€è‡´æ€§ç›‘æŽ§ï¼š
- ç›®æ ‡ï¼š100%æ•°æ®æ­£ç¡®
- ç›‘æŽ§ï¼šæ¢å¤åŽæ•°æ®éªŒè¯
- ä¿éšœï¼šå¤šé‡æ£€éªŒæœºåˆ¶
```

**ðŸ”¸ æ”¹è¿›æµç¨‹**
```
é—®é¢˜å‘çŽ° â†’ é—®é¢˜åˆ†æž â†’ è§£å†³æ–¹æ¡ˆ â†’ æ–¹æ¡ˆéªŒè¯ â†’ æµç¨‹æ›´æ–°

å…·ä½“æ­¥éª¤ï¼š
1. æ”¶é›†å¤‡ä»½æ¢å¤è¿‡ç¨‹ä¸­çš„é—®é¢˜
2. åˆ†æžé—®é¢˜æ ¹æœ¬åŽŸå› 
3. åˆ¶å®šæ”¹è¿›æ–¹æ¡ˆ
4. åœ¨æµ‹è¯•çŽ¯å¢ƒéªŒè¯æ–¹æ¡ˆ
5. æ›´æ–°å¤‡ä»½æ¢å¤æµç¨‹æ–‡æ¡£
6. åŸ¹è®­ç›¸å…³äººå‘˜
```

---

## 6. ðŸ› ï¸ å¤‡ä»½å·¥å…·ä¸Žæ“ä½œ


### 6.1 Rediså†…ç½®å¤‡ä»½å‘½ä»¤


**ðŸ”¸ æ‰‹åŠ¨å¤‡ä»½å‘½ä»¤**
```bash
# åŽå°ä¿å­˜RDBï¼ˆæŽ¨èï¼‰
127.0.0.1:6379> BGSAVE
Background saving started

# å‰å°ä¿å­˜RDBï¼ˆé˜»å¡žï¼Œè°¨æ…Žä½¿ç”¨ï¼‰
127.0.0.1:6379> SAVE  
OK

# é‡å†™AOFæ–‡ä»¶
127.0.0.1:6379> BGREWRITEAOF
Background append only file rewriting started

# æ£€æŸ¥ä¿å­˜çŠ¶æ€
127.0.0.1:6379> LASTSAVE
(integer) 1609459200    # æœ€åŽä¿å­˜æ—¶é—´æˆ³

# æ£€æŸ¥åŽå°æ“ä½œçŠ¶æ€
127.0.0.1:6379> INFO persistence
# rdb_bgsave_in_progress:0     # 0=æ²¡åœ¨è¿›è¡ŒRDBå¤‡ä»½
# aof_rewrite_in_progress:0    # 0=æ²¡åœ¨è¿›è¡ŒAOFé‡å†™
```

### 6.2 è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬


**ðŸ”¸ å®Œæ•´å¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
# Redisè‡ªåŠ¨å¤‡ä»½è„šæœ¬ v2.0

# é…ç½®éƒ¨åˆ†
REDIS_HOST="127.0.0.1"
REDIS_PORT="6379"
REDIS_PASSWORD=""
BACKUP_DIR="/backup/redis"
LOG_FILE="/var/log/redis-backup.log"
RETENTION_DAYS=7

# åˆ›å»ºæ—¶é—´æˆ³
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
DATE_DIR=$(date +"%Y%m%d")

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_DIR/$DATE_DIR"

# è®°å½•å¼€å§‹æ—¶é—´
echo "[$(date)] å¼€å§‹Rediså¤‡ä»½..." >> $LOG_FILE

# è§¦å‘RDBå¤‡ä»½
if [ -n "$REDIS_PASSWORD" ]; then
    LAST_SAVE_BEFORE=$(redis-cli -h $REDIS_HOST -p $REDIS_PORT -a $REDIS_PASSWORD LASTSAVE)
    redis-cli -h $REDIS_HOST -p $REDIS_PORT -a $REDIS_PASSWORD BGSAVE
else
    LAST_SAVE_BEFORE=$(redis-cli -h $REDIS_HOST -p $REDIS_PORT LASTSAVE)
    redis-cli -h $REDIS_HOST -p $REDIS_PORT BGSAVE
fi

# ç­‰å¾…å¤‡ä»½å®Œæˆ
echo "[$(date)] ç­‰å¾…å¤‡ä»½å®Œæˆ..." >> $LOG_FILE
while true; do
    if [ -n "$REDIS_PASSWORD" ]; then
        LAST_SAVE_NOW=$(redis-cli -h $REDIS_HOST -p $REDIS_PORT -a $REDIS_PASSWORD LASTSAVE)
    else  
        LAST_SAVE_NOW=$(redis-cli -h $REDIS_HOST -p $REDIS_PORT LASTSAVE)
    fi
    
    if [ "$LAST_SAVE_NOW" -gt "$LAST_SAVE_BEFORE" ]; then
        break
    fi
    sleep 2
done

# å¤åˆ¶å¤‡ä»½æ–‡ä»¶
REDIS_DATA_DIR=$(redis-cli -h $REDIS_HOST -p $REDIS_PORT CONFIG GET dir | tail -1)
RDB_FILENAME=$(redis-cli -h $REDIS_HOST -p $REDIS_PORT CONFIG GET dbfilename | tail -1)

cp "$REDIS_DATA_DIR/$RDB_FILENAME" "$BACKUP_DIR/$DATE_DIR/dump_$TIMESTAMP.rdb"

# éªŒè¯å¤‡ä»½æ–‡ä»¶
if redis-check-rdb "$BACKUP_DIR/$DATE_DIR/dump_$TIMESTAMP.rdb" > /dev/null 2>&1; then
    echo "[$(date)] å¤‡ä»½æˆåŠŸ: dump_$TIMESTAMP.rdb" >> $LOG_FILE
    
    # åŽ‹ç¼©å¤‡ä»½æ–‡ä»¶
    gzip "$BACKUP_DIR/$DATE_DIR/dump_$TIMESTAMP.rdb"
    
    # æ¸…ç†æ—§å¤‡ä»½
    find $BACKUP_DIR -name "*.gz" -mtime +$RETENTION_DAYS -delete
    
    echo "[$(date)] å¤‡ä»½æµç¨‹å®Œæˆ" >> $LOG_FILE
else
    echo "[$(date)] å¤‡ä»½æ–‡ä»¶éªŒè¯å¤±è´¥!" >> $LOG_FILE
    exit 1
fi
```

### 6.3 å¤‡ä»½è‡ªåŠ¨åŒ–è°ƒåº¦


**ðŸ”¸ Crontabå®šæ—¶ä»»åŠ¡**
```bash
# ç¼–è¾‘å®šæ—¶ä»»åŠ¡
crontab -e

# æ·»åŠ å¤‡ä»½ä»»åŠ¡
# æ¯å°æ—¶çš„ç¬¬5åˆ†é’Ÿè¿›è¡Œå¤‡ä»½
5 */1 * * * /opt/redis/scripts/backup.sh hourly

# æ¯å¤©å‡Œæ™¨2ç‚¹è¿›è¡Œå…¨é‡å¤‡ä»½
0 2 * * * /opt/redis/scripts/backup.sh daily

# æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹è¿›è¡Œå‘¨å¤‡ä»½
0 3 * * 0 /opt/redis/scripts/backup.sh weekly

# æ¯æœˆ1å·å‡Œæ™¨4ç‚¹è¿›è¡Œæœˆå¤‡ä»½
0 4 1 * * /opt/redis/scripts/backup.sh monthly
```

**ðŸ”¸ systemdå®šæ—¶å™¨ï¼ˆçŽ°ä»£Linuxç³»ç»Ÿï¼‰**
```bash
# åˆ›å»ºå¤‡ä»½æœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/redis-backup.service << EOF
[Unit]
Description=Redis Backup Service
After=network.target

[Service]
Type=oneshot
User=redis
ExecStart=/opt/redis/scripts/backup.sh
StandardOutput=journal
StandardError=journal
EOF

# åˆ›å»ºå®šæ—¶å™¨æ–‡ä»¶
cat > /etc/systemd/system/redis-backup.timer << EOF
[Unit]  
Description=Redis Backup Timer
Requires=redis-backup.service

[Timer]
OnCalendar=*-*-* *:05:00    # æ¯å°æ—¶ç¬¬5åˆ†é’Ÿ
Persistent=true

[Install]
WantedBy=timers.target
EOF

# å¯ç”¨å®šæ—¶å™¨
systemctl daemon-reload
systemctl enable redis-backup.timer
systemctl start redis-backup.timer
```

---

## 7. ðŸ”„ æ¢å¤æ¼”ç»ƒä¸Žæµ‹è¯•


### 7.1 æ¢å¤æ“ä½œæµç¨‹


**ðŸ”¸ RDBæ¢å¤æµç¨‹**
```bash
# 1. åœæ­¢RedisæœåŠ¡
systemctl stop redis

# 2. å¤‡ä»½å½“å‰æ•°æ®ï¼ˆé¢„é˜²æŽªæ–½ï¼‰
cp /var/lib/redis/dump.rdb /var/lib/redis/dump.rdb.backup

# 3. æ¢å¤å¤‡ä»½æ–‡ä»¶
cp /backup/redis/dump-20250828.rdb /var/lib/redis/dump.rdb
chown redis:redis /var/lib/redis/dump.rdb

# 4. å¯åŠ¨RedisæœåŠ¡
systemctl start redis

# 5. éªŒè¯æ¢å¤ç»“æžœ
redis-cli PING
redis-cli DBSIZE
redis-cli GET critical_key
```

**ðŸ”¸ AOFæ¢å¤æµç¨‹**
```bash
# 1. åœæ­¢RedisæœåŠ¡
systemctl stop redis

# 2. æ¢å¤AOFæ–‡ä»¶
cp /backup/redis/appendonly-20250828.aof /var/lib/redis/appendonly.aof
chown redis:redis /var/lib/redis/appendonly.aof

# 3. æ£€æŸ¥AOFæ–‡ä»¶å®Œæ•´æ€§
redis-check-aof /var/lib/redis/appendonly.aof

# 4. å¦‚æžœAOFæ–‡ä»¶æŸåï¼Œä¿®å¤æ–‡ä»¶
redis-check-aof --fix /var/lib/redis/appendonly.aof

# 5. å¯åŠ¨RedisæœåŠ¡
systemctl start redis

# 6. éªŒè¯æ•°æ®
redis-cli INFO stats
```

### 7.2 æµ‹è¯•çŽ¯å¢ƒæ­å»º


**ðŸ”¸ éš”ç¦»æµ‹è¯•çŽ¯å¢ƒ**
```bash
# åˆ›å»ºç‹¬ç«‹çš„æµ‹è¯•å®žä¾‹
mkdir -p /tmp/redis-recovery-test
cd /tmp/redis-recovery-test

# å¤åˆ¶å¤‡ä»½æ–‡ä»¶
cp /backup/redis/dump.rdb ./

# åˆ›å»ºæµ‹è¯•é…ç½®æ–‡ä»¶
cat > redis-test.conf << EOF
port 6380
dir ./
dbfilename dump.rdb
appendonly no
save ""
EOF

# å¯åŠ¨æµ‹è¯•å®žä¾‹
redis-server redis-test.conf --daemonize yes

# è¿žæŽ¥æµ‹è¯•å®žä¾‹
redis-cli -p 6380
```

### 7.3 æ•°æ®ä¸€è‡´æ€§éªŒè¯


**ðŸ”¸ å…³é”®æ•°æ®éªŒè¯**
```bash
# éªŒè¯æ•°æ®æ€»é‡
TEST_DBSIZE=$(redis-cli -p 6380 DBSIZE)
PROD_DBSIZE=$(redis-cli -p 6379 DBSIZE)

if [ "$TEST_DBSIZE" -eq "$PROD_DBSIZE" ]; then
    echo "æ•°æ®é‡éªŒè¯é€šè¿‡"
else
    echo "æ•°æ®é‡ä¸ä¸€è‡´: ç”Ÿäº§($PROD_DBSIZE) vs æµ‹è¯•($TEST_DBSIZE)"
fi

# éªŒè¯å…³é”®ä¸šåŠ¡æ•°æ®
CRITICAL_KEYS=("user:count" "order:count" "payment:total")

for key in "${CRITICAL_KEYS[@]}"; do
    PROD_VALUE=$(redis-cli -p 6379 GET $key)
    TEST_VALUE=$(redis-cli -p 6380 GET $key)
    
    if [ "$PROD_VALUE" = "$TEST_VALUE" ]; then
        echo "é”® $key éªŒè¯é€šè¿‡"
    else
        echo "é”® $key æ•°æ®ä¸ä¸€è‡´"
    fi
done
```

**ðŸ”¸ æ€§èƒ½éªŒè¯**
```bash
# ä½¿ç”¨redis-benchmarkæµ‹è¯•æ¢å¤åŽçš„æ€§èƒ½
redis-benchmark -p 6380 -t GET,SET -n 10000 -q

# å¯¹æ¯”ç”Ÿäº§çŽ¯å¢ƒæ€§èƒ½
redis-benchmark -p 6379 -t GET,SET -n 10000 -q

# å†…å­˜ä½¿ç”¨å¯¹æ¯”
redis-cli -p 6379 INFO memory | grep used_memory_human
redis-cli -p 6380 INFO memory | grep used_memory_human
```

---

## 8. ðŸ“Š ç›‘æŽ§å‘Šè­¦ä½“ç³»


### 8.1 å¤‡ä»½ç›‘æŽ§æŒ‡æ ‡


**ðŸ”¸ å…³é”®ç›‘æŽ§æŒ‡æ ‡**
```bash
# å¤‡ä»½æˆåŠŸçŽ‡ç›‘æŽ§
backup_success_rate = æˆåŠŸå¤‡ä»½æ¬¡æ•° / æ€»å¤‡ä»½æ¬¡æ•° Ã— 100%

# å¤‡ä»½æ–‡ä»¶å¤§å°è¶‹åŠ¿
backup_file_size_trend = å½“å‰å¤‡ä»½å¤§å° vs åŽ†å²å¹³å‡å¤§å°

# å¤‡ä»½è€—æ—¶ç›‘æŽ§  
backup_duration = å¤‡ä»½å®Œæˆæ—¶é—´ - å¤‡ä»½å¼€å§‹æ—¶é—´

# æ¢å¤æ—¶é—´ç›‘æŽ§
recovery_time = æ¢å¤å®Œæˆæ—¶é—´ - æ¢å¤å¼€å§‹æ—¶é—´

# æ•°æ®ä¸€è‡´æ€§ç›‘æŽ§
data_consistency_rate = éªŒè¯é€šè¿‡çš„å…³é”®æ•°æ® / æ€»å…³é”®æ•°æ® Ã— 100%
```

### 8.2 å‘Šè­¦è§„åˆ™è®¾ç½®


**ðŸ”¸ å¤‡ä»½å‘Šè­¦è§„åˆ™**
```yaml
# å¤‡ä»½å¤±è´¥å‘Šè­¦
backup_failure:
  condition: å¤‡ä»½å¤±è´¥
  level: ä¸¥é‡
  action: ç«‹å³é€šçŸ¥è¿ç»´äººå‘˜

# å¤‡ä»½æ–‡ä»¶å¼‚å¸¸å‘Šè­¦  
backup_file_anomaly:
  condition: å¤‡ä»½æ–‡ä»¶å¤§å°å¼‚å¸¸ï¼ˆåå·®è¶…è¿‡30%ï¼‰
  level: è­¦å‘Š
  action: æ£€æŸ¥æ•°æ®å˜åŒ–åŽŸå› 

# æ¢å¤æ—¶é—´è¶…æ ‡å‘Šè­¦
recovery_timeout:
  condition: æ¢å¤æ—¶é—´è¶…è¿‡RTOç›®æ ‡
  level: ä¸¥é‡  
  action: åˆ†æžç“¶é¢ˆï¼Œä¼˜åŒ–æµç¨‹

# å­˜å‚¨ç©ºé—´ä¸è¶³å‘Šè­¦
storage_space_low:
  condition: å¤‡ä»½å­˜å‚¨ä½¿ç”¨çŽ‡è¶…è¿‡80%
  level: è­¦å‘Š
  action: æ¸…ç†æ—§å¤‡ä»½æˆ–æ‰©å®¹
```

### 8.3 è‡ªåŠ¨åŒ–è¿ç»´


**ðŸ”¸ æ™ºèƒ½å¤‡ä»½è°ƒåº¦**
```python
# Pythonè‡ªåŠ¨åŒ–å¤‡ä»½ç®¡ç†
import redis
import os
import time
import logging
from datetime import datetime, timedelta

class RedisBackupManager:
    def __init__(self, redis_config):
        self.redis = redis.Redis(**redis_config)
        self.backup_dir = "/backup/redis"
        self.logger = self._setup_logger()
    
    def _setup_logger(self):
        logging.basicConfig(
            filename='/var/log/redis-backup.log',
            level=logging.INFO,
            format='%(asctime)s - %(levelname)s - %(message)s'
        )
        return logging.getLogger(__name__)
    
    def trigger_backup(self, backup_type='rdb'):
        """è§¦å‘å¤‡ä»½"""
        try:
            if backup_type == 'rdb':
                # èŽ·å–å¤‡ä»½å‰çš„ä¿å­˜æ—¶é—´
                last_save_before = self.redis.lastsave()
                
                # è§¦å‘åŽå°ä¿å­˜
                self.redis.bgsave()
                
                # ç­‰å¾…ä¿å­˜å®Œæˆ
                while self.redis.lastsave() <= last_save_before:
                    time.sleep(1)
                
                self.logger.info("RDBå¤‡ä»½å®Œæˆ")
                return True
                
            elif backup_type == 'aof':
                self.redis.bgrewriteaof()
                self.logger.info("AOFé‡å†™å¼€å§‹")
                return True
                
        except Exception as e:
            self.logger.error(f"å¤‡ä»½å¤±è´¥: {e}")
            return False
    
    def cleanup_old_backups(self, days=7):
        """æ¸…ç†æ—§å¤‡ä»½"""
        cutoff_date = datetime.now() - timedelta(days=days)
        
        for filename in os.listdir(self.backup_dir):
            file_path = os.path.join(self.backup_dir, filename)
            file_time = datetime.fromtimestamp(os.path.getmtime(file_path))
            
            if file_time < cutoff_date:
                os.remove(file_path)
                self.logger.info(f"åˆ é™¤æ—§å¤‡ä»½: {filename}")
    
    def verify_backup(self, backup_file):
        """éªŒè¯å¤‡ä»½æ–‡ä»¶"""
        # è¿™é‡Œå¯ä»¥è°ƒç”¨redis-check-rdbç­‰å·¥å…·éªŒè¯
        # è¿”å›žéªŒè¯ç»“æžœ
        pass

# ä½¿ç”¨ç¤ºä¾‹
backup_manager = RedisBackupManager({
    'host': 'localhost',
    'port': 6379,
    'db': 0
})

# æ‰§è¡Œå¤‡ä»½
backup_manager.trigger_backup('rdb')

# æ¸…ç†æ—§å¤‡ä»½
backup_manager.cleanup_old_backups(7)
```

---

## 9. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ðŸ”¸ å¤‡ä»½ä½“ç³»æž¶æž„**
```
å®žæ—¶æŒä¹…åŒ–ï¼šAOFä¿è¯æ•°æ®ä¸ä¸¢å¤±
å®šæœŸå¿«ç…§ï¼šRDBæä¾›å¿«é€Ÿæ¢å¤
å¼‚åœ°å¤‡ä»½ï¼šé˜²èŒƒæœºæˆ¿çº§åˆ«ç¾éš¾
äº‘ç«¯å¤‡ä»½ï¼šæä¾›æœ€åŽçš„å®‰å…¨ä¿éšœ
```

**ðŸ”¸ å…³é”®å¤‡ä»½å‘½ä»¤**
```bash
BGSAVE          # åŽå°RDBå¤‡ä»½
BGREWRITEAOF    # AOFæ–‡ä»¶é‡å†™
LASTSAVE        # æŸ¥çœ‹æœ€åŽå¤‡ä»½æ—¶é—´
CONFIG GET save # æŸ¥çœ‹è‡ªåŠ¨å¤‡ä»½é…ç½®
INFO persistence # æŸ¥çœ‹æŒä¹…åŒ–çŠ¶æ€
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ å¤‡ä»½ç­–ç•¥çš„å±‚æ¬¡æ€§**
```
ç¬¬1å±‚ï¼šå®žæ—¶æŒä¹…åŒ–ï¼ˆé˜²æ­¢è¿›ç¨‹å´©æºƒï¼‰
ç¬¬2å±‚ï¼šæœ¬åœ°å¤‡ä»½ï¼ˆé˜²æ­¢æ–‡ä»¶æŸåï¼‰
ç¬¬3å±‚ï¼šå¼‚åœ°å¤‡ä»½ï¼ˆé˜²æ­¢æœºæˆ¿æ•…éšœï¼‰  
ç¬¬4å±‚ï¼šäº‘ç«¯å¤‡ä»½ï¼ˆé˜²æ­¢åœ°åŒºç¾éš¾ï¼‰

å°±åƒï¼šéšèº«æºå¸¦â†’å®¶é‡Œä¿é™©æŸœâ†’é“¶è¡Œé‡‘åº“â†’å¼‚åœ°ä¿é™©ç®±
```

**ðŸ”¹ RTOå’ŒRPOçš„å¹³è¡¡**
```
RTOè¦æ±‚å¿« â†’ é€‰æ‹©RDBæ¢å¤ï¼ˆæ–‡ä»¶å°ï¼ŒåŠ è½½å¿«ï¼‰
RPOè¦æ±‚å‡† â†’ é€‰æ‹©AOFæ¢å¤ï¼ˆæ•°æ®å®Œæ•´ï¼‰
ä¸¤è€…å…¼é¡¾ â†’ æ··åˆæŒä¹…åŒ–ï¼ˆå¿«é€Ÿ+å®Œæ•´ï¼‰

å®žé™…é€‰æ‹©è¦çœ‹ä¸šåŠ¡éœ€æ±‚ï¼Œä¸æ˜¯è¶Šå¿«è¶Šå¥½ï¼Œä¹Ÿä¸æ˜¯è¶Šå®Œæ•´è¶Šå¥½
```

**ðŸ”¹ 3-2-1åŽŸåˆ™çš„å®žé™…æ„ä¹‰**
```
3ä»½å‰¯æœ¬ï¼šä»»ä½•å•ç‚¹æ•…éšœéƒ½ä¸ä¼šå¯¼è‡´æ•°æ®å½»åº•ä¸¢å¤±
2ç§ä»‹è´¨ï¼šé¿å…å•ä¸€å­˜å‚¨æŠ€æœ¯çš„é£Žé™©
1ä¸ªå¼‚åœ°ï¼šé˜²èŒƒåœ°ç†ä½ç½®ç›¸å…³çš„ç¾éš¾

è¿™ä¸æ˜¯æ•™æ¡ï¼Œæ˜¯é€šè¿‡è¡€çš„æ•™è®­æ€»ç»“å‡ºçš„ç»éªŒ
```

### 9.3 å®žé™…åº”ç”¨æŒ‡å¯¼


**ðŸŽ¯ ä¸åŒä¸šåŠ¡çš„å¤‡ä»½ç­–ç•¥**
```
ç”µå•†ç³»ç»Ÿï¼š
- RTO â‰¤ 5åˆ†é’Ÿï¼ŒRPO â‰¤ 1ç§’
- ä¸»ä»ŽåŒæ­¥ + AOF everysec + 15åˆ†é’ŸRDB + äº‘å¤‡ä»½

å†…å®¹ç®¡ç†ï¼š
- RTO â‰¤ 30åˆ†é’Ÿï¼ŒRPO â‰¤ 5åˆ†é’Ÿ  
- AOF + 1å°æ—¶RDB + å¼‚åœ°å¤‡ä»½

æ•°æ®åˆ†æžï¼š
- RTO â‰¤ 2å°æ—¶ï¼ŒRPO â‰¤ 1å°æ—¶
- æ¯å°æ—¶RDB + æ¯å¤©å…¨é‡å¤‡ä»½
```

**âš ï¸ å¸¸è§è¯¯åŒº**
```
è¯¯åŒº1ï¼šåªåšæŒä¹…åŒ–ä¸åšå¤‡ä»½
æ­£è§£ï¼šæŒä¹…åŒ–æ–‡ä»¶ä¹Ÿå¯èƒ½æŸåï¼Œå¿…é¡»é¢å¤–å¤‡ä»½

è¯¯åŒº2ï¼šå¤‡ä»½é¢‘çŽ‡è¶Šé«˜è¶Šå¥½
æ­£è§£ï¼šè¦å¹³è¡¡æ€§èƒ½å½±å“å’Œæ•°æ®å®‰å…¨éœ€æ±‚

è¯¯åŒº3ï¼šåªå¤‡ä»½ä¸æµ‹è¯•æ¢å¤
æ­£è§£ï¼šå®šæœŸæ¼”ç»ƒæ¢å¤æµç¨‹ï¼Œç¡®ä¿å¤‡ä»½æœ‰æ•ˆ

è¯¯åŒº4ï¼šæŠŠæ‰€æœ‰é¸¡è›‹æ”¾ä¸€ä¸ªç¯®å­
æ­£è§£ï¼šå¤šåœ°åŸŸã€å¤šä»‹è´¨ã€å¤šå±‚æ¬¡å¤‡ä»½
```

### 9.4 å®žæ–½æ£€æŸ¥æ¸…å•


**ðŸ”¸ å¤‡ä»½ä½“ç³»å»ºè®¾æ£€æŸ¥**
```
- [ ] å·²é…ç½®AOFæˆ–æ··åˆæŒä¹…åŒ–
- [ ] å·²è®¾ç½®RDBè‡ªåŠ¨å¤‡ä»½ç­–ç•¥
- [ ] å·²å»ºç«‹æœ¬åœ°å¤‡ä»½æ–‡ä»¶ç®¡ç†
- [ ] å·²é…ç½®å¼‚åœ°å¤‡ä»½ä¼ è¾“
- [ ] å·²è®¾ç½®äº‘ç«¯å¤‡ä»½ä¸Šä¼ 
- [ ] å·²åˆ¶å®šå¤‡ä»½ä¿ç•™ç­–ç•¥
- [ ] å·²å»ºç«‹å¤‡ä»½éªŒè¯æœºåˆ¶
- [ ] å·²è®¾ç½®ç›‘æŽ§å‘Šè­¦è§„åˆ™
```

**ðŸ”¸ ç¾éš¾æ¢å¤å‡†å¤‡æ£€æŸ¥**
```
- [ ] å·²æ˜Žç¡®RTOå’ŒRPOç›®æ ‡
- [ ] å·²åˆ†ç±»ä¸åŒç¾éš¾åœºæ™¯
- [ ] å·²åˆ¶å®šæ¢å¤æ“ä½œæ‰‹å†Œ
- [ ] å·²å‡†å¤‡æ¢å¤çŽ¯å¢ƒèµ„æº
- [ ] å·²å»ºç«‹æ¢å¤å›¢é˜Ÿè”ç³»æ–¹å¼
- [ ] å·²åˆ¶å®šä¸šåŠ¡æ¢å¤ä¼˜å…ˆçº§
- [ ] å·²å®‰æŽ’å®šæœŸæ¢å¤æ¼”ç»ƒ
- [ ] å·²å»ºç«‹æ¢å¤æµç¨‹æ”¹è¿›æœºåˆ¶
```

**ðŸ§  è®°å¿†è¦ç‚¹**:
```
"å®žæ—¶æŒä¹…é˜²å´©æºƒï¼Œå®šæœŸå¿«ç…§ä¿å®‰å…¨
å¼‚åœ°å¤‡ä»½é˜²æœºæˆ¿ï¼Œäº‘ç«¯å­˜å‚¨ä¿ä¸‡å…¨  
RTOå¿«é€Ÿè¦æ¢å¤ï¼ŒRPOå‡†ç¡®è¦å®Œæ•´
ä¸‰äºŒä¸€åŽŸåˆ™è®°å¿ƒé—´ï¼Œæ¼”ç»ƒéªŒè¯ä¸èƒ½ç¼º"
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å¤‡ä»½ä½“ç³»æ˜¯å¤šå±‚é˜²æŠ¤ï¼Œä¸æ˜¯å•ä¸€æŠ€æœ¯
- RTOå’ŒRPOè¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆç†è®¾å®š
- 3-2-1åŽŸåˆ™æ˜¯å¤‡ä»½ç­–ç•¥çš„åŸºç¡€æ¡†æž¶
- å®šæœŸæ¼”ç»ƒå’ŒéªŒè¯æ˜¯å¤‡ä»½ä½“ç³»çš„é‡è¦çŽ¯èŠ‚