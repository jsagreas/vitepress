---
title: 4ã€ç¼“å­˜ç©¿é€å‡»ç©¿é›ªå´©è¯¦è§£
---
## ğŸ“š ç›®å½•

1. [ç¼“å­˜é—®é¢˜æ¦‚è¿°](#1-ç¼“å­˜é—®é¢˜æ¦‚è¿°)
2. [ç¼“å­˜ç©¿é€è¯¦è§£](#2-ç¼“å­˜ç©¿é€è¯¦è§£)
3. [ç¼“å­˜å‡»ç©¿è¯¦è§£](#3-ç¼“å­˜å‡»ç©¿è¯¦è§£)
4. [ç¼“å­˜é›ªå´©è¯¦è§£](#4-ç¼“å­˜é›ªå´©è¯¦è§£)
5. [ç»¼åˆé˜²æŠ¤ç­–ç•¥](#5-ç»¼åˆé˜²æŠ¤ç­–ç•¥)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ç¼“å­˜é—®é¢˜æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é—®é¢˜


**ğŸ”¸ ç¼“å­˜çš„åŸºæœ¬ä½œç”¨**
```
æ­£å¸¸ç¼“å­˜å·¥ä½œæµç¨‹ï¼š

ç”¨æˆ·è¯·æ±‚ â†’ æ£€æŸ¥ç¼“å­˜ â†’ ç¼“å­˜å‘½ä¸­ â†’ è¿”å›æ•°æ®
               â†“
          ç¼“å­˜æœªå‘½ä¸­ â†’ æŸ¥è¯¢æ•°æ®åº“ â†’ æ›´æ–°ç¼“å­˜ â†’ è¿”å›æ•°æ®
```

> **ç¼“å­˜æœ¬è´¨**ï¼šç¼“å­˜å°±åƒä¸€ä¸ª"å¿«é€Ÿå–è´§ä»“åº“"ï¼ŒæŠŠç»å¸¸ç”¨çš„å•†å“æ”¾åœ¨é—¨å£ï¼Œéœ€è¦æ—¶ç›´æ¥æ‹¿ï¼Œä¸ç”¨è·‘åˆ°åé¢çš„å¤§ä»“åº“å»æ‰¾ã€‚

**âš ï¸ ä¸‰å¤§ç¼“å­˜é—®é¢˜**
```
ç¼“å­˜é—®é¢˜åˆ†ç±»ï¼š

                    ç¼“å­˜é—®é¢˜
                  /    |    \
            ç¼“å­˜ç©¿é€  ç¼“å­˜å‡»ç©¿  ç¼“å­˜é›ªå´©
               |        |        |
          æŸ¥ä¸å­˜åœ¨çš„  çƒ­ç‚¹keyå¤±æ•ˆ  å¤§é‡keyåŒæ—¶å¤±æ•ˆ
```

### 1.2 é—®é¢˜å±å®³å¯¹æ¯”


| **é—®é¢˜ç±»å‹** | **æ ¸å¿ƒé—®é¢˜** | **å½±å“ç¨‹åº¦** | **ä¸»è¦å±å®³** |
|-------------|-------------|-------------|-------------|
| **ç¼“å­˜ç©¿é€** | `æŸ¥è¯¢æ ¹æœ¬ä¸å­˜åœ¨çš„æ•°æ®` | ğŸ”´ æŒç»­æ€§ | `æ¯æ¬¡éƒ½æ‰“æ•°æ®åº“` |
| **ç¼“å­˜å‡»ç©¿** | `çƒ­ç‚¹æ•°æ®çªç„¶å¤±æ•ˆ` | ğŸŸ¡ ç¬æ—¶æ€§ | `ç¬é—´å‹å®æ•°æ®åº“` |
| **ç¼“å­˜é›ªå´©** | `å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆ` | ğŸ”´ ç¾éš¾æ€§ | `ç³»ç»Ÿå®Œå…¨ç˜«ç—ª` |

---

## 2. ğŸ•³ï¸ ç¼“å­˜ç©¿é€è¯¦è§£


### 2.1 ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€


**ğŸ”¸ ç©¿é€ç°è±¡è§£é‡Š**

> **ç”Ÿæ´»æ¯”å–»**ï¼šå°±åƒå»é¤å…ç‚¹ä¸€é“æ ¹æœ¬ä¸å­˜åœ¨çš„èœï¼ŒæœåŠ¡å‘˜æ¯æ¬¡éƒ½è¦è·‘åˆ°å¨æˆ¿é—®å¨å¸ˆï¼Œå¨å¸ˆæ¯æ¬¡éƒ½è¯´"æ²¡æœ‰è¿™é“èœ"ï¼Œä½†ä¸‹æ¬¡å®¢äººåˆç‚¹åŒæ ·çš„èœï¼ŒæœåŠ¡å‘˜è¿˜å¾—å†è·‘ä¸€è¶Ÿã€‚

```
ç¼“å­˜ç©¿é€ç¤ºæ„å›¾ï¼š

æ¶æ„è¯·æ±‚ï¼šuser_id = -1 (ä¸å­˜åœ¨çš„ç”¨æˆ·)
     â†“
æ£€æŸ¥Redisç¼“å­˜ï¼šæ²¡æœ‰keyä¸º"user:-1"çš„æ•°æ®
     â†“
æŸ¥è¯¢MySQLæ•°æ®åº“ï¼šSELECT * FROM user WHERE id = -1
     â†“
æ•°æ®åº“è¿”å›ï¼šç©ºç»“æœ
     â†“
ä¸å†™å…¥ç¼“å­˜ï¼ˆå› ä¸ºæ˜¯ç©ºç»“æœï¼‰
     â†“
ä¸‹æ¬¡ç›¸åŒè¯·æ±‚é‡å¤ä¸Šè¿°è¿‡ç¨‹ â†â”€â”€ é—®é¢˜æ‰€åœ¨ï¼
```

**ğŸš¨ ç©¿é€äº§ç”Ÿçš„åŸå› **

- **æ¶æ„æ”»å‡»**ï¼šæ•…æ„æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼Œå¦‚`user_id = -999999`
- **ä¸šåŠ¡é€»è¾‘æ¼æ´**ï¼šç¨‹åºbugå¯¼è‡´æŸ¥è¯¢æ— æ•ˆid
- **æ•°æ®ä¸ä¸€è‡´**ï¼šç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸åŒæ­¥
- **ç¼“å­˜ç­–ç•¥é—®é¢˜**ï¼šç©ºç»“æœä¸ç¼“å­˜çš„ç­–ç•¥ç¼ºé™·

### 2.2 ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆ


#### ğŸ¯ æ–¹æ¡ˆä¸€ï¼šç¼“å­˜ç©ºå€¼


**ğŸ’¡ åŸºæœ¬æ€è·¯**ï¼šæ—¢ç„¶æŸ¥ä¸åˆ°æ•°æ®ï¼Œé‚£å°±æŠŠ"æŸ¥ä¸åˆ°"è¿™ä¸ªç»“æœä¹Ÿç¼“å­˜èµ·æ¥

```java
@Service
public class UserService {
    
    public User getUserById(Long userId) {
        String key = "user:" + userId;
        
        // 1. å…ˆæŸ¥ç¼“å­˜
        String cached = redisTemplate.opsForValue().get(key);
        if (cached != null) {
            if ("NULL".equals(cached)) {
                return null; // ç¼“å­˜çš„ç©ºå€¼
            }
            return JSON.parseObject(cached, User.class);
        }
        
        // 2. ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥æ•°æ®åº“
        User user = userMapper.selectById(userId);
        
        // 3. æ›´æ–°ç¼“å­˜ï¼ˆé‡ç‚¹ï¼šç©ºå€¼ä¹Ÿè¦ç¼“å­˜ï¼‰
        if (user != null) {
            redisTemplate.opsForValue().set(key, JSON.toJSONString(user), 30, TimeUnit.MINUTES);
        } else {
            // ç¼“å­˜ç©ºå€¼ï¼Œè®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´
            redisTemplate.opsForValue().set(key, "NULL", 5, TimeUnit.MINUTES);
        }
        
        return user;
    }
}
```

**âœ… ç¼“å­˜ç©ºå€¼çš„ä¼˜ç‚¹**ï¼š
- å®ç°ç®€å•ï¼Œæ”¹åŠ¨æœ€å°
- èƒ½å¤Ÿæœ‰æ•ˆé˜»æ­¢ç›¸åŒè¯·æ±‚ç©¿é€

**âŒ ç¼“å­˜ç©ºå€¼çš„ç¼ºç‚¹**ï¼š
- å ç”¨é¢å¤–çš„ç¼“å­˜ç©ºé—´
- å¯èƒ½ç¼“å­˜å¤§é‡æ— ç”¨æ•°æ®

#### ğŸ¯ æ–¹æ¡ˆäºŒï¼šå¸ƒéš†è¿‡æ»¤å™¨


**ğŸ’¡ å¸ƒéš†è¿‡æ»¤å™¨åŸç†**

> **ç”Ÿæ´»æ¯”å–»**ï¼šå¸ƒéš†è¿‡æ»¤å™¨å°±åƒé¤å…é—¨å£çš„"ä»Šæ—¥èœå•"ï¼Œèœå•ä¸Šæ²¡æœ‰çš„èœè‚¯å®šæ²¡æœ‰ï¼Œèœå•ä¸Šæœ‰çš„èœå¯èƒ½æœ‰ï¼ˆå› ä¸ºå¯èƒ½å–å®Œäº†ï¼‰ã€‚

```
å¸ƒéš†è¿‡æ»¤å™¨å·¥ä½œæµç¨‹ï¼š

                å¸ƒéš†è¿‡æ»¤å™¨æ£€æŸ¥
ç”¨æˆ·è¯·æ±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä¸åœ¨è¿‡æ»¤å™¨ä¸­
                    â”‚                    â†“
                    â”‚              ç›´æ¥è¿”å›null
               åœ¨è¿‡æ»¤å™¨ä¸­              (ä¸€å®šä¸å­˜åœ¨)
                    â†“
              ç»§ç»­æŸ¥ç¼“å­˜å’Œæ•°æ®åº“
              (å¯èƒ½å­˜åœ¨ï¼Œéœ€è¦ç¡®è®¤)
```

**ğŸ”§ å¸ƒéš†è¿‡æ»¤å™¨å®ç°**

```java
@Component
public class BloomFilterService {
    
    private BloomFilter<String> bloomFilter;
    
    @PostConstruct
    public void init() {
        // åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨ï¼šé¢„æœŸ100ä¸‡æ•°æ®ï¼Œè¯¯åˆ¤ç‡1%
        bloomFilter = BloomFilter.create(
            Funnels.stringFunnel(Charset.defaultCharset()),
            1000000,
            0.01
        );
        
        // å°†æ‰€æœ‰æœ‰æ•ˆçš„ç”¨æˆ·IDåŠ å…¥è¿‡æ»¤å™¨
        initBloomFilter();
    }
    
    private void initBloomFilter() {
        // ä»æ•°æ®åº“åŠ è½½æ‰€æœ‰ç”¨æˆ·ID
        List<Long> userIds = userMapper.selectAllUserIds();
        for (Long userId : userIds) {
            bloomFilter.put("user:" + userId);
        }
    }
    
    public boolean mightExist(String key) {
        return bloomFilter.mightContain(key);
    }
}

@Service  
public class UserService {
    
    @Autowired
    private BloomFilterService bloomFilterService;
    
    public User getUserById(Long userId) {
        String key = "user:" + userId;
        
        // 1. å¸ƒéš†è¿‡æ»¤å™¨é¢„æ£€æŸ¥
        if (!bloomFilterService.mightExist(key)) {
            return null; // ä¸€å®šä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›
        }
        
        // 2. ç»§ç»­åŸæœ‰çš„ç¼“å­˜+æ•°æ®åº“æŸ¥è¯¢é€»è¾‘
        // ...
    }
}
```

**ğŸ“Š å¸ƒéš†è¿‡æ»¤å™¨ç‰¹ç‚¹**

| **ç‰¹ç‚¹** | **å«ä¹‰** | **å®é™…æ„ä¹‰** |
|---------|---------|-------------|
| **ç¡®å®šæ€§å¦å®š** | è¯´ä¸å­˜åœ¨å°±ä¸€å®šä¸å­˜åœ¨ | å¯ä»¥ç›´æ¥æ‹¦æˆªæ— æ•ˆè¯·æ±‚ |
| **æ¦‚ç‡æ€§è‚¯å®š** | è¯´å­˜åœ¨å¯èƒ½æ˜¯è¯¯åˆ¤ | è¿˜éœ€è¦è¿›ä¸€æ­¥éªŒè¯ |
| **ç©ºé—´é«˜æ•ˆ** | ç©ºé—´ä½¿ç”¨ä¸æ•°æ®å¤§å°æ— å…³ | 100ä¸‡ç”¨æˆ·IDåªéœ€1.2MB |
| **æ— æ³•åˆ é™¤** | ä¸æ”¯æŒåˆ é™¤å…ƒç´  | é€‚åˆç›¸å¯¹ç¨³å®šçš„æ•°æ®é›† |

#### ğŸ¯ æ–¹æ¡ˆä¸‰ï¼šæ¥å£é™æµ


**ğŸ’¡ é™æµæ€è·¯**ï¼šä»æºå¤´æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé˜²æ­¢æ¶æ„æ”»å‡»

```java
@RestController
public class UserController {
    
    // ä½¿ç”¨Rediså®ç°ç®€å•é™æµ
    @RateLimiter(value = "getUserById", rate = 10) // æ¯ç§’æœ€å¤š10æ¬¡è¯·æ±‚
    @GetMapping("/user/{id}")
    public User getUserById(@PathVariable Long id) {
        return userService.getUserById(id);
    }
}
```

### 2.3 ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆå¯¹æ¯”


| **è§£å†³æ–¹æ¡ˆ** | **å®ç°éš¾åº¦** | **é˜²æŠ¤æ•ˆæœ** | **æ€§èƒ½å½±å“** | **é€‚ç”¨åœºæ™¯** |
|-------------|-------------|-------------|-------------|-------------|
| **ç¼“å­˜ç©ºå€¼** | ğŸŸ¢ ç®€å• | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ å¾ˆå° | å¶å‘æ€§ç©¿é€ |
| **å¸ƒéš†è¿‡æ»¤å™¨** | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ å¾ˆå¥½ | ğŸŸ¡ è¾ƒå° | å¤§é‡æ¶æ„è¯·æ±‚ |
| **æ¥å£é™æµ** | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ å¾ˆå¥½ | ğŸŸ¡ è¾ƒå° | é˜²æ­¢æ”»å‡» |
| **å‚æ•°æ ¡éªŒ** | ğŸŸ¢ ç®€å• | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ å¾ˆå° | åŸºç¡€é˜²æŠ¤ |

---

## 3. ğŸ’¥ ç¼“å­˜å‡»ç©¿è¯¦è§£


### 3.1 ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿


**ğŸ”¸ å‡»ç©¿ç°è±¡è§£é‡Š**

> **ç”Ÿæ´»æ¯”å–»**ï¼šå°±åƒçƒ­é—¨é¤å…çš„æ‹›ç‰Œèœçªç„¶æ–­è´§ï¼Œå¤§é‡å®¢äººåŒæ—¶è¦ç‚¹è¿™é“èœï¼ŒæœåŠ¡å‘˜åªèƒ½ä¸€ä¸ªä¸ªè·‘å»å¨æˆ¿å‚¬ï¼Œç»“æœå¨æˆ¿è¢«å›´å¾—æ°´æ³„ä¸é€šã€‚

```
ç¼“å­˜å‡»ç©¿ç¤ºæ„å›¾ï¼š

                çƒ­ç‚¹Keyè¿‡æœŸ
                     â†“
å¤§é‡å¹¶å‘è¯·æ±‚ â”€â”€â”¬â”€â”€ è¯·æ±‚1 â”€â”€â”
              â”œâ”€â”€ è¯·æ±‚2 â”€â”€â”¤
              â”œâ”€â”€ è¯·æ±‚3 â”€â”€â”¼â”€â”€ åŒæ—¶æŸ¥è¯¢æ•°æ®åº“
              â”œâ”€â”€ è¯·æ±‚4 â”€â”€â”¤    (æ•°æ®åº“å‹åŠ›æš´å¢)
              â””â”€â”€ è¯·æ±‚N â”€â”€â”˜
```

**ğŸ”¸ å‡»ç©¿äº§ç”ŸåŸå› **

- **çƒ­ç‚¹æ•°æ®è¿‡æœŸ**ï¼šé«˜å¹¶å‘è®¿é—®çš„keyåœ¨æŸä¸ªæ—¶åˆ»è¿‡æœŸ
- **é‡å»ºè€—æ—¶**ï¼šæ•°æ®åº“æŸ¥è¯¢æˆ–è®¡ç®—è€—æ—¶è¾ƒé•¿
- **å¹¶å‘è®¿é—®**ï¼šå¤§é‡è¯·æ±‚åŒæ—¶å‘ç°ç¼“å­˜å¤±æ•ˆ

### 3.2 ç¼“å­˜å‡»ç©¿è§£å†³æ–¹æ¡ˆ


#### ğŸ¯ æ–¹æ¡ˆä¸€ï¼šäº’æ–¥é”


**ğŸ’¡ äº’æ–¥é”æ€è·¯**ï¼šå¤šä¸ªè¯·æ±‚æ¥äº†ï¼Œåªè®©ä¸€ä¸ªå»æŸ¥æ•°æ®åº“ï¼Œå…¶ä»–çš„ç­‰ç€

```java
@Service
public class UserService {
    
    private final Map<String, Object> lockMap = new ConcurrentHashMap<>();
    
    public User getUserById(Long userId) {
        String key = "user:" + userId;
        
        // 1. æŸ¥ç¼“å­˜
        User user = getFromCache(key);
        if (user != null) {
            return user;
        }
        
        // 2. ç¼“å­˜æœªå‘½ä¸­ï¼Œä½¿ç”¨äº’æ–¥é”
        String lockKey = "lock:" + key;
        synchronized (getLock(lockKey)) {
            // åŒé‡æ£€æŸ¥ï¼šå…¶ä»–çº¿ç¨‹å¯èƒ½å·²ç»æ›´æ–°äº†ç¼“å­˜
            user = getFromCache(key);
            if (user != null) {
                return user;
            }
            
            // 3. æŸ¥æ•°æ®åº“å¹¶æ›´æ–°ç¼“å­˜
            user = userMapper.selectById(userId);
            if (user != null) {
                setCache(key, user, 30, TimeUnit.MINUTES);
            }
        }
        
        return user;
    }
    
    private Object getLock(String lockKey) {
        return lockMap.computeIfAbsent(lockKey, k -> new Object());
    }
}
```

#### ğŸ¯ æ–¹æ¡ˆäºŒï¼šRedisåˆ†å¸ƒå¼é”


**ğŸ’¡ åˆ†å¸ƒå¼é”æ€è·¯**ï¼šç”¨Redisæ¥å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„äº’æ–¥é”

```java
@Service
public class UserService {
    
    public User getUserById(Long userId) {
        String key = "user:" + userId;
        String lockKey = "lock:" + key;
        
        // 1. æŸ¥ç¼“å­˜
        User user = getFromCache(key);
        if (user != null) {
            return user;
        }
        
        // 2. å°è¯•è·å–åˆ†å¸ƒå¼é”
        String lockValue = UUID.randomUUID().toString();
        Boolean lockSuccess = redisTemplate.opsForValue()
            .setIfAbsent(lockKey, lockValue, 10, TimeUnit.SECONDS);
        
        if (lockSuccess) {
            try {
                // è·å¾—é”çš„çº¿ç¨‹æŸ¥è¯¢æ•°æ®åº“
                user = getFromCache(key); // å†æ¬¡æ£€æŸ¥
                if (user == null) {
                    user = userMapper.selectById(userId);
                    if (user != null) {
                        setCache(key, user, 30, TimeUnit.MINUTES);
                    }
                }
            } finally {
                // é‡Šæ”¾é”ï¼ˆä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§ï¼‰
                releaseLock(lockKey, lockValue);
            }
        } else {
            // æœªè·å¾—é”çš„çº¿ç¨‹ç­‰å¾…å¹¶é‡è¯•
            Thread.sleep(50);
            return getUserById(userId); // é€’å½’é‡è¯•
        }
        
        return user;
    }
    
    private void releaseLock(String lockKey, String lockValue) {
        String script = "if redis.call('get', KEYS[1]) == ARGV[1] then " +
                       "return redis.call('del', KEYS[1]) else return 0 end";
        redisTemplate.execute(new DefaultRedisScript<>(script, Long.class),
                            Arrays.asList(lockKey), lockValue);
    }
}
```

#### ğŸ¯ æ–¹æ¡ˆä¸‰ï¼šçƒ­ç‚¹æ•°æ®é¢„çƒ­


**ğŸ’¡ é¢„çƒ­æ€è·¯**ï¼šæå‰æŠŠçƒ­ç‚¹æ•°æ®åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œé¿å…è¿‡æœŸ

```java
@Component
public class CacheWarmupService {
    
    @Scheduled(fixedRate = 60000) // æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    public void warmupHotData() {
        // 1. è·å–çƒ­ç‚¹ç”¨æˆ·IDåˆ—è¡¨
        List<Long> hotUserIds = getHotUserIds();
        
        for (Long userId : hotUserIds) {
            String key = "user:" + userId;
            
            // 2. æ£€æŸ¥ç¼“å­˜å‰©ä½™è¿‡æœŸæ—¶é—´
            Long ttl = redisTemplate.getExpire(key);
            
            // 3. å¦‚æœå¿«è¿‡æœŸäº†ï¼Œæå‰ç»­æœŸ
            if (ttl != null && ttl < 300) { // å°äº5åˆ†é’Ÿå°±ç»­æœŸ
                User user = userMapper.selectById(userId);
                if (user != null) {
                    setCache(key, user, 30, TimeUnit.MINUTES);
                }
            }
        }
    }
    
    private List<Long> getHotUserIds() {
        // ä»è®¿é—®æ—¥å¿—æˆ–ç›‘æ§ç³»ç»Ÿè·å–çƒ­ç‚¹æ•°æ®ID
        return Arrays.asList(1L, 2L, 3L, 100L, 1001L);
    }
}
```

### 3.3 å‡»ç©¿è§£å†³æ–¹æ¡ˆå¯¹æ¯”


| **è§£å†³æ–¹æ¡ˆ** | **å®ç°å¤æ‚åº¦** | **æ€§èƒ½å½±å“** | **é€‚ç”¨åœºæ™¯** | **æ³¨æ„äº‹é¡¹** |
|-------------|--------------|-------------|-------------|-------------|
| **æœ¬åœ°äº’æ–¥é”** | ğŸŸ¢ ç®€å• | ğŸŸ¢ å¾ˆå° | å•æœºåº”ç”¨ | åˆ†å¸ƒå¼ç¯å¢ƒæ— æ•ˆ |
| **åˆ†å¸ƒå¼é”** | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¡ ä¸­ç­‰ | åˆ†å¸ƒå¼ç³»ç»Ÿ | é”è¶…æ—¶å’Œé‡Šæ”¾è¦å¤„ç†å¥½ |
| **æ•°æ®é¢„çƒ­** | ğŸ”´ å¤æ‚ | ğŸŸ¢ å¾ˆå° | å¯é¢„æµ‹çš„çƒ­ç‚¹ | éœ€è¦å‡†ç¡®è¯†åˆ«çƒ­ç‚¹æ•°æ® |
| **æ°¸ä¸è¿‡æœŸ** | ğŸŸ¢ ç®€å• | ğŸŸ¢ å¾ˆå° | æ ¸å¿ƒæ•°æ® | éœ€è¦ä¸»åŠ¨æ›´æ–°æœºåˆ¶ |

---

## 4. â„ï¸ ç¼“å­˜é›ªå´©è¯¦è§£


### 4.1 ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©


**ğŸ”¸ é›ªå´©ç°è±¡è§£é‡Š**

> **ç”Ÿæ´»æ¯”å–»**ï¼šå°±åƒä¸€åº§æ¡¥ï¼Œå¹³æ—¶è½¦æµåˆ†æ•£é€šè¿‡æ²¡é—®é¢˜ï¼Œä½†å¦‚æœæ‰€æœ‰è½¦è¾†åŒæ—¶æ¶Œä¸Šæ¡¥ï¼Œæ¡¥å°±ä¼šä¸å ªé‡è´Ÿç”šè‡³åå¡Œã€‚

```
ç¼“å­˜é›ªå´©ç¤ºæ„å›¾ï¼š

                å¤§é‡KeyåŒæ—¶è¿‡æœŸ
                      â†“
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚Key1 â”‚ â”‚Key2 â”‚ â”‚Key3 â”‚ â”‚Key4 â”‚ â”‚Key5 â”‚ ... (åŒæ—¶å¤±æ•ˆ)
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
   â†“       â†“       â†“       â†“       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MySQLæ•°æ®åº“               â”‚ â† ç¬é—´å‹åŠ›æš´å¢
â”‚           (å¯èƒ½ç›´æ¥å´©æºƒ)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸš¨ é›ªå´©äº§ç”ŸåŸå› **

- **æ‰¹é‡è¿‡æœŸ**ï¼šå¤§é‡ç¼“å­˜è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´
- **æœåŠ¡é‡å¯**ï¼šRedisé‡å¯å¯¼è‡´æ‰€æœ‰ç¼“å­˜ä¸¢å¤±
- **ç½‘ç»œæ•…éšœ**ï¼šRedisä¸å¯ç”¨ï¼Œæ‰€æœ‰è¯·æ±‚æ‰“åˆ°æ•°æ®åº“
- **ç¼“å­˜å®¹é‡æ»¡**ï¼šå†…å­˜ä¸è¶³å¯¼è‡´å¤§é‡keyè¢«æ¸…é™¤

### 4.2 ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆ


#### ğŸ¯ æ–¹æ¡ˆä¸€ï¼šè¿‡æœŸæ—¶é—´éšæœºåŒ–


**ğŸ’¡ éšæœºåŒ–æ€è·¯**ï¼šè®©keyçš„è¿‡æœŸæ—¶é—´é”™å¼€ï¼Œé¿å…åŒæ—¶å¤±æ•ˆ

```java
@Service
public class UserService {
    
    public void setUserCache(String key, User user) {
        // åŸºç¡€è¿‡æœŸæ—¶é—´ï¼š30åˆ†é’Ÿ
        int baseExpire = 30;
        
        // éšæœºå¢åŠ 0-10åˆ†é’Ÿ
        int randomExpire = new Random().nextInt(600); // 0-600ç§’
        
        int finalExpire = baseExpire * 60 + randomExpire;
        
        redisTemplate.opsForValue().set(key, JSON.toJSONString(user), 
                                       finalExpire, TimeUnit.SECONDS);
    }
    
    // æ‰¹é‡è®¾ç½®ç¼“å­˜æ—¶çš„éšæœºåŒ–
    public void batchSetCache(Map<String, User> userMap) {
        for (Map.Entry<String, User> entry : userMap.entrySet()) {
            // æ¯ä¸ªkeyéƒ½æœ‰ä¸åŒçš„è¿‡æœŸæ—¶é—´
            int expire = 1800 + new Random().nextInt(600); // 30-40åˆ†é’Ÿéšæœº
            redisTemplate.opsForValue().set(
                entry.getKey(), 
                JSON.toJSONString(entry.getValue()),
                expire, 
                TimeUnit.SECONDS
            );
        }
    }
}
```

#### ğŸ¯ æ–¹æ¡ˆäºŒï¼šå¤šçº§ç¼“å­˜


**ğŸ’¡ å¤šçº§ç¼“å­˜æ€è·¯**ï¼šå»ºç«‹å¤šå±‚é˜²æŠ¤ï¼ŒRedisæŒ‚äº†è¿˜æœ‰æœ¬åœ°ç¼“å­˜

```java
@Service
public class MultiLevelCacheService {
    
    // æœ¬åœ°ç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜ï¼‰
    private final Cache<String, User> localCache = Caffeine.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(5, TimeUnit.MINUTES)
            .build();
    
    public User getUserById(Long userId) {
        String key = "user:" + userId;
        
        // 1. å…ˆæŸ¥æœ¬åœ°ç¼“å­˜
        User user = localCache.getIfPresent(key);
        if (user != null) {
            return user;
        }
        
        // 2. æŸ¥Redisç¼“å­˜
        try {
            String cached = redisTemplate.opsForValue().get(key);
            if (cached != null) {
                user = JSON.parseObject(cached, User.class);
                localCache.put(key, user); // å›å†™æœ¬åœ°ç¼“å­˜
                return user;
            }
        } catch (Exception e) {
            // Rediså¼‚å¸¸ï¼Œé™çº§åˆ°æ•°æ®åº“
            log.warn("Rediså¼‚å¸¸ï¼Œé™çº§æŸ¥è¯¢æ•°æ®åº“", e);
        }
        
        // 3. æŸ¥æ•°æ®åº“
        user = userMapper.selectById(userId);
        if (user != null) {
            localCache.put(key, user);
            // Rediså¯ç”¨æ—¶æ›´æ–°
            try {
                setCache(key, user, 30, TimeUnit.MINUTES);
            } catch (Exception e) {
                log.warn("Rediså†™å…¥å¤±è´¥", e);
            }
        }
        
        return user;
    }
}
```

#### ğŸ¯ æ–¹æ¡ˆä¸‰ï¼šç†”æ–­é™çº§


**ğŸ’¡ ç†”æ–­æ€è·¯**ï¼šå½“æ•°æ®åº“å‹åŠ›è¿‡å¤§æ—¶ï¼Œæš‚æ—¶åœæ­¢æŸ¥è¯¢ï¼Œè¿”å›é»˜è®¤å€¼

```java
@Component
public class CircuitBreakerService {
    
    private AtomicInteger failureCount = new AtomicInteger(0);
    private volatile boolean circuitOpen = false;
    private volatile long lastFailureTime = 0;
    
    public User getUserWithCircuitBreaker(Long userId) {
        // 1. æ£€æŸ¥ç†”æ–­å™¨çŠ¶æ€
        if (circuitOpen) {
            // ç†”æ–­æœŸé—´ï¼Œè¿”å›é»˜è®¤å€¼
            if (System.currentTimeMillis() - lastFailureTime > 60000) { // 1åˆ†é’Ÿåå°è¯•æ¢å¤
                circuitOpen = false;
                failureCount.set(0);
            } else {
                return getDefaultUser(); // è¿”å›é»˜è®¤ç”¨æˆ·ä¿¡æ¯
            }
        }
        
        try {
            // 2. æ­£å¸¸æŸ¥è¯¢
            User user = userMapper.selectById(userId);
            failureCount.set(0); // æˆåŠŸåˆ™é‡ç½®å¤±è´¥è®¡æ•°
            return user;
        } catch (Exception e) {
            // 3. æŸ¥è¯¢å¤±è´¥å¤„ç†
            int failures = failureCount.incrementAndGet();
            if (failures >= 5) { // è¿ç»­5æ¬¡å¤±è´¥åˆ™å¼€å¯ç†”æ–­
                circuitOpen = true;
                lastFailureTime = System.currentTimeMillis();
            }
            return getDefaultUser();
        }
    }
    
    private User getDefaultUser() {
        // è¿”å›ä¸€ä¸ªé»˜è®¤çš„ç”¨æˆ·å¯¹è±¡ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§
        User defaultUser = new User();
        defaultUser.setId(-1L);
        defaultUser.setName("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
        return defaultUser;
    }
}
```

---

## 5. ğŸŒ¨ï¸ ç¼“å­˜é›ªå´©è¯¦è§£ï¼ˆç»­ï¼‰


### 5.1 é›ªå´©çš„æ·±å±‚å½±å“


**ğŸ”¸ è¿é”ååº”åˆ†æ**

```
é›ªå´©è¿é”ååº”é“¾ï¼š

Rediså¤§é‡Keyè¿‡æœŸ â†’ æ•°æ®åº“å‹åŠ›æš´å¢ â†’ æ•°æ®åº“å“åº”å˜æ…¢ â†’ 
æ›´å¤šè¯·æ±‚å †ç§¯ â†’ åº”ç”¨æœåŠ¡å™¨çº¿ç¨‹æ± è€—å°½ â†’ æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ â†’ 
ç”¨æˆ·å¤§é‡æŠ•è¯‰ â†’ ä¸šåŠ¡æŸå¤±
```

### 5.2 é›ªå´©é¢„é˜²ç­–ç•¥


#### ğŸ¯ ç­–ç•¥ä¸€ï¼šæ°¸ä¸è¿‡æœŸ


**ğŸ’¡ æ°¸ä¸è¿‡æœŸæ€è·¯**ï¼šå…³é”®æ•°æ®è®¾ç½®æ°¸ä¸è¿‡æœŸï¼Œé€šè¿‡å¼‚æ­¥ä»»åŠ¡æ›´æ–°

```java
@Service
public class NeverExpireService {
    
    public User getUserById(Long userId) {
        String key = "user:" + userId;
        
        // 1. æŸ¥ç¼“å­˜ï¼ˆæ°¸è¿œæœ‰æ•°æ®ï¼‰
        String cached = redisTemplate.opsForValue().get(key);
        if (cached != null) {
            UserCacheData cacheData = JSON.parseObject(cached, UserCacheData.class);
            
            // 2. æ£€æŸ¥é€»è¾‘è¿‡æœŸæ—¶é—´
            if (cacheData.getExpireTime() > System.currentTimeMillis()) {
                return cacheData.getUser(); // æ•°æ®æœªè¿‡æœŸ
            }
            
            // 3. æ•°æ®å·²è¿‡æœŸï¼Œå¼‚æ­¥æ›´æ–°
            CompletableFuture.runAsync(() -> {
                User newUser = userMapper.selectById(userId);
                UserCacheData newCacheData = new UserCacheData();
                newCacheData.setUser(newUser);
                newCacheData.setExpireTime(System.currentTimeMillis() + 1800000); // 30åˆ†é’Ÿåè¿‡æœŸ
                
                redisTemplate.opsForValue().set(key, JSON.toJSONString(newCacheData));
            });
            
            return cacheData.getUser(); // å…ˆè¿”å›æ—§æ•°æ®
        }
        
        // 4. ç¼“å­˜å®Œå…¨æ²¡æœ‰æ—¶çš„å¤„ç†
        return loadAndCacheUser(userId);
    }
    
    // ç¼“å­˜æ•°æ®ç»“æ„
    private static class UserCacheData {
        private User user;
        private Long expireTime; // é€»è¾‘è¿‡æœŸæ—¶é—´
        
        // getter/setter
    }
}
```

#### ğŸ¯ ç­–ç•¥äºŒï¼šé›†ç¾¤é«˜å¯ç”¨


**ğŸ’¡ é«˜å¯ç”¨æ€è·¯**ï¼šå¤šä¸ªRediså®ä¾‹ï¼Œä¸€ä¸ªæŒ‚äº†è¿˜æœ‰å¤‡ç”¨

```java
@Configuration
public class RedisClusterConfig {
    
    @Bean
    public LettuceConnectionFactory redisConnectionFactory() {
        // Redisé›†ç¾¤é…ç½®
        RedisClusterConfiguration clusterConfig = new RedisClusterConfiguration();
        clusterConfig.clusterNode("192.168.1.10", 7000);
        clusterConfig.clusterNode("192.168.1.11", 7001);  
        clusterConfig.clusterNode("192.168.1.12", 7002);
        
        return new LettuceConnectionFactory(clusterConfig);
    }
    
    // ä¸»ä»æ¨¡å¼é…ç½®
    @Bean
    public LettuceConnectionFactory redisSentinelConnectionFactory() {
        RedisSentinelConfiguration sentinelConfig = new RedisSentinelConfiguration()
                .master("mymaster")
                .sentinel("192.168.1.10", 26379)
                .sentinel("192.168.1.11", 26379);
                
        return new LettuceConnectionFactory(sentinelConfig);
    }
}
```

---

## 5. ğŸ›¡ï¸ ç»¼åˆé˜²æŠ¤ç­–ç•¥


### 5.1 å¤šå±‚é˜²æŠ¤ä½“ç³»


**ğŸ”’ ç¼“å­˜å®‰å…¨é˜²æŠ¤é‡‘å­—å¡”**

```
                    åº”ç”¨å±‚
                 /    |    \
            å‚æ•°æ ¡éªŒ  æ¥å£é™æµ  ç†”æ–­é™çº§
               |       |       |
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚        ç¼“å­˜å±‚           â”‚
            â”‚ å¸ƒéš†è¿‡æ»¤å™¨ + å¤šçº§ç¼“å­˜    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               |       |       |
            äº’æ–¥é”  è¿‡æœŸæ—¶é—´  çƒ­ç‚¹é¢„çƒ­
                 \    |    /
                  æ•°æ®åº“å±‚
```

### 5.2 ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ


**ğŸ† ä¼ä¸šçº§ç¼“å­˜ç­–ç•¥**

```java
@Service
public class RobustCacheService {
    
    // ç»¼åˆè§£å†³æ–¹æ¡ˆ
    public User getUserById(Long userId) {
        // ç¬¬1å±‚ï¼šå‚æ•°æ ¡éªŒ
        if (userId == null || userId <= 0) {
            return null;
        }
        
        // ç¬¬2å±‚ï¼šå¸ƒéš†è¿‡æ»¤å™¨
        String key = "user:" + userId;
        if (!bloomFilterService.mightExist(key)) {
            return null; // ä¸€å®šä¸å­˜åœ¨
        }
        
        // ç¬¬3å±‚ï¼šå¤šçº§ç¼“å­˜æŸ¥è¯¢
        User user = getFromMultiLevelCache(key);
        if (user != null) {
            return user;
        }
        
        // ç¬¬4å±‚ï¼šåˆ†å¸ƒå¼é”é˜²å‡»ç©¿
        return getWithDistributedLock(key, userId);
    }
    
    private User getFromMultiLevelCache(String key) {
        // æœ¬åœ°ç¼“å­˜
        User user = localCache.getIfPresent(key);
        if (user != null) return user;
        
        // Redisç¼“å­˜
        try {
            String cached = redisTemplate.opsForValue().get(key);
            if (cached != null && !"NULL".equals(cached)) {
                user = JSON.parseObject(cached, User.class);
                localCache.put(key, user);
                return user;
            }
        } catch (Exception e) {
            log.warn("RedisæŸ¥è¯¢å¼‚å¸¸", e);
        }
        
        return null;
    }
    
    private User getWithDistributedLock(String key, Long userId) {
        String lockKey = "lock:" + key;
        String lockValue = UUID.randomUUID().toString();
        
        try {
            // è·å–é”ï¼Œè¶…æ—¶æ—¶é—´10ç§’
            Boolean locked = redisTemplate.opsForValue()
                .setIfAbsent(lockKey, lockValue, 10, TimeUnit.SECONDS);
            
            if (locked) {
                // è·å¾—é”ï¼ŒæŸ¥è¯¢æ•°æ®åº“
                User user = userMapper.selectById(userId);
                
                // éšæœºè¿‡æœŸæ—¶é—´é˜²é›ªå´©
                int expire = 1800 + new Random().nextInt(600);
                
                if (user != null) {
                    redisTemplate.opsForValue().set(key, JSON.toJSONString(user), 
                                                   expire, TimeUnit.SECONDS);
                } else {
                    // ç©ºå€¼ç¼“å­˜ï¼Œè¾ƒçŸ­è¿‡æœŸæ—¶é—´
                    redisTemplate.opsForValue().set(key, "NULL", 
                                                   300, TimeUnit.SECONDS);
                }
                return user;
            } else {
                // æœªè·å¾—é”ï¼Œç­‰å¾…é‡è¯•
                Thread.sleep(100);
                return getFromMultiLevelCache(key); // é‡æ–°å°è¯•ç¼“å­˜
            }
        } catch (Exception e) {
            log.error("åˆ†å¸ƒå¼é”å¼‚å¸¸", e);
            // é™çº§ï¼šç›´æ¥æŸ¥æ•°æ®åº“ï¼ˆæœ‰é£é™©ä½†ä¿è¯åŠŸèƒ½ï¼‰
            return userMapper.selectById(userId);
        } finally {
            releaseLock(lockKey, lockValue);
        }
    }
}
```

### 5.3 ç¼“å­˜é—®é¢˜ç›‘æ§


**ğŸ“Š ç›‘æ§æŒ‡æ ‡ä½“ç³»**

```java
@Component
public class CacheMonitorService {
    
    @EventListener
    public void onCacheMiss(CacheMissEvent event) {
        // ç›‘æ§ç¼“å­˜æœªå‘½ä¸­ç‡
        String key = event.getKey();
        cacheMetrics.incrementMiss(key);
        
        // ç©¿é€æ£€æµ‹ï¼šåŒä¸€ä¸ªä¸å­˜åœ¨çš„keyé¢‘ç¹æŸ¥è¯¢
        if (isPenetrationPattern(key)) {
            alertService.sendAlert("æ£€æµ‹åˆ°ç–‘ä¼¼ç¼“å­˜ç©¿é€ï¼š" + key);
        }
    }
    
    @Scheduled(fixedRate = 60000)
    public void checkCacheHealth() {
        // 1. æ£€æŸ¥Redisè¿æ¥çŠ¶æ€
        try {
            redisTemplate.execute((RedisCallback<String>) connection -> {
                return connection.ping();
            });
        } catch (Exception e) {
            alertService.sendAlert("Redisè¿æ¥å¼‚å¸¸");
        }
        
        // 2. æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡
        double hitRate = cacheMetrics.getHitRate();
        if (hitRate < 0.8) { // å‘½ä¸­ç‡ä½äº80%å‘Šè­¦
            alertService.sendAlert("ç¼“å­˜å‘½ä¸­ç‡å¼‚å¸¸ï¼š" + hitRate);
        }
        
        // 3. æ£€æŸ¥çƒ­ç‚¹Key
        List<String> hotKeys = getHotKeys();
        for (String key : hotKeys) {
            Long ttl = redisTemplate.getExpire(key);
            if (ttl != null && ttl < 300) {
                // çƒ­ç‚¹æ•°æ®å³å°†è¿‡æœŸï¼Œé¢„è­¦
                alertService.sendAlert("çƒ­ç‚¹Keyå³å°†è¿‡æœŸï¼š" + key);
            }
        }
    }
}
```

### 5.4 åº”æ€¥é¢„æ¡ˆ


**ğŸš¨ æ•…éšœåº”æ€¥å¤„ç†**

| **æ•…éšœç±»å‹** | **ç´§æ€¥æªæ–½** | **æ¢å¤æ­¥éª¤** | **é¢„é˜²æªæ–½** |
|-------------|-------------|-------------|-------------|
| **Rediså®Œå…¨å®•æœº** | `å¯ç”¨æœ¬åœ°ç¼“å­˜` | `1.é‡å¯Redis 2.é¢„çƒ­æ•°æ®` | `ä¸»ä»éƒ¨ç½²+å“¨å…µ` |
| **æ•°æ®åº“å‹åŠ›è¿‡å¤§** | `å¼€å¯ç†”æ–­é™çº§` | `1.é™æµ 2.æ‰©å®¹ 3.ç¼“å­˜é¢„çƒ­` | `è¿æ¥æ± ä¼˜åŒ–` |
| **å¤§é¢ç§¯ç¼“å­˜å¤±æ•ˆ** | `æš‚åœéæ ¸å¿ƒåŠŸèƒ½` | `1.é”™å³°æ¢å¤ 2.åˆ†æ‰¹é¢„çƒ­` | `è¿‡æœŸæ—¶é—´éšæœºåŒ–` |
| **æ¶æ„æ”»å‡»ç©¿é€** | `IPé»‘åå•+é™æµ` | `1.å¸ƒéš†è¿‡æ»¤å™¨ 2.å‚æ•°æ ¡éªŒ` | `å®‰å…¨é˜²æŠ¤æœºåˆ¶` |

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 ä¸‰å¤§é—®é¢˜æ ¸å¿ƒç†è§£


```
ğŸ”¸ ç¼“å­˜ç©¿é€ï¼šæŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼Œæ¯æ¬¡éƒ½ç©¿é€åˆ°æ•°æ®åº“
ğŸ”¸ ç¼“å­˜å‡»ç©¿ï¼šçƒ­ç‚¹æ•°æ®å¤±æ•ˆç¬é—´ï¼Œå¤§é‡å¹¶å‘ç›´å‡»æ•°æ®åº“  
ğŸ”¸ ç¼“å­˜é›ªå´©ï¼šå¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆï¼Œæ•°æ®åº“ç¬é—´å‹åŠ›çˆ†ç‚¸
```

### 6.2 è§£å†³æ–¹æ¡ˆé€‰æ‹©æŒ‡å—


**ğŸ¯ ç©¿é€è§£å†³æ–¹æ¡ˆé€‰æ‹©**
```
æ•°æ®ç›¸å¯¹ç¨³å®š â†’ å¸ƒéš†è¿‡æ»¤å™¨
å¶å‘æ€§ç©¿é€ â†’ ç¼“å­˜ç©ºå€¼  
æ¶æ„æ”»å‡» â†’ æ¥å£é™æµ + å‚æ•°æ ¡éªŒ
```

**ğŸ¯ å‡»ç©¿è§£å†³æ–¹æ¡ˆé€‰æ‹©**
```
å•æœºåº”ç”¨ â†’ æœ¬åœ°äº’æ–¥é”
åˆ†å¸ƒå¼ç³»ç»Ÿ â†’ Redisåˆ†å¸ƒå¼é”
å¯é¢„æµ‹çƒ­ç‚¹ â†’ æ•°æ®é¢„çƒ­
å…³é”®æ•°æ® â†’ æ°¸ä¸è¿‡æœŸ + å¼‚æ­¥æ›´æ–°
```

**ğŸ¯ é›ªå´©è§£å†³æ–¹æ¡ˆé€‰æ‹©**
```
é¢„é˜²ä¸ºä¸» â†’ è¿‡æœŸæ—¶é—´éšæœºåŒ–
é«˜å¯ç”¨ â†’ Redisé›†ç¾¤ + å¤šçº§ç¼“å­˜
åº”æ€¥å¤„ç† â†’ ç†”æ–­é™çº§ + é™æµ
```

### 6.3 ç”Ÿäº§ç¯å¢ƒå®æˆ˜è¦ç‚¹


**ğŸ’¼ ä¼ä¸šçº§æœ€ä½³å®è·µ**
- **ç›‘æ§å®Œå–„**ï¼šå»ºç«‹å®Œæ•´çš„ç¼“å­˜ç›‘æ§ä½“ç³»
- **é¢„æ¡ˆå……åˆ†**ï¼šåˆ¶å®šè¯¦ç»†çš„æ•…éšœåº”æ€¥é¢„æ¡ˆ
- **æµ‹è¯•å……åˆ†**ï¼šå®šæœŸè¿›è¡Œç¼“å­˜æ•…éšœæ¼”ç»ƒ
- **æ–‡æ¡£è¯¦ç»†**ï¼šç»´æŠ¤ç¼“å­˜æ¶æ„å’Œåº”æ€¥æ–‡æ¡£

**ğŸ”§ å¼€å‘æ³¨æ„äº‹é¡¹**
- **å‚æ•°æ ¡éªŒ**ï¼šæ°¸è¿œä¸è¦ç›¸ä¿¡å¤–éƒ¨è¾“å…¥
- **å¼‚å¸¸å¤„ç†**ï¼šRediså¼‚å¸¸è¦æœ‰é™çº§æ–¹æ¡ˆ
- **æ€§èƒ½è€ƒè™‘**ï¼šé”çš„ç²’åº¦å’Œè¶…æ—¶æ—¶é—´è¦åˆç†
- **ä¸šåŠ¡å…¼å®¹**ï¼šç¼“å­˜å¤±è´¥ä¸èƒ½å½±å“æ ¸å¿ƒåŠŸèƒ½

**ğŸ’¡ æ¶æ„è®¾è®¡åŸåˆ™**
- **å¤šå±‚é˜²æŠ¤**ï¼šä¸è¦æŠŠå¸Œæœ›å¯„æ‰˜åœ¨å•ä¸€æ–¹æ¡ˆä¸Š
- **å¿«é€Ÿå¤±è´¥**ï¼šå¼‚å¸¸æƒ…å†µä¸‹å¿«é€Ÿé™çº§
- **æ¸è¿›æ¢å¤**ï¼šæ•…éšœæ¢å¤æ—¶è¦åˆ†æ­¥è¿›è¡Œ
- **æŒç»­ç›‘æ§**ï¼šå®æ—¶äº†è§£ç¼“å­˜ç³»ç»Ÿå¥åº·çŠ¶å†µ

**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
ç©¿é€å‡»ç©¿é›ªå´©ä¸‰å…„å¼Ÿï¼Œç¼“å­˜é—®é¢˜è¦é‡è§†
ç©¿é€å¸ƒéš†æ¥è¿‡æ»¤ï¼Œå‡»ç©¿äº’æ–¥é”æ’é˜Ÿ
é›ªå´©æ—¶é—´è¦é”™å¼€ï¼Œå¤šçº§é˜²æŠ¤ä¿å®‰å…¨
ç›‘æ§é¢„è­¦ä¸èƒ½å°‘ï¼Œæ•…éšœæ¼”ç»ƒè¦å¸¸åš
```