---
title: 23ã€äº”å¤§æ•°æ®ç±»å‹å®æˆ˜ç»¼åˆæ¡ˆä¾‹
---
## ğŸ“š ç›®å½•

1. [ç”µå•†ç³»ç»Ÿç»¼åˆåº”ç”¨](#1-ç”µå•†ç³»ç»Ÿç»¼åˆåº”ç”¨)
2. [ç¤¾äº¤åª’ä½“ç³»ç»Ÿ](#2-ç¤¾äº¤åª’ä½“ç³»ç»Ÿ)
3. [æ¸¸æˆç³»ç»Ÿåº”ç”¨](#3-æ¸¸æˆç³»ç»Ÿåº”ç”¨)
4. [æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–](#4-æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›’ ç”µå•†ç³»ç»Ÿç»¼åˆåº”ç”¨


### 1.1 ç³»ç»Ÿæ¶æ„æ•°æ®æµ


```
ç”¨æˆ·è¯·æ±‚ â†’ åº”ç”¨æœåŠ¡å™¨ â†’ Redisç¼“å­˜å±‚ â†’ æ•°æ®åº“
                              â†“
        String    Hash    List    Set    ZSet
         â†“         â†“       â†“       â†“      â†“
       åº“å­˜è®¡æ•°   å•†å“ä¿¡æ¯  æµè§ˆå†å²  æ ‡ç­¾ç³»ç»Ÿ  æ’è¡Œæ¦œ
       Token     ç”¨æˆ·èµ„æ–™  æ¶ˆæ¯é˜Ÿåˆ—  æ”¶è—å»é‡  ç§¯åˆ†æ’å
```

### 1.2 Stringç±»å‹åº”ç”¨åœºæ™¯


**ğŸ“Š å•†å“åº“å­˜è®¡æ•°**

åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œå•†å“åº“å­˜éœ€è¦å®æ—¶æ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§’æ€æ´»åŠ¨ä¸­ï¼Œéœ€è¦ä¿è¯åº“å­˜æ‰£å‡çš„åŸå­æ€§ã€‚

```java
@Service
public class StockService {
    
    // æ£€æŸ¥å¹¶æ‰£å‡åº“å­˜
    public boolean decreaseStock(Long productId, int quantity) {
        String stockKey = "stock:product:" + productId;
        
        // ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§
        String script = 
            "local stock = redis.call('GET', KEYS[1]) " +
            "if stock and tonumber(stock) >= tonumber(ARGV[1]) then " +
            "    return redis.call('DECRBY', KEYS[1], ARGV[1]) " +
            "else " +
            "    return -1 " +
            "end";
        
        Object result = jedis.eval(script, Arrays.asList(stockKey), 
                                 Arrays.asList(String.valueOf(quantity)));
        return !"-1".equals(result.toString());
    }
    
    // æ¢å¤åº“å­˜ï¼ˆè®¢å•å–æ¶ˆï¼‰
    public void restoreStock(Long productId, int quantity) {
        String stockKey = "stock:product:" + productId;
        jedis.incrBy(stockKey, quantity);
    }
}
```

**ğŸ« ç”¨æˆ·Tokenå­˜å‚¨**

ç”¨æˆ·ç™»å½•åçš„Tokenéœ€è¦å¿«é€ŸéªŒè¯ï¼ŒStringç±»å‹éå¸¸é€‚åˆè¿™ç§é”®å€¼å¯¹å­˜å‚¨ã€‚

```java
@Service
public class TokenService {
    
    // ç”Ÿæˆå¹¶å­˜å‚¨Token
    public String generateToken(Long userId) {
        String token = UUID.randomUUID().toString();
        String tokenKey = "user:token:" + token;
        
        // Tokenæœ‰æ•ˆæœŸ2å°æ—¶
        jedis.setex(tokenKey, 7200, userId.toString());
        
        // ç”¨æˆ·å¯èƒ½æœ‰å¤šä¸ªè®¾å¤‡ç™»å½•ï¼Œç»´æŠ¤ç”¨æˆ·çš„Tokenåˆ—è¡¨
        String userTokensKey = "user:" + userId + ":tokens";
        jedis.sadd(userTokensKey, token);
        jedis.expire(userTokensKey, 7200);
        
        return token;
    }
    
    // éªŒè¯Token
    public Long validateToken(String token) {
        String tokenKey = "user:token:" + token;
        String userId = jedis.get(tokenKey);
        
        if (userId != null) {
            // å»¶é•¿Tokenæœ‰æ•ˆæœŸ
            jedis.expire(tokenKey, 7200);
            return Long.parseLong(userId);
        }
        return null;
    }
}
```

### 1.3 Hashç±»å‹åº”ç”¨åœºæ™¯


**ğŸ›ï¸ å•†å“è¯¦æƒ…ä¿¡æ¯**

å•†å“ä¿¡æ¯åŒ…å«å¤šä¸ªå­—æ®µï¼ŒHashç±»å‹å¯ä»¥é«˜æ•ˆå­˜å‚¨å’Œæ›´æ–°éƒ¨åˆ†å­—æ®µã€‚

```java
@Service
public class ProductService {
    
    // ç¼“å­˜å•†å“è¯¦æƒ…
    public void cacheProductDetail(Product product) {
        String productKey = "product:detail:" + product.getId();
        
        Map<String, String> productMap = new HashMap<>();
        productMap.put("name", product.getName());
        productMap.put("price", product.getPrice().toString());
        productMap.put("description", product.getDescription());
        productMap.put("categoryId", product.getCategoryId().toString());
        productMap.put("brandId", product.getBrandId().toString());
        
        jedis.hmset(productKey, productMap);
        jedis.expire(productKey, 3600); // 1å°æ—¶è¿‡æœŸ
    }
    
    // æ›´æ–°å•†å“ä»·æ ¼
    public void updateProductPrice(Long productId, BigDecimal newPrice) {
        String productKey = "product:detail:" + productId;
        jedis.hset(productKey, "price", newPrice.toString());
        
        // åŒæ—¶æ›´æ–°æ•°æ®åº“
        productRepository.updatePrice(productId, newPrice);
    }
}
```

**ğŸ‘¤ ç”¨æˆ·ä¸ªäººèµ„æ–™**

ç”¨æˆ·èµ„æ–™ä¿¡æ¯åŒæ ·é€‚åˆç”¨Hashå­˜å‚¨ï¼Œå¯ä»¥çµæ´»æ›´æ–°å•ä¸ªå­—æ®µã€‚

```java
// ç”¨æˆ·èµ„æ–™ç®¡ç†
public void cacheUserProfile(User user) {
    String userKey = "user:profile:" + user.getId();
    
    Map<String, String> userMap = new HashMap<>();
    userMap.put("username", user.getUsername());
    userMap.put("email", user.getEmail());
    userMap.put("phone", user.getPhone());
    userMap.put("avatar", user.getAvatar());
    userMap.put("level", user.getLevel().toString());
    
    jedis.hmset(userKey, userMap);
    jedis.expire(userKey, 1800); // 30åˆ†é’Ÿè¿‡æœŸ
}
```

### 1.4 Listç±»å‹åº”ç”¨åœºæ™¯


**ğŸ‘ï¸ ç”¨æˆ·æµè§ˆå†å²**

ç”¨æˆ·çš„æµè§ˆå†å²éœ€è¦ä¿æŒæ—¶é—´é¡ºåºï¼ŒListç±»å‹å¤©ç„¶æ”¯æŒæœ‰åºå­˜å‚¨ã€‚

```java
@Service
public class BrowseHistoryService {
    
    // è®°å½•æµè§ˆå†å²
    public void recordBrowse(Long userId, Long productId) {
        String historyKey = "user:browse:" + userId;
        
        // å…ˆç§»é™¤å¯èƒ½å­˜åœ¨çš„é‡å¤è®°å½•
        jedis.lrem(historyKey, 1, productId.toString());
        
        // ä»å¤´éƒ¨æ’å…¥æœ€æ–°æµè§ˆè®°å½•
        jedis.lpush(historyKey, productId.toString());
        
        // åªä¿ç•™æœ€è¿‘50æ¡è®°å½•
        jedis.ltrim(historyKey, 0, 49);
        
        // è®¾ç½®è¿‡æœŸæ—¶é—´30å¤©
        jedis.expire(historyKey, 2592000);
    }
    
    // è·å–æµè§ˆå†å²
    public List<Long> getBrowseHistory(Long userId, int limit) {
        String historyKey = "user:browse:" + userId;
        List<String> history = jedis.lrange(historyKey, 0, limit - 1);
        
        return history.stream()
                     .map(Long::parseLong)
                     .collect(Collectors.toList());
    }
}
```

**ğŸ“¨ æ¶ˆæ¯é€šçŸ¥é˜Ÿåˆ—**

ç³»ç»Ÿé€šçŸ¥å¯ä»¥ç”¨Listå®ç°ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½ã€‚

```java
// æ¶ˆæ¯é€šçŸ¥é˜Ÿåˆ—
public void sendNotification(Long userId, String message) {
    String queueKey = "user:notifications:" + userId;
    
    // æ„é€ é€šçŸ¥æ¶ˆæ¯
    Map<String, Object> notification = new HashMap<>();
    notification.put("message", message);
    notification.put("timestamp", System.currentTimeMillis());
    notification.put("read", false);
    
    jedis.lpush(queueKey, JSON.toJSONString(notification));
    jedis.expire(queueKey, 604800); // ä¿ç•™7å¤©
}
```

### 1.5 Setç±»å‹åº”ç”¨åœºæ™¯


**ğŸ·ï¸ å•†å“æ ‡ç­¾ç³»ç»Ÿ**

å•†å“æ ‡ç­¾å…·æœ‰å”¯ä¸€æ€§ï¼ŒSetç±»å‹å¯ä»¥è‡ªç„¶å»é‡ã€‚

```java
@Service
public class ProductTagService {
    
    // ä¸ºå•†å“æ·»åŠ æ ‡ç­¾
    public void addProductTags(Long productId, String... tags) {
        String tagKey = "product:tags:" + productId;
        jedis.sadd(tagKey, tags);
        
        // åŒæ—¶ç»´æŠ¤æ ‡ç­¾åˆ°å•†å“çš„åå‘ç´¢å¼•
        for (String tag : tags) {
            String tagProductsKey = "tag:products:" + tag;
            jedis.sadd(tagProductsKey, productId.toString());
        }
    }
    
    // æ ¹æ®æ ‡ç­¾æŸ¥æ‰¾å•†å“
    public Set<Long> getProductsByTag(String tag) {
        String tagProductsKey = "tag:products:" + tag;
        Set<String> productIds = jedis.smembers(tagProductsKey);
        
        return productIds.stream()
                        .map(Long::parseLong)
                        .collect(Collectors.toSet());
    }
    
    // æŸ¥æ‰¾å¤šä¸ªæ ‡ç­¾çš„äº¤é›†å•†å“
    public Set<Long> getProductsByTags(String... tags) {
        String[] keys = Arrays.stream(tags)
                             .map(tag -> "tag:products:" + tag)
                             .toArray(String[]::new);
        
        Set<String> intersection = jedis.sinter(keys);
        return intersection.stream()
                          .map(Long::parseLong)
                          .collect(Collectors.toSet());
    }
}
```

**â¤ï¸ ç”¨æˆ·æ”¶è—å»é‡**

ç”¨æˆ·æ”¶è—å•†å“éœ€è¦é¿å…é‡å¤ï¼ŒSetç±»å‹å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```java
// ç”¨æˆ·æ”¶è—ç®¡ç†
public boolean addToFavorites(Long userId, Long productId) {
    String favKey = "user:favorites:" + userId;
    
    // saddè¿”å›1è¡¨ç¤ºæ–°å¢ï¼Œè¿”å›0è¡¨ç¤ºå·²å­˜åœ¨
    Long result = jedis.sadd(favKey, productId.toString());
    
    if (result == 1) {
        // åŒæ—¶ç»´æŠ¤å•†å“çš„æ”¶è—è®¡æ•°
        String productFavKey = "product:fav_count:" + productId;
        jedis.incr(productFavKey);
        return true;
    }
    return false; // å·²ç»æ”¶è—è¿‡äº†
}
```

### 1.6 ZSetç±»å‹åº”ç”¨åœºæ™¯


**ğŸ“ˆ å•†å“é”€é‡æ’è¡Œ**

å•†å“é”€é‡æ’è¡Œéœ€è¦æŒ‰é”€é‡æ’åºï¼ŒZSetçš„scoreæ­£å¥½è¡¨ç¤ºé”€é‡ã€‚

```java
@Service
public class ProductRankingService {
    
    // æ›´æ–°å•†å“é”€é‡
    public void updateSalesCount(Long productId, int soldCount) {
        String rankingKey = "product:sales:ranking";
        jedis.zincrby(rankingKey, soldCount, productId.toString());
        
        // åˆ†ç±»é”€é‡æ’è¡Œ
        Product product = productService.getById(productId);
        String categoryRankingKey = "category:" + product.getCategoryId() + ":sales";
        jedis.zincrby(categoryRankingKey, soldCount, productId.toString());
    }
    
    // è·å–é”€é‡æ’è¡Œæ¦œ
    public List<ProductRanking> getSalesRanking(int limit) {
        String rankingKey = "product:sales:ranking";
        
        // æŒ‰é”€é‡ä»é«˜åˆ°ä½æ’åº
        Set<Tuple> ranking = jedis.zrevrangeWithScores(rankingKey, 0, limit - 1);
        
        return ranking.stream().map(tuple -> {
            ProductRanking pr = new ProductRanking();
            pr.setProductId(Long.parseLong(tuple.getElement()));
            pr.setSalesCount((int) tuple.getScore());
            return pr;
        }).collect(Collectors.toList());
    }
}
```

**ğŸ† ç”¨æˆ·ç§¯åˆ†æ’å**

ç”¨æˆ·ç§¯åˆ†ç³»ç»Ÿä¹Ÿæ˜¯ZSetçš„ç»å…¸åº”ç”¨åœºæ™¯ã€‚

```java
// ç”¨æˆ·ç§¯åˆ†ç®¡ç†
public void updateUserPoints(Long userId, int points) {
    String rankingKey = "user:points:ranking";
    jedis.zincrby(rankingKey, points, userId.toString());
    
    // æœˆåº¦æ’è¡Œæ¦œ
    String monthKey = "user:points:" + getCurrentMonth();
    jedis.zincrby(monthKey, points, userId.toString());
    jedis.expire(monthKey, 2678400); // 31å¤©è¿‡æœŸ
}

// è·å–ç”¨æˆ·æ’å
public Long getUserRank(Long userId) {
    String rankingKey = "user:points:ranking";
    return jedis.zrevrank(rankingKey, userId.toString());
}
```

---

## 2. ğŸ“± ç¤¾äº¤åª’ä½“ç³»ç»Ÿ


### 2.1 ç¤¾äº¤åª’ä½“æ•°æ®æµè®¾è®¡


```
ç¤¾äº¤åª’ä½“ç³»ç»Ÿæ•°æ®æµ:

ç”¨æˆ·æ“ä½œå±‚:
å‘å¸ƒåŠ¨æ€ â†’ ç‚¹èµè¯„è®º â†’ å…³æ³¨ç”¨æˆ· â†’ æµè§ˆå†…å®¹

Redisç¼“å­˜å±‚:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ String  â”‚  Hash   â”‚  List   â”‚   Set   â”‚  ZSet   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ç‚¹èµè®¡æ•°  â”‚åŠ¨æ€è¯¦æƒ…  â”‚æ—¶é—´çº¿    â”‚å…³æ³¨åˆ—è¡¨  â”‚çƒ­é—¨æ’è¡Œ  â”‚
â”‚éªŒè¯ç    â”‚ç”¨æˆ·ä¿¡æ¯  â”‚è¯„è®ºåˆ—è¡¨  â”‚è¯é¢˜æ ‡ç­¾  â”‚æ´»è·ƒåº¦   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Stringç±»å‹ï¼šç‚¹èµè®¡æ•°ç³»ç»Ÿ


**ğŸ‘ ç‚¹èµè®¡æ•°å®ç°**

ç¤¾äº¤åª’ä½“ä¸­çš„ç‚¹èµæ•°éœ€è¦é¢‘ç¹æ›´æ–°ï¼ŒStringç±»å‹çš„INCRæ“ä½œéå¸¸é€‚åˆã€‚

```java
@Service
public class LikeService {
    
    // ç‚¹èµæ“ä½œ
    public boolean likePost(Long userId, Long postId) {
        String likeKey = "post:like:" + postId;
        String userLikeKey = "user:" + userId + ":liked_posts";
        
        // æ£€æŸ¥æ˜¯å¦å·²ç»ç‚¹èµ
        if (jedis.sismember(userLikeKey, postId.toString())) {
            return false; // å·²ç»ç‚¹èµè¿‡äº†
        }
        
        // åŸå­æ“ä½œï¼šå¢åŠ ç‚¹èµæ•° + è®°å½•ç”¨æˆ·ç‚¹èµ
        Pipeline pipeline = jedis.pipelined();
        pipeline.incr(likeKey);
        pipeline.sadd(userLikeKey, postId.toString());
        pipeline.sync();
        
        return true;
    }
    
    // å–æ¶ˆç‚¹èµ
    public boolean unlikePost(Long userId, Long postId) {
        String likeKey = "post:like:" + postId;
        String userLikeKey = "user:" + userId + ":liked_posts";
        
        if (!jedis.sismember(userLikeKey, postId.toString())) {
            return false; // æ²¡æœ‰ç‚¹èµè¿‡
        }
        
        Pipeline pipeline = jedis.pipelined();
        pipeline.decr(likeKey);
        pipeline.srem(userLikeKey, postId.toString());
        pipeline.sync();
        
        return true;
    }
}
```

### 2.3 Hashç±»å‹ï¼šç”¨æˆ·åŠ¨æ€ä¿¡æ¯


**ğŸ“ ç”¨æˆ·åŠ¨æ€è¯¦æƒ…å­˜å‚¨**

åŠ¨æ€åŒ…å«å¤šä¸ªå­—æ®µï¼ŒHashç±»å‹å¯ä»¥é«˜æ•ˆå­˜å‚¨å’Œéƒ¨åˆ†æ›´æ–°ã€‚

```java
// å‘å¸ƒåŠ¨æ€
public void publishPost(Post post) {
    String postKey = "post:detail:" + post.getId();
    
    Map<String, String> postMap = new HashMap<>();
    postMap.put("userId", post.getUserId().toString());
    postMap.put("content", post.getContent());
    postMap.put("imageUrls", String.join(",", post.getImageUrls()));
    postMap.put("publishTime", post.getPublishTime().toString());
    postMap.put("likeCount", "0");
    postMap.put("commentCount", "0");
    
    jedis.hmset(postKey, postMap);
    jedis.expire(postKey, 86400 * 7); // 7å¤©è¿‡æœŸ
}
```

### 2.4 Listç±»å‹ï¼šæ—¶é—´çº¿ç³»ç»Ÿ


**ğŸ“° ç”¨æˆ·æ—¶é—´çº¿å®ç°**

æ—¶é—´çº¿éœ€è¦æŒ‰æ—¶é—´é¡ºåºå±•ç¤ºåŠ¨æ€ï¼ŒListç±»å‹å¤©ç„¶æ”¯æŒè¿™ç§éœ€æ±‚ã€‚

```java
@Service
public class TimelineService {
    
    // æ¨é€æ¨¡å¼ï¼šç”¨æˆ·å‘å¸ƒåŠ¨æ€æ—¶æ¨é€ç»™ç²‰ä¸
    public void pushToFollowers(Long userId, Long postId) {
        // è·å–ç”¨æˆ·çš„ç²‰ä¸åˆ—è¡¨
        Set<String> followers = jedis.smembers("user:" + userId + ":followers");
        
        // æ¨é€åˆ°æ¯ä¸ªç²‰ä¸çš„æ—¶é—´çº¿
        for (String followerId : followers) {
            String timelineKey = "user:" + followerId + ":timeline";
            jedis.lpush(timelineKey, postId.toString());
            
            // ä¿æŒæ—¶é—´çº¿é•¿åº¦ï¼Œåªä¿ç•™æœ€æ–°1000æ¡
            jedis.ltrim(timelineKey, 0, 999);
        }
    }
    
    // æ‹‰å–æ¨¡å¼ï¼šç”¨æˆ·è®¿é—®æ—¶ä»å…³æ³¨çš„äººè·å–åŠ¨æ€
    public List<Long> pullTimeline(Long userId, int limit) {
        // è·å–ç”¨æˆ·å…³æ³¨åˆ—è¡¨
        Set<String> following = jedis.smembers("user:" + userId + ":following");
        
        List<Long> timeline = new ArrayList<>();
        
        // ä»æ¯ä¸ªå…³æ³¨çš„ç”¨æˆ·è·å–æœ€æ–°åŠ¨æ€
        for (String followingId : following) {
            String userPostsKey = "user:" + followingId + ":posts";
            List<String> posts = jedis.lrange(userPostsKey, 0, 10); // æ¯äººæœ€å¤šå–10æ¡
            
            posts.stream()
                 .map(Long::parseLong)
                 .forEach(timeline::add);
        }
        
        // æŒ‰æ—¶é—´æ’åºå¹¶è¿”å›æŒ‡å®šæ•°é‡
        return timeline.stream()
                      .sorted(Collections.reverseOrder())
                      .limit(limit)
                      .collect(Collectors.toList());
    }
}
```

### 2.5 Setç±»å‹ï¼šå…³æ³¨ç³»ç»Ÿ


**ğŸ‘¥ ç”¨æˆ·å…³æ³¨å…³ç³»ç®¡ç†**

å…³æ³¨å…³ç³»æ˜¯åŒå‘çš„ï¼Œéœ€è¦ç»´æŠ¤å…³æ³¨åˆ—è¡¨å’Œç²‰ä¸åˆ—è¡¨ã€‚

```java
// å…³æ³¨ç”¨æˆ·
public boolean followUser(Long userId, Long targetUserId) {
    if (userId.equals(targetUserId)) {
        return false; // ä¸èƒ½å…³æ³¨è‡ªå·±
    }
    
    String followingKey = "user:" + userId + ":following";
    String followersKey = "user:" + targetUserId + ":followers";
    
    // æ£€æŸ¥æ˜¯å¦å·²ç»å…³æ³¨
    if (jedis.sismember(followingKey, targetUserId.toString())) {
        return false;
    }
    
    // åŸå­æ“ä½œ
    Pipeline pipeline = jedis.pipelined();
    pipeline.sadd(followingKey, targetUserId.toString());
    pipeline.sadd(followersKey, userId.toString());
    
    // æ›´æ–°è®¡æ•°
    pipeline.incr("user:" + userId + ":following_count");
    pipeline.incr("user:" + targetUserId + ":followers_count");
    pipeline.sync();
    
    return true;
}
```

### 2.6 ZSetç±»å‹ï¼šçƒ­é—¨å†…å®¹æ’è¡Œ


**ğŸ”¥ çƒ­é—¨å†…å®¹ç®—æ³•**

çƒ­é—¨å†…å®¹éœ€è¦ç»¼åˆè€ƒè™‘ç‚¹èµæ•°ã€è¯„è®ºæ•°ã€åˆ†äº«æ•°ç­‰å› ç´ ã€‚

```java
// æ›´æ–°å†…å®¹çƒ­åº¦åˆ†æ•°
public void updatePostHotScore(Long postId) {
    String hotRankingKey = "posts:hot:ranking";
    
    // è·å–åŠ¨æ€çš„å„é¡¹æŒ‡æ ‡
    String postKey = "post:detail:" + postId;
    Map<String, String> postInfo = jedis.hgetAll(postKey);
    
    int likeCount = Integer.parseInt(postInfo.getOrDefault("likeCount", "0"));
    int commentCount = Integer.parseInt(postInfo.getOrDefault("commentCount", "0"));
    int shareCount = Integer.parseInt(postInfo.getOrDefault("shareCount", "0"));
    
    // è®¡ç®—çƒ­åº¦åˆ†æ•° (æƒé‡å¯è°ƒæ•´)
    double hotScore = likeCount * 1.0 + commentCount * 2.0 + shareCount * 3.0;
    
    // æ—¶é—´è¡°å‡å› å­
    long publishTime = Long.parseLong(postInfo.get("publishTime"));
    long hoursSincePublish = (System.currentTimeMillis() - publishTime) / 3600000;
    double timeDecay = Math.pow(0.9, hoursSincePublish); // æ¯å°æ—¶è¡°å‡10%
    
    double finalScore = hotScore * timeDecay;
    
    jedis.zadd(hotRankingKey, finalScore, postId.toString());
}
```

---

## 3. ğŸ® æ¸¸æˆç³»ç»Ÿåº”ç”¨


### 3.1 æ¸¸æˆç³»ç»Ÿæ•°æ®æ¶æ„


```
æ¸¸æˆç³»ç»ŸRedisä½¿ç”¨åœºæ™¯:

â”Œâ”€æ¸¸æˆé…ç½®â”€â”€â”€â”€â”¬â”€ç©å®¶çŠ¶æ€â”€â”€â”€â”€â”¬â”€æ“ä½œæ—¥å¿—â”€â”€â”€â”€â”¬â”€å¥½å‹ç³»ç»Ÿâ”€â”€â”€â”€â”¬â”€æ’è¡Œæ¦œâ”€â”€â”€â”€â”€â”
â”‚ String     â”‚ String     â”‚ List       â”‚ Set        â”‚ ZSet       â”‚
â”‚æ¸¸æˆå‚æ•°     â”‚åœ¨çº¿çŠ¶æ€     â”‚æ“ä½œè®°å½•     â”‚å¥½å‹åˆ—è¡¨     â”‚ç­‰çº§æ’è¡Œ     â”‚
â”‚æœåŠ¡å™¨çŠ¶æ€   â”‚å½“å‰æˆ¿é—´     â”‚ä»»åŠ¡é˜Ÿåˆ—     â”‚å…¬ä¼šæˆå‘˜     â”‚ç«æŠ€æ’å     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚             â”‚             â”‚             â”‚
            â–¼             â–¼             â–¼             â–¼
        Hashå­˜å‚¨       Listé˜Ÿåˆ—       Setå»é‡      ZSetæ’åº
        ç©å®¶å±æ€§       æˆ˜æ–—æ—¥å¿—       æˆå‘˜ç®¡ç†      ç§¯åˆ†æ’å
        è£…å¤‡ä¿¡æ¯       èŠå¤©è®°å½•       æ ‡ç­¾ç³»ç»Ÿ      æˆå°±ç³»ç»Ÿ
```

### 3.2 Stringç±»å‹ï¼šæ¸¸æˆé…ç½®å’ŒçŠ¶æ€


**âš™ï¸ æ¸¸æˆé…ç½®ç®¡ç†**

æ¸¸æˆä¸­æœ‰å¾ˆå¤šå…¨å±€é…ç½®éœ€è¦åŠ¨æ€è°ƒæ•´ï¼ŒStringç±»å‹é€‚åˆå­˜å‚¨ç®€å•é…ç½®ã€‚

```java
@Service
public class GameConfigService {
    
    // è®¾ç½®æ¸¸æˆé…ç½®
    public void setGameConfig(String configKey, String configValue) {
        String key = "game:config:" + configKey;
        jedis.set(key, configValue);
        
        // é‡è¦é…ç½®ä¸è¿‡æœŸï¼Œä¸€èˆ¬é…ç½®1å°æ—¶è¿‡æœŸ
        if (isImportantConfig(configKey)) {
            jedis.persist(key);
        } else {
            jedis.expire(key, 3600);
        }
    }
    
    // è·å–æ¸¸æˆé…ç½®
    public String getGameConfig(String configKey, String defaultValue) {
        String key = "game:config:" + configKey;
        String value = jedis.get(key);
        return value != null ? value : defaultValue;
    }
}
```

**ğŸ¯ ç©å®¶åœ¨çº¿çŠ¶æ€**

ç©å®¶çš„åœ¨çº¿çŠ¶æ€éœ€è¦å¿«é€ŸæŸ¥è¯¢å’Œæ›´æ–°ã€‚

```java
// ç©å®¶ä¸Šçº¿
public void playerOnline(Long playerId, String serverId) {
    String statusKey = "player:status:" + playerId;
    String onlineKey = "server:" + serverId + ":online_players";
    
    // è®¾ç½®ç©å®¶çŠ¶æ€
    jedis.set(statusKey, serverId);
    jedis.expire(statusKey, 1800); // 30åˆ†é’Ÿå¿ƒè·³è¶…æ—¶
    
    // æ·»åŠ åˆ°æœåŠ¡å™¨åœ¨çº¿åˆ—è¡¨
    jedis.sadd(onlineKey, playerId.toString());
}
```

### 3.3 Hashç±»å‹ï¼šç©å®¶æ•°æ®


**ğŸ‘¤ ç©å®¶å±æ€§å­˜å‚¨**

ç©å®¶æœ‰å¾ˆå¤šå±æ€§å­—æ®µï¼ŒHashç±»å‹å¯ä»¥é«˜æ•ˆå­˜å‚¨å’Œæ›´æ–°ã€‚

```java
// ç©å®¶å±æ€§ç®¡ç†
public void updatePlayerAttributes(Long playerId, PlayerAttributes attrs) {
    String playerKey = "player:attrs:" + playerId;
    
    Map<String, String> attrMap = new HashMap<>();
    attrMap.put("level", attrs.getLevel().toString());
    attrMap.put("exp", attrs.getExp().toString());
    attrMap.put("hp", attrs.getHp().toString());
    attrMap.put("mp", attrs.getMp().toString());
    attrMap.put("attack", attrs.getAttack().toString());
    attrMap.put("defense", attrs.getDefense().toString());
    
    jedis.hmset(playerKey, attrMap);
    jedis.expire(playerKey, 86400); // 24å°æ—¶è¿‡æœŸ
}

// è£…å¤‡ä¿¡æ¯å­˜å‚¨
public void cachePlayerEquipments(Long playerId, List<Equipment> equipments) {
    String equipKey = "player:equips:" + playerId;
    
    Map<String, String> equipMap = new HashMap<>();
    for (Equipment equip : equipments) {
        equipMap.put(equip.getSlot(), JSON.toJSONString(equip));
    }
    
    jedis.hmset(equipKey, equipMap);
    jedis.expire(equipKey, 3600);
}
```

### 3.4 Listç±»å‹ï¼šæ—¥å¿—å’Œé˜Ÿåˆ—


**ğŸ“œ æ“ä½œæ—¥å¿—è®°å½•**

æ¸¸æˆæ“ä½œæ—¥å¿—éœ€è¦æŒ‰æ—¶é—´é¡ºåºè®°å½•ï¼ŒListç±»å‹å¾ˆé€‚åˆã€‚

```java
// è®°å½•ç©å®¶æ“ä½œ
public void logPlayerAction(Long playerId, String action, String details) {
    String logKey = "player:actions:" + playerId;
    
    Map<String, Object> logEntry = new HashMap<>();
    logEntry.put("action", action);
    logEntry.put("details", details);
    logEntry.put("timestamp", System.currentTimeMillis());
    
    jedis.lpush(logKey, JSON.toJSONString(logEntry));
    jedis.ltrim(logKey, 0, 999); // åªä¿ç•™æœ€æ–°1000æ¡
    jedis.expire(logKey, 604800); // 7å¤©è¿‡æœŸ
}
```

**ğŸ¯ ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ**

æ¸¸æˆä¸­çš„å¼‚æ­¥ä»»åŠ¡å¯ä»¥ç”¨Listå®ç°é˜Ÿåˆ—ã€‚

```java
// ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
public void addTask(String taskType, Object taskData) {
    String queueKey = "game:tasks:" + taskType;
    
    Map<String, Object> task = new HashMap<>();
    task.put("data", taskData);
    task.put("createTime", System.currentTimeMillis());
    
    jedis.lpush(queueKey, JSON.toJSONString(task));
}

// å¤„ç†ä»»åŠ¡
public String processTask(String taskType) {
    String queueKey = "game:tasks:" + taskType;
    return jedis.rpop(queueKey); // ä»é˜Ÿå°¾å–ä»»åŠ¡
}
```

### 3.5 Setç±»å‹ï¼šå¥½å‹å’Œå…¬ä¼š


**ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å¥½å‹ç³»ç»Ÿ**

å¥½å‹å…³ç³»éœ€è¦å»é‡ï¼ŒSetç±»å‹å¤©ç„¶æ”¯æŒã€‚

```java
// æ·»åŠ å¥½å‹
public boolean addFriend(Long playerId, Long friendId) {
    String friendsKey = "player:friends:" + playerId;
    String friendOfKey = "player:friends:" + friendId;
    
    // äº’ç›¸æ·»åŠ ä¸ºå¥½å‹
    Pipeline pipeline = jedis.pipelined();
    pipeline.sadd(friendsKey, friendId.toString());
    pipeline.sadd(friendOfKey, playerId.toString());
    pipeline.sync();
    
    return true;
}

// è·å–å…±åŒå¥½å‹
public Set<Long> getCommonFriends(Long player1, Long player2) {
    String key1 = "player:friends:" + player1;
    String key2 = "player:friends:" + player2;
    
    Set<String> common = jedis.sinter(key1, key2);
    return common.stream()
                 .map(Long::parseLong)
                 .collect(Collectors.toSet());
}
```

### 3.6 ZSetç±»å‹ï¼šæ’è¡Œæ¦œç³»ç»Ÿ


**ğŸ† ç­‰çº§æ’è¡Œæ¦œ**

æ’è¡Œæ¦œæ˜¯æ¸¸æˆçš„ç»å…¸åŠŸèƒ½ï¼ŒZSetç±»å‹å®Œç¾èƒœä»»ã€‚

```java
@Service
public class GameRankingService {
    
    // æ›´æ–°ç©å®¶ç­‰çº§æ’è¡Œ
    public void updateLevelRanking(Long playerId, int level) {
        String rankingKey = "game:ranking:level";
        jedis.zadd(rankingKey, level, playerId.toString());
    }
    
    // è·å–ç­‰çº§æ’è¡Œæ¦œ
    public List<PlayerRanking> getLevelRanking(int limit) {
        String rankingKey = "game:ranking:level";
        
        Set<Tuple> ranking = jedis.zrevrangeWithScores(rankingKey, 0, limit - 1);
        
        return ranking.stream().map(tuple -> {
            PlayerRanking pr = new PlayerRanking();
            pr.setPlayerId(Long.parseLong(tuple.getElement()));
            pr.setLevel((int) tuple.getScore());
            return pr;
        }).collect(Collectors.toList());
    }
    
    // è·å–ç©å®¶æ’å
    public Long getPlayerRank(Long playerId) {
        String rankingKey = "game:ranking:level";
        return jedis.zrevrank(rankingKey, playerId.toString());
    }
    
    // ç«æŠ€åœºæ’å(åˆ†æ•°è¶Šä½æ’åè¶Šé«˜)
    public void updateArenaRanking(Long playerId, int score) {
        String arenaKey = "game:ranking:arena";
        jedis.zadd(arenaKey, score, playerId.toString());
    }
}
```

---

## 4. ğŸ“Š æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–


### 4.1 å„æ•°æ®ç±»å‹å†…å­˜å ç”¨åˆ†æ


**ğŸ’¾ å†…å­˜å ç”¨å¯¹æ¯”æµ‹è¯•**

```java
// å†…å­˜å ç”¨æµ‹è¯•å·¥å…·
public class RedisMemoryAnalyzer {
    
    public void analyzeMemoryUsage() {
        // æµ‹è¯•ä¸åŒæ•°æ®ç±»å‹çš„å†…å­˜å ç”¨
        long beforeMemory = getRedisMemoryUsage();
        
        // Stringç±»å‹æµ‹è¯•
        testStringMemory(10000);
        long stringMemory = getRedisMemoryUsage() - beforeMemory;
        
        // Hashç±»å‹æµ‹è¯•  
        testHashMemory(10000);
        long hashMemory = getRedisMemoryUsage() - beforeMemory - stringMemory;
        
        // è¾“å‡ºåˆ†æç»“æœ
        System.out.println("Memory Usage Analysis:");
        System.out.println("String: " + stringMemory + " bytes");
        System.out.println("Hash: " + hashMemory + " bytes");
    }
}
```

**ğŸ“‹ å†…å­˜å ç”¨å¯¹æ¯”è¡¨**

| æ•°æ®ç±»å‹ | **10ä¸‡æ¡æ•°æ®** | **æ¯æ¡å¹³å‡** | **é€‚ç”¨åœºæ™¯** |
|---------|---------------|-------------|-------------|
| **String** | `~12MB` | `~120å­—èŠ‚` | `ç®€å•KVå­˜å‚¨` |
| **Hash** | `~8MB` | `~80å­—èŠ‚` | `å¯¹è±¡å­˜å‚¨` |
| **List** | `~10MB` | `~100å­—èŠ‚` | `åºåˆ—æ•°æ®` |
| **Set** | `~11MB` | `~110å­—èŠ‚` | `å»é‡é›†åˆ` |
| **ZSet** | `~15MB` | `~150å­—èŠ‚` | `æ’åºé›†åˆ` |

> ğŸ’¡ **å†…å­˜ä¼˜åŒ–å»ºè®®**ï¼š
> - å¯¹è±¡å­˜å‚¨ä¼˜å…ˆé€‰æ‹©Hashè€ŒéStringå­˜JSON
> - å°æ•°æ®é‡(<100ä¸ªå…ƒç´ )å¯ä»¥è€ƒè™‘å‹ç¼©ç¼–ç 
> - åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´é¿å…å†…å­˜æ³„æ¼

### 4.2 æ“ä½œæ€§èƒ½åŸºå‡†æµ‹è¯•


**âš¡ æ€§èƒ½æµ‹è¯•æ¡†æ¶**

```java
@Component
public class RedisBenchmark {
    
    // æ‰¹é‡æ“ä½œæ€§èƒ½æµ‹è¯•
    public void benchmarkOperations() {
        int testCount = 100000;
        
        // Stringæ“ä½œæ€§èƒ½
        long start = System.currentTimeMillis();
        for (int i = 0; i < testCount; i++) {
            jedis.set("test:string:" + i, "value" + i);
        }
        long stringTime = System.currentTimeMillis() - start;
        
        // Hashæ“ä½œæ€§èƒ½
        start = System.currentTimeMillis();
        for (int i = 0; i < testCount; i++) {
            jedis.hset("test:hash:" + i, "field", "value" + i);
        }
        long hashTime = System.currentTimeMillis() - start;
        
        System.out.println("Performance Test Results:");
        System.out.println("String SET: " + stringTime + "ms");
        System.out.println("Hash HSET: " + hashTime + "ms");
    }
}
```

### 4.3 æ··åˆä½¿ç”¨æ€§èƒ½ä¼˜åŒ–


**ğŸš€ ç»„åˆä¼˜åŒ–ç­–ç•¥**

```java
// ç”µå•†ç³»ç»Ÿä¼˜åŒ–ç¤ºä¾‹
@Service
public class OptimizedECommerceService {
    
    // ç»„åˆæ•°æ®ç±»å‹ä¼˜åŒ–å•†å“æŸ¥è¯¢
    public Product getOptimizedProduct(Long productId) {
        // L1: Stringç¼“å­˜çƒ­ç‚¹å•†å“IDåˆ—è¡¨
        String hotProductsKey = "hot:products";
        boolean isHot = jedis.sismember(hotProductsKey, productId.toString());
        
        if (isHot) {
            // L2: Hashå­˜å‚¨çƒ­ç‚¹å•†å“è¯¦æƒ…
            String productKey = "product:hot:" + productId;
            Map<String, String> productData = jedis.hgetAll(productKey);
            
            if (!productData.isEmpty()) {
                // L3: ZSetè·å–å®æ—¶æ’å
                String rankingKey = "products:sales:ranking";
                Long rank = jedis.zrevrank(rankingKey, productId.toString());
                
                Product product = buildProductFromHash(productData);
                product.setRanking(rank);
                return product;
            }
        }
        
        // å†·æ•°æ®èµ°æ•°æ®åº“
        return productRepository.findById(productId);
    }
    
    // æ‰¹é‡æ“ä½œä¼˜åŒ–
    public void batchUpdateProducts(List<Product> products) {
        Pipeline pipeline = jedis.pipelined();
        
        for (Product product : products) {
            // æ‰¹é‡æ›´æ–°å¤šç§æ•°æ®ç±»å‹
            String productKey = "product:detail:" + product.getId();
            pipeline.hmset(productKey, convertToHash(product));
            
            // æ›´æ–°é”€é‡æ’è¡Œ
            pipeline.zadd("products:sales:ranking", 
                         product.getSalesCount(), 
                         product.getId().toString());
            
            // æ›´æ–°å•†å“æ ‡ç­¾
            pipeline.sadd("product:tags:" + product.getId(), 
                         product.getTags().toArray(new String[0]));
        }
        
        pipeline.sync(); // æ‰¹é‡æ‰§è¡Œ
    }
}
```

### 4.4 ç›‘æ§æŒ‡æ ‡è®¾è®¡


**ğŸ“ˆ å…³é”®ç›‘æ§æŒ‡æ ‡**

```java
@Component
public class RedisMonitor {
    
    // æ€§èƒ½æŒ‡æ ‡æ”¶é›†
    public Map<String, Object> collectMetrics() {
        Map<String, Object> metrics = new HashMap<>();
        
        // åŸºç¡€ä¿¡æ¯
        String info = jedis.info();
        metrics.put("memory_used", extractValue(info, "used_memory_human"));
        metrics.put("connected_clients", extractValue(info, "connected_clients"));
        metrics.put("ops_per_sec", extractValue(info, "instantaneous_ops_per_sec"));
        
        // å‘½ä¸­ç‡ç»Ÿè®¡
        String keyspaceHits = extractValue(info, "keyspace_hits");
        String keyspaceMisses = extractValue(info, "keyspace_misses");
        double hitRate = Double.parseDouble(keyspaceHits) / 
                        (Double.parseDouble(keyspaceHits) + Double.parseDouble(keyspaceMisses));
        metrics.put("hit_rate", hitRate);
        
        // æ…¢æŸ¥è¯¢
        List<String> slowlogs = jedis.slowlogGet(10);
        metrics.put("slow_queries", slowlogs.size());
        
        return metrics;
    }
    
    // å‘Šè­¦è§„åˆ™
    public void checkAlerts(Map<String, Object> metrics) {
        double hitRate = (Double) metrics.get("hit_rate");
        if (hitRate < 0.8) {
            System.out.println("âš ï¸ ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½: " + hitRate);
        }
        
        int slowQueries = (Integer) metrics.get("slow_queries");
        if (slowQueries > 5) {
            System.out.println("âš ï¸ æ…¢æŸ¥è¯¢è¿‡å¤š: " + slowQueries);
        }
    }
}
```

**ğŸ¯ ç›‘æ§é¢æ¿è®¾è®¡**

```
Redisæ€§èƒ½ç›‘æ§é¢æ¿:

â”Œâ”€å®æ—¶çŠ¶æ€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å†…å­˜ä½¿ç”¨: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%                    â”‚
â”‚ è¿æ¥æ•°: 156/10000                          â”‚
â”‚ QPS: 8,542                                 â”‚
â”‚ å‘½ä¸­ç‡: 94.2%                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€æ•°æ®ç±»å‹åˆ†å¸ƒâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ String: 45% â”‚ Hash: 25% â”‚ List: 15%         â”‚
â”‚ Set: 10%    â”‚ ZSet: 5%                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€æ€§èƒ½è¶‹åŠ¿â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QPS:     â–â–‚â–ƒâ–…â–†â–ˆâ–†â–…â–ƒâ–‚â–                        â”‚
â”‚ å»¶è¿Ÿ:    â–â–â–â–‚â–â–â–â–â–â–â–                        â”‚
â”‚ å†…å­˜:    â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ•°æ®ç±»å‹é€‰æ‹©ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€é€‚åˆçš„æ•°æ®ç±»å‹
ğŸ”¸ ç»„åˆä½¿ç”¨ï¼šå¤šç§æ•°æ®ç±»å‹é…åˆä½¿ç”¨å‘æŒ¥æœ€å¤§æ•ˆèƒ½
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡æ“ä½œã€Pipelineã€åˆç†è¿‡æœŸæ—¶é—´
ğŸ”¸ å†…å­˜ç®¡ç†ï¼šç›‘æ§å†…å­˜ä½¿ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼
ğŸ”¸ ç›‘æ§æŒ‡æ ‡ï¼šå‘½ä¸­ç‡ã€QPSã€å†…å­˜ä½¿ç”¨ç‡ã€æ…¢æŸ¥è¯¢
```

### 5.2 å„æ•°æ®ç±»å‹åº”ç”¨ç‰¹ç‚¹


**ğŸ¯ é€‰æ‹©å†³ç­–è¡¨**

| åº”ç”¨åœºæ™¯ | **æœ€ä½³é€‰æ‹©** | **åŸå› ** | **æ³¨æ„äº‹é¡¹** |
|---------|------------|---------|-------------|
| **è®¡æ•°å™¨** | `String` | `åŸå­æ€§INCRæ“ä½œ` | `è®¾ç½®åˆç†è¿‡æœŸæ—¶é—´` |
| **å¯¹è±¡å­˜å‚¨** | `Hash` | `èŠ‚çœå†…å­˜ï¼Œéƒ¨åˆ†æ›´æ–°` | `å­—æ®µä¸è¦å¤ªå¤š` |
| **æ—¶é—´åºåˆ—** | `List` | `å¤©ç„¶æœ‰åºï¼Œå¤´å°¾æ“ä½œå¿«` | `æ§åˆ¶åˆ—è¡¨é•¿åº¦` |
| **å»é‡é›†åˆ** | `Set` | `è‡ªåŠ¨å»é‡ï¼Œé›†åˆè¿ç®—` | `å…ƒç´ ä¸è¦å¤ªå¤§` |
| **æ’è¡Œæ¦œ** | `ZSet` | `è‡ªåŠ¨æ’åºï¼ŒèŒƒå›´æŸ¥è¯¢` | `åˆ†æ•°ç²¾åº¦é—®é¢˜` |

### 5.3 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒåŸåˆ™


**âš¡ ä¼˜åŒ–ç­–ç•¥**
```
æ‰¹é‡æ“ä½œåŸåˆ™ï¼š
- ä½¿ç”¨Pipelineå‡å°‘ç½‘ç»œå¾€è¿”
- mget/msetæ‰¹é‡å¤„ç†å¤šä¸ªkey
- æ‰¹é‡æ“ä½œæ¯”å•ä¸ªæ“ä½œæ•ˆç‡é«˜10-100å€

å†…å­˜ä¼˜åŒ–åŸåˆ™ï¼š
- Hashä¼˜äºStringå­˜å‚¨å¯¹è±¡
- è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
- å®šæœŸæ¸…ç†æ— ç”¨æ•°æ®

ç½‘ç»œä¼˜åŒ–åŸåˆ™ï¼š
- å‡å°‘å‘½ä»¤å¾€è¿”æ¬¡æ•°
- ä½¿ç”¨è¿æ¥æ± ç®¡ç†è¿æ¥
- é€‰æ‹©åˆé€‚çš„åºåˆ—åŒ–æ–¹å¼
```

**ğŸ” ç›‘æ§é‡ç‚¹**
```
å¿…ç›‘æ§æŒ‡æ ‡ï¼š
âœ… å†…å­˜ä½¿ç”¨ç‡ (<85%)
âœ… ç¼“å­˜å‘½ä¸­ç‡ (>80%)  
âœ… QPSå³°å€¼ç›‘æ§
âœ… æ…¢æŸ¥è¯¢æ•°é‡ (<10/min)
âœ… è¿æ¥æ•°ä½¿ç”¨æƒ…å†µ

æ€§èƒ½ç“¶é¢ˆæ’æŸ¥ï¼š
ğŸ”¸ å†…å­˜ä¸è¶³ â†’ å¢åŠ å†…å­˜æˆ–ä¼˜åŒ–æ•°æ®ç»“æ„
ğŸ”¸ å‘½ä¸­ç‡ä½ â†’ æ£€æŸ¥ç¼“å­˜ç­–ç•¥å’Œè¿‡æœŸæ—¶é—´
ğŸ”¸ æ…¢æŸ¥è¯¢å¤š â†’ ä¼˜åŒ–å¤æ‚æ“ä½œï¼Œé¿å…å¤§key
ğŸ”¸ è¿æ¥æ•°æ»¡ â†’ ä¼˜åŒ–è¿æ¥æ± é…ç½®
```

### 5.4 å®æˆ˜åº”ç”¨ç»éªŒ


**ğŸ’¡ è®¾è®¡æ¨¡å¼æ€»ç»“**
- **è¯»å¤šå†™å°‘**ï¼šé€‚åˆç¼“å­˜æ¨¡å¼ï¼Œè¾ƒé•¿TTL
- **å†™å¤šè¯»å°‘**ï¼šé€‚åˆè®¡æ•°æ¨¡å¼ï¼ŒåŠæ—¶æŒä¹…åŒ–
- **å®æ—¶æ€§è¦æ±‚é«˜**ï¼šé€‚åˆæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å¼
- **æ•°æ®é‡å¤§**ï¼šé€‚åˆåˆ†ç‰‡å­˜å‚¨æ¨¡å¼

**ğŸ¯ å¸¸è§é—®é¢˜è§£å†³**
- **ç¼“å­˜ç©¿é€**ï¼šç©ºå€¼ç¼“å­˜ + å¸ƒéš†è¿‡æ»¤å™¨
- **ç¼“å­˜é›ªå´©**ï¼šéšæœºTTL + å¤šçº§ç¼“å­˜
- **ç¼“å­˜å‡»ç©¿**ï¼šåˆ†å¸ƒå¼é” + å¼‚æ­¥æ›´æ–°
- **æ•°æ®ä¸€è‡´æ€§**ï¼šæœ€ç»ˆä¸€è‡´æ€§è®¾è®¡

**æ ¸å¿ƒè®°å¿†**ï¼š
- äº”ç§æ•°æ®ç±»å‹å„æœ‰ç‰¹è‰²ï¼Œç»„åˆä½¿ç”¨å¨åŠ›æ›´å¤§
- æ€§èƒ½ä¼˜åŒ–çš„å…³é”®åœ¨äºå‡å°‘ç½‘ç»œå¾€è¿”å’Œå†…å­˜å ç”¨
- ç›‘æ§æŒ‡æ ‡å¸®åŠ©åŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜
- å®æˆ˜ä¸­è¦æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯çµæ´»è¿ç”¨