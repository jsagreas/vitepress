---
title: 12ã€ç”Ÿäº§ç¯å¢ƒåˆ†åŒºè§„åˆ’
---
## ğŸ“š ç›®å½•


1. [æœåŠ¡å™¨åˆ†åŒºæ ‡å‡†æ–¹æ¡ˆ](#1-æœåŠ¡å™¨åˆ†åŒºæ ‡å‡†æ–¹æ¡ˆ)
2. [æ•°æ®åº“æœåŠ¡å™¨åˆ†åŒºç­–ç•¥](#2-æ•°æ®åº“æœåŠ¡å™¨åˆ†åŒºç­–ç•¥)
3. [WebæœåŠ¡å™¨åˆ†åŒºè®¾è®¡](#3-webæœåŠ¡å™¨åˆ†åŒºè®¾è®¡)
4. [æ—¥å¿—æœåŠ¡å™¨åˆ†åŒºè§„åˆ’](#4-æ—¥å¿—æœåŠ¡å™¨åˆ†åŒºè§„åˆ’)
5. [é«˜å¯ç”¨ç¯å¢ƒåˆ†åŒºè€ƒè™‘](#5-é«˜å¯ç”¨ç¯å¢ƒåˆ†åŒºè€ƒè™‘)
6. [å®¹é‡å¢é•¿é¢„ä¼°æ–¹æ³•](#6-å®¹é‡å¢é•¿é¢„ä¼°æ–¹æ³•)
7. [ç›‘æ§å‘Šè­¦é˜ˆå€¼è®¾ç½®](#7-ç›‘æ§å‘Šè­¦é˜ˆå€¼è®¾ç½®)
8. [åˆ†åŒºç»´æŠ¤è®¡åˆ’åˆ¶å®š](#8-åˆ†åŒºç»´æŠ¤è®¡åˆ’åˆ¶å®š)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ æœåŠ¡å™¨åˆ†åŒºæ ‡å‡†æ–¹æ¡ˆ



### 1.1 åˆ†åŒºè§„åˆ’åŸºæœ¬åŸåˆ™



**ä»€ä¹ˆæ˜¯ç”Ÿäº§ç¯å¢ƒåˆ†åŒºè§„åˆ’ï¼Ÿ**
> åˆ†åŒºè§„åˆ’å°±åƒ"æˆ¿å±‹è£…ä¿®å¸ƒå±€"ï¼Œä¸åŒçš„æˆ¿é—´æœ‰ä¸åŒçš„ç”¨é€”ï¼Œåˆç†çš„åˆ†åŒºè®©ç³»ç»Ÿè¿è¡Œæ›´ç¨³å®šã€ç»´æŠ¤æ›´æ–¹ä¾¿ã€é—®é¢˜å®šä½æ›´å¿«é€Ÿã€‚

```
åˆ†åŒºè§„åˆ’çš„æ ¸å¿ƒæ€æƒ³ï¼š
éš”ç¦»æ€§ï¼šä¸åŒåŠŸèƒ½çš„æ•°æ®åˆ†å¼€å­˜æ”¾
å¯æ‰©å±•æ€§ï¼šé¢„ç•™å¢é•¿ç©ºé—´ï¼Œæ–¹ä¾¿åæœŸæ‰©å®¹
å®‰å…¨æ€§ï¼šå…³é”®æ•°æ®ç‹¬ç«‹åˆ†åŒºï¼Œé™ä½é£é™©
å¯ç»´æŠ¤æ€§ï¼šä¾¿äºå¤‡ä»½ã€æ¢å¤å’Œç›‘æ§
```

### 1.2 é€šç”¨æœåŠ¡å™¨åˆ†åŒºæ–¹æ¡ˆ



**ğŸ”¸ æ ‡å‡†åˆ†åŒºå¸ƒå±€**

| åˆ†åŒº | æŒ‚è½½ç‚¹ | **å»ºè®®å¤§å°** | **ç”¨é€”è¯´æ˜** | **æ–‡ä»¶ç³»ç»Ÿ** |
|------|--------|-------------|-------------|-------------|
| **æ ¹åˆ†åŒº** | `/` | `20-50GB` | `ç³»ç»Ÿæ–‡ä»¶ã€åŸºç¡€ç¨‹åº` | `ext4` |
| **å¼•å¯¼åˆ†åŒº** | `/boot` | `500MB-1GB` | `å†…æ ¸æ–‡ä»¶ã€å¯åŠ¨ç¨‹åº` | `ext4` |
| **äº¤æ¢åˆ†åŒº** | `swap` | `å†…å­˜çš„1-2å€` | `è™šæ‹Ÿå†…å­˜æ‰©å±•` | `swap` |
| **homeåˆ†åŒº** | `/home` | `æŒ‰éœ€åˆ†é…` | `ç”¨æˆ·æ•°æ®ã€é…ç½®æ–‡ä»¶` | `ext4/xfs` |
| **tmpåˆ†åŒº** | `/tmp` | `10-20GB` | `ä¸´æ—¶æ–‡ä»¶å­˜å‚¨` | `ext4` |
| **varåˆ†åŒº** | `/var` | `50-100GB` | `æ—¥å¿—ã€ç¼“å­˜ã€æ•°æ®åº“` | `ext4/xfs` |
| **optåˆ†åŒº** | `/opt` | `20-50GB` | `ç¬¬ä¸‰æ–¹è½¯ä»¶` | `ext4` |

**åˆ†åŒºå¤§å°çš„è®¡ç®—é€»è¾‘ï¼š**
```
æ ¹åˆ†åŒº (/) è®¡ç®—ï¼š
åŸºç¡€ = 15GB (ç³»ç»Ÿæ–‡ä»¶)
è½¯ä»¶ = 10-20GB (å¸¸ç”¨è½¯ä»¶åŒ…)  
é¢„ç•™ = 15-25GB (ç³»ç»Ÿæ›´æ–°ã€ä¸´æ—¶æ–‡ä»¶)
æ€»è®¡ = 40-60GB

varåˆ†åŒº (/var) è®¡ç®—ï¼š
æ—¥å¿— = 20-40GB (ç³»ç»Ÿå’Œåº”ç”¨æ—¥å¿—)
ç¼“å­˜ = 10-20GB (è½¯ä»¶åŒ…ç¼“å­˜)
æ•°æ® = 20-40GB (åº”ç”¨æ•°æ®)
é¢„ç•™ = 50% (å¢é•¿ç©ºé—´)
æ€»è®¡ = 75-150GB
```

### 1.3 ä¸åŒæœåŠ¡å™¨ç±»å‹çš„åŸºç¡€æ–¹æ¡ˆ



**ğŸ¯ å°å‹WebæœåŠ¡å™¨ (æ€»ç£ç›˜: 100GB)**
```
åˆ†åŒºå¸ƒå±€ï¼š
/boot     â†’ 1GB
/         â†’ 25GB  
/var      â†’ 40GB (æ—¥å¿—ã€ç¼“å­˜)
/home     â†’ 10GB (ç”¨æˆ·æ•°æ®)
swap      â†’ 4GB (å‡è®¾2GBå†…å­˜)
/opt      â†’ 15GB (WebæœåŠ¡è½¯ä»¶)
é¢„ç•™      â†’ 5GB (æœªåˆ†é…ç©ºé—´)
```

**ğŸ¯ ä¸­å‹åº”ç”¨æœåŠ¡å™¨ (æ€»ç£ç›˜: 500GB)**
```
åˆ†åŒºå¸ƒå±€ï¼š
/boot     â†’ 1GB
/         â†’ 50GB
/var      â†’ 150GB (åº”ç”¨æ—¥å¿—ã€æ•°æ®)
/home     â†’ 50GB
/tmp      â†’ 20GB (ä¸´æ—¶å¤„ç†æ–‡ä»¶)  
/opt      â†’ 100GB (åº”ç”¨è½¯ä»¶)
/data     â†’ 100GB (åº”ç”¨æ•°æ®ï¼Œç‹¬ç«‹åˆ†åŒº)
swap      â†’ 8GB
é¢„ç•™      â†’ 21GB
```

**ğŸ¯ å¤§å‹ä¼ä¸šæœåŠ¡å™¨ (æ€»ç£ç›˜: 2TB+)**
```
åˆ†åŒºå¸ƒå±€ï¼š
/boot     â†’ 1GB
/         â†’ 100GB
/var      â†’ 300GB
/home     â†’ 100GB  
/tmp      â†’ 50GB
/opt      â†’ 200GB
/data     â†’ 1TB+ (ä¸šåŠ¡æ•°æ®)
/backup   â†’ 500GB (å¤‡ä»½å­˜å‚¨)
swap      â†’ 16GB
```

### 1.4 æ–‡ä»¶ç³»ç»Ÿé€‰æ‹©ç­–ç•¥



**æ–‡ä»¶ç³»ç»Ÿç‰¹ç‚¹å¯¹æ¯”ï¼š**

| æ–‡ä»¶ç³»ç»Ÿ | **é€‚ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|----------|-------------|----------|----------|
| **ext4** | `é€šç”¨åœºæ™¯ï¼Œä¸­å°å‹æ–‡ä»¶` | `ç¨³å®šå¯é ï¼Œå¹¿æ³›æ”¯æŒ` | `å¤§æ–‡ä»¶æ€§èƒ½ä¸€èˆ¬` |
| **xfs** | `å¤§æ–‡ä»¶ï¼Œé«˜å¹¶å‘I/O` | `é«˜æ€§èƒ½ï¼Œå¯æ‰©å±•æ€§å¥½` | `åˆ é™¤å¤§é‡å°æ–‡ä»¶è¾ƒæ…¢` |
| **btrfs** | `éœ€è¦å¿«ç…§ã€å‹ç¼©åŠŸèƒ½` | `é«˜çº§ç‰¹æ€§ä¸°å¯Œ` | `ç›¸å¯¹è¾ƒæ–°ï¼Œç¨³å®šæ€§å¾…è§‚å¯Ÿ` |

**é€‰æ‹©å»ºè®®ï¼š**
```
æ ¹åˆ†åŒº (/)ï¼šext4
â†’ ç¨³å®šæ€§ä¼˜å…ˆï¼Œæ–‡ä»¶ç›¸å¯¹è¾ƒå°

æ•°æ®åˆ†åŒº (/data)ï¼šxfs
â†’ æ€§èƒ½ä¼˜å…ˆï¼Œå¤„ç†å¤§æ–‡ä»¶å¤š

æ—¥å¿—åˆ†åŒº (/var/log)ï¼šext4  
â†’ é¢‘ç¹å†™å…¥ï¼Œç¨³å®šæ€§é‡è¦

å¤‡ä»½åˆ†åŒº (/backup)ï¼šxfs
â†’ å¤§æ–‡ä»¶ä¼ è¾“ï¼Œæ€§èƒ½è¦æ±‚é«˜
```

---

## 2. ğŸ—„ï¸ æ•°æ®åº“æœåŠ¡å™¨åˆ†åŒºç­–ç•¥



### 2.1 æ•°æ®åº“æœåŠ¡å™¨ç‰¹æ®Šéœ€æ±‚



**æ•°æ®åº“æœåŠ¡å™¨çš„åˆ†åŒºæŒ‘æˆ˜**
> æ•°æ®åº“å°±åƒ"å›¾ä¹¦é¦†"ï¼Œéœ€è¦å¿«é€ŸæŸ¥æ‰¾ï¼ˆè¯»å–ï¼‰å’Œæ•´ç†ï¼ˆå†™å…¥ï¼‰å¤§é‡ä¿¡æ¯ã€‚ä¸åŒç±»å‹çš„"ä¹¦ç±"ï¼ˆæ•°æ®ã€æ—¥å¿—ã€ç´¢å¼•ï¼‰éœ€è¦æ”¾åœ¨ä¸åŒçš„"ä¹¦æ¶"ï¼ˆåˆ†åŒºï¼‰ä¸Šã€‚

```
æ•°æ®åº“I/Oç‰¹ç‚¹ï¼š
éšæœºè¯»å†™ï¼šæŸ¥è¯¢æ—¶éœ€è¦å¿«é€Ÿå®šä½æ•°æ®
å¤§é‡å†™å…¥ï¼šäº‹åŠ¡æ—¥å¿—éœ€è¦æŒç»­å†™å…¥
æ•°æ®å®‰å…¨ï¼šæ•°æ®ä¸¢å¤±å½±å“å·¨å¤§
æ€§èƒ½è¦æ±‚ï¼šå“åº”æ—¶é—´æ•æ„Ÿ

åˆ†åŒºç­–ç•¥é‡ç‚¹ï¼š
I/Oåˆ†ç¦»ï¼šæ•°æ®ã€æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶åˆ†å¼€
æ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨é«˜æ€§èƒ½å­˜å‚¨è®¾å¤‡
å®‰å…¨ä¿éšœï¼šå¤šé‡å¤‡ä»½å’Œå¿«ç…§
ç›‘æ§é¢„è­¦ï¼šå¯†åˆ‡å…³æ³¨ç©ºé—´ä½¿ç”¨
```

### 2.2 MySQL/MariaDBåˆ†åŒºæ–¹æ¡ˆ



**ğŸ”¸ MySQLä¸“ç”¨åˆ†åŒºå¸ƒå±€**

| åˆ†åŒº | æŒ‚è½½ç‚¹ | **å»ºè®®å¤§å°** | **å­˜å‚¨å†…å®¹** | **I/Oç‰¹å¾** |
|------|--------|-------------|-------------|------------|
| **ç³»ç»Ÿåˆ†åŒº** | `/` | `30GB` | `æ“ä½œç³»ç»Ÿã€åŸºç¡€è½¯ä»¶` | `ä½é¢‘è¯»å†™` |
| **æ•°æ®åˆ†åŒº** | `/var/lib/mysql` | `æ•°æ®é‡Ã—2-3å€` | `æ•°æ®åº“è¡¨æ–‡ä»¶` | `éšæœºè¯»å†™` |
| **æ—¥å¿—åˆ†åŒº** | `/var/log/mysql` | `50-100GB` | `é”™è¯¯æ—¥å¿—ã€æ…¢æŸ¥è¯¢æ—¥å¿—` | `é¡ºåºå†™å…¥` |
| **binlogåˆ†åŒº** | `/var/lib/mysql/binlog` | `æ•°æ®é‡Ã—0.5å€` | `äºŒè¿›åˆ¶æ—¥å¿—` | `é¡ºåºå†™å…¥` |
| **ä¸´æ—¶åˆ†åŒº** | `/tmp/mysql` | `å†…å­˜Ã—2å€` | `ä¸´æ—¶è¡¨ã€æ’åºæ–‡ä»¶` | `é¢‘ç¹è¯»å†™` |
| **å¤‡ä»½åˆ†åŒº** | `/backup` | `æ•°æ®é‡Ã—1.5å€` | `æ•°æ®åº“å¤‡ä»½æ–‡ä»¶` | `å¤§æ–‡ä»¶å†™å…¥` |

**MySQLé…ç½®ä¼˜åŒ–ç¤ºä¾‹ï¼š**
```ini
# my.cnfé…ç½®æ–‡ä»¶ä¼˜åŒ–

[mysqld]
# æ•°æ®ç›®å½•

datadir = /var/lib/mysql

# äºŒè¿›åˆ¶æ—¥å¿— (ç‹¬ç«‹åˆ†åŒº)

log-bin = /var/lib/mysql/binlog/mysql-bin
binlog_cache_size = 1M

# é”™è¯¯æ—¥å¿— (ç‹¬ç«‹åˆ†åŒº)  

log-error = /var/log/mysql/error.log

# æ…¢æŸ¥è¯¢æ—¥å¿—

slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log

# ä¸´æ—¶ç›®å½• (ç‹¬ç«‹åˆ†åŒºï¼Œé«˜æ€§èƒ½å­˜å‚¨)

tmpdir = /tmp/mysql
```

### 2.3 PostgreSQLåˆ†åŒºæ–¹æ¡ˆ



**ğŸ”¸ PostgreSQLåˆ†åŒºç‰¹ç‚¹**

```
PostgreSQLç›®å½•ç»“æ„ï¼š
/var/lib/postgresql/data/
â”œâ”€â”€ base/           # æ•°æ®åº“æ•°æ®æ–‡ä»¶
â”œâ”€â”€ pg_wal/         # WALæ—¥å¿—æ–‡ä»¶ (Write-Ahead Log)
â”œâ”€â”€ pg_log/         # æœåŠ¡å™¨æ—¥å¿—
â”œâ”€â”€ pg_stat_tmp/    # ç»Ÿè®¡ä¸´æ—¶æ–‡ä»¶
â””â”€â”€ pg_tblspc/      # è¡¨ç©ºé—´é“¾æ¥
```

| åˆ†åŒº | æŒ‚è½½ç‚¹ | **ç”¨é€”** | **æ€§èƒ½è¦æ±‚** |
|------|--------|----------|-------------|
| **æ•°æ®åˆ†åŒº** | `/var/lib/postgresql/data` | `æ•°æ®æ–‡ä»¶` | `éšæœºI/Oæ€§èƒ½` |
| **WALåˆ†åŒº** | `/var/lib/postgresql/wal` | `äº‹åŠ¡æ—¥å¿—` | `é¡ºåºå†™å…¥æ€§èƒ½` |
| **æ—¥å¿—åˆ†åŒº** | `/var/log/postgresql` | `æœåŠ¡å™¨æ—¥å¿—` | `é¡ºåºå†™å…¥` |
| **è¡¨ç©ºé—´** | `/tablespace` | `å¤§è¡¨ç‹¬ç«‹å­˜å‚¨` | `é«˜I/Oåå` |

### 2.4 Oracleæ•°æ®åº“åˆ†åŒºç­–ç•¥



**ğŸ”¸ Oracleä¼ä¸šçº§åˆ†åŒºæ–¹æ¡ˆ**

```
Oracleå­˜å‚¨æ¶æ„ç†è§£ï¼š
æ§åˆ¶æ–‡ä»¶ï¼šæ•°æ®åº“çš„"ç›®å½•"ï¼Œè®°å½•æ‰€æœ‰æ–‡ä»¶ä½ç½®
æ•°æ®æ–‡ä»¶ï¼šå®é™…çš„è¡¨å’Œç´¢å¼•æ•°æ®  
é‡åšæ—¥å¿—ï¼šäº‹åŠ¡æ¢å¤ä¿¡æ¯
å½’æ¡£æ—¥å¿—ï¼šå†å²äº‹åŠ¡è®°å½•
ä¸´æ—¶æ–‡ä»¶ï¼šæ’åºå’Œä¸´æ—¶è¡¨ç©ºé—´
```

| å­˜å‚¨ç±»å‹ | **åˆ†åŒºè®¾è®¡** | **æ€§èƒ½è€ƒè™‘** | **å®¹é‡è§„åˆ’** |
|----------|-------------|-------------|-------------|
| **æ§åˆ¶æ–‡ä»¶** | `å¤šåˆ†åŒºé•œåƒ` | `é«˜å¯ç”¨æ€§` | `å‡ ç™¾MB` |
| **æ•°æ®æ–‡ä»¶** | `/oradata` | `éšæœºI/Oä¼˜åŒ–` | `ä¸šåŠ¡æ•°æ®Ã—3å€` |
| **é‡åšæ—¥å¿—** | `/oraredo` | `æœ€é«˜å†™å…¥æ€§èƒ½` | `æ•°æ®é‡Ã—0.1å€` |
| **å½’æ¡£æ—¥å¿—** | `/oraarch` | `é¡ºåºå†™å…¥` | `æ•°æ®é‡Ã—0.5å€` |
| **ä¸´æ—¶æ–‡ä»¶** | `/oratemp` | `é«˜é€Ÿå­˜å‚¨` | `å†…å­˜Ã—2-4å€` |

### 2.5 æ•°æ®åº“åˆ†åŒºæ€§èƒ½ä¼˜åŒ–



**ğŸš€ I/Oæ€§èƒ½ä¼˜åŒ–ç­–ç•¥**

```
å­˜å‚¨è®¾å¤‡é€‰æ‹©ï¼š
æ•°æ®æ–‡ä»¶ï¼šSSD (éšæœºI/Oæ€§èƒ½)
æ—¥å¿—æ–‡ä»¶ï¼šé«˜è½¬é€Ÿæœºæ¢°ç›˜æˆ–SSD (é¡ºåºå†™å…¥)
å¤‡ä»½æ–‡ä»¶ï¼šå¤§å®¹é‡æœºæ¢°ç›˜ (æˆæœ¬è€ƒè™‘)
ä¸´æ—¶æ–‡ä»¶ï¼šå†…å­˜ç›˜æˆ–é«˜é€ŸSSD

RAIDé…ç½®å»ºè®®ï¼š
æ•°æ®ï¼šRAID 10 (æ€§èƒ½+å®‰å…¨)
æ—¥å¿—ï¼šRAID 1 (å®‰å…¨+é¡ºåºå†™å…¥)  
å¤‡ä»½ï¼šRAID 5/6 (å®¹é‡+æˆæœ¬)
```

**æ•°æ®åº“åˆ†åŒºç›‘æ§è¦ç‚¹ï¼š**

| ç›‘æ§æŒ‡æ ‡ | **å‘Šè­¦é˜ˆå€¼** | **ç›‘æ§é¢‘ç‡** | **å¤„ç†æªæ–½** |
|----------|-------------|-------------|-------------|
| **æ•°æ®åˆ†åŒºä½¿ç”¨ç‡** | `>80%` | `æ¯5åˆ†é’Ÿ` | `æ¸…ç†+æ‰©å®¹` |
| **æ—¥å¿—åˆ†åŒºä½¿ç”¨ç‡** | `>70%` | `æ¯åˆ†é’Ÿ` | `æ—¥å¿—è½®è½¬` |
| **ä¸´æ—¶åˆ†åŒºä½¿ç”¨ç‡** | `>90%` | `å®æ—¶` | `æ€æ­»å¤§æŸ¥è¯¢` |
| **I/Oç­‰å¾…æ—¶é—´** | `>20ms` | `æŒç»­ç›‘æ§` | `ä¼˜åŒ–æŸ¥è¯¢+ç¡¬ä»¶å‡çº§` |

---

## 3. ğŸŒ WebæœåŠ¡å™¨åˆ†åŒºè®¾è®¡



### 3.1 WebæœåŠ¡å™¨åˆ†åŒºéœ€æ±‚åˆ†æ



**WebæœåŠ¡å™¨çš„å­˜å‚¨ç‰¹ç‚¹**
> WebæœåŠ¡å™¨åƒ"é¤å…"ï¼Œéœ€è¦å¿«é€Ÿ"ä¸Šèœ"ï¼ˆå“åº”è¯·æ±‚ï¼‰ã€‚ä¸åŒçš„"é£Ÿæ"ï¼ˆé™æ€æ–‡ä»¶ã€åŠ¨æ€å†…å®¹ã€æ—¥å¿—ï¼‰éœ€è¦åˆ†åˆ«å­˜å‚¨å’Œç®¡ç†ã€‚

```
WebæœåŠ¡å™¨I/Oæ¨¡å¼ï¼š
é™æ€æ–‡ä»¶ï¼šå¤§é‡å°æ–‡ä»¶è¯»å–ï¼Œç¼“å­˜å‹å¥½
åŠ¨æ€å†…å®¹ï¼šCPUå¯†é›†+æ•°æ®åº“äº¤äº’
ç”¨æˆ·ä¸Šä¼ ï¼šæ–‡ä»¶å†™å…¥ï¼Œå¤§å°ä¸å®š
è®¿é—®æ—¥å¿—ï¼šæŒç»­å†™å…¥ï¼Œæ–‡ä»¶è¾ƒå¤§
é”™è¯¯æ—¥å¿—ï¼šå¶å‘å†™å…¥ï¼Œä¾¿äºæ’æŸ¥
```

### 3.2 Nginx WebæœåŠ¡å™¨åˆ†åŒºæ–¹æ¡ˆ



**ğŸ”¸ Nginxä¸“ç”¨åˆ†åŒºå¸ƒå±€**

```
Nginxç›®å½•ç»“æ„ç†è§£ï¼š
/etc/nginx/         # é…ç½®æ–‡ä»¶
/var/log/nginx/     # è®¿é—®æ—¥å¿—ã€é”™è¯¯æ—¥å¿—
/var/cache/nginx/   # åå‘ä»£ç†ç¼“å­˜  
/var/www/           # ç½‘ç«™æ–‡ä»¶
/usr/share/nginx/   # é»˜è®¤é¡µé¢
```

| åˆ†åŒº | æŒ‚è½½ç‚¹ | **å»ºè®®å¤§å°** | **ç”¨é€”** | **ä¼˜åŒ–é‡ç‚¹** |
|------|--------|-------------|----------|-------------|
| **ç³»ç»Ÿåˆ†åŒº** | `/` | `30GB` | `ç³»ç»Ÿ+Nginxç¨‹åº` | `ç¨³å®šæ€§` |
| **ç½‘ç«™åˆ†åŒº** | `/var/www` | `æŒ‰éœ€åˆ†é…` | `ç½‘ç«™é™æ€æ–‡ä»¶` | `è¯»å–æ€§èƒ½` |
| **ç¼“å­˜åˆ†åŒº** | `/var/cache/nginx` | `å†…å­˜Ã—2-4å€` | `åå‘ä»£ç†ç¼“å­˜` | `è¯»å†™æ€§èƒ½` |
| **æ—¥å¿—åˆ†åŒº** | `/var/log/nginx` | `100-500GB` | `è®¿é—®å’Œé”™è¯¯æ—¥å¿—` | `å†™å…¥æ€§èƒ½` |
| **ä¸Šä¼ åˆ†åŒº** | `/var/uploads` | `æŒ‰éœ€åˆ†é…` | `ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶` | `ç©ºé—´ç®¡ç†` |
| **å¤‡ä»½åˆ†åŒº** | `/backup` | `ç½‘ç«™æ–‡ä»¶Ã—2å€` | `ç½‘ç«™å¤‡ä»½` | `å®¹é‡ä¼˜å…ˆ` |

**é«˜å¹¶å‘WebæœåŠ¡å™¨ä¼˜åŒ–é…ç½®ï¼š**
```nginx
# nginx.confå…³é”®é…ç½®

http {
#    # æ—¥å¿—æ ¼å¼ä¼˜åŒ–
    log_format main '$remote_addr - $remote_user [$time_local] '
                   '"$request" $status $body_bytes_sent';
    
#    # è®¿é—®æ—¥å¿—å†™å…¥ç‹¬ç«‹åˆ†åŒº
    access_log /var/log/nginx/access.log main buffer=64k flush=1m;
    
#    # é”™è¯¯æ—¥å¿—
    error_log /var/log/nginx/error.log warn;
    
#    # ä»£ç†ç¼“å­˜è®¾ç½® (ç‹¬ç«‹é«˜é€Ÿåˆ†åŒº)
    proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=cache:100m
                     max_size=10g inactive=60m use_temp_path=off;
    
#    # ä¸Šä¼ æ–‡ä»¶ä¸´æ—¶ç›®å½•
    client_body_temp_path /tmp/nginx/client_temp;
    
#    # é™æ€æ–‡ä»¶ä¼˜åŒ–
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        root /var/www;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### 3.3 Apache WebæœåŠ¡å™¨åˆ†åŒºæ–¹æ¡ˆ



**ğŸ”¸ Apacheåˆ†åŒºå¸ƒå±€**

| åŠŸèƒ½æ¨¡å— | **åˆ†åŒºè·¯å¾„** | **ç©ºé—´è§„åˆ’** | **æ€§èƒ½è€ƒè™‘** |
|----------|-------------|-------------|-------------|
| **é…ç½®æ–‡ä»¶** | `/etc/httpd` | `å‡ MB` | `å¿«é€Ÿè¯»å–` |
| **ç½‘ç«™æ ¹ç›®å½•** | `/var/www/html` | `æŒ‰ç«™ç‚¹è§„æ¨¡` | `é™æ€æ–‡ä»¶ç¼“å­˜` |
| **è™šæ‹Ÿä¸»æœº** | `/var/www/vhosts` | `å¤šç«™ç‚¹æ€»å’Œ` | `ç‹¬ç«‹åŸŸåç®¡ç†` |
| **è®¿é—®æ—¥å¿—** | `/var/log/httpd` | `æ—¥è®¿é—®é‡Ã—365å¤©` | `è½®è½¬å’Œå‹ç¼©` |
| **æ¨¡å—ç¼“å­˜** | `/var/cache/httpd` | `å†…å­˜Ã—1-2å€` | `é«˜é€Ÿå­˜å‚¨` |

### 3.4 åº”ç”¨æœåŠ¡å™¨åˆ†åŒºç­–ç•¥



**ğŸ”¸ Javaåº”ç”¨æœåŠ¡å™¨ (Tomcat)**
```
Tomcatç‰¹æ®Šéœ€æ±‚ï¼š
JVMå †å†…å­˜ï¼šéœ€è¦å¤§å†…å­˜æ”¯æŒ
ä¸´æ—¶æ–‡ä»¶ï¼šJSPç¼–è¯‘äº§ç”Ÿå¤§é‡ä¸´æ—¶æ–‡ä»¶
åº”ç”¨éƒ¨ç½²ï¼šWARåŒ…è§£å‹éœ€è¦ç©ºé—´
æ—¥å¿—æ–‡ä»¶ï¼šåº”ç”¨æ—¥å¿—+å®¹å™¨æ—¥å¿—
```

| åˆ†åŒºç”¨é€” | **æŒ‚è½½ç‚¹** | **ç©ºé—´è®¡ç®—** |
|----------|-----------|-------------|
| **åº”ç”¨éƒ¨ç½²** | `/opt/tomcat/webapps` | `WARåŒ…å¤§å°Ã—3å€` |
| **ä¸´æ—¶æ–‡ä»¶** | `/opt/tomcat/temp` | `å†…å­˜å¤§å°Ã—1å€` |
| **å·¥ä½œç›®å½•** | `/opt/tomcat/work` | `åº”ç”¨å¤§å°Ã—2å€` |
| **åº”ç”¨æ—¥å¿—** | `/opt/tomcat/logs` | `æŒ‰æ—¥å¿—é‡è§„åˆ’` |

**ğŸ”¸ Node.jsåº”ç”¨æœåŠ¡å™¨**
```
Node.jså­˜å‚¨ç‰¹ç‚¹ï¼š
æ¨¡å—ä¾èµ–ï¼šnode_modulesç›®å½•è¾ƒå¤§
é™æ€èµ„æºï¼šå‰ç«¯æ„å»ºäº§ç”Ÿçš„æ–‡ä»¶
ç”¨æˆ·ä¸Šä¼ ï¼šæ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†
è¿›ç¨‹æ—¥å¿—ï¼šPM2ç­‰è¿›ç¨‹ç®¡ç†å·¥å…·æ—¥å¿—
```

### 3.5 CDNè¾¹ç¼˜èŠ‚ç‚¹åˆ†åŒºè®¾è®¡



**è¾¹ç¼˜èŠ‚ç‚¹çš„ç‰¹æ®Šè€ƒè™‘ï¼š**
```
ç¼“å­˜ç­–ç•¥ï¼šçƒ­ç‚¹å†…å®¹æœ¬åœ°å­˜å‚¨
å­˜å‚¨å±‚æ¬¡ï¼šçƒ­æ•°æ®SSDï¼Œå†·æ•°æ®æœºæ¢°ç›˜
ç½‘ç»œå¸¦å®½ï¼šä¸Šä¸‹è¡Œå¸¦å®½è¦æ±‚é«˜
æ•…éšœæ¢å¤ï¼šå¿«é€Ÿæ•…éšœåˆ‡æ¢èƒ½åŠ›
```

| ç¼“å­˜å±‚çº§ | **å­˜å‚¨ä»‹è´¨** | **å®¹é‡è§„åˆ’** | **ç”¨é€”** |
|----------|-------------|-------------|----------|
| **çƒ­ç¼“å­˜** | `é«˜é€ŸSSD` | `å¸¦å®½Ã—å°æ—¶æ•°` | `æœ€çƒ­é—¨å†…å®¹` |
| **æ¸©ç¼“å­˜** | `æ™®é€šSSD` | `æ—¥è®¿é—®é‡` | `å¸¸ç”¨å†…å®¹` |
| **å†·å­˜å‚¨** | `æœºæ¢°ç¡¬ç›˜` | `å…¨é‡å†…å®¹` | `é•¿å°¾å†…å®¹` |

---

## 4. ğŸ“Š æ—¥å¿—æœåŠ¡å™¨åˆ†åŒºè§„åˆ’



### 4.1 æ—¥å¿—æœåŠ¡å™¨å­˜å‚¨ç‰¹ç‚¹



**æ—¥å¿—æ•°æ®çš„ç‰¹æ®Šæ€§**
> æ—¥å¿—ç³»ç»Ÿåƒ"ç›‘æ§å½•åƒ"ï¼Œéœ€è¦æŒç»­è®°å½•ã€å¿«é€Ÿå†™å…¥ã€é•¿æœŸå­˜å‚¨ã€‚ä¸åŒç±»å‹çš„æ—¥å¿—æœ‰ä¸åŒçš„é‡è¦æ€§å’Œä¿å­˜æœŸé™ã€‚

```
æ—¥å¿—æ•°æ®ç‰¹å¾ï¼š
å†™å…¥å¯†é›†ï¼šæ¯ç§’æˆåƒä¸Šä¸‡æ¡æ—¥å¿—è®°å½•
å¤§æ–‡ä»¶ï¼šå•ä¸ªæ—¥å¿—æ–‡ä»¶å¯èƒ½å‡ GBåˆ°å‡ TB
æ—¶åºæ€§ï¼šæŒ‰æ—¶é—´é¡ºåºæŒç»­å¢é•¿
æŸ¥è¯¢æ¨¡å¼ï¼šé€šå¸¸æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢
ä¿ç•™ç­–ç•¥ï¼šä¸åŒæ—¥å¿—æœ‰ä¸åŒä¿ç•™æœŸé™
```

### 4.2 ELKæ—¥å¿—åˆ†æå¹³å°åˆ†åŒº



**ğŸ”¸ Elasticsearchæ•°æ®èŠ‚ç‚¹åˆ†åŒº**

```
Elasticsearchå­˜å‚¨æ¶æ„ï¼š
ç´¢å¼•æ•°æ®ï¼šå®é™…çš„æ—¥å¿—å†…å®¹ï¼Œå‹ç¼©å­˜å‚¨
ç´¢å¼•å…ƒæ•°æ®ï¼šç´¢å¼•ç»“æ„å’Œæ˜ å°„ä¿¡æ¯
èŠ‚ç‚¹çŠ¶æ€ï¼šé›†ç¾¤åè°ƒå’ŒçŠ¶æ€ä¿¡æ¯
ä¸´æ—¶æ–‡ä»¶ï¼šæœç´¢å’Œèšåˆä¸´æ—¶æ•°æ®
```

| æ•°æ®ç±»å‹ | **åˆ†åŒºè®¾è®¡** | **å­˜å‚¨éœ€æ±‚** | **æ€§èƒ½ç‰¹ç‚¹** |
|----------|-------------|-------------|-------------|
| **çƒ­æ•°æ®ç´¢å¼•** | `/data/elasticsearch/hot` | `SSDï¼Œé«˜IOPS` | `é¢‘ç¹è¯»å†™` |
| **æ¸©æ•°æ®ç´¢å¼•** | `/data/elasticsearch/warm` | `SSDæˆ–æ··åˆå­˜å‚¨` | `ä¸»è¦è¯»å–` |
| **å†·æ•°æ®ç´¢å¼•** | `/data/elasticsearch/cold` | `å¤§å®¹é‡æœºæ¢°ç›˜` | `å¶å°”è®¿é—®` |
| **ç´¢å¼•å¿«ç…§** | `/backup/elasticsearch` | `ç½‘ç»œå­˜å‚¨` | `å¤‡ä»½æ¢å¤` |

**Elasticsearchåˆ†åŒºé…ç½®ç¤ºä¾‹ï¼š**
```yaml
# elasticsearch.ymlé…ç½®

path.data: 
  - /data/elasticsearch/hot
  - /data/elasticsearch/warm
  - /data/elasticsearch/cold

path.logs: /var/log/elasticsearch
path.repo: ["/backup/elasticsearch"]

# ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç®¡ç†

cluster.routing.allocation.disk.threshold_enabled: true
cluster.routing.allocation.disk.watermark.low: 85%
cluster.routing.allocation.disk.watermark.high: 90%
cluster.routing.allocation.disk.watermark.flood_stage: 95%
```

### 4.3 Logstashå¤„ç†èŠ‚ç‚¹åˆ†åŒº



**ğŸ”¸ Logstashæ•°æ®å¤„ç†åˆ†åŒº**

| å¤„ç†é˜¶æ®µ | **åˆ†åŒºç”¨é€”** | **ç©ºé—´éœ€æ±‚** | **I/Oç‰¹å¾** |
|----------|-------------|-------------|------------|
| **è¾“å…¥ç¼“å­˜** | `/data/logstash/queue` | `å†…å­˜Ã—2-4å€` | `é«˜é¢‘è¯»å†™` |
| **å¤„ç†ä¸´æ—¶** | `/tmp/logstash` | `å¤„ç†é‡Ã—1å°æ—¶` | `ä¸´æ—¶å­˜å‚¨` |
| **è¾“å‡ºç¼“å­˜** | `/data/logstash/output` | `è¾“å‡ºé‡Ã—bufferæ—¶é—´` | `æ‰¹é‡å†™å…¥` |
| **é…ç½®æ–‡ä»¶** | `/etc/logstash/conf.d` | `å‡ MB` | `å¶å°”è¯»å–` |

### 4.4 ç³»ç»Ÿæ—¥å¿—åˆ†åŒºç­–ç•¥



**ğŸ”¸ ä¼ ç»Ÿsyslogåˆ†åŒºæ–¹æ¡ˆ**

```
/var/logç›®å½•ç»“æ„ï¼š
/var/log/
â”œâ”€â”€ messages        # ç³»ç»Ÿä¸»æ—¥å¿—
â”œâ”€â”€ secure          # å®‰å…¨ç›¸å…³æ—¥å¿—  
â”œâ”€â”€ audit/          # å®¡è®¡æ—¥å¿—
â”œâ”€â”€ cron            # å®šæ—¶ä»»åŠ¡æ—¥å¿—
â”œâ”€â”€ maillog         # é‚®ä»¶æœåŠ¡æ—¥å¿—
â”œâ”€â”€ httpd/          # WebæœåŠ¡å™¨æ—¥å¿—
â””â”€â”€ application/    # åº”ç”¨ç¨‹åºæ—¥å¿—
```

| æ—¥å¿—ç±»å‹ | **ä¿ç•™æœŸé™** | **ç©ºé—´ä¼°ç®—** | **è½®è½¬ç­–ç•¥** |
|----------|-------------|-------------|-------------|
| **ç³»ç»Ÿæ—¥å¿—** | `30-90å¤©` | `æ—¥å¿—é‡Ã—ä¿ç•™å¤©æ•°` | `daily` |
| **å®‰å…¨æ—¥å¿—** | `1å¹´` | `å®‰å…¨äº‹ä»¶Ã—365å¤©` | `weekly` |
| **å®¡è®¡æ—¥å¿—** | `3-7å¹´` | `æŒ‰åˆè§„è¦æ±‚` | `monthly` |
| **åº”ç”¨æ—¥å¿—** | `7-30å¤©` | `åº”ç”¨è§„æ¨¡å†³å®š` | `daily` |

### 4.5 å¤§è§„æ¨¡æ—¥å¿—å­˜å‚¨ä¼˜åŒ–



**ğŸš€ æ—¥å¿—å­˜å‚¨åˆ†å±‚ç­–ç•¥**

```
åˆ†å±‚å­˜å‚¨æ¶æ„ï¼š
ç¬¬1å±‚ - å®æ—¶å±‚ (0-7å¤©)ï¼š
å­˜å‚¨ï¼šé«˜æ€§èƒ½SSD
ç”¨é€”ï¼šå®æ—¶å‘Šè­¦ã€å¿«é€ŸæŸ¥è¯¢
å®¹é‡ï¼š7å¤©æ—¥å¿—é‡

ç¬¬2å±‚ - è¿‘çº¿å±‚ (8-90å¤©)ï¼š
å­˜å‚¨ï¼šæ™®é€šSSDæˆ–æ··åˆ
ç”¨é€”ï¼šé—®é¢˜æ’æŸ¥ã€è¶‹åŠ¿åˆ†æ  
å®¹é‡ï¼š83å¤©æ—¥å¿—é‡

ç¬¬3å±‚ - å½’æ¡£å±‚ (90å¤©+)ï¼š
å­˜å‚¨ï¼šå¤§å®¹é‡æœºæ¢°ç›˜
ç”¨é€”ï¼šåˆè§„å­˜å‚¨ã€å†å²åˆ†æ
å®¹é‡ï¼šæŒ‰ä¿ç•™æœŸé™è®¡ç®—
```

**æ—¥å¿—å‹ç¼©å’Œæ¸…ç†ç­–ç•¥ï¼š**
```bash
# æ—¥å¿—è½®è½¬é…ç½® /etc/logrotate.d/application

/var/log/application/*.log {
    daily                    # æ¯æ—¥è½®è½¬
    missingok               # æ–‡ä»¶ä¸å­˜åœ¨ä¸æŠ¥é”™
    rotate 30               # ä¿ç•™30ä¸ªæ–‡ä»¶
    compress                # å‹ç¼©æ—§æ–‡ä»¶
    delaycompress           # å»¶è¿Ÿå‹ç¼©
    notifempty             # ç©ºæ–‡ä»¶ä¸è½®è½¬
    copytruncate           # å¤åˆ¶åæˆªæ–­
}

# è‡ªåŠ¨æ¸…ç†è„šæœ¬

#!/bin/bash

# æ¸…ç†3ä¸ªæœˆå‰çš„æ—¥å¿—æ–‡ä»¶

find /var/log -name "*.log.gz" -mtime +90 -delete
find /var/log -name "*.log.*" -mtime +90 -delete
```

---

## 5. ğŸ”§ é«˜å¯ç”¨ç¯å¢ƒåˆ†åŒºè€ƒè™‘



### 5.1 é«˜å¯ç”¨æ¶æ„åˆ†åŒºåŸåˆ™



**é«˜å¯ç”¨ç¯å¢ƒçš„å­˜å‚¨æŒ‘æˆ˜**
> é«˜å¯ç”¨å°±åƒ"å¤šæ¡é“è·¯é€šå‘åŒä¸€ç›®çš„åœ°"ï¼Œå½“ä¸€æ¡è·¯å‡ºé—®é¢˜æ—¶ï¼Œå…¶ä»–è·¯ä¾ç„¶ç•…é€šã€‚å­˜å‚¨ä¹Ÿéœ€è¦å¤šé‡ä¿éšœï¼Œç¡®ä¿æœåŠ¡æ°¸ä¸ä¸­æ–­ã€‚

```
é«˜å¯ç”¨å­˜å‚¨è¦æ±‚ï¼š
å†—ä½™æ€§ï¼šå¤šå‰¯æœ¬ã€å¤šä½ç½®å­˜å‚¨
ä¸€è‡´æ€§ï¼šæ•°æ®åŒæ­¥å’Œä¸€è‡´æ€§ä¿è¯  
æ•…éšœåˆ‡æ¢ï¼šå¿«é€Ÿæ£€æµ‹å’Œè‡ªåŠ¨åˆ‡æ¢
æ•°æ®æ¢å¤ï¼šå¿«é€Ÿæ¢å¤å’Œæœ€å°æ•°æ®ä¸¢å¤±
æ€§èƒ½ä¿è¯ï¼šæ•…éšœæ—¶æ€§èƒ½ä¸èƒ½å¤§å¹…ä¸‹é™
```

### 5.2 å…±äº«å­˜å‚¨åˆ†åŒºè®¾è®¡



**ğŸ”¸ SANå­˜å‚¨åˆ†åŒºæ–¹æ¡ˆ**

| å­˜å‚¨ç±»å‹ | **RAIDçº§åˆ«** | **ç”¨é€”** | **æ€§èƒ½ç‰¹ç‚¹** |
|----------|-------------|----------|-------------|
| **ç³»ç»Ÿç›˜** | `RAID 1` | `æ“ä½œç³»ç»Ÿ` | `é«˜å¯ç”¨+å¯åŠ¨` |
| **æ•°æ®ç›˜** | `RAID 10` | `å…³é”®ä¸šåŠ¡æ•°æ®` | `é«˜æ€§èƒ½+é«˜å¯ç”¨` |
| **æ—¥å¿—ç›˜** | `RAID 5` | `æ—¥å¿—æ–‡ä»¶` | `å®¹é‡+å†™å…¥æ€§èƒ½` |
| **å¤‡ä»½ç›˜** | `RAID 6` | `å¤‡ä»½å­˜å‚¨` | `å¤§å®¹é‡+å®¹é”™` |

**å­˜å‚¨ç½‘ç»œè§„åˆ’ï¼š**
```
åŒè·¯å¾„è®¾è®¡ï¼š
Primary Path: ä¸»å­˜å‚¨æ§åˆ¶å™¨A â†’ å…‰çº¤äº¤æ¢æœºA â†’ æœåŠ¡å™¨HBA A
Backup Path:  å¤‡å­˜å‚¨æ§åˆ¶å™¨B â†’ å…‰çº¤äº¤æ¢æœºB â†’ æœåŠ¡å™¨HBA B

å¤šè·¯å¾„è½¯ä»¶ï¼š
device-mapper-multipath (Linux)
PowerPath (EMC)
MPIO (Windows)
```

### 5.3 åˆ†å¸ƒå¼å­˜å‚¨åˆ†åŒºç­–ç•¥



**ğŸ”¸ Cephåˆ†å¸ƒå¼å­˜å‚¨**

```
Cephå­˜å‚¨æ± è®¾è®¡ï¼š
RBD Poolï¼šå—å­˜å‚¨ï¼Œè™šæ‹Ÿæœºç£ç›˜
CephFS Poolï¼šæ–‡ä»¶å­˜å‚¨ï¼Œå…±äº«æ–‡ä»¶ç³»ç»Ÿ  
RadosGW Poolï¼šå¯¹è±¡å­˜å‚¨ï¼ŒS3å…¼å®¹æ¥å£
```

| å­˜å‚¨æ±  | **å‰¯æœ¬æ•°** | **PGæ•°è®¡ç®—** | **ç”¨é€”** |
|--------|-----------|-------------|----------|
| **rbd-pool** | `3å‰¯æœ¬` | `(OSDæ•°Ã—100)/å‰¯æœ¬æ•°` | `è™šæ‹Ÿæœºå­˜å‚¨` |
| **cephfs-data** | `3å‰¯æœ¬` | `åŠ¨æ€è®¡ç®—` | `æ–‡ä»¶ç³»ç»Ÿæ•°æ®` |
| **cephfs-metadata** | `3å‰¯æœ¬` | `è¾ƒå°‘ï¼Œæ€§èƒ½ä¼˜å…ˆ` | `æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®` |

### 5.4 æ•°æ®åº“é«˜å¯ç”¨åˆ†åŒº



**ğŸ”¸ MySQLä¸»ä»å¤åˆ¶åˆ†åŒº**

```
ä¸»åº“åˆ†åŒºè®¾è®¡ï¼š
æ•°æ®ä¸€è‡´æ€§ï¼šbinlogç‹¬ç«‹é«˜æ€§èƒ½å­˜å‚¨
æ€§èƒ½ä¼˜åŒ–ï¼šæ•°æ®æ–‡ä»¶ä½¿ç”¨SSD
å¤‡ä»½ç­–ç•¥ï¼šå®šæ—¶å…¨é‡å¤‡ä»½+å®æ—¶å¢é‡

ä»åº“åˆ†åŒºè®¾è®¡ï¼š  
è¯»å–ä¼˜åŒ–ï¼šæ•°æ®æ–‡ä»¶é’ˆå¯¹è¯»å–ä¼˜åŒ–
å»¶è¿Ÿæœ€å°ï¼šrelay logç‹¬ç«‹å­˜å‚¨
æ•…éšœåˆ‡æ¢ï¼šå‡†å¤‡éšæ—¶æå‡ä¸ºä¸»åº“
```

| èŠ‚ç‚¹ç±»å‹ | **å­˜å‚¨ä¼˜åŒ–** | **åˆ†åŒºé‡ç‚¹** | **ç›‘æ§è¦ç‚¹** |
|----------|-------------|-------------|-------------|
| **ä¸»åº“(Master)** | `å†™å…¥æ€§èƒ½` | `binlogåˆ†åŒºç‹¬ç«‹` | `å†™å…¥å»¶è¿Ÿ` |
| **ä»åº“(Slave)** | `è¯»å–æ€§èƒ½` | `æ•°æ®åˆ†åŒºä¼˜åŒ–` | `å¤åˆ¶å»¶è¿Ÿ` |
| **å¤‡ä»½èŠ‚ç‚¹** | `å®¹é‡ä¼˜å…ˆ` | `å¤‡ä»½å­˜å‚¨` | `å¤‡ä»½å®Œæ•´æ€§` |

### 5.5 åº”ç”¨å±‚é«˜å¯ç”¨åˆ†åŒº



**ğŸ”¸ è´Ÿè½½å‡è¡¡å™¨åˆ†åŒº**

```
HAProxy/LVSåˆ†åŒºè€ƒè™‘ï¼š
é…ç½®æ–‡ä»¶ï¼šå¤šèŠ‚ç‚¹åŒæ­¥
æ—¥å¿—æ–‡ä»¶ï¼šè´Ÿè½½å‡è¡¡è®¿é—®æ—¥å¿—
çŠ¶æ€æ£€æŸ¥ï¼šå¥åº·æ£€æŸ¥æ—¥å¿—
ä¼šè¯ä¿æŒï¼šä¼šè¯å­˜å‚¨ (å¦‚éœ€è¦)
```

**ğŸ”¸ åº”ç”¨æœåŠ¡å™¨é›†ç¾¤åˆ†åŒº**

| æœåŠ¡å™¨è§’è‰² | **åˆ†åŒºç­–ç•¥** | **åŒæ­¥éœ€æ±‚** | **æ•…éšœå¤„ç†** |
|-----------|-------------|-------------|-------------|
| **Webå‰ç«¯** | `é™æ€æ–‡ä»¶åŒæ­¥` | `rsyncå®æ—¶åŒæ­¥` | `è‡ªåŠ¨å‰”é™¤æ•…éšœèŠ‚ç‚¹` |
| **åº”ç”¨æœåŠ¡** | `ä»£ç ç‰ˆæœ¬ä¸€è‡´` | `ç»Ÿä¸€éƒ¨ç½²` | `æ»šåŠ¨æ›´æ–°` |
| **ä¼šè¯å­˜å‚¨** | `Redisé›†ç¾¤` | `ä¸»ä»å¤åˆ¶` | `è‡ªåŠ¨æ•…éšœåˆ‡æ¢` |

**é«˜å¯ç”¨åˆ†åŒºç›‘æ§è„šæœ¬ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash

# é«˜å¯ç”¨å­˜å‚¨ç›‘æ§è„šæœ¬


# æ£€æŸ¥å…±äº«å­˜å‚¨æŒ‚è½½çŠ¶æ€

check_storage_mount() {
    if ! mountpoint -q /shared/data; then
        echo "ERROR: Shared storage not mounted"
#        # å°è¯•é‡æ–°æŒ‚è½½æˆ–åˆ‡æ¢åˆ°å¤‡ç”¨å­˜å‚¨
        return 1
    fi
}

# æ£€æŸ¥å­˜å‚¨ç©ºé—´

check_storage_space() {
    usage=$(df /shared/data | awk 'NR==2 {print $5}' | sed 's/%//')
    if [ $usage -gt 90 ]; then
        echo "WARNING: Storage usage $usage%"
#        # è§¦å‘æ¸…ç†æˆ–æ‰©å®¹æ“ä½œ
    fi
}

# æ£€æŸ¥å­˜å‚¨æ€§èƒ½

check_storage_performance() {
#    # æµ‹è¯•å†™å…¥æ€§èƒ½
    dd if=/dev/zero of=/shared/data/test bs=1M count=100 2>&1 | \
    grep -o '[0-9.]* MB/s' | tail -1
}
```

---

## 6. ğŸ“ˆ å®¹é‡å¢é•¿é¢„ä¼°æ–¹æ³•



### 6.1 å®¹é‡è§„åˆ’åŸºç¡€ç†è®º



**ä»€ä¹ˆæ˜¯å®¹é‡å¢é•¿é¢„ä¼°ï¼Ÿ**
> å®¹é‡è§„åˆ’å°±åƒ"é¢„æµ‹äººå£å¢é•¿"ï¼ŒåŸºäºå†å²æ•°æ®å’Œä¸šåŠ¡å‘å±•è¶‹åŠ¿ï¼Œæå‰å‡†å¤‡è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ï¼Œé¿å…ç³»ç»Ÿå› ç©ºé—´ä¸è¶³è€Œå®•æœºã€‚

```
å®¹é‡è§„åˆ’çš„æ ¸å¿ƒè¦ç´ ï¼š
å†å²æ•°æ®ï¼šè¿‡å»çš„å¢é•¿è¶‹åŠ¿
ä¸šåŠ¡é¢„æµ‹ï¼šæœªæ¥çš„ä¸šåŠ¡è§„åˆ’  
æŠ€æœ¯å‘å±•ï¼šç³»ç»Ÿæ¶æ„å˜åŒ–
å­£èŠ‚æ€§ï¼šä¸šåŠ¡é«˜å³°å’Œä½è°·
å®‰å…¨è¾¹é™…ï¼šé¢„ç•™åº”æ€¥ç©ºé—´
```

### 6.2 æ•°æ®å¢é•¿æ¨¡å¼åˆ†æ



**ğŸ”¸ å¸¸è§å¢é•¿æ¨¡å¼è¯†åˆ«**

| å¢é•¿æ¨¡å¼ | **ç‰¹å¾** | **æ•°å­¦æ¨¡å‹** | **é€‚ç”¨åœºæ™¯** |
|----------|----------|-------------|-------------|
| **çº¿æ€§å¢é•¿** | `ç¨³å®šå¢é•¿é€Ÿåº¦` | `y = ax + b` | `æˆç†Ÿä¸šåŠ¡ç³»ç»Ÿ` |
| **æŒ‡æ•°å¢é•¿** | `åŠ é€Ÿå¢é•¿` | `y = ae^(bx)` | `å¿«é€Ÿå‘å±•æœŸ` |
| **å¯¹æ•°å¢é•¿** | `å¢é•¿é€æ¸æ”¾ç¼“` | `y = a*log(x) + b` | `ä¸šåŠ¡é¥±å’ŒæœŸ` |
| **å‘¨æœŸæ€§å¢é•¿** | `å‘¨æœŸæ€§æ³¢åŠ¨` | `y = a*sin(bx) + cx + d` | `å­£èŠ‚æ€§ä¸šåŠ¡` |

**æ•°æ®å¢é•¿è®¡ç®—å®ä¾‹ï¼š**
```
çº¿æ€§å¢é•¿ç¤ºä¾‹ï¼š
æœˆå¢é•¿ï¼š100GB
å½“å‰ä½¿ç”¨ï¼š1TB  
6ä¸ªæœˆé¢„æµ‹ï¼š1TB + 100GBÃ—6 = 1.6TB
å®‰å…¨è¾¹é™…ï¼š1.6TB Ã— 1.3 = 2.1TB (å»ºè®®å®¹é‡)

æŒ‡æ•°å¢é•¿ç¤ºä¾‹ï¼š
æœˆå¢é•¿ç‡ï¼š20%
å½“å‰ä½¿ç”¨ï¼š1TB
6ä¸ªæœˆé¢„æµ‹ï¼š1TB Ã— (1.2)^6 â‰ˆ 3TB
å®‰å…¨è¾¹é™…ï¼š3TB Ã— 1.5 = 4.5TB
```

### 6.3 ä¸åŒç³»ç»Ÿçš„å®¹é‡é¢„ä¼°æ–¹æ³•



**ğŸ”¸ WebæœåŠ¡å™¨å®¹é‡é¢„ä¼°**

```
ç”¨æˆ·é‡é©±åŠ¨æ¨¡å‹ï¼š
æ—¥æ´»ç”¨æˆ· Ã— äººå‡é¡µé¢è®¿é—® Ã— å¹³å‡é¡µé¢å¤§å° = æ—¥ä¼ è¾“é‡
æ—¥ä¼ è¾“é‡ Ã— ç¼“å­˜æ¯”ä¾‹ Ã— ä¿ç•™å¤©æ•° = å­˜å‚¨éœ€æ±‚

å®ä¾‹è®¡ç®—ï¼š
æ—¥æ´»ç”¨æˆ·ï¼š10ä¸‡
äººå‡è®¿é—®ï¼š50é¡µé¢
é¡µé¢å¤§å°ï¼š2MB (å«å›¾ç‰‡ã€CSSã€JS)
ç¼“å­˜30%ï¼Œä¿ç•™7å¤©ï¼š
å­˜å‚¨éœ€æ±‚ = 10ä¸‡ Ã— 50 Ã— 2MB Ã— 30% Ã— 7å¤© = 2.1TB
```

**ğŸ”¸ æ•°æ®åº“å®¹é‡é¢„ä¼°**

| æ•°æ®ç±»å‹ | **è®¡ç®—æ–¹æ³•** | **å¢é•¿å› å­** | **ç¤ºä¾‹** |
|----------|-------------|-------------|----------|
| **ç”¨æˆ·æ•°æ®** | `ç”¨æˆ·æ•° Ã— äººå‡æ•°æ®é‡` | `ç”¨æˆ·å¢é•¿ç‡` | `100ä¸‡ç”¨æˆ· Ã— 10KB = 10GB` |
| **äº¤æ˜“è®°å½•** | `æ—¥äº¤æ˜“é‡ Ã— è®°å½•å¤§å° Ã— å¤©æ•°` | `ä¸šåŠ¡å¢é•¿ç‡` | `1ä¸‡ç¬” Ã— 1KB Ã— 365å¤© = 3.6GB` |
| **æ—¥å¿—æ•°æ®** | `QPS Ã— è®°å½•å¤§å° Ã— æ—¶é—´` | `è®¿é—®é‡å¢é•¿` | `1000QPS Ã— 500B Ã— 86400ç§’ = 43GB/å¤©` |
| **ç´¢å¼•å¼€é”€** | `æ•°æ®é‡ Ã— ç´¢å¼•æ¯”ä¾‹` | `è·Ÿéšæ•°æ®å¢é•¿` | `100GBæ•°æ® Ã— 30% = 30GBç´¢å¼•` |

### 6.4 ç›‘æ§é©±åŠ¨çš„å®¹é‡é¢„æµ‹



**ğŸ”¸ åŸºäºç›‘æ§æ•°æ®çš„é¢„æµ‹æ¨¡å‹**

```bash
# å®¹é‡ç›‘æ§æ•°æ®æ”¶é›†è„šæœ¬

#!/bin/bash

DATE=$(date +%Y%m%d)
LOGFILE="/var/log/capacity-monitor.log"

# æ”¶é›†å„åˆ†åŒºä½¿ç”¨æƒ…å†µ

df -h | grep -E '^/dev/' | while read filesystem size used avail percent mount; do
    echo "$DATE,$mount,$size,$used,$avail,$percent" >> $LOGFILE
done

# åˆ†æå¢é•¿è¶‹åŠ¿ (æœ€è¿‘30å¤©)

analyze_growth() {
    local mount_point=$1
    local days=30
    
#    # æå–æœ€è¿‘30å¤©çš„ä½¿ç”¨é‡æ•°æ®
    tail -n $days $LOGFILE | grep "$mount_point" | \
    awk -F',' '{print $4}' | sed 's/G//' | \
    awk '{sum+=$1; count++} END {
        if(count > 1) {
            growth_rate = (sum[count] - sum[1]) / (count-1)
            print "Daily growth:", growth_rate, "GB"
            print "Monthly growth:", growth_rate * 30, "GB"
        }
    }'
}
```

**è‡ªåŠ¨é¢„è­¦ç³»ç»Ÿé…ç½®ï¼š**
```python
# Pythonå®¹é‡é¢„è­¦è„šæœ¬

import pandas as pd
import numpy as np
from sklearn.linear_model import LinearRegression

def predict_capacity(mount_point, days_ahead=90):
#    # è¯»å–å†å²æ•°æ®
    df = pd.read_csv('/var/log/capacity-monitor.log')
    df = df[df['mount'] == mount_point]
    
#    # æ•°æ®é¢„å¤„ç†
    df['used_gb'] = df['used'].str.replace('G', '').astype(float)
    df['date'] = pd.to_datetime(df['date'], format='%Y%m%d')
    df['days'] = (df['date'] - df['date'].min()).dt.days
    
#    # çº¿æ€§å›å½’é¢„æµ‹
    X = df[['days']]
    y = df['used_gb']
    
    model = LinearRegression()
    model.fit(X, y)
    
#    # é¢„æµ‹æœªæ¥90å¤©ä½¿ç”¨é‡
    future_days = df['days'].max() + days_ahead
    predicted_usage = model.predict([[future_days]])[0]
    
    return predicted_usage

# é¢„è­¦é˜ˆå€¼æ£€æŸ¥

def check_capacity_alert():
    for mount in ['/var', '/home', '/data']:
        predicted = predict_capacity(mount)
        current = get_current_usage(mount)
        
        if predicted > current * 2:  # 90å¤©å†…ç¿»å€
            send_alert(f"High growth rate detected for {mount}")
```

### 6.5 ä¸šåŠ¡é©±åŠ¨çš„å®¹é‡è§„åˆ’



**ğŸ”¸ ä¸šåŠ¡åœºæ™¯å®¹é‡è®¡ç®—**

```
ç”µå•†ç³»ç»Ÿå®¹é‡è§„åˆ’ï¼š
å•†å“æ•°æ®ï¼š100ä¸‡å•†å“ Ã— å¹³å‡10å›¾ç‰‡ Ã— 500KB = 5TB
ç”¨æˆ·æ•°æ®ï¼š1000ä¸‡ç”¨æˆ· Ã— å¹³å‡1MB = 10TB  
è®¢å•æ•°æ®ï¼šå¹´100ä¸‡è®¢å• Ã— å¹³å‡5KB Ã— 5å¹´ = 25GB
æ—¥å¿—æ•°æ®ï¼š10ä¸‡QPS Ã— 1KB Ã— 365å¤© = 365GB/å¹´
æ€»è®¡ï¼š15TB + å¢é•¿é¢„ç•™50% = 22.5TB

ç¤¾äº¤åª’ä½“å¹³å°ï¼š
ç”¨æˆ·å‘å¸ƒå†…å®¹ï¼šæ—¥å‡100ä¸‡æ¡ Ã— å¹³å‡2MB = 2TB/å¤©
å›¾ç‰‡è§†é¢‘ï¼šæ—¥å‡10ä¸‡æ¡ Ã— å¹³å‡50MB = 5TB/å¤©  
ç”¨æˆ·æ•°æ®ï¼š1000ä¸‡ç”¨æˆ· Ã— 10MB = 100TB
å¹´å¢é•¿ï¼š(2TB+5TB) Ã— 365å¤© = 2.5PB/å¹´
```

**å®¹é‡è§„åˆ’å†³ç­–çŸ©é˜µï¼š**

| ä¸šåŠ¡ç±»å‹ | **å¢é•¿ç‡** | **ä¿ç•™æœŸ** | **å†—ä½™ç³»æ•°** | **è§„åˆ’å‘¨æœŸ** |
|----------|-----------|-----------|-------------|-------------|
| **æ ¸å¿ƒä¸šåŠ¡æ•°æ®** | `ä¸šåŠ¡å¢é•¿ç‡Ã—1.2` | `æ°¸ä¹…` | `Ã—3` | `3å¹´` |
| **ç”¨æˆ·ç”Ÿæˆå†…å®¹** | `ç”¨æˆ·å¢é•¿ç‡Ã—1.5` | `2-5å¹´` | `Ã—2` | `2å¹´` |
| **ç³»ç»Ÿæ—¥å¿—** | `è®¿é—®é‡å¢é•¿ç‡` | `3-6ä¸ªæœˆ` | `Ã—1.5` | `1å¹´` |
| **å¤‡ä»½æ•°æ®** | `ä¸»æ•°æ®å¢é•¿ç‡Ã—1.1` | `1-3å¹´` | `Ã—2` | `2å¹´` |

---

## 7. ğŸš¨ ç›‘æ§å‘Šè­¦é˜ˆå€¼è®¾ç½®



### 7.1 ç›‘æ§å‘Šè­¦ä½“ç³»è®¾è®¡



**ç›‘æ§å‘Šè­¦çš„é‡è¦æ€§**
> ç›‘æ§å‘Šè­¦å°±åƒ"å¥åº·ä½“æ£€"ï¼Œå®šæœŸæ£€æŸ¥ç³»ç»Ÿ"èº«ä½“çŠ¶å†µ"ï¼Œåœ¨å°é—®é¢˜å˜æˆå¤§æ•…éšœä¹‹å‰åŠæ—¶å‘ç°å’Œå¤„ç†ã€‚

```
å‘Šè­¦çº§åˆ«è®¾è®¡ï¼š
INFOï¼šä¿¡æ¯é€šçŸ¥ï¼Œæ— éœ€ç«‹å³å¤„ç†
WARNINGï¼šè­¦å‘Šï¼Œéœ€è¦å…³æ³¨ä½†ä¸ç´§æ€¥
CRITICALï¼šä¸¥é‡ï¼Œéœ€è¦ç«‹å³å¤„ç†  
EMERGENCYï¼šç´§æ€¥ï¼Œå¯èƒ½å½±å“æœåŠ¡

å‘Šè­¦åŸåˆ™ï¼š
åŠæ—¶æ€§ï¼šå¿«é€Ÿå‘ç°é—®é¢˜
å‡†ç¡®æ€§ï¼šå‡å°‘è¯¯æŠ¥å’Œæ¼æŠ¥
å¯æ“ä½œï¼šå‘Šè­¦ä¿¡æ¯åŒ…å«å¤„ç†å»ºè®®
åˆ†çº§å¤„ç†ï¼šä¸åŒçº§åˆ«ä¸åŒå¤„ç†æ–¹å¼
```

### 7.2 ç£ç›˜ç©ºé—´ç›‘æ§é˜ˆå€¼



**ğŸ”¸ åˆ†åŒºä½¿ç”¨ç‡å‘Šè­¦è®¾ç½®**

| åˆ†åŒºç±»å‹ | **WARNINGé˜ˆå€¼** | **CRITICALé˜ˆå€¼** | **å¤„ç†æªæ–½** | **æ£€æŸ¥é¢‘ç‡** |
|----------|----------------|-----------------|-------------|-------------|
| **æ ¹åˆ†åŒº (/)** | `75%` | `85%` | `æ¸…ç†ä¸´æ—¶æ–‡ä»¶` | `5åˆ†é’Ÿ` |
| **æ•°æ®åˆ†åŒº (/data)** | `80%` | `90%` | `æ•°æ®å½’æ¡£æˆ–æ‰©å®¹` | `5åˆ†é’Ÿ` |
| **æ—¥å¿—åˆ†åŒº (/var/log)** | `70%` | `85%` | `æ—¥å¿—è½®è½¬` | `1åˆ†é’Ÿ` |
| **ä¸´æ—¶åˆ†åŒº (/tmp)** | `80%` | `95%` | `æ¸…ç†ä¸´æ—¶æ–‡ä»¶` | `1åˆ†é’Ÿ` |
| **å¤‡ä»½åˆ†åŒº (/backup)** | `85%` | `95%` | `æ¸…ç†æ—§å¤‡ä»½` | `æ¯å°æ—¶` |

**ç£ç›˜ç©ºé—´ç›‘æ§è„šæœ¬ï¼š**
```bash
#!/bin/bash

# ç£ç›˜ç©ºé—´ç›‘æ§è„šæœ¬


WARN_THRESHOLD=75
CRIT_THRESHOLD=85
EMAIL="admin@company.com"

check_disk_space() {
    df -h | grep -E '^/dev/' | while read filesystem size used avail percent mount; do
        usage=$(echo $percent | sed 's/%//')
        
        if [ $usage -ge $CRIT_THRESHOLD ]; then
            echo "CRITICAL: $mount is $percent full" | \
            mail -s "CRITICAL: Disk Space Alert" $EMAIL
        elif [ $usage -ge $WARN_THRESHOLD ]; then
            echo "WARNING: $mount is $percent full" | \
            mail -s "WARNING: Disk Space Alert" $EMAIL
        fi
    done
}

# æ£€æŸ¥inodesä½¿ç”¨ç‡

check_inodes() {
    df -i | grep -E '^/dev/' | while read filesystem inodes used avail percent mount; do
        usage=$(echo $percent | sed 's/%//')
        
        if [ $usage -ge 85 ]; then
            echo "CRITICAL: $mount inodes $percent used" | \
            mail -s "CRITICAL: Inode Alert" $EMAIL
        fi
    done
}

check_disk_space
check_inodes
```

### 7.3 I/Oæ€§èƒ½ç›‘æ§é˜ˆå€¼



**ğŸ”¸ I/Oæ€§èƒ½æŒ‡æ ‡ç›‘æ§**

```
å…³é”®I/OæŒ‡æ ‡ï¼š
IOPSï¼šæ¯ç§’I/Oæ“ä½œæ•°
å»¶è¿Ÿï¼šI/Oæ“ä½œå“åº”æ—¶é—´
ååé‡ï¼šæ¯ç§’ä¼ è¾“çš„æ•°æ®é‡
é˜Ÿåˆ—æ·±åº¦ï¼šç­‰å¾…å¤„ç†çš„I/Oè¯·æ±‚æ•°
ä½¿ç”¨ç‡ï¼šè®¾å¤‡ç¹å¿™ç¨‹åº¦
```

| ç›‘æ§æŒ‡æ ‡ | **WARNING** | **CRITICAL** | **å½±å“** |
|----------|-------------|-------------|----------|
| **ç£ç›˜ä½¿ç”¨ç‡** | `>80%` | `>95%` | `I/Oå»¶è¿Ÿå¢åŠ ` |
| **å¹³å‡é˜Ÿåˆ—é•¿åº¦** | `>5` | `>10` | `å“åº”æ—¶é—´æ¶åŒ–` |
| **I/Oç­‰å¾…æ—¶é—´** | `>10ms` | `>50ms` | `åº”ç”¨æ€§èƒ½ä¸‹é™` |
| **IOPSä½¿ç”¨ç‡** | `>70%` | `>90%` | `è¾¾åˆ°æ€§èƒ½ç“¶é¢ˆ` |

**I/Oç›‘æ§é…ç½®ç¤ºä¾‹ï¼š**
```bash
# iostatç›‘æ§è„šæœ¬

#!/bin/bash

LOGFILE="/var/log/io-monitor.log"

monitor_io() {
    iostat -x 1 5 | tail -n +4 | while read device rrqm wrqm r_s w_s rkb_s wkb_s avgrq avgqu await r_await w_await svctm util; do
        
#        # è·³è¿‡ç©ºè¡Œå’Œæ ‡é¢˜è¡Œ
        if [[ "$device" =~ ^[a-z] ]]; then
            util_int=${util%.*}  # å»æ‰å°æ•°ç‚¹
            await_int=${await%.*}
            
            if [ $util_int -gt 95 ]; then
                echo "$(date): CRITICAL: $device utilization ${util}%" >> $LOGFILE
#                # å‘é€ç´§æ€¥å‘Šè­¦
            elif [ $util_int -gt 80 ]; then
                echo "$(date): WARNING: $device utilization ${util}%" >> $LOGFILE
            fi
            
            if [ ${await_int:-0} -gt 50 ]; then
                echo "$(date): CRITICAL: $device await ${await}ms" >> $LOGFILE
            fi
        fi
    done
}
```

### 7.4 æ•°æ®åº“åˆ†åŒºç›‘æ§



**ğŸ”¸ MySQLåˆ†åŒºç›‘æ§è¦ç‚¹**

```sql
-- MySQLåˆ†åŒºç©ºé—´ç›‘æ§æŸ¥è¯¢
SELECT 
    table_schema as 'Database',
    table_name as 'Table',
    round(((data_length + index_length) / 1024 / 1024), 2) as 'Size(MB)'
FROM information_schema.tables 
WHERE table_schema NOT IN ('mysql', 'information_schema', 'performance_schema')
ORDER BY (data_length + index_length) DESC;

-- ç›‘æ§è¡¨ç©ºé—´ä½¿ç”¨
SELECT 
    tablespace_name,
    file_name,
    round(bytes/1024/1024,2) as size_mb,
    round((bytes-maxbytes)/1024/1024,2) as used_mb,
    round(maxbytes/1024/1024,2) as max_mb
FROM dba_data_files;
```

| æ•°æ®åº“æŒ‡æ ‡ | **é˜ˆå€¼è®¾ç½®** | **ç›‘æ§SQL** | **å¤„ç†å»ºè®®** |
|-----------|-------------|-------------|-------------|
| **è¡¨ç©ºé—´ä½¿ç”¨ç‡** | `Warning: 80%, Critical: 90%` | `æŸ¥è¯¢data_filesè§†å›¾` | `æ‰©å±•è¡¨ç©ºé—´` |
| **ä¸´æ—¶è¡¨ç©ºé—´** | `Warning: 70%, Critical: 85%` | `æŸ¥è¯¢tempä½¿ç”¨é‡` | `ä¼˜åŒ–æŸ¥è¯¢ï¼Œæ¸…ç†ä¸´æ—¶è¡¨` |
| **æ—¥å¿—æ–‡ä»¶å¢é•¿** | `Warning: 1GB/hour` | `ç›‘æ§logæ–‡ä»¶å¤§å°` | `æ£€æŸ¥æ…¢æŸ¥è¯¢` |
| **é”ç­‰å¾…æ—¶é—´** | `Warning: 30s, Critical: 60s` | `show processlist` | `ä¼˜åŒ–ç´¢å¼•ï¼Œå‡å°‘é”å†²çª` |

### 7.5 æ™ºèƒ½å‘Šè­¦ç­–ç•¥



**ğŸ”¸ åŠ¨æ€é˜ˆå€¼è°ƒæ•´**

```python
# PythonåŠ¨æ€é˜ˆå€¼è®¡ç®—

import numpy as np
from datetime import datetime, timedelta

class DynamicThreshold:
    def __init__(self, metric_name):
        self.metric_name = metric_name
        self.history = []
        
    def update_threshold(self, current_value):
        self.history.append({
            'timestamp': datetime.now(),
            'value': current_value
        })
        
#        # ä¿æŒæœ€è¿‘7å¤©çš„æ•°æ®
        cutoff = datetime.now() - timedelta(days=7)
        self.history = [h for h in self.history if h['timestamp'] > cutoff]
        
#        # è®¡ç®—åŠ¨æ€é˜ˆå€¼
        values = [h['value'] for h in self.history]
        
        if len(values) > 24:  # è‡³å°‘éœ€è¦24å°æ—¶æ•°æ®
            mean = np.mean(values)
            std = np.std(values)
            
#            # åŸºäºç»Ÿè®¡å­¦çš„åŠ¨æ€é˜ˆå€¼
            warning_threshold = mean + 1.5 * std
            critical_threshold = mean + 2.5 * std
            
            return {
                'warning': warning_threshold,
                'critical': critical_threshold,
                'baseline': mean
            }
        
        return None

# ä½¿ç”¨ç¤ºä¾‹

disk_usage_monitor = DynamicThreshold('disk_usage_/var')

def check_with_dynamic_threshold(current_usage):
    thresholds = disk_usage_monitor.update_threshold(current_usage)
    
    if thresholds:
        if current_usage > thresholds['critical']:
            return 'CRITICAL'
        elif current_usage > thresholds['warning']:
            return 'WARNING'
    
    return 'NORMAL'
```

**å‘Šè­¦é™å™ªç­–ç•¥ï¼š**
```
æ—¶é—´çª—å£è¿‡æ»¤ï¼š
åŒä¸€å‘Šè­¦5åˆ†é’Ÿå†…åªå‘é€1æ¬¡

ä¸¥é‡ç¨‹åº¦èšåˆï¼š
å¤šä¸ªWARNINGåˆå¹¶ä¸º1ä¸ªCRITICAL

è¶‹åŠ¿åˆ†æï¼š
çŸ­æœŸæ³¢åŠ¨ vs é•¿æœŸè¶‹åŠ¿

ä¸šåŠ¡æ—¶é—´è€ƒè™‘ï¼š
å·¥ä½œæ—¶é—´ç«‹å³é€šçŸ¥
éå·¥ä½œæ—¶é—´åˆå¹¶é€šçŸ¥

ä¾èµ–å…³ç³»ï¼š
åº•å±‚æ•…éšœå±è”½ä¸Šå±‚å‘Šè­¦
```

---

## 8. ğŸ› ï¸ åˆ†åŒºç»´æŠ¤è®¡åˆ’åˆ¶å®š



### 8.1 åˆ†åŒºç»´æŠ¤åŸºæœ¬ç­–ç•¥



**åˆ†åŒºç»´æŠ¤çš„é‡è¦æ€§**
> åˆ†åŒºç»´æŠ¤å°±åƒ"æˆ¿å±‹ä¿å…»"ï¼Œå®šæœŸæ£€æŸ¥å’Œç»´æŠ¤èƒ½é¢„é˜²å¤§é—®é¢˜ï¼Œå»¶é•¿ç³»ç»Ÿå¯¿å‘½ï¼Œç¡®ä¿é•¿æœŸç¨³å®šè¿è¡Œã€‚

```
ç»´æŠ¤è®¡åˆ’æ ¸å¿ƒåŸåˆ™ï¼š
é¢„é˜²æ€§ï¼šå®šæœŸç»´æŠ¤ï¼Œé¿å…æ•…éšœ
ç³»ç»Ÿæ€§ï¼šå…¨é¢è¦†ç›–å„ä¸ªåˆ†åŒº
æ—¶æ•ˆæ€§ï¼šåœ¨é—®é¢˜å‘ç”Ÿå‰å¤„ç†
æ–‡æ¡£åŒ–ï¼šè®°å½•ç»´æŠ¤è¿‡ç¨‹å’Œç»“æœ
è‡ªåŠ¨åŒ–ï¼šå‡å°‘äººå·¥æ“ä½œé”™è¯¯
```

### 8.2 æ—¥å¸¸ç»´æŠ¤ä»»åŠ¡æ¸…å•



**ğŸ”¸ æ¯æ—¥ç»´æŠ¤ä»»åŠ¡**

| ç»´æŠ¤é¡¹ç›® | **æ£€æŸ¥å†…å®¹** | **æ“ä½œæ–¹æ³•** | **å¼‚å¸¸å¤„ç†** |
|----------|-------------|-------------|-------------|
| **ç£ç›˜ç©ºé—´æ£€æŸ¥** | `å„åˆ†åŒºä½¿ç”¨ç‡` | `df -h å‘½ä»¤æ£€æŸ¥` | `æ¸…ç†æˆ–æ‰©å®¹` |
| **æ—¥å¿—æ–‡ä»¶è½®è½¬** | `æ—¥å¿—å¤§å°å’Œæ•°é‡` | `logrotateæ‰§è¡Œ` | `æ‰‹åŠ¨æ¸…ç†å¤§æ—¥å¿—` |
| **ä¸´æ—¶æ–‡ä»¶æ¸…ç†** | `/tmpç›®å½•å†…å®¹` | `åˆ é™¤7å¤©å‰æ–‡ä»¶` | `æ£€æŸ¥æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶` |
| **å¤‡ä»½çŠ¶æ€æ£€æŸ¥** | `å¤‡ä»½ä»»åŠ¡å®Œæˆæƒ…å†µ` | `æ£€æŸ¥å¤‡ä»½æ—¥å¿—` | `é‡æ–°æ‰§è¡Œå¤±è´¥å¤‡ä»½` |

```bash
# æ¯æ—¥ç»´æŠ¤è„šæœ¬ç¤ºä¾‹

#!/bin/bash

# daily-maintenance.sh


LOGFILE="/var/log/maintenance.log"
DATE=$(date '+%Y-%m-%d %H:%M:%S')

echo "[$DATE] Starting daily maintenance" >> $LOGFILE

# 1. ç£ç›˜ç©ºé—´æ£€æŸ¥

echo "[$DATE] Checking disk space" >> $LOGFILE
df -h | grep -E '^/dev/' | while read line; do
    usage=$(echo $line | awk '{print $5}' | sed 's/%//')
    mount=$(echo $line | awk '{print $6}')
    
    if [ $usage -gt 85 ]; then
        echo "[$DATE] WARNING: $mount usage is $usage%" >> $LOGFILE
#        # è‡ªåŠ¨æ¸…ç†é€»è¾‘
        case $mount in
            /tmp)
                find /tmp -type f -mtime +1 -delete
                ;;
            /var/log)
                logrotate -f /etc/logrotate.conf
                ;;
        esac
    fi
done

# 2. æ£€æŸ¥æ–‡ä»¶ç³»ç»ŸçŠ¶æ€

echo "[$DATE] Checking filesystem status" >> $LOGFILE
mount | grep -E '^/dev/' | while read line; do
    device=$(echo $line | awk '{print $1}')
    mount_point=$(echo $line | awk '{print $3}')
    
#    # æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿåªè¯»çŠ¶æ€
    if touch $mount_point/.write_test 2>/dev/null; then
        rm -f $mount_point/.write_test
    else
        echo "[$DATE] ERROR: $mount_point is read-only" >> $LOGFILE
#        # å‘é€å‘Šè­¦
    fi
done

# 3. æ£€æŸ¥ç£ç›˜é”™è¯¯

echo "[$DATE] Checking disk errors" >> $LOGFILE
dmesg | grep -i "error\|fail" | tail -10 >> $LOGFILE

echo "[$DATE] Daily maintenance completed" >> $LOGFILE
```

### 8.3 å‘¨æœŸæ€§ç»´æŠ¤è®¡åˆ’



**ğŸ”¸ å‘¨ç»´æŠ¤ä»»åŠ¡**

```
æ¯å‘¨ç»´æŠ¤é‡ç‚¹ï¼š
æ·±åº¦æ¸…ç†ï¼šå½»åº•æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜
æ€§èƒ½åˆ†æï¼šåˆ†æI/Oæ€§èƒ½è¶‹åŠ¿  
å®¹é‡åˆ†æï¼šæ£€æŸ¥å®¹é‡å¢é•¿æƒ…å†µ
å¤‡ä»½éªŒè¯ï¼šéªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
å®‰å…¨æ£€æŸ¥ï¼šæ£€æŸ¥å¼‚å¸¸æ–‡ä»¶å’Œæƒé™
```

| ç»´æŠ¤å‘¨æœŸ | **ä¸»è¦ä»»åŠ¡** | **æ‰§è¡Œæ—¶é—´** | **å½±å“è¯„ä¼°** |
|----------|-------------|-------------|-------------|
| **æ¯å‘¨** | `æ·±åº¦æ¸…ç†ã€æ€§èƒ½åˆ†æ` | `å‘¨æ—¥å‡Œæ™¨2:00` | `ä½å½±å“` |
| **æ¯æœˆ** | `æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ã€å®¹é‡è§„åˆ’` | `æ¯æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥` | `ä¸­ç­‰å½±å“` |
| **æ¯å­£åº¦** | `ç¡¬ä»¶æ£€æŸ¥ã€ç³»ç»Ÿä¼˜åŒ–` | `å­£åº¦æœ«å‘¨æœ«` | `é«˜å½±å“ï¼Œéœ€è¦è®¡åˆ’åœæœº` |
| **æ¯å¹´** | `å…¨é¢è¯„ä¼°ã€æ¶æ„ä¼˜åŒ–` | `å¹´åº¦ç»´æŠ¤çª—å£` | `éœ€è¦ä¸šåŠ¡åè°ƒ` |

**å‘¨ç»´æŠ¤è„šæœ¬ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash

# weekly-maintenance.sh


# 1. æ·±åº¦æ¸…ç†ä¸´æ—¶æ–‡ä»¶

cleanup_temp_files() {
    echo "Cleaning temporary files..."
    
#    # æ¸…ç†å„ç§ä¸´æ—¶ç›®å½•
    find /tmp -type f -mtime +7 -delete
    find /var/tmp -type f -mtime +30 -delete  
    find /var/cache -type f -mtime +14 -delete
    
#    # æ¸…ç†æ—¥å¿—æ–‡ä»¶
    find /var/log -name "*.log.gz" -mtime +90 -delete
    find /var/log -name "*.[0-9]" -mtime +30 -delete
}

# 2. åˆ†æç£ç›˜I/Oæ€§èƒ½

analyze_io_performance() {
    echo "Analyzing I/O performance..."
    
#    # æ”¶é›†ä¸€å‘¨çš„I/Oç»Ÿè®¡
    iostat -x 1 300 > /var/log/weekly-iostat.log &
    IOSTAT_PID=$!
    
#    # 5åˆ†é’Ÿååœæ­¢æ”¶é›†
    sleep 300
    kill $IOSTAT_PID
    
#    # åˆ†æç»“æœ
    awk '/avg-cpu/ {getline; print "CPU:", $0}' /var/log/weekly-iostat.log
    awk '/Device:/ {getline; while(NF>0) {print "Device:", $0; getline}}' \
        /var/log/weekly-iostat.log | tail -20
}

# 3. å®¹é‡å¢é•¿åˆ†æ

analyze_capacity_growth() {
    echo "Analyzing capacity growth..."
    
    current_date=$(date +%Y%m%d)
    last_week=$(date -d '7 days ago' +%Y%m%d)
    
#    # å¯¹æ¯”ä¸€å‘¨å‰çš„ä½¿ç”¨é‡
    if [ -f /var/log/capacity-$last_week.log ]; then
        echo "Capacity growth analysis:"
        echo "==========================="
        
#        # è·å–å½“å‰ä½¿ç”¨é‡
        df -h > /var/log/capacity-$current_date.log
        
#        # ç®€å•å¯¹æ¯” (å®é™…åº”ç”¨ä¸­å¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„åˆ†æ)
        echo "Current usage vs last week:"
        diff /var/log/capacity-$last_week.log /var/log/capacity-$current_date.log
    fi
}

# æ‰§è¡Œç»´æŠ¤ä»»åŠ¡

cleanup_temp_files
analyze_io_performance  
analyze_capacity_growth
```

### 8.4 æ–‡ä»¶ç³»ç»Ÿç»´æŠ¤



**ğŸ”¸ æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å’Œä¿®å¤**

```bash
# æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥è„šæœ¬

#!/bin/bash

# filesystem-maintenance.sh


# æ£€æŸ¥ext4æ–‡ä»¶ç³»ç»Ÿ

check_ext4_filesystem() {
    local device=$1
    local mount_point=$2
    
    echo "Checking $device ($mount_point)"
    
#    # æ£€æŸ¥æ–‡ä»¶ç³»ç»ŸçŠ¶æ€
    tune2fs -l $device | grep -E 'Filesystem state|Errors behavior'
    
#    # æ£€æŸ¥æ˜¯å¦éœ€è¦fsck
    last_check=$(tune2fs -l $device | grep 'Last checked' | cut -d: -f2-)
    mount_count=$(tune2fs -l $device | grep 'Mount count' | cut -d: -f2-)
    max_mount=$(tune2fs -l $device | grep 'Maximum mount count' | cut -d: -f2-)
    
    if [ $mount_count -ge $max_mount ] && [ $max_mount -gt 0 ]; then
        echo "WARNING: $device needs filesystem check"
        echo "Mount count: $mount_count, Max: $max_mount"
        
#        # å»ºè®®åœ¨ç»´æŠ¤çª—å£æ‰§è¡Œfsck
        echo "Schedule fsck during maintenance window:"
        echo "umount $mount_point && fsck -f $device && mount $mount_point"
    fi
}

# æ£€æŸ¥XFSæ–‡ä»¶ç³»ç»Ÿ

check_xfs_filesystem() {
    local device=$1
    local mount_point=$2
    
    echo "Checking XFS filesystem $device ($mount_point)"
    
#    # XFSåœ¨çº¿æ£€æŸ¥
    xfs_info $mount_point
    
#    # æ£€æŸ¥XFSæ–‡ä»¶ç³»ç»Ÿä¸€è‡´æ€§
    xfs_db -r -c 'check' $device
}

# è‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ

check_all_filesystems() {
    mount | grep -E '^/dev/' | while read line; do
        device=$(echo $line | awk '{print $1}')
        mount_point=$(echo $line | awk '{print $3}')
        fs_type=$(echo $line | awk '{print $5}')
        
        case $fs_type in
            ext4)
                check_ext4_filesystem $device $mount_point
                ;;
            xfs)
                check_xfs_filesystem $device $mount_point
                ;;
            *)
                echo "Skipping $fs_type filesystem on $device"
                ;;
        esac
    done
}
```

### 8.5 è‡ªåŠ¨åŒ–ç»´æŠ¤ç³»ç»Ÿ



**ğŸ”¸ Cronä»»åŠ¡é…ç½®**

```bash
# /etc/crontab ç»´æŠ¤ä»»åŠ¡é…ç½®


# æ¯æ—¥ç»´æŠ¤ (å‡Œæ™¨2ç‚¹æ‰§è¡Œ)

0 2 * * * root /usr/local/bin/daily-maintenance.sh

# æ¯å‘¨ç»´æŠ¤ (å‘¨æ—¥å‡Œæ™¨3ç‚¹)  

0 3 * * 0 root /usr/local/bin/weekly-maintenance.sh

# æ¯æœˆç»´æŠ¤ (æ¯æœˆ1å·å‡Œæ™¨4ç‚¹)

0 4 1 * * root /usr/local/bin/monthly-maintenance.sh

# ç£ç›˜ç©ºé—´æ£€æŸ¥ (æ¯5åˆ†é’Ÿ)

*/5 * * * * root /usr/local/bin/disk-space-check.sh

# æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ (æ¯å‘¨ä¸‰å‡Œæ™¨1ç‚¹)

0 1 * * 3 root /usr/local/bin/filesystem-check.sh
```

**ç»´æŠ¤æŠ¥å‘Šç”Ÿæˆï¼š**
```bash
#!/bin/bash

# maintenance-report.sh


REPORT_DIR="/var/reports"
DATE=$(date +%Y%m%d)
REPORT_FILE="$REPORT_DIR/maintenance-$DATE.html"

generate_html_report() {
    cat > $REPORT_FILE << 'EOF'
<!DOCTYPE html>
<html>
<head>
    <title>System Maintenance Report - $DATE</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { background-color: #4CAF50; color: white; padding: 10px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .warning { color: orange; font-weight: bold; }
        .critical { color: red; font-weight: bold; }
        .normal { color: green; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ç³»ç»Ÿç»´æŠ¤æŠ¥å‘Š</h1>
        <p>æŠ¥å‘Šæ—¥æœŸ: $(date)</p>
    </div>
EOF

#    # ç£ç›˜ä½¿ç”¨æƒ…å†µæŠ¥å‘Š
    cat >> $REPORT_FILE << 'EOF'
    <div class="section">
        <h2>ç£ç›˜ä½¿ç”¨æƒ…å†µ</h2>
        <table>
            <tr><th>æŒ‚è½½ç‚¹</th><th>æ€»å®¹é‡</th><th>å·²ä½¿ç”¨</th><th>ä½¿ç”¨ç‡</th><th>çŠ¶æ€</th></tr>
EOF

    df -h | grep -E '^/dev/' | while read filesystem size used avail percent mount; do
        usage_num=$(echo $percent | sed 's/%//')
        
        if [ $usage_num -ge 85 ]; then
            status="<span class='critical'>ä¸¥é‡</span>"
        elif [ $usage_num -ge 75 ]; then
            status="<span class='warning'>è­¦å‘Š</span>"
        else
            status="<span class='normal'>æ­£å¸¸</span>"
        fi
        
        echo "<tr><td>$mount</td><td>$size</td><td>$used</td><td>$percent</td><td>$status</td></tr>" >> $REPORT_FILE
    done
    
    echo "</table></div>" >> $REPORT_FILE
}

# å‘é€ç»´æŠ¤æŠ¥å‘Šé‚®ä»¶

send_maintenance_report() {
    if [ -f $REPORT_FILE ]; then
        mail -s "ç³»ç»Ÿç»´æŠ¤æŠ¥å‘Š - $DATE" \
             -a "Content-Type: text/html" \
             admin@company.com < $REPORT_FILE
    fi
}

generate_html_report
send_maintenance_report
```

### 8.6 ç»´æŠ¤æœ€ä½³å®è·µ



**ğŸ¯ ç»´æŠ¤è®¡åˆ’åˆ¶å®šåŸåˆ™**

```
ç»´æŠ¤çª—å£è§„åˆ’ï¼š
ä¸šåŠ¡ä½å³°æœŸï¼šé€‰æ‹©å¯¹ä¸šåŠ¡å½±å“æœ€å°çš„æ—¶é—´
é¢„ç•™æ—¶é—´ï¼šç»´æŠ¤æ—¶é—´ Ã— 2 (è€ƒè™‘æ„å¤–æƒ…å†µ)
å›é€€è®¡åˆ’ï¼šæ¯ä¸ªç»´æŠ¤æ“ä½œéƒ½è¦æœ‰å›é€€æ–¹æ¡ˆ
å½±å“è¯„ä¼°ï¼šæå‰è¯„ä¼°ç»´æŠ¤å¯¹ä¸šåŠ¡çš„å½±å“
é€šçŸ¥æœºåˆ¶ï¼šæå‰é€šçŸ¥ç›¸å…³äººå‘˜ç»´æŠ¤è®¡åˆ’
```

**ç»´æŠ¤æ“ä½œå®‰å…¨æ£€æŸ¥æ¸…å•ï¼š**

| ç»´æŠ¤é˜¶æ®µ | **æ£€æŸ¥é¡¹ç›®** | **ç¡®è®¤æ–¹å¼** | **å¤±è´¥å¤„ç†** |
|----------|-------------|-------------|-------------|
| **ç»´æŠ¤å‰** | `å¤‡ä»½å…³é”®æ•°æ®` | `éªŒè¯å¤‡ä»½å®Œæ•´æ€§` | `æš‚åœç»´æŠ¤` |
| **ç»´æŠ¤å‰** | `é€šçŸ¥ç›¸å…³äººå‘˜` | `ç¡®è®¤é€šçŸ¥å·²é€è¾¾` | `å»¶æœŸç»´æŠ¤` |
| **ç»´æŠ¤ä¸­** | `ç›‘æ§ç³»ç»ŸçŠ¶æ€` | `å®æ—¶ç›‘æ§å·¥å…·` | `ç«‹å³å›é€€` |
| **ç»´æŠ¤å** | `åŠŸèƒ½éªŒè¯æµ‹è¯•` | `è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬` | `æ‰§è¡Œå›é€€è®¡åˆ’` |
| **ç»´æŠ¤å** | `æ€§èƒ½åŸºå‡†å¯¹æ¯”` | `æ€§èƒ½ç›‘æ§å¯¹æ¯”` | `æ€§èƒ½è°ƒä¼˜` |

**ç»´æŠ¤æ–‡æ¡£æ¨¡æ¿ï¼š**
```markdown
# ç»´æŠ¤è®¡åˆ’æ–‡æ¡£


# ç»´æŠ¤åŸºæœ¬ä¿¡æ¯


- ç»´æŠ¤æ—¥æœŸï¼š[æ—¥æœŸæ—¶é—´]
- ç»´æŠ¤äººå‘˜ï¼š[è´£ä»»äºº]
- é¢„è®¡æ—¶é•¿ï¼š[å°æ—¶]
- å½±å“èŒƒå›´ï¼š[å—å½±å“ç³»ç»Ÿ]

# ç»´æŠ¤ç›®æ ‡


- [ ] æ¸…ç†ç£ç›˜ç©ºé—´
- [ ] ä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿ
- [ ] æ›´æ–°ç³»ç»Ÿè¡¥ä¸
- [ ] æ£€æŸ¥ç¡¬ä»¶çŠ¶æ€

# ç»´æŠ¤æ­¥éª¤


1. å¤‡ä»½å…³é”®æ•°æ®
2. åœæ­¢ç›¸å…³æœåŠ¡
3. æ‰§è¡Œç»´æŠ¤æ“ä½œ
4. éªŒè¯åŠŸèƒ½æ­£å¸¸
5. é‡å¯ç›¸å…³æœåŠ¡

# å›é€€è®¡åˆ’


å¦‚æœç»´æŠ¤å¤±è´¥ï¼š
1. åœæ­¢å½“å‰æ“ä½œ
2. æ¢å¤å¤‡ä»½æ•°æ®
3. é‡å¯æœåŠ¡
4. éªŒè¯ç³»ç»Ÿæ¢å¤

# éªŒè¯æµ‹è¯•


- [ ] ç³»ç»Ÿå¯åŠ¨æ­£å¸¸
- [ ] å…³é”®æœåŠ¡è¿è¡Œ
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] åº”ç”¨åŠŸèƒ½æ­£ç¡®

# ç»´æŠ¤è®°å½•


å®é™…æ‰§è¡Œæ—¶é—´ï¼š
é‡åˆ°çš„é—®é¢˜ï¼š
è§£å†³æ–¹æ¡ˆï¼š
åç»­æ”¹è¿›å»ºè®®ï¼š
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ åˆ†åŒºè§„åˆ’ï¼šæ ¹æ®æœåŠ¡å™¨ç”¨é€”åˆ¶å®šåˆé€‚çš„åˆ†åŒºæ–¹æ¡ˆ
ğŸ”¸ å®¹é‡é¢„ä¼°ï¼šåŸºäºä¸šåŠ¡å¢é•¿é¢„æµ‹æœªæ¥å­˜å‚¨éœ€æ±‚
ğŸ”¸ æ–‡ä»¶ç³»ç»Ÿï¼šé€‰æ‹©é€‚åˆåœºæ™¯çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹
ğŸ”¸ ç›‘æ§å‘Šè­¦ï¼šè®¾ç½®åˆç†çš„é˜ˆå€¼å’Œå‘Šè­¦ç­–ç•¥
ğŸ”¸ ç»´æŠ¤è®¡åˆ’ï¼šå»ºç«‹ç³»ç»ŸåŒ–çš„åˆ†åŒºç»´æŠ¤æµç¨‹
ğŸ”¸ é«˜å¯ç”¨æ€§ï¼šè€ƒè™‘æ•…éšœåˆ‡æ¢å’Œæ•°æ®å®‰å…¨
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šæ ¹æ®I/Oç‰¹å¾ä¼˜åŒ–å­˜å‚¨é…ç½®
ğŸ”¸ è‡ªåŠ¨åŒ–ï¼šé€šè¿‡è„šæœ¬å®ç°ç»´æŠ¤æ“ä½œè‡ªåŠ¨åŒ–
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ åˆ†åŒºè®¾è®¡æ€æƒ³**
```
éš”ç¦»åŸåˆ™ï¼š
ä¸åŒåŠŸèƒ½åˆ†å¼€å­˜å‚¨ï¼Œé¿å…ç›¸äº’å½±å“
ç³»ç»Ÿåˆ†åŒº + æ•°æ®åˆ†åŒº + æ—¥å¿—åˆ†åŒº

æ‰©å±•æ€§åŸåˆ™ï¼š
é¢„ç•™å¢é•¿ç©ºé—´ï¼Œä¾¿äºåæœŸæ‰©å®¹
é¢„ç•™20-50%çš„æœªåˆ†é…ç©ºé—´

å®‰å…¨æ€§åŸåˆ™ï¼š
å…³é”®æ•°æ®å¤šé‡ä¿æŠ¤
å¤‡ä»½åˆ†åŒº + å¿«ç…§ + å¼‚åœ°å¤‡ä»½
```

**ğŸ”¹ å®¹é‡è§„åˆ’ç­–ç•¥**
```
æ•°æ®é©±åŠ¨ï¼šåŸºäºå†å²æ•°æ®åˆ†æå¢é•¿è¶‹åŠ¿
ä¸šåŠ¡é©±åŠ¨ï¼šç»“åˆä¸šåŠ¡å‘å±•é¢„æµ‹éœ€æ±‚  
å®‰å…¨è¾¹é™…ï¼šå®é™…éœ€æ±‚ Ã— 1.3-2.0å€
åŠ¨æ€è°ƒæ•´ï¼šå®šæœŸè¯„ä¼°å’Œè°ƒæ•´è§„åˆ’
```

**ğŸ”¹ ç›‘æ§å‘Šè­¦ä½“ç³»**
```
åˆ†çº§å‘Šè­¦ï¼šINFO â†’ WARNING â†’ CRITICAL â†’ EMERGENCY
æ™ºèƒ½é˜ˆå€¼ï¼šåŠ¨æ€è°ƒæ•´ï¼Œå‡å°‘è¯¯æŠ¥
å…¨é¢è¦†ç›–ï¼šç©ºé—´ã€æ€§èƒ½ã€é”™è¯¯ã€è¶‹åŠ¿
è‡ªåŠ¨å¤„ç†ï¼šå‘Šè­¦è§¦å‘è‡ªåŠ¨æ¸…ç†å’Œæ‰©å®¹
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼



**ğŸ¯ ä¸åŒç¯å¢ƒçš„åˆ†åŒºç­–ç•¥**

```
å¼€å‘æµ‹è¯•ç¯å¢ƒï¼š
é‡ç‚¹ï¼šå¿«é€Ÿéƒ¨ç½²ï¼Œæˆæœ¬æ§åˆ¶
åˆ†åŒºï¼šç²¾ç®€æ–¹æ¡ˆï¼Œ/ã€/varã€swap
ç»´æŠ¤ï¼šåŸºç¡€ç›‘æ§ï¼Œæ‰‹åŠ¨ç»´æŠ¤

ç”Ÿäº§ç¯å¢ƒï¼š
é‡ç‚¹ï¼šç¨³å®šå¯é ï¼Œæ€§èƒ½ä¼˜åŒ–
åˆ†åŒºï¼šå®Œæ•´æ–¹æ¡ˆï¼Œç»†åŒ–åˆ†åŒº
ç»´æŠ¤ï¼šå…¨é¢ç›‘æ§ï¼Œè‡ªåŠ¨åŒ–ç»´æŠ¤

é«˜å¹¶å‘ç¯å¢ƒï¼š
é‡ç‚¹ï¼šæ€§èƒ½æœ€ä¼˜ï¼Œå¿«é€Ÿæ‰©å®¹
åˆ†åŒºï¼šI/Oåˆ†ç¦»ï¼ŒSSDä¼˜åŒ–
ç»´æŠ¤ï¼šå®æ—¶ç›‘æ§ï¼Œé¢„æµ‹æ€§ç»´æŠ¤
```

**ğŸ¯ å¸¸è§é—®é¢˜å¤„ç†æŒ‡å—**

| é—®é¢˜ç±»å‹ | **ç°è±¡** | **åŸå› åˆ†æ** | **è§£å†³æ–¹æ¡ˆ** |
|----------|----------|-------------|-------------|
| **ç£ç›˜æ»¡** | `No space left on device` | `æ—¥å¿—å †ç§¯ï¼Œä¸´æ—¶æ–‡ä»¶` | `æ¸…ç†+æ—¥å¿—è½®è½¬` |
| **I/Oæ…¢** | `ç³»ç»Ÿå“åº”æ…¢ï¼Œé«˜load` | `ç£ç›˜ç“¶é¢ˆï¼Œå¹¶å‘é«˜` | `I/Oä¼˜åŒ–+å‡çº§ç¡¬ä»¶` |
| **æ–‡ä»¶ç³»ç»Ÿé”™è¯¯** | `åªè¯»æ–‡ä»¶ç³»ç»Ÿ` | `ç¡¬ä»¶æ•…éšœï¼Œæ–­ç”µ` | `fsckä¿®å¤+ç¡¬ä»¶æ£€æŸ¥` |
| **å®¹é‡ä¸è¶³** | `é¢‘ç¹ç©ºé—´å‘Šè­¦` | `å®¹é‡è§„åˆ’ä¸è¶³` | `æ‰©å®¹+å½’æ¡£ç­–ç•¥` |

### 9.4 æœ€ä½³å®è·µæ€»ç»“



**ğŸš€ åˆ†åŒºè§„åˆ’æœ€ä½³å®è·µ**

```
è§„åˆ’é˜¶æ®µï¼š
1. è¯¦ç»†çš„éœ€æ±‚åˆ†æå’Œå®¹é‡è¯„ä¼°
2. è€ƒè™‘æœªæ¥3-5å¹´çš„ä¸šåŠ¡å‘å±•
3. åˆ¶å®šè¯¦ç»†çš„åˆ†åŒºè®¾è®¡æ–‡æ¡£
4. è¯„å®¡å’Œæµ‹è¯•åˆ†åŒºæ–¹æ¡ˆ

å®æ–½é˜¶æ®µï¼š
1. æŒ‰ç…§è®¾è®¡æ–‡æ¡£ä¸¥æ ¼æ‰§è¡Œ
2. åšå¥½æ¯ä¸€æ­¥çš„éªŒè¯æµ‹è¯•
3. è¯¦ç»†è®°å½•å®æ–½è¿‡ç¨‹å’Œé…ç½®
4. å»ºç«‹ç›‘æ§å’Œå‘Šè­¦ä½“ç³»

è¿ç»´é˜¶æ®µï¼š
1. å®šæœŸè¯„ä¼°å’Œä¼˜åŒ–åˆ†åŒºé…ç½®
2. æŒç»­ç›‘æ§å®¹é‡å’Œæ€§èƒ½è¶‹åŠ¿
3. åŠæ—¶å¤„ç†å‘Šè­¦å’Œå¼‚å¸¸
4. ä¸æ–­æ”¹è¿›ç»´æŠ¤æµç¨‹
```

### 9.5 å‘å±•è¶‹åŠ¿å±•æœ›



```
æŠ€æœ¯å‘å±•è¶‹åŠ¿ï¼š
å­˜å‚¨è™šæ‹ŸåŒ–ï¼šè½¯ä»¶å®šä¹‰å­˜å‚¨
äº‘åŸç”Ÿï¼šå®¹å™¨åŒ–å­˜å‚¨æ–¹æ¡ˆ
AIè¿ç»´ï¼šæ™ºèƒ½å®¹é‡é¢„æµ‹å’Œä¼˜åŒ–
è‡ªåŠ¨åŒ–ï¼šå…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨ç®¡ç†

è¿ç»´æ¨¡å¼å˜åŒ–ï¼š
é¢„é˜²å¼ï¼šä»æ•…éšœå“åº”åˆ°é¢„é˜²ä¸ºä¸»
æ™ºèƒ½åŒ–ï¼šä»äººå·¥åˆ°AIè¾…åŠ©å†³ç­–  
æœåŠ¡åŒ–ï¼šä»åŸºç¡€è®¾æ–½åˆ°æœåŠ¡äº¤ä»˜
æ ‡å‡†åŒ–ï¼šä»ç»éªŒåˆ°æ ‡å‡†åŒ–æµç¨‹
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹ï¼š**
- åˆ†åŒºè§„åˆ’è¦è€ƒè™‘ä¸šåŠ¡ç‰¹ç‚¹å’Œå¢é•¿è¶‹åŠ¿
- ç›‘æ§å‘Šè­¦æ˜¯åˆ†åŒºç®¡ç†çš„é‡è¦ä¿éšœ
- å®¹é‡é¢„ä¼°éœ€è¦ç»“åˆå†å²æ•°æ®å’Œä¸šåŠ¡é¢„æµ‹
- ç»´æŠ¤è®¡åˆ’è¦ç³»ç»ŸåŒ–ã€è‡ªåŠ¨åŒ–ã€æ–‡æ¡£åŒ–
- é«˜å¯ç”¨ç¯å¢ƒéœ€è¦ç‰¹æ®Šçš„åˆ†åŒºè®¾è®¡è€ƒè™‘
- ä¸åŒæœåŠ¡å™¨ç±»å‹æœ‰ä¸åŒçš„æœ€ä¼˜åˆ†åŒºæ–¹æ¡ˆ