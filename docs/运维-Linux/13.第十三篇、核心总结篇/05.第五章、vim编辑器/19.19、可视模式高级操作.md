---
title: 19、可视模式高级操作
---
## 📚 目录

1. [可视模式概述](#1-可视模式概述)
2. [选择文本后的基本操作](#2-选择文本后的基本操作)
3. [缩进操作详解](#3-缩进操作详解)
4. [选择区域搜索替换](#4-选择区域搜索替换)
5. [选择文本排序](#5-选择文本排序)
6. [选择文本统计信息](#6-选择文本统计信息)
7. [选择文本大小写转换](#7-选择文本大小写转换)
8. [选择区域注释切换](#8-选择区域注释切换)
9. [选择模式与命令组合](#9-选择模式与命令组合)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 🎯 可视模式概述


### 1.1 什么是可视模式


**可视模式**就是 Vim 中用来**选择文本**的模式，类似于你在 Word 中用鼠标拖拽选中文本一样。选中文本后，你可以对这些文本进行各种操作，比如删除、复制、替换等。

```
普通文本编辑器：鼠标拖拽选择 → 右键操作菜单
Vim 可视模式：   键盘选择文本 → 直接按键操作
```

### 1.2 三种可视模式类型


| 模式类型 | 进入方式 | **选择特点** | **适用场景** |
|---------|---------|-------------|-------------|
| 🔸 **字符可视模式** | `v` | `逐个字符选择，精确控制` | `选择单词、短语` |
| 🔸 **行可视模式** | `V` | `整行选择，以行为单位` | `删除多行、移动代码块` |
| 🔸 **块可视模式** | `Ctrl+v` | `矩形块选择，按列选择` | `批量编辑、表格操作` |

### 1.3 可视模式的工作原理


```
文本编辑流程：
普通模式 → 可视模式(选择文本) → 执行操作 → 返回普通模式

操作步骤：
1. 在普通模式下按 v/V/Ctrl+v 进入可视模式
2. 移动光标扩展选择范围
3. 按操作键(d/y/c等)对选中文本执行操作
4. 自动返回普通模式
```

---

## 2. ✂️ 选择文本后的基本操作


### 2.1 删除操作 (d)


**含义**：`d` 就是 **delete（删除）** 的意思，选中文本后按 `d` 就能把选中的内容删除掉。

```bash
# 示例文本
Hello World
This is a test
End of file

# 操作步骤
1. 将光标移到"Hello"的开头
2. 按 v 进入字符可视模式
3. 按 → → → → → 选中"Hello "
4. 按 d 删除选中文本

# 结果
World
This is a test  
End of file
```

> 💡 **实用技巧**  
> 选中文本被删除后，内容会**自动保存到剪贴板**，可以用 `p` 粘贴回来

### 2.2 复制操作 (y)


**含义**：`y` 是 **yank（拉取、复制）** 的意思，就是把选中的文本复制到剪贴板里。

```bash
# 复制整行操作
1. 按 V 进入行可视模式（选中整行）
2. 按 j j 向下选中3行
3. 按 y 复制选中的行
4. 移动到目标位置
5. 按 p 粘贴复制的内容
```

**字符模式 vs 行模式复制区别**：
- **字符模式** (`v` + `y`)：复制的文本会**插入到光标位置**
- **行模式** (`V` + `y`)：复制的整行会**插入到光标所在行的下方**

### 2.3 剪切操作 (c)


**含义**：`c` 是 **change（改变）** 的意思，它会删除选中文本，同时进入插入模式让你输入新内容。

```bash
# 替换单词示例
原文本：The cat is sleeping
目标：  The dog is sleeping

操作步骤：
1. 光标移到"cat"开头
2. 按 v 进入可视模式
3. 按 w 选中整个单词"cat"
4. 按 c 删除并进入插入模式
5. 输入"dog"
6. 按 Esc 回到普通模式
```

### 2.4 操作对比表


| 操作键 | **英文全称** | **作用效果** | **最终状态** |
|-------|-------------|-------------|-------------|
| `d` | Delete | `删除选中文本` | `返回普通模式` |
| `y` | Yank | `复制选中文本` | `返回普通模式` |
| `c` | Change | `删除选中文本并插入` | `进入插入模式` |

---

## 3. 📐 缩进操作详解


### 3.1 什么是缩进操作


**缩进**就是在行的开头添加空格或制表符，让代码看起来有层次感。在编程中，缩进用来表示代码的层级结构。

```
无缩进代码（看起来很乱）：
if (condition) {
console.log("hello");
if (nested) {
console.log("nested");
}
}

有缩进代码（清晰易读）：
if (condition) {
    console.log("hello");
    if (nested) {
        console.log("nested");
    }
}
```

### 3.2 手动缩进操作


**右缩进 (>)**：向右增加缩进，让代码层级更深
```bash
# 操作步骤
1. 按 V 进入行可视模式
2. 选择需要缩进的行
3. 按 > 向右缩进一级
4. 按 . 重复上次操作（可选）

# 效果对比
选择前：
function test() {
console.log("hello");
}

选择后按 > ：
function test() {
    console.log("hello");  # 向右缩进了一级
}
```

**左缩进 (<)**：向左减少缩进，让代码层级变浅
```bash
# 减少缩进示例
选择前：
    if (true) {
        console.log("test");
    }

选择后按 < ：
if (true) {
    console.log("test");  # 向左减少了一级缩进
}
```

### 3.3 自动缩进操作 (=)


**含义**：`=` 是**自动格式化缩进**，Vim 会根据代码语法自动调整缩进。

```bash
# 自动缩进示例
混乱的代码：
function example() {
if (true) {
console.log("test");
    if (nested) {
console.log("nested");  
}
}
}

# 操作步骤
1. 按 gg 到文件开头
2. 按 V G 选中全部内容
3. 按 = 自动格式化

格式化后：
function example() {
    if (true) {
        console.log("test");
        if (nested) {
            console.log("nested");
        }
    }
}
```

### 3.4 缩进操作技巧


| 操作组合 | **效果** | **使用场景** |
|---------|---------|-------------|
| `>>` | `当前行右缩进` | `快速调整单行` |
| `<<` | `当前行左缩进` | `快速调整单行` |
| `5>>` | `当前行向右缩进5级` | `大幅调整缩进` |
| `V3j=` | `选中4行自动格式化` | `格式化代码块` |

---

## 4. 🔍 选择区域搜索替换


### 4.1 什么是区域搜索替换


**区域搜索替换**就是只在你选中的文本范围内进行查找和替换，而不是在整个文件中替换。这样可以精确控制替换范围，避免误改其他地方的内容。

```
全文替换：在整个文件中把所有"cat"替换成"dog"
区域替换：只在选中的几行中把"cat"替换成"dog"
```

### 4.2 区域替换的基本语法


**基本格式**：`:'<,'>s/查找内容/替换内容/标志`

**符号含义解释**：
- `'<`：表示选中区域的**开始位置**
- `'>`：表示选中区域的**结束位置**  
- `s`：表示 **substitute（替换）** 命令
- `/`：**分隔符**，分隔查找内容和替换内容

### 4.3 实际操作步骤


```bash
# 示例文本
Line 1: The cat is sleeping
Line 2: A dog is running  
Line 3: The cat likes fish
Line 4: Dogs are loyal
Line 5: My cat is lazy

# 只替换第1行和第3行中的"cat"为"pet"
操作步骤：
1. 光标移到第1行
2. 按 V 进入行可视模式
3. 按 j j 选中第1-3行
4. 按 : （会自动出现 :'<,'>）
5. 输入 s/cat/pet/g
6. 按 Enter 执行

# 结果（只有选中区域被替换）
Line 1: The pet is sleeping  ← 被替换
Line 2: A dog is running     ← 没有cat，不变
Line 3: The pet likes fish   ← 被替换
Line 4: Dogs are loyal       ← 未选中，不变
Line 5: My cat is lazy       ← 未选中，保持原样
```

### 4.4 替换标志详解


| 标志 | **含义** | **效果** |
|------|---------|---------|
| `g` | global（全局） | `替换行中所有匹配项` |
| `i` | ignore case（忽略大小写） | `Cat和cat都会匹配` |
| `c` | confirm（确认） | `每次替换前询问确认` |

**组合使用示例**：
```bash
# 区域内替换所有"the"为"THE"（忽略大小写，需要确认）
:'<,'>s/the/THE/gic

# 执行效果
- g: 每行的所有"the"都会被替换
- i: "the"、"The"、"THE"都会匹配
- c: 每个匹配项都会询问是否替换
```

---

## 5. 📊 选择文本排序


### 5.1 什么是文本排序


**文本排序**就是把选中的多行文本按照**字母顺序**（或数字顺序）重新排列，就像整理通讯录一样。

```bash
# 排序前（混乱顺序）
zebra
apple  
dog
cat
banana

# 排序后（按字母顺序）
apple
banana
cat
dog
zebra
```

### 5.2 基本排序操作


**操作命令**：`:sort`

```bash
# 基本排序步骤
1. 按 V 进入行可视模式
2. 选择需要排序的行
3. 按 : 进入命令模式（自动出现 :'<,'>）
4. 输入 sort
5. 按 Enter 执行排序

# 实际示例
原始列表：
John
Alice
Bob
Charlie

排序后：
Alice
Bob
Charlie
John
```

### 5.3 排序选项详解


| 选项 | **含义** | **效果** |
|------|---------|---------|
| `:sort` | `默认排序` | `按字母升序排列` |
| `:sort!` | `反向排序` | `按字母降序排列` |
| `:sort n` | `数字排序` | `按数值大小排序` |
| `:sort u` | `去重排序` | `排序同时删除重复行` |

### 5.4 实用排序示例


**数字排序示例**：
```bash
# 原始数字列表
100
20
3
1000

# 使用 :sort n（数字排序）
3
20  
100
1000

# 如果用普通 :sort（字符排序）
100    ← 字符"1"在前面
1000
20     ← 字符"2"在前面  
3
```

**去重排序示例**：
```bash
# 原始列表（有重复）
apple
banana
apple
orange  
banana

# 使用 :sort u（去重排序）
apple   ← 重复的apple被删除
banana  ← 重复的banana被删除
orange
```

---

## 6. 📈 选择文本统计信息


### 6.1 什么是文本统计


**文本统计**就是统计选中文本的各种信息，比如有多少个字符、多少个单词、多少行等，就像 Word 中的"字数统计"功能。

### 6.2 查看统计信息


**操作方法**：选中文本后按 `g` + `Ctrl+g`

```bash
# 统计信息显示格式
Selected 3 of 10 lines; 45 of 200 words; 180 of 800 characters

含义解释：
- Selected 3 of 10 lines：选中了3行，总共10行
- 45 of 200 words：选中了45个单词，总共200个单词  
- 180 of 800 characters：选中了180个字符，总共800个字符
```

### 6.3 统计信息的实际用途


```bash
# 实际应用场景

📝 写作场景：
- 检查文章段落字数是否符合要求
- 统计选中段落的词汇量

💻 编程场景：
- 统计代码行数
- 评估代码复杂度

📊 数据处理：
- 统计CSV文件的行数
- 计算文本文件大小
```

> 📌 **快捷记忆**  
> `g Ctrl+g` → "**g**et **g**eneral statistics"（获取通用统计信息）

### 6.4 其他统计方式


| 快捷键 | **统计内容** | **使用场景** |
|-------|-------------|-------------|
| `g Ctrl+g` | `选中区域详细统计` | `精确统计选中内容` |
| `Ctrl+g` | `当前文件整体信息` | `查看文件总体情况` |
| `:echo wordcount()` | `当前缓冲区字数统计` | `脚本化统计` |

---

## 7. 🔤 选择文本大小写转换


### 7.1 什么是大小写转换


**大小写转换**就是把文本中的字母在**大写**和**小写**之间切换，比如把"Hello"变成"HELLO"或"hello"。

```bash
# 转换示例
原文本：Hello World
全大写：HELLO WORLD  
全小写：hello world
首字母大写：Hello World
```

### 7.2 基本转换操作


**操作方式**：选中文本后直接按转换键

| 按键 | **转换效果** | **示例** |
|------|-------------|---------|
| `u` | `转换为小写` | `Hello → hello` |
| `U` | `转换为大写` | `Hello → HELLO` |
| `~` | `大小写互换` | `Hello → hELLO` |

### 7.3 实际操作示例


```bash
# 示例文本
The Quick Brown Fox Jumps Over The Lazy Dog

# 全部转换为大写
操作步骤：
1. 按 V 进入行可视模式（或用 v 选择特定文字）
2. 选中要转换的文本
3. 按 U 转换为大写

结果：
THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG

# 全部转换为小写  
选中文本后按 u：
the quick brown fox jumps over the lazy dog

# 大小写互换
选中文本后按 ~：
tHE qUICK bROWN fOX jUMPS oVER tHE lAZY dOG
```

### 7.4 实用应用场景


```bash
🔸 编程场景：
- 变量名大小写转换（camelCase ↔ SNAKE_CASE）
- 常量定义（小写变量 → 大写常量）

🔸 文档编辑：
- 标题格式调整
- 缩写词处理

🔸 数据处理：
- 统一数据格式
- 清理数据中的大小写不一致
```

> ⚠️ **注意事项**  
> 大小写转换只对**英文字母**有效，数字和特殊字符不会改变

---

## 8. 💬 选择区域注释切换


### 8.1 什么是注释切换


**注释切换**就是在代码行前添加或删除注释符号（如 `#`、`//`、`/*`），让代码变成注释（不执行）或从注释变回代码（可执行）。

```bash
# Python代码示例
正常代码：
print("Hello")
print("World")

注释后：
# print("Hello")  
# print("World")

取消注释：
print("Hello")    # 又变回可执行代码
print("World")
```

### 8.2 手动注释操作


**添加注释**：
```bash
# 批量添加注释步骤
1. 按 Ctrl+v 进入块可视模式
2. 选中多行的开头位置
3. 按 I 进入插入模式
4. 输入注释符号（如 # 或 //）
5. 按 Esc，所有选中行都会添加注释

# 效果演示
原始代码：
print("line 1")
print("line 2") 
print("line 3")

操作后：
# print("line 1")
# print("line 2")
# print("line 3")
```

**删除注释**：
```bash
# 批量删除注释步骤  
1. 按 Ctrl+v 进入块可视模式
2. 选中注释符号列（包括空格）
3. 按 d 删除选中的注释符号

# 效果演示
注释代码：
# print("line 1")
# print("line 2")

操作后：
print("line 1")   # 注释符号被删除
print("line 2")
```

### 8.3 不同语言的注释符号


| 编程语言 | **注释符号** | **示例** |
|---------|-------------|---------|
| **Python** | `#` | `# 这是注释` |
| **JavaScript** | `//` | `// 这是注释` |
| **C/Java** | `//` 或 `/* */` | `// 单行注释` |
| **HTML** | `<!-- -->` | `<!-- 这是注释 -->` |
| **CSS** | `/* */` | `/* 这是注释 */` |

### 8.4 注释的实际用途


```bash
🔸 调试代码：
- 临时屏蔽某些代码行
- 测试不同的实现方案

🔸 代码说明：
- 为复杂逻辑添加解释
- 标记待完成的功能

🔸 版本控制：
- 保留旧代码作为参考
- 标记重要的修改点
```

---

## 9. 🔧 选择模式与命令组合


### 9.1 什么是模式与命令组合


**模式与命令组合**就是把可视模式的选择功能和 Vim 的各种命令结合起来使用，实现更强大的文本编辑功能。

```
基本思路：
选择文本（可视模式）+ 执行命令 = 强大功能

例如：
选择多行 + :sort = 排序选中行
选择文本 + :w filename = 保存选中内容到文件
```

### 9.2 常用组合操作


**保存选中内容到新文件**：
```bash
# 操作步骤
1. 选中需要保存的文本
2. 按 : 进入命令模式
3. 输入 w filename.txt
4. 按 Enter 执行

# 实际效果
选中的内容会被单独保存为 filename.txt 文件
原文件保持不变
```

**选中文本执行外部命令**：
```bash
# 把选中的数字进行求和
选中内容：
10
20
30

操作：:'<,'>!awk '{sum+=$1} END {print sum}'
结果：60

# 把选中的文本用外部工具格式化
选中JSON内容后：:'<,'>!python -m json.tool
效果：自动格式化JSON内容
```

### 9.3 高级组合技巧


**选择文本并在多个位置同时编辑**：
```bash
# 块可视模式 + 插入
1. 按 Ctrl+v 进入块可视模式
2. 选中多行的同一列位置
3. 按 I 进入插入模式  
4. 输入文本
5. 按 Esc，所有行都会插入相同文本

# 实际应用：给多行代码添加缩进
原始：
console.log("A");
console.log("B");
console.log("C");

操作后：
    console.log("A");  # 所有行都添加了4个空格
    console.log("B");
    console.log("C");
```

### 9.4 组合操作参考表


| 组合操作 | **功能** | **使用场景** |
|---------|---------|-------------|
| **选择 + :w file** | `保存选中内容` | `提取代码片段` |
| **选择 + :!command** | `用外部程序处理` | `格式化、计算` |
| **选择 + :s///g** | `区域替换` | `局部修改文本` |
| **选择 + =** | `自动格式化` | `整理代码缩进` |
| **选择 + J** | `合并行` | `连接多行文本` |

---

## 10. 📋 核心要点总结


### 10.1 必须掌握的基本概念


```
🔸 可视模式本质：选择文本的工作模式，类似鼠标拖拽选中
🔸 三种选择方式：字符选择(v)、行选择(V)、块选择(Ctrl+v)
🔸 基本操作流程：进入可视模式 → 选择文本 → 执行操作 → 返回普通模式
🔸 核心操作命令：d(删除)、y(复制)、c(剪切替换)
🔸 高级功能组合：选择+命令实现复杂编辑任务
```

### 10.2 关键操作速查


**🔹 文本操作类**：
- `d` → 删除选中文本
- `y` → 复制选中文本  
- `c` → 删除并进入插入模式
- `u/U/~` → 大小写转换

**🔹 格式整理类**：
- `>/</=` → 缩进操作（右缩进/左缩进/自动格式化）
- `:sort` → 文本排序
- `J` → 合并行

**🔹 信息统计类**：
- `g Ctrl+g` → 查看选中文本统计信息
- `:s/old/new/g` → 区域内搜索替换

### 10.3 实际应用价值


**🎯 编程开发场景**：
- **代码格式化**：选择代码块 + `=` 自动调整缩进
- **批量注释**：块选择 + `I` + 注释符号批量添加注释
- **代码重构**：区域替换变量名、函数名
- **代码整理**：排序import语句、删除重复代码

**🎯 文档编辑场景**：
- **内容整理**：排序列表项、统计字数
- **格式调整**：统一大小写、调整缩进
- **批量修改**：替换术语、更新信息

**🎯 数据处理场景**：
- **CSV处理**：排序数据行、删除重复记录
- **日志分析**：提取特定时间段的日志
- **配置文件编辑**：批量更新配置项

### 10.4 学习进阶建议


**🔹 练习顺序建议**：
```
1️⃣ 基础操作：熟练掌握 v/V/Ctrl+v 和 d/y/c
2️⃣ 格式操作：掌握缩进、排序、大小写转换
3️⃣ 区域替换：学会精确的搜索替换操作
4️⃣ 高级组合：探索选择模式与各种命令的组合使用
```

**🔹 常见使用误区**：
- ❌ **过度依赖鼠标**：应该用键盘选择，效率更高
- ❌ **选择模式混淆**：字符选择和行选择适用场景不同
- ❌ **忘记选择范围**：替换操作要确认作用范围
- ❌ **操作后不检查**：重要操作后要检查结果

**核心记忆口诀**：
- 可视模式选文本，三种方式要分清
- 字符精确行整齐，矩形块选列对齐  
- 删复剪切是基础，格式转换更高级
- 选择命令相结合，编辑效率大提升