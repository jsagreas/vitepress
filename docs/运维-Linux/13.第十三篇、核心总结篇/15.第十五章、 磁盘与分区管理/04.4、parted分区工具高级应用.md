---
title: 4ã€partedåˆ†åŒºå·¥å…·é«˜çº§åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [partedå·¥å…·åŸºç¡€ä»‹ç»](#1-partedå·¥å…·åŸºç¡€ä»‹ç»)
2. [partedå‘½ä»¤è¡Œä¸äº¤äº’æ¨¡å¼](#2-partedå‘½ä»¤è¡Œä¸äº¤äº’æ¨¡å¼)
3. [GPTåˆ†åŒºè¡¨åˆ›å»ºä¸ç®¡ç†](#3-GPTåˆ†åŒºè¡¨åˆ›å»ºä¸ç®¡ç†)
4. [åˆ†åŒºå¤§å°è°ƒæ•´(resize)æ“ä½œ](#4-åˆ†åŒºå¤§å°è°ƒæ•´resizeæ“ä½œ)
5. [åˆ†åŒºç§»åŠ¨æ“ä½œè¯¦è§£](#5-åˆ†åŒºç§»åŠ¨æ“ä½œè¯¦è§£)
6. [åˆ†åŒºæ ‡ç­¾è®¾ç½®ä¸ç®¡ç†](#6-åˆ†åŒºæ ‡ç­¾è®¾ç½®ä¸ç®¡ç†)
7. [åˆ†åŒºå¯¹é½ä¼˜åŒ–æŠ€æœ¯](#7-åˆ†åŒºå¯¹é½ä¼˜åŒ–æŠ€æœ¯)
8. [è„šæœ¬åŒ–æ‰¹é‡åˆ†åŒºç®¡ç†](#8-è„šæœ¬åŒ–æ‰¹é‡åˆ†åŒºç®¡ç†)
9. [parted vs fdiské€‚ç”¨åœºæ™¯å¯¹æ¯”](#9-parted-vs-fdiské€‚ç”¨åœºæ™¯å¯¹æ¯”)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ partedå·¥å…·åŸºç¡€ä»‹ç»


### 1.1 ä»€ä¹ˆæ˜¯partedå·¥å…·


**parted**æ˜¯Linuxç³»ç»Ÿä¸­çš„ä¸€ä¸ª**ç£ç›˜åˆ†åŒºç®¡ç†å·¥å…·**ï¼Œå®ƒçš„å…¨ç§°æ˜¯"**partition editor**"ï¼ˆåˆ†åŒºç¼–è¾‘å™¨ï¼‰ã€‚

> ğŸ’¡ **é€šä¿—ç†è§£**  
> æŠŠç¡¬ç›˜æƒ³è±¡æˆä¸€å—å¤§åœŸåœ°ï¼Œpartedå°±åƒæ˜¯ä¸€ä½ä¸“ä¸šçš„åœŸåœ°è§„åˆ’å¸ˆï¼Œå¯ä»¥å¸®ä½ æŠŠè¿™å—åœŸåœ°åˆ’åˆ†æˆä¸åŒçš„åŒºåŸŸï¼ˆåˆ†åŒºï¼‰ï¼Œæ¯ä¸ªåŒºåŸŸå¯ä»¥ç”¨æ¥ç§ä¸åŒçš„ä½œç‰©ï¼ˆå­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ï¼‰ã€‚

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- ğŸ¯ **å®æ—¶ç”Ÿæ•ˆ**ï¼šä¿®æ”¹åˆ†åŒºåç«‹å³ç”Ÿæ•ˆï¼Œä¸éœ€è¦é‡å¯
- ğŸ“ **æ”¯æŒå¤§å®¹é‡**ï¼šæ”¯æŒ2TBä»¥ä¸Šçš„å¤§ç¡¬ç›˜
- ğŸ”„ **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒMBRã€GPTç­‰å¤šç§åˆ†åŒºè¡¨æ ¼å¼
- âš¡ **åŠŸèƒ½ä¸°å¯Œ**ï¼šä¸ä»…èƒ½åˆ›å»ºåˆ é™¤åˆ†åŒºï¼Œè¿˜èƒ½è°ƒæ•´å¤§å°ã€ç§»åŠ¨ä½ç½®

### 1.2 partedçš„ä¸»è¦åŠŸèƒ½


```
ç£ç›˜åˆ†åŒºå…¨æ–¹ä½ç®¡ç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          partedåŠŸèƒ½å›¾è°±          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ›å»ºåˆ†åŒº â”‚ åˆ é™¤åˆ†åŒº â”‚ è°ƒæ•´å¤§å°   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç§»åŠ¨åˆ†åŒº â”‚ è®¾ç½®æ ‡ç­¾ â”‚ æ ¼å¼è½¬æ¢   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯¹é½ä¼˜åŒ– â”‚ è„šæœ¬åŒ–   â”‚ å®æ—¶ç”Ÿæ•ˆ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸å…¶ä»–å·¥å…·çš„åŒºåˆ«**ï¼š
- **fdisk**ï¼šä¼ ç»Ÿå·¥å…·ï¼Œé€‚åˆMBRåˆ†åŒºï¼Œæ“ä½œç®€å•
- **parted**ï¼šç°ä»£å·¥å…·ï¼Œæ”¯æŒGPTåˆ†åŒºï¼ŒåŠŸèƒ½æ›´å¼ºå¤§
- **gparted**ï¼šå›¾å½¢ç•Œé¢ç‰ˆæœ¬çš„partedï¼Œæ“ä½œç›´è§‚

---

## 2. ğŸ’» partedå‘½ä»¤è¡Œä¸äº¤äº’æ¨¡å¼


### 2.1 ä¸¤ç§æ“ä½œæ¨¡å¼å¯¹æ¯”


partedå·¥å…·æä¾›äº†ä¸¤ç§ä¸åŒçš„æ“ä½œæ–¹å¼ï¼Œå°±åƒå¼€è½¦æœ‰æ‰‹åŠ¨æŒ¡å’Œè‡ªåŠ¨æŒ¡ä¸€æ ·ï¼š

| æ¨¡å¼ç±»å‹ | **ä½¿ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|---------|-------------|---------|---------|
| **å‘½ä»¤è¡Œæ¨¡å¼** | è„šæœ¬åŒ–ã€æ‰¹é‡æ“ä½œ | å¿«é€Ÿã€å¯è‡ªåŠ¨åŒ– | éœ€è¦è®°ä½å‚æ•° |
| **äº¤äº’æ¨¡å¼** | æ‰‹åŠ¨æ“ä½œã€å­¦ä¹ ä½¿ç”¨ | æœ‰æç¤ºã€å®¹é”™æ€§å¥½ | ä¸é€‚åˆæ‰¹é‡æ“ä½œ |

### 2.2 å‘½ä»¤è¡Œæ¨¡å¼è¯¦è§£


**åŸºæœ¬è¯­æ³•**ï¼š`parted [è®¾å¤‡] [å‘½ä»¤] [å‚æ•°]`

```bash
# æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯
parted /dev/sda print

# åˆ›å»ºæ–°åˆ†åŒºï¼ˆä¸€æ¡å‘½ä»¤å®Œæˆï¼‰
parted /dev/sda mkpart primary ext4 1MiB 1GiB

# åˆ é™¤åˆ†åŒº
parted /dev/sda rm 1
```

> ğŸ¯ **ä½¿ç”¨æŠ€å·§**  
> å‘½ä»¤è¡Œæ¨¡å¼é€‚åˆä½ å·²ç»å¾ˆç†Ÿæ‚‰partedæ“ä½œï¼Œæˆ–è€…éœ€è¦å†™è„šæœ¬æ‰¹é‡å¤„ç†çš„æ—¶å€™ä½¿ç”¨ã€‚

### 2.3 äº¤äº’æ¨¡å¼è¯¦è§£


**è¿›å…¥äº¤äº’æ¨¡å¼**ï¼š
```bash
parted /dev/sda
```

**äº¤äº’æ¨¡å¼å¸¸ç”¨å‘½ä»¤**ï¼š
```
(parted) help          # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
(parted) print         # æ˜¾ç¤ºå½“å‰åˆ†åŒºè¡¨
(parted) mklabel gpt   # åˆ›å»ºGPTåˆ†åŒºè¡¨
(parted) mkpart        # åˆ›å»ºæ–°åˆ†åŒºï¼ˆä¼šæç¤ºè¾“å…¥å‚æ•°ï¼‰
(parted) rm 1          # åˆ é™¤ç¬¬1ä¸ªåˆ†åŒº
(parted) quit          # é€€å‡ºäº¤äº’æ¨¡å¼
```

> âš ï¸ **æ–°æ‰‹æé†’**  
> äº¤äº’æ¨¡å¼ä¼šç»™ä½ æ›´å¤šçš„æç¤ºä¿¡æ¯ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨partedï¼Œå»ºè®®ä»äº¤äº’æ¨¡å¼å¼€å§‹å­¦ä¹ ã€‚

### 2.4 å®é™…æ“ä½œç¤ºä¾‹


**åœºæ™¯ï¼šç»™æ–°ç¡¬ç›˜åˆ›å»ºåˆ†åŒº**

```bash
# æ–¹æ³•1ï¼šå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆé€‚åˆç†Ÿç»ƒç”¨æˆ·ï¼‰
parted /dev/sdb mklabel gpt
parted /dev/sdb mkpart primary ext4 1MiB 10GiB

# æ–¹æ³•2ï¼šäº¤äº’æ¨¡å¼ï¼ˆé€‚åˆæ–°æ‰‹ï¼‰
parted /dev/sdb
(parted) mklabel gpt
(parted) mkpart
åˆ†åŒºåç§°ï¼Ÿ []? system
æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Ÿ [ext2]? ext4
èµ·å§‹ç‚¹ï¼Ÿ 1MiB
ç»“æŸç‚¹ï¼Ÿ 10GiB
(parted) quit
```

---

## 3. ğŸ’¾ GPTåˆ†åŒºè¡¨åˆ›å»ºä¸ç®¡ç†


### 3.1 ä»€ä¹ˆæ˜¯GPTåˆ†åŒºè¡¨


**GPT**å…¨ç§°æ˜¯"**GUID Partition Table**"ï¼ˆå…¨å±€å”¯ä¸€æ ‡è¯†åˆ†åŒºè¡¨ï¼‰ï¼Œå®ƒæ˜¯æ–°ä¸€ä»£çš„åˆ†åŒºè¡¨æ ¼å¼ã€‚

> ğŸ“– **å½¢è±¡æ¯”å–»**  
> å¦‚æœæŠŠç¡¬ç›˜æ¯”ä½œä¸€æœ¬ä¹¦ï¼Œé‚£ä¹ˆåˆ†åŒºè¡¨å°±åƒæ˜¯ç›®å½•é¡µã€‚MBRå°±åƒæ˜¯è€å¼çš„ç®€å•ç›®å½•ï¼Œåªèƒ½è®°å½•4ä¸ªç« èŠ‚ï¼›è€ŒGPTå°±åƒæ˜¯ç°ä»£çš„è¯¦ç»†ç›®å½•ï¼Œå¯ä»¥è®°å½•128ä¸ªç« èŠ‚ï¼Œè€Œä¸”æ¯ä¸ªç« èŠ‚éƒ½æœ‰å”¯ä¸€çš„ç¼–å·ã€‚

**MBR vs GPTå¯¹æ¯”**ï¼š

```
MBRåˆ†åŒºè¡¨ï¼ˆä¼ ç»Ÿæ ¼å¼ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœ€å¤§æ”¯æŒï¼š2TBç¡¬ç›˜                â”‚
â”‚ ä¸»åˆ†åŒºï¼šæœ€å¤š4ä¸ª                   â”‚
â”‚ æ‰©å±•åˆ†åŒºï¼šå¯åˆ›å»ºæ›´å¤šé€»è¾‘åˆ†åŒº       â”‚
â”‚ å…¼å®¹æ€§ï¼šæ‰€æœ‰ç³»ç»Ÿéƒ½æ”¯æŒ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GPTåˆ†åŒºè¡¨ï¼ˆç°ä»£æ ¼å¼ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœ€å¤§æ”¯æŒï¼š9.4ZBç¡¬ç›˜ï¼ˆå‡ ä¹æ— é™ï¼‰   â”‚
â”‚ åˆ†åŒºæ•°é‡ï¼šæœ€å¤š128ä¸ªåˆ†åŒº           â”‚
â”‚ æ•°æ®ä¿æŠ¤ï¼šæœ‰å¤‡ä»½åˆ†åŒºè¡¨            â”‚
â”‚ å¯åŠ¨æ–¹å¼ï¼šæ”¯æŒUEFIå¯åŠ¨            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åˆ›å»ºGPTåˆ†åŒºè¡¨


**åˆ›å»ºæ–°çš„GPTåˆ†åŒºè¡¨**ï¼š
```bash
# å‘½ä»¤è¡Œæ–¹å¼
parted /dev/sda mklabel gpt

# äº¤äº’æ–¹å¼
parted /dev/sda
(parted) mklabel gpt
è­¦å‘Š: ç°æœ‰ç£ç›˜æ ‡ç­¾å°†è¢«åˆ é™¤ï¼Œæ‰€æœ‰æ•°æ®å°†ä¸¢å¤±ï¼
ä½ æƒ³ç»§ç»­å—ï¼Ÿ Yes/No? Yes
(parted) quit
```

> âš ï¸ **é‡è¦è­¦å‘Š**  
> åˆ›å»ºæ–°åˆ†åŒºè¡¨ä¼š**åˆ é™¤ç¡¬ç›˜ä¸Šçš„æ‰€æœ‰æ•°æ®**ï¼æ“ä½œå‰ä¸€å®šè¦å¤‡ä»½é‡è¦æ•°æ®ã€‚

### 3.3 GPTåˆ†åŒºè¡¨ç®¡ç†æ“ä½œ


**æŸ¥çœ‹åˆ†åŒºè¡¨ä¿¡æ¯**ï¼š
```bash
parted /dev/sda print
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
å‹å·: ATA Samsung SSD 850 (scsi)
ç£ç›˜ /dev/sda: 500GB
æ‰‡åŒºå¤§å° (é€»è¾‘/ç‰©ç†)ï¼š512B/512B
åˆ†åŒºè¡¨ï¼šgpt
ç£ç›˜æ ‡å¿—ï¼š

ç¼–å·  å¼€å§‹    ç»“æŸ    å¤§å°    æ–‡ä»¶ç³»ç»Ÿ  åç§°    æ ‡å¿—
 1    1049kB  538MB   537MB   fat32     EFI     boot, esp
 2    538MB   100GB   99.5GB  ext4      root
 3    100GB   500GB   400GB   ext4      home
```

**åˆ†åŒºè¡¨éªŒè¯**ï¼š
```bash
# æ£€æŸ¥åˆ†åŒºè¡¨å®Œæ•´æ€§
parted /dev/sda print | grep "åˆ†åŒºè¡¨"
# åº”è¯¥æ˜¾ç¤ºï¼šåˆ†åŒºè¡¨ï¼šgpt
```

---

## 4. ğŸ“ åˆ†åŒºå¤§å°è°ƒæ•´(resize)æ“ä½œ


### 4.1 resizeæ“ä½œåŸç†


**resize**ï¼ˆé‡æ–°è°ƒæ•´å¤§å°ï¼‰æ˜¯partedæœ€å®ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥åœ¨ä¸ä¸¢å¤±æ•°æ®çš„æƒ…å†µä¸‹è°ƒæ•´åˆ†åŒºå¤§å°ã€‚

> ğŸ” **å·¥ä½œåŸç†**  
> æƒ³è±¡ä½ æœ‰ä¸€ä¸ªè£…æ»¡ä¹¦çš„ä¹¦æ¶ï¼Œç°åœ¨è¦æŠŠä¹¦æ¶å˜å¤§æˆ–å˜å°ã€‚resizeå°±æ˜¯è¿™æ ·çš„é­”æœ¯å¸ˆï¼Œå®ƒå¯ä»¥ï¼š
> - **æ‰©å¤§åˆ†åŒº**ï¼šå‘åå»¶ä¼¸è¾¹ç•Œï¼ˆå°±åƒåŠ é•¿ä¹¦æ¶ï¼‰
> - **ç¼©å°åˆ†åŒº**ï¼šå‘å‰æ”¶ç¼©è¾¹ç•Œï¼ˆå°±åƒæˆªçŸ­ä¹¦æ¶ï¼Œä½†ä¹¦ä¸èƒ½ä¸¢ï¼‰

### 4.2 åˆ†åŒºæ‰©å¤§æ“ä½œ


**æ‰©å¤§åˆ†åŒºçš„æ¡ä»¶**ï¼š
- âœ… åˆ†åŒºåé¢å¿…é¡»æœ‰è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´
- âœ… æ–‡ä»¶ç³»ç»Ÿå¿…é¡»æ”¯æŒåœ¨çº¿æ‰©å±•
- âœ… ä¸èƒ½ä¸å…¶ä»–åˆ†åŒºé‡å 

**æ“ä½œæ­¥éª¤**ï¼š
```bash
# 1. æŸ¥çœ‹å½“å‰åˆ†åŒºçŠ¶æ€
parted /dev/sda print

# 2. æ‰©å¤§ç¬¬2ä¸ªåˆ†åŒºåˆ°200GB
parted /dev/sda resizepart 2 200GB

# 3. åŒæ—¶è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°
resize2fs /dev/sda2
```

**æ‰©å¤§åˆ†åŒºç¤ºæ„å›¾**ï¼š
```
è°ƒæ•´å‰ï¼š
|---åˆ†åŒº1---|---åˆ†åŒº2---|----ç©ºé—²ç©ºé—´----|
0GB        10GB       50GB           200GB

è°ƒæ•´åï¼š
|---åˆ†åŒº1---|-------åˆ†åŒº2-------|--ç©ºé—²--|
0GB        10GB              180GB   200GB
```

### 4.3 åˆ†åŒºç¼©å°æ“ä½œ


**ç¼©å°åˆ†åŒºæ›´åŠ å¤æ‚**ï¼Œéœ€è¦å…ˆç¼©å°æ–‡ä»¶ç³»ç»Ÿï¼Œå†ç¼©å°åˆ†åŒºï¼š

```bash
# 1. å¸è½½åˆ†åŒºï¼ˆé‡è¦ï¼ï¼‰
umount /dev/sda2

# 2. æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ
e2fsck -f /dev/sda2

# 3. å…ˆç¼©å°æ–‡ä»¶ç³»ç»Ÿåˆ°30GB
resize2fs /dev/sda2 30G

# 4. å†ç¼©å°åˆ†åŒºåˆ°32GBï¼ˆç•™ç‚¹ä½™é‡ï¼‰
parted /dev/sda resizepart 2 32GB

# 5. é‡æ–°æŒ‚è½½
mount /dev/sda2 /mount/point
```

> âš ï¸ **å®‰å…¨æé†’**  
> ç¼©å°åˆ†åŒºæœ‰æ•°æ®ä¸¢å¤±é£é™©ï¼æ“ä½œå‰å¿…é¡»ï¼š
> - å¤‡ä»½é‡è¦æ•°æ®
> - å¸è½½åˆ†åŒº
> - æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿå®Œæ•´æ€§

### 4.4 resizeå¸¸è§é—®é¢˜ä¸è§£å†³


**é—®é¢˜1ï¼šæç¤ºç©ºé—´ä¸è¶³**
```bash
# è§£å†³æ–¹æ³•ï¼šæ£€æŸ¥åˆ†åŒºåçš„ç©ºé—²ç©ºé—´
parted /dev/sda print free
```

**é—®é¢˜2ï¼šæ–‡ä»¶ç³»ç»Ÿæ— æ³•è°ƒæ•´**
```bash
# å¯¹äºext4æ–‡ä»¶ç³»ç»Ÿ
resize2fs /dev/sda2

# å¯¹äºxfsæ–‡ä»¶ç³»ç»Ÿï¼ˆåªèƒ½æ‰©å¤§ï¼Œä¸èƒ½ç¼©å°ï¼‰
xfs_growfs /mount/point
```

---

## 5. ğŸ”„ åˆ†åŒºç§»åŠ¨æ“ä½œè¯¦è§£


### 5.1 åˆ†åŒºç§»åŠ¨çš„æ¦‚å¿µ


**åˆ†åŒºç§»åŠ¨**æ˜¯æŒ‡æ”¹å˜åˆ†åŒºåœ¨ç¡¬ç›˜ä¸Šçš„ç‰©ç†ä½ç½®ï¼Œå°±åƒé‡æ–°æ’åˆ—æˆ¿é—´é‡Œçš„å®¶å…·ä¸€æ ·ã€‚

> ğŸ“– **ç”Ÿæ´»ç±»æ¯”**  
> æƒ³è±¡ç¡¬ç›˜æ˜¯ä¸€æ¡è¡—ï¼Œæ¯ä¸ªåˆ†åŒºæ˜¯ä¸€æ ‹æˆ¿å­ã€‚åˆ†åŒºç§»åŠ¨å°±æ˜¯æŠŠæˆ¿å­ä»è¡—é“çš„ä¸€ç«¯æ¬åˆ°å¦ä¸€ç«¯ï¼Œæˆ¿å­é‡Œçš„ä¸œè¥¿ï¼ˆæ•°æ®ï¼‰ä¿æŒä¸å˜ï¼Œä½†é—¨ç‰Œå·ï¼ˆä½ç½®ï¼‰æ”¹å˜äº†ã€‚

### 5.2 ä¸ºä»€ä¹ˆéœ€è¦ç§»åŠ¨åˆ†åŒº


**å¸¸è§ä½¿ç”¨åœºæ™¯**ï¼š

```
åœºæ™¯1ï¼šæ•´ç†ç£ç›˜ç©ºé—´
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚åˆ†åŒº1â”‚ ç©ºé—²  â”‚åˆ†åŒº2â”‚  åˆ†åŒº3  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ ç§»åŠ¨åˆ†åŒº2
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚åˆ†åŒº1â”‚åˆ†åŒº2â”‚ ç©ºé—²  â”‚  åˆ†åŒº3  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯2ï¼šä¸ºç³»ç»Ÿåˆ†åŒºè…¾å‡ºç©ºé—´
åŸæ¥ï¼šâ”‚ç³»ç»Ÿâ”‚â”€â”€â”€â”€æ•°æ®åˆ†åŒºâ”€â”€â”€â”€â”‚
ç§»åŠ¨åï¼šâ”‚ç³»ç»Ÿâ”‚ç©ºé—²â”‚æ•°æ®åˆ†åŒºâ”‚
```

### 5.3 ç§»åŠ¨åˆ†åŒºçš„æ“ä½œæ­¥éª¤


**åŸºæœ¬æ“ä½œå‘½ä»¤**ï¼š
```bash
# partedæš‚ä¸ç›´æ¥æ”¯æŒmoveå‘½ä»¤ï¼Œéœ€è¦é€šè¿‡åˆ é™¤é‡å»ºå®ç°
# æ¨èä½¿ç”¨gpartedå›¾å½¢å·¥å…·è¿›è¡Œå¤æ‚ç§»åŠ¨æ“ä½œ
```

**æ‰‹åŠ¨ç§»åŠ¨åˆ†åŒºçš„å®‰å…¨æ–¹æ³•**ï¼š

```bash
# 1. å¤‡ä»½åˆ†åŒºæ•°æ®
dd if=/dev/sda2 of=/backup/partition2.img bs=1M

# 2. è®°å½•åˆ†åŒºä¿¡æ¯
parted /dev/sda print > partition_info.txt

# 3. åˆ é™¤åŸåˆ†åŒº
parted /dev/sda rm 2

# 4. åœ¨æ–°ä½ç½®åˆ›å»ºåˆ†åŒº
parted /dev/sda mkpart primary ext4 50GB 100GB

# 5. æ¢å¤æ•°æ®
dd if=/backup/partition2.img of=/dev/sda2 bs=1M

# 6. æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ
e2fsck -f /dev/sda2
```

> âš ï¸ **é£é™©è­¦å‘Š**  
> åˆ†åŒºç§»åŠ¨æ˜¯é«˜é£é™©æ“ä½œï¼å¼ºçƒˆå»ºè®®ï¼š
> - ä½¿ç”¨ä¸“ä¸šå·¥å…·ï¼ˆå¦‚gpartedï¼‰
> - å®Œæ•´å¤‡ä»½æ•°æ®
> - åœ¨æµ‹è¯•ç¯å¢ƒå…ˆç»ƒä¹ 

### 5.4 ç§»åŠ¨åˆ†åŒºçš„æ›¿ä»£æ–¹æ¡ˆ


**æ›´å®‰å…¨çš„æ–¹æ³•**ï¼š

| æ–¹æ³• | **é€‚ç”¨åœºæ™¯** | **é£é™©çº§åˆ«** | **æ¨èåº¦** |
|-----|-------------|-------------|-----------|
| **æ•°æ®è¿ç§»** | æœ‰è¶³å¤Ÿç©ºé—´åˆ›å»ºæ–°åˆ†åŒº | â­ ä½é£é™© | â­â­â­â­â­ |
| **é€»è¾‘å·ç®¡ç†** | ä½¿ç”¨LVMçš„ç³»ç»Ÿ | â­â­ è¾ƒä½ | â­â­â­â­ |
| **ä¸“ä¸šå·¥å…·** | å¤æ‚çš„åˆ†åŒºè°ƒæ•´ | â­â­â­ ä¸­ç­‰ | â­â­â­ |
| **æ‰‹åŠ¨ç§»åŠ¨** | ç´§æ€¥æƒ…å†µä¸‹ | â­â­â­â­â­ é«˜é£é™© | â­ |

---

## 6. ğŸ·ï¸ åˆ†åŒºæ ‡ç­¾è®¾ç½®ä¸ç®¡ç†


### 6.1 ä»€ä¹ˆæ˜¯åˆ†åŒºæ ‡ç­¾


**åˆ†åŒºæ ‡ç­¾**å°±åƒç»™æ¯ä¸ªåˆ†åŒºèµ·ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼Œæ–¹ä¾¿è¯†åˆ«å’Œç®¡ç†ã€‚

> ğŸ’¡ **ç”Ÿæ´»ä¾‹å­**  
> å°±åƒå®¶é‡Œçš„æŠ½å±‰è´´ä¸Šæ ‡ç­¾å†™ç€"è¢œå­"ã€"å†…è¡£"ã€"æ–‡ä»¶"ä¸€æ ·ï¼Œåˆ†åŒºæ ‡ç­¾å¸®åŠ©ä½ å¿«é€ŸçŸ¥é“æ¯ä¸ªåˆ†åŒºå­˜æ”¾çš„æ˜¯ä»€ä¹ˆå†…å®¹ã€‚

**æ ‡ç­¾çš„ä½œç”¨**ï¼š
- ğŸ¯ **ä¾¿äºè¯†åˆ«**ï¼šä¸€çœ¼å°±çŸ¥é“åˆ†åŒºç”¨é€”
- ğŸ”— **ç¨³å®šæŒ‚è½½**ï¼šå³ä½¿è®¾å¤‡å·å˜åŒ–ï¼Œä¹Ÿèƒ½æ­£ç¡®æŒ‚è½½
- ğŸ“‹ **ç³»ç»Ÿç®¡ç†**ï¼šæ–¹ä¾¿ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬

### 6.2 è®¾ç½®åˆ†åŒºæ ‡ç­¾


**åœ¨åˆ›å»ºåˆ†åŒºæ—¶è®¾ç½®æ ‡ç­¾**ï¼š
```bash
# äº¤äº’æ¨¡å¼åˆ›å»ºå¸¦æ ‡ç­¾çš„åˆ†åŒº
parted /dev/sda
(parted) mkpart
åˆ†åŒºåç§°ï¼Ÿ []? system-root
æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Ÿ [ext2]? ext4
èµ·å§‹ç‚¹ï¼Ÿ 1GB
ç»“æŸç‚¹ï¼Ÿ 50GB
(parted) quit
```

**ä¸ºç°æœ‰åˆ†åŒºè®¾ç½®æ ‡ç­¾**ï¼š
```bash
# ä¿®æ”¹åˆ†åŒº1çš„åç§°ä¸º"boot-efi"
parted /dev/sda name 1 "boot-efi"

# ä¿®æ”¹åˆ†åŒº2çš„åç§°ä¸º"system-root"
parted /dev/sda name 2 "system-root"

# ä¿®æ”¹åˆ†åŒº3çš„åç§°ä¸º"user-data"
parted /dev/sda name 3 "user-data"
```

### 6.3 æ ‡ç­¾å‘½åè§„èŒƒ


**æ¨èçš„å‘½åè§„åˆ™**ï¼š

```
ç³»ç»Ÿåˆ†åŒºæ ‡ç­¾ç¤ºä¾‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ boot-efi     â†’ EFIå¯åŠ¨åˆ†åŒº      â”‚
â”‚ system-root  â†’ æ ¹æ–‡ä»¶ç³»ç»Ÿ       â”‚
â”‚ system-swap  â†’ äº¤æ¢åˆ†åŒº         â”‚
â”‚ user-home    â†’ ç”¨æˆ·æ•°æ®åˆ†åŒº     â”‚
â”‚ data-backup  â†’ å¤‡ä»½æ•°æ®åˆ†åŒº     â”‚
â”‚ temp-cache   â†’ ä¸´æ—¶ç¼“å­˜åˆ†åŒº     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ‡ç­¾å‘½åå»ºè®®**ï¼š
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„è‹±æ–‡åç§°
- âœ… ç”¨è¿å­—ç¬¦åˆ†éš”è¯è¯­
- âœ… åŒ…å«åˆ†åŒºç”¨é€”ä¿¡æ¯
- âŒ é¿å…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦
- âŒ ä¸è¦ä½¿ç”¨çº¯æ•°å­—

### 6.4 æŸ¥çœ‹å’Œä½¿ç”¨æ ‡ç­¾


**æŸ¥çœ‹æ‰€æœ‰åˆ†åŒºæ ‡ç­¾**ï¼š
```bash
# æŸ¥çœ‹åˆ†åŒºè¡¨ä¿¡æ¯ï¼ˆåŒ…å«æ ‡ç­¾ï¼‰
parted /dev/sda print

# ä½¿ç”¨lsblkæŸ¥çœ‹æ ‡ç­¾
lsblk -o NAME,SIZE,LABEL,MOUNTPOINT

# ä½¿ç”¨blkidæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
blkid /dev/sda1
```

**åœ¨fstabä¸­ä½¿ç”¨æ ‡ç­¾æŒ‚è½½**ï¼š
```bash
# ä¼ ç»Ÿæ–¹å¼ï¼ˆè®¾å¤‡å·å¯èƒ½å˜åŒ–ï¼‰
/dev/sda2 /home ext4 defaults 0 2

# ä½¿ç”¨æ ‡ç­¾æ–¹å¼ï¼ˆæ›´ç¨³å®šï¼‰
PARTLABEL=user-home /home ext4 defaults 0 2

# æˆ–ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ ‡ç­¾
LABEL=user-data /home ext4 defaults 0 2
```

---

## 7. âš¡ åˆ†åŒºå¯¹é½ä¼˜åŒ–æŠ€æœ¯


### 7.1 ä»€ä¹ˆæ˜¯åˆ†åŒºå¯¹é½


**åˆ†åŒºå¯¹é½**æ˜¯æŒ‡è®©åˆ†åŒºçš„èµ·å§‹ä½ç½®ä¸å­˜å‚¨è®¾å¤‡çš„ç‰©ç†ç»“æ„ä¿æŒä¸€è‡´ï¼Œä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚

> ğŸ” **å½¢è±¡æ¯”å–»**  
> æƒ³è±¡å­˜å‚¨è®¾å¤‡åƒæ˜¯ä¸€ä¸ªæœ‰æ ¼å­çš„åœè½¦åœºï¼Œæ¯ä¸ªæ ¼å­æ˜¯4KBã€‚å¦‚æœä½ çš„è½¦ï¼ˆåˆ†åŒºï¼‰æ­£å¥½åœåœ¨æ ¼å­é‡Œï¼Œé‚£ä¹ˆåœè½¦å’Œå–è½¦éƒ½å¾ˆå¿«ï¼›å¦‚æœè·¨è¶Šäº†ä¸¤ä¸ªæ ¼å­ï¼Œå°±éœ€è¦æ›´å¤šæ—¶é—´æ“ä½œã€‚

### 7.2 å¯¹é½çš„é‡è¦æ€§


**ä¸å¯¹é½çš„åæœ**ï¼š

```
æ€§èƒ½å½±å“ç¤ºæ„å›¾ï¼š

å¯¹é½çš„åˆ†åŒºï¼ˆæ€§èƒ½å¥½ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ åˆ†åŒºèµ·å§‹ â”‚    åˆ†åŒºæ•°æ®åŒºåŸŸ    â”‚
â”‚å®Œç¾å¯¹é½  â”‚  è¯»å†™æ•ˆç‡é«˜      â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜

æœªå¯¹é½çš„åˆ†åŒºï¼ˆæ€§èƒ½å·®ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚  è·¨â”‚åˆ†åŒºèµ·å§‹â”‚    åˆ†åŒºæ•°æ®åŒºåŸŸ â”‚
â”‚  ç•Œâ”‚è¯»å†™éœ€è¦ â”‚  å¤šæ¬¡æ“ä½œ     â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

**æ€§èƒ½å¯¹æ¯”**ï¼š
- âœ… **å¯¹é½çš„åˆ†åŒº**ï¼šè¯»å†™é€Ÿåº¦å¿«ï¼ŒIOPSé«˜
- âŒ **æœªå¯¹é½åˆ†åŒº**ï¼šæ€§èƒ½å¯èƒ½ä¸‹é™50%ä»¥ä¸Š

### 7.3 è‡ªåŠ¨å¯¹é½åŠŸèƒ½


**partedçš„æ™ºèƒ½å¯¹é½**ï¼š
```bash
# partedé»˜è®¤ä½¿ç”¨æœ€ä½³å¯¹é½
parted /dev/sda mkpart primary ext4 1MiB 10GiB

# æ£€æŸ¥åˆ†åŒºå¯¹é½çŠ¶æ€
parted /dev/sda align-check optimal 1
# è¾“å‡ºï¼š1 aligned (è¡¨ç¤ºå¯¹é½è‰¯å¥½)
```

**æ‰‹åŠ¨æŒ‡å®šå¯¹é½æ–¹å¼**ï¼š
```bash
# ä½¿ç”¨æœ€å°å¯¹é½ï¼ˆä¸æ¨èï¼‰
parted -a minimal /dev/sda mkpart primary ext4 1MiB 10GiB

# ä½¿ç”¨æœ€ä½³å¯¹é½ï¼ˆæ¨èï¼‰
parted -a optimal /dev/sda mkpart primary ext4 1MiB 10GiB
```

### 7.4 å¯¹é½ä¼˜åŒ–å®è·µ


**æ£€æŸ¥ç°æœ‰åˆ†åŒºå¯¹é½**ï¼š
```bash
# æ£€æŸ¥æ‰€æœ‰åˆ†åŒºçš„å¯¹é½çŠ¶æ€
for i in $(seq 1 10); do
    if parted /dev/sda print | grep -q "^\s*$i"; then
        echo "åˆ†åŒº $i: $(parted /dev/sda align-check optimal $i)"
    fi
done
```

**å¯¹é½ä¿®å¤æ–¹æ³•**ï¼š
```bash
# å¯¹äºæœªå¯¹é½çš„åˆ†åŒºï¼Œéœ€è¦é‡æ–°åˆ›å»º
# 1. å¤‡ä»½æ•°æ®
# 2. åˆ é™¤åˆ†åŒº
parted /dev/sda rm 2
# 3. é‡æ–°åˆ›å»ºå¯¹é½çš„åˆ†åŒº
parted -a optimal /dev/sda mkpart primary ext4 1GiB 50GiB
# 4. æ¢å¤æ•°æ®
```

**ç°ä»£å­˜å‚¨è®¾å¤‡çš„å¯¹é½å»ºè®®**ï¼š

| å­˜å‚¨ç±»å‹ | **æ¨èèµ·å§‹ä½ç½®** | **å¯¹é½å¤§å°** | **è¯´æ˜** |
|---------|----------------|-------------|---------|
| **ä¼ ç»Ÿç¡¬ç›˜** | 1MiB | 4KBå¯¹é½ | å…¼å®¹æ‰€æœ‰ç³»ç»Ÿ |
| **SSDå›ºæ€ç¡¬ç›˜** | 1MiB | 4KBå¯¹é½ | å»¶é•¿ä½¿ç”¨å¯¿å‘½ |
| **ä¼ä¸šçº§å­˜å‚¨** | 1MiB | æ ¹æ®å‚å•†å»ºè®® | æŸ¥çœ‹è®¾å¤‡æ–‡æ¡£ |

---

## 8. ğŸ¤– è„šæœ¬åŒ–æ‰¹é‡åˆ†åŒºç®¡ç†


### 8.1 ä¸ºä»€ä¹ˆéœ€è¦è„šæœ¬åŒ–


**è„šæœ¬åŒ–åˆ†åŒºçš„ä¼˜åŠ¿**ï¼š
- âš¡ **æ‰¹é‡æ“ä½œ**ï¼šåŒæ—¶å¤„ç†å¤šä¸ªç£ç›˜
- ğŸ¯ **æ ‡å‡†åŒ–**ï¼šç¡®ä¿æ‰€æœ‰ç³»ç»Ÿé…ç½®ä¸€è‡´
- ğŸ”„ **å¯é‡å¤**ï¼šæ–¹ä¾¿ç³»ç»Ÿéƒ¨ç½²å’Œæ¢å¤
- ğŸ“‹ **è‡ªåŠ¨åŒ–**ï¼šå‡å°‘äººä¸ºæ“ä½œé”™è¯¯

> ğŸ’¡ **åº”ç”¨åœºæ™¯**  
> æ¯”å¦‚ä½ è¦ç»™å…¬å¸100å°æœåŠ¡å™¨éƒ½é…ç½®ç›¸åŒçš„åˆ†åŒºç»“æ„ï¼Œæ‰‹åŠ¨æ“ä½œè¦åš100éï¼Œè€Œè„šæœ¬åªéœ€è¦å†™ä¸€æ¬¡ï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œã€‚

### 8.2 åŸºæœ¬è„šæœ¬åŒ–æ“ä½œ


**ç®€å•çš„åˆ†åŒºè„šæœ¬ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
# è‡ªåŠ¨åˆ†åŒºè„šæœ¬ç¤ºä¾‹

DISK="/dev/sdb"
SCRIPT_NAME="auto_partition.sh"

echo "å¼€å§‹å¯¹ $DISK è¿›è¡Œè‡ªåŠ¨åˆ†åŒº..."

# 1. åˆ›å»ºGPTåˆ†åŒºè¡¨
parted $DISK mklabel gpt

# 2. åˆ›å»ºEFIå¼•å¯¼åˆ†åŒº (512MB)
parted $DISK mkpart "EFI" fat32 1MiB 513MiB
parted $DISK set 1 boot on

# 3. åˆ›å»ºæ ¹åˆ†åŒº (50GB)
parted $DISK mkpart "root" ext4 513MiB 50.5GiB

# 4. åˆ›å»ºhomeåˆ†åŒº (å‰©ä½™ç©ºé—´)
END_SIZE=$(parted $DISK print | grep "Disk.*:" | awk '{print $3}')
parted $DISK mkpart "home" ext4 50.5GiB $END_SIZE

echo "åˆ†åŒºåˆ›å»ºå®Œæˆï¼"
```

### 8.3 é«˜çº§è„šæœ¬åŠŸèƒ½


**å¸¦é”™è¯¯å¤„ç†çš„å®Œæ•´è„šæœ¬**ï¼š
```bash
#!/bin/bash
# é«˜çº§è‡ªåŠ¨åˆ†åŒºè„šæœ¬

set -e  # é‡åˆ°é”™è¯¯æ—¶é€€å‡º

DISK=""
FORCE=false

# å‚æ•°è§£æ
while [[ $# -gt 0 ]]; do
    case $1 in
        -d|--disk)
            DISK="$2"
            shift 2
            ;;
        -f|--force)
            FORCE=true
            shift
            ;;
        -h|--help)
            echo "ç”¨æ³•: $0 -d /dev/sdX [-f]"
            exit 0
            ;;
    esac
done

# æ£€æŸ¥å‚æ•°
if [[ -z "$DISK" ]]; then
    echo "é”™è¯¯ï¼šå¿…é¡»æŒ‡å®šç£ç›˜è®¾å¤‡"
    exit 1
fi

# å®‰å…¨æ£€æŸ¥
if [[ "$FORCE" != true ]]; then
    echo "è­¦å‘Šï¼šæ­¤æ“ä½œå°†åˆ é™¤ $DISK ä¸Šçš„æ‰€æœ‰æ•°æ®ï¼"
    read -p "ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ(yes/no): " confirm
    if [[ "$confirm" != "yes" ]]; then
        echo "æ“ä½œå·²å–æ¶ˆ"
        exit 0
    fi
fi

# æ‰§è¡Œåˆ†åŒºæ“ä½œ...
```

### 8.4 æ‰¹é‡å¤„ç†å¤šä¸ªç£ç›˜


**å¤šç£ç›˜æ‰¹é‡åˆ†åŒºè„šæœ¬**ï¼š
```bash
#!/bin/bash
# æ‰¹é‡å¤„ç†å¤šä¸ªç£ç›˜

DISKS=("/dev/sdb" "/dev/sdc" "/dev/sdd")
LOG_FILE="/var/log/batch_partition.log"

function partition_disk() {
    local disk=$1
    echo "æ­£åœ¨å¤„ç†ç£ç›˜: $disk" | tee -a $LOG_FILE
    
    # åˆ†åŒºæ“ä½œ
    if parted $disk mklabel gpt; then
        echo "æˆåŠŸï¼š$disk åˆ†åŒºè¡¨åˆ›å»ºå®Œæˆ" | tee -a $LOG_FILE
    else
        echo "é”™è¯¯ï¼š$disk åˆ†åŒºè¡¨åˆ›å»ºå¤±è´¥" | tee -a $LOG_FILE
        return 1
    fi
    
    # æ›´å¤šåˆ†åŒºæ“ä½œ...
}

# ä¸»æ‰§è¡Œé€»è¾‘
echo "å¼€å§‹æ‰¹é‡åˆ†åŒºå¤„ç†..." | tee $LOG_FILE
for disk in "${DISKS[@]}"; do
    if [[ -b "$disk" ]]; then
        partition_disk "$disk"
    else
        echo "è­¦å‘Šï¼šç£ç›˜ $disk ä¸å­˜åœ¨" | tee -a $LOG_FILE
    fi
done

echo "æ‰¹é‡å¤„ç†å®Œæˆï¼è¯¦ç»†æ—¥å¿—è¯·æŸ¥çœ‹: $LOG_FILE"
```

### 8.5 åˆ†åŒºè„šæœ¬æ¨¡æ¿


**é€šç”¨åˆ†åŒºé…ç½®æ¨¡æ¿**ï¼š
```bash
# é…ç½®æ–‡ä»¶ï¼špartition_config.conf
DISK_DEVICE="/dev/sdb"
PARTITION_TABLE="gpt"

# åˆ†åŒºé…ç½®ï¼ˆåç§°:å¤§å°:æ–‡ä»¶ç³»ç»Ÿ:æ ‡å¿—ï¼‰
PARTITIONS=(
    "boot:512MiB:fat32:boot"
    "root:50GiB:ext4:"
    "swap:8GiB:linux-swap:"
    "home:100%:ext4:"
)

# è„šæœ¬è¯»å–é…ç½®å¹¶æ‰§è¡Œ
source partition_config.conf
for partition in "${PARTITIONS[@]}"; do
    # è§£æé…ç½®å¹¶åˆ›å»ºåˆ†åŒº...
done
```

---

## 9. âš–ï¸ parted vs fdiské€‚ç”¨åœºæ™¯å¯¹æ¯”


### 9.1 ä¸¤å¤§åˆ†åŒºå·¥å…·å¯¹æ¯”æ¦‚è§ˆ


**parted** vs **fdisk** å°±åƒæ˜¯ç°ä»£æ±½è½¦å’Œç»å…¸æ±½è½¦çš„åŒºåˆ«ï¼Œå„æœ‰ä¼˜åŠ¿ï¼š

```
å·¥å…·ç‰¹æ€§å¯¹æ¯”ä¸€è§ˆè¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          parted (ç°ä»£æ´¾)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… æ”¯æŒGPTåˆ†åŒºè¡¨                â”‚
â”‚ âœ… æ”¯æŒè¶…å¤§ç¡¬ç›˜(>2TB)           â”‚
â”‚ âœ… å®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯            â”‚
â”‚ âœ… å¯ä»¥è°ƒæ•´åˆ†åŒºå¤§å°              â”‚
â”‚ âœ… è„šæœ¬å‹å¥½                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          fdisk (ä¼ ç»Ÿæ´¾)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… æ“ä½œç®€å•ï¼Œå®¹æ˜“ä¸Šæ‰‹            â”‚
â”‚ âœ… ç³»ç»Ÿå…¼å®¹æ€§å¥½                  â”‚
â”‚ âœ… èµ„æºå ç”¨å°‘                    â”‚
â”‚ âœ… æ–‡æ¡£ä¸°å¯Œï¼Œå†å²æ‚ ä¹…            â”‚
â”‚ âŒ ä¸»è¦æ”¯æŒMBRåˆ†åŒºè¡¨             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 è¯¦ç»†åŠŸèƒ½å¯¹æ¯”


| åŠŸèƒ½ç‰¹æ€§ | **parted** | **fdisk** | **æ¨èä½¿ç”¨åœºæ™¯** |
|---------|-----------|-----------|-----------------|
| **åˆ†åŒºè¡¨æ”¯æŒ** | MBR + GPT | ä¸»è¦MBR | å¤§ç¡¬ç›˜é€‰parted |
| **ç¡¬ç›˜å®¹é‡** | æ— é™åˆ¶ | â‰¤2TB | è¶…2TBç¡¬ç›˜å¿…é¡»parted |
| **åˆ†åŒºæ•°é‡** | æœ€å¤š128ä¸ª | MBRæœ€å¤š4ä¸ªä¸»åˆ†åŒº | å¤šåˆ†åŒºé€‰parted |
| **å®æ—¶ç”Ÿæ•ˆ** | âœ… ç«‹å³ç”Ÿæ•ˆ | âŒ éœ€è¦é‡å¯ | ç”Ÿäº§ç¯å¢ƒé€‰parted |
| **è°ƒæ•´å¤§å°** | âœ… æ”¯æŒresize | âŒ ä¸æ”¯æŒ | éœ€è¦è°ƒæ•´é€‰parted |
| **è„šæœ¬ç¼–ç¨‹** | âœ… éå¸¸å‹å¥½ | âš–ï¸ ä¸€èˆ¬ | è‡ªåŠ¨åŒ–é€‰parted |
| **å­¦ä¹ éš¾åº¦** | âš–ï¸ ä¸­ç­‰ | âœ… ç®€å• | æ–°æ‰‹å­¦ä¹ é€‰fdisk |

### 9.3 å…·ä½“ä½¿ç”¨åœºæ™¯æ¨è


**é€‰æ‹©partedçš„åœºæ™¯**ï¼š

> ğŸ¯ **ç°ä»£åŒ–ç¯å¢ƒé¦–é€‰**
> - æœåŠ¡å™¨ç¯å¢ƒï¼ˆç‰¹åˆ«æ˜¯äº‘æœåŠ¡å™¨ï¼‰
> - å¤§å®¹é‡ç¡¬ç›˜ï¼ˆ>2TBï¼‰
> - UEFIå¯åŠ¨ç³»ç»Ÿ
> - éœ€è¦åŠ¨æ€è°ƒæ•´åˆ†åŒºå¤§å°
> - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
> - ä¼ä¸šçº§å­˜å‚¨ç®¡ç†

**é€‰æ‹©fdiskçš„åœºæ™¯**ï¼š

> ğŸ“š **ä¼ ç»Ÿç¯å¢ƒæˆ–å­¦ä¹ ç¯å¢ƒ**
> - å­¦ä¹ LinuxåŸºç¡€ï¼ˆfdiskæ›´ç›´è§‚ï¼‰
> - è€æ—§ç³»ç»Ÿå…¼å®¹æ€§è¦æ±‚
> - ç®€å•çš„MBRåˆ†åŒºéœ€æ±‚
> - å¿«é€Ÿåˆ†åŒºæ“ä½œ
> - èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿ

### 9.4 å®é™…æ“ä½œå¯¹æ¯”ç¤ºä¾‹


**ç›¸åŒä»»åŠ¡çš„ä¸åŒå®ç°**ï¼š

```bash
# ä»»åŠ¡ï¼šåˆ›å»ºä¸€ä¸ª10GBçš„ext4åˆ†åŒº

# ä½¿ç”¨partedï¼ˆæ¨èç°ä»£ç¯å¢ƒï¼‰
parted /dev/sda mkpart primary ext4 1MiB 10GiB
mkfs.ext4 /dev/sda1

# ä½¿ç”¨fdiskï¼ˆä¼ ç»Ÿæ–¹æ³•ï¼‰
fdisk /dev/sda
# ç„¶åæŒ‰ç…§æç¤ºï¼šn -> p -> 1 -> å›è½¦ -> +10G -> w
partprobe /dev/sda
mkfs.ext4 /dev/sda1
```

### 9.5 é€‰æ‹©å»ºè®®æ€»ç»“


**æ¨èé€‰æ‹©ç­–ç•¥**ï¼š

```
å†³ç­–æµç¨‹å›¾ï¼š
ç¡¬ç›˜å®¹é‡ > 2TBï¼Ÿ
    â”œâ”€ æ˜¯ â†’ å¿…é¡»é€‰æ‹©parted
    â””â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­

éœ€è¦GPTåˆ†åŒºè¡¨ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ é€‰æ‹©parted
    â””â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­

éœ€è¦è°ƒæ•´åˆ†åŒºå¤§å°ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ é€‰æ‹©parted
    â””â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­

æ˜¯å¦ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ é€‰æ‹©parted
    â””â”€ å¦ â†’ å¯ä»¥é€‰æ‹©fdiskï¼ˆç®€å•åœºæ™¯ï¼‰

æ˜¯å¦æ˜¯Linuxæ–°æ‰‹å­¦ä¹ ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ å¯ä»¥ä»fdiskå¼€å§‹å­¦
    â””â”€ å¦ â†’ æ¨èä½¿ç”¨parted
```

**ç»¼åˆå»ºè®®**ï¼š
- ğŸŒŸ **ç°ä»£ç³»ç»Ÿä¼˜å…ˆé€‰æ‹©parted**ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§
- ğŸ“š **å­¦ä¹ é˜¶æ®µå¯ä»¥ä¸¤ä¸ªéƒ½æŒæ¡**ï¼Œå¢åŠ æŠ€èƒ½å¹¿åº¦  
- ğŸ”§ **ç”Ÿäº§ç¯å¢ƒæ¨èparted**ï¼Œæ›´åŠ ç¨³å®šå¯é 
- ğŸ¯ **æ ¹æ®å…·ä½“éœ€æ±‚çµæ´»é€‰æ‹©**ï¼Œæ²¡æœ‰ç»å¯¹æ ‡å‡†

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


> ğŸ’¡ **partedå·¥å…·ç²¾é«“**  
> partedæ˜¯ç°ä»£Linuxç³»ç»Ÿä¸­æœ€å¼ºå¤§çš„åˆ†åŒºç®¡ç†å·¥å…·ï¼ŒæŒæ¡å®ƒå°±ç›¸å½“äºæŒæ¡äº†ç£ç›˜ç®¡ç†çš„æ ¸å¿ƒæŠ€èƒ½ã€‚

**ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½ç†è§£**ï¼š
- **å®æ—¶åˆ†åŒºç®¡ç†**ï¼šæ— éœ€é‡å¯å³å¯ç”Ÿæ•ˆ
- **å…¨é¢æ ¼å¼æ”¯æŒ**ï¼šMBRã€GPTåˆ†åŒºè¡¨éƒ½èƒ½å¤„ç†
- **åŠ¨æ€å¤§å°è°ƒæ•´**ï¼šå¯ä»¥æ‰©å¤§ç¼©å°åˆ†åŒº
- **æ‰¹é‡è„šæœ¬åŒ–**ï¼šé€‚åˆè‡ªåŠ¨åŒ–è¿ç»´

**ğŸ”¸ å…³é”®æ“ä½œæŒæ¡**ï¼š
- **åŸºç¡€æ“ä½œ**ï¼šåˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹åˆ†åŒº
- **é«˜çº§åŠŸèƒ½**ï¼šresizeè°ƒæ•´ã€åˆ†åŒºç§»åŠ¨ã€æ ‡ç­¾ç®¡ç†
- **ä¼˜åŒ–æŠ€æœ¯**ï¼šåˆ†åŒºå¯¹é½ã€æ€§èƒ½ä¼˜åŒ–
- **è‡ªåŠ¨åŒ–**ï¼šè„šæœ¬ç¼–å†™ã€æ‰¹é‡å¤„ç†

### 10.2 å®é™…åº”ç”¨ä»·å€¼


**ğŸ“ˆ èŒä¸šæŠ€èƒ½æå‡**ï¼š
- **ç³»ç»Ÿè¿ç»´å·¥ç¨‹å¸ˆ**ï¼šå¿…å¤‡çš„ç£ç›˜ç®¡ç†æŠ€èƒ½
- **äº‘è®¡ç®—å·¥ç¨‹å¸ˆ**ï¼šæœåŠ¡å™¨åˆå§‹åŒ–é…ç½®
- **DevOpså·¥ç¨‹å¸ˆ**ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ç¼–å†™
- **Linuxç®¡ç†å‘˜**ï¼šæ—¥å¸¸å­˜å‚¨ç®¡ç†ç»´æŠ¤

**ğŸ› ï¸ å®é™…å·¥ä½œåœºæ™¯**ï¼š
- **æœåŠ¡å™¨éƒ¨ç½²**ï¼šæ‰¹é‡é…ç½®ç»Ÿä¸€åˆ†åŒºç»“æ„
- **å­˜å‚¨æ‰©å®¹**ï¼šåœ¨çº¿è°ƒæ•´åˆ†åŒºå¤§å°
- **ç³»ç»Ÿè¿ç§»**ï¼šé‡æ–°è§„åˆ’åˆ†åŒºå¸ƒå±€
- **æ•…éšœæ¢å¤**ï¼šåˆ†åŒºè¡¨ä¿®å¤å’Œé‡å»º

### 10.3 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ¯ å­¦ä¹ é˜¶æ®µè§„åˆ’**ï¼š

```
é˜¶æ®µ1ï¼šåŸºç¡€å…¥é—¨ï¼ˆ1-2å‘¨ï¼‰
â”œâ”€ ç†è§£åˆ†åŒºåŸºæœ¬æ¦‚å¿µ
â”œâ”€ æŒæ¡partedåŸºæœ¬å‘½ä»¤
â”œâ”€ ç»ƒä¹ åˆ›å»ºåˆ é™¤åˆ†åŒº
â””â”€ äº†è§£GPT vs MBRåŒºåˆ«

é˜¶æ®µ2ï¼šå®è·µåº”ç”¨ï¼ˆ2-3å‘¨ï¼‰
â”œâ”€ å­¦ä¼šresizeåˆ†åŒºè°ƒæ•´
â”œâ”€ æŒæ¡åˆ†åŒºæ ‡ç­¾ç®¡ç†
â”œâ”€ ç†è§£åˆ†åŒºå¯¹é½åŸç†
â””â”€ ç»ƒä¹ å®é™…åˆ†åŒºåœºæ™¯

é˜¶æ®µ3ï¼šé«˜çº§åº”ç”¨ï¼ˆ2-4å‘¨ï¼‰
â”œâ”€ ç¼–å†™åˆ†åŒºè‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€ æ‰¹é‡å¤„ç†å¤šç£ç›˜æ“ä½œ
â”œâ”€ å­¦ä¹ æ•…éšœæ’æŸ¥æ–¹æ³•
â””â”€ æŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€å·§
```

### 10.4 å…³é”®æ³¨æ„äº‹é¡¹


> âš ï¸ **å®‰å…¨æ“ä½œæé†’**

**ğŸ”¸ æ•°æ®å®‰å…¨**ï¼š
- ä»»ä½•åˆ†åŒºæ“ä½œå‰éƒ½è¦**å¤‡ä»½é‡è¦æ•°æ®**
- åœ¨æµ‹è¯•ç¯å¢ƒå…ˆç»ƒä¹ ï¼Œå†åœ¨ç”Ÿäº§ç¯å¢ƒæ“ä½œ
- ä½¿ç”¨`print`å‘½ä»¤åå¤ç¡®è®¤æ“ä½œå¯¹è±¡
- é‡è¦æ“ä½œå»ºè®®ä½¿ç”¨äº¤äº’æ¨¡å¼ï¼Œå¤šæ¬¡ç¡®è®¤

**ğŸ”¸ æ“ä½œè§„èŒƒ**ï¼š
- åˆ†åŒºå‰æ£€æŸ¥ç£ç›˜çŠ¶æ€å’Œæ–‡ä»¶ç³»ç»Ÿå®Œæ•´æ€§
- resizeæ“ä½œæ—¶æ³¨æ„æ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒæƒ…å†µ
- æ‰¹é‡è„šæœ¬è¦åŒ…å«é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- å®šæœŸéªŒè¯åˆ†åŒºè¡¨å’Œæ•°æ®å®Œæ•´æ€§

### 10.5 æ·±å…¥å­¦ä¹ èµ„æº


**ğŸ“š è¿›é˜¶å­¦ä¹ æ–¹å‘**ï¼š
- **LVMé€»è¾‘å·ç®¡ç†**ï¼šæ›´çµæ´»çš„å­˜å‚¨ç®¡ç†æ–¹æ¡ˆ
- **RAIDè½¯é˜µåˆ—**ï¼šæ•°æ®å†—ä½™å’Œæ€§èƒ½ä¼˜åŒ–
- **æ–‡ä»¶ç³»ç»Ÿæ·±åº¦**ï¼šext4ã€xfsã€btrfsç‰¹æ€§å¯¹æ¯”
- **å­˜å‚¨è™šæ‹ŸåŒ–**ï¼šDockerã€è™šæ‹Ÿæœºå­˜å‚¨ç®¡ç†

**ğŸ› ï¸ å®è·µå»ºè®®**ï¼š
- åœ¨è™šæ‹Ÿæœºä¸­æ­å»ºæµ‹è¯•ç¯å¢ƒ
- å‚ä¸å¼€æºé¡¹ç›®çš„å­˜å‚¨ç›¸å…³æ¨¡å—
- å…³æ³¨ä¼ä¸šçº§å­˜å‚¨è§£å†³æ–¹æ¡ˆ
- å­¦ä¹ äº‘åŸç”Ÿå­˜å‚¨æŠ€æœ¯æ ˆ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> ğŸ¯ **partedå·¥å…·è®°å¿†æ³•**  
> - **P**artition editor - åˆ†åŒºç¼–è¾‘å™¨
> - **A**dvanced features - é«˜çº§åŠŸèƒ½
> - **R**eal-time effect - å®æ—¶ç”Ÿæ•ˆ  
> - **T**able formats - å¤šç§åˆ†åŒºè¡¨
> - **E**asy scripting - è„šæœ¬å‹å¥½
> - **D**isk management - ç£ç›˜ç®¡ç†

æŒæ¡äº†partedå·¥å…·ï¼Œä½ å°±æ‹¥æœ‰äº†ç°ä»£Linuxç³»ç»Ÿç£ç›˜ç®¡ç†çš„æ ¸å¿ƒèƒ½åŠ›ï¼