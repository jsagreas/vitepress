---
title: 48ã€ç”Ÿäº§ç¯å¢ƒå®æˆ˜æ¡ˆä¾‹
---
## ğŸ“š ç›®å½•

1. [æ—¥å¿—åˆ†æè‡ªåŠ¨åŒ–](#1-æ—¥å¿—åˆ†æè‡ªåŠ¨åŒ–)
2. [é…ç½®ç®¡ç†è„šæœ¬](#2-é…ç½®ç®¡ç†è„šæœ¬)
3. [æ•°æ®è¿ç§»æ–¹æ¡ˆ](#3-æ•°æ®è¿ç§»æ–¹æ¡ˆ)
4. [ç›‘æ§æŠ¥è­¦é›†æˆ](#4-ç›‘æ§æŠ¥è­¦é›†æˆ)
5. [è¿ç»´è‡ªåŠ¨åŒ–åº”ç”¨](#5-è¿ç»´è‡ªåŠ¨åŒ–åº”ç”¨)
6. [æ•…éšœå¤„ç†æµç¨‹](#6-æ•…éšœå¤„ç†æµç¨‹)
7. [ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ](#7-ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“Š æ—¥å¿—åˆ†æè‡ªåŠ¨åŒ–


### 1.1 WebæœåŠ¡å™¨æ—¥å¿—åˆ†æ


**ğŸ” ä¸šåŠ¡åœºæ™¯**
æƒ³è±¡ä½ ç®¡ç†ç€ä¸€ä¸ªç”µå•†ç½‘ç«™ï¼Œæ¯å¤©äº§ç”Ÿå‡ GBçš„è®¿é—®æ—¥å¿—ã€‚è€æ¿è¦æ±‚ä½ æ¯å°æ—¶ç»Ÿè®¡ï¼šå“ªäº›é¡µé¢è®¿é—®æœ€å¤šï¼Ÿå“ªäº›ç”¨æˆ·å¯èƒ½æ˜¯çˆ¬è™«ï¼ŸæœåŠ¡å™¨å“åº”æ˜¯å¦æ­£å¸¸ï¼Ÿ

**ğŸ’¡ å®é™…é—®é¢˜**
æ‰‹åŠ¨åˆ†ææ—¥å¿—å°±åƒå¤§æµ·æé’ˆï¼Œè´¹æ—¶è´¹åŠ›è¿˜å®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬éœ€è¦ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·ï¼Œè®©ä¸‰å‰‘å®¢å¸®æˆ‘ä»¬å¹²è¿™äº›é‡æ´»ã€‚

```
å…¸å‹Webæ—¥å¿—æ ¼å¼ï¼š
192.168.1.100 - - [19/Sep/2025:10:30:45 +0800] "GET /api/products HTTP/1.1" 200 1024 "-" "Mozilla/5.0"
â”‚              â”‚   â”‚                            â”‚                              â”‚   â”‚     â”‚    â”‚
IPåœ°å€        ç”¨æˆ·  æ—¶é—´æˆ³                       è¯·æ±‚å†…å®¹                        çŠ¶æ€ç  å­—èŠ‚æ•° UA  Referer
```

**ğŸ› ï¸ ä¸‰å‰‘å®¢ç»„åˆæ‹³**

**ç¬¬ä¸€æ­¥ï¼šgrepå¿«é€Ÿç­›é€‰**
```bash
# ç­›é€‰å‡ºé”™è¯¯è¯·æ±‚ï¼ˆ4xx, 5xxçŠ¶æ€ç ï¼‰
grep -E " (4[0-9]{2}|5[0-9]{2}) " access.log

# ç­›é€‰APIæ¥å£è°ƒç”¨
grep "/api/" access.log

# ç­›é€‰å¯ç–‘çˆ¬è™«ï¼ˆè¯·æ±‚é¢‘ç‡å¼‚å¸¸ï¼‰
grep -E "bot|spider|crawler" access.log -i
```

**ç¬¬äºŒæ­¥ï¼šawkæ·±åº¦åˆ†æ**
```bash
# ç»Ÿè®¡æ¯ä¸ªIPçš„è®¿é—®æ¬¡æ•°ï¼ˆå‘ç°å¼‚å¸¸æµé‡ï¼‰
awk '{print $1}' access.log | sort | uniq -c | sort -nr | head -20

# åˆ†æå“åº”æ—¶é—´åˆ†å¸ƒï¼ˆæ‰¾å‡ºæ…¢è¯·æ±‚ï¼‰
awk '$9 >= 500 {print $7, $9, $10}' access.log | head -10

# æŒ‰å°æ—¶ç»Ÿè®¡è®¿é—®é‡
awk '{
    split($4, time, ":")
    hour = substr(time[1], 2)
    requests[hour]++
} 
END {
    for (h in requests) 
        print h":00-" h":59", requests[h] "æ¬¡è®¿é—®"
}' access.log
```

**ç¬¬ä¸‰æ­¥ï¼šsedæ•°æ®æ¸…æ´—**
```bash
# æ¸…ç†æ—¥å¿—æ ¼å¼ï¼Œæå–æ ¸å¿ƒä¿¡æ¯
sed 's/.*\[\(.*\)\].*/\1/' access.log | 
sed 's/\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}/[IPéšè—]/'
```

### 1.2 åº”ç”¨é”™è¯¯æ—¥å¿—ç›‘æ§


**ğŸš¨ å®æˆ˜åœºæ™¯**
ä½ çš„Javaåº”ç”¨çªç„¶å‡ºç°å¼‚å¸¸ï¼Œç”¨æˆ·æŠ•è¯‰ä¸æ–­ã€‚éœ€è¦å¿«é€Ÿä»æˆåƒä¸Šä¸‡è¡Œé”™è¯¯æ—¥å¿—ä¸­æ‰¾åˆ°é—®é¢˜æ ¹æºã€‚

**æ ¸å¿ƒæŠ€æœ¯ç»„åˆ**ï¼š
```bash
# å¤šå±‚ç­›é€‰pipelineï¼ˆç®¡é“æµæ°´çº¿ï¼‰
cat error.log | 
grep -A 5 -B 5 "Exception" |                    # æ‰¾å¼‚å¸¸å‰å5è¡Œ
awk '/ERROR/{count++; print NR, $0} END{print "æ€»è®¡é”™è¯¯:", count}' |  # ç»Ÿè®¡å¹¶æ˜¾ç¤º
sed 's/2025-[0-9-]* [0-9:]*/[æ—¶é—´]/g'           # ç»Ÿä¸€æ—¶é—´æ ¼å¼
```

### 1.3 å®æ—¶æ—¥å¿—ç›‘æ§è„šæœ¬


**ğŸ”„ ç”Ÿäº§çº§ç›‘æ§è„šæœ¬**
```bash
#!/bin/bash
# å®æ—¶ç›‘æ§å…³é”®ä¸šåŠ¡æŒ‡æ ‡

LOG_FILE="/var/log/nginx/access.log"
ALERT_THRESHOLD=100  # æ¯åˆ†é’Ÿè¶…è¿‡100ä¸ªé”™è¯¯å°±æŠ¥è­¦

# å®æ—¶ç›‘æ§å‡½æ•°
monitor_realtime() {
    tail -f $LOG_FILE | while read line; do
        # æ£€æŸ¥é”™è¯¯çŠ¶æ€ç 
        if echo "$line" | grep -E " (4[0-9]{2}|5[0-9]{2}) " > /dev/null; then
            echo "âš ï¸  æ£€æµ‹åˆ°é”™è¯¯: $(date '+%H:%M:%S')"
            echo "$line" | awk '{print "IP:", $1, "çŠ¶æ€ç :", $9, "è¯·æ±‚:", $7}'
        fi
        
        # æ£€æŸ¥å“åº”æ—¶é—´
        response_time=$(echo "$line" | awk '{print $NF}')
        if [[ "$response_time" > "5.0" ]]; then
            echo "ğŸŒ å“åº”æ—¶é—´è¿‡é•¿: ${response_time}ç§’"
        fi
    done
}
```

---

## 2. âš™ï¸ é…ç½®ç®¡ç†è„šæœ¬


### 2.1 æ‰¹é‡é…ç½®æ–‡ä»¶ç®¡ç†


**ğŸ“‹ å®é™…éœ€æ±‚**
å…¬å¸æœ‰100å°æœåŠ¡å™¨ï¼Œéœ€è¦æ‰¹é‡æ›´æ–°nginxé…ç½®ã€‚ä¼ ç»Ÿåšæ³•æ˜¯é€å°ç™»å½•ä¿®æ”¹ï¼Œå®¹æ˜“å‡ºé”™ä¸”æ•ˆç‡ä½ä¸‹ã€‚

**ğŸ¯ æ™ºèƒ½è§£å†³æ–¹æ¡ˆ**
ç”¨ä¸‰å‰‘å®¢å†™ä¸€ä¸ªé…ç½®ç®¡ç†è„šæœ¬ï¼Œä¸€æ¬¡æ“ä½œæå®šæ‰€æœ‰æœåŠ¡å™¨ã€‚

```bash
#!/bin/bash
# æ‰¹é‡é…ç½®ç®¡ç†å·¥å…·

CONFIG_TEMPLATE="/etc/nginx/nginx.conf"
BACKUP_DIR="/backup/$(date +%Y%m%d)"

# å¤‡ä»½ç°æœ‰é…ç½®
backup_config() {
    mkdir -p $BACKUP_DIR
    cp $CONFIG_TEMPLATE $BACKUP_DIR/nginx.conf.backup
    echo "âœ… é…ç½®å·²å¤‡ä»½åˆ°: $BACKUP_DIR"
}

# æ‰¹é‡æ›¿æ¢é…ç½®å‚æ•°
update_config() {
    local param=$1
    local old_value=$2  
    local new_value=$3
    
    # ä½¿ç”¨sedç²¾ç¡®æ›¿æ¢
    sed -i.bak "s/^[[:space:]]*${param}[[:space:]]\+${old_value};/${param} ${new_value};/" $CONFIG_TEMPLATE
    
    # éªŒè¯ä¿®æ”¹ç»“æœ
    if grep -q "${param} ${new_value}" $CONFIG_TEMPLATE; then
        echo "âœ… ${param} å·²æ›´æ–°: ${old_value} â†’ ${new_value}"
    else
        echo "âŒ ${param} æ›´æ–°å¤±è´¥"
        return 1
    fi
}

# é…ç½®éªŒè¯
validate_config() {
    nginx -t -c $CONFIG_TEMPLATE
    if [ $? -eq 0 ]; then
        echo "âœ… é…ç½®æ–‡ä»¶è¯­æ³•æ£€æŸ¥é€šè¿‡"
        return 0
    else
        echo "âŒ é…ç½®æ–‡ä»¶å­˜åœ¨è¯­æ³•é”™è¯¯"
        return 1
    fi
}
```

### 2.2 ç¯å¢ƒé…ç½®è¿ç§»


**ğŸ”„ åœºæ™¯æè¿°**
å¼€å‘ç¯å¢ƒçš„é…ç½®éœ€è¦è¿ç§»åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œä½†ä¸¤ä¸ªç¯å¢ƒçš„å‚æ•°ä¸åŒï¼ˆIPåœ°å€ã€ç«¯å£ã€æ•°æ®åº“è¿æ¥ç­‰ï¼‰ã€‚

**æ™ºèƒ½è¿ç§»è„šæœ¬**ï¼š
```bash
# ç¯å¢ƒé…ç½®è½¬æ¢å™¨
convert_environment() {
    local source_file=$1
    local env_type=$2  # dev/test/prod
    
    cp $source_file ${source_file}.${env_type}
    
    case $env_type in
        "prod")
            # ç”Ÿäº§ç¯å¢ƒé…ç½®
            sed -i 's/localhost/prod-db-server.company.com/g' ${source_file}.${env_type}
            sed -i 's/debug=true/debug=false/g' ${source_file}.${env_type}
            sed -i 's/port=3306/port=3307/g' ${source_file}.${env_type}
            ;;
        "test")
            # æµ‹è¯•ç¯å¢ƒé…ç½®
            sed -i 's/localhost/test-db.company.com/g' ${source_file}.${env_type}
            sed -i 's/debug=true/debug=false/g' ${source_file}.${env_type}
            awk '{gsub(/memory_limit=.*/, "memory_limit=2G"); print}' ${source_file}.${env_type} > temp && mv temp ${source_file}.${env_type}
            ;;
    esac
    
    echo "âœ… ${env_type}ç¯å¢ƒé…ç½®ç”Ÿæˆå®Œæˆ"
}
```

---

## 3. ğŸ“¦ æ•°æ®è¿ç§»æ–¹æ¡ˆ


### 3.1 æ•°æ®åº“è¿ç§»é¢„å¤„ç†


**ğŸ’¾ ä¸šåŠ¡èƒŒæ™¯**
å…¬å¸è¦ä»MySQLè¿ç§»åˆ°PostgreSQLï¼Œéœ€è¦å¤„ç†å‡ åGBçš„æ•°æ®ã€‚æ•°æ®æ ¼å¼ä¸å®Œå…¨å…¼å®¹ï¼Œéœ€è¦é¢„å¤„ç†ã€‚

**ğŸ”§ æ•°æ®æ¸…æ´—æµç¨‹**
```
åŸå§‹æ•°æ® â†’ grepç­›é€‰ â†’ sedæ¸…æ´— â†’ awkè½¬æ¢ â†’ ç›®æ ‡æ ¼å¼
```

**å®æ“æ­¥éª¤**ï¼š
```bash
# ç¬¬ä¸€æ­¥ï¼šæå–æœ‰æ•ˆæ•°æ®è¡Œ
grep -v "^#\|^--\|^$" mysql_dump.sql > clean_data.sql

# ç¬¬äºŒæ­¥ï¼šæ ¼å¼è½¬æ¢
sed -i 's/`//g' clean_data.sql                          # ç§»é™¤MySQLåå¼•å·
sed -i 's/AUTO_INCREMENT/SERIAL/g' clean_data.sql       # è½¬æ¢è‡ªå¢å­—æ®µ
sed -i 's/ENGINE=InnoDB.*;//;/g' clean_data.sql         # ç§»é™¤å¼•æ“å‚æ•°

# ç¬¬ä¸‰æ­¥ï¼šæ•°æ®ç±»å‹è½¬æ¢
awk '{
    gsub(/INT\([0-9]+\)/, "INTEGER")     # æ ‡å‡†åŒ–æ•´æ•°ç±»å‹
    gsub(/VARCHAR\(255\)/, "TEXT")       # è½¬æ¢å­—ç¬¦ä¸²ç±»å‹
    gsub(/DATETIME/, "TIMESTAMP")        # æ—¶é—´ç±»å‹è½¬æ¢
    print
}' clean_data.sql > postgresql_ready.sql
```

### 3.2 å¤§æ–‡ä»¶åˆ†å‰²å¤„ç†


**ğŸ“ å®é™…é—®é¢˜**
æœ‰ä¸ª50GBçš„æ•°æ®æ–‡ä»¶éœ€è¦è¿ç§»ï¼Œä½†ç½‘ç»œä¼ è¾“é™åˆ¶å•ä¸ªæ–‡ä»¶ä¸èƒ½è¶…è¿‡1GBã€‚

**åˆ†å‰²ç­–ç•¥**ï¼š
```bash
# æ™ºèƒ½åˆ†å‰²è„šæœ¬
split_large_file() {
    local source_file=$1
    local chunk_size=$2  # æ¯”å¦‚ 1000000 (100ä¸‡è¡Œ)
    
    # è®¡ç®—æ€»è¡Œæ•°
    total_lines=$(wc -l < $source_file)
    echo "ğŸ“Š æ€»è¡Œæ•°: $total_lines"
    
    # æŒ‰è¡Œæ•°åˆ†å‰²
    split -l $chunk_size $source_file "${source_file}_part_"
    
    # ä¸ºæ¯ä¸ªåˆ†å‰²æ–‡ä»¶æ·»åŠ å¤´ä¿¡æ¯
    header=$(head -1 $source_file)
    for part_file in ${source_file}_part_*; do
        # æ£€æŸ¥æ˜¯å¦éœ€è¦æ·»åŠ è¡¨å¤´
        if ! head -1 "$part_file" | grep -q "$(echo $header | cut -d',' -f1)"; then
            sed -i "1i\\$header" "$part_file"
        fi
        echo "âœ… å¤„ç†å®Œæˆ: $part_file"
    done
}
```

---

## 4. ğŸ”” ç›‘æ§æŠ¥è­¦é›†æˆ


### 4.1 ç³»ç»Ÿå¥åº·æ£€æŸ¥


**ğŸ’“ ç›‘æ§ç›®æ ‡**
å®æ—¶ç›‘æ§æœåŠ¡å™¨å…³é”®æŒ‡æ ‡ï¼šCPUä½¿ç”¨ç‡ã€å†…å­˜å ç”¨ã€ç£ç›˜ç©ºé—´ã€ç½‘ç»œè¿æ¥æ•°ç­‰ã€‚

**ç›‘æ§è„šæœ¬æ¶æ„**ï¼š
```
ç³»ç»Ÿæ•°æ®é‡‡é›† â†’ ä¸‰å‰‘å®¢åˆ†æ â†’ é˜ˆå€¼åˆ¤æ–­ â†’ æŠ¥è­¦é€šçŸ¥
```

```bash
#!/bin/bash
# ç³»ç»Ÿå¥åº·ç›‘æ§è„šæœ¬

# é…ç½®æŠ¥è­¦é˜ˆå€¼
CPU_THRESHOLD=80
MEMORY_THRESHOLD=85
DISK_THRESHOLD=90

# CPUä½¿ç”¨ç‡æ£€æŸ¥
check_cpu() {
    cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | sed 's/%us,//')
    cpu_num=$(echo $cpu_usage | sed 's/\..*//')
    
    if [ $cpu_num -gt $CPU_THRESHOLD ]; then
        echo "ğŸš¨ CPUè­¦å‘Š: ä½¿ç”¨ç‡${cpu_usage}% è¶…è¿‡é˜ˆå€¼${CPU_THRESHOLD}%"
        
        # æ‰¾å‡ºCPUå ç”¨æœ€é«˜çš„è¿›ç¨‹
        echo "ğŸ“ˆ CPUå ç”¨TOP5è¿›ç¨‹:"
        ps aux | awk '{print $11, $3}' | sort -k2 -nr | head -5
    fi
}

# å†…å­˜ä½¿ç”¨æ£€æŸ¥  
check_memory() {
    memory_info=$(free | grep Mem)
    total=$(echo $memory_info | awk '{print $2}')
    used=$(echo $memory_info | awk '{print $3}')
    
    memory_usage=$(awk "BEGIN {printf \"%.0f\", ($used/$total)*100}")
    
    if [ $memory_usage -gt $MEMORY_THRESHOLD ]; then
        echo "ğŸš¨ å†…å­˜è­¦å‘Š: ä½¿ç”¨ç‡${memory_usage}% è¶…è¿‡é˜ˆå€¼${MEMORY_THRESHOLD}%"
        
        # æ˜¾ç¤ºå†…å­˜å ç”¨è¯¦æƒ…
        echo "ğŸ“Š å†…å­˜ä½¿ç”¨è¯¦æƒ…:"
        free -h | grep -E "Mem|Swap"
    fi
}

# ç£ç›˜ç©ºé—´æ£€æŸ¥
check_disk() {
    df -h | grep -E "/$|/home|/var" | while read line; do
        usage=$(echo $line | awk '{print $5}' | sed 's/%//')
        mount_point=$(echo $line | awk '{print $6}')
        
        if [ $usage -gt $DISK_THRESHOLD ]; then
            echo "ğŸš¨ ç£ç›˜è­¦å‘Š: $mount_point ä½¿ç”¨ç‡${usage}% è¶…è¿‡é˜ˆå€¼${DISK_THRESHOLD}%"
            echo "ğŸ“ ç›®å½•å¤§å°TOP5:"
            du -h $mount_point/* 2>/dev/null | sort -hr | head -5
        fi
    done
}
```

### 4.2 åº”ç”¨æ€§èƒ½ç›‘æ§


**ğŸ“ˆ ä¸šåŠ¡ç›‘æ§**
ç›‘æ§åº”ç”¨å…³é”®æŒ‡æ ‡ï¼šå“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€å¹¶å‘è¿æ¥æ•°ã€ä¸šåŠ¡æˆåŠŸç‡ç­‰ã€‚

```bash
# åº”ç”¨æ€§èƒ½åˆ†æ
analyze_app_performance() {
    local log_file=$1
    local time_window=${2:-"1 hour ago"}  # é»˜è®¤åˆ†ææœ€è¿‘1å°æ—¶
    
    echo "ğŸ“Š åº”ç”¨æ€§èƒ½åˆ†ææŠ¥å‘Š - $(date)"
    echo "----------------------------------------"
    
    # è·å–æ—¶é—´çª—å£å†…çš„æ—¥å¿—
    since_time=$(date -d "$time_window" '+%d/%b/%Y:%H:%M:%S')
    recent_logs=$(awk -v start="$since_time" '$4 >= "["start {print}' $log_file)
    
    # å“åº”æ—¶é—´åˆ†æ
    echo "â±ï¸  å¹³å‡å“åº”æ—¶é—´:"
    echo "$recent_logs" | awk '{print $NF}' | awk '{sum+=$1; count++} END {
        if(count > 0) printf "å¹³å‡: %.2fç§’\n", sum/count
    }'
    
    # é”™è¯¯ç‡ç»Ÿè®¡
    echo "âŒ é”™è¯¯ç‡åˆ†æ:"
    total_requests=$(echo "$recent_logs" | wc -l)
    error_requests=$(echo "$recent_logs" | grep -cE " (4[0-9]{2}|5[0-9]{2}) ")
    
    if [ $total_requests -gt 0 ]; then
        error_rate=$(awk "BEGIN {printf \"%.2f\", ($error_requests/$total_requests)*100}")
        echo "æ€»è¯·æ±‚: $total_requests, é”™è¯¯: $error_requests, é”™è¯¯ç‡: ${error_rate}%"
    fi
    
    # çƒ­é—¨é¡µé¢ç»Ÿè®¡
    echo "ğŸ”¥ è®¿é—®é‡TOP10é¡µé¢:"
    echo "$recent_logs" | awk '{print $7}' | sort | uniq -c | sort -nr | head -10
}
```

---

## 5. ğŸ¤– è¿ç»´è‡ªåŠ¨åŒ–åº”ç”¨


### 5.1 æœåŠ¡ç®¡ç†è‡ªåŠ¨åŒ–


**ğŸ›ï¸ åº”ç”¨åœºæ™¯**
ç®¡ç†å¤šä¸ªæœåŠ¡çš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€ï¼Œè‡ªåŠ¨å¤„ç†å¼‚å¸¸æƒ…å†µã€‚

**æœåŠ¡ç®¡ç†æ¡†æ¶**ï¼š
```bash
#!/bin/bash
# æœåŠ¡ç®¡ç†è‡ªåŠ¨åŒ–è„šæœ¬

SERVICES_CONFIG="/etc/service_monitor.conf"
LOG_FILE="/var/log/service_monitor.log"

# æœåŠ¡é…ç½®ç¤ºä¾‹æ ¼å¼:
# service_name:port:health_check_url:restart_command

# è¯»å–æœåŠ¡é…ç½®
load_services() {
    if [ ! -f $SERVICES_CONFIG ]; then
        echo "âš ï¸  é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: $SERVICES_CONFIG"
        return 1
    fi
    
    # è·³è¿‡æ³¨é‡Šå’Œç©ºè¡Œ
    grep -v "^#\|^$" $SERVICES_CONFIG
}

# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
check_service_health() {
    local service_name=$1
    local port=$2
    local health_url=$3
    
    # æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
    if ! netstat -tuln | grep -q ":$port "; then
        echo "âŒ $service_name ç«¯å£ $port æœªç›‘å¬"
        return 1
    fi
    
    # æ£€æŸ¥HTTPå¥åº·æ£€æŸ¥
    if [ -n "$health_url" ]; then
        response=$(curl -s -w "%{http_code}" -o /dev/null "$health_url" --connect-timeout 5)
        if [ "$response" != "200" ]; then
            echo "âŒ $service_name å¥åº·æ£€æŸ¥å¤±è´¥ (HTTP $response)"
            return 1
        fi
    fi
    
    echo "âœ… $service_name è¿è¡Œæ­£å¸¸"
    return 0
}

# è‡ªåŠ¨é‡å¯æœåŠ¡
restart_service() {
    local service_name=$1
    local restart_cmd=$2
    
    echo "ğŸ”„ é‡å¯æœåŠ¡: $service_name"
    echo "$(date): é‡å¯ $service_name" >> $LOG_FILE
    
    eval $restart_cmd
    
    # ç­‰å¾…æœåŠ¡å¯åŠ¨
    sleep 10
    
    # éªŒè¯é‡å¯æ˜¯å¦æˆåŠŸ
    if check_service_health $service_name; then
        echo "âœ… $service_name é‡å¯æˆåŠŸ"
    else
        echo "âŒ $service_name é‡å¯å¤±è´¥ï¼Œéœ€è¦äººå·¥å¤„ç†"
        # è¿™é‡Œå¯ä»¥å‘é€ç´§æ€¥æŠ¥è­¦
    fi
}
```

### 5.2 è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬


**ğŸš€ éƒ¨ç½²åœºæ™¯**
æ–°ç‰ˆæœ¬ä»£ç éœ€è¦éƒ¨ç½²åˆ°å¤šå°æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬å¤‡ä»½æ—§ç‰ˆæœ¬ã€æ›´æ–°ä»£ç ã€é‡å¯æœåŠ¡ã€éªŒè¯éƒ¨ç½²ç»“æœç­‰æ­¥éª¤ã€‚

**éƒ¨ç½²æµç¨‹å›¾**ï¼š
```
ä»£ç æ‰“åŒ… â†’ å¤‡ä»½æ—§ç‰ˆæœ¬ â†’ åœæ­¢æœåŠ¡ â†’ éƒ¨ç½²æ–°ç‰ˆæœ¬ â†’ å¯åŠ¨æœåŠ¡ â†’ å¥åº·æ£€æŸ¥ â†’ å›æ»šæœºåˆ¶
```

```bash
# è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
deploy_application() {
    local app_name=$1
    local version=$2
    local deploy_path="/opt/$app_name"
    local backup_path="/backup/$app_name/$(date +%Y%m%d_%H%M%S)"
    
    echo "ğŸš€ å¼€å§‹éƒ¨ç½² $app_name v$version"
    
    # Step 1: åˆ›å»ºå¤‡ä»½
    echo "ğŸ“¦ å¤‡ä»½å½“å‰ç‰ˆæœ¬..."
    mkdir -p $backup_path
    cp -r $deploy_path/* $backup_path/
    
    # Step 2: åœæ­¢æœåŠ¡
    echo "â¹ï¸  åœæ­¢åº”ç”¨æœåŠ¡..."
    systemctl stop $app_name
    
    # Step 3: éƒ¨ç½²æ–°ç‰ˆæœ¬
    echo "ğŸ“¥ éƒ¨ç½²æ–°ç‰ˆæœ¬..."
    tar -xzf ${app_name}-${version}.tar.gz -C $deploy_path
    
    # Step 4: æ›´æ–°é…ç½®æ–‡ä»¶
    echo "âš™ï¸  æ›´æ–°é…ç½®..."
    sed -i "s/version=.*/version=$version/" $deploy_path/config/app.conf
    
    # Step 5: å¯åŠ¨æœåŠ¡
    echo "â–¶ï¸  å¯åŠ¨åº”ç”¨æœåŠ¡..."
    systemctl start $app_name
    
    # Step 6: å¥åº·æ£€æŸ¥
    echo "ğŸ” æ‰§è¡Œå¥åº·æ£€æŸ¥..."
    sleep 15
    
    if curl -f http://localhost:8080/health > /dev/null 2>&1; then
        echo "âœ… éƒ¨ç½²æˆåŠŸï¼ç‰ˆæœ¬ $version è¿è¡Œæ­£å¸¸"
        # æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™æœ€è¿‘5ä¸ªç‰ˆæœ¬ï¼‰
        ls -dt $backup_path/../* | tail -n +6 | xargs rm -rf
    else
        echo "âŒ å¥åº·æ£€æŸ¥å¤±è´¥ï¼Œæ‰§è¡Œå›æ»š..."
        rollback_deployment $app_name $backup_path
    fi
}

# å›æ»šå‡½æ•°
rollback_deployment() {
    local app_name=$1
    local backup_path=$2
    
    echo "ğŸ”„ å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬..."
    systemctl stop $app_name
    rm -rf $deploy_path/*
    cp -r $backup_path/* $deploy_path/
    systemctl start $app_name
    
    echo "âœ… å›æ»šå®Œæˆ"
}
```

---

## 6. ğŸ”§ æ•…éšœå¤„ç†æµç¨‹


### 6.1 åº”ç”¨æ•…éšœå¿«é€Ÿå®šä½


**ğŸš¨ æ•…éšœåœºæ™¯**
å‡Œæ™¨3ç‚¹ï¼Œç›‘æ§ç³»ç»ŸæŠ¥è­¦ï¼šç½‘ç«™å“åº”ç¼“æ…¢ï¼Œç”¨æˆ·æ— æ³•æ­£å¸¸è®¿é—®ã€‚éœ€è¦å¿«é€Ÿå®šä½é—®é¢˜æ ¹æºã€‚

**æ•…éšœå®šä½ä¸‰æ­¥æ³•**ï¼š
```
æ”¶é›†ä¿¡æ¯ â†’ åˆ†ææ•°æ® â†’ å®šä½æ ¹å› 
```

**æ•…éšœè¯Šæ–­è„šæœ¬**ï¼š
```bash
#!/bin/bash
# åº”ç”¨æ•…éšœå¿«é€Ÿè¯Šæ–­å·¥å…·

DIAGNOSIS_REPORT="/tmp/diagnosis_$(date +%Y%m%d_%H%M%S).txt"

# ç³»ç»ŸåŸºç¡€ä¿¡æ¯æ”¶é›†
collect_system_info() {
    echo "ğŸ” æ”¶é›†ç³»ç»Ÿä¿¡æ¯..." | tee -a $DIAGNOSIS_REPORT
    echo "========================================" >> $DIAGNOSIS_REPORT
    
    # ç³»ç»Ÿè´Ÿè½½
    echo "ğŸ“Š ç³»ç»Ÿè´Ÿè½½:" >> $DIAGNOSIS_REPORT
    uptime >> $DIAGNOSIS_REPORT
    
    # å†…å­˜ä½¿ç”¨
    echo -e "\nğŸ’¾ å†…å­˜ä½¿ç”¨:" >> $DIAGNOSIS_REPORT
    free -h >> $DIAGNOSIS_REPORT
    
    # ç£ç›˜ä½¿ç”¨
    echo -e "\nğŸ’½ ç£ç›˜ä½¿ç”¨:" >> $DIAGNOSIS_REPORT
    df -h >> $DIAGNOSIS_REPORT
    
    # ç½‘ç»œè¿æ¥
    echo -e "\nğŸŒ ç½‘ç»œè¿æ¥ç»Ÿè®¡:" >> $DIAGNOSIS_REPORT
    netstat -tuln | grep LISTEN | wc -l >> $DIAGNOSIS_REPORT
}

# åº”ç”¨æ—¥å¿—åˆ†æ
analyze_application_logs() {
    local app_log="/var/log/app/error.log"
    local time_range="10 minutes ago"
    
    echo -e "\nğŸ” åˆ†æåº”ç”¨æ—¥å¿—..." | tee -a $DIAGNOSIS_REPORT
    echo "========================================" >> $DIAGNOSIS_REPORT
    
    # æœ€è¿‘çš„é”™è¯¯ä¿¡æ¯
    echo "âš ï¸  æœ€è¿‘10åˆ†é’Ÿé”™è¯¯ä¿¡æ¯:" >> $DIAGNOSIS_REPORT
    since_time=$(date -d "$time_range" '+%Y-%m-%d %H:%M:%S')
    
    if [ -f "$app_log" ]; then
        awk -v start="$since_time" '$0 >= start {print}' $app_log | 
        grep -i "error\|exception\|fatal" | 
        tail -20 >> $DIAGNOSIS_REPORT
    fi
    
    # é”™è¯¯ç»Ÿè®¡
    echo -e "\nğŸ“ˆ é”™è¯¯ç±»å‹ç»Ÿè®¡:" >> $DIAGNOSIS_REPORT
    grep -i "error\|exception" $app_log | 
    awk '{print $3}' | 
    sort | uniq -c | sort -nr | head -10 >> $DIAGNOSIS_REPORT
}

# æ•°æ®åº“è¿æ¥æ£€æŸ¥
check_database_health() {
    echo -e "\nğŸ—ƒï¸  æ•°æ®åº“å¥åº·æ£€æŸ¥..." | tee -a $DIAGNOSIS_REPORT
    echo "========================================" >> $DIAGNOSIS_REPORT
    
    # æ•°æ®åº“è¿æ¥æ•°
    db_connections=$(mysql -e "show processlist;" | wc -l)
    echo "æ•°æ®åº“è¿æ¥æ•°: $db_connections" >> $DIAGNOSIS_REPORT
    
    # æ…¢æŸ¥è¯¢æ£€æŸ¥
    echo "ğŸŒ æœ€è¿‘çš„æ…¢æŸ¥è¯¢:" >> $DIAGNOSIS_REPORT
    tail -20 /var/log/mysql/slow.log >> $DIAGNOSIS_REPORT
}

# ç”Ÿæˆæ•…éšœæŠ¥å‘Š
generate_fault_report() {
    collect_system_info
    analyze_application_logs
    check_database_health
    
    echo "âœ… æ•…éšœè¯Šæ–­å®Œæˆï¼ŒæŠ¥å‘Šä¿å­˜è‡³: $DIAGNOSIS_REPORT"
    echo "ğŸ“§ å‘é€æŠ¥å‘Šç»™è¿ç»´å›¢é˜Ÿ..."
    
    # æå–å…³é”®ä¿¡æ¯ç»™å‡ºå»ºè®®
    echo -e "\nğŸ’¡ åˆæ­¥å»ºè®®:" >> $DIAGNOSIS_REPORT
    
    # å†…å­˜ä½¿ç”¨ç‡æ£€æŸ¥
    mem_usage=$(free | grep Mem | awk '{printf "%.0f", ($3/$2)*100}')
    if [ $mem_usage -gt 90 ]; then
        echo "- å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜($mem_usage%)ï¼Œå»ºè®®é‡å¯åº”ç”¨æˆ–å¢åŠ å†…å­˜" >> $DIAGNOSIS_REPORT
    fi
    
    # ç£ç›˜ç©ºé—´æ£€æŸ¥
    disk_usage=$(df / | grep -v Filesystem | awk '{print $5}' | sed 's/%//')
    if [ $disk_usage -gt 85 ]; then
        echo "- ç£ç›˜ç©ºé—´ä¸è¶³($disk_usage%)ï¼Œå»ºè®®æ¸…ç†æ—¥å¿—æ–‡ä»¶" >> $DIAGNOSIS_REPORT
    fi
}
```

### 6.2 æ€§èƒ½é—®é¢˜æ’æŸ¥


**ğŸ“ˆ æ€§èƒ½ç“¶é¢ˆå®šä½**
åº”ç”¨å“åº”æ—¶é—´çªç„¶å˜æ…¢ï¼Œéœ€è¦æ‰¾å‡ºæ˜¯å“ªä¸ªç¯èŠ‚å‡ºç°äº†ç“¶é¢ˆã€‚

**æ€§èƒ½åˆ†æå·¥å…·**ï¼š
```bash
# æ€§èƒ½é—®é¢˜æ·±åº¦åˆ†æ
performance_analysis() {
    echo "ğŸ”¬ å¼€å§‹æ€§èƒ½åˆ†æ..."
    
    # WebæœåŠ¡å™¨æ€§èƒ½
    echo "ğŸŒ WebæœåŠ¡å™¨åˆ†æ:"
    nginx_log="/var/log/nginx/access.log"
    
    # åˆ†æå“åº”æ—¶é—´åˆ†å¸ƒ
    tail -1000 $nginx_log | 
    awk '$NF > 1 {slow++; total++; sum+=$NF} 
         $NF <= 1 {fast++; total++; sum+=$NF} 
         END {
             print "æ€»è¯·æ±‚:", total
             print "å¿«é€Ÿå“åº”(<1s):", fast, "(" fast/total*100 "%)"
             print "æ…¢é€Ÿå“åº”(>1s):", slow, "(" slow/total*100 "%)"
             print "å¹³å‡å“åº”æ—¶é—´:", sum/total "ç§’"
         }'
    
    # æ‰¾å‡ºæœ€æ…¢çš„è¯·æ±‚
    echo -e "\nğŸŒ æœ€æ…¢çš„10ä¸ªè¯·æ±‚:"
    tail -1000 $nginx_log | 
    sort -k12 -nr | 
    head -10 | 
    awk '{print "å“åº”æ—¶é—´:", $12"s", "è¯·æ±‚:", $7}'
    
    # æ•°æ®åº“æ€§èƒ½
    echo -e "\nğŸ—ƒï¸  æ•°æ®åº“æ€§èƒ½åˆ†æ:"
    mysql -e "
    SELECT 
        ROUND(AVG(query_time), 2) as avg_time,
        COUNT(*) as query_count,
        sql_text 
    FROM mysql.slow_log 
    WHERE start_time >= DATE_SUB(NOW(), INTERVAL 1 HOUR)
    GROUP BY sql_text 
    ORDER BY avg_time DESC 
    LIMIT 5;" 2>/dev/null | head -10
}
```

---

## 7. ğŸ¢ ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ


### 7.1 å¤šæœåŠ¡å™¨é›†ç¾¤ç®¡ç†


**ğŸ¯ ä¼ä¸šåœºæ™¯**
ç®¡ç†100å°æœåŠ¡å™¨çš„é›†ç¾¤ï¼Œéœ€è¦ç»Ÿä¸€é…ç½®ç®¡ç†ã€æ‰¹é‡æ“ä½œã€çŠ¶æ€ç›‘æ§ç­‰åŠŸèƒ½ã€‚

**é›†ç¾¤ç®¡ç†æ¶æ„**ï¼š
```
ç®¡ç†èŠ‚ç‚¹ â†’ é…ç½®åˆ†å‘ â†’ æ‰¹é‡æ‰§è¡Œ â†’ ç»“æœæ±‡æ€» â†’ çŠ¶æ€ç›‘æ§
    â†“           â†“           â†“          â†“          â†“
è„šæœ¬ä»“åº“    é…ç½®æ¨¡æ¿    å‘½ä»¤é˜Ÿåˆ—    æ‰§è¡Œæ—¥å¿—    ç›‘æ§é¢æ¿
```

```bash
#!/bin/bash
# ä¼ä¸šçº§é›†ç¾¤ç®¡ç†å·¥å…·

CLUSTER_CONFIG="/etc/cluster/nodes.conf"
OPERATION_LOG="/var/log/cluster_ops.log"

# é›†ç¾¤èŠ‚ç‚¹åˆ—è¡¨ï¼ˆæ ¼å¼ï¼šhostname:ip:role:statusï¼‰
load_cluster_nodes() {
    if [ ! -f $CLUSTER_CONFIG ]; then
        echo "âŒ é›†ç¾¤é…ç½®æ–‡ä»¶ä¸å­˜åœ¨"
        return 1
    fi
    
    # è¿‡æ»¤æ´»è·ƒèŠ‚ç‚¹
    grep -v "^#" $CLUSTER_CONFIG | grep ":active$"
}

# æ‰¹é‡æ‰§è¡Œå‘½ä»¤
cluster_execute() {
    local command=$1
    local node_filter=${2:-"all"}  # all/web/db/cache
    
    echo "ğŸš€ åœ¨é›†ç¾¤ä¸­æ‰§è¡Œå‘½ä»¤: $command"
    echo "ğŸ“ ç­›é€‰æ¡ä»¶: $node_filter"
    
    # æ ¹æ®è§’è‰²ç­›é€‰èŠ‚ç‚¹
    nodes=$(load_cluster_nodes | 
        if [ "$node_filter" != "all" ]; then
            grep ":$node_filter:"
        else
            cat
        fi)
    
    # å¹¶è¡Œæ‰§è¡Œ
    echo "$nodes" | while IFS=: read hostname ip role status; do
        {
            echo "ğŸ“¡ æ‰§è¡ŒèŠ‚ç‚¹: $hostname ($ip)"
            result=$(ssh -o ConnectTimeout=5 root@$ip "$command" 2>&1)
            
            if [ $? -eq 0 ]; then
                echo "âœ… $hostname: æˆåŠŸ"
                echo "$result" | sed "s/^/$hostname: /"
            else
                echo "âŒ $hostname: å¤±è´¥"
                echo "é”™è¯¯ä¿¡æ¯: $result"
            fi
            
            # è®°å½•æ—¥å¿—
            echo "$(date): $hostname - $command - $?" >> $OPERATION_LOG
        } &
        
        # æ§åˆ¶å¹¶å‘æ•°ï¼Œæ¯æ¬¡æœ€å¤š10ä¸ª
        (( $(jobs -r | wc -l) >= 10 )) && wait
    done
    
    wait  # ç­‰å¾…æ‰€æœ‰åå°ä»»åŠ¡å®Œæˆ
}

# é›†ç¾¤å¥åº·æ£€æŸ¥
cluster_health_check() {
    echo "ğŸ” é›†ç¾¤å¥åº·æ£€æŸ¥æŠ¥å‘Š"
    echo "=============================="
    
    local total_nodes=0
    local healthy_nodes=0
    local unhealthy_nodes=0
    
    load_cluster_nodes | while IFS=: read hostname ip role status; do
        total_nodes=$((total_nodes + 1))
        
        # æ£€æŸ¥èŠ‚ç‚¹å¯è¾¾æ€§
        if ping -c 1 -W 1 $ip > /dev/null 2>&1; then
            # æ£€æŸ¥å…³é”®æœåŠ¡
            case $role in
                "web")
                    service_check="systemctl is-active nginx"
                    ;;
                "db") 
                    service_check="systemctl is-active mysql"
                    ;;
                "cache")
                    service_check="systemctl is-active redis"
                    ;;
                *)
                    service_check="uptime"
                    ;;
            esac
            
            if ssh -o ConnectTimeout=3 root@$ip "$service_check" > /dev/null 2>&1; then
                echo "âœ… $hostname ($role): å¥åº·"
                healthy_nodes=$((healthy_nodes + 1))
            else
                echo "âš ï¸  $hostname ($role): æœåŠ¡å¼‚å¸¸"
                unhealthy_nodes=$((unhealthy_nodes + 1))
            fi
        else
            echo "âŒ $hostname ($role): ç½‘ç»œä¸å¯è¾¾"
            unhealthy_nodes=$((unhealthy_nodes + 1))
        fi
    done
    
    echo "=============================="
    echo "ğŸ“Š ç»Ÿè®¡ç»“æœ:"
    echo "æ€»èŠ‚ç‚¹æ•°: $total_nodes"
    echo "å¥åº·èŠ‚ç‚¹: $healthy_nodes"  
    echo "å¼‚å¸¸èŠ‚ç‚¹: $unhealthy_nodes"
    echo "å¥åº·ç‡: $(( healthy_nodes * 100 / total_nodes ))%"
}
```

### 7.2 è‡ªåŠ¨åŒ–è¿ç»´å¹³å°


**ğŸ”§ å¹³å°åŠŸèƒ½**
æ„å»ºä¸€ä¸ªWebç•Œé¢çš„è¿ç»´å¹³å°ï¼Œæ•´åˆæ‰€æœ‰ä¸‰å‰‘å®¢è„šæœ¬ï¼Œæä¾›ç»Ÿä¸€çš„æ“ä½œå…¥å£ã€‚

**å¹³å°æ¶æ„è®¾è®¡**ï¼š
```
Webç•Œé¢ â†’ APIæ¥å£ â†’ è„šæœ¬æ‰§è¡Œå™¨ â†’ ä¸‰å‰‘å®¢è„šæœ¬ â†’ ç³»ç»Ÿæ“ä½œ
    â†“        â†“         â†“           â†“         â†“
ç”¨æˆ·æ“ä½œ  å‚æ•°éªŒè¯   ä»»åŠ¡é˜Ÿåˆ—     æ—¥å¿—è®°å½•   ç»“æœè¿”å›
```

```bash
#!/bin/bash
# è¿ç»´å¹³å°åç«¯æ¥å£

PLATFORM_ROOT="/opt/ops_platform"
SCRIPTS_DIR="$PLATFORM_ROOT/scripts"
LOGS_DIR="$PLATFORM_ROOT/logs"
TASKS_DIR="$PLATFORM_ROOT/tasks"

# APIæ¥å£è·¯ç”±
handle_api_request() {
    local action=$1
    local params="$2"
    local request_id=$(date +%s)
    
    case $action in
        "system_info")
            get_system_info > "$LOGS_DIR/system_info_$request_id.json"
            ;;
        "log_analysis")
            analyze_logs "$params" > "$LOGS_DIR/log_analysis_$request_id.json"
            ;;
        "cluster_status")
            cluster_health_check > "$LOGS_DIR/cluster_status_$request_id.json"
            ;;
        "deploy_app")
            deploy_application "$params" > "$LOGS_DIR/deploy_$request_id.log"
            ;;
        *)
            echo "âŒ æœªçŸ¥æ“ä½œ: $action"
            return 1
            ;;
    esac
    
    echo "âœ… ä»»åŠ¡å®Œæˆï¼Œç»“æœID: $request_id"
}

# ç³»ç»Ÿä¿¡æ¯æ”¶é›†ï¼ˆJSONæ ¼å¼è¾“å‡ºï¼‰
get_system_info() {
    cat << EOF
{
    "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
    "hostname": "$(hostname)",
    "uptime": "$(uptime | awk '{print $3" "$4}' | sed 's/,//')",
    "load_average": $(uptime | awk -F'load average:' '{print $2}' | sed 's/^ //'),
    "memory": {
        $(free | grep Mem | awk '{printf "\"total\":%s,\"used\":%s,\"free\":%s", $2, $3, $4}')
    },
    "disk_usage": [
        $(df -h | grep -E "/$|/home" | awk '{printf "{\"mount\":\"%s\",\"usage\":\"%s\"},", $6, $5}' | sed 's/,$//')
    ]
}
EOF
}

# æ—¥å¿—åˆ†ææ¥å£
analyze_logs() {
    local log_type=$1
    local time_range=${2:-"1 hour"}
    
    case $log_type in
        "nginx")
            analyze_nginx_logs "$time_range"
            ;;
        "application")
            analyze_app_logs "$time_range"
            ;;
        *)
            echo "âŒ ä¸æ”¯æŒçš„æ—¥å¿—ç±»å‹: $log_type"
            ;;
    esac
}
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 ç”Ÿäº§ç¯å¢ƒåº”ç”¨åŸåˆ™


**ğŸ”¸ å¯é æ€§ä¼˜å…ˆ**
```
é”™è¯¯å¤„ç†ï¼šæ¯ä¸ªè„šæœ¬éƒ½è¦æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
å¤‡ä»½æœºåˆ¶ï¼šé‡è¦æ“ä½œå‰å¿…é¡»å¤‡ä»½
å›æ»šæ–¹æ¡ˆï¼šéƒ¨ç½²å¤±è´¥æ—¶è¦èƒ½å¿«é€Ÿå›æ»š
æ—¥å¿—è®°å½•ï¼šæ‰€æœ‰æ“ä½œéƒ½è¦è®°å½•è¯¦ç»†æ—¥å¿—
```

**ğŸ”¸ å®‰å…¨æ€§ä¿éšœ**
```
æƒé™æ§åˆ¶ï¼šè„šæœ¬æ‰§è¡Œæƒé™è¦ä¸¥æ ¼æ§åˆ¶
å‚æ•°éªŒè¯ï¼šè¾“å…¥å‚æ•°å¿…é¡»éªŒè¯åˆæ³•æ€§
æ•æ„Ÿä¿¡æ¯ï¼šå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯è¦åŠ å¯†å­˜å‚¨
æ“ä½œå®¡è®¡ï¼šå…³é”®æ“ä½œè¦æœ‰å®¡è®¡æ—¥å¿—
```

**ğŸ”¸ æ€§èƒ½ä¸æ•ˆç‡**
```
å¹¶å‘å¤„ç†ï¼šæ‰¹é‡æ“ä½œè¦è€ƒè™‘å¹¶å‘æ§åˆ¶
èµ„æºå ç”¨ï¼šé¿å…è„šæœ¬å ç”¨è¿‡å¤šç³»ç»Ÿèµ„æº
ç¼“å­˜æœºåˆ¶ï¼šé¢‘ç¹æŸ¥è¯¢çš„æ•°æ®è¦ç¼“å­˜
å®šæ—¶ä»»åŠ¡ï¼šæ—¥å¸¸è¿ç»´ä»»åŠ¡è¦è‡ªåŠ¨åŒ–
```

### 8.2 ä¸‰å‰‘å®¢ååŒä½¿ç”¨æ¨¡å¼


| åœºæ™¯ç±»å‹ | **grepä½œç”¨** | **sedä½œç”¨** | **awkä½œç”¨** |
|---------|------------|-----------|-----------|
| ğŸ“Š **æ—¥å¿—åˆ†æ** | `ç­›é€‰å…³é”®ä¿¡æ¯` | `æ¸…ç†æ ¼å¼` | `ç»Ÿè®¡åˆ†æ` |
| âš™ï¸ **é…ç½®ç®¡ç†** | `æŸ¥æ‰¾é…ç½®é¡¹` | `æ‰¹é‡æ›¿æ¢` | `æ ¼å¼è½¬æ¢` |
| ğŸ“¦ **æ•°æ®è¿ç§»** | `è¿‡æ»¤æ— æ•ˆæ•°æ®` | `æ ¼å¼æ ‡å‡†åŒ–` | `æ•°æ®è½¬æ¢` |
| ğŸ”” **ç›‘æ§æŠ¥è­¦** | `åŒ¹é…å‘Šè­¦æ¡ä»¶` | `æå–å…³é”®ä¿¡æ¯` | `è®¡ç®—æŒ‡æ ‡` |
| ğŸ¤– **è‡ªåŠ¨è¿ç»´** | `çŠ¶æ€æ£€æŸ¥` | `é…ç½®æ›´æ–°` | `ç»“æœæ±‡æ€»` |

### 8.3 å®æˆ˜ç»éªŒæ€»ç»“


**ğŸ’¡ æœ€ä½³å®è·µ**
```
è„šæœ¬æ¨¡å—åŒ–ï¼šå°†å¤æ‚è„šæœ¬æ‹†åˆ†æˆå°æ¨¡å—ï¼Œä¾¿äºç»´æŠ¤
å‚æ•°åŒ–é…ç½®ï¼šå…³é”®å‚æ•°è¦å¤–éƒ¨åŒ–ï¼Œä¾¿äºä¸åŒç¯å¢ƒä½¿ç”¨
æ ‡å‡†åŒ–è¾“å‡ºï¼šç»Ÿä¸€æ—¥å¿—æ ¼å¼å’Œé”™è¯¯ç ï¼Œä¾¿äºç›‘æ§
æ–‡æ¡£å®Œå–„ï¼šæ¯ä¸ªè„šæœ¬éƒ½è¦æœ‰ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
```

**âš ï¸ å¸¸è§é™·é˜±**
```
æ–‡ä»¶æƒé™ï¼šæ³¨æ„è„šæœ¬çš„æ‰§è¡Œæƒé™å’Œæ–‡ä»¶è®¿é—®æƒé™
ç‰¹æ®Šå­—ç¬¦ï¼šå¤„ç†åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æ•°æ®æ—¶è¦è½¬ä¹‰
å†…å­˜å ç”¨ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶è¦æ³¨æ„å†…å­˜ä½¿ç”¨
å¹¶å‘æ§åˆ¶ï¼šé¿å…å¤šä¸ªè„šæœ¬åŒæ—¶æ“ä½œåŒä¸€èµ„æº
```

**ğŸ”§ è°ƒè¯•æŠ€å·§**
```
set -xï¼šå¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œæ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹
teeå‘½ä»¤ï¼šåŒæ—¶è¾“å‡ºåˆ°å±å¹•å’Œæ–‡ä»¶
trapæœºåˆ¶ï¼šæ•è·è„šæœ¬å¼‚å¸¸é€€å‡º
åˆ†æ­¥éªŒè¯ï¼šå¤æ‚è„šæœ¬è¦åˆ†æ­¥éª¤éªŒè¯ç»“æœ
```

### 8.4 æ ¸å¿ƒè®°å¿†å£è¯€


**ä¸‰å‰‘å®¢ç”Ÿäº§ç¯å¢ƒå£è¯€**ï¼š
```
grepç­›é€‰å®šæ–¹å‘ï¼Œsedæ›¿æ¢æ”¹æ ¼å¼
awkç»Ÿè®¡åšåˆ†æï¼Œç®¡é“ä¸²è”æ•ˆç‡é«˜
é”™è¯¯å¤„ç†è¦å®Œå–„ï¼Œæ—¥å¿—è®°å½•ä¸èƒ½å°‘
æƒé™å®‰å…¨æ˜¯åŸºç¡€ï¼Œå¤‡ä»½å›æ»šä¿å¹³å®‰
```

**å®æˆ˜åº”ç”¨ä¸‰è¦ç´ **ï¼š
- **å‡†ç¡®æ€§**ï¼šç»“æœå¿…é¡»å‡†ç¡®å¯é 
- **æ•ˆç‡æ€§**ï¼šå¤„ç†é€Ÿåº¦è¦æ»¡è¶³ä¸šåŠ¡éœ€æ±‚  
- **ç¨³å®šæ€§**ï¼šé•¿æœŸè¿è¡Œè¦ç¨³å®šå¯é 

**è¿ç»´è‡ªåŠ¨åŒ–å››åŸåˆ™**ï¼š
- **æ ‡å‡†åŒ–**ï¼šæ“ä½œæµç¨‹è¦æ ‡å‡†åŒ–
- **è‡ªåŠ¨åŒ–**ï¼šé‡å¤å·¥ä½œè¦è‡ªåŠ¨åŒ–
- **å¯è§†åŒ–**ï¼šè¿ç»´çŠ¶æ€è¦å¯è§†åŒ–
- **æ™ºèƒ½åŒ–**ï¼šå‘Šè­¦å¤„ç†è¦æ™ºèƒ½åŒ–