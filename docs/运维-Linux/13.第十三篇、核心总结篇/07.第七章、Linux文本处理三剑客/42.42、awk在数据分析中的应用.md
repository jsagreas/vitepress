---
title: 42ã€awkåœ¨æ•°æ®åˆ†æä¸­çš„åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [awkæ•°æ®åˆ†æåŸºç¡€æ¦‚å¿µ](#1-awkæ•°æ®åˆ†æåŸºç¡€æ¦‚å¿µ)
2. [æ—¥å¿—åˆ†ææŠ€æœ¯è¯¦è§£](#2-æ—¥å¿—åˆ†ææŠ€æœ¯è¯¦è§£)
3. [CSVæ–‡ä»¶å¤„ç†ä¸“é¢˜](#3-CSVæ–‡ä»¶å¤„ç†ä¸“é¢˜)
4. [æ•°æ®ç»Ÿè®¡åˆ†æå®æˆ˜](#4-æ•°æ®ç»Ÿè®¡åˆ†æå®æˆ˜)
5. [æŠ¥è¡¨ç”ŸæˆæŠ€æœ¯](#5-æŠ¥è¡¨ç”ŸæˆæŠ€æœ¯)
6. [æ•°æ®è¿‡æ»¤æ¸…æ´—æ–¹æ³•](#6-æ•°æ®è¿‡æ»¤æ¸…æ´—æ–¹æ³•)
7. [æ ¼å¼è½¬æ¢å®ç”¨æŠ€å·§](#7-æ ¼å¼è½¬æ¢å®ç”¨æŠ€å·§)
8. [ä¸šåŠ¡æ•°æ®åˆ†ææ¡ˆä¾‹](#8-ä¸šåŠ¡æ•°æ®åˆ†ææ¡ˆä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ awkæ•°æ®åˆ†æåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯awkæ•°æ®åˆ†æ


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
awkåœ¨æ•°æ®åˆ†æä¸­å°±åƒä¸€ä¸ª**æ™ºèƒ½çš„æ•°æ®å¤„ç†åŠ©æ‰‹**ï¼Œå®ƒèƒ½å¸®ä½ å¿«é€Ÿå¤„ç†å„ç§æ–‡æœ¬æ ¼å¼çš„æ•°æ®æ–‡ä»¶ã€‚

```
ç®€å•ç†è§£ï¼š
å°±åƒExcelèƒ½å¤„ç†è¡¨æ ¼æ•°æ®ä¸€æ ·ï¼Œawkèƒ½å¤„ç†æ–‡æœ¬æ•°æ®
ä½†æ˜¯awkæ›´é€‚åˆå¤„ç†å¤§æ–‡ä»¶å’Œæ‰¹é‡æ“ä½œ
```

**ğŸ’¡ awkæ•°æ®åˆ†æçš„æœ¬è´¨**
- **è‡ªåŠ¨åˆ†å‰²**ï¼šæŠŠæ¯è¡Œæ•°æ®æŒ‰åˆ†éš”ç¬¦åˆ†æˆå­—æ®µ
- **é€è¡Œå¤„ç†**ï¼šä¸€è¡Œä¸€è¡Œåœ°å¤„ç†æ•°æ®ï¼Œå†…å­˜å ç”¨å°
- **æ¨¡å¼åŒ¹é…**ï¼šåªå¤„ç†ç¬¦åˆæ¡ä»¶çš„æ•°æ®è¡Œ
- **è®¡ç®—ç»Ÿè®¡**ï¼šèƒ½è¿›è¡Œå„ç§æ•°å­¦è¿ç®—å’Œç»Ÿè®¡åˆ†æ

### 1.2 ä¸ºä»€ä¹ˆç”¨awkåšæ•°æ®åˆ†æ


**ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿å¯¹æ¯”**

| å¤„ç†æ–¹å¼ | **æ–‡ä»¶å¤§å°é™åˆ¶** | **å¤„ç†é€Ÿåº¦** | **å­¦ä¹ æˆæœ¬** | **é€‚ç”¨åœºæ™¯** |
|---------|---------------|------------|-------------|------------|
| ğŸ“Š **Excel** | `å°æ–‡ä»¶(<1GB)` | `è¾ƒæ…¢` | `å¾ˆä½` | `å°æ•°æ®é‡ï¼Œå›¾å½¢åŒ–` |
| ğŸ **Python** | `å†…å­˜é™åˆ¶` | `ä¸­ç­‰` | `é«˜` | `å¤æ‚åˆ†æï¼Œæœºå™¨å­¦ä¹ ` |
| âš¡ **awk** | `æ— é™åˆ¶` | `å¾ˆå¿«` | `ä¸­ç­‰` | `å¤§æ–‡ä»¶ï¼Œå¿«é€Ÿç»Ÿè®¡` |

**ğŸ”¸ ä»€ä¹ˆæ—¶å€™é€‰æ‹©awk**
```
âœ… æ–‡ä»¶å¾ˆå¤§ï¼ˆå‡ GBç”šè‡³æ›´å¤§ï¼‰
âœ… éœ€è¦å¿«é€Ÿç»Ÿè®¡åˆ†æ
âœ… æ•°æ®æ ¼å¼ç›¸å¯¹ç®€å•ï¼ˆCSVã€æ—¥å¿—ç­‰ï¼‰
âœ… ä¸éœ€è¦å¤æ‚çš„å›¾è¡¨å±•ç¤º
âœ… è¦åœ¨æœåŠ¡å™¨ä¸Šè‡ªåŠ¨åŒ–å¤„ç†
```

### 1.3 awkæ•°æ®åˆ†æçš„å·¥ä½œæµç¨‹


**ğŸ“‹ å…¸å‹å¤„ç†æµç¨‹**
```
åŸå§‹æ•°æ® â†’ æ•°æ®æ¸…æ´— â†’ ç»Ÿè®¡åˆ†æ â†’ ç»“æœè¾“å‡º
    â†“         â†“         â†“         â†“
  è¯»å–æ–‡ä»¶   è¿‡æ»¤æ— æ•ˆ   è®¡ç®—æŒ‡æ ‡   ç”ŸæˆæŠ¥è¡¨
```

**ğŸ”„ å…·ä½“æ“ä½œæ­¥éª¤**
```
æ­¥éª¤1ï¼šæ•°æ®è¯»å– â†’ æŒ‡å®šåˆ†éš”ç¬¦ï¼Œè¯»å–å­—æ®µ
æ­¥éª¤2ï¼šæ•°æ®è¿‡æ»¤ â†’ ç­›é€‰æœ‰æ•ˆæ•°æ®è¡Œ
æ­¥éª¤3ï¼šæ•°æ®å¤„ç† â†’ è®¡ç®—ã€ç»Ÿè®¡ã€æ±‡æ€»
æ­¥éª¤4ï¼šç»“æœè¾“å‡º â†’ æ ¼å¼åŒ–è¾“å‡ºç»“æœ
```

---

## 2. ğŸ“Š æ—¥å¿—åˆ†ææŠ€æœ¯è¯¦è§£


### 2.1 æ—¥å¿—åˆ†æçš„åŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ—¥å¿—åˆ†æ**
æ—¥å¿—åˆ†æå°±æ˜¯ä»ç³»ç»Ÿäº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶ä¸­**æå–æœ‰ç”¨ä¿¡æ¯**ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶å†µã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
æ—¥å¿—æ–‡ä»¶ = é“¶è¡Œæµæ°´è´¦å•
æ—¥å¿—åˆ†æ = åˆ†ææ¶ˆè´¹è®°å½•æ‰¾è§„å¾‹
```

**ğŸ’¡ å¸¸è§æ—¥å¿—æ ¼å¼ç¤ºä¾‹**
```
Apacheè®¿é—®æ—¥å¿—ï¼š
192.168.1.100 - - [25/Dec/2023:10:15:32] "GET /index.html HTTP/1.1" 200 2326

ç³»ç»Ÿæ—¥å¿—ï¼š
Dec 25 10:15:32 server1 sshd[1234]: Accepted password for user1 from 192.168.1.100

åº”ç”¨æ—¥å¿—ï¼š
2023-12-25 10:15:32 INFO User login successful: user1 from 192.168.1.100
```

### 2.2 WebæœåŠ¡å™¨æ—¥å¿—åˆ†æå®æˆ˜


**ğŸŒ Apacheè®¿é—®æ—¥å¿—åˆ†æ**

**åŸºç¡€ç»Ÿè®¡ - è®¿é—®é‡åˆ†æ**
```bash
# ç»Ÿè®¡æ€»è®¿é—®æ¬¡æ•°
awk 'END {print "æ€»è®¿é—®æ¬¡æ•°:", NR}' access.log

# ç»Ÿè®¡ä¸åŒIPçš„è®¿é—®æ¬¡æ•°
awk '{ip[$1]++} END {
    for (i in ip) {
        print i, ip[i]
    }
}' access.log | sort -k2 -nr
```

**ğŸ¯ ç†è§£è¦ç‚¹**
- `$1` æ˜¯IPåœ°å€å­—æ®µï¼ˆç¬¬ä¸€åˆ—ï¼‰
- `ip[$1]++` ç”¨IPåšæ•°ç»„ä¸‹æ ‡ï¼Œè®¡æ•°ç´¯åŠ 
- `sort -k2 -nr` æŒ‰ç¬¬äºŒåˆ—æ•°å€¼å€’åºæ’åˆ—

**çŠ¶æ€ç åˆ†æ**
```bash
# åˆ†æHTTPçŠ¶æ€ç åˆ†å¸ƒ
awk '{
    status = $9  # ç¬¬9åˆ—æ˜¯çŠ¶æ€ç 
    if (status >= 200 && status < 300) success++
    else if (status >= 400 && status < 500) client_error++
    else if (status >= 500) server_error++
    total++
} END {
    print "æˆåŠŸè¯·æ±‚:", success, "(" int(success/total*100) "%)"
    print "å®¢æˆ·ç«¯é”™è¯¯:", client_error, "(" int(client_error/total*100) "%)"  
    print "æœåŠ¡å™¨é”™è¯¯:", server_error, "(" int(server_error/total*100) "%)"
}' access.log
```

### 2.3 ç³»ç»Ÿæ—¥å¿—ç›‘æ§åˆ†æ


**ğŸ” ç™»å½•å¤±è´¥ç›‘æ§**
```bash
# åˆ†æSSHç™»å½•å¤±è´¥çš„IP
awk '/Failed password/ {
    # æå–IPåœ°å€
    for(i=1; i<=NF; i++) {
        if($i == "from") {
            ip = $(i+1)
            failed_ips[ip]++
            break
        }
    }
} END {
    print "ç™»å½•å¤±è´¥ç»Ÿè®¡:"
    for(ip in failed_ips) {
        if(failed_ips[ip] >= 5) {  # å¤±è´¥5æ¬¡ä»¥ä¸Šçš„IP
            print ip, failed_ips[ip] "æ¬¡"
        }
    }
}' /var/log/auth.log
```

**âš ï¸ å®‰å…¨åˆ†æè¦ç‚¹**
- æ‰¾å‡ºå¼‚å¸¸ç™»å½•IPåœ°å€
- ç»Ÿè®¡ç™»å½•å¤±è´¥é¢‘ç‡
- è¯†åˆ«å¯èƒ½çš„æš´åŠ›ç ´è§£æ”»å‡»

### 2.4 åº”ç”¨ç¨‹åºæ—¥å¿—åˆ†æ


**ğŸ“ˆ æ€§èƒ½åˆ†æç¤ºä¾‹**
```bash
# åˆ†æAPIå“åº”æ—¶é—´
awk '/API_RESPONSE/ {
    # å‡è®¾æ—¥å¿—æ ¼å¼ï¼štimestamp API_RESPONSE endpoint response_time
    endpoint = $3
    time = $4
    
    # ç»Ÿè®¡å„æ¥å£çš„å“åº”æ—¶é—´
    total[endpoint] += time
    count[endpoint]++
    
    # è®°å½•æœ€å¤§æœ€å°å€¼
    if(time > max[endpoint] || max[endpoint] == "") max[endpoint] = time
    if(time < min[endpoint] || min[endpoint] == "") min[endpoint] = time
    
} END {
    printf "%-20s %8s %8s %8s %8s\n", "æ¥å£", "è°ƒç”¨æ¬¡æ•°", "å¹³å‡æ—¶é—´", "æœ€å¤§æ—¶é—´", "æœ€å°æ—¶é—´"
    printf "%-20s %8s %8s %8s %8s\n", "----", "------", "------", "------", "------"
    
    for(ep in total) {
        avg = total[ep] / count[ep]
        printf "%-20s %8d %8.2f %8.2f %8.2f\n", ep, count[ep], avg, max[ep], min[ep]
    }
}' app.log
```

---

## 3. ğŸ“„ CSVæ–‡ä»¶å¤„ç†ä¸“é¢˜


### 3.1 CSVæ–‡ä»¶åŸºç¡€å¤„ç†


**ğŸ”¸ ä»€ä¹ˆæ˜¯CSVæ–‡ä»¶**
CSVï¼ˆComma-Separated Valuesï¼‰å°±æ˜¯ç”¨**é€—å·åˆ†éš”**çš„æ•°æ®æ–‡ä»¶ï¼Œç±»ä¼¼ç®€åŒ–ç‰ˆçš„Excelè¡¨æ ¼ã€‚

```
CSVæ–‡ä»¶ç¤ºä¾‹ï¼š
å§“å,å¹´é¾„,éƒ¨é—¨,å·¥èµ„
å¼ ä¸‰,28,æŠ€æœ¯éƒ¨,8000
æå››,32,é”€å”®éƒ¨,7500
ç‹äº”,25,äººäº‹éƒ¨,6000
```

**ğŸ’¡ awkå¤„ç†CSVçš„åŸºæœ¬è®¾ç½®**
```bash
# è®¾ç½®å­—æ®µåˆ†éš”ç¬¦ä¸ºé€—å·
awk -F, 'script' file.csv

# æˆ–åœ¨è„šæœ¬å¼€å¤´è®¾ç½®
awk 'BEGIN {FS=","} {script}' file.csv
```

### 3.2 CSVæ•°æ®ç­›é€‰ä¸è¿‡æ»¤


**ğŸ¯ åŸºç¡€ç­›é€‰æ“ä½œ**
```bash
# ç­›é€‰å·¥èµ„å¤§äº7000çš„å‘˜å·¥
awk -F, 'NR>1 && $4>7000 {print $1, $4}' employee.csv

# ç­›é€‰ç‰¹å®šéƒ¨é—¨çš„å‘˜å·¥
awk -F, 'NR>1 && $3=="æŠ€æœ¯éƒ¨" {print}' employee.csv

# å¤šæ¡ä»¶ç­›é€‰
awk -F, 'NR>1 && $2>=30 && $4>=8000 {
    print $1 ":" $4
}' employee.csv
```

**ğŸ”¸ ç†è§£è¦ç‚¹**
- `NR>1` è·³è¿‡æ ‡é¢˜è¡Œï¼ˆç¬¬ä¸€è¡Œï¼‰
- `$4>7000` ç¬¬4åˆ—ï¼ˆå·¥èµ„ï¼‰å¤§äº7000
- `$3=="æŠ€æœ¯éƒ¨"` ç¬¬3åˆ—ï¼ˆéƒ¨é—¨ï¼‰ç­‰äº"æŠ€æœ¯éƒ¨"

### 3.3 CSVæ•°æ®ç»Ÿè®¡åˆ†æ


**ğŸ“Š éƒ¨é—¨ç»Ÿè®¡åˆ†æ**
```bash
# æŒ‰éƒ¨é—¨ç»Ÿè®¡äººæ•°å’Œå¹³å‡å·¥èµ„
awk -F, 'NR>1 {
    dept = $3      # éƒ¨é—¨
    salary = $4    # å·¥èµ„
    
    # ç»Ÿè®¡å„éƒ¨é—¨
    dept_count[dept]++
    dept_salary[dept] += salary
    
} END {
    printf "%-10s %6s %8s\n", "éƒ¨é—¨", "äººæ•°", "å¹³å‡å·¥èµ„"
    printf "%-10s %6s %8s\n", "----", "----", "------"
    
    for(d in dept_count) {
        avg_salary = dept_salary[d] / dept_count[d]
        printf "%-10s %6d %8.0f\n", d, dept_count[d], avg_salary
    }
}'  employee.csv
```

**ğŸ”¢ æ•°å€¼ç»Ÿè®¡å‡½æ•°**
```bash
# è®¡ç®—æœ€å¤§å€¼ã€æœ€å°å€¼ã€æ€»å’Œ
awk -F, 'NR>1 {
    salary = $4
    total += salary
    count++
    
    if(salary > max || max == "") max = salary
    if(salary < min || min == "") min = salary
    
} END {
    print "æ€»äººæ•°:", count
    print "å·¥èµ„æ€»å’Œ:", total  
    print "å¹³å‡å·¥èµ„:", total/count
    print "æœ€é«˜å·¥èµ„:", max
    print "æœ€ä½å·¥èµ„:", min
}' employee.csv
```

### 3.4 CSVæ•°æ®æ¸…æ´—æŠ€æœ¯


**ğŸ§¹ å¤„ç†ç¼ºå¤±æ•°æ®**
```bash
# æ£€æŸ¥å¹¶å¤„ç†ç©ºå­—æ®µ
awk -F, '{
    # æ£€æŸ¥æ˜¯å¦æœ‰ç©ºå­—æ®µ
    empty_fields = 0
    for(i=1; i<=NF; i++) {
        if($i == "" || $i == " ") {
            empty_fields++
        }
    }
    
    if(empty_fields == 0) {
        print $0  # åªè¾“å‡ºå®Œæ•´è®°å½•
    } else {
        print "ç¬¬" NR "è¡Œæœ‰" empty_fields "ä¸ªç©ºå­—æ®µ" > "/dev/stderr"
    }
}' data.csv
```

**ğŸ”§ æ•°æ®æ ¼å¼æ ‡å‡†åŒ–**
```bash
# æ ‡å‡†åŒ–å§“åæ ¼å¼ï¼ˆå»é™¤ç©ºæ ¼ï¼Œç»Ÿä¸€å¤§å°å†™ï¼‰
awk -F, '{
    # å»é™¤å­—æ®µé¦–å°¾ç©ºæ ¼
    for(i=1; i<=NF; i++) {
        gsub(/^[ \t]+|[ \t]+$/, "", $i)  # å»é™¤é¦–å°¾ç©ºæ ¼
    }
    
    # å§“åé¦–å­—æ¯å¤§å†™
    $1 = toupper(substr($1,1,1)) tolower(substr($1,2))
    
    print $0
}' OFS="," employee.csv
```

---

## 4. ğŸ“ˆ æ•°æ®ç»Ÿè®¡åˆ†æå®æˆ˜


### 4.1 æè¿°æ€§ç»Ÿè®¡åˆ†æ


**ğŸ”¸ ä»€ä¹ˆæ˜¯æè¿°æ€§ç»Ÿè®¡**
æè¿°æ€§ç»Ÿè®¡å°±æ˜¯ç”¨**æ•°å­—æ¥æè¿°æ•°æ®ç‰¹å¾**ï¼Œæ¯”å¦‚å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰ã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
å°±åƒç»™ä¸€ä¸ªç­çº§çš„è€ƒè¯•æˆç»©åšæ€»ç»“
- å¹³å‡åˆ†å¤šå°‘ï¼Ÿï¼ˆå‡å€¼ï¼‰
- æœ€é«˜åˆ†æœ€ä½åˆ†ï¼Ÿï¼ˆæå€¼ï¼‰
- å¤§éƒ¨åˆ†äººåˆ†æ•°åœ¨ä»€ä¹ˆèŒƒå›´ï¼Ÿï¼ˆåˆ†å¸ƒï¼‰
```

**ğŸ“Š å®Œæ•´ç»Ÿè®¡åˆ†æè„šæœ¬**
```bash
awk '{
    if(NF > 0 && $1 != "") {  # è·³è¿‡ç©ºè¡Œå’Œæ— æ•ˆè¡Œ
        data[++count] = $1    # å­˜å‚¨æ•°æ®
        sum += $1             # ç´¯åŠ æ±‚å’Œ
        
        # æ›´æ–°æœ€å¤§æœ€å°å€¼
        if($1 > max || count == 1) max = $1
        if($1 < min || count == 1) min = $1
    }
} END {
    if(count == 0) {
        print "æ²¡æœ‰æœ‰æ•ˆæ•°æ®"
        exit
    }
    
    # è®¡ç®—åŸºæœ¬ç»Ÿè®¡é‡
    mean = sum / count
    
    # è®¡ç®—æ–¹å·®å’Œæ ‡å‡†å·®
    for(i=1; i<=count; i++) {
        diff = data[i] - mean
        variance += diff * diff
    }
    variance = variance / count
    std_dev = sqrt(variance)
    
    # è¾“å‡ºç»Ÿè®¡ç»“æœ
    print "=== æ•°æ®ç»Ÿè®¡åˆ†æ ==="
    print "æ•°æ®æ€»æ•°:", count
    print "æ€»å’Œ:", sum
    print "å¹³å‡å€¼:", sprintf("%.2f", mean)
    print "æœ€å¤§å€¼:", max
    print "æœ€å°å€¼:", min
    print "æ ‡å‡†å·®:", sprintf("%.2f", std_dev)
}' numbers.txt
```

### 4.2 åˆ†ç»„ç»Ÿè®¡åˆ†æ


**ğŸ¯ æŒ‰ç±»åˆ«åˆ†ç»„ç»Ÿè®¡**
```bash
# é”€å”®æ•°æ®åˆ†ç»„åˆ†æ
awk -F, 'NR>1 {
    category = $2    # äº§å“ç±»åˆ«
    sales = $3       # é”€å”®é¢
    quantity = $4    # é”€å”®æ•°é‡
    
    # æŒ‰ç±»åˆ«ç´¯è®¡
    cat_sales[category] += sales
    cat_quantity[category] += quantity
    cat_count[category]++
    
    total_sales += sales
    
} END {
    print "=== é”€å”®åˆ†ææŠ¥è¡¨ ==="
    printf "%-15s %10s %8s %8s %6s\n", "ç±»åˆ«", "é”€å”®é¢", "æ•°é‡", "å¹³å‡ä»·æ ¼", "å æ¯”"
    print "--------------------------------------------------------"
    
    for(cat in cat_sales) {
        avg_price = cat_sales[cat] / cat_quantity[cat]
        percentage = cat_sales[cat] / total_sales * 100
        
        printf "%-15s %10.2f %8d %8.2f %5.1f%%\n", 
               cat, cat_sales[cat], cat_quantity[cat], avg_price, percentage
    }
    
    print "--------------------------------------------------------"
    printf "%-15s %10.2f\n", "æ€»è®¡", total_sales
}' sales.csv
```

### 4.3 æ—¶é—´åºåˆ—æ•°æ®åˆ†æ


**ğŸ“… æŒ‰æ—¶é—´ç»´åº¦ç»Ÿè®¡**
```bash
# åˆ†æè®¿é—®æ—¥å¿—çš„æ—¶é—´åˆ†å¸ƒ
awk '{
    # æå–æ—¶é—´ä¿¡æ¯ (å‡è®¾æ ¼å¼ï¼š2023-12-25 10:15:32)
    date = $1
    time = $2
    hour = substr(time, 1, 2)
    
    # æŒ‰å°æ—¶ç»Ÿè®¡
    hourly[hour]++
    
    # æŒ‰æ—¥æœŸç»Ÿè®¡  
    daily[date]++
    
    total++
} END {
    print "=== è®¿é—®é‡æ—¶é—´åˆ†å¸ƒåˆ†æ ==="
    
    print "\næ¯å°æ—¶è®¿é—®é‡:"
    for(i=0; i<=23; i++) {
        h = sprintf("%02d", i)
        count = hourly[h] + 0  # +0ç¡®ä¿æ•°å€¼
        bar = ""
        
        # ç®€å•çš„æ¡å½¢å›¾æ˜¾ç¤º
        for(j=1; j<=int(count/100); j++) bar = bar "#"
        
        printf "%02dæ—¶: %6d %s\n", i, count, bar
    }
    
    print "\næ¯æ—¥è®¿é—®é‡:"
    PROCINFO["sorted_in"] = "@ind_str_asc"  # æŒ‰æ—¥æœŸæ’åº
    for(d in daily) {
        printf "%s: %d\n", d, daily[d]
    }
}' access.log
```

### 4.4 é«˜çº§ç»Ÿè®¡åˆ†æ


**ğŸ“Š ç™¾åˆ†ä½æ•°è®¡ç®—**
```bash
# è®¡ç®—æ•°æ®çš„ç™¾åˆ†ä½æ•°
awk '{
    data[NR] = $1
} END {
    # å¯¹æ•°æ®æ’åº
    n = asort(data)
    
    # è®¡ç®—å„ç™¾åˆ†ä½æ•°
    p25 = data[int(n * 0.25)]
    p50 = data[int(n * 0.50)]  # ä¸­ä½æ•°
    p75 = data[int(n * 0.75)]
    p90 = data[int(n * 0.90)]
    p95 = data[int(n * 0.95)]
    
    print "=== ç™¾åˆ†ä½æ•°åˆ†æ ==="
    print "25%åˆ†ä½æ•°:", p25
    print "50%åˆ†ä½æ•°(ä¸­ä½æ•°):", p50  
    print "75%åˆ†ä½æ•°:", p75
    print "90%åˆ†ä½æ•°:", p90
    print "95%åˆ†ä½æ•°:", p95
}' data.txt
```

---

## 5. ğŸ“‹ æŠ¥è¡¨ç”ŸæˆæŠ€æœ¯


### 5.1 æŠ¥è¡¨æ ¼å¼åŒ–è¾“å‡º


**ğŸ”¸ ä»€ä¹ˆæ˜¯æŠ¥è¡¨**
æŠ¥è¡¨å°±æ˜¯æŠŠæ•°æ®æ•´ç†æˆ**æ˜“è¯»æ˜“æ‡‚çš„è¡¨æ ¼å½¢å¼**ï¼Œè®©äººä¸€çœ¼å°±èƒ½çœ‹å‡ºé‡è¦ä¿¡æ¯ã€‚

```
åŸå§‹æ•°æ® vs æŠ¥è¡¨ï¼š
åŸå§‹ï¼šå¼ ä¸‰,æŠ€æœ¯éƒ¨,8000 æå››,é”€å”®éƒ¨,7500
æŠ¥è¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å§“å  â”‚  éƒ¨é—¨  â”‚  å·¥èµ„  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¼ ä¸‰  â”‚ æŠ€æœ¯éƒ¨ â”‚  8000  â”‚
â”‚  æå››  â”‚ é”€å”®éƒ¨ â”‚  7500  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ åŸºç¡€æŠ¥è¡¨æ ¼å¼åŒ–**
```bash
# ç”Ÿæˆå‘˜å·¥å·¥èµ„æŠ¥è¡¨
awk -F, 'BEGIN {
    # æ‰“å°æŠ¥è¡¨æ ‡é¢˜
    print "====== å‘˜å·¥å·¥èµ„æŠ¥è¡¨ ======"
    print strftime("ç”Ÿæˆæ—¶é—´: %Y-%m-%d %H:%M:%S")
    print ""
    
    # æ‰“å°è¡¨å¤´
    printf "%-10s %-12s %-8s %8s\n", "å§“å", "éƒ¨é—¨", "å¹´é¾„", "å·¥èµ„"
    printf "%-10s %-12s %-8s %8s\n", "----", "----", "----", "----"
    
} NR>1 {
    printf "%-10s %-12s %-8s %8d\n", $1, $3, $2, $4
    total += $4
    count++
    
} END {
    printf "%-10s %-12s %-8s %8s\n", "----", "----", "----", "----"
    printf "%-10s %-12s %-8s %8d\n", "åˆè®¡", "", "", total
    printf "%-10s %-12s %-8s %8.0f\n", "å¹³å‡", "", "", total/count
    
    print ""
    print "æŠ¥è¡¨è¯´æ˜ï¼šå…±" count "åå‘˜å·¥ï¼Œå·¥èµ„æ€»é¢" total "å…ƒ"
}' employee.csv
```

### 5.2 HTMLæŠ¥è¡¨ç”Ÿæˆ


**ğŸŒ ç”Ÿæˆç½‘é¡µæ ¼å¼æŠ¥è¡¨**
```bash
# ç”ŸæˆHTMLæ ¼å¼çš„é”€å”®æŠ¥è¡¨
awk -F, 'BEGIN {
    print "<!DOCTYPE html>"
    print "<html><head>"
    print "<title>é”€å”®æŠ¥è¡¨</title>"
    print "<style>"
    print "table {border-collapse: collapse; width: 100%;}"
    print "th, td {border: 1px solid #ddd; padding: 8px; text-align: right;}"
    print "th {background-color: #f2f2f2;}"
    print "</style></head><body>"
    print "<h1>æœˆåº¦é”€å”®æŠ¥è¡¨</h1>"
    print "<table>"
    print "<tr><th>äº§å“</th><th>é”€å”®é¢</th><th>æ•°é‡</th><th>å æ¯”</th></tr>"
    
} NR>1 {
    product = $1
    sales = $2
    quantity = $3
    
    product_data[product]["sales"] += sales
    product_data[product]["quantity"] += quantity
    total_sales += sales
    
} END {
    # è¾“å‡ºæ•°æ®è¡Œ
    for(p in product_data) {
        sales = product_data[p]["sales"]
        quantity = product_data[p]["quantity"]
        percentage = sales / total_sales * 100
        
        printf "<tr><td>%s</td><td>%.2f</td><td>%d</td><td>%.1f%%</td></tr>\n",
               p, sales, quantity, percentage
    }
    
    print "</table>"
    print "<p>æŠ¥è¡¨ç”Ÿæˆæ—¶é—´ï¼š" strftime("%Y-%m-%d %H:%M:%S") "</p>"
    print "</body></html>"
}' sales.csv > sales_report.html
```

### 5.3 å¤šç»´åº¦æŠ¥è¡¨


**ğŸ“Š äº¤å‰ç»Ÿè®¡æŠ¥è¡¨**
```bash
# æŒ‰éƒ¨é—¨å’Œçº§åˆ«ç”Ÿæˆäº¤å‰ç»Ÿè®¡æŠ¥è¡¨
awk -F, 'BEGIN {
    print "=== äººå‘˜åˆ†å¸ƒäº¤å‰ç»Ÿè®¡ ==="
} NR>1 {
    dept = $3      # éƒ¨é—¨
    level = $4     # çº§åˆ«
    
    cross[dept][level]++
    dept_total[dept]++
    level_total[level]++
    grand_total++
    
} END {
    # è·å–æ‰€æœ‰çº§åˆ«
    for(d in cross) {
        for(l in cross[d]) {
            levels[l] = 1
        }
    }
    
    # æ‰“å°è¡¨å¤´
    printf "%-12s", "éƒ¨é—¨\\çº§åˆ«"
    for(l in levels) {
        printf "%8s", l
    }
    printf "%8s\n", "å°è®¡"
    
    # æ‰“å°åˆ†éš”çº¿
    printf "%-12s", "--------"
    for(l in levels) {
        printf "%8s", "----"
    }
    printf "%8s\n", "----"
    
    # æ‰“å°æ•°æ®è¡Œ
    for(d in dept_total) {
        printf "%-12s", d
        for(l in levels) {
            count = cross[d][l] + 0
            printf "%8d", count
        }
        printf "%8d\n", dept_total[d]
    }
    
    # æ‰“å°æ€»è®¡è¡Œ
    printf "%-12s", "æ€»è®¡"
    for(l in levels) {
        printf "%8d", level_total[l]
    }
    printf "%8d\n", grand_total
}' staff.csv
```

### 5.4 å›¾è¡¨å¼æŠ¥è¡¨


**ğŸ“ˆ ç®€å•æ¡å½¢å›¾æŠ¥è¡¨**
```bash
# ç”ŸæˆASCIIæ¡å½¢å›¾
awk -F, 'NR>1 {
    sales[NR] = $2    # é”€å”®é¢
    names[NR] = $1    # äº§å“å
    max_sales = ($2 > max_sales) ? $2 : max_sales
    count++
} END {
    print "=== é”€å”®é¢æ¡å½¢å›¾ ==="
    
    # è®¡ç®—ç¼©æ”¾æ¯”ä¾‹
    scale = max_sales / 50  # æœ€é•¿50ä¸ªå­—ç¬¦
    
    for(i=2; i<=count+1; i++) {
        name = names[i]
        value = sales[i]
        bar_length = int(value / scale)
        
        # ç”Ÿæˆæ¡å½¢
        bar = ""
        for(j=1; j<=bar_length; j++) {
            bar = bar "â–ˆ"
        }
        
        printf "%-15s %8.0f |%s\n", name, value, bar
    }
    
    print ""
    printf "æ¯”ä¾‹å°ºï¼šæ¯ä¸ªâ–ˆä»£è¡¨çº¦ %.0f å…ƒ\n", scale
}' products.csv
```

---

## 6. ğŸ§¹ æ•°æ®è¿‡æ»¤æ¸…æ´—æ–¹æ³•


### 6.1 æ•°æ®è´¨é‡æ£€æŸ¥


**ğŸ”¸ ä»€ä¹ˆæ˜¯æ•°æ®æ¸…æ´—**
æ•°æ®æ¸…æ´—å°±æ˜¯æŠŠ**è„ä¹±å·®çš„æ•°æ®å˜æˆå¹²å‡€æ•´é½**çš„æ•°æ®ï¼Œå°±åƒæ¸…æ´å·¥æ•´ç†æˆ¿é—´ä¸€æ ·ã€‚

```
è„æ•°æ®ä¾‹å­ï¼š
å¼ ä¸‰ ,28,æŠ€æœ¯éƒ¨  ,8000    â† æœ‰å¤šä½™ç©ºæ ¼
,32,é”€å”®éƒ¨,7500           â† ç¼ºå°‘å§“å
ç‹äº”,äºŒåäº”,äººäº‹éƒ¨,6000     â† å¹´é¾„ç”¨ä¸­æ–‡
```

**ğŸ” æ•°æ®è´¨é‡æ£€æŸ¥è„šæœ¬**
```bash
# å…¨é¢çš„æ•°æ®è´¨é‡æ£€æŸ¥
awk -F, '{
    line_num = NR
    
    # æ£€æŸ¥ç©ºè¡Œ
    if(NF == 0 || $0 ~ /^[ \t]*$/) {
        empty_lines++
        next
    }
    
    # æ£€æŸ¥å­—æ®µæ•°é‡
    if(NF != 4) {  # æœŸæœ›4ä¸ªå­—æ®µ
        printf "ç¬¬%dè¡Œå­—æ®µæ•°é”™è¯¯ï¼šæœŸæœ›4ä¸ªï¼Œå®é™…%dä¸ª\n", line_num, NF > "/dev/stderr"
        field_errors++
    }
    
    # æ£€æŸ¥å¿…å¡«å­—æ®µ
    if($1 == "" || $1 ~ /^[ \t]*$/) {
        printf "ç¬¬%dè¡Œå§“åä¸ºç©º\n", line_num > "/dev/stderr"
        missing_name++
    }
    
    # æ£€æŸ¥æ•°å€¼å­—æ®µ
    if($2 !~ /^[0-9]+$/ || $2 < 18 || $2 > 65) {
        printf "ç¬¬%dè¡Œå¹´é¾„å¼‚å¸¸ï¼š%s\n", line_num, $2 > "/dev/stderr"
        age_errors++
    }
    
    if($4 !~ /^[0-9]+$/ || $4 < 0) {
        printf "ç¬¬%dè¡Œå·¥èµ„å¼‚å¸¸ï¼š%s\n", line_num, $4 > "/dev/stderr"
        salary_errors++
    }
    
    total_lines++
    
} END {
    print "=== æ•°æ®è´¨é‡æ£€æŸ¥æŠ¥å‘Š ==="
    print "æ€»è¡Œæ•°:", NR
    print "ç©ºè¡Œæ•°:", empty_lines + 0
    print "æœ‰æ•ˆæ•°æ®è¡Œ:", total_lines + 0
    print "å­—æ®µæ•°é”™è¯¯:", field_errors + 0
    print "å§“åç¼ºå¤±:", missing_name + 0
    print "å¹´é¾„é”™è¯¯:", age_errors + 0
    print "å·¥èµ„é”™è¯¯:", salary_errors + 0
    
    error_rate = (field_errors + missing_name + age_errors + salary_errors) / NR * 100
    printf "é”™è¯¯ç‡: %.1f%%\n", error_rate
}' employee.csv
```

### 6.2 æ•°æ®æ ‡å‡†åŒ–æ¸…æ´—


**ğŸ”§ å­—ç¬¦ä¸²æ¸…æ´—æ ‡å‡†åŒ–**
```bash
# æ•°æ®æ¸…æ´—å’Œæ ‡å‡†åŒ–
awk -F, 'BEGIN {
    OFS = ","  # è®¾ç½®è¾“å‡ºåˆ†éš”ç¬¦
} {
    # å»é™¤æ‰€æœ‰å­—æ®µçš„é¦–å°¾ç©ºæ ¼
    for(i=1; i<=NF; i++) {
        gsub(/^[ \t]+|[ \t]+$/, "", $i)
    }
    
    # å§“åæ ‡å‡†åŒ–ï¼šé¦–å­—æ¯å¤§å†™
    if($1 != "") {
        $1 = toupper(substr($1,1,1)) tolower(substr($1,2))
    }
    
    # éƒ¨é—¨åç§°æ ‡å‡†åŒ–
    gsub(/æŠ€æœ¯/, "ç ”å‘", $3)
    gsub(/å¼€å‘/, "ç ”å‘", $3) 
    gsub(/IT/, "ç ”å‘", $3)
    
    # æ•°å€¼å­—æ®µéªŒè¯å’Œä¿®æ­£
    if($2 !~ /^[0-9]+$/) {
        # å°è¯•è½¬æ¢ä¸­æ–‡æ•°å­—
        if($2 == "äºŒåäº”") $2 = "25"
        else if($2 == "ä¸‰å") $2 = "30"
        # è¿˜å¯ä»¥æ·»åŠ æ›´å¤šè½¬æ¢è§„åˆ™
    }
    
    # åªè¾“å‡ºæœ‰æ•ˆè®°å½•
    if($1 != "" && $2 ~ /^[0-9]+$/ && $4 ~ /^[0-9]+$/) {
        print $0
        valid_count++
    } else {
        invalid_count++
    }
    
} END {
    printf "å¤„ç†å®Œæˆï¼šæœ‰æ•ˆè®°å½•%dæ¡ï¼Œæ— æ•ˆè®°å½•%dæ¡\n", valid_count, invalid_count > "/dev/stderr"
}' messy_data.csv > clean_data.csv
```

### 6.3 é‡å¤æ•°æ®å¤„ç†


**ğŸ”„ å»é‡å’Œåˆå¹¶é‡å¤è®°å½•**
```bash
# æ£€æµ‹å¹¶å¤„ç†é‡å¤è®°å½•
awk -F, '{
    key = $1 "_" $3  # ç”¨å§“å+éƒ¨é—¨ä½œä¸ºå”¯ä¸€æ ‡è¯†
    
    if(key in records) {
        # å‘ç°é‡å¤è®°å½•
        duplicate_count++
        
        # ä¿ç•™å·¥èµ„è¾ƒé«˜çš„è®°å½•
        if($4 > records[key]["salary"]) {
            records[key]["age"] = $2
            records[key]["salary"] = $4
            records[key]["line"] = NR
            printf "é‡å¤è®°å½•æ›´æ–°ï¼š%s (ç¬¬%dè¡Œ)\n", $1, NR > "/dev/stderr"
        } else {
            printf "é‡å¤è®°å½•å¿½ç•¥ï¼š%s (ç¬¬%dè¡Œ)\n", $1, NR > "/dev/stderr"
        }
    } else {
        # é¦–æ¬¡å‡ºç°çš„è®°å½•
        records[key]["name"] = $1
        records[key]["age"] = $2
        records[key]["dept"] = $3
        records[key]["salary"] = $4
        records[key]["line"] = NR
        unique_count++
    }
    
} END {
    print "=== å»é‡åçš„æ•°æ® ==="
    printf "%-10s %-8s %-12s %8s\n", "å§“å", "å¹´é¾„", "éƒ¨é—¨", "å·¥èµ„"
    
    for(k in records) {
        printf "%-10s %-8s %-12s %8s\n",
               records[k]["name"],
               records[k]["age"], 
               records[k]["dept"],
               records[k]["salary"]
    }
    
    printf "\nå¤„ç†ç»“æœï¼šå”¯ä¸€è®°å½•%dæ¡ï¼Œé‡å¤è®°å½•%dæ¡\n", unique_count, duplicate_count > "/dev/stderr"
}' employee_with_duplicates.csv
```

### 6.4 å¼‚å¸¸å€¼æ£€æµ‹å’Œå¤„ç†


**ğŸ“Š ç»Ÿè®¡å¼‚å¸¸å€¼æ£€æµ‹**
```bash
# åŸºäºç»Ÿè®¡æ–¹æ³•æ£€æµ‹å¼‚å¸¸å€¼
awk -F, 'NR>1 {
    data[NR] = $4  # å·¥èµ„æ•°æ®
    sum += $4
    count++
} END {
    # è®¡ç®—å¹³å‡å€¼
    mean = sum / count
    
    # è®¡ç®—æ ‡å‡†å·®
    for(i in data) {
        variance += (data[i] - mean) * (data[i] - mean)
    }
    std_dev = sqrt(variance / count)
    
    # è®¾ç½®å¼‚å¸¸å€¼é˜ˆå€¼ï¼ˆ3å€æ ‡å‡†å·®ï¼‰
    lower_bound = mean - 3 * std_dev
    upper_bound = mean + 3 * std_dev
    
    print "=== å¼‚å¸¸å€¼æ£€æµ‹æŠ¥å‘Š ==="
    printf "å¹³å‡å€¼: %.2f\n", mean
    printf "æ ‡å‡†å·®: %.2f\n", std_dev
    printf "æ­£å¸¸èŒƒå›´: [%.2f, %.2f]\n", lower_bound, upper_bound
    print ""
    
    print "å¼‚å¸¸å€¼åˆ—è¡¨:"
    outlier_count = 0
    for(line in data) {
        value = data[line]
        if(value < lower_bound || value > upper_bound) {
            printf "ç¬¬%dè¡Œ: %s (åç¦»%.1fä¸ªæ ‡å‡†å·®)\n", 
                   line, value, abs(value - mean) / std_dev
            outlier_count++
        }
    }
    
    printf "\nå¼‚å¸¸å€¼å æ¯”: %.1f%%\n", outlier_count / count * 100
}' employee.csv
```

---

## 7. ğŸ”„ æ ¼å¼è½¬æ¢å®ç”¨æŠ€å·§


### 7.1 CSVä¸å…¶ä»–æ ¼å¼äº’è½¬


**ğŸ”¸ æ ¼å¼è½¬æ¢çš„å«ä¹‰**
æ ¼å¼è½¬æ¢å°±æ˜¯æŠŠä¸€ç§æ•°æ®æ ¼å¼**å˜æˆå¦ä¸€ç§æ ¼å¼**ï¼Œå°±åƒç¿»è¯‘ä¸€æ ·ï¼Œå†…å®¹ä¸å˜ä½†è¡¨è¾¾æ–¹å¼ä¸åŒã€‚

**ğŸ’¡ CSVè½¬JSONæ ¼å¼**
```bash
# å°†CSVæ•°æ®è½¬æ¢ä¸ºJSONæ ¼å¼
awk -F, 'BEGIN {
    print "["
} NR==1 {
    # ä¿å­˜å­—æ®µåä½œä¸ºJSONé”®
    for(i=1; i<=NF; i++) {
        gsub(/^[ \t]+|[ \t]+$/, "", $i)  # å»ç©ºæ ¼
        headers[i] = $i
    }
    next
} NR>2 {
    print ","  # å‰ä¸€ä¸ªå¯¹è±¡ç»“æŸ
} NR>1 {
    print "  {"
    for(i=1; i<=NF; i++) {
        gsub(/^[ \t]+|[ \t]+$/, "", $i)  # å»ç©ºæ ¼
        
        # åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å€¼
        if($i ~ /^[0-9]+$/) {
            printf "    \"%s\": %s", headers[i], $i
        } else {
            printf "    \"%s\": \"%s\"", headers[i], $i
        }
        
        if(i < NF) print ","
        else print ""
    }
    printf "  }"
} END {
    print ""
    print "]"
}' employee.csv > employee.json
```

**ğŸ“Š CSVè½¬å›ºå®šå®½åº¦æ ¼å¼**
```bash
# è½¬æ¢ä¸ºå›ºå®šå®½åº¦çš„æŠ¥è¡¨æ ¼å¼
awk -F, 'BEGIN {
    # å®šä¹‰åˆ—å®½
    name_width = 15
    age_width = 5  
    dept_width = 12
    salary_width = 8
    
    # æ‰“å°è¡¨å¤´
    printf "%-*s %-*s %-*s %*s\n", 
           name_width, "å§“å",
           age_width, "å¹´é¾„", 
           dept_width, "éƒ¨é—¨",
           salary_width, "å·¥èµ„"
           
    # æ‰“å°åˆ†éš”çº¿
    for(i=1; i<=name_width+age_width+dept_width+salary_width+3; i++) {
        printf "-"
    }
    print ""
    
} NR>1 {
    # æˆªæ–­è¿‡é•¿çš„å­—æ®µ
    name = substr($1, 1, name_width)
    dept = substr($3, 1, dept_width)
    
    printf "%-*s %-*s %-*s %*s\n",
           name_width, name,
           age_width, $2,
           dept_width, dept, 
           salary_width, $4
}' employee.csv
```

### 7.2 æ—¥å¿—æ ¼å¼æ ‡å‡†åŒ–


**ğŸ“ ä¸åŒæ—¥å¿—æ ¼å¼è½¬æ¢**
```bash
# å°†ä¸åŒæ ¼å¼çš„æ—¥å¿—æ ‡å‡†åŒ–
awk '{
    # æ£€æµ‹æ—¥å¿—æ ¼å¼å¹¶è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼
    if($0 ~ /^\[.*\]/) {
        # Apacheæ ¼å¼: [timestamp] level message
        gsub(/[\[\]]/, "", $1)  # å»æ‰æ–¹æ‹¬å·
        timestamp = $1
        level = $2
        message = substr($0, index($0, $3))  # ä»ç¬¬3ä¸ªå­—æ®µå¼€å§‹çš„æ‰€æœ‰å†…å®¹
        
    } else if($0 ~ /^[0-9]{4}-[0-9]{2}-[0-9]{2}/) {
        # æ ‡å‡†æ ¼å¼: 2023-12-25 10:15:32 INFO message
        timestamp = $1 " " $2
        level = $3
        message = substr($0, index($0, $4))
        
    } else if($0 ~ /^[A-Z][a-z]{2} [0-9]{2}/) {
        # Syslogæ ¼å¼: Dec 25 10:15:32 server message
        month_map["Jan"]=1; month_map["Feb"]=2; month_map["Mar"]=3
        month_map["Apr"]=4; month_map["May"]=5; month_map["Jun"]=6  
        month_map["Jul"]=7; month_map["Aug"]=8; month_map["Sep"]=9
        month_map["Oct"]=10; month_map["Nov"]=11; month_map["Dec"]=12
        
        year = strftime("%Y")  # å½“å‰å¹´
        month = sprintf("%02d", month_map[$1])
        day = sprintf("%02d", $2)
        time = $3
        
        timestamp = year "-" month "-" day " " time
        level = "INFO"  # é»˜è®¤çº§åˆ«
        message = substr($0, index($0, $4))
    }
    
    # è¾“å‡ºæ ‡å‡†æ ¼å¼
    printf "%s [%s] %s\n", timestamp, level, message
    
}' mixed_logs.txt > standardized_logs.txt
```

### 7.3 æ•°æ®é€è§†è¡¨ç”Ÿæˆ


**ğŸ“Š ç”Ÿæˆé€è§†è¡¨æ ¼å¼**
```bash
# ä»æ˜ç»†æ•°æ®ç”Ÿæˆé€è§†è¡¨
awk -F, 'NR>1 {
    region = $1    # åœ°åŒº
    product = $2   # äº§å“
    sales = $3     # é”€å”®é¢
    
    # ç´¯è®¡å„ç»´åº¦æ•°æ®
    pivot[region][product] += sales
    region_total[region] += sales
    product_total[product] += sales
    grand_total += sales
    
    # è®°å½•æ‰€æœ‰å‡ºç°çš„åœ°åŒºå’Œäº§å“
    regions[region] = 1
    products[product] = 1
    
} END {
    # æ‰“å°é€è§†è¡¨
    print "=== é”€å”®é¢é€è§†è¡¨ ==="
    
    # è¡¨å¤´ï¼šäº§å“å
    printf "%-12s", "åœ°åŒº\\äº§å“"
    for(p in products) {
        printf "%12s", p
    }
    printf "%12s\n", "åœ°åŒºåˆè®¡"
    
    # åˆ†éš”çº¿
    printf "%-12s", "----------"
    for(p in products) {
        printf "%12s", "----------"
    }
    printf "%12s\n", "----------"
    
    # æ•°æ®è¡Œï¼šå„åœ°åŒº
    for(r in regions) {
        printf "%-12s", r
        for(p in products) {
            value = pivot[r][p] + 0  # +0 ç¡®ä¿æ•°å€¼
            printf "%12.0f", value
        }
        printf "%12.0f\n", region_total[r]
    }
    
    # æ€»è®¡è¡Œ
    printf "%-12s", "äº§å“åˆè®¡"
    for(p in products) {
        printf "%12.0f", product_total[p]
    }
    printf "%12.0f\n", grand_total
}' sales_detail.csv
```

### 7.4 é…ç½®æ–‡ä»¶æ ¼å¼è½¬æ¢


**âš™ï¸ ä¸åŒé…ç½®æ ¼å¼äº’è½¬**
```bash
# INIæ ¼å¼è½¬JSONé…ç½®
awk 'BEGIN {
    print "{"
    first_section = 1
} 

# å¤„ç†èŠ‚æ ‡é¢˜ [section]
/^\[.*\]/ {
    if(!first_section) {
        print "  },"
    } else {
        first_section = 0
    }
    
    section = $0
    gsub(/[\[\]]/, "", section)  # å»æ‰æ–¹æ‹¬å·
    printf "  \"%s\": {\n", section
    first_key = 1
    next
}

# å¤„ç†é”®å€¼å¯¹ key=value
/^[^#].*=.*/ {
    if(!first_key) print ","
    else first_key = 0
    
    split($0, kv, "=")
    key = kv[1]
    value = kv[2]
    
    # å»é™¤é¦–å°¾ç©ºæ ¼
    gsub(/^[ \t]+|[ \t]+$/, "", key)
    gsub(/^[ \t]+|[ \t]+$/, "", value)
    
    # åˆ¤æ–­å€¼ç±»å‹
    if(value ~ /^[0-9]+$/) {
        printf "    \"%s\": %s", key, value
    } else if(value ~ /^(true|false)$/i) {
        printf "    \"%s\": %s", key, tolower(value)
    } else {
        printf "    \"%s\": \"%s\"", key, value
    }
}

END {
    if(!first_section) {
        print ""
        print "  }"
    }
    print "}"
}' config.ini > config.json
```

---

## 8. ğŸ’¼ ä¸šåŠ¡æ•°æ®åˆ†ææ¡ˆä¾‹


### 8.1 ç”µå•†é”€å”®æ•°æ®åˆ†æ


**ğŸ›’ ç”µå•†ä¸šåŠ¡åœºæ™¯åˆ†æ**

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”µå•†å¹³å°çš„é”€å”®æ•°æ®ï¼Œéœ€è¦åˆ†æç”¨æˆ·è´­ä¹°è¡Œä¸ºå’Œå•†å“é”€å”®æƒ…å†µã€‚

```
æ•°æ®æ ¼å¼ç¤ºä¾‹ï¼š
è®¢å•ID,ç”¨æˆ·ID,å•†å“åç§°,ç±»åˆ«,æ•°é‡,å•ä»·,è®¢å•æ—¶é—´,æ”¯ä»˜æ–¹å¼
```

**ğŸ“Š ç”¨æˆ·è´­ä¹°è¡Œä¸ºåˆ†æ**
```bash
# ç”¨æˆ·è´­ä¹°è¡Œä¸ºæ·±åº¦åˆ†æ
awk -F, 'NR>1 {
    user_id = $2
    category = $4  
    quantity = $5
    price = $6
    total = quantity * price
    payment = $8
    
    # ç”¨æˆ·ç»´åº¦ç»Ÿè®¡
    user_orders[user_id]++                    # è®¢å•æ•°
    user_spending[user_id] += total           # æ¶ˆè´¹é‡‘é¢
    user_items[user_id] += quantity           # è´­ä¹°å•†å“æ•°
    
    # ç”¨æˆ·åå¥½ç±»åˆ«
    user_category[user_id][category] += quantity
    
    # æ”¯ä»˜æ–¹å¼ç»Ÿè®¡
    payment_count[payment]++
    payment_amount[payment] += total
    
    # å…¨å±€ç»Ÿè®¡
    total_revenue += total
    total_orders++
    
} END {
    print "=== ç”µå•†æ•°æ®åˆ†ææŠ¥å‘Š ==="
    
    # ç”¨æˆ·ä»·å€¼åˆ†æ
    print "\n1. ç”¨æˆ·ä»·å€¼åˆ†æ (Top 10)"
    print "ç”¨æˆ·ID    è®¢å•æ•°  æ¶ˆè´¹é‡‘é¢  å¹³å‡è®¢å•é¢  è´­ä¹°å•†å“æ•°"
    print "------------------------------------------------"
    
    # æŒ‰æ¶ˆè´¹é‡‘é¢æ’åºç”¨æˆ·
    for(user in user_spending) {
        user_list[++user_count] = user
        user_value[user_count] = user_spending[user]
    }
    
    # ç®€å•æ’åºï¼ˆå†’æ³¡æ’åºï¼‰
    for(i=1; i<=user_count; i++) {
        for(j=i+1; j<=user_count; j++) {
            if(user_value[i] < user_value[j]) {
                # äº¤æ¢
                temp_user = user_list[i]
                temp_value = user_value[i]
                user_list[i] = user_list[j]
                user_value[i] = user_value[j]
                user_list[j] = temp_user
                user_value[j] = temp_value
            }
        }
    }
    
    # è¾“å‡ºTop 10ç”¨æˆ·
    for(i=1; i<=10 && i<=user_count; i++) {
        user = user_list[i]
        avg_order = user_spending[user] / user_orders[user]
        printf "%-8s %7d %10.2f %11.2f %10d\n",
               user, user_orders[user], user_spending[user], avg_order, user_items[user]
    }
    
    # æ”¯ä»˜æ–¹å¼åˆ†æ
    print "\n2. æ”¯ä»˜æ–¹å¼åˆ†æ"
    print "æ”¯ä»˜æ–¹å¼     è®¢å•æ•°    é‡‘é¢       å æ¯”"
    print "------------------------------------"
    for(pay in payment_count) {
        percentage = payment_amount[pay] / total_revenue * 100
        printf "%-12s %6d %10.2f %6.1f%%\n", 
               pay, payment_count[pay], payment_amount[pay], percentage
    }
    
    # æ•´ä½“ä¸šåŠ¡æŒ‡æ ‡
    print "\n3. æ•´ä½“ä¸šåŠ¡æŒ‡æ ‡"
    printf "æ€»è®¢å•æ•°: %d\n", total_orders
    printf "æ€»æ”¶å…¥: %.2f å…ƒ\n", total_revenue  
    printf "å¹³å‡è®¢å•é‡‘é¢: %.2f å…ƒ\n", total_revenue / total_orders
    printf "æ´»è·ƒç”¨æˆ·æ•°: %d\n", user_count
    printf "ç”¨æˆ·å¹³å‡æ¶ˆè´¹: %.2f å…ƒ\n", total_revenue / user_count
}' ecommerce_orders.csv
```

### 8.2 ç½‘ç«™è®¿é—®æ—¥å¿—åˆ†æ


**ğŸŒ Webåˆ†æä¸šåŠ¡åœºæ™¯**
```bash
# ç½‘ç«™æµé‡å’Œç”¨æˆ·è¡Œä¸ºåˆ†æ
awk '{
    ip = $1
    timestamp = $4
    gsub(/[\[\]]/, "", timestamp)  # å»é™¤æ–¹æ‹¬å·
    
    # æå–æ—¶é—´ä¿¡æ¯
    split(timestamp, dt, ":")
    date = dt[1]
    hour = dt[2]
    
    method = $6
    url = $7  
    status = $9
    size = $10
    
    # åŸºç¡€ç»Ÿè®¡
    total_visits++
    ips[ip]++
    
    # æ—¶é—´åˆ†å¸ƒç»Ÿè®¡
    hourly_visits[hour]++
    daily_visits[date]++
    
    # é¡µé¢è®¿é—®ç»Ÿè®¡
    if(status == "200") {
        successful_requests++
        pages[url]++
        total_size += ($10 != "-") ? $10 : 0
    } else {
        error_requests++
        error_pages[url]++
    }
    
    # ç”¨æˆ·è¡Œä¸ºåˆ†æ
    if(url ~ /\.(jpg|jpeg|png|gif|css|js)$/) {
        static_resources++
    } else {
        dynamic_pages++  
        # åˆ†æé¡µé¢ç±»å‹
        if(url ~ /\/product\//) product_views++
        else if(url ~ /\/category\//) category_views++
        else if(url ~ /\/cart/) cart_visits++
        else if(url ~ /\/checkout/) checkout_visits++
    }
    
} END {
    print "=== ç½‘ç«™è®¿é—®åˆ†ææŠ¥å‘Š ==="
    
    # åŸºç¡€æŒ‡æ ‡
    print "\n1. åŸºç¡€è®¿é—®æŒ‡æ ‡"
    printf "æ€»è®¿é—®æ¬¡æ•°: %d\n", total_visits
    printf "ç‹¬ç«‹IPæ•°: %d\n", length(ips)
    printf "æˆåŠŸè¯·æ±‚: %d (%.1f%%)\n", successful_requests, successful_requests/total_visits*100
    printf "é”™è¯¯è¯·æ±‚: %d (%.1f%%)\n", error_requests, error_requests/total_visits*100
    printf "å¹³å‡æ¯IPè®¿é—®: %.1f æ¬¡\n", total_visits/length(ips)
    printf "ä¼ è¾“æ•°æ®é‡: %.2f MB\n", total_size/1024/1024
    
    # æ—¶é—´åˆ†å¸ƒåˆ†æ
    print "\n2. è®¿é—®æ—¶é—´åˆ†å¸ƒ"
    print "å°æ—¶  è®¿é—®æ¬¡æ•°  å æ¯”   å›¾å½¢æ˜¾ç¤º"
    print "--------------------------------"
    for(h=0; h<=23; h++) {
        hour_str = sprintf("%02d", h)
        count = hourly_visits[hour_str] + 0
        percentage = count / total_visits * 100
        
        # ç®€å•æ¡å½¢å›¾
        bar = ""
        bar_length = int(count / total_visits * 50)  # æœ€é•¿50å­—ç¬¦
        for(i=1; i<=bar_length; i++) bar = bar "â– "
        
        printf "%02dæ—¶ %8d %5.1f%% %s\n", h, count, percentage, bar
    }
    
    # çƒ­é—¨é¡µé¢åˆ†æ  
    print "\n3. çƒ­é—¨é¡µé¢ (Top 10)"
    print "è®¿é—®æ¬¡æ•°  é¡µé¢URL"
    print "--------------------"
    
    # å¯¹é¡µé¢æŒ‰è®¿é—®æ¬¡æ•°æ’åº
    n = asorti(pages, sorted_pages, "@val_num_desc")
    for(i=1; i<=10 && i<=n; i++) {
        page = sorted_pages[i]
        printf "%8d  %s\n", pages[page], page
    }
    
    # ä¸šåŠ¡é¡µé¢è½¬åŒ–åˆ†æ
    print "\n4. ä¸šåŠ¡é¡µé¢åˆ†æ"
    printf "å•†å“é¡µè®¿é—®: %d\n", product_views
    printf "åˆ†ç±»é¡µè®¿é—®: %d\n", category_views  
    printf "è´­ç‰©è½¦è®¿é—®: %d\n", cart_visits
    printf "ç»“è´¦é¡µè®¿é—®: %d\n", checkout_visits
    
    if(product_views > 0) {
        printf "è´­ç‰©è½¦è½¬åŒ–ç‡: %.2f%%\n", cart_visits/product_views*100
        printf "ç»“è´¦è½¬åŒ–ç‡: %.2f%%\n", checkout_visits/cart_visits*100
    }
}' access.log
```

### 8.3 è´¢åŠ¡æ•°æ®åˆ†æ


**ğŸ’° ä¼ä¸šè´¢åŠ¡åˆ†æåœºæ™¯**
```bash
# ä¼ä¸šæ”¶æ”¯åˆ†ææŠ¥è¡¨
awk -F, 'NR>1 {
    date = $1
    type = $2        # æ”¶å…¥/æ”¯å‡º
    category = $3    # ç±»åˆ«
    amount = $4      # é‡‘é¢
    description = $5 # æè¿°
    
    # æå–å¹´æœˆ
    split(date, dt, "-")
    year = dt[1]
    month = dt[1] "-" dt[2]
    
    # æŒ‰ç±»å‹ç»Ÿè®¡
    if(type == "æ”¶å…¥") {
        income_total += amount
        income_monthly[month] += amount
        income_category[category] += amount
    } else if(type == "æ”¯å‡º") {
        expense_total += amount
        expense_monthly[month] += amount
        expense_category[category] += amount
    }
    
    # æœˆåº¦æ±‡æ€»
    monthly_net[month] = income_monthly[month] - expense_monthly[month]
    
    record_count++
    
} END {
    print "=== è´¢åŠ¡åˆ†ææŠ¥å‘Š ==="
    
    # æ€»ä½“æƒ…å†µ
    net_profit = income_total - expense_total
    print "\n1. è´¢åŠ¡æ€»è§ˆ"
    printf "æ€»æ”¶å…¥: %12.2f å…ƒ\n", income_total
    printf "æ€»æ”¯å‡º: %12.2f å…ƒ\n", expense_total
    printf "å‡€åˆ©æ¶¦: %12.2f å…ƒ\n", net_profit
    printf "åˆ©æ¶¦ç‡: %11.1f%%\n", net_profit/income_total*100
    
    # æ”¶å…¥ç»“æ„åˆ†æ
    print "\n2. æ”¶å…¥ç»“æ„åˆ†æ"
    print "æ”¶å…¥ç±»åˆ«      é‡‘é¢        å æ¯”"
    print "------------------------------"
    for(cat in income_category) {
        percentage = income_category[cat] / income_total * 100
        printf "%-12s %10.2f %8.1f%%\n", cat, income_category[cat], percentage
    }
    
    # æ”¯å‡ºç»“æ„åˆ†æ  
    print "\n3. æ”¯å‡ºç»“æ„åˆ†æ"
    print "æ”¯å‡ºç±»åˆ«      é‡‘é¢        å æ¯”"
    print "------------------------------"
    for(cat in expense_category) {
        percentage = expense_category[cat] / expense_total * 100
        printf "%-12s %10.2f %8.1f%%\n", cat, expense_category[cat], percentage
    }
    
    # æœˆåº¦è¶‹åŠ¿åˆ†æ
    print "\n4. æœˆåº¦è¶‹åŠ¿åˆ†æ"
    print "æœˆä»½      æ”¶å…¥       æ”¯å‡º       å‡€åˆ©æ¶¦"
    print "--------------------------------------"
    
    # æŒ‰æœˆä»½æ’åºè¾“å‡º
    n = asorti(monthly_net, sorted_months)
    for(i=1; i<=n; i++) {
        m = sorted_months[i]
        printf "%-8s %10.2f %10.2f %10.2f\n", 
               m, income_monthly[m], expense_monthly[m], monthly_net[m]
    }
    
    # å¼‚å¸¸æ”¯å‡ºæé†’
    print "\n5. æ”¯å‡ºé¢„è­¦"
    avg_expense = expense_total / n
    for(m in expense_monthly) {
        if(expense_monthly[m] > avg_expense * 1.5) {
            printf "âš ï¸  %s æ”¯å‡ºå¼‚å¸¸é«˜: %.2f (è¶…å‡ºå¹³å‡å€¼%.1f%%)\n", 
                   m, expense_monthly[m], (expense_monthly[m]/avg_expense-1)*100
        }
    }
}' financial_records.csv
```

### 8.4 åº“å­˜ç®¡ç†æ•°æ®åˆ†æ


**ğŸ“¦ ä»“åº“åº“å­˜åˆ†æ**
```bash
# åº“å­˜å‘¨è½¬å’Œé¢„è­¦åˆ†æ
awk -F, 'NR>1 {
    product_id = $1
    product_name = $2
    category = $3
    current_stock = $4      # å½“å‰åº“å­˜
    min_stock = $5          # æœ€ä½åº“å­˜
    max_stock = $6          # æœ€é«˜åº“å­˜
    avg_daily_sales = $7    # å¹³å‡æ—¥é”€é‡
    unit_cost = $8          # å•ä½æˆæœ¬
    
    # åº“å­˜ä»·å€¼è®¡ç®—
    stock_value[product_id] = current_stock * unit_cost
    total_inventory_value += stock_value[product_id]
    
    # åº“å­˜å‘¨è½¬å¤©æ•°
    if(avg_daily_sales > 0) {
        turnover_days[product_id] = current_stock / avg_daily_sales
    } else {
        turnover_days[product_id] = 999  # æ— é”€é‡å•†å“
    }
    
    # åº“å­˜çŠ¶æ€åˆ†æ
    stock_ratio = current_stock / max_stock
    
    if(current_stock <= min_stock) {
        low_stock[product_id] = current_stock
        low_stock_count++
    } else if(stock_ratio > 0.8) {
        high_stock[product_id] = current_stock  
        high_stock_count++
    } else {
        normal_stock_count++
    }
    
    # æŒ‰ç±»åˆ«ç»Ÿè®¡
    category_stock[category] += current_stock
    category_value[category] += stock_value[product_id]
    category_count[category]++
    
    total_products++
    
} END {
    print "=== åº“å­˜ç®¡ç†åˆ†ææŠ¥å‘Š ==="
    
    # åº“å­˜æ€»è§ˆ
    print "\n1. åº“å­˜æ€»ä½“çŠ¶å†µ"
    printf "å•†å“æ€»æ•°: %d\n", total_products
    printf "åº“å­˜æ€»ä»·å€¼: %.2f å…ƒ\n", total_inventory_value
    printf "å¹³å‡å•å“åº“å­˜ä»·å€¼: %.2f å…ƒ\n", total_inventory_value/total_products
    
    print "\nåº“å­˜çŠ¶æ€åˆ†å¸ƒ:"
    printf "åº“å­˜ä¸è¶³: %d ä¸ªå•†å“ (%.1f%%)\n", low_stock_count, low_stock_count/total_products*100
    printf "åº“å­˜æ­£å¸¸: %d ä¸ªå•†å“ (%.1f%%)\n", normal_stock_count, normal_stock_count/total_products*100  
    printf "åº“å­˜è¿‡å¤š: %d ä¸ªå•†å“ (%.1f%%)\n", high_stock_count, high_stock_count/total_products*100
    
    # åº“å­˜é¢„è­¦åˆ—è¡¨
    print "\n2. åº“å­˜é¢„è­¦ (éœ€è¦è¡¥è´§)"
    if(low_stock_count > 0) {
        print "å•†å“ID    å½“å‰åº“å­˜  æœ€ä½åº“å­˜  é¢„è®¡ç¼ºè´§å¤©æ•°"
        print "----------------------------------------"
        for(pid in low_stock) {
            shortage_days = turnover_days[pid] < 999 ? turnover_days[pid] : "æ— é”€é‡"
            printf "%-8s %8d %8d %10s\n", pid, low_stock[pid], min_stock[pid], shortage_days
        }
    } else {
        print "âœ… æš‚æ— å•†å“éœ€è¦è¡¥è´§"
    }
    
    # æ»é”€å•†å“åˆ†æ
    print "\n3. æ»é”€å•†å“åˆ†æ (åº“å­˜å‘¨è½¬>30å¤©)"
    print "å•†å“ID    åº“å­˜å¤©æ•°  åº“å­˜ä»·å€¼"
    print "----------------------------"
    slow_moving_value = 0
    slow_moving_count = 0
    
    for(pid in turnover_days) {
        if(turnover_days[pid] > 30 && turnover_days[pid] < 999) {
            printf "%-8s %8.0f %10.2f\n", pid, turnover_days[pid], stock_value[pid]
            slow_moving_value += stock_value[pid]
            slow_moving_count++
        }
    }
    
    if(slow_moving_count > 0) {
        printf "\næ»é”€å•†å“å ç”¨èµ„é‡‘: %.2f å…ƒ (%.1f%%)\n", 
               slow_moving_value, slow_moving_value/total_inventory_value*100
    }
    
    # ç±»åˆ«åˆ†æ
    print "\n4. åˆ†ç±»åº“å­˜åˆ†æ"
    print "ç±»åˆ«        å•†å“æ•°  åº“å­˜ä»·å€¼    å æ¯”   å¹³å‡å‘¨è½¬å¤©æ•°"
    print "------------------------------------------------"
    
    for(cat in category_count) {
        percentage = category_value[cat] / total_inventory_value * 100
        
        # è®¡ç®—è¯¥ç±»åˆ«å¹³å‡å‘¨è½¬å¤©æ•°
        avg_turnover = 0
        cat_turnover_count = 0
        for(pid in turnover_days) {
            # è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…éœ€è¦å…³è”å•†å“ç±»åˆ«
            if(turnover_days[pid] < 999) {
                avg_turnover += turnover_days[pid]
                cat_turnover_count++
            }
        }
        if(cat_turnover_count > 0) avg_turnover /= cat_turnover_count
        
        printf "%-10s %6d %10.2f %6.1f%% %12.1f\n", 
               cat, category_count[cat], category_value[cat], percentage, avg_turnover
    }
}' inventory.csv
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ awkæ•°æ®åˆ†ææœ¬è´¨ï¼šé€è¡Œå¤„ç†æ–‡æœ¬æ•°æ®ï¼Œè¿›è¡Œç»Ÿè®¡è®¡ç®—
ğŸ”¸ æ ¸å¿ƒä¼˜åŠ¿ï¼šå¤„ç†å¤§æ–‡ä»¶å¿«é€Ÿã€å†…å­˜å ç”¨å°ã€å­¦ä¹ æˆæœ¬ä¸­ç­‰
ğŸ”¸ é€‚ç”¨åœºæ™¯ï¼šæ—¥å¿—åˆ†æã€CSVå¤„ç†ã€æŠ¥è¡¨ç”Ÿæˆã€æ•°æ®æ¸…æ´—
ğŸ”¸ å·¥ä½œæµç¨‹ï¼šæ•°æ®è¯»å–â†’è¿‡æ»¤æ¸…æ´—â†’ç»Ÿè®¡åˆ†æâ†’æ ¼å¼åŒ–è¾“å‡º
ğŸ”¸ å…³é”®æŠ€èƒ½ï¼šå­—æ®µåˆ†å‰²ã€æ¡ä»¶ç­›é€‰ã€æ•°ç»„ç»Ÿè®¡ã€æ ¼å¼åŒ–è¾“å‡º
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™é€‰æ‹©awkè¿›è¡Œæ•°æ®åˆ†æ**
```
ä¼˜å…ˆé€‰æ‹©awkçš„æƒ…å†µï¼š
âœ… æ–‡ä»¶å¤§å°è¶…è¿‡Excelå¤„ç†èƒ½åŠ›ï¼ˆ>1GBï¼‰
âœ… éœ€è¦åœ¨LinuxæœåŠ¡å™¨ä¸Šè‡ªåŠ¨åŒ–å¤„ç†
âœ… æ•°æ®æ ¼å¼ç›¸å¯¹ç®€å•ï¼ˆCSVã€æ—¥å¿—ã€å›ºå®šæ ¼å¼ï¼‰
âœ… éœ€è¦å¿«é€Ÿç»Ÿè®¡å’ŒæŠ¥è¡¨ç”Ÿæˆ
âœ… æ‰¹é‡å¤„ç†å¤šä¸ªæ–‡ä»¶

ä¸é€‚åˆç”¨awkçš„æƒ…å†µï¼š
âŒ éœ€è¦å¤æ‚çš„å›¾è¡¨å±•ç¤º
âŒ éœ€è¦æœºå™¨å­¦ä¹ ç®—æ³•
âŒ æ•°æ®æ ¼å¼å¤æ‚ï¼ˆXMLã€JSONåµŒå¥—ï¼‰
âŒ éœ€è¦æ•°æ®åº“æ“ä½œ
âŒ éœ€è¦ç”¨æˆ·äº¤äº’ç•Œé¢
```

**ğŸ”¹ awkæ•°æ®åˆ†æçš„æ ¸å¿ƒæ€ç»´**
```
é€è¡Œå¤„ç†æ€ç»´ï¼š
- æŠŠå¤§é—®é¢˜åˆ†è§£æˆæ¯è¡Œçš„å°é—®é¢˜
- ç”¨æ¨¡å¼åŒ¹é…ç­›é€‰éœ€è¦çš„æ•°æ®è¡Œ
- ç´¯åŠ ç»Ÿè®¡å¾—å‡ºæœ€ç»ˆç»“æœ

æ•°ç»„ç»Ÿè®¡æ€ç»´ï¼š
- ç”¨å…³è”æ•°ç»„åšåˆ†ç»„ç»Ÿè®¡
- æ•°ç»„ä¸‹æ ‡æ˜¯åˆ†ç»„æ¡ä»¶
- æ•°ç»„å€¼æ˜¯ç»Ÿè®¡ç»“æœ

æ ¼å¼åŒ–è¾“å‡ºæ€ç»´ï¼š
- å…ˆæ”¶é›†æ•°æ®ï¼ŒENDå—è¾“å‡º
- ç”¨printfæ§åˆ¶è¾“å‡ºæ ¼å¼
- é€‚å½“æ·»åŠ å›¾è¡¨å’Œè¯´æ˜
```

**ğŸ”¹ æ•°æ®åˆ†æé¡¹ç›®çš„æ ‡å‡†æµç¨‹**
```
ç¬¬1æ­¥ï¼šæ•°æ®æ¢ç´¢
- æŸ¥çœ‹æ•°æ®æ ¼å¼å’Œå­—æ®µ
- æ£€æŸ¥æ•°æ®è´¨é‡é—®é¢˜
- äº†è§£æ•°æ®è§„æ¨¡å’Œç‰¹ç‚¹

ç¬¬2æ­¥ï¼šæ•°æ®æ¸…æ´—
- å¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼
- æ ‡å‡†åŒ–æ•°æ®æ ¼å¼
- å»é™¤é‡å¤è®°å½•

ç¬¬3æ­¥ï¼šç»Ÿè®¡åˆ†æ
- åŸºç¡€ç»Ÿè®¡ï¼ˆå¹³å‡ã€æœ€å¤§ã€æœ€å°ï¼‰
- åˆ†ç»„ç»Ÿè®¡ï¼ˆæŒ‰ç±»åˆ«ã€æ—¶é—´ï¼‰
- è¶‹åŠ¿åˆ†æï¼ˆåŒæ¯”ã€ç¯æ¯”ï¼‰

ç¬¬4æ­¥ï¼šç»“æœå±•ç¤º
- ç”Ÿæˆæ¸…æ™°çš„æŠ¥è¡¨
- æ·»åŠ å›¾è¡¨å’Œè¯´æ˜
- æä¾›å†³ç­–å»ºè®®
```

### 9.3 å®é™…åº”ç”¨æŠ€èƒ½æ¸…å•


**ğŸ“Š å¿…é¡»æŒæ¡çš„awkæ•°æ®åˆ†ææŠ€èƒ½**

| æŠ€èƒ½ç±»åˆ« | **æ ¸å¿ƒæŠ€èƒ½** | **åº”ç”¨åœºæ™¯** | **æŒæ¡ç¨‹åº¦** |
|---------|------------|-------------|------------|
| ğŸ”¤ **å­—æ®µå¤„ç†** | `è®¾ç½®åˆ†éš”ç¬¦ã€æå–å­—æ®µ` | `CSVæ–‡ä»¶å¤„ç†` | `å¿…é¡»æŒæ¡` |
| ğŸ¯ **æ¡ä»¶è¿‡æ»¤** | `æ¨¡å¼åŒ¹é…ã€æ¡ä»¶åˆ¤æ–­` | `æ•°æ®ç­›é€‰æ¸…æ´—` | `å¿…é¡»æŒæ¡` |
| ğŸ“ˆ **æ•°ç»„ç»Ÿè®¡** | `å…³è”æ•°ç»„ã€ç´¯åŠ è®¡ç®—` | `åˆ†ç»„ç»Ÿè®¡åˆ†æ` | `å¿…é¡»æŒæ¡` |
| ğŸ“ **æ ¼å¼è¾“å‡º** | `printfæ ¼å¼åŒ–è¾“å‡º` | `æŠ¥è¡¨ç”Ÿæˆ` | `å¿…é¡»æŒæ¡` |
| ğŸ”¢ **æ•°å­¦è®¡ç®—** | `å››åˆ™è¿ç®—ã€ç»Ÿè®¡å‡½æ•°` | `æ•°æ®åˆ†æè®¡ç®—` | `å¿…é¡»æŒæ¡` |
| ğŸ§¹ **æ•°æ®æ¸…æ´—** | `æ­£åˆ™æ›¿æ¢ã€æ ¼å¼æ ‡å‡†åŒ–` | `æ•°æ®è´¨é‡æ§åˆ¶` | `é‡è¦æŒæ¡` |
| ğŸ“Š **é«˜çº§ç»Ÿè®¡** | `æ–¹å·®ã€ç™¾åˆ†ä½æ•°è®¡ç®—` | `æ·±åº¦æ•°æ®åˆ†æ` | `å¯é€‰æŒæ¡` |

**ğŸ› ï¸ å®ç”¨æŠ€èƒ½é€ŸæŸ¥è¡¨**
```
æ•°æ®è¯»å–æŠ€èƒ½ï¼š
awk -F, 'script' file.csv        # CSVæ–‡ä»¶å¤„ç†
awk 'NR>1 {script}' file.txt     # è·³è¿‡æ ‡é¢˜è¡Œ

æ•°æ®ç­›é€‰æŠ€èƒ½ï¼š
awk '$3>100 {print}' data.txt    # æ•°å€¼æ¡ä»¶ç­›é€‰
awk '/pattern/ {script}' file    # æ­£åˆ™æ¨¡å¼åŒ¹é…
awk 'NF==4 {script}' file        # å­—æ®µæ•°é‡ç­›é€‰

ç»Ÿè®¡è®¡ç®—æŠ€èƒ½ï¼š
sum += $2                        # ç´¯åŠ æ±‚å’Œ
count++                          # è®¡æ•°ç»Ÿè®¡
array[$1] += $2                  # åˆ†ç»„ç´¯åŠ 
if($2 > max) max = $2           # æ±‚æœ€å¤§å€¼

è¾“å‡ºæ ¼å¼æŠ€èƒ½ï¼š
printf "%-10s %8.2f\n", $1, $2  # æ ¼å¼åŒ–è¾“å‡º
print "å­—ç¬¦ä¸²" > "æ–‡ä»¶å"         # è¾“å‡ºåˆ°æ–‡ä»¶
print $0 | "sort -n"            # ç®¡é“è¾“å‡º
```

### 9.4 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ


**â“ æ•°æ®åˆ†æä¸­çš„å¸¸è§é—®é¢˜**

**é—®é¢˜1ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶å†…å­˜ä¸è¶³**
```
è§£å†³æ–¹æ¡ˆï¼š
- awkæœ¬èº«å†…å­˜å ç”¨å¾ˆå°ï¼Œé€è¡Œå¤„ç†
- é¿å…åœ¨æ•°ç»„ä¸­å­˜å‚¨å®Œæ•´æ•°æ®
- ä½¿ç”¨å¤–éƒ¨sortç­‰å·¥å…·è¾…åŠ©å¤„ç†
- å¿…è¦æ—¶åˆ†æ‰¹å¤„ç†å¤§æ–‡ä»¶
```

**é—®é¢˜2ï¼šæ•°æ®æ ¼å¼ä¸ç»Ÿä¸€**
```
è§£å†³æ–¹æ¡ˆï¼š
- ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¸…æ´—æ•°æ®
- ç¼–å†™æ•°æ®æ ‡å‡†åŒ–è„šæœ¬
- è®¾ç½®å¤šä¸ªåˆ†éš”ç¬¦ï¼šFS="[,\t]"
- å¤„ç†ç©ºå­—æ®µå’Œå¼‚å¸¸å€¼
```

**é—®é¢˜3ï¼šéœ€è¦å¤æ‚æ’åº**
```
è§£å†³æ–¹æ¡ˆï¼š
- ä½¿ç”¨awkæ”¶é›†æ•°æ®ï¼Œå¤–éƒ¨sortæ’åº
- åˆ©ç”¨PROCINFO["sorted_in"]æ§åˆ¶è¾“å‡ºé¡ºåº
- ç¼–å†™ç®€å•æ’åºç®—æ³•
- ç»“åˆUnixç®¡é“å·¥å…·
```

**é—®é¢˜4ï¼šè¾“å‡ºæ ¼å¼ä¸ç¾è§‚**
```
è§£å†³æ–¹æ¡ˆï¼š
- ä½¿ç”¨printfç²¾ç¡®æ§åˆ¶æ ¼å¼
- è®¡ç®—æœ€å¤§å®½åº¦åŠ¨æ€è°ƒæ•´
- æ·»åŠ åˆ†éš”çº¿å’Œè¡¨å¤´
- ç”ŸæˆHTMLæˆ–JSONæ ¼å¼
```

### 9.5 å­¦ä¹ è¿›é˜¶è·¯çº¿


**ğŸ“š awkæ•°æ®åˆ†æå­¦ä¹ è·¯å¾„**

**ğŸŒ± åˆçº§é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰**
```
å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡åŸºæœ¬è¯­æ³•å’Œå¸¸ç”¨åŠŸèƒ½
æ ¸å¿ƒå†…å®¹ï¼š
- awkåŸºæœ¬è¯­æ³•å’Œå†…ç½®å˜é‡
- å­—æ®µåˆ†å‰²å’ŒåŸºæœ¬ç»Ÿè®¡
- ç®€å•çš„æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯
- printfæ ¼å¼åŒ–è¾“å‡º

ç»ƒä¹ é¡¹ç›®ï¼š
- ç»Ÿè®¡æ–‡æœ¬æ–‡ä»¶çš„è¡Œæ•°å’Œå­—ç¬¦æ•°
- è®¡ç®—CSVæ–‡ä»¶ä¸­æŸåˆ—çš„å¹³å‡å€¼
- æå–æ—¥å¿—ä¸­çš„IPåœ°å€å¹¶ç»Ÿè®¡
```

**ğŸŒ¿ ä¸­çº§é˜¶æ®µï¼ˆ3-4å‘¨ï¼‰**
```
å­¦ä¹ ç›®æ ‡ï¼šèƒ½å¤„ç†å¤æ‚æ•°æ®åˆ†æä»»åŠ¡
æ ¸å¿ƒå†…å®¹ï¼š
- å…³è”æ•°ç»„å’Œå¤šç»´ç»Ÿè®¡
- æ­£åˆ™è¡¨è¾¾å¼å’Œæ–‡æœ¬å¤„ç†
- æ•°æ®æ¸…æ´—å’Œæ ¼å¼è½¬æ¢
- å¤æ‚æŠ¥è¡¨ç”Ÿæˆ

ç»ƒä¹ é¡¹ç›®ï¼š
- åˆ†æWebæœåŠ¡å™¨è®¿é—®æ—¥å¿—
- å¤„ç†é”€å”®æ•°æ®ç”Ÿæˆæœˆåº¦æŠ¥è¡¨
- æ¸…æ´—å’Œæ ‡å‡†åŒ–ç”¨æˆ·æ•°æ®
```

**ğŸŒ³ é«˜çº§é˜¶æ®µï¼ˆ5-6å‘¨ï¼‰**
```
å­¦ä¹ ç›®æ ‡ï¼šè§£å†³ä¼ä¸šçº§æ•°æ®åˆ†æé—®é¢˜
æ ¸å¿ƒå†…å®¹ï¼š
- é«˜çº§ç»Ÿè®¡åˆ†ææ–¹æ³•
- å¤šæ–‡ä»¶è”åˆå¤„ç†
- è‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§

ç»ƒä¹ é¡¹ç›®ï¼š
- æ„å»ºå®Œæ•´çš„ä¸šåŠ¡æ•°æ®åˆ†æç³»ç»Ÿ
- ç¼–å†™é€šç”¨æ•°æ®åˆ†æå·¥å…·
- å¤„ç†GBçº§å¤§æ–‡ä»¶åˆ†æ
```

### 9.6 æœ€ä½³å®è·µå»ºè®®


**ğŸ’¡ æ•°æ®åˆ†ææœ€ä½³å®è·µ**

**ä»£ç ç»„ç»‡**
```bash
# å¥½çš„è„šæœ¬ç»“æ„
BEGIN {
    # åˆå§‹åŒ–å˜é‡
    # è®¾ç½®è¾“å‡ºæ ¼å¼
}

# ä¸»å¤„ç†é€»è¾‘
/pattern/ {
    # æ•°æ®å¤„ç†
}

END {
    # ç»“æœè¾“å‡º
    # ç»Ÿè®¡æ±‡æ€»
}
```

**æ€§èƒ½ä¼˜åŒ–**
```bash
# ä¼˜åŒ–æŠ€å·§
1. æ—©æœŸè¿‡æ»¤ï¼šå…ˆç­›é€‰å†å¤„ç†
2. é¿å…é‡å¤è®¡ç®—ï¼šç¼“å­˜è®¡ç®—ç»“æœ  
3. åˆç†ä½¿ç”¨æ­£åˆ™ï¼šç®€å•å­—ç¬¦ä¸²åŒ¹é…ä¼˜äºæ­£åˆ™
4. è¾“å‡ºä¼˜åŒ–ï¼šæ‰¹é‡è¾“å‡ºè€Œä¸æ˜¯é€è¡Œè¾“å‡º
```

**é”™è¯¯å¤„ç†**
```bash
# å¥å£®çš„è„šæœ¬
{
    # æ£€æŸ¥å­—æ®µæ•°é‡
    if(NF < 4) {
        printf "è­¦å‘Šï¼šç¬¬%dè¡Œå­—æ®µä¸è¶³\n", NR > "/dev/stderr"
        next
    }
    
    # æ£€æŸ¥æ•°å€¼å­—æ®µ
    if($4 !~ /^[0-9.]+$/) {
        printf "è­¦å‘Šï¼šç¬¬%dè¡Œæ•°å€¼æ ¼å¼é”™è¯¯\n", NR > "/dev/stderr"
        next  
    }
    
    # æ­£å¸¸å¤„ç†é€»è¾‘
}
```

**ğŸ¯ æ ¸å¿ƒè®°å¿†è¦ç‚¹**
```
awkæ•°æ®åˆ†æä¸‰è¦ç´ ï¼š
1. å­—æ®µåˆ†å‰² - æŠŠæ•°æ®æŒ‰åˆ—å¤„ç†
2. æ¡ä»¶ç­›é€‰ - åªå¤„ç†éœ€è¦çš„æ•°æ®
3. æ•°ç»„ç»Ÿè®¡ - ç”¨æ•°ç»„åšåˆ†ç»„è®¡ç®—

awké€‚ç”¨åœºæ™¯å£è¯€ï¼š
å¤§æ–‡ä»¶å¿«å¤„ç†ï¼Œæ—¥å¿—åˆ†æå¼º
CSVè¡¨æ ¼å¥½ç»Ÿè®¡ï¼ŒæŠ¥è¡¨ç”Ÿæˆæ£’
æ•°æ®æ¸…æ´—æœ‰ä¸€å¥—ï¼Œè‡ªåŠ¨åŒ–ä¸æ…Œ

å­¦ä¹ é‡ç‚¹æ’åºï¼š
åŸºç¡€è¯­æ³• > æ•°ç»„ç»Ÿè®¡ > æ ¼å¼è¾“å‡º > æ­£åˆ™å¤„ç† > é«˜çº§æŠ€å·§
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- awkæ˜¯å¤„ç†ç»“æ„åŒ–æ–‡æœ¬æ•°æ®çš„åˆ©å™¨ï¼Œç‰¹åˆ«é€‚åˆæ—¥å¿—åˆ†æå’Œæ•°æ®ç»Ÿè®¡
- æŒæ¡"é€è¡Œå¤„ç†+æ•°ç»„ç»Ÿè®¡+æ ¼å¼åŒ–è¾“å‡º"ä¸‰å¤§æ ¸å¿ƒæŠ€èƒ½
- é‡ç‚¹åœ¨äºç†è§£ä¸šåŠ¡é€»è¾‘ï¼ŒæŠ€æœ¯è¯­æ³•æ˜¯å·¥å…·è€Œéç›®çš„
- ä¸å…¶ä»–Unixå·¥å…·é…åˆä½¿ç”¨æ•ˆæœæ›´ä½³ï¼Œä¸è¦è¯•å›¾ç”¨awkè§£å†³æ‰€æœ‰é—®é¢˜