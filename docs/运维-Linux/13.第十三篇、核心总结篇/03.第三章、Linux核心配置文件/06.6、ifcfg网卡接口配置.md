---
title: 6、ifcfg网卡接口配置
---
## 📚 目录

1. [网卡配置文件概述](#1-网卡配置文件概述)
2. [配置文件位置与命名规则](#2-配置文件位置与命名规则)
3. [核心配置参数详解](#3-核心配置参数详解)
4. [IP地址配置方式](#4-ip地址配置方式)
5. [DNS域名解析配置](#5-dns域名解析配置)
6. [防火墙区域配置](#6-防火墙区域配置)
7. [配置实战案例](#7-配置实战案例)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🌐 网卡配置文件概述


### 1.1 什么是ifcfg配置文件

**简单理解**：ifcfg配置文件就是Linux系统中用来设置网卡上网参数的配置文档

```
生活中的类比：
ifcfg配置文件 = 网络设置界面
就像你在Windows里设置网卡IP地址一样
Linux把这些设置写在配置文件里
```

**核心作用**：
- 🔸 **网卡识别**：告诉系统这是哪块网卡
- 🔸 **IP配置**：设置网卡的IP地址信息
- 🔸 **启动控制**：决定开机时是否自动启用网卡
- 🔸 **网络连接**：配置如何连接到网络

### 1.2 为什么需要这个配置文件

**实际需求场景**：
```
场景1：服务器固定IP
- 服务器需要固定的IP地址
- 客户端才能稳定访问服务

场景2：网络环境切换
- 笔记本在不同网络间切换
- 需要不同的网络配置

场景3：网络故障排查
- 网络连不通时需要检查配置
- 修改网络参数解决问题
```

---

## 2. 📁 配置文件位置与命名规则


### 2.1 配置文件存放位置

**标准路径**：`/etc/sysconfig/network-scripts/`

```
文件路径分解理解：
/etc/              ← 系统配置文件目录
/etc/sysconfig/    ← 系统服务配置目录  
/etc/sysconfig/network-scripts/  ← 网络脚本配置目录
```

### 2.2 文件命名规则

**命名格式**：`ifcfg-网卡名称`

```
常见命名示例：
ifcfg-eth0     ← 第一块以太网卡配置
ifcfg-eth1     ← 第二块以太网卡配置
ifcfg-ens33    ← VMware虚拟机常见网卡名
ifcfg-enp0s3   ← VirtualBox虚拟机常见网卡名
ifcfg-wlan0    ← 无线网卡配置
```

> 💡 **小贴士**：现代Linux系统网卡命名不再使用eth0、eth1，而是使用更具描述性的名称

### 2.3 查看当前网卡信息

```bash
# 查看所有网卡接口
ip addr show

# 查看指定网卡
ip addr show eth0

# 查看网卡配置文件
ls /etc/sysconfig/network-scripts/ifcfg-*
```

---

## 3. ⚙️ 核心配置参数详解


### 3.1 接口基本属性参数


#### 🔸 DEVICE（设备名称）

**含义**：指定网卡设备的名称
```bash
DEVICE=eth0
```
**通俗解释**：告诉系统这个配置文件是给哪块网卡用的，就像给网卡贴个标签

#### 🔸 NAME（连接名称）

**含义**：网络连接的显示名称
```bash
NAME="System eth0" 
```
**通俗解释**：给这个网络连接起个好记的名字，方便管理时识别

#### 🔸 TYPE（接口类型）

**含义**：指定网络接口的类型
```bash
TYPE=Ethernet
```

**常见类型对照**：

| 类型值 | **含义** | **使用场景** |
|--------|---------|-------------|
| `Ethernet` | `以太网接口` | `有线网卡连接` |
| `Wireless` | `无线网接口` | `WiFi无线连接` |
| `Bond` | `绑定接口` | `多网卡绑定` |
| `Bridge` | `桥接接口` | `虚拟化环境` |

### 3.2 启动协议配置


#### 🔸 BOOTPROTO（启动协议）

**含义**：决定网卡如何获取IP地址

```bash
# 三种主要配置方式
BOOTPROTO=static    # 静态IP（手动指定）
BOOTPROTO=dhcp      # 动态IP（自动获取）
BOOTPROTO=none      # 无协议（特殊用途）
```

**各种协议详解**：

```
static（静态IP）：
✅ 优点：IP地址固定，便于服务器使用
✅ 适用：服务器、固定设备
❌ 缺点：需要手动配置，容易冲突

dhcp（动态IP）：  
✅ 优点：自动获取，配置简单
✅ 适用：客户端、临时设备
❌ 缺点：IP地址可能变化

none（无协议）：
✅ 用途：特殊网络配置、桥接等
❌ 一般用户很少使用
```

### 3.3 开机自启配置


#### 🔸 ONBOOT（开机启动）

**含义**：控制系统启动时是否自动激活网卡
```bash
ONBOOT=yes    # 开机自动启动网卡
ONBOOT=no     # 开机不启动网卡
```

**使用建议**：
- **服务器**：建议设置为`yes`，确保网络服务可用
- **测试环境**：可设置为`no`，手动控制网络连接

---

## 4. 🌍 IP地址配置方式


### 4.1 静态IP配置（BOOTPROTO=static）


#### 核心参数组合

```bash
BOOTPROTO=static
IPADDR=192.168.1.100      # IP地址
NETMASK=255.255.255.0     # 子网掩码  
GATEWAY=192.168.1.1       # 默认网关
```

#### 🔸 IPADDR（IP地址）

**含义**：为网卡分配的IP地址
```bash
IPADDR=192.168.1.100
```

**IP地址选择原则**：
```
内网常用网段：
192.168.1.0/24    ← 家用路由器常用
192.168.0.0/24    ← 部分路由器使用  
10.0.0.0/8        ← 企业内网常用
172.16.0.0/12     ← 企业内网备选

选择建议：
- 要在同一网段内且不冲突
- 避免使用.1（通常是网关）
- 避免使用.255（广播地址）
```

#### 🔸 NETMASK（子网掩码）

**含义**：定义网络范围的掩码
```bash
NETMASK=255.255.255.0
```

**常用掩码对照**：

| 掩码值 | **CIDR表示** | **可用主机数** | **网络范围示例** |
|--------|-------------|---------------|-----------------|
| `255.255.255.0` | `/24` | `254台` | `192.168.1.1-192.168.1.254` |
| `255.255.0.0` | `/16` | `65534台` | `192.168.0.1-192.168.255.254` |
| `255.255.255.192` | `/26` | `62台` | `192.168.1.1-192.168.1.62` |

#### 🔸 GATEWAY（默认网关）

**含义**：访问外网时的出口地址
```bash
GATEWAY=192.168.1.1
```

**通俗理解**：网关就像小区的大门，要出去上网必须通过它

### 4.2 动态IP配置（BOOTPROTO=dhcp）


#### 基础DHCP配置

```bash
BOOTPROTO=dhcp
ONBOOT=yes
```

**DHCP工作流程**：
```
客户端                    DHCP服务器
   |                         |
   |--[1]发现请求----------->|  寻找DHCP服务器
   |<-[2]提供IP地址----------|  服务器提供可用IP
   |--[3]请求确认----------->|  客户端确认使用该IP
   |<-[4]确认分配-----------|  服务器确认分配完成

结果：客户端自动获得IP、网关、DNS等配置
```

### 4.3 配置实例对比


**静态IP完整配置**：
```bash
DEVICE=eth0
NAME="System eth0"
TYPE=Ethernet
BOOTPROTO=static
ONBOOT=yes
IPADDR=192.168.1.100
NETMASK=255.255.255.0  
GATEWAY=192.168.1.1
DNS1=8.8.8.8
DNS2=8.8.4.4
```

**动态IP完整配置**：
```bash
DEVICE=eth0
NAME="System eth0"  
TYPE=Ethernet
BOOTPROTO=dhcp
ONBOOT=yes
```

---

## 5. 🌐 DNS域名解析配置


### 5.1 DNS配置参数


#### 🔸 DNS1（首选DNS服务器）

**含义**：首选的域名解析服务器
```bash
DNS1=8.8.8.8
```

#### 🔸 DNS2（备用DNS服务器）

**含义**：备用的域名解析服务器
```bash
DNS2=8.8.4.4
```

### 5.2 常用DNS服务器推荐


```
国外公共DNS：
8.8.8.8 / 8.8.4.4        ← Google DNS（稳定）
1.1.1.1 / 1.0.0.1        ← Cloudflare DNS（快速）

国内公共DNS：  
223.5.5.5 / 223.6.6.6    ← 阿里云DNS
119.29.29.29 / 182.254.116.116  ← 腾讯DNS
114.114.114.114 / 114.114.115.115  ← 114DNS

选择建议：
- 国外服务器：使用Google DNS
- 国内服务器：使用阿里云或腾讯DNS  
- 企业内网：使用公司DNS服务器
```

### 5.3 DNS配置的重要性


**DNS作用示例**：
```
用户输入：www.baidu.com
DNS解析：www.baidu.com → 39.156.66.10
浏览器访问：39.156.66.10:80

没有DNS = 只能用IP地址访问网站
有了DNS = 可以用域名访问网站
```

> ⚠️ **注意事项**：如果不配置DNS，可以ping通IP但无法访问域名

---

## 6. 🔥 防火墙区域配置


### 6.1 ZONE参数详解


#### 🔸 ZONE（防火墙区域）

**含义**：指定网卡所属的防火墙安全区域
```bash
ZONE=public
```

### 6.2 防火墙区域类型


**firewalld区域说明**：

| 区域名称 | **信任级别** | **典型用途** | **默认规则** |
|---------|-------------|-------------|-------------|
| `public` | `低信任` | `公共网络` | `只允许必要服务` |
| `internal` | `中信任` | `内部网络` | `允许更多服务` |
| `trusted` | `完全信任` | `可信网络` | `允许所有流量` |
| `dmz` | `隔离区域` | `DMZ区域` | `严格限制规则` |

### 6.3 区域选择建议


```
服务器环境：
- 外网接口：使用public区域
- 内网接口：使用internal区域
- 管理接口：使用trusted区域

普通用户：
- 一般都使用public区域
- 特殊需求再考虑其他区域
```

### 6.4 查看和管理防火墙区域


```bash
# 查看当前区域
firewall-cmd --get-active-zones

# 查看网卡所在区域
firewall-cmd --get-zone-of-interface=eth0

# 更改网卡区域
firewall-cmd --zone=public --change-interface=eth0
```

---

## 7. 💻 配置实战案例


### 7.1 场景一：服务器静态IP配置


**需求场景**：配置Web服务器的网卡，要求IP固定为192.168.1.10

**完整配置文件**（`/etc/sysconfig/network-scripts/ifcfg-eth0`）：
```bash
# 网卡基本信息
DEVICE=eth0
NAME="Web Server Network"
TYPE=Ethernet

# IP配置（静态）
BOOTPROTO=static
IPADDR=192.168.1.10
NETMASK=255.255.255.0
GATEWAY=192.168.1.1

# 启动配置
ONBOOT=yes

# DNS配置
DNS1=8.8.8.8
DNS2=8.8.4.4

# 防火墙区域
ZONE=public
```

**配置后的操作步骤**：
```bash
# 1. 保存配置文件后重启网络
systemctl restart network

# 2. 验证配置是否生效
ip addr show eth0
ping www.baidu.com
```

### 7.2 场景二：笔记本动态IP配置


**需求场景**：笔记本电脑连接不同网络，使用DHCP自动获取IP

**配置文件**（`/etc/sysconfig/network-scripts/ifcfg-wlan0`）：
```bash
# 网卡基本信息  
DEVICE=wlan0
NAME="Laptop WiFi"
TYPE=Wireless

# IP配置（动态）
BOOTPROTO=dhcp

# 启动配置
ONBOOT=yes

# 防火墙区域
ZONE=public
```

### 7.3 场景三：多网卡服务器配置


**需求场景**：服务器有两块网卡，内外网分离

**外网网卡配置**（`ifcfg-eth0`）：
```bash
DEVICE=eth0
NAME="External Network"
TYPE=Ethernet
BOOTPROTO=static
IPADDR=203.0.113.10    # 公网IP
NETMASK=255.255.255.0
GATEWAY=203.0.113.1    # 公网网关
ONBOOT=yes
DNS1=8.8.8.8
ZONE=public
```

**内网网卡配置**（`ifcfg-eth1`）：
```bash
DEVICE=eth1  
NAME="Internal Network"
TYPE=Ethernet
BOOTPROTO=static
IPADDR=10.0.1.10      # 内网IP
NETMASK=255.255.255.0
# 注意：内网卡不设置GATEWAY
ONBOOT=yes
ZONE=internal
```

### 7.4 配置修改的标准流程


**操作步骤**：
```bash
# 1. 备份原配置（重要！）
cp /etc/sysconfig/network-scripts/ifcfg-eth0 /tmp/ifcfg-eth0.backup

# 2. 编辑配置文件
vi /etc/sysconfig/network-scripts/ifcfg-eth0

# 3. 重启网络服务
systemctl restart network

# 4. 验证配置
ip addr show
ping -c 3 www.baidu.com

# 5. 如果有问题，快速恢复
cp /tmp/ifcfg-eth0.backup /etc/sysconfig/network-scripts/ifcfg-eth0
systemctl restart network
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


```
🔸 ifcfg文件：Linux网卡配置文件，控制网络连接参数
🔸 配置位置：/etc/sysconfig/network-scripts/ifcfg-*
🔸 静态vs动态：static手动指定IP，dhcp自动获取IP
🔸 核心三要素：IP地址、子网掩码、默认网关  
🔸 DNS重要性：负责域名解析，影响网络访问
🔸 ONBOOT控制：决定开机是否自动启用网卡
```

### 8.2 关键参数记忆要点


**🔹 基础参数组合**：
```
DEVICE + NAME + TYPE    ← 网卡身份信息
BOOTPROTO + ONBOOT      ← 启动方式控制
IPADDR + NETMASK + GATEWAY  ← 静态IP三件套
DNS1 + DNS2             ← 域名解析配置
ZONE                    ← 防火墙安全区域
```

**🔹 配置选择原则**：
```
服务器场景：
- 使用静态IP配置（BOOTPROTO=static）
- 设置开机自启（ONBOOT=yes）
- 配置可靠的DNS服务器

客户端场景：
- 使用动态IP配置（BOOTPROTO=dhcp）
- 简化配置，减少手动设置
```

### 8.3 实践操作要点


**🔹 安全操作习惯**：
- ✅ 修改前必须备份原配置文件
- ✅ 测试环境先验证，生产环境再应用
- ✅ 保留远程连接窗口，防止网络中断

**🔹 故障排查思路**：
- 🔍 检查配置文件语法是否正确
- 🔍 验证IP地址是否在正确网段
- 🔍 确认网关地址是否可达
- 🔍 测试DNS解析是否正常

**🔹 常见配置错误**：
```
❌ IP地址与网段不匹配
❌ 网关配置错误导致无法上网  
❌ DNS配置缺失导致域名无法解析
❌ ONBOOT=no导致重启后网络不可用
❌ 防火墙区域配置不当影响服务访问
```

### 8.4 实际应用价值


- **系统管理**：掌握Linux服务器网络配置基础
- **故障处理**：快速定位和解决网络连接问题
- **环境部署**：为服务器配置合适的网络参数
- **安全加固**：通过防火墙区域控制网络访问权限

**核心记忆口诀**：
- ifcfg配置网卡连接，设备名称类型要认清
- 静态动态两种协议，IP网关DNS配齐全
- 开机启动ONBOOT控制，防火墙区域安全保证
- 配置修改先备份，重启验证保平安