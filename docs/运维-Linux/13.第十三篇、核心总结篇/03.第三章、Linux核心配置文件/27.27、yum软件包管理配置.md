---
title: 27ã€yumè½¯ä»¶åŒ…ç®¡ç†é…ç½®
---
## ðŸ“š ç›®å½•

1. [YUMè½¯ä»¶åŒ…ç®¡ç†æ¦‚è¿°](#1-YUMè½¯ä»¶åŒ…ç®¡ç†æ¦‚è¿°)
2. [YUMå…¨å±€é…ç½®æ–‡ä»¶è¯¦è§£](#2-YUMå…¨å±€é…ç½®æ–‡ä»¶è¯¦è§£)
3. [è½¯ä»¶ä»“åº“é…ç½®ç®¡ç†](#3-è½¯ä»¶ä»“åº“é…ç½®ç®¡ç†)
4. [ä»“åº“åœ°å€ä¸Žé•œåƒé…ç½®](#4-ä»“åº“åœ°å€ä¸Žé•œåƒé…ç½®)
5. [ä»“åº“å¯ç”¨ä¸Žå®‰å…¨éªŒè¯](#5-ä»“åº“å¯ç”¨ä¸Žå®‰å…¨éªŒè¯)
6. [ä¼˜å…ˆçº§ä¸ŽæŽ’é™¤é…ç½®](#6-ä¼˜å…ˆçº§ä¸ŽæŽ’é™¤é…ç½®)
7. [ç¼“å­˜ä¸Žæ€§èƒ½ä¼˜åŒ–](#7-ç¼“å­˜ä¸Žæ€§èƒ½ä¼˜åŒ–)
8. [å®žæˆ˜é…ç½®æ¡ˆä¾‹](#8-å®žæˆ˜é…ç½®æ¡ˆä¾‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ”§ YUMè½¯ä»¶åŒ…ç®¡ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯YUM

**YUM**ï¼ˆYellow dog Updater Modifiedï¼‰æ˜¯Red Hatç³»Linuxå‘è¡Œç‰ˆçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚

**ðŸŽ¯ æ ¸å¿ƒä½œç”¨**
```
ç®€å•ç†è§£ï¼šYUMå°±åƒæ‰‹æœºçš„åº”ç”¨å•†åº—
- å®‰è£…è½¯ä»¶ï¼šä»Žä»“åº“ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶åŒ…
- æ›´æ–°è½¯ä»¶ï¼šæ£€æŸ¥å¹¶æ›´æ–°å·²å®‰è£…çš„è½¯ä»¶
- åˆ é™¤è½¯ä»¶ï¼šå¸è½½ä¸éœ€è¦çš„è½¯ä»¶åŒ…
- ä¾èµ–ç®¡ç†ï¼šè‡ªåŠ¨å¤„ç†è½¯ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»
```

### 1.2 YUMçš„å·¥ä½œåŽŸç†

**ðŸ“‹ å·¥ä½œæµç¨‹**
```
ç”¨æˆ·æ‰§è¡Œå‘½ä»¤ â†’ YUMè¯»å–é…ç½® â†’ è¿žæŽ¥è½¯ä»¶ä»“åº“ â†’ ä¸‹è½½è½¯ä»¶åŒ… â†’ å®‰è£…åˆ°ç³»ç»Ÿ

è¯¦ç»†è¿‡ç¨‹ï¼š
1. è¯»å– /etc/yum.conf å…¨å±€é…ç½®
2. æ‰«æ /etc/yum.repos.d/ ä»“åº“é…ç½®
3. è¿žæŽ¥åˆ°é…ç½®çš„è½¯ä»¶ä»“åº“
4. æ£€æŸ¥è½¯ä»¶åŒ…ä¾èµ–å…³ç³»
5. ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶åŒ…
```

### 1.3 é…ç½®æ–‡ä»¶ä½“ç³»ç»“æž„

```
YUMé…ç½®æ–‡ä»¶å±‚æ¬¡ç»“æž„ï¼š

/etc/yum.conf                 â† å…¨å±€é…ç½®æ–‡ä»¶ï¼ˆä¸»é…ç½®ï¼‰
    â”œâ”€ åŸºæœ¬è®¾ç½®
    â”œâ”€ ç¼“å­˜é…ç½®  
    â””â”€ æ—¥å¿—é…ç½®

/etc/yum.repos.d/             â† ä»“åº“é…ç½®ç›®å½•
    â”œâ”€ CentOS-Base.repo       â† åŸºç¡€ä»“åº“
    â”œâ”€ epel.repo              â† ç¬¬ä¸‰æ–¹ä»“åº“
    â””â”€ custom.repo            â† è‡ªå®šä¹‰ä»“åº“
```

---

## 2. âš™ï¸ YUMå…¨å±€é…ç½®æ–‡ä»¶è¯¦è§£


### 2.1 /etc/yum.confæ–‡ä»¶ç»“æž„

**/etc/yum.conf** æ˜¯YUMçš„ä¸»é…ç½®æ–‡ä»¶ï¼ŒæŽ§åˆ¶YUMçš„å…¨å±€è¡Œä¸ºã€‚

**ðŸ“„ å…¸åž‹é…ç½®ç¤ºä¾‹**
```ini
[main]
cachedir=/var/cache/yum/$basearch/$releasever
keepcache=0
debuglevel=2
logfile=/var/log/yum.log
exactarch=1
obsoletes=1
gpgcheck=1
plugins=1
installonly_limit=5
```

### 2.2 æ ¸å¿ƒé…ç½®å‚æ•°è¯¦è§£


#### ðŸ—‚ï¸ ç¼“å­˜ç›¸å…³é…ç½®

| å‚æ•° | **ä½œç”¨è¯´æ˜Ž** | **æŽ¨èå€¼** | **å½±å“** |
|------|-------------|----------|---------|
| `cachedir` | `æŒ‡å®šç¼“å­˜ç›®å½•ä½ç½®` | `/var/cache/yum/` | `ä¸‹è½½çš„åŒ…å’Œå…ƒæ•°æ®å­˜å‚¨ä½ç½®` |
| `keepcache` | `æ˜¯å¦ä¿ç•™ä¸‹è½½çš„åŒ…` | `0`(ä¸ä¿ç•™) | `1ä¿ç•™å¯èŠ‚çœé‡å¤ä¸‹è½½` |
| `metadata_expire` | `å…ƒæ•°æ®è¿‡æœŸæ—¶é—´(ç§’)` | `21600`(6å°æ—¶) | `æŽ§åˆ¶ä»“åº“ä¿¡æ¯æ›´æ–°é¢‘çŽ‡` |

**ðŸ’¡ ç¼“å­˜é…ç½®å«ä¹‰**
- **cachedir**ï¼šå°±åƒæµè§ˆå™¨çš„ç¼“å­˜æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ä¸‹è½½çš„è½¯ä»¶åŒ…
- **keepcache=0**ï¼šå®‰è£…å®Œå°±åˆ é™¤å®‰è£…åŒ…ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´
- **keepcache=1**ï¼šä¿ç•™å®‰è£…åŒ…ï¼Œé‡è£…æ—¶ä¸ç”¨é‡æ–°ä¸‹è½½

#### ðŸ“ æ—¥å¿—ä¸Žè°ƒè¯•é…ç½®

```ini
# æ—¥å¿—é…ç½®
logfile=/var/log/yum.log          # æ—¥å¿—æ–‡ä»¶ä½ç½®
debuglevel=2                      # è°ƒè¯•ä¿¡æ¯è¯¦ç»†ç¨‹åº¦(0-10)

# debuglevelå«ä¹‰ï¼š
# 0 = åªè®°å½•ä¸¥é‡é”™è¯¯
# 2 = è®°å½•é‡è¦ä¿¡æ¯(æŽ¨è)
# 10 = è®°å½•æ‰€æœ‰è¯¦ç»†ä¿¡æ¯(è°ƒè¯•ç”¨)
```

#### ðŸ”’ å®‰å…¨ä¸ŽéªŒè¯é…ç½®

```ini
# GPGç­¾åéªŒè¯
gpgcheck=1                        # å¯ç”¨GPGç­¾åæ£€æŸ¥
localpkg_gpgcheck=0              # æœ¬åœ°åŒ…ä¸éªŒè¯GPG
repo_gpgcheck=0                  # ä»“åº“å…ƒæ•°æ®ä¸éªŒè¯GPG

# æž¶æž„æ£€æŸ¥
exactarch=1                      # ä¸¥æ ¼æ£€æŸ¥è½¯ä»¶åŒ…æž¶æž„åŒ¹é…
```

**ðŸ›¡ï¸ GPGéªŒè¯æœºåˆ¶**
```
GPGéªŒè¯çš„ä½œç”¨ï¼šç¡®ä¿è½¯ä»¶åŒ…æ²¡æœ‰è¢«ç¯¡æ”¹

å¼€å¯éªŒè¯ï¼šgpgcheck=1
â”œâ”€ ä¼˜ç‚¹ï¼šå®‰å…¨æ€§é«˜ï¼Œé˜²æ­¢æ¶æ„è½¯ä»¶
â””â”€ ç¼ºç‚¹ï¼šå¯èƒ½å› ä¸ºå¯†é’¥é—®é¢˜å¯¼è‡´å®‰è£…å¤±è´¥

å…³é—­éªŒè¯ï¼šgpgcheck=0  
â”œâ”€ ä¼˜ç‚¹ï¼šå®‰è£…é¡ºç•…ï¼Œä¸ä¼šå› å¯†é’¥é—®é¢˜ä¸­æ–­
â””â”€ ç¼ºç‚¹ï¼šå­˜åœ¨å®‰å…¨é£Žé™©
```

---

## 3. ðŸª è½¯ä»¶ä»“åº“é…ç½®ç®¡ç†


### 3.1 /etc/yum.repos.d/ç›®å½•

è¿™ä¸ªç›®å½•å­˜æ”¾æ‰€æœ‰çš„è½¯ä»¶ä»“åº“é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ª`.repo`æ–‡ä»¶å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶ä»“åº“ã€‚

**ðŸ“ å¸¸è§ä»“åº“æ–‡ä»¶**
```
/etc/yum.repos.d/
â”œâ”€ CentOS-Base.repo      # CentOSå®˜æ–¹åŸºç¡€ä»“åº“
â”œâ”€ CentOS-Updates.repo   # CentOSæ›´æ–°ä»“åº“  
â”œâ”€ epel.repo            # EPELç¬¬ä¸‰æ–¹ä»“åº“
â”œâ”€ docker-ce.repo       # Dockerå®˜æ–¹ä»“åº“
â””â”€ nginx.repo           # Nginxå®˜æ–¹ä»“åº“
```

### 3.2 ä»“åº“é…ç½®æ–‡ä»¶æ ¼å¼

**ðŸ“‹ æ ‡å‡†ä»“åº“é…ç½®ç»“æž„**
```ini
[ä»“åº“ID]                    # ä»“åº“å”¯ä¸€æ ‡è¯†ç¬¦
name=ä»“åº“æè¿°åç§°             # äººç±»å¯è¯»çš„ä»“åº“åç§°
baseurl=http://ä»“åº“åœ°å€/     # ä»“åº“çš„å®žé™…ä¸‹è½½åœ°å€
enabled=1                   # æ˜¯å¦å¯ç”¨æ­¤ä»“åº“ (1å¯ç”¨/0ç¦ç”¨)
gpgcheck=1                  # æ˜¯å¦æ£€æŸ¥GPGç­¾å
gpgkey=file:///å¯†é’¥æ–‡ä»¶è·¯å¾„  # GPGå¯†é’¥æ–‡ä»¶ä½ç½®
```

### 3.3 å®žé™…é…ç½®ç¤ºä¾‹è§£æž

```ini
# CentOSåŸºç¡€ä»“åº“é…ç½®ç¤ºä¾‹
[base]
name=CentOS-$releasever - Base
baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
enabled=1
priority=10
```

**ðŸ” é…ç½®å‚æ•°å«ä¹‰**
- **[base]**ï¼šä»“åº“IDï¼Œåœ¨ç³»ç»Ÿä¸­å”¯ä¸€æ ‡è¯†è¿™ä¸ªä»“åº“
- **name**ï¼šæ˜¾ç¤ºåç§°ï¼Œ`yum repolist`å‘½ä»¤ä¸­çœ‹åˆ°çš„åå­—
- **$releasever**ï¼šç³»ç»Ÿç‰ˆæœ¬å˜é‡ï¼Œå¦‚CentOS 7ä¸­ä¸º"7"
- **$basearch**ï¼šç³»ç»Ÿæž¶æž„å˜é‡ï¼Œå¦‚"x86_64"

---

## 4. ðŸŒ ä»“åº“åœ°å€ä¸Žé•œåƒé…ç½®


### 4.1 baseurlä¸Žmirrorlistçš„åŒºåˆ«

**ðŸ“ ä¸¤ç§ä»“åº“åœ°å€é…ç½®æ–¹å¼**

#### baseurlï¼ˆç›´æŽ¥åœ°å€ï¼‰

```ini
# æŒ‡å®šå…·ä½“çš„ä»“åº“åœ°å€
baseurl=http://mirror.centos.org/centos/7/os/x86_64/
        https://vault.centos.org/7.9.2009/os/x86_64/
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç›´æŽ¥è¿žæŽ¥ï¼Œé€Ÿåº¦å¯æŽ§
- âœ… å¯æŒ‡å®šå¤šä¸ªå¤‡ç”¨åœ°å€
- âœ… é€‚åˆä¼ä¸šå†…ç½‘çŽ¯å¢ƒ

#### mirrorlistï¼ˆé•œåƒåˆ—è¡¨ï¼‰

```ini
# ä»Žé•œåƒåˆ—è¡¨ä¸­è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„
mirrorlist=http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os
```

**ä¼˜ç‚¹**ï¼š
- âœ… è‡ªåŠ¨é€‰æ‹©æœ€è¿‘çš„é•œåƒç«™ç‚¹
- âœ… æä¾›å®¹é”™æœºåˆ¶
- âœ… é€‚åˆå…¬ç½‘çŽ¯å¢ƒ

### 4.2 å›½å†…é•œåƒæºé…ç½®

**ðŸš€ å¸¸ç”¨å›½å†…é•œåƒç«™ç‚¹**

```ini
# é˜¿é‡Œäº‘é•œåƒæºï¼ˆæŽ¨èï¼‰
[aliyun-base]
name=CentOS Base - Aliyun
baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/
enabled=1
gpgcheck=1

# æ¸…åŽå¤§å­¦é•œåƒæº
[tuna-base] 
name=CentOS Base - TUNA
baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/
enabled=1
gpgcheck=1

# ç½‘æ˜“é•œåƒæº
[163-base]
name=CentOS Base - 163
baseurl=http://mirrors.163.com/centos/$releasever/os/$basearch/
enabled=1
gpgcheck=1
```

### 4.3 é•œåƒæºåˆ‡æ¢å®žæˆ˜

**ðŸ”„ å¿«é€Ÿåˆ‡æ¢åˆ°å›½å†…é•œåƒ**

**æ­¥éª¤1ï¸âƒ£**ï¼šå¤‡ä»½åŽŸé…ç½®
```bash
# å¤‡ä»½åŽŸå§‹é…ç½®æ–‡ä»¶
cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
```

**æ­¥éª¤2ï¸âƒ£**ï¼šä¸‹è½½æ–°é…ç½®
```bash
# ä¸‹è½½é˜¿é‡Œäº‘æºé…ç½®
wget -O /etc/yum.repos.d/CentOS-Base.repo \
  http://mirrors.aliyun.com/repo/Centos-7.repo
```

**æ­¥éª¤3ï¸âƒ£**ï¼šæ¸…ç†å¹¶æ›´æ–°ç¼“å­˜
```bash
yum clean all && yum makecache
```

---

## 5. ðŸ” ä»“åº“å¯ç”¨ä¸Žå®‰å…¨éªŒè¯


### 5.1 enabledå‚æ•°æŽ§åˆ¶

**enabledå‚æ•°**æŽ§åˆ¶ä»“åº“æ˜¯å¦è¢«YUMä½¿ç”¨ã€‚

```ini
# å¯ç”¨ä»“åº“
enabled=1     # YUMä¼šä½¿ç”¨æ­¤ä»“åº“

# ç¦ç”¨ä»“åº“  
enabled=0     # YUMå¿½ç•¥æ­¤ä»“åº“
```

**ðŸ’¡ ä½¿ç”¨åœºæ™¯**
```
enabled=1ï¼š
â”œâ”€ å¸¸ç”¨ä»“åº“ï¼šbaseã€updatesã€extras
â”œâ”€ ç¨³å®šä»“åº“ï¼šç»è¿‡æµ‹è¯•çš„è½¯ä»¶åŒ…
â””â”€ ä¿¡ä»»ä»“åº“ï¼šå®˜æ–¹æˆ–æƒå¨æœºæž„æä¾›

enabled=0ï¼š
â”œâ”€ æµ‹è¯•ä»“åº“ï¼šå¯èƒ½ä¸ç¨³å®šçš„è½¯ä»¶
â”œâ”€ ä¸´æ—¶ç¦ç”¨ï¼šæš‚æ—¶ä¸éœ€è¦çš„ä»“åº“  
â””â”€ é—®é¢˜ä»“åº“ï¼šå­˜åœ¨å…¼å®¹æ€§é—®é¢˜çš„ä»“åº“
```

### 5.2 gpgcheckå®‰å…¨éªŒè¯æœºåˆ¶

**GPGæ£€æŸ¥**ç¡®ä¿è½¯ä»¶åŒ…çš„å®Œæ•´æ€§å’Œæ¥æºå¯é æ€§ã€‚

**ðŸ”’ ä¸‰çº§éªŒè¯é…ç½®**
```ini
# å…¨å±€é…ç½®ï¼ˆ/etc/yum.confï¼‰
gpgcheck=1                    # å…¨å±€å¯ç”¨GPGæ£€æŸ¥

# ä»“åº“é…ç½®
gpgcheck=1                    # ä»“åº“çº§GPGæ£€æŸ¥
repo_gpgcheck=0               # ä»“åº“å…ƒæ•°æ®GPGæ£€æŸ¥  
localpkg_gpgcheck=0           # æœ¬åœ°åŒ…GPGæ£€æŸ¥
```

### 5.3 GPGå¯†é’¥ç®¡ç†

**ðŸ”‘ å¯†é’¥æ–‡ä»¶ä½ç½®**
```bash
# ç³»ç»Ÿé»˜è®¤GPGå¯†é’¥ç›®å½•
ls /etc/pki/rpm-gpg/
RPM-GPG-KEY-CentOS-7          # CentOS 7å®˜æ–¹å¯†é’¥
RPM-GPG-KEY-EPEL-7            # EPELä»“åº“å¯†é’¥
```

**å¯¼å…¥æ–°çš„GPGå¯†é’¥**
```bash
# å¯¼å…¥å¯†é’¥æ–‡ä»¶
rpm --import /path/to/gpg-key-file

# æŸ¥çœ‹å·²å¯¼å…¥çš„å¯†é’¥
rpm -q gpg-pubkey --qf '%{name}-%{version}-%{release} --> %{summary}\n'
```

---

## 6. âš¡ ä¼˜å…ˆçº§ä¸ŽæŽ’é™¤é…ç½®


### 6.1 priorityä»“åº“ä¼˜å…ˆçº§

**priorityå‚æ•°**æŽ§åˆ¶å¤šä¸ªä»“åº“é—´çš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚

```ini
# å®˜æ–¹ä»“åº“ - æœ€é«˜ä¼˜å…ˆçº§
[base]
priority=10

# EPELä»“åº“ - ä¸­ç­‰ä¼˜å…ˆçº§  
[epel]
priority=20

# æµ‹è¯•ä»“åº“ - ä½Žä¼˜å…ˆçº§
[testing]
priority=99
```

**ðŸŽ¯ ä¼˜å…ˆçº§é…ç½®ç­–ç•¥**
```
ä¼˜å…ˆçº§è§„åˆ’ï¼š
é«˜ä¼˜å…ˆçº§(1-20)ï¼š   å®˜æ–¹ä»“åº“ã€ç¨³å®šä»“åº“
ä¸­ç­‰ä¼˜å…ˆçº§(21-50)ï¼š ç¬¬ä¸‰æ–¹ä¿¡ä»»ä»“åº“
ä½Žä¼˜å…ˆçº§(51-99)ï¼š  æµ‹è¯•ä»“åº“ã€å®žéªŒæ€§ä»“åº“

ä½œç”¨æœºåˆ¶ï¼š
å½“å¤šä¸ªä»“åº“æœ‰ç›¸åŒè½¯ä»¶åŒ…æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨priorityå€¼å°çš„ä»“åº“
```

### 6.2 excludeè½¯ä»¶åŒ…æŽ’é™¤

**excludeå‚æ•°**è®©YUMå¿½ç•¥æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼Œé¿å…æ„å¤–å®‰è£…æˆ–æ›´æ–°ã€‚

**ðŸ“‹ å…¨å±€æŽ’é™¤é…ç½®**
```ini
# åœ¨ /etc/yum.conf ä¸­å…¨å±€æŽ’é™¤
[main]
exclude=kernel* mysql* php*
```

**ðŸ“‹ ä»“åº“çº§æŽ’é™¤é…ç½®**
```ini
# åœ¨ä»“åº“é…ç½®ä¸­æŽ’é™¤
[epel]
name=Extra Packages for Enterprise Linux 7
exclude=nagios* zabbix*
```

**ðŸ’¼ å®žé™…åº”ç”¨åœºæ™¯**
```
å†…æ ¸æŽ’é™¤ï¼šexclude=kernel*
â””â”€ é˜²æ­¢è‡ªåŠ¨æ›´æ–°å†…æ ¸å¯¼è‡´ç³»ç»Ÿé—®é¢˜

æ•°æ®åº“æŽ’é™¤ï¼šexclude=mysql* mariadb*
â””â”€ ä½¿ç”¨è‡ªç¼–è¯‘ç‰ˆæœ¬ï¼Œé¿å…åŒ…ç®¡ç†å™¨è¦†ç›–

å¼€å‘çŽ¯å¢ƒï¼šexclude=php* python*  
â””â”€ ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼Œé˜²æ­¢ä¾èµ–å†²çª
```

---

## 7. ðŸ’¾ ç¼“å­˜ä¸Žæ€§èƒ½ä¼˜åŒ–


### 7.1 ç¼“å­˜æœºåˆ¶è¯¦è§£

YUMç¼“å­˜ç³»ç»Ÿæé«˜è½¯ä»¶åŒ…å®‰è£…æ•ˆçŽ‡ï¼Œå‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—ã€‚

**ðŸ“ ç¼“å­˜ç›®å½•ç»“æž„**
```
/var/cache/yum/x86_64/7/
â”œâ”€ base/                    # baseä»“åº“ç¼“å­˜
â”‚   â”œâ”€ packages/           # ä¸‹è½½çš„RPMåŒ…
â”‚   â””â”€ repodata/          # ä»“åº“å…ƒæ•°æ®
â”œâ”€ epel/                   # epelä»“åº“ç¼“å­˜
â””â”€ updates/                # updatesä»“åº“ç¼“å­˜
```

### 7.2 ç¼“å­˜ç›¸å…³é…ç½®ä¼˜åŒ–

```ini
# ç¼“å­˜é…ç½®å‚æ•°
cachedir=/var/cache/yum/$basearch/$releasever    # ç¼“å­˜ç›®å½•
keepcache=1                                      # ä¿ç•™ä¸‹è½½åŒ…
metadata_expire=7200                             # å…ƒæ•°æ®2å°æ—¶è¿‡æœŸ
metadata_expire_filter=never                     # å…ƒæ•°æ®è¿‡æœŸè¿‡æ»¤
```

**âš™ï¸ é…ç½®ä¼˜åŒ–å»ºè®®**
```
ç”Ÿäº§çŽ¯å¢ƒé…ç½®ï¼š
keepcache=1              # ä¿ç•™åŒ…ï¼Œä¾¿äºŽç¦»çº¿å®‰è£…
metadata_expire=21600    # 6å°æ—¶æ›´æ–°ä¸€æ¬¡å…ƒæ•°æ®

å¼€å‘çŽ¯å¢ƒé…ç½®ï¼š
keepcache=0              # ä¸ä¿ç•™åŒ…ï¼ŒèŠ‚çœç©ºé—´  
metadata_expire=1800     # 30åˆ†é’Ÿæ›´æ–°å…ƒæ•°æ®ï¼ŒèŽ·å–æœ€æ–°åŒ…
```

### 7.3 ç¼“å­˜ç®¡ç†å‘½ä»¤

```bash
# ç¼“å­˜ç®¡ç†å¸¸ç”¨å‘½ä»¤
yum clean packages        # æ¸…ç†ä¸‹è½½çš„åŒ…
yum clean metadata       # æ¸…ç†å…ƒæ•°æ®ç¼“å­˜
yum clean all            # æ¸…ç†æ‰€æœ‰ç¼“å­˜
yum makecache            # é‡å»ºç¼“å­˜
yum makecache fast       # å¿«é€Ÿé‡å»ºç¼“å­˜
```

---

## 8. ðŸ› ï¸ å®žæˆ˜é…ç½®æ¡ˆä¾‹


### 8.1 ä¼ä¸šçŽ¯å¢ƒå®Œæ•´é…ç½®

**åœºæ™¯**ï¼šä¼ä¸šå†…ç½‘çŽ¯å¢ƒï¼Œä½¿ç”¨æœ¬åœ°é•œåƒæºï¼Œéœ€è¦å®‰å…¨éªŒè¯ã€‚

```ini
# /etc/yum.conf å…¨å±€é…ç½®
[main]
cachedir=/var/cache/yum/$basearch/$releasever
keepcache=1
debuglevel=2
logfile=/var/log/yum.log
exactarch=1
obsoletes=1
gpgcheck=1
plugins=1
exclude=kernel*
timeout=30
retries=10
```

**ðŸ“‹ ä¼ä¸šä»“åº“é…ç½®ç¤ºä¾‹**
```ini
# /etc/yum.repos.d/enterprise.repo
[enterprise-base]
name=Enterprise Base Repository
baseurl=http://yum.company.com/centos/7/os/x86_64/
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Enterprise
priority=10

[enterprise-updates]
name=Enterprise Updates Repository  
baseurl=http://yum.company.com/centos/7/updates/x86_64/
enabled=1
gpgcheck=1
priority=15
```

### 8.2 å¼€å‘çŽ¯å¢ƒå¿«é€Ÿé…ç½®

**åœºæ™¯**ï¼šå¼€å‘æµ‹è¯•çŽ¯å¢ƒï¼Œéœ€è¦å¤šç§è½¯ä»¶æºï¼Œè¿½æ±‚å®‰è£…é€Ÿåº¦ã€‚

```bash
#!/bin/bash
# å¼€å‘çŽ¯å¢ƒYUMæºå¿«é€Ÿé…ç½®è„šæœ¬

# å¤‡ä»½åŽŸé…ç½®
cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup

# é…ç½®é˜¿é‡Œäº‘é•œåƒæº
cat > /etc/yum.repos.d/CentOS-Base.repo << 'EOF'
[base]
name=CentOS Base - Aliyun
baseurl=http://mirrors.aliyun.com/centos/7/os/x86_64/
enabled=1
gpgcheck=0
priority=10

[updates]
name=CentOS Updates - Aliyun
baseurl=http://mirrors.aliyun.com/centos/7/updates/x86_64/
enabled=1  
gpgcheck=0
priority=10

[extras]
name=CentOS Extras - Aliyun
baseurl=http://mirrors.aliyun.com/centos/7/extras/x86_64/
enabled=1
gpgcheck=0
priority=10
EOF

# æ·»åŠ EPELæº
yum install -y epel-release

# æ¸…ç†å¹¶é‡å»ºç¼“å­˜
yum clean all && yum makecache
```

### 8.3 å¤šç‰ˆæœ¬PHPçŽ¯å¢ƒé…ç½®

**åœºæ™¯**ï¼šéœ€è¦å®‰è£…å¤šä¸ªPHPç‰ˆæœ¬ï¼Œä½¿ç”¨Remiä»“åº“ã€‚

```ini
# /etc/yum.repos.d/remi.repo
[remi]
name=Remi's RPM repository for Enterprise Linux 7
baseurl=http://rpms.remirepo.net/enterprise/7/remi/x86_64/
enabled=0
gpgcheck=1
priority=30

[remi-php74]
name=Remi's PHP 7.4 RPM repository  
baseurl=http://rpms.remirepo.net/enterprise/7/php74/x86_64/
enabled=0
gpgcheck=1
priority=30

[remi-php80]
name=Remi's PHP 8.0 RPM repository
baseurl=http://rpms.remirepo.net/enterprise/7/php80/x86_64/
enabled=0
gpgcheck=1  
priority=30
```

**ðŸš€ ä½¿ç”¨æ–¹æ³•**
```bash
# å®‰è£…PHP 7.4
yum install --enablerepo=remi-php74 php php-cli php-common

# å®‰è£…PHP 8.0
yum install --enablerepo=remi-php80 php80 php80-php-cli
```

---

## 9. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŽŒæ¡çš„é…ç½®æ–‡ä»¶

```
ðŸ”¸ /etc/yum.confï¼šYUMå…¨å±€é…ç½®ï¼ŒæŽ§åˆ¶æ•´ä½“è¡Œä¸º
ðŸ”¸ /etc/yum.repos.d/ï¼šä»“åº“é…ç½®ç›®å½•ï¼Œç®¡ç†è½¯ä»¶æº
ðŸ”¸ baseurl/mirrorlistï¼šä»“åº“åœ°å€é…ç½®ï¼Œå†³å®šä¸‹è½½æ¥æº
ðŸ”¸ enabledï¼šä»“åº“å¯ç”¨å¼€å…³ï¼ŒæŽ§åˆ¶æ˜¯å¦ä½¿ç”¨ä»“åº“
ðŸ”¸ gpgcheckï¼šå®‰å…¨éªŒè¯å¼€å…³ï¼Œç¡®ä¿è½¯ä»¶åŒ…å®‰å…¨æ€§
```

### 9.2 å…³é”®é…ç½®å‚æ•°ç†è§£

**ðŸ”¹ ä»“åº“åœ°å€é…ç½®**
```
baseurlï¼šç›´æŽ¥æŒ‡å®šä»“åº“åœ°å€
â”œâ”€ é€‚ç”¨ï¼šä¼ä¸šå†…ç½‘ã€æŒ‡å®šé•œåƒç«™
â”œâ”€ æ ¼å¼ï¼šhttp://mirror.site.com/path/
â””â”€ ä¼˜ç‚¹ï¼šå¯æŽ§æ€§å¼ºï¼Œé€Ÿåº¦ç¨³å®š

mirrorlistï¼šé•œåƒåˆ—è¡¨è‡ªåŠ¨é€‰æ‹©
â”œâ”€ é€‚ç”¨ï¼šå…¬ç½‘çŽ¯å¢ƒã€è‡ªåŠ¨ä¼˜åŒ–
â”œâ”€ æ ¼å¼ï¼šhttp://mirrorlist.site.com/?params
â””â”€ ä¼˜ç‚¹ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜é•œåƒ
```

**ðŸ”¹ å®‰å…¨ä¸Žæ€§èƒ½å¹³è¡¡**
```
é«˜å®‰å…¨çŽ¯å¢ƒï¼š
gpgcheck=1 + priorityé…ç½® + excludeä¿æŠ¤
é€‚ç”¨ï¼šç”Ÿäº§æœåŠ¡å™¨ã€ä¼ä¸šçŽ¯å¢ƒ

é«˜æ•ˆçŽ‡çŽ¯å¢ƒï¼š
gpgcheck=0 + keepcache=1 + å›½å†…é•œåƒæº  
é€‚ç”¨ï¼šå¼€å‘æµ‹è¯•ã€ä¸ªäººå­¦ä¹ 
```

**ðŸ”¹ ç¼“å­˜ç­–ç•¥é€‰æ‹©**
```
ç£ç›˜å……è£•ï¼škeepcache=1ï¼Œä¿ç•™ä¸‹è½½åŒ…
ç£ç›˜ç´§å¼ ï¼škeepcache=0ï¼ŒåŠæ—¶æ¸…ç†ç¼“å­˜
ç½‘ç»œè‰¯å¥½ï¼šmetadata_expireçŸ­ï¼ŒåŠæ—¶æ›´æ–°
ç½‘ç»œè¾ƒå·®ï¼šmetadata_expireé•¿ï¼Œå‡å°‘è®¿é—®
```

### 9.3 å®žé™…åº”ç”¨æŒ‡å¯¼åŽŸåˆ™

- **ç”Ÿäº§çŽ¯å¢ƒ**ï¼šå®‰å…¨ç¬¬ä¸€ï¼Œå¯ç”¨GPGéªŒè¯ï¼Œä½¿ç”¨ç¨³å®šä»“åº“
- **å¼€å‘çŽ¯å¢ƒ**ï¼šæ•ˆçŽ‡ä¼˜å…ˆï¼Œå¯å…³é—­éªŒè¯ï¼Œä½¿ç”¨å¿«é€Ÿé•œåƒæº  
- **ç¦»çº¿çŽ¯å¢ƒ**ï¼šæ­å»ºæœ¬åœ°ä»“åº“ï¼Œä¿ç•™ç¼“å­˜åŒ…
- **å¤šç‰ˆæœ¬éœ€æ±‚**ï¼šåˆç†é…ç½®ä¼˜å…ˆçº§ï¼ŒæŒ‰éœ€å¯ç”¨ä»“åº“

**æ ¸å¿ƒè®°å¿†**ï¼š
- YUMé…ç½®åˆ†ä¸¤å±‚ï¼šå…¨å±€é…ç½®ç®¡æ•´ä½“ï¼Œä»“åº“é…ç½®ç®¡æ¥æº
- å®‰å…¨ä¸Žæ•ˆçŽ‡è¦å¹³è¡¡ï¼šç”Ÿäº§é‡å®‰å…¨ï¼Œå¼€å‘é‡é€Ÿåº¦
- ç¼“å­˜åˆç†ç”¨ï¼šç©ºé—´å¤Ÿå°±ç•™ç€ï¼Œç½‘ç»œå·®å°±ç¼“å­˜
- ä»“åº“ä¼˜å…ˆçº§ï¼šå®˜æ–¹æœ€é«˜ï¼Œç¬¬ä¸‰æ–¹æ¬¡ä¹‹ï¼Œæµ‹è¯•æœ€ä½Ž