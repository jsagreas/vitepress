---
title: 10ã€é¢„å®šä¹‰æœåŠ¡ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [é¢„å®šä¹‰æœåŠ¡æ¦‚å¿µç†è§£](#1-é¢„å®šä¹‰æœåŠ¡æ¦‚å¿µç†è§£)
2. [æœåŠ¡åˆ—è¡¨æŸ¥çœ‹ä¸ç®¡ç†](#2-æœåŠ¡åˆ—è¡¨æŸ¥çœ‹ä¸ç®¡ç†)
3. [æœåŠ¡æ·»åŠ ä¸ç§»é™¤æ“ä½œ](#3-æœåŠ¡æ·»åŠ ä¸ç§»é™¤æ“ä½œ)
4. [å¸¸ç”¨æœåŠ¡å¿«é€Ÿé…ç½®](#4-å¸¸ç”¨æœåŠ¡å¿«é€Ÿé…ç½®)
5. [æœåŠ¡ç»„åˆé…ç½®ç­–ç•¥](#5-æœåŠ¡ç»„åˆé…ç½®ç­–ç•¥)
6. [è‡ªå®šä¹‰æœåŠ¡åˆ›å»º](#6-è‡ªå®šä¹‰æœåŠ¡åˆ›å»º)
7. [æœåŠ¡é…ç½®éªŒè¯ä¸æ’é”™](#7-æœåŠ¡é…ç½®éªŒè¯ä¸æ’é”™)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ é¢„å®šä¹‰æœåŠ¡æ¦‚å¿µç†è§£


### 1.1 ä»€ä¹ˆæ˜¯é¢„å®šä¹‰æœåŠ¡


**ç®€å•ç†è§£**ï¼šé¢„å®šä¹‰æœåŠ¡å°±æ˜¯firewalldæå‰ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½çš„"æœåŠ¡åŒ…"ï¼Œæ¯ä¸ªåŒ…é‡Œé¢éƒ½åŒ…å«äº†ç‰¹å®šåº”ç”¨æ‰€éœ€è¦çš„ç«¯å£å’Œåè®®è§„åˆ™ã€‚

```
æƒ³è±¡ä¸€ä¸‹ï¼š
ä½ è¦å¼€ä¸€å®¶é¤å…ï¼Œéœ€è¦å‡†å¤‡å„ç§è®¾å¤‡
- ä¸­é¤å…å¥—é¤ï¼šç‚’é”…ã€è’¸ç¬¼ã€ç‡ƒæ°”ç¶...
- è¥¿é¤å…å¥—é¤ï¼šçƒ¤ç®±ã€å¹³åº•é”…ã€çº¢é…’æ¯...
- å’–å•¡å…å¥—é¤ï¼šå’–å•¡æœºã€ç£¨è±†æœºã€æ¯å­...

firewalldçš„é¢„å®šä¹‰æœåŠ¡å°±åƒè¿™äº›"å¥—é¤"
- sshæœåŠ¡ï¼šåŒ…å«22ç«¯å£+TCPåè®®
- httpæœåŠ¡ï¼šåŒ…å«80ç«¯å£+TCPåè®®  
- ftpæœåŠ¡ï¼šåŒ…å«21ç«¯å£+å¤šä¸ªç«¯å£èŒƒå›´
```

### 1.2 é¢„å®šä¹‰æœåŠ¡çš„ä½œç”¨


**æ ¸å¿ƒä½œç”¨**ï¼šè®©æˆ‘ä»¬ä¸ç”¨è®°ä½æ¯ä¸ªåº”ç”¨éœ€è¦ä»€ä¹ˆç«¯å£ï¼Œç›´æ¥ç”¨æœåŠ¡åå°±èƒ½é…ç½®é˜²ç«å¢™è§„åˆ™ã€‚

**ä¼ ç»Ÿæ–¹å¼ vs æœåŠ¡æ–¹å¼å¯¹æ¯”**ï¼š

```
ä¼ ç»Ÿç«¯å£é…ç½®æ–¹å¼ï¼š
sudo firewall-cmd --add-port=80/tcp    # éœ€è¦è®°ä½HTTPæ˜¯80ç«¯å£
sudo firewall-cmd --add-port=443/tcp   # éœ€è¦è®°ä½HTTPSæ˜¯443ç«¯å£
sudo firewall-cmd --add-port=22/tcp    # éœ€è¦è®°ä½SSHæ˜¯22ç«¯å£

é¢„å®šä¹‰æœåŠ¡æ–¹å¼ï¼š
sudo firewall-cmd --add-service=http   # ç›´æ¥ç”¨æœåŠ¡åï¼Œç®€å•æ˜äº†
sudo firewall-cmd --add-service=https  # ä¸ç”¨è®°ç«¯å£å·
sudo firewall-cmd --add-service=ssh    # è§åçŸ¥æ„
```

### 1.3 æœåŠ¡é…ç½®æ–‡ä»¶ä½ç½®


**ç³»ç»Ÿé¢„å®šä¹‰æœåŠ¡ä½ç½®**ï¼š`/usr/lib/firewalld/services/`
**ç”¨æˆ·è‡ªå®šä¹‰æœåŠ¡ä½ç½®**ï¼š`/etc/firewalld/services/`

```
æ–‡ä»¶ç»“æ„ç¤ºæ„ï¼š
/usr/lib/firewalld/services/
â”œâ”€â”€ ssh.xml          â† SSHæœåŠ¡å®šä¹‰
â”œâ”€â”€ http.xml         â† HTTPæœåŠ¡å®šä¹‰  
â”œâ”€â”€ https.xml        â† HTTPSæœåŠ¡å®šä¹‰
â”œâ”€â”€ ftp.xml          â† FTPæœåŠ¡å®šä¹‰
â””â”€â”€ ...              â† 200+ä¸ªé¢„å®šä¹‰æœåŠ¡

/etc/firewalld/services/
â””â”€â”€ my-app.xml       â† ç”¨æˆ·è‡ªå®šä¹‰æœåŠ¡
```

---

## 2. ğŸ“‹ æœåŠ¡åˆ—è¡¨æŸ¥çœ‹ä¸ç®¡ç†


### 2.1 æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æœåŠ¡


**æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰é¢„å®šä¹‰æœåŠ¡**ï¼š

```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æœåŠ¡ï¼ˆ200+ä¸ªï¼‰
firewall-cmd --get-services

# è¾“å‡ºç¤ºä¾‹ï¼ˆéƒ¨åˆ†ï¼‰ï¼š
# RH-Satellite-6 amanda-client amanda-k5-client bacula bacula-client 
# bitcoin bitcoin-rpc bitcoin-testnet bitcoin-testnet-rpc ceph 
# ceph-mon cfengine condor-collector ctdb dhcp dhcpv6 dhcpv6-client 
# dns docker-registry dropbox-lansync elasticsearch freeipa-ldap 
# freeipa-ldaps freeipa-replication ftp high-availability http 
# https imap imaps ipp ipp-client ipsec irc jenkins kadmin kerberos...
```

**å¸¸ç”¨æœåŠ¡åˆ†ç±»ç†è§£**ï¼š

| **æœåŠ¡ç±»å‹** | **å…¸å‹æœåŠ¡** | **ç”¨é€”è¯´æ˜** |
|-------------|-------------|-------------|
| **WebæœåŠ¡** | `http`, `https` | ç½‘ç«™è®¿é—®æœåŠ¡ |
| **è¿œç¨‹ç®¡ç†** | `ssh`, `vnc`, `rdp` | è¿œç¨‹è¿æ¥å’Œç®¡ç† |
| **æ–‡ä»¶ä¼ è¾“** | `ftp`, `sftp`, `samba` | æ–‡ä»¶ä¸Šä¼ ä¸‹è½½å…±äº« |
| **é‚®ä»¶æœåŠ¡** | `smtp`, `pop3`, `imap` | é‚®ä»¶æ”¶å‘æœåŠ¡ |
| **æ•°æ®åº“** | `mysql`, `postgresql` | æ•°æ®åº“è®¿é—® |
| **ç½‘ç»œåŸºç¡€** | `dns`, `dhcp`, `ntp` | ç½‘ç»œåŸºç¡€è®¾æ–½æœåŠ¡ |

### 2.2 æŸ¥çœ‹å½“å‰å¯ç”¨çš„æœåŠ¡


**æŸ¥çœ‹å½“å‰zoneä¸­å¯ç”¨äº†å“ªäº›æœåŠ¡**ï¼š

```bash
# æŸ¥çœ‹é»˜è®¤zoneçš„æœåŠ¡
firewall-cmd --list-services

# æŸ¥çœ‹æŒ‡å®šzoneçš„æœåŠ¡
firewall-cmd --zone=public --list-services

# è¾“å‡ºç¤ºä¾‹ï¼š
# dhcpv6-client ssh
```

### 2.3 æŸ¥çœ‹æœåŠ¡è¯¦ç»†é…ç½®


**æŸ¥çœ‹å…·ä½“æœåŠ¡åŒ…å«ä»€ä¹ˆç«¯å£å’Œåè®®**ï¼š

```bash
# æŸ¥çœ‹sshæœåŠ¡çš„è¯¦ç»†é…ç½®
firewall-cmd --info-service=ssh

# è¾“å‡ºç¤ºä¾‹ï¼š
# ssh
#   ports: 22/tcp
#   protocols: 
#   source-ports: 
#   modules: 
#   destination:
```

**æœåŠ¡é…ç½®æ–‡ä»¶å†…å®¹ç¤ºä¾‹**ï¼š

```xml
<!-- /usr/lib/firewalld/services/ssh.xml -->
<?xml version="1.0" encoding="utf-8"?>
<service>
  <short>SSH</short>
  <description>å®‰å…¨å¤–å£³(SSH)æ˜¯ä¸€ä¸ªç”¨äºç™»å½•è¿œç¨‹æœºå™¨å’Œæ‰§è¡Œå‘½ä»¤çš„åè®®</description>
  <port protocol="tcp" port="22"/>
</service>
```

---

## 3. âš¡ æœåŠ¡æ·»åŠ ä¸ç§»é™¤æ“ä½œ


### 3.1 ä¸´æ—¶æ·»åŠ æœåŠ¡ï¼ˆé‡å¯å¤±æ•ˆï¼‰


**åŸºæœ¬æ·»åŠ æ“ä½œ**ï¼š

```bash
# æ·»åŠ httpæœåŠ¡åˆ°é»˜è®¤zone
sudo firewall-cmd --add-service=http

# æ·»åŠ å¤šä¸ªæœåŠ¡
sudo firewall-cmd --add-service=http --add-service=https

# æ·»åŠ æœåŠ¡åˆ°æŒ‡å®šzone
sudo firewall-cmd --zone=public --add-service=ssh
```

**æ“ä½œç»“æœéªŒè¯**ï¼š

```bash
# æ·»åŠ å‰æŸ¥çœ‹
firewall-cmd --list-services
# è¾“å‡ºï¼šdhcpv6-client ssh

# æ·»åŠ httpæœåŠ¡
sudo firewall-cmd --add-service=http

# æ·»åŠ åæŸ¥çœ‹
firewall-cmd --list-services  
# è¾“å‡ºï¼šdhcpv6-client http ssh
```

### 3.2 æ°¸ä¹…æ·»åŠ æœåŠ¡ï¼ˆé‡å¯ç”Ÿæ•ˆï¼‰


**æ°¸ä¹…é…ç½®æ“ä½œ**ï¼š

```bash
# æ°¸ä¹…æ·»åŠ httpæœåŠ¡
sudo firewall-cmd --permanent --add-service=http

# æ°¸ä¹…æ·»åŠ å¤šä¸ªæœåŠ¡
sudo firewall-cmd --permanent --add-service=http --add-service=https

# é‡æ–°åŠ è½½é…ç½®ä½¿å…¶ç”Ÿæ•ˆ
sudo firewall-cmd --reload
```

**ä¸´æ—¶ vs æ°¸ä¹…é…ç½®å¯¹æ¯”**ï¼š

```
é…ç½®åœºæ™¯å¯¹æ¯”ï¼š

ä¸´æ—¶é…ç½®ï¼ˆ--add-serviceï¼‰ï¼š
âœ… ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯firewalld
âŒ ç³»ç»Ÿé‡å¯åé…ç½®ä¸¢å¤±
ğŸ¯ ç”¨é€”ï¼šä¸´æ—¶æµ‹è¯•ã€åº”æ€¥å¼€æ”¾

æ°¸ä¹…é…ç½®ï¼ˆ--permanent --add-serviceï¼‰ï¼š
âŒ éœ€è¦reloadæ‰èƒ½ç”Ÿæ•ˆ
âœ… ç³»ç»Ÿé‡å¯åé…ç½®ä¿æŒ
ğŸ¯ ç”¨é€”ï¼šç”Ÿäº§ç¯å¢ƒçš„æŒä¹…é…ç½®
```

### 3.3 ç§»é™¤æœåŠ¡æ“ä½œ


**ä¸´æ—¶ç§»é™¤æœåŠ¡**ï¼š

```bash
# ç§»é™¤httpæœåŠ¡
sudo firewall-cmd --remove-service=http

# ç§»é™¤å¤šä¸ªæœåŠ¡
sudo firewall-cmd --remove-service=http --remove-service=https
```

**æ°¸ä¹…ç§»é™¤æœåŠ¡**ï¼š

```bash
# æ°¸ä¹…ç§»é™¤httpæœåŠ¡
sudo firewall-cmd --permanent --remove-service=http

# é‡æ–°åŠ è½½é…ç½®
sudo firewall-cmd --reload
```

### 3.4 åŒæ—¶é…ç½®ä¸´æ—¶å’Œæ°¸ä¹…


**ä¸€æ¡å‘½ä»¤åŒæ—¶é…ç½®**ï¼š

```bash
# åŒæ—¶æ·»åŠ ä¸´æ—¶å’Œæ°¸ä¹…é…ç½®
sudo firewall-cmd --add-service=http --permanent

# ç­‰æ•ˆäºä¸¤æ¡å‘½ä»¤ï¼š
sudo firewall-cmd --add-service=http           # ä¸´æ—¶
sudo firewall-cmd --permanent --add-service=http  # æ°¸ä¹…
```

---

## 4. ğŸŒ å¸¸ç”¨æœåŠ¡å¿«é€Ÿé…ç½®


### 4.1 WebæœåŠ¡é…ç½®


**HTTP/HTTPSæœåŠ¡é…ç½®**ï¼š

```bash
# WebæœåŠ¡å™¨å¿…å¤‡é…ç½®
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# éªŒè¯é…ç½®
firewall-cmd --list-services | grep -E "(http|https)"
```

**é…ç½®è¯´æ˜**ï¼š
- **http**ï¼šç½‘ç«™80ç«¯å£è®¿é—®ï¼Œç”¨äºæ™®é€šç½‘é¡µæµè§ˆ
- **https**ï¼šç½‘ç«™443ç«¯å£è®¿é—®ï¼Œç”¨äºåŠ å¯†ç½‘é¡µæµè§ˆ
- **ä¸¤è€…é€šå¸¸ä¸€èµ·é…ç½®**ï¼Œç°ä»£ç½‘ç«™éƒ½æ”¯æŒHTTPS

### 4.2 è¿œç¨‹ç®¡ç†æœåŠ¡


**SSHè¿œç¨‹ç™»å½•é…ç½®**ï¼š

```bash
# SSHé€šå¸¸é»˜è®¤å·²å¯ç”¨ï¼Œç¡®è®¤é…ç½®
firewall-cmd --list-services | grep ssh

# å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œæ‰‹åŠ¨æ·»åŠ 
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --reload
```

**VNCè¿œç¨‹æ¡Œé¢é…ç½®**ï¼š

```bash
# VNCæœåŠ¡é…ç½®
sudo firewall-cmd --permanent --add-service=vnc-server
sudo firewall-cmd --reload

# æŸ¥çœ‹VNCæœåŠ¡ç«¯å£ä¿¡æ¯
firewall-cmd --info-service=vnc-server
```

### 4.3 æ–‡ä»¶ä¼ è¾“æœåŠ¡


**FTPæ–‡ä»¶ä¼ è¾“é…ç½®**ï¼š

```bash
# FTPæœåŠ¡é…ç½®
sudo firewall-cmd --permanent --add-service=ftp
sudo firewall-cmd --reload

# æŸ¥çœ‹FTPæœåŠ¡åŒ…å«çš„ç«¯å£
firewall-cmd --info-service=ftp
# è¾“å‡ºï¼šports: 21/tcp
```

**Sambaæ–‡ä»¶å…±äº«é…ç½®**ï¼š

```bash
# SambaæœåŠ¡é…ç½®
sudo firewall-cmd --permanent --add-service=samba
sudo firewall-cmd --reload

# SambaåŒ…å«å¤šä¸ªç«¯å£
firewall-cmd --info-service=samba
# è¾“å‡ºï¼šports: 137/udp 138/udp 139/tcp 445/tcp
```

### 4.4 æ•°æ®åº“æœåŠ¡é…ç½®


**MySQLæ•°æ®åº“é…ç½®**ï¼š

```bash
# MySQLæœåŠ¡é…ç½®
sudo firewall-cmd --permanent --add-service=mysql
sudo firewall-cmd --reload

# MySQLé»˜è®¤ç«¯å£
firewall-cmd --info-service=mysql
# è¾“å‡ºï¼šports: 3306/tcp
```

**PostgreSQLæ•°æ®åº“é…ç½®**ï¼š

```bash
# PostgreSQLæœåŠ¡é…ç½®
sudo firewall-cmd --permanent --add-service=postgresql
sudo firewall-cmd --reload

# PostgreSQLé»˜è®¤ç«¯å£
firewall-cmd --info-service=postgresql
# è¾“å‡ºï¼šports: 5432/tcp
```

### 4.5 å¸¸ç”¨æœåŠ¡ç»„åˆé…ç½®å®ä¾‹


**å…¸å‹WebæœåŠ¡å™¨é…ç½®**ï¼š

```bash
# å®Œæ•´çš„WebæœåŠ¡å™¨é˜²ç«å¢™é…ç½®
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https  
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --reload

# éªŒè¯é…ç½®
echo "å½“å‰å¯ç”¨çš„æœåŠ¡ï¼š"
firewall-cmd --list-services
```

**æ–‡ä»¶æœåŠ¡å™¨é…ç½®**ï¼š

```bash
# æ–‡ä»¶æœåŠ¡å™¨å¸¸ç”¨æœåŠ¡
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=ftp
sudo firewall-cmd --permanent --add-service=samba
sudo firewall-cmd --reload
```

---

## 5. ğŸ”— æœåŠ¡ç»„åˆé…ç½®ç­–ç•¥


### 5.1 æŒ‰æœåŠ¡å™¨è§’è‰²é…ç½®


**WebæœåŠ¡å™¨è§’è‰²**ï¼š

```
æœåŠ¡å™¨è§’è‰²ï¼šWebåº”ç”¨æœåŠ¡å™¨
å¿…éœ€æœåŠ¡ï¼šhttp, https, ssh
å¯é€‰æœåŠ¡ï¼šftp (æ–‡ä»¶ä¸Šä¼ ), mysql (æ•°æ®åº“è¿æ¥)

é…ç½®å‘½ä»¤ï¼š
sudo firewall-cmd --permanent \
  --add-service=http \
  --add-service=https \
  --add-service=ssh \
  --add-service=mysql
```

**æ•°æ®åº“æœåŠ¡å™¨è§’è‰²**ï¼š

```
æœåŠ¡å™¨è§’è‰²ï¼šä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨  
å¿…éœ€æœåŠ¡ï¼šssh (è¿œç¨‹ç®¡ç†)
ä¸šåŠ¡æœåŠ¡ï¼šmysql æˆ– postgresql
å®‰å…¨åŸåˆ™ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£

é…ç½®å‘½ä»¤ï¼š
sudo firewall-cmd --permanent \
  --add-service=ssh \
  --add-service=mysql
```

### 5.2 å®‰å…¨é…ç½®åŸåˆ™


**æœ€å°æƒé™åŸåˆ™**ï¼š

```
å®‰å…¨é…ç½®æ€è·¯ï¼š
1. å…ˆå…³é—­æ‰€æœ‰ä¸å¿…è¦çš„æœåŠ¡
2. åªå¼€æ”¾ç¡®å®éœ€è¦çš„æœåŠ¡  
3. å®šæœŸå®¡æŸ¥å·²å¼€æ”¾çš„æœåŠ¡
4. ç›‘æ§æœåŠ¡ä½¿ç”¨æƒ…å†µ

å®æ–½æ­¥éª¤ï¼š
# æŸ¥çœ‹å½“å‰æœåŠ¡
firewall-cmd --list-services

# ç§»é™¤ä¸éœ€è¦çš„æœåŠ¡
sudo firewall-cmd --permanent --remove-service=ä¸éœ€è¦çš„æœåŠ¡å

# åªä¿ç•™å¿…éœ€æœåŠ¡
sudo firewall-cmd --reload
```

### 5.3 å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒ


**å¼€å‘ç¯å¢ƒé…ç½®**ï¼ˆç›¸å¯¹å®½æ¾ï¼‰ï¼š

```bash
# å¼€å‘ç¯å¢ƒï¼šä¾¿äºè°ƒè¯•å’Œæµ‹è¯•
sudo firewall-cmd --permanent \
  --add-service=ssh \
  --add-service=http \
  --add-service=https \
  --add-service=mysql \
  --add-service=ftp
sudo firewall-cmd --reload
```

**ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼ˆä¸¥æ ¼æ§åˆ¶ï¼‰ï¼š

```bash
# ç”Ÿäº§ç¯å¢ƒï¼šåªå¼€æ”¾å¿…è¦æœåŠ¡
sudo firewall-cmd --permanent \
  --add-service=ssh \      # è¿ç»´ç®¡ç†å¿…éœ€
  --add-service=https      # ä¸šåŠ¡è®¿é—®ç«¯å£
# æ³¨æ„ï¼šä¸å¼€æ”¾httpï¼Œå¼ºåˆ¶HTTPS
# æ³¨æ„ï¼šmysqlç­‰åªå…è®¸å†…ç½‘è®¿é—®
sudo firewall-cmd --reload
```

---

## 6. ğŸ› ï¸ è‡ªå®šä¹‰æœåŠ¡åˆ›å»º


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰æœåŠ¡


**ä½¿ç”¨åœºæ™¯**ï¼š
- åº”ç”¨ä½¿ç”¨éæ ‡å‡†ç«¯å£ï¼ˆå¦‚Webåº”ç”¨è¿è¡Œåœ¨8080ç«¯å£ï¼‰
- éœ€è¦å¼€æ”¾å¤šä¸ªç›¸å…³ç«¯å£çš„è‡ªå®šä¹‰åº”ç”¨
- å¸Œæœ›ç”¨æœ‰æ„ä¹‰çš„æœåŠ¡åç®¡ç†å¤æ‚çš„ç«¯å£é…ç½®

### 6.2 åˆ›å»ºè‡ªå®šä¹‰æœåŠ¡æ–‡ä»¶


**åˆ›å»ºè‡ªå®šä¹‰Webåº”ç”¨æœåŠ¡**ï¼š

```xml
<!-- åˆ›å»ºæ–‡ä»¶ï¼š/etc/firewalld/services/my-webapp.xml -->
<?xml version="1.0" encoding="utf-8"?>
<service>
  <short>My Web App</short>
  <description>æˆ‘çš„è‡ªå®šä¹‰Webåº”ç”¨ï¼Œè¿è¡Œåœ¨8080ç«¯å£</description>
  <port protocol="tcp" port="8080"/>
</service>
```

**åˆ›å»ºå¤æ‚çš„è‡ªå®šä¹‰æœåŠ¡**ï¼š

```xml
<!-- åˆ›å»ºæ–‡ä»¶ï¼š/etc/firewalld/services/my-game-server.xml -->
<?xml version="1.0" encoding="utf-8"?>
<service>
  <short>Game Server</short>
  <description>æ¸¸æˆæœåŠ¡å™¨ï¼ŒåŒ…å«å¤šä¸ªç«¯å£</description>
  <port protocol="tcp" port="7777"/>
  <port protocol="udp" port="7778"/>
  <port protocol="tcp" port="8080"/>
</service>
```

### 6.3 ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡


**é‡æ–°åŠ è½½æœåŠ¡é…ç½®**ï¼š

```bash
# é‡æ–°åŠ è½½firewalldé…ç½®ï¼Œä½¿æ–°æœåŠ¡ç”Ÿæ•ˆ
sudo firewall-cmd --reload

# æŸ¥çœ‹æ–°æœåŠ¡æ˜¯å¦å¯ç”¨
firewall-cmd --get-services | grep my-webapp

# æ·»åŠ è‡ªå®šä¹‰æœåŠ¡
sudo firewall-cmd --permanent --add-service=my-webapp
sudo firewall-cmd --reload
```

### 6.4 è‡ªå®šä¹‰æœåŠ¡æ¨¡æ¿


**åŸºæœ¬æœåŠ¡æ¨¡æ¿**ï¼š

```xml
<?xml version="1.0" encoding="utf-8"?>
<service>
  <short>æœåŠ¡ç®€ç§°</short>
  <description>æœåŠ¡è¯¦ç»†æè¿°</description>
  <port protocol="tcp|udp" port="ç«¯å£å·"/>
  <!-- å¯ä»¥æœ‰å¤šä¸ªportæ ‡ç­¾ -->
</service>
```

**ç«¯å£èŒƒå›´æœåŠ¡æ¨¡æ¿**ï¼š

```xml
<?xml version="1.0" encoding="utf-8"?>
<service>
  <short>Range Service</short>
  <description>ä½¿ç”¨ç«¯å£èŒƒå›´çš„æœåŠ¡</description>
  <port protocol="tcp" port="8000-8010"/>
  <port protocol="udp" port="9000"/>
</service>
```

---

## 7. âœ… æœåŠ¡é…ç½®éªŒè¯ä¸æ’é”™


### 7.1 é…ç½®éªŒè¯æ–¹æ³•


**åŸºæœ¬éªŒè¯æ­¥éª¤**ï¼š

```bash
# 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦å·²æ·»åŠ 
firewall-cmd --list-services

# 2. æ£€æŸ¥å…·ä½“ç«¯å£æ˜¯å¦å¼€æ”¾
firewall-cmd --list-ports

# 3. æ£€æŸ¥å®Œæ•´çš„zoneé…ç½®
firewall-cmd --list-all

# 4. æµ‹è¯•ç«¯å£è¿é€šæ€§
telnet æœåŠ¡å™¨IP ç«¯å£å·
```

**è¯¦ç»†éªŒè¯ç¤ºä¾‹**ï¼š

```bash
# éªŒè¯httpæœåŠ¡é…ç½®
echo "=== HTTPæœåŠ¡éªŒè¯ ==="
firewall-cmd --list-services | grep http
firewall-cmd --info-service=http

# ä»å¤–éƒ¨æµ‹è¯•80ç«¯å£è¿é€šæ€§
telnet your-server-ip 80
```

### 7.2 å¸¸è§é—®é¢˜æ’æŸ¥


**é—®é¢˜1ï¼šæœåŠ¡æ·»åŠ äº†ä½†æ— æ³•è®¿é—®**

```
æ’æŸ¥æ€è·¯ï¼š
1. ç¡®è®¤æœåŠ¡å·²æ­£ç¡®æ·»åŠ 
   firewall-cmd --list-services

2. ç¡®è®¤æœåŠ¡å¯¹åº”çš„ç«¯å£  
   firewall-cmd --info-service=æœåŠ¡å

3. æ£€æŸ¥åº”ç”¨ç¨‹åºæ˜¯å¦çœŸçš„åœ¨ç›‘å¬ç«¯å£
   sudo netstat -tlnp | grep :ç«¯å£å·
   
4. ç¡®è®¤zoneæ˜¯å¦æ­£ç¡®
   firewall-cmd --get-active-zones
```

**é—®é¢˜2ï¼šæ°¸ä¹…é…ç½®ä¸ç”Ÿæ•ˆ**

```
å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ³•ï¼š
1. å¿˜è®°æ‰§è¡Œreloadå‘½ä»¤
   sudo firewall-cmd --reload

2. åªé…ç½®äº†ä¸´æ—¶è§„åˆ™
   sudo firewall-cmd --permanent --add-service=æœåŠ¡å

3. æ£€æŸ¥æ°¸ä¹…é…ç½®æ˜¯å¦å­˜åœ¨
   firewall-cmd --permanent --list-services
```

### 7.3 æœåŠ¡é…ç½®è°ƒè¯•


**è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯**ï¼š

```bash
# å¯ç”¨firewalldè¯¦ç»†æ—¥å¿—
sudo firewall-cmd --set-log-denied=all

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u firewalld -f

# æµ‹è¯•è¿æ¥æ—¶è§‚å¯Ÿæ—¥å¿—è¾“å‡º
```

**ç½‘ç»œè¿æ¥æµ‹è¯•å·¥å…·**ï¼š

```bash
# æµ‹è¯•TCPç«¯å£è¿é€šæ€§
telnet ç›®æ ‡IP ç«¯å£å·

# ä½¿ç”¨nmapæ‰«æç«¯å£
nmap -p ç«¯å£å· ç›®æ ‡IP

# ä½¿ç”¨ncæµ‹è¯•UDPç«¯å£
nc -u ç›®æ ‡IP ç«¯å£å·
```

### 7.4 é…ç½®å¤‡ä»½ä¸æ¢å¤


**å¤‡ä»½å½“å‰é…ç½®**ï¼š

```bash
# å¤‡ä»½firewalldé…ç½®
sudo cp -r /etc/firewalld /etc/firewalld.backup

# å¯¼å‡ºå½“å‰zoneé…ç½®
firewall-cmd --list-all > firewall-config.txt
```

**é…ç½®æ¢å¤**ï¼š

```bash
# æ¢å¤é…ç½®æ–‡ä»¶
sudo cp -r /etc/firewalld.backup/* /etc/firewalld/

# é‡å¯firewalldæœåŠ¡
sudo systemctl restart firewalld
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é¢„å®šä¹‰æœåŠ¡æœ¬è´¨ï¼šfirewalldé¢„å…ˆé…ç½®å¥½çš„ç«¯å£+åè®®ç»„åˆåŒ…
ğŸ”¸ æœåŠ¡vsç«¯å£ï¼šæœåŠ¡æ˜¯ç«¯å£çš„é€»è¾‘å°è£…ï¼Œä¾¿äºç†è§£å’Œç®¡ç†
ğŸ”¸ ä¸´æ—¶vsæ°¸ä¹…ï¼šä¸´æ—¶ç«‹å³ç”Ÿæ•ˆä½†é‡å¯ä¸¢å¤±ï¼Œæ°¸ä¹…éœ€reloadä½†æŒä¹…ä¿å­˜
ğŸ”¸ æœåŠ¡é…ç½®æ–‡ä»¶ï¼šç³»ç»ŸæœåŠ¡åœ¨/usr/libï¼Œè‡ªå®šä¹‰åœ¨/etc/firewalld
ğŸ”¸ é…ç½®éªŒè¯ï¼šåŠ¡å¿…é€šè¿‡å¤šç§æ–¹å¼éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
```

### 8.2 å…³é”®æ“ä½œå‘½ä»¤æ±‡æ€»


| **æ“ä½œç±»å‹** | **å‘½ä»¤æ ¼å¼** | **ç”¨é€”è¯´æ˜** |
|-------------|-------------|-------------|
| **æŸ¥çœ‹æœåŠ¡** | `firewall-cmd --get-services` | åˆ—å‡ºæ‰€æœ‰å¯ç”¨æœåŠ¡ |
| **å½“å‰æœåŠ¡** | `firewall-cmd --list-services` | æŸ¥çœ‹å½“å‰å¯ç”¨æœåŠ¡ |
| **æœåŠ¡è¯¦æƒ…** | `firewall-cmd --info-service=æœåŠ¡å` | æŸ¥çœ‹æœåŠ¡åŒ…å«çš„ç«¯å£ |
| **ä¸´æ—¶æ·»åŠ ** | `firewall-cmd --add-service=æœåŠ¡å` | ä¸´æ—¶å¯ç”¨æœåŠ¡ |
| **æ°¸ä¹…æ·»åŠ ** | `firewall-cmd --permanent --add-service=æœåŠ¡å` | æ°¸ä¹…å¯ç”¨æœåŠ¡ |
| **ç§»é™¤æœåŠ¡** | `firewall-cmd --remove-service=æœåŠ¡å` | ç§»é™¤æœåŠ¡ |
| **é‡æ–°åŠ è½½** | `firewall-cmd --reload` | ä½¿æ°¸ä¹…é…ç½®ç”Ÿæ•ˆ |

### 8.3 å®é™…åº”ç”¨æŒ‡å¯¼åŸåˆ™


**é…ç½®ç­–ç•¥é€‰æ‹©**ï¼š
```
å¼€å‘ç¯å¢ƒï¼š
âœ… å¯ä»¥ç›¸å¯¹å®½æ¾ï¼Œä¾¿äºè°ƒè¯•
âœ… ä¸´æ—¶é…ç½®ä¸ºä¸»ï¼Œæ–¹ä¾¿éšæ—¶è°ƒæ•´  
âœ… å¸¸ç”¨æœåŠ¡å¯ä»¥æ‰¹é‡å¼€å¯

ç”Ÿäº§ç¯å¢ƒï¼š
âœ… ä¸¥æ ¼éµå¾ªæœ€å°æƒé™åŸåˆ™
âœ… æ°¸ä¹…é…ç½®ä¸ºä¸»ï¼Œç¡®ä¿é‡å¯åç”Ÿæ•ˆ
âœ… å®šæœŸå®¡æŸ¥ä¸å¿…è¦çš„å¼€æ”¾æœåŠ¡
âœ… è¯¦ç»†è®°å½•æ¯æ¬¡é…ç½®å˜æ›´
```

**å®‰å…¨é…ç½®å»ºè®®**ï¼š
```
åŸºç¡€å®‰å…¨ï¼š
â€¢ SSHæœåŠ¡å¿…å¼€ï¼Œä½†è€ƒè™‘æ”¹é»˜è®¤ç«¯å£
â€¢ WebæœåŠ¡ä¼˜å…ˆHTTPSï¼ŒHTTPå¯é€‰
â€¢ æ•°æ®åº“æœåŠ¡è°¨æ…å¯¹å¤–å¼€æ”¾

æœåŠ¡ç»„åˆï¼š
â€¢ æŒ‰æœåŠ¡å™¨è§’è‰²é…ç½®ç›¸å…³æœåŠ¡ç»„
â€¢ é¿å…å¼€å¯è¿‡å¤šä¸ç›¸å…³çš„æœåŠ¡
â€¢ ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡ç®¡ç†å¤æ‚ç«¯å£é…ç½®

ç›‘æ§éªŒè¯ï¼š
â€¢ é…ç½®åå¿…é¡»éªŒè¯è¿é€šæ€§
â€¢ å®šæœŸæ£€æŸ¥å¼€æ”¾çš„æœåŠ¡åˆ—è¡¨  
â€¢ ç›‘æ§å¼‚å¸¸è¿æ¥å’Œè®¿é—®æ—¥å¿—
```

### 8.4 ç–‘éš¾é—®é¢˜è§£å†³æ€è·¯


**æ’é”™ä¼˜å…ˆçº§**ï¼š
1. **ç¡®è®¤firewalldçŠ¶æ€**ï¼šæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. **éªŒè¯æœåŠ¡é…ç½®**ï¼šæœåŠ¡æ˜¯å¦æ­£ç¡®æ·»åŠ åˆ°zone
3. **æ£€æŸ¥åº”ç”¨ç¨‹åº**ï¼šç›®æ ‡ç¨‹åºæ˜¯å¦çœŸçš„åœ¨ç›‘å¬ç«¯å£
4. **ç½‘ç»œè¿é€šæ€§æµ‹è¯•**ï¼šä½¿ç”¨å·¥å…·éªŒè¯ç«¯å£å¯è¾¾æ€§
5. **æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—**ï¼šåˆ†æfirewalldå’Œåº”ç”¨æ—¥å¿—

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- é¢„å®šä¹‰æœåŠ¡è®©ç«¯å£ç®¡ç†å˜ç®€å•ï¼Œè§åçŸ¥æ„
- ä¸´æ—¶é…ç½®ç«‹å³ç”Ÿæ•ˆï¼Œæ°¸ä¹…é…ç½®é‡å¯ä¿æŒ  
- å®‰å…¨ç¬¬ä¸€ï¼Œåªå¼€æ”¾çœŸæ­£éœ€è¦çš„æœåŠ¡
- é…ç½®åå¿…é¡»éªŒè¯ï¼Œç¡®ä¿è®¾ç½®æ­£ç¡®ç”Ÿæ•ˆ