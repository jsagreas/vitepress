---
title: 4ã€YUMä»“åº“é…ç½®ä¸ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [YUMä»“åº“é…ç½®åŸºç¡€](#1-YUMä»“åº“é…ç½®åŸºç¡€)
2. [ä»“åº“é…ç½®æ–‡ä»¶è¯¦è§£](#2-ä»“åº“é…ç½®æ–‡ä»¶è¯¦è§£)
3. [æ ¸å¿ƒé…ç½®å‚æ•°è§£æ](#3-æ ¸å¿ƒé…ç½®å‚æ•°è§£æ)
4. [ä»“åº“å…ƒæ•°æ®ç»“æ„](#4-ä»“åº“å…ƒæ•°æ®ç»“æ„)
5. [å®ç”¨é…ç½®æŠ€å·§](#5-å®ç”¨é…ç½®æŠ€å·§)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ YUMä»“åº“é…ç½®åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯YUMä»“åº“é…ç½®


**ğŸ”¸ é€šä¿—ç†è§£**
YUMä»“åº“é…ç½®å°±åƒæ˜¯ç»™ä½ çš„Linuxç³»ç»Ÿæä¾›ä¸€ä¸ª"è½¯ä»¶å•†åº—åœ°å€ç°¿"ã€‚å°±å¥½æ¯”ä½ æ‰‹æœºä¸Šçš„åº”ç”¨å•†åº—ï¼Œç³»ç»Ÿéœ€è¦çŸ¥é“å»å“ªé‡Œä¸‹è½½è½¯ä»¶ï¼ŒYUMä»“åº“é…ç½®å°±æ˜¯å‘Šè¯‰ç³»ç»Ÿè½¯ä»¶åŒ…çš„å­˜æ”¾ä½ç½®ã€‚

â”Œâ”€ ç®€å•ç±»æ¯” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰‹æœºåº”ç”¨å•†åº— â†’ YUMä»“åº“      â”‚
â”‚ å•†åº—åœ°å€     â†’ ä»“åº“URL      â”‚
â”‚ å•†åº—åˆ†ç±»     â†’ ä»“åº“ç±»å‹     â”‚
â”‚ ä¸‹è½½è§„åˆ™     â†’ é…ç½®å‚æ•°     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### 1.2 é…ç½®ç›®å½•ç»“æ„


**ğŸ“ æ ¸å¿ƒé…ç½®è·¯å¾„ï¼š`/etc/yum.repos.d/`**

```
/etc/yum.repos.d/
â”œâ”€â”€ CentOS-Base.repo       â† åŸºç¡€ä»“åº“é…ç½®
â”œâ”€â”€ CentOS-Updates.repo    â† æ›´æ–°ä»“åº“é…ç½®  
â”œâ”€â”€ CentOS-Extras.repo     â† æ‰©å±•ä»“åº“é…ç½®
â”œâ”€â”€ epel.repo              â† ç¬¬ä¸‰æ–¹ä»“åº“é…ç½®
â””â”€â”€ custom.repo            â† è‡ªå®šä¹‰ä»“åº“é…ç½®

ç‰¹ç‚¹ï¼š
â€¢ æ‰€æœ‰ .repo æ–‡ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨è¯»å–
â€¢ æ–‡ä»¶åå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†å¿…é¡»ä»¥ .repo ç»“å°¾
â€¢ ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šæ‰«æè¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰é…ç½®
```

**ğŸ” é…ç½®æ–‡ä»¶åŸºæœ¬æ ¼å¼**
```ini
[ä»“åº“æ ‡è¯†ç¬¦]
name=ä»“åº“æè¿°åç§°
baseurl=è½¯ä»¶åŒ…ä¸‹è½½åœ°å€
enabled=æ˜¯å¦å¯ç”¨(1/0)
gpgcheck=æ˜¯å¦æ£€æŸ¥ç­¾å(1/0)
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦ä»“åº“é…ç½®


**ğŸ“Š å®é™…éœ€æ±‚åœºæ™¯**
```
é—®é¢˜åœºæ™¯                    è§£å†³æ–¹æ¡ˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è½¯ä»¶åŒ…åœ¨å“ªé‡Œï¼Ÿ          â†’ baseurlæŒ‡å®šä½ç½®
å“ªäº›ä»“åº“å¯ç”¨ï¼Ÿ          â†’ enabledæ§åˆ¶å¼€å…³
è½¯ä»¶åŒ…æ˜¯å¦å®‰å…¨ï¼Ÿ        â†’ gpgcheckéªŒè¯ç­¾å
ç½‘ç»œä¸ç¨³å®šæ€ä¹ˆåŠï¼Ÿ      â†’ mirrorlistæä¾›å¤‡é€‰
ä»“åº“ä¼˜å…ˆçº§å¦‚ä½•è®¾ç½®ï¼Ÿ    â†’ priorityå‚æ•°æ§åˆ¶
```

---

## 2. ğŸ“‹ ä»“åº“é…ç½®æ–‡ä»¶è¯¦è§£


### 2.1 é…ç½®æ–‡ä»¶åŸºæœ¬ç»“æ„


**ğŸ”§ æ ‡å‡†é…ç½®æ–‡ä»¶ç¤ºä¾‹**
```ini
# /etc/yum.repos.d/CentOS-Base.repo

[base]
name=CentOS-$releasever - Base
baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

[updates]
name=CentOS-$releasever - Updates  
baseurl=http://mirror.centos.org/centos/$releasever/updates/$basearch/
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
```

### 2.2 é…ç½®æ–‡ä»¶ç»“æ„è§£æ


**ğŸ“– é…ç½®æ–‡ä»¶ç»„æˆéƒ¨åˆ†**

```
â”Œâ”€ é…ç½®æ–‡ä»¶ç»“æ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               â”‚
â”‚ [ä»“åº“ID]        â† å”¯ä¸€æ ‡è¯†ç¬¦   â”‚
â”‚ name=æè¿°       â† äººè¯»çš„åå­—   â”‚
â”‚ baseurl=åœ°å€    â† ä¸‹è½½åœ°å€     â”‚
â”‚ enabled=å¼€å…³    â† æ˜¯å¦å¯ç”¨     â”‚
â”‚ gpgcheck=éªŒè¯   â† å®‰å…¨æ£€æŸ¥     â”‚
â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”‘ å…³é”®å­—æ®µè¯´æ˜**
- **[ä»“åº“ID]**ï¼šæ–¹æ‹¬å·å†…çš„æ ‡è¯†ç¬¦ï¼Œç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ï¼Œå¿…é¡»å”¯ä¸€
- **name**ï¼šä»“åº“çš„æè¿°æ€§åç§°ï¼Œç»™äººçœ‹çš„ï¼Œæ”¯æŒå˜é‡
- **baseurl**ï¼šè½¯ä»¶åŒ…çš„å®é™…ä¸‹è½½åœ°å€ï¼Œå¯ä»¥æ˜¯HTTPã€FTPã€fileç­‰
- **enabled**ï¼šæ§åˆ¶ä»“åº“æ˜¯å¦å¯ç”¨ï¼Œ1è¡¨ç¤ºå¯ç”¨ï¼Œ0è¡¨ç¤ºç¦ç”¨
- **gpgcheck**ï¼šæ˜¯å¦éªŒè¯è½¯ä»¶åŒ…çš„æ•°å­—ç­¾åï¼Œ1è¡¨ç¤ºéªŒè¯

### 2.3 å˜é‡çš„ä½¿ç”¨


**ğŸ”„ å¸¸ç”¨ç³»ç»Ÿå˜é‡**
```ini
# å˜é‡å«ä¹‰è¯´æ˜
$releasever  â†’ ç³»ç»Ÿç‰ˆæœ¬å· (å¦‚ï¼š7, 8)
$basearch    â†’ ç³»ç»Ÿæ¶æ„ (å¦‚ï¼šx86_64, i386)  
$arch        â†’ æ¶æ„ç®€ç§° (å¦‚ï¼šx86_64, i686)

# å®é™…æ›¿æ¢ç¤ºä¾‹
é…ç½®ä¸­ï¼šbaseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/
å®é™…å€¼ï¼šbaseurl=http://mirror.centos.org/centos/7/os/x86_64/
```

**ğŸ’¡ å˜é‡çš„å¥½å¤„**
- ä¸€å¥—é…ç½®é€‚ç”¨å¤šä¸ªç³»ç»Ÿç‰ˆæœ¬
- ç³»ç»Ÿå‡çº§æ—¶é…ç½®è‡ªåŠ¨é€‚é…  
- å‡å°‘æ‰‹å·¥ç»´æŠ¤å·¥ä½œé‡

---

## 3. âš™ï¸ æ ¸å¿ƒé…ç½®å‚æ•°è§£æ


### 3.1 åœ°å€é…ç½®å‚æ•°


#### ğŸŒ baseurl ä¸ mirrorlist é…ç½®


**baseurlå‚æ•°è¯¦è§£**
```ini
# å•ä¸ªåœ°å€
baseurl=http://mirror.centos.org/centos/7/os/x86_64/

# å¤šä¸ªåœ°å€ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„ï¼‰
baseurl=http://mirror1.example.com/centos/7/os/x86_64/
        http://mirror2.example.com/centos/7/os/x86_64/
        ftp://mirror3.example.com/centos/7/os/x86_64/

# æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
baseurl=file:///mnt/cdrom/
```

**mirrorlistå‚æ•°è¯¦è§£**  
```ini
# mirrorlist æ˜¯ä¸€ä¸ªè¿”å›é•œåƒåˆ—è¡¨çš„URL
mirrorlist=http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os

# ç³»ç»Ÿä¼šè®¿é—®è¿™ä¸ªURLè·å–å¯ç”¨é•œåƒåˆ—è¡¨ï¼Œç„¶åè‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„
```

**ğŸ”„ baseurl vs mirrorlist å¯¹æ¯”**

| é…ç½®æ–¹å¼ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| ğŸ¯ **baseurl** | `é…ç½®ç®€å•ï¼Œç›´æ¥æŒ‡å®šåœ°å€` | `é•œåƒæ•…éšœæ—¶éœ€æ‰‹åŠ¨åˆ‡æ¢` | `å†…ç½‘ç¯å¢ƒï¼Œå›ºå®šé•œåƒ` |
| ğŸŒ **mirrorlist** | `è‡ªåŠ¨é€‰æ‹©æœ€å¿«é•œåƒ` | `ä¾èµ–é•œåƒåˆ—è¡¨æœåŠ¡` | `å…¬ç½‘ç¯å¢ƒï¼Œå¤šé•œåƒé€‰æ‹©` |

#### ğŸ”§ åœ°å€é…ç½®å®ç”¨æŠ€å·§


```ini
# æŠ€å·§1ï¼šåŒæ—¶é…ç½®baseurlå’Œmirrorlistï¼ˆæ³¨é‡Šå…¶ä¸­ä¸€ä¸ªï¼‰
baseurl=http://mirrors.aliyun.com/centos/7/os/x86_64/
#mirrorlist=http://mirrorlist.centos.org/?release=7&arch=x86_64&repo=os

# æŠ€å·§2ï¼šé…ç½®å¤šä¸ªbaseurlæé«˜å¯ç”¨æ€§  
baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/
        http://mirrors.163.com/centos/$releasever/os/$basearch/
        http://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/
```

### 3.2 å¯ç”¨ä¸å®‰å…¨å‚æ•°


#### âœ… enabled å¯ç”¨æ§åˆ¶


**enabledå‚æ•°ä½œç”¨**
```ini
enabled=1    # å¯ç”¨ä»“åº“ï¼Œyumæ“ä½œæ—¶ä¼šä½¿ç”¨æ­¤ä»“åº“
enabled=0    # ç¦ç”¨ä»“åº“ï¼Œyumæ“ä½œæ—¶å¿½ç•¥æ­¤ä»“åº“

# ä¸´æ—¶å¯ç”¨ç¦ç”¨çš„ä»“åº“
yum --enablerepo=ä»“åº“å install è½¯ä»¶åŒ…

# ä¸´æ—¶ç¦ç”¨å¯ç”¨çš„ä»“åº“  
yum --disablerepo=ä»“åº“å install è½¯ä»¶åŒ…
```

**ğŸ¯ ä½¿ç”¨åœºæ™¯**
- æµ‹è¯•ä»“åº“å¹³æ—¶ç¦ç”¨ï¼Œéœ€è¦æ—¶ä¸´æ—¶å¯ç”¨
- ç¬¬ä¸‰æ–¹ä»“åº“é¿å…å†²çªæ—¶ä¸´æ—¶ç¦ç”¨
- å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒä»“åº“

#### ğŸ” gpgcheck å®‰å…¨éªŒè¯


**gpgcheckå‚æ•°è¯¦è§£**
```ini
gpgcheck=1      # éªŒè¯è½¯ä»¶åŒ…æ•°å­—ç­¾åï¼ˆæ¨èï¼‰
gpgcheck=0      # ä¸éªŒè¯ç­¾åï¼ˆå­˜åœ¨å®‰å…¨é£é™©ï¼‰

# é…åˆgpgkeyæŒ‡å®šå…¬é’¥ä½ç½®
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
gpgkey=http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-7
```

**ğŸ”’ å®‰å…¨éªŒè¯çš„é‡è¦æ€§**
```
ç­¾åéªŒè¯æµç¨‹ï¼š
1. è½¯ä»¶åŒ…å‘å¸ƒæ—¶ç”¨ç§é’¥ç­¾å
2. å…¬é’¥å­˜å‚¨åœ¨ç³»ç»Ÿä¸­
3. å®‰è£…æ—¶ç”¨å…¬é’¥éªŒè¯ç­¾å
4. éªŒè¯é€šè¿‡æ‰èƒ½å®‰è£…

é˜²æŠ¤ä½œç”¨ï¼š
â€¢ é˜²æ­¢è½¯ä»¶åŒ…è¢«æ¶æ„ç¯¡æ”¹
â€¢ ç¡®ä¿è½¯ä»¶åŒ…æ¥æºå¯ä¿¡
â€¢ é¿å…å®‰è£…æ¶æ„è½¯ä»¶
```

### 3.3 é«˜çº§é…ç½®å‚æ•°


#### ğŸšï¸ priority ä¼˜å…ˆçº§è®¾ç½®


**priorityå‚æ•°é…ç½®**
```ini
# éœ€è¦å®‰è£…yum-plugin-prioritiesæ’ä»¶
yum install yum-plugin-priorities

# åœ¨ä»“åº“é…ç½®ä¸­æ·»åŠ priority
[base]
name=CentOS Base
baseurl=http://mirror.centos.org/centos/7/os/x86_64/
enabled=1
priority=1        # æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆ1-99ï¼‰

[epel]  
name=EPEL Repository
baseurl=http://mirrors.aliyun.com/epel/7/x86_64/
enabled=1
priority=10       # ä¼˜å…ˆçº§ä½äºbaseä»“åº“
```

**ğŸ“Š ä¼˜å…ˆçº§ä½¿ç”¨åœºæ™¯**
```
â”Œâ”€ ä¼˜å…ˆçº§åº”ç”¨åœºæ™¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚ å®˜æ–¹ä»“åº“ (priority=1)       â”‚
â”‚     â†“ ä¼˜å…ˆçº§æœ€é«˜            â”‚
â”‚ æ›´æ–°ä»“åº“ (priority=5)       â”‚
â”‚     â†“                       â”‚
â”‚ ç¬¬ä¸‰æ–¹ä»“åº“ (priority=10)    â”‚
â”‚     â†“ ä¼˜å…ˆçº§æœ€ä½            â”‚
â”‚ æµ‹è¯•ä»“åº“ (priority=99)      â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸš« excludepkgs åŒ…æ’é™¤è§„åˆ™


**excludepkgså‚æ•°ä½¿ç”¨**
```ini
# æ’é™¤ç‰¹å®šè½¯ä»¶åŒ…
[base]
name=CentOS Base
baseurl=http://mirror.centos.org/centos/7/os/x86_64/
excludepkgs=kernel* php*

# æ’é™¤å¤šä¸ªåŒ…ï¼ˆç”¨ç©ºæ ¼åˆ†éš”ï¼‰
excludepkgs=mysql* apache* nginx*

# ä½¿ç”¨é€šé…ç¬¦æ’é™¤
excludepkgs=*-devel *-debuginfo
```

**ğŸ¯ æ’é™¤åŒ…çš„åº”ç”¨åœºæ™¯**
- é¿å…æŸäº›è½¯ä»¶åŒ…è¢«æ„å¤–æ›´æ–°
- è§£å†³è½¯ä»¶åŒ…å†²çªé—®é¢˜
- ä¿æŒç‰¹å®šç‰ˆæœ¬çš„è½¯ä»¶åŒ…ç¨³å®š

#### ğŸ“‚ include å­é…ç½®æ–‡ä»¶


**includeå‚æ•°ä½¿ç”¨**
```ini
# ä¸»é…ç½®æ–‡ä»¶ä¸­åŒ…å«å…¶ä»–é…ç½®
[main]
cachedir=/var/cache/yum/$basearch/$releasever
include=file:///etc/yum.repos.d/custom/*.repo

# æˆ–è€…åŒ…å«è¿œç¨‹é…ç½®
include=http://example.com/configs/extra.repo
```

**ğŸ’¡ includeçš„å¥½å¤„**
- é…ç½®æ–‡ä»¶æ¨¡å—åŒ–ç®¡ç†
- ä¾¿äºé…ç½®çš„å¤ç”¨å’Œç»´æŠ¤
- æ”¯æŒåŠ¨æ€é…ç½®åŠ è½½

---

## 4. ğŸ“¦ ä»“åº“å…ƒæ•°æ®ç»“æ„


### 4.1 repodataç›®å½•ç»„æˆ


**ğŸ—‚ï¸ å…ƒæ•°æ®ç›®å½•ç»“æ„**
```
ä»“åº“æ ¹ç›®å½•/
â”œâ”€â”€ Packages/              â† è½¯ä»¶åŒ…å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ a/                 â† æŒ‰é¦–å­—æ¯åˆ†ç±»
â”‚   â”‚   â””â”€â”€ httpd-2.4.6-*.rpm
â”‚   â””â”€â”€ z/
â”œâ”€â”€ repodata/              â† å…ƒæ•°æ®ç›®å½•ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ repomd.xml         â† å…ƒæ•°æ®ç´¢å¼•æ–‡ä»¶
â”‚   â”œâ”€â”€ primary.xml.gz     â† è½¯ä»¶åŒ…åŸºæœ¬ä¿¡æ¯
â”‚   â”œâ”€â”€ filelists.xml.gz   â† æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯  
â”‚   â”œâ”€â”€ other.xml.gz       â† å…¶ä»–ä¿¡æ¯
â”‚   â””â”€â”€ comps.xml.gz       â† è½¯ä»¶åŒ…ç»„ä¿¡æ¯
â””â”€â”€ RPM-GPG-KEY-*          â† GPGå…¬é’¥æ–‡ä»¶
```

### 4.2 å…ƒæ•°æ®æ–‡ä»¶è¯¦è§£


**ğŸ“‹ æ ¸å¿ƒå…ƒæ•°æ®æ–‡ä»¶åŠŸèƒ½**

```
â”Œâ”€ å…ƒæ•°æ®æ–‡ä»¶ä½œç”¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               â”‚
â”‚ repomd.xml     â†’ æ€»ç´¢å¼•       â”‚
â”‚ primary.xml    â†’ åŒ…åŸºæœ¬ä¿¡æ¯   â”‚
â”‚ filelists.xml  â†’ åŒ…å«æ–‡ä»¶åˆ—è¡¨ â”‚
â”‚ other.xml      â†’ æ‰©å±•ä¿¡æ¯     â”‚
â”‚ comps.xml      â†’ åŒ…ç»„å®šä¹‰     â”‚
â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ” repomd.xml ç´¢å¼•æ–‡ä»¶**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<repomd xmlns="http://linux.duke.edu/metadata/repo">
  <data type="primary">
    <location href="repodata/primary.xml.gz"/>
    <checksum type="sha256">abc123...</checksum>
    <size>1234567</size>
  </data>
  <data type="filelists">
    <location href="repodata/filelists.xml.gz"/>
    <checksum type="sha256">def456...</checksum>
    <size>2345678</size>
  </data>
</repomd>
```

### 4.3 å…ƒæ•°æ®çš„ä½œç”¨æœºåˆ¶


**âš¡ å·¥ä½œæµç¨‹**
```
ç”¨æˆ·æ‰§è¡Œyumå‘½ä»¤
        â†“
1. è¯»å– /etc/yum.repos.d/ é…ç½®
        â†“  
2. ä¸‹è½½ repomd.xml è·å–å…ƒæ•°æ®ä½ç½®
        â†“
3. æ ¹æ®éœ€è¦ä¸‹è½½å…·ä½“å…ƒæ•°æ®æ–‡ä»¶
        â†“
4. è§£æå…ƒæ•°æ®æ‰¾åˆ°ç›®æ ‡è½¯ä»¶åŒ…
        â†“
5. ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶åŒ…
```

**ğŸ”„ å…ƒæ•°æ®ç¼“å­˜æœºåˆ¶**
```ini
# å…ƒæ•°æ®ç¼“å­˜é…ç½®
metadata_expire=1h       # 1å°æ—¶åè¿‡æœŸ
metadata_expire_filter=never  # ä»ä¸è¿‡æœŸç‰¹å®šç±»å‹

# æ‰‹åŠ¨æ¸…ç†å…ƒæ•°æ®ç¼“å­˜
yum clean metadata       # æ¸…ç†å…ƒæ•°æ®
yum clean all           # æ¸…ç†æ‰€æœ‰ç¼“å­˜
yum makecache          # é‡æ–°ç”Ÿæˆç¼“å­˜
```

---

## 5. ğŸ› ï¸ å®ç”¨é…ç½®æŠ€å·§


### 5.1 å¸¸è§é…ç½®æ¨¡æ¿


**ğŸ¯ é˜¿é‡Œäº‘é•œåƒé…ç½®**
```ini
[aliyun-base]
name=Aliyun CentOS-$releasever - Base
baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/
enabled=1
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-$releasever

[aliyun-epel]
name=Aliyun EPEL
baseurl=http://mirrors.aliyun.com/epel/$releasever/$basearch/
enabled=1
gpgcheck=0
```

**ğŸ¢ å†…ç½‘ä»“åº“é…ç½®**
```ini
[company-base]
name=Company Internal Repository
baseurl=http://repo.company.com/centos/7/os/x86_64/
enabled=1
gpgcheck=0
priority=1

[company-custom]
name=Company Custom Packages
baseurl=http://repo.company.com/custom/
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-COMPANY
```

### 5.2 é…ç½®ä¼˜åŒ–å»ºè®®


**âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§**

```ini
# 1. é…ç½®æœ€å¿«çš„é•œåƒæº
baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/
        http://mirrors.163.com/centos/$releasever/os/$basearch/

# 2. åˆç†è®¾ç½®ç¼“å­˜æ—¶é—´
metadata_expire=6h        # 6å°æ—¶è¿‡æœŸï¼Œå¹³è¡¡æ€§èƒ½å’ŒåŠæ—¶æ€§

# 3. å¯ç”¨å¹¶è¡Œä¸‹è½½
max_connections=10        # æœ€å¤§å¹¶è¡Œè¿æ¥æ•°

# 4. é…ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
proxy=http://proxy.company.com:8080
proxy_username=user
proxy_password=pass
```

**ğŸ”’ å®‰å…¨é…ç½®å»ºè®®**
```ini
# 1. å¯ç”¨GPGæ£€æŸ¥
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

# 2. ä½¿ç”¨HTTPSæºï¼ˆå¦‚æœå¯ç”¨ï¼‰
baseurl=https://mirrors.aliyun.com/centos/$releasever/os/$basearch/

# 3. é™åˆ¶ä¸å¿…è¦çš„ä»“åº“
enabled=0                 # ç¦ç”¨ä¸éœ€è¦çš„ä»“åº“

# 4. é…ç½®åˆç†çš„ä¼˜å…ˆçº§
priority=1                # å®˜æ–¹ä»“åº“ä¼˜å…ˆçº§æœ€é«˜
```

### 5.3 æ•…éšœæ’é™¤æŠ€å·§


**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³**

```bash
# é—®é¢˜1ï¼šä»“åº“ä¸å¯è®¿é—®
# è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œä»“åº“åœ°å€
curl -I http://mirrors.aliyun.com/centos/7/os/x86_64/

# é—®é¢˜2ï¼šGPGæ£€æŸ¥å¤±è´¥
# è§£å†³ï¼šå¯¼å…¥GPGå¯†é’¥æˆ–ç¦ç”¨æ£€æŸ¥
rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

# é—®é¢˜3ï¼šå…ƒæ•°æ®è¿‡æœŸ
# è§£å†³ï¼šæ¸…ç†ç¼“å­˜é‡æ–°ç”Ÿæˆ
yum clean metadata && yum makecache

# é—®é¢˜4ï¼šä»“åº“å†²çª
# è§£å†³ï¼šè°ƒæ•´ä¼˜å…ˆçº§æˆ–æ’é™¤å†²çªåŒ…
excludepkgs=conflicting-package*
```

**ğŸ“Š é…ç½®éªŒè¯æ–¹æ³•**
```bash
# éªŒè¯ä»“åº“é…ç½®
yum repolist                    # æŸ¥çœ‹å¯ç”¨çš„ä»“åº“
yum repolist all               # æŸ¥çœ‹æ‰€æœ‰ä»“åº“
yum repoinfo ä»“åº“å            # æŸ¥çœ‹ç‰¹å®šä»“åº“ä¿¡æ¯

# æµ‹è¯•ä»“åº“è¿æ¥
yum --disablerepo="*" --enablerepo="ä»“åº“å" list
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ é…ç½®ç›®å½•ï¼š/etc/yum.repos.d/ å­˜æ”¾æ‰€æœ‰ä»“åº“é…ç½®æ–‡ä»¶
ğŸ”¸ é…ç½®æ ¼å¼ï¼š[ä»“åº“ID] + name + baseurl + enabled + gpgcheck
ğŸ”¸ åœ°å€é…ç½®ï¼šbaseurlç›´æ¥æŒ‡å®šï¼Œmirrorlistè‡ªåŠ¨é€‰æ‹©
ğŸ”¸ å®‰å…¨éªŒè¯ï¼šgpgcheckç¡®ä¿è½¯ä»¶åŒ…å®‰å…¨æ€§
ğŸ”¸ å…ƒæ•°æ®ï¼šrepodataç›®å½•åŒ…å«ä»“åº“çš„ç´¢å¼•ä¿¡æ¯
```

### 6.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é…ç½®æ–‡ä»¶çš„æœ¬è´¨**
```
YUMé…ç½® = è½¯ä»¶å•†åº—åœ°å€ç°¿
â€¢ å‘Šè¯‰ç³»ç»Ÿå»å“ªä¸‹è½½è½¯ä»¶
â€¢ æ§åˆ¶å“ªäº›ä»“åº“å¯ç”¨
â€¢ è®¾ç½®å®‰å…¨æ£€æŸ¥è§„åˆ™
â€¢ å®šä¹‰ä»“åº“ä¼˜å…ˆçº§
```

**ğŸ”¹ å‚æ•°é…ç½®çš„å¹³è¡¡**
```
å®‰å…¨æ€§ vs ä¾¿åˆ©æ€§ï¼š
â€¢ gpgcheck=1 æ›´å®‰å…¨ä½†å¯èƒ½å¤±è´¥
â€¢ enabled=0 é¿å…å†²çªä½†éœ€è¦æ‰‹åŠ¨å¯ç”¨

æ€§èƒ½ vs ç¨³å®šæ€§ï¼š  
â€¢ mirrorlist è‡ªåŠ¨é€‰æ‹©ä½†ä¾èµ–å¤–éƒ¨æœåŠ¡
â€¢ baseurl ç›´æ¥è®¿é—®ä½†éœ€è¦æ‰‹åŠ¨ç»´æŠ¤
```

### 6.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ é…ç½®é€‰æ‹©åŸåˆ™**
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šå¯ç”¨gpgcheckï¼Œä½¿ç”¨ç¨³å®šé•œåƒï¼Œè®¾ç½®åˆç†ç¼“å­˜
- **å¼€å‘ç¯å¢ƒ**ï¼šå¯ä»¥ç¦ç”¨gpgcheckï¼Œä½¿ç”¨å¿«é€Ÿé•œåƒ
- **å†…ç½‘ç¯å¢ƒ**ï¼šé…ç½®å†…ç½‘é•œåƒï¼Œå…³é—­å¤–ç½‘ä»“åº“
- **æµ‹è¯•ç¯å¢ƒ**ï¼šå¯ç”¨æµ‹è¯•ä»“åº“ï¼Œè®¾ç½®ä½ä¼˜å…ˆçº§

**ğŸ”§ æ—¥å¸¸ç»´æŠ¤è¦ç‚¹**
- å®šæœŸæ£€æŸ¥ä»“åº“è¿æ¥çŠ¶æ€
- åŠæ—¶æ›´æ–°GPGå¯†é’¥
- æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´é•œåƒæº
- ç›‘æ§ä»“åº“ä½¿ç”¨æƒ…å†µå’Œæ€§èƒ½

**ğŸ’¡ æ•…éšœå¤„ç†æ€è·¯**
```
æ•…éšœæ’é™¤æ­¥éª¤ï¼š
1. æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
2. éªŒè¯ç½‘ç»œè¿æ¥
3. æ¸…ç†ç¼“å­˜é‡è¯•
4. æ£€æŸ¥GPGå¯†é’¥
5. æŸ¥çœ‹æ—¥å¿—åˆ†æåŸå› 
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- YUMä»“åº“é…ç½®æ˜¯Linuxè½¯ä»¶ç®¡ç†çš„åŸºç¡€
- åˆç†çš„é…ç½®èƒ½æé«˜ç³»ç»Ÿå®‰å…¨æ€§å’Œæ€§èƒ½
- äº†è§£å…ƒæ•°æ®ç»“æ„æœ‰åŠ©äºæ·±å…¥ç†è§£YUMå·¥ä½œåŸç†
- æŒæ¡å¸¸è§å‚æ•°å’Œæ•…éšœæ’é™¤æ–¹æ³•æ˜¯å¿…å¤‡æŠ€èƒ½