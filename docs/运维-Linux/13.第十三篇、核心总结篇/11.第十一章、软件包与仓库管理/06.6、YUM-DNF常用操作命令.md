---
title: 6、YUM-DNF常用操作命令
---
## 📚 目录

1. [YUM/DNF包管理器基础概念](#1-YUM-DNF包管理器基础概念)
2. [软件包基本操作命令](#2-软件包基本操作命令)
3. [查询与信息获取命令](#3-查询与信息获取命令)
4. [组包管理操作](#4-组包管理操作)
5. [历史记录与缓存管理](#5-历史记录与缓存管理)
6. [高级管理功能](#6-高级管理功能)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🎯 YUM/DNF包管理器基础概念


### 1.1 什么是YUM和DNF


**🔸 YUM（Yellowdog Updater Modified）**
```
简单理解：YUM就是Red Hat系统的"应用商店"
作用：帮你自动下载、安装、更新软件
好处：不用手动处理软件依赖关系
适用：CentOS 7及之前版本
```

**🔸 DNF（Dandified YUM）**
```
简单理解：DNF是YUM的升级版
作用：和YUM完全一样，但更快更稳定
好处：解决依赖更智能，速度更快
适用：CentOS 8/Rocky Linux/RHEL 8+
```

> 💡 **新手提示**
> 
> 把YUM/DNF想象成手机上的应用商店：
> - 你想装个软件，告诉它软件名字
> - 它自动找到软件和所需的依赖
> - 一键安装，全部搞定

### 1.2 YUM与DNF的关系对比


| 特性对比 | **YUM** | **DNF** | **说明** |
|---------|---------|---------|----------|
| 🕐 **使用年代** | `2003-2020` | `2015至今` | DNF是YUM的继承者 |
| ⚡ **性能表现** | `较慢` | `更快` | DNF内存占用更少 |
| 🔧 **依赖处理** | `基础算法` | `智能算法` | DNF解决冲突更准确 |
| 📝 **命令兼容** | `YUM语法` | `兼容YUM` | 大部分命令可以直接替换 |

### 1.3 命令执行权限说明


**🔒 权限要求**
```
普通用户：只能查询，不能安装/删除
超级用户：可以执行所有包管理操作

获取管理权限的方法：
方式1：切换到root用户
su -

方式2：使用sudo临时提权
sudo yum install xxx
```

---

## 2. 🔧 软件包基本操作命令


### 2.1 安装软件包 - install


**🔸 基本安装语法**
```bash
# YUM安装软件
yum install 软件名

# DNF安装软件  
dnf install 软件名

# 示例：安装vim编辑器
yum install vim
dnf install vim
```

**💡 install命令的实际含义**
- **作用**：从仓库下载并安装指定软件
- **过程**：检查依赖 → 下载软件包 → 安装到系统
- **结果**：软件可以直接使用

**🔸 安装多个软件包**
```bash
# 一次安装多个软件
yum install vim git wget

# 使用通配符安装（谨慎使用）
yum install "php*"
```

**🔸 安装指定版本**
```bash
# 查看可用版本
yum list available | grep nginx

# 安装特定版本
yum install nginx-1.20.1
```

### 2.2 更新软件包 - update


**🔸 基本更新操作**
```bash
# 更新单个软件包
yum update 软件名

# 更新系统所有软件包
yum update

# 只检查更新，不实际安装
yum check-update
```

> ⚠️ **新手注意**
> 
> `yum update` 会更新整个系统，可能需要很长时间
> 建议先用 `yum check-update` 看看有多少更新

**🔸 更新与升级的区别**
```
update：在同一大版本内更新（如：1.2.0 → 1.2.5）
upgrade：可能跨大版本升级，DNF中等同于update
```

### 2.3 卸载软件包 - remove


**🔸 卸载软件**
```bash
# 卸载指定软件
yum remove 软件名

# 卸载多个软件
yum remove vim git wget
```

**💡 remove命令注意事项**
- **作用**：删除软件及其配置文件
- **依赖处理**：会提示哪些软件依赖被删除的软件
- **配置保留**：部分配置文件可能保留在系统中

**🔸 自动删除不需要的依赖**
```bash
# DNF自动清理无用依赖
dnf autoremove

# YUM需要安装额外工具
yum install yum-utils
package-cleanup --leaves
```

### 2.4 重新安装 - reinstall


**🔸 重新安装的应用场景**
- 软件文件损坏或误删
- 配置出错想恢复默认设置
- 软件运行异常需要修复

```bash
# 重新安装软件
yum reinstall 软件名

# 示例：重新安装vim
yum reinstall vim
```

---

## 3. 🔍 查询与信息获取命令


### 3.1 搜索软件包 - search


**🔸 基本搜索功能**
```bash
# 搜索软件名包含关键词的包
yum search 关键词

# 示例：搜索包含"python"的软件包
yum search python
```

**💡 search命令的工作原理**
- **搜索范围**：软件包名称、描述、摘要
- **匹配方式**：模糊匹配，不区分大小写
- **显示内容**：包名、架构、简要描述

**🔸 精确搜索技巧**
```bash
# 只搜索包名（不搜索描述）
yum search --name-only nginx

# 搜索多个关键词
yum search "web server"
```

### 3.2 显示软件包信息 - info


**🔸 查看详细信息**
```bash
# 查看软件包详细信息
yum info 软件名

# 示例：查看nginx的详细信息
yum info nginx
```

**📋 info命令显示的信息内容**
```
名称：软件包的完整名称
版本：当前可用的版本号
架构：适用的CPU架构（x86_64、i686等）
大小：安装后占用的磁盘空间
源：来自哪个软件仓库
摘要：软件的简要说明
描述：软件的详细功能介绍
```

### 3.3 列出软件包 - list


**🔸 列出已安装的软件**
```bash
# 列出所有已安装的软件包
yum list installed

# 列出特定软件的安装情况
yum list installed | grep nginx

# 检查某个软件是否已安装
yum list installed nginx
```

**🔸 列出可用软件**
```bash
# 列出仓库中所有可用软件
yum list available

# 列出所有软件包（已安装+可用）
yum list all

# 按名称模糊匹配
yum list "*nginx*"
```

### 3.4 查找文件来源 - provides


**🔸 根据文件查找软件包**
```bash
# 查找某个命令属于哪个软件包
yum provides /bin/ls
yum provides ls

# 查找某个文件属于哪个软件包  
yum provides /etc/nginx/nginx.conf

# 使用通配符查找
yum provides "*/nginx.conf"
```

**💡 provides命令的实际用途**
- **场景1**：系统提示"命令未找到"，用它找需要安装的包
- **场景2**：需要某个配置文件，不知道在哪个软件包里
- **场景3**：想知道某个可执行文件来自哪里

---

## 4. 📦 组包管理操作


### 4.1 什么是软件组（Group）


**🔸 软件组概念解释**
```
软件组：把相关的多个软件包打包在一起
目的：方便批量安装某类功能的所有软件
举例：
- "开发工具"组：包含gcc、make、git等开发必需软件
- "Web服务器"组：包含apache、nginx等Web相关软件
```

### 4.2 查看可用软件组


**🔸 列出所有软件组**
```bash
# 查看系统中所有软件组
yum grouplist

# DNF查看组信息
dnf group list

# 查看已安装的组
yum grouplist installed
```

**🔸 查看组详细信息**
```bash
# 查看某个组包含哪些软件
yum groupinfo "开发工具"
yum groupinfo "Development Tools"
```

### 4.3 安装软件组 - groupinstall


**🔸 安装完整软件组**
```bash
# 安装开发工具组
yum groupinstall "开发工具"
yum groupinstall "Development Tools"

# DNF安装组
dnf group install "Development Tools"
```

> 💡 **组安装的好处**
> 
> 一次性安装某个功能所需的所有软件，省时省力
> 例如：安装"开发工具"组后，就有了编译程序的完整环境

**🔸 组管理的其他操作**
```bash
# 更新软件组
yum groupupdate "Development Tools"

# 删除软件组
yum groupremove "Development Tools"
```

---

## 5. 📜 历史记录与缓存管理


### 5.1 查看操作历史 - history


**🔸 历史记录的作用**
- **跟踪变更**：查看之前安装/删除了什么软件
- **问题排查**：找出什么时候出现的问题
- **操作回滚**：撤销某次不当的操作

**🔸 基本历史查询**
```bash
# 查看最近的操作历史
yum history

# 查看详细的历史信息
yum history list

# 查看某次操作的详细信息
yum history info 5
```

**📋 history命令输出解读**
```
ID：操作编号，每次操作都有唯一编号
命令行：当时执行的具体命令
日期时间：操作的具体时间
操作：Install（安装）、Update（更新）、Erase（删除）
改变数量：这次操作影响了多少个软件包
```

**🔸 历史操作的回滚**
```bash
# 撤销某次操作（危险操作，谨慎使用）
yum history undo 5

# 重复某次操作
yum history redo 3
```

### 5.2 缓存管理 - clean


**🔸 缓存是什么**
```
YUM/DNF缓存：下载的软件包和仓库信息的临时存储
位置：通常在 /var/cache/yum/ 或 /var/cache/dnf/
作用：加速重复下载，减少网络流量
问题：占用磁盘空间，信息可能过时
```

**🔸 清理缓存操作**
```bash
# 清理所有缓存
yum clean all

# 只清理软件包缓存
yum clean packages

# 只清理仓库元数据
yum clean metadata

# 清理过期的缓存
yum clean expire-cache
```

**🔸 各种清理选项的含义**
```
all：清理所有缓存数据
packages：清理下载的rpm包
metadata：清理仓库的元数据信息
dbcache：清理SQLite数据库缓存
expire-cache：清理过期的缓存信息
```

### 5.3 更新元数据 - makecache


**🔸 什么是元数据**
```
元数据：仓库中软件包的信息清单
内容：包名、版本、依赖关系、下载地址等
作用：让YUM/DNF知道仓库里有什么软件可用
更新频率：仓库有新软件时需要更新
```

**🔸 手动更新元数据**
```bash
# 下载并缓存所有仓库的元数据
yum makecache

# 快速构建缓存（只下载必要信息）
yum makecache fast

# DNF构建缓存
dnf makecache
```

**💡 何时需要makecache**
- 新添加了软件仓库
- 长时间没有更新仓库信息
- 搜索软件时提示"没有找到"
- 系统提示缓存过期

---

## 6. 🚀 高级管理功能


### 6.1 仓库管理相关


**🔸 启用/禁用仓库**
```bash
# 临时启用某个仓库
yum --enablerepo=epel install htop

# 临时禁用某个仓库
yum --disablerepo=base install nginx

# 查看所有仓库状态
yum repolist all
```

### 6.2 下载软件包（不安装）


**🔸 仅下载软件包**
```bash
# 只下载不安装（需要安装插件）
yum install yum-utils
yumdownloader nginx

# DNF下载软件包
dnf download nginx
```

### 6.3 本地软件包管理


**🔸 安装本地rpm包**
```bash
# 安装本地rpm包并解决依赖
yum localinstall package.rpm

# DNF安装本地包
dnf install ./package.rpm
```

### 6.4 查看依赖关系


**🔸 分析软件依赖**
```bash
# 查看软件的依赖关系
yum deplist nginx

# 查看哪些软件依赖于某个包
yum --whatrequires openssl
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的基本命令


```
🔸 安装软件：yum/dnf install 软件名
🔸 更新软件：yum/dnf update 软件名  
🔸 删除软件：yum/dnf remove 软件名
🔸 搜索软件：yum/dnf search 关键词
🔸 查看信息：yum/dnf info 软件名
🔸 列出已装：yum/dnf list installed
🔸 清理缓存：yum/dnf clean all
🔸 更新缓存：yum/dnf makecache
```

### 7.2 常见应用场景理解


**🔹 日常软件管理流程**
```
1. 搜索软件：search命令找到想要的软件
2. 查看信息：info命令了解软件详情
3. 安装软件：install命令安装
4. 管理维护：定期update更新，clean清理缓存
```

**🔹 问题排查思路**
```
软件找不到：检查仓库配置，更新元数据
安装失败：查看错误信息，解决依赖冲突
历史追溯：使用history命令查看操作记录
空间不足：使用clean命令清理缓存
```

### 7.3 重要注意事项


**⚠️ 权限管理**
- 安装/删除软件需要root权限
- 查询操作普通用户也可以执行
- 建议使用sudo而不是直接用root

**⚠️ 安全考虑**
- 只从可信仓库安装软件
- 定期更新系统补丁
- 删除软件前确认依赖关系

**⚠️ 性能优化**
- 定期清理缓存释放空间
- 禁用不需要的仓库提升速度
- 使用组安装减少重复操作

### 7.4 YUM vs DNF选择建议


| 系统版本 | **推荐工具** | **原因说明** |
|---------|-------------|-------------|
| `CentOS 7及以前` | **YUM** | 系统默认，稳定可靠 |
| `CentOS 8+` | **DNF** | 性能更好，功能更强 |
| `RHEL 8+` | **DNF** | 官方推荐，长期支持 |
| `Rocky/Alma Linux` | **DNF** | 新系统标准配置 |

**🧠 记忆口诀**：
```
"搜索查看再安装，更新删除要小心
清理缓存常维护，历史记录好排查
YUM DNF功能同，新系统用DNF更聪明"
```

**核心理解**：
- YUM/DNF就是Linux的"软件管家"，帮你管理所有软件
- 记住最常用的几个命令：install、remove、search、info、update
- 出问题时先看错误信息，再用history查看操作历史
- 定期清理缓存和更新系统是好习惯