---
title: 3、字符与字符集
---
## 📚 目录

1. [普通字符](#1-普通字符)
2. [元字符](#2-元字符)
3. [转义字符](#3-转义字符)
4. [锚点](#4-锚点)
5. [字符集](#5-字符集)
6. [简写字符集](#6-简写字符集)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 📝 普通字符


### 1.1 普通字符基本概念


**🔸 什么是普通字符**
普通字符（Literal Characters）在正则表达式中表示其**字面含义**，不具有特殊含义的字符，按原样匹配。

```
普通字符分类架构：
┌─────────────────┐
│   普通字符       │
├─────────────────┤
│ 1. 英文字母     │ ← a-z, A-Z
├─────────────────┤
│ 2. 数字字符     │ ← 0-9
├─────────────────┤
│ 3. 常规符号     │ ← @#%&,;:"'~ 等
├─────────────────┤
│ 4. 非英文字符   │ ← 汉字、日文、韩文
└─────────────────┘
```

### 1.2 普通字符分类详解


**📋 主要类型对比**

| 类型 | 字符范围 | 是否需转义 | 匹配说明 |
|------|----------|------------|----------|
| **英文字母** | `a-z, A-Z` | ❌ 否 | 按原样匹配 |
| **数字字符** | `0-9` | ❌ 否 | 等价于 `[0-9]` |
| **非元符号** | `@#%&,;:"'~` | ❌ 否 | 按原样匹配 |
| **元字符** | `.*+?^$[](){}|\` | ✅ 是 | 需要 `\` 转义 |

### 1.3 使用示例


**✅ 正确使用示例**

```bash
abc         # 匹配字符串中连续的 "abc"
123         # 匹配字符串中连续的 "123"
hello123    # 匹配 "hello123"
你好         # 匹配包含"你好"的中文字符（支持 Unicode）
```

**❌ 常见错误示例**

```bash
a.b         # 匹配以 "a" 开头，"b" 结尾，中间有任意字符（. 是元字符）

# 正确写法：
a\.b        # 匹配的是 "a.b"（中间是点）
```

### 1.4 与元字符的区别


**💡 核心区别**
- **普通字符**：按原样匹配，不解释
- **元字符**：具有特殊含义，需转义后作为普通字符使用

> ⚠️ **注意事项**
> 
> - 某些字符可能被误认为元字符：`. * + ? ^ $ [ ] ( ) { } | \`
> - 若想匹配这些字符本身，应使用反斜杠 `\` 进行转义
> - 示例：`\.` 表示匹配字面意义上的点号 `.`

---

## 2. ⚙️ 元字符


### 2.1 元字符基本概念


**🔸 什么是元字符**
元字符（Metacharacters）在正则表达式中具有特殊意义的字符，非字面匹配，需要理解其语法含义。

```
元字符功能分类：
┌─────────────────┐
│   元字符系统     │
├─────────────────┤
│ 1. 数量控制     │ ← * + ? {n,m}
├─────────────────┤
│ 2. 位置控制     │ ← ^ $ \b \B
├─────────────────┤
│ 3. 字符集合     │ ← [] [^] -
├─────────────────┤
│ 4. 分组引用     │ ← () (?:) \1 \2
├─────────────────┤
│ 5. 选择逻辑     │ ← |
├─────────────────┤
│ 6. 特殊字符     │ ← . \
├─────────────────┤
│ 7. 断言控制     │ ← (?=) (?!) (?<=) (?<!)
└─────────────────┘
```

### 2.2 数量控制元字符


**⚡ 重复/量词元字符**

| 元字符 | 含义 | 示例 | 匹配结果 |
|--------|------|------|----------|
| `*` | 0次或多次 | `a*` | `""`, `"a"`, `"aaa"` |
| `+` | 1次或多次 | `a+` | `"a"`, `"aaa"` |
| `?` | 0次或1次 | `a?` | `""`, `"a"` |
| `{n,m}` | n到m次 | `a{2,4}` | `"aa"`, `"aaa"`, `"aaaa"` |

**💻 实际应用示例**

```bash
a*           # 匹配 0 次或多次的 "a"           → "", "a", "aa", "aaa"
a+           # 匹配 1 次或多次的 "a"           → "a", "aa", "aaa"  
a?           # 匹配 0 次或 1 次的 "a"           → "", "a"
a{2,4}       # 匹配 "a" 重复 2~4 次              → "aa", "aaa", "aaaa"
```

### 2.3 位置控制元字符


**🎯 边界符详解**

```bash
位置控制元字符：
^      ：匹配输入字符串的开始         → "^abc" 匹配以 "abc" 开头
$      ：匹配输入字符串的结束         → "abc$" 匹配以 "abc" 结尾
\b     ：单词边界                     → "\babc\b" 匹配完整单词 "abc"
\B     ：非单词边界                   → "\Babc\B" 不在单词边界处的 "abc"
```

**📋 位置控制示例**

```bash
^abc         # 匹配以 "abc" 开头的字符串         → "abc", "abcdef"
abc$         # 匹配以 "abc" 结尾的字符串         → "123abc"
\babc\b      # 匹配完整单词 "abc"               → "abc", 不匹配 "xabc" 或 "abcx"
\Babc\B      # 匹配非单词边界处的 "abc"         → 匹配 "xabcx"，不匹配 " abc "
```

### 2.4 字符集合元字符


**📊 字符类控制**

```bash
字符集合元字符：
[]     ：匹配括号中的任一字符         → "[abc]" 匹配 "a" 或 "b" 或 "c"
[^]    ：匹配不在集合中的字符         → "[^abc]" 排除 a, b, c
-      ：范围符                       → "[a-z]" 匹配小写字母
```

**💻 字符集合示例**

```bash
[abc]        # 匹配 "a"、"b" 或 "c" 中任意一个   → "a", "b", "c"
[^abc]       # 匹配非 "a"、"b"、"c" 的字符       → "d", "x", "1"
[a-z]        # 匹配任意小写字母                 → "a", "m", "z"
[0-9A-F]     # 匹配十六进制字符                 → "0", "9", "A", "F"
```

### 2.5 分组与引用元字符


**🔗 分组控制机制**

| 元字符 | 功能 | 示例 | 说明 |
|--------|------|------|------|
| `()` | 捕获分组 | `(abc)` | 匹配并捕获 "abc" |
| `(?:)` | 非捕获分组 | `(?:abc)` | 匹配但不捕获 |
| `\1, \2` | 反向引用 | `(abc)\1` | 匹配 "abcabc" |
| `(?<name>)` | 命名分组 | `(?<name>abc)` | 命名捕获组 |

**💻 分组示例**

```bash
(abc)        # 匹配并捕获 "abc"                  → 捕获组 1 为 "abc"
(?:abc)      # 匹配 "abc"，但不捕获             → 不产生分组编号
(abc)\1      # 匹配 "abcabc"                    → 第一次为组，\1 引用前面的 "abc"
(?<name>abc) # 命名捕获组（部分语言支持）       → 捕获组名为 name
\k<name>     # 命名组的反向引用（部分语言支持） → 如匹配 "abcabc"
```

### 2.6 选择与特殊字符


**🔀 逻辑选择**

```bash
abc|def      # 匹配 "abc" 或 "def"              → "abc", "def"
(cat|dog)    # 匹配 "cat" 或 "dog"              → "cat", "dog"
```

**🎭 特殊字符**

```bash
.            # 匹配除换行符外的任意字符         → "a", "1", "_", "中"
a.b          # 匹配 a + 任意字符 + b            → "acb", "a9b", "a_b"
\.           # 匹配字面量点号 "."               → 匹配 "1.0", 不匹配 "10"
\\           # 匹配反斜杠符号 "\"               → "\\"
```

### 2.7 断言元字符


**🔍 零宽断言**

```bash
断言类型：
(?=X)   ：正向先行断言                 → "a(?=b)" 匹配 "a"，后面必须是 "b"
(?!X)   ：负向先行断言                 → "a(?!b)" 匹配 "a"，后面不是 "b"
(?<=X)  ：正向后行断言（Lookbehind）  → "(?<=a)b" 匹配 "b"，前面是 "a"
(?<!X)  ：负向后行断言                 → "(?<!a)b" 匹配 "b"，前面不是 "a"
```

**💻 断言示例**

```bash
a(?=b)       # 匹配 "a"，后面必须是 "b"          → "ab" 中的 "a"
a(?!b)       # 匹配 "a"，后面不能是 "b"          → "ac" 中的 "a"
(?<=a)b      # 匹配 "b"，前面必须是 "a"          → "ab" 中的 "b"
(?<!a)b      # 匹配 "b"，前面不能是 "a"          → "cb" 中的 "b"
```

---

## 3. 🔄 转义字符


### 3.1 转义字符基本概念


**🔸 转义字符定义**
`\` 是正则表达式中的"转义符"，用于将元字符转为普通字符，或表示预定义字符类。

```
转义字符用途：
┌─────────────────┐
│   转义字符 \     │
├─────────────────┤
│ 1. 转义元字符   │ ← 将特殊符号当作普通字符
├─────────────────┤
│ 2. 预定义字符类 │ ← \d \w \s 等快捷方式
├─────────────────┤
│ 3. 边界控制     │ ← \b \B 边界断言
├─────────────────┤
│ 4. 其他转义     │ ← \\ \n \t 等
└─────────────────┘
```

### 3.2 转义元字符


**🔧 元字符转义对照**

| 转义写法 | 匹配内容 | 说明 |
|----------|----------|------|
| `\.` | 点号 "." | 匹配字面点号 |
| `\*` | 星号 "*" | 匹配字面星号 |
| `\+` | 加号 "+" | 匹配字面加号 |
| `\?` | 问号 "?" | 匹配字面问号 |
| `\|` | 竖线 "|" | 匹配字面竖线 |
| `\(` `\)` | 括号 "(" ")" | 匹配字面括号 |
| `\[` `\]` | 中括号 "[" "]" | 匹配字面中括号 |
| `\{` `\}` | 花括号 "{" "}" | 匹配字面花括号 |

### 3.3 预定义字符类


**⚡ 快捷字符类**

```
预定义字符类对照：
\d        ：匹配数字 0-9                  → 等价于 [0-9]
\D        ：匹配非数字字符                → 等价于 [^0-9]
\w        ：匹配单词字符（字母数字下划线）→ 等价于 [a-zA-Z0-9_]
\W        ：匹配非单词字符                → 等价于 [^\w]
\s        ：匹配空白符（空格、制表符等）  → 空格, \t, \n
\S        ：匹配非空白符                  → 等价于 [^\s]
```

### 3.4 边界控制转义


**🎯 边界转义字符**

```bash
\b        # 匹配单词边界（前后是 \w 与 \W 的交界）
\B        # 匹配非单词边界
```

### 3.5 转义字符示例


**📋 转义字符对照表**

| 转义表达式 | 匹配内容 | 示例匹配 |
|------------|----------|----------|
| `\.` | 字面点号 | `"1.0"`, `"a.b"` |
| `\\` | 反斜杠 | `"\\server\file"` |
| `\d` | 数字字符 | `"0"`, `"5"`, `"9"` |
| `\D` | 非数字字符 | `"a"`, `"Z"`, `"@"` |
| `\w` | 单词字符 | `"A"`, `"9"`, `"_"` |
| `\W` | 非单词字符 | `"%"`, `"#"`, `" "` |
| `\s` | 空白字符 | `" "`, `"\t"`, `"\n"` |
| `\S` | 非空白字符 | `"a"`, `"1"`, `"$"` |
| `\bword\b` | 完整单词 | 匹配 `"word"`，不匹配 `"password"` |
| `\Bend\B` | 非边界匹配 | 匹配 `"blend"`，不匹配 `" end "` |

> 💡 **语言差异提示**
> 
> 在 Java、C#、JSON 字符串中，`\\` 才表示正则中的 `\`
> 
> 示例：`"\\d+"` 表示正则的 `\d+`

---

## 4. ⚓ 锚点


### 4.1 锚点基本概念


**🔸 什么是锚点**
锚点（Anchors）是零宽度的位置匹配符，用于指定匹配在字符串中的位置，而不是匹配具体的字符。

```
锚点分类体系：
┌─────────────────┐
│   锚点系统       │
├─────────────────┤
│ 1. 行级锚点     │ ← ^ $ 字符串首尾
├─────────────────┤
│ 2. 单词边界     │ ← \b \B 单词边界
├─────────────────┤
│ 3. 多行模式     │ ← 配合模式修饰符
└─────────────────┘
```

### 4.2 锚点类型详解


**📋 常见锚点汇总**

| 锚点 | 名称 | 功能描述 | 示例 |
|------|------|----------|------|
| `^` | 行首锚点 | 匹配输入字符串的开始位置 | `^abc` |
| `$` | 行尾锚点 | 匹配输入字符串的结束位置 | `abc$` |
| `\b` | 单词边界 | 匹配单词开始或结束的位置 | `\bword\b` |
| `\B` | 非单词边界 | 匹配不在单词边界处的位置 | `\Bcat\B` |

### 4.3 锚点使用示例


**✅ 正确使用示例**

```bash
^abc         # 匹配以 "abc" 开头的字符串         → "abc123" ✔，"xabc123" ✘
abc$         # 匹配以 "abc" 结尾的字符串         → "123abc" ✔，"abc123" ✘
^\d{3}$      # 匹配整行是3位数字的字符串         → "123" ✔，"1234" ✘，"a123" ✘

\bword\b     # 匹配完整单词 "word"               → "word" ✔，"password" ✘
\Bcat\B      # 匹配非边界处的 "cat"              → "concatenate" ✔，" cat " ✘
```

### 4.4 常见锚点误区


**❌ 常见错误理解**

| 表达式 | 错误理解 | 正确解释 |
|--------|----------|----------|
| `^abc$` | 匹配任意包含 abc 的字符串 | ❌ 只匹配"整行是 abc"的情况 |
| `abc^` | 错误写法 | ❌ ^ 只能放在开头 |
| `\babc` | 匹配以 abc 开头的完整单词 | ✔ 如 "abc123"，不匹配 "xabc" |

### 4.5 多行模式扩展


**🔄 多行匹配模式**

```
多行模式说明：
默认模式：^ 和 $ 匹配整个字符串的首尾
多行模式（m）：^ 和 $ 匹配每一行的开头和结尾
```

---

## 5. 📊 字符集


### 5.1 字符集基本概念


**🔸 字符集定义**
字符集：用 `[ ]` 括起来的一组字符，表示"匹配其中任意一个字符"。

```
字符集架构：
┌─────────────────┐
│   字符集 [ ]     │
├─────────────────┤
│ 1. 基本字符集   │ ← [abc] 简单列举
├─────────────────┤
│ 2. 范围字符集   │ ← [a-z] 范围表示
├─────────────────┤
│ 3. 组合字符集   │ ← [aeiou0-9] 混合
├─────────────────┤
│ 4. 排除字符集   │ ← [^abc] 取反操作
├─────────────────┤
│ 5. 特殊符号集   │ ← [@#$] 符号匹配
├─────────────────┤
│ 6. 转义字符集   │ ← [\[\]] 转义处理
├─────────────────┤
│ 7. Unicode字符集│ ← [\u4e00-\u9fa5] 中文
└─────────────────┘
```

### 5.2 字符集分类详解


**📋 基本字符集**

```bash
[abc]        # 匹配 "a" 或 "b" 或 "c"
[xyz123]     # 匹配 "x"、"y"、"z"、"1"、"2"、"3"
```

**📈 范围字符集**

```bash
[a-z]        # 匹配小写字母
[A-Z]        # 匹配大写字母
[0-9]        # 匹配数字
[a-zA-Z0-9]  # 匹配任意大小写字母和数字
```

**🔗 组合字符集**

```bash
[aeiou0-9]   # 匹配元音字母或数字
[abcXYZ789]  # 匹配多个不连续字符和数字
```

**❌ 排除字符集**

```bash
[^abc]       # 匹配不是 a、b、c 的字符
[^0-9]       # 匹配非数字字符
[^aeiouAEIOU]# 匹配非元音字母的字符
```

### 5.3 字符集使用示例


**📊 使用示例对照表**

| 表达式 | 匹配内容 | 匹配示例 |
|--------|----------|----------|
| `[a-c]` | "a"、"b"、"c" 中任一字符 | `"a"`, `"b"`, `"c"` |
| `[0-9]` | 任意数字 | `"0"`, `"5"`, `"9"` |
| `[a-zA-Z]` | 任意字母 | `"a"`, `"Z"`, `"m"` |
| `[^abc]` | 除了 "a"、"b"、"c" 以外的字符 | `"d"`, `"1"`, `"@"` |
| `[a-z0-9]` | 小写字母或数字 | `"a"`, `"5"`, `"z"` |
| `[.,;!?]` | 匹配任一标点符号 | `"."`, `"!"`, `"?"` |
| `[a\-z]` | 匹配 "a"、"-"、"z" | `"a"`, `"-"`, `"z"` |

### 5.4 特殊符号处理


**🔧 特殊符号字符集**

```bash
[@#$]        # 匹配 "@"、"#"、"$"
[.,;!?]      # 匹配标点符号
```

**⚠️ 转义处理**

```bash
[\[\]()]     # 匹配 "["、"]"、"("、")"
[\^\-\]]     # 匹配 "^"、"-"、"]"（位置需小心）
```

### 5.5 常见注意事项


**❌ 错误写法与解决方案**

| 错误写法或误区 | 正确方式 | 原因说明 |
|----------------|----------|----------|
| `[^]` | 非空字符集合 | 空集合不能取反，语义不清 |
| `[-az]` | `[\-az]` | 把 `-` 放开头或转义防止构成范围 |
| `[a-z-]` | 匹配 a-z 和 `-` | `-` 在尾部不会构成范围 |
| `[abc` | 错误，未闭合 | `[]` 必须配对 |
| `[a^]` | 匹配 "a" 或 "^" | `^` 不是开头时不是取反 |

**💡 范围符号处理**

```bash
[a-z-]       # 表示 a 到 z 的字符 以及 "-" 字符本身
[-a-z]       # 表示 "-" 字符 和 a 到 z 的字符
[a\-z]       # 同样表示 a、z、"-"（转义也可以）
```

### 5.6 Unicode字符集


**🌐 Unicode支持**

```bash
[\u4e00-\u9fa5] # 匹配中文字符（Unicode 范围）
```

---

## 6. ⚡ 简写字符集


### 6.1 简写字符集概述


**🔸 预定义字符类**
简写字符集（Predefined Character Classes）是正则表达式中的预定义字符类，提供了常用字符集合的快捷写法。

```
简写字符集体系：
┌─────────────────┐
│  简写字符集      │
├─────────────────┤
│ 1. 数字类       │ ← \d \D
├─────────────────┤
│ 2. 单词字符类   │ ← \w \W
├─────────────────┤
│ 3. 空白字符类   │ ← \s \S
├─────────────────┤
│ 4. 通配符类     │ ← . 点号
├─────────────────┤
│ 5. 边界断言类   │ ← \b \B
└─────────────────┘
```

### 6.2 简写字符集详解


**📊 核心简写字符类**

| 简写字符 | 含义描述 | 等价字符集 | 匹配示例 |
|----------|----------|------------|----------|
| `\d` | 数字字符 | `[0-9]` | `"0"`, `"5"`, `"9"` |
| `\D` | 非数字字符 | `[^0-9]` | `"a"`, `"Z"`, `"@"` |
| `\w` | 单词字符 | `[a-zA-Z0-9_]` | `"a"`, `"Z"`, `"3"`, `"_"` |
| `\W` | 非单词字符 | `[^a-zA-Z0-9_]` | `"@"`, `"！"`, `" "` |
| `\s` | 空白字符 | `[ \t\r\n\f\v]` | `" "`, `"\n"`, `"\t"` |
| `\S` | 非空白字符 | `[^ \t\r\n\f\v]` | `"A"`, `"中"`, `"5"` |

### 6.3 通配符与边界


**🎭 特殊字符类**

```bash
.            # 匹配任意字符（不包括换行）         → "a", "中", "1", "!"
\bword\b     # 匹配完整的单词 "word"              → 匹配 "word"，不匹配 "sword"
\Bend\B      # 匹配非边界处的 "end"               → 匹配 "blend", "tend"，不匹配 " end "
```

### 6.4 实际应用示例


**💻 简写字符集应用**

```bash
\d           # 匹配数字字符（0~9）                → "0", "3", "9"
\D           # 匹配非数字字符                     → "a", "#", "中"
\w           # 匹配字母/数字/下划线               → "a", "Z", "3", "_"
\W           # 匹配非 \w 字符                     → "@", "！", "空格"
\s           # 匹配空白符                         → " ", "\n", "\t"
\S           # 匹配非空白字符                     → "A", "中", "5"
.            # 匹配任意字符（不包括换行）         → "a", "中", "1", "!"
```

### 6.5 常见组合应用


**🚀 实用组合模式**

```bash
^\d{4}-\d{2}-\d{2}$     # 匹配日期格式：2025-05-18
^\w{6,12}$              # 匹配 6~12 位字母/数字/下划线用户名
^\s*$                   # 匹配空白行
\w+@\w+\.\w+            # 匹配邮箱（简单版）
\b\d{4,6}\b             # 匹配 4~6 位数字，如验证码
```

### 6.6 简写与原始对比


**📋 简写字符集 VS 等价字符集对照**

| 简写字符 | 含义描述 | 等价字符集 | 使用建议 |
|----------|----------|------------|----------|
| `\d` | 数字字符 | `[0-9]` | 推荐使用简写 |
| `\D` | 非数字字符 | `[^0-9]` | 推荐使用简写 |
| `\w` | 单词字符 | `[a-zA-Z0-9_]` | 推荐使用简写 |
| `\W` | 非单词字符 | `[^a-zA-Z0-9_]` | 推荐使用简写 |
| `\s` | 空白字符 | `[ \t\r\n\f\v]` | 推荐使用简写 |
| `\S` | 非空白字符 | `[^ \t\r\n\f\v]` | 推荐使用简写 |

> 💡 **使用建议**
> 
> - 简写字符集代码更简洁易读
> - 在复杂表达式中提高可维护性
> - 跨语言兼容性更好

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念


```
🔸 普通字符：按字面意思匹配，不需要特殊处理
🔸 元字符：具有特殊含义的控制字符，是正则的核心
🔸 转义字符：用 \ 改变字符含义，包括转义和预定义类
🔸 锚点：零宽度位置匹配，控制匹配位置
🔸 字符集：用[]定义字符范围，支持范围和排除
🔸 简写字符集：预定义的常用字符类快捷方式
```

### 7.2 关键理解要点


**🔹 字符类型的识别**
```
普通字符：a-z, 0-9, 汉字等 → 直接匹配
元字符：.*+?^$[](){}|\ → 有特殊功能
转义后：\. \* \+ → 变成普通字符
预定义：\d \w \s → 快捷字符类
```

**🔹 字符集的使用原则**
```
基本原则：
- [abc] 表示"或"的关系，匹配其中任一个
- [^abc] 表示"非"的关系，排除指定字符
- [a-z] 表示范围，连续字符区间
- 组合使用：[a-zA-Z0-9] 多种类型混合
```

**🔹 转义的时机判断**
```
需要转义：
- 想匹配元字符本身：\. \* \+
- 使用预定义字符类：\d \w \s

不需要转义：
- 普通字母数字：abc 123
- 字符集内部的普通符号：[.@#]
```

### 7.3 实际应用指导


**🎯 选择合适的表达方式**

```
数字匹配：
\d 优于 [0-9] → 简洁易读
[0-5] 优于 具体枚举 → 范围更清晰

字符集使用：
[aeiou] → 明确的少量字符
[a-z] → 连续范围
[^0-9] → 排除特定类型
```

**🔧 常见模式组合**

```
验证模式：
手机号：^1[3-9]\d{9}$
邮箱：^\w+@\w+\.\w+$
身份证：^\d{17}[\dX]$

提取模式：
提取数字：\d+
提取单词：\b\w+\b
提取中文：[\u4e00-\u9fa5]+
```

### 7.4 最佳实践建议


**💡 编写建议**
- **优先使用简写**：`\d` 而不是 `[0-9]`
- **明确边界**：使用 `\b` 确保完整匹配
- **合理转义**：只在必要时使用 `\`
- **注释复杂表达式**：提高可维护性

**⚠️ 常见陷阱**
- 忘记转义元字符导致意外匹配
- 在字符集中误用范围符号 `-`
- 混淆 `^` 在不同位置的含义
- 不理解零宽断言的位置特性

**核心记忆口诀**：
- 普通字符照样写，元字符功能要记清
- 转义符号改含义，预定义类很便利
- 锚点控制位置准，字符集合任选一
- 简写字符最常用，掌握规律事半功