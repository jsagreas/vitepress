---
title: 8、Linux权限模型原理
---
## 📚 目录

1. [Linux权限系统概述](#1-Linux权限系统概述)
2. [三类用户身份详解](#2-三类用户身份详解)
3. [权限位详细解析](#3-权限位详细解析)
4. [权限检查算法流程](#4-权限检查算法流程)
5. [二进制权限表示](#5-二进制权限表示)
6. [权限继承与覆盖机制](#6-权限继承与覆盖机制)
7. [目录权限vs文件权限](#7-目录权限vs文件权限)
8. [权限安全模型理论](#8-权限安全模型理论)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🔐 Linux权限系统概述


### 1.1 权限系统的本质作用


**权限系统就像现实中的"门锁+身份证"机制**
```
现实类比：
公司大楼 → Linux系统
房间 → 文件/目录  
钥匙 → 权限
员工身份 → 用户身份

不同身份的人拿到不同的钥匙，能进入不同的房间
```

**🎯 核心目的**：
- **安全隔离**：防止用户误操作或恶意破坏
- **资源保护**：保护重要系统文件不被篡改
- **多用户协作**：让多人安全地共享同一台计算机

### 1.2 权限系统的组成要素


```
Linux权限 = 身份识别 + 操作许可

身份识别：你是谁？
• 文件所有者 (Owner)
• 同组用户 (Group)  
• 其他用户 (Others)

操作许可：你能做什么？
• 读取 (Read)    - 能看内容
• 写入 (Write)   - 能修改内容
• 执行 (Execute) - 能运行程序
```

**💡 理解要点**：
> Linux的权限控制是基于"用户身份+操作类型"的组合判断，就像银行的保险箱需要"身份验证+操作授权"两重检查

---

## 2. 👥 三类用户身份详解


### 2.1 文件所有者 (Owner/User)


**🔸 定义**：创建文件的那个人，拥有文件的"主人"身份

```
生活类比：
你买的房子 → 你创建的文件
你是房主 → 你是文件所有者
你有最大的处置权 → 你有最高的文件权限
```

**特征说明**：
- 通常是创建该文件的用户
- 对文件拥有最高控制权
- 可以修改文件权限设置
- 用字母 `u` (user) 表示

### 2.2 所属组用户 (Group)


**🔸 定义**：与文件所有者属于同一个组的所有用户

```
组织类比：
部门 → 用户组
部门成员 → 组用户
部门文件 → 组共享文件
部门内有一定权限 → 组用户有组权限
```

**实际应用场景**：
```
开发团队项目：
• 项目经理创建项目文件
• 开发组成员都能读写代码文件
• 测试组成员只能读取不能修改
• 其他部门员工无法访问
```

- 用字母 `g` (group) 表示
- 便于团队协作和资源共享

### 2.3 其他用户 (Others)


**🔸 定义**：既不是文件所有者，也不属于文件所属组的所有其他用户

```
权限层次图：
文件所有者 (最高权限)
    ↓
所属组用户 (中等权限)  
    ↓
其他用户 (最低权限)
```

- 用字母 `o` (others) 表示
- 通常权限最受限制
- 保障系统安全的重要机制

**⚠️ 安全考虑**：
> 其他用户的权限设置直接影响系统安全，设置过宽松可能导致敏感信息泄露

---

## 3. ⚡ 权限位详细解析


### 3.1 三种基本权限类型


#### 📖 读权限 (Read - r)


**对文件的作用**：
- 能够查看文件内容
- 可以复制文件
- 能用cat、less、more等命令查看

**对目录的作用**：
- 能够列出目录中的文件名
- 可以使用ls命令查看目录内容

```
实际示例：
有读权限： cat /etc/passwd  ✅ 成功
无读权限： cat /etc/shadow  ❌ Permission denied
```

#### ✏️ 写权限 (Write - w)


**对文件的作用**：
- 能够修改文件内容
- 可以删除文件内容
- 能保存对文件的更改

**对目录的作用**：
- 能在目录中创建新文件
- 可以删除目录中的文件
- 能重命名目录中的文件

**🚨 重要理解**：
> 删除文件需要的是对**目录**的写权限，而不是对文件本身的写权限

#### 🚀 执行权限 (Execute - x)


**对文件的作用**：
- 能够运行可执行文件
- 可以执行脚本程序
- 运行二进制程序

**对目录的作用**：
- 能够进入目录 (使用cd命令)
- 可以访问目录中的文件
- 能够通过目录到达子目录

### 3.2 权限的组合效果


| **权限组合** | **对文件** | **对目录** |
|-------------|-----------|-----------|
| `r--` | 只能读取内容 | 只能列出文件名 |
| `-w-` | 只能写入(实际很少用) | 只能创建/删除文件 |
| `--x` | 只能执行程序 | 只能进入目录 |
| `rw-` | 可读写，不能执行 | 可列出+操作文件，不能进入 |
| `r-x` | 可读可执行，不能修改 | 可列出+进入，不能创建文件 |
| `-wx` | 可写可执行，不能读 | 可操作+进入，不能列出 |
| `rwx` | 完全控制 | 完全控制 |

---

## 4. 🔍 权限检查算法流程


### 4.1 Linux权限检查的执行顺序


Linux系统检查权限时遵循严格的顺序，**不会跳级检查**：

```
权限检查流程：
1. 检查是否为文件所有者 → 是：使用Owner权限
   ↓ (不是)
2. 检查是否为同组用户 → 是：使用Group权限  
   ↓ (不是)
3. 使用Others权限
```

### 4.2 具体检查算法


**🔄 检查步骤详解**：

```
Step 1: 身份识别
当前用户UID = 文件所有者UID？
  ├─ 是 → 使用Owner权限位 (rwx-------)
  └─ 否 → 继续Step 2

Step 2: 组身份检查  
当前用户GID ∈ 文件所属组？
  ├─ 是 → 使用Group权限位 (---rwx---)
  └─ 否 → 继续Step 3

Step 3: 其他用户权限
使用Others权限位 (------rwx)
```

### 4.3 权限检查实例分析


**📋 案例分析**：

```
文件: project.txt
所有者: alice (UID: 1000)
所属组: developers (GID: 100)  
权限: rw-r-----  (640)

用户访问情况分析：
┌─────────────────────────────────────────┐
│ 用户身份        │ 检查结果    │ 获得权限 │
├─────────────────────────────────────────┤
│ alice(所有者)   │ Step1匹配   │ rw- (6) │
│ bob(同组用户)   │ Step2匹配   │ r-- (4) │  
│ charlie(其他)   │ Step3使用   │ --- (0) │
└─────────────────────────────────────────┘
```

**💡 关键理解**：
> 即使alice同时也属于developers组，但因为她是所有者，系统在Step1就停止检查，只使用Owner权限

---

## 5. 🔢 二进制权限表示


### 5.1 权限位的二进制原理


每组权限用3位二进制数表示：

```
权限映射：
r (read)    → 2² = 4 → 100₂
w (write)   → 2¹ = 2 → 010₂  
x (execute) → 2⁰ = 1 → 001₂
```

### 5.2 常用权限的数字表示


**📊 权限对照表**：

| **二进制** | **十进制** | **符号表示** | **含义说明** |
|-----------|-----------|-------------|-------------|
| `000` | 0 | `---` | 无任何权限 |
| `001` | 1 | `--x` | 只能执行 |
| `010` | 2 | `-w-` | 只能写入 |
| `011` | 3 | `-wx` | 可写可执行 |
| `100` | 4 | `r--` | 只能读取 |
| `101` | 5 | `r-x` | 可读可执行 |
| `110` | 6 | `rw-` | 可读可写 |
| `111` | 7 | `rwx` | 完全权限 |

### 5.3 三位数字权限表示法


```
完整权限表示：
644 = 所有者(6) + 组用户(4) + 其他用户(4)

具体展开：
6 → rw- (所有者可读写)
4 → r-- (组用户只读)  
4 → r-- (其他用户只读)

最终显示: -rw-r--r--
```

**🎯 常用权限组合**：

```
📁 目录常用权限：
755 → drwxr-xr-x (所有者完全权限，其他人可读可进入)
750 → drwxr-x--- (所有者完全权限，同组可读可进入，其他人无权限)
700 → drwx------ (只有所有者能访问)

📄 文件常用权限：
644 → -rw-r--r-- (所有者可读写，其他人只读)
600 → -rw------- (只有所有者能读写)
755 → -rwxr-xr-x (所有者完全权限，其他人可读可执行)
```

---

## 6. 🔄 权限继承与覆盖机制


### 6.1 权限继承原理


**🔸 基本继承规则**：
新创建的文件和目录会继承创建者的默认权限设置

```
权限继承流程：
用户创建文件/目录
    ↓
系统查看umask值
    ↓  
最大权限 - umask = 实际权限
    ↓
设置到新文件/目录
```

### 6.2 umask机制详解


**umask (User Mask)**：用户权限掩码，决定新建文件的默认权限

```
umask工作原理：
文件最大权限: 666 (rw-rw-rw-)
目录最大权限: 777 (rwxrwxrwx)  

实际权限 = 最大权限 - umask值

示例计算：
umask = 022
文件权限 = 666 - 022 = 644 (rw-r--r--)
目录权限 = 777 - 022 = 755 (rwxr-xr-x)
```

**🔧 umask实际应用**：

| **umask值** | **文件权限** | **目录权限** | **使用场景** |
|------------|------------|------------|------------|
| `022` | `644` | `755` | 系统默认，平衡安全性 |
| `077` | `600` | `700` | 高安全环境 |
| `002` | `664` | `775` | 团队协作环境 |

### 6.3 权限覆盖规则


**显式权限设置会覆盖继承的权限**：

```
权限优先级：
手动chmod设置 (最高优先级)
    ↓
继承的umask权限
    ↓  
系统默认权限 (最低优先级)
```

---

## 7. 📁 目录权限vs文件权限


### 7.1 核心区别理解


**文件权限**：控制文件内容的访问
**目录权限**：控制目录本身和目录内文件的访问

```
形象比喻：
文件 = 书本 → 文件权限控制能否读/写/执行这本书
目录 = 书柜 → 目录权限控制能否打开书柜/在书柜中放取书本
```

### 7.2 目录特殊权限含义


#### 📖 目录的读权限 (r)

- **作用**：能列出目录中的文件名
- **限制**：只能看到文件名，无法获取详细信息

```bash
# 只有读权限的目录
ls dir/        # ✅ 能看到文件名
ls -l dir/     # ❌ 无法获取详细信息  
cd dir/        # ❌ 无法进入目录
```

#### ✏️ 目录的写权限 (w)

- **作用**：能在目录中创建、删除、重命名文件
- **重要**：删除文件需要对目录有写权限

```
关键理解：
删除文件 = 从目录中移除文件记录
因此需要目录写权限，而非文件写权限
```

#### 🚀 目录的执行权限 (x)

- **作用**：能进入目录，访问目录中的文件
- **必须性**：访问目录内文件的前提条件

### 7.3 目录权限组合效果


| **权限** | **效果** | **实际用途** |
|---------|---------|-------------|
| `r--` | 只能列出文件名 | 很少单独使用 |
| `-w-` | 只能创建删除文件，但看不到 | 临时目录 |
| `--x` | 只能进入，看不到内容 | 隐藏目录访问 |
| `r-x` | 能查看和进入，不能修改 | 只读共享目录 |
| `-wx` | 能操作文件，看不到列表 | 提交目录 |
| `rw-` | 能查看操作，不能进入 | 理论上无意义 |
| `rwx` | 完全控制 | 个人目录 |

**💡 实用技巧**：
> 目录权限最常用的是`755`(所有者完全权限，其他人只读进入)和`750`(限制其他用户访问)

---

## 8. 🛡️ 权限安全模型理论


### 8.1 Linux权限安全原则


#### 🔸 最小权限原则

**定义**：给用户分配完成工作所需的最小权限集

```
安全等级设计：
系统管理员 → root权限 (完全控制)
    ↓
部门管理员 → 部分sudo权限
    ↓  
普通用户 → 基本文件操作权限
    ↓
受限用户 → 特定目录访问权限
```

#### 🔸 权限分离原则

**不同类型的操作使用不同的权限控制**：

```
权限分层：
系统级操作 → 需要root权限
用户级操作 → 普通用户权限  
文件级操作 → 文件权限控制
网络级操作 → 防火墙规则
```

### 8.2 权限安全模型的层次结构


```
Linux安全模型架构：
┌─────────────────────────────────┐
│        用户空间应用程序          │
├─────────────────────────────────┤
│        文件权限控制层            │ ← 本章重点
├─────────────────────────────────┤  
│        用户身份认证层            │
├─────────────────────────────────┤
│        系统调用接口层            │
├─────────────────────────────────┤
│        内核权限检查层            │
└─────────────────────────────────┘
```

### 8.3 权限模型的安全防护机制


**🔸 纵深防御**：
```
多层安全检查：
网络防火墙 → 系统登录认证 → 用户权限检查 → 文件权限验证
```

**🔸 权限审计**：
- 定期检查文件权限设置
- 监控权限变更操作  
- 记录权限相关的系统日志

**⚠️ 常见安全风险**：

| **风险类型** | **具体表现** | **防护方法** |
|-------------|-------------|-------------|
| **权限过宽** | 重要文件设置777权限 | 使用最小权限原则 |
| **权限提升** | 普通用户获得root权限 | 严格控制sudo配置 |
| **权限泄露** | 敏感文件被其他用户读取 | 合理设置文件权限 |

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的基本概念


```
🔸 三类用户身份：Owner(所有者) > Group(组用户) > Others(其他用户)
🔸 三种基本权限：Read(读) + Write(写) + Execute(执行)  
🔸 权限检查顺序：先检查所有者 → 再检查组用户 → 最后其他用户
🔸 二进制表示法：rwx = 111₂ = 7₁₀，常用755、644等
🔸 目录vs文件：目录权限控制目录访问，文件权限控制内容访问
```

### 9.2 关键理解要点


**🔹 权限检查的"就近原则"**：
```
系统按身份距离远近检查权限：
距离最近的身份权限生效，不会向下查找
所有者身份 > 组成员身份 > 其他用户身份
```

**🔹 目录权限的特殊性**：
```
理解重点：
• 目录的x权限 = 能否进入目录
• 目录的w权限 = 能否在目录中创建/删除文件  
• 删除文件需要目录w权限，而非文件本身的w权限
```

**🔹 权限数字化的计算逻辑**：
```
记忆方法：
r=4, w=2, x=1 (二进制位值)
常用组合: 7=rwx, 6=rw-, 5=r-x, 4=r--
三位数字: 第一位=所有者, 第二位=组用户, 第三位=其他用户
```

### 9.3 实际应用价值


**🎯 系统管理应用**：
- **文件保护**：设置合适权限保护重要系统文件
- **多用户协作**：通过组权限实现团队文件共享
- **安全加固**：使用最小权限原则提升系统安全性

**🔧 日常操作应用**：
- **个人文件管理**：合理设置个人文件的访问权限
- **脚本程序管理**：为可执行脚本设置正确的执行权限
- **目录结构规划**：根据用途设计目录权限结构

**💡 核心记忆口诀**：
```
"三身份三权限，检查有顺序"
"目录控访问，文件控内容"  
"数字算权限，4+2+1组合"
"安全第一条，最小权限好"
```

**⭐ 重要程度标识**：
- ⭐⭐⭐ **核心必会**：三类用户、三种权限、权限检查顺序
- ⭐⭐ **需要掌握**：数字权限表示、目录文件权限区别
- ⭐ **了解即可**：umask机制、高级安全模型理论