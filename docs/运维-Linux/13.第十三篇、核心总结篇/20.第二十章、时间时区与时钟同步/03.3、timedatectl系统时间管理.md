---
title: 3ã€timedatectlç³»ç»Ÿæ—¶é—´ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [timedatectlå·¥å…·æ¦‚è¿°](#1-timedatectlå·¥å…·æ¦‚è¿°)
2. [æ—¶é—´çŠ¶æ€æŸ¥çœ‹ä¸åˆ†æ](#2-æ—¶é—´çŠ¶æ€æŸ¥çœ‹ä¸åˆ†æ)
3. [æ‰‹åŠ¨æ—¶é—´è®¾ç½®æ“ä½œ](#3-æ‰‹åŠ¨æ—¶é—´è®¾ç½®æ“ä½œ)
4. [æ—¶åŒºç®¡ç†ä¸é…ç½®](#4-æ—¶åŒºç®¡ç†ä¸é…ç½®)
5. [NTPæ—¶é—´åŒæ­¥æ§åˆ¶](#5-NTPæ—¶é—´åŒæ­¥æ§åˆ¶)
6. [ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼è®¾ç½®](#6-ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼è®¾ç½®)
7. [systemd-timesyncdæœåŠ¡é›†æˆ](#7-systemd-timesyncdæœåŠ¡é›†æˆ)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ• timedatectlå·¥å…·æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯timedatectl


**timedatectl**æ˜¯systemdç³»ç»Ÿä¸­ä¸“é—¨ç”¨æ¥ç®¡ç†ç³»ç»Ÿæ—¶é—´å’Œæ—¥æœŸçš„å‘½ä»¤è¡Œå·¥å…·ã€‚

**é€šä¿—ç†è§£**ï¼š
```
å°±åƒæ˜¯ä½ æ‰‹æœºä¸Šçš„æ—¶é—´è®¾ç½®ç•Œé¢ï¼Œä½†è¿™ä¸ªæ˜¯Linuxç³»ç»Ÿçš„
å¯ä»¥æŸ¥çœ‹å½“å‰æ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€è®¾ç½®æ—¶åŒºã€å¼€å¯ç½‘ç»œæ—¶é—´åŒæ­¥ç­‰

ç›¸å½“äºæŠŠä»¥å‰éœ€è¦å¤šä¸ªä¸åŒå‘½ä»¤æ‰èƒ½å®Œæˆçš„æ—¶é—´ç®¡ç†ä»»åŠ¡
ç»Ÿä¸€åˆ°ä¸€ä¸ªå·¥å…·é‡Œï¼Œä½¿ç”¨æ›´æ–¹ä¾¿ã€æ›´ç»Ÿä¸€
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦timedatectl


**ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜**ï¼š
- `date`å‘½ä»¤åªèƒ½è®¾ç½®ç³»ç»Ÿæ—¶é—´
- `hwclock`å‘½ä»¤åªèƒ½è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿ  
- `ntpd`æœåŠ¡é…ç½®å¤æ‚
- å„ç§æ—¶é—´å·¥å…·äº’ä¸åè°ƒ

**timedatectlçš„ä¼˜åŠ¿**ï¼š
```
âœ… ç»Ÿä¸€ç®¡ç†ï¼šä¸€ä¸ªå·¥å…·ç®¡ç†æ‰€æœ‰æ—¶é—´ç›¸å…³è®¾ç½®
âœ… systemdé›†æˆï¼šä¸ç³»ç»ŸæœåŠ¡ç´§å¯†æ•´åˆ
âœ… çŠ¶æ€æ¸…æ™°ï¼šå¯ä»¥æ¸…æ¥šçœ‹åˆ°å„ç§æ—¶é—´çŠ¶æ€
âœ… æ“ä½œç®€å•ï¼šå‘½ä»¤è¯­æ³•ç®€æ´æ˜“æ‡‚
```

### 1.3 é€‚ç”¨ç³»ç»ŸèŒƒå›´


| ç³»ç»Ÿç±»å‹ | **æ”¯æŒæƒ…å†µ** | **è¯´æ˜** |
|---------|-------------|----------|
| ğŸ§ **CentOS 7+** | `å®Œå…¨æ”¯æŒ` | `systemdé»˜è®¤å·¥å…·` |
| ğŸ§ **Ubuntu 16.04+** | `å®Œå…¨æ”¯æŒ` | `æ›¿ä»£ä¼ ç»Ÿæ—¶é—´å·¥å…·` |
| ğŸ§ **RHEL 7+** | `å®Œå…¨æ”¯æŒ` | `ä¼ä¸šçº§Linuxæ ‡å‡†` |
| ğŸ§ **Debian 8+** | `å®Œå…¨æ”¯æŒ` | `ç³»ç»Ÿé›†æˆå·¥å…·` |

---

## 2. ğŸ“Š æ—¶é—´çŠ¶æ€æŸ¥çœ‹ä¸åˆ†æ


### 2.1 åŸºæœ¬çŠ¶æ€æŸ¥çœ‹


**æŸ¥çœ‹å®Œæ•´æ—¶é—´çŠ¶æ€**ï¼š
```bash
timedatectl status
```

**è¾“å‡ºè§£è¯»**ï¼š
```
               Local time: Wed 2025-01-15 10:30:45 CST
           Universal time: Wed 2025-01-15 02:30:45 UTC  
                 RTC time: Wed 2025-01-15 02:30:45
                Time zone: Asia/Shanghai (CST, +0800)
System clock synchronized: yes
              NTP service: active
          RTC in local TZ: no

è§£é‡Šæ¯ä¸€è¡Œçš„å«ä¹‰ï¼š
Local time    â†’ æœ¬åœ°æ—¶é—´ï¼ˆè€ƒè™‘æ—¶åŒºçš„æ—¶é—´ï¼‰
Universal time â†’ UTCæ—¶é—´ï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰
RTC time      â†’ ç¡¬ä»¶æ—¶é’Ÿæ—¶é—´
Time zone     â†’ å½“å‰æ—¶åŒºè®¾ç½®
System clock synchronized â†’ ç³»ç»Ÿæ—¶é’Ÿæ˜¯å¦å·²åŒæ­¥
NTP service   â†’ NTPæœåŠ¡çŠ¶æ€
RTC in local TZ â†’ ç¡¬ä»¶æ—¶é’Ÿæ˜¯å¦ä½¿ç”¨æœ¬åœ°æ—¶åŒº
```

### 2.2 æ—¶é—´åŒæ­¥çŠ¶æ€è¯¦è§£


**åŒæ­¥çŠ¶æ€å«ä¹‰**ï¼š
```
System clock synchronized: yes
â””â”€â”€ è¡¨ç¤ºç³»ç»Ÿæ—¶é—´å·²ç»ä¸ç½‘ç»œæ—¶é—´æœåŠ¡å™¨åŒæ­¥

System clock synchronized: no  
â””â”€â”€ è¡¨ç¤ºç³»ç»Ÿæ—¶é—´æœªåŒæ­¥ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨åŒæ­¥
```

**NTPæœåŠ¡çŠ¶æ€**ï¼š
```
NTP service: active
â””â”€â”€ NTPæ—¶é—´åŒæ­¥æœåŠ¡æ­£åœ¨è¿è¡Œ

NTP service: inactive
â””â”€â”€ NTPæœåŠ¡æœªå¯åŠ¨ï¼Œæ— æ³•è‡ªåŠ¨åŒæ­¥æ—¶é—´
```

### 2.3 æ—¶åŒºä¿¡æ¯è§£è¯»


**æ—¶åŒºæ˜¾ç¤ºæ ¼å¼**ï¼š
```
Time zone: Asia/Shanghai (CST, +0800)
           â†‘            â†‘    â†‘
           |            |    â””â”€â”€ ç›¸å¯¹UTCçš„æ—¶å·®
           |            â””â”€â”€ æ—¶åŒºç®€ç§°
           â””â”€â”€ å®Œæ•´æ—¶åŒºåç§°

å¸¸è§æ—¶åŒºç®€ç§°ï¼š
CST â†’ China Standard Time (ä¸­å›½æ ‡å‡†æ—¶é—´)
UTC â†’ Coordinated Universal Time (åè°ƒä¸–ç•Œæ—¶)
GMT â†’ Greenwich Mean Time (æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´)  
EST â†’ Eastern Standard Time (ç¾å›½ä¸œéƒ¨æ ‡å‡†æ—¶é—´)
```

---

## 3. â° æ‰‹åŠ¨æ—¶é—´è®¾ç½®æ“ä½œ


### 3.1 è®¾ç½®å®Œæ•´æ—¥æœŸæ—¶é—´


**åŸºæœ¬è¯­æ³•**ï¼š
```bash
timedatectl set-time "YYYY-MM-DD HH:MM:SS"
```

**å®é™…æ“ä½œç¤ºä¾‹**ï¼š
```bash
# è®¾ç½®ä¸º2025å¹´1æœˆ15æ—¥ 14:30:00
timedatectl set-time "2025-01-15 14:30:00"

# è®¾ç½®ä¸ºå½“å‰æ—¥æœŸçš„15:45:30
timedatectl set-time "15:45:30"
```

> ğŸ’¡ **é‡è¦æç¤º**ï¼šå¦‚æœå¯ç”¨äº†NTPåŒæ­¥ï¼Œéœ€è¦å…ˆå…³é—­NTPæ‰èƒ½æ‰‹åŠ¨è®¾ç½®æ—¶é—´

### 3.2 ä»…è®¾ç½®æ—¥æœŸ


**è®¾ç½®æ—¥æœŸ**ï¼š
```bash
# åªè®¾ç½®æ—¥æœŸï¼Œæ—¶é—´ä¿æŒä¸å˜
timedatectl set-time "2025-01-15"
```

**ä½¿ç”¨åœºæ™¯**ï¼š
```
âœ… ç³»ç»Ÿåˆæ¬¡å®‰è£…æ—¶è®¾ç½®æ­£ç¡®æ—¥æœŸ
âœ… è™šæ‹Ÿæœºæ—¶é—´æ¼‚ç§»ä¿®æ­£
âœ… ç¦»çº¿ç¯å¢ƒä¸‹çš„æ—¶é—´æ ¡å‡†
```

### 3.3 ä»…è®¾ç½®æ—¶é—´


**è®¾ç½®æ—¶é—´**ï¼š
```bash
# åªè®¾ç½®æ—¶é—´ï¼Œæ—¥æœŸä¿æŒä¸å˜
timedatectl set-time "14:30:00"
```

### 3.4 æ‰‹åŠ¨è®¾ç½®çš„é™åˆ¶æ¡ä»¶


**å‰ææ¡ä»¶æ£€æŸ¥**ï¼š
```bash
# 1. é¦–å…ˆæ£€æŸ¥NTPçŠ¶æ€
timedatectl status | grep "NTP service"

# 2. å¦‚æœNTPæ˜¯activeï¼Œéœ€è¦å…ˆå…³é—­
timedatectl set-ntp false

# 3. ç„¶åæ‰èƒ½æ‰‹åŠ¨è®¾ç½®æ—¶é—´
timedatectl set-time "2025-01-15 14:30:00"

# 4. è®¾ç½®å®Œæˆåå¯ä»¥é‡æ–°å¯ç”¨NTP
timedatectl set-ntp true
```

---

## 4. ğŸŒ æ—¶åŒºç®¡ç†ä¸é…ç½®


### 4.1 æŸ¥çœ‹å¯ç”¨æ—¶åŒºåˆ—è¡¨


**åˆ—å‡ºæ‰€æœ‰æ—¶åŒº**ï¼š
```bash
timedatectl list-timezones
```

**å¸¸ç”¨æ—¶åŒºå¿«é€ŸæŸ¥æ‰¾**ï¼š
```bash
# æŸ¥æ‰¾ä¸­å›½ç›¸å…³æ—¶åŒº
timedatectl list-timezones | grep Asia/Shanghai
timedatectl list-timezones | grep China

# æŸ¥æ‰¾ç¾å›½ç›¸å…³æ—¶åŒº
timedatectl list-timezones | grep America/New_York
timedatectl list-timezones | grep US/

# æŸ¥æ‰¾æ¬§æ´²ç›¸å…³æ—¶åŒº  
timedatectl list-timezones | grep Europe/London
```

### 4.2 è®¾ç½®æ—¶åŒº


**åŸºæœ¬æ—¶åŒºè®¾ç½®**ï¼š
```bash
# è®¾ç½®ä¸ºä¸Šæµ·æ—¶åŒºï¼ˆä¸­å›½æ ‡å‡†æ—¶é—´ï¼‰
timedatectl set-timezone Asia/Shanghai

# è®¾ç½®ä¸ºçº½çº¦æ—¶åŒº  
timedatectl set-timezone America/New_York

# è®¾ç½®ä¸ºä¼¦æ•¦æ—¶åŒº
timedatectl set-timezone Europe/London

# è®¾ç½®ä¸ºUTCæ—¶åŒº
timedatectl set-timezone UTC
```

### 4.3 æ—¶åŒºè®¾ç½®æ•ˆæœéªŒè¯


**è®¾ç½®å‰åå¯¹æ¯”**ï¼š
```bash
# è®¾ç½®å‰æŸ¥çœ‹çŠ¶æ€
timedatectl status

# æ›´æ”¹æ—¶åŒº
timedatectl set-timezone Asia/Tokyo

# è®¾ç½®åå†æ¬¡æŸ¥çœ‹çŠ¶æ€
timedatectl status

å¯¹æ¯”è§‚å¯Ÿï¼š
- Local timeçš„æ˜¾ç¤ºæ—¶é—´ä¼šæ ¹æ®æ–°æ—¶åŒºè‡ªåŠ¨è°ƒæ•´
- Time zoneå­—æ®µä¼šæ˜¾ç¤ºæ–°çš„æ—¶åŒºä¿¡æ¯
- Universal timeä¿æŒä¸å˜ï¼ˆå› ä¸ºUTCæ˜¯æ ‡å‡†æ—¶é—´ï¼‰
```

### 4.4 å¸¸ç”¨æ—¶åŒºå¯¹ç…§è¡¨


| åœ°åŒº | **æ—¶åŒºåç§°** | **ç®€ç§°** | **ç›¸å¯¹UTCæ—¶å·®** |
|------|-------------|---------|----------------|
| ğŸ‡¨ğŸ‡³ **ä¸­å›½** | `Asia/Shanghai` | `CST` | `+08:00` |
| ğŸ‡¯ğŸ‡µ **æ—¥æœ¬** | `Asia/Tokyo` | `JST` | `+09:00` |
| ğŸ‡ºğŸ‡¸ **ç¾å›½ä¸œéƒ¨** | `America/New_York` | `EST` | `-05:00` |
| ğŸ‡ºğŸ‡¸ **ç¾å›½è¥¿éƒ¨** | `America/Los_Angeles` | `PST` | `-08:00` |
| ğŸ‡¬ğŸ‡§ **è‹±å›½** | `Europe/London` | `GMT` | `+00:00` |

---

## 5. ğŸŒ NTPæ—¶é—´åŒæ­¥æ§åˆ¶


### 5.1 ä»€ä¹ˆæ˜¯NTPåŒæ­¥


**NTPåŒæ­¥åŸç†**ï¼š
```
NTP = Network Time Protocolï¼ˆç½‘ç»œæ—¶é—´åè®®ï¼‰

å·¥ä½œæœºåˆ¶ï¼š
å®¢æˆ·ç«¯ â†â†’ NTPæœåŠ¡å™¨ â†â†’ åŸå­é’Ÿ/GPS
   |                        â†‘
   â””â”€â”€ å®šæœŸåŒæ­¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é«˜ç²¾åº¦æ—¶é—´æº

ç›®çš„ï¼šè®©ç³»ç»Ÿæ—¶é—´ä¸ç½‘ç»œä¸Šçš„æ ‡å‡†æ—¶é—´ä¿æŒä¸€è‡´
```

### 5.2 NTPæœåŠ¡æ§åˆ¶


**å¯ç”¨NTPåŒæ­¥**ï¼š
```bash
timedatectl set-ntp true
```

**ç¦ç”¨NTPåŒæ­¥**ï¼š
```bash  
timedatectl set-ntp false
```

**æ£€æŸ¥NTPçŠ¶æ€**ï¼š
```bash
timedatectl status | grep NTP
```

### 5.3 NTPåŒæ­¥çš„å½±å“


**å¯ç”¨NTPåçš„å˜åŒ–**ï¼š
```
âœ… ç³»ç»Ÿè‡ªåŠ¨ä¸ç½‘ç»œæ—¶é—´æœåŠ¡å™¨åŒæ­¥
âœ… æ—¶é—´ç²¾åº¦æ›´é«˜ï¼Œæ¼‚ç§»æ›´å°
âœ… æ— éœ€æ‰‹åŠ¨ç»´æŠ¤æ—¶é—´å‡†ç¡®æ€§
âŒ ä¸èƒ½æ‰‹åŠ¨ä¿®æ”¹æ—¶é—´ï¼ˆä¼šè¢«è¦†ç›–ï¼‰
```

**ç¦ç”¨NTPåçš„å½±å“**ï¼š
```  
âœ… å¯ä»¥æ‰‹åŠ¨è®¾ç½®ä»»æ„æ—¶é—´
âŒ æ—¶é—´å¯èƒ½é€æ¸ä¸å‡†ç¡®
âŒ éœ€è¦å®šæœŸæ‰‹åŠ¨æ ¡å‡†
```

### 5.4 NTPåŒæ­¥çŠ¶æ€ç›‘æ§


**è¯¦ç»†åŒæ­¥çŠ¶æ€æŸ¥çœ‹**ï¼š
```bash
# æŸ¥çœ‹timedatectlçŠ¶æ€
timedatectl status

# æŸ¥çœ‹systemd-timesyncdæœåŠ¡çŠ¶æ€
systemctl status systemd-timesyncd

# æŸ¥çœ‹åŒæ­¥è¯¦ç»†ä¿¡æ¯
timedatectl show-timesync --all
```

**åŒæ­¥çŠ¶æ€åˆ¤æ–­**ï¼š
```
System clock synchronized: yes
â””â”€â”€ è¡¨ç¤ºå½“å‰æ—¶é—´å·²åŒæ­¥ï¼Œå¯ä¿¡èµ–

System clock synchronized: no
â””â”€â”€ è¡¨ç¤ºæ—¶é—´æœªåŒæ­¥ï¼Œå¯èƒ½å­˜åœ¨æ—¶å·®
```

---

## 6. âš™ï¸ ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼è®¾ç½®


### 6.1 ç¡¬ä»¶æ—¶é’Ÿä¸ç³»ç»Ÿæ—¶é’Ÿ


**ä¸¤ç§æ—¶é’Ÿçš„åŒºåˆ«**ï¼š
```
ç¡¬ä»¶æ—¶é’Ÿï¼ˆRTC - Real Time Clockï¼‰ï¼š
â”œâ”€â”€ ä¸»æ¿ä¸Šçš„ç‹¬ç«‹æ—¶é’ŸèŠ¯ç‰‡
â”œâ”€â”€ å³ä½¿æ–­ç”µä¹Ÿèƒ½ä¿æŒæ—¶é—´
â”œâ”€â”€ å¼€æœºæ—¶ä¸ºç³»ç»Ÿæä¾›åˆå§‹æ—¶é—´
â””â”€â”€ ç²¾åº¦ç›¸å¯¹è¾ƒä½ï¼Œå®¹æ˜“æ¼‚ç§»

ç³»ç»Ÿæ—¶é’Ÿï¼ˆSystem Clockï¼‰ï¼š  
â”œâ”€â”€ æ“ä½œç³»ç»Ÿç»´æŠ¤çš„æ—¶é—´
â”œâ”€â”€ è¿è¡Œæ—¶åŠ¨æ€æ›´æ–°
â”œâ”€â”€ å¯ä»¥é€šè¿‡NTPä¿æŒé«˜ç²¾åº¦
â””â”€â”€ æ–­ç”µåä¸¢å¤±ï¼Œéœ€è¦ä»ç¡¬ä»¶æ—¶é’Ÿæ¢å¤
```

### 6.2 ç¡¬ä»¶æ—¶é’Ÿæ—¶åŒºæ¨¡å¼


**æŸ¥çœ‹å½“å‰ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼**ï¼š
```bash
timedatectl status | grep "RTC in local TZ"
```

**ä¸¤ç§æ¨¡å¼å¯¹æ¯”**ï¼š
```
RTC in local TZ: noï¼ˆæ¨èæ¨¡å¼ï¼‰
â”œâ”€â”€ ç¡¬ä»¶æ—¶é’Ÿä½¿ç”¨UTCæ—¶é—´
â”œâ”€â”€ ç³»ç»Ÿå¯åŠ¨æ—¶æ ¹æ®æ—¶åŒºè®¾ç½®è®¡ç®—æœ¬åœ°æ—¶é—´
â”œâ”€â”€ æ›´æ¢æ—¶åŒºæ—¶æ— éœ€ä¿®æ”¹ç¡¬ä»¶æ—¶é’Ÿ
â””â”€â”€ é¿å…å¤ä»¤æ—¶åˆ‡æ¢é—®é¢˜

RTC in local TZ: yesï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
â”œâ”€â”€ ç¡¬ä»¶æ—¶é’Ÿä½¿ç”¨æœ¬åœ°æ—¶é—´
â”œâ”€â”€ ä¸WindowsåŒç³»ç»Ÿå…¼å®¹æ€§æ›´å¥½
â”œâ”€â”€ æ›´æ¢æ—¶åŒºæ—¶éœ€è¦åŒæ­¥ä¿®æ”¹ç¡¬ä»¶æ—¶é’Ÿ  
â””â”€â”€ å¤ä»¤æ—¶åˆ‡æ¢æ—¶å¯èƒ½å‡ºç°é—®é¢˜
```

### 6.3 è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼


**è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿä¸ºUTCæ¨¡å¼**ï¼š
```bash
timedatectl set-local-rtc false
```

**è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿä¸ºæœ¬åœ°æ—¶é—´æ¨¡å¼**ï¼š
```bash
timedatectl set-local-rtc true
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼šä¿®æ”¹ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼ä¼šè‡ªåŠ¨è°ƒæ•´ç¡¬ä»¶æ—¶é’Ÿæ—¶é—´ï¼Œç¡®ä¿ç³»ç»Ÿæ—¶é—´ä¿æŒæ­£ç¡®

### 6.4 WindowsåŒç³»ç»Ÿå…¼å®¹


**åŒç³»ç»Ÿæ—¶é—´é—®é¢˜**ï¼š
```
é—®é¢˜æè¿°ï¼š
Linuxå’ŒWindowså¯¹ç¡¬ä»¶æ—¶é’Ÿçš„ç†è§£ä¸åŒ
â”œâ”€â”€ Linuxé»˜è®¤è®¤ä¸ºç¡¬ä»¶æ—¶é’Ÿæ˜¯UTCæ—¶é—´
â””â”€â”€ Windowsé»˜è®¤è®¤ä¸ºç¡¬ä»¶æ—¶é’Ÿæ˜¯æœ¬åœ°æ—¶é—´

è§£å†³æ–¹æ¡ˆ1ï¼ˆæ¨èï¼‰ï¼šè®©Windowsä¹Ÿä½¿ç”¨UTC
# åœ¨Windowsä¸­ä¿®æ”¹æ³¨å†Œè¡¨
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation]
"RealTimeIsUniversal"=dword:00000001

è§£å†³æ–¹æ¡ˆ2ï¼šè®©Linuxä½¿ç”¨æœ¬åœ°æ—¶é—´
timedatectl set-local-rtc true
```

---

## 7. ğŸ”§ systemd-timesyncdæœåŠ¡é›†æˆ


### 7.1 systemd-timesyncdæœåŠ¡ä»‹ç»


**ä»€ä¹ˆæ˜¯systemd-timesyncd**ï¼š
```
systemd-timesyncdæ˜¯systemdç³»ç»Ÿè‡ªå¸¦çš„è½»é‡çº§NTPå®¢æˆ·ç«¯
ä¸“é—¨è´Ÿè´£ç³»ç»Ÿæ—¶é—´åŒæ­¥ä»»åŠ¡

ç‰¹ç‚¹ï¼š
âœ… èµ„æºå ç”¨å°ï¼Œå¯åŠ¨å¿«é€Ÿ
âœ… ä¸systemdæ·±åº¦é›†æˆ
âœ… é…ç½®ç®€å•ï¼Œè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜
âœ… é€‚åˆå¤§å¤šæ•°æ¡Œé¢å’ŒæœåŠ¡å™¨ç¯å¢ƒ
```

### 7.2 æœåŠ¡çŠ¶æ€ç®¡ç†


**æŸ¥çœ‹æœåŠ¡çŠ¶æ€**ï¼š
```bash
systemctl status systemd-timesyncd
```

**æœåŠ¡çŠ¶æ€è¾“å‡ºè§£è¯»**ï¼š
```
â— systemd-timesyncd.service - Network Time Synchronization
   Loaded: loaded (/usr/lib/systemd/system/systemd-timesyncd.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2025-01-15 10:00:00 CST; 2h 30min ago
     Docs: man:systemd-timesyncd.service(8)
 Main PID: 1234 (systemd-timesyn)
   Status: "Synchronized to time server 203.107.6.88:123 (ntp.aliyun.com)."
   CGroup: /system.slice/systemd-timesyncd.service
           â””â”€1234 /usr/lib/systemd/systemd-timesyncd

å…³é”®ä¿¡æ¯è§£è¯»ï¼š
Active: active (running) â†’ æœåŠ¡æ­£åœ¨è¿è¡Œ
Statusæ˜¾ç¤ºå½“å‰åŒæ­¥çš„æ—¶é—´æœåŠ¡å™¨
```

### 7.3 é…ç½®æ–‡ä»¶ç®¡ç†


**ä¸»é…ç½®æ–‡ä»¶ä½ç½®**ï¼š
```
/etc/systemd/timesyncd.conf
```

**åŸºæœ¬é…ç½®ç¤ºä¾‹**ï¼š
```ini
[Time]
# ä¸»è¦NTPæœåŠ¡å™¨
NTP=ntp.aliyun.com 203.107.6.88
# å¤‡ç”¨NTPæœåŠ¡å™¨  
FallbackNTP=pool.ntp.org
# æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆç”¨äºè·å–NTPæœåŠ¡å™¨ï¼‰
RootDistanceMaxSec=5
# è½®è¯¢é—´éš”
PollIntervalMinSec=32
PollIntervalMaxSec=2048
```

**å¸¸ç”¨NTPæœåŠ¡å™¨**ï¼š
```
ä¸­å›½åœ°åŒºï¼š
ntp.aliyun.com      â†’ é˜¿é‡Œäº‘NTPæœåŠ¡
ntp.tencent.com     â†’ è…¾è®¯NTPæœåŠ¡  
cn.pool.ntp.org     â†’ ä¸­å›½NTPæœåŠ¡å™¨æ± 

å›½é™…é€šç”¨ï¼š
pool.ntp.org        â†’ å…¨çƒNTPæœåŠ¡å™¨æ± 
time.nist.gov       â†’ ç¾å›½å›½å®¶æ ‡å‡†æŠ€æœ¯ç ”ç©¶æ‰€
time.google.com     â†’ è°·æ­Œæ—¶é—´æœåŠ¡å™¨
```

### 7.4 æœåŠ¡æ“ä½œå‘½ä»¤


**é‡å¯æ—¶é—´åŒæ­¥æœåŠ¡**ï¼š
```bash
systemctl restart systemd-timesyncd
```

**å¯ç”¨å¼€æœºè‡ªå¯**ï¼š
```bash
systemctl enable systemd-timesyncd
```

**æŸ¥çœ‹åŒæ­¥è¯¦ç»†ä¿¡æ¯**ï¼š
```bash
timedatectl timesync-status
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
       Server: 203.107.6.88 (ntp.aliyun.com)
Poll interval: 34min 8s (min: 32s; max: 34min 8s)
         Leap: normal
      Version: 4
      Stratum: 2
    Reference: C342F10A
    Precision: 1us (-20)
Root distance: 37.750ms (max: 5s)
       Offset: -0.123ms
        Delay: 2.345ms
       Jitter: 0.456ms
 Packet count: 8
    Frequency: -15.123ppm

é‡è¦å‚æ•°è¯´æ˜ï¼š
Server â†’ å½“å‰åŒæ­¥çš„æ—¶é—´æœåŠ¡å™¨
Stratum â†’ æ—¶é—´æœåŠ¡å™¨å±‚çº§ï¼ˆæ•°å€¼è¶Šå°ç²¾åº¦è¶Šé«˜ï¼‰
Offset â†’ æœ¬åœ°æ—¶é—´ä¸æœåŠ¡å™¨æ—¶é—´çš„å·®å€¼
Delay â†’ ç½‘ç»œå»¶è¿Ÿ
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ timedatectlæœ¬è´¨ï¼šsystemdç³»ç»Ÿçš„ç»Ÿä¸€æ—¶é—´ç®¡ç†å·¥å…·
ğŸ”¸ æ—¶é—´ç±»å‹åŒºåˆ†ï¼šç³»ç»Ÿæ—¶é’Ÿã€ç¡¬ä»¶æ—¶é’Ÿã€æœ¬åœ°æ—¶é—´ã€UTCæ—¶é—´
ğŸ”¸ NTPåŒæ­¥æœºåˆ¶ï¼šç½‘ç»œæ—¶é—´åè®®è‡ªåŠ¨ä¿æŒæ—¶é—´å‡†ç¡®æ€§
ğŸ”¸ æ—¶åŒºç®¡ç†ï¼šæ”¯æŒå…¨çƒæ—¶åŒºè®¾ç½®å’Œè‡ªåŠ¨æ—¶é—´è°ƒæ•´
ğŸ”¸ æœåŠ¡é›†æˆï¼šä¸systemd-timesyncdæœåŠ¡ç´§å¯†é…åˆ
```

### 8.2 å…³é”®å‘½ä»¤é€ŸæŸ¥


| åŠŸèƒ½åˆ†ç±» | **å‘½ä»¤** | **ä½œç”¨è¯´æ˜** |
|---------|---------|-------------|
| ğŸ• **çŠ¶æ€æŸ¥çœ‹** | `timedatectl status` | `æŸ¥çœ‹å®Œæ•´æ—¶é—´çŠ¶æ€` |
| â° **æ—¶é—´è®¾ç½®** | `timedatectl set-time "æ—¶é—´"` | `æ‰‹åŠ¨è®¾ç½®ç³»ç»Ÿæ—¶é—´` |
| ğŸŒ **æ—¶åŒºç®¡ç†** | `timedatectl set-timezone æ—¶åŒº` | `è®¾ç½®ç³»ç»Ÿæ—¶åŒº` |
| ğŸ“‹ **æ—¶åŒºåˆ—è¡¨** | `timedatectl list-timezones` | `æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æ—¶åŒº` |
| ğŸŒ **NTPæ§åˆ¶** | `timedatectl set-ntp true/false` | `å¯ç”¨/ç¦ç”¨NTPåŒæ­¥` |
| âš™ï¸ **ç¡¬ä»¶æ—¶é’Ÿ** | `timedatectl set-local-rtc true/false` | `è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿæ¨¡å¼` |

### 8.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ”¹ ç³»ç»Ÿç®¡ç†å‘˜æ—¥å¸¸ä»»åŠ¡**ï¼š
```
æœåŠ¡å™¨æ—¶é—´æ ¡å‡†ï¼š
1. æ£€æŸ¥æ—¶é—´çŠ¶æ€ â†’ timedatectl status
2. è®¾ç½®æ­£ç¡®æ—¶åŒº â†’ timedatectl set-timezone Asia/Shanghai  
3. å¯ç”¨NTPåŒæ­¥ â†’ timedatectl set-ntp true
4. éªŒè¯åŒæ­¥æ•ˆæœ â†’ timedatectl timesync-status
```

**ğŸ”¹ æ•…éšœæ’æŸ¥æµç¨‹**ï¼š
```
æ—¶é—´ä¸å‡†ç¡®é—®é¢˜ï¼š
1. æŸ¥çœ‹NTPçŠ¶æ€æ˜¯å¦æ­£å¸¸
2. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. éªŒè¯æ—¶åŒºè®¾ç½®æ˜¯å¦æ­£ç¡®
4. é‡å¯æ—¶é—´åŒæ­¥æœåŠ¡
```

**ğŸ”¹ åŒç³»ç»Ÿå…¼å®¹é…ç½®**ï¼š
```
Linux/WindowsåŒç³»ç»Ÿï¼š
1. ç¡®å®šä½¿ç”¨UTCè¿˜æ˜¯æœ¬åœ°æ—¶é—´æ¨¡å¼
2. ç›¸åº”è°ƒæ•´ç¡¬ä»¶æ—¶é’Ÿè®¾ç½®
3. ç¡®ä¿ä¸¤ä¸ªç³»ç»Ÿæ—¶é—´æ˜¾ç¤ºä¸€è‡´
```

### 8.4 æœ€ä½³å®è·µå»ºè®®


```
ğŸ”¸ ç”Ÿäº§ç¯å¢ƒï¼šå§‹ç»ˆå¯ç”¨NTPåŒæ­¥ï¼Œç¡®ä¿æ—¶é—´å‡†ç¡®æ€§
ğŸ”¸ æ—¶åŒºè®¾ç½®ï¼šä½¿ç”¨æ ‡å‡†æ—¶åŒºåç§°ï¼Œé¿å…ä½¿ç”¨ç¼©å†™
ğŸ”¸ ç¡¬ä»¶æ—¶é’Ÿï¼šæ¨èä½¿ç”¨UTCæ¨¡å¼ï¼Œé™¤éæœ‰ç‰¹æ®Šå…¼å®¹æ€§éœ€æ±‚
ğŸ”¸ ç›‘æ§æ£€æŸ¥ï¼šå®šæœŸæ£€æŸ¥æ—¶é—´åŒæ­¥çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
ğŸ”¸ é…ç½®å¤‡ä»½ï¼šè®°å½•æ—¶åŒºå’ŒNTPæœåŠ¡å™¨é…ç½®ï¼Œä¾¿äºæ¢å¤
```

### 8.5 å¸¸è§é—®é¢˜å¤„ç†


**ğŸ”¹ æ—¶é—´åŒæ­¥å¤±è´¥**ï¼š
```
æ’æŸ¥æ­¥éª¤ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼šping ntp.aliyun.com
2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼šsystemctl status systemd-timesyncd
3. æ£€æŸ¥é˜²ç«å¢™ï¼šç¡®ä¿123ç«¯å£å¼€æ”¾
4. æ›´æ¢NTPæœåŠ¡å™¨ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶
```

**ğŸ”¹ æ‰‹åŠ¨è®¾ç½®æ—¶é—´å¤±è´¥**ï¼š
```
è§£å†³æ–¹æ³•ï¼š
1. å…ˆç¦ç”¨NTPï¼štimedatectl set-ntp false
2. è®¾ç½®æ—¶é—´ï¼štimedatectl set-time "æ—¶é—´"
3. æ ¹æ®éœ€è¦é‡æ–°å¯ç”¨NTP
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- timedatectlæ˜¯systemdæ—¶é—´ç®¡ç†çš„ç‘å£«å†›åˆ€
- çŠ¶æ€æŸ¥çœ‹å…ˆè¡Œï¼Œäº†è§£å½“å‰é…ç½®å†æ“ä½œ
- NTPåŒæ­¥ä¸æ‰‹åŠ¨è®¾ç½®ä¸èƒ½åŒæ—¶è¿›è¡Œ
- æ—¶åŒºè®¾ç½®å½±å“æ˜¾ç¤ºæ—¶é—´ï¼ŒUTCæ—¶é—´ä¿æŒä¸å˜