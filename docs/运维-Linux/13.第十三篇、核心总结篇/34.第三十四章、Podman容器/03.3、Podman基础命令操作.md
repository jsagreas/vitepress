---
title: 3、Podman基础命令操作
---
## 📚 目录

1. [Podman基础概念](#1-Podman基础概念)
2. [容器运行命令](#2-容器运行命令)
3. [容器状态管理](#3-容器状态管理)
4. [镜像管理操作](#4-镜像管理操作)
5. [容器交互与监控](#5-容器交互与监控)
6. [实用操作技巧](#6-实用操作技巧)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🐳 Podman基础概念


### 1.1 什么是Podman


**🔸 Podman简单理解**
```
Podman = Pod Manager
作用：管理容器的工具，类似Docker但更安全
特点：无需root权限，没有守护进程，更适合生产环境
```

> 💡 **通俗理解**：Podman就像一个"容器管家"，帮你启动、停止、管理各种应用容器，但比Docker更安全，普通用户就能使用

### 1.2 Podman vs Docker对比


| 特性对比 | **Podman** | **Docker** | **说明** |
|---------|------------|------------|----------|
| 🔒 **安全性** | `无需root权限` | `需要root权限` | `Podman更安全，减少权限风险` |
| ⚙️ **架构** | `无守护进程` | `有Docker daemon` | `Podman直接运行，Docker需要后台服务` |
| 🔧 **兼容性** | `兼容Docker命令` | `Docker标准` | `Podman可以直接替换Docker使用` |
| 📦 **Pod支持** | `原生支持Pod` | `不支持Pod概念` | `Podman可以管理多容器组合` |

### 1.3 基本工作流程


```
用户操作流程：
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  拉取镜像   │───▶│  运行容器   │───▶│  管理容器   │
│podman pull  │    │podman run   │    │start/stop   │
└─────────────┘    └─────────────┘    └─────────────┘
        │                   │                   │
        ▼                   ▼                   ▼
   从仓库获取          创建并启动           日常维护操作
```

---

## 2. 🚀 容器运行命令


### 2.1 podman run - 运行容器


**🔸 基本语法**
```bash
podman run [选项] 镜像名 [命令]
```

**📝 最简单的例子**
```bash
# 运行一个hello-world容器
podman run hello-world

# 运行并进入容器内部
podman run -it centos /bin/bash
```

> 🧠 **理解要点**：`-it`参数是什么意思？
> - `-i`：交互式，保持输入流开启
> - `-t`：分配一个终端，让你能看到输出
> - 合起来就是"我要和容器对话"

### 2.2 常用运行参数详解


**🔧 端口映射**
```bash
# 将容器80端口映射到主机8080端口
podman run -p 8080:80 nginx

# 多端口映射
podman run -p 8080:80 -p 3306:3306 webapp
```

**💾 数据卷挂载**
```bash
# 挂载主机目录到容器
podman run -v /host/data:/container/data centos

# 挂载当前目录
podman run -v $(pwd):/workspace myapp
```

**🏷️ 容器命名**
```bash
# 给容器起个好记的名字
podman run --name my-web-server nginx

# 后台运行
podman run -d --name my-database mysql
```

### 2.3 运行模式对比


```
前台运行 vs 后台运行：

前台模式：
podman run nginx
特点：占用终端，Ctrl+C就停止，适合测试

后台模式：
podman run -d nginx  
特点：在后台静默运行，适合服务部署
```

---

## 3. 📋 容器状态管理


### 3.1 podman ps - 查看容器列表


**🔸 查看运行中的容器**
```bash
# 只看正在运行的
podman ps

# 看所有容器（包括停止的）
podman ps -a

# 只显示容器ID
podman ps -q
```

**📊 输出内容解读**
```
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
12345abcde    nginx       nginx -g    2 min ago   Up 2 min    80/tcp      my-web
│             │           │           │           │           │           │
容器ID       镜像名      启动命令    创建时间    运行状态    端口信息    容器名称
```

> 💡 **实用技巧**：`podman ps`就像查看"进程管理器"，告诉你哪些容器在运行，哪些已经停止

### 3.2 容器生命周期控制


**🎮 启动和停止容器**
```bash
# 启动已停止的容器
podman start 容器名或ID

# 停止运行中的容器
podman stop 容器名或ID

# 重启容器
podman restart 容器名或ID

# 强制杀死容器
podman kill 容器名或ID
```

**⏱️ 批量操作**
```bash
# 启动所有停止的容器
podman start $(podman ps -aq)

# 停止所有运行的容器
podman stop $(podman ps -q)
```

### 3.3 容器状态说明


| 状态 | **含义** | **对应操作** |
|------|----------|------------|
| 🟢 **Up** | `正在运行` | `可以stop停止` |
| 🔴 **Exited** | `已经退出` | `可以start启动` |
| 🟡 **Created** | `已创建未启动` | `可以start启动` |
| ⚫ **Dead** | `进程死亡` | `需要rm删除` |

---

## 4. 🖼️ 镜像管理操作


### 4.1 podman images - 查看镜像列表


**🔸 基本查看**
```bash
# 列出所有本地镜像
podman images

# 只显示镜像ID
podman images -q

# 显示镜像详细信息
podman images --format "table {{.Repository}}\t{{.Tag}}\t{{.Size}}"
```

**📊 镜像信息解读**
```
REPOSITORY      TAG        IMAGE ID      CREATED       SIZE
nginx           latest     1234567890    2 days ago    133MB
│               │          │             │             │
镜像仓库        标签       镜像ID       创建时间      大小
```

### 4.2 podman pull - 拉取镜像


**🔽 从仓库下载镜像**
```bash
# 拉取最新版本
podman pull nginx

# 拉取指定版本
podman pull nginx:1.20

# 从指定仓库拉取
podman pull docker.io/library/nginx
```

> 🧠 **理解要点**：pull就像"下载软件安装包"，把应用程序的模板下载到本地，然后用run命令"安装运行"

### 4.3 podman push - 推送镜像


**🔼 上传镜像到仓库**
```bash
# 推送到默认仓库
podman push my-app:latest

# 推送到指定仓库
podman push registry.example.com/my-app:v1.0
```

**📝 推送前的准备工作**
```bash
# 1. 给镜像打标签
podman tag local-image:latest registry.com/my-image:v1.0

# 2. 登录到镜像仓库
podman login registry.com

# 3. 推送镜像
podman push registry.com/my-image:v1.0
```

### 4.4 镜像清理操作


**🧹 清理无用镜像**
```bash
# 删除单个镜像
podman rmi nginx:latest

# 删除多个镜像
podman rmi nginx mysql redis

# 清理悬空镜像（没有标签的）
podman image prune

# 强制删除所有镜像
podman rmi -f $(podman images -q)
```

---

## 5. 🔍 容器交互与监控


### 5.1 podman exec - 进入容器执行命令


**🔸 最常用的操作**
```bash
# 进入正在运行的容器
podman exec -it 容器名 /bin/bash

# 在容器内执行单个命令
podman exec 容器名 ls /var/log

# 以指定用户身份执行
podman exec -u root -it 容器名 /bin/bash
```

> 💡 **生活类比**：exec就像"敲门进入别人家里"，容器正在运行时，你可以进去看看里面的情况，执行一些操作

**🛠️ 实用场景**
```bash
# 查看容器内进程
podman exec 容器名 ps aux

# 查看容器内网络配置
podman exec 容器名 ip addr

# 修改容器内配置文件
podman exec -it 容器名 vi /etc/nginx/nginx.conf
```

### 5.2 podman logs - 查看容器日志


**📝 日志查看方式**
```bash
# 查看所有日志
podman logs 容器名

# 查看最近100行日志
podman logs --tail 100 容器名

# 实时跟踪日志（类似tail -f）
podman logs -f 容器名

# 显示时间戳
podman logs -t 容器名
```

**🔍 日志筛选技巧**
```bash
# 查看最近10分钟的日志
podman logs --since 10m 容器名

# 查看指定时间段的日志
podman logs --since "2025-01-01T00:00:00" --until "2025-01-01T23:59:59" 容器名
```

### 5.3 容器信息查看


**📊 详细信息获取**
```bash
# 查看容器详细信息
podman inspect 容器名

# 查看容器统计信息
podman stats 容器名

# 查看容器端口映射
podman port 容器名
```

---

## 6. ⚡ 实用操作技巧


### 6.1 常用组合命令


**🔧 快速操作脚本**
```bash
# 停止并删除容器
podman stop 容器名 && podman rm 容器名

# 删除所有停止的容器
podman container prune

# 一键清理：停止所有容器并删除
podman stop $(podman ps -q) && podman rm $(podman ps -aq)
```

### 6.2 别名设置提升效率


**⚡ 在~/.bashrc中添加常用别名**
```bash
alias pps='podman ps'
alias ppa='podman ps -a'
alias pi='podman images'
alias prm='podman rm'
alias prmi='podman rmi'
alias prun='podman run -it --rm'
```

> 🚀 **效率提升**：设置别名后，`pps`就相当于`podman ps`，大大减少输入时间

### 6.3 容器健康检查


**🏥 检查容器运行状态**
```bash
# 检查容器是否正常运行
podman healthcheck run 容器名

# 查看容器资源使用情况
podman stats --no-stream 容器名
```

### 6.4 镜像标签管理


**🏷️ 镜像版本控制**
```bash
# 给镜像打多个标签
podman tag nginx:latest my-nginx:v1.0
podman tag nginx:latest my-nginx:stable

# 查看同一镜像的不同标签
podman images | grep my-nginx
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的基本命令


```
🔸 容器生命周期：run → ps → start/stop → rm
🔸 镜像管理：pull → images → run → push  
🔸 容器交互：exec进入容器，logs查看日志
🔸 状态监控：ps查看列表，stats查看资源使用
🔸 清理操作：rm删容器，rmi删镜像，prune清理
```

### 7.2 关键理解要点


**🔹 容器 vs 镜像的关系**
```
镜像：就像"程序安装包"，是静态的模板
容器：就像"运行的程序"，是动态的实例

关系：一个镜像可以创建多个容器
比如：nginx镜像 → 可以运行多个nginx容器
```

**🔹 前台 vs 后台运行**
```
前台运行：
- 命令：podman run -it 镜像名
- 特点：占用终端，适合调试测试
- 场景：临时测试、交互式操作

后台运行：
- 命令：podman run -d 镜像名  
- 特点：后台静默，适合服务部署
- 场景：Web服务、数据库服务
```

**🔹 容器数据持久化**
```
问题：容器删除后数据丢失
解决：使用-v参数挂载主机目录

示例：podman run -v /host/data:/container/data mysql
结果：容器内/container/data目录的数据保存在主机/host/data中
```

### 7.3 实际应用场景


**🎯 Web应用部署**
```bash
# 1. 拉取镜像
podman pull nginx

# 2. 后台运行并映射端口
podman run -d --name web-server -p 8080:80 nginx

# 3. 检查运行状态
podman ps

# 4. 查看访问日志
podman logs web-server
```

**🎯 开发环境搭建**
```bash
# 1. 运行数据库
podman run -d --name dev-db -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql

# 2. 运行Redis缓存
podman run -d --name dev-redis -p 6379:6379 redis

# 3. 运行Web应用
podman run -d --name dev-app -p 8000:8000 my-web-app
```

**🎯 故障排查**
```bash
# 1. 查看容器状态
podman ps -a

# 2. 查看错误日志
podman logs 容器名

# 3. 进入容器检查
podman exec -it 容器名 /bin/bash

# 4. 检查容器配置
podman inspect 容器名
```

### 7.4 最佳实践建议


**✅ 推荐做法**
- 给容器起有意义的名字（`--name`）
- 服务类应用使用后台运行（`-d`）
- 重要数据使用卷挂载（`-v`）
- 定期清理无用镜像和容器（`prune`）

**❌ 避免错误**  
- 不要在生产环境使用`latest`标签
- 不要忽略容器日志的查看
- 不要在容器内存储重要数据（无持久化）
- 不要忘记端口映射（服务无法访问）

### 7.5 命令速查表


| 操作类型 | **命令** | **说明** |
|---------|----------|----------|
| 🚀 **运行** | `podman run -it 镜像名` | `交互式运行容器` |
| 📋 **查看** | `podman ps -a` | `查看所有容器状态` |
| 🎮 **控制** | `podman start/stop 容器名` | `启动/停止容器` |
| 🖼️ **镜像** | `podman pull/push 镜像名` | `拉取/推送镜像` |
| 🔍 **交互** | `podman exec -it 容器名 bash` | `进入容器执行命令` |
| 📝 **日志** | `podman logs -f 容器名` | `实时查看容器日志` |
| 🧹 **清理** | `podman container prune` | `清理停止的容器` |

**🔑 一句话总结**：
Podman是安全易用的容器管理工具，掌握run、ps、exec、logs四个核心命令，就能完成90%的日常操作！

**📌 记忆口诀**：
```
拉取镜像pull下载，run命令把容器建
ps命令查状态，exec进入做修改  
logs日志来排错，start-stop管生死
images看本地，清理记得prune
```