---
title: 12ã€æ—¥å¿—åˆ†æå·¥å…·ä¸æŠ€å·§
---
## ğŸ“š ç›®å½•

1. [æ—¥å¿—åˆ†æåŸºç¡€æ¦‚å¿µ](#1-æ—¥å¿—åˆ†æåŸºç¡€æ¦‚å¿µ)
2. [grepæ—¥å¿—æœç´¢ç¥å™¨](#2-grepæ—¥å¿—æœç´¢ç¥å™¨)
3. [awkæ–‡æœ¬å¤„ç†åˆ©å™¨](#3-awkæ–‡æœ¬å¤„ç†åˆ©å™¨)
4. [sedæµç¼–è¾‘å™¨åº”ç”¨](#4-sedæµç¼–è¾‘å™¨åº”ç”¨)
5. [æ­£åˆ™è¡¨è¾¾å¼æ—¥å¿—åŒ¹é…](#5-æ­£åˆ™è¡¨è¾¾å¼æ—¥å¿—åŒ¹é…)
6. [æ—¥å¿—æ—¶é—´æˆ³å¤„ç†æŠ€å·§](#6-æ—¥å¿—æ—¶é—´æˆ³å¤„ç†æŠ€å·§)
7. [ç»Ÿè®¡åˆ†æå‘½ä»¤ç»„åˆ](#7-ç»Ÿè®¡åˆ†æå‘½ä»¤ç»„åˆ)
8. [è‡ªåŠ¨åŒ–åˆ†æè„šæœ¬](#8-è‡ªåŠ¨åŒ–åˆ†æè„šæœ¬)
9. [æ—¥å¿—å¯è§†åŒ–åŸºç¡€](#9-æ—¥å¿—å¯è§†åŒ–åŸºç¡€)
10. [å¼€æºæ—¥å¿—åˆ†æå·¥å…·](#10-å¼€æºæ—¥å¿—åˆ†æå·¥å…·)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“Š æ—¥å¿—åˆ†æåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ—¥å¿—åˆ†æ


**æ—¥å¿—åˆ†æ**å°±æ˜¯ä»ç³»ç»Ÿäº§ç”Ÿçš„å„ç§æ—¥å¿—æ–‡ä»¶ä¸­æå–æœ‰ç”¨ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œå°±åƒåŒ»ç”Ÿé€šè¿‡åŒ–éªŒæŠ¥å‘Šæ¥è¯Šæ–­ç—…æƒ…ä¸€æ ·ã€‚

**ğŸ¯ æ ¸å¿ƒç›®çš„**ï¼š
- **æ•…éšœæ’æŸ¥**ï¼šæ‰¾å‡ºç³»ç»Ÿé—®é¢˜çš„æ ¹æº
- **æ€§èƒ½ç›‘æ§**ï¼šäº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- **å®‰å…¨å®¡è®¡**ï¼šå‘ç°å¼‚å¸¸è®¿é—®å’Œæ”»å‡»
- **è¶‹åŠ¿åˆ†æ**ï¼šé¢„æµ‹ç³»ç»Ÿå‘å±•è¶‹åŠ¿

### 1.2 Linuxå¸¸è§æ—¥å¿—ç±»å‹


| æ—¥å¿—ç±»å‹ | **æ–‡ä»¶ä½ç½®** | **ä¸»è¦å†…å®¹** | **ç”¨é€”** |
|---------|-------------|-------------|---------|
| ğŸ“‹ **ç³»ç»Ÿæ—¥å¿—** | `/var/log/messages` | `ç³»ç»Ÿæ ¸å¿ƒä¿¡æ¯` | `ç³»ç»Ÿæ•…éšœè¯Šæ–­` |
| ğŸ” **å®‰å…¨æ—¥å¿—** | `/var/log/secure` | `ç™»å½•è®¤è¯è®°å½•` | `å®‰å…¨å®¡è®¡` |
| ğŸŒ **Webæ—¥å¿—** | `/var/log/httpd/access_log` | `HTTPè®¿é—®è®°å½•` | `ç½‘ç«™åˆ†æ` |
| âš ï¸ **é”™è¯¯æ—¥å¿—** | `/var/log/httpd/error_log` | `WebæœåŠ¡å™¨é”™è¯¯` | `æ•…éšœæ’æŸ¥` |
| ğŸ“¬ **é‚®ä»¶æ—¥å¿—** | `/var/log/maillog` | `é‚®ä»¶å‘é€è®°å½•` | `é‚®ä»¶ç³»ç»Ÿç›‘æ§` |

### 1.3 æ—¥å¿—åˆ†æçš„åŸºæœ¬æ€è·¯


```
æ—¥å¿—åˆ†ææµç¨‹ï¼š
åŸå§‹æ—¥å¿— â†’ è¿‡æ»¤ç­›é€‰ â†’ æ¨¡å¼åŒ¹é… â†’ ç»Ÿè®¡æ±‡æ€» â†’ ç»“æœå±•ç¤º

å…·ä½“æ­¥éª¤ï¼š
1ï¸âƒ£ ç¡®å®šåˆ†æç›®æ ‡ï¼ˆè¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼‰
2ï¸âƒ£ é€‰æ‹©ç›¸å…³æ—¥å¿—æ–‡ä»¶
3ï¸âƒ£ ä½¿ç”¨å·¥å…·æå–å…³é”®ä¿¡æ¯
4ï¸âƒ£ å¯¹ç»“æœè¿›è¡Œç»Ÿè®¡å’Œåˆ†æ
5ï¸âƒ£ ç”ŸæˆæŠ¥å‘Šæˆ–å¯è§†åŒ–å±•ç¤º
```

---

## 2. ğŸ” grepæ—¥å¿—æœç´¢ç¥å™¨


### 2.1 grepåŸºæœ¬æ¦‚å¿µ


**grep**ï¼ˆGlobal Regular Expression Printï¼‰æ˜¯Linuxä¸­æœ€å¸¸ç”¨çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå°±åƒåœ¨æµ·é‡æ–‡æ¡£ä¸­ç”¨"æŸ¥æ‰¾"åŠŸèƒ½æœç´¢å…³é”®è¯ä¸€æ ·ã€‚

**ğŸ’¡ æ ¸å¿ƒä½œç”¨**ï¼š
- åœ¨æ–‡ä»¶ä¸­æœç´¢åŒ¹é…æŒ‡å®šæ¨¡å¼çš„è¡Œ
- æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
- å¯ä»¥åŒæ—¶æœç´¢å¤šä¸ªæ–‡ä»¶

### 2.2 grepåŸºæœ¬è¯­æ³•ä¸é€‰é¡¹


**åŸºæœ¬è¯­æ³•**ï¼š`grep [é€‰é¡¹] "æœç´¢æ¨¡å¼" æ–‡ä»¶å`

**ğŸ”§ å¸¸ç”¨é€‰é¡¹**ï¼š

| é€‰é¡¹ | **å«ä¹‰** | **ç”¨é€”** |
|------|---------|---------|
| `-i` | `å¿½ç•¥å¤§å°å†™` | `æœç´¢æ—¶ä¸åŒºåˆ†å¤§å°å†™` |
| `-v` | `åå‘åŒ¹é…` | `æ˜¾ç¤ºä¸åŒ…å«æ¨¡å¼çš„è¡Œ` |
| `-n` | `æ˜¾ç¤ºè¡Œå·` | `åœ¨ç»“æœä¸­æ˜¾ç¤ºè¡Œå·` |
| `-A` | `æ˜¾ç¤ºåå‡ è¡Œ` | `æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶åå‡ è¡Œ` |
| `-B` | `æ˜¾ç¤ºå‰å‡ è¡Œ` | `æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶å‰å‡ è¡Œ` |
| `-C` | `æ˜¾ç¤ºå‰åå‡ è¡Œ` | `æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶å‰åå‡ è¡Œ` |

### 2.3 grepå®ç”¨æ—¥å¿—åˆ†æç¤ºä¾‹


**ğŸ” æœç´¢é”™è¯¯ä¿¡æ¯**ï¼š
```bash
# æœç´¢ç³»ç»Ÿæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
grep -i error /var/log/messages

# æœç´¢Webè®¿é—®æ—¥å¿—ä¸­çš„404é”™è¯¯
grep " 404 " /var/log/httpd/access_log
```

**ğŸ“Š æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µæ—¥å¿—**ï¼š
```bash
# æŸ¥çœ‹12æœˆ15æ—¥çš„æ—¥å¿—
grep "Dec 15" /var/log/messages

# æŸ¥çœ‹æŸä¸ªIPçš„è®¿é—®è®°å½•
grep "192.168.1.100" /var/log/httpd/access_log
```

**ğŸ¯ é«˜çº§æœç´¢æŠ€å·§**ï¼š
```bash
# æœç´¢å¤šä¸ªå…³é”®è¯ï¼ˆä»»ä¸€åŒ¹é…ï¼‰
grep -E "error|warning|failed" /var/log/messages

# æœç´¢ä»¥rootå¼€å¤´çš„è¡Œ
grep "^root" /var/log/secure

# æ’é™¤æŸäº›ä¿¡æ¯
grep -v "INFO" /var/log/application.log
```

---

## 3. âš™ï¸ awkæ–‡æœ¬å¤„ç†åˆ©å™¨


### 3.1 awkåŸºæœ¬æ¦‚å¿µ


**awk**æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬å¤„ç†è¯­è¨€ï¼Œä¸“é—¨ç”¨äºå¤„ç†ç»“æ„åŒ–æ–‡æœ¬æ•°æ®ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆExcelçš„å‘½ä»¤è¡Œç‰ˆæœ¬ï¼Œèƒ½å¤Ÿå¯¹è¡¨æ ¼åŒ–æ•°æ®è¿›è¡Œå„ç§æ“ä½œã€‚

**ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- æŒ‰è¡Œå¤„ç†æ–‡æœ¬
- è‡ªåŠ¨å°†æ¯è¡Œåˆ†å‰²æˆå­—æ®µï¼ˆåˆ—ï¼‰
- æ”¯æŒå˜é‡ã€æ•°ç»„ã€å‡½æ•°ç­‰ç¼–ç¨‹å…ƒç´ 
- å†…ç½®å¼ºå¤§çš„æ–‡æœ¬å¤„ç†åŠŸèƒ½

### 3.2 awkåŸºæœ¬è¯­æ³•ç»“æ„


**è¯­æ³•æ ¼å¼**ï¼š`awk 'æ¨¡å¼{åŠ¨ä½œ}' æ–‡ä»¶å`

**ğŸ“‹ å†…ç½®å˜é‡**ï¼š
- `$0`ï¼šæ•´è¡Œå†…å®¹
- `$1, $2, $3...`ï¼šç¬¬1åˆ—ã€ç¬¬2åˆ—ã€ç¬¬3åˆ—
- `NF`ï¼šå½“å‰è¡Œçš„å­—æ®µæ•°é‡
- `NR`ï¼šå½“å‰è¡Œå·
- `FS`ï¼šå­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤æ˜¯ç©ºæ ¼ï¼‰

### 3.3 awkæ—¥å¿—åˆ†æå®ä¾‹


**ğŸ“Š ç»Ÿè®¡è®¿é—®æ—¥å¿—**ï¼š
```bash
# ç»Ÿè®¡æ¯ä¸ªIPçš„è®¿é—®æ¬¡æ•°
awk '{ip[$1]++} END{for(i in ip) print i, ip[i]}' /var/log/httpd/access_log

# ç»Ÿè®¡è®¿é—®çŠ¶æ€ç åˆ†å¸ƒ
awk '{status[$9]++} END{for(i in status) print i, status[i]}' access.log

# è®¡ç®—å¹³å‡å“åº”æ—¶é—´ï¼ˆå‡è®¾å“åº”æ—¶é—´åœ¨ç¬¬10åˆ—ï¼‰
awk '{sum+=$10; count++} END{print "å¹³å‡å“åº”æ—¶é—´:", sum/count, "ms"}' access.log
```

**ğŸ” æå–å…³é”®ä¿¡æ¯**ï¼š
```bash
# æå–è®¿é—®æ—¶é—´è¶…è¿‡1ç§’çš„è¯·æ±‚
awk '$10 > 1000 {print $1, $4, $7, $10}' access.log

# æ˜¾ç¤ºç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—
awk '$4 ~ /15\/Dec\/2024/ {print}' access.log

# ç»Ÿè®¡ä¸åŒURLçš„è®¿é—®æ¬¡æ•°
awk '{url[$7]++} END{for(i in url) print url[i], i}' access.log | sort -nr
```

---

## 4. âœ‚ï¸ sedæµç¼–è¾‘å™¨åº”ç”¨


### 4.1 sedåŸºæœ¬æ¦‚å¿µ


**sed**ï¼ˆStream Editorï¼‰æ˜¯ä¸€ä¸ªæµç¼–è¾‘å™¨ï¼Œä¸»è¦ç”¨äºå¯¹æ–‡æœ¬è¿›è¡Œç®€å•çš„ç¼–è¾‘æ“ä½œã€‚å°±åƒWordçš„"æŸ¥æ‰¾æ›¿æ¢"åŠŸèƒ½ï¼Œä½†æ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚

**ğŸ’¡ å·¥ä½œåŸç†**ï¼š
- é€è¡Œè¯»å–æ–‡æœ¬
- å¯¹æ¯è¡Œåº”ç”¨æŒ‡å®šçš„ç¼–è¾‘å‘½ä»¤
- è¾“å‡ºå¤„ç†ç»“æœ

### 4.2 sedå¸¸ç”¨å‘½ä»¤


**åŸºæœ¬è¯­æ³•**ï¼š`sed [é€‰é¡¹] 'å‘½ä»¤' æ–‡ä»¶å`

**ğŸ”§ æ ¸å¿ƒå‘½ä»¤**ï¼š

| å‘½ä»¤ | **åŠŸèƒ½** | **ç¤ºä¾‹** |
|------|---------|---------|
| `s` | `æ›¿æ¢` | `s/old/new/` |
| `d` | `åˆ é™¤` | `3d`ï¼ˆåˆ é™¤ç¬¬3è¡Œï¼‰ |
| `p` | `æ‰“å°` | `1,5p`ï¼ˆæ‰“å°1-5è¡Œï¼‰ |
| `a` | `è¿½åŠ ` | `a\æ–°å†…å®¹` |
| `i` | `æ’å…¥` | `i\æ–°å†…å®¹` |

### 4.3 sedæ—¥å¿—å¤„ç†å®ä¾‹


**ğŸ”„ æ–‡æœ¬æ›¿æ¢**ï¼š
```bash
# å°†æ—¥å¿—ä¸­çš„IPåœ°å€è„±æ•
sed 's/192\.168\.[0-9]\+\.[0-9]\+/XXX.XXX.XXX.XXX/g' access.log

# ç»Ÿä¸€æ—¶é—´æ ¼å¼
sed 's/\[([^]]*)\]/[\1]/g' access.log

# åˆ é™¤ç©ºè¡Œ
sed '/^$/d' /var/log/messages
```

**ğŸ“ æå–ç‰¹å®šå†…å®¹**ï¼š
```bash
# æå–åŒ…å«ERRORçš„è¡Œ
sed -n '/ERROR/p' application.log

# åˆ é™¤æ—¥å¿—æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯
sed '/DEBUG/d' application.log

# æå–æŸä¸ªæ—¶é—´æ®µçš„æ—¥å¿—
sed -n '/2024-12-15 08:00/,/2024-12-15 09:00/p' system.log
```

---

## 5. ğŸ¯ æ­£åˆ™è¡¨è¾¾å¼æ—¥å¿—åŒ¹é…


### 5.1 æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€


**æ­£åˆ™è¡¨è¾¾å¼**å°±åƒä¸€ä¸ªéå¸¸çµæ´»çš„"æœç´¢æ¨¡æ¿"ï¼Œå¯ä»¥åŒ¹é…ç¬¦åˆç‰¹å®šè§„å¾‹çš„æ–‡æœ¬å†…å®¹ã€‚

**ğŸ“‹ åŸºç¡€å…ƒå­—ç¬¦**ï¼š

| å…ƒå­—ç¬¦ | **å«ä¹‰** | **ç¤ºä¾‹** | **åŒ¹é…å†…å®¹** |
|-------|---------|---------|-------------|
| `.` | `ä»»æ„å­—ç¬¦` | `a.c` | `abc, adc, a1c` |
| `*` | `0æ¬¡æˆ–å¤šæ¬¡` | `ab*` | `a, ab, abb` |
| `+` | `1æ¬¡æˆ–å¤šæ¬¡` | `ab+` | `ab, abb, abbb` |
| `?` | `0æ¬¡æˆ–1æ¬¡` | `ab?` | `a, ab` |
| `^` | `è¡Œé¦–` | `^error` | `ä»¥errorå¼€å¤´çš„è¡Œ` |
| `$` | `è¡Œå°¾` | `end$` | `ä»¥endç»“å°¾çš„è¡Œ` |

### 5.2 å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼


**ğŸ” IPåœ°å€åŒ¹é…**ï¼š
```bash
# åŒ¹é…IPåœ°å€
grep -E "[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}" access.log

# æ›´ç²¾ç¡®çš„IPåŒ¹é…
grep -E "((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)" access.log
```

**ğŸ“… æ—¶é—´æ ¼å¼åŒ¹é…**ï¼š
```bash
# åŒ¹é…æ ‡å‡†æ—¶é—´æ ¼å¼ YYYY-MM-DD HH:MM:SS
grep -E "[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}" system.log

# åŒ¹é…Apacheæ—¥å¿—æ—¶é—´æ ¼å¼
grep -E "\[[0-9]{2}/[A-Za-z]{3}/[0-9]{4}:[0-9]{2}:[0-9]{2}:[0-9]{2}" access.log
```

### 5.3 å¤æ‚æ¨¡å¼åŒ¹é…å®ä¾‹


**ğŸ¯ HTTPçŠ¶æ€ç åˆ†æ**ï¼š
```bash
# åŒ¹é…4xxå’Œ5xxé”™è¯¯
grep -E " [45][0-9]{2} " access.log

# åŒ¹é…ç‰¹å®šçš„é”™è¯¯çŠ¶æ€ç 
grep -E " (404|500|502|503) " access.log
```

**ğŸ” å®‰å…¨äº‹ä»¶æ£€æµ‹**ï¼š
```bash
# æ£€æµ‹SQLæ³¨å…¥æ”»å‡»å°è¯•
grep -iE "(union|select|insert|drop|delete).*from" access.log

# æ£€æµ‹å¼‚å¸¸ç™»å½•å°è¯•
grep -E "Failed password.*from [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+" /var/log/secure
```

---

## 6. â° æ—¥å¿—æ—¶é—´æˆ³å¤„ç†æŠ€å·§


### 6.1 æ—¶é—´æˆ³æ ¼å¼è¯†åˆ«


Linuxæ—¥å¿—ä¸­å¸¸è§çš„æ—¶é—´æˆ³æ ¼å¼å„ä¸ç›¸åŒï¼ŒæŒæ¡è¿™äº›æ ¼å¼æ˜¯åˆ†æçš„åŸºç¡€ã€‚

**ğŸ“‹ å¸¸è§æ—¶é—´æˆ³æ ¼å¼**ï¼š

```
ç³»ç»Ÿæ—¥å¿—æ ¼å¼ï¼š
Dec 15 08:30:45 hostname kernel: ...

Apacheè®¿é—®æ—¥å¿—æ ¼å¼ï¼š
[15/Dec/2024:08:30:45 +0800]

åº”ç”¨ç¨‹åºæ ¼å¼ï¼š
2024-12-15 08:30:45,123 INFO ...

Nginxè®¿é—®æ—¥å¿—æ ¼å¼ï¼š
15/Dec/2024:08:30:45 +0800
```

### 6.2 æ—¶é—´èŒƒå›´è¿‡æ»¤æŠ€å·§


**ğŸ¯ æŒ‰æ—¥æœŸç­›é€‰**ï¼š
```bash
# æå–ç‰¹å®šæ—¥æœŸçš„æ—¥å¿—
awk '/Dec 15/ {print}' /var/log/messages

# æå–æ—¶é—´èŒƒå›´ï¼ˆä½¿ç”¨sedï¼‰
sed -n '/2024-12-15 08:00/,/2024-12-15 09:00/p' application.log

# æå–æœ€è¿‘1å°æ—¶çš„æ—¥å¿—
awk -v start_time="$(date -d '1 hour ago' '+%b %d %H:')" '$0 >= start_time' /var/log/messages
```

**ğŸ“Š æ—¶é—´ç»Ÿè®¡åˆ†æ**ï¼š
```bash
# æŒ‰å°æ—¶ç»Ÿè®¡è®¿é—®é‡
awk -F'[: ]' '{hour=$4":"$5; count[hour]++} END{for(i in count) print i, count[i]}' access.log

# ç»Ÿè®¡æ¯å¤©çš„è®¿é—®é‡
awk '{gsub(/\[|:.*/, "", $4); day[$4]++} END{for(i in day) print i, day[i]}' access.log
```

### 6.3 æ—¶é—´æˆ³è½¬æ¢ä¸è®¡ç®—


**ğŸ”„ æ—¶é—´æ ¼å¼è½¬æ¢**ï¼š
```bash
# å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå¯è¯»æ ¼å¼
awk '{print strftime("%Y-%m-%d %H:%M:%S", $1), $0}' timestamp.log

# è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´çš„æ—¥å¿—
awk 'BEGIN{start=systime()-3600} $1 >= start {print}' timestamp.log
```

---

## 7. ğŸ“ˆ ç»Ÿè®¡åˆ†æå‘½ä»¤ç»„åˆ


### 7.1 ç®¡é“ç»„åˆçš„å¨åŠ›


Linuxçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥å°†å¤šä¸ªç®€å•å‘½ä»¤ç»„åˆèµ·æ¥å®Œæˆå¤æ‚çš„åˆ†æä»»åŠ¡ï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·ã€‚

**ğŸ’¡ å¸¸ç”¨ç»„åˆæ¨¡å¼**ï¼š
```
æ•°æ®è·å– | è¿‡æ»¤ | å¤„ç† | ç»Ÿè®¡ | æ’åº | å±•ç¤º
grep â†’ awk â†’ sed â†’ sort â†’ uniq â†’ head/tail
```

### 7.2 è®¿é—®æ—¥å¿—ç»Ÿè®¡å®ä¾‹


**ğŸ” çƒ­é—¨é¡µé¢åˆ†æ**ï¼š
```bash
# ç»Ÿè®¡è®¿é—®æœ€å¤šçš„é¡µé¢
awk '{print $7}' access.log | sort | uniq -c | sort -nr | head -10

# ç»Ÿè®¡è®¿é—®æœ€å¤šçš„IP
awk '{print $1}' access.log | sort | uniq -c | sort -nr | head -20
```

**ğŸ“Š çŠ¶æ€ç åˆ†å¸ƒç»Ÿè®¡**ï¼š
```bash
# ç»Ÿè®¡HTTPçŠ¶æ€ç åˆ†å¸ƒ
awk '{status[$9]++} END{for(i in status) printf "%-10s %d\n", i, status[i]}' access.log | sort -k2 -nr

# è®¡ç®—é”™è¯¯ç‡
awk '{total++; if($9>=400) errors++} END{printf "æ€»è¯·æ±‚: %d, é”™è¯¯: %d, é”™è¯¯ç‡: %.2f%%\n", total, errors, errors/total*100}' access.log
```

### 7.3 é«˜çº§ç»Ÿè®¡æŠ€å·§


**â±ï¸ æŒ‰æ—¶é—´æ®µåˆ†æ**ï¼š
```bash
# æŒ‰å°æ—¶ç»Ÿè®¡PV/UV
awk '{
    gsub(/\[|\]/, "", $4)
    split($4, time, ":")
    hour = time[2]
    pv[hour]++
    uv[hour][$1] = 1
} 
END {
    for(h in pv) {
        unique_count = 0
        for(ip in uv[h]) unique_count++
        printf "%02d:00 PV:%d UV:%d\n", h, pv[h], unique_count
    }
}' access.log | sort
```

**ğŸŒ åœ°åŸŸè®¿é—®åˆ†æ**ï¼š
```bash
# æå–è®¿é—®æ¥æºå›½å®¶ï¼ˆéœ€è¦é…åˆGeoIPï¼‰
awk '{print $1}' access.log | sort -u > unique_ips.txt
# ç„¶åä½¿ç”¨geoiplookupå·¥å…·åˆ†æIPå½’å±åœ°
```

---

## 8. ğŸ¤– è‡ªåŠ¨åŒ–åˆ†æè„šæœ¬


### 8.1 Shellè„šæœ¬è‡ªåŠ¨åŒ–


ç¼–å†™Shellè„šæœ¬å¯ä»¥å°†å¤æ‚çš„æ—¥å¿—åˆ†æè¿‡ç¨‹è‡ªåŠ¨åŒ–ï¼Œé¿å…é‡å¤çš„æ‰‹å·¥æ“ä½œã€‚

**ğŸ“ åŸºç¡€åˆ†æè„šæœ¬æ¡†æ¶**ï¼š
```bash
#!/bin/bash
# æ—¥å¿—åˆ†æè„šæœ¬ç¤ºä¾‹

LOG_FILE="/var/log/httpd/access_log"
REPORT_DATE=$(date +%Y-%m-%d)
REPORT_DIR="/tmp/log_reports"

# åˆ›å»ºæŠ¥å‘Šç›®å½•
mkdir -p "$REPORT_DIR"

# åŸºç¡€ç»Ÿè®¡
echo "=== $REPORT_DATE è®¿é—®ç»Ÿè®¡æŠ¥å‘Š ===" > "$REPORT_DIR/daily_report.txt"
echo "æ€»è®¿é—®é‡: $(wc -l < $LOG_FILE)" >> "$REPORT_DIR/daily_report.txt"
echo "ç‹¬ç«‹IPæ•°: $(awk '{print $1}' $LOG_FILE | sort -u | wc -l)" >> "$REPORT_DIR/daily_report.txt"
```

### 8.2 é”™è¯¯ç›‘æ§è„šæœ¬


**ğŸš¨ å®æ—¶é”™è¯¯ç›‘æ§**ï¼š
```bash
#!/bin/bash
# é”™è¯¯æ—¥å¿—ç›‘æ§è„šæœ¬

ERROR_LOG="/var/log/httpd/error_log"
THRESHOLD=10
ALERT_EMAIL="admin@example.com"

# ç»Ÿè®¡æœ€è¿‘5åˆ†é’Ÿçš„é”™è¯¯æ•°é‡
ERROR_COUNT=$(tail -n 1000 "$ERROR_LOG" | grep "$(date -d '5 minutes ago' '+%Y-%m-%d %H:%M')" | wc -l)

if [ $ERROR_COUNT -gt $THRESHOLD ]; then
    echo "è­¦å‘Šï¼šæœ€è¿‘5åˆ†é’Ÿå†…å‘ç”Ÿäº† $ERROR_COUNT ä¸ªé”™è¯¯ï¼Œè¶…è¿‡é˜ˆå€¼ $THRESHOLD" | mail -s "ç³»ç»Ÿé”™è¯¯å‘Šè­¦" "$ALERT_EMAIL"
fi
```

### 8.3 æ€§èƒ½åˆ†æè‡ªåŠ¨åŒ–


**ğŸ“Š æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ**ï¼š
```bash
#!/bin/bash
# ç”Ÿæˆæ€§èƒ½åˆ†ææŠ¥å‘Š

generate_performance_report() {
    local log_file=$1
    local output_file=$2
    
    {
        echo "å“åº”æ—¶é—´ç»Ÿè®¡ï¼š"
        awk '$10 > 0 {
            if($10 < 100) fast++
            else if($10 < 1000) medium++
            else slow++
            total++
            sum += $10
        } 
        END {
            printf "å¿«é€Ÿå“åº”(<100ms): %d (%.1f%%)\n", fast, fast/total*100
            printf "ä¸­ç­‰å“åº”(100ms-1s): %d (%.1f%%)\n", medium, medium/total*100
            printf "æ…¢é€Ÿå“åº”(>1s): %d (%.1f%%)\n", slow, slow/total*100
            printf "å¹³å‡å“åº”æ—¶é—´: %.2fms\n", sum/total
        }' "$log_file"
    } > "$output_file"
}
```

---

## 9. ğŸ“Š æ—¥å¿—å¯è§†åŒ–åŸºç¡€


### 9.1 æ–‡æœ¬å›¾è¡¨ç»˜åˆ¶


è™½ç„¶æ˜¯å‘½ä»¤è¡Œç¯å¢ƒï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åˆ›å»ºç®€å•çš„æ–‡æœ¬å›¾è¡¨æ¥å¯è§†åŒ–æ•°æ®ã€‚

**ğŸ“ˆ ç®€å•æŸ±çŠ¶å›¾**ï¼š
```bash
# ç”Ÿæˆè®¿é—®é‡æŸ±çŠ¶å›¾
awk '{print $1}' access.log | sort | uniq -c | sort -nr | head -10 | 
while read count ip; do
    printf "%-15s " "$ip"
    for i in $(seq 1 $((count/100))); do printf "â–ˆ"; done
    printf " %d\n" "$count"
done
```

**â° æ—¶é—´åˆ†å¸ƒå›¾**ï¼š
```bash
# æŒ‰å°æ—¶æ˜¾ç¤ºè®¿é—®åˆ†å¸ƒ
awk -F'[: ]' '{hour[$5]++} END{
    for(i=0; i<24; i++) {
        printf "%02d:00 ", i
        bar_len = int(hour[sprintf("%02d", i)]/100)
        if(bar_len < 1 && hour[sprintf("%02d", i)] > 0) bar_len = 1
        for(j=1; j<=bar_len; j++) printf "â–“"
        printf " (%d)\n", hour[sprintf("%02d", i)]
    }
}' access.log
```

### 9.2 æ•°æ®å¯¼å‡ºæ ¼å¼


**ğŸ’¾ CSVæ ¼å¼å¯¼å‡º**ï¼š
```bash
# å¯¼å‡ºIPè®¿é—®ç»Ÿè®¡ä¸ºCSV
echo "IPåœ°å€,è®¿é—®æ¬¡æ•°,ç™¾åˆ†æ¯”" > ip_stats.csv
awk '{ip[$1]++; total++} 
END {
    for(i in ip) 
        printf "%s,%d,%.2f%%\n", i, ip[i], ip[i]/total*100
}' access.log | sort -t',' -k2 -nr >> ip_stats.csv
```

**ğŸ“‹ JSONæ ¼å¼å¯¼å‡º**ï¼š
```bash
# ç”ŸæˆJSONæ ¼å¼çš„ç»Ÿè®¡æŠ¥å‘Š
awk 'BEGIN{printf "{\n\"statistics\": {\n"}
{total++; ip[$1]++} 
END{
    printf "\"total_requests\": %d,\n", total
    printf "\"unique_ips\": %d,\n", length(ip)
    printf "\"top_ips\": [\n"
    n = 0
    for(i in ip) {
        if(++n > 5) break
        printf "{\"ip\":\"%s\", \"count\":%d}", i, ip[i]
        if(n < 5) printf ","
        printf "\n"
    }
    printf "]\n}\n}"
}' access.log
```

---

## 10. ğŸ› ï¸ å¼€æºæ—¥å¿—åˆ†æå·¥å…·


### 10.1 å‘½ä»¤è¡Œå·¥å…·æ‰©å±•


**ğŸ”§ å¸¸ç”¨å¼€æºå·¥å…·**ï¼š

| å·¥å…·åç§° | **ä¸»è¦åŠŸèƒ½** | **é€‚ç”¨åœºæ™¯** | **å­¦ä¹ éš¾åº¦** |
|---------|-------------|-------------|-------------|
| ğŸ” **multitail** | `å¤šæ–‡ä»¶å®æ—¶ç›‘æ§` | `åŒæ—¶ç›‘æ§å¤šä¸ªæ—¥å¿—` | `ğŸŸ¢ç®€å•` |
| ğŸ“Š **goaccess** | `Webæ—¥å¿—åˆ†æ` | `Apache/Nginxæ—¥å¿—` | `ğŸŸ¡ä¸­ç­‰` |
| âš¡ **lnav** | `å¢å¼ºæ—¥å¿—æŸ¥çœ‹å™¨` | `äº¤äº’å¼æ—¥å¿—æµè§ˆ` | `ğŸŸ¡ä¸­ç­‰` |
| ğŸ“ˆ **logwatch** | `ç³»ç»Ÿæ—¥å¿—æ‘˜è¦` | `è‡ªåŠ¨åŒ–æ—¥å¿—æŠ¥å‘Š` | `ğŸŸ¢ç®€å•` |

### 10.2 GoAccesså®æ—¶åˆ†æ


**GoAccess**æ˜¯ä¸€ä¸ªä¼˜ç§€çš„Webæ—¥å¿—åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆå®æ—¶çš„HTMLæŠ¥å‘Šã€‚

**ğŸš€ åŸºæœ¬ä½¿ç”¨**ï¼š
```bash
# å®‰è£…GoAccess
yum install goaccess  # CentOS/RHEL
apt install goaccess  # Ubuntu/Debian

# åˆ†æApacheè®¿é—®æ—¥å¿—
goaccess /var/log/httpd/access_log -o report.html --log-format=COMBINED

# å®æ—¶ç›‘æ§æ¨¡å¼
goaccess /var/log/nginx/access.log -o /var/www/html/live_stats.html --real-time-html
```

**ğŸ“Š é…ç½®è‡ªå®šä¹‰æ ¼å¼**ï¼š
```bash
# è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼åˆ†æ
goaccess access.log --log-format='%h %^ %^ [%d:%t %^] "%r" %s %b "%R" "%u"' \
         --date-format='%d/%b/%Y' \
         --time-format='%H:%M:%S'
```

### 10.3 LogWatchç³»ç»Ÿæ‘˜è¦


**LogWatch**è‡ªåŠ¨åˆ†æç³»ç»Ÿæ—¥å¿—å¹¶ç”Ÿæˆæ‘˜è¦æŠ¥å‘Šã€‚

**âš™ï¸ é…ç½®ä½¿ç”¨**ï¼š
```bash
# å®‰è£…LogWatch
yum install logwatch

# ç”Ÿæˆä»Šæ—¥æŠ¥å‘Š
logwatch --range today --detail medium

# ç”Ÿæˆç‰¹å®šæœåŠ¡æŠ¥å‘Š
logwatch --service httpd --range yesterday --detail high

# é‚®ä»¶å‘é€æŠ¥å‘Š
logwatch --mailto admin@example.com --range week
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå·¥å…·


```
ğŸ” grepï¼šæ—¥å¿—æœç´¢çš„åŸºç¡€å·¥å…·
â€¢ æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
â€¢ é…åˆé€‰é¡¹ä½¿ç”¨åŠŸèƒ½å¼ºå¤§
â€¢ é€‚åˆå¿«é€Ÿå®šä½é—®é¢˜

âš™ï¸ awkï¼šç»“æ„åŒ–æ•°æ®å¤„ç†ä¸“å®¶
â€¢ æŒ‰åˆ—å¤„ç†æ•°æ®çš„åˆ©å™¨
â€¢ å†…ç½®ç»Ÿè®¡å’Œè®¡ç®—åŠŸèƒ½  
â€¢ é€‚åˆå¤æ‚çš„æ•°æ®åˆ†æ

âœ‚ï¸ sedï¼šæµç¼–è¾‘å’Œæ–‡æœ¬æ›¿æ¢
â€¢ æ‰¹é‡æ–‡æœ¬å¤„ç†å·¥å…·
â€¢ æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢
â€¢ é€‚åˆæ•°æ®æ¸…æ´—å’Œæ ¼å¼åŒ–
```

### 11.2 æ—¥å¿—åˆ†ææœ€ä½³å®è·µ


**ğŸ¯ åˆ†ææ€è·¯**ï¼š
```
Step â‘ ï¼šæ˜ç¡®åˆ†æç›®æ ‡
Step â‘¡ï¼šé€‰æ‹©åˆé€‚å·¥å…·
Step â‘¢ï¼šç»„åˆå‘½ä»¤ç®¡é“  
Step â‘£ï¼šéªŒè¯ç»“æœå‡†ç¡®æ€§
Step â‘¤ï¼šè‡ªåŠ¨åŒ–é‡å¤ä»»åŠ¡
```

**âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§**ï¼š
- ä½¿ç”¨`head`/`tail`é™åˆ¶å¤„ç†æ•°æ®é‡
- å–„ç”¨ç®¡é“é¿å…ä¸­é—´æ–‡ä»¶
- æ­£åˆ™è¡¨è¾¾å¼è¦ç²¾ç¡®ï¼Œé¿å…è¿‡åº¦åŒ¹é…
- å¤§æ–‡ä»¶åˆ†å—å¤„ç†ï¼Œé¿å…å†…å­˜ä¸è¶³

### 11.3 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â— å…¸å‹é”™è¯¯åŠè§£å†³**ï¼š

| é—®é¢˜ | **åŸå› ** | **è§£å†³æ–¹æ³•** |
|------|---------|-------------|
| ğŸŒ **å¤„ç†é€Ÿåº¦æ…¢** | `æ•°æ®é‡å¤ªå¤§` | `ä½¿ç”¨head/tailé™åˆ¶èŒƒå›´` |
| ğŸ¤” **åŒ¹é…ä¸å‡†ç¡®** | `æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯` | `å…ˆç”¨ç®€å•æ¨¡å¼æµ‹è¯•` |
| ğŸ’¾ **å†…å­˜ä¸è¶³** | `æ–‡ä»¶è¿‡å¤§` | `åˆ†å—å¤„ç†æˆ–ä½¿ç”¨æµå¤„ç†` |
| ğŸ“Š **ç»Ÿè®¡ç»“æœé”™è¯¯** | `æ•°æ®æ ¼å¼ä¸ç»Ÿä¸€` | `é¢„å¤„ç†ç»Ÿä¸€æ ¼å¼` |

### 11.4 è¿›é˜¶å­¦ä¹ è·¯å¾„


```
ğŸŸ¢ å…¥é—¨é˜¶æ®µï¼š
â€¢ æŒæ¡grep/awk/sedåŸºæœ¬ç”¨æ³•
â€¢ ç†Ÿæ‚‰å¸¸è§æ—¥å¿—æ ¼å¼
â€¢ å­¦ä¼šç®€å•çš„ç»Ÿè®¡åˆ†æ

ğŸŸ¡ è¿›é˜¶é˜¶æ®µï¼š
â€¢ ç¼–å†™è‡ªåŠ¨åŒ–åˆ†æè„šæœ¬
â€¢ å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼é«˜çº§ç”¨æ³•
â€¢ æŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€å·§

ğŸ”´ é«˜çº§é˜¶æ®µï¼š
â€¢ é›†æˆä¸“ä¸šåˆ†æå·¥å…·
â€¢ æ„å»ºå®æ—¶ç›‘æ§ç³»ç»Ÿ
â€¢ å®ç°å¤§è§„æ¨¡æ—¥å¿—å¤„ç†
```

**ğŸ’¡ å­¦ä¹ å»ºè®®**ï¼š
- ä»å®é™…é—®é¢˜å‡ºå‘ï¼Œè¾¹ç”¨è¾¹å­¦
- å¤šç»ƒä¹ å‘½ä»¤ç»„åˆï¼ŒåŸ¹å…»ç®¡é“æ€ç»´
- å…³æ³¨æ—¥å¿—æ ¼å¼å˜åŒ–ï¼ŒåŠæ—¶è°ƒæ•´è„šæœ¬
- å»ºç«‹è‡ªå·±çš„å·¥å…·åº“å’Œè„šæœ¬é›†åˆ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
grepæœç´¢å®šä½å¿«ï¼Œawkç»Ÿè®¡åŠŸèƒ½å¼º
sedæ›¿æ¢å¾ˆæ–¹ä¾¿ï¼Œç®¡é“ç»„åˆå¨åŠ›å¤§
æ­£åˆ™è¡¨è¾¾å¼è¦å‡†ï¼Œè‡ªåŠ¨åŒ–è„šæœ¬çœæ—¶é—´
å·¥å…·ç»„åˆè§£éš¾é¢˜ï¼Œæ—¥å¿—åˆ†æä¸å†æ„
```