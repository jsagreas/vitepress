---
title: 3ã€æ•°æ®é‡‡é›†æ¶æ„è®¾è®¡
---
## ğŸ“š ç›®å½•

1. [é‡‡é›†æ¶æ„æ ¸å¿ƒæ¦‚å¿µ](#1-é‡‡é›†æ¶æ„æ ¸å¿ƒæ¦‚å¿µ)
2. [é‡‡é›†å™¨éƒ¨ç½²æ¨¡å¼è¯¦è§£](#2-é‡‡é›†å™¨éƒ¨ç½²æ¨¡å¼è¯¦è§£)
3. [æ•°æ®é‡‡é›†é¢‘ç‡ä¸ç²¾åº¦å¹³è¡¡](#3-æ•°æ®é‡‡é›†é¢‘ç‡ä¸ç²¾åº¦å¹³è¡¡)
4. [é‡‡é›†å™¨é«˜å¯ç”¨è®¾è®¡](#4-é‡‡é›†å™¨é«˜å¯ç”¨è®¾è®¡)
5. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#5-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
6. [é…ç½®ç®¡ç†ä¸ç‰ˆæœ¬æ§åˆ¶](#6-é…ç½®ç®¡ç†ä¸ç‰ˆæœ¬æ§åˆ¶)
7. [æ•°æ®ä¼ è¾“ä¼˜åŒ–](#7-æ•°æ®ä¼ è¾“ä¼˜åŒ–)
8. [å®‰å…¨è®¤è¯ä¸åŠ å¯†](#8-å®‰å…¨è®¤è¯ä¸åŠ å¯†)
9. [æ•°æ®æ ¼å¼ç»Ÿä¸€åŒ–](#9-æ•°æ®æ ¼å¼ç»Ÿä¸€åŒ–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ é‡‡é›†æ¶æ„æ ¸å¿ƒæ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ•°æ®é‡‡é›†æ¶æ„


> ğŸ’¡ **æ ¸å¿ƒæ¦‚å¿µ**  
> æ•°æ®é‡‡é›†æ¶æ„æ˜¯ç›‘æ§ç³»ç»Ÿçš„**æ•°æ®æ„ŸçŸ¥å±‚**ï¼Œè´Ÿè´£ä»å„ç§ç›®æ ‡ç³»ç»Ÿä¸­è·å–ç›‘æ§æ•°æ®ï¼Œå¹¶å°†å…¶ä¼ è¾“åˆ°ç›‘æ§ä¸­å¿ƒè¿›è¡Œå¤„ç†å’Œå­˜å‚¨ã€‚

```
ç›‘æ§æ•°æ®æµå‘ï¼š
æ•°æ®æº â”€â”€é‡‡é›†â”€â”€> é‡‡é›†å™¨ â”€â”€ä¼ è¾“â”€â”€> ç›‘æ§ä¸­å¿ƒ â”€â”€å¤„ç†â”€â”€> å­˜å‚¨/å‘Šè­¦
```

### 1.2 é‡‡é›†æ¶æ„çš„æ ¸å¿ƒä½œç”¨


**ğŸ” æ•°æ®è·å–èŒè´£**
- **ç³»ç»ŸæŒ‡æ ‡**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨ç‡
- **åº”ç”¨æŒ‡æ ‡**ï¼šå“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€ååé‡
- **ä¸šåŠ¡æŒ‡æ ‡**ï¼šè®¢å•é‡ã€ç”¨æˆ·æ´»è·ƒæ•°ã€æ”¶å…¥ç»Ÿè®¡
- **æ—¥å¿—æ•°æ®**ï¼šåº”ç”¨æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ã€å®¡è®¡æ—¥å¿—

**âš¡ å®æ—¶æ€§è¦æ±‚**
```
é‡‡é›†å»¶è¿Ÿç­‰çº§ï¼š
ğŸŸ¢ å®æ—¶çº§ï¼š< 1ç§’ï¼ˆæ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ï¼‰
ğŸŸ¡ å‡†å®æ—¶ï¼š1-10ç§’ï¼ˆä¸€èˆ¬åº”ç”¨æŒ‡æ ‡ï¼‰  
ğŸŸ  æ‰¹é‡çº§ï¼š1-5åˆ†é’Ÿï¼ˆç³»ç»ŸåŸºç¡€æŒ‡æ ‡ï¼‰
```

### 1.3 é‡‡é›†æ¶æ„è®¾è®¡åŸåˆ™


**ğŸ“‹ è®¾è®¡åŸåˆ™æ¸…å•**
- âœ… **ä½ä¾µå…¥æ€§**ï¼šå¯¹ç›®æ ‡ç³»ç»Ÿå½±å“æœ€å°
- âœ… **é«˜å¯é æ€§**ï¼šç¡®ä¿æ•°æ®ä¸ä¸¢å¤±
- âœ… **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¤§è§„æ¨¡é›†ç¾¤ç›‘æ§
- âœ… **çµæ´»é…ç½®**ï¼šæ”¯æŒåŠ¨æ€è°ƒæ•´é‡‡é›†ç­–ç•¥
- âœ… **å®‰å…¨æ€§**ï¼šä¿æŠ¤æ•æ„Ÿæ•°æ®ä¼ è¾“

---

## 2. ğŸ”§ é‡‡é›†å™¨éƒ¨ç½²æ¨¡å¼è¯¦è§£


### 2.1 Agentæ¨¡å¼ï¼ˆä»£ç†æ¨¡å¼ï¼‰


> ğŸ“– **æ¨¡å¼å®šä¹‰**  
> åœ¨æ¯ä¸ªç›‘æ§ç›®æ ‡ä¸Šå®‰è£…è½»é‡çº§é‡‡é›†ç¨‹åºï¼Œä¸»åŠ¨æ”¶é›†æœ¬æœºæ•°æ®å¹¶æ¨é€åˆ°ç›‘æ§ä¸­å¿ƒ

```
Agentæ¶æ„ç¤ºæ„ï¼š
æœåŠ¡å™¨A â”€â”€[Agent A]â”€â”€â”
æœåŠ¡å™¨B â”€â”€[Agent B]â”€â”€â”¼â”€â”€> ç›‘æ§ä¸­å¿ƒ
æœåŠ¡å™¨C â”€â”€[Agent C]â”€â”€â”˜
```

**âœ… Agentæ¨¡å¼ä¼˜åŠ¿**
- **ç²¾å‡†é‡‡é›†**ï¼šå¯è·å–è¯¦ç»†çš„æœ¬åœ°æŒ‡æ ‡
- **å®æ—¶æ€§å¼º**ï¼šæ•°æ®é‡‡é›†å»¶è¿Ÿä½ï¼ˆç§’çº§ï¼‰
- **åŠŸèƒ½ä¸°å¯Œ**ï¼šæ”¯æŒå¤æ‚çš„æ•°æ®å¤„ç†å’Œè¿‡æ»¤
- **æœ¬åœ°ç¼“å­˜**ï¼šç½‘ç»œå¼‚å¸¸æ—¶å¯æš‚å­˜æ•°æ®

**âŒ Agentæ¨¡å¼åŠ£åŠ¿**
- **èµ„æºå ç”¨**ï¼šæ¯å°æœºå™¨éƒ½éœ€è¦è¿è¡Œé‡‡é›†è¿›ç¨‹
- **ç»´æŠ¤æˆæœ¬**ï¼šéœ€è¦ç®¡ç†å¤§é‡Agentå®ä¾‹
- **ç‰ˆæœ¬ç®¡ç†**ï¼šå‡çº§æ›´æ–°å·¥ä½œé‡å¤§

**ğŸ¯ é€‚ç”¨åœºæ™¯**
- **å¤§è§„æ¨¡é›†ç¾¤**ï¼šæœåŠ¡å™¨æ•°é‡ä¼—å¤šï¼Œéœ€è¦è¯¦ç»†ç›‘æ§
- **æ ¸å¿ƒä¸šåŠ¡**ï¼šå¯¹ç›‘æ§ç²¾åº¦å’Œå®æ—¶æ€§è¦æ±‚é«˜
- **å¤æ‚ç¯å¢ƒ**ï¼šéœ€è¦é‡‡é›†å¤šç§ç±»å‹çš„æŒ‡æ ‡

### 2.2 Agentlessæ¨¡å¼ï¼ˆæ— ä»£ç†æ¨¡å¼ï¼‰


> ğŸ“– **æ¨¡å¼å®šä¹‰**  
> ç›‘æ§ä¸­å¿ƒé€šè¿‡ç½‘ç»œåè®®ï¼ˆå¦‚SSHã€SNMPã€WMIï¼‰è¿œç¨‹è·å–ç›®æ ‡ç³»ç»Ÿæ•°æ®

```
Agentlessæ¶æ„ç¤ºæ„ï¼š
            ç›‘æ§ä¸­å¿ƒ
          /    |    \
     SSH     SNMP    WMI
    /         |        \
æœåŠ¡å™¨A    ç½‘ç»œè®¾å¤‡    WindowsæœåŠ¡å™¨
```

**âœ… Agentlessæ¨¡å¼ä¼˜åŠ¿**
- **é›¶éƒ¨ç½²**ï¼šæ— éœ€åœ¨ç›®æ ‡ç³»ç»Ÿå®‰è£…ä»»ä½•è½¯ä»¶
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰é‡‡é›†é€»è¾‘é›†ä¸­åœ¨ç›‘æ§ä¸­å¿ƒ
- **å¿«é€Ÿæ¥å…¥**ï¼šæ–°å¢ç›‘æ§ç›®æ ‡åªéœ€é…ç½®å³å¯

**âŒ Agentlessæ¨¡å¼åŠ£åŠ¿**
- **ç½‘ç»œä¾èµ–**ï¼šç½‘ç»œå¼‚å¸¸ç›´æ¥å½±å“æ•°æ®é‡‡é›†
- **æ€§èƒ½é™åˆ¶**ï¼šè¿œç¨‹é‡‡é›†æ•ˆç‡ç›¸å¯¹è¾ƒä½
- **åŠŸèƒ½å—é™**ï¼šåªèƒ½è·å–ç³»ç»Ÿæš´éœ²çš„æ ‡å‡†æŒ‡æ ‡

**ğŸ¯ é€‚ç”¨åœºæ™¯**
- **å¼‚æ„ç¯å¢ƒ**ï¼šåŒ…å«å¤šç§æ“ä½œç³»ç»Ÿå’Œè®¾å¤‡ç±»å‹
- **ä¸´æ—¶ç›‘æ§**ï¼šçŸ­æœŸç›‘æ§éœ€æ±‚æˆ–æµ‹è¯•ç¯å¢ƒ
- **ç½‘ç»œè®¾å¤‡**ï¼šè·¯ç”±å™¨ã€äº¤æ¢æœºç­‰åŸºç¡€è®¾æ–½ç›‘æ§

### 2.3 Pushæ¨¡å¼ï¼ˆæ¨é€æ¨¡å¼ï¼‰


> ğŸ“– **æ¨¡å¼å®šä¹‰**  
> é‡‡é›†å™¨ä¸»åŠ¨å°†æ•°æ®æ¨é€åˆ°ç›‘æ§ä¸­å¿ƒï¼Œé‡‡ç”¨"æ•°æ®ç”Ÿäº§è€…é©±åŠ¨"çš„æ–¹å¼

```
Pushæ¨¡å¼æ•°æ®æµï¼š
é‡‡é›†å™¨ â”€â”€[ä¸»åŠ¨æ¨é€]â”€â”€> ç›‘æ§ä¸­å¿ƒ
   |                      |
å®šæ—¶é‡‡é›†               è¢«åŠ¨æ¥æ”¶
```

**âš¡ Pushæ¨¡å¼ç‰¹ç‚¹**
- **ä¸»åŠ¨ä¸ŠæŠ¥**ï¼šé‡‡é›†å™¨æ§åˆ¶å‘é€æ—¶æœºå’Œé¢‘ç‡
- **å®æ—¶æ€§å¥½**ï¼šæ•°æ®äº§ç”Ÿåç«‹å³æ¨é€
- **ç®€å•é«˜æ•ˆ**ï¼šç›‘æ§ä¸­å¿ƒåªéœ€è¢«åŠ¨æ¥æ”¶

**ğŸ”§ å®ç°ç¤ºä¾‹**
```bash
# Telegrafæ¨é€åˆ°InfluxDB
[agent]
  interval = "10s"
  
[[outputs.influxdb]]
  urls = ["http://monitoring-server:8086"]
  database = "telegraf"
```

### 2.4 Pullæ¨¡å¼ï¼ˆæ‹‰å–æ¨¡å¼ï¼‰


> ğŸ“– **æ¨¡å¼å®šä¹‰**  
> ç›‘æ§ä¸­å¿ƒä¸»åŠ¨ä»å„ä¸ªé‡‡é›†å™¨æˆ–ç›®æ ‡ç³»ç»Ÿæ‹‰å–æ•°æ®ï¼Œé‡‡ç”¨"æ•°æ®æ¶ˆè´¹è€…é©±åŠ¨"çš„æ–¹å¼

```
Pullæ¨¡å¼æ•°æ®æµï¼š
ç›‘æ§ä¸­å¿ƒ â”€â”€[ä¸»åŠ¨æ‹‰å–]â”€â”€> é‡‡é›†å™¨/ç›®æ ‡ç³»ç»Ÿ
   |                         |
å®šæ—¶è½®è¯¢                   æš´éœ²æ¥å£
```

**âš¡ Pullæ¨¡å¼ç‰¹ç‚¹**
- **é›†ä¸­æ§åˆ¶**ï¼šç›‘æ§ä¸­å¿ƒç»Ÿä¸€æ§åˆ¶é‡‡é›†ç­–ç•¥
- **çµæ´»è°ƒåº¦**ï¼šå¯æ ¹æ®ç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´é‡‡é›†é¢‘ç‡
- **æ•…éšœæ£€æµ‹**ï¼šæ‹‰å–å¤±è´¥å¯ç›´æ¥åˆ¤æ–­ç›®æ ‡å¼‚å¸¸

**ğŸ”§ å®ç°ç¤ºä¾‹**
```yaml
# Prometheusæ‹‰å–é…ç½®
scrape_configs:
  - job_name: 'web-servers'
    scrape_interval: 15s
    static_configs:
      - targets: ['web1:9090', 'web2:9090']
```

### 2.5 éƒ¨ç½²æ¨¡å¼å¯¹æ¯”


| å¯¹æ¯”ç»´åº¦ | **Agentæ¨¡å¼** | **Agentlessæ¨¡å¼** | **Pushæ¨¡å¼** | **Pullæ¨¡å¼** |
|---------|-------------|------------------|------------|-----------|
| `éƒ¨ç½²å¤æ‚åº¦` | ğŸ”´ **é«˜** | ğŸŸ¢ **ä½** | ğŸŸ¡ **ä¸­** | ğŸŸ¡ **ä¸­** |
| `èµ„æºå ç”¨` | ğŸ”´ **é«˜** | ğŸŸ¢ **ä½** | ğŸŸ¡ **ä¸­** | ğŸŸ¢ **ä½** |
| `å®æ—¶æ€§` | ğŸŸ¢ **ä¼˜ç§€** | ğŸŸ¡ **ä¸€èˆ¬** | ğŸŸ¢ **ä¼˜ç§€** | ğŸŸ¡ **ä¸€èˆ¬** |
| `å¯é æ€§` | ğŸŸ¢ **é«˜** | ğŸ”´ **ä¾èµ–ç½‘ç»œ** | ğŸŸ¡ **ä¸­** | ğŸŸ¢ **é«˜** |
| `æ‰©å±•æ€§` | ğŸŸ¡ **ä¸­** | ğŸ”´ **å—é™** | ğŸŸ¢ **å¥½** | ğŸŸ¢ **å¥½** |
| `ç»´æŠ¤æˆæœ¬` | ğŸ”´ **é«˜** | ğŸŸ¢ **ä½** | ğŸŸ¡ **ä¸­** | ğŸŸ¡ **ä¸­** |

---

## 3. â±ï¸ æ•°æ®é‡‡é›†é¢‘ç‡ä¸ç²¾åº¦å¹³è¡¡


### 3.1 é‡‡é›†é¢‘ç‡åˆ†ç±»


**ğŸ“Š æŒ‰ä¸šåŠ¡é‡è¦æ€§åˆ†çº§**
```
ğŸ”¥ æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ï¼ˆ5-10ç§’ï¼‰
- æ”¯ä»˜æˆåŠŸç‡ã€è®¢å•å¤„ç†æ—¶é—´
- æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ç‡
- æ ¸å¿ƒAPIå“åº”æ—¶é—´

â­ é‡è¦åº”ç”¨æŒ‡æ ‡ï¼ˆ30-60ç§’ï¼‰  
- CPU/å†…å­˜ä½¿ç”¨ç‡
- åº”ç”¨é”™è¯¯æ—¥å¿—æ•°é‡
- ç¼“å­˜å‘½ä¸­ç‡

ğŸ’« åŸºç¡€ç›‘æ§æŒ‡æ ‡ï¼ˆ3-5åˆ†é’Ÿï¼‰
- ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡
- ç³»ç»Ÿè´Ÿè½½å¹³å‡å€¼
- ç½‘ç»œæµé‡ç»Ÿè®¡
```

### 3.2 é¢‘ç‡ä¸ç²¾åº¦çš„æƒè¡¡


> âš–ï¸ **æ ¸å¿ƒå¹³è¡¡ç‚¹**  
> é‡‡é›†é¢‘ç‡è¶Šé«˜ï¼Œç›‘æ§ç²¾åº¦è¶Šå¥½ï¼Œä½†ç³»ç»Ÿå¼€é”€è¶Šå¤§ï¼›é‡‡é›†é¢‘ç‡è¶Šä½ï¼Œç³»ç»Ÿå¼€é”€è¶Šå°ï¼Œä½†å¯èƒ½é”™è¿‡é‡è¦äº‹ä»¶

**ğŸ“ˆ é‡‡é›†å¼€é”€è®¡ç®—**
```
ç³»ç»Ÿå¼€é”€ = é‡‡é›†é¢‘ç‡ Ã— æŒ‡æ ‡æ•°é‡ Ã— ä¼ è¾“æˆæœ¬ Ã— å­˜å‚¨æˆæœ¬

ç¤ºä¾‹ï¼š
- 1000å°æœåŠ¡å™¨
- æ¯å°50ä¸ªæŒ‡æ ‡  
- 10ç§’é‡‡é›†ä¸€æ¬¡
- æ¯å°æ—¶äº§ç”Ÿæ•°æ®ï¼š1000Ã—50Ã—360 = 1800ä¸‡ä¸ªæ•°æ®ç‚¹
```

### 3.3 åŠ¨æ€é‡‡é›†é¢‘ç‡ç­–ç•¥


**ğŸ¯ æ™ºèƒ½è°ƒé¢‘æœºåˆ¶**
```
æ­£å¸¸çŠ¶æ€ï¼šæ ‡å‡†é¢‘ç‡ï¼ˆ1åˆ†é’Ÿï¼‰
    â†“ æ£€æµ‹åˆ°å¼‚å¸¸
è­¦å‘ŠçŠ¶æ€ï¼šæé«˜é¢‘ç‡ï¼ˆ30ç§’ï¼‰
    â†“ å¼‚å¸¸åŠ é‡  
æ•…éšœçŠ¶æ€ï¼šæœ€é«˜é¢‘ç‡ï¼ˆ10ç§’ï¼‰
    â†“ æ¢å¤æ­£å¸¸
é€æ­¥é™é¢‘ï¼š30ç§’ â†’ 1åˆ†é’Ÿ â†’ æ ‡å‡†é¢‘ç‡
```

**ğŸ”§ é…ç½®ç¤ºä¾‹**
```yaml
# åŠ¨æ€é‡‡é›†é…ç½®
collection_rules:
  - name: "cpu_usage"
    normal_interval: 60s
    warning_interval: 30s
    critical_interval: 10s
    threshold_warning: 70%
    threshold_critical: 90%
```

---

## 4. ğŸ›¡ï¸ é‡‡é›†å™¨é«˜å¯ç”¨è®¾è®¡


### 4.1 é«˜å¯ç”¨æ¶æ„æ¨¡å¼


**ğŸ”„ ä¸»å¤‡æ¨¡å¼ï¼ˆActive-Passiveï¼‰**
```
é‡‡é›†ç›®æ ‡ â”€â”€â”¬â”€â”€> ä¸»é‡‡é›†å™¨ï¼ˆActiveï¼‰
           â”‚        â†“ 
           â””â”€â”€> å¤‡é‡‡é›†å™¨ï¼ˆPassiveï¼‰â”€â”€> ç›‘æ§å­˜å‚¨
                    â†‘
              æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢
```

**â­ ä¸»å¤‡æ¨¡å¼ç‰¹ç‚¹**
- **ç®€å•å¯é **ï¼šé€»è¾‘æ¸…æ™°ï¼Œæ•…éšœåˆ‡æ¢æ˜ç¡®
- **èµ„æºåˆ©ç”¨**ï¼šå¤‡æœºå¹³æ—¶å¤„äºå¾…æœºçŠ¶æ€
- **æ•°æ®ä¸€è‡´æ€§**ï¼šé¿å…é‡å¤é‡‡é›†é—®é¢˜

**ğŸ”„ è´Ÿè½½å‡è¡¡æ¨¡å¼ï¼ˆLoad Balancingï¼‰**
```
                é‡‡é›†è°ƒåº¦å™¨
               /     |     \
        é‡‡é›†å™¨1   é‡‡é›†å™¨2   é‡‡é›†å™¨3
           |        |        |
        ç›®æ ‡ç»„A   ç›®æ ‡ç»„B   ç›®æ ‡ç»„C
```

**â­ è´Ÿè½½å‡è¡¡ç‰¹ç‚¹**
- **é«˜æ•ˆåˆ©ç”¨**ï¼šæ‰€æœ‰é‡‡é›†å™¨åŒæ—¶å·¥ä½œ
- **æ°´å¹³æ‰©å±•**ï¼šå¯åŠ¨æ€å¢å‡é‡‡é›†å™¨æ•°é‡
- **æ•…éšœéš”ç¦»**ï¼šå•ä¸ªé‡‡é›†å™¨æ•…éšœä¸å½±å“æ•´ä½“

### 4.2 æ•…éšœæ£€æµ‹ä¸è½¬ç§»


**ğŸ” æ•…éšœæ£€æµ‹æœºåˆ¶**
```
å¥åº·æ£€æŸ¥æ–¹å¼ï¼š
1. å¿ƒè·³æ£€æµ‹ï¼šé‡‡é›†å™¨å®šæœŸå‘åè°ƒä¸­å¿ƒæŠ¥å‘ŠçŠ¶æ€
2. æ•°æ®æ£€æµ‹ï¼šç›‘æ§ä¸­å¿ƒæ£€æµ‹æ•°æ®ä¸ŠæŠ¥æ˜¯å¦æ­£å¸¸
3. è¿›ç¨‹æ£€æµ‹ï¼šæ£€æŸ¥é‡‡é›†å™¨è¿›ç¨‹æ˜¯å¦å­˜æ´»
```

**âš¡ å¿«é€Ÿæ•…éšœè½¬ç§»**
```bash
# æ•…éšœè½¬ç§»è„šæœ¬ç¤ºä¾‹
#!/bin/bash
check_collector_health() {
    if ! curl -f http://collector:8080/health; then
        echo "ä¸»é‡‡é›†å™¨æ•…éšœï¼Œå¯åŠ¨å¤‡ç”¨é‡‡é›†å™¨"
        systemctl start collector-backup
        # æ›´æ–°è´Ÿè½½å‡è¡¡å™¨é…ç½®
        update_load_balancer_config
    fi
}
```

### 4.3 æ•°æ®ä¸€è‡´æ€§ä¿éšœ


**ğŸ”’ é˜²é‡å¤é‡‡é›†**
- **æ—¶é—´çª—å£é”**ï¼šåŒä¸€æ—¶é—´æ®µåªå…è®¸ä¸€ä¸ªé‡‡é›†å™¨å·¥ä½œ
- **é‡‡é›†å™¨IDæ ‡è¯†**ï¼šæ•°æ®ä¸­æ ‡è®°é‡‡é›†å™¨æ¥æº
- **å»é‡æœºåˆ¶**ï¼šå­˜å‚¨å±‚é¢è¿›è¡Œæ•°æ®å»é‡

---

## 5. âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 5.1 é‡‡é›†æ€§èƒ½ç“¶é¢ˆåˆ†æ


**ğŸ” å¸¸è§æ€§èƒ½ç“¶é¢ˆ**
```
CPUç“¶é¢ˆï¼š
- æ•°æ®æ ¼å¼è½¬æ¢å ç”¨è¿‡å¤šCPU
- å¤æ‚çš„æ•°æ®è®¡ç®—å’Œèšåˆæ“ä½œ

å†…å­˜ç“¶é¢ˆï¼š
- å¤§é‡æ•°æ®ç¼“å­˜å¯¼è‡´å†…å­˜ä¸è¶³
- å†…å­˜æ³„æ¼é—®é¢˜

ç½‘ç»œç“¶é¢ˆï¼š
- æ•°æ®ä¼ è¾“å¸¦å®½ä¸è¶³
- ç½‘ç»œå»¶è¿Ÿè¿‡é«˜

ç£ç›˜ç“¶é¢ˆï¼š
- æœ¬åœ°ç¼“å­˜å†™å…¥è¿‡æ…¢
- æ—¥å¿—æ–‡ä»¶è¿‡å¤šå¯¼è‡´I/Oé˜»å¡
```

### 5.2 é‡‡é›†å™¨æ€§èƒ½ä¼˜åŒ–


**ğŸš€ æ‰¹é‡é‡‡é›†ä¼˜åŒ–**
```python
# æ‰¹é‡é‡‡é›†ç¤ºä¾‹
class MetricCollector:
    def __init__(self, batch_size=100):
        self.batch_size = batch_size
        self.metrics_buffer = []
    
    def collect_metrics(self):
        # æ‰¹é‡æ”¶é›†æŒ‡æ ‡ï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°
        metrics = self.get_system_metrics_batch()
        self.metrics_buffer.extend(metrics)
        
        # è¾¾åˆ°æ‰¹æ¬¡å¤§å°æ—¶ç»Ÿä¸€å‘é€
        if len(self.metrics_buffer) >= self.batch_size:
            self.send_metrics_batch()
```

**ğŸ’¾ å†…å­˜ç®¡ç†ä¼˜åŒ–**
- **æµå¼å¤„ç†**ï¼šé¿å…åœ¨å†…å­˜ä¸­ç´¯ç§¯å¤§é‡æ•°æ®
- **å¯¹è±¡æ± **ï¼šé‡ç”¨å¯¹è±¡ï¼Œå‡å°‘GCå‹åŠ›
- **å‹ç¼©ç¼“å­˜**ï¼šå¯¹ç¼“å­˜æ•°æ®è¿›è¡Œå‹ç¼©

**â° é‡‡é›†æ—¶é—´ä¼˜åŒ–**
```yaml
# é‡‡é›†æ—¶é—´åˆ†æ•£é…ç½®
collectors:
  - name: "cpu-collector"
    interval: 60s
    offset: 0s      # åœ¨æ•´ç‚¹é‡‡é›†
  - name: "memory-collector"  
    interval: 60s
    offset: 20s     # å»¶è¿Ÿ20ç§’é‡‡é›†
  - name: "disk-collector"
    interval: 60s  
    offset: 40s     # å»¶è¿Ÿ40ç§’é‡‡é›†
```

### 5.3 ç³»ç»Ÿèµ„æºç›‘æ§


**ğŸ“Š é‡‡é›†å™¨è‡ªç›‘æ§**
```
é‡‡é›†å™¨å¥åº·æŒ‡æ ‡ï¼š
- CPUä½¿ç”¨ç‡ï¼šåº” < 5%
- å†…å­˜ä½¿ç”¨é‡ï¼šåº” < 100MB  
- é‡‡é›†å»¶è¿Ÿï¼šåº” < 1ç§’
- é”™è¯¯ç‡ï¼šåº” < 0.1%
```

---

## 6. âš™ï¸ é…ç½®ç®¡ç†ä¸ç‰ˆæœ¬æ§åˆ¶


### 6.1 é…ç½®ç®¡ç†æ¶æ„


**ğŸ—‚ï¸ é›†ä¸­åŒ–é…ç½®ç®¡ç†**
```
é…ç½®ç®¡ç†ä¸­å¿ƒ
    â”œâ”€â”€ å…¨å±€é…ç½®ï¼ˆæ‰€æœ‰é‡‡é›†å™¨å…±äº«ï¼‰
    â”œâ”€â”€ åˆ†ç»„é…ç½®ï¼ˆæŒ‰ä¸šåŠ¡çº¿åˆ†ç»„ï¼‰  
    â”œâ”€â”€ å®ä¾‹é…ç½®ï¼ˆå•ä¸ªé‡‡é›†å™¨ä¸“ç”¨ï¼‰
    â””â”€â”€ åŠ¨æ€é…ç½®ï¼ˆè¿è¡Œæ—¶å¯è°ƒæ•´ï¼‰
```

**ğŸ”„ é…ç½®åˆ†å‘æœºåˆ¶**
```
é…ç½®ç®¡ç†ä¸­å¿ƒ â”€â”€æ¨é€â”€â”€> é‡‡é›†å™¨å®ä¾‹
       |                    |
   ç‰ˆæœ¬æ§åˆ¶               é…ç½®åº”ç”¨
   å˜æ›´å®¡æ‰¹               è‡ªåŠ¨é‡è½½
```

### 6.2 é…ç½®ç‰ˆæœ¬æ§åˆ¶


**ğŸ“š ç‰ˆæœ¬ç®¡ç†ç­–ç•¥**
```yaml
# é…ç½®æ–‡ä»¶ç‰ˆæœ¬åŒ–
config_version: "v2.1.3"
metadata:
  created_by: "admin"  
  created_at: "2025-09-17T10:30:00Z"
  description: "æ–°å¢æ•°æ®åº“ç›‘æ§é…ç½®"

collectors:
  - name: "database-monitor"
    type: "mysql"
    version: "1.2.0"
    config:
      host: "db.example.com"
      port: 3306
```

**ğŸ” é…ç½®å˜æ›´è¿½è¸ª**
- **å˜æ›´å†å²**ï¼šè®°å½•æ¯æ¬¡é…ç½®ä¿®æ”¹çš„è¯¦ç»†ä¿¡æ¯
- **å›æ»šæœºåˆ¶**ï¼šæ”¯æŒå¿«é€Ÿå›é€€åˆ°å†å²ç‰ˆæœ¬
- **å½±å“åˆ†æ**ï¼šè¯„ä¼°é…ç½®å˜æ›´å¯¹ç³»ç»Ÿçš„å½±å“èŒƒå›´

### 6.3 åŠ¨æ€é…ç½®æ›´æ–°


**âš¡ çƒ­æ›´æ–°æœºåˆ¶**
```python
# é…ç½®çƒ­æ›´æ–°ç¤ºä¾‹
class ConfigManager:
    def __init__(self):
        self.config = self.load_config()
        self.setup_config_watcher()
    
    def setup_config_watcher(self):
        # ç›‘å¬é…ç½®æ–‡ä»¶å˜åŒ–
        self.watcher = FileWatcher(self.config_file)
        self.watcher.on_change(self.reload_config)
    
    def reload_config(self):
        """é…ç½®æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡è½½"""
        new_config = self.load_config()
        self.validate_config(new_config)
        self.apply_config(new_config)
```

---

## 7. ğŸš€ æ•°æ®ä¼ è¾“ä¼˜åŒ–


### 7.1 æ•°æ®å‹ç¼©ç­–ç•¥


**ğŸ“¦ å‹ç¼©ç®—æ³•é€‰æ‹©**
```
å‹ç¼©æ•ˆæœå¯¹æ¯”ï¼š
gzipï¼šå‹ç¼©æ¯”70%ï¼ŒCPUå ç”¨ä¸­ç­‰ï¼Œå…¼å®¹æ€§å¥½
snappyï¼šå‹ç¼©æ¯”50%ï¼ŒCPUå ç”¨ä½ï¼Œé€Ÿåº¦å¿«  
lz4ï¼šå‹ç¼©æ¯”60%ï¼ŒCPUå ç”¨å¾ˆä½ï¼Œé€Ÿåº¦æå¿«
```

**ğŸ”§ å‹ç¼©é…ç½®ç¤ºä¾‹**
```yaml
# é‡‡é›†å™¨å‹ç¼©é…ç½®
transmission:
  compression:
    enabled: true
    algorithm: "snappy"  # é€‰æ‹©å‹ç¼©ç®—æ³•
    min_size: 1024      # å°äº1KBä¸å‹ç¼©
    level: 6            # å‹ç¼©çº§åˆ«
```

### 7.2 æ‰¹é‡ä¼ è¾“ä¼˜åŒ–


**ğŸ“Š æ‰¹é‡å‘é€ç­–ç•¥**
```
æ‰¹é‡å‘é€è§¦å‘æ¡ä»¶ï¼š
1. æ•°é‡è§¦å‘ï¼šç´¯ç§¯1000æ¡æ•°æ®
2. æ—¶é—´è§¦å‘ï¼šæ¯30ç§’å‘é€ä¸€æ¬¡
3. å¤§å°è§¦å‘ï¼šæ•°æ®å¤§å°è¾¾åˆ°10MB
4. ä¼˜å…ˆçº§è§¦å‘ï¼šæœ‰é«˜ä¼˜å…ˆçº§æ•°æ®ç«‹å³å‘é€
```

**â±ï¸ æ‰¹é‡çª—å£æ§åˆ¶**
```python
class BatchProcessor:
    def __init__(self):
        self.batch_size = 1000
        self.batch_timeout = 30  # ç§’
        self.batch_buffer = []
        
    async def add_metric(self, metric):
        self.batch_buffer.append(metric)
        
        # æ£€æŸ¥å‘é€æ¡ä»¶
        if (len(self.batch_buffer) >= self.batch_size or 
            self.should_timeout_send()):
            await self.send_batch()
```

### 7.3 ç½‘ç»œåè®®ä¼˜åŒ–


**ğŸŒ åè®®é€‰æ‹©å¯¹æ¯”**

| åè®® | **ä¼ è¾“æ•ˆç‡** | **å¯é æ€§** | **å¤æ‚åº¦** | **é€‚ç”¨åœºæ™¯** |
|------|------------|----------|----------|------------|
| `HTTP/HTTPS` | ğŸŸ¡ **ä¸­** | ğŸŸ¢ **é«˜** | ğŸŸ¢ **ä½** | `é€šç”¨åœºæ™¯ï¼Œé˜²ç«å¢™å‹å¥½` |
| `TCP` | ğŸŸ¢ **é«˜** | ğŸŸ¢ **é«˜** | ğŸŸ¡ **ä¸­** | `å¯é æ€§è¦æ±‚é«˜` |
| `UDP` | ğŸŸ¢ **é«˜** | ğŸ”´ **ä½** | ğŸŸ¢ **ä½** | `é«˜ååé‡ï¼Œå®¹å¿ä¸¢å¤±` |
| `gRPC` | ğŸŸ¢ **é«˜** | ğŸŸ¢ **é«˜** | ğŸŸ¡ **ä¸­** | `å¾®æœåŠ¡é—´é€šä¿¡` |

---

## 8. ğŸ”’ å®‰å…¨è®¤è¯ä¸åŠ å¯†


### 8.1 è®¤è¯æœºåˆ¶è®¾è®¡


**ğŸ”‘ å¤šå±‚è®¤è¯ä½“ç³»**
```
ç¬¬ä¸€å±‚ï¼šé‡‡é›†å™¨èº«ä»½è®¤è¯
â”œâ”€â”€ API Keyè®¤è¯
â”œâ”€â”€ è¯ä¹¦è®¤è¯ï¼ˆmTLSï¼‰
â””â”€â”€ ä»¤ç‰Œè®¤è¯ï¼ˆJWTï¼‰

ç¬¬äºŒå±‚ï¼šæ•°æ®è®¿é—®æƒé™
â”œâ”€â”€ è¯»å†™æƒé™æ§åˆ¶
â”œâ”€â”€ æ•°æ®èŒƒå›´é™åˆ¶  
â””â”€â”€ æ“ä½œå®¡è®¡è®°å½•
```

**ğŸ“± API Keyè®¤è¯ç¤ºä¾‹**
```yaml
# é‡‡é›†å™¨è®¤è¯é…ç½®
authentication:
  type: "api_key"
  api_key: "collector-12345-abcde"
  secret_key: "your-secret-key"
  
# è¯·æ±‚å¤´æ ¼å¼
headers:
  Authorization: "Bearer collector-12345-abcde"
  X-API-Signature: "ç­¾åå€¼"
```

### 8.2 ä¼ è¾“åŠ å¯†


**ğŸ” TLSåŠ å¯†é…ç½®**
```yaml
# HTTPSä¼ è¾“é…ç½®  
transmission:
  protocol: "https"
  tls:
    enabled: true
    cert_file: "/etc/certs/collector.crt"
    key_file: "/etc/certs/collector.key"
    ca_file: "/etc/certs/ca.crt"
    verify_peer: true
```

**ğŸ›¡ï¸ ç«¯åˆ°ç«¯åŠ å¯†**
- **ä¼ è¾“å±‚åŠ å¯†**ï¼šä½¿ç”¨TLS/SSLä¿æŠ¤ç½‘ç»œä¼ è¾“
- **åº”ç”¨å±‚åŠ å¯†**ï¼šå¯¹æ•æ„Ÿæ•°æ®è¿›è¡Œé¢å¤–åŠ å¯†
- **å­˜å‚¨åŠ å¯†**ï¼šæ•°æ®è½ç›˜æ—¶è¿›è¡ŒåŠ å¯†å­˜å‚¨

### 8.3 å®‰å…¨å®¡è®¡


**ğŸ“‹ å®¡è®¡æ—¥å¿—è®°å½•**
```json
{
  "timestamp": "2025-09-17T10:30:00Z",
  "collector_id": "web-server-001",
  "action": "data_upload",
  "source_ip": "192.168.1.100",
  "data_size": 1048576,
  "success": true,
  "auth_method": "api_key"
}
```

---

## 9. ğŸ“‹ æ•°æ®æ ¼å¼ç»Ÿä¸€åŒ–


### 9.1 æ ‡å‡†æ•°æ®æ ¼å¼


**ğŸ“Š æŒ‡æ ‡æ•°æ®æ ¼å¼**
```json
{
  "timestamp": 1726574200,
  "metric_name": "cpu.usage.percent",
  "value": 85.2,
  "tags": {
    "host": "web-server-01",
    "env": "production",
    "region": "us-east-1"
  },
  "fields": {
    "user": 45.1,
    "system": 30.1,
    "idle": 14.8
  }
}
```

### 9.2 æ•°æ®æ¨¡å‹æ ‡å‡†åŒ–


**ğŸ·ï¸ æ ‡ç­¾è§„èŒƒ**
```yaml
# æ ‡ç­¾å‘½åè§„èŒƒ
tag_naming:
  required_tags:    # å¿…é€‰æ ‡ç­¾
    - host          # ä¸»æœºå
    - env           # ç¯å¢ƒï¼ˆprod/test/devï¼‰
    - service       # æœåŠ¡åç§°
    
  optional_tags:    # å¯é€‰æ ‡ç­¾
    - region        # åœ°ç†åŒºåŸŸ
    - datacenter    # æ•°æ®ä¸­å¿ƒ
    - version       # ç‰ˆæœ¬å·
    
  naming_rules:     # å‘½åè§„åˆ™
    - lowercase     # å…¨éƒ¨å°å†™
    - underscore    # ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”
    - no_spaces     # ä¸èƒ½åŒ…å«ç©ºæ ¼
```

### 9.3 æ•°æ®æ ¡éªŒ


**âœ… æ•°æ®è´¨é‡æ£€æŸ¥**
```python
class DataValidator:
    def validate_metric(self, metric):
        """éªŒè¯æŒ‡æ ‡æ•°æ®æ ¼å¼"""
        checks = [
            self.check_timestamp(metric),
            self.check_metric_name(metric),
            self.check_value_type(metric),
            self.check_required_tags(metric)
        ]
        return all(checks)
    
    def check_timestamp(self, metric):
        """æ£€æŸ¥æ—¶é—´æˆ³æœ‰æ•ˆæ€§"""
        timestamp = metric.get('timestamp')
        if not timestamp or not isinstance(timestamp, int):
            return False
        # æ—¶é—´æˆ³ä¸èƒ½å¤ªæ—§æˆ–å¤ªæ–°
        now = time.time()
        return abs(now - timestamp) < 3600  # 1å°æ—¶å†…
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ é‡‡é›†æ¶æ„ï¼šæ•°æ®é‡‡é›†æ˜¯ç›‘æ§ç³»ç»Ÿçš„æ•°æ®æ„ŸçŸ¥å±‚
ğŸ”¸ éƒ¨ç½²æ¨¡å¼ï¼šAgentã€Agentlessã€Pushã€Pullå„æœ‰ä¼˜åŠ£
ğŸ”¸ é¢‘ç‡å¹³è¡¡ï¼šé‡‡é›†é¢‘ç‡ä¸ç³»ç»Ÿå¼€é”€éœ€è¦æƒè¡¡
ğŸ”¸ é«˜å¯ç”¨æ€§ï¼šä¸»å¤‡æ¨¡å¼å’Œè´Ÿè½½å‡è¡¡ä¿éšœå¯é æ€§
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡å¤„ç†ã€å‹ç¼©ä¼ è¾“æå‡æ•ˆç‡
ğŸ”¸ é…ç½®ç®¡ç†ï¼šç‰ˆæœ¬æ§åˆ¶å’ŒåŠ¨æ€æ›´æ–°ç¡®ä¿çµæ´»æ€§
ğŸ”¸ å®‰å…¨é˜²æŠ¤ï¼šè®¤è¯åŠ å¯†ä¿æŠ¤æ•°æ®ä¼ è¾“å®‰å…¨
ğŸ”¸ æ ¼å¼ç»Ÿä¸€ï¼šæ ‡å‡†åŒ–æ•°æ®æ ¼å¼ä¾¿äºå¤„ç†åˆ†æ
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é‡‡é›†æ¨¡å¼é€‰æ‹©ç­–ç•¥**
```
å¤§è§„æ¨¡ç¯å¢ƒ + è¯¦ç»†ç›‘æ§ â†’ Agentæ¨¡å¼
å¼‚æ„ç¯å¢ƒ + å¿«é€Ÿæ¥å…¥ â†’ Agentlessæ¨¡å¼  
å®æ—¶æ€§è¦æ±‚é«˜ â†’ Pushæ¨¡å¼
é›†ä¸­æ§åˆ¶éœ€æ±‚ â†’ Pullæ¨¡å¼
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒæ€è·¯**
```
å‡å°‘ç³»ç»Ÿè°ƒç”¨ â†’ æ‰¹é‡é‡‡é›†å’Œä¼ è¾“
é™ä½ç½‘ç»œå¼€é”€ â†’ æ•°æ®å‹ç¼©å’Œåè®®ä¼˜åŒ–
æ§åˆ¶èµ„æºå ç”¨ â†’ é‡‡é›†é¢‘ç‡åŠ¨æ€è°ƒæ•´
æé«˜å¤„ç†æ•ˆç‡ â†’ å¼‚æ­¥å¤„ç†å’Œç¼“å­˜æœºåˆ¶
```

**ğŸ”¹ é«˜å¯ç”¨è®¾è®¡è¦ç‚¹**
```
æ•…éšœæ£€æµ‹ â†’ å¤šç»´åº¦å¥åº·æ£€æŸ¥
å¿«é€Ÿæ¢å¤ â†’ è‡ªåŠ¨æ•…éšœè½¬ç§»æœºåˆ¶  
æ•°æ®å®Œæ•´ â†’ é˜²é‡å¤å’Œä¸€è‡´æ€§ä¿éšœ
èµ„æºéš”ç¦» â†’ åˆ†ç»„éƒ¨ç½²å’Œè´Ÿè½½å‡è¡¡
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ ä¼ä¸šçº§éƒ¨ç½²å»ºè®®**
- **å°å‹ç¯å¢ƒï¼ˆ< 100å°ï¼‰**ï¼šAgentæ¨¡å¼ + Pushä¼ è¾“
- **ä¸­å‹ç¯å¢ƒï¼ˆ100-1000å°ï¼‰**ï¼šæ··åˆæ¨¡å¼ + è´Ÿè½½å‡è¡¡
- **å¤§å‹ç¯å¢ƒï¼ˆ> 1000å°ï¼‰**ï¼šåˆ†å±‚æ¶æ„ + å¤šçº§æ±‡èš

**ğŸ”§ è¿ç»´å®è·µè¦ç‚¹**
- **ç›‘æ§é‡‡é›†å™¨æœ¬èº«**ï¼šé¿å…ç›‘æ§ç³»ç»Ÿæˆä¸ºå•ç‚¹æ•…éšœ
- **æ¢¯åº¦å‘Šè­¦ç­–ç•¥**ï¼šæ ¹æ®é‡è¦æ€§è®¾ç½®ä¸åŒé‡‡é›†é¢‘ç‡
- **å®¹é‡è§„åˆ’**ï¼šæå‰è¯„ä¼°æ•°æ®é‡å¢é•¿å¯¹ç³»ç»Ÿçš„å½±å“
- **å®‰å…¨åŠ å›º**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨è®¤è¯å’ŒåŠ å¯†

**ğŸ§  è®°å¿†æŠ€å·§**
- **é‡‡é›†æ¶æ„å››è¦ç´ **ï¼šéƒ¨ç½²ã€ä¼ è¾“ã€å­˜å‚¨ã€å®‰å…¨
- **æ€§èƒ½ä¼˜åŒ–ä¸‰ç»´åº¦**ï¼šæ—¶é—´ï¼ˆé¢‘ç‡ï¼‰ã€ç©ºé—´ï¼ˆå‹ç¼©ï¼‰ã€ç½‘ç»œï¼ˆåè®®ï¼‰
- **é«˜å¯ç”¨ä¸‰ä¿éšœ**ï¼šå†—ä½™ã€æ£€æµ‹ã€æ¢å¤

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
é‡‡é›†æ¶æ„è¿å››æ–¹ï¼ŒAgentæ¨æ‹‰å„æ“…é•¿
é¢‘ç‡ç²¾åº¦è¦å¹³è¡¡ï¼Œé«˜å¯ç”¨æ€§ä¸èƒ½å¿˜  
æ€§èƒ½ä¼˜åŒ–ä¸‰ç»´åº¦ï¼Œé…ç½®ç®¡ç†ç‰ˆæœ¬å¼º
å®‰å…¨åŠ å¯†ä¿ä¼ è¾“ï¼Œæ ¼å¼ç»Ÿä¸€ä¾¿å­˜æ”¾
```