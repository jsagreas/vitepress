---
title: 8ã€ç›‘æ§å¹³å°é›†æˆä¸APIè®¾è®¡
---
## ğŸ“š ç›®å½•


1. [REST APIè®¾è®¡ä¸è§„èŒƒ](#1-rest-apiè®¾è®¡ä¸è§„èŒƒ)
2. [ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆæ¥å£](#2-ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆæ¥å£)
3. [æ•°æ®å¯¼å…¥å¯¼å‡ºæœºåˆ¶](#3-æ•°æ®å¯¼å…¥å¯¼å‡ºæœºåˆ¶)
4. [ç›‘æ§å¹³å°SSOé›†æˆ](#4-ç›‘æ§å¹³å°ssoé›†æˆ)
5. [APIé™æµä¸å®‰å…¨æ§åˆ¶](#5-apié™æµä¸å®‰å…¨æ§åˆ¶)
6. [æ•°æ®æ ¼å¼æ ‡å‡†åŒ–](#6-æ•°æ®æ ¼å¼æ ‡å‡†åŒ–)
7. [é›†æˆæµ‹è¯•ä¸éªŒè¯](#7-é›†æˆæµ‹è¯•ä¸éªŒè¯)
8. [APIæ–‡æ¡£ä¸SDKæä¾›](#8-apiæ–‡æ¡£ä¸sdkæä¾›)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ REST APIè®¾è®¡ä¸è§„èŒƒ



### 1.1 REST APIåŸºæœ¬æ¦‚å¿µ



**ä»€ä¹ˆæ˜¯REST APIï¼Ÿ**
> REST APIå°±åƒ"é¤å…çš„èœå•ç³»ç»Ÿ"ï¼Œè§„å®šäº†å®¢æˆ·å¦‚ä½•"ç‚¹èœ"ï¼ˆè¯·æ±‚èµ„æºï¼‰ã€æœåŠ¡å‘˜å¦‚ä½•"ä¸Šèœ"ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼Œä»¥åŠæ•´ä¸ªæµç¨‹çš„æ ‡å‡†åŒ–æ“ä½œæ–¹å¼ã€‚

```
RESTè®¾è®¡ç†å¿µï¼š
èµ„æºå¯¼å‘ â† æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½çœ‹ä½œ"èµ„æº"
ç»Ÿä¸€æ¥å£ â† ç”¨æ ‡å‡†çš„HTTPæ–¹æ³•æ“ä½œ
æ— çŠ¶æ€æ€§ â† æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„
åˆ†å±‚æ¶æ„ â† å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“æœåŠ¡ç«¯å†…éƒ¨ç»“æ„
```

### 1.2 ç›‘æ§APIèµ„æºè®¾è®¡



#### ğŸ¯ æ ¸å¿ƒèµ„æºå®šä¹‰


```
ç›‘æ§å¹³å°çš„æ ¸å¿ƒèµ„æºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/v1/hosts          â† ä¸»æœºèµ„æº       â”‚
â”‚ /api/v1/metrics        â† æŒ‡æ ‡æ•°æ®       â”‚
â”‚ /api/v1/alerts         â† å‘Šè­¦ä¿¡æ¯       â”‚
â”‚ /api/v1/dashboards     â† ä»ªè¡¨æ¿é…ç½®     â”‚
â”‚ /api/v1/users          â† ç”¨æˆ·ç®¡ç†       â”‚
â”‚ /api/v1/groups         â† ç”¨æˆ·ç»„ç®¡ç†     â”‚
â”‚ /api/v1/notifications  â† é€šçŸ¥é…ç½®       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ”¸ URLå‘½åè§„èŒƒ



**èµ„æºå‘½åæœ€ä½³å®è·µï¼š**
- **åè¯å¤æ•°å½¢å¼**ï¼š`/hosts` è€Œä¸æ˜¯ `/host`
- **å±‚çº§å…³ç³»æ¸…æ™°**ï¼š`/hosts/123/metrics` è¡¨ç¤ºä¸»æœº123çš„æŒ‡æ ‡
- **é¿å…åŠ¨è¯**ï¼šç”¨HTTPæ–¹æ³•è¡¨è¾¾æ“ä½œï¼ŒURLåªè¡¨è¾¾èµ„æº

```http
âœ… å¥½çš„è®¾è®¡ï¼š
GET /api/v1/hosts/123/metrics?start=1hour&end=now
POST /api/v1/alerts
PUT /api/v1/dashboards/456
DELETE /api/v1/users/789

âŒ ç³Ÿç³•çš„è®¾è®¡ï¼š
GET /api/v1/getHostMetrics?hostId=123
POST /api/v1/createAlert
PUT /api/v1/updateDashboard?id=456
```

### 1.3 HTTPæ–¹æ³•æ ‡å‡†åŒ–ä½¿ç”¨



```
HTTPæ–¹æ³•çš„ç›‘æ§åœºæ™¯åº”ç”¨ï¼š

GET     â† æŸ¥è¯¢èµ„æºï¼ˆå®‰å…¨ã€å¹‚ç­‰ï¼‰
POST    â† åˆ›å»ºèµ„æºï¼ˆéå¹‚ç­‰ï¼‰
PUT     â† å®Œæ•´æ›´æ–°èµ„æºï¼ˆå¹‚ç­‰ï¼‰
PATCH   â† éƒ¨åˆ†æ›´æ–°èµ„æºï¼ˆå¹‚ç­‰ï¼‰
DELETE  â† åˆ é™¤èµ„æºï¼ˆå¹‚ç­‰ï¼‰
HEAD    â† æ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨
OPTIONS â† æŸ¥è¯¢æ”¯æŒçš„æ“ä½œæ–¹æ³•
```

**å®é™…åº”ç”¨ç¤ºä¾‹ï¼š**
```http
# è·å–æ‰€æœ‰ä¸»æœºåˆ—è¡¨

GET /api/v1/hosts
â†’ è¿”å›ä¸»æœºæ•°ç»„

# è·å–ç‰¹å®šä¸»æœºä¿¡æ¯

GET /api/v1/hosts/web-server-01
â†’ è¿”å›å•ä¸ªä¸»æœºè¯¦ç»†ä¿¡æ¯

# åˆ›å»ºæ–°çš„å‘Šè­¦è§„åˆ™

POST /api/v1/alerts
Content-Type: application/json
{
  "name": "CPUä½¿ç”¨ç‡è¿‡é«˜",
  "condition": "cpu.usage > 80%",
  "severity": "warning"
}

# æ›´æ–°ä»ªè¡¨æ¿é…ç½®

PUT /api/v1/dashboards/system-overview
Content-Type: application/json
{
  "title": "ç³»ç»Ÿæ€»è§ˆ",
  "panels": [...]
}
```

### 1.4 å“åº”çŠ¶æ€ç è§„èŒƒ



```
ç›‘æ§APIå¸¸ç”¨çŠ¶æ€ç ï¼š

2xx æˆåŠŸç±»ï¼š
200 OK          â† GETè¯·æ±‚æˆåŠŸ
201 Created     â† POSTåˆ›å»ºæˆåŠŸ
204 No Content  â† DELETEæˆåŠŸï¼ŒPUTæ›´æ–°æˆåŠŸ

4xx å®¢æˆ·ç«¯é”™è¯¯ï¼š
400 Bad Request     â† è¯·æ±‚å‚æ•°é”™è¯¯
401 Unauthorized    â† æœªè®¤è¯
403 Forbidden       â† æ— æƒé™
404 Not Found       â† èµ„æºä¸å­˜åœ¨
409 Conflict        â† èµ„æºå†²çªï¼ˆå¦‚é‡åï¼‰
422 Unprocessable   â† å‚æ•°éªŒè¯å¤±è´¥

5xx æœåŠ¡å™¨é”™è¯¯ï¼š
500 Internal Server Error  â† æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
502 Bad Gateway           â† ä¸Šæ¸¸æœåŠ¡é”™è¯¯
503 Service Unavailable   â† æœåŠ¡æš‚ä¸å¯ç”¨
```

### 1.5 åˆ†é¡µä¸è¿‡æ»¤è®¾è®¡



#### ğŸ”¸ åˆ†é¡µå‚æ•°æ ‡å‡†åŒ–


```http
# åŸºäºåç§»é‡çš„åˆ†é¡µ

GET /api/v1/hosts?page=2&size=20&sort=created_at:desc

# åŸºäºæ¸¸æ ‡çš„åˆ†é¡µï¼ˆæ¨èç”¨äºå¤§æ•°æ®é‡ï¼‰

GET /api/v1/metrics?cursor=eyJpZCI6MTIzfQ&limit=100

# å“åº”åŒ…å«åˆ†é¡µä¿¡æ¯

{
  "data": [...],
  "pagination": {
    "page": 2,
    "size": 20,
    "total": 1500,
    "has_next": true,
    "has_prev": true
  }
}
```

#### ğŸ”¸ è¿‡æ»¤å’Œæœç´¢


```http
# å¤šæ¡ä»¶è¿‡æ»¤

GET /api/v1/hosts?status=online&type=web&location=beijing

# æ—¶é—´èŒƒå›´æŸ¥è¯¢

GET /api/v1/metrics?start=2024-01-01T00:00:00Z&end=2024-01-02T00:00:00Z

# å…¨æ–‡æœç´¢

GET /api/v1/alerts?search=cpu&fields=name,description

# å­—æ®µé€‰æ‹©ï¼ˆå‡å°‘æ•°æ®ä¼ è¾“ï¼‰

GET /api/v1/hosts?fields=id,name,status,cpu_usage
```

---

## 2. ğŸ”— ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆæ¥å£



### 2.1 é›†æˆæ¶æ„è®¾è®¡



**ç›‘æ§å¹³å°çš„é›†æˆç”Ÿæ€ï¼š**
```
                ç›‘æ§å¹³å°æ ¸å¿ƒ
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
    å‘Šè­¦ç³»ç»Ÿ      CMDBç³»ç»Ÿ     è¿ç»´å·¥å…·
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚PagerDutyâ”‚  â”‚ServiceNowâ”‚ â”‚Jenkins  â”‚
   â”‚é’‰é’‰å‘Šè­¦  â”‚  â”‚èµ„äº§ç®¡ç†  â”‚  â”‚è‡ªåŠ¨åŒ–   â”‚
   â”‚å¾®ä¿¡ä¼ä¸šç‰ˆâ”‚  â”‚é…ç½®ä¸­å¿ƒ  â”‚  â”‚Ansible  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
    â”‚     ç»Ÿä¸€é›†æˆæ¥å£å±‚              â”‚
    â”‚   - è®¤è¯æˆæƒ                   â”‚
    â”‚   - æ•°æ®è½¬æ¢                   â”‚
    â”‚   - é”™è¯¯å¤„ç†                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å¸¸è§é›†æˆåœºæ™¯



#### ğŸ”¸ å‘Šè­¦ç³»ç»Ÿé›†æˆ


```json
// Webhookå‘Šè­¦æ¨é€æ¥å£
POST /api/v1/integrations/alerts/webhook
{
  "endpoint": "https://hooks.slack.com/services/...",
  "auth_type": "bearer_token",
  "auth_config": {
    "token": "xoxb-1234567890"
  },
  "message_template": {
    "text": "å‘Šè­¦ï¼š{{alert.name}}",
    "severity": "{{alert.level}}",
    "host": "{{alert.host}}"
  }
}

// ä¼ä¸šå¾®ä¿¡é›†æˆ
POST /api/v1/integrations/wechat
{
  "corp_id": "wx123456789",
  "agent_id": 1000001,
  "secret": "secret_key",
  "template": "markdown"
}
```

#### ğŸ”¸ CMDBç³»ç»Ÿé›†æˆ


```http
# ä»CMDBåŒæ­¥ä¸»æœºä¿¡æ¯

GET /api/v1/integrations/cmdb/hosts
Authorization: Bearer cmdb_token

# å‘CMDBæ¨é€ç›‘æ§çŠ¶æ€

POST /api/v1/integrations/cmdb/status
{
  "host_id": "server-001",
  "status": "healthy",
  "metrics": {
    "cpu_usage": 45.2,
    "memory_usage": 67.8,
    "disk_usage": 23.1
  },
  "last_update": "2024-09-17T10:30:00Z"
}
```

### 2.3 é›†æˆé€‚é…å™¨æ¨¡å¼



**é€‚é…å™¨è®¾è®¡æ€è·¯ï¼š**
> å°±åƒ"ä¸‡èƒ½è½¬æ¢æ’å¤´"ï¼Œä¸åŒçš„è®¾å¤‡ç”¨ä¸åŒçš„æ’å¤´ï¼Œä½†é€šè¿‡è½¬æ¢å™¨éƒ½èƒ½æ¥åˆ°åŒä¸€ä¸ªç”µæºä¸Šã€‚

```
é›†æˆé€‚é…å™¨æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›‘æ§å¹³å° API ç½‘å…³                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€šç”¨é€‚é…å™¨æ¥å£                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Slacké€‚é…å™¨ â”‚ é’‰é’‰é€‚é…å™¨ â”‚ ä¼ä¸šå¾®ä¿¡é€‚é…å™¨ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CMDBé€‚é…å™¨  â”‚ ITSMé€‚é…å™¨ â”‚ è‡ªåŠ¨åŒ–é€‚é…å™¨   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€‚é…å™¨æ¥å£å®šä¹‰ï¼š**
```python
# æŠ½è±¡é€‚é…å™¨æ¥å£

class IntegrationAdapter:
    def authenticate(self, credentials):
        """ç»Ÿä¸€è®¤è¯æ¥å£"""
        pass
    
    def send_alert(self, alert_data):
        """å‘é€å‘Šè­¦"""
        pass
    
    def sync_data(self, data_type, filters):
        """æ•°æ®åŒæ­¥"""
        pass
    
    def health_check(self):
        """å¥åº·æ£€æŸ¥"""
        pass

# å…·ä½“å®ç°ç¤ºä¾‹

class SlackAdapter(IntegrationAdapter):
    def send_alert(self, alert_data):
#        # è½¬æ¢ä¸ºSlackæ¶ˆæ¯æ ¼å¼
        slack_message = {
            "channel": "#alerts",
            "text": f"ğŸš¨ {alert_data['title']}",
            "color": "danger" if alert_data['severity'] == "critical" else "warning"
        }
#        # å‘é€åˆ°Slack API
        return self.slack_client.post_message(slack_message)
```

### 2.4 é›†æˆé…ç½®ç®¡ç†



```json
// é›†æˆé…ç½®æ•°æ®ç»“æ„
{
  "integrations": {
    "slack": {
      "enabled": true,
      "config": {
        "webhook_url": "https://hooks.slack.com/...",
        "channel": "#monitoring",
        "username": "ç›‘æ§æœºå™¨äºº"
      },
      "alert_rules": [
        {
          "severity": "critical",
          "channels": ["#critical-alerts", "#oncall"]
        }
      ]
    },
    "cmdb": {
      "enabled": true,
      "config": {
        "api_endpoint": "https://cmdb.company.com/api",
        "auth_token": "encrypted_token",
        "sync_interval": "5m"
      },
      "sync_rules": {
        "hosts": true,
        "applications": true,
        "dependencies": false
      }
    }
  }
}
```

---

## 3. ğŸ“Š æ•°æ®å¯¼å…¥å¯¼å‡ºæœºåˆ¶



### 3.1 æ•°æ®å¯¼å…¥å¯¼å‡ºæ¦‚å¿µ



**ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å¯¼å…¥å¯¼å‡ºï¼Ÿ**
> å°±åƒ"æ¬å®¶æ—¶çš„æ‰“åŒ…è£…ç®±"ï¼Œéœ€è¦æŠŠç›‘æ§æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹"æ¬"åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ–è€…å¤‡ä»½é‡è¦æ•°æ®ä»¥é˜²ä¸¢å¤±ã€‚

```
æ•°æ®å¯¼å…¥å¯¼å‡ºçš„å…¸å‹åœºæ™¯ï¼š
å¤‡ä»½æ¢å¤ â† å®šæœŸå¤‡ä»½ç›‘æ§é…ç½®å’Œå†å²æ•°æ®
å¹³å°è¿ç§» â† ä»ä¸€ä¸ªç›‘æ§ç³»ç»Ÿè¿ç§»åˆ°å¦ä¸€ä¸ª
æ•°æ®åˆ†æ â† å¯¼å‡ºæ•°æ®è¿›è¡Œç¦»çº¿åˆ†æ
åˆè§„å®¡è®¡ â† å¯¼å‡ºæ—¥å¿—ç”¨äºåˆè§„æ£€æŸ¥
ç¾éš¾æ¢å¤ â† å¿«é€Ÿæ¢å¤ç›‘æ§ç³»ç»Ÿé…ç½®
```

### 3.2 é…ç½®æ•°æ®å¯¼å…¥å¯¼å‡º



#### ğŸ”¸ ä»ªè¡¨æ¿é…ç½®å¯¼å‡º


```json
// å¯¼å‡ºä»ªè¡¨æ¿é…ç½®
GET /api/v1/dashboards/export?dashboard_ids=1,2,3

{
  "version": "2.0",
  "export_time": "2024-09-17T10:30:00Z",
  "dashboards": [
    {
      "id": "system-overview",
      "title": "ç³»ç»Ÿæ€»è§ˆ",
      "panels": [
        {
          "type": "graph",
          "title": "CPUä½¿ç”¨ç‡",
          "metrics": ["system.cpu.usage"],
          "timespan": "1h"
        }
      ],
      "variables": [
        {
          "name": "host",
          "type": "query",
          "query": "SELECT DISTINCT host FROM metrics"
        }
      ]
    }
  ]
}
```

#### ğŸ”¸ å‘Šè­¦è§„åˆ™å¯¼å…¥å¯¼å‡º


```http
# æ‰¹é‡å¯¼å‡ºå‘Šè­¦è§„åˆ™

GET /api/v1/alerts/export?format=json

# å¯¼å…¥å‘Šè­¦è§„åˆ™

POST /api/v1/alerts/import
Content-Type: application/json
{
  "rules": [
    {
      "name": "é«˜CPUä½¿ç”¨ç‡",
      "condition": "avg(cpu.usage) > 80",
      "duration": "5m",
      "labels": {
        "severity": "warning",
        "team": "infrastructure"
      },
      "annotations": {
        "summary": "CPUä½¿ç”¨ç‡æŒç»­5åˆ†é’Ÿè¶…è¿‡80%"
      }
    }
  ],
  "import_options": {
    "overwrite_existing": false,
    "validate_before_import": true
  }
}
```

### 3.3 ç›‘æ§æ•°æ®å¯¼å‡º



#### ğŸ”¸ æŒ‡æ ‡æ•°æ®å¯¼å‡º


```http
# æŒ‰æ—¶é—´èŒƒå›´å¯¼å‡ºæŒ‡æ ‡æ•°æ®

GET /api/v1/metrics/export
?start=2024-09-01T00:00:00Z
&end=2024-09-17T23:59:59Z
&metrics=cpu.usage,memory.usage,disk.usage
&format=csv
&compression=gzip

# æµå¼å¯¼å‡ºå¤§é‡æ•°æ®

GET /api/v1/metrics/export/stream
Content-Type: application/x-ndjson
```

**å¯¼å‡ºæ ¼å¼æ”¯æŒï¼š**
```
æ”¯æŒçš„å¯¼å‡ºæ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ ¼å¼       â”‚ é€‚ç”¨åœºæ™¯    â”‚ å‹ç¼©æ”¯æŒ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ JSON       â”‚ APIé›†æˆ     â”‚ gzip, brotli â”‚
â”‚ CSV        â”‚ Excelåˆ†æ   â”‚ gzip         â”‚
â”‚ Parquet    â”‚ å¤§æ•°æ®åˆ†æ  â”‚ å†…å»ºå‹ç¼©     â”‚
â”‚ PromQL     â”‚ Prometheus  â”‚ gzip         â”‚
â”‚ InfluxDB   â”‚ æ—¶åºæ•°æ®åº“  â”‚ snappy       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 å¢é‡åŒæ­¥æœºåˆ¶



```http
# å¢é‡å¯¼å‡ºï¼ˆåŸºäºæ—¶é—´æˆ³ï¼‰

GET /api/v1/data/export/incremental
?since=2024-09-17T08:00:00Z
&types=metrics,alerts,events

{
  "checkpoint": "2024-09-17T10:30:00Z",
  "data": {
    "metrics": [...],
    "alerts": [...],
    "events": [...]
  },
  "next_checkpoint": "2024-09-17T10:35:00Z",
  "has_more": true
}

# åŸºäºç‰ˆæœ¬å·çš„å¢é‡åŒæ­¥

GET /api/v1/config/export/delta
?version=v1.2.3

{
  "current_version": "v1.2.5",
  "changes": [
    {
      "type": "dashboard_updated",
      "resource_id": "system-overview",
      "timestamp": "2024-09-17T09:15:00Z"
    }
  ]
}
```

### 3.5 æ•°æ®å¯¼å…¥éªŒè¯



```json
// å¯¼å…¥å‰éªŒè¯æ¥å£
POST /api/v1/data/import/validate
{
  "data_type": "dashboard_config",
  "data": {...},
  "validation_rules": [
    "schema_validation",
    "dependency_check",
    "permission_check"
  ]
}

// éªŒè¯ç»“æœ
{
  "valid": false,
  "errors": [
    {
      "field": "panels[0].metrics",
      "message": "æŒ‡æ ‡ 'invalid.metric' ä¸å­˜åœ¨",
      "severity": "error"
    }
  ],
  "warnings": [
    {
      "field": "variables[0].query",
      "message": "æŸ¥è¯¢æ€§èƒ½å¯èƒ½è¾ƒä½ï¼Œå»ºè®®æ·»åŠ ç´¢å¼•",
      "severity": "warning"
    }
  ]
}
```

---

## 4. ğŸ” ç›‘æ§å¹³å°SSOé›†æˆ



### 4.1 SSOé›†æˆåŸºæœ¬æ¦‚å¿µ



**ä»€ä¹ˆæ˜¯SSOï¼Ÿ**
> SSOï¼ˆSingle Sign-Onï¼‰å°±åƒ"ä¸€å¼ é€šè¡Œè¯èµ°éå…¨å…¬å¸"ï¼Œå‘˜å·¥åªéœ€è¦ç™»å½•ä¸€æ¬¡ï¼Œå°±èƒ½è®¿é—®æ‰€æœ‰æˆæƒçš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç›‘æ§å¹³å°ã€‚

```
SSOé›†æˆçš„ä»·å€¼ï¼š
ç”¨æˆ·ä½“éªŒ â† ä¸€æ¬¡ç™»å½•ï¼Œéšå¤„è®¿é—®
å®‰å…¨ç®¡ç† â† é›†ä¸­çš„è®¤è¯å’Œæˆæƒ
æˆæœ¬é™ä½ â† å‡å°‘å¯†ç ç®¡ç†æˆæœ¬
åˆè§„è¦æ±‚ â† æ»¡è¶³ä¼ä¸šå®‰å…¨ç­–ç•¥
```

### 4.2 ä¸»æµSSOåè®®æ”¯æŒ



#### ğŸ”¸ SAML 2.0 é›†æˆ


```xml
<!-- SAMLæ–­è¨€ç¤ºä¾‹ -->
<saml2:Assertion>
  <saml2:Subject>
    <saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">
      user@company.com
    </saml2:NameID>
  </saml2:Subject>
  <saml2:AttributeStatement>
    <saml2:Attribute Name="groups">
      <saml2:AttributeValue>monitoring-admin</saml2:AttributeValue>
      <saml2:AttributeValue>operations-team</saml2:AttributeValue>
    </saml2:Attribute>
  </saml2:AttributeStatement>
</saml2:Assertion>
```

**SAMLé…ç½®æ¥å£ï¼š**
```http
POST /api/v1/auth/saml/config
{
  "idp_metadata_url": "https://idp.company.com/metadata",
  "sp_entity_id": "monitoring.company.com",
  "attribute_mapping": {
    "email": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress",
    "groups": "http://schemas.microsoft.com/ws/2008/06/identity/claims/groups",
    "display_name": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"
  },
  "role_mapping": {
    "monitoring-admin": "admin",
    "operations-team": "operator",
    "developers": "viewer"
  }
}
```

#### ğŸ”¸ OAuth 2.0 / OpenID Connect


```http
# OAuthæˆæƒæµç¨‹

GET /api/v1/auth/oauth/authorize
?response_type=code
&client_id=monitoring_platform
&redirect_uri=https://monitoring.company.com/callback
&scope=openid profile email groups

# ä»¤ç‰Œäº¤æ¢

POST /api/v1/auth/oauth/token
{
  "grant_type": "authorization_code",
  "code": "auth_code_from_provider",
  "client_id": "monitoring_platform",
  "client_secret": "client_secret",
  "redirect_uri": "https://monitoring.company.com/callback"
}
```

### 4.3 LDAP/ADé›†æˆ



```http
# LDAPé…ç½®

POST /api/v1/auth/ldap/config
{
  "server_url": "ldaps://ldap.company.com:636",
  "bind_dn": "cn=monitoring,ou=service-accounts,dc=company,dc=com",
  "bind_password": "encrypted_password",
  "base_dn": "dc=company,dc=com",
  "user_filter": "(&(objectClass=person)(uid=%s))",
  "group_filter": "(&(objectClass=groupOfNames)(member=%s))",
  "attributes": {
    "username": "uid",
    "email": "mail",
    "display_name": "displayName",
    "groups": "memberOf"
  }
}
```

**LDAPç”¨æˆ·åŒæ­¥ï¼š**
```http
# æ‰‹åŠ¨åŒæ­¥ç”¨æˆ·

POST /api/v1/auth/ldap/sync
{
  "sync_type": "incremental",
  "filters": {
    "department": "IT",
    "status": "active"
  }
}

# è‡ªåŠ¨åŒæ­¥é…ç½®

PUT /api/v1/auth/ldap/auto-sync
{
  "enabled": true,
  "interval": "1h",
  "sync_deleted_users": true,
  "default_role": "viewer"
}
```

### 4.4 å¤šç§Ÿæˆ·æƒé™ç®¡ç†



```json
// ç»„ç»‡æ¶æ„æƒé™é…ç½®
{
  "organizations": [
    {
      "id": "dev-team",
      "name": "å¼€å‘å›¢é˜Ÿ",
      "permissions": {
        "dashboards": ["view", "edit"],
        "alerts": ["view", "create"],
        "hosts": ["view"],
        "admin": false
      },
      "resource_filters": {
        "hosts": "environment=dev",
        "metrics": "namespace=development"
      }
    }
  ],
  "role_hierarchy": {
    "admin": ["operator", "viewer"],
    "operator": ["viewer"],
    "viewer": []
  }
}
```

---

## 5. ğŸ›¡ï¸ APIé™æµä¸å®‰å…¨æ§åˆ¶



### 5.1 APIé™æµåŸºæœ¬åŸç†



**ä¸ºä»€ä¹ˆéœ€è¦APIé™æµï¼Ÿ**
> APIé™æµå°±åƒ"æ™¯åŒºé™æµ"ï¼Œé˜²æ­¢è¿‡å¤šæ¸¸å®¢åŒæ—¶æ¶Œå…¥é€ æˆæ‹¥æŒ¤ï¼Œç¡®ä¿æ¯ä¸ªæ¸¸å®¢éƒ½æœ‰è‰¯å¥½çš„æ¸¸è§ˆä½“éªŒã€‚

```
é™æµçš„æ ¸å¿ƒç›®æ ‡ï¼š
ç³»ç»Ÿç¨³å®šæ€§ â† é˜²æ­¢ç³»ç»Ÿè¿‡è½½å´©æºƒ
èµ„æºå…¬å¹³æ€§ â† é˜²æ­¢æŸäº›ç”¨æˆ·å ç”¨è¿‡å¤šèµ„æº
å®‰å…¨é˜²æŠ¤  â† é˜²æ­¢DDoSå’ŒAPIæ»¥ç”¨æ”»å‡»
æˆæœ¬æ§åˆ¶  â† æ§åˆ¶åŸºç¡€è®¾æ–½æˆæœ¬
```

### 5.2 é™æµç­–ç•¥è®¾è®¡



#### ğŸ”¸ ä»¤ç‰Œæ¡¶ç®—æ³•


```
ä»¤ç‰Œæ¡¶åŸç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»¤ç‰Œæ¡¶ (å›ºå®šå®¹é‡)                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚Tokenâ”‚ â”‚Tokenâ”‚ â”‚Tokenâ”‚ â”‚Tokenâ”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘                    â†“
   å›ºå®šé€Ÿç‡äº§ç”Ÿä»¤ç‰Œ        è¯·æ±‚æ¶ˆè€—ä»¤ç‰Œ

ä¼˜ç‚¹ï¼šå…è®¸çªå‘æµé‡ï¼ˆæ¡¶å†…æœ‰ä»¤ç‰Œæ—¶ï¼‰
ç¼ºç‚¹ï¼šå®ç°ç¨å¤æ‚
```

```http
# APIé™æµé…ç½®

PUT /api/v1/rate-limits
{
  "policies": [
    {
      "name": "api_user_limit",
      "algorithm": "token_bucket",
      "capacity": 100,
      "refill_rate": 10,
      "window": "1m",
      "scope": "user"
    },
    {
      "name": "api_global_limit", 
      "algorithm": "sliding_window",
      "limit": 10000,
      "window": "1m",
      "scope": "global"
    }
  ]
}
```

#### ğŸ”¸ æ»‘åŠ¨çª—å£ç®—æ³•


```
æ»‘åŠ¨çª—å£åŸç†ï¼š
æ—¶é—´çº¿: |--1m--|--1m--|--1m--|--1m--|
çª—å£:         [====å½“å‰çª—å£====]
è¯·æ±‚:   â–  â– â– â–     â– â–  â– â– â– â–     â– â– â– 

ç»Ÿè®¡å½“å‰çª—å£å†…çš„è¯·æ±‚æ•°é‡ï¼Œè¶…è¿‡é™åˆ¶åˆ™æ‹’ç»
ä¼˜ç‚¹ï¼šç²¾ç¡®æ§åˆ¶æ—¶é—´çª—å£å†…çš„è¯·æ±‚æ•°
ç¼ºç‚¹ï¼šéœ€è¦å­˜å‚¨æ›´å¤šå†å²æ•°æ®
```

### 5.3 åˆ†å±‚é™æµè®¾è®¡



```
é™æµå±‚æ¬¡è®¾è®¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å…¨å±€é™æµ (ä¿æŠ¤æ•´ä¸ªç³»ç»Ÿ)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ 2. ç”¨æˆ·é™æµ (æŒ‰ç”¨æˆ·IDé™æµ)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. APIé™æµ (æŒ‰æ¥å£è·¯å¾„é™æµ)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. åŠŸèƒ½é™æµ (æŒ‰ä¸šåŠ¡åŠŸèƒ½é™æµ)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸åŒAPIçš„é™æµé…ç½®ï¼š**
```json
{
  "rate_limits": {
    "/api/v1/metrics/query": {
      "burst": 50,
      "sustained": 10,
      "window": "1m"
    },
    "/api/v1/alerts": {
      "burst": 20,
      "sustained": 5,
      "window": "1m"
    },
    "/api/v1/dashboards": {
      "burst": 100,
      "sustained": 30,
      "window": "1m"
    }
  }
}
```

### 5.4 APIå®‰å…¨æ§åˆ¶



#### ğŸ”¸ è®¤è¯ä¸æˆæƒ


```http
# JWT Tokenè®¤è¯

Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# API Keyè®¤è¯

X-API-Key: mon_ak_1234567890abcdef
X-API-Secret: mon_sk_fedcba0987654321

# OAuth 2.0è®¤è¯

Authorization: Bearer oauth_access_token_here
```

**æƒé™æ§åˆ¶çŸ©é˜µï¼š**
```
è§’è‰²æƒé™æ§åˆ¶ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ è§’è‰²\æƒé™   â”‚ æŸ¥çœ‹ â”‚ åˆ›å»º â”‚ ç¼–è¾‘ â”‚ åˆ é™¤ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ Viewer     â”‚  âœ“   â”‚  âœ—   â”‚  âœ—   â”‚  âœ—   â”‚
â”‚ Operator   â”‚  âœ“   â”‚  âœ“   â”‚  âœ“   â”‚  âœ—   â”‚
â”‚ Admin      â”‚  âœ“   â”‚  âœ“   â”‚  âœ“   â”‚  âœ“   â”‚
â”‚ SuperAdmin â”‚  âœ“   â”‚  âœ“   â”‚  âœ“   â”‚  âœ“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ”¸ è¾“å…¥éªŒè¯ä¸è¿‡æ»¤


```http
# å‚æ•°éªŒè¯è§„åˆ™

POST /api/v1/alerts
{
  "name": {
    "required": true,
    "type": "string",
    "min_length": 1,
    "max_length": 100,
    "pattern": "^[a-zA-Z0-9_\\-\\s]+$"
  },
  "threshold": {
    "required": true,
    "type": "number",
    "min": 0,
    "max": 100
  }
}
```

**SQLæ³¨å…¥é˜²æŠ¤ï¼š**
```python
# âŒ å±é™©çš„åšæ³•

query = f"SELECT * FROM metrics WHERE host = '{host_name}'"

# âœ… å®‰å…¨çš„åšæ³•  

query = "SELECT * FROM metrics WHERE host = %s"
cursor.execute(query, (host_name,))
```

### 5.5 å®‰å…¨ç›‘æ§ä¸å®¡è®¡



```http
# APIè°ƒç”¨å®¡è®¡æ—¥å¿—

POST /api/v1/audit/logs
{
  "timestamp": "2024-09-17T10:30:00Z",
  "user_id": "user123",
  "api_endpoint": "/api/v1/alerts",
  "method": "POST",
  "status_code": 201,
  "ip_address": "192.168.1.100",
  "user_agent": "MonitoringClient/1.0",
  "request_size": 1024,
  "response_size": 256,
  "duration_ms": 150
}
```

**å¼‚å¸¸æ£€æµ‹è§„åˆ™ï¼š**
```json
{
  "security_rules": [
    {
      "name": "é«˜é¢‘APIè°ƒç”¨",
      "condition": "api_calls > 1000 in 1m",
      "action": "block_temporary",
      "duration": "5m"
    },
    {
      "name": "å¼‚å¸¸IPè®¿é—®",
      "condition": "new_ip_country != user_country",
      "action": "require_mfa"
    },
    {
      "name": "æ•æ„Ÿæ“ä½œ",
      "condition": "method = DELETE AND path LIKE '/admin/%'",
      "action": "log_alert"
    }
  ]
}
```

---

## 6. ğŸ“‹ æ•°æ®æ ¼å¼æ ‡å‡†åŒ–



### 6.1 æ•°æ®æ ¼å¼æ ‡å‡†åŒ–æ„ä¹‰



**ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®æ ¼å¼æ ‡å‡†åŒ–ï¼Ÿ**
> å°±åƒ"å›½é™…é€šç”¨è¯­è¨€"ï¼Œä¸åŒçš„ç›‘æ§ç»„ä»¶å’Œç³»ç»Ÿéœ€è¦ç”¨ç»Ÿä¸€çš„"è¯­è¨€"äº¤æµï¼Œæ‰èƒ½äº’ç›¸ç†è§£å’Œåä½œã€‚

```
æ ‡å‡†åŒ–çš„å¥½å¤„ï¼š
ç³»ç»Ÿäº’æ“ä½œ â† ä¸åŒç³»ç»Ÿé—´å¯ä»¥æ— ç¼å¯¹æ¥
æ•°æ®ä¸€è‡´æ€§ â† é¿å…æ•°æ®è§£é‡Šæ­§ä¹‰
å¼€å‘æ•ˆç‡  â† å‡å°‘æ ¼å¼è½¬æ¢å¼€å‘å·¥ä½œ
ç»´æŠ¤ç®€åŒ–  â† ç»Ÿä¸€çš„æ•°æ®å¤„ç†é€»è¾‘
```

### 6.2 æŒ‡æ ‡æ•°æ®æ ¼å¼è§„èŒƒ



#### ğŸ”¸ æ—¶åºæ•°æ®æ ‡å‡†æ ¼å¼


```json
// OpenMetricsæ ‡å‡†æ ¼å¼
{
  "metric_family": {
    "name": "http_requests_total",
    "help": "Total number of HTTP requests",
    "type": "COUNTER",
    "unit": "requests"
  },
  "metrics": [
    {
      "labels": {
        "method": "GET",
        "status": "200",
        "endpoint": "/api/health"
      },
      "timestamp": 1694952600000,
      "value": 1247.0
    }
  ]
}

// Prometheusæ ¼å¼å…¼å®¹
http_requests_total{method="GET",status="200",endpoint="/api/health"} 1247 1694952600000
```

#### ğŸ”¸ äº‹ä»¶æ•°æ®æ ¼å¼


```json
// CloudEventsæ ‡å‡†æ ¼å¼
{
  "specversion": "1.0",
  "type": "com.monitoring.alert.fired",
  "source": "monitoring.company.com",
  "id": "alert-12345",
  "time": "2024-09-17T10:30:00Z",
  "datacontenttype": "application/json",
  "data": {
    "alert_name": "é«˜CPUä½¿ç”¨ç‡",
    "severity": "warning",
    "host": "web-server-01",
    "value": 85.2,
    "threshold": 80.0
  }
}
```

### 6.3 å‘Šè­¦æ•°æ®ç»“æ„æ ‡å‡†



```json
// é€šç”¨å‘Šè­¦æ ¼å¼
{
  "alert_id": "alert_cpu_high_20240917_103000",
  "rule_id": "cpu_usage_rule",
  "name": "CPUä½¿ç”¨ç‡è¿‡é«˜",
  "description": "æœåŠ¡å™¨CPUä½¿ç”¨ç‡è¿ç»­5åˆ†é’Ÿè¶…è¿‡80%",
  "severity": "warning",
  "status": "firing",
  "fired_at": "2024-09-17T10:30:00Z",
  "resolved_at": null,
  "labels": {
    "host": "web-server-01",
    "service": "nginx",
    "environment": "production",
    "team": "infrastructure"
  },
  "annotations": {
    "summary": "web-server-01 CPUä½¿ç”¨ç‡è¾¾åˆ°85.2%",
    "description": "å½“å‰CPUä½¿ç”¨ç‡ä¸º85.2%ï¼Œè¶…è¿‡é˜ˆå€¼80%",
    "runbook_url": "https://wiki.company.com/runbooks/high-cpu",
    "dashboard_url": "https://monitoring.company.com/d/cpu-dashboard"
  },
  "metrics": {
    "current_value": 85.2,
    "threshold_value": 80.0,
    "unit": "percent"
  }
}
```

### 6.4 é…ç½®æ•°æ®æ ‡å‡†åŒ–



#### ğŸ”¸ ä»ªè¡¨æ¿é…ç½®æ ¼å¼


```json
{
  "dashboard": {
    "id": "system-overview",
    "version": "1.2.0",
    "title": "ç³»ç»Ÿæ¦‚è§ˆ",
    "description": "ç³»ç»Ÿæ•´ä½“ç›‘æ§ä»ªè¡¨æ¿",
    "tags": ["system", "overview", "infrastructure"],
    "time_range": {
      "from": "now-1h",
      "to": "now"
    },
    "refresh": "30s",
    "panels": [
      {
        "id": "cpu-panel",
        "title": "CPUä½¿ç”¨ç‡",
        "type": "timeseries",
        "position": {"x": 0, "y": 0, "w": 12, "h": 8},
        "targets": [
          {
            "expr": "avg(cpu_usage_percent)",
            "legend": "å¹³å‡CPUä½¿ç”¨ç‡"
          }
        ],
        "thresholds": [
          {"value": 70, "color": "yellow"},
          {"value": 90, "color": "red"}
        ]
      }
    ]
  }
}
```

### 6.5 APIå“åº”æ ¼å¼ç»Ÿä¸€



```json
// ç»Ÿä¸€çš„APIå“åº”æ ¼å¼
{
  "success": true,
  "timestamp": "2024-09-17T10:30:00Z",
  "data": {
    // å®é™…æ•°æ®å†…å®¹
  },
  "meta": {
    "total": 150,
    "page": 1,
    "size": 20,
    "took": 23
  },
  "errors": [],
  "warnings": []
}

// é”™è¯¯å“åº”æ ¼å¼
{
  "success": false,
  "timestamp": "2024-09-17T10:30:00Z",
  "data": null,
  "meta": {},
  "errors": [
    {
      "code": "INVALID_PARAMETER",
      "message": "å‚æ•° 'host' ä¸èƒ½ä¸ºç©º",
      "field": "host",
      "value": null
    }
  ],
  "warnings": []
}
```

**çŠ¶æ€ç ä¸é”™è¯¯ç æ˜ å°„ï¼š**
```
HTTPçŠ¶æ€ç  â†’ ä¸šåŠ¡é”™è¯¯ç æ˜ å°„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚HTTPç    â”‚ ä¸šåŠ¡é”™è¯¯ç       â”‚ åœºæ™¯æè¿°         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 400     â”‚ INVALID_PARAM  â”‚ å‚æ•°éªŒè¯å¤±è´¥     â”‚
â”‚ 401     â”‚ AUTH_REQUIRED  â”‚ éœ€è¦è®¤è¯         â”‚
â”‚ 403     â”‚ ACCESS_DENIED  â”‚ æƒé™ä¸è¶³         â”‚
â”‚ 404     â”‚ RESOURCE_NOT_FOUND â”‚ èµ„æºä¸å­˜åœ¨   â”‚
â”‚ 409     â”‚ RESOURCE_CONFLICT  â”‚ èµ„æºå†²çª     â”‚
â”‚ 422     â”‚ VALIDATION_ERROR   â”‚ æ•°æ®éªŒè¯é”™è¯¯ â”‚
â”‚ 429     â”‚ RATE_LIMIT_EXCEEDEDâ”‚ è¯·æ±‚é¢‘ç‡é™åˆ¶ â”‚
â”‚ 500     â”‚ INTERNAL_ERROR     â”‚ æœåŠ¡å™¨å†…éƒ¨é”™è¯¯â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ğŸ§ª é›†æˆæµ‹è¯•ä¸éªŒè¯



### 7.1 é›†æˆæµ‹è¯•ç­–ç•¥



**é›†æˆæµ‹è¯•çš„é‡è¦æ€§ï¼š**
> å°±åƒ"å½©æ’æ¼”å‡º"ï¼Œåœ¨æ­£å¼ä¸Šçº¿å‰ï¼Œéœ€è¦è®©æ‰€æœ‰ç³»ç»Ÿ"æ¼”ç»ƒ"ä¸€éï¼Œç¡®ä¿å„ä¸ªç»„ä»¶èƒ½å¤Ÿåè°ƒå·¥ä½œã€‚

```
é›†æˆæµ‹è¯•å±‚æ¬¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ E2Eæµ‹è¯• (ç«¯åˆ°ç«¯å®Œæ•´æµç¨‹)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡é›†æˆæµ‹è¯• (è·¨æœåŠ¡äº¤äº’)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ APIé›†æˆæµ‹è¯• (æ¥å£å¥‘çº¦éªŒè¯)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®é›†æˆæµ‹è¯• (æ•°æ®æµéªŒè¯)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 APIé›†æˆæµ‹è¯•



#### ğŸ”¸ æ¥å£å¥‘çº¦æµ‹è¯•


```yaml
# APIå¥‘çº¦æµ‹è¯•é…ç½®

api_tests:
  - name: "è·å–ä¸»æœºåˆ—è¡¨"
    request:
      method: GET
      url: "/api/v1/hosts"
      headers:
        Authorization: "Bearer {{auth_token}}"
    response:
      status_code: 200
      schema:
        type: object
        properties:
          data:
            type: array
            items:
              type: object
              required: ["id", "name", "status"]
          meta:
            type: object
            required: ["total", "page"]
    
  - name: "åˆ›å»ºå‘Šè­¦è§„åˆ™"
    request:
      method: POST
      url: "/api/v1/alerts"
      json:
        name: "æµ‹è¯•å‘Šè­¦"
        condition: "cpu.usage > 80"
        severity: "warning"
    response:
      status_code: 201
      json:
        success: true
        data.name: "æµ‹è¯•å‘Šè­¦"
```

#### ğŸ”¸ æ•°æ®æµæµ‹è¯•


```python
# ç«¯åˆ°ç«¯æ•°æ®æµæµ‹è¯•

def test_monitoring_data_flow():
#    # 1. å‘é€æŒ‡æ ‡æ•°æ®
    metrics_data = {
        "host": "test-server",
        "metric": "cpu.usage", 
        "value": 85.0,
        "timestamp": int(time.time())
    }
    response = send_metrics(metrics_data)
    assert response.status_code == 200
    
#    # 2. ç­‰å¾…å‘Šè­¦è§¦å‘
    time.sleep(30)
    
#    # 3. éªŒè¯å‘Šè­¦ç”Ÿæˆ
    alerts = get_active_alerts()
    cpu_alerts = [a for a in alerts if a['metric'] == 'cpu.usage']
    assert len(cpu_alerts) > 0
    
#    # 4. éªŒè¯é€šçŸ¥å‘é€
    notifications = get_recent_notifications()
    assert any(n['alert_name'] == 'CPUä½¿ç”¨ç‡è¿‡é«˜' for n in notifications)
```

### 7.3 ç¬¬ä¸‰æ–¹é›†æˆæµ‹è¯•



```python
# Slacké›†æˆæµ‹è¯•

def test_slack_integration():
#    # é…ç½®Slacké›†æˆ
    slack_config = {
        "webhook_url": "https://hooks.slack.com/test-webhook",
        "channel": "#test-alerts"
    }
    
#    # å‘é€æµ‹è¯•æ¶ˆæ¯
    test_alert = {
        "name": "é›†æˆæµ‹è¯•å‘Šè­¦",
        "severity": "info",
        "message": "è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯"
    }
    
    result = send_slack_alert(slack_config, test_alert)
    
#    # éªŒè¯å‘é€æˆåŠŸ
    assert result['success'] == True
    assert result['status_code'] == 200
    
#    # éªŒè¯æ¶ˆæ¯æ ¼å¼
    sent_message = result['message']
    assert "é›†æˆæµ‹è¯•å‘Šè­¦" in sent_message
    assert "#test-alerts" in sent_message

# CMDBåŒæ­¥æµ‹è¯•  

def test_cmdb_sync():
#    # æ¨¡æ‹ŸCMDBæ•°æ®
    cmdb_hosts = [
        {"id": "host-001", "name": "web-server-01", "ip": "10.0.1.10"},
        {"id": "host-002", "name": "db-server-01", "ip": "10.0.1.20"}
    ]
    
#    # æ‰§è¡ŒåŒæ­¥
    sync_result = sync_hosts_from_cmdb(cmdb_hosts)
    
#    # éªŒè¯åŒæ­¥ç»“æœ
    assert sync_result['processed'] == 2
    assert sync_result['errors'] == 0
    
#    # éªŒè¯æ•°æ®æ­£ç¡®æ€§
    synced_hosts = get_hosts_by_source('cmdb')
    assert len(synced_hosts) == 2
    assert synced_hosts[0]['name'] == 'web-server-01'
```

### 7.4 æ€§èƒ½é›†æˆæµ‹è¯•



```python
# APIæ€§èƒ½æµ‹è¯•

import concurrent.futures
import time

def test_api_performance():
    """æµ‹è¯•APIåœ¨å¹¶å‘è´Ÿè½½ä¸‹çš„æ€§èƒ½"""
    
    def make_request():
        start_time = time.time()
        response = requests.get('/api/v1/metrics/query', 
                              params={'metric': 'cpu.usage'})
        end_time = time.time()
        return {
            'status_code': response.status_code,
            'response_time': end_time - start_time,
            'success': response.status_code == 200
        }
    
#    # å¹¶å‘æ‰§è¡Œ100ä¸ªè¯·æ±‚
    with concurrent.futures.ThreadPoolExecutor(max_workers=10) as executor:
        futures = [executor.submit(make_request) for _ in range(100)]
        results = [future.result() for future in futures]
    
#    # æ€§èƒ½æ–­è¨€
    success_rate = sum(1 for r in results if r['success']) / len(results)
    avg_response_time = sum(r['response_time'] for r in results) / len(results)
    
    assert success_rate >= 0.95  # æˆåŠŸç‡ >= 95%
    assert avg_response_time <= 0.5  # å¹³å‡å“åº”æ—¶é—´ <= 500ms
    
    print(f"æˆåŠŸç‡: {success_rate:.2%}")
    print(f"å¹³å‡å“åº”æ—¶é—´: {avg_response_time:.3f}s")
```

### 7.5 è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿



```yaml
# CI/CDé›†æˆæµ‹è¯•æµæ°´çº¿

name: Integration Tests
on: [push, pull_request]

jobs:
  integration-tests:
    runs-on: ubuntu-latest
    services:
      mongodb:
        image: mongo:4.4
        options: >-
          --health-cmd mongo
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
      redis:
        image: redis:6
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
      
    - name: Setup test environment
      run: |
        docker-compose -f docker-compose.test.yml up -d
        sleep 30  # ç­‰å¾…æœåŠ¡å¯åŠ¨
        
    - name: Run API tests
      run: |
        pytest tests/integration/test_api.py -v
        
    - name: Run third-party integration tests
      run: |
        pytest tests/integration/test_external.py -v
        
    - name: Run performance tests
      run: |
        pytest tests/performance/test_load.py -v
        
    - name: Generate test report
      if: always()
      run: |
        pytest --html=report.html --self-contained-html
        
    - name: Upload test report
      if: always()
      uses: actions/upload-artifact@v2
      with:
        name: test-report
        path: report.html
```

---

## 8. ğŸ“– APIæ–‡æ¡£ä¸SDKæä¾›



### 8.1 APIæ–‡æ¡£é‡è¦æ€§



**ä¸ºä»€ä¹ˆAPIæ–‡æ¡£å¦‚æ­¤é‡è¦ï¼Ÿ**
> APIæ–‡æ¡£å°±åƒ"äº§å“è¯´æ˜ä¹¦"ï¼Œæ²¡æœ‰æ¸…æ™°çš„è¯´æ˜ä¹¦ï¼Œå†å¥½çš„äº§å“ä¹Ÿéš¾ä»¥è¢«æ­£ç¡®ä½¿ç”¨ã€‚

```
ä¼˜ç§€APIæ–‡æ¡£çš„ä»·å€¼ï¼š
å¼€å‘æ•ˆç‡ â† å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹
é›†æˆæˆæœ¬ â† å‡å°‘æ²Ÿé€šå’Œè¯•é”™æˆæœ¬
ç”¨æˆ·ä½“éªŒ â† æä¾›è‰¯å¥½çš„å¼€å‘è€…ä½“éªŒ
ç¤¾åŒºå»ºè®¾ â† ä¿ƒè¿›ç”Ÿæ€ç³»ç»Ÿå‘å±•
```

### 8.2 äº¤äº’å¼APIæ–‡æ¡£



#### ğŸ”¸ OpenAPIè§„èŒƒ


```yaml
# OpenAPI 3.0è§„èŒƒç¤ºä¾‹

openapi: 3.0.0
info:
  title: ç›‘æ§å¹³å°API
  version: 2.1.0
  description: |
    ä¼ä¸šçº§ç›‘æ§å¹³å°çš„RESTful APIæ¥å£æ–‡æ¡£
    
#    ## è®¤è¯æ–¹å¼
    æ”¯æŒä»¥ä¸‹è®¤è¯æ–¹å¼ï¼š
    - Bearer Token
    - API Key
    - OAuth 2.0
    
  contact:
    name: API Support
    email: api-support@company.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://monitoring.company.com/api/v1
    description: ç”Ÿäº§ç¯å¢ƒ
  - url: https://staging-monitoring.company.com/api/v1
    description: æµ‹è¯•ç¯å¢ƒ

paths:
  /hosts:
    get:
      summary: è·å–ä¸»æœºåˆ—è¡¨
      description: |
        è·å–ç›‘æ§ç³»ç»Ÿä¸­çš„ä¸»æœºåˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œè¿‡æ»¤
        
#        ### ä½¿ç”¨ç¤ºä¾‹
        ```bash
        curl -H "Authorization: Bearer YOUR_TOKEN" \
             "https://monitoring.company.com/api/v1/hosts?status=online&page=1&size=20"
        ```
      parameters:
        - name: status
          in: query
          description: ä¸»æœºçŠ¶æ€è¿‡æ»¤
          schema:
            type: string
            enum: [online, offline, unknown]
        - name: page
          in: query
          description: é¡µç 
          schema:
            type: integer
            minimum: 1
            default: 1
      responses:
        200:
          description: æˆåŠŸè¿”å›ä¸»æœºåˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HostListResponse'
              example:
                success: true
                data:
                  - id: host-001
                    name: web-server-01
                    status: online
                    cpu_usage: 45.2
                meta:
                  total: 150
                  page: 1
                  size: 20

components:
  schemas:
    HostListResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/Host'
        meta:
          $ref: '#/components/schemas/PaginationMeta'
```

#### ğŸ”¸ ä»£ç ç¤ºä¾‹ç”Ÿæˆ


```javascript
// è‡ªåŠ¨ç”Ÿæˆçš„JavaScriptç¤ºä¾‹
const MonitoringAPI = require('@company/monitoring-api');

const api = new MonitoringAPI({
  baseURL: 'https://monitoring.company.com/api/v1',
  auth: {
    type: 'bearer',
    token: 'YOUR_ACCESS_TOKEN'
  }
});

// è·å–ä¸»æœºåˆ—è¡¨
async function getHosts() {
  try {
    const response = await api.hosts.list({
      status: 'online',
      page: 1,
      size: 20
    });
    
    console.log(`æ‰¾åˆ° ${response.meta.total} å°ä¸»æœº`);
    response.data.forEach(host => {
      console.log(`${host.name}: ${host.status}`);
    });
    
  } catch (error) {
    console.error('è·å–ä¸»æœºåˆ—è¡¨å¤±è´¥:', error.message);
  }
}
```

### 8.3 å¤šè¯­è¨€SDKè®¾è®¡



#### ğŸ”¸ Python SDK


```python
# Python SDKè®¾è®¡

from monitoring_api import MonitoringClient, Alert, Dashboard

class MonitoringClient:
    def __init__(self, base_url, auth_token=None, api_key=None):
        self.base_url = base_url
        self.session = requests.Session()
        
        if auth_token:
            self.session.headers['Authorization'] = f'Bearer {auth_token}'
        elif api_key:
            self.session.headers['X-API-Key'] = api_key
    
    def get_hosts(self, status=None, **kwargs):
        """è·å–ä¸»æœºåˆ—è¡¨"""
        params = kwargs
        if status:
            params['status'] = status
            
        response = self.session.get(f'{self.base_url}/hosts', params=params)
        response.raise_for_status()
        return response.json()
    
    def create_alert(self, name, condition, severity='warning', **kwargs):
        """åˆ›å»ºå‘Šè­¦è§„åˆ™"""
        alert_data = {
            'name': name,
            'condition': condition, 
            'severity': severity,
            **kwargs
        }
        
        response = self.session.post(f'{self.base_url}/alerts', json=alert_data)
        response.raise_for_status()
        return Alert(response.json()['data'])

# ä½¿ç”¨ç¤ºä¾‹

client = MonitoringClient(
    base_url='https://monitoring.company.com/api/v1',
    auth_token='your_token_here'
)

# è·å–ä¸»æœº

hosts = client.get_hosts(status='online')
print(f"åœ¨çº¿ä¸»æœºæ•°é‡: {len(hosts['data'])}")

# åˆ›å»ºå‘Šè­¦

alert = client.create_alert(
    name='é«˜CPUä½¿ç”¨ç‡',
    condition='cpu.usage > 80',
    severity='warning',
    duration='5m'
)
print(f"åˆ›å»ºå‘Šè­¦: {alert.name}")
```

#### ğŸ”¸ Go SDK


```go
// Go SDKè®¾è®¡
package monitoring

import (
    "encoding/json"
    "fmt"
    "net/http"
)

type Client struct {
    BaseURL   string
    AuthToken string
    HTTPClient *http.Client
}

type Host struct {
    ID       string  `json:"id"`
    Name     string  `json:"name"`
    Status   string  `json:"status"`
    CPUUsage float64 `json:"cpu_usage"`
}

type HostListResponse struct {
    Success bool `json:"success"`
    Data    []Host `json:"data"`
    Meta    struct {
        Total int `json:"total"`
        Page  int `json:"page"`
        Size  int `json:"size"`
    } `json:"meta"`
}

func NewClient(baseURL, authToken string) *Client {
    return &Client{
        BaseURL:   baseURL,
        AuthToken: authToken,
        HTTPClient: &http.Client{},
    }
}

func (c *Client) GetHosts(status string) (*HostListResponse, error) {
    url := fmt.Sprintf("%s/hosts", c.BaseURL)
    if status != "" {
        url += fmt.Sprintf("?status=%s", status)
    }
    
    req, err := http.NewRequest("GET", url, nil)
    if err != nil {
        return nil, err
    }
    
    req.Header.Set("Authorization", fmt.Sprintf("Bearer %s", c.AuthToken))
    req.Header.Set("Content-Type", "application/json")
    
    resp, err := c.HTTPClient.Do(req)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()
    
    var result HostListResponse
    if err := json.NewDecoder(resp.Body).Decode(&result); err != nil {
        return nil, err
    }
    
    return &result, nil
}

// ä½¿ç”¨ç¤ºä¾‹
func main() {
    client := NewClient(
        "https://monitoring.company.com/api/v1",
        "your_token_here",
    )
    
    hosts, err := client.GetHosts("online")
    if err != nil {
        log.Fatal("è·å–ä¸»æœºå¤±è´¥:", err)
    }
    
    fmt.Printf("åœ¨çº¿ä¸»æœºæ•°é‡: %d\n", len(hosts.Data))
    for _, host := range hosts.Data {
        fmt.Printf("ä¸»æœº: %s, CPU: %.1f%%\n", host.Name, host.CPUUsage)
    }
}
```

### 8.4 æ–‡æ¡£è‡ªåŠ¨åŒ–ç”Ÿæˆ



```python
# ä»ä»£ç æ³¨é‡Šè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£

from flask import Flask, jsonify, request
from flask_restx import Api, Resource, fields

app = Flask(__name__)
api = Api(app, doc='/docs/', title='ç›‘æ§å¹³å°API', version='2.1.0')

# å®šä¹‰æ•°æ®æ¨¡å‹

host_model = api.model('Host', {
    'id': fields.String(required=True, description='ä¸»æœºå”¯ä¸€æ ‡è¯†'),
    'name': fields.String(required=True, description='ä¸»æœºåç§°'),
    'status': fields.String(required=True, description='ä¸»æœºçŠ¶æ€', 
                          enum=['online', 'offline', 'unknown']),
    'cpu_usage': fields.Float(description='CPUä½¿ç”¨ç‡ç™¾åˆ†æ¯”')
})

host_list_model = api.model('HostList', {
    'success': fields.Boolean(required=True),
    'data': fields.List(fields.Nested(host_model)),
    'meta': fields.Raw(description='åˆ†é¡µä¿¡æ¯')
})

@api.route('/hosts')
class HostList(Resource):
    @api.doc('get_hosts')
    @api.param('status', 'ä¸»æœºçŠ¶æ€è¿‡æ»¤', type='string', enum=['online', 'offline', 'unknown'])
    @api.param('page', 'é¡µç ', type='int', default=1)
    @api.param('size', 'æ¯é¡µæ•°é‡', type='int', default=20)
    @api.marshal_with(host_list_model)
    def get(self):
        """
        è·å–ä¸»æœºåˆ—è¡¨
        
        è¿”å›ç›‘æ§ç³»ç»Ÿä¸­çš„ä¸»æœºåˆ—è¡¨ï¼Œæ”¯æŒçŠ¶æ€è¿‡æ»¤å’Œåˆ†é¡µ
        """
        status = request.args.get('status')
        page = int(request.args.get('page', 1))
        size = int(request.args.get('size', 20))
        
#        # å®é™…çš„ä¸šåŠ¡é€»è¾‘
        hosts = get_hosts_from_db(status=status, page=page, size=size)
        
        return {
            'success': True,
            'data': hosts,
            'meta': {'total': 150, 'page': page, 'size': size}
        }
```

### 8.5 æ–‡æ¡£ç»´æŠ¤ä¸ç‰ˆæœ¬ç®¡ç†



```yaml
# æ–‡æ¡£ç‰ˆæœ¬ç®¡ç†é…ç½®

documentation:
  versioning:
    strategy: "semantic"  # semantic, date-based, sequential
    current_version: "2.1.0"
    supported_versions: ["2.0.0", "2.1.0"]
    deprecated_versions: ["1.x"]
    
  generation:
    auto_generate: true
    source: "code_annotations"  # code, openapi, manual
    output_formats: ["html", "pdf", "markdown"]
    
  deployment:
    auto_deploy: true
    staging_url: "https://docs-staging.company.com"
    production_url: "https://docs.company.com"
    
  maintenance:
    review_schedule: "monthly"
    update_notifications: true
    feedback_collection: true
```

**æ–‡æ¡£è´¨é‡æ£€æŸ¥æ¸…å•ï¼š**
```
ğŸ“‹ APIæ–‡æ¡£æ£€æŸ¥æ¸…å•ï¼š

åŸºç¡€ä¿¡æ¯ï¼š
â–¡ APIç‰ˆæœ¬å’Œæ›´æ–°æ—¥æœŸ
â–¡ è®¤è¯æ–¹å¼è¯´æ˜  
â–¡ åŸºç¡€URLå’Œç¯å¢ƒä¿¡æ¯
â–¡ è”ç³»æ–¹å¼å’Œæ”¯æŒæ¸ é“

æ¥å£æ–‡æ¡£ï¼š
â–¡ å®Œæ•´çš„è¯·æ±‚/å“åº”ç¤ºä¾‹
â–¡ å‚æ•°ç±»å‹å’ŒéªŒè¯è§„åˆ™
â–¡ é”™è¯¯ä»£ç å’Œå¤„ç†è¯´æ˜
â–¡ é€Ÿç‡é™åˆ¶è¯´æ˜

ä»£ç ç¤ºä¾‹ï¼š
â–¡ å¤šè¯­è¨€SDKç¤ºä¾‹
â–¡ å®Œæ•´çš„å·¥ä½œä»£ç 
â–¡ å¸¸è§ä½¿ç”¨åœºæ™¯
â–¡ é”™è¯¯å¤„ç†ç¤ºä¾‹

ç»´æŠ¤æ›´æ–°ï¼š
â–¡ å˜æ›´æ—¥å¿—
â–¡ è¿ç§»æŒ‡å—
â–¡ å‘åå…¼å®¹æ€§è¯´æ˜
â–¡ åºŸå¼ƒæ¥å£é€šçŸ¥
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ



```
ğŸ”¸ REST APIè®¾è®¡ï¼šèµ„æºå¯¼å‘ã€ç»Ÿä¸€æ¥å£ã€æ— çŠ¶æ€åŸåˆ™
ğŸ”¸ ç³»ç»Ÿé›†æˆï¼šé€‚é…å™¨æ¨¡å¼ã€ç»Ÿä¸€è®¤è¯ã€æ•°æ®è½¬æ¢
ğŸ”¸ æ•°æ®å¯¼å…¥å¯¼å‡ºï¼šå¢é‡åŒæ­¥ã€æ ¼å¼éªŒè¯ã€ç‰ˆæœ¬ç®¡ç†  
ğŸ”¸ SSOé›†æˆï¼šSAMLã€OAuthã€LDAPå¤šåè®®æ”¯æŒ
ğŸ”¸ å®‰å…¨æ§åˆ¶ï¼šå¤šå±‚é™æµã€æƒé™ç®¡ç†ã€è¾“å…¥éªŒè¯
ğŸ”¸ æ•°æ®æ ‡å‡†åŒ–ï¼šç»Ÿä¸€æ ¼å¼ã€å…¼å®¹æ€§ã€äº’æ“ä½œæ€§
ğŸ”¸ é›†æˆæµ‹è¯•ï¼šå¥‘çº¦æµ‹è¯•ã€ç«¯åˆ°ç«¯éªŒè¯ã€æ€§èƒ½æµ‹è¯•
ğŸ”¸ æ–‡æ¡£SDKï¼šäº¤äº’å¼æ–‡æ¡£ã€å¤šè¯­è¨€SDKã€è‡ªåŠ¨ç”Ÿæˆ
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ APIè®¾è®¡çš„æ ¸å¿ƒåŸåˆ™**
```
ä¸€è‡´æ€§åŸåˆ™ï¼š
â€¢ å‘½åè§„èŒƒç»Ÿä¸€ï¼ˆå¤æ•°åè¯ã€é©¼å³°å‘½åï¼‰
â€¢ HTTPæ–¹æ³•è¯­ä¹‰æ­£ç¡®ï¼ˆGETæŸ¥è¯¢ã€POSTåˆ›å»ºï¼‰
â€¢ å“åº”æ ¼å¼æ ‡å‡†åŒ–ï¼ˆç»Ÿä¸€çš„æˆåŠŸ/é”™è¯¯ç»“æ„ï¼‰

æ˜“ç”¨æ€§åŸåˆ™ï¼š
â€¢ ç›´è§‚çš„URLç»“æ„ï¼ˆ/hosts/123/metricsï¼‰
â€¢ åˆç†çš„åˆ†é¡µå’Œè¿‡æ»¤ï¼ˆpageã€sizeã€filterå‚æ•°ï¼‰
â€¢ æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼ˆè¯¦ç»†çš„é”™è¯¯ç å’Œæè¿°ï¼‰

æ‰©å±•æ€§åŸåˆ™ï¼š
â€¢ ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼ˆ/api/v1/ã€/api/v2/ï¼‰
â€¢ å‘åå…¼å®¹ä¿è¯ï¼ˆåºŸå¼ƒè€Œä¸åˆ é™¤ï¼‰
â€¢ çµæ´»çš„æŸ¥è¯¢å‚æ•°ï¼ˆfieldsã€includeã€excludeï¼‰
```

**ğŸ”¹ é›†æˆæ¶æ„çš„è®¾è®¡æ€è·¯**
```
åˆ†å±‚è®¾è®¡ï¼š
ç½‘å…³å±‚ â† ç»Ÿä¸€å…¥å£ã€è®¤è¯æˆæƒã€é™æµæ§åˆ¶
é€‚é…å±‚ â† åè®®è½¬æ¢ã€æ•°æ®æ˜ å°„ã€é”™è¯¯å¤„ç†
ä¸šåŠ¡å±‚ â† æ ¸å¿ƒé€»è¾‘ã€æ•°æ®å¤„ç†ã€è§„åˆ™å¼•æ“

æ¾è€¦åˆåŸåˆ™ï¼š
â€¢ æ¥å£æ ‡å‡†åŒ–ï¼ˆç»Ÿä¸€çš„é›†æˆæ¥å£è§„èŒƒï¼‰
â€¢ é…ç½®å¤–ç½®åŒ–ï¼ˆé›†æˆé…ç½®ç‹¬ç«‹ç®¡ç†ï¼‰
â€¢ å¼‚æ­¥å¤„ç†ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—è§£è€¦ç³»ç»Ÿé—´ä¾èµ–ï¼‰
```

**ğŸ”¹ å®‰å…¨ä¸æ€§èƒ½çš„å¹³è¡¡**
```
å®‰å…¨ç­–ç•¥ï¼š
â€¢ è®¤è¯ï¼šå¤šç§æ–¹å¼æ”¯æŒï¼Œå¼ºåˆ¶HTTPS
â€¢ æˆæƒï¼šç»†ç²’åº¦æƒé™æ§åˆ¶ï¼Œæœ€å°æƒé™åŸåˆ™
â€¢ é™æµï¼šå¤šå±‚é™æµç­–ç•¥ï¼Œé˜²æŠ¤DDoSæ”»å‡»

æ€§èƒ½ä¼˜åŒ–ï¼š
â€¢ ç¼“å­˜ï¼šAPIå“åº”ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
â€¢ å¼‚æ­¥ï¼šè€—æ—¶æ“ä½œå¼‚æ­¥å¤„ç†ï¼Œå¿«é€Ÿå“åº”
â€¢ æ‰¹å¤„ç†ï¼šæ”¯æŒæ‰¹é‡æ“ä½œï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼



**ğŸ¯ ä¸åŒè§„æ¨¡ä¼ä¸šçš„é›†æˆç­–ç•¥**

```
å°å‹å›¢é˜Ÿï¼ˆ<50äººï¼‰ï¼š
â€¢ é‡ç‚¹ï¼šå¿«é€Ÿé›†æˆï¼Œç®€å•æ˜“ç”¨
â€¢ æ–¹æ¡ˆï¼šåŸºç¡€REST API + Webhook
â€¢ é›†æˆï¼šé’‰é’‰/ä¼ä¸šå¾®ä¿¡ + ç®€å•CMDB
â€¢ å·¥å…·ï¼šSwagger UI + åŸºç¡€æ–‡æ¡£

ä¸­å‹ä¼ä¸šï¼ˆ50-500äººï¼‰ï¼š
â€¢ é‡ç‚¹ï¼šæ ‡å‡†åŒ–ç®¡ç†ï¼Œå®‰å…¨å¯æ§
â€¢ æ–¹æ¡ˆï¼šå®Œæ•´REST API + å¤šåè®®æ”¯æŒ
â€¢ é›†æˆï¼šä¼ä¸šAD/LDAP + ITSMç³»ç»Ÿ + å¤šæ¸ é“å‘Šè­¦
â€¢ å·¥å…·ï¼šå®Œæ•´SDK + è¯¦ç»†æ–‡æ¡£ + é›†æˆæµ‹è¯•

å¤§å‹ä¼ä¸šï¼ˆ>500äººï¼‰ï¼š
â€¢ é‡ç‚¹ï¼šä¼ä¸šçº§æ¶æ„ï¼Œé«˜å¯ç”¨æ€§
â€¢ æ–¹æ¡ˆï¼šå¾®æœåŠ¡APIç½‘å…³ + äº‹ä»¶é©±åŠ¨æ¶æ„
â€¢ é›†æˆï¼šå¤æ‚SSO + å¤šCMDB + è‡ªåŠ¨åŒ–æµç¨‹
â€¢ å·¥å…·ï¼šä¼ä¸šçº§SDK + APIæ²»ç† + å…¨é¢æµ‹è¯•
```

### 9.4 æ•…éšœè¯Šæ–­ä¸ä¼˜åŒ–



**ğŸ”§ å¸¸è§é›†æˆé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ**

```
APIè°ƒç”¨å¤±è´¥ï¼š
é—®é¢˜ï¼šè®¤è¯å¤±è´¥ã€æƒé™ä¸è¶³
æ’æŸ¥ï¼šæ£€æŸ¥Tokenæœ‰æ•ˆæ€§ã€æƒé™é…ç½®
è§£å†³ï¼šæ›´æ–°è®¤è¯ä¿¡æ¯ã€è°ƒæ•´æƒé™è®¾ç½®

ç¬¬ä¸‰æ–¹é›†æˆå¼‚å¸¸ï¼š
é—®é¢˜ï¼šç½‘ç»œè¶…æ—¶ã€æ ¼å¼ä¸åŒ¹é…
æ’æŸ¥ï¼šç½‘ç»œè¿é€šæ€§ã€æ•°æ®æ ¼å¼å¯¹æ¯”
è§£å†³ï¼šå¢åŠ é‡è¯•æœºåˆ¶ã€æ•°æ®æ ¼å¼è½¬æ¢

æ•°æ®åŒæ­¥å»¶è¿Ÿï¼š
é—®é¢˜ï¼šåŒæ­¥é¢‘ç‡è¿‡ä½ã€æ•°æ®é‡è¿‡å¤§
æ’æŸ¥ï¼šåŒæ­¥æ—¥å¿—ã€æ€§èƒ½ç›‘æ§
è§£å†³ï¼šä¼˜åŒ–åŒæ­¥ç­–ç•¥ã€å¢é‡åŒæ­¥

é™æµè§¦å‘è¿‡é¢‘ï¼š
é—®é¢˜ï¼šé™æµé˜ˆå€¼è®¾ç½®è¿‡ä½
æ’æŸ¥ï¼šAPIè°ƒç”¨ç»Ÿè®¡ã€ä¸šåŠ¡éœ€æ±‚åˆ†æ
è§£å†³ï¼šè°ƒæ•´é™æµç­–ç•¥ã€ä¼˜åŒ–è°ƒç”¨æ¨¡å¼
```

### 9.5 æœ€ä½³å®è·µæ€»ç»“



**ğŸš€ APIè®¾è®¡æœ€ä½³å®è·µ**

```
è®¾è®¡é˜¶æ®µï¼š
1. APIä¼˜å…ˆè®¾è®¡ï¼šå…ˆå®šä¹‰æ¥å£å¥‘çº¦ï¼Œå†å®ç°åŠŸèƒ½
2. ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼šè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼Œå‘å‰å…¼å®¹
3. å®‰å…¨æ€§è€ƒè™‘ï¼šè®¤è¯æˆæƒã€è¾“å…¥éªŒè¯ã€è¾“å‡ºç¼–ç 
4. æ€§èƒ½è®¾è®¡ï¼šç¼“å­˜ç­–ç•¥ã€åˆ†é¡µæœºåˆ¶ã€å¼‚æ­¥å¤„ç†

å¼€å‘é˜¶æ®µï¼š
1. ä»£ç è§„èŒƒï¼šç»Ÿä¸€å‘½åã€é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•
2. è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•
3. æ–‡æ¡£åŒæ­¥ï¼šä»£ç å³æ–‡æ¡£ã€è‡ªåŠ¨ç”Ÿæˆã€æŒç»­æ›´æ–°
4. è´¨é‡ä¿è¯ï¼šä»£ç å®¡æŸ¥ã€é™æ€åˆ†æã€å®‰å…¨æ‰«æ

è¿ç»´é˜¶æ®µï¼š
1. ç›‘æ§å‘Šè­¦ï¼šAPIæ€§èƒ½ã€é”™è¯¯ç‡ã€å¯ç”¨æ€§ç›‘æ§
2. æ—¥å¿—å®¡è®¡ï¼šè®¿é—®æ—¥å¿—ã€æ“ä½œå®¡è®¡ã€å®‰å…¨äº‹ä»¶
3. å®¹é‡è§„åˆ’ï¼šæµé‡é¢„æµ‹ã€èµ„æºæ‰©å®¹ã€æ€§èƒ½ä¼˜åŒ–
4. æŒç»­æ”¹è¿›ï¼šç”¨æˆ·åé¦ˆã€æ€§èƒ½åˆ†æã€åŠŸèƒ½è¿­ä»£
```

**ğŸ”„ é›†æˆç”Ÿå‘½å‘¨æœŸç®¡ç†**

```
é›†æˆè§„åˆ’é˜¶æ®µï¼š
â€¢ éœ€æ±‚åˆ†æï¼šæ˜ç¡®é›†æˆç›®æ ‡å’Œä¸šåŠ¡ä»·å€¼
â€¢ æŠ€æœ¯é€‰å‹ï¼šé€‰æ‹©åˆé€‚çš„é›†æˆæ–¹æ¡ˆå’ŒæŠ€æœ¯æ ˆ
â€¢ æ¶æ„è®¾è®¡ï¼šè®¾è®¡é›†æˆæ¶æ„å’Œæ•°æ®æµ
â€¢ é£é™©è¯„ä¼°ï¼šè¯†åˆ«æ½œåœ¨é£é™©å’Œåº”å¯¹ç­–ç•¥

é›†æˆå®æ–½é˜¶æ®µï¼š
â€¢ å¼€å‘æµ‹è¯•ï¼šæŒ‰è®¡åˆ’å¼€å‘å’Œæµ‹è¯•é›†æˆåŠŸèƒ½
â€¢ ç¯å¢ƒå‡†å¤‡ï¼šæ­å»ºæµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒ
â€¢ æ•°æ®è¿ç§»ï¼šè¿ç§»å­˜é‡æ•°æ®å’Œé…ç½®
â€¢ ä¸Šçº¿éƒ¨ç½²ï¼šåˆ†é˜¶æ®µä¸Šçº¿å’ŒéªŒè¯

é›†æˆè¿ç»´é˜¶æ®µï¼š
â€¢ ç›‘æ§ç»´æŠ¤ï¼šæŒç»­ç›‘æ§é›†æˆçŠ¶æ€å’Œæ€§èƒ½
â€¢ é—®é¢˜å¤„ç†ï¼šåŠæ—¶å“åº”å’Œå¤„ç†é›†æˆé—®é¢˜
â€¢ ä¼˜åŒ–æ”¹è¿›ï¼šæ ¹æ®ä½¿ç”¨æƒ…å†µä¼˜åŒ–é›†æˆæ–¹æ¡ˆ
â€¢ ç‰ˆæœ¬å‡çº§ï¼šå®šæœŸå‡çº§é›†æˆç»„ä»¶å’Œä¾èµ–
```

### 9.6 æœªæ¥å‘å±•è¶‹åŠ¿



**ğŸ”® ç›‘æ§å¹³å°é›†æˆå‘å±•æ–¹å‘**

```
æŠ€æœ¯æ¼”è¿›è¶‹åŠ¿ï¼š
GraphQL API â† æ›´çµæ´»çš„æ•°æ®æŸ¥è¯¢æ–¹å¼
äº‹ä»¶é©±åŠ¨æ¶æ„ â† å®æ—¶æ•°æ®æµå’Œå¼‚æ­¥å¤„ç†
æœåŠ¡ç½‘æ ¼ â† å¾®æœåŠ¡é—´é€šä¿¡å’Œæ²»ç†
ä½ä»£ç å¹³å° â† å¯è§†åŒ–é›†æˆé…ç½®

ä¸šåŠ¡å‘å±•è¶‹åŠ¿ï¼š
æ™ºèƒ½åŒ–é›†æˆ â† AIè¾…åŠ©çš„é›†æˆé…ç½®å’Œä¼˜åŒ–
ç”Ÿæ€ç³»ç»Ÿ â† å¼€æ”¾å¹³å°å’Œåˆä½œä¼™ä¼´ç”Ÿæ€
æ ‡å‡†åŒ–æ¨è¿› â† è¡Œä¸šæ ‡å‡†å’Œè§„èŒƒç»Ÿä¸€
äº‘åŸç”Ÿæ¶æ„ â† å®¹å™¨åŒ–å’ŒserverlessæŠ€æœ¯

ç”¨æˆ·ä½“éªŒè¶‹åŠ¿ï¼š
è‡ªåŠ©æœåŠ¡ â† ç”¨æˆ·è‡ªä¸»é…ç½®å’Œç®¡ç†é›†æˆ
å®æ—¶åé¦ˆ â† å³æ—¶çš„é›†æˆçŠ¶æ€å’Œç»“æœåé¦ˆ
ç§»åŠ¨ä¼˜å…ˆ â† ç§»åŠ¨ç«¯APIå’Œç®¡ç†ç•Œé¢
ä¸ªæ€§åŒ–å®šåˆ¶ â† åŸºäºç”¨æˆ·éœ€æ±‚çš„å®šåˆ¶åŒ–åŠŸèƒ½
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹ï¼š**
- APIè®¾è®¡è¦éµå¾ªRESTåŸåˆ™ï¼Œä¿è¯ä¸€è‡´æ€§å’Œæ˜“ç”¨æ€§
- ç³»ç»Ÿé›†æˆéœ€è¦è€ƒè™‘é€‚é…å™¨æ¨¡å¼å’Œæ¾è€¦åˆè®¾è®¡
- å®‰å…¨æ§åˆ¶æ˜¯å¤šå±‚é˜²æŠ¤ï¼ŒåŒ…æ‹¬è®¤è¯ã€æˆæƒå’Œé™æµ
- æ•°æ®æ ‡å‡†åŒ–æ˜¯äº’æ“ä½œæ€§çš„åŸºç¡€ä¿éšœ
- æ–‡æ¡£å’ŒSDKæ˜¯å¼€å‘è€…ä½“éªŒçš„é‡è¦ç»„æˆéƒ¨åˆ†
- é›†æˆæµ‹è¯•éªŒè¯æ˜¯ä¿è¯è´¨é‡çš„å…³é”®ç¯èŠ‚
- æŒç»­ä¼˜åŒ–å’Œæ¼”è¿›æ˜¯é›†æˆæˆåŠŸçš„é•¿æœŸä¿éšœ