---
title: 4ã€æ–‡ä»¶åˆ†å‘ä¸ŽåŒæ­¥æŠ€æœ¯
---
## ðŸ“š ç›®å½•

1. [æ–‡ä»¶åŒæ­¥åŸºç¡€æ¦‚å¿µ](#1-æ–‡ä»¶åŒæ­¥åŸºç¡€æ¦‚å¿µ)
2. [rsyncæ‰¹é‡æ–‡ä»¶åŒæ­¥](#2-rsyncæ‰¹é‡æ–‡ä»¶åŒæ­¥)
3. [scpæ‰¹é‡æ–‡ä»¶ä¼ è¾“](#3-scpæ‰¹é‡æ–‡ä»¶ä¼ è¾“)
4. [æ–‡ä»¶æƒé™ä¿æŒç­–ç•¥](#4-æ–‡ä»¶æƒé™ä¿æŒç­–ç•¥)
5. [å¢žé‡åŒæ­¥ä¼˜åŒ–æŠ€æœ¯](#5-å¢žé‡åŒæ­¥ä¼˜åŒ–æŠ€æœ¯)
6. [æŽ’é™¤æ–‡ä»¶ä¸Žç›®å½•é…ç½®](#6-æŽ’é™¤æ–‡ä»¶ä¸Žç›®å½•é…ç½®)
7. [æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ](#7-æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ)
8. [ç½‘ç»œä¸­æ–­æ¢å¤æœºåˆ¶](#8-ç½‘ç»œä¸­æ–­æ¢å¤æœºåˆ¶)
9. [å¤§æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–](#9-å¤§æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–)
10. [å®žæˆ˜åº”ç”¨åœºæ™¯](#10-å®žæˆ˜åº”ç”¨åœºæ™¯)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ“‚ æ–‡ä»¶åŒæ­¥åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒæ­¥


**ðŸ”¸ åŸºæœ¬å®šä¹‰**
æ–‡ä»¶åŒæ­¥æ˜¯æŒ‡è®©ä¸¤ä¸ªæˆ–å¤šä¸ªä½ç½®çš„æ–‡ä»¶ä¿æŒä¸€è‡´çš„è¿‡ç¨‹ã€‚åœ¨Linuxç³»ç»Ÿç®¡ç†ä¸­ï¼Œè¿™é€šå¸¸æŒ‡å°†ä¸€ä¸ªä½ç½®ï¼ˆæºï¼‰çš„æ–‡ä»¶æ›´æ–°å¤åˆ¶åˆ°å¦ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®ï¼ˆç›®æ ‡ï¼‰ã€‚

**ðŸ’¡ åŒæ­¥ä¸Žå¤åˆ¶çš„åŒºåˆ«**
```
æ™®é€šå¤åˆ¶ï¼š
- æ¯æ¬¡éƒ½ä¼ è¾“å…¨éƒ¨æ–‡ä»¶
- ä¸è€ƒè™‘æ–‡ä»¶æ˜¯å¦å·²æ”¹å˜
- æµªè´¹æ—¶é—´å’Œå¸¦å®½

æ™ºèƒ½åŒæ­¥ï¼š
- åªä¼ è¾“å˜åŒ–çš„éƒ¨åˆ†
- æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´ã€å¤§å°
- èŠ‚çœæ—¶é—´å’Œç½‘ç»œèµ„æº
```

### 1.2 æ–‡ä»¶åŒæ­¥çš„åº”ç”¨åœºæ™¯


**ðŸŽ¯ å®žé™…åº”ç”¨éœ€æ±‚**
- **ç½‘ç«™éƒ¨ç½²**ï¼šå°†æœ¬åœ°ä»£ç åŒæ­¥åˆ°å¤šå°WebæœåŠ¡å™¨
- **æ•°æ®å¤‡ä»½**ï¼šå®šæœŸå°†é‡è¦æ–‡ä»¶åŒæ­¥åˆ°å¤‡ä»½æœåŠ¡å™¨
- **é…ç½®ç®¡ç†**ï¼šæ‰¹é‡æ›´æ–°å¤šå°æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶
- **å†…å®¹åˆ†å‘**ï¼šå°†åª’ä½“æ–‡ä»¶åŒæ­¥åˆ°å¤šä¸ªCDNèŠ‚ç‚¹

### 1.3 åŒæ­¥æ–¹å¼åˆ†ç±»


**ðŸ”„ åŒæ­¥æ–¹å‘åˆ†ç±»**
```
å•å‘åŒæ­¥ï¼šæº â†’ ç›®æ ‡
- é€‚ç”¨äºŽå¤‡ä»½ã€éƒ¨ç½²åœºæ™¯
- ç›®æ ‡ç«¯ä¸ä¼šä¿®æ”¹æ–‡ä»¶

åŒå‘åŒæ­¥ï¼šæº â‡„ ç›®æ ‡  
- ä¸¤ç«¯éƒ½å¯èƒ½ä¿®æ”¹æ–‡ä»¶
- éœ€è¦å†²çªå¤„ç†æœºåˆ¶
- å®žçŽ°å¤æ‚åº¦è¾ƒé«˜
```

**â° åŒæ­¥æ—¶æœºåˆ†ç±»**
- **å®žæ—¶åŒæ­¥**ï¼šæ–‡ä»¶å˜åŒ–æ—¶ç«‹å³åŒæ­¥
- **å®šæ—¶åŒæ­¥**ï¼šæŒ‰è®¡åˆ’å®šæœŸæ‰§è¡ŒåŒæ­¥
- **æ‰‹åŠ¨åŒæ­¥**ï¼šç®¡ç†å‘˜æ‰‹åŠ¨è§¦å‘åŒæ­¥

---

## 2. ðŸ”„ rsyncæ‰¹é‡æ–‡ä»¶åŒæ­¥


### 2.1 rsyncæ ¸å¿ƒæ¦‚å¿µ


**ðŸ”¸ ä»€ä¹ˆæ˜¯rsync**
rsyncæ˜¯Linuxç³»ç»Ÿä¸­æœ€å¼ºå¤§çš„æ–‡ä»¶åŒæ­¥å·¥å…·ï¼Œå…¨åæ˜¯"remote synchronization"ï¼ˆè¿œç¨‹åŒæ­¥ï¼‰ã€‚å®ƒèƒ½å¤Ÿé«˜æ•ˆåœ°åœ¨æœ¬åœ°æˆ–è¿œç¨‹ç³»ç»Ÿä¹‹é—´åŒæ­¥æ–‡ä»¶å’Œç›®å½•ã€‚

**âœ¨ rsyncæ ¸å¿ƒä¼˜åŠ¿**
- **å¢žé‡ä¼ è¾“**ï¼šåªä¼ è¾“å˜åŒ–çš„æ•°æ®å—ï¼Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶
- **åŽ‹ç¼©ä¼ è¾“**ï¼šå¯ä»¥åŽ‹ç¼©æ•°æ®å‡å°‘ç½‘ç»œå¸¦å®½ä½¿ç”¨
- **ä¿æŒå±žæ€§**ï¼šç»´æŠ¤æ–‡ä»¶çš„æƒé™ã€æ—¶é—´æˆ³ã€æ‰€æœ‰è€…ç­‰
- **æ–­ç‚¹ç»­ä¼ **ï¼šç½‘ç»œä¸­æ–­åŽå¯ä»¥ä»Žæ–­ç‚¹ç»§ç»­ä¼ è¾“

### 2.2 rsyncåŸºæœ¬è¯­æ³•å’Œå‚æ•°


**ðŸ“ åŸºæœ¬è¯­æ³•æ ¼å¼**
```
rsync [é€‰é¡¹] æºè·¯å¾„ ç›®æ ‡è·¯å¾„

æœ¬åœ°åŒæ­¥ï¼šrsync [é€‰é¡¹] /path/to/source/ /path/to/destination/
è¿œç¨‹åŒæ­¥ï¼šrsync [é€‰é¡¹] /local/path/ user@host:/remote/path/
```

**ðŸ”§ å¸¸ç”¨å‚æ•°è¯¦è§£**

| å‚æ•° | **åŠŸèƒ½è¯´æ˜Ž** | **å®žé™…ä½œç”¨** |
|------|-------------|-------------|
| `-a` | **å½’æ¡£æ¨¡å¼** | `ç­‰äºŽ -rlptgoDï¼Œä¿æŒæ‰€æœ‰æ–‡ä»¶å±žæ€§` |
| `-v` | **è¯¦ç»†è¾“å‡º** | `æ˜¾ç¤ºä¼ è¾“è¿‡ç¨‹å’Œæ–‡ä»¶åˆ—è¡¨` |
| `-r` | **é€’å½’å¤„ç†** | `åŒæ­¥ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•` |
| `-l` | **ä¿æŒé“¾æŽ¥** | `ä¿æŒç¬¦å·é“¾æŽ¥ä¸å˜` |
| `-p` | **ä¿æŒæƒé™** | `ç»´æŠ¤æ–‡ä»¶çš„åŽŸå§‹æƒé™è®¾ç½®` |
| `-t` | **ä¿æŒæ—¶é—´** | `ç»´æŠ¤ä¿®æ”¹æ—¶é—´æˆ³` |
| `-g` | **ä¿æŒç»„** | `ç»´æŠ¤æ–‡ä»¶çš„ç¾¤ç»„å½’å±ž` |
| `-o` | **ä¿æŒä¸»äºº** | `ç»´æŠ¤æ–‡ä»¶çš„æ‰€æœ‰è€…` |
| `-z` | **åŽ‹ç¼©ä¼ è¾“** | `ä¼ è¾“æ—¶åŽ‹ç¼©æ•°æ®ï¼Œé€‚åˆæ…¢ç½‘ç»œ` |
| `--delete` | **åˆ é™¤å¤šä½™æ–‡ä»¶** | `åˆ é™¤ç›®æ ‡ç«¯å¤šå‡ºçš„æ–‡ä»¶` |

### 2.3 rsyncå®žé™…ä½¿ç”¨ç¤ºä¾‹


**ðŸ“ æœ¬åœ°ç›®å½•åŒæ­¥**
```bash
# åŒæ­¥æ•´ä¸ªç›®å½•ï¼ˆæ³¨æ„è·¯å¾„æœ«å°¾çš„æ–œæ ï¼‰
rsync -av /home/user/documents/ /backup/documents/

# ä¸åŒ…å«æœ«å°¾æ–œæ ä¼šåˆ›å»ºå­ç›®å½•
rsync -av /home/user/documents /backup/
# ç»“æžœï¼š/backup/documents/
```

**ðŸŒ è¿œç¨‹æœåŠ¡å™¨åŒæ­¥**
```bash
# æŽ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨
rsync -avz /local/data/ user@server.com:/remote/backup/

# ä»Žè¿œç¨‹æœåŠ¡å™¨æ‹‰å–
rsync -avz user@server.com:/remote/data/ /local/backup/

# ä½¿ç”¨ç‰¹å®šSSHç«¯å£
rsync -avz -e "ssh -p 2222" /local/data/ user@server.com:/remote/backup/
```

### 2.4 rsyncé«˜çº§åŠŸèƒ½


**ðŸ—‚ï¸ ä½¿ç”¨æŽ’é™¤åˆ—è¡¨**
```bash
# åˆ›å»ºæŽ’é™¤æ–‡ä»¶åˆ—è¡¨
cat > exclude_list.txt << EOF
*.log
*.tmp
.git/
node_modules/
EOF

# åº”ç”¨æŽ’é™¤åˆ—è¡¨
rsync -av --exclude-from=exclude_list.txt /source/ /destination/
```

**âš¡ æ˜¾ç¤ºä¼ è¾“è¿›åº¦**
```bash
# æ˜¾ç¤ºä¼ è¾“è¿›åº¦
rsync -av --progress /large/files/ user@server:/backup/

# æ˜¾ç¤ºæ•´ä½“è¿›åº¦ç»Ÿè®¡
rsync -av --stats /source/ /destination/
```

### 2.5 rsyncæœåŠ¡æ¨¡å¼


**ðŸ”§ é…ç½®rsyncå®ˆæŠ¤è¿›ç¨‹**

åˆ›å»ºé…ç½®æ–‡ä»¶ `/etc/rsyncd.conf`ï¼š
```bash
# å…¨å±€é…ç½®
uid = nobody
gid = nobody
use chroot = yes
max connections = 4
pid file = /var/run/rsyncd.pid
log file = /var/log/rsyncd.log

# æ¨¡å—é…ç½®
[backup]
    path = /data/backup
    comment = Backup module
    read only = false
    auth users = backup_user
    secrets file = /etc/rsyncd.secrets
    hosts allow = 192.168.1.0/24
```

**ðŸ”‘ è®¾ç½®è®¤è¯**
```bash
# åˆ›å»ºå¯†ç æ–‡ä»¶
echo "backup_user:password123" > /etc/rsyncd.secrets
chmod 600 /etc/rsyncd.secrets

# å¯åŠ¨rsyncå®ˆæŠ¤è¿›ç¨‹
rsync --daemon --config=/etc/rsyncd.conf

# å®¢æˆ·ç«¯è¿žæŽ¥
rsync -av /local/data/ backup_user@server::backup/
```

---

## 3. ðŸ“¤ scpæ‰¹é‡æ–‡ä»¶ä¼ è¾“


### 3.1 scpåŸºç¡€æ¦‚å¿µ


**ðŸ”¸ scpå·¥å…·ä»‹ç»**
scpï¼ˆSecure Copy Protocolï¼‰æ˜¯åŸºäºŽSSHåè®®çš„å®‰å…¨æ–‡ä»¶ä¼ è¾“å·¥å…·ã€‚å®ƒæä¾›åŠ å¯†çš„æ–‡ä»¶ä¼ è¾“åŠŸèƒ½ï¼Œæ˜¯Linuxç³»ç»Ÿé—´ä¼ è¾“æ–‡ä»¶çš„æ ‡å‡†å·¥å…·ä¹‹ä¸€ã€‚

**ðŸ”’ scpä¸Žrsyncå¯¹æ¯”**

| ç‰¹æ€§ | **scp** | **rsync** |
|------|---------|-----------|
| **ä¼ è¾“æ–¹å¼** | `å®Œæ•´æ–‡ä»¶ä¼ è¾“` | `å¢žé‡ä¼ è¾“` |
| **ç½‘ç»œæ•ˆçŽ‡** | `ä¸€èˆ¬` | `é«˜æ•ˆ` |
| **åŠ å¯†æ€§** | `SSHåŠ å¯†` | `å¯é…ç½®åŠ å¯†` |
| **æ–­ç‚¹ç»­ä¼ ** | `ä¸æ”¯æŒ` | `æ”¯æŒ` |
| **ä½¿ç”¨å¤æ‚åº¦** | `ç®€å•` | `ç›¸å¯¹å¤æ‚` |
| **é€‚ç”¨åœºæ™¯** | `å°‘é‡æ–‡ä»¶ã€ä¸€æ¬¡æ€§ä¼ è¾“` | `å¤§é‡æ–‡ä»¶ã€é¢‘ç¹åŒæ­¥` |

### 3.2 scpåŸºæœ¬ä½¿ç”¨æ–¹æ³•


**ðŸ“ åŸºæœ¬è¯­æ³•**
```bash
# æœ¬åœ°åˆ°è¿œç¨‹
scp [é€‰é¡¹] æœ¬åœ°æ–‡ä»¶ ç”¨æˆ·@ä¸»æœº:è¿œç¨‹è·¯å¾„

# è¿œç¨‹åˆ°æœ¬åœ°
scp [é€‰é¡¹] ç”¨æˆ·@ä¸»æœº:è¿œç¨‹æ–‡ä»¶ æœ¬åœ°è·¯å¾„

# è¿œç¨‹åˆ°è¿œç¨‹
scp [é€‰é¡¹] ç”¨æˆ·1@ä¸»æœº1:æ–‡ä»¶ ç”¨æˆ·2@ä¸»æœº2:è·¯å¾„
```

**ðŸ”§ å¸¸ç”¨å‚æ•°è¯´æ˜Ž**
- `-r`ï¼šé€’å½’å¤åˆ¶æ•´ä¸ªç›®å½•
- `-p`ï¼šä¿æŒåŽŸæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€è®¿é—®æ—¶é—´å’Œæƒé™
- `-P port`ï¼šæŒ‡å®šSSHè¿žæŽ¥ç«¯å£
- `-v`ï¼šæ˜¾ç¤ºè¯¦ç»†çš„ä¼ è¾“è¿‡ç¨‹
- `-C`ï¼šå¯ç”¨åŽ‹ç¼©

### 3.3 scpå®žé™…æ“ä½œç¤ºä¾‹


**ðŸ“ å•ä¸ªæ–‡ä»¶ä¼ è¾“**
```bash
# ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç¨‹æœåŠ¡å™¨
scp /local/file.txt user@server.com:/remote/directory/

# ä¸‹è½½è¿œç¨‹æ–‡ä»¶åˆ°æœ¬åœ°
scp user@server.com:/remote/file.txt /local/directory/

# æŒ‡å®šç«¯å£ä¼ è¾“
scp -P 2222 file.txt user@server.com:/remote/path/
```

**ðŸ“‚ ç›®å½•æ‰¹é‡ä¼ è¾“**
```bash
# ä¸Šä¼ æ•´ä¸ªç›®å½•
scp -r /local/directory/ user@server.com:/remote/path/

# ä¿æŒæ–‡ä»¶å±žæ€§
scp -rp /local/data/ user@server.com:/backup/

# ä½¿ç”¨åŽ‹ç¼©ä¼ è¾“
scp -rC /large/directory/ user@server.com:/remote/backup/
```

### 3.4 scpæ‰¹é‡æ“ä½œæŠ€å·§


**ðŸ”„ æ‰¹é‡æœåŠ¡å™¨æ“ä½œ**
```bash
# åˆ›å»ºæœåŠ¡å™¨åˆ—è¡¨
servers=(
    "web1.company.com"
    "web2.company.com" 
    "web3.company.com"
)

# æ‰¹é‡ä¸Šä¼ é…ç½®æ–‡ä»¶
for server in "${servers[@]}"; do
    echo "æ­£åœ¨ä¸Šä¼ åˆ° $server..."
    scp -r /local/config/ root@$server:/etc/myapp/
    echo "$server ä¸Šä¼ å®Œæˆ"
done
```

**ðŸ“‹ ä½¿ç”¨é…ç½®æ–‡ä»¶ç®€åŒ–æ“ä½œ**

åˆ›å»ºSSHé…ç½®æ–‡ä»¶ `~/.ssh/config`ï¼š
```bash
Host web1
    HostName 192.168.1.10
    User deploy
    Port 22
    IdentityFile ~/.ssh/deploy_key

Host web2
    HostName 192.168.1.11
    User deploy
    Port 22
    IdentityFile ~/.ssh/deploy_key
```

ç®€åŒ–åŽçš„scpå‘½ä»¤ï¼š
```bash
# ç›´æŽ¥ä½¿ç”¨åˆ«å
scp -r /local/app/ web1:/var/www/
scp -r /local/app/ web2:/var/www/
```

---

## 4. ðŸ” æ–‡ä»¶æƒé™ä¿æŒç­–ç•¥


### 4.1 æƒé™ä¿æŒçš„é‡è¦æ€§


**âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦ä¿æŒæƒé™**
åœ¨æ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœä¸æ­£ç¡®å¤„ç†æƒé™ï¼Œå¯èƒ½å¯¼è‡´ï¼š
- **æœåŠ¡æ— æ³•å¯åŠ¨**ï¼šé…ç½®æ–‡ä»¶æƒé™é”™è¯¯
- **å®‰å…¨é£Žé™©**ï¼šæ•æ„Ÿæ–‡ä»¶æƒé™è¿‡å®½
- **åŠŸèƒ½å¼‚å¸¸**ï¼šå¯æ‰§è¡Œæ–‡ä»¶å¤±åŽ»æ‰§è¡Œæƒé™

### 4.2 rsyncæƒé™ä¿æŒç­–ç•¥


**ðŸ”§ rsyncæƒé™å‚æ•°è¯¦è§£**
```bash
# åŸºæœ¬æƒé™ä¿æŒ
rsync -rlptgoD source/ destination/
# -r: é€’å½’
# -l: ä¿æŒç¬¦å·é“¾æŽ¥
# -p: ä¿æŒæƒé™(permissions)
# -t: ä¿æŒæ—¶é—´æˆ³(timestamps)  
# -g: ä¿æŒç»„å½’å±ž(group)
# -o: ä¿æŒæ‰€æœ‰è€…(owner)
# -D: ä¿æŒè®¾å¤‡æ–‡ä»¶å’Œç‰¹æ®Šæ–‡ä»¶

# ç®€åŒ–å†™æ³•ï¼ˆå½’æ¡£æ¨¡å¼ï¼‰
rsync -a source/ destination/  # ç­‰åŒäºŽä¸Šé¢çš„é€‰é¡¹ç»„åˆ
```

**ðŸ‘¥ å¤„ç†æƒé™æ˜ å°„é—®é¢˜**
```bash
# å½“ç›®æ ‡ç³»ç»Ÿç”¨æˆ·ä¸åŒæ—¶
rsync -av --no-o --no-g source/ user@server:destination/
# --no-o: ä¸ä¿æŒæ‰€æœ‰è€…ï¼Œä½¿ç”¨ç›®æ ‡ç³»ç»Ÿçš„å½“å‰ç”¨æˆ·
# --no-g: ä¸ä¿æŒç»„ï¼Œä½¿ç”¨ç›®æ ‡ç³»ç»Ÿçš„é»˜è®¤ç»„

# æ˜ å°„ç”¨æˆ·å’Œç»„
rsync -av --usermap=www-data:nginx --groupmap=www-data:nginx \
    source/ user@server:destination/
```

### 4.3 scpæƒé™ä¿æŒç­–ç•¥


**ðŸ“ scpæƒé™ä¿æŒé€‰é¡¹**
```bash
# ä¿æŒåŽŸå§‹æƒé™å’Œæ—¶é—´æˆ³
scp -p file.txt user@server:/path/

# é€’å½’ä¼ è¾“å¹¶ä¿æŒæƒé™
scp -rp /local/directory/ user@server:/remote/path/
```

### 4.4 æƒé™é—®é¢˜æŽ’æŸ¥å’Œä¿®å¤


**ðŸ” æƒé™é—®é¢˜è¯Šæ–­**
```bash
# ä¼ è¾“å‰æ£€æŸ¥æºæ–‡ä»¶æƒé™
ls -la /source/important_file
stat /source/important_file

# ä¼ è¾“åŽéªŒè¯ç›®æ ‡æƒé™
ssh user@server "ls -la /destination/important_file"
ssh user@server "stat /destination/important_file"
```

**ðŸ› ï¸ æƒé™æ‰¹é‡ä¿®å¤**
```bash
# åˆ›å»ºæƒé™ä¿®å¤è„šæœ¬
cat > fix_permissions.sh << 'EOF'
#!/bin/bash
# ä¿®å¤webç›®å½•æƒé™

# è®¾ç½®ç›®å½•æƒé™
find /var/www/html -type d -exec chmod 755 {} \;

# è®¾ç½®æ–‡ä»¶æƒé™  
find /var/www/html -type f -exec chmod 644 {} \;

# è®¾ç½®ç‰¹æ®Šæ–‡ä»¶æƒé™
chmod +x /var/www/html/scripts/*.sh
chmod 600 /var/www/html/config/database.conf
EOF

# æ‰¹é‡åœ¨å¤šå°æœåŠ¡å™¨æ‰§è¡Œ
for server in web1 web2 web3; do
    scp fix_permissions.sh $server:/tmp/
    ssh $server "bash /tmp/fix_permissions.sh"
done
```

---

## 5. âš¡ å¢žé‡åŒæ­¥ä¼˜åŒ–æŠ€æœ¯


### 5.1 å¢žé‡åŒæ­¥å·¥ä½œåŽŸç†


**ðŸ”¸ ä»€ä¹ˆæ˜¯å¢žé‡åŒæ­¥**
å¢žé‡åŒæ­¥æ˜¯æŒ‡åªä¼ è¾“å‘ç”Ÿå˜åŒ–çš„æ•°æ®ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä¼ è¾“å…¨éƒ¨æ–‡ä»¶ã€‚è¿™å¤§å¤§æé«˜äº†åŒæ­¥æ•ˆçŽ‡ï¼Œç‰¹åˆ«é€‚åˆå¤§åž‹æ–‡ä»¶é›†åˆçš„å®šæœŸåŒæ­¥ã€‚

**ðŸ§  rsyncå¢žé‡ç®—æ³•åŽŸç†**
```
rsyncå¢žé‡åŒæ­¥è¿‡ç¨‹ï¼š
1. æ¯”è¾ƒæ–‡ä»¶åˆ—è¡¨ â†’ æ‰¾å‡ºæ–°å¢žã€åˆ é™¤ã€ä¿®æ”¹çš„æ–‡ä»¶
2. å¯¹äºŽä¿®æ”¹çš„æ–‡ä»¶ â†’ è®¡ç®—æ•°æ®å—æ ¡éªŒå’Œ
3. åªä¼ è¾“å˜åŒ–çš„æ•°æ®å— â†’ è€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶
4. ç›®æ ‡ç«¯é‡ç»„æ–‡ä»¶ â†’ ç”Ÿæˆæœ€ç»ˆç‰ˆæœ¬

ä¼˜åŠ¿ï¼š
- å¤§æ–‡ä»¶åªä¼ è¾“ä¿®æ”¹éƒ¨åˆ†
- å‡å°‘ç½‘ç»œå¸¦å®½ä½¿ç”¨
- æé«˜åŒæ­¥é€Ÿåº¦
```

### 5.2 rsyncå¢žé‡åŒæ­¥ä¼˜åŒ–é…ç½®


**âš¡ åŸºç¡€å¢žé‡åŒæ­¥**
```bash
# æ ‡å‡†å¢žé‡åŒæ­¥å‘½ä»¤
rsync -av --progress source/ destination/

# é¦–æ¬¡åŒæ­¥ï¼ˆå…¨é‡ï¼‰
rsync -av --progress /data/website/ user@server:/var/www/

# åŽç»­åŒæ­¥ï¼ˆå¢žé‡ï¼‰- åªä¼ è¾“å˜åŒ–çš„æ–‡ä»¶
rsync -av --progress /data/website/ user@server:/var/www/
```

**ðŸš€ é«˜çº§ä¼˜åŒ–å‚æ•°**
```bash
# å¯ç”¨åŽ‹ç¼©å’Œä¼˜åŒ–ä¼ è¾“
rsync -avz \
    --compress-level=9 \    # æœ€é«˜åŽ‹ç¼©çŽ‡
    --partial \             # ä¿ç•™éƒ¨åˆ†ä¼ è¾“çš„æ–‡ä»¶
    --partial-dir=.rsync-partial \  # éƒ¨åˆ†æ–‡ä»¶å­˜å‚¨ç›®å½•
    --progress \            # æ˜¾ç¤ºè¿›åº¦
    source/ destination/

# ç½‘ç»œä¼˜åŒ–
rsync -avz \
    --bwlimit=1000 \        # é™åˆ¶å¸¦å®½ä¸º1MB/s
    --timeout=300 \         # è®¾ç½®è¶…æ—¶æ—¶é—´
    source/ user@server:destination/
```

### 5.3 åŸºäºŽæ ¡éªŒå’Œçš„ç²¾ç¡®åŒæ­¥


**ðŸ” æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥**
```bash
# ä½¿ç”¨æ ¡éªŒå’Œæ¯”è¾ƒæ–‡ä»¶ï¼ˆæ›´ç²¾ç¡®ä½†æ›´æ…¢ï¼‰
rsync -avc source/ destination/
# -c: åŸºäºŽæ ¡éªŒå’Œè€Œä¸æ˜¯æ—¶é—´æˆ³å’Œå¤§å°åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ”¹å˜

# é€‚ç”¨åœºæ™¯ï¼š
# - æ–‡ä»¶æ—¶é—´æˆ³ä¸å¯é 
# - éœ€è¦ç¡®ä¿æ•°æ®å®Œæ•´æ€§
# - æ£€æµ‹æ–‡ä»¶æŸå
```

### 5.4 å¢žé‡å¤‡ä»½ç­–ç•¥


**ðŸ“… å¤šç‰ˆæœ¬å¢žé‡å¤‡ä»½**
```bash
# åˆ›å»ºå¢žé‡å¤‡ä»½è„šæœ¬
cat > incremental_backup.sh << 'EOF'
#!/bin/bash

BACKUP_ROOT="/backup"
SOURCE="/data"
DATE=$(date +%Y%m%d_%H%M%S)
CURRENT_BACKUP="$BACKUP_ROOT/backup_$DATE"
LATEST_LINK="$BACKUP_ROOT/latest"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$CURRENT_BACKUP"

# å¢žé‡å¤‡ä»½ï¼ˆç¡¬é“¾æŽ¥æœªæ”¹å˜çš„æ–‡ä»¶ï¼‰
if [ -d "$LATEST_LINK" ]; then
    rsync -av --delete --link-dest="$LATEST_LINK" \
        "$SOURCE/" "$CURRENT_BACKUP/"
else
    rsync -av "$SOURCE/" "$CURRENT_BACKUP/"
fi

# æ›´æ–°æœ€æ–°å¤‡ä»½é“¾æŽ¥
rm -f "$LATEST_LINK"
ln -s "$CURRENT_BACKUP" "$LATEST_LINK"

echo "å¢žé‡å¤‡ä»½å®Œæˆ: $CURRENT_BACKUP"
EOF

chmod +x incremental_backup.sh
```

---

## 6. ðŸš« æŽ’é™¤æ–‡ä»¶ä¸Žç›®å½•é…ç½®


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦æŽ’é™¤æŸäº›æ–‡ä»¶


**ðŸ’¡ æŽ’é™¤æ–‡ä»¶çš„å¸¸è§åŽŸå› **
- **ä¸´æ—¶æ–‡ä»¶**ï¼šæ—¥å¿—æ–‡ä»¶ã€ç¼“å­˜æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶
- **æ•æ„Ÿä¿¡æ¯**ï¼šå¯†ç æ–‡ä»¶ã€ç§é’¥æ–‡ä»¶ã€é…ç½®æ–‡ä»¶
- **å¤§åž‹æ–‡ä»¶**ï¼šåª’ä½“æ–‡ä»¶ã€æ•°æ®åº“æ–‡ä»¶ã€å½’æ¡£æ–‡ä»¶
- **ç‰ˆæœ¬æŽ§åˆ¶**ï¼š.gitç›®å½•ã€.svnç›®å½•
- **ç¼–è¯‘äº§ç‰©**ï¼šå¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€ä¾èµ–åŒ…

### 6.2 rsyncæŽ’é™¤é…ç½®æ–¹æ³•


**ðŸ”§ å‘½ä»¤è¡ŒæŽ’é™¤é€‰é¡¹**
```bash
# æŽ’é™¤å•ä¸ªæ–‡ä»¶æˆ–ç›®å½•
rsync -av --exclude='*.log' source/ destination/
rsync -av --exclude='.git' source/ destination/

# æŽ’é™¤å¤šä¸ªæ¨¡å¼
rsync -av \
    --exclude='*.log' \
    --exclude='*.tmp' \
    --exclude='.git' \
    --exclude='node_modules' \
    source/ destination/
```

**ðŸ“‹ ä½¿ç”¨æŽ’é™¤æ–‡ä»¶åˆ—è¡¨**
```bash
# åˆ›å»ºæŽ’é™¤åˆ—è¡¨æ–‡ä»¶
cat > exclude_patterns.txt << 'EOF'
# æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶
*.log
*.tmp
*.temp
*.cache

# ç‰ˆæœ¬æŽ§åˆ¶ç›®å½•
.git/
.svn/
.hg/

# ç¼–ç¨‹è¯­è¨€ç›¸å…³
node_modules/
__pycache__/
*.pyc
*.pyo
target/
*.class

# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db
desktop.ini

# å¤‡ä»½æ–‡ä»¶
*~
*.bak
*.backup
EOF

# ä½¿ç”¨æŽ’é™¤åˆ—è¡¨
rsync -av --exclude-from=exclude_patterns.txt source/ destination/
```

### 6.3 åŒ…å«å’ŒæŽ’é™¤è§„åˆ™ç»„åˆ


**ðŸŽ¯ å¤æ‚è¿‡æ»¤è§„åˆ™**
```bash
# åªåŒæ­¥ç‰¹å®šç±»åž‹çš„æ–‡ä»¶
rsync -av \
    --include='*.php' \
    --include='*.html' \
    --include='*.css' \
    --include='*.js' \
    --exclude='*' \
    source/ destination/

# æŽ’é™¤å¤§ç›®å½•ä½†åŒ…å«å…¶ä¸­çš„ç‰¹å®šæ–‡ä»¶
rsync -av \
    --exclude='logs/' \
    --include='logs/error.log' \
    --exclude='cache/*' \
    source/ destination/
```

**ðŸ“ è¿‡æ»¤è§„åˆ™æ–‡ä»¶**
```bash
# åˆ›å»ºå¤æ‚çš„è¿‡æ»¤è§„åˆ™æ–‡ä»¶
cat > filter_rules.txt << 'EOF'
# åŒ…å«è§„åˆ™ï¼ˆ+ å¼€å¤´ï¼‰
+ /important_config.conf
+ /scripts/*.sh
+ /data/critical/

# æŽ’é™¤è§„åˆ™ï¼ˆ- å¼€å¤´ï¼‰
- /logs/
- *.tmp
- *.log
- .git/

# é»˜è®¤åŒ…å«å…¶ä»–æ‰€æœ‰å†…å®¹
+ /*
EOF

# ä½¿ç”¨è¿‡æ»¤è§„åˆ™
rsync -av --filter='merge filter_rules.txt' source/ destination/
```

### 6.4 åŠ¨æ€æŽ’é™¤ç­–ç•¥


**ðŸ”„ æ ¹æ®æ¡ä»¶åŠ¨æ€æŽ’é™¤**
```bash
# åˆ›å»ºæ™ºèƒ½æŽ’é™¤è„šæœ¬
cat > smart_sync.sh << 'EOF'
#!/bin/bash

SOURCE="$1"
DEST="$2"
EXCLUDE_FILE="/tmp/exclude_$(date +%s).txt"

# åŸºç¡€æŽ’é™¤åˆ—è¡¨
cat > "$EXCLUDE_FILE" << 'PATTERNS'
*.log
*.tmp
.git/
PATTERNS

# æ ¹æ®ç›®å½•å¤§å°å†³å®šæ˜¯å¦æŽ’é™¤å¤§æ–‡ä»¶
if [ $(du -s "$SOURCE" | cut -f1) -gt 1000000 ]; then
    echo "æ£€æµ‹åˆ°å¤§åž‹ç›®å½•ï¼ŒæŽ’é™¤åª’ä½“æ–‡ä»¶"
    echo "*.mp4" >> "$EXCLUDE_FILE"
    echo "*.avi" >> "$EXCLUDE_FILE"
    echo "*.mkv" >> "$EXCLUDE_FILE"
fi

# æ‰§è¡ŒåŒæ­¥
rsync -av --exclude-from="$EXCLUDE_FILE" "$SOURCE/" "$DEST/"

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -f "$EXCLUDE_FILE"
EOF

chmod +x smart_sync.sh
```

---

## 7. âœ… æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ


### 7.1 ä¸ºä»€ä¹ˆéœ€è¦å®Œæ•´æ€§æ ¡éªŒ


**âš ï¸ æ•°æ®å®Œæ•´æ€§é£Žé™©**
æ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š
- **ç½‘ç»œä¼ è¾“é”™è¯¯**ï¼šæ•°æ®åŒ…ä¸¢å¤±æˆ–æŸå
- **ç¡¬ç›˜æ•…éšœ**ï¼šè¯»å†™è¿‡ç¨‹ä¸­çš„ç£ç›˜é”™è¯¯
- **å†…å­˜é”™è¯¯**ï¼šç³»ç»Ÿå†…å­˜æ•…éšœå¯¼è‡´æ•°æ®æŸå
- **ä¸­æ–­ä¼ è¾“**ï¼šä¼ è¾“è¿‡ç¨‹æ„å¤–ä¸­æ–­

### 7.2 å†…å»ºæ ¡éªŒæœºåˆ¶


**ðŸ” rsyncå†…å»ºæ ¡éªŒ**
```bash
# ä½¿ç”¨æ ¡éªŒå’Œæ¨¡å¼ï¼ˆæ›´å®‰å…¨ä½†æ›´æ…¢ï¼‰
rsync -avc source/ destination/
# -cå‚æ•°å¼ºåˆ¶rsyncä½¿ç”¨æ–‡ä»¶å†…å®¹æ ¡éªŒå’Œæ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦éœ€è¦æ›´æ–°

# æŸ¥çœ‹rsyncçš„æ ¡éªŒè¿‡ç¨‹
rsync -avc --progress --stats source/ destination/
```

**ðŸ“Š ä¼ è¾“ç»Ÿè®¡ä¿¡æ¯**
```bash
# æ˜¾ç¤ºè¯¦ç»†çš„ä¼ è¾“ç»Ÿè®¡
rsync -av --stats source/ destination/

# è¾“å‡ºç¤ºä¾‹ï¼š
# Number of files: 1,234
# Number of files transferred: 56
# Total file size: 123,456,789 bytes
# Total transferred file size: 12,345 bytes
# Literal data: 12,345 bytes
# Matched data: 0 bytes
# File list size: 1,234
# Total bytes sent: 23,456
# Total bytes received: 789
```

### 7.3 æ‰‹åŠ¨æ ¡éªŒæ–¹æ³•


**ðŸ” MD5æ ¡éªŒå’ŒéªŒè¯**
```bash
# ç”Ÿæˆæºæ–‡ä»¶çš„æ ¡éªŒå’Œ
find /source -type f -exec md5sum {} \; > source_checksums.txt

# åœ¨ç›®æ ‡ä½ç½®ç”Ÿæˆæ ¡éªŒå’Œ
find /destination -type f -exec md5sum {} \; > dest_checksums.txt

# æ¯”è¾ƒæ ¡éªŒå’Œæ–‡ä»¶
diff source_checksums.txt dest_checksums.txt
```

**âš¡ SHA256æ ¡éªŒï¼ˆæ›´å®‰å…¨ï¼‰**
```bash
# åˆ›å»ºæ ¡éªŒè„šæœ¬
cat > verify_integrity.sh << 'EOF'
#!/bin/bash

SOURCE_DIR="$1"
DEST_DIR="$2"

if [ ! -d "$SOURCE_DIR" ] || [ ! -d "$DEST_DIR" ]; then
    echo "ç”¨æ³•: $0 <æºç›®å½•> <ç›®æ ‡ç›®å½•>"
    exit 1
fi

echo "æ­£åœ¨ç”Ÿæˆæºç›®å½•æ ¡éªŒå’Œ..."
cd "$SOURCE_DIR"
find . -type f -exec sha256sum {} \; | sort > /tmp/source_sha256.txt

echo "æ­£åœ¨ç”Ÿæˆç›®æ ‡ç›®å½•æ ¡éªŒå’Œ..."
cd "$DEST_DIR"  
find . -type f -exec sha256sum {} \; | sort > /tmp/dest_sha256.txt

echo "æ­£åœ¨æ¯”è¾ƒæ ¡éªŒå’Œ..."
if diff /tmp/source_sha256.txt /tmp/dest_sha256.txt > /dev/null; then
    echo "âœ… æ–‡ä»¶å®Œæ•´æ€§éªŒè¯é€šè¿‡"
else
    echo "âŒ å‘çŽ°æ–‡ä»¶å·®å¼‚ï¼š"
    diff /tmp/source_sha256.txt /tmp/dest_sha256.txt
fi

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -f /tmp/source_sha256.txt /tmp/dest_sha256.txt
EOF

chmod +x verify_integrity.sh
```

### 7.4 è‡ªåŠ¨åŒ–æ ¡éªŒæµç¨‹


**ðŸ¤– é›†æˆæ ¡éªŒçš„åŒæ­¥è„šæœ¬**
```bash
# åˆ›å»ºå¸¦æ ¡éªŒçš„åŒæ­¥è„šæœ¬
cat > secure_sync.sh << 'EOF'
#!/bin/bash

SOURCE="$1"
DEST="$2"
LOG_FILE="/var/log/secure_sync.log"

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

# ç¬¬ä¸€æ­¥ï¼šæ‰§è¡ŒåŒæ­¥
log "å¼€å§‹æ–‡ä»¶åŒæ­¥: $SOURCE -> $DEST"
if rsync -av --progress "$SOURCE/" "$DEST/"; then
    log "æ–‡ä»¶åŒæ­¥å®Œæˆ"
else
    log "âŒ æ–‡ä»¶åŒæ­¥å¤±è´¥"
    exit 1
fi

# ç¬¬äºŒæ­¥ï¼šå®Œæ•´æ€§æ ¡éªŒ
log "å¼€å§‹å®Œæ•´æ€§æ ¡éªŒ"
cd "$SOURCE"
find . -type f -exec sha256sum {} \; | sort > /tmp/source_hashes.txt
cd "$DEST"
find . -type f -exec sha256sum {} \; | sort > /tmp/dest_hashes.txt

if diff /tmp/source_hashes.txt /tmp/dest_hashes.txt > /dev/null; then
    log "âœ… å®Œæ•´æ€§æ ¡éªŒé€šè¿‡"
else
    log "âŒ å®Œæ•´æ€§æ ¡éªŒå¤±è´¥ï¼Œå‘çŽ°æ–‡ä»¶å·®å¼‚"
    diff /tmp/source_hashes.txt /tmp/dest_hashes.txt >> "$LOG_FILE"
    exit 1
fi

# æ¸…ç†
rm -f /tmp/source_hashes.txt /tmp/dest_hashes.txt
log "åŒæ­¥å’Œæ ¡éªŒæµç¨‹å®Œæˆ"
EOF

chmod +x secure_sync.sh
```

---

## 8. ðŸ”„ ç½‘ç»œä¸­æ–­æ¢å¤æœºåˆ¶


### 8.1 ç½‘ç»œä¸­æ–­é—®é¢˜åˆ†æž


**âš ï¸ å¸¸è§ä¸­æ–­åœºæ™¯**
- **ç½‘ç»œä¸ç¨³å®š**ï¼šWiFiä¿¡å·å¼±ã€ç½‘ç»œæ‹¥å µ
- **è¿žæŽ¥è¶…æ—¶**ï¼šé•¿æ—¶é—´ä¼ è¾“å¯¼è‡´è¿žæŽ¥æ–­å¼€
- **æœåŠ¡å™¨é‡å¯**ï¼šç›®æ ‡æœåŠ¡å™¨ç»´æŠ¤æˆ–æ•…éšœ
- **å®¢æˆ·ç«¯æ•…éšœ**ï¼šæœ¬åœ°ç³»ç»Ÿé—®é¢˜å¯¼è‡´ä¼ è¾“ä¸­æ–­

### 8.2 rsyncæ–­ç‚¹ç»­ä¼ æœºåˆ¶


**âš¡ éƒ¨åˆ†ä¼ è¾“ä¿æŠ¤**
```bash
# å¯ç”¨éƒ¨åˆ†ä¼ è¾“ä¿æŠ¤
rsync -av \
    --partial \                    # ä¿ç•™éƒ¨åˆ†ä¼ è¾“çš„æ–‡ä»¶
    --partial-dir=.rsync-partial \ # æŒ‡å®šéƒ¨åˆ†æ–‡ä»¶å­˜å‚¨ç›®å½•
    --progress \                   # æ˜¾ç¤ºä¼ è¾“è¿›åº¦
    source/ destination/
```

**ðŸ”§ ç½‘ç»œä¼˜åŒ–å‚æ•°**
```bash
# é’ˆå¯¹ä¸ç¨³å®šç½‘ç»œçš„ä¼˜åŒ–é…ç½®
rsync -av \
    --timeout=60 \          # è®¾ç½®I/Oè¶…æ—¶ä¸º60ç§’
    --contimeout=30 \       # è®¾ç½®è¿žæŽ¥è¶…æ—¶ä¸º30ç§’  
    --partial \             # æ–­ç‚¹ç»­ä¼ 
    --partial-dir=.rsync-tmp \
    --compress \            # å¯ç”¨åŽ‹ç¼©å‡å°‘ä¼ è¾“é‡
    --compress-level=6 \    # é€‚ä¸­çš„åŽ‹ç¼©çº§åˆ«
    source/ user@server:destination/
```

### 8.3 è‡ªåŠ¨é‡è¯•æœºåˆ¶


**ðŸ”„ åˆ›å»ºé‡è¯•è„šæœ¬**
```bash
# åˆ›å»ºè‡ªåŠ¨é‡è¯•çš„åŒæ­¥è„šæœ¬
cat > retry_sync.sh << 'EOF'
#!/bin/bash

SOURCE="$1"
DEST="$2"
MAX_RETRIES=5
RETRY_DELAY=10

if [ $# -ne 2 ]; then
    echo "ç”¨æ³•: $0 <æºè·¯å¾„> <ç›®æ ‡è·¯å¾„>"
    exit 1
fi

for attempt in $(seq 1 $MAX_RETRIES); do
    echo "å°è¯•ç¬¬ $attempt æ¬¡åŒæ­¥..."
    
    if rsync -av --partial --partial-dir=.rsync-partial \
       --timeout=120 --progress "$SOURCE/" "$DEST/"; then
        echo "âœ… åŒæ­¥æˆåŠŸå®Œæˆ"
        exit 0
    else
        echo "âŒ ç¬¬ $attempt æ¬¡åŒæ­¥å¤±è´¥"
        if [ $attempt -lt $MAX_RETRIES ]; then
            echo "ç­‰å¾… $RETRY_DELAY ç§’åŽé‡è¯•..."
            sleep $RETRY_DELAY
            # æ¯æ¬¡é‡è¯•å¢žåŠ å»¶è¿Ÿæ—¶é—´
            RETRY_DELAY=$((RETRY_DELAY + 5))
        fi
    fi
done

echo "âŒ æ‰€æœ‰é‡è¯•å¤±è´¥ï¼ŒåŒæ­¥æœªå®Œæˆ"
exit 1
EOF

chmod +x retry_sync.sh
```

### 8.4 ç›‘æŽ§å’Œæ¢å¤ç­–ç•¥


**ðŸ“Š ä¼ è¾“çŠ¶æ€ç›‘æŽ§**
```bash
# åˆ›å»ºç›‘æŽ§è„šæœ¬
cat > sync_monitor.sh << 'EOF'
#!/bin/bash

SYNC_LOCK="/tmp/rsync.lock"
PID_FILE="/tmp/rsync.pid"
LOG_FILE="/var/log/sync_monitor.log"

log_message() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" >> "$LOG_FILE"
}

# æ£€æŸ¥æ˜¯å¦æœ‰rsyncè¿›ç¨‹æ­£åœ¨è¿è¡Œ
if [ -f "$PID_FILE" ]; then
    PID=$(cat "$PID_FILE")
    if ps -p "$PID" > /dev/null 2>&1; then
        # æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å¡æ­»ï¼ˆè¶…è¿‡1å°æ—¶æ²¡æœ‰æ´»åŠ¨ï¼‰
        if [ $(($(date +%s) - $(stat -f %m "$PID_FILE" 2>/dev/null || stat -c %Y "$PID_FILE"))) -gt 3600 ]; then
            log_message "æ£€æµ‹åˆ°rsyncè¿›ç¨‹å¯èƒ½å¡æ­»ï¼Œæ­£åœ¨ç»ˆæ­¢..."
            kill "$PID"
            rm -f "$PID_FILE" "$SYNC_LOCK"
        else
            log_message "rsyncè¿›ç¨‹æ­£å¸¸è¿è¡Œä¸­ (PID: $PID)"
        fi
    else
        log_message "æ¸…ç†é™ˆæ—§çš„PIDæ–‡ä»¶"
        rm -f "$PID_FILE" "$SYNC_LOCK"
    fi
fi
EOF

# è®¾ç½®å®šæœŸç›‘æŽ§
chmod +x sync_monitor.sh
# æ·»åŠ åˆ°crontab: */5 * * * * /path/to/sync_monitor.sh
```

### 8.5 ç½‘ç»œçŠ¶æ€æ£€æŸ¥


**ðŸŒ åŒæ­¥å‰ç½‘ç»œæ£€æŸ¥**
```bash
# åˆ›å»ºç½‘ç»œæ£€æŸ¥åŠŸèƒ½
cat > network_check_sync.sh << 'EOF'
#!/bin/bash

TARGET_HOST="$1"
SOURCE="$2"
DEST="$3"

check_network() {
    local host="$1"
    
    # æ£€æŸ¥åŸºæœ¬è¿žé€šæ€§
    if ! ping -c 3 -W 5 "$host" > /dev/null 2>&1; then
        echo "âŒ æ— æ³•pingé€šç›®æ ‡ä¸»æœº $host"
        return 1
    fi
    
    # æ£€æŸ¥SSHè¿žæŽ¥
    if ! ssh -o ConnectTimeout=10 -o BatchMode=yes "$host" exit > /dev/null 2>&1; then
        echo "âŒ SSHè¿žæŽ¥å¤±è´¥"
        return 1
    fi
    
    echo "âœ… ç½‘ç»œè¿žæŽ¥æ­£å¸¸"
    return 0
}

# ç½‘ç»œæ£€æŸ¥
echo "æ­£åœ¨æ£€æŸ¥ç½‘ç»œè¿žæŽ¥..."
if ! check_network "$TARGET_HOST"; then
    echo "ç½‘ç»œæ£€æŸ¥å¤±è´¥ï¼Œå–æ¶ˆåŒæ­¥"
    exit 1
fi

# æ‰§è¡ŒåŒæ­¥
echo "å¼€å§‹æ–‡ä»¶åŒæ­¥..."
rsync -av --partial --progress "$SOURCE/" "$TARGET_HOST:$DEST/"
EOF

chmod +x network_check_sync.sh
```

---

## 9. ðŸ“¦ å¤§æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–


### 9.1 å¤§æ–‡ä»¶ä¼ è¾“æŒ‘æˆ˜


**âš ï¸ å¤§æ–‡ä»¶ä¼ è¾“é—®é¢˜**
- **ä¼ è¾“æ—¶é—´é•¿**ï¼šå®¹æ˜“å› ç½‘ç»œä¸­æ–­å¯¼è‡´å¤±è´¥
- **å†…å­˜å ç”¨å¤§**ï¼šå¯èƒ½å¯¼è‡´ç³»ç»Ÿèµ„æºç´§å¼ 
- **ç½‘ç»œå¸¦å®½**ï¼šå ç”¨å¤§é‡å¸¦å®½å½±å“å…¶ä»–æœåŠ¡
- **å­˜å‚¨ç©ºé—´**ï¼šç›®æ ‡ç³»ç»Ÿå¯èƒ½ç©ºé—´ä¸è¶³

### 9.2 åˆ†å—ä¼ è¾“ç­–ç•¥


**âš¡ rsyncåˆ†å—ä¼˜åŒ–**
```bash
# å¤§æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–é…ç½®
rsync -av \
    --inplace \              # å°±åœ°æ›´æ–°æ–‡ä»¶ï¼Œå‡å°‘ç£ç›˜ç©ºé—´éœ€æ±‚
    --append \               # è¿½åŠ æ¨¡å¼ï¼Œé€‚åˆæ–­ç‚¹ç»­ä¼ 
    --partial \              # ä¿ç•™éƒ¨åˆ†ä¼ è¾“æ–‡ä»¶
    --progress \             # æ˜¾ç¤ºä¼ è¾“è¿›åº¦
    --compress \             # å¯ç”¨åŽ‹ç¼©
    --compress-level=1 \     # ä½ŽåŽ‹ç¼©çŽ‡ï¼ŒèŠ‚çœCPU
    --bwlimit=5000 \         # é™åˆ¶å¸¦å®½ä¸º5MB/s
    large_file.dat user@server:/path/
```

### 9.3 å¹¶è¡Œä¼ è¾“æŠ€æœ¯


**ðŸš€ å¤šè¿›ç¨‹å¹¶è¡ŒåŒæ­¥**
```bash
# åˆ›å»ºå¹¶è¡Œä¼ è¾“è„šæœ¬
cat > parallel_sync.sh << 'EOF'
#!/bin/bash

SOURCE_DIR="$1"
DEST_HOST="$2"
DEST_DIR="$3"
PARALLEL_JOBS=4

if [ $# -ne 3 ]; then
    echo "ç”¨æ³•: $0 <æºç›®å½•> <ç›®æ ‡ä¸»æœº> <ç›®æ ‡ç›®å½•>"
    exit 1
fi

# åˆ›å»ºæ–‡ä»¶åˆ—è¡¨
find "$SOURCE_DIR" -type f > /tmp/file_list.txt
total_files=$(wc -l < /tmp/file_list.txt)
files_per_job=$((total_files / PARALLEL_JOBS + 1))

echo "æ€»æ–‡ä»¶æ•°: $total_filesï¼Œå¹¶è¡Œä»»åŠ¡æ•°: $PARALLEL_JOBS"

# åˆ†å‰²æ–‡ä»¶åˆ—è¡¨
split -l "$files_per_job" /tmp/file_list.txt /tmp/chunk_

# å¹¶è¡Œä¼ è¾“å‡½æ•°
transfer_chunk() {
    local chunk_file="$1"
    local job_id="$2"
    
    echo "å¯åŠ¨ä»»åŠ¡ $job_id..."
    while IFS= read -r file; do
        rel_path=$(realpath --relative-to="$SOURCE_DIR" "$file")
        dest_path="$DEST_HOST:$DEST_DIR/$rel_path"
        dest_dir=$(dirname "$dest_path")
        
        # åˆ›å»ºç›®æ ‡ç›®å½•
        ssh "$DEST_HOST" "mkdir -p $(dirname "$DEST_DIR/$rel_path")"
        
        # ä¼ è¾“æ–‡ä»¶
        rsync -av --partial --progress "$file" "$dest_path"
    done < "$chunk_file"
    
    echo "ä»»åŠ¡ $job_id å®Œæˆ"
}

# å¯åŠ¨å¹¶è¡Œä»»åŠ¡
for chunk in /tmp/chunk_*; do
    if [ -f "$chunk" ]; then
        job_id=$(basename "$chunk" | cut -d_ -f2)
        transfer_chunk "$chunk" "$job_id" &
    fi
done

# ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
wait

echo "æ‰€æœ‰å¹¶è¡Œä¼ è¾“ä»»åŠ¡å®Œæˆ"

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -f /tmp/file_list.txt /tmp/chunk_*
EOF

chmod +x parallel_sync.sh
```

### 9.4 åŽ‹ç¼©ä¼ è¾“ä¼˜åŒ–


**ðŸ—œï¸ æ™ºèƒ½åŽ‹ç¼©ç­–ç•¥**
```bash
# æ ¹æ®æ–‡ä»¶ç±»åž‹é€‰æ‹©åŽ‹ç¼©ç­–ç•¥
cat > smart_compress_sync.sh << 'EOF'
#!/bin/bash

SOURCE="$1"
DEST="$2"

# ä¸åŒæ–‡ä»¶ç±»åž‹çš„åŽ‹ç¼©è®¾ç½®
compress_for_filetype() {
    local file="$1"
    local ext="${file##*.}"
    
    case "$ext" in
        # å·²åŽ‹ç¼©æ–‡ä»¶ï¼Œä¸å†åŽ‹ç¼©
        zip|gz|bz2|xz|7z|rar|mp3|mp4|jpg|jpeg|png|gif)
            echo "--compress-level=0"
            ;;
        # æ–‡æœ¬æ–‡ä»¶ï¼Œé«˜åŽ‹ç¼©çŽ‡
        txt|log|conf|xml|html|css|js|php|py|sh)
            echo "--compress-level=9"
            ;;
        # å…¶ä»–æ–‡ä»¶ï¼Œä¸­ç­‰åŽ‹ç¼©
        *)
            echo "--compress-level=6"
            ;;
    esac
}

# èŽ·å–ä¸»è¦æ–‡ä»¶ç±»åž‹å¹¶é€‰æ‹©åˆé€‚çš„åŽ‹ç¼©çº§åˆ«
sample_files=$(find "$SOURCE" -type f | head -20)
text_files=0
binary_files=0

for file in $sample_files; do
    if file "$file" | grep -q "text"; then
        ((text_files++))
    else
        ((binary_files++))
    fi
done

if [ $text_files -gt $binary_files ]; then
    COMPRESS_LEVEL=9
else
    COMPRESS_LEVEL=3
fi

echo "æ£€æµ‹åˆ°ä¸»è¦æ–‡ä»¶ç±»åž‹ï¼Œä½¿ç”¨åŽ‹ç¼©çº§åˆ«: $COMPRESS_LEVEL"

rsync -av \
    --compress \
    --compress-level=$COMPRESS_LEVEL \
    --partial \
    --progress \
    "$SOURCE/" "$DEST/"
EOF

chmod +x smart_compress_sync.sh
```

### 9.5 å­˜å‚¨ç©ºé—´ç®¡ç†


**ðŸ’¾ ç£ç›˜ç©ºé—´é¢„æ£€æŸ¥**
```bash
# åˆ›å»ºç©ºé—´æ£€æŸ¥åŒæ­¥è„šæœ¬
cat > space_aware_sync.sh << 'EOF'
#!/bin/bash

SOURCE="$1"
DEST_HOST="$2"  
DEST_PATH="$3"
SAFETY_MARGIN_GB=2

check_space() {
    local source_dir="$1"
    local dest_host="$2"
    local dest_path="$3"
    
    # è®¡ç®—æºç›®å½•å¤§å°ï¼ˆGBï¼‰
    source_size_gb=$(du -sb "$source_dir" | awk '{print int($1/1024/1024/1024)+1}')
    
    # èŽ·å–ç›®æ ‡ç³»ç»Ÿå¯ç”¨ç©ºé—´ï¼ˆGBï¼‰
    available_gb=$(ssh "$dest_host" "df -BG '$dest_path' | tail -n1" | awk '{print int($4)}')
    
    echo "æºç›®å½•å¤§å°: ${source_size_gb}GB"
    echo "ç›®æ ‡å¯ç”¨ç©ºé—´: ${available_gb}GB"
    
    if [ $((available_gb - SAFETY_MARGIN_GB)) -lt $source_size_gb ]; then
        echo "âŒ ç›®æ ‡ç³»ç»Ÿç©ºé—´ä¸è¶³"
        echo "éœ€è¦: ${source_size_gb}GBï¼Œå¯ç”¨: ${available_gb}GB"
        return 1
    fi
    
    echo "âœ… ç£ç›˜ç©ºé—´å……è¶³"
    return 0
}

# ç©ºé—´æ£€æŸ¥
if ! check_space "$SOURCE" "$DEST_HOST" "$DEST_PATH"; then
    echo "åŒæ­¥å–æ¶ˆï¼šç£ç›˜ç©ºé—´ä¸è¶³"
    exit 1
fi

# æ‰§è¡ŒåŒæ­¥
rsync -av --partial --progress "$SOURCE/" "$DEST_HOST:$DEST_PATH/"
EOF

chmod +x space_aware_sync.sh
```

---

## 10. ðŸŽ¯ å®žæˆ˜åº”ç”¨åœºæ™¯


### 10.1 Webç«™ç‚¹éƒ¨ç½²åœºæ™¯


**ðŸŒ å¤šæœåŠ¡å™¨ç«™ç‚¹éƒ¨ç½²**
```bash
# åˆ›å»ºWebéƒ¨ç½²è„šæœ¬
cat > web_deploy.sh << 'EOF'
#!/bin/bash

# é…ç½®ä¿¡æ¯
LOCAL_SITE="/var/www/mysite"
WEB_SERVERS=("web1.company.com" "web2.company.com" "web3.company.com")
REMOTE_PATH="/var/www/html"
BACKUP_PATH="/backup/previous_deploy"

# æŽ’é™¤æ–‡ä»¶åˆ—è¡¨
cat > /tmp/deploy_exclude.txt << 'EXCLUDE'
.git/
.svn/
*.log
.env.local
uploads/temp/
cache/
node_modules/
EXCLUDE

deploy_to_server() {
    local server="$1"
    echo "æ­£åœ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨: $server"
    
    # å¤‡ä»½å½“å‰ç‰ˆæœ¬
    ssh "$server" "cp -r $REMOTE_PATH $BACKUP_PATH"
    
    # åŒæ­¥æ–°ç‰ˆæœ¬
    if rsync -avz --delete \
        --exclude-from=/tmp/deploy_exclude.txt \
        "$LOCAL_SITE/" "$server:$REMOTE_PATH/"; then
        
        # è®¾ç½®æ­£ç¡®çš„æƒé™
        ssh "$server" "
            chown -R www-data:www-data $REMOTE_PATH
            find $REMOTE_PATH -type d -exec chmod 755 {} \;
            find $REMOTE_PATH -type f -exec chmod 644 {} \;
            chmod +x $REMOTE_PATH/scripts/*.sh
        "
        
        echo "âœ… $server éƒ¨ç½²å®Œæˆ"
        return 0
    else
        echo "âŒ $server éƒ¨ç½²å¤±è´¥"
        return 1
    fi
}

# ä¸²è¡Œéƒ¨ç½²åˆ°æ‰€æœ‰æœåŠ¡å™¨
success_count=0
for server in "${WEB_SERVERS[@]}"; do
    if deploy_to_server "$server"; then
        ((success_count++))
    fi
done

echo "éƒ¨ç½²å®Œæˆ: $success_count/${#WEB_SERVERS[@]} å°æœåŠ¡å™¨æˆåŠŸ"

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -f /tmp/deploy_exclude.txt
EOF

chmod +x web_deploy.sh
```

### 10.2 æ•°æ®å¤‡ä»½åœºæ™¯


**ðŸ’¾ è‡ªåŠ¨åŒ–æ•°æ®å¤‡ä»½**
```bash
# åˆ›å»ºè‡ªåŠ¨å¤‡ä»½è„šæœ¬
cat > auto_backup.sh << 'EOF'
#!/bin/bash

# é…ç½®å‚æ•°
BACKUP_SOURCE="/important/data"
BACKUP_SERVER="backup.company.com"
BACKUP_BASE="/backups"
RETENTION_DAYS=30

# æ—¥æœŸæ ‡è¯†
DATE=$(date +%Y%m%d)
BACKUP_DIR="$BACKUP_BASE/daily_backup_$DATE"
LATEST_LINK="$BACKUP_BASE/latest"

# æ—¥å¿—æ–‡ä»¶
LOG_FILE="/var/log/backup_$(date +%Y%m).log"

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

# åˆ›å»ºå¤‡ä»½ç›®å½•
ssh "$BACKUP_SERVER" "mkdir -p $BACKUP_DIR"

log "å¼€å§‹å¤‡ä»½: $BACKUP_SOURCE -> $BACKUP_SERVER:$BACKUP_DIR"

# å¢žé‡å¤‡ä»½ï¼ˆåŸºäºŽä¸Šæ¬¡å¤‡ä»½ï¼‰
if ssh "$BACKUP_SERVER" "[ -d $LATEST_LINK ]"; then
    log "æ‰§è¡Œå¢žé‡å¤‡ä»½"
    rsync -av --delete \
        --link-dest="$LATEST_LINK" \
        --exclude='*.tmp' \
        --exclude='cache/' \
        "$BACKUP_SOURCE/" "$BACKUP_SERVER:$BACKUP_DIR/"
else
    log "æ‰§è¡Œå®Œæ•´å¤‡ä»½"
    rsync -av --delete \
        --exclude='*.tmp' \
        --exclude='cache/' \
        "$BACKUP_SOURCE/" "$BACKUP_SERVER:$BACKUP_DIR/"
fi

if [ $? -eq 0 ]; then
    log "âœ… å¤‡ä»½å®Œæˆ"
    
    # æ›´æ–°æœ€æ–°å¤‡ä»½é“¾æŽ¥
    ssh "$BACKUP_SERVER" "
        rm -f $LATEST_LINK
        ln -s $BACKUP_DIR $LATEST_LINK
    "
    
    # æ¸…ç†è¿‡æœŸå¤‡ä»½
    ssh "$BACKUP_SERVER" "
        find $BACKUP_BASE -name 'daily_backup_*' -type d -mtime +$RETENTION_DAYS -exec rm -rf {} \;
    "
    
    log "å¤‡ä»½æ¸…ç†å®Œæˆï¼Œä¿ç•™ $RETENTION_DAYS å¤©"
else
    log "âŒ å¤‡ä»½å¤±è´¥"
    exit 1
fi
EOF

chmod +x auto_backup.sh

# æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡
# crontab -e
# 0 2 * * * /path/to/auto_backup.sh
```

### 10.3 å¼€å‘çŽ¯å¢ƒåŒæ­¥åœºæ™¯


**ðŸ‘¨â€ðŸ’» å¼€å‘çŽ¯å¢ƒå¿«é€Ÿéƒ¨ç½²**
```bash
# åˆ›å»ºå¼€å‘çŽ¯å¢ƒåŒæ­¥è„šæœ¬
cat > dev_sync.sh << 'EOF'
#!/bin/bash

# å¼€å‘æœåŠ¡å™¨é…ç½®
DEV_SERVERS=("dev1" "dev2" "dev3")
PROJECT_PATH="/var/www/projects"
LOCAL_PROJECT="$1"

if [ ! -d "$LOCAL_PROJECT" ]; then
    echo "é”™è¯¯: æœ¬åœ°é¡¹ç›®ç›®å½•ä¸å­˜åœ¨: $LOCAL_PROJECT"
    exit 1
fi

PROJECT_NAME=$(basename "$LOCAL_PROJECT")

# æŽ’é™¤å¼€å‘ç›¸å…³æ–‡ä»¶
cat > /tmp/dev_exclude.txt << 'EXCLUDE'
.git/
.idea/
.vscode/
node_modules/
vendor/
*.log
.env
.env.local
coverage/
.nyc_output/
dist/
build/
EXCLUDE

sync_to_dev() {
    local server="$1"
    echo "åŒæ­¥åˆ°å¼€å‘æœåŠ¡å™¨: $server"
    
    # åˆ›å»ºé¡¹ç›®ç›®å½•
    ssh "$server" "mkdir -p $PROJECT_PATH/$PROJECT_NAME"
    
    # åŒæ­¥æ–‡ä»¶
    rsync -avz --delete \
        --exclude-from=/tmp/dev_exclude.txt \
        "$LOCAL_PROJECT/" "$server:$PROJECT_PATH/$PROJECT_NAME/"
    
    # è®¾ç½®å¼€å‘çŽ¯å¢ƒæƒé™
    ssh "$server" "
        chown -R developer:developer $PROJECT_PATH/$PROJECT_NAME
        chmod -R 755 $PROJECT_PATH/$PROJECT_NAME
    "
    
    echo "âœ… $server åŒæ­¥å®Œæˆ"
}

# å¹¶è¡ŒåŒæ­¥åˆ°æ‰€æœ‰å¼€å‘æœåŠ¡å™¨
for server in "${DEV_SERVERS[@]}"; do
    sync_to_dev "$server" &
done

# ç­‰å¾…æ‰€æœ‰åŒæ­¥å®Œæˆ
wait

echo "æ‰€æœ‰å¼€å‘çŽ¯å¢ƒåŒæ­¥å®Œæˆ"
rm -f /tmp/dev_exclude.txt
EOF

chmod +x dev_sync.sh
```

---

## 11. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŽŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ðŸ”¸ æ–‡ä»¶åŒæ­¥æœ¬è´¨ï¼šè®©å¤šä¸ªä½ç½®çš„æ–‡ä»¶ä¿æŒä¸€è‡´ï¼Œåªä¼ è¾“å˜åŒ–éƒ¨åˆ†
ðŸ”¸ rsyncæ ¸å¿ƒä¼˜åŠ¿ï¼šå¢žé‡ä¼ è¾“ã€åŽ‹ç¼©ã€æƒé™ä¿æŒã€æ–­ç‚¹ç»­ä¼ 
ðŸ”¸ scpé€‚ç”¨åœºæ™¯ï¼šç®€å•æ–‡ä»¶ä¼ è¾“ã€åŠ å¯†è¦æ±‚é«˜ã€ä¸€æ¬¡æ€§æ“ä½œ
ðŸ”¸ æƒé™ä¿æŒï¼šç¡®ä¿ä¼ è¾“åŽæ–‡ä»¶æƒé™ã€æ‰€æœ‰è€…ã€æ—¶é—´æˆ³ç­‰å±žæ€§æ­£ç¡®
ðŸ”¸ æŽ’é™¤ç­–ç•¥ï¼šé¿å…ä¼ è¾“ä¸å¿…è¦æ–‡ä»¶ï¼Œæé«˜æ•ˆçŽ‡å’Œå®‰å…¨æ€§
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ é€‰æ‹©åˆé€‚çš„å·¥å…·**
```
rsyncé€‚ç”¨åœºæ™¯ï¼š
âœ… å¤§é‡æ–‡ä»¶éœ€è¦å®šæœŸåŒæ­¥
âœ… ç½‘ç»œå¸¦å®½æœ‰é™éœ€è¦å¢žé‡ä¼ è¾“
âœ… éœ€è¦æ–­ç‚¹ç»­ä¼ åŠŸèƒ½
âœ… å¤æ‚çš„æŽ’é™¤å’ŒåŒ…å«è§„åˆ™

scpé€‚ç”¨åœºæ™¯ï¼š  
âœ… å°‘é‡æ–‡ä»¶ä¸€æ¬¡æ€§ä¼ è¾“
âœ… ç®€å•çš„ç‚¹å¯¹ç‚¹æ–‡ä»¶å¤åˆ¶
âœ… å¯¹å®‰å…¨æ€§è¦æ±‚æžé«˜
âœ… ä¸éœ€è¦å¤æ‚é…ç½®
```

**ðŸ”¹ æ€§èƒ½ä¼˜åŒ–å…³é”®**
```
ç½‘ç»œä¼˜åŒ–ï¼š
- ä½¿ç”¨åŽ‹ç¼©å‡å°‘ä¼ è¾“é‡
- åˆç†è®¾ç½®å¸¦å®½é™åˆ¶
- é…ç½®è¶…æ—¶å’Œé‡è¯•æœºåˆ¶

å­˜å‚¨ä¼˜åŒ–ï¼š
- ä½¿ç”¨--inplaceå‡å°‘ç£ç›˜æ“ä½œ
- åˆç†è®¾ç½®éƒ¨åˆ†æ–‡ä»¶ç›®å½•
- é¢„æ£€æŸ¥ç£ç›˜ç©ºé—´

ä¼ è¾“ä¼˜åŒ–ï¼š
- æŽ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶
- ä½¿ç”¨å¢žé‡åŒæ­¥
- å¹¶è¡Œä¼ è¾“å¤§é‡æ–‡ä»¶
```

### 11.3 å®žè·µç»éªŒæ€»ç»“


**ðŸ’¡ æœ€ä½³å®žè·µå»ºè®®**
```
å®‰å…¨æ€§ï¼š
âœ… ä½¿ç”¨SSHå¯†é’¥è®¤è¯è€Œéžå¯†ç 
âœ… é™åˆ¶rsyncæ¨¡å—çš„è®¿é—®æƒé™
âœ… å®šæœŸæ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
âœ… å¤‡ä»½å‰éªŒè¯ç›®æ ‡ç³»ç»ŸçŠ¶æ€

å¯é æ€§ï¼š
âœ… å®žæ–½è‡ªåŠ¨é‡è¯•æœºåˆ¶
âœ… ç›‘æŽ§åŒæ­¥è¿›ç¨‹çŠ¶æ€
âœ… è®°å½•è¯¦ç»†çš„æ“ä½œæ—¥å¿—
âœ… å»ºç«‹å›žæ»šå’Œæ¢å¤æœºåˆ¶

æ•ˆçŽ‡æ€§ï¼š
âœ… æ ¹æ®æ–‡ä»¶ç±»åž‹ä¼˜åŒ–åŽ‹ç¼©è®¾ç½®
âœ… ä½¿ç”¨å¹¶è¡Œä¼ è¾“å¤„ç†å¤§é‡æ–‡ä»¶
âœ… åˆç†é…ç½®æŽ’é™¤è§„åˆ™
âœ… å®šæœŸæ¸…ç†è¿‡æœŸå¤‡ä»½
```

### 11.4 æ•…éšœè¯Šæ–­æ¸…å•


```
é‡åˆ°é—®é¢˜æ—¶çš„æ£€æŸ¥æ­¥éª¤ï¼š

1. è¿žæŽ¥é—®é¢˜ï¼š
   â–¡ ç½‘ç»œè¿žé€šæ€§æµ‹è¯•ï¼ˆpingã€telnetï¼‰
   â–¡ SSHè¿žæŽ¥å’Œè®¤è¯æ£€æŸ¥
   â–¡ é˜²ç«å¢™å’Œç«¯å£é…ç½®éªŒè¯

2. æƒé™é—®é¢˜ï¼š
   â–¡ æºæ–‡ä»¶è¯»å–æƒé™
   â–¡ ç›®æ ‡ç›®å½•å†™å…¥æƒé™  
   â–¡ ç”¨æˆ·èº«ä»½å’Œç»„æƒé™

3. ç©ºé—´é—®é¢˜ï¼š
   â–¡ æºç³»ç»Ÿå‰©ä½™ç©ºé—´
   â–¡ ç›®æ ‡ç³»ç»Ÿå¯ç”¨ç©ºé—´
   â–¡ ä¸´æ—¶æ–‡ä»¶ç›®å½•ç©ºé—´

4. æ€§èƒ½é—®é¢˜ï¼š
   â–¡ ç½‘ç»œå¸¦å®½åˆ©ç”¨çŽ‡
   â–¡ ç³»ç»Ÿè´Ÿè½½å’Œå†…å­˜ä½¿ç”¨
   â–¡ ç£ç›˜I/Oæ€§èƒ½çŠ¶å†µ
```

### 11.5 è¿›é˜¶æŠ€æœ¯æ–¹å‘


```
æ·±å…¥å­¦ä¹ å»ºè®®ï¼š

è‡ªåŠ¨åŒ–é›†æˆï¼š
- ç»“åˆAnsibleã€Puppetç­‰é…ç½®ç®¡ç†å·¥å…·
- é›†æˆåˆ°CI/CDæµæ°´çº¿ä¸­
- å¼€å‘è‡ªå®šä¹‰ç›‘æŽ§å’Œå‘Šè­¦

é«˜çº§ç‰¹æ€§ï¼š
- å­¦ä¹ rsync daemonæ¨¡å¼é…ç½®
- æŽŒæ¡å¤æ‚è¿‡æ»¤è§„åˆ™ç¼–å†™
- ç ”ç©¶å¤§è§„æ¨¡åˆ†å¸ƒå¼åŒæ­¥ç­–ç•¥

æ€§èƒ½è°ƒä¼˜ï¼š
- æ·±å…¥ç†è§£rsyncç®—æ³•åŽŸç†
- ç½‘ç»œå’Œå­˜å‚¨æ€§èƒ½ä¼˜åŒ–
- å¤§æ–‡ä»¶å’Œæµ·é‡å°æ–‡ä»¶ä¼˜åŒ–ç­–ç•¥
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- æ–‡ä»¶åŒæ­¥æ˜¯è¿ç»´è‡ªåŠ¨åŒ–çš„åŸºç¡€æŠ€èƒ½
- rsyncçš„å¢žé‡ä¼ è¾“æ˜¯æ ¸å¿ƒä¼˜åŠ¿
- æƒé™ä¿æŒå’Œå®Œæ•´æ€§æ ¡éªŒåŒæ ·é‡è¦  
- æŽ’é™¤è§„åˆ™å’Œç½‘ç»œä¼˜åŒ–å†³å®šä¼ è¾“æ•ˆçŽ‡
- å®žæˆ˜ä¸­éœ€è¦è€ƒè™‘å®‰å…¨æ€§ã€å¯é æ€§å’Œæ•ˆçŽ‡çš„å¹³è¡¡