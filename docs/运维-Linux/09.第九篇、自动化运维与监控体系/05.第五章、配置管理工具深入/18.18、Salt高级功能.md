---
title: 18ã€Salté«˜çº§åŠŸèƒ½
---
## ğŸ“š ç›®å½•

1. [Eventç³»ç»Ÿä¸Reactor](#1-Eventç³»ç»Ÿä¸Reactor)
2. [è‡ªåŠ¨åŒ–ç¼–æ’åŠŸèƒ½](#2-è‡ªåŠ¨åŒ–ç¼–æ’åŠŸèƒ½)
3. [å¤šMasteré›†ç¾¤é…ç½®](#3-å¤šMasteré›†ç¾¤é…ç½®)
4. [Syndicåˆ†å±‚ç®¡ç†](#4-Syndicåˆ†å±‚ç®¡ç†)
5. [äº‘å¹³å°é›†æˆ](#5-äº‘å¹³å°é›†æˆ)
6. [ç›‘æ§ä¸å‘Šè­¦é›†æˆ](#6-ç›‘æ§ä¸å‘Šè­¦é›†æˆ)
7. [APIæ¥å£ä½¿ç”¨](#7-APIæ¥å£ä½¿ç”¨)
8. [æ‰©å±•æ€§æ¶æ„è®¾è®¡](#8-æ‰©å±•æ€§æ¶æ„è®¾è®¡)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Eventç³»ç»Ÿä¸Reactor


### 1.1 ä»€ä¹ˆæ˜¯Eventç³»ç»Ÿ


**æ ¸å¿ƒæ¦‚å¿µ**ï¼šEventç³»ç»Ÿæ˜¯Saltçš„äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œå°±åƒä¸€ä¸ª**æ¶ˆæ¯å¹¿æ’­ç«™**ï¼Œå½“ç³»ç»Ÿä¸­å‘ç”Ÿä»»ä½•äº‹æƒ…æ—¶ï¼Œéƒ½ä¼šäº§ç”Ÿäº‹ä»¶æ¶ˆæ¯ã€‚

```
ç®€å•ç†è§£ï¼š
æƒ³è±¡ä¸€ä¸ªå·¥å‚çš„å¹¿æ’­ç³»ç»Ÿ
- æœ‰äººè¿›å…¥å‚æˆ¿ â†’ å¹¿æ’­"æœ‰äººè¿›å…¥"
- æœºå™¨å¯åŠ¨ â†’ å¹¿æ’­"è®¾å¤‡å¯åŠ¨"
- ä»»åŠ¡å®Œæˆ â†’ å¹¿æ’­"ä»»åŠ¡å®Œæˆ"

Salt Eventç³»ç»Ÿå°±æ˜¯è¿™æ ·çš„å¹¿æ’­æœºåˆ¶
```

**Eventç³»ç»Ÿçš„ä½œç”¨**ï¼š
- ğŸ“¡ **å®æ—¶é€šä¿¡**ï¼šMasterå’ŒMinionä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’
- ğŸ”” **äº‹ä»¶é€šçŸ¥**ï¼šç³»ç»ŸçŠ¶æ€å˜åŒ–çš„å®æ—¶é€šçŸ¥
- âš¡ **è‡ªåŠ¨è§¦å‘**ï¼šåŸºäºäº‹ä»¶è‡ªåŠ¨æ‰§è¡Œå“åº”æ“ä½œ
- ğŸ“Š **ç›‘æ§åŸºç¡€**ï¼šä¸ºç›‘æ§ç³»ç»Ÿæä¾›æ•°æ®æº

### 1.2 Eventç³»ç»Ÿæ¶æ„


**äº‹ä»¶æµè½¬è¿‡ç¨‹**ï¼š
```
äº‹ä»¶äº§ç”Ÿæº        äº‹ä»¶æ€»çº¿         äº‹ä»¶å¤„ç†å™¨
    |               |                |
[MinionçŠ¶æ€] â€”â€”â†’ [Event Bus] â€”â€”â†’ [Reactor]
[Jobå®Œæˆ]    â€”â€”â†’ [ZeroMQ]   â€”â€”â†’ [ç›‘æ§ç³»ç»Ÿ]
[ç”¨æˆ·æ“ä½œ]   â€”â€”â†’ [æ¶ˆæ¯é˜Ÿåˆ—] â€”â€”â†’ [å‘Šè­¦ç³»ç»Ÿ]
```

**å…³é”®ç»„ä»¶è¯´æ˜**ï¼š
- **Event Bus**ï¼šäº‹ä»¶æ€»çº¿ï¼Œæ‰€æœ‰äº‹ä»¶çš„ä¸­è½¬ç«™
- **ZeroMQ**ï¼šåº•å±‚æ¶ˆæ¯ä¼ è¾“åè®®
- **Event Tag**ï¼šäº‹ä»¶æ ‡ç­¾ï¼Œç”¨äºåˆ†ç±»å’Œè¿‡æ»¤äº‹ä»¶

### 1.3 å¸¸è§äº‹ä»¶ç±»å‹


| äº‹ä»¶ç±»å‹ | **æè¿°** | **åº”ç”¨åœºæ™¯** |
|---------|----------|-------------|
| `salt/job/*/ret` | **ä½œä¸šæ‰§è¡Œç»“æœ** | `ç›‘æ§å‘½ä»¤æ‰§è¡ŒçŠ¶æ€` |
| `salt/minion/*/start` | **Minionå¯åŠ¨** | `è‡ªåŠ¨é…ç½®æ–°èŠ‚ç‚¹` |
| `salt/auth` | **è®¤è¯äº‹ä»¶** | `å®‰å…¨ç›‘æ§` |
| `salt/key` | **å¯†é’¥ç®¡ç†** | `èŠ‚ç‚¹ç®¡ç†è‡ªåŠ¨åŒ–` |
| `salt/presence/present` | **èŠ‚ç‚¹åœ¨çº¿çŠ¶æ€** | `é›†ç¾¤å¥åº·æ£€æŸ¥` |

### 1.4 Reactorååº”å™¨ç³»ç»Ÿ


**ä»€ä¹ˆæ˜¯Reactor**ï¼šReactoræ˜¯Saltçš„**è‡ªåŠ¨å“åº”ç³»ç»Ÿ**ï¼Œå½“ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œé¢„å®šä¹‰çš„æ“ä½œã€‚

```yaml
# /etc/salt/master.d/reactor.conf
reactor:
  # å½“æ–°Minionè¿æ¥æ—¶è‡ªåŠ¨æ¥å—å¯†é’¥
  - 'salt/auth':
    - /srv/reactor/auth.sls
  
  # å½“æœåŠ¡å¼‚å¸¸æ—¶è‡ªåŠ¨é‡å¯
  - 'salt/minion/*/service/*/dead':
    - /srv/reactor/service_restart.sls
```

**Reactoré…ç½®æ–‡ä»¶ç¤ºä¾‹**ï¼š
```yaml
# /srv/reactor/auth.sls
# è‡ªåŠ¨æ¥å—æ–°Minionçš„å¯†é’¥
accept_new_minion:
  wheel.key.accept:
    - match: {{ data['id'] }}

# ç»™æ–°Minionåˆ†é…è§’è‰²
assign_role:
  salt.state.apply:
    - tgt: {{ data['id'] }}
    - arg:
      - base_config
```

### 1.5 Eventç›‘å¬å®è·µ


**å‘½ä»¤è¡Œç›‘å¬äº‹ä»¶**ï¼š
```bash
# ç›‘å¬æ‰€æœ‰äº‹ä»¶
salt-run state.event pretty=True

# ç›‘å¬ç‰¹å®šæ ‡ç­¾äº‹ä»¶
salt-run state.event tag='salt/job/*/ret'

# ç›‘å¬ç‰¹å®šMinionäº‹ä»¶
salt-run state.event tag='salt/minion/web01/*'
```

**Python APIç›‘å¬äº‹ä»¶**ï¼š
```python
import salt.utils.event

# åˆ›å»ºäº‹ä»¶ç›‘å¬å™¨
event = salt.utils.event.get_event('master', sock_dir='/var/run/salt/master')

# æŒç»­ç›‘å¬äº‹ä»¶
for edata in event.iter_events():
    print(f"äº‹ä»¶æ ‡ç­¾: {edata['tag']}")
    print(f"äº‹ä»¶æ•°æ®: {edata['data']}")
```

---

## 2. ğŸš€ è‡ªåŠ¨åŒ–ç¼–æ’åŠŸèƒ½


### 2.1 ç¼–æ’ç³»ç»Ÿæ¦‚è¿°


**ä»€ä¹ˆæ˜¯ç¼–æ’**ï¼šç¼–æ’å°±åƒ**æŒ‡æŒ¥ä¸€ä¸ªä¹é˜Ÿ**ï¼Œè®©ä¸åŒçš„æœåŠ¡å™¨æŒ‰ç…§ç‰¹å®šçš„é¡ºåºå’Œè§„åˆ™ååŒå·¥ä½œã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼š
æ‰‹åŠ¨æ“ä½œ â†’ ä¸€å°ä¸€å°æ‰§è¡Œ â†’ å®¹æ˜“å‡ºé”™ â†’ æ•ˆç‡ä½ä¸‹

ç¼–æ’æ–¹å¼ï¼š
å®šä¹‰æµç¨‹ â†’ è‡ªåŠ¨æ‰§è¡Œ â†’ ä¾èµ–å¤„ç† â†’ å¹¶å‘æ§åˆ¶ â†’ é”™è¯¯æ¢å¤
```

**ç¼–æ’çš„æ ¸å¿ƒä»·å€¼**ï¼š
- â±ï¸ **é¡ºåºæ§åˆ¶**ï¼šç¡®ä¿æ“ä½œæŒ‰æ­£ç¡®é¡ºåºæ‰§è¡Œ
- ğŸ”— **ä¾èµ–ç®¡ç†**ï¼šå¤„ç†æœåŠ¡é—´çš„ä¾èµ–å…³ç³»  
- ğŸ”„ **å¹¶å‘ä¼˜åŒ–**ï¼šåˆç†åˆ©ç”¨ç³»ç»Ÿèµ„æº
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šè‡ªåŠ¨å¤„ç†å¼‚å¸¸æƒ…å†µ

### 2.2 Salt Orchestrateç¼–æ’


**Orchestrate vs Stateçš„åŒºåˆ«**ï¼š

| ç‰¹æ€§ | **State** | **Orchestrate** |
|------|-----------|----------------|
| `ä½œç”¨èŒƒå›´` | **å•ä¸ªMinion** | **å¤šä¸ªMinionåè°ƒ** |
| `æ‰§è¡Œæ–¹å¼` | **å¹¶è¡Œæ‰§è¡Œ** | **å¯æ§åˆ¶é¡ºåº** |
| `ä¾èµ–å…³ç³»` | **Minionå†…éƒ¨** | **è·¨Minionä¾èµ–** |
| `ä½¿ç”¨åœºæ™¯` | **é…ç½®ç®¡ç†** | **å¤æ‚éƒ¨ç½²æµç¨‹** |

**åŸºç¡€ç¼–æ’ç¤ºä¾‹**ï¼š
```yaml
# /srv/salt/orch/webapp_deploy.sls
# Webåº”ç”¨éƒ¨ç½²ç¼–æ’

# ç¬¬ä¸€æ­¥ï¼šåœæ­¢æ‰€æœ‰WebæœåŠ¡
stop_web_services:
  salt.state.apply:
    - tgt: 'web*'
    - arg:
      - webapp.stop

# ç¬¬äºŒæ­¥ï¼šæ›´æ–°æ•°æ®åº“ï¼ˆç­‰WebæœåŠ¡åœæ­¢åï¼‰
update_database:
  salt.state.apply:
    - tgt: 'db*'
    - arg:
      - database.update
    - require:
      - salt: stop_web_services

# ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²æ–°ä»£ç ï¼ˆæ•°æ®åº“æ›´æ–°åï¼‰
deploy_code:
  salt.state.apply:
    - tgt: 'web*'
    - arg:
      - webapp.deploy
    - require:
      - salt: update_database

# ç¬¬å››æ­¥ï¼šå¯åŠ¨WebæœåŠ¡
start_web_services:
  salt.state.apply:
    - tgt: 'web*'
    - arg:
      - webapp.start
    - require:
      - salt: deploy_code
```

### 2.3 é«˜çº§ç¼–æ’ç‰¹æ€§


**æ¡ä»¶æ‰§è¡Œ**ï¼šæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦æ‰§è¡ŒæŸä¸ªæ­¥éª¤
```yaml
conditional_restart:
  salt.function:
    - name: cmd.run
    - tgt: 'web*'
    - arg:
      - 'systemctl restart nginx'
    - onlyif:
      - salt.function:
        - name: cmd.retcode
        - tgt: 'web*'
        - arg:
          - 'nginx -t'
```

**å¾ªç¯æ‰§è¡Œ**ï¼šå¯¹å¤šä¸ªç›®æ ‡æ‰§è¡Œç›¸åŒæ“ä½œ
```yaml
{% for server in ['web01', 'web02', 'web03'] %}
restart_{{ server }}:
  salt.state.apply:
    - tgt: {{ server }}
    - arg:
      - nginx.restart
    - require:
      {% if loop.index0 > 0 %}
      - salt: restart_{{ loop.previtem }}
      {% endif %}
{% endfor %}
```

### 2.4 ç¼–æ’æ‰§è¡Œä¸ç›‘æ§


**æ‰§è¡Œç¼–æ’**ï¼š
```bash
# æ‰§è¡Œç¼–æ’æ–‡ä»¶
salt-run state.orchestrate orch.webapp_deploy

# æµ‹è¯•ç¼–æ’ï¼ˆä¸å®é™…æ‰§è¡Œï¼‰
salt-run state.orchestrate orch.webapp_deploy test=True

# è¯¦ç»†è¾“å‡º
salt-run state.orchestrate orch.webapp_deploy -l debug
```

**ç¼–æ’çŠ¶æ€ç›‘æ§**ï¼š
```bash
# æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„ç¼–æ’
salt-run jobs.active

# æŸ¥çœ‹ç¼–æ’å†å²
salt-run jobs.list_jobs

# æŸ¥çœ‹ç‰¹å®šç¼–æ’ç»“æœ
salt-run jobs.lookup_jid <job_id>
```

---

## 3. ğŸ”§ å¤šMasteré›†ç¾¤é…ç½®


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦å¤šMaster


**å•Masterçš„é—®é¢˜**ï¼š
- ğŸš¨ **å•ç‚¹æ•…éšœ**ï¼šMasterå®•æœºæ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨
- ğŸ“ˆ **æ€§èƒ½ç“¶é¢ˆ**ï¼šå¤§é‡Minionæ—¶æ€§èƒ½ä¸è¶³
- ğŸŒ **åœ°ç†åˆ†å¸ƒ**ï¼šè·¨åœ°åŸŸéƒ¨ç½²ç½‘ç»œå»¶è¿Ÿå¤§

**å¤šMasterçš„ä¼˜åŠ¿**ï¼š
```
é«˜å¯ç”¨æ€§ï¼š
Master1å®•æœº â†’ Master2ç»§ç»­æœåŠ¡ â†’ æ— æœåŠ¡ä¸­æ–­

è´Ÿè½½åˆ†æ‹…ï¼š
1000ä¸ªMinion â†’ åˆ†æ•£åˆ°3ä¸ªMaster â†’ æ¯ä¸ªMasterçº¦333ä¸ª

å°±è¿‘æœåŠ¡ï¼š
åŒ—äº¬Minion â†’ åŒ—äº¬Master â†’ ç½‘ç»œå»¶è¿Ÿæœ€å°
```

### 3.2 å¤šMasteræ¶æ„æ¨¡å¼


**ä¸»å¤‡æ¨¡å¼ï¼ˆActive-Passiveï¼‰**ï¼š
```
Master1(Primary) â†â†’ Master2(Standby)
     â†“                    â†“
  Minion01-50         Minion01-50
  (ä¸»è¦è¿æ¥)           (å¤‡ä»½è¿æ¥)
```

**è´Ÿè½½å‡è¡¡æ¨¡å¼ï¼ˆActive-Activeï¼‰**ï¼š
```
   Load Balancer
        â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â†“             â†“
Master1      Master2
  â†“             â†“
Minion01-50  Minion51-100
```

### 3.3 å¤šMasteré…ç½®å®ç°


**Masterç«¯é…ç½®**ï¼š
```yaml
# /etc/salt/master - Master1é…ç½®
interface: 0.0.0.0
publish_port: 4505
ret_port: 4506

# é›†ç¾¤é…ç½®
cluster_id: salt-cluster
cluster_pki_dir: /etc/salt/pki/master/cluster

# å…±äº«æ–‡ä»¶ç³»ç»Ÿ
file_roots:
  base:
    - /srv/salt/shared
pillar_roots:
  base:
    - /srv/pillar/shared
```

**Minionç«¯é…ç½®**ï¼š
```yaml
# /etc/salt/minion - å¤šMasteré…ç½®
master:
  - 192.168.1.10  # Master1
  - 192.168.1.11  # Master2
  - 192.168.1.12  # Master3

# ä¸»Masterç­–ç•¥
master_type: failover
master_alive_interval: 30
master_shuffle: True

# è®¤è¯é…ç½®
auth_timeout: 10
auth_tries: 3
```

### 3.4 å…±äº«å­˜å‚¨é…ç½®


**æ–‡ä»¶ç³»ç»Ÿå…±äº«**ï¼š
```bash
# ä½¿ç”¨NFSå…±äº«é…ç½®
# Master1,2,3éƒ½æŒ‚è½½ç›¸åŒçš„NFS
mount -t nfs 192.168.1.100:/srv/salt /srv/salt/shared
mount -t nfs 192.168.1.100:/srv/pillar /srv/pillar/shared
```

**æ•°æ®åº“åç«¯**ï¼š
```yaml
# Masteré…ç½® - ä½¿ç”¨MySQLä½œä¸ºåç«¯
mysql.host: 192.168.1.200
mysql.user: salt
mysql.pass: saltpass
mysql.db: salt
mysql.port: 3306

# å¯ç”¨MySQLåç«¯
ext_pillar:
  - mysql:
      query: "SELECT pillar_key, pillar_val FROM pillars WHERE minion_id=%s"
```

---

## 4. ğŸŒ Syndicåˆ†å±‚ç®¡ç†


### 4.1 Syndicæ¶æ„æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯Syndic**ï¼šSyndicæ˜¯Saltçš„**åˆ†å±‚ç®¡ç†æ¶æ„**ï¼Œå°±åƒå…¬å¸çš„**æ€»éƒ¨-åˆ†å…¬å¸-éƒ¨é—¨**ç»“æ„ã€‚

```
ä¼ ç»Ÿæ¶æ„é—®é¢˜ï¼š
Master â€”â€”â†’ 10000ä¸ªMinion (ç½‘ç»œå‹åŠ›å¤§ï¼Œç®¡ç†å¤æ‚)

Syndicæ¶æ„ä¼˜åŠ¿ï¼š
        Master(æ€»éƒ¨)
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“              â†“
Syndic1(åŒ—äº¬)   Syndic2(ä¸Šæµ·)
    â†“              â†“
1000ä¸ªMinion    1000ä¸ªMinion
```

**Syndicçš„ä½œç”¨**ï¼š
- ğŸ“ **åœ°åŸŸåˆ†æ²»**ï¼šæŒ‰åœ°ç†ä½ç½®åˆ†å±‚ç®¡ç†
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘ç½‘ç»œè·³è½¬å’Œå»¶è¿Ÿ
- ğŸ›¡ï¸ **å®‰å…¨éš”ç¦»**ï¼šä¸åŒå±‚çº§çš„è®¿é—®æ§åˆ¶
- ğŸ“Š **æ‰©å±•æ€§**ï¼šæ”¯æŒå¤§è§„æ¨¡èŠ‚ç‚¹ç®¡ç†

### 4.2 Syndicç»„ä»¶è§’è‰²


| ç»„ä»¶ | **è§’è‰²** | **èŒè´£** |
|------|---------|---------|
| `Master of Masters` | **é¡¶çº§ç®¡ç†è€…** | `ç»Ÿä¸€ç­–ç•¥åˆ¶å®šå’Œä¸‹å‘` |
| `Syndic` | **ä¸­é—´ä»£ç†** | `ä¸Šä¼ ä¸‹è¾¾ï¼ŒåŒºåŸŸç®¡ç†` |
| `Regional Master` | **åŒºåŸŸç®¡ç†è€…** | `ç®¡ç†æœ¬åœ°Minion` |
| `Minion` | **æ‰§è¡ŒèŠ‚ç‚¹** | `æ‰§è¡Œå…·ä½“ä»»åŠ¡` |

### 4.3 Syndicé…ç½®éƒ¨ç½²


**Master of Mastersé…ç½®**ï¼š
```yaml
# /etc/salt/master (é¡¶çº§Master)
interface: 0.0.0.0
order_masters: True

# æ¥å—Syndicè¿æ¥
syndic_user: syndic
syndic_log_file: /var/log/salt/syndic

# æ–‡ä»¶æœåŠ¡é…ç½®
file_roots:
  base:
    - /srv/salt/global
```

**SyndicèŠ‚ç‚¹é…ç½®**ï¼š
```yaml
# /etc/salt/master (SyndicåŒæ—¶ä¹Ÿæ˜¯Master)
# ä½œä¸ºMasterç®¡ç†æœ¬åœ°Minion
interface: 192.168.1.10
file_roots:
  base:
    - /srv/salt/local

# /etc/salt/syndic (Syndicé…ç½®)  
# è¿æ¥åˆ°Master of Masters
syndic_master: 192.168.1.1
syndic_master_port: 4506
syndic_pidfile: /var/run/salt-syndic.pid
syndic_log_file: /var/log/salt/syndic
```

**åŒºåŸŸMinioné…ç½®**ï¼š
```yaml
# /etc/salt/minion
# è¿æ¥åˆ°æœ¬åœ°çš„Syndic Master
master: 192.168.1.10
id: beijing-web01
```

### 4.4 Syndicç®¡ç†æ“ä½œ


**å¯åŠ¨SyndicæœåŠ¡**ï¼š
```bash
# å¯åŠ¨Syndicè¿›ç¨‹
systemctl start salt-syndic
systemctl enable salt-syndic

# æŸ¥çœ‹SyndicçŠ¶æ€
systemctl status salt-syndic
```

**é€šè¿‡Syndicæ‰§è¡Œå‘½ä»¤**ï¼š
```bash
# ä»Master of Mastersæ‰§è¡Œ
salt '*' test.ping

# æŒ‡å®šç‰¹å®šSyndicåŒºåŸŸ
salt -N 'beijing*' cmd.run 'uptime'

# æŸ¥çœ‹Syndicè¿æ¥çŠ¶æ€
salt-run manage.status
```

---

## 5. â˜ï¸ äº‘å¹³å°é›†æˆ


### 5.1 äº‘å¹³å°é›†æˆæ¦‚è¿°


**ä»€ä¹ˆæ˜¯äº‘å¹³å°é›†æˆ**ï¼šè®©Saltèƒ½å¤Ÿ**è‡ªåŠ¨ç®¡ç†äº‘èµ„æº**ï¼Œå°±åƒæœ‰ä¸€ä¸ª**äº‘èµ„æºç®¡å®¶**ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼š
æ‰‹åŠ¨åˆ›å»ºVM â†’ æ‰‹åŠ¨é…ç½®ç½‘ç»œ â†’ æ‰‹åŠ¨å®‰è£…è½¯ä»¶ â†’ æ‰‹åŠ¨éƒ¨ç½²åº”ç”¨

äº‘é›†æˆæ–¹å¼ï¼š
ä¸€æ¡å‘½ä»¤ â†’ è‡ªåŠ¨åˆ›å»ºåŸºç¡€è®¾æ–½ â†’ è‡ªåŠ¨é…ç½® â†’ è‡ªåŠ¨éƒ¨ç½²
```

**æ”¯æŒçš„äº‘å¹³å°**ï¼š
- ğŸ”· **AWS**ï¼šEC2ã€VPCã€RDSã€ELBç­‰
- ğŸ”µ **Azure**ï¼šè™šæ‹Ÿæœºã€èµ„æºç»„ã€å­˜å‚¨ç­‰  
- ğŸŸ¡ **Google Cloud**ï¼šGCEã€GKEã€Cloud SQLç­‰
- ğŸŸ  **é˜¿é‡Œäº‘**ï¼šECSã€RDSã€SLBç­‰
- ğŸ”´ **åä¸ºäº‘**ï¼šECSã€VPCã€ELBç­‰

### 5.2 AWSé›†æˆé…ç½®


**AWSè®¤è¯é…ç½®**ï¼š
```yaml
# /etc/salt/cloud.providers.d/aws.conf
aws-provider:
  driver: ec2
  id: AKIAIOSFODNN7EXAMPLE
  key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
  region: us-east-1
  availability_zone: us-east-1a
```

**äº‘ä¸»æœºæ¨¡æ¿å®šä¹‰**ï¼š
```yaml
# /etc/salt/cloud.profiles.d/aws.conf
aws-web-server:
  provider: aws-provider
  image: ami-0abcdef1234567890
  size: t3.micro
  ssh_username: ubuntu
  securitygroup: 
    - default
    - web-servers
  
  # è‡ªåŠ¨é…ç½®
  minion:
    master: 192.168.1.100
    grains:
      roles: webserver
      environment: production
```

### 5.3 äº‘èµ„æºè‡ªåŠ¨åŒ–ç®¡ç†


**åˆ›å»ºäº‘ä¸»æœº**ï¼š
```bash
# åˆ›å»ºå•ä¸ªå®ä¾‹
salt-cloud -p aws-web-server web01

# æ‰¹é‡åˆ›å»ºå®ä¾‹
salt-cloud -p aws-web-server web01,web02,web03

# åˆ›å»ºå¹¶åº”ç”¨çŠ¶æ€
salt-cloud -p aws-web-server web01 --deploy
```

**äº‘å®ä¾‹ç®¡ç†**ï¼š
```bash
# åˆ—å‡ºæ‰€æœ‰äº‘å®ä¾‹
salt-cloud --list-locations aws-provider

# æŸ¥çœ‹å®ä¾‹è¯¦æƒ…
salt-cloud --full-query

# é”€æ¯å®ä¾‹
salt-cloud -d web01
```

### 5.4 äº‘ç¼–æ’ç¤ºä¾‹


**å®Œæ•´çš„äº‘åº”ç”¨éƒ¨ç½²**ï¼š
```yaml
# /srv/salt/orch/cloud_deploy.sls
# äº‘ç«¯Webåº”ç”¨è‡ªåŠ¨éƒ¨ç½²ç¼–æ’

# ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“æœåŠ¡å™¨
create_database_server:
  salt.function:
    - name: cloud.profile
    - arg:
      - aws-database-server
      - db01

# ç¬¬äºŒæ­¥ï¼šåˆ›å»ºWebæœåŠ¡å™¨é›†ç¾¤  
create_web_cluster:
  salt.function:
    - name: cloud.profile  
    - arg:
      - aws-web-server
      - web01,web02,web03
    - require:
      - salt: create_database_server

# ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ•°æ®åº“
configure_database:
  salt.state.apply:
    - tgt: 'db01'
    - arg:
      - mysql.server
    - require:
      - salt: create_web_cluster

# ç¬¬å››æ­¥ï¼šéƒ¨ç½²Webåº”ç”¨
deploy_webapp:
  salt.state.apply:
    - tgt: 'web*'
    - arg:
      - webapp.deploy
    - require:
      - salt: configure_database
```

---

## 6. ğŸ“Š ç›‘æ§ä¸å‘Šè­¦é›†æˆ


### 6.1 ç›‘æ§é›†æˆæ¶æ„


**ç›‘æ§æ•°æ®æµå‘**ï¼š
```
Salt Minion â†’ æ”¶é›†æŒ‡æ ‡ â†’ Event System â†’ ç›‘æ§åç«¯ â†’ å‘Šè­¦ç³»ç»Ÿ
     â†“           â†“           â†“            â†“         â†“
  ç³»ç»ŸçŠ¶æ€    æ€§èƒ½æ•°æ®    äº‹ä»¶æ¶ˆæ¯     æ—¶åºæ•°æ®   å‘Šè­¦é€šçŸ¥
```

**ç›‘æ§é›†æˆçš„ä»·å€¼**ï¼š
- ğŸ“ˆ **æ€§èƒ½ç›‘æ§**ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰
- ğŸ” **æœåŠ¡ç›‘æ§**ï¼šåº”ç”¨çŠ¶æ€ã€æœåŠ¡å¯ç”¨æ€§
- ğŸš¨ **å¼‚å¸¸å‘Šè­¦**ï¼šåŠæ—¶å‘ç°å’Œå¤„ç†é—®é¢˜
- ğŸ“Š **å¯è§†åŒ–**ï¼šå›¾è¡¨åŒ–å±•ç¤ºç³»ç»ŸçŠ¶æ€

### 6.2 ä¸Prometheusé›†æˆ


**Saltæ”¶é›†PrometheusæŒ‡æ ‡**ï¼š
```python
# /srv/salt/_modules/prometheus_collector.py
def collect_node_metrics():
    """æ”¶é›†èŠ‚ç‚¹æŒ‡æ ‡ä¾›PrometheusæŠ“å–"""
    import psutil
    
    metrics = {}
    
    # CPUä½¿ç”¨ç‡
    metrics['cpu_usage'] = psutil.cpu_percent(interval=1)
    
    # å†…å­˜ä½¿ç”¨æƒ…å†µ
    memory = psutil.virtual_memory()
    metrics['memory_usage_percent'] = memory.percent
    metrics['memory_available'] = memory.available
    
    # ç£ç›˜ä½¿ç”¨æƒ…å†µ  
    disk = psutil.disk_usage('/')
    metrics['disk_usage_percent'] = (disk.used / disk.total) * 100
    
    return metrics
```

**è‡ªåŠ¨æœåŠ¡å‘ç°é…ç½®**ï¼š
```yaml
# Prometheusè‡ªåŠ¨å‘ç°Saltç®¡ç†çš„èŠ‚ç‚¹
# prometheus.yml
scrape_configs:
  - job_name: 'salt-managed-nodes'
    consul_sd_configs:
      - server: 'localhost:8500'
        services: ['salt-minion']
    relabel_configs:
      - source_labels: [__meta_consul_node]
        target_label: instance
```

### 6.3 å‘Šè­¦è§„åˆ™é…ç½®


**åŸºäºäº‹ä»¶çš„å‘Šè­¦**ï¼š
```yaml
# /srv/reactor/monitoring.sls
# åŸºäºSaltäº‹ä»¶çš„è‡ªåŠ¨å‘Šè­¦

service_down_alert:
  local.slack.post_message:
    - channel: "#alerts"
    - message: "æœåŠ¡å¼‚å¸¸: {{ data['id'] }} ä¸Šçš„ {{ data['service'] }} æœåŠ¡å·²åœæ­¢"
    - match: 'salt/minion/*/service/*/dead'

high_cpu_alert:
  local.cmd.run:
    - cmd: |
        curl -X POST https://api.pagerduty.com/incidents \
        -H "Authorization: Token YOUR_TOKEN" \
        -d '{"incident":{"title":"é«˜CPUä½¿ç”¨ç‡å‘Šè­¦"}}'
    - tgt: {{ data['id'] }}
    - match: 'custom/cpu/high'
```

### 6.4 ç›‘æ§æ•°æ®å¯è§†åŒ–


**Grafanaé›†æˆé…ç½®**ï¼š
```json
{
  "dashboard": {
    "title": "Salté›†ç¾¤ç›‘æ§",
    "panels": [
      {
        "title": "Minionåœ¨çº¿çŠ¶æ€",
        "type": "stat",
        "targets": [
          {
            "expr": "salt_minions_online",
            "legendFormat": "åœ¨çº¿èŠ‚ç‚¹æ•°"
          }
        ]
      },
      {
        "title": "ä½œä¸šæ‰§è¡Œç»Ÿè®¡", 
        "type": "graph",
        "targets": [
          {
            "expr": "rate(salt_jobs_total[5m])",
            "legendFormat": "ä½œä¸šæ‰§è¡Œé¢‘ç‡"
          }
        ]
      }
    ]
  }
}
```

---

## 7. ğŸ”Œ APIæ¥å£ä½¿ç”¨


### 7.1 Salt APIæ¦‚è¿°


**ä»€ä¹ˆæ˜¯Salt API**ï¼šSalt APIå°±åƒä¸€ä¸ª**ç½‘ç»œæœåŠ¡çª—å£**ï¼Œè®©å…¶ä»–ç³»ç»Ÿå¯ä»¥é€šè¿‡HTTPè¯·æ±‚æ¥ä½¿ç”¨SaltåŠŸèƒ½ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼š
åªèƒ½åœ¨å‘½ä»¤è¡Œ â†’ salt '*' test.ping â†’ ç»“æœæ˜¾ç¤ºåœ¨ç»ˆç«¯

APIæ–¹å¼ï¼š  
Webç•Œé¢/è„šæœ¬ â†’ HTTPè¯·æ±‚ â†’ Salt API â†’ è¿”å›JSONæ•°æ®
```

**APIçš„åº”ç”¨åœºæ™¯**ï¼š
- ğŸ–¥ï¸ **Webç®¡ç†ç•Œé¢**ï¼šå›¾å½¢åŒ–ç®¡ç†Salt
- ğŸ”§ **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šç¨‹åºåŒ–è°ƒç”¨SaltåŠŸèƒ½
- ğŸ“Š **ç›‘æ§é›†æˆ**ï¼šå¤–éƒ¨ç³»ç»Ÿè·å–SaltçŠ¶æ€
- ğŸ”— **ç³»ç»Ÿé›†æˆ**ï¼šä¸å…¶ä»–è¿ç»´å·¥å…·å¯¹æ¥

### 7.2 Salt APIé…ç½®


**å¯ç”¨Salt API**ï¼š
```yaml
# /etc/salt/master.d/api.conf
rest_cherrypy:
  port: 8000
  host: 0.0.0.0
  disable_ssl: False
  ssl_crt: /etc/ssl/certs/salt-api.crt
  ssl_key: /etc/ssl/private/salt-api.key

external_auth:
  pam:
    saltuser:
      - .*
      - '@wheel'
      - '@runner'
```

**åˆ›å»ºAPIç”¨æˆ·**ï¼š
```bash
# åˆ›å»ºç³»ç»Ÿç”¨æˆ·
useradd -r saltapi
passwd saltapi

# å¯åŠ¨Salt APIæœåŠ¡
systemctl start salt-api
systemctl enable salt-api
```

### 7.3 APIæ¥å£è°ƒç”¨


**è®¤è¯æ¥å£**ï¼š
```bash
# è·å–è®¤è¯ä»¤ç‰Œ
curl -k https://localhost:8000/login \
  -H "Accept: application/x-yaml" \
  -d username=saltapi \
  -d password=saltapi123 \
  -d eauth=pam
```

**æ‰§è¡Œå‘½ä»¤æ¥å£**ï¼š
```python
import requests

# è®¤è¯è·å–token
login_data = {
    'username': 'saltapi',
    'password': 'saltapi123', 
    'eauth': 'pam'
}

session = requests.Session()
login_resp = session.post('https://salt-api:8000/login', 
                         data=login_data, verify=False)
token = login_resp.json()['return'][0]['token']

# æ‰§è¡ŒSaltå‘½ä»¤
cmd_data = {
    'client': 'local',
    'tgt': '*',
    'fun': 'test.ping'
}

headers = {'X-Auth-Token': token}
result = session.post('https://salt-api:8000/', 
                     json=cmd_data, headers=headers, verify=False)

print(result.json())
```

### 7.4 å¸¸ç”¨APIæ“ä½œ


**å¼‚æ­¥ä½œä¸šæ‰§è¡Œ**ï¼š
```python
# æäº¤å¼‚æ­¥ä½œä¸š
async_data = {
    'client': 'local_async', 
    'tgt': 'web*',
    'fun': 'state.apply',
    'arg': ['nginx.install']
}

job_resp = session.post('https://salt-api:8000/', 
                       json=async_data, headers=headers)
job_id = job_resp.json()['return'][0]['jid']

# æŸ¥è¯¢ä½œä¸šç»“æœ
job_result = session.get(f'https://salt-api:8000/jobs/{job_id}', 
                        headers=headers)
```

**WebSocketå®æ—¶äº‹ä»¶**ï¼š
```javascript
// å»ºç«‹WebSocketè¿æ¥ç›‘å¬å®æ—¶äº‹ä»¶
const ws = new WebSocket('wss://salt-api:8000/ws');

ws.onopen = function() {
    // è®¤è¯
    ws.send(JSON.stringify({
        'username': 'saltapi',
        'password': 'saltapi123',
        'eauth': 'pam'
    }));
};

ws.onmessage = function(event) {
    const data = JSON.parse(event.data);
    console.log('æ”¶åˆ°äº‹ä»¶:', data);
};
```

---

## 8. ğŸ—ï¸ æ‰©å±•æ€§æ¶æ„è®¾è®¡


### 8.1 æ‰©å±•æ€§æŒ‘æˆ˜


**å¤§è§„æ¨¡éƒ¨ç½²é¢ä¸´çš„é—®é¢˜**ï¼š
- ğŸ“ˆ **èŠ‚ç‚¹æ•°é‡å¢é•¿**ï¼šä»å‡ åå°åˆ°å‡ ä¸‡å°
- ğŸŒ **åœ°ç†åˆ†å¸ƒ**ï¼šå¤šæ•°æ®ä¸­å¿ƒã€å¤šäº‘ç¯å¢ƒ  
- âš¡ **æ€§èƒ½è¦æ±‚**ï¼šä½å»¶è¿Ÿã€é«˜å¹¶å‘
- ğŸ” **å®‰å…¨éš”ç¦»**ï¼šä¸åŒç¯å¢ƒçš„è®¿é—®æ§åˆ¶

### 8.2 æ°´å¹³æ‰©å±•ç­–ç•¥


**Masteré›†ç¾¤æ‰©å±•**ï¼š
```
ä¼ ç»Ÿæ¶æ„ï¼š
1ä¸ªMaster â†’ 1000ä¸ªMinion (è¾¾åˆ°ç“¶é¢ˆ)

é›†ç¾¤æ¶æ„ï¼š
è´Ÿè½½å‡è¡¡å™¨
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â†“        â†“        â†“
Master1  Master2  Master3 â†’ æ¯ä¸ªMaster 1000ä¸ªMinion = 3000ä¸ªèŠ‚ç‚¹
```

**åˆ†ç‰‡ç­–ç•¥è®¾è®¡**ï¼š
```yaml
# æŒ‰ä¸šåŠ¡ç±»å‹åˆ†ç‰‡
web_cluster:
  masters: ['master-web1', 'master-web2']  
  minions: 'web*'

db_cluster:
  masters: ['master-db1', 'master-db2']
  minions: 'db*'

# æŒ‰åœ°ç†ä½ç½®åˆ†ç‰‡  
beijing_region:
  masters: ['master-bj1', 'master-bj2']
  minions: 'bj-*'
  
shanghai_region:
  masters: ['master-sh1', 'master-sh2'] 
  minions: 'sh-*'
```

### 8.3 æ€§èƒ½ä¼˜åŒ–æ¶æ„


**ç¼“å­˜å±‚è®¾è®¡**ï¼š
```yaml
# Redisç¼“å­˜é…ç½®
cache:
  cache.redis:
    host: 192.168.1.50
    port: 6379
    db: 0

# ç¼“å­˜ç­–ç•¥
cache_configs:
  - cache_name: pillar_cache
    expire_time: 3600
  - cache_name: grains_cache  
    expire_time: 1800
```

**æ¶ˆæ¯é˜Ÿåˆ—ä¼˜åŒ–**ï¼š
```yaml
# ZeroMQä¼˜åŒ–é…ç½®
zmq_backlog: 1000
zmq_hwm: 1000

# å‘å¸ƒç«¯å£åˆ†ç¦»
publish_port: 4505
ret_port: 4506
```

### 8.4 é«˜å¯ç”¨æ¶æ„è®¾è®¡


**å®Œæ•´é«˜å¯ç”¨æ¶æ„**ï¼š
```
                    è´Ÿè½½å‡è¡¡å™¨
                        â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â†“                     â†“
    Master Cluster1         Master Cluster2
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  
    â”‚Master1 Master2â”‚      â”‚Master3 Master4â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“                     â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Minionç¾¤ç»„1  â”‚       â”‚  Minionç¾¤ç»„2  â”‚
    â”‚   1000å°     â”‚       â”‚   1000å°     â”‚  
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“                     â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å…±äº«å­˜å‚¨1   â”‚       â”‚  å…±äº«å­˜å‚¨2   â”‚
    â”‚  (ä¸»å¤‡åŒæ­¥)   â”‚       â”‚  (ä¸»å¤‡åŒæ­¥)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•…éšœè½¬ç§»æœºåˆ¶**ï¼š
```bash
#!/bin/bash
# è‡ªåŠ¨æ•…éšœè½¬ç§»è„šæœ¬

check_master_health() {
    salt-run manage.status | grep -q "Up"
    return $?
}

failover_to_backup() {
    echo "ä¸»Masteræ•…éšœï¼Œåˆ‡æ¢åˆ°å¤‡Master"
    # æ›´æ–°DNSè®°å½•æŒ‡å‘å¤‡Master
    # æˆ–æ›´æ–°è´Ÿè½½å‡è¡¡å™¨é…ç½®
}

while true; do
    if ! check_master_health; then
        failover_to_backup
        break
    fi
    sleep 30
done
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ Eventç³»ç»Ÿï¼šSaltçš„æ¶ˆæ¯å¹¿æ’­æœºåˆ¶ï¼Œæ”¯æŒå®æ—¶äº‹ä»¶é©±åŠ¨
ğŸš€ ç¼–æ’åŠŸèƒ½ï¼šå¤šèŠ‚ç‚¹åè°ƒæ“ä½œï¼Œæ”¯æŒå¤æ‚éƒ¨ç½²æµç¨‹  
ğŸ”§ å¤šMasterï¼šé«˜å¯ç”¨å’Œè´Ÿè½½åˆ†æ‹…çš„é›†ç¾¤æ¶æ„
ğŸŒ Syndicï¼šåˆ†å±‚ç®¡ç†æ¶æ„ï¼Œæ”¯æŒå¤§è§„æ¨¡å’Œåœ°ç†åˆ†å¸ƒ
â˜ï¸  äº‘é›†æˆï¼šè‡ªåŠ¨åŒ–äº‘èµ„æºç®¡ç†å’Œéƒ¨ç½²
ğŸ“Š ç›‘æ§é›†æˆï¼šä¸ç›‘æ§å‘Šè­¦ç³»ç»Ÿçš„æ·±åº¦æ•´åˆ
ğŸ”Œ APIæ¥å£ï¼šç¨‹åºåŒ–è®¿é—®SaltåŠŸèƒ½çš„æ ‡å‡†æ¥å£
ğŸ—ï¸ æ‰©å±•æ€§ï¼šæ”¯æŒå¤§è§„æ¨¡éƒ¨ç½²çš„æ¶æ„è®¾è®¡åŸåˆ™
```

### 9.2 å…³é”®æŠ€æœ¯ç†è§£è¦ç‚¹


**ğŸ”¹ Eventé©±åŠ¨æ¶æ„çš„å¨åŠ›**
```
ä¼ ç»Ÿè½®è¯¢æ–¹å¼ï¼š
å®šæœŸæ£€æŸ¥çŠ¶æ€ â†’ å»¶è¿Ÿé«˜ â†’ èµ„æºæµªè´¹ â†’ ååº”æ…¢

äº‹ä»¶é©±åŠ¨æ–¹å¼ï¼š  
çŠ¶æ€å˜åŒ–ç«‹å³é€šçŸ¥ â†’ å®æ—¶å“åº” â†’ èµ„æºé«˜æ•ˆ â†’ è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜
```

**ğŸ”¹ ç¼–æ’ä¸æ™®é€šçŠ¶æ€çš„åŒºåˆ«**
```
æ™®é€šStateï¼šå•æœºé…ç½®ç®¡ç†ï¼Œé€‚åˆæ ‡å‡†åŒ–éƒ¨ç½²
ç¼–æ’Orchestrateï¼šå¤šæœºåè°ƒï¼Œé€‚åˆå¤æ‚ä¸šåŠ¡æµç¨‹

é€‰æ‹©åŸåˆ™ï¼šç®€å•é…ç½®ç”¨Stateï¼Œå¤æ‚æµç¨‹ç”¨Orchestrate
```

**ğŸ”¹ æ‰©å±•æ€§æ¶æ„çš„æ ¸å¿ƒæ€æƒ³**
```
å‚ç›´æ‰©å±•ï¼šæå‡å•æœºæ€§èƒ½ â†’ æœ‰ä¸Šé™ï¼Œæˆæœ¬é«˜
æ°´å¹³æ‰©å±•ï¼šå¢åŠ æœºå™¨æ•°é‡ â†’ ç†è®ºæ— é™ï¼Œæˆæœ¬ä½

Saltçš„æ°´å¹³æ‰©å±•ï¼šå¤šMaster + åˆ†ç‰‡ + è´Ÿè½½å‡è¡¡
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ é€‰æ‹©åˆé€‚çš„æ¶æ„æ¨¡å¼**
```
å°è§„æ¨¡(< 100å°)ï¼š
å•Master + åŸºç¡€åŠŸèƒ½ â†’ ç®€å•å¤Ÿç”¨

ä¸­ç­‰è§„æ¨¡(100-1000å°)ï¼š  
å¤šMaster + Eventç³»ç»Ÿ â†’ æ€§èƒ½å’Œå¯ç”¨æ€§å¹³è¡¡

å¤§è§„æ¨¡(> 1000å°)ï¼š
Syndic + é›†ç¾¤ + äº‘é›†æˆ â†’ å®Œæ•´ä¼ä¸šçº§æ–¹æ¡ˆ
```

**ğŸ”§ ç›‘æ§å‘Šè­¦çš„æœ€ä½³å®è·µ**
```
ç›‘æ§å±‚æ¬¡ï¼š
åŸºç¡€è®¾æ–½ç›‘æ§ â†’ åº”ç”¨æœåŠ¡ç›‘æ§ â†’ ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§

å‘Šè­¦ç­–ç•¥ï¼š
é¢„è­¦(80%) â†’ å‘Šè­¦(90%) â†’ ä¸¥é‡å‘Šè­¦(95%) â†’ è‡ªåŠ¨å¤„ç†
```

**â˜ï¸ äº‘é›†æˆçš„åº”ç”¨åœºæ™¯**
```
é€‚ç”¨åœºæ™¯ï¼š
- å¼¹æ€§ä¼¸ç¼©ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´èµ„æº
- ç¾éš¾æ¢å¤ï¼šè·¨äº‘å¿«é€Ÿé‡å»ºç¯å¢ƒ  
- æ··åˆäº‘ï¼šç»Ÿä¸€ç®¡ç†å¤šäº‘èµ„æº
- æˆæœ¬ä¼˜åŒ–ï¼šæŒ‰éœ€åˆ›å»ºå’Œé”€æ¯èµ„æº
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- Eventç³»ç»Ÿæ˜¯Salté«˜çº§åŠŸèƒ½çš„åŸºç¡€ï¼Œæ”¯æ’‘ç›‘æ§å’Œè‡ªåŠ¨åŒ–
- ç¼–æ’åŠŸèƒ½è®©å¤æ‚éƒ¨ç½²æµç¨‹å˜å¾—å¯æ§å’Œå¯é‡å¤
- å¤šMasterå’ŒSyndicè§£å†³è§„æ¨¡åŒ–éƒ¨ç½²çš„æ€§èƒ½å’Œç®¡ç†é—®é¢˜
- APIæ¥å£è®©Saltèƒ½å¤Ÿä¸å…¶ä»–ç³»ç»Ÿæ·±åº¦é›†æˆ
- åˆç†çš„æ¶æ„è®¾è®¡æ˜¯Saltåœ¨ä¼ä¸šç¯å¢ƒæˆåŠŸåº”ç”¨çš„å…³é”®