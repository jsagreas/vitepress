---
title: 9ã€Puppetæ¶æ„ä¸ç»„ä»¶
---
## ğŸ“š ç›®å½•

1. [Puppetæ¦‚è¿°ä¸æ ¸å¿ƒç†å¿µ](#1-puppetæ¦‚è¿°ä¸æ ¸å¿ƒç†å¿µ)
2. [Master-Agentæ¶æ„æ¨¡å¼](#2-master-agentæ¶æ„æ¨¡å¼)
3. [PuppetæœåŠ¡å™¨ç»„ä»¶è¯¦è§£](#3-puppetæœåŠ¡å™¨ç»„ä»¶è¯¦è§£)
4. [Certificate Authorityç®¡ç†](#4-certificate-authorityç®¡ç†)
5. [ç›®å½•ç¯å¢ƒæ¦‚å¿µ](#5-ç›®å½•ç¯å¢ƒæ¦‚å¿µ)
6. [ç¼–è¯‘ç›®å½•ä¸è¿è¡Œæ—¶](#6-ç¼–è¯‘ç›®å½•ä¸è¿è¡Œæ—¶)
7. [Puppet DBæ•°æ®å­˜å‚¨](#7-puppet-dbæ•°æ®å­˜å‚¨)
8. [æŠ¥å‘Šç³»ç»Ÿæœºåˆ¶](#8-æŠ¥å‘Šç³»ç»Ÿæœºåˆ¶)
9. [é«˜å¯ç”¨é›†ç¾¤é…ç½®](#9-é«˜å¯ç”¨é›†ç¾¤é…ç½®)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Puppetæ¦‚è¿°ä¸æ ¸å¿ƒç†å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Puppet


**ğŸ”¸ ç®€å•ç†è§£**ï¼šPuppetå°±åƒä¸€ä¸ª"ç³»ç»Ÿç®¡å®¶"ï¼Œå®ƒå¸®ä½ ç®¡ç†æˆç™¾ä¸Šåƒå°æœåŠ¡å™¨çš„é…ç½®

```
ä¼ ç»Ÿæ–¹å¼ï¼š                    Puppetæ–¹å¼ï¼š
ç®¡ç†å‘˜æ‰‹åŠ¨é…ç½®æ¯å°æœºå™¨          å†™ä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨åº”ç”¨åˆ°æ‰€æœ‰æœºå™¨
â”œâ”€ ç™»å½•æœåŠ¡å™¨Aé…ç½®Apache        â”œâ”€ å®šä¹‰Apacheé…ç½®è§„åˆ™  
â”œâ”€ ç™»å½•æœåŠ¡å™¨Bé…ç½®Apache        â”œâ”€ Puppetè‡ªåŠ¨åˆ†å‘åˆ°æ‰€æœ‰æœåŠ¡å™¨
â””â”€ ç™»å½•æœåŠ¡å™¨Cé…ç½®Apache        â””â”€ ç¡®ä¿é…ç½®å§‹ç»ˆä¸€è‡´
```

**ğŸ’¡ æ ¸å¿ƒä»·å€¼**ï¼š
- **å£°æ˜å¼ç®¡ç†**ï¼šä½ åªéœ€è¦è¯´"æˆ‘æƒ³è¦ä»€ä¹ˆæ ·çš„ç»“æœ"ï¼Œä¸ç”¨å…³å¿ƒå…·ä½“æ€ä¹ˆåš
- **å¹‚ç­‰æ€§**ï¼šæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„
- **é›†ä¸­ç®¡ç†**ï¼šä¸€ä¸ªåœ°æ–¹ç®¡ç†æ‰€æœ‰æœåŠ¡å™¨
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šé…ç½®å˜æ›´å¯ä»¥è¿½è¸ªå’Œå›æ»š

### 1.2 Puppetçš„å·¥ä½œç†å¿µ


**ğŸ”„ å·¥ä½œæµç¨‹**ï¼š
```
1. ç®¡ç†å‘˜ç¼–å†™é…ç½®æ¸…å•(Manifest) â†’ æè¿°æœŸæœ›çŠ¶æ€
2. Puppet Masterç¼–è¯‘é…ç½®        â†’ ç”Ÿæˆå…·ä½“æ‰§è¡Œè®¡åˆ’  
3. Puppet Agentè·å–é…ç½®         â†’ ä»Masterä¸‹è½½
4. Agentæ‰§è¡Œé…ç½®å˜æ›´           â†’ è®©å®é™…çŠ¶æ€ç¬¦åˆæœŸæœ›
5. Agentä¸ŠæŠ¥æ‰§è¡Œç»“æœ           â†’ åé¦ˆç»™Master
```

**ğŸ“‹ å£°æ˜å¼ vs è¿‡ç¨‹å¼**ï¼š
```
è¿‡ç¨‹å¼(Shellè„šæœ¬)ï¼šå‘Šè¯‰ç³»ç»Ÿæ€ä¹ˆåš
if [ ! -f /etc/httpd/httpd.conf ]; then
    yum install httpd
    systemctl enable httpd
    systemctl start httpd
fi

å£°æ˜å¼(Puppet)ï¼šå‘Šè¯‰ç³»ç»Ÿä½ æƒ³è¦ä»€ä¹ˆ
package { 'httpd':
  ensure => installed,
}
service { 'httpd':
  ensure => running,
  enable => true,
}
```

---

## 2. ğŸ—ï¸ Master-Agentæ¶æ„æ¨¡å¼


### 2.1 æ¶æ„å›¾è§£


```
            Puppetæ¶æ„æ€»è§ˆ
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Puppet Master     â”‚ â† é…ç½®ç®¡ç†ä¸­å¿ƒ
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Puppet Server â”‚  â”‚ â† æ ¸å¿ƒæœåŠ¡
    â”‚  â”‚   (JVMè¿›ç¨‹)   â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚   PuppetDB    â”‚  â”‚ â† æ•°æ®å­˜å‚¨
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ HTTP/HTTPS
              â”‚ ç«¯å£8140
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Agent 1â”‚ â”‚Agent 2â”‚ â”‚Agent 3â”‚ â† è¢«ç®¡ç†èŠ‚ç‚¹
â”‚WebæœåŠ¡å™¨â”‚ â”‚DBæœåŠ¡å™¨â”‚ â”‚è´Ÿè½½å‡è¡¡â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Masterè§’è‰²è¯¦è§£


**ğŸ›ï¸ Puppet Masteræ ¸å¿ƒèŒè´£**ï¼š

| èŒè´£ | è¯´æ˜ | å®é™…ä½œç”¨ |
|------|------|----------|
| **é…ç½®ç¼–è¯‘** | å°†Manifestç¼–è¯‘æˆCatalog | `æŠŠ"å®‰è£…Apache"ç¼–è¯‘æˆå…·ä½“æ­¥éª¤` |
| **è¯ä¹¦ç®¡ç†** | ç®¡ç†Agentçš„SSLè¯ä¹¦ | `ç¡®ä¿é€šä¿¡å®‰å…¨ï¼ŒéªŒè¯Agentèº«ä»½` |
| **æ–‡ä»¶åˆ†å‘** | å‘Agentæä¾›é…ç½®æ–‡ä»¶ | `åˆ†å‘é…ç½®æ–‡ä»¶ã€è„šæœ¬ã€è½¯ä»¶åŒ…` |
| **æŠ¥å‘Šæ”¶é›†** | æ”¶é›†Agentæ‰§è¡Œç»“æœ | `ç›‘æ§é…ç½®æ‰§è¡ŒçŠ¶æ€ï¼Œå‘ç°é—®é¢˜` |

**âš™ï¸ MasteræœåŠ¡ç»„ä»¶**ï¼š
```
Puppet Master = Puppet Server + WebæœåŠ¡å™¨
â”œâ”€ Puppet Server: æ ¸å¿ƒé€»è¾‘å¤„ç†(åŸºäºJVM)
â”œâ”€ Web Server: HTTPæœåŠ¡(é€šå¸¸æ˜¯å†…ç½®Jetty)
â”œâ”€ CAæœåŠ¡: è¯ä¹¦é¢å‘ä¸ç®¡ç†
â””â”€ æ–‡ä»¶æœåŠ¡: é™æ€æ–‡ä»¶åˆ†å‘
```

### 2.3 Agentè§’è‰²è¯¦è§£


**ğŸ¤– Puppet Agentæ ¸å¿ƒèŒè´£**ï¼š

**Agentå·¥ä½œæµç¨‹**ï¼š
```
æ­¥éª¤1ï¸âƒ£: å¯åŠ¨Agentè¿›ç¨‹ â†’ puppet agent -t
æ­¥éª¤2ï¸âƒ£: è¿æ¥Master     â†’ HTTPSè¿æ¥åˆ°ç«¯å£8140
æ­¥éª¤3ï¸âƒ£: è¯·æ±‚é…ç½®       â†’ å‘é€èŠ‚ç‚¹ä¿¡æ¯(ä¸»æœºåã€Factsç­‰)
æ­¥éª¤4ï¸âƒ£: æ¥æ”¶Catalog   â†’ ä¸‹è½½ç¼–è¯‘å¥½çš„é…ç½®
æ­¥éª¤5ï¸âƒ£: åº”ç”¨é…ç½®       â†’ æ‰§è¡Œå…·ä½“çš„é…ç½®å˜æ›´
æ­¥éª¤6ï¸âƒ£: ä¸ŠæŠ¥ç»“æœ       â†’ å‘é€æ‰§è¡ŒæŠ¥å‘Šç»™Master
```

**ğŸ’¾ Agentæœ¬åœ°ç»„ä»¶**ï¼š
- **Factsæ”¶é›†å™¨**ï¼šæ”¶é›†ç³»ç»Ÿä¿¡æ¯(OSç‰ˆæœ¬ã€å†…å­˜ã€ç½‘ç»œç­‰)
- **Catalogåº”ç”¨å™¨**ï¼šæ‰§è¡Œä»Masterè·å–çš„é…ç½®
- **SSLå®¢æˆ·ç«¯**ï¼šå¤„ç†ä¸Masterçš„å®‰å…¨é€šä¿¡
- **æŠ¥å‘Šç”Ÿæˆå™¨**ï¼šç”Ÿæˆæ‰§è¡Œç»“æœæŠ¥å‘Š

---

## 3. ğŸ”§ PuppetæœåŠ¡å™¨ç»„ä»¶è¯¦è§£


### 3.3 Puppet Serveræ·±å…¥è§£æ


**ğŸƒâ€â™‚ï¸ ä¸ºä»€ä¹ˆä½¿ç”¨JVM**ï¼Ÿ

| ç‰¹æ€§ | è€ç‰ˆæœ¬(Ruby) | æ–°ç‰ˆæœ¬(JVM) | ä¼˜åŠ¿ |
|------|-------------|-------------|------|
| **æ€§èƒ½** | `è¾ƒæ…¢` | `å¿«5-10å€` | `JITç¼–è¯‘ä¼˜åŒ–` |
| **å¹¶å‘** | `å¤šè¿›ç¨‹æ¨¡å‹` | `å¤šçº¿ç¨‹æ¨¡å‹` | `èµ„æºåˆ©ç”¨ç‡é«˜` |
| **å†…å­˜** | `æ¯è¿›ç¨‹ç‹¬ç«‹` | `å…±äº«å†…å­˜æ± ` | `å†…å­˜æ•ˆç‡æ›´å¥½` |
| **å¯åŠ¨** | `æ¯æ¬¡forkæ–°è¿›ç¨‹` | `çº¿ç¨‹æ± å¤ç”¨` | `å“åº”é€Ÿåº¦å¿«` |

**âš¡ æœåŠ¡å™¨æ€§èƒ½é…ç½®**ï¼š
```ruby
# /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
puppetserver: {
    # JVMå†…å­˜è®¾ç½®
    max-active-instances: 4        # æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°
    multithreaded: true           # å¯ç”¨å¤šçº¿ç¨‹
    
    # å†…å­˜é…ç½®
    jvm-args: [
        "-Xms2g",                 # åˆå§‹å †å†…å­˜2GB
        "-Xmx2g",                 # æœ€å¤§å †å†…å­˜2GB
        "-XX:MaxPermSize=256m"    # æ°¸ä¹…ä»£å†…å­˜
    ]
}
```

### 3.4 WebæœåŠ¡å™¨ç»„ä»¶


**ğŸŒ HTTPæœåŠ¡å±‚**ï¼š
```
Puppet Serverçš„WebæœåŠ¡æ¶æ„:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Nginx/LB      â”‚ â† å¯é€‰çš„è´Ÿè½½å‡è¡¡
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ ç«¯å£8140
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Jetty Web     â”‚ â† å†…ç½®WebæœåŠ¡å™¨
    â”‚   Container      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Puppet Server  â”‚ â† æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
    â”‚   (JVM Process)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”— APIç«¯ç‚¹è¯´æ˜**ï¼š
- `/puppet/v3/catalog/{node}` - è·å–èŠ‚ç‚¹é…ç½®
- `/puppet/v3/report/{node}` - æäº¤æ‰§è¡ŒæŠ¥å‘Š  
- `/puppet/v3/file_metadata/{path}` - æ–‡ä»¶å…ƒæ•°æ®
- `/puppet/v3/file_content/{path}` - æ–‡ä»¶å†…å®¹ä¸‹è½½

---

## 4. ğŸ” Certificate Authorityç®¡ç†


### 4.1 PKIä½“ç³»æ¶æ„


**ğŸ”’ Puppet PKIå·¥ä½œæœºåˆ¶**ï¼š
```
è¯ä¹¦ç®¡ç†æµç¨‹:

Puppet Master (CAæ ¹è¯ä¹¦)
    â”‚
    â”œâ”€ ç­¾å‘Agentè¯ä¹¦
    â”‚    â”œâ”€ web01.company.com.pem
    â”‚    â”œâ”€ db01.company.com.pem  
    â”‚    â””â”€ lb01.company.com.pem
    â”‚
    â””â”€ éªŒè¯Agentèº«ä»½
         â””â”€ æ¯æ¬¡è¿æ¥éƒ½éªŒè¯è¯ä¹¦
```

**ğŸ“‹ è¯ä¹¦ç±»å‹è¯´æ˜**ï¼š

| è¯ä¹¦ç±»å‹ | æ–‡ä»¶å | ä½œç”¨ | ä½ç½® |
|----------|--------|------|------|
| **CAæ ¹è¯ä¹¦** | `ca.pem` | `ç­¾å‘å…¶ä»–è¯ä¹¦` | `/etc/puppetlabs/puppet/ssl/ca/` |
| **Masterè¯ä¹¦** | `puppet-master.pem` | `Masterèº«ä»½è®¤è¯` | `/etc/puppetlabs/puppet/ssl/certs/` |
| **Agentè¯ä¹¦** | `{hostname}.pem` | `Agentèº«ä»½è®¤è¯` | `å„Agentæœ¬åœ°sslç›®å½•` |
| **CRLåˆ—è¡¨** | `crl.pem` | `å·²æ’¤é”€è¯ä¹¦åˆ—è¡¨` | `/etc/puppetlabs/puppet/ssl/ca/` |

### 4.2 è¯ä¹¦ç®¡ç†æ“ä½œ


**ğŸ› ï¸ å¸¸ç”¨è¯ä¹¦ç®¡ç†å‘½ä»¤**ï¼š

```bash
# æŸ¥çœ‹å¾…ç­¾ç½²çš„è¯ä¹¦è¯·æ±‚
sudo puppetserver ca list

# ç­¾ç½²æŒ‡å®šAgentè¯ä¹¦  
sudo puppetserver ca sign --certname web01.company.com

# æ‰¹é‡ç­¾ç½²æ‰€æœ‰å¾…å¤„ç†è¯ä¹¦
sudo puppetserver ca sign --all

# æ’¤é”€Agentè¯ä¹¦
sudo puppetserver ca revoke --certname web01.company.com

# æ¸…ç†Agentè¯ä¹¦
sudo puppetserver ca clean --certname web01.company.com
```

**âš ï¸ è¯ä¹¦æ•…éšœæ’æŸ¥**ï¼š
```
å¸¸è§è¯ä¹¦é—®é¢˜:
â”œâ”€ Agentè¯ä¹¦è¿‡æœŸ â†’ é‡æ–°ç”Ÿæˆè¯ä¹¦è¯·æ±‚
â”œâ”€ æ—¶é—´åŒæ­¥é—®é¢˜ â†’ ç¡®ä¿Masterå’ŒAgentæ—¶é—´ä¸€è‡´
â”œâ”€ ä¸»æœºåä¸åŒ¹é… â†’ æ£€æŸ¥certnameé…ç½®
â””â”€ æƒé™é—®é¢˜    â†’ æ£€æŸ¥sslç›®å½•æƒé™
```

---

## 5. ğŸ“ ç›®å½•ç¯å¢ƒæ¦‚å¿µ


### 5.1 ç¯å¢ƒçš„ä½œç”¨


**ğŸŒ ä»€ä¹ˆæ˜¯Puppetç¯å¢ƒ**ï¼Ÿ

> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šç¯å¢ƒå°±åƒä¸åŒçš„"é…ç½®å¥—è£…"ï¼Œè®©ä½ å¯ä»¥ä¸ºå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ä¸åŒåœºæ™¯ç»´æŠ¤ä¸åŒçš„é…ç½®ç‰ˆæœ¬

```
ç¯å¢ƒä½¿ç”¨åœºæ™¯:
å¼€å‘ç¯å¢ƒ(development)     æµ‹è¯•ç¯å¢ƒ(testing)      ç”Ÿäº§ç¯å¢ƒ(production)
â”œâ”€ æ–°åŠŸèƒ½æµ‹è¯•é…ç½®         â”œâ”€ ç¨³å®šç‰ˆæœ¬é…ç½®        â”œâ”€ çº¿ä¸Šæ­£å¼é…ç½®
â”œâ”€ é¢‘ç¹å˜æ›´              â”œâ”€ å®šæœŸæ›´æ–°            â”œâ”€ ä¸¥æ ¼å˜æ›´æ§åˆ¶
â””â”€ å…è®¸å®éªŒæ€§é…ç½®        â””â”€ éªŒè¯é…ç½®æ­£ç¡®æ€§      â””â”€ é«˜å¯ç”¨æ€§è¦æ±‚
```

### 5.2 ç¯å¢ƒç›®å½•ç»“æ„


**ğŸ“‚ æ ‡å‡†ç¯å¢ƒç›®å½•å¸ƒå±€**ï¼š
```
/etc/puppetlabs/code/environments/
â”œâ”€ production/                    â† ç”Ÿäº§ç¯å¢ƒ
â”‚   â”œâ”€ manifests/                 â† Puppetä»£ç 
â”‚   â”‚   â””â”€ site.pp               â† ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€ modules/                   â† æ¨¡å—ç›®å½•
â”‚   â”‚   â”œâ”€ apache/               â† Apacheæ¨¡å—
â”‚   â”‚   â”œâ”€ mysql/                â† MySQLæ¨¡å—
â”‚   â”‚   â””â”€ common/               â† é€šç”¨æ¨¡å—
â”‚   â”œâ”€ hieradata/                â† Hieraæ•°æ®
â”‚   â”‚   â”œâ”€ common.yaml           â† é€šç”¨æ•°æ®
â”‚   â”‚   â””â”€ nodes/                â† èŠ‚ç‚¹ç‰¹å®šæ•°æ®
â”‚   â””â”€ environment.conf          â† ç¯å¢ƒé…ç½®
â”œâ”€ testing/                      â† æµ‹è¯•ç¯å¢ƒ
â””â”€ development/                  â† å¼€å‘ç¯å¢ƒ
```

**âš™ï¸ environment.confé…ç½®**ï¼š
```ini
# /etc/puppetlabs/code/environments/production/environment.conf
modulepath = modules:$basemodulepath
manifest = manifests
config_version = 'git rev-parse HEAD'
```

### 5.3 ç¯å¢ƒåˆ‡æ¢æœºåˆ¶


**ğŸ”„ Agentç¯å¢ƒæŒ‡å®š**ï¼š
```bash
# æ–¹å¼1: å‘½ä»¤è¡ŒæŒ‡å®šç¯å¢ƒ
puppet agent -t --environment=testing

# æ–¹å¼2: é…ç½®æ–‡ä»¶æŒ‡å®š
# /etc/puppetlabs/puppet/puppet.conf
[agent]
environment = production
```

**ğŸ¯ ç¯å¢ƒåˆ†é…ç­–ç•¥**ï¼š
```ruby
# site.ppä¸­çš„ç¯å¢ƒåˆ†é…é€»è¾‘
node /^dev-/ {
  # å¼€å‘æœåŠ¡å™¨è‡ªåŠ¨ä½¿ç”¨developmentç¯å¢ƒ
}

node /^test-/ {
  # æµ‹è¯•æœåŠ¡å™¨è‡ªåŠ¨ä½¿ç”¨testingç¯å¢ƒ  
}

node default {
  # é»˜è®¤ä½¿ç”¨productionç¯å¢ƒ
}
```

---

## 6. ğŸ“¦ ç¼–è¯‘ç›®å½•ä¸è¿è¡Œæ—¶


### 6.1 Catalogç¼–è¯‘è¿‡ç¨‹


**ğŸ”§ ä»€ä¹ˆæ˜¯Catalogç¼–è¯‘**ï¼Ÿ

> **ç®€å•ç†è§£**ï¼šå°±åƒæŠŠä½ å†™çš„"é…ç½®æ¸…å•"ç¿»è¯‘æˆè®¡ç®—æœºèƒ½æ‰§è¡Œçš„"å…·ä½“æ­¥éª¤æ¸…å•"

```
ç¼–è¯‘è¿‡ç¨‹ç¤ºæ„:

Manifestä»£ç               â†’    ç¼–è¯‘åçš„Catalog
package { 'httpd':            [
  ensure => installed,          {
}                                "type": "package",
service { 'httpd':               "title": "httpd", 
  ensure => running,             "parameters": {"ensure": "installed"}
}                              },
                              {
                                "type": "service",
                                "title": "httpd",
                                "parameters": {"ensure": "running"}
                              }
                            ]
```

**ğŸ“‹ ç¼–è¯‘æ­¥éª¤è¯¦è§£**ï¼š
```
ç¼–è¯‘æµç¨‹:
æ­¥éª¤1ï¸âƒ£: è§£æManifestæ–‡ä»¶      â†’ è¯­æ³•æ£€æŸ¥ï¼Œæ„å»ºè¯­æ³•æ ‘
æ­¥éª¤2ï¸âƒ£: æ”¶é›†Node Facts        â†’ è·å–èŠ‚ç‚¹ç³»ç»Ÿä¿¡æ¯
æ­¥éª¤3ï¸âƒ£: åº”ç”¨Hieraæ•°æ®        â†’ æ ¹æ®FactsæŸ¥æ‰¾å¯¹åº”æ•°æ®
æ­¥éª¤4ï¸âƒ£: æ‰§è¡Œå‡½æ•°å’Œæ¨¡æ¿       â†’ å¤„ç†åŠ¨æ€å†…å®¹
æ­¥éª¤5ï¸âƒ£: ä¾èµ–å…³ç³»è§£æ         â†’ ç¡®å®šèµ„æºæ‰§è¡Œé¡ºåº
æ­¥éª¤6ï¸âƒ£: ç”Ÿæˆæœ€ç»ˆCatalog     â†’ è¾“å‡ºå¯æ‰§è¡Œçš„é…ç½®
```

### 6.2 ç¼–è¯‘ç¼“å­˜æœºåˆ¶


**ğŸ’¾ ç¼“å­˜æå‡æ€§èƒ½**ï¼š

| ç¼“å­˜ç±»å‹ | ç¼“å­˜å†…å®¹ | æœ‰æ•ˆæœŸ | ä½œç”¨ |
|----------|----------|--------|------|
| **Node Cache** | `ç¼–è¯‘åçš„Catalog` | `å¯é…ç½®(é»˜è®¤0)` | `é¿å…é‡å¤ç¼–è¯‘` |
| **Environment Cache** | `ç¯å¢ƒé…ç½®ä¿¡æ¯` | `æ— é™æœŸ` | `å‡å°‘æ–‡ä»¶ç³»ç»Ÿè®¿é—®` |
| **Class Cache** | `ç±»å®šä¹‰ä¿¡æ¯` | `æ— é™æœŸ` | `åŠ é€Ÿç±»æŸ¥æ‰¾` |

```ruby
# puppet.confä¸­çš„ç¼“å­˜é…ç½®
[master]
environment_timeout = 5m        # ç¯å¢ƒç¼“å­˜5åˆ†é’Ÿ
node_cache_terminus = write_only # èŠ‚ç‚¹ç¼“å­˜ç­–ç•¥
```

### 6.3 è¿è¡Œæ—¶æ‰§è¡Œ


**âš¡ Agentæ‰§è¡ŒCatalog**ï¼š
```
Agentæ‰§è¡Œé˜¶æ®µ:
â”œâ”€ Pre-runé˜¶æ®µ    â†’ æ‰§è¡Œå‰ç½®æ£€æŸ¥å’Œå‡†å¤‡å·¥ä½œ
â”œâ”€ Main-runé˜¶æ®µ   â†’ æŒ‰ä¾èµ–é¡ºåºæ‰§è¡Œæ‰€æœ‰èµ„æº
â”œâ”€ Post-runé˜¶æ®µ   â†’ æ‰§è¡Œæ¸…ç†å’Œåç»­å·¥ä½œ  
â””â”€ Reporté˜¶æ®µ     â†’ ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Šå‘é€ç»™Master
```

**ğŸ” æ‰§è¡ŒçŠ¶æ€ç›‘æ§**ï¼š
- **Changed**: èµ„æºçŠ¶æ€å‘ç”Ÿå˜æ›´
- **Unchanged**: èµ„æºå·²æ˜¯æœŸæœ›çŠ¶æ€  
- **Failed**: èµ„æºæ‰§è¡Œå¤±è´¥
- **Skipped**: èµ„æºè¢«è·³è¿‡æ‰§è¡Œ

---

## 7. ğŸ’¾ Puppet DBæ•°æ®å­˜å‚¨


### 7.1 PuppetDBæ¶æ„


**ğŸ—„ï¸ PuppetDBçš„ä½œç”¨**ï¼š

> **é€šä¿—è§£é‡Š**ï¼šPuppetDBå°±åƒPuppetçš„"å¤§è„‘è®°å¿†"ï¼Œè®°å½•æ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®å†å²ã€å½“å‰çŠ¶æ€å’Œå˜æ›´è®°å½•

```
PuppetDBæ•°æ®æµè½¬:

Puppet Master  â†’  PuppetDB  â†  å¤–éƒ¨æŸ¥è¯¢
    â”‚              â”‚              â”‚
    â”œâ”€ å­˜å‚¨Catalog  â”œâ”€ å­˜å‚¨Facts   â”œâ”€ Webç•Œé¢æŸ¥è¯¢
    â”œâ”€ å­˜å‚¨Report   â”œâ”€ å­˜å‚¨Node    â”œâ”€ APIæŸ¥è¯¢
    â””â”€ å­˜å‚¨Events   â””â”€ æä¾›å†å²    â””â”€ ç›‘æ§ç³»ç»Ÿ
```

**ğŸ“Š PuppetDBå­˜å‚¨å†…å®¹**ï¼š

| æ•°æ®ç±»å‹ | å†…å®¹ | ç”¨é€” |
|----------|------|------|
| **Facts** | `èŠ‚ç‚¹ç³»ç»Ÿä¿¡æ¯` | `ç”¨äºé…ç½®ç¼–è¯‘å’ŒæŸ¥è¯¢` |
| **Catalogs** | `å·²ç¼–è¯‘çš„é…ç½®` | `è¿½è¸ªé…ç½®å˜æ›´å†å²` |
| **Reports** | `æ‰§è¡Œç»“æœæŠ¥å‘Š` | `ç›‘æ§å’Œæ•…éšœæ’æŸ¥` |
| **Events** | `å…·ä½“å˜æ›´äº‹ä»¶` | `è¯¦ç»†çš„å˜æ›´è®°å½•` |

### 7.2 æ•°æ®åº“åç«¯é€‰æ‹©


**ğŸª æ”¯æŒçš„æ•°æ®åº“ç±»å‹**ï¼š

```
æ•°æ®åº“é€‰æ‹©å»ºè®®:
å°è§„æ¨¡ç¯å¢ƒ(< 100èŠ‚ç‚¹)     ä¸­ç­‰è§„æ¨¡(100-1000èŠ‚ç‚¹)    å¤§è§„æ¨¡(> 1000èŠ‚ç‚¹)
â”œâ”€ PostgreSQL(æ¨è)       â”œâ”€ PostgreSQL            â”œâ”€ PostgreSQLé›†ç¾¤
â”œâ”€ å•æœºéƒ¨ç½²              â”œâ”€ ä¸»ä»å¤åˆ¶              â”œâ”€ åˆ†ç‰‡/åˆ†åŒº
â””â”€ åŸºæœ¬é…ç½®å³å¯          â””â”€ æ€§èƒ½è°ƒä¼˜              â””â”€ ä¸“ä¸šDBAç»´æŠ¤
```

**âš™ï¸ PostgreSQLé…ç½®ç¤ºä¾‹**ï¼š
```ini
# /etc/puppetlabs/puppetdb/conf.d/database.ini
[database]
classname = org.postgresql.Driver
subprotocol = postgresql
subname = //localhost:5432/puppetdb
username = puppetdb
password = puppetdb_password

# è¿æ¥æ± é…ç½®
conn-max-age = 60
conn-keep-alive = 45
conn-lifetime = 0
```

### 7.3 æŸ¥è¯¢APIä½¿ç”¨


**ğŸ” PuppetDBæŸ¥è¯¢ç¤ºä¾‹**ï¼š

```bash
# æŸ¥è¯¢æ‰€æœ‰LinuxèŠ‚ç‚¹
curl -X GET http://puppetdb:8080/pdb/query/v4/nodes \
  --data-urlencode 'query=["=", ["fact", "kernel"], "Linux"]'

# æŸ¥è¯¢ç‰¹å®šèŠ‚ç‚¹çš„Facts
curl -X GET http://puppetdb:8080/pdb/query/v4/facts/web01.company.com

# æŸ¥è¯¢æœ€è¿‘çš„æŠ¥å‘Š
curl -X GET http://puppetdb:8080/pdb/query/v4/reports \
  --data-urlencode 'query=["and", ["=", "certname", "web01"], ["=", "status", "changed"]]'
```

---

## 8. ğŸ“ˆ æŠ¥å‘Šç³»ç»Ÿæœºåˆ¶


### 8.1 æŠ¥å‘Šç”Ÿæˆæµç¨‹


**ğŸ“‹ æŠ¥å‘Šç³»ç»Ÿæ¶æ„**ï¼š
```
æŠ¥å‘Šæ•°æ®æµ:

Agentæ‰§è¡Œé…ç½®
    â”‚
    â”œâ”€ ç”ŸæˆReportå¯¹è±¡
    â”‚   â”œâ”€ æ€»ä½“çŠ¶æ€(success/failed)
    â”‚   â”œâ”€ èµ„æºå˜æ›´åˆ—è¡¨
    â”‚   â”œâ”€ æ‰§è¡Œæ—¶é—´ä¿¡æ¯
    â”‚   â””â”€ é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯
    â”‚
    â”œâ”€ å‘é€åˆ°Master
    â”‚   â””â”€ POST /puppet/v3/report/{node}
    â”‚
    â””â”€ Masterå¤„ç†æŠ¥å‘Š
        â”œâ”€ å­˜å‚¨åˆ°PuppetDB
        â”œâ”€ è§¦å‘æŠ¥å‘Šå¤„ç†å™¨
        â””â”€ å‘é€é€šçŸ¥(å¯é€‰)
```

### 8.2 æŠ¥å‘Šå†…å®¹è§£æ


**ğŸ“Š æŠ¥å‘Šæ•°æ®ç»“æ„**ï¼š

```json
{
  "host": "web01.company.com",
  "time": "2025-01-17T10:30:00.000Z",
  "status": "changed",
  "configuration_version": "1642417800",
  "transaction_uuid": "12345-abcde-67890",
  "resource_events": [
    {
      "resource_type": "package",
      "resource_title": "httpd", 
      "status": "success",
      "property": "ensure",
      "previous_value": "absent",
      "desired_value": "present",
      "message": "installed httpd-2.4.6"
    }
  ],
  "metrics": {
    "time": {
      "config_retrieval": 2.5,
      "catalog_application": 15.3,
      "total": 18.2
    },
    "events": {
      "total": 5,
      "success": 4, 
      "failure": 0,
      "changed": 3
    }
  }
}
```

### 8.3 æŠ¥å‘Šå¤„ç†å™¨é…ç½®


**âš™ï¸ æŠ¥å‘Šå¤„ç†å™¨ç±»å‹**ï¼š

| å¤„ç†å™¨ç±»å‹ | åŠŸèƒ½ | é…ç½®ç¤ºä¾‹ |
|------------|------|----------|
| **store** | `å­˜å‚¨åˆ°PuppetDB` | `reports = puppetdb,store` |
| **log** | `å†™å…¥æ—¥å¿—æ–‡ä»¶` | `reports = log` |  
| **http** | `å‘é€HTTPè¯·æ±‚` | `reports = http` |
| **tagmail** | `é‚®ä»¶é€šçŸ¥` | `reports = tagmail` |

```ruby
# puppet.confä¸­çš„æŠ¥å‘Šé…ç½®
[master]
reports = puppetdb,log,http
reporturl = http://monitoring.company.com/puppet/reports
```

---

## 9. ğŸ—ï¸ é«˜å¯ç”¨é›†ç¾¤é…ç½®


### 9.1 é«˜å¯ç”¨æ¶æ„è®¾è®¡


**ğŸ”§ HAæ¶æ„æ–¹æ¡ˆ**ï¼š

```
Puppeté«˜å¯ç”¨é›†ç¾¤æ¶æ„:

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Load Balancer â”‚ â† HAProxy/Nginx
        â”‚   (VIP: x.x.x.x)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚         â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚ Master1 â”‚ â”‚Master2 â”‚ â”‚Master3 â”‚ â† Puppet Serveré›†ç¾¤
   â”‚(Active) â”‚ â”‚(Backup)â”‚ â”‚(Backup)â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚         â”‚         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Shared Storage    â”‚ â† å…±äº«é…ç½®å­˜å‚¨
        â”‚  (NFS/GlusterFS)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   PuppetDB Cluster  â”‚ â† æ•°æ®åº“é›†ç¾¤
        â”‚  (PostgreSQL HA)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 è´Ÿè½½å‡è¡¡é…ç½®


**âš–ï¸ HAProxyé…ç½®ç¤ºä¾‹**ï¼š

```bash
# /etc/haproxy/haproxy.cfg
global
    daemon
    maxconn 4096

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend puppet_frontend
    bind *:8140 ssl crt /etc/ssl/puppet-bundle.pem
    default_backend puppet_masters

backend puppet_masters
    balance roundrobin
    option httpchk GET /status/v1/simple
    server master1 puppet-master1:8140 check ssl verify none
    server master2 puppet-master2:8140 check ssl verify none backup  
    server master3 puppet-master3:8140 check ssl verify none backup
```

### 9.3 å…±äº«å­˜å‚¨é…ç½®


**ğŸ“ é…ç½®æ–‡ä»¶åŒæ­¥æ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ¡ˆ1: Git + Webhookè‡ªåŠ¨åŒæ­¥
# æ‰€æœ‰MasterèŠ‚ç‚¹é…ç½®Git Hook
#!/bin/bash
# /opt/puppet/deploy-hook.sh
cd /etc/puppetlabs/code/environments/production
git pull origin master
systemctl reload puppetserver

# æ–¹æ¡ˆ2: NFSå…±äº«å­˜å‚¨
# /etc/fstab
nfs-server:/puppet/code /etc/puppetlabs/code nfs defaults 0 0

# æ–¹æ¡ˆ3: GlusterFSåˆ†å¸ƒå¼å­˜å‚¨  
mount -t glusterfs gluster-cluster:/puppet-volume /etc/puppetlabs/code
```

### 9.4 æ•…éšœåˆ‡æ¢æœºåˆ¶


**ğŸ”„ è‡ªåŠ¨æ•…éšœè½¬ç§»**ï¼š

```bash
# Keepalivedå®ç°VIPæ¼‚ç§»
# /etc/keepalived/keepalived.conf
vrrp_script chk_puppet {
    script "/usr/local/bin/check_puppetserver.sh"
    interval 2
    weight -2
}

vrrp_instance VI_1 {
    state MASTER
    interface eth0  
    virtual_router_id 51
    priority 100
    advert_int 1
    virtual_ipaddress {
        192.168.1.100/24
    }
    track_script {
        chk_puppet
    }
}
```

**ğŸ©º å¥åº·æ£€æŸ¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# /usr/local/bin/check_puppetserver.sh
curl -s -k https://localhost:8140/status/v1/simple | grep -q "running"
exit $?
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Master-Agentæ¶æ„ï¼šé›†ä¸­å¼é…ç½®ç®¡ç†ï¼ŒMasterç¼–è¯‘åˆ†å‘ï¼ŒAgentæ‰§è¡Œåº”ç”¨
ğŸ”¸ è¯ä¹¦ç®¡ç†ï¼šPKIä½“ç³»ä¿è¯å®‰å…¨é€šä¿¡ï¼Œç†è§£è¯ä¹¦ç­¾å‘å’Œæ’¤é”€æµç¨‹
ğŸ”¸ ç¯å¢ƒç®¡ç†ï¼šdevelopment/testing/productionç¯å¢ƒéš”ç¦»
ğŸ”¸ ç¼–è¯‘æ‰§è¡Œï¼šManifestâ†’Catalogâ†’æ‰§è¡Œçš„å®Œæ•´æµç¨‹
ğŸ”¸ æ•°æ®å­˜å‚¨ï¼šPuppetDBå­˜å‚¨æ‰€æœ‰é…ç½®å’Œå†å²æ•°æ®
ğŸ”¸ æŠ¥å‘Šç³»ç»Ÿï¼šç›‘æ§é…ç½®æ‰§è¡ŒçŠ¶æ€å’Œå˜æ›´æƒ…å†µ
ğŸ”¸ é«˜å¯ç”¨ï¼šè´Ÿè½½å‡è¡¡+å…±äº«å­˜å‚¨+æ•…éšœè½¬ç§»
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦Master-Agentæ¨¡å¼**ï¼Ÿ
```
é›†ä¸­ç®¡ç†ä¼˜åŠ¿ï¼š
â”œâ”€ é…ç½®ä¸€è‡´æ€§ï¼šæ‰€æœ‰èŠ‚ç‚¹ä½¿ç”¨ç›¸åŒé…ç½®æº
â”œâ”€ ç‰ˆæœ¬æ§åˆ¶ï¼šé…ç½®å˜æ›´æœ‰å†å²è®°å½•
â”œâ”€ æƒé™æ§åˆ¶ï¼šåªæœ‰æˆæƒçš„Agentæ‰èƒ½è·å–é…ç½®
â””â”€ ç›‘æ§å®¡è®¡ï¼šæ‰€æœ‰å˜æ›´éƒ½æœ‰è®°å½•å’ŒæŠ¥å‘Š
```

**ğŸ”¹ è¯ä¹¦ç®¡ç†çš„é‡è¦æ€§**ï¼Ÿ
```
å®‰å…¨ä¿éšœï¼š
â”œâ”€ èº«ä»½éªŒè¯ï¼šç¡®ä¿Agentèº«ä»½åˆæ³•
â”œâ”€ é€šä¿¡åŠ å¯†ï¼šé˜²æ­¢é…ç½®ä¿¡æ¯æ³„éœ²
â”œâ”€ é˜²é‡æ”¾æ”»å‡»ï¼šè¯ä¹¦æœ‰æœ‰æ•ˆæœŸé™åˆ¶
â””â”€ è®¿é—®æ§åˆ¶ï¼šæ’¤é”€è¯ä¹¦ç«‹å³æ–­å¼€è®¿é—®
```

**ğŸ”¹ ç¯å¢ƒéš”ç¦»çš„ä»·å€¼**ï¼Ÿ
```
é£é™©æ§åˆ¶ï¼š
â”œâ”€ å¼€å‘ç¯å¢ƒï¼šè‡ªç”±æµ‹è¯•æ–°é…ç½®
â”œâ”€ æµ‹è¯•ç¯å¢ƒï¼šéªŒè¯é…ç½®ç¨³å®šæ€§  
â”œâ”€ ç”Ÿäº§ç¯å¢ƒï¼šä¸¥æ ¼çš„å˜æ›´æ§åˆ¶
â””â”€ é…ç½®ç‰ˆæœ¬ï¼šä¸åŒç¯å¢ƒä¸åŒé…ç½®ç‰ˆæœ¬
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ éƒ¨ç½²è§„æ¨¡å»ºè®®**ï¼š

| èŠ‚ç‚¹æ•°é‡ | æ¶æ„å»ºè®® | é…ç½®å»ºè®® |
|----------|----------|----------|
| `< 100` | `å•Master` | `4GBå†…å­˜ï¼Œ2CPU` |
| `100-500` | `ä¸»å¤‡Master` | `8GBå†…å­˜ï¼Œ4CPU` |
| `500-2000` | `Masteré›†ç¾¤` | `16GBå†…å­˜ï¼Œ8CPU` |
| `> 2000` | `åˆ†åŒºåŸŸéƒ¨ç½²` | `32GB+å†…å­˜ï¼Œä¸“ä¸šè¿ç»´` |

**âš¡ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**ï¼š
```
å…³é”®ä¼˜åŒ–ç‚¹ï¼š
â”œâ”€ JVMå‚æ•°è°ƒä¼˜ï¼šåˆç†è®¾ç½®å †å†…å­˜å¤§å°
â”œâ”€ æ•°æ®åº“ä¼˜åŒ–ï¼šPuppetDBæŸ¥è¯¢å’Œç´¢å¼•ä¼˜åŒ–
â”œâ”€ ç½‘ç»œä¼˜åŒ–ï¼šå¯ç”¨gzipå‹ç¼©ï¼Œå‡å°‘ä¼ è¾“æ•°æ®
â”œâ”€ ç¼“å­˜ç­–ç•¥ï¼šåˆç†è®¾ç½®ç¯å¢ƒå’Œç¼–è¯‘ç¼“å­˜
â””â”€ ç›‘æ§å‘Šè­¦ï¼šåŠæ—¶å‘ç°æ€§èƒ½ç“¶é¢ˆ
```

**ğŸ› ï¸ è¿ç»´æœ€ä½³å®è·µ**ï¼š
- **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨Gitç‰ˆæœ¬æ§åˆ¶ï¼Œä»£ç å®¡æŸ¥æµç¨‹
- **ç¯å¢ƒç®¡ç†**ï¼šå¼€å‘â†’æµ‹è¯•â†’ç”Ÿäº§çš„æ™‹çº§æµç¨‹
- **ç›‘æ§å‘Šè­¦**ï¼šé…ç½®æ‰§è¡ŒçŠ¶æ€ã€æ€§èƒ½æŒ‡æ ‡ç›‘æ§
- **å¤‡ä»½æ¢å¤**ï¼šå®šæœŸå¤‡ä»½è¯ä¹¦ã€é…ç½®å’Œæ•°æ®åº“
- **å®‰å…¨åŠ å›º**ï¼šå®šæœŸæ›´æ–°è¯ä¹¦ï¼Œç½‘ç»œè®¿é—®æ§åˆ¶

**æ ¸å¿ƒè®°å¿†**ï¼š
- Puppetæ¶æ„æ˜¯Masterç»Ÿä¸€ç®¡ç†ï¼ŒAgentæ‰§è¡Œåº”ç”¨
- è¯ä¹¦ä½“ç³»ä¿è¯å®‰å…¨ï¼Œç¯å¢ƒéš”ç¦»æ§åˆ¶é£é™©
- ç¼–è¯‘æ‰§è¡Œæµç¨‹æ¸…æ™°ï¼Œæ•°æ®å­˜å‚¨ä¾¿äºæŸ¥è¯¢
- é«˜å¯ç”¨é å†—ä½™å’Œæ•…éšœè½¬ç§»ï¼Œç›‘æ§æŠ¥å‘Šä¸å¯å°‘