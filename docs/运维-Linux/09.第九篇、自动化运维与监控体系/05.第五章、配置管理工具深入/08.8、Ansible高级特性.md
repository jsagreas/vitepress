---
title: 8ã€Ansibleé«˜çº§ç‰¹æ€§
---
## ğŸ“š ç›®å½•

1. [VaultåŠ å¯†æ•°æ®ç®¡ç†](#1-vaultåŠ å¯†æ•°æ®ç®¡ç†)
2. [å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ§åˆ¶](#2-å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ§åˆ¶)
3. [Callbackæ’ä»¶å¼€å‘](#3-callbackæ’ä»¶å¼€å‘)
4. [Strategyæ’ä»¶ä½¿ç”¨](#4-strategyæ’ä»¶ä½¿ç”¨)
5. [Connectionæ’ä»¶é…ç½®](#5-connectionæ’ä»¶é…ç½®)
6. [æ€§èƒ½è°ƒä¼˜å‚æ•°](#6-æ€§èƒ½è°ƒä¼˜å‚æ•°)
7. [å¹¶å‘æ§åˆ¶ä¸é™æµ](#7-å¹¶å‘æ§åˆ¶ä¸é™æµ)
8. [ä¼ä¸šçº§éƒ¨ç½²æ¶æ„](#8-ä¼ä¸šçº§éƒ¨ç½²æ¶æ„)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” VaultåŠ å¯†æ•°æ®ç®¡ç†


### 1.1 VaultåŸºæœ¬æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯Ansible Vault**
Ansible Vaultæ˜¯Ansibleå†…ç½®çš„åŠ å¯†å·¥å…·ï¼Œä¸“é—¨ç”¨æ¥ä¿æŠ¤æ•æ„Ÿæ•°æ®ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ç»™ä½ çš„å¯†ç ã€å¯†é’¥ç­‰æœºå¯†ä¿¡æ¯åŠ ä¸Šä¸€æŠŠ"é”"ï¼Œè®©åˆ«äººçœ‹ä¸æ‡‚ã€‚

```
æ™®é€šå˜é‡æ–‡ä»¶ï¼š          VaultåŠ å¯†åï¼š
password: 123456   â†’   $ANSIBLE_VAULT;1.1;AES256
                       66633...encrypted...33466
```

**ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦Vault**
- **å®‰å…¨éœ€æ±‚**ï¼šå¯†ç ã€APIå¯†é’¥ä¸èƒ½æ˜æ–‡å­˜å‚¨
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šåŠ å¯†åå¯ä»¥å®‰å…¨åœ°æäº¤åˆ°Git
- **å›¢é˜Ÿåä½œ**ï¼šå¤šäººå…±äº«é…ç½®æ—¶ä¿æŠ¤æ•æ„Ÿä¿¡æ¯

### 1.2 VaultåŸºç¡€æ“ä½œ


**ğŸ”§ åˆ›å»ºåŠ å¯†æ–‡ä»¶**
```bash
# åˆ›å»ºæ–°çš„åŠ å¯†æ–‡ä»¶
ansible-vault create secrets.yml
# ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼Œç„¶åè¿›å…¥ç¼–è¾‘æ¨¡å¼

# åŠ å¯†ç°æœ‰æ–‡ä»¶
ansible-vault encrypt database.yml
```

**ğŸ” æŸ¥çœ‹å’Œç¼–è¾‘åŠ å¯†æ–‡ä»¶**
```bash
# æŸ¥çœ‹åŠ å¯†æ–‡ä»¶å†…å®¹
ansible-vault view secrets.yml

# ç¼–è¾‘åŠ å¯†æ–‡ä»¶
ansible-vault edit secrets.yml

# è§£å¯†æ–‡ä»¶ï¼ˆå˜æˆæ˜æ–‡ï¼‰
ansible-vault decrypt secrets.yml
```

### 1.3 Vaulté«˜çº§ç®¡ç†æŠ€å·§


**ğŸ“‹ å¤šé‡å¯†ç ç®¡ç†**
```bash
# ä½¿ç”¨ä¸åŒçš„vault-idæ ‡è¯†ä¸åŒç¯å¢ƒ
ansible-vault create --vault-id dev@prompt dev_secrets.yml
ansible-vault create --vault-id prod@prompt prod_secrets.yml

# è¿è¡Œæ—¶æŒ‡å®šå¤šä¸ªvaultå¯†ç 
ansible-playbook --vault-id dev@prompt --vault-id prod@prompt site.yml
```

**ğŸ” å¯†ç æ–‡ä»¶ç®¡ç†**
```bash
# åˆ›å»ºå¯†ç æ–‡ä»¶ï¼ˆæ³¨æ„æƒé™ï¼‰
echo "my_secret_password" > ~/.ansible_vault_pass
chmod 600 ~/.ansible_vault_pass

# é…ç½®è‡ªåŠ¨è¯»å–å¯†ç 
export ANSIBLE_VAULT_PASSWORD_FILE=~/.ansible_vault_pass
```

### 1.4 åœ¨Playbookä¸­ä½¿ç”¨Vault


**ğŸ“ å˜é‡åŠ å¯†ç¤ºä¾‹**
```yaml
# secrets.ymlï¼ˆåŠ å¯†æ–‡ä»¶ï¼‰
vault_db_password: "super_secret_password"
vault_api_key: "abcd1234567890"

# playbook.yml
---
- hosts: webservers
  vars_files:
    - secrets.yml
  tasks:
    - name: é…ç½®æ•°æ®åº“è¿æ¥
      template:
        src: database.conf.j2
        dest: /etc/app/database.conf
      vars:
        db_password: "{{ vault_db_password }}"
```

**ğŸ¯ æœ€ä½³å®è·µå»ºè®®**
- âœ… æ•æ„Ÿå˜é‡åä»¥`vault_`å¼€å¤´ï¼Œä¾¿äºè¯†åˆ«
- âœ… å°†åŠ å¯†æ–‡ä»¶å’Œæ™®é€šæ–‡ä»¶åˆ†å¼€å­˜æ”¾
- âœ… åœ¨CI/CDä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ é€’å¯†ç 
- âš ï¸ æ°¸è¿œä¸è¦å°†å¯†ç æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“

---

## 2. â±ï¸ å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ§åˆ¶


### 2.1 å¼‚æ­¥ä»»åŠ¡çš„æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯å¼‚æ­¥æ‰§è¡Œ**
é€šå¸¸Ansibleæ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¼šç­‰ä¸€ä¸ªä»»åŠ¡å®Œæˆå†æ‰§è¡Œä¸‹ä¸€ä¸ªã€‚å¼‚æ­¥æ‰§è¡Œå°±æ˜¯"ä¸ç­‰äº†ï¼Œå…ˆå¼€å§‹æ‰§è¡Œï¼Œæˆ‘å»å¹²åˆ«çš„äº‹"ã€‚è¿™å¯¹äºè€—æ—¶å¾ˆé•¿çš„ä»»åŠ¡ç‰¹åˆ«æœ‰ç”¨ã€‚

```
åŒæ­¥æ‰§è¡Œï¼š    ä»»åŠ¡A â€”â€”â€”â€”â€”â€”â€” ä»»åŠ¡B â€”â€”â€”â€”â€”â€”â€” ä»»åŠ¡C
å¼‚æ­¥æ‰§è¡Œï¼š    ä»»åŠ¡A â€”â€”â€”â”
             ä»»åŠ¡B â€”â€”â€”â”¼â€”â€”â€” åŒæ—¶æ‰§è¡Œ
             ä»»åŠ¡C â€”â€”â€”â”˜
```

### 2.2 å¼‚æ­¥å‚æ•°è¯¦è§£


**â° asyncå’Œpollå‚æ•°**
```yaml
- name: é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡
  shell: /usr/bin/long_running_operation.sh
  async: 3600    # æœ€å¤§è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
  poll: 30       # æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡çŠ¶æ€
```

**ğŸ“Š å‚æ•°å«ä¹‰å¯¹æ¯”è¡¨**

| å‚æ•° | å«ä¹‰ | è®¾ç½®ä¸º0çš„æ•ˆæœ |
|------|------|-------------|
| `async` | ä»»åŠ¡æœ€å¤§è¿è¡Œæ—¶é—´ | ä»»åŠ¡æ°¸ä¸è¶…æ—¶ |
| `poll` | çŠ¶æ€æ£€æŸ¥é—´éš” | "å‘å°„åä¸ç®¡"æ¨¡å¼ |

### 2.3 å¼‚æ­¥ä»»åŠ¡æ§åˆ¶æ¨¡å¼


**ğŸš€ å‘å°„åä¸ç®¡æ¨¡å¼ï¼ˆFire and Forgetï¼‰**
```yaml
- name: å¯åŠ¨åå°æœåŠ¡æ›´æ–°
  shell: /opt/update_system.sh
  async: 1800
  poll: 0    # ä¸ç­‰å¾…ï¼Œç«‹å³ç»§ç»­
```

**ğŸ” å¼‚æ­¥ç­‰å¾…æ¨¡å¼**
```yaml
- name: å¼€å§‹æ•°æ®å¤‡ä»½
  shell: /usr/bin/backup_database.sh
  async: 7200
  poll: 60
  register: backup_job

- name: æ£€æŸ¥å¤‡ä»½çŠ¶æ€
  debug:
    msg: "å¤‡ä»½çŠ¶æ€: {{ backup_job.finished }}"
```

### 2.4 å¼‚æ­¥ä»»åŠ¡çŠ¶æ€ç®¡ç†


**ğŸ“‹ æ‰‹åŠ¨æ£€æŸ¥ä»»åŠ¡çŠ¶æ€**
```yaml
- name: å¯åŠ¨é•¿ä»»åŠ¡
  command: /bin/sleep 300
  async: 400
  poll: 0
  register: long_task

- name: æ‰§è¡Œå…¶ä»–ä»»åŠ¡
  debug:
    msg: "åšå…¶ä»–äº‹æƒ…..."

- name: æ£€æŸ¥é•¿ä»»åŠ¡æ˜¯å¦å®Œæˆ
  async_status:
    jid: "{{ long_task.ansible_job_id }}"
  register: job_result
  until: job_result.finished
  retries: 30
  delay: 10
```

**âš ï¸ å¼‚æ­¥ä»»åŠ¡æ³¨æ„äº‹é¡¹**
- å¼‚æ­¥ä»»åŠ¡ä¸èƒ½ä½¿ç”¨`sudo`ç›´æ¥åˆ‡æ¢ç”¨æˆ·
- `poll: 0`çš„ä»»åŠ¡æ— æ³•è·å–è¿”å›å€¼
- ä»»åŠ¡å¤±è´¥æ—¶ï¼ŒAnsibleå¯èƒ½æ— æ³•ç«‹å³æ„ŸçŸ¥

---

## 3. ğŸ”Œ Callbackæ’ä»¶å¼€å‘


### 3.1 Callbackæ’ä»¶åŸºç¡€æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯Callbackæ’ä»¶**
Callbackæ’ä»¶å°±åƒæ˜¯Ansibleçš„"ç›‘å¬å™¨"ï¼Œå®ƒä¼šåœ¨Ansibleæ‰§è¡Œè¿‡ç¨‹ä¸­çš„å„ä¸ªå…³é”®æ—¶åˆ»è¢«è°ƒç”¨ã€‚æ¯”å¦‚ä»»åŠ¡å¼€å§‹æ—¶ã€ç»“æŸæ—¶ã€å‡ºé”™æ—¶ç­‰ã€‚é€šè¿‡è¿™äº›æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶Ansibleçš„è¾“å‡ºæ ¼å¼ã€å‘é€é€šçŸ¥ã€è®°å½•æ—¥å¿—ç­‰ã€‚

**ğŸ¯ å¸¸è§åº”ç”¨åœºæ™¯**
- ğŸ“Š è‡ªå®šä¹‰æ‰§è¡ŒæŠ¥å‘Šæ ¼å¼
- ğŸ“§ ä»»åŠ¡å¤±è´¥æ—¶å‘é€é‚®ä»¶é€šçŸ¥
- ğŸ“ è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—è®°å½•
- ğŸ“ˆ æ€§èƒ½ç»Ÿè®¡å’Œç›‘æ§

### 3.2 å†…ç½®Callbackæ’ä»¶


**ğŸ“‹ æŸ¥çœ‹å¯ç”¨æ’ä»¶**
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„callbackæ’ä»¶
ansible-doc -t callback -l

# æŸ¥çœ‹ç‰¹å®šæ’ä»¶çš„è¯¦ç»†ä¿¡æ¯
ansible-doc -t callback json
```

**ğŸ”§ å¯ç”¨Callbackæ’ä»¶**
```ini
# ansible.cfg
[defaults]
stdout_callback = json
callback_whitelist = timer, profile_tasks
```

**ğŸ’» å¸¸ç”¨å†…ç½®æ’ä»¶**
- `json`ï¼šä»¥JSONæ ¼å¼è¾“å‡ºç»“æœ
- `yaml`ï¼šä»¥YAMLæ ¼å¼è¾“å‡ºç»“æœ
- `timer`ï¼šæ˜¾ç¤ºä»»åŠ¡æ‰§è¡Œæ—¶é—´
- `profile_tasks`ï¼šæ˜¾ç¤ºä»»åŠ¡æ€§èƒ½ç»Ÿè®¡

### 3.3 è‡ªå®šä¹‰Callbackæ’ä»¶å¼€å‘


**ğŸ“ æ’ä»¶ç›®å½•ç»“æ„**
```
project/
â”œâ”€â”€ callback_plugins/
â”‚   â””â”€â”€ my_notification.py
â””â”€â”€ ansible.cfg
```

**ğŸ ç®€å•Callbackæ’ä»¶ç¤ºä¾‹**
```python
# callback_plugins/my_notification.py
from ansible.plugins.callback import CallbackBase
import json

class CallbackModule(CallbackBase):
    """
    è‡ªå®šä¹‰é€šçŸ¥æ’ä»¶
    """
    CALLBACK_VERSION = 2.0
    CALLBACK_TYPE = 'notification'
    CALLBACK_NAME = 'my_notification'

    def __init__(self):
        super(CallbackModule, self).__init__()

    def v2_playbook_on_start(self, playbook):
        """Playbookå¼€å§‹æ‰§è¡Œæ—¶è°ƒç”¨"""
        print(f"ğŸš€ å¼€å§‹æ‰§è¡ŒPlaybook: {playbook._file_name}")

    def v2_runner_on_ok(self, result):
        """ä»»åŠ¡æˆåŠŸå®Œæˆæ—¶è°ƒç”¨"""
        host = result._host
        task = result._task
        print(f"âœ… [{host}] ä»»åŠ¡ '{task}' æ‰§è¡ŒæˆåŠŸ")

    def v2_runner_on_failed(self, result, ignore_errors=False):
        """ä»»åŠ¡å¤±è´¥æ—¶è°ƒç”¨"""
        host = result._host
        task = result._task
        print(f"âŒ [{host}] ä»»åŠ¡ '{task}' æ‰§è¡Œå¤±è´¥")
        
        # å¯ä»¥åœ¨è¿™é‡Œå‘é€é‚®ä»¶ã€Slacké€šçŸ¥ç­‰
        self.send_notification(host, task, result._result)

    def send_notification(self, host, task, result):
        """å‘é€é€šçŸ¥çš„æ–¹æ³•"""
        # å®ç°å…·ä½“çš„é€šçŸ¥é€»è¾‘
        pass
```

### 3.4 é«˜çº§Callbackæ’ä»¶åŠŸèƒ½


**ğŸ“Š æ‰§è¡Œç»Ÿè®¡æ’ä»¶ç¤ºä¾‹**
```python
class CallbackModule(CallbackBase):
    CALLBACK_VERSION = 2.0
    CALLBACK_TYPE = 'aggregate'
    CALLBACK_NAME = 'execution_stats'

    def __init__(self):
        super(CallbackModule, self).__init__()
        self.stats = {
            'success': 0,
            'failed': 0,
            'unreachable': 0,
            'skipped': 0
        }
        self.start_time = None

    def v2_playbook_on_start(self, playbook):
        self.start_time = time.time()

    def v2_runner_on_ok(self, result):
        self.stats['success'] += 1

    def v2_runner_on_failed(self, result, ignore_errors=False):
        self.stats['failed'] += 1

    def v2_playbook_on_stats(self, stats):
        """Playbookæ‰§è¡Œå®Œæˆæ—¶çš„ç»Ÿè®¡ä¿¡æ¯"""
        execution_time = time.time() - self.start_time
        
        print("\n" + "="*50)
        print("ğŸ“ˆ æ‰§è¡Œç»Ÿè®¡æŠ¥å‘Š")
        print("="*50)
        print(f"â±ï¸  æ€»æ‰§è¡Œæ—¶é—´: {execution_time:.2f}ç§’")
        print(f"âœ… æˆåŠŸä»»åŠ¡: {self.stats['success']}")
        print(f"âŒ å¤±è´¥ä»»åŠ¡: {self.stats['failed']}")
        print(f"â­ï¸  è·³è¿‡ä»»åŠ¡: {self.stats['skipped']}")
```

---

## 4. ğŸ¯ Strategyæ’ä»¶ä½¿ç”¨


### 4.1 Strategyæ’ä»¶æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯Strategyæ’ä»¶**
Strategyæ’ä»¶æ§åˆ¶ç€Ansibleå¦‚ä½•åœ¨å¤šå°ä¸»æœºä¸Šæ‰§è¡Œä»»åŠ¡ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯å†³å®š"æ˜¯ä¸€å°ä¸€å°æŒ‰é¡ºåºæ‰§è¡Œï¼Œè¿˜æ˜¯æ‰€æœ‰ä¸»æœºåŒæ—¶æ‰§è¡Œ"çš„ç­–ç•¥ã€‚

**ğŸ“Š æ‰§è¡Œç­–ç•¥å¯¹æ¯”**

| ç­–ç•¥ç±»å‹ | æ‰§è¡Œæ–¹å¼ | é€‚ç”¨åœºæ™¯ |
|---------|----------|----------|
| `linear` | æ‰€æœ‰ä¸»æœºåŒæ­¥æ‰§è¡ŒåŒä¸€ä»»åŠ¡ | æ™®é€šéƒ¨ç½²ï¼Œéœ€è¦æ­¥è°ƒä¸€è‡´ |
| `free` | æ¯å°ä¸»æœºç‹¬ç«‹æ‰§è¡Œï¼Œä¸ç­‰å…¶ä»–ä¸»æœº | æ€§èƒ½ä¼˜å…ˆï¼Œä¸»æœºå·®å¼‚å¤§ |
| `debug` | äº¤äº’å¼è°ƒè¯•æ¨¡å¼ | é—®é¢˜æ’æŸ¥ï¼Œå¼€å‘æµ‹è¯• |

### 4.2 Linearç­–ç•¥ï¼ˆé»˜è®¤ï¼‰


**ğŸ”¸ Linearç­–ç•¥ç‰¹ç‚¹**
```
ä¸»æœºA: ä»»åŠ¡1 â€”â€”â€” ä»»åŠ¡2 â€”â€”â€” ä»»åŠ¡3
ä¸»æœºB: ä»»åŠ¡1 â€”â€”â€” ä»»åŠ¡2 â€”â€”â€” ä»»åŠ¡3  â† ç­‰å¾…Aå®Œæˆä»»åŠ¡1
ä¸»æœºC: ä»»åŠ¡1 â€”â€”â€” ä»»åŠ¡2 â€”â€”â€” ä»»åŠ¡3  â† ç­‰å¾…Aã€Bå®Œæˆä»»åŠ¡1
```

**ğŸ“ Linearç­–ç•¥é…ç½®**
```yaml
---
- hosts: webservers
  strategy: linear  # é»˜è®¤ç­–ç•¥ï¼Œå¯çœç•¥
  serial: 2         # æ¯æ‰¹å¤„ç†2å°ä¸»æœº
  tasks:
    - name: æ›´æ–°ç³»ç»ŸåŒ…
      yum:
        name: '*'
        state: latest
```

**ğŸ¯ Serialå‚æ•°æ§åˆ¶**
```yaml
# æŒ‰å›ºå®šæ•°é‡åˆ†æ‰¹
serial: 3

# æŒ‰ç™¾åˆ†æ¯”åˆ†æ‰¹
serial: "30%"

# é€æ­¥å¢åŠ æ‰¹æ¬¡å¤§å°
serial:
  - 1      # ç¬¬ä¸€æ‰¹ï¼š1å°
  - 5      # ç¬¬äºŒæ‰¹ï¼š5å°  
  - "10%"  # ç¬¬ä¸‰æ‰¹ï¼šå‰©ä½™çš„10%
```

### 4.3 Freeç­–ç•¥


**ğŸ”¸ Freeç­–ç•¥ç‰¹ç‚¹**
```
ä¸»æœºA: ä»»åŠ¡1 â€”â€”â€” ä»»åŠ¡2 â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ä»»åŠ¡3
ä¸»æœºB: ä»»åŠ¡1 â€”â€”â€”â€”â€”â€”â€” ä»»åŠ¡2 â€”â€”â€” ä»»åŠ¡3
ä¸»æœºC: ä»»åŠ¡1 â€”â€”â€” ä»»åŠ¡2 â€”â€”â€” ä»»åŠ¡3 â€”â€”â€”â€” å®Œæˆ
```

**âš¡ Freeç­–ç•¥é€‚ç”¨åœºæ™¯**
```yaml
---
- hosts: webservers
  strategy: free
  tasks:
    - name: ä¸‹è½½å¤§æ–‡ä»¶ï¼ˆå„ä¸»æœºæ€§èƒ½ä¸åŒï¼‰
      get_url:
        url: http://example.com/bigfile.tar.gz
        dest: /tmp/
        
    - name: è§£å‹æ–‡ä»¶
      unarchive:
        src: /tmp/bigfile.tar.gz
        dest: /opt/
        remote_src: yes
```

**âš ï¸ Freeç­–ç•¥æ³¨æ„äº‹é¡¹**
- ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»å¯èƒ½è¢«æ‰“ç ´
- éš¾ä»¥æ§åˆ¶æ‰§è¡Œé¡ºåº
- é€‚åˆç‹¬ç«‹æ€§å¼ºçš„ä»»åŠ¡

### 4.4 Debugç­–ç•¥


**ğŸ” äº¤äº’å¼è°ƒè¯•**
```yaml
---
- hosts: testhost
  strategy: debug
  tasks:
    - name: æµ‹è¯•ä»»åŠ¡
      shell: echo "è°ƒè¯•ä¸­..."
```

**é”®ç›˜äº¤äº’å‘½ä»¤**
```
(Pdb) p task_vars['inventory_hostname']  # æŸ¥çœ‹å˜é‡
(Pdb) p result                          # æŸ¥çœ‹ç»“æœ
(Pdb) c                                 # ç»§ç»­æ‰§è¡Œ
(Pdb) q                                 # é€€å‡ºè°ƒè¯•
```

---

## 5. ğŸ”— Connectionæ’ä»¶é…ç½®


### 5.1 Connectionæ’ä»¶åŸºç¡€


**ğŸ”¸ ä»€ä¹ˆæ˜¯Connectionæ’ä»¶**
Connectionæ’ä»¶å†³å®šAnsibleå¦‚ä½•è¿æ¥åˆ°ç›®æ ‡ä¸»æœºã€‚å°±åƒä¸åŒçš„"äº¤é€šå·¥å…·"ï¼ŒSSHæ˜¯æœ€å¸¸ç”¨çš„"æ±½è½¦"ï¼Œè¿˜æœ‰æœ¬åœ°è¿æ¥çš„"æ­¥è¡Œ"ï¼ŒDockerè¿æ¥çš„"é£æœº"ç­‰ã€‚

**ğŸš— å¸¸è§è¿æ¥æ–¹å¼å¯¹æ¯”**

| è¿æ¥ç±»å‹ | ä½¿ç”¨åœºæ™¯ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|----------|----------|------|------|
| `ssh` | è¿œç¨‹LinuxæœåŠ¡å™¨ | å®‰å…¨ã€é€šç”¨ | éœ€è¦ç½‘ç»œè¿æ¥ |
| `local` | æœ¬æœºæ‰§è¡Œ | é€Ÿåº¦å¿« | ä»…é™æœ¬æœº |
| `docker` | Dockerå®¹å™¨ | å®¹å™¨åŒ–ç¯å¢ƒ | éœ€è¦Docker |
| `winrm` | WindowsæœåŠ¡å™¨ | WindowsåŸç”Ÿ | é…ç½®å¤æ‚ |

### 5.2 SSHè¿æ¥ä¼˜åŒ–é…ç½®


**ğŸ”§ SSHè¿æ¥å‚æ•°è°ƒä¼˜**
```ini
# ansible.cfg
[defaults]
host_key_checking = False
timeout = 30
ssh_args = -C -o ControlMaster=auto -o ControlPersist=300s

[ssh_connection]
ssh_args = -o ForwardAgent=yes -o ControlMaster=auto -o ControlPersist=300s
control_path_dir = /tmp/.ansible-cp
control_path = %(directory)s/ansible-ssh-%%h-%%p-%%r
pipelining = True
```

**ğŸ¯ é‡è¦å‚æ•°è¯´æ˜**
- `ControlMaster=auto`ï¼šSSHè¿æ¥å¤ç”¨ï¼Œæé«˜é€Ÿåº¦
- `ControlPersist=300s`ï¼šè¿æ¥ä¿æŒ300ç§’
- `pipelining = True`ï¼šç®¡é“æ¨¡å¼ï¼Œå‡å°‘SSHè¿æ¥æ¬¡æ•°
- `ForwardAgent=yes`ï¼šè½¬å‘SSHè®¤è¯ä»£ç†

### 5.3 ç‰¹æ®Šè¿æ¥é…ç½®


**ğŸ³ Dockerè¿æ¥æ’ä»¶**
```yaml
# inventory
[containers]
web_container ansible_connection=docker
db_container ansible_connection=docker

# playbook
- hosts: containers
  tasks:
    - name: åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤
      shell: ps aux
```

**ğŸ–¥ï¸ Windowsè¿æ¥é…ç½®**
```yaml
# inventory
[windows]
win1 ansible_host=192.168.1.100 ansible_connection=winrm
win2 ansible_host=192.168.1.101 ansible_connection=winrm

[windows:vars]
ansible_user=administrator
ansible_password=secret
ansible_winrm_transport=basic
ansible_winrm_server_cert_validation=ignore
```

### 5.4 è¿æ¥æ•…éšœæ’æŸ¥


**ğŸ” è¿æ¥æµ‹è¯•å‘½ä»¤**
```bash
# æµ‹è¯•SSHè¿æ¥
ansible all -m ping

# è¯¦ç»†è¿æ¥ä¿¡æ¯
ansible all -m ping -vvv

# æµ‹è¯•ç‰¹å®šè¿æ¥æ–¹å¼
ansible localhost -c local -m ping
```

**âš ï¸ å¸¸è§è¿æ¥é—®é¢˜**
```bash
# SSHå¯†é’¥é—®é¢˜
ssh-copy-id user@hostname

# æƒé™é—®é¢˜  
chmod 600 ~/.ssh/id_rsa

# é˜²ç«å¢™é—®é¢˜
sudo ufw allow ssh
```

---

## 6. âš¡ æ€§èƒ½è°ƒä¼˜å‚æ•°


### 6.1 å¹¶å‘æ§åˆ¶å‚æ•°


**ğŸ”¸ æ ¸å¿ƒæ€§èƒ½å‚æ•°**
```ini
# ansible.cfg
[defaults]
forks = 50              # å¹¶å‘è¿›ç¨‹æ•°
gathering = smart       # æ™ºèƒ½factæ”¶é›†
fact_caching = memory   # factç¼“å­˜æ–¹å¼
host_key_checking = False

[ssh_connection]
pipelining = True       # SSHç®¡é“æ¨¡å¼
control_path_dir = /dev/shm/.ansible-cp  # ä½¿ç”¨å†…å­˜ä½œä¸ºæ§åˆ¶è·¯å¾„
```

**ğŸ“Š å‚æ•°å½±å“å¯¹æ¯”**

| å‚æ•° | é»˜è®¤å€¼ | æ¨èå€¼ | å½±å“ |
|------|--------|--------|------|
| `forks` | 5 | 20-50 | åŒæ—¶å¤„ç†çš„ä¸»æœºæ•° |
| `gathering` | implicit | smart | factæ”¶é›†ç­–ç•¥ |
| `timeout` | 10 | 30 | SSHè¿æ¥è¶…æ—¶ |
| `pipelining` | False | True | å‡å°‘SSHè¿æ¥ |

### 6.2 Factæ”¶é›†ä¼˜åŒ–


**ğŸ” Factæ”¶é›†ç­–ç•¥**
```yaml
# ç¦ç”¨factæ”¶é›†ï¼ˆæœ€å¿«ï¼‰
- hosts: webservers
  gather_facts: no
  tasks: ...

# æ™ºèƒ½factæ”¶é›†ï¼ˆæ¨èï¼‰
- hosts: webservers  
  gather_facts: smart
  tasks: ...

# è‡ªå®šä¹‰factæ”¶é›†
- hosts: webservers
  gather_facts: no
  tasks:
    - setup:
        filter: ansible_os_family
      when: ansible_os_family is undefined
```

**ğŸ’¾ Factç¼“å­˜é…ç½®**
```ini
# ansible.cfg
[defaults]
gathering = smart
fact_caching = redis
fact_caching_connection = localhost:6379:0
fact_caching_timeout = 3600
```

### 6.3 ä»»åŠ¡æ‰§è¡Œä¼˜åŒ–


**ğŸš€ æ‰¹é‡æ“ä½œä¼˜åŒ–**
```yaml
# ä½æ•ˆå†™æ³•
- name: å®‰è£…å¤šä¸ªåŒ…ï¼ˆæ…¢ï¼‰
  yum:
    name: "{{ item }}"
    state: present
  loop:
    - git
    - vim
    - curl
    - wget

# é«˜æ•ˆå†™æ³•
- name: æ‰¹é‡å®‰è£…åŒ…ï¼ˆå¿«ï¼‰
  yum:
    name:
      - git
      - vim  
      - curl
      - wget
    state: present
```

**â° æ¡ä»¶åˆ¤æ–­ä¼˜åŒ–**
```yaml
# æå‰ç»“æŸä¸å¿…è¦çš„ä»»åŠ¡
- name: æ£€æŸ¥æœåŠ¡çŠ¶æ€
  service_facts:

- name: åªåœ¨æœåŠ¡æœªè¿è¡Œæ—¶å¯åŠ¨
  systemd:
    name: nginx
    state: started
  when: ansible_facts.services['nginx.service'].state != 'running'
```

### 6.4 å†…å­˜å’Œç£ç›˜ä¼˜åŒ–


**ğŸ’» ç³»ç»Ÿèµ„æºé…ç½®**
```ini
# ansible.cfg
[defaults]
# å‡å°‘å†…å­˜ä½¿ç”¨
stdout_callback = minimal
display_skipped_hosts = False
display_ok_hosts = False

# ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼ˆä½¿ç”¨å†…å­˜ç›˜ï¼‰
remote_tmp = /dev/shm/.ansible/tmp
local_tmp = /dev/shm/.ansible/tmp
```

**ğŸ“ˆ æ€§èƒ½ç›‘æ§å‘½ä»¤**
```bash
# ç›‘æ§Ansibleæ‰§è¡Œè¿‡ç¨‹
time ansible-playbook -i hosts site.yml

# å¯ç”¨æ€§èƒ½å›è°ƒæ’ä»¶
ANSIBLE_CALLBACK_WHITELIST=profile_tasks ansible-playbook site.yml

# å†…å­˜ä½¿ç”¨ç›‘æ§
watch -n 1 'ps aux | grep ansible'
```

---

## 7. ğŸš¦ å¹¶å‘æ§åˆ¶ä¸é™æµ


### 7.1 å¹¶å‘çº§åˆ«æ§åˆ¶


**ğŸ”¸ å¤šå±‚çº§å¹¶å‘æ§åˆ¶**
```
å…¨å±€å¹¶å‘ (forks)
    â†“
å‰§æœ¬å¹¶å‘ (serial)  
    â†“
ä»»åŠ¡å¹¶å‘ (throttle)
```

**âš–ï¸ å¹¶å‘å‚æ•°è¯¦è§£**
```yaml
---
- hosts: webservers
  serial: "25%"        # æ¯æ‰¹å¤„ç†25%çš„ä¸»æœº
  max_fail_percentage: 10  # å…è®¸10%å¤±è´¥ç‡
  tasks:
    - name: CPUå¯†é›†å‹ä»»åŠ¡
      shell: /opt/cpu_intensive_task.sh
      throttle: 5      # åŒæ—¶åªå…è®¸5å°ä¸»æœºæ‰§è¡Œ
```

### 7.2 èµ„æºé™åˆ¶ç­–ç•¥


**ğŸ¯ åŸºäºèµ„æºçš„é™æµ**
```yaml
# é™åˆ¶ç½‘ç»œå¸¦å®½ä½¿ç”¨
- name: å¤§æ–‡ä»¶ä¸‹è½½
  get_url:
    url: http://example.com/bigfile.iso
    dest: /tmp/
  throttle: 2  # åŒæ—¶åªæœ‰2å°ä¸»æœºä¸‹è½½

# é™åˆ¶æ•°æ®åº“è¿æ¥æ•°
- name: æ•°æ®åº“æ“ä½œ
  mysql_query:
    query: "SELECT * FROM large_table"
  throttle: 1  # ä¸€å°ä¸€å°æ‰§è¡Œï¼Œé¿å…æ•°æ®åº“è¿‡è½½
```

**ğŸ”„ åŠ¨æ€è°ƒæ•´ç­–ç•¥**
```yaml
- name: æ ¹æ®ç³»ç»Ÿè´Ÿè½½è°ƒæ•´å¹¶å‘
  shell: uptime | awk '{print $NF}' | cut -d',' -f1
  register: load_avg
  
- name: CPUå¯†é›†ä»»åŠ¡
  shell: /opt/process_data.sh
  throttle: "{{ 10 if load_avg.stdout|float < 2.0 else 3 }}"
```

### 7.3 å¤±è´¥å¤„ç†ç­–ç•¥


**ğŸ›¡ï¸ å®¹é”™é…ç½®**
```yaml
---
- hosts: webservers
  serial: 5
  max_fail_percentage: 20  # å…è®¸20%å¤±è´¥
  any_errors_fatal: false  # ä¸è¦å› ä¸ºé”™è¯¯åœæ­¢æ•´ä¸ªå‰§æœ¬
  
  tasks:
    - name: é£é™©æ“ä½œ
      shell: /opt/risky_operation.sh
      ignore_errors: yes    # å¿½ç•¥é”™è¯¯ç»§ç»­æ‰§è¡Œ
      
    - name: é‡è¦æ“ä½œ
      shell: /opt/critical_operation.sh  
      any_errors_fatal: true  # è¿™ä¸ªä»»åŠ¡å¤±è´¥å°±åœæ­¢æ‰€æœ‰
```

**ğŸ“Š å¤±è´¥ç»Ÿè®¡å’Œå¤„ç†**
```yaml
- name: æ”¶é›†æ‰§è¡Œç»“æœ
  shell: echo "success"
  register: task_result
  ignore_errors: yes
  
- name: ç»Ÿè®¡æˆåŠŸç‡
  debug:
    msg: "æˆåŠŸä¸»æœº: {{ ansible_play_hosts_all | length - ansible_play_hosts | length }}/{{ ansible_play_hosts_all | length }}"
  run_once: true
```

---

## 8. ğŸ¢ ä¼ä¸šçº§éƒ¨ç½²æ¶æ„


### 8.1 åˆ†å±‚æ¶æ„è®¾è®¡


**ğŸ—ï¸ ä¼ä¸šçº§æ¶æ„å›¾ç¤º**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç®¡ç†å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ AWX/AAP â”‚ â”‚ Jenkins â”‚ â”‚  GitLab â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ§åˆ¶å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Ansibleæ§åˆ¶èŠ‚ç‚¹  â”‚ â”‚   Ansibleæ§åˆ¶èŠ‚ç‚¹  â”‚ â”‚
â”‚  â”‚   (Primary)    â”‚ â”‚   (Standby)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ‰§è¡Œå±‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ ç”Ÿäº§ç¯å¢ƒ â”‚ â”‚ æµ‹è¯•ç¯å¢ƒ â”‚ â”‚ å¼€å‘ç¯å¢ƒ â”‚        â”‚
â”‚ â”‚ 1000+å°â”‚ â”‚  100+å°â”‚ â”‚  20+å° â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 é«˜å¯ç”¨é…ç½®


**ğŸ”„ æ§åˆ¶èŠ‚ç‚¹é«˜å¯ç”¨**
```bash
# ä¸»æ§åˆ¶èŠ‚ç‚¹é…ç½®
# /etc/ansible/ansible.cfg
[defaults]
inventory = /etc/ansible/inventory/
roles_path = /etc/ansible/roles/
collections_paths = /etc/ansible/collections/
vault_password_file = /etc/ansible/.vault_pass

# å…±äº«å­˜å‚¨é…ç½®
mount -t nfs nfs-server:/ansible/shared /etc/ansible
```

**âš¡ è´Ÿè½½å‡è¡¡é…ç½®**
```nginx
# nginx.conf
upstream ansible_controllers {
    server ansible1.company.com:443 max_fails=2 fail_timeout=30s;
    server ansible2.company.com:443 max_fails=2 fail_timeout=30s;
}

server {
    listen 443 ssl;
    server_name ansible.company.com;
    
    location / {
        proxy_pass https://ansible_controllers;
    }
}
```

### 8.3 æƒé™ç®¡ç†ä½“ç³»


**ğŸ‘¥ RBACæƒé™æ¨¡å‹**
```yaml
# è§’è‰²å®šä¹‰
roles:
  - name: ansible_admin
    permissions:
      - all_playbooks
      - all_inventories
      - vault_access
      
  - name: dev_team
    permissions:
      - dev_playbooks
      - dev_inventory
      - limited_vault
      
  - name: ops_readonly
    permissions:
      - view_logs
      - run_reports
```

**ğŸ” å¯†é’¥ç®¡ç†ç­–ç•¥**
```bash
# åˆ†ç¯å¢ƒå¯†é’¥ç®¡ç†
/etc/ansible/
â”œâ”€â”€ vault/
â”‚   â”œâ”€â”€ prod.vault      # ç”Ÿäº§ç¯å¢ƒå¯†é’¥
â”‚   â”œâ”€â”€ staging.vault   # é¢„ç”Ÿäº§ç¯å¢ƒ
â”‚   â””â”€â”€ dev.vault       # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ keys/
â”‚   â”œâ”€â”€ prod_id_rsa     # ç”Ÿäº§ç¯å¢ƒSSHå¯†é’¥
â”‚   â”œâ”€â”€ staging_id_rsa  # é¢„ç”Ÿäº§ç¯å¢ƒ
â”‚   â””â”€â”€ dev_id_rsa      # å¼€å‘ç¯å¢ƒ
â””â”€â”€ inventory/
    â”œâ”€â”€ prod/
    â”œâ”€â”€ staging/
    â””â”€â”€ dev/
```

### 8.4 ç›‘æ§å’Œå®¡è®¡


**ğŸ“Š æ‰§è¡Œç›‘æ§é…ç½®**
```yaml
# callback_plugins/enterprise_audit.py
class CallbackModule(CallbackBase):
    def __init__(self):
        super(CallbackModule, self).__init__()
        self.logger = logging.getLogger('ansible.audit')
        
    def v2_playbook_on_start(self, playbook):
        self.logger.info({
            'event': 'playbook_start',
            'user': os.getenv('USER'),
            'playbook': playbook._file_name,
            'timestamp': datetime.now().isoformat()
        })
```

**ğŸ“ˆ æ€§èƒ½ç›‘æ§æŒ‡æ ‡**
```bash
# ç›‘æ§è„šæœ¬ç¤ºä¾‹
#!/bin/bash
# æ”¶é›†Ansibleæ‰§è¡ŒæŒ‡æ ‡
echo "timestamp,playbook,duration,hosts,tasks,success_rate" > /var/log/ansible-metrics.csv

# åœ¨playbookæ‰§è¡Œåè®°å½•æŒ‡æ ‡
echo "$(date -u +%s),$1,$2,$3,$4,$5" >> /var/log/ansible-metrics.csv
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ VaultåŠ å¯†ï¼šä¿æŠ¤æ•æ„Ÿæ•°æ®ï¼Œæ”¯æŒå¤šç¯å¢ƒå¯†é’¥ç®¡ç†
ğŸ”¸ å¼‚æ­¥ä»»åŠ¡ï¼šå¤„ç†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæé«˜æ‰§è¡Œæ•ˆç‡  
ğŸ”¸ Callbackæ’ä»¶ï¼šè‡ªå®šä¹‰è¾“å‡ºæ ¼å¼ï¼Œå®ç°ç›‘æ§é€šçŸ¥
ğŸ”¸ Strategyæ’ä»¶ï¼šæ§åˆ¶ä»»åŠ¡æ‰§è¡Œç­–ç•¥å’Œé¡ºåº
ğŸ”¸ Connectionæ’ä»¶ï¼šä¼˜åŒ–ä¸»æœºè¿æ¥æ–¹å¼å’Œæ€§èƒ½
ğŸ”¸ æ€§èƒ½è°ƒä¼˜ï¼šé€šè¿‡å‚æ•°é…ç½®æå‡æ‰§è¡Œé€Ÿåº¦
ğŸ”¸ å¹¶å‘æ§åˆ¶ï¼šå¹³è¡¡æ‰§è¡Œé€Ÿåº¦å’Œç³»ç»Ÿç¨³å®šæ€§
ğŸ”¸ ä¼ä¸šæ¶æ„ï¼šæ„å»ºå¯æ‰©å±•çš„è‡ªåŠ¨åŒ–è¿ç»´ä½“ç³»
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å®‰å…¨æ€§ä¼˜å…ˆåŸåˆ™**
```
å¯†é’¥ç®¡ç†ï¼š
â€¢ æ•æ„Ÿæ•°æ®å¿…é¡»ä½¿ç”¨VaultåŠ å¯†
â€¢ ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„åŠ å¯†å¯†é’¥
â€¢ å¯†ç æ–‡ä»¶æƒé™è®¾ç½®ä¸º600
â€¢ å®šæœŸè½®æ¢å¯†é’¥å’Œå¯†ç 
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
```
æ‰§è¡Œæ•ˆç‡ï¼š
â€¢ åˆç†è®¾ç½®å¹¶å‘å‚æ•°(forks, serial, throttle)
â€¢ å¯ç”¨SSHç®¡é“å’Œè¿æ¥å¤ç”¨
â€¢ æ™ºèƒ½æ”¶é›†factsï¼Œé¿å…ä¸å¿…è¦çš„æ”¶é›†
â€¢ ä½¿ç”¨æ‰¹é‡æ“ä½œä»£æ›¿å¾ªç¯æ“ä½œ
```

**ğŸ”¹ ä¼ä¸šçº§è€ƒè™‘å› ç´ **
```
æ¶æ„è®¾è®¡ï¼š
â€¢ é«˜å¯ç”¨ï¼šå¤šæ§åˆ¶èŠ‚ç‚¹ + å…±äº«å­˜å‚¨
â€¢ æƒé™æ§åˆ¶ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
â€¢ å®¡è®¡ç›‘æ§ï¼šå®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•
â€¢ æ ‡å‡†åŒ–ï¼šç»Ÿä¸€çš„ç›®å½•ç»“æ„å’Œå‘½åè§„èŒƒ
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **å¤§è§„æ¨¡éƒ¨ç½²**ï¼šä½¿ç”¨å¼‚æ­¥ä»»åŠ¡å’Œå¹¶å‘æ§åˆ¶æå‡éƒ¨ç½²é€Ÿåº¦
- **å®‰å…¨åˆè§„**ï¼šé€šè¿‡Vaultå’Œæƒé™ç®¡ç†æ»¡è¶³ä¼ä¸šå®‰å…¨è¦æ±‚  
- **è¿ç»´ç›‘æ§**ï¼šåˆ©ç”¨Callbackæ’ä»¶å®ç°è‡ªåŠ¨åŒ–ç›‘æ§é€šçŸ¥
- **æ•…éšœå¤„ç†**ï¼šä½¿ç”¨Strategyæ’ä»¶å®ç°çµæ´»çš„æ•…éšœå¤„ç†ç­–ç•¥

**ğŸ”§ è¿ç»´å®è·µ**
- **æ ‡å‡†åŒ–æµç¨‹**ï¼šå»ºç«‹ç»Ÿä¸€çš„Playbookå¼€å‘å’Œéƒ¨ç½²è§„èŒƒ
- **æŒç»­æ”¹è¿›**ï¼šé€šè¿‡æ€§èƒ½ç›‘æ§æ•°æ®æŒç»­ä¼˜åŒ–é…ç½®å‚æ•°
- **å›¢é˜Ÿåä½œ**ï¼šä½¿ç”¨Git + AWXå®ç°ä»£ç åŒ–çš„åä½œæ¨¡å¼
- **åº”æ€¥å“åº”**ï¼šå»ºç«‹åŸºäºAnsibleçš„å¿«é€Ÿåº”æ€¥å“åº”æœºåˆ¶

**æ ¸å¿ƒè®°å¿†**ï¼š
- Ansibleé«˜çº§ç‰¹æ€§ä»¥å®‰å…¨æ€§å’Œæ€§èƒ½ä¸ºæ ¸å¿ƒ
- ä¼ä¸šçº§åº”ç”¨éœ€è¦è€ƒè™‘é«˜å¯ç”¨ã€æƒé™æ§åˆ¶å’Œå®¡è®¡ç›‘æ§
- åˆç†çš„å‚æ•°é…ç½®å’Œæ¶æ„è®¾è®¡æ˜¯æˆåŠŸçš„å…³é”®
- æŒç»­ç›‘æ§å’Œä¼˜åŒ–æ˜¯ä¿æŒç³»ç»Ÿå¥åº·çš„å¿…è¦æ‰‹æ®µ