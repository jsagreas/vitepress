---
title: 9ã€ç›‘æ§æŒ‡æ ‡ä¸æ•°æ®é‡‡é›†
---
## ğŸ“š ç›®å½•

1. [ç›‘æ§æŒ‡æ ‡åŸºç¡€æ¦‚å¿µ](#1-ç›‘æ§æŒ‡æ ‡åŸºç¡€æ¦‚å¿µ)
2. [ç³»ç»ŸæŒ‡æ ‡é‡‡é›†è„šæœ¬](#2-ç³»ç»ŸæŒ‡æ ‡é‡‡é›†è„šæœ¬)
3. [ä¸šåŠ¡æŒ‡æ ‡å®šä¹‰ä¸æ”¶é›†](#3-ä¸šåŠ¡æŒ‡æ ‡å®šä¹‰ä¸æ”¶é›†)
4. [æ—¶åºæ•°æ®å­˜å‚¨æ ¼å¼](#4-æ—¶åºæ•°æ®å­˜å‚¨æ ¼å¼)
5. [æŒ‡æ ‡æ ‡ç­¾åŒ–ç®¡ç†](#5-æŒ‡æ ‡æ ‡ç­¾åŒ–ç®¡ç†)
6. [æ•°æ®é‡‡é›†ä¼˜åŒ–ç­–ç•¥](#6-æ•°æ®é‡‡é›†ä¼˜åŒ–ç­–ç•¥)
7. [æ•°æ®éªŒè¯ä¸è´¨é‡æ§åˆ¶](#7-æ•°æ®éªŒè¯ä¸è´¨é‡æ§åˆ¶)
8. [æŒ‡æ ‡æ¸…ç†ä¸å½’æ¡£ç®¡ç†](#8-æŒ‡æ ‡æ¸…ç†ä¸å½’æ¡£ç®¡ç†)
9. [æ•°æ®å¯¼å‡ºæ¥å£è®¾è®¡](#9-æ•°æ®å¯¼å‡ºæ¥å£è®¾è®¡)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“Š ç›‘æ§æŒ‡æ ‡åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç›‘æ§æŒ‡æ ‡

**ç›‘æ§æŒ‡æ ‡**å°±åƒåŒ»ç”Ÿç»™ç—…äººåšä½“æ£€æ—¶çš„å„ç§æ£€æŸ¥æ•°æ® - ä½“æ¸©ã€è¡€å‹ã€å¿ƒç‡ç­‰ï¼Œå®ƒä»¬èƒ½åæ˜ ç³»ç»Ÿçš„"å¥åº·çŠ¶å†µ"ã€‚

> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> ç›‘æ§æŒ‡æ ‡æ˜¯ç”¨æ•°å­—æ¥è¡¨ç¤ºç³»ç»ŸçŠ¶æ€çš„æ ‡å‡†åŒ–æ•°æ®ï¼Œé€šè¿‡è¿™äº›æ•°å­—æˆ‘ä»¬èƒ½åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦æ­£å¸¸è¿è¡Œ

```
ç°å®ç”Ÿæ´»ç±»æ¯”ï¼š
åŒ»ç”Ÿä½“æ£€ â†’ ç³»ç»Ÿç›‘æ§
ä½“æ¸©38Â°C â†’ CPUä½¿ç”¨ç‡85%
è¡€å‹åé«˜ â†’ å†…å­˜ä½¿ç”¨ç‡90%
å¿ƒç‡è¿‡å¿« â†’ ç£ç›˜IOç¹å¿™
```

### 1.2 ç›‘æ§æŒ‡æ ‡çš„åˆ†ç±»


**æŒ‰æ•°æ®ç±»å‹åˆ†ç±»ï¼š**
```
æ•°å€¼å‹æŒ‡æ ‡ï¼šCPUä½¿ç”¨ç‡ 75.5%
çŠ¶æ€å‹æŒ‡æ ‡ï¼šæœåŠ¡çŠ¶æ€ running/stopped
è®¡æ•°å‹æŒ‡æ ‡ï¼šè¯·æ±‚æ¬¡æ•° 1,024æ¬¡
å¸ƒå°”å‹æŒ‡æ ‡ï¼šç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ true/false
```

**æŒ‰ä¸šåŠ¡å±‚é¢åˆ†ç±»ï¼š**

| ğŸ·ï¸ **æŒ‡æ ‡ç±»å‹** | **å«ä¹‰è¯´æ˜** | **å…¸å‹ä¾‹å­** | **å…³æ³¨é‡ç‚¹** |
|---------------|------------|-------------|------------|
| ğŸ–¥ï¸ **ç³»ç»ŸæŒ‡æ ‡** | æœåŠ¡å™¨ç¡¬ä»¶èµ„æºä½¿ç”¨æƒ…å†µ | CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ | èµ„æºåˆ©ç”¨ç‡ |
| ğŸ”§ **åº”ç”¨æŒ‡æ ‡** | åº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶æ€æ•°æ® | å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€ååé‡ | æ€§èƒ½è¡¨ç° |
| ğŸ’¼ **ä¸šåŠ¡æŒ‡æ ‡** | ä¸ä¸šåŠ¡ä»·å€¼ç›¸å…³çš„æ•°æ® | è®¢å•é‡ã€ç”¨æˆ·æ´»è·ƒåº¦ã€æ”¶å…¥ | ä¸šåŠ¡å¥åº·åº¦ |

### 1.3 æŒ‡æ ‡çš„é‡è¦æ€§


> ğŸ’¡ **å®ç”¨ä»·å€¼**  
> ç›‘æ§æŒ‡æ ‡å°±åƒæ±½è½¦ä»ªè¡¨ç›˜ï¼Œæ²¡æœ‰å®ƒä»¬æˆ‘ä»¬å°±æ˜¯"ç›²å¼€"ï¼Œæœ‰äº†å®ƒä»¬æ‰èƒ½åŠæ—¶å‘ç°é—®é¢˜ã€é¢„é˜²æ•…éšœ

**ç›‘æ§æŒ‡æ ‡çš„ä¸‰å¤§ä½œç”¨ï¼š**
- **åŠæ—¶å‘ç°é—®é¢˜**ï¼šCPUçªç„¶é£™å‡åˆ°95%ï¼Œè¯´æ˜å¯èƒ½æœ‰å¼‚å¸¸
- **é¢„æµ‹æ½œåœ¨é£é™©**ï¼šç£ç›˜ä½¿ç”¨ç‡æŒç»­å¢é•¿ï¼Œé¢„è®¡3å¤©åæ»¡ç›˜
- **ä¼˜åŒ–æ€§èƒ½è¡¨ç°**ï¼šé€šè¿‡æ•°æ®åˆ†ææ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆ

---

## 2. ğŸ”§ ç³»ç»ŸæŒ‡æ ‡é‡‡é›†è„šæœ¬


### 2.1 CPUæŒ‡æ ‡é‡‡é›†


> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> CPUæŒ‡æ ‡åæ˜ å¤„ç†å™¨çš„å·¥ä½œè´Ÿè½½ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ€ä½¿ç”¨ç‡ã€ç³»ç»Ÿæ€ä½¿ç”¨ç‡ã€ç©ºé—²ç‡ç­‰

**CPUæŒ‡æ ‡é‡‡é›†è„šæœ¬ï¼š**
```bash
#!/bin/bash
# cpu_monitor.sh - CPUæŒ‡æ ‡é‡‡é›†è„šæœ¬

get_cpu_usage() {
    # è¯»å–/proc/statè·å–CPUä½¿ç”¨æƒ…å†µ
    local cpu_info=$(cat /proc/stat | head -n 1)
    local cpu_times=($cpu_info)
    
    # è®¡ç®—å„é¡¹æ—¶é—´
    local user=${cpu_times[1]}      # ç”¨æˆ·æ€æ—¶é—´
    local system=${cpu_times[3]}    # ç³»ç»Ÿæ€æ—¶é—´  
    local idle=${cpu_times[4]}      # ç©ºé—²æ—¶é—´
    local total=$((user + system + idle))
    
    # è®¡ç®—ä½¿ç”¨ç‡ç™¾åˆ†æ¯”
    local usage=$(( (total - idle) * 100 / total ))
    
    echo "timestamp:$(date +%s),cpu_usage:${usage}%"
}

# æ¯5ç§’é‡‡é›†ä¸€æ¬¡
while true; do
    get_cpu_usage
    sleep 5
done
```

> âš ï¸ **æ³¨æ„äº‹é¡¹**  
> `/proc/stat`æ–‡ä»¶ä¸­çš„æ•°æ®æ˜¯ç´¯ç§¯å€¼ï¼Œéœ€è¦è®¡ç®—ä¸¤æ¬¡é‡‡é›†é—´çš„å·®å€¼æ‰èƒ½å¾—åˆ°å‡†ç¡®çš„ä½¿ç”¨ç‡

### 2.2 å†…å­˜æŒ‡æ ‡é‡‡é›†


**å†…å­˜ä½¿ç”¨æƒ…å†µåˆ†æï¼š**
```
Linuxå†…å­˜æ„æˆè§£é‡Šï¼š
æ€»å†…å­˜ = å·²ä½¿ç”¨ + å¯ç”¨å†…å­˜
å¯ç”¨å†…å­˜ = ç©ºé—²å†…å­˜ + ç¼“å­˜ + ç¼“å†²åŒº

ä¸ºä»€ä¹ˆçœ‹èµ·æ¥å†…å­˜å¿«æ»¡äº†ä½†ç³»ç»Ÿæ­£å¸¸ï¼Ÿ
â†’ Linuxä¼šæŠŠç©ºé—²å†…å­˜ç”¨ä½œæ–‡ä»¶ç¼“å­˜ï¼Œéœ€è¦æ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾
```

**å†…å­˜æŒ‡æ ‡é‡‡é›†è„šæœ¬ï¼š**
```bash
#!/bin/bash
# memory_monitor.sh - å†…å­˜æŒ‡æ ‡é‡‡é›†

get_memory_info() {
    # ä»/proc/meminfoè¯»å–å†…å­˜ä¿¡æ¯
    local mem_total=$(grep MemTotal /proc/meminfo | awk '{print $2}')
    local mem_free=$(grep MemFree /proc/meminfo | awk '{print $2}')
    local mem_available=$(grep MemAvailable /proc/meminfo | awk '{print $2}')
    
    # è®¡ç®—ä½¿ç”¨ç‡ï¼ˆKBè½¬MBï¼‰
    local total_mb=$((mem_total / 1024))
    local available_mb=$((mem_available / 1024))
    local used_mb=$((total_mb - available_mb))
    local usage_percent=$((used_mb * 100 / total_mb))
    
    echo "mem_total:${total_mb}MB,mem_used:${used_mb}MB,mem_usage:${usage_percent}%"
}

get_memory_info
```

### 2.3 ç£ç›˜æŒ‡æ ‡é‡‡é›†


**ç£ç›˜ç›‘æ§çš„å…³é”®æŒ‡æ ‡ï¼š**
- **ç©ºé—´ä½¿ç”¨ç‡**ï¼šé˜²æ­¢ç£ç›˜æ»¡å¯¼è‡´ç³»ç»Ÿå¼‚å¸¸
- **IOè¯»å†™é€Ÿåº¦**ï¼šå‘ç°å­˜å‚¨æ€§èƒ½ç“¶é¢ˆ
- **IOç­‰å¾…æ—¶é—´**ï¼šåˆ¤æ–­ç£ç›˜æ˜¯å¦æˆä¸ºæ€§èƒ½ç“¶é¢ˆ

```bash
#!/bin/bash
# disk_monitor.sh - ç£ç›˜æŒ‡æ ‡é‡‡é›†

get_disk_usage() {
    echo "=== ç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µ ==="
    df -h | grep -E '^/dev/' | while read line; do
        local device=$(echo $line | awk '{print $1}')
        local usage=$(echo $line | awk '{print $5}' | tr -d '%')
        local mount=$(echo $line | awk '{print $6}')
        
        echo "device:${device},mount:${mount},usage:${usage}%"
        
        # ä½¿ç”¨ç‡è¶…è¿‡80%å‘å‡ºè­¦å‘Š
        if [ $usage -gt 80 ]; then
            echo "âš ï¸ WARNING: ${mount} ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜: ${usage}%"
        fi
    done
}

get_disk_usage
```

### 2.4 ç½‘ç»œæŒ‡æ ‡é‡‡é›†


**ç½‘ç»œç›‘æ§é‡ç‚¹æŒ‡æ ‡ï¼š**
```
ç½‘ç»œæµé‡ï¼šè¿›å‡ºå¸¦å®½ä½¿ç”¨æƒ…å†µ
è¿æ¥æ•°é‡ï¼šå½“å‰ç½‘ç»œè¿æ¥ç»Ÿè®¡
é”™è¯¯åŒ…æ•°ï¼šç½‘ç»œè´¨é‡æŒ‡æ ‡
```

```bash
#!/bin/bash  
# network_monitor.sh - ç½‘ç»œæŒ‡æ ‡é‡‡é›†

get_network_stats() {
    local interface="eth0"  # ä¸»ç½‘å¡æ¥å£
    
    # è·å–ç½‘ç»œæ¥å£ç»Ÿè®¡ä¿¡æ¯
    local rx_bytes=$(cat /sys/class/net/$interface/statistics/rx_bytes)
    local tx_bytes=$(cat /sys/class/net/$interface/statistics/tx_bytes)
    
    # è½¬æ¢ä¸ºMB
    local rx_mb=$((rx_bytes / 1024 / 1024))
    local tx_mb=$((tx_bytes / 1024 / 1024))
    
    echo "interface:${interface},rx:${rx_mb}MB,tx:${tx_mb}MB"
    
    # ç»Ÿè®¡ç½‘ç»œè¿æ¥æ•°
    local connections=$(netstat -an | wc -l)
    echo "total_connections:${connections}"
}

get_network_stats
```

---

## 3. ğŸ’¼ ä¸šåŠ¡æŒ‡æ ‡å®šä¹‰ä¸æ”¶é›†


### 3.1 ä¸šåŠ¡æŒ‡æ ‡çš„å®šä¹‰


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> ä¸šåŠ¡æŒ‡æ ‡æ˜¯ç›´æ¥åæ˜ ä¸šåŠ¡ä»·å€¼å’Œç”¨æˆ·ä½“éªŒçš„æ•°æ®ï¼Œæ¯”ç³»ç»ŸæŒ‡æ ‡æ›´èƒ½ä½“ç°æœåŠ¡è´¨é‡

**ä¸šåŠ¡æŒ‡æ ‡ç¤ºä¾‹å¯¹æ¯”ï¼š**
```
ç³»ç»ŸæŒ‡æ ‡ â†’ ä¸šåŠ¡æŒ‡æ ‡çš„æ˜ å°„å…³ç³»ï¼š

CPUä½¿ç”¨ç‡80% â†’ ç½‘é¡µå“åº”æ—¶é—´2ç§’ â†’ ç”¨æˆ·ä½“éªŒå·®
æ•°æ®åº“è¿æ¥æ•°æ»¡ â†’ ç™»å½•å¤±è´¥ç‡30% â†’ ä¸šåŠ¡æŸå¤±
ç½‘ç»œå¸¦å®½ä¸è¶³ â†’ è§†é¢‘å¡é¡¿ç‡25% â†’ ç”¨æˆ·æµå¤±
```

### 3.2 Webåº”ç”¨ä¸šåŠ¡æŒ‡æ ‡é‡‡é›†


**å…³é”®ä¸šåŠ¡æŒ‡æ ‡å®šä¹‰ï¼š**

| ğŸ“ˆ **æŒ‡æ ‡åç§°** | **ä¸šåŠ¡å«ä¹‰** | **é‡‡é›†æ–¹æ³•** | **å‘Šè­¦é˜ˆå€¼** |
|---------------|------------|-------------|-------------|
| ğŸŒ **å“åº”æ—¶é—´** | ç”¨æˆ·è¯·æ±‚å¤„ç†å¿«æ…¢ | æ—¥å¿—åˆ†æ | >3ç§’ |
| âŒ **é”™è¯¯ç‡** | æœåŠ¡ç¨³å®šæ€§æŒ‡æ ‡ | é”™è¯¯æ—¥å¿—ç»Ÿè®¡ | >1% |
| ğŸ‘¥ **å¹¶å‘ç”¨æˆ·æ•°** | æœåŠ¡æ‰¿è½½èƒ½åŠ› | ä¼šè¯ç»Ÿè®¡ | >1000 |
| ğŸ“Š **ååé‡** | å¤„ç†èƒ½åŠ›æŒ‡æ ‡ | è¯·æ±‚è®¡æ•° | <100/ç§’ |

**ä¸šåŠ¡æŒ‡æ ‡é‡‡é›†è„šæœ¬ï¼š**
```bash
#!/bin/bash
# business_metrics.sh - ä¸šåŠ¡æŒ‡æ ‡é‡‡é›†

analyze_web_logs() {
    local log_file="/var/log/nginx/access.log"
    local time_window=300  # 5åˆ†é’Ÿæ—¶é—´çª—å£
    
    echo "=== åˆ†ææœ€è¿‘5åˆ†é’Ÿçš„è®¿é—®æ—¥å¿— ==="
    
    # è®¡ç®—å“åº”æ—¶é—´ç»Ÿè®¡
    local avg_response=$(tail -n 1000 $log_file | \
        awk '{print $NF}' | \
        awk '{sum+=$1; count++} END {print sum/count}')
    
    # è®¡ç®—é”™è¯¯ç‡
    local total_requests=$(tail -n 1000 $log_file | wc -l)
    local error_requests=$(tail -n 1000 $log_file | \
        awk '$9 ~ /^[45]/' | wc -l)
    local error_rate=$(echo "scale=2; $error_requests * 100 / $total_requests" | bc)
    
    echo "avg_response_time:${avg_response}s"
    echo "error_rate:${error_rate}%"
    echo "total_requests:${total_requests}"
}

analyze_web_logs
```

### 3.3 æ•°æ®åº“ä¸šåŠ¡æŒ‡æ ‡


**æ•°æ®åº“å…³é”®ä¸šåŠ¡æŒ‡æ ‡ï¼š**
```
æŸ¥è¯¢å“åº”æ—¶é—´ï¼šSQLæ‰§è¡Œæ•ˆç‡
æ…¢æŸ¥è¯¢æ•°é‡ï¼šæ€§èƒ½ç“¶é¢ˆè¯†åˆ«  
è¿æ¥æ± ä½¿ç”¨ç‡ï¼šèµ„æºåˆ©ç”¨æƒ…å†µ
äº‹åŠ¡æˆåŠŸç‡ï¼šæ•°æ®ä¸€è‡´æ€§ä¿éšœ
```

**MySQLä¸šåŠ¡æŒ‡æ ‡é‡‡é›†ï¼š**
```bash
#!/bin/bash
# mysql_metrics.sh - MySQLä¸šåŠ¡æŒ‡æ ‡é‡‡é›†

get_mysql_metrics() {
    local mysql_cmd="mysql -u monitoring -p'password' -e"
    
    echo "=== MySQLä¸šåŠ¡æŒ‡æ ‡ ==="
    
    # æŸ¥è¯¢å“åº”æ—¶é—´ç»Ÿè®¡
    local slow_queries=$($mysql_cmd "SHOW STATUS LIKE 'Slow_queries';" | tail -1 | awk '{print $2}')
    
    # è¿æ¥æ•°ç»Ÿè®¡
    local connections=$($mysql_cmd "SHOW STATUS LIKE 'Threads_connected';" | tail -1 | awk '{print $2}')
    local max_connections=$($mysql_cmd "SHOW VARIABLES LIKE 'max_connections';" | tail -1 | awk '{print $2}')
    local conn_usage=$(echo "scale=2; $connections * 100 / $max_connections" | bc)
    
    echo "slow_queries:${slow_queries}"
    echo "current_connections:${connections}"
    echo "connection_usage:${conn_usage}%"
    
    # è¿æ¥ä½¿ç”¨ç‡å‘Šè­¦
    if (( $(echo "$conn_usage > 80" | bc -l) )); then
        echo "âš ï¸ æ•°æ®åº“è¿æ¥ä½¿ç”¨ç‡è¿‡é«˜: ${conn_usage}%"
    fi
}

get_mysql_metrics
```

---

## 4. ğŸ—„ï¸ æ—¶åºæ•°æ®å­˜å‚¨æ ¼å¼


### 4.1 æ—¶åºæ•°æ®çš„ç‰¹ç‚¹


> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> æ—¶åºæ•°æ®å°±åƒè®°å½•ä½“æ¸©çš„ä½“æ¸©è¡¨ï¼Œæ¯ä¸ªæ—¶é—´ç‚¹å¯¹åº”ä¸€ä¸ªæ•°å€¼ï¼ŒæŒ‰æ—¶é—´é¡ºåºæ’åˆ—

**æ—¶åºæ•°æ®çš„ç‰¹å¾ï¼š**
```
æ—¶é—´ç»´åº¦ï¼šæ¯æ¡æ•°æ®éƒ½æœ‰æ˜ç¡®çš„æ—¶é—´æˆ³
æ•°æ®è¿ç»­ï¼šæŒ‰æ—¶é—´é¡ºåºäº§ç”Ÿï¼Œå½¢æˆæ•°æ®æµ
é‡å¤§å†™å¤šï¼šç›‘æ§æ•°æ®é‡å¤§ï¼Œå†™å…¥é¢‘ç¹
è¯»å–æ¨¡å¼ï¼šé€šå¸¸æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢
```

### 4.2 å¸¸è§çš„æ—¶åºæ•°æ®å­˜å‚¨æ ¼å¼


**1. ç®€å•æ–‡æœ¬æ ¼å¼ï¼ˆCSVï¼‰ï¼š**
```
# metrics.csv - æœ€ç®€å•çš„å­˜å‚¨æ ¼å¼
timestamp,metric_name,value,tags
1694678400,cpu_usage,75.5,"host=server1,env=prod"
1694678460,cpu_usage,78.2,"host=server1,env=prod"
1694678520,memory_usage,82.1,"host=server1,env=prod"
```

> ğŸ’¡ **é€‚ç”¨åœºæ™¯**  
> CSVæ ¼å¼ç®€å•æ˜“æ‡‚ï¼Œé€‚åˆå°è§„æ¨¡æ•°æ®æˆ–æµ‹è¯•ç¯å¢ƒï¼Œä½†ä¸é€‚åˆå¤§è§„æ¨¡ç”Ÿäº§ç³»ç»Ÿ

**2. InfluxDBè¡Œåè®®æ ¼å¼ï¼š**
```
# InfluxDB Line Protocol - ä¸“ä¸šæ—¶åºæ•°æ®æ ¼å¼
cpu_usage,host=server1,env=production value=75.5 1694678400000000000
memory_usage,host=server1,env=production value=82.1 1694678460000000000

æ ¼å¼è¯´æ˜ï¼š
measurement,tag_key=tag_value field_key=field_value timestamp
    â†“           â†“              â†“               â†“
 æŒ‡æ ‡åç§°    æ ‡ç­¾(ç´¢å¼•)      æ•°å€¼å­—æ®µ        æ—¶é—´æˆ³(çº³ç§’)
```

**3. Prometheusæ ¼å¼ï¼š**
```
# PrometheusæŒ‡æ ‡æ ¼å¼ - æ‹‰å–å¼ç›‘æ§ç³»ç»Ÿå¸¸ç”¨
# HELP cpu_usage CPUä½¿ç”¨ç‡ç™¾åˆ†æ¯”
# TYPE cpu_usage gauge
cpu_usage{instance="server1",env="production"} 75.5 1694678400000

# HELP http_requests_total HTTPè¯·æ±‚æ€»æ•°
# TYPE http_requests_total counter  
http_requests_total{method="GET",status="200"} 1543 1694678400000
```

### 4.3 æ—¶åºæ•°æ®å­˜å‚¨è„šæœ¬å®ç°


**é€šç”¨æ—¶åºæ•°æ®å†™å…¥è„šæœ¬ï¼š**
```bash
#!/bin/bash
# timeseries_writer.sh - æ—¶åºæ•°æ®å†™å…¥è„šæœ¬

METRICS_DIR="/var/lib/monitoring/metrics"
mkdir -p $METRICS_DIR

write_metric() {
    local metric_name=$1
    local value=$2
    local tags=$3
    local timestamp=$(date +%s)
    
    local data_file="$METRICS_DIR/${metric_name}_$(date +%Y%m%d).csv"
    
    # å†™å…¥CSVæ ¼å¼æ•°æ®
    echo "${timestamp},${metric_name},${value},\"${tags}\"" >> $data_file
}

# ä½¿ç”¨ç¤ºä¾‹
write_metric "cpu_usage" "75.5" "host=server1,env=prod"
write_metric "memory_usage" "82.1" "host=server1,env=prod"

echo "âœ… æŒ‡æ ‡æ•°æ®å·²å†™å…¥: $METRICS_DIR"
```

---

## 5. ğŸ·ï¸ æŒ‡æ ‡æ ‡ç­¾åŒ–ç®¡ç†


### 5.1 æ ‡ç­¾çš„æ¦‚å¿µå’Œä½œç”¨


> ğŸ“Œ **é€šä¿—ç†è§£**  
> æ ‡ç­¾å°±åƒç»™æ–‡ä»¶è´´æ ‡ç­¾åˆ†ç±»ä¸€æ ·ï¼Œå¸®æˆ‘ä»¬ç»™ç›‘æ§æ•°æ®åˆ†ç±»ç®¡ç†ï¼Œä¾¿äºæŸ¥æ‰¾å’Œç»Ÿè®¡

```
æ²¡æœ‰æ ‡ç­¾çš„ç›‘æ§æ•°æ®ï¼š
cpu_usage: 75%  â† è¿™æ˜¯å“ªå°æœåŠ¡å™¨çš„ï¼Ÿä»€ä¹ˆç¯å¢ƒçš„ï¼Ÿ

æœ‰æ ‡ç­¾çš„ç›‘æ§æ•°æ®ï¼š  
cpu_usage{host="web1", env="prod", region="us-east"}: 75%
                â†‘       â†‘        â†‘
             æœåŠ¡å™¨   ç¯å¢ƒ    åœ°åŒº
```

### 5.2 æ ‡ç­¾è®¾è®¡æœ€ä½³å®è·µ


**æ ‡ç­¾è®¾è®¡åŸåˆ™ï¼š**

| âœ… **å¥½çš„æ ‡ç­¾è®¾è®¡** | âŒ **ä¸å¥½çš„æ ‡ç­¾è®¾è®¡** | ğŸ’¡ **æ”¹è¿›å»ºè®®** |
|------------------|-------------------|---------------|
| `env=production` | `environment=production-cluster-01` | æ ‡ç­¾å€¼è¦ç®€æ´ |
| `region=us-east` | `datacenter=us-east-1a-zone-a` | é¿å…è¿‡åº¦ç»†åˆ† |
| `service=api` | `service_name_with_version=api-v1.2.3` | ç‰ˆæœ¬å•ç‹¬æ ‡ç­¾ |

**æ ‡ç­¾å±‚æ¬¡ç»“æ„è®¾è®¡ï¼š**
```
æ ‡ç­¾å±‚æ¬¡è®¾è®¡æ€è·¯ï¼š
ç¬¬1å±‚ï¼šç¯å¢ƒéš”ç¦» â†’ env: prod/test/dev
ç¬¬2å±‚ï¼šåœ°ç†ä½ç½® â†’ region: us-east/eu-west  
ç¬¬3å±‚ï¼šæœåŠ¡åˆ†ç±» â†’ service: api/web/db
ç¬¬4å±‚ï¼šå®ä¾‹æ ‡è¯† â†’ instance: server1/server2

å®Œæ•´æ ‡ç­¾ç¤ºä¾‹ï¼š
cpu_usage{env="prod",region="us-east",service="api",instance="api-01"}
```

### 5.3 æ ‡ç­¾ç®¡ç†è„šæœ¬


**æ ‡ç­¾æ ‡å‡†åŒ–è„šæœ¬ï¼š**
```bash
#!/bin/bash
# label_manager.sh - æ ‡ç­¾æ ‡å‡†åŒ–ç®¡ç†

# æ ‡ç­¾é…ç½®æ–‡ä»¶
LABEL_CONFIG="/etc/monitoring/labels.conf"

init_labels() {
    # è‡ªåŠ¨è¯†åˆ«ä¸»æœºæ ‡ç­¾
    local hostname=$(hostname)
    local ip_addr=$(hostname -I | awk '{print $1}')
    local os_version=$(cat /etc/os-release | grep VERSION_ID | cut -d'"' -f2)
    
    # æ ¹æ®ä¸»æœºåæ¨æ–­ç¯å¢ƒ
    local env="unknown"
    if [[ $hostname == *"prod"* ]]; then
        env="production"
    elif [[ $hostname == *"test"* ]]; then
        env="testing" 
    elif [[ $hostname == *"dev"* ]]; then
        env="development"
    fi
    
    # ç”Ÿæˆæ ‡ç­¾é…ç½®
    cat > $LABEL_CONFIG << EOF
# è‡ªåŠ¨ç”Ÿæˆçš„ä¸»æœºæ ‡ç­¾é…ç½®
host=$hostname
ip=$ip_addr
env=$env
os=linux
os_version=$os_version
region=auto-detect
EOF

    echo "âœ… æ ‡ç­¾é…ç½®å·²ç”Ÿæˆ: $LABEL_CONFIG"
}

get_labels() {
    # è¯»å–æ ‡ç­¾é…ç½®å¹¶æ ¼å¼åŒ–
    local labels=""
    while IFS='=' read -r key value; do
        [[ $key =~ ^[[:space:]]*# ]] && continue  # è·³è¿‡æ³¨é‡Š
        [[ -z $key ]] && continue                 # è·³è¿‡ç©ºè¡Œ
        
        if [ -n "$labels" ]; then
            labels="${labels},"
        fi
        labels="${labels}${key}=${value}"
    done < $LABEL_CONFIG
    
    echo $labels
}

# åˆå§‹åŒ–æ ‡ç­¾é…ç½®
init_labels

# è·å–å½“å‰ä¸»æœºæ ‡ç­¾
echo "å½“å‰ä¸»æœºæ ‡ç­¾: $(get_labels)"
```

### 5.4 æ ‡ç­¾æŸ¥è¯¢å’Œç»Ÿè®¡


**åŸºäºæ ‡ç­¾çš„æ•°æ®æŸ¥è¯¢ï¼š**
```bash
#!/bin/bash
# label_query.sh - åŸºäºæ ‡ç­¾çš„æŒ‡æ ‡æŸ¥è¯¢

query_by_labels() {
    local metric_name=$1
    local label_filter=$2
    local time_range=${3:-"1h"}  # é»˜è®¤æŸ¥è¯¢1å°æ—¶
    
    echo "=== æŸ¥è¯¢æŒ‡æ ‡: $metric_name ==="
    echo "æ ‡ç­¾è¿‡æ»¤: $label_filter"
    echo "æ—¶é—´èŒƒå›´: $time_range"
    
    # æ¨¡æ‹ŸæŸ¥è¯¢é€»è¾‘ï¼ˆå®é™…åº”ç”¨ä¸­è¿æ¥æ—¶åºæ•°æ®åº“ï¼‰
    find /var/lib/monitoring/metrics -name "*${metric_name}*" | while read file; do
        echo "æ­£åœ¨åˆ†ææ–‡ä»¶: $file"
        # æ ¹æ®æ ‡ç­¾è¿‡æ»¤æ•°æ®
        grep "$label_filter" "$file" | tail -10
    done
}

# æŸ¥è¯¢ç¤ºä¾‹
query_by_labels "cpu_usage" "env=prod"
query_by_labels "memory_usage" "host=web1"
```

---

## 6. âš¡ æ•°æ®é‡‡é›†ä¼˜åŒ–ç­–ç•¥


### 6.1 é‡‡é›†é¢‘ç‡ä¼˜åŒ–


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> é‡‡é›†é¢‘ç‡å°±åƒä½“æ£€é¢‘ç‡ - å¤ªé¢‘ç¹æµªè´¹èµ„æºï¼Œå¤ªç¨€å°‘å¯èƒ½é”™è¿‡é—®é¢˜ï¼Œéœ€è¦æ‰¾åˆ°å¹³è¡¡ç‚¹

**ä¸åŒæŒ‡æ ‡çš„æ¨èé‡‡é›†é¢‘ç‡ï¼š**

```
ğŸ“Š é‡‡é›†é¢‘ç‡å»ºè®®è¡¨ï¼š

é«˜é¢‘æŒ‡æ ‡ (æ¯5-15ç§’)ï¼š
- CPUä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡
- ç½‘ç»œIOã€ç£ç›˜IO  
- åº”ç”¨å“åº”æ—¶é—´

ä¸­é¢‘æŒ‡æ ‡ (æ¯1-5åˆ†é’Ÿ)ï¼š
- ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡
- è¿›ç¨‹æ•°é‡
- æ•°æ®åº“è¿æ¥æ•°

ä½é¢‘æŒ‡æ ‡ (æ¯10-30åˆ†é’Ÿ)ï¼š
- ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯
- é…ç½®æ–‡ä»¶å˜æ›´
- è½¯ä»¶åŒ…æ›´æ–°çŠ¶æ€
```

**åŠ¨æ€é‡‡é›†é¢‘ç‡æ§åˆ¶è„šæœ¬ï¼š**
```bash
#!/bin/bash
# adaptive_collector.sh - è‡ªé€‚åº”é‡‡é›†é¢‘ç‡æ§åˆ¶

METRICS_CONFIG="/etc/monitoring/collection.conf"

# é…ç½®ä¸åŒæŒ‡æ ‡çš„é‡‡é›†é—´éš”
declare -A INTERVALS=(
    ["cpu_usage"]=15
    ["memory_usage"]=15  
    ["disk_usage"]=300
    ["network_stats"]=60
    ["process_count"]=180
)

adaptive_collect() {
    local metric_name=$1
    local current_value=$2
    local threshold=$3
    
    # æ ¹æ®æŒ‡æ ‡å€¼åŠ¨æ€è°ƒæ•´é‡‡é›†é¢‘ç‡
    if (( $(echo "$current_value > $threshold" | bc -l) )); then
        # è¶…è¿‡é˜ˆå€¼æ—¶å¢åŠ é‡‡é›†é¢‘ç‡
        INTERVALS[$metric_name]=$((${INTERVALS[$metric_name]} / 2))
        echo "âš¡ ${metric_name} è¶…é˜ˆå€¼ï¼Œå¢åŠ é‡‡é›†é¢‘ç‡è‡³ ${INTERVALS[$metric_name]}ç§’"
    else
        # æ­£å¸¸æ—¶ä½¿ç”¨æ ‡å‡†é¢‘ç‡
        local default_interval=60
        if [ ${INTERVALS[$metric_name]} -lt $default_interval ]; then
            INTERVALS[$metric_name]=$default_interval
            echo "ğŸ“Š ${metric_name} æ¢å¤æ­£å¸¸ï¼Œé‡‡é›†é¢‘ç‡æ¢å¤è‡³ ${default_interval}ç§’"
        fi
    fi
}

# ä½¿ç”¨ç¤ºä¾‹ï¼šCPUä½¿ç”¨ç‡è¶…è¿‡80%æ—¶å¢åŠ é‡‡é›†é¢‘ç‡
adaptive_collect "cpu_usage" "85.5" "80"
```

### 6.2 æ•°æ®é‡‡é›†æ€§èƒ½ä¼˜åŒ–


**æ‰¹é‡é‡‡é›†ä¼˜åŒ–ç­–ç•¥ï¼š**
```bash
#!/bin/bash
# batch_collector.sh - æ‰¹é‡æ•°æ®é‡‡é›†ä¼˜åŒ–

collect_all_metrics() {
    local timestamp=$(date +%s)
    local batch_data=""
    
    # ä¸€æ¬¡æ€§é‡‡é›†æ‰€æœ‰ç³»ç»ŸæŒ‡æ ‡
    {
        # CPUä¿¡æ¯
        local cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
        
        # å†…å­˜ä¿¡æ¯  
        local mem_info=$(free | grep Mem)
        local mem_total=$(echo $mem_info | awk '{print $2}')
        local mem_used=$(echo $mem_info | awk '{print $3}')
        local mem_usage=$(echo "scale=1; $mem_used * 100 / $mem_total" | bc)
        
        # ç£ç›˜ä¿¡æ¯
        local disk_usage=$(df / | tail -1 | awk '{print $5}' | tr -d '%')
        
        # æ‰¹é‡ç»„è£…æ•°æ®
        batch_data+="${timestamp},cpu_usage,${cpu_usage}%\n"
        batch_data+="${timestamp},memory_usage,${mem_usage}%\n"  
        batch_data+="${timestamp},disk_usage,${disk_usage}%\n"
        
    } 2>/dev/null  # é™é»˜æ‰§è¡Œï¼Œé¿å…é”™è¯¯è¾“å‡º
    
    # ä¸€æ¬¡æ€§å†™å…¥æ‰€æœ‰æ•°æ®
    echo -e "$batch_data" >> /var/lib/monitoring/batch_metrics.log
}

collect_all_metrics
```

### 6.3 ç½‘ç»œä¼ è¾“ä¼˜åŒ–


**æ•°æ®å‹ç¼©ä¼ è¾“ï¼š**
```bash
#!/bin/bash
# compress_transfer.sh - å‹ç¼©ä¼ è¾“ç›‘æ§æ•°æ®

compress_and_send() {
    local data_file=$1
    local remote_server=$2
    
    # å‹ç¼©æ•°æ®æ–‡ä»¶
    gzip -c "$data_file" > "${data_file}.gz"
    
    # è®¡ç®—å‹ç¼©æ¯”
    local original_size=$(stat -c%s "$data_file")
    local compressed_size=$(stat -c%s "${data_file}.gz")  
    local compression_ratio=$(echo "scale=2; $compressed_size * 100 / $original_size" | bc)
    
    echo "ğŸ“¦ å‹ç¼©æ•ˆæœ: ${original_size} â†’ ${compressed_size} bytes (${compression_ratio}%)"
    
    # ä¼ è¾“å‹ç¼©æ–‡ä»¶
    scp "${data_file}.gz" "$remote_server:/monitoring/incoming/"
    
    # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    rm "${data_file}.gz"
}

# ä½¿ç”¨ç¤ºä¾‹
compress_and_send "/var/lib/monitoring/metrics_$(date +%Y%m%d).csv" "monitor@192.168.1.100"
```

---

## 7. âœ… æ•°æ®éªŒè¯ä¸è´¨é‡æ§åˆ¶


### 7.1 æ•°æ®éªŒè¯çš„é‡è¦æ€§


> ğŸ“Œ **ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®éªŒè¯**  
> å°±åƒé“¶è¡Œè¦éªŒé’ä¸€æ ·ï¼Œç›‘æ§æ•°æ®ä¹Ÿå¯èƒ½æœ‰"å‡å¸"ï¼Œé”™è¯¯çš„æ•°æ®æ¯”æ²¡æœ‰æ•°æ®æ›´å±é™©

**å¸¸è§çš„æ•°æ®è´¨é‡é—®é¢˜ï¼š**
```
æ•°å€¼å¼‚å¸¸ï¼šCPUä½¿ç”¨ç‡ 150% (è¶…å‡ºåˆç†èŒƒå›´)
æ—¶é—´é”™ä¹±ï¼šæœªæ¥æ—¶é—´æˆ³æˆ–æ—¶é—´å€’é€€
æ•°æ®ç¼ºå¤±ï¼šé•¿æ—¶é—´æ²¡æœ‰æ•°æ®ä¸ŠæŠ¥
é‡å¤æ•°æ®ï¼šåŒä¸€æ—¶é—´ç‚¹çš„é‡å¤è®°å½•
```

### 7.2 æ•°æ®éªŒè¯è§„åˆ™


**åŸºæœ¬éªŒè¯è§„åˆ™å®šä¹‰ï¼š**
```bash
#!/bin/bash
# data_validator.sh - æ•°æ®è´¨é‡éªŒè¯è„šæœ¬

# éªŒè¯è§„åˆ™é…ç½®
declare -A VALIDATION_RULES=(
    ["cpu_usage"]="0:100"          # CPUä½¿ç”¨ç‡èŒƒå›´0-100%
    ["memory_usage"]="0:100"       # å†…å­˜ä½¿ç”¨ç‡èŒƒå›´0-100%  
    ["disk_usage"]="0:100"         # ç£ç›˜ä½¿ç”¨ç‡èŒƒå›´0-100%
    ["response_time"]="0:30"       # å“åº”æ—¶é—´0-30ç§’
    ["error_rate"]="0:100"         # é”™è¯¯ç‡0-100%
)

validate_metric() {
    local metric_name=$1
    local value=$2
    local timestamp=$3
    
    echo "ğŸ” éªŒè¯æŒ‡æ ‡: ${metric_name} = ${value}"
    
    # 1. æ£€æŸ¥æ•°å€¼èŒƒå›´
    if [[ -n "${VALIDATION_RULES[$metric_name]}" ]]; then
        local min_val=$(echo ${VALIDATION_RULES[$metric_name]} | cut -d':' -f1)
        local max_val=$(echo ${VALIDATION_RULES[$metric_name]} | cut -d':' -f2)
        
        if (( $(echo "$value < $min_val || $value > $max_val" | bc -l) )); then
            echo "âŒ æ•°å€¼å¼‚å¸¸: ${value} ä¸åœ¨ [${min_val}, ${max_val}] èŒƒå›´å†…"
            return 1
        fi
    fi
    
    # 2. æ£€æŸ¥æ—¶é—´æˆ³åˆç†æ€§
    local current_time=$(date +%s)
    local time_diff=$((current_time - timestamp))
    
    if [ $time_diff -gt 300 ]; then  # æ•°æ®è¶…è¿‡5åˆ†é’Ÿ
        echo "âš ï¸ æ•°æ®å»¶è¿Ÿ: æ•°æ®æ—¶é—´æˆ³å»¶è¿Ÿ ${time_diff} ç§’"
    fi
    
    if [ $timestamp -gt $current_time ]; then  # æœªæ¥æ—¶é—´
        echo "âŒ æ—¶é—´é”™è¯¯: æ•°æ®æ—¶é—´æˆ³æ¥è‡ªæœªæ¥"
        return 1
    fi
    
    echo "âœ… æ•°æ®éªŒè¯é€šè¿‡"
    return 0
}

# éªŒè¯ç¤ºä¾‹
validate_metric "cpu_usage" "75.5" "$(date +%s)"
validate_metric "cpu_usage" "150" "$(date +%s)"    # å¼‚å¸¸å€¼æµ‹è¯•
```

### 7.3 æ•°æ®æ¸…æ´—ä¸ä¿®å¤


**å¼‚å¸¸æ•°æ®å¤„ç†ç­–ç•¥ï¼š**
```bash
#!/bin/bash
# data_cleaner.sh - å¼‚å¸¸æ•°æ®æ¸…æ´—è„šæœ¬

clean_metrics_data() {
    local input_file=$1
    local output_file=$2
    local error_file="${input_file}.errors"
    
    echo "ğŸ§¹ å¼€å§‹æ¸…æ´—æ•°æ®æ–‡ä»¶: $input_file"
    
    > "$output_file"    # æ¸…ç©ºè¾“å‡ºæ–‡ä»¶
    > "$error_file"     # æ¸…ç©ºé”™è¯¯æ–‡ä»¶
    
    local total_lines=0
    local valid_lines=0
    local error_lines=0
    
    while IFS=',' read -r timestamp metric_name value tags; do
        ((total_lines++))
        
        # è·³è¿‡è¡¨å¤´
        if [[ "$timestamp" == "timestamp" ]]; then
            echo "$timestamp,$metric_name,$value,$tags" >> "$output_file"
            continue
        fi
        
        # æ•°å€¼éªŒè¯å’Œæ¸…æ´—
        local clean_value=$value
        
        # 1. å»é™¤ç™¾åˆ†å·
        clean_value=${clean_value%\%}
        
        # 2. æ£€æŸ¥æ˜¯å¦ä¸ºæ•°å­—
        if ! [[ $clean_value =~ ^[0-9]+\.?[0-9]*$ ]]; then
            echo "$timestamp,$metric_name,$value,$tags" >> "$error_file"
            ((error_lines++))
            continue
        fi
        
        # 3. èŒƒå›´æ£€æŸ¥å’Œä¿®æ­£
        if [[ "$metric_name" =~ usage$ ]]; then  # ä½¿ç”¨ç‡ç±»æŒ‡æ ‡
            if (( $(echo "$clean_value > 100" | bc -l) )); then
                clean_value="100"  # è¶…è¿‡100%ä¿®æ­£ä¸º100%
            elif (( $(echo "$clean_value < 0" | bc -l) )); then
                clean_value="0"    # å°äº0ä¿®æ­£ä¸º0
            fi
        fi
        
        # 4. è¾“å‡ºæ¸…æ´—åçš„æ•°æ®
        echo "$timestamp,$metric_name,$clean_value,$tags" >> "$output_file"
        ((valid_lines++))
        
    done < "$input_file"
    
    echo "ğŸ“Š æ•°æ®æ¸…æ´—å®Œæˆ:"
    echo "  - æ€»è¡Œæ•°: $total_lines"
    echo "  - æœ‰æ•ˆè¡Œæ•°: $valid_lines"  
    echo "  - é”™è¯¯è¡Œæ•°: $error_lines"
    echo "  - æ¸…æ´—åæ–‡ä»¶: $output_file"
    if [ $error_lines -gt 0 ]; then
        echo "  - é”™è¯¯æ•°æ®æ–‡ä»¶: $error_file"
    fi
}

# ä½¿ç”¨ç¤ºä¾‹
clean_metrics_data "/tmp/raw_metrics.csv" "/tmp/clean_metrics.csv"
```

### 7.4 æ•°æ®è´¨é‡ç›‘æ§


**æ•°æ®è´¨é‡ç›‘æ§è„šæœ¬ï¼š**
```bash
#!/bin/bash
# quality_monitor.sh - æ•°æ®è´¨é‡æŒç»­ç›‘æ§

monitor_data_quality() {
    local metrics_dir="/var/lib/monitoring/metrics"
    local quality_report="/var/log/monitoring/quality_report.log"
    
    echo "=== æ•°æ®è´¨é‡ç›‘æ§æŠ¥å‘Š $(date) ===" >> "$quality_report"
    
    # æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
    local expected_metrics=("cpu_usage" "memory_usage" "disk_usage" "network_stats")
    
    for metric in "${expected_metrics[@]}"; do
        local metric_file="$metrics_dir/${metric}_$(date +%Y%m%d).csv"
        
        if [ -f "$metric_file" ]; then
            local record_count=$(wc -l < "$metric_file")
            echo "âœ… $metric: $record_count æ¡è®°å½•" >> "$quality_report"
            
            # æ£€æŸ¥æœ€åä¸€æ¡è®°å½•çš„æ—¶é—´
            local last_timestamp=$(tail -n1 "$metric_file" | cut -d',' -f1)
            local current_time=$(date +%s)
            local delay=$((current_time - last_timestamp))
            
            if [ $delay -gt 600 ]; then  # 10åˆ†é’Ÿæ— æ•°æ®
                echo "âš ï¸ $metric: æ•°æ®å»¶è¿Ÿ $delay ç§’" >> "$quality_report"
            fi
        else
            echo "âŒ $metric: ç¼ºå°‘æ•°æ®æ–‡ä»¶" >> "$quality_report"
        fi
    done
    
    # è®¡ç®—æ•°æ®è´¨é‡è¯„åˆ†
    local quality_score=100
    local warning_count=$(grep -c "âš ï¸" "$quality_report")
    local error_count=$(grep -c "âŒ" "$quality_report")
    
    quality_score=$((quality_score - warning_count * 10 - error_count * 20))
    
    echo "ğŸ“Š æ•°æ®è´¨é‡è¯„åˆ†: $quality_score/100" >> "$quality_report"
    echo "===========================================" >> "$quality_report"
}

monitor_data_quality
```

---

## 8. ğŸ—‚ï¸ æŒ‡æ ‡æ¸…ç†ä¸å½’æ¡£ç®¡ç†


### 8.1 æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†


> ğŸ“Œ **æ ¸å¿ƒæ¦‚å¿µ**  
> ç›‘æ§æ•°æ®å°±åƒå®¶é‡Œçš„æ‚ç‰©ï¼Œéœ€è¦å®šæœŸæ•´ç† - å¸¸ç”¨çš„æ”¾è¿‘å¤„ï¼Œä¸ç”¨çš„å­˜ä»“åº“ï¼Œè¿‡æœŸçš„æ‰”æ‰

**æ•°æ®ç”Ÿå‘½å‘¨æœŸè§„åˆ’ï¼š**
```
æ•°æ®ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼š

ğŸ“Š çƒ­æ•°æ® (0-7å¤©)ï¼š
- å­˜å‚¨ä½ç½®ï¼šSSDé«˜é€Ÿå­˜å‚¨
- æŸ¥è¯¢é¢‘ç‡ï¼šéå¸¸é¢‘ç¹
- æ•°æ®ç²’åº¦ï¼šæœ€ç»†ç²’åº¦ï¼ˆç§’çº§ï¼‰

ğŸŒ¡ï¸ æ¸©æ•°æ® (7å¤©-3ä¸ªæœˆ)ï¼š
- å­˜å‚¨ä½ç½®ï¼šæ™®é€šç¡¬ç›˜
- æŸ¥è¯¢é¢‘ç‡ï¼šå¶å°”æŸ¥è¯¢
- æ•°æ®ç²’åº¦ï¼šèšåˆæ•°æ®ï¼ˆåˆ†é’Ÿçº§ï¼‰

â„ï¸ å†·æ•°æ® (3ä¸ªæœˆ-2å¹´)ï¼š
- å­˜å‚¨ä½ç½®ï¼šå½’æ¡£å­˜å‚¨
- æŸ¥è¯¢é¢‘ç‡ï¼šå¾ˆå°‘æŸ¥è¯¢  
- æ•°æ®ç²’åº¦ï¼šèšåˆæ•°æ®ï¼ˆå°æ—¶çº§ï¼‰

ğŸ—‘ï¸ è¿‡æœŸæ•°æ® (>2å¹´)ï¼š
- å¤„ç†æ–¹å¼ï¼šåˆ é™¤æˆ–é•¿æœŸå½’æ¡£
```

### 8.2 æ•°æ®å½’æ¡£è„šæœ¬


**è‡ªåŠ¨åŒ–æ•°æ®å½’æ¡£ï¼š**
```bash
#!/bin/bash
# data_archiver.sh - ç›‘æ§æ•°æ®è‡ªåŠ¨å½’æ¡£è„šæœ¬

METRICS_DIR="/var/lib/monitoring/metrics"
ARCHIVE_DIR="/var/lib/monitoring/archive"
HOT_DAYS=7      # çƒ­æ•°æ®ä¿ç•™å¤©æ•°
WARM_DAYS=90    # æ¸©æ•°æ®ä¿ç•™å¤©æ•°
COLD_DAYS=730   # å†·æ•°æ®ä¿ç•™å¤©æ•°

# åˆ›å»ºå½’æ¡£ç›®å½•
mkdir -p "$ARCHIVE_DIR"/{warm,cold}

archive_hot_to_warm() {
    echo "ğŸŒ¡ï¸ å½’æ¡£çƒ­æ•°æ®åˆ°æ¸©æ•°æ®..."
    
    # æŸ¥æ‰¾7å¤©å‰çš„æ•°æ®æ–‡ä»¶
    find "$METRICS_DIR" -name "*.csv" -mtime +$HOT_DAYS | while read file; do
        local basename=$(basename "$file")
        local warm_file="$ARCHIVE_DIR/warm/$basename"
        
        echo "å¤„ç†æ–‡ä»¶: $file"
        
        # æ•°æ®èšåˆï¼šä»ç§’çº§èšåˆä¸ºåˆ†é’Ÿçº§
        awk -F',' '
        NR>1 {  # è·³è¿‡è¡¨å¤´
            # æ—¶é—´æˆ³å–æ•´åˆ°åˆ†é’Ÿ
            minute = int($1/60)*60
            key = minute "," $2 "," $4  # timestamp,metric,tags
            
            # ç´¯è®¡æ•°å€¼ç”¨äºå¹³å‡
            sum[key] += $3
            count[key] += 1
        }
        END {
            print "timestamp,metric_name,value,tags"  # è¡¨å¤´
            for (k in sum) {
                split(k, parts, ",")
                avg = sum[k] / count[k]
                printf "%s,%s,%.2f,%s\n", parts[1], parts[2], avg, parts[3]
            }
        }' "$file" > "$warm_file"
        
        echo "  âœ… èšåˆå®Œæˆ: $(wc -l < "$file") â†’ $(wc -l < "$warm_file") è¡Œ"
        
        # åˆ é™¤åŸå§‹çƒ­æ•°æ®
        rm "$file"
    done
}

archive_warm_to_cold() {
    echo "â„ï¸ å½’æ¡£æ¸©æ•°æ®åˆ°å†·æ•°æ®..."
    
    find "$ARCHIVE_DIR/warm" -name "*.csv" -mtime +$WARM_DAYS | while read file; do
        local basename=$(basename "$file")
        local cold_file="$ARCHIVE_DIR/cold/$basename"
        
        # è¿›ä¸€æ­¥èšåˆï¼šä»åˆ†é’Ÿçº§èšåˆä¸ºå°æ—¶çº§
        awk -F',' '
        NR>1 {
            hour = int($1/3600)*3600  # æ—¶é—´æˆ³å–æ•´åˆ°å°æ—¶
            key = hour "," $2 "," $4
            sum[key] += $3
            count[key] += 1
        }
        END {
            print "timestamp,metric_name,value,tags"
            for (k in sum) {
                split(k, parts, ",")
                avg = sum[k] / count[k]  
                printf "%s,%s,%.2f,%s\n", parts[1], parts[2], avg, parts[3]
            }
        }' "$file" > "$cold_file"
        
        rm "$file"  # åˆ é™¤æ¸©æ•°æ®
    done
}

cleanup_expired_data() {
    echo "ğŸ—‘ï¸ æ¸…ç†è¿‡æœŸæ•°æ®..."
    
    # åˆ é™¤è¶…è¿‡2å¹´çš„å†·æ•°æ®
    find "$ARCHIVE_DIR/cold" -name "*.csv" -mtime +$COLD_DAYS -delete
    
    echo "âœ… è¿‡æœŸæ•°æ®æ¸…ç†å®Œæˆ"
}

# æ‰§è¡Œå½’æ¡£æµç¨‹
archive_hot_to_warm
archive_warm_to_cold  
cleanup_expired_data

echo "ğŸ“Š æ•°æ®å½’æ¡£å®Œæˆï¼Œå­˜å‚¨ç©ºé—´ä½¿ç”¨æƒ…å†µ:"
du -sh "$METRICS_DIR" "$ARCHIVE_DIR"/*
```

### 8.3 å­˜å‚¨ç©ºé—´ç›‘æ§


**å­˜å‚¨ç©ºé—´ç›‘æ§è„šæœ¬ï¼š**
```bash
#!/bin/bash
# storage_monitor.sh - ç›‘æ§æ•°æ®å­˜å‚¨ç©ºé—´ç›‘æ§

monitor_storage_usage() {
    local metrics_path="/var/lib/monitoring"
    
    echo "=== ç›‘æ§æ•°æ®å­˜å‚¨ä½¿ç”¨æƒ…å†µ ==="
    
    # å„ç›®å½•å¤§å°ç»Ÿè®¡
    echo "ğŸ“Š è¯¦ç»†å­˜å‚¨ç»Ÿè®¡:"
    du -sh "$metrics_path"/{metrics,archive} 2>/dev/null | while read size path; do
        local dir_name=$(basename "$path")
        printf "  %-15s: %s\n" "$dir_name" "$size"
    done
    
    # è®¡ç®—æ€»ä½¿ç”¨é‡
    local total_size=$(du -sb "$metrics_path" 2>/dev/null | cut -f1)
    local total_mb=$((total_size / 1024 / 1024))
    
    echo "ğŸ“¦ æ€»ä½¿ç”¨ç©ºé—´: ${total_mb} MB"
    
    # ç£ç›˜ä½¿ç”¨ç‡æ£€æŸ¥
    local disk_usage=$(df "$metrics_path" | tail -1 | awk '{print $5}' | tr -d '%')
    
    if [ "$disk_usage" -gt 80 ]; then
        echo "âš ï¸ è­¦å‘Š: ç›‘æ§æ•°æ®ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜ (${disk_usage}%)"
        echo "ğŸ’¡ å»ºè®®: æ‰§è¡Œæ•°æ®å½’æ¡£æˆ–æ¸…ç†æ“ä½œ"
    else
        echo "âœ… ç£ç›˜ç©ºé—´å……è¶³ (ä½¿ç”¨ç‡: ${disk_usage}%)"
    fi
    
    # é¢„æµ‹å­˜å‚¨å¢é•¿è¶‹åŠ¿
    local daily_growth=$(find "$metrics_path/metrics" -name "*.csv" -mtime -1 -exec du -cb {} + | tail -1 | cut -f1)
    local daily_growth_mb=$((daily_growth / 1024 / 1024))
    
    if [ $daily_growth_mb -gt 0 ]; then
        echo "ğŸ“ˆ æ¯æ—¥æ•°æ®å¢é•¿: ${daily_growth_mb} MB"
        
        # ç®€å•é¢„æµ‹ï¼šåŸºäºå½“å‰å¢é•¿ç‡
        local available_space=$(df "$metrics_path" | tail -1 | awk '{print $4}')
        local available_mb=$((available_space / 1024))
        local days_remaining=$((available_mb / daily_growth_mb))
        
        if [ $days_remaining -lt 30 ]; then
            echo "ğŸš¨ é¢„è­¦: æŒ‰å½“å‰å¢é•¿é€Ÿåº¦ï¼Œçº¦ $days_remaining å¤©åå­˜å‚¨ç©ºé—´ä¸è¶³"
        fi
    fi
}

monitor_storage_usage
```

---

## 9. ğŸ”Œ æ•°æ®å¯¼å‡ºæ¥å£è®¾è®¡


### 9.1 å¯¼å‡ºæ¥å£éœ€æ±‚åˆ†æ


> ğŸ“Œ **æ ¸å¿ƒç†è§£**  
> æ•°æ®å¯¼å‡ºæ¥å£å°±åƒå›¾ä¹¦é¦†çš„å€Ÿé˜…ç³»ç»Ÿï¼Œè®©å…¶ä»–ç³»ç»Ÿèƒ½å¤Ÿæ–¹ä¾¿åœ°è·å–ç›‘æ§æ•°æ®

**å¸¸è§çš„å¯¼å‡ºéœ€æ±‚ï¼š**
```
æŠ¥è¡¨ç³»ç»Ÿï¼šéœ€è¦å®šæœŸè·å–ç»Ÿè®¡æ•°æ®ç”ŸæˆæŠ¥è¡¨
å‘Šè­¦ç³»ç»Ÿï¼šéœ€è¦å®æ—¶è·å–æŒ‡æ ‡æ•°æ®åˆ¤æ–­æ˜¯å¦å‘Šè­¦  
åˆ†æå·¥å…·ï¼šéœ€è¦å†å²æ•°æ®è¿›è¡Œè¶‹åŠ¿åˆ†æ
å¤‡ä»½ç³»ç»Ÿï¼šéœ€è¦å®Œæ•´æ•°æ®è¿›è¡Œå¼‚åœ°å¤‡ä»½
```

### 9.2 RESTful APIæ¥å£è®¾è®¡


**ç›‘æ§æ•°æ®APIæ¥å£è®¾è®¡ï¼š**
```bash
#!/bin/bash
# metrics_api.sh - ç›‘æ§æ•°æ®RESTful APIæœåŠ¡

METRICS_DIR="/var/lib/monitoring/metrics"
ARCHIVE_DIR="/var/lib/monitoring/archive"

# ç®€å•çš„HTTPæœåŠ¡å™¨å“åº”å‡½æ•°
http_response() {
    local status=$1
    local content_type=$2
    local data=$3
    
    echo "HTTP/1.1 $status"
    echo "Content-Type: $content_type"
    echo "Access-Control-Allow-Origin: *"
    echo "Connection: close"
    echo ""
    echo "$data"
}

# APIè·¯ç”±å¤„ç†
handle_request() {
    local method=$1
    local path=$2
    local query_string=$3
    
    case "$path" in
        "/api/metrics")
            # GET /api/metrics?metric=cpu_usage&start=1694678400&end=1694764800
            get_metrics_data "$query_string"
            ;;
        "/api/metrics/list")
            # GET /api/metrics/list - è·å–æ‰€æœ‰å¯ç”¨æŒ‡æ ‡
            list_available_metrics
            ;;
        "/api/export")
            # GET /api/export?format=csv&metric=cpu_usage
            export_metrics_data "$query_string"
            ;;
        *)
            http_response "404 Not Found" "application/json" '{"error":"API endpoint not found"}'
            ;;
    esac
}

get_metrics_data() {
    local query_string=$1
    
    # è§£ææŸ¥è¯¢å‚æ•°
    local metric_name=$(echo "$query_string" | grep -o 'metric=[^&]*' | cut -d'=' -f2)
    local start_time=$(echo "$query_string" | grep -o 'start=[^&]*' | cut -d'=' -f2)
    local end_time=$(echo "$query_string" | grep -o 'end=[^&]*' | cut -d'=' -f2)
    
    if [ -z "$metric_name" ]; then
        http_response "400 Bad Request" "application/json" '{"error":"metric parameter required"}'
        return
    fi
    
    # æŸ¥æ‰¾å¯¹åº”çš„æ•°æ®æ–‡ä»¶
    local data_files=$(find "$METRICS_DIR" "$ARCHIVE_DIR" -name "*${metric_name}*.csv" 2>/dev/null)
    
    if [ -z "$data_files" ]; then
        http_response "404 Not Found" "application/json" '{"error":"metric not found"}'
        return
    fi
    
    # æ„å»ºJSONå“åº”
    local json_data='{"metric":"'$metric_name'","data":['
    local first=true
    
    for file in $data_files; do
        while IFS=',' read -r timestamp name value tags; do
            # è·³è¿‡è¡¨å¤´
            [[ "$timestamp" == "timestamp" ]] && continue
            
            # æ—¶é—´èŒƒå›´è¿‡æ»¤
            if [ -n "$start_time" ] && [ "$timestamp" -lt "$start_time" ]; then
                continue
            fi
            if [ -n "$end_time" ] && [ "$timestamp" -gt "$end_time" ]; then
                continue
            fi
            
            # æ·»åŠ æ•°æ®ç‚¹åˆ°JSON
            if [ "$first" = true ]; then
                first=false
            else
                json_data+=","
            fi
            
            json_data+="{\"timestamp\":$timestamp,\"value\":$value,\"tags\":$tags}"
            
        done < "$file"
    done
    
    json_data+=']}'
    
    http_response "200 OK" "application/json" "$json_data"
}

list_available_metrics() {
    # æ‰«ææ‰€æœ‰æ•°æ®æ–‡ä»¶ï¼Œæå–å¯ç”¨çš„æŒ‡æ ‡åç§°
    local metrics=$(find "$METRICS_DIR" "$ARCHIVE_DIR" -name "*.csv" 2>/dev/null | \
                   xargs basename -s .csv | \
                   sed 's/_[0-9]\{8\}$//' | \
                   sort -u)
    
    local json_data='{"metrics":['
    local first=true
    
    for metric in $metrics; do
        if [ "$first" = true ]; then
            first=false
        else
            json_data+=","
        fi
        json_data+="\"$metric\""
    done
    
    json_data+=']}'
    
    http_response "200 OK" "application/json" "$json_data"
}

export_metrics_data() {
    local query_string=$1
    
    local format=$(echo "$query_string" | grep -o 'format=[^&]*' | cut -d'=' -f2)
    local metric_name=$(echo "$query_string" | grep -o 'metric=[^&]*' | cut -d'=' -f2)
    
    # é»˜è®¤CSVæ ¼å¼
    format=${format:-csv}
    
    case "$format" in
        "csv")
            export_csv "$metric_name"
            ;;
        "json")
            get_metrics_data "$query_string"
            ;;
        *)
            http_response "400 Bad Request" "application/json" '{"error":"unsupported format"}'
            ;;
    esac
}

export_csv() {
    local metric_name=$1
    local temp_file="/tmp/export_${metric_name}_$(date +%s).csv"
    
    # åˆå¹¶æ‰€æœ‰ç›¸å…³æ•°æ®æ–‡ä»¶
    echo "timestamp,metric_name,value,tags" > "$temp_file"
    find "$METRICS_DIR" "$ARCHIVE_DIR" -name "*${metric_name}*.csv" 2>/dev/null | \
        xargs cat | grep -v "timestamp,metric_name,value,tags" >> "$temp_file"
    
    # è¿”å›CSVæ–‡ä»¶
    http_response "200 OK" "text/csv" "$(cat "$temp_file")"
    
    # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    rm "$temp_file"
}

echo "ğŸš€ ç›‘æ§æ•°æ®APIæœåŠ¡å·²å¯åŠ¨"
echo "ğŸ“¡ å¯ç”¨æ¥å£:"
echo "  GET /api/metrics?metric=cpu_usage&start=timestamp&end=timestamp"
echo "  GET /api/metrics/list"
echo "  GET /api/export?format=csv&metric=cpu_usage"
```

### 9.3 æ•°æ®å¯¼å‡ºå·¥å…·


**å‘½ä»¤è¡Œæ•°æ®å¯¼å‡ºå·¥å…·ï¼š**
```bash
#!/bin/bash
# metrics_export_tool.sh - ç›‘æ§æ•°æ®å¯¼å‡ºå·¥å…·

show_usage() {
    echo "ç›‘æ§æ•°æ®å¯¼å‡ºå·¥å…·"
    echo ""
    echo "ç”¨æ³•: $0 [é€‰é¡¹]"
    echo ""
    echo "é€‰é¡¹:"
    echo "  -m, --metric METRIC     æŒ‡å®šè¦å¯¼å‡ºçš„æŒ‡æ ‡åç§°"
    echo "  -s, --start START       å¼€å§‹æ—¶é—´æˆ³"
    echo "  -e, --end END           ç»“æŸæ—¶é—´æˆ³"
    echo "  -f, --format FORMAT     å¯¼å‡ºæ ¼å¼ (csv|json|excel)"
    echo "  -o, --output FILE       è¾“å‡ºæ–‡ä»¶å"
    echo "  -h, --help              æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"
    echo ""
    echo "ç¤ºä¾‹:"
    echo "  $0 -m cpu_usage -s 1694678400 -e 1694764800 -f csv -o cpu_report.csv"
    echo "  $0 -m memory_usage -f json -o memory_data.json"
}

export_to_excel() {
    local csv_file=$1
    local excel_file=$2
    
    # ä½¿ç”¨Pythonè„šæœ¬å°†CSVè½¬æ¢ä¸ºExcelï¼ˆéœ€è¦pandasï¼‰
    python3 -c "
import pandas as pd
import sys

try:
    df = pd.read_csv('$csv_file')
    df.to_excel('$excel_file', index=False, engine='openpyxl')
    print('âœ… Excelæ–‡ä»¶å·²ç”Ÿæˆ: $excel_file')
except ImportError:
    print('âŒ éœ€è¦å®‰è£…pandaså’Œopenpyxl: pip install pandas openpyxl')
    sys.exit(1)
except Exception as e:
    print(f'âŒ è½¬æ¢å¤±è´¥: {e}')
    sys.exit(1)
"
}

export_metrics() {
    local metric_name=$1
    local start_time=$2
    local end_time=$3
    local format=$4
    local output_file=$5
    
    echo "ğŸ“Š å¼€å§‹å¯¼å‡ºç›‘æ§æ•°æ®..."
    echo "  æŒ‡æ ‡: $metric_name"
    echo "  æ—¶é—´èŒƒå›´: $(date -d @$start_time 2>/dev/null || echo $start_time) åˆ° $(date -d @$end_time 2>/dev/null || echo $end_time)"
    echo "  æ ¼å¼: $format"
    echo "  è¾“å‡º: $output_file"
    
    # æŸ¥æ‰¾æ•°æ®æ–‡ä»¶
    local data_files=$(find /var/lib/monitoring -name "*${metric_name}*.csv" 2>/dev/null)
    
    if [ -z "$data_files" ]; then
        echo "âŒ æœªæ‰¾åˆ°æŒ‡æ ‡ $metric_name çš„æ•°æ®æ–‡ä»¶"
        exit 1
    fi
    
    local temp_csv="/tmp/export_temp_$(date +%s).csv"
    
    # åˆå¹¶å’Œè¿‡æ»¤æ•°æ®
    echo "timestamp,metric_name,value,tags" > "$temp_csv"
    
    for file in $data_files; do
        while IFS=',' read -r timestamp name value tags; do
            [[ "$timestamp" == "timestamp" ]] && continue
            
            # æ—¶é—´è¿‡æ»¤
            if [ -n "$start_time" ] && [ "$timestamp" -lt "$start_time" ]; then
                continue
            fi
            if [ -n "$end_time" ] && [ "$timestamp" -gt "$end_time" ]; then
                continue
            fi
            
            echo "$timestamp,$name,$value,$tags" >> "$temp_csv"
        done < "$file"
    done
    
    # æ ¹æ®æ ¼å¼ç”Ÿæˆæœ€ç»ˆæ–‡ä»¶
    case "$format" in
        "csv")
            cp "$temp_csv" "$output_file"
            ;;
        "json")
            # è½¬æ¢CSVä¸ºJSON
            python3 -c "
import csv, json
data = []
with open('$temp_csv', 'r') as f:
    reader = csv.DictReader(f)
    for row in reader:
        row['timestamp'] = int(row['timestamp'])
        row['value'] = float(row['value'])
        data.append(row)

with open('$output_file', 'w') as f:
    json.dump({'data': data, 'total': len(data)}, f, indent=2)
"
            ;;
        "excel")
            export_to_excel "$temp_csv" "$output_file"
            ;;
    esac
    
    # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    rm "$temp_csv"
    
    # æ˜¾ç¤ºå¯¼å‡ºç»“æœ
    if [ -f "$output_file" ]; then
        local file_size=$(du -h "$output_file" | cut -f1)
        local record_count=$(wc -l < "$output_file" 2>/dev/null || echo "unknown")
        echo "âœ… å¯¼å‡ºå®Œæˆ!"
        echo "  æ–‡ä»¶å¤§å°: $file_size"
        echo "  è®°å½•æ•°é‡: $record_count"
        echo "  æ–‡ä»¶ä½ç½®: $output_file"
    else
        echo "âŒ å¯¼å‡ºå¤±è´¥"
        exit 1
    fi
}

# å‚æ•°è§£æ
while [[ $# -gt 0 ]]; do
    case $1 in
        -m|--metric)
            METRIC="$2"
            shift 2
            ;;
        -s|--start)
            START_TIME="$2"
            shift 2
            ;;
        -e|--end)
            END_TIME="$2"
            shift 2
            ;;
        -f|--format)
            FORMAT="$2"
            shift 2
            ;;
        -o|--output)
            OUTPUT_FILE="$2"
            shift 2
            ;;
        -h|--help)
            show_usage
            exit 0
            ;;
        *)
            echo "æœªçŸ¥å‚æ•°: $1"
            show_usage
            exit 1
            ;;
    esac
done

# å‚æ•°éªŒè¯
if [ -z "$METRIC" ]; then
    echo "âŒ å¿…é¡»æŒ‡å®šæŒ‡æ ‡åç§° (-m å‚æ•°)"
    show_usage
    exit 1
fi

# è®¾ç½®é»˜è®¤å€¼
FORMAT=${FORMAT:-csv}
OUTPUT_FILE=${OUTPUT_FILE:-"${METRIC}_export_$(date +%Y%m%d_%H%M%S).${FORMAT}"}
START_TIME=${START_TIME:-0}
END_TIME=${END_TIME:-$(date +%s)}

# æ‰§è¡Œå¯¼å‡º
export_metrics "$METRIC" "$START_TIME" "$END_TIME" "$FORMAT" "$OUTPUT_FILE"
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


> ğŸ“Œ **ç›‘æ§æŒ‡æ ‡æ ¸å¿ƒè¦ç‚¹**
```
ğŸ”¸ ç›‘æ§æŒ‡æ ‡å®šä¹‰ï¼šç”¨æ•°å­—åæ˜ ç³»ç»ŸçŠ¶æ€çš„æ ‡å‡†åŒ–æ•°æ®
ğŸ”¸ æŒ‡æ ‡åˆ†ç±»ï¼šç³»ç»ŸæŒ‡æ ‡ã€åº”ç”¨æŒ‡æ ‡ã€ä¸šåŠ¡æŒ‡æ ‡ä¸‰å¤§ç±»
ğŸ”¸ é‡‡é›†åŸç†ï¼šé€šè¿‡è„šæœ¬å®šæœŸè¯»å–ç³»ç»Ÿæ–‡ä»¶å’Œå‘½ä»¤è¾“å‡º
ğŸ”¸ æ•°æ®å­˜å‚¨ï¼šæ—¶åºæ•°æ®ï¼ŒæŒ‰æ—¶é—´é¡ºåºå­˜å‚¨ï¼Œæ”¯æŒæ ‡ç­¾åŒ–ç®¡ç†
ğŸ”¸ è´¨é‡æ§åˆ¶ï¼šæ•°æ®éªŒè¯ã€æ¸…æ´—ã€å½’æ¡£çš„å®Œæ•´æµç¨‹
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç›‘æ§æŒ‡æ ‡é‡‡é›†çš„æœ¬è´¨**
```
é‡‡é›†å°±æ˜¯"ä½“æ£€"ï¼šå®šæœŸæ£€æŸ¥ç³»ç»Ÿå„é¡¹"ç”Ÿç†æŒ‡æ ‡"
æ•°æ®å°±æ˜¯"ç—…å†"ï¼šè®°å½•ç³»ç»Ÿçš„å†å²å¥åº·çŠ¶å†µ
å‘Šè­¦å°±æ˜¯"é¢„è­¦"ï¼šåŠæ—¶å‘ç°å¼‚å¸¸é¿å…"ç—…æƒ…"æ¶åŒ–

æ ¸å¿ƒæµç¨‹ï¼šé‡‡é›† â†’ å­˜å‚¨ â†’ éªŒè¯ â†’ åˆ†æ â†’ å‘Šè­¦ â†’ å½’æ¡£
```

**ğŸ”¹ é‡‡é›†é¢‘ç‡çš„æƒè¡¡**
```
é¢‘ç‡è¿‡é«˜ â†’ èµ„æºæ¶ˆè€—å¤§ï¼Œä½†èƒ½åŠæ—¶å‘ç°é—®é¢˜
é¢‘ç‡è¿‡ä½ â†’ èŠ‚çœèµ„æºï¼Œä½†å¯èƒ½é”™è¿‡çŸ­æ—¶é—´å¼‚å¸¸

æœ€ä½³å®è·µï¼š
- å…³é”®æŒ‡æ ‡é«˜é¢‘é‡‡é›†ï¼ˆCPUã€å†…å­˜ï¼š15ç§’ï¼‰
- ä¸€èˆ¬æŒ‡æ ‡ä¸­é¢‘é‡‡é›†ï¼ˆç£ç›˜ç©ºé—´ï¼š5åˆ†é’Ÿï¼‰
- é™æ€ä¿¡æ¯ä½é¢‘é‡‡é›†ï¼ˆç³»ç»Ÿç‰ˆæœ¬ï¼š30åˆ†é’Ÿï¼‰
```

**ğŸ”¹ æ•°æ®è´¨é‡çš„é‡è¦æ€§**
```
åƒåœ¾æ•°æ®çš„å±å®³ï¼š
- é”™è¯¯å‘Šè­¦ï¼šCPU 150% è§¦å‘æ— æ•ˆå‘Šè­¦
- è¯¯å¯¼å†³ç­–ï¼šåŸºäºé”™è¯¯æ•°æ®åšå‡ºé”™è¯¯åˆ¤æ–­
- æµªè´¹èµ„æºï¼šå­˜å‚¨å’Œå¤„ç†æ— ç”¨æ•°æ®

æ•°æ®éªŒè¯å¿…è¦æ€§ï¼š
âœ… æ•°å€¼èŒƒå›´æ£€æŸ¥ï¼šé˜²æ­¢å¼‚å¸¸å€¼
âœ… æ—¶é—´æˆ³éªŒè¯ï¼šé˜²æ­¢æ—¶é—´é”™ä¹±
âœ… æ ¼å¼æ ‡å‡†åŒ–ï¼šç»Ÿä¸€æ•°æ®æ ¼å¼
âœ… é‡å¤æ•°æ®æ£€æŸ¥ï¼šé¿å…æ•°æ®å†—ä½™
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ä¼ä¸šåœºæ™¯åº”ç”¨**
- **è¿ç»´ç›‘æ§**ï¼šå®æ—¶æŒæ¡æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
- **æ€§èƒ½è°ƒä¼˜**ï¼šåŸºäºå†å²æ•°æ®æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆ
- **å®¹é‡è§„åˆ’**ï¼šæ ¹æ®ä½¿ç”¨è¶‹åŠ¿é¢„æµ‹èµ„æºéœ€æ±‚
- **æ•…éšœè¯Šæ–­**ï¼šé€šè¿‡æŒ‡æ ‡å˜åŒ–å¿«é€Ÿå®šä½é—®é¢˜

**ğŸ“Š æ•°æ®ç®¡ç†ç­–ç•¥**
- **åˆ†çº§å­˜å‚¨**ï¼šçƒ­æ•°æ®å¿«å­˜å‚¨ï¼Œå†·æ•°æ®æ…¢å­˜å‚¨
- **è‡ªåŠ¨å½’æ¡£**ï¼šæŒ‰æ—¶é—´å‘¨æœŸè‡ªåŠ¨æ•´ç†æ•°æ®
- **å‹ç¼©å­˜å‚¨**ï¼šèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé™ä½æˆæœ¬
- **å¯¼å‡ºæ¥å£**ï¼šæ”¯æŒæ•°æ®åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆ

### 10.4 æœ€ä½³å®è·µæŒ‡å—


**âœ… é‡‡é›†è„šæœ¬ç¼–å†™å»ºè®®**
```
1. é”™è¯¯å¤„ç†ï¼šæ·»åŠ å¼‚å¸¸æƒ…å†µå¤„ç†é€»è¾‘
2. æ—¥å¿—è®°å½•ï¼šè®°å½•é‡‡é›†è¿‡ç¨‹å’Œå¼‚å¸¸ä¿¡æ¯
3. æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡é‡‡é›†ï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°
4. èµ„æºæ§åˆ¶ï¼šé¿å…é‡‡é›†è„šæœ¬æ¶ˆè€—è¿‡å¤šç³»ç»Ÿèµ„æº
```

**âœ… å­˜å‚¨è®¾è®¡åŸåˆ™**
```
1. æ ‡ç­¾è®¾è®¡ï¼šç®€æ´æ˜äº†ï¼Œä¾¿äºæŸ¥è¯¢å’Œèšåˆ
2. æ—¶åºä¼˜åŒ–ï¼šæŒ‰æ—¶é—´åˆ†åŒºå­˜å‚¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡
3. å‹ç¼©ç­–ç•¥ï¼šå†å²æ•°æ®å‹ç¼©å­˜å‚¨
4. å¤‡ä»½æœºåˆ¶ï¼šé‡è¦ç›‘æ§æ•°æ®å¼‚åœ°å¤‡ä»½
```

**âœ… æ•°æ®è´¨é‡ä¿éšœ**
```
1. å®æ—¶éªŒè¯ï¼šæ•°æ®å…¥åº“å‰è¿›è¡Œæ ¼å¼å’ŒèŒƒå›´æ£€æŸ¥
2. å®šæœŸæ¸…ç†ï¼šè‡ªåŠ¨æ¸…ç†å¼‚å¸¸å’Œè¿‡æœŸæ•°æ®
3. è´¨é‡ç›‘æ§ï¼šç›‘æ§æ•°æ®å®Œæ•´æ€§å’Œå‡†ç¡®æ€§
4. å‘Šè­¦æœºåˆ¶ï¼šæ•°æ®è´¨é‡å¼‚å¸¸æ—¶åŠæ—¶é€šçŸ¥
```

### 10.5 ç›‘æ§æŒ‡æ ‡ä½“ç³»å»ºè®¾è·¯çº¿å›¾


**ğŸš€ å®æ–½æ­¥éª¤**
```
ç¬¬1é˜¶æ®µï¼šåŸºç¡€ç›‘æ§ (1-2å‘¨)
- éƒ¨ç½²åŸºæœ¬ç³»ç»ŸæŒ‡æ ‡é‡‡é›†ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰
- å»ºç«‹ç®€å•çš„æ•°æ®å­˜å‚¨æœºåˆ¶
- å®ç°åŸºç¡€çš„æ•°æ®éªŒè¯

ç¬¬2é˜¶æ®µï¼šå®Œå–„ç›‘æ§ (2-3å‘¨)  
- æ·»åŠ ç½‘ç»œå’Œåº”ç”¨æŒ‡æ ‡é‡‡é›†
- å®ç°æ ‡ç­¾åŒ–ç®¡ç†
- å»ºç«‹æ•°æ®è´¨é‡ç›‘æ§

ç¬¬3é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ (3-4å‘¨)
- å®ç°è‡ªåŠ¨åŒ–æ•°æ®å½’æ¡£
- éƒ¨ç½²æ•°æ®å¯¼å‡ºæ¥å£
- å»ºç«‹å®Œæ•´çš„ç›‘æ§Dashboard
```

**ğŸ“Š æˆç†Ÿåº¦è¯„ä¼°**
```
Level 1 - åŸºç¡€çº§ï¼š
âœ“ æœ‰åŸºæœ¬çš„ç³»ç»ŸæŒ‡æ ‡é‡‡é›†
âœ“ æ•°æ®èƒ½æ­£å¸¸å­˜å‚¨å’ŒæŸ¥è¯¢
âœ“ æœ‰ç®€å•çš„å¼‚å¸¸æ£€æµ‹

Level 2 - æ ‡å‡†çº§ï¼š  
âœ“ æŒ‡æ ‡ä½“ç³»å®Œæ•´ï¼Œè¦†ç›–ç³»ç»Ÿå’Œä¸šåŠ¡
âœ“ æ•°æ®è´¨é‡æœ‰ä¿éšœ
âœ“ æ”¯æŒå†å²æ•°æ®åˆ†æ

Level 3 - ä¸“å®¶çº§ï¼š
âœ“ è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼Œè¿ç»´æˆæœ¬ä½
âœ“ æ•°æ®æ²»ç†å®Œå–„ï¼Œæ”¯æŒå¤§æ•°æ®åˆ†æ
âœ“ ä¸å…¶ä»–ç³»ç»Ÿé›†æˆè‰¯å¥½
```

> ğŸ’¡ **å­¦ä¹ å»ºè®®**  
> ç›‘æ§æŒ‡æ ‡é‡‡é›†æ˜¯è¿ç»´çš„åŸºç¡€æŠ€èƒ½ï¼Œå»ºè®®æŒ‰ç…§"ç†è®ºå­¦ä¹  â†’ åŠ¨æ‰‹å®è·µ â†’ ç”Ÿäº§åº”ç”¨"çš„è·¯å¾„é€æ­¥æŒæ¡ã€‚å…ˆç†è§£ç›‘æ§çš„åŸºæœ¬æ¦‚å¿µï¼Œå†é€šè¿‡è„šæœ¬ç»ƒä¹ æŒæ¡é‡‡é›†æŠ€æœ¯ï¼Œæœ€åç»“åˆå®é™…ä¸šåŠ¡éœ€æ±‚è®¾è®¡ç›‘æ§ä½“ç³»ã€‚

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
ğŸ“– ç›‘æ§æŒ‡æ ‡è¦è®°ç‰¢ï¼š
é‡‡é›†å­˜å‚¨éªŒè¯å¥½ï¼Œæ ‡ç­¾ç®¡ç†ä¸èƒ½å°‘
è´¨é‡æ§åˆ¶å¾ˆé‡è¦ï¼Œå½’æ¡£å¯¼å‡ºè¦åšåˆ°  
ç³»ç»Ÿä¸šåŠ¡é½ç›‘æ§ï¼Œè¿ç»´æ— å¿§å¿ƒæƒ…å¥½
```

