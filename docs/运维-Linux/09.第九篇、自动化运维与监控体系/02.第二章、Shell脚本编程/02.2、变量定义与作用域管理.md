---
title: 2ã€å˜é‡å®šä¹‰ä¸ä½œç”¨åŸŸç®¡ç†
---
## ğŸ“š ç›®å½•

1. [Shellå˜é‡åŸºç¡€æ¦‚å¿µ](#1-Shellå˜é‡åŸºç¡€æ¦‚å¿µ)
2. [å˜é‡å®šä¹‰ä¸èµ‹å€¼æ–¹æ³•](#2-å˜é‡å®šä¹‰ä¸èµ‹å€¼æ–¹æ³•)
3. [å˜é‡å‘½åè§„èŒƒä¸æœ€ä½³å®è·µ](#3-å˜é‡å‘½åè§„èŒƒä¸æœ€ä½³å®è·µ)
4. [ç¯å¢ƒå˜é‡ä¸Shellå˜é‡åŒºåˆ«](#4-ç¯å¢ƒå˜é‡ä¸Shellå˜é‡åŒºåˆ«)
5. [å˜é‡ä½œç”¨åŸŸç®¡ç†](#5-å˜é‡ä½œç”¨åŸŸç®¡ç†)
6. [å˜é‡å¼•ç”¨ä¸ä¿æŠ¤æœºåˆ¶](#6-å˜é‡å¼•ç”¨ä¸ä¿æŠ¤æœºåˆ¶)
7. [å˜é‡ç®¡ç†è¿›é˜¶æŠ€å·§](#7-å˜é‡ç®¡ç†è¿›é˜¶æŠ€å·§)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ Shellå˜é‡åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯Shellå˜é‡


**ç®€å•ç†è§£**ï¼šShellå˜é‡å°±åƒæ˜¯ç»™æ•°æ®èµ·ä¸ªåå­—çš„"æ ‡ç­¾"ï¼Œæ–¹ä¾¿æˆ‘ä»¬å­˜å‚¨å’Œä½¿ç”¨ä¿¡æ¯ã€‚

```
æƒ³è±¡ä¸€ä¸‹ï¼š
ä½ æœ‰ä¸€ä¸ªç›’å­ï¼ˆå˜é‡ï¼‰ï¼Œä¸Šé¢è´´ç€æ ‡ç­¾"ç”¨æˆ·å"
ç›’å­é‡Œè£…ç€"å¼ ä¸‰"è¿™ä¸ªå€¼
å½“ä½ éœ€è¦ç”¨æˆ·åæ—¶ï¼Œç›´æ¥æ‰¾åˆ°è¿™ä¸ªç›’å­å°±è¡Œäº†
```

**å˜é‡çš„æœ¬è´¨ä½œç”¨**ï¼š
- **å­˜å‚¨æ•°æ®** - ä¿å­˜æ–‡å­—ã€æ•°å­—ã€è·¯å¾„ç­‰ä¿¡æ¯
- **ä¼ é€’ä¿¡æ¯** - åœ¨è„šæœ¬ä¸åŒéƒ¨åˆ†ä¹‹é—´ä¼ é€’æ•°æ®
- **é…ç½®å‚æ•°** - å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œæ–¹ä¾¿ä¿®æ”¹
- **ç®€åŒ–æ“ä½œ** - é¿å…é‡å¤è¾“å…¥é•¿å­—ç¬¦ä¸²

### 1.2 å˜é‡ä¸å¸¸é‡çš„åŒºåˆ«


| æ¦‚å¿µ | **ç‰¹ç‚¹** | **ä½¿ç”¨åœºæ™¯** | **ç¤ºä¾‹** |
|------|---------|------------|---------|
| ğŸ”„ **å˜é‡** | `å¯ä»¥ä¿®æ”¹å€¼` | `å­˜å‚¨ä¼šå˜åŒ–çš„æ•°æ®` | `å½“å‰ç”¨æˆ·åã€ä¸´æ—¶æ–‡ä»¶è·¯å¾„` |
| ğŸ”’ **å¸¸é‡** | `å€¼ä¸èƒ½æ”¹å˜` | `å­˜å‚¨å›ºå®šä¸å˜çš„æ•°æ®` | `åœ†å‘¨ç‡ã€ç³»ç»Ÿç‰ˆæœ¬å·` |

### 1.3 å˜é‡åœ¨Shellä¸­çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆéœ€è¦å˜é‡ï¼Ÿ**

```bash
# æ²¡æœ‰å˜é‡çš„å†™æ³•ï¼ˆç¹çæ˜“é”™ï¼‰
cp /home/user/documents/important.txt /backup/2024/january/
mv /home/user/documents/important.txt /archive/processed/
chmod 644 /home/user/documents/important.txt

# ä½¿ç”¨å˜é‡çš„å†™æ³•ï¼ˆç®€æ´æ¸…æ™°ï¼‰
file_path="/home/user/documents/important.txt"
cp "$file_path" /backup/2024/january/
mv "$file_path" /archive/processed/
chmod 644 "$file_path"
```

**ä¼˜åŠ¿æ€»ç»“**ï¼š
- âœ… **æé«˜å¯è¯»æ€§** - ä»£ç æ›´å®¹æ˜“ç†è§£
- âœ… **å‡å°‘é”™è¯¯** - åªéœ€ä¿®æ”¹ä¸€å¤„å˜é‡å€¼
- âœ… **ä¾¿äºç»´æŠ¤** - é…ç½®é›†ä¸­ç®¡ç†
- âœ… **å¢å¼ºçµæ´»æ€§** - åŠ¨æ€è°ƒæ•´ç¨‹åºè¡Œä¸º

---

## 2. ğŸ”§ å˜é‡å®šä¹‰ä¸èµ‹å€¼æ–¹æ³•


### 2.1 åŸºæœ¬èµ‹å€¼è¯­æ³•


**æ ¸å¿ƒè§„åˆ™**ï¼š`å˜é‡å=å€¼`ï¼ˆç­‰å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼‰

```bash
# æ­£ç¡®çš„èµ‹å€¼æ–¹å¼
username="å¼ ä¸‰"
age=25
home_dir="/home/zhangsan"

# é”™è¯¯çš„èµ‹å€¼æ–¹å¼ï¼ˆä¼šæŠ¥é”™ï¼‰
username = "å¼ ä¸‰"    # ç­‰å·å‰åæœ‰ç©ºæ ¼
age= 25              # ç­‰å·åæœ‰ç©ºæ ¼
home_dir ="/home"    # ç­‰å·å‰æœ‰ç©ºæ ¼
```

> **ğŸ’¡ è®°å¿†æŠ€å·§**ï¼šæŠŠç­‰å·æƒ³è±¡æˆ"ç´§ç´§è´´ç€"å˜é‡åå’Œå€¼ï¼Œä¸­é—´ä¸èƒ½æœ‰ä»»ä½•ç©ºéš™ã€‚

### 2.2 ä¸åŒç±»å‹æ•°æ®çš„èµ‹å€¼


**æ–‡æœ¬å­—ç¬¦ä¸²èµ‹å€¼**ï¼š
```bash
# ç®€å•å­—ç¬¦ä¸²ï¼ˆæ— ç©ºæ ¼æ— ç‰¹æ®Šå­—ç¬¦ï¼‰
name=zhangsan
city=beijing

# åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼ˆéœ€è¦å¼•å·ï¼‰
full_name="Zhang San"
description='ä¸€ä¸ªæ™®é€šçš„ç”¨æˆ·'

# åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
email="user@example.com"
path="/usr/local/bin"
```

**æ•°å­—èµ‹å€¼**ï¼š
```bash
# æ•´æ•°
count=100
year=2024

# å°æ•°ï¼ˆShellä¸­ä½œä¸ºå­—ç¬¦ä¸²å¤„ç†ï¼‰
price="99.99"
rate="0.05"
```

**è·¯å¾„å’Œæ–‡ä»¶åèµ‹å€¼**ï¼š
```bash
# ç»å¯¹è·¯å¾„
config_file="/etc/nginx/nginx.conf"
log_dir="/var/log/application"

# ç›¸å¯¹è·¯å¾„
backup_dir="./backup"
script_name="$(basename $0)"
```

### 2.3 ç‰¹æ®Šèµ‹å€¼æ–¹å¼


**å‘½ä»¤ç»“æœèµ‹å€¼**ï¼š
```bash
# ä½¿ç”¨åå¼•å·ï¼ˆæ—§æ–¹å¼ï¼‰
current_date=`date +%Y-%m-%d`

# ä½¿ç”¨$()ï¼ˆæ¨èæ–¹å¼ï¼‰
current_user=$(whoami)
file_count=$(ls -1 | wc -l)
```

**ä»å…¶ä»–å˜é‡èµ‹å€¼**ï¼š
```bash
original_path="/home/user"
backup_path="$original_path/backup"
full_backup_path="${backup_path}/$(date +%Y%m%d)"
```

**å¤šè¡Œå­—ç¬¦ä¸²èµ‹å€¼**ï¼š
```bash
# ä½¿ç”¨Hereæ–‡æ¡£
message=$(cat << EOF
æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿ
å½“å‰æ—¶é—´ï¼š$(date)
ç”¨æˆ·ï¼š$(whoami)
EOF
)
```

---

## 3. ğŸ“‹ å˜é‡å‘½åè§„èŒƒä¸æœ€ä½³å®è·µ


### 3.1 å‘½åè§„èŒƒè¯¦è§£


**åŸºæœ¬å‘½åè§„åˆ™**ï¼š

```
âœ… å…è®¸çš„å­—ç¬¦ï¼š
- å­—æ¯ï¼ˆa-z, A-Zï¼‰
- æ•°å­—ï¼ˆ0-9ï¼‰
- ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰

âœ… å‘½åè¦æ±‚ï¼š
- å¿…é¡»ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´
- åŒºåˆ†å¤§å°å†™
- ä¸èƒ½ä½¿ç”¨Shellå…³é”®å­—
```

**æ­£ç¡®ç¤ºä¾‹**ï¼š
```bash
user_name="å¼ ä¸‰"        # ä¸‹åˆ’çº¿åˆ†éš”
userName="æå››"         # é©¼å³°å‘½å
USER_HOME="/home/user"  # å…¨å¤§å†™å¸¸é‡
temp_file123="temp"     # åŒ…å«æ•°å­—
_private_var="éšç§"     # ä¸‹åˆ’çº¿å¼€å¤´
```

**é”™è¯¯ç¤ºä¾‹**ï¼š
```bash
123name="é”™è¯¯"          # æ•°å­—å¼€å¤´
user-name="é”™è¯¯"        # åŒ…å«è¿å­—ç¬¦
user name="é”™è¯¯"        # åŒ…å«ç©ºæ ¼
for="é”™è¯¯"             # ä½¿ç”¨å…³é”®å­—
```

### 3.2 å‘½åé£æ ¼å»ºè®®


**ğŸ¯ æ¨èçš„å‘½åé£æ ¼**ï¼š

| å˜é‡ç±»å‹ | **å‘½åé£æ ¼** | **ç¤ºä¾‹** | **è¯´æ˜** |
|---------|------------|---------|---------|
| ğŸ”„ **æ™®é€šå˜é‡** | `å°å†™+ä¸‹åˆ’çº¿` | `user_name, file_path` | `æ—¥å¸¸ä½¿ç”¨çš„å˜é‡` |
| ğŸŒ **ç¯å¢ƒå˜é‡** | `å…¨å¤§å†™+ä¸‹åˆ’çº¿` | `PATH, HOME, USER_CONFIG` | `ç³»ç»Ÿçº§é…ç½®å˜é‡` |
| ğŸ”’ **å¸¸é‡** | `å…¨å¤§å†™+ä¸‹åˆ’çº¿` | `MAX_SIZE, DEFAULT_PORT` | `ä¸å˜çš„é…ç½®å€¼` |
| ğŸ”§ **ä¸´æ—¶å˜é‡** | `å‰ç¼€+ä¸‹åˆ’çº¿` | `tmp_file, temp_data` | `ä¸´æ—¶å­˜å‚¨çš„æ•°æ®` |

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
```bash
# é…ç½®ç›¸å…³
config_file="/etc/app.conf"
DEFAULT_TIMEOUT=30
MAX_RETRY_COUNT=3

# ç”¨æˆ·ç›¸å…³
current_user=$(whoami)
user_home_dir="$HOME"
USER_SHELL="/bin/bash"

# ä¸´æ—¶æ•°æ®
tmp_backup_dir="/tmp/backup_$$"
temp_log_file="./temp.log"
```

### 3.3 è¯­ä¹‰åŒ–å‘½å


**è®©å˜é‡å"ä¼šè¯´è¯"**ï¼š

```bash
# ä¸å¥½çš„å‘½åï¼ˆçœ‹ä¸å‡ºç”¨é€”ï¼‰
a="config.txt"
x=100
data="/tmp"

# å¥½çš„å‘½åï¼ˆä¸€çœ‹å°±æ‡‚ï¼‰
config_filename="config.txt"
max_connections=100
temp_directory="/tmp"
```

**å¸¸è§åœºæ™¯çš„å‘½åå»ºè®®**ï¼š
```bash
# æ–‡ä»¶å’Œè·¯å¾„
source_file="./input.txt"
target_directory="/backup"
log_file_path="/var/log/app.log"

# è®¡æ•°å’Œæ ‡å¿—
file_count=0
is_debug_mode=true
retry_attempts=3

# æ—¶é—´å’Œæ—¥æœŸ
start_time=$(date +%s)
backup_date=$(date +%Y%m%d)
current_timestamp=$(date)

# ç”¨æˆ·å’Œæƒé™
current_user_id=$(id -u)
admin_email="admin@example.com"
file_permissions="644"
```

---

## 4. ğŸŒ ç¯å¢ƒå˜é‡ä¸Shellå˜é‡åŒºåˆ«


### 4.1 ä¸¤ç§å˜é‡çš„æœ¬è´¨åŒºåˆ«


**ç®€å•ç±»æ¯”**ï¼š
```
Shellå˜é‡ = ä½ æˆ¿é—´é‡Œçš„ä¾¿æ¡çº¸
- åªæœ‰ä½ åœ¨æˆ¿é—´é‡Œæ‰èƒ½çœ‹åˆ°
- å‡ºäº†æˆ¿é—´å°±çœ‹ä¸è§äº†

ç¯å¢ƒå˜é‡ = ä½ éšèº«æºå¸¦çš„èº«ä»½è¯
- èµ°åˆ°å“ªé‡Œéƒ½èƒ½ç”¨
- å…¶ä»–ç¨‹åºä¹Ÿèƒ½çœ‹åˆ°
```

### 4.2 Shellå˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰


**ç‰¹ç‚¹**ï¼šåªåœ¨å½“å‰Shellè¿›ç¨‹ä¸­æœ‰æ•ˆ

```bash
# å®šä¹‰Shellå˜é‡
my_var="hello"
user_name="å¼ ä¸‰"

# æŸ¥çœ‹å˜é‡
echo $my_var        # è¾“å‡ºï¼šhello
echo $user_name     # è¾“å‡ºï¼šå¼ ä¸‰
```

**Shellå˜é‡çš„å±€é™æ€§**ï¼š
```bash
# åœ¨è„šæœ¬ä¸­å®šä¹‰
#!/bin/bash
local_var="æˆ‘æ˜¯å±€éƒ¨å˜é‡"
echo $local_var

# å­è¿›ç¨‹çœ‹ä¸åˆ°è¿™ä¸ªå˜é‡
bash -c 'echo "å­è¿›ç¨‹ä¸­ï¼š$local_var"'    # è¾“å‡ºä¸ºç©º
```

### 4.3 ç¯å¢ƒå˜é‡ï¼ˆå…¨å±€å˜é‡ï¼‰


**ä½¿ç”¨exportå‘½ä»¤å¯¼å‡º**ï¼š
```bash
# å®šä¹‰å¹¶å¯¼å‡ºç¯å¢ƒå˜é‡
export GLOBAL_VAR="æˆ‘æ˜¯ç¯å¢ƒå˜é‡"
export USER_CONFIG="/home/user/.config"

# æˆ–è€…åˆ†ä¸¤æ­¥
MY_PATH="/usr/local/bin"
export MY_PATH
```

**ç¯å¢ƒå˜é‡çš„ä¼ é€’æ€§**ï¼š
```bash
#!/bin/bash
# å¯¼å‡ºç¯å¢ƒå˜é‡
export SHARED_SECRET="abc123"

# å­è¿›ç¨‹èƒ½å¤Ÿè®¿é—®
bash -c 'echo "å­è¿›ç¨‹ä¸­ï¼š$SHARED_SECRET"'    # è¾“å‡ºï¼šå­è¿›ç¨‹ä¸­ï¼šabc123
```

### 4.4 å¸¸ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡


**é‡è¦çš„ç³»ç»Ÿç¯å¢ƒå˜é‡**ï¼š

| å˜é‡å | **å«ä¹‰** | **å…¸å‹å€¼** | **ç”¨é€”** |
|--------|---------|-----------|---------|
| `PATH` | `å¯æ‰§è¡Œæ–‡ä»¶æœç´¢è·¯å¾„` | `/usr/bin:/bin:/usr/local/bin` | `ç³»ç»ŸæŸ¥æ‰¾å‘½ä»¤çš„è·¯å¾„` |
| `HOME` | `ç”¨æˆ·ä¸»ç›®å½•` | `/home/username` | `ç”¨æˆ·ä¸ªäººæ–‡ä»¶å­˜æ”¾ä½ç½®` |
| `USER` | `å½“å‰ç”¨æˆ·å` | `zhangsan` | `æ ‡è¯†å½“å‰ç™»å½•ç”¨æˆ·` |
| `SHELL` | `å½“å‰ä½¿ç”¨çš„Shell` | `/bin/bash` | `ç¡®å®šå‘½ä»¤è§£é‡Šå™¨` |
| `PWD` | `å½“å‰å·¥ä½œç›®å½•` | `/home/user/documents` | `æ ‡è¯†å½“å‰æ‰€åœ¨ä½ç½®` |

**æŸ¥çœ‹ç¯å¢ƒå˜é‡çš„æ–¹æ³•**ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡
env

# æŸ¥çœ‹ç‰¹å®šç¯å¢ƒå˜é‡
echo $HOME
echo $PATH
echo $USER

# æŸ¥çœ‹å˜é‡æ˜¯å¦ä¸ºç¯å¢ƒå˜é‡
export -p | grep VARIABLE_NAME
```

---

## 5. ğŸ­ å˜é‡ä½œç”¨åŸŸç®¡ç†


### 5.1 ä½œç”¨åŸŸæ¦‚å¿µè§£é‡Š


**ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ**
> ä½œç”¨åŸŸå°±åƒæ˜¯å˜é‡çš„"æ´»åŠ¨èŒƒå›´"ï¼Œå°±åƒä½ çš„èº«ä»½è¯åªåœ¨ä¸­å›½æœ‰æ•ˆï¼ŒæŠ¤ç…§åœ¨å…¨ä¸–ç•Œæœ‰æ•ˆä¸€æ ·ã€‚

**Shellä¸­çš„ä½œç”¨åŸŸå±‚æ¬¡**ï¼š
```
å…¨å±€ä½œç”¨åŸŸï¼ˆç¯å¢ƒå˜é‡ï¼‰
    â†“
Shellä½œç”¨åŸŸï¼ˆå½“å‰Shellï¼‰
    â†“
å‡½æ•°ä½œç”¨åŸŸï¼ˆå‡½æ•°å†…éƒ¨ï¼‰
    â†“
ä»£ç å—ä½œç”¨åŸŸï¼ˆç‰¹å®šåŒºå—ï¼‰
```

### 5.2 å…¨å±€å˜é‡ä¸å±€éƒ¨å˜é‡


**å…¨å±€å˜é‡ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash

# å…¨å±€å˜é‡å®šä¹‰
GLOBAL_CONFIG="/etc/app.conf"
export GLOBAL_USER="admin"

function show_globals() {
    echo "å‡½æ•°ä¸­è®¿é—®å…¨å±€å˜é‡ï¼š"
    echo "é…ç½®æ–‡ä»¶ï¼š$GLOBAL_CONFIG"
    echo "å…¨å±€ç”¨æˆ·ï¼š$GLOBAL_USER"
}

show_globals
```

**å±€éƒ¨å˜é‡çš„é‡è¦æ€§**ï¼š
```bash
#!/bin/bash

counter=0  # å…¨å±€è®¡æ•°å™¨

function increment_counter() {
    local temp_value=5  # å±€éƒ¨å˜é‡
    counter=$((counter + temp_value))
    echo "å‡½æ•°å†…è®¡æ•°å™¨ï¼š$counter"
    echo "ä¸´æ—¶å€¼ï¼š$temp_value"
}

increment_counter
echo "å‡½æ•°å¤–è®¡æ•°å™¨ï¼š$counter"
echo "å‡½æ•°å¤–ä¸´æ—¶å€¼ï¼š$temp_value"  # è¿™é‡Œæ˜¯ç©ºçš„
```

### 5.3 å‡½æ•°å†…å˜é‡ä½œç”¨åŸŸ


**localå…³é”®å­—çš„ä½¿ç”¨**ï¼š
```bash
#!/bin/bash

name="å…¨å±€å¼ ä¸‰"

function test_scope() {
    local name="å±€éƒ¨æå››"  # å±€éƒ¨å˜é‡
    local age=25           # å±€éƒ¨å˜é‡
    
    echo "å‡½æ•°å†…å§“åï¼š$name"
    echo "å‡½æ•°å†…å¹´é¾„ï¼š$age"
    
    # ä¿®æ”¹å…¨å±€å˜é‡
    global_counter=$((global_counter + 1))
}

global_counter=0
test_scope

echo "å‡½æ•°å¤–å§“åï¼š$name"        # è¾“å‡ºï¼šå…¨å±€å¼ ä¸‰
echo "å‡½æ•°å¤–å¹´é¾„ï¼š$age"         # è¾“å‡ºï¼šç©ºï¼ˆå±€éƒ¨å˜é‡ï¼‰
echo "å…¨å±€è®¡æ•°å™¨ï¼š$global_counter"  # è¾“å‡ºï¼š1
```

### 5.4 å˜é‡ä½œç”¨åŸŸæœ€ä½³å®è·µ


**ğŸ¯ ä½œç”¨åŸŸç®¡ç†åŸåˆ™**ï¼š

```bash
#!/bin/bash

# 1. å…¨å±€é…ç½®å˜é‡ï¼ˆå¤§å†™ï¼‰
SCRIPT_NAME="$(basename $0)"
LOG_FILE="/var/log/${SCRIPT_NAME}.log"
export DEBUG_MODE=false

# 2. å‡½æ•°ä½¿ç”¨å±€éƒ¨å˜é‡
function process_file() {
    local input_file="$1"      # å‚æ•°ä½œä¸ºå±€éƒ¨å˜é‡
    local temp_file            # å£°æ˜å±€éƒ¨å˜é‡
    local line_count
    
    # æ£€æŸ¥è¾“å…¥
    if [[ ! -f "$input_file" ]]; then
        echo "é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨" >&2
        return 1
    fi
    
    # å¤„ç†é€»è¾‘
    temp_file="/tmp/process_$$"
    line_count=$(wc -l < "$input_file")
    
    echo "å¤„ç†æ–‡ä»¶ï¼š$input_file"
    echo "è¡Œæ•°ï¼š$line_count"
}

# 3. ä¸»ç¨‹åºé€»è¾‘
main() {
    local config_file="./config.txt"
    
    if process_file "$config_file"; then
        echo "å¤„ç†æˆåŠŸ"
    else
        echo "å¤„ç†å¤±è´¥"
        exit 1
    fi
}

main "$@"
```

---

## 6. ğŸ›¡ï¸ å˜é‡å¼•ç”¨ä¸ä¿æŠ¤æœºåˆ¶


### 6.1 å˜é‡å¼•ç”¨çš„åŸºæœ¬æ–¹æ³•


**åŸºæœ¬å¼•ç”¨è¯­æ³•**ï¼š
```bash
name="å¼ ä¸‰"

# åŸºæœ¬å¼•ç”¨
echo $name          # è¾“å‡ºï¼šå¼ ä¸‰
echo ${name}        # è¾“å‡ºï¼šå¼ ä¸‰ï¼ˆæ¨èï¼‰

# ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨èŠ±æ‹¬å·ï¼Ÿ
echo $nameage       # é”™è¯¯ï¼šä¼šæŸ¥æ‰¾nameageå˜é‡
echo ${name}age     # æ­£ç¡®ï¼šè¾“å‡º"å¼ ä¸‰age"
```

**å¤æ‚å¼•ç”¨åœºæ™¯**ï¼š
```bash
#!/bin/bash

prefix="file"
suffix="txt"
number=1

# æ„å»ºæ–‡ä»¶å
filename="${prefix}_${number}.${suffix}"
echo $filename    # è¾“å‡ºï¼šfile_1.txt

# è·¯å¾„æ‹¼æ¥
base_dir="/home/user"
sub_dir="documents"
full_path="${base_dir}/${sub_dir}/${filename}"
echo $full_path   # è¾“å‡ºï¼š/home/user/documents/file_1.txt
```

### 6.2 åŒå¼•å·ä¿æŠ¤æœºåˆ¶


**ä¸ºä»€ä¹ˆéœ€è¦åŒå¼•å·ä¿æŠ¤ï¼Ÿ**

```bash
# åŒ…å«ç©ºæ ¼çš„å˜é‡
file_name="my document.txt"

# ä¸ä½¿ç”¨å¼•å·çš„é—®é¢˜
cp $file_name backup/           # é”™è¯¯ï¼šä¼šè¢«è§£é‡Šä¸ºä¸¤ä¸ªå‚æ•°
# ç›¸å½“äºï¼šcp my document.txt backup/

# ä½¿ç”¨åŒå¼•å·ä¿æŠ¤
cp "$file_name" backup/         # æ­£ç¡®ï¼šä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’
```

**åŒå¼•å· vs å•å¼•å·çš„åŒºåˆ«**ï¼š
```bash
name="å¼ ä¸‰"
age=25

# åŒå¼•å·ï¼šå…è®¸å˜é‡æ‰©å±•
message="ç”¨æˆ· $name ä»Šå¹´ $age å²"
echo "$message"    # è¾“å‡ºï¼šç”¨æˆ· å¼ ä¸‰ ä»Šå¹´ 25 å²

# å•å¼•å·ï¼šé˜»æ­¢å˜é‡æ‰©å±•
literal='ç”¨æˆ· $name ä»Šå¹´ $age å²'
echo "$literal"    # è¾“å‡ºï¼šç”¨æˆ· $name ä»Šå¹´ $age å²
```

### 6.3 ç‰¹æ®Šå­—ç¬¦çš„å¤„ç†


**è½¬ä¹‰å­—ç¬¦çš„ä½¿ç”¨**ï¼š
```bash
# åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å˜é‡
price="$100"           # é”™è¯¯ï¼š$1 ä¼šè¢«è§£é‡Šä¸ºä½ç½®å‚æ•°
price="\$100"          # æ­£ç¡®ï¼šè½¬ä¹‰ç¾å…ƒç¬¦å·
price='$100'           # æ­£ç¡®ï¼šå•å¼•å·é˜»æ­¢è§£æ

# åŒ…å«å¼•å·çš„å­—ç¬¦ä¸²
message="ä»–è¯´ï¼š\"ä½ å¥½\""              # è½¬ä¹‰åŒå¼•å·
message='ä»–è¯´ï¼š"ä½ å¥½"'               # ä½¿ç”¨å•å¼•å·åŒ…å«åŒå¼•å·
message="ä»–è¯´ï¼š'ä½ å¥½'"               # ä½¿ç”¨åŒå¼•å·åŒ…å«å•å¼•å·
```

### 6.4 å˜é‡å¼•ç”¨å®‰å…¨å®è·µ


**é˜²æ­¢æ³¨å…¥æ”»å‡»**ï¼š
```bash
#!/bin/bash

# ç”¨æˆ·è¾“å…¥
read -p "è¯·è¾“å…¥æ–‡ä»¶åï¼š" user_input

# ä¸å®‰å…¨çš„åšæ³•
# rm $user_input  # å±é™©ï¼šå¦‚æœè¾“å…¥æ˜¯ "file.txt; rm -rf /"

# å®‰å…¨çš„åšæ³•
if [[ "$user_input" =~ ^[a-zA-Z0-9._-]+$ ]]; then
    rm "$user_input"
else
    echo "é”™è¯¯ï¼šæ–‡ä»¶ååŒ…å«éæ³•å­—ç¬¦" >&2
    exit 1
fi
```

**å‚æ•°éªŒè¯å’Œé»˜è®¤å€¼**ï¼š
```bash
#!/bin/bash

# è®¾ç½®é»˜è®¤å€¼
config_dir="${CONFIG_DIR:-/etc/app}"
debug_mode="${DEBUG:-false}"
max_retries="${MAX_RETRIES:-3}"

# éªŒè¯å¿…éœ€å‚æ•°
if [[ -z "$REQUIRED_PARAM" ]]; then
    echo "é”™è¯¯ï¼šç¼ºå°‘å¿…éœ€å‚æ•° REQUIRED_PARAM" >&2
    exit 1
fi

echo "é…ç½®ç›®å½•ï¼š$config_dir"
echo "è°ƒè¯•æ¨¡å¼ï¼š$debug_mode"
echo "æœ€å¤§é‡è¯•ï¼š$max_retries"
```

---

## 7. ğŸš€ å˜é‡ç®¡ç†è¿›é˜¶æŠ€å·§


### 7.1 readonlyåªè¯»å˜é‡


**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨åªè¯»å˜é‡ï¼Ÿ**
> å½“ä½ æœ‰ä¸€äº›é‡è¦çš„é…ç½®ï¼Œä¸å¸Œæœ›åœ¨è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«æ„å¤–ä¿®æ”¹æ—¶ã€‚

```bash
#!/bin/bash

# å®šä¹‰åªè¯»å¸¸é‡
readonly SCRIPT_VERSION="1.0.0"
readonly MAX_FILE_SIZE=1048576  # 1MB
readonly readonly CONFIG_FILE="/etc/app.conf"

# å°è¯•ä¿®æ”¹åªè¯»å˜é‡ï¼ˆä¼šæŠ¥é”™ï¼‰
# SCRIPT_VERSION="2.0.0"  # bash: SCRIPT_VERSION: readonly variable

# æŸ¥çœ‹åªè¯»å˜é‡
readonly -p | grep SCRIPT_VERSION

echo "è„šæœ¬ç‰ˆæœ¬ï¼š$SCRIPT_VERSION"
echo "æœ€å¤§æ–‡ä»¶å¤§å°ï¼š$MAX_FILE_SIZE bytes"
```

**åªè¯»å˜é‡çš„æœ€ä½³å®è·µ**ï¼š
```bash
#!/bin/bash

# åœ¨è„šæœ¬å¼€å¤´å®šä¹‰åªè¯»é…ç½®
readonly SCRIPT_NAME="$(basename $0)"
readonly LOG_DIR="/var/log"
readonly PID_FILE="/var/run/${SCRIPT_NAME}.pid"
readonly LOCK_FILE="/tmp/${SCRIPT_NAME}.lock"

# åªè¯»æ•°ç»„
readonly -a VALID_ACTIONS=("start" "stop" "restart" "status")

function validate_action() {
    local action="$1"
    local valid_action
    
    for valid_action in "${VALID_ACTIONS[@]}"; do
        if [[ "$action" == "$valid_action" ]]; then
            return 0
        fi
    done
    
    echo "é”™è¯¯ï¼šæ— æ•ˆçš„æ“ä½œ '$action'" >&2
    echo "æœ‰æ•ˆæ“ä½œï¼š${VALID_ACTIONS[*]}" >&2
    return 1
}
```

### 7.2 unsetå–æ¶ˆå˜é‡å®šä¹‰


**ä»€ä¹ˆæ—¶å€™éœ€è¦å–æ¶ˆå˜é‡ï¼Ÿ**
- æ¸…ç†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰
- é‡Šæ”¾å¤§é‡æ•°æ®å ç”¨çš„å†…å­˜
- é‡ç½®å˜é‡çŠ¶æ€

```bash
#!/bin/bash

# å®šä¹‰å˜é‡
password="secret123"
temp_data="å¤§é‡ä¸´æ—¶æ•°æ®..."
user_token="abc123xyz"

# ä½¿ç”¨å˜é‡
echo "éªŒè¯å¯†ç ï¼š$password"

# æ¸…ç†æ•æ„Ÿä¿¡æ¯
unset password
unset user_token

# éªŒè¯å˜é‡å·²è¢«åˆ é™¤
if [[ -z "$password" ]]; then
    echo "å¯†ç å·²å®‰å…¨æ¸…é™¤"
fi

# æ¸…ç†ä¸´æ—¶æ•°æ®
unset temp_data
```

**unsetçš„é«˜çº§ç”¨æ³•**ï¼š
```bash
#!/bin/bash

# æ•°ç»„å˜é‡
declare -a files=("file1.txt" "file2.txt" "file3.txt")
echo "æ–‡ä»¶æ•°ç»„ï¼š${files[@]}"

# åˆ é™¤æ•°ç»„ä¸­çš„ç‰¹å®šå…ƒç´ 
unset files[1]  # åˆ é™¤ç¬¬äºŒä¸ªå…ƒç´ 
echo "åˆ é™¤åï¼š${files[@]}"

# å®Œå…¨åˆ é™¤æ•°ç»„
unset files
echo "æ•°ç»„å·²åˆ é™¤ï¼š${files[@]}"  # è¾“å‡ºä¸ºç©º

# å‡½æ•°ä¹Ÿå¯ä»¥è¢«unset
function temp_function() {
    echo "è¿™æ˜¯ä¸´æ—¶å‡½æ•°"
}

temp_function      # è°ƒç”¨æˆåŠŸ
unset -f temp_function
# temp_function    # è°ƒç”¨å¤±è´¥ï¼šå‘½ä»¤æœªæ‰¾åˆ°
```

### 7.3 å˜é‡çš„é—´æ¥å¼•ç”¨


**åŠ¨æ€å˜é‡åçš„ä½¿ç”¨**ï¼š
```bash
#!/bin/bash

# å®šä¹‰å¤šä¸ªç›¸ä¼¼å˜é‡
server1_ip="192.168.1.10"
server2_ip="192.168.1.11"
server3_ip="192.168.1.12"

# åŠ¨æ€è·å–å˜é‡å€¼
function get_server_ip() {
    local server_num="$1"
    local var_name="server${server_num}_ip"
    
    # é—´æ¥å¼•ç”¨
    local ip="${!var_name}"
    echo "$ip"
}

# ä½¿ç”¨ç¤ºä¾‹
for i in {1..3}; do
    ip=$(get_server_ip $i)
    echo "æœåŠ¡å™¨ $i çš„IPï¼š$ip"
done
```

### 7.4 å˜é‡çš„æ¡ä»¶èµ‹å€¼


**çµæ´»çš„å˜é‡èµ‹å€¼æŠ€å·§**ï¼š
```bash
#!/bin/bash

# è®¾ç½®é»˜è®¤å€¼ï¼ˆå¦‚æœå˜é‡ä¸ºç©ºæˆ–æœªå®šä¹‰ï¼‰
config_file="${CONFIG_FILE:-/etc/default.conf}"
debug_mode="${DEBUG_MODE:-false}"
log_level="${LOG_LEVEL:-INFO}"

# ä»…åœ¨å˜é‡æœªå®šä¹‰æ—¶èµ‹å€¼
: ${TEMP_DIR:=/tmp}
: ${MAX_CONNECTIONS:=100}

# æ¡ä»¶èµ‹å€¼çš„å®é™…åº”ç”¨
function setup_environment() {
    # å¼€å‘ç¯å¢ƒé»˜è®¤å€¼
    : ${DB_HOST:=localhost}
    : ${DB_PORT:=3306}
    : ${DB_NAME:=test_db}
    
    # ç”Ÿäº§ç¯å¢ƒä¼šé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–
    if [[ "$ENVIRONMENT" == "production" ]]; then
        : ${DB_HOST:=prod-db.example.com}
        : ${DB_NAME:=prod_db}
    fi
    
    echo "æ•°æ®åº“é…ç½®ï¼š"
    echo "  ä¸»æœºï¼š$DB_HOST"
    echo "  ç«¯å£ï¼š$DB_PORT"  
    echo "  æ•°æ®åº“ï¼š$DB_NAME"
}

setup_environment
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å˜é‡å®šä¹‰ï¼švar=valueï¼ˆæ— ç©ºæ ¼ï¼‰ï¼Œç”¨äºå­˜å‚¨æ•°æ®
ğŸ”¸ å˜é‡å¼•ç”¨ï¼š$var æˆ– ${var}ï¼Œæ¨èä½¿ç”¨èŠ±æ‹¬å·
ğŸ”¸ ä½œç”¨åŸŸï¼šlocalï¼ˆå‡½æ•°å†…ï¼‰vs å…¨å±€å˜é‡çš„åŒºåˆ«
ğŸ”¸ ç¯å¢ƒå˜é‡ï¼šexportå¯¼å‡ºï¼Œå¯ä¼ é€’ç»™å­è¿›ç¨‹
ğŸ”¸ å¼•ç”¨ä¿æŠ¤ï¼šåŒå¼•å·é˜²æ­¢æ„å¤–åˆ†å‰²å’Œæ‰©å±•
ğŸ”¸ åªè¯»å˜é‡ï¼šreadonlyé˜²æ­¢æ„å¤–ä¿®æ”¹
ğŸ”¸ å˜é‡æ¸…ç†ï¼šunseté‡Šæ”¾å˜é‡å’Œæ•æ„Ÿæ•°æ®
```

### 8.2 å˜é‡ä½¿ç”¨æœ€ä½³å®è·µ


**å‘½åè§„èŒƒ**ï¼š
- âœ… ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å
- âœ… å¸¸é‡ç”¨å¤§å†™ï¼Œå˜é‡ç”¨å°å†™
- âœ… å¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥
- âœ… é¿å…ä½¿ç”¨ç³»ç»Ÿä¿ç•™å­—

**å®‰å…¨å®è·µ**ï¼š
- âœ… æ€»æ˜¯ç”¨åŒå¼•å·åŒ…å›´å˜é‡å¼•ç”¨
- âœ… éªŒè¯ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢æ³¨å…¥
- âœ… åŠæ—¶æ¸…ç†æ•æ„Ÿä¿¡æ¯
- âœ… ä½¿ç”¨localé™åˆ¶å‡½æ•°å†…å˜é‡ä½œç”¨åŸŸ

**æ€§èƒ½è€ƒè™‘**ï¼š
- âœ… é¿å…ä¸å¿…è¦çš„å˜é‡åˆ›å»º
- âœ… åŠæ—¶unsetå¤§å‹å˜é‡
- âœ… åˆç†ä½¿ç”¨åªè¯»å˜é‡ä¿æŠ¤é…ç½®

### 8.3 å¸¸è§é”™è¯¯ä¸é¿å…æ–¹æ³•


**âŒ å¸¸è§é”™è¯¯**ï¼š
```bash
# èµ‹å€¼æ—¶æ·»åŠ ç©ºæ ¼
var = "value"          # é”™è¯¯

# ä¸ä½¿ç”¨å¼•å·ä¿æŠ¤
cp $file_name backup   # å±é™©

# åœ¨å‡½æ•°ä¸­ä¸ä½¿ç”¨local
function test() {
    temp=123           # æ±¡æŸ“å…¨å±€ç©ºé—´
}

# å¿˜è®°å¤„ç†ç‰¹æ®Šå­—ç¬¦
echo $path            # å¯èƒ½å‡ºé”™
```

**âœ… æ­£ç¡®åšæ³•**ï¼š
```bash
# æ­£ç¡®èµ‹å€¼
var="value"

# å®‰å…¨å¼•ç”¨
cp "$file_name" backup

# ä½¿ç”¨å±€éƒ¨å˜é‡
function test() {
    local temp=123
}

# å®‰å…¨å¤„ç†
echo "$path"
[[ "$input" =~ ^[a-zA-Z0-9]+$ ]] && process "$input"
```

### 8.4 å®é™…åº”ç”¨æŒ‡å¯¼


**é…ç½®ç®¡ç†**ï¼š
```bash
# é›†ä¸­é…ç½®
readonly APP_NAME="MyApp"
readonly VERSION="1.0.0"
readonly CONFIG_DIR="/etc/${APP_NAME}"
readonly LOG_FILE="/var/log/${APP_NAME}.log"

# ç¯å¢ƒç›¸å…³é…ç½®
export PATH="/usr/local/bin:$PATH"
export LANG="zh_CN.UTF-8"
```

**è„šæœ¬æ¨¡æ¿**ï¼š
```bash
#!/bin/bash
set -euo pipefail

# è„šæœ¬é…ç½®
readonly SCRIPT_NAME="$(basename $0)"
readonly SCRIPT_DIR="$(dirname $0)"
readonly PID_FILE="/var/run/${SCRIPT_NAME}.pid"

# é»˜è®¤å‚æ•°
DEBUG_MODE="${DEBUG_MODE:-false}"
LOG_LEVEL="${LOG_LEVEL:-INFO}"

# ä¸»å‡½æ•°
main() {
    local action="${1:-help}"
    
    case "$action" in
        start|stop|restart|status)
            handle_action "$action"
            ;;
        *)
            show_usage
            exit 1
            ;;
    esac
}

main "$@"
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å˜é‡æ˜¯æ•°æ®çš„æ ‡ç­¾ï¼Œæ–¹ä¾¿å­˜å‚¨å’Œä¼ é€’ä¿¡æ¯
- èµ‹å€¼æ— ç©ºæ ¼ï¼Œå¼•ç”¨åŠ èŠ±æ‹¬å·ï¼Œå†…å®¹ç”¨åŒå¼•å·
- localç®¡ä½œç”¨åŸŸï¼Œexportä¼ å­è¿›ç¨‹ï¼Œreadonlyä¿å®‰å…¨
- è§„èŒƒå‘½åå¢å¯è¯»ï¼ŒåŠæ—¶æ¸…ç†ä¿æ€§èƒ½