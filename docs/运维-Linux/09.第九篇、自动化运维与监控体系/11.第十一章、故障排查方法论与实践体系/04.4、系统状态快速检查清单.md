---
title: 4、系统状态快速检查清单
---
## 📚 目录

1. [系统检查概述](#1-系统检查概述)
2. [CPU与系统负载检查](#2-CPU与系统负载检查)
3. [内存状态检查](#3-内存状态检查)
4. [磁盘空间与IO检查](#4-磁盘空间与IO检查)
5. [网络连通性检查](#5-网络连通性检查)
6. [进程与服务状态检查](#6-进程与服务状态检查)
7. [文件系统挂载检查](#7-文件系统挂载检查)
8. [系统日志与内核消息检查](#8-系统日志与内核消息检查)
9. [用户连接与权限检查](#9-用户连接与权限检查)
10. [系统时间与同步检查](#10-系统时间与同步检查)
11. [快速检查脚本](#11-快速检查脚本)
12. [核心要点总结](#12-核心要点总结)

---

## 1. 🔍 系统检查概述


### 1.1 系统状态检查的重要性


**为什么要做系统检查？**
- **预防故障**：提前发现潜在问题，避免系统崩溃
- **性能优化**：找出性能瓶颈，优化系统运行效率
- **故障定位**：快速找出问题根源，缩短故障恢复时间
- **资源管理**：合理分配系统资源，避免资源浪费

### 1.2 系统检查四大核心资源


```
Linux系统资源检查框架：
┌─────────────────────┐
│      系统资源       │
├─────────────────────┤
│ CPU  │ 处理器使用率 │ ← 计算资源
├─────────────────────┤
│ 内存 │ 物理/虚拟内存│ ← 存储资源
├─────────────────────┤
│ 磁盘 │ 存储空间/IO  │ ← 持久化资源
├─────────────────────┤
│ 网络 │ 连通性/带宽  │ ← 通信资源
└─────────────────────┘
```

### 1.3 系统检查基本原则


> 💡 **检查原则**：从整体到局部，从关键到次要

**🔸 检查顺序**：
1. **全局状态**：系统整体运行状况
2. **资源使用**：CPU、内存、磁盘、网络
3. **进程服务**：关键服务运行状态
4. **日志分析**：系统错误和警告信息

---

## 2. 💻 CPU与系统负载检查


### 2.1 系统负载快速查看


**什么是系统负载？**
系统负载指的是**正在运行和等待运行的进程数量**，反映系统繁忙程度。

**🔸 负载查看命令**：
```bash
# 查看系统负载和运行时间
uptime

# 输出示例：
# 15:30:01 up 10 days, 2:15, 3 users, load average: 0.15, 0.10, 0.05
```

**负载数值含义**：
- **三个数值**：1分钟、5分钟、15分钟平均负载
- **负载标准**：
  - `负载 < CPU核数`：系统运行正常
  - `负载 = CPU核数`：系统满载运行
  - `负载 > CPU核数`：系统过载，有进程在等待

### 2.2 CPU使用率详细检查


```bash
# 实时查看CPU使用情况
top

# 查看所有CPU核心使用率
htop  # 需要安装：yum install htop

# 查看CPU详细信息
cat /proc/cpuinfo | grep "model name" | head -1
cat /proc/cpuinfo | grep processor | wc -l  # CPU核心数
```

**CPU状态指标解读**：
```
top命令输出解读：
%Cpu(s): 10.2 us, 3.1 sy, 0.0 ni, 85.8 id, 0.7 wa, 0.0 hi, 0.2 si

us (用户态): 用户进程占用CPU百分比
sy (系统态): 内核进程占用CPU百分比  
ni (nice值): 低优先级进程占用CPU百分比
id (空闲): CPU空闲百分比
wa (等待): 等待IO完成占用CPU百分比
hi (硬中断): 硬件中断占用CPU百分比
si (软中断): 软件中断占用CPU百分比
```

### 2.3 进程CPU占用检查


```bash
# 按CPU使用率排序显示进程
ps aux --sort=-%cpu | head -10

# 查看特定进程CPU使用
pidstat -u 1 3  # 需要安装sysstat包

# 查看CPU密集型进程
ps -eo pid,ppid,cmd,%cpu --sort=-%cpu | head -10
```

---

## 3. 🧠 内存状态检查


### 3.1 内存使用概况


**什么是系统内存？**
- **物理内存(RAM)**：真实的内存硬件
- **虚拟内存(Swap)**：硬盘上的交换空间
- **缓存(Cache)**：系统用于加速的内存区域
- **缓冲区(Buffer)**：磁盘IO缓冲使用的内存

```bash
# 查看内存使用情况
free -h

# 输出示例：
#                total    used    free   shared  buff/cache   available
# Mem:           7.8G     2.1G    3.2G    234M      2.5G       5.1G
# Swap:          2.0G     0B      2.0G
```

**内存指标含义**：
- **total**：总物理内存
- **used**：已使用内存（不含缓存）
- **free**：完全空闲内存
- **available**：可用内存（包含可释放的缓存）
- **buff/cache**：用于缓存的内存

### 3.2 内存使用详细分析


```bash
# 查看内存详细信息
cat /proc/meminfo

# 查看内存占用最大的进程
ps aux --sort=-%mem | head -10

# 实时监控内存使用
vmstat 1 5
```

**内存使用判断标准**：
> ⚠️ **内存告警标准**：
> - `available < 10%`：内存严重不足
> - `swap使用 > 50%`：内存压力大
> - `available < 20%`：需要关注内存使用

### 3.3 Swap交换空间检查


```bash
# 查看swap使用情况
swapon -s

# 查看swap详细信息  
cat /proc/swaps

# 临时清理swap（谨慎使用）
# swapoff -a && swapon -a
```

---

## 4. 💾 磁盘空间与IO检查


### 4.1 磁盘空间检查


**磁盘空间不足的危害**：
- **系统崩溃**：根分区空间不足导致系统无法启动
- **日志丢失**：无法写入新的日志信息
- **服务停止**：应用无法创建临时文件

```bash
# 查看磁盘空间使用情况
df -h

# 输出示例：
# 文件系统      容量  已用  可用 使用% 挂载点
# /dev/sda1      20G  8.5G   11G   45% /
# /dev/sda2     100G   78G   17G   83% /home

# 查看当前目录大小
du -sh

# 查找大文件（大于100M）
find / -size +100M -type f 2>/dev/null | head -10
```

**磁盘空间告警标准**：
> 🔴 **严重告警**：使用率 > 95%
> 🟡 **预警**：使用率 > 85%
> 🟢 **正常**：使用率 < 80%

### 4.2 磁盘IO性能检查


```bash
# 查看磁盘IO统计
iostat -x 1 3

# 查看实时磁盘IO
iotop  # 需要安装

# 查看磁盘IO等待进程
ps aux | awk '$8 ~ /^D/ { print $0 }'
```

**磁盘IO指标解读**：
```
iostat输出关键指标：
%util: 磁盘利用率，接近100%说明磁盘忙
await: 平均等待时间，过高说明IO慢
r/s, w/s: 每秒读写次数
rkB/s, wkB/s: 每秒读写数据量
```

### 4.3 文件系统检查


```bash
# 查看文件系统类型
mount | grep "^/dev"

# 检查文件系统错误
fsck -n /dev/sda1  # -n参数表示只检查不修复

# 查看inode使用情况
df -i
```

---

## 5. 🌐 网络连通性检查


### 5.1 网络接口状态检查


**网络接口是什么？**
网络接口就是系统的**网卡**，负责数据收发，每个接口有自己的IP地址。

```bash
# 查看网络接口配置
ip addr show
# 或者使用传统命令
ifconfig

# 查看网络接口统计
ip -s link

# 查看路由表
ip route show
# 或者
route -n
```

**网络接口状态含义**：
- **UP**：接口启动状态
- **DOWN**：接口关闭状态
- **RUNNING**：接口正在运行
- **MTU**：最大传输单元大小

### 5.2 网络连通性测试


```bash
# 测试网络连通性
ping -c 4 8.8.8.8

# 测试DNS解析
nslookup www.baidu.com
# 或者
dig www.baidu.com

# 测试端口连通性
telnet 192.168.1.1 80
# 或者使用nc命令
nc -zv 192.168.1.1 80
```

### 5.3 端口和连接检查


```bash
# 查看监听端口
ss -tuln
# 或者
netstat -tuln

# 查看进程监听的端口
ss -tulnp | grep :80

# 查看网络连接数
ss -s

# 查看established连接
ss -ant | grep ESTABLISHED | wc -l
```

**常见网络问题排查**：
> 💡 **网络问题排查思路**：
> 1. 检查网卡是否UP
> 2. 检查IP地址配置
> 3. 测试网关连通性
> 4. 测试DNS解析
> 5. 检查防火墙规则

---

## 6. 🔧 进程与服务状态检查


### 6.1 系统进程状态检查


**什么是进程？**
进程就是**正在运行的程序**，每个进程都有唯一的进程号(PID)。

```bash
# 查看所有进程
ps aux

# 查看进程树结构
pstree

# 查看系统进程数
ps aux | wc -l

# 查看僵尸进程
ps aux | grep -w Z
```

**进程状态含义**：
```
进程状态标识：
R (Running): 正在运行或等待运行
S (Sleeping): 可中断睡眠
D (Disk): 不可中断睡眠，通常是等待IO
Z (Zombie): 僵尸进程，已终止但父进程未回收
T (sTopbed): 进程被停止
```

### 6.2 系统服务状态检查


**systemd服务管理**：
```bash
# 查看所有服务状态
systemctl list-units --type=service

# 查看失败的服务
systemctl --failed

# 查看特定服务状态
systemctl status nginx

# 查看服务是否开机启动
systemctl is-enabled nginx
```

**传统服务检查**：
```bash
# 查看运行级别
runlevel

# 查看传统服务状态
service --status-all

# 检查特定服务
service httpd status
```

### 6.3 资源占用TOP进程


```bash
# 查看CPU占用最高的进程
ps aux --sort=-%cpu | head -5

# 查看内存占用最高的进程  
ps aux --sort=-%mem | head -5

# 实时监控系统资源
top -p $(pgrep -d, -f "进程名")
```

---

## 7. 📁 文件系统挂载检查


### 7.1 文件系统挂载状态


**什么是挂载？**
挂载就是把**存储设备连接到目录树**的过程，让系统能够访问设备上的文件。

```bash
# 查看当前挂载情况
mount | column -t

# 查看挂载点使用情况
df -hT

# 查看/etc/fstab配置
cat /etc/fstab
```

### 7.2 挂载点异常检查


```bash
# 检查是否有只读挂载
mount | grep ro,

# 检查挂载点权限
ls -ld /mnt /media

# 查看挂载失败信息
dmesg | grep -i mount

# 手动挂载测试
mount -o remount,rw /
```

**常见挂载问题**：
> ⚠️ **挂载问题类型**：
> - **只读挂载**：文件系统变为只读模式
> - **挂载失败**：设备无法挂载到指定目录
> - **权限问题**：挂载后无法访问文件
> - **空间不足**：目标设备空间不足

### 7.3 特殊文件系统检查


```bash
# 查看tmpfs使用情况
df -h | grep tmpfs

# 查看proc和sys文件系统
mount | grep -E "(proc|sys|dev)"

# 检查NFS挂载
mount | grep nfs
showmount -e localhost  # 查看NFS导出
```

---

## 8. 📋 系统日志与内核消息检查


### 8.1 系统日志快速检查


**系统日志的作用**：
- **记录系统事件**：启动、关闭、错误等
- **应用日志**：服务运行状态和错误
- **安全日志**：登录、权限变更等
- **内核消息**：硬件和驱动问题

```bash
# 查看系统日志最新信息
tail -f /var/log/messages

# 查看启动日志
journalctl -b

# 查看特定服务日志
journalctl -u nginx.service

# 查看错误日志
grep -i error /var/log/messages | tail -10
```

### 8.2 内核消息检查


```bash
# 查看内核环形缓冲区消息
dmesg | tail -20

# 查看最近的内核错误
dmesg | grep -i error

# 查看硬件相关消息
dmesg | grep -i "hardware\|disk\|memory"

# 持续监控内核消息
dmesg -w
```

### 8.3 关键日志文件位置


| 日志文件 | **内容说明** | **检查命令** |
|---------|-------------|-------------|
| `/var/log/messages` | `系统主日志` | `tail -f /var/log/messages` |
| `/var/log/secure` | `安全认证日志` | `grep -i failed /var/log/secure` |
| `/var/log/cron` | `计划任务日志` | `tail /var/log/cron` |
| `/var/log/boot.log` | `系统启动日志` | `cat /var/log/boot.log` |
| `/var/log/dmesg` | `内核启动消息` | `cat /var/log/dmesg` |

---

## 9. 👥 用户连接与权限检查


### 9.1 当前用户连接状态


**用户连接检查的意义**：
- **安全监控**：检查是否有异常登录
- **资源管理**：了解用户资源使用情况
- **会话管理**：管理用户会话状态

```bash
# 查看当前登录用户
who

# 查看详细登录信息
w

# 查看用户登录历史
last | head -10

# 查看登录失败记录
lastb | head -10
```

### 9.2 用户权限与安全检查


```bash
# 查看当前用户身份
id

# 查看sudo权限
sudo -l

# 查看用户组信息
groups

# 检查重要文件权限
ls -l /etc/passwd /etc/shadow /etc/sudoers
```

### 9.3 系统用户账户检查


```bash
# 查看系统用户账户
cat /etc/passwd | tail -5

# 查看空密码用户（安全风险）
awk -F: '$2==""' /etc/shadow

# 查看UID为0的用户（超级用户）
awk -F: '$3==0' /etc/passwd

# 检查用户home目录权限
ls -la /home/
```

---

## 10. ⏰ 系统时间与同步检查


### 10.1 系统时间状态检查


**为什么时间同步很重要？**
- **日志准确性**：确保日志时间戳正确
- **认证服务**：Kerberos等需要时间同步
- **定时任务**：cron任务执行时间准确
- **集群协调**：分布式系统需要时间一致

```bash
# 查看系统时间
date

# 查看硬件时间
hwclock --show

# 查看时区设置
timedatectl

# 查看NTP同步状态
chrony sources -v
# 或者
ntpq -p
```

### 10.2 时间同步服务检查


```bash
# 检查chronyd服务状态
systemctl status chronyd

# 检查NTP服务状态（传统）
systemctl status ntp

# 查看时间同步统计
chronyc sourcestats

# 手动同步时间
ntpdate -s time.nist.gov
```

### 10.3 时区配置检查


```bash
# 查看当前时区
ls -l /etc/localtime

# 列出可用时区
timedatectl list-timezones | grep Asia

# 设置时区（如需要）
timedatectl set-timezone Asia/Shanghai
```

---

## 11. 🤖 快速检查脚本


### 11.1 系统状态一键检查脚本


```bash
#!/bin/bash
# 系统状态快速检查脚本
# system_check.sh

echo "=== Linux系统状态检查报告 ==="
echo "检查时间: $(date)"
echo ""

# 1. 系统基本信息
echo "【1. 系统信息】"
echo "系统版本: $(cat /etc/redhat-release 2>/dev/null || cat /etc/os-release | grep PRETTY_NAME)"
echo "内核版本: $(uname -r)"
echo "运行时间: $(uptime)"
echo ""

# 2. CPU和负载检查
echo "【2. CPU与负载】"
echo "CPU核数: $(nproc)"
echo "负载情况: $(uptime | awk -F'load average:' '{print $2}')"
echo "CPU使用率: $(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)%"
echo ""

# 3. 内存检查
echo "【3. 内存状态】"
free -h
echo ""

# 4. 磁盘检查
echo "【4. 磁盘空间】"
df -h | grep -E "(^/dev|使用%|Use%)"
echo ""

# 5. 网络检查
echo "【5. 网络状态】"
echo "网络接口:"
ip link show | grep -E "^[0-9]" | awk '{print $2,$9}' 
echo "路由网关: $(ip route show default)"
echo ""

# 6. 重要服务检查
echo "【6. 关键服务】"
for service in sshd network chronyd; do
    if systemctl is-active $service &>/dev/null; then
        echo "✓ $service 运行正常"
    else
        echo "✗ $service 服务异常"
    fi
done
echo ""

# 7. 系统告警检查
echo "【7. 告警信息】"
echo "最近错误日志:"
dmesg | grep -i error | tail -3 2>/dev/null || echo "无明显错误"
echo ""

echo "=== 检查完成 ==="
```

### 11.2 告警阈值配置


```bash
# 系统资源告警阈值配置
CPU_WARNING=80        # CPU使用率告警阈值
CPU_CRITICAL=95       # CPU使用率严重阈值
MEM_WARNING=80        # 内存使用率告警阈值  
MEM_CRITICAL=95       # 内存使用率严重阈值
DISK_WARNING=85       # 磁盘使用率告警阈值
DISK_CRITICAL=95      # 磁盘使用率严重阈值
LOAD_WARNING=5        # 系统负载告警阈值
```

### 11.3 自动化检查脚本部署


```bash
# 创建检查脚本目录
mkdir -p /opt/system-check

# 设置脚本权限
chmod +x /opt/system-check/system_check.sh

# 添加到定时任务，每小时执行一次
echo "0 * * * * /opt/system-check/system_check.sh > /var/log/system-check.log 2>&1" | crontab -

# 查看定时任务
crontab -l
```

---

## 12. 📋 核心要点总结


### 12.1 系统检查必备命令


> 💡 **黄金命令组合**：这8个命令解决80%的系统检查需求

| 检查项目 | **核心命令** | **作用说明** |
|---------|-------------|-------------|
| 🖥️ **系统负载** | `uptime` | `快速了解系统运行状态和负载` |
| 💻 **CPU使用** | `top` | `实时查看CPU和进程使用情况` |
| 🧠 **内存状态** | `free -h` | `查看内存使用和swap情况` |
| 💾 **磁盘空间** | `df -h` | `检查磁盘空间使用情况` |
| 🌐 **网络状态** | `ip addr` | `查看网络接口配置状态` |
| 🔧 **服务状态** | `systemctl status` | `检查系统服务运行状态` |
| 📋 **系统日志** | `journalctl -f` | `实时查看系统日志信息` |
| 📁 **进程状态** | `ps aux` | `查看所有进程运行情况` |

### 12.2 系统检查优先级


**🔴 紧急检查项**（影响系统可用性）：
- CPU负载 > 系统核数的5倍
- 内存可用 < 10%
- 磁盘根分区使用 > 95%
- 关键服务(sshd、network)停止

**🟡 重要检查项**（影响系统性能）：
- CPU使用率 > 80%
- 内存使用率 > 80%
- 磁盘使用率 > 85%
- 网络连通性异常

**🟢 常规检查项**（系统维护需要）：
- 系统时间同步状态
- 用户连接情况
- 日志轮转状态
- 文件系统挂载状态

### 12.3 故障排查思维导图


```
系统故障排查流程：
          系统异常
              │
    ┌─────────┼─────────┐
    │         │         │
 响应慢    服务异常   无法连接
    │         │         │
┌───┴───┐ ┌───┴───┐ ┌───┴───┐
│资源检查│ │进程检查│ │网络检查│
│CPU/内存│ │服务状态│ │端口连通│
│磁盘IO │ │日志分析│ │防火墙 │
└───────┘ └───────┘ └───────┘
```

### 12.4 检查清单checklist


**✅ 每日检查项**：
- [ ] 系统负载是否正常 (`uptime`)
- [ ] 磁盘空间是否充足 (`df -h`)  
- [ ] 关键服务是否运行 (`systemctl status`)
- [ ] 系统日志是否有错误 (`journalctl -p err`)

**✅ 每周检查项**：
- [ ] 内存使用趋势分析
- [ ] 磁盘IO性能检查
- [ ] 网络连接数统计
- [ ] 用户登录安全检查

**✅ 每月检查项**：
- [ ] 系统补丁更新状态
- [ ] 日志文件清理状况
- [ ] 系统时间同步精度
- [ ] 文件系统完整性检查

### 12.5 实用技巧与建议


**🎯 高效检查技巧**：
1. **使用别名**：为常用检查命令设置简短别名
2. **组合管道**：用管道组合多个命令获取精确信息
3. **定时检查**：通过cron定时执行检查脚本
4. **阈值告警**：设置合理的告警阈值避免误报

**⚠️ 检查注意事项**：
- 不要在生产环境随意重启服务
- 使用只读命令进行检查，避免误操作
- 检查结果要结合历史数据分析趋势
- 重要操作前要做好备份和回退准备

**核心记忆口诀**：
- 系统检查八字诀：**CPU、内存、磁盘、网络**
- 故障排查三步走：**看现象、查日志、找原因**
- 检查顺序要记牢：**全局状态、资源使用、服务进程**