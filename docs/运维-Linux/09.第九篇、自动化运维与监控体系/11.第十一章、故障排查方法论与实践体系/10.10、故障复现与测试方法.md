---
title: 10ã€æ•…éšœå¤ç°ä¸æµ‹è¯•æ–¹æ³•
---
## ğŸ“š ç›®å½•

1. [æ•…éšœå¤ç°åŸºç¡€ç†è®º](#1-æ•…éšœå¤ç°åŸºç¡€ç†è®º)
2. [é—®é¢˜å¤ç°ç¯å¢ƒæ­å»º](#2-é—®é¢˜å¤ç°ç¯å¢ƒæ­å»º)
3. [å¤ç°æ¡ä»¶è¯†åˆ«ä¸æ§åˆ¶](#3-å¤ç°æ¡ä»¶è¯†åˆ«ä¸æ§åˆ¶)
4. [å‹åŠ›æµ‹è¯•æ•…éšœè§¦å‘](#4-å‹åŠ›æµ‹è¯•æ•…éšœè§¦å‘)
5. [è¾¹ç•Œæ¡ä»¶æµ‹è¯•](#5-è¾¹ç•Œæ¡ä»¶æµ‹è¯•)
6. [å›å½’æµ‹è¯•éªŒè¯](#6-å›å½’æµ‹è¯•éªŒè¯)
7. [A/Bæµ‹è¯•å¯¹æ¯”](#7-ABæµ‹è¯•å¯¹æ¯”)
8. [æ¨¡æ‹Ÿæ•…éšœæ³¨å…¥](#8-æ¨¡æ‹Ÿæ•…éšœæ³¨å…¥)
9. [å¤ç°æˆåŠŸç‡è¯„ä¼°](#9-å¤ç°æˆåŠŸç‡è¯„ä¼°)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ æ•…éšœå¤ç°åŸºç¡€ç†è®º


### 1.1 ä»€ä¹ˆæ˜¯æ•…éšœå¤ç°


**ğŸ·ï¸ ä¸“ä¸šæœ¯è¯­**ï¼šæ•…éšœå¤ç°ï¼ˆFault Reproductionï¼‰= åœ¨å¯æ§ç¯å¢ƒä¸­é‡æ–°è§¦å‘å·²å‘ç”Ÿçš„ç³»ç»Ÿé—®é¢˜

**ğŸ’­ æ€è€ƒä¸€ä¸‹**ï¼šä¸ºä»€ä¹ˆåŒ»ç”Ÿçœ‹ç—…è¦å…ˆäº†è§£ç—‡çŠ¶ï¼ŸåŒæ ·ï¼Œè¿ç»´è§£å†³é—®é¢˜ä¹Ÿè¦å…ˆèƒ½"é‡ç°"é—®é¢˜ã€‚

```
æ•…éšœæ’æŸ¥çš„é»„é‡‘æ³•åˆ™ï¼š
æ²¡æœ‰å¤ç° = æ²¡æœ‰ç†è§£ = æ²¡æœ‰è§£å†³

å¤ç°è¿‡ç¨‹å°±åƒï¼š
ğŸ” è§‚å¯Ÿç°è±¡ â†’ ğŸ§ª é‡ç°é—®é¢˜ â†’ ğŸ”¬ åˆ†æåŸå›  â†’ ğŸ› ï¸ ä¿®å¤éªŒè¯
```

### 1.2 æ•…éšœå¤ç°çš„é‡è¦æ„ä¹‰


**ğŸ¯ å­¦ä¹ ç›®æ ‡**ï¼šç†è§£ä¸ºä»€ä¹ˆæ•…éšœå¤ç°æ˜¯è¿ç»´å·¥ä½œçš„æ ¸å¿ƒç¯èŠ‚

```
å®é™…åº”ç”¨åœºæ™¯ï¼š

ç”Ÿäº§ç¯å¢ƒé—®é¢˜ï¼š
â€¢ ç”¨æˆ·åé¦ˆï¼šç½‘ç«™å¶å°”æ‰“ä¸å¼€
â€¢ è¿ç»´å›°æƒ‘ï¼šç›‘æ§æ˜¾ç¤ºä¸€åˆ‡æ­£å¸¸
â€¢ è§£å†³æ–¹æ¡ˆï¼šæ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œæ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸º

ç³»ç»Ÿæ€§èƒ½é—®é¢˜ï¼š
â€¢ ç°è±¡ï¼šæœåŠ¡å™¨é«˜å³°æœŸå“åº”æ…¢
â€¢ æŒ‘æˆ˜ï¼šé—®é¢˜æ—¶æœ‰æ—¶æ— ï¼Œéš¾ä»¥å®šä½
â€¢ æ–¹æ³•ï¼šå‹åŠ›æµ‹è¯•é‡ç°é«˜è´Ÿè½½åœºæ™¯
```

**âœ… æ­£ç¡®ç†è§£**ï¼š
- æ•…éšœå¤ç°ä¸æ˜¯ä¸ºäº†"åˆ¶é€ é—®é¢˜"
- è€Œæ˜¯ä¸ºäº†åœ¨å®‰å…¨ç¯å¢ƒä¸­"ç†è§£é—®é¢˜"
- åªæœ‰ç†è§£äº†é—®é¢˜ï¼Œæ‰èƒ½å½»åº•è§£å†³é—®é¢˜

### 1.3 å¤ç°vsæ’æŸ¥çš„åŒºåˆ«


| é˜¶æ®µ | **ç›®æ ‡** | **ç¯å¢ƒ** | **é£é™©** | **æ–¹æ³•** |
|------|---------|---------|---------|---------|
| **æ•…éšœå¤ç°** | `é‡ç°é—®é¢˜ç°è±¡` | `æµ‹è¯•ç¯å¢ƒ` | `ä½é£é™©å¯æ§` | `æ¨¡æ‹ŸçœŸå®æ¡ä»¶` |
| **æ•…éšœæ’æŸ¥** | `å®šä½æ ¹æœ¬åŸå› ` | `ç”Ÿäº§ç¯å¢ƒ` | `é«˜é£é™©è°¨æ…` | `åˆ†ææ—¥å¿—ç›‘æ§` |

---

## 2. ğŸ—ï¸ é—®é¢˜å¤ç°ç¯å¢ƒæ­å»º


### 2.1 å¤ç°ç¯å¢ƒçš„åŸºæœ¬è¦æ±‚


**ğŸ” æ·±å…¥ç†è§£**ï¼šå¤ç°ç¯å¢ƒä¸æ˜¯ç”Ÿäº§ç¯å¢ƒçš„"ç®€åŒ–ç‰ˆ"ï¼Œè€Œæ˜¯"å—æ§ç‰ˆ"

```
ç¯å¢ƒæ­å»ºåŸåˆ™ï¼š

ç›¸ä¼¼æ€§åŸåˆ™ï¼š
âœ… æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸€è‡´
âœ… è½¯ä»¶ç‰ˆæœ¬åŒ¹é…  
âœ… é…ç½®å‚æ•°ç›¸åŒ
âœ… ç½‘ç»œæ‹“æ‰‘ç›¸ä¼¼

å¯æ§æ€§åŸåˆ™ï¼š
âœ… å¯ä»¥éšæ—¶é‡ç½®
âœ… å¯ä»¥è°ƒæ•´å‚æ•°
âœ… å¯ä»¥æ³¨å…¥æ•…éšœ
âœ… å¯ä»¥è¯¦ç»†ç›‘æ§
```

### 2.2 Dockerå®¹å™¨åŒ–å¤ç°ç¯å¢ƒ


**ğŸ’¡ ç†è§£è¾…åŠ©**ï¼šç”¨Dockeræ­å»ºå¤ç°ç¯å¢ƒå°±åƒæ­ç§¯æœ¨ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯æ ‡å‡†åŒ–çš„ç§¯æœ¨å—

```bash
# åŸºç¡€WebæœåŠ¡å¤ç°ç¯å¢ƒ
version: '3.8'
services:
  web:
    image: nginx:1.20
    ports:
      - "8080:80"
    volumes:
      - ./config:/etc/nginx/conf.d
  
  app:
    image: php:7.4-fpm
    volumes:
      - ./app:/var/www/html
  
  db:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: test123
```

**ğŸŒ° ä¸¾ä¸ªä¾‹å­**ï¼š
- ç”Ÿäº§ç¯å¢ƒï¼šå¤§å‹å•†åœºï¼ˆå¤æ‚ã€äººå¤šã€éš¾æ§åˆ¶ï¼‰
- å¤ç°ç¯å¢ƒï¼šå®éªŒå®¤æ¨¡å‹ï¼ˆç®€åŒ–ã€å¯æ§ã€å¯é‡å¤ï¼‰

### 2.3 è™šæ‹Ÿæœºvså®¹å™¨çš„é€‰æ‹©


**ğŸ¤” ä¸ºä»€ä¹ˆè¿™æ ·**ï¼šä¸åŒçš„æ•…éšœç±»å‹éœ€è¦ä¸åŒçš„å¤ç°ç¯å¢ƒ

```
å†…æ ¸çº§æ•…éšœ â†’ è™šæ‹Ÿæœºç¯å¢ƒ
â€¢ éœ€è¦å®Œæ•´çš„æ“ä½œç³»ç»Ÿ
â€¢ å¯ä»¥æµ‹è¯•ç³»ç»Ÿè°ƒç”¨é—®é¢˜
â€¢ é€‚åˆç¡¬ä»¶ç›¸å…³é—®é¢˜å¤ç°

åº”ç”¨çº§æ•…éšœ â†’ å®¹å™¨ç¯å¢ƒ  
â€¢ å¯åŠ¨é€Ÿåº¦å¿«ï¼Œèµ„æºå ç”¨å°‘
â€¢ ç‰ˆæœ¬ç®¡ç†æ–¹ä¾¿
â€¢ é€‚åˆè½¯ä»¶é…ç½®é—®é¢˜å¤ç°

ç½‘ç»œæ•…éšœ â†’ æ··åˆç¯å¢ƒ
â€¢ å¤šè™šæ‹Ÿæœºæ¨¡æ‹Ÿç½‘ç»œæ‹“æ‰‘
â€¢ å®¹å™¨é›†ç¾¤æ¨¡æ‹Ÿå¾®æœåŠ¡
â€¢ ç½‘ç»œåˆ†åŒºå’Œå»¶è¿Ÿæ¨¡æ‹Ÿ
```

### 2.4 ç¯å¢ƒå¿«ç…§ä¸ç‰ˆæœ¬ç®¡ç†


**ğŸ”§ è§£å†³æ–¹æ¡ˆ**ï¼šåƒGitç®¡ç†ä»£ç ä¸€æ ·ç®¡ç†å¤ç°ç¯å¢ƒ

```bash
# è™šæ‹Ÿæœºå¿«ç…§ç®¡ç†
# åˆ›å»ºåŸºç¡€ç¯å¢ƒå¿«ç…§
virsh snapshot-create-as vm-test base-env "å¹²å‡€çš„åŸºç¡€ç¯å¢ƒ"

# åˆ›å»ºé—®é¢˜å¤ç°å¿«ç…§  
virsh snapshot-create-as vm-test problem-state "é—®é¢˜å¤ç°æˆåŠŸçŠ¶æ€"

# æ¢å¤åˆ°æŒ‡å®šå¿«ç…§
virsh snapshot-revert vm-test base-env
```

**â­ é‡ç‚¹æ ‡è®°**ï¼šç¯å¢ƒç‰ˆæœ¬åŒ–æ˜¯æ•…éšœå¤ç°æˆåŠŸçš„å…³é”®â˜…â˜…â˜…

---

## 3. ğŸ” å¤ç°æ¡ä»¶è¯†åˆ«ä¸æ§åˆ¶


### 3.1 æ•…éšœè§¦å‘æ¡ä»¶çš„åˆ†ç±»


**ğŸ“‹ çŸ¥è¯†æ¸…å•**ï¼šç³»ç»Ÿæ€§åœ°è¯†åˆ«å¯èƒ½çš„è§¦å‘æ¡ä»¶

```
æ—¶é—´ç›¸å…³æ¡ä»¶ï¼š
ğŸ• ç‰¹å®šæ—¶é—´ç‚¹ï¼ˆå¦‚æ¯å¤©å‡Œæ™¨2ç‚¹ï¼‰
ğŸ“… ç‰¹å®šæ—¥æœŸï¼ˆå¦‚æœˆæœ«ã€å¹´æœ«ï¼‰
â° æ—¶é—´çª—å£ï¼ˆå¦‚å·¥ä½œæ—¶é—´vséå·¥ä½œæ—¶é—´ï¼‰
ğŸ”„ å‘¨æœŸæ€§æ¨¡å¼ï¼ˆå¦‚æ¯å‘¨ã€æ¯æœˆï¼‰

è´Ÿè½½ç›¸å…³æ¡ä»¶ï¼š
ğŸ“ˆ ç”¨æˆ·å¹¶å‘æ•°é˜ˆå€¼
ğŸ’¾ å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ°æŸä¸ªå€¼
ğŸ’¿ ç£ç›˜ç©ºé—´ä¸è¶³
ğŸŒ ç½‘ç»œå¸¦å®½é¥±å’Œ

æ•°æ®ç›¸å…³æ¡ä»¶ï¼š
ğŸ“Š ç‰¹å®šæ•°æ®é‡çº§
ğŸ”¢ ç‰¹æ®Šæ•°æ®æ ¼å¼
âŒ å¼‚å¸¸æ•°æ®è¾“å…¥
ğŸ—ƒï¸ æ•°æ®åº“è®°å½•æ•°é‡
```

### 3.2 æ¡ä»¶çŸ©é˜µåˆ†ææ³•


**ğŸ§  è®°å¿†æŠ€å·§**ï¼šç”¨è¡¨æ ¼æŠŠæ‰€æœ‰å¯èƒ½çš„æ¡ä»¶ç»„åˆåˆ—å‡ºæ¥ï¼Œåƒæ’åˆ—ç»„åˆä¸€æ ·ç³»ç»ŸåŒ–

| æ—¶é—´ | è´Ÿè½½ | æ•°æ®é‡ | **æ•…éšœæ¦‚ç‡** |
|------|------|---------|-------------|
| `å·¥ä½œæ—¶é—´` | `é«˜å¹¶å‘` | `å¤§æ•°æ®` | `90%` |
| `å·¥ä½œæ—¶é—´` | `ä½å¹¶å‘` | `å¤§æ•°æ®` | `20%` |
| `éå·¥ä½œæ—¶é—´` | `é«˜å¹¶å‘` | `å°æ•°æ®` | `10%` |
| `éå·¥ä½œæ—¶é—´` | `ä½å¹¶å‘` | `å°æ•°æ®` | `0%` |

**ğŸ’¡ æ¦‚å¿µæ¾„æ¸…**ï¼š
- ä¸æ˜¯æ‰€æœ‰æ¡ä»¶ç»„åˆéƒ½ä¼šè§¦å‘æ•…éšœ
- è¦æ‰¾åˆ°"å¿…è¦æ¡ä»¶"å’Œ"å……åˆ†æ¡ä»¶"
- å¿…è¦æ¡ä»¶ï¼šæ²¡æœ‰å®ƒæ•…éšœä¸ä¼šå‘ç”Ÿ
- å……åˆ†æ¡ä»¶ï¼šæœ‰äº†å®ƒæ•…éšœä¸€å®šå‘ç”Ÿ

### 3.3 å•å˜é‡æ§åˆ¶æ³•


**ğŸ”„ æ¢å¥è¯è¯´**ï¼šä¸€æ¬¡åªæ”¹å˜ä¸€ä¸ªæ¡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¤ç°æ•…éšœ

```bash
# æ§åˆ¶å¹¶å‘æ•°æµ‹è¯•
for concurrent in 10 50 100 200 500; do
    echo "æµ‹è¯•å¹¶å‘æ•°: $concurrent"
    ab -n 1000 -c $concurrent http://test-server/
    sleep 30  # ç­‰å¾…ç³»ç»Ÿæ¢å¤
done
```

**ğŸª è®°å¿†æŠ€å·§**ï¼šåƒç§‘å­¦å®éªŒä¸€æ ·ï¼Œä¸€æ¬¡åªæ”¹å˜ä¸€ä¸ªå˜é‡ï¼Œæ‰èƒ½æ‰¾åˆ°çœŸæ­£çš„"å…ƒå‡¶"

### 3.4 ç¯å¢ƒå˜é‡çš„ç²¾ç¡®æ§åˆ¶


**ğŸ› ï¸ å·¥å…·æ¨è**ï¼šä½¿ç”¨è„šæœ¬è‡ªåŠ¨åŒ–ç¯å¢ƒå˜é‡è®¾ç½®

```bash
#!/bin/bash
# æ•…éšœå¤ç°ç¯å¢ƒæ§åˆ¶è„šæœ¬

setup_test_env() {
    # æ—¶é—´åŒæ­¥
    ntpdate -s time.nist.gov
    
    # CPUé™åˆ¶
    echo $1 > /sys/fs/cgroup/cpu/test_group/cpu.cfs_quota_us
    
    # å†…å­˜é™åˆ¶  
    echo ${2}M > /sys/fs/cgroup/memory/test_group/memory.limit_in_bytes
    
    # ç½‘ç»œå»¶è¿Ÿæ¨¡æ‹Ÿ
    tc qdisc add dev eth0 root netem delay ${3}ms
}

# ä½¿ç”¨ç¤ºä¾‹ï¼š50%CPU, 512MBå†…å­˜, 100msç½‘ç»œå»¶è¿Ÿ
setup_test_env 500000 512 100
```

---

## 4. âš¡ å‹åŠ›æµ‹è¯•æ•…éšœè§¦å‘


### 4.1 å‹åŠ›æµ‹è¯•çš„åŸºæœ¬æ¦‚å¿µ


**ğŸ·ï¸ ä¸“ä¸šæœ¯è¯­**ï¼š
- **è´Ÿè½½æµ‹è¯•** = æ­£å¸¸å·¥ä½œè´Ÿè½½ä¸‹çš„ç³»ç»Ÿè¡¨ç°
- **å‹åŠ›æµ‹è¯•** = è¶…å‡ºæ­£å¸¸è´Ÿè½½æ—¶çš„ç³»ç»Ÿè¡¨ç°  
- **å³°å€¼æµ‹è¯•** = æ‰¾åˆ°ç³»ç»Ÿèƒ½æ‰¿å—çš„æœ€å¤§è´Ÿè½½
- **ç ´åæµ‹è¯•** = æ•…æ„è®©ç³»ç»Ÿå´©æºƒï¼Œè§‚å¯Ÿæ•…éšœæ¨¡å¼

**ğŸŒ° ä¸¾ä¸ªä¾‹å­**ï¼š
```
è´Ÿè½½æµ‹è¯•ï¼šæµ‹è¯•ç”µæ¢¯æ­£å¸¸è½½é‡8äººæ—¶çš„è¿è¡Œ
å‹åŠ›æµ‹è¯•ï¼šæµ‹è¯•ç”µæ¢¯è½½é‡12äººæ—¶æ˜¯å¦æŠ¥è­¦
å³°å€¼æµ‹è¯•ï¼šæµ‹è¯•ç”µæ¢¯æœ€å¤šèƒ½è½½é‡å¤šå°‘äºº
ç ´åæµ‹è¯•ï¼šæµ‹è¯•ç”µæ¢¯è¶…é‡æ—¶çš„å®‰å…¨æœºåˆ¶
```

### 4.2 WebæœåŠ¡å‹åŠ›æµ‹è¯•


**ğŸ’» ä»£ç ç¤ºä¾‹**ï¼šä½¿ç”¨abå·¥å…·è¿›è¡ŒHTTPå‹åŠ›æµ‹è¯•

```bash
# åŸºç¡€å‹åŠ›æµ‹è¯•
ab -n 10000 -c 100 http://testserver/index.php

# å¸¦POSTæ•°æ®çš„å‹åŠ›æµ‹è¯•  
ab -n 1000 -c 50 -p data.txt -T 'application/json' http://testserver/api/

# æŒç»­æ—¶é—´æµ‹è¯•ï¼ˆæµ‹è¯•5åˆ†é’Ÿï¼‰
ab -t 300 -c 100 http://testserver/
```

**ğŸ” æ·±å…¥ç†è§£**ï¼šå‹åŠ›æµ‹è¯•ä¸ä»…è¦çœ‹æ€§èƒ½æŒ‡æ ‡ï¼Œæ›´è¦è§‚å¯Ÿæ•…éšœæ¨¡å¼

```
è§‚å¯ŸæŒ‡æ ‡ï¼š
ğŸ“Š å“åº”æ—¶é—´å˜åŒ–è¶‹åŠ¿
ğŸ“ˆ é”™è¯¯ç‡ä¸Šå‡ç‚¹  
ğŸ’¾ å†…å­˜ä½¿ç”¨å¢é•¿
ğŸ”„ è¿æ¥æ•°å˜åŒ–
ğŸ“ é”™è¯¯æ—¥å¿—å†…å®¹
```

### 4.3 æ•°æ®åº“å‹åŠ›æµ‹è¯•


**ğŸ¯ åœºæ™¯æ¨¡æ‹Ÿ**ï¼šæ¨¡æ‹Ÿé«˜å¹¶å‘æ•°æ®åº“è®¿é—®

```bash
# ä½¿ç”¨sysbenchè¿›è¡ŒMySQLå‹åŠ›æµ‹è¯•
# å‡†å¤‡æµ‹è¯•æ•°æ®
sysbench oltp_read_write \
    --mysql-host=localhost \
    --mysql-user=test \
    --mysql-password=test123 \
    --mysql-db=testdb \
    --tables=10 \
    --table-size=100000 \
    prepare

# æ‰§è¡Œå‹åŠ›æµ‹è¯•
sysbench oltp_read_write \
    --mysql-host=localhost \
    --mysql-user=test \
    --mysql-password=test123 \
    --mysql-db=testdb \
    --tables=10 \
    --table-size=100000 \
    --threads=50 \
    --time=300 \
    run
```

### 4.4 ç³»ç»Ÿèµ„æºå‹åŠ›æµ‹è¯•


**ğŸš¨ é‡è¦æé†’**ï¼šç³»ç»Ÿçº§å‹åŠ›æµ‹è¯•è¦å°å¿ƒï¼Œé¿å…å½±å“å…¶ä»–æœåŠ¡

```bash
# CPUå‹åŠ›æµ‹è¯•
stress --cpu 4 --timeout 60s

# å†…å­˜å‹åŠ›æµ‹è¯•  
stress --vm 2 --vm-bytes 1G --timeout 60s

# ç£ç›˜IOå‹åŠ›æµ‹è¯•
stress --io 4 --hdd 2 --hdd-bytes 100M --timeout 60s

# ç»¼åˆå‹åŠ›æµ‹è¯•
stress --cpu 2 --vm 1 --vm-bytes 500M --io 1 --timeout 120s
```

**ğŸ“ˆ è¿›åº¦è¿½è¸ª**ï¼šå‹åŠ›æµ‹è¯•è¿‡ç¨‹ä¸­çš„ç›‘æ§

```bash
# å®æ—¶ç›‘æ§è„šæœ¬
#!/bin/bash
while true; do
    echo "=== $(date) ==="
    echo "CPU: $(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)"
    echo "MEM: $(free -m | grep Mem | awk '{print $3/$2*100}')%"
    echo "DISK: $(df -h / | tail -1 | awk '{print $5}')"
    sleep 5
done
```

---

## 5. ğŸ¯ è¾¹ç•Œæ¡ä»¶æµ‹è¯•


### 5.1 è¾¹ç•Œæ¡ä»¶çš„è¯†åˆ«


**ğŸ’­ æ€è€ƒä¸€ä¸‹**ï¼šç³»ç»Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹æœ€å®¹æ˜“å‡ºé—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯ï¼šåœ¨"è¾¹ç•Œ"ä¸Šï¼

```
å¸¸è§è¾¹ç•Œæ¡ä»¶ï¼š

æ•°å€¼è¾¹ç•Œï¼š
â€¢ é›¶å€¼ï¼š0ä¸ªç”¨æˆ·ã€0å­—èŠ‚æ–‡ä»¶
â€¢ æœ€å¤§å€¼ï¼šæœ€å¤§æ•´æ•°ã€æœ€å¤§å†…å­˜
â€¢ ä¸´ç•Œå€¼ï¼šç¼“å­˜æ»¡äº†å‰çš„æœ€åä¸€æ¡è®°å½•

æ—¶é—´è¾¹ç•Œï¼š
â€¢ ç³»ç»Ÿå¯åŠ¨ç¬é—´
â€¢ å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶ç‚¹
â€¢ æ—¶åŒºåˆ‡æ¢æ—¶åˆ»
â€¢ é—°å¹´ã€æœˆæœ«ã€å¹´æœ«

èµ„æºè¾¹ç•Œï¼š
â€¢ ç£ç›˜ç©ºé—´ç”¨å®Œå‰
â€¢ å†…å­˜å³å°†è€—å°½æ—¶  
â€¢ ç½‘ç»œè¿æ¥æ•°è¾¾åˆ°ä¸Šé™
â€¢ æ–‡ä»¶å¥æŸ„å³å°†è€—å°½
```

### 5.2 ç©ºå€¼ä¸å¼‚å¸¸è¾“å…¥æµ‹è¯•


**âŒ å¸¸è§è¯¯è§£**ï¼šä»¥ä¸ºæ­£å¸¸è¾“å…¥æµ‹è¯•é€šè¿‡å°±æ²¡é—®é¢˜äº†
**âœ… æ­£ç¡®ç†è§£**ï¼šå¼‚å¸¸è¾“å…¥å¾€å¾€æ›´èƒ½æš´éœ²ç³»ç»Ÿæ¼æ´

```bash
# Webåº”ç”¨è¾¹ç•Œæµ‹è¯•è„šæœ¬
#!/bin/bash

# ç©ºå€¼æµ‹è¯•
curl -X POST -d "" http://testserver/api/user

# è¶…é•¿å­—ç¬¦ä¸²æµ‹è¯•
long_string=$(python -c "print('A' * 10000)")
curl -X POST -d "name=$long_string" http://testserver/api/user

# ç‰¹æ®Šå­—ç¬¦æµ‹è¯•
curl -X POST -d "name=<script>alert('xss')</script>" http://testserver/api/user

# SQLæ³¨å…¥æµ‹è¯•
curl -X POST -d "id=1' OR '1'='1" http://testserver/api/user
```

### 5.3 èµ„æºè€—å°½è¾¹ç•Œæµ‹è¯•


**ğŸ”§ è§£å†³æ–¹æ¡ˆ**ï¼šé€æ­¥é€¼è¿‘ç³»ç»Ÿæé™ï¼Œè§‚å¯Ÿæ•…éšœè¡Œä¸º

```bash
# å†…å­˜è€—å°½æµ‹è¯•
test_memory_limit() {
    for size in 100M 500M 1G 2G 4G; do
        echo "æµ‹è¯•å†…å­˜åˆ†é…: $size"
        if ! stress --vm 1 --vm-bytes $size --timeout 10s; then
            echo "å†…å­˜åˆ†é…å¤±è´¥åœ¨: $size"
            break
        fi
    done
}

# æ–‡ä»¶å¥æŸ„è€—å°½æµ‹è¯•  
test_file_limit() {
    ulimit -n 1024  # è®¾ç½®æ–‡ä»¶å¥æŸ„é™åˆ¶
    for i in {1..2000}; do
        exec {fd}< /dev/null
        if [ $? -ne 0 ]; then
            echo "æ–‡ä»¶å¥æŸ„è€—å°½åœ¨: $i"
            break
        fi
    done
}
```

### 5.4 æ—¶é—´è¾¹ç•Œæµ‹è¯•


**ğŸ• æ—¶é—´ç›¸å…³**ï¼šå¾ˆå¤šæ•…éšœéƒ½å‘ç”Ÿåœ¨ç‰¹å®šæ—¶é—´ç‚¹

```bash
# æµ‹è¯•å®šæ—¶ä»»åŠ¡æ•…éšœ
# æ¨¡æ‹Ÿç³»ç»Ÿæ—¶é—´è·³è·ƒ
date -s "2024-02-29 23:59:50"  # é—°å¹´æµ‹è¯•
sleep 20

# æµ‹è¯•æ—¶åŒºå˜åŒ–å½±å“
export TZ="America/New_York"
date
export TZ="Asia/Shanghai" 
date
```

**ğŸ­ è§’è‰²æ‰®æ¼”**ï¼šç«™åœ¨"æ—¶é—´"çš„è§’åº¦æ€è€ƒ
- å¦‚æœæˆ‘æ˜¯æ—¶é—´ï¼Œæˆ‘ä¼šåœ¨å“ªäº›æ—¶åˆ»"æ‰å¼„"ç³»ç»Ÿï¼Ÿ
- åˆå¤œ12ç‚¹ã€æœˆæœ«ã€å¹´æœ«ã€é—°å¹´ã€å¤ä»¤æ—¶åˆ‡æ¢...

---

## 6. ğŸ”„ å›å½’æµ‹è¯•éªŒè¯


### 6.1 å›å½’æµ‹è¯•çš„ç›®çš„


**ğŸ·ï¸ ä¸“ä¸šæœ¯è¯­**ï¼šå›å½’æµ‹è¯•ï¼ˆRegression Testingï¼‰= ç¡®ä¿ä¿®å¤ä¸ä¼šå¼•å…¥æ–°é—®é¢˜çš„æµ‹è¯•æ–¹æ³•

**ğŸ”„ æ¢å¥è¯è¯´**ï¼š
- ä¿®å¤å‰ï¼šç³»ç»Ÿæœ‰1ä¸ªå·²çŸ¥é—®é¢˜
- ä¿®å¤åï¼šç³»ç»Ÿåº”è¯¥æœ‰0ä¸ªå·²çŸ¥é—®é¢˜ï¼Œè€Œä¸æ˜¯1ä¸ªæ–°é—®é¢˜

```
å›å½’æµ‹è¯•çš„å±‚æ¬¡ï¼š

å•å…ƒå›å½’ï¼š
âœ… ä¿®æ”¹çš„å‡½æ•°åŠŸèƒ½æ­£å¸¸
âœ… ç›¸å…³å‡½æ•°æ²¡æœ‰è¢«ç ´å

æ¨¡å—å›å½’ï¼š
âœ… æ•´ä¸ªæ¨¡å—åŠŸèƒ½å®Œæ•´
âœ… æ¨¡å—æ¥å£æ²¡æœ‰å˜åŒ–

ç³»ç»Ÿå›å½’ï¼š  
âœ… æ•´ä¸ªç³»ç»ŸåŠŸèƒ½æ­£å¸¸
âœ… æ€§èƒ½æ²¡æœ‰æ˜æ˜¾ä¸‹é™
```

### 6.2 è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•


**ğŸ› ï¸ å·¥å…·æ¨è**ï¼šä½¿ç”¨è„šæœ¬è‡ªåŠ¨æ‰§è¡Œå›å½’æµ‹è¯•

```bash
#!/bin/bash
# è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•è„šæœ¬

echo "å¼€å§‹å›å½’æµ‹è¯•..."

# 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•
test_basic_functions() {
    echo "æµ‹è¯•åŸºç¡€åŠŸèƒ½..."
    
    # ç”¨æˆ·ç™»å½•æµ‹è¯•
    response=$(curl -s -X POST \
        -d "username=test&password=123456" \
        http://testserver/login)
    
    if echo "$response" | grep -q "success"; then
        echo "âœ… ç™»å½•åŠŸèƒ½æ­£å¸¸"
    else
        echo "âŒ ç™»å½•åŠŸèƒ½å¼‚å¸¸"
        return 1
    fi
}

# 2. æ€§èƒ½åŸºå‡†æµ‹è¯•
test_performance() {
    echo "æµ‹è¯•æ€§èƒ½åŸºå‡†..."
    
    # å“åº”æ—¶é—´ä¸åº”è¶…è¿‡500ms
    response_time=$(curl -w "%{time_total}" -o /dev/null -s http://testserver/)
    
    if (( $(echo "$response_time < 0.5" | bc -l) )); then
        echo "âœ… å“åº”æ—¶é—´æ­£å¸¸: ${response_time}s"
    else
        echo "âŒ å“åº”æ—¶é—´å¼‚å¸¸: ${response_time}s"
        return 1
    fi
}

# æ‰§è¡Œæµ‹è¯•
test_basic_functions && test_performance
```

### 6.3 æµ‹è¯•ç”¨ä¾‹çš„ç»´æŠ¤


**ğŸ“š å‰ç½®çŸ¥è¯†**ï¼šå¥½çš„æµ‹è¯•ç”¨ä¾‹æ˜¯å›å½’æµ‹è¯•æˆåŠŸçš„åŸºç¡€

```
æµ‹è¯•ç”¨ä¾‹è®¾è®¡åŸåˆ™ï¼š

å¯é‡å¤æ€§ï¼š
â€¢ ç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡º
â€¢ ä¸ä¾èµ–å¤–éƒ¨ä¸å¯æ§å› ç´ 
â€¢ å¯ä»¥è‡ªåŠ¨åŒ–æ‰§è¡Œ

å…¨é¢æ€§ï¼š
â€¢ è¦†ç›–ä¸»è¦åŠŸèƒ½è·¯å¾„
â€¢ åŒ…å«è¾¹ç•Œæ¡ä»¶æµ‹è¯•  
â€¢ æ¶µç›–æ€§èƒ½åŸºå‡†ç‚¹

å¯ç»´æŠ¤æ€§ï¼š
â€¢ æµ‹è¯•ä»£ç ç»“æ„æ¸…æ™°
â€¢ å®¹æ˜“ä¿®æ”¹å’Œæ‰©å±•
â€¢ æœ‰è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
```

### 6.4 å¤±è´¥æµ‹è¯•çš„åˆ†æ


**ğŸ” æ·±å…¥ç†è§£**ï¼šå›å½’æµ‹è¯•å¤±è´¥æ—¶çš„åˆ†ææ€è·¯

```
åˆ†ææ­¥éª¤ï¼š

1ï¸âƒ£ ç¡®è®¤æµ‹è¯•ç¯å¢ƒ
   - ç¯å¢ƒæ˜¯å¦ä¸ä¹‹å‰ä¸€è‡´ï¼Ÿ
   - ä¾èµ–æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Ÿ

2ï¸âƒ£ å¯¹æ¯”å˜æ›´å†…å®¹  
   - å“ªäº›ä»£ç å‘ç”Ÿäº†å˜åŒ–ï¼Ÿ
   - é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ï¼Ÿ

3ï¸âƒ£ ç¼©å°å½±å“èŒƒå›´
   - æ˜¯æ–°å¼•å…¥çš„é—®é¢˜ï¼Ÿ
   - è¿˜æ˜¯æµ‹è¯•ç”¨ä¾‹éœ€è¦æ›´æ–°ï¼Ÿ

4ï¸âƒ£ ä¿®å¤ä¸éªŒè¯
   - ä¿®å¤é—®é¢˜æˆ–æ›´æ–°æµ‹è¯•
   - é‡æ–°æ‰§è¡Œå®Œæ•´å›å½’æµ‹è¯•
```

---

## 7. ğŸ†š A/Bæµ‹è¯•å¯¹æ¯”


### 7.1 A/Bæµ‹è¯•åœ¨æ•…éšœå¤ç°ä¸­çš„åº”ç”¨


**ğŸ’­ æ€è€ƒä¸€ä¸‹**ï¼šå¦‚ä½•ç¡®å®šæŸä¸ªå˜æ›´çœŸçš„è§£å†³äº†é—®é¢˜ï¼Ÿæœ€å¥½çš„æ–¹æ³•å°±æ˜¯å¯¹æ¯”ï¼

**ğŸŒ° ä¸¾ä¸ªä¾‹å­**ï¼š
```
Aç»„ï¼ˆå¯¹ç…§ç»„ï¼‰ï¼šä¿æŒåŸæ¥çš„é…ç½®
Bç»„ï¼ˆå®éªŒç»„ï¼‰ï¼šä½¿ç”¨æ–°çš„é…ç½®
æµ‹è¯•ç»“æœï¼šBç»„æ•…éšœç‡ä»10%é™ä½åˆ°1%ï¼Œè¯´æ˜æ–°é…ç½®æœ‰æ•ˆ
```

### 7.2 ç¯å¢ƒéš”ç¦»çš„A/Bæµ‹è¯•


**ğŸ—ï¸ çŸ¥è¯†æ¶æ„**ï¼š

```
A/Bæµ‹è¯•æ¶æ„ï¼š

è´Ÿè½½å‡è¡¡å™¨
    |
    â”œâ”€â”€ Aç»„æœåŠ¡å™¨ (åŸé…ç½®)
    |   â”œâ”€â”€ Web Server A1
    |   â”œâ”€â”€ Web Server A2  
    |   â””â”€â”€ Database A
    |
    â””â”€â”€ Bç»„æœåŠ¡å™¨ (æ–°é…ç½®)
        â”œâ”€â”€ Web Server B1
        â”œâ”€â”€ Web Server B2
        â””â”€â”€ Database B
```

**ğŸ’» å®ç°ç¤ºä¾‹**ï¼š

```bash
# Nginxé…ç½®å®ç°A/Bæµ‹è¯•
upstream group_a {
    server 192.168.1.10:8080;
    server 192.168.1.11:8080;
}

upstream group_b {
    server 192.168.1.20:8080;  
    server 192.168.1.21:8080;
}

server {
    location / {
        # 50%æµé‡åˆ°Aç»„ï¼Œ50%åˆ°Bç»„
        if ($request_id ~ "^[0-4]") {
            proxy_pass http://group_a;
        }
        if ($request_id ~ "^[5-9a-f]") {
            proxy_pass http://group_b;
        }
    }
}
```

### 7.3 æ•°æ®æ”¶é›†ä¸åˆ†æ


**ğŸ“Š æ•°æ®è¯´è¯**ï¼šA/Bæµ‹è¯•çš„æˆè´¥å…³é”®åœ¨äºæ•°æ®æ”¶é›†

```bash
# è‡ªåŠ¨åŒ–æ•°æ®æ”¶é›†è„šæœ¬
#!/bin/bash

collect_metrics() {
    local group=$1
    local logfile="/var/log/nginx/${group}_access.log"
    
    echo "=== $group ç»„æ•°æ® ===" 
    echo "æ€»è¯·æ±‚æ•°: $(wc -l < $logfile)"
    echo "é”™è¯¯è¯·æ±‚: $(grep ' 5[0-9][0-9] ' $logfile | wc -l)"
    echo "å¹³å‡å“åº”æ—¶é—´: $(awk '{sum+=$10; count++} END {print sum/count}' $logfile)"
}

# æ¯å°æ—¶æ”¶é›†ä¸€æ¬¡æ•°æ®
while true; do
    collect_metrics "group_a"
    collect_metrics "group_b"
    sleep 3600
done
```

### 7.4 ç»Ÿè®¡æ˜¾è‘—æ€§éªŒè¯


**ğŸ§  è®°å¿†æŠ€å·§**ï¼šä¸æ˜¯çœ‹åˆ°å·®å¼‚å°±è¯´æœ‰æ•ˆæœï¼Œè¦è¯æ˜å·®å¼‚æ˜¯"çœŸå®çš„"è€Œä¸æ˜¯"å¶ç„¶çš„"

```
æ˜¾è‘—æ€§æ£€éªŒæ­¥éª¤ï¼š

1ï¸âƒ£ æ”¶é›†è¶³å¤Ÿæ ·æœ¬
   - Aç»„ï¼š1000æ¬¡è¯·æ±‚ï¼Œ100æ¬¡å¤±è´¥ï¼ˆ10%å¤±è´¥ç‡ï¼‰
   - Bç»„ï¼š1000æ¬¡è¯·æ±‚ï¼Œ50æ¬¡å¤±è´¥ï¼ˆ5%å¤±è´¥ç‡ï¼‰

2ï¸âƒ£ è®¡ç®—ç½®ä¿¡åŒºé—´
   - ä½¿ç”¨ç»Ÿè®¡å­¦æ–¹æ³•éªŒè¯å·®å¼‚
   - é€šå¸¸è¦æ±‚95%ç½®ä¿¡åº¦

3ï¸âƒ£ å¾—å‡ºç»“è®º
   - å¦‚æœå·®å¼‚æ˜¾è‘—ï¼Œè¯´æ˜Bç»„ç¡®å®æ›´å¥½
   - å¦‚æœå·®å¼‚ä¸æ˜¾è‘—ï¼Œéœ€è¦æ›´å¤šæ•°æ®
```

**ğŸ¯ æœ€ä½³å®è·µ**ï¼šè‡³å°‘éœ€è¦1000ä¸ªæ ·æœ¬æ‰èƒ½å¾—å‡ºå¯ä¿¡çš„ç»“è®º

---

## 8. ğŸ’¥ æ¨¡æ‹Ÿæ•…éšœæ³¨å…¥


### 8.1 æ•…éšœæ³¨å…¥çš„åŸºæœ¬æ¦‚å¿µ


**ğŸ·ï¸ ä¸“ä¸šæœ¯è¯­**ï¼šæ•…éšœæ³¨å…¥ï¼ˆFault Injectionï¼‰= æ•…æ„åœ¨ç³»ç»Ÿä¸­å¼•å…¥é”™è¯¯ï¼Œæµ‹è¯•ç³»ç»Ÿçš„å®¹é”™èƒ½åŠ›

**ğŸ¤” ä¸ºä»€ä¹ˆè¿™æ ·**ï¼š
- ç­‰æ•…éšœè‡ªç„¶å‘ç”Ÿï¼šè¢«åŠ¨ã€éšæœºã€é£é™©é«˜
- ä¸»åŠ¨æ•…éšœæ³¨å…¥ï¼šä¸»åŠ¨ã€å¯æ§ã€é£é™©ä½

```
æ•…éšœæ³¨å…¥çš„ä»·å€¼ï¼š

å‘ç°éšæ‚£ï¼š
â€¢ å•ç‚¹æ•…éšœé£é™©
â€¢ çº§è”æ•…éšœå¯èƒ½
â€¢ æ¢å¤æœºåˆ¶ç¼ºé™·

éªŒè¯å®¹é”™ï¼š
â€¢ è‡ªåŠ¨é‡è¯•æœºåˆ¶
â€¢ é™çº§æ–¹æ¡ˆæœ‰æ•ˆæ€§  
â€¢ ç›‘æ§å‘Šè­¦åŠæ—¶æ€§

æå‡ä¿¡å¿ƒï¼š
â€¢ å›¢é˜Ÿæ•…éšœå¤„ç†èƒ½åŠ›
â€¢ ç³»ç»Ÿå¥å£®æ€§æ°´å¹³
â€¢ è¿ç»´å“åº”é€Ÿåº¦
```

### 8.2 ç½‘ç»œæ•…éšœæ³¨å…¥


**ğŸŒ ç½‘ç»œå±‚é¢**ï¼šæ¨¡æ‹Ÿå„ç§ç½‘ç»œå¼‚å¸¸æƒ…å†µ

```bash
# ç½‘ç»œå»¶è¿Ÿæ³¨å…¥
tc qdisc add dev eth0 root netem delay 100ms

# ç½‘ç»œä¸¢åŒ…æ³¨å…¥  
tc qdisc add dev eth0 root netem loss 5%

# ç½‘ç»œæŠ–åŠ¨æ³¨å…¥
tc qdisc add dev eth0 root netem delay 100ms 20ms

# ç½‘ç»œåˆ†åŒºæ¨¡æ‹Ÿï¼ˆå½»åº•æ–­ç½‘ï¼‰
iptables -A INPUT -s 192.168.1.100 -j DROP
iptables -A OUTPUT -d 192.168.1.100 -j DROP

# æ¢å¤ç½‘ç»œ
tc qdisc del dev eth0 root
iptables -F
```

**ğŸ”§ è§£å†³æ–¹æ¡ˆ**ï¼šç½‘ç»œæ•…éšœæ³¨å…¥è„šæœ¬

```bash
#!/bin/bash
# æ¸è¿›å¼ç½‘ç»œæ•…éšœæ³¨å…¥

inject_network_delay() {
    echo "æ³¨å…¥ç½‘ç»œå»¶è¿Ÿ..."
    for delay in 50ms 100ms 200ms 500ms; do
        echo "è®¾ç½®å»¶è¿Ÿ: $delay"
        tc qdisc replace dev eth0 root netem delay $delay
        sleep 60  # è§‚å¯Ÿ60ç§’
        curl -w "å“åº”æ—¶é—´: %{time_total}s\n" http://testserver/
    done
}
```

### 8.3 æœåŠ¡æ•…éšœæ³¨å…¥


**ğŸ’» åº”ç”¨å±‚é¢**ï¼šæ¨¡æ‹ŸæœåŠ¡å¼‚å¸¸å’Œèµ„æºä¸è¶³

```bash
# CPUèµ„æºè€—å°½
stress --cpu $(nproc) --timeout 60s &

# å†…å­˜èµ„æºè€—å°½
stress --vm 1 --vm-bytes 90% --timeout 60s &

# ç£ç›˜ç©ºé—´å¡«æ»¡
dd if=/dev/zero of=/tmp/fillup bs=1M count=1000

# è¿›ç¨‹æ„å¤–ç»ˆæ­¢
pkill -9 nginx
```

**ğŸš¨ é‡è¦æé†’**ï¼šæ•…éšœæ³¨å…¥è¦æœ‰**æ’¤é”€æœºåˆ¶**ï¼Œé¿å…å½±å“æ‰©å¤§åŒ–

```bash
# å¸¦è‡ªåŠ¨æ¢å¤çš„æ•…éšœæ³¨å…¥
inject_fault_with_recovery() {
    local fault_type=$1
    local duration=$2
    
    echo "æ³¨å…¥æ•…éšœ: $fault_typeï¼ŒæŒç»­æ—¶é—´: $duration ç§’"
    
    case $fault_type in
        "cpu")
            stress --cpu $(nproc) --timeout ${duration}s &
            fault_pid=$!
            ;;
        "memory")
            stress --vm 1 --vm-bytes 80% --timeout ${duration}s &
            fault_pid=$!
            ;;
    esac
    
    # è®¾ç½®æ¢å¤å®šæ—¶å™¨
    sleep $duration
    kill $fault_pid 2>/dev/null
    echo "æ•…éšœæ³¨å…¥ç»“æŸï¼Œç³»ç»Ÿæ¢å¤"
}
```

### 8.4 Chaos Engineeringå®è·µ


**ğŸ“š å‰ç½®çŸ¥è¯†**ï¼šæ··æ²Œå·¥ç¨‹æ˜¯Netflixæå‡ºçš„æ•…éšœæ³¨å…¥æ–¹æ³•è®º

```
æ··æ²Œå·¥ç¨‹åŸåˆ™ï¼š

1ï¸âƒ£ å»ºç«‹å‡è®¾
   "ç³»ç»Ÿåœ¨æ­£å¸¸çŠ¶æ€ä¸‹åº”è¯¥..."

2ï¸âƒ£ å¤šæ ·åŒ–äº‹ä»¶  
   - ç¡¬ä»¶æ•…éšœ
   - è½¯ä»¶bug
   - ç½‘ç»œé—®é¢˜

3ï¸âƒ£ ç”Ÿäº§ç¯å¢ƒå®éªŒ
   - åœ¨çœŸå®ç¯å¢ƒä¸­æµ‹è¯•
   - ä½†è¦æ§åˆ¶å½±å“èŒƒå›´

4ï¸âƒ£ è‡ªåŠ¨åŒ–å®æ–½
   - å®šæœŸæ‰§è¡Œ
   - è‡ªåŠ¨åˆ†æç»“æœ
```

**ğŸ› ï¸ å·¥å…·æ¨è**ï¼š

```bash
# ä½¿ç”¨Chaos Toolkit
pip install chaostoolkit

# åˆ›å»ºæ··æ²Œå®éªŒé…ç½®
cat > experiment.json << EOF
{
    "title": "WebæœåŠ¡å®¹é”™æµ‹è¯•",
    "description": "æµ‹è¯•WebæœåŠ¡åœ¨æ•°æ®åº“ä¸å¯ç”¨æ—¶çš„è¡¨ç°",
    "steady-state-hypothesis": {
        "title": "WebæœåŠ¡æ­£å¸¸å“åº”",
        "probes": [
            {
                "type": "probe",
                "name": "web-responds-ok", 
                "tolerance": 200,
                "provider": {
                    "type": "http",
                    "url": "http://localhost/health"
                }
            }
        ]
    },
    "method": [
        {
            "type": "action",
            "name": "stop-db",
            "provider": {
                "type": "process",
                "path": "systemctl",
                "arguments": ["stop", "mysql"]
            }
        }
    ]
}
EOF

# æ‰§è¡Œæ··æ²Œå®éªŒ
chaos run experiment.json
```

---

## 9. ğŸ“Š å¤ç°æˆåŠŸç‡è¯„ä¼°


### 9.1 æˆåŠŸç‡è¯„ä¼°çš„æ„ä¹‰


**ğŸ’¡ ç†è§£è¾…åŠ©**ï¼šå¤ç°æˆåŠŸç‡å°±åƒåŒ»ç”Ÿçš„è¯Šæ–­å‡†ç¡®ç‡ï¼Œæ˜¯è¡¡é‡æ•…éšœæ’æŸ¥èƒ½åŠ›çš„é‡è¦æŒ‡æ ‡

```
æˆåŠŸç‡è¯„ä¼°ç›®æ ‡ï¼š

é‡åŒ–å¤ç°èƒ½åŠ›ï¼š
â€¢ èƒ½å¤ç°å¤šå°‘æ¯”ä¾‹çš„å·²çŸ¥æ•…éšœï¼Ÿ
â€¢ å¤ç°ä¸€ä¸ªæ•…éšœå¹³å‡éœ€è¦å¤šå°‘æ¬¡å°è¯•ï¼Ÿ

ä¼˜åŒ–å¤ç°æ–¹æ³•ï¼š
â€¢ å“ªäº›æ¡ä»¶æ§åˆ¶æœ€å…³é”®ï¼Ÿ
â€¢ å“ªäº›å·¥å…·æœ€æœ‰æ•ˆï¼Ÿ

æå‡æ’æŸ¥æ•ˆç‡ï¼š  
â€¢ å‡å°‘æ— æ•ˆå°è¯•
â€¢ ç¼©çŸ­é—®é¢˜å®šä½æ—¶é—´
```

### 9.2 å¤ç°æˆåŠŸç‡çš„è®¡ç®—æ–¹æ³•


**ğŸ”¢ æ­¥éª¤åˆ†è§£**ï¼š

```
åŸºç¡€æˆåŠŸç‡è®¡ç®—ï¼š

æˆåŠŸç‡ = æˆåŠŸå¤ç°æ¬¡æ•° / æ€»å°è¯•æ¬¡æ•° Ã— 100%

ç¤ºä¾‹ï¼š
- å°è¯•å¤ç°æ•…éšœ10æ¬¡
- æˆåŠŸå¤ç°7æ¬¡  
- æˆåŠŸç‡ = 7/10 Ã— 100% = 70%
```

**ğŸ“ˆ è¿›é˜¶åˆ†æ**ï¼š

```bash
# å¤ç°æˆåŠŸç‡ç»Ÿè®¡è„šæœ¬
#!/bin/bash

declare -A results
total_attempts=0
successful_reproductions=0

run_reproduction_test() {
    local test_name=$1
    local attempts=0
    local successes=0
    
    for i in {1..10}; do
        attempts=$((attempts + 1))
        
        # æ‰§è¡Œå¤ç°æµ‹è¯•
        if reproduce_fault_condition; then
            successes=$((successes + 1))
            echo "âœ… ç¬¬ $i æ¬¡å¤ç°æˆåŠŸ"
        else
            echo "âŒ ç¬¬ $i æ¬¡å¤ç°å¤±è´¥"
        fi
        
        # é‡ç½®ç¯å¢ƒ
        reset_test_environment
        sleep 5
    done
    
    local success_rate=$((successes * 100 / attempts))
    results[$test_name]="$successes/$attempts ($success_rate%)"
    
    total_attempts=$((total_attempts + attempts))
    successful_reproductions=$((successful_reproductions + successes))
}

# ç”ŸæˆæŠ¥å‘Š
generate_report() {
    echo "=== å¤ç°æˆåŠŸç‡æŠ¥å‘Š ==="
    for test in "${!results[@]}"; do
        echo "$test: ${results[$test]}"
    done
    
    local overall_rate=$((successful_reproductions * 100 / total_attempts))
    echo "æ€»ä½“æˆåŠŸç‡: $successful_reproductions/$total_attempts ($overall_rate%)"
}
```

### 9.3 å½±å“æˆåŠŸç‡çš„å› ç´ åˆ†æ


**ğŸ” æ·±å…¥ç†è§£**ï¼šå“ªäº›å› ç´ ä¼šå½±å“å¤ç°æˆåŠŸç‡ï¼Ÿ

```
ç¯å¢ƒå› ç´ ï¼š
âœ… ç¯å¢ƒä¸€è‡´æ€§é«˜ â†’ æˆåŠŸç‡é«˜
âŒ ç¯å¢ƒå·®å¼‚å¤§ â†’ æˆåŠŸç‡ä½

æ¡ä»¶æ§åˆ¶ï¼š
âœ… å…³é”®æ¡ä»¶è¯†åˆ«å‡†ç¡® â†’ æˆåŠŸç‡é«˜  
âŒ é—æ¼é‡è¦æ¡ä»¶ â†’ æˆåŠŸç‡ä½

æ—¶æœºæŠŠæ¡ï¼š
âœ… æ—¶é—´çª—å£å‡†ç¡® â†’ æˆåŠŸç‡é«˜
âŒ æ—¶é—´ç‚¹é”™è¯¯ â†’ æˆåŠŸç‡ä½

å·¥å…·é€‰æ‹©ï¼š
âœ… å·¥å…·é€‚é…æ€§å¥½ â†’ æˆåŠŸç‡é«˜
âŒ å·¥å…·ä¸åŒ¹é… â†’ æˆåŠŸç‡ä½
```

**ğŸ“Š æ•°æ®åˆ†æ**ï¼š

| å› ç´ ç±»åˆ« | **é«˜æˆåŠŸç‡(>80%)** | **ä¸­æˆåŠŸç‡(50-80%)** | **ä½æˆåŠŸç‡(<50%)** |
|---------|------------------|-------------------|------------------|
| **ç¯å¢ƒä¸€è‡´æ€§** | `å®Œå…¨ç›¸åŒ` | `ä¸»è¦å‚æ•°ç›¸åŒ` | `å­˜åœ¨æ˜æ˜¾å·®å¼‚` |
| **æ¡ä»¶è¯†åˆ«** | `å…³é”®æ¡ä»¶æ˜ç¡®` | `éƒ¨åˆ†æ¡ä»¶ä¸ç¡®å®š` | `æ¡ä»¶ä¸æ˜` |
| **å·¥å…·é€‚é…** | `ä¸“é—¨å·¥å…·` | `é€šç”¨å·¥å…·` | `ä¸åˆé€‚å·¥å…·` |

### 9.4 æˆåŠŸç‡æå‡ç­–ç•¥


**ğŸ¯ æœ€ä½³å®è·µ**ï¼š

```
ç­–ç•¥ä¸€ï¼šæ ‡å‡†åŒ–ç¯å¢ƒ
â€¢ ä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²
â€¢ è‡ªåŠ¨åŒ–ç¯å¢ƒé…ç½®
â€¢ ç‰ˆæœ¬æ§åˆ¶ç¯å¢ƒå®šä¹‰

ç­–ç•¥äºŒï¼šç»†åŒ–æ¡ä»¶æ§åˆ¶
â€¢ å»ºç«‹æ¡ä»¶æ£€æŸ¥æ¸…å•
â€¢ ä½¿ç”¨ç›‘æ§éªŒè¯æ¡ä»¶
â€¢ è®°å½•æ¯æ¬¡å°è¯•çš„å·®å¼‚

ç­–ç•¥ä¸‰ï¼šå·¥å…·ä¼˜åŒ–
â€¢ é€‰æ‹©ä¸“ä¸šçš„æ•…éšœæ³¨å…¥å·¥å…·
â€¢ å¼€å‘è‡ªå®šä¹‰è„šæœ¬
â€¢ é›†æˆç›‘æ§å’Œæ—¥å¿—åˆ†æ

ç­–ç•¥å››ï¼šç»éªŒç§¯ç´¯
â€¢ è®°å½•æˆåŠŸå’Œå¤±è´¥æ¡ˆä¾‹
â€¢ å»ºç«‹çŸ¥è¯†åº“
â€¢ å®šæœŸå›é¡¾å’Œæ€»ç»“
```

**ğŸ”‘ å…³é”®è¯æå–**ï¼šç¯å¢ƒæ ‡å‡†åŒ–ã€æ¡ä»¶ç»†åŒ–ã€å·¥å…·ä¸“ä¸šåŒ–ã€ç»éªŒç³»ç»ŸåŒ–

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ¯ æ•…éšœå¤ç° = åœ¨å¯æ§ç¯å¢ƒä¸­é‡æ–°è§¦å‘å·²å‘ç”Ÿçš„ç³»ç»Ÿé—®é¢˜
ğŸ—ï¸ å¤ç°ç¯å¢ƒ = ä¸ç”Ÿäº§ç¯å¢ƒç›¸ä¼¼ä½†å¯æ§çš„æµ‹è¯•ç¯å¢ƒ  
ğŸ” æ¡ä»¶è¯†åˆ« = ç³»ç»Ÿæ€§åˆ†ææ•…éšœè§¦å‘çš„å¿…è¦å’Œå……åˆ†æ¡ä»¶
âš¡ å‹åŠ›æµ‹è¯• = é€šè¿‡è¶…è´Ÿè·è¿è¡Œè§¦å‘æ•…éšœç°è±¡
ğŸ¯ è¾¹ç•Œæµ‹è¯• = åœ¨ç³»ç»Ÿæé™æ¡ä»¶ä¸‹éªŒè¯æ•…éšœè¡Œä¸º
ğŸ”„ å›å½’æµ‹è¯• = ç¡®ä¿ä¿®å¤æ–¹æ¡ˆä¸å¼•å…¥æ–°é—®é¢˜
ğŸ†š A/Bæµ‹è¯• = é€šè¿‡å¯¹æ¯”éªŒè¯è§£å†³æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§
ğŸ’¥ æ•…éšœæ³¨å…¥ = ä¸»åŠ¨åœ¨ç³»ç»Ÿä¸­å¼•å…¥é”™è¯¯è¿›è¡Œæµ‹è¯•
```

### 10.2 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ¢ å®é™…åº”ç”¨åœºæ™¯**ï¼š

```
Webåº”ç”¨æ•…éšœå¤ç°ï¼š
âœ… æ­å»ºDockerå®¹å™¨åŒ–æµ‹è¯•ç¯å¢ƒ
âœ… ä½¿ç”¨abå·¥å…·è¿›è¡Œå‹åŠ›æµ‹è¯•
âœ… æ¨¡æ‹Ÿé«˜å¹¶å‘ç”¨æˆ·è®¿é—®
âœ… æ³¨å…¥ç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…

æ•°æ®åº“æ€§èƒ½é—®é¢˜ï¼š
âœ… ä½¿ç”¨sysbenchç”Ÿæˆæµ‹è¯•æ•°æ®
âœ… æ¨¡æ‹Ÿå¤§é‡å¹¶å‘æŸ¥è¯¢
âœ… æµ‹è¯•å†…å­˜å’Œè¿æ¥æ•°é™åˆ¶
âœ… éªŒè¯æ…¢æŸ¥è¯¢ä¼˜åŒ–æ•ˆæœ

ç³»ç»Ÿèµ„æºè€—å°½ï¼š
âœ… ä½¿ç”¨stresså·¥å…·æ¨¡æ‹Ÿèµ„æºå‹åŠ›
âœ… æµ‹è¯•å„ç§è¾¹ç•Œæ¡ä»¶
âœ… éªŒè¯ç›‘æ§å‘Šè­¦æœºåˆ¶
âœ… æµ‹è¯•è‡ªåŠ¨æ¢å¤èƒ½åŠ›
```

### 10.3 å…³é”®æˆåŠŸå› ç´ 


**ğŸ”‘ æ ¸å¿ƒè¦ç‚¹**ï¼š

```
ç¯å¢ƒå‡†å¤‡ï¼š
â€¢ ç¯å¢ƒä¸€è‡´æ€§æ˜¯å¤ç°æˆåŠŸçš„åŸºç¡€
â€¢ å¿«ç…§å’Œç‰ˆæœ¬ç®¡ç†æé«˜æ•ˆç‡
â€¢ å®¹å™¨åŒ–ç®€åŒ–ç¯å¢ƒç®¡ç†

æ–¹æ³•è®ºï¼š
â€¢ ç³»ç»Ÿæ€§åœ°è¯†åˆ«å’Œæ§åˆ¶æ¡ä»¶
â€¢ å•å˜é‡æ§åˆ¶æ³•æ‰¾åˆ°æ ¹æœ¬åŸå› 
â€¢ ç”¨æ•°æ®è¯´è¯ï¼Œé¿å…ä¸»è§‚åˆ¤æ–­

å·¥å…·é€‰æ‹©ï¼š
â€¢ é€‰æ‹©åˆé€‚çš„å‹åŠ›æµ‹è¯•å·¥å…·
â€¢ ä½¿ç”¨ä¸“ä¸šçš„æ•…éšœæ³¨å…¥æ¡†æ¶
â€¢ è‡ªåŠ¨åŒ–æµ‹è¯•å’Œç›‘æ§è„šæœ¬

æŒç»­æ”¹è¿›ï¼š
â€¢ è®°å½•æ¯æ¬¡å¤ç°çš„æˆåŠŸå’Œå¤±è´¥
â€¢ å»ºç«‹æ•…éšœå¤ç°çŸ¥è¯†åº“
â€¢ å®šæœŸè¯„ä¼°å’Œä¼˜åŒ–å¤ç°æ–¹æ³•
```

### 10.4 é¿å…å¸¸è§è¯¯åŒº


**âŒ å¸¸è§é”™è¯¯**ï¼š

```
ç¯å¢ƒé”™è¯¯ï¼š
âŒ æµ‹è¯•ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒå·®å¼‚å¤ªå¤§
âœ… ä¿æŒå…³é”®é…ç½®å‚æ•°ä¸€è‡´

æ–¹æ³•é”™è¯¯ï¼š
âŒ åŒæ—¶æ”¹å˜å¤šä¸ªå˜é‡
âœ… ä¸€æ¬¡åªæ”¹å˜ä¸€ä¸ªæ¡ä»¶

å¿ƒæ€é”™è¯¯ï¼š
âŒ å¤ç°å¤±è´¥å°±æ”¾å¼ƒ
âœ… åˆ†æå¤±è´¥åŸå› ï¼ŒæŒç»­æ”¹è¿›

å·¥å…·é”™è¯¯ï¼š  
âŒ ä½¿ç”¨ä¸åˆé€‚çš„æµ‹è¯•å·¥å…·
âœ… æ ¹æ®æ•…éšœç±»å‹é€‰æ‹©ä¸“ä¸šå·¥å…·
```

### 10.5 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ“ˆ è¿›é˜¶è·¯å¾„**ï¼š

```
åˆçº§é˜¶æ®µï¼š
ğŸ“ æŒæ¡åŸºç¡€çš„å¤ç°ç¯å¢ƒæ­å»º
ğŸ“ å­¦ä¼šä½¿ç”¨å¸¸ç”¨å‹åŠ›æµ‹è¯•å·¥å…·
ğŸ“ ç†è§£è¾¹ç•Œæ¡ä»¶æµ‹è¯•çš„é‡è¦æ€§

ä¸­çº§é˜¶æ®µï¼š
ğŸ“ èƒ½å¤Ÿç³»ç»Ÿæ€§åœ°åˆ†ææ•…éšœæ¡ä»¶
ğŸ“ ç†Ÿç»ƒä½¿ç”¨å„ç§æ•…éšœæ³¨å…¥æŠ€æœ¯
ğŸ“ å»ºç«‹è‡ªåŠ¨åŒ–å¤ç°æµ‹è¯•æµç¨‹

é«˜çº§é˜¶æ®µï¼š
ğŸ“ è®¾è®¡å¤æ‚çš„A/Bå¯¹æ¯”æµ‹è¯•
ğŸ“ å®æ–½æ··æ²Œå·¥ç¨‹å®è·µ
ğŸ“ å»ºç«‹å®Œæ•´çš„å¤ç°æ–¹æ³•ä½“ç³»
```

**ğŸª è®°å¿†å£è¯€**ï¼š
- ç¯å¢ƒç›¸ä¼¼æ¡ä»¶æ¸…ï¼Œå‹åŠ›è¾¹ç•Œè¦æµ‹æ˜
- å›å½’å¯¹æ¯”éªŒæ•ˆæœï¼Œæ•…éšœæ³¨å…¥å¼ºéŸ§æ€§
- æˆåŠŸç‡é«˜æ˜¯ç›®æ ‡ï¼ŒæŒç»­æ”¹è¿›æ–¹æ³•ç²¾

**æ ¸å¿ƒç†å¿µ**ï¼šæ•…éšœå¤ç°ä¸æ˜¯ç›®çš„ï¼Œç†è§£å’Œè§£å†³é—®é¢˜æ‰æ˜¯ç›®æ ‡ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„å¤ç°æ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«é€Ÿã€æ›´å‡†ç¡®åœ°å®šä½å’Œä¿®å¤ç³»ç»Ÿé—®é¢˜ï¼Œæå‡æ•´ä½“è¿ç»´æ°´å¹³ã€‚