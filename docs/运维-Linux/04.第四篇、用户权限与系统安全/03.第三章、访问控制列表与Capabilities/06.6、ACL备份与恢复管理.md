---
title: 6ã€ACLå¤‡ä»½ä¸æ¢å¤ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [ACLå¤‡ä»½çš„åŸºæœ¬æ¦‚å¿µ](#1-ACLå¤‡ä»½çš„åŸºæœ¬æ¦‚å¿µ)
2. [getfaclå‘½ä»¤è¯¦è§£ä¸å¤‡ä»½](#2-getfaclå‘½ä»¤è¯¦è§£ä¸å¤‡ä»½)
3. [setfaclæƒé™æ¢å¤æ“ä½œ](#3-setfaclæƒé™æ¢å¤æ“ä½œ)
4. [æ‰¹é‡ACLå¤‡ä»½ä¸æ¢å¤è„šæœ¬](#4-æ‰¹é‡ACLå¤‡ä»½ä¸æ¢å¤è„šæœ¬)
5. [ç›®å½•æ ‘ACLå®Œæ•´å¤‡ä»½æ–¹æ¡ˆ](#5-ç›®å½•æ ‘ACLå®Œæ•´å¤‡ä»½æ–¹æ¡ˆ)
6. [ACLæƒé™è¿ç§»ä¸åŒæ­¥](#6-ACLæƒé™è¿ç§»ä¸åŒæ­¥)
7. [tarä¸rsyncçš„ACLæ”¯æŒ](#7-tarä¸rsyncçš„ACLæ”¯æŒ)
8. [ACLå¤‡ä»½éªŒè¯ä¸æ£€æŸ¥](#8-ACLå¤‡ä»½éªŒè¯ä¸æ£€æŸ¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” ACLå¤‡ä»½çš„åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ACLå¤‡ä»½

**ç®€å•ç†è§£**ï¼šå°±åƒç»™é‡è¦æ–‡ä»¶æ‹ç…§å­˜æ¡£ä¸€æ ·ï¼ŒACLå¤‡ä»½å°±æ˜¯æŠŠæ–‡ä»¶çš„æƒé™è®¾ç½®è®°å½•ä¸‹æ¥ï¼Œé˜²æ­¢ä¸¢å¤±æˆ–éœ€è¦æ¢å¤æ—¶ä½¿ç”¨ã€‚

```
â”Œâ”€ ACLå¤‡ä»½æµç¨‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸå§‹æ–‡ä»¶æƒé™ â†’ å¤‡ä»½è®°å½• â†’ æ¢å¤åº”ç”¨ â”‚
â”‚     â†“            â†“          â†“     â”‚
â”‚  getfacl     æ–‡æœ¬æ–‡ä»¶    setfacl  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä¸ºä»€ä¹ˆè¦å¤‡ä»½ACL

**å®é™…éœ€æ±‚åœºæ™¯**ï¼š
- **ç³»ç»Ÿé‡è£…**ï¼šé‡æ–°å®‰è£…ç³»ç»Ÿåéœ€è¦æ¢å¤æƒé™
- **æ–‡ä»¶è¿ç§»**ï¼šå°†æ–‡ä»¶ç§»åŠ¨åˆ°æ–°æœåŠ¡å™¨æ—¶ä¿æŒæƒé™
- **æƒé™è¯¯æ“ä½œ**ï¼šé”™è¯¯ä¿®æ”¹æƒé™åéœ€è¦è¿˜åŸ
- **å®šæœŸå¤‡ä»½**ï¼šå®šæœŸä¿å­˜æƒé™é…ç½®ä½œä¸ºå®‰å…¨æªæ–½

ğŸ¯ **æ ¸å¿ƒç†å¿µ**ï¼šæƒé™ä¸¢å¤±æ¯”æ•°æ®ä¸¢å¤±æ›´éš¾æ¢å¤ï¼Œå› ä¸ºä½ å¯èƒ½å¿˜è®°äº†åŸæ¥çš„æƒé™è®¾ç½®

### 1.3 ACLå¤‡ä»½çš„å†…å®¹

**å¤‡ä»½ä»€ä¹ˆ**ï¼š
```
â”Œâ”€ ACLå®Œæ•´å¤‡ä»½å†…å®¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ åŸºæœ¬æƒé™ï¼ˆowner, group, otherï¼‰ â”‚
â”‚ â€¢ æ‰©å±•ACLæƒé™ï¼ˆuser:, group:ï¼‰   â”‚
â”‚ â€¢ é»˜è®¤ACLæƒé™ï¼ˆç›®å½•ä¸“ç”¨ï¼‰        â”‚
â”‚ â€¢ æƒé™æ©ç ï¼ˆmaskï¼‰              â”‚
â”‚ â€¢ ç»§æ‰¿è®¾ç½®                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ğŸ“‹ getfaclå‘½ä»¤è¯¦è§£ä¸å¤‡ä»½


### 2.1 getfaclåŸºæœ¬ç”¨æ³•

**ä½œç”¨**ï¼šè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„ACLæƒé™ä¿¡æ¯

```bash
# æŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„ACL
getfacl filename.txt

# æŸ¥çœ‹ç›®å½•çš„ACLï¼ˆåŒ…æ‹¬é»˜è®¤ACLï¼‰
getfacl project_dir/
```

**è¾“å‡ºæ ¼å¼è§£è¯»**ï¼š
```bash
# file: test.txt
# owner: alice
# group: developers
user::rw-
user:bob:r--
group::r--
mask::r--
other::---
```

ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼š
- `# file:` æ–‡ä»¶å
- `# owner:` æ–‡ä»¶æ‰€æœ‰è€…
- `# group:` æ–‡ä»¶æ‰€å±ç»„
- `user::` æ‰€æœ‰è€…æƒé™
- `user:bob:` ç”¨æˆ·bobçš„æƒé™
- `group::` æ‰€å±ç»„æƒé™
- `mask::` æƒé™æ©ç 
- `other::` å…¶ä»–ç”¨æˆ·æƒé™

### 2.2 è¾“å‡ºé‡å®šå‘å¤‡ä»½

**å•æ–‡ä»¶å¤‡ä»½**ï¼š
```bash
# å¤‡ä»½å•ä¸ªæ–‡ä»¶çš„ACLåˆ°æ–‡æœ¬æ–‡ä»¶
getfacl /path/to/important_file > important_file.acl

# æŸ¥çœ‹å¤‡ä»½å†…å®¹
cat important_file.acl
```

**æ‰¹é‡æ–‡ä»¶å¤‡ä»½**ï¼š
```bash
# å¤‡ä»½å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶çš„ACL
getfacl * > current_dir_acl.backup

# å¤‡ä»½æŒ‡å®šç›®å½•åŠå…¶å­ç›®å½•çš„æ‰€æœ‰ACL
getfacl -R /project/ > project_acl_backup.txt
```

### 2.3 getfaclé«˜çº§é€‰é¡¹

**å¸¸ç”¨é€‰é¡¹è¯¦è§£**ï¼š

| é€‰é¡¹ | **ä½œç”¨** | **ä½¿ç”¨åœºæ™¯** |
|------|----------|--------------|
| `-R` | `é€’å½’å¤„ç†ç›®å½•` | `å¤‡ä»½æ•´ä¸ªç›®å½•æ ‘` |
| `-L` | `éå†ç¬¦å·é“¾æ¥` | `åŒ…å«é“¾æ¥æ–‡ä»¶çš„æƒé™` |
| `-P` | `ä¸éå†ç¬¦å·é“¾æ¥` | `åªå¤‡ä»½é“¾æ¥æœ¬èº«æƒé™` |
| `-t` | `è¡¨æ ¼æ ¼å¼è¾“å‡º` | `ä¾¿äºè„šæœ¬å¤„ç†` |
| `-n` | `æ˜¾ç¤ºæ•°å­—IDè€Œéåç§°` | `è·¨ç³»ç»Ÿå¤‡ä»½æ—¶ä½¿ç”¨` |

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# é€’å½’å¤‡ä»½ï¼ŒåŒ…å«ç¬¦å·é“¾æ¥
getfacl -RL /var/www/ > web_acl_backup.txt

# æ•°å­—æ ¼å¼å¤‡ä»½ï¼ˆä¾¿äºè·¨ç³»ç»Ÿè¿ç§»ï¼‰
getfacl -n /etc/sensitive_files > sensitive_acl_numeric.backup
```

### 2.4 å¤‡ä»½æ–‡ä»¶ç»„ç»‡

**åˆç†çš„å¤‡ä»½æ–‡ä»¶å‘½å**ï¼š
```bash
# æŒ‰æ—¥æœŸå‘½å
getfacl -R /home/users > acl_backup_$(date +%Y%m%d).txt

# æŒ‰æœåŠ¡åˆ†ç±»
getfacl -R /var/www > web_server_acl.backup
getfacl -R /var/lib/mysql > database_acl.backup
```

ğŸ“ **æœ€ä½³å®è·µ**ï¼š
- å¤‡ä»½æ–‡ä»¶ä½¿ç”¨`.acl`æˆ–`.backup`åç¼€ä¾¿äºè¯†åˆ«
- åŒ…å«æ—¥æœŸæ—¶é—´ä¿¡æ¯ä¾¿äºç‰ˆæœ¬ç®¡ç†
- åˆ†ç±»å­˜å‚¨ä¸åŒæœåŠ¡çš„ACLå¤‡ä»½

---

## 3. ğŸ”„ setfaclæƒé™æ¢å¤æ“ä½œ


### 3.1 setfaclåŸºæœ¬æ¢å¤è¯­æ³•

**ä»å¤‡ä»½æ–‡ä»¶æ¢å¤æƒé™**ï¼š
```bash
# åŸºæœ¬æ¢å¤è¯­æ³•
setfacl --restore=backup_file.acl

# æˆ–ä½¿ç”¨çŸ­é€‰é¡¹
setfacl -M backup_file.acl
```

### 3.2 å•æ–‡ä»¶æƒé™æ¢å¤

**æ¢å¤æ­¥éª¤**ï¼š
```bash
# ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½åŸæƒé™
getfacl important_file.txt > important_file.acl

# ï¼ˆæ¨¡æ‹Ÿæƒé™è¢«ç ´åï¼‰
chmod 000 important_file.txt

# ç¬¬äºŒæ­¥ï¼šæ¢å¤æƒé™
setfacl --restore=important_file.acl

# ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ¢å¤ç»“æœ
getfacl important_file.txt
```

ğŸ’¡ **æ“ä½œè¯´æ˜**ï¼š
- `--restore=` é€‰é¡¹ä¼šè¯»å–å¤‡ä»½æ–‡ä»¶ä¸­çš„æ‰€æœ‰ACLä¿¡æ¯
- è‡ªåŠ¨åº”ç”¨åˆ°å¯¹åº”çš„æ–‡ä»¶æˆ–ç›®å½•
- å¦‚æœæ–‡ä»¶è·¯å¾„æ”¹å˜ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–è¾‘å¤‡ä»½æ–‡ä»¶

### 3.3 æ‰¹é‡æƒé™æ¢å¤

**ç›®å½•æ ‘æ¢å¤**ï¼š
```bash
# æ¢å¤æ•´ä¸ªé¡¹ç›®ç›®å½•çš„æƒé™
setfacl --restore=project_acl_backup.txt

# å¼ºåˆ¶æ¢å¤ï¼ˆå¿½ç•¥é”™è¯¯ï¼‰
setfacl --restore=backup.acl || echo "éƒ¨åˆ†æƒé™æ¢å¤å¤±è´¥"
```

### 3.4 æ¢å¤è¿‡ç¨‹ä¸­çš„æ³¨æ„äº‹é¡¹

ğŸ”¸ **è·¯å¾„åŒ¹é…é—®é¢˜**ï¼š
```bash
# å¤‡ä»½æ—¶çš„è·¯å¾„
getfacl /old/path/file.txt > file.acl

# å¦‚æœæ¢å¤æ—¶è·¯å¾„æ”¹å˜ï¼Œéœ€è¦ç¼–è¾‘å¤‡ä»½æ–‡ä»¶
sed 's|/old/path/|/new/path/|g' file.acl > file_new.acl
setfacl --restore=file_new.acl
```

ğŸ”¸ **ç”¨æˆ·/ç»„ä¸å­˜åœ¨é—®é¢˜**ï¼š
```bash
# å¦‚æœå¤‡ä»½ä¸­çš„ç”¨æˆ·ä¸å­˜åœ¨ï¼Œä¼šå‡ºç°é”™è¯¯
# å¯ä»¥å…ˆæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨
id username 2>/dev/null || echo "ç”¨æˆ·ä¸å­˜åœ¨ï¼Œéœ€è¦å…ˆåˆ›å»º"
```

---

## 4. ğŸ“„ æ‰¹é‡ACLå¤‡ä»½ä¸æ¢å¤è„šæœ¬


### 4.1 æ™ºèƒ½å¤‡ä»½è„šæœ¬

**åŠŸèƒ½å®Œæ•´çš„å¤‡ä»½è„šæœ¬**ï¼š
```bash
#!/bin/bash
# ACLæ‰¹é‡å¤‡ä»½è„šæœ¬ - acl_backup.sh

# é…ç½®å˜é‡
BACKUP_DIR="/backup/acl"
LOG_FILE="$BACKUP_DIR/backup.log"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_DIR"

# æ—¥å¿—è®°å½•å‡½æ•°
log_message() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" | tee -a "$LOG_FILE"
}

# å¤‡ä»½å‡½æ•°
backup_acl() {
    local source_path="$1"
    local backup_name="$2"
    
    if [ -d "$source_path" ] || [ -f "$source_path" ]; then
        log_message "å¼€å§‹å¤‡ä»½: $source_path"
        getfacl -R "$source_path" > "$BACKUP_DIR/${backup_name}_${DATE}.acl"
        
        if [ $? -eq 0 ]; then
            log_message "å¤‡ä»½æˆåŠŸ: ${backup_name}_${DATE}.acl"
        else
            log_message "å¤‡ä»½å¤±è´¥: $source_path"
        fi
    else
        log_message "è·¯å¾„ä¸å­˜åœ¨: $source_path"
    fi
}

# æ‰§è¡Œå¤‡ä»½
log_message "=== ACLå¤‡ä»½å¼€å§‹ ==="

# å¤‡ä»½é‡è¦ç›®å½•
backup_acl "/home" "home_users"
backup_acl "/var/www" "web_server"
backup_acl "/etc" "system_config"

log_message "=== ACLå¤‡ä»½å®Œæˆ ==="

# æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™30å¤©ï¼‰
find "$BACKUP_DIR" -name "*.acl" -mtime +30 -delete
log_message "æ¸…ç†30å¤©å‰çš„æ—§å¤‡ä»½æ–‡ä»¶"
```

### 4.2 æ™ºèƒ½æ¢å¤è„šæœ¬

**å®‰å…¨çš„æ¢å¤è„šæœ¬**ï¼š
```bash
#!/bin/bash
# ACLæ‰¹é‡æ¢å¤è„šæœ¬ - acl_restore.sh

BACKUP_FILE="$1"
DRY_RUN="$2"

# å‚æ•°æ£€æŸ¥
if [ -z "$BACKUP_FILE" ] || [ ! -f "$BACKUP_FILE" ]; then
    echo "ç”¨æ³•: $0 <backup_file.acl> [--dry-run]"
    echo "ç¤ºä¾‹: $0 /backup/acl/web_server_20241201.acl"
    exit 1
fi

# é¢„æ£€æŸ¥å‡½æ•°
pre_check() {
    echo "=== æ¢å¤å‰æ£€æŸ¥ ==="
    
    # æ£€æŸ¥å¤‡ä»½æ–‡ä»¶ä¸­çš„ç”¨æˆ·æ˜¯å¦å­˜åœ¨
    echo "æ£€æŸ¥ç”¨æˆ·å­˜åœ¨æ€§..."
    grep "^user:" "$BACKUP_FILE" | cut -d: -f2 | sort -u | while read -r username; do
        if [ -n "$username" ] && ! id "$username" &>/dev/null; then
            echo "âš ï¸  ç”¨æˆ·ä¸å­˜åœ¨: $username"
        fi
    done
    
    # æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨
    echo "æ£€æŸ¥æ–‡ä»¶è·¯å¾„..."
    grep "^# file:" "$BACKUP_FILE" | sed 's/^# file: //' | head -5 | while read -r filepath; do
        if [ ! -e "$filepath" ]; then
            echo "âš ï¸  æ–‡ä»¶ä¸å­˜åœ¨: $filepath"
        fi
    done
}

# æ‰§è¡Œæ¢å¤
restore_acl() {
    if [ "$DRY_RUN" = "--dry-run" ]; then
        echo "=== æ¨¡æ‹Ÿæ¢å¤ï¼ˆä¸å®é™…æ‰§è¡Œï¼‰ ==="
        echo "å°†è¦æ¢å¤çš„æ–‡ä»¶æ•°é‡: $(grep -c '^# file:' "$BACKUP_FILE")"
        return
    fi
    
    echo "=== å¼€å§‹æ¢å¤ACLæƒé™ ==="
    
    # åˆ›å»ºæ¢å¤å‰çš„å¤‡ä»½
    CURRENT_BACKUP="/tmp/acl_before_restore_$(date +%s).acl"
    echo "åˆ›å»ºæ¢å¤å‰å¤‡ä»½: $CURRENT_BACKUP"
    
    # å¤‡ä»½å½“å‰æƒé™
    grep "^# file:" "$BACKUP_FILE" | sed 's/^# file: //' | while read -r filepath; do
        if [ -e "$filepath" ]; then
            getfacl "$filepath" >> "$CURRENT_BACKUP"
        fi
    done
    
    # æ‰§è¡Œæ¢å¤
    if setfacl --restore="$BACKUP_FILE" 2>/dev/null; then
        echo "âœ… ACLæƒé™æ¢å¤æˆåŠŸ"
    else
        echo "âŒ ACLæƒé™æ¢å¤è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯"
        echo "å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å›æ»š: setfacl --restore=$CURRENT_BACKUP"
    fi
}

# ä¸»æ‰§è¡Œæµç¨‹
pre_check
restore_acl
```

### 4.3 å®šæ—¶å¤‡ä»½é…ç½®

**è®¾ç½®cronå®šæ—¶ä»»åŠ¡**ï¼š
```bash
# ç¼–è¾‘å®šæ—¶ä»»åŠ¡
crontab -e

# æ¯æ—¥å‡Œæ™¨2ç‚¹å¤‡ä»½ACL
0 2 * * * /usr/local/bin/acl_backup.sh >/dev/null 2>&1

# æ¯å‘¨æ—¥æ¸…ç†æ—§å¤‡ä»½
0 3 * * 0 find /backup/acl -name "*.acl" -mtime +30 -delete
```

---

## 5. ğŸŒ³ ç›®å½•æ ‘ACLå®Œæ•´å¤‡ä»½æ–¹æ¡ˆ


### 5.1 é€’å½’å¤‡ä»½ç­–ç•¥

**å®Œæ•´ç›®å½•æ ‘å¤‡ä»½**ï¼š
```bash
# å¤‡ä»½æ•´ä¸ªç›®å½•æ ‘åŠå…¶ACL
backup_directory_tree() {
    local source_dir="$1"
    local backup_base="$2"
    
    # åˆ›å»ºå¤‡ä»½ç›®å½•ç»“æ„
    mkdir -p "$backup_base/acl"
    mkdir -p "$backup_base/structure"
    
    # å¤‡ä»½ç›®å½•ç»“æ„
    find "$source_dir" -type d > "$backup_base/structure/directories.list"
    find "$source_dir" -type f > "$backup_base/structure/files.list"
    find "$source_dir" -type l > "$backup_base/structure/symlinks.list"
    
    # å¤‡ä»½ACLæƒé™
    getfacl -R "$source_dir" > "$backup_base/acl/permissions.acl"
    
    # å¤‡ä»½åŸºæœ¬æƒé™ï¼ˆä½œä¸ºfallbackï¼‰
    find "$source_dir" -printf "%M %u %g %p\n" > "$backup_base/basic_permissions.txt"
}

# ä½¿ç”¨ç¤ºä¾‹
backup_directory_tree "/var/www/html" "/backup/web_$(date +%Y%m%d)"
```

### 5.2 åˆ†å±‚å¤‡ä»½æ–¹æ¡ˆ

**æŒ‰é‡è¦æ€§åˆ†å±‚å¤‡ä»½**ï¼š
```
å¤‡ä»½å±‚çº§ç»“æ„ï¼š
â”Œâ”€ æ ¸å¿ƒç³»ç»Ÿç›®å½• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /etc â†’ ç³»ç»Ÿé…ç½®æƒé™           â”‚
â”‚ /var/log â†’ æ—¥å¿—ç›®å½•æƒé™       â”‚
â”‚ /usr/local â†’ æœ¬åœ°ç¨‹åºæƒé™     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ ç”¨æˆ·æ•°æ®ç›®å½• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /home â†’ ç”¨æˆ·ä¸»ç›®å½•æƒé™        â”‚
â”‚ /var/www â†’ WebæœåŠ¡æƒé™        â”‚
â”‚ /opt â†’ ç¬¬ä¸‰æ–¹è½¯ä»¶æƒé™         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ ä¸´æ—¶å·¥ä½œç›®å½• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /tmp â†’ ä¸´æ—¶æ–‡ä»¶æƒé™           â”‚
â”‚ /var/tmp â†’ å˜é‡ä¸´æ—¶ç›®å½•æƒé™   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ†å±‚å¤‡ä»½è„šæœ¬**ï¼š
```bash
#!/bin/bash
# åˆ†å±‚å¤‡ä»½è„šæœ¬

BACKUP_ROOT="/backup/system_acl/$(date +%Y%m%d)"
mkdir -p "$BACKUP_ROOT"

# æ ¸å¿ƒç³»ç»Ÿå¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰
echo "å¤‡ä»½æ ¸å¿ƒç³»ç»Ÿç›®å½•..."
getfacl -R /etc > "$BACKUP_ROOT/system_core.acl"

# ç”¨æˆ·æ•°æ®å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰
echo "å¤‡ä»½ç”¨æˆ·æ•°æ®ç›®å½•..."
getfacl -R /home > "$BACKUP_ROOT/user_data.acl"
getfacl -R /var/www > "$BACKUP_ROOT/web_data.acl"

# å®Œæ•´å¤‡ä»½ï¼ˆæ¯å‘¨ï¼‰
if [ "$(date +%u)" -eq 7 ]; then
    echo "æ‰§è¡Œæ¯å‘¨å®Œæ•´å¤‡ä»½..."
    getfacl -R / > "$BACKUP_ROOT/full_system.acl" 2>/dev/null
fi
```

---

## 6. ğŸ”„ ACLæƒé™è¿ç§»ä¸åŒæ­¥


### 6.1 è·¨æœåŠ¡å™¨æƒé™è¿ç§»

**è¿ç§»åœºæ™¯**ï¼šå°†ä¸€å°æœåŠ¡å™¨çš„ACLæƒé™è®¾ç½®åº”ç”¨åˆ°å¦ä¸€å°æœåŠ¡å™¨

```bash
# æºæœåŠ¡å™¨æ“ä½œ
source_server_backup() {
    # å¤‡ä»½ACLæƒé™
    getfacl -R /var/www > /tmp/web_acl.backup
    
    # å¤‡ä»½ç”¨æˆ·å’Œç»„ä¿¡æ¯
    getent passwd > /tmp/users.backup
    getent group > /tmp/groups.backup
    
    # æ‰“åŒ…ä¼ è¾“
    tar czf acl_migration.tar.gz -C /tmp web_acl.backup users.backup groups.backup
}

# ç›®æ ‡æœåŠ¡å™¨æ“ä½œ
target_server_restore() {
    # è§£å‹å¤‡ä»½æ–‡ä»¶
    tar xzf acl_migration.tar.gz -C /tmp
    
    # æ£€æŸ¥å¹¶åˆ›å»ºç¼ºå¤±çš„ç”¨æˆ·
    while IFS=: read -r username password uid gid gecos home shell; do
        if ! id "$username" &>/dev/null; then
            echo "åˆ›å»ºç”¨æˆ·: $username"
            useradd -u "$uid" -g "$gid" -d "$home" -s "$shell" "$username"
        fi
    done < /tmp/users.backup
    
    # æ¢å¤ACLæƒé™
    setfacl --restore=/tmp/web_acl.backup
}
```

### 6.2 æƒé™åŒæ­¥è„šæœ¬

**å®æ—¶åŒæ­¥æ–¹æ¡ˆ**ï¼š
```bash
#!/bin/bash
# ACLåŒæ­¥è„šæœ¬ - acl_sync.sh

SOURCE_HOST="$1"
TARGET_PATH="$2"
SYNC_PATH="$3"

# å‚æ•°éªŒè¯
if [ $# -ne 3 ]; then
    echo "ç”¨æ³•: $0 <æºä¸»æœº> <ç›®æ ‡è·¯å¾„> <åŒæ­¥è·¯å¾„>"
    echo "ç¤ºä¾‹: $0 web-server-01 /var/www /backup/sync"
    exit 1
fi

# ä»æºä¸»æœºè·å–ACLæƒé™
get_remote_acl() {
    ssh "$SOURCE_HOST" "getfacl -R '$TARGET_PATH'" > "$SYNC_PATH/remote_acl.backup"
}

# æ¯”è¾ƒæƒé™å·®å¼‚
compare_acl() {
    local current_acl="$SYNC_PATH/current_acl.backup"
    local remote_acl="$SYNC_PATH/remote_acl.backup"
    
    # è·å–æœ¬åœ°å½“å‰æƒé™
    getfacl -R "$TARGET_PATH" > "$current_acl"
    
    # æ¯”è¾ƒå·®å¼‚
    if diff -q "$current_acl" "$remote_acl" >/dev/null; then
        echo "æƒé™å·²åŒæ­¥ï¼Œæ— éœ€æ›´æ–°"
        return 0
    else
        echo "å‘ç°æƒé™å·®å¼‚ï¼Œéœ€è¦åŒæ­¥"
        return 1
    fi
}

# æ‰§è¡ŒåŒæ­¥
sync_acl() {
    local remote_acl="$SYNC_PATH/remote_acl.backup"
    
    # åˆ›å»ºåŒæ­¥å‰å¤‡ä»½
    getfacl -R "$TARGET_PATH" > "$SYNC_PATH/before_sync_$(date +%s).backup"
    
    # åº”ç”¨è¿œç¨‹æƒé™
    setfacl --restore="$remote_acl"
    
    echo "ACLæƒé™åŒæ­¥å®Œæˆ"
}

# ä¸»æ‰§è¡Œæµç¨‹
mkdir -p "$SYNC_PATH"
get_remote_acl

if ! compare_acl; then
    sync_acl
fi
```

---

## 7. ğŸ“¦ tarä¸rsyncçš„ACLæ”¯æŒ


### 7.1 tarå‘½ä»¤çš„ACLæ”¯æŒ

**taræ‰“åŒ…æ—¶ä¿æŒACLæƒé™**ï¼š

```bash
# åˆ›å»ºåŒ…å«ACLçš„taråŒ…
tar --acls --xattrs -czf website_with_acl.tar.gz /var/www/

# è§£å‹å¹¶æ¢å¤ACLæƒé™
tar --acls --xattrs -xzf website_with_acl.tar.gz
```

**å®Œæ•´çš„å¤‡ä»½è„šæœ¬**ï¼š
```bash
#!/bin/bash
# æ”¯æŒACLçš„tarå¤‡ä»½è„šæœ¬

create_acl_backup() {
    local source="$1"
    local backup_name="$2"
    local backup_dir="/backup"
    
    echo "åˆ›å»ºåŒ…å«ACLçš„å®Œæ•´å¤‡ä»½..."
    
    # åˆ›å»ºtaråŒ…ï¼ˆåŒ…å«ACLå’Œæ‰©å±•å±æ€§ï¼‰
    tar --acls --xattrs --selinux -czf \
        "$backup_dir/${backup_name}_$(date +%Y%m%d).tar.gz" \
        -C "$(dirname "$source")" "$(basename "$source")"
    
    # å•ç‹¬å¤‡ä»½ACLæƒé™ï¼ˆä¾¿äºæŸ¥çœ‹å’Œéƒ¨åˆ†æ¢å¤ï¼‰
    getfacl -R "$source" > "$backup_dir/${backup_name}_$(date +%Y%m%d).acl"
    
    echo "å¤‡ä»½å®Œæˆ: $backup_dir/${backup_name}_$(date +%Y%m%d).*"
}

# ä½¿ç”¨ç¤ºä¾‹
create_acl_backup "/var/www/html" "website"
create_acl_backup "/home/users" "user_home"
```

### 7.2 rsyncçš„ACLåŒæ­¥

**rsyncä¿æŒACLæƒé™åŒæ­¥**ï¼š

```bash
# åŸºæœ¬ACLåŒæ­¥è¯­æ³•
rsync -avA --acls source_dir/ target_dir/

# è¿œç¨‹åŒæ­¥ä¿æŒACL
rsync -avA --acls /local/path/ user@remote-host:/remote/path/

# å®Œæ•´çš„åŒæ­¥é€‰é¡¹
rsync -avAXH --acls --xattrs --hard-links source/ target/
```

**é«˜çº§rsync ACLåŒæ­¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# rsync ACLåŒæ­¥è„šæœ¬

RSYNC_OPTIONS="-avA --acls --xattrs --delete --dry-run"
SOURCE="$1"
TARGET="$2"
LOG_FILE="/var/log/acl_sync.log"

# å‚æ•°æ£€æŸ¥
if [ $# -lt 2 ]; then
    echo "ç”¨æ³•: $0 <æºç›®å½•> <ç›®æ ‡ç›®å½•> [--execute]"
    exit 1
fi

# å®é™…æ‰§è¡Œè¿˜æ˜¯æ¼”ç»ƒ
if [ "$3" = "--execute" ]; then
    RSYNC_OPTIONS="${RSYNC_OPTIONS/--dry-run/}"
    echo "æ‰§è¡Œå®é™…åŒæ­¥..."
else
    echo "æ¼”ç»ƒæ¨¡å¼ï¼ˆæ·»åŠ  --execute å‚æ•°æ‰§è¡Œå®é™…åŒæ­¥ï¼‰"
fi

# æ‰§è¡ŒåŒæ­¥
echo "$(date): å¼€å§‹ACLåŒæ­¥ - $SOURCE -> $TARGET" >> "$LOG_FILE"

if rsync $RSYNC_OPTIONS "$SOURCE/" "$TARGET/"; then
    echo "$(date): ACLåŒæ­¥æˆåŠŸ" >> "$LOG_FILE"
    echo "âœ… åŒæ­¥å®Œæˆ"
else
    echo "$(date): ACLåŒæ­¥å¤±è´¥" >> "$LOG_FILE"
    echo "âŒ åŒæ­¥å¤±è´¥ï¼Œæ£€æŸ¥æ—¥å¿—: $LOG_FILE"
fi
```

### 7.3 å¢é‡å¤‡ä»½ä¸ACL

**æ”¯æŒACLçš„å¢é‡å¤‡ä»½**ï¼š
```bash
#!/bin/bash
# ACLå¢é‡å¤‡ä»½è„šæœ¬

BACKUP_ROOT="/backup/incremental"
SOURCE="/var/www"
CURRENT="$BACKUP_ROOT/current"
PREVIOUS="$BACKUP_ROOT/previous"

# åˆ›å»ºç›®å½•
mkdir -p "$BACKUP_ROOT"

# å¦‚æœå­˜åœ¨ä¸Šæ¬¡å¤‡ä»½ï¼Œç§»åŠ¨ä¸ºprevious
if [ -d "$CURRENT" ]; then
    rm -rf "$PREVIOUS"
    mv "$CURRENT" "$PREVIOUS"
fi

# åˆ›å»ºæ–°çš„å½“å‰å¤‡ä»½
mkdir -p "$CURRENT"

# ä½¿ç”¨rsyncè¿›è¡Œå¢é‡å¤‡ä»½ï¼ˆä¿æŒACLï¼‰
if [ -d "$PREVIOUS" ]; then
    # æœ‰ä¸Šæ¬¡å¤‡ä»½ï¼Œè¿›è¡Œå¢é‡
    rsync -avA --acls --xattrs --link-dest="$PREVIOUS" \
          "$SOURCE/" "$CURRENT/"
else
    # é¦–æ¬¡å¤‡ä»½ï¼Œå®Œæ•´æ‹·è´
    rsync -avA --acls --xattrs "$SOURCE/" "$CURRENT/"
fi

# å¤‡ä»½ACLæƒé™åˆ—è¡¨
getfacl -R "$SOURCE" > "$CURRENT/../acl_$(date +%Y%m%d).list"

echo "å¢é‡å¤‡ä»½å®Œæˆï¼Œä½ç½®: $CURRENT"
```

---

## 8. âœ… ACLå¤‡ä»½éªŒè¯ä¸æ£€æŸ¥


### 8.1 å¤‡ä»½å®Œæ•´æ€§éªŒè¯

**éªŒè¯å¤‡ä»½æ–‡ä»¶çš„æœ‰æ•ˆæ€§**ï¼š

```bash
#!/bin/bash
# ACLå¤‡ä»½éªŒè¯è„šæœ¬

verify_acl_backup() {
    local backup_file="$1"
    
    echo "=== éªŒè¯ACLå¤‡ä»½æ–‡ä»¶: $backup_file ==="
    
    # æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§
    if [ ! -f "$backup_file" ]; then
        echo "âŒ å¤‡ä»½æ–‡ä»¶ä¸å­˜åœ¨"
        return 1
    fi
    
    # æ£€æŸ¥æ–‡ä»¶æ ¼å¼
    if ! head -1 "$backup_file" | grep -q "^# file:"; then
        echo "âŒ ä¸æ˜¯æœ‰æ•ˆçš„ACLå¤‡ä»½æ ¼å¼"
        return 1
    fi
    
    # ç»Ÿè®¡ä¿¡æ¯
    local file_count=$(grep -c "^# file:" "$backup_file")
    local user_entries=$(grep -c "^user:" "$backup_file")
    local group_entries=$(grep -c "^group:" "$backup_file")
    
    echo "ğŸ“Š å¤‡ä»½ç»Ÿè®¡ä¿¡æ¯:"
    echo "   æ–‡ä»¶æ•°é‡: $file_count"
    echo "   ç”¨æˆ·æƒé™æ¡ç›®: $user_entries"
    echo "   ç»„æƒé™æ¡ç›®: $group_entries"
    
    # æ£€æŸ¥è¯­æ³•é”™è¯¯
    echo "ğŸ” è¯­æ³•æ£€æŸ¥:"
    if setfacl --test --restore="$backup_file" 2>/dev/null; then
        echo "   âœ… è¯­æ³•æ­£ç¡®"
    else
        echo "   âŒ å­˜åœ¨è¯­æ³•é”™è¯¯"
        return 1
    fi
    
    # æ£€æŸ¥æ–‡ä»¶è·¯å¾„å­˜åœ¨æ€§
    echo "ğŸ“ è·¯å¾„æ£€æŸ¥:"
    local missing_files=0
    while read -r filepath; do
        if [ ! -e "$filepath" ]; then
            echo "   âš ï¸  æ–‡ä»¶ä¸å­˜åœ¨: $filepath"
            ((missing_files++))
        fi
    done < <(grep "^# file:" "$backup_file" | sed 's/^# file: //')
    
    if [ $missing_files -eq 0 ]; then
        echo "   âœ… æ‰€æœ‰æ–‡ä»¶è·¯å¾„æœ‰æ•ˆ"
    else
        echo "   âš ï¸  å‘ç° $missing_files ä¸ªæ— æ•ˆè·¯å¾„"
    fi
    
    echo "âœ… éªŒè¯å®Œæˆ"
}

# ä½¿ç”¨ç¤ºä¾‹
verify_acl_backup "/backup/acl/web_server_20241201.acl"
```

### 8.2 æƒé™ä¸€è‡´æ€§æ£€æŸ¥

**å¯¹æ¯”å½“å‰æƒé™ä¸å¤‡ä»½çš„å·®å¼‚**ï¼š

```bash
#!/bin/bash
# ACLä¸€è‡´æ€§æ£€æŸ¥è„šæœ¬

compare_acl_permissions() {
    local backup_file="$1"
    local temp_current="/tmp/current_acl_$(date +%s).acl"
    local temp_backup="/tmp/sorted_backup_$(date +%s).acl"
    
    echo "=== ACLæƒé™ä¸€è‡´æ€§æ£€æŸ¥ ==="
    
    # è·å–å¤‡ä»½ä¸­çš„æ–‡ä»¶åˆ—è¡¨
    grep "^# file:" "$backup_file" | sed 's/^# file: //' > /tmp/file_list.tmp
    
    # è·å–å½“å‰è¿™äº›æ–‡ä»¶çš„ACLæƒé™
    while read -r filepath; do
        if [ -e "$filepath" ]; then
            getfacl "$filepath" >> "$temp_current"
        fi
    done < /tmp/file_list.tmp
    
    # æ’åºå¤‡ä»½æ–‡ä»¶ä¾¿äºæ¯”è¾ƒ
    sort "$backup_file" > "$temp_backup"
    sort "$temp_current" > "${temp_current}.sorted"
    
    # æ¯”è¾ƒå·®å¼‚
    echo "ğŸ” æ£€æŸ¥æƒé™å·®å¼‚:"
    if diff -q "${temp_current}.sorted" "$temp_backup" >/dev/null 2>&1; then
        echo "   âœ… æƒé™å®Œå…¨ä¸€è‡´"
    else
        echo "   âš ï¸  å‘ç°æƒé™å·®å¼‚:"
        diff "${temp_current}.sorted" "$temp_backup" | head -20
    fi
    
    # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    rm -f /tmp/file_list.tmp "$temp_current" "${temp_current}.sorted" "$temp_backup"
}

# ä½¿ç”¨ç¤ºä¾‹
compare_acl_permissions "/backup/acl/project_20241201.acl"
```

### 8.3 å®šæœŸå¥åº·æ£€æŸ¥

**è‡ªåŠ¨åŒ–çš„ACLå¥åº·æ£€æŸ¥**ï¼š

```bash
#!/bin/bash
# ACLç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬

ACL_HEALTH_CHECK="/var/log/acl_health.log"

# å¥åº·æ£€æŸ¥å‡½æ•°
acl_health_check() {
    echo "$(date): === ACLç³»ç»Ÿå¥åº·æ£€æŸ¥å¼€å§‹ ===" >> "$ACL_HEALTH_CHECK"
    
    # æ£€æŸ¥ACLæ”¯æŒ
    if mount | grep -q acl; then
        echo "$(date): âœ… æ–‡ä»¶ç³»ç»Ÿæ”¯æŒACL" >> "$ACL_HEALTH_CHECK"
    else
        echo "$(date): âŒ æ–‡ä»¶ç³»ç»Ÿä¸æ”¯æŒACL" >> "$ACL_HEALTH_CHECK"
    fi
    
    # æ£€æŸ¥å·¥å…·å¯ç”¨æ€§
    for tool in getfacl setfacl; do
        if command -v "$tool" >/dev/null 2>&1; then
            echo "$(date): âœ… $tool å·¥å…·å¯ç”¨" >> "$ACL_HEALTH_CHECK"
        else
            echo "$(date): âŒ $tool å·¥å…·ä¸å¯ç”¨" >> "$ACL_HEALTH_CHECK"
        fi
    done
    
    # æ£€æŸ¥å¤‡ä»½ç›®å½•
    BACKUP_DIRS=("/backup/acl" "/var/backups/acl")
    for dir in "${BACKUP_DIRS[@]}"; do
        if [ -d "$dir" ] && [ -w "$dir" ]; then
            echo "$(date): âœ… å¤‡ä»½ç›®å½•å¯å†™: $dir" >> "$ACL_HEALTH_CHECK"
        else
            echo "$(date): âŒ å¤‡ä»½ç›®å½•é—®é¢˜: $dir" >> "$ACL_HEALTH_CHECK"
        fi
    done
    
    # æ£€æŸ¥æœ€è¿‘å¤‡ä»½
    LATEST_BACKUP=$(find /backup/acl -name "*.acl" -mtime -1 2>/dev/null | wc -l)
    if [ "$LATEST_BACKUP" -gt 0 ]; then
        echo "$(date): âœ… 24å°æ—¶å†…æœ‰ $LATEST_BACKUP ä¸ªæ–°å¤‡ä»½" >> "$ACL_HEALTH_CHECK"
    else
        echo "$(date): âš ï¸  24å°æ—¶å†…æ²¡æœ‰æ–°çš„ACLå¤‡ä»½" >> "$ACL_HEALTH_CHECK"
    fi
    
    echo "$(date): === ACLç³»ç»Ÿå¥åº·æ£€æŸ¥å®Œæˆ ===" >> "$ACL_HEALTH_CHECK"
}

# å®šæœŸæ‰§è¡Œï¼ˆå¯æ·»åŠ åˆ°cronï¼‰
acl_health_check
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ

```
ğŸ”¸ ACLå¤‡ä»½æœ¬è´¨ï¼šå°†æ–‡ä»¶çš„æ‰©å±•æƒé™ä¿¡æ¯ä¿å­˜ä¸ºæ–‡æœ¬æ ¼å¼
ğŸ”¸ getfaclåŠŸèƒ½ï¼šè¯»å–å’Œå¯¼å‡ºACLæƒé™ä¿¡æ¯
ğŸ”¸ setfaclæ¢å¤ï¼šä»å¤‡ä»½æ–‡ä»¶æ¢å¤ACLæƒé™è®¾ç½®
ğŸ”¸ æ‰¹é‡æ“ä½œï¼šé€šè¿‡è„šæœ¬å®ç°å¤§è§„æ¨¡æƒé™å¤‡ä»½å’Œæ¢å¤
ğŸ”¸ å®Œæ•´æ€§éªŒè¯ï¼šç¡®ä¿å¤‡ä»½æ–‡ä»¶æœ‰æ•ˆå’Œæƒé™ä¸€è‡´æ€§
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¤‡ä»½ç­–ç•¥çš„é€‰æ‹©**
```
å•æ–‡ä»¶å¤‡ä»½ï¼š
â€¢ é€‚ç”¨äºé‡è¦é…ç½®æ–‡ä»¶
â€¢ getfacl file > file.acl

ç›®å½•æ ‘å¤‡ä»½ï¼š
â€¢ é€‚ç”¨äºæ•´ä¸ªé¡¹ç›®æˆ–æœåŠ¡
â€¢ getfacl -R directory > directory.acl

ç³»ç»Ÿçº§å¤‡ä»½ï¼š
â€¢ é€‚ç”¨äºæœåŠ¡å™¨è¿ç§»
â€¢ åˆ†å±‚å¤‡ä»½ï¼Œå®šæœŸæ‰§è¡Œ
```

**ğŸ”¹ æ¢å¤æ“ä½œçš„å®‰å…¨æ€§**
```
æ¢å¤å‰æ£€æŸ¥ï¼š
â€¢ éªŒè¯ç”¨æˆ·å’Œç»„å­˜åœ¨æ€§
â€¢ ç¡®è®¤æ–‡ä»¶è·¯å¾„æœ‰æ•ˆæ€§
â€¢ æ£€æŸ¥å¤‡ä»½æ–‡ä»¶è¯­æ³•

å®‰å…¨æ¢å¤ï¼š
â€¢ åˆ›å»ºæ¢å¤å‰å¤‡ä»½
â€¢ ä½¿ç”¨--testé€‰é¡¹éªŒè¯
â€¢ é€æ­¥æ¢å¤å…³é”®ç›®å½•
```

**ğŸ”¹ å·¥å…·æ•´åˆçš„ä¼˜åŠ¿**
```
tar + ACLï¼š
â€¢ å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿå¤‡ä»½
â€¢ åŒ…å«æƒé™å’Œæ•°æ®

rsync + ACLï¼š
â€¢ é«˜æ•ˆçš„åŒæ­¥å¤‡ä»½
â€¢ å¢é‡æ›´æ–°æ”¯æŒ
â€¢ è¿œç¨‹å¤‡ä»½åŠŸèƒ½
```

### 9.3 å®é™…åº”ç”¨åœºæ™¯

- **æœåŠ¡å™¨è¿ç§»**ï¼šå®Œæ•´ä¿æŒåŸæœ‰æƒé™è®¾ç½®
- **ç³»ç»Ÿé‡è£…**ï¼šå¿«é€Ÿæ¢å¤æœåŠ¡æƒé™é…ç½®
- **æƒé™å®¡è®¡**ï¼šå®šæœŸæ£€æŸ¥æƒé™å˜åŒ–
- **ç¾éš¾æ¢å¤**ï¼šç»“åˆæ•°æ®å¤‡ä»½çš„å®Œæ•´æ¢å¤æ–¹æ¡ˆ
- **å¼€å‘éƒ¨ç½²**ï¼šç¡®ä¿æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒæƒé™ä¸€è‡´

### 9.4 æœ€ä½³å®è·µæ€»ç»“

```
ğŸ“ å¤‡ä»½ç­–ç•¥ï¼š
â€¢ æŒ‰é‡è¦æ€§åˆ†å±‚å¤‡ä»½
â€¢ å®šæœŸè‡ªåŠ¨å¤‡ä»½æ‰§è¡Œ
â€¢ å¤šåœ°ç‚¹å¤‡ä»½å­˜å‚¨

ğŸ”’ å®‰å…¨è€ƒè™‘ï¼š
â€¢ å¤‡ä»½æ–‡ä»¶æƒé™æ§åˆ¶
â€¢ æ•æ„Ÿæƒé™ä¿¡æ¯åŠ å¯†
â€¢ æ¢å¤æ“ä½œæ—¥å¿—è®°å½•

ğŸ”§ è¿ç»´è‡ªåŠ¨åŒ–ï¼š
â€¢ è„šæœ¬åŒ–æ‰¹é‡æ“ä½œ
â€¢ å¥åº·æ£€æŸ¥å’Œç›‘æ§
â€¢ æƒé™å˜åŒ–å‘Šè­¦æœºåˆ¶
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- å¤‡ä»½ç”¨getfaclï¼Œæ¢å¤ç”¨setfacl
- è„šæœ¬æ‰¹é‡çœäººåŠ›ï¼ŒéªŒè¯æ£€æŸ¥ä¿å®‰å…¨
- tarå’Œrsyncèƒ½æ•´åˆï¼Œæƒé™æ•°æ®ä¸€èµ·ä¿
- åˆ†å±‚å®šæœŸåšå¤‡ä»½ï¼Œè¿ç§»æ¢å¤ä¸ç”¨æ„