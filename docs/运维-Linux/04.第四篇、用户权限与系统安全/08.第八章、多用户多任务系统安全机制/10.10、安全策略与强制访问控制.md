---
title: 10ã€å®‰å…¨ç­–ç•¥ä¸å¼ºåˆ¶è®¿é—®æ§åˆ¶
---
## ğŸ“š ç›®å½•

1. [å¼ºåˆ¶è®¿é—®æ§åˆ¶åŸºç¡€æ¦‚å¿µ](#1-å¼ºåˆ¶è®¿é—®æ§åˆ¶åŸºç¡€æ¦‚å¿µ)
2. [SELinuxå¼ºåˆ¶è®¿é—®æ§åˆ¶](#2-SELinuxå¼ºåˆ¶è®¿é—®æ§åˆ¶)
3. [AppArmoråº”ç”¨ç¨‹åºé˜²æŠ¤](#3-AppArmoråº”ç”¨ç¨‹åºé˜²æŠ¤)
4. [å®‰å…¨ä¸Šä¸‹æ–‡æ ‡ç­¾ç®¡ç†](#4-å®‰å…¨ä¸Šä¸‹æ–‡æ ‡ç­¾ç®¡ç†)
5. [å¼ºåˆ¶è®¿é—®æ§åˆ¶ç­–ç•¥](#5-å¼ºåˆ¶è®¿é—®æ§åˆ¶ç­–ç•¥)
6. [å®‰å…¨åŸŸéš”ç¦»æœºåˆ¶](#6-å®‰å…¨åŸŸéš”ç¦»æœºåˆ¶)
7. [å®‰å…¨æ ‡ç­¾ç»§æ‰¿è§„åˆ™](#7-å®‰å…¨æ ‡ç­¾ç»§æ‰¿è§„åˆ™)
8. [ç­–ç•¥è¿è§„å¤„ç†](#8-ç­–ç•¥è¿è§„å¤„ç†)
9. [å®‰å…¨æ¨¡å¼åˆ‡æ¢](#9-å®‰å…¨æ¨¡å¼åˆ‡æ¢)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ›¡ï¸ å¼ºåˆ¶è®¿é—®æ§åˆ¶åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å¼ºåˆ¶è®¿é—®æ§åˆ¶


**ç®€å•ç†è§£**ï¼šå°±åƒå…¬å¸é‡Œçš„é—¨ç¦ç³»ç»Ÿï¼Œä¸æ˜¯ä½ æœ‰é’¥åŒ™å°±èƒ½è¿›ä»»ä½•æˆ¿é—´ï¼Œè€Œæ˜¯ç³»ç»Ÿæ ¹æ®ä½ çš„èº«ä»½å’Œæƒé™å†³å®šä½ èƒ½å»å“ªé‡Œã€‚

```
ä¼ ç»ŸLinuxæƒé™ï¼ˆè‡ªä¸»è®¿é—®æ§åˆ¶DACï¼‰ï¼š
ç”¨æˆ·Aåˆ›å»ºæ–‡ä»¶ â†’ ç”¨æˆ·Aå†³å®šè°èƒ½è®¿é—®
å°±åƒï¼šæˆ¿ä¸»å†³å®šæŠŠé’¥åŒ™ç»™è°

å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰ï¼š
ç³»ç»Ÿç®¡ç†å‘˜åˆ¶å®šè§„åˆ™ â†’ ç³»ç»Ÿå¼ºåˆ¶æ‰§è¡Œ
å°±åƒï¼šä¿å®‰æŒ‰è§„å®šæ£€æŸ¥æ¯ä¸ªäººçš„é€šè¡Œè¯
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å¼ºåˆ¶è®¿é—®æ§åˆ¶


**ğŸ”¸ ä¼ ç»Ÿæƒé™çš„å±€é™æ€§**
```
ä¼ ç»Ÿrwxæƒé™çš„é—®é¢˜ï¼š
- ç¨‹åºè·å¾—ç”¨æˆ·æƒé™åï¼Œå¯ä»¥è®¿é—®ç”¨æˆ·èƒ½è®¿é—®çš„æ‰€æœ‰æ–‡ä»¶
- æ¶æ„ç¨‹åºå¯ä»¥æ»¥ç”¨ç”¨æˆ·æƒé™
- æ— æ³•é˜²æ­¢æƒé™å‡çº§æ”»å‡»

å®é™…ä¾‹å­ï¼š
ç”¨æˆ·è¿è¡Œäº†ä¸€ä¸ªæ¶æ„ç¨‹åº
â†’ ç¨‹åºè·å¾—ç”¨æˆ·æƒé™
â†’ å¯ä»¥è¯»å–ç”¨æˆ·çš„æ‰€æœ‰ç§äººæ–‡ä»¶
â†’ ç”šè‡³å¯èƒ½è·å–ç³»ç»Ÿæƒé™
```

**ğŸ’¡ å¼ºåˆ¶è®¿é—®æ§åˆ¶çš„ä¼˜åŠ¿**
```
å¤šå±‚é˜²æŠ¤ï¼š
ç¬¬ä¸€å±‚ï¼šä¼ ç»Ÿæ–‡ä»¶æƒé™
ç¬¬äºŒå±‚ï¼šå¼ºåˆ¶è®¿é—®æ§åˆ¶è§„åˆ™

ç²¾ç»†æ§åˆ¶ï¼š
- é™åˆ¶ç¨‹åºåªèƒ½è®¿é—®å¿…è¦çš„æ–‡ä»¶
- é˜²æ­¢ç¨‹åºé—´çš„æ¶æ„äº¤äº’
- éš”ç¦»ä¸åŒå®‰å…¨çº§åˆ«çš„æ•°æ®
```

### 1.3 MAC vs DAC å¯¹æ¯”


| ç‰¹æ€§ | **è‡ªä¸»è®¿é—®æ§åˆ¶(DAC)** | **å¼ºåˆ¶è®¿é—®æ§åˆ¶(MAC)** |
|------|---------------------|---------------------|
| ğŸ¯ **æ§åˆ¶æ–¹å¼** | `ç”¨æˆ·è‡ªä¸»å†³å®šæƒé™` | `ç³»ç»Ÿå¼ºåˆ¶æ‰§è¡Œç­–ç•¥` |
| ğŸ”’ **å®‰å…¨çº§åˆ«** | `åŸºç¡€å®‰å…¨é˜²æŠ¤` | `é«˜çº§å®‰å…¨é˜²æŠ¤` |
| âš–ï¸ **çµæ´»æ€§** | `é«˜åº¦çµæ´»` | `ç›¸å¯¹ä¸¥æ ¼` |
| ğŸ› ï¸ **é…ç½®å¤æ‚åº¦** | `ç®€å•æ˜“æ‡‚` | `éœ€è¦ä¸“ä¸šçŸ¥è¯†` |
| ğŸ¯ **é€‚ç”¨åœºæ™¯** | `æ™®é€šæ¡Œé¢ç¯å¢ƒ` | `æœåŠ¡å™¨ã€æ•æ„Ÿç³»ç»Ÿ` |

---

## 2. ğŸ” SELinuxå¼ºåˆ¶è®¿é—®æ§åˆ¶


### 2.1 SELinuxæ˜¯ä»€ä¹ˆ


**é€šä¿—è§£é‡Š**ï¼šSELinuxå°±åƒç»™Linuxç³»ç»ŸåŠ äº†ä¸€ä¸ª"å®‰å…¨ç®¡å®¶"ï¼Œè¿™ä¸ªç®¡å®¶ä¼šæ£€æŸ¥æ¯ä¸ªç¨‹åºçš„æ¯ä¸ªæ“ä½œï¼Œåªæœ‰ç¬¦åˆå®‰å…¨è§„åˆ™çš„æ“ä½œæ‰è¢«å…è®¸ã€‚

```
æ²¡æœ‰SELinuxçš„æƒ…å†µï¼š
ç”¨æˆ· â†’ è¿è¡Œç¨‹åº â†’ ç¨‹åºç›´æ¥æ“ä½œæ–‡ä»¶
       â†“
    å¯èƒ½è¢«æ¶æ„åˆ©ç”¨

æœ‰SELinuxçš„æƒ…å†µï¼š
ç”¨æˆ· â†’ è¿è¡Œç¨‹åº â†’ SELinuxæ£€æŸ¥ â†’ ç¬¦åˆè§„åˆ™æ‰èƒ½æ“ä½œæ–‡ä»¶
       â†“            â†“
    ç¨‹åºè¯·æ±‚      å®‰å…¨ç­–ç•¥æ£€æŸ¥
```

### 2.2 SELinuxçš„å·¥ä½œåŸç†


**ğŸ”¸ æ ¸å¿ƒç»„ä»¶**
```
å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆSecurity Contextï¼‰ï¼š
- æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå®‰å…¨æ ‡ç­¾
- æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå®‰å…¨æ ‡ç­¾
- æ ‡ç­¾æ ¼å¼ï¼šç”¨æˆ·:è§’è‰²:ç±»å‹:çº§åˆ«

ç­–ç•¥è§„åˆ™ï¼ˆPolicy Rulesï¼‰ï¼š
- å®šä¹‰å“ªäº›æ“ä½œæ˜¯å…è®¸çš„
- ç±»ä¼¼äº"ç™½åå•"æœºåˆ¶
- é»˜è®¤æ‹’ç»ï¼Œæ˜ç¡®å…è®¸æ‰æ‰§è¡Œ
```

**ğŸ’¡ å·¥ä½œæµç¨‹ç¤ºä¾‹**
```
1. Apacheè¿›ç¨‹å°è¯•è¯»å–ç½‘é¡µæ–‡ä»¶
   è¿›ç¨‹æ ‡ç­¾ï¼šhttpd_t
   æ–‡ä»¶æ ‡ç­¾ï¼šhttpd_exec_t

2. SELinuxæ£€æŸ¥è§„åˆ™ï¼š
   è§„åˆ™ï¼šallow httpd_t httpd_exec_t:file read;
   ç»“æœï¼šå…è®¸è¯»å–

3. Apacheè¿›ç¨‹å°è¯•è¯»å–/etc/shadow
   è¿›ç¨‹æ ‡ç­¾ï¼šhttpd_t
   æ–‡ä»¶æ ‡ç­¾ï¼šshadow_t
   
4. SELinuxæ£€æŸ¥è§„åˆ™ï¼š
   æ²¡æœ‰å¯¹åº”çš„å…è®¸è§„åˆ™
   ç»“æœï¼šæ‹’ç»è®¿é—®
```

### 2.3 SELinuxçŠ¶æ€æŸ¥çœ‹


**æ£€æŸ¥SELinuxçŠ¶æ€**
```bash
# æŸ¥çœ‹SELinuxçŠ¶æ€
$ sestatus
SELinux status:                 enabled
SELinuxfs mount:                /sys/fs/selinux
SELinux root directory:         /etc/selinux
Loaded policy name:             targeted
Current mode:                   enforcing
```

**æŸ¥çœ‹å½“å‰æ¨¡å¼**
```bash
# ç®€å•æŸ¥çœ‹æ¨¡å¼
$ getenforce
Enforcing

# æŸ¥çœ‹æ–‡ä»¶çš„å®‰å…¨ä¸Šä¸‹æ–‡
$ ls -Z /var/www/html/
-rw-r--r--. root root unconfined_u:object_r:httpd_exec_t:s0 index.html
```

### 2.4 SELinuxä¸‰ç§æ¨¡å¼


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ¨¡å¼     â”‚      ä½œç”¨       â”‚      è¯´æ˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Enforcing   â”‚   å¼ºåˆ¶æ‰§è¡Œ      â”‚  è¿è§„æ“ä½œè¢«é˜»æ­¢  â”‚
â”‚ Permissive  â”‚   å®½æ¾æ¨¡å¼      â”‚  è®°å½•ä½†ä¸é˜»æ­¢    â”‚
â”‚ Disabled    â”‚   å®Œå…¨å…³é—­      â”‚  SELinuxä¸å·¥ä½œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ æ¨¡å¼åˆ‡æ¢å®è·µ**
```bash
# ä¸´æ—¶åˆ‡æ¢åˆ°å®½æ¾æ¨¡å¼
$ setenforce 0

# ä¸´æ—¶åˆ‡æ¢åˆ°å¼ºåˆ¶æ¨¡å¼  
$ setenforce 1

# æ°¸ä¹…ä¿®æ”¹æ¨¡å¼ï¼ˆéœ€è¦é‡å¯ï¼‰
$ vim /etc/selinux/config
SELINUX=enforcing  # æˆ– permissive æˆ– disabled
```

---

## 3. ğŸ›¡ï¸ AppArmoråº”ç”¨ç¨‹åºé˜²æŠ¤


### 3.1 AppArmoræ¦‚è¿°


**ç®€å•ç†è§£**ï¼šå¦‚æœè¯´SELinuxæ˜¯ç»™æ•´ä¸ªç³»ç»ŸåŠ äº†ä¸¥æ ¼çš„"é—¨ç¦ç³»ç»Ÿ"ï¼Œé‚£ä¹ˆAppArmorå°±åƒç»™æ¯ä¸ªåº”ç”¨ç¨‹åºåˆ’äº†ä¸€ä¸ª"æ´»åŠ¨èŒƒå›´"ï¼Œç¨‹åºåªèƒ½åœ¨è¿™ä¸ªèŒƒå›´å†…æ´»åŠ¨ã€‚

```
AppArmor vs SELinuxï¼š

SELinuxï¼ˆæ ‡ç­¾ç³»ç»Ÿï¼‰ï¼š
æ¯ä¸ªæ–‡ä»¶å’Œè¿›ç¨‹éƒ½è´´"æ ‡ç­¾"
â†’ æ ¹æ®æ ‡ç­¾åŒ¹é…è§„åˆ™å†³å®šæƒé™

AppArmorï¼ˆè·¯å¾„ç³»ç»Ÿï¼‰ï¼š
ç›´æ¥é™åˆ¶ç¨‹åºèƒ½è®¿é—®å“ªäº›è·¯å¾„
â†’ æ›´ç®€å•ç›´è§‚
```

### 3.2 AppArmorå·¥ä½œæœºåˆ¶


**ğŸ”¸ é…ç½®æ–‡ä»¶ä½ç½®**
```bash
# AppArmoré…ç½®æ–‡ä»¶ç›®å½•
/etc/apparmor.d/          # é…ç½®æ–‡ä»¶å­˜æ”¾å¤„
/etc/apparmor.d/abstractions/  # é€šç”¨è§„åˆ™æ¨¡æ¿
/etc/apparmor.d/tunables/      # å¯è°ƒå‚æ•°
```

**ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„**
```bash
# æŸ¥çœ‹nginxçš„AppArmoré…ç½®
$ cat /etc/apparmor.d/usr.sbin.nginx

/usr/sbin/nginx {
  # å…è®¸è¯»å–çš„æ–‡ä»¶
  /etc/nginx/** r,
  /var/log/nginx/** w,
  /var/www/html/** r,
  
  # å…è®¸æ‰§è¡Œçš„ç¨‹åº
  /usr/sbin/nginx ix,
  
  # ç½‘ç»œæƒé™
  network tcp,
  network udp,
}
```

### 3.3 AppArmorçŠ¶æ€ç®¡ç†


**æŸ¥çœ‹AppArmorçŠ¶æ€**
```bash
# æŸ¥çœ‹AppArmorçŠ¶æ€
$ sudo apparmor_status
apparmor module is loaded.
12 profiles are loaded.
10 profiles are in enforce mode.
2 profiles are in complain mode.
```

**é…ç½®æ–‡ä»¶æ¨¡å¼**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ¨¡å¼     â”‚      æ–‡ä»¶å     â”‚      è¯´æ˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Enforce     â”‚  ç›´æ¥æ”¾ç½®       â”‚  ä¸¥æ ¼æ‰§è¡Œé™åˆ¶    â”‚
â”‚ Complain    â”‚  è½¯é“¾æ¥åˆ°       â”‚  è®°å½•ä½†ä¸é™åˆ¶    â”‚
â”‚             â”‚  force-complain â”‚                 â”‚
â”‚ Disable     â”‚  è½¯é“¾æ¥åˆ°       â”‚  å®Œå…¨ä¸åŠ è½½      â”‚
â”‚             â”‚  disable/       â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 AppArmorå®ç”¨å‘½ä»¤


```bash
# å°†é…ç½®è®¾ä¸ºå¼ºåˆ¶æ¨¡å¼
$ sudo aa-enforce /etc/apparmor.d/usr.sbin.nginx

# å°†é…ç½®è®¾ä¸ºæŠ•è¯‰æ¨¡å¼  
$ sudo aa-complain /etc/apparmor.d/usr.sbin.nginx

# ç¦ç”¨æŸä¸ªé…ç½®
$ sudo aa-disable /etc/apparmor.d/usr.sbin.nginx

# é‡æ–°åŠ è½½æ‰€æœ‰é…ç½®
$ sudo service apparmor reload
```

---

## 4. ğŸ·ï¸ å®‰å…¨ä¸Šä¸‹æ–‡æ ‡ç­¾ç®¡ç†


### 4.1 å®‰å…¨ä¸Šä¸‹æ–‡çš„æ„æˆ


**SELinuxå®‰å…¨ä¸Šä¸‹æ–‡æ ¼å¼**
```
ç”¨æˆ·:è§’è‰²:ç±»å‹:çº§åˆ«
user:role:type:level

å®é™…ä¾‹å­ï¼š
system_u:system_r:httpd_t:s0
    â†“        â†“       â†“     â†“
  ç”¨æˆ·     è§’è‰²     ç±»å‹   çº§åˆ«
```

**ğŸ”¸ å„éƒ¨åˆ†å«ä¹‰**
```
ç”¨æˆ·ï¼ˆUserï¼‰ï¼š
- unconfined_uï¼šæ™®é€šç”¨æˆ·
- system_uï¼šç³»ç»Ÿç”¨æˆ·  
- rootï¼šrootç”¨æˆ·

è§’è‰²ï¼ˆRoleï¼‰ï¼š
- unconfined_rï¼šä¸å—é™è§’è‰²
- system_rï¼šç³»ç»Ÿè§’è‰²
- object_rï¼šæ–‡ä»¶å¯¹è±¡è§’è‰²

ç±»å‹ï¼ˆTypeï¼‰ï¼š
- httpd_tï¼šApacheè¿›ç¨‹ç±»å‹
- httpd_exec_tï¼šApacheå¯æ‰§è¡Œæ–‡ä»¶ç±»å‹
- user_home_tï¼šç”¨æˆ·å®¶ç›®å½•ç±»å‹
```

### 4.2 æŸ¥çœ‹å’Œä¿®æ”¹å®‰å…¨ä¸Šä¸‹æ–‡


**æŸ¥çœ‹å®‰å…¨ä¸Šä¸‹æ–‡**
```bash
# æŸ¥çœ‹æ–‡ä»¶çš„å®‰å…¨ä¸Šä¸‹æ–‡
$ ls -Z /var/www/html/
drwxr-xr-x. root root system_u:object_r:httpd_exec_t:s0 html

# æŸ¥çœ‹è¿›ç¨‹çš„å®‰å…¨ä¸Šä¸‹æ–‡
$ ps -eZ | grep httpd
system_u:system_r:httpd_t:s0    1234  ?  00:00:01 httpd

# æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„å®‰å…¨ä¸Šä¸‹æ–‡
$ id -Z
unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
```

**ä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡**
```bash
# ä¸´æ—¶ä¿®æ”¹æ–‡ä»¶ç±»å‹
$ chcon -t httpd_exec_t /var/www/html/newfile.html

# é€’å½’ä¿®æ”¹ç›®å½•ç±»å‹
$ chcon -R -t httpd_exec_t /var/www/html/

# æ¢å¤é»˜è®¤å®‰å…¨ä¸Šä¸‹æ–‡
$ restorecon /var/www/html/newfile.html

# æ°¸ä¹…è®¾ç½®å®‰å…¨ä¸Šä¸‹æ–‡è§„åˆ™
$ semanage fcontext -a -t httpd_exec_t "/var/www/html/.*"
```

### 4.3 å®‰å…¨ä¸Šä¸‹æ–‡æœ€ä½³å®è·µ


**ğŸ¯ å¸¸ç”¨ç±»å‹æ ‡ç­¾**
```bash
# WebæœåŠ¡ç›¸å…³
httpd_t           # Apacheè¿›ç¨‹
httpd_exec_t      # Apacheå¯æ‰§è¡Œæ–‡ä»¶
httpd_config_t    # Apacheé…ç½®æ–‡ä»¶

# ç”¨æˆ·ç›¸å…³
user_home_t       # ç”¨æˆ·å®¶ç›®å½•
user_tmp_t        # ç”¨æˆ·ä¸´æ—¶æ–‡ä»¶

# ç³»ç»Ÿç›¸å…³
etc_t            # ç³»ç»Ÿé…ç½®æ–‡ä»¶
bin_t            # ç³»ç»Ÿå¯æ‰§è¡Œæ–‡ä»¶
```

---

## 5. ğŸ“‹ å¼ºåˆ¶è®¿é—®æ§åˆ¶ç­–ç•¥


### 5.1 ç­–ç•¥ç±»å‹å’Œç»“æ„


**SELinuxç­–ç•¥ç±»å‹**
```
Targetedç­–ç•¥ï¼ˆé»˜è®¤ï¼‰ï¼š
- åªå¯¹ç½‘ç»œæœåŠ¡è¿›ç¨‹è¿›è¡Œé™åˆ¶
- æ™®é€šç”¨æˆ·è¿›ç¨‹ä¸å—é™åˆ¶
- é€‚åˆå¤§å¤šæ•°æœåŠ¡å™¨ç¯å¢ƒ

MLSç­–ç•¥ï¼ˆå¤šçº§å®‰å…¨ï¼‰ï¼š
- å®ç°å†›ç”¨çº§åˆ«çš„å®‰å…¨åˆ†çº§
- æ•°æ®æŒ‰æœºå¯†çº§åˆ«åˆ†ç±»
- é€‚åˆé«˜å®‰å…¨è¦æ±‚ç¯å¢ƒ
```

**ç­–ç•¥è§„åˆ™è¯­æ³•**
```bash
# åŸºæœ¬å…è®¸è§„åˆ™
allow æºç±»å‹ ç›®æ ‡ç±»å‹:å¯¹è±¡ç±»åˆ« æƒé™;

# å®ä¾‹
allow httpd_t httpd_exec_t:file { read execute };
  â†“        â†“           â†“        â†“
Apache   ç½‘é¡µæ–‡ä»¶    æ–‡ä»¶ç±»å‹   å…è®¸è¯»å–å’Œæ‰§è¡Œ
è¿›ç¨‹ç±»å‹  ç±»å‹
```

### 5.2 ç­–ç•¥ç®¡ç†å·¥å…·


**ğŸ”§ å¸¸ç”¨ç­–ç•¥ç®¡ç†å‘½ä»¤**
```bash
# æŸ¥çœ‹æ‰€æœ‰å¸ƒå°”å€¼
$ getsebool -a | grep httpd
httpd_can_network_connect --> off
httpd_can_network_relay --> off
httpd_use_nfs --> off

# ä¸´æ—¶å¼€å¯æŸä¸ªåŠŸèƒ½
$ setsebool httpd_can_network_connect on

# æ°¸ä¹…å¼€å¯æŸä¸ªåŠŸèƒ½
$ setsebool -P httpd_can_network_connect on

# æŸ¥çœ‹ç­–ç•¥è§„åˆ™
$ sesearch -A -s httpd_t -t httpd_exec_t
```

### 5.3 è‡ªå®šä¹‰ç­–ç•¥åˆ›å»º


**åˆ›å»ºè‡ªå®šä¹‰ç­–ç•¥æµç¨‹**
```
1. åˆ†æç¨‹åºè¡Œä¸º
   â†“
2. è®¾ç½®ä¸ºå®½æ¾æ¨¡å¼è®°å½•è¿è§„
   â†“  
3. åˆ†æå®¡è®¡æ—¥å¿—
   â†“
4. ç”Ÿæˆç­–ç•¥æ¨¡å—
   â†“
5. ç¼–è¯‘å®‰è£…ç­–ç•¥
```

**å®é™…æ“ä½œç¤ºä¾‹**
```bash
# 1. å°†ç¨‹åºè®¾ä¸ºå®½æ¾æ¨¡å¼
$ semanage permissive -a myapp_t

# 2. è¿è¡Œç¨‹åºï¼Œè®°å½•è¿è§„è¡Œä¸º
$ tail -f /var/log/audit/audit.log

# 3. ç”Ÿæˆç­–ç•¥æ¨¡å—
$ audit2allow -a -M myapp < /var/log/audit/audit.log

# 4. å®‰è£…ç­–ç•¥æ¨¡å—
$ semodule -i myapp.pp
```

---

## 6. ğŸ¢ å®‰å…¨åŸŸéš”ç¦»æœºåˆ¶


### 6.1 ä»€ä¹ˆæ˜¯å®‰å…¨åŸŸ


**é€šä¿—è§£é‡Š**ï¼šå®‰å…¨åŸŸå°±åƒæŠŠç³»ç»Ÿåˆ†æˆä¸åŒçš„"å®‰å…¨åŒºåŸŸ"ï¼Œæ¯ä¸ªåŒºåŸŸæœ‰ä¸åŒçš„å®‰å…¨çº§åˆ«ï¼ŒåŒºåŸŸä¹‹é—´æœ‰ä¸¥æ ¼çš„"è¾¹ç•Œæ£€æŸ¥"ã€‚

```
ç³»ç»Ÿå®‰å…¨åŸŸåˆ’åˆ†ï¼š

é«˜å®‰å…¨åŸŸ          ä¸­å®‰å…¨åŸŸ          ä½å®‰å…¨åŸŸ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚æ ¸å¿ƒç³»ç»Ÿ â”‚      â”‚WebæœåŠ¡  â”‚      â”‚ç”¨æˆ·ç¨‹åº â”‚
â”‚æ–‡ä»¶     â”‚ â†â”€â”€â†’ â”‚è¿›ç¨‹     â”‚ â†â”€â”€â†’ â”‚        â”‚
â”‚        â”‚      â”‚        â”‚      â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   åªè¯»è®¿é—®        æœ‰é™äº¤äº’        å—é™è®¿é—®
```

### 6.2 åŸŸé—´äº¤äº’æ§åˆ¶


**ğŸ”¸ åŸŸé—´é€šä¿¡è§„åˆ™**
```bash
# é«˜å®‰å…¨åŸŸåˆ°ä½å®‰å…¨åŸŸï¼šå…è®¸ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰
allow admin_t user_t:process signal;

# ä½å®‰å…¨åŸŸåˆ°é«˜å®‰å…¨åŸŸï¼šä¸¥æ ¼é™åˆ¶
# éœ€è¦æ˜ç¡®çš„è§„åˆ™æ‰èƒ½å…è®¸

# åŒçº§åŸŸé—´ï¼šæ ¹æ®å…·ä½“éœ€æ±‚è®¾å®š
allow httpd_t mysql_t:tcp_socket connect;
```

**å®é™…åº”ç”¨åœºæ™¯**
```
WebæœåŠ¡å™¨åŸŸï¼š
- åªèƒ½è®¿é—®ç½‘é¡µæ–‡ä»¶
- åªèƒ½ç›‘å¬ç‰¹å®šç«¯å£
- ä¸èƒ½è®¿é—®æ•°æ®åº“æ–‡ä»¶

æ•°æ®åº“åŸŸï¼š
- åªèƒ½è®¿é—®æ•°æ®æ–‡ä»¶
- åªæ¥å—ç‰¹å®šè¿æ¥
- ä¸èƒ½è®¿é—®ç½‘é¡µæ–‡ä»¶

ç³»ç»Ÿç®¡ç†åŸŸï¼š
- å¯ä»¥è®¿é—®æ‰€æœ‰èµ„æº
- å—æœ€ä¸¥æ ¼çš„èº«ä»½éªŒè¯
```

### 6.3 åŸŸéš”ç¦»é…ç½®ç¤ºä¾‹


```bash
# åˆ›å»ºæ–°çš„å®‰å…¨åŸŸç±»å‹
$ cat > myapp.te << EOF
policy_module(myapp, 1.0)

# å®šä¹‰æ–°çš„åŸŸç±»å‹
type myapp_t;
type myapp_exec_t;

# æ ‡è®°ä¸ºåŸŸç±»å‹
domain_type(myapp_t)
domain_entry_file(myapp_t, myapp_exec_t)

# å…è®¸åŸºæœ¬æƒé™
allow myapp_t self:process { fork signal };
allow myapp_t myapp_exec_t:file { read execute };
EOF

# ç¼–è¯‘å®‰è£…
$ make -f /usr/share/selinux/devel/Makefile myapp.pp
$ semodule -i myapp.pp
```

---

## 7. ğŸ·ï¸ å®‰å…¨æ ‡ç­¾ç»§æ‰¿è§„åˆ™


### 7.1 æ ‡ç­¾ç»§æ‰¿åŸºæœ¬åŸç†


**æ–‡ä»¶åˆ›å»ºç»§æ‰¿è§„åˆ™**
```
ä¸€èˆ¬è§„åˆ™ï¼šæ–°æ–‡ä»¶ç»§æ‰¿çˆ¶ç›®å½•çš„å®‰å…¨ä¸Šä¸‹æ–‡

ä¾‹å¤–æƒ…å†µï¼š
1. è¿›ç¨‹æœ‰ç‰¹æ®Šçš„æ–‡ä»¶åˆ›å»ºè§„åˆ™
2. æ˜ç¡®è®¾ç½®äº†é»˜è®¤ç±»å‹è½¬æ¢
3. æ‰‹åŠ¨æŒ‡å®šäº†å®‰å…¨ä¸Šä¸‹æ–‡
```

**è¿›ç¨‹åˆ›å»ºç»§æ‰¿è§„åˆ™**
```
å­è¿›ç¨‹ç»§æ‰¿è§„åˆ™ï¼š
çˆ¶è¿›ç¨‹ exec æ‰§è¡Œæ–‡ä»¶ â†’ æ–°è¿›ç¨‹å®‰å…¨ä¸Šä¸‹æ–‡

è®¡ç®—å…¬å¼ï¼š
çˆ¶è¿›ç¨‹ç±»å‹ + å¯æ‰§è¡Œæ–‡ä»¶ç±»å‹ â†’ æ–°è¿›ç¨‹ç±»å‹
```

### 7.2 ç»§æ‰¿è§„åˆ™ç¤ºä¾‹


**æ–‡ä»¶ç»§æ‰¿ç¤ºä¾‹**
```bash
# çˆ¶ç›®å½•çš„å®‰å…¨ä¸Šä¸‹æ–‡
$ ls -dZ /var/www/html/
drwxr-xr-x. root root system_u:object_r:httpd_exec_t:s0 /var/www/html/

# åœ¨è¯¥ç›®å½•åˆ›å»ºæ–‡ä»¶
$ touch /var/www/html/newfile.html

# æ–°æ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿çˆ¶ç›®å½•ç±»å‹
$ ls -Z /var/www/html/newfile.html
-rw-r--r--. root root system_u:object_r:httpd_exec_t:s0 newfile.html
```

**è¿›ç¨‹ç»§æ‰¿ç¤ºä¾‹**
```bash
# æŸ¥çœ‹è¿›ç¨‹è½¬æ¢è§„åˆ™
$ sesearch -T -s init_t -t httpd_exec_t
type_transition init_t httpd_exec_t : process httpd_t;

å«ä¹‰è§£é‡Šï¼š
initè¿›ç¨‹(init_t) æ‰§è¡Œ Apacheç¨‹åº(httpd_exec_t) 
â†’ äº§ç”ŸApacheè¿›ç¨‹(httpd_t)
```

### 7.3 è‡ªå®šä¹‰ç»§æ‰¿è§„åˆ™


**è®¾ç½®æ–‡ä»¶ç±»å‹è½¬æ¢**
```bash
# è®¾ç½®è§„åˆ™ï¼šåœ¨/tmpç›®å½•ä¸­åˆ›å»ºçš„.logæ–‡ä»¶è‡ªåŠ¨æ ‡è®°ä¸ºlogç±»å‹
$ semanage fcontext -a -t var_log_t "/tmp/.*\.log"

# ä½¿è§„åˆ™ç”Ÿæ•ˆ
$ restorecon -R /tmp/
```

**è®¾ç½®è¿›ç¨‹ç±»å‹è½¬æ¢**
```bash
# åœ¨ç­–ç•¥æ–‡ä»¶ä¸­å®šä¹‰
type_transition parent_t child_exec_t:process child_t;

# è¡¨ç¤ºï¼šparent_tè¿›ç¨‹æ‰§è¡Œchild_exec_tæ–‡ä»¶æ—¶
# è‡ªåŠ¨è½¬æ¢ä¸ºchild_tè¿›ç¨‹ç±»å‹
```

---

## 8. âš ï¸ ç­–ç•¥è¿è§„å¤„ç†


### 8.1 å®¡è®¡æ—¥å¿—åˆ†æ


**å®¡è®¡æ—¥å¿—ä½ç½®å’Œæ ¼å¼**
```bash
# ä¸»è¦æ—¥å¿—æ–‡ä»¶
/var/log/audit/audit.log      # SELinuxå®¡è®¡æ—¥å¿—
/var/log/messages            # ç³»ç»Ÿæ¶ˆæ¯æ—¥å¿—

# æ—¥å¿—æ ¼å¼ç¤ºä¾‹
type=AVC msg=audit(1234567890.123:456): avc: denied { read } 
for pid=1234 comm="httpd" path="/etc/shadow" 
scontext=system_u:system_r:httpd_t:s0 
tcontext=system_u:object_r:shadow_t:s0 tclass=file
```

**æ—¥å¿—å­—æ®µå«ä¹‰**
```
avc: denied        # è®¿é—®è¢«æ‹’ç»
{ read }          # è¢«æ‹’ç»çš„æ“ä½œ
pid=1234          # è¿›ç¨‹ID  
comm="httpd"      # ç¨‹åºåç§°
path="/etc/shadow" # è®¿é—®çš„æ–‡ä»¶è·¯å¾„
scontext=         # æºå®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆè¿›ç¨‹ï¼‰
tcontext=         # ç›®æ ‡å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆæ–‡ä»¶ï¼‰
tclass=file       # å¯¹è±¡ç±»åˆ«
```

### 8.2 å¸¸è§è¿è§„å¤„ç†æ–¹æ³•


**ğŸ”§ å¤„ç†æ­¥éª¤**
```
1. åˆ†ææ—¥å¿—ç¡®å®šé—®é¢˜
   â†“
2. åˆ¤æ–­æ˜¯å¦ä¸ºåˆç†éœ€æ±‚
   â†“
3. é€‰æ‹©è§£å†³æ–¹æ¡ˆï¼š
   - ä¿®æ”¹æ–‡ä»¶æ ‡ç­¾
   - åˆ›å»ºå…è®¸è§„åˆ™  
   - å¯ç”¨å¸ƒå°”å€¼
   - è‡ªå®šä¹‰ç­–ç•¥æ¨¡å—
```

**å®é™…å¤„ç†æ¡ˆä¾‹**
```bash
# é—®é¢˜ï¼šApacheæ— æ³•è¯»å–ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶
# æ—¥å¿—æ˜¾ç¤ºï¼šhttpd_t æ— æ³•è®¿é—® user_home_t

# è§£å†³æ–¹æ¡ˆ1ï¼šä¿®æ”¹æ–‡ä»¶æ ‡ç­¾
$ chcon -t httpd_exec_t /home/user/uploads/*

# è§£å†³æ–¹æ¡ˆ2ï¼šå¯ç”¨ç›¸å…³å¸ƒå°”å€¼
$ setsebool -P httpd_read_user_content on

# è§£å†³æ–¹æ¡ˆ3ï¼šåˆ›å»ºå…è®¸è§„åˆ™
$ audit2allow -a -M httpdlocal < /var/log/audit/audit.log
$ semodule -i httpdlocal.pp
```

### 8.3 è¿è§„é¢„é˜²ç­–ç•¥


**ğŸ’¡ æœ€ä½³å®è·µ**
```
å¼€å‘é˜¶æ®µï¼š
- åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨å®½æ¾æ¨¡å¼
- æ”¶é›†å®Œæ•´çš„å®¡è®¡ä¿¡æ¯
- æå‰è§„åˆ’å®‰å…¨ä¸Šä¸‹æ–‡

éƒ¨ç½²é˜¶æ®µï¼š  
- é€æ­¥ä»å®½æ¾æ¨¡å¼è½¬ä¸ºå¼ºåˆ¶æ¨¡å¼
- ç›‘æ§å®¡è®¡æ—¥å¿—
- åŠæ—¶è°ƒæ•´ç­–ç•¥

è¿ç»´é˜¶æ®µï¼š
- å®šæœŸå®¡æŸ¥ç­–ç•¥è§„åˆ™
- ç›‘æ§ç³»ç»Ÿå®‰å…¨äº‹ä»¶
- ä¿æŒç­–ç•¥æ›´æ–°
```

---

## 9. ğŸ”„ å®‰å…¨æ¨¡å¼åˆ‡æ¢


### 9.1 SELinuxæ¨¡å¼åˆ‡æ¢


**ä¸´æ—¶æ¨¡å¼åˆ‡æ¢**
```bash
# æŸ¥çœ‹å½“å‰æ¨¡å¼
$ getenforce
Enforcing

# åˆ‡æ¢åˆ°å®½æ¾æ¨¡å¼ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
$ setenforce 0
$ getenforce  
Permissive

# åˆ‡æ¢åˆ°å¼ºåˆ¶æ¨¡å¼
$ setenforce 1
$ getenforce
Enforcing
```

**æ°¸ä¹…æ¨¡å¼åˆ‡æ¢**
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
$ vim /etc/selinux/config

# ä¿®æ”¹SELINUXå‚æ•°
SELINUX=enforcing    # å¼ºåˆ¶æ¨¡å¼
SELINUX=permissive   # å®½æ¾æ¨¡å¼  
SELINUX=disabled     # ç¦ç”¨æ¨¡å¼

# é‡å¯ç³»ç»Ÿç”Ÿæ•ˆ
$ reboot
```

### 9.2 AppArmoræ¨¡å¼åˆ‡æ¢


**æœåŠ¡çº§åˆ«æ§åˆ¶**
```bash
# åœæ­¢AppArmoræœåŠ¡
$ sudo systemctl stop apparmor

# å¯åŠ¨AppArmoræœåŠ¡
$ sudo systemctl start apparmor

# ç¦ç”¨AppArmoræœåŠ¡
$ sudo systemctl disable apparmor

# å¯ç”¨AppArmoræœåŠ¡
$ sudo systemctl enable apparmor
```

**é…ç½®æ–‡ä»¶çº§åˆ«æ§åˆ¶**
```bash
# æŸ¥çœ‹æ‰€æœ‰é…ç½®çŠ¶æ€
$ sudo aa-status

# å°†é…ç½®è®¾ä¸ºå¼ºåˆ¶æ¨¡å¼
$ sudo aa-enforce /etc/apparmor.d/usr.sbin.nginx

# å°†é…ç½®è®¾ä¸ºæŠ•è¯‰æ¨¡å¼
$ sudo aa-complain /etc/apparmor.d/usr.sbin.nginx

# ç¦ç”¨ç‰¹å®šé…ç½®
$ sudo aa-disable /etc/apparmor.d/usr.sbin.nginx
```

### 9.3 æ¨¡å¼åˆ‡æ¢æ³¨æ„äº‹é¡¹


**âš ï¸ é‡è¦æé†’**
```
ä»ç¦ç”¨åˆ°å¯ç”¨ï¼š
- éœ€è¦é‡æ–°æ ‡è®°æ‰€æœ‰æ–‡ä»¶
- å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
- å»ºè®®å…ˆä½¿ç”¨å®½æ¾æ¨¡å¼æµ‹è¯•

ä»å¼ºåˆ¶åˆ°å®½æ¾ï¼š  
- ç«‹å³ç”Ÿæ•ˆ
- åªè®°å½•ä¸é˜»æ­¢
- é€‚åˆè°ƒè¯•é—®é¢˜

ä»å®½æ¾åˆ°å¼ºåˆ¶ï¼š
- ç¡®ä¿æ²¡æœ‰ç­–ç•¥å†²çª
- æ£€æŸ¥å®¡è®¡æ—¥å¿—
- é€æ­¥å¯ç”¨
```

**åˆ‡æ¢åéªŒè¯**
```bash
# éªŒè¯SELinuxçŠ¶æ€
$ sestatus

# éªŒè¯AppArmorçŠ¶æ€  
$ sudo aa-status

# æ£€æŸ¥å®¡è®¡æ—¥å¿—
$ tail -f /var/log/audit/audit.log

# æµ‹è¯•å…³é”®æœåŠ¡
$ systemctl status httpd nginx mysql
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼šç³»ç»Ÿå¼ºåˆ¶æ‰§è¡Œå®‰å…¨ç­–ç•¥ï¼Œä¸ä¾èµ–ç”¨æˆ·å†³å®š
ğŸ”¸ SELinuxæœºåˆ¶ï¼šåŸºäºå®‰å…¨æ ‡ç­¾çš„è®¿é—®æ§åˆ¶ï¼Œé»˜è®¤æ‹’ç»åŸåˆ™
ğŸ”¸ AppArmoræœºåˆ¶ï¼šåŸºäºè·¯å¾„çš„è®¿é—®æ§åˆ¶ï¼Œç®€å•ç›´è§‚
ğŸ”¸ å®‰å…¨ä¸Šä¸‹æ–‡ï¼šæ¯ä¸ªè¿›ç¨‹å’Œæ–‡ä»¶éƒ½æœ‰å®‰å…¨æ ‡ç­¾
ğŸ”¸ ç­–ç•¥è§„åˆ™ï¼šå®šä¹‰å…è®¸çš„æ“ä½œï¼Œè¿è§„æ“ä½œè¢«é˜»æ­¢
ğŸ”¸ å®‰å…¨åŸŸéš”ç¦»ï¼šä¸åŒå®‰å…¨çº§åˆ«çš„èµ„æºç›¸äº’éš”ç¦»
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¼ºåˆ¶è®¿é—®æ§åˆ¶çš„æœ¬è´¨**
```
ç†è§£è¦ç‚¹ï¼š
- MACæ˜¯åœ¨DACåŸºç¡€ä¸Šçš„é¢å¤–å®‰å…¨å±‚
- å³ä½¿æœ‰æ–‡ä»¶æƒé™ï¼Œä¹Ÿéœ€è¦é€šè¿‡MACæ£€æŸ¥
- å®‰å…¨ç­–ç•¥ç”±ç®¡ç†å‘˜é›†ä¸­åˆ¶å®šï¼Œç”¨æˆ·æ— æ³•ç»•è¿‡
```

**ğŸ”¹ SELinux vs AppArmorçš„åŒºåˆ«**
```
é€‰æ‹©æ ‡å‡†ï¼š
SELinuxé€‚åˆï¼š
- éœ€è¦ç²¾ç»†å®‰å…¨æ§åˆ¶
- å¤æ‚çš„ä¼ä¸šç¯å¢ƒ
- å¯¹å®‰å…¨è¦æ±‚æé«˜çš„åœºæ™¯

AppArmoré€‚åˆï¼š
- ç®€å•å¿«é€Ÿéƒ¨ç½²
- æ™®é€šæœåŠ¡å™¨ç¯å¢ƒ
- å­¦ä¹ æˆæœ¬è¾ƒä½çš„åœºæ™¯
```

**ğŸ”¹ å®‰å…¨ç­–ç•¥çš„å¹³è¡¡**
```
å¹³è¡¡è€ƒè™‘ï¼š
å®‰å…¨æ€§ vs æ˜“ç”¨æ€§ï¼š
- è¿‡ä¸¥æ ¼å½±å“æ­£å¸¸ä½¿ç”¨
- è¿‡å®½æ¾å¤±å»å®‰å…¨æ„ä¹‰

å¤æ‚æ€§ vs å¯ç»´æŠ¤æ€§ï¼š
- å¤æ‚ç­–ç•¥éš¾ä»¥ç»´æŠ¤
- ç®€å•ç­–ç•¥å¯èƒ½ä¸å¤Ÿç”¨
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ç”Ÿäº§ç¯å¢ƒåº”ç”¨**
- **WebæœåŠ¡å™¨**ï¼šé˜²æ­¢ç½‘é¡µè¢«ç¯¡æ”¹ï¼Œé™åˆ¶è¿›ç¨‹æƒé™
- **æ•°æ®åº“æœåŠ¡å™¨**ï¼šä¿æŠ¤æ•æ„Ÿæ•°æ®ï¼Œé˜²æ­¢æƒé™å‡çº§
- **æ–‡ä»¶æœåŠ¡å™¨**ï¼šæ§åˆ¶æ–‡ä»¶è®¿é—®ï¼Œé˜²æ­¢æ•°æ®æ³„éœ²
- **å®¹å™¨ç¯å¢ƒ**ï¼šå¢å¼ºå®¹å™¨éš”ç¦»ï¼Œæé«˜å®‰å…¨æ€§

**ğŸ”§ è¿ç»´å®è·µæŠ€å·§**
- **åˆ†é˜¶æ®µéƒ¨ç½²**ï¼šæµ‹è¯•â†’å®½æ¾â†’å¼ºåˆ¶æ¨¡å¼é€æ­¥åˆ‡æ¢
- **æ—¥å¿—ç›‘æ§**ï¼šæŒç»­ç›‘æ§å®¡è®¡æ—¥å¿—ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
- **ç­–ç•¥ç»´æŠ¤**ï¼šå®šæœŸå®¡æŸ¥å’Œæ›´æ–°å®‰å…¨ç­–ç•¥
- **æ–‡æ¡£è®°å½•**ï¼šè®°å½•è‡ªå®šä¹‰ç­–ç•¥å’Œé…ç½®å˜æ›´

### 10.4 å­¦ä¹ å»ºè®®å’Œæ³¨æ„äº‹é¡¹


**ğŸ“š å­¦ä¹ è·¯å¾„**
```
1. ç†è§£DACå’ŒMACçš„åŒºåˆ«
2. ç†Ÿæ‚‰SELinuxåŸºæœ¬æ¦‚å¿µå’Œå‘½ä»¤
3. æŒæ¡å®‰å…¨ä¸Šä¸‹æ–‡çš„æŸ¥çœ‹å’Œä¿®æ”¹
4. å­¦ä¼šåˆ†æå®¡è®¡æ—¥å¿—å’Œè§£å†³è¿è§„é—®é¢˜
5. äº†è§£AppArmorçš„åŸºæœ¬ä½¿ç”¨
6. å®è·µè‡ªå®šä¹‰ç­–ç•¥åˆ›å»º
```

**âš ï¸ å¸¸è§é™·é˜±**
```
é¿å…ç›´æ¥ç¦ç”¨ï¼š
- é‡åˆ°é—®é¢˜ä¸è¦ç›´æ¥å…³é—­MAC
- åº”è¯¥åˆ†æåŸå› ï¼Œè°ƒæ•´ç­–ç•¥

è°¨æ…ä½¿ç”¨å®½æ¾æ¨¡å¼ï¼š
- å®½æ¾æ¨¡å¼ä»…ç”¨äºè°ƒè¯•
- ä¸è¦é•¿æœŸè¿è¡Œåœ¨å®½æ¾æ¨¡å¼

å¤‡ä»½é‡è¦ç­–ç•¥ï¼š
- è‡ªå®šä¹‰ç­–ç•¥è¦å¤‡ä»½
- è®°å½•é‡è¦çš„é…ç½®å˜æ›´
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- å¼ºåˆ¶è®¿é—®æ§åˆ¶æ˜¯ç³»ç»Ÿå®‰å…¨çš„é‡è¦é˜²çº¿
- SELinuxåŠŸèƒ½å¼ºå¤§ä½†å¤æ‚ï¼ŒAppArmorç®€å•æ˜“ç”¨
- å®‰å…¨ç­–ç•¥éœ€è¦åœ¨å®‰å…¨æ€§å’Œå¯ç”¨æ€§é—´æ‰¾åˆ°å¹³è¡¡
- æ—¥å¿—åˆ†ææ˜¯è§£å†³MACé—®é¢˜çš„å…³é”®æŠ€èƒ½
- å¾ªåºæ¸è¿›çš„éƒ¨ç½²ç­–ç•¥èƒ½é¿å…å¾ˆå¤šé—®é¢˜