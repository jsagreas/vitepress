---
title: 11ã€æ‰¹é‡ç”¨æˆ·ç®¡ç†å·¥å…·
---
## ğŸ“š ç›®å½•

1. [æ‰¹é‡ç”¨æˆ·ç®¡ç†æ¦‚è¿°](#1-æ‰¹é‡ç”¨æˆ·ç®¡ç†æ¦‚è¿°)
2. [newuserså‘½ä»¤è¯¦è§£](#2-newuserså‘½ä»¤è¯¦è§£)
3. [chpasswdæ‰¹é‡å¯†ç ç®¡ç†](#3-chpasswdæ‰¹é‡å¯†ç ç®¡ç†)
4. [CSVæ ¼å¼ç”¨æˆ·ç®¡ç†](#4-csvæ ¼å¼ç”¨æˆ·ç®¡ç†)
5. [ç”¨æˆ·ç®¡ç†è„šæœ¬å¼€å‘](#5-ç”¨æˆ·ç®¡ç†è„šæœ¬å¼€å‘)
6. [LDIFæ ¼å¼å¤„ç†](#6-ldifæ ¼å¼å¤„ç†)
7. [æ‰¹é‡æ“ä½œå®‰å…¨ç­–ç•¥](#7-æ‰¹é‡æ“ä½œå®‰å…¨ç­–ç•¥)
8. [ç”¨æˆ·è¿ç§»ä¸è‡ªåŠ¨åŒ–](#8-ç”¨æˆ·è¿ç§»ä¸è‡ªåŠ¨åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“‹ æ‰¹é‡ç”¨æˆ·ç®¡ç†æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯æ‰¹é‡ç”¨æˆ·ç®¡ç†


**ç®€å•ç†è§£**ï¼šå°±åƒå·¥å‚çš„æµæ°´çº¿ä¸€æ ·ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å¤„ç†å¾ˆå¤šç”¨æˆ·ï¼Œè€Œä¸ç”¨ä¸€ä¸ªä¸€ä¸ªæ‰‹åŠ¨æ“ä½œã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼ˆä¸€ä¸ªä¸€ä¸ªå¤„ç†ï¼‰ï¼š           æ‰¹é‡æ–¹å¼ï¼ˆä¸€æ¬¡å¤„ç†å¤šä¸ªï¼‰ï¼š
useradd user1                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
passwd user1                      â”‚  ç”¨æˆ·æ¸…å•æ–‡ä»¶    â”‚
useradd user2            vs       â”‚ user1:pass1     â”‚ â†’ æ‰¹é‡å·¥å…· â†’ 100ä¸ªç”¨æˆ·
passwd user2                      â”‚ user2:pass2     â”‚              åŒæ—¶åˆ›å»º
useradd user3                     â”‚ ...             â”‚
...                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ« **å­¦æ ¡**ï¼šæ–°å­¦æœŸæ‰¹é‡åˆ›å»ºå­¦ç”Ÿè´¦å·
- ğŸ¢ **å…¬å¸**ï¼šæ–°å‘˜å·¥å…¥èŒæ‰¹é‡å¼€æˆ·
- ğŸ–¥ï¸ **æœåŠ¡å™¨**ï¼šç³»ç»Ÿè¿ç§»æ—¶æ‰¹é‡è½¬ç§»ç”¨æˆ·
- ğŸ”§ **è¿ç»´**ï¼šå®šæœŸæ‰¹é‡ä¿®æ”¹å¯†ç 

### 1.2 æ‰¹é‡ç®¡ç†çš„æ ¸å¿ƒå·¥å…·


**ä¸»è¦å·¥å…·å¯¹æ¯”**ï¼š

| å·¥å…·åç§° | **ä¸»è¦åŠŸèƒ½** | **è¾“å…¥æ ¼å¼** | **é€‚ç”¨åœºæ™¯** |
|---------|------------|-------------|-------------|
| `newusers` | **æ‰¹é‡åˆ›å»ºç”¨æˆ·** | `passwdæ ¼å¼æ–‡ä»¶` | å¤§æ‰¹é‡æ–°å»ºç”¨æˆ· |
| `chpasswd` | **æ‰¹é‡ä¿®æ”¹å¯†ç ** | `ç”¨æˆ·:å¯†ç æ ¼å¼` | å¯†ç æ‰¹é‡æ›´æ–° |
| **è‡ªå®šä¹‰è„šæœ¬** | **çµæ´»å¤„ç†** | `CSV/JSONç­‰` | å¤æ‚ä¸šåŠ¡éœ€æ±‚ |

> ğŸ’¡ **è®°å¿†æŠ€å·§**ï¼šnew**users** = æ–°å»ºå¤šä¸ª**ç”¨æˆ·**ï¼Œch**passwd** = æ”¹å˜å¤šä¸ª**å¯†ç **

### 1.3 æ‰¹é‡æ“ä½œçš„ä¼˜åŠ¿


**ä¸ºä»€ä¹ˆè¦ç”¨æ‰¹é‡ç®¡ç†**ï¼š

```
æ•ˆç‡å¯¹æ¯”ï¼š
æ‰‹åŠ¨åˆ›å»º100ä¸ªç”¨æˆ· = 100æ¬¡ Ã— 2åˆ†é’Ÿ = 200åˆ†é’Ÿ â‰ˆ 3.3å°æ—¶
æ‰¹é‡åˆ›å»º100ä¸ªç”¨æˆ· = å‡†å¤‡5åˆ†é’Ÿ + æ‰§è¡Œ1åˆ†é’Ÿ = 6åˆ†é’Ÿ

æå‡æ•ˆç‡ï¼š200åˆ†é’Ÿ â†’ 6åˆ†é’Ÿï¼Œæ•ˆç‡æå‡33å€ï¼
```

**å…·ä½“ä¼˜åŠ¿**ï¼š
- âš¡ **é€Ÿåº¦å¿«**ï¼šä¸€æ¡å‘½ä»¤å¤„ç†æˆç™¾ä¸Šåƒç”¨æˆ·
- ğŸ¯ **å‡†ç¡®æ€§é«˜**ï¼šé¿å…æ‰‹åŠ¨è¾“å…¥é”™è¯¯
- ğŸ“Š **æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„ç”¨æˆ·é…ç½®å’Œæƒé™
- ğŸ”„ **å¯é‡å¤**ï¼šè„šæœ¬å¯ä»¥åå¤ä½¿ç”¨
- ğŸ“ **æ˜“å®¡è®¡**ï¼šæ“ä½œè®°å½•æ¸…æ™°å¯è¿½æº¯

---

## 2. ğŸ†• newuserså‘½ä»¤è¯¦è§£


### 2.1 newusersåŸºæœ¬æ¦‚å¿µ


**newusersæ˜¯ä»€ä¹ˆ**ï¼šLinuxç³»ç»Ÿè‡ªå¸¦çš„æ‰¹é‡åˆ›å»ºç”¨æˆ·å·¥å…·ï¼Œä¸€æ¬¡å¯ä»¥åˆ›å»ºå¤šä¸ªç”¨æˆ·è´¦å·ã€‚

**å·¥ä½œåŸç†**ï¼š
```
è¾“å…¥æ–‡ä»¶ï¼ˆç±»ä¼¼/etc/passwdæ ¼å¼ï¼‰â†’ newuserså‘½ä»¤ â†’ æ‰¹é‡åˆ›å»ºç”¨æˆ·
```

### 2.2 è¾“å…¥æ–‡ä»¶æ ¼å¼è¯¦è§£


**æ ‡å‡†æ ¼å¼**ï¼šæ¯è¡Œä¸€ä¸ªç”¨æˆ·ï¼Œå­—æ®µç”¨å†’å·åˆ†éš”
```
ç”¨æˆ·å:å¯†ç :UID:GID:æ³¨é‡Š:å®¶ç›®å½•:ç™»å½•Shell
```

**å­—æ®µå«ä¹‰è§£é‡Š**ï¼š

| å­—æ®µä½ç½® | **å­—æ®µåç§°** | **å«ä¹‰è¯´æ˜** | **ç¤ºä¾‹** |
|---------|------------|-------------|---------|
| â‘ ï¸ | **ç”¨æˆ·å** | ç™»å½•æ—¶ä½¿ç”¨çš„åå­— | `alice` |
| â‘¡ï¸ | **å¯†ç ** | æ˜æ–‡å¯†ç ï¼ˆç³»ç»Ÿä¼šè‡ªåŠ¨åŠ å¯†ï¼‰ | `password123` |
| â‘¢ï¸ | **UID** | ç”¨æˆ·IDå·ç  | `1001` |
| â‘£ï¸ | **GID** | ä¸»ç»„IDå·ç  | `1001` |
| â‘¤ï¸ | **æ³¨é‡Š** | ç”¨æˆ·æè¿°ä¿¡æ¯ | `Alice Smith` |
| â‘¥ï¸ | **å®¶ç›®å½•** | ç”¨æˆ·çš„ä¸ªäººæ–‡ä»¶å¤¹è·¯å¾„ | `/home/alice` |
| â‘¦ï¸ | **ç™»å½•Shell** | ç”¨æˆ·ç™»å½•åä½¿ç”¨çš„å‘½ä»¤è¡Œ | `/bin/bash` |

### 2.3 å®é™…ä½¿ç”¨ç¤ºä¾‹


**åˆ›å»ºç”¨æˆ·æ¸…å•æ–‡ä»¶**ï¼š
```bash
# åˆ›å»ºåä¸º users.txt çš„æ–‡ä»¶
cat > users.txt << 'EOF'
alice:password123:1001:1001:Alice Smith:/home/alice:/bin/bash
bob:mypass456:1002:1002:Bob Johnson:/home/bob:/bin/bash
charlie:secret789:1003:1003:Charlie Brown:/home/charlie:/bin/bash
EOF
```

**æ‰§è¡Œæ‰¹é‡åˆ›å»º**ï¼š
```bash
# ä½¿ç”¨newuserså‘½ä»¤æ‰¹é‡åˆ›å»º
sudo newusers users.txt

# æ£€æŸ¥ç»“æœ
tail -3 /etc/passwd
# è¾“å‡ºï¼š
# alice:x:1001:1001:Alice Smith:/home/alice:/bin/bash
# bob:x:1002:1002:Bob Johnson:/home/bob:/bin/bash
# charlie:x:1003:1003:Charlie Brown:/home/charlie:/bin/bash
```

> âš ï¸ **æ³¨æ„**ï¼šå¯†ç å­—æ®µå†™æ˜æ–‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŠ å¯†å­˜å‚¨ï¼Œæ–‡ä»¶ä½¿ç”¨ååº”è¯¥ç«‹å³åˆ é™¤ä¿æŠ¤å®‰å…¨ã€‚

### 2.4 é«˜çº§ä½¿ç”¨æŠ€å·§


**è‡ªåŠ¨åˆ†é…UID/GID**ï¼š
```bash
# è®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…IDï¼ˆç•™ç©ºå³å¯ï¼‰
alice:password123:::Alice Smith:/home/alice:/bin/bash
bob:mypass456:::Bob Johnson:/home/bob:/bin/bash
```

**ä½¿ç”¨ç»Ÿä¸€ç»„**ï¼š
```bash
# æ‰€æœ‰ç”¨æˆ·éƒ½åŠ å…¥studentsç»„ï¼ˆGID=2000ï¼‰
alice:password123::2000:Alice Smith:/home/alice:/bin/bash
bob:mypass456::2000:Bob Johnson:/home/bob:/bin/bash
```

**æ‰¹é‡åˆ›å»ºç³»ç»Ÿç”¨æˆ·**ï¼š
```bash
# åˆ›å»ºç³»ç»ŸæœåŠ¡ç”¨æˆ·ï¼ˆUID < 1000ï¼‰
webapp:x:800:800:Web App User:/var/lib/webapp:/sbin/nologin
dbuser:x:801:801:Database User:/var/lib/mysql:/sbin/nologin
```

---

## 3. ğŸ” chpasswdæ‰¹é‡å¯†ç ç®¡ç†


### 3.1 chpasswdåŸºæœ¬æ¦‚å¿µ


**chpasswdæ˜¯ä»€ä¹ˆ**ï¼šä¸“é—¨ç”¨äºæ‰¹é‡ä¿®æ”¹ç”¨æˆ·å¯†ç çš„å‘½ä»¤å·¥å…·ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- ğŸ”„ **å®šæœŸå¯†ç æ›´æ–°**ï¼šå…¬å¸è¦æ±‚æ¯å­£åº¦æ›´æ¢å¯†ç 
- ğŸ†˜ **å¯†ç é‡ç½®**ï¼šç”¨æˆ·å¿˜è®°å¯†ç éœ€è¦é‡ç½®
- ğŸ”’ **å®‰å…¨åŠ å¼º**ï¼šå‘ç°å®‰å…¨é—®é¢˜åç´§æ€¥æ›´æ¢å¯†ç 
- ğŸ“‹ **æ–°å‘˜å·¥å¯†ç **ï¼šç»™æ–°åˆ›å»ºçš„ç”¨æˆ·è®¾ç½®åˆå§‹å¯†ç 

### 3.2 åŸºæœ¬ä½¿ç”¨æ–¹æ³•


**è¾“å…¥æ ¼å¼**ï¼šæ¯è¡Œä¸€ä¸ªç”¨æˆ·ï¼Œæ ¼å¼ä¸º`ç”¨æˆ·å:æ–°å¯†ç `

**ç®€å•ç¤ºä¾‹**ï¼š
```bash
# åˆ›å»ºå¯†ç æ›´æ–°æ–‡ä»¶
cat > passwords.txt << 'EOF'
alice:newpass123
bob:mynewpass456  
charlie:newsecret789
EOF

# æ‰¹é‡ä¿®æ”¹å¯†ç 
sudo chpasswd < passwords.txt

# éªŒè¯ä¿®æ”¹ç»“æœ
sudo passwd -S alice bob charlie
```

### 3.3 åŠ å¯†é€‰é¡¹è¯¦è§£


**é»˜è®¤åŠ å¯†vsæ‰‹åŠ¨åŠ å¯†**ï¼š

```bash
# æ–¹å¼1ï¼šæ˜æ–‡å¯†ç ï¼ˆæ¨èï¼Œå®‰å…¨ï¼‰
echo "alice:newpassword" | sudo chpasswd

# æ–¹å¼2ï¼šé¢„åŠ å¯†å¯†ç 
echo "alice:\$6\$salt\$encryptedpassword" | sudo chpasswd -e
```

**ä¸åŒåŠ å¯†ç®—æ³•**ï¼š
```bash
# ä½¿ç”¨MD5åŠ å¯†
echo "alice:password123" | sudo chpasswd -m

# ä½¿ç”¨SHA-256åŠ å¯†ï¼ˆé»˜è®¤ï¼‰
echo "alice:password123" | sudo chpasswd -S

# ä½¿ç”¨SHA-512åŠ å¯†ï¼ˆæœ€å®‰å…¨ï¼‰
echo "alice:password123" | sudo chpasswd -s
```

> ğŸ“Š **åŠ å¯†å¼ºåº¦å¯¹æ¯”**ï¼šMD5 < SHA-256 < SHA-512ï¼Œæ¨èä½¿ç”¨SHA-512

### 3.4 æ‰¹é‡å¯†ç ç®¡ç†ç­–ç•¥


**ç”Ÿæˆéšæœºå¯†ç **ï¼š
```bash
#!/bin/bash
# ä¸ºç”¨æˆ·ç”Ÿæˆéšæœºå¯†ç è„šæœ¬

users=("alice" "bob" "charlie")
password_file="temp_passwords.txt"

# æ¸…ç©ºå¯†ç æ–‡ä»¶
> "$password_file"

for user in "${users[@]}"; do
    # ç”Ÿæˆ8ä½éšæœºå¯†ç 
    password=$(openssl rand -base64 8 | tr -d "=+/" | cut -c1-8)
    echo "$user:$password" >> "$password_file"
    echo "ç”¨æˆ· $user çš„æ–°å¯†ç : $password"
done

# æ‰¹é‡åº”ç”¨å¯†ç 
sudo chpasswd < "$password_file"

# å®‰å…¨åˆ é™¤å¯†ç æ–‡ä»¶
shred -u "$password_file"
```

**å¯†ç å¤æ‚åº¦éªŒè¯**ï¼š
```bash
#!/bin/bash
# éªŒè¯å¯†ç æ˜¯å¦ç¬¦åˆå¤æ‚åº¦è¦æ±‚

validate_password() {
    local password=$1
    
    # æ£€æŸ¥é•¿åº¦ï¼ˆè‡³å°‘8ä½ï¼‰
    if [ ${#password} -lt 8 ]; then
        echo "âŒ å¯†ç é•¿åº¦ä¸è¶³8ä½"
        return 1
    fi
    
    # æ£€æŸ¥æ˜¯å¦åŒ…å«æ•°å­—
    if ! [[ "$password" =~ [0-9] ]]; then
        echo "âŒ å¯†ç å¿…é¡»åŒ…å«æ•°å­—"
        return 1
    fi
    
    # æ£€æŸ¥æ˜¯å¦åŒ…å«å¤§å°å†™å­—æ¯
    if ! [[ "$password" =~ [a-z] ]] || ! [[ "$password" =~ [A-Z] ]]; then
        echo "âŒ å¯†ç å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯"
        return 1
    fi
    
    echo "âœ… å¯†ç ç¬¦åˆå¤æ‚åº¦è¦æ±‚"
    return 0
}

# ä½¿ç”¨ç¤ºä¾‹
validate_password "Password123"
```

---

## 4. ğŸ“Š CSVæ ¼å¼ç”¨æˆ·ç®¡ç†


### 4.1 CSVæ ¼å¼çš„ä¼˜åŠ¿


**ä¸ºä»€ä¹ˆä½¿ç”¨CSV**ï¼š
- ğŸ“ˆ **Excelå…¼å®¹**ï¼šå¯ä»¥ç”¨ç”µå­è¡¨æ ¼è½¯ä»¶ç¼–è¾‘
- ğŸ”„ **æ ‡å‡†æ ¼å¼**ï¼šå¤§å¤šæ•°ç³»ç»Ÿéƒ½æ”¯æŒ
- ğŸ“ **æ˜“ç¼–è¾‘**ï¼šæ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨å°±èƒ½ä¿®æ”¹
- ğŸ” **æ˜“æŸ¥çœ‹**ï¼šæ•°æ®ç»“æ„ä¸€ç›®äº†ç„¶

**CSV vs ä¼ ç»Ÿæ ¼å¼å¯¹æ¯”**ï¼š

```
ä¼ ç»Ÿpasswdæ ¼å¼ï¼š
alice:password123:1001:1001:Alice Smith:/home/alice:/bin/bash

CSVæ ¼å¼ï¼ˆæ›´æ¸…æ™°ï¼‰ï¼š
ç”¨æˆ·å,å¯†ç ,UID,GID,å§“å,éƒ¨é—¨,é‚®ç®±,å®¶ç›®å½•,Shell
alice,password123,1001,1001,Alice Smith,IT,alice@company.com,/home/alice,/bin/bash
```

### 4.2 CSVç”¨æˆ·å¯¼å…¥è„šæœ¬


**åŸºæœ¬CSVå¤„ç†è„šæœ¬**ï¼š
```bash
#!/bin/bash
# CSVæ ¼å¼æ‰¹é‡ç”¨æˆ·å¯¼å…¥è„šæœ¬

CSV_FILE="users.csv"
TEMP_FILE="/tmp/newusers_temp.txt"

# æ£€æŸ¥CSVæ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ ! -f "$CSV_FILE" ]; then
    echo "âŒ é”™è¯¯ï¼šæ‰¾ä¸åˆ°CSVæ–‡ä»¶ $CSV_FILE"
    exit 1
fi

echo "ğŸ“‹ å¼€å§‹å¤„ç†CSVç”¨æˆ·æ•°æ®..."

# è·³è¿‡æ ‡é¢˜è¡Œï¼Œå¤„ç†CSVæ•°æ®
tail -n +2 "$CSV_FILE" | while IFS=',' read -r username password uid gid fullname dept email homedir shell
do
    # æ•°æ®éªŒè¯
    if [ -z "$username" ] || [ -z "$password" ]; then
        echo "âš ï¸ è·³è¿‡æ— æ•ˆè¡Œï¼šç”¨æˆ·åæˆ–å¯†ç ä¸ºç©º"
        continue
    fi
    
    # è®¾ç½®é»˜è®¤å€¼
    uid=${uid:-""}
    gid=${gid:-""}
    fullname=${fullname:-"$username"}
    homedir=${homedir:-"/home/$username"}
    shell=${shell:-"/bin/bash"}
    
    # è½¬æ¢ä¸ºnewusersæ ¼å¼
    echo "$username:$password:$uid:$gid:$fullname:$homedir:$shell" >> "$TEMP_FILE"
    
    echo "âœ… å¤„ç†ç”¨æˆ·ï¼š$username ($fullname)"
done

# æ‰§è¡Œæ‰¹é‡åˆ›å»º
echo "ğŸš€ å¼€å§‹æ‰¹é‡åˆ›å»ºç”¨æˆ·..."
sudo newusers "$TEMP_FILE"

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -f "$TEMP_FILE"
echo "âœ… æ‰¹é‡ç”¨æˆ·åˆ›å»ºå®Œæˆï¼"
```

**ç¤ºä¾‹CSVæ–‡ä»¶å†…å®¹**ï¼š
```csv
ç”¨æˆ·å,å¯†ç ,UID,GID,å§“å,éƒ¨é—¨,é‚®ç®±,å®¶ç›®å½•,Shell
alice,Pass123!,1001,1001,Alice Smith,å¼€å‘éƒ¨,alice@company.com,/home/alice,/bin/bash
bob,MyPwd456!,1002,1002,Bob Johnson,æµ‹è¯•éƒ¨,bob@company.com,/home/bob,/bin/bash  
charlie,Secret789!,1003,1003,Charlie Brown,è¿ç»´éƒ¨,charlie@company.com,/home/charlie,/bin/bash
```

### 4.3 å¢å¼ºåŠŸèƒ½è„šæœ¬


**å¸¦æ•°æ®éªŒè¯çš„CSVå¤„ç†**ï¼š
```bash
#!/bin/bash
# å¢å¼ºç‰ˆCSVç”¨æˆ·å¯¼å…¥è„šæœ¬

CSV_FILE="$1"
LOG_FILE="user_import.log"

# å‚æ•°æ£€æŸ¥
if [ -z "$CSV_FILE" ]; then
    echo "âŒ ç”¨æ³•: $0 <CSVæ–‡ä»¶>"
    exit 1
fi

# æ—¥å¿—å‡½æ•°
log_message() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" | tee -a "$LOG_FILE"
}

# éªŒè¯ç”¨æˆ·åæ ¼å¼
validate_username() {
    local username=$1
    if [[ ! "$username" =~ ^[a-z][a-z0-9_-]*$ ]]; then
        return 1
    fi
    return 0
}

# æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
user_exists() {
    local username=$1
    if id "$username" &>/dev/null; then
        return 0
    fi
    return 1
}

log_message "ğŸ“‹ å¼€å§‹CSVç”¨æˆ·å¯¼å…¥è¿‡ç¨‹"

success_count=0
skip_count=0

while IFS=',' read -r username password uid gid fullname dept email homedir shell
do
    # è·³è¿‡æ ‡é¢˜è¡Œ
    if [ "$username" = "ç”¨æˆ·å" ]; then
        continue
    fi
    
    # éªŒè¯ç”¨æˆ·åæ ¼å¼
    if ! validate_username "$username"; then
        log_message "âš ï¸ è·³è¿‡ç”¨æˆ· $usernameï¼šç”¨æˆ·åæ ¼å¼æ— æ•ˆ"
        ((skip_count++))
        continue
    fi
    
    # æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
    if user_exists "$username"; then
        log_message "âš ï¸ è·³è¿‡ç”¨æˆ· $usernameï¼šç”¨æˆ·å·²å­˜åœ¨"
        ((skip_count++))
        continue
    fi
    
    # åˆ›å»ºç”¨æˆ·
    if sudo useradd -m -c "$fullname" -s "${shell:-/bin/bash}" "$username"; then
        echo "$username:$password" | sudo chpasswd
        log_message "âœ… æˆåŠŸåˆ›å»ºç”¨æˆ·ï¼š$username ($fullname)"
        ((success_count++))
    else
        log_message "âŒ åˆ›å»ºç”¨æˆ·å¤±è´¥ï¼š$username"
        ((skip_count++))
    fi
    
done < "$CSV_FILE"

log_message "ğŸ“Š å¯¼å…¥å®Œæˆ - æˆåŠŸï¼š$success_count, è·³è¿‡ï¼š$skip_count"
```

---

## 5. ğŸ“œ ç”¨æˆ·ç®¡ç†è„šæœ¬å¼€å‘


### 5.1 è„šæœ¬å¼€å‘åŸºç¡€


**ä¸ºä»€ä¹ˆè¦å†™è„šæœ¬**ï¼š
- ğŸ›ï¸ **è‡ªåŠ¨åŒ–**ï¼šå‡å°‘äººå·¥æ“ä½œï¼Œæé«˜æ•ˆç‡
- ğŸ”§ **å®šåˆ¶åŒ–**ï¼šæ»¡è¶³ç‰¹æ®Šçš„ä¸šåŠ¡éœ€æ±‚
- ğŸ”„ **å¯é‡å¤**ï¼šæ ‡å‡†åŒ–æµç¨‹ï¼Œé¿å…é”™è¯¯
- ğŸ“Š **å¯è®°å½•**ï¼šæ“ä½œæ—¥å¿—ï¼Œä¾¿äºå®¡è®¡

### 5.2 å®Œæ•´çš„ç”¨æˆ·ç®¡ç†è„šæœ¬


**å¤šåŠŸèƒ½ç”¨æˆ·ç®¡ç†è„šæœ¬**ï¼š
```bash
#!/bin/bash
# ç»¼åˆç”¨æˆ·ç®¡ç†å·¥å…·
# åŠŸèƒ½ï¼šåˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹ã€å¯¼å…¥ç”¨æˆ·

SCRIPT_NAME="ç”¨æˆ·ç®¡ç†å·¥å…·"
VERSION="1.0"
LOG_FILE="/var/log/user_management.log"

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# æ—¥å¿—è®°å½•å‡½æ•°
log() {
    local level=$1
    shift
    local message="$*"
    echo -e "$(date '+%Y-%m-%d %H:%M:%S') [$level] $message" | tee -a "$LOG_FILE"
}

# æ˜¾ç¤ºèœå•
show_menu() {
    clear
    echo -e "${BLUE}======================================${NC}"
    echo -e "${BLUE}    $SCRIPT_NAME v$VERSION${NC}"
    echo -e "${BLUE}======================================${NC}"
    echo "1. ğŸ†• æ‰¹é‡åˆ›å»ºç”¨æˆ·"
    echo "2. ğŸ” æ‰¹é‡ä¿®æ”¹å¯†ç "
    echo "3. ğŸ—‘ï¸  æ‰¹é‡åˆ é™¤ç”¨æˆ·"
    echo "4. ğŸ“Š CSVæ–‡ä»¶å¯¼å…¥"
    echo "5. ğŸ“‹ ç”¨æˆ·ä¿¡æ¯æŸ¥çœ‹"
    echo "6. ğŸšª é€€å‡ºç¨‹åº"
    echo -e "${BLUE}======================================${NC}"
    echo -n "è¯·é€‰æ‹©æ“ä½œ [1-6]: "
}

# æ‰¹é‡åˆ›å»ºç”¨æˆ·
batch_create_users() {
    echo -e "${YELLOW}ğŸ†• æ‰¹é‡ç”¨æˆ·åˆ›å»º${NC}"
    echo -n "è¯·è¾“å…¥ç”¨æˆ·æ¸…å•æ–‡ä»¶è·¯å¾„: "
    read -r user_file
    
    if [ ! -f "$user_file" ]; then
        echo -e "${RED}âŒ é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨${NC}"
        return 1
    fi
    
    echo -e "${BLUE}ğŸ“‹ é¢„è§ˆå°†è¦åˆ›å»ºçš„ç”¨æˆ·ï¼š${NC}"
    while IFS=':' read -r username _ _ _ comment _ _; do
        echo "  - $username ($comment)"
    done < "$user_file"
    
    echo -n "ç¡®è®¤åˆ›å»ºå—ï¼Ÿ[y/N]: "
    read -r confirm
    if [[ "$confirm" =~ ^[Yy]$ ]]; then
        if sudo newusers "$user_file"; then
            log "INFO" "æ‰¹é‡åˆ›å»ºç”¨æˆ·æˆåŠŸï¼Œæ–‡ä»¶ï¼š$user_file"
            echo -e "${GREEN}âœ… ç”¨æˆ·åˆ›å»ºæˆåŠŸ${NC}"
        else
            log "ERROR" "æ‰¹é‡åˆ›å»ºç”¨æˆ·å¤±è´¥ï¼Œæ–‡ä»¶ï¼š$user_file"
            echo -e "${RED}âŒ ç”¨æˆ·åˆ›å»ºå¤±è´¥${NC}"
        fi
    fi
}

# æ‰¹é‡ä¿®æ”¹å¯†ç 
batch_change_passwords() {
    echo -e "${YELLOW}ğŸ” æ‰¹é‡å¯†ç ä¿®æ”¹${NC}"
    echo -n "è¯·è¾“å…¥å¯†ç æ–‡ä»¶è·¯å¾„: "
    read -r passwd_file
    
    if [ ! -f "$passwd_file" ]; then
        echo -e "${RED}âŒ é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨${NC}"
        return 1
    fi
    
    echo -e "${BLUE}ğŸ“‹ å°†è¦ä¿®æ”¹å¯†ç çš„ç”¨æˆ·ï¼š${NC}"
    while IFS=':' read -r username _; do
        echo "  - $username"
    done < "$passwd_file"
    
    echo -n "ç¡®è®¤ä¿®æ”¹å¯†ç å—ï¼Ÿ[y/N]: "
    read -r confirm
    if [[ "$confirm" =~ ^[Yy]$ ]]; then
        if sudo chpasswd < "$passwd_file"; then
            log "INFO" "æ‰¹é‡ä¿®æ”¹å¯†ç æˆåŠŸ"
            echo -e "${GREEN}âœ… å¯†ç ä¿®æ”¹æˆåŠŸ${NC}"
        else
            log "ERROR" "æ‰¹é‡ä¿®æ”¹å¯†ç å¤±è´¥"
            echo -e "${RED}âŒ å¯†ç ä¿®æ”¹å¤±è´¥${NC}"
        fi
    fi
}

# ä¸»ç¨‹åºå¾ªç¯
main() {
    while true; do
        show_menu
        read -r choice
        
        case $choice in
            1) batch_create_users ;;
            2) batch_change_passwords ;;
            3) batch_delete_users ;;
            4) csv_import ;;
            5) show_user_info ;;
            6) echo -e "${GREEN}ğŸ‘‹ å†è§ï¼${NC}"; exit 0 ;;
            *) echo -e "${RED}âŒ æ— æ•ˆé€‰æ‹©${NC}" ;;
        esac
        
        echo -e "\n${YELLOW}æŒ‰å›è½¦é”®ç»§ç»­...${NC}"
        read -r
    done
}

# æ£€æŸ¥æƒé™
if [ "$EUID" -ne 0 ]; then
    echo -e "${RED}âŒ æ­¤è„šæœ¬éœ€è¦rootæƒé™è¿è¡Œ${NC}"
    echo "è¯·ä½¿ç”¨: sudo $0"
    exit 1
fi

# å¯åŠ¨ä¸»ç¨‹åº
main
```

### 5.3 è„šæœ¬æœ€ä½³å®è·µ


**å®‰å…¨è€ƒè™‘**ï¼š
```bash
# 1. æƒé™æ£€æŸ¥
if [ "$EUID" -ne 0 ]; then
    echo "éœ€è¦rootæƒé™"
    exit 1
fi

# 2. è¾“å…¥éªŒè¯
validate_input() {
    local input=$1
    # é˜²æ­¢å‘½ä»¤æ³¨å…¥
    if [[ "$input" =~ [;&\|] ]]; then
        echo "è¾“å…¥åŒ…å«å±é™©å­—ç¬¦"
        return 1
    fi
}

# 3. ä¸´æ—¶æ–‡ä»¶å®‰å…¨å¤„ç†
TEMP_FILE=$(mktemp)
trap "rm -f $TEMP_FILE" EXIT

# 4. å¯†ç æ–‡ä»¶æƒé™
chmod 600 password_file
```

**é”™è¯¯å¤„ç†**ï¼š
```bash
# è®¾ç½®é”™è¯¯æ—¶é€€å‡º
set -e

# é”™è¯¯å¤„ç†å‡½æ•°
handle_error() {
    local line_no=$1
    local error_code=$2
    echo "âŒ é”™è¯¯å‘ç”Ÿåœ¨ç¬¬ $line_no è¡Œï¼Œé€€å‡ºä»£ç ï¼š$error_code"
    # æ¸…ç†å·¥ä½œ
    cleanup
    exit $error_code
}

# æ³¨å†Œé”™è¯¯å¤„ç†å™¨
trap 'handle_error ${LINENO} $?' ERR
```

---

## 6. ğŸ“„ LDIFæ ¼å¼å¤„ç†


### 6.1 LDIFæ ¼å¼ç®€ä»‹


**LDIFæ˜¯ä»€ä¹ˆ**ï¼šLDAP Data Interchange Formatï¼Œæ˜¯ä¸€ç§ç”¨äºLDAPç›®å½•æœåŠ¡çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚

**ä¸ºä»€ä¹ˆéœ€è¦äº†è§£LDIF**ï¼š
- ğŸ¢ **ä¼ä¸šç¯å¢ƒ**ï¼šå¾ˆå¤šå¤§å…¬å¸ä½¿ç”¨LDAPç®¡ç†ç”¨æˆ·
- ğŸ”„ **æ•°æ®è¿ç§»**ï¼šä»Windows ADè¿ç§»åˆ°Linux
- ğŸŒ **ç»Ÿä¸€è®¤è¯**ï¼šå®ç°è·¨å¹³å°ç”¨æˆ·ç®¡ç†
- ğŸ“Š **æ•°æ®äº¤æ¢**ï¼šä¸åŒç³»ç»Ÿé—´çš„ç”¨æˆ·ä¿¡æ¯äº¤æ¢

### 6.2 LDIFæ ¼å¼ç»“æ„


**åŸºæœ¬LDIFæ¡ç›®ç¤ºä¾‹**ï¼š
```ldif
# ç”¨æˆ·Aliceçš„LDIFæ¡ç›®
dn: uid=alice,ou=people,dc=company,dc=com
objectClass: inetOrgPerson
objectClass: posixAccount
uid: alice
cn: Alice Smith
sn: Smith
givenName: Alice
mail: alice@company.com
uidNumber: 1001
gidNumber: 1001
homeDirectory: /home/alice
loginShell: /bin/bash
userPassword: {SSHA}encrypted_password_here
```

**å­—æ®µè§£é‡Š**ï¼š

| å­—æ®µåç§° | **å«ä¹‰è¯´æ˜** | **Linuxå¯¹åº”** |
|---------|------------|-------------|
| `dn` | **ä¸“æœ‰åç§°**ï¼Œç”¨æˆ·çš„å”¯ä¸€æ ‡è¯† | ç”¨æˆ·è·¯å¾„ |
| `uid` | **ç”¨æˆ·ID**ï¼Œç™»å½•å | ç”¨æˆ·å |
| `uidNumber` | **ç”¨æˆ·æ•°å­—ID** | Linux UID |
| `gidNumber` | **ç»„æ•°å­—ID** | Linux GID |
| `homeDirectory` | **å®¶ç›®å½•è·¯å¾„** | /home/username |
| `loginShell` | **ç™»å½•Shell** | /bin/bash |

### 6.3 LDIFè½¬Linuxç”¨æˆ·è„šæœ¬


**LDIFè½¬æ¢å¤„ç†è„šæœ¬**ï¼š
```bash
#!/bin/bash
# LDIFæ ¼å¼è½¬æ¢ä¸ºLinuxç”¨æˆ·è„šæœ¬

LDIF_FILE="$1"
OUTPUT_FILE="users_from_ldif.txt"

if [ -z "$LDIF_FILE" ]; then
    echo "ç”¨æ³•: $0 <LDIFæ–‡ä»¶>"
    exit 1
fi

echo "ğŸ“‹ æ­£åœ¨å¤„ç†LDIFæ–‡ä»¶ï¼š$LDIF_FILE"

# è§£æLDIFæ–‡ä»¶
parse_ldif() {
    local current_dn=""
    local uid="" uidNumber="" gidNumber="" cn="" homeDirectory="" loginShell=""
    
    while IFS= read -r line; do
        # è·³è¿‡ç©ºè¡Œå’Œæ³¨é‡Š
        [[ -z "$line" || "$line" =~ ^# ]] && continue
        
        # æ–°æ¡ç›®å¼€å§‹
        if [[ "$line" =~ ^dn: ]]; then
            # å¦‚æœæœ‰ä¹‹å‰çš„ç”¨æˆ·æ•°æ®ï¼Œå…ˆå¤„ç†
            if [ -n "$uid" ]; then
                process_user
            fi
            # é‡ç½®å˜é‡
            current_dn="${line#dn: }"
            uid="" uidNumber="" gidNumber="" cn="" homeDirectory="" loginShell=""
            continue
        fi
        
        # è§£æå„ä¸ªå­—æ®µ
        case "$line" in
            uid:*) uid="${line#uid: }" ;;
            uidNumber:*) uidNumber="${line#uidNumber: }" ;;
            gidNumber:*) gidNumber="${line#gidNumber: }" ;;
            cn:*) cn="${line#cn: }" ;;
            homeDirectory:*) homeDirectory="${line#homeDirectory: }" ;;
            loginShell:*) loginShell="${line#loginShell: }" ;;
        esac
    done < "$LDIF_FILE"
    
    # å¤„ç†æœ€åä¸€ä¸ªç”¨æˆ·
    if [ -n "$uid" ]; then
        process_user
    fi
}

# å¤„ç†å•ä¸ªç”¨æˆ·
process_user() {
    # è®¾ç½®é»˜è®¤å€¼
    homeDirectory="${homeDirectory:-/home/$uid}"
    loginShell="${loginShell:-/bin/bash}"
    cn="${cn:-$uid}"
    
    # ç”Ÿæˆä¸´æ—¶å¯†ç 
    temp_password="TempPass$(date +%m%d)"
    
    # è¾“å‡ºåˆ°æ–‡ä»¶ï¼ˆnewusersæ ¼å¼ï¼‰
    echo "$uid:$temp_password:$uidNumber:$gidNumber:$cn:$homeDirectory:$loginShell" >> "$OUTPUT_FILE"
    
    echo "âœ… å¤„ç†ç”¨æˆ·ï¼š$uid ($cn)"
}

# å¼€å§‹å¤„ç†
> "$OUTPUT_FILE"  # æ¸…ç©ºè¾“å‡ºæ–‡ä»¶
parse_ldif

echo "ğŸ“Š LDIFè½¬æ¢å®Œæˆï¼Œè¾“å‡ºæ–‡ä»¶ï¼š$OUTPUT_FILE"
echo "ğŸ” æ‰€æœ‰ç”¨æˆ·ä¸´æ—¶å¯†ç æ ¼å¼ï¼šTempPassMMDD"
echo "âš ï¸ å»ºè®®ç”¨æˆ·é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç "
```

### 6.4 é«˜çº§LDIFå¤„ç†


**å¸¦è¿‡æ»¤æ¡ä»¶çš„LDIFå¤„ç†**ï¼š
```bash
#!/bin/bash
# é«˜çº§LDIFå¤„ç† - æ”¯æŒè¿‡æ»¤å’Œåˆ†ç»„

# é…ç½®å‚æ•°
MIN_UID=1000        # æœ€å°UIDï¼ˆè¿‡æ»¤ç³»ç»Ÿç”¨æˆ·ï¼‰
MAX_UID=9999        # æœ€å¤§UID
TARGET_GROUP="users" # ç›®æ ‡ç»„å
DEFAULT_SHELL="/bin/bash"

# è¿‡æ»¤å‡½æ•°
filter_user() {
    local uid_num=$1
    local object_classes=$2
    
    # UIDèŒƒå›´æ£€æŸ¥
    if [ "$uid_num" -lt "$MIN_UID" ] || [ "$uid_num" -gt "$MAX_UID" ]; then
        return 1
    fi
    
    # å¯¹è±¡ç±»æ£€æŸ¥ï¼ˆç¡®ä¿æ˜¯ç”¨æˆ·è´¦æˆ·ï¼‰
    if [[ ! "$object_classes" =~ posixAccount ]]; then
        return 1
    fi
    
    return 0
}

# ç»„ç®¡ç†
ensure_group() {
    local group_name=$1
    local group_id=$2
    
    if ! getent group "$group_name" >/dev/null 2>&1; then
        echo "ğŸ“ åˆ›å»ºç»„ï¼š$group_name (GID: $group_id)"
        sudo groupadd -g "$group_id" "$group_name"
    fi
}
```

---

## 7. ğŸ” æ‰¹é‡æ“ä½œå®‰å…¨ç­–ç•¥


### 7.1 å®‰å…¨é£é™©åˆ†æ


**æ‰¹é‡æ“ä½œçš„ä¸»è¦é£é™©**ï¼š

```
é£é™©ç­‰çº§åˆ†æï¼š
ğŸ”´ é«˜é£é™©ï¼š
  - å¯†ç æ–‡ä»¶æ³„éœ² â†’ æ‰€æœ‰è´¦æˆ·è¢«æ”»ç ´
  - æƒé™è®¾ç½®é”™è¯¯ â†’ ç”¨æˆ·è·å¾—è¿‡é«˜æƒé™
  - æ‰¹é‡åˆ é™¤é”™è¯¯ â†’ æ•°æ®æ°¸ä¹…ä¸¢å¤±

ğŸŸ¡ ä¸­é£é™©ï¼š
  - ç”¨æˆ·åå†²çª â†’ è¦†ç›–ç°æœ‰ç”¨æˆ·
  - é…ç½®é”™è¯¯ â†’ ç”¨æˆ·æ— æ³•æ­£å¸¸ä½¿ç”¨
  - æ—¥å¿—ç¼ºå¤± â†’ æ— æ³•è¿½æº¯é—®é¢˜

ğŸŸ¢ ä½é£é™©ï¼š
  - ä¸´æ—¶æ–‡ä»¶æ®‹ç•™ â†’ ä¿¡æ¯æ³„éœ²é£é™©
  - æ“ä½œè¶…æ—¶ â†’ éƒ¨åˆ†ç”¨æˆ·åˆ›å»ºå¤±è´¥
```

### 7.2 å¯†ç å®‰å…¨ç­–ç•¥


**å¯†ç æ–‡ä»¶ä¿æŠ¤**ï¼š
```bash
#!/bin/bash
# å®‰å…¨çš„å¯†ç æ–‡ä»¶å¤„ç†

# 1. åˆ›å»ºå®‰å…¨çš„ä¸´æ—¶æ–‡ä»¶
PASSWORD_FILE=$(mktemp -t passwords.XXXXXXXX)
chmod 600 "$PASSWORD_FILE"  # ä»…æ‰€æœ‰è€…å¯è¯»å†™

# 2. è®¾ç½®æ–‡ä»¶è‡ªåŠ¨æ¸…ç†
trap "secure_delete '$PASSWORD_FILE'" EXIT

# å®‰å…¨åˆ é™¤å‡½æ•°
secure_delete() {
    local file=$1
    if [ -f "$file" ]; then
        # å¤šæ¬¡è¦†ç›–æ–‡ä»¶å†…å®¹
        shred -vfz -n 3 "$file"
        rm -f "$file"
        echo "ğŸ—‘ï¸ å®‰å…¨åˆ é™¤å¯†ç æ–‡ä»¶"
    fi
}

# 3. å¯†ç å¼ºåº¦æ£€æŸ¥
check_password_strength() {
    local password=$1
    local score=0
    
    # é•¿åº¦æ£€æŸ¥
    [ ${#password} -ge 8 ] && ((score++))
    [ ${#password} -ge 12 ] && ((score++))
    
    # å¤æ‚åº¦æ£€æŸ¥
    [[ "$password" =~ [a-z] ]] && ((score++))    # å°å†™å­—æ¯
    [[ "$password" =~ [A-Z] ]] && ((score++))    # å¤§å†™å­—æ¯
    [[ "$password" =~ [0-9] ]] && ((score++))    # æ•°å­—
    [[ "$password" =~ [^a-zA-Z0-9] ]] && ((score++))  # ç‰¹æ®Šå­—ç¬¦
    
    # è¯„åˆ†
    if [ $score -ge 5 ]; then
        echo "âœ… å¯†ç å¼ºåº¦ï¼šå¼º"
        return 0
    elif [ $score -ge 3 ]; then
        echo "âš ï¸ å¯†ç å¼ºåº¦ï¼šä¸­ç­‰"
        return 1
    else
        echo "âŒ å¯†ç å¼ºåº¦ï¼šå¼±"
        return 2
    fi
}
```

**å¯†ç ç”Ÿæˆç­–ç•¥**ï¼š
```bash
#!/bin/bash
# å®‰å…¨å¯†ç ç”Ÿæˆå™¨

generate_secure_password() {
    local length=${1:-12}
    local use_symbols=${2:-true}
    
    if [ "$use_symbols" = "true" ]; then
        # åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å¯†ç 
        chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*'
    else
        # åªåŒ…å«å­—æ¯æ•°å­—çš„å¯†ç 
        chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'
    fi
    
    # ç”Ÿæˆå¯†ç 
    password=""
    for i in $(seq 1 $length); do
        password+="${chars:RANDOM%${#chars}:1}"
    done
    
    echo "$password"
}

# æ‰¹é‡ç”Ÿæˆç”¨æˆ·å¯†ç 
generate_user_passwords() {
    local users_file="$1"
    local passwords_file="$2"
    
    > "$passwords_file"
    chmod 600 "$passwords_file"
    
    while read -r username; do
        password=$(generate_secure_password 12 true)
        echo "$username:$password" >> "$passwords_file"
        echo "ğŸ” ç”Ÿæˆå¯†ç ï¼š$username"
    done < "$users_file"
}
```

### 7.3 æ“ä½œå®¡è®¡ä¸æ—¥å¿—


**å®Œå–„çš„å®¡è®¡ç³»ç»Ÿ**ï¼š
```bash
#!/bin/bash
# ç”¨æˆ·ç®¡ç†æ“ä½œå®¡è®¡ç³»ç»Ÿ

AUDIT_LOG="/var/log/user_management_audit.log"
ADMIN_EMAIL="admin@company.com"

# å®¡è®¡æ—¥å¿—å‡½æ•°
audit_log() {
    local operation=$1
    local user_target=$2
    local result=$3
    local details=$4
    
    local timestamp=$(date '+%Y-%m-%d %H:%M:%S')
    local operator=$(who am i | awk '{print $1}')
    local source_ip=$(who am i | awk '{print $5}' | tr -d '()')
    
    # è®°å½•åˆ°å®¡è®¡æ—¥å¿—
    echo "$timestamp|$operator|$source_ip|$operation|$user_target|$result|$details" >> "$AUDIT_LOG"
    
    # é‡è¦æ“ä½œå‘é€é‚®ä»¶é€šçŸ¥
    if [ "$operation" = "BATCH_CREATE" ] || [ "$operation" = "BATCH_DELETE" ]; then
        send_audit_notification "$operation" "$user_target" "$result"
    fi
}

# å‘é€å®¡è®¡é€šçŸ¥
send_audit_notification() {
    local operation=$1
    local target=$2
    local result=$3
    
    local subject="ç”¨æˆ·ç®¡ç†å®¡è®¡é€šçŸ¥ï¼š$operation"
    local body="æ“ä½œï¼š$operation\nç›®æ ‡ï¼š$target\nç»“æœï¼š$result\næ—¶é—´ï¼š$(date)\næ“ä½œè€…ï¼š$(whoami)"
    
    echo -e "$body" | mail -s "$subject" "$ADMIN_EMAIL"
}

# ä½¿ç”¨ç¤ºä¾‹
# audit_log "BATCH_CREATE" "10_users" "SUCCESS" "Created users from CSV file"
# audit_log "PASSWORD_CHANGE" "alice,bob,charlie" "SUCCESS" "Batch password update"
```

### 7.4 å¤‡ä»½ä¸æ¢å¤ç­–ç•¥


**ç”¨æˆ·æ•°æ®å¤‡ä»½**ï¼š
```bash
#!/bin/bash
# ç”¨æˆ·æ•°æ®å¤‡ä»½è„šæœ¬

BACKUP_DIR="/backup/users"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/users_backup_$DATE.tar.gz"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_DIR"

# å¤‡ä»½ç”¨æˆ·ç›¸å…³æ–‡ä»¶
backup_user_data() {
    echo "ğŸ“¦ å¼€å§‹ç”¨æˆ·æ•°æ®å¤‡ä»½..."
    
    # è¦å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨
    local files_to_backup=(
        "/etc/passwd"
        "/etc/shadow"
        "/etc/group"
        "/etc/gshadow"
        "/etc/sudoers"
        "/home"
    )
    
    # åˆ›å»ºå¤‡ä»½
    tar -czf "$BACKUP_FILE" "${files_to_backup[@]}" 2>/dev/null
    
    if [ $? -eq 0 ]; then
        echo "âœ… å¤‡ä»½æˆåŠŸï¼š$BACKUP_FILE"
        
        # è®¾ç½®å¤‡ä»½æ–‡ä»¶æƒé™
        chmod 600 "$BACKUP_FILE"
        
        # è®°å½•å¤‡ä»½ä¿¡æ¯
        echo "$(date): ç”¨æˆ·æ•°æ®å¤‡ä»½æˆåŠŸ - $BACKUP_FILE" >> "$BACKUP_DIR/backup.log"
    else
        echo "âŒ å¤‡ä»½å¤±è´¥"
        return 1
    fi
}

# æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™30å¤©ï¼‰
cleanup_old_backups() {
    find "$BACKUP_DIR" -name "users_backup_*.tar.gz" -mtime +30 -delete
    echo "ğŸ—‘ï¸ æ¸…ç†30å¤©å‰çš„æ—§å¤‡ä»½"
}

# æ‰§è¡Œå¤‡ä»½
backup_user_data
cleanup_old_backups
```

---

## 8. ğŸ”„ ç”¨æˆ·è¿ç§»ä¸è‡ªåŠ¨åŒ–


### 8.1 ç”¨æˆ·è¿ç§»åœºæ™¯


**å¸¸è§è¿ç§»éœ€æ±‚**ï¼š
- ğŸ–¥ï¸ **æœåŠ¡å™¨å‡çº§**ï¼šä»æ—§æœåŠ¡å™¨è¿ç§»åˆ°æ–°æœåŠ¡å™¨
- ğŸ¢ **ç³»ç»Ÿæ•´åˆ**ï¼šå¤šä¸ªç³»ç»Ÿåˆå¹¶ç”¨æˆ·è´¦æˆ·
- â˜ï¸ **äº‘ç«¯è¿ç§»**ï¼šæœ¬åœ°ç”¨æˆ·è¿ç§»åˆ°äº‘æœåŠ¡å™¨
- ğŸ”„ **å¹³å°åˆ‡æ¢**ï¼šä¸åŒLinuxå‘è¡Œç‰ˆä¹‹é—´è¿ç§»

### 8.2 å®Œæ•´è¿ç§»æ–¹æ¡ˆ


**ç”¨æˆ·è¿ç§»è„šæœ¬**ï¼š
```bash
#!/bin/bash
# å®Œæ•´ç”¨æˆ·è¿ç§»è§£å†³æ–¹æ¡ˆ

SOURCE_HOST="$1"
MIGRATION_DIR="/tmp/user_migration"
LOG_FILE="$MIGRATION_DIR/migration.log"

# åˆ›å»ºè¿ç§»ç›®å½•
mkdir -p "$MIGRATION_DIR"

# æ—¥å¿—å‡½æ•°
log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" | tee -a "$LOG_FILE"
}

# 1. ä»æºç³»ç»Ÿå¯¼å‡ºç”¨æˆ·æ•°æ®
export_users() {
    local source_host=$1
    
    log "ğŸ“¤ å¼€å§‹ä» $source_host å¯¼å‡ºç”¨æˆ·æ•°æ®"
    
    # å¯¼å‡ºç”¨æˆ·è´¦æˆ·ä¿¡æ¯
    ssh "$source_host" "awk -F: '\$3 >= 1000 && \$3 < 65534 {print}' /etc/passwd" > "$MIGRATION_DIR/users.passwd"
    
    # å¯¼å‡ºç»„ä¿¡æ¯
    ssh "$source_host" "awk -F: '\$3 >= 1000 && \$3 < 65534 {print}' /etc/group" > "$MIGRATION_DIR/users.group"
    
    # å¯¼å‡ºç”¨æˆ·å¯†ç hashï¼ˆéœ€è¦rootæƒé™ï¼‰
    ssh "$source_host" "sudo awk -F: '\$1 ~ /^[^:]*$/ {print \$1 \":\" \$2}' /etc/shadow" > "$MIGRATION_DIR/users.shadow"
    
    # ç»Ÿè®¡å¯¼å‡ºä¿¡æ¯
    local user_count=$(wc -l < "$MIGRATION_DIR/users.passwd")
    log "âœ… å¯¼å‡ºå®Œæˆï¼Œå…± $user_count ä¸ªç”¨æˆ·"
}

# 2. æ‰“åŒ…ç”¨æˆ·å®¶ç›®å½•
package_home_dirs() {
    local source_host=$1
    
    log "ğŸ“¦ å¼€å§‹æ‰“åŒ…ç”¨æˆ·å®¶ç›®å½•"
    
    # è·å–ç”¨æˆ·åˆ—è¡¨
    local users=($(awk -F: '{print $1}' "$MIGRATION_DIR/users.passwd"))
    
    for user in "${users[@]}"; do
        log "æ‰“åŒ…ç”¨æˆ· $user çš„å®¶ç›®å½•"
        ssh "$source_host" "sudo tar -czf /tmp/${user}_home.tar.gz -C /home $user" 2>/dev/null
        scp "$source_host:/tmp/${user}_home.tar.gz" "$MIGRATION_DIR/"
        ssh "$source_host" "sudo rm -f /tmp/${user}_home.tar.gz"
    done
    
    log "âœ… å®¶ç›®å½•æ‰“åŒ…å®Œæˆ"
}

# 3. åœ¨ç›®æ ‡ç³»ç»Ÿåˆ›å»ºç”¨æˆ·
import_users() {
    log "ğŸ“¥ å¼€å§‹å¯¼å…¥ç”¨æˆ·åˆ°æœ¬åœ°ç³»ç»Ÿ"
    
    # å…ˆåˆ›å»ºç»„
    while IFS=: read -r groupname _ gid _; do
        if ! getent group "$groupname" >/dev/null; then
            sudo groupadd -g "$gid" "$groupname"
            log "åˆ›å»ºç»„ï¼š$groupname (GID: $gid)"
        fi
    done < "$MIGRATION_DIR/users.group"
    
    # åˆ›å»ºç”¨æˆ·è´¦æˆ·
    while IFS=: read -r username _ uid gid comment homedir shell; do
        if ! id "$username" >/dev/null 2>&1; then
            sudo useradd -u "$uid" -g "$gid" -c "$comment" -d "$homedir" -s "$shell" -m "$username"
            log "åˆ›å»ºç”¨æˆ·ï¼š$username (UID: $uid)"
        else
            log "ç”¨æˆ· $username å·²å­˜åœ¨ï¼Œè·³è¿‡"
        fi
    done < "$MIGRATION_DIR/users.passwd"
    
    log "âœ… ç”¨æˆ·å¯¼å…¥å®Œæˆ"
}

# 4. æ¢å¤ç”¨æˆ·å¯†ç 
restore_passwords() {
    log "ğŸ” å¼€å§‹æ¢å¤ç”¨æˆ·å¯†ç "
    
    # å¤‡ä»½å½“å‰shadowæ–‡ä»¶
    sudo cp /etc/shadow /etc/shadow.backup.$(date +%Y%m%d)
    
    # æ¢å¤å¯†ç hash
    while IFS=: read -r username password_hash; do
        if id "$username" >/dev/null 2>&1; then
            sudo usermod -p "$password_hash" "$username"
            log "æ¢å¤ç”¨æˆ· $username çš„å¯†ç "
        fi
    done < "$MIGRATION_DIR/users.shadow"
    
    log "âœ… å¯†ç æ¢å¤å®Œæˆ"
}

# 5. æ¢å¤ç”¨æˆ·å®¶ç›®å½•
restore_home_dirs() {
    log "ğŸ  å¼€å§‹æ¢å¤ç”¨æˆ·å®¶ç›®å½•"
    
    for home_archive in "$MIGRATION_DIR"/*_home.tar.gz; do
        if [ -f "$home_archive" ]; then
            local username=$(basename "$home_archive" _home.tar.gz)
            local user_home=$(getent passwd "$username" | cut -d: -f6)
            
            if [ -n "$user_home" ]; then
                sudo tar -xzf "$home_archive" -C "$(dirname "$user_home")"
                sudo chown -R "$username:$username" "$user_home"
                log "æ¢å¤ç”¨æˆ· $username çš„å®¶ç›®å½•"
            fi
        fi
    done
    
    log "âœ… å®¶ç›®å½•æ¢å¤å®Œæˆ"
}

# ä¸»è¿ç§»æµç¨‹
main_migration() {
    if [ -z "$SOURCE_HOST" ]; then
        echo "ç”¨æ³•: $0 <æºæœåŠ¡å™¨IPæˆ–ä¸»æœºå>"
        exit 1
    fi
    
    log "ğŸš€ å¼€å§‹ç”¨æˆ·è¿ç§»æµç¨‹"
    log "æºæœåŠ¡å™¨: $SOURCE_HOST"
    
    export_users "$SOURCE_HOST"
    package_home_dirs "$SOURCE_HOST"
    import_users
    restore_passwords
    restore_home_dirs
    
    log "ğŸ‰ ç”¨æˆ·è¿ç§»æµç¨‹å®Œæˆ"
    log "è¯·æ£€æŸ¥ $LOG_FILE äº†è§£è¯¦ç»†ä¿¡æ¯"
}

# æ‰§è¡Œè¿ç§»
main_migration
```

### 8.3 è‡ªåŠ¨åŒ–å®šæ—¶ä»»åŠ¡


**å®šæœŸç”¨æˆ·ç®¡ç†ä»»åŠ¡**ï¼š
```bash
#!/bin/bash
# è‡ªåŠ¨åŒ–ç”¨æˆ·ç®¡ç†å®šæ—¶ä»»åŠ¡

# 1. å¯†ç è¿‡æœŸæ£€æŸ¥
check_password_expiry() {
    local days_warning=7
    local expiry_file="/tmp/password_expiry_$(date +%Y%m%d).txt"
    
    > "$expiry_file"
    
    # æ£€æŸ¥å³å°†è¿‡æœŸçš„å¯†ç 
    while IFS=: read -r username _ _ _ _ expire _; do
        if [ -n "$expire" ] && [ "$expire" -ne -1 ]; then
            local days_until_expiry=$(( (expire - $(date +%s)/86400) ))
            
            if [ "$days_until_expiry" -le "$days_warning" ] && [ "$days_until_expiry" -gt 0 ]; then
                echo "$username çš„å¯†ç å°†åœ¨ $days_until_expiry å¤©åè¿‡æœŸ" >> "$expiry_file"
            fi
        fi
    done < /etc/shadow
    
    # å‘é€é€šçŸ¥
    if [ -s "$expiry_file" ]; then
        mail -s "å¯†ç è¿‡æœŸæé†’" admin@company.com < "$expiry_file"
    fi
}

# 2. æ¸…ç†ä¸´æ—¶è´¦æˆ·
cleanup_temp_accounts() {
    local temp_prefix="temp_"
    local max_age_days=30
    
    # æŸ¥æ‰¾ä¸´æ—¶è´¦æˆ·
    while IFS=: read -r username _ uid _ comment _ _; do
        if [[ "$username" =~ ^${temp_prefix} ]]; then
            # æ£€æŸ¥è´¦æˆ·åˆ›å»ºæ—¶é—´
            local user_home="/home/$username"
            if [ -d "$user_home" ]; then
                local create_time=$(stat -c %Y "$user_home")
                local current_time=$(date +%s)
                local age_days=$(( (current_time - create_time) / 86400 ))
                
                if [ "$age_days" -gt "$max_age_days" ]; then
                    echo "åˆ é™¤è¿‡æœŸä¸´æ—¶è´¦æˆ·ï¼š$username (åˆ›å»ºäº $age_days å¤©å‰)"
                    sudo userdel -r "$username"
                fi
            fi
        fi
    done < /etc/passwd
}

# 3. ç”Ÿæˆç”¨æˆ·ä½¿ç”¨æŠ¥å‘Š
generate_user_report() {
    local report_file="/var/log/user_activity_$(date +%Y%m).txt"
    
    {
        echo "===== ç”¨æˆ·æ´»åŠ¨æŠ¥å‘Š ====="
        echo "ç”Ÿæˆæ—¶é—´: $(date)"
        echo ""
        
        echo "ğŸ“Š ç”¨æˆ·ç™»å½•ç»Ÿè®¡:"
        last | head -20
        echo ""
        
        echo "ğŸ‘¥ å½“å‰æ´»è·ƒç”¨æˆ·:"
        who
        echo ""
        
        echo "ğŸ’¾ ç£ç›˜ä½¿ç”¨æƒ…å†µ:"
        du -sh /home/* 2>/dev/null | sort -hr
        
    } > "$report_file"
    
    echo "âœ… ç”¨æˆ·æŠ¥å‘Šå·²ç”Ÿæˆï¼š$report_file"
}

# è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆæ·»åŠ åˆ°crontabï¼‰
setup_cron_jobs() {
    cat << 'EOF' | sudo crontab -
# ç”¨æˆ·ç®¡ç†è‡ªåŠ¨åŒ–ä»»åŠ¡

# æ¯å¤©æ£€æŸ¥å¯†ç è¿‡æœŸæƒ…å†µ
0 9 * * * /path/to/check_password_expiry.sh

# æ¯å‘¨æ¸…ç†ä¸´æ—¶è´¦æˆ·
0 2 * * 1 /path/to/cleanup_temp_accounts.sh

# æ¯æœˆç”Ÿæˆç”¨æˆ·æ´»åŠ¨æŠ¥å‘Š
0 3 1 * * /path/to/generate_user_report.sh

# æ¯å¤©å¤‡ä»½ç”¨æˆ·æ•°æ®
0 1 * * * /path/to/backup_user_data.sh
EOF

    echo "âœ… å®šæ—¶ä»»åŠ¡è®¾ç½®å®Œæˆ"
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬å‘½ä»¤


```
æ ¸å¿ƒå‘½ä»¤é€ŸæŸ¥ï¼š
ğŸ”¸ newusersï¼šæ‰¹é‡åˆ›å»ºç”¨æˆ·ï¼Œæ ¼å¼ç±»ä¼¼/etc/passwd
ğŸ”¸ chpasswdï¼šæ‰¹é‡ä¿®æ”¹å¯†ç ï¼Œæ ¼å¼ä¸º"ç”¨æˆ·å:å¯†ç "
ğŸ”¸ useradd -mï¼šå•ä¸ªåˆ›å»ºç”¨æˆ·ï¼ˆ-måˆ›å»ºå®¶ç›®å½•ï¼‰
ğŸ”¸ usermodï¼šä¿®æ”¹ç°æœ‰ç”¨æˆ·å±æ€§
ğŸ”¸ userdel -rï¼šåˆ é™¤ç”¨æˆ·ï¼ˆ-råˆ é™¤å®¶ç›®å½•ï¼‰
```

### 9.2 å…³é”®æ“ä½œæµç¨‹


**æ ‡å‡†æ‰¹é‡åˆ›å»ºæµç¨‹**ï¼š
```
â‘  å‡†å¤‡ç”¨æˆ·æ•°æ®æ–‡ä»¶ â†’ â‘¡ æ ¼å¼éªŒè¯ â†’ â‘¢ æ‰§è¡Œnewusers â†’ â‘£ è®¾ç½®å¯†ç  â†’ â‘¤ éªŒè¯ç»“æœ
```

**å®‰å…¨æ“ä½œåŸåˆ™**ï¼š
- ğŸ”’ **å¯†ç æ–‡ä»¶**ï¼šä½¿ç”¨åç«‹å³å®‰å…¨åˆ é™¤ï¼ˆshredå‘½ä»¤ï¼‰
- ğŸ‘‘ **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿ä»¥rootæƒé™æ‰§è¡Œ
- ğŸ“ **æ“ä½œæ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰æ‰¹é‡æ“ä½œ
- ğŸ’¾ **æ•°æ®å¤‡ä»½**ï¼šæ“ä½œå‰å¤‡ä»½é‡è¦æ–‡ä»¶
- âœ… **ç»“æœéªŒè¯**ï¼šæ“ä½œåæ£€æŸ¥åˆ›å»ºç»“æœ

### 9.3 å®ç”¨è„šæœ¬æ¨¡æ¿


**å¿«é€Ÿæ‰¹é‡åˆ›å»ºæ¨¡æ¿**ï¼š
```bash
# æœ€ç®€å•çš„æ‰¹é‡ç”¨æˆ·åˆ›å»º
users=("alice" "bob" "charlie")
for user in "${users[@]}"; do
    sudo useradd -m "$user"
    echo "$user:TempPass123" | sudo chpasswd
    echo "âœ… åˆ›å»ºç”¨æˆ·ï¼š$user"
done
```

**CSVå¤„ç†æ¨¡æ¿**ï¼š
```bash
# ä»CSVæ–‡ä»¶æ‰¹é‡å¯¼å…¥ç”¨æˆ·
while IFS=',' read -r username password fullname; do
    [ "$username" = "ç”¨æˆ·å" ] && continue  # è·³è¿‡æ ‡é¢˜è¡Œ
    sudo useradd -m -c "$fullname" "$username"
    echo "$username:$password" | sudo chpasswd
done < users.csv
```

### 9.4 æ•…éšœæ’æŸ¥æŒ‡å—


**å¸¸è§é—®é¢˜è§£å†³**ï¼š

| é—®é¢˜ç°è±¡ | **å¯èƒ½åŸå› ** | **è§£å†³æ–¹æ³•** |
|---------|------------|-------------|
| ç”¨æˆ·åˆ›å»ºå¤±è´¥ | `ç”¨æˆ·åå·²å­˜åœ¨` | `æ£€æŸ¥ç°æœ‰ç”¨æˆ·ï¼šid username` |
| å¯†ç è®¾ç½®å¤±è´¥ | `æƒé™ä¸è¶³` | `ä½¿ç”¨sudoæ‰§è¡Œchpasswd` |
| å®¶ç›®å½•æ— æƒé™ | `æ‰€æœ‰æƒé”™è¯¯` | `chown -R user:user /home/user` |
| æ— æ³•ç™»å½• | `Shellè·¯å¾„é”™è¯¯` | `æ£€æŸ¥/etc/passwdä¸­çš„shellè·¯å¾„` |

**è°ƒè¯•æŠ€å·§**ï¼š
```bash
# æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åˆ›å»ºæˆåŠŸ
id username

# æŸ¥çœ‹ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
getent passwd username

# æ£€æŸ¥å¯†ç æ˜¯å¦è®¾ç½®
sudo passwd -S username

# éªŒè¯ç”¨æˆ·å¯ä»¥ç™»å½•
su - username
```

### 9.5 æœ€ä½³å®è·µå»ºè®®


**å®‰å…¨å®è·µ**ï¼š
- ğŸ” **åˆå§‹å¯†ç **ï¼šè®¾ç½®ä¸´æ—¶å¯†ç ï¼Œè¦æ±‚é¦–æ¬¡ç™»å½•åæ›´æ”¹
- ğŸ“Š **æƒé™æœ€å°åŒ–**ï¼šåªç»™ç”¨æˆ·å¿…éœ€çš„æƒé™
- ğŸ—‚ï¸ **ç»„ç®¡ç†**ï¼šåˆç†ä½¿ç”¨ç”¨æˆ·ç»„ç®¡ç†æƒé™
- ğŸ“ **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰ç”¨æˆ·ç®¡ç†æ“ä½œ

**æ•ˆç‡æå‡**ï¼š
- ğŸ“‹ **æ¨¡æ¿åŒ–**ï¼šä¸ºä¸åŒè§’è‰²å‡†å¤‡ç”¨æˆ·æ¨¡æ¿
- ğŸ¤– **è‡ªåŠ¨åŒ–**ï¼šç¼–å†™å¯é‡ç”¨çš„ç®¡ç†è„šæœ¬
- ğŸ“Š **æ‰¹é‡éªŒè¯**ï¼šæ“ä½œåæ‰¹é‡æ£€æŸ¥ç»“æœ
- ğŸ”„ **æµç¨‹æ ‡å‡†åŒ–**ï¼šå»ºç«‹æ ‡å‡†æ“ä½œæµç¨‹

**ç»´æŠ¤ç®¡ç†**ï¼š
- ğŸ—‘ï¸ **å®šæœŸæ¸…ç†**ï¼šæ¸…ç†ä¸æ´»è·ƒçš„ç”¨æˆ·è´¦æˆ·
- ğŸ”„ **å¯†ç ç­–ç•¥**ï¼šå®šæœŸæ›´æ–°å¯†ç 
- ğŸ“Š **ä½¿ç”¨ç›‘æ§**ï¼šç›‘æ§ç”¨æˆ·æ´»åŠ¨å’Œèµ„æºä½¿ç”¨
- ğŸ’¾ **å¤‡ä»½ç­–ç•¥**ï¼šå®šæœŸå¤‡ä»½ç”¨æˆ·æ•°æ®

> ğŸ’¡ **è®°å¿†å£è¯€**ï¼š  
> **newåˆ›å»ºï¼Œchä¿®æ”¹ï¼ŒCSVå¯¼å…¥æ›´ä¾¿åˆ©**  
> **å®‰å…¨ç¬¬ä¸€è®°å¿ƒé‡Œï¼Œæ—¥å¿—å¤‡ä»½ä¸èƒ½å°‘**  
> **æ‰¹é‡æ“ä½œæ•ˆç‡é«˜ï¼ŒéªŒè¯ç»“æœæœ€é‡è¦**

**æ ¸å¿ƒç†è§£**ï¼š
- æ‰¹é‡ç”¨æˆ·ç®¡ç†æ˜¯æå‡è¿ç»´æ•ˆç‡çš„é‡è¦æŠ€èƒ½
- å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§éœ€è¦å¹³è¡¡ï¼Œå®‰å…¨æ°¸è¿œæ˜¯ç¬¬ä¸€ä½
- è„šæœ¬åŒ–å’Œè‡ªåŠ¨åŒ–æ˜¯å¤§è§„æ¨¡ç”¨æˆ·ç®¡ç†çš„å¿…ç„¶è¶‹åŠ¿
- å®Œå–„çš„æ—¥å¿—å’Œå¤‡ä»½æœºåˆ¶æ˜¯é£é™©æ§åˆ¶çš„åŸºç¡€