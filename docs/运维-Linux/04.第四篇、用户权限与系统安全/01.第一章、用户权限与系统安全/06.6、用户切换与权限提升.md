---
title: 6ã€ç”¨æˆ·åˆ‡æ¢ä¸æƒé™æå‡
---
## ğŸ“š ç›®å½•

1. [ç”¨æˆ·åˆ‡æ¢åŸºç¡€æ¦‚å¿µ](#1-ç”¨æˆ·åˆ‡æ¢åŸºç¡€æ¦‚å¿µ)
2. [suå‘½ä»¤è¯¦è§£](#2-suå‘½ä»¤è¯¦è§£)
3. [sudoæƒé™å§”æ´¾æœºåˆ¶](#3-sudoæƒé™å§”æ´¾æœºåˆ¶)
4. [suä¸sudoå¯¹æ¯”åˆ†æ](#4-suä¸sudoå¯¹æ¯”åˆ†æ)
5. [ç¯å¢ƒå˜é‡ç»§æ‰¿æœºåˆ¶](#5-ç¯å¢ƒå˜é‡ç»§æ‰¿æœºåˆ¶)
6. [sudoé…ç½®æ–‡ä»¶è¯¦è§£](#6-sudoé…ç½®æ–‡ä»¶è¯¦è§£)
7. [sudoæ—¥å¿—å®¡è®¡](#7-sudoæ—¥å¿—å®¡è®¡)
8. [æƒé™æå‡å®‰å…¨ç­–ç•¥](#8-æƒé™æå‡å®‰å…¨ç­–ç•¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” ç”¨æˆ·åˆ‡æ¢åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç”¨æˆ·åˆ‡æ¢

**ç®€å•ç†è§£**ï¼šç”¨æˆ·åˆ‡æ¢å°±æ˜¯åœ¨ä¸é‡æ–°ç™»å½•ç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œ**ä¸´æ—¶å˜æˆå¦ä¸€ä¸ªç”¨æˆ·çš„èº«ä»½**æ¥æ‰§è¡Œæ“ä½œã€‚

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
ä½ æ˜¯å…¬å¸çš„æ™®é€šå‘˜å·¥ï¼Œä½†éœ€è¦ç”¨ç»ç†çš„æƒé™å®¡æ‰¹æ–‡ä»¶
â†’ ä½ å¯ä»¥"å€Ÿç”¨"ç»ç†çš„èº«ä»½æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡
â†’ å®Œæˆåå†æ¢å¤ä½ åŸæ¥çš„èº«ä»½

Linuxä¸­çš„ç”¨æˆ·åˆ‡æ¢ï¼š
æ™®é€šç”¨æˆ· â†’ ä¸´æ—¶åˆ‡æ¢åˆ°root â†’ æ‰§è¡Œç®¡ç†æ“ä½œ â†’ åˆ‡æ¢å›æ™®é€šç”¨æˆ·
```

**ä¸ºä»€ä¹ˆéœ€è¦ç”¨æˆ·åˆ‡æ¢ï¼Ÿ**
```
ğŸ”¸ å®‰å…¨æ€§è€ƒè™‘ï¼š
  â€¢ å¹³æ—¶ç”¨æ™®é€šç”¨æˆ·æ“ä½œï¼Œå‡å°‘è¯¯æ“ä½œé£é™©
  â€¢ åªåœ¨éœ€è¦æ—¶æ‰è·å–é«˜çº§æƒé™
  â€¢ é¿å…é•¿æœŸä½¿ç”¨rootç”¨æˆ·çš„å®‰å…¨éšæ‚£

ğŸ”¸ æƒé™éš”ç¦»ï¼š
  â€¢ ä¸åŒç”¨æˆ·æœ‰ä¸åŒçš„æ–‡ä»¶è®¿é—®æƒé™
  â€¢ ç³»ç»Ÿç®¡ç†æ“ä½œéœ€è¦ç‰¹æ®Šæƒé™
  â€¢ å¤šç”¨æˆ·ç¯å¢ƒä¸‹çš„æƒé™ç®¡ç†

ğŸ”¸ è´£ä»»è¿½æº¯ï¼š
  â€¢ è®°å½•è°åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œäº†ä»€ä¹ˆæ“ä½œ
  â€¢ ä¾¿äºç³»ç»Ÿå®¡è®¡å’Œå®‰å…¨ç®¡æ§
```

### 1.2 ç”¨æˆ·èº«ä»½çš„æœ¬è´¨

**ç”¨æˆ·èº«ä»½ç”±ä»€ä¹ˆå†³å®šï¼Ÿ**
```bash
# æŸ¥çœ‹å½“å‰ç”¨æˆ·èº«ä»½ä¿¡æ¯
id
# è¾“å‡ºï¼šuid=1000(zhang) gid=1000(zhang) groups=1000(zhang),27(sudo)

è§£é‡Šï¼š
uid=1000  â†’ ç”¨æˆ·IDæ˜¯1000ï¼Œç”¨æˆ·åæ˜¯zhang
gid=1000  â†’ ä¸»ç»„IDæ˜¯1000ï¼Œç»„åæ˜¯zhang  
groups=   â†’ æ‰€å±çš„æ‰€æœ‰ç»„åˆ—è¡¨
```

**Linuxå¦‚ä½•è¯†åˆ«ç”¨æˆ·ï¼Ÿ**
```
ç³»ç»Ÿå†…éƒ¨ï¼šé€šè¿‡æ•°å­—IDï¼ˆUIDï¼‰è¯†åˆ«ç”¨æˆ·
  â€¢ rootç”¨æˆ·çš„UIDæ°¸è¿œæ˜¯0
  â€¢ æ™®é€šç”¨æˆ·çš„UIDé€šå¸¸ä»1000å¼€å§‹
  â€¢ ç³»ç»Ÿç”¨æˆ·çš„UIDåœ¨1-999ä¹‹é—´

äººç±»å¯è¯»ï¼šé€šè¿‡ç”¨æˆ·åè¯†åˆ«
  â€¢ ç”¨æˆ·ååªæ˜¯UIDçš„"åˆ«å"
  â€¢ /etc/passwdæ–‡ä»¶å­˜å‚¨ç”¨æˆ·åå’ŒUIDçš„å¯¹åº”å…³ç³»
```

---

## 2. ğŸ‘¤ suå‘½ä»¤è¯¦è§£


### 2.1 suå‘½ä»¤åŸºæœ¬ç”¨æ³•

**suçš„å«ä¹‰**ï¼š`substitute user` æˆ– `switch user`ï¼Œæ„æ€æ˜¯**æ›¿ä»£ç”¨æˆ·**æˆ–**åˆ‡æ¢ç”¨æˆ·**ã€‚

```bash
# åŸºæœ¬è¯­æ³•
su [é€‰é¡¹] [ç”¨æˆ·å]

# æœ€å¸¸ç”¨çš„å‡ ç§æ–¹å¼
su              # åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼ˆéœ€è¦rootå¯†ç ï¼‰
su root         # åŒä¸Šï¼Œæ˜¾å¼æŒ‡å®šåˆ‡æ¢åˆ°root
su - root       # åˆ‡æ¢åˆ°rootå¹¶åŠ è½½å®Œæ•´ç¯å¢ƒ
su - zhang      # åˆ‡æ¢åˆ°zhangç”¨æˆ·ï¼ˆéœ€è¦zhangçš„å¯†ç ï¼‰
```

**å®é™…æ“ä½œæ¼”ç¤º**ï¼š
```bash
# å½“å‰æ˜¯æ™®é€šç”¨æˆ·zhang
zhang@ubuntu:~$ whoami
zhang

zhang@ubuntu:~$ pwd
/home/zhang

# åˆ‡æ¢åˆ°rootç”¨æˆ·
zhang@ubuntu:~$ su
Password: [è¾“å…¥rootå¯†ç ]
root@ubuntu:/home/zhang# whoami
root

# æ³¨æ„ï¼šç›®å½•è¿˜æ˜¯åœ¨/home/zhang
root@ubuntu:/home/zhang# pwd
/home/zhang
```

### 2.2 suå‘½ä»¤çš„ä¸åŒæ¨¡å¼


#### ğŸ”¸ éç™»å½•æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

```bash
su root
```
**ç‰¹ç‚¹**ï¼š
- åªæ”¹å˜ç”¨æˆ·èº«ä»½ï¼Œä¸æ”¹å˜ç¯å¢ƒ
- å½“å‰ç›®å½•ä¿æŒä¸å˜
- ç¯å¢ƒå˜é‡åŸºæœ¬ä¿æŒåŸæ ·
- å°±åƒ"å€Ÿç”¨"äº†rootçš„èº«ä»½ï¼Œä½†è¿˜åœ¨åŸæ¥çš„"å·¥ä½œç¯å¢ƒ"

#### ğŸ”¸ ç™»å½•æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
su - root
# æˆ–è€…
su -l root  
# æˆ–è€…
su --login root
```
**ç‰¹ç‚¹**ï¼š
- å®Œå…¨æ¨¡æ‹Ÿé‡æ–°ç™»å½•çš„æ•ˆæœ
- åˆ‡æ¢åˆ°ç›®æ ‡ç”¨æˆ·çš„å®¶ç›®å½•
- é‡æ–°åŠ è½½ç›®æ ‡ç”¨æˆ·çš„ç¯å¢ƒå˜é‡
- å°±åƒçœŸæ­£"æˆä¸º"äº†é‚£ä¸ªç”¨æˆ·

**å¯¹æ¯”æ¼”ç¤º**ï¼š
```bash
# æ™®é€šç”¨æˆ·ç¯å¢ƒ
zhang@ubuntu:~$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/home/zhang/.local/bin

zhang@ubuntu:~$ echo $HOME
/home/zhang

# éç™»å½•æ¨¡å¼åˆ‡æ¢
zhang@ubuntu:~$ su root
root@ubuntu:/home/zhang# echo $PATH
/usr/local/bin:/usr/bin:/bin:/home/zhang/.local/bin  # è¿˜æ˜¯åŸæ¥çš„PATH
root@ubuntu:/home/zhang# echo $HOME
/root  # HOMEå˜äº†ï¼Œä½†PATHæ²¡å˜

# ç™»å½•æ¨¡å¼åˆ‡æ¢
zhang@ubuntu:~$ su - root
root@ubuntu:~# echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin  # å®Œæ•´çš„root PATH
root@ubuntu:~# echo $HOME
/root
root@ubuntu:~# pwd
/root  # ç›®å½•ä¹Ÿåˆ‡æ¢äº†
```

### 2.3 suå‘½ä»¤å¸¸ç”¨é€‰é¡¹

```bash
# ä¿æŒå½“å‰ç›®å½•ä¸å˜
su -m root      # æˆ– su --preserve-environment root

# æ‰§è¡Œå•æ¡å‘½ä»¤åç«‹å³é€€å‡º
su -c "command" root

# æŒ‡å®šshellç±»å‹
su -s /bin/bash root
```

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# ä»¥rootèº«ä»½æ‰§è¡Œå•æ¡å‘½ä»¤ï¼Œæ‰§è¡Œå®Œè‡ªåŠ¨é€€å‡º
zhang@ubuntu:~$ su -c "apt update" root
Password:
[æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨...]
zhang@ubuntu:~$ whoami
zhang  # è‡ªåŠ¨å›åˆ°åŸç”¨æˆ·

# è¿™æ¯”ä¸‹é¢çš„æ“ä½œæ›´å®‰å…¨ï¼š
zhang@ubuntu:~$ su root
Password:
root@ubuntu:/home/zhang# apt update
root@ubuntu:/home/zhang# exit  # è®°å¾—è¦é€€å‡º
zhang@ubuntu:~$
```

---

## 3. âš¡ sudoæƒé™å§”æ´¾æœºåˆ¶


### 3.1 sudoçš„åŸºæœ¬æ¦‚å¿µ

**sudoçš„å«ä¹‰**ï¼š`substitute user do` æˆ– `super user do`ï¼Œæ„æ€æ˜¯**ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤**ã€‚

**sudoä¸suçš„æ ¹æœ¬åŒºåˆ«**ï¼š
```
suçš„æ€è·¯ï¼š
"æˆ‘è¦å˜æˆrootç”¨æˆ·" â†’ éœ€è¦çŸ¥é“rootå¯†ç  â†’ å®Œå…¨å˜æˆroot

sudoçš„æ€è·¯ï¼š  
"æˆ‘è¦ä»¥rootæƒé™æ‰§è¡Œè¿™ä¸ªå‘½ä»¤" â†’ ç”¨è‡ªå·±çš„å¯†ç  â†’ åªæ˜¯ä¸´æ—¶è·å¾—æƒé™
```

**ç”Ÿæ´»ç±»æ¯”**ï¼š
```
suå°±åƒï¼šå€Ÿç”¨åˆ«äººçš„èº«ä»½è¯å»åŠäº‹ï¼ˆéœ€è¦çŸ¥é“èº«ä»½è¯å¯†ç ï¼‰
sudoå°±åƒï¼šæ‹¿ç€æˆæƒä¹¦ä»¥è‡ªå·±çš„åä¹‰åŠäº‹ï¼ˆç”¨è‡ªå·±çš„ç­¾åå³å¯ï¼‰
```

### 3.2 sudoåŸºæœ¬ç”¨æ³•

```bash
# åŸºæœ¬è¯­æ³•
sudo [é€‰é¡¹] å‘½ä»¤

# æœ€å¸¸è§çš„ç”¨æ³•
sudo apt update                    # ä»¥rootæƒé™æ›´æ–°è½¯ä»¶åŒ…
sudo systemctl restart nginx      # ä»¥rootæƒé™é‡å¯æœåŠ¡
sudo su -                         # é€šè¿‡sudoåˆ‡æ¢åˆ°rootï¼ˆæ¨èæ–¹å¼ï¼‰
```

**é¦–æ¬¡ä½¿ç”¨sudoçš„ä½“éªŒ**ï¼š
```bash
zhang@ubuntu:~$ sudo apt update
[sudo] password for zhang: [è¾“å…¥zhangè‡ªå·±çš„å¯†ç ]
```
> ğŸ’¡ **é‡è¦**ï¼šæ³¨æ„è¿™é‡Œè¾“å…¥çš„æ˜¯**zhangè‡ªå·±çš„å¯†ç **ï¼Œä¸æ˜¯rootå¯†ç ï¼

### 3.3 sudoçš„æƒé™æ§åˆ¶

**è°å¯ä»¥ä½¿ç”¨sudoï¼Ÿ**
```bash
# æŸ¥çœ‹å½“å‰ç”¨æˆ·æ˜¯å¦åœ¨sudoç»„ä¸­
groups
# è¾“å‡ºï¼šzhang adm cdrom sudo dip plugdev users lpadmin

# æˆ–è€…æ›´è¯¦ç»†åœ°æŸ¥çœ‹
id
# è¾“å‡ºï¼šuid=1000(zhang) gid=1000(zhang) groups=...,27(sudo),...
```

å¦‚æœç”¨æˆ·ä¸åœ¨sudoç»„ä¸­ï¼š
```bash
zhang@ubuntu:~$ sudo apt update
zhang is not in the sudoers file. This incident will be reported.
```

**å¦‚ä½•å°†ç”¨æˆ·æ·»åŠ åˆ°sudoç»„ï¼Ÿ**
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨usermodå‘½ä»¤ï¼ˆéœ€è¦rootæƒé™ï¼‰
sudo usermod -aG sudo username

# æ–¹æ³•2ï¼šç›´æ¥ç¼–è¾‘sudoé…ç½®æ–‡ä»¶ï¼ˆé«˜çº§æ–¹æ³•ï¼‰
sudo visudo
```

### 3.4 sudoçš„å¸¸ç”¨é€‰é¡¹

```bash
# ä»¥æŒ‡å®šç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤
sudo -u zhang ls /home/zhang

# åˆ—å‡ºå½“å‰ç”¨æˆ·çš„sudoæƒé™
sudo -l

# ç¼–è¾‘å…¶ä»–ç”¨æˆ·çš„é…ç½®æ–‡ä»¶
sudo -u zhang -e ~/.bashrc

# ä¸æç¤ºå¯†ç ï¼ˆåœ¨æœ‰æ•ˆæœŸå†…ï¼‰
sudo -n command  # å¦‚æœéœ€è¦å¯†ç ä¼šå¤±è´¥

# é‡ç½®sudoæ—¶é—´æˆ³ï¼ˆå¼ºåˆ¶é‡æ–°è¾“å…¥å¯†ç ï¼‰
sudo -k
```

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹è‡ªå·±æœ‰ä»€ä¹ˆsudoæƒé™
zhang@ubuntu:~$ sudo -l
Matching Defaults entries for zhang on ubuntu:
    env_reset, mail_badpass, secure_path=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

User zhang may run the following commands on ubuntu:
    (ALL : ALL) ALL  # è¡¨ç¤ºå¯ä»¥ä»¥ä»»ä½•ç”¨æˆ·èº«ä»½æ‰§è¡Œä»»ä½•å‘½ä»¤
```

---

## 4. ğŸ”„ suä¸sudoå¯¹æ¯”åˆ†æ


### 4.1 è¯¦ç»†å¯¹æ¯”è¡¨æ ¼

| å¯¹æ¯”é¡¹ç›® | **suå‘½ä»¤** | **sudoå‘½ä»¤** |
|---------|------------|--------------|
| **å¯†ç è¦æ±‚** | éœ€è¦**ç›®æ ‡ç”¨æˆ·**çš„å¯†ç  | éœ€è¦**å½“å‰ç”¨æˆ·**çš„å¯†ç  |
| **æƒé™èŒƒå›´** | è·å¾—ç›®æ ‡ç”¨æˆ·çš„**å®Œæ•´æƒé™** | åªèƒ½æ‰§è¡Œ**è¢«æˆæƒçš„å‘½ä»¤** |
| **ä½¿ç”¨æ—¶é•¿** | åˆ‡æ¢åå¯ä»¥**ä¸€ç›´ä½¿ç”¨** | æ¯æ¬¡æ‰§è¡Œå‘½ä»¤éƒ½éœ€è¦**é‡æ–°æˆæƒ** |
| **å®‰å…¨æ€§** | éœ€è¦çŸ¥é“rootå¯†ç ï¼Œ**é£é™©è¾ƒé«˜** | ä¸éœ€è¦rootå¯†ç ï¼Œ**ç›¸å¯¹å®‰å…¨** |
| **å¯æ§æ€§** | æ— æ³•é™åˆ¶å…·ä½“æ“ä½œ | å¯ä»¥**ç²¾ç¡®æ§åˆ¶**å…è®¸çš„æ“ä½œ |
| **å®¡è®¡æ€§** | éš¾ä»¥è¿½è¸ªå…·ä½“æ“ä½œ | **è¯¦ç»†è®°å½•**æ¯æ¬¡æ“ä½œ |

### 4.2 ä½¿ç”¨åœºæ™¯å¯¹æ¯”

**sué€‚åˆçš„åœºæ™¯**ï¼š
```bash
# éœ€è¦è¿ç»­æ‰§è¡Œå¤šä¸ªç®¡ç†å‘½ä»¤
su -
apt update
apt upgrade  
systemctl restart nginx
systemctl status nginx
exit
```

**sudoé€‚åˆçš„åœºæ™¯**ï¼š
```bash
# å¶å°”éœ€è¦ç®¡ç†å‘˜æƒé™çš„å•ä¸ªæ“ä½œ
sudo apt update
sudo systemctl restart nginx
sudo tail -f /var/log/nginx/error.log
```

### 4.3 å®‰å…¨æ€§åˆ†æ

**suçš„å®‰å…¨é£é™©**ï¼š
```
ğŸ”¸ éœ€è¦å…±äº«rootå¯†ç 
  â€¢ å¤šäººä½¿ç”¨æ—¶å¯†ç å®¹æ˜“æ³„éœ²
  â€¢ éš¾ä»¥æ’¤é”€å•ä¸ªç”¨æˆ·çš„æƒé™

ğŸ”¸ æƒé™è¿‡å¤§
  â€¢ è·å¾—rootåå¯ä»¥åšä»»ä½•äº‹æƒ…
  â€¢ å®¹æ˜“è¯¯æ“ä½œé€ æˆç³»ç»ŸæŸå

ğŸ”¸ éš¾ä»¥å®¡è®¡
  â€¢ æ— æ³•çŸ¥é“å…·ä½“æ‰§è¡Œäº†ä»€ä¹ˆå‘½ä»¤
  â€¢ å®‰å…¨äº‹ä»¶éš¾ä»¥è¿½æº¯
```

**sudoçš„å®‰å…¨ä¼˜åŠ¿**ï¼š
```
ğŸ”¸ æ— éœ€rootå¯†ç 
  â€¢ æ¯ä¸ªç”¨æˆ·ç”¨è‡ªå·±çš„å¯†ç 
  â€¢ å¯ä»¥éšæ—¶æ’¤é”€æƒé™

ğŸ”¸ ç²¾ç¡®æ§åˆ¶
  â€¢ å¯ä»¥é™åˆ¶ç”¨æˆ·åªèƒ½æ‰§è¡Œç‰¹å®šå‘½ä»¤
  â€¢ æ”¯æŒç»†ç²’åº¦çš„æƒé™é…ç½®

ğŸ”¸ å®Œæ•´å®¡è®¡
  â€¢ è®°å½•æ¯æ¬¡sudoæ“ä½œçš„è¯¦ç»†ä¿¡æ¯
  â€¢ ä¾¿äºå®‰å…¨åˆ†æå’Œé—®é¢˜æ’æŸ¥
```

---

## 5. ğŸŒ ç¯å¢ƒå˜é‡ç»§æ‰¿æœºåˆ¶


### 5.1 ä»€ä¹ˆæ˜¯ç¯å¢ƒå˜é‡

**ç®€å•ç†è§£**ï¼šç¯å¢ƒå˜é‡å°±æ˜¯ç³»ç»Ÿä¸ºæ¯ä¸ªç”¨æˆ·è®¾ç½®çš„**ä¸ªäººé…ç½®ä¿¡æ¯**ï¼Œå‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªç”¨æˆ·çš„åå¥½å’Œå·¥ä½œç¯å¢ƒã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
ç¯å¢ƒå˜é‡å°±åƒä½ çš„ä¸ªäººå·¥ä½œå°è®¾ç½®ï¼š
- å¸¸ç”¨å·¥å…·æ”¾åœ¨å“ªé‡Œï¼ˆPATHå˜é‡ï¼‰
- ä¸ªäººæ–‡ä»¶å¤¹åœ¨å“ªé‡Œï¼ˆHOMEå˜é‡ï¼‰  
- å–œæ¬¢ç”¨ä»€ä¹ˆç¼–è¾‘å™¨ï¼ˆEDITORå˜é‡ï¼‰
```

**æŸ¥çœ‹ç¯å¢ƒå˜é‡**ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡
env

# æŸ¥çœ‹ç‰¹å®šç¯å¢ƒå˜é‡
echo $PATH
echo $HOME
echo $USER
```

### 5.2 ä¸åŒåˆ‡æ¢æ–¹å¼çš„ç¯å¢ƒå˜é‡ç»§æ‰¿


#### ğŸ”¸ suï¼ˆéç™»å½•æ¨¡å¼ï¼‰

```bash
# æ™®é€šç”¨æˆ·ç¯å¢ƒ
zhang@ubuntu:~$ echo "USER=$USER, HOME=$HOME"
USER=zhang, HOME=/home/zhang
zhang@ubuntu:~$ echo "PATH=$PATH"
PATH=/usr/local/bin:/usr/bin:/bin:/home/zhang/.local/bin

# suåˆ‡æ¢å
zhang@ubuntu:~$ su root
root@ubuntu:/home/zhang# echo "USER=$USER, HOME=$HOME"  
USER=root, HOME=/root         # ç”¨æˆ·èº«ä»½å˜äº†
root@ubuntu:/home/zhang# echo "PATH=$PATH"
PATH=/usr/local/bin:/usr/bin:/bin:/home/zhang/.local/bin  # è·¯å¾„æ²¡å˜
```
**ç‰¹ç‚¹**ï¼šéƒ¨åˆ†ç¯å¢ƒå˜é‡æ”¹å˜ï¼Œéƒ¨åˆ†ä¿æŒåŸæ ·ï¼Œå®¹æ˜“é€ æˆæ··ä¹±ã€‚

#### ğŸ”¸ su -ï¼ˆç™»å½•æ¨¡å¼ï¼‰

```bash
zhang@ubuntu:~$ su - root
root@ubuntu:~# echo "USER=$USER, HOME=$HOME"
USER=root, HOME=/root
root@ubuntu:~# echo "PATH=$PATH" 
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
```
**ç‰¹ç‚¹**ï¼šå®Œå…¨ä½¿ç”¨ç›®æ ‡ç”¨æˆ·çš„ç¯å¢ƒï¼Œæœ€å¹²å‡€ä¹Ÿæœ€å®‰å…¨ã€‚

#### ğŸ”¸ sudo

```bash
zhang@ubuntu:~$ sudo -i env | grep -E "USER|HOME|PATH"
USER=root
HOME=/root  
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

zhang@ubuntu:~$ sudo env | grep -E "USER|HOME|PATH"  
USER=root
HOME=/home/zhang  # æ³¨æ„ï¼šHOMEæ²¡å˜
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
```

### 5.3 ç¯å¢ƒå˜é‡çš„å®é™…å½±å“

**PATHå˜é‡çš„é‡è¦æ€§**ï¼š
```bash
# å¦‚æœPATHä¸æ­£ç¡®ï¼Œå¯èƒ½æ‰¾ä¸åˆ°å‘½ä»¤
zhang@ubuntu:~$ su root  # éç™»å½•æ¨¡å¼
root@ubuntu:/home/zhang# which systemctl
/usr/bin/systemctl  # å¯èƒ½æ‰¾ä¸åˆ°ï¼Œå› ä¸º/usr/sbinä¸åœ¨PATHä¸­

root@ubuntu:/home/zhang# exit
zhang@ubuntu:~$ su - root  # ç™»å½•æ¨¡å¼  
root@ubuntu:~# which systemctl
/bin/systemctl  # æ­£ç¡®æ‰¾åˆ°
```

**HOMEå˜é‡çš„å½±å“**ï¼š
```bash
# ä¸åŒçš„HOMEä¼šå½±å“é…ç½®æ–‡ä»¶çš„è¯»å–ä½ç½®
zhang@ubuntu:~$ sudo bash -c 'echo $HOME'
/home/zhang  # sudoé»˜è®¤ä¿æŒåŸHOME

zhang@ubuntu:~$ sudo -i bash -c 'echo $HOME'  
/root        # sudo -i ä½¿ç”¨rootçš„HOME
```

---

## 6. ğŸ“ sudoé…ç½®æ–‡ä»¶è¯¦è§£


### 6.1 sudoersæ–‡ä»¶ç®€ä»‹

**sudoersæ–‡ä»¶**ï¼šsudoçš„é…ç½®æ–‡ä»¶ï¼Œä½äº `/etc/sudoers`ï¼Œå®šä¹‰äº†**è°å¯ä»¥ä»¥ä»€ä¹ˆèº«ä»½æ‰§è¡Œå“ªäº›å‘½ä»¤**ã€‚

> âš ï¸ **é‡è¦**ï¼šç»å¯¹ä¸è¦ç›´æ¥ç¼–è¾‘ `/etc/sudoers` æ–‡ä»¶ï¼å¿…é¡»ä½¿ç”¨ `visudo` å‘½ä»¤ï¼

**ä¸ºä»€ä¹ˆè¦ç”¨visudoï¼Ÿ**
```
å®‰å…¨æ£€æŸ¥ï¼š
- visudoä¼šæ£€æŸ¥è¯­æ³•é”™è¯¯
- å¦‚æœé…ç½®é”™è¯¯ï¼Œä¼šæ‹’ç»ä¿å­˜
- é˜²æ­¢é…ç½®é”™è¯¯å¯¼è‡´æ‰€æœ‰ç”¨æˆ·éƒ½æ— æ³•ä½¿ç”¨sudo

æ–‡ä»¶é”å®šï¼š
- é˜²æ­¢å¤šäººåŒæ—¶ç¼–è¾‘é…ç½®æ–‡ä»¶
- é¿å…é…ç½®æ–‡ä»¶æŸå
```

### 6.2 sudoersæ–‡ä»¶åŸºæœ¬è¯­æ³•

**åŸºæœ¬è¯­æ³•ç»“æ„**ï¼š
```
ç”¨æˆ·/ç»„    ä¸»æœº=(èº«ä»½) å‘½ä»¤
```

**å®é™…ä¾‹å­**ï¼š
```bash
# æŸ¥çœ‹sudoersæ–‡ä»¶å†…å®¹
sudo cat /etc/sudoers

# å¸¸è§çš„é…ç½®è¡Œï¼š
root    ALL=(ALL:ALL) ALL
%sudo   ALL=(ALL:ALL) ALL
%admin  ALL=(ALL) ALL
```

**è¯­æ³•è¯¦è§£**ï¼š
```
root ALL=(ALL:ALL) ALL
 â†“    â†“      â†“      â†“
ç”¨æˆ·  ä¸»æœº   èº«ä»½   å‘½ä»¤

è§£é‡Šï¼š
- rootï¼šrootç”¨æˆ·
- ALLï¼šåœ¨æ‰€æœ‰ä¸»æœºä¸Š
- (ALL:ALL)ï¼šå¯ä»¥ä»¥ä»»ä½•ç”¨æˆ·èº«ä»½ã€ä»»ä½•ç»„èº«ä»½
- ALLï¼šæ‰§è¡Œä»»ä½•å‘½ä»¤

%sudo ALL=(ALL:ALL) ALL
 â†“
%ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç»„ï¼ˆgroupï¼‰
sudoï¼šsudoç»„çš„æ‰€æœ‰æˆå‘˜
```

### 6.3 å¸¸ç”¨é…ç½®ç¤ºä¾‹


#### ğŸ”¸ åŸºæœ¬æƒé™é…ç½®

```bash
# ç¼–è¾‘sudoersæ–‡ä»¶
sudo visudo

# æ·»åŠ ç”¨æˆ·æƒé™
zhang ALL=(ALL:ALL) ALL           # zhangå¯ä»¥æ‰§è¡Œä»»ä½•å‘½ä»¤
li    ALL=(root) /usr/bin/systemctl  # liåªèƒ½ä»¥rootèº«ä»½æ‰§è¡Œsystemctl

# æ·»åŠ ç»„æƒé™  
%developers ALL=(ALL) /usr/bin/git, /usr/bin/docker
# developersç»„æˆå‘˜å¯ä»¥æ‰§è¡Œgitå’Œdockerå‘½ä»¤
```

#### ğŸ”¸ æ— å¯†ç æ‰§è¡Œ

```bash
# ç‰¹å®šå‘½ä»¤æ— éœ€å¯†ç 
zhang ALL=(root) NOPASSWD: /usr/bin/systemctl restart nginx
zhang ALL=(root) NOPASSWD: /usr/bin/systemctl status nginx

# æ‰€æœ‰å‘½ä»¤éƒ½æ— éœ€å¯†ç ï¼ˆæ…ç”¨ï¼ï¼‰
zhang ALL=(ALL:ALL) NOPASSWD: ALL
```

#### ğŸ”¸ é™åˆ¶ç‰¹å®šå‘½ä»¤

```bash
# å…è®¸æ‰§è¡Œç‰¹å®šè·¯å¾„ä¸‹çš„å‘½ä»¤
webadmin ALL=(root) /usr/sbin/nginx, /usr/bin/systemctl

# ä½¿ç”¨é€šé…ç¬¦
backup ALL=(root) /usr/bin/rsync, /bin/tar, /usr/bin/gzip

# ç¦æ­¢æ‰§è¡Œå±é™©å‘½ä»¤
zhang ALL=(ALL) ALL, !/usr/bin/su, !/bin/bash, !/usr/bin/passwd root
# zhangå¯ä»¥æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼Œä½†ä¸èƒ½æ‰§è¡Œsuã€bashã€passwd root
```

### 6.4 é…ç½®æ–‡ä»¶æœ€ä½³å®è·µ

```bash
# åˆ›å»ºä¸“é—¨çš„é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰
sudo visudo -f /etc/sudoers.d/local-users

# åœ¨æ–‡ä»¶ä¸­æ·»åŠ é…ç½®
zhang ALL=(ALL:ALL) ALL
%webadmin ALL=(root) /usr/sbin/nginx, /usr/bin/systemctl
```

**ä¼˜ç‚¹**ï¼š
- ä¸ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶
- ä¾¿äºç®¡ç†å’Œç»´æŠ¤
- ä¾¿äºç‰ˆæœ¬æ§åˆ¶

---

## 7. ğŸ“Š sudoæ—¥å¿—å®¡è®¡


### 7.1 sudoæ—¥å¿—è®°å½•æœºåˆ¶

**sudoè‡ªåŠ¨è®°å½•ä»€ä¹ˆï¼Ÿ**
```
è®°å½•å†…å®¹ï¼š
- è°æ‰§è¡Œäº†sudoå‘½ä»¤
- ä»€ä¹ˆæ—¶é—´æ‰§è¡Œçš„
- åœ¨å“ªä¸ªä¸»æœºä¸Šæ‰§è¡Œçš„
- æ‰§è¡Œäº†ä»€ä¹ˆå‘½ä»¤
- æ‰§è¡Œæ˜¯å¦æˆåŠŸ
```

### 7.2 æŸ¥çœ‹sudoæ—¥å¿—

**æ—¥å¿—å­˜æ”¾ä½ç½®**ï¼š
```bash
# Ubuntu/Debianç³»ç»Ÿ
sudo tail -f /var/log/auth.log

# CentOS/RHELç³»ç»Ÿ  
sudo tail -f /var/log/secure

# æŸ¥çœ‹sudoç›¸å…³çš„æ—¥å¿—
sudo grep sudo /var/log/auth.log
```

**æ—¥å¿—å†…å®¹ç¤ºä¾‹**ï¼š
```
Sep 14 15:30:12 ubuntu sudo:    zhang : TTY=pts/0 ; PWD=/home/zhang ; USER=root ; COMMAND=/usr/bin/apt update
Sep 14 15:31:05 ubuntu sudo:    zhang : TTY=pts/0 ; PWD=/home/zhang ; USER=root ; COMMAND=/usr/bin/systemctl restart nginx
Sep 14 15:32:18 ubuntu sudo:    li : command not allowed ; TTY=pts/1 ; PWD=/home/li ; USER=root ; COMMAND=/usr/bin/passwd root
```

**æ—¥å¿—å­—æ®µè§£é‡Š**ï¼š
```
zhangï¼šæ‰§è¡Œsudoçš„ç”¨æˆ·
TTY=pts/0ï¼šç»ˆç«¯ç±»å‹å’Œç¼–å·
PWD=/home/zhangï¼šæ‰§è¡Œå‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•
USER=rootï¼šä»¥ä»€ä¹ˆç”¨æˆ·èº«ä»½æ‰§è¡Œ
COMMAND=...ï¼šå…·ä½“æ‰§è¡Œçš„å‘½ä»¤
```

### 7.3 å¢å¼ºæ—¥å¿—åŠŸèƒ½

```bash
# ç¼–è¾‘sudoersæ–‡ä»¶å¢åŠ è¯¦ç»†æ—¥å¿—
sudo visudo

# æ·»åŠ ä»¥ä¸‹é…ç½®
Defaults    logfile=/var/log/sudo.log
Defaults    log_input, log_output
Defaults    iolog_dir=/var/log/sudo-io/%{user}
```

**é…ç½®è¯´æ˜**ï¼š
```
logfileï¼šæŒ‡å®šä¸“é—¨çš„sudoæ—¥å¿—æ–‡ä»¶
log_inputï¼šè®°å½•ç”¨æˆ·è¾“å…¥çš„å†…å®¹
log_outputï¼šè®°å½•å‘½ä»¤è¾“å‡ºçš„å†…å®¹  
iolog_dirï¼šæŒ‡å®šè¾“å…¥è¾“å‡ºæ—¥å¿—çš„å­˜å‚¨ç›®å½•
```

### 7.4 æ—¥å¿—åˆ†æå®ä¾‹

```bash
# ç»Ÿè®¡ç”¨æˆ·sudoä½¿ç”¨é¢‘ç‡
grep "sudo:" /var/log/auth.log | cut -d: -f6 | cut -d' ' -f2 | sort | uniq -c

# æŸ¥çœ‹å¤±è´¥çš„sudoå°è¯•
grep "command not allowed" /var/log/auth.log

# æŸ¥çœ‹ç‰¹å®šç”¨æˆ·çš„sudoå†å²
grep "zhang.*sudo:" /var/log/auth.log

# æŸ¥çœ‹æœ€è¿‘çš„sudoæ´»åŠ¨
tail -20 /var/log/auth.log | grep sudo
```

---

## 8. ğŸ›¡ï¸ æƒé™æå‡å®‰å…¨ç­–ç•¥


### 8.1 æœ€å°æƒé™åŸåˆ™

**ä»€ä¹ˆæ˜¯æœ€å°æƒé™åŸåˆ™ï¼Ÿ**
```
æ ¸å¿ƒæ€æƒ³ï¼šæ¯ä¸ªç”¨æˆ·åªè·å¾—å®Œæˆå·¥ä½œæ‰€å¿…éœ€çš„æœ€å°æƒé™
â†’ ä¸èƒ½å¤šç»™ï¼Œä¹Ÿä¸èƒ½å°‘ç»™
â†’ æ—¢è¦ä¿è¯å·¥ä½œæ•ˆç‡ï¼Œåˆè¦ç¡®ä¿ç³»ç»Ÿå®‰å…¨
```

**å®é™…åº”ç”¨**ï¼š
```bash
# âŒ ä¸å¥½çš„åšæ³•ï¼šç»™ç”¨æˆ·å®Œæ•´çš„rootæƒé™
zhang ALL=(ALL:ALL) ALL

# âœ… å¥½çš„åšæ³•ï¼šåªç»™å¿…è¦çš„æƒé™
zhang ALL=(root) /usr/bin/systemctl restart nginx
zhang ALL=(root) /usr/bin/systemctl status nginx
zhang ALL=(root) /usr/bin/systemctl reload nginx
```

### 8.2 è§’è‰²åŒ–æƒé™ç®¡ç†

**æŒ‰å·¥ä½œèŒèƒ½åˆ†é…æƒé™**ï¼š

```bash
# Webç®¡ç†å‘˜æƒé™
%webadmin ALL=(root) /usr/sbin/nginx, /usr/bin/systemctl restart nginx, \
                     /usr/bin/systemctl status nginx, /usr/bin/systemctl reload nginx

# æ•°æ®åº“ç®¡ç†å‘˜æƒé™  
%dbadmin ALL=(mysql) /usr/bin/mysql, /usr/bin/mysqldump, \
                     /usr/bin/systemctl restart mysql

# å¤‡ä»½ç®¡ç†å‘˜æƒé™
%backup ALL=(root) /usr/bin/rsync, /bin/tar, /usr/bin/crontab -u backup

# ç›‘æ§ç”¨æˆ·æƒé™ï¼ˆåªè¯»ï¼‰
%monitor ALL=(root) /usr/bin/systemctl status *, /usr/bin/journalctl, \
                    /bin/cat /var/log/*, /usr/bin/tail /var/log/*
```

### 8.3 å¯†ç ç­–ç•¥é…ç½®

```bash
# ç¼–è¾‘sudoersæ–‡ä»¶
sudo visudo

# æ·»åŠ å¯†ç ç›¸å…³é…ç½®
Defaults    passwd_timeout=1        # å¯†ç è¾“å…¥è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
Defaults    passwd_tries=3          # å¯†ç è¾“å…¥å°è¯•æ¬¡æ•°
Defaults    timestamp_timeout=15    # sudoä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
Defaults    rootpw                  # éœ€è¦rootå¯†ç è€Œä¸æ˜¯ç”¨æˆ·å¯†ç ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
```

### 8.4 ç¯å¢ƒå®‰å…¨é…ç½®

```bash
# é‡ç½®ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰
Defaults    env_reset

# ä¿ç•™å®‰å…¨çš„ç¯å¢ƒå˜é‡
Defaults    env_keep="COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR \
                      LS_COLORS MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS \
                      LC_CTYPE LOCALE_ARCHIVE LC_COLLATE LC_IDENTIFICATION"

# è®¾ç½®å®‰å…¨çš„PATH
Defaults    secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

# ç¦ç”¨å±é™©é€‰é¡¹
Defaults    !visiblepw              # ç¦æ­¢æ˜¾ç¤ºå¯†ç 
Defaults    always_set_home         # æ€»æ˜¯è®¾ç½®HOMEå˜é‡
Defaults    !rootpw                 # ä¸è¦æ±‚rootå¯†ç 
```

### 8.5 å®¡è®¡ä¸ç›‘æ§ç­–ç•¥

```bash
# å¼ºåˆ¶è®°å½•æ‰€æœ‰sudoæ´»åŠ¨
Defaults    log_host, log_year, logfile=/var/log/sudo.log

# è®°å½•è¾“å…¥è¾“å‡º
Defaults    log_input, log_output, iolog_dir=/var/log/sudo-io/%{user}

# é‚®ä»¶é€šçŸ¥
Defaults    mail_badpass, mail_no_user, mail_no_host, mail_no_perms
Defaults    mailto="admin@company.com"

# å‘½ä»¤åˆ«åï¼ˆä¾¿äºç®¡ç†ï¼‰
Cmnd_Alias NETWORKING = /sbin/route, /sbin/ifconfig, /bin/ping
Cmnd_Alias SOFTWARE = /bin/rpm, /usr/bin/up2date, /usr/bin/yum
Cmnd_Alias SERVICES = /sbin/service, /sbin/chkconfig, /usr/bin/systemctl

# ä½¿ç”¨åˆ«ååˆ†é…æƒé™
%netadmin ALL = NETWORKING
%swadmin ALL = SOFTWARE  
%sysadmin ALL = SERVICES
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç”¨æˆ·åˆ‡æ¢æœ¬è´¨ï¼šä¸´æ—¶æ”¹å˜ç”¨æˆ·èº«ä»½æ¥è·å¾—ä¸åŒæƒé™
ğŸ”¸ suæœºåˆ¶ï¼šéœ€è¦ç›®æ ‡ç”¨æˆ·å¯†ç ï¼Œè·å¾—å®Œæ•´èº«ä»½è½¬æ¢
ğŸ”¸ sudoæœºåˆ¶ï¼šç”¨è‡ªå·±å¯†ç ï¼Œä¸´æ—¶è·å¾—æŒ‡å®šæƒé™
ğŸ”¸ ç¯å¢ƒå˜é‡ç»§æ‰¿ï¼šä¸åŒåˆ‡æ¢æ–¹å¼å¯¹ç¯å¢ƒçš„å½±å“ä¸åŒ
ğŸ”¸ æƒé™é…ç½®ï¼šé€šè¿‡sudoersæ–‡ä»¶ç²¾ç¡®æ§åˆ¶æƒé™åˆ†é…
ğŸ”¸ å®‰å…¨å®¡è®¡ï¼šå®Œæ•´è®°å½•æƒé™ä½¿ç”¨æƒ…å†µ
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ su vs sudoçš„é€‰æ‹©åŸåˆ™**
```
ä¼˜å…ˆé€‰æ‹©sudoçš„æƒ…å†µï¼š
âœ… å¤šç”¨æˆ·ç¯å¢ƒ
âœ… éœ€è¦ç²¾ç¡®æƒé™æ§åˆ¶
âœ… è¦æ±‚æ“ä½œå¯è¿½æº¯
âœ… å¶å°”éœ€è¦ç®¡ç†å‘˜æƒé™

é€‰æ‹©suçš„æƒ…å†µï¼š
âœ… éœ€è¦è¿ç»­æ‰§è¡Œå¤šä¸ªç®¡ç†å‘½ä»¤
âœ… å•ç”¨æˆ·ç¯å¢ƒ
âœ… å®Œå…¨ä¿¡ä»»çš„ç¯å¢ƒ
```

**ğŸ”¹ ç¯å¢ƒå˜é‡çš„é‡è¦æ€§**
```
ä¸ºä»€ä¹ˆè¦å…³æ³¨ç¯å¢ƒå˜é‡ï¼š
- PATHé”™è¯¯ â†’ å‘½ä»¤æ‰¾ä¸åˆ°
- HOMEé”™è¯¯ â†’ é…ç½®æ–‡ä»¶è¯»å–é”™è¯¯
- æƒé™æ··ä¹± â†’ å®‰å…¨é£é™©

æœ€ä½³å®è·µï¼š
- ä½¿ç”¨ su - è¿›è¡Œå®Œæ•´çš„èº«ä»½åˆ‡æ¢
- ä½¿ç”¨ sudo -i è·å¾—å®Œæ•´çš„rootç¯å¢ƒ
- é¿å…æ··åˆä½¿ç”¨ä¸åŒçš„åˆ‡æ¢æ–¹å¼
```

**ğŸ”¹ å®‰å…¨é…ç½®çš„å¹³è¡¡ç‚¹**
```
å®‰å…¨æ€§ vs ä¾¿åˆ©æ€§ï¼š
è¿‡äºä¸¥æ ¼ â†’ å½±å“å·¥ä½œæ•ˆç‡
è¿‡äºå®½æ¾ â†’ å¢åŠ å®‰å…¨é£é™©

æ‰¾åˆ°å¹³è¡¡ï¼š
- åŸºäºå·¥ä½œèŒèƒ½åˆ†é…æƒé™
- å®šæœŸå®¡æŸ¥å’Œè°ƒæ•´æƒé™
- å®Œæ•´çš„æ—¥å¿—å®¡è®¡
- åŠæ—¶çš„å®‰å…¨åŸ¹è®­
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ æ—¥å¸¸è¿ç»´åœºæ™¯**
- **WebæœåŠ¡ç®¡ç†**ï¼šé‡å¯nginxã€æŸ¥çœ‹æ—¥å¿—ã€æ›´æ–°é…ç½®
- **ç³»ç»Ÿç»´æŠ¤**ï¼šè½¯ä»¶å®‰è£…ã€æœåŠ¡ç®¡ç†ã€ç³»ç»Ÿç›‘æ§  
- **ç”¨æˆ·ç®¡ç†**ï¼šæ·»åŠ ç”¨æˆ·ã€ä¿®æ”¹æƒé™ã€å¯†ç ç®¡ç†
- **æ–‡ä»¶æ“ä½œ**ï¼šè®¿é—®ç³»ç»Ÿæ–‡ä»¶ã€ä¿®æ”¹é…ç½®ã€å¤‡ä»½æ•°æ®

**ğŸ”§ å®‰å…¨ç®¡ç†å®è·µ**
- **æƒé™æœ€å°åŒ–**ï¼šåªç»™å¿…è¦çš„æƒé™ï¼Œå®šæœŸæ£€æŸ¥æƒé™
- **æ“ä½œå¯è¿½æº¯**ï¼šå®Œæ•´çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºå®‰å…¨å®¡è®¡
- **åˆ†å±‚é˜²æŠ¤**ï¼šå¤šä¸ªå®‰å…¨æœºåˆ¶ç›¸äº’é…åˆ
- **åŠæ—¶å“åº”**ï¼šç›‘æ§å¼‚å¸¸æ“ä½œï¼Œå¿«é€Ÿåº”å¯¹å®‰å…¨äº‹ä»¶

### 9.4 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ


**â“ å¿˜è®°rootå¯†ç æ€ä¹ˆåŠï¼Ÿ**
```bash
# é€šè¿‡sudoä¿®æ”¹rootå¯†ç 
sudo passwd root

# æˆ–è€…é€šè¿‡æ¢å¤æ¨¡å¼é‡ç½®
# å¯åŠ¨æ—¶è¿›å…¥recovery mode â†’ root shell â†’ passwd root
```

**â“ sudoæƒé™ä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ**
```bash
# æ–¹æ³•1ï¼šé€šè¿‡suè·å¾—rootæƒé™
su -
usermod -aG sudo username

# æ–¹æ³•2ï¼šé€šè¿‡recovery modeä¿®å¤
# å¯åŠ¨æ—¶è¿›å…¥recovery mode â†’ ä¿®æ”¹/etc/sudoersæ–‡ä»¶
```

**â“ å¦‚ä½•æ’¤é”€ç”¨æˆ·çš„sudoæƒé™ï¼Ÿ**
```bash
# ä»sudoç»„ä¸­ç§»é™¤
sudo deluser username sudo

# æˆ–è€…åœ¨sudoersæ–‡ä»¶ä¸­æ³¨é‡Šæ‰ç›¸å…³è¡Œ
sudo visudo
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- suéœ€è¦ä»–äººå¯†ç ï¼Œsudoç”¨è‡ªå·±å¯†ç 
- suè·å¾—å®Œæ•´èº«ä»½ï¼Œsudoä¸´æ—¶è·å¾—æƒé™  
- ç¯å¢ƒå˜é‡å¾ˆé‡è¦ï¼Œç™»å½•æ¨¡å¼æœ€å¹²å‡€
- æƒé™æœ€å°å¤Ÿç”¨å°±å¥½ï¼Œæ—¥å¿—å®¡è®¡ä¸èƒ½å°‘
- å®‰å…¨é…ç½®è¦å¹³è¡¡ï¼Œä¾¿åˆ©å®‰å…¨ä¸¤æ‰‹æŠ“