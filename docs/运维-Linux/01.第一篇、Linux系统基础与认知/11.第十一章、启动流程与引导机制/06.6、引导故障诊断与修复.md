---
title: 6ã€å¼•å¯¼æ•…éšœè¯Šæ–­ä¸ä¿®å¤
---
## ğŸ“š ç›®å½•

1. [å¼•å¯¼æ•…éšœæ¦‚è¿°](#1-å¼•å¯¼æ•…éšœæ¦‚è¿°)
2. [GRUB Rescueæ¨¡å¼æ“ä½œ](#2-GRUB-Rescueæ¨¡å¼æ“ä½œ)
3. [chrootç¯å¢ƒä¿®å¤ç³»ç»Ÿ](#3-chrootç¯å¢ƒä¿®å¤ç³»ç»Ÿ)
4. [å¼•å¯¼æ‰‡åŒºæŸåä¿®å¤](#4-å¼•å¯¼æ‰‡åŒºæŸåä¿®å¤)
5. [å†…æ ¸æ–‡ä»¶ä¸¢å¤±æ¢å¤](#5-å†…æ ¸æ–‡ä»¶ä¸¢å¤±æ¢å¤)
6. [initramfsé‡æ–°ç”Ÿæˆ](#6-initramfsé‡æ–°ç”Ÿæˆ)
7. [åˆ†åŒºè¡¨ä¿®å¤æ–¹æ³•](#7-åˆ†åŒºè¡¨ä¿®å¤æ–¹æ³•)
8. [Live CD/USBæ•‘æ´å¯åŠ¨](#8-Live-CD-USBæ•‘æ´å¯åŠ¨)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš¨ å¼•å¯¼æ•…éšœæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯å¼•å¯¼æ•…éšœ


**ğŸ”¸ ç®€å•ç†è§£**
```
å¼•å¯¼æ•…éšœ = å¼€æœºæ— æ³•æ­£å¸¸è¿›å…¥ç³»ç»Ÿ
å°±åƒæ±½è½¦æ‰“ä¸ç€ç«ä¸€æ ·ï¼Œç”µè„‘æœ‰ç”µä½†è¿›ä¸äº†æ“ä½œç³»ç»Ÿ
```

**å¸¸è§å¼•å¯¼æ•…éšœç°è±¡**ï¼š
```
é»‘å±ç°è±¡ï¼š
â”Œâ”€ å¼€æœºç”»é¢ â”€â”    â”Œâ”€ æœŸæœ›ç”»é¢ â”€â”
â”‚  BIOSæ£€æµ‹  â”‚    â”‚   ç™»å½•ç•Œé¢  â”‚
â”‚  Loading...â”‚ â†’  â”‚    ç”¨æˆ·å   â”‚
â”‚  Error!    â”‚    â”‚    å¯†ç      â”‚
â””â”€ å¡åœ¨è¿™é‡Œ â”€â”˜    â””â”€ è¿›ä¸å»äº† â”€â”˜

é”™è¯¯ä¿¡æ¯ç±»å‹ï¼š
ğŸ”´ "GRUB>" å‘½ä»¤è¡Œæç¤ºç¬¦
ğŸ”´ "grub rescue>" æ•‘æ´æ¨¡å¼
ğŸ”´ "Missing operating system" 
ğŸ”´ "Boot device not found"
ğŸ”´ "Kernel panic" å†…æ ¸å´©æºƒ
```

### 1.2 å¼•å¯¼æ•…éšœåˆ†ç±»


| æ•…éšœç±»å‹ | **è¡¨ç°ç—‡çŠ¶** | **æ•…éšœä½ç½®** | **ä¿®å¤éš¾åº¦** |
|---------|-------------|-------------|-------------|
| ğŸŸ¢ **GRUBé…ç½®é”™è¯¯** | `grubèœå•å¼‚å¸¸` | `é…ç½®æ–‡ä»¶` | `ç®€å•` |
| ğŸŸ¡ **å¼•å¯¼æ–‡ä»¶æŸå** | `grub rescueæ¨¡å¼` | `/bootç›®å½•` | `ä¸­ç­‰` |
| ğŸŸ  **å†…æ ¸æ–‡ä»¶ä¸¢å¤±** | `å¯åŠ¨åˆ°grubåæ— æ³•å¯åŠ¨` | `å†…æ ¸é•œåƒ` | `ä¸­ç­‰` |
| ğŸ”´ **åˆ†åŒºè¡¨æŸå** | `ç¡¬ç›˜æ— æ³•è¯†åˆ«` | `ç¡¬ç›˜åˆ†åŒº` | `å›°éš¾` |
| âš« **ç¡¬ç›˜ç‰©ç†æŸå** | `å®Œå…¨æ— æ³•è¯†åˆ«ç¡¬ç›˜` | `ç¡¬ä»¶å±‚é¢` | `æå›°éš¾` |

**ğŸ¯ ä¿®å¤ç­–ç•¥ä¼˜å…ˆçº§**
```
ç¬¬1æ­¥ï¼šå°è¯•GRUB rescueæ¨¡å¼æ‰‹åŠ¨å¼•å¯¼
ç¬¬2æ­¥ï¼šä½¿ç”¨Live CD/USBè¿›å…¥æ•‘æ´ç¯å¢ƒ
ç¬¬3æ­¥ï¼šchrootä¿®å¤ç³»ç»Ÿæ–‡ä»¶
ç¬¬4æ­¥ï¼šé‡å»ºå¼•å¯¼æ‰‡åŒºå’ŒGRUB
ç¬¬5æ­¥ï¼šä¿®å¤åˆ†åŒºè¡¨ï¼ˆæœ€åæ‰‹æ®µï¼‰
```

---

## 2. ğŸ› ï¸ GRUB Rescueæ¨¡å¼æ“ä½œ


### 2.1 ä»€ä¹ˆæ˜¯GRUB Rescueæ¨¡å¼


**ğŸ”¸ é€šä¿—è§£é‡Š**
```
GRUB Rescue = GRUBçš„"æ€¥æ•‘æ¨¡å¼"
å°±åƒæ‰‹æœºè¿›å…¥å®‰å…¨æ¨¡å¼ä¸€æ ·ï¼ŒåŠŸèƒ½æœ‰é™ä½†è¿˜èƒ½æŠ¢æ•‘

æ­£å¸¸æƒ…å†µï¼šå¼€æœº â†’ GRUBèœå• â†’ é€‰æ‹©ç³»ç»Ÿ â†’ è¿›å…¥Linux
æ•…éšœæƒ…å†µï¼šå¼€æœº â†’ ç›´æ¥è¿›å…¥ grub rescue> å‘½ä»¤è¡Œ
```

**è¿›å…¥rescueæ¨¡å¼çš„åŸå› **ï¼š
- GRUBé…ç½®æ–‡ä»¶æŸåæˆ–ä¸¢å¤±
- `/boot`ç›®å½•è¢«è¯¯åˆ 
- åˆ†åŒºUUIDå‘ç”Ÿå˜åŒ–
- ç¡¬ç›˜åˆ†åŒºè¡¨æœ‰é—®é¢˜

### 2.2 GRUB RescueåŸºæœ¬å‘½ä»¤


**ğŸ”§ æ ¸å¿ƒå‘½ä»¤æ¸…å•**
```bash
# æŸ¥çœ‹å¯ç”¨å‘½ä»¤
help

# åˆ—å‡ºæ‰€æœ‰åˆ†åŒº
ls

# æŸ¥çœ‹åˆ†åŒºè¯¦ç»†ä¿¡æ¯
ls (hd0,msdos1)/

# è®¾ç½®æ ¹åˆ†åŒº
set root=(hd0,msdos1)

# è®¾ç½®å‰ç¼€è·¯å¾„  
set prefix=(hd0,msdos1)/boot/grub

# åŠ è½½normalæ¨¡å—
insmod normal

# å¯åŠ¨æ­£å¸¸æ¨¡å¼
normal
```

**ğŸ¯ è®°å¿†æŠ€å·§**
```
ls = çœ‹çœ‹æœ‰å•¥åˆ†åŒº
set = è®¾ç½®æ ¹åˆ†åŒºä½ç½®  
insmod = è£…è½½æ¨¡å—
normal = è¿›å…¥æ­£å¸¸æ¨¡å¼
```

### 2.3 æ‰‹åŠ¨å¼•å¯¼ç³»ç»Ÿæ­¥éª¤


**ğŸ“‹ å®Œæ•´æ“ä½œæµç¨‹**
```bash
# ç¬¬1æ­¥ï¼šæŸ¥æ‰¾Linuxåˆ†åŒº
grub rescue> ls
(hd0) (hd0,msdos2) (hd0,msdos1)

# ç¬¬2æ­¥ï¼šç¡®è®¤æ ¹åˆ†åŒºä½ç½®
grub rescue> ls (hd0,msdos1)/
# å¦‚æœçœ‹åˆ° boot/ home/ etc/ ç­‰ç›®å½•ï¼Œè¯´æ˜è¿™æ˜¯æ ¹åˆ†åŒº

# ç¬¬3æ­¥ï¼šè®¾ç½®æ ¹åˆ†åŒº
grub rescue> set root=(hd0,msdos1)

# ç¬¬4æ­¥ï¼šè®¾ç½®GRUBè·¯å¾„
grub rescue> set prefix=(hd0,msdos1)/boot/grub

# ç¬¬5æ­¥ï¼šåŠ è½½normalæ¨¡å—
grub rescue> insmod normal

# ç¬¬6æ­¥ï¼šè¿›å…¥æ­£å¸¸GRUBèœå•
grub rescue> normal
```

**ğŸ’¡ å®é™…æ“ä½œç¤ºä¾‹**
```
åœºæ™¯ï¼šå¼€æœºæ˜¾ç¤º grub rescue> æç¤ºç¬¦

æ“ä½œè¿‡ç¨‹ï¼š
grub rescue> ls
(hd0) (hd0,msdos2) (hd0,msdos1)

grub rescue> ls (hd0,msdos1)/
lost+found/ boot/ etc/ home/ ...  â† ç¡®è®¤è¿™æ˜¯æ ¹åˆ†åŒº

grub rescue> set root=(hd0,msdos1)
grub rescue> set prefix=(hd0,msdos1)/boot/grub  
grub rescue> insmod normal
grub rescue> normal

ç»“æœï¼šæˆåŠŸè¿›å…¥GRUBå¯åŠ¨èœå•ï¼
```

### 2.4 å¸¸è§é—®é¢˜å¤„ç†


**âŒ é—®é¢˜1ï¼šæ‰¾ä¸åˆ°åˆ†åŒº**
```bash
# ç°è±¡
grub rescue> ls (hd0,msdos1)/
error: unknown filesystem

# è§£å†³æ–¹æ¡ˆ
# å°è¯•å…¶ä»–åˆ†åŒº
grub rescue> ls (hd0,msdos2)/
grub rescue> ls (hd0,gpt1)/     # GPTåˆ†åŒºæ ¼å¼
```

**âŒ é—®é¢˜2ï¼šæ¨¡å—åŠ è½½å¤±è´¥**
```bash
# ç°è±¡  
grub rescue> insmod normal
error: file '/boot/grub/i386-pc/normal.mod' not found

# è§£å†³æ–¹æ¡ˆ
# éœ€è¦ä½¿ç”¨Live CDä¿®å¤GRUB
```

---

## 3. ğŸ”§ chrootç¯å¢ƒä¿®å¤ç³»ç»Ÿ


### 3.1 ä»€ä¹ˆæ˜¯chroot


**ğŸ”¸ é€šä¿—ç†è§£**
```
chroot = "Change Root" = æ”¹å˜æ ¹ç›®å½•
å°±åƒæ¬å®¶ä¸€æ ·ï¼Œä¸´æ—¶æŠŠ"å®¶"æ¬åˆ°æŸåç³»ç»Ÿçš„ä½ç½®

æ­£å¸¸æƒ…å†µï¼šLive CDçš„æ ¹ç›®å½• â†’ /
chrootåï¼šæŸåç³»ç»Ÿçš„æ ¹ç›®å½• â†’ /
```

**chrootçš„ä½œç”¨**ï¼š
- åœ¨Live CDç¯å¢ƒä¸‹æ“ä½œæŸåçš„ç³»ç»Ÿ
- å°±åƒ"ç©¿è¶Š"åˆ°æŸåç³»ç»Ÿå†…éƒ¨è¿›è¡Œä¿®å¤
- å¯ä»¥ä½¿ç”¨æŸåç³»ç»Ÿçš„å‘½ä»¤å’Œå·¥å…·

### 3.2 chrootç¯å¢ƒæ­å»º


**ğŸ“‹ æ­å»ºæ­¥éª¤è¯¦è§£**

**ç¬¬1æ­¥ï¼šä½¿ç”¨Live CDå¯åŠ¨**
```bash
# ä»Live CD/USBå¯åŠ¨ç³»ç»Ÿ
# é€‰æ‹©"Try Ubuntu"æˆ–ç±»ä¼¼é€‰é¡¹
# æ‰“å¼€ç»ˆç«¯
```

**ç¬¬2æ­¥ï¼šæŒ‚è½½æŸåç³»ç»Ÿ**
```bash
# æŸ¥çœ‹åˆ†åŒºæƒ…å†µ
sudo fdisk -l

# æŒ‚è½½æ ¹åˆ†åŒºåˆ°ä¸´æ—¶ç›®å½•
sudo mkdir /mnt/broken-system
sudo mount /dev/sda1 /mnt/broken-system

# å¦‚æœæœ‰å•ç‹¬çš„bootåˆ†åŒºï¼Œä¹Ÿè¦æŒ‚è½½
sudo mount /dev/sda2 /mnt/broken-system/boot
```

**ç¬¬3æ­¥ï¼šæŒ‚è½½ç³»ç»Ÿç›®å½•**
```bash
# æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
sudo mount --bind /dev /mnt/broken-system/dev
sudo mount --bind /proc /mnt/broken-system/proc  
sudo mount --bind /sys /mnt/broken-system/sys
```

**ç¬¬4æ­¥ï¼šè¿›å…¥chrootç¯å¢ƒ**
```bash
# åˆ‡æ¢åˆ°æŸåç³»ç»Ÿç¯å¢ƒ
sudo chroot /mnt/broken-system

# ç°åœ¨ä½ å°±"ç©¿è¶Š"åˆ°æŸåç³»ç»Ÿå†…éƒ¨äº†ï¼
```

### 3.3 chrootç¯å¢ƒä¿®å¤æ“ä½œ


**ğŸ”§ å¸¸ç”¨ä¿®å¤å‘½ä»¤**
```bash
# è¿›å…¥chrootåå¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼š

# é‡æ–°å®‰è£…GRUB
update-grub
grub-install /dev/sda

# é‡æ–°ç”Ÿæˆinitramfs
update-initramfs -u

# ä¿®å¤æ–‡ä»¶ç³»ç»Ÿé”™è¯¯
fsck -f /dev/sda1

# å®‰è£…ä¸¢å¤±çš„è½¯ä»¶åŒ…
apt-get update
apt-get install --reinstall linux-image-generic
```

**ğŸ’¡ ä¿®å¤ç¤ºä¾‹æµç¨‹**
```bash
# åœºæ™¯ï¼šGRUBé…ç½®æ–‡ä»¶æŸå

# 1. è¿›å…¥chrootç¯å¢ƒï¼ˆæŒ‰ä¸Šè¿°æ­¥éª¤ï¼‰
sudo chroot /mnt/broken-system

# 2. é‡æ–°ç”ŸæˆGRUBé…ç½®
update-grub
# è¾“å‡ºï¼šFound linux image: /boot/vmlinuz-5.4.0-74-generic
#       Found initrd image: /boot/initrd.img-5.4.0-74-generic
#       done

# 3. é‡æ–°å®‰è£…GRUBåˆ°MBR
grub-install /dev/sda
# è¾“å‡ºï¼šInstalling for i386-pc platform.
#       Installation finished. No error reported.

# 4. é€€å‡ºchrootå¹¶é‡å¯
exit
sudo reboot
```

### 3.4 chrootä¿®å¤æ£€æŸ¥æ¸…å•


**âœ… ä¿®å¤å®Œæˆæ£€æŸ¥**
```markdown
ä¿®å¤æ“ä½œæ£€æŸ¥æ¸…å•ï¼š
- [ ] èƒ½å¦æ­£å¸¸æ‰§è¡Œ `update-grub`
- [ ] `grub-install` æ˜¯å¦æˆåŠŸæ— æŠ¥é”™
- [ ] `/boot/grub/grub.cfg` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- [ ] å†…æ ¸æ–‡ä»¶æ˜¯å¦å®Œæ•´å­˜åœ¨
- [ ] initramfsæ–‡ä»¶æ˜¯å¦æ­£å¸¸ç”Ÿæˆ

é€€å‡ºå‰å¿…åšï¼š
- [ ] æ‰§è¡Œ `exit` é€€å‡ºchroot
- [ ] å¸è½½æ‰€æœ‰æŒ‚è½½ç‚¹
- [ ] å®‰å…¨é‡å¯ç³»ç»Ÿ
```

---

## 4. ğŸ’¿ å¼•å¯¼æ‰‡åŒºæŸåä¿®å¤


### 4.1 ä»€ä¹ˆæ˜¯å¼•å¯¼æ‰‡åŒº


**ğŸ”¸ é€šä¿—è§£é‡Š**
```
å¼•å¯¼æ‰‡åŒº = ç¡¬ç›˜çš„"å¯åŠ¨æŒ‰é’®"
å°±åƒç”µè§†é¥æ§å™¨çš„å¼€æœºé”®ï¼ŒæŒ‰äº†æ‰èƒ½å¯åŠ¨

ç¡¬ç›˜ç»“æ„ç¤ºæ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼•å¯¼æ‰‡åŒº     â”‚   ç³»ç»Ÿåˆ†åŒº   â”‚   æ•°æ®åˆ†åŒº   â”‚
â”‚ (MBR/GPT)   â”‚   (Linux)   â”‚   (Home)    â”‚
â”‚ 512å­—èŠ‚     â”‚   å‡ åGB    â”‚   å‡ ç™¾GB    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘
   è¿™é‡Œåäº†å°±å¯åŠ¨ä¸äº†
```

**å¼•å¯¼æ‰‡åŒºçš„ä½œç”¨**ï¼š
- å­˜å‚¨åˆ†åŒºè¡¨ä¿¡æ¯
- åŒ…å«åˆå§‹å¯åŠ¨ä»£ç 
- æŒ‡å‘GRUBçš„ä½ç½®

### 4.2 æ£€æµ‹å¼•å¯¼æ‰‡åŒºçŠ¶æ€


**ğŸ” è¯Šæ–­å‘½ä»¤**
```bash
# æŸ¥çœ‹MBRå†…å®¹
sudo dd if=/dev/sda bs=512 count=1 | hexdump -C

# æ£€æŸ¥åˆ†åŒºè¡¨
sudo fdisk -l /dev/sda

# éªŒè¯GRUBå®‰è£…çŠ¶æ€
sudo grub-install --dry-run /dev/sda
```

**åˆ¤æ–­å¼•å¯¼æ‰‡åŒºæŸåçš„ç—‡çŠ¶**ï¼š
- å¼€æœºæ˜¾ç¤º "Missing operating system"
- "Boot device not found" é”™è¯¯
- BIOSèƒ½æ£€æµ‹åˆ°ç¡¬ç›˜ä½†æ— æ³•å¯åŠ¨

### 4.3 MBRå¼•å¯¼æ‰‡åŒºä¿®å¤


**ğŸ› ï¸ MBRä¿®å¤æ­¥éª¤**
```bash
# ä½¿ç”¨Live CDå¯åŠ¨ï¼Œæ‰“å¼€ç»ˆç«¯

# ç¬¬1æ­¥ï¼šå¤‡ä»½å½“å‰MBRï¼ˆé¢„é˜²æªæ–½ï¼‰
sudo dd if=/dev/sda of=/tmp/mbr_backup.img bs=512 count=1

# ç¬¬2æ­¥ï¼šæ¸…é›¶MBRå¼•å¯¼ä»£ç ï¼ˆä¿ç•™åˆ†åŒºè¡¨ï¼‰
sudo dd if=/dev/zero of=/dev/sda bs=446 count=1

# ç¬¬3æ­¥ï¼šé‡æ–°å®‰è£…GRUBåˆ°MBR
sudo grub-install --target=i386-pc /dev/sda

# ç¬¬4æ­¥ï¼šç”ŸæˆGRUBé…ç½®æ–‡ä»¶
# éœ€è¦å…ˆæŒ‚è½½å¹¶chrootåˆ°ç³»ç»Ÿåˆ†åŒº
sudo mount /dev/sda1 /mnt
sudo chroot /mnt
update-grub
exit
```

### 4.4 GPTå¼•å¯¼æ‰‡åŒºä¿®å¤


**ğŸ”§ GPT/UEFIä¿®å¤æ–¹æ³•**
```bash
# GPTåˆ†åŒºè¡¨ä¿®å¤

# ç¬¬1æ­¥ï¼šæ£€æŸ¥GPTåˆ†åŒºè¡¨
sudo gdisk -l /dev/sda

# ç¬¬2æ­¥ï¼šä¿®å¤GPTåˆ†åŒºè¡¨
sudo gdisk /dev/sda
# åœ¨gdiskä¸­æ‰§è¡Œï¼š
# r (recovery menu)
# p (print GPT)  
# v (verify)
# w (write and exit)

# ç¬¬3æ­¥ï¼šé‡æ–°å®‰è£…GRUBï¼ˆUEFIæ¨¡å¼ï¼‰
sudo grub-install --target=x86_64-efi --efi-directory=/boot/efi /dev/sda
```

**âš ï¸ æ³¨æ„äº‹é¡¹**
```
MBRä¿®å¤é£é™©ï¼š
ğŸ”´ é”™è¯¯æ“ä½œå¯èƒ½å¯¼è‡´åˆ†åŒºè¡¨ä¸¢å¤±
ğŸ”´ åŠ¡å¿…å…ˆå¤‡ä»½é‡è¦æ•°æ®
ğŸŸ¡ å»ºè®®å…ˆå°è¯•GRUB rescueæ¨¡å¼

ä¿®å¤å‰æ£€æŸ¥ï¼š
âœ… ç¡®è®¤åˆ†åŒºè¡¨ç±»å‹ï¼ˆMBRè¿˜æ˜¯GPTï¼‰
âœ… å¤‡ä»½é‡è¦æ•°æ®  
âœ… å‡†å¤‡Live CDä½œä¸ºåå¤‡æ–¹æ¡ˆ
```

---

## 5. ğŸ”„ grub2-installé‡æ–°å®‰è£…


### 5.1 grub2-installå‘½ä»¤è¯¦è§£


**ğŸ”¸ å‘½ä»¤ä½œç”¨**
```
grub2-install = é‡æ–°å®‰è£…GRUBå¼•å¯¼ç¨‹åº
å°±åƒé‡è£…æ±½è½¦çš„ç‚¹ç«ç³»ç»Ÿï¼Œè®©å¼•å¯¼åŠŸèƒ½æ¢å¤æ­£å¸¸
```

**åŸºæœ¬è¯­æ³•**ï¼š
```bash
grub2-install [é€‰é¡¹] è®¾å¤‡å

# æœ€å¸¸ç”¨å½¢å¼
grub2-install /dev/sda
```

### 5.2 ä¸åŒåœºæ™¯çš„å®‰è£…æ–¹æ³•


**ğŸ–¥ï¸ ä¼ ç»ŸBIOS + MBR**
```bash
# æ ‡å‡†å®‰è£…æ–¹æ³•
sudo grub2-install /dev/sda

# æŒ‡å®šå¹³å°ï¼ˆå¯é€‰ï¼‰
sudo grub2-install --target=i386-pc /dev/sda

# å¼ºåˆ¶å®‰è£…ï¼ˆè¦†ç›–ç°æœ‰ï¼‰
sudo grub2-install --force /dev/sda
```

**ğŸ’» UEFI + GPT**  
```bash
# UEFIç¯å¢ƒå®‰è£…
sudo grub2-install --target=x86_64-efi --efi-directory=/boot/efi

# å¦‚æœEFIåˆ†åŒºæŒ‚è½½åœ¨å…¶ä»–ä½ç½®
sudo grub2-install --target=x86_64-efi --efi-directory=/mnt/efi

# å¯ç§»åŠ¨è®¾å¤‡å®‰è£…
sudo grub2-install --target=x86_64-efi --removable /dev/sdb
```

### 5.3 å¸¸è§å®‰è£…é”™è¯¯å¤„ç†


**âŒ é”™è¯¯1ï¼šæ‰¾ä¸åˆ°EFIç›®å½•**
```bash
# é”™è¯¯ä¿¡æ¯
grub2-install: error: cannot find EFI directory

# è§£å†³æ–¹æ¡ˆ
# ç¡®è®¤EFIåˆ†åŒºæŒ‚è½½ä½ç½®
mount | grep -i efi
# åˆ›å»ºæŒ‚è½½ç‚¹å¹¶æŒ‚è½½EFIåˆ†åŒº
sudo mkdir -p /boot/efi
sudo mount /dev/sda1 /boot/efi
```

**âŒ é”™è¯¯2ï¼šè®¾å¤‡å¿™ç¢Œ**
```bash
# é”™è¯¯ä¿¡æ¯  
grub2-install: error: /dev/sda appears to contain a mounted filesystem

# è§£å†³æ–¹æ¡ˆ
# å¸è½½ç›¸å…³åˆ†åŒº
sudo umount /dev/sda1
# æˆ–å¼ºåˆ¶å®‰è£…
sudo grub2-install --force /dev/sda
```

### 5.4 éªŒè¯å®‰è£…ç»“æœ


**âœ… å®‰è£…æˆåŠŸéªŒè¯**
```bash
# æ£€æŸ¥GRUBæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la /boot/grub2/

# éªŒè¯é…ç½®æ–‡ä»¶
sudo grub2-mkconfig -o /boot/grub2/grub.cfg

# æµ‹è¯•å¯åŠ¨ï¼ˆä¸é‡å¯ï¼‰
sudo grub2-emu
```

**ğŸ¯ æˆåŠŸæ ‡å¿—**
```
å®‰è£…æˆåŠŸçš„æ ‡å¿—ï¼š
âœ… å‘½ä»¤æ‰§è¡Œæ— é”™è¯¯ä¿¡æ¯
âœ… /boot/grub2/ ç›®å½•å­˜åœ¨ä¸”æœ‰æ–‡ä»¶
âœ… grub.cfg é…ç½®æ–‡ä»¶æ­£å¸¸ç”Ÿæˆ
âœ… é‡å¯åèƒ½çœ‹åˆ°GRUBèœå•
```

---

## 6. ğŸ§ å†…æ ¸æ–‡ä»¶ä¸¢å¤±æ¢å¤


### 6.1 å†…æ ¸æ–‡ä»¶çš„ä½œç”¨


**ğŸ”¸ å†…æ ¸æ˜¯ä»€ä¹ˆ**
```
å†…æ ¸ = Linuxç³»ç»Ÿçš„"å¿ƒè„"
å°±åƒäººçš„å¿ƒè„ä¸€æ ·ï¼Œæ²¡æœ‰å°±æ´»ä¸äº†

å†…æ ¸æ–‡ä»¶ä½ç½®ï¼š
/boot/vmlinuz-ç‰ˆæœ¬å·     â† å†…æ ¸é•œåƒï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰
/boot/initrd.img-ç‰ˆæœ¬å·  â† åˆå§‹å†…å­˜ç›˜ï¼ˆå¯åŠ¨è¾…åŠ©ï¼‰

ç¤ºä¾‹ï¼š
/boot/vmlinuz-5.4.0-74-generic
/boot/initrd.img-5.4.0-74-generic
```

**å†…æ ¸ä¸¢å¤±çš„ç—‡çŠ¶**ï¼š
- GRUBèœå•èƒ½æ˜¾ç¤ºï¼Œä½†é€‰æ‹©ç³»ç»ŸåæŠ¥é”™
- "Kernel not found" é”™è¯¯
- è¿›å…¥emergency modeç´§æ€¥æ¨¡å¼

### 6.2 æ£€æŸ¥å†…æ ¸æ–‡ä»¶çŠ¶æ€


**ğŸ” è¯Šæ–­å‘½ä»¤**
```bash
# æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬
uname -r

# æ£€æŸ¥/bootç›®å½•å†…å®¹
ls -la /boot/

# æŸ¥çœ‹å·²å®‰è£…çš„å†…æ ¸åŒ…
dpkg -l | grep linux-image     # Debian/Ubuntu
rpm -qa | grep kernel          # Red Hat/CentOS
```

**æ­£å¸¸çš„/bootç›®å½•åº”è¯¥åŒ…å«**ï¼š
```
/boot/
â”œâ”€â”€ vmlinuz-5.4.0-74-generic    â† å†…æ ¸é•œåƒ
â”œâ”€â”€ initrd.img-5.4.0-74-generic â† åˆå§‹å†…å­˜ç›˜  
â”œâ”€â”€ System.map-5.4.0-74-generic â† ç¬¦å·è¡¨
â”œâ”€â”€ config-5.4.0-74-generic     â† å†…æ ¸é…ç½®
â””â”€â”€ grub/                       â† GRUBæ–‡ä»¶å¤¹
```

### 6.3 é‡æ–°å®‰è£…å†…æ ¸


**ğŸ”§ Ubuntu/Debianç³»ç»Ÿ**
```bash
# åœ¨chrootç¯å¢ƒä¸­æ‰§è¡Œ

# ç¬¬1æ­¥ï¼šæ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
apt-get update

# ç¬¬2æ­¥ï¼šæŸ¥çœ‹å¯ç”¨å†…æ ¸ç‰ˆæœ¬
apt-cache search linux-image

# ç¬¬3æ­¥ï¼šå®‰è£…æœ€æ–°å†…æ ¸
apt-get install linux-image-generic

# ç¬¬4æ­¥ï¼šå®‰è£…å†…æ ¸å¤´æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
apt-get install linux-headers-generic

# ç¬¬5æ­¥ï¼šæ›´æ–°GRUBé…ç½®
update-grub
```

**ğŸ”§ CentOS/RHELç³»ç»Ÿ**
```bash
# åœ¨æ•‘æ´æ¨¡å¼ä¸­æ‰§è¡Œ

# ç¬¬1æ­¥ï¼šæŸ¥çœ‹å¯ç”¨å†…æ ¸
yum list kernel

# ç¬¬2æ­¥ï¼šå®‰è£…å†…æ ¸
yum install kernel

# ç¬¬3æ­¥ï¼šé‡æ–°ç”Ÿæˆinitramfs
dracut --force

# ç¬¬4æ­¥ï¼šæ›´æ–°GRUBé…ç½®  
grub2-mkconfig -o /boot/grub2/grub.cfg
```

### 6.4 æ‰‹åŠ¨å¤åˆ¶å†…æ ¸æ–‡ä»¶


**ğŸ“ ä»å…¶ä»–ç³»ç»Ÿå¤åˆ¶**
```bash
# å¦‚æœæœ‰ç›¸åŒç‰ˆæœ¬çš„æ­£å¸¸ç³»ç»Ÿ

# ç¬¬1æ­¥ï¼šæŒ‚è½½æ­£å¸¸ç³»ç»Ÿçš„/bootåˆ†åŒº
mount /dev/sdb1 /mnt/good-boot

# ç¬¬2æ­¥ï¼šå¤åˆ¶å†…æ ¸æ–‡ä»¶
cp /mnt/good-boot/vmlinuz-5.4.0-74-generic /boot/
cp /mnt/good-boot/initrd.img-5.4.0-74-generic /boot/

# ç¬¬3æ­¥ï¼šè®¾ç½®æ­£ç¡®æƒé™
chmod 644 /boot/vmlinuz-5.4.0-74-generic
chmod 644 /boot/initrd.img-5.4.0-74-generic

# ç¬¬4æ­¥ï¼šæ›´æ–°GRUB
update-grub
```

---

## 7. ğŸ”„ initramfsé‡æ–°ç”Ÿæˆ


### 7.1 ä»€ä¹ˆæ˜¯initramfs


**ğŸ”¸ é€šä¿—ç†è§£**
```
initramfs = å¯åŠ¨æ—¶çš„"ä¸´æ—¶ç³»ç»Ÿ"
å°±åƒæ¬å®¶æ—¶ç”¨çš„ä¸´æ—¶ä½æ‰€ï¼Œå¸®åŠ©çœŸæ­£çš„ç³»ç»Ÿå¯åŠ¨

å¯åŠ¨è¿‡ç¨‹ï¼š
GRUB â†’ åŠ è½½å†…æ ¸ â†’ åŠ è½½initramfs â†’ æŒ‚è½½çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ

initramfsçš„ä½œç”¨ï¼š
â€¢ åŒ…å«å¯åŠ¨å¿…éœ€çš„é©±åŠ¨ç¨‹åº
â€¢ åŒ…å«æ–‡ä»¶ç³»ç»ŸæŒ‚è½½å·¥å…·  
â€¢ åœ¨å†…å­˜ä¸­åˆ›å»ºä¸´æ—¶æ ¹ç›®å½•
```

### 7.2 initramfsæŸåçš„ç—‡çŠ¶


**å¸¸è§é”™è¯¯ç°è±¡**ï¼š
```
å¯åŠ¨æŠ¥é”™ä¿¡æ¯ï¼š
"Unable to mount root fs"
"VFS: Cannot open root device"  
"Kernel panic - not syncing: VFS"
"Gave up waiting for root device"

å¯åŠ¨å¡ä½ä½ç½®ï¼š
GRUBåŠ è½½å†…æ ¸ âœ…
åŠ è½½initramfs âœ…  
æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ âŒ â† åœ¨è¿™é‡Œå¡ä½
```

### 7.3 é‡æ–°ç”Ÿæˆinitramfs


**ğŸ”§ Ubuntu/Debianç³»ç»Ÿ**
```bash
# åœ¨chrootç¯å¢ƒä¸­æ‰§è¡Œ

# æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬
uname -r
# æˆ–è€…æŸ¥çœ‹/bootç›®å½•
ls /boot/vmlinuz*

# é‡æ–°ç”Ÿæˆæ‰€æœ‰å†…æ ¸çš„initramfs
update-initramfs -u

# é‡æ–°ç”ŸæˆæŒ‡å®šç‰ˆæœ¬çš„initramfs  
update-initramfs -u -k 5.4.0-74-generic

# å¼ºåˆ¶é‡å»ºï¼ˆå¦‚æœä¸Šé¢å‘½ä»¤å¤±è´¥ï¼‰
update-initramfs -c -k 5.4.0-74-generic
```

**ğŸ”§ CentOS/RHELç³»ç»Ÿ**
```bash
# æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬
uname -r

# é‡æ–°ç”Ÿæˆinitramfs
dracut --force /boot/initramfs-$(uname -r).img $(uname -r)

# é‡æ–°ç”Ÿæˆæ‰€æœ‰å·²å®‰è£…å†…æ ¸çš„initramfs
dracut --regenerate-all --force
```

### 7.4 æ‰‹åŠ¨ä¿®å¤initramfs


**ğŸ› ï¸ æ·±åº¦ä¿®å¤æ–¹æ³•**
```bash
# å¦‚æœæ ‡å‡†æ–¹æ³•å¤±è´¥ï¼Œå°è¯•æ‰‹åŠ¨ä¿®å¤

# ç¬¬1æ­¥ï¼šåˆ é™¤æŸåçš„initramfsæ–‡ä»¶
rm /boot/initrd.img-5.4.0-74-generic

# ç¬¬2æ­¥ï¼šæ¸…ç†ç¼“å­˜
update-initramfs -d -k 5.4.0-74-generic

# ç¬¬3æ­¥ï¼šé‡æ–°åˆ›å»º
update-initramfs -c -k 5.4.0-74-generic

# ç¬¬4æ­¥ï¼šéªŒè¯æ–‡ä»¶ç”Ÿæˆ
ls -la /boot/initrd.img*
```

**âœ… ç”ŸæˆæˆåŠŸéªŒè¯**
```bash
# æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆåº”è¯¥å‡ åMBï¼‰
ls -lh /boot/initrd.img-5.4.0-74-generic

# æ£€æŸ¥æ–‡ä»¶å†…å®¹ï¼ˆåº”è¯¥æ˜¯gzipå‹ç¼©æ–‡ä»¶ï¼‰
file /boot/initrd.img-5.4.0-74-generic

# æ›´æ–°GRUBé…ç½®  
update-grub
```

---

## 8. ğŸ’½ åˆ†åŒºè¡¨ä¿®å¤æ–¹æ³•


### 8.1 åˆ†åŒºè¡¨æŸåçš„ç—‡çŠ¶


**ğŸ”¸ ä»€ä¹ˆæ˜¯åˆ†åŒºè¡¨**
```
åˆ†åŒºè¡¨ = ç¡¬ç›˜çš„"åœ°å›¾"  
è®°å½•äº†ç¡¬ç›˜å¦‚ä½•åˆ†å‰²æˆä¸åŒåŒºåŸŸ

ç¡¬ç›˜ = ä¸€æ•´å—åœ°
åˆ†åŒºè¡¨ = åœ°å›¾ï¼Œæ ‡æ³¨å“ªé‡Œæ˜¯ä½å®…åŒºã€å•†ä¸šåŒºã€å…¬å›­ç­‰
åˆ†åŒº = æŒ‰åœ°å›¾åˆ’åˆ†çš„å…·ä½“åŒºåŸŸ
```

**åˆ†åŒºè¡¨æŸåçš„è¡¨ç°**ï¼š
- å¼€æœºæç¤º "Invalid partition table"
- BIOSæ£€æµ‹ä¸åˆ°æ“ä½œç³»ç»Ÿ
- æ— æ³•æŒ‚è½½ä»»ä½•åˆ†åŒº
- fdiskæ˜¾ç¤ºæ— åˆ†åŒºä¿¡æ¯

### 8.2 åˆ†åŒºè¡¨ç±»å‹è¯Šæ–­


**ğŸ” ç¡®è®¤åˆ†åŒºè¡¨ç±»å‹**
```bash
# æ£€æŸ¥åˆ†åŒºè¡¨ç±»å‹
sudo parted /dev/sda print

# æˆ–è€…ä½¿ç”¨fdisk
sudo fdisk -l /dev/sda

# ä½¿ç”¨gdiskæ£€æŸ¥ï¼ˆä¸»è¦ç”¨äºGPTï¼‰
sudo gdisk -l /dev/sda
```

**è¾“å‡ºç¤ºä¾‹è§£è¯»**ï¼š
```bash
# MBRåˆ†åŒºè¡¨
Partition Table: msdos
# GPTåˆ†åŒºè¡¨  
Partition Table: gpt
```

### 8.3 MBRåˆ†åŒºè¡¨ä¿®å¤


**ğŸ› ï¸ MBRåˆ†åŒºè¡¨ä¿®å¤æ­¥éª¤**
```bash
# ä½¿ç”¨testdiskå·¥å…·ä¿®å¤

# ç¬¬1æ­¥ï¼šå®‰è£…testdisk
sudo apt-get install testdisk    # Ubuntu/Debian
sudo yum install testdisk        # CentOS/RHEL

# ç¬¬2æ­¥ï¼šè¿è¡Œtestdisk
sudo testdisk

# ç¬¬3æ­¥ï¼šæŒ‰ç…§å‘å¯¼æ“ä½œ
# - é€‰æ‹©ç¡¬ç›˜
# - é€‰æ‹©åˆ†åŒºè¡¨ç±»å‹ (Intel/PC)
# - é€‰æ‹© "Analyse" åˆ†æ
# - é€‰æ‹© "Quick Search" å¿«é€Ÿæœç´¢
# - ç¡®è®¤æ‰¾åˆ°çš„åˆ†åŒº
# - é€‰æ‹© "Write" å†™å…¥åˆ†åŒºè¡¨
```

**æ‰‹åŠ¨ä¿®å¤MBR**ï¼š
```bash
# å¦‚æœæœ‰åˆ†åŒºè¡¨å¤‡ä»½
sudo dd if=mbr_backup.img of=/dev/sda bs=512 count=1

# ä»…ä¿®å¤åˆ†åŒºè¡¨ï¼ˆä¸å½±å“å¼•å¯¼ä»£ç ï¼‰  
sudo fdisk /dev/sda
# åœ¨fdiskä¸­ï¼š
# p (æ‰“å°åˆ†åŒºè¡¨)
# w (å†™å…¥åˆ†åŒºè¡¨)
```

### 8.4 GPTåˆ†åŒºè¡¨ä¿®å¤


**ğŸ”§ GPTä¿®å¤æ–¹æ³•**
```bash
# ä½¿ç”¨gdiskä¿®å¤GPT

# ç¬¬1æ­¥ï¼šè¿›å…¥gdisk
sudo gdisk /dev/sda

# ç¬¬2æ­¥ï¼šæ¢å¤èœå•
Command: r

# ç¬¬3æ­¥ï¼šå¸¸ç”¨æ¢å¤é€‰é¡¹
# v - éªŒè¯GPTæ•°æ®ç»“æ„
# c - ä»å¤‡ä»½æ¢å¤å¤´éƒ¨
# e - ä»ä¸»GPTæ¢å¤å¤‡ä»½GPT
# d - ä½¿ç”¨ä¸»GPTé‡å»ºå¤‡ä»½GPT

# ç¬¬4æ­¥ï¼šå†™å…¥ä¿®å¤ç»“æœ
Command: w
```

**ä½¿ç”¨partedä¿®å¤**ï¼š
```bash
# ä¿®å¤GPTåˆ†åŒºè¡¨
sudo parted /dev/sda

# åœ¨partedå‘½ä»¤è¡Œä¸­
(parted) rescue å¼€å§‹æ‰‡åŒº ç»“æŸæ‰‡åŒº
# ä¾‹å¦‚ï¼šrescue 1MB 100MB

# æ‰“å°ç¡®è®¤åˆ†åŒº
(parted) print

# é€€å‡ºä¿å­˜
(parted) quit
```

### 8.5 åˆ†åŒºè¡¨ä¿®å¤é¢„é˜²æªæ–½


**âš ï¸ ä¿®å¤å‰å¿…åš**
```bash
# ç¬¬1æ­¥ï¼šå¤‡ä»½æ•´ä¸ªç¡¬ç›˜ï¼ˆå¦‚æœå¯èƒ½ï¼‰
sudo dd if=/dev/sda of=/tmp/disk_backup.img bs=1M

# ç¬¬2æ­¥ï¼šå¤‡ä»½åˆ†åŒºè¡¨
sudo dd if=/dev/sda of=/tmp/mbr_backup.img bs=512 count=1

# ç¬¬3æ­¥ï¼šè®°å½•åˆ†åŒºä¿¡æ¯
sudo fdisk -l /dev/sda > /tmp/partition_info.txt
sudo parted /dev/sda print > /tmp/parted_info.txt
```

**ğŸ¯ ä¿®å¤æˆåŠŸæ ‡å¿—**
```
ä¿®å¤æˆåŠŸçš„éªŒè¯ï¼š
âœ… fdisk -l æ˜¾ç¤ºæ­£å¸¸åˆ†åŒºåˆ—è¡¨
âœ… èƒ½å¤ŸæŒ‚è½½å„ä¸ªåˆ†åŒº
âœ… GRUBèƒ½å¤Ÿæ­£å¸¸å®‰è£…
âœ… ç³»ç»Ÿèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨
```

---

## 9. ğŸ’¿ Live CD/USBæ•‘æ´å¯åŠ¨


### 9.1 Live CD/USBçš„ä½œç”¨


**ğŸ”¸ ä»€ä¹ˆæ˜¯Live CD/USB**
```
Live CD/USB = "ä¾¿æºå¼æ“ä½œç³»ç»Ÿ"
å°±åƒæ€¥æ•‘åŒ…ï¼Œä¸éœ€è¦å®‰è£…å°±èƒ½è¿è¡ŒLinux

æ­£å¸¸å¯åŠ¨ï¼šç¡¬ç›˜ç³»ç»Ÿ â†’ è¿›å…¥å·²å®‰è£…çš„Linux
Liveå¯åŠ¨ï¼šå…‰ç›˜/Uç›˜ â†’ ç›´æ¥è¿è¡Œå®Œæ•´Linuxç³»ç»Ÿ

Liveç³»ç»Ÿçš„ä¼˜åŠ¿ï¼š
â€¢ ä¸ä¾èµ–ç¡¬ç›˜ä¸Šçš„ç³»ç»Ÿ
â€¢ åŒ…å«å®Œæ•´çš„ä¿®å¤å·¥å…·
â€¢ å¯ä»¥è®¿é—®å’Œä¿®å¤æŸåçš„ç¡¬ç›˜
```

### 9.2 åˆ¶ä½œæ•‘æ´å¯åŠ¨ç›˜


**ğŸ”§ åˆ¶ä½œLive USB**
```bash
# Linuxç¯å¢ƒåˆ¶ä½œ
# ç¬¬1æ­¥ï¼šä¸‹è½½ISOé•œåƒï¼ˆæ¨èUbuntu/CentOSï¼‰
wget https://releases.ubuntu.com/20.04/ubuntu-20.04.x-desktop-amd64.iso

# ç¬¬2æ­¥ï¼šç¡®è®¤Uç›˜è®¾å¤‡å
lsblk

# ç¬¬3æ­¥ï¼šå†™å…¥ISOåˆ°Uç›˜ï¼ˆæ³¨æ„è®¾å¤‡åï¼ï¼‰
sudo dd if=ubuntu-20.04.x-desktop-amd64.iso of=/dev/sdb bs=4M status=progress

# ç¬¬4æ­¥ï¼šåŒæ­¥æ•°æ®
sync
```

**Windowsç¯å¢ƒåˆ¶ä½œ**ï¼š
- ä½¿ç”¨Rufuså·¥å…·
- é€‰æ‹©ISOæ–‡ä»¶å’Œç›®æ ‡Uç›˜
- ç‚¹å‡»"å¼€å§‹"åˆ¶ä½œ

### 9.3 æ•‘æ´å¯åŠ¨æ“ä½œ


**ğŸ“‹ æ•‘æ´å¯åŠ¨æµç¨‹**
```
ç¬¬1æ­¥ï¼šBIOSè®¾ç½®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼€æœºæŒ‰ F2/F12/DEL      â”‚
â”‚ è¿›å…¥BIOSè®¾ç½®           â”‚
â”‚ è®¾ç½®USB/CDä¸ºç¬¬ä¸€å¯åŠ¨é¡¹  â”‚
â”‚ ä¿å­˜å¹¶é‡å¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬2æ­¥ï¼šé€‰æ‹©å¯åŠ¨æ¨¡å¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try Ubuntu (æ¨è)      â”‚ â† è¿›å…¥Liveæ¡Œé¢ç¯å¢ƒ
â”‚ Install Ubuntu         â”‚ â† å®‰è£…ç³»ç»Ÿï¼ˆå±é™©ï¼‰
â”‚ Check disk for defects â”‚ â† æ£€æŸ¥å…‰ç›˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬3æ­¥ï¼šè·å¾—å®Œæ•´Linuxç¯å¢ƒ
â€¢ å¯ä»¥ä¸Šç½‘æœç´¢è§£å†³æ–¹æ¡ˆ
â€¢ åŒ…å«å›¾å½¢ç•Œé¢ä¾¿äºæ“ä½œ
â€¢ å†…ç½®å¸¸ç”¨ä¿®å¤å·¥å…·
```

### 9.4 Liveç¯å¢ƒå¸¸ç”¨ä¿®å¤å·¥å…·


**ğŸ› ï¸ å†…ç½®ä¿®å¤å·¥å…·æ¸…å•**
```bash
æ–‡ä»¶ç³»ç»Ÿå·¥å…·ï¼š
fsck     - æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ä¿®å¤
e2fsck   - ext2/3/4æ–‡ä»¶ç³»ç»Ÿä¸“ç”¨
ntfsfix  - NTFSæ–‡ä»¶ç³»ç»Ÿä¿®å¤

åˆ†åŒºå·¥å…·ï¼š  
fdisk    - åˆ†åŒºç®¡ç†
parted   - é«˜çº§åˆ†åŒºå·¥å…·
gparted  - å›¾å½¢åˆ†åŒºå·¥å…·

å¼•å¯¼ä¿®å¤ï¼š
grub-install    - GRUBå®‰è£…
update-grub     - æ›´æ–°GRUBé…ç½®
boot-repair     - å›¾å½¢åŒ–å¼•å¯¼ä¿®å¤å·¥å…·

æ•°æ®æ¢å¤ï¼š
testdisk - åˆ†åŒºè¡¨æ¢å¤
photorec - æ–‡ä»¶æ¢å¤
ddrescue - ç£ç›˜æ•°æ®æ•‘æ´
```

### 9.5 ä½¿ç”¨Live CDä¿®å¤ç³»ç»Ÿ


**ğŸ¯ å…¸å‹ä¿®å¤åœºæ™¯**
```bash
# åœºæ™¯ï¼šæ— æ³•å¯åŠ¨ï¼Œéœ€è¦ä¿®å¤GRUB

# ç¬¬1æ­¥ï¼šLive CDå¯åŠ¨ï¼Œæ‰“å¼€ç»ˆç«¯
sudo -i

# ç¬¬2æ­¥ï¼šæŒ‚è½½æŸåç³»ç»Ÿ
mkdir /mnt/broken-system
mount /dev/sda1 /mnt/broken-system
mount /dev/sda2 /mnt/broken-system/boot  # å¦‚æœbootå•ç‹¬åˆ†åŒº

# ç¬¬3æ­¥ï¼šæŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
mount --bind /dev /mnt/broken-system/dev
mount --bind /proc /mnt/broken-system/proc
mount --bind /sys /mnt/broken-system/sys

# ç¬¬4æ­¥ï¼šè¿›å…¥chrootç¯å¢ƒ
chroot /mnt/broken-system

# ç¬¬5æ­¥ï¼šæ‰§è¡Œä¿®å¤æ“ä½œ
update-grub
grub-install /dev/sda

# ç¬¬6æ­¥ï¼šé€€å‡ºå¹¶é‡å¯
exit
umount -R /mnt/broken-system
reboot
```

**ğŸ“± å›¾å½¢åŒ–ä¿®å¤å·¥å…·**
```
Boot-Repairå·¥å…·ï¼š
sudo add-apt-repository ppa:yannubuntu/boot-repair
sudo apt-get update  
sudo apt-get install boot-repair
sudo boot-repair

ä¼˜ç‚¹ï¼šå›¾å½¢ç•Œé¢ï¼Œæ“ä½œç®€å•
é€‚åˆï¼šæ–°æ‰‹ç”¨æˆ·ï¼Œå¸¸è§å¼•å¯¼é—®é¢˜
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ å¼•å¯¼æ•…éšœåˆ†ç±»ï¼šé…ç½®é”™è¯¯ < æ–‡ä»¶æŸå < åˆ†åŒºè¡¨æŸå < ç¡¬ä»¶æ•…éšœ
ğŸ”¸ GRUB Rescueï¼šæ•‘æ´æ¨¡å¼æ‰‹åŠ¨å¼•å¯¼ï¼Œlsâ†’setâ†’insmodâ†’normal
ğŸ”¸ chrootä¿®å¤ï¼šLive CDç¯å¢ƒä¸‹"ç©¿è¶Š"åˆ°æŸåç³»ç»Ÿè¿›è¡Œä¿®å¤
ğŸ”¸ å¼•å¯¼æ‰‡åŒºï¼šç¡¬ç›˜çš„"å¯åŠ¨æŒ‰é’®"ï¼ŒæŸåéœ€é‡è£…GRUB
ğŸ”¸ å†…æ ¸æ–‡ä»¶ï¼šç³»ç»Ÿ"å¿ƒè„"ï¼ŒåŒ…æ‹¬vmlinuzå’Œinitramfs
ğŸ”¸ åˆ†åŒºè¡¨ï¼šç¡¬ç›˜çš„"åœ°å›¾"ï¼Œè®°å½•åˆ†åŒºä¿¡æ¯
ğŸ”¸ Live CD/USBï¼šä¾¿æºå¼æ€¥æ•‘ç³»ç»Ÿï¼Œä¿®å¤åˆ©å™¨
```

### 10.2 å…³é”®ä¿®å¤æµç¨‹


**ğŸ”¹ æ ‡å‡†ä¿®å¤é¡ºåº**
```
ç¬¬1æ­¥ï¼šå°è¯•GRUB rescueæ‰‹åŠ¨å¼•å¯¼
     â†“ å¤±è´¥
ç¬¬2æ­¥ï¼šLive CDå¯åŠ¨ + chrootä¿®å¤
     â†“ å¤±è´¥  
ç¬¬3æ­¥ï¼šé‡è£…GRUBå¼•å¯¼ç¨‹åº
     â†“ å¤±è´¥
ç¬¬4æ­¥ï¼šä¿®å¤å†…æ ¸å’Œinitramfsæ–‡ä»¶
     â†“ å¤±è´¥
ç¬¬5æ­¥ï¼šä¿®å¤åˆ†åŒºè¡¨ï¼ˆæœ€åæ‰‹æ®µï¼‰
```

**ğŸ”¹ chrootä¿®å¤æ ‡å‡†æµç¨‹**
```
æŒ‚è½½æ ¹åˆ†åŒº â†’ æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ â†’ chrootè¿›å…¥ â†’ æ‰§è¡Œä¿®å¤ â†’ é€€å‡ºéªŒè¯
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ æ•…éšœè¯Šæ–­æ€è·¯**
- **ç—‡çŠ¶åˆ†æ**ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯åˆ¤æ–­æ•…éšœç±»å‹
- **åˆ†çº§å¤„ç†**ï¼šä»ç®€å•åˆ°å¤æ‚é€æ­¥å°è¯•  
- **é¢„é˜²ä¸ºä¸»**ï¼šå®šæœŸå¤‡ä»½é‡è¦å¼•å¯¼æ–‡ä»¶
- **å·¥å…·å‡†å¤‡**ï¼šå¸¸å¤‡Live CD/USBæ•‘æ´ç›˜

**ğŸ”§ å¿…å¤‡ä¿®å¤æŠ€èƒ½**
- èƒ½ä½¿ç”¨GRUB rescueæ‰‹åŠ¨å¼•å¯¼ç³»ç»Ÿ
- æŒæ¡chrootç¯å¢ƒæ­å»ºå’Œä½¿ç”¨
- äº†è§£GRUBé‡è£…çš„ä¸åŒæ–¹æ³•  
- ä¼šä½¿ç”¨Live CDè¿›è¡Œç³»ç»Ÿæ•‘æ´

**ğŸ’¡ ç»éªŒæ€»ç»“**
```
ä¿®å¤æˆåŠŸç‡æ’åºï¼š
GRUB rescue > chrootä¿®å¤ > GRUBé‡è£… > å†…æ ¸ä¿®å¤ > åˆ†åŒºè¡¨ä¿®å¤

é£é™©ç¨‹åº¦æ’åºï¼š  
é…ç½®ä¿®å¤ < æ–‡ä»¶ä¿®å¤ < å¼•å¯¼é‡è£… < åˆ†åŒºè¡¨ä¿®å¤

å»ºè®®åŸåˆ™ï¼š
â€¢ å…ˆå°è¯•é£é™©å°çš„æ–¹æ³•
â€¢ é‡è¦æ•°æ®åŠ¡å¿…å…ˆå¤‡ä»½
â€¢ ä¸ç¡®å®šçš„æ“ä½œå…ˆåœ¨æµ‹è¯•ç¯å¢ƒç»ƒä¹ 
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- å¼•å¯¼æ•…éšœä¸è¦æ…Œï¼Œæ•‘æ´æ¨¡å¼è¯•ä¸€è¯•
- Live CDæ˜¯ä¸ªå®ï¼Œchrootä¿®å¤å°‘ä¸äº†
- GRUBé‡è£…è§£å¤§å¿§ï¼Œå†…æ ¸æ–‡ä»¶åˆ«å¿˜ä¿®
- åˆ†åŒºè¡¨åæœ€éº»çƒ¦ï¼Œæ•°æ®å¤‡ä»½æ˜¯å…³é”®