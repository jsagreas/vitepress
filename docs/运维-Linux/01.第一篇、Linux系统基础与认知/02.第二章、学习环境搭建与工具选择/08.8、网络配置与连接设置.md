---
title: 8、网络配置与连接设置
---
## 📚 目录

1. [虚拟网络模式详解](#1-虚拟网络模式详解)
2. [静态IP配置方法](#2-静态IP配置方法)
3. [DNS服务器设置](#3-DNS服务器设置)
4. [代理服务器配置](#4-代理服务器配置)
5. [防火墙端口管理](#5-防火墙端口管理)
6. [SSH服务配置](#6-SSH服务配置)
7. [远程桌面连接](#7-远程桌面连接)
8. [网络故障诊断](#8-网络故障诊断)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🌐 虚拟网络模式详解


### 1.1 网络模式基本概念


**什么是虚拟网络模式？**
> 虚拟网络模式决定了虚拟机如何与外界通信，就像决定你家的网络连接方式一样

```
物理世界类比：
NAT模式    → 你通过家长的手机上网（共享网络）
桥接模式   → 你有自己独立的网线和IP地址
仅主机模式 → 只能和家里人聊天，不能上外网
```

### 1.2 三种网络模式对比


| 网络模式 | **能否上网** | **外网能否访问虚拟机** | **虚拟机间能否通信** | **使用场景** |
|---------|------------|-------------------|-------------------|-------------|
| 🔗 **NAT模式** | `✅ 可以` | `❌ 不能` | `✅ 可以` | `日常学习、软件测试` |
| 🌉 **桥接模式** | `✅ 可以` | `✅ 可以` | `✅ 可以` | `服务器搭建、团队开发` |
| 🏠 **仅主机** | `❌ 不能` | `❌ 不能` | `✅ 可以` | `安全测试、内部实验` |

### 1.3 NAT网络模式详解


**💡 NAT模式工作原理**
```
你的电脑（宿主机）192.168.1.100
        ↓
   虚拟NAT设备（网关）
        ↓
虚拟机 192.168.66.130

就像：家里只有一根网线，但多个设备通过路由器共享上网
```

**🔸 NAT模式特点**
- **优点**：配置简单，安全性高，不占用物理网络IP
- **缺点**：外网无法主动访问虚拟机
- **适用场景**：学习Linux基础操作、软件开发测试

**配置示例（VMware）**：
```
虚拟机设置 → 网络适配器 → NAT模式
自动获取IP：192.168.66.x（VMware默认网段）
网关地址：192.168.66.2
```

### 1.4 桥接网络模式详解


**💡 桥接模式工作原理**
```
路由器 192.168.1.1
    ├── 你的电脑 192.168.1.100
    └── 虚拟机   192.168.1.101

就像：虚拟机直接连了一根网线到路由器
```

**🔸 桥接模式特点**
- **优点**：虚拟机获得独立IP，外网可以直接访问
- **缺点**：占用物理网络IP，安全性相对较低
- **适用场景**：搭建Web服务器、数据库服务器

**⚠️ 配置注意事项**
```
1. 确保路由器有足够的IP地址分配
2. 防火墙设置要允许虚拟机通信
3. 适合有公网IP或局域网服务器的场景
```

### 1.5 仅主机网络模式


**💡 仅主机模式工作原理**
```
你的电脑（宿主机）
    ↕ 虚拟网络连接
虚拟机A ↔ 虚拟机B

就像：几台电脑用网线直连，但都没连外网
```

**🔸 适用场景**
- **安全测试**：病毒分析、恶意软件测试
- **集群实验**：搭建多台服务器集群
- **隔离环境**：不希望虚拟机访问外网

---

## 2. 🔧 静态IP配置方法


### 2.1 为什么要配置静态IP


**动态IP的问题**：
```
今天虚拟机IP：192.168.1.100
明天虚拟机IP：192.168.1.150  ← IP变了！

问题：
- SSH连接断开
- 服务器访问失效  
- 开发环境混乱
```

**静态IP的好处**：
- **IP地址固定**：重启后IP不变
- **方便管理**：知道确切的访问地址
- **服务稳定**：Web服务、数据库服务地址不变

### 2.2 CentOS/RHEL静态IP配置


**📝 配置文件位置**：`/etc/sysconfig/network-scripts/ifcfg-eth0`

```bash
# 1. 编辑网络配置文件
sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0

# 2. 配置内容（根据实际情况修改）
TYPE=Ethernet
BOOTPROTO=static          # 改为static（静态）
NAME=eth0
DEVICE=eth0
ONBOOT=yes               # 开机自动启用
IPADDR=192.168.1.100     # 静态IP地址
NETMASK=255.255.255.0    # 子网掩码
GATEWAY=192.168.1.1      # 网关地址
DNS1=8.8.8.8            # DNS服务器
DNS2=8.8.4.4            # 备用DNS

# 3. 重启网络服务
sudo systemctl restart network
```

### 2.3 Ubuntu/Debian静态IP配置


**📝 现代Ubuntu（18.04+）使用Netplan**：

```bash
# 1. 编辑配置文件
sudo vi /etc/netplan/01-netcfg.yaml

# 2. 配置内容
network:
  version: 2
  ethernets:
    eth0:                    # 网卡名称
      dhcp4: false          # 关闭DHCP
      addresses:
        - 192.168.1.100/24  # IP地址/子网掩码
      gateway4: 192.168.1.1 # 网关
      nameservers:
        addresses:
          - 8.8.8.8         # DNS服务器
          - 8.8.4.4

# 3. 应用配置
sudo netplan apply
```

**📝 传统Ubuntu配置方法**：
```bash
# 编辑 /etc/network/interfaces
auto eth0
iface eth0 inet static
address 192.168.1.100
netmask 255.255.255.0
gateway 192.168.1.1
dns-nameservers 8.8.8.8 8.8.4.4
```

### 2.4 IP地址规划建议


**🎯 IP地址选择原则**
```
局域网常用网段：
- 192.168.1.x    (家庭网络常用)
- 192.168.0.x    (企业网络常用)  
- 10.0.0.x       (大型网络常用)

选择建议：
- 避开路由器IP（通常是.1）
- 避开DHCP范围（通常是.100-200）
- 选择.50-.99范围相对安全
```

**💡 实用技巧**：
```bash
# 查看当前网络信息
ip addr show                # 查看网卡信息
ip route show               # 查看路由信息
ping 192.168.1.1           # 测试网关连通性
```

---

## 3. 🔍 DNS服务器设置


### 3.1 DNS服务器基本概念


**什么是DNS？**
> DNS就像互联网的电话簿，把网站名字翻译成IP地址

```
你访问：www.baidu.com
DNS翻译：14.215.177.39
浏览器连接：14.215.177.39

就像：你说"找张三"，电话簿告诉你张三的电话号码
```

### 3.2 常用DNS服务器推荐


| DNS提供商 | **主DNS** | **备用DNS** | **特点** |
|-----------|----------|------------|---------|
| 🌐 **Google** | `8.8.8.8` | `8.8.4.4` | `全球通用，稳定快速` |
| 🇨🇳 **阿里云** | `223.5.5.5` | `223.6.6.6` | `国内访问快，智能解析` |
| 🇨🇳 **腾讯云** | `119.29.29.29` | `182.254.116.116` | `游戏优化，速度快` |
| 🔒 **Cloudflare** | `1.1.1.1` | `1.0.0.1` | `隐私保护，安全性高` |

### 3.3 DNS配置方法


**方法一：修改resolv.conf（临时生效）**
```bash
# 编辑DNS配置文件
sudo vi /etc/resolv.conf

# 添加DNS服务器（按优先级排序）
nameserver 223.5.5.5     # 阿里云DNS（国内快）
nameserver 8.8.8.8       # Google DNS（备用）
nameserver 114.114.114.114 # 114DNS（备用）

# 注意：重启后可能失效
```

**方法二：网络配置文件（永久生效）**
```bash
# CentOS系统
sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0
# 添加或修改
DNS1=223.5.5.5
DNS2=8.8.8.8

# Ubuntu系统（Netplan）
sudo vi /etc/netplan/01-netcfg.yaml
# 在nameservers部分添加
nameservers:
  addresses:
    - 223.5.5.5
    - 8.8.8.8
```

### 3.4 DNS测试和验证


**🔧 测试DNS是否工作正常**
```bash
# 测试域名解析
nslookup www.baidu.com      # 查看域名对应的IP
dig www.google.com          # 详细的DNS查询信息
host www.github.com         # 简单的域名解析

# 测试连通性
ping www.baidu.com          # ping网站测试网络
curl -I http://www.baidu.com # 测试HTTP访问
```

**⚠️ 常见DNS问题**
```
问题：能ping通IP，不能访问网站
原因：DNS配置错误
解决：检查/etc/resolv.conf文件

问题：DNS解析很慢
原因：DNS服务器距离远或不稳定
解决：换成本地运营商或阿里云DNS
```

---

## 4. 🌐 代理服务器配置


### 4.1 代理服务器基本概念


**什么是代理服务器？**
> 代理服务器就像是网络世界的"中介"，帮你去访问外网

```
你的电脑 → 代理服务器 → 目标网站
        ↑
    通过代理访问，隐藏真实IP
```

**💡 代理的作用**
- **突破网络限制**：访问被屏蔽的网站
- **提高访问速度**：缓存常用内容
- **隐私保护**：隐藏真实IP地址
- **企业网络管理**：统一管理员工上网

### 4.2 临时代理设置


**🔧 命令行临时代理**
```bash
# 设置HTTP代理
export http_proxy=http://代理IP:端口
export https_proxy=http://代理IP:端口

# 示例
export http_proxy=http://192.168.1.10:8080
export https_proxy=http://192.168.1.10:8080

# 验证代理设置
echo $http_proxy
curl -I http://www.google.com    # 测试是否通过代理访问
```

**取消代理设置**
```bash
unset http_proxy
unset https_proxy
# 或者
export http_proxy=""
export https_proxy=""
```

### 4.3 永久代理配置


**🔸 系统级代理配置**
```bash
# 编辑环境变量文件
sudo vi /etc/environment

# 添加代理配置
http_proxy="http://192.168.1.10:8080"
https_proxy="http://192.168.1.10:8080"
no_proxy="localhost,127.0.0.1,*.local"

# 重新加载配置
source /etc/environment
```

**🔸 用户级代理配置**
```bash
# 编辑用户配置文件
vi ~/.bashrc

# 添加代理设置
export http_proxy=http://192.168.1.10:8080
export https_proxy=http://192.168.1.10:8080

# 重新加载配置
source ~/.bashrc
```

### 4.4 应用程序代理配置


**📦 包管理器代理设置**
```bash
# yum代理配置
sudo vi /etc/yum.conf
# 添加
proxy=http://192.168.1.10:8080

# apt代理配置  
sudo vi /etc/apt/apt.conf
# 添加
Acquire::http::Proxy "http://192.168.1.10:8080";
Acquire::https::Proxy "http://192.168.1.10:8080";

# wget代理配置
vi ~/.wgetrc
# 添加
http_proxy = http://192.168.1.10:8080
https_proxy = http://192.168.1.10:8080
```

---

## 5. 🛡️ 防火墙端口管理


### 5.1 防火墙基本概念


**什么是防火墙？**
> 防火墙就像是你家的门卫，决定哪些人（数据包）可以进出

```
外网请求 → 防火墙检查 → 允许/拒绝 → 服务器

就像：快递员要进小区，门卫检查后才能放行
```

### 5.2 firewalld防火墙管理（CentOS 7+）


**🔧 防火墙基本操作**
```bash
# 查看防火墙状态
sudo systemctl status firewalld

# 启动/停止/重启防火墙
sudo systemctl start firewalld
sudo systemctl stop firewalld  
sudo systemctl restart firewalld

# 开机自启动
sudo systemctl enable firewalld
```

**🔓 端口开放操作**
```bash
# 查看已开放端口
sudo firewall-cmd --list-ports

# 开放单个端口（临时）
sudo firewall-cmd --add-port=80/tcp
sudo firewall-cmd --add-port=22/ssh

# 开放端口（永久）
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --reload    # 重新加载配置

# 开放端口范围
sudo firewall-cmd --permanent --add-port=8000-8080/tcp
```

**🚫 关闭端口**
```bash
# 关闭端口
sudo firewall-cmd --permanent --remove-port=80/tcp
sudo firewall-cmd --reload
```

### 5.3 iptables防火墙管理（传统方式）


**🔧 基本iptables操作**
```bash
# 查看当前规则
sudo iptables -L -n

# 开放端口（允许进入）
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# 保存规则（CentOS）
sudo service iptables save

# 保存规则（Ubuntu）
sudo iptables-save > /etc/iptables/rules.v4
```

### 5.4 常用端口开放示例


**📝 Web服务器端口配置**
```bash
# HTTP服务（端口80）
sudo firewall-cmd --permanent --add-service=http

# HTTPS服务（端口443）  
sudo firewall-cmd --permanent --add-service=https

# SSH服务（端口22）
sudo firewall-cmd --permanent --add-service=ssh

# 自定义端口（如8080）
sudo firewall-cmd --permanent --add-port=8080/tcp

# 应用配置
sudo firewall-cmd --reload
```

**⚠️ 安全建议**
```
1. 只开放必要的端口
2. 更改SSH默认端口（22 → 其他端口）
3. 定期检查开放端口
4. 使用白名单策略（只允许特定IP访问）
```

---

## 6. 🔐 SSH服务配置


### 6.1 SSH服务基本概念


**什么是SSH？**
> SSH就像是网络版的"遥控器"，让你远程操作Linux服务器

```
你的电脑 ---SSH连接---> Linux服务器
   ↑                        ↑
在家里操作              在机房或云端

就像：在家里遥控办公室的电脑
```

**🔸 SSH的优势**
- **安全性高**：数据加密传输
- **功能强大**：命令行操作、文件传输
- **跨平台**：Windows、Mac、Linux都支持
- **轻量级**：占用资源少

### 6.2 SSH服务安装与启动


**📦 安装SSH服务器**
```bash
# CentOS/RHEL
sudo yum install openssh-server

# Ubuntu/Debian  
sudo apt update
sudo apt install openssh-server

# 检查是否安装成功
ssh -V
```

**🔧 启动SSH服务**
```bash
# 启动SSH服务
sudo systemctl start sshd

# 查看服务状态
sudo systemctl status sshd

# 开机自启动
sudo systemctl enable sshd

# 检查SSH端口是否开放
sudo netstat -tlnp | grep :22
```

### 6.3 SSH基本连接方法


**🔌 从客户端连接SSH**
```bash
# 基本连接语法
ssh 用户名@服务器IP

# 实际示例
ssh root@192.168.1.100        # 以root用户连接
ssh student@192.168.1.100     # 以普通用户连接

# 指定端口连接
ssh -p 2222 root@192.168.1.100
```

**🗝️ 首次连接的密钥确认**
```bash
# 首次连接会提示
The authenticity of host '192.168.1.100' can't be established.
RSA key fingerprint is xx:xx:xx...
Are you sure you want to continue connecting (yes/no)? 

# 输入 yes 确认
# 然后输入密码
```

### 6.4 SSH安全配置


**📝 修改SSH配置文件**
```bash
# 编辑SSH配置文件
sudo vi /etc/ssh/sshd_config

# 重要安全配置项
Port 2222                    # 更改默认端口（推荐）
PermitRootLogin no          # 禁止root直接登录
PasswordAuthentication yes   # 允许密码登录
PubkeyAuthentication yes    # 允许密钥登录
MaxAuthTries 3              # 最多尝试3次密码

# 重启SSH服务使配置生效
sudo systemctl restart sshd
```

**🔐 设置密钥登录（更安全）**
```bash
# 1. 在客户端生成密钥对
ssh-keygen -t rsa -b 4096

# 2. 将公钥复制到服务器
ssh-copy-id user@192.168.1.100

# 3. 测试密钥登录
ssh user@192.168.1.100    # 应该不需要输入密码

# 4. 禁用密码登录（可选）
sudo vi /etc/ssh/sshd_config
# 修改：PasswordAuthentication no
```

### 6.5 SSH实用技巧


**📁 文件传输**
```bash
# scp命令传输文件
scp 本地文件 user@服务器:/远程路径
scp user@服务器:/远程文件 本地路径

# 示例
scp test.txt root@192.168.1.100:/home/
scp root@192.168.1.100:/var/log/messages ./

# 传输目录
scp -r 目录名 user@服务器:/路径
```

**⚡ 连接优化**
```bash
# 创建SSH配置文件简化连接
vi ~/.ssh/config

# 添加配置
Host myserver
    HostName 192.168.1.100
    User root
    Port 2222

# 现在可以简单连接
ssh myserver    # 等同于 ssh -p 2222 root@192.168.1.100
```

---

## 7. 🖥️ 远程桌面连接


### 7.1 远程桌面基本概念


**什么是远程桌面？**
> 远程桌面让你在一台电脑上看到并操作另一台电脑的图形界面

```
你的电脑屏幕显示：
┌─────────────────────────────────┐
│ [远程Linux桌面]                  │
│  📁 文件管理器  🌐 浏览器       │  
│  ⚙️ 设置        📝 文本编辑器   │
│                                 │
└─────────────────────────────────┘

就像：在自己电脑上操作远程服务器的桌面
```

### 7.2 VNC远程桌面配置


**📦 安装VNC服务器**
```bash
# CentOS安装
sudo yum groupinstall "GNOME Desktop"
sudo yum install tigervnc-server

# Ubuntu安装
sudo apt update
sudo apt install ubuntu-desktop-minimal
sudo apt install tightvncserver
```

**🔧 配置VNC服务**
```bash
# 1. 以普通用户运行VNC（不要用root）
vncserver :1    # 启动第一个VNC会话

# 2. 第一次运行会要求设置密码
You will require a password to access your desktops.
Password: [输入6-8位密码]
Verify: [再次输入密码]

# 3. 查看VNC进程
vncserver -list
```

**🖥️ VNC配置优化**
```bash
# 停止VNC服务
vncserver -kill :1

# 编辑VNC启动脚本
vi ~/.vnc/xstartup

# 添加以下内容
#!/bin/sh
unset SESSION_MANAGER
exec /etc/X11/xinit/xinitrc

# 给脚本执行权限
chmod +x ~/.vnc/xstartup

# 重新启动VNC
vncserver :1 -geometry 1024x768
```

### 7.3 Windows连接Linux VNC


**📥 VNC客户端选择**
- **VNC Viewer**（推荐）：免费，跨平台
- **TightVNC**：开源，功能丰富
- **RealVNC**：商业版，功能强大

**🔌 连接步骤**
```
1. 在VNC Viewer中输入服务器地址
   地址格式：192.168.1.100:5901
   
2. 输入VNC密码
   
3. 连接成功后看到Linux桌面
```

### 7.4 XRDP远程桌面（Windows风格）


**📦 安装XRDP**
```bash
# Ubuntu安装
sudo apt install xrdp

# 启动XRDP服务
sudo systemctl start xrdp
sudo systemctl enable xrdp

# 检查服务状态
sudo systemctl status xrdp
```

**🔧 XRDP配置**
```bash
# 开放3389端口
sudo firewall-cmd --permanent --add-port=3389/tcp
sudo firewall-cmd --reload

# 配置用户会话
echo gnome-session > ~/.xsession
```

**🖥️ Windows连接XRDP**
```
1. 打开Windows远程桌面连接
   开始菜单 → 运行 → mstsc

2. 输入Linux服务器IP：192.168.1.100

3. 输入Linux用户名和密码

4. 连接成功后看到Linux桌面
```

### 7.5 远程桌面优化建议


**⚡ 性能优化**
```bash
# 降低颜色深度提高速度
vncserver :1 -depth 16 -geometry 1024x768

# 关闭不必要的桌面效果
# 使用轻量级桌面环境（如XFCE、LXDE）
sudo apt install xfce4
```

**🔒 安全建议**
```
1. 更改VNC默认端口（5901 → 其他端口）
2. 设置强密码（8位以上）
3. 使用SSH隧道加密VNC连接
4. 限制允许连接的IP地址
```

---

## 8. 🔧 网络故障诊断


### 8.1 网络故障诊断思路


**🎯 网络故障排查流程**
```
第1步：检查物理连接
第2步：检查网卡配置  
第3步：检查IP配置
第4步：检查路由配置
第5步：检查DNS配置
第6步：检查防火墙设置
第7步：检查服务状态
```

### 8.2 基本网络诊断命令


**🔍 查看网络接口状态**
```bash
# 查看所有网络接口
ip addr show                 # 现代Linux推荐
ifconfig                    # 传统命令

# 查看特定网卡
ip addr show eth0
ifconfig eth0

# 查看网卡是否启用
ip link show                # 查看链路状态
```

**🌐 测试网络连通性**
```bash
# ping命令测试连通性
ping 127.0.0.1             # 测试本机回环
ping 192.168.1.1           # 测试网关
ping 8.8.8.8               # 测试外网IP
ping www.baidu.com          # 测试域名解析

# 限制ping次数
ping -c 4 www.google.com    # 只ping 4次

# traceroute跟踪路由
traceroute www.baidu.com    # 查看数据包路径
```

### 8.3 网络配置诊断


**📋 检查IP和路由配置**
```bash
# 查看IP配置
ip addr show                # 查看IP地址配置
ip route show               # 查看路由表

# 查看网关配置
route -n                    # 查看路由表（传统命令）
netstat -rn                 # 另一种查看路由的方法

# 检查DNS配置
cat /etc/resolv.conf        # 查看DNS服务器设置
nslookup www.baidu.com      # 测试DNS解析
```

**🔧 网络服务检查**
```bash
# 查看监听端口
netstat -tlnp               # 查看TCP监听端口
netstat -ulnp               # 查看UDP监听端口
ss -tlnp                    # 现代替代命令

# 查看网络连接
netstat -an                 # 查看所有连接
ss -an                      # 现代替代命令
```

### 8.4 常见网络问题排查


**❌ 问题1：无法上网**
```bash
# 排查步骤
1. ping 127.0.0.1          # 测试本机网络栈
2. ping 192.168.1.1        # 测试网关连通性
3. ping 8.8.8.8           # 测试外网连通性
4. ping www.baidu.com      # 测试DNS解析

# 根据哪步失败来定位问题
```

**❌ 问题2：SSH连接被拒绝**
```bash
# 检查SSH服务状态
sudo systemctl status sshd

# 检查SSH端口
sudo netstat -tlnp | grep :22

# 检查防火墙
sudo firewall-cmd --list-services
sudo firewall-cmd --list-ports

# 检查SSH配置
sudo vi /etc/ssh/sshd_config
```

**❌ 问题3：DNS解析失败**
```bash
# 检查DNS配置
cat /etc/resolv.conf

# 手动测试DNS
nslookup www.baidu.com 8.8.8.8

# 临时更改DNS
echo "nameserver 8.8.8.8" | sudo tee /etc/resolv.conf
```

### 8.5 网络性能测试


**📊 网络速度测试**
```bash
# 使用wget测试下载速度
wget -O /dev/null http://speedtest.tele2.net/100MB.zip

# 使用curl测试连接时间
curl -o /dev/null -s -w "总时间: %{time_total}s\n" http://www.baidu.com

# 局域网测试（需要安装iperf3）
# 服务器端：iperf3 -s
# 客户端：iperf3 -c 服务器IP
```

**🔧 实用诊断脚本**
```bash
#!/bin/bash
# 网络诊断脚本
echo "=== 网络诊断开始 ==="
echo "1. 检查网卡状态"
ip addr show | grep -E "^[0-9]|inet "

echo "2. 检查网关连通性"
ping -c 3 $(ip route | grep default | awk '{print $3}')

echo "3. 检查DNS解析"
nslookup www.baidu.com

echo "4. 检查开放端口"
ss -tlnp

echo "=== 诊断完成 ==="
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 虚拟网络模式：NAT(共享上网)、桥接(独立IP)、仅主机(内网)
🔸 静态IP配置：固定IP地址，便于管理和访问
🔸 DNS服务器：将域名翻译成IP地址的"电话簿"
🔸 防火墙管理：控制网络流量进出的"门卫"
🔸 SSH远程登录：安全的远程命令行操作方式
🔸 远程桌面：图形化的远程操作界面
🔸 故障诊断：系统化排查网络问题的方法
```

### 9.2 重要配置文件记忆


| 配置类型 | **配置文件位置** | **作用说明** |
|---------|----------------|-------------|
| 🌐 **网络配置** | `/etc/sysconfig/network-scripts/ifcfg-eth0` | `CentOS网卡配置` |
| 🌐 **Ubuntu网络** | `/etc/netplan/01-netcfg.yaml` | `Ubuntu 18.04+网络配置` |
| 🔍 **DNS配置** | `/etc/resolv.conf` | `DNS服务器设置` |
| 🔐 **SSH配置** | `/etc/ssh/sshd_config` | `SSH服务器配置` |
| 🛡️ **防火墙** | `firewall-cmd命令` | `CentOS 7+防火墙管理` |

### 9.3 常用命令速查


**🔧 网络状态查看**
```bash
ip addr show                # 查看网卡IP信息
ip route show              # 查看路由表
ping 目标地址               # 测试网络连通性
nslookup 域名              # 测试DNS解析
ss -tlnp                   # 查看监听端口
```

**🔐 SSH相关命令**
```bash
ssh user@IP               # SSH远程登录
scp file user@IP:/path    # 通过SSH传输文件
ssh-keygen                # 生成SSH密钥
ssh-copy-id user@IP       # 复制公钥到服务器
```

**🛡️ 防火墙管理**
```bash
firewall-cmd --list-ports         # 查看开放端口
firewall-cmd --add-port=80/tcp    # 开放端口
firewall-cmd --reload             # 重新加载配置
systemctl status firewalld       # 查看防火墙状态
```

### 9.4 故障排查思路


**🎯 网络问题排查顺序**
```
物理层：网线是否连接？网卡是否启用？
网络层：IP地址是否正确？网关是否可达？
传输层：端口是否开放？服务是否运行？
应用层：DNS是否正常？应用配置是否正确？
```

### 9.5 安全配置建议


**🔒 网络安全最佳实践**
- **更改默认端口**：SSH端口从22改为其他端口
- **禁用root登录**：使用普通用户+sudo权限
- **设置强密码**：8位以上，包含数字、字母、符号
- **开启密钥认证**：使用SSH密钥替代密码登录
- **最小权限原则**：只开放必需的端口和服务
- **定期更新系统**：及时安装安全补丁

**💡 学习建议**
- **动手实践**：在虚拟机中反复练习配置
- **记录配置**：建立自己的配置文档和脚本
- **理解原理**：不仅知道怎么做，还要知道为什么
- **关注安全**：始终以安全为第一考虑因素

**核心记忆口诀**：
- 网络配置三要素：IP地址、网关、DNS
- SSH安全三原则：改端口、禁root、用密钥  
- 故障排查四层次：物理、网络、传输、应用
- 防火墙管理两关键：开放服务、限制访问