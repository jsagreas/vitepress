---
title: 10ã€å¼•å¯¼æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§
---
## ğŸ“š ç›®å½•

1. [å¼•å¯¼æ€§èƒ½åˆ†æåŸºç¡€](#1-å¼•å¯¼æ€§èƒ½åˆ†æåŸºç¡€)
2. [å¯åŠ¨æ—¶é—´æµ‹é‡å·¥å…·](#2-å¯åŠ¨æ—¶é—´æµ‹é‡å·¥å…·)
3. [GRUB2æ€§èƒ½ä¼˜åŒ–](#3-GRUB2æ€§èƒ½ä¼˜åŒ–)
4. [initramfsä¼˜åŒ–ç­–ç•¥](#4-initramfsä¼˜åŒ–ç­–ç•¥)
5. [ç³»ç»Ÿå¯åŠ¨ä¼˜åŒ–](#5-ç³»ç»Ÿå¯åŠ¨ä¼˜åŒ–)
6. [æ€§èƒ½ç“¶é¢ˆè¯†åˆ«](#6-æ€§èƒ½ç“¶é¢ˆè¯†åˆ«)
7. [å¿«é€Ÿå¯åŠ¨æŠ€æœ¯](#7-å¿«é€Ÿå¯åŠ¨æŠ€æœ¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ å¼•å¯¼æ€§èƒ½åˆ†æåŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯å¼•å¯¼æ€§èƒ½


**ğŸ’¡ é€šä¿—ç†è§£**ï¼š
å¼•å¯¼æ€§èƒ½å°±åƒ"å¼€æœºé€Ÿåº¦"ï¼ŒåŒ…æ‹¬ï¼š
- ä»æŒ‰ç”µæºé”®åˆ°çœ‹åˆ°ç™»å½•ç•Œé¢çš„æ—¶é—´
- å„ä¸ªå¯åŠ¨é˜¶æ®µæ¶ˆè€—çš„æ—¶é—´
- ç³»ç»Ÿèµ„æºåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­çš„ä½¿ç”¨æƒ…å†µ

```
å®Œæ•´å¯åŠ¨æ—¶é—´çº¿ï¼š
æŒ‰ç”µæº â†’ BIOS/UEFI â†’ å¼•å¯¼å™¨ â†’ å†…æ ¸ â†’ ç³»ç»ŸæœåŠ¡ â†’ æ¡Œé¢
  â†“        â†“         â†“       â†“        â†“         â†“
 ç¡¬ä»¶     å›ºä»¶æ£€æµ‹    GRUB    Linux   systemd   GUI
```

### 1.2 å¯åŠ¨é˜¶æ®µåˆ†è§£


**ğŸ”¢ å¯åŠ¨è¿‡ç¨‹è¯¦è§£**ï¼š

```
å¯åŠ¨é˜¶æ®µæ—¶é—´åˆ†å¸ƒï¼ˆå…¸å‹æ¡Œé¢ç³»ç»Ÿï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BIOS/UEFI POST    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 8s â”‚
â”‚ å¼•å¯¼å™¨åŠ è½½        â”‚â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 2s â”‚  
â”‚ å†…æ ¸åˆå§‹åŒ–        â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 4s â”‚
â”‚ initramfså¤„ç†     â”‚â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 3s â”‚
â”‚ systemdå¯åŠ¨       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 6s â”‚
â”‚ ç”¨æˆ·ç©ºé—´æœåŠ¡      â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 5s â”‚
â”‚ æ¡Œé¢ç¯å¢ƒå¯åŠ¨      â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 4s â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
æ€»æ—¶é—´: ~32ç§’
```

**ğŸ“Š å„é˜¶æ®µä¼˜åŒ–æ½œåŠ›**ï¼š

| **å¯åŠ¨é˜¶æ®µ** | **å…¸å‹è€—æ—¶** | **ä¼˜åŒ–æ½œåŠ›** | **ä¼˜åŒ–éš¾åº¦** |
|-------------|-------------|-------------|-------------|
| BIOS/UEFI | 5-15ç§’ | ä½ ğŸ“‰ | é«˜ ğŸ”’ |
| å¼•å¯¼å™¨ | 1-5ç§’ | ä¸­ ğŸ“Š | ä½ ğŸ”“ |
| å†…æ ¸åŠ è½½ | 2-8ç§’ | é«˜ ğŸ“ˆ | ä¸­ ğŸ”§ |
| initramfs | 1-10ç§’ | é«˜ ğŸ“ˆ | ä½ ğŸ”“ |
| ç³»ç»ŸæœåŠ¡ | 5-20ç§’ | é«˜ ğŸ“ˆ | ä¸­ ğŸ”§ |

### 1.3 æ€§èƒ½ç›®æ ‡è®¾å®š


**ğŸ¯ åˆç†çš„æ€§èƒ½ç›®æ ‡**ï¼š

```
å¯åŠ¨æ—¶é—´ç›®æ ‡ï¼ˆä»GRUBåˆ°æ¡Œé¢ï¼‰ï¼š
å¿«é€ŸSSDç³»ç»Ÿ:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 8-12ç§’
æ™®é€šSSDç³»ç»Ÿ:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 12-20ç§’  
æœºæ¢°ç¡¬ç›˜ç³»ç»Ÿ:    â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 20-40ç§’
è€æ—§ç³»ç»Ÿ:        â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40-60ç§’

å½±å“å› ç´ ï¼š
â€¢ ç¡¬ç›˜ç±»å‹ï¼šSSD vs æœºæ¢°ç¡¬ç›˜
â€¢ CPUæ€§èƒ½ï¼šå¤„ç†å™¨é€Ÿåº¦å’Œæ ¸å¿ƒæ•°
â€¢ å†…å­˜å¤§å°ï¼šå½±å“ç¼“å­˜å’Œå¹¶å‘åŠ è½½
â€¢ ç³»ç»Ÿé…ç½®ï¼šå®‰è£…çš„æœåŠ¡å’Œè½¯ä»¶æ•°é‡
```

---

## 2. ğŸ“Š å¯åŠ¨æ—¶é—´æµ‹é‡å·¥å…·


### 2.1 systemd-analyze æ ¸å¿ƒå·¥å…·


**ğŸ’¡ é€šä¿—ç†è§£**ï¼š
systemd-analyzeå°±åƒç³»ç»Ÿå¯åŠ¨çš„"ä½“æ£€æŠ¥å‘Š"ï¼š
- å‘Šè¯‰ä½ å“ªä¸ªéƒ¨åˆ†æœ€æ…¢
- æ˜¾ç¤ºå„ä¸ªæœåŠ¡å¯åŠ¨æ—¶é—´
- å¸®ä½ æ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆ

**ğŸ”¢ åŸºæœ¬ä½¿ç”¨æ–¹æ³•**ï¼š

1ï¸âƒ£ **æ€»ä½“å¯åŠ¨æ—¶é—´**ï¼š
```bash
# æŸ¥çœ‹å¯åŠ¨æ€»æ—¶é—´
systemd-analyze

# è¾“å‡ºç¤ºä¾‹ï¼š
# Startup finished in 2.547s (firmware) + 1.423s (loader) + 
# 1.834s (kernel) + 4.712s (userspace) = 10.516s
```

2ï¸âƒ£ **è¯¦ç»†æ—¶é—´åˆ†æ**ï¼š
```bash
# æ˜¾ç¤ºå„æœåŠ¡å¯åŠ¨æ—¶é—´
systemd-analyze blame

# è¾“å‡ºç¤ºä¾‹ï¼š
# 3.201s NetworkManager.service
# 2.845s systemd-logind.service  
# 1.923s bluetooth.service
# 1.456s gdm.service
```

3ï¸âƒ£ **æœåŠ¡ä¾èµ–å…³ç³»**ï¼š
```bash
# ç”Ÿæˆå¯åŠ¨æµç¨‹å›¾
systemd-analyze plot > boot-analysis.svg

# æŸ¥çœ‹å…³é”®è·¯å¾„
systemd-analyze critical-chain
```

### 2.2 æ—¶é—´æµ‹é‡å®æˆ˜


**ğŸ“± å®é™…æµ‹é‡ç¤ºä¾‹**ï¼š

```bash
# å®Œæ•´çš„å¯åŠ¨åˆ†ææµç¨‹

# 1. åŸºç¡€æ—¶é—´ç»Ÿè®¡
echo "=== å¯åŠ¨æ—¶é—´æ€»è§ˆ ==="
systemd-analyze

# 2. æœ€è€—æ—¶çš„10ä¸ªæœåŠ¡
echo "=== è€—æ—¶æœ€å¤šçš„æœåŠ¡ ==="
systemd-analyze blame | head -10

# 3. å…³é”®å¯åŠ¨è·¯å¾„
echo "=== å…³é”®å¯åŠ¨è·¯å¾„ ==="
systemd-analyze critical-chain

# 4. æœåŠ¡å¯åŠ¨æ—¶é—´è¯¦æƒ…
echo "=== æœåŠ¡æ—¶é—´è¯¦æƒ… ==="
systemd-analyze time
```

**âš ï¸ æµ‹é‡æ³¨æ„äº‹é¡¹**ï¼š
> **å¤šæ¬¡æµ‹é‡å–å¹³å‡å€¼**  
> å¯åŠ¨æ—¶é—´ä¼šå› ä¸ºç¼“å­˜ã€ç¡¬ç›˜çŠ¶æ€ç­‰å› ç´ æœ‰æ³¢åŠ¨

> **å†·å¯åŠ¨ vs çƒ­å¯åŠ¨**  
> é¦–æ¬¡å¯åŠ¨ï¼ˆå†·å¯åŠ¨ï¼‰é€šå¸¸æ¯”é‡å¯ï¼ˆçƒ­å¯åŠ¨ï¼‰æ…¢

### 2.3 ç¬¬ä¸‰æ–¹æ€§èƒ½å·¥å…·


**ğŸ”§ å…¶ä»–æœ‰ç”¨å·¥å…·**ï¼š

```bash
# bootchart - å›¾å½¢åŒ–å¯åŠ¨åˆ†æ
sudo apt install bootchart2
# é‡å¯åç”Ÿæˆ /var/log/bootchart/ ç›®å½•

# dmesgæ—¶é—´åˆ†æ
dmesg -T | grep -E "(seconds|time)"

# æ‰‹åŠ¨è®¡æ—¶æµ‹é‡
time (ä»æŒ‰ç”µæºé”®å¼€å§‹æ‰‹åŠ¨è®¡æ—¶)
```

---

## 3. âš¡ GRUB2æ€§èƒ½ä¼˜åŒ–


### 3.1 GRUBé…ç½®ä¼˜åŒ–


**ğŸ’¡ é€šä¿—ç†è§£**ï¼š
GRUBä¼˜åŒ–å°±åƒ"ç²¾ç®€å¼€æœºèœå•"ï¼š
- å‡å°‘ç­‰å¾…æ—¶é—´
- åˆ é™¤ä¸ç”¨çš„èœå•é¡¹
- ä¼˜åŒ–åŠ è½½é¡ºåº

**ğŸ”¢ æ ¸å¿ƒä¼˜åŒ–å‚æ•°**ï¼š

1ï¸âƒ£ **è¶…æ—¶æ—¶é—´ä¼˜åŒ–**ï¼š
```bash
# /etc/default/grub
GRUB_TIMEOUT=1              # å‡å°‘èœå•ç­‰å¾…æ—¶é—´
GRUB_TIMEOUT_STYLE=hidden   # éšè—èœå•ï¼Œé™¤éæŒ‰é”®
GRUB_RECORDFAIL_TIMEOUT=1   # å¯åŠ¨å¤±è´¥æ—¶çš„ç­‰å¾…æ—¶é—´
```

2ï¸âƒ£ **å¯åŠ¨å‚æ•°ä¼˜åŒ–**ï¼š
```bash
# å†…æ ¸å¯åŠ¨å‚æ•°ä¼˜åŒ–
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"

# æ€§èƒ½ç›¸å…³å‚æ•°
GRUB_CMDLINE_LINUX="elevator=deadline transparent_hugepage=never"

# SSDä¼˜åŒ–å‚æ•°
GRUB_CMDLINE_LINUX="elevator=noop"
```

3ï¸âƒ£ **GRUBåŠŸèƒ½ç²¾ç®€**ï¼š
```bash
# ç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½
GRUB_DISABLE_SUBMENU=y      # ç¦ç”¨å­èœå•
GRUB_DISABLE_RECOVERY=true  # ç¦ç”¨æ¢å¤æ¨¡å¼èœå•
GRUB_DISABLE_OS_PROBER=true # ç¦ç”¨å…¶ä»–ç³»ç»Ÿæ¢æµ‹
```

**ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”**ï¼š

| **ä¼˜åŒ–é¡¹ç›®** | **ä¼˜åŒ–å‰** | **ä¼˜åŒ–å** | **èŠ‚çœæ—¶é—´** |
|-------------|-----------|-----------|-------------|
| èœå•è¶…æ—¶ | 10ç§’ | 1ç§’ | 9ç§’ âš¡ |
| ç³»ç»Ÿæ¢æµ‹ | 5ç§’ | 0ç§’ | 5ç§’ âš¡ |
| æ¢å¤èœå• | 2ç§’ | 0ç§’ | 2ç§’ âš¡ |
| **æ€»è®¡** | **17ç§’** | **1ç§’** | **16ç§’** |

### 3.2 GRUBæ¨¡å—ä¼˜åŒ–


**ğŸ”§ æ¨¡å—åŠ è½½ä¼˜åŒ–**ï¼š

```bash
# æŸ¥çœ‹å½“å‰åŠ è½½çš„æ¨¡å—
lsmod | grep grub

# /etc/default/grub ä¸­æŒ‡å®šå¿…è¦æ¨¡å—
GRUB_PRELOAD_MODULES="ext2 part_gpt part_msdos"

# å‡å°‘ä¸å¿…è¦çš„æ¨¡å—åŠ è½½
# ç§»é™¤ï¼šbluetooth, wireless, raid ç­‰ä¸éœ€è¦çš„æ¨¡å—
```

**ğŸ’» å®ç”¨ä¼˜åŒ–è„šæœ¬**ï¼š

```bash
#!/bin/bash
# GRUBå¿«é€Ÿä¼˜åŒ–è„šæœ¬

echo "å¼€å§‹ä¼˜åŒ–GRUBé…ç½®..."

# å¤‡ä»½åŸé…ç½®
sudo cp /etc/default/grub /etc/default/grub.backup

# åº”ç”¨ä¼˜åŒ–é…ç½®
sudo tee /etc/default/grub << 'EOF'
GRUB_DEFAULT=0
GRUB_TIMEOUT=1
GRUB_TIMEOUT_STYLE=hidden
GRUB_DISTRIBUTOR=`lsb_release -i -s 2> /dev/null || echo Debian`
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
GRUB_CMDLINE_LINUX=""
GRUB_DISABLE_SUBMENU=y
GRUB_DISABLE_RECOVERY=true
GRUB_DISABLE_OS_PROBER=true
EOF

# æ›´æ–°GRUBé…ç½®
sudo update-grub

echo "GRUBä¼˜åŒ–å®Œæˆï¼è¯·é‡å¯æµ‹è¯•æ•ˆæœã€‚"
```

---

## 4. ğŸ“¦ initramfsä¼˜åŒ–ç­–ç•¥


### 4.1 ä»€ä¹ˆæ˜¯initramfs


**ğŸ’¡ é€šä¿—ç†è§£**ï¼š
initramfså°±åƒ"ç³»ç»Ÿå¯åŠ¨åŒ…"ï¼š
- åŒ…å«å¯åŠ¨å¿…éœ€çš„é©±åŠ¨ç¨‹åº
- åœ¨å†…æ ¸åŠ è½½åç«‹å³è¿è¡Œ
- è´Ÿè´£æŒ‚è½½çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ
- å¤§å°ç›´æ¥å½±å“å¯åŠ¨é€Ÿåº¦

```
initramfsä½œç”¨è¿‡ç¨‹ï¼š
å†…æ ¸å¯åŠ¨ â†’ åŠ è½½initramfs â†’ è¿è¡Œinitè„šæœ¬ â†’ æŒ‚è½½æ ¹åˆ†åŒº â†’ å¯åŠ¨çœŸæ­£ç³»ç»Ÿ
     â†“            â†“            â†“            â†“            â†“
   ç¡¬ä»¶åˆå§‹åŒ–   å†…å­˜æ–‡ä»¶ç³»ç»Ÿ   é©±åŠ¨åŠ è½½     åˆ†åŒºè¯†åˆ«    ç³»ç»Ÿç§»äº¤
```

### 4.2 initramfså¤§å°ä¼˜åŒ–


**ğŸ”¢ ä¼˜åŒ–æ–¹æ³•è¯¦è§£**ï¼š

1ï¸âƒ£ **æŸ¥çœ‹å½“å‰å¤§å°**ï¼š
```bash
# æŸ¥çœ‹initramfsæ–‡ä»¶å¤§å°
ls -lh /boot/initramfs-*

# æŸ¥çœ‹å†…å®¹è¯¦æƒ…
lsinitramfs /boot/initramfs-$(uname -r)-generic | wc -l
```

2ï¸âƒ£ **ç²¾ç®€æ¨¡å—é…ç½®**ï¼š
```bash
# /etc/initramfs-tools/modules
# åªä¿ç•™å¿…è¦çš„æ¨¡å—ï¼Œåˆ é™¤ä¸éœ€è¦çš„
# å¸¸è§å¯åˆ é™¤ï¼šbluetooth, wireless, æŸäº›ç½‘å¡é©±åŠ¨

# æŸ¥çœ‹å½“å‰åŒ…å«çš„æ¨¡å—
lsinitramfs /boot/initramfs-$(uname -r)-generic | grep -E "\.ko$"
```

3ï¸âƒ£ **å‹ç¼©ç®—æ³•ä¼˜åŒ–**ï¼š
```bash
# /etc/initramfs-tools/conf.d/compress
# é€‰æ‹©æ›´å¥½çš„å‹ç¼©ç®—æ³•
COMPRESS=xz        # è¾ƒå¥½çš„å‹ç¼©ç‡ï¼Œç¨æ…¢
# COMPRESS=lz4     # è¾ƒå¿«çš„è§£å‹é€Ÿåº¦ï¼Œè¾ƒå¤§æ–‡ä»¶
# COMPRESS=gzip    # å¹³è¡¡é€‰æ‹©
```

**ğŸ“Š ä¸åŒå‹ç¼©ç®—æ³•å¯¹æ¯”**ï¼š

| **å‹ç¼©ç®—æ³•** | **æ–‡ä»¶å¤§å°** | **å‹ç¼©æ—¶é—´** | **è§£å‹æ—¶é—´** |
|-------------|-------------|-------------|-------------|
| gzip | 25MB | å¿« âš¡ | å¿« âš¡ |
| xz | 18MB | æ…¢ ğŸ¢ | ä¸­ç­‰ ğŸ“Š |
| lz4 | 30MB | å¾ˆå¿« ğŸš€ | å¾ˆå¿« ğŸš€ |

### 4.3 initramfså®šåˆ¶åŒ–æ„å»º


**ğŸ’» é«˜çº§ä¼˜åŒ–é…ç½®**ï¼š

```bash
# /etc/initramfs-tools/initramfs.conf ä¼˜åŒ–
MODULES=dep           # åªåŒ…å«ä¾èµ–çš„æ¨¡å—ï¼Œè€Œémost
COMPRESS=xz          # ä½¿ç”¨é«˜å‹ç¼©ç‡
BOOT=local           # å¦‚æœä¸éœ€è¦ç½‘ç»œå¯åŠ¨

# æ’é™¤ä¸å¿…è¦çš„å›ºä»¶
# /etc/initramfs-tools/conf.d/driver-policy
MODULES=dep
```

**ğŸ”§ è‡ªåŠ¨ä¼˜åŒ–è„šæœ¬**ï¼š

```bash
#!/bin/bash
# initramfsä¼˜åŒ–è„šæœ¬

echo "å¼€å§‹ä¼˜åŒ–initramfs..."

# 1. å¤‡ä»½å½“å‰initramfs
sudo cp /boot/initramfs-$(uname -r)-generic /boot/initramfs-backup

# 2. ä¼˜åŒ–é…ç½®
sudo tee /etc/initramfs-tools/conf.d/optimize << 'EOF'
MODULES=dep
COMPRESS=xz
BOOT=local
EOF

# 3. ç§»é™¤ä¸å¿…è¦çš„é’©å­ï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ï¼‰
sudo rm -f /usr/share/initramfs-tools/hooks/plymouth

# 4. é‡æ–°ç”Ÿæˆinitramfs
echo "æ­£åœ¨é‡æ–°ç”Ÿæˆinitramfs..."
sudo update-initramfs -u -k $(uname -r)

# 5. æ˜¾ç¤ºä¼˜åŒ–ç»“æœ
echo "ä¼˜åŒ–å®Œæˆï¼"
echo "ä¼˜åŒ–å‰å¤§å°: $(ls -lh /boot/initramfs-backup | awk '{print $5}')"
echo "ä¼˜åŒ–åå¤§å°: $(ls -lh /boot/initramfs-$(uname -r)-generic | awk '{print $5}')"
```

---

## 5. ğŸš€ ç³»ç»Ÿå¯åŠ¨ä¼˜åŒ–


### 5.1 å¹¶è¡Œå¯åŠ¨å‚æ•°è°ƒä¼˜


**ğŸ’¡ é€šä¿—ç†è§£**ï¼š
å¹¶è¡Œå¯åŠ¨å°±åƒ"å¤šçº¿ç¨‹å¼€æœº"ï¼š
- åŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ª
- åˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿
- å‡å°‘æœåŠ¡é—´ä¸å¿…è¦çš„ç­‰å¾…

**ğŸ”¢ systemdå¹¶è¡Œä¼˜åŒ–**ï¼š

1ï¸âƒ£ **å¹¶å‘ä»»åŠ¡æ•°è°ƒæ•´**ï¼š
```bash
# /etc/systemd/system.conf
DefaultTasksMax=4096        # å¢åŠ é»˜è®¤ä»»åŠ¡æ•°é™åˆ¶
DefaultLimitNOFILE=65536   # å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶

# æŸ¥çœ‹å½“å‰å¹¶å‘è®¾ç½®
systemctl show -p DefaultTasksMax
```

2ï¸âƒ£ **æœåŠ¡å¯åŠ¨ç­–ç•¥**ï¼š
```bash
# å¯¹äºå…³é”®æœåŠ¡ï¼Œè®¾ç½®å¹¶è¡Œå¯åŠ¨
# /etc/systemd/system/multi-user.target.wants/

# æ£€æŸ¥æœåŠ¡ä¾èµ–å…³ç³»
systemctl list-dependencies multi-user.target
```

### 5.2 ä¸å¿…è¦æœåŠ¡ç¦ç”¨


**ğŸ“‹ æœåŠ¡ä¼˜åŒ–æ¸…å•**ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯åŠ¨æœåŠ¡
systemctl list-unit-files --state=enabled

# å¸¸è§å¯ç¦ç”¨æœåŠ¡ï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ï¼‰
sudo systemctl disable bluetooth.service     # å¦‚æœä¸ç”¨è“ç‰™
sudo systemctl disable cups.service         # å¦‚æœä¸ç”¨æ‰“å°æœº
sudo systemctl disable ModemManager.service # å¦‚æœä¸ç”¨è°ƒåˆ¶è§£è°ƒå™¨
sudo systemctl disable avahi-daemon.service # å¦‚æœä¸ç”¨ç½‘ç»œå‘ç°

# æŸ¥çœ‹ç¦ç”¨æ•ˆæœ
systemd-analyze blame
```

**âš ï¸ æœåŠ¡ç¦ç”¨æ³¨æ„**ï¼š
> **è°¨æ…ç¦ç”¨ç³»ç»ŸæœåŠ¡**  
> ç¦ç”¨å‰ç¡®è®¤æœåŠ¡çš„ä½œç”¨ï¼Œé¿å…å½±å“ç³»ç»ŸåŠŸèƒ½

> **æµ‹è¯•åå†åº”ç”¨**  
> åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯æ— é—®é¢˜åå†åœ¨ç”Ÿäº§ç¯å¢ƒåº”ç”¨

### 5.3 é¢„åŠ è½½ä¼˜åŒ–


**ğŸ”§ é¢„åŠ è½½æŠ€æœ¯åº”ç”¨**ï¼š

1ï¸âƒ£ **preloadå®‰è£…é…ç½®**ï¼š
```bash
# å®‰è£…preloadï¼ˆè‡ªåŠ¨é¢„åŠ è½½å¸¸ç”¨ç¨‹åºï¼‰
sudo apt install preload

# preloadä¼šè‡ªåŠ¨å­¦ä¹ ä½¿ç”¨ä¹ æƒ¯ï¼Œé¢„åŠ è½½å¸¸ç”¨ç¨‹åºåˆ°å†…å­˜
# é…ç½®æ–‡ä»¶ï¼š/etc/preload.conf
sudo systemctl enable preload
```

2ï¸âƒ£ **readaheadé…ç½®**ï¼š
```bash
# æŸäº›å‘è¡Œç‰ˆæ”¯æŒreadahead
# é¢„è¯»å–å¯åŠ¨æ—¶éœ€è¦çš„æ–‡ä»¶åˆ°å†…å­˜

# æ£€æŸ¥æ˜¯å¦æ”¯æŒ
systemctl status systemd-readahead-collect.service
```

---

## 6. ğŸ” æ€§èƒ½ç“¶é¢ˆè¯†åˆ«


### 6.1 ç“¶é¢ˆåˆ†ææ–¹æ³•


**ğŸ”¢ ç³»ç»ŸåŒ–åˆ†ææ­¥éª¤**ï¼š

1ï¸âƒ£ **ç¡¬ä»¶ç“¶é¢ˆè¯†åˆ«**ï¼š
```bash
# CPUæ€§èƒ½æ£€æŸ¥
lscpu
cat /proc/cpuinfo

# å†…å­˜ä½¿ç”¨åˆ†æ
free -h
cat /proc/meminfo

# ç¡¬ç›˜æ€§èƒ½æµ‹è¯•
sudo hdparm -t /dev/sda    # è¯»å–é€Ÿåº¦æµ‹è¯•
sudo hdparm -T /dev/sda    # ç¼“å­˜è¯»å–æµ‹è¯•
```

2ï¸âƒ£ **I/Oæ€§èƒ½åˆ†æ**ï¼š
```bash
# å®‰è£…iotopç›‘æ§I/O
sudo apt install iotop
sudo iotop

# å¯åŠ¨æ—¶I/Oç›‘æ§
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯é‡å¯åç«‹å³è¿è¡Œ
sudo iotop -o -d 1
```

### 6.2 å¸¸è§ç“¶é¢ˆç±»å‹


**ğŸ“Š ç“¶é¢ˆè¯†åˆ«æŒ‡å—**ï¼š

| **ç“¶é¢ˆç±»å‹** | **è¡¨ç°ç—‡çŠ¶** | **è¯†åˆ«æ–¹æ³•** | **è§£å†³æ€è·¯** |
|-------------|-------------|-------------|-------------|
| **ç¡¬ç›˜I/O** | å¯åŠ¨å¡é¡¿ï¼Œç¡¬ç›˜ç¯å¸¸äº® | `iotop`ç›‘æ§ | SSDå‡çº§ï¼Œå‡å°‘I/O |
| **å†…å­˜ä¸è¶³** | å¯åŠ¨ç¼“æ…¢ï¼Œå¤§é‡swap | `free -h`æ£€æŸ¥ | å¢åŠ å†…å­˜ï¼Œå‡å°‘æœåŠ¡ |
| **CPUæ€§èƒ½** | é«˜CPUä½¿ç”¨ç‡ | `top`ç›‘æ§ | ä¼˜åŒ–æœåŠ¡ï¼Œå‡çº§CPU |
| **æœåŠ¡ä¾èµ–** | ç­‰å¾…æ—¶é—´é•¿ | `systemd-analyze` | ä¼˜åŒ–ä¾èµ–å…³ç³» |

**ğŸ’» ç“¶é¢ˆè¯†åˆ«è„šæœ¬**ï¼š

```bash
#!/bin/bash
# å¯åŠ¨æ€§èƒ½ç“¶é¢ˆåˆ†æè„šæœ¬

echo "=== ç³»ç»Ÿå¯åŠ¨æ€§èƒ½åˆ†ææŠ¥å‘Š ==="

echo "1. å¯åŠ¨æ—¶é—´åˆ†æï¼š"
systemd-analyze

echo -e "\n2. æœ€æ…¢çš„5ä¸ªæœåŠ¡ï¼š"
systemd-analyze blame | head -5

echo -e "\n3. å…³é”®å¯åŠ¨è·¯å¾„ï¼š"
systemd-analyze critical-chain | head -10

echo -e "\n4. ç¡¬ä»¶ä¿¡æ¯ï¼š"
echo "CPUæ ¸å¿ƒæ•°: $(nproc)"
echo "å†…å­˜å¤§å°: $(free -h | awk 'NR==2{print $2}')"
echo "ç¡¬ç›˜ç±»å‹: $(lsblk -d -o name,rota | grep -v NAME)"

echo -e "\n5. å½“å‰å¯ç”¨çš„æœåŠ¡æ•°ï¼š"
echo "å¯ç”¨æœåŠ¡: $(systemctl list-unit-files --state=enabled | wc -l)"

echo -e "\n6. initramfså¤§å°ï¼š"
ls -lh /boot/initramfs-* | awk '{print $9 ": " $5}'
```

---

## 7. âš¡ å¿«é€Ÿå¯åŠ¨æŠ€æœ¯


### 7.1 ç°ä»£å¿«é€Ÿå¯åŠ¨æŠ€æœ¯


**ğŸ’¡ é€šä¿—ç†è§£**ï¼š
å¿«é€Ÿå¯åŠ¨æŠ€æœ¯å°±åƒ"ç³»ç»Ÿä¼‘çœ å”¤é†’"ï¼š
- ä¿å­˜ç³»ç»ŸçŠ¶æ€åˆ°ç¡¬ç›˜
- ä¸‹æ¬¡å¯åŠ¨æ—¶ç›´æ¥æ¢å¤çŠ¶æ€
- è·³è¿‡å®Œæ•´çš„å¯åŠ¨è¿‡ç¨‹

**ğŸ”¢ ä¸»è¦æŠ€æœ¯ç±»å‹**ï¼š

1ï¸âƒ£ **ä¼‘çœ å¯åŠ¨(Hibernation)**ï¼š
```bash
# é…ç½®ä¼‘çœ åŠŸèƒ½
sudo systemctl enable systemd-hibernate.service

# æµ‹è¯•ä¼‘çœ åŠŸèƒ½
sudo systemctl hibernate

# è®¾ç½®å¿«é€Ÿä¼‘çœ å¯åŠ¨
# /etc/default/grub æ·»åŠ ï¼š
GRUB_CMDLINE_LINUX_DEFAULT="resume=/dev/sda2"
```

2ï¸âƒ£ **å¿«ç…§å¯åŠ¨**ï¼š
```bash
# ä½¿ç”¨systemdå¿«ç…§åŠŸèƒ½
sudo systemctl snapshot backup.snapshot

# åˆ—å‡ºæ‰€æœ‰å¿«ç…§
systemctl list-units --type=snapshot
```

### 7.2 SSDä¼˜åŒ–é…ç½®


**ğŸ”§ SSDä¸“ç”¨ä¼˜åŒ–**ï¼š

```bash
# /etc/fstab SSDä¼˜åŒ–æŒ‚è½½å‚æ•°
/dev/sda1 / ext4 defaults,noatime,discard 0 1

# TRIMæ”¯æŒå¯ç”¨
sudo systemctl enable fstrim.timer

# SSDè°ƒåº¦å™¨ä¼˜åŒ–
echo noop | sudo tee /sys/block/sda/queue/scheduler

# æ°¸ä¹…è®¾ç½®è°ƒåº¦å™¨
# /etc/default/grub æ·»åŠ ï¼š
GRUB_CMDLINE_LINUX_DEFAULT="elevator=noop"
```

### 7.3 å†…å­˜åŠ é€ŸæŠ€æœ¯


**ğŸ“¦ å†…å­˜ä¼˜åŒ–ç­–ç•¥**ï¼š

1ï¸âƒ£ **zRAMé…ç½®**ï¼š
```bash
# å®‰è£…zramå·¥å…·
sudo apt install zram-config

# å¯ç”¨zRAMäº¤æ¢
sudo systemctl enable zram-config

# æŸ¥çœ‹zRAMçŠ¶æ€
cat /proc/swaps
```

2ï¸âƒ£ **é¢„åŠ è½½å…³é”®æ–‡ä»¶**ï¼š
```bash
# åˆ›å»ºé¢„åŠ è½½è„šæœ¬
sudo tee /usr/local/bin/preload-boot << 'EOF'
#!/bin/bash
# é¢„åŠ è½½å…³é”®ç³»ç»Ÿæ–‡ä»¶åˆ°å†…å­˜
vmtouch -t /usr/bin/systemd
vmtouch -t /lib/systemd/
vmtouch -t /etc/systemd/
EOF

sudo chmod +x /usr/local/bin/preload-boot
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒåŸåˆ™


**ğŸ”¸ ä¼˜åŒ–ä¼˜å…ˆçº§**ï¼š
```
å½±å“æœ€å¤§çš„ä¼˜åŒ–ï¼ˆæŒ‰é‡è¦æ€§æ’åºï¼‰ï¼š
1ï¸âƒ£ ç¡¬ä»¶å‡çº§ï¼ˆSSDã€å†…å­˜ï¼‰        â†’ è´¨çš„æå‡
2ï¸âƒ£ initramfsä¼˜åŒ–               â†’ ç«‹ç«¿è§å½±  
3ï¸âƒ£ ä¸å¿…è¦æœåŠ¡ç¦ç”¨             â†’ ç®€å•æœ‰æ•ˆ
4ï¸âƒ£ GRUBé…ç½®ä¼˜åŒ–               â†’ å¿«é€Ÿå®æ–½
5ï¸âƒ£ ç³»ç»Ÿå‚æ•°è°ƒä¼˜               â†’ ç»†èŠ‚å®Œå–„
```

**ğŸ”¸ ä¼˜åŒ–ç­–ç•¥é€‰æ‹©**ï¼š
- **æ–°æ‰‹æ¨è**ï¼šGRUBè¶…æ—¶è®¾ç½® + æœåŠ¡ç¦ç”¨
- **è¿›é˜¶ç”¨æˆ·**ï¼šinitramfså®šåˆ¶ + å¹¶è¡Œä¼˜åŒ–  
- **ä¸“ä¸šéœ€æ±‚**ï¼šå†…æ ¸å‚æ•°è°ƒä¼˜ + é¢„åŠ è½½æŠ€æœ¯

### 8.2 æµ‹é‡ä¸ç›‘æ§è¦ç‚¹


**ğŸ“Š æ€§èƒ½ç›‘æ§æŒ‡æ ‡**ï¼š
```
å…³é”®æµ‹é‡æŒ‡æ ‡ï¼š
â€¢ æ€»å¯åŠ¨æ—¶é—´ï¼šç›®æ ‡ < 30ç§’ï¼ˆæœºæ¢°ç¡¬ç›˜ï¼‰< 15ç§’ï¼ˆSSDï¼‰
â€¢ GRUBç­‰å¾…ï¼šç›®æ ‡ < 2ç§’
â€¢ å†…æ ¸åŠ è½½ï¼šç›®æ ‡ < 5ç§’  
â€¢ initramfsï¼šç›®æ ‡ < 3ç§’
â€¢ ç³»ç»ŸæœåŠ¡ï¼šç›®æ ‡ < 10ç§’
```

**ğŸ”§ å®šæœŸç›‘æ§å»ºè®®**ï¼š
- æ¯æœˆè¿è¡Œä¸€æ¬¡å®Œæ•´æ€§èƒ½åˆ†æ
- ç³»ç»Ÿæ›´æ–°åé‡æ–°æµ‹é‡å¯åŠ¨æ—¶é—´
- æ–°å®‰è£…è½¯ä»¶åæ£€æŸ¥å¯åŠ¨æœåŠ¡
- å»ºç«‹æ€§èƒ½åŸºå‡†çº¿ï¼Œè·Ÿè¸ªå˜åŒ–è¶‹åŠ¿

### 8.3 å®ç”¨ä¼˜åŒ–å»ºè®®


**â­ å¿«é€Ÿä¼˜åŒ–æ¸…å•**ï¼š
```
30åˆ†é’Ÿå¿«é€Ÿä¼˜åŒ–ï¼š
â–¡ è®¾ç½®GRUBè¶…æ—¶ä¸º1ç§’
â–¡ ç¦ç”¨ä¸å¿…è¦çš„å¯åŠ¨æœåŠ¡  
â–¡ ä¼˜åŒ–initramfså‹ç¼©ç®—æ³•
â–¡ å¯ç”¨SSDç›¸å…³ä¼˜åŒ–ï¼ˆå¦‚é€‚ç”¨ï¼‰
â–¡ æµ‹é‡ä¼˜åŒ–å‰åæ•ˆæœ

é¢„æœŸæ•ˆæœï¼š
â€¢ å¯åŠ¨æ—¶é—´å‡å°‘30-50%
â€¢ ç³»ç»Ÿå“åº”æ›´å¿«
â€¢ èµ„æºä½¿ç”¨æ›´åˆç†
```

**ğŸ¯ é•¿æœŸç»´æŠ¤ç­–ç•¥**ï¼š
- **å®šæœŸæ¸…ç†**ï¼šåˆ é™¤ä¸ç”¨çš„è½¯ä»¶å’ŒæœåŠ¡
- **ç›‘æ§è¶‹åŠ¿**ï¼šè·Ÿè¸ªæ€§èƒ½å˜åŒ–ï¼ŒåŠæ—¶è°ƒæ•´
- **ç¡¬ä»¶å‡çº§**ï¼šé€‚æ—¶è€ƒè™‘SSDã€å†…å­˜å‡çº§
- **ç³»ç»Ÿç²¾ç®€**ï¼šä¿æŒç³»ç»Ÿçš„ç®€æ´é«˜æ•ˆ

**âš ï¸ ä¼˜åŒ–æ³¨æ„äº‹é¡¹**ï¼š
> **å®‰å…¨ç¬¬ä¸€**  
> ä¼˜åŒ–å‰åšå¥½å¤‡ä»½ï¼Œç¡®ä¿å¯ä»¥å›é€€

> **é€æ­¥ä¼˜åŒ–**  
> ä¸€æ¬¡æ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œä¾¿äºå®šä½é—®é¢˜

> **æµ‹è¯•éªŒè¯**  
> æ¯æ¬¡ä¼˜åŒ–åéƒ½è¦å……åˆ†æµ‹è¯•ç³»ç»ŸåŠŸèƒ½

**æ ¸å¿ƒè®°å¿†**ï¼š
- æµ‹é‡æ˜¯ä¼˜åŒ–çš„åŸºç¡€ï¼Œå…ˆåˆ†æå†ä¼˜åŒ–
- ç¡¬ä»¶å‡çº§é€šå¸¸æ¯”è½¯ä»¶ä¼˜åŒ–æ•ˆæœæ›´æ˜æ˜¾
- GRUBå’Œinitramfsä¼˜åŒ–æ€§ä»·æ¯”æœ€é«˜
- å®šæœŸç›‘æ§å’Œç»´æŠ¤æ˜¯ä¿æŒæ€§èƒ½çš„å…³é”®