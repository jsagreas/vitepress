---
title: 7ã€initè¿›ç¨‹ä¸ç³»ç»Ÿåˆå§‹åŒ–
---
## ğŸ“š ç›®å½•

1. [initè¿›ç¨‹åŸºç¡€æ¦‚å¿µ](#1-initè¿›ç¨‹åŸºç¡€æ¦‚å¿µ)
2. [ä¼ ç»ŸSysV Initç³»ç»Ÿ](#2-ä¼ ç»Ÿsysv-initç³»ç»Ÿ)
3. [ç°ä»£systemdåˆå§‹åŒ–ç³»ç»Ÿ](#3-ç°ä»£systemdåˆå§‹åŒ–ç³»ç»Ÿ)
4. [ç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬æ‰§è¡Œ](#4-ç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬æ‰§è¡Œ)
5. [æœåŠ¡ä¾èµ–å…³ç³»ç®¡ç†](#5-æœåŠ¡ä¾èµ–å…³ç³»ç®¡ç†)
6. [ç³»ç»Ÿç›®æ ‡ä¸è¿è¡Œçº§åˆ«](#6-ç³»ç»Ÿç›®æ ‡ä¸è¿è¡Œçº§åˆ«)
7. [åˆå§‹åŒ–è¿‡ç¨‹ç›‘æ§](#7-åˆå§‹åŒ–è¿‡ç¨‹ç›‘æ§)
8. [initç³»ç»Ÿåˆ‡æ¢æ–¹æ³•](#8-initç³»ç»Ÿåˆ‡æ¢æ–¹æ³•)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ initè¿›ç¨‹åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯initè¿›ç¨‹ï¼Ÿ


**ç®€å•ç†è§£**ï¼šinitè¿›ç¨‹å°±åƒä¸€ä¸ªå¤§ç®¡å®¶ï¼Œè´Ÿè´£å¯åŠ¨å’Œç®¡ç†Linuxç³»ç»Ÿä¸­æ‰€æœ‰å…¶ä»–ç¨‹åºã€‚

```
å½¢è±¡æ¯”å–»ï¼š
initè¿›ç¨‹ = å…¬å¸çš„CEO
å…¶ä»–è¿›ç¨‹ = å…¬å¸çš„å„ä¸ªéƒ¨é—¨å’Œå‘˜å·¥

CEOçš„èŒè´£ï¼š
âœ“ å†³å®šå“ªäº›éƒ¨é—¨éœ€è¦å¯åŠ¨
âœ“ ç®¡ç†éƒ¨é—¨ä¹‹é—´çš„åä½œå…³ç³»
âœ“ ç›‘æ§å„éƒ¨é—¨çš„è¿è¡ŒçŠ¶æ€
âœ“ å¤„ç†éƒ¨é—¨æ•…éšœå’Œé‡å¯
```

### 1.2 PID 1çš„ç‰¹æ®Šåœ°ä½


**ä¸ºä»€ä¹ˆæ˜¯PID 1ï¼Ÿ**
```
å¯åŠ¨é¡ºåºï¼š
å†…æ ¸å¯åŠ¨ â†’ æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ â†’ å¯åŠ¨ç¬¬ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹(init)

PIDåˆ†é…ï¼š
PID 0: å†…æ ¸è°ƒåº¦è¿›ç¨‹
PID 1: initè¿›ç¨‹ â†â”€â”€ ç¬¬ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹
PID 2: å†…æ ¸çº¿ç¨‹
PID 3åŠä»¥å: æ™®é€šç”¨æˆ·è¿›ç¨‹
```

**PID 1çš„ç‰¹æ®Šæƒé™**ï¼š
```
ğŸ”¸ å­¤å„¿è¿›ç¨‹æ”¶å…»ï¼šçˆ¶è¿›ç¨‹æ­»äº¡çš„å­è¿›ç¨‹ä¼šè¢«initæ”¶å…»
ğŸ”¸ ä¿¡å·å¤„ç†ï¼šå¯ä»¥å¿½ç•¥æŸäº›ä¿¡å·ï¼Œé¿å…æ„å¤–ç»ˆæ­¢
ğŸ”¸ ç³»ç»Ÿç®¡ç†ï¼šè´Ÿè´£å¯åŠ¨ã€åœæ­¢ã€é‡å¯ç³»ç»ŸæœåŠ¡
ğŸ”¸ èµ„æºæ¸…ç†ï¼šå›æ”¶åƒµå°¸è¿›ç¨‹ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æº
```

### 1.3 initè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ


```
ç³»ç»Ÿå¯åŠ¨é˜¶æ®µï¼š
    å†…æ ¸åŠ è½½
         â†“
    æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ
         â†“
    å¯åŠ¨initè¿›ç¨‹ â†â”€â”€ ç³»ç»Ÿåˆå§‹åŒ–å¼€å§‹
         â†“
    è¿è¡Œåˆå§‹åŒ–è„šæœ¬
         â†“
    å¯åŠ¨ç³»ç»ŸæœåŠ¡
         â†“
    è¿›å…¥è¿è¡ŒçŠ¶æ€ â†â”€â”€ ç”¨æˆ·å¯ä»¥ç™»å½•ä½¿ç”¨

ç³»ç»Ÿå…³é—­é˜¶æ®µï¼š
    å…³é—­ä¿¡å·
         â†“
    åœæ­¢ç”¨æˆ·è¿›ç¨‹
         â†“
    åœæ­¢ç³»ç»ŸæœåŠ¡
         â†“
    å¸è½½æ–‡ä»¶ç³»ç»Ÿ
         â†“
    ç³»ç»Ÿå…³æœº/é‡å¯
```

---

## 2. ğŸ“œ ä¼ ç»ŸSysV Initç³»ç»Ÿ


### 2.1 SysV InitåŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯SysV Initï¼Ÿ**
```
SysV Init = System Vé£æ ¼çš„åˆå§‹åŒ–ç³»ç»Ÿ
æ¥æºï¼šUnix System Væ“ä½œç³»ç»Ÿçš„åˆå§‹åŒ–æ–¹å¼
ç‰¹ç‚¹ï¼šåŸºäºè¿è¡Œçº§åˆ«(runlevel)çš„é¡ºåºå¯åŠ¨æ–¹å¼
```

**æ ¸å¿ƒæ€æƒ³**ï¼šæŠŠç³»ç»Ÿå¯åŠ¨åˆ†æˆä¸åŒçš„"çº§åˆ«"ï¼Œæ¯ä¸ªçº§åˆ«å¯¹åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚

```
è¿è¡Œçº§åˆ«ç±»æ¯”ï¼š
å°±åƒæ±½è½¦çš„æ¡£ä½ï¼š
1æ¡£ = å•ç”¨æˆ·æ¨¡å¼ (ç»´ä¿®æ¨¡å¼)
2æ¡£ = å¤šç”¨æˆ·æ¨¡å¼ (æ— ç½‘ç»œ)
3æ¡£ = å®Œæ•´å¤šç”¨æˆ·æ¨¡å¼ (å‘½ä»¤è¡Œ)
5æ¡£ = å›¾å½¢ç•Œé¢æ¨¡å¼
```

### 2.2 SysVè¿è¡Œçº§åˆ«è¯¦è§£


| çº§åˆ« | **åç§°** | **æè¿°** | **ä½¿ç”¨åœºæ™¯** |
|-----|---------|----------|-------------|
| **0** | `å…³æœº` | `ç³»ç»Ÿå…³é—­çŠ¶æ€` | `æ‰§è¡Œå…³æœºæ“ä½œ` |
| **1** | `å•ç”¨æˆ·æ¨¡å¼` | `åªæœ‰rootç”¨æˆ·ï¼Œæ— ç½‘ç»œ` | `ç³»ç»Ÿç»´æŠ¤ã€å¯†ç æ¢å¤` |
| **2** | `å¤šç”¨æˆ·æ¨¡å¼(æ— NFS)` | `å¤šç”¨æˆ·ï¼Œæ— ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ` | `æœ¬åœ°å¤šç”¨æˆ·å·¥ä½œ` |
| **3** | `å®Œæ•´å¤šç”¨æˆ·æ¨¡å¼` | `å‘½ä»¤è¡Œç•Œé¢ï¼Œå…¨åŠŸèƒ½` | `æœåŠ¡å™¨æ ‡å‡†æ¨¡å¼` |
| **4** | `ç”¨æˆ·è‡ªå®šä¹‰` | `é¢„ç•™ç»™ç”¨æˆ·è‡ªå®šä¹‰` | `ç‰¹æ®Šéœ€æ±‚é…ç½®` |
| **5** | `å›¾å½¢ç•Œé¢æ¨¡å¼` | `X11å›¾å½¢ç•Œé¢` | `æ¡Œé¢ç”¨æˆ·ä½¿ç”¨` |
| **6** | `é‡å¯` | `ç³»ç»Ÿé‡å¯çŠ¶æ€` | `æ‰§è¡Œé‡å¯æ“ä½œ` |

### 2.3 SysVåˆå§‹åŒ–è„šæœ¬ç»“æ„


**è„šæœ¬ä½ç½®å’Œå‘½åè§„åˆ™**ï¼š
```
/etc/init.d/          â† å®é™…çš„æœåŠ¡è„šæœ¬
/etc/rc0.d/           â† è¿è¡Œçº§åˆ«0çš„è„šæœ¬é“¾æ¥
/etc/rc1.d/           â† è¿è¡Œçº§åˆ«1çš„è„šæœ¬é“¾æ¥
/etc/rc2.d/           â† è¿è¡Œçº§åˆ«2çš„è„šæœ¬é“¾æ¥
/etc/rc3.d/           â† è¿è¡Œçº§åˆ«3çš„è„šæœ¬é“¾æ¥
/etc/rc5.d/           â† è¿è¡Œçº§åˆ«5çš„è„šæœ¬é“¾æ¥
/etc/rc6.d/           â† è¿è¡Œçº§åˆ«6çš„è„šæœ¬é“¾æ¥

è„šæœ¬å‘½åè§„åˆ™ï¼š
S##æœåŠ¡å  â† Sè¡¨ç¤ºStartå¯åŠ¨ï¼Œ##æ˜¯ä¸¤ä½æ•°å­—é¡ºåºå·
K##æœåŠ¡å  â† Kè¡¨ç¤ºKillåœæ­¢ï¼Œ##æ˜¯ä¸¤ä½æ•°å­—é¡ºåºå·

ç¤ºä¾‹ï¼š
S10network    â† ç¬¬10ä¸ªå¯åŠ¨networkæœåŠ¡
S20apache     â† ç¬¬20ä¸ªå¯åŠ¨apacheæœåŠ¡
K80apache     â† åœæ­¢æ—¶ç¬¬80ä¸ªå…³é—­apacheæœåŠ¡
```

**å…¸å‹çš„SysVæœåŠ¡è„šæœ¬**ï¼š
```bash
#!/bin/bash
# /etc/init.d/myservice

case "$1" in
    start)
        echo "å¯åŠ¨ MyService..."
        /usr/bin/myservice-daemon &
        echo "MyService å·²å¯åŠ¨"
        ;;
    stop)
        echo "åœæ­¢ MyService..."
        killall myservice-daemon
        echo "MyService å·²åœæ­¢"
        ;;
    restart)
        $0 stop
        $0 start
        ;;
    status)
        if pgrep myservice-daemon > /dev/null; then
            echo "MyService æ­£åœ¨è¿è¡Œ"
        else
            echo "MyService å·²åœæ­¢"
        fi
        ;;
    *)
        echo "ç”¨æ³•: $0 {start|stop|restart|status}"
        exit 1
        ;;
esac
```

### 2.4 SysVçš„ä¼˜ç¼ºç‚¹åˆ†æ


**ä¼˜ç‚¹**ï¼š
```
âœ… ç®€å•æ˜“æ‡‚ï¼šè„šæœ¬é€»è¾‘æ¸…æ™°ï¼Œå®¹æ˜“ç†è§£
âœ… çµæ´»æ€§é«˜ï¼šå¯ä»¥è‡ªç”±ç¼–å†™å¯åŠ¨è„šæœ¬
âœ… å…¼å®¹æ€§å¥½ï¼šå¤§å¤šæ•°Unixç³»ç»Ÿéƒ½æ”¯æŒ
âœ… è°ƒè¯•æ–¹ä¾¿ï¼šå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬æµ‹è¯•
```

**ç¼ºç‚¹**ï¼š
```
âŒ å¯åŠ¨è¾ƒæ…¢ï¼šä¸¥æ ¼æŒ‰é¡ºåºä¸²è¡Œå¯åŠ¨æœåŠ¡
âŒ èµ„æºæµªè´¹ï¼šæ— æ³•æœ‰æ•ˆåˆ©ç”¨å¤šæ ¸CPU
âŒ ä¾èµ–ç®¡ç†å¤æ‚ï¼šæ‰‹åŠ¨ç®¡ç†æœåŠ¡ä¾èµ–å…³ç³»
âŒ ç›‘æ§èƒ½åŠ›å¼±ï¼šæœåŠ¡å´©æºƒåä¸èƒ½è‡ªåŠ¨é‡å¯
```

---

## 3. ğŸ›ï¸ ç°ä»£systemdåˆå§‹åŒ–ç³»ç»Ÿ


### 3.1 systemdåŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯systemdï¼Ÿ**
```
systemd = system daemon (ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹)
è®¾è®¡ç†å¿µï¼šç°ä»£åŒ–ã€å¹¶è¡ŒåŒ–ã€æ¨¡å—åŒ–çš„åˆå§‹åŒ–ç³»ç»Ÿ
æ ¸å¿ƒä¼˜åŠ¿ï¼šå¿«é€Ÿå¯åŠ¨ã€æ™ºèƒ½ä¾èµ–ç®¡ç†ã€ç»Ÿä¸€æœåŠ¡ç®¡ç†
```

**systemd vs SysVå¯¹æ¯”**ï¼š
```
å¯åŠ¨æ–¹å¼å¯¹æ¯”ï¼š

SysV Init (ä¸²è¡Œå¯åŠ¨):
æœåŠ¡A â†’ æœåŠ¡B â†’ æœåŠ¡C â†’ æœåŠ¡D
æ—¶é—´: â– â– â– â– â– â– â– â– â– â– â– â–  (12ç§’)

systemd (å¹¶è¡Œå¯åŠ¨):
æœåŠ¡A â– â– â– â– 
æœåŠ¡B   â– â– â– â– 
æœåŠ¡C     â– â– â– â– 
æœåŠ¡D       â– â– â– â– 
æ—¶é—´: â– â– â– â– â– â– â– â–  (8ç§’)
```

### 3.2 systemdçš„æ ¸å¿ƒç»„ä»¶


**Unitï¼ˆå•å…ƒï¼‰**ï¼šsystemdç®¡ç†çš„åŸºæœ¬å¯¹è±¡

```
Unitç±»å‹è¯´æ˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service Units   â”‚ â† .service ç³»ç»ŸæœåŠ¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Target Units    â”‚ â† .target  è¿è¡Œç›®æ ‡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mount Units     â”‚ â† .mount   æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Timer Units     â”‚ â† .timer   å®šæ—¶ä»»åŠ¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Socket Units    â”‚ â† .socket  å¥—æ¥å­—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒå‘½ä»¤å·¥å…·**ï¼š
```bash
# systemctl - ä¸»è¦çš„systemdæ§åˆ¶å‘½ä»¤
systemctl start nginx      # å¯åŠ¨nginxæœåŠ¡
systemctl stop nginx       # åœæ­¢nginxæœåŠ¡
systemctl restart nginx    # é‡å¯nginxæœåŠ¡
systemctl status nginx     # æŸ¥çœ‹nginxæœåŠ¡çŠ¶æ€

# journalctl - æŸ¥çœ‹systemdæ—¥å¿—
journalctl -u nginx         # æŸ¥çœ‹nginxæœåŠ¡æ—¥å¿—
journalctl -f               # å®æ—¶æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
```

### 3.3 systemdæœåŠ¡æ–‡ä»¶è¯¦è§£


**æœåŠ¡æ–‡ä»¶ä½ç½®**ï¼š
```
ç³»ç»ŸæœåŠ¡æ–‡ä»¶ï¼š
/lib/systemd/system/         â† ç³»ç»Ÿé»˜è®¤æœåŠ¡æ–‡ä»¶
/etc/systemd/system/         â† ç”¨æˆ·è‡ªå®šä¹‰æœåŠ¡æ–‡ä»¶ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰

ç”¨æˆ·æœåŠ¡æ–‡ä»¶ï¼š
~/.config/systemd/user/      â† ç”¨æˆ·ä¸ªäººæœåŠ¡æ–‡ä»¶
```

**å…¸å‹çš„systemdæœåŠ¡æ–‡ä»¶**ï¼š
```ini
# /etc/systemd/system/myapp.service

[Unit]
Description=My Application Service
Documentation=https://example.com/docs
After=network.target                    # åœ¨ç½‘ç»œå¯åŠ¨åå¯åŠ¨
Requires=postgresql.service             # ä¾èµ–PostgreSQLæœåŠ¡

[Service]
Type=forking                            # æœåŠ¡ç±»å‹ï¼šåˆ†å‰å®ˆæŠ¤è¿›ç¨‹
User=myapp                              # è¿è¡Œç”¨æˆ·
Group=myapp                             # è¿è¡Œç»„
ExecStart=/usr/bin/myapp --daemon       # å¯åŠ¨å‘½ä»¤
ExecStop=/bin/kill -TERM $MAINPID       # åœæ­¢å‘½ä»¤
ExecReload=/bin/kill -HUP $MAINPID      # é‡è½½å‘½ä»¤
Restart=always                          # è‡ªåŠ¨é‡å¯ç­–ç•¥
RestartSec=10                           # é‡å¯é—´éš”10ç§’

[Install]
WantedBy=multi-user.target              # è¢«multi-user.targetéœ€è¦
```

**æœåŠ¡æ–‡ä»¶é…ç½®é¡¹è¯´æ˜**ï¼š

<details>
<summary>ğŸ” ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†é…ç½®è¯´æ˜</summary>

**[Unit]æ®µé…ç½®**ï¼š
- `Description`: æœåŠ¡æè¿°ä¿¡æ¯
- `After`: åœ¨æŒ‡å®šæœåŠ¡ä¹‹åå¯åŠ¨
- `Before`: åœ¨æŒ‡å®šæœåŠ¡ä¹‹å‰å¯åŠ¨
- `Requires`: å¼ºä¾èµ–ï¼Œä¾èµ–æœåŠ¡å¿…é¡»æˆåŠŸå¯åŠ¨
- `Wants`: å¼±ä¾èµ–ï¼Œä¾èµ–æœåŠ¡å¤±è´¥ä¸å½±å“æœ¬æœåŠ¡

**[Service]æ®µé…ç½®**ï¼š
- `Type`: æœåŠ¡ç±»å‹(simple/forking/oneshotç­‰)
- `ExecStart`: å¯åŠ¨å‘½ä»¤
- `ExecStop`: åœæ­¢å‘½ä»¤
- `Restart`: é‡å¯ç­–ç•¥(no/always/on-failureç­‰)
- `User/Group`: è¿è¡Œç”¨æˆ·å’Œç»„

**[Install]æ®µé…ç½®**ï¼š
- `WantedBy`: è¢«å“ªä¸ªtargetéœ€è¦
- `RequiredBy`: è¢«å“ªä¸ªå•å…ƒå¼ºä¾èµ–

</details>

---

## 4. ğŸ“‹ ç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬æ‰§è¡Œ


### 4.1 åˆå§‹åŒ–è„šæœ¬çš„ä½œç”¨


**ä»€ä¹ˆæ˜¯åˆå§‹åŒ–è„šæœ¬ï¼Ÿ**
```
ç®€å•ç†è§£ï¼šå°±åƒå¼€æœºæ—¶çš„"å¾…åŠäº‹é¡¹æ¸…å•"

å¾…åŠæ¸…å•å†…å®¹ï¼š
â–¡ æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ
â–¡ æŒ‚è½½å¿…è¦çš„æ–‡ä»¶ç³»ç»Ÿ  
â–¡ å¯åŠ¨ç½‘ç»œæœåŠ¡
â–¡ å¯åŠ¨ç³»ç»Ÿæ—¥å¿—
â–¡ å¯åŠ¨ç”¨æˆ·æœåŠ¡
â–¡ è®¾ç½®ç³»ç»Ÿæ—¶é—´
â–¡ åŠ è½½å†…æ ¸æ¨¡å—
```

### 4.2 SysVé£æ ¼çš„åˆå§‹åŒ–è„šæœ¬


**æ‰§è¡Œæµç¨‹**ï¼š
```
ç³»ç»Ÿå¯åŠ¨
    â†“
è¯»å– /etc/inittab (ç¡®å®šé»˜è®¤è¿è¡Œçº§åˆ«)
    â†“
æ‰§è¡Œ /etc/rc.d/rc.sysinit (ç³»ç»Ÿåˆå§‹åŒ–)
    â†“
æ‰§è¡Œå¯¹åº”è¿è¡Œçº§åˆ«çš„è„šæœ¬
    â†“
å¯åŠ¨ getty è¿›ç¨‹ (ç”¨æˆ·ç™»å½•ç•Œé¢)
```

**rc.sysinitä¸»è¦ä»»åŠ¡**ï¼š
```bash
#!/bin/bash
# /etc/rc.d/rc.sysinit çš„ä¸»è¦ä»»åŠ¡

echo "æ­£åœ¨è¿›è¡Œç³»ç»Ÿåˆå§‹åŒ–..."

# 1. æŒ‚è½½ /proc å’Œ /sys æ–‡ä»¶ç³»ç»Ÿ
mount -t proc proc /proc
mount -t sysfs sysfs /sys

# 2. æ£€æŸ¥æ ¹æ–‡ä»¶ç³»ç»Ÿ
fsck / -y

# 3. é‡æ–°æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿä¸ºè¯»å†™æ¨¡å¼
mount -o remount,rw /

# 4. æŒ‚è½½å…¶ä»–æ–‡ä»¶ç³»ç»Ÿ
mount -a

# 5. å¯åŠ¨å†…æ ¸æ—¥å¿—å®ˆæŠ¤è¿›ç¨‹
/sbin/klogd

# 6. è®¾ç½®ä¸»æœºå
hostname $(cat /etc/hostname)

# 7. åŠ è½½é¢å¤–çš„å†…æ ¸æ¨¡å—
modprobe -a $(cat /etc/modules)

echo "ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ"
```

### 4.3 systemdé£æ ¼çš„åˆå§‹åŒ–


**systemdåˆå§‹åŒ–ç›®æ ‡**ï¼š
```
sysinit.target ç³»ç»Ÿåˆå§‹åŒ–ç›®æ ‡
    â”œâ”€â”€ local-fs.target          æŒ‚è½½æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
    â”œâ”€â”€ swap.target              å¯ç”¨äº¤æ¢åˆ†åŒº
    â”œâ”€â”€ cryptsetup.target        è§£å¯†åŠ å¯†åˆ†åŒº
    â””â”€â”€ systemd-modules-load     åŠ è½½å†…æ ¸æ¨¡å—

basic.target åŸºç¡€ç³»ç»Ÿç›®æ ‡  
    â”œâ”€â”€ sysinit.target           åŒ…å«ä¸Šè¿°åˆå§‹åŒ–ç›®æ ‡
    â”œâ”€â”€ sockets.target           å¯åŠ¨å¥—æ¥å­—
    â”œâ”€â”€ timers.target            å¯åŠ¨å®šæ—¶å™¨
    â””â”€â”€ paths.target             å¯åŠ¨è·¯å¾„ç›‘æ§
```

**æŸ¥çœ‹åˆå§‹åŒ–çŠ¶æ€**ï¼š
```bash
# æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨åˆ†æ
systemd-analyze

# æŸ¥çœ‹å¯åŠ¨æ—¶é—´æœ€é•¿çš„æœåŠ¡
systemd-analyze blame

# æŸ¥çœ‹å…³é”®è·¯å¾„åˆ†æ
systemd-analyze critical-chain

# æŸ¥çœ‹å¯åŠ¨å›¾å½¢åŒ–åˆ†æ
systemd-analyze plot > boot.svg
```

---

## 5. ğŸ”— æœåŠ¡ä¾èµ–å…³ç³»ç®¡ç†


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ç®¡ç†ï¼Ÿ


**ç”Ÿæ´»ä¸­çš„ç±»æ¯”**ï¼š
```
åšé¥­çš„ä¾èµ–å…³ç³»ï¼š
ä¹°èœ â†’ æ´—èœ â†’ åˆ‡èœ â†’ ç‚’èœ â†’ è£…ç›˜

å¦‚æœä¸æŒ‰é¡ºåºï¼š
âŒ æ²¡ä¹°èœå°±å¼€å§‹ç‚’ â†’ å¤±è´¥
âŒ æ²¡æ´—èœå°±å¼€å§‹åˆ‡ â†’ ä¸å«ç”Ÿ  
âŒ æ²¡åˆ‡èœå°±å¼€å§‹ç‚’ â†’ æ— æ³•æ“ä½œ
```

**ç³»ç»ŸæœåŠ¡çš„ä¾èµ–**ï¼š
```
WebæœåŠ¡çš„ä¾èµ–é“¾ï¼š
ç½‘ç»œæœåŠ¡ â†’ æ•°æ®åº“æœåŠ¡ â†’ WebæœåŠ¡å™¨ â†’ åº”ç”¨æœåŠ¡

ä¾èµ–å…³ç³»ï¼š
Apache éœ€è¦ â†’ ç½‘ç»œå·²å¯åŠ¨
MySQL éœ€è¦ â†’ æ–‡ä»¶ç³»ç»Ÿå·²æŒ‚è½½  
PHPåº”ç”¨ éœ€è¦ â†’ Apache + MySQL éƒ½æ­£å¸¸è¿è¡Œ
```

### 5.2 systemdä¾èµ–ç±»å‹è¯¦è§£


**ä¾èµ–å…³ç³»ç±»å‹**ï¼š

```ini
# å¼ºä¾èµ– (Requires)
[Unit]
Requires=postgresql.service
# å«ä¹‰ï¼šPostgreSQLå¿…é¡»æˆåŠŸå¯åŠ¨ï¼Œå¦åˆ™æœ¬æœåŠ¡å¯åŠ¨å¤±è´¥

# å¼±ä¾èµ– (Wants)  
[Unit]
Wants=redis.service
# å«ä¹‰ï¼šå¸Œæœ›Rediså¯åŠ¨ï¼Œä½†Rediså¤±è´¥ä¸å½±å“æœ¬æœåŠ¡

# é¡ºåºä¾èµ– (After/Before)
[Unit]
After=network.target
Before=nginx.service
# å«ä¹‰ï¼šåœ¨ç½‘ç»œå¯åŠ¨ä¹‹åã€nginxå¯åŠ¨ä¹‹å‰å¯åŠ¨

# å†²çªå…³ç³» (Conflicts)
[Unit]
Conflicts=apache2.service  
# å«ä¹‰ï¼šä¸èƒ½ä¸Apache2åŒæ—¶è¿è¡Œ
```

**ä¾èµ–å…³ç³»å¯è§†åŒ–**ï¼š
```
æ•°æ®åº“Webåº”ç”¨çš„ä¾èµ–å›¾ï¼š

                    multi-user.target
                           â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚         â”‚         â”‚
            webapp.service â”‚    other.service
                 â”‚         â”‚
                 â”‚    database.service
                 â”‚         â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    network.target
                           â”‚
                    basic.target
```

### 5.3 ä¾èµ–é—®é¢˜æ’æŸ¥


**å¾ªç¯ä¾èµ–é—®é¢˜**ï¼š
```
é—®é¢˜ç¤ºä¾‹ï¼š
æœåŠ¡A ä¾èµ– æœåŠ¡B
æœåŠ¡B ä¾èµ– æœåŠ¡C  
æœåŠ¡C ä¾èµ– æœåŠ¡A  â† å½¢æˆå¾ªç¯ï¼

A â†’ B â†’ C â†’ A (æ­»å¾ªç¯)
```

**æ’æŸ¥å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹æœåŠ¡çš„ä¾èµ–å…³ç³»
systemctl list-dependencies nginx.service

# æŸ¥çœ‹åå‘ä¾èµ–ï¼ˆå“ªäº›æœåŠ¡ä¾èµ–è¿™ä¸ªæœåŠ¡ï¼‰
systemctl list-dependencies nginx.service --reverse

# æ£€æŸ¥æœåŠ¡å¯åŠ¨å¤±è´¥åŸå› 
systemctl status nginx.service
journalctl -u nginx.service

# åˆ†æä¾èµ–æ ‘
systemctl list-dependencies --all
```

---

## 6. ğŸ¯ ç³»ç»Ÿç›®æ ‡ä¸è¿è¡Œçº§åˆ«


### 6.1 è¿è¡Œçº§åˆ«çš„ç°ä»£æ›¿ä»£


**ä¼ ç»Ÿè¿è¡Œçº§åˆ« â†’ systemdç›®æ ‡çš„æ˜ å°„**ï¼š

| **SysVçº§åˆ«** | **systemdç›®æ ‡** | **è¯´æ˜** |
|-------------|----------------|----------|
| `0` | `poweroff.target` | `å…³æœºçŠ¶æ€` |
| `1` | `rescue.target` | `æ•‘æ´æ¨¡å¼(å•ç”¨æˆ·)` |
| `2,3,4` | `multi-user.target` | `å¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼` |
| `5` | `graphical.target` | `å›¾å½¢ç•Œé¢æ¨¡å¼` |
| `6` | `reboot.target` | `é‡å¯çŠ¶æ€` |

### 6.2 systemdç›®æ ‡ç®¡ç†


**æŸ¥çœ‹å’Œåˆ‡æ¢ç›®æ ‡**ï¼š
```bash
# æŸ¥çœ‹å½“å‰è¿è¡Œç›®æ ‡
systemctl get-default

# æŸ¥çœ‹å½“å‰æ¿€æ´»çš„ç›®æ ‡
systemctl list-units --type=target --state=active

# ä¸´æ—¶åˆ‡æ¢åˆ°å›¾å½¢ç•Œé¢æ¨¡å¼
systemctl isolate graphical.target

# ä¸´æ—¶åˆ‡æ¢åˆ°å‘½ä»¤è¡Œæ¨¡å¼  
systemctl isolate multi-user.target

# è®¾ç½®é»˜è®¤å¯åŠ¨ç›®æ ‡
systemctl set-default multi-user.target
```

**ç›®æ ‡çš„å±‚æ¬¡ç»“æ„**ï¼š
```
graphical.target (å›¾å½¢ç•Œé¢)
    â”‚
    â”œâ”€â”€ multi-user.target (å¤šç”¨æˆ·)
    â”‚       â”‚
    â”‚       â”œâ”€â”€ basic.target (åŸºç¡€ç³»ç»Ÿ)
    â”‚       â”‚       â”‚  
    â”‚       â”‚       â”œâ”€â”€ sysinit.target (ç³»ç»Ÿåˆå§‹åŒ–)
    â”‚       â”‚       â”‚       â”‚
    â”‚       â”‚       â”‚       â””â”€â”€ local-fs.target (æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ)
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â”€ sockets.target (å¥—æ¥å­—)
    â”‚       â”‚
    â”‚       â””â”€â”€ network.target (ç½‘ç»œ)
    â”‚
    â””â”€â”€ display-manager.service (æ˜¾ç¤ºç®¡ç†å™¨)
```

### 6.3 è‡ªå®šä¹‰ç³»ç»Ÿç›®æ ‡


**åˆ›å»ºè‡ªå®šä¹‰ç›®æ ‡**ï¼š
```ini
# /etc/systemd/system/kiosk.target

[Unit]
Description=Kiosk Mode Target
Documentation=man:systemd.special(7)
Requires=multi-user.target
Conflicts=rescue.service rescue.target
After=multi-user.target graphical.target
AllowIsolate=yes

[Install]
WantedBy=default.target
```

**åº”ç”¨åœºæ™¯ç¤ºä¾‹**ï¼š
```
ğŸ”¸ å¼€å‘ç¯å¢ƒç›®æ ‡ï¼šåªå¯åŠ¨å¼€å‘å¿…éœ€çš„æœåŠ¡
ğŸ”¸ ç”Ÿäº§ç¯å¢ƒç›®æ ‡ï¼šå¯åŠ¨å®Œæ•´çš„æœåŠ¡æ ˆ
ğŸ”¸ ç»´æŠ¤æ¨¡å¼ç›®æ ‡ï¼šå…³é—­éå¿…è¦æœåŠ¡ï¼Œä¾¿äºç»´æŠ¤
ğŸ”¸ å±•ç¤ºæ¨¡å¼ç›®æ ‡ï¼šä¸“é—¨ç”¨äºå±•ç¤ºçš„ç²¾ç®€é…ç½®
```

---

## 7. ğŸ“Š åˆå§‹åŒ–è¿‡ç¨‹ç›‘æ§


### 7.1 å¯åŠ¨è¿‡ç¨‹åˆ†æå·¥å…·


**systemd-analyzeå·¥å…·é›†**ï¼š
```bash
# æŸ¥çœ‹æ€»å¯åŠ¨æ—¶é—´
systemd-analyze
# è¾“å‡ºç¤ºä¾‹ï¼š
# Startup finished in 2.547s (kernel) + 8.523s (userspace) = 11.070s

# æŸ¥çœ‹æ¯ä¸ªæœåŠ¡çš„å¯åŠ¨æ—¶é—´
systemd-analyze blame
# è¾“å‡ºç¤ºä¾‹ï¼š
#    3.234s postgresql.service
#    2.456s apache2.service  
#    1.789s NetworkManager.service

# æŸ¥çœ‹å¯åŠ¨çš„å…³é”®è·¯å¾„
systemd-analyze critical-chain
# æ˜¾ç¤ºå½±å“å¯åŠ¨æ—¶é—´çš„å…³é”®æœåŠ¡é“¾

# ç”Ÿæˆå¯åŠ¨æ—¶åºå›¾
systemd-analyze plot > boot-analysis.svg
```

### 7.2 å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€


**journalctlæ—¥å¿—æŸ¥çœ‹**ï¼š
```bash
# æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¥å¿—
journalctl -b

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡çš„æ—¥å¿—
journalctl -u nginx.service

# å®æ—¶è·Ÿè¸ªæ—¥å¿—
journalctl -f

# æŸ¥çœ‹ä¸Šæ¬¡å¯åŠ¨çš„æ—¥å¿—
journalctl -b -1

# æŒ‰ä¼˜å…ˆçº§è¿‡æ»¤æ—¥å¿—
journalctl -p err  # åªçœ‹é”™è¯¯çº§åˆ«çš„æ—¥å¿—
```

**ç³»ç»ŸçŠ¶æ€ç›‘æ§**ï¼š
```bash
# æŸ¥çœ‹ç³»ç»Ÿæ•´ä½“çŠ¶æ€
systemctl status

# æŸ¥çœ‹å¤±è´¥çš„æœåŠ¡
systemctl --failed

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
systemctl list-units --type=service

# æŸ¥çœ‹å¯åŠ¨ä»»åŠ¡çŠ¶æ€
systemctl list-jobs
```

### 7.3 å¯åŠ¨é—®é¢˜è¯Šæ–­


**å¸¸è§å¯åŠ¨é—®é¢˜åŠè§£å†³æ–¹æ³•**ï¼š

<details>
<summary>ğŸ› ï¸ æœåŠ¡å¯åŠ¨å¤±è´¥è¯Šæ–­</summary>

```bash
# 1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status myservice.service

# 2. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—  
journalctl -u myservice.service -n 50

# 3. æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
systemd-analyze verify myservice.service

# 4. æ‰‹åŠ¨æµ‹è¯•æœåŠ¡
sudo -u myuser /path/to/service --test

# 5. æ£€æŸ¥æƒé™å’Œè·¯å¾„
ls -la /path/to/service
```

</details>

**å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–å»ºè®®**ï¼š
```
ğŸ”§ ä¼˜åŒ–ç­–ç•¥ï¼š

1. å¹¶è¡ŒåŒ–å¯åŠ¨ï¼š
   - å‡å°‘ä¸å¿…è¦çš„Afterä¾èµ–
   - ä½¿ç”¨socketæ¿€æ´»å»¶è¿Ÿå¯åŠ¨

2. æœåŠ¡ç²¾ç®€ï¼š
   - ç¦ç”¨ä¸éœ€è¦çš„æœåŠ¡
   - ä½¿ç”¨systemctl mask ç¦ç”¨æœåŠ¡

3. æ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–ï¼š
   - ä½¿ç”¨SSDå­˜å‚¨
   - ä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿå‚æ•°

4. å†…æ ¸å‚æ•°è°ƒä¼˜ï¼š
   - è°ƒæ•´å¯åŠ¨å‚æ•°
   - ä¼˜åŒ–å†…æ ¸æ¨¡å—åŠ è½½
```

---

## 8. ğŸ”„ initç³»ç»Ÿåˆ‡æ¢æ–¹æ³•


### 8.1 æŸ¥çœ‹å½“å‰initç³»ç»Ÿ


**è¯†åˆ«å½“å‰ä½¿ç”¨çš„initç³»ç»Ÿ**ï¼š
```bash
# æ–¹æ³•1ï¼šæ£€æŸ¥PID 1è¿›ç¨‹
ps -p 1

# systemdè¾“å‡ºç¤ºä¾‹ï¼š
# PID TTY      STAT   TIME COMMAND
#   1 ?        Ss     0:01 /lib/systemd/systemd --system

# SysV initè¾“å‡ºç¤ºä¾‹ï¼š  
# PID TTY      STAT   TIME COMMAND
#   1 ?        Ss     0:01 /sbin/init

# æ–¹æ³•2ï¼šæ£€æŸ¥initç³»ç»Ÿæ–‡ä»¶
ls -la /sbin/init

# æ–¹æ³•3ï¼šä½¿ç”¨systemdå‘½ä»¤æµ‹è¯•
systemctl --version  # å¦‚æœèƒ½æ‰§è¡Œè¯´æ˜æ˜¯systemd
```

### 8.2 ä»SysVåˆ‡æ¢åˆ°systemd


**åˆ‡æ¢æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒsystemd
systemd --version

# 2. å®‰è£…systemd (å¦‚æœæœªå®‰è£…)
sudo apt install systemd systemd-sysv  # Debian/Ubuntu
sudo yum install systemd              # CentOS/RHEL

# 3. è¿ç§»æœåŠ¡é…ç½®
# å°†/etc/init.d/ä¸‹çš„è„šæœ¬è½¬æ¢ä¸ºsystemdæœåŠ¡æ–‡ä»¶

# 4. è®¾ç½®systemdä¸ºé»˜è®¤init
sudo ln -sf /lib/systemd/systemd /sbin/init

# 5. é‡å¯ç³»ç»Ÿ
sudo reboot
```

**æœåŠ¡è¿ç§»ç¤ºä¾‹**ï¼š
```bash
# åŸSysVè„šæœ¬ï¼š/etc/init.d/myapp
# è½¬æ¢ä¸ºsystemdæœåŠ¡ï¼š

# åˆ›å»º /etc/systemd/system/myapp.service
[Unit]
Description=My Application
After=network.target

[Service]
Type=forking
ExecStart=/usr/bin/myapp --daemon
ExecStop=/bin/kill -TERM $MAINPID
PIDFile=/var/run/myapp.pid

[Install]
WantedBy=multi-user.target

# å¯ç”¨æ–°æœåŠ¡
sudo systemctl enable myapp.service
sudo systemctl start myapp.service
```

### 8.3 initç³»ç»Ÿå…±å­˜


**ä¸´æ—¶åˆ‡æ¢initç³»ç»Ÿ**ï¼š
```bash
# å¯åŠ¨æ—¶é€‰æ‹©ä¸åŒçš„initç³»ç»Ÿ
# åœ¨GRUBå¯åŠ¨èœå•ä¸­æ·»åŠ å†…æ ¸å‚æ•°

# ä½¿ç”¨systemdå¯åŠ¨ï¼š
linux /vmlinuz-5.4.0 root=/dev/sda1 init=/lib/systemd/systemd

# ä½¿ç”¨SysV initå¯åŠ¨ï¼š  
linux /vmlinuz-5.4.0 root=/dev/sda1 init=/sbin/init

# ä½¿ç”¨å…¶ä»–initç³»ç»Ÿï¼š
linux /vmlinuz-5.4.0 root=/dev/sda1 init=/usr/bin/runit-init
```

**æ³¨æ„äº‹é¡¹**ï¼š
```
âš ï¸ åˆ‡æ¢initç³»ç»Ÿçš„é£é™©ï¼š

1. æœåŠ¡é…ç½®ä¸å…¼å®¹
   è§£å†³ï¼šæå‰è¿ç§»å’Œæµ‹è¯•æœåŠ¡é…ç½®

2. ä¾èµ–å…³ç³»å˜åŒ–  
   è§£å†³ï¼šé‡æ–°æ¢³ç†æœåŠ¡ä¾èµ–å…³ç³»

3. ç³»ç»Ÿå·¥å…·å·®å¼‚
   è§£å†³ï¼šå­¦ä¹ æ–°initç³»ç»Ÿçš„ç®¡ç†å‘½ä»¤

4. å¯åŠ¨è„šæœ¬å¤±æ•ˆ
   è§£å†³ï¼šé‡å†™æˆ–è½¬æ¢å¯åŠ¨è„šæœ¬
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ initè¿›ç¨‹æœ¬è´¨ï¼šPID 1ï¼Œç³»ç»Ÿçš„æ€»ç®¡å®¶ï¼Œè´Ÿè´£å¯åŠ¨å’Œç®¡ç†æ‰€æœ‰æœåŠ¡
ğŸ”¸ SysV Initï¼šä¼ ç»Ÿçš„åŸºäºè¿è¡Œçº§åˆ«çš„ä¸²è¡Œå¯åŠ¨æ–¹å¼
ğŸ”¸ systemdï¼šç°ä»£åŒ–çš„å¹¶è¡Œå¯åŠ¨ç³»ç»Ÿï¼ŒåŸºäºunitå’Œtargetæ¦‚å¿µ
ğŸ”¸ ä¾èµ–ç®¡ç†ï¼šæœåŠ¡ä¹‹é—´çš„å¯åŠ¨é¡ºåºå’Œä¾èµ–å…³ç³»ç®¡ç†
ğŸ”¸ ç³»ç»Ÿç›‘æ§ï¼šä½¿ç”¨å„ç§å·¥å…·åˆ†æå’Œä¼˜åŒ–å¯åŠ¨è¿‡ç¨‹
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ initç³»ç»Ÿçš„æ¼”è¿›é€»è¾‘**
```
ä¸²è¡Œå¯åŠ¨ â†’ å¹¶è¡Œå¯åŠ¨
æ‰‹åŠ¨ç®¡ç† â†’ è‡ªåŠ¨åŒ–ç®¡ç†  
ç®€å•è„šæœ¬ â†’ ç»“æ„åŒ–é…ç½®
åŸºæœ¬åŠŸèƒ½ â†’ ä¸°å¯Œç‰¹æ€§

æ ¸å¿ƒé©±åŠ¨åŠ›ï¼š
- æé«˜å¯åŠ¨é€Ÿåº¦
- ç®€åŒ–æœåŠ¡ç®¡ç†
- å¢å¼ºç³»ç»Ÿå¯é æ€§
```

**ğŸ”¹ é€‰æ‹©initç³»ç»Ÿçš„è€ƒè™‘å› ç´ **
```
ç³»ç»Ÿç±»å‹ï¼š
- æœåŠ¡å™¨ï¼šåå‘systemdï¼ˆç®¡ç†æ–¹ä¾¿ï¼‰
- åµŒå…¥å¼ï¼šåå‘è½»é‡çº§initï¼ˆèµ„æºå ç”¨å°‘ï¼‰
- æ¡Œé¢ï¼šé€šå¸¸ä½¿ç”¨systemdï¼ˆåŠŸèƒ½ä¸°å¯Œï¼‰

å…¼å®¹æ€§è¦æ±‚ï¼š
- æ–°ç³»ç»Ÿï¼šç›´æ¥ä½¿ç”¨systemd
- è€ç³»ç»Ÿï¼šè°¨æ…å‡çº§ï¼Œåšå¥½æµ‹è¯•
- ç‰¹æ®Šç¯å¢ƒï¼šæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©
```

**ğŸ”¹ æœåŠ¡ç®¡ç†çš„æœ€ä½³å®è·µ**
```
é…ç½®åŸåˆ™ï¼š
1. æ˜ç¡®æœåŠ¡ä¾èµ–å…³ç³»
2. åˆç†è®¾ç½®é‡å¯ç­–ç•¥
3. é…ç½®é€‚å½“çš„èµ„æºé™åˆ¶
4. åšå¥½æ—¥å¿—è®°å½•å’Œç›‘æ§

æ•…éšœå¤„ç†ï¼š
1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—
2. æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
3. éªŒè¯ä¾èµ–æœåŠ¡çŠ¶æ€  
4. æµ‹è¯•æœåŠ¡ç‹¬ç«‹è¿è¡Œ
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ç³»ç»Ÿç®¡ç†åº”ç”¨**
- **æœåŠ¡å™¨è¿ç»´**ï¼šå¿«é€Ÿè¯Šæ–­å’Œè§£å†³æœåŠ¡å¯åŠ¨é—®é¢˜
- **ç³»ç»Ÿä¼˜åŒ–**ï¼šåˆ†æå¯åŠ¨ç“¶é¢ˆï¼Œä¼˜åŒ–å¯åŠ¨æ—¶é—´
- **æœåŠ¡éƒ¨ç½²**ï¼šæ­£ç¡®é…ç½®æœåŠ¡çš„ä¾èµ–å’Œå¯åŠ¨å‚æ•°
- **æ•…éšœæ¢å¤**ï¼šç†è§£åˆå§‹åŒ–è¿‡ç¨‹ï¼Œå¿«é€Ÿå®šä½é—®é¢˜

**ğŸ”§ å®ç”¨æŠ€èƒ½æŒæ¡**
- **å‘½ä»¤æ“ä½œ**ï¼šç†Ÿç»ƒä½¿ç”¨systemctlã€journalctlç­‰å·¥å…·
- **é…ç½®ç¼–å†™**ï¼šèƒ½å¤Ÿç¼–å†™å’Œä¿®æ”¹systemdæœåŠ¡æ–‡ä»¶
- **é—®é¢˜è¯Šæ–­**ï¼šæŒæ¡å¯åŠ¨é—®é¢˜çš„æ’æŸ¥æ–¹æ³•
- **ç³»ç»Ÿè°ƒä¼˜**ï¼šäº†è§£å¯åŠ¨ä¼˜åŒ–çš„åŸºæœ¬æ–¹æ³•

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
initè¿›ç¨‹PIDä¸€ï¼Œç³»ç»Ÿç®¡å®¶è´£ä»»å¤§
SysVä¸²è¡ŒæŒ‰çº§åˆ«ï¼Œsystemdå¹¶è¡Œæ›´ç°ä»£
ä¾èµ–å…³ç³»è¦ç†æ¸…ï¼ŒæœåŠ¡å¯åŠ¨æœ‰å…ˆå
ç›‘æ§åˆ†ææ‰¾ç“¶é¢ˆï¼Œä¼˜åŒ–å¯åŠ¨é€Ÿåº¦å¿«
åˆ‡æ¢ç³»ç»Ÿè¦è°¨æ…ï¼Œæµ‹è¯•å……åˆ†å†å®æ–½
```

---

> ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šinitç³»ç»Ÿæ˜¯Linuxçš„æ ¸å¿ƒç»„ä»¶ï¼Œå»ºè®®é€šè¿‡å®é™…æ“ä½œæ¥åŠ æ·±ç†è§£ã€‚å¯ä»¥åœ¨è™šæ‹Ÿæœºä¸­å°è¯•ä¸åŒçš„é…ç½®ï¼Œè§‚å¯Ÿå¯åŠ¨è¿‡ç¨‹çš„å˜åŒ–ï¼Œè¿™æ ·èƒ½æ›´å¥½åœ°æŒæ¡è¿™äº›æ¦‚å¿µå’ŒæŠ€èƒ½ã€‚