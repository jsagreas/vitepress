---
title: 11ã€å¯åŠ¨é…ç½®ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [é»˜è®¤å¯åŠ¨é…ç½®](#1-é»˜è®¤å¯åŠ¨é…ç½®)
2. [å¯åŠ¨å‚æ•°æŒä¹…åŒ–](#2-å¯åŠ¨å‚æ•°æŒä¹…åŒ–)
3. [å¤šå¯åŠ¨é…ç½®ç®¡ç†](#3-å¤šå¯åŠ¨é…ç½®ç®¡ç†)
4. [å¯åŠ¨é…ç½®å¤‡ä»½](#4-å¯åŠ¨é…ç½®å¤‡ä»½)
5. [é…ç½®ç‰ˆæœ¬æ§åˆ¶](#5-é…ç½®ç‰ˆæœ¬æ§åˆ¶)
6. [è‡ªåŠ¨åŒ–é…ç½®éƒ¨ç½²](#6-è‡ªåŠ¨åŒ–é…ç½®éƒ¨ç½²)
7. [é…ç½®åˆè§„æ£€æŸ¥](#7-é…ç½®åˆè§„æ£€æŸ¥)
8. [å¯åŠ¨ç¯å¢ƒæ ‡å‡†åŒ–](#8-å¯åŠ¨ç¯å¢ƒæ ‡å‡†åŒ–)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ é»˜è®¤å¯åŠ¨é…ç½®


### 1.1 ä»€ä¹ˆæ˜¯é»˜è®¤å¯åŠ¨é…ç½®


**ç®€å•ç†è§£**ï¼šå°±æ˜¯ç³»ç»Ÿå¼€æœºæ—¶è‡ªåŠ¨ä½¿ç”¨çš„é…ç½®è®¾ç½®ï¼Œå†³å®šäº†Linuxç³»ç»Ÿå¦‚ä½•å¯åŠ¨ã€‚

```
æ¯”å¦‚ï¼š
- ç³»ç»Ÿå¯åŠ¨åˆ°å›¾å½¢ç•Œé¢è¿˜æ˜¯å‘½ä»¤è¡Œç•Œé¢
- å¯åŠ¨æ—¶åŠ è½½å“ªäº›æœåŠ¡
- å†…æ ¸å¯åŠ¨å‚æ•°
- ç½‘ç»œé…ç½®ç­‰ç­‰
```

**ğŸ”¸ é»˜è®¤å¯åŠ¨é…ç½®åŒ…å«çš„å†…å®¹**
- **è¿è¡Œçº§åˆ«**ï¼šç³»ç»Ÿå¯åŠ¨åè¿è¡Œåœ¨å“ªä¸ªæ¨¡å¼
- **å¯åŠ¨æœåŠ¡**ï¼šå“ªäº›æœåŠ¡ä¼šè‡ªåŠ¨å¯åŠ¨
- **å†…æ ¸å‚æ•°**ï¼šä¼ é€’ç»™å†…æ ¸çš„å‚æ•°
- **ç¯å¢ƒå˜é‡**ï¼šç³»ç»Ÿå¯åŠ¨æ—¶çš„ç¯å¢ƒè®¾ç½®

### 1.2 è¿è¡Œçº§åˆ«é…ç½®


**ä»€ä¹ˆæ˜¯è¿è¡Œçº§åˆ«**ï¼Ÿç®€å•è¯´å°±æ˜¯ç³»ç»Ÿçš„ä¸åŒå·¥ä½œæ¨¡å¼ã€‚

```
ä¼ ç»Ÿè¿è¡Œçº§åˆ«ï¼ˆSysVç³»ç»Ÿï¼‰ï¼š
0 - å…³æœº
1 - å•ç”¨æˆ·æ¨¡å¼ï¼ˆç»´æŠ¤æ¨¡å¼ï¼‰
2 - å¤šç”¨æˆ·æ¨¡å¼ï¼Œæ— ç½‘ç»œæœåŠ¡
3 - å®Œæ•´å¤šç”¨æˆ·æ¨¡å¼ï¼Œå‘½ä»¤è¡Œç•Œé¢
4 - æœªä½¿ç”¨
5 - å›¾å½¢ç•Œé¢æ¨¡å¼
6 - é‡å¯

ç°ä»£ç³»ç»Ÿï¼ˆsystemdï¼‰ï¼š
multi-user.target    â† ç›¸å½“äºè¿è¡Œçº§åˆ«3
graphical.target     â† ç›¸å½“äºè¿è¡Œçº§åˆ«5
```

**æŸ¥çœ‹å’Œè®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«**ï¼š
```bash
# æŸ¥çœ‹å½“å‰é»˜è®¤target
systemctl get-default

# è®¾ç½®é»˜è®¤åˆ°å‘½ä»¤è¡Œç•Œé¢
systemctl set-default multi-user.target

# è®¾ç½®é»˜è®¤åˆ°å›¾å½¢ç•Œé¢
systemctl set-default graphical.target
```

### 1.3 å¯åŠ¨æœåŠ¡é…ç½®


**ä»€ä¹ˆæ„æ€**ï¼Ÿå°±æ˜¯è®¾ç½®å“ªäº›ç¨‹åºåœ¨å¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨ã€‚

**ğŸ”¸ å¯ç”¨/ç¦ç”¨æœåŠ¡**
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
systemctl list-unit-files --type=service

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl enable nginx

# ç¦ç”¨æœåŠ¡ï¼ˆå¼€æœºä¸å¯ï¼‰
systemctl disable nginx

# æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºè‡ªå¯
systemctl is-enabled nginx
```

**ğŸ’¡ å®é™…ä¾‹å­**ï¼š
```bash
# è®©SSHæœåŠ¡å¼€æœºè‡ªå¯ï¼ˆè¿œç¨‹è¿æ¥éœ€è¦ï¼‰
systemctl enable sshd

# ç¦ç”¨è“ç‰™æœåŠ¡ï¼ˆæœåŠ¡å™¨ä¸éœ€è¦ï¼‰
systemctl disable bluetooth

# å¯ç”¨é˜²ç«å¢™æœåŠ¡
systemctl enable firewalld
```

---

## 2. ğŸ“ å¯åŠ¨å‚æ•°æŒä¹…åŒ–


### 2.1 ä»€ä¹ˆæ˜¯å¯åŠ¨å‚æ•°æŒä¹…åŒ–


**é€šä¿—è§£é‡Š**ï¼šå°±æ˜¯æŠŠä¸´æ—¶çš„å¯åŠ¨è®¾ç½®å˜æˆæ°¸ä¹…çš„ï¼Œé‡å¯åä¾ç„¶ç”Ÿæ•ˆã€‚

```
æ¯”å¦‚ï¼š
ä¸´æ—¶ä¿®æ”¹ï¼šåªå¯¹å½“å‰å¯åŠ¨æœ‰æ•ˆï¼Œé‡å¯å°±æ²¡äº†
æŒä¹…åŒ–ï¼šå†™å…¥é…ç½®æ–‡ä»¶ï¼Œæ°¸ä¹…ç”Ÿæ•ˆ
```

### 2.2 GRUBé…ç½®æ–‡ä»¶


**GRUBæ˜¯ä»€ä¹ˆ**ï¼Ÿå°±æ˜¯Linuxçš„å¯åŠ¨ç®¡ç†å™¨ï¼Œç±»ä¼¼Windowsçš„å¯åŠ¨èœå•ã€‚

**ğŸ”¸ ä¸»è¦é…ç½®æ–‡ä»¶**
```
/etc/default/grub          â† GRUBçš„ä¸»é…ç½®æ–‡ä»¶
/boot/grub2/grub.cfg       â† GRUBçš„å®é™…é…ç½®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
/etc/grub.d/               â† GRUBé…ç½®è„šæœ¬ç›®å½•
```

**ç¼–è¾‘GRUBé…ç½®**ï¼š
```bash
# ç¼–è¾‘GRUBé…ç½®æ–‡ä»¶
vim /etc/default/grub

# å¸¸è§é…ç½®é¡¹ï¼š
GRUB_TIMEOUT=5                    # å¯åŠ¨èœå•ç­‰å¾…æ—¶é—´
GRUB_DEFAULT=0                    # é»˜è®¤å¯åŠ¨é¡¹
GRUB_CMDLINE_LINUX="quiet splash" # å†…æ ¸å¯åŠ¨å‚æ•°

# åº”ç”¨é…ç½®æ›´æ”¹
grub2-mkconfig -o /boot/grub2/grub.cfg
```

### 2.3 å†…æ ¸å‚æ•°æŒä¹…åŒ–


**ä»€ä¹ˆæ˜¯å†…æ ¸å‚æ•°**ï¼Ÿå°±æ˜¯å‘Šè¯‰Linuxå†…æ ¸å¦‚ä½•å·¥ä½œçš„è®¾ç½®ã€‚

**ğŸ”¸ ä¿®æ”¹æ–¹æ³•**
```bash
# æ–¹æ³•1ï¼šé€šè¿‡GRUBé…ç½®
vim /etc/default/grub
GRUB_CMDLINE_LINUX="quiet rhgb intel_iommu=on"

# æ–¹æ³•2ï¼šé€šè¿‡grubbyå‘½ä»¤
grubby --update-kernel=ALL --args="intel_iommu=on"

# æ–¹æ³•3ï¼š/etc/sysctl.confï¼ˆè¿è¡Œæ—¶å‚æ•°ï¼‰
echo "vm.swappiness=10" >> /etc/sysctl.conf
```

**ğŸ’¡ å¸¸ç”¨å†…æ ¸å‚æ•°ç¤ºä¾‹**ï¼š
```bash
quiet              # å®‰é™å¯åŠ¨ï¼Œä¸æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
rhgb               # æ˜¾ç¤ºå›¾å½¢å¯åŠ¨ç”»é¢
intel_iommu=on     # å¯ç”¨Intel IOMMU
numa=off           # ç¦ç”¨NUMA
elevator=deadline  # ä½¿ç”¨deadlineè°ƒåº¦å™¨
```

---

## 3. ğŸ”„ å¤šå¯åŠ¨é…ç½®ç®¡ç†


### 3.1 ä»€ä¹ˆæ˜¯å¤šå¯åŠ¨é…ç½®


**ç®€å•ç†è§£**ï¼šå°±æ˜¯åœ¨ä¸€å°ç”µè„‘ä¸Šå®‰è£…å¤šä¸ªç³»ç»Ÿæˆ–åŒä¸€ç³»ç»Ÿçš„ä¸åŒç‰ˆæœ¬ï¼Œå¼€æœºæ—¶å¯ä»¥é€‰æ‹©ã€‚

```
å¸¸è§åœºæ™¯ï¼š
- Windows + Linux åŒç³»ç»Ÿ
- å¤šä¸ªLinuxå‘è¡Œç‰ˆ
- ç”Ÿäº§å†…æ ¸ + æµ‹è¯•å†…æ ¸
- ä¸åŒé…ç½®çš„å¯åŠ¨é€‰é¡¹
```

### 3.2 GRUBèœå•ç®¡ç†


**ğŸ”¸ æŸ¥çœ‹å¯åŠ¨é¡¹**
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯åŠ¨é¡¹
grubby --info=ALL

# æŸ¥çœ‹é»˜è®¤å¯åŠ¨é¡¹
grubby --default-kernel

# æŸ¥çœ‹å¯åŠ¨é¡¹æ ‡é¢˜
grubby --info=ALL | grep title
```

**ğŸ”¸ ç®¡ç†å¯åŠ¨é¡¹**
```bash
# æ·»åŠ æ–°çš„å¯åŠ¨é¡¹
grubby --add-kernel=/boot/vmlinuz-new \
       --initrd=/boot/initramfs-new.img \
       --title="Test Kernel"

# åˆ é™¤å¯åŠ¨é¡¹
grubby --remove-kernel=/boot/vmlinuz-old

# è®¾ç½®é»˜è®¤å¯åŠ¨é¡¹
grubby --set-default=/boot/vmlinuz-5.4.0
```

### 3.3 å¯åŠ¨é…ç½®æ¨¡æ¿


**ä»€ä¹ˆæ˜¯æ¨¡æ¿**ï¼Ÿå°±æ˜¯é¢„å…ˆè®¾è®¡å¥½çš„é…ç½®æ–¹æ¡ˆï¼Œéœ€è¦æ—¶å¯ä»¥å¿«é€Ÿåº”ç”¨ã€‚

**ğŸ”¸ åˆ›å»ºé…ç½®æ¨¡æ¿**
```bash
# åˆ›å»ºæ¨¡æ¿ç›®å½•
mkdir -p /etc/boot-templates

# ç”Ÿäº§ç¯å¢ƒæ¨¡æ¿
cat > /etc/boot-templates/production.conf << EOF
# ç”Ÿäº§ç¯å¢ƒå¯åŠ¨é…ç½®
GRUB_TIMEOUT=3
GRUB_DEFAULT=0
GRUB_CMDLINE_LINUX="quiet rhgb elevator=deadline"
EOF

# å¼€å‘ç¯å¢ƒæ¨¡æ¿
cat > /etc/boot-templates/development.conf << EOF
# å¼€å‘ç¯å¢ƒå¯åŠ¨é…ç½®
GRUB_TIMEOUT=10
GRUB_DEFAULT=0
GRUB_CMDLINE_LINUX="debug systemd.log_level=debug"
EOF
```

**ğŸ”¸ åº”ç”¨æ¨¡æ¿è„šæœ¬**
```bash
#!/bin/bash
# åº”ç”¨å¯åŠ¨é…ç½®æ¨¡æ¿

apply_template() {
    template=$1
    if [ -f "/etc/boot-templates/${template}.conf" ]; then
        cp /etc/default/grub /etc/default/grub.bak
        cp "/etc/boot-templates/${template}.conf" /etc/default/grub
        grub2-mkconfig -o /boot/grub2/grub.cfg
        echo "æ¨¡æ¿ ${template} åº”ç”¨æˆåŠŸ"
    else
        echo "æ¨¡æ¿ ${template} ä¸å­˜åœ¨"
    fi
}

# ä½¿ç”¨æ–¹æ³•ï¼š./apply_template.sh production
apply_template $1
```

---

## 4. ğŸ’¾ å¯åŠ¨é…ç½®å¤‡ä»½


### 4.1 ä¸ºä»€ä¹ˆè¦å¤‡ä»½å¯åŠ¨é…ç½®


**é‡è¦æ€§**ï¼šå¯åŠ¨é…ç½®å‡ºé”™ä¼šå¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨ï¼Œå¤‡ä»½æ˜¯å®‰å…¨ç½‘ã€‚

```
é£é™©åœºæ™¯ï¼š
- è¯¯åˆ å¯åŠ¨é¡¹
- å†…æ ¸å‚æ•°é…ç½®é”™è¯¯
- GRUBé…ç½®æ–‡ä»¶æŸå
- æ›´æ–°ç³»ç»Ÿåå¯åŠ¨å¤±è´¥
```

### 4.2 å¤‡ä»½ç­–ç•¥


**ğŸ”¸ å¤‡ä»½å†…å®¹æ¸…å•**
```
å…³é”®æ–‡ä»¶ï¼š
/etc/default/grub              â† GRUBä¸»é…ç½®
/boot/grub2/grub.cfg           â† GRUBèœå•é…ç½®
/etc/fstab                     â† æ–‡ä»¶ç³»ç»ŸæŒ‚è½½
/etc/systemd/system/           â† systemdæœåŠ¡é…ç½®
/boot/                         â† å†…æ ¸å’Œinitramfsæ–‡ä»¶
```

**ğŸ”¸ è‡ªåŠ¨å¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
# å¯åŠ¨é…ç½®å¤‡ä»½è„šæœ¬

BACKUP_DIR="/backup/boot-config"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_PATH="${BACKUP_DIR}/${DATE}"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_PATH"

# å¤‡ä»½å…³é”®é…ç½®æ–‡ä»¶
echo "å¼€å§‹å¤‡ä»½å¯åŠ¨é…ç½®..."

# å¤‡ä»½GRUBé…ç½®
cp /etc/default/grub "$BACKUP_PATH/grub.default"
cp /boot/grub2/grub.cfg "$BACKUP_PATH/grub.cfg"

# å¤‡ä»½fstab
cp /etc/fstab "$BACKUP_PATH/"

# å¤‡ä»½systemdé…ç½®
tar -czf "$BACKUP_PATH/systemd.tar.gz" /etc/systemd/system/

# å¤‡ä»½å†…æ ¸ä¿¡æ¯
ls -la /boot/vmlinuz* > "$BACKUP_PATH/kernel-list.txt"
ls -la /boot/initramfs* > "$BACKUP_PATH/initramfs-list.txt"

# åˆ›å»ºå¤‡ä»½è¯´æ˜
cat > "$BACKUP_PATH/README.txt" << EOF
å¤‡ä»½æ—¶é—´: $(date)
ç³»ç»Ÿç‰ˆæœ¬: $(cat /etc/redhat-release 2>/dev/null || cat /etc/os-release | head -1)
å†…æ ¸ç‰ˆæœ¬: $(uname -r)
å½“å‰è¿è¡Œçº§åˆ«: $(systemctl get-default)
EOF

echo "å¤‡ä»½å®Œæˆ: $BACKUP_PATH"

# ä¿ç•™æœ€è¿‘10æ¬¡å¤‡ä»½
ls -t "$BACKUP_DIR" | tail -n +11 | xargs -I {} rm -rf "$BACKUP_DIR/{}"
```

### 4.3 æ¢å¤é…ç½®


**ğŸ”¸ æ¢å¤æ­¥éª¤**
```bash
# 1. é€‰æ‹©å¤‡ä»½ç‚¹
ls -la /backup/boot-config/

# 2. æ¢å¤GRUBé…ç½®
cp /backup/boot-config/20250115_103000/grub.default /etc/default/grub

# 3. é‡æ–°ç”ŸæˆGRUBèœå•
grub2-mkconfig -o /boot/grub2/grub.cfg

# 4. æ¢å¤fstabï¼ˆè°¨æ…æ“ä½œï¼‰
cp /backup/boot-config/20250115_103000/fstab /etc/fstab

# 5. é‡å¯æµ‹è¯•
reboot
```

---

## 5. ğŸ“Š é…ç½®ç‰ˆæœ¬æ§åˆ¶


### 5.1 ä»€ä¹ˆæ˜¯é…ç½®ç‰ˆæœ¬æ§åˆ¶


**é€šä¿—è§£é‡Š**ï¼šå°±åƒç¨‹åºå‘˜ç®¡ç†ä»£ç ä¸€æ ·ï¼Œç”¨Gitæ¥ç®¡ç†å¯åŠ¨é…ç½®æ–‡ä»¶çš„å˜æ›´å†å²ã€‚

```
å¥½å¤„ï¼š
- è¿½è¸ªæ¯æ¬¡é…ç½®ä¿®æ”¹
- å¯ä»¥å›é€€åˆ°ä»»æ„ç‰ˆæœ¬
- å¤šäººåä½œç®¡ç†é…ç½®
- é…ç½®å˜æ›´å®¡è®¡
```

### 5.2 ä½¿ç”¨Gitç®¡ç†é…ç½®


**ğŸ”¸ åˆå§‹åŒ–é…ç½®ä»“åº“**
```bash
# åˆ›å»ºé…ç½®ç®¡ç†ç›®å½•
mkdir -p /etc/boot-config-repo
cd /etc/boot-config-repo

# åˆå§‹åŒ–Gitä»“åº“
git init
git config user.name "System Admin"
git config user.email "admin@company.com"

# åˆ›å»ºé…ç½®æ–‡ä»¶ç»“æ„
mkdir -p {grub,systemd,kernel}

# å¤åˆ¶å½“å‰é…ç½®
cp /etc/default/grub grub/
cp /etc/fstab ./
cp -r /etc/systemd/system/ systemd/

# åˆå§‹æäº¤
git add .
git commit -m "åˆå§‹å¯åŠ¨é…ç½®"
```

**ğŸ”¸ é…ç½®å˜æ›´ç®¡ç†**
```bash
# ä¿®æ”¹é…ç½®å‰åˆ›å»ºåˆ†æ”¯
git checkout -b feature/optimize-boot-time

# ä¿®æ”¹é…ç½®æ–‡ä»¶
vim grub/grub.default

# åº”ç”¨åˆ°ç³»ç»Ÿ
cp grub/grub.default /etc/default/grub
grub2-mkconfig -o /boot/grub2/grub.cfg

# æäº¤å˜æ›´
git add .
git commit -m "ä¼˜åŒ–å¯åŠ¨æ—¶é—´ï¼šå‡å°‘GRUBè¶…æ—¶åˆ°3ç§’"

# åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge feature/optimize-boot-time
```

### 5.3 é…ç½®å˜æ›´æ—¥å¿—


**ğŸ”¸ å˜æ›´è®°å½•æ¨¡æ¿**
```bash
#!/bin/bash
# é…ç½®å˜æ›´è®°å½•è„šæœ¬

CHANGE_LOG="/var/log/boot-config-changes.log"

log_change() {
    local action="$1"
    local file="$2"
    local description="$3"
    
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $action: $file - $description" >> "$CHANGE_LOG"
}

# ä½¿ç”¨ç¤ºä¾‹
log_change "MODIFY" "/etc/default/grub" "è°ƒæ•´å¯åŠ¨è¶…æ—¶ä¸º5ç§’"
log_change "ADD" "æ–°å¯åŠ¨é¡¹" "æ·»åŠ æµ‹è¯•å†…æ ¸å¯åŠ¨é€‰é¡¹"
```

---

## 6. ğŸš€ è‡ªåŠ¨åŒ–é…ç½®éƒ¨ç½²


### 6.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–é…ç½®éƒ¨ç½²


**ç®€å•ç†è§£**ï¼šå°±æ˜¯ç”¨è„šæœ¬æˆ–å·¥å…·è‡ªåŠ¨åº”ç”¨å¯åŠ¨é…ç½®ï¼Œä¸éœ€è¦æ‰‹å·¥æ“ä½œã€‚

```
åº”ç”¨åœºæ™¯ï¼š
- æ‰¹é‡éƒ¨ç½²å¤šå°æœåŠ¡å™¨
- æ ‡å‡†åŒ–é…ç½®ç®¡ç†
- é…ç½®ä¸€è‡´æ€§ä¿è¯
- å¿«é€Ÿç¯å¢ƒæ­å»º
```

### 6.2 Ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²


**ä»€ä¹ˆæ˜¯Ansible**ï¼Ÿä¸€ä¸ªè‡ªåŠ¨åŒ–é…ç½®ç®¡ç†å·¥å…·ï¼Œå¯ä»¥æ‰¹é‡ç®¡ç†å¤šå°æœåŠ¡å™¨ã€‚

**ğŸ”¸ Ansible Playbookç¤ºä¾‹**
```yaml
---
- name: éƒ¨ç½²å¯åŠ¨é…ç½®
  hosts: linux_servers
  become: yes
  tasks:
    - name: å¤‡ä»½å½“å‰GRUBé…ç½®
      copy:
        src: /etc/default/grub
        dest: /etc/default/grub.bak
        remote_src: yes
    
    - name: éƒ¨ç½²æ ‡å‡†GRUBé…ç½®
      template:
        src: grub.default.j2
        dest: /etc/default/grub
        backup: yes
      notify: é‡æ–°ç”ŸæˆGRUBé…ç½®
    
    - name: è®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«
      systemd:
        name: "{{ target_runlevel | default('multi-user.target') }}"
        enabled: yes
    
    - name: é…ç½®å¯åŠ¨æœåŠ¡
      systemd:
        name: "{{ item.name }}"
        enabled: "{{ item.enabled }}"
        state: "{{ item.state | default('started') }}"
      loop:
        - { name: sshd, enabled: yes }
        - { name: firewalld, enabled: yes }
        - { name: bluetooth, enabled: no, state: stopped }

  handlers:
    - name: é‡æ–°ç”ŸæˆGRUBé…ç½®
      command: grub2-mkconfig -o /boot/grub2/grub.cfg
```

### 6.3 éƒ¨ç½²éªŒè¯è„šæœ¬


**ğŸ”¸ é…ç½®éªŒè¯è„šæœ¬**
```bash
#!/bin/bash
# å¯åŠ¨é…ç½®éƒ¨ç½²éªŒè¯

verify_boot_config() {
    local errors=0
    
    echo "=== å¯åŠ¨é…ç½®éªŒè¯æŠ¥å‘Š ==="
    echo "éªŒè¯æ—¶é—´: $(date)"
    echo
    
    # æ£€æŸ¥GRUBé…ç½®
    if [ -f /etc/default/grub ]; then
        echo "âœ… GRUBé…ç½®æ–‡ä»¶å­˜åœ¨"
        echo "   è¶…æ—¶è®¾ç½®: $(grep GRUB_TIMEOUT /etc/default/grub)"
    else
        echo "âŒ GRUBé…ç½®æ–‡ä»¶ç¼ºå¤±"
        ((errors++))
    fi
    
    # æ£€æŸ¥é»˜è®¤è¿è¡Œçº§åˆ«
    default_target=$(systemctl get-default)
    echo "âœ… é»˜è®¤è¿è¡Œçº§åˆ«: $default_target"
    
    # æ£€æŸ¥å…³é”®æœåŠ¡
    critical_services=("sshd" "firewalld")
    for service in "${critical_services[@]}"; do
        if systemctl is-enabled "$service" >/dev/null 2>&1; then
            echo "âœ… æœåŠ¡ $service å·²å¯ç”¨"
        else
            echo "âš ï¸  æœåŠ¡ $service æœªå¯ç”¨"
        fi
    done
    
    # æ£€æŸ¥å¤‡ä»½æ–‡ä»¶
    if [ -f /etc/default/grub.bak ]; then
        echo "âœ… é…ç½®å¤‡ä»½æ–‡ä»¶å­˜åœ¨"
    else
        echo "âš ï¸  é…ç½®å¤‡ä»½æ–‡ä»¶ä¸å­˜åœ¨"
    fi
    
    echo
    if [ $errors -eq 0 ]; then
        echo "ğŸ‰ é…ç½®éªŒè¯é€šè¿‡ï¼"
        return 0
    else
        echo "âŒ å‘ç° $errors ä¸ªé”™è¯¯ï¼Œè¯·æ£€æŸ¥é…ç½®"
        return 1
    fi
}

# æ‰§è¡ŒéªŒè¯
verify_boot_config
```

---

## 7. ğŸ” é…ç½®åˆè§„æ£€æŸ¥


### 7.1 ä»€ä¹ˆæ˜¯é…ç½®åˆè§„æ£€æŸ¥


**é€šä¿—è§£é‡Š**ï¼šå°±æ˜¯æ£€æŸ¥ç³»ç»Ÿå¯åŠ¨é…ç½®æ˜¯å¦ç¬¦åˆå…¬å¸çš„å®‰å…¨æ ‡å‡†å’Œæœ€ä½³å®è·µã€‚

```
æ£€æŸ¥é¡¹ç›®ï¼š
- å®‰å…¨å‚æ•°æ˜¯å¦æ­£ç¡®è®¾ç½®
- ä¸å¿…è¦çš„æœåŠ¡æ˜¯å¦å·²ç¦ç”¨
- å¯åŠ¨è¶…æ—¶æ˜¯å¦åˆç†
- å…³é”®æœåŠ¡æ˜¯å¦å·²å¯ç”¨
```

### 7.2 åˆè§„æ£€æŸ¥è§„åˆ™


**ğŸ”¸ å®‰å…¨åˆè§„åŸºçº¿**
```bash
# å®‰å…¨é…ç½®åŸºçº¿
SECURITY_BASELINE="/etc/security/boot-baseline.conf"

cat > "$SECURITY_BASELINE" << EOF
# å¯åŠ¨é…ç½®å®‰å…¨åŸºçº¿

# GRUBé…ç½®è¦æ±‚
GRUB_TIMEOUT_MIN=0
GRUB_TIMEOUT_MAX=10
REQUIRED_KERNEL_PARAMS="audit=1"
FORBIDDEN_KERNEL_PARAMS="debug"

# è¿è¡Œçº§åˆ«è¦æ±‚
ALLOWED_TARGETS="multi-user.target graphical.target"

# å¿…é¡»å¯ç”¨çš„æœåŠ¡
REQUIRED_SERVICES="sshd firewalld rsyslog auditd"

# å¿…é¡»ç¦ç”¨çš„æœåŠ¡
FORBIDDEN_SERVICES="telnet rsh-server tftp-server"
EOF
```

### 7.3 è‡ªåŠ¨åˆè§„æ£€æŸ¥è„šæœ¬


**ğŸ”¸ åˆè§„æ£€æŸ¥å®ç°**
```bash
#!/bin/bash
# å¯åŠ¨é…ç½®åˆè§„æ£€æŸ¥è„šæœ¬

source /etc/security/boot-baseline.conf

check_compliance() {
    local compliance_score=100
    local issues=0
    
    echo "=== å¯åŠ¨é…ç½®åˆè§„æ£€æŸ¥æŠ¥å‘Š ==="
    echo "æ£€æŸ¥æ—¶é—´: $(date)"
    echo "æ£€æŸ¥æ ‡å‡†: ä¼ä¸šå®‰å…¨åŸºçº¿ v1.0"
    echo
    
    # æ£€æŸ¥GRUBè¶…æ—¶è®¾ç½®
    grub_timeout=$(grep "^GRUB_TIMEOUT=" /etc/default/grub | cut -d'=' -f2)
    if [[ $grub_timeout -lt $GRUB_TIMEOUT_MIN || $grub_timeout -gt $GRUB_TIMEOUT_MAX ]]; then
        echo "âŒ [ä¸¥é‡] GRUBè¶…æ—¶è®¾ç½®ä¸åˆè§„: $grub_timeout"
        echo "   è¦æ±‚èŒƒå›´: $GRUB_TIMEOUT_MIN-$GRUB_TIMEOUT_MAX ç§’"
        ((issues+=10))
        ((compliance_score-=10))
    else
        echo "âœ… GRUBè¶…æ—¶è®¾ç½®åˆè§„: $grub_timeout ç§’"
    fi
    
    # æ£€æŸ¥å¿…éœ€çš„å†…æ ¸å‚æ•°
    for param in $REQUIRED_KERNEL_PARAMS; do
        if ! grep "GRUB_CMDLINE_LINUX" /etc/default/grub | grep -q "$param"; then
            echo "âŒ [é«˜å±] ç¼ºå°‘å¿…éœ€å†…æ ¸å‚æ•°: $param"
            ((issues+=5))
            ((compliance_score-=15))
        else
            echo "âœ… å†…æ ¸å‚æ•°æ£€æŸ¥é€šè¿‡: $param"
        fi
    done
    
    # æ£€æŸ¥ç¦ç”¨çš„å†…æ ¸å‚æ•°
    for param in $FORBIDDEN_KERNEL_PARAMS; do
        if grep "GRUB_CMDLINE_LINUX" /etc/default/grub | grep -q "$param"; then
            echo "âŒ [ä¸­å±] å‘ç°ç¦ç”¨å†…æ ¸å‚æ•°: $param"
            ((issues+=3))
            ((compliance_score-=10))
        fi
    done
    
    # æ£€æŸ¥å¿…éœ€æœåŠ¡
    for service in $REQUIRED_SERVICES; do
        if ! systemctl is-enabled "$service" >/dev/null 2>&1; then
            echo "âŒ [é«˜å±] å¿…éœ€æœåŠ¡æœªå¯ç”¨: $service"
            ((issues+=5))
            ((compliance_score-=15))
        else
            echo "âœ… å¿…éœ€æœåŠ¡å·²å¯ç”¨: $service"
        fi
    done
    
    # æ£€æŸ¥ç¦ç”¨æœåŠ¡
    for service in $FORBIDDEN_SERVICES; do
        if systemctl is-enabled "$service" >/dev/null 2>&1; then
            echo "âŒ [é«˜å±] å‘ç°ç¦ç”¨æœåŠ¡å·²å¯ç”¨: $service"
            ((issues+=5))
            ((compliance_score-=15))
        fi
    done
    
    # ç”Ÿæˆåˆè§„æŠ¥å‘Š
    echo
    echo "=== åˆè§„æ£€æŸ¥ç»“æœ ==="
    echo "å‘ç°é—®é¢˜: $issues ä¸ª"
    echo "åˆè§„å¾—åˆ†: $compliance_score/100"
    
    if [ $compliance_score -ge 90 ]; then
        echo "ğŸ‰ åˆè§„ç­‰çº§: ä¼˜ç§€"
    elif [ $compliance_score -ge 80 ]; then
        echo "ğŸ‘ åˆè§„ç­‰çº§: è‰¯å¥½"
    elif [ $compliance_score -ge 70 ]; then
        echo "âš ï¸  åˆè§„ç­‰çº§: ä¸€èˆ¬"
    else
        echo "âŒ åˆè§„ç­‰çº§: ä¸åˆæ ¼"
    fi
    
    return $issues
}

# æ‰§è¡Œåˆè§„æ£€æŸ¥
check_compliance

# å¦‚æœä¸åˆè§„ï¼Œç”Ÿæˆä¿®å¤å»ºè®®
if [ $? -gt 0 ]; then
    echo
    echo "=== ä¿®å¤å»ºè®® ==="
    echo "1. æ£€æŸ¥å¹¶è°ƒæ•´GRUBè¶…æ—¶è®¾ç½®"
    echo "2. æ·»åŠ ç¼ºå°‘çš„å®‰å…¨å†…æ ¸å‚æ•°"
    echo "3. å¯ç”¨å¿…éœ€çš„å®‰å…¨æœåŠ¡"
    echo "4. ç¦ç”¨ä¸å®‰å…¨çš„æœåŠ¡"
    echo "5. é‡æ–°è¿è¡Œåˆè§„æ£€æŸ¥ç¡®è®¤ä¿®å¤"
fi
```

---

## 8. ğŸ“‹ å¯åŠ¨ç¯å¢ƒæ ‡å‡†åŒ–


### 8.1 ä»€ä¹ˆæ˜¯å¯åŠ¨ç¯å¢ƒæ ‡å‡†åŒ–


**ç®€å•ç†è§£**ï¼šå°±æ˜¯è®©æ‰€æœ‰æœåŠ¡å™¨ä½¿ç”¨ç›¸åŒçš„å¯åŠ¨é…ç½®æ ‡å‡†ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€‚

```
æ ‡å‡†åŒ–å¥½å¤„ï¼š
- å‡å°‘é…ç½®é”™è¯¯
- æ–¹ä¾¿æ‰¹é‡ç®¡ç†
- ä¾¿äºé—®é¢˜æ’æŸ¥
- æé«˜å®‰å…¨æ€§
```

### 8.2 æ ‡å‡†åŒ–é…ç½®æ¨¡æ¿


**ğŸ”¸ ä¸åŒç¯å¢ƒçš„æ ‡å‡†é…ç½®**

| ç¯å¢ƒç±»å‹ | **GRUBè¶…æ—¶** | **è¿è¡Œçº§åˆ«** | **å…³é”®æœåŠ¡** | **å†…æ ¸å‚æ•°** |
|---------|-------------|-------------|-------------|-------------|
| ğŸ”§ **å¼€å‘ç¯å¢ƒ** | `10ç§’` | `graphical.target` | `sshd, firewalld` | `debug rhgb` |
| ğŸ§ª **æµ‹è¯•ç¯å¢ƒ** | `5ç§’` | `multi-user.target` | `sshd, firewalld, httpd` | `quiet` |
| ğŸš€ **ç”Ÿäº§ç¯å¢ƒ** | `3ç§’` | `multi-user.target` | `sshd, firewalld, ä¸šåŠ¡æœåŠ¡` | `quiet audit=1` |

### 8.3 æ ‡å‡†åŒ–éƒ¨ç½²è„šæœ¬


**ğŸ”¸ ç¯å¢ƒæ ‡å‡†åŒ–è„šæœ¬**
```bash
#!/bin/bash
# å¯åŠ¨ç¯å¢ƒæ ‡å‡†åŒ–è„šæœ¬

# ç¯å¢ƒç±»å‹ï¼šdevelopment, testing, production
ENVIRONMENT=${1:-production}

standardize_environment() {
    local env_type="$1"
    
    echo "ğŸš€ å¼€å§‹æ ‡å‡†åŒ– $env_type ç¯å¢ƒå¯åŠ¨é…ç½®..."
    
    case "$env_type" in
        "development")
            apply_development_standard
            ;;
        "testing")
            apply_testing_standard
            ;;
        "production")
            apply_production_standard
            ;;
        *)
            echo "âŒ ä¸æ”¯æŒçš„ç¯å¢ƒç±»å‹: $env_type"
            exit 1
            ;;
    esac
    
    echo "âœ… $env_type ç¯å¢ƒæ ‡å‡†åŒ–å®Œæˆ"
}

apply_production_standard() {
    echo "ğŸ“‹ åº”ç”¨ç”Ÿäº§ç¯å¢ƒæ ‡å‡†é…ç½®..."
    
    # å¤‡ä»½å½“å‰é…ç½®
    cp /etc/default/grub /etc/default/grub.bak.$(date +%Y%m%d)
    
    # ç”Ÿäº§ç¯å¢ƒGRUBé…ç½®
    cat > /etc/default/grub << EOF
GRUB_TIMEOUT=3
GRUB_DEFAULT=0
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT="console"
GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet audit=1 elevator=deadline"
GRUB_DISABLE_RECOVERY="true"
EOF
    
    # é‡æ–°ç”ŸæˆGRUBé…ç½®
    grub2-mkconfig -o /boot/grub2/grub.cfg
    
    # è®¾ç½®è¿è¡Œçº§åˆ«
    systemctl set-default multi-user.target
    
    # é…ç½®å…³é”®æœåŠ¡
    systemctl enable sshd firewalld rsyslog auditd
    systemctl disable bluetooth cups
    
    # åº”ç”¨ç³»ç»Ÿå‚æ•°
    cat >> /etc/sysctl.conf << EOF
# ç”Ÿäº§ç¯å¢ƒç³»ç»Ÿå‚æ•°
vm.swappiness=10
net.ipv4.ip_forward=0
kernel.sysrq=0
EOF
    
    sysctl -p
}

apply_development_standard() {
    echo "ğŸ“‹ åº”ç”¨å¼€å‘ç¯å¢ƒæ ‡å‡†é…ç½®..."
    
    # å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆæ›´å®½æ¾ï¼‰
    cat > /etc/default/grub << EOF
GRUB_TIMEOUT=10
GRUB_DEFAULT=0
GRUB_CMDLINE_LINUX="rhgb debug systemd.log_level=info"
EOF
    
    grub2-mkconfig -o /boot/grub2/grub.cfg
    systemctl set-default graphical.target
    
    # å¯ç”¨å¼€å‘å·¥å…·ç›¸å…³æœåŠ¡
    systemctl enable sshd firewalld
}

apply_testing_standard() {
    echo "ğŸ“‹ åº”ç”¨æµ‹è¯•ç¯å¢ƒæ ‡å‡†é…ç½®..."
    
    cat > /etc/default/grub << EOF
GRUB_TIMEOUT=5
GRUB_DEFAULT=0
GRUB_CMDLINE_LINUX="quiet rhgb"
EOF
    
    grub2-mkconfig -o /boot/grub2/grub.cfg
    systemctl set-default multi-user.target
    
    # æµ‹è¯•ç¯å¢ƒæœåŠ¡é…ç½®
    systemctl enable sshd firewalld httpd
}

# æ‰§è¡Œæ ‡å‡†åŒ–
standardize_environment "$ENVIRONMENT"

# éªŒè¯æ ‡å‡†åŒ–ç»“æœ
echo "ğŸ” éªŒè¯æ ‡å‡†åŒ–ç»“æœ..."
echo "å½“å‰è¿è¡Œçº§åˆ«: $(systemctl get-default)"
echo "GRUBè¶…æ—¶è®¾ç½®: $(grep GRUB_TIMEOUT /etc/default/grub)"
echo "å·²å¯ç”¨æœåŠ¡: $(systemctl list-unit-files --state=enabled --type=service | grep enabled | wc -l) ä¸ª"
```

### 8.4 æ ‡å‡†åŒ–ç›‘æ§


**ğŸ”¸ é…ç½®æ¼‚ç§»æ£€æµ‹**
```bash
#!/bin/bash
# é…ç½®æ¼‚ç§»æ£€æµ‹è„šæœ¬

STANDARD_CONFIG="/etc/standards/boot-${ENVIRONMENT}.json"

check_configuration_drift() {
    local drift_detected=false
    
    echo "ğŸ” æ£€æµ‹é…ç½®æ¼‚ç§»..."
    
    # æ£€æŸ¥GRUBé…ç½®æ¼‚ç§»
    current_timeout=$(grep GRUB_TIMEOUT /etc/default/grub | cut -d'=' -f2)
    expected_timeout=$(jq -r '.grub.timeout' "$STANDARD_CONFIG")
    
    if [ "$current_timeout" != "$expected_timeout" ]; then
        echo "âš ï¸  GRUBè¶…æ—¶é…ç½®æ¼‚ç§»: å½“å‰=$current_timeout, æœŸæœ›=$expected_timeout"
        drift_detected=true
    fi
    
    # æ£€æŸ¥æœåŠ¡çŠ¶æ€æ¼‚ç§»
    while IFS= read -r service; do
        if ! systemctl is-enabled "$service" >/dev/null 2>&1; then
            echo "âš ï¸  æœåŠ¡çŠ¶æ€æ¼‚ç§»: $service åº”è¯¥å¯ç”¨ä½†å½“å‰ç¦ç”¨"
            drift_detected=true
        fi
    done < <(jq -r '.services.enabled[]' "$STANDARD_CONFIG")
    
    if [ "$drift_detected" = true ]; then
        echo "âŒ æ£€æµ‹åˆ°é…ç½®æ¼‚ç§»ï¼Œå»ºè®®é‡æ–°æ ‡å‡†åŒ–"
        return 1
    else
        echo "âœ… é…ç½®ç¬¦åˆæ ‡å‡†ï¼Œæ— æ¼‚ç§»"
        return 0
    fi
}

# å®šæœŸæ£€æŸ¥ï¼ˆå¯æ”¾å…¥cronï¼‰
check_configuration_drift

# å¦‚æœæ£€æµ‹åˆ°æ¼‚ç§»ï¼Œå‘é€å‘Šè­¦
if [ $? -ne 0 ]; then
    echo "é…ç½®æ¼‚ç§»å‘Šè­¦å·²å‘é€åˆ°è¿ç»´å›¢é˜Ÿ" | mail -s "æœåŠ¡å™¨é…ç½®æ¼‚ç§»å‘Šè­¦" ops@company.com
fi
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ é»˜è®¤å¯åŠ¨é…ç½®ï¼šç³»ç»Ÿå¼€æœºæ—¶ä½¿ç”¨çš„åŸºç¡€è®¾ç½®
ğŸ”¸ å‚æ•°æŒä¹…åŒ–ï¼šè®©ä¸´æ—¶è®¾ç½®å˜æˆæ°¸ä¹…é…ç½®çš„æ–¹æ³•
ğŸ”¸ å¤šå¯åŠ¨ç®¡ç†ï¼šåœ¨ä¸€å°æœºå™¨ä¸Šç®¡ç†å¤šä¸ªå¯åŠ¨é€‰é¡¹
ğŸ”¸ é…ç½®å¤‡ä»½ï¼šé˜²æ­¢å¯åŠ¨é…ç½®æŸåçš„ä¿æŠ¤æªæ–½
ğŸ”¸ ç‰ˆæœ¬æ§åˆ¶ï¼šç”¨Gitç­‰å·¥å…·ç®¡ç†é…ç½®å˜æ›´å†å²
ğŸ”¸ è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šç”¨è„šæœ¬æ‰¹é‡éƒ¨ç½²æ ‡å‡†é…ç½®
ğŸ”¸ åˆè§„æ£€æŸ¥ï¼šç¡®ä¿é…ç½®ç¬¦åˆå®‰å…¨å’Œç®¡ç†æ ‡å‡†
ğŸ”¸ ç¯å¢ƒæ ‡å‡†åŒ–ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ ‡å‡†
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å¯åŠ¨é…ç½®çš„é‡è¦æ€§**
```
ä¸ºä»€ä¹ˆé‡è¦ï¼š
- ç³»ç»Ÿå¯åŠ¨çš„åŸºç¡€
- å½±å“å®‰å…¨å’Œæ€§èƒ½
- å†³å®šå¯ç”¨çš„åŠŸèƒ½å’ŒæœåŠ¡
- é”™è¯¯é…ç½®å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨

ç®¡ç†åŸåˆ™ï¼š
- å§‹ç»ˆå¤‡ä»½å†ä¿®æ”¹
- æµ‹è¯•åå†åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ
- ä¿æŒé…ç½®çš„ä¸€è‡´æ€§å’Œæ ‡å‡†åŒ–
```

**ğŸ”¹ ä¸åŒç¯å¢ƒçš„é…ç½®å·®å¼‚**
```
å¼€å‘ç¯å¢ƒï¼š
- é…ç½®ç›¸å¯¹å®½æ¾
- å¯ç”¨è°ƒè¯•åŠŸèƒ½
- è¶…æ—¶æ—¶é—´è¾ƒé•¿

ç”Ÿäº§ç¯å¢ƒï¼š
- é…ç½®ä¸¥æ ¼å®‰å…¨
- ç¦ç”¨è°ƒè¯•åŠŸèƒ½  
- å¯åŠ¨æ—¶é—´ä¼˜åŒ–
- å®¡è®¡åŠŸèƒ½å®Œæ•´
```

### 9.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ æ—¥å¸¸è¿ç»´åœºæ™¯**
- **ç³»ç»Ÿå‡çº§**ï¼šå‡çº§å‰å¤‡ä»½å¯åŠ¨é…ç½®ï¼Œå‡çº§åéªŒè¯
- **æ‰¹é‡éƒ¨ç½²**ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·éƒ¨ç½²æ ‡å‡†é…ç½®
- **å®‰å…¨åŠ å›º**ï¼šå®šæœŸæ£€æŸ¥é…ç½®åˆè§„æ€§
- **æ•…éšœå¤„ç†**ï¼šé…ç½®å‡ºé”™æ—¶å¿«é€Ÿå›é€€åˆ°å¤‡ä»½

**ğŸ”§ æœ€ä½³å®è·µæ€»ç»“**
- **é…ç½®å³ä»£ç **ï¼šç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†æ‰€æœ‰é…ç½®
- **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**ï¼šå‡å°‘æ‰‹å·¥æ“ä½œçš„é”™è¯¯é£é™©
- **ç›‘æ§å‘Šè­¦**ï¼šåŠæ—¶å‘ç°é…ç½®æ¼‚ç§»å’Œå¼‚å¸¸
- **æ–‡æ¡£è®°å½•**ï¼šè¯¦ç»†è®°å½•æ¯æ¬¡é…ç½®å˜æ›´çš„åŸå› 

**ğŸ’¡ å…³é”®å‘½ä»¤é€ŸæŸ¥**
```bash
# æŸ¥çœ‹é»˜è®¤è¿è¡Œçº§åˆ«
systemctl get-default

# é‡æ–°ç”ŸæˆGRUBé…ç½®
grub2-mkconfig -o /boot/grub2/grub.cfg

# å¤‡ä»½å…³é”®é…ç½®
cp /etc/default/grub /etc/default/grub.bak

# æŸ¥çœ‹å¯åŠ¨é¡¹
grubby --info=ALL

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl list-unit-files --type=service
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- å¯åŠ¨é…ç½®å…³ç³»ç³»ç»Ÿç”Ÿæ­»ï¼ŒåŠ¡å¿…è°¨æ…æ“ä½œ
- å…ˆå¤‡ä»½åä¿®æ”¹ï¼Œå…ˆæµ‹è¯•åéƒ¨ç½²
- æ ‡å‡†åŒ–å’Œè‡ªåŠ¨åŒ–æ˜¯å¤§è§„æ¨¡ç®¡ç†çš„å…³é”®
- æŒç»­ç›‘æ§ç¡®ä¿é…ç½®çš„æŒç»­åˆè§„æ€§