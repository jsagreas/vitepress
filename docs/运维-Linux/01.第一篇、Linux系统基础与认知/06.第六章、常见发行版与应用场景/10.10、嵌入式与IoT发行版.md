---
title: 10ã€åµŒå…¥å¼ä¸IoTå‘è¡Œç‰ˆ
---
## ğŸ“š ç›®å½•

1. [åµŒå…¥å¼Linuxç³»ç»Ÿæ¦‚è¿°](#1-åµŒå…¥å¼linuxç³»ç»Ÿæ¦‚è¿°)
2. [èµ„æºå—é™ç¯å¢ƒé€‚é…](#2-èµ„æºå—é™ç¯å¢ƒé€‚é…)
3. [å®æ—¶æ€§èƒ½è¦æ±‚ä¸è§£å†³æ–¹æ¡ˆ](#3-å®æ—¶æ€§èƒ½è¦æ±‚ä¸è§£å†³æ–¹æ¡ˆ)
4. [ç¡¬ä»¶æŠ½è±¡å±‚æ”¯æŒ](#4-ç¡¬ä»¶æŠ½è±¡å±‚æ”¯æŒ)
5. [äº¤å‰ç¼–è¯‘å·¥å…·é“¾](#5-äº¤å‰ç¼–è¯‘å·¥å…·é“¾)
6. [åŠŸè€—ç®¡ç†ä¼˜åŒ–](#6-åŠŸè€—ç®¡ç†ä¼˜åŒ–)
7. [å®‰å…¨å¯åŠ¨ä¸å›ºä»¶æ›´æ–°](#7-å®‰å…¨å¯åŠ¨ä¸å›ºä»¶æ›´æ–°)
8. [è¿œç¨‹ç®¡ç†ä¸ç›‘æ§](#8-è¿œç¨‹ç®¡ç†ä¸ç›‘æ§)
9. [ç¡¬ä»¶æ¥å£é©±åŠ¨æ”¯æŒ](#9-ç¡¬ä»¶æ¥å£é©±åŠ¨æ”¯æŒ)
10. [äº§å“åŒ–éƒ¨ç½²è€ƒè™‘](#10-äº§å“åŒ–éƒ¨ç½²è€ƒè™‘)
11. [ä¸»æµåµŒå…¥å¼å‘è¡Œç‰ˆå¯¹æ¯”](#11-ä¸»æµåµŒå…¥å¼å‘è¡Œç‰ˆå¯¹æ¯”)
12. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#12-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ åµŒå…¥å¼Linuxç³»ç»Ÿæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯åµŒå…¥å¼Linux


**ğŸ”¸ åŸºæœ¬æ¦‚å¿µ**
```
åµŒå…¥å¼Linuxï¼šä¸“é—¨ä¸ºåµŒå…¥å¼è®¾å¤‡å®šåˆ¶çš„Linuxæ“ä½œç³»ç»Ÿ
ç‰¹ç‚¹ï¼šä½“ç§¯å°ã€åŠŸè€—ä½ã€å®æ—¶æ€§å¼ºã€ç¨³å®šå¯é 
åº”ç”¨ï¼šæ™ºèƒ½å®¶ç”µã€å·¥ä¸šæ§åˆ¶ã€æ±½è½¦ç”µå­ã€IoTè®¾å¤‡
```

**ğŸ’¡ ä¸æ¡Œé¢Linuxçš„åŒºåˆ«**
```
æ¡Œé¢Linuxï¼š
- åŠŸèƒ½å®Œæ•´ï¼Œæ”¯æŒå„ç§åº”ç”¨
- å†…å­˜é€šå¸¸4GB+ï¼Œå­˜å‚¨ç©ºé—´å……è¶³
- äº¤äº’ç•Œé¢ä¸°å¯Œï¼Œç”¨æˆ·ä½“éªŒä¼˜å…ˆ

åµŒå…¥å¼Linuxï¼š
- åŠŸèƒ½ç²¾ç®€ï¼Œåªä¿ç•™å¿…è¦ç»„ä»¶
- å†…å­˜å¯èƒ½åªæœ‰å‡ MBåˆ°å‡ ç™¾MB
- æ— GUIæˆ–ç®€å•ç•Œé¢ï¼Œç¨³å®šæ€§ä¼˜å…ˆ
```

### 1.2 åµŒå…¥å¼ç³»ç»Ÿæ¶æ„


**ğŸ—ï¸ å…¸å‹ç³»ç»Ÿæ¶æ„**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        åº”ç”¨ç¨‹åºå±‚               â”‚ â† ç”¨æˆ·åº”ç”¨ã€ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ä¸­é—´ä»¶å±‚                 â”‚ â† ç½‘ç»œæ ˆã€æ•°æ®åº“ã€é€šä¿¡åè®®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        æ“ä½œç³»ç»Ÿå±‚               â”‚ â† åµŒå…¥å¼Linuxå†…æ ¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        é©±åŠ¨ç¨‹åºå±‚               â”‚ â† è®¾å¤‡é©±åŠ¨ã€HALå±‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ç¡¬ä»¶æŠ½è±¡å±‚               â”‚ â† BSPã€å¯åŠ¨åŠ è½½å™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ç¡¬ä»¶å¹³å°å±‚               â”‚ â† CPUã€å†…å­˜ã€å¤–è®¾
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ä¸»è¦åº”ç”¨é¢†åŸŸ


**ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯**
```
ğŸ  æ™ºèƒ½å®¶å±…ï¼š
- æ™ºèƒ½éŸ³ç®±ã€è·¯ç”±å™¨ã€æ‘„åƒå¤´
- è¦æ±‚ï¼šä½åŠŸè€—ã€è”ç½‘èƒ½åŠ›ã€å®æ—¶å“åº”

ğŸ­ å·¥ä¸šæ§åˆ¶ï¼š
- PLCã€ä¼ æ„Ÿå™¨èŠ‚ç‚¹ã€æ•°æ®é‡‡é›†å™¨
- è¦æ±‚ï¼šé«˜å¯é æ€§ã€å®æ—¶æ€§ã€æ¶åŠ£ç¯å¢ƒé€‚åº”

ğŸš— æ±½è½¦ç”µå­ï¼š
- è½¦è½½å¨±ä¹ã€å¯¼èˆªç³»ç»Ÿã€ECUæ§åˆ¶å™¨
- è¦æ±‚ï¼šå®‰å…¨æ€§ã€å®æ—¶æ€§ã€é•¿æœŸç¨³å®š

ğŸŒ IoTè®¾å¤‡ï¼š
- æ™ºèƒ½ç©¿æˆ´ã€å†œä¸šä¼ æ„Ÿå™¨ã€ç¯å¢ƒç›‘æµ‹
- è¦æ±‚ï¼šè¶…ä½åŠŸè€—ã€æ— çº¿é€šä¿¡ã€è¿œç¨‹ç®¡ç†
```

---

## 2. ğŸ’¾ èµ„æºå—é™ç¯å¢ƒé€‚é…


### 2.1 å†…å­˜èµ„æºä¼˜åŒ–


**ğŸ”¸ å†…å­˜é™åˆ¶æŒ‘æˆ˜**
```
å…¸å‹å†…å­˜é…ç½®ï¼š
- å¾®å‹IoTè®¾å¤‡ï¼š1-16MB RAM
- å°å‹åµŒå…¥å¼ï¼š16-128MB RAM  
- ä¸­å‹è®¾å¤‡ï¼š128MB-1GB RAM

å¯¹æ¯”ï¼šæ¡Œé¢ç³»ç»Ÿé€šå¸¸4GB+å†…å­˜
```

**âš¡ å†…å­˜ä¼˜åŒ–ç­–ç•¥**

```bash
# å†…æ ¸è£å‰ª - åªç¼–è¯‘å¿…è¦æ¨¡å—
CONFIG_EMBEDDED=y
CONFIG_MODULES=n
# CONFIG_PRINTK=n  # å»é™¤è°ƒè¯•ä¿¡æ¯
# CONFIG_BUG=n     # å»é™¤é”™è¯¯æ£€æŸ¥ä»£ç 

# ä½¿ç”¨uClibcæ›¿ä»£glibc
# uClibcä½“ç§¯æ›´å°ï¼Œé€‚åˆåµŒå…¥å¼ç¯å¢ƒ
```

**ğŸ“Š å†…å­˜ä½¿ç”¨å¯¹æ¯”**
| ç»„ä»¶ç±»å‹ | **ä¼ ç»ŸLinux** | **åµŒå…¥å¼ä¼˜åŒ–** | **èŠ‚çœæ¯”ä¾‹** |
|---------|-------------|--------------|------------|
| å†…æ ¸å¤§å° | `2-5MB` | `500KB-2MB` | `60-75%` |
| Cåº“å¤§å° | `2MB+ (glibc)` | `200KB-500KB (uClibc)` | `80-90%` |
| æ ¹æ–‡ä»¶ç³»ç»Ÿ | `100MB+` | `5-20MB` | `80-95%` |

### 2.2 å­˜å‚¨ç©ºé—´ä¼˜åŒ–


**ğŸ’½ å­˜å‚¨ä»‹è´¨é€‰æ‹©**
```
Flashå­˜å‚¨ç±»å‹ï¼š
- NOR Flashï¼šå®¹é‡å°(1-32MB)ï¼Œå¯ç›´æ¥æ‰§è¡Œä»£ç 
- NAND Flashï¼šå®¹é‡å¤§(32MB+)ï¼Œæˆæœ¬ä½ï¼Œéœ€è¦æ–‡ä»¶ç³»ç»Ÿ
- eMMC/SDå¡ï¼šå®¹é‡å¤§ï¼Œé€‚åˆå¤æ‚åº”ç”¨

é€‰æ‹©åŸåˆ™ï¼š
æˆæœ¬æ•æ„Ÿ â†’ NAND Flash + UBIFSæ–‡ä»¶ç³»ç»Ÿ
å¯é æ€§ä¼˜å…ˆ â†’ NOR Flash + JFFS2æ–‡ä»¶ç³»ç»Ÿ
```

**ğŸ—œï¸ æ–‡ä»¶ç³»ç»Ÿå‹ç¼©**
```bash
# SquashFS - åªè¯»å‹ç¼©æ–‡ä»¶ç³»ç»Ÿ
mksquashfs rootfs/ rootfs.squashfs -comp xz

# JFFS2 - æ”¯æŒå†™å…¥çš„å‹ç¼©æ–‡ä»¶ç³»ç»Ÿ  
mkfs.jffs2 -r rootfs/ -o rootfs.jffs2 -e 0x20000

# å‹ç¼©æ¯”å¯¹æ¯”ï¼š
# åŸå§‹å¤§å°ï¼š50MB
# SquashFSï¼š15MB (70%å‹ç¼©)
# JFFS2ï¼š25MB (50%å‹ç¼©)
```

### 2.3 ç²¾ç®€ç³»ç»Ÿç»„ä»¶


**ğŸ”§ ç³»ç»Ÿç»„ä»¶é€‰æ‹©**
```
å¯åŠ¨ç®¡ç†ï¼š
ä¼ ç»Ÿï¼šSystemD (å¤æ‚ï¼ŒåŠŸèƒ½ä¸°å¯Œ)
åµŒå…¥å¼ï¼šBusyBox init (ç®€å•ï¼Œä½“ç§¯å°)

Shellç¯å¢ƒï¼š
ä¼ ç»Ÿï¼šBash (åŠŸèƒ½å®Œæ•´)
åµŒå…¥å¼ï¼šAsh/Dash (ä½“ç§¯å°ï¼Œé€Ÿåº¦å¿«)

ç½‘ç»œå·¥å…·ï¼š
ä¼ ç»Ÿï¼šå®Œæ•´çš„ç½‘ç»œå·¥å…·åŒ…
åµŒå…¥å¼ï¼šBusyBoxé›†æˆå·¥å…·
```

**ğŸ“¦ BusyBoxå·¥å…·é›†**
```bash
# BusyBox - ç‘å£«å†›åˆ€å·¥å…·é›†
# ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶åŒ…å«200+å¸¸ç”¨å‘½ä»¤
# ä½“ç§¯ï¼š~500KB vs ä¼ ç»Ÿå·¥å…·åŒ… ~20MB

busybox --list  # æŸ¥çœ‹æ”¯æŒçš„å‘½ä»¤
# è¾“å‡ºï¼šls, cp, mv, cat, grep, vi, tar...

# é…ç½®BusyBox
make menuconfig  # é€‰æ‹©éœ€è¦çš„å·¥å…·
make CONFIG_STATIC=y  # é™æ€ç¼–è¯‘ï¼Œå‡å°‘ä¾èµ–
```

---

## 3. âš¡ å®æ—¶æ€§èƒ½è¦æ±‚ä¸è§£å†³æ–¹æ¡ˆ


### 3.1 å®æ—¶ç³»ç»ŸåŸºç¡€æ¦‚å¿µ


**ğŸ”¸ å®æ—¶æ€§å®šä¹‰**
```
ç¡¬å®æ—¶ï¼ˆHard Real-timeï¼‰ï¼š
- å¿…é¡»åœ¨è§„å®šæ—¶é—´å†…å®Œæˆä»»åŠ¡
- è¶…æ—¶ä¼šå¯¼è‡´ç³»ç»Ÿå¤±æ•ˆ
- åº”ç”¨ï¼šå®‰å…¨æ§åˆ¶ã€åŒ»ç–—è®¾å¤‡

è½¯å®æ—¶ï¼ˆSoft Real-timeï¼‰ï¼š
- å°½åŠ›åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ
- å¶å°”è¶…æ—¶å¯ä»¥æ¥å—
- åº”ç”¨ï¼šå¤šåª’ä½“æ’­æ”¾ã€ç½‘ç»œé€šä¿¡
```

### 3.2 Linuxå®æ—¶æ€§æ”¹è¿›


**âš™ï¸ RTè¡¥ä¸ (PREEMPT_RT)**
```bash
# ä¸‹è½½RTè¡¥ä¸å†…æ ¸
wget https://kernel.org/pub/linux/kernel/projects/rt/

# åº”ç”¨RTè¡¥ä¸
patch -p1 < patch-5.4.xx-rt.patch

# é…ç½®å®æ—¶é€‰é¡¹
CONFIG_PREEMPT_RT=y      # å®Œå…¨æŠ¢å å¼å†…æ ¸
CONFIG_HIGH_RES_TIMERS=y # é«˜ç²¾åº¦å®šæ—¶å™¨
CONFIG_NO_HZ=y           # åŠ¨æ€æ—¶é’Ÿ
```

**ğŸ“Š å®æ—¶æ€§èƒ½å¯¹æ¯”**
```
æ ‡å‡†Linuxå“åº”æ—¶é—´ï¼š
- ä¸­æ–­å»¶è¿Ÿï¼š10-100Î¼s
- è°ƒåº¦å»¶è¿Ÿï¼š100Î¼s-10ms
- æŠ–åŠ¨ï¼šè¾ƒå¤§

RT-Linuxå“åº”æ—¶é—´ï¼š
- ä¸­æ–­å»¶è¿Ÿï¼š1-10Î¼s
- è°ƒåº¦å»¶è¿Ÿï¼š10-100Î¼s  
- æŠ–åŠ¨ï¼šå¾ˆå°
```

### 3.3 å®æ—¶ä¼˜åŒ–æŠ€æœ¯


**ğŸ¯ ä¼˜å…ˆçº§ç®¡ç†**
```c
// è®¾ç½®å®æ—¶ä¼˜å…ˆçº§
#include <sched.h>

struct sched_param param;
param.sched_priority = 99;  // æœ€é«˜ä¼˜å…ˆçº§

// è®¾ç½®FIFOè°ƒåº¦ç­–ç•¥
sched_setscheduler(0, SCHED_FIFO, &param);

// é”å®šå†…å­˜ï¼Œé˜²æ­¢æ¢é¡µ
mlockall(MCL_CURRENT | MCL_FUTURE);
```

**âš¡ ä¸­æ–­å¤„ç†ä¼˜åŒ–**
```bash
# ä¸­æ–­äº²å’Œæ€§è®¾ç½® - ç»‘å®šä¸­æ–­åˆ°ç‰¹å®šCPU
echo 2 > /proc/irq/24/smp_affinity  # ç»‘å®šåˆ°CPU1

# éš”ç¦»CPU - ä¸“ç”¨äºå®æ—¶ä»»åŠ¡
isolcpus=1,2,3  # å¯åŠ¨å‚æ•°éš”ç¦»CPU1-3

# å…³é—­ä¸å¿…è¦çš„å†…æ ¸æœåŠ¡
echo 0 > /proc/sys/kernel/nmi_watchdog  # å…³é—­çœ‹é—¨ç‹—
```

---

## 4. ğŸ”Œ ç¡¬ä»¶æŠ½è±¡å±‚æ”¯æŒ


### 4.1 HALå±‚æ¦‚å¿µä¸ä½œç”¨


**ğŸ”¸ ç¡¬ä»¶æŠ½è±¡å±‚å®šä¹‰**
```
HAL (Hardware Abstraction Layer)ï¼š
ä½œç”¨ï¼šå±è”½ç¡¬ä»¶å·®å¼‚ï¼Œæä¾›ç»Ÿä¸€æ¥å£
å¥½å¤„ï¼šåº”ç”¨ç¨‹åºæ— éœ€å…³å¿ƒåº•å±‚ç¡¬ä»¶å®ç°
ä½ç½®ï¼šä»‹äºé©±åŠ¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºä¹‹é—´
```

**ğŸ—ï¸ HALå±‚æ¶æ„**
```
åº”ç”¨ç¨‹åº
    â†• (æ ‡å‡†APIè°ƒç”¨)
ç¡¬ä»¶æŠ½è±¡å±‚ (HAL)
    â†• (è®¾å¤‡ç‰¹å®šæ¥å£)
è®¾å¤‡é©±åŠ¨ç¨‹åº
    â†• (ç¡¬ä»¶å¯„å­˜å™¨æ“ä½œ)
ç¡¬ä»¶è®¾å¤‡
```

### 4.2 GPIOæŠ½è±¡å±‚ç¤ºä¾‹


**ğŸ“Ÿ GPIOç»Ÿä¸€æ¥å£**
```c
// GPIOæŠ½è±¡å±‚æ¥å£å®šä¹‰
typedef struct {
    int (*init)(int pin, int mode);
    int (*write)(int pin, int value);
    int (*read)(int pin);
    int (*set_interrupt)(int pin, void (*handler)(void));
} gpio_hal_t;

// å…·ä½“ç¡¬ä»¶å®ç° - æ ‘è“æ´¾
static int rpi_gpio_init(int pin, int mode) {
    // BCM2835ç‰¹å®šå®ç°
    volatile uint32_t* gpio_base = (uint32_t*)0x3F200000;
    // è®¾ç½®pinæ¨¡å¼...
    return 0;
}

// å…·ä½“ç¡¬ä»¶å®ç° - STM32
static int stm32_gpio_init(int pin, int mode) {
    // STM32ç‰¹å®šå®ç°
    GPIO_InitTypeDef gpio_init;
    gpio_init.Pin = pin;
    HAL_GPIO_Init(GPIOA, &gpio_init);
    return 0;
}
```

### 4.3 è®¾å¤‡æ ‘(Device Tree)æ”¯æŒ


**ğŸŒ³ è®¾å¤‡æ ‘æ¦‚å¿µ**
```
è®¾å¤‡æ ‘ä½œç”¨ï¼š
- æè¿°ç¡¬ä»¶é…ç½®ä¿¡æ¯
- ä¸å†…æ ¸ä»£ç åˆ†ç¦»
- åŒä¸€å†…æ ¸æ”¯æŒä¸åŒç¡¬ä»¶æ¿å‹

è®¾å¤‡æ ‘æ–‡ä»¶ï¼š
- .dtsï¼šè®¾å¤‡æ ‘æºç 
- .dtbï¼šç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
- .dtsiï¼šå¯åŒ…å«çš„å¤´æ–‡ä»¶
```

**ğŸ“„ è®¾å¤‡æ ‘ç¤ºä¾‹**
```dts
// è®¾å¤‡æ ‘ç‰‡æ®µ - GPIOæ§åˆ¶å™¨æè¿°
gpio: gpio@3f200000 {
    compatible = "brcm,bcm2835-gpio";
    reg = <0x3f200000 0xb4>;
    interrupts = <2 17>, <2 18>, <2 19>, <2 20>;
    
    gpio-controller;
    #gpio-cells = <2>;
    
    interrupt-controller;
    #interrupt-cells = <2>;
};

// LEDè®¾å¤‡æè¿°
leds {
    compatible = "gpio-leds";
    
    led0 {
        label = "status";
        gpios = <&gpio 18 0>;  // GPIO18, ä½ç”µå¹³æœ‰æ•ˆ
        default-state = "on";
    };
};
```

### 4.4 å¹³å°é©±åŠ¨æ¨¡å‹


**ğŸ”§ Linuxå¹³å°é©±åŠ¨æ¶æ„**
```c
// å¹³å°é©±åŠ¨æ³¨å†Œ
static struct platform_driver my_device_driver = {
    .probe = my_device_probe,
    .remove = my_device_remove,
    .driver = {
        .name = "my-device",
        .of_match_table = my_device_of_match,
    },
};

// è®¾å¤‡åŒ¹é…è¡¨
static const struct of_device_id my_device_of_match[] = {
    { .compatible = "vendor,my-device-v1" },
    { .compatible = "vendor,my-device-v2" },
    {},
};

// é©±åŠ¨åˆå§‹åŒ–
static int __init my_driver_init(void) {
    return platform_driver_register(&my_device_driver);
}
```

---

## 5. ğŸ› ï¸ äº¤å‰ç¼–è¯‘å·¥å…·é“¾


### 5.1 äº¤å‰ç¼–è¯‘åŸºç¡€æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯äº¤å‰ç¼–è¯‘**
```
å®šä¹‰ï¼šåœ¨ä¸€ä¸ªå¹³å°ä¸Šç¼–è¯‘å‡ºè¿è¡Œåœ¨å¦ä¸€ä¸ªå¹³å°ä¸Šçš„ç¨‹åº

ä¸ºä»€ä¹ˆéœ€è¦äº¤å‰ç¼–è¯‘ï¼š
- ç›®æ ‡è®¾å¤‡è®¡ç®—èƒ½åŠ›æœ‰é™
- ç›®æ ‡è®¾å¤‡æ²¡æœ‰å¼€å‘ç¯å¢ƒ
- ç¼–è¯‘é€Ÿåº¦è€ƒè™‘

ä¾‹å­ï¼š
åœ¨x86 PCä¸Š â†’ ç¼–è¯‘å‡º â†’ ARMå¤„ç†å™¨è¿è¡Œçš„ç¨‹åº
```

**ğŸ¯ ç¼–è¯‘ç¯å¢ƒæœ¯è¯­**
```
Hostï¼šæ‰§è¡Œç¼–è¯‘çš„æœºå™¨ (å¦‚ï¼šx86_64 PC)
Targetï¼šç¨‹åºæœ€ç»ˆè¿è¡Œçš„æœºå™¨ (å¦‚ï¼šARMå¼€å‘æ¿)
Buildï¼šæ„å»ºç¼–è¯‘å™¨çš„æœºå™¨ (é€šå¸¸ä¸Hostç›¸åŒ)

å·¥å…·é“¾å‘½åè§„åˆ™ï¼š
<arch>-<vendor>-<os>-<abi>-<tool>
ä¾‹å­ï¼šarm-linux-gnueabihf-gcc
```

### 5.2 å·¥å…·é“¾è·å–ä¸æ„å»º


**ğŸ“¦ é¢„ç¼–è¯‘å·¥å…·é“¾**
```bash
# Ubuntuç³»ç»Ÿå®‰è£…ARMå·¥å…·é“¾
sudo apt install gcc-arm-linux-gnueabihf

# éªŒè¯å®‰è£…
arm-linux-gnueabihf-gcc --version
arm-linux-gnueabihf-objdump --version

# å¸¸è§å·¥å…·é“¾å‚å•†ï¼š
# - Linaro (ARMå®˜æ–¹æ¨è)
# - CodeSourcery (å•†ä¸šæ”¯æŒ)
# - Buildroot (è‡ªå®šä¹‰æ„å»º)
```

**ğŸ”§ Crosstool-NGæ„å»ºè‡ªå®šä¹‰å·¥å…·é“¾**
```bash
# å®‰è£…crosstool-NG
git clone https://github.com/crosstool-ng/crosstool-ng
cd crosstool-ng
./bootstrap
./configure --enable-local
make

# é…ç½®å·¥å…·é“¾
./ct-ng menuconfig

# é‡è¦é…ç½®é¡¹ï¼š
# Target options:
#   - Target Architecture: arm
#   - Endianness: Little endian
#   - CPU: cortex-a9
# 
# C library:
#   - glibc (åŠŸèƒ½å®Œæ•´) vs uClibc (ä½“ç§¯å°)

# æ„å»ºå·¥å…·é“¾ (éœ€è¦å‡ å°æ—¶)
./ct-ng build
```

### 5.3 äº¤å‰ç¼–è¯‘å®è·µ


**ğŸ’» ç®€å•ç¨‹åºäº¤å‰ç¼–è¯‘**
```c
// hello.c - æµ‹è¯•ç¨‹åº
#include <stdio.h>

int main() {
    printf("Hello from ARM!\n");
    return 0;
}
```

```bash
# äº¤å‰ç¼–è¯‘
arm-linux-gnueabihf-gcc -o hello_arm hello.c

# æŸ¥çœ‹ç›®æ ‡æ¶æ„
file hello_arm
# è¾“å‡ºï¼šhello_arm: ELF 32-bit LSB executable, ARM, version 1

# é™æ€ç¼–è¯‘ (åŒ…å«æ‰€æœ‰ä¾èµ–åº“)
arm-linux-gnueabihf-gcc -static -o hello_static hello.c

# ä¼˜åŒ–ç¼–è¯‘ (å‡å°ä½“ç§¯)
arm-linux-gnueabihf-gcc -Os -s -o hello_opt hello.c
```

**ğŸ”— åº“æ–‡ä»¶å¤„ç†**
```bash
# æŸ¥çœ‹ç¨‹åºä¾èµ–çš„åŠ¨æ€åº“
arm-linux-gnueabihf-objdump -x hello_arm | grep NEEDED
# è¾“å‡ºï¼š
#   NEEDED               libc.so.6

# ç¡®ä¿ç›®æ ‡ç³»ç»Ÿæœ‰å¯¹åº”åº“æ–‡ä»¶
# æˆ–ä½¿ç”¨é™æ€é“¾æ¥é¿å…ä¾èµ–é—®é¢˜

# äº¤å‰ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“
export CC=arm-linux-gnueabihf-gcc
export CXX=arm-linux-gnueabihf-g++
./configure --host=arm-linux-gnueabihf --prefix=/usr/local/arm
make && make install
```

### 5.4 å†…æ ¸äº¤å‰ç¼–è¯‘


**âš™ï¸ å†…æ ¸ç¼–è¯‘æµç¨‹**
```bash
# ä¸‹è½½å†…æ ¸æºç 
wget https://kernel.org/pub/linux/kernel/v5.x/linux-5.4.xx.tar.xz
tar -xf linux-5.4.xx.tar.xz
cd linux-5.4.xx

# è®¾ç½®äº¤å‰ç¼–è¯‘ç¯å¢ƒ
export ARCH=arm
export CROSS_COMPILE=arm-linux-gnueabihf-

# ä½¿ç”¨é»˜è®¤é…ç½®
make defconfig

# æˆ–ä½¿ç”¨ç‰¹å®šæ¿å‹é…ç½®
make vexpress_defconfig  # ARM Versatile Express

# è‡ªå®šä¹‰é…ç½®
make menuconfig

# ç¼–è¯‘å†…æ ¸
make -j4 zImage          # å‹ç¼©å†…æ ¸é•œåƒ
make -j4 modules         # å†…æ ¸æ¨¡å—
make -j4 dtbs            # è®¾å¤‡æ ‘æ–‡ä»¶

# è¾“å‡ºæ–‡ä»¶ä½ç½®ï¼š
# arch/arm/boot/zImage     - å†…æ ¸é•œåƒ
# arch/arm/boot/dts/*.dtb  - è®¾å¤‡æ ‘æ–‡ä»¶
```

---

## 6. ğŸ”‹ åŠŸè€—ç®¡ç†ä¼˜åŒ–


### 6.1 åŠŸè€—ç®¡ç†åŸºç¡€


**ğŸ”¸ åŠŸè€—ç±»å‹åˆ†æ**
```
é™æ€åŠŸè€—ï¼š
- å™¨ä»¶ä¸å·¥ä½œæ—¶çš„æ¼ç”µæµ
- ä¸æ¸©åº¦ã€å·¥è‰ºç›¸å…³
- å æ¯”éšåˆ¶ç¨‹ç¼©å°è€Œå¢å¤§

åŠ¨æ€åŠŸè€—ï¼š
- å™¨ä»¶å·¥ä½œæ—¶çš„å¼€å…³åŠŸè€—
- ä¸é¢‘ç‡ã€ç”µå‹çš„å¹³æ–¹æˆæ­£æ¯”
- P = C Ã— VÂ² Ã— f (å…¶ä¸­Cä¸ºç”µå®¹ï¼ŒVä¸ºç”µå‹ï¼Œfä¸ºé¢‘ç‡)
```

**âš¡ åŠŸè€—ä¼˜åŒ–ç­–ç•¥å±‚æ¬¡**
```
ç¡¬ä»¶å±‚ï¼š
- é€‰æ‹©ä½åŠŸè€—å¤„ç†å™¨
- å…³é—­ä¸ç”¨çš„å¤–è®¾æ—¶é’Ÿ
- é™ä½å·¥ä½œç”µå‹/é¢‘ç‡

æ“ä½œç³»ç»Ÿå±‚ï¼š
- CPUåŠ¨æ€è°ƒé¢‘è°ƒå‹ (DVFS)
- ç¡çœ æ¨¡å¼ç®¡ç†
- å”¤é†’æºé…ç½®

åº”ç”¨å±‚ï¼š
- åˆç†çš„ä»»åŠ¡è°ƒåº¦
- å‡å°‘ä¸å¿…è¦çš„è®¡ç®—
- æ‰¹å¤„ç†æ“ä½œ
```

### 6.2 CPUåŠŸè€—ç®¡ç†


**âš™ï¸ DVFS (Dynamic Voltage Frequency Scaling)**
```bash
# æŸ¥çœ‹å½“å‰CPUé¢‘ç‡
cat /proc/cpuinfo | grep MHz

# æŸ¥çœ‹å¯ç”¨çš„è°ƒé¢‘ç­–ç•¥
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors
# è¾“å‡ºï¼šconservative ondemand userspace powersave performance

# è®¾ç½®è°ƒé¢‘ç­–ç•¥
echo "powersave" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor

# æ‰‹åŠ¨è®¾ç½®é¢‘ç‡
echo 800000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed
```

**ğŸ˜´ CPUç¡çœ çŠ¶æ€ç®¡ç†**
```bash
# æŸ¥çœ‹CPU idle states
cat /sys/devices/system/cpu/cpu0/cpuidle/state*/name
# è¾“å‡ºï¼š
# WFI      (Wait For Interrupt - æµ…åº¦ç¡çœ )
# Standby  (ä¸­åº¦ç¡çœ )
# Suspend  (æ·±åº¦ç¡çœ )

# æŸ¥çœ‹å„çŠ¶æ€çš„ä½¿ç”¨ç»Ÿè®¡
cat /sys/devices/system/cpu/cpu0/cpuidle/state*/usage
cat /sys/devices/system/cpu/cpu0/cpuidle/state*/time

# ç¦ç”¨æŸä¸ªç¡çœ çŠ¶æ€ (å¦‚æœæœ‰é—®é¢˜)
echo 1 > /sys/devices/system/cpu/cpu0/cpuidle/state2/disable
```

### 6.3 å¤–è®¾åŠŸè€—ç®¡ç†


**ğŸ”Œ Runtime Power Management**
```c
// é©±åŠ¨ä¸­çš„åŠŸè€—ç®¡ç†å®ç°
#include <linux/pm_runtime.h>

// è®¾å¤‡æŒ‚èµ·å‡½æ•°
static int my_device_suspend(struct device *dev) {
    struct my_device *mydev = dev_get_drvdata(dev);
    
    // å…³é—­æ—¶é’Ÿ
    clk_disable_unprepare(mydev->clk);
    
    // å…³é—­ç”µæºåŸŸ
    regulator_disable(mydev->regulator);
    
    return 0;
}

// è®¾å¤‡æ¢å¤å‡½æ•°
static int my_device_resume(struct device *dev) {
    struct my_device *mydev = dev_get_drvdata(dev);
    
    // å¼€å¯ç”µæºåŸŸ
    regulator_enable(mydev->regulator);
    
    // å¼€å¯æ—¶é’Ÿ
    clk_prepare_enable(mydev->clk);
    
    return 0;
}

// æ³¨å†ŒPMå›è°ƒ
static const struct dev_pm_ops my_device_pm_ops = {
    SET_RUNTIME_PM_OPS(my_device_suspend,
                       my_device_resume,
                       NULL)
};
```

### 6.4 ç³»ç»Ÿçº§åŠŸè€—ä¼˜åŒ–


**ğŸ’¤ ç³»ç»Ÿä¼‘çœ æ¨¡å¼**
```bash
# æŸ¥çœ‹æ”¯æŒçš„ä¼‘çœ æ¨¡å¼
cat /sys/power/state
# è¾“å‡ºï¼šfreeze mem disk

# æ¨¡å¼è¯´æ˜ï¼š
# freeze - å†»ç»“ç”¨æˆ·ç©ºé—´ï¼Œä¿æŒCPUè¿è¡Œ
# mem    - æŒ‚èµ·åˆ°å†…å­˜(STR)ï¼ŒRAMä¿æŒä¾›ç”µ
# disk   - æŒ‚èµ·åˆ°ç£ç›˜(STD)ï¼Œå®Œå…¨å…³æœº

# è¿›å…¥ä¼‘çœ æ¨¡å¼
echo mem > /sys/power/state

# é…ç½®å”¤é†’æº
echo enabled > /sys/class/tty/ttyS0/power/wakeup  # ä¸²å£å”¤é†’
echo enabled > /sys/class/net/eth0/power/wakeup   # ç½‘ç»œå”¤é†’
```

**â° å®šæ—¶å™¨ä¼˜åŒ–**
```bash
# æŸ¥çœ‹å®šæ—¶å™¨ç»Ÿè®¡
cat /proc/timer_list

# å‡å°‘ä¸å¿…è¦çš„å®šæ—¶å™¨ä¸­æ–­
# å†…æ ¸é…ç½®ï¼š
CONFIG_NO_HZ_IDLE=y      # tickless idle
CONFIG_NO_HZ_FULL=y      # ticklessè¿è¡Œæ—¶

# åº”ç”¨å±‚é¿å…é«˜é¢‘å®šæ—¶å™¨
# é”™è¯¯åšæ³•ï¼š
# while(1) { usleep(1000); }  // 1msé«˜é¢‘è½®è¯¢

# æ­£ç¡®åšæ³•ï¼š
# select/poll/epoll äº‹ä»¶é©±åŠ¨
```

---

## 7. ğŸ”’ å®‰å…¨å¯åŠ¨ä¸å›ºä»¶æ›´æ–°


### 7.1 å®‰å…¨å¯åŠ¨åŸºç¡€


**ğŸ”¸ å®‰å…¨å¯åŠ¨æ¦‚å¿µ**
```
å®‰å…¨å¯åŠ¨ç›®æ ‡ï¼š
- ç¡®ä¿åªè¿è¡Œæˆæƒçš„è½¯ä»¶
- é˜²æ­¢æ¶æ„ä»£ç ç¯¡æ”¹ç³»ç»Ÿ
- å»ºç«‹ä¿¡ä»»é“¾ä»bootloaderåˆ°åº”ç”¨

ä¿¡ä»»æ ¹ (Root of Trust)ï¼š
- ç¡¬ä»¶å†…ç½®çš„ä¸å¯ç¯¡æ”¹ä»£ç 
- é€šå¸¸ä½äºROMä¸­
- éªŒè¯ç¬¬ä¸€çº§bootloaderçš„ç­¾å
```

**ğŸ”— ä¿¡ä»»é“¾ä¼ é€’**
```
ç¡¬ä»¶ä¿¡ä»»æ ¹ (ROM)
    â†“ éªŒè¯ç­¾å
ç¬¬ä¸€çº§Bootloader (SPL)
    â†“ éªŒè¯ç­¾å  
ç¬¬äºŒçº§Bootloader (U-Boot)
    â†“ éªŒè¯ç­¾å
Linuxå†…æ ¸
    â†“ éªŒè¯ç­¾å
æ ¹æ–‡ä»¶ç³»ç»Ÿ
    â†“ 
åº”ç”¨ç¨‹åº
```

### 7.2 U-Bootå®‰å…¨å¯åŠ¨é…ç½®


**ğŸ”§ å¯ç”¨å®‰å…¨å¯åŠ¨åŠŸèƒ½**
```bash
# U-Bootç¼–è¯‘é…ç½®
CONFIG_FIT=y                    # FITé•œåƒæ”¯æŒ
CONFIG_FIT_SIGNATURE=y          # ç­¾åéªŒè¯
CONFIG_RSA=y                    # RSAåŠ å¯†ç®—æ³•
CONFIG_DM_RNG=y                 # éšæœºæ•°ç”Ÿæˆå™¨

# ç”Ÿæˆå¯†é’¥å¯¹
openssl genrsa -out private_key.pem 2048
openssl req -new -x509 -key private_key.pem -out public_key.crt -days 3650

# å°†å…¬é’¥åµŒå…¥U-Boot
./tools/mkimage -D "-I dts -O dtb -p 2000" \
    -f auto -A arm -T kernel -C none \
    -a 0x80008000 -e 0x80008000 \
    -k keys -K u-boot.dtb \
    -r signed_kernel.itb kernel.bin
```

**ğŸ“„ FITé•œåƒé…ç½®**
```dts
// kernel.its - é•œåƒé…ç½®æ–‡ä»¶
/dts-v1/;

/ {
    description = "Signed kernel image";
    #address-cells = <1>;
    
    images {
        kernel@1 {
            description = "ARM Linux kernel";
            data = /incbin/("zImage");
            type = "kernel";
            arch = "arm";
            os = "linux";
            compression = "none";
            load = <0x80008000>;
            entry = <0x80008000>;
            
            signature@1 {
                algo = "sha256,rsa2048";
                key-name-hint = "dev";
            };
        };
    };
    
    configurations {
        default = "config@1";
        config@1 {
            description = "Boot Linux kernel";
            kernel = "kernel@1";
            signature@1 {
                algo = "sha256,rsa2048";
                key-name-hint = "dev";
                sign-images = "kernel";
            };
        };
    };
};
```

### 7.3 å›ºä»¶æ›´æ–°æœºåˆ¶


**ğŸ”„ OTAæ›´æ–°ç­–ç•¥**
```
A/Båˆ†åŒºæ–¹æ¡ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bootloader    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   System A      â”‚ â† å½“å‰è¿è¡Œç³»ç»Ÿ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚   System B      â”‚ â† å¤‡ä»½ç³»ç»Ÿ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   UserData      â”‚ â† ç”¨æˆ·æ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ›´æ–°æµç¨‹ï¼š
1. ä¸‹è½½æ–°å›ºä»¶åˆ°System B
2. éªŒè¯å›ºä»¶å®Œæ•´æ€§å’Œç­¾å
3. æ›´æ–°å¯åŠ¨æ ‡å¿—æŒ‡å‘System B
4. é‡å¯éªŒè¯æ–°ç³»ç»Ÿ
5. ç¡®è®¤æˆåŠŸååˆ é™¤System A
```

**ğŸ›¡ï¸ å®‰å…¨æ›´æ–°å®ç°**
```bash
#!/bin/bash
# å®‰å…¨å›ºä»¶æ›´æ–°è„šæœ¬

FIRMWARE_FILE="$1"
BACKUP_PARTITION="/dev/mmcblk0p2"
ACTIVE_PARTITION="/dev/mmcblk0p1"

# æ­¥éª¤1: éªŒè¯å›ºä»¶ç­¾å
verify_firmware() {
    openssl dgst -sha256 -verify public_key.pem \
        -signature firmware.sig "$FIRMWARE_FILE"
    if [ $? -ne 0 ]; then
        echo "å›ºä»¶ç­¾åéªŒè¯å¤±è´¥!"
        exit 1
    fi
}

# æ­¥éª¤2: å†™å…¥å¤‡ä»½åˆ†åŒº
update_backup() {
    dd if="$FIRMWARE_FILE" of="$BACKUP_PARTITION" bs=1M
    sync
    
    # éªŒè¯å†™å…¥ç»“æœ
    ORIGINAL_HASH=$(sha256sum "$FIRMWARE_FILE" | cut -d' ' -f1)
    WRITTEN_HASH=$(dd if="$BACKUP_PARTITION" bs=1M | sha256sum | cut -d' ' -f1)
    
    if [ "$ORIGINAL_HASH" != "$WRITTEN_HASH" ]; then
        echo "å›ºä»¶å†™å…¥éªŒè¯å¤±è´¥!"
        exit 1
    fi
}

# æ­¥éª¤3: åˆ‡æ¢å¯åŠ¨åˆ†åŒº
switch_boot() {
    # æ›´æ–°U-Bootç¯å¢ƒå˜é‡
    fw_setenv boot_partition 2
    fw_setenv upgrade_available 1
}

# æ‰§è¡Œæ›´æ–°
verify_firmware
update_backup  
switch_boot

echo "å›ºä»¶æ›´æ–°å®Œæˆï¼Œé‡å¯åç”Ÿæ•ˆ"
```

### 7.4 å›æ»šæœºåˆ¶


**ğŸ”™ è‡ªåŠ¨å›æ»šä¿æŠ¤**
```c
// å¯åŠ¨éªŒè¯ç¨‹åº
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define BOOT_CONFIRM_FILE "/etc/boot_success"
#define MAX_BOOT_ATTEMPTS 3

int main() {
    int boot_count = get_boot_count();
    
    // æ£€æŸ¥å¯åŠ¨æ¬¡æ•°
    if (boot_count >= MAX_BOOT_ATTEMPTS) {
        printf("å¯åŠ¨å¤±è´¥æ¬¡æ•°è¿‡å¤šï¼Œè§¦å‘å›æ»š\n");
        system("fw_setenv boot_partition 1");  // å›æ»šåˆ°æ—§ç‰ˆæœ¬
        system("reboot");
    }
    
    // å¢åŠ å¯åŠ¨è®¡æ•°
    set_boot_count(boot_count + 1);
    
    // ç­‰å¾…ç³»ç»Ÿå®Œå…¨å¯åŠ¨
    sleep(60);
    
    // æ‰§è¡Œç³»ç»Ÿå¥åº·æ£€æŸ¥
    if (system_health_check()) {
        // æ ‡è®°å¯åŠ¨æˆåŠŸ
        system("touch " BOOT_CONFIRM_FILE);
        set_boot_count(0);  // é‡ç½®è®¡æ•°å™¨
        printf("ç³»ç»Ÿå¯åŠ¨éªŒè¯æˆåŠŸ\n");
    }
    
    return 0;
}
```

---

## 8. ğŸŒ è¿œç¨‹ç®¡ç†ä¸ç›‘æ§


### 8.1 è¿œç¨‹è®¿é—®æ–¹æ¡ˆ


**ğŸ”¸ SSHè¿œç¨‹è®¿é—®**
```bash
# å®‰è£…è½»é‡çº§SSHæœåŠ¡å™¨
# é€‰æ‹©1: Dropbear (æ¨èåµŒå…¥å¼ä½¿ç”¨)
opkg install dropbear

# Dropbearä¼˜åŠ¿ï¼š
# - ä½“ç§¯å° (~100KB vs OpenSSH ~500KB)
# - å†…å­˜å ç”¨ä½
# - åŠŸèƒ½å¤Ÿç”¨

# é…ç½®Dropbear
# ç”Ÿæˆä¸»æœºå¯†é’¥
dropbearkey -t rsa -f /etc/dropbear/dropbear_rsa_host_key

# å¯åŠ¨æœåŠ¡
dropbear -p 22

# é€‰æ‹©2: OpenSSH (åŠŸèƒ½æ›´å…¨)
opkg install openssh-server
```

**ğŸ“± Webç®¡ç†ç•Œé¢**
```html
<!-- ç®€å•çš„è®¾å¤‡çŠ¶æ€é¡µé¢ -->
<!DOCTYPE html>
<html>
<head>
    <title>è®¾å¤‡ç›‘æ§</title>
    <meta http-equiv="refresh" content="30">
</head>
<body>
    <h2>ç³»ç»ŸçŠ¶æ€</h2>
    <div id="status">
        <p>CPUä½¿ç”¨ç‡: <span id="cpu">0%</span></p>
        <p>å†…å­˜ä½¿ç”¨: <span id="memory">0MB</span></p>
        <p>è¿è¡Œæ—¶é—´: <span id="uptime">0å¤©</span></p>
        <p>ç½‘ç»œçŠ¶æ€: <span id="network">å·²è¿æ¥</span></p>
    </div>
    
    <script>
        // é€šè¿‡AJAXè·å–ç³»ç»Ÿä¿¡æ¯
        function updateStatus() {
            fetch('/cgi-bin/status')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('cpu').textContent = data.cpu + '%';
                    document.getElementById('memory').textContent = data.memory + 'MB';
                    document.getElementById('uptime').textContent = data.uptime + 'å¤©';
                });
        }
        
        setInterval(updateStatus, 30000);
    </script>
</body>
</html>
```

### 8.2 è®¾å¤‡ç›‘æ§ç³»ç»Ÿ


**ğŸ“Š ç³»ç»Ÿä¿¡æ¯é‡‡é›†**
```bash
#!/bin/bash
# system_monitor.sh - ç³»ç»Ÿç›‘æ§è„šæœ¬

# CPUä½¿ç”¨ç‡
get_cpu_usage() {
    grep 'cpu ' /proc/stat | awk '{usage=($2+$4)*100/($2+$3+$4+$5)} END {print usage}'
}

# å†…å­˜ä½¿ç”¨æƒ…å†µ
get_memory_info() {
    awk '/MemTotal/{total=$2} /MemFree/{free=$2} /MemAvailable/{available=$2} 
         END {used=total-available; print used*100/total, used/1024, total/1024}' /proc/meminfo
}

# ç£ç›˜ä½¿ç”¨æƒ…å†µ  
get_disk_usage() {
    df -h / | awk 'NR==2 {print $5, $3, $2}'
}

# ç½‘ç»œè¿æ¥çŠ¶æ€
get_network_status() {
    ping -c 1 8.8.8.8 > /dev/null 2>&1
    if [ $? -eq 0 ]; then
        echo "online"
    else
        echo "offline"
    fi
}

# ç”ŸæˆJSONæŠ¥å‘Š
cat << EOF
{
    "timestamp": $(date +%s),
    "cpu_usage": $(get_cpu_usage),
    "memory": {
        "usage_percent": $(get_memory_info | cut -d' ' -f1),
        "used_mb": $(get_memory_info | cut -d' ' -f2),
        "total_mb": $(get_memory_info | cut -d' ' -f3)
    },
    "disk": {
        "usage_percent": "$(get_disk_usage | cut -d' ' -f1)",
        "used": "$(get_disk_usage | cut -d' ' -f2)",
        "total": "$(get_disk_usage | cut -d' ' -f3)"
    },
    "network_status": "$(get_network_status)",
    "uptime_seconds": $(cat /proc/uptime | cut -d' ' -f1)
}
EOF
```

### 8.3 è¿œç¨‹æ—¥å¿—æ”¶é›†


**ğŸ“ Syslogé…ç½®**
```bash
# é…ç½®rsyslogè½¬å‘æ—¥å¿—åˆ°è¿œç¨‹æœåŠ¡å™¨
# /etc/rsyslog.conf

# æœ¬åœ°æ—¥å¿—è§„åˆ™
*.info;mail.none;authpriv.none;cron.none    /var/log/messages
authpriv.*                                  /var/log/secure
mail.*                                      /var/log/maillog
cron.*                                      /var/log/cron

# è¿œç¨‹æ—¥å¿—è½¬å‘
*.* @192.168.1.100:514    # UDPè½¬å‘
*.* $$192.168.1.100:514   # TCPè½¬å‘ (æ›´å¯é )

# é‡å¯æœåŠ¡
systemctl restart rsyslog
```

**ğŸ” æ—¥å¿—åˆ†æè„šæœ¬**
```python
#!/usr/bin/env python3
# log_analyzer.py - æ—¥å¿—åˆ†æå·¥å…·

import re
import json
from datetime import datetime
from collections import Counter

def analyze_logs(logfile):
    errors = []
    warnings = []
    access_ips = []
    
    with open(logfile, 'r') as f:
        for line in f:
            # é”™è¯¯æ—¥å¿—
            if 'ERROR' in line or 'error' in line:
                errors.append(line.strip())
            
            # è­¦å‘Šæ—¥å¿—  
            elif 'WARNING' in line or 'warning' in line:
                warnings.append(line.strip())
            
            # IPåœ°å€æå–
            ip_match = re.search(r'\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\b', line)
            if ip_match:
                access_ips.append(ip_match.group(1))
    
    # ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š
    report = {
        'timestamp': datetime.now().isoformat(),
        'error_count': len(errors),
        'warning_count': len(warnings),
        'top_errors': errors[-10:],  # æœ€è¿‘10ä¸ªé”™è¯¯
        'top_ips': dict(Counter(access_ips).most_common(10)),
        'total_lines': sum(1 for _ in open(logfile))
    }
    
    return json.dumps(report, indent=2)

if __name__ == "__main__":
    result = analyze_logs('/var/log/messages')
    print(result)
```

### 8.4 MQTTç‰©è”ç½‘é€šä¿¡


**ğŸ“¡ MQTTå®¢æˆ·ç«¯å®ç°**
```c
// mqtt_client.c - ç®€å•çš„MQTTå®¢æˆ·ç«¯
#include <mosquitto.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#define MQTT_HOST "192.168.1.100"
#define MQTT_PORT 1883
#define CLIENT_ID "embedded_device_001"

struct mosquitto *mosq = NULL;

// è¿æ¥å›è°ƒ
void on_connect(struct mosquitto *mosq, void *userdata, int result) {
    if (result == 0) {
        printf("MQTTè¿æ¥æˆåŠŸ\n");
        // è®¢é˜…æ§åˆ¶ä¸»é¢˜
        mosquitto_subscribe(mosq, NULL, "device/001/control", 0);
    } else {
        printf("MQTTè¿æ¥å¤±è´¥: %d\n", result);
    }
}

// æ¶ˆæ¯æ¥æ”¶å›è°ƒ
void on_message(struct mosquitto *mosq, void *userdata, 
                const struct mosquitto_message *message) {
    printf("æ”¶åˆ°æ¶ˆæ¯: %s = %s\n", 
           message->topic, (char *)message->payload);
    
    // å¤„ç†æ§åˆ¶å‘½ä»¤
    if (strcmp(message->topic, "device/001/control") == 0) {
        if (strcmp(message->payload, "reboot") == 0) {
            system("reboot");
        }
    }
}

// å‘å¸ƒè®¾å¤‡çŠ¶æ€
void publish_status() {
    char status_json[512];
    
    // è·å–ç³»ç»Ÿä¿¡æ¯
    float cpu_usage = get_cpu_usage();
    int memory_usage = get_memory_usage();
    
    snprintf(status_json, sizeof(status_json),
             "{\"cpu\":%.1f,\"memory\":%d,\"timestamp\":%ld}",
             cpu_usage, memory_usage, time(NULL));
    
    mosquitto_publish(mosq, NULL, "device/001/status", 
                     strlen(status_json), status_json, 0, false);
}

int main() {
    mosquitto_lib_init();
    
    mosq = mosquitto_new(CLIENT_ID, true, NULL);
    if (!mosq) {
        printf("åˆ›å»ºMQTTå®¢æˆ·ç«¯å¤±è´¥\n");
        return 1;
    }
    
    mosquitto_connect_callback_set(mosq, on_connect);
    mosquitto_message_callback_set(mosq, on_message);
    
    // è¿æ¥åˆ°MQTTæœåŠ¡å™¨
    if (mosquitto_connect(mosq, MQTT_HOST, MQTT_PORT, 60) != MOSQ_ERR_SUCCESS) {
        printf("æ— æ³•è¿æ¥åˆ°MQTTæœåŠ¡å™¨\n");
        return 1;
    }
    
    // ä¸»å¾ªç¯
    while (1) {
        mosquitto_loop(mosq, 1000, 1);
        
        // æ¯30ç§’å‘å¸ƒä¸€æ¬¡çŠ¶æ€
        static int count = 0;
        if (++count >= 30) {
            publish_status();
            count = 0;
        }
    }
    
    mosquitto_destroy(mosq);
    mosquitto_lib_cleanup();
    return 0;
}
```

---

## 9. ğŸ”Œ ç¡¬ä»¶æ¥å£é©±åŠ¨æ”¯æŒ


### 9.1 å¸¸è§ç¡¬ä»¶æ¥å£


**ğŸ”¸ ä¸²å£é€šä¿¡ (UART)**
```c
// ä¸²å£é…ç½®å’Œä½¿ç”¨
#include <fcntl.h>
#include <termios.h>
#include <unistd.h>

int setup_uart(const char* device, int baud_rate) {
    int fd = open(device, O_RDWR | O_NOCTTY);
    if (fd < 0) return -1;
    
    struct termios tty;
    tcgetattr(fd, &tty);
    
    // è®¾ç½®æ³¢ç‰¹ç‡
    cfsetospeed(&tty, B115200);
    cfsetispeed(&tty, B115200);
    
    // 8N1é…ç½®
    tty.c_cflag &= ~PARENB;     // æ— æ ¡éªŒ
    tty.c_cflag &= ~CSTOPB;     // 1ä¸ªåœæ­¢ä½
    tty.c_cflag &= ~CSIZE;      // æ¸…é™¤æ•°æ®ä½è®¾ç½®
    tty.c_cflag |= CS8;         // 8ä¸ªæ•°æ®ä½
    
    // åº”ç”¨é…ç½®
    tcsetattr(fd, TCSANOW, &tty);
    return fd;
}

// ä¸²å£è¯»å†™ç¤ºä¾‹
void uart_communication() {
    int uart_fd = setup_uart("/dev/ttyS1", 115200);
    
    // å‘é€æ•°æ®
    char tx_data[] = "Hello UART\n";
    write(uart_fd, tx_data, strlen(tx_data));
    
    // æ¥æ”¶æ•°æ®
    char rx_buffer[256];
    int bytes_read = read(uart_fd, rx_buffer, sizeof(rx_buffer));
    rx_buffer[bytes_read] = '\0';
    printf("æ¥æ”¶åˆ°: %s\n", rx_buffer);
    
    close(uart_fd);
}
```

**ğŸ“¡ SPIé€šä¿¡æ¥å£**
```c
// SPIè®¾å¤‡æ“ä½œ
#include <linux/spi/spidev.h>
#include <sys/ioctl.h>

int spi_transfer(int fd, uint8_t *tx_buf, uint8_t *rx_buf, int len) {
    struct spi_ioc_transfer tr = {
        .tx_buf = (unsigned long)tx_buf,
        .rx_buf = (unsigned long)rx_buf,
        .len = len,
        .delay_usecs = 0,
        .speed_hz = 1000000,    // 1MHz
        .bits_per_word = 8,
    };
    
    return ioctl(fd, SPI_IOC_MESSAGE(1), &tr);
}

// SPIè®¾å¤‡é…ç½®
int setup_spi_device(const char* device) {
    int fd = open(device, O_RDWR);
    if (fd < 0) return -1;
    
    uint8_t mode = SPI_MODE_0;
    uint8_t bits = 8;
    uint32_t speed = 1000000;
    
    // è®¾ç½®SPIæ¨¡å¼
    ioctl(fd, SPI_IOC_WR_MODE, &mode);
    
    // è®¾ç½®æ•°æ®ä½æ•°
    ioctl(fd, SPI_IOC_WR_BITS_PER_WORD, &bits);
    
    // è®¾ç½®ä¼ è¾“é€Ÿåº¦
    ioctl(fd, SPI_IOC_WR_MAX_SPEED_HZ, &speed);
    
    return fd;
}
```

### 9.2 I2Cè®¾å¤‡é©±åŠ¨


**ğŸ”§ I2Cè®¾å¤‡è®¿é—®**
```c
// I2Cè®¾å¤‡æ“ä½œå‡½æ•°
#include <linux/i2c-dev.h>
#include <i2c/smbus.h>

// è¯»å–I2Cè®¾å¤‡å¯„å­˜å™¨
int i2c_read_reg(int fd, uint8_t reg_addr) {
    return i2c_smbus_read_byte_data(fd, reg_addr);
}

// å†™å…¥I2Cè®¾å¤‡å¯„å­˜å™¨
int i2c_write_reg(int fd, uint8_t reg_addr, uint8_t value) {
    return i2c_smbus_write_byte_data(fd, reg_addr, value);
}

// I2Cä¼ æ„Ÿå™¨ç¤ºä¾‹ - æ¸©åº¦ä¼ æ„Ÿå™¨
typedef struct {
    int fd;
    uint8_t addr;
} temp_sensor_t;

temp_sensor_t* temp_sensor_init(const char* i2c_dev, uint8_t addr) {
    temp_sensor_t* sensor = malloc(sizeof(temp_sensor_t));
    
    sensor->fd = open(i2c_dev, O_RDWR);
    if (sensor->fd < 0) {
        free(sensor);
        return NULL;
    }
    
    sensor->addr = addr;
    
    // è®¾ç½®I2Cè®¾å¤‡åœ°å€
    if (ioctl(sensor->fd, I2C_SLAVE, addr) < 0) {
        close(sensor->fd);
        free(sensor);
        return NULL;
    }
    
    return sensor;
}

float temp_sensor_read(temp_sensor_t* sensor) {
    // è¯»å–æ¸©åº¦å¯„å­˜å™¨ (ç¤ºä¾‹)
    int temp_raw = i2c_read_reg(sensor->fd, 0x00);
    
    // è½¬æ¢ä¸ºå®é™…æ¸©åº¦å€¼
    float temperature = (float)temp_raw * 0.125f;  // å‡è®¾ç²¾åº¦ä¸º0.125åº¦
    
    return temperature;
}
```

### 9.3 GPIOæ§åˆ¶


**âš¡ GPIOæ“ä½œæ¥å£**
```c
// GPIOæ§åˆ¶ - sysfsæ¥å£æ–¹å¼
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>

// å¯¼å‡ºGPIO
int gpio_export(int gpio_num) {
    int fd = open("/sys/class/gpio/export", O_WRONLY);
    if (fd < 0) return -1;
    
    char buffer[4];
    snprintf(buffer, sizeof(buffer), "%d", gpio_num);
    write(fd, buffer, strlen(buffer));
    close(fd);
    
    return 0;
}

// è®¾ç½®GPIOæ–¹å‘
int gpio_set_direction(int gpio_num, const char* direction) {
    char path[64];
    snprintf(path, sizeof(path), "/sys/class/gpio/gpio%d/direction", gpio_num);
    
    int fd = open(path, O_WRONLY);
    if (fd < 0) return -1;
    
    write(fd, direction, strlen(direction));
    close(fd);
    
    return 0;
}

// è®¾ç½®GPIOå€¼
int gpio_set_value(int gpio_num, int value) {
    char path[64];
    snprintf(path, sizeof(path), "/sys/class/gpio/gpio%d/value", gpio_num);
    
    int fd = open(path, O_WRONLY);
    if (fd < 0) return -1;
    
    char buffer[2];
    snprintf(buffer, sizeof(buffer), "%d", value);
    write(fd, buffer, 1);
    close(fd);
    
    return 0;
}

// LEDæ§åˆ¶ç¤ºä¾‹
void led_control_demo() {
    int led_gpio = 18;
    
    // å¯¼å‡ºGPIO18
    gpio_export(led_gpio);
    
    // è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼
    gpio_set_direction(led_gpio, "out");
    
    // é—ªçƒLED
    for (int i = 0; i < 10; i++) {
        gpio_set_value(led_gpio, 1);  // ç‚¹äº®
        usleep(500000);               // å»¶æ—¶500ms
        gpio_set_value(led_gpio, 0);  // ç†„ç­
        usleep(500000);
    }
}
```

### 9.4 ä¸­æ–­å¤„ç†


**âš¡ ä¸­æ–­é©±åŠ¨ç¼–ç¨‹**
```c
// GPIOä¸­æ–­å¤„ç†ç¤ºä¾‹
#include <poll.h>
#include <fcntl.h>

// è®¾ç½®GPIOä¸­æ–­è§¦å‘æ–¹å¼
int gpio_set_edge(int gpio_num, const char* edge) {
    char path[64];
    snprintf(path, sizeof(path), "/sys/class/gpio/gpio%d/edge", gpio_num);
    
    int fd = open(path, O_WRONLY);
    if (fd < 0) return -1;
    
    write(fd, edge, strlen(edge));
    close(fd);
    
    return 0;
}

// ç­‰å¾…GPIOä¸­æ–­
int gpio_wait_interrupt(int gpio_num, int timeout_ms) {
    char path[64];
    snprintf(path, sizeof(path), "/sys/class/gpio/gpio%d/value", gpio_num);
    
    int fd = open(path, O_RDONLY);
    if (fd < 0) return -1;
    
    struct pollfd pfd = {
        .fd = fd,
        .events = POLLPRI | POLLERR,
    };
    
    // æ¸…é™¤åˆå§‹çŠ¶æ€
    char buffer[2];
    read(fd, buffer, sizeof(buffer));
    lseek(fd, 0, SEEK_SET);
    
    // ç­‰å¾…ä¸­æ–­
    int ret = poll(&pfd, 1, timeout_ms);
    close(fd);
    
    return ret;
}

// æŒ‰é”®ä¸­æ–­å¤„ç†ç¤ºä¾‹
void button_interrupt_demo() {
    int button_gpio = 2;
    
    // é…ç½®æŒ‰é”®GPIO
    gpio_export(button_gpio);
    gpio_set_direction(button_gpio, "in");
    gpio_set_edge(button_gpio, "falling");  // ä¸‹é™æ²¿è§¦å‘
    
    printf("ç­‰å¾…æŒ‰é”®æŒ‰ä¸‹...\n");
    
    while (1) {
        int ret = gpio_wait_interrupt(button_gpio, 5000);  // 5ç§’è¶…æ—¶
        
        if (ret > 0) {
            printf("æŒ‰é”®è¢«æŒ‰ä¸‹!\n");
            // å¤„ç†æŒ‰é”®äº‹ä»¶
            handle_button_press();
        } else if (ret == 0) {
            printf("è¶…æ—¶ï¼Œç»§ç»­ç­‰å¾…...\n");
        } else {
            printf("ä¸­æ–­ç­‰å¾…å‡ºé”™\n");
            break;
        }
    }
}
```

---

## 10. ğŸ“¦ äº§å“åŒ–éƒ¨ç½²è€ƒè™‘


### 10.1 ç³»ç»Ÿç¨³å®šæ€§ä¿éšœ


**ğŸ”¸ çœ‹é—¨ç‹—æœºåˆ¶**
```c
// ç¡¬ä»¶çœ‹é—¨ç‹—é…ç½®
#include <linux/watchdog.h>
#include <fcntl.h>
#include <unistd.h>

int setup_watchdog(int timeout_seconds) {
    int wdt_fd = open("/dev/watchdog", O_WRONLY);
    if (wdt_fd < 0) {
        perror("æ— æ³•æ‰“å¼€çœ‹é—¨ç‹—è®¾å¤‡");
        return -1;
    }
    
    // è®¾ç½®è¶…æ—¶æ—¶é—´
    if (ioctl(wdt_fd, WDIOC_SETTIMEOUT, &timeout_seconds) < 0) {
        perror("è®¾ç½®çœ‹é—¨ç‹—è¶…æ—¶å¤±è´¥");
        close(wdt_fd);
        return -1;
    }
    
    return wdt_fd;
}

// å–‚ç‹—æ“ä½œ
void watchdog_feed(int wdt_fd) {
    if (write(wdt_fd, "1", 1) != 1) {
        perror("å–‚ç‹—å¤±è´¥");
    }
}

// åº”ç”¨ç¨‹åºä¸»å¾ªç¯ç¤ºä¾‹
int main() {
    int wdt_fd = setup_watchdog(30);  // 30ç§’è¶…æ—¶
    
    while (1) {
        // æ‰§è¡Œæ­£å¸¸çš„ä¸šåŠ¡é€»è¾‘
        if (do_main_task() == 0) {
            // ä»»åŠ¡æˆåŠŸå®Œæˆï¼Œå–‚ç‹—
            watchdog_feed(wdt_fd);
        }
        
        sleep(10);  // æ¯10ç§’æ‰§è¡Œä¸€æ¬¡
    }
    
    close(wdt_fd);
    return 0;
}
```

**ğŸ”„ è‡ªåŠ¨é‡å¯æœºåˆ¶**
```bash
#!/bin/bash
# system_monitor.sh - ç³»ç»Ÿç›‘æ§å®ˆæŠ¤è¿›ç¨‹

LOG_FILE="/var/log/system_monitor.log"
PID_FILE="/var/run/system_monitor.pid"

# æ£€æŸ¥å…³é”®è¿›ç¨‹
check_processes() {
    local critical_processes=("my_app" "network_daemon" "sensor_reader")
    
    for process in "${critical_processes[@]}"; do
        if ! pgrep "$process" > /dev/null; then
            echo "[$(date)] å…³é”®è¿›ç¨‹ $process æœªè¿è¡Œï¼Œå°è¯•é‡å¯" >> $LOG_FILE
            systemctl restart "$process"
            
            sleep 5
            if ! pgrep "$process" > /dev/null; then
                echo "[$(date)] è¿›ç¨‹ $process é‡å¯å¤±è´¥ï¼Œè§¦å‘ç³»ç»Ÿé‡å¯" >> $LOG_FILE
                reboot
            fi
        fi
    done
}

# æ£€æŸ¥ç³»ç»Ÿèµ„æº
check_system_resources() {
    # æ£€æŸ¥å†…å­˜ä½¿ç”¨ç‡
    local mem_usage=$(free | awk '/Mem:/ {printf "%.0f", $3/$2 * 100}')
    if [ "$mem_usage" -gt 90 ]; then
        echo "[$(date)] å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜: ${mem_usage}%" >> $LOG_FILE
        # æ¸…ç†ç¼“å­˜
        echo 3 > /proc/sys/vm/drop_caches
    fi
    
    # æ£€æŸ¥ç£ç›˜ç©ºé—´
    local disk_usage=$(df / | awk 'NR==2 {print $5}' | sed 's/%//')
    if [ "$disk_usage" -gt 85 ]; then
        echo "[$(date)] ç£ç›˜ç©ºé—´ä¸è¶³: ${disk_usage}%" >> $LOG_FILE
        # æ¸…ç†æ—§æ—¥å¿—
        find /var/log -name "*.log" -mtime +7 -exec rm {} \;
    fi
}

# ä¸»ç›‘æ§å¾ªç¯
main_loop() {
    while true; do
        check_processes
        check_system_resources
        sleep 60  # æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    done
}

# å¯åŠ¨ç›‘æ§
echo $$ > $PID_FILE
main_loop
```

### 10.2 ç”Ÿäº§ç¯å¢ƒé…ç½®


**âš™ï¸ ç³»ç»Ÿä¼˜åŒ–é…ç½®**
```bash
# /etc/sysctl.conf - å†…æ ¸å‚æ•°ä¼˜åŒ–

# ç½‘ç»œä¼˜åŒ–
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.ipv4.tcp_rmem = 4096 65536 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216

# å‡å°‘TCPè¿æ¥æ—¶é—´
net.ipv4.tcp_fin_timeout = 30
net.ipv4.tcp_keepalive_time = 300

# æ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–
vm.dirty_ratio = 10
vm.dirty_background_ratio = 5
vm.swappiness = 10

# å®‰å…¨è®¾ç½®
kernel.dmesg_restrict = 1
kernel.kptr_restrict = 2
net.ipv4.conf.all.send_redirects = 0
net.ipv4.conf.default.send_redirects = 0

# åº”ç”¨é…ç½®
sysctl -p
```

**ğŸ”’ å®‰å…¨åŠ å›ºæªæ–½**
```bash
#!/bin/bash
# security_hardening.sh - å®‰å…¨åŠ å›ºè„šæœ¬

# 1. ç¦ç”¨ä¸å¿…è¦çš„æœåŠ¡
systemctl disable telnet
systemctl disable rsh
systemctl disable ftp

# 2. è®¾ç½®é˜²ç«å¢™è§„åˆ™
iptables -F
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

# å…è®¸SSH (ç«¯å£22)
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# å…è®¸HTTP/HTTPS
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# å…è®¸æœ¬åœ°å›ç¯
iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# ä¿å­˜è§„åˆ™
iptables-save > /etc/iptables/rules.v4

# 3. è®¾ç½®æ–‡ä»¶æƒé™
chmod 600 /etc/shadow
chmod 644 /etc/passwd
chmod 755 /etc/init.d/*

# 4. åˆ›å»ºå—é™ç”¨æˆ·
useradd -r -s /bin/false app_user
chown app_user:app_user /opt/my_app/

# 5. é…ç½®æ—¥å¿—å®¡è®¡
echo "auth,authpriv.* /var/log/auth.log" >> /etc/rsyslog.conf
echo "*.emerg /var/log/emergency.log" >> /etc/rsyslog.conf

systemctl restart rsyslog
```

### 10.3 OTAå‡çº§ç³»ç»Ÿ


**ğŸ“¦ å‡çº§åŒ…åˆ¶ä½œ**
```bash
#!/bin/bash
# create_update_package.sh - åˆ›å»ºå‡çº§åŒ…

VERSION=$1
if [ -z "$VERSION" ]; then
    echo "ä½¿ç”¨æ–¹æ³•: $0 <ç‰ˆæœ¬å·>"
    exit 1
fi

BUILD_DIR="build_${VERSION}"
PACKAGE_NAME="firmware_${VERSION}.tar.gz"

# å‡†å¤‡å‡çº§æ–‡ä»¶
mkdir -p $BUILD_DIR
cp -r rootfs/* $BUILD_DIR/
cp kernel/zImage $BUILD_DIR/
cp kernel/device_tree.dtb $BUILD_DIR/

# ç”Ÿæˆç‰ˆæœ¬ä¿¡æ¯
cat > $BUILD_DIR/version.txt << EOF
VERSION=$VERSION
BUILD_DATE=$(date)
BUILD_HOST=$(hostname)
KERNEL_VERSION=$(make kernelversion)
EOF

# ç”Ÿæˆå‡çº§è„šæœ¬
cat > $BUILD_DIR/upgrade.sh << 'EOF'
#!/bin/bash
# å‡çº§è„šæœ¬

echo "å¼€å§‹ç³»ç»Ÿå‡çº§..."

# å¤‡ä»½å½“å‰ç³»ç»Ÿ
cp /boot/zImage /boot/zImage.backup
cp /boot/device_tree.dtb /boot/device_tree.dtb.backup

# å®‰è£…æ–°å†…æ ¸
cp zImage /boot/
cp device_tree.dtb /boot/

# æ›´æ–°æ ¹æ–‡ä»¶ç³»ç»Ÿ
rsync -av rootfs/ /

# æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯
cp version.txt /etc/

echo "å‡çº§å®Œæˆï¼Œé‡å¯åç”Ÿæ•ˆ"
EOF

chmod +x $BUILD_DIR/upgrade.sh

# è®¡ç®—æ ¡éªŒå’Œ
cd $BUILD_DIR
find . -type f -exec sha256sum {} \; > checksums.txt
cd ..

# åˆ›å»ºç­¾å
openssl dgst -sha256 -sign private_key.pem -out $BUILD_DIR/signature.bin $BUILD_DIR/checksums.txt

# æ‰“åŒ…
tar -czf $PACKAGE_NAME $BUILD_DIR/

echo "å‡çº§åŒ…å·²åˆ›å»º: $PACKAGE_NAME"
```

### 10.4 æ•…éšœè¯Šæ–­å·¥å…·


**ğŸ” è¯Šæ–­ä¿¡æ¯æ”¶é›†**
```bash
#!/bin/bash
# system_diagnostics.sh - ç³»ç»Ÿè¯Šæ–­å·¥å…·

DIAG_DIR="/tmp/diagnostics_$(date +%Y%m%d_%H%M%S)"
mkdir -p $DIAG_DIR

echo "æ­£åœ¨æ”¶é›†ç³»ç»Ÿè¯Šæ–­ä¿¡æ¯..."

# åŸºæœ¬ç³»ç»Ÿä¿¡æ¯
uname -a > $DIAG_DIR/system_info.txt
cat /proc/version >> $DIAG_DIR/system_info.txt
uptime >> $DIAG_DIR/system_info.txt

# ç¡¬ä»¶ä¿¡æ¯
cat /proc/cpuinfo > $DIAG_DIR/cpu_info.txt
cat /proc/meminfo > $DIAG_DIR/memory_info.txt
lscpu > $DIAG_DIR/cpu_detailed.txt 2>/dev/null || echo "lscpu not available" > $DIAG_DIR/cpu_detailed.txt

# ç½‘ç»œä¿¡æ¯
ifconfig > $DIAG_DIR/network_interfaces.txt 2>/dev/null || ip addr show > $DIAG_DIR/network_interfaces.txt
route -n > $DIAG_DIR/routing_table.txt 2>/dev/null || ip route show > $DIAG_DIR/routing_table.txt
netstat -tuln > $DIAG_DIR/listening_ports.txt 2>/dev/null || ss -tuln > $DIAG_DIR/listening_ports.txt

# è¿›ç¨‹å’ŒæœåŠ¡ä¿¡æ¯
ps aux > $DIAG_DIR/processes.txt
systemctl list-units --failed > $DIAG_DIR/failed_services.txt 2>/dev/null || echo "systemd not available" > $DIAG_DIR/failed_services.txt

# ç£ç›˜å’Œæ–‡ä»¶ç³»ç»Ÿä¿¡æ¯
df -h > $DIAG_DIR/disk_usage.txt
mount > $DIAG_DIR/mounted_filesystems.txt
lsblk > $DIAG_DIR/block_devices.txt 2>/dev/null || echo "lsblk not available" > $DIAG_DIR/block_devices.txt

# ç³»ç»Ÿæ—¥å¿—
tail -1000 /var/log/messages > $DIAG_DIR/system_logs.txt 2>/dev/null || dmesg | tail -1000 > $DIAG_DIR/system_logs.txt
dmesg > $DIAG_DIR/kernel_messages.txt

# å†…æ ¸æ¨¡å—ä¿¡æ¯
lsmod > $DIAG_DIR/loaded_modules.txt

# ç¯å¢ƒå˜é‡
env > $DIAG_DIR/environment.txt

# æ‰“åŒ…è¯Šæ–­ä¿¡æ¯
cd /tmp
tar -czf "diagnostics_$(date +%Y%m%d_%H%M%S).tar.gz" $(basename $DIAG_DIR)/

echo "è¯Šæ–­ä¿¡æ¯å·²æ”¶é›†å®Œæˆ: diagnostics_*.tar.gz"
echo "è¯·å°†æ­¤æ–‡ä»¶å‘é€ç»™æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ"
```

---

## 11. ğŸ”„ ä¸»æµåµŒå…¥å¼å‘è¡Œç‰ˆå¯¹æ¯”


### 11.1 Yoctoé¡¹ç›®


**ğŸ”¸ Yocto Projectæ¦‚è¿°**
```
å®šä½ï¼šæ„å»ºè‡ªå®šä¹‰Linuxå‘è¡Œç‰ˆçš„å·¥å…·é›†
ç‰¹ç‚¹ï¼šé«˜åº¦å¯å®šåˆ¶ã€å¯é‡ç°æ„å»ºã€æ”¯æŒå¤šæ¶æ„
é€‚ç”¨ï¼šéœ€è¦å®Œå…¨æ§åˆ¶ç³»ç»Ÿç»„æˆçš„äº§å“
```

**ğŸ› ï¸ Yoctoæ„å»ºç¤ºä¾‹**
```bash
# ä¸‹è½½Yoctoé¡¹ç›®
git clone -b kirkstone https://git.yoctoproject.org/poky
cd poky

# è®¾ç½®æ„å»ºç¯å¢ƒ
source oe-init-build-env build-dir

# é…ç½®ç›®æ ‡æ¶æ„ - conf/local.conf
MACHINE = "qemuarm"
DISTRO = "poky"

# æ„å»ºæœ€å°ç³»ç»Ÿé•œåƒ
bitbake core-image-minimal

# æ„å¸¦GUIçš„é•œåƒ
bitbake core-image-sato

# è‡ªå®šä¹‰é•œåƒé…æ–¹ç¤ºä¾‹
# meta-custom/recipes-core/images/my-image.bb
require recipes-core/images/core-image-minimal.bb

DESCRIPTION = "è‡ªå®šä¹‰åµŒå…¥å¼é•œåƒ"

IMAGE_FEATURES += "ssh-server-openssh"
IMAGE_INSTALL_append = " \
    my-custom-app \
    python3 \
    can-utils \
"

IMAGE_ROOTFS_SIZE = "100000"
```

### 11.2 Buildroot


**ğŸ”§ Buildrootç‰¹ç‚¹**
```
ä¼˜åŠ¿ï¼š
- ç®€å•æ˜“ç”¨ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“  
- æ„å»ºé€Ÿåº¦å¿«
- ç”Ÿæˆçš„ç³»ç»Ÿä½“ç§¯å°
- é€‚åˆå¿«é€ŸåŸå‹å¼€å‘

å±€é™ï¼š
- åŒ…ç®¡ç†ç›¸å¯¹ç®€å•
- ä¸æ”¯æŒè¿è¡Œæ—¶åŒ…ç®¡ç†
- ä¸»è¦é¢å‘é™æ€é…ç½®
```

**âš™ï¸ Buildrooté…ç½®**
```bash
# ä¸‹è½½Buildroot
wget https://buildroot.org/downloads/buildroot-2023.02.tar.gz
tar -xf buildroot-2023.02.tar.gz
cd buildroot-2023.02

# é€‰æ‹©ç›®æ ‡æ¿é…ç½®
make list-defconfigs | grep arm
make raspberrypi4_defconfig

# è‡ªå®šä¹‰é…ç½®
make menuconfig

# é‡è¦é…ç½®é€‰é¡¹ï¼š
# Target options:
#   - Target Architecture: ARM
#   - Target CPU: cortex-a72
# 
# System configuration:
#   - Root password: (è®¾ç½®rootå¯†ç )
#   - Network interface to configure: eth0
#
# Package Selection:
#   - Networking applications: openssh, wget, curl
#   - Development tools: gcc, make, git

# å¼€å§‹æ„å»º
make -j4

# è¾“å‡ºæ–‡ä»¶ä½ç½®ï¼š
# output/images/rootfs.tar     - æ ¹æ–‡ä»¶ç³»ç»Ÿ
# output/images/zImage         - å†…æ ¸é•œåƒ  
# output/images/rpi-firmware/  - å¯åŠ¨å›ºä»¶
```

### 11.3 OpenWrt


**ğŸŒ OpenWrtç‰¹è‰²åŠŸèƒ½**
```
å®šä½ï¼šè·¯ç”±å™¨å’Œç½‘ç»œè®¾å¤‡ä¸“ç”¨Linux
ç‰¹ç‚¹ï¼š
- åŒ…ç®¡ç†ç³»ç»Ÿ (opkg)
- Webé…ç½®ç•Œé¢ (LuCI)
- å¼ºå¤§çš„ç½‘ç»œåŠŸèƒ½
- æ¨¡å—åŒ–å†…æ ¸
```

**ğŸ“¦ OpenWrtåŒ…ç®¡ç†**
```bash
# æ›´æ–°åŒ…åˆ—è¡¨
opkg update

# å®‰è£…è½¯ä»¶åŒ…
opkg install python3 python3-pip

# æœç´¢åŒ…
opkg find "*mqtt*"

# æŸ¥çœ‹å·²å®‰è£…åŒ…
opkg list-installed

# è‡ªå®šä¹‰åŒ…ç¼–è¯‘
# åˆ›å»ºåŒ…ç›®å½•ç»“æ„
mkdir -p package/my-app/src
cd package/my-app

# Makefileç¤ºä¾‹
cat > Makefile << 'EOF'
include $(TOPDIR)/rules.mk

PKG_NAME:=my-app
PKG_VERSION:=1.0
PKG_RELEASE:=1

PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)

include $(INCLUDE_DIR)/package.mk

define Package/my-app
  SECTION:=utils
  CATEGORY:=Utilities  
  TITLE:=My Custom Application
  DEPENDS:=+libc
endef

define Build/Compile
	$(MAKE) -C $(PKG_BUILD_DIR) \
		CC="$(TARGET_CC)" \
		CFLAGS="$(TARGET_CFLAGS)" \
		LDFLAGS="$(TARGET_LDFLAGS)"
endef

define Package/my-app/install
	$(INSTALL_DIR) $(1)/usr/bin
	$(INSTALL_BIN) $(PKG_BUILD_DIR)/my-app $(1)/usr/bin/
endef

$(eval $(call BuildPackage,my-app))
EOF

# ç¼–è¯‘åŒ…
make package/my-app/compile V=s
```

### 11.4 å‘è¡Œç‰ˆå¯¹æ¯”è¡¨


| ç‰¹æ€§å¯¹æ¯” | **Yocto Project** | **Buildroot** | **OpenWrt** | **Ubuntu Core** |
|---------|------------------|---------------|-------------|----------------|
| **å­¦ä¹ éš¾åº¦** | `é«˜` | `ä½` | `ä¸­` | `ä¸­` |
| **æ„å»ºæ—¶é—´** | `é•¿(æ•°å°æ—¶)` | `çŸ­(30åˆ†é’Ÿ)` | `ä¸­(1å°æ—¶)` | `çŸ­(é¢„æ„å»º)` |
| **å¯å®šåˆ¶æ€§** | `æé«˜` | `é«˜` | `ä¸­` | `ä½` |
| **åŒ…ç®¡ç†** | `æ„å»ºæ—¶` | `æ„å»ºæ—¶` | `è¿è¡Œæ—¶(opkg)` | `è¿è¡Œæ—¶(snap)` |
| **é€‚ç”¨åœºæ™¯** | `äº§å“çº§å¼€å‘` | `å¿«é€ŸåŸå‹` | `ç½‘ç»œè®¾å¤‡` | `ç‰©è”ç½‘è®¾å¤‡` |
| **å†…å­˜å ç”¨** | `å¯ä¼˜åŒ–åˆ°æå°` | `å°` | `ä¸­` | `è¾ƒå¤§` |
| **ç¤¾åŒºæ”¯æŒ** | `ä¼ä¸šçº§` | `æ´»è·ƒ` | `å¾ˆæ´»è·ƒ` | `å•†ä¸šæ”¯æŒ` |

### 11.5 é€‰æ‹©å»ºè®®


**ğŸ¯ é€‰æ‹©åŸåˆ™**
```
å¿«é€ŸåŸå‹å¼€å‘ï¼š
æ¨èï¼šBuildroot
åŸå› ï¼šç®€å•æ˜“ç”¨ï¼Œå¿«é€Ÿæ„å»º

äº§å“çº§å¼€å‘ï¼š
æ¨èï¼šYocto Project  
åŸå› ï¼šå®Œå…¨å¯æ§ï¼Œå¯é‡ç°æ„å»º

ç½‘ç»œè®¾å¤‡ï¼š
æ¨èï¼šOpenWrt
åŸå› ï¼šä¸“ä¸šç½‘ç»œåŠŸèƒ½ï¼ŒåŒ…ç®¡ç†

ç‰©è”ç½‘è®¾å¤‡ï¼š
æ¨èï¼šUbuntu Core æˆ– Yocto
åŸå› ï¼šå®‰å…¨æ›´æ–°ï¼Œé•¿æœŸæ”¯æŒ
```

---

## 12. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 12.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ åµŒå…¥å¼Linuxæœ¬è´¨ï¼šä¸ºèµ„æºå—é™è®¾å¤‡å®šåˆ¶çš„ç²¾ç®€Linuxç³»ç»Ÿ
ğŸ”¸ èµ„æºä¼˜åŒ–ç­–ç•¥ï¼šå†…å­˜ã€å­˜å‚¨ã€åŠŸè€—çš„å…¨æ–¹ä½ä¼˜åŒ–  
ğŸ”¸ å®æ—¶æ€§èƒ½ï¼šé€šè¿‡RTè¡¥ä¸å’Œä¼˜å…ˆçº§ç®¡ç†å®ç°å®æ—¶å“åº”
ğŸ”¸ ç¡¬ä»¶æŠ½è±¡ï¼šHALå±‚å’Œè®¾å¤‡æ ‘ç»Ÿä¸€ç¡¬ä»¶æ¥å£
ğŸ”¸ äº¤å‰ç¼–è¯‘ï¼šåœ¨PCä¸Šç¼–è¯‘è¿è¡Œåœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šçš„ç¨‹åº
ğŸ”¸ åŠŸè€—ç®¡ç†ï¼šDVFSã€ç¡çœ æ¨¡å¼ã€å¤–è®¾ç®¡ç†çš„ç»¼åˆåº”ç”¨
ğŸ”¸ å®‰å…¨å¯åŠ¨ï¼šå»ºç«‹ä»ç¡¬ä»¶åˆ°åº”ç”¨çš„å®Œæ•´ä¿¡ä»»é“¾
ğŸ”¸ è¿œç¨‹ç®¡ç†ï¼šSSHã€Webç•Œé¢ã€MQTTç­‰è¿œç¨‹æ§åˆ¶æ–¹æ¡ˆ
ğŸ”¸ äº§å“åŒ–éƒ¨ç½²ï¼šç¨³å®šæ€§ã€å®‰å…¨æ€§ã€å‡çº§ç»´æŠ¤çš„å…¨é¢è€ƒè™‘
```

### 12.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦åµŒå…¥å¼Linux**
```
ä¼ ç»ŸåµŒå…¥å¼ç³»ç»Ÿ vs Linuxç³»ç»Ÿï¼š
- å¼€å‘æ•ˆç‡ï¼šLinuxæä¾›ä¸°å¯Œçš„å¼€å‘å·¥å…·å’Œåº“
- åŠŸèƒ½å¤æ‚æ€§ï¼šç°ä»£IoTè®¾å¤‡éœ€è¦ç½‘ç»œã€å¤šåª’ä½“ç­‰å¤æ‚åŠŸèƒ½
- æˆæœ¬è€ƒè™‘ï¼šLinuxå…è´¹ï¼Œé™ä½ç³»ç»Ÿæˆæœ¬
- ç”Ÿæ€ç³»ç»Ÿï¼šåºå¤§çš„å¼€æºè½¯ä»¶ç”Ÿæ€
```

**ğŸ”¹ èµ„æºå—é™çš„åº”å¯¹ç­–ç•¥**
```
å†…å­˜ä¼˜åŒ–ï¼š
- å†…æ ¸è£å‰ªï¼šåªç¼–è¯‘éœ€è¦çš„åŠŸèƒ½æ¨¡å—
- Cåº“é€‰æ‹©ï¼šuClibcæ›¿ä»£glibcèŠ‚çœç©ºé—´
- åº”ç”¨ç²¾ç®€ï¼šä½¿ç”¨BusyBoxå·¥å…·é›†

å­˜å‚¨ä¼˜åŒ–ï¼š
- æ–‡ä»¶ç³»ç»Ÿï¼šé€‰æ‹©åˆé€‚çš„å‹ç¼©æ–‡ä»¶ç³»ç»Ÿ
- ä»£ç ä¼˜åŒ–ï¼šç¼–è¯‘å™¨ä¼˜åŒ–é€‰é¡¹
- é™æ€é“¾æ¥ï¼šå‡å°‘è¿è¡Œæ—¶ä¾èµ–
```

**ğŸ”¹ å®æ—¶æ€§ä¸é€šç”¨æ€§çš„å¹³è¡¡**
```
ç¡¬å®æ—¶éœ€æ±‚ï¼š
- ä½¿ç”¨RTè¡¥ä¸å†…æ ¸
- ä¸­æ–­äº²å’Œæ€§è®¾ç½®
- CPUéš”ç¦»æŠ€æœ¯

è½¯å®æ—¶éœ€æ±‚ï¼š
- è°ƒæ•´è¿›ç¨‹ä¼˜å…ˆçº§
- ä¼˜åŒ–è°ƒåº¦ç­–ç•¥
- å‡å°‘ç³»ç»ŸæŠ–åŠ¨
```

### 12.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ é¡¹ç›®è§„åˆ’å»ºè®®**
```
éœ€æ±‚åˆ†æé˜¶æ®µï¼š
âœ“ ç¡®å®šæ€§èƒ½è¦æ±‚ï¼ˆå®æ—¶æ€§ã€åŠŸè€—ã€å­˜å‚¨ï¼‰
âœ“ è¯„ä¼°ç¡¬ä»¶èµ„æºé™åˆ¶
âœ“ æ˜ç¡®æ¥å£å’Œé€šä¿¡éœ€æ±‚
âœ“ è€ƒè™‘äº§å“ç”Ÿå‘½å‘¨æœŸç®¡ç†

æŠ€æœ¯é€‰å‹é˜¶æ®µï¼š
âœ“ æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„å‘è¡Œç‰ˆ
âœ“ è¯„ä¼°å¼€å‘å›¢é˜ŸæŠ€æœ¯å‚¨å¤‡
âœ“ è€ƒè™‘é•¿æœŸç»´æŠ¤æˆæœ¬
âœ“ è¯„ä¼°ç¬¬ä¸‰æ–¹æ”¯æŒæƒ…å†µ
```

**ğŸ”§ å¼€å‘å®æ–½è¦ç‚¹**
```
å¼€å‘ç¯å¢ƒæ­å»ºï¼š
- å»ºç«‹æ ‡å‡†åŒ–çš„äº¤å‰ç¼–è¯‘ç¯å¢ƒ
- ç‰ˆæœ¬æ§åˆ¶å’ŒæŒç»­é›†æˆ
- ç¡¬ä»¶ä»¿çœŸå’Œè°ƒè¯•ç¯å¢ƒ

ç³»ç»Ÿä¼˜åŒ–ï¼š
- æ€§èƒ½å‰–æå’Œç“¶é¢ˆåˆ†æ
- åŠŸè€—æµ‹è¯•å’Œä¼˜åŒ–
- ç¨³å®šæ€§å’Œå‹åŠ›æµ‹è¯•

éƒ¨ç½²å‡†å¤‡ï¼š
- åˆ¶é€ å’Œç”Ÿäº§é…ç½®
- å‡çº§å’Œç»´æŠ¤æ–¹æ¡ˆ
- æ•…éšœè¯Šæ–­å’Œæ¢å¤æœºåˆ¶
```

**âš ï¸ å¸¸è§é™·é˜±è§„é¿**
```
æŠ€æœ¯é™·é˜±ï¼š
âŒ è¿‡åº¦ä¼˜åŒ–ï¼šä¸è¦è¿‡æ—©è¿›è¡Œå¾®è§‚ä¼˜åŒ–
âŒ å¿½è§†è°ƒè¯•ï¼šåµŒå…¥å¼è°ƒè¯•å›°éš¾ï¼Œè¦é¢„ç•™è°ƒè¯•æ‰‹æ®µ
âŒ ç¡¬ä»¶ä¾èµ–ï¼šé¿å…è¿‡åº¦ä¾èµ–ç‰¹å®šç¡¬ä»¶ç‰¹æ€§
âŒ å®‰å…¨å¿½è§†ï¼šåµŒå…¥å¼è®¾å¤‡ä¹Ÿéœ€è¦è€ƒè™‘å®‰å…¨é—®é¢˜

é¡¹ç›®ç®¡ç†é™·é˜±ï¼š
âŒ éœ€æ±‚è”“å»¶ï¼šåµŒå…¥å¼èµ„æºæœ‰é™ï¼Œéœ€æ±‚è¦å…‹åˆ¶
âŒ è¿›åº¦ä¹è§‚ï¼šç¡¬ä»¶ç›¸å…³å¼€å‘å¾€å¾€æœ‰ä¸å¯é¢„æœŸé—®é¢˜
âŒ æµ‹è¯•ä¸è¶³ï¼šåµŒå…¥å¼ç³»ç»Ÿæµ‹è¯•è¦†ç›–æ›´é‡è¦
âŒ ç»´æŠ¤å¿½è§†ï¼šè€ƒè™‘äº§å“å…¨ç”Ÿå‘½å‘¨æœŸçš„ç»´æŠ¤æˆæœ¬
```

### 12.4 å‘å±•è¶‹åŠ¿å±•æœ›


**ğŸš€ æŠ€æœ¯å‘å±•æ–¹å‘**
```
å®¹å™¨åŒ–ï¼š
- Dockeråœ¨åµŒå…¥å¼è®¾å¤‡çš„åº”ç”¨
- å¾®æœåŠ¡æ¶æ„åœ¨è¾¹ç¼˜è®¡ç®—ä¸­çš„ä½¿ç”¨
- è½»é‡çº§å®¹å™¨è¿è¡Œæ—¶

äººå·¥æ™ºèƒ½ï¼š
- è¾¹ç¼˜AIæ¨ç†èƒ½åŠ›
- TinyMLåœ¨å¾®æ§åˆ¶å™¨ä¸Šçš„åº”ç”¨
- AIåŠ é€Ÿå™¨ç¡¬ä»¶é›†æˆ

å®‰å…¨å¢å¼ºï¼š
- ç¡¬ä»¶å®‰å…¨æ¨¡å—(HSM)é›†æˆ
- å¯ä¿¡æ‰§è¡Œç¯å¢ƒ(TEE)
- åŒºå—é“¾åœ¨IoTä¸­çš„åº”ç”¨

äº‘ç«¯é›†æˆï¼š
- äº‘åŸç”Ÿåº”ç”¨æ¶æ„
- è¾¹ç¼˜è®¡ç®—ä¸äº‘è®¡ç®—ååŒ
- 5Gç½‘ç»œå¸¦æ¥çš„æ–°æœºé‡
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- åµŒå…¥å¼Linuxç³»ç»Ÿæ˜¯èµ„æºä¼˜åŒ–ä¸åŠŸèƒ½éœ€æ±‚çš„å¹³è¡¡è‰ºæœ¯
- æˆåŠŸçš„åµŒå…¥å¼é¡¹ç›®éœ€è¦è½¯ç¡¬ä»¶ååŒè®¾è®¡
- äº§å“åŒ–éœ€è¦è€ƒè™‘å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- æŠ€æœ¯é€‰æ‹©è¦åŸºäºå…·ä½“éœ€æ±‚ï¼Œä¸ç›²ç›®è¿½æ±‚æ–°æŠ€æœ¯
- ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§å¾€å¾€æ¯”æ€§èƒ½æ›´é‡è¦