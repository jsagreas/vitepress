---
title: 8ã€NPMä¸ŽNode.jsåŒ…ç®¡ç†å™¨ä»£ç†
---
## ðŸ“š ç›®å½•

1. [NPMä»£ç†åŸºç¡€æ¦‚å¿µ](#1-npmä»£ç†åŸºç¡€æ¦‚å¿µ)
2. [npm configå‘½ä»¤é…ç½®ä»£ç†](#2-npm-configå‘½ä»¤é…ç½®ä»£ç†)
3. [npmrcæ–‡ä»¶ä»£ç†é…ç½®](#3-npmrcæ–‡ä»¶ä»£ç†é…ç½®)
4. [YarnåŒ…ç®¡ç†å™¨ä»£ç†è®¾ç½®](#4-yarnåŒ…ç®¡ç†å™¨ä»£ç†è®¾ç½®)
5. [å›½å†…é•œåƒæºé…ç½®](#5-å›½å†…é•œåƒæºé…ç½®)
6. [ç§æœ‰NPMä»“åº“ä»£ç†è®¿é—®](#6-ç§æœ‰npmä»“åº“ä»£ç†è®¿é—®)
7. [ä»£ç†çŽ¯å¢ƒä¸‹çš„é¡¹ç›®ç®¡ç†](#7-ä»£ç†çŽ¯å¢ƒä¸‹çš„é¡¹ç›®ç®¡ç†)
8. [ä»£ç†è®¤è¯ä¸Žå®‰å…¨é…ç½®](#8-ä»£ç†è®¤è¯ä¸Žå®‰å…¨é…ç½®)
9. [å¸¸è§é—®é¢˜ä¸Žè§£å†³æ–¹æ¡ˆ](#9-å¸¸è§é—®é¢˜ä¸Žè§£å†³æ–¹æ¡ˆ)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸŒ NPMä»£ç†åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯NPMä»£ç†


**ðŸ’¡ é€šä¿—ç†è§£**
NPMä»£ç†å°±åƒæ˜¯ä½ å’ŒNPMä»“åº“ä¹‹é—´çš„"ä¸­é—´äºº"ï¼š
```
ä½ çš„ç”µè„‘ â†’ ä»£ç†æœåŠ¡å™¨ â†’ NPMå®˜æ–¹ä»“åº“
          â†‘
    å¸®ä½ è½¬å‘è¯·æ±‚å’Œä¸‹è½½
```

æƒ³è±¡ä½ è¦ä»Žå›½å¤–ç½‘åº—ä¹°ä¸œè¥¿ï¼Œä½†ç›´æŽ¥è´­ä¹°å¾ˆæ…¢æˆ–è€…ä¹°ä¸äº†ï¼Œè¿™æ—¶å€™ä½ æ‰¾ä¸€ä¸ªä»£è´­ï¼ˆä»£ç†ï¼‰ï¼Œä»£è´­å¸®ä½ åŽ»ä¹°ç„¶åŽè½¬ç»™ä½ ã€‚NPMä»£ç†å°±æ˜¯è¿™ä¸ª"ä»£è´­"çš„è§’è‰²ã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä»£ç†


**ðŸ”¸ å¸¸è§ä½¿ç”¨åœºæ™¯**
```
ä¼ä¸šç½‘ç»œçŽ¯å¢ƒï¼š
â€¢ å…¬å¸é˜²ç«å¢™é˜»æ­¢ç›´æŽ¥è®¿é—®å¤–ç½‘
â€¢ éœ€è¦é€šè¿‡å…¬å¸ä»£ç†æœåŠ¡å™¨ä¸Šç½‘
â€¢ ç»Ÿä¸€ç®¡ç†ç½‘ç»œè®¿é—®æƒé™

ç½‘ç»œçŽ¯å¢ƒé™åˆ¶ï¼š
â€¢ ç½‘ç»œè®¿é—®é€Ÿåº¦æ…¢
â€¢ æŸäº›NPMåŒ…ä¸‹è½½å›°éš¾
â€¢ éœ€è¦é€šè¿‡VPNæˆ–ä»£ç†è®¿é—®

å®‰å…¨æ€§è€ƒè™‘ï¼š
â€¢ ä¼ä¸šå†…ç½‘å®‰å…¨ç­–ç•¥
â€¢ æµé‡ç›‘æŽ§å’Œç®¡ç†
â€¢ è®¿é—®æŽ§åˆ¶å’Œå®¡è®¡
```

### 1.3 ä»£ç†ç±»åž‹å¯¹æ¯”


| ä»£ç†ç±»åž‹ | **å·¥ä½œåŽŸç†** | **é€‚ç”¨åœºæ™¯** | **é…ç½®å¤æ‚åº¦** |
|---------|-------------|-------------|---------------|
| ðŸŒ **HTTPä»£ç†** | `é€šè¿‡HTTPåè®®è½¬å‘è¯·æ±‚` | `æ™®é€šç½‘ç»œä»£ç†` | `â­â­â˜†` |
| ðŸ”’ **HTTPSä»£ç†** | `åŠ å¯†çš„HTTPä»£ç†` | `å®‰å…¨è¦æ±‚é«˜çš„çŽ¯å¢ƒ` | `â­â­â­` |
| ðŸ”€ **SOCKSä»£ç†** | `æ›´åº•å±‚çš„ç½‘ç»œä»£ç†` | `å¤æ‚ç½‘ç»œçŽ¯å¢ƒ` | `â­â­â­â­` |

---

## 2. ðŸ”§ npm configå‘½ä»¤é…ç½®ä»£ç†


### 2.1 åŸºæœ¬ä»£ç†é…ç½®å‘½ä»¤


**âš¡ å¿«é€Ÿé…ç½®**
```bash
# HTTPä»£ç†é…ç½®
npm config set proxy http://proxy.company.com:8080

# HTTPSä»£ç†é…ç½®  
npm config set https-proxy http://proxy.company.com:8080

# æŸ¥çœ‹å½“å‰ä»£ç†é…ç½®
npm config get proxy
npm config get https-proxy
```

**ðŸ’¡ å‘½ä»¤è§£é‡Š**
- `npm config set`ï¼šè®¾ç½®NPMé…ç½®é¡¹
- `proxy`ï¼šHTTPåè®®çš„ä»£ç†åœ°å€
- `https-proxy`ï¼šHTTPSåè®®çš„ä»£ç†åœ°å€
- `http://proxy.company.com:8080`ï¼šä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£

### 2.2 å¸¦è®¤è¯çš„ä»£ç†é…ç½®


**ðŸ” ç”¨æˆ·åå¯†ç è®¤è¯**
```bash
# åŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„ä»£ç†
npm config set proxy http://username:password@proxy.company.com:8080
npm config set https-proxy http://username:password@proxy.company.com:8080

# URLç¼–ç ç‰¹æ®Šå­—ç¬¦
# å¦‚æžœå¯†ç åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦è¿›è¡ŒURLç¼–ç 
# ä¾‹å¦‚ï¼šå¯†ç æ˜¯ p@ssw0rd!
npm config set proxy http://username:p%40ssw0rd%21@proxy.company.com:8080
```

**âš ï¸ å®‰å…¨æé†’**
> ç›´æŽ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥å¯†ç ä¼šè¢«ä¿å­˜åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå­˜åœ¨å®‰å…¨é£Žé™©ã€‚
> å»ºè®®ä½¿ç”¨çŽ¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶çš„æ–¹å¼ç®¡ç†æ•æ„Ÿä¿¡æ¯ã€‚

### 2.3 ä»£ç†é…ç½®ç®¡ç†


**ðŸ“‹ é…ç½®æŸ¥çœ‹å’Œç®¡ç†**
```bash
# æŸ¥çœ‹æ‰€æœ‰NPMé…ç½®
npm config list

# æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼ˆåŒ…æ‹¬é»˜è®¤å€¼ï¼‰
npm config list -l

# åˆ é™¤ä»£ç†é…ç½®
npm config delete proxy
npm config delete https-proxy

# é‡ç½®æ‰€æœ‰é…ç½®åˆ°é»˜è®¤å€¼
npm config clear
```

---

## 3. ðŸ“„ npmrcæ–‡ä»¶ä»£ç†é…ç½®


### 3.1 npmrcæ–‡ä»¶åŸºç¡€


**ðŸ”¸ é…ç½®æ–‡ä»¶ä½ç½®**
```
ä¼˜å…ˆçº§é¡ºåºï¼ˆé«˜åˆ°ä½Žï¼‰ï¼š

1. é¡¹ç›®çº§é…ç½®ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
   ./npmrc

2. ç”¨æˆ·çº§é…ç½®ï¼ˆç”¨æˆ·ä¸»ç›®å½•ï¼‰
   ~/.npmrc

3. å…¨å±€é…ç½®
   Linux/macOS: /usr/local/etc/npmrc
   Windows: C:\Users\{username}\AppData\Roaming\npm\etc\npmrc

4. NPMå†…ç½®é…ç½®
   NPMå®‰è£…ç›®å½•ä¸‹çš„é»˜è®¤é…ç½®
```

### 3.2 npmrcä»£ç†é…ç½®æ ¼å¼


**ðŸ“ é…ç½®æ–‡ä»¶ç¤ºä¾‹**
```ini
# ~/.npmrc æ–‡ä»¶å†…å®¹

# HTTPå’ŒHTTPSä»£ç†
proxy=http://proxy.company.com:8080
https-proxy=http://proxy.company.com:8080

# ä¸ä½¿ç”¨ä»£ç†çš„åœ°å€ï¼ˆç»•è¿‡ä»£ç†ï¼‰
noproxy=localhost,127.0.0.1,*.local,*.company.com

# æ³¨å†Œè¡¨åœ°å€
registry=https://registry.npmjs.org/

# ä¸¥æ ¼SSLéªŒè¯ï¼ˆä¼ä¸šçŽ¯å¢ƒå¯èƒ½éœ€è¦å…³é—­ï¼‰
strict-ssl=true

# è¯ä¹¦æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æžœéœ€è¦ï¼‰
ca=/path/to/certificate.pem
```

### 3.3 é¡¹ç›®çº§åˆ«ä»£ç†é…ç½®


**ðŸŽ¯ é¡¹ç›®ä¸“ç”¨é…ç½®**
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º.npmrcæ–‡ä»¶
cd /path/to/your/project
touch .npmrc
```

```ini
# é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„.npmrc
# è¿™ä¸ªé…ç½®åªå¯¹å½“å‰é¡¹ç›®ç”Ÿæ•ˆ

proxy=http://project-proxy.company.com:3128
https-proxy=http://project-proxy.company.com:3128
registry=https://private-registry.company.com/

# ç§æœ‰åŒ…çš„é…ç½®
@company:registry=https://private-registry.company.com/
//private-registry.company.com/:_authToken=your-auth-token
```

**ðŸ’¡ ä½¿ç”¨åœºæ™¯**
- ä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ä»£ç†è®¾ç½®
- æ··åˆä½¿ç”¨å…¬æœ‰å’Œç§æœ‰NPMä»“åº“
- å›¢é˜Ÿæˆå‘˜å…±äº«ç›¸åŒçš„ä»£ç†é…ç½®

### 3.4 çŽ¯å¢ƒå˜é‡é…ç½®


**ðŸŒ çŽ¯å¢ƒå˜é‡æ–¹å¼**
```bash
# Linux/macOS
export HTTP_PROXY=http://proxy.company.com:8080
export HTTPS_PROXY=http://proxy.company.com:8080
export NO_PROXY=localhost,127.0.0.1,*.local

# Windows (CMD)
set HTTP_PROXY=http://proxy.company.com:8080
set HTTPS_PROXY=http://proxy.company.com:8080

# Windows (PowerShell)
$env:HTTP_PROXY="http://proxy.company.com:8080"
$env:HTTPS_PROXY="http://proxy.company.com:8080"
```

---

## 4. ðŸ§¶ YarnåŒ…ç®¡ç†å™¨ä»£ç†è®¾ç½®


### 4.1 Yarnä»£ç†é…ç½®


**ðŸ”§ Yarné…ç½®å‘½ä»¤**
```bash
# è®¾ç½®HTTPä»£ç†
yarn config set proxy http://proxy.company.com:8080

# è®¾ç½®HTTPSä»£ç†
yarn config set https-proxy http://proxy.company.com:8080

# æŸ¥çœ‹é…ç½®
yarn config get proxy
yarn config list

# åˆ é™¤ä»£ç†é…ç½®
yarn config delete proxy
yarn config delete https-proxy
```

### 4.2 Yarné…ç½®æ–‡ä»¶


**ðŸ“ é…ç½®æ–‡ä»¶ä½ç½®**
```
ç”¨æˆ·çº§é…ç½®ï¼š
~/.yarnrc

é¡¹ç›®çº§é…ç½®ï¼š
é¡¹ç›®æ ¹ç›®å½•/.yarnrc
```

**ðŸ“ .yarnrcæ–‡ä»¶æ ¼å¼**
```bash
# ~/.yarnrc æ–‡ä»¶å†…å®¹
proxy "http://proxy.company.com:8080"
https-proxy "http://proxy.company.com:8080"
registry "https://registry.npmjs.org/"

# ä¸ä½¿ç”¨ä»£ç†çš„ä¸»æœº
noproxy "localhost,127.0.0.1,*.local"
```

### 4.3 Yarnä¸ŽNPMä»£ç†å…¼å®¹æ€§


**ðŸ”„ å…±äº«é…ç½®**
```bash
# Yarnå¯ä»¥è¯»å–NPMçš„é…ç½®
# å¦‚æžœä½ å·²ç»é…ç½®äº†NPMä»£ç†ï¼ŒYarné€šå¸¸èƒ½è‡ªåŠ¨è¯†åˆ«

# éªŒè¯Yarnæ˜¯å¦è¯»å–åˆ°ä»£ç†é…ç½®
yarn config list | grep proxy

# æ‰‹åŠ¨åŒæ­¥NPMé…ç½®åˆ°Yarn
npm config get proxy | xargs yarn config set proxy
npm config get https-proxy | xargs yarn config set https-proxy
```

---

## 5. ðŸ‡¨ðŸ‡³ å›½å†…é•œåƒæºé…ç½®


### 5.1 æ·˜å®NPMé•œåƒ


**âš¡ æ·˜å®é•œåƒé…ç½®**
```bash
# ä¸´æ—¶ä½¿ç”¨æ·˜å®é•œåƒ
npm install --registry=https://registry.npmmirror.com

# æ°¸ä¹…è®¾ç½®æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

# éªŒè¯é•œåƒæº
npm config get registry

# æµ‹è¯•é•œåƒé€Ÿåº¦
npm info express
```

**ðŸ”¸ æ·˜å®é•œåƒç‰¹ç‚¹**
```
ä¼˜åŠ¿ï¼š
âœ… å›½å†…è®¿é—®é€Ÿåº¦å¿«
âœ… ä¸Žå®˜æ–¹NPMåŒæ­¥åŠæ—¶  
âœ… æ”¯æŒæ‰€æœ‰NPMåŠŸèƒ½
âœ… å…è´¹ä½¿ç”¨

æ³¨æ„äº‹é¡¹ï¼š
âš ï¸ åŒæ­¥å¯èƒ½æœ‰çŸ­æš‚å»¶è¿Ÿ
âš ï¸ å‘å¸ƒåŒ…ä»éœ€å®˜æ–¹NPM
âš ï¸ ç§æœ‰åŒ…éœ€è¦ç‰¹æ®Šé…ç½®
```

### 5.2 å¤šé•œåƒæºç®¡ç†


**ðŸ”€ nrmå·¥å…·ä½¿ç”¨**
```bash
# å®‰è£…nrmï¼ˆNPMé•œåƒæºç®¡ç†å·¥å…·ï¼‰
npm install -g nrm

# æŸ¥çœ‹å¯ç”¨é•œåƒæº
nrm ls

# è¾“å‡ºç¤ºä¾‹ï¼š
#   npm -------- https://registry.npmjs.org/
#   yarn ------- https://registry.yarnpkg.com/
# * taobao ----- https://registry.npmmirror.com/
#   cnpm ------- http://r.cnpmjs.org/

# åˆ‡æ¢é•œåƒæº
nrm use npm        # åˆ‡æ¢åˆ°å®˜æ–¹æº
nrm use taobao     # åˆ‡æ¢åˆ°æ·˜å®æº

# æµ‹è¯•é•œåƒæºé€Ÿåº¦
nrm test

# æ·»åŠ è‡ªå®šä¹‰é•œåƒæº
nrm add company http://registry.company.com/
```

### 5.3 æ··åˆä½¿ç”¨å®˜æ–¹æºå’Œé•œåƒæº


**ðŸŽ¯ æŒ‡å®šåŒ…çš„é•œåƒæº**
```bash
# ä¸ºç‰¹å®šä½œç”¨åŸŸæŒ‡å®šé•œåƒæº
npm config set @company:registry http://registry.company.com/

# å®‰è£…æ—¶æŒ‡å®šé•œåƒæº
npm install express --registry=https://registry.npmjs.org/

# .npmrcæ–‡ä»¶ä¸­é…ç½®å¤šä¸ªé•œåƒæº
```

```ini
# ~/.npmrc
# é»˜è®¤ä½¿ç”¨æ·˜å®é•œåƒ
registry=https://registry.npmmirror.com/

# å…¬å¸ç§æœ‰åŒ…ä½¿ç”¨å…¬å¸é•œåƒ
@company:registry=http://registry.company.com/
//registry.company.com/:_authToken=your-token

# æŸäº›åŒ…ä½¿ç”¨å®˜æ–¹æº
@types:registry=https://registry.npmjs.org/
```

---

## 6. ðŸ¢ ç§æœ‰NPMä»“åº“ä»£ç†è®¿é—®


### 6.1 ç§æœ‰ä»“åº“æ¦‚å¿µ


**ðŸ”¸ ç§æœ‰ä»“åº“ä½¿ç”¨åœºæ™¯**
```
ä¼ä¸šå†…éƒ¨åŒ…ç®¡ç†ï¼š
â€¢ å…¬å¸å†…éƒ¨å¼€å‘çš„ç»„ä»¶åº“
â€¢ æ•æ„Ÿä»£ç ä¸èƒ½å‘å¸ƒåˆ°å…¬ç½‘
â€¢ ç»Ÿä¸€çš„åŒ…ç‰ˆæœ¬ç®¡ç†

æ··åˆåŒ…ç®¡ç†ï¼š
â€¢ å…¬æœ‰åŒ…ï¼šä»ŽNPMå®˜æ–¹èŽ·å–
â€¢ ç§æœ‰åŒ…ï¼šä»Žå…¬å¸ä»“åº“èŽ·å–
â€¢ ä»£ç†è®¿é—®ï¼šé€šè¿‡ä»£ç†è®¿é—®å¤–ç½‘
```

### 6.2 ç§æœ‰ä»“åº“ä»£ç†é…ç½®


**ðŸ”§ é…ç½®ç¤ºä¾‹**
```ini
# ~/.npmrc - ç§æœ‰ä»“åº“ä»£ç†é…ç½®

# é»˜è®¤æ³¨å†Œè¡¨ï¼ˆç§æœ‰ä»“åº“ï¼‰
registry=http://private-registry.company.com/

# ä»£ç†é…ç½®ï¼ˆè®¿é—®å¤–ç½‘çš„å…¬æœ‰åŒ…ï¼‰
proxy=http://proxy.company.com:8080
https-proxy=http://proxy.company.com:8080

# ä¸éœ€è¦ä»£ç†çš„åœ°å€
noproxy=*.company.com,localhost,127.0.0.1

# ç§æœ‰ä»“åº“è®¤è¯
//private-registry.company.com/:_authToken=your-private-token

# å…¬æœ‰åŒ…çš„ä½œç”¨åŸŸé…ç½®
@types:registry=https://registry.npmjs.org/
@babel:registry=https://registry.npmjs.org/
```

### 6.3 è®¤è¯é…ç½®ç®¡ç†


**ðŸ” å®‰å…¨è®¤è¯é…ç½®**
```bash
# NPMç™»å½•ç§æœ‰ä»“åº“
npm login --registry=http://private-registry.company.com/

# æŸ¥çœ‹å½“å‰ç™»å½•çŠ¶æ€
npm whoami --registry=http://private-registry.company.com/

# ä½¿ç”¨tokenè®¤è¯
npm config set //private-registry.company.com/:_authToken your-token

# ä½¿ç”¨ç”¨æˆ·åå¯†ç ï¼ˆbase64ç¼–ç ï¼‰
echo -n 'username:password' | base64
npm config set //private-registry.company.com/:_auth base64_string
```

---

## 7. ðŸ“¦ ä»£ç†çŽ¯å¢ƒä¸‹çš„é¡¹ç›®ç®¡ç†


### 7.1 ä¾èµ–å®‰è£…å’Œç®¡ç†


**âš™ï¸ ä»£ç†çŽ¯å¢ƒä¸‹çš„å®‰è£…**
```bash
# éªŒè¯ä»£ç†é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
npm config list | grep proxy

# å®‰è£…ä¾èµ–åŒ…
npm install

# å®‰è£…æ—¶æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—ï¼ˆæŽ’æŸ¥ä»£ç†é—®é¢˜ï¼‰
npm install --verbose

# å¼ºåˆ¶æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
npm cache clean --force
npm install
```

### 7.2 package-lock.jsonå¤„ç†


**ðŸ”’ é”æ–‡ä»¶åœ¨ä»£ç†çŽ¯å¢ƒä¸­çš„è¡Œä¸º**
```
ä»£ç†çŽ¯å¢ƒç‰¹ç‚¹ï¼š
âœ… package-lock.jsonè®°å½•å®žé™…ä¸‹è½½åœ°å€
âœ… åŒ…å«ä»£ç†çŽ¯å¢ƒä¸‹çš„resolved URL
âœ… ç¡®ä¿å›¢é˜ŸçŽ¯å¢ƒä¸€è‡´æ€§

æ³¨æ„äº‹é¡¹ï¼š
âš ï¸ ä¸åŒä»£ç†çŽ¯å¢ƒå¯èƒ½äº§ç”Ÿä¸åŒçš„é”æ–‡ä»¶
âš ï¸ é•œåƒæºåˆ‡æ¢åŽå»ºè®®é‡æ–°ç”Ÿæˆé”æ–‡ä»¶
âš ï¸ CI/CDçŽ¯å¢ƒéœ€è¦é…ç½®ç›¸åŒçš„ä»£ç†è®¾ç½®
```

**ðŸ”„ é”æ–‡ä»¶ç®¡ç†æœ€ä½³å®žè·µ**
```bash
# åˆ é™¤æ—§çš„é”æ–‡ä»¶å’Œnode_modules
rm -rf node_modules package-lock.json

# åœ¨æ­£ç¡®çš„ä»£ç†çŽ¯å¢ƒä¸‹é‡æ–°å®‰è£…
npm install

# æäº¤æ–°ç”Ÿæˆçš„package-lock.json
git add package-lock.json
git commit -m "Update package-lock.json for proxy environment"
```

### 7.3 å¼€å‘çŽ¯å¢ƒé…ç½®


**ðŸ’» å¼€å‘å·¥å…·ä»£ç†é…ç½®**
```bash
# VS Codeä¸­NPMè„šæœ¬çš„ä»£ç†é…ç½®
# ç¡®ä¿VS Codeç»ˆç«¯ç»§æ‰¿ç³»ç»ŸçŽ¯å¢ƒå˜é‡

# é…ç½®npm scriptsä½¿ç”¨ä»£ç†
```

```json
{
  "scripts": {
    "install:proxy": "npm install --proxy=http://proxy.company.com:8080",
    "build": "npm run install:proxy && npm run build:prod"
  }
}
```

---

## 8. ðŸ” ä»£ç†è®¤è¯ä¸Žå®‰å…¨é…ç½®


### 8.1 è®¤è¯æ–¹å¼å¯¹æ¯”


| è®¤è¯æ–¹å¼ | **å®‰å…¨æ€§** | **é…ç½®éš¾åº¦** | **é€‚ç”¨åœºæ™¯** |
|---------|-----------|-------------|-------------|
| ðŸ”“ **æ— è®¤è¯** | `ä½Ž` | `â­â˜†â˜†` | `å¼€æ”¾ä»£ç†çŽ¯å¢ƒ` |
| ðŸ‘¤ **ç”¨æˆ·åå¯†ç ** | `ä¸­` | `â­â­â˜†` | `åŸºç¡€ä¼ä¸šçŽ¯å¢ƒ` |
| ðŸŽ« **Tokenè®¤è¯** | `é«˜` | `â­â­â­` | `ä¸¥æ ¼å®‰å…¨è¦æ±‚` |
| ðŸ“œ **è¯ä¹¦è®¤è¯** | `å¾ˆé«˜` | `â­â­â­â­` | `é«˜å®‰å…¨çº§åˆ«ä¼ä¸š` |

### 8.2 SSLè¯ä¹¦å¤„ç†


**ðŸ“œ ä¼ä¸šè¯ä¹¦é…ç½®**
```bash
# è®¾ç½®CAè¯ä¹¦è·¯å¾„
npm config set ca /path/to/company-ca.pem

# å…³é—­SSLéªŒè¯ï¼ˆä¸æŽ¨èï¼Œä»…ç”¨äºŽæµ‹è¯•ï¼‰
npm config set strict-ssl false

# è®¾ç½®è¯ä¹¦æ–‡ä»¶
npm config set cert /path/to/client-cert.pem
npm config set key /path/to/client-key.pem
```

```ini
# ~/.npmrc SSLé…ç½®
strict-ssl=true
ca=/path/to/company-ca-bundle.pem
cert=/path/to/client-cert.pem
key=/path/to/client-key.pem
```

### 8.3 çŽ¯å¢ƒéš”ç¦»é…ç½®


**ðŸ—ï¸ å¤šçŽ¯å¢ƒé…ç½®ç®¡ç†**
```bash
# å¼€å‘çŽ¯å¢ƒé…ç½®
cat > ~/.npmrc.dev << EOF
registry=https://registry.npmmirror.com/
proxy=http://dev-proxy.company.com:8080
https-proxy=http://dev-proxy.company.com:8080
EOF

# ç”Ÿäº§çŽ¯å¢ƒé…ç½®  
cat > ~/.npmrc.prod << EOF
registry=http://prod-registry.company.com/
proxy=http://prod-proxy.company.com:8080
https-proxy=http://prod-proxy.company.com:8080
//prod-registry.company.com/:_authToken=prod-token
EOF

# åˆ‡æ¢çŽ¯å¢ƒé…ç½®
alias npm-dev='cp ~/.npmrc.dev ~/.npmrc'
alias npm-prod='cp ~/.npmrc.prod ~/.npmrc'
```

---

## 9. â“ å¸¸è§é—®é¢˜ä¸Žè§£å†³æ–¹æ¡ˆ


### 9.1 ä»£ç†è¿žæŽ¥é—®é¢˜


**ðŸ”§ è¿žæŽ¥è¶…æ—¶è§£å†³**
```bash
# æ£€æŸ¥ä»£ç†æœåŠ¡å™¨è¿žé€šæ€§
curl -I --proxy http://proxy.company.com:8080 https://registry.npmjs.org/

# å¢žåŠ è¶…æ—¶æ—¶é—´
npm config set timeout 60000

# ä½¿ç”¨ä¸åŒçš„ä»£ç†åè®®
npm config set proxy socks5://proxy.company.com:1080
```

### 9.2 è®¤è¯å¤±è´¥å¤„ç†


**ðŸ” è®¤è¯é—®é¢˜æŽ’æŸ¥**
```bash
# æ£€æŸ¥è®¤è¯é…ç½®
npm config get //registry.company.com/:_authToken

# é‡æ–°ç™»å½•
npm logout --registry=http://registry.company.com/
npm login --registry=http://registry.company.com/

# æ£€æŸ¥ä»£ç†è®¤è¯
curl -v --proxy-user username:password --proxy http://proxy.company.com:8080 https://registry.npmjs.org/
```

### 9.3 ç¼“å­˜é—®é¢˜è§£å†³


**ðŸ—‚ï¸ ç¼“å­˜æ¸…ç†**
```bash
# æ¸…é™¤NPMç¼“å­˜
npm cache clean --force

# æŸ¥çœ‹ç¼“å­˜ä½ç½®
npm config get cache

# éªŒè¯ç¼“å­˜
npm cache verify

# å®Œå…¨é‡ç½®ï¼ˆè°¨æ…Žä½¿ç”¨ï¼‰
rm -rf ~/.npm
npm cache clean --force
```

### 9.4 æ€§èƒ½ä¼˜åŒ–


**âš¡ å®‰è£…é€Ÿåº¦ä¼˜åŒ–**
```bash
# å¹¶è¡Œå®‰è£…æ•°é‡ä¼˜åŒ–
npm config set maxsockets 5

# ä½¿ç”¨æœ¬åœ°ç¼“å­˜
npm config set cache-min 3600

# ç¦ç”¨è¿›åº¦æ¡ï¼ˆCIçŽ¯å¢ƒï¼‰
npm config set progress false

# åªå®‰è£…ç”Ÿäº§ä¾èµ–
npm install --only=production
```

---

## 10. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒé…ç½®


```
ðŸ”¸ åŸºç¡€ä»£ç†é…ç½®ï¼šnpm config set proxy/https-proxy
ðŸ”¸ é…ç½®æ–‡ä»¶ç®¡ç†ï¼š~/.npmrcæ–‡ä»¶ç¼–è¾‘å’Œä¼˜å…ˆçº§
ðŸ”¸ é•œåƒæºåˆ‡æ¢ï¼šæ·˜å®é•œåƒå’Œå®˜æ–¹æºçš„é€‰æ‹©ä½¿ç”¨
ðŸ”¸ ç§æœ‰ä»“åº“ï¼šä¼ä¸šå†…éƒ¨åŒ…ç®¡ç†å’Œæ··åˆæºé…ç½®
ðŸ”¸ è®¤è¯å®‰å…¨ï¼štokenå’Œè¯ä¹¦çš„æ­£ç¡®é…ç½®æ–¹æ³•
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ ä»£ç†é…ç½®çš„æœ¬è´¨**
```
ä½œç”¨æœºåˆ¶ï¼š
â€¢ ä»£ç†æ˜¯ç½‘ç»œè¯·æ±‚çš„ä¸­è½¬ç«™
â€¢ å¸®åŠ©ç»•è¿‡ç½‘ç»œé™åˆ¶å’Œæå‡é€Ÿåº¦
â€¢ å¯ä»¥å®žçŽ°è®¿é—®æŽ§åˆ¶å’Œå®‰å…¨ç®¡ç†

é…ç½®åŽŸåˆ™ï¼š
â€¢ é¡¹ç›®çº§é…ç½®ä¼˜å…ˆäºŽç”¨æˆ·çº§é…ç½®
â€¢ çŽ¯å¢ƒå˜é‡ä¼˜å…ˆäºŽé…ç½®æ–‡ä»¶
â€¢ å®‰å…¨æ€§å’Œä¾¿åˆ©æ€§éœ€è¦å¹³è¡¡
```

**ðŸ”¹ é•œåƒæºçš„é€‰æ‹©ç­–ç•¥**
```
é€‰æ‹©ä¾æ®ï¼š
â€¢ ç½‘ç»œçŽ¯å¢ƒï¼šå›½å†…å»ºè®®ä½¿ç”¨æ·˜å®é•œåƒ
â€¢ å®‰å…¨è¦æ±‚ï¼šä¼ä¸šçŽ¯å¢ƒä½¿ç”¨ç§æœ‰é•œåƒ
â€¢ åŒ…ç±»åž‹ï¼šå…¬æœ‰åŒ…å’Œç§æœ‰åŒ…åˆ†åˆ«é…ç½®
â€¢ å›¢é˜Ÿåä½œï¼šç»Ÿä¸€å›¢é˜Ÿçš„é•œåƒæºé…ç½®
```

**ðŸ”¹ å¸¸è§é…ç½®è¯¯åŒº**
```
é¿å…é—®é¢˜ï¼š
âŒ åœ¨å‘½ä»¤è¡Œç›´æŽ¥è¾“å…¥å¯†ç 
âŒ æ··ç”¨ä¸åŒçš„ä»£ç†é…ç½®
âŒ å¿½ç•¥SSLè¯ä¹¦éªŒè¯é—®é¢˜
âŒ ä¸åŒçŽ¯å¢ƒä½¿ç”¨ç›¸åŒé…ç½®

æœ€ä½³å®žè·µï¼š
âœ… ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†ä»£ç†è®¾ç½®
âœ… ä¸ºä¸åŒçŽ¯å¢ƒå‡†å¤‡ä¸åŒé…ç½®
âœ… å®šæœŸéªŒè¯ä»£ç†é…ç½®æœ‰æ•ˆæ€§
âœ… å›¢é˜Ÿå…±äº«æ ‡å‡†åŒ–é…ç½®æ¨¡æ¿
```

### 10.3 å®žé™…åº”ç”¨æŒ‡å¯¼


**ðŸ“ é…ç½®æ£€æŸ¥æ¸…å•**
```
âœ… ä»£ç†é…ç½®æ£€æŸ¥
- [ ] éªŒè¯ä»£ç†æœåŠ¡å™¨è¿žé€šæ€§
- [ ] ç¡®è®¤ç”¨æˆ·åå¯†ç æ­£ç¡®
- [ ] æ£€æŸ¥noproxyé…ç½®

âœ… é•œåƒæºé…ç½®æ£€æŸ¥  
- [ ] ç¡®è®¤æ³¨å†Œè¡¨åœ°å€å¯è®¿é—®
- [ ] éªŒè¯ç§æœ‰åŒ…çš„ä½œç”¨åŸŸé…ç½®
- [ ] æµ‹è¯•åŒ…å®‰è£…é€Ÿåº¦

âœ… å®‰å…¨é…ç½®æ£€æŸ¥
- [ ] SSLè¯ä¹¦é…ç½®æ­£ç¡®
- [ ] è®¤è¯tokenæœ‰æ•ˆæœŸ
- [ ] æ•æ„Ÿä¿¡æ¯å®‰å…¨å­˜å‚¨
```

### 10.4 å®žç”¨å·¥å…·æŽ¨è


**ðŸ› ï¸ è¾…åŠ©å·¥å…·**
```
nrmï¼šé•œåƒæºç®¡ç†å·¥å…·
â€¢ å¿«é€Ÿåˆ‡æ¢ä¸åŒé•œåƒæº
â€¢ æµ‹è¯•é•œåƒæºè®¿é—®é€Ÿåº¦
â€¢ ç®¡ç†è‡ªå®šä¹‰é•œåƒæº

npm-check-updatesï¼šä¾èµ–æ›´æ–°å·¥å…·
â€¢ æ£€æŸ¥è¿‡æœŸçš„ä¾èµ–åŒ…
â€¢ æ‰¹é‡æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
â€¢ åœ¨ä»£ç†çŽ¯å¢ƒä¸‹æ­£å¸¸å·¥ä½œ

verdaccioï¼šç§æœ‰NPMä»“åº“
â€¢ æ­å»ºä¼ä¸šå†…éƒ¨NPMä»“åº“
â€¢ æ”¯æŒä»£ç†åˆ°å®˜æ–¹NPM
â€¢ æä¾›åŒ…ç‰ˆæœ¬ç®¡ç†å’Œæƒé™æŽ§åˆ¶
```

### 10.5 æ•…éšœæŽ’æŸ¥æµç¨‹


```
é—®é¢˜è¯Šæ–­æ­¥éª¤ï¼š

ðŸ” 1. æ£€æŸ¥ç½‘ç»œè¿žé€šæ€§
   curl --proxy http://proxy:8080 https://registry.npmjs.org/

ðŸ” 2. éªŒè¯ä»£ç†é…ç½®
   npm config list | grep proxy

ðŸ” 3. æµ‹è¯•è®¤è¯
   npm whoami --registry=http://your-registry/

ðŸ” 4. æ¸…é™¤ç¼“å­˜é‡è¯•
   npm cache clean --force && npm install

ðŸ” 5. ä½¿ç”¨è¯¦ç»†æ—¥å¿—
   npm install --verbose --loglevel=silly
```

**ðŸŽ¯ æ ¸å¿ƒè®°å¿†å£è¯€**
- ä»£ç†é…ç½®åˆ†å±‚çº§ï¼Œé¡¹ç›®ç”¨æˆ·å…¨å±€ç³»ç»Ÿ
- é•œåƒæºé€‰æ‹©çœ‹çŽ¯å¢ƒï¼Œå›½å†…æ·˜å®ä¼ä¸šç§æœ‰
- è®¤è¯å®‰å…¨æœ€é‡è¦ï¼Œtokenå¯†ç è¯ä¹¦ç®¡å¥½
- é—®é¢˜æŽ’æŸ¥æœ‰æ­¥éª¤ï¼Œç½‘ç»œé…ç½®ç¼“å­˜è®¤è¯