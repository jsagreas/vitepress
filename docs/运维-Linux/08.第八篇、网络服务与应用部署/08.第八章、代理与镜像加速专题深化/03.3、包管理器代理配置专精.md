---
title: 3ã€åŒ…ç®¡ç†å™¨ä»£ç†é…ç½®ä¸“ç²¾
---
## ðŸ“š ç›®å½•

1. [åŒ…ç®¡ç†å™¨ä»£ç†åŸºç¡€æ¦‚å¿µ](#1-åŒ…ç®¡ç†å™¨ä»£ç†åŸºç¡€æ¦‚å¿µ)
2. [APTä»£ç†é…ç½®ä¸“ç²¾](#2-APTä»£ç†é…ç½®ä¸“ç²¾)
3. [YUM/DNFä»£ç†é…ç½®è¯¦è§£](#3-YUM-DNFä»£ç†é…ç½®è¯¦è§£)
4. [Python pipä»£ç†é…ç½®](#4-Python-pipä»£ç†é…ç½®)
5. [Node.js npmä»£ç†é…ç½®](#5-Node-js-npmä»£ç†é…ç½®)
6. [Ruby gemä»£ç†é…ç½®](#6-Ruby-gemä»£ç†é…ç½®)
7. [CondaåŒ…ç®¡ç†å™¨ä»£ç†](#7-CondaåŒ…ç®¡ç†å™¨ä»£ç†)
8. [ä»£ç†è®¤è¯ä¸Žå®‰å…¨é…ç½®](#8-ä»£ç†è®¤è¯ä¸Žå®‰å…¨é…ç½®)
9. [ä»£ç†æ•…éšœè¯Šæ–­ä¸Žè§£å†³](#9-ä»£ç†æ•…éšœè¯Šæ–­ä¸Žè§£å†³)
10. [å¤šçŽ¯å¢ƒä»£ç†ç®¡ç†ç­–ç•¥](#10-å¤šçŽ¯å¢ƒä»£ç†ç®¡ç†ç­–ç•¥)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸŒ åŒ…ç®¡ç†å™¨ä»£ç†åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯åŒ…ç®¡ç†å™¨ä»£ç†


**ðŸ”¸ åŸºæœ¬æ¦‚å¿µç†è§£**

åŒ…ç®¡ç†å™¨ä»£ç†å°±æ˜¯è®©è½¯ä»¶åŒ…çš„ä¸‹è½½å’Œå®‰è£…é€šè¿‡ä»£ç†æœåŠ¡å™¨è¿›è¡Œã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨ä½ çš„ç”µè„‘å’Œè½¯ä»¶æºä¹‹é—´æž¶è®¾ä¸€ä¸ª"ä¸­è½¬ç«™"ã€‚

```
æ­£å¸¸ä¸‹è½½ï¼šä½ çš„ç”µè„‘ â”€â”€ç›´æŽ¥â”€â”€> è½¯ä»¶æºæœåŠ¡å™¨
ä»£ç†ä¸‹è½½ï¼šä½ çš„ç”µè„‘ â”€â”€> ä»£ç†æœåŠ¡å™¨ â”€â”€> è½¯ä»¶æºæœåŠ¡å™¨
```

**ðŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä»£ç†**

**ç½‘ç»œçŽ¯å¢ƒé™åˆ¶**ï¼š
- å…¬å¸å†…ç½‘çŽ¯å¢ƒå¿…é¡»é€šè¿‡ä»£ç†æ‰èƒ½è®¿é—®å¤–ç½‘
- å­¦æ ¡ç½‘ç»œå¯¹ç›´æŽ¥è®¿é—®å¤–éƒ¨è½¯ä»¶æºæœ‰é™åˆ¶
- æŸäº›åœ°åŒºå¯¹ç‰¹å®šè½¯ä»¶æºè®¿é—®å—é™

**ä¸‹è½½é€Ÿåº¦ä¼˜åŒ–**ï¼š
- é€šè¿‡æœ¬åœ°ç¼“å­˜ä»£ç†æé«˜ä¸‹è½½é€Ÿåº¦
- å‡å°‘é‡å¤ä¸‹è½½ï¼ŒèŠ‚çœå¸¦å®½
- ç»Ÿä¸€ç®¡ç†å¤šå°æœºå™¨çš„è½¯ä»¶åŒ…ä¸‹è½½

**å®‰å…¨å’Œç®¡æŽ§éœ€æ±‚**ï¼š
- ä¼ä¸šéœ€è¦ç›‘æŽ§å’Œå®¡è®¡è½¯ä»¶åŒ…ä¸‹è½½
- é˜²æ­¢æ¶æ„è½¯ä»¶åŒ…çš„å®‰è£…
- ç»Ÿä¸€æŽ§åˆ¶å¯å®‰è£…çš„è½¯ä»¶åŒ…èŒƒå›´

### 1.2 ä»£ç†é…ç½®çš„é€šç”¨åŽŸç†


**ðŸ”§ é…ç½®è¦ç´ è¯´æ˜Ž**

æ‰€æœ‰åŒ…ç®¡ç†å™¨çš„ä»£ç†é…ç½®éƒ½åŒ…å«è¿™äº›åŸºæœ¬ä¿¡æ¯ï¼š

| é…ç½®é¡¹ | è¯´æ˜Ž | ç¤ºä¾‹ |
|--------|------|------|
| **ä»£ç†åœ°å€** | ä»£ç†æœåŠ¡å™¨çš„IPæˆ–åŸŸå | `proxy.company.com` |
| **ç«¯å£å·** | ä»£ç†æœåŠ¡çš„ç«¯å£ | `8080`ã€`3128` |
| **åè®®ç±»åž‹** | HTTPæˆ–HTTPSä»£ç† | `http://`ã€`https://` |
| **è®¤è¯ä¿¡æ¯** | ç”¨æˆ·åå’Œå¯†ç ï¼ˆå¦‚éœ€è¦ï¼‰ | `username:password` |
| **ä¾‹å¤–åˆ—è¡¨** | ä¸ä½¿ç”¨ä»£ç†çš„åœ°å€ | `localhost,127.0.0.1` |

**ðŸŒŸ é…ç½®ä½ç½®åˆ†ç±»**

åŒ…ç®¡ç†å™¨ä»£ç†é…ç½®é€šå¸¸æœ‰ä¸‰ä¸ªå±‚çº§ï¼š

```
ç³»ç»Ÿçº§é…ç½®ï¼š
å½±å“æ‰€æœ‰ç”¨æˆ·ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™
ä½ç½®ï¼š/etc/ä¸‹çš„é…ç½®æ–‡ä»¶

ç”¨æˆ·çº§é…ç½®ï¼š
åªå½±å“å½“å‰ç”¨æˆ·
ä½ç½®ï¼šç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶

ä¸´æ—¶é…ç½®ï¼š
åªåœ¨å½“å‰ä¼šè¯æœ‰æ•ˆ
æ–¹å¼ï¼šçŽ¯å¢ƒå˜é‡æˆ–å‘½ä»¤è¡Œå‚æ•°
```

---

## 2. ðŸ“¦ APTä»£ç†é…ç½®ä¸“ç²¾


### 2.1 APTé…ç½®æ–‡ä»¶ç»“æž„ç†è§£


**ðŸ”¸ é…ç½®æ–‡ä»¶å±‚çº§**

APTçš„é…ç½®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œç†è§£è¿™ä¸ªç»“æž„å¾ˆé‡è¦ï¼š

```
/etc/apt/
â”œâ”€â”€ apt.conf                 # ä¸»é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸ä¸å­˜åœ¨ï¼‰
â”œâ”€â”€ apt.conf.d/             # é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆæŽ¨èä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ 00-proxy            # ä»£ç†é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ 01-vendor           # åŽ‚å•†é…ç½®
â”‚   â””â”€â”€ 99-local            # æœ¬åœ°å®šåˆ¶é…ç½®
â””â”€â”€ sources.list            # è½¯ä»¶æºåˆ—è¡¨
```

**ðŸ’¡ ä¸ºä»€ä¹ˆä½¿ç”¨apt.conf.dç›®å½•**

è¿™ç§è®¾è®¡æœ‰å¾ˆå¤šå¥½å¤„ï¼š
- **æ¨¡å—åŒ–ç®¡ç†**ï¼šä¸åŒåŠŸèƒ½çš„é…ç½®åˆ†å¼€å­˜æ”¾
- **ä¼˜å…ˆçº§æŽ§åˆ¶**ï¼šæ–‡ä»¶åå‰çš„æ•°å­—å†³å®šåŠ è½½é¡ºåº
- **ä¾¿äºŽç»´æŠ¤**ï¼šä¿®æ”¹æŸä¸ªåŠŸèƒ½ä¸å½±å“å…¶ä»–é…ç½®
- **åŒ…ç®¡ç†å‹å¥½**ï¼šè½¯ä»¶åŒ…å¯ä»¥å®‰è£…è‡ªå·±çš„é…ç½®æ–‡ä»¶

### 2.2 åŸºæœ¬HTTPä»£ç†é…ç½®


**âš™ï¸ åˆ›å»ºä»£ç†é…ç½®æ–‡ä»¶**

åœ¨`/etc/apt/apt.conf.d/`ç›®å½•ä¸‹åˆ›å»ºä»£ç†é…ç½®æ–‡ä»¶ï¼š

```bash
sudo nano /etc/apt/apt.conf.d/00-proxy
```

**ðŸ“ åŸºç¡€é…ç½®å†…å®¹**

```bash
# HTTPä»£ç†é…ç½®
Acquire::http::Proxy "http://proxy.company.com:8080";

# HTTPSä»£ç†é…ç½®  
Acquire::https::Proxy "http://proxy.company.com:8080";

# FTPä»£ç†é…ç½®ï¼ˆå¦‚æžœéœ€è¦ï¼‰
Acquire::ftp::Proxy "http://proxy.company.com:8080";
```

**ðŸ” é…ç½®è¯­æ³•è¯´æ˜Ž**

APTé…ç½®ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•æ ¼å¼ï¼š
- **åŒå†’å·åˆ†éš”**ï¼š`Acquire::http::Proxy`è¡¨ç¤ºAcquireèŠ‚ä¸‹çš„httpèŠ‚ä¸‹çš„Proxyè®¾ç½®
- **å­—ç¬¦ä¸²å€¼**ï¼šä»£ç†åœ°å€ç”¨åŒå¼•å·åŒ…å›´
- **æ³¨é‡Š**ï¼šä½¿ç”¨`#`å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Š
- **åˆ†å·ç»“å°¾**ï¼šæ¯ä¸ªé…ç½®é¡¹å¿…é¡»ä»¥åˆ†å·ç»“æŸ

### 2.3 é«˜çº§ä»£ç†é…ç½®


**ðŸŽ¯ é’ˆå¯¹ç‰¹å®šä¸»æœºçš„ä»£ç†è®¾ç½®**

æœ‰æ—¶å€™ä½ éœ€è¦ä¸ºä¸åŒçš„è½¯ä»¶æºä½¿ç”¨ä¸åŒçš„ä»£ç†ï¼š

```bash
# ä¸ºç‰¹å®šä¸»æœºè®¾ç½®ä»£ç†
Acquire::http::Proxy::archive.ubuntu.com "http://ubuntu-proxy:8080";
Acquire::http::Proxy::security.ubuntu.com "http://security-proxy:8080";

# ä¸ºæŸäº›ä¸»æœºç¦ç”¨ä»£ç†
Acquire::http::Proxy::ppa.launchpad.net "DIRECT";
Acquire::http::Proxy::localhost "DIRECT";
```

**ðŸ” å¸¦è®¤è¯çš„ä»£ç†é…ç½®**

å½“ä»£ç†æœåŠ¡å™¨éœ€è¦ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼š

```bash
# åŸºæœ¬è®¤è¯é…ç½®
Acquire::http::Proxy "http://username:password@proxy.company.com:8080";

# æ›´å®‰å…¨çš„åšæ³•ï¼šå°†è®¤è¯ä¿¡æ¯åˆ†ç¦»
Acquire::http::Proxy "http://proxy.company.com:8080";
Acquire::http::Proxy::User "username";
Acquire::http::Proxy::Password "password";
```

> âš ï¸ **å®‰å…¨æé†’**ï¼šç›´æŽ¥åœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ˜Žæ–‡å¯†ç æœ‰å®‰å…¨é£Žé™©ï¼Œå»ºè®®ä½¿ç”¨çŽ¯å¢ƒå˜é‡æˆ–ä¸“é—¨çš„è®¤è¯æ–‡ä»¶ã€‚

### 2.4 ä¸´æ—¶ä»£ç†é…ç½®


**ðŸš€ çŽ¯å¢ƒå˜é‡æ–¹å¼**

å¦‚æžœåªæ˜¯ä¸´æ—¶éœ€è¦ä½¿ç”¨ä»£ç†ï¼Œå¯ä»¥é€šè¿‡çŽ¯å¢ƒå˜é‡è®¾ç½®ï¼š

```bash
# è®¾ç½®ä»£ç†çŽ¯å¢ƒå˜é‡
export http_proxy=http://proxy.company.com:8080
export https_proxy=http://proxy.company.com:8080
export ftp_proxy=http://proxy.company.com:8080

# è®¾ç½®ä¸ä½¿ç”¨ä»£ç†çš„åœ°å€
export no_proxy=localhost,127.0.0.1,.local

# æ‰§è¡Œaptå‘½ä»¤
sudo -E apt update
```

**ðŸ’¡ å‘½ä»¤è¡Œç›´æŽ¥æŒ‡å®š**

ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œç›´æŽ¥æŒ‡å®šä»£ç†ï¼š

```bash
sudo apt -o Acquire::http::Proxy=http://proxy:8080 update
```

---

## 3. ðŸ”´ YUM/DNFä»£ç†é…ç½®è¯¦è§£


### 3.1 YUMé…ç½®æ–‡ä»¶ç»“æž„


**ðŸ”¸ ä¸»é…ç½®æ–‡ä»¶ä½ç½®**

YUM/DNFçš„é…ç½®ç›¸å¯¹é›†ä¸­ï¼Œä¸»è¦é…ç½®æ–‡ä»¶æ˜¯ï¼š

```
/etc/yum.conf           # CentOS 7åŠä»¥ä¸‹ç‰ˆæœ¬
/etc/dnf/dnf.conf       # Fedoraå’ŒCentOS 8+ç‰ˆæœ¬
```

**ðŸ“‚ é…ç½®æ–‡ä»¶å†…å®¹ç»“æž„**

YUMé…ç½®æ–‡ä»¶é‡‡ç”¨INIæ ¼å¼ï¼Œç»“æž„æ¸…æ™°ï¼š

```
[main]                  # ä¸»è¦é…ç½®æ®µ
# å…¨å±€é…ç½®é¡¹

[repository]            # ä»“åº“é…ç½®æ®µ
# ä»“åº“ç›¸å…³é…ç½®
```

### 3.2 YUMåŸºæœ¬ä»£ç†é…ç½®


**âš™ï¸ ç¼–è¾‘ä¸»é…ç½®æ–‡ä»¶**

```bash
sudo nano /etc/yum.conf
```

**ðŸ“ åœ¨[main]æ®µæ·»åŠ ä»£ç†é…ç½®**

```ini
[main]
# çŽ°æœ‰é…ç½®...
cachedir=/var/cache/yum/$basearch/$releasever
keepcache=0
debuglevel=2

# ä»£ç†é…ç½®
proxy=http://proxy.company.com:8080
proxy_username=your_username
proxy_password=your_password

# å¯é€‰ï¼šæŒ‡å®šä»£ç†è®¤è¯æ–¹æ³•
proxy_auth_method=basic
```

**ðŸ” é…ç½®å‚æ•°è¯¦è§£**

| å‚æ•° | è¯´æ˜Ž | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `proxy` | ä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£ | `http://proxy:8080` |
| `proxy_username` | ä»£ç†è®¤è¯ç”¨æˆ·å | `john` |
| `proxy_password` | ä»£ç†è®¤è¯å¯†ç  | `secret123` |
| `proxy_auth_method` | è®¤è¯æ–¹æ³• | `basic`ã€`digest` |

### 3.3 DNFä»£ç†é…ç½®


**ðŸ†• DNFé…ç½®æ–¹å¼**

DNFæ˜¯YUMçš„å‡çº§ç‰ˆï¼Œé…ç½®æ–¹å¼åŸºæœ¬ç›¸åŒï¼š

```bash
sudo nano /etc/dnf/dnf.conf
```

**ðŸ“ DNFé…ç½®ç¤ºä¾‹**

```ini
[main]
gpgcheck=1
installonly_limit=3
clean_requirements_on_remove=True

# ä»£ç†é…ç½®
proxy=http://proxy.company.com:8080
proxy_username=username
proxy_password=password

# æŽ’é™¤ä¸ä½¿ç”¨ä»£ç†çš„ä»“åº“
excludepkgs=kernel*
```

### 3.4 ä»“åº“çº§åˆ«çš„ä»£ç†é…ç½®


**ðŸŽ¯ ä¸ºç‰¹å®šä»“åº“è®¾ç½®ä»£ç†**

æœ‰æ—¶ä½ éœ€è¦ä¸ºä¸åŒçš„è½¯ä»¶ä»“åº“ä½¿ç”¨ä¸åŒçš„ä»£ç†è®¾ç½®ï¼š

```bash
sudo nano /etc/yum.repos.d/epel.repo
```

**ðŸ“ ä»“åº“é…ç½®ç¤ºä¾‹**

```ini
[epel]
name=Extra Packages for Enterprise Linux 7 - $basearch
baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7

# ä¸ºè¿™ä¸ªä»“åº“å•ç‹¬è®¾ç½®ä»£ç†
proxy=http://external-proxy:8080
proxy_username=epel_user
proxy_password=epel_pass
```

### 3.5 ä¸´æ—¶ä»£ç†è®¾ç½®


**ðŸš€ çŽ¯å¢ƒå˜é‡æ–¹å¼**

```bash
# è®¾ç½®ä»£ç†çŽ¯å¢ƒå˜é‡
export http_proxy=http://proxy:8080
export https_proxy=http://proxy:8080

# æ‰§è¡Œyumå‘½ä»¤
sudo -E yum update
```

**ðŸ’¡ å‘½ä»¤è¡Œå‚æ•°æ–¹å¼**

```bash
# ä½¿ç”¨--setoptå‚æ•°ä¸´æ—¶è®¾ç½®
sudo yum --setopt=proxy=http://proxy:8080 update
```

---

## 4. ðŸ Python pipä»£ç†é…ç½®


### 4.1 pipé…ç½®æ–‡ä»¶ä½ç½®


**ðŸ”¸ å¤šå¹³å°é…ç½®æ–‡ä»¶è·¯å¾„**

pipçš„é…ç½®æ–‡ä»¶ä½ç½®å› æ“ä½œç³»ç»Ÿè€Œå¼‚ï¼š

```
Linux/Macç”¨æˆ·çº§é…ç½®ï¼š
~/.pip/pip.conf
~/.config/pip/pip.conf    # æ–°ç‰ˆæœ¬æŽ¨è

Windowsç”¨æˆ·çº§é…ç½®ï¼š
%APPDATA%\pip\pip.ini
%USERPROFILE%\pip\pip.ini

å…¨å±€é…ç½®ï¼ˆæ‰€æœ‰ç”¨æˆ·ï¼‰ï¼š
Linux: /etc/pip.conf
Windows: C:\ProgramData\pip\pip.ini
```

**ðŸ’¡ é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§**

pipæŒ‰ä»¥ä¸‹é¡ºåºè¯»å–é…ç½®æ–‡ä»¶ï¼š
1. å‘½ä»¤è¡Œå‚æ•°ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
2. çŽ¯å¢ƒå˜é‡
3. ç”¨æˆ·é…ç½®æ–‡ä»¶
4. å…¨å±€é…ç½®æ–‡ä»¶ï¼ˆä¼˜å…ˆçº§æœ€ä½Žï¼‰

### 4.2 åŸºæœ¬ä»£ç†é…ç½®


**âš™ï¸ åˆ›å»ºç”¨æˆ·é…ç½®æ–‡ä»¶**

```bash
# åˆ›å»ºé…ç½®ç›®å½•
mkdir -p ~/.config/pip

# åˆ›å»ºé…ç½®æ–‡ä»¶
nano ~/.config/pip/pip.conf
```

**ðŸ“ åŸºç¡€ä»£ç†é…ç½®**

```ini
[global]
proxy = http://proxy.company.com:8080
trusted-host = pypi.org
               files.pythonhosted.org
               pypi.python.org

[install]
timeout = 60
```

**ðŸ” é…ç½®é¡¹è¯´æ˜Ž**

- **proxy**ï¼šä»£ç†æœåŠ¡å™¨åœ°å€
- **trusted-host**ï¼šä¿¡ä»»çš„ä¸»æœºï¼Œè§£å†³HTTPSè¯ä¹¦éªŒè¯é—®é¢˜
- **timeout**ï¼šä¸‹è½½è¶…æ—¶æ—¶é—´è®¾ç½®

### 4.3 é«˜çº§pipä»£ç†é…ç½®


**ðŸ” å¸¦è®¤è¯çš„ä»£ç†é…ç½®**

```ini
[global]
proxy = http://username:password@proxy.company.com:8080

# æˆ–è€…åˆ†å¼€é…ç½®
proxy = http://proxy.company.com:8080
proxy-user = username
proxy-password = password

# æŒ‡å®šç´¢å¼•æº
index-url = https://pypi.tuna.tsinghua.edu.cn/simple/
extra-index-url = https://pypi.org/simple/

[install]
trusted-host = pypi.tuna.tsinghua.edu.cn
               pypi.org
               files.pythonhosted.org
```

**ðŸŒŸ å¤šä»£ç†é…ç½®ç­–ç•¥**

```ini
[global]
# ä¸»ä»£ç†
proxy = http://main-proxy:8080

# ä¸ºç‰¹å®šåŸŸåé…ç½®ä¸åŒä»£ç†
[install]
# ä¿¡ä»»çš„ä¸»æœºä¸é€šè¿‡ä»£ç†
trusted-host = localhost
               127.0.0.1
               internal.company.com

# é…ç½®å¤‡ç”¨ç´¢å¼•æº
extra-index-url = https://pypi.douban.com/simple/
                  https://mirrors.aliyun.com/pypi/simple/
```

### 4.4 ä¸´æ—¶ä»£ç†ä½¿ç”¨


**ðŸš€ å‘½ä»¤è¡Œå‚æ•°æ–¹å¼**

```bash
# ä¸´æ—¶æŒ‡å®šä»£ç†
pip install --proxy http://proxy:8080 requests

# æŒ‡å®šä¿¡ä»»ä¸»æœº
pip install --trusted-host pypi.org --proxy http://proxy:8080 numpy

# ä½¿ç”¨çŽ¯å¢ƒå˜é‡
export https_proxy=http://proxy:8080
pip install requests
```

**ðŸ’¡ pipenvå’Œpoetryçš„ä»£ç†é…ç½®**

```bash
# pipenvçŽ¯å¢ƒå˜é‡
export PIPENV_PYPI_MIRROR=https://pypi.douban.com/simple/

# poetryé…ç½®
poetry config repositories.aliyun https://mirrors.aliyun.com/pypi/simple/
poetry config http-basic.aliyun username password
```

---

## 5. ðŸ“¦ Node.js npmä»£ç†é…ç½®


### 5.1 npmé…ç½®ç®¡ç†æœºåˆ¶


**ðŸ”¸ é…ç½®æ–‡ä»¶å±‚çº§**

npmä½¿ç”¨å¤šå±‚çº§çš„é…ç½®ç³»ç»Ÿï¼š

```
é¡¹ç›®çº§é…ç½®ï¼š
./.npmrc               # é¡¹ç›®æ ¹ç›®å½•

ç”¨æˆ·çº§é…ç½®ï¼š
~/.npmrc               # ç”¨æˆ·ä¸»ç›®å½•

å…¨å±€é…ç½®ï¼š
/usr/local/etc/npmrc   # å…¨å±€é…ç½®ï¼ˆLinux/Macï¼‰
```

**ðŸ’¡ é…ç½®ä¼˜å…ˆçº§é¡ºåº**

npmæŒ‰ä»¥ä¸‹é¡ºåºè¯»å–é…ç½®ï¼š
1. å‘½ä»¤è¡Œå‚æ•°
2. çŽ¯å¢ƒå˜é‡
3. é¡¹ç›®çº§ .npmrc
4. ç”¨æˆ·çº§ ~/.npmrc
5. å…¨å±€é…ç½®æ–‡ä»¶
6. npmå†…ç½®é»˜è®¤å€¼

### 5.2 åŸºæœ¬ä»£ç†é…ç½®


**âš™ï¸ ä½¿ç”¨npmå‘½ä»¤é…ç½®**

```bash
# è®¾ç½®HTTPä»£ç†
npm config set proxy http://proxy.company.com:8080

# è®¾ç½®HTTPSä»£ç†
npm config set https-proxy http://proxy.company.com:8080

# æŸ¥çœ‹å½“å‰é…ç½®
npm config list

# æŸ¥çœ‹ä»£ç†é…ç½®
npm config get proxy
npm config get https-proxy
```

**ðŸ“ ç›´æŽ¥ç¼–è¾‘é…ç½®æ–‡ä»¶**

```bash
nano ~/.npmrc
```

**é…ç½®æ–‡ä»¶å†…å®¹ç¤ºä¾‹**

```ini
# ä»£ç†é…ç½®
proxy=http://proxy.company.com:8080
https-proxy=http://proxy.company.com:8080

# æ³¨å†Œæºé…ç½®
registry=https://registry.npmjs.org/

# SSLé…ç½®
strict-ssl=false
ca=null

# è¶…æ—¶è®¾ç½®
timeout=60000
```

### 5.3 npmé•œåƒæºé…ç½®


**ðŸŒ å›½å†…é•œåƒæºé…ç½®**

```bash
# ä½¿ç”¨æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

# æˆ–è€…ä½¿ç”¨cnpm
npm install -g cnpm --registry=https://registry.npmmirror.com

# ä½¿ç”¨nrmç®¡ç†å¤šä¸ªæº
npm install -g nrm
nrm ls                    # åˆ—å‡ºå¯ç”¨æº
nrm use taobao           # åˆ‡æ¢åˆ°æ·˜å®æº
nrm test                 # æµ‹è¯•æºé€Ÿåº¦
```

### 5.4 ä¼ä¸šçŽ¯å¢ƒnpmé…ç½®


**ðŸ¢ ä¼ä¸šç§æœ‰æºé…ç½®**

```bash
# é…ç½®ä¼ä¸šç§æœ‰npmæº
npm config set registry http://npm.company.com

# é…ç½®ä½œç”¨åŸŸåŒ…çš„æº
npm config set @company:registry http://npm.company.com

# é…ç½®è®¤è¯ä¿¡æ¯
npm config set //npm.company.com/:_authToken "your-auth-token"
```

**ðŸ” å¸¦è®¤è¯çš„ä»£ç†é…ç½®**

```ini
# ~/.npmrc
proxy=http://username:password@proxy.company.com:8080
https-proxy=http://username:password@proxy.company.com:8080

# ä¼ä¸šæºè®¤è¯
//npm.company.com/:_authToken=npm_token_here
//npm.company.com/:username=your_username
//npm.company.com/:email=your_email@company.com
```

### 5.5 é¡¹ç›®çº§ä»£ç†é…ç½®


**ðŸ“ é¡¹ç›®ç‰¹å®šé…ç½®**

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`.npmrc`æ–‡ä»¶ï¼š

```ini
# é¡¹ç›®çº§ä»£ç†é…ç½®
proxy=http://project-proxy:8080
https-proxy=http://project-proxy:8080

# é¡¹ç›®ä½¿ç”¨ç‰¹å®šæº
registry=https://registry.npmmirror.com

# ä½œç”¨åŸŸåŒ…é…ç½®
@babel:registry=https://registry.npmjs.org/
@types:registry=https://registry.npmjs.org/
```

**ðŸš€ ä¸´æ—¶ä»£ç†ä½¿ç”¨**

```bash
# ä¸´æ—¶è®¾ç½®çŽ¯å¢ƒå˜é‡
export https_proxy=http://proxy:8080
export http_proxy=http://proxy:8080

# å•æ¬¡å‘½ä»¤ä½¿ç”¨ä»£ç†
npm install --proxy http://proxy:8080 express

# ä¸´æ—¶ä½¿ç”¨ä¸åŒæº
npm install --registry https://registry.npmmirror.com express
```

---

## 6. ðŸ’Ž Ruby gemä»£ç†é…ç½®


### 6.1 gemé…ç½®æ–‡ä»¶ä½ç½®


**ðŸ”¸ é…ç½®æ–‡ä»¶è·¯å¾„**

gemçš„é…ç½®æ–‡ä»¶é€šå¸¸ä½äºŽï¼š

```
ç”¨æˆ·çº§é…ç½®ï¼š
~/.gemrc               # ä¸»é…ç½®æ–‡ä»¶

ç³»ç»Ÿçº§é…ç½®ï¼š
/etc/gemrc             # å…¨å±€é…ç½®æ–‡ä»¶

é¡¹ç›®çº§é…ç½®ï¼š
./.gemrc               # é¡¹ç›®ç›®å½•ä¸‹çš„é…ç½®
```

### 6.2 åŸºæœ¬gemä»£ç†é…ç½®


**âš™ï¸ åˆ›å»ºé…ç½®æ–‡ä»¶**

```bash
nano ~/.gemrc
```

**ðŸ“ åŸºç¡€é…ç½®å†…å®¹**

```yaml
# gemé…ç½®æ–‡ä»¶ä½¿ç”¨YAMLæ ¼å¼
:http_proxy: http://proxy.company.com:8080
:https_proxy: http://proxy.company.com:8080

# gemæºé…ç½®
:sources:
  - https://rubygems.org/
  - https://gems.ruby-china.com/

# å…¶ä»–é…ç½®
:ssl_verify_mode: 0
:ssl_ca_file: 
:backtrace: false
:bulk_threshold: 1000
:verbose: true
```

### 6.3 å‘½ä»¤è¡Œä»£ç†é…ç½®


**ðŸš€ ä¸´æ—¶ä»£ç†è®¾ç½®**

```bash
# ä½¿ç”¨çŽ¯å¢ƒå˜é‡
export http_proxy=http://proxy:8080
export https_proxy=http://proxy:8080

# gemå‘½ä»¤è¡Œä»£ç†å‚æ•°
gem install rails --http-proxy http://proxy:8080

# æŒ‡å®šgemæº
gem install rails --source https://gems.ruby-china.com/
```

**ðŸŒ åˆ‡æ¢gemæº**

```bash
# æŸ¥çœ‹å½“å‰æº
gem sources -l

# ç§»é™¤é»˜è®¤æº
gem sources --remove https://rubygems.org/

# æ·»åŠ å›½å†…æº
gem sources -a https://gems.ruby-china.com/

# æ¸…ç†æºç¼“å­˜
gem sources -c
```

### 6.4 Bundlerä»£ç†é…ç½®


**ðŸ“¦ Bundlerä¸“ç”¨é…ç½®**

```bash
# ä¸ºbundleré…ç½®ä»£ç†
bundle config --global http_proxy http://proxy:8080
bundle config --global https_proxy http://proxy:8080

# é…ç½®gemæº
bundle config --global mirror.https://rubygems.org https://gems.ruby-china.com

# æŸ¥çœ‹bundleré…ç½®
bundle config list
```

**ðŸ“ Gemfileæºé…ç½®**

```ruby
# Gemfile
source 'https://gems.ruby-china.com/'

gem 'rails', '~> 6.0'
gem 'sqlite3', '~> 1.4'
gem 'puma', '~> 4.1'

# æŒ‡å®šç‰¹å®šæºçš„gem
source 'https://rubygems.org/' do
  gem 'some_private_gem'
end
```

---

## 7. ðŸ¾ CondaåŒ…ç®¡ç†å™¨ä»£ç†


### 7.1 condaé…ç½®æ–‡ä»¶


**ðŸ”¸ é…ç½®æ–‡ä»¶ä½ç½®**

```
ç”¨æˆ·é…ç½®ï¼š
~/.condarc            # ä¸»é…ç½®æ–‡ä»¶

ç³»ç»Ÿé…ç½®ï¼š
/opt/conda/.condarc   # ç³»ç»Ÿçº§é…ç½®ï¼ˆcondaå®‰è£…ç›®å½•ï¼‰
```

### 7.2 condaä»£ç†é…ç½®


**âš™ï¸ ç¼–è¾‘é…ç½®æ–‡ä»¶**

```bash
nano ~/.condarc
```

**ðŸ“ åŸºç¡€ä»£ç†é…ç½®**

```yaml
# condaé…ç½®æ–‡ä»¶ä½¿ç”¨YAMLæ ¼å¼
proxy_servers:
  http: http://proxy.company.com:8080
  https: http://proxy.company.com:8080

# é¢‘é“é…ç½®ï¼ˆç›¸å½“äºŽè½¯ä»¶æºï¼‰
channels:
  - defaults
  - conda-forge
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/

# SSLé…ç½®
ssl_verify: false

# å…¶ä»–é…ç½®
show_channel_urls: true
always_yes: false
changeps1: false
```

### 7.3 å‘½ä»¤è¡Œé…ç½®æ–¹å¼


**ðŸš€ ä½¿ç”¨condaå‘½ä»¤é…ç½®**

```bash
# é…ç½®ä»£ç†
conda config --set proxy_servers.http http://proxy:8080
conda config --set proxy_servers.https http://proxy:8080

# æ·»åŠ å›½å†…é•œåƒæº
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/

# è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€
conda config --set show_channel_urls yes

# æŸ¥çœ‹é…ç½®
conda config --show
```

### 7.4 ä¸´æ—¶ä»£ç†ä½¿ç”¨


**ðŸŒŸ çŽ¯å¢ƒå˜é‡æ–¹å¼**

```bash
# è®¾ç½®ä»£ç†çŽ¯å¢ƒå˜é‡
export http_proxy=http://proxy:8080
export https_proxy=http://proxy:8080

# æ‰§è¡Œcondaå‘½ä»¤
conda install numpy

# ä¸´æ—¶ä½¿ç”¨ç‰¹å®šé€šé“
conda install -c conda-forge scikit-learn
```

---

## 8. ðŸ” ä»£ç†è®¤è¯ä¸Žå®‰å…¨é…ç½®


### 8.1 è®¤è¯æ–¹å¼æ¦‚è¿°


**ðŸ”¸ å¸¸è§è®¤è¯ç±»åž‹**

| è®¤è¯æ–¹å¼ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| **æ— è®¤è¯** | ä¸éœ€è¦ç”¨æˆ·åå¯†ç  | å†…ç½‘ä»£ç†ã€å¼€æ”¾ä»£ç† |
| **åŸºæœ¬è®¤è¯** | ç”¨æˆ·åå¯†ç æ˜Žæ–‡ä¼ è¾“ | ç®€å•çš„ä¼ä¸šçŽ¯å¢ƒ |
| **æ‘˜è¦è®¤è¯** | å¯†ç å“ˆå¸Œä¼ è¾“ | å®‰å…¨è¦æ±‚è¾ƒé«˜çš„çŽ¯å¢ƒ |
| **NTLMè®¤è¯** | WindowsåŸŸè®¤è¯ | Windowsä¼ä¸šçŽ¯å¢ƒ |

### 8.2 å®‰å…¨é…ç½®æœ€ä½³å®žè·µ


**ðŸ›¡ï¸ å¯†ç å®‰å…¨ç®¡ç†**

**é¿å…æ˜Žæ–‡å¯†ç ï¼š**
```bash
# ä¸æŽ¨èï¼šå¯†ç ç›´æŽ¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­
proxy=http://user:password123@proxy:8080

# æŽ¨èï¼šä½¿ç”¨çŽ¯å¢ƒå˜é‡
export PROXY_USER=username
export PROXY_PASS=password
proxy=http://$PROXY_USER:$PROXY_PASS@proxy:8080
```

**ðŸ”‘ ä½¿ç”¨è®¤è¯æ–‡ä»¶**

```bash
# åˆ›å»ºè®¤è¯æ–‡ä»¶
echo "username:password" > ~/.proxy_auth
chmod 600 ~/.proxy_auth

# åœ¨è„šæœ¬ä¸­è¯»å–è®¤è¯ä¿¡æ¯
PROXY_AUTH=$(cat ~/.proxy_auth)
export http_proxy=http://$PROXY_AUTH@proxy:8080
```

### 8.3 HTTPSä»£ç†é…ç½®


**ðŸ”’ SSLè¯ä¹¦å¤„ç†**

å¾ˆå¤šåŒ…ç®¡ç†å™¨åœ¨ä½¿ç”¨HTTPSä»£ç†æ—¶ä¼šé‡åˆ°è¯ä¹¦éªŒè¯é—®é¢˜ï¼š

```bash
# APTé…ç½®
Acquire::https::Verify-Peer "false";
Acquire::https::Verify-Host "false";

# pipé…ç½®
[global]
trusted-host = pypi.org
               files.pythonhosted.org
cert = /path/to/company-ca.crt

# npmé…ç½®
strict-ssl=false
ca=null

# æˆ–è€…æŒ‡å®šä¼ä¸šCAè¯ä¹¦
cafile=/path/to/company-ca.crt
```

### 8.4 ä»£ç†è‡ªåŠ¨é…ç½®


**ðŸŽ¯ PACæ–‡ä»¶æ”¯æŒ**

æŸäº›çŽ¯å¢ƒä½¿ç”¨PACï¼ˆProxy Auto-Configurationï¼‰æ–‡ä»¶ï¼š

```bash
# è®¾ç½®PACæ–‡ä»¶URL
export http_proxy=http://proxy-config.company.com/proxy.pac

# æˆ–è€…åœ¨åº”ç”¨é…ç½®ä¸­æŒ‡å®š
# æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰åŒ…ç®¡ç†å™¨éƒ½æ”¯æŒPACæ–‡ä»¶
```

---

## 9. ðŸ”§ ä»£ç†æ•…éšœè¯Šæ–­ä¸Žè§£å†³


### 9.1 å¸¸è§é—®é¢˜è¯Šæ–­


**ðŸ” è¿žæŽ¥æ€§æµ‹è¯•**

**åŸºç¡€è¿žé€šæ€§æ£€æŸ¥ï¼š**
```bash
# æµ‹è¯•ä»£ç†æœåŠ¡å™¨è¿žé€šæ€§
nc -zv proxy.company.com 8080
telnet proxy.company.com 8080

# æµ‹è¯•é€šè¿‡ä»£ç†è®¿é—®å¤–ç½‘
curl -x http://proxy:8080 http://www.baidu.com

# æµ‹è¯•HTTPSä»£ç†
curl -x http://proxy:8080 https://www.google.com
```

**ðŸ“Š è¯¦ç»†è¯Šæ–­ä¿¡æ¯**

```bash
# APTè¯¦ç»†è°ƒè¯•
sudo apt -o Debug::Acquire::http=true update

# pipè¯¦ç»†è¾“å‡º
pip install -v package_name

# npmè°ƒè¯•æ¨¡å¼
npm install --loglevel silly package_name

# curlè¯¦ç»†è°ƒè¯•
curl -x http://proxy:8080 -v http://example.com
```

### 9.2 å…¸åž‹é”™è¯¯æŽ’æŸ¥


**âŒ é”™è¯¯1ï¼šä»£ç†æœåŠ¡å™¨æ‹’ç»è¿žæŽ¥**

```
é”™è¯¯ä¿¡æ¯ï¼šConnection refused
å¯èƒ½åŽŸå› ï¼š
- ä»£ç†æœåŠ¡å™¨åœ°å€æˆ–ç«¯å£é”™è¯¯
- ä»£ç†æœåŠ¡å™¨æœªå¯åŠ¨
- é˜²ç«å¢™é˜»æ­¢è¿žæŽ¥

è§£å†³æ–¹æ³•ï¼š
1. éªŒè¯ä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£
2. è”ç³»ç½‘ç»œç®¡ç†å‘˜ç¡®è®¤ä»£ç†çŠ¶æ€
3. æ£€æŸ¥æœ¬åœ°é˜²ç«å¢™è®¾ç½®
```

**âŒ é”™è¯¯2ï¼šè®¤è¯å¤±è´¥**

```
é”™è¯¯ä¿¡æ¯ï¼š407 Proxy Authentication Required
å¯èƒ½åŽŸå› ï¼š
- ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
- è®¤è¯æ–¹å¼ä¸åŒ¹é…
- è´¦æˆ·è¢«é”å®š

è§£å†³æ–¹æ³•ï¼š
1. ç¡®è®¤ç”¨æˆ·åå¯†ç æ­£ç¡®
2. æ£€æŸ¥è®¤è¯æ–¹å¼é…ç½®
3. è”ç³»ç®¡ç†å‘˜é‡ç½®è´¦æˆ·
```

**âŒ é”™è¯¯3ï¼šSSLè¯ä¹¦éªŒè¯å¤±è´¥**

```
é”™è¯¯ä¿¡æ¯ï¼šSSL certificate verify failed
å¯èƒ½åŽŸå› ï¼š
- ä»£ç†æœåŠ¡å™¨è¯ä¹¦ä¸å—ä¿¡ä»»
- ä¼ä¸šå†…éƒ¨CAè¯ä¹¦æœªå®‰è£…
- SSLéªŒè¯é…ç½®è¿‡äºŽä¸¥æ ¼

è§£å†³æ–¹æ³•ï¼š
1. å®‰è£…ä¼ä¸šCAè¯ä¹¦
2. ä¸´æ—¶ç¦ç”¨SSLéªŒè¯ï¼ˆä¸æŽ¨èç”¨äºŽç”Ÿäº§çŽ¯å¢ƒï¼‰
3. é…ç½®ä¿¡ä»»çš„ä¸»æœºåˆ—è¡¨
```

### 9.3 è°ƒè¯•å·¥å…·å’ŒæŠ€å·§


**ðŸ› ï¸ ç½‘ç»œè°ƒè¯•å·¥å…·**

```bash
# æŠ“åŒ…åˆ†æž
sudo tcpdump -i any host proxy.company.com

# æŸ¥çœ‹ç½‘ç»œè¿žæŽ¥
netstat -an | grep 8080
ss -an | grep 8080

# æ£€æŸ¥DNSè§£æž
nslookup proxy.company.com
dig proxy.company.com
```

**ðŸ“ æ—¥å¿—åˆ†æž**

```bash
# ç³»ç»Ÿæ—¥å¿—
sudo tail -f /var/log/syslog | grep proxy

# APTæ—¥å¿—
sudo tail -f /var/log/apt/term.log

# pipæ—¥å¿—ä½ç½®ï¼ˆå¦‚æžœé…ç½®äº†ï¼‰
tail -f ~/.pip/pip.log
```

### 9.4 åº”æ€¥æ–¹æ¡ˆ


**ðŸš¨ ä»£ç†å¤±æ•ˆæ—¶çš„åº”å¯¹ç­–ç•¥**

**ä¸´æ—¶ç¦ç”¨ä»£ç†ï¼š**
```bash
# ä¸´æ—¶ç§»é™¤APTä»£ç†é…ç½®
sudo mv /etc/apt/apt.conf.d/00-proxy /etc/apt/apt.conf.d/00-proxy.bak

# ä¸´æ—¶å–æ¶ˆçŽ¯å¢ƒå˜é‡
unset http_proxy https_proxy

# ä½¿ç”¨ç›´è¿žæ–¹å¼
sudo apt -o Acquire::http::Proxy=false update
```

**å¤‡ç”¨ä»£ç†é…ç½®ï¼š**
```bash
# é…ç½®å¤šä¸ªå¤‡ç”¨ä»£ç†
primary_proxy=http://proxy1:8080
backup_proxy=http://proxy2:8080

# æµ‹è¯•å¹¶é€‰æ‹©å¯ç”¨ä»£ç†
if curl -x $primary_proxy -s http://www.baidu.com > /dev/null; then
    export http_proxy=$primary_proxy
elif curl -x $backup_proxy -s http://www.baidu.com > /dev/null; then
    export http_proxy=$backup_proxy
else
    echo "æ‰€æœ‰ä»£ç†éƒ½ä¸å¯ç”¨ï¼Œä½¿ç”¨ç›´è¿ž"
    unset http_proxy
fi
```

---

## 10. ðŸŒŸ å¤šçŽ¯å¢ƒä»£ç†ç®¡ç†ç­–ç•¥


### 10.1 çŽ¯å¢ƒåˆ†ç¦»ç­–ç•¥


**ðŸ¢ ä¼ä¸šå¤šçŽ¯å¢ƒç®¡ç†**

åœ¨å®žé™…å·¥ä½œä¸­ï¼Œç»å¸¸éœ€è¦åœ¨ä¸åŒçŽ¯å¢ƒé—´åˆ‡æ¢ï¼š

```
å¼€å‘çŽ¯å¢ƒï¼š
- å¯èƒ½ä¸éœ€è¦ä»£ç†æˆ–ä½¿ç”¨å¼€å‘ä¸“ç”¨ä»£ç†
- é…ç½®ç›¸å¯¹å®½æ¾

æµ‹è¯•çŽ¯å¢ƒï¼š
- ä½¿ç”¨æµ‹è¯•çŽ¯å¢ƒä¸“ç”¨ä»£ç†
- é…ç½®ä»‹äºŽå¼€å‘å’Œç”Ÿäº§ä¹‹é—´

ç”Ÿäº§çŽ¯å¢ƒï¼š
- ä¸¥æ ¼çš„ä»£ç†å’Œå®‰å…¨é…ç½®
- é™åˆ¶è®¿é—®çš„è½¯ä»¶æº
```

### 10.2 é…ç½®æ–‡ä»¶æ¨¡æ¿åŒ–


**ðŸ“ åˆ›å»ºé…ç½®æ¨¡æ¿**

```bash
# åˆ›å»ºé…ç½®æ¨¡æ¿ç›®å½•
mkdir -p ~/.config/proxy-templates

# å¼€å‘çŽ¯å¢ƒæ¨¡æ¿
cat > ~/.config/proxy-templates/dev.env << 'EOF'
# å¼€å‘çŽ¯å¢ƒä»£ç†é…ç½®
export http_proxy=http://dev-proxy:8080
export https_proxy=http://dev-proxy:8080
export no_proxy=localhost,127.0.0.1,.local
EOF

# ç”Ÿäº§çŽ¯å¢ƒæ¨¡æ¿
cat > ~/.config/proxy-templates/prod.env << 'EOF'
# ç”Ÿäº§çŽ¯å¢ƒä»£ç†é…ç½®
export http_proxy=http://prod-proxy:8080
export https_proxy=http://prod-proxy:8080
export no_proxy=localhost,127.0.0.1,.internal,.company.com
EOF
```

### 10.3 çŽ¯å¢ƒåˆ‡æ¢è„šæœ¬


**ðŸ”„ è‡ªåŠ¨åŒ–çŽ¯å¢ƒåˆ‡æ¢**

```bash
#!/bin/bash
# switch-proxy.sh - ä»£ç†çŽ¯å¢ƒåˆ‡æ¢è„šæœ¬

SCRIPT_DIR="$HOME/.config/proxy-templates"

switch_environment() {
    local env=$1
    local config_file="$SCRIPT_DIR/$env.env"
    
    if [ ! -f "$config_file" ]; then
        echo "é”™è¯¯ï¼šçŽ¯å¢ƒé…ç½®æ–‡ä»¶ $config_file ä¸å­˜åœ¨"
        return 1
    fi
    
    # æ¸…é™¤çŽ°æœ‰ä»£ç†é…ç½®
    unset http_proxy https_proxy no_proxy
    
    # åŠ è½½æ–°çŽ¯å¢ƒé…ç½®
    source "$config_file"
    
    # åº”ç”¨åˆ°å„ä¸ªåŒ…ç®¡ç†å™¨
    apply_apt_config "$env"
    apply_pip_config "$env"
    apply_npm_config "$env"
    
    echo "å·²åˆ‡æ¢åˆ° $env çŽ¯å¢ƒ"
    echo "HTTPä»£ç†: $http_proxy"
    echo "HTTPSä»£ç†: $https_proxy"
}

apply_apt_config() {
    local env=$1
    local apt_config="/etc/apt/apt.conf.d/00-proxy"
    
    if [ -w "/etc/apt/apt.conf.d/" ]; then
        case $env in
            "dev")
                echo 'Acquire::http::Proxy "http://dev-proxy:8080";' | sudo tee $apt_config
                ;;
            "prod")
                echo 'Acquire::http::Proxy "http://prod-proxy:8080";' | sudo tee $apt_config
                ;;
        esac
    fi
}

# ä½¿ç”¨æ–¹æ³•ï¼š
# source switch-proxy.sh
# switch_environment dev
# switch_environment prod
```

### 10.4 å›¢é˜Ÿåä½œé…ç½®


**ðŸ‘¥ å›¢é˜Ÿé…ç½®æ ‡å‡†åŒ–**

```bash
# åˆ›å»ºå›¢é˜Ÿé…ç½®ä»“åº“
git init team-proxy-configs
cd team-proxy-configs

# åˆ›å»ºä¸åŒçŽ¯å¢ƒçš„é…ç½®æ–‡ä»¶
mkdir -p {dev,test,prod}/{apt,pip,npm,gem}

# å¼€å‘çŽ¯å¢ƒAPTé…ç½®
cat > dev/apt/00-proxy << 'EOF'
Acquire::http::Proxy "http://dev-proxy.company.com:8080";
Acquire::https::Proxy "http://dev-proxy.company.com:8080";
EOF

# åˆ›å»ºéƒ¨ç½²è„šæœ¬
cat > deploy-config.sh << 'EOF'
#!/bin/bash
ENV=${1:-dev}
CONFIG_DIR="$(pwd)/$ENV"

# éƒ¨ç½²APTé…ç½®
if [ -f "$CONFIG_DIR/apt/00-proxy" ]; then
    sudo cp "$CONFIG_DIR/apt/00-proxy" /etc/apt/apt.conf.d/
fi

# éƒ¨ç½²pipé…ç½®
if [ -f "$CONFIG_DIR/pip/pip.conf" ]; then
    mkdir -p ~/.config/pip
    cp "$CONFIG_DIR/pip/pip.conf" ~/.config/pip/
fi

echo "å·²éƒ¨ç½² $ENV çŽ¯å¢ƒé…ç½®"
EOF

chmod +x deploy-config.sh
```

---

## 11. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŽŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ðŸ”¸ ä»£ç†ä½œç”¨ï¼šè§£å†³ç½‘ç»œè®¿é—®é™åˆ¶ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ï¼Œå®žçŽ°ç»Ÿä¸€ç®¡æŽ§
ðŸ”¸ é…ç½®å±‚çº§ï¼šç³»ç»Ÿçº§ã€ç”¨æˆ·çº§ã€é¡¹ç›®çº§çš„é…ç½®ä¼˜å…ˆçº§å…³ç³»
ðŸ”¸ è®¤è¯æ–¹å¼ï¼šæ— è®¤è¯ã€åŸºæœ¬è®¤è¯ã€æ‘˜è¦è®¤è¯ç­‰ä¸åŒå®‰å…¨çº§åˆ«
ðŸ”¸ æ•…éšœè¯Šæ–­ï¼šè¿žé€šæ€§æµ‹è¯•ã€æ—¥å¿—åˆ†æžã€é”™è¯¯æŽ’æŸ¥çš„åŸºæœ¬æ–¹æ³•
ðŸ”¸ çŽ¯å¢ƒç®¡ç†ï¼šå¤šçŽ¯å¢ƒé…ç½®åˆ‡æ¢å’Œå›¢é˜Ÿåä½œæ ‡å‡†åŒ–
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ é…ç½®æ–‡ä»¶ä½ç½®è®°å¿†æ³•**

```
APTé…ç½®ï¼š/etc/apt/apt.conf.d/ ç›®å½•ä¸‹
YUMé…ç½®ï¼š/etc/yum.conf ä¸»é…ç½®æ–‡ä»¶
pipé…ç½®ï¼š~/.config/pip/pip.conf ç”¨æˆ·é…ç½®
npmé…ç½®ï¼š~/.npmrc ç”¨æˆ·ä¸»ç›®å½•
gemé…ç½®ï¼š~/.gemrc YAMLæ ¼å¼
condaé…ç½®ï¼š~/.condarc YAMLæ ¼å¼
```

**ðŸ”¹ ä¸´æ—¶vsæ°¸ä¹…é…ç½®**

```
ä¸´æ—¶é…ç½®é€‚åˆï¼š
- æµ‹è¯•ä»£ç†è®¾ç½®
- ä¸€æ¬¡æ€§ä»»åŠ¡
- ç´§æ€¥çŽ¯å¢ƒåˆ‡æ¢

æ°¸ä¹…é…ç½®é€‚åˆï¼š
- ç¨³å®šçš„å·¥ä½œçŽ¯å¢ƒ
- å›¢é˜Ÿæ ‡å‡†åŒ–é…ç½®
- è‡ªåŠ¨åŒ–éƒ¨ç½²åœºæ™¯
```

### 11.3 å®žè·µåº”ç”¨å»ºè®®


**ðŸ’¡ é…ç½®ç®¡ç†æœ€ä½³å®žè·µ**

```
å®‰å…¨æ€§åŽŸåˆ™ï¼š
âœ… é¿å…åœ¨é…ç½®æ–‡ä»¶ä¸­å­˜å‚¨æ˜Žæ–‡å¯†ç 
âœ… ä½¿ç”¨çŽ¯å¢ƒå˜é‡æˆ–ä¸“é—¨çš„è®¤è¯æ–‡ä»¶
âœ… å®šæœŸæ›´æ–°ä»£ç†è®¤è¯ä¿¡æ¯
âœ… é™åˆ¶é…ç½®æ–‡ä»¶çš„è®¿é—®æƒé™

å¯ç»´æŠ¤æ€§åŽŸåˆ™ï¼š
âœ… ä¸ºä¸åŒçŽ¯å¢ƒåˆ›å»ºæ ‡å‡†åŒ–é…ç½®æ¨¡æ¿
âœ… ä½¿ç”¨ç‰ˆæœ¬æŽ§åˆ¶ç®¡ç†é…ç½®æ–‡ä»¶
âœ… ç¼–å†™è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œåˆ‡æ¢è„šæœ¬
âœ… æ–‡æ¡£åŒ–ç‰¹æ®Šé…ç½®çš„åŽŸå› å’Œç”¨é€”

æ•…éšœå¤„ç†åŽŸåˆ™ï¼š
âœ… å»ºç«‹ä»£ç†å¯ç”¨æ€§ç›‘æŽ§æœºåˆ¶
âœ… å‡†å¤‡å¤‡ç”¨ä»£ç†æœåŠ¡å™¨é…ç½®
âœ… æŽŒæ¡å¿«é€Ÿç¦ç”¨ä»£ç†çš„æ–¹æ³•
âœ… ä¿ç•™è¯¦ç»†çš„æ•…éšœæŽ’æŸ¥è®°å½•
```

### 11.4 å¿«é€Ÿè¯Šæ–­æ£€æŸ¥æ¸…å•


```
ä»£ç†é…ç½®é—®é¢˜æŽ’æŸ¥æ­¥éª¤ï¼š

1. åŸºç¡€æ£€æŸ¥ï¼š
   â–¡ ä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£æ˜¯å¦æ­£ç¡®
   â–¡ ç½‘ç»œè¿žé€šæ€§æ˜¯å¦æ­£å¸¸
   â–¡ è®¤è¯ä¿¡æ¯æ˜¯å¦æœ‰æ•ˆ

2. é…ç½®æ£€æŸ¥ï¼š
   â–¡ é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®
   â–¡ é…ç½®æ–‡ä»¶æƒé™æ˜¯å¦é€‚å½“
   â–¡ çŽ¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®

3. åŠŸèƒ½éªŒè¯ï¼š
   â–¡ ä½¿ç”¨curlæµ‹è¯•ä»£ç†è¿žé€šæ€§
   â–¡ æ£€æŸ¥åŒ…ç®¡ç†å™¨çš„è¯¦ç»†æ—¥å¿—
   â–¡ éªŒè¯SSLè¯ä¹¦é…ç½®

4. åº”æ€¥å¤„ç†ï¼š
   â–¡ ä¸´æ—¶ç¦ç”¨ä»£ç†æµ‹è¯•ç›´è¿ž
   â–¡ åˆ‡æ¢åˆ°å¤‡ç”¨ä»£ç†æœåŠ¡å™¨
   â–¡ ä½¿ç”¨æœ¬åœ°ç¼“å­˜æˆ–é•œåƒæº
```

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- ä¸åŒåŒ…ç®¡ç†å™¨æœ‰å„è‡ªçš„é…ç½®æ–‡ä»¶æ ¼å¼å’Œä½ç½®
- ä»£ç†é…ç½®è¦è€ƒè™‘å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§
- æ•…éšœè¯Šæ–­è¦ä»Žè¿žé€šæ€§åˆ°é…ç½®å†åˆ°åŠŸèƒ½é€æ­¥æŽ’æŸ¥
- å¤šçŽ¯å¢ƒç®¡ç†éœ€è¦æ ‡å‡†åŒ–å’Œè‡ªåŠ¨åŒ–å·¥å…·æ”¯æŒ