---
title: 5、开发工具代理配置集成
---
## 📚 目录


1. [代理配置基础概念](#1-代理配置基础概念)
2. [Git代理配置详解](#2-Git代理配置详解)
3. [IDE开发环境代理配置](#3-IDE开发环境代理配置)
4. [构建工具代理配置](#4-构建工具代理配置)
5. [浏览器代理自动化配置](#5-浏览器代理自动化配置)
6. [命令行工具代理适配](#6-命令行工具代理适配)
7. [代理环境一键切换](#7-代理环境一键切换)
8. [团队协作与版本控制](#8-团队协作与版本控制)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🌐 代理配置基础概念



### 1.1 什么是开发工具代理配置



**💡 核心理解**：
开发工具代理配置就是告诉你的开发软件"通过哪个中转站去访问网络"，就像寄快递时指定转运点一样。

```
常见场景解释：
┌─────────────┐    代理服务器    ┌─────────────┐
│ 开发工具    │ ────────────→ │ 目标服务器  │
│ (Git/IDE)   │               │ (GitHub等)   │
└─────────────┘               └─────────────┘

为什么需要代理：
✅ 突破网络限制：访问被限制的开发资源
✅ 提升访问速度：就近访问，减少延迟
✅ 统一网络管理：企业环境统一网络策略
✅ 安全访问控制：通过安全代理访问外网
```

### 1.2 代理协议类型详解



**🔸 HTTP代理**：
- **用途**：处理HTTP协议的网络请求
- **特点**：明文传输，速度快，适合一般网页访问
- **格式**：`http://代理服务器:端口`

**🔸 HTTPS代理**：
- **用途**：处理加密的HTTPS请求
- **特点**：加密传输，安全性高
- **格式**：`https://代理服务器:端口`

**🔸 SOCKS代理**：
- **用途**：更底层的代理协议，支持各种应用协议
- **特点**：通用性强，支持TCP/UDP
- **格式**：`socks5://代理服务器:端口`

### 1.3 代理配置的作用域



```
系统级代理：
┌─ 系统设置 ─────────────────┐
│ 影响所有应用程序的网络访问 │
│ 设置位置：系统网络设置     │
└────────────────────────────┘

应用级代理：
┌─ 单个应用 ─────────────────┐
│ 只影响特定应用的网络访问   │
│ 设置位置：应用内部配置     │
└────────────────────────────┘

项目级代理：
┌─ 特定项目 ─────────────────┐
│ 只影响某个项目的网络访问   │
│ 设置位置：项目配置文件     │
└────────────────────────────┘
```

---

## 2. 📦 Git代理配置详解



### 2.1 Git代理的工作原理



**🎯 核心概念**：
Git代理就是让Git工具通过指定的中转服务器去访问远程仓库，解决无法直接访问GitHub等平台的问题。

```
Git代理访问流程：
本地Git → 代理服务器 → GitHub/GitLab → 代码仓库
          ↑
    这里是关键配置点
```

### 2.2 全局代理配置



**🔧 HTTP/HTTPS代理设置**：

```bash
# 设置HTTP代理

git config --global http.proxy http://127.0.0.1:7890

# 设置HTTPS代理  

git config --global https.proxy https://127.0.0.1:7890

# 查看当前代理配置

git config --global --get http.proxy
git config --global --get https.proxy
```

**🔧 SOCKS代理设置**：

```bash
# 设置SOCKS5代理

git config --global http.proxy socks5://127.0.0.1:7890
git config --global https.proxy socks5://127.0.0.1:7890
```

### 2.3 特定域名代理配置



**💡 智能配置**：只对特定网站使用代理，其他网站直连

```bash
# 只对GitHub使用代理

git config --global http.https://github.com.proxy socks5://127.0.0.1:7890

# 只对GitLab使用代理

git config --global http.https://gitlab.com.proxy socks5://127.0.0.1:7890

# 查看特定域名代理配置

git config --global --get http.https://github.com.proxy
```

### 2.4 SSH协议代理配置



**🔐 SSH代理配置**：
Git使用SSH协议时需要通过SSH配置文件设置代理

创建或编辑SSH配置文件：

```bash
# 编辑SSH配置文件

vim ~/.ssh/config
```

**配置内容**：

```
# GitHub SSH代理配置

Host github.com
    HostName github.com
    User git
    Port 22
    ProxyCommand nc -X 5 -x 127.0.0.1:7890 %h %p

# GitLab SSH代理配置  

Host gitlab.com
    HostName gitlab.com
    User git
    Port 22
    ProxyCommand nc -X 5 -x 127.0.0.1:7890 %h %p
```

### 2.5 代理配置管理



**📋 常用管理命令**：

| 操作 | **命令** | **说明** |
|------|----------|----------|
| 查看所有配置 | `git config --global --list` | 显示所有全局配置 |
| 删除HTTP代理 | `git config --global --unset http.proxy` | 移除HTTP代理设置 |
| 删除HTTPS代理 | `git config --global --unset https.proxy` | 移除HTTPS代理设置 |
| 临时取消代理 | `git -c http.proxy= clone <url>` | 单次命令不使用代理 |

**⚡ 实用技巧**：

```bash
# 创建Git代理管理脚本

echo '#!/bin/bash
# Git代理快速切换脚本


case "$1" in
    "on")
        git config --global http.proxy socks5://127.0.0.1:7890
        git config --global https.proxy socks5://127.0.0.1:7890
        echo "Git代理已开启"
        ;;
    "off") 
        git config --global --unset http.proxy
        git config --global --unset https.proxy
        echo "Git代理已关闭"
        ;;
    "status")
        echo "HTTP代理: $(git config --global --get http.proxy)"
        echo "HTTPS代理: $(git config --global --get https.proxy)"
        ;;
    *)
        echo "用法: git-proxy {on|off|status}"
        ;;
esac' > ~/bin/git-proxy

chmod +x ~/bin/git-proxy
```

---

## 3. 💻 IDE开发环境代理配置



### 3.1 IntelliJ IDEA代理配置



**🎯 配置位置**：`File → Settings → Appearance & Behavior → System Settings → HTTP Proxy`

**📝 配置步骤**：

```
配置界面说明：
┌─ HTTP Proxy 设置 ─────────────────┐
│ ○ No proxy (直连)                │
│ ● Manual proxy configuration     │
│   HTTP Proxy:                    │
│   Host: 127.0.0.1  Port: 7890   │
│   ☑ Use for HTTPS               │
│   Proxy authentication:          │
│   Username: [用户名]             │
│   Password: [密码]               │
└───────────────────────────────────┘
```

**⚡ 高级配置**：

```
代理排除列表（Proxy exclusions）：
localhost,127.0.0.1,*.local,*.lan

作用：这些地址不通过代理访问
```

### 3.2 Eclipse代理配置



**🎯 配置路径**：`Window → Preferences → General → Network Connections`

**📋 配置选项**：

| 代理类型 | **设置方法** | **适用场景** |
|----------|--------------|--------------|
| **HTTP** | Host: 127.0.0.1, Port: 7890 | 插件下载、更新检查 |
| **HTTPS** | 同HTTP设置 | 安全连接访问 |
| **SOCKS** | 启用并配置 | 通用代理需求 |

### 3.3 Visual Studio Code代理配置



**🔧 方法一：设置界面配置**
1. 打开设置：`Ctrl+,`
2. 搜索"proxy"
3. 配置`Http: Proxy`选项

**🔧 方法二：配置文件设置**

编辑用户设置文件：

```json
{
    "http.proxy": "http://127.0.0.1:7890",
    "http.proxyStrictSSL": false,
    "http.proxyAuthorization": null
}
```

**💡 VSCode代理相关设置**：

| 设置项 | **作用** | **推荐值** |
|--------|----------|-----------|
| `http.proxy` | 代理服务器地址 | `http://127.0.0.1:7890` |
| `http.proxyStrictSSL` | 严格SSL验证 | `false`（开发环境） |
| `http.proxySupport` | 代理支持级别 | `on`（推荐） |

---

## 4. 🔨 构建工具代理配置



### 4.1 Maven代理配置详解



**📍 配置文件位置**：`~/.m2/settings.xml`

**🔧 基础代理配置**：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<settings>
    <proxies>
        <proxy>
            <id>my-proxy</id>
            <active>true</active>
            <protocol>http</protocol>
            <host>127.0.0.1</host>
            <port>7890</port>
            <!-- 可选：认证信息 -->
            <username>proxy-user</username>
            <password>proxy-pass</password>
            <!-- 不通过代理的主机列表 -->
            <nonProxyHosts>localhost|127.0.0.1|*.local</nonProxyHosts>
        </proxy>
    </proxies>
</settings>
```

**⚡ Maven代理最佳实践**：

```xml
<!-- 完整的Maven代理配置 -->
<settings>
    <proxies>
        <!-- HTTP代理 -->
        <proxy>
            <id>http-proxy</id>
            <active>true</active>
            <protocol>http</protocol>
            <host>127.0.0.1</host>
            <port>7890</port>
            <nonProxyHosts>localhost|127.0.0.1|*.company.com</nonProxyHosts>
        </proxy>
        
        <!-- HTTPS代理 -->
        <proxy>
            <id>https-proxy</id>
            <active>true</active>
            <protocol>https</protocol>
            <host>127.0.0.1</host>
            <port>7890</port>
            <nonProxyHosts>localhost|127.0.0.1|*.company.com</nonProxyHosts>
        </proxy>
    </proxies>
</settings>
```

### 4.2 Gradle代理配置



**📍 配置文件位置**：`~/.gradle/gradle.properties`

**🔧 全局代理配置**：

```properties
# HTTP代理配置

systemProp.http.proxyHost=127.0.0.1
systemProp.http.proxyPort=7890
systemProp.http.nonProxyHosts=localhost|127.0.0.1|*.local

# HTTPS代理配置

systemProp.https.proxyHost=127.0.0.1
systemProp.https.proxyPort=7890
systemProp.https.nonProxyHosts=localhost|127.0.0.1|*.local

# SOCKS代理配置（可选）

systemProp.socksProxyHost=127.0.0.1
systemProp.socksProxyPort=7890
```

**🎯 项目级代理配置**：
在项目根目录的`gradle.properties`文件中配置，只对当前项目生效。

### 4.3 npm代理配置



**🔧 npm代理设置**：

```bash
# 设置HTTP代理

npm config set proxy http://127.0.0.1:7890

# 设置HTTPS代理

npm config set https-proxy http://127.0.0.1:7890

# 查看当前配置

npm config get proxy
npm config get https-proxy

# 删除代理配置

npm config delete proxy
npm config delete https-proxy
```

**💡 yarn代理配置**：

```bash
# yarn代理设置

yarn config set proxy http://127.0.0.1:7890
yarn config set https-proxy http://127.0.0.1:7890

# 查看配置

yarn config get proxy
```

---

## 5. 🌐 浏览器代理自动化配置



### 5.1 浏览器代理配置原理



**💭 核心理解**：
浏览器代理配置就是告诉浏览器"遇到哪些网站要走代理，遇到哪些直连"，可以通过PAC文件实现自动化。

```
PAC文件工作流程：
用户访问网站 → 浏览器查询PAC文件 → 根据规则决定代理方式
                ↓
        返回：DIRECT（直连）或 PROXY（代理）
```

### 5.2 PAC文件基础语法



**📝 基本PAC文件结构**：

```javascript
function FindProxyForURL(url, host) {
    // 本地地址直连
    if (isPlainHostName(host) || 
        shExpMatch(host, "*.local") ||
        isInNet(host, "192.168.0.0", "255.255.0.0")) {
        return "DIRECT";
    }
    
    // GitHub相关走代理
    if (shExpMatch(host, "*.github.com") ||
        shExpMatch(host, "*.githubusercontent.com")) {
        return "PROXY 127.0.0.1:7890";
    }
    
    // 其他网站直连
    return "DIRECT";
}
```

### 5.3 智能PAC文件配置



**🎯 实用PAC配置示例**：

```javascript
function FindProxyForURL(url, host) {
    // 定义代理服务器
    var proxy = "PROXY 127.0.0.1:7890";
    var direct = "DIRECT";
    
    // 本地地址和内网地址直连
    if (isPlainHostName(host) ||
        shExpMatch(host, "*.local") ||
        isInNet(host, "127.0.0.0", "255.0.0.0") ||
        isInNet(host, "10.0.0.0", "255.0.0.0") ||
        isInNet(host, "172.16.0.0", "255.240.0.0") ||
        isInNet(host, "192.168.0.0", "255.255.0.0")) {
        return direct;
    }
    
    // 需要代理的开发相关网站
    var proxyList = [
        "github.com",
        "githubusercontent.com", 
        "stackoverflow.com",
        "google.com",
        "googleapis.com",
        "docker.io",
        "docker.com"
    ];
    
    for (var i = 0; i < proxyList.length; i++) {
        if (shExpMatch(host, "*." + proxyList[i]) || 
            host === proxyList[i]) {
            return proxy;
        }
    }
    
    // 默认直连
    return direct;
}
```

### 5.4 浏览器代理配置部署



**🔧 Chrome浏览器配置**：

```bash
# 使用命令行启动Chrome并指定PAC文件

google-chrome --proxy-pac-url=file:///path/to/proxy.pac

# 或使用HTTP地址

google-chrome --proxy-pac-url=http://proxy-server/proxy.pac
```

**🔧 Firefox浏览器配置**：
1. 进入`about:preferences#general`
2. 找到"网络设置"
3. 选择"自动代理配置URL"
4. 输入PAC文件地址

---

## 6. ⚡ 命令行工具代理适配



### 6.1 环境变量代理配置



**🌟 核心原理**：
大多数命令行工具都会读取特定的环境变量来获取代理配置，这是最通用的代理配置方法。

**🔧 基础环境变量设置**：

```bash
# 设置HTTP代理

export http_proxy=http://127.0.0.1:7890
export HTTP_PROXY=http://127.0.0.1:7890

# 设置HTTPS代理

export https_proxy=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890

# 设置FTP代理

export ftp_proxy=http://127.0.0.1:7890
export FTP_PROXY=http://127.0.0.1:7890

# 设置不需要代理的地址

export no_proxy=localhost,127.0.0.1,.local,.lan
export NO_PROXY=localhost,127.0.0.1,.local,.lan
```

### 6.2 特定工具代理配置



**🔧 curl代理配置**：

```bash
# 使用环境变量（推荐）

export http_proxy=http://127.0.0.1:7890
curl https://api.github.com

# 直接指定代理

curl --proxy http://127.0.0.1:7890 https://api.github.com

# SOCKS代理

curl --socks5 127.0.0.1:7890 https://api.github.com
```

**🔧 wget代理配置**：

```bash
# 使用环境变量

export http_proxy=http://127.0.0.1:7890
wget https://example.com/file.zip

# 配置文件方式

echo 'http_proxy = http://127.0.0.1:7890' >> ~/.wgetrc
echo 'https_proxy = http://127.0.0.1:7890' >> ~/.wgetrc
```

**🔧 docker代理配置**：

```bash
# 为Docker守护进程配置代理

sudo mkdir -p /etc/systemd/system/docker.service.d

# 创建代理配置文件

sudo tee /etc/systemd/system/docker.service.d/http-proxy.conf > /dev/null << 'EOF'
[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
Environment="NO_PROXY=localhost,127.0.0.1,.local"
EOF

# 重启Docker服务

sudo systemctl daemon-reload
sudo systemctl restart docker
```

### 6.3 Python工具代理配置



**🔧 pip代理配置**：

```bash
# 临时使用代理

pip install package-name --proxy http://127.0.0.1:7890

# 配置文件方式

mkdir -p ~/.pip
cat > ~/.pip/pip.conf << 'EOF'
[global]
proxy = http://127.0.0.1:7890
trusted-host = pypi.org
               pypi.python.org
               files.pythonhosted.org
EOF
```

**🔧 conda代理配置**：

```bash
# 设置conda代理

conda config --set proxy_servers.http http://127.0.0.1:7890
conda config --set proxy_servers.https http://127.0.0.1:7890

# 查看配置

conda config --show proxy_servers
```

---

## 7. 🚀 代理环境一键切换



### 7.1 代理切换脚本设计



**💡 设计思路**：
创建一个统一的脚本，能够一键开启或关闭所有开发工具的代理配置，适应不同的网络环境。

**🔧 综合代理管理脚本**：

```bash
#!/bin/bash

# 开发环境代理一键切换脚本


PROXY_HOST="127.0.0.1"
PROXY_PORT="7890"
PROXY_URL="http://${PROXY_HOST}:${PROXY_PORT}"
SOCKS_URL="socks5://${PROXY_HOST}:${PROXY_PORT}"

# 颜色定义

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

print_status() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# Git代理配置

config_git_proxy() {
    if [ "$1" == "on" ]; then
        git config --global http.proxy $SOCKS_URL
        git config --global https.proxy $SOCKS_URL
        print_status "Git代理已开启"
    else
        git config --global --unset http.proxy 2>/dev/null
        git config --global --unset https.proxy 2>/dev/null
        print_status "Git代理已关闭"
    fi
}

# 环境变量代理配置

config_env_proxy() {
    if [ "$1" == "on" ]; then
        export http_proxy=$PROXY_URL
        export https_proxy=$PROXY_URL
        export HTTP_PROXY=$PROXY_URL
        export HTTPS_PROXY=$PROXY_URL
        export no_proxy="localhost,127.0.0.1,.local"
        export NO_PROXY="localhost,127.0.0.1,.local"
        
#        # 写入当前shell配置
        echo "export http_proxy=$PROXY_URL" >> ~/.proxy_env
        echo "export https_proxy=$PROXY_URL" >> ~/.proxy_env
        echo "export HTTP_PROXY=$PROXY_URL" >> ~/.proxy_env
        echo "export HTTPS_PROXY=$PROXY_URL" >> ~/.proxy_env
        echo 'export no_proxy="localhost,127.0.0.1,.local"' >> ~/.proxy_env
        echo 'export NO_PROXY="localhost,127.0.0.1,.local"' >> ~/.proxy_env
        
        print_status "环境变量代理已开启"
    else
        unset http_proxy https_proxy HTTP_PROXY HTTPS_PROXY no_proxy NO_PROXY
        rm -f ~/.proxy_env
        print_status "环境变量代理已关闭"
    fi
}

# npm代理配置

config_npm_proxy() {
    if [ "$1" == "on" ]; then
        npm config set proxy $PROXY_URL
        npm config set https-proxy $PROXY_URL
        print_status "npm代理已开启"
    else
        npm config delete proxy 2>/dev/null
        npm config delete https-proxy 2>/dev/null
        print_status "npm代理已关闭"
    fi
}

# 显示当前代理状态

show_status() {
    echo "========== 当前代理状态 =========="
    echo -n "Git HTTP代理: "
    git config --global --get http.proxy || echo "未设置"
    
    echo -n "环境变量 http_proxy: "
    echo ${http_proxy:-"未设置"}
    
    echo -n "npm代理: "
    npm config get proxy 2>/dev/null || echo "未设置"
    
    echo "================================"
}

# 主函数

main() {
    case "$1" in
        "on"|"enable")
            print_status "正在开启所有代理配置..."
            config_git_proxy on
            config_env_proxy on
            config_npm_proxy on
            print_status "所有代理配置已开启"
            ;;
        "off"|"disable")
            print_status "正在关闭所有代理配置..."
            config_git_proxy off
            config_env_proxy off
            config_npm_proxy off
            print_status "所有代理配置已关闭"
            ;;
        "status"|"show")
            show_status
            ;;
        "git")
            config_git_proxy $2
            ;;
        "env")
            config_env_proxy $2
            ;;
        "npm")
            config_npm_proxy $2
            ;;
        *)
            echo "用法: $0 {on|off|status|git|env|npm} [on|off]"
            echo "  on/enable  - 开启所有代理"
            echo "  off/disable- 关闭所有代理"
            echo "  status/show- 显示代理状态"
            echo "  git [on|off] - 单独配置Git代理"
            echo "  env [on|off] - 单独配置环境变量代理"
            echo "  npm [on|off] - 单独配置npm代理"
            exit 1
            ;;
    esac
}

main "$@"
```

### 7.2 代理切换脚本部署



**🔧 脚本安装和使用**：

```bash
# 下载并安装脚本

curl -o ~/bin/proxy-switch https://your-server/proxy-switch.sh
chmod +x ~/bin/proxy-switch

# 添加到PATH（如果~/bin不在PATH中）

echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# 使用示例

proxy-switch on      # 开启所有代理
proxy-switch off     # 关闭所有代理
proxy-switch status  # 查看状态
proxy-switch git on  # 只开启Git代理
```

### 7.3 自动化代理切换



**💡 智能切换方案**：
根据网络环境自动判断是否需要开启代理

```bash
#!/bin/bash

# 智能代理切换脚本


# 检测网络环境函数

check_network() {
#    # 测试直连GitHub
    if curl -s --connect-timeout 5 https://github.com > /dev/null 2>&1; then
        return 0  # 可以直连
    else
        return 1  # 需要代理
    fi
}

# 智能切换函数

smart_switch() {
    print_status "正在检测网络环境..."
    
    if check_network; then
        print_status "网络环境良好，关闭代理"
        proxy-switch off
    else
        print_status "网络受限，开启代理"
        proxy-switch on
        
#        # 验证代理是否生效
        sleep 2
        if check_network; then
            print_status "代理配置成功"
        else
            print_error "代理配置失败，请检查代理服务器"
        fi
    fi
}
```

---

## 8. 🤝 团队协作与版本控制



### 8.1 代理配置版本控制策略



**💡 核心原则**：
团队开发中需要将代理配置纳入版本控制，确保所有开发者能够快速配置一致的开发环境。

**📁 项目代理配置文件结构**：

```
project-root/
├── .proxy/
│   ├── proxy-config.sh          # 代理配置脚本
│   ├── proxy-settings.json      # 代理配置参数
│   ├── pac/
│   │   └── dev-proxy.pac        # PAC文件
│   └── maven/
│       └── settings.xml         # Maven配置模板
├── .gitignore                   # 忽略敏感信息
└── README.md                    # 配置说明文档
```

### 8.2 团队代理配置模板



**🔧 代理配置参数文件**：

```json
{
  "proxy": {
    "http": {
      "host": "proxy.company.com",
      "port": 8080,
      "auth": {
        "required": true,
        "username_env": "PROXY_USERNAME",
        "password_env": "PROXY_PASSWORD"
      }
    },
    "socks": {
      "host": "socks.company.com", 
      "port": 1080
    },
    "exclude": [
      "localhost",
      "127.0.0.1",
      "*.company.com",
      "*.local"
    ]
  },
  "tools": {
    "git": {
      "protocol": "socks",
      "scope": "global"
    },
    "maven": {
      "protocol": "http",
      "auth_required": true
    },
    "npm": {
      "protocol": "http",
      "registry_proxy": true
    }
  }
}
```

**🔧 团队配置脚本**：

```bash
#!/bin/bash

# 团队代理配置脚本


SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &> /dev/null && pwd)"
CONFIG_FILE="$SCRIPT_DIR/proxy-settings.json"

# 读取配置文件

read_config() {
    if [ ! -f "$CONFIG_FILE" ]; then
        echo "配置文件不存在: $CONFIG_FILE"
        exit 1
    fi
    
#    # 解析JSON配置（需要jq工具）
    PROXY_HOST=$(jq -r '.proxy.http.host' "$CONFIG_FILE")
    PROXY_PORT=$(jq -r '.proxy.http.port' "$CONFIG_FILE")
    SOCKS_HOST=$(jq -r '.proxy.socks.host' "$CONFIG_FILE")
    SOCKS_PORT=$(jq -r '.proxy.socks.port' "$CONFIG_FILE")
}

# 应用团队配置

apply_team_config() {
    read_config
    
    echo "正在应用团队代理配置..."
    
#    # Git配置
    git config --global http.proxy "socks5://${SOCKS_HOST}:${SOCKS_PORT}"
    git config --global https.proxy "socks5://${SOCKS_HOST}:${SOCKS_PORT}"
    
#    # Maven配置
    MAVEN_SETTINGS="$HOME/.m2/settings.xml"
    if [ ! -f "$MAVEN_SETTINGS" ]; then
        mkdir -p "$HOME/.m2"
        cp "$SCRIPT_DIR/maven/settings.xml" "$MAVEN_SETTINGS"
        sed -i "s/PROXY_HOST/${PROXY_HOST}/g" "$MAVEN_SETTINGS"
        sed -i "s/PROXY_PORT/${PROXY_PORT}/g" "$MAVEN_SETTINGS"
    fi
    
#    # npm配置
    npm config set proxy "http://${PROXY_HOST}:${PROXY_PORT}"
    npm config set https-proxy "http://${PROXY_HOST}:${PROXY_PORT}"
    
    echo "团队代理配置已应用完成"
}

# 验证配置

verify_config() {
    echo "正在验证代理配置..."
    
#    # 测试Git
    if git ls-remote https://github.com/octocat/Hello-World.git HEAD > /dev/null 2>&1; then
        echo "✅ Git代理配置正常"
    else
        echo "❌ Git代理配置异常"
    fi
    
#    # 测试npm
    if npm ping > /dev/null 2>&1; then
        echo "✅ npm代理配置正常"  
    else
        echo "❌ npm代理配置异常"
    fi
}

case "$1" in
    "apply")
        apply_team_config
        ;;
    "verify")
        verify_config
        ;;
    *)
        echo "用法: $0 {apply|verify}"
        exit 1
        ;;
esac
```

### 8.3 敏感信息管理



**🔐 敏感信息处理**：

**`.gitignore`配置**：

```gitignore
# 代理配置中的敏感信息

.proxy/credentials
.proxy/.env
**/proxy-credentials.*

# 个人配置文件

.vscode/settings.json
.idea/workspace.xml
```

**🔧 环境变量管理**：

```bash
# 创建环境变量模板文件

cat > .proxy/.env.template << 'EOF'
# 代理认证信息（复制为.env文件并填写实际值）

PROXY_USERNAME=your_username
PROXY_PASSWORD=your_password
COMPANY_PROXY_HOST=proxy.company.com
COMPANY_PROXY_PORT=8080
EOF

# 在脚本中读取环境变量

if [ -f ".proxy/.env" ]; then
    source .proxy/.env
fi
```

### 8.4 新员工入职配置指南



**📋 快速配置文档**：

```markdown
# 开发环境代理配置指南


# 快速开始


1. 克隆项目后，进入项目目录
2. 复制代理配置模板：`cp .proxy/.env.template .proxy/.env`
3. 编辑`.proxy/.env`文件，填写代理认证信息
4. 运行配置脚本：`.proxy/proxy-config.sh apply`
5. 验证配置：`.proxy/proxy-config.sh verify`

# 常见问题


## Q: Git克隆失败


A: 检查是否已正确配置Git代理，运行 `git config --global --get http.proxy`

## Q: Maven依赖下载失败  


A: 确认~/.m2/settings.xml中的代理配置是否正确

## Q: npm安装包失败


A: 运行 `npm config get proxy` 检查npm代理配置
```

---

## 9. 📋 核心要点总结



### 9.1 必须掌握的核心概念



```
🔸 代理配置本质：让开发工具通过中转服务器访问网络资源
🔸 配置作用域：系统级、应用级、项目级的区别和选择
🔸 代理协议：HTTP、HTTPS、SOCKS的特点和适用场景
🔸 环境变量：http_proxy等环境变量的统一配置方法
🔸 团队协作：代理配置的版本控制和标准化管理
```

### 9.2 关键理解要点



**🔹 为什么需要代理配置**
```
网络访问限制：
• 企业环境网络策略限制
• 地理位置访问限制  
• 开发资源访问加速

开发效率提升：
• 统一的网络访问方式
• 团队协作配置一致性
• 自动化环境切换
```

**🔹 代理配置的最佳实践**
```
配置优先级理解：
命令行参数 > 应用配置 > 环境变量 > 系统配置

配置管理原则：
• 敏感信息不提交到版本控制
• 提供配置模板和快速部署脚本
• 区分开发、测试、生产环境配置
• 支持代理的快速开启和关闭
```

**🔹 常见问题和解决思路**
```
连接问题诊断：
1. 检查代理服务器是否可达
2. 验证代理协议和端口配置
3. 确认认证信息是否正确
4. 测试目标服务器连通性

配置冲突解决：
• 明确各工具的代理配置优先级
• 统一使用环境变量或专用配置
• 避免重复配置导致的冲突
```

### 9.3 实际应用指导



**💻 开发环境配置策略**
- **个人开发**：使用简单的环境变量配置，支持快速切换
- **团队协作**：建立标准化配置模板，版本控制管理
- **企业环境**：集成到开发工具链，自动化部署配置

**🔧 工具选择建议**
- **Git**：推荐SOCKS代理，兼容性好
- **Maven/Gradle**：使用HTTP代理，支持认证
- **npm/yarn**：环境变量配置，简单有效
- **IDE**：应用内配置，避免影响其他工具

**⚡ 性能优化建议**
- 使用本地代理服务器减少延迟
- 配置代理排除列表避免不必要的代理
- 定期测试和优化代理配置
- 监控代理使用情况和性能指标

**核心记忆**：
- 代理配置让开发工具走中转，突破网络限制提效率
- 环境变量是通用配置，各工具专用配置更精确
- 团队协作要标准化，敏感信息需保护好
- 快速切换很重要，自动化配置省时间