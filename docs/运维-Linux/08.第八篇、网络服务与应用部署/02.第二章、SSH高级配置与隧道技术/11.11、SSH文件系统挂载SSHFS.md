---
title: 11ã€SSHæ–‡ä»¶ç³»ç»ŸæŒ‚è½½SSHFS
---
## ğŸ“š ç›®å½•

1. [SSHFSåŸºç¡€æ¦‚å¿µ](#1-SSHFSåŸºç¡€æ¦‚å¿µ)
2. [SSHFSå®‰è£…é…ç½®](#2-SSHFSå®‰è£…é…ç½®)
3. [åŸºæœ¬ä½¿ç”¨æ–¹æ³•](#3-åŸºæœ¬ä½¿ç”¨æ–¹æ³•)
4. [æŒ‚è½½å‚æ•°è¯¦è§£](#4-æŒ‚è½½å‚æ•°è¯¦è§£)
5. [æƒé™æ˜ å°„æœºåˆ¶](#5-æƒé™æ˜ å°„æœºåˆ¶)
6. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#6-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
7. [ç½‘ç»œä¸­æ–­å¤„ç†](#7-ç½‘ç»œä¸­æ–­å¤„ç†)
8. [è‡ªåŠ¨æŒ‚è½½é…ç½®](#8-è‡ªåŠ¨æŒ‚è½½é…ç½®)
9. [SSHFS vs NFSå¯¹æ¯”](#9-SSHFS-vs-NFSå¯¹æ¯”)
10. [å®‰å…¨è€ƒè™‘äº‹é¡¹](#10-å®‰å…¨è€ƒè™‘äº‹é¡¹)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ SSHFSåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯SSHFS


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
SSHFSï¼ˆSSH Filesystemï¼‰æ˜¯ä¸€ä¸ªåŸºäºSSHåè®®çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå…è®¸æˆ‘ä»¬æŠŠè¿œç¨‹æœåŠ¡å™¨çš„ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°ï¼Œå°±åƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·æ“ä½œè¿œç¨‹æ–‡ä»¶ã€‚

**ğŸ’¡ é€šä¿—ç†è§£**
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€å°è¿œç¨‹æœåŠ¡å™¨å­˜æ”¾ç€é‡è¦æ–‡ä»¶ï¼Œé€šå¸¸ä½ éœ€è¦ç”¨`scp`æˆ–`rsync`æ¥ä¼ è¾“æ–‡ä»¶ã€‚è€ŒSSHFSå°±åƒåœ¨ä½ çš„ç”µè„‘ä¸Šå¼€äº†ä¸€æ‰‡"ä¼ é€é—¨"ï¼Œè®©è¿œç¨‹æ–‡ä»¶å¤¹ç›´æ¥å‡ºç°åœ¨ä½ çš„æœ¬åœ°ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥ç”¨ä»»ä½•æœ¬åœ°è½¯ä»¶ç›´æ¥ç¼–è¾‘è¿œç¨‹æ–‡ä»¶ã€‚

```
ä¼ ç»Ÿæ–¹å¼ï¼š
æœ¬åœ° --scp--> è¿œç¨‹æœåŠ¡å™¨ ï¼ˆéœ€è¦æ‰‹åŠ¨ä¼ è¾“ï¼‰

SSHFSæ–¹å¼ï¼š
æœ¬åœ°æŒ‚è½½ç‚¹ = è¿œç¨‹ç›®å½• ï¼ˆç›´æ¥è®¿é—®ï¼Œå°±åƒæœ¬åœ°æ–‡ä»¶ï¼‰
```

### 1.2 å·¥ä½œåŸç†


**ğŸ”§ åº•å±‚æœºåˆ¶**
```
åº”ç”¨ç¨‹åº â†’ FUSEæ¥å£ â†’ SSHFS â†’ SSHè¿æ¥ â†’ è¿œç¨‹æœåŠ¡å™¨

è¯¦ç»†æµç¨‹ï¼š
1. åº”ç”¨ç¨‹åºè¯·æ±‚è¯»å–æ–‡ä»¶
2. FUSEå°†è¯·æ±‚è½¬å‘ç»™SSHFS
3. SSHFSé€šè¿‡SSHåè®®å‘é€è¯·æ±‚åˆ°è¿œç¨‹æœåŠ¡å™¨
4. è¿œç¨‹æœåŠ¡å™¨æ‰§è¡Œæ–‡ä»¶æ“ä½œå¹¶è¿”å›ç»“æœ
5. SSHFSå°†ç»“æœè¿”å›ç»™åº”ç”¨ç¨‹åº
```

**ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿**
- **ğŸ”’ å®‰å…¨æ€§**ï¼šåŸºäºSSHåŠ å¯†ä¼ è¾“ï¼Œå®‰å…¨å¯é 
- **ğŸš€ ä¾¿åˆ©æ€§**ï¼šæ— éœ€é¢å¤–é…ç½®æœåŠ¡ç«¯ï¼Œåªè¦æœ‰SSHè®¿é—®æƒé™å³å¯
- **ğŸ’» é€æ˜æ€§**ï¼šå¯¹åº”ç”¨ç¨‹åºå®Œå…¨é€æ˜ï¼Œå°±åƒæ“ä½œæœ¬åœ°æ–‡ä»¶
- **ğŸ”§ ç®€å•æ€§**ï¼šå®‰è£…é…ç½®ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½

### 1.3 åº”ç”¨åœºæ™¯


**ğŸ“‹ å…¸å‹ç”¨é€”**
- **è¿œç¨‹å¼€å‘**ï¼šåœ¨æœ¬åœ°ç¼–è¾‘å™¨ä¸­ç›´æ¥ç¼–è¾‘æœåŠ¡å™¨ä»£ç 
- **æ–‡ä»¶ç®¡ç†**ï¼šç”¨å›¾å½¢ç•Œé¢ç®¡ç†è¿œç¨‹æœåŠ¡å™¨æ–‡ä»¶
- **æ•°æ®å¤‡ä»½**ï¼šå°†è¿œç¨‹ç›®å½•æŒ‚è½½åè¿›è¡Œæœ¬åœ°å¤‡ä»½
- **æ—¥å¿—åˆ†æ**ï¼šå®æ—¶æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶
- **åª’ä½“æµ**ï¼šç›´æ¥æ’­æ”¾è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„éŸ³è§†é¢‘æ–‡ä»¶

---

## 2. ğŸ› ï¸ SSHFSå®‰è£…é…ç½®


### 2.1 ç³»ç»Ÿè¦æ±‚æ£€æŸ¥


**ğŸ“‹ å‰ç½®æ¡ä»¶**
```bash
# æ£€æŸ¥æ˜¯å¦æ”¯æŒFUSE
ls /dev/fuse
# å¦‚æœå­˜åœ¨åˆ™è¡¨ç¤ºç³»ç»Ÿæ”¯æŒFUSE

# æ£€æŸ¥å†…æ ¸æ¨¡å—
lsmod | grep fuse
# å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œéœ€è¦åŠ è½½æ¨¡å—
sudo modprobe fuse
```

**âš ï¸ æƒé™è¦æ±‚**
ç”¨æˆ·éœ€è¦å±äº`fuse`ç”¨æˆ·ç»„æ‰èƒ½ä½¿ç”¨SSHFSï¼š
```bash
# æŸ¥çœ‹å½“å‰ç”¨æˆ·ç»„
groups

# æ·»åŠ ç”¨æˆ·åˆ°fuseç»„ï¼ˆéœ€è¦é‡æ–°ç™»å½•ç”Ÿæ•ˆï¼‰
sudo usermod -a -G fuse $USER
```

### 2.2 å®‰è£…æ–¹æ³•


**ğŸ§ Ubuntu/Debianç³»ç»Ÿ**
```bash
# æ›´æ–°åŒ…åˆ—è¡¨
sudo apt update

# å®‰è£…SSHFS
sudo apt install sshfs

# éªŒè¯å®‰è£…
sshfs --version
```

**ğŸ© CentOS/RHELç³»ç»Ÿ**
```bash
# RHEL 8/CentOS 8
sudo dnf install sshfs

# è¾ƒè€ç‰ˆæœ¬ç³»ç»Ÿ
sudo yum install epel-release
sudo yum install sshfs
```

**ğŸ macOSç³»ç»Ÿ**
```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install sshfs

# å¯èƒ½éœ€è¦å®‰è£…macFUSE
brew install --cask macfuse
```

### 2.3 å®‰è£…éªŒè¯


**âœ… éªŒè¯SSHFSåŠŸèƒ½**
```bash
# æ£€æŸ¥ç‰ˆæœ¬ä¿¡æ¯
sshfs --version

# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
sshfs --help

# æ£€æŸ¥FUSEæ˜¯å¦å¯ç”¨
fusermount --version
```

---

## 3. ğŸš€ åŸºæœ¬ä½¿ç”¨æ–¹æ³•


### 3.1 åŸºç¡€æŒ‚è½½æ“ä½œ


**ğŸ“ åˆ›å»ºæŒ‚è½½ç‚¹**
```bash
# åˆ›å»ºæœ¬åœ°æŒ‚è½½ç›®å½•
mkdir ~/remote_server

# ç¡®ä¿ç›®å½•ä¸ºç©º
ls ~/remote_server
```

**ğŸ”— åŸºæœ¬æŒ‚è½½å‘½ä»¤**
```bash
# æœ€ç®€å•çš„æŒ‚è½½æ–¹å¼
sshfs username@hostname:/remote/path /local/mountpoint

# å®é™…ä¾‹å­
sshfs john@192.168.1.100:/home/john/documents ~/remote_server
```

**ğŸ’¡ äº¤äº’å¼æŒ‚è½½**
å½“ä½ æ‰§è¡ŒæŒ‚è½½å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥SSHå¯†ç ï¼š
```bash
$ sshfs john@server.com:/home/john ~/remote_server
john@server.com's password: [è¾“å…¥å¯†ç ]
```

### 3.2 æŒ‚è½½éªŒè¯


**ğŸ” æ£€æŸ¥æŒ‚è½½çŠ¶æ€**
```bash
# æŸ¥çœ‹å·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ
mount | grep sshfs

# æˆ–ä½¿ç”¨dfå‘½ä»¤
df -h | grep sshfs

# æŸ¥çœ‹æŒ‚è½½ç‚¹å†…å®¹
ls -la ~/remote_server
```

**ğŸ“Š æŒ‚è½½ä¿¡æ¯ç¤ºä¾‹**
```
john@server.com:/home/john on /home/user/remote_server type fuse.sshfs
(rw,nosuid,nodev,relatime,user_id=1000,group_id=1000)
```

### 3.3 å¸è½½æ“ä½œ


**ğŸ”“ å®‰å…¨å¸è½½**
```bash
# æ ‡å‡†å¸è½½æ–¹å¼
fusermount -u ~/remote_server

# æˆ–è€…ä½¿ç”¨umountï¼ˆéœ€è¦sudoï¼‰
sudo umount ~/remote_server

# å¼ºåˆ¶å¸è½½ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
fusermount -uz ~/remote_server
```

**âš ï¸ å¸è½½æ³¨æ„äº‹é¡¹**
- ç¡®ä¿æ²¡æœ‰ç¨‹åºæ­£åœ¨è®¿é—®æŒ‚è½½ç‚¹
- å…³é—­æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶
- å¦‚æœå¸è½½å¤±è´¥ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¿›ç¨‹å ç”¨

---

## 4. âš™ï¸ æŒ‚è½½å‚æ•°è¯¦è§£


### 4.1 å¸¸ç”¨æŒ‚è½½é€‰é¡¹


**ğŸ”§ åŸºç¡€å‚æ•°é…ç½®**
```bash
sshfs user@host:/path /mount/point [options]

# å¸¸ç”¨é€‰é¡¹ç»„åˆ
sshfs user@host:/path /mount/point \
  -o reconnect,ServerAliveInterval=15,ServerAliveCountMax=3
```

### 4.2 é‡è¦å‚æ•°è¯´æ˜


| å‚æ•° | **ä½œç”¨è¯´æ˜** | **æ¨èä½¿ç”¨** |
|------|-------------|-------------|
| `reconnect` | `ç½‘ç»œæ–­å¼€æ—¶è‡ªåŠ¨é‡è¿` | `ğŸŸ¢ å¼ºçƒˆæ¨è` |
| `ServerAliveInterval=15` | `æ¯15ç§’å‘é€å¿ƒè·³åŒ…` | `ğŸŸ¢ ç½‘ç»œä¸ç¨³å®šæ—¶` |
| `ServerAliveCountMax=3` | `æœ€å¤š3æ¬¡å¿ƒè·³å¤±è´¥åæ–­å¼€` | `ğŸŸ¢ é…åˆä¸Šé¢ä½¿ç”¨` |
| `compression=yes` | `å¯ç”¨å‹ç¼©ä¼ è¾“` | `ğŸŸ¡ æ…¢ç½‘ç»œæ—¶` |
| `cache=yes` | `å¯ç”¨æœ¬åœ°ç¼“å­˜` | `ğŸŸ¢ æå‡æ€§èƒ½` |
| `kernel_cache` | `ä½¿ç”¨å†…æ ¸ç¼“å­˜` | `ğŸŸ¡ å¤§æ–‡ä»¶æ“ä½œ` |
| `follow_symlinks` | `è·Ÿéšç¬¦å·é“¾æ¥` | `ğŸŸ¡ æŒ‰éœ€ä½¿ç”¨` |

### 4.3 æ€§èƒ½ä¼˜åŒ–å‚æ•°


**âš¡ ç¼“å­˜ç›¸å…³å‚æ•°**
```bash
# å¯ç”¨å¤šçº§ç¼“å­˜
sshfs user@host:/path /mount/point \
  -o cache=yes,kernel_cache,attr_timeout=3600,entry_timeout=3600

# å‚æ•°è§£é‡Šï¼š
# cache=yes        - å¯ç”¨SSHFSç¼“å­˜
# kernel_cache     - å¯ç”¨å†…æ ¸çº§ç¼“å­˜
# attr_timeout     - æ–‡ä»¶å±æ€§ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
# entry_timeout    - ç›®å½•é¡¹ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
```

**ğŸŒ ç½‘ç»œä¼˜åŒ–å‚æ•°**
```bash
# ç½‘ç»œä¼˜åŒ–é…ç½®
sshfs user@host:/path /mount/point \
  -o compression=yes,Ciphers=aes128-ctr,big_writes

# å‚æ•°è§£é‡Šï¼š
# compression=yes  - å¯ç”¨æ•°æ®å‹ç¼©
# Ciphers         - æŒ‡å®šåŠ å¯†ç®—æ³•ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
# big_writes      - å…è®¸å¤§å—å†™å…¥
```

### 4.4 å®ç”¨å‚æ•°ç»„åˆ


**ğŸ  å®¶åº­ç½‘ç»œç¯å¢ƒ**
```bash
# ç¨³å®šç½‘ç»œï¼Œæ³¨é‡æ€§èƒ½
sshfs user@host:/path /mount/point \
  -o cache=yes,kernel_cache,compression=no,big_writes
```

**â˜ï¸ å…¬ç½‘ç¯å¢ƒ**
```bash
# ä¸ç¨³å®šç½‘ç»œï¼Œæ³¨é‡ç¨³å®šæ€§
sshfs user@host:/path /mount/point \
  -o reconnect,ServerAliveInterval=15,ServerAliveCountMax=3,compression=yes
```

**ğŸ’¼ ç”Ÿäº§ç¯å¢ƒ**
```bash
# å¹³è¡¡æ€§èƒ½ä¸ç¨³å®šæ€§
sshfs user@host:/path /mount/point \
  -o reconnect,cache=yes,ServerAliveInterval=30,compression=yes,big_writes
```

---

## 5. ğŸ” æƒé™æ˜ å°„æœºåˆ¶


### 5.1 ç”¨æˆ·æƒé™æ˜ å°„


**ğŸ‘¤ é»˜è®¤æƒé™è¡Œä¸º**
SSHFSé»˜è®¤ä¼šå°†è¿œç¨‹æ–‡ä»¶çš„æ‰€æœ‰è€…æ˜ å°„ä¸ºæœ¬åœ°æŒ‚è½½ç”¨æˆ·ï¼š

```
è¿œç¨‹æ–‡ä»¶æ‰€æœ‰è€…: root (uid=0)
æœ¬åœ°æ˜¾ç¤ºæ‰€æœ‰è€…: john (uid=1000) â† æŒ‚è½½ç”¨æˆ·

è¿™æ„å‘³ç€ï¼šä½ å¯ä»¥è¯»å†™æ‰€æœ‰æœ‰SSHæƒé™è®¿é—®çš„æ–‡ä»¶
```

**ğŸ”§ UID/GIDæ˜ å°„é€‰é¡¹**
```bash
# ä¿æŒåŸå§‹UID/GIDï¼ˆéœ€è¦rootæƒé™ï¼‰
sshfs user@host:/path /mount/point -o uid=0,gid=0

# æ˜ å°„åˆ°ç‰¹å®šç”¨æˆ·
sshfs user@host:/path /mount/point -o uid=1001,gid=1001

# ä½¿ç”¨IDæ˜ å°„æ–‡ä»¶
sshfs user@host:/path /mount/point -o idmap=user
```

### 5.2 æƒé™æ˜ å°„ç­–ç•¥


**ğŸ“‹ æ˜ å°„é€‰é¡¹å¯¹æ¯”**

| æ˜ å°„æ–¹å¼ | **ä½¿ç”¨åœºæ™¯** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|---------|-------------|---------|---------|
| `é»˜è®¤æ˜ å°„` | `ä¸ªäººä½¿ç”¨` | `ç®€å•æ–¹ä¾¿ï¼Œæƒé™ç»Ÿä¸€` | `ä¸¢å¤±åŸå§‹æƒé™ä¿¡æ¯` |
| `idmap=user` | `å¤šç”¨æˆ·ç¯å¢ƒ` | `ä¿æŒç”¨æˆ·æ˜ å°„å…³ç³»` | `éœ€è¦ç”¨æˆ·ååŒ¹é…` |
| `idmap=file` | `å¤æ‚ç¯å¢ƒ` | `çµæ´»çš„æ˜ å°„è§„åˆ™` | `é…ç½®å¤æ‚` |
| `ä¿æŒåŸå§‹` | `ç³»ç»Ÿç®¡ç†` | `å®Œå…¨ä¿æŒåŸå§‹æƒé™` | `éœ€è¦rootæƒé™` |

**ğŸ’¡ å®é™…ä½¿ç”¨å»ºè®®**
å¯¹äºå¤§å¤šæ•°ä¸ªäººä½¿ç”¨åœºæ™¯ï¼Œé»˜è®¤æ˜ å°„å°±è¶³å¤Ÿäº†ã€‚åªæœ‰åœ¨å¤šç”¨æˆ·å…±äº«æˆ–ç³»ç»Ÿç®¡ç†åœºæ™¯ä¸‹æ‰éœ€è¦è€ƒè™‘å¤æ‚çš„æƒé™æ˜ å°„ã€‚

### 5.3 æ–‡ä»¶æƒé™å¤„ç†


**ğŸ“„ æƒé™æ˜¾ç¤ºç¤ºä¾‹**
```bash
# è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æƒé™
-rw-r--r-- 1 root root 1024 Jan 15 10:30 config.txt

# SSHFSæŒ‚è½½åçš„æ˜¾ç¤º
-rw-r--r-- 1 john john 1024 Jan 15 10:30 config.txt
```

**ğŸ”’ æƒé™æ“ä½œé™åˆ¶**
```bash
# è¿™äº›æ“ä½œå¯èƒ½å—é™ï¼š
chmod 755 mounted_file    # å–å†³äºè¿œç¨‹æœåŠ¡å™¨æƒé™
chown user:group file     # é€šå¸¸æ— æ•ˆï¼ˆæƒé™æ˜ å°„ï¼‰
```

---

## 6. ğŸš€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 6.1 ç¼“å­˜ç­–ç•¥é…ç½®


**ğŸ’¾ å¤šå±‚ç¼“å­˜æ¶æ„**
```
åº”ç”¨ç¨‹åº
    â†“
å†…æ ¸ç¼“å­˜ (kernel_cache)
    â†“
SSHFSç¼“å­˜ (cache=yes)
    â†“
ç½‘ç»œä¼ è¾“
```

**ğŸ”§ ç¼“å­˜å‚æ•°è°ƒä¼˜**
```bash
# é«˜æ€§èƒ½ç¼“å­˜é…ç½®
sshfs user@host:/path /mount/point \
  -o cache=yes \
  -o kernel_cache \
  -o attr_timeout=7200 \
  -o entry_timeout=7200 \
  -o negative_timeout=120
```

**ğŸ“Š ç¼“å­˜å‚æ•°è¯´æ˜**
- **attr_timeout**: æ–‡ä»¶å±æ€§ç¼“å­˜æ—¶é—´ï¼Œå‡å°‘statè°ƒç”¨
- **entry_timeout**: ç›®å½•é¡¹ç¼“å­˜æ—¶é—´ï¼Œå‡å°‘ç›®å½•æŸ¥è¯¢
- **negative_timeout**: è´Ÿç¼“å­˜æ—¶é—´ï¼Œç¼“å­˜"æ–‡ä»¶ä¸å­˜åœ¨"çš„ç»“æœ

### 6.2 ç½‘ç»œä¼ è¾“ä¼˜åŒ–


**âš¡ ä¼ è¾“å‚æ•°è°ƒä¼˜**
```bash
# ä¼˜åŒ–ç½‘ç»œä¼ è¾“
sshfs user@host:/path /mount/point \
  -o Ciphers=aes128-ctr \
  -o big_writes \
  -o max_write=131072 \
  -o max_read=131072
```

**ğŸŒ ç½‘ç»œç¯å¢ƒé€‚é…**

```
å¿«é€Ÿå±€åŸŸç½‘ (1Gbps+):
- compression=no     (CPUå¼€é”€å¤§äºç½‘ç»œèŠ‚çœ)
- big_writes=yes     (å¤§å—ä¼ è¾“)
- é«˜ç¼“å­˜è¶…æ—¶æ—¶é—´

æ…¢é€Ÿç½‘ç»œ (ADSL/4G):
- compression=yes    (èŠ‚çœå¸¦å®½)
- è¾ƒå°çš„è¯»å†™å—å¤§å°
- é•¿è¿æ¥ä¿æŒå‚æ•°
```

### 6.3 æ€§èƒ½æµ‹è¯•ä¸ç›‘æ§


**ğŸ“ˆ æ€§èƒ½æµ‹è¯•æ–¹æ³•**
```bash
# æµ‹è¯•è¯»å–æ€§èƒ½
time cp /remote/mount/large_file /tmp/test_file

# æµ‹è¯•å†™å…¥æ€§èƒ½  
time cp /tmp/test_file /remote/mount/

# æµ‹è¯•å°æ–‡ä»¶æ“ä½œ
time find /remote/mount -name "*.txt" | wc -l
```

**ğŸ” æ€§èƒ½ç›‘æ§æŒ‡æ ‡**
- **ç½‘ç»œå»¶è¿Ÿ**: `ping` æµ‹è¯•åˆ°è¿œç¨‹æœåŠ¡å™¨çš„å»¶è¿Ÿ
- **å¸¦å®½åˆ©ç”¨ç‡**: `iftop` æˆ– `nethogs` ç›‘æ§ç½‘ç»œä½¿ç”¨
- **ç¼“å­˜å‘½ä¸­ç‡**: é€šè¿‡ `/proc/fs/fuse/connections/` æŸ¥çœ‹ç»Ÿè®¡

---

## 7. ğŸ”„ ç½‘ç»œä¸­æ–­å¤„ç†


### 7.1 è‡ªåŠ¨é‡è¿æœºåˆ¶


**ğŸ”— é‡è¿å‚æ•°é…ç½®**
```bash
# å®Œæ•´çš„é‡è¿é…ç½®
sshfs user@host:/path /mount/point \
  -o reconnect \
  -o ServerAliveInterval=15 \
  -o ServerAliveCountMax=3 \
  -o ConnectTimeout=10
```

**â±ï¸ å‚æ•°æ—¶é—´è§£é‡Š**
```
ServerAliveInterval=15    æ¯15ç§’å‘é€ä¸€æ¬¡å¿ƒè·³
ServerAliveCountMax=3     æœ€å¤šå…è®¸3æ¬¡å¿ƒè·³å¤±è´¥
æ€»çš„æ£€æµ‹æ—¶é—´ = 15 Ã— 3 = 45ç§’ååˆ¤æ–­è¿æ¥æ–­å¼€

ConnectTimeout=10         è¿æ¥è¶…æ—¶æ—¶é—´10ç§’
```

### 7.2 ç½‘ç»œä¸­æ–­åœºæ™¯å¤„ç†


**ğŸ“± å¸¸è§ä¸­æ–­åœºæ™¯**
```
WiFiåˆ‡æ¢:     ç¬”è®°æœ¬ç”µè„‘åœ¨ä¸åŒç½‘ç»œé—´åˆ‡æ¢
VPNæ–­å¼€:      VPNè¿æ¥ä¸ç¨³å®šå¯¼è‡´çš„ä¸­æ–­
ç½‘ç»œæ‹¥å¡:     ç½‘ç»œç¹å¿™å¯¼è‡´çš„è¶…æ—¶
æœåŠ¡å™¨é‡å¯:   è¿œç¨‹æœåŠ¡å™¨ç»´æŠ¤é‡å¯
```

**ğŸ› ï¸ ä¸­æ–­æ¢å¤ç­–ç•¥**
```bash
# æ–¹æ¡ˆ1: è‡ªåŠ¨é‡è¿ (æ¨è)
sshfs user@host:/path /mount/point -o reconnect

# æ–¹æ¡ˆ2: è„šæœ¬ç›‘æ§é‡æŒ‚è½½
#!/bin/bash
while true; do
    if ! mountpoint -q /mount/point; then
        sshfs user@host:/path /mount/point -o reconnect
    fi
    sleep 30
done
```

### 7.3 ä¸­æ–­æœŸé—´çš„æ•°æ®ä¿æŠ¤


**ğŸ’¾ æ•°æ®ä¸€è‡´æ€§å¤„ç†**
å½“ç½‘ç»œä¸­æ–­æ—¶ï¼ŒSSHFSçš„è¡Œä¸ºï¼š
- **è¯»æ“ä½œ**: è¿”å›I/Oé”™è¯¯ç»™åº”ç”¨ç¨‹åº
- **å†™æ“ä½œ**: ç¼“å­˜åœ¨æœ¬åœ°ï¼Œé‡è¿ååŒæ­¥
- **ç¼“å­˜æ•°æ®**: ä¿æŒæœ‰æ•ˆï¼Œé¿å…æ•°æ®ä¸¢å¤±

**âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹**
```
ğŸš¨ é‡è¦æ–‡ä»¶æ“ä½œæ—¶ï¼š
1. é¿å…åœ¨ç½‘ç»œä¸ç¨³å®šæ—¶è¿›è¡Œé‡è¦æ–‡ä»¶ä¿®æ”¹
2. ä½¿ç”¨ rsync ç­‰å·¥å…·åšå®šæœŸå¤‡ä»½
3. å¯¹å…³é”®æ“ä½œä½¿ç”¨äº‹åŠ¡æ€§æ–‡ä»¶æ“ä½œ
```

---

## 8. ğŸ”„ è‡ªåŠ¨æŒ‚è½½é…ç½®


### 8.1 fstabé…ç½®æ–¹æ³•


**ğŸ“ ç¼–è¾‘fstabæ–‡ä»¶**
```bash
# ç¼–è¾‘ç³»ç»ŸæŒ‚è½½é…ç½®
sudo nano /etc/fstab

# æ·»åŠ SSHFSæŒ‚è½½é¡¹
user@host:/remote/path /local/mount fuse.sshfs defaults,_netdev,users,idmap=user,IdentityFile=/home/user/.ssh/id_rsa,allow_other,reconnect 0 0
```

**ğŸ”§ fstabå‚æ•°è§£é‡Š**
- **_netdev**: ç­‰å¾…ç½‘ç»œå¯ç”¨åå†æŒ‚è½½
- **users**: å…è®¸æ™®é€šç”¨æˆ·æŒ‚è½½/å¸è½½
- **IdentityFile**: æŒ‡å®šSSHç§é’¥æ–‡ä»¶
- **allow_other**: å…è®¸å…¶ä»–ç”¨æˆ·è®¿é—®
- **noauto**: ç³»ç»Ÿå¯åŠ¨æ—¶ä¸è‡ªåŠ¨æŒ‚è½½

### 8.2 SSHå¯†é’¥è®¤è¯è®¾ç½®


**ğŸ”‘ å…å¯†ç™»å½•é…ç½®**
```bash
# 1. ç”ŸæˆSSHå¯†é’¥å¯¹
ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa_sshfs

# 2. å¤åˆ¶å…¬é’¥åˆ°è¿œç¨‹æœåŠ¡å™¨
ssh-copy-id -i ~/.ssh/id_rsa_sshfs.pub user@host

# 3. æµ‹è¯•å…å¯†ç™»å½•
ssh -i ~/.ssh/id_rsa_sshfs user@host
```

**ğŸ“‹ SSHé…ç½®ä¼˜åŒ–**
```bash
# ç¼–è¾‘SSHå®¢æˆ·ç«¯é…ç½®
nano ~/.ssh/config

# æ·»åŠ ä¸»æœºé…ç½®
Host myserver
    HostName server.example.com
    User john
    IdentityFile ~/.ssh/id_rsa_sshfs
    ServerAliveInterval 30
    ServerAliveCountMax 3
```

### 8.3 å¼€æœºè‡ªåŠ¨æŒ‚è½½


**ğŸš€ systemdæœåŠ¡é…ç½®**
```bash
# åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/sshfs-mount.service

[Unit]
Description=SSHFS Mount
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/bin/sshfs user@host:/path /mount/point -o _netdev,reconnect
ExecStop=/usr/bin/fusermount -u /mount/point
User=username

[Install]
WantedBy=multi-user.target
```

**âš™ï¸ å¯ç”¨è‡ªåŠ¨æŒ‚è½½**
```bash
# å¯ç”¨æœåŠ¡
sudo systemctl enable sshfs-mount.service

# å¯åŠ¨æœåŠ¡
sudo systemctl start sshfs-mount.service

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status sshfs-mount.service
```

---

## 9. ğŸ“Š SSHFS vs NFSå¯¹æ¯”


### 9.1 åè®®å¯¹æ¯”åˆ†æ


**ğŸ” åŸºç¡€å¯¹æ¯”è¡¨æ ¼**

| ç‰¹æ€§ | **SSHFS** | **NFS** |
|------|-----------|---------|
| **ğŸ”§ é…ç½®å¤æ‚åº¦** | `ç®€å•ï¼Œåªéœ€SSHè®¿é—®` | `å¤æ‚ï¼Œéœ€è¦ä¸“é—¨é…ç½®` |
| **ğŸ”’ å®‰å…¨æ€§** | `SSHåŠ å¯†ï¼Œå®‰å…¨æ€§é«˜` | `ä¾èµ–ç½‘ç»œå®‰å…¨ï¼Œå¯é…ç½®Kerberos` |
| **âš¡ æ€§èƒ½** | `è¾ƒä½ï¼Œæœ‰åŠ å¯†å¼€é”€` | `è¾ƒé«˜ï¼Œä¼˜åŒ–çš„ç½‘ç»œåè®®` |
| **ğŸŒ ç½‘ç»œè¦æ±‚** | `ä»»ä½•æœ‰SSHçš„ç½‘ç»œ` | `é€šå¸¸éœ€è¦å¯é çš„å±€åŸŸç½‘` |
| **ğŸ’¾ ç¼“å­˜æœºåˆ¶** | `æœ‰é™çš„å®¢æˆ·ç«¯ç¼“å­˜` | `å¼ºå¤§çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç¼“å­˜` |
| **ğŸ”„ æ•…éšœæ¢å¤** | `è‡ªåŠ¨é‡è¿æœºåˆ¶` | `æ›´å¼ºçš„æ•…éšœæ¢å¤èƒ½åŠ›` |

### 9.2 æ€§èƒ½åŸºå‡†æµ‹è¯•


**ğŸ“ˆ å®é™…æ€§èƒ½å¯¹æ¯”**
```
æµ‹è¯•ç¯å¢ƒ: 1Gbpså±€åŸŸç½‘ï¼Œ1GBæ–‡ä»¶ä¼ è¾“

SSHFSæ€§èƒ½:
- è¯»å–é€Ÿåº¦: ~50-80 MB/s
- å†™å…¥é€Ÿåº¦: ~30-50 MB/s  
- å°æ–‡ä»¶æ“ä½œ: è¾ƒæ…¢ï¼ˆæ¯ä¸ªæ“ä½œéœ€è¦ç½‘ç»œå¾€è¿”ï¼‰

NFSæ€§èƒ½:
- è¯»å–é€Ÿåº¦: ~100-200 MB/s
- å†™å…¥é€Ÿåº¦: ~80-150 MB/s
- å°æ–‡ä»¶æ“ä½œ: è¾ƒå¿«ï¼ˆæ›´å¥½çš„ç¼“å­˜æœºåˆ¶ï¼‰
```

**ğŸ¯ é€‰æ‹©å»ºè®®**
```
é€‰æ‹©SSHFSçš„åœºæ™¯:
âœ… éœ€è¦é€šè¿‡äº’è”ç½‘è®¿é—®
âœ… ä¸´æ—¶æ€§çš„æ–‡ä»¶è®¿é—®éœ€æ±‚
âœ… å®‰å…¨è¦æ±‚é«˜çš„ç¯å¢ƒ
âœ… ä¸æƒ³é…ç½®å¤æ‚çš„NFSæœåŠ¡

é€‰æ‹©NFSçš„åœºæ™¯:
âœ… å±€åŸŸç½‘ç¯å¢ƒ
âœ… é«˜æ€§èƒ½è¦æ±‚
âœ… å¤§é‡å°æ–‡ä»¶æ“ä½œ
âœ… å¤šå®¢æˆ·ç«¯åŒæ—¶è®¿é—®
```

### 9.3 æ··åˆä½¿ç”¨ç­–ç•¥


**ğŸ”€ åœºæ™¯åŒ–é€‰æ‹©**
```bash
# å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨SSHFS
sshfs dev-server:/var/www ~/dev-files

# å¤‡ä»½å­˜å‚¨ï¼šä½¿ç”¨NFSï¼ˆå±€åŸŸç½‘ï¼‰
mount -t nfs backup-server:/backup /mnt/backup

# ä¸´æ—¶è®¿é—®ï¼šä½¿ç”¨SSHFS
sshfs user@remote:/tmp/shared ~/temp-share
```

---

## 10. ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘äº‹é¡¹


### 10.1 SSHè¿æ¥å®‰å…¨


**ğŸ” å¯†é’¥ç®¡ç†æœ€ä½³å®è·µ**
```bash
# 1. ä½¿ç”¨å¼ºå¯†é’¥
ssh-keygen -t ed25519 -a 100 -f ~/.ssh/sshfs_key

# 2. è®¾ç½®é€‚å½“çš„æƒé™
chmod 600 ~/.ssh/sshfs_key
chmod 644 ~/.ssh/sshfs_key.pub

# 3. å®šæœŸè½®æ¢å¯†é’¥
# å»ºè®®æ¯6-12ä¸ªæœˆæ›´æ¢ä¸€æ¬¡å¯†é’¥
```

**ğŸš« è®¿é—®æ§åˆ¶é…ç½®**
```bash
# SSHæœåŠ¡å™¨é…ç½® (/etc/ssh/sshd_config)
# é™åˆ¶ç”¨æˆ·åªèƒ½ä½¿ç”¨SFTP
Match User sshfs_user
    ForceCommand internal-sftp
    ChrootDirectory /var/sshfs_root
    AllowTcpForwarding no
    X11Forwarding no
```

### 10.2 æ–‡ä»¶ç³»ç»Ÿæƒé™


**ğŸ”’ æŒ‚è½½ç‚¹å®‰å…¨**
```bash
# è®¾ç½®å®‰å…¨çš„æŒ‚è½½é€‰é¡¹
sshfs user@host:/path /mount/point \
  -o nodev,nosuid,noexec \
  -o uid=$(id -u),gid=$(id -g) \
  -o umask=077
```

**ğŸ“‹ å®‰å…¨é€‰é¡¹è¯´æ˜**
- **nodev**: ä¸è§£é‡Šè®¾å¤‡æ–‡ä»¶
- **nosuid**: å¿½ç•¥setuid/setgidä½
- **noexec**: ä¸å…è®¸æ‰§è¡Œç¨‹åº
- **umask=077**: åªæœ‰æ‰€æœ‰è€…å¯ä»¥è®¿é—®

### 10.3 ç½‘ç»œå®‰å…¨è€ƒè™‘


**ğŸŒ ç½‘ç»œå±‚é¢é˜²æŠ¤**
```bash
# ä½¿ç”¨VPNé€šé“
# 1. å»ºç«‹VPNè¿æ¥
sudo openvpn --config company.ovpn

# 2. é€šè¿‡VPNç½‘ç»œæŒ‚è½½
sshfs user@10.0.0.100:/path /mount/point

# é˜²ç«å¢™é…ç½®
sudo ufw allow from 192.168.1.0/24 to any port 22
```

**âš ï¸ å®‰å…¨æ£€æŸ¥æ¸…å•**
```
ğŸ” å®šæœŸå®‰å…¨æ£€æŸ¥ï¼š
â˜ SSHå¯†é’¥æ˜¯å¦æ³„éœ²
â˜ æœåŠ¡å™¨SSHé…ç½®æ˜¯å¦å®‰å…¨
â˜ æŒ‚è½½é€‰é¡¹æ˜¯å¦åŒ…å«å®‰å…¨å‚æ•°
â˜ ç½‘ç»œè¿æ¥æ˜¯å¦é€šè¿‡å¯ä¿¡é€šé“
â˜ æ—¥å¿—æ˜¯å¦æœ‰å¼‚å¸¸è®¿é—®è®°å½•
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SSHFSæœ¬è´¨ï¼šåŸºäºSSHçš„ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼Œè®©è¿œç¨‹ç›®å½•åƒæœ¬åœ°ç›®å½•ä¸€æ ·ä½¿ç”¨
ğŸ”¸ æ ¸å¿ƒä¼˜åŠ¿ï¼šå®‰å…¨åŠ å¯†ä¼ è¾“ï¼Œé…ç½®ç®€å•ï¼Œå¯¹åº”ç”¨ç¨‹åºé€æ˜
ğŸ”¸ å·¥ä½œåŸç†ï¼šFUSEæ¥å£ + SSHåè®®ï¼Œé€šè¿‡ç½‘ç»œå®ç°æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨
ğŸ”¸ åŸºæœ¬ä½¿ç”¨ï¼šsshfs user@host:/path /mountpoint
ğŸ”¸ æ€§èƒ½è°ƒä¼˜ï¼šåˆç†é…ç½®ç¼“å­˜å’Œç½‘ç»œå‚æ•°
ğŸ”¸ ç¨³å®šæ€§ï¼šä½¿ç”¨reconnectç­‰å‚æ•°å¤„ç†ç½‘ç»œä¸­æ–­
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨SSHFS**
```
é€‚åˆåœºæ™¯ï¼š
- éœ€è¦é¢‘ç¹ç¼–è¾‘è¿œç¨‹æ–‡ä»¶
- é€šè¿‡äº’è”ç½‘è®¿é—®æœåŠ¡å™¨æ–‡ä»¶
- ä¸´æ—¶æ€§çš„æ–‡ä»¶å…±äº«éœ€æ±‚
- å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„ç¯å¢ƒ

ä¸é€‚åˆåœºæ™¯ï¼š  
- å¤§é‡å°æ–‡ä»¶çš„é«˜é¢‘æ“ä½œ
- å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åº”ç”¨
- éœ€è¦å¤šå®¢æˆ·ç«¯å¹¶å‘å†™å…¥
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–çš„å…³é”®**
```
ç½‘ç»œç¨³å®šæ€§ä¼˜åŒ–ï¼š
- ä½¿ç”¨reconnectè‡ªåŠ¨é‡è¿
- é…ç½®å¿ƒè·³ä¿æŒå‚æ•°
- é€‰æ‹©åˆé€‚çš„åŠ å¯†ç®—æ³•

ç¼“å­˜ç­–ç•¥ä¼˜åŒ–ï¼š
- å¯ç”¨å¤šå±‚ç¼“å­˜æœºåˆ¶
- æ ¹æ®ä½¿ç”¨æ¨¡å¼è°ƒæ•´ç¼“å­˜è¶…æ—¶
- å¹³è¡¡ç¼“å­˜ä¸ä¸€è‡´æ€§éœ€æ±‚
```

### 11.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ’¡ æ—¥å¸¸ä½¿ç”¨æŠ€å·§**
```bash
# åˆ›å»ºå¸¸ç”¨æŒ‚è½½è„šæœ¬
#!/bin/bash
# mount-dev.sh
sshfs john@dev-server:/var/www ~/dev-files \
  -o reconnect,cache=yes,compression=yes,ServerAliveInterval=30

# åˆ›å»ºå¿«é€Ÿå¸è½½è„šæœ¬  
#!/bin/bash
# umount-dev.sh
fusermount -u ~/dev-files
```

**ğŸ”§ æ•…éšœæ’é™¤æ­¥éª¤**
```
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼šping ç›®æ ‡æœåŠ¡å™¨
2. éªŒè¯SSHè®¿é—®ï¼šssh user@host
3. æ£€æŸ¥æŒ‚è½½ç‚¹ï¼šls -la /mountpoint
4. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ï¼šdmesg | grep fuse
5. æµ‹è¯•é‡æ–°æŒ‚è½½ï¼šå…ˆå¸è½½å†æŒ‚è½½
```

**ğŸš€ è¿›é˜¶ä½¿ç”¨å»ºè®®**
- ä¸ºä¸åŒæœåŠ¡å™¨åˆ›å»ºä¸“é—¨çš„SSHé…ç½®
- ä½¿ç”¨systemdæœåŠ¡å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½
- é…åˆå…¶ä»–å·¥å…·ï¼ˆå¦‚rsyncï¼‰åšæ•°æ®åŒæ­¥å¤‡ä»½
- åœ¨è„šæœ¬ä¸­åŠ å…¥é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
SSHFSæ–‡ä»¶ç³»ç»Ÿï¼Œè¿œç¨‹æŒ‚è½½æœ¬åœ°ç”¨
SSHåŠ å¯†ä¿å®‰å…¨ï¼ŒFUSEæ¥å£åšè½¬æ¢
reconnectè‡ªé‡è¿ï¼Œcacheç¼“å­˜ææ€§èƒ½
æŒ‚è½½å¸è½½è¦è§„èŒƒï¼Œæƒé™æ˜ å°„éœ€å¼„æ¸…
```