---
title: 8ã€SSLä¸TLSè¯ä¹¦é…ç½®ä¸HTTPSéƒ¨ç½²
---
## ğŸ“š ç›®å½•

1. [SSL/TLSåè®®åŸºç¡€ä¸ç‰ˆæœ¬å·®å¼‚](#1-SSL/TLSåè®®åŸºç¡€ä¸ç‰ˆæœ¬å·®å¼‚)
2. [è¯ä¹¦ç”³è¯·ä¸Let's Encryptä½¿ç”¨](#2-è¯ä¹¦ç”³è¯·ä¸Let's-Encryptä½¿ç”¨)
3. [è‡ªç­¾åè¯ä¹¦ç”Ÿæˆä¸é…ç½®](#3-è‡ªç­¾åè¯ä¹¦ç”Ÿæˆä¸é…ç½®)
4. [SSLè¯ä¹¦å®‰è£…é…ç½®](#4-SSLè¯ä¹¦å®‰è£…é…ç½®)
5. [å¼ºåˆ¶HTTPSè·³è½¬é…ç½®](#5-å¼ºåˆ¶HTTPSè·³è½¬é…ç½®)
6. [SSLå®‰å…¨å‚æ•°é…ç½®](#6-SSLå®‰å…¨å‚æ•°é…ç½®)
7. [è¯ä¹¦è‡ªåŠ¨ç»­æœŸé…ç½®](#7-è¯ä¹¦è‡ªåŠ¨ç»­æœŸé…ç½®)
8. [SSLæ€§èƒ½ä¼˜åŒ–é…ç½®](#8-SSLæ€§èƒ½ä¼˜åŒ–é…ç½®)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”’ SSL/TLSåè®®åŸºç¡€ä¸ç‰ˆæœ¬å·®å¼‚


### 1.1 ä»€ä¹ˆæ˜¯SSL/TLSï¼Ÿ


**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> æƒ³è±¡ä½ è¦ç»™æœ‹å‹å¯„ä¸€å°é‡è¦çš„ä¿¡ä»¶ã€‚æ™®é€šé‚®ä»¶å°±åƒHTTPï¼Œä»»ä½•äººéƒ½èƒ½æ‹†å¼€çœ‹ã€‚è€ŒSSL/TLSå°±åƒç»™ä¿¡ä»¶åŠ äº†ä¸€ä¸ªå¯†ç é”çš„ä¿é™©ç®±ï¼Œåªæœ‰æ”¶ä»¶äººæœ‰é’¥åŒ™èƒ½æ‰“å¼€ã€‚

**ğŸ“‹ åŸºæœ¬æ¦‚å¿µ**
```
SSLï¼ˆSecure Socket Layerï¼‰ï¼šå®‰å…¨å¥—æ¥å­—å±‚
TLSï¼ˆTransport Layer Securityï¼‰ï¼šä¼ è¾“å±‚å®‰å…¨åè®®

ç®€å•ç†è§£ï¼š
â€¢ TLSæ˜¯SSLçš„å‡çº§ç‰ˆæœ¬
â€¢ ç°åœ¨è¯´çš„SSLå…¶å®å¤§å¤šæŒ‡TLS
â€¢ ä½œç”¨ï¼šç»™ç½‘ç»œé€šä¿¡åŠ å¯†ï¼Œä¿æŠ¤æ•°æ®å®‰å…¨
```

### 1.2 SSL/TLSçš„æ ¸å¿ƒä½œç”¨


**ğŸ¯ ä¸‰å¤§å®‰å…¨ä¿éšœ**

| å®‰å…¨ç‰¹æ€§ | å«ä¹‰ | ç”Ÿæ´»ä¾‹å­ |
|---------|------|----------|
| **ğŸ” åŠ å¯†æ€§** | æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åŠ å¯† | åƒå¯†ç æœ¬ï¼Œåˆ«äººçœ‹ä¸æ‡‚ |
| **âœ… å®Œæ•´æ€§** | ç¡®ä¿æ•°æ®æ²¡è¢«ç¯¡æ”¹ | åƒå°æ¡ï¼Œè¢«åŠ¨è¿‡å°±çŸ¥é“ |
| **ğŸ†” èº«ä»½è®¤è¯** | ç¡®è®¤ç½‘ç«™èº«ä»½çœŸå® | åƒèº«ä»½è¯ï¼Œè¯æ˜æ˜¯æœ¬äºº |

**ğŸ’¡ å…³é”®æ´å¯Ÿ**
> HTTPS = HTTP + SSL/TLSï¼Œå°±æ˜¯ç»™æ™®é€šçš„ç½‘é¡µä¼ è¾“ç©¿ä¸Šäº†ä¸€å±‚å®‰å…¨å¤–è¡£

### 1.3 SSL/TLSç‰ˆæœ¬æ¼”è¿›


**ğŸ“ˆ ç‰ˆæœ¬å†å²æ—¶é—´çº¿**
```
SSLå‘å±•å†ç¨‹ï¼š
SSL 1.0 (1994) â†’ ä»æœªå…¬å¼€å‘å¸ƒï¼Œæœ‰ä¸¥é‡å®‰å…¨æ¼æ´
SSL 2.0 (1995) â†’ å·²åºŸå¼ƒï¼Œä¸å®‰å…¨
SSL 3.0 (1996) â†’ å·²åºŸå¼ƒï¼Œå­˜åœ¨POODLEæ”»å‡»æ¼æ´

TLSæ¥æ£’å‘å±•ï¼š
TLS 1.0 (1999) â†’ åŸºäºSSL 3.0æ”¹è¿›ï¼Œå·²è¿‡æ—¶
TLS 1.1 (2006) â†’ ä¿®å¤äº†1.0çš„æ¼æ´ï¼Œå¾ˆå°‘ä½¿ç”¨
TLS 1.2 (2008) â†’ ç›®å‰å¹¿æ³›ä½¿ç”¨ï¼Œç›¸å¯¹å®‰å…¨
TLS 1.3 (2018) â†’ æœ€æ–°ç‰ˆæœ¬ï¼Œæ€§èƒ½æœ€å¥½æœ€å®‰å…¨
```

**ğŸ“Š ç‰ˆæœ¬å¯¹æ¯”çŸ©é˜µ**

| ç‰ˆæœ¬ | å®‰å…¨æ€§ | æ€§èƒ½ | å…¼å®¹æ€§ | æ¨èç¨‹åº¦ |
|------|--------|------|--------|----------|
| SSL 2.0/3.0 | ğŸ”´ ä¸å®‰å…¨ | â­â­ | ğŸŸ¢ æœ€å¥½ | âŒ ç¦ç”¨ |
| TLS 1.0/1.1 | ğŸŸ¡ è¾ƒå¼± | â­â­ | ğŸŸ¢ å¾ˆå¥½ | âš ï¸ é€æ­¥æ·˜æ±° |
| TLS 1.2 | ğŸŸ¢ å®‰å…¨ | â­â­â­ | ğŸŸ¢ å¾ˆå¥½ | âœ… æ¨è |
| TLS 1.3 | ğŸŸ¢ æœ€å®‰å…¨ | â­â­â­â­ | ğŸŸ¡ è¾ƒå¥½ | ğŸ”¥ é¦–é€‰ |

**ğŸš¨ æ³¨æ„äº‹é¡¹**
> ç°åœ¨é…ç½®æœåŠ¡å™¨æ—¶ï¼Œåº”è¯¥ç¦ç”¨SSL 2.0/3.0å’ŒTLS 1.0/1.1ï¼Œä¼˜å…ˆä½¿ç”¨TLS 1.2å’Œ1.3

---

## 2. ğŸŒŸ è¯ä¹¦ç”³è¯·ä¸Let's Encryptä½¿ç”¨


### 2.1 SSLè¯ä¹¦çš„ç±»å‹


**ğŸ“œ è¯ä¹¦åˆ†ç±»è¯¦è§£**

```
æŒ‰éªŒè¯çº§åˆ«åˆ†ç±»ï¼š
â”Œâ”€ DVè¯ä¹¦ï¼ˆåŸŸåéªŒè¯ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ åªéªŒè¯åŸŸåæ‰€æœ‰æƒ            â”‚
â”‚ â€¢ ç”³è¯·ç®€å•ï¼Œå‡ åˆ†é’Ÿæå®š        â”‚
â”‚ â€¢ ä¸ªäººç½‘ç«™ã€åšå®¢é¦–é€‰          â”‚
â”‚ â€¢ Let's Encryptæä¾›çš„å°±æ˜¯è¿™ç§ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ OVè¯ä¹¦ï¼ˆç»„ç»‡éªŒè¯ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ éªŒè¯åŸŸå + ä¼ä¸šä¿¡æ¯         â”‚
â”‚ â€¢ éœ€è¦æä¾›ä¼ä¸šè¥ä¸šæ‰§ç…§ç­‰      â”‚
â”‚ â€¢ ä¼ä¸šå®˜ç½‘å¸¸ç”¨               â”‚
â”‚ â€¢ ä»·æ ¼ä¸­ç­‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ EVè¯ä¹¦ï¼ˆæ‰©å±•éªŒè¯ï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ æœ€ä¸¥æ ¼çš„éªŒè¯æµç¨‹            â”‚
â”‚ â€¢ æµè§ˆå™¨åœ°å€æ æ˜¾ç¤ºå…¬å¸åç§°    â”‚
â”‚ â€¢ é“¶è¡Œã€é‡‘èç½‘ç«™å¸¸ç”¨          â”‚
â”‚ â€¢ ä»·æ ¼æœ€è´µ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Let's Encryptä»‹ç»


**ğŸ†“ ä»€ä¹ˆæ˜¯Let's Encryptï¼Ÿ**
```
Let's Encryptï¼š
â€¢ å…è´¹çš„SSLè¯ä¹¦é¢å‘æœºæ„
â€¢ ç”±éè¥åˆ©ç»„ç»‡Internet Security Research Groupè¿è¥
â€¢ ç›®æ ‡ï¼šè®©æ•´ä¸ªäº’è”ç½‘éƒ½ç”¨ä¸ŠHTTPS
â€¢ ç‰¹ç‚¹ï¼šè‡ªåŠ¨åŒ–ã€å…è´¹ã€å¼€æ”¾
```

**â­ Let's Encryptçš„ä¼˜åŠ¿**
- âœ… **å®Œå…¨å…è´¹**ï¼šä¸éœ€è¦èŠ±ä¸€åˆ†é’±
- âœ… **è‡ªåŠ¨åŒ–**ï¼šå¯ä»¥è‡ªåŠ¨ç”³è¯·å’Œç»­æœŸ
- âœ… **å¿«é€Ÿç”³è¯·**ï¼šå‡ åˆ†é’Ÿå°±èƒ½æ‹¿åˆ°è¯ä¹¦
- âœ… **å¹¿æ³›æ”¯æŒ**ï¼šæ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½ä¿¡ä»»

**âš ï¸ Let's Encryptçš„é™åˆ¶**
- ğŸ”¸ åªæä¾›DVè¯ä¹¦ï¼Œä¸æ”¯æŒOV/EV
- ğŸ”¸ è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰90å¤©ï¼ˆä½†å¯ä»¥è‡ªåŠ¨ç»­æœŸï¼‰
- ğŸ”¸ å•ä¸ªåŸŸåæ¯å‘¨æœ€å¤šç”³è¯·20ä¸ªè¯ä¹¦

### 2.3 ä½¿ç”¨Certbotç”³è¯·Let's Encryptè¯ä¹¦


**ğŸ”§ å®‰è£…Certbotå·¥å…·**

```bash
# CentOS/RHELç³»ç»Ÿ
sudo yum install epel-release
sudo yum install certbot

# Ubuntu/Debianç³»ç»Ÿ  
sudo apt update
sudo apt install certbot

# éªŒè¯å®‰è£…
certbot --version
```

**ğŸš€ å¿«é€Ÿä¸Šæ‰‹ï¼šç”³è¯·è¯ä¹¦**

**æ–¹æ³•ä¸€ï¼šç‹¬ç«‹æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰**
```bash
# åœæ­¢webæœåŠ¡ï¼ˆå› ä¸ºcertbotéœ€è¦å ç”¨80ç«¯å£ï¼‰
sudo systemctl stop nginx

# ç”³è¯·è¯ä¹¦
sudo certbot certonly --standalone -d example.com -d www.example.com

# é‡å¯webæœåŠ¡
sudo systemctl start nginx
```

**æ–¹æ³•äºŒï¼šwebrootæ¨¡å¼ï¼ˆç½‘ç«™ä¸åœæœºï¼‰**
```bash
# ä¸ºnginxé…ç½®çš„ç½‘ç«™ç”³è¯·è¯ä¹¦
sudo certbot certonly --webroot -w /var/www/html -d example.com -d www.example.com
```

**ğŸ“ ç”³è¯·è¿‡ç¨‹ç¤ºä¾‹**
```
ç”³è¯·è¯ä¹¦æ—¶çš„äº¤äº’è¿‡ç¨‹ï¼š
1. è¾“å…¥é‚®ç®±åœ°å€ï¼ˆç”¨äºæ¥æ”¶è¯ä¹¦è¿‡æœŸé€šçŸ¥ï¼‰
2. åŒæ„æœåŠ¡æ¡æ¬¾ï¼ˆè¾“å…¥Yï¼‰
3. æ˜¯å¦åˆ†äº«é‚®ç®±ç»™EFFï¼ˆå¯é€‰ï¼Œè¾“å…¥Nï¼‰
4. ç­‰å¾…éªŒè¯ï¼ˆLet's Encryptä¼šéªŒè¯åŸŸåæ‰€æœ‰æƒï¼‰
5. è¯ä¹¦ç”³è¯·æˆåŠŸï¼
```

**ğŸ“‚ è¯ä¹¦æ–‡ä»¶ä½ç½®**
```
è¯ä¹¦å­˜å‚¨ä½ç½®ï¼š/etc/letsencrypt/live/example.com/

é‡è¦æ–‡ä»¶è¯´æ˜ï¼š
cert.pem        â†’ SSLè¯ä¹¦æ–‡ä»¶
chain.pem       â†’ è¯ä¹¦é“¾æ–‡ä»¶  
fullchain.pem   â†’ å®Œæ•´è¯ä¹¦é“¾ï¼ˆcert.pem + chain.pemï¼‰
privkey.pem     â†’ ç§é’¥æ–‡ä»¶

ğŸ’¡ é…ç½®nginxæ—¶é€šå¸¸ä½¿ç”¨ï¼š
è¯ä¹¦ï¼šfullchain.pem
ç§é’¥ï¼šprivkey.pem
```

### 2.4 å•†ä¸šè¯ä¹¦ç”³è¯·æµç¨‹


**ğŸ’° å•†ä¸šè¯ä¹¦çš„ç”³è¯·æ­¥éª¤**

```
å•†ä¸šè¯ä¹¦ç”³è¯·æµç¨‹ï¼š
1ï¸âƒ£ é€‰æ‹©è¯ä¹¦ç±»å‹å’Œå‚å•†ï¼ˆDigiCertã€Comodoç­‰ï¼‰
2ï¸âƒ£ ç”ŸæˆCSRæ–‡ä»¶ï¼ˆè¯ä¹¦ç­¾åè¯·æ±‚ï¼‰
3ï¸âƒ£ æäº¤ç”³è¯·å¹¶éªŒè¯åŸŸå/ä¼ä¸šä¿¡æ¯
4ï¸âƒ£ ç­‰å¾…CAæœºæ„å®¡æ ¸ï¼ˆå‡ åˆ†é’Ÿåˆ°å‡ å¤©ä¸ç­‰ï¼‰
5ï¸âƒ£ ä¸‹è½½è¯ä¹¦å¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨
```

**ğŸ”‘ ç”ŸæˆCSRæ–‡ä»¶**
```bash
# ç”Ÿæˆç§é’¥
openssl genrsa -out example.com.key 2048

# ç”ŸæˆCSRæ–‡ä»¶
openssl req -new -key example.com.key -out example.com.csr

# ä¼šæç¤ºè¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
# Country Name: CN
# State: Beijing  
# City: Beijing
# Organization: Your Company
# Organization Unit: IT Department
# Common Name: example.comï¼ˆè¿™ä¸ªæœ€é‡è¦ï¼ï¼‰
# Email: admin@example.com
```

---

## 3. ğŸ› ï¸ è‡ªç­¾åè¯ä¹¦ç”Ÿæˆä¸é…ç½®


### 3.1 ä»€ä¹ˆæ˜¯è‡ªç­¾åè¯ä¹¦ï¼Ÿ


**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> è‡ªç­¾åè¯ä¹¦å°±åƒä½ è‡ªå·±ç»™è‡ªå·±å¼€å…·çš„èº«ä»½è¯æ˜ã€‚è™½ç„¶è¯æ˜äº†ä½ æ˜¯ä½ ï¼Œä½†åˆ«äººä¸ä¸€å®šç›¸ä¿¡ï¼Œå› ä¸ºæ²¡æœ‰æƒå¨æœºæ„ï¼ˆå¦‚å…¬å®‰å±€ï¼‰çš„è®¤è¯ã€‚

**ğŸ“‹ è‡ªç­¾åè¯ä¹¦çš„ç‰¹ç‚¹**

| ç‰¹æ€§ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| ğŸ”¸ **è‡ªå·±ç­¾å‘** | ä¸éœ€è¦CAæœºæ„ï¼Œè‡ªå·±å°±æ˜¯CA | å†…ç½‘æµ‹è¯• |
| ğŸ”¸ **æµè§ˆå™¨è­¦å‘Š** | è®¿é—®æ—¶ä¼šæ˜¾ç¤ºä¸å®‰å…¨è­¦å‘Š | å¼€å‘ç¯å¢ƒ |
| ğŸ”¸ **å…è´¹åˆ¶ä½œ** | å®Œå…¨å…è´¹ï¼Œéšæ—¶å¯ä»¥ç”Ÿæˆ | å­¦ä¹ ç»ƒä¹  |
| ğŸ”¸ **åŠ å¯†æœ‰æ•ˆ** | æ•°æ®ä¼ è¾“ä»ç„¶æ˜¯åŠ å¯†çš„ | ä¸´æ—¶ä½¿ç”¨ |

### 3.2 ç”Ÿæˆè‡ªç­¾åè¯ä¹¦


**ğŸ”§ ä¸€æ­¥åˆ°ä½ç”Ÿæˆè¯ä¹¦**
```bash
# ç”Ÿæˆç§é’¥å’Œè‡ªç­¾åè¯ä¹¦ï¼ˆä¸€æ¡å‘½ä»¤æå®šï¼‰
openssl req -x509 -newkey rsa:2048 -keyout selfsigned.key -out selfsigned.crt -days 365 -nodes

# å‚æ•°è¯´æ˜ï¼š
# -x509: ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
# -newkey rsa:2048: åŒæ—¶ç”Ÿæˆ2048ä½RSAç§é’¥
# -keyout: ç§é’¥æ–‡ä»¶å
# -out: è¯ä¹¦æ–‡ä»¶å  
# -days 365: è¯ä¹¦æœ‰æ•ˆæœŸ365å¤©
# -nodes: ç§é’¥ä¸åŠ å¯†ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®åŠ å¯†ï¼‰
```

**ğŸ” åˆ†æ­¥éª¤ç”Ÿæˆï¼ˆæ¨èæ–¹å¼ï¼‰**
```bash
# ç¬¬1æ­¥ï¼šç”Ÿæˆç§é’¥
openssl genrsa -out server.key 2048

# ç¬¬2æ­¥ï¼šç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚
openssl req -new -key server.key -out server.csr

# ç¬¬3æ­¥ï¼šç”¨ç§é’¥ç­¾å‘è¯ä¹¦
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
```

**ğŸ“ ä¿¡æ¯å¡«å†™ç¤ºä¾‹**
```
ç”Ÿæˆè¿‡ç¨‹ä¸­éœ€è¦å¡«å†™çš„ä¿¡æ¯ï¼š
Country Name (2 letter code): CN
State or Province Name: Beijing
Locality Name: Beijing  
Organization Name: Test Company
Organizational Unit Name: IT Department
Common Name: localhost æˆ– ä½ çš„åŸŸå
Email Address: test@example.com
```

**ğŸ’¡ å…³é”®æ´å¯Ÿ**
> Common Nameï¼ˆCNï¼‰å­—æ®µå¿…é¡»ä¸ä½ è¦è®¿é—®çš„åŸŸåå®Œå…¨ä¸€è‡´ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šæŠ¥é”™

### 3.3 ä¸ºå¼€å‘ç¯å¢ƒé…ç½®è‡ªç­¾åè¯ä¹¦


**ğŸŒ åˆ›å»ºå¤šåŸŸåè¯ä¹¦**
```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > server.conf << EOF
[req]
distinguished_name = req_distinguished_name
req_extensions = v3_req
prompt = no

[req_distinguished_name]
C = CN
ST = Beijing
L = Beijing
O = Test Company
CN = localhost

[v3_req]
basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment
subjectAltName = @alt_names

[alt_names]
DNS.1 = localhost
DNS.2 = *.localhost
DNS.3 = 127.0.0.1
IP.1 = 127.0.0.1
IP.2 = ::1
EOF

# ä½¿ç”¨é…ç½®æ–‡ä»¶ç”Ÿæˆè¯ä¹¦
openssl req -x509 -newkey rsa:2048 -keyout dev.key -out dev.crt -days 365 -nodes -config server.conf -extensions v3_req
```

---

## 4. âš™ï¸ SSLè¯ä¹¦å®‰è£…é…ç½®


### 4.1 Nginx SSLé…ç½®


**ğŸ“ åŸºç¡€SSLé…ç½®**
```nginx
server {
    listen 443 ssl http2;
    server_name example.com www.example.com;
    
    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    
    # ç½‘ç«™æ ¹ç›®å½•
    root /var/www/html;
    index index.html index.php;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
```

**ğŸ”’ å¢å¼ºå®‰å…¨é…ç½®**
```nginx
server {
    listen 443 ssl http2;
    server_name example.com;
    
    # SSLè¯ä¹¦
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    # SSLåè®®ç‰ˆæœ¬ï¼ˆåªå…è®¸TLS 1.2å’Œ1.3ï¼‰
    ssl_protocols TLSv1.2 TLSv1.3;
    
    # åŠ å¯†å¥—ä»¶é…ç½®
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305;
    ssl_prefer_server_ciphers off;
    
    # SSLä¼šè¯ç¼“å­˜
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    
    # HSTSå®‰å…¨å¤´
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    location / {
        root /var/www/html;
        index index.html;
    }
}
```

### 4.2 Apache SSLé…ç½®


**ğŸ”§ å¯ç”¨SSLæ¨¡å—**
```bash
# CentOS/RHEL
sudo yum install mod_ssl
sudo systemctl restart httpd

# Ubuntu/Debian
sudo a2enmod ssl
sudo systemctl restart apache2
```

**ğŸ“ è™šæ‹Ÿä¸»æœºSSLé…ç½®**
```apache
<VirtualHost *:443>
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/html
    
    # å¯ç”¨SSL
    SSLEngine on
    
    # SSLè¯ä¹¦é…ç½®
    SSLCertificateFile /etc/letsencrypt/live/example.com/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/example.com/chain.pem
    
    # SSLåè®®é…ç½®
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
    SSLHonorCipherOrder off
    
    # HSTSå¤´
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
</VirtualHost>
```

### 4.3 è¯ä¹¦é…ç½®éªŒè¯


**ğŸ” é…ç½®è¯­æ³•æ£€æŸ¥**
```bash
# Nginxé…ç½®æ£€æŸ¥
sudo nginx -t

# Apacheé…ç½®æ£€æŸ¥
sudo httpd -t    # CentOS/RHEL
sudo apache2ctl configtest  # Ubuntu/Debian
```

**ğŸŒ åœ¨çº¿SSLæ£€æµ‹å·¥å…·**
```
æ¨èçš„SSLæ£€æµ‹ç½‘ç«™ï¼š
â€¢ SSL Labs: https://www.ssllabs.com/ssltest/
â€¢ SSL Checker: https://www.sslchecker.com/
â€¢ DigiCertå·¥å…·: https://www.digicert.com/help/

è¿™äº›å·¥å…·èƒ½æ£€æµ‹ï¼š
âœ… è¯ä¹¦æœ‰æ•ˆæ€§
âœ… å®‰å…¨ç­‰çº§è¯„åˆ†
âœ… åè®®æ”¯æŒæƒ…å†µ
âœ… åŠ å¯†å¥—ä»¶é…ç½®
```

**ğŸ”§ å‘½ä»¤è¡Œæ£€æµ‹**
```bash
# æ£€æŸ¥è¯ä¹¦ä¿¡æ¯
openssl s_client -connect example.com:443 -servername example.com

# æŸ¥çœ‹è¯ä¹¦è¿‡æœŸæ—¶é—´
echo | openssl s_client -connect example.com:443 2>/dev/null | openssl x509 -noout -dates

# æµ‹è¯•ç‰¹å®šTLSç‰ˆæœ¬
openssl s_client -connect example.com:443 -tls1_2
```

---

## 5. ğŸ”„ å¼ºåˆ¶HTTPSè·³è½¬é…ç½®


### 5.1 ä¸ºä»€ä¹ˆéœ€è¦HTTPSè·³è½¬ï¼Ÿ


**ğŸ’¡ å…³é”®æ´å¯Ÿ**
> ç”¨æˆ·ä¹ æƒ¯è¾“å…¥ç½‘å€æ—¶ä¸å¸¦https://ï¼Œå¦‚æœä¸åšè·³è½¬ï¼Œå°±ä¼šè®¿é—®åˆ°ä¸å®‰å…¨çš„HTTPç‰ˆæœ¬ï¼Œè¿™æ ·é…ç½®SSLå°±æ²¡æ„ä¹‰äº†ã€‚

**ğŸ¯ HTTPSè·³è½¬çš„ç›®çš„**
- ğŸ”¸ **ä¿æŠ¤ç”¨æˆ·**ï¼šç¡®ä¿æ‰€æœ‰è®¿é—®éƒ½æ˜¯åŠ å¯†çš„
- ğŸ”¸ **SEOå‹å¥½**ï¼šæœç´¢å¼•æ“æ›´å–œæ¬¢HTTPSç½‘ç«™
- ğŸ”¸ **é¿å…é‡å¤å†…å®¹**ï¼šé˜²æ­¢HTTPå’ŒHTTPSè¢«è§†ä¸ºä¸¤ä¸ªä¸åŒç½‘ç«™

### 5.2 Nginx HTTPSè·³è½¬é…ç½®


**ğŸš€ å¿«é€Ÿè·³è½¬é…ç½®**
```nginx
# HTTPå¼ºåˆ¶è·³è½¬åˆ°HTTPS
server {
    listen 80;
    server_name example.com www.example.com;
    
    # 301æ°¸ä¹…é‡å®šå‘åˆ°HTTPS
    return 301 https://$server_name$request_uri;
}

# HTTPSé…ç½®
server {
    listen 443 ssl http2;
    server_name example.com www.example.com;
    
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    root /var/www/html;
    index index.html;
}
```

**ğŸ”§ é«˜çº§è·³è½¬é…ç½®**
```nginx
# å¤„ç†wwwå’Œéwwwçš„è·³è½¬
server {
    listen 80;
    listen 443 ssl http2;
    server_name www.example.com;
    
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    # è·³è½¬åˆ°éwwwçš„HTTPSç‰ˆæœ¬
    return 301 https://example.com$request_uri;
}

server {
    listen 80;
    server_name example.com;
    
    # HTTPè·³è½¬åˆ°HTTPS
    return 301 https://example.com$request_uri;
}

server {
    listen 443 ssl http2;
    server_name example.com;
    
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    # ç½‘ç«™é…ç½®
    root /var/www/html;
    index index.html;
}
```

### 5.3 Apache HTTPSè·³è½¬é…ç½®


**ğŸ“ ä½¿ç”¨.htaccessæ–‡ä»¶**
```apache
# åœ¨ç½‘ç«™æ ¹ç›®å½•åˆ›å»º.htaccessæ–‡ä»¶
RewriteEngine On

# å¼ºåˆ¶HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# å¼ºåˆ¶ä½¿ç”¨wwwï¼ˆå¯é€‰ï¼‰
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
```

**ğŸ”§ è™šæ‹Ÿä¸»æœºé…ç½®**
```apache
# HTTPè™šæ‹Ÿä¸»æœºï¼ˆç”¨äºè·³è½¬ï¼‰
<VirtualHost *:80>
    ServerName example.com
    ServerAlias www.example.com
    
    # è·³è½¬åˆ°HTTPS
    Redirect permanent / https://example.com/
</VirtualHost>

# HTTPSè™šæ‹Ÿä¸»æœº
<VirtualHost *:443>
    ServerName example.com
    DocumentRoot /var/www/html
    
    SSLEngine on
    SSLCertificateFile /path/to/cert.pem
    SSLCertificateKeyFile /path/to/privkey.pem
    SSLCertificateChainFile /path/to/chain.pem
</VirtualHost>
```

### 5.4 åº”ç”¨å±‚HTTPSè·³è½¬


**ğŸ˜ PHPè·³è½¬ä»£ç **
```php
<?php
// æ£€æŸ¥æ˜¯å¦ä¸ºHTTPS
if (!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] !== 'on') {
    $httpsURL = 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
    header("Location: $httpsURL", true, 301);
    exit();
}
?>
```

**ğŸŸ¨ JavaScriptè·³è½¬ï¼ˆä¸æ¨èï¼‰**
```javascript
// å®¢æˆ·ç«¯è·³è½¬ï¼ˆSEOä¸å‹å¥½ï¼Œä»…ä½œæ¼”ç¤ºï¼‰
if (location.protocol !== 'https:') {
    location.replace('https:' + window.location.href.substring(window.location.protocol.length));
}
```

---

## 6. ğŸ›¡ï¸ SSLå®‰å…¨å‚æ•°é…ç½®


### 6.1 TLSåè®®ç‰ˆæœ¬æ§åˆ¶


**ğŸ” åè®®ç‰ˆæœ¬å®‰å…¨æ€§**
```
TLSåè®®å®‰å…¨ç­‰çº§ï¼š
ğŸ”´ SSL 2.0/3.0ï¼šä¸¥é‡æ¼æ´ï¼Œå¿…é¡»ç¦ç”¨
ğŸŸ¡ TLS 1.0/1.1ï¼šå­˜åœ¨å¼±ç‚¹ï¼Œå»ºè®®ç¦ç”¨  
ğŸŸ¢ TLS 1.2ï¼šå®‰å…¨ï¼Œå»ºè®®å¯ç”¨
ğŸŸ¢ TLS 1.3ï¼šæœ€å®‰å…¨ï¼Œå¼ºçƒˆæ¨è
```

**âš™ï¸ Nginxåè®®é…ç½®**
```nginx
# æ¨èé…ç½®ï¼šåªå¯ç”¨TLS 1.2å’Œ1.3
ssl_protocols TLSv1.2 TLSv1.3;

# å…¼å®¹æ€§é…ç½®ï¼šæ”¯æŒTLS 1.1ï¼ˆä¸æ¨èï¼‰
ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;

# æœ€ä¸¥æ ¼é…ç½®ï¼šåªç”¨æœ€æ–°çš„TLS 1.3
ssl_protocols TLSv1.3;
```

### 6.2 åŠ å¯†å¥—ä»¶é…ç½®


**ğŸ”‘ ä»€ä¹ˆæ˜¯åŠ å¯†å¥—ä»¶ï¼Ÿ**
> åŠ å¯†å¥—ä»¶å°±åƒå¯†ç é”çš„è§„æ ¼ï¼Œå†³å®šäº†ç”¨ä»€ä¹ˆç®—æ³•æ¥åŠ å¯†æ•°æ®ã€‚ä¸åŒçš„å¥—ä»¶å®‰å…¨å¼ºåº¦ä¸åŒã€‚

**ğŸ¯ æ¨èçš„åŠ å¯†å¥—ä»¶**
```nginx
# Mozillaæ¨èçš„ç°ä»£é…ç½®
ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;

# ç®€åŒ–çš„å¼ºå®‰å…¨é…ç½®
ssl_ciphers ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS;

# TLS 1.3ä¸“ç”¨ï¼ˆæ›´ç®€å•ï¼‰
ssl_protocols TLSv1.3;
# TLS 1.3ä¼šè‡ªåŠ¨é€‰æ‹©æœ€å®‰å…¨çš„å¥—ä»¶
```

**ğŸ”§ å¥—ä»¶é…ç½®è¯¦è§£**
```nginx
# å®Œæ•´çš„å®‰å…¨é…ç½®ç¤ºä¾‹
server {
    listen 443 ssl http2;
    server_name example.com;
    
    # è¯ä¹¦é…ç½®
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    # åè®®ç‰ˆæœ¬
    ssl_protocols TLSv1.2 TLSv1.3;
    
    # åŠ å¯†å¥—ä»¶
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305;
    
    # ä¼˜å…ˆä½¿ç”¨æœåŠ¡å™¨çš„å¥—ä»¶é¡ºåºï¼ˆTLS 1.2ï¼‰
    ssl_prefer_server_ciphers off;  # TLS 1.3æ¨èè®¾ä¸ºoff
    
    # DHå‚æ•°ï¼ˆç”¨äºDHEå¥—ä»¶ï¼‰
    ssl_dhparam /etc/nginx/dhparam.pem;
}
```

### 6.3 HSTSå®‰å…¨ç­–ç•¥


**ğŸ›¡ï¸ ä»€ä¹ˆæ˜¯HSTSï¼Ÿ**
```
HSTSï¼ˆHTTP Strict Transport Securityï¼‰ï¼š
â€¢ å‘Šè¯‰æµè§ˆå™¨"è¿™ä¸ªç½‘ç«™åªèƒ½ç”¨HTTPSè®¿é—®"
â€¢ é˜²æ­¢ç”¨æˆ·è¢«é™çº§æ”»å‡»
â€¢ å³ä½¿ç”¨æˆ·è¾“å…¥http://ï¼Œæµè§ˆå™¨ä¹Ÿä¼šè‡ªåŠ¨æ”¹æˆhttps://
```

**ğŸ“‹ HSTSé…ç½®ç¤ºä¾‹**
```nginx
# åŸºç¡€HSTSé…ç½®
add_header Strict-Transport-Security "max-age=31536000" always;

# å®Œæ•´HSTSé…ç½®ï¼ˆåŒ…å«å­åŸŸåï¼‰
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

# å‚æ•°è¯´æ˜ï¼š
# max-age=31536000: æœ‰æ•ˆæœŸ1å¹´ï¼ˆç§’ï¼‰
# includeSubDomains: å­åŸŸåä¹Ÿå¼ºåˆ¶HTTPS
# preload: å¯ä»¥æäº¤åˆ°æµè§ˆå™¨é¢„åŠ è½½åˆ—è¡¨
# always: æ— è®ºHTTPçŠ¶æ€ç éƒ½æ·»åŠ æ­¤å¤´
```

### 6.4 å…¶ä»–å®‰å…¨å¤´é…ç½®


**ğŸ”’ å¸¸ç”¨å®‰å…¨å¤´é…ç½®**
```nginx
# é˜²æ­¢ç‚¹å‡»åŠ«æŒ
add_header X-Frame-Options "SAMEORIGIN" always;

# é˜²æ­¢MIMEç±»å‹å—…æ¢
add_header X-Content-Type-Options "nosniff" always;

# XSSä¿æŠ¤
add_header X-XSS-Protection "1; mode=block" always;

# å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰
add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'" always;

# å¼•ç”¨ç­–ç•¥
add_header Referrer-Policy "strict-origin-when-cross-origin" always;
```

---

## 7. ğŸ”„ è¯ä¹¦è‡ªåŠ¨ç»­æœŸé…ç½®


### 7.1 Let's Encryptè‡ªåŠ¨ç»­æœŸ


**â° ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨ç»­æœŸï¼Ÿ**
> Let's Encryptè¯ä¹¦åªæœ‰90å¤©æœ‰æ•ˆæœŸï¼Œæ‰‹åŠ¨ç»­æœŸå¤ªéº»çƒ¦ï¼Œè‡ªåŠ¨åŒ–æ˜¯å¿…é¡»çš„ï¼

**ğŸ”§ Certbotè‡ªåŠ¨ç»­æœŸè®¾ç½®**
```bash
# æµ‹è¯•ç»­æœŸå‘½ä»¤
sudo certbot renew --dry-run

# å¦‚æœæµ‹è¯•æˆåŠŸï¼Œè®¾ç½®å®šæ—¶ä»»åŠ¡
sudo crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹æ£€æŸ¥ç»­æœŸï¼‰
0 2 * * * /usr/bin/certbot renew --quiet && /usr/bin/systemctl reload nginx
```

**ğŸ“ ç»­æœŸè„šæœ¬å¢å¼ºç‰ˆ**
```bash
#!/bin/bash
# åˆ›å»ºç»­æœŸè„šæœ¬ï¼š/etc/scripts/ssl-renew.sh

LOG_FILE="/var/log/ssl-renew.log"
DATE=$(date '+%Y-%m-%d %H:%M:%S')

echo "[$DATE] å¼€å§‹æ£€æŸ¥SSLè¯ä¹¦ç»­æœŸ..." >> $LOG_FILE

# ç»­æœŸè¯ä¹¦
if /usr/bin/certbot renew --quiet; then
    echo "[$DATE] è¯ä¹¦ç»­æœŸæ£€æŸ¥å®Œæˆ" >> $LOG_FILE
    
    # é‡å¯nginxï¼ˆç¡®ä¿æ–°è¯ä¹¦ç”Ÿæ•ˆï¼‰
    if /usr/bin/systemctl reload nginx; then
        echo "[$DATE] Nginxé‡è½½æˆåŠŸ" >> $LOG_FILE
    else
        echo "[$DATE] Nginxé‡è½½å¤±è´¥ï¼" >> $LOG_FILE
        exit 1
    fi
else
    echo "[$DATE] è¯ä¹¦ç»­æœŸå¤±è´¥ï¼" >> $LOG_FILE
    exit 1
fi

echo "[$DATE] SSLç»­æœŸæµç¨‹å®Œæˆ" >> $LOG_FILE
```

**âš™ï¸ è®¾ç½®è„šæœ¬æƒé™å’Œå®šæ—¶ä»»åŠ¡**
```bash
# è®¾ç½®è„šæœ¬æƒé™
sudo chmod +x /etc/scripts/ssl-renew.sh

# è®¾ç½®å®šæ—¶ä»»åŠ¡
sudo crontab -e
# æ·»åŠ ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
0 2 * * * /etc/scripts/ssl-renew.sh

# æ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œï¼ˆé™ä½é¢‘ç‡ï¼‰
0 2 * * 0 /etc/scripts/ssl-renew.sh
```

### 7.2 å•†ä¸šè¯ä¹¦ç»­æœŸç®¡ç†


**ğŸ“… è¯ä¹¦åˆ°æœŸç›‘æ§**
```bash
#!/bin/bash
# è¯ä¹¦åˆ°æœŸæ£€æŸ¥è„šæœ¬

DOMAIN="example.com"
WARN_DAYS=30

# è·å–è¯ä¹¦åˆ°æœŸæ—¶é—´
EXPIRE_DATE=$(echo | openssl s_client -connect $DOMAIN:443 -servername $DOMAIN 2>/dev/null | openssl x509 -noout -enddate | cut -d= -f2)

# è½¬æ¢ä¸ºæ—¶é—´æˆ³
EXPIRE_TIMESTAMP=$(date -d "$EXPIRE_DATE" +%s)
NOW_TIMESTAMP=$(date +%s)

# è®¡ç®—å‰©ä½™å¤©æ•°
DAYS_LEFT=$(( ($EXPIRE_TIMESTAMP - $NOW_TIMESTAMP) / 86400 ))

echo "åŸŸå $DOMAIN çš„è¯ä¹¦è¿˜æœ‰ $DAYS_LEFT å¤©è¿‡æœŸ"

# å¦‚æœå°‘äº30å¤©ï¼Œå‘é€è­¦å‘Š
if [ $DAYS_LEFT -lt $WARN_DAYS ]; then
    echo "è­¦å‘Šï¼šè¯ä¹¦å³å°†åœ¨ $DAYS_LEFT å¤©åè¿‡æœŸï¼" | mail -s "SSLè¯ä¹¦å³å°†è¿‡æœŸ" admin@example.com
fi
```

### 7.3 å¤šåŸŸåè¯ä¹¦ç®¡ç†


**ğŸ—‚ï¸ æ‰¹é‡è¯ä¹¦ç»­æœŸ**
```bash
#!/bin/bash
# æ‰¹é‡ç»­æœŸè„šæœ¬

DOMAINS=("example1.com" "example2.com" "example3.com")
LOG_FILE="/var/log/batch-ssl-renew.log"

for domain in "${DOMAINS[@]}"; do
    echo "å¤„ç†åŸŸå: $domain" >> $LOG_FILE
    
    if certbot renew --cert-name $domain --quiet; then
        echo "$domain ç»­æœŸæˆåŠŸ" >> $LOG_FILE
    else
        echo "$domain ç»­æœŸå¤±è´¥ï¼" >> $LOG_FILE
        # å‘é€é‚®ä»¶é€šçŸ¥
        echo "$domain SSLè¯ä¹¦ç»­æœŸå¤±è´¥" | mail -s "SSLç»­æœŸå¤±è´¥" admin@example.com
    fi
done

# é‡å¯WebæœåŠ¡
systemctl reload nginx
echo "æ‰¹é‡ç»­æœŸå®Œæˆï¼ŒNginxå·²é‡è½½" >> $LOG_FILE
```

---

## 8. âš¡ SSLæ€§èƒ½ä¼˜åŒ–é…ç½®


### 8.1 SSLä¼šè¯ç¼“å­˜ä¼˜åŒ–


**ğŸ  ç”Ÿæ´»ç±»æ¯”**
> SSLæ¡æ‰‹å°±åƒæ¯æ¬¡è§é¢éƒ½è¦é‡æ–°è‡ªæˆ‘ä»‹ç»ã€‚ä¼šè¯ç¼“å­˜å°±åƒ"æˆ‘ä»¬å·²ç»è®¤è¯†äº†ï¼Œä¸ç”¨é‡æ–°ä»‹ç»"ï¼Œå¤§å¤§æé«˜æ•ˆç‡ã€‚

**âš™ï¸ Nginxä¼šè¯ç¼“å­˜é…ç½®**
```nginx
# SSLä¼šè¯ç¼“å­˜é…ç½®
server {
    listen 443 ssl http2;
    server_name example.com;
    
    # å…±äº«ç¼“å­˜ï¼š10MBå¯ä»¥å­˜å‚¨çº¦40000ä¸ªä¼šè¯
    ssl_session_cache shared:SSL:10m;
    
    # ä¼šè¯è¶…æ—¶ï¼š10åˆ†é’Ÿå†…é‡å¤è®¿é—®ä¸éœ€è¦é‡æ–°æ¡æ‰‹
    ssl_session_timeout 10m;
    
    # ä¼šè¯ç¥¨æ®ï¼ˆSession Ticketsï¼‰
    ssl_session_tickets on;
    
    # å…¶ä»–SSLé…ç½®...
}
```

**ğŸ“Š ç¼“å­˜æ•ˆæœå¯¹æ¯”**

| é…ç½® | é¦–æ¬¡è®¿é—® | é‡å¤è®¿é—® | æ€§èƒ½æå‡ |
|------|----------|----------|----------|
| **æ— ç¼“å­˜** | å®Œæ•´æ¡æ‰‹ | å®Œæ•´æ¡æ‰‹ | åŸºå‡† |
| **æœ‰ç¼“å­˜** | å®Œæ•´æ¡æ‰‹ | ç®€åŒ–æ¡æ‰‹ | ğŸš€ 50-70% |

### 8.2 HTTP/2å¯ç”¨


**ğŸš€ ä»€ä¹ˆæ˜¯HTTP/2ï¼Ÿ**
```
HTTP/2ä¼˜åŠ¿ï¼š
â€¢ å¤šè·¯å¤ç”¨ï¼šä¸€ä¸ªè¿æ¥å¤„ç†å¤šä¸ªè¯·æ±‚
â€¢ äºŒè¿›åˆ¶åè®®ï¼šæ›´é«˜æ•ˆçš„æ•°æ®ä¼ è¾“
â€¢ æœåŠ¡å™¨æ¨é€ï¼šæå‰å‘é€å®¢æˆ·ç«¯éœ€è¦çš„èµ„æº
â€¢ å¤´éƒ¨å‹ç¼©ï¼šå‡å°‘é‡å¤å¤´éƒ¨ä¿¡æ¯
```

**âš™ï¸ Nginx HTTP/2é…ç½®**
```nginx
# HTTP/2éœ€è¦SSLï¼Œæ‰€ä»¥å¿…é¡»é…ç½®åœ¨443ç«¯å£
server {
    listen 443 ssl http2;  # å…³é”®ï¼šæ·»åŠ http2
    server_name example.com;
    
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    # HTTP/2æ¨é€ï¼ˆå¯é€‰ï¼‰
    location / {
        root /var/www/html;
        
        # æ¨é€å…³é”®èµ„æº
        http2_push /css/style.css;
        http2_push /js/app.js;
    }
}
```

### 8.3 OCSPè£…è®¢ä¼˜åŒ–


**ğŸ” ä»€ä¹ˆæ˜¯OCSPè£…è®¢ï¼Ÿ**
> OCSPè£…è®¢å°±åƒåŒ»ç”Ÿæå‰å¸®ä½ éªŒè¯ä½“æ£€æŠ¥å‘Šï¼Œè€Œä¸æ˜¯è®©ç—…äººè‡ªå·±å»éªŒè¯ï¼ŒåŠ å¿«äº†å°±è¯Šé€Ÿåº¦ã€‚

**âš™ï¸ OCSPè£…è®¢é…ç½®**
```nginx
server {
    listen 443 ssl http2;
    server_name example.com;
    
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    
    # å¯ç”¨OCSPè£…è®¢
    ssl_stapling on;
    ssl_stapling_verify on;
    
    # ä¿¡ä»»çš„CAè¯ä¹¦
    ssl_trusted_certificate /path/to/chain.pem;
    
    # è§£æå™¨é…ç½®ï¼ˆç”¨äºæŸ¥è¯¢OCSPæœåŠ¡å™¨ï¼‰
    resolver 8.8.8.8 8.8.4.4 valid=300s;
    resolver_timeout 5s;
}
```

### 8.4 SSLæ€§èƒ½è°ƒä¼˜å‚æ•°


**ğŸ”§ å®Œæ•´çš„æ€§èƒ½ä¼˜åŒ–é…ç½®**
```nginx
# å…¨å±€SSLä¼˜åŒ–é…ç½®
http {
    # SSLç¼“å†²åŒºè®¾ç½®
    ssl_buffer_size 4k;  # å‡å°‘ç¼“å†²åŒºå¯ä»¥é™ä½å»¶è¿Ÿ
    
    # å…¨å±€ä¼šè¯ç¼“å­˜
    ssl_session_cache shared:SSL:50m;
    ssl_session_timeout 1d;
    
    server {
        listen 443 ssl http2;
        server_name example.com;
        
        # è¯ä¹¦é…ç½®
        ssl_certificate /path/to/fullchain.pem;
        ssl_certificate_key /path/to/privkey.pem;
        
        # åè®®å’Œå¥—ä»¶ä¼˜åŒ–
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305;
        ssl_prefer_server_ciphers off;
        
        # æ€§èƒ½ä¼˜åŒ–
        ssl_stapling on;
        ssl_stapling_verify on;
        
        # å®‰å…¨å¤´
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
        
        location / {
            root /var/www/html;
            index index.html;
        }
    }
}
```

**ğŸ“ˆ æ€§èƒ½ç›‘æ§å‘½ä»¤**
```bash
# æ£€æŸ¥SSLæ¡æ‰‹æ—¶é—´
curl -w "@curl-format.txt" -o /dev/null -s https://example.com

# åˆ›å»ºcurl-format.txtæ–‡ä»¶ï¼š
echo "     time_namelookup:  %{time_namelookup}\n
        time_connect:  %{time_connect}\n
     time_appconnect:  %{time_appconnect}\n
        time_total:  %{time_total}\n" > curl-format.txt

# æµ‹è¯•HTTP/2æ”¯æŒ
curl -I --http2 https://example.com
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ SSL/TLSåŸºç¡€ï¼šæ•°æ®åŠ å¯†ä¼ è¾“çš„å®‰å…¨åè®®ï¼ŒTLSæ˜¯SSLçš„å‡çº§ç‰ˆ
ğŸ”¸ è¯ä¹¦ç±»å‹ï¼šDVï¼ˆåŸŸåéªŒè¯ï¼‰ã€OVï¼ˆç»„ç»‡éªŒè¯ï¼‰ã€EVï¼ˆæ‰©å±•éªŒè¯ï¼‰
ğŸ”¸ Let's Encryptï¼šå…è´¹SSLè¯ä¹¦ï¼Œ90å¤©æœ‰æ•ˆæœŸï¼Œæ”¯æŒè‡ªåŠ¨ç»­æœŸ
ğŸ”¸ è‡ªç­¾åè¯ä¹¦ï¼šè‡ªå·±ç­¾å‘çš„è¯ä¹¦ï¼Œç”¨äºæµ‹è¯•ç¯å¢ƒ
ğŸ”¸ HTTPSè·³è½¬ï¼šå¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨å®‰å…¨çš„HTTPSåè®®è®¿é—®
ğŸ”¸ å®‰å…¨é…ç½®ï¼šç¦ç”¨å¼±åè®®ï¼Œä½¿ç”¨å¼ºåŠ å¯†å¥—ä»¶
ğŸ”¸ è‡ªåŠ¨ç»­æœŸï¼šé€šè¿‡å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ›´æ–°è¯ä¹¦
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šä¼šè¯ç¼“å­˜ã€HTTP/2ã€OCSPè£…è®¢
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ SSL/TLSçš„æœ¬è´¨ä½œç”¨**
```
æ ¸å¿ƒåŠŸèƒ½ï¼š
â€¢ åŠ å¯†ï¼šä¿æŠ¤æ•°æ®ä¼ è¾“å®‰å…¨
â€¢ è®¤è¯ï¼šéªŒè¯ç½‘ç«™èº«ä»½çœŸå®æ€§  
â€¢ å®Œæ•´æ€§ï¼šç¡®ä¿æ•°æ®æœªè¢«ç¯¡æ”¹

ä¸ºä»€ä¹ˆé‡è¦ï¼š
â€¢ ä¿æŠ¤ç”¨æˆ·éšç§ï¼ˆå¯†ç ã€ä¸ªäººä¿¡æ¯ï¼‰
â€¢ æé«˜SEOæ’åï¼ˆæœç´¢å¼•æ“ä¼˜å¾…HTTPSï¼‰
â€¢ å¢å¼ºç”¨æˆ·ä¿¡ä»»ï¼ˆæµè§ˆå™¨æ˜¾ç¤ºå®‰å…¨æ ‡è¯†ï¼‰
```

**ğŸ”¹ è¯ä¹¦é€‰æ‹©ç­–ç•¥**
```
ä¸ªäººç½‘ç«™/åšå®¢ï¼š
âœ… Let's Encrypt DVè¯ä¹¦ï¼ˆå…è´¹ï¼‰

ä¼ä¸šå®˜ç½‘ï¼š
âœ… å•†ä¸šDVè¯ä¹¦ æˆ– OVè¯ä¹¦

é‡‘è/æ”¯ä»˜ç½‘ç«™ï¼š
âœ… EVè¯ä¹¦ï¼ˆæœ€é«˜ä¿¡ä»»çº§åˆ«ï¼‰

å¼€å‘æµ‹è¯•ï¼š
âœ… è‡ªç­¾åè¯ä¹¦ï¼ˆä¸å¯¹å¤–è®¿é—®ï¼‰
```

**ğŸ”¹ å®‰å…¨é…ç½®è¦ç‚¹**
```
åè®®ç‰ˆæœ¬ï¼š
âŒ ç¦ç”¨ï¼šSSL 2.0/3.0ã€TLS 1.0/1.1
âœ… å¯ç”¨ï¼šTLS 1.2ã€TLS 1.3

å¿…è¦å®‰å…¨æªæ–½ï¼š
â€¢ HTTPSå¼ºåˆ¶è·³è½¬
â€¢ HSTSå®‰å…¨å¤´
â€¢ å¼ºåŠ å¯†å¥—ä»¶
â€¢ å®šæœŸç»­æœŸè¯ä¹¦
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ é…ç½®æ£€æŸ¥æ¸…å•**
- [ ] ğŸ”’ SSLè¯ä¹¦æ­£ç¡®å®‰è£…
- [ ] ğŸ”„ HTTPå¼ºåˆ¶è·³è½¬åˆ°HTTPS
- [ ] ğŸ›¡ï¸ ç¦ç”¨å¼±SSL/TLSåè®®ç‰ˆæœ¬
- [ ] ğŸ”‘ é…ç½®å¼ºåŠ å¯†å¥—ä»¶
- [ ] ğŸ“‹ æ·»åŠ HSTSå®‰å…¨å¤´
- [ ] â° è®¾ç½®è¯ä¹¦è‡ªåŠ¨ç»­æœŸ
- [ ] âš¡ å¯ç”¨æ€§èƒ½ä¼˜åŒ–ï¼ˆHTTP/2ã€ä¼šè¯ç¼“å­˜ï¼‰
- [ ] ğŸ§ª ä½¿ç”¨åœ¨çº¿å·¥å…·æµ‹è¯•SSLé…ç½®

**ğŸš€ å¿«é€Ÿéƒ¨ç½²æµç¨‹**
```
1ï¸âƒ£ ç”³è¯·è¯ä¹¦
   ä¸ªäººç½‘ç«™ â†’ Let's Encryptï¼ˆcertbotï¼‰
   ä¼ä¸šç½‘ç«™ â†’ å•†ä¸šè¯ä¹¦

2ï¸âƒ£ é…ç½®WebæœåŠ¡å™¨
   Nginx â†’ ssl_certificate + ssl_certificate_key
   Apache â†’ SSLCertificateFile + SSLCertificateKeyFile

3ï¸âƒ£ å¼ºåˆ¶HTTPS
   301é‡å®šå‘ â†’ HTTPè·³è½¬åˆ°HTTPS

4ï¸âƒ£ å®‰å…¨åŠ å›º
   åè®®ç‰ˆæœ¬ â†’ åªå¯ç”¨TLS 1.2/1.3
   å®‰å…¨å¤´ â†’ æ·»åŠ HSTS

5ï¸âƒ£ è‡ªåŠ¨åŒ–
   å®šæ—¶ä»»åŠ¡ â†’ è‡ªåŠ¨ç»­æœŸè¯ä¹¦
```

### 9.4 æ•…éšœæ’é™¤æŒ‡å—


**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³**

| é—®é¢˜ç°è±¡ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ³• |
|---------|----------|----------|
| ğŸ”´ è¯ä¹¦ä¸å—ä¿¡ä»» | è‡ªç­¾åè¯ä¹¦ | ä½¿ç”¨CAç­¾å‘çš„è¯ä¹¦ |
| ğŸŸ¡ è¯ä¹¦è¿‡æœŸ | å¿˜è®°ç»­æœŸ | é‡æ–°ç”³è¯·æˆ–ç»­æœŸè¯ä¹¦ |
| ğŸ”´ Mixed Content | HTTPèµ„æº | æ‰€æœ‰èµ„æºæ”¹ç”¨HTTPS |
| ğŸŸ¡ SSLè¯„çº§ä½ | å¼±åŠ å¯†é…ç½® | æ›´æ–°SSLé…ç½®å‚æ•° |

**ğŸ’¡ å…³é”®æ´å¯Ÿ**
> SSL/TLSé…ç½®ä¸æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œéœ€è¦å®šæœŸæ£€æŸ¥å’Œæ›´æ–°ã€‚å®‰å…¨å¨èƒåœ¨ä¸æ–­æ¼”å˜ï¼Œé…ç½®ä¹Ÿè¦ä¸æ—¶ä¿±è¿›ã€‚

### 9.5 å­¦ä¹ è¿›é˜¶è·¯å¾„


**ğŸ“ˆ è¿›é˜¶å­¦ä¹ å»ºè®®**
```
åŸºç¡€æŒæ¡åçš„è¿›é˜¶æ–¹å‘ï¼š
ğŸ”¸ è¯ä¹¦é€æ˜åº¦ï¼ˆCertificate Transparencyï¼‰
ğŸ”¸ å…¬é’¥å›ºå®šï¼ˆHPKPï¼‰
ğŸ”¸ CAAè®°å½•é…ç½®
ğŸ”¸ SSL/TLSåè®®æ·±å…¥åŸç†
ğŸ”¸ å¤§è§„æ¨¡SSLè¯ä¹¦ç®¡ç†
```

**ğŸ¯ ä¸€åˆ†é’ŸæŒæ¡è¦ç‚¹**
1. **SSL/TLS**æ˜¯ç½‘ç»œé€šä¿¡åŠ å¯†åè®®ï¼Œç°åœ¨ä¸»è¦ç”¨TLS 1.2/1.3
2. **Let's Encrypt**æä¾›å…è´¹SSLè¯ä¹¦ï¼Œ90å¤©æœ‰æ•ˆæœŸï¼Œå¯è‡ªåŠ¨ç»­æœŸ
3. **HTTPSè·³è½¬**ç¡®ä¿æ‰€æœ‰è®¿é—®éƒ½æ˜¯å®‰å…¨çš„
4. **å®‰å…¨é…ç½®**åŒ…æ‹¬ç¦ç”¨å¼±åè®®ã€å¼ºåŠ å¯†å¥—ä»¶ã€HSTSå¤´
5. **æ€§èƒ½ä¼˜åŒ–**é€šè¿‡ä¼šè¯ç¼“å­˜ã€HTTP/2æé«˜è®¿é—®é€Ÿåº¦

**ğŸ”‘ è®°å¿†å£è¯€**
> è¯ä¹¦ç”³è¯·é€‰å¯¹å®¶ï¼Œé…ç½®å®‰å…¨ç¦å¼±åŠ ï¼Œè·³è½¬å¼ºåˆ¶ç”¨HTTPSï¼Œè‡ªåŠ¨ç»­æœŸä¸ç”¨æ€•ï¼Œæ€§èƒ½ä¼˜åŒ–é”¦ä¸ŠèŠ±ï¼

**æ ¸å¿ƒç†å¿µ**ï¼šSSL/TLSä¸åªæ˜¯æŠ€æœ¯é…ç½®ï¼Œæ›´æ˜¯ä¿æŠ¤ç”¨æˆ·æ•°æ®å®‰å…¨çš„è´£ä»»ã€‚æ­£ç¡®é…ç½®SSLï¼Œè®©ç½‘ç»œä¸–ç•Œæ›´å®‰å…¨ï¼