---
title: 7、字符转换与替换命令
---
## 📚 目录

1. [tr命令基本概念](#1-tr命令基本概念)
2. [字符集合与范围操作](#2-字符集合与范围操作)
3. [删除指定字符功能](#3-删除指定字符功能)
4. [压缩重复字符技巧](#4-压缩重复字符技巧)
5. [大小写转换实战](#5-大小写转换实战)
6. [不可打印字符处理](#6-不可打印字符处理)
7. [字符类预定义集合](#7-字符类预定义集合)
8. [管道组合使用技巧](#8-管道组合使用技巧)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🔄 tr命令基本概念


### 1.1 什么是tr命令


**tr命令**：translate的缩写，是Linux系统中用来**转换或删除字符**的文本处理工具。

```
简单理解：把文本中的某些字符替换成其他字符，或者删除掉
就像用橡皮擦掉错字，然后写上正确的字一样简单
```

**🔸 核心特点**
- **只能从标准输入读取**：不能直接操作文件，需要配合管道使用
- **按字符处理**：一个字符对应一个字符的替换
- **实时处理**：边读取边转换，效率很高
- **功能专一**：专门做字符转换，简单但强大

### 1.2 基本语法格式


```bash
tr [选项] 字符集1 字符集2
```

**语法解释**：
- `字符集1`：**要被替换的字符**（源字符）
- `字符集2`：**替换后的字符**（目标字符）  
- `选项`：控制tr的行为方式

**🔸 最简单的例子**
```bash
# 把小写字母a替换成大写字母A
echo "apple" | tr 'a' 'A'
# 输出：Apple
```

### 1.3 tr的工作原理


```
工作流程图示：
输入文本 → tr处理 → 输出文本
   ↓         ↓        ↓
 "hello"  a→A转换   "Hello"

处理方式：
- 逐个字符检查
- 找到匹配字符就替换
- 不匹配的字符保持不变
```

**💡 核心理解**：
tr就像一个**字符翻译器**，你告诉它"遇到a就换成A"，它就会把文本中所有的a都换成A。

---

## 2. 📝 字符集合与范围操作


### 2.1 单个字符替换


**最基础的用法**：一个字符替换成另一个字符

```bash
# 把所有的'a'替换成'@'
echo "banana" | tr 'a' '@'
# 输出：b@n@n@

# 把数字'1'替换成'一'
echo "room101" | tr '1' '一'
# 输出：room一0一
```

### 2.2 多字符集合替换


**字符集合**：用一个字符串表示多个要替换的字符

```bash
# 把元音字母替换成星号
echo "hello world" | tr 'aeiou' '*'
# 输出：h*ll* w*rld

# 一一对应替换：a→1, e→2, i→3, o→4, u→5
echo "beautiful" | tr 'aeiou' '12345'
# 输出：b25t3f5l
```

**🔸 对应规则**：
- 字符集1和字符集2**按位置对应**
- 第1个字符对应第1个，第2个对应第2个
- 如果长度不同，有特殊处理规则

### 2.3 字符范围表示法


**范围语法**：用`-`连接表示连续字符范围

```bash
# 数字范围：0-9表示所有数字
echo "abc123xyz" | tr '0-9' '*'
# 输出：abc***xyz

# 字母范围：a-z表示所有小写字母
echo "Hello123" | tr 'a-z' 'A-Z'
# 输出：HELLO123

# 组合范围：数字和字母一起
echo "Test123!" | tr 'a-zA-Z0-9' '*'
# 输出：****123!
```

**🔸 常用范围**：
- `a-z`：所有小写字母
- `A-Z`：所有大写字母  
- `0-9`：所有数字
- `a-zA-Z`：所有字母

### 2.4 字符集合长度处理


**长度不同时的处理规则**：

| 情况 | 处理方式 | 示例 |
|------|----------|------|
| **集合2更长** | 多余字符被忽略 | `tr 'a' '123'` → a替换成1 |
| **集合2更短** | 最后字符重复使用 | `tr 'abc' '12'` → a→1, b→2, c→2 |
| **集合2为空** | 相当于删除操作 | `tr 'abc' ''` → 删除a,b,c |

```bash
# 示例：集合2更短的情况
echo "abcdef" | tr 'a-f' '12'
# 输出：122222（c,d,e,f都用最后的'2'替换）
```

---

## 3. 🗑️ 删除指定字符功能


### 3.1 -d选项：删除字符


**-d选项**：delete的缩写，用来**删除指定字符**而不是替换

```bash
# 基本语法
tr -d '要删除的字符集'
```

**🔸 基本删除操作**
```bash
# 删除所有数字
echo "abc123def456" | tr -d '0-9'
# 输出：abcdef

# 删除空格
echo "hello world test" | tr -d ' '
# 输出：helloworldtest

# 删除特定字符
echo "a-b-c-d-e" | tr -d '-'
# 输出：abcde
```

### 3.2 删除多种字符


```bash
# 删除数字和标点符号
echo "Hello, 123 World!" | tr -d '0-9,!'
# 输出：Hello  World

# 删除所有非字母字符（保留字母和空格）
echo "Test123@#$" | tr -d '0-9@#$'
# 输出：Test
```

### 3.3 实用删除场景


**🔸 清理文本数据**
```bash
# 清理电话号码格式：删除横线和括号
echo "(010)-1234-5678" | tr -d '()-'
# 输出：01012345678

# 删除文件路径中的反斜杠
echo "C:\\Users\\test" | tr -d '\\'
# 输出：C:Userstest
```

---

## 4. 📦 压缩重复字符技巧


### 4.1 -s选项：压缩重复


**-s选项**：squeeze的缩写，把**连续重复的字符压缩成一个**

```bash
# 基本语法
tr -s '字符集'
```

**🔸 基本压缩示例**
```bash
# 压缩重复的空格
echo "hello    world     test" | tr -s ' '
# 输出：hello world test

# 压缩重复的字母
echo "heeeelllllooooo" | tr -s 'elo'
# 输出：helo
```

### 4.2 压缩特定字符


```bash
# 只压缩重复的数字
echo "111abc222def333" | tr -s '0-9'
# 输出：1abc2def3

# 压缩重复的标点符号
echo "Hello!!!????" | tr -s '!?'
# 输出：Hello!?
```

### 4.3 结合替换和压缩


```bash
# 先替换后压缩：把制表符替换成空格，然后压缩多个空格
echo -e "a\t\t\tb\t\tc" | tr '\t' ' ' | tr -s ' '
# 输出：a b c

# 一步完成：替换制表符为空格并压缩
echo -e "a\t\t\tb\t\tc" | tr -s '\t' ' '
# 输出：a b c
```

---

## 5. 🔤 大小写转换实战


### 5.1 大小写转换基础


**最常用的功能**：大小写字母互转

```bash
# 小写转大写
echo "Hello World" | tr 'a-z' 'A-Z'
# 输出：HELLO WORLD

# 大写转小写  
echo "Hello World" | tr 'A-Z' 'a-z'
# 输出：hello world

# 大小写互换
echo "Hello World" | tr 'a-zA-Z' 'A-Za-z'
# 输出：hELLO wORLD
```

### 5.2 实际应用场景


**🔸 文本规范化**
```bash
# 统一转换为小写（常用于数据清理）
echo "User Input Data" | tr 'A-Z' 'a-z'
# 输出：user input data

# 首字母大写化处理
echo "hello" | sed 's/./\U&/' | tr 'A-Z' 'a-z' | sed 's/^./\U&/'
# 更简单的方法：
echo "hello world" | tr 'a-z' 'A-Z'
```

### 5.3 保留特定格式


```bash
# 只转换字母，保留数字和符号
echo "Test123@#$" | tr 'a-z' 'A-Z'
# 输出：TEST123@#$

# 处理包含特殊字符的文本
echo "user@domain.com" | tr 'a-z' 'A-Z'
# 输出：USER@DOMAIN.COM
```

---

## 6. 🔍 不可打印字符处理


### 6.1 什么是不可打印字符


**不可打印字符**：在终端中看不见但确实存在的字符

```
常见的不可打印字符：
- 制表符(\t)：Tab键产生
- 回车符(\r)：Windows换行的一部分  
- 换行符(\n)：Unix/Linux换行符
- 空字符(\0)：字符串结束标志
```

### 6.2 处理制表符


```bash
# 把制表符替换成4个空格
echo -e "name\tage\tcity" | tr '\t' '    '
# 输出：name    age    city

# 删除制表符
echo -e "a\tb\tc" | tr -d '\t'
# 输出：abc

# 把制表符替换成逗号（转CSV格式）
echo -e "张三\t25\t北京" | tr '\t' ','
# 输出：张三,25,北京
```

### 6.3 处理换行符


```bash
# 删除换行符（多行变一行）
printf "line1\nline2\nline3\n" | tr -d '\n'
# 输出：line1line2line3

# 把换行符替换成空格
printf "apple\nbanana\norange\n" | tr '\n' ' '
# 输出：apple banana orange 

# 把换行符替换成逗号
printf "item1\nitem2\nitem3\n" | tr '\n' ','
# 输出：item1,item2,item3,
```

### 6.4 处理Windows文本


**Windows文本问题**：Windows使用`\r\n`作为换行，Linux只用`\n`

```bash
# 删除Windows文本中的回车符\r
cat windows_file.txt | tr -d '\r' > linux_file.txt

# 查看文件中的不可见字符（用cat -v命令辅助）
cat -v file.txt | tr '^M' '\n'  # ^M代表\r字符
```

---

## 7. 📋 字符类预定义集合


### 7.1 POSIX字符类


**字符类**：系统预定义的字符集合，用`[:类名:]`表示

| 字符类 | 含义 | 等价范围 |
|--------|------|----------|
| `[:alnum:]` | 字母和数字 | `a-zA-Z0-9` |
| `[:alpha:]` | 字母 | `a-zA-Z` |
| `[:digit:]` | 数字 | `0-9` |
| `[:lower:]` | 小写字母 | `a-z` |
| `[:upper:]` | 大写字母 | `A-Z` |
| `[:space:]` | 空白字符 | 空格、制表符等 |
| `[:punct:]` | 标点符号 | `!"#$%&'()*+,-./:;<=>?@[\]^_{|}~` |

### 7.2 字符类使用示例


```bash
# 删除所有标点符号
echo "Hello, World!" | tr -d '[:punct:]'
# 输出：Hello World

# 把数字替换成星号
echo "Phone: 138-1234-5678" | tr '[:digit:]' '*'
# 输出：Phone: ***-****-****

# 大小写转换（更标准的方法）
echo "Hello World" | tr '[:lower:]' '[:upper:]'
# 输出：HELLO WORLD
```

### 7.3 字符类的优势


**🔸 为什么要用字符类？**

```
优势对比：
传统方法：tr 'a-zA-Z0-9' '*'
字符类方法：tr '[:alnum:]' '*'

字符类的好处：
✅ 更简洁易懂
✅ 支持国际化字符
✅ 避免字符集问题
✅ 代码更易维护
```

### 7.4 组合使用字符类


```bash
# 只保留字母和数字，删除其他字符
echo "Hello, 123 World!" | tr -cd '[:alnum:]'
# 输出：Hello123World

# 把所有空白字符压缩成单个空格
echo -e "word1\t  \n  word2" | tr -s '[:space:]' ' '
# 输出：word1 word2
```

---

## 8. 🔄 管道组合使用技巧


### 8.1 tr与其他命令配合


**管道思维**：tr通常不单独使用，而是作为数据处理流水线的一环

```
数据处理流水线：
输入 → 命令1 → tr → 命令2 → 输出

常见搭配：
cat/echo → tr → grep/sort/uniq
```

### 8.2 文本清理流水线


```bash
# 复杂的文本清理：删除标点、转小写、压缩空格
echo "Hello, World! How Are You?" | \
    tr -d '[:punct:]' | \
    tr '[:upper:]' '[:lower:]' | \
    tr -s '[:space:]'
# 输出：hello world how are you

# 提取单词列表
echo "apple,banana;orange:grape" | \
    tr ',:;' '\n' | \
    sort | \
    uniq
# 输出：
# apple
# banana  
# grape
# orange
```

### 8.3 数据格式转换


```bash
# CSV转换：把分隔符统一
echo "name:age;city|country" | tr ':;|' ','
# 输出：name,age,city,country

# 创建密码：生成随机字符并过滤
cat /dev/urandom | tr -dc 'a-zA-Z0-9' | head -c 12
# 输出：类似 aBc123XyZ789 的12位密码
```

### 8.4 日志处理示例


```bash
# 清理日志文件：删除多余空格和制表符
cat access.log | tr -s '[:space:]' ' ' | head -5

# 提取IP地址数字部分
echo "192.168.1.100" | tr '.' ' '
# 输出：192 168 1 100

# 统计字符频率
echo "hello world" | tr -d ' ' | fold -w1 | sort | uniq -c
# 输出每个字符的出现次数
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的基本概念


```
🔸 tr本质：字符级别的转换和删除工具
🔸 工作方式：从标准输入读取，处理后输出到标准输出  
🔸 核心功能：字符替换、字符删除、重复压缩
🔸 使用场景：文本清理、格式转换、数据预处理
🔸 管道配合：通常与其他命令组合使用
```

### 9.2 关键选项和用法


| 功能 | 选项 | 语法 | 作用 |
|------|------|------|------|
| **字符替换** | 无 | `tr 'abc' '123'` | a→1, b→2, c→3 |
| **删除字符** | `-d` | `tr -d 'abc'` | 删除a,b,c字符 |  
| **压缩重复** | `-s` | `tr -s ' '` | 多个空格压缩成一个 |
| **补集操作** | `-c` | `tr -cd '[:alnum:]'` | 删除非字母数字字符 |

### 9.3 字符表示方法


**🔹 字符范围表示**
```
a-z    ：小写字母范围
A-Z    ：大写字母范围  
0-9    ：数字范围
[:类名:]：POSIX字符类
```

**🔹 特殊字符表示**
```
\n     ：换行符
\t     ：制表符
\r     ：回车符
\\     ：反斜杠字符
```

### 9.4 实际应用价值


**🎯 文本数据清理**
- 统一大小写格式
- 删除不需要的字符
- 压缩多余空白字符
- 转换文本编码格式

**🎯 数据格式转换**
- CSV格式处理
- 日志格式标准化
- 配置文件清理
- 密码生成过滤

**🎯 与其他工具配合**
- 为grep准备数据
- 为sort整理格式
- 为awk预处理文本
- 管道流水线中间处理

### 9.5 学习要点


**🔑 核心理解**
```
tr = 字符翻译器
- 输入什么字符，输出什么字符
- 按照你给定的规则进行转换
- 简单但功能强大
```

**🔑 使用原则**
```
✅ 简单字符操作首选tr
✅ 复杂模式匹配用sed  
✅ 字段处理用awk
✅ 大量文本用专门工具
```

**🔑 记忆口诀**
```
tr转换字符最拿手，删除压缩也不愁
范围集合灵活用，管道组合效率高
大小写转换是强项，文本清理第一流
```

**核心记忆**：
- tr专门处理字符转换，简单直接效率高
- 三大功能：替换、删除、压缩，解决大部分字符处理需求
- 管道配合使用威力大，文本处理流水线的重要一环
- 掌握字符类和范围表示，让字符操作更精确便捷