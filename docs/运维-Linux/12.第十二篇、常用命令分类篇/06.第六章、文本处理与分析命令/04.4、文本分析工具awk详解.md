---
title: 4ã€æ–‡æœ¬åˆ†æå·¥å…·awkè¯¦è§£
---
## ğŸ“š ç›®å½•

1. [awkå·¥å…·æ¦‚è¿°](#1-awkå·¥å…·æ¦‚è¿°)
2. [awkåŸºæœ¬è¯­æ³•ç»“æ„](#2-awkåŸºæœ¬è¯­æ³•ç»“æ„)
3. [å­—æ®µåˆ†éš”ç¬¦ä¸å†…ç½®å˜é‡](#3-å­—æ®µåˆ†éš”ç¬¦ä¸å†…ç½®å˜é‡)
4. [BEGIN/ENDæ¨¡å¼è¯¦è§£](#4-beginendæ¨¡å¼è¯¦è§£)
5. [æ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯æ§åˆ¶](#5-æ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯æ§åˆ¶)
6. [æ•°å­¦è¿ç®—ä¸å†…ç½®å‡½æ•°](#6-æ•°å­¦è¿ç®—ä¸å†…ç½®å‡½æ•°)
7. [æ•°ç»„æ“ä½œä¸å…³è”æ•°ç»„](#7-æ•°ç»„æ“ä½œä¸å…³è”æ•°ç»„)
8. [awkè„šæœ¬æ–‡ä»¶ç¼–å†™](#8-awkè„šæœ¬æ–‡ä»¶ç¼–å†™)
9. [æ ¼å¼åŒ–è¾“å‡ºprintfè¯¦è§£](#9-æ ¼å¼åŒ–è¾“å‡ºprintfè¯¦è§£)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ awkå·¥å…·æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯awk


**ç®€å•ç†è§£**ï¼šawkå°±åƒæ˜¯Linuxç³»ç»Ÿä¸­çš„**æ–‡æœ¬å¤„ç†ç‘å£«å†›åˆ€**

```
awk = æ–‡æœ¬åˆ†æ + æ•°æ®æå– + æŠ¥å‘Šç”Ÿæˆ
```

ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> æƒ³è±¡awkæ˜¯ä¸€ä¸ªè¶…çº§èªæ˜çš„ä¼šè®¡å¸ˆï¼Œèƒ½å¤Ÿï¼š
> - ğŸ“Š è‡ªåŠ¨è¯»å–è¡¨æ ¼æ•°æ®ï¼ˆæ–‡æœ¬è¡Œï¼‰
> - ğŸ” æŒ‰ç…§è§„åˆ™ç­›é€‰ä¿¡æ¯ï¼ˆæ¡ä»¶åˆ¤æ–­ï¼‰
> - ğŸ“ ç”Ÿæˆå„ç§æŠ¥è¡¨ï¼ˆæ ¼å¼åŒ–è¾“å‡ºï¼‰
> - ğŸ§® è¿›è¡Œå¤æ‚è®¡ç®—ï¼ˆæ•°å­¦è¿ç®—ï¼‰

### 1.2 ä¸ºä»€ä¹ˆè¦å­¦ä¹ awk


**ğŸ¯ æ ¸å¿ƒä»·å€¼**
```
ä¼ ç»Ÿæ–¹å¼å¤„ç†æ–‡æœ¬ï¼š
grep + cut + sort + uniq + wc âŸµ éœ€è¦å¤šä¸ªå‘½ä»¤é…åˆ

awkæ–¹å¼ï¼š
awk 'ä¸€è¡Œä»£ç å®Œæˆæ‰€æœ‰æ“ä½œ'  âŸµ ä¸€ä¸ªå·¥å…·æå®š
```

ğŸ’ª **å®é™…åº”ç”¨åœºæ™¯**
- **æ—¥å¿—åˆ†æ**ï¼šä»è®¿é—®æ—¥å¿—ä¸­ç»Ÿè®¡IPè®¿é—®æ¬¡æ•°
- **æ•°æ®æŠ¥è¡¨**ï¼šä»CSVæ–‡ä»¶ç”Ÿæˆæ±‡æ€»æŠ¥å‘Š  
- **ç³»ç»Ÿç›‘æ§**ï¼šåˆ†æè¿›ç¨‹èµ„æºä½¿ç”¨æƒ…å†µ
- **é…ç½®æ–‡ä»¶å¤„ç†**ï¼šæ‰¹é‡ä¿®æ”¹é…ç½®å‚æ•°

### 1.3 awkçš„ä¸‰ä¸ªç‰ˆæœ¬


| ç‰ˆæœ¬ | **å…¨ç§°** | **ç‰¹ç‚¹** | **æ¨èæŒ‡æ•°** |
|------|---------|---------|-------------|
| `awk` | åŸå§‹ç‰ˆæœ¬ | åŠŸèƒ½åŸºç¡€ï¼Œå…¼å®¹æ€§å¥½ | â­â­â­ |
| `nawk` | New AWK | åŠŸèƒ½å¢å¼ºï¼Œæ€§èƒ½æå‡ | â­â­â­â­ |
| `gawk` | GNU AWK | åŠŸèƒ½æœ€å…¨ï¼ŒLinuxé»˜è®¤ | â­â­â­â­â­ |

ğŸ’¡ **å®ç”¨å»ºè®®**
> åœ¨Linuxç³»ç»Ÿä¸­ï¼Œé€šå¸¸`awk`å‘½ä»¤å®é™…ä¸Šå°±æ˜¯`gawk`çš„è½¯é“¾æ¥ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨`awk`å³å¯

---

## 2. ğŸ“ awkåŸºæœ¬è¯­æ³•ç»“æ„


### 2.1 æ ¸å¿ƒè¯­æ³•æ¡†æ¶


**åŸºæœ¬è¯­æ³•ç»“æ„**ï¼š
```bash
awk '[pattern] { action }' filename
```

ğŸ” **è¯­æ³•è§£æ**
```
â”Œâ”€ pattern â”€â”  â”Œâ”€â”€ action â”€â”€â”
â”‚ åŒ¹é…æ¨¡å¼   â”‚  â”‚ æ‰§è¡ŒåŠ¨ä½œ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ â”‚  â”‚ æ‰§è¡Œä»€ä¹ˆæ“ä½œ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ä¸‰ç§åŸºæœ¬ä½¿ç”¨æ–¹å¼


#### ğŸ“‹ **æ–¹å¼1ï¼šå‘½ä»¤è¡Œç›´æ¥ä½¿ç”¨**

```bash
# æ‰“å°æ–‡ä»¶æ‰€æœ‰å†…å®¹
awk '{ print }' file.txt

# åªæ‰“å°ç¬¬ä¸€åˆ—
awk '{ print $1 }' file.txt
```

#### ğŸ“‹ **æ–¹å¼2ï¼šæŒ‡å®špatternå’Œaction**

```bash
# æ‰“å°åŒ…å«"error"çš„è¡Œ
awk '/error/ { print $0 }' log.txt

# æ‰“å°ç¬¬3åˆ—å¤§äº100çš„è¡Œ
awk '$3 > 100 { print $1, $3 }' data.txt
```

#### ğŸ“‹ **æ–¹å¼3ï¼šä½¿ç”¨è„šæœ¬æ–‡ä»¶**

```bash
# åˆ›å»ºè„šæœ¬æ–‡ä»¶
awk -f script.awk data.txt
```

### 2.3 æ¨¡å¼(Pattern)è¯¦è§£


**ğŸ¯ å¸¸è§æ¨¡å¼ç±»å‹**

| æ¨¡å¼ç±»å‹ | **è¯­æ³•** | **å«ä¹‰** | **ç¤ºä¾‹** |
|---------|---------|---------|---------|
| **æ­£åˆ™è¡¨è¾¾å¼** | `/regex/` | åŒ¹é…åŒ…å«æ­£åˆ™çš„è¡Œ | `/^root/` |
| **å…³ç³»è¡¨è¾¾å¼** | `$1 > 100` | å­—æ®µæ¯”è¾ƒ | `$3 != "admin"` |
| **å¤åˆæ¡ä»¶** | `æ¡ä»¶1 && æ¡ä»¶2` | é€»è¾‘ç»„åˆ | `$1 > 10 && $2 < 50` |
| **èŒƒå›´æ¨¡å¼** | `/start/,/end/` | ä»startåˆ°end | `/BEGIN/,/END/` |

ğŸ’¡ **æ¨¡å¼ç†è§£è¦ç‚¹**
```
æ¨¡å¼å°±åƒæ˜¯"è¿‡æ»¤å™¨"ï¼š
- æœ‰æ¨¡å¼ï¼šåªå¤„ç†ç¬¦åˆæ¡ä»¶çš„è¡Œ
- æ— æ¨¡å¼ï¼šå¤„ç†æ‰€æœ‰è¡Œ
```

### 2.4 åŠ¨ä½œ(Action)è¯¦è§£


**ğŸ”§ å¸¸ç”¨åŠ¨ä½œç±»å‹**
```bash
# æ‰“å°åŠ¨ä½œ
{ print }           # æ‰“å°æ•´è¡Œ
{ print $1, $3 }    # æ‰“å°æŒ‡å®šå­—æ®µ

# èµ‹å€¼åŠ¨ä½œ  
{ sum += $2 }       # ç´¯åŠ è®¡ç®—

# æ¡ä»¶åŠ¨ä½œ
{ if ($1 > 100) print "å¤§äº100" }
```

---

## 3. ğŸ”¢ å­—æ®µåˆ†éš”ç¬¦ä¸å†…ç½®å˜é‡


### 3.1 å­—æ®µæ¦‚å¿µè¯¦è§£


ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> æŠŠæ¯ä¸€è¡Œæ–‡æœ¬æƒ³è±¡æˆä¸€å¼ è¡¨æ ¼çš„è¡Œï¼Œawkè‡ªåŠ¨æŠŠè¿™è¡ŒæŒ‰åˆ†éš”ç¬¦åˆ‡åˆ†æˆå¤šä¸ª"åˆ—"ï¼ˆå­—æ®µï¼‰

**å­—æ®µåˆ†å‰²ç¤ºä¾‹**ï¼š
```
åŸå§‹æ–‡æœ¬ï¼šroot:x:0:0:root:/root:/bin/bash
åˆ†éš”ç¬¦ï¼š:
å­—æ®µç»“æœï¼š
$1 = root
$2 = x  
$3 = 0
$4 = 0
$5 = root
$6 = /root
$7 = /bin/bash
$0 = æ•´è¡Œå†…å®¹
```

### 3.2 å­—æ®µåˆ†éš”ç¬¦è®¾ç½®


#### ğŸ”§ **é»˜è®¤åˆ†éš”ç¬¦**

```bash
# é»˜è®¤ç”¨ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦åˆ†éš”
echo "apple banana cherry" | awk '{ print $2 }'
# è¾“å‡ºï¼šbanana
```

#### ğŸ”§ **è‡ªå®šä¹‰åˆ†éš”ç¬¦**


**æ–¹æ³•1ï¼šå‘½ä»¤è¡ŒæŒ‡å®š**
```bash
# ç”¨å†’å·åˆ†éš”
awk -F: '{ print $1 }' /etc/passwd

# ç”¨é€—å·åˆ†éš”  
awk -F, '{ print $2 }' data.csv
```

**æ–¹æ³•2ï¼šå†…éƒ¨è®¾ç½®**
```bash
# åœ¨è„šæœ¬å†…è®¾ç½®
awk 'BEGIN { FS=":" } { print $1 }' /etc/passwd
```

**æ–¹æ³•3ï¼šå¤šå­—ç¬¦åˆ†éš”ç¬¦**
```bash
# ç”¨ "::" åˆ†éš”
awk -F"::" '{ print $1 }' data.txt

# ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†éš”
awk -F"[,:]" '{ print $1 }' data.txt
```

### 3.3 æ ¸å¿ƒå†…ç½®å˜é‡è¯¦è§£


**ğŸ“Š æœ€é‡è¦çš„å†…ç½®å˜é‡**

| å˜é‡ | **å«ä¹‰** | **ç¤ºä¾‹** | **å¸¸ç”¨åœºæ™¯** |
|------|---------|---------|-------------|
| `$0` | æ•´è¡Œå†…å®¹ | `print $0` | æ‰“å°å®Œæ•´è®°å½• |
| `$1,$2,$3...` | å„å­—æ®µå†…å®¹ | `print $1` | æå–ç‰¹å®šå­—æ®µ |
| `NF` | å­—æ®µæ•°é‡ | `print NF` | æ£€æŸ¥å­—æ®µå®Œæ•´æ€§ |
| `NR` | è¡Œå· | `print NR, $0` | æ·»åŠ è¡Œå· |
| `FS` | å­—æ®µåˆ†éš”ç¬¦ | `FS=":"` | è®¾ç½®åˆ†éš”ç¬¦ |
| `OFS` | è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ | `OFS=","` | æ§åˆ¶è¾“å‡ºæ ¼å¼ |
| `RS` | è®°å½•åˆ†éš”ç¬¦ | `RS="\n"` | å®šä¹‰è®°å½•è¾¹ç•Œ |
| `ORS` | è¾“å‡ºè®°å½•åˆ†éš”ç¬¦ | `ORS="\n\n"` | æ§åˆ¶è¡Œé—´è· |

**ğŸ’¡ å®ç”¨ç¤ºä¾‹**

```bash
# ç¤ºä¾‹æ•°æ®ï¼šstudents.txt
# å¼ ä¸‰ 18 90
# æå›› 19 85  
# ç‹äº” 20 95

# æ‰“å°å­—æ®µæ•°é‡
awk '{ print "ç¬¬" NR "è¡Œæœ‰" NF "ä¸ªå­—æ®µï¼š" $0 }' students.txt

# ä¿®æ”¹è¾“å‡ºåˆ†éš”ç¬¦
awk 'BEGIN { OFS=" | " } { print $1, $2, $3 }' students.txt
# è¾“å‡ºï¼šå¼ ä¸‰ | 18 | 90
```

### 3.4 é«˜çº§å­—æ®µæ“ä½œ


**ğŸ¯ åŠ¨æ€å­—æ®µè®¿é—®**
```bash
# æ‰“å°æœ€åä¸€ä¸ªå­—æ®µ
awk '{ print $NF }' data.txt

# æ‰“å°å€’æ•°ç¬¬äºŒä¸ªå­—æ®µ
awk '{ print $(NF-1) }' data.txt

# æ‰“å°æ‰€æœ‰å­—æ®µï¼ˆé™¤äº†ç¬¬ä¸€ä¸ªï¼‰
awk '{ for(i=2; i<=NF; i++) print $i }' data.txt
```

**ğŸ”§ å­—æ®µä¿®æ”¹**
```bash
# ä¿®æ”¹å­—æ®µå€¼
awk '{ $2 = "ä¿®æ”¹å"; print }' data.txt

# å¢åŠ å­—æ®µ
awk '{ $(NF+1) = "æ–°å­—æ®µ"; print }' data.txt
```

---

## 4. ğŸš€ BEGIN/ENDæ¨¡å¼è¯¦è§£


### 4.1 BEGIN/ENDåŸºæœ¬æ¦‚å¿µ


ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> æƒ³è±¡ä½ è¦å†™ä¸€ä»½æŠ¥å‘Šï¼š
> - **BEGIN**ï¼šå†™æŠ¥å‘Šå‰çš„å‡†å¤‡å·¥ä½œï¼ˆè®¾ç½®æ ¼å¼ã€æ‰“å¼€æ–‡ä»¶ç­‰ï¼‰
> - **ä¸»ä½“å¤„ç†**ï¼šé€è¡Œåˆ†ææ•°æ®
> - **END**ï¼šå†™æŠ¥å‘Šåçš„æ”¶å°¾å·¥ä½œï¼ˆè®¡ç®—æ€»ç»“ã€ä¿å­˜æ–‡ä»¶ç­‰ï¼‰

```
æ‰§è¡Œé¡ºåºæµç¨‹ï¼š
BEGINæ¨¡å¼ â†’ é€è¡Œå¤„ç†æ•°æ® â†’ ENDæ¨¡å¼
    â†“            â†“           â†“
   å‡†å¤‡é˜¶æ®µ      å¤„ç†é˜¶æ®µ     æ€»ç»“é˜¶æ®µ
```

### 4.2 BEGINæ¨¡å¼è¯¦è§£


**ğŸ”§ BEGINçš„ä½œç”¨**
- åˆå§‹åŒ–å˜é‡
- è®¾ç½®åˆ†éš”ç¬¦
- æ‰“å°æŠ¥è¡¨å¤´éƒ¨
- å®šä¹‰å‡½æ•°

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# è®¾ç½®å˜é‡å’Œæ‰“å°å¤´éƒ¨
awk 'BEGIN {
    print "=== å­¦ç”Ÿæˆç»©ç»Ÿè®¡æŠ¥å‘Š ==="
    print "å§“å\tå¹´é¾„\tæˆç»©"
    print "========================"
    total = 0
    count = 0
}
{
    print $1 "\t" $2 "\t" $3
    total += $3
    count++
}
END {
    print "========================"
    print "å¹³å‡åˆ†ï¼š" total/count
}' students.txt
```

### 4.3 ENDæ¨¡å¼è¯¦è§£


**ğŸ”§ ENDçš„ä½œç”¨**
- è¾“å‡ºç»Ÿè®¡ç»“æœ
- æ‰“å°æŠ¥è¡¨å°¾éƒ¨
- æ¸…ç†å·¥ä½œ
- ç”Ÿæˆæ±‡æ€»ä¿¡æ¯

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# ç»Ÿè®¡ç½‘ç«™è®¿é—®æ—¥å¿—
awk 'BEGIN { 
    print "å¼€å§‹åˆ†æè®¿é—®æ—¥å¿—..."
}
{
    ip[$1]++  # ç»Ÿè®¡IPè®¿é—®æ¬¡æ•°
    total++
}
END {
    print "=== è®¿é—®ç»Ÿè®¡ç»“æœ ==="
    print "æ€»è®¿é—®æ¬¡æ•°ï¼š" total
    print "ç‹¬ç«‹IPæ•°é‡ï¼š" length(ip)
    print "å‰5åè®¿é—®è€…ï¼š"
    
    # æ‰¾å‡ºè®¿é—®æœ€å¤šçš„IPï¼ˆç®€åŒ–ç‰ˆï¼‰
    for (i in ip) {
        print i, ip[i]
    }
}' access.log
```

### 4.4 æ— è¾“å…¥æ–‡ä»¶çš„BEGIN/END


**ğŸ¯ çº¯è®¡ç®—åœºæ™¯**
```bash
# å½“åšè®¡ç®—å™¨ä½¿ç”¨
awk 'BEGIN { 
    pi = 3.14159
    r = 5
    area = pi * r * r
    print "åŠå¾„ä¸º" r "çš„åœ†é¢ç§¯æ˜¯ï¼š" area
    exit  # ä¸å¤„ç†ä»»ä½•è¾“å…¥
}'

# ç”Ÿæˆæ•°æ®
awk 'BEGIN {
    for(i=1; i<=10; i++) {
        print "æ•°æ®è¡Œ" i
    }
}'
```

---

## 5. âš–ï¸ æ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯æ§åˆ¶


### 5.1 æ¡ä»¶åˆ¤æ–­è¯­å¥


#### ğŸ”§ **ifè¯­å¥åŸºç¡€è¯­æ³•**

```bash
if (æ¡ä»¶) {
    æ‰§è¡Œè¯­å¥
} else if (æ¡ä»¶2) {
    æ‰§è¡Œè¯­å¥2  
} else {
    æ‰§è¡Œè¯­å¥3
}
```

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# æ ¹æ®æˆç»©åˆ†çº§
awk '{
    if ($3 >= 90) {
        grade = "ä¼˜ç§€"
    } else if ($3 >= 80) {
        grade = "è‰¯å¥½"
    } else if ($3 >= 60) {
        grade = "åŠæ ¼"
    } else {
        grade = "ä¸åŠæ ¼"
    }
    print $1, $3, grade
}' students.txt
```

#### ğŸ”§ **æ¯”è¾ƒè¿ç®—ç¬¦**


| è¿ç®—ç¬¦ | **å«ä¹‰** | **ç¤ºä¾‹** | **æ³¨æ„äº‹é¡¹** |
|--------|---------|---------|-------------|
| `==` | ç­‰äº | `$1 == "root"` | å­—ç¬¦ä¸²æ¯”è¾ƒ |
| `!=` | ä¸ç­‰äº | `$3 != 0` | æ•°å­—æ¯”è¾ƒ |
| `>` | å¤§äº | `$2 > 100` | è‡ªåŠ¨ç±»å‹è½¬æ¢ |
| `<` | å°äº | `$1 < "b"` | å­—ç¬¦ä¸²æŒ‰å­—å…¸åº |
| `>=` | å¤§äºç­‰äº | `NF >= 3` | å­—æ®µæ•°åˆ¤æ–­ |
| `<=` | å°äºç­‰äº | `NR <= 10` | è¡Œæ•°é™åˆ¶ |
| `~` | åŒ¹é…æ­£åˆ™ | `$0 ~ /error/` | æ­£åˆ™åŒ¹é… |
| `!~` | ä¸åŒ¹é…æ­£åˆ™ | `$1 !~ /test/` | æ­£åˆ™ä¸åŒ¹é… |

#### ğŸ”§ **é€»è¾‘è¿ç®—ç¬¦**

```bash
# é€»è¾‘ä¸ &&
awk '$2 > 18 && $3 > 80 { print $1 "æˆå¹´ä¸”æˆç»©ä¼˜ç§€" }' students.txt

# é€»è¾‘æˆ– ||
awk '$1 == "root" || $1 == "admin" { print "ç®¡ç†å‘˜è´¦æˆ·ï¼š" $1 }' /etc/passwd

# é€»è¾‘é !
awk '!($3 < 60) { print $1 "åŠæ ¼" }' students.txt
```

### 5.2 å¾ªç¯æ§åˆ¶ç»“æ„


#### ğŸ”„ **forå¾ªç¯**


**åŸºæœ¬forå¾ªç¯**ï¼š
```bash
# éå†å­—æ®µ
awk '{
    print "å¤„ç†ç¬¬" NR "è¡Œï¼š"
    for (i = 1; i <= NF; i++) {
        print "å­—æ®µ" i "ï¼š" $i
    }
}' data.txt
```

**å…³è”æ•°ç»„forå¾ªç¯**ï¼š
```bash
# ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°
awk '{
    for (i = 1; i <= length($0); i++) {
        char = substr($0, i, 1)
        count[char]++
    }
}
END {
    for (c in count) {
        print c "ï¼š" count[c] "æ¬¡"
    }
}' text.txt
```

#### ğŸ”„ **whileå¾ªç¯**

```bash
# è®¡ç®—é˜¶ä¹˜
awk 'BEGIN {
    n = 5
    factorial = 1
    i = 1
    
    while (i <= n) {
        factorial *= i
        i++
    }
    
    print n "! = " factorial
}'
```

#### ğŸ”„ **å¾ªç¯æ§åˆ¶è¯­å¥**


**breakå’Œcontinue**ï¼š
```bash
# å¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äº100çš„æ•°
awk '{
    for (i = 1; i <= NF; i++) {
        if ($i < 0) {
            continue  # è·³è¿‡è´Ÿæ•°
        }
        if ($i > 100) {
            print "æ‰¾åˆ°å¤§æ•°ï¼š" $i
            break     # æ‰¾åˆ°å°±é€€å‡º
        }
    }
}' numbers.txt
```

### 5.3 å®é™…åº”ç”¨æ¡ˆä¾‹


**ğŸ“Š æ¡ˆä¾‹1ï¼šæ—¥å¿—åˆ†æ**
```bash
# åˆ†æApacheè®¿é—®æ—¥å¿—ï¼Œç»Ÿè®¡ä¸åŒå“åº”ç 
awk '{
    # å‡è®¾ç¬¬9ä¸ªå­—æ®µæ˜¯å“åº”ç 
    status = $9
    
    if (status >= 200 && status < 300) {
        success++
    } else if (status >= 400 && status < 500) {
        client_error++
    } else if (status >= 500) {
        server_error++
    }
    
    total++
}
END {
    print "æ€»è¯·æ±‚æ•°ï¼š" total
    print "æˆåŠŸè¯·æ±‚ï¼š" success " (" int(success/total*100) "%)"
    print "å®¢æˆ·ç«¯é”™è¯¯ï¼š" client_error " (" int(client_error/total*100) "%)"
    print "æœåŠ¡å™¨é”™è¯¯ï¼š" server_error " (" int(server_error/total*100) "%)"
}' access.log
```

---

## 6. ğŸ§® æ•°å­¦è¿ç®—ä¸å†…ç½®å‡½æ•°


### 6.1 æ•°å­¦è¿ç®—ç¬¦è¯¦è§£


**ğŸ”¢ åŸºæœ¬è¿ç®—ç¬¦**

| è¿ç®—ç¬¦ | **å«ä¹‰** | **ç¤ºä¾‹** | **ç»“æœç±»å‹** |
|--------|---------|---------|-------------|
| `+` | åŠ æ³• | `$1 + $2` | æ•°å­— |
| `-` | å‡æ³• | `$3 - 10` | æ•°å­— |
| `*` | ä¹˜æ³• | `$2 * 1.5` | æ•°å­— |
| `/` | é™¤æ³• | `$4 / $5` | æµ®ç‚¹æ•° |
| `%` | å–æ¨¡ | `NR % 2` | æ•´æ•° |
| `**` | å¹‚è¿ç®— | `$1 ** 2` | æ•°å­— |
| `++` | è‡ªå¢ | `count++` | æ•°å­— |
| `--` | è‡ªå‡ | `i--` | æ•°å­— |

**ğŸ’¡ ç±»å‹è‡ªåŠ¨è½¬æ¢**
```bash
# awkä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢
awk 'BEGIN {
    str = "123"
    num = str + 0    # å­—ç¬¦ä¸²è½¬æ•°å­—
    print num        # è¾“å‡ºï¼š123
    
    number = 456
    string = number ""  # æ•°å­—è½¬å­—ç¬¦ä¸²
    print string     # è¾“å‡ºï¼š"456"
}'
```

### 6.2 å¸¸ç”¨æ•°å­¦å‡½æ•°


**ğŸ“ æ•°å­¦å‡½æ•°è¡¨**

| å‡½æ•° | **åŠŸèƒ½** | **è¯­æ³•** | **ç¤ºä¾‹** |
|------|---------|---------|---------|
| `sqrt(x)` | å¹³æ–¹æ ¹ | `sqrt(16)` | è¿”å›4 |
| `int(x)` | å–æ•´ | `int(3.14)` | è¿”å›3 |
| `rand()` | éšæœºæ•° | `rand()` | è¿”å›0-1é—´éšæœºæ•° |
| `srand(x)` | è®¾ç½®éšæœºç§å­ | `srand(10)` | è®¾ç½®ç§å­ä¸º10 |
| `sin(x)` | æ­£å¼¦ | `sin(3.14159/2)` | è¿”å›1 |
| `cos(x)` | ä½™å¼¦ | `cos(0)` | è¿”å›1 |
| `atan2(y,x)` | åæ­£åˆ‡ | `atan2(1,1)` | è¿”å›Ï€/4 |
| `exp(x)` | eçš„xæ¬¡æ–¹ | `exp(1)` | è¿”å›e |
| `log(x)` | è‡ªç„¶å¯¹æ•° | `log(2.718)` | è¿”å›1 |

**ğŸ¯ å®é™…åº”ç”¨ç¤ºä¾‹**
```bash
# è®¡ç®—æ•°æ®çš„ç»Ÿè®¡ä¿¡æ¯
awk '{
    sum += $1
    squares += $1 * $1
    count++
}
END {
    mean = sum / count
    variance = (squares / count) - (mean * mean)
    std_dev = sqrt(variance)
    
    print "å¹³å‡æ•°ï¼š" mean
    print "æ–¹å·®ï¼š" variance  
    print "æ ‡å‡†å·®ï¼š" std_dev
}' numbers.txt
```

### 6.3 å­—ç¬¦ä¸²å¤„ç†å‡½æ•°


**ğŸ”¤ å­—ç¬¦ä¸²å‡½æ•°è¯¦è§£**

| å‡½æ•° | **åŠŸèƒ½** | **è¯­æ³•** | **ç¤ºä¾‹** |
|------|---------|---------|---------|
| `length(s)` | å­—ç¬¦ä¸²é•¿åº¦ | `length($1)` | è¿”å›å­—ç¬¦æ•° |
| `substr(s,start,len)` | å­å­—ç¬¦ä¸² | `substr($1,2,3)` | ä»ä½ç½®2å–3ä¸ªå­—ç¬¦ |
| `index(s,t)` | æŸ¥æ‰¾ä½ç½® | `index($1,"abc")` | è¿”å›"abc"ä½ç½® |
| `split(s,a,fs)` | åˆ†å‰²å­—ç¬¦ä¸² | `split($1,arr,",")` | æŒ‰é€—å·åˆ†å‰² |
| `gsub(r,s,t)` | å…¨å±€æ›¿æ¢ | `gsub(/old/,"new",$0)` | æ›¿æ¢æ‰€æœ‰oldä¸ºnew |
| `sub(r,s,t)` | å•æ¬¡æ›¿æ¢ | `sub(/old/,"new",$0)` | æ›¿æ¢ç¬¬ä¸€ä¸ªold |
| `toupper(s)` | è½¬å¤§å†™ | `toupper($1)` | è½¬æ¢ä¸ºå¤§å†™ |
| `tolower(s)` | è½¬å°å†™ | `tolower($1)` | è½¬æ¢ä¸ºå°å†™ |

**ğŸ’¡ å­—ç¬¦ä¸²å¤„ç†ç¤ºä¾‹**
```bash
# å¤„ç†ç”¨æˆ·æ•°æ®
awk 'BEGIN { FS="," } {
    # æå–ç”¨æˆ·åï¼ˆå»æ‰@åé¢çš„éƒ¨åˆ†ï¼‰
    email = $1
    username = substr(email, 1, index(email, "@") - 1)
    
    # æ ‡å‡†åŒ–å§“åæ ¼å¼
    name = toupper(substr($2, 1, 1)) tolower(substr($2, 2))
    
    print username, name, length($3) "ä¸ªå­—ç¬¦çš„å¤‡æ³¨"
}' users.csv
```

### 6.4 å®ç”¨å‡½æ•°ç»„åˆæ¡ˆä¾‹


**ğŸ“Š æ¡ˆä¾‹ï¼šæ–‡æœ¬ç»Ÿè®¡åˆ†æ**
```bash
# åˆ†ææ–‡æœ¬æ–‡ä»¶çš„è¯é¢‘
awk '{
    # è½¬æ¢ä¸ºå°å†™å¹¶åˆ†å‰²å•è¯
    line = tolower($0)
    gsub(/[^a-zA-Z ]/, "", line)  # åªä¿ç•™å­—æ¯å’Œç©ºæ ¼
    
    n = split(line, words, " ")   # åˆ†å‰²å•è¯
    
    for (i = 1; i <= n; i++) {
        if (length(words[i]) > 0) {
            word_count[words[i]]++
            total_words++
        }
    }
}
END {
    print "=== è¯é¢‘ç»Ÿè®¡ç»“æœ ==="
    print "æ€»å•è¯æ•°ï¼š" total_words
    print "ä¸é‡å¤å•è¯ï¼š" length(word_count)
    
    # è¾“å‡ºé¢‘ç‡æœ€é«˜çš„10ä¸ªå•è¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
    for (word in word_count) {
        if (word_count[word] > 5) {  # åªæ˜¾ç¤ºå‡ºç°5æ¬¡ä»¥ä¸Šçš„
            printf "%-15s %d\n", word, word_count[word]
        }
    }
}' article.txt
```

---

## 7. ğŸ“Š æ•°ç»„æ“ä½œä¸å…³è”æ•°ç»„


### 7.1 æ•°ç»„åŸºç¡€æ¦‚å¿µ


ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> awkçš„æ•°ç»„å°±åƒä¸€ä¸ª**æ™ºèƒ½æ ‡ç­¾ç›’**ï¼š
> - ğŸ“¦ **æ™®é€šæ•°ç»„**ï¼šæŒ‰æ•°å­—é¡ºåºæ’åˆ—çš„ç›’å­ï¼ˆ1å·ç›’ã€2å·ç›’...ï¼‰
> - ğŸ·ï¸ **å…³è”æ•°ç»„**ï¼šæŒ‰æ ‡ç­¾åç§°æŸ¥æ‰¾çš„ç›’å­ï¼ˆ"è‹¹æœ"ç›’ã€"é¦™è•‰"ç›’...ï¼‰

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
```
awkæ•°ç»„çš„ç‰¹æ®Šä¹‹å¤„ï¼š
âœ… ä¸éœ€è¦äº‹å…ˆå£°æ˜å¤§å°
âœ… ç´¢å¼•å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆå…³è”æ•°ç»„ï¼‰
âœ… è‡ªåŠ¨æ‰©å®¹ï¼Œä½¿ç”¨æ—¶æ‰åˆ›å»º
âœ… æ‰€æœ‰æ•°ç»„éƒ½æ˜¯å…³è”æ•°ç»„
```

### 7.2 æ•°ç»„åŸºæœ¬æ“ä½œ


#### ğŸ“¦ **æ•°ç»„åˆ›å»ºä¸èµ‹å€¼**

```bash
# æ•°å­—ç´¢å¼•æ•°ç»„
awk 'BEGIN {
    arr[1] = "è‹¹æœ"
    arr[2] = "é¦™è•‰"  
    arr[3] = "æ©˜å­"
    
    print arr[1]  # è¾“å‡ºï¼šè‹¹æœ
}'

# å­—ç¬¦ä¸²ç´¢å¼•æ•°ç»„ï¼ˆå…³è”æ•°ç»„ï¼‰
awk 'BEGIN {
    fruit["apple"] = "è‹¹æœ"
    fruit["banana"] = "é¦™è•‰"
    fruit["orange"] = "æ©˜å­"
    
    print fruit["apple"]  # è¾“å‡ºï¼šè‹¹æœ
}'
```

#### ğŸ“¦ **æ•°ç»„éå†**

```bash
# éå†æ•°ç»„çš„ä¸¤ç§æ–¹æ³•
awk 'BEGIN {
    colors["red"] = "çº¢è‰²"
    colors["green"] = "ç»¿è‰²"
    colors["blue"] = "è“è‰²"
    
    # æ–¹æ³•1ï¼šfor...inå¾ªç¯
    for (key in colors) {
        print key ":", colors[key]
    }
    
    # æ–¹æ³•2ï¼šå·²çŸ¥ç´¢å¼•çš„éå†
    keys[1] = "red"
    keys[2] = "green"
    keys[3] = "blue"
    
    for (i = 1; i <= 3; i++) {
        print keys[i] ":", colors[keys[i]]
    }
}'
```

### 7.3 å…³è”æ•°ç»„é«˜çº§åº”ç”¨


#### ğŸ¯ **ç»Ÿè®¡åˆ†æåº”ç”¨**


**æ¡ˆä¾‹1ï¼šç½‘ç«™è®¿é—®ç»Ÿè®¡**
```bash
# ç»Ÿè®¡IPè®¿é—®æ¬¡æ•°å’Œè®¿é—®çš„é¡µé¢
awk '{
    ip = $1          # IPåœ°å€
    page = $7        # è®¿é—®é¡µé¢
    
    # ç»Ÿè®¡IPè®¿é—®æ¬¡æ•°
    ip_count[ip]++
    
    # ç»Ÿè®¡é¡µé¢è®¿é—®æ¬¡æ•°
    page_count[page]++
    
    # ç»Ÿè®¡æ¯ä¸ªIPè®¿é—®çš„ä¸åŒé¡µé¢
    ip_pages[ip][page] = 1
    
    total++
}
END {
    print "=== è®¿é—®ç»Ÿè®¡æŠ¥å‘Š ==="
    print "æ€»è®¿é—®æ¬¡æ•°ï¼š" total
    
    print "\n=== è®¿é—®æœ€å¤šçš„IP ==="
    for (ip in ip_count) {
        if (ip_count[ip] > 10) {  # è®¿é—®è¶…è¿‡10æ¬¡çš„IP
            print ip "ï¼š" ip_count[ip] "æ¬¡"
        }
    }
    
    print "\n=== çƒ­é—¨é¡µé¢ ==="
    for (page in page_count) {
        if (page_count[page] > 5) {  # è®¿é—®è¶…è¿‡5æ¬¡çš„é¡µé¢
            print page "ï¼š" page_count[page] "æ¬¡"
        }
    }
}' access.log
```

#### ğŸ¯ **æ•°æ®åˆ†ç»„åº”ç”¨**


**æ¡ˆä¾‹2ï¼šå­¦ç”Ÿæˆç»©åˆ†ç»„åˆ†æ**
```bash
# æŒ‰ç­çº§ç»Ÿè®¡æˆç»©
awk 'BEGIN { FS="," } {
    class = $2      # ç­çº§
    score = $3      # æˆç»©
    name = $1       # å§“å
    
    # æŒ‰ç­çº§åˆ†ç»„ç»Ÿè®¡
    class_scores[class][name] = score
    class_sum[class] += score
    class_count[class]++
    
    # è®°å½•æ‰€æœ‰ç­çº§
    classes[class] = 1
}
END {
    for (cls in classes) {
        print "\n=== " cls " ==="
        print "å­¦ç”Ÿæ•°ï¼š" class_count[cls]
        print "å¹³å‡åˆ†ï¼š" int(class_sum[cls] / class_count[cls])
        
        print "å­¦ç”Ÿæˆç»©ï¼š"
        for (student in class_scores[cls]) {
            printf "  %-10s %d\n", student, class_scores[cls][student]
        }
    }
}' students.csv
```

### 7.4 æ•°ç»„å®ç”¨æŠ€å·§


#### ğŸ”§ **åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨**

```bash
awk 'BEGIN {
    arr["key1"] = "value1"
    arr["key2"] = ""
    
    # æ­£ç¡®çš„åˆ¤æ–­æ–¹æ³•
    if ("key1" in arr) {
        print "key1 å­˜åœ¨"
    }
    
    # é”™è¯¯çš„åˆ¤æ–­æ–¹æ³•ï¼ˆå³ä½¿å€¼ä¸ºç©ºä¹Ÿä¼šåˆ¤æ–­å­˜åœ¨ï¼‰
    if (arr["key2"]) {
        print "è¿™ä¸ä¼šè¾“å‡º"
    } else {
        print "key2å€¼ä¸ºç©ºä½†keyå­˜åœ¨"
    }
}'
```

#### ğŸ”§ **åˆ é™¤æ•°ç»„å…ƒç´ **

```bash
awk 'BEGIN {
    arr[1] = "a"
    arr[2] = "b" 
    arr[3] = "c"
    
    print "åˆ é™¤å‰ï¼š" length(arr)  # è¾“å‡ºï¼š3
    
    delete arr[2]  # åˆ é™¤æŒ‡å®šå…ƒç´ 
    
    print "åˆ é™¤åï¼š" length(arr)  # è¾“å‡ºï¼š2
    
    # æ¸…ç©ºæ•´ä¸ªæ•°ç»„
    delete arr
    print "æ¸…ç©ºåï¼š" length(arr)  # è¾“å‡ºï¼š0
}'
```

#### ğŸ”§ **å¤šç»´æ•°ç»„æ¨¡æ‹Ÿ**

```bash
# awkä¸æ”¯æŒçœŸæ­£çš„å¤šç»´æ•°ç»„ï¼Œä½†å¯ä»¥ç”¨å­—ç¬¦ä¸²æ‹¼æ¥æ¨¡æ‹Ÿ
awk 'BEGIN {
    # æ¨¡æ‹ŸäºŒç»´æ•°ç»„ matrix[row][col]
    matrix[1,1] = "A"
    matrix[1,2] = "B"  
    matrix[2,1] = "C"
    matrix[2,2] = "D"
    
    # éå†äºŒç»´æ•°ç»„
    for (key in matrix) {
        print key ":", matrix[key]
    }
    
    # åˆ†ç¦»è¡Œåˆ—ç´¢å¼•
    split("1,2", key_parts, ",")
    row = key_parts[1]
    col = key_parts[2] 
    print "matrix[" row "][" col "] = " matrix[row,col]
}'
```

### 7.5 æ€§èƒ½ä¼˜åŒ–å»ºè®®


**âš¡ æ•°ç»„æ€§èƒ½è¦ç‚¹**
- ğŸ”¸ **é¿å…æ— æ„ä¹‰çš„æ•°ç»„å…ƒç´ **ï¼šä¸è¦åˆ›å»ºå¤§é‡ç©ºå…ƒç´ 
- ğŸ”¸ **åŠæ—¶åˆ é™¤ä¸éœ€è¦çš„å…ƒç´ **ï¼šé‡Šæ”¾å†…å­˜ç©ºé—´
- ğŸ”¸ **ä½¿ç”¨åˆé€‚çš„é”®å**ï¼šé¿å…é”®åå†²çª
- ğŸ”¸ **è€ƒè™‘æ•°æ®ç»“æ„**ï¼šå¤æ‚åœºæ™¯è€ƒè™‘å…¶ä»–å·¥å…·

---

## 8. ğŸ“œ awkè„šæœ¬æ–‡ä»¶ç¼–å†™


### 8.1 è„šæœ¬æ–‡ä»¶åŸºç¡€


ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> æŠŠawkè„šæœ¬æƒ³è±¡æˆ**èœè°±**ï¼š
> - ğŸ“ **å‘½ä»¤è¡Œawk**ï¼šåƒç°åœºæŒ‡å¯¼åšèœï¼Œä¸€æ­¥ä¸€æ­¥è¯´
> - ğŸ“œ **è„šæœ¬æ–‡ä»¶**ï¼šåƒå†™æˆèœè°±ï¼Œå¯ä»¥é‡å¤ä½¿ç”¨ï¼Œåˆ†äº«ç»™åˆ«äºº

**è„šæœ¬æ–‡ä»¶ä¼˜åŠ¿**ï¼š
```
âœ… ä»£ç å¤ç”¨ï¼šå†™ä¸€æ¬¡ï¼Œå¤šæ¬¡ä½¿ç”¨
âœ… æ˜“äºç»´æŠ¤ï¼šé›†ä¸­ç®¡ç†ï¼Œä¾¿äºä¿®æ”¹
âœ… å¤æ‚é€»è¾‘ï¼šæ”¯æŒæ›´å¤æ‚çš„å¤„ç†é€»è¾‘
âœ… ç‰ˆæœ¬æ§åˆ¶ï¼šå¯ä»¥ç”¨Gitç­‰å·¥å…·ç®¡ç†
âœ… å›¢é˜Ÿåä½œï¼šå¯ä»¥åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜
```

### 8.2 è„šæœ¬æ–‡ä»¶ç»“æ„


#### ğŸ“ **æ ‡å‡†è„šæœ¬ç»“æ„**

```bash
#!/usr/bin/awk -f

# è¿™æ˜¯ä¸€ä¸ªawkè„šæœ¬æ–‡ä»¶ç¤ºä¾‹
# æ–‡ä»¶åï¼šprocess_data.awk

BEGIN {
    # åˆå§‹åŒ–éƒ¨åˆ†
    print "å¼€å§‹å¤„ç†æ•°æ®..."
    FS = ","           # è®¾ç½®å­—æ®µåˆ†éš”ç¬¦
    OFS = "\t"         # è®¾ç½®è¾“å‡ºåˆ†éš”ç¬¦
    total = 0
}

# å¤„ç†æ¯ä¸€è¡Œæ•°æ®çš„è§„åˆ™
/^#/ {
    # è·³è¿‡æ³¨é‡Šè¡Œ
    next
}

NF != 3 {
    # è·³è¿‡å­—æ®µä¸è¶³3ä¸ªçš„è¡Œ
    print "è­¦å‘Šï¼šç¬¬" NR "è¡Œå­—æ®µæ•°ä¸æ­£ç¡®" > "/dev/stderr"
    next
}

{
    # ä¸»è¦å¤„ç†é€»è¾‘
    total += $3
    print $1, $2, $3, "ç´¯è®¡:" total
}

END {
    # ç»“æŸå¤„ç†éƒ¨åˆ†
    print "æ•°æ®å¤„ç†å®Œæˆï¼Œæ€»è®¡ï¼š" total
}
```

#### ğŸ“ **ä½¿ç”¨è„šæœ¬æ–‡ä»¶**

```bash
# æ–¹æ³•1ï¼šä½¿è„šæœ¬å¯æ‰§è¡Œ
chmod +x process_data.awk
./process_data.awk data.csv

# æ–¹æ³•2ï¼šç”¨awkè°ƒç”¨
awk -f process_data.awk data.csv

# æ–¹æ³•3ï¼šä¼ é€’å‚æ•°ç»™è„šæœ¬
awk -f process_data.awk -v threshold=100 data.csv
```

### 8.3 å®ç”¨è„šæœ¬ç¤ºä¾‹


#### ğŸ“Š **æ—¥å¿—åˆ†æè„šæœ¬**


**è„šæœ¬æ–‡ä»¶ï¼šlog_analyzer.awk**
```bash
#!/usr/bin/awk -f

# Apacheè®¿é—®æ—¥å¿—åˆ†æå™¨
# ç”¨æ³•ï¼š./log_analyzer.awk access.log

BEGIN {
    print "=== Apacheè®¿é—®æ—¥å¿—åˆ†ææŠ¥å‘Š ==="
    print "å¼€å§‹æ—¶é—´ï¼š" strftime("%Y-%m-%d %H:%M:%S")
    print ""
    
    # åˆå§‹åŒ–ç»Ÿè®¡å˜é‡
    total_requests = 0
    total_bytes = 0
}

# è·³è¿‡ç©ºè¡Œå’Œæ ¼å¼é”™è¯¯çš„è¡Œ
NF < 7 { next }

{
    # è§£ææ—¥å¿—å­—æ®µ
    ip = $1
    timestamp = $4
    method = $6
    url = $7
    status = $9
    bytes = $10
    
    # ç»Ÿè®¡æ€»æ•°
    total_requests++
    if (bytes != "-") {
        total_bytes += bytes
    }
    
    # ç»Ÿè®¡IPè®¿é—®
    ip_count[ip]++
    
    # ç»Ÿè®¡çŠ¶æ€ç 
    status_count[status]++
    
    # ç»Ÿè®¡é¡µé¢è®¿é—®
    if (match(url, /\.(html|php|jsp)$/)) {
        page_count[url]++
    }
    
    # ç»Ÿè®¡æ¯å°æ—¶è®¿é—®é‡
    if (match(timestamp, /\[.*:([0-9]+):/)) {
        hour = substr(timestamp, RSTART+1, 2)
        hour_count[hour]++
    }
}

END {
    print "=== åŸºæœ¬ç»Ÿè®¡ ==="
    print "æ€»è¯·æ±‚æ•°ï¼š" total_requests
    print "æ€»æµé‡ï¼š" int(total_bytes/1024/1024) " MB"
    print "ç‹¬ç«‹IPï¼š" length(ip_count)
    print "å¹³å‡æ¯IPè®¿é—®ï¼š" int(total_requests/length(ip_count)) "æ¬¡"
    
    print "\n=== çŠ¶æ€ç ç»Ÿè®¡ ==="
    for (code in status_count) {
        printf "%-10s %8d (%5.1f%%)\n", 
               code, status_count[code], 
               status_count[code]/total_requests*100
    }
    
    print "\n=== è®¿é—®æœ€å¤šçš„IP (å‰10) ==="
    # ç®€åŒ–çš„æ’åºè¾“å‡º
    for (ip in ip_count) {
        if (ip_count[ip] > 10) {
            printf "%-15s %6dæ¬¡\n", ip, ip_count[ip]
        }
    }
    
    print "\n=== æ¯å°æ—¶è®¿é—®ç»Ÿè®¡ ==="
    for (h = 0; h < 24; h++) {
        hour_str = sprintf("%02d", h)
        if (hour_count[hour_str] > 0) {
            printf "%s:00-%s:59  %6dæ¬¡\n", 
                   hour_str, hour_str, hour_count[hour_str]
        }
    }
    
    print "\nåˆ†æå®Œæˆæ—¶é—´ï¼š" strftime("%Y-%m-%d %H:%M:%S")
}
```

#### ğŸ’° **è´¢åŠ¡æ•°æ®å¤„ç†è„šæœ¬**


**è„šæœ¬æ–‡ä»¶ï¼šfinance_report.awk**
```bash
#!/usr/bin/awk -f

# è´¢åŠ¡æ•°æ®åˆ†æè„šæœ¬
# è¾“å…¥æ ¼å¼ï¼šæ—¥æœŸ,ç±»åˆ«,é‡‘é¢,æè¿°
# ç”¨æ³•ï¼š./finance_report.awk -v month=2024-01 finance.csv

BEGIN {
    FS = ","
    print "=== è´¢åŠ¡åˆ†ææŠ¥å‘Š ==="
    if (month) {
        print "åˆ†ææœˆä»½ï¼š" month
    }
    print ""
}

# è·³è¿‡è¡¨å¤´
NR == 1 { next }

# è¿‡æ»¤æŒ‡å®šæœˆä»½
month && $1 !~ ("^" month) { next }

{
    date = $1
    category = $2
    amount = $3
    description = $4
    
    # åˆ†ç±»ç»Ÿè®¡
    category_sum[category] += amount
    
    # æ”¶æ”¯åˆ†ç±»
    if (amount > 0) {
        income += amount
        income_count++
    } else {
        expense += (-amount)
        expense_count++
    }
    
    # è®°å½•äº¤æ˜“è¯¦æƒ…
    transactions[NR] = $0
    total_transactions++
}

END {
    print "=== æ”¶æ”¯æ±‡æ€» ==="
    printf "æ€»æ”¶å…¥ï¼š%10.2f å…ƒ (%dç¬”)\n", income, income_count
    printf "æ€»æ”¯å‡ºï¼š%10.2f å…ƒ (%dç¬”)\n", expense, expense_count  
    printf "å‡€æ”¶å…¥ï¼š%10.2f å…ƒ\n", income - expense
    printf "äº¤æ˜“ç¬”æ•°ï¼š%8d ç¬”\n", total_transactions
    
    print "\n=== åˆ†ç±»ç»Ÿè®¡ ==="
    for (cat in category_sum) {
        printf "%-10s %10.2f å…ƒ\n", cat, category_sum[cat]
    }
    
    # è®¡ç®—æœ€å¤§æ”¯å‡ºç±»åˆ«
    max_expense = 0
    max_category = ""
    for (cat in category_sum) {
        if (category_sum[cat] < 0 && -category_sum[cat] > max_expense) {
            max_expense = -category_sum[cat]
            max_category = cat
        }
    }
    
    if (max_category) {
        print "\næœ€å¤§æ”¯å‡ºç±»åˆ«ï¼š" max_category " (" max_expense " å…ƒ)"
    }
}
```

### 8.4 è„šæœ¬è°ƒè¯•æŠ€å·§


#### ğŸ” **è°ƒè¯•æ–¹æ³•**

```bash
# 1. æ·»åŠ è°ƒè¯•ä¿¡æ¯
BEGIN { debug = 1 }  # è®¾ç½®è°ƒè¯•æ ‡å¿—
{
    if (debug) {
        print "DEBUG: å¤„ç†ç¬¬" NR "è¡Œï¼š" $0 > "/dev/stderr"
    }
    # æ­£å¸¸å¤„ç†é€»è¾‘
}

# 2. åˆ†æ®µæµ‹è¯•
awk -f script.awk data.txt | head -10  # åªçœ‹å‰10è¡Œè¾“å‡º

# 3. è¾“å‡ºåˆ°æ–‡ä»¶æ£€æŸ¥
awk -f script.awk data.txt > output.txt
less output.txt

# 4. ä½¿ç”¨printè°ƒè¯•
{
    print "å˜é‡å€¼ï¼švar=" var ", NR=" NR > "/dev/stderr"
}
```

---

## 9. ğŸ¨ æ ¼å¼åŒ–è¾“å‡ºprintfè¯¦è§£


### 9.1 printfåŸºç¡€æ¦‚å¿µ


ğŸ  **ç”Ÿæ´»ç±»æ¯”**
> `printf`å°±åƒä¸€ä¸ª**ä¸“ä¸šæ’ç‰ˆå¸ˆ**ï¼š
> - ğŸ“ `print`ï¼šåƒæ‰‹å†™å­—ï¼Œç®€å•ç›´æ¥ä½†æ ¼å¼éšæ„
> - ğŸ¨ `printf`ï¼šåƒå°åˆ·ä½“ï¼Œæ ¼å¼ç²¾ç¾ç»Ÿä¸€ä¸“ä¸š

**printf vs printå¯¹æ¯”**ï¼š
```bash
# printè¾“å‡ºï¼ˆç®€å•ä½†ä¸è§„æ•´ï¼‰
awk '{ print $1, $2, $3 }' data.txt
# è¾“å‡ºï¼šå¼ ä¸‰ 18 90
#      æå›› 19 85

# printfè¾“å‡ºï¼ˆæ ¼å¼åŒ–ä¸”å¯¹é½ï¼‰
awk '{ printf "%-8s %3d %6.1f\n", $1, $2, $3 }' data.txt  
# è¾“å‡ºï¼šå¼ ä¸‰     18   90.0
#      æå››     19   85.0
```

### 9.2 printfæ ¼å¼æ§åˆ¶ç¬¦


**ğŸ¯ åŸºæœ¬æ ¼å¼è¯­æ³•**
```
printf "æ ¼å¼æ§åˆ¶å­—ç¬¦ä¸²", å‚æ•°1, å‚æ•°2, ...
```

**ğŸ“Š å¸¸ç”¨æ ¼å¼æ§åˆ¶ç¬¦è¡¨**

| æ§åˆ¶ç¬¦ | **æ•°æ®ç±»å‹** | **å«ä¹‰** | **ç¤ºä¾‹** | **è¾“å‡ºç»“æœ** |
|--------|-------------|---------|----------|-------------|
| `%s` | å­—ç¬¦ä¸² | å­—ç¬¦ä¸²æ ¼å¼ | `printf "%s", "hello"` | hello |
| `%d` | æ•´æ•° | åè¿›åˆ¶æ•´æ•° | `printf "%d", 123` | 123 |
| `%i` | æ•´æ•° | åè¿›åˆ¶æ•´æ•° | `printf "%i", 123` | 123 |
| `%o` | æ•´æ•° | å…«è¿›åˆ¶æ•´æ•° | `printf "%o", 123` | 173 |
| `%x` | æ•´æ•° | åå…­è¿›åˆ¶(å°å†™) | `printf "%x", 123` | 7b |
| `%X` | æ•´æ•° | åå…­è¿›åˆ¶(å¤§å†™) | `printf "%X", 123` | 7B |
| `%f` | æµ®ç‚¹æ•° | æµ®ç‚¹æ•° | `printf "%f", 3.14` | 3.140000 |
| `%e` | æµ®ç‚¹æ•° | ç§‘å­¦è®¡æ•°æ³•(å°å†™) | `printf "%e", 1234` | 1.234000e+03 |
| `%E` | æµ®ç‚¹æ•° | ç§‘å­¦è®¡æ•°æ³•(å¤§å†™) | `printf "%E", 1234` | 1.234000E+03 |
| `%g` | æµ®ç‚¹æ•° | è‡ªåŠ¨é€‰æ‹©%fæˆ–%e | `printf "%g", 3.14` | 3.14 |
| `%c` | å­—ç¬¦ | å•ä¸ªå­—ç¬¦ | `printf "%c", 65` | A |
| `%%` | å­—é¢é‡ | ç™¾åˆ†å·å­—é¢å€¼ | `printf "100%%"` | 100% |

### 9.3 æ ¼å¼ä¿®é¥°ç¬¦è¯¦è§£


**ğŸ”§ å®½åº¦å’Œç²¾åº¦æ§åˆ¶**

```bash
# å®½åº¦æ§åˆ¶
printf "%5d\n", 123      # "  123" (å³å¯¹é½ï¼Œæ€»å®½åº¦5)
printf "%-5d\n", 123     # "123  " (å·¦å¯¹é½ï¼Œæ€»å®½åº¦5)
printf "%05d\n", 123     # "00123" (ç”¨0å¡«å……)

# ç²¾åº¦æ§åˆ¶
printf "%.2f\n", 3.14159  # "3.14" (ä¿ç•™2ä½å°æ•°)
printf "%8.2f\n", 3.14159 # "    3.14" (æ€»å®½åº¦8ï¼Œç²¾åº¦2)
printf "%-8.2f\n", 3.14159# "3.14    " (å·¦å¯¹é½)

# å­—ç¬¦ä¸²æˆªæ–­
printf "%.5s\n", "hello world"  # "hello" (åªå–å‰5ä¸ªå­—ç¬¦)
printf "%10.5s\n", "hello world" # "     hello" (å®½åº¦10ï¼Œåªå–å‰5å­—ç¬¦)
```

**ğŸ¨ å¯¹é½å’Œå¡«å……**

| ä¿®é¥°ç¬¦ | **å«ä¹‰** | **ç¤ºä¾‹** | **è¾“å‡º** |
|--------|---------|----------|----------|
| `%-` | å·¦å¯¹é½ | `printf "%-10s", "abc"` | "abc       " |
| `%+` | æ˜¾ç¤ºæ­£å· | `printf "%+d", 123` | "+123" |
| `% ` | æ­£æ•°å‰åŠ ç©ºæ ¼ | `printf "% d", 123` | " 123" |
| `%#` | æ·»åŠ å‰ç¼€ | `printf "%#x", 123` | "0x7b" |
| `%0` | é›¶å¡«å…… | `printf "%05d", 123` | "00123" |

### 9.4 å®ç”¨printfåº”ç”¨


#### ğŸ“Š **è¡¨æ ¼è¾“å‡ºæ ¼å¼åŒ–**


```bash
# å­¦ç”Ÿæˆç»©è¡¨æ ¼
awk 'BEGIN {
    printf "%-10s %5s %8s %6s\n", "å§“å", "å¹´é¾„", "æˆç»©", "ç­‰çº§"
    printf "%-10s %5s %8s %6s\n", "------", "---", "----", "----"
}
{
    if ($3 >= 90) grade = "A"
    else if ($3 >= 80) grade = "B" 
    else if ($3 >= 60) grade = "C"
    else grade = "F"
    
    printf "%-10s %5d %8.1f %6s\n", $1, $2, $3, grade
}
END {
    printf "%-10s %5s %8s %6s\n", "------", "---", "----", "----"
}' students.txt
```

**è¾“å‡ºæ•ˆæœ**ï¼š
```
å§“å       å¹´é¾„     æˆç»©   ç­‰çº§
------    ---     ----   ----
å¼ ä¸‰         18     90.0      A
æå››         19     85.0      B
ç‹äº”         20     75.0      C
------    ---     ----   ----
```

#### ğŸ’° **è´¢åŠ¡æŠ¥è¡¨æ ¼å¼åŒ–**


```bash
# è´¢åŠ¡æ•°æ®æ ¼å¼åŒ–
awk 'BEGIN {
    FS = ","
    printf "%12s %15s %12s\n", "æ—¥æœŸ", "åˆ†ç±»", "é‡‘é¢"
    printf "%12s %15s %12s\n", "----------", "-------------", "----------"
    total = 0
}
{
    total += $3
    printf "%12s %15s %12.2f\n", $1, $2, $3
}
END {
    printf "%12s %15s %12s\n", "----------", "-------------", "----------"
    printf "%12s %15s %12.2f\n", "", "æ€»è®¡", total
}' finance.csv
```

#### ğŸ”¢ **è¿›åˆ¶è½¬æ¢è¾“å‡º**


```bash
# æ•°å­—è¿›åˆ¶è½¬æ¢è¡¨
awk 'BEGIN {
    printf "%10s %10s %10s %10s\n", "åè¿›åˆ¶", "äºŒè¿›åˆ¶", "å…«è¿›åˆ¶", "åå…­è¿›åˆ¶"
    printf "%10s %10s %10s %10s\n", "------", "------", "------", "--------"
    
    for (i = 1; i <= 16; i++) {
        # æ¨¡æ‹ŸäºŒè¿›åˆ¶è¾“å‡ºï¼ˆawkæ²¡æœ‰%bï¼‰
        binary = ""
        n = i
        while (n > 0) {
            binary = (n % 2) binary
            n = int(n / 2)
        }
        if (binary == "") binary = "0"
        
        printf "%10d %10s %10o %10x\n", i, binary, i, i
    }
}'
```

### 9.5 printfé«˜çº§æŠ€å·§


#### ğŸ¯ **åŠ¨æ€æ ¼å¼æ§åˆ¶**


```bash
# æ ¹æ®æ•°æ®åŠ¨æ€è°ƒæ•´æ ¼å¼
awk '{
    # è®¡ç®—æœ€é•¿å­—ç¬¦ä¸²é•¿åº¦
    if (length($1) > max_len) {
        max_len = length($1)
    }
    names[NR] = $1
    scores[NR] = $2
}
END {
    # ä½¿ç”¨è®¡ç®—å‡ºçš„æœ€å¤§é•¿åº¦
    format = "%-" max_len "s %6.1f\n"
    
    for (i = 1; i <= NR; i++) {
        printf format, names[i], scores[i]
    }
}' data.txt
```

#### ğŸ¨ **å½©è‰²è¾“å‡ºï¼ˆç»ˆç«¯æ”¯æŒï¼‰**


```bash
# å¸¦é¢œè‰²çš„è¾“å‡º
awk '{
    if ($3 >= 90) {
        color = "\033[32m"  # ç»¿è‰²
    } else if ($3 >= 60) {
        color = "\033[33m"  # é»„è‰²  
    } else {
        color = "\033[31m"  # çº¢è‰²
    }
    reset = "\033[0m"       # é‡ç½®é¢œè‰²
    
    printf "%s%-10s %3d %6.1f%s\n", color, $1, $2, $3, reset
}' students.txt
```

#### ğŸ“ **ç™¾åˆ†æ¯”è¿›åº¦æ¡**


```bash
# æ˜¾ç¤ºå¤„ç†è¿›åº¦
awk '{
    current = NR
    total = 100  # å‡è®¾æ€»å…±100è¡Œ
    
    percent = int(current * 100 / total)
    bar_length = 20
    filled = int(percent * bar_length / 100)
    
    printf "\rè¿›åº¦: ["
    for (i = 1; i <= bar_length; i++) {
        if (i <= filled) {
            printf "="
        } else {
            printf " "
        }
    }
    printf "] %3d%%", percent
    
    # å¤„ç†å®Œæˆåæ¢è¡Œ
    if (current == total) {
        printf "\n"
    }
}' data.txt
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ¯ awkå·¥å…·æœ¬è´¨**
```
awk = æ¨¡å¼åŒ¹é… + åŠ¨ä½œæ‰§è¡Œ
â€¢ æ¨¡å¼(Pattern)ï¼šä»€ä¹ˆæ—¶å€™å¤„ç†
â€¢ åŠ¨ä½œ(Action)ï¼šå¤„ç†æ—¶åšä»€ä¹ˆ
â€¢ è‡ªåŠ¨å¾ªç¯ï¼šé€è¡Œå¤„ç†æ‰€æœ‰è¾“å…¥
```

**ğŸ”§ åŸºç¡€è¯­æ³•æ¡†æ¶**
- âœ… `awk 'pattern { action }' file`
- âœ… **å­—æ®µè®¿é—®**ï¼š`$1, $2, $3...`ï¼Œ`$0`æ˜¯æ•´è¡Œ
- âœ… **å†…ç½®å˜é‡**ï¼š`NR`è¡Œå·ã€`NF`å­—æ®µæ•°ã€`FS`åˆ†éš”ç¬¦
- âœ… **BEGIN/END**ï¼šå¤„ç†å‰åçš„åˆå§‹åŒ–å’Œæ”¶å°¾å·¥ä½œ

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å­—æ®µåˆ†éš”çš„æœ¬è´¨**
```
åŸç†ç†è§£ï¼š
awkæŠŠæ¯è¡Œæ–‡æœ¬æƒ³è±¡æˆè¡¨æ ¼çš„ä¸€è¡Œ
åˆ†éš”ç¬¦å†³å®šäº†å¦‚ä½•åˆ‡åˆ†"åˆ—"
$1, $2, $3... å°±æ˜¯å„ä¸ª"åˆ—"çš„å†…å®¹
```

**ğŸ”¹ æ•°ç»„çš„å¼ºå¤§ä¹‹å¤„**
```
awkæ•°ç»„ç‰¹ç‚¹ï¼š
â€¢ å…³è”æ•°ç»„ï¼šé”®å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²
â€¢ è‡ªåŠ¨æ‰©å®¹ï¼šä¸éœ€è¦é¢„å…ˆå£°æ˜å¤§å°
â€¢ ç»Ÿè®¡åˆ©å™¨ï¼šéå¸¸é€‚åˆè®¡æ•°å’Œåˆ†ç»„ç»Ÿè®¡
```

**ğŸ”¹ printfçš„æ ¼å¼åŒ–ä»·å€¼**
```
é€‰æ‹©åŸåˆ™ï¼š
â€¢ printï¼šå¿«é€Ÿè¾“å‡ºï¼Œæ ¼å¼ç®€å•
â€¢ printfï¼šç²¾ç¡®æ§åˆ¶ï¼Œä¸“ä¸šæŠ¥è¡¨
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ“Š é€‚ç”¨åœºæ™¯åˆ¤æ–­**
```
âœ… awkæ“…é•¿ï¼š
â€¢ æ–‡æœ¬æ•°æ®æå–å’Œç»Ÿè®¡
â€¢ æ—¥å¿—æ–‡ä»¶åˆ†æ
â€¢ CSVæ•°æ®å¤„ç†  
â€¢ ç”Ÿæˆæ ¼å¼åŒ–æŠ¥è¡¨
â€¢ ç®€å•æ•°æ®æ¸…æ´—

âŒ awkå±€é™ï¼š
â€¢ å¤æ‚çš„æ–‡æœ¬æ›¿æ¢ï¼ˆç”¨sedæ›´å¥½ï¼‰
â€¢ å¤§æ–‡ä»¶å¤„ç†ï¼ˆå†…å­˜é™åˆ¶ï¼‰
â€¢ å¤æ‚ç®—æ³•å®ç°ï¼ˆç”¨ä¸“é—¨è¯­è¨€ï¼‰
```

**ğŸ”§ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
- ğŸ”¸ **åˆç†ä½¿ç”¨BEGIN/END**ï¼šé¿å…é‡å¤åˆå§‹åŒ–
- ğŸ”¸ **åŠæ—¶è·³è¿‡æ— å…³è¡Œ**ï¼šç”¨`next`æå‰é€€å‡º
- ğŸ”¸ **é¿å…ä¸å¿…è¦çš„æ•°ç»„**ï¼šå†…å­˜å ç”¨è€ƒè™‘
- ğŸ”¸ **é€‰æ‹©åˆé€‚çš„åˆ†éš”ç¬¦**ï¼šæé«˜è§£ææ•ˆç‡

### 10.4 å­¦ä¹ è¿›é˜¶è·¯çº¿


**ğŸ“š åˆçº§æŒæ¡ï¼ˆå¿…é¡»ä¼šï¼‰**
- [x] ç†è§£awkåŸºæœ¬è¯­æ³•ç»“æ„
- [x] æŒæ¡å­—æ®µè®¿é—®å’Œå†…ç½®å˜é‡
- [x] ä¼šç”¨ç®€å•çš„æ¡ä»¶åˆ¤æ–­
- [x] èƒ½è¿›è¡ŒåŸºæœ¬çš„ç»Ÿè®¡è®¡ç®—

**ğŸ“ˆ ä¸­çº§åº”ç”¨ï¼ˆæ¨èä¼šï¼‰**
- [ ] ç†Ÿç»ƒä½¿ç”¨æ•°ç»„è¿›è¡Œåˆ†ç»„ç»Ÿè®¡
- [ ] ç¼–å†™å¤æ‚çš„awkè„šæœ¬æ–‡ä»¶
- [ ] æŒæ¡printfæ ¼å¼åŒ–è¾“å‡º
- [ ] ç»“åˆæ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ–‡æœ¬å¤„ç†

**ğŸš€ é«˜çº§æŠ€å·§ï¼ˆé€‰æ‹©æ€§ï¼‰**
- [ ] è‡ªå®šä¹‰å‡½æ•°ç¼–å†™
- [ ] ä¸å…¶ä»–å‘½ä»¤ç»„åˆä½¿ç”¨
- [ ] å¤„ç†å¤§æ•°æ®é‡æ–‡ä»¶çš„æŠ€å·§
- [ ] awkåœ¨è¿ç»´è‡ªåŠ¨åŒ–ä¸­çš„åº”ç”¨

### 10.5 å¸¸è§é—®é¢˜ä¸è§£å†³


**â“ å¸¸è§å›°æƒ‘**

**Q1ï¼šä¸ºä»€ä¹ˆå­—æ®µç¼–å·ä»$1å¼€å§‹ï¼Ÿ**
```
Aï¼š$0ä»£è¡¨æ•´è¡Œï¼Œ$1æ˜¯ç¬¬ä¸€ä¸ªå­—æ®µ
è¿™æ ·è®¾è®¡æ›´ç¬¦åˆ"æ•´ä½“-éƒ¨åˆ†"çš„é€»è¾‘
```

**Q2ï¼šæ•°ç»„ç´¢å¼•å¯ä»¥æ˜¯å°æ•°å—ï¼Ÿ**
```
Aï¼šå¯ä»¥ï¼Œawkä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä½œä¸ºé”®
ä½†å»ºè®®ä½¿ç”¨æ•´æ•°æˆ–æœ‰æ„ä¹‰çš„å­—ç¬¦ä¸²
```

**Q3ï¼šå¦‚ä½•å¤„ç†åŒ…å«ç©ºæ ¼çš„å­—æ®µï¼Ÿ**
```
Aï¼šä½¿ç”¨ä¸åŒçš„å­—æ®µåˆ†éš”ç¬¦ï¼Œæˆ–è€…ç”¨åŒå¼•å·åŒ…å›´
awk -F'"' å¯ä»¥å¤„ç†CSVæ ¼å¼çš„å¼•å·å­—æ®µ
```

### 10.6 å®ç”¨å‘½ä»¤é€ŸæŸ¥


**ğŸš€ ä¸€åˆ†é’ŸæŒæ¡**
```bash
# 1. åŸºæœ¬è¾“å‡º
awk '{ print $1 }' file.txt                    # æ‰“å°ç¬¬ä¸€åˆ—
awk '{ print $1, $3 }' file.txt               # æ‰“å°ç¬¬1å’Œç¬¬3åˆ—

# 2. æ¡ä»¶ç­›é€‰  
awk '$3 > 100' file.txt                       # ç¬¬3åˆ—å¤§äº100çš„è¡Œ
awk '/error/ { print }' log.txt               # åŒ…å«errorçš„è¡Œ

# 3. ç»Ÿè®¡è®¡ç®—
awk '{ sum += $1 } END { print sum }' file.txt      # æ±‚ç¬¬1åˆ—æ€»å’Œ
awk '{ count++ } END { print count }' file.txt      # ç»Ÿè®¡è¡Œæ•°

# 4. æ ¼å¼åŒ–è¾“å‡º
awk '{ printf "%-10s %5d\n", $1, $2 }' file.txt    # æ ¼å¼åŒ–è¡¨æ ¼
```

**ğŸ’¡ è®°å¿†å£è¯€**
> awké€è¡Œè‡ªåŠ¨è·‘ï¼ŒpatternåŠ actionå¥½
> å­—æ®µåˆ†éš”dollaræ ‡ï¼ŒBEGINå’ŒENDåˆ«å¿˜æ‰
> æ•°ç»„ç»Ÿè®¡æœ€æ‹¿æ‰‹ï¼Œprintfæ ¼å¼åŒ–çœŸæ£’
> æ–‡æœ¬å¤„ç†å°èƒ½æ‰‹ï¼Œæ—¥å¿—åˆ†æå°‘ä¸äº†

**æ ¸å¿ƒè®°å¿†**ï¼š
- awkæ˜¯**è‡ªåŠ¨å¾ªç¯å¤„ç†**æ¯ä¸€è¡Œçš„å·¥å…·
- **å­—æ®µè®¿é—®**ç”¨$ç¬¦å·ï¼Œ$0æ˜¯æ•´è¡Œï¼Œ$1æ˜¯ç¬¬ä¸€åˆ—
- **æ•°ç»„ç»Ÿè®¡**æ˜¯awkçš„å¼ºé¡¹ï¼Œå…³è”æ•°ç»„ç‰¹åˆ«å¥½ç”¨
- **BEGIN/END**åˆ†åˆ«åœ¨å¤„ç†å‰åæ‰§è¡Œä¸€æ¬¡
- å­¦ä¼šawkï¼Œæ–‡æœ¬å¤„ç†äº‹åŠåŠŸå€ï¼