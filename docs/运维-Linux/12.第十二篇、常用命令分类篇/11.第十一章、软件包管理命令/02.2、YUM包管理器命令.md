---
title: 2、YUM包管理器命令
---
## 📚 目录


1. [YUM包管理器基础概念](#1-YUM包管理器基础概念)
2. [yum基本命令语法结构](#2-yum基本命令语法结构)
3. [软件包搜索与信息查询](#3-软件包搜索与信息查询)
4. [安装卸载更新操作](#4-安装卸载更新操作)
5. [仓库管理命令](#5-仓库管理命令)
6. [包组管理功能](#6-包组管理功能)
7. [历史记录查看与回滚](#7-历史记录查看与回滚)
8. [本地包安装](#8-本地包安装)
9. [依赖关系解析与处理](#9-依赖关系解析与处理)
10. [核心要点总结](#10-核心要点总结)

---

# 🎯 **学习路径导航**


**前置知识**：需要掌握Linux基础命令、软件包概念 → **当前内容**：YUM包管理器 → **后续学习**：建议学习DNF包管理器、RPM底层操作

⏱️ **预计学习时间**：本章预计45分钟 | 实践练习20分钟

🟢 **难度等级**：入门级 - 系统管理员必备技能

---

## 1. 📦 YUM包管理器基础概念



### 1.1 什么是YUM包管理器



**🔸 核心定义**
YUM (Yellowdog Updater Modified) 是Red Hat系Linux发行版的软件包管理工具。它的作用就像手机上的应用商店，让你可以方便地安装、更新、删除软件。

**💡 通俗理解**
想象YUM就像一个智能助手：
- **传统方式**：你要手动下载软件、解决依赖问题，就像自己组装家具
- **YUM方式**：告诉它你要什么软件，它自动帮你搞定一切，就像网购包安装服务

### 1.2 YUM的核心作用



**🎯 主要功能**
```
🔸 软件安装：一条命令安装复杂软件
🔸 依赖解析：自动处理软件包依赖关系
🔸 版本管理：轻松更新和回退软件版本
🔸 仓库管理：从多个软件源获取软件包
🔸 系统维护：保持系统软件的最新状态
```

### 1.3 YUM vs 其他包管理器



| **包管理器** | **适用系统** | **特点** | **学习难度** |
|-------------|-------------|----------|-------------|
| **YUM** | `CentOS/RHEL 7及以下` | `成熟稳定，生态丰富` | ⭐⭐ |
| **DNF** | `CentOS 8+/Fedora` | `YUM的升级版，性能更好` | ⭐⭐ |
| **APT** | `Ubuntu/Debian` | `依赖处理优秀` | ⭐⭐ |
| **RPM** | `Red Hat系` | `底层工具，功能基础` | ⭐⭐⭐ |

---

## 2. ⚙️ yum基本命令语法结构



### 2.1 标准语法格式



**📋 基础语法模板**
```
yum [选项] [命令] [软件包名称]
```

**🔧 常用选项说明**
- **`-y`**：自动回答"yes"，批量操作必备
- **`-q`**：静默模式，减少输出信息
- **`--nogpgcheck`**：跳过GPG签名检查
- **`--enablerepo`**：临时启用指定仓库
- **`--disablerepo`**：临时禁用指定仓库

### 2.2 命令执行权限



**⚠️ 重要提醒**
```
大部分YUM命令需要root权限！

正确方式：
sudo yum install nginx    ✅
yum install nginx         ❌ 权限不足

为什么需要root权限？
因为安装软件会修改系统文件和目录
```

### 2.3 命令返回状态



**📊 返回值含义**
- **0**：命令执行成功
- **1**：一般性错误（如包未找到）
- **100**：部分成功（部分包安装失败）

---

## 3. 🔍 软件包搜索与信息查询



### 3.1 软件包搜索命令



**🔎 search - 按关键词搜索**

想找某个软件但不知道确切名称？用search命令：

```bash
# 搜索包含"web"关键词的软件包

yum search web

# 搜索Apache相关软件

yum search apache
```

**💡 搜索技巧**
- 使用部分关键词，不需要完整包名
- 可以搜索描述信息，不仅仅是包名
- 支持多个关键词组合搜索

**🔎 list - 列出软件包**

查看系统中的软件包状态：

```bash
# 列出所有可用软件包

yum list available

# 列出已安装软件包  

yum list installed

# 列出可更新软件包

yum list updates

# 查看特定软件包

yum list nginx*
```

### 3.2 软件包详细信息查询



**📋 info - 查看包详情**

在安装软件前，先了解软件的详细信息：

```bash
# 查看nginx软件包详细信息

yum info nginx
```

**输出信息解读：**
- **Name**：软件包名称
- **Version**：版本号
- **Size**：安装后大小
- **Description**：软件描述
- **Dependencies**：依赖关系

**🔍 provides - 查找文件所属包**

想知道某个命令或文件来自哪个软件包？

```bash
# 查看/usr/bin/git命令来自哪个包

yum provides /usr/bin/git

# 查看哪个包提供某个库文件

yum provides "*/libssl.so*"
```

> 💡 **学习技巧**：遇到"command not found"错误时，用provides命令找到对应的包再安装

---

## 4. 📥 安装卸载更新操作



### 4.1 软件包安装



**📦 install - 安装软件包**

这是YUM最常用的命令，用于安装新软件：

```bash
# 安装单个软件包

sudo yum install nginx

# 一次安装多个软件包

sudo yum install git vim wget

# 从特定仓库安装

sudo yum --enablerepo=epel install htop
```

**⚡ 快速安装技巧**
- 添加 `-y` 选项跳过确认：`sudo yum install -y nginx`
- 支持通配符：`sudo yum install python3*`

### 4.2 软件包更新



**🔄 update - 更新软件包**

保持系统软件最新是安全的重要措施：

```bash
# 更新所有软件包（系统大更新）

sudo yum update

# 更新特定软件包

sudo yum update nginx

# 只检查更新，不实际执行

yum check-update
```

**⚠️ 更新注意事项**
```
生产环境更新建议：
1. 先在测试环境验证
2. 避免更新内核等关键组件
3. 做好系统备份
4. 选择业务低峰期执行
```

**🆙 upgrade vs update 的区别**
- **update**：更新现有软件包
- **upgrade**：不仅更新，还会删除过时的包

### 4.3 软件包卸载



**🗑️ remove - 删除软件包**

安全地移除不需要的软件：

```bash
# 删除单个软件包

sudo yum remove nginx

# 删除多个相关软件包  

sudo yum remove httpd httpd-tools
```

**🧹 autoremove - 清理孤儿包**

删除因依赖而安装但现在不再需要的软件包：

```bash
# 自动清理无用的依赖包

sudo yum autoremove
```

> ⚠️ **安全提醒**：删除软件包前仔细查看依赖关系，避免误删重要软件

---

## 5. 🗂️ 仓库管理命令



### 5.1 查看仓库状态



**📋 repolist - 仓库列表**

软件仓库就像不同的应用商店，YUM从这些仓库获取软件包：

```bash
# 查看启用的仓库

yum repolist

# 查看所有仓库（包括禁用的）

yum repolist all

# 查看仓库详细信息

yum repolist -v
```

**📊 仓库信息解读**
- **repo id**：仓库标识符
- **repo name**：仓库名称  
- **status**：包含的软件包数量

### 5.2 仓库缓存管理



**💾 缓存机制说明**

YUM会将软件包信息缓存到本地，提高后续操作速度。但有时需要手动管理这些缓存。

**🧹 clean - 清理缓存**

```bash
# 清理软件包缓存

sudo yum clean packages

# 清理仓库元数据缓存

sudo yum clean metadata

# 清理所有缓存（推荐）

sudo yum clean all
```

**📱 makecache - 建立缓存**

```bash
# 下载并缓存所有仓库的元数据

sudo yum makecache

# 快速模式，只缓存必要信息

sudo yum makecache fast
```

> 💡 **最佳实践**：更换软件源或网络环境变化后，先执行 `yum clean all && yum makecache` 刷新缓存

### 5.3 仓库配置文件



**📁 仓库配置位置**
```
系统仓库配置：/etc/yum.repos.d/
配置文件格式：*.repo

常见仓库文件：
- CentOS-Base.repo    # 基础仓库
- epel.repo          # EPEL扩展仓库  
- CentOS-Media.repo  # 光盘仓库
```

---

## 6. 👥 包组管理功能



### 6.1 包组概念理解



**🔸 什么是包组**
包组（Package Group）是一组相关软件包的集合。就像买电脑时的"办公套装"、"游戏套装"一样，包组让你能一次性安装某个功能所需的所有软件。

**💡 包组的优势**
- **简化安装**：一条命令安装整套软件
- **功能完整**：确保相关软件版本兼容
- **节省时间**：避免逐个查找和安装

### 6.2 包组查看操作



**👀 grouplist - 查看包组**

```bash
# 查看所有可用包组

yum grouplist

# 查看已安装的包组

yum grouplist installed

# 查看特定类别的包组

yum grouplist "Development*"
```

**🔍 groupinfo - 包组详情**

```bash
# 查看"开发工具"包组包含的软件

yum groupinfo "Development Tools"

# 查看Web服务器包组的详细信息

yum groupinfo "Web Server"
```

### 6.3 包组安装和卸载



**📦 groupinstall - 安装包组**

```bash
# 安装开发工具包组（C/C++编译环境）

sudo yum groupinstall "Development Tools"

# 安装Web服务器包组

sudo yum groupinstall "Web Server"
```

**🗑️ groupremove - 删除包组**

```bash
# 删除开发工具包组

sudo yum groupremove "Development Tools"
```

**📊 常用包组推荐**

| **包组名称** | **用途** | **包含软件** |
|-------------|----------|-------------|
| **"Development Tools"** | `C/C++开发` | `gcc, make, autoconf等` |
| **"Web Server"** | `Web服务` | `Apache, 相关模块` |
| **"System Administration Tools"** | `系统管理` | `各种管理工具` |

---

## 7. 📚 历史记录查看与回滚



### 7.1 YUM操作历史



**🕐 history - 查看历史记录**

YUM会记录每次操作，这对于系统维护和问题排查非常有用：

```bash
# 查看操作历史列表

yum history

# 查看特定操作的详情

yum history info 5

# 查看某个包的操作历史

yum history list nginx
```

**📋 历史记录信息解读**
- **ID**：操作编号
- **Command Line**：执行的命令
- **Date and time**：操作时间
- **Action(s)**：执行的动作
- **Altered**：影响的包数量

### 7.2 历史操作回滚



**🔄 history undo - 撤销操作**

发现安装的软件有问题？可以撤销之前的操作：

```bash
# 撤销第5次操作

sudo yum history undo 5

# 重做第5次操作  

sudo yum history redo 5
```

**⚠️ 回滚注意事项**
```
回滚操作的限制：
1. 只能撤销安装/删除操作
2. 不能撤销已经被其他软件依赖的包
3. 系统核心包的操作要谨慎回滚
4. 建议先用info查看操作详情再回滚
```

### 7.3 历史记录管理



**🧹 清理历史记录**

```bash
# 查看历史记录数据库信息

yum history stats

# 清理指定事务的历史

sudo yum history delete 1-10
```

---

## 8. 💿 本地包安装



### 8.1 本地RPM包安装



**📦 localinstall - 安装本地包**

有时你需要安装从官网下载的RPM包，或者内网环境下的本地包：

```bash
# 安装本地RPM包

sudo yum localinstall package.rpm

# 安装多个本地包

sudo yum localinstall *.rpm

# 安装并解决依赖（从仓库下载依赖包）

sudo yum localinstall package.rpm
```

**💡 localinstall的优势**
相比直接用rpm命令，yum localinstall会：
- 自动解析依赖关系
- 从在线仓库下载缺失的依赖包
- 提供更友好的错误提示

### 8.2 常见本地安装场景



**🌐 下载但不安装**

```bash
# 只下载包到当前目录，不安装

sudo yum install --downloadonly --downloaddir=. nginx

# 下载包及其所有依赖

sudo yum install --downloadonly --downloaddir=./packages nginx
```

**🔧 离线环境安装**

```bash
# 第一步：在有网络的机器上下载

sudo yum install --downloadonly --downloaddir=./offline-packages nginx

# 第二步：将packages目录复制到离线机器


# 第三步：在离线机器上安装

sudo yum localinstall offline-packages/*.rpm
```

---

## 9. 🔗 依赖关系解析与处理



### 9.1 依赖关系查看



**🔍 deplist - 查看依赖**

了解软件包的依赖关系对系统管理很重要：

```bash
# 查看nginx包的依赖关系

yum deplist nginx

# 查看已安装包的依赖

yum deplist installed_package
```

**🌳 依赖树可视化**

虽然YUM没有内置依赖树显示，但可以用脚本实现：

```bash
# 递归显示依赖关系

yum deplist nginx | grep dependency | awk '{print $2}' | sort -u
```

### 9.2 依赖问题解决



**⚠️ 常见依赖问题**

**问题1：循环依赖**
```
错误现象：PackageA需要PackageB，但PackageB也需要PackageA
解决方法：一次性安装两个包
sudo yum install packageA packageB
```

**问题2：版本冲突**
```
错误现象：新包要求的依赖版本与已安装版本冲突
解决方法：
1. 更新冲突的依赖包
2. 使用--skip-broken跳过问题包
3. 降级到兼容版本
```

**问题3：仓库中无依赖包**
```
解决方法：
1. 启用额外仓库（如EPEL）
2. 手动下载安装依赖
3. 编译安装依赖包
```

### 9.3 依赖管理工具



**🛠️ yum-utils 扩展工具**

```bash
# 安装YUM扩展工具集

sudo yum install yum-utils

# 查看包依赖关系

repoquery --requires nginx

# 查看哪些包依赖指定包

repoquery --whatrequires glibc

# 下载源码包

yumdownloader --source nginx
```

---

## 10. 📋 核心要点总结



### 10.1 必须掌握的核心概念



```
🔸 YUM本质：智能的软件包管理助手，自动解决依赖关系
🔸 基础语法：yum [选项] [命令] [包名]，大部分操作需要sudo
🔸 核心功能：搜索、安装、更新、删除软件包
🔸 仓库概念：软件包的来源，类似应用商店
🔸 包组管理：批量管理相关软件的集合
🔸 历史记录：可以查看和回滚YUM操作
```

### 10.2 关键理解要点



**🔹 为什么YUM比RPM好用**
```
RPM问题：
- 手动解决依赖关系
- 需要找到所有依赖包
- 安装顺序要求严格

YUM优势：
- 自动依赖解析
- 从仓库自动下载
- 智能安装顺序
```

**🔹 仓库管理的重要性**
```
仓库就是软件源：
- 官方仓库：稳定但软件较少
- EPEL仓库：扩展包，软件丰富
- 第三方仓库：最新版本，需注意安全
```

### 10.3 实际应用场景



**🎯 日常运维任务**
- **系统初始化**：安装常用开发工具包组
- **服务部署**：安装Web服务器、数据库等
- **安全维护**：定期更新系统补丁
- **问题排查**：查看安装历史，回滚有问题的操作

**🛠️ 最佳实践建议**
```
安全习惯：
- 安装前先search和info了解软件
- 重要操作前做好系统备份
- 定期clean清理缓存
- 使用history记录重要操作

效率提升：
- 使用-y选项避免重复确认
- 掌握通配符和组合操作
- 善用包组批量安装
- 配置合适的软件源
```

### 10.4 常用命令速查卡



| **功能** | **命令示例** | **说明** |
|---------|-------------|----------|
| **搜索软件** | `yum search nginx` | `按关键词搜索` |
| **查看信息** | `yum info nginx` | `显示包详细信息` |
| **安装软件** | `sudo yum install nginx` | `安装指定软件包` |
| **更新软件** | `sudo yum update` | `更新所有或指定软件` |
| **删除软件** | `sudo yum remove nginx` | `卸载指定软件包` |
| **查看仓库** | `yum repolist` | `显示可用软件仓库` |
| **清理缓存** | `sudo yum clean all` | `清理所有缓存数据` |
| **查看历史** | `yum history` | `显示操作历史记录` |

### 10.5 学习检查清单



- [ ] 理解YUM和RPM的区别和联系
- [ ] 掌握软件包的搜索和查看方法  
- [ ] 能够熟练安装、更新、删除软件
- [ ] 了解仓库管理和缓存机制
- [ ] 会使用包组进行批量管理
- [ ] 能够查看和回滚操作历史
- [ ] 理解依赖关系的处理方法

**🔑 核心记忆口诀**
> YUM管理很智能，搜索安装一条龙
> 仓库缓存要维护，包组历史助运维
> 依赖解析最省心，系统管理效率高

**💡 进阶学习方向**
- **DNF包管理器**：YUM的下一代版本
- **自定义软件仓库**：企业内部源管理  
- **RPM包制作**：深入理解包管理机制
- **容器化部署**：现代软件分发方式