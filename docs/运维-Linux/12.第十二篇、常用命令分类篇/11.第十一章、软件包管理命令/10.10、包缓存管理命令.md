---
title: 10ã€åŒ…ç¼“å­˜ç®¡ç†å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [åŒ…ç¼“å­˜åŸºæœ¬æ¦‚å¿µ](#1-åŒ…ç¼“å­˜åŸºæœ¬æ¦‚å¿µ)
2. [ç¼“å­˜ç›®å½•ç»“æ„è¯¦è§£](#2-ç¼“å­˜ç›®å½•ç»“æ„è¯¦è§£)
3. [ç¼“å­˜æ¸…ç†ä¸ç©ºé—´å›æ”¶](#3-ç¼“å­˜æ¸…ç†ä¸ç©ºé—´å›æ”¶)
4. [ç¦»çº¿åŒ…ç¼“å­˜åˆ©ç”¨](#4-ç¦»çº¿åŒ…ç¼“å­˜åˆ©ç”¨)
5. [ç¼“å­˜æ•°æ®åº“é‡å»º](#5-ç¼“å­˜æ•°æ®åº“é‡å»º)
6. [å…ƒæ•°æ®åŒæ­¥ä¸æ›´æ–°](#6-å…ƒæ•°æ®åŒæ­¥ä¸æ›´æ–°)
7. [ç¼“å­˜å®Œæ•´æ€§éªŒè¯](#7-ç¼“å­˜å®Œæ•´æ€§éªŒè¯)
8. [ç½‘ç»œç¼“å­˜ä»£ç†é…ç½®](#8-ç½‘ç»œç¼“å­˜ä»£ç†é…ç½®)
9. [ç¼“å­˜æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#9-ç¼“å­˜æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“¦ åŒ…ç¼“å­˜åŸºæœ¬æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯åŒ…ç¼“å­˜

**åŒ…ç¼“å­˜**å°±åƒä½ çš„"è½¯ä»¶ä»“åº“"ï¼Œå­˜æ”¾ç€å·²ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶ï¼Œé¿å…é‡å¤ä¸‹è½½ç›¸åŒè½¯ä»¶ã€‚

```
ç”Ÿæ´»åŒ–ç±»æ¯”ï¼š
åŒ…ç¼“å­˜ = å®¶é‡Œçš„å‚¨ç‰©é—´
â€¢ ä¹°è¿‡çš„ä¸œè¥¿å…ˆå­˜å‚¨ç‰©é—´
â€¢ ä¸‹æ¬¡éœ€è¦æ—¶ç›´æ¥ä»å‚¨ç‰©é—´æ‹¿
â€¢ ä¸ç”¨æ¯æ¬¡éƒ½è·‘å•†åº—ä¹°
â€¢ å®šæœŸæ¸…ç†è¿‡æœŸç‰©å“
```

**ğŸ”¸ æ ¸å¿ƒä½œç”¨**
- **èŠ‚çœç½‘ç»œå¸¦å®½**ï¼šé¿å…é‡å¤ä¸‹è½½ç›¸åŒè½¯ä»¶åŒ…
- **åŠ é€Ÿå®‰è£…è¿‡ç¨‹**ï¼šæœ¬åœ°ç¼“å­˜æ¯”ç½‘ç»œä¸‹è½½å¿«å¾—å¤š
- **ç¦»çº¿å®‰è£…æ”¯æŒ**ï¼šæ–­ç½‘æ—¶ä¹Ÿèƒ½å®‰è£…å·²ç¼“å­˜çš„è½¯ä»¶
- **ç³»ç»Ÿæ¢å¤ä¾¿åˆ©**ï¼šé‡è£…ç³»ç»Ÿæ—¶å¿«é€Ÿæ¢å¤ç¯å¢ƒ

### 1.2 ä¸»æµåŒ…ç®¡ç†å™¨ç¼“å­˜æœºåˆ¶


| **ç³»ç»Ÿç±»å‹** | **åŒ…ç®¡ç†å™¨** | **ç¼“å­˜ç‰¹ç‚¹** | **å…¸å‹åº”ç”¨** |
|-------------|-------------|-------------|-------------|
| ğŸ”´ **Red Hatç³»** | `yum/dnf` | åˆ†å±‚ç¼“å­˜ï¼Œæ”¯æŒå¤šä»“åº“ | CentOSã€RHELã€Fedora |
| ğŸŸ£ **Debianç³»** | `apt` | æ‰å¹³åŒ–ç¼“å­˜ï¼Œç‰ˆæœ¬ç®¡ç†å¼º | Ubuntuã€Debian |
| ğŸŸ¢ **Archç³»** | `pacman` | æ»šåŠ¨æ›´æ–°ç¼“å­˜ï¼Œå‹ç¼©é«˜æ•ˆ | Arch Linuxã€Manjaro |
| ğŸ”µ **SUSEç³»** | `zypper` | å¢é‡ç¼“å­˜ï¼Œå¿«ç…§æ”¯æŒ | openSUSEã€SLES |

---

## 2. ğŸ“ ç¼“å­˜ç›®å½•ç»“æ„è¯¦è§£


### 2.1 APTç¼“å­˜ç›®å½•ç»“æ„ï¼ˆDebian/Ubuntuï¼‰


```
/var/cache/apt/
â”œâ”€â”€ archives/                    â† è½¯ä»¶åŒ…æ–‡ä»¶å­˜å‚¨
â”‚   â”œâ”€â”€ *.deb                   â† å·²ä¸‹è½½çš„debåŒ…
â”‚   â”œâ”€â”€ partial/                â† æ­£åœ¨ä¸‹è½½çš„ä¸´æ—¶æ–‡ä»¶
â”‚   â””â”€â”€ lock                    â† ä¸‹è½½é”æ–‡ä»¶
â”œâ”€â”€ srcpkgcache.bin            â† æºåŒ…ç¼“å­˜æ•°æ®åº“
â”œâ”€â”€ pkgcache.bin               â† åŒ…ä¿¡æ¯ç¼“å­˜æ•°æ®åº“
â””â”€â”€ apt-file/                  â† apt-fileå‘½ä»¤ç¼“å­˜
```

**ğŸ”¸ ç›®å½•å«ä¹‰è¯¦è§£**
- **archives/**ï¼šå­˜æ”¾æ‰€æœ‰`.deb`è½¯ä»¶åŒ…æ–‡ä»¶çš„åœ°æ–¹
- **partial/**ï¼šä¸‹è½½è¿‡ç¨‹ä¸­çš„ä¸´æ—¶å­˜å‚¨ï¼Œä¸‹è½½å®Œæˆåç§»åˆ°archives
- **srcpkgcache.bin**ï¼šæºç åŒ…çš„ç´¢å¼•ç¼“å­˜ï¼ŒåŠ é€Ÿæœç´¢
- **pkgcache.bin**ï¼šäºŒè¿›åˆ¶åŒ…çš„ç´¢å¼•ç¼“å­˜ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦

### 2.2 YUM/DNFç¼“å­˜ç›®å½•ç»“æ„ï¼ˆRed Hatç³»ï¼‰


```
/var/cache/yum/ æˆ– /var/cache/dnf/
â”œâ”€â”€ x86_64/                     â† CPUæ¶æ„ç›®å½•
â”‚   â”œâ”€â”€ 7/                     â† ç³»ç»Ÿç‰ˆæœ¬ç›®å½•
â”‚   â”‚   â”œâ”€â”€ base/              â† åŸºç¡€ä»“åº“ç¼“å­˜
â”‚   â”‚   â”‚   â”œâ”€â”€ packages/      â† RPMåŒ…æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ repodata/      â† ä»“åº“å…ƒæ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ metalink.xml   â† é•œåƒç«™ç‚¹ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ updates/           â† æ›´æ–°ä»“åº“ç¼“å­˜
â”‚   â”‚   â””â”€â”€ extras/            â† é¢å¤–ä»“åº“ç¼“å­˜
â”‚   â””â”€â”€ timedhosts.txt         â† é•œåƒå“åº”æ—¶é—´è®°å½•
```

### 2.3 Pacmanç¼“å­˜ç›®å½•ï¼ˆArch Linuxï¼‰


```
/var/cache/pacman/
â”œâ”€â”€ pkg/                       â† è½¯ä»¶åŒ…ç¼“å­˜ç›®å½•
â”‚   â”œâ”€â”€ *.pkg.tar.xz          â† å·²ä¸‹è½½çš„åŒ…æ–‡ä»¶
â”‚   â””â”€â”€ *.pkg.tar.xz.sig      â† åŒ…ç­¾åæ–‡ä»¶
â””â”€â”€ sync/                     â† æ•°æ®åº“åŒæ­¥ç¼“å­˜
    â”œâ”€â”€ core.db               â† æ ¸å¿ƒä»“åº“æ•°æ®åº“
    â”œâ”€â”€ extra.db              â† æ‰©å±•ä»“åº“æ•°æ®åº“
    â””â”€â”€ community.db          â† ç¤¾åŒºä»“åº“æ•°æ®åº“
```

---

## 3. ğŸ§¹ ç¼“å­˜æ¸…ç†ä¸ç©ºé—´å›æ”¶


### 3.1 APTç¼“å­˜æ¸…ç†å‘½ä»¤


**ğŸ”¸ åŸºæœ¬æ¸…ç†æ“ä½œ**
```bash
# æ¸…ç†æ‰€æœ‰å·²ä¸‹è½½çš„åŒ…æ–‡ä»¶
sudo apt clean

# ä»…æ¸…ç†è¿‡æ—¶çš„åŒ…æ–‡ä»¶ï¼ˆæ¨èï¼‰
sudo apt autoclean

# æ¸…ç†å­¤ç«‹çš„åŒ…æ–‡ä»¶
sudo apt autoremove --purge
```

**ğŸ’¡ æ¸…ç†ç­–ç•¥è¯´æ˜**
```
apt cleanï¼š
â€¢ åˆ é™¤ /var/cache/apt/archives/ ä¸‹æ‰€æœ‰æ–‡ä»¶
â€¢ é‡Šæ”¾ç©ºé—´æœ€å¤šï¼Œä½†å¤±å»ç¦»çº¿å®‰è£…èƒ½åŠ›
â€¢ é€‚åˆï¼šç£ç›˜ç©ºé—´ä¸¥é‡ä¸è¶³æ—¶ä½¿ç”¨

apt autocleanï¼š
â€¢ åªåˆ é™¤ä¸èƒ½å†ä¸‹è½½çš„æ—§ç‰ˆæœ¬åŒ…
â€¢ ä¿ç•™å½“å‰ä»“åº“ä¸­å­˜åœ¨çš„åŒ…æ–‡ä»¶
â€¢ é€‚åˆï¼šæ—¥å¸¸ç»´æŠ¤ï¼Œå¹³è¡¡ç©ºé—´å’ŒåŠŸèƒ½
```

**ğŸ“Š ç©ºé—´å›æ”¶æ•ˆæœæŸ¥çœ‹**
```bash
# æŸ¥çœ‹ç¼“å­˜å ç”¨ç©ºé—´
du -sh /var/cache/apt/archives/

# æ¸…ç†å‰åå¯¹æ¯”
echo "æ¸…ç†å‰ï¼š"; du -sh /var/cache/apt/archives/
sudo apt autoclean
echo "æ¸…ç†åï¼š"; du -sh /var/cache/apt/archives/
```

### 3.2 YUM/DNFç¼“å­˜æ¸…ç†


**ğŸ”¸ DNFæ¸…ç†å‘½ä»¤**
```bash
# æ¸…ç†æ‰€æœ‰ç¼“å­˜
sudo dnf clean all

# åˆ†ç±»æ¸…ç†
sudo dnf clean packages     # æ¸…ç†åŒ…ç¼“å­˜
sudo dnf clean metadata     # æ¸…ç†å…ƒæ•°æ®ç¼“å­˜
sudo dnf clean expire-cache # æ¸…ç†è¿‡æœŸç¼“å­˜
```

**ğŸ”¸ æ¸…ç†æ•ˆæœå¯¹æ¯”**

| **æ¸…ç†ç±»å‹** | **æ¸…ç†å†…å®¹** | **é‡Šæ”¾ç©ºé—´** | **å½±å“** |
|-------------|-------------|-------------|---------|
| `packages` | RPMåŒ…æ–‡ä»¶ | **é«˜** | å¤±å»ç¦»çº¿å®‰è£… |
| `metadata` | ä»“åº“å…ƒæ•°æ® | **ä¸­** | éœ€è¦é‡æ–°ä¸‹è½½ç´¢å¼• |
| `expire-cache` | è¿‡æœŸç¼“å­˜ | **ä½** | å‡ ä¹æ— å½±å“ |
| `all` | æ‰€æœ‰ç¼“å­˜ | **æœ€é«˜** | é‡å»ºç¼“å­˜è¾ƒæ…¢ |

### 3.3 è‡ªåŠ¨åŒ–ç¼“å­˜æ¸…ç†ç­–ç•¥


**ğŸ”¸ åˆ›å»ºæ¸…ç†è„šæœ¬**
```bash
#!/bin/bash
# åŒ…ç¼“å­˜æ™ºèƒ½æ¸…ç†è„šæœ¬

# æ£€æŸ¥ç³»ç»Ÿç±»å‹
if command -v apt >/dev/null 2>&1; then
    PKG_MANAGER="apt"
elif command -v dnf >/dev/null 2>&1; then
    PKG_MANAGER="dnf"
elif command -v pacman >/dev/null 2>&1; then
    PKG_MANAGER="pacman"
fi

# æ‰§è¡Œç›¸åº”çš„æ¸…ç†
case $PKG_MANAGER in
    "apt")
        echo "ğŸ§¹ æ¸…ç†APTç¼“å­˜..."
        sudo apt autoclean
        sudo apt autoremove
        ;;
    "dnf")
        echo "ğŸ§¹ æ¸…ç†DNFç¼“å­˜..."
        sudo dnf clean expire-cache
        sudo dnf autoremove
        ;;
    "pacman")
        echo "ğŸ§¹ æ¸…ç†Pacmanç¼“å­˜..."
        sudo paccache -r  # ä¿ç•™æœ€è¿‘3ä¸ªç‰ˆæœ¬
        ;;
esac
```

---

## 4. ğŸ’¾ ç¦»çº¿åŒ…ç¼“å­˜åˆ©ç”¨


### 4.1 ç¦»çº¿å®‰è£…å‡†å¤‡


**ğŸ”¸ åœºæ™¯è¯´æ˜**
```
ç¦»çº¿ç¯å¢ƒå¸¸è§æƒ…å†µï¼š
â€¢ æœåŠ¡å™¨åœ¨å†…ç½‘ï¼Œæ— æ³•è®¿é—®äº’è”ç½‘
â€¢ ç½‘ç»œä¸ç¨³å®šï¼Œç»å¸¸æ–­ç½‘
â€¢ æ‰¹é‡éƒ¨ç½²ï¼Œéœ€è¦ç›¸åŒè½¯ä»¶åŒ…
â€¢ åº”æ€¥æ¢å¤ï¼Œå¿«é€Ÿæ¢å¤ç³»ç»Ÿç¯å¢ƒ
```

**ğŸ”¸ APTç¦»çº¿åŒ…å‡†å¤‡**
```bash
# åœ¨è”ç½‘æœºå™¨ä¸Šä¸‹è½½åŒ…ä½†ä¸å®‰è£…
apt download package-name

# ä¸‹è½½åŒ…åŠå…¶ä¾èµ–
apt download package-name $(apt-cache depends --recurse --no-recommends --no-suggests --no-conflicts --no-breaks --no-replaces --no-enhances package-name | grep "^\w" | sort -u)

# åˆ¶ä½œç¦»çº¿å®‰è£…åŒ…
mkdir offline-packages
cd offline-packages
apt download nginx mysql-server php-fpm
```

### 4.2 ç¼“å­˜åŒ…ä¼ è¾“ä¸ä½¿ç”¨


**ğŸ”¸ ç¼“å­˜æ‰“åŒ…ä¼ è¾“**
```bash
# æ‰“åŒ…APTç¼“å­˜
tar -czf apt-cache-backup.tar.gz /var/cache/apt/archives/*.deb

# åœ¨ç›®æ ‡æœºå™¨è§£åŒ…
sudo tar -xzf apt-cache-backup.tar.gz -C /

# ç¦»çº¿å®‰è£…
sudo dpkg -i /var/cache/apt/archives/package-name*.deb
sudo apt-get install -f  # ä¿®å¤ä¾èµ–å…³ç³»
```

**ğŸ’¡ ç¦»çº¿å®‰è£…æœ€ä½³å®è·µ**
- **æ‰“åŒ…æ—¶æœº**ï¼šç³»ç»Ÿé…ç½®å®Œæˆï¼Œè½¯ä»¶å®‰è£…å®Œæ¯•å
- **éªŒè¯å®Œæ•´æ€§**ï¼šä¼ è¾“å‰åéªŒè¯æ–‡ä»¶MD5å€¼
- **ä¾èµ–å¤„ç†**ï¼šä½¿ç”¨`apt-get install -f`ä¿®å¤ä¾èµ–
- **ç‰ˆæœ¬åŒ¹é…**ï¼šç¡®ä¿ç›®æ ‡ç³»ç»Ÿç‰ˆæœ¬ä¸æºç³»ç»Ÿä¸€è‡´

### 4.3 æœ¬åœ°ä»“åº“æ­å»º


**ğŸ”¸ APTæœ¬åœ°ä»“åº“**
```bash
# åˆ›å»ºæœ¬åœ°ä»“åº“ç›®å½•
sudo mkdir -p /var/local-repo

# å¤åˆ¶debåŒ…åˆ°ä»“åº“
sudo cp /var/cache/apt/archives/*.deb /var/local-repo/

# ç”ŸæˆåŒ…ç´¢å¼•
cd /var/local-repo
sudo dpkg-scanpackages . /dev/null | gzip -9c > Packages.gz

# é…ç½®æœ¬åœ°æº
echo "deb file:///var/local-repo ./" | sudo tee -a /etc/apt/sources.list

# æ›´æ–°åŒ…ç´¢å¼•
sudo apt update
```

---

## 5. ğŸ”§ ç¼“å­˜æ•°æ®åº“é‡å»º


### 5.1 APTæ•°æ®åº“é‡å»º


**ğŸ”¸ æ•°æ®åº“æŸåç—‡çŠ¶**
```
å¸¸è§é—®é¢˜è¡¨ç°ï¼š
âŒ apt update å¡ä½ä¸åŠ¨
âŒ åŒ…æœç´¢ç»“æœå¼‚å¸¸
âŒ ä¾èµ–å…³ç³»è®¡ç®—é”™è¯¯
âŒ "Reading package lists... Error!" æŠ¥é”™
```

**ğŸ”¸ APTæ•°æ®åº“é‡å»ºæ­¥éª¤**
```bash
# 1. åœæ­¢ç›¸å…³æœåŠ¡
sudo systemctl stop apt-daily.timer
sudo systemctl stop apt-daily-upgrade.timer

# 2. æ¸…ç†æŸåçš„ç¼“å­˜
sudo rm -rf /var/lib/apt/lists/*
sudo rm -f /var/cache/apt/*.bin

# 3. é‡å»ºæ•°æ®åº“
sudo apt clean
sudo apt update

# 4. éªŒè¯é‡å»ºç»“æœ
apt list --upgradable
```

### 5.2 YUM/DNFæ•°æ®åº“é‡å»º


**ğŸ”¸ DNFç¼“å­˜é‡å»º**
```bash
# æ¸…ç†æ‰€æœ‰ç¼“å­˜
sudo dnf clean all

# æ¸…ç†DNFå†å²æ•°æ®åº“
sudo rm -rf /var/cache/dnf/*

# é‡å»ºç¼“å­˜
sudo dnf makecache

# éªŒè¯ä»“åº“è¿æ¥
dnf repolist enabled
```

**âš ï¸ é‡å»ºæ³¨æ„äº‹é¡¹**
- **å¤‡ä»½é‡è¦æ•°æ®**ï¼šé‡å»ºå‰å¤‡ä»½`/etc/apt/sources.list`
- **ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿ç½‘ç»œç¨³å®šï¼Œé¿å…é‡å»ºè¿‡ç¨‹ä¸­æ–­ç½‘
- **æƒé™é—®é¢˜**ï¼šä½¿ç”¨sudoæƒé™ï¼Œé¿å…æƒé™ä¸è¶³å¯¼è‡´å¤±è´¥
- **ç£ç›˜ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´ä¸‹è½½æ–°çš„å…ƒæ•°æ®

---

## 6. ğŸ”„ å…ƒæ•°æ®åŒæ­¥ä¸æ›´æ–°


### 6.1 å…ƒæ•°æ®æ›´æ–°æœºåˆ¶


**ğŸ”¸ å…ƒæ•°æ®çš„ä½œç”¨**
```
å…ƒæ•°æ®åŒ…å«ä»€ä¹ˆï¼š
ğŸ“‹ åŒ…åç§°å’Œç‰ˆæœ¬ä¿¡æ¯
ğŸ“‹ åŒ…ä¾èµ–å…³ç³»å›¾è°±
ğŸ“‹ åŒ…æ–‡ä»¶å¤§å°å’Œæ ¡éªŒå€¼
ğŸ“‹ åŒ…æè¿°å’Œåˆ†ç±»æ ‡ç­¾
ğŸ“‹ ä»“åº“ä¼˜å…ˆçº§å’Œé•œåƒåœ°å€
```

**ğŸ”¸ APTå…ƒæ•°æ®æ›´æ–°**
```bash
# æ ‡å‡†æ›´æ–°
sudo apt update

# å¼ºåˆ¶åˆ·æ–°æ‰€æœ‰æº
sudo apt update --allow-releaseinfo-change

# ä»…æ›´æ–°ç‰¹å®šæº
sudo apt update -o APT::Get::List-Cleanup=0
```

### 6.2 é•œåƒæºä¼˜åŒ–é…ç½®


**ğŸ”¸ å›½å†…é•œåƒæºé…ç½®ï¼ˆUbuntuï¼‰**
```bash
# å¤‡ä»½åŸå§‹æºé…ç½®
sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup

# é…ç½®é˜¿é‡Œäº‘é•œåƒæº
sudo tee /etc/apt/sources.list <<EOF
deb https://mirrors.aliyun.com/ubuntu/ focal main restricted
deb https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted
deb https://mirrors.aliyun.com/ubuntu/ focal universe
deb https://mirrors.aliyun.com/ubuntu/ focal-updates universe
deb https://mirrors.aliyun.com/ubuntu/ focal multiverse
deb https://mirrors.aliyun.com/ubuntu/ focal-updates multiverse
EOF

# æ›´æ–°æºä¿¡æ¯
sudo apt update
```

**ğŸ“Š é•œåƒæºé€Ÿåº¦æµ‹è¯•**
```bash
# å®‰è£…æµ‹é€Ÿå·¥å…·
sudo apt install apt-mirror-speed-test

# æµ‹è¯•å¹¶é€‰æ‹©æœ€å¿«æº
sudo apt-mirror-speed-test -t 10 -s
```

---

## 7. âœ… ç¼“å­˜å®Œæ•´æ€§éªŒè¯


### 7.1 åŒ…å®Œæ•´æ€§æ£€æŸ¥


**ğŸ”¸ APTåŒ…å®Œæ•´æ€§éªŒè¯**
```bash
# éªŒè¯å·²ä¸‹è½½åŒ…çš„å®Œæ•´æ€§
sudo apt-get check

# éªŒè¯ç‰¹å®šåŒ…æ–‡ä»¶
sudo dpkg --verify package-name

# æ£€æŸ¥åŒ…æ–‡ä»¶å“ˆå¸Œå€¼
debsums -c package-name
```

**ğŸ”¸ æ‰‹åŠ¨éªŒè¯åŒ…æ–‡ä»¶**
```bash
# æŸ¥çœ‹åŒ…ä¿¡æ¯
dpkg -I /var/cache/apt/archives/package.deb

# éªŒè¯åŒ…ç­¾å
dpkg-sig --verify /var/cache/apt/archives/package.deb

# æ¯”è¾ƒæ–‡ä»¶æ ¡éªŒå’Œ
apt-cache show package-name | grep -E "(MD5sum|SHA256)"
```

### 7.2 ç¼“å­˜ä¿®å¤æ“ä½œ


**ğŸ”¸ ä¿®å¤æŸåçš„åŒ…ç¼“å­˜**
```bash
# ä¿®å¤åŒ…ä¾èµ–å…³ç³»
sudo apt-get install -f

# é‡æ–°é…ç½®æŸåçš„åŒ…
sudo dpkg --configure -a

# é‡æ–°å®‰è£…æŸåçš„åŒ…
sudo apt-get install --reinstall package-name
```

**ğŸ’¡ é¢„é˜²ç¼“å­˜æŸåæªæ–½**
- **å®šæœŸå¤‡ä»½**ï¼š`/etc/apt/sources.list`å’Œé‡è¦é…ç½®
- **ç¨³å®šç½‘ç»œ**ï¼šé¿å…ä¸‹è½½è¿‡ç¨‹ä¸­ç½‘ç»œä¸­æ–­
- **å……è¶³ç©ºé—´**ï¼šä¿è¯ç¼“å­˜ç›®å½•æœ‰è¶³å¤Ÿç£ç›˜ç©ºé—´
- **æƒé™æ­£ç¡®**ï¼šç¼“å­˜ç›®å½•æƒé™è®¾ç½®åˆç†

---

## 8. ğŸŒ ç½‘ç»œç¼“å­˜ä»£ç†é…ç½®


### 8.1 APTä»£ç†é…ç½®


**ğŸ”¸ HTTPä»£ç†è®¾ç½®**
```bash
# ä¸´æ—¶ä»£ç†è®¾ç½®
export http_proxy=http://proxy-server:port
export https_proxy=https://proxy-server:port

# APTä¸“ç”¨ä»£ç†é…ç½®
sudo tee /etc/apt/apt.conf.d/01proxy <<EOF
Acquire::http::Proxy "http://proxy-server:port";
Acquire::https::Proxy "https://proxy-server:port";
EOF
```

**ğŸ”¸ è®¤è¯ä»£ç†é…ç½®**
```bash
# å¸¦ç”¨æˆ·è®¤è¯çš„ä»£ç†
sudo tee /etc/apt/apt.conf.d/01proxy <<EOF
Acquire::http::Proxy "http://username:password@proxy-server:port";
Acquire::https::Proxy "https://username:password@proxy-server:port";
EOF
```

### 8.2 ç¼“å­˜ä»£ç†æœåŠ¡å™¨æ­å»º


**ğŸ”¸ Squidä»£ç†ç¼“å­˜é…ç½®**
```bash
# å®‰è£…Squid
sudo apt install squid

# åŸºæœ¬é…ç½®
sudo tee -a /etc/squid/squid.conf <<EOF
# APTç¼“å­˜ä¼˜åŒ–
refresh_pattern deb$       1440  20%  10080
refresh_pattern udeb$      1440  20%  10080
refresh_pattern tar.gz$    1440  20%  10080
refresh_pattern tar.xz$    1440  20%  10080

# ç¼“å­˜ç›®å½•è®¾ç½®
cache_dir ufs /var/spool/squid 1000 16 256
maximum_object_size 1024 MB
EOF

# é‡å¯SquidæœåŠ¡
sudo systemctl restart squid
```

**ğŸ“Š ä»£ç†ç¼“å­˜æ•ˆæœ**

| **é…ç½®é¡¹** | **ä½œç”¨** | **æ¨èå€¼** | **è¯´æ˜** |
|----------|----------|-----------|---------|
| `cache_dir` | ç¼“å­˜å­˜å‚¨è·¯å¾„ | `1000MB` | æ ¹æ®ç£ç›˜ç©ºé—´è°ƒæ•´ |
| `maximum_object_size` | æœ€å¤§ç¼“å­˜å¯¹è±¡ | `1024MB` | å¤§åŒ…ä¹Ÿèƒ½ç¼“å­˜ |
| `refresh_pattern` | ç¼“å­˜åˆ·æ–°è§„åˆ™ | `1440åˆ†é’Ÿ` | debåŒ…ç¼“å­˜1å¤© |

---

## 9. âš¡ ç¼“å­˜æ€§èƒ½ä¼˜åŒ–ç­–ç•¥


### 9.1 ç¼“å­˜æ€§èƒ½è°ƒä¼˜


**ğŸ”¸ APTç¼“å­˜æ€§èƒ½ä¼˜åŒ–**
```bash
# é…ç½®APTæ€§èƒ½å‚æ•°
sudo tee /etc/apt/apt.conf.d/99performance <<EOF
# å¹¶è¡Œä¸‹è½½æ•°é‡
Acquire::Queue-Mode "host";
Acquire::http::Dl-Limit "800";

# ç¼“å­˜è®¾ç½®
APT::Cache-Limit "50000000";
APT::Cache-Start "32768";
APT::Cache-Grow "2048";

# ç½‘ç»œè¶…æ—¶
Acquire::http::Timeout "30";
Acquire::ftp::Timeout "30";
EOF
```

### 9.2 SSDä¼˜åŒ–é…ç½®


**ğŸ”¸ é’ˆå¯¹SSDçš„ç¼“å­˜ä¼˜åŒ–**
```bash
# å‡å°‘SSDå†™å…¥ç£¨æŸ
echo 'Dir::Cache::Archives "/tmp/apt-archives";' | sudo tee /etc/apt/apt.conf.d/02temp-cache

# åˆ›å»ºtmpfsç¼“å­˜
echo 'tmpfs /tmp/apt-archives tmpfs defaults,size=2G 0 0' | sudo tee -a /etc/fstab

# æŒ‚è½½tmpfs
sudo mkdir -p /tmp/apt-archives
sudo mount /tmp/apt-archives
```

### 9.3 å¤šçº¿ç¨‹ä¸‹è½½é…ç½®


**ğŸ”¸ å¯ç”¨å¹¶è¡Œä¸‹è½½**
```bash
# DNFå¹¶è¡Œä¸‹è½½é…ç½®
sudo tee -a /etc/dnf/dnf.conf <<EOF
max_parallel_downloads=10
fastestmirror=True
deltarpm=True
EOF

# APTå¹¶è¡Œä¸‹è½½ï¼ˆéœ€è¦apt-fastï¼‰
sudo add-apt-repository ppa:apt-fast/stable
sudo apt update
sudo apt install apt-fast
```

**ğŸ“ˆ æ€§èƒ½æå‡å¯¹æ¯”**

```
ä¸‹è½½æ€§èƒ½å¯¹æ¯”æµ‹è¯•ï¼š
å•çº¿ç¨‹ä¸‹è½½ï¼š  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 40% (å¹³å‡5MB/s)
å¤šçº¿ç¨‹ä¸‹è½½ï¼š  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (å¹³å‡12MB/s)
ç¼“å­˜å‘½ä¸­ï¼š   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80% (æœ¬åœ°è¯»å–)

ä¼˜åŒ–å»ºè®®ï¼š
ğŸš€ å¯ç”¨å¹¶è¡Œä¸‹è½½æå‡2-3å€é€Ÿåº¦
ğŸ’¾ åˆç†é…ç½®ç¼“å­˜å¤§å°é¿å…é¢‘ç¹æ¸…ç†  
ğŸŒ é€‰æ‹©å°±è¿‘é•œåƒæºå‡å°‘ç½‘ç»œå»¶è¿Ÿ
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ åŒ…ç¼“å­˜æœ¬è´¨ï¼šæœ¬åœ°å­˜å‚¨å·²ä¸‹è½½è½¯ä»¶åŒ…ï¼Œé¿å…é‡å¤ä¸‹è½½
ğŸ”¸ ç¼“å­˜ç›®å½•ç»“æ„ï¼šä¸åŒå‘è¡Œç‰ˆæœ‰ä¸åŒçš„ç¼“å­˜ç»„ç»‡æ–¹å¼
ğŸ”¸ æ¸…ç†ç­–ç•¥ï¼šclean vs autocleanï¼Œå…¨æ¸…ç† vs æ™ºèƒ½æ¸…ç†
ğŸ”¸ ç¦»çº¿åˆ©ç”¨ï¼šç¼“å­˜åŒ…å¯ç”¨äºç¦»çº¿å®‰è£…å’Œç³»ç»Ÿæ¢å¤
ğŸ”¸ å®Œæ•´æ€§éªŒè¯ï¼šç¡®ä¿ç¼“å­˜åŒ…æ–‡ä»¶æ²¡æœ‰æŸåæˆ–è¢«ç¯¡æ”¹
```

### 10.2 å…³é”®æ“ä½œå‘½ä»¤é€ŸæŸ¥


| **æ“ä½œç±»å‹** | **APTå‘½ä»¤** | **DNFå‘½ä»¤** | **ä½œç”¨è¯´æ˜** |
|-------------|-------------|-------------|-------------|
| ğŸ§¹ **æ¸…ç†ç¼“å­˜** | `apt clean` | `dnf clean all` | æ¸…ç†æ‰€æœ‰ç¼“å­˜æ–‡ä»¶ |
| ğŸ”„ **æ™ºèƒ½æ¸…ç†** | `apt autoclean` | `dnf clean expire-cache` | åªæ¸…ç†è¿‡æœŸç¼“å­˜ |
| ğŸ“Š **æŸ¥çœ‹ç¼“å­˜** | `du -sh /var/cache/apt/` | `du -sh /var/cache/dnf/` | æ£€æŸ¥ç¼“å­˜å ç”¨ç©ºé—´ |
| ğŸ”§ **é‡å»ºç¼“å­˜** | `apt update` | `dnf makecache` | é‡æ–°ä¸‹è½½å…ƒæ•°æ® |
| âœ… **éªŒè¯å®Œæ•´æ€§** | `apt-get check` | `dnf check` | æ£€æŸ¥åŒ…å®Œæ•´æ€§ |

### 10.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ æ—¥å¸¸ç»´æŠ¤ç­–ç•¥**
- **å®šæœŸæ¸…ç†**ï¼šæ¯æœˆæ‰§è¡Œ`autoclean`æ¸…ç†è¿‡æœŸç¼“å­˜
- **ç›‘æ§ç©ºé—´**ï¼šç¼“å­˜ç›®å½•å ç”¨è¶…è¿‡5GBæ—¶åŠæ—¶æ¸…ç†
- **ç¦»çº¿å¤‡ä»½**ï¼šé‡è¦è½¯ä»¶åŒ…ç¼“å­˜è¦å®šæœŸå¤‡ä»½
- **ç½‘ç»œä¼˜åŒ–**ï¼šé…ç½®å›½å†…é•œåƒæºåŠ é€Ÿä¸‹è½½

**âš ï¸ å¸¸è§é—®é¢˜é¢„é˜²**
- **ç£ç›˜ç©ºé—´**ï¼šç¡®ä¿ç¼“å­˜åˆ†åŒºæœ‰è¶³å¤Ÿå‰©ä½™ç©ºé—´
- **æƒé™é—®é¢˜**ï¼šä½¿ç”¨sudoæ‰§è¡Œç¼“å­˜ç®¡ç†å‘½ä»¤
- **ç½‘ç»œä¸­æ–­**ï¼šä¸‹è½½å¤§åŒ…æ—¶ä½¿ç”¨ç¨³å®šç½‘ç»œè¿æ¥
- **ç‰ˆæœ¬å†²çª**ï¼šç¦»çº¿å®‰è£…æ—¶æ³¨æ„ç³»ç»Ÿç‰ˆæœ¬åŒ¹é…

**ğŸš€ æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**
- **å¹¶è¡Œä¸‹è½½**ï¼šå¯ç”¨å¤šçº¿ç¨‹ä¸‹è½½æå‡é€Ÿåº¦
- **æœ¬åœ°ä»£ç†**ï¼šä¼ä¸šç¯å¢ƒæ­å»ºç¼“å­˜ä»£ç†æœåŠ¡å™¨
- **SSDä¼˜åŒ–**ï¼šå›ºæ€ç¡¬ç›˜ç¯å¢ƒå‡å°‘ä¸å¿…è¦å†™å…¥
- **é•œåƒé€‰æ‹©**ï¼šæµ‹è¯•å¹¶é€‰æ‹©å“åº”æœ€å¿«çš„é•œåƒæº

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç¼“å­˜æ¸…ç†è¦æ™ºèƒ½ï¼Œautocleanä¿ç•™æ–°ç‰ˆæœ¬
- ç¦»çº¿åŒ…ç®¡cacheè§ï¼Œå¤‡ä»½ä¼ è¾“ä¿å®Œæ•´
- å…ƒæ•°æ®åäº†é‡å»ºç¼“å­˜ï¼Œupdateåˆ·æ–°è§£éš¾é¢˜
- ä»£ç†é…ç½®åŠ é€Ÿä¸‹è½½ï¼Œæ€§èƒ½ä¼˜åŒ–SSDå‹å¥½