---
title: 7ã€è½¯ä»¶ä»“åº“é…ç½®ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [è½¯ä»¶ä»“åº“åŸºç¡€æ¦‚å¿µ](#1-è½¯ä»¶ä»“åº“åŸºç¡€æ¦‚å¿µ)
2. [YUMä»“åº“é…ç½®æ–‡ä»¶ç®¡ç†](#2-YUMä»“åº“é…ç½®æ–‡ä»¶ç®¡ç†)
3. [APTæºé…ç½®ä¸ä¼˜å…ˆçº§è®¾ç½®](#3-APTæºé…ç½®ä¸ä¼˜å…ˆçº§è®¾ç½®)
4. [GPGå¯†é’¥ç®¡ç†ä¸ä¿¡ä»»é“¾](#4-GPGå¯†é’¥ç®¡ç†ä¸ä¿¡ä»»é“¾)
5. [é•œåƒæºé€‰æ‹©ä¸åˆ‡æ¢ç­–ç•¥](#5-é•œåƒæºé€‰æ‹©ä¸åˆ‡æ¢ç­–ç•¥)
6. [æœ¬åœ°ä»“åº“åˆ›å»ºä¸ç»´æŠ¤](#6-æœ¬åœ°ä»“åº“åˆ›å»ºä¸ç»´æŠ¤)
7. [ä»£ç†è®¾ç½®ä¸ç½‘ç»œé…ç½®](#7-ä»£ç†è®¾ç½®ä¸ç½‘ç»œé…ç½®)
8. [ä»“åº“ä¼˜å…ˆçº§ä¸å®‰å…¨ç­–ç•¥](#8-ä»“åº“ä¼˜å…ˆçº§ä¸å®‰å…¨ç­–ç•¥)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“¦ è½¯ä»¶ä»“åº“åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯è½¯ä»¶ä»“åº“

**è½¯ä»¶ä»“åº“**å°±åƒæ˜¯ä¸€ä¸ªå·¨å¤§çš„"è½¯ä»¶è¶…å¸‚"ï¼Œé‡Œé¢å­˜æ”¾ç€æˆåƒä¸Šä¸‡ä¸ªè½¯ä»¶åŒ…ï¼Œç³»ç»Ÿå¯ä»¥ä»è¿™é‡Œä¸‹è½½å’Œå®‰è£…è½¯ä»¶ã€‚

> **ğŸ’¡ æ ¸å¿ƒç†è§£**
> ä»“åº“ = è½¯ä»¶åŒ…å­˜å‚¨ä¸­å¿ƒ + ç´¢å¼•ä¿¡æ¯ + å®‰å…¨éªŒè¯ï¼Œä¸‰è€…ç¼ºä¸€ä¸å¯

```
ç”Ÿæ´»ç±»æ¯”ï¼š
æ‰‹æœºåº”ç”¨å•†åº— â†’ è½¯ä»¶ä»“åº“
åº”ç”¨ä¸‹è½½å®‰è£… â†’ åŒ…ç®¡ç†å™¨å®‰è£…
åº”ç”¨æ›´æ–°æé†’ â†’ ç³»ç»Ÿè½¯ä»¶æ›´æ–°
```

### 1.2 ä»“åº“çš„å·¥ä½œåŸç†


**ğŸ”„ è½¯ä»¶å®‰è£…æµç¨‹ï¼š**
```
ç”¨æˆ·æ‰§è¡Œå®‰è£…å‘½ä»¤ â†’ åŒ…ç®¡ç†å™¨æŸ¥è¯¢ä»“åº“ç´¢å¼• â†’ ä¸‹è½½è½¯ä»¶åŒ… â†’ éªŒè¯æ•°å­—ç­¾å â†’ å®‰è£…åˆ°ç³»ç»Ÿ

å®é™…æ“ä½œç¤ºä¾‹ï¼š
sudo apt install firefox
     â†“
æ£€æŸ¥ /etc/apt/sources.list
     â†“  
ä»é…ç½®çš„é•œåƒç«™ä¸‹è½½
     â†“
GPGç­¾åéªŒè¯
     â†“
å®‰è£…å®Œæˆ
```

### 1.3 ä¸»è¦åŒ…ç®¡ç†ç³»ç»Ÿå¯¹æ¯”


| å‘è¡Œç‰ˆç³»åˆ— | **åŒ…ç®¡ç†å™¨** | **ä»“åº“é…ç½®** | **åŒ…æ ¼å¼** | **å…¸å‹å‘è¡Œç‰ˆ** |
|-----------|-------------|-------------|-----------|---------------|
| ğŸ”´ **Red Hat** | `yum/dnf` | `/etc/yum.repos.d/` | `.rpm` | `CentOS, RHEL, Fedora` |
| ğŸŸ¢ **Debian** | `apt` | `/etc/apt/sources.list` | `.deb` | `Ubuntu, Debian, Mint` |
| ğŸ”µ **Arch** | `pacman` | `/etc/pacman.conf` | `.pkg.tar.xz` | `Arch Linux, Manjaro` |
| ğŸŸ¡ **SUSE** | `zypper` | `/etc/zypp/repos.d/` | `.rpm` | `openSUSE, SLES` |

---

## 2. âš™ï¸ YUMä»“åº“é…ç½®æ–‡ä»¶ç®¡ç†


### 2.1 YUMä»“åº“é…ç½®æ–‡ä»¶ç»“æ„


**YUMä»“åº“é…ç½®**å­˜æ”¾åœ¨ `/etc/yum.repos.d/` ç›®å½•ä¸‹ï¼Œæ¯ä¸ª `.repo` æ–‡ä»¶å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªè½¯ä»¶æºã€‚

**ğŸ”§ æ ‡å‡†ä»“åº“é…ç½®æ ¼å¼ï¼š**
```ini
[repository-id]
name=ä»“åº“æè¿°åç§°
baseurl=http://mirror.example.com/centos/7/os/x86_64/
enabled=1
gpgcheck=1
gpgkey=http://mirror.example.com/centos/RPM-GPG-KEY-CentOS-7
```

### 2.2 é…ç½®å­—æ®µè¯¦è§£


**ğŸ“‹ æ ¸å¿ƒé…ç½®é€‰é¡¹ï¼š**

| å­—æ®µ | **ä½œç”¨** | **å¯é€‰å€¼** | **è¯´æ˜** |
|------|----------|-----------|----------|
| `[repo-id]` | ä»“åº“æ ‡è¯†ç¬¦ | `è‡ªå®šä¹‰åç§°` | å¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½é‡å¤ |
| `name` | ä»“åº“æè¿° | `ä»»æ„å­—ç¬¦ä¸²` | ç”¨æˆ·å‹å¥½çš„æ˜¾ç¤ºåç§° |
| `baseurl` | ä»“åº“åœ°å€ | `http/https/ftp/file` | å®é™…çš„è½¯ä»¶åŒ…ä¸‹è½½åœ°å€ |
| `enabled` | æ˜¯å¦å¯ç”¨ | `1å¯ç”¨/0ç¦ç”¨` | æ§åˆ¶æ˜¯å¦ä½¿ç”¨æ­¤ä»“åº“ |
| `gpgcheck` | GPGéªŒè¯ | `1éªŒè¯/0è·³è¿‡` | å®‰å…¨æ€§éªŒè¯å¼€å…³ |
| `gpgkey` | GPGå…¬é’¥ | `å¯†é’¥æ–‡ä»¶URL` | ç”¨äºéªŒè¯åŒ…ç­¾å |

### 2.3 å®é™…é…ç½®ç¤ºä¾‹


**ğŸ¯ CentOSå®˜æ–¹ä»“åº“é…ç½®ï¼š**
```bash
# æŸ¥çœ‹ç°æœ‰ä»“åº“
yum repolist

# ç¼–è¾‘ä»“åº“é…ç½®
sudo vim /etc/yum.repos.d/CentOS-Base.repo
```

**å†…å®¹ç¤ºä¾‹ï¼š**
```ini
[base]
name=CentOS-7 - Base
baseurl=http://vault.centos.org/7.9.2009/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
enabled=1

[updates]
name=CentOS-7 - Updates  
baseurl=http://vault.centos.org/7.9.2009/updates/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
enabled=1
```

### 2.4 ä»“åº“ç®¡ç†å¸¸ç”¨å‘½ä»¤


**âš¡ å®ç”¨æ“ä½œå‘½ä»¤ï¼š**
```bash
# åˆ—å‡ºæ‰€æœ‰ä»“åº“
yum repolist all

# åªåˆ—å‡ºå¯ç”¨çš„ä»“åº“  
yum repolist enabled

# æ¸…ç†ç¼“å­˜
yum clean all

# é‡å»ºç¼“å­˜
yum makecache

# ä¸´æ—¶ç¦ç”¨ä»“åº“å®‰è£…
yum --disablerepo=updates install package-name

# åªä»æŒ‡å®šä»“åº“å®‰è£…
yum --enablerepo=epel install package-name
```

---

## 3. ğŸ¯ APTæºé…ç½®ä¸ä¼˜å…ˆçº§è®¾ç½®


### 3.1 APTæºé…ç½®æ–‡ä»¶ä½“ç³»


**APTé…ç½®**ä¸»è¦é€šè¿‡ä¸¤ä¸ªåœ°æ–¹ç®¡ç†ï¼š
- **ä¸»é…ç½®**ï¼š`/etc/apt/sources.list`
- **é™„åŠ é…ç½®**ï¼š`/etc/apt/sources.list.d/` ç›®å½•ä¸‹çš„ `.list` æ–‡ä»¶

> **ğŸ” æœ€ä½³å®è·µ**
> å»ºè®®æŠŠç¬¬ä¸‰æ–¹æºæ”¾åœ¨ sources.list.d/ ç›®å½•ï¼Œä¿æŒä¸»é…ç½®æ–‡ä»¶çš„å¹²å‡€

### 3.2 APTæºé…ç½®è¯­æ³•


**ğŸ“ æ ‡å‡†æ ¼å¼ï¼š**
```
deb [é€‰é¡¹] URL å‘è¡Œç‰ˆä»£å· ç»„ä»¶åç§°
deb-src [é€‰é¡¹] URL å‘è¡Œç‰ˆä»£å· ç»„ä»¶åç§°
```

**è¯­æ³•è§£æï¼š**
- `deb`ï¼šäºŒè¿›åˆ¶åŒ…æºï¼ˆæ™®é€šè½¯ä»¶åŒ…ï¼‰
- `deb-src`ï¼šæºç åŒ…æºï¼ˆæºä»£ç åŒ…ï¼‰
- `URL`ï¼šä»“åº“æœåŠ¡å™¨åœ°å€
- `å‘è¡Œç‰ˆä»£å·`ï¼šå¦‚ focalã€bionicã€jammy
- `ç»„ä»¶`ï¼šmainã€restrictedã€universeã€multiverse

### 3.3 Ubuntuå®˜æ–¹æºé…ç½®ç¤ºä¾‹


**ğŸ”§ æ ‡å‡†Ubuntuæºé…ç½®ï¼š**
```bash
# æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬
lsb_release -a

# ç¼–è¾‘æºé…ç½®
sudo nano /etc/apt/sources.list
```

**å…¸å‹é…ç½®å†…å®¹ï¼š**
```bash
# Ubuntu 22.04 LTS (Jammy) å®˜æ–¹æº
deb http://archive.ubuntu.com/ubuntu/ jammy main restricted universe multiverse
deb http://archive.ubuntu.com/ubuntu/ jammy-updates main restricted universe multiverse
deb http://archive.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse

# æºç åŒ…ï¼ˆå¯é€‰ï¼‰
deb-src http://archive.ubuntu.com/ubuntu/ jammy main restricted universe multiverse
```

**ğŸ”¸ Ubuntuä»“åº“ç»„ä»¶è¯´æ˜ï¼š**
- **main**ï¼šå®˜æ–¹æ”¯æŒçš„å¼€æºè½¯ä»¶
- **restricted**ï¼šæœ‰ç‰ˆæƒé™åˆ¶çš„ç¡¬ä»¶é©±åŠ¨
- **universe**ï¼šç¤¾åŒºç»´æŠ¤çš„å¼€æºè½¯ä»¶
- **multiverse**ï¼šæœ‰ç‰ˆæƒæˆ–æ³•å¾‹é™åˆ¶çš„è½¯ä»¶

### 3.4 APTä¼˜å…ˆçº§é…ç½®


**ä¼˜å…ˆçº§æ§åˆ¶**å†³å®šå½“åŒä¸€è½¯ä»¶åŒ…åœ¨å¤šä¸ªæºä¸­å­˜åœ¨æ—¶ï¼Œç³»ç»Ÿé€‰æ‹©å“ªä¸ªæºè¿›è¡Œå®‰è£…ã€‚

**ğŸ“Š ä¼˜å…ˆçº§è®¾ç½®ï¼š**
```bash
# åˆ›å»ºä¼˜å…ˆçº§é…ç½®æ–‡ä»¶
sudo nano /etc/apt/preferences.d/99-custom-priorities

# é…ç½®å†…å®¹ç¤ºä¾‹
Package: *
Pin: release o=Ubuntu
Pin-Priority: 900

Package: firefox
Pin: release o=Mozilla
Pin-Priority: 1000
```

**ä¼˜å…ˆçº§æ•°å€¼å«ä¹‰ï¼š**
- `>= 1000`ï¼šå³ä½¿ç‰ˆæœ¬å·æ›´ä½ä¹Ÿä¼˜å…ˆå®‰è£…
- `990-999`ï¼šé«˜ä¼˜å…ˆçº§ï¼Œç‰ˆæœ¬å·ç›¸åŒæ—¶ä¼˜å…ˆ
- `100-989`ï¼šæ ‡å‡†ä¼˜å…ˆçº§
- `< 100`ï¼šä½ä¼˜å…ˆçº§ï¼Œä»…åœ¨æ²¡æœ‰å…¶ä»–é€‰æ‹©æ—¶å®‰è£…

---

## 4. ğŸ” GPGå¯†é’¥ç®¡ç†ä¸ä¿¡ä»»é“¾


### 4.1 GPGç­¾åéªŒè¯æœºåˆ¶


**GPGç­¾å**å°±åƒè½¯ä»¶åŒ…çš„"èº«ä»½è¯"ï¼Œç¡®ä¿ä½ ä¸‹è½½çš„è½¯ä»¶åŒ…æ˜¯å®˜æ–¹å‘å¸ƒçš„ï¼Œæ²¡æœ‰è¢«ç¯¡æ”¹ã€‚

```
å®‰å…¨éªŒè¯æµç¨‹ï¼š
è½¯ä»¶å‘å¸ƒå•† â†’ ç”¨ç§é’¥ç­¾ååŒ… â†’ å‘å¸ƒåˆ°ä»“åº“
ç”¨æˆ·ç³»ç»Ÿ â†’ ç”¨å…¬é’¥éªŒè¯ â†’ ç¡®è®¤åŒ…å®Œæ•´æ€§ â†’ å®‰è£…
```

> **âš ï¸ å®‰å…¨æé†’**
> ç»å¯¹ä¸è¦ç¦ç”¨GPGéªŒè¯ï¼Œè¿™æ˜¯ä¿æŠ¤ç³»ç»Ÿå®‰å…¨çš„é‡è¦æœºåˆ¶

### 4.2 APTå¯†é’¥ç®¡ç†


**ğŸ”‘ APTå¯†é’¥æ“ä½œå‘½ä»¤ï¼š**
```bash
# æŸ¥çœ‹å·²å®‰è£…çš„GPGå¯†é’¥
apt-key list

# æ·»åŠ æ–°çš„GPGå¯†é’¥
wget -qO - https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

# ä»å¯†é’¥æœåŠ¡å™¨è·å–å¯†é’¥
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys KEYID

# åˆ é™¤å¯†é’¥
sudo apt-key del KEYID

# éªŒè¯å¯†é’¥æŒ‡çº¹
apt-key fingerprint KEYID
```

**ç°ä»£åŒ–å¯†é’¥ç®¡ç†ï¼ˆæ¨èæ–¹å¼ï¼‰ï¼š**
```bash
# ä¸‹è½½GPGå¯†é’¥åˆ°æŒ‡å®šç›®å½•
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# åœ¨sources.listä¸­æŒ‡å®šå¯†é’¥
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list
```

### 4.3 YUMå¯†é’¥ç®¡ç†


**ğŸ”§ RPM GPGå¯†é’¥æ“ä½œï¼š**
```bash
# æŸ¥çœ‹å·²å¯¼å…¥çš„GPGå¯†é’¥
rpm -q gpg-pubkey --qf '%{NAME}-%{VERSION}-%{RELEASE}\t%{SUMMARY}\n'

# æ‰‹åŠ¨å¯¼å…¥GPGå¯†é’¥
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7

# ä»URLå¯¼å…¥å¯†é’¥
sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc

# éªŒè¯åŒ…ç­¾å
rpm --checksig package.rpm

# åˆ é™¤GPGå¯†é’¥
sudo rpm -e gpg-pubkey-KEYID
```

---

## 5. ğŸŒ é•œåƒæºé€‰æ‹©ä¸åˆ‡æ¢ç­–ç•¥


### 5.1 é•œåƒæºé€‰æ‹©åŸåˆ™


**é€‰æ‹©é•œåƒæº**å°±åƒé€‰æ‹©è·ç¦»æœ€è¿‘ã€æœåŠ¡æœ€å¥½çš„å•†åº—è´­ç‰©ä¸€æ ·ï¼Œéœ€è¦è€ƒè™‘é€Ÿåº¦ã€ç¨³å®šæ€§å’Œæ›´æ–°åŠæ—¶æ€§ã€‚

**ğŸ¯ é€‰æ‹©æ ‡å‡†ï¼š**
- **åœ°ç†ä½ç½®**ï¼šé€‰æ‹©åœ°ç†ä½ç½®æ¥è¿‘çš„é•œåƒç«™
- **ç½‘ç»œè´¨é‡**ï¼šæµ‹è¯•ä¸‹è½½é€Ÿåº¦å’Œè¿æ¥ç¨³å®šæ€§  
- **æ›´æ–°é¢‘ç‡**ï¼šç¡®ä¿è½¯ä»¶åŒ…æ›´æ–°åŠæ—¶
- **å¯é æ€§**ï¼šé€‰æ‹©çŸ¥åæœºæ„ç»´æŠ¤çš„é•œåƒç«™

### 5.2 å›½å†…ä¼˜è´¨é•œåƒç«™æ¨è


**ğŸ“Š ä¸»è¦é•œåƒç«™å¯¹æ¯”ï¼š**

| é•œåƒç«™ | **ç»´æŠ¤æœºæ„** | **æ›´æ–°é¢‘ç‡** | **æ”¯æŒå‘è¡Œç‰ˆ** | **ç‰¹ç‚¹** |
|--------|-------------|-------------|--------------|----------|
| **é˜¿é‡Œäº‘** | `é˜¿é‡Œå·´å·´` | `å¿«é€Ÿ` | `å…¨é¢` | `å•†ä¸šåŒ–ï¼Œç¨³å®šå¯é ` |
| **è…¾è®¯äº‘** | `è…¾è®¯` | `å¿«é€Ÿ` | `å…¨é¢` | `é€Ÿåº¦å¿«ï¼Œè¦†ç›–å¹¿` |
| **åä¸ºäº‘** | `åä¸º` | `å¿«é€Ÿ` | `å…¨é¢` | `ä¼ä¸šçº§ç¨³å®šæ€§` |
| **æ¸…åTUNA** | `æ¸…åå¤§å­¦` | `åŠæ—¶` | `å…¨é¢` | `å¼€æºç¤¾åŒºé¦–é€‰` |
| **ä¸­ç§‘å¤§** | `ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦` | `åŠæ—¶` | `å…¨é¢` | `å­¦æœ¯æœºæ„ï¼Œè´¨é‡é«˜` |

### 5.3 Ubuntué•œåƒæºå¿«é€Ÿåˆ‡æ¢


**âš¡ å¤‡ä»½å¹¶åˆ‡æ¢æºï¼š**
```bash
# å¤‡ä»½åŸé…ç½®
sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup

# è‡ªåŠ¨é€‰æ‹©æœ€å¿«æºï¼ˆä½¿ç”¨apt-fastï¼‰
sudo apt update && sudo apt install apt-fast

# æ‰‹åŠ¨åˆ‡æ¢åˆ°é˜¿é‡Œäº‘æº
sudo sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list
sudo sed -i 's/security.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list

# æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•
sudo apt update
```

**ğŸ”§ æ¸…åæºé…ç½®ç¤ºä¾‹ï¼š**
```bash
# Ubuntu 22.04 LTS æ¸…åæº
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse  
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
```

### 5.4 CentOSé•œåƒæºåˆ‡æ¢


**ğŸ¯ CentOS 7åˆ‡æ¢åˆ°é˜¿é‡Œäº‘æºï¼š**
```bash
# å¤‡ä»½åŸé…ç½®
sudo cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup

# ä¸‹è½½é˜¿é‡Œäº‘æºé…ç½®
sudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

# æ¸…ç†å¹¶é‡å»ºç¼“å­˜
sudo yum clean all
sudo yum makecache
```

---

## 6. ğŸ’¾ æœ¬åœ°ä»“åº“åˆ›å»ºä¸ç»´æŠ¤


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦æœ¬åœ°ä»“åº“


**æœ¬åœ°ä»“åº“**é€‚ç”¨äºå†…ç½‘ç¯å¢ƒã€ç¦»çº¿å®‰è£…æˆ–éœ€è¦ç»Ÿä¸€è½¯ä»¶ç‰ˆæœ¬çš„åœºæ™¯ã€‚

```
åº”ç”¨åœºæ™¯ï¼š
ä¼ä¸šå†…ç½‘ â†’ ç»Ÿä¸€è½¯ä»¶ç‰ˆæœ¬ï¼ŒèŠ‚çœå¤–ç½‘å¸¦å®½
ç¦»çº¿ç¯å¢ƒ â†’ æ— æ³•è”ç½‘çš„ç³»ç»Ÿï¼Œé¢„å…ˆå‡†å¤‡è½¯ä»¶åŒ…
æµ‹è¯•ç¯å¢ƒ â†’ å›ºå®šè½¯ä»¶ç‰ˆæœ¬ï¼Œé¿å…æ›´æ–°å¯¼è‡´çš„é—®é¢˜
```

### 6.2 åˆ›å»ºAPTæœ¬åœ°ä»“åº“


**ğŸ”§ æ­¥éª¤è¯¦è§£ï¼š**
```bash
# 1. åˆ›å»ºä»“åº“ç›®å½•ç»“æ„
sudo mkdir -p /var/local-repo/{dists,pool}

# 2. å¤åˆ¶è½¯ä»¶åŒ…åˆ°poolç›®å½•
sudo cp /var/cache/apt/archives/*.deb /var/local-repo/pool/

# 3. å®‰è£…ä»“åº“ç®¡ç†å·¥å…·
sudo apt install dpkg-dev

# 4. ç”ŸæˆåŒ…ç´¢å¼•
cd /var/local-repo
sudo dpkg-scanpackages pool /dev/null | gzip -c > dists/Packages.gz

# 5. é…ç½®æœ¬åœ°æº
echo "deb [trusted=yes] file:///var/local-repo ./" | sudo tee /etc/apt/sources.list.d/local.list

# 6. æ›´æ–°åŒ…ç´¢å¼•
sudo apt update
```

### 6.3 åˆ›å»ºYUMæœ¬åœ°ä»“åº“


**ğŸ“¦ YUMæœ¬åœ°ä»“åº“æ­å»ºï¼š**
```bash
# 1. å®‰è£…createrepoå·¥å…·
sudo yum install createrepo

# 2. åˆ›å»ºä»“åº“ç›®å½•
sudo mkdir -p /var/local-repo/packages

# 3. å¤åˆ¶RPMåŒ…
sudo cp /var/cache/yum/**/packages/*.rpm /var/local-repo/packages/

# 4. ç”Ÿæˆå…ƒæ•°æ®
sudo createrepo /var/local-repo/

# 5. é…ç½®æœ¬åœ°ä»“åº“
sudo cat > /etc/yum.repos.d/local.repo << 'EOF'
[local]
name=Local Repository
baseurl=file:///var/local-repo
enabled=1
gpgcheck=0
EOF

# 6. æ¸…ç†ç¼“å­˜
sudo yum clean all && sudo yum repolist
```

### 6.4 HTTPæœåŠ¡å™¨å‘å¸ƒä»“åº“


**ğŸŒ é€šè¿‡HTTPæä¾›ä»“åº“æœåŠ¡ï¼š**
```bash
# å®‰è£…nginx
sudo apt install nginx

# é…ç½®è™šæ‹Ÿä¸»æœº
sudo cat > /etc/nginx/sites-available/local-repo << 'EOF'
server {
    listen 80;
    server_name repo.local.com;
    root /var/local-repo;
    autoindex on;
    location / {
        try_files $uri $uri/ =404;
    }
}
EOF

# å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/local-repo /etc/nginx/sites-enabled/
sudo systemctl restart nginx

# å®¢æˆ·ç«¯é…ç½®
echo "deb http://repo.local.com ./" | sudo tee /etc/apt/sources.list.d/local-http.list
```

---

## 7. ğŸŒ ä»£ç†è®¾ç½®ä¸ç½‘ç»œé…ç½®


### 7.1 åŒ…ç®¡ç†å™¨ä»£ç†é…ç½®


åœ¨ä¼ä¸šç½‘ç»œç¯å¢ƒä¸­ï¼Œé€šå¸¸éœ€è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®å¤–ç½‘ï¼ŒåŒ…ç®¡ç†å™¨éœ€è¦æ­£ç¡®é…ç½®ä»£ç†æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

### 7.2 APTä»£ç†é…ç½®


**ğŸ”§ APTä»£ç†è®¾ç½®æ–¹æ³•ï¼š**
```bash
# æ–¹æ³•1ï¼šå…¨å±€é…ç½®æ–‡ä»¶
sudo nano /etc/apt/apt.conf.d/95proxies

# æ–‡ä»¶å†…å®¹
Acquire::http::Proxy "http://proxy.company.com:8080";
Acquire::https::Proxy "http://proxy.company.com:8080";
Acquire::ftp::Proxy "http://proxy.company.com:8080";

# æ–¹æ³•2ï¼šç¯å¢ƒå˜é‡
export http_proxy=http://proxy.company.com:8080
export https_proxy=http://proxy.company.com:8080
sudo -E apt update

# æ–¹æ³•3ï¼šä¸´æ—¶ä½¿ç”¨
sudo apt -o Acquire::http::Proxy="http://proxy.company.com:8080" update
```

**è®¤è¯ä»£ç†é…ç½®ï¼š**
```bash
# éœ€è¦ç”¨æˆ·åå¯†ç çš„ä»£ç†
Acquire::http::Proxy "http://username:password@proxy.company.com:8080";
```

### 7.3 YUMä»£ç†é…ç½®


**âš™ï¸ YUMä»£ç†è®¾ç½®ï¼š**
```bash
# ç¼–è¾‘YUMé…ç½®æ–‡ä»¶
sudo nano /etc/yum.conf

# æ·»åŠ ä»£ç†é…ç½®
proxy=http://proxy.company.com:8080
proxy_username=username
proxy_password=password

# æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡
export http_proxy=http://proxy.company.com:8080
export https_proxy=http://proxy.company.com:8080
```

### 7.4 ç½‘ç»œè¿æ¥é—®é¢˜æ’æŸ¥


**ğŸ” å¸¸è§é—®é¢˜è¯Šæ–­ï¼š**
```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping mirrors.aliyun.com

# æµ‹è¯•HTTPè¿æ¥
curl -I http://mirrors.aliyun.com/ubuntu/

# æ£€æŸ¥DNSè§£æ
nslookup mirrors.aliyun.com

# æµ‹è¯•ä»£ç†è¿æ¥
curl --proxy http://proxy.company.com:8080 -I http://www.baidu.com

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
sudo apt update -o Debug::Acquire::http=true
```

---

## 8. ğŸ›¡ï¸ ä»“åº“ä¼˜å…ˆçº§ä¸å®‰å…¨ç­–ç•¥


### 8.1 å¤šä»“åº“ä¼˜å…ˆçº§ç®¡ç†


å½“ç³»ç»Ÿé…ç½®äº†å¤šä¸ªä»“åº“ä¸”å­˜åœ¨ç›¸åŒè½¯ä»¶åŒ…æ—¶ï¼Œéœ€è¦é€šè¿‡ä¼˜å…ˆçº§æ§åˆ¶å®‰è£…æ¥æºã€‚

**ğŸ“Š ä¼˜å…ˆçº§ç­–ç•¥åˆ¶å®šï¼š**
```
å®˜æ–¹ä»“åº“     â†’ æœ€é«˜ä¼˜å…ˆçº§ï¼ˆ1000ï¼‰
å®˜æ–¹æ›´æ–°ä»“åº“ â†’ é«˜ä¼˜å…ˆçº§ï¼ˆ900ï¼‰  
ç¬¬ä¸‰æ–¹å¯ä¿¡æº â†’ ä¸­ç­‰ä¼˜å…ˆçº§ï¼ˆ500ï¼‰
æµ‹è¯•ä»“åº“     â†’ ä½ä¼˜å…ˆçº§ï¼ˆ100ï¼‰
```

### 8.2 ç¬¬ä¸‰æ–¹ä»“åº“å®‰å…¨ç®¡ç†


**ğŸ” å®‰å…¨æ£€æŸ¥æ¸…å•ï¼š**

| æ£€æŸ¥é¡¹ç›® | **éªŒè¯æ–¹æ³•** | **é£é™©ç­‰çº§** |
|---------|-------------|-------------|
| **GPGç­¾å** | `éªŒè¯å¯†é’¥çœŸå®æ€§` | ğŸ”´ **é«˜é£é™©** |
| **HTTPSè¿æ¥** | `æ£€æŸ¥SSLè¯ä¹¦` | ğŸŸ¡ **ä¸­é£é™©** |
| **ä»“åº“æ¥æº** | `ç¡®è®¤ç»´æŠ¤æœºæ„` | ğŸŸ¡ **ä¸­é£é™©** |
| **æ›´æ–°é¢‘ç‡** | `è§‚å¯Ÿç»´æŠ¤æ´»è·ƒåº¦` | ğŸŸ¢ **ä½é£é™©** |

**å®é™…å®‰å…¨é…ç½®ï¼š**
```bash
# é™åˆ¶ç¬¬ä¸‰æ–¹ä»“åº“åªå®‰è£…ç‰¹å®šè½¯ä»¶
sudo nano /etc/apt/preferences.d/99-docker-pin

Package: *
Pin: origin download.docker.com
Pin-Priority: -1

Package: docker-ce docker-ce-cli containerd.io
Pin: origin download.docker.com  
Pin-Priority: 900
```

### 8.3 ä»“åº“å®‰å…¨ç›‘æ§


**ğŸ¯ å®šæœŸå®‰å…¨æ£€æŸ¥ï¼š**
```bash
# æ£€æŸ¥å¼‚å¸¸çš„ä»“åº“é…ç½®
sudo find /etc/apt/sources.list.d/ -name "*.list" -exec grep -H "^deb" {} \;

# æ£€æŸ¥GPGå¯†é’¥çŠ¶æ€
apt-key list | grep -A 1 -B 1 "expired"

# å®¡è®¡å·²å®‰è£…è½¯ä»¶åŒ…æ¥æº
apt-cache policy $(dpkg --get-selections | awk '{print $1}')

# ç›‘æ§ä»“åº“æ›´æ–°
sudo apt list --upgradable
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ è½¯ä»¶ä»“åº“ï¼šè½¯ä»¶åŒ…çš„é›†ä¸­å­˜å‚¨å’Œåˆ†å‘ä¸­å¿ƒ
ğŸ”¸ åŒ…ç®¡ç†å™¨ï¼šyum/dnf(Red Hat)ã€apt(Debian)ã€pacman(Arch)
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼š/etc/yum.repos.d/ã€/etc/apt/sources.list
ğŸ”¸ GPGéªŒè¯ï¼šç¡®ä¿è½¯ä»¶åŒ…å®Œæ•´æ€§å’Œæ¥æºå¯ä¿¡
ğŸ”¸ é•œåƒæºï¼šæé«˜ä¸‹è½½é€Ÿåº¦çš„åœ°ç†åˆ†å¸ƒå¼æœåŠ¡å™¨
ğŸ”¸ æœ¬åœ°ä»“åº“ï¼šå†…ç½‘ç¯å¢ƒçš„è‡ªå»ºè½¯ä»¶åŒ…æœåŠ¡
```

### 9.2 å®ç”¨æ“ä½œæŠ€èƒ½


**ğŸ”¹ æ—¥å¸¸ç®¡ç†å‘½ä»¤ï¼š**
```bash
# ä»“åº“åˆ—è¡¨ç®¡ç†
yum repolist / apt-cache policy

# ç¼“å­˜ç®¡ç†  
yum makecache / apt update

# æºé…ç½®æµ‹è¯•
yum repoinfo / apt-cache show

# åŒ…æ¥æºæŸ¥è¯¢
yum info / apt-cache policy package
```

**ğŸ”¹ é—®é¢˜æ’æŸ¥æ€è·¯ï¼š**
```
ç½‘ç»œè¿é€šæ€§ â†’ ä»£ç†é…ç½® â†’ DNSè§£æ â†’ GPGå¯†é’¥ â†’ ä»“åº“é…ç½®è¯­æ³•
```

### 9.3 å®‰å…¨æœ€ä½³å®è·µ


**âš¡ å®‰å…¨é…ç½®è¦ç‚¹ï¼š**
- **å¯ç”¨GPGéªŒè¯**ï¼šç»ä¸ç¦ç”¨åŒ…ç­¾åéªŒè¯
- **ä½¿ç”¨HTTPS**ï¼šä¼˜å…ˆé€‰æ‹©æ”¯æŒSSLçš„ä»“åº“æº
- **å®šæœŸå®¡è®¡**ï¼šæ£€æŸ¥ç¬¬ä¸‰æ–¹ä»“åº“çš„å¿…è¦æ€§
- **ä¼˜å…ˆçº§æ§åˆ¶**ï¼šå®˜æ–¹æºä¼˜å…ˆäºç¬¬ä¸‰æ–¹æº
- **å¤‡ä»½é…ç½®**ï¼šä¿®æ”¹å‰å¤‡ä»½åŸå§‹é…ç½®æ–‡ä»¶

### 9.4 å®é™…åº”ç”¨åœºæ™¯


**ğŸš€ å…¸å‹ä½¿ç”¨åœºæ™¯ï¼š**
- **å¼€å‘ç¯å¢ƒ**ï¼šå¿«é€Ÿåˆ‡æ¢æµ‹è¯•ç”¨çš„è½¯ä»¶æº
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ç¨³å®šå¯é çš„å®˜æ–¹æº
- **ä¼ä¸šå†…ç½‘**ï¼šæ­å»ºæœ¬åœ°ä»“åº“èŠ‚çœå¸¦å®½
- **ç¦»çº¿ç¯å¢ƒ**ï¼šé¢„å…ˆå‡†å¤‡è½¯ä»¶åŒ…ä»“åº“

**ğŸ’¡ å…³é”®ç†è§£**ï¼š
è½¯ä»¶ä»“åº“é…ç½®çœ‹ä¼¼å¤æ‚ï¼Œå®é™…ä¸Šå°±æ˜¯å‘Šè¯‰ç³»ç»Ÿ"å»å“ªé‡Œä¸‹è½½è½¯ä»¶åŒ…"å’Œ"å¦‚ä½•éªŒè¯å®‰å…¨æ€§"ã€‚æŒæ¡äº†åŸºæœ¬çš„é…ç½®æ–‡ä»¶æ ¼å¼å’Œå®‰å…¨éªŒè¯æœºåˆ¶ï¼Œå°±èƒ½çµæ´»åº”å¯¹å„ç§ç½‘ç»œç¯å¢ƒçš„éœ€æ±‚ã€‚

**ğŸ¯ è®°å¿†è¦ç‚¹**ï¼š
- é…ç½®æ–‡ä»¶ä½ç½®è¦è®°ç‰¢ï¼ŒYUMç”¨repos.dï¼ŒAPTç”¨sources.list  
- GPGå¯†é’¥ç®¡ç†æ˜¯å…³é”®ï¼Œå®‰å…¨éªŒè¯ä¸èƒ½çœ
- é•œåƒæºé€‰æ‹©çœ‹åœ°åŒºï¼Œå›½å†…é¦–é€‰æ¸…åé˜¿é‡Œäº‘
- æœ¬åœ°ä»“åº“è§£å†…ç½‘ï¼Œç¦»çº¿å®‰è£…ä¸ç”¨æ„