---
title: 5、APT-GET传统命令
---
## 📚 目录

1. [APT-GET概述与定位](#1-APT-GET概述与定位)
2. [经典命令语法结构](#2-经典命令语法结构)
3. [源码包管理操作](#3-源码包管理操作)
4. [依赖关系处理](#4-依赖关系处理)
5. [清理与维护操作](#5-清理与维护操作)
6. [安装控制策略](#6-安装控制策略)
7. [APT vs APT-GET对比](#7-APT-vs-APT-GET对比)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🎯 APT-GET概述与定位


### 1.1 什么是APT-GET


> **💡 核心理解**
> APT-GET是Debian/Ubuntu系统的**传统包管理工具**，就像是系统软件的"管家"，负责安装、更新、删除软件包

**APT-GET的本质**：
- **全称**：Advanced Package Tool - GET
- **作用**：管理`.deb`格式的软件包
- **特点**：功能全面、稳定可靠、脚本友好

### 1.2 为什么要学APT-GET


```
现状对比：
新手常用：apt install xxx          (简化命令)
运维必备：apt-get install xxx      (传统命令)

为什么学APT-GET？
🔸 脚本编写：更稳定，参数更完整
🔸 服务器运维：多数服务器使用传统命令
🔸 故障排查：理解底层原理更深入
🔸 兼容性好：老版本系统必须使用
```

### 1.3 APT-GET的工作原理


**工作流程图**：
```
软件仓库              本地系统              用户操作
    |                     |                     |
    |←--[1]更新软件列表----|←--[apt-get update]--|
    |                     |                     |
    |--[2]下载软件包----→|                     |
    |                     |←--[apt-get install]--|
    |                     |                     |
    |                     |--[3]安装到系统]--→|用户程序|
```

---

## 2. ⚙️ 经典命令语法结构


### 2.1 基本语法格式


**标准格式**：
```bash
apt-get [选项] [操作命令] [包名]
```

> **📌 语法要点**
> - `选项`：控制命令行为的参数
> - `操作命令`：具体要执行的动作
> - `包名`：目标软件包名称

### 2.2 核心操作命令对照表


| 操作命令 | **作用说明** | **使用场景** | **示例** |
|---------|-------------|-------------|---------|
| `update` | 更新软件包列表 | 安装前必做 | `apt-get update` |
| `install` | 安装软件包 | 安装新软件 | `apt-get install nginx` |
| `remove` | 删除软件包 | 保留配置删除 | `apt-get remove nginx` |
| `purge` | 完全删除 | 彻底清理 | `apt-get purge nginx` |
| `upgrade` | 升级所有包 | 系统更新 | `apt-get upgrade` |
| `dist-upgrade` | 智能升级 | 系统版本升级 | `apt-get dist-upgrade` |

### 2.3 重要选项参数详解


**常用选项组合**：
```bash
# 静默安装（脚本常用）
apt-get install -y nginx

# 模拟安装（测试用）
apt-get install -s nginx

# 强制安装（解决冲突）
apt-get install -f

# 不升级依赖
apt-get install --no-upgrade nginx
```

---

## 3. 📦 源码包管理操作


### 3.1 源码包下载命令


> **🔍 深入理解**
> 源码包就像是软件的"原材料"，需要经过编译才能变成可执行的程序

**source命令语法**：
```bash
apt-get source [包名]
```

**实际操作示例**：
```bash
# 下载nginx源码包
apt-get source nginx

# 下载后会得到三个文件：
nginx_1.18.0.orig.tar.gz     # 原始源码
nginx_1.18.0-1.debian.tar.xz # Debian补丁
nginx_1.18.0-1.dsc          # 包描述文件
```

### 3.2 构建依赖安装


**build-dep命令的作用**：
- **目的**：安装编译源码所需的依赖包
- **类比**：就像准备做菜前先买齐所有食材

```bash
# 安装编译nginx需要的所有依赖
apt-get build-dep nginx

# 实际安装的依赖可能包括：
# - gcc编译器
# - 各种开发库
# - 构建工具等
```

### 3.3 源码编译完整流程


```
完整的源码安装流程：

1. 安装编译依赖
   └── apt-get build-dep package-name

2. 下载源码包
   └── apt-get source package-name

3. 进入源码目录编译
   ├── cd package-directory
   ├── ./configure
   ├── make
   └── make install
```

---

## 4. 📥 下载包文件管理


### 4.1 download命令详解


> **💡 核心理解**
> download命令只下载`.deb`包文件，不安装，就像网购时只下单不确认收货

**基本用法**：
```bash
apt-get download [包名]
```

**实际应用场景**：
```bash
# 下载nginx的deb包文件
apt-get download nginx

# 会在当前目录生成：
nginx_1.18.0-1ubuntu1_amd64.deb
```

### 4.2 离线安装应用


**使用场景对比**：

| 场景 | **方法** | **优势** |
|------|---------|---------|
| 在线安装 | `apt-get install` | 自动解决依赖 |
| 离线安装 | `apt-get download` + `dpkg -i` | 适合无网环境 |
| 备份安装包 | `apt-get download` | 版本控制 |

**离线安装步骤**：
```bash
# 步骤1：在有网机器上下载
apt-get download nginx nginx-common nginx-core

# 步骤2：传输到目标机器
scp *.deb user@target-server:/tmp/

# 步骤3：离线安装
dpkg -i /tmp/*.deb
```

---

## 5. 🔧 依赖关系处理


### 5.1 依赖问题的本质


> **🧠 深入理解**
> 软件依赖就像搭积木，底层的积木块必须先放好，上层的才能稳固

**常见依赖问题**：
```
问题现象：
dpkg: dependency problems prevent configuration

原因分析：
软件A需要库B的v2.0版本
系统只有库B的v1.0版本
导致安装失败
```

### 5.2 强制修复命令


**fix-broken命令**：
```bash
# 修复损坏的依赖关系
apt-get install -f

# -f 等同于 --fix-broken
# 作用：自动解决依赖冲突
```

**修复流程示意**：
```
修复过程：
检测问题 → 分析依赖 → 下载缺失包 → 重新配置 → 完成修复
    ↓         ↓         ↓           ↓         ↓
[扫描]   [计算]    [下载]      [安装]    [验证]
```

### 5.3 依赖处理最佳实践


```bash
# 标准的依赖修复流程
apt-get update                    # 更新包列表
apt-get install -f               # 修复依赖
apt-get autoremove               # 清理无用包
apt-get autoclean                # 清理缓存
```

---

## 6. 🧹 清理与维护操作


### 6.1 清理命令详细对比


| 清理命令 | **清理内容** | **保留内容** | **使用时机** |
|---------|-------------|-------------|-------------|
| `clean` | 所有下载的包文件 | 已安装软件 | 释放磁盘空间 |
| `autoclean` | 过期的包文件 | 当前版本包 | 定期维护 |
| `autoremove` | 无用的依赖包 | 手动安装的包 | 系统优化 |

### 6.2 存储空间管理


**包缓存位置**：
```bash
# APT缓存目录
/var/cache/apt/archives/

# 查看缓存大小
du -sh /var/cache/apt/archives/
```

**清理策略选择**：
```
磁盘空间充足：autoclean     (保留当前版本)
磁盘空间紧张：clean         (全部清理)
系统优化：    autoremove    (清理依赖)
```

### 6.3 配置文件保留策略


**remove vs purge对比**：

```
apt-get remove nginx：
├── 删除程序文件
├── 保留配置文件 (/etc/nginx/)
└── 适合：临时卸载，可能重装

apt-get purge nginx：
├── 删除程序文件  
├── 删除配置文件
└── 适合：完全清理，不再使用
```

---

## 7. 🎛️ 安装控制策略


### 7.1 交互控制参数


**自动确认选项**：
```bash
# 所有提示自动选择YES
apt-get install -y nginx

# 等同于：
apt-get install --yes nginx
```

> **⚠️ 使用注意**
> `-y`参数适合脚本使用，但人工操作时要谨慎，避免误装软件

### 7.2 模拟安装功能


**-s参数详解**：
```bash
# 模拟安装（不实际执行）
apt-get install -s nginx

# 输出示例：
Reading package lists... Done
The following NEW packages will be installed:
  nginx nginx-common nginx-core
Need to get 1234 kB of archives.
Inst nginx-common [...]
Inst nginx-core [...]
Inst nginx [...]
```

**模拟安装的价值**：
- 🔍 **预览**：查看将要安装的包
- ⚠️ **检查**：发现潜在冲突
- 📊 **评估**：了解磁盘空间需求

### 7.3 高级安装选项


```bash
# 只下载不安装
apt-get install --download-only nginx

# 重新配置已安装包
apt-get install --reinstall nginx

# 不升级依赖包
apt-get install --no-upgrade nginx
```

---

## 8. 🔄 APT vs APT-GET对比


### 8.1 历史发展对比


```
时间线：
1998年：APT-GET 诞生    (功能完整，参数复杂)
2014年：APT 推出        (简化操作，用户友好)
现在：  两者并存        (各有优势)
```

### 8.2 详细功能对比表


| 功能 | **APT-GET命令** | **APT命令** | **推荐使用** |
|------|----------------|-------------|-------------|
| 安装软件 | `apt-get install` | `apt install` | APT |
| 删除软件 | `apt-get remove` | `apt remove` | APT |
| 更新列表 | `apt-get update` | `apt update` | APT |
| 系统升级 | `apt-get upgrade` | `apt upgrade` | APT |
| 搜索软件 | `apt-cache search` | `apt search` | APT |
| 源码下载 | `apt-get source` | ❌ 不支持 | APT-GET |
| 编译依赖 | `apt-get build-dep` | ❌ 不支持 | APT-GET |

### 8.3 使用场景选择指南


> **🎯 选择策略**
> - **日常使用**：选择APT（简单直观）
> - **脚本编写**：选择APT-GET（稳定可靠）  
> - **源码编译**：必须使用APT-GET
> - **系统运维**：两者都要掌握

**实际应用建议**：
```bash
# 新手学习建议
平时练习：使用 apt 命令
深入学习：掌握 apt-get 完整功能
实际工作：根据场景灵活选择
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 APT-GET定位：Debian系传统包管理工具，功能完整
🔸 命令语法：apt-get [选项] [操作] [包名]
🔸 核心操作：install、remove、purge、update、upgrade
🔸 源码管理：source下载源码，build-dep安装编译依赖
🔸 离线安装：download下载包文件，配合dpkg使用
🔸 依赖修复：install -f 解决依赖问题
🔸 清理维护：clean/autoclean清理缓存，autoremove清理依赖
```

### 9.2 关键理解要点


**🔹 APT-GET vs APT的区别**：
```
APT-GET：传统工具，功能全面，脚本友好
APT：    现代工具，操作简化，用户友好
结论：   不是替代关系，而是互补关系
```

**🔹 源码包管理的价值**：
```
应用场景：
- 需要定制编译参数
- 学习软件内部实现  
- 移植到其他平台
- 调试和性能优化
```

**🔹 依赖处理的重要性**：
```
依赖关系：软件包之间的相互依存关系
处理原则：先解决依赖，再安装主包
修复工具：install -f 是万能钥匙
```

### 9.3 实际应用价值


**📚 学习路径建议**：
1. **基础阶段**：掌握install、remove、update等基本操作
2. **进阶阶段**：学会source、build-dep进行源码编译
3. **高级阶段**：熟练处理依赖冲突和系统维护
4. **专业阶段**：结合脚本实现自动化包管理

**🔧 实战技能应用**：
- **服务器运维**：批量软件安装和更新
- **开发环境**：源码编译和定制安装
- **系统维护**：依赖修复和空间清理  
- **自动化脚本**：无人值守安装部署

**🎯 掌握程度自检**：
- [ ] 能够熟练使用基本的安装删除命令
- [ ] 理解源码包下载和编译流程
- [ ] 会处理依赖关系问题
- [ ] 掌握系统清理和维护技巧
- [ ] 了解APT-GET与APT的区别和应用场景

**核心记忆要点**：
- APT-GET是传统包管理的瑞士军刀，功能全面稳定可靠
- 源码包管理让你从软件使用者变成软件定制者
- 依赖关系处理是包管理的核心技能
- 掌握清理维护让系统保持最佳状态