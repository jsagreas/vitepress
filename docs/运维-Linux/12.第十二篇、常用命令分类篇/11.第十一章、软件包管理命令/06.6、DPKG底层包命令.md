---
title: 6ã€DPKGåº•å±‚åŒ…å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [DPKGåº•å±‚åŒ…ç®¡ç†åŸºç¡€](#1-DPKGåº•å±‚åŒ…ç®¡ç†åŸºç¡€)
2. [ç›´æ¥åŒ…æ“ä½œå‘½ä»¤](#2-ç›´æ¥åŒ…æ“ä½œå‘½ä»¤)
3. [åŒ…çŠ¶æ€æŸ¥è¯¢ä¸ç®¡ç†](#3-åŒ…çŠ¶æ€æŸ¥è¯¢ä¸ç®¡ç†)
4. [å¼ºåˆ¶å®‰è£…ä¸è¦†ç›–é€‰é¡¹](#4-å¼ºåˆ¶å®‰è£…ä¸è¦†ç›–é€‰é¡¹)
5. [é…ç½®æ–‡ä»¶å¤„ç†ç­–ç•¥](#5-é…ç½®æ–‡ä»¶å¤„ç†ç­–ç•¥)
6. [åŒ…æ–‡ä»¶å†…å®¹æå–æŸ¥çœ‹](#6-åŒ…æ–‡ä»¶å†…å®¹æå–æŸ¥çœ‹)
7. [åŒ…ä¾èµ–ä¿¡æ¯åˆ†æ](#7-åŒ…ä¾èµ–ä¿¡æ¯åˆ†æ)
8. [æ•°æ®åº“çŠ¶æ€ä¿®å¤](#8-æ•°æ®åº“çŠ¶æ€ä¿®å¤)
9. [æ‰‹åŠ¨åŒ…æ³¨å†Œä¸æ³¨é”€](#9-æ‰‹åŠ¨åŒ…æ³¨å†Œä¸æ³¨é”€)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ DPKGåº•å±‚åŒ…ç®¡ç†åŸºç¡€


### 1.1 ä»€ä¹ˆæ˜¯DPKG


**é€šä¿—ç†è§£**ï¼šå¦‚æœè¯´APTæ˜¯åŒ…ç®¡ç†çš„"è‡ªåŠ¨é©¾é©¶æ±½è½¦"ï¼Œé‚£ä¹ˆDPKGå°±æ˜¯"æ‰‹åŠ¨æŒ¡æ±½è½¦"ã€‚DPKGæ˜¯Debianç³»ç»Ÿæœ€åº•å±‚çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç›´æ¥æ“ä½œ.debåŒ…æ–‡ä»¶ï¼Œä¸ä¼šè‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»ã€‚

```
å½¢è±¡æ¯”å–»ï¼š
APT = å…¨è‡ªåŠ¨æ´—è¡£æœº â†’ ä¸€é”®å®Œæˆæ‰€æœ‰æ­¥éª¤
DPKG = æ‰‹åŠ¨æ´—è¡£   â†’ æ¯ä¸ªæ­¥éª¤éƒ½éœ€è¦æ‰‹å·¥æ“ä½œ

å®é™…å¯¹æ¯”ï¼š
APTå®‰è£…ï¼šè‡ªåŠ¨ä¸‹è½½ã€æ£€æŸ¥ä¾èµ–ã€å®‰è£…é…ç½®
DPKGå®‰è£…ï¼šåªå®‰è£…æŒ‡å®šçš„.debæ–‡ä»¶ï¼Œä¸ç®¡ä¾èµ–
```

**ğŸ”¸ DPKGçš„æ ¸å¿ƒä½œç”¨**
- **ç›´æ¥æ“ä½œ**ï¼šç›´æ¥å®‰è£…ã€å¸è½½ã€æŸ¥è¯¢.debåŒ…æ–‡ä»¶
- **åº•å±‚æ§åˆ¶**ï¼šæä¾›æœ€ç²¾ç»†çš„åŒ…ç®¡ç†æ§åˆ¶
- **çŠ¶æ€ç®¡ç†**ï¼šç»´æŠ¤ç³»ç»ŸåŒ…çŠ¶æ€æ•°æ®åº“
- **å¼ºåˆ¶æ“ä½œ**ï¼šå¯ä»¥å¼ºåˆ¶æ‰§è¡ŒæŸäº›APTæ— æ³•å®Œæˆçš„æ“ä½œ

### 1.2 DPKGä¸APTçš„å…³ç³»


**ğŸ“Š å·¥å…·å±‚æ¬¡å…³ç³»**
```
ç”¨æˆ·å±‚é¢
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APT (apt)   â”‚ â† é«˜çº§åŒ…ç®¡ç†ï¼Œè‡ªåŠ¨å¤„ç†ä¾èµ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ APT-GET     â”‚ â† ä¼ ç»Ÿé«˜çº§åŒ…ç®¡ç†å·¥å…·
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚ DPKG        â”‚ â† åº•å±‚åŒ…ç®¡ç†ï¼Œç›´æ¥æ“ä½œ.deb
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ç³»ç»Ÿåº•å±‚
```

**ğŸ’¡ ä½•æ—¶ä½¿ç”¨DPKG**
- å½“APTæ— æ³•è§£å†³åŒ…å†²çªæ—¶
- éœ€è¦å®‰è£…æœ¬åœ°.debæ–‡ä»¶æ—¶
- ç³»ç»ŸåŒ…æ•°æ®åº“å‡ºç°é—®é¢˜éœ€è¦ä¿®å¤æ—¶
- éœ€è¦ç²¾ç¡®æ§åˆ¶åŒ…å®‰è£…è¿‡ç¨‹æ—¶
- è°ƒè¯•åŒ…ç®¡ç†ç›¸å…³é—®é¢˜æ—¶

### 1.3 DPKGçš„å·¥ä½œåŸç†


**ğŸ” åŒ…æ•°æ®åº“ä½ç½®**
DPKGç»´æŠ¤çš„åŒ…ä¿¡æ¯å­˜å‚¨åœ¨ `/var/lib/dpkg/` ç›®å½•ä¸‹ï¼š
- `status`ï¼šæ‰€æœ‰å·²å®‰è£…åŒ…çš„çŠ¶æ€ä¿¡æ¯
- `available`ï¼šå¯ç”¨åŒ…çš„ä¿¡æ¯
- `info/`ï¼šåŒ…çš„è¯¦ç»†ä¿¡æ¯æ–‡ä»¶å¤¹

**âš™ï¸ åŒ…çŠ¶æ€ç±»å‹**
```
å®‰è£…çŠ¶æ€ï¼š
installed    â†’ å·²å®‰è£…
not-installed â†’ æœªå®‰è£…
config-files â†’ åªå‰©é…ç½®æ–‡ä»¶
unpacked     â†’ å·²è§£åŒ…ä½†æœªé…ç½®
half-configured â†’ é…ç½®è¿‡ç¨‹ä¸­æ–­

é€‰æ‹©çŠ¶æ€ï¼š
install   â†’ æ ‡è®°ä¸ºå®‰è£…
deinstall â†’ æ ‡è®°ä¸ºå¸è½½
purge     â†’ æ ‡è®°ä¸ºå®Œå…¨åˆ é™¤
```

---

## 2. ğŸ“¦ ç›´æ¥åŒ…æ“ä½œå‘½ä»¤


### 2.1 åŸºæœ¬å®‰è£…æ“ä½œ


**ğŸ”§ å®‰è£…æœ¬åœ°åŒ…æ–‡ä»¶**
```bash
# å®‰è£…å•ä¸ª.debåŒ…
sudo dpkg -i package.deb

# å®‰è£…å¤šä¸ªåŒ…
sudo dpkg -i package1.deb package2.deb

# ä»ç›®å½•å®‰è£…æ‰€æœ‰.debåŒ…
sudo dpkg -i /path/to/packages/*.deb
```

**ğŸ’¡ å®‰è£…è¿‡ç¨‹è¯´æ˜**
å®‰è£…è¿‡ç¨‹ä¼šç»å†å‡ ä¸ªé˜¶æ®µï¼š
1. **è§£åŒ…**ï¼šå°†.debæ–‡ä»¶å†…å®¹æå–åˆ°æ–‡ä»¶ç³»ç»Ÿ
2. **é…ç½®**ï¼šè¿è¡Œå®‰è£…åè„šæœ¬ï¼Œè®¾ç½®æœåŠ¡
3. **æ›´æ–°çŠ¶æ€**ï¼šåœ¨åŒ…æ•°æ®åº“ä¸­è®°å½•å®‰è£…çŠ¶æ€

**âŒ ä¾èµ–é—®é¢˜å¤„ç†**
å½“é‡åˆ°ä¾èµ–é—®é¢˜æ—¶ï¼ŒDPKGä¼šæŠ¥é”™ä½†ä¸ä¼šè‡ªåŠ¨è§£å†³ï¼š
```bash
# DPKGæŠ¥é”™ç¤ºä¾‹
dpkg: dependency problems prevent configuration of package-name:
package-name depends on libexample (>= 1.0); however:
Package libexample is not installed.

# è§£å†³æ–¹æ³•ï¼šå…ˆå®‰è£…ä¾èµ–ï¼Œå†å®‰è£…ç›®æ ‡åŒ…
sudo apt-get install -f  # ä¿®å¤ä¾èµ–å…³ç³»
```

### 2.2 å¸è½½æ“ä½œè¯¦è§£


**ğŸ—‘ ä¸åŒå¸è½½æ–¹å¼**
```bash
# å¸è½½åŒ…ä½†ä¿ç•™é…ç½®æ–‡ä»¶
sudo dpkg -r package-name

# å®Œå…¨å¸è½½åŒ…æ‹¬é…ç½®æ–‡ä»¶
sudo dpkg -P package-name

# å¸è½½å¤šä¸ªåŒ…
sudo dpkg -r package1 package2 package3
```

**ğŸ“‹ å¸è½½çŠ¶æ€å¯¹æ¯”**
| æ“ä½œ | **å‘½ä»¤** | **ä¿ç•™å†…å®¹** | **é€‚ç”¨åœºæ™¯** |
|------|---------|-------------|-------------|
| `ç§»é™¤` | `dpkg -r` | `é…ç½®æ–‡ä»¶ä¿ç•™` | `ä¸´æ—¶å¸è½½ï¼Œå¯èƒ½é‡è£…` |
| `æ¸…é™¤` | `dpkg -P` | `å®Œå…¨åˆ é™¤` | `å½»åº•å¸è½½ï¼Œé‡Šæ”¾ç©ºé—´` |

### 2.3 é‡é…ç½®æ“ä½œ


**ğŸ”§ é‡æ–°é…ç½®å·²å®‰è£…åŒ…**
```bash
# é‡æ–°é…ç½®å•ä¸ªåŒ…
sudo dpkg-reconfigure package-name

# é‡æ–°é…ç½®æ—¶æ˜¾ç¤ºæ‰€æœ‰é—®é¢˜
sudo dpkg-reconfigure -p low package-name

# ä»¥éäº¤äº’æ¨¡å¼é‡é…ç½®
sudo DEBIAN_FRONTEND=noninteractive dpkg-reconfigure package-name
```

**ğŸ¯ å¸¸ç”¨é‡é…ç½®åœºæ™¯**
- **æ—¶åŒºè®¾ç½®**ï¼š`sudo dpkg-reconfigure tzdata`
- **é”®ç›˜å¸ƒå±€**ï¼š`sudo dpkg-reconfigure keyboard-configuration`
- **æœ¬åœ°åŒ–è®¾ç½®**ï¼š`sudo dpkg-reconfigure locales`

---

## 3. ğŸ” åŒ…çŠ¶æ€æŸ¥è¯¢ä¸ç®¡ç†


### 3.1 åŸºæœ¬çŠ¶æ€æŸ¥è¯¢


**ğŸ“Š æŸ¥çœ‹åŒ…çŠ¶æ€ï¼ˆ-sé€‰é¡¹ï¼‰**
```bash
# æŸ¥çœ‹å•ä¸ªåŒ…çš„è¯¦ç»†çŠ¶æ€
dpkg -s package-name

# è¾“å‡ºç¤ºä¾‹ï¼š
Package: nginx
Status: install ok installed
Priority: optional
Section: httpd
Installed-Size: 1024
Maintainer: Debian Nginx Maintainers
Architecture: amd64
Version: 1.18.0-6ubuntu14
Depends: libc6, libpcre3, libssl1.1
Description: small, powerful, scalable web/proxy server
```

**ğŸ”¸ çŠ¶æ€ä¿¡æ¯è§£è¯»**
- **Statuså­—æ®µ**ï¼š`install ok installed` è¡¨ç¤ºæ­£å¸¸å®‰è£…
- **Installed-Size**ï¼šåŒ…å ç”¨çš„ç£ç›˜ç©ºé—´ï¼ˆKBï¼‰
- **Depends**ï¼šåŒ…çš„ä¾èµ–å…³ç³»åˆ—è¡¨
- **Description**ï¼šåŒ…çš„åŠŸèƒ½æè¿°

### 3.2 åŒ…åˆ—è¡¨æŸ¥è¯¢ï¼ˆ-lé€‰é¡¹ï¼‰


**ğŸ“‹ åˆ—å‡ºæ‰€æœ‰åŒ…**
```bash
# åˆ—å‡ºæ‰€æœ‰å·²çŸ¥åŒ…çš„çŠ¶æ€
dpkg -l

# åˆ—å‡ºç‰¹å®šåŒ…çš„ä¿¡æ¯
dpkg -l package-name

# ä½¿ç”¨é€šé…ç¬¦æŸ¥è¯¢
dpkg -l 'nginx*'
dpkg -l '*mysql*'
```

**ğŸ’¡ çŠ¶æ€æ ‡è¯†ç¬¦å«ä¹‰**
```
ç¬¬ä¸€åˆ—ï¼ˆæœŸæœ›çŠ¶æ€ï¼‰ï¼š
i = installï¼ˆå®‰è£…ï¼‰
r = removeï¼ˆç§»é™¤ï¼‰  
p = purgeï¼ˆæ¸…é™¤ï¼‰
u = unknownï¼ˆæœªçŸ¥ï¼‰

ç¬¬äºŒåˆ—ï¼ˆå½“å‰çŠ¶æ€ï¼‰ï¼š
i = installedï¼ˆå·²å®‰è£…ï¼‰
c = config-filesï¼ˆä»…é…ç½®æ–‡ä»¶ï¼‰
n = not-installedï¼ˆæœªå®‰è£…ï¼‰
u = unpackedï¼ˆå·²è§£åŒ…ï¼‰
f = half-configuredï¼ˆåŠé…ç½®ï¼‰

ç¬¬ä¸‰åˆ—ï¼ˆé”™è¯¯æ ‡å¿—ï¼‰ï¼š
ï¼ˆç©ºï¼‰= æ— é”™è¯¯
r = reinst-requiredï¼ˆéœ€è¦é‡è£…ï¼‰
```

### 3.3 æ–‡ä»¶åˆ—è¡¨æŸ¥è¯¢ï¼ˆ-Lé€‰é¡¹ï¼‰


**ğŸ“ æŸ¥çœ‹åŒ…å®‰è£…çš„æ–‡ä»¶**
```bash
# æŸ¥çœ‹åŒ…å®‰è£…äº†å“ªäº›æ–‡ä»¶
dpkg -L package-name

# ç¤ºä¾‹è¾“å‡ºï¼š
/.
/usr
/usr/bin
/usr/bin/nginx
/usr/share
/usr/share/doc
/usr/share/doc/nginx
/etc
/etc/nginx
/etc/nginx/nginx.conf
```

**ğŸ” å®ç”¨æŸ¥è¯¢æŠ€å·§**
```bash
# ç»Ÿè®¡åŒ…å®‰è£…çš„æ–‡ä»¶æ•°é‡
dpkg -L package-name | wc -l

# æŸ¥çœ‹åŒ…çš„é…ç½®æ–‡ä»¶
dpkg -L package-name | grep '/etc/'

# æŸ¥çœ‹åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶
dpkg -L package-name | grep '/usr/bin/'
```

### 3.4 æŸ¥è¯¢æ–‡ä»¶å±äºå“ªä¸ªåŒ…


**ğŸ” åå‘æŸ¥è¯¢æ–‡ä»¶æ‰€å±åŒ…**
```bash
# æŸ¥è¯¢æ–‡ä»¶å±äºå“ªä¸ªåŒ…
dpkg -S /path/to/file

# ç¤ºä¾‹ï¼š
dpkg -S /usr/bin/nginx
# è¾“å‡ºï¼šnginx: /usr/bin/nginx

# ä½¿ç”¨é€šé…ç¬¦æŸ¥è¯¢
dpkg -S '*/nginx.conf'
```

---

## 4. ğŸ›  å¼ºåˆ¶å®‰è£…ä¸è¦†ç›–é€‰é¡¹


### 4.1 å¼ºåˆ¶é€‰é¡¹æ¦‚è§ˆ


å½“åŒ…ç®¡ç†é‡åˆ°é—®é¢˜æ—¶ï¼ŒDPKGæä¾›äº†å¼ºåˆ¶é€‰é¡¹æ¥ç»•è¿‡æŸäº›é™åˆ¶ã€‚**ä½†è¦è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå¯èƒ½ç ´åç³»ç»Ÿç¨³å®šæ€§**ã€‚

**âš ï¸ å¸¸ç”¨å¼ºåˆ¶é€‰é¡¹**
```bash
--force-depends     # å¿½ç•¥ä¾èµ–å…³ç³»é—®é¢˜
--force-conflicts   # å¿½ç•¥åŒ…å†²çª
--force-overwrite   # å…è®¸è¦†ç›–å…¶ä»–åŒ…çš„æ–‡ä»¶
--force-downgrade   # å…è®¸é™çº§å®‰è£…
--force-architecture # å¿½ç•¥æ¶æ„ä¸åŒ¹é…
```

### 4.2 ä¾èµ–å…³ç³»å¼ºåˆ¶


**ğŸ”§ å¿½ç•¥ä¾èµ–é—®é¢˜å¼ºåˆ¶å®‰è£…**
```bash
# å¼ºåˆ¶å®‰è£…å¿½ç•¥ä¾èµ–
sudo dpkg -i --force-depends package.deb

# å¼ºåˆ¶å®‰è£…å¿½ç•¥å†²çª
sudo dpkg -i --force-conflicts package.deb

# ç»„åˆå¤šä¸ªå¼ºåˆ¶é€‰é¡¹
sudo dpkg -i --force-depends --force-conflicts package.deb
```

**â— ä½¿ç”¨åœºæ™¯ä¸é£é™©**
```
é€‚ç”¨åœºæ™¯ï¼š
âœ… æµ‹è¯•ç¯å¢ƒä¸­çš„åŒ…æµ‹è¯•
âœ… å·²çŸ¥ä¾èµ–é—®é¢˜ä½†ç¡®è®¤å®‰å…¨çš„æƒ…å†µ
âœ… ä¿®å¤æŸåçš„åŒ…ç®¡ç†ç³»ç»Ÿ

é£é™©æé†’ï¼š
âŒ å¯èƒ½å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®š
âŒ å¯èƒ½ç ´åå…¶ä»–è½¯ä»¶åŠŸèƒ½
âŒ éš¾ä»¥é€šè¿‡æ­£å¸¸æ–¹å¼å¸è½½
```

### 4.3 æ–‡ä»¶è¦†ç›–å¤„ç†


**ğŸ“ å¤„ç†æ–‡ä»¶å†²çª**
```bash
# å…è®¸è¦†ç›–å…¶ä»–åŒ…çš„æ–‡ä»¶
sudo dpkg -i --force-overwrite package.deb

# æŸ¥çœ‹ä¼šè¢«è¦†ç›–çš„æ–‡ä»¶
dpkg -c package.deb | grep conflicting-file
```

**ğŸ’¡ è¦†ç›–ç­–ç•¥é€‰æ‹©**
```
è¦†ç›–å†³ç­–æµç¨‹ï¼š
1. ç¡®è®¤è¢«è¦†ç›–æ–‡ä»¶çš„é‡è¦æ€§
2. å¤‡ä»½åŸæ–‡ä»¶ï¼ˆå¦‚æœé‡è¦ï¼‰
3. æ‰§è¡Œè¦†ç›–å®‰è£…
4. éªŒè¯ç³»ç»ŸåŠŸèƒ½æ­£å¸¸
```

### 4.4 æ¶æ„å…¼å®¹æ€§å¼ºåˆ¶


**ğŸ— å¤„ç†æ¶æ„ä¸åŒ¹é…**
```bash
# å¼ºåˆ¶å®‰è£…ä¸åŒæ¶æ„çš„åŒ…ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
sudo dpkg -i --force-architecture package.deb

# æŸ¥çœ‹åŒ…çš„æ¶æ„ä¿¡æ¯
dpkg -I package.deb | grep Architecture
```

---

## 5. ğŸ“‹ é…ç½®æ–‡ä»¶å¤„ç†ç­–ç•¥


### 5.1 é…ç½®æ–‡ä»¶çŠ¶æ€ç†è§£


**ğŸ’¡ é…ç½®æ–‡ä»¶çš„ä¸‰ç§çŠ¶æ€**
- **æœªä¿®æ”¹**ï¼šå®‰è£…åä»æœªæ‰‹åŠ¨ç¼–è¾‘è¿‡
- **å·²ä¿®æ”¹**ï¼šç”¨æˆ·æ‰‹åŠ¨ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶  
- **å†²çª**ï¼šæ–°ç‰ˆæœ¬é…ç½®ä¸ç”¨æˆ·ä¿®æ”¹å†²çª

### 5.2 å‡çº§æ—¶çš„é…ç½®å¤„ç†


**ğŸ”„ é…ç½®æ–‡ä»¶å†²çªå¤„ç†é€‰é¡¹**
```bash
# å‡çº§æ—¶ä¿æŒå½“å‰é…ç½®æ–‡ä»¶
sudo dpkg -i --force-confold package.deb

# å‡çº§æ—¶ä½¿ç”¨æ–°çš„é…ç½®æ–‡ä»¶
sudo dpkg -i --force-confnew package.deb

# è®©ç”¨æˆ·äº¤äº’å¼é€‰æ‹©
sudo dpkg -i package.deb
# ç³»ç»Ÿä¼šæç¤ºé€‰æ‹©ä¿ç•™å“ªä¸ªç‰ˆæœ¬
```

**ğŸ“Š é…ç½®å¤„ç†ç­–ç•¥å¯¹æ¯”**
| é€‰é¡¹ | **è¡Œä¸º** | **é€‚ç”¨åœºæ™¯** | **é£é™©** |
|------|---------|-------------|---------|
| `confold` | `ä¿ç•™æ—§é…ç½®` | `è‡ªå®šä¹‰é…ç½®è¾ƒå¤š` | `å¯èƒ½ç¼ºå¤±æ–°åŠŸèƒ½` |
| `confnew` | `ä½¿ç”¨æ–°é…ç½®` | `ä½¿ç”¨é»˜è®¤é…ç½®` | `ä¸¢å¤±è‡ªå®šä¹‰è®¾ç½®` |
| `äº¤äº’å¼` | `é€ä¸ªè¯¢é—®` | `é‡è¦é…ç½®æ›´æ–°` | `éœ€è¦äººå·¥åˆ¤æ–­` |

### 5.3 é…ç½®æ–‡ä»¶æ‰‹åŠ¨ç®¡ç†


**ğŸ”§ æŸ¥çœ‹é…ç½®æ–‡ä»¶å·®å¼‚**
```bash
# æ¯”è¾ƒå½“å‰é…ç½®ä¸åŒ…é»˜è®¤é…ç½®
sudo dpkg --verify package-name

# æŸ¥çœ‹åŒ…çš„æ‰€æœ‰é…ç½®æ–‡ä»¶
dpkg-query -W -f='${Conffiles}\n' package-name
```

**ğŸ“ æ‰‹åŠ¨æ¢å¤é»˜è®¤é…ç½®**
```bash
# 1. å¤‡ä»½å½“å‰é…ç½®
sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup

# 2. é‡æ–°å®‰è£…åŒ…è·å–é»˜è®¤é…ç½®
sudo apt-get install --reinstall nginx

# 3. æˆ–è€…ä»åŒ…ä¸­æå–é»˜è®¤é…ç½®
dpkg -x nginx.deb /tmp/nginx-extract
```

---

## 6. ğŸ“ åŒ…æ–‡ä»¶å†…å®¹æå–æŸ¥çœ‹


### 6.1 æŸ¥çœ‹åŒ…å†…å®¹ä¿¡æ¯


**ğŸ” ä¸å®‰è£…æŸ¥çœ‹åŒ…ä¿¡æ¯**
```bash
# æŸ¥çœ‹.debåŒ…çš„æ§åˆ¶ä¿¡æ¯
dpkg -I package.deb

# æŸ¥çœ‹åŒ…å«çš„æ–‡ä»¶åˆ—è¡¨
dpkg -c package.deb

# æŸ¥çœ‹åŒ…çš„è¯¦ç»†æè¿°
dpkg -I package.deb | grep -A 10 "Description:"
```

**ğŸ“Š åŒ…ä¿¡æ¯è§£è¯»**
```
æ§åˆ¶ä¿¡æ¯åŒ…å«ï¼š
- Packageï¼šåŒ…å
- Versionï¼šç‰ˆæœ¬å·
- Architectureï¼šç›®æ ‡æ¶æ„
- Dependsï¼šä¾èµ–å…³ç³»
- Installed-Sizeï¼šå®‰è£…åå¤§å°
- Descriptionï¼šåŒ…æè¿°
```

### 6.2 æå–åŒ…æ–‡ä»¶å†…å®¹


**ğŸ“¦ æå–åŒ…åˆ°æŒ‡å®šç›®å½•**
```bash
# æå–åŒ…çš„æ‰€æœ‰æ–‡ä»¶åˆ°ç›®å½•
dpkg -x package.deb /tmp/extracted/

# æå–åŒ…çš„æ§åˆ¶ä¿¡æ¯åˆ°ç›®å½•
dpkg -e package.deb /tmp/control/

# æŸ¥çœ‹æå–çš„æ–‡ä»¶ç»“æ„
tree /tmp/extracted/
```

**ğŸ’¡ æå–çš„å®é™…ç”¨é€”**
- **æŸ¥çœ‹æºç **ï¼šäº†è§£è½¯ä»¶çš„å®ç°æ–¹å¼
- **è·å–é…ç½®**ï¼šæå–é»˜è®¤é…ç½®æ–‡ä»¶ä½œä¸ºå‚è€ƒ
- **è°ƒè¯•é—®é¢˜**ï¼šåˆ†æåŒ…çš„æ–‡ä»¶ç»„ç»‡ç»“æ„
- **å­¦ä¹ æ‰“åŒ…**ï¼šäº†è§£.debåŒ…çš„å†…éƒ¨ç»“æ„

### 6.3 åŒ…å†…å®¹æœç´¢


**ğŸ” åœ¨åŒ…å†…å®¹ä¸­æœç´¢æ–‡ä»¶**
```bash
# æœç´¢åŒ…å«ç‰¹å®šæ–‡ä»¶çš„åŒ…
dpkg -c package.deb | grep "filename"

# æœç´¢åŒ…å«ç‰¹å®šè·¯å¾„çš„æ–‡ä»¶
dpkg -c package.deb | grep "/usr/bin/"

# ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢
dpkg -c package.deb | grep -E "\.(conf|cfg)$"
```

---

## 7. ğŸ”— åŒ…ä¾èµ–ä¿¡æ¯åˆ†æ


### 7.1 ä¾èµ–å…³ç³»æŸ¥è¯¢


**ğŸ“Š åˆ†æåŒ…çš„ä¾èµ–å…³ç³»**
```bash
# æŸ¥çœ‹åŒ…çš„ç›´æ¥ä¾èµ–
apt-cache depends package-name

# æŸ¥çœ‹åŒ…çš„åå‘ä¾èµ–ï¼ˆå“ªäº›åŒ…ä¾èµ–å®ƒï¼‰
apt-cache rdepends package-name

# ä½¿ç”¨dpkgæŸ¥çœ‹å·²å®‰è£…åŒ…çš„ä¾èµ–
dpkg -s package-name | grep Depends
```

**ğŸ” ä¾èµ–å…³ç³»ç±»å‹**
```
ä¾èµ–ç±»å‹è¯´æ˜ï¼š
Dependsï¼šå¿…é¡»ä¾èµ–ï¼Œç¼ºå°‘æ— æ³•æ­£å¸¸è¿è¡Œ
Recommendsï¼šæ¨èä¾èµ–ï¼Œé€šå¸¸ä¼šè‡ªåŠ¨å®‰è£…
Suggestsï¼šå»ºè®®ä¾èµ–ï¼Œæ‰©å±•åŠŸèƒ½éœ€è¦
Conflictsï¼šå†²çªå…³ç³»ï¼Œä¸èƒ½åŒæ—¶å®‰è£…
Replacesï¼šæ›¿æ¢å…³ç³»ï¼Œä¼šæ›¿æ¢å¦ä¸€ä¸ªåŒ…
```

### 7.2 ä¾èµ–é—®é¢˜è¯Šæ–­


**ğŸ”§ è¯Šæ–­ä¾èµ–é—®é¢˜**
```bash
# æ£€æŸ¥ç³»ç»Ÿä¸­çš„æŸåä¾èµ–
apt-get check

# æŸ¥çœ‹æœªæ»¡è¶³çš„ä¾èµ–
dpkg --audit

# æŸ¥çœ‹å¤„äºåŠé…ç½®çŠ¶æ€çš„åŒ…
dpkg -l | grep '^.[^i]'
```

**ğŸ’Š ä¾èµ–é—®é¢˜ä¿®å¤**
```bash
# å°è¯•è‡ªåŠ¨ä¿®å¤ä¾èµ–é—®é¢˜
sudo apt-get install -f

# å¼ºåˆ¶é‡æ–°é…ç½®æœ‰é—®é¢˜çš„åŒ…
sudo dpkg --configure -a

# å¦‚æœè‡ªåŠ¨ä¿®å¤å¤±è´¥ï¼Œæ‰‹åŠ¨å®‰è£…ç¼ºå¤±ä¾èµ–
sudo apt-get install missing-dependency
```

### 7.3 å¾ªç¯ä¾èµ–å¤„ç†


**ğŸ”„ å¤„ç†åŒ…çš„å¾ªç¯ä¾èµ–**
å¾ªç¯ä¾èµ–æ˜¯æŒ‡åŒ…Aä¾èµ–åŒ…Bï¼ŒåŒ…Bä¹Ÿä¾èµ–åŒ…Açš„æƒ…å†µã€‚

```
å¤„ç†ç­–ç•¥ï¼š
1. åŒæ—¶å®‰è£…ç›¸å…³åŒ…ï¼š
   sudo dpkg -i package-a.deb package-b.deb
   
2. ä½¿ç”¨å¼ºåˆ¶é€‰é¡¹ï¼š
   sudo dpkg -i --force-depends package-a.deb
   sudo dpkg -i package-b.deb
   
3. é‡æ–°é…ç½®æ‰€æœ‰åŒ…ï¼š
   sudo dpkg --configure -a
```

---

## 8. ğŸ”§ æ•°æ®åº“çŠ¶æ€ä¿®å¤


### 8.1 åŒ…æ•°æ®åº“é—®é¢˜è¯Šæ–­


**ğŸ” å¸¸è§æ•°æ®åº“é—®é¢˜**
- åŒ…çŠ¶æ€ä¸ä¸€è‡´
- æ•°æ®åº“æ–‡ä»¶æŸå
- å®‰è£…è¿‡ç¨‹ä¸­æ–­å¯¼è‡´çš„æ®‹ç•™çŠ¶æ€
- æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶å¯¼è‡´çš„çŠ¶æ€å¼‚å¸¸

**ğŸ“Š æ£€æŸ¥æ•°æ®åº“çŠ¶æ€**
```bash
# æ£€æŸ¥åŒ…æ•°æ®åº“å®Œæ•´æ€§
sudo dpkg --audit

# æŸ¥çœ‹çŠ¶æ€å¼‚å¸¸çš„åŒ…
dpkg -l | grep -v '^ii'

# æ£€æŸ¥æ˜¯å¦æœ‰å­¤ç«‹çš„é…ç½®æ–‡ä»¶
dpkg -l | grep '^rc'
```

### 8.2 æ•°æ®åº“ä¿®å¤æ“ä½œ


**ğŸ›  ä¿®å¤åŒ…æ•°æ®åº“**
```bash
# é‡æ–°é…ç½®æ‰€æœ‰æœªå®Œæˆé…ç½®çš„åŒ…
sudo dpkg --configure -a

# å¼ºåˆ¶é‡æ–°å®‰è£…æœ‰é—®é¢˜çš„åŒ…
sudo apt-get install --reinstall problem-package

# æ¸…ç†å­¤ç«‹çš„é…ç½®æ–‡ä»¶
sudo dpkg -P $(dpkg -l | grep '^rc' | awk '{print $2}')
```

**âš ï¸ ä¸¥é‡æŸåæ—¶çš„ä¿®å¤**
```bash
# å¤‡ä»½åŒ…æ•°æ®åº“
sudo cp -r /var/lib/dpkg /var/lib/dpkg.backup

# é‡å»ºåŒ…æ•°æ®åº“ï¼ˆæç«¯æƒ…å†µä¸‹ä½¿ç”¨ï¼‰
sudo rm /var/lib/dpkg/status
sudo touch /var/lib/dpkg/status
sudo dpkg --clear-avail

# é‡æ–°æ‰«æå·²å®‰è£…çš„åŒ…ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
for pkg in $(ls /var/lib/dpkg/info/*.list | sed 's/.*\/\([^/]*\)\.list/\1/'); do
    sudo dpkg -s $pkg >/dev/null 2>&1 || echo "Package $pkg needs attention"
done
```

### 8.3 çŠ¶æ€ä¸€è‡´æ€§æ¢å¤


**ğŸ”„ æ¢å¤åŒ…çŠ¶æ€ä¸€è‡´æ€§**
```bash
# æŸ¥çœ‹åŒ…çš„å®é™…å®‰è£…çŠ¶æ€
dpkg-query -f '${Status} ${Package}\n' -W | grep -v "install ok installed"

# æ‰‹åŠ¨æ ‡è®°åŒ…çŠ¶æ€
sudo dpkg --set-selections < package-selections.txt

# åº”ç”¨é€‰æ‹©çš„çŠ¶æ€å˜æ›´
sudo apt-get dselect-upgrade
```

---

## 9. âœ‹ æ‰‹åŠ¨åŒ…æ³¨å†Œä¸æ³¨é”€


### 9.1 æ‰‹åŠ¨åŒ…æ³¨å†Œ


æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨å°†è½¯ä»¶æ³¨å†Œåˆ°DPKGæ•°æ®åº“ä¸­ã€‚

**ğŸ“ åˆ›å»ºåŒ…ä¿¡æ¯æ–‡ä»¶**
```bash
# åˆ›å»ºåŒ…çš„æ§åˆ¶ä¿¡æ¯
sudo mkdir -p /var/lib/dpkg/info/manual-package.list
sudo touch /var/lib/dpkg/info/manual-package.control

# ç¼–è¾‘æ§åˆ¶æ–‡ä»¶
sudo cat > /var/lib/dpkg/info/manual-package.control << EOF
Package: manual-package
Status: install ok installed
Version: 1.0.0
Architecture: amd64
Description: Manually registered package
EOF
```

**ğŸ”§ æ³¨å†Œå·²å®‰è£…è½¯ä»¶**
```bash
# åˆ—å‡ºè½¯ä»¶å®‰è£…çš„æ–‡ä»¶
find /usr/local/manual-software -type f > /tmp/file-list

# å°†æ–‡ä»¶åˆ—è¡¨æ³¨å†Œåˆ°DPKG
sudo cp /tmp/file-list /var/lib/dpkg/info/manual-package.list

# æ›´æ–°DPKGæ•°æ®åº“
sudo dpkg --set-selections << EOF
manual-package install
EOF
```

### 9.2 åŒ…æ³¨é”€æ“ä½œ


**ğŸ—‘ å®‰å…¨æ³¨é”€åŒ…**
```bash
# 1. åœæ­¢ç›¸å…³æœåŠ¡
sudo systemctl stop service-name

# 2. æ ‡è®°åŒ…ä¸ºç§»é™¤çŠ¶æ€
echo "package-name deinstall" | sudo dpkg --set-selections

# 3. ä»æ•°æ®åº“ä¸­ç§»é™¤åŒ…ä¿¡æ¯
sudo dpkg --remove package-name --force-remove-reinstreq
```

### 9.3 æ‰¹é‡åŒ…çŠ¶æ€ç®¡ç†


**ğŸ“‹ å¯¼å‡ºå’Œå¯¼å…¥åŒ…é€‰æ‹©**
```bash
# å¯¼å‡ºå½“å‰ç³»ç»Ÿçš„åŒ…é€‰æ‹©çŠ¶æ€
dpkg --get-selections > package-selections.txt

# åœ¨æ–°ç³»ç»Ÿä¸Šå¯¼å…¥åŒ…é€‰æ‹©
sudo dpkg --set-selections < package-selections.txt

# åº”ç”¨é€‰æ‹©çŠ¶æ€
sudo apt-get dselect-upgrade
```

**ğŸ’¡ åŒ…é€‰æ‹©æ–‡ä»¶æ ¼å¼**
```
package-name install
another-package deinstall
third-package purge
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ DPKGæœ¬è´¨ï¼šDebianç³»ç»Ÿçš„åº•å±‚åŒ…ç®¡ç†å·¥å…·ï¼Œç›´æ¥æ“ä½œ.debæ–‡ä»¶
ğŸ”¸ ä¸APTå…³ç³»ï¼šDPKGæ˜¯åº•å±‚å·¥å…·ï¼ŒAPTæ˜¯é«˜çº§å‰ç«¯ï¼Œè‡ªåŠ¨å¤„ç†ä¾èµ–
ğŸ”¸ æ ¸å¿ƒåŠŸèƒ½ï¼šå®‰è£…ã€å¸è½½ã€æŸ¥è¯¢ã€é…ç½®åŒ…ï¼Œç»´æŠ¤åŒ…çŠ¶æ€æ•°æ®åº“
ğŸ”¸ å¼ºåˆ¶é€‰é¡¹ï¼šè§£å†³åŒ…å†²çªå’Œä¾èµ–é—®é¢˜çš„æœ€åæ‰‹æ®µï¼Œéœ€è°¨æ…ä½¿ç”¨
ğŸ”¸ çŠ¶æ€ç®¡ç†ï¼šç»´æŠ¤è¯¦ç»†çš„åŒ…çŠ¶æ€ä¿¡æ¯ï¼Œæ”¯æŒç²¾ç¡®çš„ç³»ç»Ÿç®¡ç†
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä½•æ—¶ä½¿ç”¨DPKGè€ŒéAPT**
```
ä½¿ç”¨DPKGçš„åœºæ™¯ï¼š
- å®‰è£…æœ¬åœ°.debæ–‡ä»¶
- APTæ— æ³•è§£å†³çš„åŒ…å†²çª
- ç²¾ç¡®æ§åˆ¶åŒ…å®‰è£…è¿‡ç¨‹
- ä¿®å¤åŒ…ç®¡ç†ç³»ç»Ÿé—®é¢˜
- è°ƒè¯•åŒ…ç›¸å…³é—®é¢˜

ä¸é€‚ç”¨åœºæ™¯ï¼š
- æ—¥å¸¸è½¯ä»¶å®‰è£…ï¼ˆç”¨APTæ›´å¥½ï¼‰
- éœ€è¦è‡ªåŠ¨è§£å†³ä¾èµ–çš„æƒ…å†µ
- æ–°æ‰‹ç”¨æˆ·çš„å¸¸è§„æ“ä½œ
```

**ğŸ”¹ åŒ…çŠ¶æ€çš„é‡è¦æ€§**
```
åŒ…çŠ¶æ€åæ˜ ï¼š
- åŒ…çš„å®‰è£…æƒ…å†µ
- é…ç½®æ˜¯å¦å®Œæˆ
- æ˜¯å¦å­˜åœ¨é—®é¢˜
- ç”¨æˆ·çš„æ“ä½œæ„å›¾

çŠ¶æ€ç®¡ç†æ„ä¹‰ï¼š
- ç¡®ä¿ç³»ç»Ÿä¸€è‡´æ€§
- æ”¯æŒç²¾ç¡®çš„åŒ…æ“ä½œ
- ä¾¿äºé—®é¢˜è¯Šæ–­å’Œä¿®å¤
```

**ğŸ”¹ å¼ºåˆ¶é€‰é¡¹çš„åŒåˆƒå‰‘ç‰¹æ€§**
```
å¼ºåˆ¶é€‰é¡¹çš„ä½œç”¨ï¼š
âœ… è§£å†³å¤æ‚çš„åŒ…ç®¡ç†é—®é¢˜
âœ… åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ¢å¤ç³»ç»Ÿ
âœ… æ”¯æŒé«˜çº§ç”¨æˆ·ç²¾ç¡®æ§åˆ¶

ä½¿ç”¨é£é™©ï¼š
âŒ å¯èƒ½ç ´åç³»ç»Ÿç¨³å®šæ€§
âŒ éš¾ä»¥é€šè¿‡å¸¸è§„æ–¹å¼æ¢å¤
âŒ å¯èƒ½å½±å“å…¶ä»–è½¯ä»¶åŠŸèƒ½

ä½¿ç”¨åŸåˆ™ï¼š
- å…ˆå°è¯•å¸¸è§„è§£å†³æ–¹æ¡ˆ
- å……åˆ†ç†è§£æ“ä½œåæœ
- åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯
- åšå¥½ç³»ç»Ÿå¤‡ä»½
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


- **ç³»ç»Ÿç»´æŠ¤**ï¼šç²¾ç¡®æ§åˆ¶åŒ…çš„å®‰è£…å’Œé…ç½®è¿‡ç¨‹
- **é—®é¢˜ä¿®å¤**ï¼šè§£å†³APTæ— æ³•å¤„ç†çš„å¤æ‚åŒ…é—®é¢˜
- **å¼€å‘è°ƒè¯•**ï¼šå®‰è£…æµ‹è¯•ç‰ˆæœ¬çš„.debåŒ…è¿›è¡Œå¼€å‘
- **ç³»ç»Ÿè¿ç§»**ï¼šç²¾ç¡®å¤åˆ¶ç³»ç»Ÿçš„åŒ…é…ç½®çŠ¶æ€
- **å®‰å…¨ç®¡ç†**ï¼šæ§åˆ¶åŒ…çš„å®‰è£…æ¥æºå’Œç‰ˆæœ¬

### 10.4 æœ€ä½³å®è·µå»ºè®®


```
ğŸ¯ æ—¥å¸¸ä½¿ç”¨ï¼š
- ä¼˜å…ˆä½¿ç”¨APTè¿›è¡ŒåŒ…ç®¡ç†
- åªåœ¨å¿…è¦æ—¶ä½¿ç”¨DPKG
- å®šæœŸæ£€æŸ¥åŒ…çŠ¶æ€ä¸€è‡´æ€§
- ä¿æŒåŒ…æ•°æ®åº“å¥åº·

ğŸ”§ é—®é¢˜å¤„ç†ï¼š
- é‡åˆ°é—®é¢˜å…ˆè¯Šæ–­å†æ“ä½œ
- ä½¿ç”¨æœ€å°å¿…è¦çš„å¼ºåˆ¶é€‰é¡¹
- æ“ä½œå‰å¤‡ä»½é‡è¦é…ç½®
- è®°å½•æ“ä½œæ­¥éª¤ä¾¿äºå›æ»š

ğŸ“š å­¦ä¹ æå‡ï¼š
- ç†è§£åŒ…ç®¡ç†çš„åº•å±‚åŸç†
- ç»ƒä¹ åŒ…çŠ¶æ€æŸ¥è¯¢å’Œåˆ†æ
- æŒæ¡å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•
- å­¦ä¹ .debåŒ…çš„ç»“æ„å’Œåˆ¶ä½œ
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- DPKGæ˜¯åº•å±‚å·¥å…·ï¼Œç²¾ç¡®ä½†éœ€è¦æ‰‹å·¥å¤„ç†ä¾èµ–
- åŒ…çŠ¶æ€ä¿¡æ¯æ˜¯ç³»ç»Ÿä¸€è‡´æ€§çš„é‡è¦ä¿éšœ
- å¼ºåˆ¶é€‰é¡¹æ˜¯åŒåˆƒå‰‘ï¼Œè°¨æ…ä½¿ç”¨æ˜¯å…³é”®
- é—®é¢˜è¯Šæ–­æ¯”ç›²ç›®æ“ä½œæ›´é‡è¦