---
title: 5ã€è‡ªå®šä¹‰zoneæ“ä½œ
---
## ğŸ“š ç›®å½•

1. [ZoneåŒºåŸŸåŸºç¡€æ¦‚å¿µ](#1-ZoneåŒºåŸŸåŸºç¡€æ¦‚å¿µ)
2. [è‡ªå®šä¹‰Zoneæ“ä½œè¯¦è§£](#2-è‡ªå®šä¹‰Zoneæ“ä½œè¯¦è§£)
3. [Zoneä¸ç½‘ç»œæ¥å£ç®¡ç†](#3-Zoneä¸ç½‘ç»œæ¥å£ç®¡ç†)
4. [Zoneé…ç½®æ–‡ä»¶ä¸æŒä¹…åŒ–](#4-Zoneé…ç½®æ–‡ä»¶ä¸æŒä¹…åŒ–)
5. [å®ç”¨Zoneç®¡ç†æŠ€å·§](#5-å®ç”¨Zoneç®¡ç†æŠ€å·§)
6. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#6-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”° ZoneåŒºåŸŸåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ZoneåŒºåŸŸ


**ç®€å•ç†è§£Zone**ï¼š
```
Zoneå°±åƒæ˜¯ä½ å®¶çš„ä¸åŒæˆ¿é—´ï¼š
ğŸ  å®¢å… â†’ publicåŒºåŸŸï¼ˆå¯¹å¤–å¼€æ”¾ï¼Œä½†æœ‰é™åˆ¶ï¼‰
ğŸ›ï¸ å§å®¤ â†’ homeåŒºåŸŸï¼ˆå®¶äººå¯ä»¥éšæ„è¿›å…¥ï¼‰
ğŸšª é—¨å… â†’ dmzåŒºåŸŸï¼ˆè®¿å®¢ä¸´æ—¶åœç•™ï¼‰
ğŸ”’ ä¿é™©æŸœ â†’ dropåŒºåŸŸï¼ˆæ‹’ç»ä¸€åˆ‡å¤–æ¥è®¿é—®ï¼‰

ä¸åŒæˆ¿é—´æœ‰ä¸åŒçš„è®¿é—®è§„åˆ™ï¼ŒZoneå°±æ˜¯ç»™ç½‘ç»œæ¥å£åˆ†é…ä¸åŒçš„å®‰å…¨è§„åˆ™
```

### 1.2 Linuxç³»ç»Ÿé»˜è®¤Zoneç±»å‹


| Zoneåç§° | **ä¿¡ä»»çº§åˆ«** | **å…¸å‹ç”¨é€”** | **é»˜è®¤è¡Œä¸º** |
|---------|------------|-------------|-------------|
| ğŸŸ¢ **trusted** | `å®Œå…¨ä¿¡ä»»` | `å†…ç½‘æ ¸å¿ƒè®¾å¤‡` | `å…è®¸æ‰€æœ‰æµé‡` |
| ğŸ  **home** | `é«˜ä¿¡ä»»` | `å®¶åº­ç½‘ç»œ` | `å…è®¸å¸¸ç”¨æœåŠ¡` |
| ğŸ¢ **work** | `ä¸­ç­‰ä¿¡ä»»` | `åŠå…¬ç½‘ç»œ` | `å…è®¸å·¥ä½œç›¸å…³æœåŠ¡` |
| ğŸŒ **public** | `ä½ä¿¡ä»»` | `å…¬å…±åœºæ‰€WiFi` | `åªå…è®¸å¿…è¦æœåŠ¡` |
| ğŸšª **dmz** | `éš”ç¦»åŒº` | `å¯¹å¤–æœåŠ¡å™¨` | `ä¸¥æ ¼æ§åˆ¶è®¿é—®` |
| ğŸ”´ **drop** | `é›¶ä¿¡ä»»` | `å±é™©ç½‘ç»œ` | `ä¸¢å¼ƒæ‰€æœ‰åŒ…` |

### 1.3 Zoneå·¥ä½œåŸç†å›¾ç¤º


```
å¤–éƒ¨ç½‘ç»œè¯·æ±‚æµç¨‹ï¼š
  
  å¤–éƒ¨è¯·æ±‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç½‘ç»œæ¥å£   â”‚ â† eth0ã€wlan0ç­‰
â”‚  (ç‰©ç†å±‚)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Zoneåˆ†é…   â”‚ â† publicã€homeç­‰
â”‚  (é€»è¾‘å±‚)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§„åˆ™åŒ¹é…   â”‚ â† ç«¯å£ã€æœåŠ¡ã€åè®®
â”‚  (ç­–ç•¥å±‚)   â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
  å…è®¸/æ‹’ç»
```

---

## 2. ğŸ› ï¸ è‡ªå®šä¹‰Zoneæ“ä½œè¯¦è§£


### 2.1 åˆ›å»ºæ–°çš„ZoneåŒºåŸŸ


**åŸºæœ¬åˆ›å»ºè¯­æ³•**ï¼š
```bash
# åˆ›å»ºæ–°åŒºåŸŸçš„åŸºæœ¬å‘½ä»¤
firewall-cmd --new-zone=è‡ªå®šä¹‰åç§° --permanent
```

**ğŸ§ª å®è·µæ¼”ç¤º**ï¼š
```bash
# åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äºæ•°æ®åº“æœåŠ¡å™¨çš„zone
firewall-cmd --new-zone=database --permanent

# åˆ›å»ºå¼€å‘ç¯å¢ƒä¸“ç”¨zone  
firewall-cmd --new-zone=dev-env --permanent

# é‡æ–°åŠ è½½é…ç½®ä½¿æ–°zoneç”Ÿæ•ˆ
firewall-cmd --reload
```

**ğŸ’¡ è‡ªå®šä¹‰Zoneå‘½åå»ºè®®**ï¼š
- âœ… **æ¨èå‘½å**ï¼š`database`ã€`web-server`ã€`dev-team`
- âŒ **é¿å…å‘½å**ï¼š`zone1`ã€`test`ã€`temp`ï¼ˆå¤ªæ¨¡ç³Šï¼‰

### 2.2 ZoneåŒºåŸŸåˆ é™¤æ“ä½œ


**åˆ é™¤Zoneçš„æ­¥éª¤**ï¼š
```bash
# ç¬¬1æ­¥ï¼šç¡®è®¤zoneæ²¡æœ‰è¢«ç½‘ç»œæ¥å£ä½¿ç”¨
firewall-cmd --get-zone-of-interface=eth0

# ç¬¬2æ­¥ï¼šåˆ é™¤zoneï¼ˆå¿…é¡»åŠ --permanentï¼‰
firewall-cmd --delete-zone=database --permanent

# ç¬¬3æ­¥ï¼šé‡æ–°åŠ è½½é…ç½®
firewall-cmd --reload
```

> âš ï¸ **é‡è¦æé†’**
> 
> åˆ é™¤zoneå‰å¿…é¡»ç¡®ä¿æ²¡æœ‰ç½‘ç»œæ¥å£æ­£åœ¨ä½¿ç”¨è¿™ä¸ªzoneï¼Œå¦åˆ™ä¼šåˆ é™¤å¤±è´¥

### 2.3 æŸ¥è¯¢æ¥å£æ‰€å±Zone


**æŸ¥çœ‹ç½‘ç»œæ¥å£å½’å±**ï¼š
```bash
# æŸ¥çœ‹ç‰¹å®šæ¥å£å±äºå“ªä¸ªzone
firewall-cmd --get-zone-of-interface=eth0
# è¾“å‡ºï¼špublic

# æŸ¥çœ‹æ‰€æœ‰æ¥å£çš„zoneåˆ†é…
firewall-cmd --get-active-zones
```

**å®é™…è¾“å‡ºç¤ºä¾‹**ï¼š
```
public
  interfaces: eth0 wlan0
home
  interfaces: eth1
```

---

## 3. ğŸ”Œ Zoneä¸ç½‘ç»œæ¥å£ç®¡ç†


### 3.1 æŒ‡å®šZoneè¿›è¡Œæ“ä½œ


**--zoneå‚æ•°çš„é‡è¦æ€§**ï¼š

```bash
# é”™è¯¯æ–¹å¼ï¼šä¸æŒ‡å®šzoneï¼ˆä¼šæ“ä½œé»˜è®¤zoneï¼‰
firewall-cmd --add-service=ssh

# æ­£ç¡®æ–¹å¼ï¼šæ˜ç¡®æŒ‡å®šè¦æ“ä½œçš„zone
firewall-cmd --zone=database --add-service=mysql --permanent
```

**ğŸ¯ Zoneæ“ä½œæœ€ä½³å®è·µ**ï¼š
```bash
# 1. å…ˆæŸ¥çœ‹å½“å‰é»˜è®¤zone
firewall-cmd --get-default-zone

# 2. æ˜ç¡®æŒ‡å®šzoneè¿›è¡Œæ“ä½œ
firewall-cmd --zone=database --list-services

# 3. æ·»åŠ æœåŠ¡åˆ°ç‰¹å®šzone
firewall-cmd --zone=database --add-service=mysql --permanent

# 4. é‡æ–°åŠ è½½é…ç½®
firewall-cmd --reload
```

### 3.2 æ¥å£Zoneåˆ†é…ç®¡ç†


**åˆ‡æ¢æ¥å£çš„Zone**ï¼š
```bash
# ä¸´æ—¶åˆ‡æ¢æ¥å£zoneï¼ˆé‡å¯åå¤±æ•ˆï¼‰
firewall-cmd --zone=home --change-interface=eth0

# æ°¸ä¹…åˆ‡æ¢æ¥å£zone
firewall-cmd --zone=home --change-interface=eth0 --permanent
```

**ç½‘ç»œåœºæ™¯ç¤ºä¾‹**ï¼š
```
åŠå…¬ç¯å¢ƒç½‘ç»œæ¥å£åˆ†é…ï¼š
eth0 (å¤–ç½‘æ¥å£) â†’ public zone
eth1 (å†…ç½‘æ¥å£) â†’ work zone  
lo (æœ¬åœ°å›ç¯)   â†’ trusted zone
```

---

## 4. ğŸ“ Zoneé…ç½®æ–‡ä»¶ä¸æŒä¹…åŒ–


### 4.1 Zoneé…ç½®æ–‡ä»¶ä½ç½®


**é…ç½®æ–‡ä»¶å­˜å‚¨ç»“æ„**ï¼š
```
/etc/firewalld/zones/
â”œâ”€â”€ public.xml          â† ç³»ç»Ÿé»˜è®¤zoneé…ç½®
â”œâ”€â”€ home.xml            â† ç³»ç»Ÿé»˜è®¤zoneé…ç½®  
â”œâ”€â”€ database.xml        â† è‡ªå®šä¹‰zoneé…ç½®
â””â”€â”€ dev-env.xml         â† è‡ªå®šä¹‰zoneé…ç½®

/usr/lib/firewalld/zones/  â† ç³»ç»ŸåŸå§‹æ¨¡æ¿ï¼ˆä¸è¦ä¿®æ”¹ï¼‰
```

### 4.2 Zoneé…ç½®æ–‡ä»¶ç¤ºä¾‹


**è‡ªå®šä¹‰database zoneé…ç½®æ–‡ä»¶**ï¼š
```xml
<?xml version="1.0" encoding="utf-8"?>
<zone>
  <short>Database</short>
  <description>ä¸“ç”¨äºæ•°æ®åº“æœåŠ¡å™¨çš„å®‰å…¨åŒºåŸŸ</description>
  <service name="mysql"/>
  <service name="postgresql"/>
  <port protocol="tcp" port="3306"/>
  <rule family="ipv4">
    <source address="192.168.1.0/24"/>
    <accept/>
  </rule>
</zone>
```

### 4.3 Zoneå…‹éš†å¤åˆ¶æ–¹æ³•


**ä»ç°æœ‰Zoneåˆ›å»ºæ–°Zone**ï¼š
```bash
# æ–¹æ³•1ï¼šé€šè¿‡å‘½ä»¤è¡Œå…‹éš†
firewall-cmd --new-zone=web-server --permanent
firewall-cmd --zone=web-server --add-service=http --permanent
firewall-cmd --zone=web-server --add-service=https --permanent

# æ–¹æ³•2ï¼šé€šè¿‡é…ç½®æ–‡ä»¶å¤åˆ¶
cp /etc/firewalld/zones/public.xml /etc/firewalld/zones/web-server.xml
# ç„¶åç¼–è¾‘web-server.xmlæ–‡ä»¶å†…å®¹
```

**ğŸ”„ Zoneæ¨¡æ¿ä½¿ç”¨æµç¨‹**ï¼š
```
1. é€‰æ‹©åŸºç¡€æ¨¡æ¿ â†’ public.xml (æœ€å¸¸ç”¨)
2. å¤åˆ¶å¹¶é‡å‘½å â†’ web-server.xml  
3. ä¿®æ”¹é…ç½®å†…å®¹ â†’ æ·»åŠ æ‰€éœ€æœåŠ¡å’Œç«¯å£
4. é‡æ–°åŠ è½½é…ç½® â†’ firewall-cmd --reload
```

---

## 5. ğŸ’¡ å®ç”¨Zoneç®¡ç†æŠ€å·§


### 5.1 Zoneç®¡ç†å‘½ä»¤é€ŸæŸ¥


| æ“ä½œç±»å‹ | **å‘½ä»¤** | **ä½œç”¨è¯´æ˜** |
|---------|---------|-------------|
| ğŸ” **æŸ¥çœ‹** | `--get-zones` | `åˆ—å‡ºæ‰€æœ‰å¯ç”¨zone` |
| ğŸ” **æŸ¥çœ‹** | `--get-default-zone` | `æŸ¥çœ‹é»˜è®¤zone` |
| ğŸ” **æŸ¥çœ‹** | `--get-active-zones` | `æŸ¥çœ‹æ¿€æ´»çš„zone` |
| â• **åˆ›å»º** | `--new-zone=åç§°` | `åˆ›å»ºæ–°zone` |
| â– **åˆ é™¤** | `--delete-zone=åç§°` | `åˆ é™¤zone` |
| ğŸ”„ **åˆ‡æ¢** | `--set-default-zone=åç§°` | `è®¾ç½®é»˜è®¤zone` |

### 5.2 Zoneå®‰å…¨ç­‰çº§è§„åˆ’


**ğŸ—ï¸ ä¼ä¸šç½‘ç»œZoneè§„åˆ’ç¤ºä¾‹**ï¼š
```
ç½‘ç»œåˆ†å±‚å®‰å…¨ç­–ç•¥ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å¤–ç½‘     â”‚  â”‚    DMZ      â”‚  â”‚    å†…ç½‘     â”‚
â”‚   (drop)    â”‚â”€â†’â”‚  (public)   â”‚â”€â†’â”‚   (work)    â”‚
â”‚   æ‹’ç»ä¸€åˆ‡   â”‚  â”‚  WebæœåŠ¡å™¨   â”‚  â”‚  åŠå…¬ç”µè„‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  æ•°æ®åº“åŒº   â”‚  
                 â”‚ (database)  â”‚
                 â”‚  ä¸¥æ ¼æ§åˆ¶   â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Zoneæ•…éšœæ’æŸ¥æŠ€å·§


**ğŸ”§ å¸¸è§é—®é¢˜è§£å†³**ï¼š

**é—®é¢˜1ï¼šæœåŠ¡æ— æ³•è®¿é—®**
```bash
# æ’æŸ¥æ­¥éª¤
1. ç¡®è®¤æ¥å£zoneï¼šfirewall-cmd --get-zone-of-interface=eth0
2. æ£€æŸ¥zoneè§„åˆ™ï¼šfirewall-cmd --zone=public --list-all
3. éªŒè¯æœåŠ¡çŠ¶æ€ï¼šfirewall-cmd --zone=public --query-service=http
```

**é—®é¢˜2ï¼šzoneåˆ é™¤å¤±è´¥**
```bash
# è§£å†³æ–¹æ³•
1. æ£€æŸ¥æ¥å£ç»‘å®šï¼šfirewall-cmd --get-active-zones  
2. è§£é™¤æ¥å£ç»‘å®šï¼šfirewall-cmd --zone=default --change-interface=eth0
3. å†æ¬¡åˆ é™¤zoneï¼šfirewall-cmd --delete-zone=æ—§zoneåç§° --permanent
```

---

## 6. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 6.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ Zoneæœ¬è´¨ï¼šç½‘ç»œæ¥å£çš„å®‰å…¨ç­–ç•¥æ¨¡æ¿
ğŸ”¸ Zoneåˆ†ç±»ï¼šç³»ç»Ÿé»˜è®¤zone vs è‡ªå®šä¹‰zone
ğŸ”¸ Zoneç»‘å®šï¼šä¸€ä¸ªæ¥å£åªèƒ½å±äºä¸€ä¸ªzone
ğŸ”¸ Zoneä¼˜å…ˆçº§ï¼šæ¥å£zone > é»˜è®¤zone
ğŸ”¸ é…ç½®æŒä¹…åŒ–ï¼š--permanentå‚æ•°ç¡®ä¿é‡å¯åç”Ÿæ•ˆ
```

### 6.2 å…³é”®å‘½ä»¤è®°å¿†


**ğŸ¯ Zoneç®¡ç†æ ¸å¿ƒå‘½ä»¤**ï¼š
- **åˆ›å»ºzone**ï¼š`--new-zone=åç§° --permanent`
- **åˆ é™¤zone**ï¼š`--delete-zone=åç§° --permanent`  
- **æŸ¥è¯¢æ¥å£zone**ï¼š`--get-zone-of-interface=æ¥å£å`
- **æŒ‡å®šzoneæ“ä½œ**ï¼š`--zone=åç§° --add-service=æœåŠ¡`

### 6.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ å·¥ä½œåœºæ™¯åº”ç”¨**ï¼š
- **WebæœåŠ¡å™¨**ï¼šåˆ›å»ºweb-server zoneï¼Œåªå¼€æ”¾80/443ç«¯å£
- **æ•°æ®åº“æœåŠ¡å™¨**ï¼šåˆ›å»ºdatabase zoneï¼Œé™åˆ¶è®¿é—®æ¥æºIP
- **å¼€å‘ç¯å¢ƒ**ï¼šåˆ›å»ºdev zoneï¼Œå¼€æ”¾æ›´å¤šè°ƒè¯•ç«¯å£
- **æµ‹è¯•ç¯å¢ƒ**ï¼šåˆ›å»ºtest zoneï¼Œä¸´æ—¶æ”¾å¼€é™åˆ¶ä¾¿äºæµ‹è¯•

### 6.4 æœ€ä½³å®è·µè¦ç‚¹


**âœ… æ¨èåšæ³•**ï¼š
- æ˜ç¡®Zoneç”¨é€”ï¼Œä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½å
- å§‹ç»ˆæŒ‡å®š--zoneå‚æ•°é¿å…è¯¯æ“ä½œ
- é‡è¦æ“ä½œå‰å…ˆå¤‡ä»½é…ç½®æ–‡ä»¶
- å®šæœŸæ£€æŸ¥æ´»è·ƒzoneå’Œæ¥å£ç»‘å®šå…³ç³»

**âŒ é¿å…åšæ³•**ï¼š
- ä¸è¦éšæ„åˆ é™¤ç³»ç»Ÿé»˜è®¤zone
- ä¸è¦åœ¨ä¸åŠ --permanentçš„æƒ…å†µä¸‹åšé‡è¦é…ç½®
- ä¸è¦è®©å…³é”®æ¥å£å¤„äºdrop zone

**ğŸ§  è®°å¿†å£è¯€**ï¼š
- Zoneç®¡ç†æœ‰æ¡ç†ï¼Œåˆ›å»ºåˆ é™¤è¦æ°¸ä¹…
- æ¥å£ç»‘å®šæŸ¥å¾—æ¸…ï¼ŒæŒ‡å®šæ“ä½œä¸å‡ºé”™
- é…ç½®æ–‡ä»¶è—/etcï¼Œé‡è½½ç”Ÿæ•ˆåˆ«å¿˜è®°

**æ ¸å¿ƒç†è§£**ï¼š
Zoneå°±æ˜¯ç»™ä¸åŒçš„ç½‘ç»œæ¥å£ç©¿ä¸Šä¸åŒçš„"é˜²æŠ¤æœ"ï¼Œæ¯ä»¶é˜²æŠ¤æœéƒ½æœ‰è‡ªå·±çš„å®‰å…¨ç­‰çº§å’Œè§„åˆ™ã€‚åˆç†è§„åˆ’Zoneèƒ½è®©ç½‘ç»œå®‰å…¨ç®¡ç†æ›´åŠ ç²¾ç»†åŒ–å’Œè‡ªåŠ¨åŒ–ã€‚