---
title: 8ã€é˜²ç«å¢™ç®¡ç†å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [iptablesé˜²ç«å¢™è§„åˆ™ç®¡ç†](#1-iptablesé˜²ç«å¢™è§„åˆ™ç®¡ç†)
2. [firewall-cmd firewalldç®¡ç†](#2-firewall-cmd-firewalldç®¡ç†)
3. [ufw Ubuntué˜²ç«å¢™å·¥å…·](#3-ufw-ubuntué˜²ç«å¢™å·¥å…·)
4. [iptables-save/restoreè§„åˆ™ä¿å­˜](#4-iptables-saverestoreè§„åˆ™ä¿å­˜)
5. [ç«¯å£å¼€æ”¾ä¸å…³é—­æ“ä½œ](#5-ç«¯å£å¼€æ”¾ä¸å…³é—­æ“ä½œ)
6. [é˜²ç«å¢™çŠ¶æ€æŸ¥çœ‹](#6-é˜²ç«å¢™çŠ¶æ€æŸ¥çœ‹)
7. [é˜²ç«å¢™æ—¥å¿—æŸ¥çœ‹å‘½ä»¤](#7-é˜²ç«å¢™æ—¥å¿—æŸ¥çœ‹å‘½ä»¤)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”¥ iptablesé˜²ç«å¢™è§„åˆ™ç®¡ç†


### 1.1 iptablesåŸºæœ¬æ¦‚å¿µ

ğŸ¯ **ç®€å•ç†è§£**ï¼šiptableså°±åƒç½‘ç»œä¸–ç•Œçš„"é—¨å«"ï¼Œå†³å®šå“ªäº›æ•°æ®åŒ…èƒ½è¿›å‡ºä½ çš„ç³»ç»Ÿ

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
å°åŒºé—¨å«æ£€æŸ¥æ¥è®¿è€…ï¼š
- çœ‹èº«ä»½è¯ï¼ˆæ£€æŸ¥IPåœ°å€ï¼‰
- è¯¢é—®æ¥å¹²ä»€ä¹ˆï¼ˆæ£€æŸ¥ç«¯å£å’Œåè®®ï¼‰
- æ ¹æ®è§„å®šå†³å®šæ”¾è¡Œæˆ–æ‹’ç»ï¼ˆæ‰§è¡Œé˜²ç«å¢™è§„åˆ™ï¼‰

iptableså·¥ä½œæµç¨‹ï¼š
æ•°æ®åŒ…åˆ°è¾¾ â†’ æ£€æŸ¥è§„åˆ™é“¾ â†’ åŒ¹é…è§„åˆ™ â†’ æ‰§è¡ŒåŠ¨ä½œï¼ˆACCEPT/DROP/REJECTï¼‰
```

**ğŸ”¸ iptablesæ ¸å¿ƒç»„ä»¶**

| ç»„ä»¶ | **ä½œç”¨** | **å¸¸è§ç±»å‹** | **åº”ç”¨åœºæ™¯** |
|------|---------|-------------|-------------|
| ğŸ”¸ **è¡¨(Tables)** | `æ•°æ®åŒ…å¤„ç†çš„ä¸åŒé˜¶æ®µ` | `filter/nat/mangle` | `è¿‡æ»¤/åœ°å€è½¬æ¢/ä¿®æ”¹` |
| ğŸ”¸ **é“¾(Chains)** | `è§„åˆ™çš„æ‰§è¡Œé¡ºåº` | `INPUT/OUTPUT/FORWARD` | `å…¥ç«™/å‡ºç«™/è½¬å‘` |
| ğŸ”¸ **è§„åˆ™(Rules)** | `å…·ä½“çš„åŒ¹é…æ¡ä»¶` | `æºIP/ç›®æ ‡ç«¯å£/åè®®` | `ç²¾ç¡®æ§åˆ¶æµé‡` |
| ğŸ”¸ **åŠ¨ä½œ(Targets)** | `åŒ¹é…åçš„å¤„ç†æ–¹å¼` | `ACCEPT/DROP/REJECT` | `å…è®¸/ä¸¢å¼ƒ/æ‹’ç»` |

### 1.2 iptablesåŸºç¡€è§„åˆ™ç®¡ç†


**ğŸ”§ åŸºæœ¬æ“ä½œå‘½ä»¤**

```bash
# æŸ¥çœ‹å½“å‰æ‰€æœ‰è§„åˆ™
iptables -L -n -v
# -L: åˆ—å‡ºè§„åˆ™  -n: æ•°å­—æ˜¾ç¤ºIPå’Œç«¯å£  -v: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

# æŸ¥çœ‹ç‰¹å®šé“¾çš„è§„åˆ™
iptables -L INPUT
iptables -L OUTPUT
iptables -L FORWARD
```

**ğŸ“ è§„åˆ™æ·»åŠ æ“ä½œ**
```bash
# å…è®¸ç‰¹å®šç«¯å£è®¿é—®
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
# -A: æ·»åŠ è§„åˆ™åˆ°é“¾æœ«å°¾  -p: åè®®  --dport: ç›®æ ‡ç«¯å£  -j: æ‰§è¡ŒåŠ¨ä½œ

# å…è®¸ç‰¹å®šIPè®¿é—®
iptables -I INPUT 1 -s 192.168.1.100 -j ACCEPT  
# -I: æ’å…¥è§„åˆ™åˆ°æŒ‡å®šä½ç½®  -s: æºIPåœ°å€

# æ‹’ç»ç‰¹å®šIPè®¿é—®
iptables -A INPUT -s 192.168.1.50 -j DROP
```

**âš¡ é«˜çº§è§„åˆ™é…ç½®**
```bash
# å…è®¸å·²å»ºç«‹çš„è¿æ¥
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# é™åˆ¶è¿æ¥é¢‘ç‡ï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰
iptables -A INPUT -p tcp --dport 22 -m recent --set --name ssh
iptables -A INPUT -p tcp --dport 22 -m recent --update --seconds 60 --hitcount 3 --name ssh -j DROP

# å…è®¸æœ¬åœ°å›ç¯é€šä¿¡
iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT
```

### 1.3 iptablesè§„åˆ™ç®¡ç†æŠ€å·§


**ğŸ¯ è§„åˆ™ä¼˜å…ˆçº§ç®¡ç†**
```
è§„åˆ™æ‰§è¡Œé¡ºåºï¼š
1. ä»ä¸Šåˆ°ä¸‹é€æ¡æ£€æŸ¥
2. åŒ¹é…åˆ°ç¬¬ä¸€æ¡è§„åˆ™å°±æ‰§è¡Œç›¸åº”åŠ¨ä½œ
3. é‡è¦è§„åˆ™æ”¾åœ¨å‰é¢

ä¼˜å…ˆçº§ç­–ç•¥ï¼š
é«˜ä¼˜å…ˆçº§ï¼šç™½åå•IPã€ç®¡ç†ç«¯å£
ä¸­ä¼˜å…ˆçº§ï¼šä¸šåŠ¡ç«¯å£ã€å¸¸è§„æœåŠ¡
ä½ä¼˜å…ˆçº§ï¼šé»˜è®¤æ‹’ç»ã€æ—¥å¿—è®°å½•
```

**ğŸ”§ è§„åˆ™ç¼–å·ç®¡ç†**
```bash
# æ’å…¥è§„åˆ™åˆ°æŒ‡å®šä½ç½®
iptables -I INPUT 2 -p tcp --dport 80 -j ACCEPT

# åˆ é™¤ç‰¹å®šè§„åˆ™
iptables -D INPUT 3    # åˆ é™¤ç¬¬3æ¡è§„åˆ™
iptables -D INPUT -p tcp --dport 80 -j ACCEPT  # åˆ é™¤åŒ¹é…çš„è§„åˆ™

# æ›¿æ¢è§„åˆ™
iptables -R INPUT 2 -p tcp --dport 8080 -j ACCEPT
```

**ğŸ“Š è§„åˆ™ç»Ÿè®¡ä¸ç›‘æ§**
```bash
# æŸ¥çœ‹è§„åˆ™åŒ¹é…ç»Ÿè®¡
iptables -L -n -v --line-numbers
# --line-numbers: æ˜¾ç¤ºè§„åˆ™ç¼–å·

# é‡ç½®è®¡æ•°å™¨
iptables -Z

# å®æ—¶ç›‘æ§è§„åˆ™åŒ¹é…
watch -n 1 'iptables -L -n -v'
```

---

## 2. ğŸ›¡ï¸ firewall-cmd firewalldç®¡ç†


### 2.1 firewalldåŸºæœ¬æ¦‚å¿µ

ğŸ¯ **ç°ä»£é˜²ç«å¢™ç®¡ç†å·¥å…·**ï¼šfirewalldæ˜¯CentOS 7/8å’ŒFedoraé»˜è®¤çš„é˜²ç«å¢™ç®¡ç†å·¥å…·

```
firewalld vs iptableså¯¹æ¯”ï¼š
ä¼ ç»Ÿiptablesï¼š
- ç›´æ¥æ“ä½œå†…æ ¸è§„åˆ™
- è§„åˆ™ç«‹å³ç”Ÿæ•ˆä½†ä¸æŒä¹…åŒ–
- éœ€è¦æ‰‹åŠ¨ä¿å­˜è§„åˆ™

ç°ä»£firewalldï¼š
- é«˜çº§ç®¡ç†æ¥å£
- æ”¯æŒåŒºåŸŸæ¦‚å¿µ
- è‡ªåŠ¨å¤„ç†è§„åˆ™æŒä¹…åŒ–
- åŠ¨æ€æ›´æ–°æ— éœ€é‡å¯
```

**ğŸ”¸ firewalldæ ¸å¿ƒæ¦‚å¿µ**

| æ¦‚å¿µ | **å«ä¹‰** | **å¸¸è§ç±»å‹** | **ç”¨é€”** |
|------|---------|-------------|---------|
| ğŸ”¸ **ZoneåŒºåŸŸ** | `ä¸åŒå®‰å…¨çº§åˆ«çš„ç½‘ç»œç¯å¢ƒ` | `public/internal/dmz` | `åˆ†ç±»ç®¡ç†ç½‘ç»œ` |
| ğŸ”¸ **ServiceæœåŠ¡** | `é¢„å®šä¹‰çš„ç«¯å£ç»„åˆ` | `http/ssh/ftp` | `ç®€åŒ–æœåŠ¡ç®¡ç†` |
| ğŸ”¸ **Portç«¯å£** | `å…·ä½“çš„ç«¯å£å·` | `80/tcp, 443/tcp` | `ç²¾ç¡®ç«¯å£æ§åˆ¶` |
| ğŸ”¸ **Rich Rules** | `å¤æ‚çš„è‡ªå®šä¹‰è§„åˆ™` | `IP+ç«¯å£+åŠ¨ä½œ` | `é«˜çº§è®¿é—®æ§åˆ¶` |

### 2.2 firewalldåŸºç¡€æ“ä½œ


**ğŸ”§ æœåŠ¡ç®¡ç†**
```bash
# å¯åŠ¨å’Œå¯ç”¨firewalld
systemctl start firewalld
systemctl enable firewalld

# æŸ¥çœ‹firewalldçŠ¶æ€
systemctl status firewalld
firewall-cmd --state
```

**ğŸ“‹ åŒºåŸŸç®¡ç†**
```bash
# æŸ¥çœ‹æ‰€æœ‰åŒºåŸŸ
firewall-cmd --get-zones

# æŸ¥çœ‹é»˜è®¤åŒºåŸŸ
firewall-cmd --get-default-zone

# æŸ¥çœ‹æ´»åŠ¨åŒºåŸŸ
firewall-cmd --get-active-zones

# è®¾ç½®é»˜è®¤åŒºåŸŸ
firewall-cmd --set-default-zone=public
```

### 2.3 æœåŠ¡å’Œç«¯å£ç®¡ç†


**ğŸŒ æœåŠ¡ç®¡ç†æ“ä½œ**
```bash
# æŸ¥çœ‹å½“å‰åŒºåŸŸå…è®¸çš„æœåŠ¡
firewall-cmd --list-services

# ä¸´æ—¶å…è®¸æœåŠ¡ï¼ˆé‡å¯å¤±æ•ˆï¼‰
firewall-cmd --add-service=http
firewall-cmd --add-service=https

# æ°¸ä¹…å…è®¸æœåŠ¡
firewall-cmd --permanent --add-service=http
firewall-cmd --reload  # é‡æ–°åŠ è½½é…ç½®ä½¿æ°¸ä¹…è§„åˆ™ç”Ÿæ•ˆ

# ç§»é™¤æœåŠ¡
firewall-cmd --remove-service=ftp
firewall-cmd --permanent --remove-service=ftp
```

**ğŸ”Œ ç«¯å£ç®¡ç†æ“ä½œ**
```bash
# æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£
firewall-cmd --list-ports

# å¼€æ”¾ç‰¹å®šç«¯å£
firewall-cmd --add-port=8080/tcp
firewall-cmd --permanent --add-port=8080/tcp

# å¼€æ”¾ç«¯å£èŒƒå›´
firewall-cmd --add-port=8000-8010/tcp
firewall-cmd --permanent --add-port=8000-8010/tcp

# å…³é—­ç«¯å£
firewall-cmd --remove-port=8080/tcp
firewall-cmd --permanent --remove-port=8080/tcp
```

### 2.4 é«˜çº§è§„åˆ™ç®¡ç†


**ğŸ¯ Rich Ruleså¯Œè§„åˆ™**
```bash
# å…è®¸ç‰¹å®šIPè®¿é—®ç‰¹å®šç«¯å£
firewall-cmd --add-rich-rule='rule family="ipv4" source address="192.168.1.100" port port="22" protocol="tcp" accept'

# é™åˆ¶ç‰¹å®šIPè®¿é—®
firewall-cmd --add-rich-rule='rule family="ipv4" source address="192.168.1.50" reject'

# ç«¯å£è½¬å‘è§„åˆ™
firewall-cmd --add-rich-rule='rule family=ipv4 forward-port port=80 protocol=tcp to-port=8080'

# æ—¥å¿—è®°å½•è§„åˆ™
firewall-cmd --add-rich-rule='rule service name="ssh" log prefix="SSHè®¿é—®: " level="info" accept'
```

**âš™ï¸ åŒºåŸŸé…ç½®ç®¡ç†**
```bash
# ä¸ºç½‘ç»œæ¥å£åˆ†é…åŒºåŸŸ
firewall-cmd --zone=internal --change-interface=eth1

# æŸ¥çœ‹åŒºåŸŸè¯¦ç»†é…ç½®
firewall-cmd --zone=public --list-all

# åˆ›å»ºè‡ªå®šä¹‰åŒºåŸŸ
firewall-cmd --permanent --new-zone=webserver
firewall-cmd --reload
firewall-cmd --zone=webserver --add-service=http
firewall-cmd --zone=webserver --add-service=https
```

---

## 3. ğŸ§ ufw Ubuntué˜²ç«å¢™å·¥å…·


### 3.1 ufwåŸºæœ¬æ¦‚å¿µ

ğŸ¯ **ç”¨æˆ·å‹å¥½çš„é˜²ç«å¢™**ï¼šufwæ˜¯Ubuntuç³»ç»Ÿä¸“é—¨è®¾è®¡çš„ç®€åŒ–é˜²ç«å¢™ç®¡ç†å·¥å…·

```
ufwè®¾è®¡ç†å¿µï¼š
å¤æ‚çš„iptables â†’ ç®€å•çš„ufwå‘½ä»¤
ä¾‹å¦‚ï¼š
iptableså‘½ä»¤ï¼šiptables -A INPUT -p tcp --dport 22 -j ACCEPT
ufwå‘½ä»¤ï¼šufw allow 22

ä¼˜åŠ¿ç‰¹ç‚¹ï¼š
- å‘½ä»¤ç®€å•æ˜“è®°
- è‡ªåŠ¨å¤„ç†å¸¸è§åœºæ™¯
- è‰¯å¥½çš„é»˜è®¤å®‰å…¨ç­–ç•¥
- å®Œç¾é›†æˆUbuntuç³»ç»Ÿ
```

### 3.2 ufwåŸºç¡€æ“ä½œ


**ğŸ”§ åŸºæœ¬ç®¡ç†å‘½ä»¤**
```bash
# å¯ç”¨ufwé˜²ç«å¢™
sudo ufw enable

# ç¦ç”¨ufwé˜²ç«å¢™
sudo ufw disable

# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
sudo ufw status
sudo ufw status verbose  # è¯¦ç»†çŠ¶æ€
sudo ufw status numbered # æ˜¾ç¤ºè§„åˆ™ç¼–å·
```

**ğŸ“ é»˜è®¤ç­–ç•¥è®¾ç½®**
```bash
# è®¾ç½®é»˜è®¤ç­–ç•¥
sudo ufw default deny incoming   # é»˜è®¤æ‹’ç»å…¥ç«™
sudo ufw default allow outgoing  # é»˜è®¤å…è®¸å‡ºç«™
sudo ufw default deny forward    # é»˜è®¤æ‹’ç»è½¬å‘

# æŸ¥çœ‹å½“å‰é»˜è®¤ç­–ç•¥
sudo ufw status verbose
```

### 3.3 ç«¯å£å’ŒæœåŠ¡ç®¡ç†


**ğŸ”Œ ç«¯å£è®¿é—®æ§åˆ¶**
```bash
# å…è®¸ç‰¹å®šç«¯å£
sudo ufw allow 22        # SSHç«¯å£
sudo ufw allow 80        # HTTPç«¯å£
sudo ufw allow 443       # HTTPSç«¯å£

# æŒ‡å®šåè®®
sudo ufw allow 53/udp    # DNSæŸ¥è¯¢
sudo ufw allow 3306/tcp  # MySQL

# ç«¯å£èŒƒå›´
sudo ufw allow 8000:8010/tcp
```

**ğŸŒ æœåŠ¡ç®¡ç†**
```bash
# æŒ‰æœåŠ¡åå…è®¸
sudo ufw allow ssh
sudo ufw allow http
sudo ufw allow https
sudo ufw allow ftp

# æŸ¥çœ‹å¯ç”¨æœåŠ¡å
less /etc/services
```

### 3.4 IPå’Œé«˜çº§è§„åˆ™


**ğŸ¯ IPåœ°å€è®¿é—®æ§åˆ¶**
```bash
# å…è®¸ç‰¹å®šIPè®¿é—®
sudo ufw allow from 192.168.1.100

# å…è®¸ç‰¹å®šIPè®¿é—®ç‰¹å®šç«¯å£
sudo ufw allow from 192.168.1.100 to any port 22

# å…è®¸å­ç½‘è®¿é—®
sudo ufw allow from 192.168.1.0/24

# æ‹’ç»ç‰¹å®šIP
sudo ufw deny from 192.168.1.50
```

**âš¡ è§„åˆ™åˆ é™¤å’Œç®¡ç†**
```bash
# åˆ é™¤è§„åˆ™
sudo ufw delete allow 80
sudo ufw delete allow from 192.168.1.100

# æŒ‰ç¼–å·åˆ é™¤è§„åˆ™
sudo ufw status numbered
sudo ufw delete 3

# é‡ç½®æ‰€æœ‰è§„åˆ™
sudo ufw --force reset
```

**ğŸ” åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶**
```bash
# æŸ¥çœ‹åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶
sudo ufw app list

# æŸ¥çœ‹ç‰¹å®šåº”ç”¨é…ç½®
sudo ufw app info 'Apache Full'

# å…è®¸åº”ç”¨ç¨‹åº
sudo ufw allow 'Apache Full'
sudo ufw allow 'OpenSSH'
```

---

## 4. ğŸ’¾ iptables-save/restoreè§„åˆ™ä¿å­˜


### 4.1 è§„åˆ™æŒä¹…åŒ–é‡è¦æ€§

ğŸ¯ **ä¸ºä»€ä¹ˆéœ€è¦ä¿å­˜è§„åˆ™**ï¼šiptablesè§„åˆ™é»˜è®¤åªåœ¨å†…å­˜ä¸­ï¼Œç³»ç»Ÿé‡å¯åä¼šä¸¢å¤±

```
è§„åˆ™ä¸¢å¤±çš„åœºæ™¯ï¼š
1. ç³»ç»Ÿé‡å¯
2. iptablesæœåŠ¡é‡å¯
3. æ„å¤–çš„è§„åˆ™æ¸…ç©ºæ“ä½œ

è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š
æ‰‹åŠ¨æ–¹å¼ï¼šæ¯æ¬¡å¼€æœºæ‰‹åŠ¨æ‰§è¡Œè§„åˆ™å‘½ä»¤
è‡ªåŠ¨æ–¹å¼ï¼šä¿å­˜è§„åˆ™æ–‡ä»¶ï¼Œå¼€æœºè‡ªåŠ¨åŠ è½½
æ¨èæ–¹å¼ï¼šä½¿ç”¨iptables-save/restoreå·¥å…·
```

### 4.2 è§„åˆ™ä¿å­˜å’Œæ¢å¤


**ğŸ’¾ ä¿å­˜å½“å‰è§„åˆ™**
```bash
# ä¿å­˜æ‰€æœ‰è¡¨çš„è§„åˆ™
sudo iptables-save > /etc/iptables/rules.v4

# ä¿å­˜åˆ°è‡ªå®šä¹‰ä½ç½®
sudo iptables-save > ~/firewall_backup_$(date +%Y%m%d).rules

# ä¿å­˜æ—¶æ·»åŠ æ³¨é‡Š
sudo iptables-save | grep -v "^#" > /etc/iptables/clean_rules.v4
```

**ğŸ“¥ æ¢å¤è§„åˆ™**
```bash
# æ¢å¤è§„åˆ™
sudo iptables-restore < /etc/iptables/rules.v4

# æµ‹è¯•æ¢å¤ï¼ˆä¸å®é™…åº”ç”¨ï¼‰
sudo iptables-restore --test < /etc/iptables/rules.v4

# å¼ºåˆ¶è¦†ç›–ç°æœ‰è§„åˆ™
sudo iptables-restore --flush < /etc/iptables/rules.v4
```

### 4.3 è‡ªåŠ¨åŒ–è§„åˆ™ç®¡ç†


**ğŸ”„ å¼€æœºè‡ªåŠ¨åŠ è½½è§„åˆ™**

**æ–¹æ³•1ï¼šä½¿ç”¨iptables-persistentåŒ…ï¼ˆUbuntu/Debianï¼‰**
```bash
# å®‰è£…æŒä¹…åŒ–å·¥å…·
sudo apt install iptables-persistent

# ä¿å­˜å½“å‰è§„åˆ™
sudo netfilter-persistent save

# é‡æ–°åŠ è½½è§„åˆ™
sudo netfilter-persistent reload
```

**æ–¹æ³•2ï¼šsystemdæœåŠ¡æ–¹å¼**
```bash
# åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶
sudo tee /etc/systemd/system/iptables.service << 'EOF'
[Unit]
Description=Restore iptables firewall rules
Before=network-pre.target
Wants=network-pre.target

[Service]
Type=oneshot
ExecStart=/sbin/iptables-restore /etc/iptables/rules.v4
RemainAfterExit=true

[Install]
WantedBy=multi-user.target
EOF

# å¯ç”¨æœåŠ¡
sudo systemctl enable iptables.service
sudo systemctl start iptables.service
```

**æ–¹æ³•3ï¼šrc.localæ–¹å¼**
```bash
# åœ¨/etc/rc.localä¸­æ·»åŠ 
sudo tee -a /etc/rc.local << 'EOF'
# æ¢å¤iptablesè§„åˆ™
/sbin/iptables-restore < /etc/iptables/rules.v4

exit 0
EOF

# ç¡®ä¿rc.localå¯æ‰§è¡Œ
sudo chmod +x /etc/rc.local
```

### 4.4 è§„åˆ™å¤‡ä»½ç­–ç•¥


**ğŸ“‹ å®šæœŸå¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
# firewall_backup.sh

BACKUP_DIR="/backup/firewall"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½iptablesè§„åˆ™
iptables-save > "$BACKUP_DIR/iptables_$DATE.rules"

# å¤‡ä»½firewalldé…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
if systemctl is-active firewalld >/dev/null 2>&1; then
    cp -r /etc/firewalld "$BACKUP_DIR/firewalld_$DATE"
fi

# å¤‡ä»½ufwé…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
if command -v ufw >/dev/null 2>&1; then
    ufw status verbose > "$BACKUP_DIR/ufw_status_$DATE.txt"
    cp -r /etc/ufw "$BACKUP_DIR/ufw_$DATE"
fi

# å‹ç¼©å¤‡ä»½æ–‡ä»¶
tar -czf "$BACKUP_DIR/firewall_backup_$DATE.tar.gz" \
    "$BACKUP_DIR"/*_$DATE* && \
rm -rf "$BACKUP_DIR"/*_$DATE*

# åˆ é™¤30å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "firewall_backup_*.tar.gz" -mtime +30 -delete

echo "é˜²ç«å¢™é…ç½®å¤‡ä»½å®Œæˆ: $BACKUP_DIR/firewall_backup_$DATE.tar.gz"
```

**â° å®šæ—¶å¤‡ä»½é…ç½®**
```bash
# æ·»åŠ åˆ°crontab
echo "0 2 * * 0 /usr/local/bin/firewall_backup.sh" | sudo crontab -

# æˆ–è€…ç¼–è¾‘crontab
sudo crontab -e
# æ·»åŠ ï¼š0 2 * * 0 /usr/local/bin/firewall_backup.sh
```

---

## 5. ğŸšª ç«¯å£å¼€æ”¾ä¸å…³é—­æ“ä½œ


### 5.1 ç«¯å£ç®¡ç†ç»Ÿä¸€æ–¹æ³•

ğŸ¯ **ä¸åŒå·¥å…·çš„ç«¯å£æ“ä½œå¯¹æ¯”**

| æ“ä½œ | **iptables** | **firewalld** | **ufw** |
|------|-------------|--------------|---------|
| ğŸ”¸ **å¼€æ”¾ç«¯å£** | `iptables -A INPUT -p tcp --dport 80 -j ACCEPT` | `firewall-cmd --add-port=80/tcp` | `ufw allow 80` |
| ğŸ”¸ **å…³é—­ç«¯å£** | `iptables -D INPUT -p tcp --dport 80 -j ACCEPT` | `firewall-cmd --remove-port=80/tcp` | `ufw delete allow 80` |
| ğŸ”¸ **æŸ¥çœ‹ç«¯å£** | `iptables -L -n` | `firewall-cmd --list-ports` | `ufw status` |
| ğŸ”¸ **ç«¯å£èŒƒå›´** | `iptables -A INPUT -p tcp --dport 8000:8010 -j ACCEPT` | `firewall-cmd --add-port=8000-8010/tcp` | `ufw allow 8000:8010/tcp` |

### 5.2 å¸¸è§æœåŠ¡ç«¯å£ç®¡ç†


**ğŸŒ WebæœåŠ¡ç«¯å£**
```bash
# HTTPå’ŒHTTPSç«¯å£å¼€æ”¾
# iptablesæ–¹å¼
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# firewalldæ–¹å¼
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --reload

# ufwæ–¹å¼
ufw allow http
ufw allow https
```

**ğŸ—„ï¸ æ•°æ®åº“æœåŠ¡ç«¯å£**
```bash
# MySQLç«¯å£ç®¡ç†
# åªå…è®¸æœ¬åœ°ç½‘æ®µè®¿é—®MySQL
iptables -A INPUT -p tcp -s 192.168.1.0/24 --dport 3306 -j ACCEPT

# firewalldå¯Œè§„åˆ™
firewall-cmd --add-rich-rule='rule family="ipv4" source address="192.168.1.0/24" port port="3306" protocol="tcp" accept'

# ufwæŒ‡å®šæ¥æºIP
ufw allow from 192.168.1.0/24 to any port 3306
```

**ğŸ”’ SSHç«¯å£å®‰å…¨ç®¡ç†**
```bash
# ä¿®æ”¹SSHé»˜è®¤ç«¯å£åçš„é˜²ç«å¢™é…ç½®
# 1. å…ˆå¼€æ”¾æ–°ç«¯å£
ufw allow 2222/tcp

# 2. æµ‹è¯•SSHè¿æ¥æ­£å¸¸åå…³é—­22ç«¯å£
ufw delete allow 22/tcp

# 3. é™åˆ¶SSHè®¿é—®é¢‘ç‡ï¼ˆiptablesï¼‰
iptables -A INPUT -p tcp --dport 2222 -m recent --set --name sshbrute
iptables -A INPUT -p tcp --dport 2222 -m recent --update --seconds 60 --hitcount 3 --name sshbrute -j DROP
```

### 5.3 ç«¯å£æ‰«æä¸ç›‘æ§


**ğŸ” ç«¯å£çŠ¶æ€æ£€æŸ¥**
```bash
# æŸ¥çœ‹ç³»ç»Ÿç›‘å¬ç«¯å£
netstat -tuln
ss -tuln

# æŸ¥çœ‹ç‰¹å®šç«¯å£çŠ¶æ€
netstat -tuln | grep :80
ss -tuln | grep :3306

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«é˜²ç«å¢™é˜»æ­¢
nmap -p 80 localhost
telnet localhost 80
```

**ğŸ“Š ç«¯å£è®¿é—®ç»Ÿè®¡**
```bash
# iptablesè§„åˆ™åŒ¹é…ç»Ÿè®¡
iptables -L -n -v | grep -E "dpt:(80|443)"

# æŸ¥çœ‹è¿æ¥çŠ¶æ€ç»Ÿè®¡
netstat -an | grep :80 | awk '{print $6}' | sort | uniq -c

# å®æ—¶ç›‘æ§ç«¯å£è¿æ¥
watch -n 1 'netstat -an | grep :80 | wc -l'
```

---

## 6. ğŸ‘ï¸ é˜²ç«å¢™çŠ¶æ€æŸ¥çœ‹


### 6.1 ç»¼åˆçŠ¶æ€æ£€æŸ¥æ–¹æ³•


**ğŸ” ä¸åŒå·¥å…·çš„çŠ¶æ€æŸ¥çœ‹**

```bash
# iptablesçŠ¶æ€æŸ¥çœ‹
iptables -L -n -v --line-numbers  # æ˜¾ç¤ºæ‰€æœ‰è§„åˆ™å’Œç»Ÿè®¡
iptables -t nat -L -n -v          # æŸ¥çœ‹NATè¡¨
iptables -t mangle -L -n -v       # æŸ¥çœ‹mangleè¡¨

# firewalldçŠ¶æ€æŸ¥çœ‹
firewall-cmd --state              # æœåŠ¡çŠ¶æ€
firewall-cmd --get-default-zone   # é»˜è®¤åŒºåŸŸ
firewall-cmd --get-active-zones   # æ´»åŠ¨åŒºåŸŸ
firewall-cmd --list-all           # å½“å‰åŒºåŸŸæ‰€æœ‰é…ç½®

# ufwçŠ¶æ€æŸ¥çœ‹
ufw status                        # åŸºæœ¬çŠ¶æ€
ufw status verbose                # è¯¦ç»†çŠ¶æ€
ufw status numbered               # å¸¦ç¼–å·çš„è§„åˆ™åˆ—è¡¨
```

### 6.2 è¯¦ç»†é…ç½®ä¿¡æ¯æŸ¥çœ‹


**ğŸ“‹ è§„åˆ™è¯¦ç»†ä¿¡æ¯**
```bash
# æŸ¥çœ‹iptableså®Œæ•´è§„åˆ™é…ç½®
iptables-save | grep -v "^#" | nl

# æŸ¥çœ‹firewalldåŒºåŸŸè¯¦ç»†é…ç½®
firewall-cmd --zone=public --list-all
firewall-cmd --zone=internal --list-all

# æŸ¥çœ‹æ‰€æœ‰åŒºåŸŸé…ç½®
for zone in $(firewall-cmd --get-zones); do
    echo "=== Zone: $zone ==="
    firewall-cmd --zone=$zone --list-all
    echo
done
```

**âš™ï¸ ç³»ç»ŸæœåŠ¡çŠ¶æ€**
```bash
# æ£€æŸ¥é˜²ç«å¢™ç›¸å…³æœåŠ¡çŠ¶æ€
systemctl status iptables    # CentOS 6
systemctl status firewalld   # CentOS 7/8
systemctl status ufw         # Ubuntu

# æ£€æŸ¥æœåŠ¡å¼€æœºå¯åŠ¨çŠ¶æ€
systemctl is-enabled firewalld
systemctl is-enabled ufw

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u firewalld -f
journalctl -u ufw -f
```

### 6.3 ç½‘ç»œè¿æ¥çŠ¶æ€ç›‘æ§


**ğŸ“Š å®æ—¶è¿æ¥ç›‘æ§**
```bash
# ç›‘æ§ç½‘ç»œè¿æ¥çŠ¶æ€
ss -tuln                     # æŸ¥çœ‹ç›‘å¬ç«¯å£
ss -tulpn                    # æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯
ss -ant                      # æ˜¾ç¤ºæ‰€æœ‰TCPè¿æ¥

# æŒ‰çŠ¶æ€ç»Ÿè®¡è¿æ¥æ•°
ss -ant | awk '{print $1}' | sort | uniq -c

# ç›‘æ§ç‰¹å®šç«¯å£çš„è¿æ¥
watch -n 1 'ss -ant | grep :80'
```

**ğŸ” é˜²ç«å¢™è§„åˆ™å‘½ä¸­ç»Ÿè®¡**
```bash
# é‡ç½®iptablesè®¡æ•°å™¨
iptables -Z

# ä¸€æ®µæ—¶é—´åæŸ¥çœ‹è§„åˆ™å‘½ä¸­æƒ…å†µ
iptables -L -n -v

# æŸ¥æ‰¾æœªå‘½ä¸­çš„è§„åˆ™
iptables -L -n -v | awk '$1 == "0" && $2 == "0"'

# æŸ¥æ‰¾é«˜å‘½ä¸­è§„åˆ™
iptables -L -n -v | sort -nr -k1 | head -10
```

---

## 7. ğŸ“ é˜²ç«å¢™æ—¥å¿—æŸ¥çœ‹å‘½ä»¤


### 7.1 æ—¥å¿—é…ç½®å’Œä½ç½®


**ğŸ“‚ ä¸åŒç³»ç»Ÿçš„æ—¥å¿—ä½ç½®**

| ç³»ç»Ÿ/å·¥å…· | **æ—¥å¿—ä½ç½®** | **é…ç½®æ–‡ä»¶** | **æ—¥å¿—æ ¼å¼** |
|-----------|-------------|-------------|-------------|
| ğŸ”¸ **iptables** | `/var/log/messages` `/var/log/kern.log` | `/etc/rsyslog.conf` | `kernelæ—¥å¿—æ ¼å¼` |
| ğŸ”¸ **firewalld** | `/var/log/firewalld` | `/etc/firewalld/` | `ç»“æ„åŒ–æ—¥å¿—` |
| ğŸ”¸ **ufw** | `/var/log/ufw.log` | `/etc/ufw/` | `æ ‡å‡†åŒ–æ ¼å¼` |
| ğŸ”¸ **ç³»ç»Ÿæ—¥å¿—** | `journalctl` | `systemd` | `äºŒè¿›åˆ¶æ ¼å¼` |

### 7.2 iptablesæ—¥å¿—é…ç½®


**ğŸ“ å¯ç”¨iptablesæ—¥å¿—è®°å½•**
```bash
# æ·»åŠ æ—¥å¿—è§„åˆ™ï¼ˆè®°å½•è¢«æ‹’ç»çš„è¿æ¥ï¼‰
iptables -A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7

# è®°å½•ç‰¹å®šç«¯å£è®¿é—®
iptables -I INPUT 1 -p tcp --dport 22 -j LOG --log-prefix "SSHè®¿é—®: "
iptables -I INPUT 2 -p tcp --dport 22 -j ACCEPT

# é…ç½®æ—¥å¿—è½®è½¬
sudo tee /etc/logrotate.d/iptables << 'EOF'
/var/log/iptables.log {
    weekly
    rotate 52
    compress
    missingok
    create 644 root root
    postrotate
        /bin/kill -HUP `cat /var/run/rsyslogd.pid 2> /dev/null` 2> /dev/null || true
    endscript
}
EOF
```

**ğŸ” iptablesæ—¥å¿—æŸ¥çœ‹**
```bash
# æŸ¥çœ‹æœ€æ–°çš„é˜²ç«å¢™æ—¥å¿—
tail -f /var/log/messages | grep iptables
tail -f /var/log/kern.log | grep "iptables denied"

# åˆ†æè¢«æ‹’ç»çš„è¿æ¥
grep "iptables denied" /var/log/messages | tail -20

# ç»Ÿè®¡æ”»å‡»æ¥æºIP
grep "iptables denied" /var/log/messages | \
awk '{print $13}' | cut -d= -f2 | sort | uniq -c | sort -nr
```

### 7.3 firewalldæ—¥å¿—ç®¡ç†


**ğŸ“Š firewalldæ—¥å¿—é…ç½®**
```bash
# å¯ç”¨firewalldæ—¥å¿—è®°å½•
firewall-cmd --set-log-denied=all     # è®°å½•æ‰€æœ‰æ‹’ç»çš„è¿æ¥
firewall-cmd --set-log-denied=unicast # åªè®°å½•å•æ’­
firewall-cmd --set-log-denied=broadcast # åªè®°å½•å¹¿æ’­
firewall-cmd --set-log-denied=multicast # åªè®°å½•ç»„æ’­
firewall-cmd --set-log-denied=off      # å…³é—­æ—¥å¿—

# å¯Œè§„åˆ™ä¸­æ·»åŠ æ—¥å¿—
firewall-cmd --add-rich-rule='rule service name="ssh" log prefix="SSHè®¿é—®: " level="info" accept'

# æŸ¥çœ‹æ—¥å¿—é…ç½®
firewall-cmd --get-log-denied
```

**ğŸ” firewalldæ—¥å¿—æŸ¥çœ‹**
```bash
# æŸ¥çœ‹firewalldæœåŠ¡æ—¥å¿—
journalctl -u firewalld -f

# æŸ¥çœ‹å†…æ ¸é˜²ç«å¢™æ—¥å¿—
journalctl -k | grep -i "firewall\|netfilter"

# åˆ†ææ‹’ç»çš„è¿æ¥
journalctl -k | grep "_DROP" | tail -20

# æŒ‰æ—¶é—´èŒƒå›´æŸ¥çœ‹æ—¥å¿—
journalctl --since "2024-01-01 00:00:00" --until "2024-01-01 23:59:59" -u firewalld
```

### 7.4 ufwæ—¥å¿—ç®¡ç†


**âš™ï¸ ufwæ—¥å¿—é…ç½®**
```bash
# å¯ç”¨ufwæ—¥å¿—
sudo ufw logging on
sudo ufw logging medium  # æ—¥å¿—çº§åˆ«ï¼šoff/low/medium/high/full

# æŸ¥çœ‹å½“å‰æ—¥å¿—è®¾ç½®
sudo ufw status verbose
```

**ğŸ“ˆ ufwæ—¥å¿—åˆ†æ**
```bash
# æŸ¥çœ‹ufwæ—¥å¿—
sudo tail -f /var/log/ufw.log

# åˆ†æè¢«é˜»æ­¢çš„è¿æ¥
grep "BLOCK" /var/log/ufw.log | tail -20

# ç»Ÿè®¡æ”»å‡»æ¥æº
grep "BLOCK" /var/log/ufw.log | \
awk '{print $12}' | cut -d= -f2 | sort | uniq -c | sort -nr | head -10

# æŒ‰æ—¥æœŸç»Ÿè®¡æ”»å‡»æ¬¡æ•°
grep "BLOCK" /var/log/ufw.log | \
awk '{print $1, $2, $3}' | uniq -c
```

### 7.5 æ—¥å¿—åˆ†æå’Œç›‘æ§è„šæœ¬


**ğŸ¤– è‡ªåŠ¨åŒ–æ—¥å¿—åˆ†æ**
```bash
#!/bin/bash
# firewall_log_analyzer.sh

LOG_FILE="/var/log/ufw.log"
REPORT_FILE="/tmp/firewall_report_$(date +%Y%m%d).txt"
THRESHOLD=100

echo "é˜²ç«å¢™æ—¥å¿—åˆ†ææŠ¥å‘Š - $(date)" > $REPORT_FILE
echo "========================================" >> $REPORT_FILE

# ç»Ÿè®¡æ”»å‡»æ¥æºIP
echo "TOP 10 æ”»å‡»æ¥æºIP:" >> $REPORT_FILE
grep "BLOCK" $LOG_FILE | \
awk '{print $12}' | cut -d= -f2 | \
sort | uniq -c | sort -nr | head -10 >> $REPORT_FILE

echo "" >> $REPORT_FILE

# ç»Ÿè®¡æ”»å‡»ç›®æ ‡ç«¯å£
echo "TOP 10 è¢«æ”»å‡»ç«¯å£:" >> $REPORT_FILE
grep "BLOCK" $LOG_FILE | \
awk '{print $14}' | cut -d= -f2 | \
sort | uniq -c | sort -nr | head -10 >> $REPORT_FILE

echo "" >> $REPORT_FILE

# æ£€æŸ¥å¼‚å¸¸IP
echo "ç–‘ä¼¼æ¶æ„IP (æ”»å‡»æ¬¡æ•°>$THRESHOLD):" >> $REPORT_FILE
grep "BLOCK" $LOG_FILE | \
awk '{print $12}' | cut -d= -f2 | \
sort | uniq -c | sort -nr | \
awk -v threshold=$THRESHOLD '$1 > threshold {print $2, $1}' >> $REPORT_FILE

# å‘é€æŠ¥å‘Š
if [ -s $REPORT_FILE ]; then
    mail -s "é˜²ç«å¢™æ—¥å¿—åˆ†ææŠ¥å‘Š" admin@company.com < $REPORT_FILE
fi
```

**ğŸ“Š å®æ—¶ç›‘æ§è„šæœ¬**
```bash
#!/bin/bash
# firewall_monitor.sh

# ç›‘æ§å¼‚å¸¸è¿æ¥
tail -f /var/log/ufw.log | while read line; do
    if echo "$line" | grep -q "BLOCK"; then
        src_ip=$(echo "$line" | awk '{print $12}' | cut -d= -f2)
        dst_port=$(echo "$line" | awk '{print $14}' | cut -d= -f2)
        
        # æ£€æŸ¥æ˜¯å¦ä¸ºå·²çŸ¥æ”»å‡»IP
        if grep -q "$src_ip" /etc/known_attackers.txt; then
            echo "$(date): å·²çŸ¥æ”»å‡»IP $src_ip å°è¯•è®¿é—®ç«¯å£ $dst_port"
            # å‘é€å³æ—¶å‘Šè­¦
            echo "æ£€æµ‹åˆ°å·²çŸ¥æ”»å‡»IP: $src_ip" | \
            mail -s "é˜²ç«å¢™å‘Šè­¦" admin@company.com
        fi
        
        # ç»Ÿè®¡å•ä¸ªIPçš„æ”»å‡»é¢‘ç‡
        count=$(grep "$src_ip" /var/log/ufw.log | wc -l)
        if [ $count -gt 50 ]; then
            echo "$(date): IP $src_ip æ”»å‡»é¢‘ç‡è¿‡é«˜ ($countæ¬¡)"
        fi
    fi
done
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ iptablesï¼šLinuxå†…æ ¸çº§é˜²ç«å¢™ï¼ŒåŠŸèƒ½å¼ºå¤§ä½†æ“ä½œå¤æ‚
ğŸ”¸ firewalldï¼šç°ä»£åŒ–é˜²ç«å¢™ç®¡ç†å·¥å…·ï¼Œæ”¯æŒåŒºåŸŸå’ŒåŠ¨æ€é…ç½®
ğŸ”¸ ufwï¼šç”¨æˆ·å‹å¥½çš„é˜²ç«å¢™ï¼Œç®€åŒ–å¸¸è§æ“ä½œ
ğŸ”¸ è§„åˆ™ä¿å­˜ï¼šé˜²ç«å¢™è§„åˆ™çš„æŒä¹…åŒ–å­˜å‚¨å’Œè‡ªåŠ¨æ¢å¤
ğŸ”¸ ç«¯å£ç®¡ç†ï¼šæœåŠ¡ç«¯å£çš„å¼€æ”¾ã€å…³é—­å’Œå®‰å…¨é…ç½®
ğŸ”¸ çŠ¶æ€ç›‘æ§ï¼šé˜²ç«å¢™è¿è¡ŒçŠ¶æ€å’Œè§„åˆ™æ•ˆæœçš„å®æ—¶æŸ¥çœ‹
ğŸ”¸ æ—¥å¿—åˆ†æï¼šé˜²ç«å¢™äº‹ä»¶è®°å½•å’Œå®‰å…¨å¨èƒåˆ†æ
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ é˜²ç«å¢™å·¥å…·é€‰æ‹©ç­–ç•¥**
```
iptablesé€‚ç”¨åœºæ™¯ï¼š
- éœ€è¦ç²¾ç»†æ§åˆ¶è§„åˆ™
- å¤æ‚çš„ç½‘ç»œç¯å¢ƒ
- è‡ªå®šä¹‰å®‰å…¨ç­–ç•¥

firewalldé€‚ç”¨åœºæ™¯ï¼š
- CentOS/RHEL/Fedoraç³»ç»Ÿ
- éœ€è¦åŒºåŸŸç®¡ç†
- åŠ¨æ€è§„åˆ™æ›´æ–°

ufwé€‚ç”¨åœºæ™¯ï¼š
- Ubuntu/Debianç³»ç»Ÿ
- ç®€å•çš„æœåŠ¡å™¨ç¯å¢ƒ
- å¿«é€Ÿéƒ¨ç½²éœ€æ±‚
```

**ğŸ”¹ è§„åˆ™ç®¡ç†æœ€ä½³å®è·µ**
```
è§„åˆ™è®¾è®¡åŸåˆ™ï¼š
1. æœ€å°æƒé™åŸåˆ™ - åªå¼€æ”¾å¿…éœ€ç«¯å£
2. ç™½åå•ç­–ç•¥ - é»˜è®¤æ‹’ç»ï¼Œæ˜ç¡®å…è®¸
3. åˆ†å±‚é˜²æŠ¤ - ç»“åˆç½‘ç»œå’Œä¸»æœºé˜²ç«å¢™
4. å®šæœŸå®¡è®¡ - æ¸…ç†æ— ç”¨è§„åˆ™

å®‰å…¨é…ç½®è¦ç‚¹ï¼š
1. ä¿®æ”¹é»˜è®¤SSHç«¯å£
2. é™åˆ¶ç®¡ç†ç«¯å£è®¿é—®æ¥æº
3. é…ç½®è¿æ¥é¢‘ç‡é™åˆ¶
4. å¯ç”¨æ—¥å¿—è®°å½•å’Œç›‘æ§
```

**ğŸ”¹ æ•…éšœæ’æŸ¥æ€è·¯**
```
å¸¸è§é—®é¢˜è¯Šæ–­ï¼š
1. æœåŠ¡æ— æ³•è®¿é—® â†’ æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
2. è§„åˆ™ä¸ç”Ÿæ•ˆ â†’ ç¡®è®¤è§„åˆ™é¡ºåºå’Œè¯­æ³•
3. é‡å¯åå¤±æ•ˆ â†’ æ£€æŸ¥è§„åˆ™æŒä¹…åŒ–é…ç½®
4. æ€§èƒ½é—®é¢˜ â†’ ä¼˜åŒ–è§„åˆ™æ•°é‡å’ŒåŒ¹é…æ•ˆç‡

æ’æŸ¥å·¥å…·ç»„åˆï¼š
- netstat/ssï¼šæ£€æŸ¥ç«¯å£ç›‘å¬çŠ¶æ€  
- nmapï¼šæµ‹è¯•ç«¯å£è¿é€šæ€§
- telnetï¼šéªŒè¯ç½‘ç»œè¿æ¥
- tcpdumpï¼šæŠ“åŒ…åˆ†ææµé‡
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ç”Ÿäº§ç¯å¢ƒåº”ç”¨åœºæ™¯**
- **WebæœåŠ¡å™¨**ï¼šHTTP/HTTPSç«¯å£ç®¡ç†ï¼ŒDDoSé˜²æŠ¤é…ç½®
- **æ•°æ®åº“æœåŠ¡å™¨**ï¼šé™åˆ¶æ•°æ®åº“ç«¯å£è®¿é—®æ¥æºï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®
- **è·³æ¿æœº**ï¼šSSHç«¯å£å®‰å…¨é…ç½®ï¼Œè®¿é—®IPç™½åå•ç®¡ç†  
- **å†…ç½‘æœåŠ¡å™¨**ï¼šå†…éƒ¨æœåŠ¡ç«¯å£æ§åˆ¶ï¼Œæ¨ªå‘æ¸—é€é˜²æŠ¤

**ğŸ”§ è¿ç»´å®è·µå»ºè®®**
- **æ ‡å‡†åŒ–é…ç½®**ï¼šå»ºç«‹ä¼ä¸šé˜²ç«å¢™é…ç½®æ ‡å‡†å’Œæ¨¡æ¿
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šä½¿ç”¨è„šæœ¬æˆ–é…ç½®ç®¡ç†å·¥å…·ç»Ÿä¸€éƒ¨ç½²
- **ç›‘æ§å‘Šè­¦**ï¼šå»ºç«‹é˜²ç«å¢™çŠ¶æ€ç›‘æ§å’Œå¼‚å¸¸å‘Šè­¦æœºåˆ¶
- **å®šæœŸå®¡è®¡**ï¼šå®šæœŸæ£€æŸ¥å’Œæ¸…ç†é˜²ç«å¢™è§„åˆ™é…ç½®

**ğŸ“ˆ å®‰å…¨å‘å±•è¶‹åŠ¿**
- **äº‘åŸç”Ÿé˜²ç«å¢™**ï¼šå®¹å™¨ç¯å¢ƒä¸‹çš„ç½‘ç»œå®‰å…¨æ§åˆ¶
- **å¾®åˆ†æ®µæŠ€æœ¯**ï¼šæ›´ç²¾ç»†çš„ç½‘ç»œè®¿é—®æ§åˆ¶
- **AIå¨èƒæ£€æµ‹**ï¼šæ™ºèƒ½è¯†åˆ«å’Œé˜»æ­¢å®‰å…¨å¨èƒ
- **é›¶ä¿¡ä»»ç½‘ç»œ**ï¼šåŸºäºèº«ä»½çš„åŠ¨æ€è®¿é—®æ§åˆ¶

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ä¸‰å¤§å·¥å…·å„æœ‰é•¿ï¼Œé€‰æ‹©åˆé€‚æœ€é‡è¦
- è§„åˆ™ç®¡ç†è¦æœ‰åºï¼Œä¿å­˜æŒä¹…ä¸èƒ½å¿˜  
- ç«¯å£å¼€æ”¾éœ€è°¨æ…ï¼Œæ—¥å¿—ç›‘æ§å¸¸æŸ¥çœ‹
- å®‰å…¨é…ç½®é‡å®è·µï¼Œå®šæœŸå®¡è®¡ä¿å¹³å®‰