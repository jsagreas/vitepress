---
title: 1、网络接口查看与配置命令
---
## 📚 目录

1. [网络接口命令概述](#1-网络接口命令概述)
2. [ifconfig经典网络配置](#2-ifconfig经典网络配置)
3. [ip命令现代网络管理](#3-ip命令现代网络管理)
4. [ethtool网卡硬件管理](#4-ethtool网卡硬件管理)
5. [NetworkManager命令行工具](#5-NetworkManager命令行工具)
6. [接口启停控制命令](#6-接口启停控制命令)
7. [无线网络配置工具](#7-无线网络配置工具)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🌐 网络接口命令概述


### 1.1 什么是网络接口


**🔸 网络接口的本质**
网络接口就是你的电脑连接网络的"门户"，就像你家的大门一样。每台电脑都有一个或多个网络接口，用来收发数据。

```
简单理解：
物理网卡 = 硬件设备（实体网卡）
网络接口 = 系统识别的逻辑设备（eth0、wlan0等）

常见接口类型：
🔌 eth0：第一块有线网卡
📶 wlan0：第一块无线网卡  
🔄 lo：本地回环接口（127.0.0.1）
```

### 1.2 为什么需要网络配置命令


**💡 核心作用**
- **查看状态**：看看网卡是否正常工作
- **配置地址**：给网卡分配IP地址
- **控制开关**：启动或关闭网络接口
- **调试问题**：排查网络连接故障

### 1.3 新旧命令对比


| **传统命令** | **现代命令** | **功能说明** | **推荐使用** |
|-------------|-------------|-------------|-------------|
| `ifconfig` | `ip addr` | 查看IP地址 | ✅ 两者都可用 |
| `route` | `ip route` | 路由管理 | 🔥 推荐ip命令 |
| `arp` | `ip neigh` | 邻居表管理 | 🔥 推荐ip命令 |
| `netstat` | `ss` | 网络连接状态 | 🔥 推荐ss命令 |

---

## 2. 🔧 ifconfig经典网络配置


### 2.1 ifconfig基础概念


**🔸 ifconfig是什么**
`ifconfig`是"interface configuration"的缩写，意思是"接口配置"。它是Linux中最经典的网络配置工具，虽然老但很实用。

### 2.2 查看网络接口信息


**📋 基本查看命令**

```bash
# 查看所有活动的网络接口
ifconfig

# 查看指定接口信息
ifconfig eth0

# 查看所有接口（包括未激活的）
ifconfig -a
```

**🔍 输出信息解读**
```
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::a00:27ff:fe4e:66a1  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:4e:66:a1  txqueuelen 1000  (Ethernet)
        RX packets 1234  bytes 567890 (554.5 KiB)
        TX packets 987   bytes 123456 (120.5 KiB)
```

**📝 关键信息含义：**
- **UP**：接口已启动
- **RUNNING**：接口正在运行
- **inet 192.168.1.100**：IPv4地址
- **ether 08:00:27:4e:66:a1**：MAC地址
- **RX/TX packets**：收发数据包统计

### 2.3 临时配置IP地址


**⚠️ 重要提醒：ifconfig的配置是临时的，重启后会丢失！**

```bash
# 给eth0配置IP地址
ifconfig eth0 192.168.1.200

# 配置IP地址和子网掩码
ifconfig eth0 192.168.1.200 netmask 255.255.255.0

# 配置IP、掩码和广播地址
ifconfig eth0 192.168.1.200 netmask 255.255.255.0 broadcast 192.168.1.255
```

### 2.4 接口启停控制


```bash
# 启动网络接口
ifconfig eth0 up

# 关闭网络接口  
ifconfig eth0 down

# 修改MTU值（最大传输单元）
ifconfig eth0 mtu 9000
```

**💡 实际应用场景**
```
网络故障排查：
1. ifconfig eth0 down    # 先关闭接口
2. ifconfig eth0 up      # 重新启动接口
3. ifconfig              # 检查是否恢复正常

临时更换IP：
ifconfig eth0 192.168.1.50  # 临时改成这个IP测试
```

---

## 3. 🚀 ip命令现代网络管理


### 3.1 为什么要学ip命令


**🎯 ip命令的优势**
- **功能更全**：一个命令搞定所有网络配置
- **更先进**：支持更多新特性
- **更精确**：输出信息更详细准确
- **官方推荐**：新版Linux系统主推的工具

### 3.2 ip addr地址管理


**📋 查看IP地址信息**

```bash
# 显示所有接口的IP地址信息
ip addr show
# 简写形式
ip a

# 查看指定接口
ip addr show eth0
# 更简写
ip a s eth0
```

**🔍 输出信息详解**
```
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 08:00:27:4e:66:a1 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.100/24 brd 192.168.1.255 scope global dynamic eth0
       valid_lft 3456sec preferred_lft 3456sec
```

**📝 关键信息含义：**
- **state UP**：接口状态正常
- **192.168.1.100/24**：IP地址和子网掩码（/24表示255.255.255.0）
- **scope global**：全局可达的地址
- **dynamic**：通过DHCP动态获取

**⚡ 配置IP地址**

```bash
# 添加IP地址
ip addr add 192.168.1.200/24 dev eth0

# 删除IP地址
ip addr del 192.168.1.200/24 dev eth0

# 清空接口所有IP地址
ip addr flush dev eth0
```

### 3.3 ip link接口状态控制


**🔗 接口链路管理**

```bash
# 查看所有网络接口
ip link show
# 简写
ip l

# 启动接口
ip link set eth0 up

# 关闭接口
ip link set eth0 down

# 修改接口名称
ip link set eth0 name myeth0

# 修改MAC地址
ip link set eth0 address 00:11:22:33:44:55
```

### 3.4 ip route路由管理


**🛣️ 路由表操作**

```bash
# 查看路由表
ip route show
# 简写
ip r

# 添加默认网关
ip route add default via 192.168.1.1

# 添加特定路由
ip route add 10.0.0.0/8 via 192.168.1.1

# 删除路由
ip route del 10.0.0.0/8
```

**💡 路由表理解**
```
目标网络        网关          接口
0.0.0.0/0  → 192.168.1.1  → eth0  (默认路由)
192.168.1.0/24 → 0.0.0.0   → eth0  (直连网络)

通俗解释：
- 去任何地方(0.0.0.0/0)都通过网关192.168.1.1
- 去本地网络192.168.1.x直接从eth0出去
```

---

## 4. 🔧 ethtool网卡硬件管理


### 4.1 ethtool的作用


**🔸 什么是ethtool**
`ethtool`专门用来查看和配置网卡硬件参数，就像是网卡的"体检工具"，能告诉你网卡的详细健康状况。

### 4.2 查看网卡基本信息


```bash
# 查看网卡基本状态
ethtool eth0

# 查看网卡驱动信息
ethtool -i eth0

# 查看网卡统计信息
ethtool -S eth0
```

**📊 输出信息解读**
```
Settings for eth0:
    Supported ports: [ TP ]
    Supported link modes:   10baseT/Half 10baseT/Full
                           100baseT/Half 100baseT/Full
                           1000baseT/Full
    Speed: 1000Mb/s          ← 当前速度
    Duplex: Full             ← 全双工模式  
    Link detected: yes       ← 网线已连接
```

**💡 关键概念解释：**
- **Speed**：网卡运行速度（10M/100M/1000M）
- **Duplex**：通信模式（Full=全双工，Half=半双工）
- **Link detected**：是否检测到网线连接

### 4.3 修改网卡参数


```bash
# 设置网卡速度和双工模式
ethtool -s eth0 speed 100 duplex full

# 关闭自动协商
ethtool -s eth0 autoneg off

# 开启自动协商
ethtool -s eth0 autoneg on
```

### 4.4 网卡测试功能


```bash
# 网卡自检测试
ethtool -t eth0

# 让网卡指示灯闪烁（用于识别网卡）
ethtool -p eth0 10    # 闪烁10秒
```

**🎯 实际应用场景**
```
网络问题排查：
1. ethtool eth0           # 检查链路状态
2. 看Link detected是否为yes # 确认网线连接
3. 检查Speed是否正常       # 确认协商速度

服务器维护：
ethtool -p eth0 30        # 让指定网卡闪烁30秒
                          # 机房里快速找到对应网线
```

---

## 5. 📱 NetworkManager命令行工具


### 5.1 NetworkManager概述


**🔸 什么是NetworkManager**
NetworkManager是现代Linux系统的网络管理服务，`nmcli`是它的命令行工具。就像是网络的"智能管家"，能自动管理各种网络连接。

**🎯 主要优势：**
- **自动化**：自动连接已知网络
- **统一管理**：有线、无线、VPN统一管理
- **配置持久**：配置会永久保存
- **智能切换**：网络间自动切换

### 5.2 nmcli基础操作


**📋 查看网络状态**

```bash
# 查看NetworkManager总体状态
nmcli general status

# 查看所有网络连接
nmcli connection show

# 查看网络设备
nmcli device status
```

**🔍 输出信息理解**
```
DEVICE  TYPE      STATE        CONNECTION
eth0    ethernet  connected    Wired connection 1
wlan0   wifi      disconnected --
lo      loopback  unmanaged    --

解释：
- eth0已连接，使用"Wired connection 1"配置
- wlan0未连接无线网络
- lo是回环接口，不需要管理
```

### 5.3 连接管理


**⚡ 连接操作命令**

```bash
# 启动连接
nmcli connection up "Wired connection 1"

# 停止连接
nmcli connection down "Wired connection 1"

# 重新加载配置
nmcli connection reload

# 创建新的有线连接
nmcli connection add type ethernet ifname eth0
```

### 5.4 IP地址配置


```bash
# 修改连接为静态IP
nmcli connection modify "Wired connection 1" \
    ipv4.addresses 192.168.1.100/24 \
    ipv4.gateway 192.168.1.1 \
    ipv4.dns 8.8.8.8 \
    ipv4.method manual

# 修改为DHCP自动获取
nmcli connection modify "Wired connection 1" \
    ipv4.method auto

# 应用修改
nmcli connection up "Wired connection 1"
```

**💡 配置文件位置**
NetworkManager的配置文件保存在：`/etc/NetworkManager/system-connections/`

---

## 6. 🔌 接口启停控制命令


### 6.1 传统启停方法


**🔸 ifup/ifdown命令**
这是传统的接口启停工具，读取`/etc/network/interfaces`配置文件。

```bash
# 启动网络接口
ifup eth0

# 关闭网络接口
ifdown eth0

# 重启网络接口（先关闭再启动）
ifdown eth0 && ifup eth0
```

### 6.2 systemd网络管理


```bash
# 重启网络服务
systemctl restart networking

# 重启NetworkManager
systemctl restart NetworkManager

# 查看网络服务状态
systemctl status networking
```

### 6.3 不同场景的选择


| **场景** | **推荐命令** | **说明** |
|---------|-------------|----------|
| **临时测试** | `ifconfig eth0 up/down` | 快速临时操作 |
| **配置管理** | `nmcli connection up/down` | 现代系统推荐 |
| **传统系统** | `ifup/ifdown eth0` | 老系统兼容性好 |
| **服务重启** | `systemctl restart networking` | 重启整个网络服务 |

---

## 7. 📶 无线网络配置工具


### 7.1 iwconfig基础操作


**🔸 iwconfig的作用**
`iwconfig`是专门配置无线网络接口的工具，相当于无线网络的"遥控器"。

```bash
# 查看所有无线接口
iwconfig

# 查看指定无线接口
iwconfig wlan0

# 扫描可用无线网络
iwlist wlan0 scan
```

### 7.2 无线网络连接


**📶 基本连接步骤**

```bash
# 1. 扫描无线网络
iwlist wlan0 scan | grep ESSID

# 2. 连接开放网络（无密码）
iwconfig wlan0 essid "OpenWiFi"

# 3. 连接WEP加密网络
iwconfig wlan0 essid "MyWiFi" key "1234567890"

# 4. 启动接口
ifconfig wlan0 up

# 5. 获取IP地址
dhclient wlan0
```

### 7.3 现代无线管理


**🎯 使用NetworkManager管理WiFi**

```bash
# 查看可用WiFi网络
nmcli device wifi list

# 连接WiFi网络
nmcli device wifi connect "WiFiName" password "WiFiPassword"

# 查看已保存的WiFi连接
nmcli connection show --active

# 断开WiFi
nmcli connection down "WiFiName"
```

**💡 实用技巧**
```
快速连接已知WiFi：
nmcli connection up "Home WiFi"

忘记WiFi密码时：
nmcli connection delete "Old WiFi"
nmcli device wifi connect "WiFiName" password "NewPassword"
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


```
🔸 网络接口：系统识别网卡的逻辑名称（eth0、wlan0）
🔸 IP配置：给接口分配网络地址的过程
🔸 临时配置：重启后会丢失的配置方式
🔸 永久配置：保存到配置文件，重启后保持
🔸 接口状态：UP/DOWN表示启动/关闭状态
```

### 8.2 命令使用场景对比


| **场景需求** | **首选命令** | **备选方案** | **使用理由** |
|-------------|-------------|-------------|-------------|
| **快速查看IP** | `ip a` | `ifconfig` | 信息更详细准确 |
| **临时改IP** | `ifconfig eth0 IP` | `ip addr add` | 简单快速 |
| **永久配置** | `nmcli` | 编辑配置文件 | 图形界面兼容 |
| **网卡诊断** | `ethtool eth0` | - | 专业硬件检测 |
| **WiFi连接** | `nmcli device wifi` | `iwconfig` | 现代化管理 |

### 8.3 关键理解要点


**🔹 新旧工具的关系**
```
传统工具 → 现代工具：
ifconfig → ip addr    (地址管理)
route    → ip route   (路由管理)
iwconfig → nmcli wifi (无线管理)

为什么要学新工具：
✅ 功能更强大完整
✅ 支持新网络特性  
✅ 官方推荐使用
✅ 未来发展趋势
```

**🔹 临时vs永久配置**
```
临时配置特点：
- 立即生效
- 重启丢失
- 适合测试调试

永久配置特点：  
- 需要重启生效（或重载）
- 重启后保持
- 适合生产环境
```

**🔹 不同系统的差异**
```
RedHat系（CentOS、RHEL）：
- 使用NetworkManager
- 配置文件在/etc/sysconfig/network-scripts/

Debian系（Ubuntu）：
- 传统使用/etc/network/interfaces
- 新版也支持NetworkManager

实用建议：
- 先学会基础ifconfig和ip命令
- 再掌握对应系统的配置方法
```

### 8.4 实际应用指导


**🛠️ 常见问题排查流程**
```
网络不通时的检查步骤：

1. 检查物理连接
   ethtool eth0 | grep "Link detected"

2. 检查接口状态  
   ip link show eth0

3. 检查IP配置
   ip addr show eth0

4. 检查路由配置
   ip route show

5. 重启网络接口
   ifdown eth0 && ifup eth0
```

**📝 配置最佳实践**
- **测试环境**：使用临时配置快速验证
- **生产环境**：使用永久配置确保稳定
- **文档记录**：重要配置要做好备份记录
- **逐步验证**：每次修改后都要测试连通性

**核心记忆**：
- 网络接口是网卡的逻辑名称，需要配置才能使用
- ifconfig查看配置，ip命令功能更全面
- ethtool专门检查网卡硬件状态
- nmcli是现代网络管理的趋势工具
- 临时配置用于测试，永久配置用于生产