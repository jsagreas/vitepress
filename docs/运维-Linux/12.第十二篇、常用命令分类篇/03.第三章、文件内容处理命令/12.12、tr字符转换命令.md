---
title: 12、tr字符转换命令
---
## 📚 目录

1. [tr命令基本概念](#1-tr命令基本概念)
2. [字符替换与转换](#2-字符替换与转换)
3. [大小写转换操作](#3-大小写转换操作)
4. [字符删除与压缩](#4-字符删除与压缩)
5. [字符集合定义](#5-字符集合定义)
6. [转义字符处理](#6-转义字符处理)
7. [与管道组合使用](#7-与管道组合使用)
8. [文本格式化应用](#8-文本格式化应用)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🔤 tr命令基本概念


### 1.1 什么是tr命令


**🔸 基本定义**
`tr`命令是Linux系统中的字符转换工具，全称是"translate"（翻译/转换）。它的作用就像一个字符翻译器，能把文本中的某些字符替换成其他字符。

**💡 生活类比**
```
想象tr命令就像一个智能的文字替换器：
📝 原文档：Hello World
🔄 替换规则：把所有小写字母变成大写
📄 结果：HELLO WORLD

就像用"查找替换"功能批量修改文档一样
```

**⭐ 重要程度：🔥 必须掌握**

### 1.2 tr命令的工作特点


**🔸 核心特性**
```
单向处理：tr只能从标准输入读取，向标准输出写入
字符级处理：按单个字符进行转换，不是按单词
流式处理：边读边转换，内存占用小
管道友好：经常配合管道使用
```

**📊 工作流程图**
```
标准输入 → tr命令处理 → 标准输出
   ↓          ↓           ↓
文本流  → 字符转换规则 → 转换后文本

示例流程：
echo "hello" | tr 'a-z' 'A-Z' → "HELLO"
```

### 1.3 基本语法格式


**🔸 标准语法**
```bash
tr [选项] 字符集1 [字符集2]
```

**📋 参数说明**
- `字符集1`：要被替换的字符集合
- `字符集2`：替换后的字符集合  
- `选项`：控制转换行为的参数

**💡 简单示例**
```bash
# 把小写a替换为大写A
echo "apple" | tr 'a' 'A'
# 输出：Apple

# 把所有小写字母变成大写
echo "hello world" | tr 'a-z' 'A-Z'  
# 输出：HELLO WORLD
```

---

## 2. 🔄 字符替换与转换


### 2.1 单字符替换


**🔸 基本替换操作**

最简单的用法就是把一个字符替换成另一个字符：

```bash
# 把所有的'e'替换为'3'
echo "hello everyone" | tr 'e' '3'
# 输出：h3llo 3v3ryon3

# 把空格替换为下划线
echo "file name with spaces" | tr ' ' '_'
# 输出：file_name_with_spaces
```

**💡 理解要点**
- tr按字符逐一匹配替换
- 每个匹配的字符都会被替换
- 不会影响其他字符

### 2.2 多字符对应替换


**🔸 一对一字符映射**

```bash
# 同时进行多个字符的替换
echo "hello123" | tr 'hlo123' 'HLO789'
# 转换对应关系：h→H, l→L, o→O, 1→7, 2→8, 3→9
# 输出：HeLL789
```

**📊 字符映射表**
| 原字符 | 目标字符 | 说明 |
|-------|---------|------|
| h | H | 第1个对应第1个 |
| l | L | 第2个对应第2个 |
| o | O | 第3个对应第3个 |
| 1 | 7 | 第4个对应第4个 |

### 2.3 字符范围替换


**🔸 使用连字符定义范围**

```bash
# 数字转换：0-9 变成 A-J
echo "abc123def" | tr '0-9' 'A-J'
# 输出：abcBCDdef (1→B, 2→C, 3→D)

# 字母范围转换
echo "Hello World" | tr 'A-Z' 'a-z'
# 输出：hello world
```

**📝 范围定义规则**
```
数字范围：0-9 表示 0123456789
小写字母：a-z 表示 abcdefghijklmnopqrstuvwxyz  
大写字母：A-Z 表示 ABCDEFGHIJKLMNOPQRSTUVWXYZ
自定义范围：a-f 表示 abcdef
```

### 2.4 不等长字符集处理


**⚠️ 重要注意事项**

当两个字符集长度不相等时，tr的处理方式：

```bash
# 目标字符集较短：重复最后一个字符
echo "abcdef" | tr 'a-f' 'XY'
# a→X, b→Y, c→Y, d→Y, e→Y, f→Y
# 输出：XYYYYY

# 目标字符集较长：多余字符被忽略
echo "abc" | tr 'a-c' 'XYZWV'
# a→X, b→Y, c→Z (W和V被忽略)
# 输出：XYZ
```

---

## 3. 🔠 大小写转换操作


### 3.1 基本大小写转换


**🔸 全部转为大写**

```bash
# 方法1：使用字母范围
echo "Hello World" | tr 'a-z' 'A-Z'
# 输出：HELLO WORLD

# 方法2：使用字符类（推荐）
echo "Hello World" | tr '[:lower:]' '[:upper:]'
# 输出：HELLO WORLD
```

**🔸 全部转为小写**

```bash
# 方法1：使用字母范围
echo "Hello World" | tr 'A-Z' 'a-z'
# 输出：hello world

# 方法2：使用字符类（推荐）
echo "Hello World" | tr '[:upper:]' '[:lower:]'
# 输出：hello world
```

**⭐ 推荐使用字符类的原因**
- 支持国际字符
- 更加标准化
- 避免编码问题

### 3.2 实际应用场景


**🔸 文件名规范化**

```bash
# 把文件名改为小写（常用于Web开发）
filename="My_Important_FILE.TXT"
echo "$filename" | tr 'A-Z' 'a-z'
# 输出：my_important_file.txt
```

**🔸 用户输入标准化**

```bash
# 处理用户输入，转为统一大写进行比较
read -p "请输入Yes或No: " answer
answer_upper=$(echo "$answer" | tr 'a-z' 'A-Z')
if [ "$answer_upper" = "YES" ]; then
    echo "你选择了是"
fi
```

### 3.3 ROT13编码（字母位移）


**🔸 简单加密示例**

ROT13是一种简单的字母替换加密，每个字母被其后第13个字母替换：

```bash
# ROT13编码
echo "hello" | tr 'a-zA-Z' 'n-za-mN-ZA-M'
# 输出：uryyb

# ROT13解码（再次使用相同命令）
echo "uryyb" | tr 'a-zA-Z' 'n-za-mN-ZA-M'  
# 输出：hello
```

**💡 ROT13原理**
```
字母映射：
a b c d e f g h i j k l m  n o p q r s t u v w x y z
↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓  ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓
n o p q r s t u v w x y z  a b c d e f g h i j k l m
```

---

## 4. 🗑️ 字符删除与压缩


### 4.1 删除指定字符


**🔸 使用-d选项删除字符**

```bash
# 删除所有数字
echo "abc123def456" | tr -d '0-9'
# 输出：abcdef

# 删除所有空格
echo "hello world test" | tr -d ' '
# 输出：helloworldtest

# 删除多种字符
echo "Hello, World!" | tr -d ',.!'
# 输出：Hello World
```

**💡 删除操作特点**
- 只需要指定要删除的字符集
- 不需要提供替换字符
- 指定的字符会被完全移除

### 4.2 删除字符类


**🔸 使用预定义字符类**

```bash
# 删除所有标点符号
echo "Hello, World! How are you?" | tr -d '[:punct:]'
# 输出：Hello World How are you

# 删除所有空白字符（空格、制表符、换行符）
echo "Hello	World  " | tr -d '[:space:]'
# 输出：HelloWorld
```

**📋 常用字符类**
| 字符类 | 含义 | 包含字符 |
|-------|------|----------|
| `[:space:]` | 空白字符 | 空格、制表符、换行符等 |
| `[:punct:]` | 标点符号 | ,.!?;: 等 |
| `[:digit:]` | 数字字符 | 0-9 |
| `[:alpha:]` | 字母字符 | a-z, A-Z |

### 4.3 压缩重复字符


**🔸 使用-s选项压缩字符**

```bash
# 压缩重复的空格
echo "hello     world" | tr -s ' '
# 输出：hello world (多个空格变成一个)

# 压缩重复的任意字符
echo "hellooooo" | tr -s 'o'
# 输出：hello (多个o变成一个o)
```

**🔸 实际应用：格式化文本**

```bash
# 清理日志文件中的多余空白
echo "2023-01-01    INFO     System   started" | tr -s ' '
# 输出：2023-01-01 INFO System started

# 压缩换行符（去除空行）
printf "line1\n\n\nline2\n\n" | tr -s '\n'
# 输出：
# line1
# line2
```

### 4.4 组合删除和压缩


**🔸 复杂文本处理**

```bash
# 先删除标点，再压缩空格
echo "Hello,,,   World!!!" | tr -d '[:punct:]' | tr -s ' '
# 输出：Hello World

# 清理CSV数据：删除引号，压缩空格
echo '"John",   "Doe",  "Manager"' | tr -d '"' | tr -s ' '
# 输出：John, Doe, Manager
```

---

## 5. 📝 字符集合定义


### 5.1 基本字符集语法


**🔸 单个字符列举**

```bash
# 指定具体字符
echo "hello123" | tr 'hel' 'HEL'
# h→H, e→E, l→L
# 输出：HELLo123
```

**🔸 字符范围定义**

```bash
# 数字范围
echo "test123" | tr '0-9' 'A-J'
# 0→A, 1→B, 2→C, 3→D, etc.
# 输出：testBCD

# 字母范围
echo "abc" | tr 'a-c' 'x-z'
# a→x, b→y, c→z
# 输出：xyz
```

### 5.2 字符类使用


**🔸 POSIX标准字符类**

```bash
# 使用字符类更安全和通用
echo "Hello123World" | tr '[:digit:]' '[:upper:]'
# 等价于 tr '0-9' 'A-J'，但更标准
```

**📊 完整字符类列表**

| 字符类 | 说明 | 等价范围 | 示例 |
|-------|------|----------|------|
| `[:alnum:]` | 字母数字 | `a-zA-Z0-9` | abc123 |
| `[:alpha:]` | 字母 | `a-zA-Z` | abcABC |
| `[:lower:]` | 小写字母 | `a-z` | abc |
| `[:upper:]` | 大写字母 | `A-Z` | ABC |
| `[:digit:]` | 数字 | `0-9` | 123 |
| `[:space:]` | 空白字符 | 空格、制表符等 | ` \t\n` |
| `[:punct:]` | 标点符号 | `,.!?;:` 等 | ,.! |
| `[:print:]` | 可打印字符 | 除控制字符外 | abc123,.! |

### 5.3 字符集合的组合


**🔸 多个字符类组合**

```bash
# 删除所有字母和数字，保留标点和空格
echo "Hello, World! 123" | tr -d '[:alnum:]'
# 输出：, ! 

# 只保留字母和空格
echo "Hello, World! 123" | tr -d -c '[:alpha:][:space:]'
# 输出：Hello World 
```

**⚠️ -c选项说明**
- `-c`表示"complement"（补集）
- `tr -d -c 'abc'` 表示删除除了a、b、c以外的所有字符

### 5.4 特殊字符处理


**🔸 处理特殊字符**

```bash
# 处理制表符和换行符
echo -e "hello\tworld\n" | tr '\t\n' '  '
# \t→空格, \n→空格
# 输出：hello world  

# 处理控制字符
echo "hello^M" | tr -d '\r'  # 删除Windows回车符
# 输出：hello
```

**📝 常见转义字符**
```
\n  换行符
\t  制表符  
\r  回车符
\\  反斜杠
\'  单引号
\"  双引号
```

---

## 6. ⚡ 转义字符处理


### 6.1 基本转义字符


**🔸 常用转义序列**

tr命令支持标准的C语言转义序列：

```bash
# 处理换行符
echo -e "line1\nline2" | tr '\n' ' '
# 输出：line1 line2 

# 处理制表符
echo -e "col1\tcol2" | tr '\t' ','
# 输出：col1,col2
```

**📋 转义字符对照表**

| 转义序列 | 含义 | ASCII码 | 用途 |
|----------|------|---------|------|
| `\n` | 换行符 | 10 | 行分隔 |
| `\t` | 制表符 | 9 | 列对齐 |
| `\r` | 回车符 | 13 | Windows换行 |
| `\b` | 退格符 | 8 | 删除前一字符 |
| `\f` | 换页符 | 12 | 打印机换页 |
| `\\` | 反斜杠 | 92 | 字面量反斜杠 |

### 6.2 八进制和十六进制表示


**🔸 使用数字代码表示字符**

```bash
# 使用八进制表示换行符（\n = \012）
echo "hello world" | tr ' ' '\012'
# 输出：
# hello
# world

# 删除不可见控制字符（ASCII 0-31）
echo "hello^@^A^B" | tr -d '\000-\037'
# 删除ASCII码0到31的控制字符
```

**💡 数字表示的应用**
- 处理不可打印字符
- 精确控制特殊字符
- 跨系统兼容性

### 6.3 Windows和Unix换行符转换


**🔸 系统间文本转换**

不同操作系统使用不同的换行符：
- **Unix/Linux**: `\n` (LF)
- **Windows**: `\r\n` (CRLF)  
- **Mac(旧版)**: `\r` (CR)

```bash
# Windows文本转Unix格式
cat windows_file.txt | tr -d '\r' > unix_file.txt

# Unix文本转Windows格式（需要额外步骤）
sed 's/$/\r/' unix_file.txt > windows_file.txt
```

### 6.4 处理特殊符号


**🔸 引号和特殊字符**

```bash
# 处理单引号（需要转义）
echo "don't" | tr \' \"
# 输出：don"t

# 处理反斜杠
echo "path\\file" | tr '\\' '/'
# 输出：path/file
```

**⚠️ Shell转义注意事项**
```bash
# 在shell中使用特殊字符时要小心引号
echo 'file\name' | tr '\' '/'  # 错误：反斜杠需要转义
echo 'file\name' | tr '\\' '/' # 正确
```

---

## 7. 🔗 与管道组合使用


### 7.1 tr在管道中的位置


**🔸 数据处理流水线**

tr命令最常见的使用方式就是在管道中进行文本处理：

```
输入源 | 预处理 | tr转换 | 后处理 | 输出
```

**💡 管道组合示例**

```bash
# 典型的文本处理流水线
cat data.txt | grep "pattern" | tr 'a-z' 'A-Z' | sort | uniq
# 流程：读取→过滤→转大写→排序→去重
```

### 7.2 与cat命令组合


**🔸 文件内容转换**

```bash
# 转换文件中的字符
cat /etc/passwd | tr ':' '\t'
# 把冒号分隔改为制表符分隔

# 多个文件同时处理
cat *.txt | tr -d '[:punct:]' | wc -w
# 删除标点后统计单词数
```

### 7.3 与echo命令组合


**🔸 字符串快速处理**

```bash
# 变量处理
name="John Doe"
echo "$name" | tr ' ' '_'
# 输出：John_Doe

# 生成随机密码字符
echo "abcdefghijklmnopqrstuvwxyz" | tr -d "aeiou"
# 输出：bcdfghjklmnpqrstvwxyz（去除元音）
```

### 7.4 与其他命令的组合


**🔸 复杂数据处理**

```bash
# 与awk组合：处理CSV文件
cat data.csv | tr ',' '\t' | awk '{print $1, $3}'
# CSV转换为制表符分隔，然后提取第1和第3列

# 与sort组合：文本规范化后排序
cat names.txt | tr 'A-Z' 'a-z' | sort -u
# 转小写后排序去重

# 与wc组合：统计处理后的数据
cat log.txt | tr -d '[:digit:]' | wc -c
# 删除数字后统计字符数
```

### 7.5 实际应用场景


**🔸 日志处理**

```bash
# 清理系统日志
cat /var/log/messages | tr -s ' ' | cut -d' ' -f1-3
# 压缩空格后提取时间字段

# 提取IP地址（配合其他工具）
cat access.log | tr -s ' ' | cut -d' ' -f1 | sort | uniq -c
# 提取访问IP并统计频次
```

**🔸 数据格式转换**

```bash
# JSON数据预处理
cat data.json | tr -d ' \n\t' | tr ',' '\n'
# 压缩JSON并按逗号分行

# 配置文件处理
cat config.ini | tr '=' ':' | tr -d ' '
# INI格式转换为冒号分隔
```

---

## 8. 📋 文本格式化应用


### 8.1 数据清洗


**🔸 去除多余空白字符**

```bash
# 清理包含不规则空白的数据
echo "  hello     world  " | tr -s '[:space:]' ' '
# 输出： hello world （规范化为单个空格）

# 完全去除所有空白
echo "hello world test" | tr -d '[:space:]'
# 输出：helloworldtest
```

**🔸 标准化分隔符**

```bash
# 统一分隔符格式
echo "name:age;city|country" | tr ':;|' ','
# 输出：name,age,city,country

# CSV数据清理
echo '"John", "25", "NYC"' | tr -d '"' | tr -s ' '
# 输出：John, 25, NYC
```

### 8.2 文本规范化


**🔸 文件名规范化**

```bash
# 文件名转换为URL友好格式
filename="My Important File (2023).txt"
echo "$filename" | tr 'A-Z ' 'a-z-' | tr -d '()'
# 输出：my-important-file-2023.txt
```

**🔸 用户输入规范化**

```bash
# 处理用户输入的邮箱地址
email="User@Example.COM"
echo "$email" | tr 'A-Z' 'a-z'
# 输出：user@example.com

# 电话号码格式化
phone="(123) 456-7890"
echo "$phone" | tr -d '() -'
# 输出：1234567890
```

### 8.3 编程应用


**🔸 变量名转换**

```bash
# 下划线转驼峰（预处理）
var_name="user_name_field"
echo "$var_name" | tr '_' ' '
# 输出：user name field
# （后续可配合其他工具完成驼峰转换）

# 常量名生成
echo "myConfigValue" | tr 'a-z' 'A-Z' | tr -s 'A-Z' '_A-Z'
# 为编程生成常量名格式
```

### 8.4 文档处理


**🔸 Markdown文本处理**

```bash
# 清理Markdown标记
echo "## Title **bold** *italic*" | tr -d '*#'
# 输出：  Title bold italic

# 提取纯文本内容
cat README.md | tr -d '[]()' | tr '#' ' '
# 去除Markdown语法标记
```

**🔸 HTML标签清理**

```bash
# 简单的HTML标签移除（配合其他工具更好）
echo "<p>Hello <b>World</b></p>" | tr -d '<>'
# 输出：pHello bWorld/b/p
# 注意：这只是预处理，完整HTML解析需要专门工具
```

### 8.5 批量文件处理


**🔸 批处理脚本应用**

```bash
# 批量重命名文件（生成重命名命令）
ls *.TXT | tr 'A-Z' 'a-z' > rename_commands.txt
# 生成小写文件名列表

# 批量处理配置文件
for file in *.conf; do
    cat "$file" | tr '=' ':' > "${file%.conf}.cfg"
done
# 将等号分隔转换为冒号分隔
```

**🔸 日志分析准备**

```bash
# 预处理访问日志
cat access.log | tr -s ' ' | tr ' ' ',' > access.csv
# 转换为CSV格式便于分析

# 系统日志时间标准化
journalctl | tr -s ' ' | cut -d' ' -f1-3 | tr ' ' 'T'
# 提取并格式化时间戳
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的核心概念


```
🔸 tr本质：字符级别的转换工具，不是单词级别
🔸 输入输出：只能从标准输入读取，向标准输出写入
🔸 字符映射：一对一字符转换，支持范围定义
🔸 三大功能：替换(默认)、删除(-d)、压缩(-s)
🔸 管道友好：经常配合管道进行文本处理流水线
```

### 9.2 关键语法记忆


**🔸 基本操作模式**
```bash
tr 'abc' 'XYZ'           # 字符替换：a→X, b→Y, c→Z
tr -d 'abc'              # 字符删除：删除a、b、c
tr -s ' '                # 字符压缩：多个空格变一个
tr -c -d '[:alnum:]'     # 补集删除：只保留字母数字
```

**🔸 常用字符集**
```bash
'a-z'        # 小写字母
'A-Z'        # 大写字母  
'0-9'        # 数字
'[:lower:]'  # 小写字母（推荐）
'[:upper:]'  # 大写字母（推荐）
'[:space:]'  # 空白字符
'[:punct:]'  # 标点符号
```

### 9.3 实际应用价值


**🎯 典型使用场景**
- **数据清理**：去除多余空格、统一分隔符
- **格式转换**：大小写转换、字符替换
- **文本规范化**：文件名标准化、用户输入处理  
- **日志处理**：提取关键信息、格式标准化
- **批量处理**：配合脚本进行文件批处理

### 9.4 学习检查清单


**📝 掌握程度自测**
- [ ] 能解释tr命令的基本工作原理
- [ ] 熟练使用字符范围和字符类
- [ ] 掌握-d、-s、-c选项的用法
- [ ] 能在管道中合理使用tr
- [ ] 会处理常见的转义字符
- [ ] 能应用于实际文本处理任务

### 9.5 常见误区警示


**⚠️ 避免的错误理解**
```
❌ 误区1：认为tr可以处理单词或字符串
   ✅ 正确：tr只能处理单个字符

❌ 误区2：认为tr可以直接处理文件
   ✅ 正确：tr只能处理标准输入，需要配合管道

❌ 误区3：字符集长度必须相等
   ✅ 正确：不等长时有特定处理规则

❌ 误区4：-s选项会删除字符
   ✅ 正确：-s只压缩重复字符，不删除
```

### 9.6 最佳实践建议


**💡 实用技巧**
```bash
# 优先使用字符类而不是字符范围
tr '[:lower:]' '[:upper:]'  # 好于 tr 'a-z' 'A-Z'

# 复杂处理分步进行，便于调试
cat file | tr -d '[:punct:]' | tr -s ' ' | tr '[:lower:]' '[:upper:]'

# 使用引号避免shell解释特殊字符
tr '\t' ' '  # 而不是 tr \t ' '

# 测试时使用echo验证
echo "test string" | tr 'a-z' 'A-Z'  # 先测试再应用到文件
```

**🧠 记忆口诀**
```
tr转换字符快又好，
标准输入标准出。
替换删除加压缩，
管道配合效果优。
字符范围要会用，
转义字符别忘记。
```

**核心理解**：tr是Linux文本处理工具箱中的瑞士军刀，虽然只做字符级转换，但配合管道能解决大量实际问题。掌握好字符集定义和三个主要选项(-d、-s、-c)，就能应对绝大多数文本处理需求。