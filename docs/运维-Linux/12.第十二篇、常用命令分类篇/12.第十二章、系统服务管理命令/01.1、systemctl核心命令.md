---
title: 1ã€systemctlæ ¸å¿ƒå‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [systemctlåŸºç¡€æ¦‚å¿µ](#1-systemctlåŸºç¡€æ¦‚å¿µ)
2. [æœåŠ¡æ§åˆ¶æ ¸å¿ƒå‘½ä»¤](#2-æœåŠ¡æ§åˆ¶æ ¸å¿ƒå‘½ä»¤)
3. [æœåŠ¡çŠ¶æ€æŸ¥è¯¢ç®¡ç†](#3-æœåŠ¡çŠ¶æ€æŸ¥è¯¢ç®¡ç†)
4. [å¼€æœºè‡ªå¯åŠ¨é…ç½®](#4-å¼€æœºè‡ªå¯åŠ¨é…ç½®)
5. [æœåŠ¡åˆ—è¡¨ä¸å•å…ƒç®¡ç†](#5-æœåŠ¡åˆ—è¡¨ä¸å•å…ƒç®¡ç†)
6. [é…ç½®æ–‡ä»¶æ“ä½œ](#6-é…ç½®æ–‡ä»¶æ“ä½œ)
7. [é«˜çº§ç®¡ç†åŠŸèƒ½](#7-é«˜çº§ç®¡ç†åŠŸèƒ½)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ systemctlåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯systemctl


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
systemctlæ˜¯Linuxç³»ç»Ÿä¸­ç”¨æ¥ç®¡ç†systemdæœåŠ¡çš„æ ¸å¿ƒå‘½ä»¤å·¥å…·ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª**ç³»ç»ŸæœåŠ¡çš„æ€»ç®¡**ï¼Œè´Ÿè´£å¯åŠ¨ã€åœæ­¢ã€æŸ¥çœ‹å„ç§ç³»ç»ŸæœåŠ¡çš„çŠ¶æ€ã€‚

> **ç”Ÿæ´»åŒ–ç†è§£**ï¼šå°±åƒä½ å®¶çš„æ€»ç”µé—¸æ§åˆ¶ç€å„ä¸ªæˆ¿é—´çš„ç”µå™¨ä¸€æ ·ï¼Œsystemctlæ§åˆ¶ç€Linuxç³»ç»Ÿé‡Œå„ç§æœåŠ¡ç¨‹åºçš„è¿è¡Œã€‚

### 1.2 systemdæœåŠ¡ä½“ç³»æ¶æ„


```
Linuxç³»ç»ŸæœåŠ¡ç®¡ç†ä½“ç³»ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·å±‚                             â”‚
â”‚              systemctlå‘½ä»¤                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 systemdæ ¸å¿ƒ                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   æœåŠ¡ç®¡ç†   â”‚   å®šæ—¶ä»»åŠ¡   â”‚    æŒ‚è½½ç‚¹ç®¡ç†       â”‚ â”‚
â”‚  â”‚ (*.service) â”‚  (*.timer)  â”‚   (*.mount)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                å®é™…æœåŠ¡è¿›ç¨‹                           â”‚
â”‚     nginx    mysql    ssh    firewall...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æœåŠ¡å•å…ƒ(Unit)æ¦‚å¿µ


**ğŸ’¡ ä»€ä¹ˆæ˜¯Unit**
åœ¨systemdä¸­ï¼Œæ‰€æœ‰è¢«ç®¡ç†çš„èµ„æºéƒ½å«åš"å•å…ƒ"(Unit)ã€‚æœåŠ¡åªæ˜¯å…¶ä¸­ä¸€ç§ç±»å‹ï¼š

| **å•å…ƒç±»å‹** | **æ–‡ä»¶åç¼€** | **ä½œç”¨è¯´æ˜** | **å¸¸è§ä¾‹å­** |
|-------------|-------------|-------------|-------------|
| **Service** | `.service` | `ç³»ç»ŸæœåŠ¡ç¨‹åº` | `nginx.service`ã€`mysql.service` |
| **Timer** | `.timer` | `å®šæ—¶ä»»åŠ¡` | `backup.timer` |
| **Mount** | `.mount` | `æ–‡ä»¶ç³»ç»ŸæŒ‚è½½` | `home.mount` |
| **Socket** | `.socket` | `å¥—æ¥å­—ç›‘å¬` | `docker.socket` |
| **Target** | `.target` | `è¿è¡Œçº§åˆ«` | `multi-user.target` |

---

## 2. âš¡ æœåŠ¡æ§åˆ¶æ ¸å¿ƒå‘½ä»¤


### 2.1 åŸºæœ¬æœåŠ¡æ§åˆ¶æ“ä½œ


**ğŸš€ å¯åŠ¨æœåŠ¡ - start**
```bash
# å¯åŠ¨ä¸€ä¸ªæœåŠ¡
systemctl start nginx

# ç­‰ä»·äºä¼ ç»Ÿçš„ service nginx start
# å¯åŠ¨åæœåŠ¡ç«‹å³å¼€å§‹è¿è¡Œ
```

> **ç†è§£è¦ç‚¹**ï¼šstartå‘½ä»¤åªæ˜¯**ä¸´æ—¶å¯åŠ¨**æœåŠ¡ï¼Œé‡å¯åä¸ä¼šè‡ªåŠ¨è¿è¡Œï¼Œéœ€è¦é…åˆenableå‘½ä»¤è®¾ç½®å¼€æœºå¯åŠ¨ã€‚

**ğŸ›‘ åœæ­¢æœåŠ¡ - stop**
```bash
# åœæ­¢è¿è¡Œä¸­çš„æœåŠ¡
systemctl stop nginx

# æœåŠ¡ä¼šä¼˜é›…å…³é—­ï¼Œä¿å­˜å½“å‰çŠ¶æ€åé€€å‡º
```

**ğŸ”„ é‡å¯æœåŠ¡ - restart**
```bash
# å®Œå…¨é‡å¯æœåŠ¡ï¼ˆå…ˆåœæ­¢å†å¯åŠ¨ï¼‰
systemctl restart nginx

# é€‚ç”¨åœºæ™¯ï¼šé…ç½®æ–‡ä»¶ä¿®æ”¹åç”Ÿæ•ˆ
```

**ğŸ“ é‡è½½é…ç½® - reload**
```bash
# é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œä¸é‡å¯æœåŠ¡è¿›ç¨‹
systemctl reload nginx

# åªæœ‰æ”¯æŒçƒ­é‡è½½çš„æœåŠ¡æ‰èƒ½ä½¿ç”¨
# æ¯”restartæ›´å¹³æ»‘ï¼Œä¸ä¼šä¸­æ–­ç°æœ‰è¿æ¥
```

### 2.2 æœåŠ¡æ§åˆ¶å‘½ä»¤å¯¹æ¯”


| **å‘½ä»¤** | **æ“ä½œæ•ˆæœ** | **æ˜¯å¦ä¸­æ–­æœåŠ¡** | **é€‚ç”¨åœºæ™¯** |
|---------|-------------|-----------------|-------------|
| **start** | `å¯åŠ¨æœåŠ¡` | `N/A` | `æœåŠ¡æœªè¿è¡Œæ—¶` |
| **stop** | `åœæ­¢æœåŠ¡` | `æ˜¯` | `ç»´æŠ¤ã€è°ƒè¯•æ—¶` |
| **restart** | `é‡å¯æœåŠ¡` | `æ˜¯` | `é…ç½®æ›´æ”¹å` |
| **reload** | `é‡è½½é…ç½®` | `å¦` | `é…ç½®å¾®è°ƒæ—¶` |

### 2.3 æœåŠ¡æ§åˆ¶å®æˆ˜ç¤ºä¾‹


**ğŸŒ WebæœåŠ¡ç®¡ç†å®ä¾‹**
```bash
# åœºæ™¯1ï¼šé¦–æ¬¡éƒ¨ç½²ç½‘ç«™
systemctl start nginx          # å¯åŠ¨webæœåŠ¡
systemctl enable nginx         # è®¾ç½®å¼€æœºå¯åŠ¨

# åœºæ™¯2ï¼šæ›´æ–°ç½‘ç«™é…ç½®å
systemctl reload nginx         # é‡è½½é…ç½®ï¼Œä¸ä¸­æ–­è®¿é—®

# åœºæ™¯3ï¼šæœåŠ¡å‡ºç°é—®é¢˜éœ€è¦é‡å¯
systemctl restart nginx        # å®Œå…¨é‡å¯è§£å†³é—®é¢˜

# åœºæ™¯4ï¼šä¸´æ—¶ç»´æŠ¤ç½‘ç«™
systemctl stop nginx           # åœæ­¢æœåŠ¡è¿›è¡Œç»´æŠ¤
```

---

## 3. ğŸ“Š æœåŠ¡çŠ¶æ€æŸ¥è¯¢ç®¡ç†


### 3.1 è¯¦ç»†çŠ¶æ€æŸ¥çœ‹ - status


**ğŸ” æŸ¥çœ‹æœåŠ¡è¯¦ç»†çŠ¶æ€**
```bash
# æŸ¥çœ‹æœåŠ¡å®Œæ•´çŠ¶æ€ä¿¡æ¯
systemctl status nginx
```

**çŠ¶æ€ä¿¡æ¯è§£è¯»**ï¼š
```
â— nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)
   Active: active (running) since Mon 2025-01-19 10:30:15 CST; 2h 15min ago
     Docs: man:nginx(8)
 Main PID: 1234 (nginx)
    Tasks: 2 (limit: 4915)
   Memory: 2.4M
   CGroup: /system.slice/nginx.service
           â”œâ”€1234 nginx: master process /usr/sbin/nginx
           â””â”€1235 nginx: worker process

Jan 19 10:30:15 server01 systemd[1]: Starting The nginx HTTP and reverse proxy server...
Jan 19 10:30:15 server01 systemd[1]: Started The nginx HTTP and reverse proxy server.
```

**ğŸ”¸ çŠ¶æ€å­—æ®µå«ä¹‰è§£æ**ï¼š

| **å­—æ®µ** | **å«ä¹‰** | **é‡è¦ç¨‹åº¦** |
|---------|---------|-------------|
| **Loaded** | `é…ç½®æ–‡ä»¶åŠ è½½çŠ¶æ€å’Œå¼€æœºå¯åŠ¨è®¾ç½®` | â­â­â­ |
| **Active** | `å½“å‰è¿è¡ŒçŠ¶æ€å’Œå¯åŠ¨æ—¶é—´` | â­â­â­ |
| **Main PID** | `ä¸»è¿›ç¨‹IDå·` | â­â­ |
| **Tasks** | `è¿›ç¨‹çº¿ç¨‹æ•°é‡` | â­ |
| **Memory** | `å†…å­˜ä½¿ç”¨æƒ…å†µ` | â­â­ |

### 3.2 å¿«é€ŸçŠ¶æ€æ£€æŸ¥å‘½ä»¤


**âš¡ æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ - is-active**
```bash
# å¿«é€Ÿæ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ
systemctl is-active nginx
# è¿”å›ï¼šactiveï¼ˆè¿è¡Œä¸­ï¼‰æˆ– inactiveï¼ˆå·²åœæ­¢ï¼‰

# æ‰¹é‡æ£€æŸ¥å¤šä¸ªæœåŠ¡
systemctl is-active nginx mysql ssh
```

**ğŸ”§ æ£€æŸ¥å¼€æœºå¯åŠ¨çŠ¶æ€ - is-enabled**
```bash
# æŸ¥çœ‹æœåŠ¡æ˜¯å¦è®¾ç½®äº†å¼€æœºå¯åŠ¨
systemctl is-enabled nginx
# è¿”å›ï¼šenabledï¼ˆå·²å¯ç”¨ï¼‰ã€disabledï¼ˆæœªå¯ç”¨ï¼‰æˆ– staticï¼ˆé™æ€ï¼‰

# æ£€æŸ¥å¤šä¸ªæœåŠ¡çš„å¼€æœºå¯åŠ¨çŠ¶æ€
systemctl is-enabled nginx mysql ssh
```

### 3.3 æœåŠ¡çŠ¶æ€ç»„åˆæŸ¥è¯¢


**ğŸ“‹ å¸¸ç”¨çŠ¶æ€æŸ¥è¯¢ç»„åˆ**
```bash
# æŸ¥çœ‹æ‰€æœ‰å¤±è´¥çš„æœåŠ¡
systemctl --failed

# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰æœåŠ¡
systemctl list-units --type=service --state=running

# ä¸€é”®æŸ¥çœ‹å…³é”®æœåŠ¡çŠ¶æ€
systemctl status nginx mysql ssh firewalld
```

---

## 4. ğŸš€ å¼€æœºè‡ªå¯åŠ¨é…ç½®


### 4.1 å¼€æœºå¯åŠ¨ç®¡ç†æ ¸å¿ƒ


**âœ… å¯ç”¨å¼€æœºè‡ªå¯åŠ¨ - enable**
```bash
# è®¾ç½®æœåŠ¡å¼€æœºè‡ªåŠ¨å¯åŠ¨
systemctl enable nginx

# åŒæ—¶å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl enable --now nginx
```

> **é‡è¦ç†è§£**ï¼šenableåªæ˜¯è®¾ç½®å¼€æœºå¯åŠ¨ï¼Œ**ä¸ä¼šç«‹å³å¯åŠ¨æœåŠ¡**ã€‚è¦ç«‹å³å¯åŠ¨éœ€è¦ç”¨startå‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨`--now`å‚æ•°ã€‚

**âŒ ç¦ç”¨å¼€æœºå¯åŠ¨ - disable**
```bash
# å–æ¶ˆæœåŠ¡çš„å¼€æœºå¯åŠ¨
systemctl disable nginx

# åŒæ—¶åœæ­¢æœåŠ¡å¹¶ç¦ç”¨å¼€æœºå¯åŠ¨
systemctl disable --now nginx
```

### 4.2 å¼€æœºå¯åŠ¨åŸç†è¯´æ˜


```
å¼€æœºå¯åŠ¨å·¥ä½œæµç¨‹ï¼š

ç³»ç»Ÿå¯åŠ¨
    â†“
systemdè¯»å– /etc/systemd/system/ ç›®å½•
    â†“
æ£€æŸ¥æœåŠ¡çš„ .service æ–‡ä»¶
    â†“
æŒ‰ä¾èµ–å…³ç³»å¯åŠ¨å·²å¯ç”¨çš„æœåŠ¡
    â†“
ç³»ç»Ÿå®Œå…¨å¯åŠ¨
```

**ğŸ“ å¼€æœºå¯åŠ¨æ–‡ä»¶ä½ç½®**ï¼š
- **ç³»ç»ŸæœåŠ¡é…ç½®**ï¼š`/usr/lib/systemd/system/`
- **è‡ªå®šä¹‰å¯åŠ¨é…ç½®**ï¼š`/etc/systemd/system/`
- **è¿è¡Œæ—¶é…ç½®**ï¼š`/run/systemd/system/`

### 4.3 å¼€æœºå¯åŠ¨å®ç”¨åœºæ™¯


**ğŸ¯ WebæœåŠ¡å™¨å¼€æœºå¯åŠ¨é…ç½®**
```bash
# å®Œæ•´çš„WebæœåŠ¡å™¨å¼€æœºé…ç½®æµç¨‹
systemctl enable nginx          # WebæœåŠ¡å™¨
systemctl enable mysql          # æ•°æ®åº“  
systemctl enable php-fpm        # PHPå¤„ç†å™¨
systemctl enable firewalld      # é˜²ç«å¢™

# éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸ
systemctl is-enabled nginx mysql php-fpm firewalld
```

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
- enable/disableæ“ä½œ**ä¸å½±å“**æœåŠ¡çš„å½“å‰è¿è¡ŒçŠ¶æ€
- åªæœ‰åœ¨ä¸‹æ¬¡é‡å¯åï¼Œenable/disableçš„è®¾ç½®æ‰ä¼šç”Ÿæ•ˆ
- å¯ä»¥ä½¿ç”¨`--now`å‚æ•°åŒæ—¶æ“ä½œå½“å‰çŠ¶æ€å’Œå¼€æœºå¯åŠ¨

---

## 5. ğŸ“‹ æœåŠ¡åˆ—è¡¨ä¸å•å…ƒç®¡ç†


### 5.1 æœåŠ¡åˆ—è¡¨æŸ¥çœ‹ - list-units


**ğŸ“Š æŸ¥çœ‹æ‰€æœ‰æœåŠ¡å•å…ƒ**
```bash
# æŸ¥çœ‹æ‰€æœ‰å·²åŠ è½½çš„å•å…ƒ
systemctl list-units

# åªæŸ¥çœ‹æœåŠ¡ç±»å‹çš„å•å…ƒ
systemctl list-units --type=service

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬æœªè¿è¡Œçš„ï¼‰
systemctl list-units --type=service --all
```

**ğŸ” æŒ‰çŠ¶æ€ç­›é€‰æœåŠ¡**
```bash
# æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æœåŠ¡
systemctl list-units --type=service --state=running

# æŸ¥çœ‹å¤±è´¥çš„æœåŠ¡
systemctl list-units --type=service --state=failed

# æŸ¥çœ‹å·²åœæ­¢çš„æœåŠ¡
systemctl list-units --type=service --state=dead
```

### 5.2 å·²å®‰è£…æœåŠ¡æŸ¥çœ‹ - list-unit-files


**ğŸ“¦ æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æœåŠ¡**
```bash
# æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰çš„æœåŠ¡å•å…ƒæ–‡ä»¶
systemctl list-unit-files --type=service

# åªæŸ¥çœ‹å·²å¯ç”¨å¼€æœºå¯åŠ¨çš„æœåŠ¡
systemctl list-unit-files --type=service --state=enabled

# åªæŸ¥çœ‹è¢«ç¦ç”¨çš„æœåŠ¡
systemctl list-unit-files --type=service --state=disabled
```

### 5.3 æœåŠ¡ä¿¡æ¯è¿‡æ»¤ä¸æœç´¢


**ğŸ” å®ç”¨çš„æœåŠ¡æŸ¥æ‰¾æŠ€å·§**
```bash
# æŸ¥æ‰¾åŒ…å«å…³é”®å­—çš„æœåŠ¡
systemctl list-units --type=service | grep nginx

# æŸ¥çœ‹ä¸ç½‘ç»œç›¸å…³çš„æœåŠ¡
systemctl list-units --type=service | grep -i network

# æŸ¥çœ‹ä¸æ•°æ®åº“ç›¸å…³çš„æœåŠ¡  
systemctl list-units --type=service | grep -E "(mysql|postgres|mongo)"
```

**ğŸ“‹ æœåŠ¡çŠ¶æ€é€ŸæŸ¥è¡¨**

| **çŠ¶æ€** | **å«ä¹‰** | **å¯¹åº”æ“ä½œ** |
|---------|---------|-------------|
| **active (running)** | `æ­£åœ¨è¿è¡Œ` | `æ­£å¸¸çŠ¶æ€` |
| **active (exited)** | `å·²å®Œæˆä¸€æ¬¡æ€§ä»»åŠ¡` | `æ­£å¸¸çŠ¶æ€` |
| **inactive (dead)** | `å·²åœæ­¢` | `å¯ä»¥å¯åŠ¨` |
| **failed** | `å¯åŠ¨å¤±è´¥` | `éœ€è¦æ£€æŸ¥æ—¥å¿—` |
| **enabled** | `å¼€æœºå¯åŠ¨å·²å¯ç”¨` | `é‡å¯åè‡ªåŠ¨è¿è¡Œ` |
| **disabled** | `å¼€æœºå¯åŠ¨å·²ç¦ç”¨` | `é‡å¯åä¸ä¼šè¿è¡Œ` |

---

## 6. ğŸ“ é…ç½®æ–‡ä»¶æ“ä½œ


### 6.1 æŸ¥çœ‹æœåŠ¡é…ç½® - cat


**ğŸ“– æŸ¥çœ‹æœåŠ¡é…ç½®æ–‡ä»¶å†…å®¹**
```bash
# æŸ¥çœ‹æœåŠ¡çš„å®Œæ•´é…ç½®å†…å®¹
systemctl cat nginx

# æŸ¥çœ‹æœåŠ¡é…ç½®æ–‡ä»¶çš„è·¯å¾„å’Œå†…å®¹
systemctl cat ssh
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹è§£è¯»**ï¼š
```ini
[Unit]
Description=The nginx HTTP and reverse proxy server
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
PIDFile=/run/nginx.pid
ExecStartPre=/usr/sbin/nginx -t
ExecStart=/usr/sbin/nginx
ExecReload=/bin/kill -s HUP $MAINPID
KillSignal=SIGQUIT
TimeoutStopSec=5
KillMode=mixed

[Install]
WantedBy=multi-user.target
```

**ğŸ”¸ é…ç½®æ®µè½å«ä¹‰**ï¼š
- **[Unit]**ï¼šæœåŠ¡åŸºæœ¬ä¿¡æ¯å’Œä¾èµ–å…³ç³»
- **[Service]**ï¼šæœåŠ¡å¯åŠ¨æ–¹å¼å’Œè¿è¡Œå‚æ•°  
- **[Install]**ï¼šå¼€æœºå¯åŠ¨æ—¶çš„ç›®æ ‡çº§åˆ«

### 6.2 ç¼–è¾‘æœåŠ¡é…ç½® - edit


**âœï¸ å®‰å…¨ç¼–è¾‘æœåŠ¡é…ç½®**
```bash
# åˆ›å»ºæœåŠ¡é…ç½®çš„è¦†ç›–æ–‡ä»¶
systemctl edit nginx

# ç¼–è¾‘æœåŠ¡çš„å®Œæ•´é…ç½®æ–‡ä»¶ï¼ˆä¸æ¨èï¼‰
systemctl edit --full nginx
```

> **é‡è¦è¯´æ˜**ï¼š`systemctl edit`ä¼šåˆ›å»ºä¸€ä¸ªè¦†ç›–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸå§‹é…ç½®ã€‚è¿™æ ·å¯ä»¥ä¿æŠ¤åŸå§‹é…ç½®ä¸è¢«æ„å¤–ç ´åã€‚

**ğŸ“ é…ç½®æ–‡ä»¶è¦†ç›–æœºåˆ¶**ï¼š
```
é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

/etc/systemd/system/nginx.service.d/override.conf  â† editå‘½ä»¤åˆ›å»º
/etc/systemd/system/nginx.service                  â† è‡ªå®šä¹‰é…ç½®
/usr/lib/systemd/system/nginx.service              â† ç³»ç»Ÿé»˜è®¤é…ç½®
```

### 6.3 é…ç½®é‡è½½ - daemon-reload


**ğŸ”„ é‡æ–°åŠ è½½systemdé…ç½®**
```bash
# é‡æ–°æ‰«ææ‰€æœ‰æœåŠ¡é…ç½®æ–‡ä»¶
systemctl daemon-reload

# ä¿®æ”¹äº†.serviceæ–‡ä»¶åå¿…é¡»æ‰§è¡Œæ­¤å‘½ä»¤
```

> **ä½¿ç”¨åœºæ™¯**ï¼šæ¯å½“ä½ ä¿®æ”¹äº†ä»»ä½•`.service`é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…å®‰è£…äº†æ–°çš„æœåŠ¡åï¼Œéƒ½éœ€è¦æ‰§è¡Œè¿™ä¸ªå‘½ä»¤è®©systemdé‡æ–°è¯»å–é…ç½®ã€‚

**âš¡ é…ç½®ä¿®æ”¹å®Œæ•´æµç¨‹**
```bash
# 1. ç¼–è¾‘æœåŠ¡é…ç½®
systemctl edit nginx

# 2. é‡è½½systemdé…ç½®
systemctl daemon-reload

# 3. é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ
systemctl restart nginx

# 4. éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®
systemctl status nginx
```

---

## 7. ğŸ”’ é«˜çº§ç®¡ç†åŠŸèƒ½


### 7.1 æœåŠ¡å±è”½ç®¡ç† - mask/unmask


**ğŸš« å±è”½æœåŠ¡ - mask**
```bash
# å®Œå…¨å±è”½ä¸€ä¸ªæœåŠ¡ï¼Œæ— æ³•è¢«å¯åŠ¨
systemctl mask firewalld

# å±è”½åå³ä½¿æ‰§è¡Œstartå‘½ä»¤ä¹Ÿæ— æ³•å¯åŠ¨
```

> **å±è”½çš„ä½œç”¨**ï¼šmaskç›¸å½“äºç»™æœåŠ¡ä¸Šäº†ä¸€æŠŠ"å®‰å…¨é”"ï¼Œå®Œå…¨é˜»æ­¢æœåŠ¡å¯åŠ¨ã€‚è¿™æ¯”disableæ›´å¼ºï¼Œdisableåªæ˜¯ä¸å¼€æœºå¯åŠ¨ï¼Œä½†è¿˜å¯ä»¥æ‰‹åŠ¨å¯åŠ¨ã€‚

**âœ… è§£é™¤å±è”½ - unmask**
```bash
# è§£é™¤æœåŠ¡çš„å±è”½çŠ¶æ€
systemctl unmask firewalld

# è§£é™¤åæœåŠ¡å¯ä»¥æ­£å¸¸å¯åŠ¨å’Œç®¡ç†
```

### 7.2 è¿è¡Œçº§åˆ«åˆ‡æ¢ - isolate


**ğŸ¯ åˆ‡æ¢ç³»ç»Ÿè¿è¡Œçº§åˆ«**
```bash
# åˆ‡æ¢åˆ°å¤šç”¨æˆ·æ¨¡å¼ï¼ˆç›¸å½“äºè¿è¡Œçº§åˆ«3ï¼‰
systemctl isolate multi-user.target

# åˆ‡æ¢åˆ°å›¾å½¢ç•Œé¢æ¨¡å¼ï¼ˆç›¸å½“äºè¿è¡Œçº§åˆ«5ï¼‰  
systemctl isolate graphical.target

# åˆ‡æ¢åˆ°æ•‘æ´æ¨¡å¼
systemctl isolate rescue.target
```

**ğŸ“Š å¸¸ç”¨è¿è¡Œçº§åˆ«å¯¹ç…§è¡¨**

| **systemd Target** | **ä¼ ç»Ÿè¿è¡Œçº§åˆ«** | **è¯´æ˜** |
|-------------------|----------------|---------|
| **poweroff.target** | `0` | `å…³æœº` |
| **rescue.target** | `1` | `å•ç”¨æˆ·æ•‘æ´æ¨¡å¼` |
| **multi-user.target** | `3` | `å¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼` |
| **graphical.target** | `5` | `å›¾å½¢ç•Œé¢æ¨¡å¼` |
| **reboot.target** | `6` | `é‡å¯` |

### 7.3 æœåŠ¡ä¾èµ–å…³ç³»åˆ†æ


**ğŸ”— æŸ¥çœ‹æœåŠ¡ä¾èµ–**
```bash
# æŸ¥çœ‹æœåŠ¡çš„ä¾èµ–å…³ç³»
systemctl list-dependencies nginx

# æŸ¥çœ‹åå‘ä¾èµ–ï¼ˆè°ä¾èµ–è¿™ä¸ªæœåŠ¡ï¼‰
systemctl list-dependencies --reverse nginx
```

**ğŸŒ³ ä¾èµ–å…³ç³»æ ‘çŠ¶å›¾ç¤ºä¾‹**
```
nginx.service
â”œâ”€system.slice
â””â”€basic.target
  â”œâ”€microcode.service
  â”œâ”€rhel-dmesg.service
  â”œâ”€selinux-policy-migrate-local-changes@targeted.service
  â”œâ”€paths.target
  â”œâ”€slices.target
  â”œâ”€sockets.target
  â”œâ”€sysinit.target
  â””â”€timers.target
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒå‘½ä»¤


```
ğŸ”¸ æœåŠ¡æ§åˆ¶ï¼šstart/stop/restart/reload - æœåŠ¡è¿è¡ŒçŠ¶æ€ç®¡ç†
ğŸ”¸ çŠ¶æ€æŸ¥è¯¢ï¼šstatus/is-active/is-enabled - å¿«é€Ÿäº†è§£æœåŠ¡çŠ¶å†µ  
ğŸ”¸ å¼€æœºå¯åŠ¨ï¼šenable/disable - ç³»ç»Ÿé‡å¯åçš„æœåŠ¡ç®¡ç†
ğŸ”¸ æœåŠ¡åˆ—è¡¨ï¼šlist-units - æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰æœåŠ¡çŠ¶æ€
ğŸ”¸ é…ç½®ç®¡ç†ï¼šcat/edit/daemon-reload - æœåŠ¡é…ç½®æ–‡ä»¶æ“ä½œ
ğŸ”¸ é«˜çº§åŠŸèƒ½ï¼šmask/unmask/isolate - ç‰¹æ®Šåœºæ™¯çš„æœåŠ¡æ§åˆ¶
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ systemctl vs ä¼ ç»Ÿserviceå‘½ä»¤**
```
ä¼ ç»Ÿæ–¹å¼ï¼šservice nginx start
ç°ä»£æ–¹å¼ï¼šsystemctl start nginx

ä¼˜åŠ¿ï¼šæ›´å¼ºå¤§çš„åŠŸèƒ½ã€ç»Ÿä¸€çš„ç®¡ç†æ¥å£ã€æ›´å¥½çš„ä¾èµ–ç®¡ç†
```

**ğŸ”¹ æœåŠ¡çŠ¶æ€çš„ä¸¤ä¸ªç»´åº¦**
```
è¿è¡ŒçŠ¶æ€ï¼šactive/inactive - å½“å‰æ˜¯å¦åœ¨è¿è¡Œ
å¯åŠ¨çŠ¶æ€ï¼šenabled/disabled - å¼€æœºæ˜¯å¦è‡ªåŠ¨å¯åŠ¨

è¿™ä¸¤ä¸ªçŠ¶æ€æ˜¯ç‹¬ç«‹çš„ï¼Œéœ€è¦åˆ†åˆ«ç®¡ç†ï¼
```

**ğŸ”¹ é…ç½®ä¿®æ”¹çš„æ ‡å‡†æµç¨‹**
```
ç¼–è¾‘é…ç½® â†’ daemon-reload â†’ é‡å¯æœåŠ¡ â†’ éªŒè¯çŠ¶æ€
ç¼ºå°‘ä»»ä½•ä¸€æ­¥éƒ½å¯èƒ½å¯¼è‡´é…ç½®ä¸ç”Ÿæ•ˆ
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ è¿ç»´ç®¡ç†åœºæ™¯**
- **æœåŠ¡éƒ¨ç½²**ï¼šæ–°æœåŠ¡å®‰è£…åçš„å¯åŠ¨å’Œå¼€æœºé…ç½®
- **æ•…éšœå¤„ç†**ï¼šæœåŠ¡å¼‚å¸¸æ—¶çš„é‡å¯å’ŒçŠ¶æ€æ£€æŸ¥
- **ç³»ç»Ÿç»´æŠ¤**ï¼šæ‰¹é‡ç®¡ç†å¤šä¸ªæœåŠ¡çš„å¯åœ
- **å®‰å…¨åŠ å›º**ï¼šé€šè¿‡maskå±è”½ä¸éœ€è¦çš„æœåŠ¡

**ğŸ¯ æ—¥å¸¸æ“ä½œæŠ€å·§**
- **ç»„åˆæŸ¥è¯¢**ï¼šä½¿ç”¨ç®¡é“å’Œgrepå¿«é€Ÿæ‰¾åˆ°ç›®æ ‡æœåŠ¡
- **æ‰¹é‡æ“ä½œ**ï¼šä¸€æ¬¡æ€§æ“ä½œå¤šä¸ªç›¸å…³æœåŠ¡
- **çŠ¶æ€ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥å…³é”®æœåŠ¡çš„è¿è¡ŒçŠ¶å†µ
- **é…ç½®å¤‡ä»½**ï¼šä¿®æ”¹é…ç½®å‰å…ˆå¤‡ä»½åŸå§‹æ–‡ä»¶

### 8.4 å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹


**âš ï¸ æ–°æ‰‹å¸¸è§é”™è¯¯**
```
åªenableä¸startï¼šæœåŠ¡ä¸ä¼šç«‹å³è¿è¡Œ
é…ç½®ä¿®æ”¹åå¿˜è®°daemon-reloadï¼šæ–°é…ç½®ä¸ç”Ÿæ•ˆ
æ··æ·†è¿è¡ŒçŠ¶æ€å’Œå¯åŠ¨çŠ¶æ€ï¼šé‡å¯åæœåŠ¡æ¶ˆå¤±
ç›´æ¥ç¼–è¾‘ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼šå‡çº§åé…ç½®ä¸¢å¤±
```

**ğŸ’¡ æœ€ä½³å®è·µå»ºè®®**
```
ä½¿ç”¨--nowå‚æ•°åŒæ—¶æ“ä½œè¿è¡ŒçŠ¶æ€å’Œå¯åŠ¨çŠ¶æ€
ä¼˜å…ˆä½¿ç”¨systemctl editè€Œä¸æ˜¯ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶
é‡è¦æ“ä½œå‰å…ˆæŸ¥çœ‹æœåŠ¡çŠ¶æ€
å®šæœŸæ£€æŸ¥failedçŠ¶æ€çš„æœåŠ¡
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
systemctlç®¡æœåŠ¡ï¼Œstart stopæ¥æ§åˆ¶
statusæŸ¥çŠ¶æ€ï¼Œenableå¼€æœºå¯
list-unitsçœ‹åˆ—è¡¨ï¼Œeditæ”¹é…ç½®
daemon-reloadé‡è½½ï¼Œmaskæ¥å±è”½
è¿è¡Œå¯åŠ¨ä¸¤çŠ¶æ€ï¼Œåˆ‡è®°è¦åˆ†ç¦»
```