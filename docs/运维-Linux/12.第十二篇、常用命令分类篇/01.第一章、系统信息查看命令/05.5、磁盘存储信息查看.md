---
title: 5、磁盘存储信息查看
---
## 📚 目录

1. [磁盘空间使用情况查看](#1-磁盘空间使用情况查看)
2. [目录占用空间统计](#2-目录占用空间统计)
3. [块设备信息查看](#3-块设备信息查看)
4. [磁盘分区信息管理](#4-磁盘分区信息管理)
5. [块设备标识符查看](#5-块设备标识符查看)
6. [分区表查看与管理](#6-分区表查看与管理)
7. [系统分区信息文件](#7-系统分区信息文件)
8. [挂载点信息查看](#8-挂载点信息查看)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 💾 磁盘空间使用情况查看


### 1.1 df命令基本概念


**🔸 什么是df命令？**
`df`（disk free）是Linux系统中最常用的磁盘空间查看命令，就像查看你手机存储空间一样简单直观。

```
通俗理解：
df = 磁盘剩余空间查看器
作用：告诉你每个磁盘分区用了多少空间，还剩多少空间
```

### 1.2 df命令基本用法


**⚡ 常用参数详解**

| 参数 | **含义** | **实际作用** | **使用场景** |
|------|---------|-------------|-------------|
| `-h` | human-readable | `以人类易读的格式显示（KB、MB、GB）` | `日常使用必备` |
| `-T` | file system type | `显示文件系统类型（ext4、xfs等）` | `了解分区格式` |
| `-i` | inodes | `显示inode使用情况` | `文件数量限制检查` |
| `-a` | all | `显示所有文件系统（包括虚拟的）` | `完整系统查看` |

**💡 基本使用示例**
```bash
# 最常用：以人类易读格式查看
df -h

# 显示文件系统类型
df -hT

# 查看某个具体目录所在分区
df -h /home
```

### 1.3 df输出信息解读


**📊 输出结果详解**
```
文件系统        容量  已用  可用 已用% 挂载点
/dev/sda1      20G   15G  4.2G   79% /
/dev/sda2     100G   45G   50G   48% /home
tmpfs         2.0G     0  2.0G    0% /dev/shm
```

**🔍 各字段含义**
- **文件系统**：实际的存储设备（如/dev/sda1）
- **容量**：分区总大小
- **已用**：已经使用的空间
- **可用**：还能使用的空间
- **已用%**：使用百分比（超过80%需要注意）
- **挂载点**：这个分区在系统中的位置

### 1.4 实用技巧与注意事项


**⚠️ 重要提醒**
- 当使用率超过**80%**时要开始清理空间
- 使用率达到**95%**以上系统可能出现问题
- **tmpfs**是内存文件系统，重启后数据消失

**🎯 实用技巧**
```bash
# 只看根分区使用情况
df -h /

# 排除虚拟文件系统，只看实际磁盘
df -hT -x tmpfs -x devtmpfs

# 按使用率排序（需要配合其他命令）
df -h | sort -k5 -nr
```

---

## 2. 📁 目录占用空间统计


### 2.1 du命令基本概念


**🔸 什么是du命令？**
`du`（disk usage）专门用来查看目录和文件的磁盘占用情况，就像查看手机里每个APP占用多少存储空间。

```
df vs du 的区别：
df → 查看整个磁盘分区的使用情况（宏观视角）
du → 查看具体目录文件的占用情况（微观视角）

比喻：
df = 看整个仓库的使用情况
du = 看仓库里每个箱子占了多少地方
```

### 2.2 du命令常用参数


**⚡ 核心参数详解**

| 参数 | **功能说明** | **实际效果** | **使用场景** |
|------|-------------|-------------|-------------|
| `-h` | 人类可读格式 | `显示KB、MB、GB单位` | `日常必用` |
| `-s` | 只显示总计 | `不显示子目录详情，只要总数` | `快速查看目录大小` |
| `-a` | 显示所有文件 | `不仅显示目录，还显示文件` | `详细分析空间占用` |
| `-d N` | 限制显示层级 | `只显示N层深度的目录` | `避免输出太多信息` |
| `--max-depth=N` | 同-d，限制深度 | `控制显示的目录层级` | `RHEL系统常用` |

### 2.3 du实用命令组合


**🔧 常用命令组合**

**查看当前目录各子目录大小**
```bash
# 显示当前目录下所有文件夹的大小，按大小排序
du -h --max-depth=1 | sort -hr

# 只看当前目录总大小
du -sh
```

**查找占用空间最大的目录**
```bash
# 查看/var目录下各子目录大小
du -h /var --max-depth=1

# 找出最占空间的前10个目录
du -h /home | sort -hr | head -10
```

**查看指定目录的详细占用情况**
```bash
# 显示/var/log目录的详细使用情况
du -ah /var/log | sort -hr | head -20
```

### 2.4 实际应用场景


**🎯 清理磁盘空间的步骤**
```
步骤1：用df -h查看哪个分区空间不足
步骤2：用du -h找出该分区下占用空间最大的目录
步骤3：进入大目录，继续用du细分查找
步骤4：找到具体的大文件或无用目录，进行清理
```

**💡 常见大文件位置**
- `/var/log/` - 系统日志文件
- `/tmp/` - 临时文件
- `/home/用户名/` - 用户数据
- `/opt/` - 第三方软件安装目录

---

## 3. 🔍 块设备信息查看


### 3.1 lsblk命令基本概念


**🔸 什么是块设备？**
块设备就是以固定大小的数据块进行读写的存储设备，比如硬盘、U盘、光盘等。

```
通俗理解：
块设备 = 存储设备（硬盘、U盘、SSD等）
lsblk = list block devices（列出块设备）
作用：以树状结构显示所有存储设备及其分区
```

### 3.2 lsblk命令详解


**📊 基本语法与输出**
```bash
# 基本用法
lsblk
```

**典型输出格式：**
```
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda      8:0    0  100G  0 disk 
├─sda1   8:1    0   20G  0 part /
├─sda2   8:2    0   70G  0 part /home
└─sda3   8:3    0   10G  0 part [SWAP]
sr0     11:0    1 1024M  0 rom  
```

**🔍 输出字段含义**
- **NAME**: 设备名称（sda=第一块SCSI硬盘）
- **MAJ:MIN**: 主设备号:次设备号（系统内部标识）
- **RM**: 是否可移动（0=不可移动，1=可移动）
- **SIZE**: 设备/分区大小
- **RO**: 是否只读（0=可读写，1=只读）
- **TYPE**: 类型（disk=磁盘，part=分区，rom=光驱）
- **MOUNTPOINT**: 挂载点（在系统中的位置）

### 3.3 lsblk常用参数


**⚡ 实用参数组合**

| 参数 | **功能** | **输出效果** | **使用场景** |
|------|---------|-------------|-------------|
| `-f` | 显示文件系统信息 | `显示文件系统类型、UUID等` | `查看分区详细信息` |
| `-m` | 显示权限信息 | `显示设备权限` | `权限问题排查` |
| `-p` | 显示完整路径 | `显示/dev/sda1而不是sda1` | `脚本编程使用` |
| `-S` | 显示SCSI信息 | `显示SCSI设备详情` | `硬件诊断` |

**💡 实用命令示例**
```bash
# 显示文件系统类型和UUID
lsblk -f

# 显示完整设备路径
lsblk -p

# 只显示某个设备的信息
lsblk /dev/sda
```

### 3.4 设备命名规则


**📝 Linux设备命名规范**

**硬盘设备命名**
```
SATA/SCSI硬盘：  /dev/sda, /dev/sdb, /dev/sdc...
IDE硬盘：        /dev/hda, /dev/hdb, /dev/hdc...
NVMe SSD：       /dev/nvme0n1, /dev/nvme0n2...

分区命名：
/dev/sda1  → sda硬盘的第1个分区
/dev/sda2  → sda硬盘的第2个分区
```

**🎯 设备识别技巧**
- **sda**通常是系统第一块硬盘
- **sr0**通常是光驱
- **数字后缀**表示分区（sda1、sda2等）

---

## 4. 🛠️ 磁盘分区信息管理


### 4.1 fdisk命令基本概念


**🔸 什么是fdisk？**
`fdisk`是Linux系统中的磁盘分区工具，既可以查看分区信息，也可以创建、删除分区。

```
通俗理解：
fdisk = 磁盘分区管理器
作用1：查看硬盘分区情况（相当于查看房子有几个房间）
作用2：创建删除分区（相当于装修时改房间格局）
```

### 4.2 fdisk查看分区信息


**⚡ 常用查看命令**

| 命令 | **功能说明** | **输出内容** | **使用场景** |
|------|-------------|-------------|-------------|
| `fdisk -l` | 列出所有磁盘分区 | `显示所有硬盘的分区表` | `系统总览` |
| `fdisk -l /dev/sda` | 查看指定磁盘 | `只显示sda硬盘的分区` | `查看特定硬盘` |
| `fdisk /dev/sda` | 进入交互模式 | `可进行分区操作` | `分区管理` |

**📊 fdisk输出信息解读**
```bash
fdisk -l /dev/sda
```

```
Disk /dev/sda: 100 GiB, 107374182400 bytes, 209715200 sectors
Disk model: VBOX HARDDISK
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x12345678

Device     Boot Start        End    Sectors  Size Id Type
/dev/sda1  *     2048      41943     39896   20G 83 Linux
/dev/sda2       41944    188743    146800   70G 83 Linux
/dev/sda3      188744    209715199  20971456   10G 82 Linux swap
```

**🔍 关键信息说明**
- **Disk /dev/sda**: 硬盘总大小
- **Boot**: 有*号表示引导分区
- **Start/End**: 分区的起始和结束扇区
- **Size**: 分区大小
- **Type**: 分区类型（83=Linux，82=Linux swap）

### 4.3 fdisk交互模式


**🔧 交互模式常用命令**

当输入`fdisk /dev/sda`进入交互模式后：

| 命令 | **功能** | **说明** |
|------|---------|---------|
| `p` | 打印分区表 | `查看当前分区情况` |
| `n` | 新建分区 | `创建新分区` |
| `d` | 删除分区 | `删除现有分区` |
| `t` | 修改分区类型 | `更改分区文件系统类型` |
| `w` | 保存并退出 | `保存修改并退出` |
| `q` | 不保存退出 | `放弃修改并退出` |

**⚠️ 重要提醒**
- fdisk操作**需要root权限**
- 修改分区前**务必备份重要数据**
- 使用`w`命令才会真正保存修改

---

## 5. 🏷️ 块设备标识符查看


### 5.1 blkid命令基本概念


**🔸 什么是blkid？**
`blkid`（block device identifier）用来查看块设备的标识信息，每个分区都有独特的"身份证"。

```
通俗理解：
UUID = 设备的身份证号（全球唯一）
LABEL = 设备的昵称（用户自定义）
TYPE = 设备的文件系统类型

blkid就是用来查看这些"身份信息"的命令
```

### 5.2 blkid输出信息详解


**💡 基本用法**
```bash
# 查看所有设备信息
blkid

# 查看指定设备信息
blkid /dev/sda1
```

**📊 典型输出示例**
```
/dev/sda1: UUID="12345678-1234-1234-1234-123456789abc" TYPE="ext4" PARTUUID="abcdef12-01"
/dev/sda2: UUID="87654321-4321-4321-4321-cba987654321" TYPE="xfs" PARTUUID="abcdef12-02"
/dev/sda3: UUID="11111111-2222-3333-4444-555555555555" TYPE="swap" PARTUUID="abcdef12-03"
```

**🔍 字段含义解释**
- **UUID**: 通用唯一标识符（文件系统级别）
- **TYPE**: 文件系统类型（ext4、xfs、swap等）
- **PARTUUID**: 分区唯一标识符（分区级别）
- **LABEL**: 卷标签（如果设置了的话）

### 5.3 blkid的实际应用


**🎯 为什么需要UUID？**
```
设备名可能变化的情况：
- 硬盘插拔顺序改变：sda可能变成sdb
- 添加新硬盘：原来的sdb可能变成sdc
- 系统更新：设备发现顺序可能改变

UUID的优势：
- 永远不变：无论怎么插拔，UUID始终不变
- 全球唯一：不会与其他设备重复
- 系统推荐：现代Linux系统推荐用UUID挂载
```

**💡 查看特定信息**
```bash
# 只显示UUID
blkid -s UUID /dev/sda1

# 只显示文件系统类型
blkid -s TYPE /dev/sda1

# 显示所有ext4分区
blkid -t TYPE=ext4
```

### 5.4 与/etc/fstab的关系


**📝 现代挂载配置**
```bash
# 传统方式（不推荐）
/dev/sda1 /boot ext4 defaults 0 0

# 现代方式（推荐）
UUID=12345678-1234-1234-1234-123456789abc /boot ext4 defaults 0 0
```

**✅ UUID方式的优点**
- 设备重新排序不影响系统启动
- 更安全可靠的自动挂载
- 避免设备名冲突问题

---

## 6. 📋 分区表查看与管理


### 6.1 parted命令基本概念


**🔸 什么是parted？**
`parted`是比fdisk更现代、功能更强大的分区工具，支持GPT分区表，可以处理大于2TB的硬盘。

```
fdisk vs parted 的区别：
fdisk：
- 只支持MBR分区表（老式）
- 最大支持2TB硬盘
- 交互式操作

parted：
- 支持GPT和MBR分区表（新式）
- 支持超大硬盘（>2TB）
- 既支持交互式，也支持命令行模式
```

### 6.2 parted查看分区信息


**⚡ 基本查看命令**

| 命令 | **功能** | **输出内容** | **适用场景** |
|------|---------|-------------|-------------|
| `parted -l` | 列出所有磁盘信息 | `显示所有磁盘的分区表` | `系统全貌查看` |
| `parted /dev/sda print` | 查看指定磁盘 | `显示sda的详细分区信息` | `具体磁盘分析` |
| `parted /dev/sda unit GB print` | 以GB为单位显示 | `用GB显示大小更直观` | `大容量磁盘查看` |

**📊 parted输出信息解读**
```bash
parted /dev/sda print
```

```
Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sda: 107GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 

Number  Start   End     Size    Type     File system  Flags
 1      1049kB  21.5GB  21.5GB  primary  ext4         boot
 2      21.5GB  96.6GB  75.1GB  primary  xfs
 3      96.6GB  107GB   10.7GB  primary  linux-swap(v1)
```

**🔍 关键信息说明**
- **Model**: 硬盘型号和接口类型
- **Disk**: 磁盘大小
- **Partition Table**: 分区表类型（msdos=MBR，gpt=GPT）
- **Number**: 分区编号
- **File system**: 文件系统类型
- **Flags**: 特殊标志（boot=引导分区）

### 6.3 分区表类型对比


**🔄 MBR vs GPT分区表**

| 特性 | **MBR分区表** | **GPT分区表** | **建议** |
|------|-------------|-------------|---------|
| **最大磁盘大小** | `2TB` | `18EB（无限制）` | `大硬盘必须用GPT` |
| **最大分区数** | `4个主分区` | `128个分区` | `多分区用GPT` |
| **兼容性** | `老系统兼容好` | `需要UEFI支持` | `新系统优先GPT` |
| **可靠性** | `单点故障` | `有备份，更可靠` | `重要数据用GPT` |

### 6.4 parted实用技巧


**💡 查看分区表类型**
```bash
# 快速查看分区表类型
parted /dev/sda print | grep "Partition Table"
```

**🎯 大硬盘处理**
```bash
# 对于TB级别的硬盘，用TB单位更直观
parted /dev/sdb unit TB print
```

---

## 7. 📄 系统分区信息文件


### 7.1 /proc/partitions文件详解


**🔸 什么是/proc/partitions？**
这是Linux系统内核维护的一个虚拟文件，实时显示当前系统识别到的所有分区信息。

```
通俗理解：
/proc目录 = 系统信息的"显示屏"
/proc/partitions = 分区信息的"实时显示板"
内容来源：内核直接提供，最权威最及时
```

### 7.2 文件内容格式


**📊 查看分区信息**
```bash
cat /proc/partitions
```

**典型输出格式：**
```
major minor  #blocks  name

   8        0  104857600 sda
   8        1   20971520 sda1
   8        2   75497472 sda2
   8        3   10485760 sda3
  11        0    1048575 sr0
```

**🔍 字段含义详解**
- **major**: 主设备号（标识设备类型）
- **minor**: 次设备号（标识具体设备）
- **#blocks**: 分区大小（以1024字节为单位）
- **name**: 设备名称

### 7.3 与其他命令的对比


**🔄 信息来源对比**

| 命令/文件 | **信息来源** | **更新频率** | **详细程度** | **适用场景** |
|-----------|-------------|-------------|-------------|-------------|
| `cat /proc/partitions` | `内核直接` | `实时` | `基础信息` | `脚本处理` |
| `lsblk` | `内核+用户空间` | `实时` | `详细丰富` | `日常查看` |
| `fdisk -l` | `读取分区表` | `执行时` | `最详细` | `深度分析` |

### 7.4 实际应用场景


**💡 脚本中的应用**
```bash
# 检查某个分区是否存在
if grep -q "sda1" /proc/partitions; then
    echo "找到sda1分区"
else
    echo "sda1分区不存在"
fi
```

**🎯 系统监控应用**
- 实时监控分区变化
- 热插拔设备检测
- 系统启动时的设备发现

---

## 8. 🗂️ 挂载点信息查看


### 8.1 findmnt命令基本概念


**🔸 什么是挂载？**
挂载就是把存储设备"挂接"到Linux目录树上的过程，让系统能够访问设备上的数据。

```
生活化比喻：
挂载 = 把移动硬盘连接到电脑上
挂载点 = 电脑上显示移动硬盘的文件夹位置
findmnt = 查看所有已连接设备的工具

例如：/dev/sda1挂载到/boot目录
意思是：访问/boot目录就是访问sda1分区的内容
```

### 8.2 findmnt命令详解


**⚡ 常用参数说明**

| 参数 | **功能** | **输出效果** | **使用场景** |
|------|---------|-------------|-------------|
| `findmnt` | 显示所有挂载点 | `树状结构显示所有挂载` | `全面了解系统挂载` |
| `findmnt /` | 查看根目录挂载 | `显示根分区信息` | `查看系统分区` |
| `findmnt -D` | 显示重复挂载 | `找出同一设备多次挂载` | `故障排查` |
| `findmnt -v` | 详细输出 | `显示更多挂载选项` | `深度分析` |

**📊 findmnt典型输出**
```bash
findmnt
```

```
TARGET                SOURCE      FSTYPE  OPTIONS
/                     /dev/sda1   ext4    rw,relatime
├─/boot              /dev/sda2   ext4    rw,relatime
├─/home              /dev/sda3   xfs     rw,relatime
├─/dev               devtmpfs    devtmpfs rw,nosuid,size=1024k
├─/proc              proc        proc    rw,nosuid,nodev,noexec,relatime
├─/sys               sysfs       sysfs   rw,nosuid,nodev,noexec,relatime
└─/tmp               tmpfs       tmpfs   rw,nosuid,nodev
```

### 8.3 输出信息解读


**🔍 关键字段含义**
- **TARGET**: 挂载点（在系统中的位置）
- **SOURCE**: 源设备（实际的存储设备）
- **FSTYPE**: 文件系统类型
- **OPTIONS**: 挂载选项（读写权限、特殊属性等）

**💡 常见挂载选项**
- **rw**: 可读写
- **ro**: 只读
- **nosuid**: 不允许setuid程序
- **nodev**: 不允许设备文件
- **noexec**: 不允许执行程序

### 8.4 findmnt实用技巧


**🔧 查看特定文件系统**
```bash
# 只显示ext4文件系统
findmnt -t ext4

# 只显示物理设备挂载（排除虚拟文件系统）
findmnt -D

# 查看某个目录属于哪个分区
findmnt /home
```

**🎯 故障排查应用**
```bash
# 检查是否有只读挂载
findmnt | grep ",ro"

# 查看所有临时文件系统
findmnt -t tmpfs

# 检查重复挂载问题
findmnt -D
```

### 8.5 与其他挂载相关命令对比


**🔄 挂载信息查看命令对比**

| 命令 | **信息来源** | **显示格式** | **适用场景** |
|------|-------------|-------------|-------------|
| `mount` | `/proc/mounts` | `列表格式` | `传统查看方式` |
| `findmnt` | `/proc/self/mountinfo` | `树状结构` | `现代推荐方式` |
| `df -h` | `文件系统统计` | `空间使用情况` | `磁盘空间查看` |
| `cat /proc/mounts` | `内核直接输出` | `原始数据` | `脚本处理` |

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的基本概念


```
🔸 磁盘空间查看：df命令看分区使用情况，du命令看目录占用
🔸 设备识别：lsblk树状显示设备，blkid查看设备UUID
🔸 分区管理：fdisk查看MBR分区，parted支持GPT大硬盘
🔸 系统信息：/proc/partitions提供内核视角的分区信息
🔸 挂载状态：findmnt树状显示所有挂载点信息
```

### 9.2 关键理解要点


**🔹 存储层次关系**
```
物理设备（/dev/sda）
    ↓
分区（/dev/sda1, /dev/sda2）
    ↓
文件系统（ext4, xfs, swap）
    ↓
挂载点（/, /home, /boot）
    ↓
目录和文件
```

**🔹 命令使用场景**
```
日常空间检查：df -h
清理磁盘空间：du -h --max-depth=1 | sort -hr
查看设备信息：lsblk -f
分区故障排查：fdisk -l
挂载问题诊断：findmnt
```

**🔹 设备命名规律**
```
SATA硬盘：/dev/sda, /dev/sdb...
分区编号：/dev/sda1, /dev/sda2...
NVMe硬盘：/dev/nvme0n1, /dev/nvme0n2...
光驱设备：/dev/sr0, /dev/sr1...
```

### 9.3 实际应用指南


**🎯 磁盘空间管理流程**
```
1. df -h → 发现空间不足的分区
2. du -h /目标目录 --max-depth=1 | sort -hr → 找到占用大的目录
3. 进入大目录，重复使用du命令细分查找
4. 找到具体问题文件或目录，进行清理
```

**⚠️ 重要注意事项**
- 使用率超过**80%**需要关注，超过**95%**可能影响系统稳定性
- 分区操作前**必须备份重要数据**
- 现代系统推荐使用**UUID**而非设备名进行挂载
- **GPT分区表**适合大硬盘和新系统

**💡 故障排查思路**
```
磁盘空间问题：df → du → 定位大文件
设备识别问题：lsblk → blkid → 确认设备信息
挂载问题：findmnt → 检查挂载状态和选项
分区问题：fdisk/parted → 查看分区表完整性
```

**核心记忆口诀**：
```
df看分区du看目录，lsblk树状显设备
blkid身份fdisk分区，parted支持大硬盘
proc分区内核信息，findmnt挂载全显示
```