---
title: 11、环境变量信息查看
---
## 📚 目录

1. [环境变量基础概念](#1-环境变量基础概念)
2. [env命令详解](#2-env命令详解)
3. [printenv指定查看](#3-printenv指定查看)
4. [set全面查看](#4-set全面查看)
5. [export导出变量](#5-export导出变量)
6. [进程环境变量查看](#6-进程环境变量查看)
7. [PATH变量详解](#7-path变量详解)
8. [locale本地化设置](#8-locale本地化设置)
9. [环境变量作用域](#9-环境变量作用域)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 🌍 环境变量基础概念


### 1.1 什么是环境变量


**环境变量**就像是系统的"全局设置"，它们存储着系统和程序运行所需要的配置信息。

```
简单理解：
🏠 家里的地址本 → 环境变量存储重要信息
📞 电话号码簿   → 程序可以随时查阅使用
🗂️ 重要文件夹   → 系统知道去哪里找东西
```

**🔸 环境变量的作用**
- **配置信息**：告诉程序如何运行
- **路径指引**：告诉系统去哪里找文件
- **用户信息**：存储当前用户的相关信息
- **系统设置**：保存系统的各种配置

### 1.2 环境变量的分类


| 类型 | **说明** | **示例** | **作用范围** |
|------|----------|----------|-------------|
| 🌐 **系统环境变量** | `系统级别，所有用户可见` | `PATH`, `HOME` | `全局` |
| 👤 **用户环境变量** | `用户级别，只对当前用户` | `USER`, `MAIL` | `用户` |
| 🖥️ **Shell变量** | `Shell会话级别` | `PS1`, `PWD` | `当前会话` |

### 1.3 环境变量的常见形式


```bash
# 环境变量的基本格式
变量名=变量值

# 实际例子
USER=john           # 用户名
HOME=/home/john     # 用户主目录
PATH=/usr/bin:/bin  # 程序搜索路径
```

---

## 2. 📋 env命令详解


### 2.1 env命令基本用法


`env`命令是查看**所有环境变量**的最简单方法，就像打开一个"变量清单"。

**🔸 基本语法**
```bash
env                    # 显示所有环境变量
env | grep 变量名      # 搜索特定变量
env | sort            # 按字母排序显示
```

### 2.2 实用示例


**查看所有环境变量**：
```bash
$ env
USER=john
HOME=/home/john
PATH=/usr/local/bin:/usr/bin:/bin
SHELL=/bin/bash
LANG=en_US.UTF-8
PWD=/home/john
...
```

**🔍 搜索特定变量**：
```bash
# 查找包含"PATH"的变量
$ env | grep PATH
PATH=/usr/local/bin:/usr/bin:/bin

# 查找用户相关变量  
$ env | grep USER
USER=john
USERNAME=john
```

### 2.3 env命令的高级用法


**📊 统计环境变量数量**：
```bash
$ env | wc -l
45    # 当前有45个环境变量
```

**🔤 按字母顺序查看**：
```bash
$ env | sort
DESKTOP_SESSION=ubuntu
DISPLAY=:0
HOME=/home/john
...
```

---

## 3. 🎯 printenv指定查看


### 3.1 printenv命令详解


`printenv`命令可以**精确查看指定的环境变量**，就像查字典一样直接找到想要的内容。

**🔸 基本用法**
```bash
printenv                    # 显示所有环境变量（同env）
printenv 变量名             # 显示指定变量的值
printenv 变量名1 变量名2    # 显示多个变量
```

### 3.2 常用查看示例


**查看用户主目录**：
```bash
$ printenv HOME
/home/john
```

**查看当前用户名**：
```bash
$ printenv USER
john
```

**查看系统路径**：
```bash
$ printenv PATH
/usr/local/bin:/usr/bin:/bin:/usr/games
```

### 3.3 printenv vs env 对比


| 命令 | **优势** | **适用场景** |
|------|----------|-------------|
| `env` | `查看全部变量，输出格式统一` | `全面了解系统环境` |
| `printenv` | `精确查看指定变量，结果简洁` | `查看特定变量值` |

**💡 实用技巧**：
```bash
# 检查变量是否存在
$ printenv NONEXISTENT_VAR
# 没有输出表示变量不存在

# 在脚本中使用
if [ -n "$(printenv JAVA_HOME)" ]; then
    echo "Java环境已配置"
fi
```

---

## 4. 🔧 set全面查看


### 4.1 set命令的作用


`set`命令不仅显示**环境变量**，还显示**Shell变量**和**函数定义**，是最全面的变量查看工具。

**🔸 变量类型对比**
```
环境变量：可以被子进程继承  → export导出的变量
Shell变量：只在当前Shell有效 → 直接赋值的变量
```

### 4.2 set命令使用


**查看所有变量**：
```bash
$ set
BASH=/bin/bash
HOME=/home/john
PATH=/usr/bin:/bin
PS1='$ '
my_var=hello      # Shell变量
exported_var=world # 环境变量
...
```

**🔍 过滤查看**：
```bash
# 只查看以PATH开头的变量
$ set | grep ^PATH
PATH=/usr/local/bin:/usr/bin:/bin

# 查看PS开头的提示符变量
$ set | grep ^PS
PS1='$ '
PS2='> '
```

### 4.3 set与env的区别


```
演示环境变量和Shell变量的区别：

# 创建一个Shell变量
$ my_shell_var="hello"

# 创建一个环境变量  
$ export my_env_var="world"

# set能看到两个变量
$ set | grep my_
my_shell_var=hello
my_env_var=world

# env只能看到环境变量
$ env | grep my_
my_env_var=world
```

---

## 5. 📤 export导出变量查看


### 5.1 export命令详解


`export`命令用于**创建和查看环境变量**，它能将Shell变量"提升"为环境变量。

**🔸 基本概念**
```
Shell变量 → 只在当前Shell有效
    ↓ export
环境变量 → 可以被子进程继承
```

### 5.2 查看导出的变量


**查看所有导出变量**：
```bash
$ export
declare -x HOME="/home/john"
declare -x PATH="/usr/bin:/bin"
declare -x USER="john"
...
```

**🔍 查看特定变量是否导出**：
```bash
$ export | grep PATH
declare -x PATH="/usr/local/bin:/usr/bin:/bin"
```

### 5.3 export的实际应用


**创建和导出变量**：
```bash
# 方法1：分步操作
$ MY_VAR="hello"          # 创建Shell变量
$ export MY_VAR           # 导出为环境变量

# 方法2：一步完成
$ export MY_VAR="hello"   # 直接创建环境变量
```

**💡 验证变量继承**：
```bash
# 父Shell中创建变量
$ export PARENT_VAR="from parent"

# 启动子Shell验证继承
$ bash
$ echo $PARENT_VAR
from parent    # 子进程能访问父进程的环境变量
```

---

## 6. 🔍 进程环境变量查看


### 6.1 /proc/PID/environ 详解


每个进程都有自己的环境变量，存储在`/proc/PID/environ`文件中。这就像每个程序都有自己的"配置清单"。

**🔸 基本概念**
```
/proc/          → 虚拟文件系统，存储进程信息
/proc/PID/      → 特定进程的信息目录
/proc/PID/environ → 该进程的环境变量
```

### 6.2 查看进程环境变量


**查看当前Shell进程**：
```bash
# 获取当前Shell的PID
$ echo $$
12345

# 查看当前进程的环境变量
$ cat /proc/12345/environ | tr '\0' '\n'
HOME=/home/john
PATH=/usr/bin:/bin
USER=john
...
```

> 💡 **说明**：`tr '\0' '\n'`是因为环境变量之间用空字符分隔，需要转换为换行符才能正常显示。

### 6.3 查看其他进程环境变量


**查找特定程序的进程**：
```bash
# 查找nginx进程
$ ps aux | grep nginx
root  1234  nginx: master process

# 查看nginx的环境变量
$ sudo cat /proc/1234/environ | tr '\0' '\n'
```

**🔒 权限注意**：
- 只能查看**自己进程**的环境变量
- 查看**其他用户进程**需要相应权限
- **系统进程**通常需要root权限

---

## 7. 🛣️ PATH变量详解


### 7.1 PATH变量的重要性


`PATH`是最重要的环境变量之一，它告诉系统**在哪些目录中查找可执行程序**。

**🔸 工作原理**
```
当你输入命令 → 系统在PATH指定的目录中搜索 → 找到就执行
```

### 7.2 查看PATH变量


**多种查看方式**：
```bash
# 方法1：使用printenv
$ printenv PATH
/usr/local/bin:/usr/bin:/bin:/usr/games

# 方法2：使用echo
$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/games

# 方法3：格式化显示
$ echo $PATH | tr ':' '\n'
/usr/local/bin
/usr/bin
/bin
/usr/games
```

### 7.3 PATH的搜索顺序


```
PATH路径示例：
/usr/local/bin  ← 优先级1（最高）
/usr/bin        ← 优先级2  
/bin            ← 优先级3
/usr/games      ← 优先级4（最低）

搜索过程：
输入命令 → 在/usr/local/bin中查找 → 找到就执行
         ↓ 没找到
         → 在/usr/bin中查找 → 找到就执行
         ↓ 没找到  
         → 继续在后续目录查找...
```

### 7.4 PATH相关实用技巧


**查看命令位置**：
```bash
$ which ls
/bin/ls

$ type ls  
ls is /bin/ls
```

**临时修改PATH**：
```bash
# 添加新路径到PATH前面
$ export PATH="/my/custom/bin:$PATH"

# 添加新路径到PATH后面  
$ export PATH="$PATH:/my/custom/bin"
```

---

## 8. 🌐 locale本地化设置


### 8.1 locale概念说明


`locale`控制系统的**本地化设置**，包括语言、时间格式、货币符号等。就像给系统设置"地区偏好"。

**🔸 locale的作用**
- **语言显示**：界面用什么语言
- **日期格式**：2025-01-15 还是 01/15/2025
- **数字格式**：1,000.50 还是 1.000,50
- **货币符号**：$ 还是 ¥

### 8.2 查看locale设置


**查看当前locale配置**：
```bash
$ locale
LANG=en_US.UTF-8
LANGUAGE=en_US:en  
LC_CTYPE=en_US.UTF-8
LC_NUMERIC=en_US.UTF-8
LC_TIME=en_US.UTF-8
LC_COLLATE=en_US.UTF-8
LC_MONETARY=en_US.UTF-8
LC_MESSAGES=en_US.UTF-8
...
```

**📋 重要locale变量说明**：

| 变量 | **作用** | **示例效果** |
|------|----------|-------------|
| `LANG` | `默认语言设置` | `en_US.UTF-8` |
| `LC_TIME` | `时间日期格式` | `Mon Jan 15` vs `1月15日` |
| `LC_NUMERIC` | `数字格式` | `1,234.56` vs `1.234,56` |
| `LC_MONETARY` | `货币格式` | `$123.45` vs `¥123.45` |

### 8.3 locale实用命令


**查看可用locale**：
```bash
$ locale -a
C
en_US.utf8
zh_CN.utf8
...
```

**查看特定类别设置**：
```bash
$ locale -k LC_TIME
date_fmt="%a %b %e %H:%M:%S %Z %Y"
t_fmt="%H:%M:%S"
d_fmt="%m/%d/%Y"
```

---

## 9. 🎯 环境变量作用域


### 9.1 作用域层级结构


环境变量有不同的**作用范围**，就像公司里的通知有全公司、部门、小组不同级别。

```
系统级环境变量
    ↓ 影响
用户级环境变量  
    ↓ 影响
Shell会话变量
    ↓ 影响  
子进程变量
```

### 9.2 不同作用域的配置文件


**🏢 系统级配置**（影响所有用户）：
- `/etc/environment` - 系统环境变量
- `/etc/profile` - 所有用户登录时执行
- `/etc/bash.bashrc` - 所有用户的bash配置

**👤 用户级配置**（只影响当前用户）：
- `~/.profile` - 用户登录时执行
- `~/.bashrc` - 用户启动bash时执行
- `~/.bash_profile` - 用户登录bash时执行

### 9.3 变量继承规则


**🔄 继承关系演示**：
```bash
# 父进程设置环境变量
$ export PARENT_VAR="hello from parent"

# 启动子进程
$ bash

# 子进程可以访问父进程的环境变量
$ echo $PARENT_VAR
hello from parent

# 子进程修改变量（不影响父进程）
$ PARENT_VAR="modified in child"
$ exit

# 回到父进程，变量未改变
$ echo $PARENT_VAR  
hello from parent
```

### 9.4 作用域优先级


**变量查找顺序**：
```
1. 当前Shell变量
2. 当前用户环境变量
3. 系统环境变量
4. 默认值

示例：
本地设置 > 用户配置 > 系统配置 > 程序默认
```

**💡 实际应用场景**：

| 需求 | **设置位置** | **配置文件** |
|------|-------------|-------------|
| `临时使用` | `当前Shell` | `直接export` |
| `用户专用` | `用户目录` | `~/.bashrc` |
| `系统通用` | `系统目录` | `/etc/environment` |

---

## 10. 📋 核心要点总结


### 10.1 必须掌握的基本概念


```
🔸 环境变量：系统和程序运行的配置信息存储
🔸 作用域：系统级 → 用户级 → Shell级的层级结构  
🔸 继承性：环境变量可以被子进程继承
🔸 PATH：程序搜索路径，决定命令能否找到
🔸 locale：系统本地化设置，影响显示格式
```

### 10.2 重要命令对比


| 命令 | **主要用途** | **适用场景** | **特点** |
|------|-------------|-------------|----------|
| `env` | `查看所有环境变量` | `全面了解系统环境` | `输出简洁清晰` |
| `printenv` | `查看指定环境变量` | `精确查找特定变量` | `支持多变量查看` |
| `set` | `查看所有变量和函数` | `全面调试Shell环境` | `信息最完整` |
| `export` | `创建和查看导出变量` | `变量管理和导出` | `显示导出状态` |

### 10.3 关键理解要点


**🔹 环境变量 vs Shell变量**
```
Shell变量：
- 只在当前Shell有效
- 不能被子进程继承
- 用 variable=value 创建

环境变量：
- 可以被子进程继承  
- 用 export variable=value 创建
- 影响范围更广
```

**🔹 PATH的重要性**
```
PATH决定了：
✅ 哪些命令可以直接运行
✅ 命令的搜索顺序
✅ 系统能找到哪些程序

PATH配置错误会导致：
❌ 命令找不到 (command not found)
❌ 程序无法启动
❌ 系统功能异常
```

**🔹 实际应用建议**
- **日常使用**：`printenv`查看特定变量，`env`了解整体环境
- **问题排查**：`set`查看完整信息，`echo $PATH`检查路径
- **配置管理**：理解作用域，选择合适的配置文件
- **脚本编程**：使用`export`确保变量传递给子进程

**核心记忆**：
- 环境变量是系统的"全局配置"
- 不同命令查看不同范围的变量信息  
- PATH是最重要的环境变量之一
- 变量有作用域和继承关系