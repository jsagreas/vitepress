---
title: 2ã€ç”¨æˆ·è´¦æˆ·ä¿®æ”¹å‘½ä»¤
---
## ğŸ“š ç›®å½•

1. [usermodå‘½ä»¤æ¦‚è¿°](#1-usermodå‘½ä»¤æ¦‚è¿°)
2. [åŸºæœ¬ä¿¡æ¯ä¿®æ”¹æ“ä½œ](#2-åŸºæœ¬ä¿¡æ¯ä¿®æ”¹æ“ä½œ)
3. [ç”¨æˆ·ç»„ç®¡ç†ä¸è°ƒæ•´](#3-ç”¨æˆ·ç»„ç®¡ç†ä¸è°ƒæ•´)
4. [ä¸»ç›®å½•ä¸Shellç®¡ç†](#4-ä¸»ç›®å½•ä¸Shellç®¡ç†)
5. [ç”¨æˆ·çŠ¶æ€æ§åˆ¶](#5-ç”¨æˆ·çŠ¶æ€æ§åˆ¶)
6. [é«˜çº§å‚æ•°ä¸æ³¨æ„äº‹é¡¹](#6-é«˜çº§å‚æ•°ä¸æ³¨æ„äº‹é¡¹)
7. [å®é™…åº”ç”¨åœºæ™¯](#7-å®é™…åº”ç”¨åœºæ™¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ usermodå‘½ä»¤æ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯usermod


**usermod** æ˜¯Linuxç³»ç»Ÿä¸­ç”¨æ¥**ä¿®æ”¹å·²å­˜åœ¨ç”¨æˆ·è´¦æˆ·**çš„å‘½ä»¤ã€‚ç®€å•ç†è§£å°±æ˜¯ï¼šç”¨æˆ·å·²ç»åˆ›å»ºå¥½äº†ï¼Œä½†éœ€è¦æ”¹ä¸€äº›è®¾ç½®ï¼Œè¿™æ—¶å€™å°±ç”¨usermodã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
å°±åƒä½ å·²ç»åŠäº†é“¶è¡Œå¡ï¼Œåæ¥æƒ³æ”¹æ‰‹æœºå·ã€åœ°å€
ä¸ç”¨é‡æ–°åŠå¡ï¼Œç›´æ¥å»é“¶è¡Œä¿®æ”¹èµ„æ–™å°±è¡Œ
usermodå°±æ˜¯è¿™ä¸ª"ä¿®æ”¹èµ„æ–™"çš„å·¥å…·
```

### 1.2 usermodçš„åŸºæœ¬è¯­æ³•


```bash
usermod [é€‰é¡¹] ç”¨æˆ·å
```

**ğŸ”¸ æ ¸å¿ƒç†è§£è¦ç‚¹**ï¼š
- usermodåªèƒ½ä¿®æ”¹**å·²å­˜åœ¨çš„ç”¨æˆ·**
- ä¸€æ¬¡å¯ä»¥ä¿®æ”¹**å¤šä¸ªå±æ€§**
- ä¿®æ”¹å**ç«‹å³ç”Ÿæ•ˆ**ï¼ˆéƒ¨åˆ†éœ€é‡æ–°ç™»å½•ï¼‰
- å¿…é¡»æœ‰**rootæƒé™**æ‰èƒ½ä½¿ç”¨

### 1.3 å¸¸ç”¨é€‰é¡¹é€Ÿè§ˆ


| é€‰é¡¹ | ä½œç”¨ | è®°å¿†æ–¹æ³• |
|------|------|----------|
| `-c` | ä¿®æ”¹æ³¨é‡Šä¿¡æ¯ | **c**omment æ³¨é‡Š |
| `-d` | ä¿®æ”¹ä¸»ç›®å½• | **d**irectory ç›®å½• |
| `-g` | ä¿®æ”¹ä¸»ç»„ | **g**roup ç»„ |
| `-G` | ä¿®æ”¹é™„åŠ ç»„ | **G**roups å¤šä¸ªç»„ |
| `-s` | ä¿®æ”¹Shell | **s**hell |
| `-u` | ä¿®æ”¹UID | **u**id ç”¨æˆ·ID |
| `-l` | ä¿®æ”¹ç”¨æˆ·å | **l**ogin ç™»å½•å |
| `-L` | é”å®šè´¦æˆ· | **L**ock é”å®š |
| `-U` | è§£é”è´¦æˆ· | **U**nlock è§£é” |

---

## 2. ğŸ“ åŸºæœ¬ä¿¡æ¯ä¿®æ”¹æ“ä½œ


### 2.1 ä¿®æ”¹ç”¨æˆ·æ³¨é‡Šä¿¡æ¯(-c)


**ç”¨é€”**ï¼šä¿®æ”¹ç”¨æˆ·çš„**çœŸå®å§“å**æˆ–**æè¿°ä¿¡æ¯**ï¼Œè¿™äº›ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨`/etc/passwd`æ–‡ä»¶ä¸­ã€‚

```bash
# æŸ¥çœ‹ç”¨æˆ·å½“å‰ä¿¡æ¯
grep xiaoming /etc/passwd
# è¾“å‡ºï¼šxiaoming:x:1001:1001::/home/xiaoming:/bin/bash

# æ·»åŠ ç”¨æˆ·æ³¨é‡Šä¿¡æ¯
usermod -c "å°æ˜,ç ”å‘éƒ¨é—¨,13812345678" xiaoming

# å†æ¬¡æŸ¥çœ‹
grep xiaoming /etc/passwd  
# è¾“å‡ºï¼šxiaoming:x:1001:1001:å°æ˜,ç ”å‘éƒ¨é—¨,13812345678:/home/xiaoming:/bin/bash
```

**ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯**ï¼š
- è®°å½•å‘˜å·¥çš„çœŸå®å§“åå’Œéƒ¨é—¨
- æ·»åŠ è”ç³»æ–¹å¼ä¾¿äºç®¡ç†
- æ ‡æ³¨ç”¨æˆ·çš„èŒè´£æˆ–è§’è‰²

### 2.2 ä¿®æ”¹ç”¨æˆ·ç™»å½•å(-l)


**ç”¨é€”**ï¼šæ›´æ”¹ç”¨æˆ·çš„**ç™»å½•åç§°**ï¼ˆç”¨æˆ·åï¼‰ï¼Œä½†ä¿æŒå…¶ä»–ä¿¡æ¯ä¸å˜ã€‚

```bash
# å°†ç”¨æˆ·xiaomingæ”¹åä¸ºxiaoli
usermod -l xiaoli xiaoming

# éªŒè¯ä¿®æ”¹ç»“æœ
id xiaoli
# è¾“å‡ºï¼šuid=1001(xiaoli) gid=1001(xiaoming) groups=1001(xiaoming)
```

**âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹**ï¼š
- ç”¨æˆ·**ä¸èƒ½æ­£åœ¨ç™»å½•**ç³»ç»Ÿæ—¶ä¿®æ”¹
- **ä¸»ç»„åä¸ä¼šè‡ªåŠ¨æ›´æ”¹**ï¼Œéœ€è¦æ‰‹åŠ¨ç”¨`groupmod`ä¿®æ”¹
- å¦‚æœæœ‰**ä¸»ç›®å½•**ï¼Œè·¯å¾„ä¸ä¼šè‡ªåŠ¨æ›´æ–°

**ğŸ”§ å®Œæ•´çš„ç”¨æˆ·åä¿®æ”¹æµç¨‹**ï¼š
```bash
# 1. ç¡®ä¿ç”¨æˆ·æœªç™»å½•
who | grep xiaoming

# 2. ä¿®æ”¹ç”¨æˆ·å
usermod -l xiaoli xiaoming

# 3. ä¿®æ”¹ä¸»ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼‰
usermod -d /home/xiaoli -m xiaoli

# 4. ä¿®æ”¹ä¸»ç»„åï¼ˆå¯é€‰ï¼‰
groupmod -n xiaoli xiaoming
```

### 2.3 ä¿®æ”¹ç”¨æˆ·UID(-u)


**ç”¨é€”**ï¼šæ›´æ”¹ç”¨æˆ·çš„**æ•°å­—ID**ï¼Œè¿™æ˜¯ç³»ç»Ÿå†…éƒ¨è¯†åˆ«ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ã€‚

```bash
# æŸ¥çœ‹å½“å‰UID
id xiaoming
# è¾“å‡ºï¼šuid=1001(xiaoming) gid=1001(xiaoming) groups=1001(xiaoming)

# ä¿®æ”¹UIDä¸º1500
usermod -u 1500 xiaoming

# éªŒè¯ä¿®æ”¹
id xiaoming  
# è¾“å‡ºï¼šuid=1500(xiaoming) gid=1001(xiaoming) groups=1001(xiaoming)
```

**ğŸš¨ UIDä¿®æ”¹çš„é‡è¦é£é™©**ï¼š

```
æ–‡ä»¶æ‰€æœ‰æƒé—®é¢˜ç¤ºä¾‹ï¼š

ä¿®æ”¹å‰ï¼š
$ ls -l /home/xiaoming/
-rw-r--r-- 1 xiaoming xiaoming 1024 file.txt

ä¿®æ”¹UIDåï¼š
$ ls -l /home/xiaoming/
-rw-r--r-- 1 1001 xiaoming 1024 file.txt
```

**è§£å†³æ–‡ä»¶æ‰€æœ‰æƒé—®é¢˜**ï¼š
```bash
# ä¿®æ”¹UIDåï¼Œæ›´æ–°æ–‡ä»¶æ‰€æœ‰æƒ
find /home/xiaoming -user 1001 -exec chown xiaoming {} \;
# æˆ–è€…ä½¿ç”¨
chown -R xiaoming:xiaoming /home/xiaoming
```

---

## 3. ğŸ‘¥ ç”¨æˆ·ç»„ç®¡ç†ä¸è°ƒæ•´


### 3.1 ç†è§£Linuxç»„çš„æ¦‚å¿µ


**ğŸ“š åŸºç¡€çŸ¥è¯†**ï¼š
```
æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ï¼š
- ä¸»ç»„(Primary Group)ï¼šç”¨æˆ·çš„é»˜è®¤ç»„ï¼Œåªèƒ½æœ‰ä¸€ä¸ª
- é™„åŠ ç»„(Supplementary Groups)ï¼šç”¨æˆ·é¢å¤–åŠ å…¥çš„ç»„ï¼Œå¯ä»¥æœ‰å¤šä¸ª

å°±åƒä¸€ä¸ªäººï¼š
- ä¸»è¦èº«ä»½ï¼šå­¦ç”Ÿï¼ˆä¸»ç»„ï¼‰  
- å…¼èŒèº«ä»½ï¼šå¿—æ„¿è€…ã€ç¤¾å›¢æˆå‘˜ï¼ˆé™„åŠ ç»„ï¼‰
```

### 3.2 ä¿®æ”¹ç”¨æˆ·ä¸»ç»„(-g)


**ç”¨é€”**ï¼šæ›´æ”¹ç”¨æˆ·çš„**é»˜è®¤ç»„**ï¼Œå½±å“ç”¨æˆ·åˆ›å»ºæ–‡ä»¶æ—¶çš„é»˜è®¤ç»„å½’å±ã€‚

```bash
# æŸ¥çœ‹ç”¨æˆ·å½“å‰ç»„ä¿¡æ¯
groups xiaoming
# è¾“å‡ºï¼šxiaoming : xiaoming developers

# å°†xiaomingçš„ä¸»ç»„æ”¹ä¸ºdevelopers
usermod -g developers xiaoming

# éªŒè¯ä¿®æ”¹ç»“æœ
groups xiaoming
# è¾“å‡ºï¼šxiaoming : developers
id xiaoming
# è¾“å‡ºï¼šuid=1001(xiaoming) gid=1002(developers) groups=1002(developers)
```

**ğŸ’¡ ä¸»ç»„ä¿®æ”¹çš„å½±å“**ï¼š
- ç”¨æˆ·æ–°å»ºæ–‡ä»¶çš„**é»˜è®¤ç»„æ‰€æœ‰è€…**ä¼šæ”¹å˜
- ä¸å½±å“**å·²å­˜åœ¨æ–‡ä»¶**çš„ç»„å½’å±
- åŸä¸»ç»„å¦‚æœåªæœ‰è¯¥ç”¨æˆ·ï¼Œå¯èƒ½éœ€è¦åˆ é™¤

### 3.3 ç®¡ç†ç”¨æˆ·é™„åŠ ç»„(-G)


**ç”¨é€”**ï¼šè®¾ç½®ç”¨æˆ·çš„**é™„åŠ ç»„åˆ—è¡¨**ï¼Œç”¨äºç»™ç”¨æˆ·åˆ†é…é¢å¤–æƒé™ã€‚

**ğŸ”¸ å®Œå…¨æ›¿æ¢é™„åŠ ç»„**ï¼š
```bash
# å°†xiaomingåŠ å…¥wheelå’Œdockerç»„ï¼ˆæ›¿æ¢åŸæœ‰é™„åŠ ç»„ï¼‰
usermod -G wheel,docker xiaoming

# æŸ¥çœ‹ç»“æœ
groups xiaoming
# è¾“å‡ºï¼šxiaoming : xiaoming wheel docker
```

**ğŸ”¸ è¿½åŠ åˆ°é™„åŠ ç»„(-aG)**ï¼š
```bash
# åœ¨åŸæœ‰åŸºç¡€ä¸Šè¿½åŠ sudoç»„
usermod -aG sudo xiaoming

# æŸ¥çœ‹ç»“æœ
groups xiaoming  
# è¾“å‡ºï¼šxiaoming : xiaoming wheel docker sudo
```

**âš ï¸ -G å’Œ -aG çš„é‡è¦åŒºåˆ«**ï¼š

| é€‰é¡¹ | ä½œç”¨ | é£é™© |
|------|------|------|
| `-G` | **å®Œå…¨æ›¿æ¢**é™„åŠ ç»„åˆ—è¡¨ | ğŸ”´ ä¼šåˆ é™¤ç”¨æˆ·åŸæœ‰çš„æ‰€æœ‰é™„åŠ ç»„ |
| `-aG` | **è¿½åŠ **åˆ°é™„åŠ ç»„åˆ—è¡¨ | ğŸŸ¢ ä¿ç•™åŸæœ‰ç»„ï¼Œåªå¢åŠ æ–°ç»„ |

**ğŸš¨ å¸¸è§é”™è¯¯ç¤ºä¾‹**ï¼š
```bash
# é”™è¯¯ï¼šç”¨æˆ·åŸæ¥åœ¨wheel,dockerç»„ï¼Œç°åœ¨åªå‰©sudoç»„
usermod -G sudo xiaoming

# æ­£ç¡®ï¼šåœ¨åŸæœ‰åŸºç¡€ä¸Šæ·»åŠ sudoç»„
usermod -aG sudo xiaoming
```

### 3.4 å®ç”¨çš„ç»„ç®¡ç†æŠ€å·§


**ğŸ“‹ æŸ¥çœ‹ç”¨æˆ·å®Œæ•´ç»„ä¿¡æ¯**ï¼š
```bash
# æ–¹æ³•1ï¼šæŸ¥çœ‹ç”¨æˆ·æ‰€å±ç»„
groups xiaoming

# æ–¹æ³•2ï¼šæŸ¥çœ‹è¯¦ç»†IDä¿¡æ¯
id xiaoming

# æ–¹æ³•3ï¼šä»é…ç½®æ–‡ä»¶æŸ¥çœ‹
grep xiaoming /etc/group
```

**ğŸ”§ æ‰¹é‡ç»„ç®¡ç†**ï¼š
```bash
# å°†ç”¨æˆ·åŠ å…¥å¤šä¸ªå¼€å‘ç›¸å…³ç»„
usermod -aG developers,testers,docker,sudo xiaoming

# ç§»é™¤ç”¨æˆ·çš„æ‰€æœ‰é™„åŠ ç»„
usermod -G "" xiaoming
```

---

## 4. ğŸ  ä¸»ç›®å½•ä¸Shellç®¡ç†


### 4.1 ä¿®æ”¹ç”¨æˆ·ä¸»ç›®å½•(-d)


**ç”¨é€”**ï¼šæ›´æ”¹ç”¨æˆ·çš„**å®¶ç›®å½•è·¯å¾„**ï¼Œå°±æ˜¯ç”¨æˆ·ç™»å½•åé»˜è®¤è¿›å…¥çš„ç›®å½•ã€‚

**ğŸ”¸ ä»…ä¿®æ”¹è·¯å¾„è®°å½•**ï¼š
```bash
# åªä¿®æ”¹/etc/passwdä¸­çš„ä¸»ç›®å½•è·¯å¾„ï¼Œä¸ç§»åŠ¨æ–‡ä»¶
usermod -d /new/home/xiaoming xiaoming

# æŸ¥çœ‹ä¿®æ”¹ç»“æœ
grep xiaoming /etc/passwd
# è¾“å‡ºæ˜¾ç¤ºä¸»ç›®å½•å·²æ›´æ”¹ä¸º /new/home/xiaoming
```

**ğŸ”¸ ç§»åŠ¨ä¸»ç›®å½•å†…å®¹(-m)**ï¼š
```bash
# ä¿®æ”¹ä¸»ç›®å½•è·¯å¾„å¹¶ç§»åŠ¨åŸç›®å½•å†…å®¹
usermod -d /new/home/xiaoming -m xiaoming
```

**ğŸ’¡ -d å’Œ -dm çš„åŒºåˆ«**ï¼š

```
åœºæ™¯å¯¹æ¯”ï¼š

ç”¨æˆ·xiaomingåŸä¸»ç›®å½•ï¼š/home/xiaoming
ç›®æ ‡ï¼šæ”¹ä¸º /data/users/xiaoming

æ–¹æ³•1ï¼šusermod -d /data/users/xiaoming xiaoming
ç»“æœï¼š
- /etc/passwdè®°å½•å·²æ›´æ–°
- /home/xiaomingç›®å½•å’Œæ–‡ä»¶è¿˜åœ¨åŸåœ°
- ç”¨æˆ·ç™»å½•åè¿›å…¥/data/users/xiaomingï¼ˆå¯èƒ½æ˜¯ç©ºçš„ï¼‰

æ–¹æ³•2ï¼šusermod -d /data/users/xiaoming -m xiaoming  
ç»“æœï¼š
- /etc/passwdè®°å½•å·²æ›´æ–°
- /home/xiaomingæ•´ä¸ªç›®å½•ç§»åŠ¨åˆ°/data/users/xiaoming
- ç”¨æˆ·æ•°æ®å®Œæ•´ä¿ç•™
```

**ğŸ”§ ä¸»ç›®å½•è¿ç§»çš„å®Œæ•´æµç¨‹**ï¼š
```bash
# 1. ç¡®ä¿ç”¨æˆ·æœªç™»å½•
who | grep xiaoming

# 2. ç¡®ä¿ç›®æ ‡ç›®å½•çˆ¶è·¯å¾„å­˜åœ¨
mkdir -p /data/users

# 3. æ‰§è¡Œè¿ç§»
usermod -d /data/users/xiaoming -m xiaoming

# 4. éªŒè¯è¿ç§»ç»“æœ
ls -la /data/users/xiaoming
grep xiaoming /etc/passwd
```

### 4.2 ä¿®æ”¹ç”¨æˆ·Shell(-s)


**ç”¨é€”**ï¼šæ›´æ”¹ç”¨æˆ·ç™»å½•åä½¿ç”¨çš„**å‘½ä»¤è§£é‡Šå™¨**ã€‚

**ğŸ”¸ æŸ¥çœ‹å¯ç”¨Shell**ï¼š
```bash
# æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„Shell
cat /etc/shells
# å¸¸è§è¾“å‡ºï¼š
# /bin/sh
# /bin/bash  
# /bin/dash
# /bin/zsh
# /usr/bin/fish
# /sbin/nologin
```

**ğŸ”¸ å¸¸ç”¨Shellä¿®æ”¹ç¤ºä¾‹**ï¼š
```bash
# æ”¹ä¸ºzshï¼ˆç¨‹åºå‘˜å–œæ¬¢çš„shellï¼‰
usermod -s /bin/zsh xiaoming

# æ”¹ä¸ºfishï¼ˆæ›´ç°ä»£çš„shellï¼‰  
usermod -s /usr/bin/fish xiaoming

# ç¦æ­¢ç”¨æˆ·ç™»å½•ï¼ˆè®¾ä¸ºnologinï¼‰
usermod -s /sbin/nologin xiaoming

# æ¢å¤ä¸ºbash
usermod -s /bin/bash xiaoming
```

**ğŸ’¡ ä¸åŒShellçš„ç‰¹ç‚¹**ï¼š

| Shell | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|-------|------|----------|
| `/bin/bash` | é»˜è®¤ã€å…¼å®¹æ€§å¥½ | ğŸŸ¢ ä¸€èˆ¬ç”¨æˆ·ã€è„šæœ¬ç¼–å†™ |
| `/bin/zsh` | åŠŸèƒ½å¼ºå¤§ã€å¯å®šåˆ¶ | ğŸ”¥ å¼€å‘è€…ã€é«˜çº§ç”¨æˆ· |
| `/usr/bin/fish` | æ™ºèƒ½æç¤ºã€ç°ä»£åŒ– | âœ¨ æ³¨é‡ä½“éªŒçš„ç”¨æˆ· |
| `/sbin/nologin` | ç¦æ­¢ç™»å½• | ğŸ” æœåŠ¡è´¦æˆ·ã€å®‰å…¨éœ€è¦ |

**ğŸš¨ Shellä¿®æ”¹æ³¨æ„äº‹é¡¹**ï¼š
- ç¡®ä¿**ç›®æ ‡Shellå·²å®‰è£…**
- **nologin**ä¼šé˜»æ­¢ç”¨æˆ·äº¤äº’ç™»å½•ï¼Œä½†ä¸å½±å“ç¨‹åºè°ƒç”¨
- ä¿®æ”¹åç”¨æˆ·éœ€è¦**é‡æ–°ç™»å½•**æ‰èƒ½ç”Ÿæ•ˆ

---

## 5. ğŸ” ç”¨æˆ·çŠ¶æ€æ§åˆ¶


### 5.1 ç”¨æˆ·é”å®šæœºåˆ¶(-L)


**ç”¨é€”**ï¼š**ä¸´æ—¶ç¦ç”¨**ç”¨æˆ·è´¦æˆ·ï¼Œé˜²æ­¢ç”¨æˆ·ç™»å½•ä½†ä¿ç•™è´¦æˆ·æ•°æ®ã€‚

```bash
# é”å®šç”¨æˆ·è´¦æˆ·
usermod -L xiaoming

# æŸ¥çœ‹é”å®šçŠ¶æ€ï¼ˆå¯†ç å­—æ®µå‰ä¼šå‡ºç°!ï¼‰
grep xiaoming /etc/shadow
# è¾“å‡ºç±»ä¼¼ï¼šxiaoming:!$6$randomsalt$hashedpassword:::::::
```

**ğŸ’¡ é”å®šçš„æœ¬è´¨**ï¼š
```
é”å®šåŸç†ï¼š
åœ¨ç”¨æˆ·çš„åŠ å¯†å¯†ç å‰æ·»åŠ  "!" å­—ç¬¦
è¿™æ ·å³ä½¿ç”¨æˆ·è¾“å…¥æ­£ç¡®å¯†ç ï¼Œç³»ç»Ÿä¹Ÿæ— æ³•éªŒè¯é€šè¿‡

é”å®šå‰ï¼šxiaoming:$6$salt$password:::::::
é”å®šåï¼šxiaoming:!$6$salt$password:::::::
```

### 5.2 ç”¨æˆ·è§£é”æœºåˆ¶(-U)


**ç”¨é€”**ï¼š**æ¢å¤è¢«é”å®šçš„ç”¨æˆ·**ï¼Œé‡æ–°å…è®¸ç™»å½•ã€‚

```bash
# è§£é”ç”¨æˆ·è´¦æˆ·
usermod -U xiaoming

# éªŒè¯è§£é”ï¼ˆå¯†ç å­—æ®µå‰çš„!å·²åˆ é™¤ï¼‰
grep xiaoming /etc/shadow
# è¾“å‡ºï¼šxiaoming:$6$randomsalt$hashedpassword:::::::
```

### 5.3 è´¦æˆ·æœ‰æ•ˆæœŸç®¡ç†(-e)


**ç”¨é€”**ï¼šè®¾ç½®ç”¨æˆ·è´¦æˆ·çš„**åˆ°æœŸæ—¶é—´**ï¼Œåˆ°æœŸåè‡ªåŠ¨ç¦ç”¨ã€‚

```bash
# è®¾ç½®è´¦æˆ·2024å¹´12æœˆ31æ—¥åˆ°æœŸ
usermod -e 2024-12-31 xiaoming

# è®¾ç½®è´¦æˆ·æ°¸ä¸è¿‡æœŸ
usermod -e "" xiaoming

# æŸ¥çœ‹è´¦æˆ·æœ‰æ•ˆæœŸ
chage -l xiaoming
```

**ğŸ” æŸ¥çœ‹ç”¨æˆ·çŠ¶æ€çš„æ–¹æ³•**ï¼š

```bash
# æ–¹æ³•1ï¼šæ£€æŸ¥è´¦æˆ·é”å®šçŠ¶æ€
passwd -S xiaoming
# è¾“å‡ºï¼šxiaoming PS 2024-01-15 0 99999 7 -1 (Password set, SHA512 crypt)
# æˆ–ï¼šxiaoming LK 2024-01-15 0 99999 7 -1 (Password locked)

# æ–¹æ³•2ï¼šæŸ¥çœ‹è¯¦ç»†è´¦æˆ·ä¿¡æ¯
chage -l xiaoming

# æ–¹æ³•3ï¼šæ£€æŸ¥shadowæ–‡ä»¶
grep xiaoming /etc/shadow
```

---

## 6. âš™ï¸ é«˜çº§å‚æ•°ä¸æ³¨æ„äº‹é¡¹


### 6.1 ç»„åˆå‚æ•°ä½¿ç”¨


**usermodæœ€å¼ºå¤§çš„åœ°æ–¹**ï¼šå¯ä»¥**ä¸€æ¬¡ä¿®æ”¹å¤šä¸ªå±æ€§**ï¼Œæé«˜æ“ä½œæ•ˆç‡ã€‚

```bash
# åŒæ—¶ä¿®æ”¹å¤šä¸ªå±æ€§
usermod -c "å¼ ä¸‰,äº§å“ç»ç†" -G wheel,sudo -s /bin/zsh -d /data/users/zhangsan -m zhangsan

# è¿™æ¡å‘½ä»¤åšäº†ä»€ä¹ˆï¼š
# -cï¼šæ·»åŠ æ³¨é‡Šä¿¡æ¯
# -Gï¼šè®¾ç½®é™„åŠ ç»„  
# -sï¼šä¿®æ”¹Shell
# -d -mï¼šè¿ç§»ä¸»ç›®å½•
```

### 6.2 ç”¨æˆ·ä¿®æ”¹çš„æƒé™è¦æ±‚


**ğŸ” æƒé™è¯´æ˜**ï¼š
- **å¿…é¡»ç”¨rootè´¦æˆ·**æˆ–æœ‰sudoæƒé™
- **ä¸èƒ½ä¿®æ”¹æ­£åœ¨ç™»å½•çš„ç”¨æˆ·**
- **ç³»ç»Ÿç”¨æˆ·**ï¼ˆUID < 1000ï¼‰éœ€è°¨æ…ä¿®æ”¹

```bash
# æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨çº¿
who | grep xiaoming

# æ£€æŸ¥ç”¨æˆ·è¿›ç¨‹
ps -u xiaoming

# å®‰å…¨çš„ä¿®æ”¹æµç¨‹
sudo usermod -L xiaoming  # å…ˆé”å®š
sudo usermod [å…¶ä»–å‚æ•°] xiaoming  # å†ä¿®æ”¹  
sudo usermod -U xiaoming  # æœ€åè§£é”
```

### 6.3 å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ


**âŒ é”™è¯¯1ï¼šç”¨æˆ·æ­£åœ¨ç™»å½•æ—¶ä¿®æ”¹**
```bash
usermod: user xiaoming is currently used by process 1234
```
**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥çœ‹ç”¨æˆ·è¿›ç¨‹
ps -u xiaoming
# ç­‰å¾…ç”¨æˆ·é€€å‡ºï¼Œæˆ–å¼ºåˆ¶è¸¢å‡º
pkill -KILL -u xiaoming
```

**âŒ é”™è¯¯2ï¼šç›®æ ‡UIDå·²å­˜åœ¨**
```bash
usermod: UID 1500 is not unique
```
**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥UIDä½¿ç”¨æƒ…å†µ
id 1500
# é€‰æ‹©å…¶ä»–æœªä½¿ç”¨çš„UID
usermod -u 1600 xiaoming
```

**âŒ é”™è¯¯3ï¼šç»„ä¸å­˜åœ¨**
```bash
usermod: group 'nonexistent' does not exist
```
**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å…ˆåˆ›å»ºç»„
groupadd nonexistent
# å†ä¿®æ”¹ç”¨æˆ·
usermod -G nonexistent xiaoming
```

---

## 7. ğŸ¯ å®é™…åº”ç”¨åœºæ™¯


### 7.1 å‘˜å·¥å…¥èŒåœºæ™¯


**åœºæ™¯**ï¼šæ–°å‘˜å·¥å…¥èŒï¼Œéœ€è¦é…ç½®å¼€å‘ç¯å¢ƒæƒé™ã€‚

```bash
# å‡è®¾å·²ç”¨useraddåˆ›å»ºäº†åŸºç¡€è´¦æˆ·ï¼šnewdev

# 1. å®Œå–„ç”¨æˆ·ä¿¡æ¯
usermod -c "æå››,å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ,15812345678" newdev

# 2. åŠ å…¥å¼€å‘ç›¸å…³ç»„
usermod -aG developers,docker,sudo newdev

# 3. è®¾ç½®ç°ä»£åŒ–shell
usermod -s /bin/zsh newdev

# 4. è¿ç§»åˆ°ç»Ÿä¸€çš„å¼€å‘ç›®å½•
usermod -d /data/developers/newdev -m newdev
```

### 7.2 æƒé™è°ƒæ•´åœºæ™¯


**åœºæ™¯**ï¼šå‘˜å·¥è½¬å²—ï¼Œéœ€è¦è°ƒæ•´ç³»ç»Ÿæƒé™ã€‚

```bash
# ä»å¼€å‘è½¬åˆ°è¿ç»´
# 1. ç§»é™¤å¼€å‘ç»„æƒé™
usermod -G ops,sudo,docker xiaoming

# 2. æ›´æ–°ç”¨æˆ·ä¿¡æ¯
usermod -c "å°æ˜,è¿ç»´å·¥ç¨‹å¸ˆ,13812345678" xiaoming

# 3. å¯èƒ½éœ€è¦è¿ç§»å·¥ä½œç›®å½•
usermod -d /data/ops/xiaoming -m xiaoming
```

### 7.3 å®‰å…¨ç®¡ç†åœºæ™¯


**åœºæ™¯**ï¼šå‘ç°å®‰å…¨é—®é¢˜ï¼Œéœ€è¦ä¸´æ—¶é™åˆ¶ç”¨æˆ·è®¿é—®ã€‚

```bash
# 1. ç«‹å³é”å®šå¯ç–‘ç”¨æˆ·
usermod -L suspicious_user

# 2. ç¦æ­¢shellç™»å½•ï¼ˆä½†ä¿ç•™æœåŠ¡åŠŸèƒ½ï¼‰
usermod -s /sbin/nologin suspicious_user

# 3. è®¾ç½®è´¦æˆ·è¿‘æœŸè¿‡æœŸ
usermod -e 2024-02-01 suspicious_user

# 4. è°ƒæŸ¥å®Œæ¯•åæ¢å¤
usermod -U -s /bin/bash -e "" suspicious_user
```

### 7.4 æ‰¹é‡ç”¨æˆ·ç®¡ç†


**åœºæ™¯**ï¼šéœ€è¦å¯¹ä¸€æ‰¹ç”¨æˆ·è¿›è¡Œç»Ÿä¸€è°ƒæ•´ã€‚

```bash
# æ‰¹é‡ä¿®æ”¹å®ä¹ ç”Ÿè´¦æˆ·æœ‰æ•ˆæœŸ
for user in intern1 intern2 intern3; do
    usermod -e 2024-06-30 $user
    echo "è®¾ç½®ç”¨æˆ· $user è´¦æˆ·æœ‰æ•ˆæœŸåˆ° 2024-06-30"
done

# æ‰¹é‡åŠ å…¥åŸ¹è®­ç»„
for user in $(cat trainee_list.txt); do
    usermod -aG training $user  
done
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ usermodæœ¬è´¨ï¼šä¿®æ”¹å·²å­˜åœ¨ç”¨æˆ·çš„å„ç§å±æ€§
ğŸ”¸ æƒé™è¦æ±‚ï¼šå¿…é¡»rootæƒé™ï¼Œç”¨æˆ·ä¸èƒ½åœ¨çº¿
ğŸ”¸ å³æ—¶ç”Ÿæ•ˆï¼šä¿®æ”¹åç«‹å³ç”Ÿæ•ˆï¼ˆéƒ¨åˆ†éœ€é‡æ–°ç™»å½•ï¼‰
ğŸ”¸ å®‰å…¨ç¬¬ä¸€ï¼šé‡è¦ä¿®æ”¹å‰å…ˆå¤‡ä»½ç”¨æˆ·ä¿¡æ¯
ğŸ”¸ ç»„åˆä½¿ç”¨ï¼šä¸€æ¡å‘½ä»¤å¯åŒæ—¶ä¿®æ”¹å¤šä¸ªå±æ€§
```

### 8.2 å…³é”®å‚æ•°è®°å¿†æ³•


**ğŸ§  è®°å¿†å£è¯€**ï¼š
```
cæ˜¯commentæ³¨é‡Šï¼Œdæ˜¯directoryç›®å½•
gæ˜¯groupä¸»ç»„ï¼ŒGæ˜¯Groupså¤šä¸ªç»„
sæ˜¯shellå‘½ä»¤è¡Œï¼Œuæ˜¯uidç”¨æˆ·å·
læ˜¯loginç™»å½•åï¼ŒLæ˜¯Lockæ¥é”å®š
Uæ˜¯Unlockè§£é”ï¼Œeæ˜¯expireè¿‡æœŸæ—¶é—´
```

### 8.3 æ“ä½œå®‰å…¨æ£€æŸ¥æ¸…å•


**ğŸ“‹ ä¿®æ”¹å‰æ£€æŸ¥**ï¼š
- [ ] ç¡®è®¤ç”¨æˆ·æœªç™»å½•ï¼š`who | grep ç”¨æˆ·å`
- [ ] å¤‡ä»½ç”¨æˆ·ä¿¡æ¯ï¼š`grep ç”¨æˆ·å /etc/passwd /etc/shadow /etc/group`
- [ ] ç¡®è®¤ä¿®æ”¹æƒé™ï¼š`sudo -l` æˆ– `id` æ£€æŸ¥æƒé™
- [ ] éªŒè¯å‚æ•°æ­£ç¡®ï¼šç»„æ˜¯å¦å­˜åœ¨ã€è·¯å¾„æ˜¯å¦æœ‰æ•ˆ

**ğŸ“‹ ä¿®æ”¹åéªŒè¯**ï¼š
- [ ] æ£€æŸ¥ç”¨æˆ·ä¿¡æ¯ï¼š`id ç”¨æˆ·å` å’Œ `groups ç”¨æˆ·å`
- [ ] æµ‹è¯•ç”¨æˆ·ç™»å½•ï¼š`su - ç”¨æˆ·å`
- [ ] éªŒè¯æ–‡ä»¶æƒé™ï¼š`ls -la /home/ç”¨æˆ·å`
- [ ] ç¡®è®¤æœåŠ¡æ­£å¸¸ï¼šæ£€æŸ¥ç”¨æˆ·ç›¸å…³æœåŠ¡æ˜¯å¦å—å½±å“

### 8.4 å¸¸ç”¨å‘½ä»¤ç»„åˆ


**ğŸš€ å¿«é€Ÿä¸Šæ‰‹å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹ç”¨æˆ·å®Œæ•´ä¿¡æ¯
id ç”¨æˆ·å && groups ç”¨æˆ·å && chage -l ç”¨æˆ·å

# å®‰å…¨ä¿®æ”¹ç”¨æˆ·ï¼ˆé”å®šâ†’ä¿®æ”¹â†’è§£é”ï¼‰
usermod -L ç”¨æˆ·å
usermod [å‚æ•°] ç”¨æˆ·å  
usermod -U ç”¨æˆ·å

# å‘˜å·¥ä¿¡æ¯æ ‡å‡†åŒ–è®¾ç½®
usermod -c "å§“å,éƒ¨é—¨,ç”µè¯" -G å¸¸ç”¨ç»„1,å¸¸ç”¨ç»„2 -s /bin/bash ç”¨æˆ·å
```

### 8.5 å®é™…åº”ç”¨ä»·å€¼


**ğŸ’¼ ç³»ç»Ÿç®¡ç†å‘˜å¿…å¤‡æŠ€èƒ½**ï¼š
- **ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šå…¥èŒã€è°ƒå²—ã€ç¦»èŒçš„è´¦æˆ·å¤„ç†
- **æƒé™ç²¾ç»†åŒ–æ§åˆ¶**ï¼šåŸºäºä¸šåŠ¡éœ€æ±‚åˆ†é…æœ€å°å¿…è¦æƒé™
- **å®‰å…¨äº‹ä»¶å“åº”**ï¼šå¿«é€Ÿé”å®š/è§£é”å¯ç–‘è´¦æˆ·
- **æ‰¹é‡è¿ç»´æ•ˆç‡**ï¼šè„šæœ¬åŒ–å¤„ç†å¤§é‡ç”¨æˆ·è°ƒæ•´

**ğŸ¯ æŒæ¡é‡ç‚¹**ï¼š
- usermodæ˜¯ç”¨æˆ·ç®¡ç†çš„**æ ¸å¿ƒå‘½ä»¤**ä¹‹ä¸€
- ç†è§£**ä¸»ç»„ä¸é™„åŠ ç»„**çš„åŒºåˆ«å’Œä½œç”¨
- ç†Ÿç»ƒä½¿ç”¨**ç»„åˆå‚æ•°**æé«˜æ“ä½œæ•ˆç‡
- å»ºç«‹**å®‰å…¨æ„è¯†**ï¼Œé‡è¦æ“ä½œå‰åéƒ½è¦éªŒè¯

**ğŸ’¡ å…³é”®ç†è§£**ï¼š
usermodä¸æ˜¯åˆ›å»ºç”¨æˆ·ï¼Œè€Œæ˜¯**è°ƒæ•´å·²æœ‰ç”¨æˆ·**çš„å„ç§å±æ€§ã€‚å°±åƒè£…ä¿®æˆ¿å­ï¼Œæˆ¿å­å·²ç»å»ºå¥½äº†ï¼Œç°åœ¨è¦æ”¹æ”¹æ ¼å±€ã€æ¢æ¢å®¶å…·ï¼Œè®©å®ƒæ›´ç¬¦åˆå½“å‰çš„éœ€è¦ã€‚æŒæ¡å¥½usermodï¼Œä½ å°±èƒ½çµæ´»ç®¡ç†Linuxç³»ç»Ÿä¸­çš„ç”¨æˆ·è´¦æˆ·ï¼Œè¿™æ˜¯ç³»ç»Ÿç®¡ç†å‘˜çš„åŸºæœ¬åŠŸã€‚

---

ğŸ¯ **ä¸€åˆ†é’ŸæŒæ¡usermod**ï¼š
1. **ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯**ï¼š`usermod -c "æ³¨é‡Š"`
2. **è°ƒæ•´ç”¨æˆ·ç»„**ï¼š`usermod -aG ç»„å` ï¼ˆè¿½åŠ ç»„ï¼‰
3. **æ›´æ¢Shell**ï¼š`usermod -s /bin/zsh`
4. **é”å®šè§£é”**ï¼š`usermod -L`ï¼ˆé”å®šï¼‰ã€`usermod -U`ï¼ˆè§£é”ï¼‰
5. **è¿ç§»ä¸»ç›®å½•**ï¼š`usermod -d æ–°è·¯å¾„ -m`

è®°ä½ï¼š**usermodæ˜¯æ”¹ç”¨æˆ·ï¼Œuseraddæ˜¯å»ºç”¨æˆ·ï¼Œuserdelæ˜¯åˆ ç”¨æˆ·ï¼**