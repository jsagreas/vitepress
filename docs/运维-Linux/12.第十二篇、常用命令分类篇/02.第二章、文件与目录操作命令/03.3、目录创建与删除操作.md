---
title: 3、目录创建与删除操作
---
## 📚 目录

1. [目录操作基础概念](#1-目录操作基础概念)
2. [mkdir创建目录](#2-mkdir创建目录)
3. [rmdir删除目录](#3-rmdir删除目录)
4. [目录权限与umask](#4-目录权限与umask)
5. [目录命名规范](#5-目录命名规范)
6. [实用技巧与最佳实践](#6-实用技巧与最佳实践)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 📁 目录操作基础概念


### 1.1 什么是目录

**简单理解**：目录就是文件夹，用来组织和存放文件的容器

```
现实中的文件夹：           Linux中的目录：
     📁项目资料                /home/user/
    ┌─────────────┐           ┌─────────────┐
    │ 📄文档.txt  │           │ document.txt│
    │ 🖼️图片.jpg  │    ←→     │ image.jpg   │
    │ 💻代码.py   │           │ script.py   │
    └─────────────┘           └─────────────┘
```

### 1.2 目录的作用

**核心功能**：
- 🗂️ **组织文件** - 按用途分类存放文件
- 🔍 **便于查找** - 通过路径快速定位文件
- 🛡️ **权限控制** - 控制谁能访问目录内容
- 💾 **空间管理** - 合理利用磁盘空间

### 1.3 目录结构基础

**Linux目录树结构**：
```
/                    ← 根目录（所有目录的起点）
├── home/            ← 用户家目录
│   ├── user1/       ← 用户1的个人目录
│   └── user2/       ← 用户2的个人目录
├── etc/             ← 配置文件目录
└── tmp/             ← 临时文件目录
```

---

## 2. 🔧 mkdir创建目录


### 2.1 基本用法 - 创建单个目录

**语法格式**：`mkdir 目录名`

**最简单的创建**：
```bash
mkdir mydir          # 在当前位置创建名为mydir的目录
mkdir /tmp/test      # 在/tmp下创建test目录
```

💡 **理解要点**：
- `mkdir`是"make directory"的缩写，意思是"制作目录"
- 就像用手工制作一个文件夹一样简单直接

### 2.2 递归创建 - mkdir -p 的强大功能

**什么是递归创建**：一次性创建多层嵌套的目录结构

```bash
# 传统方式（麻烦）
mkdir project
mkdir project/src
mkdir project/src/components

# 递归方式（一步到位）
mkdir -p project/src/components
```

**-p 参数的含义**：
- **p = parents**（父级目录）
- **作用**：如果父目录不存在，自动创建
- **好处**：避免"No such file or directory"错误

**实用场景示例**：
```bash
mkdir -p ~/workspace/web-project/src/assets/images
mkdir -p /var/log/myapp/2024/01
mkdir -p backup/database/{2024,2025}/{01..12}
```

### 2.3 设置目录权限 - mkdir -m

**权限设置的重要性**：创建目录时就设定合适的访问权限

```bash
mkdir -m 755 public_dir    # 创建权限为755的目录
mkdir -m 700 private_dir   # 创建权限为700的私有目录
mkdir -m 644 readonly_dir  # 创建只读目录（不推荐）
```

**权限数字含义**：
```
755 = rwxr-xr-x  ← 所有者可读写执行，其他人可读执行
700 = rwx------  ← 仅所有者可读写执行
644 = rw-r--r--  ← 所有者可读写，其他人只读（目录不推荐）
```

⚠️ **重要提醒**：目录必须有执行权限才能进入，所以目录权限通常是奇数（如755、700、711）

### 2.4 批量创建技巧

**使用大括号展开**：
```bash
mkdir -p project/{src,test,docs}/{js,css,img}
```

**展开后实际创建的目录**：
```
project/
├── src/
│   ├── js/
│   ├── css/
│   └── img/
├── test/
│   ├── js/
│   ├── css/
│   └── img/
└── docs/
    ├── js/
    ├── css/
    └── img/
```

**数字序列创建**：
```bash
mkdir -p logs/2024/{01..12}     # 创建2024年1-12月的日志目录
mkdir -p backup/day{01..31}     # 创建day01到day31的备份目录
```

---

## 3. 🗑️ rmdir删除目录


### 3.1 基本用法 - 删除空目录

**语法格式**：`rmdir 目录名`

```bash
rmdir empty_dir      # 删除空目录
rmdir /tmp/test      # 删除/tmp下的test空目录
```

🔍 **重要限制**：`rmdir`只能删除**空目录**

**如果目录不为空会怎样**：
```bash
rmdir nonempty_dir
# 错误信息：rmdir: failed to remove 'nonempty_dir': Directory not empty
```

### 3.2 递归删除空目录 - rmdir -p

**-p参数的作用**：删除目录及其空的父目录

```bash
# 目录结构
parent/child/grandchild/  （都是空目录）

rmdir -p parent/child/grandchild
# 结果：三个目录都被删除（因为删除后父目录也变空了）
```

**使用场景**：清理临时创建的深层目录结构

### 3.3 rmdir的局限性与替代方案

**rmdir的问题**：只能删除空目录，实际工作中很少用

| 命令 | 能删除空目录 | 能删除非空目录 | 常用程度 |
|------|-------------|---------------|----------|
| `rmdir` | ✅ | ❌ | 🔴 很少用 |
| `rm -r` | ✅ | ✅ | 🟢 常用 |
| `rm -rf` | ✅ | ✅ | 🟢 最常用 |

**实际工作中的选择**：
```bash
# 不确定目录是否为空时，直接用rm -r
rm -r unwanted_dir

# 强制删除（不询问，不报错）
rm -rf unwanted_dir
```

---

## 4. 🔒 目录权限与umask


### 4.1 什么是umask

**通俗解释**：umask就像一个"权限过滤器"，决定新建文件和目录的默认权限

```
创建过程：
最大权限 → 减去umask → 实际权限

目录最大权限：777 (rwxrwxrwx)
假设umask：022
实际权限：755 (rwxr-xr-x)
```

### 4.2 umask的工作原理

**计算方法**：
```
目录默认权限 = 777 - umask

示例：
umask = 022
目录权限 = 777 - 022 = 755

umask = 002  
目录权限 = 777 - 002 = 775
```

**查看和设置umask**：
```bash
umask           # 查看当前umask值
umask 002       # 设置umask为002
umask -S        # 以符号形式显示umask
```

### 4.3 常见umask值及其含义

| umask | 目录权限 | 权限描述 | 适用场景 |
|-------|----------|----------|----------|
| `022` | `755` | 所有者全权限，其他人只读执行 | 🔴 **个人用户默认** |
| `002` | `775` | 所有者和组全权限，其他人只读执行 | 🔵 **团队协作** |
| `077` | `700` | 仅所有者有权限 | 🟡 **高安全要求** |

### 4.4 mkdir -m 与 umask 的关系

**优先级说明**：`mkdir -m`会覆盖umask设置

```bash
umask 022                    # 设置umask为022
mkdir normal_dir             # 权限：755（受umask影响）
mkdir -m 700 secure_dir      # 权限：700（忽略umask）
```

---

## 5. 📝 目录命名规范


### 5.1 Linux目录命名规则

**基本规则**：
- ✅ **区分大小写**：`Dir`和`dir`是不同的目录
- ✅ **长度限制**：单个目录名最长255个字符
- ✅ **路径限制**：完整路径最长4096个字符
- ❌ **不能包含**：空字符(null)和斜杠(/)

### 5.2 推荐的命名习惯

**良好的命名示例**：
```bash
# 使用有意义的名称
mkdir projects
mkdir backup_2024
mkdir web_assets

# 使用下划线或短横线分隔
mkdir user_data
mkdir log-files
mkdir temp-storage
```

**避免的命名方式**：
```bash
# ❌ 避免使用的字符（虽然技术上可行）
mkdir "dir with spaces"     # 空格需要引号，使用不便
mkdir 'dir$with#special'    # 特殊字符容易引起问题
mkdir .hidden_but_confusing # 隐藏目录容易被忘记
```

### 5.3 目录命名最佳实践

**推荐做法**：
```
✅ DO（推荐）：
- 使用小写字母
- 用下划线或短横线替代空格
- 名称要有意义
- 保持简洁明了

❌ DON'T（避免）：
- 使用空格和特殊字符
- 名称过长或无意义
- 仅用数字命名
- 与系统目录同名
```

---

## 6. 💡 实用技巧与最佳实践


### 6.1 批量创建项目结构

**Web项目结构一键创建**：
```bash
mkdir -p myproject/{src/{js,css,img,components},dist,docs,test}
```

**创建的结构**：
```
myproject/
├── src/
│   ├── js/
│   ├── css/
│   ├── img/
│   └── components/
├── dist/
├── docs/
└── test/
```

### 6.2 安全删除技巧

**删除前确认**：
```bash
# 1. 先查看目录内容
ls -la target_dir

# 2. 确认无重要文件后删除
rmdir target_dir        # 仅删除空目录
rm -r target_dir        # 删除目录及内容（有确认）
rm -rf target_dir       # 强制删除（无确认，慎用！）
```

⚠️ **危险操作警告**：
```bash
# 🚨 极度危险，永远不要执行！
rm -rf /           # 会删除整个系统
rm -rf /*          # 同样会删除整个系统
```

### 6.3 权限设置策略

**不同场景的权限建议**：

| 用途 | 权限 | 命令示例 | 说明 |
|------|------|----------|------|
| **个人文档** | `700` | `mkdir -m 700 private_docs` | 仅自己访问 |
| **共享资源** | `755` | `mkdir -m 755 shared_files` | 其他人可读取 |
| **团队协作** | `775` | `mkdir -m 775 team_project` | 同组成员可写入 |
| **公共下载** | `755` | `mkdir -m 755 public_downloads` | 所有人可下载 |

### 6.4 目录操作组合技巧

**创建并进入目录**：
```bash
mkdir mydir && cd mydir     # 创建后立即进入

# 封装为函数（可添加到~/.bashrc）
mkcd() { mkdir -p "$1" && cd "$1"; }
mkcd new_project            # 使用自定义函数
```

**备份目录结构**：
```bash
# 复制目录结构（不复制文件内容）
find source_dir -type d -exec mkdir -p backup/{} \;
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的命令

```
🔧 mkdir              # 创建单个目录
🔧 mkdir -p           # 递归创建多级目录
🔧 mkdir -m           # 创建时设置权限
🔧 rmdir              # 删除空目录
🔧 rmdir -p           # 递归删除空目录层级
```

### 7.2 关键概念理解

**目录权限的重要性**：
- 目录需要**执行权限**才能进入
- **umask**影响新建目录的默认权限
- `mkdir -m`可以覆盖umask设置

**递归操作的威力**：
- `-p`参数让目录创建变得简单
- 批量操作大大提高工作效率
- 目录展开`{}`语法功能强大

### 7.3 实际工作建议

**创建目录时的思考**：
- 🤔 **权限**：这个目录需要什么权限？
- 🤔 **结构**：是否需要同时创建子目录？
- 🤔 **命名**：名称是否清晰易懂？
- 🤔 **位置**：创建在合适的位置了吗？

**删除目录时的谨慎**：
- ⚠️ 删除前一定要确认内容
- ⚠️ 重要目录建议先备份
- ⚠️ 慎用`rm -rf`，特别是在根目录附近

### 7.4 记忆口诀

```
📁 mkdir创目录，-p递归建层级
🗑️ rmdir删空目录，有内容要清理
🔒 权限用-m设，umask是默认值
📝 命名要规范，避免特殊字符惹麻烦
```

### 7.5 进阶学习方向

- **高级权限**：ACL访问控制列表
- **目录监控**：inotify目录变化监控
- **自动化脚本**：批量目录管理脚本
- **性能优化**：大量目录的创建和管理技巧

**核心记忆**：
- 目录操作要谨慎，权限设置要合理
- 递归创建很便捷，批量操作效率高
- 删除之前先确认，重要数据要备份