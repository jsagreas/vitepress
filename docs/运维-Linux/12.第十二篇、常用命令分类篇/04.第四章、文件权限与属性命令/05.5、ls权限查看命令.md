---
title: 5、ls权限查看命令
---
## 📚 目录

1. [ls长格式权限显示基础](#1-ls长格式权限显示基础)
2. [权限字符串完全解读](#2-权限字符串完全解读)
3. [文件类型标识符详解](#3-文件类型标识符详解)
4. [特殊权限位显示](#4-特殊权限位显示)
5. [ls颜色显示与权限](#5-ls颜色显示与权限)
6. [权限数值显示方法](#6-权限数值显示方法)
7. [批量权限检查技巧](#7-批量权限检查技巧)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 📋 ls长格式权限显示基础


### 1.1 什么是ls -l命令


**🔸 基本概念**
`ls -l`是Linux系统中查看文件详细信息最常用的命令，其中**最重要的功能就是显示文件权限**。

```bash
ls -l
```

这个命令会显示每个文件和目录的完整权限信息，包括谁可以读、写、执行这些文件。

### 1.2 长格式输出详解


**🔧 标准输出格式**
```
-rw-r--r-- 1 user group 1024 Oct 15 10:30 example.txt
drwxr-xr-x 2 user group 4096 Oct 15 10:25 documents/
```

每一行包含以下信息：

```
权限字符串    文件类型与权限信息
    ↓
-rw-r--r--   1   user   group   1024   Oct 15 10:30   example.txt
    ↑        ↑     ↑      ↑       ↑         ↑            ↑
   权限    硬链接  所有者  所属组  文件大小   修改时间     文件名
```

**💡 核心理解**
- **第一列**：最重要的权限信息，告诉你谁能对这个文件做什么
- **第二列**：硬链接数量（暂时不用深究）
- **第三列**：文件的主人是谁
- **第四列**：文件属于哪个用户组
- **其他列**：文件大小、修改时间、文件名

---

## 2. 🔍 权限字符串完全解读


### 2.1 权限字符串结构


**📊 10位字符的含义**
```
drwxrwxrwx
↑└─ 3位 ─┘└─ 3位 ─┘└─ 3位 ─┘
│    所有者   所属组    其他人
│    权限     权限      权限
│
文件类型
```

**🔸 分解理解**
每个权限字符串总共**10个字符**，分为4个部分：

1. **第1位**：文件类型（d/l/-等）
2. **第2-4位**：所有者权限（user权限）
3. **第5-7位**：所属组权限（group权限）  
4. **第8-10位**：其他人权限（others权限）

### 2.2 基础权限字符含义


**⚡ 三种基本权限**

| 权限字符 | 含义 | 对文件的作用 | 对目录的作用 |
|---------|------|-------------|-------------|
| **r** | 读权限 | `可以查看文件内容` | `可以列出目录中的文件` |
| **w** | 写权限 | `可以修改文件内容` | `可以在目录中创建/删除文件` |
| **x** | 执行权限 | `可以运行这个程序` | `可以进入这个目录` |
| **-** | 无权限 | `不允许对应操作` | `不允许对应操作` |

**🎯 实例解析**
```
-rw-r--r--  普通文件
 rw-        所有者可读写，不能执行
    r--     所属组只能读
       r--  其他人只能读

drwxr-xr-x  目录文件  
 rwx        所有者可读写进入
    r-x     所属组可读和进入，不能创建文件
       r-x  其他人可读和进入，不能创建文件
```

### 2.3 权限组合的实际意义


**🔧 常见权限组合**

```
文件权限组合：
-rw-------  只有所有者能读写（私人文件）
-rw-r--r--  所有者读写，其他人只读（共享文档）
-rwxr-xr-x  所有者可执行，其他人只能读和执行（程序文件）
-rwx------  只有所有者能执行的私人脚本

目录权限组合：
drwx------  私人目录，只有所有者能进入
drwxr-xr-x  公共目录，所有人能查看和进入
drwxrwxr-x  团队目录，组内成员可以管理文件
```

---

## 3. 📁 文件类型标识符详解


### 3.1 第一位字符的含义


**🔸 文件类型标识**

权限字符串的**第一位**不是权限，而是告诉你这是什么类型的文件。

| 标识符 | 类型名称 | 含义说明 | 举例 |
|--------|----------|----------|------|
| **-** | `普通文件` | 常规的文本、程序、数据文件 | `文档、图片、程序` |
| **d** | `目录` | 文件夹，可以包含其他文件 | `文件夹` |
| **l** | `符号链接` | 指向另一个文件的快捷方式 | `软链接文件` |
| **b** | `块设备` | 硬盘、U盘等存储设备 | `/dev/sda1` |
| **c** | `字符设备` | 键盘、打印机等输入输出设备 | `/dev/tty1` |
| **p** | `命名管道` | 进程间通信的特殊文件 | `FIFO文件` |
| **s** | `套接字` | 网络通信的特殊文件 | `socket文件` |

### 3.2 实际案例演示


**📋 实际ls -l输出示例**
```
-rw-r--r--  1 user group  1024 Oct 15 10:30 readme.txt     # 普通文件
drwxr-xr-x  2 user group  4096 Oct 15 10:25 documents/     # 目录
lrwxrwxrwx  1 user group    10 Oct 15 10:32 link -> file   # 符号链接
brw-rw----  1 root disk  8, 1 Oct 15 09:00 sda1           # 块设备
crw-rw-rw-  1 root tty   5, 0 Oct 15 09:00 tty0           # 字符设备
```

**💡 识别技巧**
- 看到`d`开头，立即知道这是目录
- 看到`l`开头，这是链接文件，后面会显示`->目标文件`
- 看到`-`开头，这就是普通文件
- 其他类型在日常使用中较少遇到

---

## 4. 🔐 特殊权限位显示


### 4.1 什么是特殊权限


除了基本的rwx权限外，Linux还有**三种特殊权限**，它们会以特殊字符显示在权限字符串中。

**🔸 三种特殊权限**
- **SUID (Set UID)**：s标记在所有者执行位
- **SGID (Set GID)**：s标记在所属组执行位  
- **Sticky Bit**：t标记在其他人执行位

### 4.2 SUID权限显示


**⚡ SUID的显示方式**

```
正常显示：-rwxr-xr-x  (所有者执行位是x)
SUID显示：-rwsr-xr-x  (所有者执行位变成s)
```

**🔧 SUID含义**
当文件有SUID权限时，**任何人执行这个程序都会临时获得文件所有者的权限**。

**实际例子：**
```bash
ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 68208 May 28 2020 /usr/bin/passwd
```

这个`passwd`命令有s标记，意味着普通用户执行时会临时获得root权限来修改密码文件。

### 4.3 SGID权限显示


**🎯 SGID的显示方式**

```
正常显示：-rwxr-xr-x  (所属组执行位是x)
SGID显示：-rwxr-sr-x  (所属组执行位变成s)
```

**对于目录的SGID：**
```bash
drwxrwsr-x 2 user staff 4096 Oct 15 10:30 shared/
```

在这个目录中创建的文件会自动属于`staff`组。

### 4.4 Sticky Bit显示


**📌 Sticky Bit的显示方式**

```
正常显示：drwxrwxrwx  (其他人执行位是x)
Sticky显示：drwxrwxrwt  (其他人执行位变成t)
```

**经典例子：/tmp目录**
```bash
ls -ld /tmp
drwxrwxrwt 12 root root 4096 Oct 15 10:30 /tmp/
```

**💡 Sticky Bit含义**
在有t标记的目录中，**只有文件的所有者才能删除自己的文件**，即使目录对所有人开放写权限。

### 4.5 特殊权限显示规律


**🔍 大小写规律**

| 情况 | 显示字符 | 含义 |
|------|----------|------|
| `有特殊权限 + 有执行权限` | **s** 或 **t** | `小写字母` |
| `有特殊权限 + 无执行权限` | **S** 或 **T** | `大写字母` |

```bash
-rwSr--r--  # SUID设置了，但所有者没有执行权限
drw-r--r-T  # Sticky设置了，但其他人没有执行权限
```

---

## 5. 🎨 ls颜色显示与权限


### 5.1 ls颜色显示基础


**🔸 颜色显示的含义**

Linux终端中的`ls`命令会用不同颜色显示不同类型和权限的文件，这是一个**视觉化的权限提示**。

```bash
ls --color=auto    # 自动颜色显示（通常是默认设置）
ls --color=never   # 不显示颜色
ls --color=always  # 强制显示颜色
```

### 5.2 常见颜色含义


**🎨 标准颜色方案**

```
文件颜色含义：
白色/黑色    普通文件
蓝色        目录
绿色        可执行文件（有x权限）
红色        压缩文件（.zip, .tar.gz等）
青色        符号链接
黄色        设备文件
紫色        图像文件
```

**实际显示效果：**
```
example.txt        # 白色 - 普通文本文件
documents/         # 蓝色 - 目录
script.sh          # 绿色 - 可执行脚本
link_file          # 青色 - 符号链接
```

### 5.3 权限相关的颜色提示


**⚡ 权限影响颜色显示**

```bash
# 查看脚本文件权限变化
-rw-r--r-- script.sh    # 白色显示（无执行权限）
chmod +x script.sh      # 添加执行权限
-rwxr-xr-x script.sh    # 绿色显示（有执行权限）
```

**🔧 特殊权限的颜色**
- **SUID文件**：通常显示为红色背景或特殊标记
- **目录链接**：青色显示，后面跟`->`指向目标

### 5.4 自定义颜色设置


**📋 环境变量LS_COLORS**

Linux通过`LS_COLORS`环境变量控制ls的颜色显示：

```bash
echo $LS_COLORS    # 查看当前颜色设置
```

不过对于新手来说，**使用默认颜色设置**就足够了，不需要自定义。

---

## 6. 🔢 权限数值显示方法


### 6.1 数字权限表示法


Linux权限除了用字母表示，还可以用**数字**表示，这叫做**八进制权限表示法**。

**🔸 基础数值对应**

| 权限 | 数值 | 含义 |
|------|------|------|
| **---** | **0** | `无任何权限` |
| **--x** | **1** | `只有执行权限` |
| **-w-** | **2** | `只有写权限` |
| **-wx** | **3** | `写+执行权限` |
| **r--** | **4** | `只有读权限` |
| **r-x** | **5** | `读+执行权限` |
| **rw-** | **6** | `读+写权限` |
| **rwx** | **7** | `所有权限` |

### 6.2 三位数权限表示


**⚡ 完整权限用三位数表示**

```
权限字符串：-rwxr-xr--
数字表示：  754

分解：
7 = rwx  (所有者权限)
5 = r-x  (所属组权限)  
4 = r--  (其他人权限)
```

**常见权限数字：**
```
755 = rwxr-xr-x  (可执行程序的标准权限)
644 = rw-r--r--  (普通文件的标准权限)
600 = rw-------  (私人文件权限)
777 = rwxrwxrwx  (所有人完全权限，谨慎使用！)
```

### 6.3 ls显示数字权限


**🔧 用stat命令显示数字权限**

虽然`ls -l`显示的是字母权限，但可以用其他命令查看数字权限：

```bash
stat -c "%a %n" filename    # 显示文件的数字权限
```

**实例：**
```bash
$ stat -c "%a %n" example.txt
644 example.txt

$ ls -l example.txt  
-rw-r--r-- 1 user group 1024 Oct 15 10:30 example.txt
```

**💡 数字权限的优势**
- **简洁明了**：用三个数字就能表示所有权限
- **设置方便**：chmod命令中直接使用数字
- **精确控制**：能精确指定每个用户组的权限

---

## 7. 🚀 批量权限检查技巧


### 7.1 基础批量查看命令


**🔸 ls -la显示隐藏文件权限**

```bash
ls -la    # 显示所有文件（包括隐藏文件）的详细权限
```

这个命令会显示：
- **普通文件和目录**
- **隐藏文件**（以`.`开头的文件）
- **特殊目录**（`.`当前目录，`..`上级目录）

**实际输出示例：**
```
drwxr-xr-x  2 user group 4096 Oct 15 10:30 .
drwxr-xr-x  3 user group 4096 Oct 15 10:25 ..
-rw-r--r--  1 user group  220 Oct 15 10:30 .bashrc
-rw-------  1 user group 1024 Oct 15 10:32 .ssh_history
-rw-r--r--  1 user group 2048 Oct 15 10:30 document.txt
drwxr-xr-x  2 user group 4096 Oct 15 10:35 photos/
```

### 7.2 递归权限检查


**⚡ 查看目录树的权限**

```bash
ls -lR            # 递归显示所有子目录的权限
ls -laR           # 递归显示包括隐藏文件的所有权限
```

**实用场景：**
当你需要检查整个项目目录的权限设置时，递归查看非常有用。

### 7.3 权限筛选技巧


**🔧 find命令配合权限检查**

虽然主要讲ls，但配合find命令能做更精确的权限批量检查：

```bash
# 查找所有可执行文件
find . -type f -perm /u+x -exec ls -l {} \;

# 查找权限为777的文件（潜在安全风险）
find . -perm 777 -exec ls -l {} \;

# 查找属于特定用户的文件
find . -user username -exec ls -l {} \;
```

### 7.4 权限统计和分析


**📊 统计不同权限的文件数量**

```bash
# 统计可执行文件数量
ls -l | grep "^-.*x" | wc -l

# 查看目录权限
ls -l | grep "^d"

# 查看符号链接
ls -l | grep "^l"
```

**🎯 实用批量检查脚本思路**

```bash
# 检查目录中是否有权限过于开放的文件
ls -la | grep "rwxrwxrwx" && echo "发现777权限文件，需要检查安全性"
```

### 7.5 权限问题排查技巧


**🐛 常见权限问题的快速定位**

```bash
# 检查为什么脚本不能执行
ls -l script.sh    # 看是否有x权限

# 检查为什么不能进入目录  
ls -ld dirname/    # 目录需要x权限才能进入

# 检查为什么不能在目录中创建文件
ls -ld dirname/    # 目录需要w权限才能创建文件
```

**📋 权限检查清单**

☐ **文件类型正确**：普通文件还是目录？  
☐ **所有者权限**：文件主人的权限是否合适？  
☐ **组权限**：同组用户的权限是否合适？  
☐ **其他人权限**：是否给了过多的公共访问权限？  
☐ **特殊权限**：是否有不必要的s或t权限？  
☐ **隐藏文件**：重要的配置文件权限是否安全？

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心概念


**🎯 ls权限查看要点**
```
🔸 ls -l：查看详细权限信息的基础命令
🔸 权限字符串：10位字符表示文件类型和三组权限
🔸 文件类型：第一位字符识别文件类型（- d l等）
🔸 三组权限：所有者、所属组、其他人各3位权限
🔸 特殊权限：s和t标记的含义和显示方式
🔸 颜色提示：不同颜色对应不同权限和文件类型
🔸 数字表示：rwx对应421，三组权限用三位数表示
🔸 批量检查：ls -la和递归查看的实用技巧
```

### 8.2 关键理解要点


**🔹 权限字符串的读取逻辑**
```
看第一位 → 确定文件类型
看2-4位 → 所有者能做什么  
看5-7位 → 同组人能做什么
看8-10位 → 其他人能做什么
看特殊字符 → 是否有s或t权限
```

**🔹 实际应用思维**
```
遇到权限问题时的思考顺序：
1. 用ls -l查看权限字符串
2. 确认自己的身份（是所有者？同组？还是其他人？）
3. 对应查看相应的权限位
4. 判断是否有需要的权限（r/w/x）
5. 如有问题，用chmod修改权限
```

### 8.3 实际使用指导


**📋 日常使用建议**

```bash
# 每天必用的命令组合
ls -la          # 查看当前目录所有文件权限
ls -l filename  # 查看特定文件权限
ls -ld dirname/ # 查看目录权限（不进入目录）
```

**⚠️ 安全注意事项**
- **777权限很危险**：给所有人完全权限，要谨慎使用
- **隐藏文件很重要**：`.bashrc`等配置文件的权限要保护好
- **可执行文件要小心**：确认文件来源再给执行权限
- **SUID权限要警惕**：s标记的文件有特殊的安全风险

**🎯 学习进阶路径**
1. **熟练读取权限**：能快速理解任何权限字符串含义
2. **掌握chmod命令**：学会修改权限（下一个知识点）
3. **理解用户组概念**：明白所有者、组、其他人的关系
4. **掌握特殊权限**：深入理解SUID、SGID、Sticky的用途

**核心记忆口诀**
```
ls -l看权限，十位字符要记清
第一位是文件类型，后面三组是权限
rwx分别读写执行，数字421来对应  
s和t是特殊权限，颜色提示很贴心
批量查看用-la，递归检查用-lR
```

### 8.4 常见错误避免


**🚨 新手容易犯的错误**

❌ **只看权限不看文件类型**：目录权限和文件权限含义不同  
❌ **忽略自己的身份**：不知道自己是所有者、组成员还是其他人  
❌ **混淆执行权限**：文件能执行≠目录能进入，但都用x表示  
❌ **忽略隐藏文件**：只用ls -l，不用ls -la  
❌ **不理解特殊权限**：看到s或t不知道什么意思

✅ **正确的权限检查方法**：
1. 先用`whoami`确认自己的用户名
2. 用`groups`确认自己属于哪些组
3. 用`ls -l`查看权限，对应自己的身份
4. 理解每一位权限字符的含义
5. 结合实际需求判断权限是否合适