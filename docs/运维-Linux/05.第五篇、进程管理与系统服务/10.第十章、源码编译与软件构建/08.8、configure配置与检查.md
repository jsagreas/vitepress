---
title: 8ã€configureé…ç½®ä¸æ£€æŸ¥
---
## ğŸ“š ç›®å½•

1. [configureè„šæœ¬åŸºç¡€æ¦‚å¿µ](#1-configureè„šæœ¬åŸºç¡€æ¦‚å¿µ)
2. [å¸¸ç”¨configureå‚æ•°é€‰é¡¹](#2-å¸¸ç”¨configureå‚æ•°é€‰é¡¹)
3. [å®‰è£…è·¯å¾„ä¸ç›®å½•é…ç½®](#3-å®‰è£…è·¯å¾„ä¸ç›®å½•é…ç½®)
4. [ç‰¹æ€§å¼€å…³æ§åˆ¶](#4-ç‰¹æ€§å¼€å…³æ§åˆ¶)
5. [ä¾èµ–åº“ç®¡ç†](#5-ä¾èµ–åº“ç®¡ç†)
6. [ç¯å¢ƒå˜é‡é…ç½®](#6-ç¯å¢ƒå˜é‡é…ç½®)
7. [é”™è¯¯è¯Šæ–­ä¸æ’æŸ¥](#7-é”™è¯¯è¯Šæ–­ä¸æ’æŸ¥)
8. [é…ç½®ç¼“å­˜ä¸ä¼˜åŒ–](#8-é…ç½®ç¼“å­˜ä¸ä¼˜åŒ–)
9. [å®æˆ˜é…ç½®ç­–ç•¥](#9-å®æˆ˜é…ç½®ç­–ç•¥)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ configureè„šæœ¬åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯configureè„šæœ¬


**ç®€å•ç†è§£**ï¼šconfigureè„šæœ¬å°±åƒè£…ä¿®å‰çš„"æˆ¿å±‹å‹˜å¯Ÿ"

```
å®é™…è£…ä¿®æµç¨‹ï¼š              è½¯ä»¶ç¼–è¯‘æµç¨‹ï¼š
æˆ¿å±‹å‹˜å¯Ÿ â†’ åˆ¶å®šæ–¹æ¡ˆ         configure â†’ ç”ŸæˆMakefile
è´­ä¹°ææ–™ â†’ å¼€å§‹è£…ä¿®         make â†’ ç¼–è¯‘å®‰è£…
éªŒæ”¶äº¤ä»˜ â†’ å…¥ä½ä½¿ç”¨         make install â†’ ç³»ç»Ÿå¯ç”¨

configureçš„ä½œç”¨ï¼šæ£€æŸ¥ä½ çš„"æˆ¿å­"(ç³»ç»Ÿ)é€‚åˆè£…ä»€ä¹ˆæ ·çš„"è£…ä¿®"(è½¯ä»¶)
```

**ğŸ”¸ configureçš„æœ¬è´¨**
```
configureè„šæœ¬ = æ™ºèƒ½æ£€æµ‹å™¨ + é…ç½®ç”Ÿæˆå™¨

æ£€æµ‹ä»€ä¹ˆï¼š
â€¢ ç³»ç»Ÿç±»å‹ï¼ˆLinux/Unix/BSDï¼‰
â€¢ ç¼–è¯‘å™¨ç‰ˆæœ¬ï¼ˆgcc/clangï¼‰
â€¢ ä¾èµ–åº“æ˜¯å¦å­˜åœ¨
â€¢ ç³»ç»ŸåŠŸèƒ½æ˜¯å¦æ”¯æŒ

ç”Ÿæˆä»€ä¹ˆï¼š
â€¢ Makefileæ–‡ä»¶ï¼ˆç¼–è¯‘è§„åˆ™ï¼‰
â€¢ config.hæ–‡ä»¶ï¼ˆç¼–è¯‘é€‰é¡¹ï¼‰
â€¢ å„ç§é…ç½®æ–‡ä»¶
```

### 1.2 configureçš„å·¥ä½œæµç¨‹


**ğŸ”„ å®Œæ•´å·¥ä½œè¿‡ç¨‹**
```
ç”¨æˆ·è¾“å…¥ï¼š./configure [é€‰é¡¹]
    â†“
ç³»ç»Ÿæ£€æµ‹ï¼šæ£€æŸ¥ç¼–è¯‘ç¯å¢ƒ
    â†“
ä¾èµ–æ£€æŸ¥ï¼šéªŒè¯å¿…éœ€çš„åº“
    â†“
é…ç½®ç”Ÿæˆï¼šåˆ›å»ºMakefile
    â†“
è¾“å‡ºæŠ¥å‘Šï¼šæ˜¾ç¤ºé…ç½®ç»“æœ
```

**ğŸ’¡ å®é™…æ‰§è¡Œç¤ºä¾‹**
```bash
# åŸºæœ¬æ‰§è¡Œ
$ ./configure
checking for gcc... gcc
checking whether the C compiler works... yes
checking for library... yes
creating Makefile... done

# é…ç½®å®Œæˆåçš„æ–‡ä»¶
$ ls
configure  Makefile  config.h  config.log  config.status
```

### 1.3 ä¸ºä»€ä¹ˆéœ€è¦configure


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜**
```
é—®é¢˜1ï¼šç³»ç»Ÿå·®å¼‚
â€¢ ä¸åŒLinuxå‘è¡Œç‰ˆçš„åº“ä½ç½®ä¸åŒ
â€¢ ä¸åŒUnixç³»ç»Ÿçš„å‘½ä»¤å·®å¼‚
â€¢ ç¡¬ä»¶æ¶æ„çš„ç¼–è¯‘é€‰é¡¹åŒºåˆ«

é—®é¢˜2ï¼šä¾èµ–ç®¡ç†  
â€¢ æŸäº›åº“å¯èƒ½æ²¡å®‰è£…
â€¢ åº“çš„ç‰ˆæœ¬å¯èƒ½ä¸å…¼å®¹
â€¢ å¤´æ–‡ä»¶è·¯å¾„å¯èƒ½ä¸æ ‡å‡†

é—®é¢˜3ï¼šåŠŸèƒ½é€‰æ‹©
â€¢ ç”¨æˆ·æƒ³è¦ä¸åŒçš„åŠŸèƒ½ç»„åˆ
â€¢ æŸäº›åŠŸèƒ½åœ¨ç‰¹å®šç³»ç»Ÿä¸æ”¯æŒ
â€¢ æ€§èƒ½ä¼˜åŒ–çš„ç¼–è¯‘é€‰é¡¹é€‰æ‹©
```

---

## 2. âš™ï¸ å¸¸ç”¨configureå‚æ•°é€‰é¡¹


### 2.1 å‚æ•°åˆ†ç±»æ¦‚è§ˆ


**ğŸ“‹ å‚æ•°ç±»å‹æ€»è§ˆ**
```
è·¯å¾„æ§åˆ¶å‚æ•°ï¼š--prefix, --bindir, --libdir
ç‰¹æ€§å¼€å…³å‚æ•°ï¼š--enable-xxx, --disable-xxx  
ä¾èµ–æ§åˆ¶å‚æ•°ï¼š--with-xxx, --without-xxx
ç¯å¢ƒè®¾ç½®å‚æ•°ï¼šCC, CFLAGS, LDFLAGS
å¸®åŠ©ä¿¡æ¯å‚æ•°ï¼š--help, --version
```

### 2.2 æŸ¥çœ‹å¯ç”¨é€‰é¡¹


**ğŸ” è·å–å¸®åŠ©ä¿¡æ¯**
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é€‰é¡¹ï¼ˆæœ€é‡è¦çš„å‘½ä»¤ï¼‰
$ ./configure --help

# è¾“å‡ºç¤ºä¾‹ï¼ˆèŠ‚é€‰ï¼‰
`configure' configures this package to adapt to many kinds of systems.

Installation directories:
  --prefix=PREFIX         install architecture-independent files in PREFIX
  --bindir=DIR           user executables [EPREFIX/bin]
  --libdir=DIR           object code libraries [EPREFIX/lib]

Optional Features:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --enable-shared         build shared libraries [default=yes]

Optional Packages:
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
```

### 2.3 å¸¸ç”¨é€šç”¨é€‰é¡¹


**â­ æœ€å¸¸ç”¨çš„é€‰é¡¹**
```bash
# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./configure --help

# æŒ‡å®šå®‰è£…è·¯å¾„ï¼ˆæœ€å¸¸ç”¨ï¼‰
./configure --prefix=/usr/local

# æŒ‡å®šç‰¹å®šç›®å½•
./configure --prefix=/opt/myapp \
           --bindir=/opt/myapp/bin \
           --libdir=/opt/myapp/lib

# å¯ç”¨è°ƒè¯•ä¿¡æ¯
./configure --enable-debug

# ç¦ç”¨æŸä¸ªåŠŸèƒ½
./configure --disable-nls  # ç¦ç”¨å›½é™…åŒ–æ”¯æŒ

# é™æ€ç¼–è¯‘
./configure --enable-static --disable-shared
```

---

## 3. ğŸ“ å®‰è£…è·¯å¾„ä¸ç›®å½•é…ç½®


### 3.1 --prefixå®‰è£…è·¯å¾„æŒ‡å®š


**ğŸ  ç†è§£prefixæ¦‚å¿µ**
```
--prefixå°±åƒé€‰æ‹©"å°åŒº"ï¼Œå…¶ä»–è·¯å¾„éƒ½æ˜¯"å°åŒºå†…çš„å…·ä½“åœ°å€"

é»˜è®¤prefix=/usr/local
ç›¸å½“äºé€‰æ‹©äº†/usr/localè¿™ä¸ª"å°åŒº"

ç„¶åï¼š
binç›®å½• = prefix + /bin = /usr/local/bin
libç›®å½• = prefix + /lib = /usr/local/lib  
includeç›®å½• = prefix + /include = /usr/local/include
```

**ğŸ’¡ å¸¸è§prefixé€‰æ‹©**
```bash
# ç³»ç»Ÿçº§å®‰è£…ï¼ˆéœ€è¦rootæƒé™ï¼‰
./configure --prefix=/usr          # ç³»ç»Ÿæ ¸å¿ƒç›®å½•
./configure --prefix=/usr/local    # æœ¬åœ°å®‰è£…ç›®å½•ï¼ˆé»˜è®¤ï¼‰

# ç”¨æˆ·çº§å®‰è£…ï¼ˆæ¨èæ–°æ‰‹ï¼‰
./configure --prefix=$HOME/.local  # ç”¨æˆ·ç›®å½•
./configure --prefix=$HOME/software/myapp  # è‡ªå®šä¹‰ç›®å½•

# ç‹¬ç«‹åº”ç”¨å®‰è£…
./configure --prefix=/opt/myapp     # ç‹¬ç«‹åº”ç”¨ç›®å½•
```

### 3.2 è¯¦ç»†ç›®å½•æ§åˆ¶


**ğŸ”§ ç²¾ç¡®æ§åˆ¶å„ä¸ªç›®å½•**
```bash
./configure \
  --prefix=/usr/local \
  --bindir=/usr/local/bin \          # å¯æ‰§è¡Œæ–‡ä»¶
  --libdir=/usr/local/lib64 \        # åº“æ–‡ä»¶ï¼ˆ64ä½ç³»ç»Ÿï¼‰
  --includedir=/usr/local/include \  # å¤´æ–‡ä»¶
  --datadir=/usr/local/share \       # æ•°æ®æ–‡ä»¶
  --mandir=/usr/local/share/man \    # æ‰‹å†Œé¡µé¢
  --sysconfdir=/etc                  # é…ç½®æ–‡ä»¶
```

**ğŸ“Š ç›®å½•ç”¨é€”è¯´æ˜**
```
ç›®å½•ç±»å‹å¯¹ç…§è¡¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ç›®å½•     â”‚   é»˜è®¤è·¯å¾„    â”‚      å­˜æ”¾å†…å®¹    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bindir      â”‚ PREFIX/bin   â”‚ å¯æ‰§è¡Œç¨‹åº      â”‚
â”‚ libdir      â”‚ PREFIX/lib   â”‚ åº“æ–‡ä»¶          â”‚
â”‚ includedir  â”‚ PREFIX/includeâ”‚ C/C++å¤´æ–‡ä»¶    â”‚
â”‚ datadir     â”‚ PREFIX/share â”‚ æ•°æ®æ–‡ä»¶        â”‚
â”‚ mandir      â”‚ PREFIX/share/manâ”‚ æ‰‹å†Œé¡µé¢    â”‚
â”‚ sysconfdir  â”‚ PREFIX/etc   â”‚ é…ç½®æ–‡ä»¶        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 è·¯å¾„é€‰æ‹©ç­–ç•¥


**ğŸ¯ ä¸åŒåœºæ™¯çš„é€‰æ‹©å»ºè®®**
```bash
# åœºæ™¯1ï¼šä¸ªäººå­¦ä¹ æµ‹è¯•
./configure --prefix=$HOME/test/myapp
# ä¼˜ç‚¹ï¼šä¸éœ€è¦rootæƒé™ï¼Œå®¹æ˜“æ¸…ç†
# é€‚åˆï¼šåˆå­¦è€…å°è¯•ç¼–è¯‘

# åœºæ™¯2ï¼šä¸ªäººæ—¥å¸¸ä½¿ç”¨
./configure --prefix=$HOME/.local
# ä¼˜ç‚¹ï¼šä¸ç³»ç»Ÿè½¯ä»¶åˆ†ç¦»ï¼Œä¾¿äºç®¡ç†
# é€‚åˆï¼šä¸ªäººä½¿ç”¨çš„å·¥å…·è½¯ä»¶

# åœºæ™¯3ï¼šç³»ç»Ÿçº§æœåŠ¡
./configure --prefix=/usr/local
# ä¼˜ç‚¹ï¼šæ ‡å‡†ä½ç½®ï¼Œå…¶ä»–ç¨‹åºå®¹æ˜“æ‰¾åˆ°
# é€‚åˆï¼šè¦ç»™å¤šç”¨æˆ·ä½¿ç”¨çš„è½¯ä»¶

# åœºæ™¯4ï¼šæœåŠ¡å™¨éƒ¨ç½²
./configure --prefix=/opt/appname
# ä¼˜ç‚¹ï¼šç‰ˆæœ¬éš”ç¦»ï¼Œä¾¿äºå‡çº§å›æ»š  
# é€‚åˆï¼šç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨æœåŠ¡
```

---

## 4. ğŸ›ï¸ ç‰¹æ€§å¼€å…³æ§åˆ¶


### 4.1 enable/disableåŸºç¡€ç”¨æ³•


**ğŸ’¡ ç†è§£enable/disable**
```
--enable-xxx  = æ‰“å¼€æŸä¸ªåŠŸèƒ½ï¼ˆåƒæ‰“å¼€ç”µç¯å¼€å…³ï¼‰
--disable-xxx = å…³é—­æŸä¸ªåŠŸèƒ½ï¼ˆåƒå…³é—­ç”µç¯å¼€å…³ï¼‰

å¾ˆå¤šåŠŸèƒ½é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œä½ å¯ä»¥é€‰æ‹©å…³é—­
æœ‰äº›åŠŸèƒ½é»˜è®¤æ˜¯å…³é—­çš„ï¼Œä½ éœ€è¦ä¸»åŠ¨å¼€å¯
```

**ğŸ”§ åŸºç¡€è¯­æ³•æ ¼å¼**
```bash
# å¯ç”¨åŠŸèƒ½
./configure --enable-åŠŸèƒ½å

# ç¦ç”¨åŠŸèƒ½  
./configure --disable-åŠŸèƒ½å

# å¯ç”¨åŠŸèƒ½å¹¶æŒ‡å®šå‚æ•°
./configure --enable-åŠŸèƒ½å=å‚æ•°å€¼

# ç¤ºä¾‹
./configure --enable-ssl              # å¯ç”¨SSLæ”¯æŒ
./configure --disable-ipv6            # ç¦ç”¨IPv6æ”¯æŒ
./configure --enable-optimization=O3  # å¯ç”¨O3çº§åˆ«ä¼˜åŒ–
```

### 4.2 å¸¸è§ç‰¹æ€§å¼€å…³


**âš¡ æ€§èƒ½ç›¸å…³å¼€å…³**
```bash
# ç¼–è¯‘ä¼˜åŒ–
./configure --enable-optimization     # å¯ç”¨ç¼–è¯‘ä¼˜åŒ–
./configure --enable-debug           # å¯ç”¨è°ƒè¯•ä¿¡æ¯ï¼ˆä¸ä¼˜åŒ–ç›¸åï¼‰

# å¤šçº¿ç¨‹æ”¯æŒ
./configure --enable-threads         # å¯ç”¨å¤šçº¿ç¨‹æ”¯æŒ
./configure --enable-thread-safe     # å¯ç”¨çº¿ç¨‹å®‰å…¨

# å†…å­˜ç®¡ç†
./configure --enable-shared          # ç¼–è¯‘å…±äº«åº“ï¼ˆé»˜è®¤ï¼‰
./configure --enable-static          # ç¼–è¯‘é™æ€åº“
./configure --disable-shared --enable-static  # åªç¼–è¯‘é™æ€åº“
```

**ğŸ”’ å®‰å…¨ç›¸å…³å¼€å…³**
```bash
# åŠ å¯†æ”¯æŒ
./configure --enable-ssl              # å¯ç”¨SSL/TLSæ”¯æŒ
./configure --enable-crypto           # å¯ç”¨åŠ å¯†åŠŸèƒ½

# è®¤è¯æœºåˆ¶
./configure --enable-auth             # å¯ç”¨è®¤è¯åŠŸèƒ½
./configure --disable-anonymous       # ç¦ç”¨åŒ¿åè®¿é—®
```

**ğŸŒ ç½‘ç»œåŠŸèƒ½å¼€å…³**
```bash
# ç½‘ç»œåè®®æ”¯æŒ
./configure --enable-ipv6             # å¯ç”¨IPv6æ”¯æŒ
./configure --disable-ipv6            # ç¦ç”¨IPv6ï¼ˆåªç”¨IPv4ï¼‰

# ç½‘ç»œåŠŸèƒ½
./configure --enable-proxy            # å¯ç”¨ä»£ç†æ”¯æŒ
./configure --enable-compression      # å¯ç”¨æ•°æ®å‹ç¼©
```

### 4.3 å¼€å…³ç»„åˆç­–ç•¥


**ğŸ¯ å¸¸ç”¨ç»„åˆç¤ºä¾‹**
```bash
# é«˜æ€§èƒ½æœåŠ¡å™¨é…ç½®
./configure \
  --enable-optimization \
  --enable-threads \
  --enable-shared \
  --disable-debug

# è°ƒè¯•å¼€å‘é…ç½®
./configure \
  --enable-debug \
  --disable-optimization \
  --enable-static \
  --enable-test-suite

# æœ€å°åŒ–å®‰è£…é…ç½®
./configure \
  --disable-nls \
  --disable-doc \
  --disable-examples \
  --enable-static
```

---

## 5. ğŸ“¦ ä¾èµ–åº“ç®¡ç†


### 5.1 with/withoutåŸºç¡€æ¦‚å¿µ


**ğŸ”— ç†è§£ä¾èµ–åº“**
```
ä¾èµ–åº“å°±åƒåšèœçš„"é…èœ"ï¼š
â€¢ ä¸»èœï¼ˆä¸»ç¨‹åºï¼‰éœ€è¦é…èœï¼ˆä¾èµ–åº“ï¼‰æ‰å¥½åƒ
â€¢ --with-xxxï¼šæˆ‘è¦ç”¨è¿™ä¸ªé…èœ
â€¢ --without-xxxï¼šæˆ‘ä¸è¦è¿™ä¸ªé…èœ

ä¾‹å¦‚ï¼šç¼–è¯‘ä¸€ä¸ªå›¾åƒå¤„ç†è½¯ä»¶
--with-jpegï¼šæ”¯æŒJPEGæ ¼å¼
--with-pngï¼šæ”¯æŒPNGæ ¼å¼  
--without-gifï¼šä¸æ”¯æŒGIFæ ¼å¼
```

**ğŸ”§ åŸºæœ¬è¯­æ³•**
```bash
# ä½¿ç”¨æŸä¸ªåº“
./configure --with-library

# ä¸ä½¿ç”¨æŸä¸ªåº“
./configure --without-library

# æŒ‡å®šåº“çš„ä½ç½®
./configure --with-library=/path/to/library

# ç¤ºä¾‹
./configure --with-openssl             # ä½¿ç”¨OpenSSLåº“
./configure --without-mysql            # ä¸ä½¿ç”¨MySQLæ”¯æŒ
./configure --with-zlib=/usr/local     # æŒ‡å®šzlibåº“ä½ç½®
```

### 5.2 å¸¸è§ä¾èµ–åº“é€‰é¡¹


**ğŸ“š æ•°æ®åº“æ”¯æŒ**
```bash
# MySQLæ•°æ®åº“
./configure --with-mysql               # å¯ç”¨MySQLæ”¯æŒ
./configure --with-mysql=/usr/local/mysql  # æŒ‡å®šMySQLå®‰è£…è·¯å¾„

# PostgreSQLæ•°æ®åº“
./configure --with-postgresql          # å¯ç”¨PostgreSQLæ”¯æŒ
./configure --with-pgsql=/usr/local/pgsql

# SQLiteæ•°æ®åº“
./configure --with-sqlite              # å¯ç”¨SQLiteæ”¯æŒ
./configure --without-sqlite           # ç¦ç”¨SQLiteæ”¯æŒ
```

**ğŸ”’ åŠ å¯†åº“æ”¯æŒ**
```bash
# OpenSSLåŠ å¯†åº“
./configure --with-openssl             # ä½¿ç”¨ç³»ç»ŸOpenSSL
./configure --with-openssl=/opt/openssl  # æŒ‡å®šOpenSSLè·¯å¾„

# å…¶ä»–åŠ å¯†åº“
./configure --with-libcrypt            # ä½¿ç”¨libcrypt
./configure --with-zlib                # ä½¿ç”¨zlibå‹ç¼©åº“
```

**ğŸ¨ å›¾å½¢ç•Œé¢åº“**
```bash
# GTKå›¾å½¢åº“
./configure --with-gtk                 # å¯ç”¨GTKæ”¯æŒ
./configure --with-gtk=2.0             # æŒ‡å®šGTKç‰ˆæœ¬

# X Windowç³»ç»Ÿ
./configure --with-x                   # å¯ç”¨X Windowæ”¯æŒ
./configure --without-x                # ç¦ç”¨å›¾å½¢ç•Œé¢ï¼ˆçº¯å‘½ä»¤è¡Œï¼‰
```

### 5.3 ä¾èµ–æ£€æŸ¥ä¸è§£å†³


**ğŸ” å¸¸è§ä¾èµ–é—®é¢˜**
```bash
# é—®é¢˜ï¼šåº“æ²¡æ‰¾åˆ°
checking for openssl... no
configure: error: OpenSSL not found

# è§£å†³æ–¹æ³•1ï¼šå®‰è£…ç¼ºå¤±çš„åº“
sudo apt-get install libssl-dev        # Debian/Ubuntu
sudo yum install openssl-devel          # CentOS/RHEL

# è§£å†³æ–¹æ³•2ï¼šæŒ‡å®šåº“çš„ä½ç½®
./configure --with-openssl=/usr/local/ssl

# è§£å†³æ–¹æ³•3ï¼šç¦ç”¨è¯¥åŠŸèƒ½
./configure --without-openssl
```

**ğŸ’¡ æŸ¥æ‰¾åº“æ–‡ä»¶çš„æŠ€å·§**
```bash
# æŸ¥æ‰¾åº“æ–‡ä»¶ä½ç½®
find /usr -name "libssl*" 2>/dev/null
find /usr/local -name "openssl" 2>/dev/null

# æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
dpkg -l | grep ssl                     # Debian/Ubuntu
rpm -qa | grep ssl                     # CentOS/RHEL

# æŸ¥çœ‹pkg-configä¿¡æ¯ï¼ˆä¸‹ä¸€èŠ‚è¯¦ç»†è®²ï¼‰
pkg-config --list-all | grep ssl
```

---

## 6. ğŸŒ ç¯å¢ƒå˜é‡é…ç½®


### 6.1 å¸¸ç”¨ç¯å¢ƒå˜é‡


**ğŸ”§ ç¼–è¯‘å™¨ç›¸å…³å˜é‡**
```bash
# æŒ‡å®šCç¼–è¯‘å™¨
CC=gcc ./configure

# æŒ‡å®šC++ç¼–è¯‘å™¨  
CXX=g++ ./configure

# åŒæ—¶æŒ‡å®šå¤šä¸ªç¼–è¯‘å™¨
CC=gcc CXX=g++ ./configure

# äº¤å‰ç¼–è¯‘ç¤ºä¾‹
CC=arm-linux-gcc CXX=arm-linux-g++ ./configure --host=arm-linux
```

**âš™ï¸ ç¼–è¯‘é€‰é¡¹å˜é‡**
```bash
# CFLAGSï¼šCç¼–è¯‘å™¨é€‰é¡¹
CFLAGS="-O2 -Wall" ./configure         # ä¼˜åŒ–ç¼–è¯‘ï¼Œæ˜¾ç¤ºè­¦å‘Š

# CXXFLAGSï¼šC++ç¼–è¯‘å™¨é€‰é¡¹
CXXFLAGS="-O2 -std=c++11" ./configure  # C++11æ ‡å‡†ç¼–è¯‘

# LDFLAGSï¼šé“¾æ¥å™¨é€‰é¡¹
LDFLAGS="-L/usr/local/lib" ./configure # æŒ‡å®šåº“æœç´¢è·¯å¾„

# CPPFLAGSï¼šé¢„å¤„ç†å™¨é€‰é¡¹
CPPFLAGS="-I/usr/local/include" ./configure  # æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„
```

### 6.2 è·¯å¾„ç›¸å…³ç¯å¢ƒå˜é‡


**ğŸ“ åº“å’Œå¤´æ–‡ä»¶è·¯å¾„**
```bash
# ç»„åˆä½¿ç”¨ç¯å¢ƒå˜é‡
CPPFLAGS="-I/usr/local/include" \
LDFLAGS="-L/usr/local/lib" \
./configure --prefix=/usr/local

# PKG_CONFIG_PATHï¼špkg-configæœç´¢è·¯å¾„
PKG_CONFIG_PATH=/usr/local/lib/pkgconfig ./configure

# LD_LIBRARY_PATHï¼šè¿è¡Œæ—¶åº“è·¯å¾„ï¼ˆä¸æ¨èåœ¨configureæ—¶ä½¿ç”¨ï¼‰
export LD_LIBRARY_PATH=/usr/local/lib
./configure
```

### 6.3 ç¯å¢ƒå˜é‡ä½¿ç”¨æŠ€å·§


**ğŸ’¡ å®ç”¨æŠ€å·§**
```bash
# æŠ€å·§1ï¼šä½¿ç”¨è„šæœ¬æ–‡ä»¶ä¿å­˜é…ç½®
cat > build_config.sh << 'EOF'
#!/bin/bash
export CC=gcc
export CXX=g++
export CFLAGS="-O2 -Wall"
export CXXFLAGS="-O2 -std=c++11"
export LDFLAGS="-L/usr/local/lib"
export CPPFLAGS="-I/usr/local/include"

./configure \
  --prefix=/usr/local \
  --enable-optimization \
  --with-openssl
EOF

chmod +x build_config.sh
./build_config.sh

# æŠ€å·§2ï¼šä¸€æ¡å‘½ä»¤è®¾ç½®å¤šä¸ªå˜é‡
env CC=gcc CFLAGS="-O2" LDFLAGS="-L/usr/local/lib" ./configure
```

---

## 7. ğŸ” é”™è¯¯è¯Šæ–­ä¸æ’æŸ¥


### 7.1 config.logæ–‡ä»¶åˆ†æ


**ğŸ“‹ config.logæ˜¯ä»€ä¹ˆ**
```
config.log = configureè„šæœ¬çš„"é»‘ç›’å­"
è®°å½•äº†configureæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ç»†èŠ‚ï¼š
â€¢ æ¯ä¸€æ­¥æ£€æŸ¥çš„è¯¦ç»†è¿‡ç¨‹
â€¢ ç¼–è¯‘æµ‹è¯•çš„å…·ä½“å‘½ä»¤
â€¢ å¤±è´¥çš„çœŸå®åŸå› 
â€¢ ç¯å¢ƒå˜é‡çš„å€¼

å½“configureå¤±è´¥æ—¶ï¼Œconfig.logæ˜¯æœ€é‡è¦çš„è°ƒè¯•ä¿¡æ¯ï¼
```

**ğŸ” æŸ¥çœ‹config.log**
```bash
# configureæ‰§è¡Œå¤±è´¥å
$ ./configure
checking for gcc... gcc
checking for OpenSSL... no
configure: error: OpenSSL development files not found

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
$ tail -50 config.log
# æˆ–è€…æœç´¢å…·ä½“é”™è¯¯
$ grep -A 10 -B 10 "OpenSSL" config.log
```

### 7.2 å¸¸è§é”™è¯¯ç±»å‹


**âŒ ç¼–è¯‘å™¨é—®é¢˜**
```
é”™è¯¯ä¿¡æ¯ï¼šchecking for gcc... no
åŸå› ï¼šæ²¡æœ‰å®‰è£…ç¼–è¯‘å™¨
è§£å†³ï¼š
sudo apt-get install gcc g++              # Debian/Ubuntu
sudo yum install gcc gcc-c++               # CentOS/RHEL
```

**âŒ åº“æ–‡ä»¶ç¼ºå¤±**
```
é”™è¯¯ä¿¡æ¯ï¼šchecking for library xxx... no
åŸå› ï¼šç¼ºå°‘å¼€å‘åŒ…ï¼ˆdevåŒ…ï¼‰
è§£å†³ï¼š
# æŸ¥æ‰¾ç›¸åº”çš„å¼€å‘åŒ…
apt-cache search xxx-dev                   # Debian/Ubuntu
yum search xxx-devel                       # CentOS/RHEL

# å®‰è£…å¼€å‘åŒ…
sudo apt-get install libxxx-dev
sudo yum install xxx-devel
```

**âŒ å¤´æ–‡ä»¶æ‰¾ä¸åˆ°**
```
é”™è¯¯ä¿¡æ¯ï¼šxxx.h: No such file or directory
åŸå› ï¼šå¤´æ–‡ä»¶è·¯å¾„ä¸å¯¹
è§£å†³ï¼š
# æŸ¥æ‰¾å¤´æ–‡ä»¶ä½ç½®
find /usr -name "xxx.h" 2>/dev/null

# æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„
CPPFLAGS="-I/path/to/include" ./configure
```

### 7.3 ç³»ç»Ÿæ€§æ’æŸ¥æ–¹æ³•


**ğŸ”§ æ’æŸ¥æ­¥éª¤**
```
1. æŸ¥çœ‹configureè¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥config.logä¸­çš„è¯¦ç»†é”™è¯¯
3. ç¡®è®¤ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ–
4. å°è¯•ä¸åŒçš„é…ç½®é€‰é¡¹
5. æŸ¥çœ‹è½¯ä»¶çš„READMEå’ŒINSTALLæ–‡ä»¶
```

**ğŸ› ï¸ å®é™…æ’æŸ¥ç¤ºä¾‹**
```bash
# æ­¥éª¤1ï¼šconfigureå¤±è´¥
$ ./configure --with-openssl
configure: error: OpenSSL not found

# æ­¥éª¤2ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
$ grep -A 20 "OpenSSL not found" config.log

# æ­¥éª¤3ï¼šæ£€æŸ¥OpenSSLæ˜¯å¦å®‰è£…
$ which openssl
/usr/bin/openssl

$ openssl version
OpenSSL 1.1.1

# æ­¥éª¤4ï¼šæ£€æŸ¥å¼€å‘åŒ…
$ dpkg -l | grep ssl-dev
# å¦‚æœæ²¡è¾“å‡ºï¼Œè¯´æ˜ç¼ºå°‘å¼€å‘åŒ…

# æ­¥éª¤5ï¼šå®‰è£…å¼€å‘åŒ…
$ sudo apt-get install libssl-dev

# æ­¥éª¤6ï¼šé‡æ–°configure
$ ./configure --with-openssl
```

---

## 8. ğŸ’¾ é…ç½®ç¼“å­˜ä¸ä¼˜åŒ–


### 8.1 configureç¼“å­˜æœºåˆ¶


**âš¡ ç¼“å­˜åŠ é€ŸåŸç†**
```
ç¬¬ä¸€æ¬¡configureï¼šéœ€è¦æ£€æŸ¥æ‰€æœ‰ç³»ç»Ÿç‰¹æ€§ï¼ˆæ…¢ï¼‰
system check 1 âœ“
system check 2 âœ“  
...
system check 100 âœ“

ä½¿ç”¨ç¼“å­˜åï¼šç›´æ¥è¯»å–ä¹‹å‰çš„æ£€æŸ¥ç»“æœï¼ˆå¿«ï¼‰
cache hit 1 âœ“
cache hit 2 âœ“
...
cache hit 100 âœ“
```

**ğŸ”§ ç¼“å­˜ç›¸å…³å‘½ä»¤**
```bash
# å¯ç”¨ç¼“å­˜ï¼ˆæ¨èç”¨äºé‡å¤configureï¼‰
./configure --cache-file=config.cache

# æŸ¥çœ‹ç¼“å­˜å†…å®¹
cat config.cache

# æ¸…é™¤ç¼“å­˜ï¼ˆæœ‰é—®é¢˜æ—¶ä½¿ç”¨ï¼‰
rm -f config.cache
```

### 8.2 åŠ é€ŸconfigureæŠ€å·§


**ğŸš€ æå‡configureé€Ÿåº¦**
```bash
# æŠ€å·§1ï¼šä½¿ç”¨ç¼“å­˜æ–‡ä»¶
./configure --cache-file=config.cache --prefix=/usr/local

# æŠ€å·§2ï¼šç¦ç”¨ä¸éœ€è¦çš„æ£€æŸ¥
./configure --disable-dependency-tracking  # ç¦ç”¨ä¾èµ–è·Ÿè¸ª
./configure --disable-maintainer-mode     # ç¦ç”¨ç»´æŠ¤è€…æ¨¡å¼

# æŠ€å·§3ï¼šå¹¶è¡Œå¤„ç†ï¼ˆæŸäº›configureæ”¯æŒï¼‰
./configure --enable-parallel-tests

# æŠ€å·§4ï¼šç»„åˆä¼˜åŒ–é€‰é¡¹
./configure \
  --cache-file=config.cache \
  --disable-dependency-tracking \
  --prefix=/usr/local
```

### 8.3 é…ç½®æ–‡ä»¶ç®¡ç†


**ğŸ“ é‡è¦é…ç½®æ–‡ä»¶**
```
configureç”Ÿæˆçš„é‡è¦æ–‡ä»¶ï¼š
config.status  - é…ç½®çŠ¶æ€å’Œé‡æ–°é…ç½®è„šæœ¬
config.h       - ç¼–è¯‘æ—¶çš„å®å®šä¹‰
Makefile       - ç¼–è¯‘è§„åˆ™æ–‡ä»¶
config.log     - è¯¦ç»†çš„é…ç½®æ—¥å¿—
config.cache   - é…ç½®ç¼“å­˜æ–‡ä»¶ï¼ˆå¦‚æœå¯ç”¨ï¼‰
```

**ğŸ”„ é‡æ–°é…ç½®æŠ€å·§**
```bash
# ä½¿ç”¨ç›¸åŒé…ç½®é‡æ–°configure
./config.status --recheck

# åªé‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼ˆä¸é‡æ–°æ£€æŸ¥ï¼‰
./config.status

# æ¸…ç†æ‰€æœ‰é…ç½®æ–‡ä»¶é‡æ–°å¼€å§‹
make distclean  # å¦‚æœæœ‰Makefile
rm -f config.status config.log config.cache
./configure [é€‰é¡¹]
```

---

## 9. ğŸ¯ å®æˆ˜é…ç½®ç­–ç•¥


### 9.1 ä¸åŒåœºæ™¯çš„é…ç½®æ¨¡æ¿


**ğŸ  ä¸ªäººå¼€å‘ç¯å¢ƒ**
```bash
#!/bin/bash
# ä¸ªäººå¼€å‘é…ç½®æ¨¡æ¿
./configure \
  --prefix=$HOME/.local \
  --enable-debug \
  --enable-static \
  --disable-shared \
  --with-openssl \
  --cache-file=config.cache
```

**ğŸ¢ ç”Ÿäº§æœåŠ¡å™¨ç¯å¢ƒ**
```bash
#!/bin/bash  
# ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿
export CC=gcc
export CFLAGS="-O2 -march=native"
export LDFLAGS="-L/usr/local/lib"

./configure \
  --prefix=/opt/myapp \
  --enable-optimization \
  --enable-shared \
  --disable-debug \
  --with-openssl=/usr/local \
  --with-mysql=/usr/local/mysql \
  --disable-dependency-tracking
```

**ğŸ§ª æµ‹è¯•ç¯å¢ƒé…ç½®**
```bash
#!/bin/bash
# æµ‹è¯•ç¯å¢ƒé…ç½®æ¨¡æ¿  
./configure \
  --prefix=/tmp/test_install \
  --enable-debug \
  --enable-test-suite \
  --enable-static \
  --with-all-deps \
  --disable-optimization
```

### 9.2 é…ç½®éªŒè¯æ–¹æ³•


**âœ… é…ç½®å®Œæˆåçš„éªŒè¯**
```bash
# 1. æ£€æŸ¥configureæ˜¯å¦æˆåŠŸ
echo $?  # åº”è¯¥è¿”å›0

# 2. æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
ls -la Makefile config.h config.status

# 3. æ£€æŸ¥configureé€‰é¡¹æ˜¯å¦ç”Ÿæ•ˆ
grep "prefix.*=/usr/local" config.status
grep "enable-ssl" config.log

# 4. é¢„è§ˆå°†è¦å®‰è£…çš„æ–‡ä»¶ä½ç½®
make -n install | head -20
```

### 9.3 å¸¸è§é…ç½®ç»„åˆ


**ğŸ”§ åŠŸèƒ½ä¸°å¯Œå‹é…ç½®**
```bash
./configure \
  --prefix=/usr/local \
  --enable-all \
  --with-openssl \
  --with-mysql \
  --with-postgresql \
  --enable-threads \
  --enable-shared
```

**âš¡ é«˜æ€§èƒ½å‹é…ç½®**
```bash
export CFLAGS="-O3 -march=native -mtune=native"
./configure \
  --prefix=/usr/local \
  --enable-optimization \
  --disable-debug \
  --enable-static \
  --disable-shared \
  --disable-nls
```

**ğŸ”’ å®‰å…¨åŠ å›ºå‹é…ç½®**
```bash
export CFLAGS="-O2 -D_FORTIFY_SOURCE=2 -fstack-protector"
./configure \
  --prefix=/usr/local \
  --enable-ssl \
  --enable-crypto \
  --disable-anonymous \
  --with-openssl \
  --enable-auth
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ configureè„šæœ¬ï¼šæ£€æŸ¥ç³»ç»Ÿç¯å¢ƒå¹¶ç”Ÿæˆç¼–è¯‘é…ç½®
ğŸ”¸ --prefixï¼šæŒ‡å®šè½¯ä»¶å®‰è£…çš„æ ¹ç›®å½•ï¼ˆæœ€é‡è¦çš„é€‰é¡¹ï¼‰
ğŸ”¸ --enable/--disableï¼šæ§åˆ¶åŠŸèƒ½ç‰¹æ€§çš„å¼€å…³
ğŸ”¸ --with/--withoutï¼šæ§åˆ¶ä¾èµ–åº“çš„ä½¿ç”¨
ğŸ”¸ ç¯å¢ƒå˜é‡ï¼šCCã€CFLAGSã€LDFLAGSç­‰å½±å“ç¼–è¯‘è¿‡ç¨‹
ğŸ”¸ config.logï¼šæ’æŸ¥configureé”™è¯¯çš„å…³é”®æ–‡ä»¶
```

### 10.2 å…³é”®æ“ä½œè¦ç‚¹


**ğŸ”¹ configureå‰çš„å‡†å¤‡**
```
æ£€æŸ¥æ¸…å•ï¼š
â–¡ ç¼–è¯‘å™¨æ˜¯å¦å®‰è£…ï¼ˆgccã€g++ï¼‰
â–¡ å¿…éœ€çš„å¼€å‘åŒ…æ˜¯å¦å®‰è£…ï¼ˆxxx-dev æˆ– xxx-develï¼‰
â–¡ ç£ç›˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿ
â–¡ æƒé™æ˜¯å¦æ­£ç¡®ï¼ˆå®‰è£…ä½ç½®çš„å†™æƒé™ï¼‰
```

**ğŸ”¹ é€‰é¡¹ä½¿ç”¨åŸåˆ™**
```
é€‰æ‹©åŸåˆ™ï¼š
â€¢ --prefixæ ¹æ®ç”¨é€”é€‰æ‹©ï¼šä¸ªäººç”¨æˆ·ç›®å½•ï¼Œç³»ç»Ÿç”¨/usr/local
â€¢ åŠŸèƒ½å¼€å…³ï¼šåªå¯ç”¨éœ€è¦çš„åŠŸèƒ½ï¼Œå‡å°‘ä¾èµ–å’Œå®‰å…¨é£é™©  
â€¢ ä¾èµ–åº“ï¼šä¼˜å…ˆä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨å®‰è£…çš„ç‰ˆæœ¬
â€¢ ç¯å¢ƒå˜é‡ï¼šç”¨äºæŒ‡å®šç¼–è¯‘å™¨å’Œä¼˜åŒ–é€‰é¡¹
```

**ğŸ”¹ é”™è¯¯å¤„ç†æ€è·¯**
```
æ’æŸ¥æ­¥éª¤ï¼š
1. ä»”ç»†é˜…è¯»configureçš„é”™è¯¯è¾“å‡º
2. æŸ¥çœ‹config.logæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯  
3. ç¡®è®¤ç¼ºå¤±çš„åº“å’Œå¼€å‘åŒ…
4. å°è¯•è°ƒæ•´configureé€‰é¡¹
5. æŸ¥é˜…è½¯ä»¶æ–‡æ¡£å’Œç¤¾åŒºèµ„æº
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


- **è½¯ä»¶å®‰è£…**ï¼šä»æºç ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬è½¯ä»¶
- **å®šåˆ¶åŒ–æ„å»º**ï¼šæ ¹æ®éœ€è¦å¯ç”¨/ç¦ç”¨ç‰¹å®šåŠŸèƒ½  
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé€šè¿‡ç¼–è¯‘é€‰é¡¹ä¼˜åŒ–ç¨‹åºæ€§èƒ½
- **ä¾èµ–ç®¡ç†**ï¼šè§£å†³å¤æ‚è½¯ä»¶çš„ä¾èµ–å…³ç³»
- **è·¨å¹³å°ç¼–è¯‘**ï¼šä¸ºä¸åŒå¹³å°å®šåˆ¶ç¼–è¯‘é…ç½®

### 10.4 å­¦ä¹ å»ºè®®


**ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„**
```
åŸºç¡€é˜¶æ®µï¼šæŒæ¡å¸¸ç”¨é€‰é¡¹ï¼Œèƒ½æˆåŠŸç¼–è¯‘ç®€å•è½¯ä»¶
è¿›é˜¶é˜¶æ®µï¼šç†è§£ä¾èµ–å…³ç³»ï¼Œè§£å†³ç¼–è¯‘é”™è¯¯
é«˜çº§é˜¶æ®µï¼šä¼˜åŒ–ç¼–è¯‘é…ç½®ï¼Œç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬
ä¸“å®¶é˜¶æ®µï¼šæ·±å…¥ç†è§£autotoolså·¥å…·é“¾
```

**ğŸ’¡ å®è·µå»ºè®®**
```
ç»ƒä¹ æ–¹æ³•ï¼š
â€¢ æ‰¾ä¸€äº›å¼€æºè½¯ä»¶ç»ƒä¹ configure
â€¢ å°è¯•ä¸åŒçš„é…ç½®é€‰é¡¹ç»„åˆ
â€¢ æ•…æ„åˆ¶é€ é”™è¯¯å­¦ä¹ æ’æŸ¥æ–¹æ³•
â€¢ ç¼–å†™é…ç½®è„šæœ¬è‡ªåŠ¨åŒ–é‡å¤å·¥ä½œ
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- configureæ˜¯ç¼–è¯‘å‰çš„"ä½“æ£€"ï¼Œæ£€æŸ¥ç³»ç»Ÿç¯å¢ƒç”Ÿæˆé…ç½®
- --prefixæ§åˆ¶å®‰è£…ä½ç½®ï¼Œ--enable/disableæ§åˆ¶åŠŸèƒ½ï¼Œ--with/withoutæ§åˆ¶ä¾èµ–
- config.logæ˜¯è§£å†³é—®é¢˜çš„é‡‘é’¥åŒ™ï¼Œé”™è¯¯æ—¶å¿…çœ‹
- ç¯å¢ƒå˜é‡å½±å“ç¼–è¯‘è¿‡ç¨‹ï¼Œåˆç†ä½¿ç”¨å¯ä¼˜åŒ–ç»“æœ