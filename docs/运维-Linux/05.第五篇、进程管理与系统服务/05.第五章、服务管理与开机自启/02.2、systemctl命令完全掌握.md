---
title: 2ã€systemctlå‘½ä»¤å®Œå…¨æŒæ¡
---
## ğŸ“š ç›®å½•

1. [systemctlåŸºç¡€æ¦‚å¿µ](#1-systemctlåŸºç¡€æ¦‚å¿µ)
2. [åŸºæœ¬è¯­æ³•ä¸é€‰é¡¹è¯¦è§£](#2-åŸºæœ¬è¯­æ³•ä¸é€‰é¡¹è¯¦è§£)
3. [æœåŠ¡çŠ¶æ€æŸ¥è¯¢ä¸è§£è¯»](#3-æœåŠ¡çŠ¶æ€æŸ¥è¯¢ä¸è§£è¯»)
4. [æœåŠ¡å¯åœæ§åˆ¶æ“ä½œ](#4-æœåŠ¡å¯åœæ§åˆ¶æ“ä½œ)
5. [å¼€æœºè‡ªå¯ç®¡ç†](#5-å¼€æœºè‡ªå¯ç®¡ç†)
6. [æœåŠ¡ä¾èµ–å…³ç³»æŸ¥çœ‹](#6-æœåŠ¡ä¾èµ–å…³ç³»æŸ¥çœ‹)
7. [å¤±è´¥æœåŠ¡æ’æŸ¥å¤„ç†](#7-å¤±è´¥æœåŠ¡æ’æŸ¥å¤„ç†)
8. [è¾“å‡ºæ ¼å¼æ§åˆ¶ä¸è¿‡æ»¤](#8-è¾“å‡ºæ ¼å¼æ§åˆ¶ä¸è¿‡æ»¤)
9. [æ‰¹é‡æ“ä½œä¸é€šé…ç¬¦ä½¿ç”¨](#9-æ‰¹é‡æ“ä½œä¸é€šé…ç¬¦ä½¿ç”¨)
10. [å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ](#10-å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ systemctlåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯systemctl


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
systemctlï¼šSystem Controlçš„ç¼©å†™
ä½œç”¨ï¼šsystemdç³»ç»Ÿçš„æ ¸å¿ƒç®¡ç†å·¥å…·
åŠŸèƒ½ï¼šç®¡ç†ç³»ç»ŸæœåŠ¡ã€æŒ‚è½½ç‚¹ã€è®¾å¤‡ã€å¥—æ¥å­—ç­‰ç³»ç»Ÿèµ„æº
åœ°ä½ï¼šç°ä»£Linuxç³»ç»Ÿçš„æœåŠ¡ç®¡ç†æ ‡å‡†å·¥å…·
```

**ğŸ’¡ systemctlè§£å†³ä»€ä¹ˆé—®é¢˜**
```
ä¼ ç»Ÿé—®é¢˜ï¼š
- æ—§ç³»ç»Ÿä½¿ç”¨serviceå‘½ä»¤ï¼ŒåŠŸèƒ½æœ‰é™
- å¯åŠ¨è„šæœ¬å¤æ‚ï¼Œç®¡ç†å›°éš¾
- æœåŠ¡ä¾èµ–å…³ç³»å¤„ç†ä¸å¤Ÿæ™ºèƒ½

systemctlçš„ä¼˜åŠ¿ï¼š
- ç»Ÿä¸€çš„æœåŠ¡ç®¡ç†æ¥å£
- å¼ºå¤§çš„ä¾èµ–å…³ç³»å¤„ç†
- è¯¦ç»†çš„çŠ¶æ€ä¿¡æ¯æ˜¾ç¤º
- æ”¯æŒå¹¶è¡Œå¯åŠ¨ï¼Œæé«˜æ•ˆç‡
```

### 1.2 systemctlä¸ä¼ ç»Ÿserviceçš„åŒºåˆ«


**ğŸ”„ å‘½ä»¤å¯¹æ¯”**
```
ä¼ ç»Ÿæ–¹å¼ (CentOS 6åŠæ›´æ—©ç‰ˆæœ¬)ï¼š
service httpd start     â† å¯åŠ¨ApacheæœåŠ¡
service httpd status    â† æŸ¥çœ‹çŠ¶æ€
chkconfig httpd on      â† è®¾ç½®å¼€æœºè‡ªå¯

ç°ä»£æ–¹å¼ (systemdç³»ç»Ÿ)ï¼š
systemctl start httpd.service    â† å¯åŠ¨æœåŠ¡
systemctl status httpd          â† æŸ¥çœ‹çŠ¶æ€  
systemctl enable httpd          â† è®¾ç½®å¼€æœºè‡ªå¯

ä¼˜åŠ¿å¯¹æ¯”ï¼š
systemctlåŠŸèƒ½æ›´å¼ºå¤§ï¼Œä¿¡æ¯æ›´è¯¦ç»†ï¼Œæ“ä½œæ›´ç»Ÿä¸€
```

### 1.3 systemctlç®¡ç†çš„å¯¹è±¡ç±»å‹


**ğŸ“¦ Unitå•å…ƒç±»å‹**
```
Serviceå•å…ƒ (.service)ï¼š
- ç³»ç»ŸæœåŠ¡ï¼Œå¦‚httpdã€mysqlã€sshç­‰
- æœ€å¸¸ç”¨çš„å•å…ƒç±»å‹

Socketå•å…ƒ (.socket)ï¼š
- ç½‘ç»œå¥—æ¥å­—ï¼Œç”¨äºè¿›ç¨‹é—´é€šä¿¡
- ä¾‹å¦‚ï¼šsshd.socket

Targetå•å…ƒ (.target)ï¼š
- è¿è¡Œçº§åˆ«ï¼Œç±»ä¼¼ä¼ ç»Ÿçš„runlevel
- ä¾‹å¦‚ï¼šmulti-user.targetã€graphical.target

Mountå•å…ƒ (.mount)ï¼š
- æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹
- ä¾‹å¦‚ï¼šhome.mount

Timerå•å…ƒ (.timer)ï¼š
- å®šæ—¶ä»»åŠ¡ï¼Œç±»ä¼¼cron
- ä¾‹å¦‚ï¼šlogrotate.timer
```

---

## 2. âš™ï¸ åŸºæœ¬è¯­æ³•ä¸é€‰é¡¹è¯¦è§£


### 2.1 systemctlå‘½ä»¤åŸºæœ¬è¯­æ³•


**ğŸ”¸ æ ‡å‡†è¯­æ³•æ ¼å¼**
```bash
systemctl [é€‰é¡¹] [å‘½ä»¤] [å•å…ƒåç§°]

åŸºæœ¬ç»“æ„è§£é‡Šï¼š
- systemctlï¼šå‘½ä»¤æœ¬èº«
- [é€‰é¡¹]ï¼šå¯é€‰çš„å‚æ•°é€‰é¡¹ï¼Œå¦‚-lã€--no-pagerç­‰
- [å‘½ä»¤]ï¼šå…·ä½“è¦æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚startã€statusç­‰
- [å•å…ƒåç§°]ï¼šè¦æ“ä½œçš„æœåŠ¡åç§°ï¼Œå¯çœç•¥.serviceåç¼€
```

**ğŸ’¡ å•å…ƒåç§°çš„å†™æ³•è§„åˆ™**
```bash
å®Œæ•´å†™æ³•ï¼šhttpd.service
ç®€åŒ–å†™æ³•ï¼šhttpd

ä¸¤ç§å†™æ³•ç­‰ä»·ï¼š
systemctl start httpd.service
systemctl start httpd

æ³¨æ„ï¼š
- .serviceåç¼€å¯ä»¥çœç•¥
- å…¶ä»–ç±»å‹å•å…ƒå¿…é¡»å†™å®Œæ•´åç¼€
- ä¾‹å¦‚ï¼šsystemctl start sshd.socket
```

### 2.2 å¸¸ç”¨é€‰é¡¹å‚æ•°è¯¦è§£


**ğŸ”§ é‡è¦é€‰é¡¹è¯´æ˜**

| é€‰é¡¹ | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|------|------|----------|------|
| `--no-pager` | ä¸ä½¿ç”¨åˆ†é¡µå™¨ | è¾“å‡ºå†…å®¹è¾ƒå°‘æ—¶ | `systemctl status --no-pager httpd` |
| `--no-legend` | ä¸æ˜¾ç¤ºåˆ—æ ‡é¢˜ | è„šæœ¬å¤„ç†è¾“å‡ºæ—¶ | `systemctl list-units --no-legend` |
| `-l, --full` | æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯ | æŸ¥çœ‹è¯¦ç»†çŠ¶æ€æ—¶ | `systemctl status -l httpd` |
| `--failed` | åªæ˜¾ç¤ºå¤±è´¥çš„å•å…ƒ | æ’æŸ¥é—®é¢˜æ—¶ | `systemctl list-units --failed` |
| `-t, --type` | æŒ‡å®šå•å…ƒç±»å‹ | è¿‡æ»¤ç‰¹å®šç±»å‹ | `systemctl list-units -t service` |
| `--user` | æ“ä½œç”¨æˆ·çº§æœåŠ¡ | ç®¡ç†ç”¨æˆ·æœåŠ¡æ—¶ | `systemctl --user start myapp` |

**ğŸ¯ é€‰é¡¹ä½¿ç”¨ç¤ºä¾‹**
```bash
# æŸ¥çœ‹è¯¦ç»†çŠ¶æ€ä¿¡æ¯ï¼Œä¸åˆ†é¡µæ˜¾ç¤º
systemctl status --no-pager -l nginx

# åˆ—å‡ºæ‰€æœ‰å¤±è´¥çš„æœåŠ¡
systemctl list-units --failed

# åªæ˜¾ç¤ºserviceç±»å‹çš„å•å…ƒ
systemctl list-units -t service

# æŸ¥çœ‹ç”¨æˆ·çº§æœåŠ¡
systemctl --user list-units
```

---

## 3. ğŸ” æœåŠ¡çŠ¶æ€æŸ¥è¯¢ä¸è§£è¯»


### 3.1 statuså‘½ä»¤è¯¦è§£


**ğŸ”¸ åŸºæœ¬çŠ¶æ€æŸ¥è¯¢**
```bash
# æŸ¥çœ‹å•ä¸ªæœåŠ¡çŠ¶æ€
systemctl status httpd

# æŸ¥çœ‹å¤šä¸ªæœåŠ¡çŠ¶æ€
systemctl status httpd mysql nginx

# æŸ¥çœ‹è¯¦ç»†çŠ¶æ€ä¿¡æ¯
systemctl status -l httpd
```

**ğŸ“Š statusè¾“å‡ºä¿¡æ¯è§£è¯»**
```bash
â— httpd.service - The Apache HTTP Server
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)
   Active: active (running) since Mon 2024-01-15 10:30:25 CST; 2h 15min ago
     Docs: man:httpd(8)
           man:apachectl(8)
  Process: 1234 nginx: master process /usr/sbin/httpd
 Main PID: 1234 (httpd)
   Status: "Processing requests..."
    Tasks: 213 (limit: 4915)
   Memory: 15.2M
   CGroup: /system.slice/httpd.service
           â”œâ”€1234 /usr/sbin/httpd -DFOREGROUND
           â””â”€1235 /usr/sbin/httpd -DFOREGROUND

Jan 15 10:30:25 server01 systemd[1]: Starting The Apache HTTP Server...
Jan 15 10:30:25 server01 httpd[1234]: Server configured, listening on port 80
Jan 15 10:30:25 server01 systemd[1]: Started The Apache HTTP Server.

å­—æ®µè§£é‡Šï¼š
â— æœåŠ¡åç§°å’Œæè¿°
Loadedï¼šåŠ è½½çŠ¶æ€ï¼ˆé…ç½®æ–‡ä»¶ä½ç½®ã€å¼€æœºè‡ªå¯çŠ¶æ€ï¼‰
Activeï¼šè¿è¡ŒçŠ¶æ€ï¼ˆå½“å‰çŠ¶æ€ã€å¯åŠ¨æ—¶é—´ã€è¿è¡Œæ—¶é•¿ï¼‰
Docsï¼šç›¸å…³æ–‡æ¡£
Processï¼šç›¸å…³è¿›ç¨‹ä¿¡æ¯
Main PIDï¼šä¸»è¿›ç¨‹ID
Statusï¼šæœåŠ¡è‡ªå®šä¹‰çŠ¶æ€ä¿¡æ¯
Tasksï¼šä»»åŠ¡æ•°é‡
Memoryï¼šå†…å­˜ä½¿ç”¨
CGroupï¼šæ§åˆ¶ç»„ä¿¡æ¯
æœ€ä¸‹é¢ï¼šæœ€è¿‘çš„æ—¥å¿—ä¿¡æ¯
```

### 3.2 æœåŠ¡è¿è¡ŒçŠ¶æ€è¯¦è§£


**âš¡ ActiveçŠ¶æ€è¯´æ˜**

| çŠ¶æ€ | å«ä¹‰ | è¯´æ˜ | å¤„ç†å»ºè®® |
|------|------|------|----------|
| `active (running)` | æ­£åœ¨è¿è¡Œ | æœåŠ¡æ­£å¸¸è¿è¡Œä¸­ | æ— éœ€å¤„ç† |
| `active (exited)` | å·²å®Œæˆ | ä¸€æ¬¡æ€§ä»»åŠ¡å·²å®Œæˆ | æ­£å¸¸çŠ¶æ€ |
| `active (waiting)` | ç­‰å¾…ä¸­ | ç­‰å¾…äº‹ä»¶è§¦å‘ | æ­£å¸¸çŠ¶æ€ |
| `inactive (dead)` | æœªè¿è¡Œ | æœåŠ¡å·²åœæ­¢ | æ ¹æ®éœ€è¦å¯åŠ¨ |
| `activating (start)` | å¯åŠ¨ä¸­ | æ­£åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ | ç­‰å¾…å®Œæˆæˆ–æ£€æŸ¥é—®é¢˜ |
| `deactivating (stop)` | åœæ­¢ä¸­ | æ­£åœ¨åœæ­¢è¿‡ç¨‹ä¸­ | ç­‰å¾…å®Œæˆ |
| `failed` | å¤±è´¥ | å¯åŠ¨å¤±è´¥ | **éœ€è¦æ’æŸ¥é—®é¢˜** |

**ğŸ”¸ LoadedçŠ¶æ€è¯´æ˜**
```
loadedï¼šé…ç½®æ–‡ä»¶å·²åŠ è½½
not-foundï¼šæ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶
bad-settingï¼šé…ç½®æ–‡ä»¶æœ‰é”™è¯¯
errorï¼šåŠ è½½æ—¶å‡ºç°é”™è¯¯
maskedï¼šæœåŠ¡è¢«å±è”½

å¼€æœºè‡ªå¯çŠ¶æ€ï¼š
enabledï¼šå¼€æœºè‡ªå¯å·²å¯ç”¨
disabledï¼šå¼€æœºè‡ªå¯å·²ç¦ç”¨  
staticï¼šé™æ€æœåŠ¡ï¼Œä¸èƒ½ç›´æ¥å¯ç”¨/ç¦ç”¨
maskedï¼šè¢«å±è”½ï¼Œæ— æ³•å¯åŠ¨
```

### 3.3 å¿«é€ŸçŠ¶æ€æ£€æŸ¥å‘½ä»¤


**ğŸš€ å¿«é€Ÿæ£€æŸ¥å‘½ä»¤**
```bash
# æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ
systemctl is-active httpd
# è¾“å‡ºï¼šactive æˆ– inactive

# æ£€æŸ¥æœåŠ¡æ˜¯å¦å¼€æœºè‡ªå¯
systemctl is-enabled httpd  
# è¾“å‡ºï¼šenabled æˆ– disabled

# æ£€æŸ¥æœåŠ¡æ˜¯å¦å¤±è´¥
systemctl is-failed httpd
# è¾“å‡ºï¼šactive æˆ– failed

# ä¸€æ¬¡æ€§æ£€æŸ¥å¤šä¸ªæœåŠ¡çŠ¶æ€
systemctl is-active httpd mysql nginx
```

**ğŸ’¡ åœ¨è„šæœ¬ä¸­ä½¿ç”¨çŠ¶æ€æ£€æŸ¥**
```bash
# è„šæœ¬ç¤ºä¾‹ï¼šæ£€æŸ¥nginxçŠ¶æ€å¹¶è‡ªåŠ¨å¯åŠ¨
#!/bin/bash
if systemctl is-active nginx > /dev/null; then
    echo "Nginx is running"
else
    echo "Nginx is not running, starting..."
    systemctl start nginx
fi

# æ£€æŸ¥è¿”å›å€¼
systemctl is-active httpd
echo $?  # 0è¡¨ç¤ºactiveï¼Œ3è¡¨ç¤ºinactive
```

---

## 4. ğŸ›ï¸ æœåŠ¡å¯åœæ§åˆ¶æ“ä½œ


### 4.1 åŸºæœ¬å¯åœæ“ä½œ


**ğŸ”¸ æ ¸å¿ƒå¯åœå‘½ä»¤**
```bash
# å¯åŠ¨æœåŠ¡
systemctl start æœåŠ¡å
systemctl start httpd

# åœæ­¢æœåŠ¡
systemctl stop æœåŠ¡å
systemctl stop httpd

# é‡å¯æœåŠ¡ï¼ˆå…ˆåœæ­¢å†å¯åŠ¨ï¼‰
systemctl restart æœåŠ¡å
systemctl restart httpd

# é‡æ–°åŠ è½½é…ç½®ï¼ˆä¸é‡å¯è¿›ç¨‹ï¼‰
systemctl reload æœåŠ¡å
systemctl reload httpd
```

**âš¡ start vs restart vs reload çš„åŒºåˆ«**
```
startï¼šå¯åŠ¨å·²åœæ­¢çš„æœåŠ¡
- é€‚ç”¨åœºæ™¯ï¼šæœåŠ¡å½“å‰æ˜¯åœæ­¢çŠ¶æ€
- å¦‚æœæœåŠ¡å·²è¿è¡Œï¼Œå‘½ä»¤ä¸ä¼šæœ‰æ•ˆæœ

restartï¼šé‡å¯æœåŠ¡ï¼ˆå¼ºåˆ¶é‡æ–°å¯åŠ¨ï¼‰
- é€‚ç”¨åœºæ™¯ï¼šä¿®æ”¹äº†æœåŠ¡é…ç½®æ–‡ä»¶å
- ä¼šå…ˆåœæ­¢æœåŠ¡ï¼Œç„¶åé‡æ–°å¯åŠ¨
- ä¼šä¸­æ–­å½“å‰è¿æ¥

reloadï¼šé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
- é€‚ç”¨åœºæ™¯ï¼šåªä¿®æ”¹äº†é…ç½®ï¼Œä¸æƒ³ä¸­æ–­æœåŠ¡
- ä¸ä¼šé‡å¯è¿›ç¨‹ï¼Œåªé‡æ–°è¯»å–é…ç½®
- ä¸ä¼šä¸­æ–­ç°æœ‰è¿æ¥
- æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰æœåŠ¡éƒ½æ”¯æŒreload
```

### 4.2 æ¡ä»¶æ€§å¯åœæ“ä½œ


**ğŸ”§ æ™ºèƒ½å¯åœå‘½ä»¤**
```bash
# é‡æ–°åŠ è½½æˆ–é‡å¯ï¼ˆä¼˜å…ˆreloadï¼‰
systemctl reload-or-restart httpd
# å¦‚æœæ”¯æŒreloadå°±reloadï¼Œä¸æ”¯æŒå°±restart

# å°è¯•é‡å¯ï¼ˆå¦‚æœæœåŠ¡æ­£åœ¨è¿è¡Œï¼‰
systemctl try-restart httpd
# åªæœ‰æœåŠ¡æ­£åœ¨è¿è¡Œæ—¶æ‰é‡å¯ï¼Œåœæ­¢çŠ¶æ€ä¸å¯åŠ¨

# æ¡ä»¶æ€§é‡æ–°åŠ è½½
systemctl try-reload-or-restart httpd
# æ™ºèƒ½é€‰æ‹©æœ€åˆé€‚çš„é‡å¯æ–¹å¼
```

**ğŸ’¡ å®é™…ä½¿ç”¨åœºæ™¯**
```bash
# åœºæ™¯1ï¼šä¿®æ”¹äº†nginxé…ç½®æ–‡ä»¶
systemctl reload nginx
# ä¸ä¸­æ–­è¿æ¥ï¼Œé‡æ–°åŠ è½½é…ç½®

# åœºæ™¯2ï¼šä¸ç¡®å®šæœåŠ¡æ˜¯å¦æ”¯æŒreload
systemctl reload-or-restart nginx
# ä¼˜å…ˆå°è¯•reloadï¼Œä¸æ”¯æŒå°±restart

# åœºæ™¯3ï¼šæ›´æ–°äº†ç¨‹åºæ–‡ä»¶
systemctl restart httpd
# å¿…é¡»é‡å¯æ‰èƒ½ç”Ÿæ•ˆ
```

### 4.3 æ‰¹é‡æ“ä½œç¤ºä¾‹


**ğŸ”„ åŒæ—¶æ“ä½œå¤šä¸ªæœåŠ¡**
```bash
# åŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡
systemctl start httpd mysql redis

# åŒæ—¶åœæ­¢å¤šä¸ªæœåŠ¡
systemctl stop httpd mysql redis

# åŒæ—¶é‡å¯å¤šä¸ªæœåŠ¡
systemctl restart httpd mysql nginx

# æ£€æŸ¥å¤šä¸ªæœåŠ¡çŠ¶æ€
systemctl status httpd mysql nginx
```

---

## 5. ğŸš€ å¼€æœºè‡ªå¯ç®¡ç†


### 5.1 enableå’Œdisableå‘½ä»¤è¯¦è§£


**ğŸ”¸ å¼€æœºè‡ªå¯åŸºæœ¬æ“ä½œ**
```bash
# å¯ç”¨å¼€æœºè‡ªå¯
systemctl enable httpd
# åˆ›å»ºç¬¦å·é“¾æ¥ï¼ŒæœåŠ¡ä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨

# ç¦ç”¨å¼€æœºè‡ªå¯  
systemctl disable httpd
# åˆ é™¤ç¬¦å·é“¾æ¥ï¼ŒæœåŠ¡ä¸ä¼šè‡ªåŠ¨å¯åŠ¨

# æŸ¥çœ‹å¼€æœºè‡ªå¯çŠ¶æ€
systemctl is-enabled httpd
# è¾“å‡ºï¼šenabledã€disabledã€staticç­‰
```

**ğŸ’¡ enableæ“ä½œçš„å®é™…å«ä¹‰**
```
enableåšä»€ä¹ˆï¼š
1. åœ¨/etc/systemd/system/ç›®å½•ä¸‹åˆ›å»ºç¬¦å·é“¾æ¥
2. é“¾æ¥æŒ‡å‘å®é™…çš„æœåŠ¡æ–‡ä»¶
3. ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šæ ¹æ®è¿™äº›é“¾æ¥å¯åŠ¨æœåŠ¡

ç¬¦å·é“¾æ¥ç¤ºä¾‹ï¼š
/etc/systemd/system/multi-user.target.wants/httpd.service 
â†’ /usr/lib/systemd/system/httpd.service

disableåšä»€ä¹ˆï¼š
1. åˆ é™¤å¯¹åº”çš„ç¬¦å·é“¾æ¥
2. æœåŠ¡ä¸ä¼šåœ¨å¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨
3. ä½†å¯ä»¥æ‰‹åŠ¨å¯åŠ¨
```

### 5.2 maskå’Œunmaskæ“ä½œ


**ğŸ”’ æœåŠ¡å±è”½ç®¡ç†**
```bash
# å±è”½æœåŠ¡ï¼ˆå®Œå…¨ç¦ç”¨ï¼‰
systemctl mask httpd
# åˆ›å»ºæŒ‡å‘/dev/nullçš„é“¾æ¥ï¼ŒæœåŠ¡æ— æ³•å¯åŠ¨

# å–æ¶ˆå±è”½
systemctl unmask httpd
# åˆ é™¤å±è”½é“¾æ¥ï¼Œæ¢å¤æ­£å¸¸çŠ¶æ€

# æŸ¥çœ‹å±è”½çŠ¶æ€
systemctl is-enabled httpd
# å¦‚æœè¢«å±è”½ï¼Œè¾“å‡ºï¼šmasked
```

**âš ï¸ mask vs disable çš„åŒºåˆ«**
```
disableï¼šç¦ç”¨å¼€æœºè‡ªå¯
- æœåŠ¡ä¸ä¼šè‡ªåŠ¨å¯åŠ¨
- ä½†å¯ä»¥æ‰‹åŠ¨å¯åŠ¨
- å¯ä»¥è¢«å…¶ä»–æœåŠ¡ä¾èµ–å¯åŠ¨

maskï¼šå®Œå…¨å±è”½æœåŠ¡
- æœåŠ¡æ— æ³•å¯åŠ¨ï¼ˆæ‰‹åŠ¨ä¹Ÿä¸è¡Œï¼‰
- å…¶ä»–æœåŠ¡ä¹Ÿæ— æ³•å¯åŠ¨å®ƒ
- ç”¨äºå½»åº•ç¦ç”¨ä¸éœ€è¦çš„æœåŠ¡

ä½¿ç”¨å»ºè®®ï¼š
- ä¸€èˆ¬æƒ…å†µç”¨disable
- å®‰å…¨è€ƒè™‘æˆ–å½»åº•ç¦ç”¨æ—¶ç”¨mask
```

### 5.3 ä¸€æ­¥åˆ°ä½æ“ä½œ


**ğŸš€ å¯åŠ¨å¹¶è®¾ç½®è‡ªå¯**
```bash
# å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆä¸¤ä¸ªæ“ä½œä¸€èµ·æ‰§è¡Œï¼‰
systemctl enable --now httpd
# ç­‰åŒäºï¼šsystemctl enable httpd && systemctl start httpd

# åœæ­¢æœåŠ¡å¹¶ç¦ç”¨è‡ªå¯
systemctl disable --now httpd  
# ç­‰åŒäºï¼šsystemctl disable httpd && systemctl stop httpd

# å®é™…åº”ç”¨ç¤ºä¾‹
systemctl enable --now nginx mysql redis
# æ‰¹é‡å¯åŠ¨å¹¶è®¾ç½®è‡ªå¯
```

---

## 6. ğŸ”— æœåŠ¡ä¾èµ–å…³ç³»æŸ¥çœ‹


### 6.1 ä¾èµ–å…³ç³»åŸºç¡€æ¦‚å¿µ


**ğŸ”¸ ä¾èµ–å…³ç³»ç±»å‹**
```
Requiresï¼šå¼ºä¾èµ–
- A Requires Bï¼šAå¿…é¡»ä¾èµ–Bæ‰èƒ½å¯åŠ¨
- å¦‚æœBå¤±è´¥ï¼ŒAä¹Ÿä¼šå¤±è´¥

Wantsï¼šå¼±ä¾èµ–  
- A Wants Bï¼šAå¸Œæœ›Bå¯åŠ¨ï¼Œä½†Bå¤±è´¥ä¸å½±å“A
- Bå¤±è´¥äº†ï¼ŒAä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œ

After/Beforeï¼šé¡ºåºä¾èµ–
- A After Bï¼šAåœ¨Bä¹‹åå¯åŠ¨ï¼ˆä¸æ˜¯å¼ºåˆ¶ä¾èµ–ï¼‰
- A Before Bï¼šAåœ¨Bä¹‹å‰å¯åŠ¨

å®é™…ä¾‹å­ï¼š
ç½‘ç»œæœåŠ¡ Requires ç½‘ç»œæ¥å£
WebæœåŠ¡ After ç½‘ç»œæœåŠ¡
```

### 6.2 æŸ¥çœ‹ä¾èµ–å…³ç³»


**ğŸ” ä¾èµ–å…³ç³»æŸ¥è¯¢å‘½ä»¤**
```bash
# æŸ¥çœ‹æœåŠ¡çš„ä¾èµ–å…³ç³»
systemctl list-dependencies httpd
# æ˜¾ç¤ºhttpdæœåŠ¡ä¾èµ–å“ªäº›å…¶ä»–æœåŠ¡

# é€’å½’æ˜¾ç¤ºå®Œæ•´ä¾èµ–æ ‘
systemctl list-dependencies httpd --all
# æ˜¾ç¤ºå®Œæ•´çš„ä¾èµ–å…³ç³»æ ‘

# åå‘æŸ¥çœ‹ï¼šå“ªäº›æœåŠ¡ä¾èµ–è¿™ä¸ªæœåŠ¡
systemctl list-dependencies httpd --reverse
# æ˜¾ç¤ºå“ªäº›æœåŠ¡ä¾èµ–httpd
```

**ğŸ“Š ä¾èµ–å…³ç³»è¾“å‡ºè§£è¯»**
```bash
$ systemctl list-dependencies sshd
sshd.service
â”œâ”€system.slice
â”œâ”€sshd-keygen.target
â”‚ â”œâ”€sshd-keygen@ecdsa.service
â”‚ â”œâ”€sshd-keygen@ed25519.service
â”‚ â””â”€sshd-keygen@rsa.service
â””â”€sysinit.target
  â”œâ”€dev-hugepages.mount
  â”œâ”€dev-mqueue.mount
  â””â”€...æ›´å¤šä¾èµ–

ç¬¦å·è¯´æ˜ï¼š
â”œâ”€ è¡¨ç¤ºä¾èµ–å…³ç³»çš„åˆ†æ”¯
â”‚  è¡¨ç¤ºå±‚çº§å…³ç³»çš„è¿æ¥çº¿
â””â”€ è¡¨ç¤ºæœ€åä¸€ä¸ªåˆ†æ”¯
```

### 6.3 ä¾èµ–å…³ç³»å®é™…åº”ç”¨


**ğŸ¯ æ’æŸ¥å¯åŠ¨é—®é¢˜**
```bash
# åœºæ™¯ï¼šæŸä¸ªæœåŠ¡å¯åŠ¨å¤±è´¥
# 1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status myapp.service

# 2. æŸ¥çœ‹ä¾èµ–å…³ç³»
systemctl list-dependencies myapp.service

# 3. æ£€æŸ¥ä¾èµ–æœåŠ¡çŠ¶æ€
systemctl status network.service
systemctl status mysql.service

# 4. è§£å†³ä¾èµ–é—®é¢˜åé‡å¯
systemctl restart myapp.service
```

---

## 7. ğŸ”§ å¤±è´¥æœåŠ¡æ’æŸ¥å¤„ç†


### 7.1 æŸ¥çœ‹å¤±è´¥æœåŠ¡


**ğŸš¨ å¤±è´¥æœåŠ¡æŸ¥è¯¢**
```bash
# åˆ—å‡ºæ‰€æœ‰å¤±è´¥çš„æœåŠ¡
systemctl list-units --failed
# åªæ˜¾ç¤ºçŠ¶æ€ä¸ºfailedçš„æœåŠ¡

# åˆ—å‡ºæ‰€æœ‰å¤±è´¥çš„æœåŠ¡ï¼ˆåŒ…æ‹¬å·²é‡ç½®çš„ï¼‰
systemctl list-units --failed --all

# æ£€æŸ¥ç‰¹å®šæœåŠ¡æ˜¯å¦å¤±è´¥
systemctl is-failed httpd
# è¾“å‡ºï¼šactive æˆ– failed
```

**ğŸ“‹ å¤±è´¥æœåŠ¡ä¿¡æ¯ç¤ºä¾‹**
```bash
$ systemctl list-units --failed
  UNIT                    LOAD   ACTIVE SUB    DESCRIPTION
â— network.service         loaded failed failed LSB: Bring up/down networking
â— postgresql.service      loaded failed failed PostgreSQL database server

LOAD   = é…ç½®æ–‡ä»¶åŠ è½½çŠ¶æ€
ACTIVE = è¿è¡ŒçŠ¶æ€  
SUB    = å­çŠ¶æ€
DESCRIPTION = æœåŠ¡æè¿°
```

### 7.2 å¤±è´¥åŸå› åˆ†æ


**ğŸ” è¯¦ç»†æ•…éšœä¿¡æ¯æŸ¥çœ‹**
```bash
# æŸ¥çœ‹è¯¦ç»†å¤±è´¥ä¿¡æ¯
systemctl status -l postgresql.service

# æŸ¥çœ‹æœåŠ¡çš„æ—¥å¿—ä¿¡æ¯
journalctl -u postgresql.service

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯æ—¥å¿—
journalctl -u postgresql.service --since "10 minutes ago"

# å®æ—¶ç›‘æ§æœåŠ¡æ—¥å¿—
journalctl -u postgresql.service -f
```

**ğŸ› ï¸ å¸¸è§å¤±è´¥åŸå› åŠè§£å†³æ–¹æ³•**
```bash
å¸¸è§å¤±è´¥åŸå› ï¼š

1. é…ç½®æ–‡ä»¶é”™è¯¯
   è§£å†³ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
   nginx -t  # æ£€æŸ¥nginxé…ç½®
   
2. ç«¯å£è¢«å ç”¨
   è§£å†³ï¼šæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ
   netstat -tlnp | grep :80
   
3. æƒé™é—®é¢˜
   è§£å†³ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™
   ls -l /var/log/httpd/
   
4. ä¾èµ–æœåŠ¡æœªå¯åŠ¨
   è§£å†³ï¼šå…ˆå¯åŠ¨ä¾èµ–æœåŠ¡
   systemctl start mysql
   
5. ç£ç›˜ç©ºé—´ä¸è¶³
   è§£å†³ï¼šæ¸…ç†ç£ç›˜ç©ºé—´
   df -h
```

### 7.3 é‡ç½®å¤±è´¥çŠ¶æ€


**ğŸ”„ å¤±è´¥çŠ¶æ€æ¸…ç†**
```bash
# é‡ç½®ç‰¹å®šæœåŠ¡çš„å¤±è´¥çŠ¶æ€
systemctl reset-failed httpd.service

# é‡ç½®æ‰€æœ‰å¤±è´¥æœåŠ¡çš„çŠ¶æ€
systemctl reset-failed

# é‡ç½®åé‡æ–°å¯åŠ¨æœåŠ¡
systemctl reset-failed httpd
systemctl start httpd
```

**ğŸ’¡ reset-failedçš„ä½œç”¨**
```
reset-failedåšä»€ä¹ˆï¼š
1. æ¸…é™¤æœåŠ¡çš„failedçŠ¶æ€
2. æ¸…é™¤ç›¸å…³çš„é”™è¯¯è®¡æ•°
3. å…è®¸é‡æ–°å°è¯•å¯åŠ¨æœåŠ¡

ä½¿ç”¨åœºæ™¯ï¼š
1. ä¿®å¤äº†å¯¼è‡´å¤±è´¥çš„é—®é¢˜å
2. æ¸…ç†å¤±è´¥æœåŠ¡åˆ—è¡¨
3. é‡æ–°å°è¯•å¯åŠ¨ä¹‹å‰
```

---

## 8. ğŸ“Š è¾“å‡ºæ ¼å¼æ§åˆ¶ä¸è¿‡æ»¤


### 8.1 è¾“å‡ºæ ¼å¼æ§åˆ¶


**ğŸ¨ æ˜¾ç¤ºæ ¼å¼é€‰é¡¹**
```bash
# ä¸ä½¿ç”¨åˆ†é¡µå™¨ï¼ˆé€‚åˆè¾“å‡ºè¾ƒå°‘æ—¶ï¼‰
systemctl status --no-pager httpd

# æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯ï¼ˆä¸æˆªæ–­é•¿è¡Œï¼‰
systemctl status -l httpd

# ä¸æ˜¾ç¤ºè¡¨å¤´
systemctl list-units --no-legend

# ç®€æ´è¾“å‡ºï¼ˆåªæ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯ï¼‰
systemctl list-units --plain
```

**ğŸ“‹ åˆ—è¡¨æ˜¾ç¤ºæ§åˆ¶**
```bash
# è‡ªå®šä¹‰è¾“å‡ºåˆ—
systemctl list-units --output=short
systemctl list-units --output=verbose

# JSONæ ¼å¼è¾“å‡ºï¼ˆä¾¿äºè„šæœ¬å¤„ç†ï¼‰
systemctl show httpd --output=json

# å±æ€§è¾“å‡ºæ§åˆ¶
systemctl show httpd --property=ActiveState,LoadState
```

### 8.2 è¿‡æ»¤å’Œæœç´¢


**ğŸ” æœåŠ¡è¿‡æ»¤æŠ€å·§**
```bash
# æŒ‰ç±»å‹è¿‡æ»¤
systemctl list-units --type=service
systemctl list-units --type=socket
systemctl list-units --type=target

# æŒ‰çŠ¶æ€è¿‡æ»¤
systemctl list-units --state=active
systemctl list-units --state=inactive  
systemctl list-units --state=failed

# ç»„åˆè¿‡æ»¤
systemctl list-units --type=service --state=running
```

**ğŸ¯ å®ç”¨è¿‡æ»¤å‘½ä»¤**
```bash
# åªæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„æœåŠ¡
systemctl list-units --type=service --state=active

# åªæ˜¾ç¤ºå¼€æœºè‡ªå¯çš„æœåŠ¡
systemctl list-unit-files --state=enabled

# æœç´¢ç‰¹å®šæœåŠ¡
systemctl list-units | grep -i apache
systemctl list-units *http*
```

### 8.3 è¾“å‡ºå®šåˆ¶åŒ–


**ğŸ› ï¸ è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹**
```bash
# æ˜¾ç¤ºç‰¹å®šå±æ€§
systemctl show httpd --property=MainPID,ActiveState,LoadState

# æ ¼å¼åŒ–è¾“å‡º
systemctl show httpd --property=ActiveState --value
# åªè¾“å‡ºå±æ€§å€¼ï¼Œä¸æ˜¾ç¤ºå±æ€§å

# æ‰¹é‡æŸ¥çœ‹å¤šä¸ªæœåŠ¡çš„ç‰¹å®šå±æ€§
systemctl show httpd mysql nginx --property=ActiveState
```

---

## 9. ğŸ”„ æ‰¹é‡æ“ä½œä¸é€šé…ç¬¦ä½¿ç”¨


### 9.1 é€šé…ç¬¦æ¨¡å¼åŒ¹é…


**ğŸ¯ é€šé…ç¬¦ä½¿ç”¨è§„åˆ™**
```bash
# * åŒ¹é…ä»»æ„å­—ç¬¦
systemctl start *http*
# å¯åŠ¨æ‰€æœ‰åŒ…å«httpçš„æœåŠ¡

# ? åŒ¹é…å•ä¸ªå­—ç¬¦  
systemctl status mysql?.service

# [] åŒ¹é…å­—ç¬¦é›†
systemctl status [abc]*.service

# {} åŒ¹é…å¤šä¸ªæ¨¡å¼
systemctl status {httpd,nginx,mysql}.service
```

**ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹**
```bash
# å¯åŠ¨æ‰€æœ‰Apacheç›¸å…³æœåŠ¡
systemctl start *apache*
systemctl start httpd*

# åœæ­¢æ‰€æœ‰æ•°æ®åº“ç›¸å…³æœåŠ¡
systemctl stop *sql*
systemctl stop *db*

# é‡å¯æ‰€æœ‰webæœåŠ¡
systemctl restart {nginx,httpd,apache2}
```

### 9.2 æ‰¹é‡çŠ¶æ€æŸ¥è¯¢


**ğŸ“Š æ‰¹é‡æŸ¥è¯¢æŠ€å·§**
```bash
# æŸ¥çœ‹å¤šä¸ªæœåŠ¡çŠ¶æ€
systemctl is-active httpd mysql nginx redis
systemctl is-enabled httpd mysql nginx redis

# ä½¿ç”¨é€šé…ç¬¦æ‰¹é‡æŸ¥è¯¢
systemctl is-active *http*
systemctl is-enabled *sql*

# ç»„åˆæŸ¥è¯¢å¤šç§çŠ¶æ€
for service in httpd mysql nginx; do
    echo "=== $service ==="
    echo "Active: $(systemctl is-active $service)"
    echo "Enabled: $(systemctl is-enabled $service)"
    echo
done
```

### 9.3 æ‰¹é‡æ“ä½œæœ€ä½³å®è·µ


**âš¡ é«˜æ•ˆæ‰¹é‡æ“ä½œ**
```bash
# åœºæ™¯1ï¼šLAMPç¯å¢ƒä¸€é”®å¯åŠ¨
systemctl enable --now httpd mysql php-fpm
systemctl status httpd mysql php-fpm

# åœºæ™¯2ï¼šåœæ­¢æ‰€æœ‰éå¿…éœ€æœåŠ¡ï¼ˆå°å¿ƒä½¿ç”¨ï¼‰
systemctl stop $(systemctl list-units --type=service --state=active --no-legend | grep -v -E '(sshd|systemd|kernel)' | awk '{print $1}')

# åœºæ™¯3ï¼šé‡å¯æ‰€æœ‰webç›¸å…³æœåŠ¡
WEB_SERVICES="nginx httpd apache2 php-fpm"
for service in $WEB_SERVICES; do
    if systemctl is-active $service > /dev/null; then
        echo "Restarting $service..."
        systemctl restart $service
    fi
done
```

**âš ï¸ æ‰¹é‡æ“ä½œæ³¨æ„äº‹é¡¹**
```
å®‰å…¨æé†’ï¼š
1. æ‰¹é‡åœæ­¢æœåŠ¡å‰è¦ç¡®è®¤å½±å“èŒƒå›´
2. ä¸è¦æ‰¹é‡æ“ä½œç³»ç»Ÿå…³é”®æœåŠ¡
3. åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é€ä¸ªç¡®è®¤å†æ“ä½œ
4. å¤‡ä»½é‡è¦é…ç½®æ–‡ä»¶

å»ºè®®æ“ä½œæµç¨‹ï¼š
1. å…ˆåˆ—å‡ºè¦æ“ä½œçš„æœåŠ¡ï¼šsystemctl list-units
2. ç¡®è®¤æ¯ä¸ªæœåŠ¡çš„ä½œç”¨
3. åˆ†æ‰¹æ¬¡è¿›è¡Œæ“ä½œ
4. æ“ä½œåéªŒè¯æœåŠ¡çŠ¶æ€
```

---

## 10. ğŸ¯ å®æˆ˜åº”ç”¨ä¸æœ€ä½³å®è·µ


### 10.1 æ—¥å¸¸è¿ç»´åœºæ™¯


**ğŸ”§ å¸¸ç”¨è¿ç»´æ“ä½œ**
```bash
# åœºæ™¯1ï¼šæ–°éƒ¨ç½²æœåŠ¡åçš„æ ‡å‡†æ“ä½œ
systemctl start myapp.service
systemctl enable myapp.service  
systemctl status myapp.service

# æˆ–è€…ä¸€æ­¥åˆ°ä½
systemctl enable --now myapp.service

# åœºæ™¯2ï¼šæœåŠ¡å¼‚å¸¸é‡å¯æµç¨‹
systemctl status myapp.service      # æŸ¥çœ‹çŠ¶æ€
journalctl -u myapp.service -n 50   # æŸ¥çœ‹æ—¥å¿—
systemctl restart myapp.service     # é‡å¯æœåŠ¡
systemctl status myapp.service      # ç¡®è®¤æ¢å¤
```

**ğŸ“‹ ç³»ç»Ÿç»´æŠ¤æ£€æŸ¥æ¸…å•**
```bash
#!/bin/bash
# ç³»ç»ŸæœåŠ¡å¥åº·æ£€æŸ¥è„šæœ¬

echo "=== æœåŠ¡çŠ¶æ€æ£€æŸ¥ ==="
# æ£€æŸ¥å…³é”®æœåŠ¡
CRITICAL_SERVICES="sshd network httpd mysql"
for service in $CRITICAL_SERVICES; do
    status=$(systemctl is-active $service 2>/dev/null || echo "not-found")
    enabled=$(systemctl is-enabled $service 2>/dev/null || echo "not-found")
    printf "%-10s Active:%-10s Enabled:%-10s\n" "$service" "$status" "$enabled"
done

echo -e "\n=== å¤±è´¥æœåŠ¡æ£€æŸ¥ ==="
failed_units=$(systemctl list-units --failed --no-legend --no-pager)
if [ -z "$failed_units" ]; then
    echo "æ²¡æœ‰å¤±è´¥çš„æœåŠ¡"
else
    echo "$failed_units"
fi

echo -e "\n=== ç³»ç»Ÿèµ„æºä½¿ç”¨ ==="
systemctl status --no-pager -l | head -10
```

### 10.2 æ•…éšœæ’æŸ¥æµç¨‹


**ğŸ” æ ‡å‡†æ•…éšœæ’æŸ¥æ­¥éª¤**
```bash
# æ­¥éª¤1ï¼šç¡®è®¤é—®é¢˜
systemctl status æœåŠ¡å
systemctl is-failed æœåŠ¡å

# æ­¥éª¤2ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
journalctl -u æœåŠ¡å --since "1 hour ago"
journalctl -u æœåŠ¡å -f  # å®æ—¶ç›‘æ§

# æ­¥éª¤3ï¼šæ£€æŸ¥é…ç½®å’Œä¾èµ–
systemctl list-dependencies æœåŠ¡å
systemctl show æœåŠ¡å --property=ExecStart,ExecStop

# æ­¥éª¤4ï¼šå°è¯•è§£å†³
systemctl reset-failed æœåŠ¡å
systemctl restart æœåŠ¡å

# æ­¥éª¤5ï¼šéªŒè¯æ¢å¤
systemctl status æœåŠ¡å
```

### 10.3 æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–


**ğŸ“Š æœåŠ¡æ€§èƒ½ç›‘æ§**
```bash
# ç›‘æ§æœåŠ¡èµ„æºä½¿ç”¨
systemctl show httpd --property=MainPID
top -p $(systemctl show httpd --property=MainPID --value)

# ç›‘æ§æœåŠ¡å¯åŠ¨æ—¶é—´
systemd-analyze blame | grep httpd

# æŸ¥çœ‹æœåŠ¡è¿è¡Œæ—¶é•¿
systemctl status httpd | grep "Active:"

# ç›‘æ§æœåŠ¡é‡å¯é¢‘ç‡
journalctl -u httpd --since "24 hours ago" | grep -i "start\|stop\|restart"
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ“ä½œ


```
ğŸ”¸ æœåŠ¡åŸºç¡€æ“ä½œï¼šstart/stop/restart/reload
ğŸ”¸ çŠ¶æ€æŸ¥è¯¢ï¼šstatus/is-active/is-enabled/is-failed
ğŸ”¸ å¼€æœºè‡ªå¯ï¼šenable/disable/mask/unmask
ğŸ”¸ æ•…éšœå¤„ç†ï¼šlist-units --failed/reset-failed
ğŸ”¸ ä¾èµ–æŸ¥çœ‹ï¼šlist-dependencies
ğŸ”¸ æ‰¹é‡æ“ä½œï¼šé€šé…ç¬¦ä½¿ç”¨å’Œå¤šæœåŠ¡æ“ä½œ
```

### 11.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æœåŠ¡çŠ¶æ€çš„å«ä¹‰**
```
è¿è¡ŒçŠ¶æ€ç†è§£ï¼š
- active (running)ï¼šæ­£åœ¨è¿è¡Œï¼Œè¿™æ˜¯æˆ‘ä»¬æœŸæœ›çš„çŠ¶æ€
- inactive (dead)ï¼šå·²åœæ­¢ï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨
- failedï¼šå¯åŠ¨å¤±è´¥ï¼Œéœ€è¦æ’æŸ¥é—®é¢˜

è‡ªå¯çŠ¶æ€ç†è§£ï¼š  
- enabledï¼šå¼€æœºä¼šè‡ªåŠ¨å¯åŠ¨
- disabledï¼šå¼€æœºä¸è‡ªåŠ¨å¯åŠ¨ï¼Œä½†å¯æ‰‹åŠ¨å¯åŠ¨
- maskedï¼šè¢«å±è”½ï¼Œæ— æ³•å¯åŠ¨
```

**ğŸ”¹ æ“ä½œå‘½ä»¤çš„é€‰æ‹©**
```
å¯åŠ¨æœåŠ¡çš„é€‰æ‹©ï¼š
- startï¼šå¯åŠ¨åœæ­¢çš„æœåŠ¡
- restartï¼šé‡å¯æœåŠ¡ï¼ˆæœ‰ä¸­æ–­ï¼‰
- reloadï¼šé‡æ–°åŠ è½½é…ç½®ï¼ˆæ— ä¸­æ–­ï¼‰
- reload-or-restartï¼šæ™ºèƒ½é‡å¯

çŠ¶æ€æŸ¥è¯¢çš„é€‰æ‹©ï¼š
- statusï¼šè¯¦ç»†çŠ¶æ€ä¿¡æ¯
- is-activeï¼šåªçœ‹è¿è¡ŒçŠ¶æ€
- is-enabledï¼šåªçœ‹è‡ªå¯çŠ¶æ€
```

**ğŸ”¹ æ•…éšœæ’æŸ¥çš„æ€è·¯**
```
æ’æŸ¥æµç¨‹ï¼š
1. çœ‹çŠ¶æ€ï¼šsystemctl status æœåŠ¡å
2. çœ‹æ—¥å¿—ï¼šjournalctl -u æœåŠ¡å
3. çœ‹ä¾èµ–ï¼šsystemctl list-dependencies æœåŠ¡å
4. çœ‹é…ç½®ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶
5. è§£å†³åï¼šreset-failed + restart
```

### 11.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ è¿ç»´å·¥ä½œä¸­çš„ä»·å€¼**
- **æœåŠ¡ç®¡ç†**ï¼šç»Ÿä¸€çš„æœåŠ¡ç®¡ç†æ¥å£ï¼Œæ“ä½œç®€å•ä¸€è‡´
- **æ•…éšœè¯Šæ–­**ï¼šä¸°å¯Œçš„çŠ¶æ€ä¿¡æ¯å’Œæ—¥å¿—é›†æˆï¼Œå¿«é€Ÿå®šä½é—®é¢˜
- **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šæ”¯æŒè„šæœ¬åŒ–æ“ä½œï¼Œä¾¿äºæ‰¹é‡ç®¡ç†
- **ç³»ç»Ÿç›‘æ§**ï¼šå®æ—¶çŠ¶æ€ç›‘æ§ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸

**ğŸ”§ ç³»ç»Ÿç®¡ç†æœ€ä½³å®è·µ**
- **æ ‡å‡†åŒ–æ“ä½œ**ï¼šç»Ÿä¸€ä½¿ç”¨systemctlå‘½ä»¤ç®¡ç†æœåŠ¡
- **çŠ¶æ€ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€å’Œå¤±è´¥æœåŠ¡
- **ä¾èµ–ç®¡ç†**ï¼šäº†è§£æœåŠ¡ä¾èµ–å…³ç³»ï¼Œé¿å…å¯åŠ¨é¡ºåºé—®é¢˜
- **æ—¥å¿—ç®¡ç†**ï¼šç»“åˆjournalctlæŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼Œå¿«é€Ÿæ’æŸ¥é—®é¢˜

**æ ¸å¿ƒè®°å¿†è¦ç‚¹**ï¼š
- systemctlæ˜¯ç°ä»£Linuxç³»ç»ŸæœåŠ¡ç®¡ç†çš„æ ‡å‡†å·¥å…·
- æŒæ¡åŸºæœ¬çš„å¯åœã€çŠ¶æ€æŸ¥è¯¢ã€è‡ªå¯ç®¡ç†æ˜¯åŸºç¡€
- æ•…éšœæ’æŸ¥è¦ç»“åˆstatuså’Œjournalctlå‘½ä»¤
- æ‰¹é‡æ“ä½œè¦è°¨æ…ï¼Œå…ˆç¡®è®¤å½±å“èŒƒå›´å†æ‰§è¡Œ