---
title: 5ã€å¼€æœºå¯åŠ¨æµç¨‹ä¸targetç®¡ç†
---
## ğŸ“š ç›®å½•

1. [systemdå¯åŠ¨æµç¨‹è¯¦è§£](#1-systemdå¯åŠ¨æµç¨‹è¯¦è§£)
2. [targetç›®æ ‡ç®¡ç†](#2-targetç›®æ ‡ç®¡ç†)
3. [è¿è¡Œçº§åˆ«æ˜ å°„å…³ç³»](#3-è¿è¡Œçº§åˆ«æ˜ å°„å…³ç³»)
4. [targetåˆ‡æ¢ä¸éš”ç¦»æ“ä½œ](#4-targetåˆ‡æ¢ä¸éš”ç¦»æ“ä½œ)
5. [æ•‘æ´æ¨¡å¼ä¸ç´§æ€¥æ¨¡å¼](#5-æ•‘æ´æ¨¡å¼ä¸ç´§æ€¥æ¨¡å¼)
6. [å¯åŠ¨æ€§èƒ½åˆ†æä¸ä¼˜åŒ–](#6-å¯åŠ¨æ€§èƒ½åˆ†æä¸ä¼˜åŒ–)
7. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#7-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ systemdå¯åŠ¨æµç¨‹è¯¦è§£


### 1.1 ä»€ä¹ˆæ˜¯systemdå¯åŠ¨æµç¨‹


**ç®€å•ç†è§£**ï¼šsystemdå°±åƒæ˜¯Linuxç³»ç»Ÿçš„"æ€»æŒ‡æŒ¥"ï¼Œè´Ÿè´£åœ¨å¼€æœºæ—¶æŒ‰ç…§ä¸€å®šé¡ºåºå¯åŠ¨å„ç§æœåŠ¡å’Œç¨‹åºã€‚

```
ä¼ ç»Ÿå¯åŠ¨ vs systemdå¯åŠ¨ï¼š

ä¼ ç»ŸSysVå¯åŠ¨ï¼š
å¼€æœº â†’ BIOS â†’ å†…æ ¸ â†’ init â†’ è„šæœ¬1 â†’ è„šæœ¬2 â†’ ... â†’ ç”¨æˆ·ç™»å½•
ç‰¹ç‚¹ï¼šä¸²è¡Œæ‰§è¡Œï¼Œæ…¢ï¼

systemdå¯åŠ¨ï¼š
å¼€æœº â†’ BIOS â†’ å†…æ ¸ â†’ systemd â†’ å¹¶è¡Œå¯åŠ¨å„ç§æœåŠ¡ â†’ ç”¨æˆ·ç™»å½•
ç‰¹ç‚¹ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œå¿«ï¼
```

### 1.2 systemdå®Œæ•´å¯åŠ¨æµç¨‹


**ğŸ”¸ å¯åŠ¨é˜¶æ®µè¯¦è§£**

```
å®Œæ•´å¯åŠ¨æµç¨‹å›¾ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BIOS/UEFI     â”‚ â† ç¡¬ä»¶è‡ªæ£€ï¼ŒåŠ è½½å¼•å¯¼ç¨‹åº
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GRUBå¼•å¯¼      â”‚ â† åŠ è½½Linuxå†…æ ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Linuxå†…æ ¸     â”‚ â† åˆå§‹åŒ–ç¡¬ä»¶ï¼ŒæŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   systemdå¯åŠ¨   â”‚ â† è¿›ç¨‹å·PID=1ï¼Œæ¥ç®¡ç³»ç»Ÿå¯åŠ¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  targetç›®æ ‡åŠ è½½  â”‚ â† æ ¹æ®é»˜è®¤ç›®æ ‡å¯åŠ¨ç›¸åº”æœåŠ¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·ç™»å½•ç•Œé¢   â”‚ â† å›¾å½¢ç•Œé¢æˆ–å‘½ä»¤è¡Œç™»å½•
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ å…³é”®ç†è§£**ï¼š
- **PID=1**ï¼šsystemdæ˜¯ç³»ç»Ÿç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰å…¶ä»–è¿›ç¨‹
- **å¹¶è¡Œå¯åŠ¨**ï¼šä¸åŒæœåŠ¡å¯ä»¥åŒæ—¶å¯åŠ¨ï¼Œå¤§å¤§æé«˜å¯åŠ¨é€Ÿåº¦
- **ä¾èµ–ç®¡ç†**ï¼šsystemdä¼šè‡ªåŠ¨å¤„ç†æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»

### 1.3 systemdæ ¸å¿ƒç»„ä»¶


**ğŸ”¸ ä¸»è¦ç»„ä»¶è¯´æ˜**

| ç»„ä»¶åç§° | **ä½œç”¨** | **é€šä¿—è§£é‡Š** |
|----------|----------|-------------|
| **systemd** | `ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨` | `æ€»æŒ‡æŒ¥ï¼Œç®¡ç†æ‰€æœ‰æœåŠ¡` |
| **systemctl** | `æ§åˆ¶systemdçš„å‘½ä»¤` | `é¥æ§å™¨ï¼Œç”¨æ¥æ“ä½œæœåŠ¡` |
| **journalctl** | `æŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤` | `è®°å½•æœ¬ï¼ŒæŸ¥çœ‹ç³»ç»Ÿè¿è¡Œè®°å½•` |
| **target** | `ç³»ç»Ÿè¿è¡Œç›®æ ‡` | `ç›®æ ‡çŠ¶æ€ï¼Œæ¯”å¦‚å›¾å½¢ç•Œé¢æˆ–çº¯å‘½ä»¤è¡Œ` |

---

## 2. ğŸ¯ targetç›®æ ‡ç®¡ç†


### 2.1 ä»€ä¹ˆæ˜¯target


**é€šä¿—ç†è§£**ï¼štargetå°±åƒæ˜¯ç³»ç»Ÿçš„"è¿è¡Œæ¨¡å¼"ï¼Œå†³å®šäº†å¼€æœºåç³»ç»Ÿè¦å¯åŠ¨å“ªäº›æœåŠ¡ï¼Œè¿›å…¥ä»€ä¹ˆçŠ¶æ€ã€‚

```
ç”Ÿæ´»ä¸­çš„ç±»æ¯”ï¼š
target = æ‰‹æœºçš„ä¸åŒæ¨¡å¼
- é£è¡Œæ¨¡å¼ï¼šå…³é—­ç½‘ç»œç›¸å…³åŠŸèƒ½
- çœç”µæ¨¡å¼ï¼šå…³é—­éƒ¨åˆ†åŠŸèƒ½
- æ­£å¸¸æ¨¡å¼ï¼šæ‰€æœ‰åŠŸèƒ½å¼€å¯

Linuxä¸­çš„targetï¼š
- multi-user.targetï¼šå‘½ä»¤è¡Œæ¨¡å¼
- graphical.targetï¼šå›¾å½¢ç•Œé¢æ¨¡å¼
- rescue.targetï¼šæ•‘æ´æ¨¡å¼
```

### 2.2 default.targeté»˜è®¤ç›®æ ‡é…ç½®


**ğŸ”¸ æŸ¥çœ‹å½“å‰é»˜è®¤target**

```bash
# æŸ¥çœ‹å½“å‰é»˜è®¤å¯åŠ¨ç›®æ ‡
systemctl get-default
# è¾“å‡ºï¼šgraphical.target

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨target
systemctl list-unit-files --type=target
```

**ğŸ”¸ è®¾ç½®é»˜è®¤target**

```bash
# è®¾ç½®ä¸ºå›¾å½¢ç•Œé¢æ¨¡å¼ï¼ˆæ¡Œé¢ç¯å¢ƒï¼‰
sudo systemctl set-default graphical.target

# è®¾ç½®ä¸ºå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆæœåŠ¡å™¨å¸¸ç”¨ï¼‰
sudo systemctl set-default multi-user.target

# éªŒè¯è®¾ç½®æ˜¯å¦ç”Ÿæ•ˆ
systemctl get-default
```

**ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯**ï¼š
- **æœåŠ¡å™¨**ï¼šé€šå¸¸è®¾ç½®ä¸º`multi-user.target`ï¼ŒèŠ‚çœèµ„æº
- **ä¸ªäººç”µè„‘**ï¼šè®¾ç½®ä¸º`graphical.target`ï¼Œä½¿ç”¨å›¾å½¢ç•Œé¢

### 2.3 å¸¸ç”¨targetè¯¦è§£


**ğŸ”¸ ä¸»è¦targetå¯¹æ¯”**

```
targetåŠŸèƒ½å¯¹æ¯”å›¾ï¼š

multi-user.targetï¼ˆå‘½ä»¤è¡Œæ¨¡å¼ï¼‰
â”œâ”€â”€ ç½‘ç»œæœåŠ¡ âœ…
â”œâ”€â”€ SSHæœåŠ¡ âœ…
â”œâ”€â”€ ç³»ç»ŸæœåŠ¡ âœ…
â”œâ”€â”€ å›¾å½¢ç•Œé¢ âŒ
â””â”€â”€ é€‚ç”¨åœºæ™¯ï¼šæœåŠ¡å™¨ã€è¿œç¨‹ç®¡ç†

graphical.targetï¼ˆå›¾å½¢ç•Œé¢æ¨¡å¼ï¼‰  
â”œâ”€â”€ ç½‘ç»œæœåŠ¡ âœ…
â”œâ”€â”€ SSHæœåŠ¡ âœ…
â”œâ”€â”€ ç³»ç»ŸæœåŠ¡ âœ…
â”œâ”€â”€ å›¾å½¢ç•Œé¢ âœ…
â””â”€â”€ é€‚ç”¨åœºæ™¯ï¼šä¸ªäººç”µè„‘ã€å·¥ä½œç«™
```

**âš ï¸ é‡è¦æé†’**ï¼šgraphical.targetåŒ…å«multi-user.targetï¼Œæ˜¯åœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†å›¾å½¢ç•Œé¢ã€‚

---

## 3. ğŸ”„ è¿è¡Œçº§åˆ«æ˜ å°„å…³ç³»


### 3.1 ä¼ ç»Ÿè¿è¡Œçº§åˆ«ä¸systemd targetçš„å…³ç³»


**é€šä¿—è§£é‡Š**ï¼šä»¥å‰Linuxç”¨æ•°å­—ï¼ˆ0-6ï¼‰è¡¨ç¤ºä¸åŒçš„è¿è¡Œæ¨¡å¼ï¼Œç°åœ¨systemdç”¨targetåç§°è¡¨ç¤ºï¼Œä½†ä¸ºäº†å…¼å®¹æ€§ï¼Œä¸¤è€…æœ‰å¯¹åº”å…³ç³»ã€‚

**ğŸ”¸ å®Œæ•´æ˜ å°„å…³ç³»è¡¨**

| ä¼ ç»Ÿè¿è¡Œçº§åˆ« | **systemd target** | **è¯´æ˜** | **å®é™…ç”¨é€”** |
|-------------|------------------|----------|-------------|
| **0** | `poweroff.target` | `ç³»ç»Ÿå…³æœº` | `shutdownå‘½ä»¤çš„ç›®æ ‡çŠ¶æ€` |
| **1** | `rescue.target` | `å•ç”¨æˆ·æ•‘æ´æ¨¡å¼` | `ç³»ç»Ÿç»´æŠ¤ã€å¯†ç é‡ç½®` |
| **2** | `multi-user.target` | `å¤šç”¨æˆ·æ— ç½‘ç»œ` | `å¾ˆå°‘ä½¿ç”¨` |
| **3** | `multi-user.target` | `å¤šç”¨æˆ·æœ‰ç½‘ç»œå‘½ä»¤è¡Œ` | `æœåŠ¡å™¨æ ‡å‡†æ¨¡å¼` |
| **4** | `multi-user.target` | `ç”¨æˆ·è‡ªå®šä¹‰` | `å¾ˆå°‘ä½¿ç”¨` |
| **5** | `graphical.target` | `å›¾å½¢ç•Œé¢æ¨¡å¼` | `ä¸ªäººç”µè„‘æ ‡å‡†æ¨¡å¼` |
| **6** | `reboot.target` | `ç³»ç»Ÿé‡å¯` | `rebootå‘½ä»¤çš„ç›®æ ‡çŠ¶æ€` |

### 3.2 å…¼å®¹æ€§å‘½ä»¤


**ğŸ”¸ ä¼ ç»Ÿå‘½ä»¤ä»ç„¶å¯ç”¨**

```bash
# ä¼ ç»Ÿæ–¹å¼æŸ¥çœ‹è¿è¡Œçº§åˆ«ï¼ˆä»ç„¶æœ‰æ•ˆï¼‰
runlevel
# è¾“å‡ºï¼šN 5  ï¼ˆè¡¨ç¤ºå½“å‰è¿è¡Œçº§åˆ«5ï¼‰

# systemdæ–¹å¼æŸ¥çœ‹å½“å‰target
systemctl get-default
# è¾“å‡ºï¼šgraphical.target
```

**ğŸ’¡ æ–°æ‰‹å»ºè®®**ï¼šå­¦ä¹ systemdçš„targetæ¦‚å¿µï¼Œä½†äº†è§£ä¼ ç»Ÿè¿è¡Œçº§åˆ«æœ‰åŠ©äºç†è§£ç³»ç»Ÿå†å²å’Œå…¼å®¹æŸäº›è€è„šæœ¬ã€‚

---

## 4. ğŸ”€ targetåˆ‡æ¢ä¸éš”ç¦»æ“ä½œ


### 4.1 ä»€ä¹ˆæ˜¯targetåˆ‡æ¢


**é€šä¿—ç†è§£**ï¼šå°±åƒæ‰‹æœºåˆ‡æ¢ä¸åŒæ¨¡å¼ä¸€æ ·ï¼Œç³»ç»Ÿå¯ä»¥åœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹åˆ‡æ¢åˆ°ä¸åŒçš„è¿è¡ŒçŠ¶æ€ã€‚

### 4.2 ä¸´æ—¶åˆ‡æ¢target


**ğŸ”¸ åŸºæœ¬åˆ‡æ¢æ“ä½œ**

```bash
# åˆ‡æ¢åˆ°å›¾å½¢ç•Œé¢æ¨¡å¼ï¼ˆç«‹å³ç”Ÿæ•ˆï¼Œé‡å¯åæ¢å¤é»˜è®¤ï¼‰
sudo systemctl isolate graphical.target

# åˆ‡æ¢åˆ°å‘½ä»¤è¡Œæ¨¡å¼
sudo systemctl isolate multi-user.target

# åˆ‡æ¢åˆ°æ•‘æ´æ¨¡å¼
sudo systemctl isolate rescue.target
```

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
- `isolate`å‘½ä»¤ä¼šåœæ­¢å½“å‰targetä¸éœ€è¦çš„æ‰€æœ‰æœåŠ¡
- åˆ‡æ¢åå½“å‰ç”¨æˆ·å¯èƒ½ä¼šè¢«è¸¢ä¸‹çº¿
- åªæ˜¯ä¸´æ—¶åˆ‡æ¢ï¼Œé‡å¯åæ¢å¤é»˜è®¤è®¾ç½®

### 4.3 æ°¸ä¹…åˆ‡æ¢target


**ğŸ”¸ æ°¸ä¹…åˆ‡æ¢æ“ä½œæµç¨‹**

```bash
# æ­¥éª¤1ï¼šè®¾ç½®æ–°çš„é»˜è®¤target
sudo systemctl set-default multi-user.target

# æ­¥éª¤2ï¼šç«‹å³åˆ‡æ¢ï¼ˆå¯é€‰ï¼‰
sudo systemctl isolate multi-user.target

# æ­¥éª¤3ï¼šéªŒè¯è®¾ç½®
systemctl get-default
```

### 4.4 å®é™…åº”ç”¨åœºæ™¯


**ğŸ“‹ å¸¸è§ä½¿ç”¨åœºæ™¯**

```
ğŸ–¥ï¸ æ¡Œé¢ç”µè„‘å›¾å½¢ç•Œé¢å‡ºé—®é¢˜ï¼š
é—®é¢˜ï¼šå›¾å½¢ç•Œé¢å¡æ­»ï¼Œæ— æ³•æ­£å¸¸ä½¿ç”¨
è§£å†³ï¼šåˆ‡æ¢åˆ°multi-user.targetï¼Œç”¨å‘½ä»¤è¡Œä¿®å¤

ğŸ–§ æœåŠ¡å™¨èŠ‚çœèµ„æºï¼š
éœ€æ±‚ï¼šæœåŠ¡å™¨ä¸éœ€è¦å›¾å½¢ç•Œé¢ï¼ŒèŠ‚çœå†…å­˜å’ŒCPU
æ“ä½œï¼šæ°¸ä¹…è®¾ç½®ä¸ºmulti-user.target

ğŸ”§ ç³»ç»Ÿç»´æŠ¤ï¼š
éœ€æ±‚ï¼šéœ€è¦åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹è¿›è¡Œç³»ç»Ÿç»´æŠ¤
æ“ä½œï¼šåˆ‡æ¢åˆ°rescue.target
```

---

## 5. ğŸ†˜ æ•‘æ´æ¨¡å¼ä¸ç´§æ€¥æ¨¡å¼


### 5.1 ä»€ä¹ˆæ˜¯æ•‘æ´æ¨¡å¼å’Œç´§æ€¥æ¨¡å¼


**é€šä¿—è§£é‡Š**ï¼š
- **æ•‘æ´æ¨¡å¼**ï¼šå°±åƒæ±½è½¦çš„"å®‰å…¨æ¨¡å¼"ï¼Œç³»ç»Ÿå‡ºé—®é¢˜æ—¶ç”¨æ¥ä¿®å¤
- **ç´§æ€¥æ¨¡å¼**ï¼šè¿æ•‘æ´æ¨¡å¼éƒ½è¿›ä¸äº†æ—¶çš„"æœ€åæ‰‹æ®µ"

### 5.2 æ•‘æ´æ¨¡å¼ï¼ˆrescue.targetï¼‰


**ğŸ”¸ æ•‘æ´æ¨¡å¼ç‰¹ç‚¹**

```
æ•‘æ´æ¨¡å¼å¯åŠ¨å†…å®¹ï¼š
â”œâ”€â”€ åŸºæœ¬ç³»ç»ŸæœåŠ¡ âœ…
â”œâ”€â”€ æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ âœ…  
â”œâ”€â”€ ç½‘ç»œæœåŠ¡ âŒ
â”œâ”€â”€ å›¾å½¢ç•Œé¢ âŒ
â”œâ”€â”€ å¤šç”¨æˆ·ç™»å½• âŒ
â””â”€â”€ rootç”¨æˆ·ç™»å½• âœ…

é€‚ç”¨åœºæ™¯ï¼š
â€¢ ä¿®å¤æ–‡ä»¶ç³»ç»Ÿé”™è¯¯
â€¢ é‡ç½®ç”¨æˆ·å¯†ç 
â€¢ ä¿®å¤å¯åŠ¨é—®é¢˜
â€¢ ç³»ç»Ÿé…ç½®ä¿®å¤
```

**ğŸ”¸ è¿›å…¥æ•‘æ´æ¨¡å¼çš„æ–¹æ³•**

```bash
# æ–¹æ³•1ï¼šä»æ­£å¸¸ç³»ç»Ÿåˆ‡æ¢
sudo systemctl isolate rescue.target

# æ–¹æ³•2ï¼šå¼€æœºæ—¶åœ¨GRUBèœå•æŒ‰'e'ç¼–è¾‘å¯åŠ¨å‚æ•°
# åœ¨linuxè¡Œæœ«å°¾æ·»åŠ ï¼š
systemd.unit=rescue.target

# æ–¹æ³•3ï¼šä¼ ç»Ÿæ–¹å¼ï¼ˆå…¼å®¹ï¼‰
sudo telinit 1
```

### 5.3 ç´§æ€¥æ¨¡å¼ï¼ˆemergency.targetï¼‰


**ğŸ”¸ ç´§æ€¥æ¨¡å¼ç‰¹ç‚¹**

```
ç´§æ€¥æ¨¡å¼å¯åŠ¨å†…å®¹ï¼š
â”œâ”€â”€ æœ€åŸºæœ¬å†…æ ¸åŠŸèƒ½ âœ…
â”œâ”€â”€ æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆåªè¯»ï¼‰ âœ…
â”œâ”€â”€ å…¶ä»–æ–‡ä»¶ç³»ç»Ÿ âŒ
â”œâ”€â”€ ç½‘ç»œæœåŠ¡ âŒ
â”œâ”€â”€ å¤§éƒ¨åˆ†ç³»ç»ŸæœåŠ¡ âŒ
â””â”€â”€ rootç”¨æˆ·ç™»å½• âœ…

ä½¿ç”¨åœºæ™¯ï¼š
â€¢ æ•‘æ´æ¨¡å¼éƒ½è¿›ä¸äº†
â€¢ æ–‡ä»¶ç³»ç»Ÿä¸¥é‡æŸå
â€¢ ç³»ç»Ÿæ— æ³•æ­£å¸¸å¯åŠ¨
â€¢ ç´§æ€¥ç³»ç»Ÿä¿®å¤
```

**ğŸ”¸ è¿›å…¥ç´§æ€¥æ¨¡å¼**

```bash
# å¼€æœºæ—¶åœ¨GRUBèœå•æŒ‰'e'ç¼–è¾‘å¯åŠ¨å‚æ•°
# åœ¨linuxè¡Œæœ«å°¾æ·»åŠ ï¼š
systemd.unit=emergency.target
```

### 5.4 æ•‘æ´æ¨¡å¼å®æˆ˜æ“ä½œ


**ğŸ’» å¿˜è®°rootå¯†ç ä¿®å¤ç¤ºä¾‹**

```bash
# 1. è¿›å…¥æ•‘æ´æ¨¡å¼åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™rootæƒé™

# 2. é‡æ–°æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿä¸ºå¯å†™
mount -o remount,rw /

# 3. ä¿®æ”¹rootå¯†ç 
passwd root
# è¾“å…¥æ–°å¯†ç 

# 4. é‡å¯ç³»ç»Ÿ
systemctl reboot
```

**âš ï¸ å®‰å…¨æé†’**ï¼šæ•‘æ´æ¨¡å¼é€šå¸¸ä¸éœ€è¦å¯†ç å°±èƒ½è·å¾—rootæƒé™ï¼Œæ‰€ä»¥ç‰©ç†å®‰å…¨å¾ˆé‡è¦ã€‚

---

## 6. ğŸ“Š å¯åŠ¨æ€§èƒ½åˆ†æä¸ä¼˜åŒ–


### 6.1 ä»€ä¹ˆæ˜¯å¯åŠ¨æ€§èƒ½åˆ†æ


**é€šä¿—è§£é‡Š**ï¼šå°±åƒä½“æ£€ä¸€æ ·ï¼Œæ£€æŸ¥ç³»ç»Ÿå¼€æœºè¿‡ç¨‹ä¸­å“ªäº›åœ°æ–¹æ…¢äº†ï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚

### 6.2 systemd-analyzeåŸºæœ¬ä½¿ç”¨


**ğŸ”¸ æŸ¥çœ‹æ€»å¯åŠ¨æ—¶é—´**

```bash
# æ˜¾ç¤ºç³»ç»Ÿå¯åŠ¨æ€»è€—æ—¶
systemd-analyze
# è¾“å‡ºç¤ºä¾‹ï¼š
# Startup finished in 2.841s (firmware) + 1.657s (loader) + 
# 2.866s (kernel) + 4.278s (userspace) = 11.642s

# è¯¦ç»†è§£é‡Šå„é˜¶æ®µï¼š
# firmware: BIOS/UEFIé˜¶æ®µ
# loader: å¼•å¯¼åŠ è½½å™¨é˜¶æ®µ  
# kernel: å†…æ ¸å¯åŠ¨é˜¶æ®µ
# userspace: ç”¨æˆ·ç©ºé—´ï¼ˆsystemdç®¡ç†çš„æœåŠ¡ï¼‰é˜¶æ®µ
```

**ğŸ”¸ åˆ†ææœåŠ¡å¯åŠ¨æ—¶é—´**

```bash
# æ˜¾ç¤ºæœåŠ¡å¯åŠ¨è€—æ—¶æ’è¡Œï¼ˆæœ€æ…¢çš„å‰10ä¸ªï¼‰
systemd-analyze blame | head -10

# è¾“å‡ºç¤ºä¾‹ï¼š
#  3.521s NetworkManager-wait-online.service
#  2.253s dev-sda1.device
#  1.830s systemd-journal-flush.service
#  1.634s udisks2.service
#  ...
```

### 6.3 å›¾å½¢åŒ–åˆ†æ


**ğŸ”¸ ç”Ÿæˆå¯åŠ¨æ—¶é—´çº¿å›¾**

```bash
# ç”ŸæˆSVGæ ¼å¼çš„å¯åŠ¨æ—¶é—´çº¿å›¾
systemd-analyze plot > bootchart.svg

# ç„¶åå¯ä»¥ç”¨æµè§ˆå™¨æ‰“å¼€bootchart.svgæŸ¥çœ‹
# å›¾ä¸­æ˜¾ç¤ºæ¯ä¸ªæœåŠ¡çš„å¯åŠ¨æ—¶é—´å’Œä¾èµ–å…³ç³»
```

**ğŸ”¸ åˆ†æå…³é”®è·¯å¾„**

```bash
# æ˜¾ç¤ºå¯åŠ¨å…³é”®è·¯å¾„ï¼ˆå½±å“æ€»å¯åŠ¨æ—¶é—´çš„æœåŠ¡é“¾ï¼‰
systemd-analyze critical-chain

# è¾“å‡ºç¤ºä¾‹ï¼š
# graphical.target @11.642s
# â””â”€multi-user.target @11.642s
#   â””â”€NetworkManager.service @8.334s +1.431s
#     â””â”€dbus.service @8.300s +33ms
#       â””â”€basic.target @8.274s
```

### 6.4 å¯åŠ¨ä¼˜åŒ–ç­–ç•¥


**ğŸš€ å¸¸è§ä¼˜åŒ–æ–¹æ³•**

**ğŸ”¸ ä¼˜åŒ–ç­–ç•¥å¯¹æ¯”è¡¨**

| ä¼˜åŒ–æ–¹æ³• | **éš¾åº¦** | **æ•ˆæœ** | **è¯´æ˜** |
|----------|----------|----------|----------|
| **ç¦ç”¨ä¸éœ€è¦çš„æœåŠ¡** | `ğŸŸ¢ ç®€å•` | `â­â­â­` | `æœ€ç›´æ¥æœ‰æ•ˆ` |
| **å¹¶è¡ŒåŒ–å¯åŠ¨** | `ğŸŸ¡ ä¸­ç­‰` | `â­â­` | `systemdé»˜è®¤å·²ä¼˜åŒ–` |
| **ä½¿ç”¨SSDç¡¬ç›˜** | `ğŸŸ¡ ä¸­ç­‰` | `â­â­â­â­` | `ç¡¬ä»¶å‡çº§ï¼Œæ•ˆæœæ˜¾è‘—` |
| **å‡å°‘ç½‘ç»œç­‰å¾…æ—¶é—´** | `ğŸŸ¢ ç®€å•` | `â­â­` | `è°ƒæ•´è¶…æ—¶å‚æ•°` |

**ğŸ”¸ å®é™…ä¼˜åŒ–æ“ä½œ**

```bash
# 1. æŸ¥æ‰¾è€—æ—¶é•¿çš„æœåŠ¡
systemd-analyze blame | head -5

# 2. åˆ†æå…·ä½“æœåŠ¡ï¼ˆä»¥NetworkManager-wait-onlineä¸ºä¾‹ï¼‰
systemctl status NetworkManager-wait-online.service

# 3. å¦‚æœä¸éœ€è¦ç­‰å¾…ç½‘ç»œï¼Œå¯ä»¥ç¦ç”¨
sudo systemctl disable NetworkManager-wait-online.service

# 4. é‡å¯éªŒè¯æ•ˆæœ
sudo reboot
# é‡å¯åå†æ¬¡è¿è¡Œ systemd-analyze å¯¹æ¯”æ—¶é—´
```

**ğŸ’¡ æ–°æ‰‹ä¼˜åŒ–å»ºè®®**ï¼š
- **ç¬¬ä¸€æ­¥**ï¼šå…ˆç”¨`systemd-analyze blame`æ‰¾å‡ºæœ€æ…¢çš„æœåŠ¡
- **ç¬¬äºŒæ­¥**ï¼šåˆ†æè¿™äº›æœåŠ¡æ˜¯å¦å¿…éœ€
- **ç¬¬ä¸‰æ­¥**ï¼šç¦ç”¨ä¸å¿…è¦çš„æœåŠ¡
- **ç¬¬å››æ­¥**ï¼šéªŒè¯ä¼˜åŒ–æ•ˆæœ

### 6.5 å¼€æœºå¯åŠ¨æ—¶é—´ä¼˜åŒ–å®ä¾‹


**ğŸ“‹ ä¼˜åŒ–å‰åå¯¹æ¯”**

```
ä¼˜åŒ–å‰å¯åŠ¨æ—¶é—´åˆ†æï¼š
systemd-analyze
Startup finished in 3.2s (firmware) + 2.1s (loader) + 
3.5s (kernel) + 8.7s (userspace) = 17.5s
ä¸»è¦é—®é¢˜ï¼šuserspaceé˜¶æ®µå¤ªæ…¢

æœ€æ…¢çš„æœåŠ¡ï¼š
systemd-analyze blame | head -3
  4.2s NetworkManager-wait-online.service
  2.8s plymouth-quit-wait.service  
  1.9s accounts-daemon.service

ä¼˜åŒ–æ“ä½œï¼š
# ç¦ç”¨ç½‘ç»œç­‰å¾…æœåŠ¡ï¼ˆæœåŠ¡å™¨ä¸éœ€è¦ï¼‰
sudo systemctl disable NetworkManager-wait-online.service

# ç¦ç”¨å¼€æœºåŠ¨ç”»ç­‰å¾…æœåŠ¡
sudo systemctl disable plymouth-quit-wait.service

ä¼˜åŒ–åå¯åŠ¨æ—¶é—´ï¼š
Startup finished in 3.2s (firmware) + 2.1s (loader) + 
3.5s (kernel) + 3.8s (userspace) = 12.6s
æå‡æ•ˆæœï¼šä»17.5så‡å°‘åˆ°12.6sï¼Œå¿«äº†4.9ç§’ï¼
```

---

## 7. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 7.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ systemdå¯åŠ¨æµç¨‹ï¼šBIOS â†’ å†…æ ¸ â†’ systemd â†’ target â†’ æœåŠ¡å¯åŠ¨
ğŸ”¸ targetç®¡ç†ï¼šç³»ç»Ÿè¿è¡Œç›®æ ‡ï¼Œå†³å®šå¯åŠ¨å“ªäº›æœåŠ¡
ğŸ”¸ default.targetï¼šç³»ç»Ÿé»˜è®¤å¯åŠ¨ç›®æ ‡é…ç½®
ğŸ”¸ è¿è¡Œçº§åˆ«æ˜ å°„ï¼šä¼ ç»Ÿæ•°å­—çº§åˆ«ä¸systemd targetçš„å¯¹åº”å…³ç³»
ğŸ”¸ targetåˆ‡æ¢ï¼šisolateå‘½ä»¤ä¸´æ—¶åˆ‡æ¢ï¼Œset-defaultæ°¸ä¹…è®¾ç½®
ğŸ”¸ æ•‘æ´æ¨¡å¼ï¼šç³»ç»Ÿç»´æŠ¤å’Œæ•…éšœä¿®å¤çš„å®‰å…¨æ¨¡å¼
ğŸ”¸ å¯åŠ¨åˆ†æï¼šsystemd-analyzeå·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æå’Œä¼˜åŒ–
```

### 7.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ systemdçš„æ ¸å¿ƒä¼˜åŠ¿**
```
å¹¶è¡Œå¯åŠ¨ï¼šä¸åŒæœåŠ¡åŒæ—¶å¯åŠ¨ï¼Œæé«˜æ•ˆç‡
ä¾èµ–ç®¡ç†ï¼šè‡ªåŠ¨å¤„ç†æœåŠ¡é—´ä¾èµ–å…³ç³»  
ç»Ÿä¸€ç®¡ç†ï¼šç”¨systemctlç»Ÿä¸€ç®¡ç†æ‰€æœ‰æœåŠ¡
æ€§èƒ½ç›‘æ§ï¼šå†…ç½®åˆ†æå·¥å…·ï¼Œä¾¿äºä¼˜åŒ–
```

**ğŸ”¹ targetçš„æœ¬è´¨**
```
target = ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ + éœ€è¦å¯åŠ¨çš„æœåŠ¡é›†åˆ
multi-user.targetï¼šå‘½ä»¤è¡Œç¯å¢ƒï¼Œé€‚åˆæœåŠ¡å™¨
graphical.targetï¼šå›¾å½¢ç•Œé¢ç¯å¢ƒï¼Œé€‚åˆæ¡Œé¢
rescue.targetï¼šæ•‘æ´ç¯å¢ƒï¼Œé€‚åˆæ•…éšœä¿®å¤
```

**ğŸ”¹ æ€§èƒ½ä¼˜åŒ–æ€è·¯**
```
åˆ†æ â†’ å®šä½ â†’ ä¼˜åŒ– â†’ éªŒè¯
1. ç”¨systemd-analyzeæ‰¾å‡ºæ…¢çš„ç¯èŠ‚
2. åˆ†æè¿™äº›æœåŠ¡çš„å¿…è¦æ€§
3. ç¦ç”¨ä¸éœ€è¦çš„æœåŠ¡
4. æµ‹è¯•ä¼˜åŒ–æ•ˆæœ
```

### 7.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸åŒåœºæ™¯çš„æœ€ä½³é…ç½®**

```
ğŸ“‹ æœåŠ¡å™¨ç¯å¢ƒé…ç½®ï¼š
é»˜è®¤ç›®æ ‡ï¼šmulti-user.target
ä¼˜åŒ–é‡ç‚¹ï¼šç¦ç”¨å›¾å½¢ç•Œé¢ç›¸å…³æœåŠ¡
å¯åŠ¨æ—¶é—´ç›®æ ‡ï¼š< 30ç§’

ğŸ’» æ¡Œé¢ç¯å¢ƒé…ç½®ï¼š  
é»˜è®¤ç›®æ ‡ï¼šgraphical.target
ä¼˜åŒ–é‡ç‚¹ï¼šå¹³è¡¡åŠŸèƒ½ä¸å¯åŠ¨é€Ÿåº¦
å¯åŠ¨æ—¶é—´ç›®æ ‡ï¼š< 45ç§’

ğŸ”§ ç»´æŠ¤ç¯å¢ƒé…ç½®ï¼š
ä¸´æ—¶ç›®æ ‡ï¼šrescue.target
ç”¨é€”ï¼šå¯†ç é‡ç½®ã€æ–‡ä»¶ç³»ç»Ÿä¿®å¤
ç‰¹ç‚¹ï¼šå•ç”¨æˆ·å®‰å…¨æ¨¡å¼
```

**ğŸ“ˆ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥**

```bash
# targetç®¡ç†
systemctl get-default                 # æŸ¥çœ‹é»˜è®¤target
systemctl set-default multi-user.target  # è®¾ç½®é»˜è®¤target  
systemctl isolate graphical.target   # ä¸´æ—¶åˆ‡æ¢target

# æ•‘æ´æ¨¡å¼
systemctl isolate rescue.target      # è¿›å…¥æ•‘æ´æ¨¡å¼
systemctl isolate emergency.target   # è¿›å…¥ç´§æ€¥æ¨¡å¼

# æ€§èƒ½åˆ†æ
systemd-analyze                      # æŸ¥çœ‹å¯åŠ¨æ€»æ—¶é—´
systemd-analyze blame               # æŸ¥çœ‹æœåŠ¡å¯åŠ¨è€—æ—¶
systemd-analyze critical-chain      # æŸ¥çœ‹å…³é”®å¯åŠ¨è·¯å¾„
```

**æ ¸å¿ƒè®°å¿†**ï¼š
- systemdæ˜¯ç³»ç»Ÿå¯åŠ¨çš„æ€»æŒ‡æŒ¥ï¼Œç®¡ç†æ‰€æœ‰æœåŠ¡å¯åŠ¨
- targetå†³å®šç³»ç»Ÿå¯åŠ¨åçš„è¿è¡ŒçŠ¶æ€å’ŒæœåŠ¡é›†åˆ  
- multi-user.targetç”¨äºæœåŠ¡å™¨ï¼Œgraphical.targetç”¨äºæ¡Œé¢
- ç”¨systemd-analyzeåˆ†æå’Œä¼˜åŒ–å¯åŠ¨æ€§èƒ½
- æ•‘æ´æ¨¡å¼æ˜¯ç³»ç»Ÿæ•…éšœæ—¶çš„å®‰å…¨ä¿®å¤ç¯å¢ƒ