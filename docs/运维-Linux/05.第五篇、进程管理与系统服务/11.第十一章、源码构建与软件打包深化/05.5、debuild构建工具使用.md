---
title: 5ã€debuildæ„å»ºå·¥å…·ä½¿ç”¨
---
## ğŸ“š ç›®å½•


1. [debuildæ„å»ºå·¥å…·æ¦‚è¿°](#1-debuildæ„å»ºå·¥å…·æ¦‚è¿°)
2. [debuildå‘½ä»¤å‚æ•°ä¸é€‰é¡¹](#2-debuildå‘½ä»¤å‚æ•°ä¸é€‰é¡¹)
3. [æ„å»ºç¯å¢ƒå‡†å¤‡ä¸é…ç½®](#3-æ„å»ºç¯å¢ƒå‡†å¤‡ä¸é…ç½®)
4. [æºç åŒ…æ ¼å¼ä¸å‡†å¤‡](#4-æºç åŒ…æ ¼å¼ä¸å‡†å¤‡)
5. [debianç›®å½•åˆ›å»ºä¸é…ç½®](#5-debianç›®å½•åˆ›å»ºä¸é…ç½®)
6. [æ„å»ºä¾èµ–å¤„ç†ä¸å®‰è£…](#6-æ„å»ºä¾èµ–å¤„ç†ä¸å®‰è£…)
7. [æ„å»ºè¿‡ç¨‹ç›‘æ§ä¸æ—¥å¿—](#7-æ„å»ºè¿‡ç¨‹ç›‘æ§ä¸æ—¥å¿—)
8. [ç­¾åä¸éªŒè¯æœºåˆ¶](#8-ç­¾åä¸éªŒè¯æœºåˆ¶)
9. [æ„å»ºäº§ç‰©ç®¡ç†ä¸åˆ†å‘](#9-æ„å»ºäº§ç‰©ç®¡ç†ä¸åˆ†å‘)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

# 1. ğŸ¯ debuildæ„å»ºå·¥å…·æ¦‚è¿°



## 1.1 ä»€ä¹ˆæ˜¯debuild



**ç®€å•ç†è§£**ï¼šdebuildå°±æ˜¯Debian/Ubuntuç³»ç»Ÿä¸Šçš„"è½¯ä»¶æ‰“åŒ…å·¥å‚"

```
ç±»æ¯”ç†è§£ï¼š
ç°å®ä¸–ç•Œï¼šå·¥å‚æŠŠåŸææ–™åŠ å·¥æˆå•†å“
debuildï¼šæŠŠæºä»£ç "åŠ å·¥"æˆ.debå®‰è£…åŒ…

åŸæ–™ â†’ å·¥å‚ â†’ æˆå“
æºç  â†’ debuild â†’ .debåŒ…
```

**æ ¸å¿ƒä½œç”¨**ï¼š
- ğŸ“¦ **è‡ªåŠ¨åŒ–æ‰“åŒ…**ï¼šå°†æºä»£ç è‡ªåŠ¨æ„å»ºæˆæ ‡å‡†çš„.debå®‰è£…åŒ…
- ğŸ”§ **ä¾èµ–å¤„ç†**ï¼šè‡ªåŠ¨è§£å†³æ„å»ºè¿‡ç¨‹ä¸­éœ€è¦çš„å„ç§ä¾èµ–
- âœ… **è´¨é‡æ£€æŸ¥**ï¼šæ£€æŸ¥åŒ…çš„è§„èŒƒæ€§å’Œå®Œæ•´æ€§
- ğŸ” **ç­¾åéªŒè¯**ï¼šå¯¹æ„å»ºçš„åŒ…è¿›è¡Œæ•°å­—ç­¾å

## 1.2 debuildä¸å…¶ä»–å·¥å…·çš„å…³ç³»



```
Debianæ‰“åŒ…å·¥å…·é“¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   dh_make        â”‚ â† åˆå§‹åŒ–debianç›®å½•
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   debuild        â”‚ â† æ ¸å¿ƒæ„å»ºå·¥å…·ï¼ˆæˆ‘ä»¬è¦å­¦çš„ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   dpkg-buildpackâ”‚ â† åº•å±‚æ„å»ºå¼•æ“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   lintian        â”‚ â† åŒ…è´¨é‡æ£€æŸ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

debuild = dpkg-buildpackage + lintian + ç­¾åå¤„ç†
```

**ä¸ºä»€ä¹ˆç”¨debuildè€Œä¸æ˜¯ç›´æ¥ç”¨å…¶ä»–å·¥å…·**ï¼Ÿ
- ğŸš€ **ä¸€é”®å®Œæˆ**ï¼šä¸€ä¸ªå‘½ä»¤å®Œæˆæ‰€æœ‰æ„å»ºæ­¥éª¤
- ğŸ›¡ï¸ **å®‰å…¨å¯é **ï¼šè‡ªåŠ¨å¤„ç†ç­¾åå’ŒéªŒè¯
- ğŸ“‹ **æ ‡å‡†è§„èŒƒ**ï¼šéµå¾ªDebianå®˜æ–¹æ‰“åŒ…æ ‡å‡†
- ğŸ” **è‡ªåŠ¨æ£€æŸ¥**ï¼šå†…ç½®è´¨é‡æ£€æŸ¥å·¥å…·

---

# 2. âš™ï¸ debuildå‘½ä»¤å‚æ•°ä¸é€‰é¡¹



## 2.1 åŸºæœ¬è¯­æ³•æ ¼å¼



```bash
debuild [é€‰é¡¹] [dpkg-buildpackageé€‰é¡¹]
```

**æœ€ç®€å•çš„ç”¨æ³•**ï¼š
```bash
# åœ¨æºç ç›®å½•ä¸‹ç›´æ¥æ‰§è¡Œ

cd myproject-1.0/
debuild
```

## 2.2 å¸¸ç”¨å‚æ•°è¯¦è§£



### ğŸ” ç­¾åç›¸å…³é€‰é¡¹



| å‚æ•° | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `debuild` | é»˜è®¤ç­¾åæ„å»º | æ­£å¼å‘å¸ƒåŒ…æ—¶ä½¿ç”¨ |
| `debuild -us -uc` | ä¸ç­¾åæ„å»º | **æ–°æ‰‹æ¨è**ï¼Œæµ‹è¯•æ—¶ä½¿ç”¨ |
| `debuild -S` | åªæ„å»ºæºç åŒ… | ä¸Šä¼ åˆ°PPAæ—¶ä½¿ç”¨ |
| `debuild -b` | åªæ„å»ºäºŒè¿›åˆ¶åŒ… | æœ¬åœ°å®‰è£…ä½¿ç”¨ |

**æ–°æ‰‹å¿…çŸ¥**ï¼š
```bash
# ğŸ”° æ–°æ‰‹ç¬¬ä¸€æ¬¡æ„å»ºï¼Œå»ºè®®ä½¿ç”¨ï¼š

debuild -us -uc
# -us: unsigned source (æºç åŒ…ä¸ç­¾å)

# -uc: unsigned changes (.changesæ–‡ä»¶ä¸ç­¾å)

```

### ğŸ“‹ æ„å»ºæ§åˆ¶é€‰é¡¹



```bash
# æ„å»ºç±»å‹æ§åˆ¶

debuild -S        # åªæ„å»ºæºç åŒ…(.dsc, .tar.gzæ–‡ä»¶)
debuild -b        # åªæ„å»ºäºŒè¿›åˆ¶åŒ…(.debæ–‡ä»¶) 
debuild -B        # åªæ„å»ºæ¶æ„ç›¸å…³çš„äºŒè¿›åˆ¶åŒ…
debuild -A        # åªæ„å»ºæ¶æ„æ— å…³çš„äºŒè¿›åˆ¶åŒ…

# å¹¶è¡Œæ„å»ºï¼ˆåŠ é€Ÿï¼‰

debuild -j4       # ä½¿ç”¨4ä¸ªCPUæ ¸å¿ƒå¹¶è¡Œæ„å»º
debuild -j$(nproc) # ä½¿ç”¨æ‰€æœ‰å¯ç”¨CPUæ ¸å¿ƒ
```

### ğŸ§¹ æ¸…ç†é€‰é¡¹



```bash
# æ„å»ºåæ¸…ç†

debuild -tc       # æ„å»ºå®Œæˆåæ¸…ç†æ„å»ºç›®å½•
debuild --no-tgz-check  # è·³è¿‡åŸå§‹taråŒ…æ£€æŸ¥

# å¼ºåˆ¶é‡æ–°æ„å»º

debuild -nc       # ä¸æ¸…ç†ä¹‹å‰çš„æ„å»ºï¼ˆç»§ç»­æ„å»ºï¼‰
```

## 2.3 å®ç”¨ç»„åˆç¤ºä¾‹



**ğŸ’¡ å¸¸ç”¨ç»„åˆå‘½ä»¤**ï¼š
```bash
# ğŸ”° æ–°æ‰‹å¼€å‘æµ‹è¯•ï¼ˆæœ€å¸¸ç”¨ï¼‰

debuild -us -uc -b

# ğŸ“¦ å®Œæ•´æ„å»ºæ‰€æœ‰åŒ…

debuild -us -uc

# ğŸš€ å¿«é€Ÿå¹¶è¡Œæ„å»º

debuild -us -uc -j$(nproc)

# ğŸ“¤ å‡†å¤‡ä¸Šä¼ PPAçš„æºç åŒ…

debuild -S -sa

# ğŸ§¹ æ„å»ºåè‡ªåŠ¨æ¸…ç†

debuild -us -uc -tc
```

---

# 3. ğŸ—ï¸ æ„å»ºç¯å¢ƒå‡†å¤‡ä¸é…ç½®



## 3.1 ç³»ç»Ÿç¯å¢ƒå‡†å¤‡



### å®‰è£…å¿…éœ€å·¥å…·



```bash
# Ubuntu/Debianç³»ç»Ÿ

sudo apt update
sudo apt install -y build-essential devscripts debhelper dh-make

# å·¥å…·åŒ…è¯´æ˜ï¼š

# build-essential: åŸºç¡€ç¼–è¯‘å·¥å…·ï¼ˆgcc, makeç­‰ï¼‰

# devscripts: Debianå¼€å‘å·¥å…·åŒ…ï¼ˆåŒ…å«debuildï¼‰

# debhelper: Debianæ‰“åŒ…åŠ©æ‰‹å·¥å…·

# dh-make: åˆ›å»ºdebianç›®å½•çš„å·¥å…·

```

### é…ç½®å¼€å‘è€…ä¿¡æ¯



**ä¸ºä»€ä¹ˆè¦é…ç½®**ï¼Ÿdebuildéœ€è¦çŸ¥é“æ˜¯è°åœ¨æ„å»ºè¿™ä¸ªåŒ…

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä¸´æ—¶ï¼‰

export DEBEMAIL="your-email@example.com"
export DEBFULLNAME="Your Full Name"

# æ°¸ä¹…è®¾ç½®ï¼ˆæ¨èï¼‰

echo 'export DEBEMAIL="your-email@example.com"' >> ~/.bashrc
echo 'export DEBFULLNAME="Your Full Name"' >> ~/.bashrc
source ~/.bashrc
```

## 3.2 GPGå¯†é’¥é…ç½®ï¼ˆç­¾åç”¨ï¼‰



**ä»€ä¹ˆæ˜¯GPGç­¾å**ï¼Ÿå°±åƒç»™åŒ…è£¹è´´ä¸Š"é˜²ä¼ªæ ‡ç­¾"ï¼Œè¯æ˜è¿™ä¸ªåŒ…æ˜¯ä½ æ„å»ºçš„

### ç”ŸæˆGPGå¯†é’¥



```bash
# ç”Ÿæˆæ–°å¯†é’¥

gpg --gen-key

# äº¤äº’è¿‡ç¨‹ï¼š

# 1. é€‰æ‹©å¯†é’¥ç±»å‹ï¼šé€‰æ‹©é»˜è®¤ (RSA and RSA)

# 2. å¯†é’¥é•¿åº¦ï¼šå»ºè®®2048æˆ–4096ä½

# 3. æœ‰æ•ˆæœŸï¼šå¯é€‰æ‹©ä¸è¿‡æœŸ

# 4. è¾“å…¥å§“åå’Œé‚®ç®±ï¼ˆè¦ä¸DEBFULLNAME, DEBEMAILä¸€è‡´ï¼‰

# 5. è®¾ç½®å¯†ç 

```

### æŸ¥çœ‹å’Œå¯¼å‡ºå¯†é’¥



```bash
# æŸ¥çœ‹å·²æœ‰å¯†é’¥

gpg --list-keys

# å¯¼å‡ºå…¬é’¥ï¼ˆåˆ†äº«ç»™åˆ«äººéªŒè¯ç”¨ï¼‰

gpg --export --armor your-email@example.com > mypubkey.asc
```

## 3.3 æ„å»ºç›®å½•ç»“æ„



**æ ‡å‡†çš„æ„å»ºç›®å½•ç»“æ„**ï¼š
```
~/build/                    â† æ„å»ºå·¥ä½œç›®å½•
â”œâ”€â”€ myproject-1.0/          â† æºç ç›®å½•
â”‚   â”œâ”€â”€ src/               â† æºä»£ç 
â”‚   â”œâ”€â”€ Makefile           â† æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ debian/            â† Debianæ‰“åŒ…é…ç½®ï¼ˆé‡ç‚¹ï¼ï¼‰
â”‚       â”œâ”€â”€ control        â† åŒ…ä¿¡æ¯æè¿°
â”‚       â”œâ”€â”€ rules          â† æ„å»ºè§„åˆ™
â”‚       â”œâ”€â”€ changelog      â† ç‰ˆæœ¬å˜æ›´è®°å½•
â”‚       â””â”€â”€ copyright      â† ç‰ˆæƒä¿¡æ¯
â”œâ”€â”€ myproject_1.0.orig.tar.gz  â† åŸå§‹æºç åŒ…
â””â”€â”€ æ„å»ºäº§ç‰©/
    â”œâ”€â”€ myproject_1.0-1.deb     â† äºŒè¿›åˆ¶åŒ…
    â”œâ”€â”€ myproject_1.0-1.dsc     â† æºç åŒ…æè¿°
    â””â”€â”€ myproject_1.0-1.changes â† å˜æ›´æè¿°
```

---

# 4. ğŸ“¦ æºç åŒ…æ ¼å¼ä¸å‡†å¤‡



## 4.1 orig.tar.gzæ–‡ä»¶è¯¦è§£



**ä»€ä¹ˆæ˜¯orig.tar.gz**ï¼Ÿ
- ğŸ“š **åŸå§‹æºç **ï¼šè¿™æ˜¯è½¯ä»¶çš„"åŸè£…"æºä»£ç åŒ…
- ğŸ·ï¸ **å‘½åè§„åˆ™**ï¼š`è½¯ä»¶å_ç‰ˆæœ¬å·.orig.tar.gz`
- ğŸ”’ **ä¸å¯ä¿®æ”¹**ï¼šä¸€æ—¦åˆ›å»ºï¼Œå†…å®¹ä¸åº”è¯¥æ”¹å˜

### åˆ›å»ºorig.tar.gz



**æ–¹æ³•ä¸€ï¼šä»ç°æœ‰æºç åˆ›å»º**
```bash
# å‡è®¾ä½ æœ‰ä¸€ä¸ªmyproject-1.0ç›®å½•

cd ~/build/
tar -czf myproject_1.0.orig.tar.gz myproject-1.0/

# æ³¨æ„å‘½åæ ¼å¼ï¼š

# myproject_1.0.orig.tar.gz

#    â†‘       â†‘    â†‘

#   åŒ…å   ç‰ˆæœ¬  å›ºå®šåç¼€

```

**æ–¹æ³•äºŒï¼šä»ä¸Šæ¸¸ä¸‹è½½**
```bash
# ä¸‹è½½å®˜æ–¹æºç åŒ…

wget https://example.com/releases/myproject-1.0.tar.gz

# é‡å‘½åä¸ºDebianæ ¼å¼

mv myproject-1.0.tar.gz myproject_1.0.orig.tar.gz

# è§£å‹ç”¨äºæ·»åŠ debianç›®å½•

tar -xf myproject_1.0.orig.tar.gz
```

## 4.2 ç‰ˆæœ¬å·å‘½åè§„èŒƒ



**Debianç‰ˆæœ¬å·æ ¼å¼**ï¼š
```
è½¯ä»¶å_ä¸Šæ¸¸ç‰ˆæœ¬-debianç‰ˆæœ¬

ç¤ºä¾‹ï¼š
myproject_1.0-1        # ç¬¬ä¸€æ¬¡æ‰“åŒ…1.0ç‰ˆæœ¬
myproject_1.0-2        # ç¬¬äºŒæ¬¡æ‰“åŒ…1.0ç‰ˆæœ¬ï¼ˆä¿®å¤äº†æ‰“åŒ…é—®é¢˜ï¼‰
myproject_1.1-1        # æ‰“åŒ…1.1æ–°ç‰ˆæœ¬
myproject_2.0-1ubuntu1 # UbuntuåŸºäºDebianç‰ˆæœ¬çš„ä¿®æ”¹
```

**ç‰ˆæœ¬å·è§„åˆ™**ï¼š
- â¬†ï¸ **ä¸Šæ¸¸ç‰ˆæœ¬**ï¼šè½¯ä»¶åŸä½œè€…çš„ç‰ˆæœ¬å·ï¼Œä¸èƒ½éšæ„ä¿®æ”¹
- â¬‡ï¸ **Debianç‰ˆæœ¬**ï¼šæ‰“åŒ…è€…çš„ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡é‡æ–°æ‰“åŒ…é€’å¢
- ğŸ·ï¸ **å‘è¡Œç‰ˆæ ‡è¯†**ï¼šubuntuã€ppaç­‰ç‰¹æ®Šæ ‡è¯†

---

# 5. ğŸ“ debianç›®å½•åˆ›å»ºä¸é…ç½®



## 5.1 debianç›®å½•æ¦‚è¿°



**debianç›®å½•æ˜¯ä»€ä¹ˆ**ï¼Ÿ
å°±åƒæ˜¯ç»™æºä»£ç å†™çš„"äº§å“è¯´æ˜ä¹¦"ï¼Œå‘Šè¯‰debuildæ€ä¹ˆæŠŠæºä»£ç å˜æˆ.debåŒ…

```
debian/ç›®å½•ç»“æ„ï¼š
debian/
â”œâ”€â”€ control           â† ğŸ“‹ åŒ…çš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ rules            â† ğŸ”§ æ„å»ºè§„åˆ™è„šæœ¬ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ changelog        â† ğŸ“ ç‰ˆæœ¬å˜æ›´è®°å½•ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ copyright        â† âš–ï¸ ç‰ˆæƒä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ compat           â† ğŸ”¢ debhelperç‰ˆæœ¬
â”œâ”€â”€ install          â† ğŸ“¦ æ–‡ä»¶å®‰è£…è§„åˆ™
â”œâ”€â”€ postinst         â† â–¶ï¸ å®‰è£…åæ‰§è¡Œè„šæœ¬
â”œâ”€â”€ prerm            â† â¹ï¸ å¸è½½å‰æ‰§è¡Œè„šæœ¬
â””â”€â”€ patches/         â† ğŸ©¹ æºç è¡¥ä¸ç›®å½•
```

## 5.2 å¿«é€Ÿåˆ›å»ºdebianç›®å½•



### ä½¿ç”¨dh_makeè‡ªåŠ¨ç”Ÿæˆ



```bash
# è¿›å…¥æºç ç›®å½•

cd myproject-1.0/

# è‡ªåŠ¨ç”Ÿæˆdebianç›®å½•

dh_make -e your-email@example.com -f ../myproject_1.0.orig.tar.gz

# é€‰æ‹©åŒ…ç±»å‹ï¼š

# s: å•ä¸€äºŒè¿›åˆ¶åŒ…ï¼ˆæœ€å¸¸ç”¨ï¼‰

# m: å¤šä¸ªäºŒè¿›åˆ¶åŒ…  

# l: åº“åŒ…

# k: å†…æ ¸æ¨¡å—åŒ…

# n: æœ¬åœ°åŒ…

```

### æ‰‹åŠ¨åˆ›å»ºï¼ˆæ›´çµæ´»ï¼‰



```bash
mkdir debian
cd debian/

# åˆ›å»ºå¿…éœ€æ–‡ä»¶

touch control rules changelog copyright compat
```

## 5.3 æ ¸å¿ƒæ–‡ä»¶è¯¦ç»†é…ç½®



### controlæ–‡ä»¶ï¼ˆåŒ…ä¿¡æ¯æè¿°ï¼‰



```bash
# debian/control

Source: myproject
Section: utils
Priority: optional
Maintainer: Your Name <your-email@example.com>
Build-Depends: debhelper (>= 9), gcc, make, libssl-dev
Standards-Version: 3.9.8
Homepage: https://github.com/username/myproject

Package: myproject
Architecture: any
Depends: ${shlibs:Depends}, ${misc:Depends}, libssl1.1
Description: ä¸€ä¸ªå®ç”¨çš„ç¤ºä¾‹é¡¹ç›®
 è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨debuildæ„å»ºDebianåŒ…çš„ç¤ºä¾‹é¡¹ç›®ã€‚
 å®ƒåŒ…å«äº†åŸºæœ¬çš„åŠŸèƒ½å’Œå®Œæ•´çš„æ–‡æ¡£ã€‚
```

**å­—æ®µè§£é‡Š**ï¼š
- ğŸ·ï¸ **Source**: æºç åŒ…åç§°
- ğŸ“‚ **Section**: è½¯ä»¶åˆ†ç±»ï¼ˆutils/net/develç­‰ï¼‰
- âš–ï¸ **Priority**: é‡è¦æ€§ç­‰çº§
- ğŸ‘¤ **Maintainer**: ç»´æŠ¤è€…ä¿¡æ¯
- ğŸ”§ **Build-Depends**: æ„å»ºæ—¶éœ€è¦çš„ä¾èµ–
- ğŸ“¦ **Depends**: è¿è¡Œæ—¶éœ€è¦çš„ä¾èµ–

### rulesæ–‡ä»¶ï¼ˆæ„å»ºè§„åˆ™ï¼‰



```bash
#!/usr/bin/make -f

# debian/rules


# ä½¿ç”¨debhelperé»˜è®¤è§„åˆ™ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰

%:
	dh $@

# å¦‚æœéœ€è¦è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹

override_dh_auto_configure:
	./configure --prefix=/usr --enable-ssl

# å¦‚æœéœ€è¦è‡ªå®šä¹‰å®‰è£…è§„åˆ™

override_dh_auto_install:
	$(MAKE) DESTDIR=$$(pwd)/debian/myproject install
```

**è®°ä½ç»™æ‰§è¡Œæƒé™**ï¼š
```bash
chmod +x debian/rules
```

### changelogæ–‡ä»¶ï¼ˆç‰ˆæœ¬è®°å½•ï¼‰



```bash
# debian/changelog

myproject (1.0-1) unstable; urgency=medium

  * Initial release. (Closes: #XXXXXX)
  * æ·»åŠ äº†åŸºæœ¬åŠŸèƒ½
  * å®Œå–„äº†æ–‡æ¡£

 -- Your Name <your-email@example.com>  Sat, 14 Sep 2024 18:30:00 +0800
```

**æ ¼å¼è¦ç‚¹**ï¼š
- ğŸ”¢ ç‰ˆæœ¬å·æ ¼å¼è¦ä¸¥æ ¼
- ğŸ“… æ—¶é—´æ ¼å¼è¦æ ‡å‡†ï¼ˆä½¿ç”¨`date -R`ç”Ÿæˆï¼‰
- âœï¸ ç­¾åæ ¼å¼è¦æ­£ç¡®

### copyrightæ–‡ä»¶ï¼ˆç‰ˆæƒä¿¡æ¯ï¼‰



```bash
# debian/copyright

Format: https://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
Upstream-Name: myproject
Source: https://github.com/username/myproject

Files: *
Copyright: 2024 Your Name <your-email@example.com>
License: MIT

Files: debian/*
Copyright: 2024 Your Name <your-email@example.com>  
License: MIT

License: MIT
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction...
 [å®Œæ•´MITè®¸å¯è¯æ–‡æœ¬]
```

---

# 6. ğŸ”§ æ„å»ºä¾èµ–å¤„ç†ä¸å®‰è£…



## 6.1 ä¾èµ–ç±»å‹è¯¦è§£



### Build-Dependsï¼ˆæ„å»ºä¾èµ–ï¼‰



**ä»€ä¹ˆæ˜¯æ„å»ºä¾èµ–**ï¼Ÿå°±æ˜¯ç¼–è¯‘æºä»£ç æ—¶éœ€è¦çš„å·¥å…·å’Œåº“

```bash
# å¸¸è§æ„å»ºä¾èµ–ç¤ºä¾‹

Build-Depends: 
    debhelper (>= 9),     # Debianæ‰“åŒ…å·¥å…·
    gcc,                  # Cç¼–è¯‘å™¨
    make,                 # æ„å»ºå·¥å…·
    cmake,                # ç°ä»£æ„å»ºç³»ç»Ÿ
    libssl-dev,           # SSLå¼€å‘åº“
    pkg-config,           # åŒ…é…ç½®å·¥å…·
    python3-dev           # Pythonå¼€å‘å¤´æ–‡ä»¶
```

**ä¾èµ–ç‰ˆæœ¬è¯­æ³•**ï¼š
```bash
# ç‰ˆæœ¬å…³ç³»ç¬¦å·

pkg (>= 1.0)     # å¤§äºç­‰äº1.0ç‰ˆæœ¬
pkg (<< 2.0)     # å°äº2.0ç‰ˆæœ¬  
pkg (= 1.5)      # ç­‰äº1.5ç‰ˆæœ¬
pkg | pkg2       # pkgæˆ–è€…pkg2ï¼ˆäºŒé€‰ä¸€ï¼‰
pkg, pkg2        # åŒæ—¶éœ€è¦pkgå’Œpkg2
```

## 6.2 è‡ªåŠ¨å®‰è£…æ„å»ºä¾èµ–



### æ–¹æ³•ä¸€ï¼šä½¿ç”¨mk-build-deps



```bash
# å®‰è£…mk-build-depså·¥å…·

sudo apt install devscripts equivs

# åŸºäºcontrolæ–‡ä»¶å®‰è£…æ„å»ºä¾èµ–

mk-build-deps debian/control
sudo dpkg -i myproject-build-deps_1.0-1_all.deb
sudo apt -f install  # ä¿®å¤å¯èƒ½çš„ä¾èµ–é—®é¢˜
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…



```bash
# æ ¹æ®controlæ–‡ä»¶ä¸­çš„Build-Dependsæ‰‹åŠ¨å®‰è£…

sudo apt install debhelper gcc make libssl-dev pkg-config
```

## 6.3 ä¾èµ–é—®é¢˜è¯Šæ–­



### å¸¸è§ä¾èµ–é”™è¯¯



**âŒ é—®é¢˜ä¸€ï¼šç¼ºå°‘æ„å»ºä¾èµ–**
```bash
# é”™è¯¯ä¿¡æ¯

dpkg-checkbuilddeps: error: Unmet build dependencies: libfoo-dev

# è§£å†³æ–¹æ³•

sudo apt install libfoo-dev
```

**âŒ é—®é¢˜äºŒï¼šç‰ˆæœ¬ä¸åŒ¹é…**
```bash
# é”™è¯¯ä¿¡æ¯  

dpkg-checkbuilddeps: error: Build dependency libbar-dev (>= 2.0) 
is not satisfied; installed version is 1.8

# è§£å†³æ–¹æ³•ï¼šå‡çº§æˆ–ä»å…¶ä»–æºå®‰è£…

sudo apt update
sudo apt install libbar-dev/testing  # ä»testingåˆ†æ”¯å®‰è£…
```

**âœ… æ£€æŸ¥ä¾èµ–å·¥å…·**ï¼š
```bash
# æ£€æŸ¥å½“å‰æ„å»ºä¾èµ–æ˜¯å¦æ»¡è¶³

dpkg-checkbuilddeps debian/control

# å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜ä¾èµ–æ»¡è¶³

# å¦‚æœæœ‰è¾“å‡ºï¼Œè¯´æ˜ç¼ºå°‘å¯¹åº”ä¾èµ–

```

---

# 7. ğŸ“Š æ„å»ºè¿‡ç¨‹ç›‘æ§ä¸æ—¥å¿—



## 7.1 debuildæ„å»ºæµç¨‹è§£æ



**æ„å»ºè¿‡ç¨‹æ­¥éª¤**ï¼š
```
1. ç¯å¢ƒæ£€æŸ¥        â† æ£€æŸ¥ä¾èµ–ã€ç­¾åé…ç½®ç­‰
   â†“
2. æºç å‡†å¤‡        â† è§£å‹ã€åº”ç”¨è¡¥ä¸ç­‰  
   â†“
3. é…ç½®é˜¶æ®µ        â† ./configureæˆ–cmakeé…ç½®
   â†“
4. ç¼–è¯‘é˜¶æ®µ        â† makeç¼–è¯‘æºä»£ç 
   â†“
5. å®‰è£…é˜¶æ®µ        â† make installåˆ°ä¸´æ—¶ç›®å½•
   â†“
6. æ‰“åŒ…é˜¶æ®µ        â† ç”Ÿæˆ.debæ–‡ä»¶
   â†“
7. è´¨é‡æ£€æŸ¥        â† lintianæ£€æŸ¥åŒ…è´¨é‡
   â†“
8. ç­¾åé˜¶æ®µ        â† GPGç­¾åï¼ˆå¦‚æœå¯ç”¨ï¼‰
```

## 7.2 å®æ—¶ç›‘æ§æ„å»ºè¿‡ç¨‹



### è¯¦ç»†è¾“å‡ºæ¨¡å¼



```bash
# æ˜¾ç¤ºè¯¦ç»†æ„å»ºä¿¡æ¯

debuild -us -uc -v

# æ˜¾ç¤ºæ›´è¯¦ç»†çš„debugä¿¡æ¯

debuild -us -uc -D

# ä¿æŒæ„å»ºæ–‡ä»¶ä¸æ¸…ç†ï¼ˆä¾¿äºè°ƒè¯•ï¼‰

debuild -us -uc -nc
```

### æ„å»ºæ—¥å¿—ç®¡ç†



```bash
# å°†æ„å»ºè¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶

debuild -us -uc 2>&1 | tee build.log

# åˆ†ç¦»æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡º

debuild -us -uc >build_stdout.log 2>build_stderr.log
```

## 7.3 æ„å»ºçŠ¶æ€ç›‘æ§



### å®æ—¶è¿›åº¦æ˜¾ç¤º



```bash
# ä½¿ç”¨pvæ˜¾ç¤ºæ„å»ºè¿›åº¦ï¼ˆå¦‚æœå¯ç”¨ï¼‰

debuild -us -uc | pv -l >/dev/null

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯ç›‘æ§æ„å»ºç›®å½•å˜åŒ–

watch -n 1 'ls -la debian/ | tail -10'

# ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨

htop  # æˆ–è€… top
```

### æ£€æŸ¥æ„å»ºä¸­é—´çŠ¶æ€



```bash
# æ„å»ºè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä¸´æ—¶ç›®å½•

ls -la debian/myproject/        # å®‰è£…æ–‡ä»¶é¢„è§ˆ
ls -la debian/tmp/              # ä¸´æ—¶æ„å»ºæ–‡ä»¶

# æŸ¥çœ‹ç”Ÿæˆçš„åŒ…å†…å®¹

dpkg-deb -c ../myproject_1.0-1_amd64.deb  # æŸ¥çœ‹åŒ…æ–‡ä»¶åˆ—è¡¨
dpkg-deb -I ../myproject_1.0-1_amd64.deb  # æŸ¥çœ‹åŒ…ä¿¡æ¯
```

---

# 8. ğŸ” ç­¾åä¸éªŒè¯æœºåˆ¶



## 8.1 GPGç­¾ååŸç†



**ä¸ºä»€ä¹ˆéœ€è¦ç­¾å**ï¼Ÿ
```
ç±»æ¯”ç†è§£ï¼š
ç°å®ï¼šå•†å“æœ‰é˜²ä¼ªæ ‡ç­¾ï¼Œè¯æ˜æ˜¯æ­£å“
æ•°å­—ï¼šè½¯ä»¶åŒ…æœ‰GPGç­¾åï¼Œè¯æ˜æ¥æºå¯ä¿¡

ç­¾åè¿‡ç¨‹ï¼š
å¼€å‘è€…ç”¨ç§é’¥ç­¾å â†’ ç”¨æˆ·ç”¨å…¬é’¥éªŒè¯ â†’ ç¡®è®¤åŒ…çš„çœŸå®æ€§
```

**ç­¾åçš„å¥½å¤„**ï¼š
- ğŸ›¡ï¸ **é˜²ç¯¡æ”¹**ï¼šç¡®ä¿åŒ…å†…å®¹æœªè¢«ä¿®æ”¹
- ğŸ« **éªŒè¯èº«ä»½**ï¼šç¡®è®¤åŒ…çš„åˆ¶ä½œè€…
- ğŸ”’ **å®‰å…¨åˆ†å‘**ï¼šé˜²æ­¢ä¸­é—´äººæ”»å‡»

## 8.2 ç­¾åé…ç½®ä¸ä½¿ç”¨



### å¯ç”¨ç­¾åæ„å»º



```bash
# é»˜è®¤å¯ç”¨ç­¾åï¼ˆéœ€è¦GPGé…ç½®ï¼‰

debuild

# åªå¯¹.changesæ–‡ä»¶ç­¾å

debuild -us    # sourceä¸ç­¾å

# åªå¯¹æºç åŒ…ç­¾å  

debuild -uc    # changesä¸ç­¾å

# ä½¿ç”¨æŒ‡å®šå¯†é’¥ç­¾å

debuild -k"ä½ çš„å¯†é’¥ID"
```

### GPGå¯†é’¥ç®¡ç†



```bash
# åˆ—å‡ºæ‰€æœ‰å¯†é’¥

gpg --list-keys
gpg --list-secret-keys  # åˆ—å‡ºç§é’¥

# å¯¼å‡ºå…¬é’¥ä¾›ä»–äººéªŒè¯

gpg --armor --export your-email@example.com > public.key

# å¯¼å…¥ä»–äººå…¬é’¥

gpg --import someone-public.key

# è®¾ç½®å¯†é’¥ä¿¡ä»»çº§åˆ«

gpg --edit-key your-email@example.com
# åœ¨gpgæç¤ºç¬¦ä¸‹è¾“å…¥ï¼štrustï¼Œç„¶åé€‰æ‹©ä¿¡ä»»çº§åˆ«

```

## 8.3 ç­¾åéªŒè¯



### éªŒè¯.changesæ–‡ä»¶



```bash
# éªŒè¯.changesæ–‡ä»¶çš„ç­¾å

gpg --verify myproject_1.0-1_amd64.changes

# æˆåŠŸè¾“å‡ºç¤ºä¾‹ï¼š

# gpg: Good signature from "Your Name <your-email@example.com>"

```

### éªŒè¯.dscæ–‡ä»¶



```bash
# éªŒè¯æºç åŒ…ç­¾å

gpg --verify myproject_1.0-1.dsc

# åŒæ—¶éªŒè¯å¹¶è§£å‹æºç åŒ…

dpkg-source -x myproject_1.0-1.dsc
```

## 8.4 ç­¾åé—®é¢˜è§£å†³



### å¸¸è§ç­¾åé”™è¯¯



**âŒ é—®é¢˜ï¼šæ‰¾ä¸åˆ°å¯†é’¥**
```bash
# é”™è¯¯ä¿¡æ¯

gpg: signing failed: No such file or directory

# è§£å†³ï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡

echo $DEBFULLNAME $DEBEMAIL
# ç¡®ä¿ä¸GPGå¯†é’¥ä¿¡æ¯åŒ¹é…

```

**âŒ é—®é¢˜ï¼šå¯†é’¥è¿‡æœŸ**
```bash
# å»¶é•¿å¯†é’¥æœ‰æ•ˆæœŸ

gpg --edit-key your-email@example.com
# è¾“å…¥ï¼šexpireï¼Œç„¶åè®¾ç½®æ–°çš„è¿‡æœŸæ—¶é—´

```

**âŒ é—®é¢˜ï¼šå¯†é’¥æƒé™ä¸è¶³**
```bash
# é”™è¯¯ä¿¡æ¯

gpg: signing failed: Bad passphrase

# è§£å†³ï¼šç¡®ä¿å¯†ç æ­£ç¡®ï¼Œæˆ–é‡æ–°è®¾ç½®å¯†ç 

gpg --passwd your-email@example.com
```

---

# 9. ğŸ“¦ æ„å»ºäº§ç‰©ç®¡ç†ä¸åˆ†å‘



## 9.1 æ„å»ºäº§ç‰©è¯¦è§£



**debuildæ„å»ºå®Œæˆåä¼šç”Ÿæˆä»€ä¹ˆæ–‡ä»¶**ï¼Ÿ

```
æ„å»ºäº§ç‰©ç›®å½•ï¼ˆä¸Šçº§ç›®å½•ï¼‰ï¼š
../
â”œâ”€â”€ myproject_1.0-1.deb          â† ğŸ“¦ äºŒè¿›åˆ¶åŒ…ï¼ˆç”¨æˆ·å®‰è£…ï¼‰
â”œâ”€â”€ myproject_1.0-1.dsc          â† ğŸ“‹ æºç åŒ…æè¿°æ–‡ä»¶
â”œâ”€â”€ myproject_1.0-1.tar.xz       â† ğŸ“„ Debianå·®å¼‚åŒ…
â”œâ”€â”€ myproject_1.0-1_amd64.changes â† ğŸ“ å˜æ›´æè¿°æ–‡ä»¶
â”œâ”€â”€ myproject_1.0-1_amd64.buildinfo â† ğŸ” æ„å»ºä¿¡æ¯æ–‡ä»¶
â””â”€â”€ myproject_1.0.orig.tar.gz    â† ğŸ“š åŸå§‹æºç åŒ…
```

### å„æ–‡ä»¶ç”¨é€”è¯´æ˜



| æ–‡ä»¶ç±»å‹ | **ç”¨é€”** | **åˆ†å‘å¯¹è±¡** |
|----------|----------|-------------|
| `.deb` | æœ€ç»ˆå®‰è£…åŒ… | **æ™®é€šç”¨æˆ·** |
| `.dsc` + `.tar.xz` | æºç åŒ… | **å¼€å‘è€…/æ‰“åŒ…è€…** |  
| `.changes` | å˜æ›´è¯´æ˜ | **è½¯ä»¶ä»“åº“ç®¡ç†** |
| `.buildinfo` | æ„å»ºä¿¡æ¯ | **æ„å»ºé‡ç°** |
| `orig.tar.gz` | ä¸Šæ¸¸æºç  | **å½’æ¡£ä¿å­˜** |

## 9.2 åŒ…å†…å®¹æ£€æŸ¥ä¸éªŒè¯



### æ£€æŸ¥.debåŒ…å†…å®¹



```bash
# æŸ¥çœ‹åŒ…çš„åŸºæœ¬ä¿¡æ¯

dpkg-deb -I myproject_1.0-1_amd64.deb

# è¾“å‡ºç¤ºä¾‹ï¼š

# Package: myproject

# Version: 1.0-1

# Architecture: amd64  

# Maintainer: Your Name <your-email@example.com>

# Installed-Size: 256

# Depends: libc6, libssl1.1

# Section: utils

# Priority: optional

# Description: ä¸€ä¸ªå®ç”¨çš„ç¤ºä¾‹é¡¹ç›®


# æŸ¥çœ‹åŒ…å«çš„æ–‡ä»¶åˆ—è¡¨

dpkg-deb -c myproject_1.0-1_amd64.deb

# è¾“å‡ºç¤ºä¾‹ï¼š

# drwxr-xr-x root/root         0 2024-09-14 18:30 ./usr/

# drwxr-xr-x root/root         0 2024-09-14 18:30 ./usr/bin/

# -rwxr-xr-x root/root     12345 2024-09-14 18:30 ./usr/bin/myproject

```

### è§£å‹åŒ…å†…å®¹æŸ¥çœ‹



```bash
# è§£å‹.debåŒ…æŸ¥çœ‹å†…å®¹

mkdir temp_extract
dpkg-deb -x myproject_1.0-1_amd64.deb temp_extract/
tree temp_extract/

# æŸ¥çœ‹æ§åˆ¶ä¿¡æ¯

dpkg-deb -e myproject_1.0-1_amd64.deb temp_control/
cat temp_control/control
```

## 9.3 è´¨é‡æ£€æŸ¥



### ä½¿ç”¨lintianæ£€æŸ¥



```bash
# æ£€æŸ¥.debåŒ…è´¨é‡

lintian myproject_1.0-1_amd64.deb

# æ£€æŸ¥æºç åŒ…è´¨é‡

lintian myproject_1.0-1.dsc

# è¯¦ç»†æ£€æŸ¥æŠ¥å‘Š

lintian -v myproject_1.0-1_amd64.deb

# åªæ˜¾ç¤ºé”™è¯¯å’Œè­¦å‘Š

lintian -EviIL +pedantic myproject_1.0-1_amd64.deb
```

**lintianæ£€æŸ¥ç»“æœè§£è¯»**ï¼š
- âœ… **æ— è¾“å‡º**ï¼šåŒ…å®Œå…¨ç¬¦åˆè§„èŒƒ
- âš ï¸ **Warning**ï¼šå»ºè®®æ”¹è¿›çš„é—®é¢˜
- âŒ **Error**ï¼šå¿…é¡»ä¿®å¤çš„é—®é¢˜
- ğŸ” **Info**ï¼šä¿¡æ¯æ€§æç¤º

## 9.4 æœ¬åœ°å®‰è£…æµ‹è¯•



### å®‰è£…æ„å»ºçš„åŒ…



```bash
# å®‰è£….debåŒ…

sudo dpkg -i myproject_1.0-1_amd64.deb

# å¦‚æœæœ‰ä¾èµ–é—®é¢˜

sudo apt -f install  # ä¿®å¤ä¾èµ–

# éªŒè¯å®‰è£…

which myproject
myproject --version

# æŸ¥çœ‹å·²å®‰è£…åŒ…çš„ä¿¡æ¯

dpkg -s myproject
```

### å¸è½½æµ‹è¯•



```bash
# å¸è½½åŒ…

sudo apt remove myproject

# å®Œå…¨æ¸…é™¤ï¼ˆåŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼‰

sudo apt purge myproject

# éªŒè¯æ¸…ç†

dpkg -l | grep myproject  # åº”è¯¥æ²¡æœ‰è¾“å‡º
```

## 9.5 åˆ†å‘æ–¹å¼



### æœ¬åœ°åˆ†å‘



```bash
# åˆ›å»ºæœ¬åœ°ä»“åº“ç›®å½•

mkdir -p ~/my-packages
cp *.deb ~/my-packages/

# ç”ŸæˆåŒ…ç´¢å¼•ï¼ˆç®€å•æ–¹å¼ï¼‰

cd ~/my-packages
dpkg-scanpackages . /dev/null | gzip -9c > Packages.gz

# æœ¬åœ°HTTPæœåŠ¡å™¨åˆ†å‘

python3 -m http.server 8080
# ç”¨æˆ·å¯ä»¥é€šè¿‡ http://your-ip:8080 è®¿é—®

```

### ä¸Šä¼ åˆ°PPA



```bash
# æ„å»ºæºç åŒ…ï¼ˆç”¨äºPPAï¼‰

debuild -S -sa

# ä¸Šä¼ åˆ°Ubuntu PPA

dput ppa:your-username/ppa-name myproject_1.0-1_source.changes

# æ£€æŸ¥ä¸Šä¼ çŠ¶æ€

# ç™»å½• https://launchpad.net æŸ¥çœ‹æ„å»ºçŠ¶æ€

```

### æ–‡ä»¶åˆ†å‘



```bash
# å‹ç¼©æ‰€æœ‰æ„å»ºäº§ç‰©

tar -czf myproject-1.0-build-artifacts.tar.gz \
  myproject_1.0-1_amd64.deb \
  myproject_1.0-1.dsc \
  myproject_1.0-1.tar.xz \
  myproject_1.0-1_amd64.changes

# è®¡ç®—æ ¡éªŒå’Œ

sha256sum myproject-1.0-build-artifacts.tar.gz > checksums.txt

# é€šè¿‡ç½‘ç›˜ã€é‚®ä»¶ç­‰æ–¹å¼åˆ†å‘

```

---

# 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“



## 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ



```
ğŸ”¸ debuildæœ¬è´¨ï¼šDebianç³»ç»Ÿçš„è‡ªåŠ¨åŒ–æ‰“åŒ…å·¥å…·
ğŸ”¸ æ ¸å¿ƒæµç¨‹ï¼šæºç  + debiané…ç½® â†’ .debå®‰è£…åŒ…
ğŸ”¸ å…³é”®æ–‡ä»¶ï¼šorig.tar.gzï¼ˆåŸå§‹æºç ï¼‰+ debian/ç›®å½•ï¼ˆæ‰“åŒ…é…ç½®ï¼‰
ğŸ”¸ ç­¾åæœºåˆ¶ï¼šGPGæ•°å­—ç­¾åä¿è¯åŒ…çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§
ğŸ”¸ æ„å»ºäº§ç‰©ï¼š.debï¼ˆç”¨æˆ·å®‰è£…ï¼‰+ .dscï¼ˆå¼€å‘è€…ä½¿ç”¨ï¼‰+ å…¶ä»–è¾…åŠ©æ–‡ä»¶
```

## 10.2 å…³é”®ç†è§£è¦ç‚¹



**ğŸ”¹ debuildçš„å·¥ä½œåŸç†**ï¼š
```
ç®€åŒ–ç†è§£ï¼š
debuild = è‡ªåŠ¨åŒ–å·¥å‚
è¾“å…¥ï¼šæºç  + æ‰“åŒ…è¯´æ˜ä¹¦ï¼ˆdebian/ç›®å½•ï¼‰
è¾“å‡ºï¼šæ ‡å‡†.debå®‰è£…åŒ…

æ ¸å¿ƒæ­¥éª¤ï¼š
1. æ£€æŸ¥ç¯å¢ƒå’Œä¾èµ–
2. æŒ‰ç…§debian/rulesç¼–è¯‘æºç 
3. æŒ‰ç…§debian/controlæ‰“åŒ…
4. ç”¨lintianæ£€æŸ¥è´¨é‡
5. ç”¨GPGç­¾åä¿è¯å®‰å…¨
```

**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦debianç›®å½•**ï¼š
```
ç±»æ¯”ç†è§£ï¼š
æºç  = é›¶ä»¶å’ŒåŸææ–™
debian/ç›®å½• = äº§å“è¯´æ˜ä¹¦å’Œç»„è£…å›¾çº¸
debuild = è‡ªåŠ¨åŒ–ç»„è£…çº¿

æ²¡æœ‰è¯´æ˜ä¹¦ï¼Œæœºå™¨ä¸çŸ¥é“æ€ä¹ˆç»„è£…äº§å“
æ²¡æœ‰debiané…ç½®ï¼Œdebuildä¸çŸ¥é“æ€ä¹ˆæ‰“åŒ…
```

**ğŸ”¹ ç­¾åçš„é‡è¦æ€§**ï¼š
```
ç°å®ç±»æ¯”ï¼š
å•†å“æœ‰é˜²ä¼ªæ ‡ç­¾ = è½¯ä»¶åŒ…æœ‰GPGç­¾å
è¯æ˜æ˜¯æ­£å“ = è¯æ˜åŒ…æœªè¢«ç¯¡æ”¹
ä¿¡ä»»å‚å•† = ä¿¡ä»»å¼€å‘è€…

æŠ€æœ¯æ„ä¹‰ï¼š
ç§é’¥ç­¾å + å…¬é’¥éªŒè¯ = ç¡®ä¿åŒ…çš„å®Œæ•´æ€§å’Œæ¥æº
```

## 10.3 å®é™…åº”ç”¨æŒ‡å¯¼



### âœ… æ–°æ‰‹å…¥é—¨æµç¨‹



**ç¬¬ä¸€æ¬¡ä½¿ç”¨debuildçš„å®Œæ•´æµç¨‹**ï¼š
```bash
# 1. å®‰è£…å¿…éœ€å·¥å…·

sudo apt install build-essential devscripts debhelper

# 2. é…ç½®å¼€å‘è€…ä¿¡æ¯  

export DEBEMAIL="your-email@example.com"
export DEBFULLNAME="Your Name"

# 3. å‡†å¤‡æºç å’ŒåŸå§‹åŒ…

tar -czf myproject_1.0.orig.tar.gz myproject-1.0/

# 4. åˆ›å»ºdebianç›®å½•

cd myproject-1.0/
dh_make -e $DEBEMAIL -f ../myproject_1.0.orig.tar.gz

# 5. ç¼–è¾‘debiané…ç½®æ–‡ä»¶ï¼ˆé‡ç‚¹ï¼ï¼‰

# ç¼–è¾‘ debian/control, debian/rules ç­‰


# 6. æ„å»ºåŒ…ï¼ˆæ–°æ‰‹æ¨èä¸ç­¾åï¼‰

debuild -us -uc

# 7. æ£€æŸ¥å’Œæµ‹è¯•

lintian ../myproject_1.0-1_amd64.deb
sudo dpkg -i ../myproject_1.0-1_amd64.deb
```

### ğŸ”§ å¸¸ç”¨è°ƒè¯•æŠ€å·§



**æ„å»ºå¤±è´¥æ—¶çš„è¯Šæ–­æ–¹æ³•**ï¼š
```bash
# 1. ä¿ç•™æ„å»ºæ–‡ä»¶è¿›è¡Œè°ƒè¯•

debuild -us -uc -nc

# 2. æŸ¥çœ‹è¯¦ç»†æ„å»ºæ—¥å¿—

debuild -us -uc -v 2>&1 | tee build.log

# 3. æ£€æŸ¥ä¾èµ–æ˜¯å¦æ»¡è¶³

dpkg-checkbuilddeps

# 4. æ‰‹åŠ¨æ‰§è¡Œæ„å»ºæ­¥éª¤

cd debian/
./rules clean
./rules configure  
./rules build
```

### ğŸ“Š è´¨é‡æ§åˆ¶æ£€æŸ¥æ¸…å•



**å‘å¸ƒå‰å¿…åšæ£€æŸ¥**ï¼š
- [ ] `lintian`æ£€æŸ¥æ— ERROR
- [ ] åŒ…èƒ½æ­£ç¡®å®‰è£…ï¼š`sudo dpkg -i *.deb`
- [ ] ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œï¼š`myproject --version`
- [ ] ä¾èµ–å…³ç³»æ­£ç¡®ï¼š`apt-cache depends myproject`
- [ ] å¸è½½å¹²å‡€ï¼š`sudo apt purge myproject`
- [ ] æ–‡ä»¶æƒé™åˆç†ï¼š`dpkg-deb -c *.deb`

## 10.4 è¿›é˜¶å­¦ä¹ æ–¹å‘



**æŒæ¡åŸºç¡€åçš„è¿›é˜¶æ–¹å‘**ï¼š
- ğŸ—ï¸ **å¤æ‚æ„å»º**ï¼šå¤šäºŒè¿›åˆ¶åŒ…ã€åº“åŒ…ã€PythonåŒ…ç­‰
- ğŸ”§ **è‡ªå®šä¹‰è§„åˆ™**ï¼šå¤æ‚çš„debian/rulesç¼–å†™
- ğŸŒ **è·¨æ¶æ„æ„å»º**ï¼šä¸ºä¸åŒCPUæ¶æ„æ„å»ºåŒ…
- ğŸ“¦ **ä»“åº“ç®¡ç†**ï¼šåˆ›å»ºå’Œç»´æŠ¤APTè½¯ä»¶ä»“åº“
- ğŸ¤– **CI/CDé›†æˆ**ï¼šè‡ªåŠ¨åŒ–æ„å»ºå’Œå‘å¸ƒæµç¨‹

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
debuildæ‰“åŒ…å¾ˆç®€å•ï¼Œæºç é…ç½®åŠ origåŒ…
debianç›®å½•æ˜¯å…³é”®ï¼Œcontrolè§„åˆ™å†™æ¸…æ¥š
æ„å»ºç­¾åé˜²ç¯¡æ”¹ï¼Œè´¨é‡æ£€æŸ¥ä¸èƒ½å°‘
æ–°æ‰‹å…ˆç”¨ä¸ç­¾åï¼Œç†Ÿç»ƒå†ç”¨GPGä¿
```

**æœ€é‡è¦çš„ç†è§£**ï¼š
debuildä¸æ˜¯ç®€å•çš„ç¼–è¯‘å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„**è½¯ä»¶åŒ…ç”Ÿäº§çº¿**ã€‚å®ƒæŒ‰ç…§Debianæ ‡å‡†ï¼Œå°†æºä»£ç è½¬æ¢æˆå¯åˆ†å‘ã€å¯å®‰è£…çš„æ ‡å‡†è½¯ä»¶åŒ…ã€‚æŒæ¡debuildï¼Œå°±æŒæ¡äº†Linuxè½¯ä»¶åˆ†å‘çš„æ ¸å¿ƒæŠ€èƒ½ã€‚