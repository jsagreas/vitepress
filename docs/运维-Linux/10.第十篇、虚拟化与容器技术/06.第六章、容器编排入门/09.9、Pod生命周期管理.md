---
title: 9ã€Podç”Ÿå‘½å‘¨æœŸç®¡ç†
---
## ğŸ“š ç›®å½•

1. [PodåŸºç¡€æ¦‚å¿µä¸å®šä¹‰](#1-PodåŸºç¡€æ¦‚å¿µä¸å®šä¹‰)
2. [Podé…ç½®æ–‡ä»¶è¯¦è§£](#2-Podé…ç½®æ–‡ä»¶è¯¦è§£)
3. [å®¹å™¨èµ„æºé™åˆ¶ç®¡ç†](#3-å®¹å™¨èµ„æºé™åˆ¶ç®¡ç†)
4. [ç¯å¢ƒå˜é‡é…ç½®ç­–ç•¥](#4-ç¯å¢ƒå˜é‡é…ç½®ç­–ç•¥)
5. [æ•°æ®å·æŒ‚è½½é…ç½®](#5-æ•°æ®å·æŒ‚è½½é…ç½®)
6. [åˆå§‹åŒ–å®¹å™¨åº”ç”¨](#6-åˆå§‹åŒ–å®¹å™¨åº”ç”¨)
7. [Podç”Ÿå‘½å‘¨æœŸé’©å­](#7-Podç”Ÿå‘½å‘¨æœŸé’©å­)
8. [å¥åº·æ£€æŸ¥æ¢é’ˆæœºåˆ¶](#8-å¥åº·æ£€æŸ¥æ¢é’ˆæœºåˆ¶)
9. [Podè°ƒåº¦ä¸èŠ‚ç‚¹é€‰æ‹©](#9-Podè°ƒåº¦ä¸èŠ‚ç‚¹é€‰æ‹©)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ PodåŸºç¡€æ¦‚å¿µä¸å®šä¹‰


### 1.1 ä»€ä¹ˆæ˜¯Pod


**Podç®€å•ç†è§£**ï¼šPodå°±åƒæ˜¯ä¸€ä¸ª"å®¿èˆ"ï¼Œé‡Œé¢å¯ä»¥ä½ä¸€ä¸ªæˆ–å¤šä¸ª"å®¤å‹"ï¼ˆå®¹å™¨ï¼‰ï¼Œä»–ä»¬å…±äº«åŒä¸€ä¸ªæˆ¿é—´çš„èµ„æºã€‚

```
ç°å®ç±»æ¯”ï¼š
å®¿èˆ(Pod) = å…±äº«ç©ºé—´çš„æ¦‚å¿µ
â”œâ”€â”€ å®¤å‹A(å®¹å™¨1) - è¿è¡ŒWebæœåŠ¡
â”œâ”€â”€ å®¤å‹B(å®¹å™¨2) - è¿è¡Œæ•°æ®åº“
â””â”€â”€ å…±äº«èµ„æºï¼šç½‘ç»œIPã€å­˜å‚¨ç©ºé—´ã€ç¯å¢ƒé…ç½®

æŠ€æœ¯å®šä¹‰ï¼š
Podæ˜¯Kubernetesä¸­æœ€å°çš„éƒ¨ç½²å’Œç®¡ç†å•å…ƒ
åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†åä½œçš„å®¹å™¨
å…±äº«ç½‘ç»œã€å­˜å‚¨å’Œè®¡ç®—èµ„æº
```

**ğŸ”¸ Podçš„æ ¸å¿ƒç‰¹å¾**
- **åŸå­æ€§**ï¼šPodå†…çš„å®¹å™¨è¦ä¹ˆå…¨éƒ¨è¿è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨åœæ­¢
- **å…±äº«æ€§**ï¼šåŒä¸€Podå†…çš„å®¹å™¨å…±äº«IPåœ°å€å’Œå­˜å‚¨å·
- **çŸ­æš‚æ€§**ï¼šPodæ˜¯ä¸´æ—¶çš„ï¼Œéšæ—¶å¯èƒ½è¢«åˆ›å»ºæˆ–é”€æ¯
- **å•èŠ‚ç‚¹æ€§**ï¼šä¸€ä¸ªPodåªèƒ½è¿è¡Œåœ¨ä¸€ä¸ªNodeèŠ‚ç‚¹ä¸Š

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦Pod


**è§£å†³çš„æ ¸å¿ƒé—®é¢˜**ï¼š
```
é—®é¢˜1ï¼šå®¹å™¨é—´ç´§å¯†åä½œ
- WebæœåŠ¡å™¨éœ€è¦ä¸æ—¥å¿—æ”¶é›†å™¨é…åˆ
- åº”ç”¨å®¹å™¨éœ€è¦ä¸ä»£ç†å®¹å™¨é€šä¿¡
- è§£å†³æ–¹æ¡ˆï¼šæ”¾åœ¨åŒä¸€ä¸ªPodä¸­å…±äº«ç½‘ç»œ

é—®é¢˜2ï¼šèµ„æºå…±äº«éœ€æ±‚  
- å¤šä¸ªå®¹å™¨éœ€è¦è®¿é—®ç›¸åŒçš„æ–‡ä»¶
- éœ€è¦å…±äº«ä¸´æ—¶æ•°æ®
- è§£å†³æ–¹æ¡ˆï¼šPodå†…å®¹å™¨å…±äº«å­˜å‚¨å·

é—®é¢˜3ï¼šç»Ÿä¸€ç®¡ç†éœ€æ±‚
- ç›¸å…³å®¹å™¨éœ€è¦åŒæ—¶å¯åŠ¨/åœæ­¢
- éœ€è¦ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- è§£å†³æ–¹æ¡ˆï¼šPodä½œä¸ºç®¡ç†å•å…ƒ
```

### 1.3 Podä¸å®¹å™¨çš„å…³ç³»


```
å…³ç³»å›¾ç¤ºï¼š

å•å®¹å™¨Podï¼ˆå¸¸è§ï¼‰ï¼š         å¤šå®¹å™¨Podï¼ˆç‰¹æ®Šåœºæ™¯ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Pod        â”‚        â”‚         Pod             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Container â”‚  â”‚        â”‚  â”‚ Web    â”‚ â”‚ Logger â”‚  â”‚
â”‚  â”‚   App     â”‚  â”‚        â”‚  â”‚ Server â”‚ â”‚        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚        â”‚                         â”‚
â”‚ å…±äº«ï¼šIP + å­˜å‚¨  â”‚        â”‚   å…±äº«ï¼šIP + å­˜å‚¨        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨åŸåˆ™ï¼š
âœ… å¤§å¤šæ•°æƒ…å†µä½¿ç”¨å•å®¹å™¨Pod
âœ… åªæœ‰ç´§å¯†è€¦åˆçš„å®¹å™¨æ‰æ”¾åœ¨åŒä¸€Pod
âŒ ä¸è¦ä¸ºäº†æ–¹ä¾¿å°±æŠŠæ‰€æœ‰å®¹å™¨æ”¾ä¸€èµ·
```

---

## 2. ğŸ“‹ Podé…ç½®æ–‡ä»¶è¯¦è§£


### 2.1 åŸºæœ¬é…ç½®æ–‡ä»¶ç»“æ„


**YAMLæ–‡ä»¶ç»„æˆ**ï¼šPodé…ç½®æ–‡ä»¶å°±åƒæ˜¯ç»™Kubernetesçš„"è¯´æ˜ä¹¦"ï¼Œå‘Šè¯‰å®ƒå¦‚ä½•åˆ›å»ºå’Œç®¡ç†Podã€‚

```yaml
# æœ€åŸºç¡€çš„Podé…ç½®æ–‡ä»¶
apiVersion: v1          # APIç‰ˆæœ¬ï¼ŒPodä½¿ç”¨v1
kind: Pod              # èµ„æºç±»å‹ï¼Œè¿™é‡Œæ˜¯Pod
metadata:              # å…ƒæ•°æ®ä¿¡æ¯
  name: my-app         # Podçš„åå­—
  namespace: default   # å‘½åç©ºé—´
  labels:             # æ ‡ç­¾ï¼Œç”¨äºåˆ†ç±»ç®¡ç†
    app: web-server
    version: v1.0
spec:                  # Podçš„å…·ä½“è§„æ ¼
  containers:          # å®¹å™¨åˆ—è¡¨
  - name: web-app      # å®¹å™¨åå­—
    image: nginx:1.20  # ä½¿ç”¨çš„é•œåƒ
    ports:             # ç«¯å£é…ç½®
    - containerPort: 80
```

### 2.2 metadataå…ƒæ•°æ®é…ç½®


**ğŸ”¸ åŸºæœ¬ä¿¡æ¯é…ç½®**
```yaml
metadata:
  name: web-server-pod          # Podåç§°ï¼ˆå¿…éœ€ï¼‰
  namespace: production         # å‘½åç©ºé—´
  labels:                       # æ ‡ç­¾ï¼ˆé”®å€¼å¯¹ï¼‰
    app: nginx                  # åº”ç”¨ç±»å‹
    tier: frontend              # å±‚çº§
    version: "1.0"             # ç‰ˆæœ¬
  annotations:                  # æ³¨é‡Šï¼ˆè¡¥å……ä¿¡æ¯ï¼‰
    description: "WebæœåŠ¡å™¨Pod"
    creator: "DevOps Team"
```

**æ ‡ç­¾vsæ³¨é‡Šçš„åŒºåˆ«**ï¼š
- **æ ‡ç­¾**ï¼šç”¨äºç­›é€‰å’Œç®¡ç†ï¼Œå¦‚ `kubectl get pods -l app=nginx`
- **æ³¨é‡Š**ï¼šç”¨äºè®°å½•ä¿¡æ¯ï¼Œä¸ç”¨äºç­›é€‰ï¼Œå¦‚ç‰ˆæœ¬è¯´æ˜ã€åˆ›å»ºè€…ç­‰

### 2.3 specè§„æ ¼è¯¦ç»†é…ç½®


**ğŸ”¸ å®Œæ•´çš„specé…ç½®ç¤ºä¾‹**
```yaml
spec:
  restartPolicy: Always         # é‡å¯ç­–ç•¥
  nodeSelector:                # èŠ‚ç‚¹é€‰æ‹©
    disktype: ssd
  containers:
  - name: web-server
    image: nginx:1.20
    imagePullPolicy: IfNotPresent  # é•œåƒæ‹‰å–ç­–ç•¥
    ports:
    - name: http
      containerPort: 80
      protocol: TCP
    env:                        # ç¯å¢ƒå˜é‡
    - name: ENV_TYPE
      value: "production"
    resources:                  # èµ„æºé™åˆ¶
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
```

**ğŸ”¸ é‡å¯ç­–ç•¥è¯´æ˜**
```
Alwaysï¼ˆé»˜è®¤ï¼‰ï¼šå®¹å™¨åœæ­¢å°±é‡å¯
OnFailureï¼šåªæœ‰å¼‚å¸¸é€€å‡ºæ‰é‡å¯  
Neverï¼šä»ä¸é‡å¯

é€‰æ‹©åŸåˆ™ï¼š
- WebæœåŠ¡ï¼šAlways
- æ‰¹å¤„ç†ä½œä¸šï¼šOnFailure
- ä¸€æ¬¡æ€§ä»»åŠ¡ï¼šNever
```

---

## 3. âš™ï¸ å®¹å™¨èµ„æºé™åˆ¶ç®¡ç†


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦èµ„æºé™åˆ¶


**ç°å®é—®é¢˜ç±»æ¯”**ï¼šå°±åƒå®¿èˆé‡Œè¦è§„å®šæ¯ä¸ªäººç”¨ç”µé‡ï¼Œé˜²æ­¢æœ‰äººè¿‡åº¦ç”¨ç”µå½±å“å…¶ä»–äººã€‚

```
æ²¡æœ‰èµ„æºé™åˆ¶çš„é—®é¢˜ï¼š
âŒ æŸä¸ªPodå ç”¨è¿‡å¤šCPUï¼Œå½±å“å…¶ä»–Pod
âŒ å†…å­˜æ³„æ¼å¯¼è‡´èŠ‚ç‚¹å†…å­˜è€—å°½
âŒ æ— æ³•åˆç†è°ƒåº¦Podåˆ°åˆé€‚çš„èŠ‚ç‚¹

æœ‰èµ„æºé™åˆ¶çš„å¥½å¤„ï¼š
âœ… ä¿è¯æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰
âœ… åˆç†åˆ©ç”¨é›†ç¾¤èµ„æº
âœ… é˜²æ­¢èµ„æºç«äº‰
```

### 3.2 èµ„æºç±»å‹ä¸å•ä½


**ğŸ”¸ CPUèµ„æº**
```
CPUå•ä½è¯´æ˜ï¼š
1 CPU = 1000m (millicore)
500m = 0.5 CPU = åŠä¸ªCPUæ ¸å¿ƒ
250m = 0.25 CPU = å››åˆ†ä¹‹ä¸€ä¸ªCPUæ ¸å¿ƒ

å®é™…ç†è§£ï¼š
500mæ„æ€æ˜¯ï¼šè¿™ä¸ªå®¹å™¨æœ€å¤šèƒ½ç”¨åŠä¸ªCPUæ ¸å¿ƒçš„è®¡ç®—èƒ½åŠ›
```

**ğŸ”¸ å†…å­˜èµ„æº**
```
å†…å­˜å•ä½ï¼š
Ki (Kibi) = 1024 bytes
Mi (Mebi) = 1024 Ki = 1,048,576 bytes  
Gi (Gibi) = 1024 Mi

å¸¸ç”¨é…ç½®ï¼š
128Mi = 128MBå†…å­˜
1Gi = 1GBå†…å­˜
```

### 3.3 requests vs limitsè¯¦è§£


```yaml
resources:
  requests:              # è¯·æ±‚èµ„æºï¼ˆä¿è¯ç»™ä½ çš„ï¼‰
    memory: "128Mi"      # è‡³å°‘éœ€è¦128MBå†…å­˜
    cpu: "250m"         # è‡³å°‘éœ€è¦0.25ä¸ªCPU
  limits:               # é™åˆ¶èµ„æºï¼ˆæœ€å¤šèƒ½ç”¨çš„ï¼‰
    memory: "256Mi"     # æœ€å¤šä½¿ç”¨256MBå†…å­˜
    cpu: "500m"         # æœ€å¤šä½¿ç”¨0.5ä¸ªCPU
```

**ğŸ”¸ å½¢è±¡ç†è§£**
```
é¤å…è®¢åº§ç±»æ¯”ï¼š
requests = é¢„å®šä½ç½®ï¼Œé¤å…ä¿è¯ç»™ä½ ç•™åº§ä½
limits = æœ€å¤§ç”¨é¤äººæ•°ï¼Œè¶…è¿‡å°±ä¸è®©è¿›

æŠ€æœ¯ç†è§£ï¼š
requestsï¼šè°ƒåº¦å†³ç­–åŸºç¡€ï¼ŒèŠ‚ç‚¹å¿…é¡»æœ‰è¶³å¤Ÿèµ„æº
limitsï¼šè¿è¡Œæ—¶é™åˆ¶ï¼Œè¶…è¿‡å°±è¢«é™åˆ¶æˆ–æ€æ‰
```

### 3.4 QoSæœåŠ¡è´¨é‡ç­‰çº§


| QoSç­‰çº§ | **é…ç½®ç‰¹ç‚¹** | **èµ„æºä¿éšœ** | **è¢«é©±é€ä¼˜å…ˆçº§** |
|---------|-------------|-------------|----------------|
| **Guaranteed** | `requests = limits` | `æœ€é«˜ä¿éšœ` | `æœ€åè¢«é©±é€` |
| **Burstable** | `æœ‰requestsï¼Œlimits > requests` | `ä¸­ç­‰ä¿éšœ` | `ä¸­ç­‰ä¼˜å…ˆçº§` |
| **BestEffort** | `æ— requestså’Œlimits` | `æ— ä¿éšœ` | `é¦–å…ˆè¢«é©±é€` |

```yaml
# Guaranteedçº§åˆ«ç¤ºä¾‹
resources:
  requests:
    memory: "256Mi"
    cpu: "500m"
  limits:
    memory: "256Mi"    # ä¸requestsç›¸ç­‰
    cpu: "500m"        # ä¸requestsç›¸ç­‰
```

---

## 4. ğŸŒ ç¯å¢ƒå˜é‡é…ç½®ç­–ç•¥


### 4.1 ç¯å¢ƒå˜é‡åŸºç¡€æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šç¯å¢ƒå˜é‡å°±åƒæ˜¯ç»™ç¨‹åºä¼ é€’çš„"å°çº¸æ¡"ï¼Œå‘Šè¯‰ç¨‹åºä¸€äº›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚æ•°æ®åº“åœ°å€ã€è¿è¡Œæ¨¡å¼ç­‰ã€‚

```
ç°å®ç±»æ¯”ï¼š
ç¯å¢ƒå˜é‡ = ç¨‹åºçš„"è®¾ç½®èœå•"
- å‘Šè¯‰ç¨‹åºè¿è¡Œåœ¨å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒ
- æä¾›æ•°æ®åº“è¿æ¥ä¿¡æ¯
- è®¾ç½®ç¨‹åºè¡Œä¸ºå‚æ•°
```

### 4.2 ç›´æ¥è®¾ç½®ç¯å¢ƒå˜é‡


```yaml
spec:
  containers:
  - name: web-app
    image: myapp:latest
    env:
    - name: ENV_TYPE          # ç¯å¢ƒç±»å‹
      value: "production"
    - name: LOG_LEVEL         # æ—¥å¿—çº§åˆ«
      value: "INFO"
    - name: MAX_CONNECTIONS   # æœ€å¤§è¿æ¥æ•°
      value: "100"
```

### 4.3 ä»ConfigMapè·å–ç¯å¢ƒå˜é‡


**ğŸ”¸ ConfigMapæ¦‚å¿µ**ï¼šConfigMapå°±åƒæ˜¯ä¸€ä¸ª"é…ç½®æ–‡ä»¶æŸœ"ï¼Œå­˜æ”¾å„ç§é…ç½®ä¿¡æ¯ã€‚

```yaml
# 1. å…ˆåˆ›å»ºConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  database_host: "mysql.example.com"
  database_port: "3306"
  redis_url: "redis://redis.example.com:6379"

---
# 2. Podä¸­å¼•ç”¨ConfigMap
spec:
  containers:
  - name: app
    image: myapp:latest
    envFrom:                    # æ‰¹é‡å¯¼å…¥
    - configMapRef:
        name: app-config
    env:                       # å•ä¸ªå¼•ç”¨
    - name: DB_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database_host
```

### 4.4 ä»Secretè·å–æ•æ„Ÿä¿¡æ¯


**ğŸ”¸ Secretç”¨é€”**ï¼šå­˜æ”¾å¯†ç ã€å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œå°±åƒä¿é™©æŸœã€‚

```yaml
# 1. åˆ›å»ºSecretï¼ˆbase64ç¼–ç ï¼‰
apiVersion: v1
kind: Secret
metadata:
  name: app-secret
type: Opaque
data:
  username: YWRtaW4=          # adminçš„base64ç¼–ç 
  password: cGFzc3dvcmQ=      # passwordçš„base64ç¼–ç 

---
# 2. Podä¸­ä½¿ç”¨Secret
spec:
  containers:
  - name: app
    image: myapp:latest
    env:
    - name: DB_USERNAME
      valueFrom:
        secretKeyRef:
          name: app-secret
          key: username
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: app-secret
          key: password
```

**ğŸ’¡ åˆ›å»ºSecretçš„ä¾¿æ·æ–¹æ³•**
```bash
# å‘½ä»¤è¡Œç›´æ¥åˆ›å»ºSecret
kubectl create secret generic app-secret \
  --from-literal=username=admin \
  --from-literal=password=secretpass
```

---

## 5. ğŸ’¾ æ•°æ®å·æŒ‚è½½é…ç½®


### 5.1 æ•°æ®å·åŸºæœ¬æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šæ•°æ®å·å°±åƒæ˜¯ç»™å®¹å™¨"å¤–æ¥ç¡¬ç›˜"ï¼Œè®©æ•°æ®èƒ½å¤ŸæŒä¹…ä¿å­˜æˆ–åœ¨å®¹å™¨é—´å…±äº«ã€‚

```
é—®é¢˜èƒŒæ™¯ï¼š
å®¹å™¨é‡Œçš„æ•°æ® = ä¸´æ—¶æ–‡ä»¶
å®¹å™¨åˆ é™¤ â†’ æ•°æ®ä¸¢å¤±

è§£å†³æ–¹æ¡ˆï¼š
æ•°æ®å· = å¤–éƒ¨å­˜å‚¨
å®¹å™¨åˆ é™¤ â†’ æ•°æ®ä¿ç•™
```

### 5.2 å¸¸ç”¨æ•°æ®å·ç±»å‹


**ğŸ”¸ emptyDir - ä¸´æ—¶å­˜å‚¨**
```yaml
spec:
  containers:
  - name: web-server
    image: nginx
    volumeMounts:
    - name: temp-storage      # å·åç§°
      mountPath: /tmp/data    # å®¹å™¨å†…æŒ‚è½½è·¯å¾„
  volumes:
  - name: temp-storage
    emptyDir: {}              # ç©ºç›®å½•ï¼ŒPodåˆ é™¤æ—¶æ•°æ®ä¸¢å¤±
```

**ä½¿ç”¨åœºæ™¯**ï¼šä¸´æ—¶æ–‡ä»¶ã€ç¼“å­˜æ•°æ®ã€å®¹å™¨é—´æ•°æ®äº¤æ¢

**ğŸ”¸ hostPath - ä¸»æœºç›®å½•**
```yaml
spec:
  containers:
  - name: log-collector
    image: fluentd
    volumeMounts:
    - name: host-logs
      mountPath: /var/log
  volumes:
  - name: host-logs
    hostPath:
      path: /var/log           # ä¸»æœºä¸Šçš„è·¯å¾„
      type: Directory          # å¿…é¡»æ˜¯ç›®å½•
```

âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼šhostPathå°†Podç»‘å®šåˆ°ç‰¹å®šèŠ‚ç‚¹ï¼Œè°¨æ…ä½¿ç”¨

**ğŸ”¸ persistentVolumeClaim - æŒä¹…å­˜å‚¨**
```yaml
spec:
  containers:
  - name: database
    image: mysql:8.0
    volumeMounts:
    - name: mysql-data
      mountPath: /var/lib/mysql
  volumes:
  - name: mysql-data
    persistentVolumeClaim:
      claimName: mysql-pvc     # å¼•ç”¨ç°æœ‰çš„PVC
```

### 5.3 å¤šå®¹å™¨å…±äº«æ•°æ®å·


```yaml
spec:
  containers:
  # å†™å…¥æ•°æ®çš„å®¹å™¨
  - name: data-writer
    image: busybox
    command: ["/bin/sh"]
    args: ["-c", "echo 'Hello World' > /shared/data.txt; sleep 3600"]
    volumeMounts:
    - name: shared-data
      mountPath: /shared

  # è¯»å–æ•°æ®çš„å®¹å™¨  
  - name: data-reader
    image: busybox
    command: ["/bin/sh"]
    args: ["-c", "while true; do cat /shared/data.txt; sleep 30; done"]
    volumeMounts:
    - name: shared-data
      mountPath: /shared

  volumes:
  - name: shared-data
    emptyDir: {}               # ä¸¤ä¸ªå®¹å™¨å…±äº«è¿™ä¸ªå·
```

---

## 6. ğŸš¦ åˆå§‹åŒ–å®¹å™¨åº”ç”¨


### 6.1 åˆå§‹åŒ–å®¹å™¨æ¦‚å¿µ


**å½¢è±¡ç†è§£**ï¼šåˆå§‹åŒ–å®¹å™¨å°±åƒæ˜¯"å¼€è·¯å…ˆé”‹"ï¼Œåœ¨ä¸»å®¹å™¨å¯åŠ¨å‰å®Œæˆå‡†å¤‡å·¥ä½œã€‚

```
æ‰§è¡Œé¡ºåºï¼š
åˆå§‹åŒ–å®¹å™¨1 â†’ åˆå§‹åŒ–å®¹å™¨2 â†’ ä¸»å®¹å™¨å¯åŠ¨

ç±»æ¯”ç†è§£ï¼š
åˆå§‹åŒ–å®¹å™¨ = é¤å…å¼€ä¸šå‰çš„å‡†å¤‡å·¥ä½œ
- æ‰“æ‰«å«ç”Ÿï¼ˆæ¸…ç†ç¯å¢ƒï¼‰
- é‡‡è´­é£Ÿæï¼ˆä¸‹è½½ä¾èµ–ï¼‰
- æ£€æŸ¥è®¾å¤‡ï¼ˆéªŒè¯æœåŠ¡ï¼‰

ä¸»å®¹å™¨ = æ­£å¼è¥ä¸š
```

### 6.2 å…¸å‹åº”ç”¨åœºæ™¯


**ğŸ”¸ åœºæ™¯ä¸€ï¼šç­‰å¾…ä¾èµ–æœåŠ¡**
```yaml
spec:
  initContainers:
  - name: wait-for-db
    image: busybox:1.35
    command: ['sh', '-c']
    args:
    - |
      until nslookup mysql-service; do
        echo "ç­‰å¾…æ•°æ®åº“æœåŠ¡å¯åŠ¨..."
        sleep 2
      done
      echo "æ•°æ®åº“æœåŠ¡å·²å‡†å¤‡å°±ç»ª!"
  containers:
  - name: web-app
    image: myapp:latest
```

**ğŸ”¸ åœºæ™¯äºŒï¼šåˆå§‹åŒ–æ•°æ®**
```yaml
spec:
  initContainers:
  - name: setup-data
    image: mysql:8.0
    command: ['sh', '-c']
    args:
    - |
      mysql -h mysql-server -u root -p$MYSQL_ROOT_PASSWORD < /sql/init.sql
    env:
    - name: MYSQL_ROOT_PASSWORD
      valueFrom:
        secretKeyRef:
          name: mysql-secret
          key: password
    volumeMounts:
    - name: init-sql
      mountPath: /sql
  containers:
  - name: web-app
    image: myapp:latest
```

### 6.3 åˆå§‹åŒ–å®¹å™¨ç‰¹ç‚¹


```
è¿è¡Œç‰¹ç‚¹ï¼š
âœ… æŒ‰é¡ºåºæ‰§è¡Œï¼Œå‰ä¸€ä¸ªæˆåŠŸåæ‰æ‰§è¡Œä¸‹ä¸€ä¸ª
âœ… æ‰€æœ‰åˆå§‹åŒ–å®¹å™¨æˆåŠŸåï¼Œæ‰å¯åŠ¨ä¸»å®¹å™¨
âœ… å¦‚æœåˆå§‹åŒ–å®¹å™¨å¤±è´¥ï¼ŒPodé‡å¯æ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹

èµ„æºå…±äº«ï¼š
âœ… ä¸ä¸»å®¹å™¨å…±äº«ç›¸åŒçš„æ•°æ®å·
âœ… ä¸ä¸»å®¹å™¨å…±äº«ç›¸åŒçš„ç½‘ç»œ
âœ… å¯ä»¥ä½¿ç”¨ä¸åŒçš„é•œåƒå’Œå·¥å…·

é™åˆ¶æ¡ä»¶ï¼š
âŒ ä¸æ”¯æŒå¥åº·æ£€æŸ¥æ¢é’ˆ
âŒ ä¸æ”¯æŒç”Ÿå‘½å‘¨æœŸé’©å­
âŒ èµ„æºé™åˆ¶å•ç‹¬è®¡ç®—
```

---

## 7. ğŸ¯ Podç”Ÿå‘½å‘¨æœŸé’©å­


### 7.1 ç”Ÿå‘½å‘¨æœŸé’©å­æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šç”Ÿå‘½å‘¨æœŸé’©å­å°±åƒæ˜¯åœ¨å…³é”®æ—¶åˆ»è®¾ç½®çš„"æé†’é—¹é’Ÿ"ï¼Œè®©å®¹å™¨åœ¨å¯åŠ¨åæˆ–åœæ­¢å‰æ‰§è¡Œç‰¹å®šæ“ä½œã€‚

```
æ—¶é—´è½´ç¤ºæ„ï¼š
å®¹å™¨åˆ›å»º â†’ PostStarté’©å­ â†’ å®¹å™¨è¿è¡Œ â†’ PreStopé’©å­ â†’ å®¹å™¨åœæ­¢

ç±»æ¯”ç†è§£ï¼š
PostStart = æ–°å‘˜å·¥å…¥èŒåŸ¹è®­
PreStop = å‘˜å·¥ç¦»èŒäº¤æ¥å·¥ä½œ
```

### 7.2 PostStarté’©å­åº”ç”¨


**ğŸ”¸ åŸºæœ¬é…ç½®**
```yaml
spec:
  containers:
  - name: web-server
    image: nginx:1.20
    lifecycle:
      postStart:
        exec:
          command:
          - /bin/sh
          - -c
          - |
            echo "å®¹å™¨å¯åŠ¨å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–é…ç½®..."
            # åˆ›å»ºå¿…è¦çš„ç›®å½•
            mkdir -p /var/log/nginx
            # è®¾ç½®æƒé™
            chmod 755 /var/log/nginx
            echo "åˆå§‹åŒ–å®Œæˆ!"
```

**ğŸ”¸ HTTPè¯·æ±‚æ–¹å¼**
```yaml
lifecycle:
  postStart:
    httpGet:
      path: /startup
      port: 8080
      host: localhost
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ³¨å†ŒæœåŠ¡åˆ°æ³¨å†Œä¸­å¿ƒ
- åˆå§‹åŒ–åº”ç”¨é…ç½®
- é¢„çƒ­åº”ç”¨ç¼“å­˜
- è®¾ç½®æ–‡ä»¶æƒé™

### 7.3 PreStopé’©å­åº”ç”¨


```yaml
spec:
  containers:
  - name: web-server
    image: nginx:1.20
    lifecycle:
      preStop:
        exec:
          command:
          - /bin/sh
          - -c
          - |
            echo "å‡†å¤‡ä¼˜é›…åœæ­¢æœåŠ¡..."
            # åœæ­¢æ¥æ”¶æ–°è¯·æ±‚
            nginx -s quit
            # ç­‰å¾…ç°æœ‰è¿æ¥å¤„ç†å®Œæˆ
            sleep 15
            echo "æœåŠ¡å·²ä¼˜é›…åœæ­¢"
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä¼˜é›…å…³é—­æœåŠ¡
- ä»è´Ÿè½½å‡è¡¡å™¨æ³¨é”€
- ä¿å­˜çŠ¶æ€æ•°æ®
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### 7.4 é’©å­æ‰§è¡Œç‰¹ç‚¹


```
æ‰§è¡Œä¿è¯ï¼š
âœ… PostStartä¸å®¹å™¨ä¸»è¿›ç¨‹å¹¶å‘æ‰§è¡Œ
âœ… PreStopåœ¨å‘é€SIGTERMä¿¡å·å‰æ‰§è¡Œ
âœ… é’©å­å¤±è´¥ä¼šå½±å“å®¹å™¨çŠ¶æ€

è¶…æ—¶æ§åˆ¶ï¼š
âš ï¸ é»˜è®¤30ç§’è¶…æ—¶
âš ï¸ è¶…æ—¶åä¼šå¼ºåˆ¶ç»ˆæ­¢
âš ï¸ å¯é€šè¿‡terminationGracePeriodSecondsè°ƒæ•´

æ³¨æ„äº‹é¡¹ï¼š
âŒ é’©å­ä¸ä¿è¯åœ¨ä¸»è¿›ç¨‹å¯åŠ¨å‰å®Œæˆ
âŒ é’©å­å¤±è´¥ä¼šå¯¼è‡´å®¹å™¨å¯åŠ¨å¤±è´¥
âŒ é’©å­æ‰§è¡Œæ—¶é—´è®¡å…¥ä¼˜é›…åœæ­¢æ—¶é—´
```

---

## 8. ğŸ” å¥åº·æ£€æŸ¥æ¢é’ˆæœºåˆ¶


### 8.1 æ¢é’ˆåŸºæœ¬æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šæ¢é’ˆå°±åƒæ˜¯åŒ»ç”Ÿå®šæœŸæ£€æŸ¥ç—…äººèº«ä½“çŠ¶å†µï¼Œç¡®ä¿åº”ç”¨è¿è¡Œæ­£å¸¸ã€‚

```
ä¸‰ç§æ¢é’ˆç±»å‹ï¼š
ğŸ“‹ å­˜æ´»æ¢é’ˆ(Liveness) = æ£€æŸ¥"è¿˜æ´»ç€å—"
ğŸ“‹ å°±ç»ªæ¢é’ˆ(Readiness) = æ£€æŸ¥"å‡†å¤‡å¥½äº†å—" 
ğŸ“‹ å¯åŠ¨æ¢é’ˆ(Startup) = æ£€æŸ¥"å¯åŠ¨å®Œæˆäº†å—"

æ£€æŸ¥ç»“æœå¤„ç†ï¼š
âœ… æˆåŠŸ â†’ åº”ç”¨æ­£å¸¸
âŒ å¤±è´¥ â†’ æ‰§è¡Œå¯¹åº”æ“ä½œ
```

### 8.2 å­˜æ´»æ¢é’ˆ(Liveness Probe)


**ğŸ”¸ ä½œç”¨**ï¼šæ£€æµ‹å®¹å™¨æ˜¯å¦è¿˜æ´»ç€ï¼Œæ­»äº†å°±é‡å¯

```yaml
spec:
  containers:
  - name: web-app
    image: myapp:latest
    livenessProbe:
      httpGet:                    # HTTPæ£€æŸ¥æ–¹å¼
        path: /health            # æ£€æŸ¥è·¯å¾„
        port: 8080              # æ£€æŸ¥ç«¯å£
        scheme: HTTP            # åè®®
      initialDelaySeconds: 30   # å¯åŠ¨åç­‰å¾…30ç§’å¼€å§‹æ£€æŸ¥
      periodSeconds: 10         # æ¯10ç§’æ£€æŸ¥ä¸€æ¬¡
      timeoutSeconds: 5         # å•æ¬¡æ£€æŸ¥è¶…æ—¶5ç§’
      failureThreshold: 3       # è¿ç»­å¤±è´¥3æ¬¡è®¤ä¸ºå¤±è´¥
      successThreshold: 1       # æˆåŠŸ1æ¬¡è®¤ä¸ºæ¢å¤
```

**ğŸ”¸ TCPæ£€æŸ¥æ–¹å¼**
```yaml
livenessProbe:
  tcpSocket:
    port: 3306                  # æ£€æŸ¥æ•°æ®åº“ç«¯å£æ˜¯å¦å¼€æ”¾
  initialDelaySeconds: 15
  periodSeconds: 20
```

**ğŸ”¸ å‘½ä»¤æ£€æŸ¥æ–¹å¼**
```yaml
livenessProbe:
  exec:
    command:
    - cat
    - /tmp/healthy              # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
```

### 8.3 å°±ç»ªæ¢é’ˆ(Readiness Probe)


**ğŸ”¸ ä½œç”¨**ï¼šæ£€æµ‹å®¹å™¨æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶è¯·æ±‚ï¼Œæ²¡å‡†å¤‡å¥½å°±æš‚æ—¶ä¸å‘é€æµé‡

```yaml
spec:
  containers:
  - name: web-app
    image: myapp:latest
    readinessProbe:
      httpGet:
        path: /ready            # å°±ç»ªæ£€æŸ¥æ¥å£
        port: 8080
      initialDelaySeconds: 10
      periodSeconds: 5
      failureThreshold: 3
```

**ä¸å­˜æ´»æ¢é’ˆçš„åŒºåˆ«**ï¼š
```
å­˜æ´»æ¢é’ˆå¤±è´¥ â†’ é‡å¯å®¹å™¨
å°±ç»ªæ¢é’ˆå¤±è´¥ â†’ ä»Serviceä¸­ç§»é™¤ï¼Œä¸é‡å¯å®¹å™¨

åº”ç”¨åœºæ™¯ï¼š
å­˜æ´»æ¢é’ˆï¼šåº”ç”¨æ­»é”ã€å†…å­˜æ³„æ¼ç­‰ä¸¥é‡é—®é¢˜
å°±ç»ªæ¢é’ˆï¼šåº”ç”¨å¯åŠ¨ä¸­ã€ä¸´æ—¶ä¸å¯ç”¨ç­‰æƒ…å†µ
```

### 8.4 å¯åŠ¨æ¢é’ˆ(Startup Probe)


**ğŸ”¸ ä½œç”¨**ï¼šç»™æ…¢å¯åŠ¨çš„åº”ç”¨æ›´å¤šæ—¶é—´ï¼Œå¯åŠ¨å®Œæˆå‰ä¸æ‰§è¡Œå…¶ä»–æ¢é’ˆ

```yaml
spec:
  containers:
  - name: slow-app
    image: heavy-app:latest
    startupProbe:
      httpGet:
        path: /startup
        port: 8080
      failureThreshold: 30      # æœ€å¤šå¤±è´¥30æ¬¡
      periodSeconds: 10         # æ¯10ç§’æ£€æŸ¥ï¼Œæ€»å…±5åˆ†é’Ÿå¯åŠ¨æ—¶é—´
    livenessProbe:              # å¯åŠ¨æ¢é’ˆæˆåŠŸåæ‰å¼€å§‹
      httpGet:
        path: /health
        port: 8080
```

### 8.5 æ¢é’ˆé…ç½®æœ€ä½³å®è·µ


| æ¢é’ˆç±»å‹ | **æ£€æŸ¥å†…å®¹** | **å¤±è´¥å¤„ç†** | **å…¸å‹é…ç½®** |
|---------|-------------|-------------|-------------|
| **Liveness** | `åº”ç”¨ä¸»è¦åŠŸèƒ½` | `é‡å¯å®¹å™¨` | `è¾ƒé•¿é—´éš”ï¼Œé¿å…è¯¯æ€` |
| **Readiness** | `æœåŠ¡å°±ç»ªçŠ¶æ€` | `ç§»å‡ºæµé‡` | `è¾ƒçŸ­é—´éš”ï¼Œå¿«é€Ÿå“åº”` |
| **Startup** | `å¯åŠ¨å®ŒæˆçŠ¶æ€` | `å»¶é•¿å¯åŠ¨æ—¶é—´` | `ç»™è¶³å¯åŠ¨æ—¶é—´` |

---

## 9. ğŸ¯ Podè°ƒåº¦ä¸èŠ‚ç‚¹é€‰æ‹©


### 9.1 è°ƒåº¦åŸºæœ¬æ¦‚å¿µ


**ç®€å•ç†è§£**ï¼šPodè°ƒåº¦å°±åƒæ˜¯"æˆ¿å±‹åˆ†é…"ï¼Œå†³å®šPodåº”è¯¥ä½åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚

```
è°ƒåº¦è¿‡ç¨‹ï¼š
1. åˆ›å»ºPod â†’ 2. è°ƒåº¦å™¨åˆ†æ â†’ 3. é€‰æ‹©èŠ‚ç‚¹ â†’ 4. éƒ¨ç½²Pod

å½±å“å› ç´ ï¼š
âœ… èŠ‚ç‚¹èµ„æºæ˜¯å¦å……è¶³
âœ… Podçš„èµ„æºéœ€æ±‚
âœ… èŠ‚ç‚¹æ ‡ç­¾åŒ¹é…
âœ… äº²å’Œæ€§å’Œåäº²å’Œæ€§è§„åˆ™
âœ… æ±¡ç‚¹å’Œå®¹å¿è®¾ç½®
```

### 9.2 nodeSelectorèŠ‚ç‚¹é€‰æ‹©


**ğŸ”¸ åŸºæœ¬ç”¨æ³•**ï¼šé€šè¿‡æ ‡ç­¾é€‰æ‹©èŠ‚ç‚¹
```yaml
spec:
  nodeSelector:
    disktype: ssd              # é€‰æ‹©æœ‰ssdæ ‡ç­¾çš„èŠ‚ç‚¹
    zone: us-west-1           # é€‰æ‹©ç‰¹å®šåŒºåŸŸçš„èŠ‚ç‚¹
  containers:
  - name: app
    image: myapp:latest
```

**ğŸ”¸ ç»™èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾**
```bash
# ç»™èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾
kubectl label nodes node1 disktype=ssd
kubectl label nodes node1 zone=us-west-1

# æŸ¥çœ‹èŠ‚ç‚¹æ ‡ç­¾
kubectl get nodes --show-labels
```

### 9.3 èŠ‚ç‚¹äº²å’Œæ€§(Node Affinity)


**ğŸ”¸ ç¡¬æ€§è¦æ±‚(requiredDuringScheduling)**
```yaml
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:  # å¿…é¡»æ»¡è¶³
        nodeSelectorTerms:
        - matchExpressions:
          - key: zone
            operator: In
            values:
            - us-west-1
            - us-west-2
          - key: disktype
            operator: NotIn
            values:
            - spinning
```

**ğŸ”¸ è½¯æ€§åå¥½(preferredDuringScheduling)**
```yaml
spec:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:  # ä¼˜å…ˆé€‰æ‹©
      - weight: 100                    # æƒé‡ï¼Œè¶Šé«˜è¶Šä¼˜å…ˆ
        preference:
          matchExpressions:
          - key: zone
            operator: In
            values:
            - us-west-1
      - weight: 50
        preference:
          matchExpressions:
          - key: disktype
            operator: In
            values:
            - ssd
```

### 9.4 Podäº²å’Œæ€§å’Œåäº²å’Œæ€§


**ğŸ”¸ Podäº²å’Œæ€§**ï¼šè®©ç›¸å…³Podå°½é‡åœ¨ä¸€èµ·
```yaml
spec:
  affinity:
    podAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
          - key: app
            operator: In
            values:
            - redis
        topologyKey: kubernetes.io/hostname    # åŒä¸€èŠ‚ç‚¹
```

**ğŸ”¸ Podåäº²å’Œæ€§**ï¼šè®©ç›¸åŒPodåˆ†æ•£éƒ¨ç½²
```yaml
spec:
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
            - key: app
              operator: In
              values:
              - web-server
          topologyKey: kubernetes.io/hostname  # é¿å…åŒä¸€èŠ‚ç‚¹
```

### 9.5 æ±¡ç‚¹å’Œå®¹å¿(Taints and Tolerations)


**ğŸ”¸ æ¦‚å¿µç†è§£**
```
æ±¡ç‚¹(Taint) = èŠ‚ç‚¹çš„"ç¦æ­¢æ ‡è¯†"
å®¹å¿(Toleration) = Podçš„"é€šè¡Œè¯"

ç±»æ¯”ï¼š
èŠ‚ç‚¹è®¾ç½®æ±¡ç‚¹ = "æ­¤è·¯ç¦è¡Œ"
Podè®¾ç½®å®¹å¿ = "æˆ‘æœ‰ç‰¹åˆ«é€šè¡Œè¯"
```

**ğŸ”¸ è®¾ç½®èŠ‚ç‚¹æ±¡ç‚¹**
```bash
# ç»™èŠ‚ç‚¹æ·»åŠ æ±¡ç‚¹
kubectl taint nodes node1 key=value:NoSchedule

# æ±¡ç‚¹æ•ˆæœç±»å‹ï¼š
# NoSchedule: ä¸è°ƒåº¦æ–°Pod
# PreferNoSchedule: å°½é‡ä¸è°ƒåº¦
# NoExecute: ä¸è°ƒåº¦ä¸”é©±é€ç°æœ‰Pod
```

**ğŸ”¸ Podå®¹å¿é…ç½®**
```yaml
spec:
  tolerations:
  - key: "key"
    operator: "Equal"
    value: "value"
    effect: "NoSchedule"
  - key: "special"
    operator: "Exists"         # å­˜åœ¨å³å¯ï¼Œä¸ç”¨åŒ¹é…å€¼
    effect: "NoExecute"
    tolerationSeconds: 3600    # å®¹å¿3600ç§’åè¢«é©±é€
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ Podæœ¬è´¨ï¼šKubernetesæœ€å°éƒ¨ç½²å•å…ƒï¼Œå®¹å™¨çš„"å®¿èˆ"æ¦‚å¿µ
ğŸ”¸ é…ç½®æ–‡ä»¶ï¼šYAMLæ ¼å¼çš„"è¯´æ˜ä¹¦"ï¼ŒåŒ…å«å…ƒæ•°æ®å’Œè§„æ ¼è¯´æ˜
ğŸ”¸ èµ„æºé™åˆ¶ï¼šrequestsä¿è¯èµ„æºï¼Œlimitsé™åˆ¶èµ„æºä¸Šé™
ğŸ”¸ ç¯å¢ƒå˜é‡ï¼šç¨‹åºçš„"è®¾ç½®èœå•"ï¼Œæ”¯æŒç›´æ¥è®¾ç½®å’Œå¤–éƒ¨å¼•ç”¨
ğŸ”¸ æ•°æ®å·ï¼šå®¹å™¨çš„"å¤–æ¥ç¡¬ç›˜"ï¼Œå®ç°æ•°æ®æŒä¹…åŒ–å’Œå…±äº«
ğŸ”¸ åˆå§‹åŒ–å®¹å™¨ï¼šä¸»å®¹å™¨å¯åŠ¨å‰çš„"å¼€è·¯å…ˆé”‹"
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šå…³é”®æ—¶åˆ»çš„"æé†’é—¹é’Ÿ"
ğŸ”¸ å¥åº·æ£€æŸ¥ï¼šåº”ç”¨çš„"ä½“æ£€åŒ»ç”Ÿ"ï¼Œä¿è¯æœåŠ¡å¯ç”¨æ€§
ğŸ”¸ è°ƒåº¦é€‰æ‹©ï¼šPodçš„"æˆ¿å±‹åˆ†é…"ï¼Œå†³å®šè¿è¡Œä½ç½®
```

### 10.2 å…³é”®é…ç½®è¦ç‚¹


**ğŸ”¹ èµ„æºé…ç½®å»ºè®®**
```
CPUé…ç½®ï¼š
- Webåº”ç”¨ï¼šrequests: 100m, limits: 500m
- æ•°æ®åº“ï¼šrequests: 500m, limits: 2000m
- åå°ä»»åŠ¡ï¼šrequests: 200m, limits: 1000m

å†…å­˜é…ç½®ï¼š
- è½»é‡åº”ç”¨ï¼šrequests: 128Mi, limits: 256Mi
- æ ‡å‡†åº”ç”¨ï¼šrequests: 256Mi, limits: 512Mi
- é‡å‹åº”ç”¨ï¼šrequests: 512Mi, limits: 1Gi

QoSé€‰æ‹©ï¼š
- å…³é”®æœåŠ¡ï¼šGuaranteed (requests = limits)
- ä¸€èˆ¬æœåŠ¡ï¼šBurstable (requests < limits)
- æ‰¹å¤„ç†ï¼šBestEffort (æ— é™åˆ¶)
```

**ğŸ”¹ å¥åº·æ£€æŸ¥é…ç½®**
```
å­˜æ´»æ¢é’ˆï¼š
- æ£€æŸ¥åº”ç”¨æ ¸å¿ƒåŠŸèƒ½
- å¤±è´¥é˜ˆå€¼3-5æ¬¡
- æ£€æŸ¥é—´éš”10-30ç§’
- ç»™è¶³å¯åŠ¨æ—¶é—´

å°±ç»ªæ¢é’ˆï¼š
- æ£€æŸ¥æœåŠ¡å°±ç»ªçŠ¶æ€
- å¿«é€Ÿå“åº”ï¼Œé—´éš”5-10ç§’
- ç¡®ä¿åº”ç”¨å®Œå…¨å¯åŠ¨åæ‰æ¥æ”¶æµé‡

å¯åŠ¨æ¢é’ˆï¼š
- æ…¢å¯åŠ¨åº”ç”¨å¿…é…
- ç»™è¶³å¤Ÿçš„å¯åŠ¨æ—¶é—´
- é¿å…å­˜æ´»æ¢é’ˆè¯¯æ€
```

### 10.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ Webåº”ç”¨éƒ¨ç½²**
- å•å®¹å™¨Pod + èµ„æºé™åˆ¶
- å°±ç»ªå’Œå­˜æ´»æ¢é’ˆä¿è¯å¯ç”¨æ€§
- ç¯å¢ƒå˜é‡é…ç½®ä¸åŒç¯å¢ƒ
- æ•°æ®å·æŒä¹…åŒ–æ—¥å¿—

**ğŸ¯ æ•°æ®åº“éƒ¨ç½²**
- ä¸¥æ ¼èµ„æºé™åˆ¶é¿å…OOM
- æŒä¹…åŒ–æ•°æ®å·å¿…ä¸å¯å°‘
- åˆå§‹åŒ–å®¹å™¨å‡†å¤‡æ•°æ®
- èŠ‚ç‚¹é€‰æ‹©ä¿è¯æ€§èƒ½

**ğŸ¯ å¾®æœåŠ¡æ¶æ„**
- Podäº²å’Œæ€§å°±è¿‘éƒ¨ç½²
- åäº²å’Œæ€§åˆ†æ•£é£é™©
- ConfigMapç»Ÿä¸€é…ç½®ç®¡ç†
- Secretä¿æŠ¤æ•æ„Ÿä¿¡æ¯

### 10.4 å¸¸è§é—®é¢˜ä¸è§£å†³


```
é—®é¢˜1ï¼šPodä¸€ç›´å¤„äºPendingçŠ¶æ€
æ’æŸ¥ï¼šèŠ‚ç‚¹èµ„æºä¸è¶³ã€è°ƒåº¦æ¡ä»¶ä¸æ»¡è¶³ã€é•œåƒæ‹‰å–é—®é¢˜

é—®é¢˜2ï¼šå®¹å™¨é¢‘ç¹é‡å¯
æ’æŸ¥ï¼šå¥åº·æ£€æŸ¥é…ç½®è¿‡äºæ•æ„Ÿã€èµ„æºä¸è¶³ã€åº”ç”¨bug

é—®é¢˜3ï¼šåº”ç”¨å¯åŠ¨æ…¢
è§£å†³ï¼šé…ç½®å¯åŠ¨æ¢é’ˆã€è°ƒæ•´å¥åº·æ£€æŸ¥æ—¶é—´ã€ä¼˜åŒ–åº”ç”¨å¯åŠ¨

é—®é¢˜4ï¼šæ•°æ®ä¸¢å¤±
è§£å†³ï¼šæ­£ç¡®é…ç½®æŒä¹…åŒ–æ•°æ®å·ã€å¤‡ä»½ç­–ç•¥

é—®é¢˜5ï¼šè°ƒåº¦ä¸å‡è¡¡
è§£å†³ï¼šé…ç½®äº²å’Œæ€§è§„åˆ™ã€èµ„æºé…é¢ã€æ±¡ç‚¹å®¹å¿
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- Podæ˜¯å®¹å™¨å®¿èˆè¦å…±äº«ï¼Œé…ç½®æ–‡ä»¶æ˜¯è¯´æ˜ä¹¦
- èµ„æºé™åˆ¶é˜²æŠ¢å¤ºï¼Œç¯å¢ƒå˜é‡ä¼ è®¾ç½®
- æ•°æ®å·å¤–æ¥ç¡¬ç›˜å­˜ï¼Œåˆå§‹åŒ–å¼€è·¯å…ˆé”‹
- ç”Ÿå‘½é’©å­å…³é”®æ—¶ï¼Œå¥åº·æ£€æŸ¥åšä½“æ£€  
- è°ƒåº¦é€‰æ‹©æ‰¾æˆ¿å­ï¼Œäº²å’Œè§„åˆ™å·§å®‰æ’