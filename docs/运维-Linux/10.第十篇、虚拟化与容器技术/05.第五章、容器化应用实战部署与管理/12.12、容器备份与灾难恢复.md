---
title: 12ã€å®¹å™¨å¤‡ä»½ä¸ç¾éš¾æ¢å¤
---
## ğŸ“š ç›®å½•

1. [å®¹å™¨å¤‡ä»½åŸºç¡€æ¦‚å¿µ](#1-å®¹å™¨å¤‡ä»½åŸºç¡€æ¦‚å¿µ)
2. [å®¹å™¨æ•°æ®å¤‡ä»½ç­–ç•¥](#2-å®¹å™¨æ•°æ®å¤‡ä»½ç­–ç•¥)
3. [é•œåƒå¤‡ä»½ä¸ç‰ˆæœ¬ç®¡ç†](#3-é•œåƒå¤‡ä»½ä¸ç‰ˆæœ¬ç®¡ç†)
4. [é…ç½®æ–‡ä»¶å¤‡ä»½](#4-é…ç½®æ–‡ä»¶å¤‡ä»½)
5. [ç¾éš¾æ¢å¤é¢„æ¡ˆåˆ¶å®š](#5-ç¾éš¾æ¢å¤é¢„æ¡ˆåˆ¶å®š)
6. [æ•°æ®æ¢å¤æµç¨‹æµ‹è¯•](#6-æ•°æ®æ¢å¤æµç¨‹æµ‹è¯•)
7. [è·¨ç¯å¢ƒè¿ç§»](#7-è·¨ç¯å¢ƒè¿ç§»)
8. [ä¸šåŠ¡è¿ç»­æ€§ä¿éšœ](#8-ä¸šåŠ¡è¿ç»­æ€§ä¿éšœ)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ å®¹å™¨å¤‡ä»½åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å®¹å™¨å¤‡ä»½


**å®¹å™¨å¤‡ä»½**å°±æ˜¯æŠŠè¿è¡Œä¸­çš„åº”ç”¨å’Œæ•°æ®å®‰å…¨åœ°ä¿å­˜èµ·æ¥ï¼Œé˜²æ­¢æ„å¤–ä¸¢å¤±ã€‚æƒ³è±¡ä½ çš„æ‰‹æœºç…§ç‰‡ä¼šå®šæœŸå¤‡ä»½åˆ°äº‘ç«¯ï¼Œå®¹å™¨å¤‡ä»½ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚

**ğŸ”¸ å®¹å™¨å¤‡ä»½çš„æ ¸å¿ƒè¦ç´ **
```
æ•°æ®å±‚å¤‡ä»½ï¼š
â€¢ æŒä¹…åŒ–æ•°æ®ï¼šæ•°æ®åº“æ–‡ä»¶ã€ä¸Šä¼ æ–‡ä»¶ã€æ—¥å¿—ç­‰
â€¢ ä¸´æ—¶æ•°æ®ï¼šç¼“å­˜ã€ä¼šè¯æ•°æ®ç­‰ï¼ˆé€šå¸¸ä¸å¤‡ä»½ï¼‰

åº”ç”¨å±‚å¤‡ä»½ï¼š
â€¢ å®¹å™¨é•œåƒï¼šåŒ…å«åº”ç”¨ç¨‹åºå’Œè¿è¡Œç¯å¢ƒ
â€¢ é…ç½®æ–‡ä»¶ï¼šç¯å¢ƒå˜é‡ã€é…ç½®å‚æ•°
â€¢ ç½‘ç»œé…ç½®ï¼šç«¯å£æ˜ å°„ã€ç½‘ç»œè¿æ¥è®¾ç½®
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦å®¹å™¨å¤‡ä»½


**ğŸ’¡ ç°å®åœºæ™¯å¯¹æ¯”**
```
ä¼ ç»ŸæœåŠ¡å™¨æ•…éšœï¼š
ç¡¬ç›˜åäº† â†’ æ•°æ®å…¨éƒ¨ä¸¢å¤± â†’ ä¸šåŠ¡åœæ­¢å‡ å¤©

æœ‰å®¹å™¨å¤‡ä»½çš„æ•…éšœï¼š
æœåŠ¡å™¨åäº† â†’ ä»å¤‡ä»½æ¢å¤ â†’ ä¸šåŠ¡1å°æ—¶å†…æ¢å¤

å…³é”®å·®å¼‚ï¼š
â€¢ æ¢å¤æ—¶é—´ï¼šå‡ å¤© vs å‡ å°æ—¶
â€¢ æ•°æ®æŸå¤±ï¼šå…¨éƒ¨ä¸¢å¤± vs æœ€å¤šä¸¢å¤±å‡ å°æ—¶æ•°æ®
â€¢ ä¸šåŠ¡å½±å“ï¼šä¸¥é‡ vs è½»å¾®
```

### 1.3 å®¹å™¨å¤‡ä»½çš„ç‰¹æ®Šæ€§


**ä¸ä¼ ç»Ÿå¤‡ä»½çš„åŒºåˆ«**ï¼š

| ç‰¹ç‚¹ | **ä¼ ç»ŸæœåŠ¡å™¨å¤‡ä»½** | **å®¹å™¨å¤‡ä»½** |
|------|------------------|-------------|
| **å¤‡ä»½å¯¹è±¡** | `æ•´ä¸ªæœåŠ¡å™¨` | `å®¹å™¨é•œåƒ+æ•°æ®å·` |
| **å¤‡ä»½ç²’åº¦** | `ç³»ç»Ÿçº§` | `åº”ç”¨çº§` |
| **æ¢å¤é€Ÿåº¦** | `å‡ å°æ—¶åˆ°å‡ å¤©` | `å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶` |
| **è·¨å¹³å°æ€§** | `å¹³å°ç»‘å®š` | `è·¨å¹³å°å…¼å®¹` |
| **ç‰ˆæœ¬ç®¡ç†** | `å¤æ‚` | `ç®€å•æ˜ç¡®` |

---

## 2. ğŸ’¾ å®¹å™¨æ•°æ®å¤‡ä»½ç­–ç•¥


### 2.1 æ•°æ®åˆ†ç±»ä¸å¤‡ä»½ç­–ç•¥


**ğŸ”¸ æŒ‰æ•°æ®é‡è¦æ€§åˆ†ç±»**
```
å…³é”®æ•°æ®ï¼ˆCritical Dataï¼‰ï¼š
â€¢ ç”¨æˆ·æ•°æ®ã€è®¢å•ä¿¡æ¯ã€è´¢åŠ¡æ•°æ®
â€¢ å¤‡ä»½é¢‘ç‡ï¼šå®æ—¶æˆ–æ¯å°æ—¶
â€¢ ä¿ç•™æœŸï¼šæ°¸ä¹…æˆ–é•¿æœŸä¿ç•™
â€¢ å¤‡ä»½æ–¹å¼ï¼šå¤šåœ°å¤šå‰¯æœ¬

é‡è¦æ•°æ®ï¼ˆImportant Dataï¼‰ï¼š
â€¢ é…ç½®æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ã€ç¼“å­˜æ•°æ®
â€¢ å¤‡ä»½é¢‘ç‡ï¼šæ¯å¤©
â€¢ ä¿ç•™æœŸï¼š30-90å¤©
â€¢ å¤‡ä»½æ–¹å¼ï¼šæœ¬åœ°+è¿œç¨‹

æ™®é€šæ•°æ®ï¼ˆNormal Dataï¼‰ï¼š
â€¢ ä¸´æ—¶æ–‡ä»¶ã€ç¼“å­˜ã€ä¼šè¯æ•°æ®
â€¢ å¤‡ä»½é¢‘ç‡ï¼šæŒ‰éœ€æˆ–ä¸å¤‡ä»½
â€¢ ä¿ç•™æœŸï¼š7-30å¤©
â€¢ å¤‡ä»½æ–¹å¼ï¼šæœ¬åœ°å¤‡ä»½
```

### 2.2 Docker æ•°æ®å·å¤‡ä»½


**æ•°æ®å·æ˜¯ä»€ä¹ˆ**ï¼šæ•°æ®å·å°±åƒå®¹å™¨çš„"å¤–æ¥ç¡¬ç›˜"ï¼Œä¸“é—¨å­˜æ”¾éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ã€‚

**ğŸ”§ åŸºæœ¬å¤‡ä»½å‘½ä»¤**
```bash
# åˆ›å»ºæ•°æ®å·å¤‡ä»½
docker run --rm -v mydata:/data -v $(pwd):/backup \
  busybox tar czf /backup/data-backup.tar.gz -C /data .

# å‘½ä»¤è§£é‡Šï¼š
# --rm: å¤‡ä»½å®Œæˆåè‡ªåŠ¨åˆ é™¤ä¸´æ—¶å®¹å™¨
# -v mydata:/data: æŒ‚è½½è¦å¤‡ä»½çš„æ•°æ®å·
# -v $(pwd):/backup: æŒ‚è½½å¤‡ä»½æ–‡ä»¶å­˜æ”¾ç›®å½•
# tar czf: åˆ›å»ºå‹ç¼©å¤‡ä»½æ–‡ä»¶
```

**ğŸ”¸ è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
# backup-container.sh - å®¹å™¨æ•°æ®å¤‡ä»½è„šæœ¬

BACKUP_DIR="/backup/containers"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½æŒ‡å®šæ•°æ®å·
backup_volume() {
    local volume_name=$1
    local backup_name="${volume_name}_${DATE}.tar.gz"
    
    echo "æ­£åœ¨å¤‡ä»½æ•°æ®å·: $volume_name"
    
    docker run --rm \
        -v $volume_name:/data \
        -v $BACKUP_DIR:/backup \
        busybox tar czf /backup/$backup_name -C /data .
    
    if [ $? -eq 0 ]; then
        echo "âœ… å¤‡ä»½å®Œæˆ: $backup_name"
    else
        echo "âŒ å¤‡ä»½å¤±è´¥: $volume_name"
    fi
}

# å¤‡ä»½å¤šä¸ªæ•°æ®å·
backup_volume "mysql_data"
backup_volume "nginx_config" 
backup_volume "app_uploads"
```

### 2.3 æ•°æ®åº“ä¸“é¡¹å¤‡ä»½


**MySQL å®¹å™¨å¤‡ä»½**
```bash
# é€»è¾‘å¤‡ä»½ï¼ˆæ¨èï¼‰
docker exec mysql-container mysqldump \
  -u root -ppassword database_name > backup.sql

# ç‰©ç†å¤‡ä»½ï¼ˆé€‚åˆå¤§å‹æ•°æ®åº“ï¼‰
docker run --rm \
  -v mysql_data:/var/lib/mysql \
  -v $(pwd):/backup \
  mysql:5.7 \
  bash -c "cp -r /var/lib/mysql /backup/mysql_backup_$(date +%Y%m%d)"
```

**PostgreSQL å®¹å™¨å¤‡ä»½**
```bash
# åˆ›å»ºæ•°æ®åº“å¤‡ä»½
docker exec postgres-container pg_dump \
  -U postgres database_name > postgres_backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i postgres-container psql \
  -U postgres database_name < postgres_backup.sql
```

---

## 3. ğŸ·ï¸ é•œåƒå¤‡ä»½ä¸ç‰ˆæœ¬ç®¡ç†


### 3.1 é•œåƒå¤‡ä»½çš„é‡è¦æ€§


**ä¸ºä»€ä¹ˆè¦å¤‡ä»½é•œåƒ**ï¼šé•œåƒå°±æ˜¯åº”ç”¨ç¨‹åºçš„"å®‰è£…åŒ…"ï¼ŒåŒ…å«äº†è¿è¡Œç¯å¢ƒå’Œä»£ç ã€‚å¤‡ä»½é•œåƒå°±æ˜¯ç¡®ä¿éšæ—¶èƒ½é‡æ–°"å®‰è£…"åº”ç”¨ã€‚

**ğŸ”¸ é•œåƒå¤‡ä»½ç­–ç•¥**
```
ç”Ÿäº§ç¯å¢ƒé•œåƒï¼š
â€¢ æ¯ä¸ªç‰ˆæœ¬éƒ½è¦å¤‡ä»½
â€¢ è‡³å°‘ä¿ç•™æœ€è¿‘3ä¸ªç‰ˆæœ¬
â€¢ é‡è¦ç‰ˆæœ¬æ°¸ä¹…ä¿ç•™

æµ‹è¯•ç¯å¢ƒé•œåƒï¼š
â€¢ é‡è¦é‡Œç¨‹ç¢‘ç‰ˆæœ¬å¤‡ä»½
â€¢ ä¿ç•™æœ€è¿‘10ä¸ªç‰ˆæœ¬
â€¢ å®šæœŸæ¸…ç†æ—§ç‰ˆæœ¬

å¼€å‘ç¯å¢ƒé•œåƒï¼š
â€¢ æŒ‰éœ€å¤‡ä»½
â€¢ ä¿ç•™æœ€è¿‘5ä¸ªç‰ˆæœ¬
```

### 3.2 é•œåƒå¯¼å‡ºä¸å¯¼å…¥


**ğŸ”§ åŸºæœ¬æ“ä½œå‘½ä»¤**
```bash
# å¯¼å‡ºé•œåƒåˆ°æ–‡ä»¶
docker save -o myapp_v1.2.tar myapp:1.2

# ä»æ–‡ä»¶å¯¼å…¥é•œåƒ  
docker load -i myapp_v1.2.tar

# æ‰¹é‡å¯¼å‡ºå¤šä¸ªé•œåƒ
docker save -o all_images.tar image1:tag1 image2:tag2 image3:tag3

# æŸ¥çœ‹å¯¼å‡ºæ–‡ä»¶ä¿¡æ¯
tar -tf myapp_v1.2.tar | head -10
```

**ğŸ’¡ å®ç”¨æŠ€å·§**
```bash
# è‡ªåŠ¨åŒ–é•œåƒå¤‡ä»½è„šæœ¬
#!/bin/bash
IMAGES=$(docker images --format "{{.Repository}}:{{.Tag}}" | grep -v "<none>")
BACKUP_DIR="/backup/images/$(date +%Y%m%d)"

mkdir -p $BACKUP_DIR

for image in $IMAGES; do
    filename=$(echo $image | tr '/:' '_')
    echo "å¤‡ä»½é•œåƒ: $image"
    docker save -o "$BACKUP_DIR/${filename}.tar" $image
done
```

### 3.3 ç§æœ‰é•œåƒä»“åº“å¤‡ä»½


**æ­å»ºç®€å•çš„ç§æœ‰ä»“åº“**
```bash
# å¯åŠ¨ç§æœ‰é•œåƒä»“åº“
docker run -d -p 5000:5000 --name registry \
  -v registry_data:/var/lib/registry \
  registry:2

# æ¨é€é•œåƒåˆ°ç§æœ‰ä»“åº“
docker tag myapp:1.2 localhost:5000/myapp:1.2
docker push localhost:5000/myapp:1.2

# ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ
docker pull localhost:5000/myapp:1.2
```

---

## 4. ğŸ“‹ é…ç½®æ–‡ä»¶å¤‡ä»½


### 4.1 å®¹å™¨é…ç½®æ–‡ä»¶ç±»å‹


**ğŸ”¸ éœ€è¦å¤‡ä»½çš„é…ç½®æ–‡ä»¶**
```
Docker ç›¸å…³é…ç½®ï¼š
â€¢ docker-compose.yml: å®¹å™¨ç¼–æ’é…ç½®
â€¢ Dockerfile: é•œåƒæ„å»ºæ–‡ä»¶
â€¢ .env: ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶

åº”ç”¨ç¨‹åºé…ç½®ï¼š
â€¢ nginx.conf: WebæœåŠ¡å™¨é…ç½®
â€¢ my.cnf: MySQLæ•°æ®åº“é…ç½®  
â€¢ application.yml: åº”ç”¨ç¨‹åºé…ç½®

ç³»ç»Ÿé…ç½®ï¼š
â€¢ ç½‘ç»œé…ç½®æ–‡ä»¶
â€¢ å­˜å‚¨é…ç½®æ–‡ä»¶
â€¢ å®‰å…¨é…ç½®æ–‡ä»¶
```

### 4.2 é…ç½®æ–‡ä»¶å¤‡ä»½å®è·µ


**ğŸ“ é…ç½®æ–‡ä»¶ç»„ç»‡ç»“æ„**
```
/opt/containers/
â”œâ”€â”€ app1/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ .env
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ nginx.conf
â”‚       â””â”€â”€ app.properties
â”œâ”€â”€ app2/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ config/
â””â”€â”€ backup/
    â”œâ”€â”€ configs_20250117.tar.gz
    â””â”€â”€ configs_20250116.tar.gz
```

**ğŸ”§ é…ç½®å¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
# backup-configs.sh - é…ç½®æ–‡ä»¶å¤‡ä»½è„šæœ¬

CONFIG_DIR="/opt/containers"
BACKUP_DIR="/opt/containers/backup"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºé…ç½®å¤‡ä»½
tar czf "$BACKUP_DIR/configs_$DATE.tar.gz" \
  --exclude="$BACKUP_DIR" \
  -C "$CONFIG_DIR" .

# ä¿ç•™æœ€è¿‘30å¤©çš„å¤‡ä»½
find "$BACKUP_DIR" -name "configs_*.tar.gz" -mtime +30 -delete

echo "âœ… é…ç½®æ–‡ä»¶å¤‡ä»½å®Œæˆ: configs_$DATE.tar.gz"
```

### 4.3 ç‰ˆæœ¬æ§åˆ¶ç®¡ç†


**ä½¿ç”¨ Git ç®¡ç†é…ç½®**ï¼šæŠŠé…ç½®æ–‡ä»¶æ”¾åˆ° Git ä»“åº“ä¸­ï¼Œè¿™æ ·å¯ä»¥è¿½è¸ªæ¯æ¬¡ä¿®æ”¹ã€‚

```bash
# åˆå§‹åŒ–é…ç½®ä»“åº“
cd /opt/containers
git init
git add .
git commit -m "åˆå§‹é…ç½®æ–‡ä»¶"

# é…ç½®ä¿®æ”¹åæäº¤
git add .
git commit -m "æ›´æ–°nginxé…ç½®ï¼Œä¼˜åŒ–æ€§èƒ½"
git tag v1.2  # ç»™é‡è¦ç‰ˆæœ¬æ‰“æ ‡ç­¾

# æ¨é€åˆ°è¿œç¨‹ä»“åº“å¤‡ä»½
git remote add origin https://git.company.com/configs.git
git push origin master
```

---

## 5. ğŸš¨ ç¾éš¾æ¢å¤é¢„æ¡ˆåˆ¶å®š


### 5.1 ä»€ä¹ˆæ˜¯ç¾éš¾æ¢å¤é¢„æ¡ˆ


**ç¾éš¾æ¢å¤é¢„æ¡ˆ**å°±æ˜¯æå‰å‡†å¤‡å¥½çš„"åº”æ€¥æ‰‹å†Œ"ï¼Œå½“ç³»ç»Ÿå‡ºç°ä¸¥é‡æ•…éšœæ—¶ï¼ŒæŒ‰ç…§æ‰‹å†Œçš„æ­¥éª¤å¿«é€Ÿæ¢å¤æœåŠ¡ã€‚

**ğŸ”¸ å¸¸è§ç¾éš¾åœºæ™¯**
```
ç¡¬ä»¶æ•…éšœï¼š
â€¢ æœåŠ¡å™¨å®•æœºã€ç¡¬ç›˜æŸå
â€¢ ç½‘ç»œä¸­æ–­ã€ç”µæºæ•…éšœ

è½¯ä»¶æ•…éšœï¼š
â€¢ åº”ç”¨ç¨‹åºå´©æºƒã€æ•°æ®åº“æŸå
â€¢ é…ç½®é”™è¯¯ã€ç‰ˆæœ¬å†²çª

äººä¸ºé”™è¯¯ï¼š
â€¢ è¯¯åˆ æ•°æ®ã€é”™è¯¯æ“ä½œ
â€¢ é”™è¯¯éƒ¨ç½²ã€é…ç½®å¤±è¯¯

å¤–éƒ¨å› ç´ ï¼š
â€¢ æœºæˆ¿æ–­ç”µã€ç½‘ç»œæ”»å‡»
â€¢ è‡ªç„¶ç¾å®³ã€ä¾›åº”å•†æ•…éšœ
```

### 5.2 æ¢å¤ç­‰çº§å®šä¹‰


**ğŸ¯ æŒ‰ä¸šåŠ¡å½±å“åˆ†çº§**

| çº§åˆ« | **æ¢å¤æ—¶é—´** | **æ•°æ®ä¸¢å¤±** | **ä¸šåŠ¡å½±å“** | **åº”å¯¹æªæ–½** |
|------|------------|-------------|-------------|-------------|
| **L1-è‡´å‘½** | `< 1å°æ—¶` | `< 15åˆ†é’Ÿ` | `ä¸šåŠ¡å®Œå…¨åœæ­¢` | `ç«‹å³å¯åŠ¨åº”æ€¥å“åº”` |
| **L2-ä¸¥é‡** | `< 4å°æ—¶` | `< 1å°æ—¶` | `ä¸»è¦åŠŸèƒ½å—å½±å“` | `2å°æ—¶å†…å¯åŠ¨æ¢å¤` |
| **L3-ä¸€èˆ¬** | `< 24å°æ—¶` | `< 1å¤©` | `éƒ¨åˆ†åŠŸèƒ½å—å½±å“` | `å·¥ä½œæ—¶é—´å†…å¤„ç†` |
| **L4-è½»å¾®** | `< 72å°æ—¶` | `< 3å¤©` | `å½±å“è¾ƒå°` | `è®¡åˆ’ç»´æŠ¤æ—¶å¤„ç†` |

### 5.3 æ¢å¤é¢„æ¡ˆæ¨¡æ¿


**ğŸ”§ æ ‡å‡†æ¢å¤æµç¨‹**
```bash
#!/bin/bash
# disaster-recovery.sh - ç¾éš¾æ¢å¤è„šæœ¬

# 1. çŠ¶æ€æ£€æŸ¥
check_system_status() {
    echo "=== ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ ==="
    docker ps -a
    docker volume ls
    df -h
}

# 2. åœæ­¢å—å½±å“æœåŠ¡
stop_services() {
    echo "=== åœæ­¢æœåŠ¡ ==="
    docker-compose down
}

# 3. æ•°æ®æ¢å¤
restore_data() {
    echo "=== æ¢å¤æ•°æ® ==="
    local backup_file=$1
    
    # æ¢å¤æ•°æ®å·
    docker run --rm \
        -v mysql_data:/data \
        -v $(pwd):/backup \
        busybox tar xzf /backup/$backup_file -C /data
}

# 4. å¯åŠ¨æœåŠ¡
start_services() {
    echo "=== å¯åŠ¨æœåŠ¡ ==="
    docker-compose up -d
}

# 5. éªŒè¯æœåŠ¡
verify_services() {
    echo "=== éªŒè¯æœåŠ¡ ==="
    sleep 30
    curl -f http://localhost:8080/health || echo "âŒ æœåŠ¡å¼‚å¸¸"
}

# ä¸»æ¢å¤æµç¨‹
main() {
    check_system_status
    stop_services
    restore_data "mysql_backup_20250117.tar.gz"
    start_services
    verify_services
    echo "âœ… æ¢å¤å®Œæˆ"
}

main "$@"
```

---

## 6. ğŸ” æ•°æ®æ¢å¤æµç¨‹æµ‹è¯•


### 6.1 ä¸ºä»€ä¹ˆè¦æµ‹è¯•æ¢å¤æµç¨‹


**æµ‹è¯•æ¢å¤çš„é‡è¦æ€§**ï¼šå°±åƒç«ç¾æ¼”ä¹ ä¸€æ ·ï¼Œå¹³æ—¶ä¸ç»ƒä¹ ï¼ŒçœŸæ­£å‘ç”Ÿé—®é¢˜æ—¶å°±ä¼šæ‰‹å¿™è„šä¹±ã€‚

**ğŸ’¡ æµ‹è¯•çš„ä»·å€¼**
```
å‘ç°é—®é¢˜ï¼š
â€¢ å¤‡ä»½æ–‡ä»¶æ˜¯å¦å®Œæ•´å¯ç”¨
â€¢ æ¢å¤è„šæœ¬æ˜¯å¦æ­£ç¡®æ‰§è¡Œ
â€¢ æ¢å¤æ—¶é—´æ˜¯å¦ç¬¦åˆé¢„æœŸ

éªŒè¯æ•ˆæœï¼š
â€¢ æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
â€¢ åº”ç”¨åŠŸèƒ½éªŒè¯
â€¢ æ€§èƒ½æŒ‡æ ‡ç¡®è®¤

æå‡èƒ½åŠ›ï¼š
â€¢ ç†Ÿæ‚‰æ¢å¤æµç¨‹
â€¢ ä¼˜åŒ–æ¢å¤é€Ÿåº¦
â€¢ åŸ¹è®­è¿ç»´äººå‘˜
```

### 6.2 æµ‹è¯•ç¯å¢ƒæ­å»º


**ğŸ”§ æ­å»ºæµ‹è¯•ç¯å¢ƒ**
```bash
# åˆ›å»ºæµ‹è¯•ç¯å¢ƒç›®å½•
mkdir -p /test/disaster-recovery
cd /test/disaster-recovery

# å¤åˆ¶ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆè„±æ•å¤„ç†ï¼‰
cp /opt/containers/docker-compose.yml ./
cp /opt/containers/.env.example ./.env

# ä½¿ç”¨æµ‹è¯•æ•°æ®åº“
sed -i 's/production_db/test_db/g' docker-compose.yml
```

### 6.3 æ¢å¤æµ‹è¯•æµç¨‹


**ğŸ“‹ æ ‡å‡†æµ‹è¯•æµç¨‹**
```
å‡†å¤‡é˜¶æ®µï¼š
1. âœ“ å‡†å¤‡æµ‹è¯•ç¯å¢ƒ
2. âœ“ å‡†å¤‡å¤‡ä»½æ–‡ä»¶
3. âœ“ å‡†å¤‡æµ‹è¯•æ•°æ®

æ‰§è¡Œé˜¶æ®µï¼š
4. âœ“ æ¨¡æ‹Ÿæ•…éšœåœºæ™¯
5. âœ“ æ‰§è¡Œæ¢å¤è„šæœ¬
6. âœ“ è®°å½•æ¢å¤æ—¶é—´

éªŒè¯é˜¶æ®µï¼š
7. âœ“ æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
8. âœ“ åŠŸèƒ½æµ‹è¯•éªŒè¯
9. âœ“ æ€§èƒ½æŒ‡æ ‡ç¡®è®¤

æ€»ç»“é˜¶æ®µï¼š
10. âœ“ è®°å½•æµ‹è¯•ç»“æœ
11. âœ“ åˆ†ææ”¹è¿›å»ºè®®
12. âœ“ æ›´æ–°æ¢å¤é¢„æ¡ˆ
```

**ğŸ”§ è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬**
```bash
#!/bin/bash
# test-recovery.sh - æ¢å¤æµ‹è¯•è„šæœ¬

TEST_DIR="/test/disaster-recovery"
BACKUP_FILE="test_backup_$(date +%Y%m%d).tar.gz"

# åˆ›å»ºæµ‹è¯•æ•°æ®
create_test_data() {
    echo "åˆ›å»ºæµ‹è¯•æ•°æ®..."
    docker exec mysql-test mysql -u root -ptest \
      -e "INSERT INTO users (name) VALUES ('test_user_$(date +%s)');"
}

# åˆ›å»ºå¤‡ä»½
create_backup() {
    echo "åˆ›å»ºæµ‹è¯•å¤‡ä»½..."
    docker run --rm \
        -v mysql_test:/data \
        -v $TEST_DIR:/backup \
        busybox tar czf /backup/$BACKUP_FILE -C /data .
}

# æ¨¡æ‹Ÿæ•°æ®ä¸¢å¤±
simulate_disaster() {
    echo "æ¨¡æ‹Ÿæ•°æ®ä¸¢å¤±..."
    docker volume rm mysql_test
    docker volume create mysql_test
}

# æ‰§è¡Œæ¢å¤
perform_recovery() {
    echo "æ‰§è¡Œæ•°æ®æ¢å¤..."
    start_time=$(date +%s)
    
    docker run --rm \
        -v mysql_test:/data \
        -v $TEST_DIR:/backup \
        busybox tar xzf /backup/$BACKUP_FILE -C /data
    
    end_time=$(date +%s)
    recovery_time=$((end_time - start_time))
    echo "æ¢å¤è€—æ—¶: ${recovery_time}ç§’"
}

# éªŒè¯æ¢å¤ç»“æœ
verify_recovery() {
    echo "éªŒè¯æ¢å¤ç»“æœ..."
    docker-compose up -d mysql
    sleep 10
    
    # æ£€æŸ¥æ•°æ®æ˜¯å¦æ¢å¤
    result=$(docker exec mysql-test mysql -u root -ptest \
      -e "SELECT COUNT(*) FROM users;" 2>/dev/null)
    
    if [ $? -eq 0 ]; then
        echo "âœ… æ•°æ®æ¢å¤æˆåŠŸ"
    else
        echo "âŒ æ•°æ®æ¢å¤å¤±è´¥"
    fi
}

# æ‰§è¡Œå®Œæ•´æµ‹è¯•æµç¨‹
main() {
    cd $TEST_DIR
    create_test_data
    create_backup
    simulate_disaster
    perform_recovery
    verify_recovery
}

main
```

---

## 7. ğŸš€ è·¨ç¯å¢ƒè¿ç§»


### 7.1 ä»€ä¹ˆæ˜¯è·¨ç¯å¢ƒè¿ç§»


**è·¨ç¯å¢ƒè¿ç§»**å°±æ˜¯æŠŠåº”ç”¨ä»ä¸€ä¸ªç¯å¢ƒæ¬åˆ°å¦ä¸€ä¸ªç¯å¢ƒï¼Œæ¯”å¦‚ä»æµ‹è¯•ç¯å¢ƒæ¬åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œæˆ–è€…ä»æ—§æœåŠ¡å™¨æ¬åˆ°æ–°æœåŠ¡å™¨ã€‚

**ğŸ”¸ å¸¸è§è¿ç§»åœºæ™¯**
```
å¼€å‘â†’æµ‹è¯•â†’ç”Ÿäº§ï¼š
â€¢ ä»£ç åŠŸèƒ½éªŒè¯é€šè¿‡åçš„æ­£å¸¸å‘å¸ƒæµç¨‹
â€¢ éœ€è¦ç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§

æœåŠ¡å™¨å‡çº§è¿ç§»ï¼š
â€¢ ç¡¬ä»¶è®¾å¤‡æ›´æ–°æ¢ä»£
â€¢ æ“ä½œç³»ç»Ÿç‰ˆæœ¬å‡çº§  
â€¢ æ•°æ®ä¸­å¿ƒæ¬è¿

äº‘ç¯å¢ƒè¿ç§»ï¼š
â€¢ ä»ç‰©ç†æœåŠ¡å™¨è¿ç§»åˆ°äº‘ç«¯
â€¢ ä¸åŒäº‘æœåŠ¡å•†ä¹‹é—´è¿ç§»
â€¢ æ··åˆäº‘æ¶æ„è°ƒæ•´
```

### 7.2 è¿ç§»å‰çš„å‡†å¤‡å·¥ä½œ


**ğŸ“‹ è¿ç§»æ£€æŸ¥æ¸…å•**
- [x] **ç¯å¢ƒå…¼å®¹æ€§æ£€æŸ¥**ï¼šç¡®è®¤ç›®æ ‡ç¯å¢ƒæ”¯æŒå½“å‰åº”ç”¨
- [x] **ä¾èµ–å…³ç³»æ¢³ç†**ï¼šåˆ—å‡ºæ‰€æœ‰å¤–éƒ¨ä¾èµ–å’ŒæœåŠ¡
- [x] **æ•°æ®å¤‡ä»½éªŒè¯**ï¼šç¡®ä¿å¤‡ä»½æ–‡ä»¶å®Œæ•´å¯ç”¨
- [x] **ç½‘ç»œé…ç½®è§„åˆ’**ï¼šç¡®å®šæ–°ç¯å¢ƒçš„ç½‘ç»œè®¾ç½®
- [x] **èµ„æºå®¹é‡è¯„ä¼°**ï¼šç¡®è®¤ç›®æ ‡ç¯å¢ƒèµ„æºå……è¶³
- [x] **å›æ»šæ–¹æ¡ˆå‡†å¤‡**ï¼šåˆ¶å®šè¿ç§»å¤±è´¥çš„å›æ»šè®¡åˆ’

**ğŸ”§ ç¯å¢ƒä¿¡æ¯æ”¶é›†**
```bash
#!/bin/bash
# collect-env-info.sh - ç¯å¢ƒä¿¡æ¯æ”¶é›†è„šæœ¬

echo "=== ç³»ç»Ÿä¿¡æ¯ ==="
uname -a
cat /etc/os-release

echo "=== Docker ä¿¡æ¯ ==="
docker version
docker info

echo "=== å®¹å™¨åˆ—è¡¨ ==="
docker ps -a

echo "=== é•œåƒåˆ—è¡¨ ==="
docker images

echo "=== æ•°æ®å·åˆ—è¡¨ ==="
docker volume ls

echo "=== ç½‘ç»œé…ç½® ==="
docker network ls

echo "=== èµ„æºä½¿ç”¨æƒ…å†µ ==="
df -h
free -h
```

### 7.3 è¿ç§»æ‰§è¡Œæ­¥éª¤


**ğŸ¯ æ ‡å‡†è¿ç§»æµç¨‹**

```
ç¬¬1æ­¥ï¼šæºç¯å¢ƒå¤‡ä»½
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ åœæ­¢æœåŠ¡ï¼Œåˆ›å»ºæ•°æ®å¤‡ä»½         â”‚
â”‚ â€¢ å¯¼å‡ºå®¹å™¨é•œåƒå’Œé…ç½®æ–‡ä»¶         â”‚
â”‚ â€¢ éªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
ç¬¬2æ­¥ï¼šç›®æ ‡ç¯å¢ƒå‡†å¤‡  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ å®‰è£…Dockerç¯å¢ƒå’Œä¾èµ–          â”‚
â”‚ â€¢ é…ç½®ç½‘ç»œå’Œå­˜å‚¨                â”‚
â”‚ â€¢ ä¼ è¾“å¤‡ä»½æ–‡ä»¶åˆ°ç›®æ ‡ç¯å¢ƒ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
ç¬¬3æ­¥ï¼šåº”ç”¨æ¢å¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ å¯¼å…¥é•œåƒå’Œé…ç½®æ–‡ä»¶             â”‚
â”‚ â€¢ æ¢å¤æ•°æ®å·å’Œæ•°æ®åº“             â”‚
â”‚ â€¢ å¯åŠ¨å®¹å™¨æœåŠ¡                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
ç¬¬4æ­¥ï¼šéªŒè¯æµ‹è¯•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ åŠŸèƒ½æµ‹è¯•éªŒè¯                  â”‚
â”‚ â€¢ æ€§èƒ½æŒ‡æ ‡æ£€æŸ¥                  â”‚
â”‚ â€¢ æ•°æ®ä¸€è‡´æ€§ç¡®è®¤                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”§ è¿ç§»è„šæœ¬ç¤ºä¾‹**
```bash
#!/bin/bash
# migrate-containers.sh - å®¹å™¨è¿ç§»è„šæœ¬

SOURCE_HOST="192.168.1.100"
TARGET_HOST="192.168.1.200"
SSH_USER="admin"

# åœ¨æºç¯å¢ƒåˆ›å»ºå¤‡ä»½
create_backup() {
    echo "åœ¨æºç¯å¢ƒåˆ›å»ºå¤‡ä»½..."
    ssh $SSH_USER@$SOURCE_HOST << 'EOF'
        cd /opt/containers
        docker-compose down
        tar czf backup_$(date +%Y%m%d).tar.gz docker-compose.yml .env config/
        docker save -o images_backup.tar $(docker images -q)
EOF
}

# ä¼ è¾“å¤‡ä»½æ–‡ä»¶
transfer_backup() {
    echo "ä¼ è¾“å¤‡ä»½æ–‡ä»¶..."
    scp $SSH_USER@$SOURCE_HOST:/opt/containers/backup_*.tar.gz ./
    scp $SSH_USER@$SOURCE_HOST:/opt/containers/images_backup.tar ./
}

# åœ¨ç›®æ ‡ç¯å¢ƒæ¢å¤
restore_backup() {
    echo "åœ¨ç›®æ ‡ç¯å¢ƒæ¢å¤..."
    scp backup_*.tar.gz $SSH_USER@$TARGET_HOST:/opt/containers/
    scp images_backup.tar $SSH_USER@$TARGET_HOST:/opt/containers/
    
    ssh $SSH_USER@$TARGET_HOST << 'EOF'
        cd /opt/containers
        tar xzf backup_*.tar.gz
        docker load -i images_backup.tar
        docker-compose up -d
EOF
}

# éªŒè¯è¿ç§»ç»“æœ
verify_migration() {
    echo "éªŒè¯è¿ç§»ç»“æœ..."
    ssh $SSH_USER@$TARGET_HOST << 'EOF'
        docker ps
        curl -f http://localhost:8080/health
EOF
}

# æ‰§è¡Œè¿ç§»æµç¨‹
main() {
    create_backup
    transfer_backup  
    restore_backup
    verify_migration
    echo "âœ… è¿ç§»å®Œæˆ"
}

main
```

---

## 8. ğŸ›¡ï¸ ä¸šåŠ¡è¿ç»­æ€§ä¿éšœ


### 8.1 ä»€ä¹ˆæ˜¯ä¸šåŠ¡è¿ç»­æ€§


**ä¸šåŠ¡è¿ç»­æ€§**å°±æ˜¯ç¡®ä¿ä¸šåŠ¡æœåŠ¡ä¸ä¸­æ–­ï¼Œå³ä½¿å‡ºç°æ•…éšœä¹Ÿèƒ½å¿«é€Ÿæ¢å¤ï¼Œæœ€å¤§é™åº¦å‡å°‘å¯¹ç”¨æˆ·çš„å½±å“ã€‚

**ğŸ”¸ è¿ç»­æ€§ä¿éšœçš„å±‚æ¬¡**
```
æ•°æ®å±‚é¢ï¼š
â€¢ æ•°æ®ä¸ä¸¢å¤±æˆ–ä¸¢å¤±æœ€å°
â€¢ æ•°æ®ä¸€è‡´æ€§ä¿è¯
â€¢ æ•°æ®å®Œæ•´æ€§éªŒè¯

æœåŠ¡å±‚é¢ï¼š
â€¢ æœåŠ¡å¿«é€Ÿæ¢å¤
â€¢ åŠŸèƒ½æ­£å¸¸å¯ç”¨
â€¢ æ€§èƒ½ç¬¦åˆè¦æ±‚

ä¸šåŠ¡å±‚é¢ï¼š
â€¢ ç”¨æˆ·ä½“éªŒä¸å—å½±å“
â€¢ ä¸šåŠ¡æµç¨‹æ­£å¸¸è¿›è¡Œ
â€¢ æ”¶å…¥æŸå¤±æœ€å°åŒ–
```

### 8.2 é«˜å¯ç”¨æ¶æ„è®¾è®¡


**ğŸ—ï¸ å®¹å™¨é«˜å¯ç”¨æ¶æ„**
```
è´Ÿè½½å‡è¡¡å±‚ï¼š
    Nginx/HAProxy
         |
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â†“         â†“
åº”ç”¨æœåŠ¡å±‚ï¼š
 App1      App2      App3
(ä¸»èŠ‚ç‚¹)  (å¤‡èŠ‚ç‚¹)  (å¤‡èŠ‚ç‚¹)
    |         |         |
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
æ•°æ®å­˜å‚¨å±‚ï¼š
    MySQLä¸»ä»å¤åˆ¶
  Master â†â†’ Slave1 â†â†’ Slave2
```

**ğŸ”§ Docker Swarm é›†ç¾¤éƒ¨ç½²**
```bash
# åˆå§‹åŒ–Swarmé›†ç¾¤ï¼ˆåœ¨ç®¡ç†èŠ‚ç‚¹æ‰§è¡Œï¼‰
docker swarm init --advertise-addr 192.168.1.100

# æ·»åŠ å·¥ä½œèŠ‚ç‚¹
docker swarm join --token <token> 192.168.1.100:2377

# åˆ›å»ºé«˜å¯ç”¨æœåŠ¡
docker service create \
  --name web-app \
  --replicas 3 \
  --publish 8080:80 \
  --constraint 'node.role==worker' \
  nginx:latest

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker service ls
docker service ps web-app
```

### 8.3 è‡ªåŠ¨æ•…éšœè½¬ç§»


**æ•…éšœæ£€æµ‹ä¸è‡ªåŠ¨åˆ‡æ¢**ï¼šå½“ä¸»æœåŠ¡å‡ºç°é—®é¢˜æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ä»½æœåŠ¡ã€‚

**ğŸ”§ å¥åº·æ£€æŸ¥é…ç½®**
```yaml
# docker-compose.yml
version: '3.8'
services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    deploy:
      replicas: 3
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
```

**ğŸ“Š ç›‘æ§å‘Šè­¦ç³»ç»Ÿ**
```bash
#!/bin/bash
# monitor-containers.sh - å®¹å™¨ç›‘æ§è„šæœ¬

# æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶æ€
check_container_health() {
    local container_name=$1
    local status=$(docker inspect --format='{{.State.Health.Status}}' $container_name)
    
    if [ "$status" != "healthy" ]; then
        echo "âš ï¸ å®¹å™¨å¼‚å¸¸: $container_name - $status"
        send_alert "å®¹å™¨ $container_name çŠ¶æ€å¼‚å¸¸"
        
        # å°è¯•é‡å¯å®¹å™¨
        docker restart $container_name
    fi
}

# å‘é€å‘Šè­¦é€šçŸ¥
send_alert() {
    local message=$1
    echo "$message" | mail -s "å®¹å™¨å‘Šè­¦" admin@company.com
}

# æ£€æŸ¥æ‰€æœ‰å…³é”®å®¹å™¨
CONTAINERS=("web-app" "mysql-db" "redis-cache")

for container in "${CONTAINERS[@]}"; do
    check_container_health $container
done
```

### 8.4 æ•°æ®ä¸€è‡´æ€§ä¿éšœ


**æ•°æ®åº“ä¸»ä»åŒæ­¥**
```bash
# MySQLä¸»ä»é…ç½®
# ä¸»æ•°æ®åº“é…ç½®
docker run -d \
  --name mysql-master \
  -e MYSQL_ROOT_PASSWORD=password \
  -e MYSQL_REPLICATION_USER=repl \
  -e MYSQL_REPLICATION_PASSWORD=replpass \
  -p 3306:3306 \
  mysql:5.7 \
  --server-id=1 \
  --log-bin=mysql-bin \
  --binlog-format=ROW

# ä»æ•°æ®åº“é…ç½®  
docker run -d \
  --name mysql-slave \
  -e MYSQL_ROOT_PASSWORD=password \
  -p 3307:3306 \
  mysql:5.7 \
  --server-id=2 \
  --relay-log=mysql-relay-bin
```

**ğŸ”¸ æ•°æ®åŒæ­¥éªŒè¯**
```bash
#!/bin/bash
# verify-data-sync.sh - æ•°æ®åŒæ­¥éªŒè¯è„šæœ¬

MASTER_HOST="192.168.1.100"
SLAVE_HOST="192.168.1.101"

# è·å–ä¸»åº“çŠ¶æ€
master_status=$(mysql -h$MASTER_HOST -u root -ppassword \
  -e "SHOW MASTER STATUS\G" | grep Position | awk '{print $2}')

# è·å–ä»åº“çŠ¶æ€  
slave_status=$(mysql -h$SLAVE_HOST -u root -ppassword \
  -e "SHOW SLAVE STATUS\G" | grep Exec_Master_Log_Pos | awk '{print $2}')

# æ¯”è¾ƒåŒæ­¥ä½ç½®
if [ "$master_status" -eq "$slave_status" ]; then
    echo "âœ… ä¸»ä»åŒæ­¥æ­£å¸¸"
else
    echo "âš ï¸ ä¸»ä»åŒæ­¥å»¶è¿Ÿ: Master($master_status) Slave($slave_status)"
fi
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å¤‡ä»½ç­–ç•¥ï¼šæ•°æ®åˆ†ç±»å¤‡ä»½ï¼Œå…³é”®æ•°æ®å¤šé‡ä¿æŠ¤
ğŸ”¸ é•œåƒç®¡ç†ï¼šç‰ˆæœ¬æ§åˆ¶ï¼Œå®šæœŸå¤‡ä»½ï¼Œç§æœ‰ä»“åº“å­˜å‚¨
ğŸ”¸ é…ç½®ç®¡ç†ï¼šç»Ÿä¸€å­˜å‚¨ï¼Œç‰ˆæœ¬è·Ÿè¸ªï¼Œè‡ªåŠ¨åŒ–å¤‡ä»½
ğŸ”¸ ç¾éš¾æ¢å¤ï¼šé¢„æ¡ˆåˆ¶å®šï¼Œå®šæœŸæµ‹è¯•ï¼Œå¿«é€Ÿå“åº”
ğŸ”¸ ç¯å¢ƒè¿ç§»ï¼šå®Œæ•´è§„åˆ’ï¼Œé€æ­¥æ‰§è¡Œï¼Œå……åˆ†éªŒè¯
ğŸ”¸ è¿ç»­æ€§ä¿éšœï¼šé«˜å¯ç”¨æ¶æ„ï¼Œè‡ªåŠ¨åˆ‡æ¢ï¼ŒæŒç»­ç›‘æ§
```

### 9.2 å…³é”®æ“ä½œæŠ€èƒ½


**ğŸ”¹ æ—¥å¸¸å¤‡ä»½æ“ä½œ**
```bash
# æ•°æ®å·å¤‡ä»½
docker run --rm -v data:/data -v $(pwd):/backup \
  busybox tar czf /backup/data_backup.tar.gz -C /data .

# é•œåƒå¤‡ä»½
docker save -o app_backup.tar myapp:latest

# é…ç½®å¤‡ä»½
tar czf config_backup.tar.gz docker-compose.yml .env config/
```

**ğŸ”¹ ç´§æ€¥æ¢å¤æ“ä½œ**
```bash
# å¿«é€Ÿæ¢å¤æ•°æ®
docker run --rm -v data:/data -v $(pwd):/backup \
  busybox tar xzf /backup/data_backup.tar.gz -C /data

# å¿«é€Ÿæ¢å¤é•œåƒ
docker load -i app_backup.tar

# å¿«é€Ÿå¯åŠ¨æœåŠ¡
docker-compose up -d
```

### 9.3 æœ€ä½³å®è·µå»ºè®®


**ğŸ¯ å¤‡ä»½ç­–ç•¥åˆ¶å®š**
- âœ… **3-2-1åŸåˆ™**ï¼š3ä»½å‰¯æœ¬ï¼Œ2ç§å­˜å‚¨ä»‹è´¨ï¼Œ1ä»½å¼‚åœ°å¤‡ä»½
- âœ… **è‡ªåŠ¨åŒ–å¤‡ä»½**ï¼šå‡å°‘äººå·¥æ“ä½œï¼Œé¿å…é—æ¼
- âœ… **å®šæœŸéªŒè¯**ï¼šå¤‡ä»½æ–‡ä»¶è¦å®šæœŸæµ‹è¯•æ¢å¤
- âœ… **åˆ†ç±»ç®¡ç†**ï¼šæŒ‰é‡è¦æ€§åˆ†ç±»ï¼Œå·®å¼‚åŒ–å¤‡ä»½ç­–ç•¥

**ğŸ”§ è¿ç»´ç®¡ç†è§„èŒƒ**
- ğŸ“ **æ–‡æ¡£å®Œæ•´**ï¼šå¤‡ä»½æ¢å¤æµç¨‹è¦æœ‰è¯¦ç»†æ–‡æ¡£
- ğŸ” **å®šæœŸæ¼”ç»ƒ**ï¼šæ¯å­£åº¦è¿›è¡Œä¸€æ¬¡æ¢å¤æ¼”ç»ƒ
- ğŸ“Š **ç›‘æ§å‘Šè­¦**ï¼šåŠæ—¶å‘ç°å’Œå¤„ç†å¼‚å¸¸æƒ…å†µ
- ğŸš€ **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®å®é™…æƒ…å†µä¼˜åŒ–å¤‡ä»½ç­–ç•¥

**ğŸ’¡ å¸¸è§é—®é¢˜é¿å…**
- âŒ **åªå¤‡ä»½ä¸æµ‹è¯•**ï¼šå¤‡ä»½æ–‡ä»¶æŸåæ—¶æ‰å‘ç°é—®é¢˜
- âŒ **é…ç½®æ–‡ä»¶å¿½ç•¥**ï¼šåªå¤‡ä»½æ•°æ®ï¼Œå¿½ç•¥é…ç½®æ–‡ä»¶
- âŒ **å•ç‚¹å¤‡ä»½**ï¼šæ‰€æœ‰å¤‡ä»½å­˜å‚¨åœ¨åŒä¸€ä½ç½®
- âŒ **æ¢å¤æµç¨‹ä¸ç†Ÿæ‚‰**ï¼šç´§æ€¥æ—¶åˆ»æ‰‹å¿™è„šä¹±

### 9.4 å®é™…åº”ç”¨æŒ‡å—


**ğŸ“‹ æ—¥å¸¸å·¥ä½œæµç¨‹**
```
æ¯æ—¥ä»»åŠ¡ï¼š
â€¢ è‡ªåŠ¨åŒ–å¤‡ä»½æ‰§è¡Œæ£€æŸ¥
â€¢ å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§éªŒè¯  
â€¢ ç³»ç»Ÿå¥åº·çŠ¶æ€æ£€æŸ¥

æ¯å‘¨ä»»åŠ¡ï¼š
â€¢ å¤‡ä»½æ¢å¤æµ‹è¯•æ¼”ç»ƒ
â€¢ æ¸…ç†è¿‡æœŸå¤‡ä»½æ–‡ä»¶
â€¢ æ›´æ–°æ¢å¤æ–‡æ¡£

æ¯æœˆä»»åŠ¡ï¼š
â€¢ ç¾éš¾æ¢å¤é¢„æ¡ˆè¯„å®¡
â€¢ å¤‡ä»½ç­–ç•¥æ•ˆæœåˆ†æ
â€¢ å®¹é‡è§„åˆ’å’Œè°ƒæ•´
```

**ğŸ¯ åº”æ€¥å“åº”æµç¨‹**
1. **å¿«é€Ÿè¯„ä¼°**ï¼šç¡®å®šæ•…éšœçº§åˆ«å’Œå½±å“èŒƒå›´
2. **ç«‹å³å“åº”**ï¼šæŒ‰é¢„æ¡ˆå¯åŠ¨æ¢å¤æµç¨‹
3. **çŠ¶æ€é€šæŠ¥**ï¼šåŠæ—¶å‘ç›¸å…³äººå‘˜æ±‡æŠ¥è¿›å±•
4. **æ¢å¤éªŒè¯**ï¼šç¡®ä¿æœåŠ¡å®Œå…¨æ¢å¤æ­£å¸¸
5. **äº‹åæ€»ç»“**ï¼šåˆ†æåŸå› ï¼Œæ”¹è¿›é¢„æ¡ˆ

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- å¤‡ä»½ç­–ç•¥è¦å…¨é¢ï¼Œæ•°æ®é•œåƒé…ç½®å…¨
- å®šæœŸæµ‹è¯•éªŒæ•ˆæœï¼Œç¾éš¾æ¥ä¸´ä¸æ…Œä¹±  
- é«˜å¯ç”¨æ¶æ„ä¿è¿ç»­ï¼Œç›‘æ§å‘Šè­¦å¿«å“åº”
- æ–‡æ¡£æµç¨‹è¦å®Œå–„ï¼ŒæŒç»­æ”¹è¿›æ±‚å‘å±•