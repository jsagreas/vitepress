---
title: 2ã€IPv6ç½‘ç»œæ¥å£é…ç½®
---
## ğŸ“š ç›®å½•

1. [IPv6æ¥å£é…ç½®åŸºç¡€æ¦‚å¿µ](#1-IPv6æ¥å£é…ç½®åŸºç¡€æ¦‚å¿µ)
2. [ipå‘½ä»¤IPv6æ¥å£é…ç½®](#2-ipå‘½ä»¤IPv6æ¥å£é…ç½®)
3. [ifconfig IPv6åœ°å€è®¾ç½®](#3-ifconfig-IPv6åœ°å€è®¾ç½®)
4. [ä¸´æ—¶åœ°å€ä¸éšç§æ‰©å±•](#4-ä¸´æ—¶åœ°å€ä¸éšç§æ‰©å±•)
5. [IPv6åœ°å€ç”Ÿå‘½å‘¨æœŸç®¡ç†](#5-IPv6åœ°å€ç”Ÿå‘½å‘¨æœŸç®¡ç†)
6. [æ‰‹åŠ¨åœ°å€é…ç½®æ–¹æ³•](#6-æ‰‹åŠ¨åœ°å€é…ç½®æ–¹æ³•)
7. [æ¥å£æ ‡è¯†ç¬¦é…ç½®](#7-æ¥å£æ ‡è¯†ç¬¦é…ç½®)
8. [IPv6åœ°å€ä¼˜å…ˆçº§è®¾ç½®](#8-IPv6åœ°å€ä¼˜å…ˆçº§è®¾ç½®)
9. [ç½‘ç»œæ¥å£IPv6çŠ¶æ€æŸ¥çœ‹](#9-ç½‘ç»œæ¥å£IPv6çŠ¶æ€æŸ¥çœ‹)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---


## 1. ğŸŒ IPv6æ¥å£é…ç½®åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯IPv6æ¥å£é…ç½®


**ğŸ”¸ æ ¸å¿ƒå®šä¹‰**
```
IPv6æ¥å£é…ç½®ï¼šä¸ºç½‘ç»œæ¥å£åˆ†é…å’Œç®¡ç†IPv6åœ°å€çš„è¿‡ç¨‹
ç›®çš„ï¼šè®©è®¾å¤‡èƒ½å¤Ÿåœ¨IPv6ç½‘ç»œä¸­é€šä¿¡
æœ¬è´¨ï¼šå°†128ä½IPv6åœ°å€ç»‘å®šåˆ°ç½‘ç»œæ¥å£ä¸Š
```

**ğŸ’¡ é€šä¿—ç†è§£**
æƒ³è±¡IPv6åœ°å€å°±åƒä½ çš„è¯¦ç»†é‚®å¯„åœ°å€ï¼š
- **IPv4åœ°å€**ï¼šåƒé—¨ç‰Œå·"123å·"ï¼Œç®€å•ä½†ä¸å¤Ÿç”¨
- **IPv6åœ°å€**ï¼šåƒå®Œæ•´åœ°å€"XXçœXXå¸‚XXåŒºXXè¡—é“123å·"ï¼Œæ›´è¯¦ç»†æ›´ä¸°å¯Œ
- **æ¥å£é…ç½®**ï¼šå°±æ˜¯å‘Šè¯‰é‚®é€’å‘˜è¿™ä¸ªåœ°å€å¯¹åº”å“ªä¸ªä¿¡ç®±

### 1.2 IPv6åœ°å€ç±»å‹å¯¹æ¯”


| **åœ°å€ç±»å‹** | **ä½œç”¨èŒƒå›´** | **é…ç½®æ–¹å¼** | **ä½¿ç”¨åœºæ™¯** |
|-------------|-------------|-------------|-------------|
| **é“¾è·¯æœ¬åœ°åœ°å€** | å•ä¸ªç½‘ç»œæ®µ | è‡ªåŠ¨ç”Ÿæˆ | é‚»å±…å‘ç°ã€æœ¬åœ°é€šä¿¡ |
| **å…¨çƒå•æ’­åœ°å€** | å…¨çƒèŒƒå›´ | æ‰‹åŠ¨/è‡ªåŠ¨ | äº’è”ç½‘é€šä¿¡ |
| **å”¯ä¸€æœ¬åœ°åœ°å€** | ç»„ç»‡å†…éƒ¨ | æ‰‹åŠ¨é…ç½® | ç§æœ‰ç½‘ç»œé€šä¿¡ |
| **ä¸´æ—¶åœ°å€** | å…¨çƒèŒƒå›´ | éšç§æ‰©å±• | å®¢æˆ·ç«¯éšç§ä¿æŠ¤ |

### 1.3 IPv6é…ç½®ä¸IPv4çš„åŒºåˆ«


**ğŸ”„ ä¸»è¦å·®å¼‚å¯¹æ¯”**
```
åœ°å€é•¿åº¦ï¼š
IPv4: 32ä½ (192.168.1.100)
IPv6: 128ä½ (2001:db8::1)

åœ°å€è·å–ï¼š
IPv4: ä¸»è¦ä¾èµ–DHCP
IPv6: æ”¯æŒæ— çŠ¶æ€è‡ªåŠ¨é…ç½®(SLAAC)

åœ°å€æ•°é‡ï¼š
IPv4: æ¯æ¥å£é€šå¸¸ä¸€ä¸ªåœ°å€
IPv6: æ¯æ¥å£å¯ä»¥æœ‰å¤šä¸ªåœ°å€

éšç§ä¿æŠ¤ï¼š
IPv4: åœ°å€ç›¸å¯¹å›ºå®š
IPv6: æ”¯æŒä¸´æ—¶åœ°å€ä¿æŠ¤éšç§
```

---

## 2. âš¡ ipå‘½ä»¤IPv6æ¥å£é…ç½®


### 2.1 ipå‘½ä»¤åŸºç¡€è¯­æ³•


**ğŸ”§ IPv6é…ç½®æ ¸å¿ƒå‘½ä»¤**
```bash
# åŸºæœ¬è¯­æ³•ç»“æ„
ip -6 addr add IPv6åœ°å€/å‰ç¼€é•¿åº¦ dev æ¥å£åç§°

# æŸ¥çœ‹IPv6åœ°å€
ip -6 addr show

# åˆ é™¤IPv6åœ°å€  
ip -6 addr del IPv6åœ°å€/å‰ç¼€é•¿åº¦ dev æ¥å£åç§°
```

### 2.2 æ·»åŠ IPv6åœ°å€å®ä¾‹


**ğŸ“ å¸¸ç”¨é…ç½®ç¤ºä¾‹**

**å…¨çƒå•æ’­åœ°å€é…ç½®ï¼š**
```bash
# æ·»åŠ å…¨çƒå•æ’­åœ°å€
ip -6 addr add 2001:db8:1::100/64 dev eth0

# éªŒè¯é…ç½®ç»“æœ
ip -6 addr show dev eth0
```

**é“¾è·¯æœ¬åœ°åœ°å€é…ç½®ï¼š**
```bash
# æ‰‹åŠ¨æ·»åŠ é“¾è·¯æœ¬åœ°åœ°å€
ip -6 addr add fe80::1/64 dev eth0

# æŸ¥çœ‹é“¾è·¯æœ¬åœ°åœ°å€
ip -6 addr show dev eth0 scope link
```

**å”¯ä¸€æœ¬åœ°åœ°å€é…ç½®ï¼š**
```bash
# é…ç½®ULAåœ°å€
ip -6 addr add fc00:1234:5678::1/64 dev eth0

# æ£€æŸ¥é…ç½®çŠ¶æ€
ip -6 addr show dev eth0 | grep fc00
```

### 2.3 ipå‘½ä»¤é«˜çº§é€‰é¡¹


**âš™ï¸ åœ°å€å±æ€§æ§åˆ¶**

**ä¸´æ—¶åœ°å€æ ‡è®°ï¼š**
```bash
# æ·»åŠ ä¸´æ—¶åœ°å€
ip -6 addr add 2001:db8:1::200/64 dev eth0 temporary

# è®¾ç½®åœ°å€ç”Ÿå‘½å‘¨æœŸ
ip -6 addr add 2001:db8:1::300/64 dev eth0 \
    valid_lft 3600 preferred_lft 1800
```

**åœ°å€ä½œç”¨åŸŸè®¾ç½®ï¼š**
```bash
# è®¾ç½®ä¸åŒä½œç”¨åŸŸ
ip -6 addr add 2001:db8:1::400/64 dev eth0 scope global
ip -6 addr add fe80::400/64 dev eth0 scope link
```

### 2.4 æ‰¹é‡åœ°å€ç®¡ç†


**ğŸ“‹ å¤šåœ°å€é…ç½®æŠ€å·§**

**è„šæœ¬åŒ–é…ç½®ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash
# IPv6åœ°å€æ‰¹é‡é…ç½®è„šæœ¬

INTERFACE="eth0"
ADDRESSES=(
    "2001:db8:1::10/64"
    "2001:db8:2::10/64" 
    "fc00:1234::10/64"
)

echo "ğŸ”§ å¼€å§‹é…ç½®IPv6åœ°å€..."

for addr in "${ADDRESSES[@]}"; do
    if ip -6 addr add "$addr" dev "$INTERFACE" 2>/dev/null; then
        echo "âœ… å·²æ·»åŠ : $addr"
    else
        echo "âš ï¸ æ·»åŠ å¤±è´¥: $addr"
    fi
done

echo "ğŸ” å½“å‰é…ç½®çŠ¶æ€:"
ip -6 addr show dev "$INTERFACE"
```

---

## 3. ğŸ”§ ifconfig IPv6åœ°å€è®¾ç½®


### 3.1 ifconfigåŸºç¡€IPv6æ“ä½œ


**ğŸ› ï¸ ä¼ ç»Ÿé…ç½®æ–¹æ³•**

**åŸºæœ¬è¯­æ³•ï¼š**
```bash
# æ·»åŠ IPv6åœ°å€
ifconfig æ¥å£åç§° inet6 add IPv6åœ°å€/å‰ç¼€é•¿åº¦

# åˆ é™¤IPv6åœ°å€
ifconfig æ¥å£åç§° inet6 del IPv6åœ°å€/å‰ç¼€é•¿åº¦

# æŸ¥çœ‹æ¥å£ä¿¡æ¯
ifconfig æ¥å£åç§°
```

### 3.2 ifconfigé…ç½®å®ä¾‹


**ğŸ“ å®é™…æ“ä½œç¤ºä¾‹**

**æ ‡å‡†åœ°å€é…ç½®ï¼š**
```bash
# é…ç½®å…¨çƒå•æ’­åœ°å€
ifconfig eth0 inet6 add 2001:db8:1::50/64

# é…ç½®å¤šä¸ªåœ°å€
ifconfig eth0 inet6 add 2001:db8:2::50/64
ifconfig eth0 inet6 add fc00:abcd::50/64

# æŸ¥çœ‹é…ç½®ç»“æœ
ifconfig eth0 | grep inet6
```

**æ¥å£çŠ¶æ€æ§åˆ¶ï¼š**
```bash
# å¯ç”¨æ¥å£çš„IPv6åŠŸèƒ½
ifconfig eth0 up

# ç¦ç”¨ç‰¹å®šIPv6åœ°å€
ifconfig eth0 inet6 del 2001:db8:1::50/64

# é‡æ–°å¯åŠ¨æ¥å£
ifconfig eth0 down && ifconfig eth0 up
```

### 3.3 ifconfigä¸ipå‘½ä»¤å¯¹æ¯”


| **åŠŸèƒ½** | **ifconfigå‘½ä»¤** | **ipå‘½ä»¤** | **æ¨èä½¿ç”¨** |
|---------|------------------|-----------|-------------|
| **åœ°å€æŸ¥çœ‹** | `ifconfig eth0` | `ip -6 addr show eth0` | ipå‘½ä»¤ |
| **åœ°å€æ·»åŠ ** | `ifconfig eth0 inet6 add` | `ip -6 addr add` | ipå‘½ä»¤ |
| **åœ°å€åˆ é™¤** | `ifconfig eth0 inet6 del` | `ip -6 addr del` | ipå‘½ä»¤ |
| **é«˜çº§é€‰é¡¹** | åŠŸèƒ½æœ‰é™ | é€‰é¡¹ä¸°å¯Œ | ipå‘½ä»¤ |

**ğŸ’¡ é€‰æ‹©å»ºè®®**
- **å­¦ä¹ é˜¶æ®µ**ï¼šä¸¤ä¸ªå‘½ä»¤éƒ½è¦äº†è§£
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä¼˜å…ˆä½¿ç”¨ipå‘½ä»¤
- **è„šæœ¬ç¼–å†™**ï¼šæ¨èipå‘½ä»¤çš„è¯­æ³•
- **æ•…éšœæ’æŸ¥**ï¼šifconfigæ›´ç›´è§‚æ˜¾ç¤º

---

## 4. ğŸ”’ ä¸´æ—¶åœ°å€ä¸éšç§æ‰©å±•


### 4.1 IPv6éšç§æ‰©å±•æ¦‚å¿µ


**ğŸ”¸ éšç§ä¿æŠ¤æœºåˆ¶**
```
é—®é¢˜èƒŒæ™¯ï¼š
ä¼ ç»ŸIPv6åœ°å€åŸºäºMACåœ°å€ç”Ÿæˆ
å¯èƒ½æ³„éœ²è®¾å¤‡ç¡¬ä»¶ä¿¡æ¯
ä¾¿äºè¿½è¸ªç”¨æˆ·è¡Œä¸º

éšç§æ‰©å±•æ–¹æ¡ˆï¼š
ç”Ÿæˆéšæœºçš„ä¸´æ—¶åœ°å€
å®šæœŸæ›´æ¢åœ°å€
ä¿æŠ¤ç”¨æˆ·éšç§
```

**ğŸ­ éšç§åœ°å€å·¥ä½œåŸç†**
æƒ³è±¡ä½ å»å›¾ä¹¦é¦†å€Ÿä¹¦ï¼š
- **å›ºå®šåœ°å€**ï¼šæ¯æ¬¡éƒ½ç”¨èº«ä»½è¯ï¼Œå®¹æ˜“è¢«è¿½è¸ª
- **ä¸´æ—¶åœ°å€**ï¼šæ¯æ¬¡ç”¨ä¸åŒçš„ä¸´æ—¶å¡å·ï¼Œä¿æŠ¤éšç§
- **å®šæœŸæ›´æ¢**ï¼šä¸´æ—¶å¡å·ä¼šè¿‡æœŸï¼Œè‡ªåŠ¨æ¢æ–°çš„

### 4.2 éšç§æ‰©å±•é…ç½®


**âš™ï¸ ç³»ç»Ÿçº§éšç§è®¾ç½®**

**å¯ç”¨éšç§æ‰©å±•ï¼š**
```bash
# ä¸´æ—¶å¯ç”¨éšç§æ‰©å±•
echo 2 > /proc/sys/net/ipv6/conf/eth0/use_tempaddr

# æŸ¥çœ‹å½“å‰è®¾ç½®
cat /proc/sys/net/ipv6/conf/eth0/use_tempaddr

# å…¨å±€å¯ç”¨éšç§æ‰©å±•
echo 2 > /proc/sys/net/ipv6/conf/all/use_tempaddr
```

**é…ç½®å‚æ•°è¯´æ˜ï¼š**
```
use_tempaddr å€¼å«ä¹‰ï¼š
0 = ç¦ç”¨ä¸´æ—¶åœ°å€
1 = å¯ç”¨ä½†ä¼˜å…ˆä½¿ç”¨å…¬å…±åœ°å€
2 = å¯ç”¨ä¸”ä¼˜å…ˆä½¿ç”¨ä¸´æ—¶åœ°å€
```

### 4.3 ä¸´æ—¶åœ°å€ç”Ÿå‘½å‘¨æœŸ


**â° åœ°å€æœ‰æ•ˆæœŸç®¡ç†**

**æŸ¥çœ‹ä¸´æ—¶åœ°å€çŠ¶æ€ï¼š**
```bash
# æ˜¾ç¤ºæ‰€æœ‰åœ°å€åŠå…¶çŠ¶æ€
ip -6 addr show | grep -E "(temporary|deprecated)"

# æŸ¥çœ‹åœ°å€è¯¦ç»†ä¿¡æ¯
ip -6 addr show dev eth0 | grep "scope global"
```

**åœ°å€çŠ¶æ€æ ‡è¯†è¯´æ˜ï¼š**
```
preferredï¼šé¦–é€‰çŠ¶æ€ï¼Œæ­£å¸¸ä½¿ç”¨
deprecatedï¼šå¼ƒç”¨çŠ¶æ€ï¼Œå³å°†è¿‡æœŸ
temporaryï¼šä¸´æ—¶åœ°å€æ ‡è®°
permanentï¼šæ°¸ä¹…åœ°å€æ ‡è®°
```

### 4.4 éšç§æ‰©å±•è°ƒä¼˜


**ğŸ”§ é«˜çº§é…ç½®é€‰é¡¹**

**ä¸´æ—¶åœ°å€å‚æ•°è°ƒæ•´ï¼š**
```bash
# è®¾ç½®ä¸´æ—¶åœ°å€æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
echo 86400 > /proc/sys/net/ipv6/conf/eth0/temp_valid_lft

# è®¾ç½®ä¸´æ—¶åœ°å€é¦–é€‰æœŸï¼ˆç§’ï¼‰  
echo 3600 > /proc/sys/net/ipv6/conf/eth0/temp_prefered_lft

# è®¾ç½®é‡æ–°ç”Ÿæˆæ—¶é—´
echo 300 > /proc/sys/net/ipv6/conf/eth0/regen_max_retry
```

---

## 5. â³ IPv6åœ°å€ç”Ÿå‘½å‘¨æœŸç®¡ç†


### 5.1 åœ°å€ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ


**ğŸ”„ åœ°å€çŠ¶æ€è½¬æ¢**
```
åœ°å€ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼š
åˆ›å»º â†’ é¦–é€‰ â†’ å¼ƒç”¨ â†’ åˆ é™¤

é¦–é€‰æœŸ(Preferred)ï¼š
- åœ°å€æ­£å¸¸å¯ç”¨
- å¯ä»¥å‘èµ·æ–°è¿æ¥
- ä¼˜å…ˆé€‰æ‹©ä½¿ç”¨

å¼ƒç”¨æœŸ(Deprecated)ï¼š
- ç°æœ‰è¿æ¥ç»§ç»­ä½¿ç”¨
- ä¸ç”¨äºæ–°è¿æ¥
- ç­‰å¾…è‡ªç„¶è¿‡æœŸ

æ— æ•ˆæœŸ(Invalid)ï¼š
- åœ°å€å®Œå…¨ä¸å¯ç”¨
- ç³»ç»Ÿè‡ªåŠ¨åˆ é™¤
```

### 5.2 ç”Ÿå‘½å‘¨æœŸå‚æ•°é…ç½®


**âš™ï¸ æ—¶é—´å‚æ•°è®¾ç½®**

**æ‰‹åŠ¨æŒ‡å®šç”Ÿå‘½å‘¨æœŸï¼š**
```bash
# æ·»åŠ å¸¦ç”Ÿå‘½å‘¨æœŸçš„åœ°å€
ip -6 addr add 2001:db8:1::100/64 dev eth0 \
    valid_lft 7200 preferred_lft 3600

# æŸ¥çœ‹åœ°å€ç”Ÿå‘½å‘¨æœŸçŠ¶æ€
ip -6 addr show dev eth0 | grep -A1 "2001:db8:1::100"
```

**åŠ¨æ€è°ƒæ•´ç”Ÿå‘½å‘¨æœŸï¼š**
```bash
# å»¶é•¿åœ°å€æœ‰æ•ˆæœŸ
ip -6 addr change 2001:db8:1::100/64 dev eth0 \
    valid_lft 14400 preferred_lft 7200

# ç«‹å³æ ‡è®°åœ°å€ä¸ºå¼ƒç”¨
ip -6 addr change 2001:db8:1::100/64 dev eth0 \
    preferred_lft 0
```

### 5.3 åœ°å€è€åŒ–ç›‘æ§


**ğŸ“Š åœ°å€çŠ¶æ€è·Ÿè¸ª**

**ç›‘æ§è„šæœ¬ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash
# IPv6åœ°å€ç”Ÿå‘½å‘¨æœŸç›‘æ§

monitor_ipv6_addresses() {
    local interface="$1"
    
    echo "ğŸ“Š IPv6åœ°å€ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ - $(date)"
    echo "æ¥å£: $interface"
    echo "----------------------------------------"
    
    # è·å–åœ°å€ä¿¡æ¯
    ip -6 addr show dev "$interface" | \
    grep -E "inet6|valid_lft" | \
    while read -r line; do
        if [[ $line =~ inet6 ]]; then
            echo "ğŸ” åœ°å€: $(echo $line | awk '{print $2}')"
        elif [[ $line =~ valid_lft ]]; then
            echo "   â° $(echo $line | sed 's/^[[:space:]]*//')"
        fi
    done
}

# æŒç»­ç›‘æ§
while true; do
    monitor_ipv6_addresses eth0
    echo ""
    sleep 60
done
```

---

## 6. âœï¸ æ‰‹åŠ¨åœ°å€é…ç½®æ–¹æ³•


### 6.1 é™æ€åœ°å€é…ç½®ç­–ç•¥


**ğŸ“‹ é…ç½®æ–‡ä»¶æ–¹æ³•**

**ç½‘ç»œé…ç½®æ–‡ä»¶è®¾ç½®ï¼ˆUbuntu/Debianï¼‰ï¼š**
```bash
# /etc/netplan/01-network-manager-all.yaml
network:
  version: 2
  ethernets:
    eth0:
      addresses:
        - 2001:db8:1::10/64
        - fc00:1234::10/64
      gateway6: 2001:db8:1::1
      nameservers:
        addresses:
          - 2001:4860:4860::8888
          - 2001:4860:4860::8844
```

**ä¼ ç»Ÿé…ç½®æ–‡ä»¶ï¼ˆRedHat/CentOSï¼‰ï¼š**
```bash
# /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0
BOOTPROTO=static
IPV6INIT=yes
IPV6_AUTOCONF=no
IPV6ADDR=2001:db8:1::10/64
IPV6_DEFAULTGW=2001:db8:1::1
```

### 6.2 å‘½ä»¤è¡Œæ‰‹åŠ¨é…ç½®


**âš¡ å³æ—¶é…ç½®æ–¹æ³•**

**å®Œæ•´ç½‘ç»œé…ç½®ç¤ºä¾‹ï¼š**
```bash
#!/bin/bash
# IPv6ç½‘ç»œå®Œæ•´é…ç½®è„šæœ¬

INTERFACE="eth0"
IPV6_ADDR="2001:db8:1::100/64"
GATEWAY="2001:db8:1::1"

echo "ğŸ”§ å¼€å§‹IPv6ç½‘ç»œé…ç½®..."

# 1. é…ç½®IPv6åœ°å€
ip -6 addr add "$IPV6_ADDR" dev "$INTERFACE"
echo "âœ… å·²é…ç½®IPv6åœ°å€: $IPV6_ADDR"

# 2. é…ç½®é»˜è®¤è·¯ç”±
ip -6 route add default via "$GATEWAY" dev "$INTERFACE"
echo "âœ… å·²é…ç½®é»˜è®¤ç½‘å…³: $GATEWAY"

# 3. é…ç½®DNS
echo "nameserver 2001:4860:4860::8888" >> /etc/resolv.conf
echo "âœ… å·²é…ç½®DNSæœåŠ¡å™¨"

# 4. éªŒè¯é…ç½®
echo "ğŸ” é…ç½®éªŒè¯:"
ip -6 addr show dev "$INTERFACE" | grep "2001:db8"
ip -6 route show | grep default
```

### 6.3 å¤šåœ°å€é…ç½®ç®¡ç†


**ğŸ·ï¸ åœ°å€æ ‡ç­¾å’Œç®¡ç†**

**åœ°å€åˆ†ç±»é…ç½®ï¼š**
```bash
# ä¸»è¦ä¸šåŠ¡åœ°å€
ip -6 addr add 2001:db8:1::100/64 dev eth0 label "primary"

# å¤‡ç”¨åœ°å€  
ip -6 addr add 2001:db8:2::100/64 dev eth0 label "backup"

# ç®¡ç†åœ°å€
ip -6 addr add fc00:mgmt::100/64 dev eth0 label "management"

# æŸ¥çœ‹å¸¦æ ‡ç­¾çš„åœ°å€
ip -6 addr show dev eth0 | grep -E "(primary|backup|management)"
```

---

## 7. ğŸ†” æ¥å£æ ‡è¯†ç¬¦é…ç½®


### 7.1 æ¥å£æ ‡è¯†ç¬¦æ¦‚å¿µ


**ğŸ”¸ EUI-64æ ‡è¯†ç¬¦**
```
æ¥å£æ ‡è¯†ç¬¦ä½œç”¨ï¼š
- IPv6åœ°å€çš„å64ä½
- å”¯ä¸€æ ‡è¯†ç½‘ç»œæ¥å£
- ç”¨äºæ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®

EUI-64ç”Ÿæˆæ–¹æ³•ï¼š
1. å–MACåœ°å€å‰3å­—èŠ‚
2. æ’å…¥FFFE
3. å–MACåœ°å€å3å­—èŠ‚
4. åè½¬ç¬¬7ä½(U/Lä½)
```

**ğŸ”¢ æ ‡è¯†ç¬¦ç”Ÿæˆç¤ºä¾‹**
```
MACåœ°å€ï¼š00:1B:63:84:45:E6

EUI-64è½¬æ¢è¿‡ç¨‹ï¼š
1. åˆ†å‰²ï¼š00:1B:63 + 84:45:E6
2. æ’å…¥ï¼š00:1B:63:FF:FE:84:45:E6
3. åè½¬U/Lä½ï¼š02:1B:63:FF:FE:84:45:E6

æœ€ç»ˆæ¥å£æ ‡è¯†ç¬¦ï¼š021b:63ff:fe84:45e6
```

### 7.2 æ‰‹åŠ¨æ ‡è¯†ç¬¦é…ç½®


**âš™ï¸ è‡ªå®šä¹‰æ¥å£æ ‡è¯†ç¬¦**

**å›ºå®šæ ‡è¯†ç¬¦è®¾ç½®ï¼š**
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ipå‘½ä»¤è®¾ç½®å®Œæ•´åœ°å€
ip -6 addr add 2001:db8:1::1/64 dev eth0

# æ–¹æ³•2ï¼šåŸºäºç°æœ‰å‰ç¼€è®¾ç½®æ ‡è¯†ç¬¦
prefix="2001:db8:1::"
identifier="::100"
ip -6 addr add "${prefix}${identifier#::}/64" dev eth0
```

**åŸºäºMACçš„æ ‡è¯†ç¬¦ç”Ÿæˆï¼š**
```bash
#!/bin/bash
# åŸºäºMACåœ°å€ç”ŸæˆEUI-64æ ‡è¯†ç¬¦

generate_eui64() {
    local mac="$1"
    local prefix="$2"
    
    # ç§»é™¤MACåœ°å€ä¸­çš„å†’å·å’Œè½¬æ¢ä¸ºå°å†™
    mac_clean=$(echo "$mac" | tr -d ':' | tr 'A-F' 'a-f')
    
    # æå–MACåœ°å€éƒ¨åˆ†
    mac_part1=${mac_clean:0:6}
    mac_part2=${mac_clean:6:6}
    
    # æ„é€ EUI-64
    eui64="${mac_part1}fffe${mac_part2}"
    
    # åè½¬U/Lä½ï¼ˆç¬¬2ä¸ªå­—ç¬¦ï¼‰
    second_char=${eui64:1:1}
    case $second_char in
        0) new_char="2" ;;
        1) new_char="3" ;;
        2) new_char="0" ;;
        3) new_char="1" ;;
        *) new_char="$second_char" ;;
    esac
    
    eui64="${eui64:0:1}${new_char}${eui64:2}"
    
    # æ ¼å¼åŒ–ä¸ºIPv6æ¥å£æ ‡è¯†ç¬¦
    identifier="${eui64:0:4}:${eui64:4:4}:${eui64:8:4}:${eui64:12:4}"
    
    echo "${prefix}${identifier}"
}

# ä½¿ç”¨ç¤ºä¾‹
MAC_ADDR="00:1b:63:84:45:e6"
PREFIX="2001:db8:1::"
IPV6_ADDR=$(generate_eui64 "$MAC_ADDR" "$PREFIX")

echo "ç”Ÿæˆçš„IPv6åœ°å€: $IPV6_ADDR"
ip -6 addr add "${IPV6_ADDR}/64" dev eth0
```

### 7.3 éšç§æ ‡è¯†ç¬¦ç”Ÿæˆ


**ğŸ² éšæœºæ ‡è¯†ç¬¦é…ç½®**

**ä¸´æ—¶éšæœºæ ‡è¯†ç¬¦ï¼š**
```bash
# ç”Ÿæˆéšæœºæ¥å£æ ‡è¯†ç¬¦
generate_random_identifier() {
    local prefix="$1"
    
    # ç”Ÿæˆ4ç»„éšæœº16è¿›åˆ¶æ•°
    local id1=$(printf "%04x" $((RANDOM % 65536)))
    local id2=$(printf "%04x" $((RANDOM % 65536)))  
    local id3=$(printf "%04x" $((RANDOM % 65536)))
    local id4=$(printf "%04x" $((RANDOM % 65536)))
    
    echo "${prefix}${id1}:${id2}:${id3}:${id4}"
}

# åº”ç”¨éšæœºæ ‡è¯†ç¬¦
PREFIX="2001:db8:1::"
RANDOM_ADDR=$(generate_random_identifier "$PREFIX")
ip -6 addr add "${RANDOM_ADDR}/64" dev eth0 temporary

echo "ğŸ² å·²æ·»åŠ éšæœºä¸´æ—¶åœ°å€: $RANDOM_ADDR"
```

---

## 8. ğŸ“Š IPv6åœ°å€ä¼˜å…ˆçº§è®¾ç½®


### 8.1 åœ°å€é€‰æ‹©ç­–ç•¥


**ğŸ”¸ RFC 6724åœ°å€é€‰æ‹©è§„åˆ™**
```
åœ°å€é€‰æ‹©ä¼˜å…ˆçº§é¡ºåºï¼š
1. ä½œç”¨åŸŸåŒ¹é…ï¼ˆå…¨çƒ > é“¾è·¯æœ¬åœ°ï¼‰
2. æ ‡ç­¾åŒ¹é…ï¼ˆç›¸åŒæ ‡ç­¾ä¼˜å…ˆï¼‰
3. ä¼˜å…ˆçº§å€¼ï¼ˆæ•°å€¼è¶Šå°è¶Šä¼˜å…ˆï¼‰
4. åœ°å€ç±»å‹ï¼ˆå…¬å…± > ä¸´æ—¶ï¼‰
5. ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼ˆé¦–é€‰ > å¼ƒç”¨ï¼‰
```

### 8.2 åœ°å€ä¼˜å…ˆçº§é…ç½®


**âš™ï¸ ä¼˜å…ˆçº§ç­–ç•¥æ–‡ä»¶**

**æŸ¥çœ‹å½“å‰ä¼˜å…ˆçº§è®¾ç½®ï¼š**
```bash
# æ˜¾ç¤ºåœ°å€é€‰æ‹©ç­–ç•¥è¡¨
ip addrlabel show

# å…¸å‹è¾“å‡ºç¤ºä¾‹ï¼š
# prefix ::1/128 label 0
# prefix ::/0 label 1  
# prefix 2002::/16 label 2
# prefix ::/96 label 3
```

**ä¿®æ”¹åœ°å€ä¼˜å…ˆçº§ï¼š**
```bash
# æ·»åŠ ä¼˜å…ˆçº§æ ‡ç­¾
ip addrlabel add prefix 2001:db8::/32 label 100

# åˆ é™¤ä¼˜å…ˆçº§æ ‡ç­¾
ip addrlabel del prefix 2001:db8::/32

# ä¿®æ”¹ç°æœ‰æ ‡ç­¾
ip addrlabel flush
ip addrlabel add prefix ::/0 label 1
ip addrlabel add prefix 2001:db8::/32 label 10
```

### 8.3 åº”ç”¨ç¨‹åºåœ°å€é€‰æ‹©


**ğŸ¯ æºåœ°å€é€‰æ‹©æ§åˆ¶**

**gai.confé…ç½®æ–‡ä»¶ï¼š**
```bash
# /etc/gai.conf - åœ°å€é€‰æ‹©é…ç½®æ–‡ä»¶

# ä¼˜å…ˆä½¿ç”¨IPv6
precedence  ::1/128         50
precedence  ::/0            40
precedence  2002::/16       30
precedence  ::/96           20
precedence  ::ffff:0:0/96   10

# æ ‡ç­¾é…ç½®
label  ::1/128         0
label  ::/0            1  
label  2002::/16       2
label  ::/96           3
label  ::ffff:0:0/96   4
```

**æµ‹è¯•åœ°å€é€‰æ‹©ï¼š**
```bash
# ä½¿ç”¨getaddrinfoæµ‹è¯•åœ°å€è§£æé¡ºåº
getent ahosts www.google.com

# ä½¿ç”¨pingæµ‹è¯•æºåœ°å€é€‰æ‹©
ping6 -c 1 2001:4860:4860::8888

# æŸ¥çœ‹è¿æ¥ä½¿ç”¨çš„æºåœ°å€
ss -6 -t | grep 2001:4860:4860::8888
```

---

## 9. ğŸ‘ï¸ ç½‘ç»œæ¥å£IPv6çŠ¶æ€æŸ¥çœ‹


### 9.1 åŸºæœ¬çŠ¶æ€æŸ¥çœ‹å‘½ä»¤


**ğŸ” å¸¸ç”¨æŸ¥çœ‹å‘½ä»¤**

**å®Œæ•´æ¥å£ä¿¡æ¯ï¼š**
```bash
# æŸ¥çœ‹æ‰€æœ‰IPv6åœ°å€
ip -6 addr show

# æŸ¥çœ‹ç‰¹å®šæ¥å£
ip -6 addr show dev eth0

# ç®€æ´æ ¼å¼æ˜¾ç¤º
ip -6 -br addr show
```

**åœ°å€è¯¦ç»†ä¿¡æ¯ï¼š**
```bash
# æ˜¾ç¤ºåœ°å€ä½œç”¨åŸŸå’ŒçŠ¶æ€
ip -6 addr show | grep -E "(inet6|scope|valid_lft)"

# æŒ‰ä½œç”¨åŸŸè¿‡æ»¤
ip -6 addr show scope global    # å…¨çƒåœ°å€
ip -6 addr show scope link      # é“¾è·¯æœ¬åœ°åœ°å€
ip -6 addr show scope host      # æœ¬åœ°å›ç¯åœ°å€
```

### 9.2 é«˜çº§çŠ¶æ€åˆ†æ


**ğŸ“ˆ çŠ¶æ€ç»Ÿè®¡å’Œåˆ†æ**

**åœ°å€ç»Ÿè®¡è„šæœ¬ï¼š**
```bash
#!/bin/bash
# IPv6æ¥å£çŠ¶æ€åˆ†æå·¥å…·

analyze_ipv6_status() {
    local interface="$1"
    
    echo "ğŸ” IPv6æ¥å£çŠ¶æ€åˆ†æ: $interface"
    echo "======================================"
    
    # 1. åŸºæœ¬æ¥å£ä¿¡æ¯
    echo "ğŸ“¡ æ¥å£åŸºæœ¬ä¿¡æ¯:"
    ip link show "$interface" | grep -E "(mtu|state)"
    
    # 2. IPv6åœ°å€ç»Ÿè®¡
    echo ""
    echo "ğŸ“Š IPv6åœ°å€ç»Ÿè®¡:"
    local total_addrs=$(ip -6 addr show dev "$interface" | grep -c "inet6")
    local global_addrs=$(ip -6 addr show dev "$interface" scope global | grep -c "inet6")  
    local link_addrs=$(ip -6 addr show dev "$interface" scope link | grep -c "inet6")
    local temp_addrs=$(ip -6 addr show dev "$interface" | grep -c "temporary")
    
    echo "   æ€»åœ°å€æ•°: $total_addrs"
    echo "   å…¨çƒåœ°å€: $global_addrs"  
    echo "   é“¾è·¯åœ°å€: $link_addrs"
    echo "   ä¸´æ—¶åœ°å€: $temp_addrs"
    
    # 3. åœ°å€çŠ¶æ€åˆ†æ
    echo ""
    echo "â° åœ°å€ç”Ÿå‘½å‘¨æœŸçŠ¶æ€:"
    ip -6 addr show dev "$interface" | \
    grep -E "(preferred_lft|valid_lft)" | \
    head -3 | \
    while read -r line; do
        echo "   $line"
    done
    
    # 4. è·¯ç”±ä¿¡æ¯
    echo ""
    echo "ğŸ›£ï¸ ç›¸å…³è·¯ç”±ä¿¡æ¯:"
    ip -6 route show dev "$interface" | head -5
}

# ä½¿ç”¨ç¤ºä¾‹
analyze_ipv6_status "eth0"
```

### 9.3 å®æ—¶çŠ¶æ€ç›‘æ§


**ğŸ“± åŠ¨æ€ç›‘æ§å·¥å…·**

**å®æ—¶åœ°å€å˜åŒ–ç›‘æ§ï¼š**
```bash
#!/bin/bash
# IPv6åœ°å€å˜åŒ–å®æ—¶ç›‘æ§

monitor_ipv6_changes() {
    echo "ğŸ”„ å¼€å§‹ç›‘æ§IPv6åœ°å€å˜åŒ–..."
    echo "æŒ‰Ctrl+Cåœæ­¢ç›‘æ§"
    echo ""
    
    # ä½¿ç”¨ip monitorç›‘æ§åœ°å€å˜åŒ–
    ip -6 monitor address | while read -r line; do
        timestamp=$(date '+%Y-%m-%d %H:%M:%S')
        echo "[$timestamp] $line"
        
        # è§£æå˜åŒ–ç±»å‹
        if [[ $line =~ "Deleted" ]]; then
            echo "   ğŸ”´ åœ°å€è¢«åˆ é™¤"
        elif [[ $line =~ "Updated" ]]; then
            echo "   ğŸŸ¡ åœ°å€è¢«æ›´æ–°"  
        else
            echo "   ğŸŸ¢ åœ°å€è¢«æ·»åŠ "
        fi
        echo ""
    done
}

# åå°ç›‘æ§å‡½æ•°
background_monitor() {
    while true; do
        clear
        echo "ğŸ“Š IPv6æ¥å£çŠ¶æ€å®æ—¶ç›‘æ§ - $(date)"
        echo "========================================"
        
        # æ˜¾ç¤ºå½“å‰æ‰€æœ‰IPv6åœ°å€
        ip -6 addr show | grep -E "(inet6|scope)" | \
        while read -r line; do
            if [[ $line =~ inet6 ]]; then
                echo "ğŸ” $(echo $line | awk '{print $2, $3}')"
            fi
        done
        
        sleep 5
    done
}

# é€‰æ‹©ç›‘æ§æ¨¡å¼
echo "é€‰æ‹©ç›‘æ§æ¨¡å¼:"
echo "1) å®æ—¶å˜åŒ–ç›‘æ§"
echo "2) çŠ¶æ€è½®è¯¢ç›‘æ§"
read -p "è¯·è¾“å…¥é€‰æ‹© (1/2): " choice

case $choice in
    1) monitor_ipv6_changes ;;
    2) background_monitor ;;
    *) echo "æ— æ•ˆé€‰æ‹©" ;;
esac
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ IPv6æ¥å£é…ç½®ï¼šä¸ºç½‘ç»œæ¥å£åˆ†é…128ä½IPv6åœ°å€
ğŸ”¸ åœ°å€ç±»å‹ï¼šé“¾è·¯æœ¬åœ°ã€å…¨çƒå•æ’­ã€å”¯ä¸€æœ¬åœ°ã€ä¸´æ—¶åœ°å€
ğŸ”¸ é…ç½®å·¥å…·ï¼šipå‘½ä»¤ï¼ˆæ¨èï¼‰å’Œifconfigå‘½ä»¤ï¼ˆä¼ ç»Ÿï¼‰
ğŸ”¸ éšç§æ‰©å±•ï¼šç”Ÿæˆä¸´æ—¶åœ°å€ä¿æŠ¤ç”¨æˆ·éšç§
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸï¼šåœ°å€ä»åˆ›å»ºåˆ°åˆ é™¤çš„å®Œæ•´è¿‡ç¨‹
ğŸ”¸ æ¥å£æ ‡è¯†ç¬¦ï¼šIPv6åœ°å€çš„å64ä½ï¼Œæ ‡è¯†å…·ä½“æ¥å£
ğŸ”¸ åœ°å€ä¼˜å…ˆçº§ï¼šæ§åˆ¶å¤šåœ°å€ç¯å¢ƒä¸‹çš„åœ°å€é€‰æ‹©ç­–ç•¥
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆIPv6éœ€è¦å¤æ‚çš„åœ°å€ç®¡ç†**
```
IPv4ç¯å¢ƒé™åˆ¶ï¼š
- åœ°å€ç©ºé—´æœ‰é™
- ä¸»è¦ä¾èµ–NAT
- éšç§ä¿æŠ¤ä¸è¶³

IPv6ç¯å¢ƒä¼˜åŠ¿ï¼š
- åœ°å€ç©ºé—´å·¨å¤§
- æ¯æ¥å£å¤šåœ°å€
- å†…ç½®éšç§ä¿æŠ¤
- æ›´çµæ´»çš„é…ç½®é€‰é¡¹
```

**ğŸ”¹ IPv6é…ç½®çš„æœ€ä½³å®è·µ**
```
è§„åˆ’è®¾è®¡ï¼š
- åˆç†è§„åˆ’åœ°å€ç©ºé—´
- è€ƒè™‘éšç§ä¿æŠ¤éœ€æ±‚
- è®¾è®¡åœ°å€åˆ†é…ç­–ç•¥

é…ç½®ç®¡ç†ï¼š
- ä¼˜å…ˆä½¿ç”¨ipå‘½ä»¤
- é…ç½®æ–‡ä»¶æŒä¹…åŒ–
- ç›‘æ§åœ°å€çŠ¶æ€å˜åŒ–

å®‰å…¨è€ƒè™‘ï¼š
- å¯ç”¨éšç§æ‰©å±•
- æ§åˆ¶åœ°å€ç”Ÿå‘½å‘¨æœŸ
- ç›‘æ§å¼‚å¸¸åœ°å€å˜åŒ–
```

### 10.3 å®é™…åº”ç”¨åœºæ™¯


**ğŸ¯ å…¸å‹åº”ç”¨ç¯å¢ƒ**
- **ä¼ä¸šç½‘ç»œ**ï¼šè§„åˆ’ç»Ÿä¸€çš„IPv6åœ°å€åˆ†é…æ–¹æ¡ˆ
- **æ•°æ®ä¸­å¿ƒ**ï¼šé…ç½®æœåŠ¡å™¨IPv6è¿æ¥
- **å®¶åº­ç½‘ç»œ**ï¼šå¯ç”¨éšç§æ‰©å±•ä¿æŠ¤ç”¨æˆ·éšç§
- **ç§»åŠ¨è®¾å¤‡**ï¼šä¸´æ—¶åœ°å€é…ç½®å’Œç®¡ç†

**ğŸ”§ æ•…éšœæ’æŸ¥è¦ç‚¹**
```
å¸¸è§é—®é¢˜ï¼š
1. åœ°å€é…ç½®åæ— æ³•é€šä¿¡
   â†’ æ£€æŸ¥è·¯ç”±é…ç½®å’Œé˜²ç«å¢™è§„åˆ™

2. ä¸´æ—¶åœ°å€ä¸ç”Ÿæˆ
   â†’ æ£€æŸ¥éšç§æ‰©å±•é…ç½®

3. åœ°å€é¢‘ç¹å˜åŒ–
   â†’ è°ƒæ•´åœ°å€ç”Ÿå‘½å‘¨æœŸå‚æ•°

4. å¤šåœ°å€é€‰æ‹©é”™è¯¯
   â†’ æ£€æŸ¥åœ°å€ä¼˜å…ˆçº§é…ç½®
```

### 10.4 å­¦ä¹ æ£€æŸ¥æ¸…å•


- [ ] èƒ½å¤Ÿä½¿ç”¨ipå‘½ä»¤é…ç½®IPv6åœ°å€
- [ ] ç†è§£ä¸åŒIPv6åœ°å€ç±»å‹çš„ç”¨é€”
- [ ] ä¼šé…ç½®å’Œç®¡ç†éšç§æ‰©å±•
- [ ] æŒæ¡IPv6åœ°å€ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ
- [ ] èƒ½å¤ŸæŸ¥çœ‹å’Œåˆ†ææ¥å£çŠ¶æ€
- [ ] äº†è§£åœ°å€ä¼˜å…ˆçº§é…ç½®æ–¹æ³•

**ğŸ”‘ æ ¸å¿ƒè®°å¿†è¦ç‚¹**
```
é…ç½®æ ¸å¿ƒï¼šip -6 addr add åœ°å€/å‰ç¼€ dev æ¥å£
æŸ¥çœ‹çŠ¶æ€ï¼šip -6 addr show æŸ¥çœ‹æ‰€æœ‰IPv6åœ°å€
éšç§ä¿æŠ¤ï¼šuse_tempaddr=2 å¯ç”¨ä¸´æ—¶åœ°å€
ç”Ÿå‘½å‘¨æœŸï¼špreferred â†’ deprecated â†’ invalid
æ¥å£æ ‡è¯†ï¼šIPv6åœ°å€å64ä½æ ‡è¯†å…·ä½“æ¥å£
```

**ğŸ’¡ å»¶ä¼¸å­¦ä¹ å»ºè®®**
- æ·±å…¥å­¦ä¹ IPv6è·¯ç”±é…ç½®å’Œç®¡ç†
- äº†è§£DHCPv6å’Œæ— çŠ¶æ€è‡ªåŠ¨é…ç½®
- æŒæ¡IPv6ç½‘ç»œå®‰å…¨é˜²æŠ¤æŠ€æœ¯
- å­¦ä¹ åŒæ ˆç¯å¢ƒä¸‹çš„åœ°å€ç­–ç•¥