---
title: 17ã€è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿç®¡ç†
---
## ğŸ“š ç›®å½•

1. [è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°](#1-è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°)
2. [/devç›®å½•è¯¦è§£](#2-devç›®å½•è¯¦è§£)
3. [è®¾å¤‡æ–‡ä»¶ç±»å‹è¯†åˆ«](#3-è®¾å¤‡æ–‡ä»¶ç±»å‹è¯†åˆ«)
4. [ä¸»è®¾å¤‡å·ä¸æ¬¡è®¾å¤‡å·](#4-ä¸»è®¾å¤‡å·ä¸æ¬¡è®¾å¤‡å·)
5. [udevè®¾å¤‡ç®¡ç†å™¨](#5-udevè®¾å¤‡ç®¡ç†å™¨)
6. [è®¾å¤‡æ–‡ä»¶æƒé™ç®¡ç†](#6-è®¾å¤‡æ–‡ä»¶æƒé™ç®¡ç†)
7. [è®¾å¤‡çƒ­æ’æ‹”å¤„ç†](#7-è®¾å¤‡çƒ­æ’æ‹”å¤„ç†)
8. [è®¾å¤‡æ–‡ä»¶åˆ›å»ºè§„åˆ™](#8-è®¾å¤‡æ–‡ä»¶åˆ›å»ºè§„åˆ™)
9. [å­—ç¬¦è®¾å¤‡vså—è®¾å¤‡è¯¦è§£](#9-å­—ç¬¦è®¾å¤‡vså—è®¾å¤‡è¯¦è§£)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ–¥ï¸ è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿæ¦‚è¿°


### 1.1 ä»€ä¹ˆæ˜¯è®¾å¤‡æ–‡ä»¶


> ğŸ’¡ **é€šä¿—ç†è§£**ï¼šè®¾å¤‡æ–‡ä»¶å°±æ˜¯Linuxç³»ç»Ÿä¸­ç”¨æ¥ä»£è¡¨ç¡¬ä»¶è®¾å¤‡çš„"ä»£ç†æ–‡ä»¶"

**ç®€å•ç±»æ¯”**ï¼š
```
ç°å®ä¸–ç•Œçš„æ¯”å–»ï¼š
å•†åº—çš„æ”¶é“¶å° = è®¾å¤‡æ–‡ä»¶
å®é™…çš„æ”¶é“¶å‘˜ = ç¡¬ä»¶è®¾å¤‡
é¡¾å®¢ç»“è´¦ = ç¨‹åºè®¿é—®è®¾å¤‡

ä½ ä¸éœ€è¦ç›´æ¥æ‰¾åˆ°æ”¶é“¶å‘˜æœ¬äººï¼Œåªè¦å»æ”¶é“¶å°å°±èƒ½å®Œæˆç»“è´¦
ç¨‹åºä¸éœ€è¦ç›´æ¥æ“ä½œç¡¬ä»¶ï¼Œåªè¦è®¿é—®è®¾å¤‡æ–‡ä»¶å°±èƒ½æ§åˆ¶è®¾å¤‡
```

### 1.2 è®¾å¤‡æ–‡ä»¶çš„æ ¸å¿ƒä½œç”¨


**ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰è®¾å¤‡éƒ½é€šè¿‡æ–‡ä»¶å½¢å¼è®¿é—®
- **ç®€åŒ–æ“ä½œ**ï¼šç”¨è¯»å†™æ–‡ä»¶çš„æ–¹å¼æ§åˆ¶è®¾å¤‡
- **æƒé™æ§åˆ¶**ï¼šé€šè¿‡æ–‡ä»¶æƒé™ç®¡ç†è®¾å¤‡è®¿é—®
- **æŠ½è±¡å±‚**ï¼šç¨‹åºä¸éœ€è¦çŸ¥é“ç¡¬ä»¶ç»†èŠ‚

```
è®¾å¤‡è®¿é—®æµç¨‹ï¼š
åº”ç”¨ç¨‹åº â†’ è®¾å¤‡æ–‡ä»¶ â†’ è®¾å¤‡é©±åŠ¨ â†’ ç¡¬ä»¶è®¾å¤‡

å®é™…ä¾‹å­ï¼š
cat /dev/sda1  # è¯»å–ç¡¬ç›˜åˆ†åŒºå†…å®¹
echo "hello" > /dev/ttyS0  # å‘ä¸²å£å‘é€æ•°æ®
```

### 1.3 Linuxè®¾å¤‡ç®¡ç†å“²å­¦


**ğŸ¯ Unixå“²å­¦ä½“ç°**ï¼š
```
"ä¸€åˆ‡çš†æ–‡ä»¶" (Everything is a file)

è¿™æ„å‘³ç€ï¼š
âœ… ç¡¬ç›˜ â†’ æ–‡ä»¶ (/dev/sda)
âœ… é”®ç›˜ â†’ æ–‡ä»¶ (/dev/input/event0)  
âœ… ç½‘å¡ â†’ æ–‡ä»¶ (/dev/eth0)
âœ… éšæœºæ•°ç”Ÿæˆå™¨ â†’ æ–‡ä»¶ (/dev/random)
```

---

## 2. ğŸ“ /devç›®å½•è¯¦è§£


### 2.1 /devç›®å½•çš„ä½œç”¨


> ğŸ“Œ **æ ¸å¿ƒå®šä¹‰**ï¼š/devæ˜¯Linuxç³»ç»Ÿä¸­ä¸“é—¨å­˜æ”¾è®¾å¤‡æ–‡ä»¶çš„ç›®å½•

**ç›®å½•ç»“æ„ä¸€è§ˆ**ï¼š
```
/dev/
â”œâ”€â”€ sda, sdb, sdc...     # ç¡¬ç›˜è®¾å¤‡
â”œâ”€â”€ sda1, sda2...        # ç¡¬ç›˜åˆ†åŒº
â”œâ”€â”€ tty, tty1, tty2...   # ç»ˆç«¯è®¾å¤‡
â”œâ”€â”€ eth0, wlan0...       # ç½‘ç»œæ¥å£
â”œâ”€â”€ null, zero, random   # ç‰¹æ®Šè®¾å¤‡
â”œâ”€â”€ input/               # è¾“å…¥è®¾å¤‡ç›®å½•
â”œâ”€â”€ sound/               # éŸ³é¢‘è®¾å¤‡ç›®å½•
â””â”€â”€ disk/                # ç£ç›˜è®¾å¤‡é“¾æ¥
```

### 2.2 å¸¸è§è®¾å¤‡æ–‡ä»¶å«ä¹‰


**ğŸ’¾ å­˜å‚¨è®¾å¤‡**ï¼š
```
/dev/sda     # ç¬¬ä¸€å—SATAç¡¬ç›˜ï¼ˆæ•´ä¸ªç¡¬ç›˜ï¼‰
/dev/sda1    # ç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº
/dev/sdb2    # ç¬¬äºŒå—ç¡¬ç›˜çš„ç¬¬äºŒä¸ªåˆ†åŒº
/dev/nvme0n1 # ç¬¬ä¸€å—NVMe SSDç¡¬ç›˜

è®°å¿†æŠ€å·§ï¼š
sd = SATA Disk  
a,b,c... = ç¡¬ç›˜ç¼–å·
1,2,3... = åˆ†åŒºç¼–å·
```

**ğŸ–¥ï¸ ç»ˆç«¯è®¾å¤‡**ï¼š
```
/dev/tty0    # å½“å‰æ´»åŠ¨çš„è™šæ‹Ÿç»ˆç«¯
/dev/tty1    # ç¬¬ä¸€ä¸ªè™šæ‹Ÿç»ˆç«¯ (Ctrl+Alt+F1)
/dev/pts/0   # ç¬¬ä¸€ä¸ªä¼ªç»ˆç«¯ (SSHè¿æ¥)
/dev/console # ç³»ç»Ÿæ§åˆ¶å°
```

**ğŸ”§ ç‰¹æ®Šè®¾å¤‡**ï¼š
```
/dev/null    # é»‘æ´è®¾å¤‡ï¼Œä¸¢å¼ƒæ‰€æœ‰å†™å…¥æ•°æ®
/dev/zero    # é›¶è®¾å¤‡ï¼Œæ— é™æä¾›é›¶å­—èŠ‚
/dev/random  # çœŸéšæœºæ•°ç”Ÿæˆå™¨
/dev/urandom # ä¼ªéšæœºæ•°ç”Ÿæˆå™¨
```

### 2.3 æŸ¥çœ‹è®¾å¤‡æ–‡ä»¶ä¿¡æ¯


**åŸºæœ¬æŸ¥çœ‹å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹/devç›®å½•å†…å®¹
ls -la /dev/

# æŸ¥çœ‹ç‰¹å®šè®¾å¤‡ä¿¡æ¯
ls -l /dev/sda*
# è¾“å‡ºç¤ºä¾‹ï¼š
# brw-rw---- 1 root disk 8, 0 Sep 14 10:30 /dev/sda
# brw-rw---- 1 root disk 8, 1 Sep 14 10:30 /dev/sda1

# æŸ¥çœ‹è®¾å¤‡ç»Ÿè®¡
ls /dev | wc -l  # ç»Ÿè®¡è®¾å¤‡æ–‡ä»¶æ•°é‡
```

---

## 3. ğŸ” è®¾å¤‡æ–‡ä»¶ç±»å‹è¯†åˆ«


### 3.1 è®¾å¤‡æ–‡ä»¶ç±»å‹æ¦‚è¿°


> ğŸ’¡ **ç®€å•ç†è§£**ï¼šè®¾å¤‡æ–‡ä»¶æœ‰ä¸åŒç±»å‹ï¼Œå°±åƒæ–‡ä»¶æœ‰ä¸åŒæ ¼å¼ä¸€æ ·

**æ–‡ä»¶ç±»å‹æ ‡è¯†**ï¼š
```
ä½¿ç”¨ ls -l æŸ¥çœ‹è®¾å¤‡æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºç±»å‹ï¼š

b â†’ å—è®¾å¤‡ (block device)
c â†’ å­—ç¬¦è®¾å¤‡ (character device)  
l â†’ ç¬¦å·é“¾æ¥ (symbolic link)
```

### 3.2 å—è®¾å¤‡è¯†åˆ«


**ğŸ”¸ å—è®¾å¤‡ç‰¹å¾**ï¼š
```bash
# æŸ¥çœ‹å—è®¾å¤‡
ls -l /dev/sd*
brw-rw---- 1 root disk 8, 0 Sep 14 10:30 /dev/sda
# â†‘ ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ 'b'

# å—è®¾å¤‡çš„ç‰¹ç‚¹ï¼š
âœ… ä»¥æ•°æ®å—ä¸ºå•ä½è¯»å†™
âœ… æ”¯æŒéšæœºè®¿é—®
âœ… å¯ä»¥ç¼“å­˜æ•°æ®
âœ… å…¸å‹ä¾‹å­ï¼šç¡¬ç›˜ã€Uç›˜ã€å…‰ç›˜
```

**å¸¸è§å—è®¾å¤‡ç¤ºä¾‹**ï¼š
```
/dev/sda     # SATAç¡¬ç›˜
/dev/mmcblk0 # SDå¡/eMMCå­˜å‚¨
/dev/loop0   # å›ç¯è®¾å¤‡
/dev/sr0     # å…‰ç›˜é©±åŠ¨å™¨
```

### 3.3 å­—ç¬¦è®¾å¤‡è¯†åˆ«


**ğŸ”¸ å­—ç¬¦è®¾å¤‡ç‰¹å¾**ï¼š
```bash
# æŸ¥çœ‹å­—ç¬¦è®¾å¤‡
ls -l /dev/tty*
crw-rw-rw- 1 root tty  5, 0 Sep 14 10:30 /dev/tty
# â†‘ ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ 'c'

# å­—ç¬¦è®¾å¤‡çš„ç‰¹ç‚¹ï¼š
âœ… ä»¥å­—ç¬¦ä¸ºå•ä½è¯»å†™
âœ… é¡ºåºè®¿é—®ï¼Œæ— æ³•éšæœºå®šä½
âœ… ä¸æ”¯æŒç¼“å­˜
âœ… å…¸å‹ä¾‹å­ï¼šé”®ç›˜ã€é¼ æ ‡ã€ä¸²å£ã€ç»ˆç«¯
```

**å¸¸è§å­—ç¬¦è®¾å¤‡ç¤ºä¾‹**ï¼š
```
/dev/tty1      # è™šæ‹Ÿç»ˆç«¯
/dev/input/mouse0  # é¼ æ ‡
/dev/ttyS0     # ä¸²å£
/dev/random    # éšæœºæ•°ç”Ÿæˆå™¨
```

### 3.4 å¿«é€ŸåŒºåˆ†æŠ€å·§


**ğŸ“‹ è®°å¿†æ–¹æ³•**ï¼š
```
å—è®¾å¤‡ (Block)ï¼š
ğŸ§± åƒç§¯æœ¨å—ä¸€æ ·ï¼Œå¯ä»¥ä»»æ„ä½ç½®è¯»å–
ğŸ’¾ å­˜å‚¨è®¾å¤‡éƒ½æ˜¯å—è®¾å¤‡
ğŸ”„ å¯ä»¥ç¼“å­˜ï¼Œæ”¯æŒæ–‡ä»¶ç³»ç»Ÿ

å­—ç¬¦è®¾å¤‡ (Character)ï¼š
ğŸ“ åƒæ‰“å­—ä¸€æ ·ï¼Œä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦å¤„ç†
âŒ¨ï¸ è¾“å…¥è¾“å‡ºè®¾å¤‡å¤šæ˜¯å­—ç¬¦è®¾å¤‡  
â¡ï¸ æ•°æ®æµåŠ¨ï¼Œæ— æ³•å›é€€
```

---

## 4. ğŸ”¢ ä¸»è®¾å¤‡å·ä¸æ¬¡è®¾å¤‡å·


### 4.1 è®¾å¤‡å·çš„åŸºæœ¬æ¦‚å¿µ


> ğŸ’¡ **é€šä¿—è§£é‡Š**ï¼šè®¾å¤‡å·å°±åƒè®¾å¤‡çš„"èº«ä»½è¯å·ç "

**è®¾å¤‡å·ç»„æˆ**ï¼š
```bash
# æŸ¥çœ‹è®¾å¤‡å·
ls -l /dev/sda*
brw-rw---- 1 root disk 8, 0 Sep 14 10:30 /dev/sda
brw-rw---- 1 root disk 8, 1 Sep 14 10:30 /dev/sda1
#                      â†‘  â†‘
#                   ä¸»è®¾å¤‡å· æ¬¡è®¾å¤‡å·
```

### 4.2 ä¸»è®¾å¤‡å·è¯¦è§£


**ğŸ”‘ ä¸»è®¾å¤‡å·çš„ä½œç”¨**ï¼š
```
ä¸»è®¾å¤‡å· = è®¾å¤‡ç±»å‹æ ‡è¯†
ç›¸åŒä¸»è®¾å¤‡å· = ä½¿ç”¨ç›¸åŒçš„é©±åŠ¨ç¨‹åº

å®é™…ä¾‹å­ï¼š
8  â†’ SCSI/SATAç¡¬ç›˜é©±åŠ¨
1  â†’ å†…å­˜è®¾å¤‡é©±åŠ¨  
4  â†’ TTYç»ˆç«¯é©±åŠ¨
10 â†’ é¼ æ ‡ç­‰æ‚é¡¹è®¾å¤‡é©±åŠ¨
```

**å¸¸è§ä¸»è®¾å¤‡å·å¯¹ç…§**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸»è®¾å¤‡å· â”‚ è®¾å¤‡ç±»å‹                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1       â”‚ å†…å­˜è®¾å¤‡ (/dev/nullç­‰)   â”‚
â”‚ 4       â”‚ TTYè®¾å¤‡                 â”‚
â”‚ 8       â”‚ SCSIç£ç›˜                â”‚
â”‚ 11      â”‚ SCSI CD-ROM            â”‚
â”‚ 13      â”‚ è¾“å…¥è®¾å¤‡               â”‚
â”‚ 21      â”‚ SCSIé€šç”¨è®¾å¤‡           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 æ¬¡è®¾å¤‡å·è¯¦è§£


**ğŸ”¸ æ¬¡è®¾å¤‡å·çš„ä½œç”¨**ï¼š
```
æ¬¡è®¾å¤‡å· = å…·ä½“è®¾å¤‡å®ä¾‹æ ‡è¯†
åŒºåˆ†åŒä¸€ç±»å‹çš„ä¸åŒè®¾å¤‡

å®é™…ä¾‹å­ï¼š
/dev/sda  â†’ ä¸»è®¾å¤‡å·8ï¼Œæ¬¡è®¾å¤‡å·0 (ç¬¬ä¸€å—ç¡¬ç›˜)
/dev/sda1 â†’ ä¸»è®¾å¤‡å·8ï¼Œæ¬¡è®¾å¤‡å·1 (ç¬¬ä¸€ä¸ªåˆ†åŒº)
/dev/sdb  â†’ ä¸»è®¾å¤‡å·8ï¼Œæ¬¡è®¾å¤‡å·16 (ç¬¬äºŒå—ç¡¬ç›˜)
```

### 4.4 æŸ¥çœ‹ç³»ç»Ÿè®¾å¤‡å·


**å®ç”¨æŸ¥çœ‹å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹ä¸»è¦è®¾å¤‡ä¿¡æ¯
cat /proc/devices
# è¾“å‡ºç¤ºä¾‹ï¼š
# Character devices:
#  1 mem
#  4 tty  
#  8 serial
# Block devices:
#  8 sd
#  11 sr

# æŸ¥çœ‹å…·ä½“è®¾å¤‡çš„è®¾å¤‡å·
stat /dev/sda
# è¾“å‡ºåŒ…å«è®¾å¤‡å·ä¿¡æ¯

# ä½¿ç”¨lsæŸ¥çœ‹è®¾å¤‡å·æ›´ç›´è§‚
ls -l /dev/ | head -10
```

**ğŸ¯ å®é™…åº”ç”¨åœºæ™¯**ï¼š
```bash
# åˆ›å»ºè®¾å¤‡æ–‡ä»¶æ—¶éœ€è¦æŒ‡å®šè®¾å¤‡å·
mknod /dev/mydevice c 10 200
#     â†‘           â†‘ â†‘  â†‘
#   è®¾å¤‡æ–‡ä»¶å    ç±»å‹ ä¸»å· æ¬¡å·
```

---

## 5. âš™ï¸ udevè®¾å¤‡ç®¡ç†å™¨


### 5.1 udevæ˜¯ä»€ä¹ˆ


> ğŸ’¡ **ç®€å•ç†è§£**ï¼šudevå°±åƒè®¾å¤‡çš„"ç®¡å®¶"ï¼Œè‡ªåŠ¨ç®¡ç†è®¾å¤‡æ–‡ä»¶çš„åˆ›å»ºå’Œåˆ é™¤

**udevçš„ä½œç”¨**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼ˆé™æ€ï¼‰ï¼š
/devç›®å½•ä¸‹é¢„å…ˆåˆ›å»ºæ‰€æœ‰å¯èƒ½çš„è®¾å¤‡æ–‡ä»¶
é—®é¢˜ï¼šå ç”¨ç©ºé—´ï¼Œç®¡ç†å¤æ‚

ç°ä»£æ–¹å¼ï¼ˆudevåŠ¨æ€ï¼‰ï¼š
è®¾å¤‡æ’å…¥ â†’ udevæ£€æµ‹ â†’ è‡ªåŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶
è®¾å¤‡æ‹”å‡º â†’ udevæ£€æµ‹ â†’ è‡ªåŠ¨åˆ é™¤è®¾å¤‡æ–‡ä»¶
```

### 5.2 udevå·¥ä½œæµç¨‹


**ğŸ“Š udevå·¥ä½œæœºåˆ¶**ï¼š
```
ç¡¬ä»¶äº‹ä»¶æµç¨‹ï¼š
è®¾å¤‡æ’å…¥ â†’ å†…æ ¸æ£€æµ‹ â†’ å‘é€uevent â†’ udevæ¥æ”¶ â†’ æ‰§è¡Œè§„åˆ™ â†’ åˆ›å»ºè®¾å¤‡æ–‡ä»¶

å®é™…ä¾‹å­ï¼š
Uç›˜æ’å…¥ â†’ å†…æ ¸è¯†åˆ«ä¸ºsdb â†’ udevåˆ›å»º/dev/sdb â†’ åº”ç”¨ç¨‹åºå¯è®¿é—®
```

**ASCIIæµç¨‹å›¾**ï¼š
```
è®¾å¤‡ç¡¬ä»¶     å†…æ ¸é©±åŠ¨     udevå®ˆæŠ¤è¿›ç¨‹     /devç›®å½•
    |           |             |              |
    |--æ’å…¥è®¾å¤‡->|             |              |
    |           |--å‘é€äº‹ä»¶--->|              |
    |           |             |--åˆ›å»ºæ–‡ä»¶--->|/dev/sdb
    |           |             |              |
    |--æ‹”å‡ºè®¾å¤‡->|             |              |
    |           |--å‘é€äº‹ä»¶--->|              |
    |           |             |--åˆ é™¤æ–‡ä»¶--->|åˆ é™¤/dev/sdb
```

### 5.3 udevé…ç½®ä¸è§„åˆ™


**ğŸ”§ udevè§„åˆ™æ–‡ä»¶ä½ç½®**ï¼š
```bash
# ç³»ç»Ÿé»˜è®¤è§„åˆ™
/lib/udev/rules.d/

# è‡ªå®šä¹‰è§„åˆ™ï¼ˆä¼˜å…ˆçº§æ›´é«˜ï¼‰
/etc/udev/rules.d/

# æŸ¥çœ‹è§„åˆ™æ–‡ä»¶
ls /lib/udev/rules.d/ | head -5
# è¾“å‡ºç¤ºä¾‹ï¼š
# 10-dm.rules
# 50-udev-default.rules  
# 60-persistent-storage.rules
```

**ç®€å•è§„åˆ™ç¤ºä¾‹**ï¼š
```bash
# åˆ›å»ºè‡ªå®šä¹‰è§„åˆ™
sudo nano /etc/udev/rules.d/99-my-usb.rules

# è§„åˆ™å†…å®¹ï¼ˆä¸ºç‰¹å®šUç›˜åˆ›å»ºå›ºå®šè®¾å¤‡åï¼‰
SUBSYSTEM=="block", ATTRS{idVendor}=="1234", ATTRS{idProduct}=="5678", SYMLINK+="my-usb"

# é‡æ–°åŠ è½½è§„åˆ™
sudo udevadm control --reload-rules
```

### 5.4 udevå¸¸ç”¨å‘½ä»¤


**å®ç”¨ç®¡ç†å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹è®¾å¤‡ä¿¡æ¯
udevadm info /dev/sda
udevadm info --query=all --name=sda

# è§¦å‘è®¾å¤‡äº‹ä»¶ï¼ˆé‡æ–°åŠ è½½ï¼‰
sudo udevadm trigger

# ç›‘æ§udeväº‹ä»¶
udevadm monitor

# æµ‹è¯•è§„åˆ™
udevadm test /sys/block/sda
```

**ğŸš€ å®é™…åº”ç”¨åœºæ™¯**ï¼š
- è‡ªåŠ¨æŒ‚è½½ç§»åŠ¨å­˜å‚¨è®¾å¤‡
- ä¸ºè®¾å¤‡åˆ›å»ºå‹å¥½çš„åˆ«å
- è®¾ç½®ç‰¹å®šè®¾å¤‡çš„æƒé™
- å“åº”è®¾å¤‡æ’æ‹”æ‰§è¡Œè„šæœ¬

---

## 6. ğŸ”’ è®¾å¤‡æ–‡ä»¶æƒé™ç®¡ç†


### 6.1 è®¾å¤‡æƒé™åŸºç¡€


> ğŸ’¡ **æƒé™æ§åˆ¶åŸç†**ï¼šè®¾å¤‡æ–‡ä»¶çš„æƒé™å†³å®šäº†è°èƒ½è®¿é—®ä»€ä¹ˆè®¾å¤‡

**æƒé™æŸ¥çœ‹ç¤ºä¾‹**ï¼š
```bash
ls -l /dev/sda*
brw-rw---- 1 root disk    8,   0 Sep 14 10:30 /dev/sda
brw-rw---- 1 root disk    8,   1 Sep 14 10:30 /dev/sda1
#||||||||| | |    |
#||||||||| | |    â””â”€â”€ æ‰€å±ç»„ (disk)
#||||||||| | â””â”€â”€ æ‰€æœ‰è€… (root)  
#||||||||| â””â”€â”€ é“¾æ¥æ•°
#||||||||â””â”€â”€ å…¶ä»–äººæƒé™ (---)
#|||||||â””â”€â”€â”€ ç»„æƒé™ (rw-)  
#||||||â””â”€â”€â”€â”€ æ‰€æœ‰è€…æƒé™ (rw-)
#|||||â””â”€â”€â”€â”€â”€ è®¾å¤‡ç±»å‹ (b=å—è®¾å¤‡)
```

### 6.2 å¸¸è§è®¾å¤‡æƒé™æ¨¡å¼


**ğŸ“‹ æƒé™åˆ†æå¯¹ç…§è¡¨**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¾å¤‡æ–‡ä»¶    â”‚ æƒé™    â”‚ è®¿é—®è¯´æ˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /dev/sda    â”‚ brw-rw----â”‚ rootå’Œdiskç»„è¯»å†™ â”‚
â”‚ /dev/tty    â”‚ crw-rw-rw-â”‚ æ‰€æœ‰ç”¨æˆ·è¯»å†™     â”‚
â”‚ /dev/random â”‚ crw-rw-rw-â”‚ æ‰€æœ‰ç”¨æˆ·è¯»å†™     â”‚
â”‚ /dev/mem    â”‚ crw-r-----â”‚ åªæœ‰rootè¯»å–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 æƒé™ç®¡ç†å®è·µ


**ğŸ”§ ä¿®æ”¹è®¾å¤‡æƒé™**ï¼š
```bash
# ä¿®æ”¹è®¾å¤‡æ–‡ä»¶æƒé™
sudo chmod 666 /dev/ttyS0  # å…è®¸æ‰€æœ‰ç”¨æˆ·è¯»å†™ä¸²å£

# ä¿®æ”¹è®¾å¤‡æ–‡ä»¶æ‰€æœ‰è€…
sudo chown user:dialout /dev/ttyS0

# æŸ¥çœ‹å½“å‰ç”¨æˆ·æ‰€å±ç»„
groups $USER
# å¦‚æœè¦è®¿é—®ç‰¹å®šè®¾å¤‡ï¼Œéœ€è¦åŠ å…¥å¯¹åº”ç»„
sudo usermod -a -G dialout $USER  # åŠ å…¥dialoutç»„è®¿é—®ä¸²å£
```

**âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹**ï¼š
```
âŒ å±é™©æ“ä½œï¼š
chmod 777 /dev/mem    # ç»™æ‰€æœ‰ç”¨æˆ·å†…å­˜è®¿é—®æƒé™
chmod 777 /dev/kmem   # ç»™æ‰€æœ‰ç”¨æˆ·å†…æ ¸å†…å­˜æƒé™

âœ… å®‰å…¨åšæ³•ï¼š
- åªç»™å¿…è¦çš„æœ€å°æƒé™
- é€šè¿‡ç”¨æˆ·ç»„ç®¡ç†æƒé™
- é¿å…ç›´æ¥ä¿®æ”¹ç³»ç»Ÿè®¾å¤‡æƒé™
```

### 6.4 æƒé™ç»„ç®¡ç†


**å¸¸è§ç³»ç»Ÿç»„åŠæƒé™**ï¼š
```bash
# æŸ¥çœ‹ç³»ç»Ÿç»„
cat /etc/group | grep -E "(disk|audio|video|dialout)"

# å¸¸è§æƒé™ç»„è¯´æ˜ï¼š
disk     # è®¿é—®ç£ç›˜è®¾å¤‡
audio    # è®¿é—®éŸ³é¢‘è®¾å¤‡  
video    # è®¿é—®è§†é¢‘è®¾å¤‡
dialout  # è®¿é—®ä¸²å£è®¾å¤‡
cdrom    # è®¿é—®å…‰ç›˜è®¾å¤‡
```

---

## 7. ğŸ”Œ è®¾å¤‡çƒ­æ’æ‹”å¤„ç†


### 7.1 çƒ­æ’æ‹”æ¦‚å¿µ


> ğŸ’¡ **çƒ­æ’æ‹”å®šä¹‰**ï¼šåœ¨ç³»ç»Ÿè¿è¡Œæ—¶æ’å…¥æˆ–æ‹”å‡ºè®¾å¤‡ï¼Œç³»ç»Ÿèƒ½è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†

**çƒ­æ’æ‹”è®¾å¤‡ç±»å‹**ï¼š
```
âœ… æ”¯æŒçƒ­æ’æ‹”ï¼š
- USBè®¾å¤‡ï¼ˆUç›˜ã€é¼ æ ‡ã€é”®ç›˜ï¼‰
- ç½‘ç»œæ¥å£
- SATAçƒ­æ’æ‹”ç¡¬ç›˜
- SDå¡
- è“ç‰™è®¾å¤‡

âŒ ä¸æ”¯æŒçƒ­æ’æ‹”ï¼š  
- å†…å­˜æ¡
- CPU
- ä¸»æ¿èŠ¯ç‰‡
- æŸäº›è€å¼IDEç¡¬ç›˜
```

### 7.2 çƒ­æ’æ‹”æ£€æµ‹æœºåˆ¶


**ğŸ” ç³»ç»Ÿæ£€æµ‹æµç¨‹**ï¼š
```
è®¾å¤‡æ’å…¥æ£€æµ‹ï¼š
ç‰©ç†æ’å…¥ â†’ ç¡¬ä»¶ä¿¡å· â†’ å†…æ ¸é©±åŠ¨ â†’ è®¾å¤‡è¯†åˆ« â†’ udevå¤„ç† â†’ ç”¨æˆ·ç©ºé—´é€šçŸ¥

å®é™…ä¾‹å­ï¼š
Uç›˜æ’å…¥ â†’ USBæ§åˆ¶å™¨æ£€æµ‹ â†’ USBé©±åŠ¨è¯†åˆ« â†’ åˆ†é…è®¾å¤‡å· â†’ åˆ›å»º/dev/sdb â†’ é€šçŸ¥æ¡Œé¢ç¯å¢ƒ
```

**å®æ—¶ç›‘æ§çƒ­æ’æ‹”**ï¼š
```bash
# ç›‘æ§å†…æ ¸æ¶ˆæ¯
dmesg -w
# æ’å…¥Uç›˜æ—¶ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# [12345.678] usb 2-1: new high-speed USB device number 3 using ehci-pci
# [12345.890] sd 8:0:0:0: [sdb] 15728640 512-byte logical blocks

# ç›‘æ§udeväº‹ä»¶
udevadm monitor
# æ’å…¥è®¾å¤‡æ—¶ä¼šæ˜¾ç¤ºè¯¦ç»†çš„è®¾å¤‡äº‹ä»¶ä¿¡æ¯
```

### 7.3 çƒ­æ’æ‹”äº‹ä»¶å¤„ç†


**ğŸ“ ç¼–å†™çƒ­æ’æ‹”å“åº”è„šæœ¬**ï¼š
```bash
# åˆ›å»ºUSBè®¾å¤‡æ’å…¥å“åº”è„šæœ¬
sudo nano /etc/udev/rules.d/99-usb-notify.rules

# è§„åˆ™å†…å®¹ï¼š
SUBSYSTEM=="block", KERNEL=="sd*", ACTION=="add", RUN+="/usr/local/bin/usb-inserted.sh %k"
SUBSYSTEM=="block", KERNEL=="sd*", ACTION=="remove", RUN+="/usr/local/bin/usb-removed.sh %k"

# åˆ›å»ºå“åº”è„šæœ¬
sudo nano /usr/local/bin/usb-inserted.sh
#!/bin/bash
echo "USB device $1 æ’å…¥æ—¶é—´: $(date)" >> /tmp/usb-log.txt
# å¯ä»¥æ·»åŠ è‡ªåŠ¨æŒ‚è½½ã€é€šçŸ¥ç”¨æˆ·ç­‰æ“ä½œ
```

### 7.4 å¸¸è§çƒ­æ’æ‹”é—®é¢˜å¤„ç†


**ğŸš« è®¾å¤‡æ— æ³•è¯†åˆ«**ï¼š
```bash
# æ£€æŸ¥USBè®¾å¤‡
lsusb
# å¦‚æœçœ‹ä¸åˆ°è®¾å¤‡ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶é—®é¢˜

# æ£€æŸ¥USBç«¯å£çŠ¶æ€  
ls /sys/bus/usb/devices/

# é‡æ–°æ‰«æUSBè®¾å¤‡
echo '1' | sudo tee /sys/bus/usb/devices/usb*/authorized
```

**âš ï¸ å®‰å…¨æ‹”å‡ºè®¾å¤‡**ï¼š
```bash
# æŸ¥çœ‹è®¾å¤‡æŒ‚è½½çŠ¶æ€
mount | grep sdb

# å¸è½½è®¾å¤‡ï¼ˆå¦‚æœå·²æŒ‚è½½ï¼‰
sudo umount /dev/sdb1

# åŒæ­¥æ•°æ®åˆ°è®¾å¤‡
sync

# å®‰å…¨ç§»é™¤ï¼ˆå¯é€‰ï¼‰
sudo eject /dev/sdb
```

---

## 8. ğŸ› ï¸ è®¾å¤‡æ–‡ä»¶åˆ›å»ºè§„åˆ™


### 8.1 è®¾å¤‡æ–‡ä»¶åˆ›å»ºæ–¹å¼


**ğŸ“‹ åˆ›å»ºæ–¹å¼å¯¹æ¯”**ï¼š
```
æ–¹å¼ä¸€ï¼šè‡ªåŠ¨åˆ›å»ºï¼ˆæ¨èï¼‰
udevè‡ªåŠ¨ç®¡ç† â†’ ç°ä»£Linuxç³»ç»Ÿé»˜è®¤æ–¹å¼
ä¼˜ç‚¹ï¼šè‡ªåŠ¨åŒ–ï¼ŒåŠ¨æ€ç®¡ç†
ç¼ºç‚¹ï¼šéœ€è¦ç†è§£udevè§„åˆ™

æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»º
ä½¿ç”¨mknodå‘½ä»¤ â†’ ä¼ ç»ŸUnixæ–¹å¼  
ä¼˜ç‚¹ï¼šç›´æ¥æ§åˆ¶ï¼Œç®€å•æ˜äº†
ç¼ºç‚¹ï¼šéœ€è¦æ‰‹åŠ¨ç»´æŠ¤
```

### 8.2 æ‰‹åŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶


**ğŸ”§ mknodå‘½ä»¤è¯¦è§£**ï¼š
```bash
# åŸºæœ¬è¯­æ³•
mknod è®¾å¤‡æ–‡ä»¶å è®¾å¤‡ç±»å‹ ä¸»è®¾å¤‡å· æ¬¡è®¾å¤‡å·

# åˆ›å»ºå­—ç¬¦è®¾å¤‡ç¤ºä¾‹
sudo mknod /dev/mychar c 10 200
#           â†‘        â†‘ â†‘  â†‘
#       è®¾å¤‡æ–‡ä»¶å   å­—ç¬¦ ä¸»å· æ¬¡å·

# åˆ›å»ºå—è®¾å¤‡ç¤ºä¾‹  
sudo mknod /dev/myblock b 8 10
#           â†‘         â†‘ â†‘ â†‘
#       è®¾å¤‡æ–‡ä»¶å    å— ä¸»å· æ¬¡å·

# éªŒè¯åˆ›å»ºç»“æœ
ls -l /dev/my*
crw-r--r-- 1 root root 10, 200 Sep 14 15:30 /dev/mychar
brw-r--r-- 1 root root  8,  10 Sep 14 15:30 /dev/myblock
```

### 8.3 è®¾å¤‡å·åˆ†é…è§„åˆ™


**ğŸ“Š è®¾å¤‡å·åˆ†é…åŸåˆ™**ï¼š
```bash
# æŸ¥çœ‹å·²åˆ†é…çš„è®¾å¤‡å·
cat /proc/devices

# åˆ†é…è§„åˆ™ï¼š
1. é¿å…ä¸ç°æœ‰è®¾å¤‡å†²çª
2. å­—ç¬¦è®¾å¤‡å’Œå—è®¾å¤‡å¯ä»¥ä½¿ç”¨ç›¸åŒä¸»è®¾å¤‡å·
3. æ¬¡è®¾å¤‡å·åœ¨ä¸»è®¾å¤‡å·èŒƒå›´å†…å”¯ä¸€
4. æŸäº›è®¾å¤‡å·èŒƒå›´æ˜¯ä¿ç•™çš„

# ç¤ºä¾‹ï¼šå®‰å…¨çš„è‡ªå®šä¹‰è®¾å¤‡å·
ä¸»è®¾å¤‡å·240-254ï¼šæœ¬åœ°å®éªŒä½¿ç”¨
ä¸»è®¾å¤‡å·60-63ï¼šæœ¬åœ°å®éªŒä½¿ç”¨
```

### 8.4 udevè§„åˆ™åˆ›å»ºè®¾å¤‡


**ğŸ“ é«˜çº§è®¾å¤‡åˆ›å»ºè§„åˆ™**ï¼š
```bash
# åˆ›å»ºè§„åˆ™æ–‡ä»¶
sudo nano /etc/udev/rules.d/99-custom-device.rules

# å¤æ‚è§„åˆ™ç¤ºä¾‹ï¼š
# ä¸ºç‰¹å®šå‚å•†çš„USBè®¾å¤‡åˆ›å»ºå›ºå®šè®¾å¤‡å
SUBSYSTEM=="usb", ATTRS{idVendor}=="1234", ATTRS{idProduct}=="5678", MODE="0666", SYMLINK+="my-usb-device"

# ä¸ºç½‘ç»œè®¾å¤‡é‡å‘½å
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:11:22:33:44:55", KERNEL=="eth*", NAME="lan0"

# è®¾ç½®è®¾å¤‡æƒé™å’Œæ‰€æœ‰è€…
KERNEL=="ttyUSB*", GROUP="dialout", MODE="0664"
```

**é‡æ–°åŠ è½½è§„åˆ™**ï¼š
```bash
# é‡æ–°åŠ è½½udevè§„åˆ™
sudo udevadm control --reload-rules

# è§¦å‘è§„åˆ™åº”ç”¨
sudo udevadm trigger

# æµ‹è¯•è§„åˆ™
sudo udevadm test /sys/class/net/eth0
```

---

## 9. âš¡ å­—ç¬¦è®¾å¤‡vså—è®¾å¤‡è¯¦è§£


### 9.1 æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”


> ğŸ’¡ **æœ¬è´¨åŒºåˆ«**ï¼šæ•°æ®å¤„ç†æ–¹å¼ä¸åŒ

**ğŸ”¸ å½¢è±¡æ¯”å–»**ï¼š
```
å­—ç¬¦è®¾å¤‡ = æ°´ç®¡
- æ°´æµæ˜¯è¿ç»­çš„ï¼Œä¸€æ»´ä¸€æ»´æµè¿‡
- æ— æ³•å›å¤´å–ä¹‹å‰çš„æ°´æ»´
- ä¾‹ï¼šé”®ç›˜è¾“å…¥ã€ä¸²å£é€šä¿¡

å—è®¾å¤‡ = å›¾ä¹¦é¦†ä¹¦æ¶  
- å¯ä»¥éšæ„ç¿»åˆ°ä»»ä½•ä¸€é¡µ
- å¯ä»¥åå¤æŸ¥çœ‹åŒä¸€é¡µå†…å®¹
- ä¾‹ï¼šç¡¬ç›˜ã€Uç›˜
```

### 9.2 è¯¦ç»†ç‰¹æ€§å¯¹æ¯”


**ğŸ“Š ç‰¹æ€§å¯¹æ¯”è¡¨**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰¹æ€§     â”‚ å­—ç¬¦è®¾å¤‡        â”‚ å—è®¾å¤‡          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è®¿é—®æ–¹å¼ â”‚ é¡ºåºè®¿é—®        â”‚ éšæœºè®¿é—®        â”‚
â”‚ æ•°æ®å•ä½ â”‚ å­—èŠ‚æµ          â”‚ æ•°æ®å—(512Bç­‰)  â”‚
â”‚ ç¼“å­˜     â”‚ ä¸æ”¯æŒç¼“å­˜      â”‚ æ”¯æŒç³»ç»Ÿç¼“å­˜    â”‚
â”‚ å®šä½     â”‚ æ— æ³•éšæœºå®šä½    â”‚ æ”¯æŒlseekå®šä½   â”‚
â”‚ æ–‡ä»¶ç³»ç»Ÿ â”‚ ä¸èƒ½æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿâ”‚ å¯ä»¥æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿâ”‚
â”‚ å…¸å‹åº”ç”¨ â”‚ ç»ˆç«¯ã€ä¸²å£ã€éŸ³é¢‘â”‚ ç¡¬ç›˜ã€å…‰ç›˜ã€Uç›˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 å®é™…æ“ä½œå¯¹æ¯”


**ğŸ”¬ å®éªŒéªŒè¯åŒºåˆ«**ï¼š
```bash
# å­—ç¬¦è®¾å¤‡å®éªŒï¼ˆç»ˆç«¯ï¼‰
echo "Hello" > /dev/tty1    # å‘ç»ˆç«¯1è¾“å‡ºï¼Œåªèƒ½å†™å…¥
cat < /dev/tty1             # ä»ç»ˆç«¯1è¯»å–ï¼Œåªèƒ½æŒ‰é¡ºåºè¯»

# å—è®¾å¤‡å®éªŒï¼ˆç¡¬ç›˜ï¼‰
dd if=/dev/zero of=/dev/sdb1 bs=512 count=1  # å†™å…¥ç¬¬ä¸€ä¸ªå—
dd if=/dev/sdb1 bs=512 skip=100 count=1      # éšæœºè¯»å–ç¬¬100ä¸ªå—
```

**âš ï¸ æ³¨æ„äº‹é¡¹**ï¼š
```
å­—ç¬¦è®¾å¤‡æ“ä½œï¼š
âœ… å¯ä»¥ï¼šechoã€catã€ç®¡é“æ“ä½œ
âŒ ä¸å¯ä»¥ï¼šmountã€fsckã€éšæœºè¯»å†™

å—è®¾å¤‡æ“ä½œï¼š
âœ… å¯ä»¥ï¼šmountã€fsckã€éšæœºè¯»å†™ã€åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ
âŒ æ³¨æ„ï¼šç›´æ¥å†™å…¥ä¼šç ´åæ–‡ä»¶ç³»ç»Ÿ
```

### 9.4 è®¾å¤‡ç±»å‹è¯†åˆ«å®è·µ


**ğŸ” å¿«é€Ÿè¯†åˆ«æ–¹æ³•**ï¼š
```bash
# æ–¹æ³•1ï¼šé€šè¿‡ls -læŸ¥çœ‹ç¬¬ä¸€ä¸ªå­—ç¬¦
ls -l /dev/sda    # bå¼€å¤´ = å—è®¾å¤‡
ls -l /dev/tty0   # cå¼€å¤´ = å­—ç¬¦è®¾å¤‡

# æ–¹æ³•2ï¼šä½¿ç”¨fileå‘½ä»¤
file /dev/sda     # è¾“å‡ºï¼šblock special
file /dev/tty0    # è¾“å‡ºï¼šcharacter special

# æ–¹æ³•3ï¼šé€šè¿‡è®¾å¤‡ç›®å½•åˆ†ç±»
ls /sys/class/block/    # åˆ—å‡ºæ‰€æœ‰å—è®¾å¤‡
ls /sys/class/tty/      # åˆ—å‡ºæ‰€æœ‰ttyå­—ç¬¦è®¾å¤‡
```

**ğŸ“ å®é™…åº”ç”¨åœºæ™¯**ï¼š
```
é€‰æ‹©å­—ç¬¦è®¾å¤‡ï¼š
- å®æ—¶æ•°æ®æµå¤„ç†
- ç”¨æˆ·äº¤äº’ï¼ˆç»ˆç«¯ã€é”®ç›˜ï¼‰
- ä¸²è¡Œé€šä¿¡
- éŸ³è§†é¢‘æµå¤„ç†

é€‰æ‹©å—è®¾å¤‡ï¼š
- æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
- æ•°æ®åº“å­˜å‚¨
- éœ€è¦éšæœºè®¿é—®çš„åœºæ™¯
- éœ€è¦ç¼“å­˜ä¼˜åŒ–çš„åº”ç”¨
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ è®¾å¤‡æ–‡ä»¶æœ¬è´¨ï¼šLinuxä¸­ç¡¬ä»¶è®¾å¤‡çš„æ–‡ä»¶åŒ–æ¥å£
ğŸ”¸ /devç›®å½•ï¼šè®¾å¤‡æ–‡ä»¶çš„ç»Ÿä¸€å­˜æ”¾ä½ç½®
ğŸ”¸ è®¾å¤‡ç±»å‹ï¼šå­—ç¬¦è®¾å¤‡(c)å’Œå—è®¾å¤‡(b)çš„åŒºåˆ«
ğŸ”¸ è®¾å¤‡å·ï¼šä¸»è®¾å¤‡å·(é©±åŠ¨ç±»å‹)+æ¬¡è®¾å¤‡å·(è®¾å¤‡å®ä¾‹)
ğŸ”¸ udevç®¡ç†ï¼šç°ä»£Linuxçš„åŠ¨æ€è®¾å¤‡ç®¡ç†æ–¹æ¡ˆ
ğŸ”¸ æƒé™æ§åˆ¶ï¼šé€šè¿‡æ–‡ä»¶æƒé™æ§åˆ¶è®¾å¤‡è®¿é—®
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ "ä¸€åˆ‡çš†æ–‡ä»¶"å“²å­¦çš„ä½“ç°**ï¼š
```
ç»Ÿä¸€æ¥å£ï¼š
- ä¸ç®¡æ˜¯é”®ç›˜è¿˜æ˜¯ç¡¬ç›˜ï¼Œéƒ½é€šè¿‡æ–‡ä»¶æ“ä½œè®¿é—®
- ç®€åŒ–äº†ç¨‹åºè®¾è®¡ï¼Œé™ä½äº†å­¦ä¹ æˆæœ¬
- æƒé™ç®¡ç†ç»Ÿä¸€ï¼Œå®‰å…¨æ€§æ›´å¥½

æŠ½è±¡å±‚æ¬¡ï¼š
åº”ç”¨ç¨‹åº â†’ è®¾å¤‡æ–‡ä»¶ â†’ é©±åŠ¨ç¨‹åº â†’ ç¡¬ä»¶è®¾å¤‡
æ¯å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£åˆ†å·¥
```

**ğŸ”¹ å­—ç¬¦è®¾å¤‡vså—è®¾å¤‡çš„é€‰æ‹©**ï¼š
```
åˆ¤æ–­æ ‡å‡†ï¼š
- éœ€è¦éšæœºè®¿é—®ï¼Ÿâ†’ å—è®¾å¤‡
- æ•°æ®æ˜¯æµå½¢å¼ï¼Ÿâ†’ å­—ç¬¦è®¾å¤‡  
- éœ€è¦æ–‡ä»¶ç³»ç»Ÿï¼Ÿâ†’ å—è®¾å¤‡
- å®æ—¶äº¤äº’åº”ç”¨ï¼Ÿâ†’ å­—ç¬¦è®¾å¤‡
```

**ğŸ”¹ udevçš„ç°ä»£åŒ–ç®¡ç†**ï¼š
```
åŠ¨æ€ä¼˜åŠ¿ï¼š
- èŠ‚çœç©ºé—´ï¼šåªåˆ›å»ºå®é™…å­˜åœ¨çš„è®¾å¤‡æ–‡ä»¶
- è‡ªåŠ¨åŒ–ï¼šæ’æ‹”è®¾å¤‡è‡ªåŠ¨å¤„ç†
- å¯å®šåˆ¶ï¼šé€šè¿‡è§„åˆ™æ–‡ä»¶çµæ´»é…ç½®
- æƒé™ç®¡ç†ï¼šè‡ªåŠ¨è®¾ç½®åˆé€‚çš„æƒé™
```

### 10.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ æ—¥å¸¸è¿ç»´åœºæ™¯**ï¼š
```
ç¡¬ç›˜ç®¡ç†ï¼š
- è¯†åˆ«ç¡¬ç›˜ï¼šls /dev/sd*
- æŸ¥çœ‹åˆ†åŒºï¼šlsblk, fdisk -l
- æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼šmount /dev/sda1 /mnt

ä¸²å£è°ƒè¯•ï¼š
- æŸ¥çœ‹ä¸²å£ï¼šls /dev/ttyS*
- è®¾ç½®æƒé™ï¼šsudo chmod 666 /dev/ttyS0
- æˆ–åŠ å…¥ç»„ï¼šsudo usermod -a -G dialout $USER

USBè®¾å¤‡ï¼š
- ç›‘æ§æ’æ‹”ï¼šudevadm monitor
- æŸ¥çœ‹è®¾å¤‡ï¼šlsusb, ls /dev/sd*
- å®‰å…¨ç§»é™¤ï¼šumount, sync, eject
```

**ğŸ”§ æ•…éšœæ’æŸ¥æ€è·¯**ï¼š
```
è®¾å¤‡æ— æ³•è®¿é—®ï¼š
1. æ£€æŸ¥è®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼šls /dev/è®¾å¤‡å
2. æ£€æŸ¥æƒé™ï¼šls -l /dev/è®¾å¤‡å
3. æ£€æŸ¥ç”¨æˆ·ç»„ï¼šgroups $USER
4. æ£€æŸ¥é©±åŠ¨ï¼šdmesg | grep è®¾å¤‡å…³é”®è¯

è®¾å¤‡æ–‡ä»¶ä¸¢å¤±ï¼š
1. æ£€æŸ¥udevçŠ¶æ€ï¼šsystemctl status udev
2. é‡æ–°è§¦å‘ï¼šsudo udevadm trigger
3. æ£€æŸ¥è§„åˆ™ï¼šls /etc/udev/rules.d/
4. æ‰‹åŠ¨åˆ›å»ºï¼šmknodï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
```

### 10.4 å®‰å…¨æœ€ä½³å®è·µ


**ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹**ï¼š
```
æƒé™ç®¡ç†ï¼š
âœ… ä½¿ç”¨ç”¨æˆ·ç»„ç®¡ç†æƒé™ï¼Œä¸è¦ç›´æ¥chmod 777
âœ… å®šæœŸæ£€æŸ¥æ•æ„Ÿè®¾å¤‡æƒé™(/dev/mem, /dev/kmem)
âœ… ä¸ºç‰¹å®šåº”ç”¨åˆ›å»ºä¸“ç”¨ç”¨æˆ·ç»„

è®¾å¤‡è®¿é—®ï¼š
âŒ é¿å…ç›´æ¥å‘å—è®¾å¤‡å†™å…¥æ•°æ®
âŒ ä¸è¦éšæ„ä¿®æ”¹ç³»ç»Ÿè®¾å¤‡æ–‡ä»¶æƒé™
âŒ è°¨æ…ä½¿ç”¨åŸå§‹è®¾å¤‡è®¿é—®

è§„åˆ™ç¼–å†™ï¼š
âœ… æµ‹è¯•è§„åˆ™åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
âœ… å¤‡ä»½åŸå§‹è§„åˆ™æ–‡ä»¶
âœ… ä½¿ç”¨æè¿°æ€§çš„è§„åˆ™æ–‡ä»¶å
```

**ğŸ“ å­¦ä¹ å»ºè®®**ï¼š
```
å®è·µæ­¥éª¤ï¼š
1. å…ˆç†è§£æ¦‚å¿µï¼šè®¾å¤‡æ–‡ä»¶ã€è®¾å¤‡å·ã€å­—ç¬¦vså—è®¾å¤‡
2. è§‚å¯Ÿå®é™…è®¾å¤‡ï¼šls /dev/ï¼Œç†è§£å‘½åè§„åˆ™
3. ç»ƒä¹ åŸºæœ¬æ“ä½œï¼šæŸ¥çœ‹è®¾å¤‡ä¿¡æ¯ã€ä¿®æ”¹æƒé™
4. å­¦ä¹ udevï¼šç›‘æ§äº‹ä»¶ã€ç¼–å†™ç®€å•è§„åˆ™
5. è§£å†³å®é™…é—®é¢˜ï¼šUSBä¸è¯†åˆ«ã€ä¸²å£æ— æƒé™ç­‰
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- è®¾å¤‡çš†æ–‡ä»¶ï¼Œ/devæ˜¯ç»Ÿä¸€é—¨æˆ·
- å­—ç¬¦æµå¼è®¿é—®ï¼Œå—è®¾å¤‡å¯éšæœº
- ä¸»å·åˆ†ç±»å‹ï¼Œæ¬¡å·å®šå®ä¾‹
- udevåŠ¨æ€ç®¡ï¼Œæƒé™ç»„ç®¡ç†
- çƒ­æ’æ‹”é udevï¼Œè§„åˆ™è¦åˆç†