---
title: 8ã€ç”Ÿäº§ç¯å¢ƒç›‘æ§æ¡ˆä¾‹
---
## ğŸ“š ç›®å½•

1. [æ—¥å¿—æ–‡ä»¶è½®è½¬ç›‘æ§](#1-æ—¥å¿—æ–‡ä»¶è½®è½¬ç›‘æ§)
2. [é…ç½®æ–‡ä»¶å˜æ›´æ£€æµ‹](#2-é…ç½®æ–‡ä»¶å˜æ›´æ£€æµ‹)
3. [ä¸Šä¼ ç›®å½•æ–‡ä»¶å¤„ç†](#3-ä¸Šä¼ ç›®å½•æ–‡ä»¶å¤„ç†)
4. [Webç›®å½•å®‰å…¨ç›‘æ§](#4-Webç›®å½•å®‰å…¨ç›‘æ§)
5. [æ•°æ®åº“æ–‡ä»¶å˜æ›´è·Ÿè¸ª](#5-æ•°æ®åº“æ–‡ä»¶å˜æ›´è·Ÿè¸ª)
6. [å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥](#6-å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥)
7. [ç³»ç»Ÿé…ç½®å®æ—¶åŒæ­¥](#7-ç³»ç»Ÿé…ç½®å®æ—¶åŒæ­¥)
8. [æ–‡ä»¶æƒé™å¼‚å¸¸å‘Šè­¦](#8-æ–‡ä»¶æƒé™å¼‚å¸¸å‘Šè­¦)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“ æ—¥å¿—æ–‡ä»¶è½®è½¬ç›‘æ§


### 1.1 ä»€ä¹ˆæ˜¯æ—¥å¿—è½®è½¬ç›‘æ§


**ç®€å•ç†è§£**ï¼šå°±åƒå®¶é‡Œçš„åƒåœ¾æ¡¶æ»¡äº†è¦å€’æ‰ä¸€æ ·ï¼ŒæœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦å®šæœŸ"æ‰“åŒ…"æ—§çš„ï¼Œåˆ›å»ºæ–°çš„ã€‚æˆ‘ä»¬è¦ç›‘æ§è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦æ­£å¸¸ã€‚

```
æ—¥å¿—è½®è½¬è¿‡ç¨‹ï¼š
access.log (å½“å‰)  â†’  access.log.1 (æ˜¨å¤©)
    â†“                      â†“
æ–°çš„access.log         access.log.1.gz (å‹ç¼©)
```

**ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§**ï¼š
- ğŸ”¸ ç¡®ä¿æ—¥å¿—è½®è½¬æ­£å¸¸å·¥ä½œ
- ğŸ”¸ é˜²æ­¢æ—¥å¿—æ–‡ä»¶è¿‡å¤§æ’‘çˆ†ç£ç›˜
- ğŸ”¸ åŠæ—¶å‘ç°è½®è½¬å¤±è´¥çš„é—®é¢˜
- ğŸ”¸ ä¿è¯æ—¥å¿—åˆ†æçš„è¿ç»­æ€§

### 1.2 Nginxæ—¥å¿—è½®è½¬ç›‘æ§å®ç°


**ç›‘æ§è„šæœ¬è®¾è®¡**ï¼š
```bash
#!/bin/bash
# nginx-logrotate-monitor.sh

LOG_DIR="/var/log/nginx"
ALERT_EMAIL="admin@company.com"

# ç›‘æ§æ—¥å¿—è½®è½¬
inotifywait -m -e moved_to,create,delete "$LOG_DIR" \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    case "$event" in
        "MOVED_TO")
            if [[ "$file" == *.log.1 ]]; then
                echo "[$time] æ—¥å¿—è½®è½¬å®Œæˆ: $file"
                # æ£€æŸ¥æ–°æ—¥å¿—æ–‡ä»¶æ˜¯å¦åˆ›å»º
                check_new_log "$file"
            fi
            ;;
        "CREATE")
            if [[ "$file" == *.log ]]; then
                echo "[$time] æ–°æ—¥å¿—æ–‡ä»¶åˆ›å»º: $file"
            fi
            ;;
        "DELETE")
            echo "[$time] è­¦å‘Šï¼šæ—¥å¿—æ–‡ä»¶è¢«åˆ é™¤: $file" | mail -s "æ—¥å¿—æ–‡ä»¶åˆ é™¤è­¦å‘Š" "$ALERT_EMAIL"
            ;;
    esac
done
```

**æ£€æŸ¥å‡½æ•°**ï¼š
```bash
check_new_log() {
    local rotated_log="$1"
    local current_log="${rotated_log%.1}"
    
    # ç­‰å¾…5ç§’è®©ç³»ç»Ÿå®Œæˆæ“ä½œ
    sleep 5
    
    if [[ ! -f "$current_log" ]]; then
        echo "é”™è¯¯ï¼šè½®è½¬åæœªåˆ›å»ºæ–°æ—¥å¿—æ–‡ä»¶ $current_log"
        echo "æ—¥å¿—è½®è½¬å¼‚å¸¸ï¼š$current_log æœªåˆ›å»º" | \
        mail -s "æ—¥å¿—è½®è½¬å¤±è´¥" "$ALERT_EMAIL"
    else
        echo "æ­£å¸¸ï¼šæ–°æ—¥å¿—æ–‡ä»¶å·²åˆ›å»º $current_log"
    fi
}
```

### 1.3 Apacheæ—¥å¿—è½®è½¬ç›‘æ§


**incroné…ç½®**ï¼š
```bash
# /etc/incron.d/apache-logrotate
/var/log/apache2 IN_MOVED_TO,IN_CREATE /usr/local/bin/apache-log-monitor.sh $@/$# $%
```

**ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# apache-log-monitor.sh

file="$1"
event="$2"
timestamp=$(date '+%Y-%m-%d %H:%M:%S')

case "$event" in
    "IN_MOVED_TO")
        if [[ "$file" =~ \.log\.[0-9]+$ ]]; then
            echo "[$timestamp] Apacheæ—¥å¿—è½®è½¬: $file"
            
            # éªŒè¯å‹ç¼©æ˜¯å¦æˆåŠŸ
            if [[ -f "$file.gz" ]]; then
                echo "[$timestamp] æ—¥å¿—å‹ç¼©æˆåŠŸ: $file.gz"
            else
                echo "[$timestamp] è­¦å‘Šï¼šæ—¥å¿—æœªå‹ç¼© $file"
            fi
        fi
        ;;
    "IN_CREATE")
        echo "[$timestamp] Apacheæ–°æ—¥å¿—åˆ›å»º: $file"
        ;;
esac
```

---

## 2. âš™ï¸ é…ç½®æ–‡ä»¶å˜æ›´æ£€æµ‹


### 2.1 é…ç½®æ–‡ä»¶ç›‘æ§çš„é‡è¦æ€§


**ç”Ÿæ´»ä¾‹å­**ï¼šå°±åƒå®¶é‡Œçš„ç”µå™¨è¯´æ˜ä¹¦ï¼Œå¦‚æœæœ‰äººæ”¹åŠ¨äº†ï¼Œä½ å¾—çŸ¥é“æ”¹äº†ä»€ä¹ˆï¼Œä¸ç„¶å‡ºé—®é¢˜å°±ä¸çŸ¥é“åŸå› äº†ã€‚

**ç›‘æ§ç›®æ ‡**ï¼š
- ğŸ”¸ **ç³»ç»Ÿé…ç½®**ï¼š`/etc/` ç›®å½•ä¸‹çš„é‡è¦é…ç½®
- ğŸ”¸ **åº”ç”¨é…ç½®**ï¼šNginxã€Apacheã€MySQLç­‰é…ç½®æ–‡ä»¶
- ğŸ”¸ **å®‰å…¨é…ç½®**ï¼šé˜²ç«å¢™ã€æƒé™ç›¸å…³é…ç½®
- ğŸ”¸ **ç½‘ç»œé…ç½®**ï¼šç½‘ç»œæ¥å£ã€è·¯ç”±é…ç½®

### 2.2 ç³»ç»Ÿé…ç½®æ–‡ä»¶ç›‘æ§


**å…³é”®é…ç½®æ–‡ä»¶åˆ—è¡¨**ï¼š
```bash
# éœ€è¦ç›‘æ§çš„é…ç½®æ–‡ä»¶
CRITICAL_CONFIGS=(
    "/etc/passwd"           # ç”¨æˆ·è´¦æˆ·
    "/etc/shadow"           # å¯†ç æ–‡ä»¶
    "/etc/sudoers"          # sudoæƒé™
    "/etc/ssh/sshd_config"  # SSHé…ç½®
    "/etc/hosts"            # ä¸»æœºæ˜ å°„
    "/etc/fstab"            # æ–‡ä»¶ç³»ç»ŸæŒ‚è½½
    "/etc/crontab"          # å®šæ—¶ä»»åŠ¡
)
```

**ç›‘æ§å®ç°è„šæœ¬**ï¼š
```bash
#!/bin/bash
# config-change-monitor.sh

BACKUP_DIR="/var/backups/config-changes"
LOG_FILE="/var/log/config-changes.log"

mkdir -p "$BACKUP_DIR"

# ç›‘æ§é…ç½®æ–‡ä»¶å˜æ›´
inotifywait -m -r -e modify,attrib /etc \
--exclude '(\.tmp|\.swp|\.log)$' \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    # è®°å½•å˜æ›´
    echo "[$time] $file $event" >> "$LOG_FILE"
    
    # å¤‡ä»½å˜æ›´çš„æ–‡ä»¶
    backup_config "$file" "$time"
    
    # æ£€æŸ¥æ˜¯å¦ä¸ºå…³é”®é…ç½®
    check_critical_config "$file" "$event" "$time"
done
```

**å¤‡ä»½å’Œé€šçŸ¥å‡½æ•°**ï¼š
```bash
backup_config() {
    local file="$1"
    local time="$2"
    local backup_name="${file//\//_}_${time// /_}"
    
    if [[ -f "$file" ]]; then
        cp "$file" "$BACKUP_DIR/$backup_name"
        echo "é…ç½®æ–‡ä»¶å·²å¤‡ä»½: $backup_name"
    fi
}

check_critical_config() {
    local file="$1"
    local event="$2"
    local time="$3"
    
    for critical in "${CRITICAL_CONFIGS[@]}"; do
        if [[ "$file" == "$critical" ]]; then
            alert_msg="å…³é”®é…ç½®æ–‡ä»¶å˜æ›´: $file åœ¨ $time"
            echo "$alert_msg" | mail -s "é…ç½®å˜æ›´è­¦å‘Š" admin@company.com
            logger -p auth.warning "$alert_msg"
            break
        fi
    done
}
```

### 2.3 åº”ç”¨é…ç½®ç›‘æ§æ¡ˆä¾‹


**Nginxé…ç½®ç›‘æ§**ï¼š
```bash
#!/bin/bash
# nginx-config-monitor.sh

NGINX_CONFIG="/etc/nginx/nginx.conf"
NGINX_SITES="/etc/nginx/sites-enabled"

monitor_nginx_config() {
    inotifywait -m -e modify,move,create,delete "$NGINX_CONFIG" "$NGINX_SITES" | \
    while read path event file; do
        echo "Nginxé…ç½®å˜æ›´: $path$file $event"
        
        # æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•
        if nginx -t 2>/dev/null; then
            echo "é…ç½®è¯­æ³•æ­£ç¡®"
            # è‡ªåŠ¨é‡è½½é…ç½®
            systemctl reload nginx
            echo "Nginxé…ç½®å·²é‡è½½"
        else
            echo "é…ç½®è¯­æ³•é”™è¯¯ï¼" | mail -s "Nginxé…ç½®é”™è¯¯" admin@company.com
        fi
    done
}
```

---

## 3. ğŸ“ ä¸Šä¼ ç›®å½•æ–‡ä»¶å¤„ç†


### 3.1 ä¸Šä¼ ç›®å½•ç›‘æ§åŸç†


**ç”Ÿæ´»åœºæ™¯**ï¼šå°±åƒå¿«é€’æ”¶å‘å®¤ï¼Œæœ‰åŒ…è£¹åˆ°è¾¾å°±è¦åŠæ—¶å¤„ç†ï¼Œæ£€æŸ¥ã€åˆ†ç±»ã€å­˜å‚¨ã€‚

```
æ–‡ä»¶ä¸Šä¼ å¤„ç†æµç¨‹ï¼š
ç”¨æˆ·ä¸Šä¼  â†’ ä¸´æ—¶ç›®å½• â†’ å®‰å…¨æ£€æŸ¥ â†’ åˆ†ç±»å¤„ç† â†’ æœ€ç»ˆå­˜å‚¨
    â†“          â†“          â†“        â†“        â†“
  ç›‘æ§ç‚¹1    ç›‘æ§ç‚¹2    ç›‘æ§ç‚¹3   ç›‘æ§ç‚¹4   ç›‘æ§ç‚¹5
```

### 3.2 Webä¸Šä¼ ç›®å½•ç›‘æ§


**ç›‘æ§è„šæœ¬æ¡†æ¶**ï¼š
```bash
#!/bin/bash
# upload-monitor.sh

UPLOAD_DIR="/var/www/uploads"
PROCESS_DIR="/var/www/processing"
FINAL_DIR="/var/www/files"
QUARANTINE_DIR="/var/www/quarantine"

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p "$PROCESS_DIR" "$FINAL_DIR" "$QUARANTINE_DIR"

# ç›‘æ§ä¸Šä¼ ç›®å½•
inotifywait -m -e close_write,moved_to "$UPLOAD_DIR" \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    echo "[$time] æ£€æµ‹åˆ°æ–‡ä»¶: $file ($event)"
    
    # å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶
    process_uploaded_file "$file" "$time"
done
```

**æ–‡ä»¶å¤„ç†å‡½æ•°**ï¼š
```bash
process_uploaded_file() {
    local file="$1"
    local time="$2"
    local filename=$(basename "$file")
    
    # åŸºæœ¬æ£€æŸ¥
    if [[ ! -f "$file" ]]; then
        echo "æ–‡ä»¶ä¸å­˜åœ¨: $file"
        return 1
    fi
    
    # æ–‡ä»¶å¤§å°æ£€æŸ¥
    local size=$(stat -f%z "$file" 2>/dev/null || stat -c%s "$file")
    if [[ $size -gt 10485760 ]]; then  # 10MB
        echo "æ–‡ä»¶è¿‡å¤§: $filename ($size bytes)"
        mv "$file" "$QUARANTINE_DIR/"
        return 1
    fi
    
    # æ–‡ä»¶ç±»å‹æ£€æŸ¥
    check_file_type "$file" "$filename"
}

check_file_type() {
    local file="$1"
    local filename="$2"
    local filetype=$(file -b --mime-type "$file")
    
    case "$filetype" in
        "image/jpeg"|"image/png"|"image/gif")
            process_image "$file" "$filename"
            ;;
        "application/pdf")
            process_pdf "$file" "$filename"
            ;;
        "text/plain")
            process_text "$file" "$filename"
            ;;
        *)
            echo "æœªçŸ¥æ–‡ä»¶ç±»å‹: $filetype"
            mv "$file" "$QUARANTINE_DIR/"
            ;;
    esac
}
```

### 3.3 æ–‡ä»¶å®‰å…¨æ£€æŸ¥


**ç—…æ¯’æ‰«æé›†æˆ**ï¼š
```bash
scan_virus() {
    local file="$1"
    
    # ä½¿ç”¨ClamAVæ‰«æ
    if command -v clamscan >/dev/null; then
        if clamscan "$file" | grep -q "FOUND"; then
            echo "å‘ç°ç—…æ¯’: $file"
            mv "$file" "$QUARANTINE_DIR/"
            echo "ç—…æ¯’æ–‡ä»¶å·²éš”ç¦»: $file" | mail -s "ç—…æ¯’è­¦å‘Š" security@company.com
            return 1
        fi
    fi
    return 0
}
```

**æ¶æ„è„šæœ¬æ£€æµ‹**ï¼š
```bash
check_malicious_content() {
    local file="$1"
    
    # æ£€æŸ¥PHPæ¶æ„ä»£ç 
    if [[ "$file" == *.php ]]; then
        if grep -q "eval\|exec\|system\|passthru" "$file"; then
            echo "å‘ç°å¯ç–‘PHPä»£ç : $file"
            mv "$file" "$QUARANTINE_DIR/"
            return 1
        fi
    fi
    
    # æ£€æŸ¥JavaScriptæ¶æ„ä»£ç 
    if [[ "$file" == *.js ]]; then
        if grep -q "document\.write\|eval\|unescape" "$file"; then
            echo "å‘ç°å¯ç–‘JavaScriptä»£ç : $file"
            mv "$file" "$QUARANTINE_DIR/"
            return 1
        fi
    fi
    
    return 0
}
```

---

## 4. ğŸ”’ Webç›®å½•å®‰å…¨ç›‘æ§


### 4.1 Webç›®å½•å®‰å…¨å¨èƒ


**å¸¸è§å®‰å…¨é—®é¢˜**ï¼š
- ğŸ”¸ **æ¶æ„æ–‡ä»¶ä¸Šä¼ **ï¼šPHPæœ¨é©¬ã€åé—¨è„šæœ¬
- ğŸ”¸ **æ–‡ä»¶ç¯¡æ”¹**ï¼šç½‘é¡µè¢«æ¤å…¥æ¶æ„ä»£ç 
- ğŸ”¸ **æƒé™å¼‚å¸¸**ï¼šæ–‡ä»¶æƒé™è¢«æ¶æ„ä¿®æ”¹
- ğŸ”¸ **æ•æ„Ÿæ–‡ä»¶æ³„éœ²**ï¼šé…ç½®æ–‡ä»¶ã€æ•°æ®åº“æ–‡ä»¶

### 4.2 Webæ ¹ç›®å½•ç›‘æ§


**å®Œæ•´ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# web-security-monitor.sh

WEB_ROOT="/var/www/html"
BACKUP_DIR="/var/backups/web"
ALERT_EMAIL="security@company.com"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_DIR"

# ç›‘æ§Webç›®å½•
inotifywait -m -r -e create,modify,delete,attrib "$WEB_ROOT" \
--exclude '(\.tmp|\.swp|access\.log|error\.log)$' \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    
    echo "[$time] Webæ–‡ä»¶å˜æ›´: $file ($event)"
    
    case "$event" in
        "CREATE"|"MODIFY")
            check_web_file_security "$file" "$event" "$time"
            ;;
        "DELETE")
            log_file_deletion "$file" "$time"
            ;;
        "ATTRIB")
            check_permission_change "$file" "$time"
            ;;
    esac
done
```

**å®‰å…¨æ£€æŸ¥å‡½æ•°**ï¼š
```bash
check_web_file_security() {
    local file="$1"
    local event="$2"
    local time="$3"
    
    # æ£€æŸ¥æ–‡ä»¶æ‰©å±•å
    case "${file##*.}" in
        "php"|"jsp"|"asp"|"aspx")
            check_script_file "$file" "$time"
            ;;
        "html"|"htm")
            check_html_file "$file" "$time"
            ;;
        "js")
            check_javascript_file "$file" "$time"
            ;;
    esac
    
    # å¤‡ä»½é‡è¦æ–‡ä»¶
    if [[ "$event" == "MODIFY" ]]; then
        backup_modified_file "$file" "$time"
    fi
}

check_script_file() {
    local file="$1"
    local time="$2"
    
    if [[ -f "$file" ]]; then
        # æ£€æŸ¥å±é™©å‡½æ•°
        if grep -q "eval\|exec\|system\|passthru\|shell_exec" "$file"; then
            alert_msg="å‘ç°å¯ç–‘è„šæœ¬æ–‡ä»¶: $file åŒ…å«å±é™©å‡½æ•°"
            echo "[$time] $alert_msg"
            echo "$alert_msg" | mail -s "Webå®‰å…¨è­¦å‘Š" "$ALERT_EMAIL"
            
            # ä¸´æ—¶ç¦ç”¨æ–‡ä»¶
            chmod 000 "$file"
        fi
        
        # æ£€æŸ¥base64ç¼–ç çš„å¯ç–‘å†…å®¹
        if grep -q "base64_decode\|eval(base64" "$file"; then
            echo "[$time] è­¦å‘Š: $file åŒ…å«base64è§£ç ï¼Œå¯èƒ½æ˜¯æ¶æ„ä»£ç "
        fi
    fi
}
```

### 4.3 æ–‡ä»¶å®Œæ•´æ€§ç›‘æ§


**MD5æ ¡éªŒç›‘æ§**ï¼š
```bash
#!/bin/bash
# web-integrity-monitor.sh

CHECKSUM_FILE="/var/log/web-checksums.txt"
WEB_ROOT="/var/www/html"

# åˆå§‹åŒ–æ ¡éªŒå’Œæ–‡ä»¶
init_checksums() {
    echo "åˆå§‹åŒ–Webæ–‡ä»¶æ ¡éªŒå’Œ..."
    find "$WEB_ROOT" -type f -name "*.php" -o -name "*.html" -o -name "*.js" -o -name "*.css" | \
    while read file; do
        md5sum "$file" >> "$CHECKSUM_FILE"
    done
}

# æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
check_integrity() {
    local file="$1"
    local current_sum=$(md5sum "$file" 2>/dev/null | cut -d' ' -f1)
    local stored_sum=$(grep "$file" "$CHECKSUM_FILE" 2>/dev/null | cut -d' ' -f1)
    
    if [[ -n "$stored_sum" && "$current_sum" != "$stored_sum" ]]; then
        echo "æ–‡ä»¶è¢«ç¯¡æ”¹: $file"
        echo "åŸå§‹MD5: $stored_sum"
        echo "å½“å‰MD5: $current_sum"
        
        # å‘é€è­¦å‘Š
        echo "Webæ–‡ä»¶è¢«ç¯¡æ”¹: $file" | mail -s "æ–‡ä»¶å®Œæ•´æ€§è­¦å‘Š" security@company.com
        
        # æ›´æ–°æ ¡éªŒå’Œ
        sed -i "s|$stored_sum  $file|$current_sum  $file|" "$CHECKSUM_FILE"
    fi
}
```

---

## 5. ğŸ—„ï¸ æ•°æ®åº“æ–‡ä»¶å˜æ›´è·Ÿè¸ª


### 5.1 æ•°æ®åº“æ–‡ä»¶ç›‘æ§çš„æ„ä¹‰


**ç®€å•ç†è§£**ï¼šæ•°æ®åº“æ–‡ä»¶å°±åƒé“¶è¡Œçš„é‡‘åº“ï¼Œä»»ä½•å˜åŠ¨éƒ½è¦è®°å½•åœ¨æ¡ˆï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚

**ç›‘æ§å¯¹è±¡**ï¼š
- ğŸ”¸ **æ•°æ®æ–‡ä»¶**ï¼š`.frm`ã€`.ibd`ã€`.MYD`ç­‰
- ğŸ”¸ **æ—¥å¿—æ–‡ä»¶**ï¼š`binlog`ã€`error log`ã€`slow log`
- ğŸ”¸ **é…ç½®æ–‡ä»¶**ï¼š`my.cnf`ã€`mysql.conf.d`
- ğŸ”¸ **å¤‡ä»½æ–‡ä»¶**ï¼šæ•°æ®åº“å¤‡ä»½æ–‡ä»¶

### 5.2 MySQLæ–‡ä»¶ç›‘æ§å®ç°


**ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# mysql-files-monitor.sh

MYSQL_DATA_DIR="/var/lib/mysql"
MYSQL_LOG_DIR="/var/log/mysql"
MYSQL_CONFIG="/etc/mysql/my.cnf"

# ç›‘æ§MySQLæ•°æ®ç›®å½•
monitor_mysql_data() {
    inotifywait -m -r -e create,delete,modify "$MYSQL_DATA_DIR" \
    --exclude '(\.tmp|binlog\.index|relay-log\.info)$' \
    --format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
    while read file event time; do
        
        case "$event" in
            "CREATE")
                if [[ "$file" == *.frm ]]; then
                    echo "[$time] æ–°è¡¨åˆ›å»º: $file"
                elif [[ "$file" == *.ibd ]]; then
                    echo "[$time] æ–°æ•°æ®æ–‡ä»¶: $file"
                fi
                ;;
            "DELETE")
                echo "[$time] è­¦å‘Š: æ•°æ®åº“æ–‡ä»¶åˆ é™¤ $file"
                log_database_change "$file" "DELETE" "$time"
                ;;
            "MODIFY")
                # å¿½ç•¥é¢‘ç¹çš„æ—¥å¿—æ–‡ä»¶ä¿®æ”¹
                if [[ "$file" != *binlog* && "$file" != *relay-log* ]]; then
                    echo "[$time] æ•°æ®åº“æ–‡ä»¶ä¿®æ”¹: $file"
                fi
                ;;
        esac
    done
}

log_database_change() {
    local file="$1"
    local action="$2"
    local time="$3"
    
    echo "[$time] DATABASE_CHANGE: $action $file" >> /var/log/mysql-changes.log
    
    # é‡è¦å˜æ›´å‘é€é‚®ä»¶
    if [[ "$action" == "DELETE" ]]; then
        echo "MySQLæ•°æ®åº“æ–‡ä»¶è¢«åˆ é™¤: $file" | \
        mail -s "æ•°æ®åº“æ–‡ä»¶åˆ é™¤è­¦å‘Š" dba@company.com
    fi
}
```

### 5.3 æ•°æ®åº“å¤‡ä»½ç›‘æ§


**å¤‡ä»½å®Œæˆç›‘æ§**ï¼š
```bash
#!/bin/bash
# backup-monitor.sh

BACKUP_DIR="/var/backups/mysql"
EXPECTED_BACKUP_TIME="02:00"  # é¢„æœŸå¤‡ä»½æ—¶é—´

# ç›‘æ§å¤‡ä»½ç›®å½•
inotifywait -m -e close_write "$BACKUP_DIR" \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    
    if [[ "$file" == *.sql* ]]; then
        echo "[$time] å¤‡ä»½æ–‡ä»¶åˆ›å»º: $file"
        
        # æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å¤§å°
        check_backup_size "$file"
        
        # æµ‹è¯•å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
        test_backup_integrity "$file"
    fi
done

check_backup_size() {
    local backup_file="$1"
    local size=$(stat -c%s "$backup_file")
    
    # å¤‡ä»½æ–‡ä»¶ä¸èƒ½å¤ªå°ï¼ˆå°äº1MBå¯èƒ½æœ‰é—®é¢˜ï¼‰
    if [[ $size -lt 1048576 ]]; then
        echo "è­¦å‘Š: å¤‡ä»½æ–‡ä»¶è¿‡å° $backup_file ($size bytes)"
        echo "MySQLå¤‡ä»½æ–‡ä»¶å¼‚å¸¸å°: $backup_file" | \
        mail -s "å¤‡ä»½å¼‚å¸¸è­¦å‘Š" dba@company.com
    else
        echo "å¤‡ä»½æ–‡ä»¶å¤§å°æ­£å¸¸: $backup_file ($(($size/1024/1024))MB)"
    fi
}
```

---

## 6. ğŸ›¡ï¸ å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥


### 6.1 å¤‡ä»½æ–‡ä»¶ç›‘æ§ç­–ç•¥


**ç›‘æ§æ€è·¯**ï¼šå°±åƒéªŒé’æœºæ£€æŸ¥é’±çš„çœŸå‡ä¸€æ ·ï¼Œå¤‡ä»½æ–‡ä»¶ä¹Ÿè¦æ£€æŸ¥æ˜¯å¦å®Œæ•´å¯ç”¨ã€‚

**æ£€æŸ¥é¡¹ç›®**ï¼š
- ğŸ”¸ **æ–‡ä»¶å¤§å°**ï¼šæ˜¯å¦ç¬¦åˆé¢„æœŸèŒƒå›´
- ğŸ”¸ **æ–‡ä»¶æ ¼å¼**ï¼šå‹ç¼©æ–‡ä»¶æ˜¯å¦æŸå
- ğŸ”¸ **æ ¡éªŒå’Œ**ï¼šæ–‡ä»¶ä¼ è¾“æ˜¯å¦å®Œæ•´
- ğŸ”¸ **å¯æ¢å¤æ€§**ï¼šå¤‡ä»½æ˜¯å¦èƒ½æ­£å¸¸æ¢å¤

### 6.2 å¤‡ä»½å®Œæ•´æ€§ç›‘æ§è„šæœ¬


```bash
#!/bin/bash
# backup-integrity-monitor.sh

BACKUP_DIR="/var/backups"
CHECKSUM_DIR="/var/backups/checksums"
LOG_FILE="/var/log/backup-integrity.log"

mkdir -p "$CHECKSUM_DIR"

# ç›‘æ§å¤‡ä»½æ–‡ä»¶å˜åŒ–
inotifywait -m -r -e close_write,moved_to "$BACKUP_DIR" \
--exclude '(checksums|\.tmp|\.partial)$' \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    
    echo "[$time] å¤‡ä»½æ–‡ä»¶äº‹ä»¶: $file ($event)"
    
    # ç­‰å¾…æ–‡ä»¶å†™å…¥å®Œæˆ
    sleep 2
    
    # éªŒè¯å¤‡ä»½æ–‡ä»¶
    verify_backup_file "$file" "$time"
done

verify_backup_file() {
    local file="$1"
    local time="$2"
    local filename=$(basename "$file")
    
    echo "[$time] å¼€å§‹éªŒè¯å¤‡ä»½æ–‡ä»¶: $filename" >> "$LOG_FILE"
    
    # 1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯è¯»
    if [[ ! -r "$file" ]]; then
        log_error "$time" "æ–‡ä»¶ä¸å¯è¯»: $file"
        return 1
    fi
    
    # 2. æ£€æŸ¥æ–‡ä»¶å¤§å°
    check_backup_size "$file" "$time"
    
    # 3. æ ¹æ®æ–‡ä»¶ç±»å‹è¿›è¡Œç‰¹å®šæ£€æŸ¥
    case "$file" in
        *.tar.gz|*.tgz)
            verify_tarball "$file" "$time"
            ;;
        *.zip)
            verify_zip "$file" "$time"
            ;;
        *.sql)
            verify_sql_backup "$file" "$time"
            ;;
        *)
            echo "[$time] æœªçŸ¥å¤‡ä»½æ–‡ä»¶ç±»å‹: $file"
            ;;
    esac
    
    # 4. ç”Ÿæˆå¹¶ä¿å­˜æ ¡éªŒå’Œ
    generate_checksum "$file" "$time"
}

verify_tarball() {
    local file="$1"
    local time="$2"
    
    # æµ‹è¯•taræ–‡ä»¶å®Œæ•´æ€§
    if tar -tzf "$file" >/dev/null 2>&1; then
        echo "[$time] TARæ–‡ä»¶å®Œæ•´æ€§éªŒè¯é€šè¿‡: $file" >> "$LOG_FILE"
    else
        log_error "$time" "TARæ–‡ä»¶æŸå: $file"
        return 1
    fi
}

verify_zip() {
    local file="$1"
    local time="$2"
    
    # æµ‹è¯•zipæ–‡ä»¶å®Œæ•´æ€§
    if unzip -t "$file" >/dev/null 2>&1; then
        echo "[$time] ZIPæ–‡ä»¶å®Œæ•´æ€§éªŒè¯é€šè¿‡: $file" >> "$LOG_FILE"
    else
        log_error "$time" "ZIPæ–‡ä»¶æŸå: $file"
        return 1
    fi
}

generate_checksum() {
    local file="$1"
    local time="$2"
    local filename=$(basename "$file")
    local checksum_file="$CHECKSUM_DIR/$filename.md5"
    
    # ç”ŸæˆMD5æ ¡éªŒå’Œ
    md5sum "$file" > "$checksum_file"
    echo "[$time] æ ¡éªŒå’Œå·²ç”Ÿæˆ: $checksum_file" >> "$LOG_FILE"
}

log_error() {
    local time="$1"
    local message="$2"
    
    echo "[$time] é”™è¯¯: $message" >> "$LOG_FILE"
    echo "å¤‡ä»½éªŒè¯å¤±è´¥: $message" | mail -s "å¤‡ä»½å®Œæ•´æ€§è­¦å‘Š" admin@company.com
}
```

---

## 7. ğŸ”„ ç³»ç»Ÿé…ç½®å®æ—¶åŒæ­¥


### 7.1 é…ç½®åŒæ­¥çš„åº”ç”¨åœºæ™¯


**å®é™…éœ€æ±‚**ï¼šå¤šå°æœåŠ¡å™¨éœ€è¦ä¿æŒé…ç½®ä¸€è‡´ï¼Œå°±åƒè¿é”åº—çš„ç®¡ç†åˆ¶åº¦è¦ç»Ÿä¸€ä¸€æ ·ã€‚

```
é…ç½®åŒæ­¥æ¶æ„ï¼š
ä¸»æœåŠ¡å™¨ â†’ é…ç½®å˜æ›´ â†’ è‡ªåŠ¨åŒæ­¥ â†’ ä»æœåŠ¡å™¨1
                                â†’ ä»æœåŠ¡å™¨2
                                â†’ ä»æœåŠ¡å™¨3
```

### 7.2 é…ç½®åŒæ­¥ç›‘æ§å®ç°


**ä¸»æœåŠ¡å™¨åŒæ­¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# config-sync-monitor.sh

CONFIG_DIRS=("/etc/nginx" "/etc/apache2" "/etc/mysql")
SYNC_SERVERS=("server2.example.com" "server3.example.com")
SYNC_USER="sync-user"
LOG_FILE="/var/log/config-sync.log"

# ç›‘æ§é…ç½®ç›®å½•å˜åŒ–
for dir in "${CONFIG_DIRS[@]}"; do
    if [[ -d "$dir" ]]; then
        inotifywait -m -r -e modify,create,delete "$dir" \
        --exclude '(\.tmp|\.swp|\.log)$' \
        --format "$dir %w%f %e %T" --timefmt '%Y-%m-%d %H:%M:%S' &
    fi
done

# è¯»å–ç›‘æ§äº‹ä»¶
while read base_dir file event time; do
    echo "[$time] é…ç½®å˜æ›´: $file ($event)" >> "$LOG_FILE"
    
    # å»¶è¿ŸåŒæ­¥ï¼Œé¿å…é¢‘ç¹æ“ä½œ
    sleep 5
    
    # åŒæ­¥åˆ°å…¶ä»–æœåŠ¡å™¨
    sync_to_servers "$base_dir" "$file" "$event" "$time"
    
done < <(wait)

sync_to_servers() {
    local base_dir="$1"
    local file="$2" 
    local event="$3"
    local time="$4"
    
    for server in "${SYNC_SERVERS[@]}"; do
        case "$event" in
            "MODIFY"|"CREATE")
                sync_file_to_server "$file" "$server" "$time"
                ;;
            "DELETE")
                remove_file_from_server "$file" "$server" "$time"
                ;;
        esac
    done
}

sync_file_to_server() {
    local file="$1"
    local server="$2"
    local time="$3"
    
    if [[ -f "$file" ]]; then
        # ä½¿ç”¨rsyncåŒæ­¥æ–‡ä»¶
        if rsync -avz "$file" "${SYNC_USER}@${server}:$file"; then
            echo "[$time] åŒæ­¥æˆåŠŸ: $file â†’ $server" >> "$LOG_FILE"
            
            # è¿œç¨‹é‡å¯ç›¸å…³æœåŠ¡
            restart_remote_service "$server" "$file"
        else
            echo "[$time] åŒæ­¥å¤±è´¥: $file â†’ $server" >> "$LOG_FILE"
        fi
    fi
}

restart_remote_service() {
    local server="$1"
    local file="$2"
    
    # æ ¹æ®æ–‡ä»¶è·¯å¾„åˆ¤æ–­éœ€è¦é‡å¯çš„æœåŠ¡
    if [[ "$file" == */nginx/* ]]; then
        ssh "${SYNC_USER}@${server}" "sudo nginx -t && sudo systemctl reload nginx"
    elif [[ "$file" == */apache2/* ]]; then
        ssh "${SYNC_USER}@${server}" "sudo apache2ctl configtest && sudo systemctl reload apache2"
    elif [[ "$file" == */mysql/* ]]; then
        ssh "${SYNC_USER}@${server}" "sudo systemctl restart mysql"
    fi
}
```

### 7.3 ä»æœåŠ¡å™¨éªŒè¯è„šæœ¬


```bash
#!/bin/bash
# config-verify.sh - ä»æœåŠ¡å™¨ç«¯éªŒè¯è„šæœ¬

MASTER_SERVER="master.example.com"
CONFIG_DIRS=("/etc/nginx" "/etc/apache2")

verify_config_sync() {
    for dir in "${CONFIG_DIRS[@]}"; do
        echo "éªŒè¯ç›®å½•: $dir"
        
        # æ¯”è¾ƒæœ¬åœ°å’Œä¸»æœåŠ¡å™¨çš„é…ç½®
        rsync -avzn --delete "${SYNC_USER}@${MASTER_SERVER}:$dir/" "$dir/" | \
        grep -v "receiving file list" | \
        while read line; do
            if [[ -n "$line" ]]; then
                echo "é…ç½®ä¸åŒæ­¥: $line"
            fi
        done
    done
}

# å®šæœŸéªŒè¯ï¼ˆé€šè¿‡cronæ‰§è¡Œï¼‰
verify_config_sync
```

---

## 8. ğŸš¨ æ–‡ä»¶æƒé™å¼‚å¸¸å‘Šè­¦


### 8.1 æƒé™ç›‘æ§çš„é‡è¦æ€§


**å®‰å…¨è§’åº¦**ï¼šæ–‡ä»¶æƒé™å°±åƒæˆ¿é—¨é’¥åŒ™ï¼Œæƒé™å¼‚å¸¸å¯èƒ½æ„å‘³ç€å®‰å…¨å¨èƒã€‚

**å¸¸è§å¼‚å¸¸**ï¼š
- ğŸ”¸ **å¯æ‰§è¡Œæƒé™**ï¼šæ™®é€šæ–‡ä»¶è¢«æ·»åŠ æ‰§è¡Œæƒé™
- ğŸ”¸ **å†™å…¥æƒé™**ï¼šåªè¯»æ–‡ä»¶è¢«æ·»åŠ å†™æƒé™  
- ğŸ”¸ **æ‰€æœ‰è€…å˜æ›´**ï¼šå…³é”®æ–‡ä»¶æ‰€æœ‰è€…è¢«ä¿®æ”¹
- ğŸ”¸ **SUID/SGID**ï¼šç‰¹æ®Šæƒé™è¢«æ¶æ„è®¾ç½®

### 8.2 æƒé™ç›‘æ§å®ç°


**æƒé™å¼‚å¸¸ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# permission-monitor.sh

CRITICAL_DIRS=("/etc" "/usr/bin" "/usr/sbin" "/var/www")
BASELINE_FILE="/var/log/file-permissions-baseline.txt"
ALERT_EMAIL="security@company.com"

# å»ºç«‹æƒé™åŸºçº¿
create_baseline() {
    echo "å»ºç«‹æ–‡ä»¶æƒé™åŸºçº¿..."
    for dir in "${CRITICAL_DIRS[@]}"; do
        find "$dir" -type f -exec ls -l {} \; 2>/dev/null
    done > "$BASELINE_FILE"
    echo "æƒé™åŸºçº¿å·²åˆ›å»º: $BASELINE_FILE"
}

# ç›‘æ§æƒé™å˜åŒ–
inotifywait -m -r -e attrib "${CRITICAL_DIRS[@]}" \
--format '%w%f %e %T' --timefmt '%Y-%m-%d %H:%M:%S' | \
while read file event time; do
    
    if [[ -f "$file" ]]; then
        check_permission_change "$file" "$time"
    fi
done

check_permission_change() {
    local file="$1"
    local time="$2"
    
    # è·å–å½“å‰æƒé™
    local current_perm=$(stat -c "%a %U:%G" "$file" 2>/dev/null)
    local current_mode=$(stat -c "%a" "$file" 2>/dev/null)
    
    # æ£€æŸ¥å±é™©æƒé™å˜åŒ–
    check_dangerous_permissions "$file" "$current_mode" "$time"
    
    # è®°å½•æƒé™å˜åŒ–
    echo "[$time] æƒé™å˜æ›´: $file â†’ $current_perm"
}

check_dangerous_permissions() {
    local file="$1"
    local mode="$2"
    local time="$3"
    
    # æ£€æŸ¥SUIDä½ (4000)
    if [[ $((mode & 4000)) -ne 0 ]]; then
        alert_msg="è­¦å‘Š: SUIDæƒé™è®¾ç½® $file (æƒé™: $mode)"
        echo "[$time] $alert_msg"
        echo "$alert_msg" | mail -s "SUIDæƒé™è­¦å‘Š" "$ALERT_EMAIL"
    fi
    
    # æ£€æŸ¥SGIDä½ (2000)
    if [[ $((mode & 2000)) -ne 0 ]]; then
        alert_msg="è­¦å‘Š: SGIDæƒé™è®¾ç½® $file (æƒé™: $mode)"
        echo "[$time] $alert_msg"
        echo "$alert_msg" | mail -s "SGIDæƒé™è­¦å‘Š" "$ALERT_EMAIL"
    fi
    
    # æ£€æŸ¥å…¨å±€å¯å†™ (002)
    if [[ $((mode & 002)) -ne 0 ]]; then
        # æ’é™¤ä¸´æ—¶ç›®å½•
        if [[ "$file" != /tmp/* && "$file" != /var/tmp/* ]]; then
            alert_msg="è­¦å‘Š: å…¨å±€å¯å†™æƒé™ $file (æƒé™: $mode)"
            echo "[$time] $alert_msg"
        fi
    fi
    
    # æ£€æŸ¥å¯æ‰§è¡Œæƒé™å¼‚å¸¸
    check_executable_anomaly "$file" "$mode" "$time"
}

check_executable_anomaly() {
    local file="$1"
    local mode="$2"
    local time="$3"
    
    # æ£€æŸ¥æ–‡æœ¬æ–‡ä»¶æ˜¯å¦è¢«è®¾ç½®äº†æ‰§è¡Œæƒé™
    if [[ $((mode & 111)) -ne 0 ]]; then  # æœ‰æ‰§è¡Œæƒé™
        local filetype=$(file -b "$file")
        
        case "$filetype" in
            "ASCII text"|"UTF-8 Unicode text")
                # æ’é™¤è„šæœ¬æ–‡ä»¶
                if ! head -1 "$file" | grep -q "^#!"; then
                    echo "[$time] å¯ç–‘: æ–‡æœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ $file"
                fi
                ;;
            *"script"*)
                # è„šæœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™æ˜¯æ­£å¸¸çš„
                ;;
        esac
    fi
}
```

### 8.3 æƒé™æ¢å¤è„šæœ¬


```bash
#!/bin/bash
# permission-restore.sh

BACKUP_PERM_FILE="/var/backups/file-permissions.txt"

# å¤‡ä»½å½“å‰æƒé™
backup_permissions() {
    echo "å¤‡ä»½æ–‡ä»¶æƒé™..."
    find /etc /usr/bin /usr/sbin -type f -printf "%p %m %U:%G\n" > "$BACKUP_PERM_FILE"
    echo "æƒé™å·²å¤‡ä»½åˆ°: $BACKUP_PERM_FILE"
}

# æ¢å¤æƒé™
restore_permissions() {
    local perm_file="$1"
    
    if [[ -f "$perm_file" ]]; then
        while read file mode owner_group; do
            if [[ -f "$file" ]]; then
                chmod "$mode" "$file"
                chown "$owner_group" "$file"
                echo "å·²æ¢å¤: $file ($mode $owner_group)"
            fi
        done < "$perm_file"
    else
        echo "æƒé™å¤‡ä»½æ–‡ä»¶ä¸å­˜åœ¨: $perm_file"
    fi
}

# æ ¹æ®å‚æ•°æ‰§è¡Œç›¸åº”æ“ä½œ
case "$1" in
    "backup")
        backup_permissions
        ;;
    "restore")
        restore_permissions "$BACKUP_PERM_FILE"
        ;;
    *)
        echo "ç”¨æ³•: $0 {backup|restore}"
        exit 1
        ;;
esac
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 ç›‘æ§ç­–ç•¥è¦ç‚¹


```
ğŸ”¸ åˆ†å±‚ç›‘æ§ï¼šç³»ç»Ÿçº§ã€åº”ç”¨çº§ã€æ–‡ä»¶çº§
ğŸ”¸ å®æ—¶å“åº”ï¼šäº‹ä»¶è§¦å‘çš„å³æ—¶å¤„ç†
ğŸ”¸ å®‰å…¨ä¼˜å…ˆï¼šæƒé™ã€å®Œæ•´æ€§ã€æ¶æ„ä»£ç æ£€æµ‹
ğŸ”¸ è‡ªåŠ¨åŒ–å¤„ç†ï¼šå‡å°‘äººå·¥å¹²é¢„ï¼Œæé«˜æ•ˆç‡
ğŸ”¸ æ—¥å¿—è®°å½•ï¼šå®Œæ•´çš„å®¡è®¡è½¨è¿¹
ğŸ”¸ å‘Šè­¦æœºåˆ¶ï¼šåŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜
```

### 9.2 å®æ–½å»ºè®®


**ç›‘æ§éƒ¨ç½²æµç¨‹**ï¼š
1. **éœ€æ±‚åˆ†æ** - ç¡®å®šç›‘æ§ç›®æ ‡å’ŒèŒƒå›´
2. **è„šæœ¬å®šåˆ¶** - æ ¹æ®ç¯å¢ƒè°ƒæ•´ç›‘æ§è„šæœ¬
3. **æµ‹è¯•éªŒè¯** - åœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†æµ‹è¯•
4. **é€æ­¥éƒ¨ç½²** - ä»éå…³é”®ç³»ç»Ÿå¼€å§‹
5. **ç›‘æ§ä¼˜åŒ–** - æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´è§„åˆ™
6. **æ–‡æ¡£ç»´æŠ¤** - ä¿æŒç›‘æ§æ–‡æ¡£çš„æ›´æ–°

**æ€§èƒ½ä¼˜åŒ–è¦ç‚¹**ï¼š
- ğŸ”¸ **åˆç†è®¾ç½®ç›‘æ§èŒƒå›´**ï¼šé¿å…ç›‘æ§è¿‡å¤šä¸å¿…è¦çš„æ–‡ä»¶
- ğŸ”¸ **ä½¿ç”¨æ’é™¤è§„åˆ™**ï¼šè¿‡æ»¤ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶
- ğŸ”¸ **æ‰¹é‡å¤„ç†**ï¼šé¿å…é¢‘ç¹çš„å•ä¸ªæ–‡ä»¶æ“ä½œ
- ğŸ”¸ **å¼‚æ­¥å¤„ç†**ï¼šè€—æ—¶æ“ä½œä½¿ç”¨åå°å¤„ç†
- ğŸ”¸ **èµ„æºé™åˆ¶**ï¼šæ§åˆ¶ç›‘æ§è¿›ç¨‹çš„èµ„æºä½¿ç”¨

### 9.3 å¸¸è§é—®é¢˜è§£å†³


| é—®é¢˜ | **åŸå› ** | **è§£å†³æ–¹æ¡ˆ** |
|------|---------|-------------|
| **ç›‘æ§è¿›ç¨‹å ç”¨CPUé«˜** | `ç›‘æ§èŒƒå›´è¿‡å¤§` | `ç¼©å°ç›‘æ§èŒƒå›´ï¼Œå¢åŠ æ’é™¤è§„åˆ™` |
| **å‘Šè­¦è¿‡å¤š** | `è§„åˆ™è¿‡äºæ•æ„Ÿ` | `è°ƒæ•´å‘Šè­¦é˜ˆå€¼ï¼Œå¢åŠ è¿‡æ»¤æ¡ä»¶` |
| **ç›‘æ§å»¶è¿Ÿ** | `å¤„ç†è„šæœ¬è€—æ—¶` | `ä¼˜åŒ–è„šæœ¬æ€§èƒ½ï¼Œä½¿ç”¨å¼‚æ­¥å¤„ç†` |
| **è¯¯æŠ¥é¢‘ç¹** | `ç¼ºå°‘ä¸Šä¸‹æ–‡åˆ¤æ–­` | `å¢åŠ æ™ºèƒ½è¿‡æ»¤ï¼Œç»“åˆå¤šä¸ªæ¡ä»¶åˆ¤æ–­` |

### 9.4 å®‰å…¨æ³¨æ„äº‹é¡¹


**è„šæœ¬å®‰å…¨**ï¼š
- ğŸ”¸ **æƒé™æ§åˆ¶**ï¼šç›‘æ§è„šæœ¬ä½¿ç”¨æœ€å°å¿…è¦æƒé™
- ğŸ”¸ **è·¯å¾„éªŒè¯**ï¼šé˜²æ­¢è·¯å¾„æ³¨å…¥æ”»å‡»
- ğŸ”¸ **è¾“å…¥è¿‡æ»¤**ï¼šè¿‡æ»¤æ–‡ä»¶åä¸­çš„ç‰¹æ®Šå­—ç¬¦
- ğŸ”¸ **æ—¥å¿—å®‰å…¨**ï¼šæ•æ„Ÿä¿¡æ¯ä¸è¦è®°å½•åœ¨æ—¥å¿—ä¸­

**ç½‘ç»œå®‰å…¨**ï¼š
- ğŸ”¸ **åŠ å¯†ä¼ è¾“**ï¼šè¿œç¨‹åŒæ­¥ä½¿ç”¨SSHåŠ å¯†
- ğŸ”¸ **è®¤è¯æœºåˆ¶**ï¼šä½¿ç”¨å¯†é’¥è®¤è¯æ›¿ä»£å¯†ç 
- ğŸ”¸ **è®¿é—®æ§åˆ¶**ï¼šé™åˆ¶ç›‘æ§æœåŠ¡çš„ç½‘ç»œè®¿é—®

**æ ¸å¿ƒè®°å¿†**ï¼š
- æ–‡ä»¶ç³»ç»Ÿç›‘æ§æ˜¯ç³»ç»Ÿå®‰å…¨çš„é‡è¦ç»„æˆéƒ¨åˆ†
- å®æ—¶ç›‘æ§é…åˆè‡ªåŠ¨åŒ–å¤„ç†å¯ä»¥å¤§å¤§æé«˜å“åº”æ•ˆç‡  
- åˆç†çš„ç›‘æ§ç­–ç•¥éœ€è¦å¹³è¡¡å®‰å…¨æ€§å’Œæ€§èƒ½
- å®šæœŸæ£€æŸ¥å’Œä¼˜åŒ–ç›‘æ§è§„åˆ™æ˜¯å¿…è¦çš„è¿ç»´å·¥ä½œ