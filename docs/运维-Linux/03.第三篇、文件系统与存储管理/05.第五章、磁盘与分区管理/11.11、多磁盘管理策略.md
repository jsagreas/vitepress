---
title: 11ã€å¤šç£ç›˜ç®¡ç†ç­–ç•¥
---
## ğŸ“š ç›®å½•

1. [ç£ç›˜è´Ÿè½½å‡è¡¡åˆ†å¸ƒåŸåˆ™](#1-ç£ç›˜è´Ÿè½½å‡è¡¡åˆ†å¸ƒåŸåˆ™)
2. [å¤šç£ç›˜æŒ‚è½½ç‚¹è§„åˆ’](#2-å¤šç£ç›˜æŒ‚è½½ç‚¹è§„åˆ’)
3. [ç£ç›˜æ•…éšœè½¬ç§»ç­–ç•¥](#3-ç£ç›˜æ•…éšœè½¬ç§»ç­–ç•¥)
4. [çƒ­å¤‡ç›˜é…ç½®ä¸ç®¡ç†](#4-çƒ­å¤‡ç›˜é…ç½®ä¸ç®¡ç†)
5. [ç£ç›˜æ›´æ¢æ“ä½œæµç¨‹](#5-ç£ç›˜æ›´æ¢æ“ä½œæµç¨‹)
6. [å¤šç£ç›˜æ€§èƒ½ä¼˜åŒ–é…ç½®](#6-å¤šç£ç›˜æ€§èƒ½ä¼˜åŒ–é…ç½®)
7. [ç£ç›˜é˜µåˆ—åŸºç¡€æ¦‚å¿µ](#7-ç£ç›˜é˜µåˆ—åŸºç¡€æ¦‚å¿µ)
8. [ç£ç›˜å®¹é‡è§„åˆ’ä¸æ‰©å±•](#8-ç£ç›˜å®¹é‡è§„åˆ’ä¸æ‰©å±•)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. âš–ï¸ ç£ç›˜è´Ÿè½½å‡è¡¡åˆ†å¸ƒåŸåˆ™


### 1.1 ä»€ä¹ˆæ˜¯ç£ç›˜è´Ÿè½½å‡è¡¡


**ç®€å•ç†è§£**ï¼šå°±åƒé£Ÿå ‚æ’é˜Ÿåƒé¥­ï¼Œå¦‚æœåªå¼€ä¸€ä¸ªçª—å£ï¼Œå¤§å®¶éƒ½æ’é•¿é˜Ÿç­‰å¾…ï¼›å¦‚æœå¼€å¤šä¸ªçª—å£ï¼Œå¤§å®¶åˆ†æ•£æ’é˜Ÿï¼Œé€Ÿåº¦æ›´å¿«ã€‚ç£ç›˜è´Ÿè½½å‡è¡¡å°±æ˜¯è®©å¤šå—ç¡¬ç›˜åˆ†æ‹…å·¥ä½œï¼Œé¿å…æŸå—ç›˜å¤ªå¿™è€Œå…¶ä»–ç›˜é—²ç€ã€‚

```
å•ç£ç›˜å·¥ä½œï¼š           å¤šç£ç›˜è´Ÿè½½å‡è¡¡ï¼š
    â”Œâ”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
    â”‚ç£ç›˜1â”‚ â† æ‰€æœ‰ä»»åŠ¡        â”‚ç£ç›˜1â”‚ â”‚ç£ç›˜2â”‚ â”‚ç£ç›˜3â”‚
    â”‚100%â”‚                 â”‚ 30%â”‚ â”‚ 35%â”‚ â”‚ 35%â”‚
    â””â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
    è¿‡è½½ä¸¥é‡                   è´Ÿè½½å‡è¡¡
```

### 1.2 è´Ÿè½½åˆ†å¸ƒçš„æ ¸å¿ƒåŸåˆ™


**ğŸ”¸ æŒ‰ç”¨é€”åˆ†ç¦»åŸåˆ™**

```
ç³»ç»Ÿç›˜ï¼š         æ•°æ®ç›˜ï¼š         æ—¥å¿—ç›˜ï¼š
æ“ä½œç³»ç»Ÿ         ç”¨æˆ·æ•°æ®         ç³»ç»Ÿæ—¥å¿—
ç¨‹åºæ–‡ä»¶         æ•°æ®åº“æ–‡ä»¶       åº”ç”¨æ—¥å¿—
é…ç½®æ–‡ä»¶         åª’ä½“æ–‡ä»¶         å¤‡ä»½æ–‡ä»¶
```

**å®é™…é…ç½®ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹å½“å‰ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# å…¸å‹çš„åˆ†ç¦»é…ç½®
/dev/sda1 â†’ /          # ç³»ç»Ÿæ ¹ç›®å½•(20-50GB)
/dev/sdb1 â†’ /home      # ç”¨æˆ·æ•°æ®(æ ¹æ®éœ€è¦)
/dev/sdc1 â†’ /var/log   # æ—¥å¿—æ–‡ä»¶(10-20GB)
/dev/sdd1 â†’ /opt       # åº”ç”¨ç¨‹åº(æ ¹æ®éœ€è¦)
```

**ğŸ”¸ è¯»å†™åˆ†ç¦»åŸåˆ™**

```
è¯»å¤šå†™å°‘çš„æ•°æ® â†’ æ”¾åœ¨è¯»å–æ€§èƒ½å¥½çš„ç£ç›˜
å†™å¤šè¯»å°‘çš„æ•°æ® â†’ æ”¾åœ¨å†™å…¥æ€§èƒ½å¥½çš„ç£ç›˜
é¢‘ç¹è¯»å†™çš„æ•°æ® â†’ æ”¾åœ¨æ€§èƒ½æœ€å¥½çš„ç£ç›˜(å¦‚SSD)
```

**ç£ç›˜ç±»å‹é€‰æ‹©**ï¼š
| æ•°æ®ç±»å‹ | å»ºè®®ç£ç›˜ç±»å‹ | åŸå› è¯´æ˜ |
|---------|------------|---------|
| æ“ä½œç³»ç»Ÿ | **SSD** | å¯åŠ¨é€Ÿåº¦å¿«ï¼Œå“åº”åŠæ—¶ |
| æ•°æ®åº“ | **SSD** | éšæœºè¯»å†™é¢‘ç¹ |
| æ—¥å¿—æ–‡ä»¶ | **æœºæ¢°ç¡¬ç›˜** | é¡ºåºå†™å…¥ä¸ºä¸»ï¼Œæˆæœ¬ä½ |
| å¤‡ä»½æ•°æ® | **æœºæ¢°ç¡¬ç›˜** | å®¹é‡å¤§ï¼Œæˆæœ¬ä½ |
| ä¸´æ—¶æ–‡ä»¶ | **SSD** | è¯»å†™é¢‘ç¹ï¼Œéœ€è¦é«˜æ€§èƒ½ |

### 1.3 è´Ÿè½½ç›‘æ§ä¸è°ƒæ•´


**ç›‘æ§ç£ç›˜è´Ÿè½½çŠ¶æ€**ï¼š
```bash
# å®æ—¶æŸ¥çœ‹ç£ç›˜IOæƒ…å†µ
iostat -x 1

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨ç‡
iotop

# æ£€æŸ¥ç£ç›˜è´Ÿè½½åˆ†å¸ƒ
vmstat 1 10
```

**å…¸å‹è¾“å‡ºè§£è¯»**ï¼š
```
Device  %util   r/s   w/s   r_await  w_await
sda     85.2%   120   45    8.5ms    12.3ms  â† è´Ÿè½½è¿‡é«˜
sdb     23.1%   35    20    3.2ms    5.8ms   â† è´Ÿè½½æ­£å¸¸
sdc     15.8%   25    15    2.8ms    4.2ms   â† è´Ÿè½½è¾ƒä½
```

> **ğŸ’¡ é‡è¦ç†è§£**ï¼š%utilæ¥è¿‘100%è¡¨ç¤ºç£ç›˜å‡ ä¹æ»¡è´Ÿè·å·¥ä½œï¼Œéœ€è¦è€ƒè™‘æ•°æ®è¿ç§»æˆ–è´Ÿè½½åˆ†æ•£ã€‚

---

## 2. ğŸ“ å¤šç£ç›˜æŒ‚è½½ç‚¹è§„åˆ’


### 2.1 æŒ‚è½½ç‚¹è§„åˆ’çš„åŸºæœ¬æ€è·¯


**ä»€ä¹ˆæ˜¯æŒ‚è½½ç‚¹**ï¼Ÿç®€å•ç†è§£å°±æ˜¯ç»™ç£ç›˜åˆ†é…ä¸€ä¸ª"é—¨ç‰Œå·"ï¼Œå‘Šè¯‰ç³»ç»Ÿè¿™å—ç£ç›˜æ”¾åœ¨æ–‡ä»¶ç³»ç»Ÿçš„å“ªä¸ªä½ç½®ã€‚å°±åƒç»™æˆ¿é—´è´´æ ‡ç­¾ä¸€æ ·ã€‚

```
Linuxæ–‡ä»¶ç³»ç»Ÿæ ‘çŠ¶ç»“æ„ï¼š
/                    â† æ ¹ç›®å½•(å¿…é¡»æœ‰ç£ç›˜)
â”œâ”€â”€ home/           â† ç”¨æˆ·ç›®å½•(å»ºè®®å•ç‹¬ç£ç›˜)
â”œâ”€â”€ var/            â† å˜åŒ–æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ log/        â† æ—¥å¿—ç›®å½•(å»ºè®®å•ç‹¬ç£ç›˜)
â”‚   â””â”€â”€ lib/        â† åº”ç”¨æ•°æ®
â”œâ”€â”€ opt/            â† ç¬¬ä¸‰æ–¹è½¯ä»¶(å¯å•ç‹¬ç£ç›˜)
â”œâ”€â”€ tmp/            â† ä¸´æ—¶æ–‡ä»¶(å»ºè®®é«˜é€Ÿç£ç›˜)
â””â”€â”€ srv/            â† æœåŠ¡æ•°æ®(å»ºè®®å•ç‹¬ç£ç›˜)
```

### 2.2 å¸¸è§æŒ‚è½½ç‚¹è§„åˆ’æ–¹æ¡ˆ


**ğŸ”¸ åŸºç¡€æ–¹æ¡ˆï¼ˆé€‚åˆå°å‹æœåŠ¡å™¨ï¼‰**

```
ç£ç›˜1 (SSD 128GB):    /               ç³»ç»Ÿæ ¹ç›®å½•
ç£ç›˜2 (HDD 1TB):      /home           ç”¨æˆ·æ•°æ®
ç£ç›˜3 (HDD 500GB):    /var/log        æ—¥å¿—æ•°æ®
```

é…ç½®å‘½ä»¤ï¼š
```bash
# 1. åˆ›å»ºåˆ†åŒº
fdisk /dev/sdb
fdisk /dev/sdc

# 2. æ ¼å¼åŒ–
mkfs.ext4 /dev/sdb1
mkfs.ext4 /dev/sdc1

# 3. åˆ›å»ºæŒ‚è½½ç›®å½•
mkdir -p /mnt/home_backup
mkdir -p /mnt/log_backup

# 4. ä¸´æ—¶æŒ‚è½½æµ‹è¯•
mount /dev/sdb1 /mnt/home_backup
mount /dev/sdc1 /mnt/log_backup

# 5. æ·»åŠ åˆ°å¼€æœºè‡ªåŠ¨æŒ‚è½½
echo '/dev/sdb1 /home ext4 defaults 0 2' >> /etc/fstab
echo '/dev/sdc1 /var/log ext4 defaults 0 2' >> /etc/fstab
```

**ğŸ”¸ ä¼ä¸šçº§æ–¹æ¡ˆï¼ˆé€‚åˆå¤§å‹æœåŠ¡å™¨ï¼‰**

```
ç£ç›˜è§„åˆ’ï¼š
/dev/sda (SSD 256GB)   â†’ /              ç³»ç»Ÿ+åŸºç¡€ç¨‹åº
/dev/sdb (SSD 512GB)   â†’ /opt           åº”ç”¨ç¨‹åº
/dev/sdc (HDD 2TB)     â†’ /home          ç”¨æˆ·æ•°æ®  
/dev/sdd (HDD 1TB)     â†’ /var/log       æ—¥å¿—æ–‡ä»¶
/dev/sde (HDD 4TB)     â†’ /srv           æœåŠ¡æ•°æ®
/dev/sdf (HDD 2TB)     â†’ /backup        å¤‡ä»½æ•°æ®
```

### 2.3 æŒ‚è½½ç‚¹è§„åˆ’æ³¨æ„äº‹é¡¹


**âš ï¸ å…³é”®æ³¨æ„ç‚¹**ï¼š

```
1. æ ¹ç›®å½•(/)ç»å¯¹ä¸èƒ½å‡ºé—®é¢˜
   - å¿…é¡»ä½¿ç”¨å¯é çš„ç£ç›˜(å»ºè®®SSD)
   - é¢„ç•™è¶³å¤Ÿç©ºé—´(è‡³å°‘20GB)

2. æ•°æ®ç›®å½•è¦è€ƒè™‘å¢é•¿
   - /home, /var, /optç­‰å®¹æ˜“å¢é•¿
   - é¢„ç•™æ‰©å±•ç©ºé—´æˆ–ä½¿ç”¨LVM

3. ç³»ç»Ÿå…³é”®ç›®å½•ä¸è¦åˆ†ç¦»
   - /bin, /sbin, /libç­‰å¿…é¡»åœ¨æ ¹åˆ†åŒº
   - /usrå»ºè®®åœ¨æ ¹åˆ†åŒºæˆ–å•ç‹¬å¤§åˆ†åŒº

4. ä¸´æ—¶ç›®å½•æ€§èƒ½è¦æ±‚
   - /tmpå»ºè®®ä½¿ç”¨å¿«é€Ÿç£ç›˜
   - å¯ä»¥è€ƒè™‘å†…å­˜æ–‡ä»¶ç³»ç»Ÿtmpfs
```

**æ£€æŸ¥æŒ‚è½½çŠ¶æ€**ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰æŒ‚è½½ç‚¹
mount | column -t

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç±»å‹
lsblk -f
```

---

## 3. ğŸ›¡ï¸ ç£ç›˜æ•…éšœè½¬ç§»ç­–ç•¥


### 3.1 æ•…éšœè½¬ç§»åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯æ•…éšœè½¬ç§»**ï¼Ÿå°±åƒå¼€è½¦æ—¶å¦‚æœä¸»è·¯å µäº†ï¼Œè‡ªåŠ¨èµ°å¤‡ç”¨è·¯çº¿ã€‚ç£ç›˜æ•…éšœè½¬ç§»å°±æ˜¯å½“ä¸»ç£ç›˜å‡ºé—®é¢˜æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨ç£ç›˜ç»§ç»­å·¥ä½œã€‚

```
æ­£å¸¸å·¥ä½œçŠ¶æ€ï¼š          æ•…éšœè½¬ç§»çŠ¶æ€ï¼š
ä¸»ç£ç›˜ â”€â”€â†’ åº”ç”¨          ä¸»ç£ç›˜ Ã—Ã—Ã—Ã—
  â”‚                       â”‚
  â””â”€â”€ å¤‡ç”¨ç£ç›˜(å¾…æœº)        â””â”€â”€ å¤‡ç”¨ç£ç›˜ â”€â”€â†’ åº”ç”¨
```

### 3.2 è½¯ä»¶å±‚é¢æ•…éšœè½¬ç§»


**ğŸ”¸ ä½¿ç”¨RAIDå®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»**

```bash
# åˆ›å»ºRAID1é•œåƒ(ä¸¤å—ç£ç›˜äº’ä¸ºå¤‡ä»½)
mdadm --create /dev/md0 --level=1 --raid-devices=2 /dev/sdb /dev/sdc

# æŸ¥çœ‹RAIDçŠ¶æ€
cat /proc/mdstat

# æ¨¡æ‹Ÿç£ç›˜æ•…éšœ
mdadm --manage /dev/md0 --fail /dev/sdc

# æ›´æ¢æ•…éšœç£ç›˜
mdadm --manage /dev/md0 --remove /dev/sdc
mdadm --manage /dev/md0 --add /dev/sdd
```

**RAIDçº§åˆ«å¯¹æ¯”**ï¼š
| RAIDçº§åˆ« | æœ€å°‘ç£ç›˜æ•° | å®¹é”™èƒ½åŠ› | å­˜å‚¨æ•ˆç‡ | é€‚ç”¨åœºæ™¯ |
|---------|-----------|----------|----------|----------|
| **RAID0** | 2å— | æ— å®¹é”™ | 100% | é«˜æ€§èƒ½ï¼Œä¸é‡è¦æ•°æ® |
| **RAID1** | 2å— | 1å—æ•…éšœ | 50% | é‡è¦æ•°æ®ï¼Œé«˜å¯é æ€§ |
| **RAID5** | 3å— | 1å—æ•…éšœ | 67%-90% | å¹³è¡¡æ€§èƒ½å’Œå¯é æ€§ |
| **RAID10** | 4å— | 2å—æ•…éšœ | 50% | é«˜æ€§èƒ½+é«˜å¯é æ€§ |

**ğŸ”¸ ä½¿ç”¨LVMå®ç°çµæ´»æ•…éšœè½¬ç§»**

```bash
# 1. åˆ›å»ºç‰©ç†å·
pvcreate /dev/sdb /dev/sdc

# 2. åˆ›å»ºå·ç»„
vgcreate data_vg /dev/sdb /dev/sdc

# 3. åˆ›å»ºé€»è¾‘å·(ä½¿ç”¨é•œåƒ)
lvcreate -L 500G -m 1 -n data_lv data_vg

# 4. æŸ¥çœ‹é•œåƒçŠ¶æ€
lvs -a -o +devices
```

### 3.3 åº”ç”¨å±‚æ•…éšœè½¬ç§»ç­–ç•¥


**æ•°æ®åº“æ•…éšœè½¬ç§»é…ç½®**ï¼š
```bash
# MySQLä¸»ä»é…ç½®ç¤ºä¾‹
# ä¸»åº“é…ç½®(/etc/mysql/my.cnf)
[mysqld]
server-id=1
log-bin=mysql-bin
binlog-do-db=important_db

# ä»åº“é…ç½®
[mysqld]
server-id=2
relay-log=mysql-relay-bin
read-only=1
```

**WebæœåŠ¡æ•…éšœè½¬ç§»**ï¼š
```bash
# nginxè´Ÿè½½å‡è¡¡é…ç½®
upstream backend {
    server 192.168.1.10:80 max_fails=3 fail_timeout=30s;
    server 192.168.1.11:80 backup;  # å¤‡ç”¨æœåŠ¡å™¨
}

server {
    location / {
        proxy_pass http://backend;
    }
}
```

### 3.4 æ•…éšœæ£€æµ‹ä¸è‡ªåŠ¨å¤„ç†


**ç£ç›˜å¥åº·æ£€æµ‹è„šæœ¬**ï¼š
```bash
#!/bin/bash
# disk_health_check.sh

# æ£€æŸ¥ç£ç›˜SMARTä¿¡æ¯
check_disk_health() {
    for disk in /dev/sd[a-z]; do
        if [ -b "$disk" ]; then
            echo "æ£€æŸ¥ç£ç›˜: $disk"
            smartctl -H "$disk" | grep -q "PASSED"
            if [ $? -ne 0 ]; then
                echo "è­¦å‘Š: ç£ç›˜ $disk å¥åº·çŠ¶æ€å¼‚å¸¸!" | mail -s "ç£ç›˜å‘Šè­¦" admin@company.com
                # è§¦å‘æ•…éšœè½¬ç§»é€»è¾‘
                trigger_failover "$disk"
            fi
        fi
    done
}

# æ•…éšœè½¬ç§»å¤„ç†
trigger_failover() {
    local failed_disk="$1"
    echo "$(date): ç£ç›˜ $failed_disk è§¦å‘æ•…éšœè½¬ç§»" >> /var/log/failover.log
    # è¿™é‡Œæ·»åŠ å…·ä½“çš„æ•…éšœè½¬ç§»å‘½ä»¤
}

# å®šæ—¶æ‰§è¡Œ(crontab)
# 0 */4 * * * /usr/local/bin/disk_health_check.sh
```

---

## 4. ğŸ”¥ çƒ­å¤‡ç›˜é…ç½®ä¸ç®¡ç†


### 4.1 çƒ­å¤‡ç›˜åŸºæœ¬æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯çƒ­å¤‡ç›˜**ï¼Ÿå°±åƒæ¶ˆé˜²é˜Ÿçš„å¤‡ç”¨æ¶ˆé˜²è½¦ï¼Œå¹³æ—¶ä¸å‡ºä»»åŠ¡ï¼Œä½†ä¸€æ—¦æ­£åœ¨å·¥ä½œçš„æ¶ˆé˜²è½¦å‡ºæ•…éšœï¼Œç«‹åˆ»é¡¶ä¸Šå»ã€‚çƒ­å¤‡ç›˜å¹³æ—¶ä¸å­˜å‚¨æ•°æ®ï¼Œä½†ç›‘æ§ç€å·¥ä½œç›˜çš„çŠ¶æ€ï¼Œä¸€æ—¦å‘ç°æ•…éšœå°±è‡ªåŠ¨æ¥æ›¿å·¥ä½œã€‚

```
çƒ­å¤‡ç›˜å·¥ä½œåŸç†ï¼š
æ­£å¸¸çŠ¶æ€:     æ•…éšœçŠ¶æ€:      è‡ªåŠ¨é‡å»º:
å·¥ä½œç›˜A â—     å·¥ä½œç›˜A Ã—      å·¥ä½œç›˜A Ã— 
å·¥ä½œç›˜B â—     å·¥ä½œç›˜B â—      å·¥ä½œç›˜B â— â”â”â”â”“
çƒ­å¤‡ç›˜C â—‹     çƒ­å¤‡ç›˜C â—‹      çƒ­å¤‡ç›˜C â—    â”ƒ
(å¾…æœº)        (å¾…æœº)         (é¡¶æ›¿A)     â”ƒ
                                        â”ƒ
                                   æ•°æ®é‡å»ºä¸­
```

### 4.2 RAIDçƒ­å¤‡ç›˜é…ç½®


**ğŸ”¸ åˆ›å»ºå¸¦çƒ­å¤‡ç›˜çš„RAID5é˜µåˆ—**

```bash
# åˆ›å»ºRAID5 + çƒ­å¤‡ç›˜é…ç½®
# ä½¿ç”¨3å—ç›˜åšRAID5ï¼Œ1å—ç›˜åšçƒ­å¤‡
mdadm --create /dev/md0 \
    --level=5 \
    --raid-devices=3 \
    --spare-devices=1 \
    /dev/sdb /dev/sdc /dev/sdd /dev/sde

# æŸ¥çœ‹é˜µåˆ—è¯¦ç»†çŠ¶æ€
mdadm --detail /dev/md0
```

**å…¸å‹è¾“å‡ºè§£æ**ï¼š
```
/dev/md0:
    State : clean                  â† é˜µåˆ—çŠ¶æ€æ­£å¸¸
    Active Devices : 3             â† 3å—å·¥ä½œç›˜
    Working Devices : 4            â† 4å—å¯ç”¨ç›˜(åŒ…æ‹¬çƒ­å¤‡)
    Failed Devices : 0             â† 0å—æ•…éšœç›˜
    Spare Devices : 1              â† 1å—çƒ­å¤‡ç›˜

    Number   Major   Minor   RaidDevice State
       0       8       16        0      active sync   /dev/sdb
       1       8       32        1      active sync   /dev/sdc  
       2       8       48        2      active sync   /dev/sdd
       3       8       64        -      spare         /dev/sde â† çƒ­å¤‡ç›˜
```

**ğŸ”¸ æ‰‹åŠ¨æ·»åŠ çƒ­å¤‡ç›˜**

```bash
# ä¸ºç°æœ‰RAIDé˜µåˆ—æ·»åŠ çƒ­å¤‡ç›˜
mdadm --manage /dev/md0 --add /dev/sdf

# è®¾ç½®ç‰¹å®šç£ç›˜ä¸ºçƒ­å¤‡
mdadm --manage /dev/md0 --add-spare /dev/sdf

# æŸ¥çœ‹çƒ­å¤‡ç›˜çŠ¶æ€
cat /proc/mdstat
```

### 4.3 çƒ­å¤‡ç›˜è‡ªåŠ¨æ›¿æ¢æµ‹è¯•


**æ¨¡æ‹Ÿç£ç›˜æ•…éšœæµ‹è¯•**ï¼š
```bash
# 1. è®°å½•æµ‹è¯•å‰çŠ¶æ€
mdadm --detail /dev/md0 > /tmp/raid_before.txt

# 2. æ¨¡æ‹Ÿç£ç›˜æ•…éšœ
mdadm --manage /dev/md0 --fail /dev/sdb

# 3. è§‚å¯Ÿçƒ­å¤‡ç›˜è‡ªåŠ¨æ¿€æ´»
watch -n 1 'cat /proc/mdstat'

# 4. æŸ¥çœ‹é‡å»ºè¿›åº¦
mdadm --detail /dev/md0 | grep -E "(State|Rebuild)"
```

**é‡å»ºè¿‡ç¨‹ç›‘æ§**ï¼š
```
Personalities : [raid5]
md0 : active raid5 sde[3] sdc[1] sdd[2]
      2097152 blocks super 1.2 level 5, 512k chunk, algorithm 2 [3/3] [UUU]
      [============>........] recovery = 65.4% (686336/1048576) 
      finish=0.2min speed=34316K/sec
```

### 4.4 çƒ­å¤‡ç›˜ç®¡ç†æœ€ä½³å®è·µ


**ğŸ”¸ çƒ­å¤‡ç›˜æ•°é‡è§„åˆ’**

```
å°å‹ç¯å¢ƒ (3-5å—ç£ç›˜):
- é…ç½®1å—çƒ­å¤‡ç›˜
- æˆæœ¬é€‚ä¸­ï¼ŒåŸºç¡€ä¿æŠ¤

ä¸­å‹ç¯å¢ƒ (6-12å—ç£ç›˜):  
- é…ç½®2å—çƒ­å¤‡ç›˜
- æ›´å¥½çš„å†—ä½™ä¿æŠ¤

å¤§å‹ç¯å¢ƒ (12å—ä»¥ä¸Šç£ç›˜):
- é…ç½®2-3å—çƒ­å¤‡ç›˜
- è€ƒè™‘å…¨å±€çƒ­å¤‡ç­–ç•¥
```

**ğŸ”¸ çƒ­å¤‡ç›˜å¥åº·ç›‘æ§**

```bash
#!/bin/bash
# hotspare_monitor.sh - çƒ­å¤‡ç›˜ç›‘æ§è„šæœ¬

# æ£€æŸ¥æ‰€æœ‰RAIDé˜µåˆ—çš„çƒ­å¤‡çŠ¶æ€
for md in /dev/md[0-9]*; do
    if [ -b "$md" ]; then
        echo "æ£€æŸ¥é˜µåˆ—: $md"
        spare_count=$(mdadm --detail "$md" | grep "Spare Devices" | awk '{print $4}')
        
        if [ "$spare_count" -lt 1 ]; then
            echo "è­¦å‘Š: $md æ²¡æœ‰çƒ­å¤‡ç›˜!" | logger -p user.warning
            # å‘é€å‘Šè­¦é‚®ä»¶
            echo "RAIDé˜µåˆ— $md ç¼ºå°‘çƒ­å¤‡ç›˜ï¼Œè¯·åŠæ—¶æ·»åŠ !" | \
                mail -s "RAIDçƒ­å¤‡å‘Šè­¦" admin@company.com
        fi
    fi
done
```

**å®šæ—¶ç›‘æ§é…ç½®**ï¼š
```bash
# æ·»åŠ åˆ°crontabï¼Œæ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
# crontab -e
0 * * * * /usr/local/bin/hotspare_monitor.sh
```

---

## 5. ğŸ”§ ç£ç›˜æ›´æ¢æ“ä½œæµç¨‹


### 5.1 ç£ç›˜æ›´æ¢å‰çš„å‡†å¤‡å·¥ä½œ


**ğŸ”¸ æ•…éšœç£ç›˜è¯†åˆ«**

ç£ç›˜æ•…éšœé€šå¸¸æœ‰è¿™äº›å¾è±¡ï¼š
- ç³»ç»Ÿæ—¥å¿—å‡ºç°å¤§é‡IOé”™è¯¯
- ç£ç›˜å“åº”é€Ÿåº¦æ˜æ˜¾å˜æ…¢  
- å‡ºç°åå—æˆ–æ–‡ä»¶ç³»ç»Ÿé”™è¯¯
- SMARTæ£€æµ‹æ˜¾ç¤ºå¥åº·çŠ¶æ€å¼‚å¸¸

```bash
# 1. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ä¸­çš„ç£ç›˜é”™è¯¯
dmesg | grep -i "error\|fail" | grep sd

# 2. æ£€æŸ¥SMARTçŠ¶æ€
smartctl -a /dev/sdb | grep -E "(Health|Error)"

# 3. æŸ¥çœ‹ç£ç›˜IOç»Ÿè®¡
iostat -x 1 5 | grep sd

# 4. æ£€æŸ¥RAIDçŠ¶æ€
cat /proc/mdstat
mdadm --detail /dev/md0
```

**ğŸ”¸ æ•°æ®å¤‡ä»½ç¡®è®¤**

```bash
# 1. ç¡®è®¤RAIDçŠ¶æ€
mdadm --detail /dev/md0 | grep -E "(State|Failed)"

# 2. æ£€æŸ¥æ˜¯å¦æœ‰é‡è¦æ•°æ®æœªå¤‡ä»½
rsync -av /important_data/ /backup/location/ --dry-run

# 3. éªŒè¯å¤‡ä»½å®Œæ•´æ€§
md5sum /backup/important_file.txt
md5sum /original/important_file.txt
```

### 5.2 åœ¨çº¿çƒ­æ’æ‹”æ›´æ¢æµç¨‹


**ğŸ”¸ RAIDé˜µåˆ—ç£ç›˜æ›´æ¢ï¼ˆæ¨èæµç¨‹ï¼‰**

```bash
# æ­¥éª¤1: æ ‡è®°æ•…éšœç£ç›˜
mdadm --manage /dev/md0 --fail /dev/sdb

# æ­¥éª¤2: ä»é˜µåˆ—ä¸­ç§»é™¤æ•…éšœç£ç›˜
mdadm --manage /dev/md0 --remove /dev/sdb

# æ­¥éª¤3: ç‰©ç†æ›´æ¢ç£ç›˜
# (è¿™æ—¶å¯ä»¥å®‰å…¨åœ°æ‹”å‡º/dev/sdbï¼Œå®‰è£…æ–°ç£ç›˜)

# æ­¥éª¤4: å°†æ–°ç£ç›˜æ·»åŠ åˆ°é˜µåˆ—
mdadm --manage /dev/md0 --add /dev/sdb

# æ­¥éª¤5: ç›‘æ§é‡å»ºè¿›åº¦
watch -n 2 'cat /proc/mdstat'
```

**é‡å»ºè¿›åº¦ç¤ºä¾‹**ï¼š
```
md0 : active raid5 sdb[4] sdc[1] sdd[2] sde[0]
      2097152 blocks super 1.2 level 5, 512k chunk, algorithm 2 [3/3] [UUU]
      [=====>...............] recovery = 28.2% (591872/2097152)
      finish=2.1min speed=11837K/sec
```

### 5.3 å•ç›˜æ–‡ä»¶ç³»ç»Ÿæ›´æ¢æµç¨‹


**ğŸ”¸ éRAIDç¯å¢ƒçš„ç£ç›˜æ›´æ¢**

```bash
# æ­¥éª¤1: å¸è½½æ–‡ä»¶ç³»ç»Ÿ
umount /dev/sdb1

# æ­¥éª¤2: æ•°æ®è¿ç§»åˆ°ä¸´æ—¶ä½ç½®
rsync -av /old_mount_point/ /tmp/backup_location/

# æ­¥éª¤3: ç‰©ç†æ›´æ¢ç£ç›˜

# æ­¥éª¤4: å¯¹æ–°ç£ç›˜åˆ†åŒºå’Œæ ¼å¼åŒ–
fdisk /dev/sdb
mkfs.ext4 /dev/sdb1

# æ­¥éª¤5: æ¢å¤æ•°æ®
mount /dev/sdb1 /old_mount_point
rsync -av /tmp/backup_location/ /old_mount_point/

# æ­¥éª¤6: æ›´æ–°fstab(å¦‚æœUUIDå˜åŒ–)
blkid /dev/sdb1  # è·å–æ–°çš„UUID
vim /etc/fstab   # æ›´æ–°å¯¹åº”æ¡ç›®
```

### 5.4 ç£ç›˜æ›´æ¢å¸¸è§é—®é¢˜å¤„ç†


**ğŸ”¸ æ–°ç£ç›˜å®¹é‡ä¸åŒçš„å¤„ç†**

```bash
# å¦‚æœæ–°ç£ç›˜å®¹é‡æ›´å¤§
# 1. å…ˆæŒ‰åŸå¤§å°åˆ›å»ºåˆ†åŒº
fdisk /dev/sdb
# 2. åŠ å…¥RAIDé‡å»ºå®Œæˆåå†æ‰©å±•
mdadm --grow /dev/md0 --size=max

# å¦‚æœæ–°ç£ç›˜å®¹é‡æ›´å°
# éœ€è¦é€‰æ‹©å®¹é‡ç›¸ç­‰æˆ–æ›´å¤§çš„ç£ç›˜
# RAIDæ— æ³•æ¥å—æ›´å°çš„ç£ç›˜
```

**ğŸ”¸ UUIDå’Œè®¾å¤‡åå˜åŒ–å¤„ç†**

```bash
# 1. æ›´æ–°/etc/fstabä¸­çš„UUID
# è·å–æ–°çš„UUID
lsblk -f

# 2. æ›´æ–°GRUBé…ç½®(å¦‚æœæ˜¯ç³»ç»Ÿç›˜)
grub2-mkconfig -o /boot/grub2/grub.cfg

# 3. æ›´æ–°initramfs(å¦‚æœéœ€è¦)
dracut -f
```

**æ›´æ¢å®ŒæˆéªŒè¯æ£€æŸ¥å•**ï¼š
```
â–¡ RAIDé˜µåˆ—çŠ¶æ€æ­£å¸¸ (cat /proc/mdstat)
â–¡ æ–‡ä»¶ç³»ç»ŸæŒ‚è½½æ­£å¸¸ (df -h)  
â–¡ æ•°æ®å®Œæ•´æ€§éªŒè¯ (md5sumå¯¹æ¯”)
â–¡ ç³»ç»Ÿå¯åŠ¨æµ‹è¯• (é‡å¯æµ‹è¯•)
â–¡ ç›‘æ§å‘Šè­¦æ¸…é™¤
â–¡ æ–‡æ¡£è®°å½•æ›´æ–°
```

---

## 6. ğŸš€ å¤šç£ç›˜æ€§èƒ½ä¼˜åŒ–é…ç½®


### 6.1 ç£ç›˜æ€§èƒ½åŸºç¡€ç†è§£


**ç£ç›˜æ€§èƒ½çš„å…³é”®æŒ‡æ ‡**ï¼š

```
IOPS (æ¯ç§’IOæ“ä½œæ•°):
- æœºæ¢°ç¡¬ç›˜: 100-200 IOPS    â† è½¬é€Ÿé™åˆ¶
- SATA SSD: 40,000+ IOPS    â† é—ªå­˜æŠ€æœ¯  
- NVMe SSD: 100,000+ IOPS   â† æ›´å¿«æ¥å£

ååé‡ (MB/s):
- æœºæ¢°ç¡¬ç›˜: 80-160 MB/s     â† ç£å¤´ç§»åŠ¨é™åˆ¶
- SATA SSD: 300-550 MB/s    â† SATAæ¥å£é™åˆ¶
- NVMe SSD: 1500-3500 MB/s  â† PCIeæ¥å£ä¼˜åŠ¿

å»¶è¿Ÿ (æ¯«ç§’):
- æœºæ¢°ç¡¬ç›˜: 8-15ms          â† æœºæ¢°å¯»å€æ—¶é—´
- SSD: 0.1-0.5ms           â† ç”µå­è®¿é—®
```

### 6.2 æ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–é…ç½®


**ğŸ”¸ ext4æ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–**

```bash
# åˆ›å»ºæ—¶çš„ä¼˜åŒ–å‚æ•°
mkfs.ext4 -b 4096 -E stride=32,stripe-width=64 /dev/md0

# æŒ‚è½½æ—¶çš„ä¼˜åŒ–é€‰é¡¹
mount -t ext4 -o noatime,data=writeback,barrier=0 /dev/md0 /data

# fstabä¸­çš„ä¼˜åŒ–é…ç½®
/dev/md0 /data ext4 defaults,noatime,data=writeback,barrier=0 0 2
```

**å‚æ•°è¯´æ˜**ï¼š
- `noatime`: ä¸æ›´æ–°æ–‡ä»¶è®¿é—®æ—¶é—´ï¼Œå‡å°‘å†™æ“ä½œ
- `data=writeback`: æ•°æ®å¼‚æ­¥å†™å…¥ï¼Œæé«˜å†™æ€§èƒ½  
- `barrier=0`: ç¦ç”¨å†™å±éšœï¼Œæå‡æ€§èƒ½(æœ‰æ•°æ®é£é™©)

**ğŸ”¸ xfsæ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–**

```bash
# åˆ›å»ºxfsæ–‡ä»¶ç³»ç»Ÿ
mkfs.xfs -f -d agcount=8 -l size=128m /dev/md0

# ä¼˜åŒ–æŒ‚è½½å‚æ•°
mount -t xfs -o noatime,largeio,inode64 /dev/md0 /data
```

### 6.3 IOè°ƒåº¦å™¨ä¼˜åŒ–


**æŸ¥çœ‹å’Œè®¾ç½®IOè°ƒåº¦å™¨**ï¼š
```bash
# æŸ¥çœ‹å½“å‰IOè°ƒåº¦å™¨
cat /sys/block/sda/queue/scheduler

# æŸ¥çœ‹æ‰€æœ‰ç£ç›˜çš„è°ƒåº¦å™¨
for disk in /sys/block/sd*; do
    echo "$disk: $(cat $disk/queue/scheduler)"
done
```

**ä¸åŒè°ƒåº¦å™¨çš„ç‰¹ç‚¹**ï¼š
| è°ƒåº¦å™¨ | é€‚ç”¨åœºæ™¯ | ç‰¹ç‚¹è¯´æ˜ |
|-------|----------|----------|
| **noop** | SSDç£ç›˜ | ç®€å•FIFOï¼Œé€‚åˆéšæœºè®¿é—®å¥½çš„è®¾å¤‡ |
| **deadline** | æ•°æ®åº“ | ä¿è¯è¯»å†™å»¶è¿Ÿä¸Šé™ï¼Œé€‚åˆå®æ—¶åº”ç”¨ |
| **cfq** | æ¡Œé¢ç³»ç»Ÿ | å…¬å¹³é˜Ÿåˆ—ï¼Œä¿è¯å„è¿›ç¨‹å¹³ç­‰è®¿é—® |
| **mq-deadline** | ç°ä»£SSD | å¤šé˜Ÿåˆ—è°ƒåº¦ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPU |

**è®¾ç½®IOè°ƒåº¦å™¨**ï¼š
```bash
# ä¸´æ—¶è®¾ç½®
echo deadline > /sys/block/sda/queue/scheduler

# æ°¸ä¹…è®¾ç½®(é€šè¿‡å†…æ ¸å‚æ•°)
# ç¼–è¾‘ /etc/default/grub
GRUB_CMDLINE_LINUX="elevator=deadline"
# æ›´æ–°grubé…ç½®
grub2-mkconfig -o /boot/grub2/grub.cfg
```

### 6.4 RAIDçº§åˆ«æ€§èƒ½å¯¹æ¯”ä¸é€‰æ‹©


**RAIDæ€§èƒ½ç‰¹ç‚¹å¯¹æ¯”**ï¼š

```
RAID0 (æ¡å¸¦åŒ–):
è¯»æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ ä¼˜ç§€ (å¤šç›˜å¹¶è¡Œ)
å†™æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ ä¼˜ç§€ (å¤šç›˜å¹¶è¡Œ)  
å¯é æ€§: â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹â—‹ æå·® (ä»»ä½•ä¸€ç›˜æ•…éšœå…¨å®Œ)
æˆæœ¬:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ æœ€ä½ (100%åˆ©ç”¨ç‡)

RAID1 (é•œåƒ):
è¯»æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     è‰¯å¥½ (å¯å¹¶è¡Œè¯»)
å†™æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       ä¸€èˆ¬ (éœ€è¦åŒå†™)
å¯é æ€§: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     è‰¯å¥½ (å¯å®¹å¿1ç›˜æ•…éšœ)  
æˆæœ¬:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       è¾ƒé«˜ (50%åˆ©ç”¨ç‡)

RAID5 (æ ¡éªŒ):
è¯»æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     è‰¯å¥½ (å¤šç›˜å¹¶è¡Œè¯»)
å†™æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆ         è¾ƒå·® (éœ€è¦æ ¡éªŒè®¡ç®—)
å¯é æ€§: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       ä¸€èˆ¬ (å¯å®¹å¿1ç›˜æ•…éšœ)
æˆæœ¬:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     é€‚ä¸­ (n-1/nåˆ©ç”¨ç‡)

RAID10 (é•œåƒ+æ¡å¸¦):
è¯»æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ ä¼˜ç§€ (å¹¶è¡Œè¯»+æ¡å¸¦)
å†™æ€§èƒ½: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     è‰¯å¥½ (é•œåƒå†™)
å¯é æ€§: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     è‰¯å¥½ (å¯å®¹å¿å¤šç›˜æ•…éšœ)
æˆæœ¬:   â–ˆâ–ˆâ–ˆâ–ˆ         è¾ƒé«˜ (50%åˆ©ç”¨ç‡)
```

**æ€§èƒ½è°ƒä¼˜å»ºè®®**ï¼š
```bash
# RAID5å†™æ€§èƒ½ä¼˜åŒ–
echo 8192 > /sys/block/md0/md/stripe_cache_size

# è®¾ç½®åˆé€‚çš„chunkå¤§å°
mdadm --create /dev/md0 --level=5 --chunk=64 --raid-devices=3 /dev/sd[bcd]

# ç›‘æ§RAIDæ€§èƒ½
iostat -x 1 | grep md0
```

### 6.5 ç³»ç»Ÿçº§æ€§èƒ½ä¼˜åŒ–


**ğŸ”¸ å†…æ ¸å‚æ•°è°ƒä¼˜**

```bash
# ç¼–è¾‘ /etc/sysctl.conf
# å¢åŠ è„æ•°æ®åˆ·æ–°é˜ˆå€¼
vm.dirty_background_ratio = 5
vm.dirty_ratio = 10

# å‡å°‘è„æ•°æ®æœ€å¤§å­˜æ´»æ—¶é—´
vm.dirty_expire_centisecs = 3000
vm.dirty_writeback_centisecs = 500

# åº”ç”¨è®¾ç½®
sysctl -p
```

**ğŸ”¸ è¯»å†™ç¼“å­˜ä¼˜åŒ–**

```bash
# å¢åŠ è¯»ç¼“å­˜
echo 8192 > /sys/block/md0/queue/read_ahead_kb

# è®¾ç½®é˜Ÿåˆ—æ·±åº¦
echo 32 > /sys/block/sda/queue/nr_requests

# ç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½
echo 0 > /sys/block/sda/queue/rotational  # SSDè®¾å¤‡
```

**æ€§èƒ½æµ‹è¯•ä¸éªŒè¯**ï¼š
```bash
# éšæœºè¯»å†™æµ‹è¯•
fio --name=random-rw --ioengine=libaio --rw=randrw --bs=4k --numjobs=4 \
    --size=1G --runtime=60 --group_reporting --filename=/data/testfile

# é¡ºåºè¯»å†™æµ‹è¯•  
dd if=/dev/zero of=/data/testfile bs=1M count=1024 oflag=direct
dd if=/data/testfile of=/dev/null bs=1M count=1024 iflag=direct
```

---

## 7. ğŸ’¾ ç£ç›˜é˜µåˆ—åŸºç¡€æ¦‚å¿µ


### 7.1 ä»€ä¹ˆæ˜¯ç£ç›˜é˜µåˆ—(RAID)


**ç®€å•ç†è§£**ï¼šRAIDå°±åƒç»„å»ºä¸€ä¸ªå·¥ä½œå›¢é˜Ÿã€‚ä¸€ä¸ªäººå¹²æ´»å¯èƒ½æ•ˆç‡ä½ã€å®¹æ˜“å‡ºé”™ï¼Œä½†å¦‚æœå‡ ä¸ªäººåä½œï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€äº’ç›¸backupã€‚RAIDå°±æ˜¯è®©å¤šå—ç¡¬ç›˜åä½œå·¥ä½œï¼Œæå‡æ€§èƒ½å’Œå¯é æ€§ã€‚

```
å•ç›˜å·¥ä½œï¼š                RAIDå·¥ä½œï¼š
  â”Œâ”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
  â”‚ç£ç›˜Aâ”‚ â† æ‰€æœ‰æ•°æ®         â”‚ç£ç›˜Aâ”‚ â”‚ç£ç›˜Bâ”‚ â”‚ç£ç›˜Câ”‚
  â”‚å­¤å†›â”‚                   â”‚ åˆ†å·¥â”‚ â”‚ åä½œâ”‚ â”‚ å¤‡ä»½â”‚
  â”‚å¥‹æˆ˜â”‚                   â”‚ åˆä½œâ”‚ â”‚ äº’è¡¥â”‚ â”‚ ä¿éšœâ”‚
  â””â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
  é£é™©å¤§                     å®‰å…¨å¯é 
```

**RAIDçš„å…¨ç§°**ï¼šRedundant Array of Independent Disksï¼ˆç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—ï¼‰

### 7.2 å¸¸ç”¨RAIDçº§åˆ«è¯¦è§£


**ğŸ”¸ RAID 0 - æ¡å¸¦åŒ–ï¼ˆè¿½æ±‚é€Ÿåº¦ï¼‰**

```
æ•°æ®åˆ†å¸ƒç¤ºæ„ï¼š
æ–‡ä»¶å†…å®¹: ABCDEFGH

ç£ç›˜1: A C E G    ç£ç›˜2: B D F H
       â†“                   â†“
   å¹¶è¡Œå†™å…¥           å¹¶è¡Œå†™å…¥
```

```bash
# åˆ›å»ºRAID0
mdadm --create /dev/md0 --level=0 --raid-devices=2 /dev/sdb /dev/sdc

# æŸ¥çœ‹æ•ˆæœ
hdparm -tT /dev/md0  # æµ‹è¯•è¯»å–é€Ÿåº¦
```

**RAID0ç‰¹ç‚¹**ï¼š
- âœ… è¯»å†™é€Ÿåº¦æœ€å¿«ï¼ˆå¤šç›˜å¹¶è¡Œï¼‰
- âœ… å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡100%
- âŒ ä»»ä½•ä¸€å—ç›˜åäº†ï¼Œæ‰€æœ‰æ•°æ®ä¸¢å¤±
- ğŸ¯ **é€‚ç”¨åœºæ™¯**ï¼šä¸´æ—¶æ–‡ä»¶ã€ç¼“å­˜æ•°æ®ã€è§†é¢‘ç¼–è¾‘

**ğŸ”¸ RAID 1 - é•œåƒï¼ˆè¿½æ±‚å®‰å…¨ï¼‰**

```
æ•°æ®åˆ†å¸ƒç¤ºæ„ï¼š
æ–‡ä»¶å†…å®¹: ABCDEFGH

ç£ç›˜1: ABCDEFGH    ç£ç›˜2: ABCDEFGH
       â†“                   â†“
     ä¸»å­˜å‚¨              é•œåƒå¤‡ä»½
```

```bash
# åˆ›å»ºRAID1
mdadm --create /dev/md1 --level=1 --raid-devices=2 /dev/sdd /dev/sde

# æ¨¡æ‹Ÿæ•…éšœæµ‹è¯•
mdadm --manage /dev/md1 --fail /dev/sde  # æ¨¡æ‹Ÿsdeæ•…éšœ
# ç³»ç»Ÿä»ç„¶æ­£å¸¸å·¥ä½œï¼Œåªæ˜¯å¤±å»å†—ä½™
```

**RAID1ç‰¹ç‚¹**ï¼š
- âœ… æ•°æ®å®‰å…¨æ€§æœ€é«˜ï¼ˆå®Œå…¨é•œåƒï¼‰
- âœ… è¯»å–æ€§èƒ½å¯ä»¥æå‡ï¼ˆä¸¤ç›˜å¹¶è¡Œè¯»ï¼‰
- âŒ å†™å…¥æ€§èƒ½æ— æå‡ï¼ˆéœ€è¦åŒå†™ï¼‰
- âŒ å­˜å‚¨ç©ºé—´åªæœ‰50%
- ğŸ¯ **é€‚ç”¨åœºæ™¯**ï¼šç³»ç»Ÿç›˜ã€é‡è¦æ•°æ®åº“

**ğŸ”¸ RAID 5 - åˆ†å¸ƒå¼æ ¡éªŒï¼ˆå¹³è¡¡æ–¹æ¡ˆï¼‰**

```
æ•°æ®åˆ†å¸ƒç¤ºæ„(3ç›˜RAID5)ï¼š
æ–‡ä»¶å—:    A1 A2 A3 A4 A5 A6

ç£ç›˜1:     A1 A2 P3 A4 A5 P6    â† Pæ˜¯æ ¡éªŒä¿¡æ¯
ç£ç›˜2:     A3 P2 A1 A6 P5 A4    â† æ ¡éªŒä¿¡æ¯åˆ†æ•£å­˜å‚¨
ç£ç›˜3:     P1 A3 A2 P4 A6 A5    â† ä»»æ„ä¸€ç›˜åäº†å¯æ¢å¤
```

```bash
# åˆ›å»ºRAID5ï¼ˆè‡³å°‘éœ€è¦3å—ç›˜ï¼‰
mdadm --create /dev/md5 --level=5 --raid-devices=3 /dev/sdf /dev/sdg /dev/sdh

# æ·»åŠ çƒ­å¤‡ç›˜
mdadm --manage /dev/md5 --add /dev/sdi
```

**RAID5ç‰¹ç‚¹**ï¼š
- âœ… å¹³è¡¡äº†æ€§èƒ½å’Œå®‰å…¨æ€§
- âœ… å­˜å‚¨åˆ©ç”¨ç‡è¾ƒé«˜ï¼ˆn-1/nï¼‰
- âœ… å¯å®¹å¿1å—ç£ç›˜æ•…éšœ
- âŒ å†™å…¥æ€§èƒ½ä¸€èˆ¬ï¼ˆéœ€è¦è®¡ç®—æ ¡éªŒï¼‰
- âŒ é‡å»ºæ—¶é£é™©å¤§ï¼ˆå¦‚æœå†åä¸€å—ç›˜æ•°æ®å…¨ä¸¢ï¼‰
- ğŸ¯ **é€‚ç”¨åœºæ™¯**ï¼šä¸€èˆ¬æœåŠ¡å™¨ã€æ–‡ä»¶å­˜å‚¨

### 7.3 RAIDåˆ›å»ºä¸ç®¡ç†å®æˆ˜


**ğŸ”¸ å®Œæ•´çš„RAID5åˆ›å»ºæµç¨‹**

```bash
# æ­¥éª¤1: æ£€æŸ¥ç£ç›˜
lsblk
fdisk -l | grep sd

# æ­¥éª¤2: æ¸…ç†ç£ç›˜ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
wipefs -a /dev/sdb /dev/sdc /dev/sdd

# æ­¥éª¤3: åˆ›å»ºRAID5
mdadm --create /dev/md0 \
    --level=5 \
    --raid-devices=3 \
    --chunk=64 \
    /dev/sdb /dev/sdc /dev/sdd

# æ­¥éª¤4: è§‚å¯Ÿåˆ›å»ºè¿›åº¦
watch -n 2 'cat /proc/mdstat'

# æ­¥éª¤5: åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ
mkfs.ext4 /dev/md0

# æ­¥éª¤6: æŒ‚è½½ä½¿ç”¨
mkdir /data
mount /dev/md0 /data

# æ­¥éª¤7: è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½
echo '/dev/md0 /data ext4 defaults 0 2' >> /etc/fstab

# æ­¥éª¤8: ä¿å­˜RAIDé…ç½®
mdadm --detail --scan >> /etc/mdadm.conf
```

**ğŸ”¸ RAIDç›‘æ§ä¸ç»´æŠ¤**

```bash
# æŸ¥çœ‹æ‰€æœ‰RAIDçŠ¶æ€
cat /proc/mdstat

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
mdadm --detail /dev/md0

# æŸ¥çœ‹å•ä¸ªç£ç›˜åœ¨RAIDä¸­çš„çŠ¶æ€
mdadm --examine /dev/sdb

# ç›‘æ§RAIDå¥åº·çŠ¶æ€è„šæœ¬
#!/bin/bash
# raid_monitor.sh
for md in /dev/md[0-9]*; do
    if [ -b "$md" ]; then
        status=$(mdadm --detail "$md" | grep "State :" | awk '{print $3}')
        if [ "$status" != "clean" ]; then
            echo "è­¦å‘Š: $md çŠ¶æ€å¼‚å¸¸: $status"
            # å‘é€å‘Šè­¦
        fi
    fi
done
```

### 7.4 ç¡¬ä»¶RAID vs è½¯ä»¶RAID


**å¯¹æ¯”åˆ†æ**ï¼š

| ç‰¹æ€§ | è½¯ä»¶RAID | ç¡¬ä»¶RAID |
|------|----------|----------|
| **æˆæœ¬** | å…è´¹ | éœ€è¦RAIDå¡(å‡ ç™¾åˆ°å‡ ä¸‡) |
| **æ€§èƒ½** | æ¶ˆè€—CPUèµ„æº | ä¸“ç”¨å¤„ç†å™¨ï¼Œä¸å ç”¨CPU |
| **çµæ´»æ€§** | éå¸¸çµæ´»ï¼Œæ˜“äºè°ƒæ•´ | ä¾èµ–å‚å•†æ”¯æŒ |
| **å…¼å®¹æ€§** | ç³»ç»Ÿé€šç”¨ | å¯èƒ½æœ‰å…¼å®¹é—®é¢˜ |
| **ç®¡ç†** | å‘½ä»¤è¡Œå·¥å…· | ä¸“ç”¨ç®¡ç†è½¯ä»¶ |
| **çƒ­æ’æ‹”** | æ”¯æŒ | æ›´å¥½çš„æ”¯æŒ |

**é€‰æ‹©å»ºè®®**ï¼š
```
å°å‹ç¯å¢ƒ (< 8å—ç›˜):
â†’ è½¯ä»¶RAID (mdadm)
â†’ æˆæœ¬ä½ï¼ŒåŠŸèƒ½è¶³å¤Ÿ

ä¸­å¤§å‹ç¯å¢ƒ (> 8å—ç›˜):
â†’ ç¡¬ä»¶RAID
â†’ æ€§èƒ½æ›´å¥½ï¼Œç®¡ç†æ›´æ–¹ä¾¿

ä¼ä¸šçº§ç¯å¢ƒ:
â†’ ç¡¬ä»¶RAID + ä¸“ä¸šå­˜å‚¨
â†’ ç¨³å®šæ€§å’Œæ€§èƒ½è¦æ±‚é«˜
```

---

## 8. ğŸ“Š ç£ç›˜å®¹é‡è§„åˆ’ä¸æ‰©å±•


### 8.1 å®¹é‡è§„åˆ’åŸºæœ¬åŸåˆ™


**å®¹é‡è§„åˆ’å°±åƒè§„åˆ’å®¶åº­æ”¯å‡º**ï¼šè¦è€ƒè™‘å½“å‰éœ€æ±‚ã€æœªæ¥å¢é•¿ã€çªå‘æƒ…å†µï¼Œè¿˜è¦ç•™æœ‰ä½™é‡ã€‚

```
å®¹é‡è§„åˆ’è¦ç´ ï¼š
å½“å‰ä½¿ç”¨é‡ â”€â”€â”
é¢„æœŸå¢é•¿ç‡ â”€â”€â”¤
çªå‘éœ€æ±‚   â”€â”€â”¼â”€â”€ æ€»éœ€æ±‚å®¹é‡
å¤‡ä»½éœ€æ±‚   â”€â”€â”¤
å®‰å…¨ç¼“å†²   â”€â”€â”˜
```

**ğŸ”¸ å®¹é‡éœ€æ±‚è¯„ä¼°æ–¹æ³•**

```bash
# 1. åˆ†æå½“å‰ä½¿ç”¨æƒ…å†µ
df -h                    # æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ç‡
du -sh /home/*          # æŸ¥çœ‹ç”¨æˆ·ç›®å½•å¤§å°
du -sh /var/log/*       # æŸ¥çœ‹æ—¥å¿—å¢é•¿æƒ…å†µ

# 2. åˆ†æå†å²å¢é•¿è¶‹åŠ¿
# æŸ¥çœ‹æœ€è¿‘3ä¸ªæœˆçš„å¢é•¿
for i in {1..90}; do
    date_str=$(date -d "$i days ago" +%Y%m%d)
    if [ -f "/var/log/disk_usage_$date_str.log" ]; then
        echo "$date_str: $(cat /var/log/disk_usage_$date_str.log)"
    fi
done

# 3. ç›‘æ§è„šæœ¬æ”¶é›†æ•°æ®
#!/bin/bash
# daily_disk_usage.sh
date_str=$(date +%Y%m%d)
df -h > "/var/log/disk_usage_$date_str.log"
du -sh /home /var /opt >> "/var/log/disk_usage_$date_str.log"
```

### 8.2 ä¸åŒç±»å‹æ•°æ®çš„å®¹é‡è§„åˆ’


**ğŸ”¸ æ“ä½œç³»ç»Ÿåˆ†åŒºè§„åˆ’**

```
æ¨èåˆ†åŒºæ–¹æ¡ˆï¼š

å°å‹æœåŠ¡å™¨ (æ€»å®¹é‡ < 500GB):
/boot    : 500MB     â† å†…æ ¸å’Œå¯åŠ¨æ–‡ä»¶
/        : 20-50GB   â† ç³»ç»Ÿå’Œç¨‹åºæ–‡ä»¶  
/home    : 20-30%    â† ç”¨æˆ·æ•°æ®
/var     : 20-30%    â† æ—¥å¿—å’Œå˜åŒ–æ•°æ®
/tmp     : 5-10GB    â† ä¸´æ—¶æ–‡ä»¶
swap     : å†…å­˜å¤§å°1-2å€

å¤§å‹æœåŠ¡å™¨ (æ€»å®¹é‡ > 500GB):
/boot    : 1GB
/        : 50-100GB
/usr     : 50-100GB  â† åº”ç”¨ç¨‹åºå•ç‹¬åˆ†åŒº
/home    : æ ¹æ®éœ€æ±‚
/var     : æ ¹æ®éœ€æ±‚ï¼Œæ—¥å¿—å¯èƒ½å¾ˆå¤§
/opt     : æ ¹æ®éœ€æ±‚ï¼Œç¬¬ä¸‰æ–¹è½¯ä»¶
/srv     : æ ¹æ®éœ€æ±‚ï¼ŒæœåŠ¡æ•°æ®
/tmp     : 20-50GB
swap     : 16-32GB (ä¸è¶…è¿‡å†…å­˜2å€)
```

**ğŸ”¸ æ•°æ®åº“å­˜å‚¨è§„åˆ’**

```
MySQLæ•°æ®åº“å­˜å‚¨è§„åˆ’ï¼š

æ•°æ®æ–‡ä»¶ (/var/lib/mysql/):
- æŒ‰æ—¥å¢é•¿é‡ Ã— 365å¤© Ã— 1.5å€ç¼“å†²
- è€ƒè™‘ç´¢å¼•å ç”¨(é€šå¸¸æ˜¯æ•°æ®çš„30-50%)

æ—¥å¿—æ–‡ä»¶:
- Binlog: æ—¥å˜åŒ–é‡ Ã— ä¿ç•™å¤©æ•°
- Error Log: é€šå¸¸å¾ˆå°ï¼Œ10-100MB
- Slow Log: æ ¹æ®æŸ¥è¯¢å¤æ‚åº¦

ä¸´æ—¶æ–‡ä»¶ (/tmp):
- å¤§æŸ¥è¯¢å¯èƒ½äº§ç”Ÿä¸´æ—¶æ–‡ä»¶
- å»ºè®®é¢„ç•™æ•°æ®åº“æ€»å¤§å°çš„10-20%

ç¤ºä¾‹è®¡ç®—:
æ—¥å¢æ•°æ®: 1GB
ä¿ç•™æ—¶é—´: 3å¹´
æ•°æ®å®¹é‡: 1GB Ã— 365 Ã— 3 Ã— 1.5 = 1.6TB
ç´¢å¼•å®¹é‡: 1.6TB Ã— 0.4 = 640GB  
æ€»éœ€æ±‚: 2.24TB + æ—¥å¿— + ä¸´æ—¶ â‰ˆ 2.5TB
```

### 8.3 ç£ç›˜æ‰©å±•æŠ€æœ¯


**ğŸ”¸ LVMåŠ¨æ€æ‰©å±•**

```bash
# 1. æ·»åŠ æ–°ç£ç›˜åˆ°ç°æœ‰å·ç»„
pvcreate /dev/sdf
vgextend data_vg /dev/sdf

# 2. æ‰©å±•é€»è¾‘å·
lvextend -L +500G /dev/data_vg/data_lv
# æˆ–è€…ä½¿ç”¨æ‰€æœ‰å¯ç”¨ç©ºé—´
lvextend -l +100%FREE /dev/data_vg/data_lv

# 3. æ‰©å±•æ–‡ä»¶ç³»ç»Ÿ
# å¯¹äºext4æ–‡ä»¶ç³»ç»Ÿ
resize2fs /dev/data_vg/data_lv

# å¯¹äºxfsæ–‡ä»¶ç³»ç»Ÿ
xfs_growfs /data

# 4. éªŒè¯æ‰©å±•ç»“æœ
df -h /data
```

**LVMæ‰©å±•ä¼˜åŠ¿**ï¼š
- âœ… åœ¨çº¿æ‰©å±•ï¼Œä¸åœæœº
- âœ… çµæ´»åˆ†é…ç£ç›˜ç©ºé—´
- âœ… æ”¯æŒå¿«ç…§å¤‡ä»½

**ğŸ”¸ RAIDåœ¨çº¿æ‰©å±•**

```bash
# RAID5æ·»åŠ æ–°ç£ç›˜æ‰©å±•
# 1. æ·»åŠ æ–°ç£ç›˜åˆ°ç°æœ‰RAID5
mdadm --manage /dev/md0 --add /dev/sdg

# 2. æ‰©å±•RAIDåˆ°4ç›˜é…ç½®
mdadm --grow /dev/md0 --raid-devices=4

# 3. ç›‘æ§é‡å»ºè¿‡ç¨‹
watch -n 2 'cat /proc/mdstat'

# 4. æ‰©å±•æ–‡ä»¶ç³»ç»Ÿ
resize2fs /dev/md0
```

### 8.4 å®¹é‡ç›‘æ§ä¸å‘Šè­¦


**ğŸ”¸ ç£ç›˜ä½¿ç”¨ç‡ç›‘æ§è„šæœ¬**

```bash
#!/bin/bash
# disk_capacity_monitor.sh

# è®¾ç½®å‘Šè­¦é˜ˆå€¼
WARNING_THRESHOLD=80
CRITICAL_THRESHOLD=90

check_disk_usage() {
    df -h | grep -E '^/dev/' | while read filesystem size used avail percent mount; do
        # æå–ä½¿ç”¨ç™¾åˆ†æ¯”æ•°å­—
        usage=$(echo $percent | sed 's/%//')
        
        if [ $usage -ge $CRITICAL_THRESHOLD ]; then
            echo "ç´§æ€¥: $mount ä½¿ç”¨ç‡è¾¾åˆ° $percent" | \
                mail -s "ç£ç›˜ç©ºé—´ç´§æ€¥å‘Šè­¦" admin@company.com
        elif [ $usage -ge $WARNING_THRESHOLD ]; then
            echo "è­¦å‘Š: $mount ä½¿ç”¨ç‡è¾¾åˆ° $percent" | \
                mail -s "ç£ç›˜ç©ºé—´è­¦å‘Š" admin@company.com
        fi
        
        # è®°å½•åˆ°æ—¥å¿—
        echo "$(date): $mount $percent" >> /var/log/disk_usage.log
    done
}

# é¢„æµ‹ç£ç›˜ç©ºé—´è€—å°½æ—¶é—´
predict_disk_full() {
    local mount_point="$1"
    local current_usage=$(df "$mount_point" | tail -1 | awk '{print $3}')
    local yesterday_log="/var/log/disk_usage_$(date -d '1 day ago' +%Y%m%d).log"
    
    if [ -f "$yesterday_log" ]; then
        local yesterday_usage=$(grep "$mount_point" "$yesterday_log" | awk '{print $3}')
        local daily_growth=$((current_usage - yesterday_usage))
        
        if [ $daily_growth -gt 0 ]; then
            local available=$(df "$mount_point" | tail -1 | awk '{print $4}')
            local days_left=$((available / daily_growth))
            echo "$mount_point é¢„è®¡ $days_left å¤©åç©ºé—´ä¸è¶³"
        fi
    fi
}

# ä¸»ç¨‹åº
check_disk_usage

# æ¯å¤©è¿è¡Œä¸€æ¬¡å®¹é‡é¢„æµ‹
if [ "$(date +%H)" == "06" ]; then
    predict_disk_full "/"
    predict_disk_full "/home"
    predict_disk_full "/var"
fi
```

**ğŸ”¸ å®šæ—¶ä»»åŠ¡é…ç½®**

```bash
# crontab -e
# æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡ç£ç›˜ä½¿ç”¨ç‡
0 * * * * /usr/local/bin/disk_capacity_monitor.sh

# æ¯å¤©ç”Ÿæˆå®¹é‡æŠ¥å‘Š
0 6 * * * /usr/local/bin/daily_capacity_report.sh

# æ¯å‘¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—
0 2 * * 0 /usr/local/bin/cleanup_old_files.sh
```

**æ¸…ç†è„šæœ¬ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
# cleanup_old_files.sh

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶(è¶…è¿‡7å¤©)
find /tmp -type f -mtime +7 -delete

# æ¸…ç†æ—§æ—¥å¿—(ä¿ç•™30å¤©)
find /var/log -name "*.log" -mtime +30 -delete

# æ¸…ç†åŒ…ç®¡ç†å™¨ç¼“å­˜
yum clean all    # CentOS/RHEL
apt-get clean    # Ubuntu/Debian

# æ¸…ç†ç³»ç»Ÿæ—¥å¿—
journalctl --vacuum-time=30d

echo "$(date): æ¸…ç†ä»»åŠ¡å®Œæˆ" >> /var/log/cleanup.log
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è´Ÿè½½å‡è¡¡ï¼šå¤šç£ç›˜åˆ†å·¥åä½œï¼Œé¿å…å•ç›˜è¿‡è½½
ğŸ”¸ æŒ‚è½½ç‚¹è§„åˆ’ï¼šåˆç†åˆ†é…ç£ç›˜ç”¨é€”ï¼Œç³»ç»Ÿæ•°æ®åˆ†ç¦»
ğŸ”¸ æ•…éšœè½¬ç§»ï¼šä¸»ç£ç›˜æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨ç£ç›˜
ğŸ”¸ çƒ­å¤‡ç›˜ï¼šå¾…æœºç£ç›˜ï¼Œæ•…éšœæ—¶è‡ªåŠ¨é¡¶æ›¿å·¥ä½œ
ğŸ”¸ ç£ç›˜æ›´æ¢ï¼šåœ¨çº¿æˆ–ç¦»çº¿æ›´æ¢æ•…éšœç£ç›˜çš„æ ‡å‡†æµç¨‹
ğŸ”¸ æ€§èƒ½ä¼˜åŒ–ï¼šæ–‡ä»¶ç³»ç»Ÿã€IOè°ƒåº¦å™¨ã€RAIDå‚æ•°è°ƒä¼˜
ğŸ”¸ RAIDæŠ€æœ¯ï¼šå¤šç£ç›˜åä½œæå‡æ€§èƒ½å’Œå¯é æ€§
ğŸ”¸ å®¹é‡è§„åˆ’ï¼šé¢„æµ‹éœ€æ±‚å¢é•¿ï¼Œåˆ¶å®šæ‰©å±•ç­–ç•¥
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ è´Ÿè½½å‡è¡¡çš„æœ¬è´¨**
```
æ ¸å¿ƒæ€æƒ³ï¼š
ä¸æŠŠé¸¡è›‹æ”¾åœ¨åŒä¸€ä¸ªç¯®å­é‡Œ â†’ åˆ†æ•£é£é™©
ä¸è®©ä¸€ä¸ªäººå¹²æ‰€æœ‰æ´»     â†’ æé«˜æ•ˆç‡
è®©åˆé€‚çš„äººå¹²åˆé€‚çš„äº‹   â†’ ä¼˜åŒ–æ€§èƒ½

å®ç°æ–¹æ³•ï¼š
æŒ‰ç”¨é€”åˆ†ç¦» â†’ ç³»ç»Ÿã€æ•°æ®ã€æ—¥å¿—åˆ†å¼€å­˜å‚¨
æŒ‰æ€§èƒ½åŒ¹é… â†’ é«˜é¢‘è®¿é—®ç”¨SSDï¼Œå¤§å®¹é‡ç”¨æœºæ¢°ç›˜
æŒ‰è´Ÿè½½åˆ†å¸ƒ â†’ ç›‘æ§ä½¿ç”¨ç‡ï¼ŒåŠ¨æ€è°ƒæ•´åˆ†é…
```

**ğŸ”¹ RAIDé€‰æ‹©çš„æƒè¡¡**
```
æ€§èƒ½ vs å®‰å…¨æ€§ vs æˆæœ¬:

è¿½æ±‚æ€§èƒ½ â†’ RAID0 (æ¡å¸¦åŒ–)
- é€Ÿåº¦æœ€å¿«ï¼Œä½†ä¸€å—ç›˜åå…¨éƒ¨ä¸¢å¤±

è¿½æ±‚å®‰å…¨ â†’ RAID1 (é•œåƒ)  
- å®Œå…¨å¤‡ä»½ï¼Œä½†æˆæœ¬é«˜ï¼Œç©ºé—´åˆ©ç”¨ç‡50%

å¹³è¡¡æ–¹æ¡ˆ â†’ RAID5/RAID10
- RAID5: æ€§èƒ½ä¸€èˆ¬ï¼Œå®‰å…¨ä¸€èˆ¬ï¼Œæˆæœ¬é€‚ä¸­
- RAID10: æ€§èƒ½å¥½ï¼Œå®‰å…¨å¥½ï¼Œæˆæœ¬è¾ƒé«˜

é€‰æ‹©åŸåˆ™ï¼š
æ•°æ®é‡è¦æ€§ > æˆæœ¬è€ƒè™‘ > æ€§èƒ½éœ€æ±‚
```

**ğŸ”¹ å®¹é‡è§„åˆ’çš„å‰ç»æ€§**
```
è§„åˆ’æ€è·¯ï¼š
å½“å‰éœ€æ±‚ â†’ äº†è§£ç°çŠ¶
æœªæ¥å¢é•¿ â†’ é¢„æµ‹è¶‹åŠ¿  
çªå‘éœ€æ±‚ â†’ é¢„ç•™ç¼“å†²
æŠ€æœ¯å‘å±• â†’ è€ƒè™‘å‡çº§

å…³é”®è¦ç´ ï¼š
æ—¶é—´ç»´åº¦ï¼šæŒ‰å¹´è§„åˆ’ï¼ŒæŒ‰å­£åº¦è°ƒæ•´
ç©ºé—´ç»´åº¦ï¼šåˆ†ç±»è§„åˆ’ï¼Œåˆ†å±‚å­˜å‚¨
æˆæœ¬ç»´åº¦ï¼šå¹³è¡¡æ€§èƒ½å’Œé¢„ç®—
é£é™©ç»´åº¦ï¼šå¤‡ä»½å’Œå†—ä½™ç­–ç•¥
```

### 9.3 å®é™…åº”ç”¨æŒ‡å¯¼


**ğŸ¯ å°å‹ä¼ä¸šæ¨èé…ç½®**
```
ç¡¬ä»¶é…ç½®ï¼š
ç³»ç»Ÿç›˜: 240GB SSD (RAID1)
æ•°æ®ç›˜: 2TB HDD Ã— 3 (RAID5)
å¤‡ä»½ç›˜: 4TB HDD Ã— 1

ç®¡ç†ç­–ç•¥ï¼š
- æ¯æ—¥è‡ªåŠ¨å¤‡ä»½é‡è¦æ•°æ®
- æ¯å‘¨æ£€æŸ¥ç£ç›˜å¥åº·çŠ¶æ€
- æ¯æœˆæ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—
- æ¯å­£åº¦è¯„ä¼°å®¹é‡éœ€æ±‚
```

**ğŸ¯ ä¸­å¤§å‹ä¼ä¸šæ¨èé…ç½®**
```
ç¡¬ä»¶é…ç½®ï¼š
ç³»ç»Ÿç›˜: 512GB SSD Ã— 2 (RAID1)
æ•°æ®ç›˜: 4TB HDD Ã— 6 (RAID10)
æ—¥å¿—ç›˜: 1TB SSD Ã— 2 (RAID1) 
çƒ­å¤‡ç›˜: å„é˜µåˆ—é…ç½®1-2å—çƒ­å¤‡

ç®¡ç†ç­–ç•¥ï¼š
- ç¡¬ä»¶RAIDå¡ + è½¯ä»¶ç›‘æ§
- è‡ªåŠ¨åŒ–æ•…éšœè½¬ç§»å’Œæ¢å¤
- åˆ†å±‚å­˜å‚¨ç­–ç•¥
- å®¹é‡é¢„æµ‹å’Œè‡ªåŠ¨æ‰©å±•
```

### 9.4 æ•…éšœå¤„ç†è¦ç‚¹


**ğŸš¨ ç´§æ€¥æƒ…å†µå¤„ç†åŸåˆ™**
```
ä¼˜å…ˆçº§æ’åºï¼š
1. ä¿è¯ç³»ç»Ÿç»§ç»­è¿è¡Œ (ä¸šåŠ¡ä¸ä¸­æ–­)
2. ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±   (æ•°æ®å®‰å…¨ç¬¬ä¸€)
3. å°½å¿«æ¢å¤å†—ä½™     (é™ä½é£é™©çª—å£)
4. åˆ†ææ•…éšœåŸå›      (é¿å…å†æ¬¡å‘ç”Ÿ)

å¤„ç†æ­¥éª¤ï¼š
å‘ç°é—®é¢˜ â†’ è¯„ä¼°å½±å“ â†’ åº”æ€¥å¤„ç† â†’ æ ¹æœ¬è§£å†³
```

**ğŸ“ æ—¥å¸¸ç»´æŠ¤æ£€æŸ¥æ¸…å•**
```
æ¯æ—¥æ£€æŸ¥ï¼š
â–¡ æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ä¸­çš„ç£ç›˜é”™è¯¯
â–¡ æ£€æŸ¥ç£ç›˜ä½¿ç”¨ç‡
â–¡ éªŒè¯å¤‡ä»½ä»»åŠ¡å®ŒæˆçŠ¶æ€

æ¯å‘¨æ£€æŸ¥ï¼š
â–¡ è¿è¡ŒSMARTå¥åº·æ£€æµ‹
â–¡ æ£€æŸ¥RAIDçŠ¶æ€å’Œé‡å»ºè¿›åº¦
â–¡ æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—§æ—¥å¿—

æ¯æœˆæ£€æŸ¥ï¼š
â–¡ åˆ†æå®¹é‡å¢é•¿è¶‹åŠ¿
â–¡ æµ‹è¯•æ•…éšœè½¬ç§»æœºåˆ¶
â–¡ æ›´æ–°ç£ç›˜å¥åº·ç›‘æ§è„šæœ¬

æ¯å­£åº¦æ£€æŸ¥ï¼š
â–¡ è¯„ä¼°å­˜å‚¨éœ€æ±‚å’Œæ‰©å±•è®¡åˆ’
â–¡ æ£€æŸ¥å¤‡ä»½æ¢å¤æµç¨‹
â–¡ æ›´æ–°åº”æ€¥å“åº”é¢„æ¡ˆ
```

### 9.5 å­¦ä¹ å»ºè®®ä¸è¿›é˜¶æ–¹å‘


**ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„**
```
åŸºç¡€æŒæ¡ â†’ æ·±å…¥ç†è§£ â†’ é«˜çº§åº”ç”¨:

ç¬¬ä¸€é˜¶æ®µï¼šåŸºæœ¬æ“ä½œ
- ç†Ÿç»ƒä½¿ç”¨fdiskã€mkfsã€mountç­‰åŸºç¡€å‘½ä»¤
- ç†è§£æ–‡ä»¶ç³»ç»Ÿå’ŒæŒ‚è½½ç‚¹æ¦‚å¿µ
- æŒæ¡åŸºæœ¬çš„RAIDåˆ›å»ºå’Œç®¡ç†

ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§ç®¡ç†
- å­¦ä¹ LVMåŠ¨æ€å·ç®¡ç†
- æŒæ¡æ€§èƒ½ç›‘æ§å’Œè°ƒä¼˜
- ç†è§£å­˜å‚¨ç½‘ç»œæŠ€æœ¯(SAN/NAS)

ç¬¬ä¸‰é˜¶æ®µï¼šä¼ä¸šåº”ç”¨
- å­¦ä¹ åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ
- æŒæ¡å­˜å‚¨è™šæ‹ŸåŒ–æŠ€æœ¯
- äº†è§£äº‘å­˜å‚¨å’Œè½¯ä»¶å®šä¹‰å­˜å‚¨
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- è´Ÿè½½å‡è¡¡åˆ†æ•£é™©ï¼Œåˆç†è§„åˆ’ä¿å¹³å®‰
- çƒ­å¤‡ç›‘æ§é˜²æœªç„¶ï¼Œæ•…éšœè½¬ç§»è¦è‡ªç„¶  
- å®¹é‡è§„åˆ’çœ‹é•¿è¿œï¼Œæ€§èƒ½è°ƒä¼˜åœ¨ç»†èŠ‚
- RAIDé€‰æ‹©çœ‹éœ€æ±‚ï¼Œå®‰å…¨æ€§èƒ½æˆæœ¬è¡¡

**é‡è¦æé†’**ï¼š
> ğŸ’¡ **ç£ç›˜ç®¡ç†æ— å°äº‹ï¼Œæ•°æ®å®‰å…¨æœ€é‡è¦**
> 
> ä»»ä½•ç£ç›˜æ“ä½œå‰éƒ½è¦ï¼š
> - ç¡®è®¤æ•°æ®å·²å¤‡ä»½
> - äº†è§£æ“ä½œé£é™©
> - åˆ¶å®šå›é€€æ–¹æ¡ˆ
> - åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯