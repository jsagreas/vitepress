---
title: 13ã€æ—¥å¿—æ–‡ä»¶ç›‘æ§ä¸åˆ†æ
---
## ğŸ“š ç›®å½•

1. [æ—¥å¿—ç›‘æ§åŸºç¡€æ¦‚å¿µ](#1-æ—¥å¿—ç›‘æ§åŸºç¡€æ¦‚å¿µ)
2. [tailå®æ—¶æ—¥å¿—ç›‘æ§](#2-tailå®æ—¶æ—¥å¿—ç›‘æ§)
3. [grepæ—¥å¿—å†…å®¹è¿‡æ»¤](#3-grepæ—¥å¿—å†…å®¹è¿‡æ»¤)
4. [awkæ—¥å¿—æ•°æ®æå–](#4-awkæ—¥å¿—æ•°æ®æå–)
5. [æ—¥å¿—ç»Ÿè®¡åˆ†ææŠ€å·§](#5-æ—¥å¿—ç»Ÿè®¡åˆ†ææŠ€å·§)
6. [é”™è¯¯æ¨¡å¼è¯†åˆ«](#6-é”™è¯¯æ¨¡å¼è¯†åˆ«)
7. [æ—¥å¿—å‘Šè­¦æœºåˆ¶](#7-æ—¥å¿—å‘Šè­¦æœºåˆ¶)
8. [æ—¥å¿—å¼‚å¸¸æ£€æµ‹](#8-æ—¥å¿—å¼‚å¸¸æ£€æµ‹)
9. [æ€§èƒ½æŒ‡æ ‡æå–](#9-æ€§èƒ½æŒ‡æ ‡æå–)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“Š æ—¥å¿—ç›‘æ§åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ—¥å¿—ç›‘æ§

**ç®€å•ç†è§£**ï¼šæ—¥å¿—ç›‘æ§å°±åƒåŒ»ç”Ÿçœ‹ç—…å†ï¼Œé€šè¿‡æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶äº§ç”Ÿçš„"è®°å½•"ï¼Œäº†è§£ç³»ç»Ÿå¥åº·çŠ¶å†µã€‚

```
ç”Ÿæ´»ç±»æ¯”ï¼š
çœ‹ç—…å† â†’ åŒ»ç”Ÿäº†è§£ç—…æƒ…
çœ‹æ—¥å¿— â†’ è¿ç»´äº†è§£ç³»ç»ŸçŠ¶æ€

æ—¥å¿—ä½œç”¨ï¼š
ğŸ” é—®é¢˜è¯Šæ–­ï¼šå‡ºé”™æ—¶çŸ¥é“å“ªé‡Œæœ‰é—®é¢˜
ğŸ“ˆ æ€§èƒ½åˆ†æï¼šäº†è§£ç³»ç»Ÿè¿è¡Œæ•ˆç‡
ğŸš¨ å¼‚å¸¸é¢„è­¦ï¼šæå‰å‘ç°æ½œåœ¨é—®é¢˜
ğŸ“‹ è¡Œä¸ºå®¡è®¡ï¼šè®°å½•ç”¨æˆ·æ“ä½œè½¨è¿¹
```

### 1.2 å¸¸è§æ—¥å¿—æ–‡ä»¶ä½ç½®

**æ ¸å¿ƒç›®å½•**ï¼šLinuxç³»ç»ŸæŠŠæ—¥å¿—éƒ½æ”¾åœ¨ `/var/log/` ç›®å½•ä¸‹

```
é‡è¦æ—¥å¿—æ–‡ä»¶åˆ†å¸ƒï¼š
/var/log/
â”œâ”€â”€ messages          # ç³»ç»Ÿä¸»è¦æ¶ˆæ¯ï¼ˆæœ€é‡è¦ï¼‰
â”œâ”€â”€ secure            # å®‰å…¨ç›¸å…³æ—¥å¿—
â”œâ”€â”€ boot.log          # ç³»ç»Ÿå¯åŠ¨æ—¥å¿—  
â”œâ”€â”€ cron              # å®šæ—¶ä»»åŠ¡æ—¥å¿—
â”œâ”€â”€ maillog           # é‚®ä»¶æœåŠ¡æ—¥å¿—
â”œâ”€â”€ httpd/            # Apacheç½‘é¡µæœåŠ¡æ—¥å¿—
â”‚   â”œâ”€â”€ access_log    # è®¿é—®æ—¥å¿—
â”‚   â””â”€â”€ error_log     # é”™è¯¯æ—¥å¿—
â””â”€â”€ nginx/            # Nginxç½‘é¡µæœåŠ¡æ—¥å¿—
    â”œâ”€â”€ access.log
    â””â”€â”€ error.log
```

ğŸ’¡ **è®°å¿†æŠ€å·§**ï¼š
- `messages` = ç³»ç»Ÿæ¶ˆæ¯ï¼Œæœ€å…¨é¢
- `secure` = å®‰å…¨ç™»å½•ï¼Œè°è¿›æ¥äº†
- `boot.log` = å¯åŠ¨æ—¥å¿—ï¼Œå¼€æœºè®°å½•
- `cron` = å®šæ—¶ä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œ

### 1.3 æ—¥å¿—æ ¼å¼åŸºç¡€

**æ ‡å‡†æ—¥å¿—æ ¼å¼**ï¼šå¤§éƒ¨åˆ†Linuxæ—¥å¿—éƒ½æœ‰å›ºå®šæ ¼å¼

```
å…¸å‹æ—¥å¿—è¡Œæ ¼å¼ï¼š
æ—¶é—´æˆ³ ä¸»æœºå æœåŠ¡å[è¿›ç¨‹ID]: æ¶ˆæ¯å†…å®¹

ç¤ºä¾‹ï¼š
Sep 15 14:30:25 web01 sshd[12345]: Accepted password for user from 192.168.1.100

è§£è¯»ï¼š
Sep 15 14:30:25  â† æ—¶é—´ï¼ˆ9æœˆ15æ—¥ 14:30:25ï¼‰
web01            â† ä¸»æœºå  
sshd[12345]      â† SSHæœåŠ¡ï¼Œè¿›ç¨‹å·12345
Accepted...      â† å…·ä½“æ¶ˆæ¯ï¼šç”¨æˆ·ç™»å½•æˆåŠŸ
```

---

## 2. ğŸ‘€ tailå®æ—¶æ—¥å¿—ç›‘æ§


### 2.1 tailå‘½ä»¤åŸºç¡€ç”¨æ³•

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š`tail` å°±åƒç«™åœ¨æ–‡ä»¶æœ«å°¾å‘å‰çœ‹ï¼Œä¸“é—¨æŸ¥çœ‹æ–‡ä»¶æœ€åå‡ è¡Œ

**åŸºç¡€è¯­æ³•**ï¼š
```bash
tail [é€‰é¡¹] æ–‡ä»¶å
```

### 2.2 å¸¸ç”¨ç›‘æ§æ¨¡å¼


#### ğŸ”¸ æŸ¥çœ‹æ–‡ä»¶æœ«å°¾å†…å®¹

```bash
# æŸ¥çœ‹æœ€å10è¡Œï¼ˆé»˜è®¤ï¼‰
tail /var/log/messages

# æŸ¥çœ‹æœ€å20è¡Œ
tail -n 20 /var/log/messages
# æˆ–ç®€å†™ä¸º
tail -20 /var/log/messages
```

#### ğŸ”¸ å®æ—¶ç›‘æ§ï¼ˆæœ€é‡è¦ï¼‰

```bash
# å®æ—¶ç›‘æ§æ—¥å¿—æ›´æ–°ï¼ˆæœ€å¸¸ç”¨ï¼‰
tail -f /var/log/messages

# ä»æ–‡ä»¶æœ«å°¾å¼€å§‹ç›‘æ§
tail -f /var/log/httpd/access_log

# ç›‘æ§å¤šä¸ªæ–‡ä»¶
tail -f /var/log/messages /var/log/secure
```

ğŸ’¡ **ä½¿ç”¨æŠ€å·§**ï¼š
- `-f` = followï¼Œè·Ÿéšæ–‡ä»¶æ›´æ–°
- `Ctrl+C` é€€å‡ºç›‘æ§
- é€‚åˆå®æ—¶æŸ¥çœ‹ç½‘ç«™è®¿é—®ã€é”™è¯¯ç­‰

#### ğŸ”¸ é«˜çº§ç›‘æ§é€‰é¡¹

```bash
# ä»ç¬¬100è¡Œå¼€å§‹æ˜¾ç¤ºåˆ°æ–‡ä»¶æœ«å°¾
tail -n +100 /var/log/messages

# æ˜¾ç¤ºæœ€å5MBçš„å†…å®¹
tail -c 5M /var/log/large.log

# æ–‡ä»¶è½®è½¬åç»§ç»­ç›‘æ§ï¼ˆé‡è¦ï¼‰
tail -F /var/log/messages
```

**-f ä¸ -F çš„åŒºåˆ«**ï¼š
```
-fï¼šæ–‡ä»¶åˆ é™¤åç›‘æ§åœæ­¢
-Fï¼šæ–‡ä»¶åˆ é™¤é‡å»ºåç»§ç»­ç›‘æ§ï¼ˆæ¨èï¼‰

å®é™…åœºæ™¯ï¼š
æ—¥å¿—è½®è½¬æ—¶ï¼Œæ—§æ–‡ä»¶ â†’ å‹ç¼©
æ–°æ–‡ä»¶ â†’ é‡æ–°åˆ›å»º
-F èƒ½è‡ªåŠ¨è·Ÿä¸Šæ–°æ–‡ä»¶
```

### 2.3 å®æˆ˜ç›‘æ§åœºæ™¯


#### ğŸ“± **åœºæ™¯1ï¼šç½‘ç«™å®æ—¶è®¿é—®ç›‘æ§**

```bash
# ç›‘æ§ç½‘ç«™è®¿é—®æ—¥å¿—
tail -f /var/log/nginx/access.log

# çœ‹åˆ°çš„å†…å®¹ç±»ä¼¼ï¼š
# 192.168.1.100 - - [15/Sep/2025:14:30:25] "GET /index.html HTTP/1.1" 200 1024
```

#### ğŸš¨ **åœºæ™¯2ï¼šç³»ç»Ÿé”™è¯¯å®æ—¶ç›‘æ§**

```bash
# ç›‘æ§ç³»ç»Ÿé”™è¯¯
tail -f /var/log/messages | grep -i error

# åªçœ‹SSHç™»å½•æƒ…å†µ
tail -f /var/log/secure | grep sshd
```

---

## 3. ğŸ” grepæ—¥å¿—å†…å®¹è¿‡æ»¤


### 3.1 grepåŸºç¡€æ¦‚å¿µ

**ç®€å•ç†è§£**ï¼š`grep` å°±åƒæ–‡æœ¬æœç´¢å·¥å…·ï¼Œåœ¨å¤§é‡æ—¥å¿—ä¸­æ‰¾åˆ°ä½ å…³å¿ƒçš„å†…å®¹

**ç”Ÿæ´»ç±»æ¯”**ï¼š
```
æŸ¥å­—å…¸ â†’ æ‰¾ç‰¹å®šå•è¯
grep    â†’ åœ¨æ—¥å¿—ä¸­æ‰¾ç‰¹å®šå†…å®¹
```

### 3.2 åŸºç¡€è¿‡æ»¤è¯­æ³•


#### ğŸ”¸ åŸºæœ¬æœç´¢

```bash
# æœç´¢åŒ…å«"error"çš„è¡Œ
grep "error" /var/log/messages

# å¿½ç•¥å¤§å°å†™æœç´¢
grep -i "error" /var/log/messages

# æ˜¾ç¤ºè¡Œå·
grep -n "error" /var/log/messages

# æœç´¢å¤šä¸ªæ–‡ä»¶
grep "failed" /var/log/messages /var/log/secure
```

#### ğŸ”¸ å®ç”¨é€‰é¡¹ç»„åˆ

```bash
# æ˜¾ç¤ºåŒ¹é…è¡Œçš„å‰å3è¡Œï¼ˆçœ‹ä¸Šä¸‹æ–‡ï¼‰
grep -A 3 -B 3 "error" /var/log/messages

# åªæ˜¾ç¤ºåŒ¹é…çš„æ–‡ä»¶å
grep -l "error" /var/log/*

# ç»Ÿè®¡åŒ¹é…è¡Œæ•°
grep -c "error" /var/log/messages

# åå‘åŒ¹é…ï¼ˆä¸åŒ…å«çš„è¡Œï¼‰
grep -v "INFO" /var/log/application.log
```

### 3.3 æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤


#### ğŸ”¸ å¸¸ç”¨æ­£åˆ™æ¨¡å¼

```bash
# åŒ¹é…IPåœ°å€æ¨¡å¼
grep -E "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b" /var/log/messages

# åŒ¹é…æ—¶é—´èŒƒå›´ï¼ˆ14ç‚¹åˆ°15ç‚¹ï¼‰
grep "14:[0-9][0-9]:[0-9][0-9]" /var/log/messages

# åŒ¹é…å¤šä¸ªå…³é”®è¯ï¼ˆæˆ–å…³ç³»ï¼‰
grep -E "(error|failed|warning)" /var/log/messages

# åŒ¹é…å¼€å¤´çš„æ¨¡å¼
grep "^Sep 15" /var/log/messages
```

ğŸ’¡ **æ­£åˆ™è¡¨è¾¾å¼è¯´æ˜**ï¼š
- `\b` = å•è¯è¾¹ç•Œ
- `[0-9]{1,3}` = 1åˆ°3ä¸ªæ•°å­—
- `^` = è¡Œå¼€å¤´
- `$` = è¡Œç»“å°¾
- `|` = æˆ–è€…ï¼ˆéœ€è¦ -E é€‰é¡¹ï¼‰

### 3.4 å®æˆ˜è¿‡æ»¤åœºæ™¯


#### ğŸ“Š **åœºæ™¯1ï¼šæŸ¥æ‰¾ç™»å½•å¤±è´¥**

```bash
# æŸ¥æ‰¾SSHç™»å½•å¤±è´¥
grep "Failed password" /var/log/secure

# çœ‹å…·ä½“å“ªäº›IPåœ¨å°è¯•ç™»å½•
grep "Failed password" /var/log/secure | grep -o "from [0-9.]*"

# ç»Ÿè®¡å¤±è´¥æ¬¡æ•°æœ€å¤šçš„IP
grep "Failed password" /var/log/secure | \
  grep -o "from [0-9.]*" | sort | uniq -c | sort -nr
```

#### ğŸš¨ **åœºæ™¯2ï¼šæŸ¥æ‰¾ç³»ç»Ÿé”™è¯¯**

```bash
# æŸ¥æ‰¾ç³»ç»Ÿå…³é”®é”™è¯¯
grep -i "error\|critical\|fatal" /var/log/messages

# æŸ¥æ‰¾å†…å­˜ç›¸å…³é—®é¢˜
grep -i "out of memory\|oom" /var/log/messages

# æŸ¥æ‰¾ç£ç›˜é—®é¢˜
grep -i "disk\|filesystem" /var/log/messages
```

---

## 4. ğŸ›  awkæ—¥å¿—æ•°æ®æå–


### 4.1 awkåŸºç¡€æ¦‚å¿µ

**ç®€å•ç†è§£**ï¼š`awk` å°±åƒExcelçš„å‡½æ•°ï¼Œèƒ½ä»æ—¥å¿—çš„æ¯ä¸€è¡Œä¸­æå–ä½ éœ€è¦çš„ç‰¹å®šå­—æ®µ

**å·¥ä½œåŸç†**ï¼š
```
awkæŠŠæ¯è¡Œåˆ†æˆè‹¥å¹²å­—æ®µï¼š
192.168.1.100 user login success
$1            $2   $3    $4

$1 = ç¬¬1ä¸ªå­—æ®µï¼ˆIPåœ°å€ï¼‰
$2 = ç¬¬2ä¸ªå­—æ®µï¼ˆç”¨æˆ·åï¼‰
$3 = ç¬¬3ä¸ªå­—æ®µï¼ˆæ“ä½œï¼‰
$4 = ç¬¬4ä¸ªå­—æ®µï¼ˆç»“æœï¼‰
```

### 4.2 åŸºç¡€å­—æ®µæå–


#### ğŸ”¸ æå–ç‰¹å®šå­—æ®µ

```bash
# æå–IPåœ°å€ï¼ˆå‡è®¾åœ¨ç¬¬1åˆ—ï¼‰
awk '{print $1}' /var/log/httpd/access_log

# æå–å¤šä¸ªå­—æ®µ
awk '{print $1, $4}' /var/log/httpd/access_log

# æå–æ—¶é—´å’ŒçŠ¶æ€ç 
awk '{print $4, $9}' /var/log/httpd/access_log
```

#### ğŸ”¸ å­—æ®µåˆ†éš”ç¬¦å¤„ç†

```bash
# æŒ‡å®šåˆ†éš”ç¬¦ï¼ˆå†’å·ï¼‰
awk -F: '{print $1}' /etc/passwd

# æŒ‡å®šå¤šä¸ªåˆ†éš”ç¬¦
awk -F'[ :]' '{print $1, $2}' /var/log/messages

# å¤„ç†å¤æ‚åˆ†éš”ç¬¦
awk -F'[" "]' '{print $1, $7}' /var/log/httpd/access_log
```

### 4.3 æ¡ä»¶è¿‡æ»¤ä¸ç»Ÿè®¡


#### ğŸ”¸ æ¡ä»¶è¿‡æ»¤

```bash
# åªå¤„ç†åŒ…å«"GET"çš„è¡Œ
awk '/GET/ {print $1}' /var/log/httpd/access_log

# æå–404é”™è¯¯çš„IP
awk '$9==404 {print $1}' /var/log/httpd/access_log

# æå–å¤§æ–‡ä»¶è¯·æ±‚ï¼ˆå‡è®¾æ–‡ä»¶å¤§å°åœ¨ç¬¬10åˆ—ï¼‰
awk '$10>1000000 {print $1, $7, $10}' /var/log/httpd/access_log
```

#### ğŸ”¸ ç»Ÿè®¡åˆ†æ

```bash
# ç»Ÿè®¡ä¸åŒIPçš„è®¿é—®æ¬¡æ•°
awk '{count[$1]++} END {for(ip in count) print ip, count[ip]}' \
  /var/log/httpd/access_log

# ç»Ÿè®¡ä¸åŒçŠ¶æ€ç æ•°é‡
awk '{status[$9]++} END {for(s in status) print s, status[s]}' \
  /var/log/httpd/access_log

# è®¡ç®—å¹³å‡å“åº”å¤§å°
awk '{sum+=$10; count++} END {print "å¹³å‡å¤§å°:", sum/count}' \
  /var/log/httpd/access_log
```

### 4.4 å®æˆ˜æ•°æ®æå–


#### ğŸ“ˆ **åœºæ™¯1ï¼šç½‘ç«™è®¿é—®åˆ†æ**

```bash
# æå–è®¿é—®æœ€å¤šçš„é¡µé¢
awk '{url[$7]++} END {for(u in url) print url[u], u}' \
  /var/log/httpd/access_log | sort -nr | head -10

# åˆ†æè®¿é—®æ—¶é—´åˆ†å¸ƒ
awk '{hour=substr($4,14,2); count[hour]++} \
  END {for(h in count) print h"ç‚¹:", count[h]}' \
  /var/log/httpd/access_log
```

#### ğŸš¨ **åœºæ™¯2ï¼šé”™è¯¯æ—¥å¿—åˆ†æ**

```bash
# æå–é”™è¯¯ä¿¡æ¯çš„å…³é”®å­—æ®µ
awk '/ERROR/ {print $1, $2, $3, $NF}' /var/log/application.log

# ç»Ÿè®¡ä¸åŒç±»å‹é”™è¯¯çš„æ•°é‡
awk '/ERROR/ {error_type=$(NF-1); count[error_type]++} \
  END {for(e in count) print e, count[e]}' /var/log/application.log
```

---

## 5. ğŸ“Š æ—¥å¿—ç»Ÿè®¡åˆ†ææŠ€å·§


### 5.1 åŸºç¡€ç»Ÿè®¡æ¦‚å¿µ

**æ ¸å¿ƒæ€è·¯**ï¼šæŠŠæ—¥å¿—å½“ä½œæ•°æ®è¡¨ï¼Œç”¨Linuxå‘½ä»¤åšæ•°æ®åˆ†æ

**å¸¸ç”¨ç»Ÿè®¡æµç¨‹**ï¼š
```
åŸå§‹æ—¥å¿— â†’ è¿‡æ»¤æå– â†’ æ’åºåˆ†ç»„ â†’ ç»Ÿè®¡è®¡æ•° â†’ ç»“æœå±•ç¤º
```

### 5.2 è®¿é—®é‡ç»Ÿè®¡åˆ†æ


#### ğŸ“ˆ **ç½‘ç«™è®¿é—®ç»Ÿè®¡**

```bash
# ç»Ÿè®¡æ¯å°æ—¶è®¿é—®é‡
awk '{print substr($4,14,2)}' /var/log/httpd/access_log | \
  sort | uniq -c | sort -nr

# ç»Ÿè®¡æ¯å¤©è®¿é—®é‡  
awk '{print substr($4,2,11)}' /var/log/httpd/access_log | \
  sort | uniq -c

# ç»Ÿè®¡ç‹¬ç«‹IPè®¿é—®æ•°
awk '{print $1}' /var/log/httpd/access_log | \
  sort | uniq | wc -l
```

#### ğŸŒ **åœ°ç†ä½ç½®åˆ†æ**

```bash
# ç»Ÿè®¡è®¿é—®IPçš„åœ°åŒºåˆ†å¸ƒï¼ˆéœ€è¦é…åˆgeoipå·¥å…·ï¼‰
awk '{print $1}' /var/log/httpd/access_log | \
  sort | uniq -c | sort -nr | head -20

# åˆ†æå†…ç½‘å¤–ç½‘è®¿é—®æ¯”ä¾‹
awk '{
  if($1 ~ /^192\.168\./ || $1 ~ /^10\./ || $1 ~ /^172\./)
    internal++
  else
    external++
} END {
  print "å†…ç½‘è®¿é—®:", internal
  print "å¤–ç½‘è®¿é—®:", external
}' /var/log/httpd/access_log
```

### 5.3 æ€§èƒ½ç»Ÿè®¡åˆ†æ


#### âš¡ **å“åº”æ—¶é—´åˆ†æ**

```bash
# ç»Ÿè®¡å“åº”æ—¶é—´åˆ†å¸ƒï¼ˆå‡è®¾å“åº”æ—¶é—´åœ¨æœ€åä¸€åˆ—ï¼‰
awk '{
  if($NF<100) fast++
  else if($NF<500) medium++
  else if($NF<1000) slow++
  else very_slow++
} END {
  print "å¿«é€Ÿ(<100ms):", fast
  print "ä¸­ç­‰(100-500ms):", medium  
  print "æ…¢é€Ÿ(500-1000ms):", slow
  print "å¾ˆæ…¢(>1000ms):", very_slow
}' /var/log/application.log
```

#### ğŸ“Š **æµé‡ç»Ÿè®¡**

```bash
# ç»Ÿè®¡æ€»æµé‡ï¼ˆå­—èŠ‚ï¼‰
awk '{sum+=$10} END {
  printf "æ€»æµé‡: %.2f MB\n", sum/1024/1024
}' /var/log/httpd/access_log

# ç»Ÿè®¡å¹³å‡æ¯æ¬¡è¯·æ±‚æµé‡
awk '{sum+=$10; count++} END {
  printf "å¹³å‡è¯·æ±‚å¤§å°: %.2f KB\n", sum/count/1024
}' /var/log/httpd/access_log
```

### 5.4 ç”¨æˆ·è¡Œä¸ºåˆ†æ


#### ğŸ‘¤ **ç”¨æˆ·æ´»è·ƒåº¦ç»Ÿè®¡**

```bash
# ç»Ÿè®¡æœ€æ´»è·ƒç”¨æˆ·ï¼ˆæŒ‰IPï¼‰
awk '{user[$1]++} END {
  for(u in user) print user[u], u
}' /var/log/httpd/access_log | sort -nr | head -10

# åˆ†æç”¨æˆ·æµè§ˆè·¯å¾„
awk '{
  print $1, $7  # IPå’Œè®¿é—®è·¯å¾„
}' /var/log/httpd/access_log | \
  sort | head -50
```

#### ğŸ•’ **æ—¶é—´æ¨¡å¼åˆ†æ**

```bash
# åˆ†æä¸€å‘¨å†…æ¯å¤©çš„è®¿é—®æ¨¡å¼
awk '{
  cmd="date -d \""substr($4,2,20)"\" +%u"
  cmd | getline weekday
  close(cmd)
  week[weekday]++
} END {
  for(i=1;i<=7;i++) print "æ˜ŸæœŸ"i":", week[i]
}' /var/log/httpd/access_log
```

---

## 6. ğŸš¨ é”™è¯¯æ¨¡å¼è¯†åˆ«


### 6.1 å¸¸è§é”™è¯¯æ¨¡å¼

**æ ¸å¿ƒæ¦‚å¿µ**ï¼šç³»ç»Ÿå‡ºé—®é¢˜æ—¶ï¼Œæ—¥å¿—ä¸­ä¼šå‡ºç°ç‰¹å®šçš„é”™è¯¯æ¨¡å¼ï¼Œå­¦ä¼šè¯†åˆ«è¿™äº›æ¨¡å¼å¾ˆé‡è¦

### 6.2 ç³»ç»Ÿçº§é”™è¯¯æ¨¡å¼


#### ğŸ’¥ **å†…å­˜ç›¸å…³é”™è¯¯**

```bash
# å†…å­˜ä¸è¶³é”™è¯¯
grep -i "out of memory\|oom-killer\|memory exhausted" /var/log/messages

# å†…å­˜åˆ†é…å¤±è´¥
grep -i "cannot allocate memory\|malloc failed" /var/log/messages

# å†…å­˜æ³„æ¼è¿¹è±¡
grep -i "memory leak\|heap overflow" /var/log/messages
```

#### ğŸ’¾ **ç£ç›˜ç›¸å…³é”™è¯¯**

```bash
# ç£ç›˜ç©ºé—´ä¸è¶³
grep -i "no space left\|disk full\|filesystem full" /var/log/messages

# ç£ç›˜IOé”™è¯¯
grep -i "i/o error\|read error\|write error" /var/log/messages

# ç£ç›˜ç¡¬ä»¶æ•…éšœ
grep -i "bad sector\|disk error\|ata error" /var/log/messages
```

#### ğŸŒ **ç½‘ç»œç›¸å…³é”™è¯¯**

```bash
# ç½‘ç»œè¿æ¥é—®é¢˜
grep -i "connection refused\|network unreachable\|timeout" /var/log/messages

# DNSè§£æé—®é¢˜
grep -i "dns\|resolve\|name resolution" /var/log/messages
```

### 6.3 åº”ç”¨çº§é”™è¯¯æ¨¡å¼


#### ğŸŒ **WebæœåŠ¡é”™è¯¯**

```bash
# HTTP 5xxé”™è¯¯ï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰
awk '$9>=500 && $9<600 {print $0}' /var/log/httpd/access_log

# HTTP 4xxé”™è¯¯ï¼ˆå®¢æˆ·ç«¯é”™è¯¯ï¼‰
awk '$9>=400 && $9<500 {print $0}' /var/log/httpd/access_log

# ç»Ÿè®¡é”™è¯¯ç±»å‹åˆ†å¸ƒ
awk '{
  if($9>=400 && $9<500) client_error++
  else if($9>=500) server_error++
  else success++
} END {
  print "æˆåŠŸè¯·æ±‚:", success
  print "å®¢æˆ·ç«¯é”™è¯¯:", client_error
  print "æœåŠ¡å™¨é”™è¯¯:", server_error
}' /var/log/httpd/access_log
```

#### ğŸ” **å®‰å…¨ç›¸å…³é”™è¯¯**

```bash
# SSHæš´åŠ›ç ´è§£å°è¯•
grep "Failed password" /var/log/secure | \
  awk '{print $(NF-3)}' | sort | uniq -c | sort -nr

# å¯ç–‘ç™»å½•æ´»åŠ¨
grep -E "authentication failure|invalid user|illegal user" /var/log/secure

# æƒé™æ‹’ç»é”™è¯¯
grep -i "permission denied\|access denied\|forbidden" /var/log/messages
```

### 6.4 é”™è¯¯æ¨¡å¼åˆ†æè„šæœ¬


#### ğŸ” **ç»¼åˆé”™è¯¯æ£€æµ‹è„šæœ¬**

```bash
#!/bin/bash
# é”™è¯¯æ¨¡å¼æ£€æµ‹è„šæœ¬

echo "=== ç³»ç»Ÿé”™è¯¯æ£€æµ‹æŠ¥å‘Š ==="
echo "æ£€æµ‹æ—¶é—´: $(date)"
echo

# æ£€æŸ¥å†…å­˜é”™è¯¯
echo "1. å†…å­˜ç›¸å…³é”™è¯¯:"
grep -i "out of memory\|oom" /var/log/messages | tail -5

# æ£€æŸ¥ç£ç›˜é”™è¯¯  
echo "2. ç£ç›˜ç›¸å…³é”™è¯¯:"
grep -i "no space\|disk full" /var/log/messages | tail -5

# æ£€æŸ¥ç½‘ç»œé”™è¯¯
echo "3. ç½‘ç»œç›¸å…³é”™è¯¯:"
grep -i "connection refused\|timeout" /var/log/messages | tail -5

# æ£€æŸ¥ç™»å½•å¤±è´¥
echo "4. ç™»å½•å¤±è´¥ç»Ÿè®¡:"
grep "Failed password" /var/log/secure | \
  awk '{print $(NF-3)}' | sort | uniq -c | sort -nr | head -5
```

---

## 7. ğŸš¨ æ—¥å¿—å‘Šè­¦æœºåˆ¶


### 7.1 å‘Šè­¦ç³»ç»ŸåŸºç¡€

**æ ¸å¿ƒæ€æƒ³**ï¼šä¸èƒ½æ€»æ˜¯äººå·¥çœ‹æ—¥å¿—ï¼Œéœ€è¦è®©ç³»ç»Ÿè‡ªåŠ¨ç›‘æ§ï¼Œå‘ç°é—®é¢˜ç«‹å³é€šçŸ¥

**å‘Šè­¦æµç¨‹**ï¼š
```
æ—¥å¿—ç›‘æ§ â†’ æ¨¡å¼è¯†åˆ« â†’ è§¦å‘æ¡ä»¶ â†’ å‘é€é€šçŸ¥ â†’ é—®é¢˜å¤„ç†
```

### 7.2 åŸºç¡€å‘Šè­¦è„šæœ¬


#### ğŸ“§ **ç®€å•é‚®ä»¶å‘Šè­¦**

```bash
#!/bin/bash
# ç®€å•çš„æ—¥å¿—å‘Šè­¦è„šæœ¬

LOG_FILE="/var/log/messages"
ERROR_COUNT=$(grep -i "error" $LOG_FILE | wc -l)
THRESHOLD=10

if [ $ERROR_COUNT -gt $THRESHOLD ]; then
    echo "è­¦å‘Šï¼šç³»ç»Ÿé”™è¯¯æ•°é‡è¶…è¿‡é˜ˆå€¼" | \
    mail -s "ç³»ç»Ÿå‘Šè­¦ï¼šé”™è¯¯æ•°é‡å¼‚å¸¸" admin@company.com
fi
```

#### ğŸ” **å®æ—¶ç›‘æ§å‘Šè­¦**

```bash
#!/bin/bash
# å®æ—¶æ—¥å¿—ç›‘æ§å‘Šè­¦

tail -f /var/log/messages | while read line; do
    # æ£€æŸ¥å…³é”®é”™è¯¯
    if echo "$line" | grep -iq "critical\|fatal\|panic"; then
        echo "ç´§æ€¥å‘Šè­¦: $line" | \
        mail -s "ç³»ç»Ÿç´§æ€¥å‘Šè­¦" admin@company.com
    fi
    
    # æ£€æŸ¥ç™»å½•å¤±è´¥
    if echo "$line" | grep -q "Failed password"; then
        echo "å®‰å…¨å‘Šè­¦: $line" | \
        mail -s "ç™»å½•å¤±è´¥å‘Šè­¦" security@company.com
    fi
done
```

### 7.3 é«˜çº§å‘Šè­¦ç­–ç•¥


#### ğŸ“Š **åŸºäºé˜ˆå€¼çš„å‘Šè­¦**

```bash
#!/bin/bash
# åŸºäºå¤šç§æŒ‡æ ‡çš„å‘Šè­¦ç³»ç»Ÿ

# è®¾ç½®é˜ˆå€¼
ERROR_THRESHOLD=50
FAILED_LOGIN_THRESHOLD=20
DISK_USAGE_THRESHOLD=85

# æ£€æŸ¥é”™è¯¯æ•°é‡
check_errors() {
    local count=$(grep -i error /var/log/messages | \
                  grep "$(date +%b\ %d)" | wc -l)
    if [ $count -gt $ERROR_THRESHOLD ]; then
        echo "ä»Šæ—¥é”™è¯¯æ•°é‡: $count (è¶…è¿‡é˜ˆå€¼ $ERROR_THRESHOLD)"
        return 1
    fi
    return 0
}

# æ£€æŸ¥å¤±è´¥ç™»å½•
check_failed_logins() {
    local count=$(grep "Failed password" /var/log/secure | \
                  grep "$(date +%b\ %d)" | wc -l)
    if [ $count -gt $FAILED_LOGIN_THRESHOLD ]; then
        echo "ä»Šæ—¥ç™»å½•å¤±è´¥: $count (è¶…è¿‡é˜ˆå€¼ $FAILED_LOGIN_THRESHOLD)"
        return 1
    fi
    return 0
}

# æ‰§è¡Œæ£€æŸ¥å¹¶å‘é€å‘Šè­¦
{
    check_errors
    check_failed_logins
} | while read alert; do
    echo "$alert" | mail -s "ç³»ç»Ÿç›‘æ§å‘Šè­¦" admin@company.com
done
```

#### â° **å®šæ—¶å‘Šè­¦ä»»åŠ¡**

```bash
# æ·»åŠ åˆ°crontab (æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡)
# crontab -e
# */5 * * * * /path/to/log_monitor.sh

#!/bin/bash
# log_monitor.sh - å®šæ—¶æ—¥å¿—ç›‘æ§è„šæœ¬

LAST_CHECK_TIME="/tmp/last_log_check"
CURRENT_TIME=$(date +%s)

# è·å–ä¸Šæ¬¡æ£€æŸ¥æ—¶é—´
if [ -f $LAST_CHECK_TIME ]; then
    LAST_TIME=$(cat $LAST_CHECK_TIME)
else
    LAST_TIME=$(date -d "5 minutes ago" +%s)
fi

# æ£€æŸ¥è¿™æ®µæ—¶é—´å†…çš„æ–°é”™è¯¯
awk -v start=$LAST_TIME -v end=$CURRENT_TIME '
{
    cmd="date -d \""$1" "$2" "$3"\" +%s"
    cmd | getline timestamp
    close(cmd)
    
    if(timestamp >= start && timestamp <= end && /ERROR|CRITICAL/) {
        print $0
    }
}' /var/log/messages | while read error_line; do
    echo "æ–°å‘ç°é”™è¯¯: $error_line" | \
    mail -s "å®æ—¶é”™è¯¯å‘Šè­¦" admin@company.com
done

# æ›´æ–°æ£€æŸ¥æ—¶é—´
echo $CURRENT_TIME > $LAST_CHECK_TIME
```

---

## 8. ğŸ” æ—¥å¿—å¼‚å¸¸æ£€æµ‹


### 8.1 å¼‚å¸¸æ£€æµ‹åŸºç¡€

**æ ¸å¿ƒæ¦‚å¿µ**ï¼šå¼‚å¸¸æ£€æµ‹æ˜¯å‘ç°ä¸æ­£å¸¸æ¨¡å¼ä¸ç¬¦çš„äº‹ä»¶ï¼Œæ¯”ç®€å•çš„é”™è¯¯æ£€æµ‹æ›´æ™ºèƒ½

**æ£€æµ‹ç±»å‹**ï¼š
```
ç»Ÿè®¡å¼‚å¸¸ï¼šè®¿é—®é‡çªç„¶å¢å¤§/å‡å°
æ—¶é—´å¼‚å¸¸ï¼šéæ­£å¸¸æ—¶é—´çš„æ´»åŠ¨
æ¨¡å¼å¼‚å¸¸ï¼šä¸å†å²è¡Œä¸ºä¸ç¬¦çš„æ¨¡å¼
```

### 8.2 è®¿é—®é‡å¼‚å¸¸æ£€æµ‹


#### ğŸ“ˆ **æµé‡å¼‚å¸¸æ£€æµ‹**

```bash
#!/bin/bash
# è®¿é—®é‡å¼‚å¸¸æ£€æµ‹è„šæœ¬

# è·å–å½“å‰å°æ—¶çš„è®¿é—®é‡
current_hour=$(date +%H)
current_access=$(awk -v hour=$current_hour '
    substr($4,14,2)==hour {count++} 
    END {print count+0}' /var/log/httpd/access_log)

# è·å–è¿‡å»7å¤©åŒä¸€æ—¶é—´çš„å¹³å‡è®¿é—®é‡
avg_access=$(for i in {1..7}; do
    date_str=$(date -d "$i days ago" +"%d/%b/%Y")
    awk -v date=$date_str -v hour=$current_hour '
        $4 ~ date && substr($4,14,2)==hour {count++}
        END {print count+0}' /var/log/httpd/access_log
done | awk '{sum+=$1; cnt++} END {print int(sum/cnt)}')

# å¼‚å¸¸åˆ¤æ–­ï¼ˆè¶…è¿‡å¹³å‡å€¼çš„2å€æˆ–å°‘äºä¸€åŠï¼‰
if [ $current_access -gt $((avg_access * 2)) ]; then
    echo "è®¿é—®é‡å¼‚å¸¸é«˜ï¼šå½“å‰ $current_accessï¼Œå¹³å‡ $avg_access"
elif [ $current_access -lt $((avg_access / 2)) ] && [ $avg_access -gt 10 ]; then
    echo "è®¿é—®é‡å¼‚å¸¸ä½ï¼šå½“å‰ $current_accessï¼Œå¹³å‡ $avg_access"
fi
```

#### ğŸš¨ **æ”»å‡»æ¨¡å¼æ£€æµ‹**

```bash
#!/bin/bash
# æ£€æµ‹å¯èƒ½çš„æ”»å‡»æ¨¡å¼

# æ£€æµ‹SQLæ³¨å…¥å°è¯•
sql_injection_count=$(grep -i "union\|select\|insert\|update\|delete" \
                     /var/log/httpd/access_log | \
                     grep "$(date +%d/%b/%Y)" | wc -l)

if [ $sql_injection_count -gt 50 ]; then
    echo "å¯èƒ½é­å—SQLæ³¨å…¥æ”»å‡»ï¼šæ£€æµ‹åˆ° $sql_injection_count æ¬¡å°è¯•"
fi

# æ£€æµ‹ç›®å½•éå†æ”»å‡»
directory_traversal=$(grep -E "\.\./|\.\.\\" /var/log/httpd/access_log | \
                     grep "$(date +%d/%b/%Y)" | wc -l)

if [ $directory_traversal -gt 20 ]; then
    echo "å¯èƒ½é­å—ç›®å½•éå†æ”»å‡»ï¼šæ£€æµ‹åˆ° $directory_traversal æ¬¡å°è¯•"
fi

# æ£€æµ‹æ‰«æå™¨æ´»åŠ¨
scanner_activity=$(awk '{print $1}' /var/log/httpd/access_log | \
                  grep "$(date +%d/%b/%Y)" | \
                  sort | uniq -c | awk '$1>100 {count++} END {print count+0}')

if [ $scanner_activity -gt 5 ]; then
    echo "æ£€æµ‹åˆ°æ‰«æå™¨æ´»åŠ¨ï¼š$scanner_activity ä¸ªIPå¼‚å¸¸æ´»è·ƒ"
fi
```

### 8.3 è¡Œä¸ºå¼‚å¸¸æ£€æµ‹


#### ğŸ‘¤ **ç”¨æˆ·è¡Œä¸ºå¼‚å¸¸**

```bash
#!/bin/bash
# ç”¨æˆ·è¡Œä¸ºå¼‚å¸¸æ£€æµ‹

# æ£€æµ‹æ·±å¤œç™»å½•ï¼ˆ22:00-06:00ï¼‰
night_logins=$(awk '
    /Accepted password/ {
        hour=substr($3,1,2)
        if(hour>=22 || hour<=6) {
            print $0
        }
    }' /var/log/secure | grep "$(date +%b\ %d)" | wc -l)

if [ $night_logins -gt 0 ]; then
    echo "æ£€æµ‹åˆ°æ·±å¤œç™»å½•æ´»åŠ¨ï¼š$night_logins æ¬¡"
fi

# æ£€æµ‹å¼‚åœ°ç™»å½•ï¼ˆéœ€è¦é…åˆIPåœ°ç†ä½ç½®åº“ï¼‰
foreign_logins=$(awk '/Accepted password/ {
    # æå–IPåœ°å€
    for(i=1;i<=NF;i++) {
        if($i=="from") {
            ip=$(i+1)
            # è¿™é‡Œå¯ä»¥è°ƒç”¨geoipå·¥å…·æ£€æŸ¥IPä½ç½®
            print ip
        }
    }
}' /var/log/secure | grep "$(date +%b\ %d)" | sort | uniq)

echo "ä»Šæ—¥ç™»å½•IPåœ°å€ï¼š$foreign_logins"
```

#### ğŸ”„ **æœåŠ¡å¼‚å¸¸æ£€æµ‹**

```bash
#!/bin/bash
# æœåŠ¡çŠ¶æ€å¼‚å¸¸æ£€æµ‹

# æ£€æµ‹æœåŠ¡é‡å¯é¢‘ç‡
service_restarts=$(grep -E "start|restart|stop" /var/log/messages | \
                  grep "$(date +%b\ %d)" | wc -l)

if [ $service_restarts -gt 10 ]; then
    echo "æœåŠ¡é‡å¯å¼‚å¸¸é¢‘ç¹ï¼šä»Šæ—¥ $service_restarts æ¬¡"
fi

# æ£€æµ‹èµ„æºä½¿ç”¨å¼‚å¸¸
high_load_events=$(grep -i "load average" /var/log/messages | \
                  grep "$(date +%b\ %d)" | \
                  awk '$NF>5.0 {count++} END {print count+0}')

if [ $high_load_events -gt 5 ]; then
    echo "ç³»ç»Ÿè´Ÿè½½å¼‚å¸¸ï¼šé«˜è´Ÿè½½äº‹ä»¶ $high_load_events æ¬¡"
fi
```

---

## 9. ğŸ“Š æ€§èƒ½æŒ‡æ ‡æå–


### 9.1 æ€§èƒ½ç›‘æ§åŸºç¡€

**æ ¸å¿ƒç›®æ ‡**ï¼šä»æ—¥å¿—ä¸­æå–å…³é”®æ€§èƒ½æ•°æ®ï¼Œäº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ

**ä¸»è¦æŒ‡æ ‡**ï¼š
```
å“åº”æ—¶é—´ï¼šæœåŠ¡å¤„ç†è¯·æ±‚çš„æ—¶é—´
ååé‡ï¼šå•ä½æ—¶é—´å¤„ç†çš„è¯·æ±‚æ•°
é”™è¯¯ç‡ï¼šå¤±è´¥è¯·æ±‚çš„æ¯”ä¾‹
èµ„æºä½¿ç”¨ï¼šCPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ
```

### 9.2 Webæ€§èƒ½æŒ‡æ ‡æå–


#### â± **å“åº”æ—¶é—´åˆ†æ**

```bash
#!/bin/bash
# WebæœåŠ¡å“åº”æ—¶é—´åˆ†æ

# ä»nginxæ—¥å¿—æå–å“åº”æ—¶é—´ï¼ˆå‡è®¾å“åº”æ—¶é—´åœ¨æœ€åä¸€åˆ—ï¼‰
echo "=== å“åº”æ—¶é—´ç»Ÿè®¡ ==="
awk '{
    response_time = $NF
    if(response_time < 0.1) fast++
    else if(response_time < 0.5) normal++
    else if(response_time < 1.0) slow++
    else very_slow++
    
    total_time += response_time
    count++
} END {
    printf "å¿«é€Ÿ(<0.1s): %d (%.1f%%)\n", fast, fast/count*100
    printf "æ­£å¸¸(0.1-0.5s): %d (%.1f%%)\n", normal, normal/count*100
    printf "è¾ƒæ…¢(0.5-1.0s): %d (%.1f%%)\n", slow, slow/count*100
    printf "å¾ˆæ…¢(>1.0s): %d (%.1f%%)\n", very_slow, very_slow/count*100
    printf "å¹³å‡å“åº”æ—¶é—´: %.3fs\n", total_time/count
}' /var/log/nginx/access.log
```

#### ğŸ“ˆ **ååé‡ç»Ÿè®¡**

```bash
#!/bin/bash
# ååé‡ç»Ÿè®¡åˆ†æ

echo "=== ååé‡ç»Ÿè®¡ ==="

# æ¯å°æ—¶è¯·æ±‚æ•°ç»Ÿè®¡
echo "æ¯å°æ—¶è¯·æ±‚æ•°ï¼š"
awk '{
    hour = substr($4, 14, 2)
    requests[hour]++
} END {
    for(h=0; h<24; h++) {
        printf "%02dç‚¹: %d è¯·æ±‚\n", h, requests[sprintf("%02d", h)]
    }
}' /var/log/nginx/access.log

# å³°å€¼QPSè®¡ç®—
echo "å³°å€¼QPSåˆ†æï¼š"
awk '{
    datetime = substr($4, 2, 17)  # æå–åˆ°åˆ†é’Ÿçº§åˆ«
    minute_requests[datetime]++
} END {
    max_qps = 0
    for(minute in minute_requests) {
        qps = minute_requests[minute] / 60
        if(qps > max_qps) {
            max_qps = qps
            peak_time = minute
        }
    }
    printf "å³°å€¼QPS: %.1f (æ—¶é—´: %s)\n", max_qps, peak_time
}' /var/log/nginx/access.log
```

### 9.3 ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡


#### ğŸ’¾ **èµ„æºä½¿ç”¨åˆ†æ**

```bash
#!/bin/bash
# ç³»ç»Ÿèµ„æºä½¿ç”¨åˆ†æ

echo "=== ç³»ç»Ÿèµ„æºåˆ†æ ==="

# å†…å­˜ä½¿ç”¨ç»Ÿè®¡
echo "å†…å­˜ç›¸å…³äº‹ä»¶ï¼š"
grep -i "memory\|oom" /var/log/messages | \
  grep "$(date +%b\ %d)" | wc -l

# ç£ç›˜IOç»Ÿè®¡
echo "ç£ç›˜IOäº‹ä»¶ï¼š"
grep -i "disk\|i/o" /var/log/messages | \
  grep "$(date +%b\ %d)" | wc -l

# CPUé«˜è´Ÿè½½äº‹ä»¶
echo "é«˜è´Ÿè½½äº‹ä»¶ï¼š"
grep -i "load" /var/log/messages | \
  grep "$(date +%b\ %d)" | \
  awk '/load average/ {
    load = $(NF-2)
    gsub(/,/, "", load)
    if(load+0 > 2.0) high_load++
  } END {
    print "é«˜è´Ÿè½½æ¬¡æ•°:", high_load+0
  }'
```

#### ğŸ”— **ç½‘ç»œæ€§èƒ½åˆ†æ**

```bash
#!/bin/bash
# ç½‘ç»œæ€§èƒ½åˆ†æ

echo "=== ç½‘ç»œæ€§èƒ½åˆ†æ ==="

# è¿æ¥è¶…æ—¶ç»Ÿè®¡
timeout_count=$(grep -i "timeout\|connection.*failed" /var/log/messages | \
               grep "$(date +%b\ %d)" | wc -l)
echo "è¿æ¥è¶…æ—¶æ¬¡æ•°: $timeout_count"

# DNSè§£æé—®é¢˜
dns_issues=$(grep -i "dns\|resolve.*failed" /var/log/messages | \
            grep "$(date +%b\ %d)" | wc -l)
echo "DNSè§£æé—®é¢˜: $dns_issues"

# ç½‘ç»œä¸¢åŒ…æ£€æµ‹
packet_loss=$(grep -i "packet.*loss\|dropped" /var/log/messages | \
             grep "$(date +%b\ %d)" | wc -l)
echo "ç½‘ç»œä¸¢åŒ…äº‹ä»¶: $packet_loss"
```

### 9.4 æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ


#### ğŸ“‹ **ç»¼åˆæ€§èƒ½æŠ¥å‘Š**

```bash
#!/bin/bash
# ç”Ÿæˆç»¼åˆæ€§èƒ½æŠ¥å‘Š

REPORT_DATE=$(date +%Y-%m-%d)
REPORT_FILE="/tmp/performance_report_$REPORT_DATE.txt"

{
    echo "========================================="
    echo "ç³»ç»Ÿæ€§èƒ½åˆ†ææŠ¥å‘Š"
    echo "æŠ¥å‘Šæ—¥æœŸ: $REPORT_DATE"
    echo "========================================="
    echo

    # WebæœåŠ¡æ€§èƒ½
    echo "1. WebæœåŠ¡æ€§èƒ½ï¼š"
    echo "   æ€»è¯·æ±‚æ•°: $(wc -l < /var/log/nginx/access.log)"
    echo "   æˆåŠŸç‡: $(awk '$9<400 {success++} $9>=400 {error++} END {
        printf "%.1f%%", success/(success+error)*100
    }' /var/log/nginx/access.log)"
    
    # ç³»ç»Ÿç¨³å®šæ€§
    echo "2. ç³»ç»Ÿç¨³å®šæ€§ï¼š"
    echo "   ç³»ç»Ÿé”™è¯¯: $(grep -i error /var/log/messages | wc -l)"
    echo "   æœåŠ¡é‡å¯: $(grep -E 'start|restart' /var/log/messages | wc -l)"
    
    # å®‰å…¨çŠ¶å†µ
    echo "3. å®‰å…¨çŠ¶å†µï¼š"
    echo "   ç™»å½•å¤±è´¥: $(grep 'Failed password' /var/log/secure | wc -l)"
    echo "   å¯ç–‘æ´»åŠ¨: $(grep -i 'invalid\|illegal' /var/log/secure | wc -l)"
    
    echo
    echo "æŠ¥å‘Šç”Ÿæˆæ—¶é—´: $(date)"
    
} > $REPORT_FILE

echo "æ€§èƒ½æŠ¥å‘Šå·²ç”Ÿæˆ: $REPORT_FILE"

# å¯é€‰ï¼šå‘é€é‚®ä»¶æŠ¥å‘Š
# mail -s "æ—¥åº¦æ€§èƒ½æŠ¥å‘Š - $REPORT_DATE" admin@company.com < $REPORT_FILE
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ æ—¥å¿—ç›‘æ§ï¼šå®æ—¶äº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶æ€çš„é‡è¦æ‰‹æ®µ
ğŸ”¸ tailå‘½ä»¤ï¼šå®æ—¶ç›‘æ§æ—¥å¿—æ–‡ä»¶å˜åŒ–çš„åŸºç¡€å·¥å…·
ğŸ”¸ grepè¿‡æ»¤ï¼šä»å¤§é‡æ—¥å¿—ä¸­å¿«é€Ÿæ‰¾åˆ°å…³å¿ƒå†…å®¹çš„åˆ©å™¨
ğŸ”¸ awkæå–ï¼šç»“æ„åŒ–å¤„ç†æ—¥å¿—æ•°æ®çš„å¼ºå¤§å·¥å…·
ğŸ”¸ é”™è¯¯è¯†åˆ«ï¼šå¿«é€Ÿå®šä½å’Œåˆ†æç³»ç»Ÿé—®é¢˜çš„å…³é”®æŠ€èƒ½
ğŸ”¸ å‘Šè­¦æœºåˆ¶ï¼šè‡ªåŠ¨åŒ–ç›‘æ§å’ŒåŠæ—¶å“åº”çš„ä¿éšœ
ğŸ”¸ å¼‚å¸¸æ£€æµ‹ï¼šå‘ç°æ½œåœ¨é—®é¢˜çš„é«˜çº§æŠ€æœ¯
ğŸ”¸ æ€§èƒ½åˆ†æï¼šä¼˜åŒ–ç³»ç»Ÿè¿è¡Œæ•ˆç‡çš„æ•°æ®åŸºç¡€
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ æ—¥å¿—ç›‘æ§çš„æœ¬è´¨**ï¼š
```
ç›‘æ§ç›®çš„ï¼š
â€¢ é—®é¢˜å‘ç°ï¼šåŠæ—¶å‘ç°ç³»ç»Ÿæ•…éšœ
â€¢ æ€§èƒ½åˆ†æï¼šäº†è§£ç³»ç»Ÿè¿è¡Œæ•ˆç‡
â€¢ å®‰å…¨å®¡è®¡ï¼šæ£€æµ‹å¯ç–‘æ´»åŠ¨
â€¢ å®¹é‡è§„åˆ’ï¼šé¢„æµ‹èµ„æºéœ€æ±‚

ç›‘æ§æ–¹æ³•ï¼š
â€¢ å®æ—¶ç›‘æ§ï¼štail -f è·Ÿè¸ªæœ€æ–°å˜åŒ–
â€¢ å†å²åˆ†æï¼šgrep/awk åˆ†æå†å²æ•°æ®
â€¢ æ¨¡å¼è¯†åˆ«ï¼šå‘ç°å¼‚å¸¸è¡Œä¸ºæ¨¡å¼
â€¢ è‡ªåŠ¨å‘Šè­¦ï¼šå‡å°‘äººå·¥ç›‘æ§è´Ÿæ‹…
```

**ğŸ”¹ å·¥å…·ç»„åˆçš„å¨åŠ›**ï¼š
```
å•ä¸ªå·¥å…·çš„å±€é™æ€§ï¼š
â€¢ tailï¼šåªèƒ½çœ‹ï¼Œä¸èƒ½åˆ†æ
â€¢ grepï¼šåªèƒ½è¿‡æ»¤ï¼Œä¸èƒ½ç»Ÿè®¡
â€¢ awkï¼šåŠŸèƒ½å¼ºå¤§ï¼Œä½†è¯­æ³•å¤æ‚

ç»„åˆä½¿ç”¨çš„ä¼˜åŠ¿ï¼š
â€¢ tail -f | grepï¼šå®æ—¶è¿‡æ»¤ç›‘æ§
â€¢ grep | awkï¼šè¿‡æ»¤åç»Ÿè®¡åˆ†æ
â€¢ awk | sort | uniq -cï¼šåˆ†ç»„ç»Ÿè®¡
â€¢ å¤šå·¥å…·åä½œè§£å†³å¤æ‚é—®é¢˜
```

**ğŸ”¹ å®æˆ˜åº”ç”¨ç­–ç•¥**ï¼š
```
åŸºç¡€ç›‘æ§ï¼š
â€¢ ç”¨tailå®æ—¶çœ‹æ—¥å¿—å˜åŒ–
â€¢ ç”¨grepæŸ¥æ‰¾ç‰¹å®šé”™è¯¯
â€¢ ç”¨awkæå–å…³é”®æ•°æ®

è¿›é˜¶åˆ†æï¼š
â€¢ ç¼–å†™ç›‘æ§è„šæœ¬è‡ªåŠ¨åŒ–
â€¢ è®¾ç½®å‘Šè­¦æœºåˆ¶åŠæ—¶å“åº”
â€¢ å»ºç«‹æ€§èƒ½åŸºçº¿å¯¹æ¯”åˆ†æ
â€¢ åˆ¶ä½œå®šæœŸæŠ¥å‘Šæ€»ç»“è¶‹åŠ¿
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ“Š æ—¥å¸¸è¿ç»´åœºæ™¯**ï¼š
- **æ•…éšœæ’æŸ¥**ï¼šé€šè¿‡æ—¥å¿—å¿«é€Ÿå®šä½é—®é¢˜æ ¹å› 
- **æ€§èƒ½ç›‘æ§**ï¼šå®æ—¶äº†è§£ç³»ç»Ÿè´Ÿè½½å’Œå“åº”æƒ…å†µ
- **å®‰å…¨å®¡è®¡**ï¼šæ£€æµ‹å¼‚å¸¸ç™»å½•å’Œå¯ç–‘æ´»åŠ¨
- **å®¹é‡è§„åˆ’**ï¼šåŸºäºå†å²æ•°æ®é¢„æµ‹èµ„æºéœ€æ±‚

**ğŸ›  æŠ€èƒ½è¿›é˜¶è·¯å¾„**ï¼š
- **å…¥é—¨é˜¶æ®µ**ï¼šç†Ÿç»ƒä½¿ç”¨tailã€grepã€awkåŸºç¡€åŠŸèƒ½
- **è¿›é˜¶é˜¶æ®µ**ï¼šç¼–å†™è‡ªåŠ¨åŒ–ç›‘æ§å’Œå‘Šè­¦è„šæœ¬
- **é«˜çº§é˜¶æ®µ**ï¼šè®¾è®¡å®Œæ•´çš„æ—¥å¿—åˆ†æå’Œç›‘æ§ä½“ç³»
- **ä¸“å®¶é˜¶æ®µ**ï¼šç»“åˆAI/MLè¿›è¡Œæ™ºèƒ½å¼‚å¸¸æ£€æµ‹

### 10.4 å­¦ä¹ æ£€æŸ¥æ¸…å•


```
âœ… **åŸºç¡€æŠ€èƒ½æ£€æŸ¥**
- [ ] èƒ½ç”¨tailå®æ—¶ç›‘æ§æ—¥å¿—æ–‡ä»¶
- [ ] èƒ½ç”¨grepå¿«é€Ÿè¿‡æ»¤æ—¥å¿—å†…å®¹
- [ ] èƒ½ç”¨awkæå–å’Œç»Ÿè®¡æ—¥å¿—æ•°æ®
- [ ] ç†è§£å¸¸è§æ—¥å¿—æ ¼å¼å’Œä½ç½®

âœ… **è¿›é˜¶æŠ€èƒ½æ£€æŸ¥**
- [ ] èƒ½è¯†åˆ«å¸¸è§çš„é”™è¯¯æ¨¡å¼
- [ ] èƒ½ç¼–å†™ç®€å•çš„ç›‘æ§è„šæœ¬
- [ ] èƒ½è®¾ç½®åŸºç¡€çš„å‘Šè­¦æœºåˆ¶
- [ ] èƒ½è¿›è¡ŒåŸºæœ¬çš„æ€§èƒ½åˆ†æ

âœ… **å®æˆ˜èƒ½åŠ›æ£€æŸ¥**
- [ ] èƒ½å¿«é€Ÿæ’æŸ¥ç³»ç»Ÿæ•…éšœ
- [ ] èƒ½å‘ç°å’Œå¤„ç†å®‰å…¨å¨èƒ
- [ ] èƒ½åˆ¶ä½œæ€§èƒ½åˆ†ææŠ¥å‘Š
- [ ] èƒ½è®¾è®¡ç›‘æ§å‘Šè­¦ä½“ç³»
```

### 10.5 å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥


```bash
# å®æ—¶ç›‘æ§æ—¥å¿—
tail -f /var/log/messages
tail -F /var/log/nginx/access.log

# è¿‡æ»¤é”™è¯¯ä¿¡æ¯
grep -i error /var/log/messages
grep "Failed password" /var/log/secure

# ç»Ÿè®¡åˆ†æ
awk '{print $1}' /var/log/httpd/access_log | sort | uniq -c
grep error /var/log/messages | wc -l

# ç»„åˆä½¿ç”¨
tail -f /var/log/messages | grep -i error
awk '$9>=400 {print $1, $9}' /var/log/nginx/access.log | sort | uniq -c

# æ—¶é—´èŒƒå›´è¿‡æ»¤
grep "Sep 15" /var/log/messages
awk '/Sep 15.*14:/ {print $0}' /var/log/messages
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- tailçœ‹å®æ—¶ï¼Œgrepæ‰¾å†…å®¹ï¼Œawkåšç»Ÿè®¡
- ç»„åˆä½¿ç”¨å¨åŠ›å¤§ï¼Œè‡ªåŠ¨ç›‘æ§å°‘çƒ¦æ¼
- é”™è¯¯æ¨¡å¼è¦ç†Ÿè®°ï¼Œå‘Šè­¦åŠæ—¶ä¿å¹³å®‰
- æ—¥å¿—åˆ†ææ˜¯åŸºç¡€ï¼Œè¿ç»´é«˜æ‰‹å¿…å¤‡æŠ€