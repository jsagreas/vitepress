---
title: 7ã€journalctlå‘½ä»¤æ·±åº¦åº”ç”¨
---
## ğŸ“š ç›®å½•

1. [journalctlåŸºç¡€æ¦‚å¿µ](#1-journalctlåŸºç¡€æ¦‚å¿µ)
2. [åŸºæœ¬æŸ¥è¯¢è¯­æ³•](#2-åŸºæœ¬æŸ¥è¯¢è¯­æ³•)
3. [æ—¶é—´èŒƒå›´è¿‡æ»¤](#3-æ—¶é—´èŒƒå›´è¿‡æ»¤)
4. [æœåŠ¡å•å…ƒæ—¥å¿—æŸ¥çœ‹](#4-æœåŠ¡å•å…ƒæ—¥å¿—æŸ¥çœ‹)
5. [ä¼˜å…ˆçº§è¿‡æ»¤](#5-ä¼˜å…ˆçº§è¿‡æ»¤)
6. [å®æ—¶æ—¥å¿—è·Ÿè¸ª](#6-å®æ—¶æ—¥å¿—è·Ÿè¸ª)
7. [å†…æ ¸æ—¥å¿—æŸ¥çœ‹](#7-å†…æ ¸æ—¥å¿—æŸ¥çœ‹)
8. [å¯åŠ¨æ—¥å¿—åˆ†æ](#8-å¯åŠ¨æ—¥å¿—åˆ†æ)
9. [JSONæ ¼å¼è¾“å‡º](#9-JSONæ ¼å¼è¾“å‡º)
10. [å®é™…åº”ç”¨åœºæ™¯](#10-å®é™…åº”ç”¨åœºæ™¯)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ“– journalctlåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯journalctl


**ç®€å•ç†è§£**ï¼š`journalctl` å°±æ˜¯æŸ¥çœ‹Linuxç³»ç»Ÿæ—¥å¿—çš„**ä¸‡èƒ½å·¥å…·**

```
ä¼ ç»Ÿæ—¥å¿—æ–¹å¼ï¼š                ç°ä»£systemdæ—¥å¿—ï¼š
å¤šä¸ªæ–‡ä»¶åˆ†æ•£å­˜å‚¨               ç»Ÿä¸€çš„journalæ•°æ®åº“
/var/log/syslog               journalctlç»Ÿä¸€æŸ¥çœ‹
/var/log/auth.log             æ‰€æœ‰æ—¥å¿—é›†ä¸­ç®¡ç†
/var/log/kern.log             ç»“æ„åŒ–å­˜å‚¨
```

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰ç³»ç»Ÿæ—¥å¿—éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåœ°æ–¹
- **ç»“æ„åŒ–å­˜å‚¨**ï¼šæ—¥å¿—ä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨ï¼ŒæŸ¥è¯¢æ›´å¿«
- **åŠŸèƒ½å¼ºå¤§**ï¼šæ”¯æŒå„ç§è¿‡æ»¤ã€æœç´¢ã€æ ¼å¼åŒ–åŠŸèƒ½
- **å®‰å…¨å¯é **ï¼šæ—¥å¿—éš¾ä»¥ç¯¡æ”¹ï¼Œæ”¯æŒæ•°å­—ç­¾å

### 1.2 journalæ—¥å¿—ç³»ç»Ÿæ¶æ„


```
åº”ç”¨ç¨‹åº/æœåŠ¡ â†’ systemd-journald â†’ Journalæ•°æ®åº“ â†’ journalctlæŸ¥çœ‹
     â†“              â†“                  â†“              â†“
   nginx         æ—¥å¿—æ”¶é›†å™¨          äºŒè¿›åˆ¶å­˜å‚¨        æŸ¥è¯¢å·¥å…·
   apache         ç»Ÿä¸€å¤„ç†           /var/log/         ç”¨æˆ·ç•Œé¢
   sshç­‰          æ ¼å¼æ ‡å‡†åŒ–          journal/
```

**å…³é”®ç†è§£**ï¼š
- **systemd-journald**ï¼šè´Ÿè´£æ”¶é›†æ‰€æœ‰æ—¥å¿—çš„å®ˆæŠ¤è¿›ç¨‹
- **Journalæ•°æ®åº“**ï¼šå­˜å‚¨åœ¨ `/var/log/journal/` ç›®å½•ä¸‹
- **journalctl**ï¼šæˆ‘ä»¬ä½¿ç”¨çš„æŸ¥çœ‹å·¥å…·ï¼Œå°±åƒæ˜¯æ—¥å¿—çš„"æœç´¢å¼•æ“"

---

## 2. ğŸ” åŸºæœ¬æŸ¥è¯¢è¯­æ³•


### 2.1 æœ€åŸºç¡€çš„æŸ¥çœ‹å‘½ä»¤


**æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—**ï¼š
```bash
# æ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—ï¼ˆä»æœ€æ—§åˆ°æœ€æ–°ï¼‰
journalctl

# æ˜¾ç¤ºæœ€æ–°æ—¥å¿—åœ¨å‰ï¼ˆæœ€å¸¸ç”¨ï¼‰
journalctl -r
```

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šé»˜è®¤æƒ…å†µä¸‹æ—¥å¿—å¾ˆå¤šï¼Œä¼šç”¨åˆ†é¡µå™¨æ˜¾ç¤ºï¼ŒæŒ‰ `q` é€€å‡ºæŸ¥çœ‹

### 2.2 æ§åˆ¶æ˜¾ç¤ºæ•°é‡


```bash
# åªçœ‹æœ€æ–°çš„20æ¡æ—¥å¿—
journalctl -n 20

# ç®€å†™å½¢å¼ï¼ˆæ•ˆæœç›¸åŒï¼‰
journalctl -20

# æŸ¥çœ‹æœ€æ–°50æ¡å¹¶å€’åºæ˜¾ç¤º
journalctl -r -n 50
```

**å®é™…ä¾‹å­**ï¼š
```bash
# å¿«é€ŸæŸ¥çœ‹ç³»ç»Ÿæœ€è¿‘å‘ç”Ÿäº†ä»€ä¹ˆ
journalctl -r -n 10
```

### 2.3 è¾“å‡ºæ ¼å¼æ§åˆ¶


| æ ¼å¼é€‰é¡¹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| `short` | **é»˜è®¤æ ¼å¼**ï¼Œç®€æ´æ˜“è¯» | æ—¥å¸¸æŸ¥çœ‹ |
| `verbose` | **è¯¦ç»†æ ¼å¼**ï¼Œæ˜¾ç¤ºæ‰€æœ‰å­—æ®µ | è°ƒè¯•åˆ†æ |
| `json` | **JSONæ ¼å¼**ï¼Œä¾¿äºç¨‹åºå¤„ç† | è„šæœ¬å¤„ç† |
| `cat` | **çº¯æ–‡æœ¬**ï¼Œåªæ˜¾ç¤ºæ¶ˆæ¯å†…å®¹ | æå–æ—¥å¿—å†…å®¹ |

```bash
# è¯¦ç»†æ ¼å¼æŸ¥çœ‹ï¼ˆæ˜¾ç¤ºæ›´å¤šä¿¡æ¯ï¼‰
journalctl -o verbose -n 5

# çº¯æ–‡æœ¬æ ¼å¼ï¼ˆåªè¦æ¶ˆæ¯å†…å®¹ï¼‰
journalctl -o cat -n 10
```

---

## 3. â° æ—¶é—´èŒƒå›´è¿‡æ»¤


### 3.1 åŸºæœ¬æ—¶é—´è¿‡æ»¤


**ä½¿ç”¨ `--since` å’Œ `--until` æŒ‡å®šæ—¶é—´èŒƒå›´**ï¼š

```bash
# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
journalctl --since today

# æŸ¥çœ‹æ˜¨å¤©çš„æ—¥å¿—  
journalctl --since yesterday --until today

# æŸ¥çœ‹æœ€è¿‘1å°æ—¶çš„æ—¥å¿—
journalctl --since "1 hour ago"

# æŸ¥çœ‹æœ€è¿‘30åˆ†é’Ÿçš„æ—¥å¿—
journalctl --since "30 minutes ago"
```

### 3.2 ç²¾ç¡®æ—¶é—´æ ¼å¼


```bash
# æŒ‡å®šå…·ä½“æ—¥æœŸå’Œæ—¶é—´
journalctl --since "2025-09-15 10:00:00" --until "2025-09-15 18:00:00"

# åªæŒ‡å®šæ—¥æœŸï¼ˆé»˜è®¤ä»00:00:00å¼€å§‹ï¼‰
journalctl --since "2025-09-15"

# ç›¸å¯¹æ—¶é—´è¡¨è¾¾
journalctl --since "2 days ago"
journalctl --since "1 week ago"
```

**æ—¶é—´æ ¼å¼å¯¹ç…§è¡¨**ï¼š

| æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|
| **ç›¸å¯¹æ—¶é—´** | `"1 hour ago"` | æœ€æ˜“ç†è§£ï¼Œæ¨èä½¿ç”¨ |
| **å…³é”®è¯** | `today`, `yesterday` | ç®€å•æ–¹ä¾¿ |
| **ISOæ ¼å¼** | `"2025-09-15 10:30:00"` | ç²¾ç¡®æ—¶é—´ |
| **æ—¥æœŸ** | `"2025-09-15"` | æ•´å¤©æ—¥å¿— |

### 3.3 å®ç”¨æ—¶é—´æŸ¥è¯¢ç¤ºä¾‹


```bash
# æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨çš„é”™è¯¯æ—¥å¿—
journalctl -p err --since today

# æŸ¥çœ‹æ˜¨å¤©æ™šä¸Š8ç‚¹åˆ°ä»Šå¤©æ—©ä¸Š8ç‚¹çš„æ—¥å¿—
journalctl --since "yesterday 20:00" --until "today 08:00"

# æŸ¥çœ‹è¿‡å»7å¤©çš„é‡è¦æ—¥å¿—
journalctl -p warning --since "7 days ago"
```

---

## 4. ğŸ”§ æœåŠ¡å•å…ƒæ—¥å¿—æŸ¥çœ‹


### 4.1 æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—


**ä½¿ç”¨ `-u` å‚æ•°æŸ¥çœ‹æŒ‡å®šæœåŠ¡**ï¼š

```bash
# æŸ¥çœ‹nginxæœåŠ¡çš„æ‰€æœ‰æ—¥å¿—
journalctl -u nginx

# æŸ¥çœ‹SSHæœåŠ¡çš„æ—¥å¿—
journalctl -u ssh

# æŸ¥çœ‹systemdæœåŠ¡çš„æ—¥å¿—
journalctl -u systemd-resolved
```

### 4.2 ç»„åˆæ¡ä»¶æŸ¥è¯¢


```bash
# æŸ¥çœ‹nginxæœåŠ¡ä»Šå¤©çš„æ—¥å¿—
journalctl -u nginx --since today

# æŸ¥çœ‹nginxæœåŠ¡æœ€æ–°50æ¡æ—¥å¿—
journalctl -u nginx -n 50

# æŸ¥çœ‹å¤šä¸ªæœåŠ¡çš„æ—¥å¿—
journalctl -u nginx -u apache2 --since today
```

### 4.3 å¸¸è§æœåŠ¡æ—¥å¿—æŸ¥çœ‹


<details>
<summary>ğŸ“‹ å¸¸ç”¨æœåŠ¡åç§°å¯¹ç…§è¡¨</summary>

| æœåŠ¡ç±»å‹ | æœåŠ¡å | æŸ¥çœ‹å‘½ä»¤ |
|---------|--------|----------|
| **WebæœåŠ¡** | `nginx` | `journalctl -u nginx` |
| | `apache2` | `journalctl -u apache2` |
| **SSHæœåŠ¡** | `ssh` / `sshd` | `journalctl -u ssh` |
| **æ•°æ®åº“** | `mysql` | `journalctl -u mysql` |
| | `postgresql` | `journalctl -u postgresql` |
| **ç½‘ç»œ** | `systemd-networkd` | `journalctl -u systemd-networkd` |
| | `systemd-resolved` | `journalctl -u systemd-resolved` |
| **é˜²ç«å¢™** | `ufw` | `journalctl -u ufw` |

</details>

**å®ç”¨ç¤ºä¾‹**ï¼š
```bash
# æ£€æŸ¥nginxæ˜¯å¦æœ‰å¯åŠ¨é”™è¯¯
journalctl -u nginx -p err --since today

# æŸ¥çœ‹SSHç™»å½•æƒ…å†µ
journalctl -u ssh --since "1 hour ago" | grep -i "accepted\|failed"
```

---

## 5. ğŸ¯ ä¼˜å…ˆçº§è¿‡æ»¤


### 5.1 æ—¥å¿—ä¼˜å…ˆçº§æ¦‚å¿µ


**æ—¥å¿—çº§åˆ«ä»é«˜åˆ°ä½**ï¼š
```
ä¼˜å…ˆçº§æ•°å­—    çº§åˆ«å      å«ä¹‰              ä½•æ—¶ä½¿ç”¨
    0        emerg      ç´§æ€¥çŠ¶æ€          ç³»ç»Ÿä¸å¯ç”¨
    1        alert      è­¦æŠ¥çŠ¶æ€          éœ€è¦ç«‹å³é‡‡å–è¡ŒåŠ¨  
    2        crit       ä¸´ç•ŒçŠ¶æ€          ä¸¥é‡é”™è¯¯
    3        err        é”™è¯¯çŠ¶æ€          ä¸€èˆ¬é”™è¯¯
    4        warning    è­¦å‘ŠçŠ¶æ€          å¯èƒ½çš„é—®é¢˜
    5        notice     æ³¨æ„çŠ¶æ€          æ­£å¸¸ä½†é‡è¦çš„ä¿¡æ¯
    6        info       ä¿¡æ¯çŠ¶æ€          ä¸€èˆ¬ä¿¡æ¯
    7        debug      è°ƒè¯•çŠ¶æ€          è°ƒè¯•ä¿¡æ¯
```

### 5.2 ä½¿ç”¨ä¼˜å…ˆçº§è¿‡æ»¤


```bash
# åªçœ‹é”™è¯¯çº§åˆ«åŠä»¥ä¸Šçš„æ—¥å¿—ï¼ˆerr, crit, alert, emergï¼‰
journalctl -p err

# åªçœ‹è­¦å‘Šçº§åˆ«åŠä»¥ä¸Šçš„æ—¥å¿—
journalctl -p warning  

# åªçœ‹ç‰¹å®šçº§åˆ«çš„æ—¥å¿—
journalctl -p info

# ä½¿ç”¨æ•°å­—ä¹Ÿå¯ä»¥
journalctl -p 3  # ç­‰åŒäº -p err
```

### 5.3 å®é™…åº”ç”¨åœºæ™¯


```bash
# ğŸ” æ•…éšœæ’æŸ¥ï¼šåªçœ‹é”™è¯¯å’Œè­¦å‘Š
journalctl -p warning --since today

# ğŸš¨ ç´§æ€¥æƒ…å†µï¼šåªçœ‹ä¸¥é‡é”™è¯¯
journalctl -p crit --since "1 hour ago"

# ğŸ“Š ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼šæŸ¥çœ‹æœ€è¿‘çš„é‡è¦ä¿¡æ¯
journalctl -p notice --since yesterday
```

**ç»„åˆä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# æŸ¥çœ‹nginxæœåŠ¡çš„é”™è¯¯æ—¥å¿—
journalctl -u nginx -p err --since today

# æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶çš„è­¦å‘Šå’Œé”™è¯¯
journalctl -p warning -b 0
```

---

## 6. ğŸ“¡ å®æ—¶æ—¥å¿—è·Ÿè¸ª


### 6.1 å®æ—¶ç›‘æ§æ—¥å¿—


**ä½¿ç”¨ `-f` å‚æ•°å®æ—¶è·Ÿè¸ª**ï¼š
```bash
# å®æ—¶æŸ¥çœ‹æ‰€æœ‰æ–°æ—¥å¿—ï¼ˆç±»ä¼¼tail -fï¼‰
journalctl -f

# å®æ—¶æŸ¥çœ‹ç‰¹å®šæœåŠ¡çš„æ—¥å¿—
journalctl -u nginx -f

# å®æ—¶æŸ¥çœ‹é”™è¯¯çº§åˆ«çš„æ—¥å¿—
journalctl -p err -f
```

> ğŸ’¡ **ä½¿ç”¨æŠ€å·§**ï¼š`Ctrl + C` é€€å‡ºå®æ—¶è·Ÿè¸ª

### 6.2 å®æ—¶ç›‘æ§çš„åº”ç”¨åœºæ™¯


**WebæœåŠ¡è°ƒè¯•**ï¼š
```bash
# ä¸€è¾¹é‡å¯nginxï¼Œä¸€è¾¹è§‚å¯Ÿæ—¥å¿—
journalctl -u nginx -f

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯æ‰§è¡Œï¼š
sudo systemctl restart nginx
```

**ç³»ç»Ÿæ•…éšœæ’æŸ¥**ï¼š
```bash
# å®æ—¶ç›‘æ§ç³»ç»Ÿé”™è¯¯
journalctl -p err -f

# å®æ—¶ç›‘æ§ç‰¹å®šæ—¶é—´çš„æ‰€æœ‰æ—¥å¿—
journalctl --since "5 minutes ago" -f
```

### 6.3 ç»„åˆæ¡ä»¶çš„å®æ—¶ç›‘æ§


```bash
# ç›‘æ§å¤šä¸ªæœåŠ¡çš„å®æ—¶æ—¥å¿—
journalctl -u nginx -u mysql -f

# åªç›‘æ§é”™è¯¯å’Œè­¦å‘Šçš„å®æ—¶æ—¥å¿—
journalctl -p warning -f

# ç›‘æ§ç‰¹å®šæœåŠ¡çš„é”™è¯¯æ—¥å¿—
journalctl -u apache2 -p err -f
```

---

## 7. ğŸ§ å†…æ ¸æ—¥å¿—æŸ¥çœ‹


### 7.1 ä»€ä¹ˆæ˜¯å†…æ ¸æ—¥å¿—


**å†…æ ¸æ—¥å¿—** = æ“ä½œç³»ç»Ÿæ ¸å¿ƒçš„è¿è¡Œè®°å½•ï¼ŒåŒ…æ‹¬ï¼š
- **ç¡¬ä»¶æ£€æµ‹**ï¼šUSBè®¾å¤‡æ’æ‹”ã€ç¡¬ç›˜è¯†åˆ«ç­‰
- **é©±åŠ¨ç¨‹åº**ï¼šæ˜¾å¡é©±åŠ¨ã€ç½‘å¡é©±åŠ¨åŠ è½½æƒ…å†µ  
- **ç³»ç»Ÿé”™è¯¯**ï¼šå†…å­˜é”™è¯¯ã€ç¡¬ä»¶æ•…éšœç­‰
- **ç½‘ç»œäº‹ä»¶**ï¼šç½‘ç»œæ¥å£çŠ¶æ€å˜åŒ–

### 7.2 æŸ¥çœ‹å†…æ ¸æ—¥å¿—


```bash
# æŸ¥çœ‹æ‰€æœ‰å†…æ ¸æ—¥å¿—
journalctl -k

# æŸ¥çœ‹æœ€æ–°çš„å†…æ ¸æ—¥å¿—
journalctl -k -n 20

# æŸ¥çœ‹ä»Šå¤©çš„å†…æ ¸æ—¥å¿—
journalctl -k --since today
```

**å¯¹æ¯”ä¼ ç»Ÿå‘½ä»¤**ï¼š
```bash
# ä¼ ç»Ÿæ–¹å¼ï¼ˆä»ç„¶å¯ç”¨ï¼‰
dmesg

# journalctlæ–¹å¼ï¼ˆåŠŸèƒ½æ›´å¼ºï¼‰
journalctl -k
```

### 7.3 å†…æ ¸æ—¥å¿—çš„å…¸å‹åº”ç”¨


**ç¡¬ä»¶æ•…éšœæ’æŸ¥**ï¼š
```bash
# æŸ¥çœ‹ç¡¬ç›˜ç›¸å…³çš„å†…æ ¸æ¶ˆæ¯
journalctl -k | grep -i "error\|fail"

# æŸ¥çœ‹USBè®¾å¤‡æ’æ‹”è®°å½•
journalctl -k | grep -i usb

# æŸ¥çœ‹ç½‘ç»œæ¥å£é—®é¢˜
journalctl -k | grep -i "network\|eth\|wlan"
```

**ç³»ç»Ÿå¯åŠ¨é—®é¢˜è¯Šæ–­**ï¼š
```bash
# æŸ¥çœ‹å¯åŠ¨æ—¶çš„å†…æ ¸æ—¥å¿—
journalctl -k -b 0

# æŸ¥çœ‹æœ€è¿‘çš„å†…æ ¸é”™è¯¯
journalctl -k -p err --since "1 hour ago"
```

---

## 8. ğŸš€ å¯åŠ¨æ—¥å¿—åˆ†æ


### 8.1 å¯åŠ¨æ—¥å¿—æ¦‚å¿µ


**å¯åŠ¨æ—¥å¿—** = ç³»ç»Ÿæ¯æ¬¡å¯åŠ¨æ—¶çš„å®Œæ•´è®°å½•ï¼š
- **å¼•å¯¼è¿‡ç¨‹**ï¼šä»å¼€æœºåˆ°ç™»å½•ç•Œé¢çš„å…¨è¿‡ç¨‹
- **æœåŠ¡å¯åŠ¨**ï¼šå„ç§ç³»ç»ŸæœåŠ¡çš„å¯åŠ¨æƒ…å†µ
- **é”™è¯¯è¯Šæ–­**ï¼šå¯åŠ¨è¿‡ç¨‹ä¸­çš„é”™è¯¯å’Œè­¦å‘Š

### 8.2 æŸ¥çœ‹ä¸åŒå¯åŠ¨è®°å½•


```bash
# æŸ¥çœ‹å½“å‰å¯åŠ¨çš„æ—¥å¿—
journalctl -b

# ç­‰åŒäºï¼ˆ0è¡¨ç¤ºå½“å‰å¯åŠ¨ï¼‰
journalctl -b 0

# æŸ¥çœ‹ä¸Šä¸€æ¬¡å¯åŠ¨çš„æ—¥å¿—
journalctl -b -1

# æŸ¥çœ‹ä¸Šä¸Šæ¬¡å¯åŠ¨çš„æ—¥å¿—  
journalctl -b -2
```

### 8.3 å¯åŠ¨æ—¥å¿—åˆ—è¡¨


```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„å¯åŠ¨è®°å½•
journalctl --list-boots
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
-2 cda2d... Mon 2025-09-13 09:15:32 CSTâ€”Mon 2025-09-13 18:45:22 CST
-1 ba4d8... Tue 2025-09-14 08:30:45 CSTâ€”Tue 2025-09-14 22:15:10 CST  
 0 f3c9a... Wed 2025-09-15 09:00:12 CSTâ€”Wed 2025-09-15 14:30:00 CST
```

**ç†è§£è¾“å‡º**ï¼š
- **-2, -1, 0**ï¼šå¯åŠ¨åºå·ï¼ˆ0æ˜¯å½“å‰ï¼Œè´Ÿæ•°æ˜¯å†å²ï¼‰
- **Hashå€¼**ï¼šæ¯æ¬¡å¯åŠ¨çš„å”¯ä¸€æ ‡è¯†
- **æ—¶é—´èŒƒå›´**ï¼šè¯¥æ¬¡å¯åŠ¨çš„å¼€å§‹å’Œç»“æŸæ—¶é—´

### 8.4 å¯åŠ¨é—®é¢˜æ’æŸ¥


```bash
# æŸ¥çœ‹å¯åŠ¨è¿‡ç¨‹ä¸­çš„é”™è¯¯
journalctl -b -p err

# æŸ¥çœ‹å¯åŠ¨æ—¶é—´è¾ƒé•¿çš„æœåŠ¡
journalctl -b | grep "slow"

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡çš„å¯åŠ¨æƒ…å†µ
journalctl -b -u NetworkManager

# åˆ†æå¯åŠ¨æ€§èƒ½
systemd-analyze blame
```

---

## 9. ğŸ“„ JSONæ ¼å¼è¾“å‡º


### 9.1 ä¸ºä»€ä¹ˆéœ€è¦JSONæ ¼å¼


**JSONæ ¼å¼çš„ä¼˜åŠ¿**ï¼š
- **ç»“æ„åŒ–æ•°æ®**ï¼šä¾¿äºç¨‹åºå¤„ç†å’Œåˆ†æ
- **å­—æ®µå®Œæ•´**ï¼šåŒ…å«æ—¥å¿—çš„æ‰€æœ‰å…ƒæ•°æ®
- **ä¾¿äºç­›é€‰**ï¼šå¯ä»¥ç”¨å·¥å…·ç²¾ç¡®ç­›é€‰å­—æ®µ
- **è‡ªåŠ¨åŒ–å¤„ç†**ï¼šé€‚åˆè„šæœ¬å’Œç›‘æ§ç³»ç»Ÿ

### 9.2 åŸºæœ¬JSONè¾“å‡º


```bash
# è¾“å‡ºJSONæ ¼å¼æ—¥å¿—
journalctl -o json -n 5

# ç¾åŒ–çš„JSONè¾“å‡ºï¼ˆæ›´æ˜“è¯»ï¼‰
journalctl -o json-pretty -n 3
```

### 9.3 JSONè¾“å‡ºçš„å­—æ®µè§£é‡Š


**ä¸»è¦å­—æ®µè¯´æ˜**ï¼š
```json
{
  "__REALTIME_TIMESTAMP": "æ—¶é—´æˆ³",
  "MESSAGE": "æ—¥å¿—æ¶ˆæ¯å†…å®¹", 
  "_SYSTEMD_UNIT": "äº§ç”Ÿæ—¥å¿—çš„æœåŠ¡å•å…ƒ",
  "PRIORITY": "æ—¥å¿—ä¼˜å…ˆçº§ï¼ˆæ•°å­—ï¼‰",
  "_PID": "è¿›ç¨‹ID",
  "_HOSTNAME": "ä¸»æœºå",
  "SYSLOG_IDENTIFIER": "æ—¥å¿—æ¥æºæ ‡è¯†"
}
```

### 9.4 JSONæ ¼å¼çš„å®é™…åº”ç”¨


**ç»“åˆjqå·¥å…·å¤„ç†**ï¼š
```bash
# æå–ç‰¹å®šå­—æ®µï¼ˆéœ€è¦å®‰è£…jqï¼‰
journalctl -o json -n 10 | jq '.MESSAGE'

# ç­›é€‰ç‰¹å®šæœåŠ¡çš„æ—¥å¿—
journalctl -o json --since today | jq 'select(._SYSTEMD_UNIT=="nginx.service")'

# ç»Ÿè®¡ä¸åŒä¼˜å…ˆçº§çš„æ—¥å¿—æ•°é‡
journalctl -o json --since today | jq '.PRIORITY' | sort | uniq -c
```

**è„šæœ¬å¤„ç†ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
# æ£€æŸ¥æœ€è¿‘æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—
error_count=$(journalctl -o json -p err --since "1 hour ago" | jq -s length)
if [ $error_count -gt 0 ]; then
    echo "å‘ç° $error_count æ¡é”™è¯¯æ—¥å¿—"
fi
```

---

## 10. ğŸ’¼ å®é™…åº”ç”¨åœºæ™¯


### 10.1 WebæœåŠ¡æ•…éšœæ’æŸ¥


**åœºæ™¯**ï¼šç½‘ç«™çªç„¶æ— æ³•è®¿é—®

<details>
<summary>ğŸ”§ æ•…éšœæ’æŸ¥æ­¥éª¤</summary>

```bash
# 1. æ£€æŸ¥nginxæœåŠ¡çŠ¶æ€å’Œæœ€æ–°æ—¥å¿—
journalctl -u nginx -n 20 -p warning

# 2. æŸ¥çœ‹nginxæœåŠ¡çš„å¯åŠ¨æƒ…å†µ
journalctl -u nginx --since "30 minutes ago"

# 3. å®æ—¶ç›‘æ§nginxæ—¥å¿—
journalctl -u nginx -f

# 4. æ£€æŸ¥ç³»ç»Ÿèµ„æºç›¸å…³é”™è¯¯
journalctl -p err --since "1 hour ago" | grep -E "memory|disk|cpu"
```

</details>

### 10.2 ç³»ç»Ÿæ€§èƒ½åˆ†æ


**åœºæ™¯**ï¼šç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œéœ€è¦åˆ†æåŸå› 

```bash
# æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶é—´åˆ†æ
systemd-analyze

# æŸ¥çœ‹å¯åŠ¨è¿‡ç¨‹ä¸­çš„è­¦å‘Š
journalctl -b -p warning

# æŸ¥çœ‹æœ€è¿‘çš„ç³»ç»Ÿé”™è¯¯
journalctl -p err --since "1 day ago"

# ç›‘æ§ç³»ç»ŸæœåŠ¡çŠ¶æ€
journalctl -f -p notice
```

### 10.3 å®‰å…¨å®¡è®¡


**åœºæ™¯**ï¼šæ£€æŸ¥ç³»ç»Ÿå®‰å…¨çŠ¶å†µ

```bash
# æŸ¥çœ‹SSHç™»å½•è®°å½•
journalctl -u ssh --since yesterday | grep -E "Accepted|Failed"

# æŸ¥çœ‹sudoä½¿ç”¨è®°å½•  
journalctl | grep sudo

# æŸ¥çœ‹ç³»ç»Ÿè®¤è¯ç›¸å…³æ—¥å¿—
journalctl -t su -t sudo --since today

# æ£€æŸ¥å¼‚å¸¸çš„ç³»ç»Ÿè°ƒç”¨
journalctl -p warning | grep -i "security\|auth\|login"
```

### 10.4 è‡ªåŠ¨åŒ–ç›‘æ§è„šæœ¬


```bash
#!/bin/bash
# ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬

echo "=== ç³»ç»Ÿæ—¥å¿—å¥åº·æ£€æŸ¥ ==="

# æ£€æŸ¥æœ€è¿‘1å°æ—¶çš„é”™è¯¯æ—¥å¿—
error_count=$(journalctl -p err --since "1 hour ago" --output=cat | wc -l)
echo "æœ€è¿‘1å°æ—¶é”™è¯¯æ—¥å¿—æ•°é‡: $error_count"

# æ£€æŸ¥å…³é”®æœåŠ¡çŠ¶æ€
for service in nginx mysql ssh; do
    status=$(systemctl is-active $service 2>/dev/null)
    echo "$service æœåŠ¡çŠ¶æ€: $status"
    
    # å¦‚æœæœåŠ¡æœ‰é—®é¢˜ï¼Œæ˜¾ç¤ºæœ€æ–°æ—¥å¿—
    if [ "$status" != "active" ]; then
        echo "æœ€æ–°æ—¥å¿—:"
        journalctl -u $service -n 5 --no-pager
    fi
done
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬å‘½ä»¤


```bash
ğŸ”¸ åŸºç¡€æŸ¥çœ‹: journalctl              # æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
ğŸ”¸ æ—¶é—´è¿‡æ»¤: journalctl --since today    # ä»Šå¤©çš„æ—¥å¿—  
ğŸ”¸ æœåŠ¡æ—¥å¿—: journalctl -u nginx         # ç‰¹å®šæœåŠ¡æ—¥å¿—
ğŸ”¸ é”™è¯¯æ—¥å¿—: journalctl -p err          # åªçœ‹é”™è¯¯çº§åˆ«
ğŸ”¸ å®æ—¶ç›‘æ§: journalctl -f             # å®æ—¶è·Ÿè¸ªæ—¥å¿—
ğŸ”¸ å¯åŠ¨æ—¥å¿—: journalctl -b             # å½“å‰å¯åŠ¨æ—¥å¿—
ğŸ”¸ å†…æ ¸æ—¥å¿—: journalctl -k             # å†…æ ¸ç›¸å…³æ—¥å¿—
```

### 11.2 å¸¸ç”¨ç»„åˆå‘½ä»¤


| åº”ç”¨åœºæ™¯ | æ¨èå‘½ä»¤ | è¯´æ˜ |
|---------|----------|------|
| **æ—¥å¸¸æ£€æŸ¥** | `journalctl -p warning --since today` | æŸ¥çœ‹ä»Šå¤©çš„è­¦å‘Šå’Œé”™è¯¯ |
| **æœåŠ¡è°ƒè¯•** | `journalctl -u servicename -f` | å®æ—¶ç›‘æ§ç‰¹å®šæœåŠ¡ |
| **æ•…éšœæ’æŸ¥** | `journalctl -p err --since "1 hour ago"` | æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯ |
| **å¯åŠ¨é—®é¢˜** | `journalctl -b -p warning` | å¯åŠ¨æ—¶çš„è­¦å‘Šä¿¡æ¯ |
| **ç³»ç»Ÿç›‘æ§** | `journalctl -f -p notice` | å®æ—¶ç›‘æ§é‡è¦ä¿¡æ¯ |

### 11.3 é‡è¦æ¦‚å¿µç†è§£


**ğŸ”¹ æ—¶é—´è¿‡æ»¤çš„çµæ´»æ€§**ï¼š
```
ç›¸å¯¹æ—¶é—´: "1 hour ago", "30 minutes ago"  
å…³é”®è¯: today, yesterday
ç²¾ç¡®æ—¶é—´: "2025-09-15 10:00:00"
ç»„åˆä½¿ç”¨: --since yesterday --until today
```

**ğŸ”¹ ä¼˜å…ˆçº§çš„å®é™…æ„ä¹‰**ï¼š
```
err(3): éœ€è¦å…³æ³¨çš„é”™è¯¯ï¼Œé€šå¸¸è¦å¤„ç†
warning(4): å¯èƒ½çš„é—®é¢˜ï¼Œå»ºè®®æ£€æŸ¥
notice(5): é‡è¦ä¿¡æ¯ï¼Œå€¼å¾—çŸ¥é“
info(6): ä¸€èˆ¬ä¿¡æ¯ï¼Œäº†è§£å³å¯
```

**ğŸ”¹ æœåŠ¡å•å…ƒçš„æ ‡è¯†**ï¼š
```
å®Œæ•´åç§°: nginx.service, ssh.service
ç®€å†™å½¢å¼: nginx, ssh (journalctlè‡ªåŠ¨è¯†åˆ«)
å¤šæœåŠ¡: -u nginx -u mysql (åŒæ—¶æŸ¥çœ‹å¤šä¸ª)
```

### 11.4 å®ç”¨æŠ€å·§æ€»ç»“


> ğŸ’¡ **æŸ¥çœ‹æŠ€å·§**ï¼š
> - ä½¿ç”¨ `-r` å‚æ•°è®©æœ€æ–°æ—¥å¿—æ˜¾ç¤ºåœ¨å‰é¢
> - ä½¿ç”¨ `-n æ•°å­—` é™åˆ¶æ˜¾ç¤ºè¡Œæ•°ï¼Œé¿å…ä¿¡æ¯è¿‡å¤š
> - ç»“åˆ `grep` è¿›ä¸€æ­¥ç­›é€‰å…³é”®ä¿¡æ¯

> âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š
> - journalæ—¥å¿—é»˜è®¤é‡å¯åæ¸…é™¤ï¼ŒæŒä¹…åŒ–éœ€è¦é…ç½®
> - ä½¿ç”¨ `-f` å®æ—¶ç›‘æ§æ—¶è®°å¾— `Ctrl+C` é€€å‡º
> - JSONæ ¼å¼é€‚åˆç¨‹åºå¤„ç†ï¼Œäººå·¥æŸ¥çœ‹æ¨èé»˜è®¤æ ¼å¼

> ğŸ”§ **æ•…éšœæ’æŸ¥æµç¨‹**ï¼š
> 1. å…ˆç”¨ `journalctl -p err --since today` çœ‹æ˜¯å¦æœ‰æ˜æ˜¾é”™è¯¯
> 2. å†ç”¨ `journalctl -u æœåŠ¡å` æŸ¥çœ‹å…·ä½“æœåŠ¡æ—¥å¿—  
> 3. æœ€åç”¨ `journalctl -f` å®æ—¶ç›‘æ§è§£å†³è¿‡ç¨‹

**ğŸ§  æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- journalctlçœ‹æ—¥å¿—ï¼Œæ—¶é—´æœåŠ¡ä¼˜å…ˆçº§
- since untilå®šèŒƒå›´ï¼Œ-uæŒ‡å®šçœ‹æœåŠ¡  
- -pè¿‡æ»¤æŒ‰çº§åˆ«ï¼Œ-få®æ—¶æ¥è·Ÿè¸ª
- -bå¯åŠ¨-kå†…æ ¸ï¼Œ-oæ ¼å¼ä»»ä½ é€‰