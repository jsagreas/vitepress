---
title: 11ã€jq JSONæ•°æ®å¤„ç†å™¨
---
## ğŸ“š ç›®å½•

1. [jqæ˜¯ä»€ä¹ˆä¸œè¥¿](#1-jqæ˜¯ä»€ä¹ˆä¸œè¥¿)
2. [JSONæ•°æ®åŸºæœ¬æŸ¥è¯¢è¯­æ³•](#2-JSONæ•°æ®åŸºæœ¬æŸ¥è¯¢è¯­æ³•)
3. [æ•°ç»„å…ƒç´ è®¿é—®ä¸åˆ‡ç‰‡æ“ä½œ](#3-æ•°ç»„å…ƒç´ è®¿é—®ä¸åˆ‡ç‰‡æ“ä½œ)
4. [å¯¹è±¡å±æ€§æå–ä¸è¿‡æ»¤](#4-å¯¹è±¡å±æ€§æå–ä¸è¿‡æ»¤)
5. [ç®¡é“æ“ä½œç¬¦ç»„åˆæŸ¥è¯¢](#5-ç®¡é“æ“ä½œç¬¦ç»„åˆæŸ¥è¯¢)
6. [æ¡ä»¶è¿‡æ»¤ä¸æ•°æ®è½¬æ¢](#6-æ¡ä»¶è¿‡æ»¤ä¸æ•°æ®è½¬æ¢)
7. [æ•°æ®ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–](#7-æ•°æ®ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–)
8. [å¤šæ–‡ä»¶ä¸å¤æ‚å¤„ç†](#8-å¤šæ–‡ä»¶ä¸å¤æ‚å¤„ç†)
9. [APIå“åº”æ•°æ®åˆ†æå®æˆ˜](#9-APIå“åº”æ•°æ®åˆ†æå®æˆ˜)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ jqæ˜¯ä»€ä¹ˆä¸œè¥¿


### 1.1 jqçš„æœ¬è´¨ä½œç”¨


**ğŸ”¸ ç®€å•ç†è§£**
```
jqå°±åƒæ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†JSONæ•°æ®çš„"ç‘å£«å†›åˆ€"

æ¯”å¦‚è¯´ï¼š
- ä½ æœ‰ä¸€ä¸ªå¾ˆå¤æ‚çš„JSONæ–‡ä»¶ï¼Œé‡Œé¢æœ‰å‡ ç™¾è¡Œæ•°æ®
- ä½ åªæƒ³æå–å…¶ä¸­å‡ ä¸ªå…³é”®ä¿¡æ¯
- æ‰‹å·¥å»æ‰¾å¤ªéº»çƒ¦ï¼Œç”¨jqä¸€æ¡å‘½ä»¤å°±æå®š

å°±åƒç”¨å‰ªåˆ€ä»æŠ¥çº¸ä¸Šå‰ªä¸‹ä½ éœ€è¦çš„æ–‡ç« ä¸€æ ·ç®€å•
```

**ğŸ’¡ å®é™…ç”¨é€”åœºæ™¯**
```
ğŸ“Š APIæ¥å£è°ƒè¯•ï¼š
- æ¥å£è¿”å›ä¸€å¤§å †JSONæ•°æ®
- ç”¨jqå¿«é€Ÿæ‰¾åˆ°å…³é”®å­—æ®µ
- éªŒè¯æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

ğŸ“‹ æ—¥å¿—åˆ†æï¼š
- åº”ç”¨ç¨‹åºè¾“å‡ºJSONæ ¼å¼æ—¥å¿—
- ç”¨jqè¿‡æ»¤é”™è¯¯ä¿¡æ¯
- ç»Ÿè®¡ç‰¹å®šäº‹ä»¶æ¬¡æ•°

ğŸ”§ é…ç½®æ–‡ä»¶å¤„ç†ï¼š
- ä¿®æ”¹å¤æ‚çš„JSONé…ç½®
- æ‰¹é‡æ›´æ–°é…ç½®é¡¹
- éªŒè¯é…ç½®æ ¼å¼
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦jq


**âŒ æ²¡æœ‰jqçš„ç—›è‹¦**
```bash
# æƒ³ä»å¤æ‚JSONä¸­æ‰¾ä¸€ä¸ªå€¼ï¼Œåªèƒ½è¿™æ ·ï¼š
cat data.json | grep "name" | head -1 | cut -d'"' -f4
# å¤æ‚ã€å®¹æ˜“å‡ºé”™ã€ä¸å¤Ÿçµæ´»
```

**âœ… æœ‰äº†jqçš„ä¾¿åˆ©**
```bash
# åŒæ ·çš„éœ€æ±‚ï¼Œç”¨jqä¸€å¥è¯ï¼š
cat data.json | jq '.name'
# ç®€å•ã€å‡†ç¡®ã€åŠŸèƒ½å¼ºå¤§
```

### 1.3 å®‰è£…ä¸åŸºç¡€ä½¿ç”¨


**ğŸ“¦ å®‰è£…æ–¹æ³•**
```bash
# Ubuntu/Debian
sudo apt-get install jq

# CentOS/RHEL
sudo yum install jq

# macOS
brew install jq

# éªŒè¯å®‰è£…
jq --version
```

**ğŸš€ ç¬¬ä¸€ä¸ªä¾‹å­**
```bash
# åˆ›å»ºæµ‹è¯•æ•°æ®
echo '{"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}' > person.json

# æŸ¥çœ‹åŸå§‹æ•°æ®
cat person.json

# ç”¨jqç¾åŒ–æ˜¾ç¤º
cat person.json | jq .
# è¾“å‡ºï¼šæ ¼å¼åŒ–çš„JSONï¼Œå¸¦é¢œè‰²é«˜äº®
```

---

## 2. ğŸ“– JSONæ•°æ®åŸºæœ¬æŸ¥è¯¢è¯­æ³•


### 2.1 ç†è§£JSONç»“æ„


**ğŸ—ï¸ JSONçš„åŸºæœ¬ç»„æˆ**
```
JSONå°±åƒä¸€ä¸ªè£…ä¸œè¥¿çš„ç›’å­ç³»ç»Ÿï¼š

å¯¹è±¡ {} - åƒå¸¦æ ‡ç­¾çš„ç›’å­
æ•°ç»„ [] - åƒæœ‰åºæ’åˆ—çš„ç›’å­
å€¼     - ç›’å­é‡Œè£…çš„å…·ä½“ä¸œè¥¿ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰

ä¾‹å­ï¼š
{
  "person": {           â† è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ç›’å­
    "name": "æå››",      â† æ ‡ç­¾"name"ï¼Œå†…å®¹"æå››"
    "hobbies": [        â† æ ‡ç­¾"hobbies"ï¼Œå†…å®¹æ˜¯æ•°ç»„
      "è¯»ä¹¦",
      "æ¸¸æ³³"
    ]
  }
}
```

### 2.2 åŸºç¡€æŸ¥è¯¢è¯­æ³•


**ğŸ” ç‚¹å·è®¿é—®æ³•**
```bash
# æµ‹è¯•æ•°æ®
echo '{"name": "å¼ ä¸‰", "info": {"age": 25, "city": "ä¸Šæµ·"}}' > test.json

# è·å–é¡¶çº§å±æ€§
jq '.name' test.json
# è¾“å‡ºï¼š"å¼ ä¸‰"

# è·å–åµŒå¥—å±æ€§
jq '.info.age' test.json  
# è¾“å‡ºï¼š25

# è·å–æ•´ä¸ªåµŒå¥—å¯¹è±¡
jq '.info' test.json
# è¾“å‡ºï¼š{"age": 25, "city": "ä¸Šæµ·"}
```

**ğŸ’¡ ç†è§£è¦ç‚¹**
```
.name     - ç‚¹å·åé¢è·Ÿå±æ€§å
.info.age - ç”¨ç‚¹å·è¿æ¥ï¼Œä¸€å±‚å±‚å¾€ä¸‹æ‰¾
.         - å•ç‹¬çš„ç‚¹è¡¨ç¤ºæ•´ä¸ªJSONå¯¹è±¡
```

### 2.3 å¤„ç†ä¸å­˜åœ¨çš„å­—æ®µ


**âš ï¸ å­—æ®µä¸å­˜åœ¨çš„æƒ…å†µ**
```bash
# æŸ¥è¯¢ä¸å­˜åœ¨çš„å­—æ®µ
echo '{"name": "å¼ ä¸‰"}' | jq '.age'
# è¾“å‡ºï¼šnull

# ä½¿ç”¨å¯é€‰æ“ä½œç¬¦
echo '{"name": "å¼ ä¸‰"}' | jq '.age?'
# è¾“å‡ºï¼šnullï¼ˆä¸ä¼šæŠ¥é”™ï¼‰

# æä¾›é»˜è®¤å€¼
echo '{"name": "å¼ ä¸‰"}' | jq '.age // 18'
# è¾“å‡ºï¼š18ï¼ˆå¦‚æœageä¸å­˜åœ¨ï¼Œè¿”å›18ï¼‰
```

**ğŸ¯ å®ç”¨æŠ€å·§**
```bash
# æ£€æŸ¥å­—æ®µæ˜¯å¦å­˜åœ¨
echo '{"name": "å¼ ä¸‰"}' | jq 'has("age")'
# è¾“å‡ºï¼šfalse

# è·å–æ‰€æœ‰é”®å
echo '{"name": "å¼ ä¸‰", "age": 25}' | jq 'keys'
# è¾“å‡ºï¼š["age", "name"]
```

---

## 3. ğŸ—‚ï¸ æ•°ç»„å…ƒç´ è®¿é—®ä¸åˆ‡ç‰‡æ“ä½œ


### 3.1 ç†è§£JSONæ•°ç»„


**ğŸ“‹ æ•°ç»„çš„æœ¬è´¨**
```
æ•°ç»„å°±åƒç¼–å·çš„å‚¨ç‰©æŸœï¼š

[
  "è‹¹æœ",    â† 0å·æŸœå­
  "é¦™è•‰",    â† 1å·æŸœå­  
  "æ©™å­"     â† 2å·æŸœå­
]

ç´¢å¼•ä»0å¼€å§‹ï¼Œå°±åƒæ¥¼å±‚ä»0æ¥¼å¼€å§‹æ•°ä¸€æ ·
```

### 3.2 æ•°ç»„åŸºæœ¬è®¿é—®


**ğŸ”¢ ç´¢å¼•è®¿é—®**
```bash
# åˆ›å»ºæ•°ç»„æµ‹è¯•æ•°æ®
echo '["è‹¹æœ", "é¦™è•‰", "æ©™å­", "è‘¡è„"]' > fruits.json

# è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼•0ï¼‰
jq '.[0]' fruits.json
# è¾“å‡ºï¼š"è‹¹æœ"

# è·å–æœ€åä¸€ä¸ªå…ƒç´ 
jq '.[-1]' fruits.json  
# è¾“å‡ºï¼š"è‘¡è„"

# è·å–å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ 
jq '.[-2]' fruits.json
# è¾“å‡ºï¼š"æ©™å­"
```

### 3.3 æ•°ç»„åˆ‡ç‰‡æ“ä½œ


**âœ‚ï¸ åˆ‡ç‰‡è¯­æ³•**
```bash
# åˆ‡ç‰‡è¯­æ³•ï¼š[èµ·å§‹:ç»“æŸ]
# è·å–å‰ä¸¤ä¸ªå…ƒç´ 
jq '.[0:2]' fruits.json
# è¾“å‡ºï¼š["è‹¹æœ", "é¦™è•‰"]

# è·å–ä»ç¬¬2ä¸ªå¼€å§‹çš„æ‰€æœ‰å…ƒç´ 
jq '.[2:]' fruits.json  
# è¾“å‡ºï¼š["æ©™å­", "è‘¡è„"]

# è·å–é™¤äº†æœ€åä¸€ä¸ªçš„æ‰€æœ‰å…ƒç´ 
jq '.[:-1]' fruits.json
# è¾“å‡ºï¼š["è‹¹æœ", "é¦™è•‰", "æ©™å­"]
```

**ğŸ¯ åˆ‡ç‰‡è®°å¿†æŠ€å·§**
```
[èµ·å§‹:ç»“æŸ]
- èµ·å§‹ï¼šåŒ…å«è¿™ä¸ªä½ç½®
- ç»“æŸï¼šä¸åŒ…å«è¿™ä¸ªä½ç½®
- ç©ºç€ï¼šè¡¨ç¤ºåˆ°å¤´

å°±åƒåˆ‡è›‹ç³•ï¼š
[1:3] - ä»ç¬¬2å—åˆ‡åˆ°ç¬¬4å—å‰ï¼ˆå¾—åˆ°ç¬¬2ã€3å—ï¼‰
```

### 3.4 å¤æ‚æ•°ç»„æ“ä½œ


**ğŸ—ƒï¸ å¯¹è±¡æ•°ç»„å¤„ç†**
```bash
# åˆ›å»ºå¯¹è±¡æ•°ç»„
cat > users.json << 'EOF'
[
  {"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"},
  {"name": "æå››", "age": 30, "city": "ä¸Šæµ·"},
  {"name": "ç‹äº”", "age": 28, "city": "æ·±åœ³"}
]
EOF

# è·å–æ‰€æœ‰äººçš„åå­—
jq '.[].name' users.json
# è¾“å‡ºï¼š
# "å¼ ä¸‰"
# "æå››"  
# "ç‹äº”"

# è·å–ç¬¬ä¸€ä¸ªäººçš„ä¿¡æ¯
jq '.[0]' users.json
# è¾“å‡ºï¼š{"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}
```

---

## 4. ğŸ¨ å¯¹è±¡å±æ€§æå–ä¸è¿‡æ»¤


### 4.1 å±æ€§æå–åŸºç¡€


**ğŸ” å¤šå±æ€§åŒæ—¶æå–**
```bash
# ä½¿ç”¨å¯¹è±¡æ„é€ è¯­æ³•
jq '{name: .name, age: .age}' users.json
# æå–å§“åå’Œå¹´é¾„æ„æˆæ–°å¯¹è±¡

# ç®€åŒ–å†™æ³•ï¼ˆå±æ€§åç›¸åŒæ—¶ï¼‰
jq '{name, age}' users.json  
# ç­‰åŒäºä¸Šé¢çš„å†™æ³•
```

### 4.2 å±æ€§é‡å‘½å


**ğŸ·ï¸ ç»™å±æ€§èµ·æ–°åå­—**
```bash
# é‡å‘½åå±æ€§
echo '{"name": "å¼ ä¸‰", "age": 25}' | jq '{å§“å: .name, å¹´é¾„: .age}'
# è¾“å‡ºï¼š{"å§“å": "å¼ ä¸‰", "å¹´é¾„": 25}

# è®¡ç®—æ–°å±æ€§
echo '{"name": "å¼ ä¸‰", "birth_year": 1998}' | jq '{
  name: .name,
  age: (2023 - .birth_year)
}'
```

### 4.3 æ¡ä»¶å±æ€§è¿‡æ»¤


**âš–ï¸ æ ¹æ®æ¡ä»¶é€‰æ‹©å±æ€§**
```bash
# åªä¿ç•™å¹´é¾„å¤§äº26çš„ç”¨æˆ·çš„å§“å
jq '.[] | select(.age > 26) | .name' users.json

# è¿‡æ»¤ç‰¹å®šåŸå¸‚çš„ç”¨æˆ·
jq '.[] | select(.city == "åŒ—äº¬")' users.json
```

---

## 5. ğŸ”— ç®¡é“æ“ä½œç¬¦ç»„åˆæŸ¥è¯¢


### 5.1 ç†è§£ç®¡é“æ¦‚å¿µ


**ğŸš° ç®¡é“å°±åƒæµæ°´çº¿**
```
åŸå§‹æ•°æ® â†’ ç¬¬ä¸€æ­¥å¤„ç† â†’ ç¬¬äºŒæ­¥å¤„ç† â†’ æœ€ç»ˆç»“æœ

å°±åƒå·¥å‚æµæ°´çº¿ï¼š
JSONæ•°æ® â†’ è¿‡æ»¤æ“ä½œ â†’ æå–å±æ€§ â†’ æ ¼å¼è½¬æ¢
```

### 5.2 ç®¡é“åŸºæœ¬ç”¨æ³•


**ğŸ”§ ç®¡é“æ“ä½œç¬¦ |**
```bash
# ä»æ•°ç»„ä¸­é€‰æ‹©ç‰¹å®šå…ƒç´ ï¼Œç„¶åæå–å±æ€§
jq '.[] | select(.age > 27) | .name' users.json

# åˆ†æ­¥ç†è§£ï¼š
# ç¬¬1æ­¥ï¼š.[]           - éå†æ•°ç»„æ¯ä¸ªå…ƒç´ 
# ç¬¬2æ­¥ï¼šselect(.age > 27) - è¿‡æ»¤å¹´é¾„å¤§äº27çš„
# ç¬¬3æ­¥ï¼š.name         - æå–å§“å
```

### 5.3 å¤æ‚ç®¡é“ç»„åˆ


**âš¡ å¤šçº§ç®¡é“å¤„ç†**
```bash
# åˆ›å»ºå¤æ‚æµ‹è¯•æ•°æ®
cat > company.json << 'EOF'
{
  "departments": [
    {
      "name": "æŠ€æœ¯éƒ¨",
      "employees": [
        {"name": "å¼ ä¸‰", "salary": 8000, "level": "åˆçº§"},
        {"name": "æå››", "salary": 12000, "level": "ä¸­çº§"}
      ]
    },
    {
      "name": "é”€å”®éƒ¨", 
      "employees": [
        {"name": "ç‹äº”", "salary": 10000, "level": "ä¸­çº§"}
      ]
    }
  ]
}
EOF

# æ‰¾å‡ºæ‰€æœ‰ä¸­çº§å‘˜å·¥çš„å§“å
jq '.departments[].employees[] | select(.level == "ä¸­çº§") | .name' company.json
```

**ğŸ“Š ç®¡é“æµç¨‹å›¾**
```
åŸå§‹JSON
    â†“
.departments[]     â† éå†æ‰€æœ‰éƒ¨é—¨
    â†“  
.employees[]       â† éå†æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥
    â†“
select(.level=="ä¸­çº§") â† ç­›é€‰ä¸­çº§å‘˜å·¥
    â†“
.name              â† æå–å§“å
    â†“
æœ€ç»ˆç»“æœï¼š"æå››", "ç‹äº”"
```

---

## 6. ğŸ›ï¸ æ¡ä»¶è¿‡æ»¤ä¸æ•°æ®è½¬æ¢


### 6.1 selectæ¡ä»¶è¿‡æ»¤


**ğŸ” selectå‡½æ•°è¯¦è§£**
```bash
# selectçš„ä½œç”¨ï¼šåƒç­›å­ä¸€æ ·è¿‡æ»¤æ•°æ®
# è¯­æ³•ï¼šselect(æ¡ä»¶è¡¨è¾¾å¼)

# æ•°å€¼æ¯”è¾ƒ
jq '.[] | select(.age >= 28)' users.json

# å­—ç¬¦ä¸²æ¯”è¾ƒ  
jq '.[] | select(.name == "å¼ ä¸‰")' users.json

# å­—ç¬¦ä¸²åŒ…å«
jq '.[] | select(.city | contains("äº¬"))' users.json
```

**âš–ï¸ å¤æ‚æ¡ä»¶ç»„åˆ**
```bash
# ä¸æ¡ä»¶ï¼ˆandï¼‰
jq '.[] | select(.age > 25 and .city == "ä¸Šæµ·")' users.json

# æˆ–æ¡ä»¶ï¼ˆorï¼‰
jq '.[] | select(.age > 30 or .city == "åŒ—äº¬")' users.json

# éæ¡ä»¶ï¼ˆnotï¼‰
jq '.[] | select(.city != "æ·±åœ³")' users.json
```

### 6.2 mapæ•°æ®è½¬æ¢


**ğŸ—ºï¸ mapå‡½æ•°çš„ä½œç”¨**
```bash
# mapå°±åƒç»™æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œç›¸åŒçš„æ“ä½œ

# ç»™æ‰€æœ‰ç”¨æˆ·çš„å¹´é¾„åŠ 1
jq 'map(.age + 1)' users.json

# æå–æ‰€æœ‰ç”¨æˆ·çš„å§“åï¼ˆå½¢æˆæ•°ç»„ï¼‰
jq 'map(.name)' users.json
# è¾“å‡ºï¼š["å¼ ä¸‰", "æå››", "ç‹äº”"]

# ä¸ºæ¯ä¸ªç”¨æˆ·æ·»åŠ æ–°å­—æ®µ
jq 'map(. + {status: "active"})' users.json
```

### 6.3 æ•°æ®åˆ†ç»„ä¸ç»Ÿè®¡


**ğŸ“Š group_byåˆ†ç»„**
```bash
# æŒ‰åŸå¸‚åˆ†ç»„
jq 'group_by(.city)' users.json

# ç»Ÿè®¡æ¯ä¸ªåŸå¸‚çš„äººæ•°
jq 'group_by(.city) | map({city: .[0].city, count: length})' users.json
```

---

## 7. ğŸ”„ æ•°æ®ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–


### 7.1 åŸºç¡€ç±»å‹è½¬æ¢


**ğŸ”¢ æ•°å­—ä¸å­—ç¬¦ä¸²è½¬æ¢**
```bash
# å­—ç¬¦ä¸²è½¬æ•°å­—
echo '"123"' | jq 'tonumber'
# è¾“å‡ºï¼š123

# æ•°å­—è½¬å­—ç¬¦ä¸²  
echo '123' | jq 'tostring'
# è¾“å‡ºï¼š"123"

# å®é™…åº”ç”¨ï¼šå¤„ç†CSVæ•°æ®
echo '{"age": "25", "score": "85.5"}' | jq '{
  age: .age | tonumber,
  score: .score | tonumber
}'
```

### 7.2 æ•°ç»„ä¸å¯¹è±¡è½¬æ¢


**ğŸ“‹ ç»“æ„è½¬æ¢**
```bash
# å¯¹è±¡è½¬æ•°ç»„ï¼ˆæå–æ‰€æœ‰å€¼ï¼‰
echo '{"a": 1, "b": 2, "c": 3}' | jq 'to_entries'
# è¾“å‡ºï¼š[{"key":"a","value":1},{"key":"b","value":2},{"key":"c","value":3}]

# æ•°ç»„è½¬å¯¹è±¡
echo '[{"key":"name","value":"å¼ ä¸‰"},{"key":"age","value":25}]' | jq 'from_entries'
# è¾“å‡ºï¼š{"name":"å¼ ä¸‰","age":25}
```

### 7.3 æ—¥æœŸæ—¶é—´å¤„ç†


**â° æ—¶é—´æˆ³è½¬æ¢**
```bash
# å½“å‰æ—¶é—´æˆ³
jq 'now' /dev/null
# è¾“å‡ºï¼š1694601600.123456

# æ—¶é—´æˆ³è½¬æ—¥æœŸå­—ç¬¦ä¸²
echo '1694601600' | jq 'strftime("%Y-%m-%d %H:%M:%S")'

# æ—¥æœŸå­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³
echo '"2023-09-13 10:30:00"' | jq 'strptime("%Y-%m-%d %H:%M:%S") | mktime'
```

---

## 8. ğŸ“ å¤šæ–‡ä»¶ä¸å¤æ‚å¤„ç†


### 8.1 å¤šä¸ªJSONæ–‡ä»¶å¤„ç†


**ğŸ—ƒï¸ æ‰¹é‡å¤„ç†æ–‡ä»¶**
```bash
# åˆ›å»ºå¤šä¸ªæµ‹è¯•æ–‡ä»¶
echo '{"dept": "æŠ€æœ¯éƒ¨", "count": 5}' > dept1.json
echo '{"dept": "é”€å”®éƒ¨", "count": 3}' > dept2.json
echo '{"dept": "å¸‚åœºéƒ¨", "count": 4}' > dept3.json

# åˆå¹¶å¤šä¸ªæ–‡ä»¶ä¸ºæ•°ç»„
jq -s '.' dept*.json
# -s å‚æ•°è¡¨ç¤ºå°†å¤šä¸ªJSONä½œä¸ºæ•°ç»„å¤„ç†

# è®¡ç®—æ€»äººæ•°
jq -s 'map(.count) | add' dept*.json
```

### 8.2 å¤„ç†è¶…å¤§JSONæ–‡ä»¶


**âš¡ æµå¼å¤„ç†**
```bash
# å¯¹äºå¤§æ–‡ä»¶ï¼Œä½¿ç”¨æµå¼å¤„ç†
# --stream å‚æ•°é€è¡Œå¤„ç†ï¼ŒèŠ‚çœå†…å­˜
jq --stream '.[] | select(.type == "error")' huge.json

# åªå¤„ç†å‰Næ¡è®°å½•
jq 'limit(100; .[])' large_array.json
```

### 8.3 å¤æ‚åµŒå¥—ç»“æ„æ‰å¹³åŒ–


**ğŸ—‚ï¸ æ·±å±‚æ•°æ®æå–**
```bash
# é€’å½’æŸ¥æ‰¾æ‰€æœ‰nameå­—æ®µ
jq '..|.name?|select(.!=null)' nested.json

# æ‰å¹³åŒ–å¤šç»´æ•°ç»„
echo '[[1,2],[3,4],[5,6]]' | jq 'flatten'
# è¾“å‡ºï¼š[1,2,3,4,5,6]

# é€’å½’æ‰å¹³åŒ–æ‰€æœ‰å±‚çº§
echo '[[[1,2]],[[3,4]]]' | jq 'flatten(2)'
```

---

## 9. ğŸŒ APIå“åº”æ•°æ®åˆ†æå®æˆ˜


### 9.1 å¤„ç†REST APIå“åº”


**ğŸ“¡ å®é™…APIåœºæ™¯**
```bash
# æ¨¡æ‹ŸGitHub APIå“åº”
cat > github_repos.json << 'EOF'
{
  "total_count": 3,
  "items": [
    {
      "name": "awesome-project",
      "stargazers_count": 150,
      "language": "JavaScript",
      "owner": {"login": "developer1"}
    },
    {
      "name": "cool-tool", 
      "stargazers_count": 89,
      "language": "Python",
      "owner": {"login": "developer2"}
    }
  ]
}
EOF

# æå–é¡¹ç›®åŸºæœ¬ä¿¡æ¯
jq '.items[] | {
  name: .name,
  stars: .stargazers_count,
  language: .language,
  author: .owner.login
}' github_repos.json
```

### 9.2 é”™è¯¯å¤„ç†ä¸æ•°æ®éªŒè¯


**ğŸ›¡ï¸ å¥å£®çš„æ•°æ®å¤„ç†**
```bash
# å®‰å…¨åœ°è®¿é—®å¯èƒ½ä¸å­˜åœ¨çš„å­—æ®µ
jq '.items[]? | {
  name: .name // "æœªçŸ¥",
  stars: .stargazers_count // 0,
  language: .language // "æœªçŸ¥",
  author: .owner.login // "åŒ¿å"
}' github_repos.json

# æ•°æ®ç±»å‹éªŒè¯
jq '.items[] | select(.stargazers_count | type == "number")' github_repos.json
```

### 9.3 APIæ•°æ®ç»Ÿè®¡åˆ†æ


**ğŸ“ˆ ç»Ÿè®¡ä¸åˆ†æ**
```bash
# æŒ‰ç¼–ç¨‹è¯­è¨€ç»Ÿè®¡é¡¹ç›®æ•°é‡
jq 'group_by(.language) | map({
  language: .[0].language,
  count: length,
  total_stars: map(.stargazers_count) | add
})' repos_data.json

# è®¡ç®—å¹³å‡staræ•°
jq '.items | map(.stargazers_count) | add / length' github_repos.json

# æ‰¾å‡ºstaræ•°æœ€å¤šçš„é¡¹ç›®
jq '.items | max_by(.stargazers_count)' github_repos.json
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ jqæœ¬è´¨ï¼šä¸“é—¨å¤„ç†JSONæ•°æ®çš„å‘½ä»¤è¡Œå·¥å…·
ğŸ”¸ åŸºæœ¬è¯­æ³•ï¼šç”¨ç‚¹å·è®¿é—®å¯¹è±¡å±æ€§ï¼Œç”¨æ–¹æ‹¬å·è®¿é—®æ•°ç»„
ğŸ”¸ ç®¡é“æ“ä½œï¼šç”¨ | è¿æ¥å¤šä¸ªæ“ä½œï¼Œåƒæµæ°´çº¿ä¸€æ ·å¤„ç†æ•°æ®
ğŸ”¸ è¿‡æ»¤ç­›é€‰ï¼šç”¨selectå‡½æ•°æ ¹æ®æ¡ä»¶è¿‡æ»¤æ•°æ®
ğŸ”¸ æ•°æ®è½¬æ¢ï¼šç”¨mapå‡½æ•°å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŒæ“ä½œ
```

### 10.2 å…³é”®è¯­æ³•é€ŸæŸ¥


| **æ“ä½œ** | **è¯­æ³•** | **è¯´æ˜** | **ç¤ºä¾‹** |
|----------|----------|----------|----------|
| ğŸ” **å±æ€§è®¿é—®** | `.fieldname` | è·å–å¯¹è±¡å±æ€§ | `.name` |
| ğŸ“‹ **æ•°ç»„è®¿é—®** | `.[index]` | è·å–æ•°ç»„å…ƒç´  | `.[0]` |
| âœ‚ï¸ **æ•°ç»„åˆ‡ç‰‡** | `.[start:end]` | è·å–æ•°ç»„ç‰‡æ®µ | `.[1:3]` |
| ğŸ”— **ç®¡é“è¿æ¥** | `expr1 | expr2` | è¿æ¥å¤šä¸ªæ“ä½œ | `.[] | .name` |
| ğŸ¯ **æ¡ä»¶è¿‡æ»¤** | `select(condition)` | ç­›é€‰æ»¡è¶³æ¡ä»¶çš„æ•°æ® | `select(.age > 25)` |
| ğŸ—ºï¸ **æ‰¹é‡è½¬æ¢** | `map(expr)` | å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ | `map(.name)` |

### 10.3 å®ç”¨åœºæ™¯åº”ç”¨


**ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯**
```
APIè°ƒè¯•ï¼š
- æå–APIå“åº”ä¸­çš„å…³é”®æ•°æ®
- éªŒè¯æ•°æ®æ ¼å¼å’Œå†…å®¹
- å¿«é€Ÿå®šä½é—®é¢˜å­—æ®µ

æ—¥å¿—åˆ†æï¼š
- è¿‡æ»¤ç‰¹å®šç±»å‹çš„æ—¥å¿—
- ç»Ÿè®¡é”™è¯¯å‘ç”Ÿæ¬¡æ•°
- æå–å…³é”®ä¸šåŠ¡æ•°æ®

é…ç½®ç®¡ç†ï¼š
- æ‰¹é‡ä¿®æ”¹é…ç½®æ–‡ä»¶
- éªŒè¯é…ç½®æ ¼å¼
- åˆå¹¶å¤šä¸ªé…ç½®æ–‡ä»¶

æ•°æ®å¤„ç†ï¼š
- CSVä¸JSONæ ¼å¼è½¬æ¢
- æ•°æ®æ¸…æ´—å’Œæ ‡å‡†åŒ–
- ç”ŸæˆæŠ¥è¡¨å’Œç»Ÿè®¡
```

### 10.4 å­¦ä¹ è¿›é˜¶è·¯çº¿


**ğŸ“š å­¦ä¹ å»ºè®®**
```
ğŸŒ± å…¥é—¨é˜¶æ®µï¼š
- æŒæ¡åŸºæœ¬çš„å±æ€§å’Œæ•°ç»„è®¿é—®
- ç†Ÿç»ƒä½¿ç”¨ç®¡é“æ“ä½œ
- ç†è§£selectå’Œmapçš„ç”¨æ³•

ğŸŒ¿ è¿›é˜¶é˜¶æ®µï¼š
- å­¦ä¹ å¤æ‚çš„æ•°æ®è½¬æ¢
- æŒæ¡ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–
- å¤„ç†åµŒå¥—ç»“æ„æ•°æ®

ğŸŒ³ é«˜çº§é˜¶æ®µï¼š
- ç¼–å†™å¤æ‚çš„æŸ¥è¯¢è¡¨è¾¾å¼
- å¤„ç†å¤§å‹JSONæ–‡ä»¶
- ç»“åˆå…¶ä»–å·¥å…·ä½¿ç”¨
```

### 10.5 å®è·µç»ƒä¹ å»ºè®®


**ğŸ¯ ç»ƒä¹ æ–¹æ¡ˆ**
```bash
# æ¯æ—¥ç»ƒä¹ ï¼šç”¨çœŸå®APIæ•°æ®ç»ƒä¹ 
curl -s "https://api.github.com/users/octocat/repos" | jq '.[]|{name,stars:.stargazers_count}'

# é¡¹ç›®å®è·µï¼šåˆ†æè‡ªå·±é¡¹ç›®çš„é…ç½®æ–‡ä»¶
find . -name "*.json" | head -5 | xargs jq 'keys'

# æ·±å…¥å­¦ä¹ ï¼šé˜…è¯»jqå®˜æ–¹æ‰‹å†Œ
man jq  # æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
```

### 10.6 è®°å¿†è¦ç‚¹


**ğŸ§  æ ¸å¿ƒè®°å¿†**
- jqæ˜¯å¤„ç†JSONçš„ä¸“ä¸šå·¥å…·ï¼Œæ¯”grep/sedæ›´é€‚åˆç»“æ„åŒ–æ•°æ®
- ç‚¹å·è®¿é—®å¯¹è±¡ï¼Œæ–¹æ‹¬å·è®¿é—®æ•°ç»„ï¼Œç®¡é“è¿æ¥æ“ä½œ
- selectç”¨æ¥è¿‡æ»¤ï¼Œmapç”¨æ¥è½¬æ¢ï¼Œä¸¤è€…æ˜¯æœ€æ ¸å¿ƒçš„å‡½æ•°
- ç†Ÿç»ƒæŒæ¡jqèƒ½å¤§å¹…æå‡å¤„ç†JSONæ•°æ®çš„æ•ˆç‡
- å®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹æ³•ï¼Œå¤šç”¨çœŸå®æ•°æ®ç»ƒä¹ 

**è®°å¿†å£è¯€**ï¼š
> ç‚¹å·å–å±æ€§ï¼Œæ–¹æ‹¬å·å–æ•°ç»„  
> ç®¡é“è¿æ“ä½œï¼Œæ•°æ®å¦‚æµæ°´  
> selectæ¥è¿‡æ»¤ï¼Œmapæ¥è½¬æ¢  
> JSONå¤„ç†ç‹ï¼Œjqæœ€æ‹¿æ‰‹