---
title: 8、tr字符转换工具
---
## 📚 目录

1. [tr命令基本概念](#1-tr命令基本概念)
2. [基本语法与参数](#2-基本语法与参数)
3. [字符替换与映射](#3-字符替换与映射)
4. [字符集合与范围表示](#4-字符集合与范围表示)
5. [删除字符功能](#5-删除字符功能)
6. [压缩重复字符](#6-压缩重复字符)
7. [补集转换操作](#7-补集转换操作)
8. [字符类表示](#8-字符类表示)
9. [实际应用场景](#9-实际应用场景)
10. [核心要点总结](#10-核心要点总结)

---

## 1. 🔤 tr命令基本概念


### 1.1 什么是tr命令


💭 **简单理解**：tr就像一个"字符翻译机"，可以把文本中的字符按照你的要求进行替换、删除或压缩。

```
💡 生活类比：
就像用"查找替换"功能：
- 把所有的"a"替换成"A" 
- 删除所有的数字
- 把连续的空格变成一个空格
```

**🏷️ 专业术语**：
- `tr` = **translate**（翻译）的缩写
- **字符级操作**：一次只处理一个字符，不是整个单词
- **流式处理**：从标准输入读取，向标准输出写入

### 1.2 tr的核心特点


**✅ 主要功能**：
```
字符替换：把指定字符替换成其他字符
字符删除：删除不需要的字符
字符压缩：把重复字符压缩成一个
字符映射：按照规则进行批量转换
```

**🔍 深入理解**：
- tr**只能从标准输入读取**，不能直接操作文件
- tr是**字符级别**的操作，不认识单词边界
- tr的转换是**一对一映射**关系

---

## 2. ⚙️ 基本语法与参数


### 2.1 命令语法结构


```bash
# 基本语法格式
tr [选项] SET1 [SET2]

# 最常用的形式
echo "hello world" | tr 'a-z' 'A-Z'
cat file.txt | tr 'old_chars' 'new_chars'
```

### 2.2 核心参数详解


| 参数 | **含义** | **作用说明** | **使用场景** |
|------|----------|-------------|-------------|
| `-d` | **delete（删除）** | `删除指定的字符` | `清理不需要的字符` |
| `-s` | **squeeze（压缩）** | `压缩重复的字符为一个` | `处理多余空格` |
| `-c` | **complement（补集）** | `对字符集取反操作` | `保留特定字符，删除其他` |
| `-t` | **truncate（截断）** | `截断第一个字符集` | `避免循环映射` |

🔍 **参数组合使用**：
```bash
# 可以组合使用多个参数
tr -ds ' ' '\n'    # 删除空格并压缩
tr -cd '0-9'       # 只保留数字，删除其他字符
```

---

## 3. 🔄 字符替换与映射


### 3.1 简单字符替换


**🌰 基础例子**：
```bash
# 把小写字母替换成大写字母
echo "hello world" | tr 'a-z' 'A-Z'
# 输出：HELLO WORLD

# 把空格替换成下划线
echo "hello world" | tr ' ' '_'
# 输出：hello_world

# 替换特定字符
echo "apple,banana,orange" | tr ',' ':'
# 输出：apple:banana:orange
```

💡 **理解要点**：
- 第一个参数是"**要替换的字符**"
- 第二个参数是"**替换成的字符**"
- 是**一对一映射**关系

### 3.2 字符映射原理


```
映射过程示例：
原文：  h e l l o   w o r l d
SET1：  a-z (所有小写字母)
SET2：  A-Z (对应的大写字母)
结果：  H E L L O   W O R L D

字符对应关系：
h → H,  e → E,  l → L,  o → O,  w → W,  r → R,  d → D
空格不在SET1中，所以保持不变
```

🔄 **换句话说**：tr会把输入中每个属于SET1的字符，替换成SET2中对应位置的字符。

---

## 4. 📊 字符集合与范围表示


### 4.1 范围表示法


**🏗️ 常用范围**：
```bash
# 字母范围
'a-z'     # 所有小写字母
'A-Z'     # 所有大写字母
'a-zA-Z'  # 所有字母

# 数字范围  
'0-9'     # 所有数字

# 组合范围
'a-zA-Z0-9'  # 字母和数字
```

**🌰 实际应用**：
```bash
# 转换大小写
echo "Hello World 123" | tr 'A-Z' 'a-z'
# 输出：hello world 123

# 数字替换为X
echo "phone: 138-1234-5678" | tr '0-9' 'X'
# 输出：phone: XXX-XXXX-XXXX
```

### 4.2 特殊字符表示


```bash
# 换行符和制表符
'\n'    # 换行符
'\t'    # 制表符（Tab）
'\r'    # 回车符
' '     # 空格

# 实际应用：把制表符替换成空格
cat file.txt | tr '\t' ' '
```

### 4.3 字符集合定义


```bash
# 自定义字符集合
echo "a1b2c3" | tr '123' 'xyz'
# 输出：axbycz

# 处理标点符号
echo "hello, world!" | tr ',.!' '???'
# 输出：hello? world?
```

💡 **记忆技巧**：
- 用连字符`-`表示范围：`a-z`
- 用方括号表示选择：`[abc]`等同于`abc`
- 特殊字符用反斜杠转义：`\t`、`\n`

---

## 5. 🗑️ 删除字符功能


### 5.1 -d选项基本用法


**🏷️ 专业术语**：`-d` = **delete**（删除）

```bash
# 删除所有数字
echo "abc123def456" | tr -d '0-9'
# 输出：abcdef

# 删除所有空格
echo "hello world test" | tr -d ' '
# 输出：helloworldtest

# 删除指定字符
echo "apple,banana,orange" | tr -d ','
# 输出：applebananaorange
```

### 5.2 删除多种字符


```bash
# 删除数字和标点符号
echo "Hello, World! 123" | tr -d '0-9,.!'
# 输出：Hello World 

# 删除换行符（把多行变成一行）
cat multiline.txt | tr -d '\n'

# 删除制表符和空格
echo -e "hello\tworld\n\ttest" | tr -d '\t '
```

🤔 **为什么这样**：删除功能在数据清洗时特别有用，可以快速去除不需要的字符。

### 5.3 实际应用场景


```bash
# 提取手机号中的数字
echo "手机号：138-1234-5678" | tr -d -c '0-9'
# 输出：13812345678

# 清理文件名中的特殊字符
echo "file name with spaces.txt" | tr -d ' '
# 输出：filenamewithspaces.txt
```

---

## 6. 🗜️ 压缩重复字符


### 6.1 -s选项详解


**🏷️ 专业术语**：`-s` = **squeeze**（压缩、挤压）

💭 **简单理解**：把连续出现的相同字符压缩成一个。

```bash
# 压缩重复的空格
echo "hello    world     test" | tr -s ' '
# 输出：hello world test

# 压缩重复的换行符
printf "line1\n\n\nline2\n\n" | tr -s '\n'
# 输出：
# line1
# line2
```

### 6.2 压缩原理演示


```
原文：  hello    world     test
分析：  h e l l o [   ] w o r l d [     ] t e s t
压缩：  h e l l o [ ] w o r l d [ ] t e s t
结果：  hello world test

🔍 关键理解：
- 只有连续的相同字符才会被压缩
- 不连续的相同字符不受影响
```

### 6.3 组合使用示例


```bash
# 先替换制表符为空格，再压缩多余空格
cat file.txt | tr '\t' ' ' | tr -s ' '

# 删除回车符并压缩换行符
cat dos_file.txt | tr -d '\r' | tr -s '\n'
```

---

## 7. 🔄 补集转换操作


### 7.1 -c选项理解


**🏷️ 专业术语**：`-c` = **complement**（补集、相反）

💭 **换句话说**：不是操作指定的字符，而是操作除了这些字符之外的所有其他字符。

```bash
# 只保留字母和数字，删除其他字符
echo "Hello, World! 123" | tr -cd 'a-zA-Z0-9'
# 输出：HelloWorld123

# 只保留数字
echo "price: $29.99" | tr -cd '0-9'
# 输出：2999
```

### 7.2 补集操作图解


```
原文：    H e l l o ,   W o r l d !   1 2 3
字符集：  a-zA-Z0-9 (字母和数字)
补集：    , 空格 ! (除了字母数字以外的字符)
操作：    删除补集中的字符
结果：    H e l l o W o r l d 1 2 3
```

### 7.3 实际应用场景


```bash
# 提取文本中的纯数字
echo "订单号：ORDER-2023-001" | tr -cd '0-9'
# 输出：2023001

# 只保留英文字母
echo "姓名：Zhang San" | tr -cd 'a-zA-Z '
# 输出：Zhang San

# 清理特殊字符，只保留基本字符
echo "file@name#2023$.txt" | tr -cd 'a-zA-Z0-9.-'
# 输出：filename2023.txt
```

🎯 **最佳实践**：数据清洗时，-c选项特别有用，可以"反向思考"，保留需要的字符而不是删除不需要的字符。

---

## 8. 📋 字符类表示


### 8.1 POSIX字符类概念


**🤔 为什么需要字符类**：不同语言环境下，字符范围可能不同，字符类提供了标准化的表示方法。

**🏗️ 常用字符类**：
```bash
[:alnum:]   # 字母和数字 (alphanumeric)
[:alpha:]   # 字母 (alphabetic)
[:digit:]   # 数字 (0-9)
[:lower:]   # 小写字母
[:upper:]   # 大写字母
[:space:]   # 空白字符（空格、制表符、换行符等）
[:punct:]   # 标点符号
[:print:]   # 可打印字符
```

### 8.2 字符类使用方法


```bash
# 使用字符类进行大小写转换
echo "Hello World 123" | tr '[:upper:]' '[:lower:]'
# 输出：hello world 123

# 删除所有数字
echo "abc123def456" | tr -d '[:digit:]'
# 输出：abcdef

# 只保留字母和数字
echo "Hello, World! 123" | tr -cd '[:alnum:]'
# 输出：HelloWorld123
```

### 8.3 字符类 vs 范围表示


| 表示方法 | **优点** | **缺点** | **推荐场景** |
|----------|----------|----------|-------------|
| `a-z` | `简洁直观` | `可能不包含本地化字符` | `简单英文处理` |
| `[:lower:]` | `支持本地化` | `稍显复杂` | `国际化应用` |
| `[:alpha:]` | `语言无关` | `需要理解字符类` | `多语言文本` |

🌰 **实际对比**：
```bash
# 两种方式效果相同（在英文环境下）
echo "Hello World" | tr 'A-Z' 'a-z'
echo "Hello World" | tr '[:upper:]' '[:lower:]'
```

---

## 9. 🛠️ 实际应用场景


### 9.1 大小写转换应用


**📊 业务场景**：统一文件名格式、处理用户输入

```bash
# 文件名转小写
for file in *; do
    newname=$(echo "$file" | tr '[:upper:]' '[:lower:]')
    mv "$file" "$newname"
done

# 用户输入标准化
read -p "输入姓名: " name
name=$(echo "$name" | tr '[:lower:]' '[:upper:]')
echo "标准化后: $name"
```

### 9.2 数据清洗与格式化


**🧹 数据清洗场景**：
```bash
# 清理CSV文件中的引号和多余空格
cat data.csv | tr -d '"' | tr -s ' '

# 统一分隔符（把制表符和多个空格都变成单个空格）
cat data.txt | tr -s '[:space:]' ' '

# 提取日志中的IP地址数字
grep "IP:" access.log | tr -cd '0-9.\n'
```

### 9.3 文本格式转换


```bash
# DOS格式转Unix格式（删除回车符）
cat dos_file.txt | tr -d '\r' > unix_file.txt

# 把多行合并成一行（用空格分隔）
cat multiline.txt | tr '\n' ' '

# 把逗号分隔变成换行分隔
echo "apple,banana,orange" | tr ',' '\n'
```

### 9.4 特殊字符转义处理


**⚠️ 重要提醒**：处理特殊字符时需要注意转义

```bash
# 处理包含特殊字符的文本
echo 'path\to\file' | tr '\\' '/'
# 输出：path/to/file

# 处理制表符分隔的数据
cat tsv_file.txt | tr '\t' ','

# 转换引号类型
echo '"Hello World"' | tr '"' "'"
# 输出：'Hello World'
```

### 9.5 数据验证与提取


```bash
# 验证输入只包含数字
validate_number() {
    local input="$1"
    local clean=$(echo "$input" | tr -cd '0-9')
    if [ "$input" = "$clean" ]; then
        echo "有效数字"
    else
        echo "包含非数字字符"
    fi
}

# 提取电话号码中的数字
extract_phone() {
    echo "$1" | tr -cd '0-9'
}

extract_phone "电话：(010)1234-5678"
# 输出：01012345678
```

---

## 10. 📋 核心要点总结


### 10.1 必须掌握的基本概念


```
🔸 tr的本质：字符级别的流式转换工具
🔸 工作方式：从标准输入读取，向标准输出写入
🔸 转换原理：基于字符集合的一对一映射
🔸 核心功能：替换、删除、压缩、补集操作
🔸 字符表示：范围表示法和POSIX字符类
```

### 10.2 关键参数记忆


| 参数 | **记忆方法** | **核心功能** | **典型用法** |
|------|-------------|-------------|-------------|
| `-d` | **Delete删除** | `删除指定字符` | `tr -d '0-9'` |
| `-s` | **Squeeze压缩** | `压缩重复字符` | `tr -s ' '` |
| `-c` | **Complement补集** | `操作相反字符集` | `tr -cd 'a-zA-Z0-9'` |
| `-t` | **Truncate截断** | `避免循环映射` | `tr -t '...'` |

### 10.3 常用操作模式


**🔄 字符替换模式**：
```bash
tr 'old_chars' 'new_chars'    # 基本替换
tr 'a-z' 'A-Z'               # 大小写转换
tr ' ' '_'                   # 空格转下划线
```

**🗑️ 字符删除模式**：
```bash
tr -d 'chars'                # 删除指定字符
tr -cd 'keep_chars'          # 只保留指定字符
```

**🗜️ 字符压缩模式**：
```bash
tr -s 'chars'                # 压缩重复字符
tr -s '[:space:]'            # 压缩空白字符
```

### 10.4 实际应用价值


**💼 工作场景应用**：
- **数据清洗**：清除特殊字符，统一格式
- **文本转换**：大小写转换，分隔符替换
- **格式标准化**：DOS/Unix格式转换
- **数据提取**：从复杂文本中提取纯数字或字母
- **输入验证**：检查和清理用户输入

**🎯 学习建议**：
1. 先掌握基本的字符替换操作
2. 理解字符集合和范围表示
3. 熟练使用-d、-s、-c三个核心参数
4. 在实际数据处理中多练习应用

**🔑 核心记忆**：
- tr是字符级别的"翻译工具"
- 记住"替换、删除、压缩、补集"四大功能
- 掌握范围表示法和字符类的使用
- 理解tr只能处理标准输入，需要配合管道使用

**核心记忆口诀**：
```
tr工具字符改，替换删除又压缩
范围字符类要懂，补集操作很实用
管道配合处理强，数据清洗效率高
```