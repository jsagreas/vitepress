---
title: 2、文件目录操作命令
---
## 📚 目录

1. [目录创建与删除](#1-目录创建与删除)
2. [文件创建与时间戳操作](#2-文件创建与时间戳操作)
3. [文件复制命令详解](#3-文件复制命令详解)
4. [文件移动与重命名](#4-文件移动与重命名)
5. [文件删除操作](#5-文件删除操作)
6. [链接文件操作](#6-链接文件操作)
7. [文件属性查看](#7-文件属性查看)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 📁 目录创建与删除


### 1.1 mkdir - 创建目录命令


**🔸 基本概念**
`mkdir`就是"make directory"的缩写，专门用来创建新的文件夹。想象成在现实中建造一个新房间。

```bash
# 基本语法
mkdir [选项] 目录名

# 创建单个目录
mkdir myproject

# 创建多个目录
mkdir dir1 dir2 dir3
```

**💡 核心选项详解**

```bash
# -p 参数：递归创建（最重要！）
# 什么是递归创建？就是一次性创建多层目录
mkdir -p project/src/main/java

# 相当于依次创建：
# project/
# project/src/
# project/src/main/
# project/src/main/java/
```

**🎯 实际应用场景**

```bash
# 项目目录结构创建
mkdir -p myapp/{src,docs,tests,config}
mkdir -p myapp/src/{main,resources}
mkdir -p myapp/docs/{api,user}

# 结果目录结构：
myapp/
├── src/
│   ├── main/
│   └── resources/
├── docs/
│   ├── api/
│   └── user/
├── tests/
└── config/
```

### 1.2 rmdir - 删除空目录


**🔸 基本概念**
`rmdir`专门删除**空目录**，就像拆除一个空房间。如果房间里还有东西（文件），就拆不掉。

```bash
# 基本用法
rmdir 空目录名

# 删除多个空目录
rmdir dir1 dir2 dir3

# 递归删除空目录链
rmdir -p a/b/c/d
# 会依次删除 d、c、b、a（前提是都为空）
```

> ⚠️ **重要提醒**
> 
> rmdir只能删除空目录！如果目录里有文件，会报错："Directory not empty"

---

## 2. 📄 文件创建与时间戳操作


### 2.1 touch - 万能的文件处理工具


**🔸 基本概念**
`touch`命令有两个主要功能：
1. **创建空文件**：如果文件不存在，就创建一个
2. **更新时间戳**：如果文件存在，就更新它的访问和修改时间

```bash
# 创建单个空文件
touch newfile.txt

# 创建多个空文件
touch file1.txt file2.txt file3.txt

# 批量创建文件
touch report_{1..10}.txt
# 创建 report_1.txt 到 report_10.txt
```

**💡 时间戳更新功能**

Linux中每个文件都有三个重要时间：
- **访问时间(atime)**：最后读取文件的时间
- **修改时间(mtime)**：最后修改文件内容的时间  
- **变化时间(ctime)**：最后修改文件属性的时间

```bash
# 更新文件时间戳为当前时间
touch existing_file.txt

# 设置特定时间
touch -t 202309131530 file.txt
# 格式：YYYYMMDDhhmm
```

**🎯 实际应用场景**

```bash
# 快速创建项目文件结构
touch README.md
touch src/{main.c,utils.c,config.h}
touch tests/{test_main.c,test_utils.c}

# 更新文件时间戳（常用于Makefile编译控制）
touch *.c  # 让所有.c文件看起来是刚修改的
```

---

## 3. 📋 文件复制命令详解


### 3.1 cp - 文件复制的瑞士军刀


**🔸 基本概念**
`cp`就是"copy"的缩写，用来复制文件和目录。就像复印文件一样，原件还在，多了一份副本。

```bash
# 基本语法
cp [选项] 源文件 目标文件
cp [选项] 源文件... 目标目录
```

**💡 核心选项详解**

| 选项 | **含义** | **使用场景** |
|------|----------|-------------|
| `-r` | `递归复制目录` | `复制整个文件夹` |
| `-p` | `保持文件属性` | `保留权限、时间戳等` |
| `-a` | `归档复制` | `等同于-rpP，完整备份` |
| `-i` | `交互式复制` | `覆盖前询问` |
| `-u` | `仅复制更新的文件` | `增量备份` |

**🔧 实际操作示例**

```bash
# 复制单个文件
cp source.txt backup.txt

# 复制目录（必须用-r）
cp -r myproject myproject_backup

# 保持属性复制（推荐）
cp -p important.txt important_backup.txt

# 归档复制（最完整的备份）
cp -a /home/user/documents /backup/
```

**🎯 高级应用场景**

```bash
# 批量复制特定文件
cp *.txt backup_folder/

# 复制时保持目录结构
cp -r --parents src/main/java/App.java backup/
# 在backup/中创建完整的src/main/java/路径

# 增量备份（只复制新的或修改的文件）
cp -ru source_dir/ backup_dir/
```

---

## 4. ↔️ 文件移动与重命名


### 4.1 mv - 移动和重命名的统一操作


**🔸 基本概念**
`mv`是"move"的缩写，但它实际上做两件事：
1. **移动文件**：把文件从一个地方移到另一个地方
2. **重命名**：改变文件名（本质上是移动到同一目录下的新名字）

```bash
# 基本语法
mv 源文件 目标位置
mv 源文件... 目标目录
```

**💡 mv的特殊性质：原子操作**

```
原子操作的含义：
移动操作要么完全成功，要么完全失败
不会出现文件复制了一半就中断的情况
这使得mv非常安全可靠
```

**🔧 常用操作示例**

```bash
# 重命名文件
mv oldname.txt newname.txt

# 移动文件到目录
mv file.txt /home/user/documents/

# 移动多个文件
mv *.txt backup_folder/

# 移动目录
mv old_project new_project

# 移动并重命名
mv /tmp/data.txt /home/user/important_data.txt
```

**🎯 实际应用场景**

```bash
# 整理文件
mv *.jpg images/
mv *.mp3 music/
mv *.doc documents/

# 项目重构
mv src/old_module src/new_module
mv config.old config.backup

# 临时文件处理
mv temp_* archive/
```

---

## 5. 🗑️ 文件删除操作


### 5.1 rm - 强大的删除命令


**🔸 基本概念**
`rm`是"remove"的缩写，用来删除文件和目录。**这是一个危险的命令**，删除的文件通常无法恢复！

```bash
# 基本语法
rm [选项] 文件或目录
```

**⚠️ 核心选项详解**

| 选项 | **作用** | **风险等级** | **使用建议** |
|------|----------|-------------|-------------|
| 无选项 | `删除普通文件` | `🟡 中等` | `删除前确认` |
| `-i` | `交互式删除，每次询问` | `🟢 安全` | `新手推荐` |
| `-f` | `强制删除，不询问` | `🔴 危险` | `谨慎使用` |
| `-r` | `递归删除目录` | `🔴 很危险` | `三思而后行` |

**🔧 安全删除示例**

```bash
# 安全删除（推荐给新手）
rm -i unwanted.txt
# 会询问：remove 'unwanted.txt'? (y/n)

# 删除目录（交互式）
rm -ri old_project/
# 会逐个询问每个文件是否删除

# 批量删除（小心！）
rm *.tmp
```

**🚨 危险操作警告**

```bash
# 以下命令极其危险，新手千万不要尝试！
rm -rf /          # 删除整个系统！
rm -rf /*         # 同样是删除整个系统！
rm -rf $HOME      # 删除整个用户目录！

# 相对安全的递归删除
rm -rf ./temp_folder/  # 注意使用相对路径
```

> 💡 **安全建议**
> 
> 1. 删除前用`ls`命令确认要删除的文件
> 2. 重要文件先备份再删除
> 3. 使用`rm -i`养成交互确认的习惯
> 4. 避免使用`rm -rf`，除非你完全确定

---

## 6. 🔗 链接文件操作


### 6.1 ln - 创建文件链接


**🔸 基本概念**
`ln`用来创建文件链接。什么是链接？就像给文件起个"别名"或创建一个"快捷方式"。

**Linux中有两种链接：**
1. **硬链接**：指向文件实际数据的另一个名字
2. **软链接（符号链接）**：指向文件路径的快捷方式

```
硬链接 vs 软链接的形象比喻：

硬链接：就像一个人有两个身份证
- 两个名字都是真实的
- 删除一个，另一个还在
- 指向同一个实际数据

软链接：就像Windows的快捷方式
- 是一个指向原文件的箭头
- 原文件删除，链接就失效了
- 可以跨文件系统创建
```

**🔧 创建链接的语法**

```bash
# 创建硬链接
ln 原文件 链接名

# 创建软链接（符号链接）
ln -s 原文件 链接名
```

**💡 实际操作示例**

```bash
# 创建硬链接
echo "Hello World" > original.txt
ln original.txt hardlink.txt

# 查看链接数
ls -l
# -rw-r--r-- 2 user user 12 Sep 13 15:30 original.txt
# -rw-r--r-- 2 user user 12 Sep 13 15:30 hardlink.txt
# 注意第二列的数字2，表示有2个硬链接

# 创建软链接
ln -s /home/user/documents/important.txt shortcut.txt

# 查看软链接
ls -l shortcut.txt
# lrwxrwxrwx 1 user user 31 Sep 13 15:30 shortcut.txt -> /home/user/documents/important.txt
```

**🎯 实际应用场景**

```bash
# 为常用命令创建快捷方式
ln -s /usr/local/bin/my-long-command-name mcn

# 为配置文件创建链接
ln -s /etc/nginx/sites-available/mysite /etc/nginx/sites-enabled/

# 为不同版本的软件创建链接
ln -s /usr/bin/python3.9 /usr/local/bin/python
```

### 6.2 理解链接计数


**🔸 什么是链接计数**
链接计数显示有多少个硬链接指向同一个文件数据。

```bash
# 创建测试
echo "test data" > testfile.txt
ls -l testfile.txt
# -rw-r--r-- 1 user user 10 Sep 13 15:30 testfile.txt
#           ↑ 这个1就是链接计数

# 创建硬链接
ln testfile.txt testfile_link.txt
ls -l testfile*
# -rw-r--r-- 2 user user 10 Sep 13 15:30 testfile.txt
# -rw-r--r-- 2 user user 10 Sep 13 15:30 testfile_link.txt
#           ↑ 现在变成2了

# 删除原文件
rm testfile.txt
ls -l testfile_link.txt
# -rw-r--r-- 1 user user 10 Sep 13 15:30 testfile_link.txt
#           ↑ 又变回1了，但数据仍然存在
```

---

## 7. 🔍 文件属性查看


### 7.1 stat - 文件详细属性查看器


**🔸 基本概念**
`stat`命令显示文件的**所有详细信息**，比`ls -l`更加详细。就像给文件做一个全面的"体检报告"。

```bash
# 基本用法
stat filename

# 查看多个文件
stat file1 file2 file3
```

**💡 stat输出信息详解**

```bash
stat example.txt
```

输出示例：
```
  File: example.txt
  Size: 1024         Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d   Inode: 12345678   Links: 1
Access: (0644/-rw-r--r--)  Uid: (1000/   user)   Gid: (1000/   user)
Access: 2025-09-13 15:30:00.123456789 +0800
Modify: 2025-09-13 15:25:00.654321098 +0800
Change: 2025-09-13 15:25:00.654321098 +0800
 Birth: 2025-09-13 15:20:00.111111111 +0800
```

**🔍 各字段含义解释**

| 字段 | **含义** | **通俗解释** |
|------|----------|-------------|
| `File` | `文件名` | `就是文件的名字` |
| `Size` | `文件大小(字节)` | `文件有多大` |
| `Blocks` | `占用块数` | `在磁盘上实际占用空间` |
| `IO Block` | `I/O块大小` | `系统读写的最小单位` |
| `Device` | `设备号` | `文件在哪个磁盘设备上` |
| `Inode` | `索引节点号` | `文件在文件系统中的唯一ID` |
| `Links` | `硬链接数` | `有多少个名字指向这个文件` |
| `Access` | `访问时间` | `最后一次读取文件的时间` |
| `Modify` | `修改时间` | `最后一次修改内容的时间` |
| `Change` | `变化时间` | `最后一次修改属性的时间` |
| `Birth` | `创建时间` | `文件被创建的时间` |

**🎯 实际应用场景**

```bash
# 检查文件是否被修改
stat important.txt
# 看Modify时间判断文件是否有变动

# 查看权限详情
stat /etc/passwd
# 了解系统文件的详细权限设置

# 对比文件属性
stat file1.txt file2.txt
# 比较两个文件的各种属性
```

**🔧 stat的格式化输出**

```bash
# 只显示文件大小
stat -c %s file.txt

# 只显示修改时间
stat -c %Y file.txt

# 自定义格式
stat -c "文件:%n 大小:%s 权限:%a" file.txt
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心命令


```
🔸 mkdir -p：递归创建目录，项目初始化必备
🔸 touch：创建空文件，更新时间戳
🔸 cp -a：归档复制，完整备份文件
🔸 mv：移动重命名，原子操作安全可靠
🔸 rm -i：交互删除，安全第一
🔸 ln -s：创建软链接，灵活的快捷方式
🔸 stat：查看详细属性，故障排查利器
```

### 8.2 关键理解要点


**🔹 目录操作的核心逻辑**
```
mkdir -p 解决了什么问题？
→ 一次性创建多层目录，避免逐层创建的繁琐

rmdir 为什么只能删除空目录？
→ 安全考虑，防止意外删除有用文件
```

**🔹 文件操作的安全原则**
```
cp vs mv 的本质区别？
→ cp是复制（原件+副本），mv是移动（只有一份）

为什么推荐 rm -i？
→ 交互确认避免误删，养成好习惯
```

**🔹 链接的实际意义**
```
什么时候用硬链接？
→ 需要数据安全，删除一个还有另一个

什么时候用软链接？
→ 创建快捷方式，跨文件系统引用
```

### 8.3 实际应用价值


**📁 项目管理应用**
- 用`mkdir -p`快速创建项目目录结构
- 用`cp -a`进行项目完整备份
- 用`ln -s`为常用路径创建快捷方式

**🔧 日常运维应用**
- 用`touch`批量创建配置文件模板
- 用`stat`检查文件变更和权限问题
- 用`mv`安全地重命名和整理文件

**💡 最佳实践建议**
- 删除前先用`ls`确认目标文件
- 重要操作前先备份相关文件
- 使用相对路径避免误操作系统文件
- 养成使用`-i`参数的交互确认习惯

**核心记忆口诀**：
- 创建用mkdir -p，删除要谨慎
- 复制cp保原件，移动mv是搬迁  
- 删除rm加-i，安全第一不忘记
- 链接ln来帮忙，软硬链接要分清