---
title: 14ã€è°ƒè¯•ä¸æµ‹è¯•å·¥å…·
---
## ğŸ“š ç›®å½•

1. [æ­£åˆ™è¡¨è¾¾å¼è°ƒè¯•å™¨](#1-æ­£åˆ™è¡¨è¾¾å¼è°ƒè¯•å™¨)
2. [æµ‹è¯•ç”¨ä¾‹è®¾è®¡](#2-æµ‹è¯•ç”¨ä¾‹è®¾è®¡)
3. [æ€§èƒ½åŸºå‡†æµ‹è¯•](#3-æ€§èƒ½åŸºå‡†æµ‹è¯•)
4. [å¯è§†åŒ–åŒ¹é…å·¥å…·](#4-å¯è§†åŒ–åŒ¹é…å·¥å…·)
5. [åœ¨çº¿æ­£åˆ™æµ‹è¯•å¹³å°](#5-åœ¨çº¿æ­£åˆ™æµ‹è¯•å¹³å°)
6. [å•å…ƒæµ‹è¯•é›†æˆ](#6-å•å…ƒæµ‹è¯•é›†æˆ)
7. [å›å½’æµ‹è¯•ç­–ç•¥](#7-å›å½’æµ‹è¯•ç­–ç•¥)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” æ­£åˆ™è¡¨è¾¾å¼è°ƒè¯•å™¨


### 1.1 ä»€ä¹ˆæ˜¯æ­£åˆ™è°ƒè¯•


**ç®€å•ç†è§£**ï¼šå°±åƒè°ƒè¯•ç¨‹åºä¸€æ ·ï¼Œæ­£åˆ™è°ƒè¯•å™¨èƒ½è®©ä½ çœ‹åˆ°æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥åŒ¹é…æ–‡æœ¬çš„ï¼Œå“ªé‡Œå‡ºäº†é—®é¢˜ä¸€ç›®äº†ç„¶ã€‚

```
æ™®é€šæƒ…å†µï¼š
æ­£åˆ™ï¼š\d{3}-\d{3}-\d{4}
æ–‡æœ¬ï¼š"123-45-6789"
ç»“æœï¼šä¸åŒ¹é… ï¼ˆä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰

ç”¨è°ƒè¯•å™¨ï¼š
æ­¥éª¤1ï¼š\d{3} åŒ¹é… "123" âœ“
æ­¥éª¤2ï¼š- åŒ¹é… "-" âœ“  
æ­¥éª¤3ï¼š\d{3} æœŸæœ›3ä¸ªæ•°å­—ï¼Œå®é™…"45"åªæœ‰2ä¸ª âœ—
é—®é¢˜æ‰¾åˆ°äº†ï¼
```

### 1.2 å‘½ä»¤è¡Œè°ƒè¯•å·¥å…·


**grepè°ƒè¯•æ¨¡å¼**
```bash
# æ˜¾ç¤ºè¯¦ç»†åŒ¹é…è¿‡ç¨‹
echo "test@email.com" | grep -P '[\w.-]+@[\w.-]+\.\w+' --color=always

# æŸ¥çœ‹åŒ¹é…çš„å…·ä½“ä½ç½®
echo "Hello 123 World" | grep -o -P '\d+'
# è¾“å‡ºï¼š123

# æ˜¾ç¤ºåŒ¹é…è¡Œå·å’Œå­—ç¬¦ä½ç½®
grep -n -P '\d+' file.txt
```

**sedè°ƒè¯•æ¨¡å¼**
```bash
# æ˜¾ç¤ºæ›¿æ¢è¿‡ç¨‹
echo "hello world" | sed 's/o/O/g' 
# hello world â†’ hellO wOrld

# æŸ¥çœ‹åŒ¹é…ç»„
echo "2024-01-15" | sed -n 's/\([0-9]\{4\}\)-\([0-9]\{2\}\)/å¹´ä»½:\1 æœˆä»½:\2/p'
# è¾“å‡ºï¼šå¹´ä»½:2024 æœˆä»½:01
```

### 1.3 å†…ç½®è°ƒè¯•åŠŸèƒ½


**Bashè°ƒè¯•æŠ€å·§**
```bash
#!/bin/bash
# è®¾ç½®è°ƒè¯•æ¨¡å¼
set -x

text="user@domain.com"
pattern='([^@]+)@([^.]+)\.(.+)'

# æµ‹è¯•åŒ¹é…
if [[ $text =~ $pattern ]]; then
    echo "åŒ¹é…æˆåŠŸï¼"
    echo "ç”¨æˆ·å: ${BASH_REMATCH[1]}"
    echo "åŸŸå: ${BASH_REMATCH[2]}"
    echo "åç¼€: ${BASH_REMATCH[3]}"
else
    echo "åŒ¹é…å¤±è´¥"
fi
```

**Pythonç®€æ˜“è°ƒè¯•å™¨**
```python
import re

def debug_regex(pattern, text):
    """ç®€å•çš„æ­£åˆ™è°ƒè¯•å‡½æ•°"""
    print(f"æ­£åˆ™æ¨¡å¼: {pattern}")
    print(f"æµ‹è¯•æ–‡æœ¬: {text}")
    
    # å°è¯•åŒ¹é…
    match = re.search(pattern, text)
    if match:
        print("âœ“ åŒ¹é…æˆåŠŸ")
        print(f"  å®Œæ•´åŒ¹é…: {match.group()}")
        print(f"  åŒ¹é…ä½ç½®: {match.start()}-{match.end()}")
        
        # æ˜¾ç¤ºæ•è·ç»„
        for i, group in enumerate(match.groups(), 1):
            print(f"  ç»„{i}: {group}")
    else:
        print("âœ— åŒ¹é…å¤±è´¥")

# ä½¿ç”¨ç¤ºä¾‹
debug_regex(r'\d{3}-\d{4}', '123-4567')
```

---

## 2. ğŸ“ æµ‹è¯•ç”¨ä¾‹è®¾è®¡


### 2.1 æµ‹è¯•ç”¨ä¾‹è®¾è®¡åŸåˆ™


**å…¨é¢è¦†ç›–æ€ç»´**
```
æµ‹è¯•ç»´åº¦ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ­£é¢æµ‹è¯•ç”¨ä¾‹       â”‚ â† åº”è¯¥åŒ¹é…çš„æƒ…å†µ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è´Ÿé¢æµ‹è¯•ç”¨ä¾‹       â”‚ â† ä¸åº”è¯¥åŒ¹é…çš„æƒ…å†µ  
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹       â”‚ â† ä¸´ç•Œå€¼æƒ…å†µ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å¼‚å¸¸æµ‹è¯•ç”¨ä¾‹       â”‚ â† ç‰¹æ®Šå­—ç¬¦ã€ç©ºå€¼ç­‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é‚®ç®±éªŒè¯æµ‹è¯•ç”¨ä¾‹


**æµ‹è¯•æ¨¡å¼**ï¼š`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$`

```bash
#!/bin/bash
email_pattern='^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'

# æ­£é¢æµ‹è¯•ç”¨ä¾‹ï¼ˆåº”è¯¥é€šè¿‡ï¼‰
positive_cases=(
    "user@example.com"
    "test.email@domain.co.uk"
    "user+tag@example.org"
    "first.last@sub.domain.com"
    "123@number-domain.net"
)

# è´Ÿé¢æµ‹è¯•ç”¨ä¾‹ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
negative_cases=(
    "invalid.email"           # æ²¡æœ‰@ç¬¦å·
    "@domain.com"            # æ²¡æœ‰ç”¨æˆ·å
    "user@"                  # æ²¡æœ‰åŸŸå
    "user@domain"            # æ²¡æœ‰é¡¶çº§åŸŸå
    "user@domain."           # é¡¶çº§åŸŸåä¸ºç©º
    "user name@domain.com"   # åŒ…å«ç©ºæ ¼
    "user@domain,com"        # é”™è¯¯åˆ†éš”ç¬¦
)

# è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹
boundary_cases=(
    "a@b.co"                 # æœ€çŸ­åˆæ³•é‚®ç®±
    "very.long.email.address@very.long.domain.name.com"  # å¾ˆé•¿çš„é‚®ç®±
)

echo "=== æ­£é¢æµ‹è¯• ==="
for email in "${positive_cases[@]}"; do
    if [[ $email =~ $email_pattern ]]; then
        echo "âœ“ $email"
    else
        echo "âœ— $email (åº”è¯¥é€šè¿‡ä½†å¤±è´¥äº†!)"
    fi
done

echo -e "\n=== è´Ÿé¢æµ‹è¯• ==="
for email in "${negative_cases[@]}"; do
    if [[ $email =~ $email_pattern ]]; then
        echo "âœ— $email (ä¸åº”è¯¥é€šè¿‡ä½†æˆåŠŸäº†!)"
    else
        echo "âœ“ $email"
    fi
done
```

### 2.3 æµ‹è¯•æ•°æ®ç”Ÿæˆ


**è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®**
```python
import random
import string

def generate_test_cases():
    """ç”Ÿæˆå„ç§æµ‹è¯•ç”¨ä¾‹"""
    
    # ç”Ÿæˆæœ‰æ•ˆé‚®ç®±
    valid_emails = []
    for _ in range(10):
        user = ''.join(random.choices(string.ascii_lowercase, k=random.randint(3, 10)))
        domain = ''.join(random.choices(string.ascii_lowercase, k=random.randint(3, 8)))
        tld = random.choice(['com', 'org', 'net', 'edu', 'gov'])
        valid_emails.append(f"{user}@{domain}.{tld}")
    
    # ç”Ÿæˆæ— æ•ˆé‚®ç®±
    invalid_emails = [
        "no-at-symbol",
        "@missing-user.com",
        "missing-domain@.com",
        "spaces in@email.com",
        "double$$domain.com"
    ]
    
    return valid_emails, invalid_emails

# ä½¿ç”¨ç¤ºä¾‹
valid, invalid = generate_test_cases()
print("æœ‰æ•ˆé‚®ç®±:", valid[:3])
print("æ— æ•ˆé‚®ç®±:", invalid[:3])
```

---

## 3. âš¡ æ€§èƒ½åŸºå‡†æµ‹è¯•


### 3.1 ä¸ºä»€ä¹ˆéœ€è¦æ€§èƒ½æµ‹è¯•


æ­£åˆ™è¡¨è¾¾å¼çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œä¸åŒçš„å†™æ³•æ€§èƒ½å·®å¼‚å¯èƒ½å¾ˆå¤§ã€‚

```
ä¾‹å­ï¼šåŒ¹é…æ•°å­—
æ¨¡å¼A: \d+               # ç®€å•é«˜æ•ˆ
æ¨¡å¼B: [0-9][0-9]*       # ç¨æ…¢
æ¨¡å¼C: (0|1|2|3|4|5|6|7|8|9)+  # å¾ˆæ…¢ï¼ˆå›æº¯å¤šï¼‰

å¤„ç†1ä¸‡è¡Œæ•°æ®æ—¶ï¼š
æ¨¡å¼A: 0.1ç§’
æ¨¡å¼B: 0.3ç§’  
æ¨¡å¼C: 2.5ç§’
```

### 3.2 å‘½ä»¤è¡Œæ€§èƒ½æµ‹è¯•


**timeå‘½ä»¤æµ‹è¯•**
```bash
#!/bin/bash

# ç”Ÿæˆæµ‹è¯•æ•°æ®
seq 1 100000 > numbers.txt
echo "ç”Ÿæˆ10ä¸‡è¡Œæ•°å­—æ•°æ®"

echo "=== æ€§èƒ½å¯¹æ¯”æµ‹è¯• ==="

# æµ‹è¯•æ¨¡å¼1ï¼š\d+
echo "æµ‹è¯• \\d+ æ¨¡å¼ï¼š"
time grep -P '\d+' numbers.txt > /dev/null

# æµ‹è¯•æ¨¡å¼2ï¼š[0-9]+  
echo "æµ‹è¯• [0-9]+ æ¨¡å¼ï¼š"
time grep -P '[0-9]+' numbers.txt > /dev/null

# æµ‹è¯•æ¨¡å¼3ï¼šå¤æ‚æ¨¡å¼
echo "æµ‹è¯•å¤æ‚æ¨¡å¼ï¼š"
time grep -P '(0|1|2|3|4|5|6|7|8|9)+' numbers.txt > /dev/null

# æ¸…ç†
rm numbers.txt
```

### 3.3 è¯¦ç»†æ€§èƒ½åˆ†æ


**åŸºå‡†æµ‹è¯•è„šæœ¬**
```python
import re
import time
import random

def benchmark_regex(patterns, test_data, iterations=1000):
    """åŸºå‡†æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼æ€§èƒ½"""
    
    results = {}
    
    for name, pattern in patterns.items():
        compiled_pattern = re.compile(pattern)
        
        start_time = time.time()
        
        for _ in range(iterations):
            for text in test_data:
                compiled_pattern.search(text)
        
        end_time = time.time()
        results[name] = end_time - start_time
    
    return results

# æµ‹è¯•ç”¨ä¾‹
patterns = {
    'ç®€å•æ¨¡å¼': r'\d+',
    'å­—ç¬¦ç±»æ¨¡å¼': r'[0-9]+', 
    'åˆ†ç»„æ¨¡å¼': r'(\d+)',
    'å¤æ‚æ¨¡å¼': r'(0|1|2|3|4|5|6|7|8|9)+'
}

# ç”Ÿæˆæµ‹è¯•æ•°æ®
test_data = [str(random.randint(1, 999999)) for _ in range(100)]

# è¿è¡Œæµ‹è¯•
results = benchmark_regex(patterns, test_data)

print("æ€§èƒ½æµ‹è¯•ç»“æœ (ç§’):")
for name, time_taken in sorted(results.items(), key=lambda x: x[1]):
    print(f"{name:12}: {time_taken:.4f}")
```

### 3.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®


| ä¼˜åŒ–ç­–ç•¥ | **è¯´æ˜** | **ç¤ºä¾‹** | **æ€§èƒ½æå‡** |
|---------|---------|---------|-------------|
| **ç¼–è¯‘ä¸€æ¬¡ï¼Œå¤šæ¬¡ä½¿ç”¨** | é¿å…é‡å¤ç¼–è¯‘ | `compiled = re.compile(pattern)` | `50-80%` |
| **ç®€åŒ–å­—ç¬¦ç±»** | ç”¨å†…ç½®ç®€å†™ | `\d` è€Œä¸æ˜¯ `[0-9]` | `10-20%` |
| **é¿å…ä¸å¿…è¦çš„æ•è·ç»„** | ç”¨éæ•è·ç»„ | `(?:abc)` è€Œä¸æ˜¯ `(abc)` | `5-15%` |
| **å‡å°‘å›æº¯** | é¿å…åµŒå¥—é‡è¯ | `\d+` è€Œä¸æ˜¯ `(\d+)+` | `200-500%` |

---

## 4. ğŸ¨ å¯è§†åŒ–åŒ¹é…å·¥å…·


### 4.1 è‡ªåˆ¶ç®€å•å¯è§†åŒ–å·¥å…·


```python
def visualize_match(pattern, text):
    """å¯è§†åŒ–æ­£åˆ™åŒ¹é…è¿‡ç¨‹"""
    import re
    
    print(f"æ¨¡å¼: {pattern}")
    print(f"æ–‡æœ¬: {text}")
    print("-" * 50)
    
    # æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…
    matches = list(re.finditer(pattern, text))
    
    if not matches:
        print("âŒ æ²¡æœ‰åŒ¹é…")
        return
    
    # åˆ›å»ºå¯è§†åŒ–å­—ç¬¦ä¸²
    visual = list(text)
    colors = ['\033[0m'] * len(text)  # é»˜è®¤é¢œè‰²
    
    for i, match in enumerate(matches):
        start, end = match.span()
        # ç”¨ä¸åŒé¢œè‰²æ ‡è®°åŒ¹é…åŒºåŸŸ
        for pos in range(start, end):
            colors[pos] = f'\033[9{(i % 6) + 1}m'  # ä¸åŒé¢œè‰²
    
    # è¾“å‡ºå¯è§†åŒ–ç»“æœ
    result = ""
    for i, char in enumerate(visual):
        result += colors[i] + char + '\033[0m'
    
    print(f"ç»“æœ: {result}")
    
    # æ˜¾ç¤ºåŒ¹é…è¯¦æƒ…
    for i, match in enumerate(matches):
        print(f"åŒ¹é…{i+1}: '{match.group()}' ä½ç½®[{match.start()}:{match.end()}]")

# ä½¿ç”¨ç¤ºä¾‹
visualize_match(r'\d+', 'ä»Šå¤©æ˜¯2024å¹´1æœˆ15æ—¥')
```

### 4.2 ASCIIè‰ºæœ¯åŒ¹é…å›¾


```
æ–‡æœ¬: "user@domain.com"
æ¨¡å¼: "([^@]+)@([^.]+)\.(.+)"

åŒ¹é…è¿‡ç¨‹å›¾ç¤º:
user  @  domain  .  com
^^^^     ^^^^^^     ^^^
 |         |         |
ç»„1       ç»„2       ç»„3
(ç”¨æˆ·å)  (åŸŸå)   (åç¼€)

åŒ¹é…ç»“æœ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç»„ç¼–å·     â”‚    åŒ¹é…å†…å®¹   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     0       â”‚ user@domain.com â”‚ (å®Œæ•´åŒ¹é…)
â”‚     1       â”‚ user            â”‚ (ç”¨æˆ·å)
â”‚     2       â”‚ domain          â”‚ (åŸŸå)
â”‚     3       â”‚ com             â”‚ (åç¼€)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 äº¤äº’å¼è°ƒè¯•å·¥å…·


```bash
#!/bin/bash

regex_debugger() {
    echo "=== æ­£åˆ™è¡¨è¾¾å¼äº¤äº’å¼è°ƒè¯•å™¨ ==="
    
    while true; do
        echo
        read -p "è¾“å…¥æ­£åˆ™æ¨¡å¼ (è¾“å…¥ 'quit' é€€å‡º): " pattern
        
        if [[ "$pattern" == "quit" ]]; then
            break
        fi
        
        read -p "è¾“å…¥æµ‹è¯•æ–‡æœ¬: " text
        
        echo "--- æµ‹è¯•ç»“æœ ---"
        
        if [[ "$text" =~ $pattern ]]; then
            echo "âœ… åŒ¹é…æˆåŠŸï¼"
            echo "å®Œæ•´åŒ¹é…: ${BASH_REMATCH[0]}"
            
            # æ˜¾ç¤ºæ•è·ç»„
            for i in "${!BASH_REMATCH[@]}"; do
                if [[ $i -gt 0 ]]; then
                    echo "æ•è·ç»„$i: ${BASH_REMATCH[$i]}"
                fi
            done
        else
            echo "âŒ åŒ¹é…å¤±è´¥"
            
            # æä¾›è°ƒè¯•å»ºè®®
            echo "è°ƒè¯•å»ºè®®:"
            echo "1. æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦æ˜¯å¦éœ€è¦è½¬ä¹‰"
            echo "2. ç¡®è®¤é‡è¯ä½¿ç”¨æ˜¯å¦æ­£ç¡®"
            echo "3. æ£€æŸ¥å­—ç¬¦ç±»å®šä¹‰"
        fi
        
        echo "--- åˆ†æ ---"
        echo "æ¨¡å¼é•¿åº¦: ${#pattern}"
        echo "æ–‡æœ¬é•¿åº¦: ${#text}"
    done
    
    echo "è°ƒè¯•ç»“æŸï¼"
}

# å¯åŠ¨è°ƒè¯•å™¨
regex_debugger
```

---

## 5. ğŸŒ åœ¨çº¿æ­£åˆ™æµ‹è¯•å¹³å°


### 5.1 æ¨èåœ¨çº¿å¹³å°


**ä¸»æµæµ‹è¯•ç½‘ç«™å¯¹æ¯”**

| å¹³å°åç§° | **ç‰¹ç‚¹** | **ä¼˜åŠ¿** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| **regex101.com** | è¯¦ç»†è§£é‡Š | å®æ—¶åŒ¹é…ï¼Œè¯­æ³•é«˜äº® | å­¦ä¹ å’Œè°ƒè¯• |
| **regexr.com** | å¯è§†åŒ–å¼º | ç›´è§‚çš„åŒ¹é…å±•ç¤º | åˆå­¦è€…å‹å¥½ |
| **regexpal.com** | ç®€å•å¿«é€Ÿ | ç•Œé¢ç®€æ´ï¼Œé€Ÿåº¦å¿« | å¿«é€Ÿæµ‹è¯• |
| **regextest.com** | å¤šè¯­è¨€æ”¯æŒ | æ”¯æŒä¸åŒç¼–ç¨‹è¯­è¨€ | è·¨è¯­è¨€å¼€å‘ |

### 5.2 æœ¬åœ°æ­å»ºæµ‹è¯•ç¯å¢ƒ


**Python Webæµ‹è¯•å·¥å…·**
```python
from flask import Flask, render_template_string, request
import re

app = Flask(__name__)

HTML_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>æ­£åˆ™æµ‹è¯•å™¨</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .match { background-color: yellow; }
        .error { color: red; }
        .success { color: green; }
        textarea { width: 100%; }
    </style>
</head>
<body>
    <h1>æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨</h1>
    
    <form method="POST">
        <p>æ­£åˆ™æ¨¡å¼:</p>
        <input type="text" name="pattern" value="{{ pattern }}" style="width: 100%;">
        
        <p>æµ‹è¯•æ–‡æœ¬:</p>
        <textarea name="text" rows="5">{{ text }}</textarea>
        
        <p><input type="submit" value="æµ‹è¯•åŒ¹é…"></p>
    </form>
    
    {% if result %}
    <div class="result">
        <h2>æµ‹è¯•ç»“æœ:</h2>
        {{ result|safe }}
    </div>
    {% endif %}
</body>
</html>
"""

@app.route('/', methods=['GET', 'POST'])
def index():
    if request.method == 'POST':
        pattern = request.form.get('pattern', '')
        text = request.form.get('text', '')
        
        try:
            matches = list(re.finditer(pattern, text))
            
            if matches:
                # é«˜äº®åŒ¹é…æ–‡æœ¬
                result = f'<div class="success">æ‰¾åˆ° {len(matches)} ä¸ªåŒ¹é…</div>'
                
                highlighted_text = text
                for match in reversed(matches):
                    start, end = match.span()
                    highlighted_text = (highlighted_text[:start] + 
                                      '<span class="match">' + 
                                      highlighted_text[start:end] + 
                                      '</span>' + 
                                      highlighted_text[end:])
                
                result += f'<p>åŒ¹é…ç»“æœ: {highlighted_text}</p>'
                
                # æ˜¾ç¤ºæ•è·ç»„
                for i, match in enumerate(matches):
                    result += f'<p>åŒ¹é… {i+1}: {match.groups()}</p>'
                    
            else:
                result = '<div class="error">æ²¡æœ‰åŒ¹é…</div>'
                
        except re.error as e:
            result = f'<div class="error">æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯: {e}</div>'
            
        return render_template_string(HTML_TEMPLATE, 
                                    pattern=pattern, 
                                    text=text, 
                                    result=result)
    
    return render_template_string(HTML_TEMPLATE, pattern='', text='')

if __name__ == '__main__':
    print("æ­£åˆ™æµ‹è¯•å™¨å¯åŠ¨: http://localhost:5000")
    app.run(debug=True)
```

### 5.3 æµè§ˆå™¨ä¹¦ç­¾å·¥å…·


```javascript
// åˆ›å»ºæµè§ˆå™¨ä¹¦ç­¾ï¼Œå¿«é€Ÿæµ‹è¯•å½“å‰é¡µé¢çš„æ­£åˆ™
javascript:(function(){
    var pattern = prompt('è¾“å…¥æ­£åˆ™æ¨¡å¼:');
    if (!pattern) return;
    
    var text = document.body.innerText;
    var regex = new RegExp(pattern, 'gi');
    var matches = text.match(regex);
    
    if (matches) {
        alert('æ‰¾åˆ° ' + matches.length + ' ä¸ªåŒ¹é…:\n' + matches.slice(0, 10).join('\n'));
    } else {
        alert('æ²¡æœ‰åŒ¹é…');
    }
})();
```

---

## 6. ğŸ§ª å•å…ƒæµ‹è¯•é›†æˆ


### 6.1 Pythonå•å…ƒæµ‹è¯•æ¡†æ¶


```python
import unittest
import re

class RegexTestCase(unittest.TestCase):
    """æ­£åˆ™è¡¨è¾¾å¼å•å…ƒæµ‹è¯•ç±»"""
    
    def setUp(self):
        """æµ‹è¯•å‰å‡†å¤‡"""
        self.email_pattern = re.compile(r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$')
        self.phone_pattern = re.compile(r'^1[3-9]\d{9}$')
    
    def test_valid_emails(self):
        """æµ‹è¯•æœ‰æ•ˆé‚®ç®±"""
        valid_emails = [
            'user@example.com',
            'test.email@domain.co.uk',
            'user+tag@example.org'
        ]
        
        for email in valid_emails:
            with self.subTest(email=email):
                self.assertTrue(self.email_pattern.match(email), 
                              f"é‚®ç®± {email} åº”è¯¥åŒ¹é…ä½†å¤±è´¥äº†")
    
    def test_invalid_emails(self):
        """æµ‹è¯•æ— æ•ˆé‚®ç®±"""
        invalid_emails = [
            'invalid.email',
            '@domain.com',
            'user@',
            'user@domain'
        ]
        
        for email in invalid_emails:
            with self.subTest(email=email):
                self.assertIsNone(self.email_pattern.match(email),
                                f"é‚®ç®± {email} ä¸åº”è¯¥åŒ¹é…ä½†æˆåŠŸäº†")
    
    def test_phone_numbers(self):
        """æµ‹è¯•æ‰‹æœºå·ç """
        test_cases = [
            ('13812345678', True),   # æœ‰æ•ˆæ‰‹æœºå·
            ('12812345678', False),  # ç¬¬äºŒä½æ•°å­—é”™è¯¯
            ('1381234567', False),   # ä½æ•°ä¸å¤Ÿ
            ('138123456789', False)  # ä½æ•°è¿‡å¤š
        ]
        
        for phone, expected in test_cases:
            with self.subTest(phone=phone):
                result = bool(self.phone_pattern.match(phone))
                self.assertEqual(result, expected,
                               f"æ‰‹æœºå· {phone} æµ‹è¯•å¤±è´¥")
    
    def test_performance(self):
        """æ€§èƒ½æµ‹è¯•"""
        import time
        
        test_data = ['user@example.com'] * 10000
        
        start_time = time.time()
        for email in test_data:
            self.email_pattern.match(email)
        end_time = time.time()
        
        # æ–­è¨€æ€§èƒ½åœ¨å¯æ¥å—èŒƒå›´å†…ï¼ˆæ¯”å¦‚1ç§’å†…ï¼‰
        self.assertLess(end_time - start_time, 1.0,
                       "æ€§èƒ½æµ‹è¯•å¤±è´¥ï¼šè€—æ—¶è¶…è¿‡1ç§’")

if __name__ == '__main__':
    unittest.main()
```

### 6.2 Bashæµ‹è¯•æ¡†æ¶


```bash
#!/bin/bash

# ç®€å•çš„æµ‹è¯•æ¡†æ¶
TEST_COUNT=0
PASS_COUNT=0
FAIL_COUNT=0

assert_match() {
    local pattern="$1"
    local text="$2"
    local description="$3"
    
    TEST_COUNT=$((TEST_COUNT + 1))
    
    if [[ $text =~ $pattern ]]; then
        echo "âœ… PASS: $description"
        PASS_COUNT=$((PASS_COUNT + 1))
    else
        echo "âŒ FAIL: $description"
        echo "   æ¨¡å¼: $pattern"
        echo "   æ–‡æœ¬: $text"
        FAIL_COUNT=$((FAIL_COUNT + 1))
    fi
}

assert_no_match() {
    local pattern="$1"
    local text="$2"
    local description="$3"
    
    TEST_COUNT=$((TEST_COUNT + 1))
    
    if [[ ! $text =~ $pattern ]]; then
        echo "âœ… PASS: $description"
        PASS_COUNT=$((PASS_COUNT + 1))
    else
        echo "âŒ FAIL: $description"
        echo "   æ¨¡å¼: $pattern"
        echo "   æ–‡æœ¬: $text"
        FAIL_COUNT=$((FAIL_COUNT + 1))
    fi
}

# è¿è¡Œæµ‹è¯•
run_tests() {
    echo "=== æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å¥—ä»¶ ==="
    
    # é‚®ç®±æµ‹è¯•
    email_pattern='^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    
    assert_match "$email_pattern" "user@example.com" "æœ‰æ•ˆé‚®ç®±æµ‹è¯•"
    assert_match "$email_pattern" "test.email@domain.co.uk" "å¸¦ç‚¹å·é‚®ç®±æµ‹è¯•"
    assert_no_match "$email_pattern" "invalid.email" "æ— æ•ˆé‚®ç®±æµ‹è¯•"
    assert_no_match "$email_pattern" "@domain.com" "ç¼ºå°‘ç”¨æˆ·åæµ‹è¯•"
    
    # æ‰‹æœºå·æµ‹è¯•
    phone_pattern='^1[3-9][0-9]{9}$'
    
    assert_match "$phone_pattern" "13812345678" "æœ‰æ•ˆæ‰‹æœºå·æµ‹è¯•"
    assert_no_match "$phone_pattern" "12812345678" "æ— æ•ˆæ‰‹æœºå·æµ‹è¯•"
    
    # æ˜¾ç¤ºæµ‹è¯•ç»“æœ
    echo "=========================="
    echo "æ€»è®¡æµ‹è¯•: $TEST_COUNT"
    echo "é€šè¿‡: $PASS_COUNT"
    echo "å¤±è´¥: $FAIL_COUNT"
    
    if [[ $FAIL_COUNT -eq 0 ]]; then
        echo "ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼"
        exit 0
    else
        echo "ğŸ’¥ æœ‰æµ‹è¯•å¤±è´¥ï¼"
        exit 1
    fi
}

# æ‰§è¡Œæµ‹è¯•
run_tests
```

---

## 7. ğŸ”„ å›å½’æµ‹è¯•ç­–ç•¥


### 7.1 ä»€ä¹ˆæ˜¯å›å½’æµ‹è¯•


**ç®€å•ç†è§£**ï¼šå½“ä½ ä¿®æ”¹äº†æ­£åˆ™è¡¨è¾¾å¼åï¼Œè¦ç¡®ä¿åŸæ¥èƒ½æ­£å¸¸å·¥ä½œçš„åŠŸèƒ½ä¸è¢«ç ´åã€‚

```
åœºæ™¯ä¸¾ä¾‹ï¼š
åŸå§‹æ­£åˆ™ï¼š\d{3}-\d{4}     # åŒ¹é… 123-4567
ä¿®æ”¹åï¼š\d{3}-\d{3}-\d{4}  # æƒ³åŒ¹é… 123-456-7890

å›å½’æµ‹è¯•è¦éªŒè¯ï¼š
1. æ–°åŠŸèƒ½æ˜¯å¦æ­£å¸¸ âœ“
2. åŸæ¥çš„æµ‹è¯•ç”¨ä¾‹æ˜¯å¦è¿˜èƒ½é€šè¿‡ âœ“
3. æ˜¯å¦æœ‰æ„å¤–çš„å‰¯ä½œç”¨ âœ“
```

### 7.2 æµ‹è¯•ç”¨ä¾‹ç®¡ç†


**æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ç»“æ„**
```
tests/
â”œâ”€â”€ regex_patterns.json      # æ­£åˆ™æ¨¡å¼å®šä¹‰
â”œâ”€â”€ test_cases.json         # æµ‹è¯•ç”¨ä¾‹æ•°æ®
â”œâ”€â”€ run_tests.py           # æµ‹è¯•æ‰§è¡Œå™¨
â””â”€â”€ reports/               # æµ‹è¯•æŠ¥å‘Š
    â”œâ”€â”€ latest.html
    â””â”€â”€ history/
```

**æµ‹è¯•æ•°æ®æ–‡ä»¶**
```json
{
  "email_validation": {
    "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
    "positive_cases": [
      "user@example.com",
      "test.email@domain.co.uk",
      "user+tag@example.org"
    ],
    "negative_cases": [
      "invalid.email",
      "@domain.com",
      "user@"
    ],
    "version": "1.2",
    "last_modified": "2024-01-15"
  }
}
```

### 7.3 è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•


```python
import json
import re
import time
from datetime import datetime

class RegressionTester:
    def __init__(self, config_file):
        with open(config_file, 'r', encoding='utf-8') as f:
            self.test_config = json.load(f)
        
        self.results = {}
        self.start_time = time.time()
    
    def run_all_tests(self):
        """è¿è¡Œæ‰€æœ‰å›å½’æµ‹è¯•"""
        print("=== æ­£åˆ™è¡¨è¾¾å¼å›å½’æµ‹è¯•å¼€å§‹ ===")
        print(f"æµ‹è¯•æ—¶é—´: {datetime.now()}")
        print(f"æµ‹è¯•æ¨¡å—æ•°: {len(self.test_config)}")
        
        total_tests = 0
        passed_tests = 0
        
        for test_name, test_data in self.test_config.items():
            print(f"\nğŸ“‹ æµ‹è¯•æ¨¡å—: {test_name}")
            
            pattern = test_data['pattern']
            compiled_pattern = re.compile(pattern)
            
            module_results = {
                'pattern': pattern,
                'version': test_data.get('version', 'unknown'),
                'positive_results': [],
                'negative_results': [],
                'errors': []
            }
            
            # æ­£é¢æµ‹è¯•
            for case in test_data.get('positive_cases', []):
                try:
                    if compiled_pattern.match(case):
                        print(f"  âœ… {case}")
                        module_results['positive_results'].append((case, True))
                        passed_tests += 1
                    else:
                        print(f"  âŒ {case} (åº”è¯¥åŒ¹é…ä½†å¤±è´¥)")
                        module_results['positive_results'].append((case, False))
                except Exception as e:
                    module_results['errors'].append(f"æ­£é¢æµ‹è¯•é”™è¯¯: {case} - {e}")
                
                total_tests += 1
            
            # è´Ÿé¢æµ‹è¯•
            for case in test_data.get('negative_cases', []):
                try:
                    if not compiled_pattern.match(case):
                        print(f"  âœ… {case} (æ­£ç¡®æ‹’ç»)")
                        module_results['negative_results'].append((case, True))
                        passed_tests += 1
                    else:
                        print(f"  âŒ {case} (ä¸åº”è¯¥åŒ¹é…ä½†æˆåŠŸ)")
                        module_results['negative_results'].append((case, False))
                except Exception as e:
                    module_results['errors'].append(f"è´Ÿé¢æµ‹è¯•é”™è¯¯: {case} - {e}")
                
                total_tests += 1
            
            self.results[test_name] = module_results
        
        # ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
        self.generate_report(total_tests, passed_tests)
        
        return passed_tests == total_tests
    
    def generate_report(self, total_tests, passed_tests):
        """ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š"""
        end_time = time.time()
        duration = end_time - self.start_time
        
        print("\n" + "="*60)
        print("ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ‘˜è¦")
        print("="*60)
        print(f"æ€»æµ‹è¯•æ•°: {total_tests}")
        print(f"é€šè¿‡æµ‹è¯•: {passed_tests}")
        print(f"å¤±è´¥æµ‹è¯•: {total_tests - passed_tests}")
        print(f"æˆåŠŸç‡: {passed_tests/total_tests*100:.1f}%")
        print(f"æµ‹è¯•è€—æ—¶: {duration:.2f}ç§’")
        
        # å¤±è´¥è¯¦æƒ…
        failed_tests = []
        for module_name, results in self.results.items():
            for case, success in results['positive_results']:
                if not success:
                    failed_tests.append(f"{module_name}: {case} (æ­£é¢æµ‹è¯•å¤±è´¥)")
            
            for case, success in results['negative_results']:
                if not success:
                    failed_tests.append(f"{module_name}: {case} (è´Ÿé¢æµ‹è¯•å¤±è´¥)")
        
        if failed_tests:
            print("\nâŒ å¤±è´¥çš„æµ‹è¯•:")
            for failure in failed_tests[:10]:  # åªæ˜¾ç¤ºå‰10ä¸ª
                print(f"  - {failure}")
            if len(failed_tests) > 10:
                print(f"  ... è¿˜æœ‰ {len(failed_tests) - 10} ä¸ªå¤±è´¥")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == '__main__':
    tester = RegressionTester('test_cases.json')
    success = tester.run_all_tests()
    
    exit(0 if success else 1)
```

### 7.4 æŒç»­é›†æˆé›†æˆ


**GitHub Actionsé…ç½®**
```yaml
# .github/workflows/regex-tests.yml
name: æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•

on: [push, pull_request]

jobs:
  regex-tests:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: è®¾ç½®Pythonç¯å¢ƒ
      uses: actions/setup-python@v2
      with:
        python-version: '3.9'
    
    - name: è¿è¡Œæ­£åˆ™æµ‹è¯•
      run: |
        cd tests
        python run_regression_tests.py
        
    - name: ä¸Šä¼ æµ‹è¯•æŠ¥å‘Š
      uses: actions/upload-artifact@v2
      with:
        name: test-reports
        path: tests/reports/
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„è°ƒè¯•æŠ€èƒ½


```
ğŸ”¸ è°ƒè¯•å™¨ä½¿ç”¨ï¼šå­¦ä¼šç”¨è°ƒè¯•å·¥å…·æŸ¥çœ‹åŒ¹é…è¿‡ç¨‹
ğŸ”¸ æµ‹è¯•ç”¨ä¾‹è®¾è®¡ï¼šæ­£é¢ã€è´Ÿé¢ã€è¾¹ç•Œã€å¼‚å¸¸å…¨è¦†ç›–
ğŸ”¸ æ€§èƒ½æµ‹è¯•ï¼šäº†è§£ä¸åŒå†™æ³•çš„æ€§èƒ½å·®å¼‚
ğŸ”¸ å¯è§†åŒ–å·¥å…·ï¼šç›´è§‚ç†è§£æ­£åˆ™åŒ¹é…è¿‡ç¨‹
ğŸ”¸ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šé›†æˆåˆ°å¼€å‘æµç¨‹ä¸­
```

### 8.2 è°ƒè¯•çš„åŸºæœ¬æ­¥éª¤


```
1. ç†è§£éœ€æ±‚ â†’ æ˜ç¡®è¦åŒ¹é…ä»€ä¹ˆï¼Œä¸åŒ¹é…ä»€ä¹ˆ
2. ç¼–å†™æ¨¡å¼ â†’ å…ˆå†™ç®€å•ç‰ˆæœ¬ï¼Œé€æ­¥å®Œå–„
3. è®¾è®¡æµ‹è¯• â†’ å‡†å¤‡å„ç§æµ‹è¯•ç”¨ä¾‹
4. è°ƒè¯•éªŒè¯ â†’ ä½¿ç”¨å·¥å…·æŸ¥çœ‹åŒ¹é…è¿‡ç¨‹
5. æ€§èƒ½æµ‹è¯• â†’ ç¡®ä¿æ€§èƒ½æ»¡è¶³è¦æ±‚
6. å›å½’æµ‹è¯• â†’ ç¡®ä¿ä¿®æ”¹ä¸ç ´åç°æœ‰åŠŸèƒ½
```

### 8.3 å¸¸è§è°ƒè¯•æŠ€å·§


**åˆ†æ­¥è°ƒè¯•æ³•**
```
å¤æ‚æ­£åˆ™ï¼š^([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,})$

åˆ†æ­¥æµ‹è¯•ï¼š
æ­¥éª¤1ï¼šæµ‹è¯• [a-zA-Z0-9._%+-]+  (ç”¨æˆ·åéƒ¨åˆ†)
æ­¥éª¤2ï¼šæµ‹è¯• [a-zA-Z0-9.-]+     (åŸŸåéƒ¨åˆ†)  
æ­¥éª¤3ï¼šæµ‹è¯• [a-zA-Z]{2,}       (åç¼€éƒ¨åˆ†)
æ­¥éª¤4ï¼šæµ‹è¯•å®Œæ•´æ¨¡å¼
```

**æ›¿æ¢è°ƒè¯•æ³•**
```
å¦‚æœæ­£åˆ™ä¸å·¥ä½œï¼š
1. å…ˆç”¨æœ€ç®€å•çš„ç‰ˆæœ¬ .*
2. é€æ­¥æ›¿æ¢ä¸ºå…·ä½“æ¨¡å¼
3. æ¯æ¬¡æ›¿æ¢åéƒ½æµ‹è¯•
4. å®šä½åˆ°å‡ºé—®é¢˜çš„éƒ¨åˆ†
```

### 8.4 å·¥å…·é€‰æ‹©å»ºè®®


| ä½¿ç”¨åœºæ™¯ | **æ¨èå·¥å…·** | **åŸå› ** |
|---------|-------------|---------|
| **å¿«é€Ÿæµ‹è¯•** | `grep -P` | å‘½ä»¤è¡Œå¿«é€Ÿ |
| **å­¦ä¹ è°ƒè¯•** | regex101.com | è¯¦ç»†è§£é‡Š |
| **æ€§èƒ½æµ‹è¯•** | Pythonè„šæœ¬ | ç²¾ç¡®æµ‹é‡ |
| **å›¢é˜Ÿåä½œ** | å•å…ƒæµ‹è¯• | å¯é‡å¤æ‰§è¡Œ |
| **CI/CDé›†æˆ** | è‡ªåŠ¨åŒ–è„šæœ¬ | æŒç»­éªŒè¯ |

### 8.5 æœ€ä½³å®è·µæ€»ç»“


**å¼€å‘æµç¨‹**
1. **éœ€æ±‚åˆ†æ** â†’ æ˜ç¡®åŒ¹é…è§„åˆ™
2. **æ¨¡å¼è®¾è®¡** â†’ ä»ç®€å•åˆ°å¤æ‚
3. **æµ‹è¯•é©±åŠ¨** â†’ å…ˆå†™æµ‹è¯•å†å†™æ­£åˆ™
4. **æŒç»­éªŒè¯** â†’ æ¯æ¬¡ä¿®æ”¹éƒ½è¦æµ‹è¯•
5. **æ–‡æ¡£è®°å½•** â†’ è®°å½•è®¾è®¡æ€è·¯å’Œæµ‹è¯•ç”¨ä¾‹

**æ€§èƒ½ä¼˜åŒ–åŸåˆ™**
- âœ… ç¼–è¯‘ä¸€æ¬¡ï¼Œå¤šæ¬¡ä½¿ç”¨
- âœ… é¿å…ä¸å¿…è¦çš„æ•è·ç»„  
- âœ… ä½¿ç”¨ç®€åŒ–çš„å­—ç¬¦ç±»
- âœ… å‡å°‘å›æº¯å¯èƒ½æ€§
- âœ… é’ˆå¯¹å®é™…æ•°æ®ä¼˜åŒ–

**æ ¸å¿ƒè®°å¿†**ï¼š
- æ­£åˆ™è°ƒè¯•å¦‚æ¢æ¡ˆï¼Œå·¥å…·å¸®ä½ æ‰¾çœŸç›¸
- æµ‹è¯•ç”¨ä¾‹è¦å…¨é¢ï¼Œæ­£è´Ÿè¾¹ç•Œå¼‚å¸¸å…¨
- æ€§èƒ½æµ‹è¯•ä¸èƒ½å°‘ï¼Œå¤§æ•°æ®ä¸‹è§åˆ†æ™“
- è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ç‹é“ï¼Œå›å½’éªŒè¯ä¿è´¨é‡