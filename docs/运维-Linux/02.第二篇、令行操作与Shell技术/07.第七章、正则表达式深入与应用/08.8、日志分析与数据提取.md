---
title: 8ã€æ—¥å¿—åˆ†æžä¸Žæ•°æ®æå–
---
## ðŸ“š ç›®å½•

1. [ç³»ç»Ÿæ—¥å¿—æ ¼å¼åŒ¹é…](#1-ç³»ç»Ÿæ—¥å¿—æ ¼å¼åŒ¹é…)
2. [æ—¶é—´æˆ³æ ‡å‡†åŒ–æå–](#2-æ—¶é—´æˆ³æ ‡å‡†åŒ–æå–)
3. [IPåœ°å€éªŒè¯ä¸Žæå–](#3-IPåœ°å€éªŒè¯ä¸Žæå–)
4. [URL/URIæ¨¡å¼åŒ¹é…](#4-URLURIæ¨¡å¼åŒ¹é…)
5. [é”™è¯¯ä¿¡æ¯æ¨¡å¼è¯†åˆ«](#5-é”™è¯¯ä¿¡æ¯æ¨¡å¼è¯†åˆ«)
6. [å¤šæ ¼å¼æ—¥å¿—ç»Ÿä¸€å¤„ç†](#6-å¤šæ ¼å¼æ—¥å¿—ç»Ÿä¸€å¤„ç†)
7. [å®žæ—¶æ—¥å¿—è¿‡æ»¤æŠ€æœ¯](#7-å®žæ—¶æ—¥å¿—è¿‡æ»¤æŠ€æœ¯)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ“‹ ç³»ç»Ÿæ—¥å¿—æ ¼å¼åŒ¹é…


### 1.1 ä»€ä¹ˆæ˜¯ç³»ç»Ÿæ—¥å¿—æ ¼å¼åŒ¹é…


**ðŸ”¸ é€šä¿—è§£é‡Š**
ç³»ç»Ÿæ—¥å¿—å°±åƒæ˜¯æœåŠ¡å™¨è®°å½•çš„"æ—¥è®°æœ¬"ï¼Œé‡Œé¢è®°å½•ç€ç³»ç»Ÿè¿è¡Œæ—¶å‘ç”Ÿçš„å„ç§äº‹æƒ…ã€‚ä½†æ˜¯è¿™ä¸ª"æ—¥è®°æœ¬"æœ‰å›ºå®šçš„æ ¼å¼ï¼Œå°±åƒå†™ä½œæ–‡è¦æœ‰æ ‡é¢˜ã€æ­£æ–‡ä¸€æ ·ã€‚æˆ‘ä»¬éœ€è¦ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¯†åˆ«å’Œæå–è¿™äº›æ ¼å¼åŒ–çš„ä¿¡æ¯ã€‚

**ðŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—æ ¼å¼åŒ¹é…**
```
æƒ³è±¡ä¸€ä¸‹å›¾ä¹¦é¦†çš„ä¹¦ï¼š
- æ¯æœ¬ä¹¦éƒ½æœ‰ï¼šä¹¦åã€ä½œè€…ã€ISBNã€å‡ºç‰ˆæ—¥æœŸ
- ç®¡ç†å‘˜éœ€è¦å¿«é€Ÿæ‰¾åˆ°ç‰¹å®šä¿¡æ¯
- ç³»ç»Ÿæ—¥å¿—ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œéœ€è¦å¿«é€Ÿå®šä½é—®é¢˜

æ—¥å¿—æ ¼å¼åŒ¹é…å°±æ˜¯æ•™ä¼šç”µè„‘"è¯»æ‡‚"æ—¥å¿—çš„è§„å¾‹
```

### 1.2 å¸¸è§ç³»ç»Ÿæ—¥å¿—æ ¼å¼


**ðŸ”¸ Apacheè®¿é—®æ—¥å¿—æ ¼å¼**
```bash
# æ ‡å‡†Apacheæ—¥å¿—æ ¼å¼
192.168.1.100 - - [25/Dec/2023:10:00:23 +0800] "GET /index.html HTTP/1.1" 200 1043

# ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
^(\S+) \S+ \S+ \[([^\]]+)\] "(\w+) ([^"]*)" (\d+) (\d+)
```

**ðŸ“Š æ ¼å¼è§£æžå¯¹ç…§**
| éƒ¨åˆ† | **å«ä¹‰** | **ç¤ºä¾‹** | **æ­£åˆ™æ¨¡å¼** |
|------|---------|---------|-------------|
| `192.168.1.100` | `å®¢æˆ·ç«¯IP` | `ä»»æ„IPåœ°å€` | `(\S+)` |
| `[25/Dec/2023:10:00:23 +0800]` | `æ—¶é—´æˆ³` | `è®¿é—®æ—¶é—´` | `\[([^\]]+)\]` |
| `"GET /index.html HTTP/1.1"` | `HTTPè¯·æ±‚` | `è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„` | `"(\w+) ([^"]*)"` |
| `200` | `çŠ¶æ€ç ` | `å“åº”çŠ¶æ€` | `(\d+)` |
| `1043` | `å“åº”å¤§å°` | `å­—èŠ‚æ•°` | `(\d+)` |

**ðŸ”¸ ç³»ç»Ÿæ—¥å¿—(syslog)æ ¼å¼**
```bash
# æ ‡å‡†syslogæ ¼å¼
Dec 25 10:00:23 server01 sshd[1234]: Failed password for root from 192.168.1.50 port 22 ssh2

# åŒ¹é…æ¨¡å¼
^(\w{3}\s+\d{1,2}\s+\d{2}:\d{2}:\d{2})\s+(\S+)\s+(\w+)\[(\d+)\]:\s+(.*)$
```

### 1.3 å®žæˆ˜ï¼šè§£æžApacheæ—¥å¿—


```bash
# ðŸ“ ç¤ºä¾‹æ—¥å¿—æ–‡ä»¶ access.log
cat > access.log << 'EOF'
192.168.1.100 - - [25/Dec/2023:10:00:23 +0800] "GET /index.html HTTP/1.1" 200 1043
192.168.1.101 - - [25/Dec/2023:10:01:15 +0800] "POST /login HTTP/1.1" 302 278
192.168.1.102 - - [25/Dec/2023:10:02:33 +0800] "GET /admin HTTP/1.1" 403 1205
EOF

# ðŸ” æå–IPåœ°å€å’ŒçŠ¶æ€ç 
grep -oE '^[0-9.]+|HTTP/1\.[01]" [0-9]{3}' access.log

# ðŸŽ¯ æ›´ç²¾å‡†çš„åŒ¹é…ï¼šæå–å…·ä½“ä¿¡æ¯
sed -n 's/^\([0-9.]*\).*"\([A-Z]*\) \([^"]*\)" \([0-9]*\).*/IP:\1 æ–¹æ³•:\2 è·¯å¾„:\3 çŠ¶æ€:\4/p' access.log
```

**ðŸ”¸ è¾“å‡ºç»“æžœ**
```
IP:192.168.1.100 æ–¹æ³•:GET è·¯å¾„:/index.html çŠ¶æ€:200
IP:192.168.1.101 æ–¹æ³•:POST è·¯å¾„:/login çŠ¶æ€:302
IP:192.168.1.102 æ–¹æ³•:GET è·¯å¾„:/admin çŠ¶æ€:403
```

---

## 2. â° æ—¶é—´æˆ³æ ‡å‡†åŒ–æå–


### 2.1 æ—¶é—´æˆ³çš„é‡è¦æ€§


**ðŸ”¸ ä¸ºä»€ä¹ˆæ—¶é—´æˆ³è¿™ä¹ˆé‡è¦**
æ—¶é—´æˆ³å°±åƒæ˜¯äº‹ä»¶çš„"èº«ä»½è¯"ï¼Œå‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆäº‹ã€‚åœ¨æ—¥å¿—åˆ†æžä¸­ï¼Œæ—¶é—´æˆ³å¸®åŠ©æˆ‘ä»¬ï¼š
- **è¿½è¸ªé—®é¢˜å‘ç”Ÿæ—¶é—´**ï¼šå®šä½æ•…éšœæ—¶åˆ»
- **åˆ†æžè®¿é—®æ¨¡å¼**ï¼šäº†è§£ç”¨æˆ·è¡Œä¸ºè§„å¾‹  
- **æ€§èƒ½ç›‘æŽ§**ï¼šæ‰¾å‡ºé«˜å³°æ—¶æ®µ
- **å®‰å…¨å®¡è®¡**ï¼šå‘çŽ°å¼‚å¸¸æ—¶é—´çš„æ´»åŠ¨

### 2.2 å¸¸è§æ—¶é—´æˆ³æ ¼å¼


**ðŸ”¸ å„ç§æ—¶é—´æ ¼å¼å¯¹æ¯”**
```bash
# ðŸ“… ä¸åŒç³»ç»Ÿçš„æ—¶é—´æ ¼å¼
Apacheæ ¼å¼:    [25/Dec/2023:10:00:23 +0800]
ç³»ç»Ÿæ—¥å¿—æ ¼å¼:   Dec 25 10:00:23
ISOæ ¼å¼:       2023-12-25T10:00:23+08:00
Unixæ—¶é—´æˆ³:    1703472023
Nginxæ ¼å¼:     25/Dec/2023:10:00:23 +0800
```

**ðŸ“‹ æ—¶é—´æ ¼å¼æ­£åˆ™è¡¨è¾¾å¼**
| æ ¼å¼ç±»åž‹ | **æ­£åˆ™æ¨¡å¼** | **åŒ¹é…ç¤ºä¾‹** |
|---------|-------------|-------------|
| `Apache` | `\[([^]]+)\]` | `[25/Dec/2023:10:00:23 +0800]` |
| `Syslog` | `(\w{3}\s+\d{1,2}\s+\d{2}:\d{2}:\d{2})` | `Dec 25 10:00:23` |
| `ISO` | `(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})` | `2023-12-25T10:00:23` |
| `æ ‡å‡†æ ¼å¼` | `(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})` | `2023-12-25 10:00:23` |

### 2.3 æ—¶é—´æˆ³æå–å®žæˆ˜


**ðŸ”¸ æå–å„ç§æ—¶é—´æ ¼å¼**
```bash
# ðŸ“ åˆ›å»ºåŒ…å«å¤šç§æ—¶é—´æ ¼å¼çš„æµ‹è¯•æ–‡ä»¶
cat > time_test.log << 'EOF'
[25/Dec/2023:10:00:23 +0800] Apacheè®¿é—®
Dec 25 10:01:15 ç³»ç»Ÿç™»å½•äº‹ä»¶
2023-12-25T10:02:33+08:00 APIè°ƒç”¨
2023-12-25 10:03:45 æ•°æ®åº“æŸ¥è¯¢
1703472225 Unixæ—¶é—´æˆ³äº‹ä»¶
EOF

# ðŸŽ¯ æå–Apacheæ—¶é—´æ ¼å¼
grep -oE '\[[^]]+\]' time_test.log

# ðŸŽ¯ æå–syslogæ—¶é—´æ ¼å¼  
grep -oE '\w{3}\s+\d{1,2}\s+\d{2}:\d{2}:\d{2}' time_test.log

# ðŸŽ¯ æå–ISOæ—¶é—´æ ¼å¼
grep -oE '\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[^[:space:]]*' time_test.log
```

**ðŸ”¸ æ—¶é—´æ ‡å‡†åŒ–å¤„ç†**
```bash
# ðŸ“Š å°†ä¸åŒæ ¼å¼ç»Ÿä¸€ä¸ºæ ‡å‡†æ ¼å¼
convert_timestamp() {
    local log_line="$1"
    
    # Apacheæ ¼å¼è½¬æ¢
    if echo "$log_line" | grep -qE '\[[^]]+\]'; then
        timestamp=$(echo "$log_line" | grep -oE '\[[^]]+\]' | tr -d '[]')
        # å¯ä»¥ç”¨dateå‘½ä»¤è¿›ä¸€æ­¥è½¬æ¢
        echo "Apacheæ—¶é—´: $timestamp"
    fi
    
    # Syslogæ ¼å¼å¤„ç†
    if echo "$log_line" | grep -qE '\w{3}\s+\d{1,2}\s+\d{2}:\d{2}:\d{2}'; then
        timestamp=$(echo "$log_line" | grep -oE '\w{3}\s+\d{1,2}\s+\d{2}:\d{2}:\d{2}')
        echo "ç³»ç»Ÿæ—¥å¿—æ—¶é—´: $timestamp"
    fi
}

# ðŸ§ª æµ‹è¯•æ—¶é—´è½¬æ¢
convert_timestamp "[25/Dec/2023:10:00:23 +0800] Apacheè®¿é—®"
convert_timestamp "Dec 25 10:01:15 ç³»ç»Ÿç™»å½•äº‹ä»¶"
```

---

## 3. ðŸŒ IPåœ°å€éªŒè¯ä¸Žæå–


### 3.1 IPåœ°å€åŸºç¡€çŸ¥è¯†


**ðŸ”¸ ä»€ä¹ˆæ˜¯IPåœ°å€**
IPåœ°å€å°±åƒæ˜¯ç½‘ç»œä¸–ç•Œä¸­çš„"é—¨ç‰Œå·ç "ï¼Œæ¯å°è”ç½‘çš„è®¾å¤‡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ã€‚å°±åƒå¯„ä¿¡éœ€è¦æ”¶ä»¶äººåœ°å€ä¸€æ ·ï¼Œç½‘ç»œé€šä¿¡ä¹Ÿéœ€è¦çŸ¥é“å¯¹æ–¹çš„IPåœ°å€ã€‚

**ðŸ”¸ IPv4åœ°å€æ ¼å¼è§„åˆ™**
```
IPv4æ ¼å¼: å››ä¸ªæ•°å­—ï¼Œç”¨ç‚¹åˆ†éš”
èŒƒå›´: æ¯ä¸ªæ•°å­—0-255
ç¤ºä¾‹: 192.168.1.100
     ^^^^^^^^^^^
     æ¯éƒ¨åˆ†éƒ½ä¸èƒ½è¶…è¿‡255
```

### 3.2 IPåœ°å€æ­£åˆ™è¡¨è¾¾å¼


**ðŸ”¸ åŸºç¡€IPåŒ¹é…æ¨¡å¼**
```bash
# ðŸ”¸ ç®€å•æ¨¡å¼ï¼ˆä¸å¤Ÿä¸¥æ ¼ï¼‰
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b

# ðŸ”¸ ä¸¥æ ¼æ¨¡å¼ï¼ˆéªŒè¯0-255èŒƒå›´ï¼‰
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b
```

**ðŸ“Š IPåœ°å€èŒƒå›´åˆ†è§£**
| èŒƒå›´ | **æ­£åˆ™éƒ¨åˆ†** | **å«ä¹‰** |
|------|------------|----------|
| `250-255` | `25[0-5]` | `250åˆ°255` |
| `200-249` | `2[0-4][0-9]` | `200åˆ°249` |
| `0-199` | `[01]?[0-9][0-9]?` | `0åˆ°199ï¼ˆåŒ…æ‹¬å•ä½æ•°å’Œä¸¤ä½æ•°ï¼‰` |

**ðŸ”¸ å®žç”¨çš„IPåŒ¹é…æ¨¡å¼**
```bash
# ðŸŽ¯ å¹³è¡¡å‡†ç¡®æ€§å’Œå®žç”¨æ€§çš„æ¨¡å¼
IP_PATTERN='\b([0-9]{1,3}\.){3}[0-9]{1,3}\b'

# ðŸ’¡ åœ¨shellè„šæœ¬ä¸­ä½¿ç”¨
validate_ip() {
    local ip="$1"
    if [[ $ip =~ ^([0-9]{1,3}\.){3}[0-9]{1,3}$ ]]; then
        # è¿›ä¸€æ­¥éªŒè¯æ¯ä¸ªæ®µæ˜¯å¦åœ¨0-255èŒƒå›´å†…
        IFS='.' read -ra ADDR <<< "$ip"
        for i in "${ADDR[@]}"; do
            if [[ $i -lt 0 || $i -gt 255 ]]; then
                return 1
            fi
        done
        return 0
    else
        return 1
    fi
}
```

### 3.3 æ—¥å¿—ä¸­IPåœ°å€æå–å®žæˆ˜


**ðŸ”¸ ä»Žä¸åŒç±»åž‹æ—¥å¿—æå–IP**
```bash
# ðŸ“ åˆ›å»ºåŒ…å«å„ç§IPåœ°å€çš„æ—¥å¿—
cat > ip_test.log << 'EOF'
192.168.1.100 - GET /index.html - 200
è¿žæŽ¥æ¥è‡ª 10.0.0.50 çš„SSHç™»å½•å°è¯•
APIè°ƒç”¨ä»Ž 172.16.255.1 å‘èµ·
æ— æ•ˆè¿žæŽ¥: 999.999.999.999 (è¿™æ˜¯æ— æ•ˆIP)
IPv6åœ°å€: 2001:db8::1 (æš‚ä¸å¤„ç†)
192.168.1.1 è·¯ç”±å™¨è®¿é—®
EOF

# ðŸ” æå–æ‰€æœ‰å¯èƒ½çš„IPåœ°å€
grep -oE '\b([0-9]{1,3}\.){3}[0-9]{1,3}\b' ip_test.log

# ðŸŽ¯ æå–å¹¶éªŒè¯æœ‰æ•ˆIPåœ°å€
extract_valid_ips() {
    local file="$1"
    grep -oE '\b([0-9]{1,3}\.){3}[0-9]{1,3}\b' "$file" | while read -r ip; do
        # éªŒè¯æ¯ä¸ªæ®µæ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…
        valid=true
        IFS='.' read -ra segments <<< "$ip"
        for segment in "${segments[@]}"; do
            if [[ $segment -gt 255 ]]; then
                valid=false
                break
            fi
        done
        
        if $valid; then
            echo "âœ… æœ‰æ•ˆIP: $ip"
        else
            echo "âŒ æ— æ•ˆIP: $ip"
        fi
    done
}

# ðŸ§ª æµ‹è¯•IPæå–å’ŒéªŒè¯
extract_valid_ips ip_test.log
```

**ðŸ”¸ ç»Ÿè®¡IPè®¿é—®é¢‘çŽ‡**
```bash
# ðŸ“Š ç»Ÿè®¡å„IPçš„è®¿é—®æ¬¡æ•°
count_ip_access() {
    local logfile="$1"
    echo "ðŸ“ˆ IPè®¿é—®ç»Ÿè®¡:"
    echo "=================="
    grep -oE '\b([0-9]{1,3}\.){3}[0-9]{1,3}\b' "$logfile" | \
    sort | uniq -c | sort -rn | \
    while read -r count ip; do
        echo "ðŸ”¸ $ip: $countæ¬¡è®¿é—®"
    done
}

# ðŸ§ª è¿è¡Œç»Ÿè®¡
count_ip_access ip_test.log
```

---

## 4. ðŸ”— URL/URIæ¨¡å¼åŒ¹é…


### 4.1 URLå’ŒURIçš„åŒºåˆ«


**ðŸ”¸ é€šä¿—è§£é‡Š**
- **URLï¼ˆç½‘å€ï¼‰**ï¼šå°±åƒæ˜¯ç½‘é¡µçš„"è¯¦ç»†åœ°å€"ï¼Œå‘Šè¯‰ä½ æ€Žä¹ˆæ‰¾åˆ°è¿™ä¸ªç½‘é¡µ
- **URI**ï¼šæ˜¯ä¸€ä¸ªæ›´å¹¿æ³›çš„æ¦‚å¿µï¼ŒåŒ…å«äº†æ‰€æœ‰å½¢å¼çš„ç½‘ç»œèµ„æºæ ‡è¯†

```
ç”Ÿæ´»ç±»æ¯”ï¼š
URL = å…·ä½“åœ°å€ï¼š"åŒ—äº¬å¸‚æœé˜³åŒºXXXè¡—é“XXXå·XXXå•†åº—"
URI = æ ‡è¯†æ¦‚å¿µï¼šå¯ä»¥æ˜¯åœ°å€ã€ç”µè¯å·ç ã€èº«ä»½è¯å·ç­‰ä»»ä½•æ ‡è¯†
```

**ðŸ”¸ URLç»„æˆéƒ¨åˆ†**
```
https://www.example.com:443/path/to/page?param=value#section
^^^^^   ^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^ ^^^^^^^^^^^^ ^^^^^^^
åè®®      ä¸»æœºå:ç«¯å£              è·¯å¾„         æŸ¥è¯¢å‚æ•°      é”šç‚¹

æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰ç‰¹å®šçš„åŒ¹é…æ¨¡å¼
```

### 4.2 URLå„éƒ¨åˆ†åŒ¹é…æ¨¡å¼


**ðŸ“‹ URLç»„ä»¶æ­£åˆ™è¡¨è¾¾å¼**
| ç»„ä»¶ | **æ­£åˆ™æ¨¡å¼** | **è¯´æ˜Ž** |
|------|------------|----------|
| `åè®®` | `https?://` | `httpæˆ–https` |
| `åŸŸå` | `[a-zA-Z0-9.-]+` | `å­—æ¯æ•°å­—å’Œç‚¹ã€æ¨ªçº¿` |
| `ç«¯å£` | `:\d+` | `å†’å·åŠ æ•°å­—` |
| `è·¯å¾„` | `/[^\s?#]*` | `æ–œæ å¼€å¤´ï¼Œä¸åŒ…å«ç©ºæ ¼ã€?ã€#` |
| `å‚æ•°` | `\?[^#\s]*` | `é—®å·å¼€å¤´ï¼Œä¸åŒ…å«#å’Œç©ºæ ¼` |
| `é”šç‚¹` | `#[^\s]*` | `äº•å·å¼€å¤´ï¼Œä¸åŒ…å«ç©ºæ ¼` |

**ðŸ”¸ å®Œæ•´URLåŒ¹é…æ¨¡å¼**
```bash
# ðŸŽ¯ åŸºç¡€URLåŒ¹é…
URL_BASIC='https?://[^\s]+'

# ðŸŽ¯ è¯¦ç»†URLåŒ¹é…ï¼ˆåˆ†ç»„æ•èŽ·ï¼‰
URL_DETAILED='(https?://)([a-zA-Z0-9.-]+)(:[0-9]+)?(/[^\s?#]*)(\?[^#\s]*)?(#[^\s]*)?'

# ðŸ’¡ åœ¨å®žé™…ä½¿ç”¨ä¸­
extract_urls() {
    local text="$1"
    echo "$text" | grep -oE 'https?://[^\s]+' | while read -r url; do
        echo "ðŸ”— æ‰¾åˆ°URL: $url"
    done
}
```

### 4.3 æ—¥å¿—ä¸­URLæå–å®žæˆ˜


**ðŸ”¸ ä»ŽWebæœåŠ¡å™¨æ—¥å¿—æå–URLä¿¡æ¯**
```bash
# ðŸ“ åˆ›å»ºåŒ…å«URLçš„æµ‹è¯•æ—¥å¿—
cat > url_test.log << 'EOF'
GET /api/users?page=1&limit=10 HTTP/1.1
POST /login HTTP/1.1
GET /static/css/style.css HTTP/1.1
GET /admin/dashboard?tab=overview HTTP/1.1
GET /search?q=linux+tutorial&lang=zh HTTP/1.1
GET /download/file.pdf HTTP/1.1
EOF

# ðŸ” æå–æ‰€æœ‰è¯·æ±‚è·¯å¾„
echo "ðŸ“„ æå–çš„è¯·æ±‚è·¯å¾„:"
grep -oE '(GET|POST|PUT|DELETE) [^\s]+' url_test.log | \
while read -r method path rest; do
    echo "ðŸ”¸ $method è¯·æ±‚: $path"
done

# ðŸŽ¯ åˆ†æžURLæ¨¡å¼
analyze_urls() {
    echo "ðŸ“Š URLåˆ†æžç»“æžœ:"
    echo "=================="
    
    # ç»Ÿè®¡APIè°ƒç”¨
    api_count=$(grep -c '/api/' url_test.log)
    echo "ðŸ”¸ APIè°ƒç”¨: $api_count æ¬¡"
    
    # ç»Ÿè®¡é™æ€èµ„æºè¯·æ±‚
    static_count=$(grep -cE '\.(css|js|png|jpg|pdf)' url_test.log)
    echo "ðŸ”¸ é™æ€èµ„æº: $static_count æ¬¡"
    
    # æå–æŸ¥è¯¢å‚æ•°
    echo "ðŸ”¸ å¸¦å‚æ•°çš„è¯·æ±‚:"
    grep -oE '[^ ]+\?[^ ]+' url_test.log | while read -r url; do
        path=$(echo "$url" | cut -d'?' -f1)
        params=$(echo "$url" | cut -d'?' -f2)
        echo "   è·¯å¾„: $path, å‚æ•°: $params"
    done
}

# ðŸ§ª è¿è¡ŒURLåˆ†æž
analyze_urls
```

**ðŸ”¸ æå–å’ŒéªŒè¯å®Œæ•´URL**
```bash
# ðŸ“ åŒ…å«å®Œæ•´URLçš„æ—¥å¿—ç¤ºä¾‹
cat > full_url_test.log << 'EOF'
è®¿é—®äº† https://www.example.com/api/data?format=json
é‡å®šå‘åˆ° http://backup.example.com:8080/status
ä¸‹è½½ https://cdn.example.com/files/report.pdf#page=5
æ— æ•ˆé“¾æŽ¥ htp://broken-url.com/page (åè®®é”™è¯¯)
EOF

# ðŸ” æå–æœ‰æ•ˆçš„å®Œæ•´URL
extract_complete_urls() {
    local file="$1"
    echo "ðŸ”— å®Œæ•´URLæå–ç»“æžœ:"
    echo "==================="
    
    grep -oE 'https?://[^\s]+' "$file" | while read -r url; do
        echo "âœ… æ‰¾åˆ°URL: $url"
        
        # åˆ†æžURLç»„æˆéƒ¨åˆ†
        if [[ $url =~ ^(https?)://([^/:]+)(:([0-9]+))?(/[^?#]*)(\?([^#]*))?(#(.*))?$ ]]; then
            echo "   ðŸ”¸ åè®®: ${BASH_REMATCH[1]}"
            echo "   ðŸ”¸ ä¸»æœº: ${BASH_REMATCH[2]}"
            [[ -n ${BASH_REMATCH[4]} ]] && echo "   ðŸ”¸ ç«¯å£: ${BASH_REMATCH[4]}"
            [[ -n ${BASH_REMATCH[5]} ]] && echo "   ðŸ”¸ è·¯å¾„: ${BASH_REMATCH[5]}"
            [[ -n ${BASH_REMATCH[7]} ]] && echo "   ðŸ”¸ å‚æ•°: ${BASH_REMATCH[7]}"
            [[ -n ${BASH_REMATCH[9]} ]] && echo "   ðŸ”¸ é”šç‚¹: ${BASH_REMATCH[9]}"
        fi
        echo ""
    done
}

# ðŸ§ª æµ‹è¯•å®Œæ•´URLæå–
extract_complete_urls full_url_test.log
```

---

## 5. âš ï¸ é”™è¯¯ä¿¡æ¯æ¨¡å¼è¯†åˆ«


### 5.1 ä¸ºä»€ä¹ˆè¦è¯†åˆ«é”™è¯¯æ¨¡å¼


**ðŸ”¸ é”™è¯¯ä¿¡æ¯çš„é‡è¦æ€§**
é”™è¯¯ä¿¡æ¯å°±åƒæ˜¯ç³»ç»Ÿçš„"æ±‚æ•‘ä¿¡å·"ï¼Œå‘Šè¯‰æˆ‘ä»¬å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«é”™è¯¯æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
- **å¿«é€Ÿå®šä½é—®é¢˜**ï¼šä»Žå¤§é‡æ—¥å¿—ä¸­æ‰¾åˆ°å…³é”®é”™è¯¯
- **è‡ªåŠ¨æŠ¥è­¦**ï¼šå‘çŽ°ä¸¥é‡é”™è¯¯æ—¶åŠæ—¶é€šçŸ¥
- **è¶‹åŠ¿åˆ†æž**ï¼šç»Ÿè®¡é”™è¯¯å‘ç”Ÿé¢‘çŽ‡å’Œç±»åž‹
- **æ•…éšœé¢„é˜²**ï¼šè¯†åˆ«æ½œåœ¨é—®é¢˜çš„å¾å…†

### 5.2 å¸¸è§é”™è¯¯ä¿¡æ¯æ¨¡å¼


**ðŸ”¸ ç³»ç»Ÿçº§é”™è¯¯å…³é”®è¯**
```bash
# ðŸ“‹ å¸¸è§é”™è¯¯å…³é”®è¯åˆ—è¡¨
ERROR_KEYWORDS=(
    "error"        # é€šç”¨é”™è¯¯
    "fail"         # å¤±è´¥
    "exception"    # å¼‚å¸¸
    "fatal"        # è‡´å‘½é”™è¯¯
    "critical"     # ä¸¥é‡é”™è¯¯
    "timeout"      # è¶…æ—¶
    "refused"      # æ‹’ç»è¿žæŽ¥
    "denied"       # æ‹’ç»è®¿é—®
    "not found"    # æ‰¾ä¸åˆ°
    "invalid"      # æ— æ•ˆ
)

# ðŸŽ¯ é”™è¯¯ä¸¥é‡çº§åˆ«æ¨¡å¼
SEVERITY_PATTERNS=(
    "CRITICAL|FATAL"     # ä¸¥é‡çº§åˆ«
    "ERROR"              # é”™è¯¯çº§åˆ«  
    "WARNING|WARN"       # è­¦å‘Šçº§åˆ«
    "INFO|NOTICE"        # ä¿¡æ¯çº§åˆ«
)
```

**ðŸ“Š é”™è¯¯ç±»åž‹åˆ†ç±»**
| é”™è¯¯ç±»åž‹ | **å…³é”®è¯** | **æ­£åˆ™æ¨¡å¼** | **ä¸¥é‡ç¨‹åº¦** |
|---------|-----------|-------------|-------------|
| `è¿žæŽ¥é”™è¯¯` | `connection refused/timeout` | `connection.*(refused\|timeout)` | `ðŸ”´ é«˜` |
| `è®¤è¯é”™è¯¯` | `authentication failed/denied` | `auth.*fail\|denied` | `ðŸŸ¡ ä¸­` |
| `æ–‡ä»¶é”™è¯¯` | `file not found/permission denied` | `file.*(not found\|denied)` | `ðŸŸ¡ ä¸­` |
| `å†…å­˜é”™è¯¯` | `out of memory/memory leak` | `memory\|out of.*memory` | `ðŸ”´ é«˜` |
| `æ•°æ®åº“é”™è¯¯` | `database connection/query error` | `database\|mysql\|sql.*error` | `ðŸ”´ é«˜` |

### 5.3 é”™è¯¯ä¿¡æ¯æå–å®žæˆ˜


**ðŸ”¸ åˆ›å»ºåŒ…å«å„ç§é”™è¯¯çš„æµ‹è¯•æ—¥å¿—**
```bash
cat > error_test.log << 'EOF'
2023-12-25 10:00:01 ERROR: Database connection failed
2023-12-25 10:00:15 WARNING: High memory usage detected
2023-12-25 10:01:23 CRITICAL: System out of memory
2023-12-25 10:02:45 INFO: User login successful
2023-12-25 10:03:12 ERROR: Authentication failed for user admin
2023-12-25 10:04:33 FATAL: Unable to start service
2023-12-25 10:05:44 ERROR: File not found: /var/log/app.log
2023-12-25 10:06:55 WARNING: Connection timeout to database
Normal operation message
2023-12-25 10:08:11 EXCEPTION: NullPointerException in module X
EOF

# ðŸ” æå–æ‰€æœ‰é”™è¯¯ä¿¡æ¯
echo "ðŸš¨ é”™è¯¯ä¿¡æ¯æå–ç»“æžœ:"
echo "===================="
grep -iE '(error|fail|exception|fatal|critical)' error_test.log
```

**ðŸ”¸ æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»é”™è¯¯**
```bash
classify_errors() {
    local logfile="$1"
    
    echo "ðŸ“Š é”™è¯¯ä¸¥é‡ç¨‹åº¦åˆ†æž:"
    echo "==================="
    
    # ä¸¥é‡é”™è¯¯
    echo "ðŸ”´ ä¸¥é‡é”™è¯¯ (CRITICAL/FATAL):"
    grep -iE '(critical|fatal)' "$logfile" | sed 's/^/   /'
    
    # ä¸€èˆ¬é”™è¯¯
    echo ""
    echo "ðŸŸ¡ ä¸€èˆ¬é”™è¯¯ (ERROR):"
    grep -iE '\berror\b' "$logfile" | grep -viE '(critical|fatal)' | sed 's/^/   /'
    
    # è­¦å‘Šä¿¡æ¯
    echo ""
    echo "ðŸŸ  è­¦å‘Šä¿¡æ¯ (WARNING):"
    grep -iE 'warn' "$logfile" | sed 's/^/   /'
    
    # å¼‚å¸¸ä¿¡æ¯
    echo ""
    echo "ðŸ’¥ å¼‚å¸¸ä¿¡æ¯ (EXCEPTION):"
    grep -iE 'exception' "$logfile" | sed 's/^/   /'
}

# ðŸ§ª è¿è¡Œé”™è¯¯åˆ†ç±»
classify_errors error_test.log
```

**ðŸ”¸ é”™è¯¯ç»Ÿè®¡å’ŒæŠ¥å‘Š**
```bash
# ðŸ“ˆ ç”Ÿæˆé”™è¯¯ç»Ÿè®¡æŠ¥å‘Š
generate_error_report() {
    local logfile="$1"
    
    echo "ðŸ“‹ é”™è¯¯ç»Ÿè®¡æŠ¥å‘Š"
    echo "==============="
    echo "ç”Ÿæˆæ—¶é—´: $(date)"
    echo ""
    
    # æ€»ä½“ç»Ÿè®¡
    total_lines=$(wc -l < "$logfile")
    error_lines=$(grep -icE '(error|fail|exception|fatal|critical|warn)' "$logfile")
    normal_lines=$((total_lines - error_lines))
    
    echo "ðŸ“Š æ€»ä½“æƒ…å†µ:"
    echo "   æ€»æ—¥å¿—è¡Œæ•°: $total_lines"
    echo "   é”™è¯¯/è­¦å‘Šè¡Œæ•°: $error_lines"
    echo "   æ­£å¸¸æ—¥å¿—è¡Œæ•°: $normal_lines"
    echo "   é”™è¯¯çŽ‡: $(( error_lines * 100 / total_lines ))%"
    echo ""
    
    # é”™è¯¯ç±»åž‹ç»Ÿè®¡
    echo "ðŸ” é”™è¯¯ç±»åž‹åˆ†å¸ƒ:"
    echo "   ä¸¥é‡é”™è¯¯: $(grep -icE '(critical|fatal)' "$logfile") æ¡"
    echo "   ä¸€èˆ¬é”™è¯¯: $(grep -icE '\berror\b' "$logfile") æ¡" 
    echo "   è­¦å‘Šä¿¡æ¯: $(grep -icE 'warn' "$logfile") æ¡"
    echo "   å¼‚å¸¸ä¿¡æ¯: $(grep -icE 'exception' "$logfile") æ¡"
    echo ""
    
    # å…³é”®è¯é¢‘çŽ‡
    echo "ðŸ”¤ é«˜é¢‘é”™è¯¯å…³é”®è¯:"
    grep -ioE '(error|fail|exception|fatal|critical|warning|timeout|denied|refused)' "$logfile" | \
    sort | uniq -c | sort -rn | head -5 | \
    while read -r count keyword; do
        echo "   $keyword: $count æ¬¡"
    done
}

# ðŸ§ª ç”ŸæˆæŠ¥å‘Š
generate_error_report error_test.log
```

---

## 6. ðŸ”„ å¤šæ ¼å¼æ—¥å¿—ç»Ÿä¸€å¤„ç†


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å¤„ç†


**ðŸ”¸ å¤šæ ¼å¼æ—¥å¿—çš„æŒ‘æˆ˜**
åœ¨å®žé™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°æ¥è‡ªä¸åŒç³»ç»Ÿçš„æ—¥å¿—ï¼Œå®ƒä»¬çš„æ ¼å¼å„ä¸ç›¸åŒï¼š
- **WebæœåŠ¡å™¨æ—¥å¿—**ï¼šApacheã€Nginxæ ¼å¼ä¸åŒ
- **åº”ç”¨ç¨‹åºæ—¥å¿—**ï¼šJavaã€PHPã€Pythonå„æœ‰ç‰¹è‰²  
- **ç³»ç»Ÿæ—¥å¿—**ï¼šLinuxç³»ç»Ÿæ—¥å¿—ã€Windowsäº‹ä»¶æ—¥å¿—
- **æ•°æ®åº“æ—¥å¿—**ï¼šMySQLã€PostgreSQLç­‰

```
ç±»æ¯”ç”Ÿæ´»åœºæ™¯ï¼š
å°±åƒæ•´ç†æ¥è‡ªä¸åŒé“¶è¡Œçš„è´¦å•
- æ¯ä¸ªé“¶è¡Œçš„æ ¼å¼ä¸åŒ
- ä½†æˆ‘ä»¬éœ€è¦ç»Ÿä¸€åˆ†æžæ”¶æ”¯æƒ…å†µ
- éœ€è¦å»ºç«‹ç»Ÿä¸€çš„å¤„ç†è§„åˆ™
```

### 6.2 ç»Ÿä¸€æ—¥å¿—å¤„ç†ç­–ç•¥


**ðŸ”¸ å»ºç«‹é€šç”¨æ—¥å¿—ç»“æž„**
```bash
# ðŸŽ¯ ç»Ÿä¸€çš„æ—¥å¿—å­—æ®µç»“æž„
# æ—¶é—´æˆ³ | çº§åˆ« | æ¥æº | æ¶ˆæ¯å†…å®¹
UNIFIED_FORMAT="TIMESTAMP|LEVEL|SOURCE|MESSAGE"

# ðŸ“‹ å­—æ®µå«ä¹‰
# TIMESTAMP: æ ‡å‡†åŒ–æ—¶é—´æ ¼å¼ YYYY-MM-DD HH:MM:SS
# LEVEL: ERROR/WARN/INFO/DEBUG  
# SOURCE: æ—¥å¿—æ¥æºæ ‡è¯†ï¼ˆapache/nginx/mysqlç­‰ï¼‰
# MESSAGE: åŽŸå§‹æ—¥å¿—æ¶ˆæ¯å†…å®¹
```

**ðŸ”¸ å¤šæ ¼å¼è½¬æ¢è§„åˆ™**
```bash
# ðŸ”§ Apacheæ—¥å¿—è½¬æ¢å‡½æ•°
convert_apache_log() {
    local line="$1"
    if [[ $line =~ ^([0-9.]+).*\[([^]]+)\].*\"([^\"]+)\".*([0-9]{3}).* ]]; then
        local ip="${BASH_REMATCH[1]}"
        local timestamp="${BASH_REMATCH[2]}"
        local request="${BASH_REMATCH[3]}"
        local status="${BASH_REMATCH[4]}"
        
        # è½¬æ¢ä¸ºç»Ÿä¸€æ ¼å¼
        local level="INFO"
        [[ $status -ge 400 ]] && level="ERROR"
        [[ $status -ge 300 && $status -lt 400 ]] && level="WARN"
        
        echo "${timestamp}|${level}|APACHE|${ip} ${request} ${status}"
    fi
}

# ðŸ”§ ç³»ç»Ÿæ—¥å¿—è½¬æ¢å‡½æ•°
convert_syslog() {
    local line="$1"
    if [[ $line =~ ^(\w{3}\s+\d{1,2}\s+\d{2}:\d{2}:\d{2})\s+(\S+)\s+(\w+).*:\s+(.*)$ ]]; then
        local timestamp="${BASH_REMATCH[1]} $(date +%Y)"  # æ·»åŠ å¹´ä»½
        local hostname="${BASH_REMATCH[2]}"
        local service="${BASH_REMATCH[3]}"
        local message="${BASH_REMATCH[4]}"
        
        # åˆ¤æ–­æ—¥å¿—çº§åˆ«
        local level="INFO"
        echo "$message" | grep -qiE '(error|fail|fatal)' && level="ERROR"
        echo "$message" | grep -qiE '(warn|warning)' && level="WARN"
        
        echo "${timestamp}|${level}|SYSLOG|${service}: ${message}"
    fi
}
```

### 6.3 ç»Ÿä¸€å¤„ç†å®žæˆ˜æ¼”ç¤º


**ðŸ”¸ åˆ›å»ºæ··åˆæ ¼å¼æ—¥å¿—æ–‡ä»¶**
```bash
cat > mixed_logs.txt << 'EOF'
# Apacheæ—¥å¿—
192.168.1.100 - - [25/Dec/2023:10:00:23 +0800] "GET /index.html HTTP/1.1" 200 1043
192.168.1.101 - - [25/Dec/2023:10:01:15 +0800] "POST /login HTTP/1.1" 500 278

# ç³»ç»Ÿæ—¥å¿—
Dec 25 10:02:33 server01 sshd[1234]: Failed password for root from 192.168.1.50
Dec 25 10:03:45 server01 httpd[5678]: Server started successfully

# åº”ç”¨æ—¥å¿—
2023-12-25 10:04:12 ERROR ApplicationService: Database connection failed
2023-12-25 10:05:23 INFO UserController: User admin logged in successfully
EOF

# ðŸ”„ ç»Ÿä¸€å¤„ç†å‡½æ•°
process_mixed_logs() {
    local logfile="$1"
    
    echo "ðŸ”„ æ··åˆæ—¥å¿—ç»Ÿä¸€å¤„ç†ç»“æžœ:"
    echo "=========================="
    
    while IFS= read -r line; do
        # è·³è¿‡æ³¨é‡Šè¡Œå’Œç©ºè¡Œ
        [[ $line =~ ^[[:space:]]*# || -z $line ]] && continue
        
        # è¯†åˆ«æ—¥å¿—ç±»åž‹å¹¶è½¬æ¢
        if [[ $line =~ ^[0-9.]+ ]]; then
            # Apacheæ ¼å¼
            convert_apache_log "$line"
        elif [[ $line =~ ^[A-Z][a-z]{2}[[:space:]]+[0-9] ]]; then
            # ç³»ç»Ÿæ—¥å¿—æ ¼å¼
            convert_syslog "$line"  
        elif [[ $line =~ ^[0-9]{4}-[0-9]{2}-[0-9]{2} ]]; then
            # åº”ç”¨æ—¥å¿—æ ¼å¼
            echo "$line" | sed -E 's/^([0-9-]+ [0-9:]+) +([A-Z]+) +([^:]+): +(.*)$/\1|\2|APP|\3: \4/'
        else
            # æœªçŸ¥æ ¼å¼ï¼Œä¿æŒåŽŸæ ·
            echo "$(date '+%Y-%m-%d %H:%M:%S')|UNKNOWN|SYSTEM|$line"
        fi
    done < "$logfile"
}

# ðŸ§ª æ‰§è¡Œç»Ÿä¸€å¤„ç†
process_mixed_logs mixed_logs.txt
```

**ðŸ”¸ ç»Ÿä¸€æ ¼å¼çš„åŽç»­åˆ†æž**
```bash
# ðŸ“Š åŸºäºŽç»Ÿä¸€æ ¼å¼çš„åˆ†æžå‡½æ•°
analyze_unified_logs() {
    local processed_logs="$1"
    
    echo ""
    echo "ðŸ“ˆ ç»Ÿä¸€æ ¼å¼æ—¥å¿—åˆ†æž:"
    echo "==================="
    
    # æŒ‰çº§åˆ«ç»Ÿè®¡
    echo "ðŸ”¸ æ—¥å¿—çº§åˆ«åˆ†å¸ƒ:"
    echo "$processed_logs" | cut -d'|' -f2 | sort | uniq -c | \
    while read -r count level; do
        case $level in
            ERROR) echo "   ðŸ”´ é”™è¯¯: $count æ¡" ;;
            WARN)  echo "   ðŸŸ¡ è­¦å‘Š: $count æ¡" ;;
            INFO)  echo "   ðŸŸ¢ ä¿¡æ¯: $count æ¡" ;;
            *)     echo "   âšª $level: $count æ¡" ;;
        esac
    done
    
    # æŒ‰æ¥æºç»Ÿè®¡
    echo ""
    echo "ðŸ”¸ æ—¥å¿—æ¥æºåˆ†å¸ƒ:"
    echo "$processed_logs" | cut -d'|' -f3 | sort | uniq -c | \
    while read -r count source; do
        echo "   ðŸ“‹ $source: $count æ¡"
    done
    
    # é”™è¯¯ä¿¡æ¯æ±‡æ€»
    echo ""
    echo "ðŸ”¸ é”™è¯¯ä¿¡æ¯æ±‡æ€»:"
    echo "$processed_logs" | grep '|ERROR|' | cut -d'|' -f4 | \
    while read -r error_msg; do
        echo "   âŒ $error_msg"
    done
}

# ðŸ§ª åˆ†æžå¤„ç†åŽçš„æ—¥å¿—
unified_result=$(process_mixed_logs mixed_logs.txt)
analyze_unified_logs "$unified_result"
```

---

## 7. âš¡ å®žæ—¶æ—¥å¿—è¿‡æ»¤æŠ€æœ¯


### 7.1 å®žæ—¶æ—¥å¿—è¿‡æ»¤çš„é‡è¦æ€§


**ðŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦å®žæ—¶è¿‡æ»¤**
å®žæ—¶æ—¥å¿—è¿‡æ»¤å°±åƒæ˜¯ç»™ç³»ç»Ÿå®‰è£…äº†"æ™ºèƒ½ç›‘æŽ§æ‘„åƒå¤´"ï¼Œèƒ½å¤Ÿï¼š
- **å³æ—¶å‘çŽ°é—®é¢˜**ï¼šé”™è¯¯ä¸€å‘ç”Ÿå°±èƒ½çœ‹åˆ°
- **å‡å°‘ä¿¡æ¯å¹²æ‰°**ï¼šåªæ˜¾ç¤ºå…³å¿ƒçš„å†…å®¹
- **æé«˜å“åº”é€Ÿåº¦**ï¼šå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜
- **èŠ‚çœå­˜å‚¨ç©ºé—´**ï¼šé¿å…ä¿å­˜æ— ç”¨ä¿¡æ¯

```
ç”Ÿæ´»ç±»æ¯”ï¼š
å°±åƒæ–°é—»APPçš„æŽ¨é€åŠŸèƒ½
- ä¸æ˜¯æ‰€æœ‰æ–°é—»éƒ½æŽ¨é€ç»™ä½ 
- åªæŽ¨é€ä½ å…³å¿ƒçš„é‡è¦æ–°é—»
- ç¬¬ä¸€æ—¶é—´èŽ·å¾—é‡è¦ä¿¡æ¯
```

### 7.2 å®žæ—¶è¿‡æ»¤å·¥å…·å’ŒæŠ€æœ¯


**ðŸ”¸ tailå‘½ä»¤å®žæ—¶ç›‘æŽ§**
```bash
# ðŸ” åŸºç¡€å®žæ—¶ç›‘æŽ§
tail -f /var/log/apache2/access.log

# ðŸŽ¯ ç›‘æŽ§å¤šä¸ªæ—¥å¿—æ–‡ä»¶
tail -f /var/log/apache2/access.log /var/log/mysql/error.log

# ðŸ“Š æ˜¾ç¤ºæœ€æ–°Nè¡Œå¹¶æŒç»­ç›‘æŽ§
tail -n 100 -f /var/log/syslog
```

**ðŸ”¸ grepé…åˆå®žæ—¶è¿‡æ»¤**
```bash
# âš¡ å®žæ—¶è¿‡æ»¤é”™è¯¯ä¿¡æ¯
tail -f /var/log/syslog | grep -iE '(error|fail|critical)'

# ðŸŽ¯ å®žæ—¶ç›‘æŽ§ç‰¹å®šIPè®¿é—®
tail -f /var/log/apache2/access.log | grep '192.168.1.100'

# ðŸ“ˆ å®žæ—¶ç»Ÿè®¡HTTPçŠ¶æ€ç 
tail -f /var/log/apache2/access.log | grep -oE 'HTTP/1\.[01]" [0-9]{3}' | \
while read -r status; do
    code=$(echo "$status" | grep -oE '[0-9]{3}$')
    echo "$(date '+%H:%M:%S') - çŠ¶æ€ç : $code"
done
```

### 7.3 é«˜çº§å®žæ—¶è¿‡æ»¤è„šæœ¬


**ðŸ”¸ æ™ºèƒ½æ—¥å¿—ç›‘æŽ§è„šæœ¬**
```bash
#!/bin/bash
# ðŸ“ æ–‡ä»¶å: smart_log_monitor.sh

# ðŸ”§ é…ç½®éƒ¨åˆ†
LOG_FILE="/var/log/syslog"
ERROR_PATTERNS="(error|fail|critical|fatal|exception)"
WARN_PATTERNS="(warning|warn)"
IP_PATTERN='\b([0-9]{1,3}\.){3}[0-9]{1,3}\b'

# ðŸŽ¨ é¢œè‰²å®šä¹‰
RED='\033[0;31m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# ðŸ“Š ç»Ÿè®¡å˜é‡
error_count=0
warn_count=0
info_count=0

# ðŸ” å®žæ—¶ç›‘æŽ§å‡½æ•°
monitor_logs() {
    echo "ðŸš€ å¼€å§‹å®žæ—¶æ—¥å¿—ç›‘æŽ§..."
    echo "ðŸ“ ç›‘æŽ§æ–‡ä»¶: $LOG_FILE"
    echo "â±ï¸  å¼€å§‹æ—¶é—´: $(date)"
    echo "===================="
    
    tail -n 0 -f "$LOG_FILE" | while IFS= read -r line; do
        timestamp=$(date '+%H:%M:%S')
        
        # é”™è¯¯ä¿¡æ¯å¤„ç†
        if echo "$line" | grep -qiE "$ERROR_PATTERNS"; then
            ((error_count++))
            echo -e "${RED}ðŸ”´ [$timestamp] ERROR: $line${NC}"
            
            # æå–IPåœ°å€ï¼ˆå¦‚æžœæœ‰ï¼‰
            if echo "$line" | grep -qE "$IP_PATTERN"; then
                ip=$(echo "$line" | grep -oE "$IP_PATTERN" | head -1)
                echo -e "${RED}   ðŸ“ ç›¸å…³IP: $ip${NC}"
            fi
            
        # è­¦å‘Šä¿¡æ¯å¤„ç†  
        elif echo "$line" | grep -qiE "$WARN_PATTERNS"; then
            ((warn_count++))
            echo -e "${YELLOW}ðŸŸ¡ [$timestamp] WARN: $line${NC}"
            
        # æ™®é€šä¿¡æ¯ï¼ˆå¯é€‰æ˜¾ç¤ºï¼‰
        else
            ((info_count++))
            # åªæ˜¾ç¤ºé‡è¦çš„INFOä¿¡æ¯
            if echo "$line" | grep -qiE '(login|logout|start|stop|connect)'; then
                echo -e "${GREEN}ðŸŸ¢ [$timestamp] INFO: $line${NC}"
            fi
        fi
        
        # å®šæœŸæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
        if (( (error_count + warn_count + info_count) % 50 == 0 )); then
            echo -e "${BLUE}ðŸ“Š ç»Ÿè®¡: é”™è¯¯=$error_count, è­¦å‘Š=$warn_count, ä¿¡æ¯=$info_count${NC}"
        fi
    done
}

# ðŸŽ¯ ç‰¹å®šæ¨¡å¼ç›‘æŽ§å‡½æ•°
monitor_specific_pattern() {
    local pattern="$1"
    local description="$2"
    
    echo "ðŸ” ç›‘æŽ§æ¨¡å¼: $description"
    echo "ðŸ“‹ åŒ¹é…è§„åˆ™: $pattern"
    echo "===================="
    
    tail -n 0 -f "$LOG_FILE" | grep --line-buffered -iE "$pattern" | \
    while IFS= read -r line; do
        timestamp=$(date '+%H:%M:%S')
        echo -e "${BLUE}ðŸŽ¯ [$timestamp] $description: $line${NC}"
    done
}

# ðŸ”§ ä½¿ç”¨ç¤ºä¾‹
case "${1:-default}" in
    "error")
        monitor_specific_pattern "$ERROR_PATTERNS" "é”™è¯¯ç›‘æŽ§"
        ;;
    "ip")
        monitor_specific_pattern "$IP_PATTERN" "IPåœ°å€ç›‘æŽ§"  
        ;;
    "ssh")
        monitor_specific_pattern "ssh.*fail" "SSHå¤±è´¥ç™»å½•ç›‘æŽ§"
        ;;
    *)
        monitor_logs
        ;;
esac
```

**ðŸ”¸ ä½¿ç”¨ç›‘æŽ§è„šæœ¬**
```bash
# ðŸš€ å¯åŠ¨å…¨é¢ç›‘æŽ§
bash smart_log_monitor.sh

# ðŸŽ¯ åªç›‘æŽ§é”™è¯¯
bash smart_log_monitor.sh error

# ðŸ“ åªç›‘æŽ§IPåœ°å€
bash smart_log_monitor.sh ip

# ðŸ” ç›‘æŽ§SSHç™»å½•å¤±è´¥
bash smart_log_monitor.sh ssh
```

### 7.4 å®žæ—¶å‘Šè­¦ç³»ç»Ÿ


**ðŸ”¸ ç®€å•çš„é‚®ä»¶å‘Šè­¦è„šæœ¬**
```bash
#!/bin/bash
# ðŸ“ æ–‡ä»¶å: log_alert.sh

# âš™ï¸ é…ç½®
ALERT_EMAIL="admin@example.com"
ERROR_THRESHOLD=10  # é”™è¯¯è¾¾åˆ°10æ¬¡å°±å‘Šè­¦
CHECK_INTERVAL=60   # æ¯60ç§’æ£€æŸ¥ä¸€æ¬¡

# ðŸ“Š ç›‘æŽ§å‡½æ•°
check_and_alert() {
    local logfile="$1"
    local current_time=$(date)
    local recent_errors
    
    # æ£€æŸ¥æœ€è¿‘1åˆ†é’Ÿçš„é”™è¯¯æ•°é‡
    recent_errors=$(grep "$(date --date='1 minute ago' '+%Y-%m-%d %H:%M')" "$logfile" | \
                   grep -icE '(error|fail|critical)')
    
    if [[ $recent_errors -ge $ERROR_THRESHOLD ]]; then
        # å‘é€å‘Šè­¦é‚®ä»¶
        {
            echo "ðŸš¨ ç³»ç»Ÿå‘Šè­¦ - $current_time"
            echo "================================"
            echo "æœ€è¿‘1åˆ†é’Ÿå‘çŽ° $recent_errors ä¸ªé”™è¯¯"
            echo ""
            echo "æœ€æ–°é”™è¯¯ä¿¡æ¯:"
            grep "$(date --date='1 minute ago' '+%Y-%m-%d %H:%M')" "$logfile" | \
            grep -iE '(error|fail|critical)' | tail -5
        } | mail -s "ðŸš¨ ç³»ç»Ÿé”™è¯¯å‘Šè­¦" "$ALERT_EMAIL"
        
        echo "ðŸ“§ å‘Šè­¦é‚®ä»¶å·²å‘é€: $recent_errors ä¸ªé”™è¯¯"
    else
        echo "âœ… ç³»ç»Ÿæ­£å¸¸: $recent_errors ä¸ªé”™è¯¯ (é˜ˆå€¼: $ERROR_THRESHOLD)"
    fi
}

# ðŸ”„ æŒç»­ç›‘æŽ§å¾ªçŽ¯
while true; do
    check_and_alert "/var/log/syslog"
    sleep $CHECK_INTERVAL
done
```

---

## 8. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŽŒæ¡çš„å…³é”®æ¦‚å¿µ


**ðŸ”¸ æ—¥å¿—åˆ†æžçš„æœ¬è´¨**
```
æ—¥å¿—åˆ†æž = ä»Žå¤§é‡æ–‡æœ¬ä¸­æå–æœ‰ç”¨ä¿¡æ¯çš„è¿‡ç¨‹
æ­£åˆ™è¡¨è¾¾å¼ = æ–‡æœ¬æ¨¡å¼åŒ¹é…çš„å¼ºå¤§å·¥å…·
å®žé™…ç›®æ ‡ = å¿«é€Ÿå‘çŽ°é—®é¢˜ã€åˆ†æžè¶‹åŠ¿ã€ä¿éšœç³»ç»Ÿå®‰å…¨
```

**ðŸ”¸ æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹**
- **ç³»ç»Ÿæ—¥å¿—æ ¼å¼**ï¼šç†è§£Apacheã€Nginxã€syslogç­‰å¸¸è§æ ¼å¼
- **æ—¶é—´æˆ³å¤„ç†**ï¼šç»Ÿä¸€ä¸åŒæ—¶é—´æ ¼å¼ï¼Œä¾¿äºŽæŽ’åºå’Œåˆ†æž
- **IPåœ°å€éªŒè¯**ï¼šå‡†ç¡®æå–å’ŒéªŒè¯ç½‘ç»œè®¿é—®ä¿¡æ¯
- **URLæ¨¡å¼åŒ¹é…**ï¼šåˆ†æžWebè®¿é—®è¡Œä¸ºå’ŒAPIè°ƒç”¨
- **é”™è¯¯æ¨¡å¼è¯†åˆ«**ï¼šåŠæ—¶å‘çŽ°ç³»ç»Ÿå¼‚å¸¸å’Œæ•…éšœå¾å…†
- **å¤šæ ¼å¼ç»Ÿä¸€**ï¼šå»ºç«‹æ ‡å‡†åŒ–çš„æ—¥å¿—å¤„ç†æµç¨‹
- **å®žæ—¶ç›‘æŽ§**ï¼šåŠæ—¶å“åº”ç³»ç»Ÿé—®é¢˜

### 8.2 å®žæˆ˜åº”ç”¨è®°å¿†è¦ç‚¹


**ðŸ§  è®°å¿†å£è¯€**
```
æ—¥å¿—åˆ†æžæœ‰é—¨é“ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ³•å®
æ—¶é—´IPå’ŒURLï¼Œé”™è¯¯æ¨¡å¼è¦è®°ç‰¢
ç»Ÿä¸€æ ¼å¼å¥½å¤„ç†ï¼Œå®žæ—¶ç›‘æŽ§ä¸å¯å°‘
æ¨¡å¼åŒ¹é…è¦å‡†ç¡®ï¼Œç³»ç»Ÿå®‰å…¨æœ‰ä¾é 
```

**ðŸ”¸ å¸¸ç”¨æ¨¡å¼é€ŸæŸ¥**
| å†…å®¹ç±»åž‹ | **å¿«é€Ÿæ¨¡å¼** | **ä½¿ç”¨åœºæ™¯** |
|---------|-------------|-------------|
| `IPåœ°å€` | `\b([0-9]{1,3}\.){3}[0-9]{1,3}\b` | `è®¿é—®åˆ†æžã€å®‰å…¨å®¡è®¡` |
| `æ—¶é—´æˆ³` | `\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}` | `äº‹ä»¶æŽ’åºã€æ—¶é—´è¿‡æ»¤` |
| `é”™è¯¯çº§åˆ«` | `(ERROR\|WARN\|CRITICAL\|FATAL)` | `é—®é¢˜å®šä½ã€å‘Šè­¦è§¦å‘` |
| `HTTPçŠ¶æ€` | `HTTP/1\.[01]" ([0-9]{3})` | `è®¿é—®è´¨é‡åˆ†æž` |
| `URLè·¯å¾„` | `(GET\|POST) ([^\s]+)` | `APIè°ƒç”¨åˆ†æž` |

### 8.3 æœ€ä½³å®žè·µå»ºè®®


**ðŸ”¸ æ—¥å¿—åˆ†æžå·¥ä½œæµç¨‹**
```
1ï¸âƒ£ äº†è§£æ—¥å¿—æ ¼å¼ â†’ é€‰æ‹©åˆé€‚çš„æ­£åˆ™è¡¨è¾¾å¼
2ï¸âƒ£ ç¼–å†™æµ‹è¯•è„šæœ¬ â†’ éªŒè¯æ¨¡å¼åŒ¹é…å‡†ç¡®æ€§  
3ï¸âƒ£ æ‰¹é‡å¤„ç†æ•°æ® â†’ æå–å…³é”®ä¿¡æ¯
4ï¸âƒ£ å»ºç«‹ç›‘æŽ§æœºåˆ¶ â†’ å®žçŽ°è‡ªåŠ¨åŒ–å‘Šè­¦
5ï¸âƒ£ å®šæœŸåˆ†æžæŠ¥å‘Š â†’ æŒç»­ä¼˜åŒ–ç³»ç»Ÿ
```

**ðŸ”¸ æ€§èƒ½ä¼˜åŒ–å»ºè®®**
- **é¢„ç¼–è¯‘æ­£åˆ™**ï¼šå¤æ‚æ¨¡å¼ä½¿ç”¨å·¥å…·é¢„ç¼–è¯‘
- **åˆ†æ®µå¤„ç†**ï¼šå¤§æ–‡ä»¶åˆ†å—å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º
- **ç´¢å¼•ä¼˜åŒ–**ï¼šé¢‘ç¹æŸ¥è¯¢çš„å­—æ®µå»ºç«‹ç´¢å¼•
- **ç¼“å­˜ç»“æžœ**ï¼šé‡å¤åˆ†æžçš„ç»“æžœé€‚å½“ç¼“å­˜

**ðŸ”¸ å®‰å…¨è€ƒè™‘äº‹é¡¹**
- **æ•æ„Ÿä¿¡æ¯**ï¼šæ—¥å¿—ä¸­çš„å¯†ç ã€tokenè¦è„±æ•å¤„ç†
- **è®¿é—®æŽ§åˆ¶**ï¼šé™åˆ¶æ—¥å¿—æ–‡ä»¶çš„è®¿é—®æƒé™
- **å¤‡ä»½ç­–ç•¥**ï¼šé‡è¦æ—¥å¿—è¦æœ‰å¤‡ä»½å’Œå½’æ¡£æœºåˆ¶
- **å®¡è®¡è¿½è¸ª**ï¼šè®°å½•è°åœ¨ä»€ä¹ˆæ—¶å€™æŸ¥çœ‹äº†æ—¥å¿—

### 8.4 æ‰©å±•å­¦ä¹ æ–¹å‘


**ðŸš€ è¿›é˜¶æŠ€æœ¯**
- **ELK Stack**ï¼šElasticsearch + Logstash + Kibana æ—¥å¿—åˆ†æžå¹³å°
- **Fluentd**ï¼šç»Ÿä¸€æ—¥å¿—æ”¶é›†å’Œè½¬å‘
- **Prometheus + Grafana**ï¼šæŒ‡æ ‡ç›‘æŽ§å’Œå¯è§†åŒ–
- **æœºå™¨å­¦ä¹ **ï¼šåŸºäºŽåŽ†å²æ—¥å¿—çš„å¼‚å¸¸æ£€æµ‹

**ðŸ“š ç›¸å…³çŸ¥è¯†é“¾æŽ¥**
- ðŸ”— **Shellè„šæœ¬ç¼–ç¨‹**ï¼šè‡ªåŠ¨åŒ–æ—¥å¿—å¤„ç†è„šæœ¬
- ðŸ”— **æ•°æ®åº“æ“ä½œ**ï¼šæ—¥å¿—æ•°æ®çš„å­˜å‚¨å’ŒæŸ¥è¯¢
- ðŸ”— **ç½‘ç»œå®‰å…¨**ï¼šåŸºäºŽæ—¥å¿—çš„å®‰å…¨åˆ†æž
- ðŸ”— **ç³»ç»Ÿç›‘æŽ§**ï¼šå…¨æ–¹ä½çš„ç³»ç»Ÿå¥åº·ç›‘æŽ§

---

**ðŸŽ¯ å­¦ä¹ æ£€æŸ¥æ¸…å•**
- [ ] èƒ½å¤Ÿè¯†åˆ«å¸¸è§çš„æ—¥å¿—æ ¼å¼
- [ ] æŽŒæ¡æ—¶é—´æˆ³çš„æå–å’Œè½¬æ¢
- [ ] ç†Ÿç»ƒä½¿ç”¨IPåœ°å€åŒ¹é…æ¨¡å¼
- [ ] ç†è§£URL/URIçš„ç»“æž„å’ŒåŒ¹é…æ–¹æ³•
- [ ] èƒ½å¤Ÿè®¾è®¡é”™è¯¯ä¿¡æ¯çš„è¯†åˆ«è§„åˆ™
- [ ] æŽŒæ¡å¤šæ ¼å¼æ—¥å¿—çš„ç»Ÿä¸€å¤„ç†
- [ ] èƒ½å¤Ÿå®žçŽ°åŸºæœ¬çš„å®žæ—¶æ—¥å¿—ç›‘æŽ§
- [ ] äº†è§£æ—¥å¿—åˆ†æžçš„æœ€ä½³å®žè·µ

**æ ¸å¿ƒç†è§£**ï¼šæ—¥å¿—åˆ†æžä¸ä»…æ˜¯æŠ€æœ¯æŠ€èƒ½ï¼Œæ›´æ˜¯ç³»ç»Ÿè¿ç»´å’Œå®‰å…¨ä¿éšœçš„é‡è¦æ‰‹æ®µã€‚é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼åŒ¹é…ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»Žçœ‹ä¼¼æ··ä¹±çš„æ—¥å¿—æ•°æ®ä¸­æå–å‡ºæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œä¸ºç³»ç»Ÿçš„ç¨³å®šè¿è¡Œæä¾›æœ‰åŠ›æ”¯æ’‘ã€‚