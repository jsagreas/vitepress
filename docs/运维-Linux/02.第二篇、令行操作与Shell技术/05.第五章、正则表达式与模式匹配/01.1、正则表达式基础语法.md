---
title: 1、正则表达式基础语法
---
## 📚 目录

1. [什么是正则表达式](#1-什么是正则表达式)
2. [基础元字符详解](#2-基础元字符详解)
3. [字符类与字符集](#3-字符类与字符集)
4. [预定义字符类](#4-预定义字符类)
5. [锚定符：位置匹配](#5-锚定符位置匹配)
6. [量词：匹配次数控制](#6-量词匹配次数控制)
7. [转义字符处理](#7-转义字符处理)
8. [实战练习与应用](#8-实战练习与应用)
9. [核心要点总结](#9-核心要点总结)

---

## 1. 🎯 什么是正则表达式


### 1.1 通俗理解正则表达式


**🔸 什么是正则表达式？**
正则表达式就像是一个"文字搜索的高级工具"，可以帮你在大量文本中快速找到符合特定格式的内容。

```
简单理解：
普通搜索：只能找完全一样的文字
正则搜索：可以找"符合某种模式"的文字

比如：
- 找所有的邮箱地址
- 找所有的手机号码  
- 找所有以"http"开头的网址
```

**🔸 生活中的类比**
```
正则表达式 = 筛选器

就像：
📱 手机通讯录的搜索功能
- 输入"张"，找出所有姓张的联系人
- 输入"138"，找出所有138开头的号码

🏪 商品分类筛选
- 选择"价格100-500元"
- 选择"品牌：苹果"
- 选择"颜色：红色"

正则表达式就是给文本内容设置"筛选条件"
```

### 1.2 为什么要学正则表达式


**💡 实际应用场景**
```
📧 邮箱验证：
用户注册时，检查输入的邮箱格式是否正确

📞 手机号提取：
从一篇文章中提取所有出现的手机号码

🔍 日志分析：
从服务器日志中找出所有错误信息

📝 文档处理：
批量替换文档中的特定格式内容
```

> 💡 **新手提示**：正则表达式虽然看起来像"天书"，但掌握基础语法后，就能解决90%的文本处理问题！

---

## 2. ⚙️ 基础元字符详解


### 2.1 点号（.）- 万能匹配符


**🔸 点号的作用**
```
点号（.）= 匹配任意一个字符（除了换行符）

示例：
正则：a.c
能匹配：abc、aac、a1c、a@c
不匹配：ac（缺少中间字符）、a\nc（有换行符）
```

**💻 实际例子**
```bash
# 在文本中查找三位数的文件编号
grep "file.txt" document.txt

匹配结果：
✅ file1.txt
✅ fileA.txt  
✅ file@.txt
❌ file.txt（点号被转义了，后面讲）
```

### 2.2 星号（*）- 零次或多次


**🔸 星号的含义**
```
星号（*）= 前面的字符可以出现0次、1次或多次

重要理解：*号修饰的是前面紧挨着的一个字符！

示例：
正则：ab*c
匹配逻辑：a + (b出现0次或多次) + c

能匹配：
- ac（b出现0次）
- abc（b出现1次）
- abbc（b出现2次）
- abbbbbc（b出现很多次）
```

**🧠 记忆技巧**
```
星号 * = "可有可无，可多可少"
想象成：前面的字符像"星星"一样，可能不出现，也可能满天都是
```

### 2.3 加号（+）- 一次或多次


**🔸 加号与星号的区别**
```
加号（+）= 前面的字符必须出现至少1次

对比理解：
ab*c：b可以出现0次（ac能匹配）
ab+c：b必须出现至少1次（ac不能匹配）

示例：
正则：ab+c
能匹配：abc、abbc、abbbc
不匹配：ac（b必须至少出现1次）
```

### 2.4 问号（?）- 零次或一次


**🔸 问号的作用**
```
问号（?）= 前面的字符可以出现0次或1次

简单说就是：这个字符"可选的"

示例：
正则：colou?r
能匹配：color（u出现0次）、colour（u出现1次）
不匹配：colouur（u出现2次）
```

**💡 实用例子**
```bash
# 匹配HTTP或HTTPS网址
grep "https?://" urls.txt

匹配结果：
✅ http://example.com
✅ https://example.com
❌ httpss://example.com
```

### 2.5 方括号（[]）- 字符选择


**🔸 方括号的含义**
```
方括号（[]）= 匹配方括号内任意一个字符

示例：
正则：[abc]
能匹配：a 或 b 或 c（只能匹配其中一个）

正则：[abc]123
能匹配：a123、b123、c123
不匹配：d123、abc123
```

---

## 3. 📝 字符类与字符集


### 3.1 范围表示法


**🔸 用连字符表示范围**
```
[a-z]：匹配任意一个小写字母
[A-Z]：匹配任意一个大写字母  
[0-9]：匹配任意一个数字

组合使用：
[a-zA-Z]：匹配任意一个字母（大小写都行）
[0-9a-f]：匹配十六进制数字（0-9和a-f）
```

**💻 实际例子**
```bash
# 查找所有的单词（只包含字母）
grep "[a-zA-Z]" text.txt

# 查找所有的数字
grep "[0-9]" numbers.txt

# 查找密码（字母+数字组合）
grep "[a-zA-Z0-9]" passwords.txt
```

### 3.2 否定字符类


**🔸 用^号表示"不是"**
```
[^abc]：匹配除了a、b、c之外的任意字符
[^0-9]：匹配任意非数字字符
[^a-zA-Z]：匹配任意非字母字符

注意：^号只在方括号内的开头位置才表示否定！
```

**🔍 实际应用**
```bash
# 查找包含特殊字符的行（非字母数字的字符）
grep "[^a-zA-Z0-9]" data.txt

匹配结果：
✅ hello@world（包含@符号）
✅ test-123（包含-符号）
❌ hello123（只有字母数字）
```

---

## 4. 🎨 预定义字符类


### 4.1 常用预定义字符类


**🔸 数字相关**
```
\d：匹配任意数字，相当于 [0-9]
\D：匹配任意非数字，相当于 [^0-9]

示例：
电话号码：\d{3}-\d{4}-\d{4}
匹配：138-1234-5678
```

**🔸 单词字符**
```
\w：匹配单词字符（字母、数字、下划线），相当于 [a-zA-Z0-9_]
\W：匹配非单词字符，相当于 [^a-zA-Z0-9_]

示例：
变量名：\w+
匹配：user_name、count123、_temp
不匹配：user-name（包含连字符）
```

**🔸 空白字符**
```
\s：匹配任意空白字符（空格、制表符、换行符等）
\S：匹配任意非空白字符

示例：
单词间距：\w+\s+\w+
匹配："hello world"、"name    age"
```

### 4.2 预定义字符类对比表


| **字符类** | **含义** | **等价写法** | **实际例子** |
|-----------|---------|-------------|-------------|
| `\d` | 数字 | `[0-9]` | 匹配：5、8、0 |
| `\D` | 非数字 | `[^0-9]` | 匹配：a、@、空格 |
| `\w` | 单词字符 | `[a-zA-Z0-9_]` | 匹配：a、5、_ |
| `\W` | 非单词字符 | `[^a-zA-Z0-9_]` | 匹配：@、-、空格 |
| `\s` | 空白字符 | 空格、制表符等 | 匹配：空格、Tab |
| `\S` | 非空白字符 | 除空白外所有 | 匹配：字母、数字、符号 |

> ⚠️ **注意**：不同的工具和编程语言对预定义字符类的支持可能有差异，在Linux中使用时需要注意转义。

---

## 5. 📍 锚定符：位置匹配


### 5.1 行首和行尾锚定


**🔸 行首锚定（^）**
```
^：表示行的开始位置

示例：
^hello：只匹配以"hello"开头的行

文本内容：
hello world     ✅ 匹配（行首是hello）
say hello       ❌ 不匹配（hello不在行首）
hello there     ✅ 匹配（行首是hello）
```

**🔸 行尾锚定（$）**
```
$：表示行的结束位置

示例：
world$：只匹配以"world"结尾的行

文本内容：
hello world     ✅ 匹配（行尾是world）
world peace     ❌ 不匹配（world不在行尾）
new world       ✅ 匹配（行尾是world）
```

**💻 实际应用**
```bash
# 查找空行（行首就是行尾）
grep "^$" file.txt

# 查找以#开头的注释行
grep "^#" config.txt

# 查找以.txt结尾的文件名
grep "\.txt$" filelist.txt
```

### 5.2 单词边界锚定


**🔸 单词边界（\b）**
```
\b：匹配单词的边界位置

什么是单词边界？
- 单词字符（\w）和非单词字符（\W）之间
- 字符串的开头和结尾（如果紧挨着单词字符）

示例：
\bcat\b：只匹配完整的单词"cat"

文本测试：
cat           ✅ 匹配（完整单词）
category      ❌ 不匹配（cat是category的一部分）
my cat        ✅ 匹配（空格分隔的完整单词）
catch         ❌ 不匹配（cat是catch的一部分）
```

**🧠 理解技巧**
```
单词边界就像是"单词的围栏"
只有完整的、独立的单词才能匹配

比如查找变量名"id"：
\bid\b：只匹配独立的"id"
不会匹配：width、uid、idCode等包含id的单词
```

---

## 6. 🔢 量词：匹配次数控制


### 6.1 基础量词回顾


**🔸 三个基础量词**
```
*：0次或多次（可有可无，可多可少）
+：1次或多次（至少要有1次）  
?：0次或1次（可选的）

记忆口诀：
* = 星星满天飞，有没有都无所谓
+ = 加号要求高，至少一次才叫好  
? = 问号表犹豫，有没有都可以
```

### 6.2 精确量词


**🔸 大括号量词**
```bash
{n}：恰好匹配n次
{n,}：至少匹配n次
{n,m}：匹配n到m次之间

实际例子：
\d{3}        # 恰好3个数字：123、456
\d{3,}       # 至少3个数字：123、1234、12345
\d{3,5}      # 3到5个数字：123、1234、12345
```

**💡 实用示例**
```bash
# 匹配中国手机号（11位数字）
grep "1[3-9]\d{9}" phone.txt

# 匹配邮政编码（6位数字）
grep "\d{6}" address.txt

# 匹配密码（6-12位字母数字）
grep "[a-zA-Z0-9]{6,12}" password.txt
```

### 6.3 量词对比表


| **量词** | **含义** | **示例** | **匹配结果** |
|---------|---------|---------|-------------|
| `*` | 0次或多次 | `ab*c` | ac, abc, abbc |
| `+` | 1次或多次 | `ab+c` | abc, abbc (不匹配ac) |
| `?` | 0次或1次 | `ab?c` | ac, abc (不匹配abbc) |
| `{3}` | 恰好3次 | `a{3}` | aaa |
| `{3,}` | 至少3次 | `a{3,}` | aaa, aaaa, aaaaa |
| `{3,5}` | 3到5次 | `a{3,5}` | aaa, aaaa, aaaaa |

---

## 7. 🛡️ 转义字符处理


### 7.1 为什么需要转义


**🔸 特殊字符的冲突**
```
正则表达式中有些字符有特殊含义：
. * + ? [ ] ^ $ ( ) { } \ |

如果你想匹配这些字符本身，需要用反斜杠转义
```

**💡 生活类比**
```
就像说话时的"双引号"：
- 他说"你好"（引号表示引用）
- 我需要两个"号（想要引号字符本身）

正则也一样：
- .表示任意字符（特殊含义）
- \.表示点号字符本身（转义后）
```

### 7.2 常见转义字符


**🔸 需要转义的特殊字符**
```bash
\.    # 匹配点号字符本身
\*    # 匹配星号字符本身  
\+    # 匹配加号字符本身
\?    # 匹配问号字符本身
\^    # 匹配尖角字符本身
\$    # 匹配美元符号本身
\\    # 匹配反斜杠本身
```

**💻 实际例子**
```bash
# 匹配文件扩展名 .txt
grep "\.txt" filelist.txt
# 不转义的话，.txt会匹配atxt、btxt等

# 匹配价格 $19.99
grep "\$\d+\.\d{2}" prices.txt
# $和.都需要转义

# 匹配网址
grep "https\?://[a-zA-Z0-9.-]+\.[a-z]{2,}" urls.txt
# ?和.都需要转义
```

### 7.3 转义规则总结


**🎯 什么时候需要转义**
```
1. 想匹配特殊字符本身时
   . * + ? [ ] ^ $ ( ) { } \ |

2. 在不同环境中的差异：
   - 在字符串中：可能需要双反斜杠 \\
   - 在命令行中：通常单反斜杠 \
   - 在编程语言中：根据语言而定

3. 保险的做法：
   遇到特殊字符就加反斜杠
```

> ⚠️ **新手提醒**：转义是正则表达式的难点之一，多练习才能熟练掌握！

---

## 8. 🛠️ 实战练习与应用


### 8.1 邮箱地址验证


**🔸 邮箱格式分析**
```
标准邮箱格式：username@domain.com

组成部分：
- 用户名：字母、数字、点号、下划线
- @符号：必须有
- 域名：字母、数字、连字符
- 点号：域名分隔符
- 顶级域名：2-4个字母
```

**💻 正则表达式构建**
```bash
# 简单版本
[a-zA-Z0-9._]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}

# 分解说明：
[a-zA-Z0-9._]+     # 用户名部分（字母数字点下划线，至少1个）
@                  # @符号
[a-zA-Z0-9.-]+     # 域名部分（字母数字点连字符，至少1个）
\.                 # 转义的点号
[a-zA-Z]{2,4}      # 顶级域名（2-4个字母）

# 测试示例：
grep "[a-zA-Z0-9._]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}" emails.txt
```

### 8.2 手机号码提取


**🔸 中国手机号规则**
```
格式：1开头，第二位是3-9，总共11位数字

常见格式：
13812345678
138-1234-5678  
138 1234 5678
(138) 1234-5678
```

**💻 正则表达式**
```bash
# 基础版本（纯数字）
1[3-9]\d{9}

# 包含分隔符的版本
1[3-9]\d{9}|1[3-9]\d-\d{4}-\d{4}|1[3-9]\d \d{4} \d{4}

# 实际使用：
grep "1[3-9]\d{9}" contacts.txt
```

### 8.3 日期格式匹配


**🔸 日期格式分析**
```
常见日期格式：
2023-12-25
2023/12/25
12/25/2023
25-12-2023
```

**💻 正则表达式**
```bash
# YYYY-MM-DD格式
\d{4}-\d{2}-\d{2}

# 多种分隔符
\d{4}[-/]\d{2}[-/]\d{2}

# 更灵活的年份
\d{2,4}[-/]\d{1,2}[-/]\d{1,2}

# 实际测试：
grep "\d{4}-\d{2}-\d{2}" dates.txt
```

### 8.4 IP地址匹配


**🔸 IP地址格式**
```
IPv4格式：0-255.0-255.0-255.0-255
例如：192.168.1.1

简单匹配（不严格）：
\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}

严格匹配（考虑0-255范围）会很复杂，初学建议使用简单版本
```

**💻 实际应用**
```bash
# 从日志中提取IP地址
grep "\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}" access.log

# 从配置文件中找IP
grep "^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}" network.conf
```

---

## 9. 📋 核心要点总结


### 9.1 必须掌握的基本概念


```
🔸 正则表达式本质：用特殊符号描述文本模式的匹配规则
🔸 基础元字符：. * + ? [] 是正则表达式的核心
🔸 字符类：[a-z] [0-9] 用于匹配特定范围的字符
🔸 预定义类：\d \w \s 是常用字符类的简写
🔸 锚定符：^ $ \b 用于指定匹配位置
🔸 量词：控制前面字符的出现次数
🔸 转义：用反斜杠\让特殊字符失去特殊含义
```

### 9.2 关键理解要点


**🔹 正则表达式的思维方式**
```
不是精确匹配，而是模式匹配：
- 不找具体的"张三"
- 而是找所有"姓张的人"
- 不找具体的"13812345678"  
- 而是找所有"手机号码格式"的内容
```

**🔹 元字符的组合使用**
```
单个元字符功能有限，组合使用才强大：
- [0-9]+ ：一个或多个数字
- \w{3,8}：3到8个单词字符
- ^https?://：以http或https开头
```

**🔹 转义的重要性**
```
想匹配特殊字符本身时必须转义：
- 匹配价格：\$\d+\.\d{2}
- 匹配文件：.*\.txt$
- 匹配括号：\(.*\)
```

### 9.3 实际应用价值


**💡 日常工作中的应用**
- **文本编辑器**：查找替换功能都支持正则
- **数据清洗**：从杂乱文本中提取有用信息
- **日志分析**：从大量日志中找到错误信息
- **表单验证**：检查用户输入是否符合格式要求

**🛠️ Linux系统中的应用**
- **grep命令**：文本搜索的利器
- **sed命令**：文本替换和编辑
- **awk命令**：文本处理和分析
- **shell脚本**：字符串处理和验证

### 9.4 学习建议


**📚 循序渐进的学习方法**
```
第一阶段：掌握基础元字符
- 先学会 . * + ? [] 
- 练习简单的匹配模式

第二阶段：学习字符类和锚定
- 掌握 [a-z] \d \w \s
- 学会 ^ $ \b 的使用

第三阶段：量词和转义
- 精确控制匹配次数 {n,m}
- 处理特殊字符转义 \.

第四阶段：实际项目应用
- 邮箱、手机号验证
- 日志分析、数据提取
```

**🎯 练习建议**
- **多动手**：理论配合实际操作
- **小步走**：从简单模式开始，逐步复杂化
- **多测试**：用不同的文本测试你的正则表达式
- **查文档**：遇到问题及时查阅工具的文档

> 🧠 **核心记忆口诀**：
> - 点号万能配任意，星号多少都可以
> - 加号至少要一个，问号可有也可无
> - 方括号选择字符，锚定位置要准确
> - 量词控制出现数，转义还原本意义

**最重要的建议**：正则表达式是实践性很强的技能，看懂容易写对难，一定要多练习！