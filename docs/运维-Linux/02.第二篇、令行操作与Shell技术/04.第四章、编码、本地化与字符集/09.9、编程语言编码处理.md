---
title: 9ã€ç¼–ç¨‹è¯­è¨€ç¼–ç å¤„ç†
---
## ğŸ“š ç›®å½•

1. [ç¼–ç¨‹è¯­è¨€ç¼–ç åŸºç¡€æ¦‚å¿µ](#1-ç¼–ç¨‹è¯­è¨€ç¼–ç åŸºç¡€æ¦‚å¿µ)
2. [Pythonå­—ç¬¦ä¸²ä¸å­—èŠ‚ä¸²å¤„ç†](#2-Pythonå­—ç¬¦ä¸²ä¸å­—èŠ‚ä¸²å¤„ç†)
3. [Shellè„šæœ¬ä¸­çš„ç¼–ç å¤„ç†](#3-Shellè„šæœ¬ä¸­çš„ç¼–ç å¤„ç†)
4. [C/C++å¤šå­—èŠ‚å­—ç¬¦ç¼–ç¨‹](#4-C/C++å¤šå­—èŠ‚å­—ç¬¦ç¼–ç¨‹)
5. [ç¼–ç¨‹è¯­è¨€é»˜è®¤ç¼–ç è®¾ç½®](#5-ç¼–ç¨‹è¯­è¨€é»˜è®¤ç¼–ç è®¾ç½®)
6. [æ–‡ä»¶è¯»å†™ç¼–ç æŒ‡å®š](#6-æ–‡ä»¶è¯»å†™ç¼–ç æŒ‡å®š)
7. [å­—ç¬¦ä¸²æ¯”è¾ƒä¸æ’åº](#7-å­—ç¬¦ä¸²æ¯”è¾ƒä¸æ’åº)
8. [ç¼–ç è½¬æ¢APIä½¿ç”¨](#8-ç¼–ç è½¬æ¢APIä½¿ç”¨)
9. [è·¨è¯­è¨€ç¼–ç å…¼å®¹æ€§](#9-è·¨è¯­è¨€ç¼–ç å…¼å®¹æ€§)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ’» ç¼–ç¨‹è¯­è¨€ç¼–ç åŸºç¡€æ¦‚å¿µ


### 1.1 ç¼–ç å¤„ç†çš„é‡è¦æ€§


**ğŸ”¸ ä¸ºä»€ä¹ˆç¼–ç¨‹ä¸­è¦å¤„ç†ç¼–ç ï¼Ÿ**

åœ¨ç°å®ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼š
- ä¸­æ–‡æ–‡ä»¶åæ— æ³•æ­£ç¡®æ˜¾ç¤º
- ç½‘é¡µä¸Šçš„ä¸­æ–‡å˜æˆä¹±ç 
- ä¸åŒç³»ç»Ÿé—´ä¼ è¾“æ•°æ®å‡ºç°é—®é¢˜

```
ç®€å•ç†è§£ç¼–ç ï¼š
æ–‡å­— â†’ è®¡ç®—æœºèƒ½ç†è§£çš„æ•°å­— â†’ å­˜å‚¨/ä¼ è¾“ â†’ æ•°å­— â†’ æ–‡å­—

æ¯”å¦‚ï¼š
"ä½ å¥½" â†’ [20320, 22909] â†’ å­˜å‚¨ â†’ [20320, 22909] â†’ "ä½ å¥½"

å¦‚æœç¼–ç æ–¹å¼ä¸ä¸€è‡´ï¼š
"ä½ å¥½" â†’ UTF-8ç¼–ç å­˜å‚¨ â†’ GBKè§£ç  â†’ "æµ£çŠ²ã‚½" (ä¹±ç )
```

### 1.2 ç¼–ç¨‹è¯­è¨€ä¸­çš„ç¼–ç æ¦‚å¿µ


**ğŸ”¸ å­—ç¬¦ä¸² vs å­—èŠ‚ä¸²**

```
å­—ç¬¦ä¸²ï¼ˆStringï¼‰ï¼š
- äººç±»å¯è¯»çš„æ–‡æœ¬
- "Hello ä¸–ç•Œ"
- æŠ½è±¡æ¦‚å¿µï¼Œä¸å…³å¿ƒåº•å±‚å­˜å‚¨

å­—èŠ‚ä¸²ï¼ˆBytesï¼‰ï¼š  
- è®¡ç®—æœºå®é™…å­˜å‚¨çš„æ•°æ®
- [72, 101, 108, 108, 111, 32, 228, 184, 150, 231, 149, 140]
- å…·ä½“çš„äºŒè¿›åˆ¶è¡¨ç¤º
```

**ğŸ’¡ ç¼–ç è¿‡ç¨‹ç¤ºæ„å›¾**

```
ç¨‹åºä¸­çš„å¤„ç†æµç¨‹ï¼š

ç”¨æˆ·è¾“å…¥æ–‡å­—
      â†“
å­—ç¬¦ä¸²å¯¹è±¡ (å†…å­˜ä¸­çš„æŠ½è±¡è¡¨ç¤º)
      â†“ ç¼–ç (encode)
å­—èŠ‚ä¸² (å…·ä½“çš„äºŒè¿›åˆ¶æ•°æ®)
      â†“
å­˜å‚¨åˆ°æ–‡ä»¶/ç½‘ç»œä¼ è¾“
      â†“
å­—èŠ‚ä¸² (è¯»å–çš„äºŒè¿›åˆ¶æ•°æ®)  
      â†“ è§£ç (decode)
å­—ç¬¦ä¸²å¯¹è±¡ (ç¨‹åºä¸­ä½¿ç”¨)
```

---

## 2. ğŸ Pythonå­—ç¬¦ä¸²ä¸å­—èŠ‚ä¸²å¤„ç†


### 2.1 Python3å­—ç¬¦ä¸²åŸºç¡€


**ğŸ”¸ Python3çš„å­—ç¬¦ä¸²ç»Ÿä¸€**

Python3æŠŠç¼–ç é—®é¢˜ç®€åŒ–äº†å¾ˆå¤šï¼š

```python
# Python3ä¸­ï¼Œæ‰€æœ‰å­—ç¬¦ä¸²é»˜è®¤éƒ½æ˜¯Unicode
text = "Hello ä¸–ç•Œ"
print(type(text))  # <class 'str'>

# å­—ç¬¦ä¸²å¯ä»¥åŒ…å«ä»»æ„Unicodeå­—ç¬¦
emoji_text = "Pythonå¾ˆæ£’! ğŸ‘ğŸ"
print(len(emoji_text))  # 9 (æŒ‰å­—ç¬¦è®¡ç®—ï¼Œä¸æ˜¯å­—èŠ‚)
```

**ğŸ”¸ å­—ç¬¦ä¸²ä¸å­—èŠ‚ä¸²çš„åŒºåˆ«**

```python
# å­—ç¬¦ä¸² - æŠ½è±¡çš„æ–‡æœ¬
text_str = "ä½ å¥½"
print(type(text_str))    # <class 'str'>
print(len(text_str))     # 2 (ä¸¤ä¸ªå­—ç¬¦)

# å­—èŠ‚ä¸² - å…·ä½“çš„äºŒè¿›åˆ¶æ•°æ®
text_bytes = "ä½ å¥½".encode('utf-8')
print(type(text_bytes))  # <class 'bytes'>
print(len(text_bytes))   # 6 (6ä¸ªå­—èŠ‚)
print(text_bytes)        # b'\xe4\xbd\xa0\xe5\xa5\xbd'
```

### 2.2 ç¼–ç ä¸è§£ç æ“ä½œ


**ğŸ”¸ å­—ç¬¦ä¸²ç¼–ç æˆå­—èŠ‚ä¸²**

```python
# å°†å­—ç¬¦ä¸²ç¼–ç ä¸ºä¸åŒæ ¼å¼çš„å­—èŠ‚ä¸²
text = "ä½ å¥½ä¸–ç•Œ"

# UTF-8ç¼–ç ï¼ˆæ¨èï¼‰
utf8_bytes = text.encode('utf-8')
print(utf8_bytes)  # b'\xe4\xbd\xa0\xe5\xa5\xbd\xe4\xb8\x96\xe7\x95\x8c'

# GBKç¼–ç 
gbk_bytes = text.encode('gbk')
print(gbk_bytes)   # b'\xc4\xe3\xba\xc3\xca\xc0\xbd\xe7'

# ä¸åŒç¼–ç çš„å­—èŠ‚é•¿åº¦ä¸åŒ
print(f"UTF-8: {len(utf8_bytes)} bytes")  # 12 bytes
print(f"GBK: {len(gbk_bytes)} bytes")     # 8 bytes
```

**ğŸ”¸ å­—èŠ‚ä¸²è§£ç æˆå­—ç¬¦ä¸²**

```python
# å­—èŠ‚ä¸²å¿…é¡»ç”¨æ­£ç¡®çš„ç¼–ç æ ¼å¼è§£ç 
utf8_data = b'\xe4\xbd\xa0\xe5\xa5\xbd'

# æ­£ç¡®è§£ç 
text = utf8_data.decode('utf-8')
print(text)  # "ä½ å¥½"

# é”™è¯¯è§£ç ä¼šæŠ¥é”™æˆ–äº§ç”Ÿä¹±ç 
try:
    wrong_text = utf8_data.decode('gbk')
except UnicodeDecodeError as e:
    print(f"è§£ç é”™è¯¯: {e}")
```

### 2.3 å¤„ç†ç¼–ç é”™è¯¯


**ğŸ”¸ ç¼–ç é”™è¯¯å¤„ç†ç­–ç•¥**

```python
text = "Hello ä¸–ç•Œ ğŸ˜Š"

# ä½¿ç”¨ASCIIç¼–ç ï¼ˆæ— æ³•ç¼–ç ä¸­æ–‡å’Œemojiï¼‰
try:
    ascii_bytes = text.encode('ascii')
except UnicodeEncodeError:
    print("ASCIIæ— æ³•ç¼–ç ä¸­æ–‡")
    
    # é”™è¯¯å¤„ç†ç­–ç•¥
    # 1. å¿½ç•¥é”™è¯¯å­—ç¬¦
    result1 = text.encode('ascii', errors='ignore')
    print(result1.decode('ascii'))  # "Hello "
    
    # 2. æ›¿æ¢é”™è¯¯å­—ç¬¦
    result2 = text.encode('ascii', errors='replace')
    print(result2.decode('ascii'))  # "Hello ??? ???"
    
    # 3. ä½¿ç”¨XMLå­—ç¬¦å¼•ç”¨
    result3 = text.encode('ascii', errors='xmlcharrefreplace')
    print(result3.decode('ascii'))  # "Hello &#19990;&#30028; &#128522;"
```

**ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹**

```python
def safe_encode_text(text, encoding='utf-8'):
    """å®‰å…¨åœ°ç¼–ç æ–‡æœ¬ï¼Œå¤„ç†å¯èƒ½çš„é”™è¯¯"""
    try:
        return text.encode(encoding)
    except UnicodeEncodeError:
        print(f"è­¦å‘Š: æ— æ³•ä½¿ç”¨{encoding}ç¼–ç ï¼Œæ”¹ç”¨UTF-8")
        return text.encode('utf-8')

def safe_decode_bytes(data, encodings=['utf-8', 'gbk', 'latin1']):
    """å°è¯•å¤šç§ç¼–ç è§£ç å­—èŠ‚æ•°æ®"""
    for encoding in encodings:
        try:
            return data.decode(encoding)
        except UnicodeDecodeError:
            continue
    
    # å¦‚æœéƒ½å¤±è´¥ï¼Œä½¿ç”¨é”™è¯¯æ›¿æ¢
    return data.decode('utf-8', errors='replace')

# ä½¿ç”¨ç¤ºä¾‹
text = "æµ‹è¯•æ–‡æœ¬"
encoded = safe_encode_text(text)
decoded = safe_decode_bytes(encoded)
print(decoded)  # "æµ‹è¯•æ–‡æœ¬"
```

---

## 3. ğŸš Shellè„šæœ¬ä¸­çš„ç¼–ç å¤„ç†


### 3.1 Shellç¯å¢ƒçš„ç¼–ç è®¾ç½®


**ğŸ”¸ æŸ¥çœ‹å’Œè®¾ç½®Shellç¼–ç **

```bash
# æŸ¥çœ‹å½“å‰ç¼–ç è®¾ç½®
echo $LANG              # zh_CN.UTF-8
echo $LC_ALL            # (é€šå¸¸ä¸ºç©º)
locale                  # æ˜¾ç¤ºæ‰€æœ‰æœ¬åœ°åŒ–è®¾ç½®

# ä¸´æ—¶è®¾ç½®ç¼–ç 
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8

# æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„ç¼–ç 
locale -a | grep zh     # åˆ—å‡ºä¸­æ–‡ç›¸å…³çš„ç¼–ç 
```

**ğŸ”¸ ç¼–ç è®¾ç½®çš„å±‚æ¬¡**

```
ç¼–ç è®¾ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
LC_ALL > LC_* > LANG

å®é™…åº”ç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    LC_ALL       â”‚ â† æœ€é«˜ä¼˜å…ˆçº§ï¼Œè¦†ç›–æ‰€æœ‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    LC_CTYPE     â”‚ â† å­—ç¬¦åˆ†ç±»å’Œè½¬æ¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  
â”‚    LC_MESSAGES  â”‚ â† æ¶ˆæ¯æ˜¾ç¤ºè¯­è¨€
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    LANG         â”‚ â† é»˜è®¤è®¾ç½®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ–‡ä»¶åå’Œè·¯å¾„å¤„ç†


**ğŸ”¸ å¤„ç†ä¸­æ–‡æ–‡ä»¶å**

```bash
#!/bin/bash
# ç¡®ä¿è„šæœ¬ä½¿ç”¨UTF-8ç¼–ç 
export LANG=zh_CN.UTF-8

# åˆ›å»ºåŒ…å«ä¸­æ–‡çš„æ–‡ä»¶
touch "æµ‹è¯•æ–‡ä»¶.txt"
touch "é¡¹ç›®æ–‡æ¡£.md"

# åˆ—å‡ºæ–‡ä»¶ï¼ˆæ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ï¼‰
ls -la *.txt *.md

# æ‰¹é‡å¤„ç†ä¸­æ–‡æ–‡ä»¶å
for file in *.txt; do
    if [ -f "$file" ]; then
        echo "å¤„ç†æ–‡ä»¶: $file"
        # å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ
    fi
done
```

**ğŸ”¸ æ–‡ä»¶åç¼–ç è½¬æ¢**

```bash
# è½¬æ¢æ–‡ä»¶åç¼–ç ï¼ˆä»GBKåˆ°UTF-8ï¼‰
convert_filename_encoding() {
    local old_encoding="$1"
    local new_encoding="$2"
    local filename="$3"
    
    # è½¬æ¢æ–‡ä»¶å
    new_filename=$(echo "$filename" | iconv -f "$old_encoding" -t "$new_encoding")
    
    # é‡å‘½åæ–‡ä»¶
    if [ "$filename" != "$new_filename" ]; then
        mv "$filename" "$new_filename"
        echo "é‡å‘½å: $filename -> $new_filename"
    fi
}

# æ‰¹é‡è½¬æ¢ç›®å½•ä¸‹çš„æ–‡ä»¶å
find . -name "*.txt" | while read -r file; do
    convert_filename_encoding "gbk" "utf-8" "$file"
done
```

### 3.3 è„šæœ¬å†…å®¹ç¼–ç å¤„ç†


**ğŸ”¸ å¤„ç†ä¸åŒç¼–ç çš„æ–‡æœ¬æ–‡ä»¶**

```bash
#!/bin/bash

# æ£€æµ‹æ–‡ä»¶ç¼–ç 
detect_encoding() {
    local file="$1"
    
    # ä½¿ç”¨fileå‘½ä»¤æ£€æµ‹
    file -i "$file" | cut -d'=' -f2
    
    # æˆ–ä½¿ç”¨chardetï¼ˆéœ€è¦å®‰è£…python-chardetï¼‰
    # chardet "$file" | cut -d':' -f2 | tr -d ' '
}

# è½¬æ¢æ–‡ä»¶ç¼–ç 
convert_file_encoding() {
    local input_file="$1"
    local from_encoding="$2"  
    local to_encoding="$3"
    local output_file="${input_file}.${to_encoding}"
    
    # ä½¿ç”¨iconvè½¬æ¢
    if iconv -f "$from_encoding" -t "$to_encoding" "$input_file" > "$output_file"; then
        echo "è½¬æ¢æˆåŠŸ: $input_file -> $output_file"
    else
        echo "è½¬æ¢å¤±è´¥: $input_file"
        return 1
    fi
}

# ä½¿ç”¨ç¤ºä¾‹
input_file="document.txt"
encoding=$(detect_encoding "$input_file")
echo "æ£€æµ‹åˆ°ç¼–ç : $encoding"

if [ "$encoding" != "utf-8" ]; then
    convert_file_encoding "$input_file" "$encoding" "utf-8"
fi
```

**ğŸ”¸ Shellè„šæœ¬ä¸­çš„å­—ç¬¦ä¸²å¤„ç†**

```bash
#!/bin/bash

# æ­£ç¡®å¤„ç†ä¸­æ–‡å­—ç¬¦ä¸²é•¿åº¦
get_string_length() {
    local text="$1"
    # ä½¿ç”¨wc -mè®¡ç®—å­—ç¬¦æ•°ï¼ˆè€Œä¸æ˜¯å­—èŠ‚æ•°ï¼‰
    echo "$text" | wc -m
}

# å­—ç¬¦ä¸²æˆªå–ï¼ˆæ”¯æŒä¸­æ–‡ï¼‰
substring_utf8() {
    local text="$1"
    local start="$2"
    local length="$3"
    
    # ä½¿ç”¨cutæŒ‰å­—ç¬¦æˆªå–
    echo "$text" | cut -c"$start"-$((start + length - 1))
}

# ä½¿ç”¨ç¤ºä¾‹
text="è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å­—ç¬¦ä¸²"
echo "åŸæ–‡: $text"
echo "é•¿åº¦: $(get_string_length "$text") å­—ç¬¦"
echo "æˆªå–: $(substring_utf8 "$text" 3 4)"
```

---

## 4. âš™ï¸ C/C++å¤šå­—èŠ‚å­—ç¬¦ç¼–ç¨‹


### 4.1 Cè¯­è¨€ä¸­çš„å­—ç¬¦ç±»å‹


**ğŸ”¸ å­—ç¬¦ç±»å‹åŒºåˆ«**

```c
#include <stdio.h>
#include <string.h>
#include <wchar.h>
#include <locale.h>

int main() {
    // è®¾ç½®æœ¬åœ°åŒ–ç¯å¢ƒ
    setlocale(LC_ALL, "zh_CN.UTF-8");
    
    // ASCIIå­—ç¬¦
    char ascii_char = 'A';
    printf("ASCIIå­—ç¬¦: %c (1å­—èŠ‚)\n", ascii_char);
    
    // å¤šå­—èŠ‚å­—ç¬¦ä¸²ï¼ˆUTF-8ç¼–ç çš„ä¸­æ–‡ï¼‰
    char mbstr[] = "ä½ å¥½ä¸–ç•Œ";
    printf("å¤šå­—èŠ‚å­—ç¬¦ä¸²: %s\n", mbstr);
    printf("å­—èŠ‚é•¿åº¦: %zu\n", strlen(mbstr));      // 12å­—èŠ‚
    
    // å®½å­—ç¬¦ä¸²
    wchar_t wstr[] = L"ä½ å¥½ä¸–ç•Œ";
    wprintf(L"å®½å­—ç¬¦ä¸²: %ls\n", wstr);
    wprintf(L"å­—ç¬¦é•¿åº¦: %zu\n", wcslen(wstr));     // 4å­—ç¬¦
    
    return 0;
}
```

**ğŸ”¸ å­—ç¬¦ç±»å‹å¯¹æ¯”**

```
å­—ç¬¦ç±»å‹æ¯”è¾ƒï¼š

char (1å­—èŠ‚):
- åªèƒ½è¡¨ç¤ºASCIIå­—ç¬¦ (0-127)
- 'A', '1', '\n'

å¤šå­—èŠ‚å­—ç¬¦ (1-4å­—èŠ‚):  
- å¯ä»¥è¡¨ç¤ºUnicodeå­—ç¬¦
- "ä½ " åœ¨UTF-8ä¸­å 3å­—èŠ‚: 0xE4 0xBD 0xA0

wchar_t (2æˆ–4å­—èŠ‚):
- å®½å­—ç¬¦ï¼Œä¸€ä¸ªwchar_tå­˜å‚¨ä¸€ä¸ªUnicodeå­—ç¬¦  
- L"ä½ å¥½" æ¯ä¸ªå­—ç¬¦å ä¸€ä¸ªwchar_t
```

### 4.2 å¤šå­—èŠ‚å­—ç¬¦ä¸²å¤„ç†


**ğŸ”¸ å¤šå­—èŠ‚å­—ç¬¦ä¸²æ“ä½œå‡½æ•°**

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <wchar.h>
#include <locale.h>

// è·å–å¤šå­—èŠ‚å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°
size_t mb_strlen(const char *str) {
    size_t len = 0;
    size_t bytes;
    mbstate_t state = {0};
    
    while (*str) {
        bytes = mbrlen(str, MB_CUR_MAX, &state);
        if (bytes == (size_t)-1 || bytes == (size_t)-2) {
            break;  // ç¼–ç é”™è¯¯
        }
        if (bytes == 0) {
            break;  // ç»“æŸç¬¦
        }
        
        str += bytes;
        len++;
    }
    
    return len;
}

// å¤šå­—èŠ‚å­—ç¬¦ä¸²è½¬å®½å­—ç¬¦ä¸²
wchar_t* mb_to_wc(const char *mbstr) {
    size_t len = mbstowcs(NULL, mbstr, 0) + 1;
    wchar_t *wcstr = malloc(len * sizeof(wchar_t));
    
    if (wcstr) {
        mbstowcs(wcstr, mbstr, len);
    }
    
    return wcstr;
}

int main() {
    setlocale(LC_ALL, "zh_CN.UTF-8");
    
    char text[] = "Hello ä¸–ç•Œ";
    
    printf("å­—èŠ‚é•¿åº¦: %zu\n", strlen(text));        // 11
    printf("å­—ç¬¦é•¿åº¦: %zu\n", mb_strlen(text));     // 8
    
    // è½¬æ¢ä¸ºå®½å­—ç¬¦ä¸²
    wchar_t *wtext = mb_to_wc(text);
    if (wtext) {
        wprintf(L"å®½å­—ç¬¦ä¸²: %ls\n", wtext);
        wprintf(L"å®½å­—ç¬¦é•¿åº¦: %zu\n", wcslen(wtext));  // 8
        free(wtext);
    }
    
    return 0;
}
```

### 4.3 C++ä¸­çš„ç¼–ç å¤„ç†


**ğŸ”¸ C++11åŠä»¥åçš„Unicodeæ”¯æŒ**

```cpp
#include <iostream>
#include <string>
#include <codecvt>
#include <locale>

int main() {
    // UTF-8å­—ç¬¦ä¸²
    std::string utf8_str = "Hello ä¸–ç•Œ ğŸŒ";
    std::cout << "UTF-8: " << utf8_str << std::endl;
    
    // UTF-16å­—ç¬¦ä¸²  
    std::u16string utf16_str = u"Hello ä¸–ç•Œ ğŸŒ";
    std::wcout << L"UTF-16é•¿åº¦: " << utf16_str.length() << std::endl;
    
    // UTF-32å­—ç¬¦ä¸²
    std::u32string utf32_str = U"Hello ä¸–ç•Œ ğŸŒ";
    std::cout << "UTF-32é•¿åº¦: " << utf32_str.length() << std::endl;
    
    // ç¼–ç è½¬æ¢ï¼ˆC++11-C++17ï¼‰
    std::wstring_convert<std::codecvt_utf8<char16_t>, char16_t> convert;
    
    // UTF-8 to UTF-16
    std::u16string utf16_converted = convert.from_bytes(utf8_str);
    
    // UTF-16 to UTF-8  
    std::string utf8_converted = convert.to_bytes(utf16_str);
    std::cout << "è½¬æ¢å: " << utf8_converted << std::endl;
    
    return 0;
}
```

---

## 5. ğŸ”§ ç¼–ç¨‹è¯­è¨€é»˜è®¤ç¼–ç è®¾ç½®


### 5.1 Pythonç¼–ç è®¾ç½®


**ğŸ”¸ Pythonæºæ–‡ä»¶ç¼–ç å£°æ˜**

```python
# -*- coding: utf-8 -*-
# æˆ–è€…
# coding: utf-8
# æˆ–è€…  
#!/usr/bin/env python3
# vim: set fileencoding=utf-8 :

"""
Python3é»˜è®¤ä½¿ç”¨UTF-8ç¼–ç ï¼Œä½†å£°æ˜ç¼–ç æ˜¯å¥½ä¹ æƒ¯
ç‰¹åˆ«æ˜¯æ–‡ä»¶ä¸­åŒ…å«ä¸­æ–‡æ³¨é‡Šæˆ–å­—ç¬¦ä¸²æ—¶
"""

def main():
    # Python3ä¸­ï¼Œå­—ç¬¦ä¸²é»˜è®¤æ˜¯Unicode
    message = "Pythonç¼–ç å¤„ç†å¾ˆç®€å•ï¼"
    print(message)

if __name__ == "__main__":
    main()
```

**ğŸ”¸ Pythonè¿è¡Œæ—¶ç¼–ç è®¾ç½®**

```python
import sys
import locale

def check_encoding_settings():
    """æ£€æŸ¥Pythonçš„ç¼–ç è®¾ç½®"""
    print("=== Pythonç¼–ç è®¾ç½® ===")
    print(f"é»˜è®¤ç¼–ç : {sys.getdefaultencoding()}")           # utf-8
    print(f"æ–‡ä»¶ç³»ç»Ÿç¼–ç : {sys.getfilesystemencoding()}")    # utf-8
    print(f"stdoutç¼–ç : {sys.stdout.encoding}")             # utf-8
    print(f"ç³»ç»Ÿæœ¬åœ°ç¼–ç : {locale.getpreferredencoding()}")  # UTF-8
    
    print("\n=== ç¯å¢ƒå˜é‡ ===")
    import os
    print(f"LANG: {os.environ.get('LANG', 'æœªè®¾ç½®')}")
    print(f"LC_ALL: {os.environ.get('LC_ALL', 'æœªè®¾ç½®')}")

# è®¾ç½®æ ‡å‡†è¾“å‡ºç¼–ç ï¼ˆå¦‚æœéœ€è¦ï¼‰
def ensure_utf8_output():
    """ç¡®ä¿è¾“å‡ºä½¿ç”¨UTF-8ç¼–ç """
    if sys.stdout.encoding.lower() != 'utf-8':
        import codecs
        sys.stdout = codecs.getwriter('utf-8')(sys.stdout.buffer)
        sys.stderr = codecs.getwriter('utf-8')(sys.stderr.buffer)

if __name__ == "__main__":
    check_encoding_settings()
```

### 5.2 Javaç¼–ç è®¾ç½®


**ğŸ”¸ Javaç¨‹åºç¼–ç å¤„ç†**

```java
import java.nio.charset.Charset;
import java.nio.charset.StandardCharsets;
import java.io.*;

public class EncodingDemo {
    public static void main(String[] args) {
        // æ£€æŸ¥Javaç¼–ç è®¾ç½®
        System.out.println("=== Javaç¼–ç è®¾ç½® ===");
        System.out.println("é»˜è®¤å­—ç¬¦é›†: " + Charset.defaultCharset());
        System.out.println("æ–‡ä»¶ç¼–ç : " + System.getProperty("file.encoding"));
        System.out.println("æ§åˆ¶å°ç¼–ç : " + System.getProperty("console.encoding"));
        
        // å­—ç¬¦ä¸²ç¼–ç ç¤ºä¾‹
        String text = "Javaç¼–ç å¤„ç†ç¤ºä¾‹";
        
        try {
            // ç¼–ç ä¸ºå­—èŠ‚æ•°ç»„
            byte[] utf8Bytes = text.getBytes(StandardCharsets.UTF_8);
            byte[] gbkBytes = text.getBytes("GBK");
            
            System.out.println("UTF-8å­—èŠ‚æ•°: " + utf8Bytes.length);
            System.out.println("GBKå­—èŠ‚æ•°: " + gbkBytes.length);
            
            // è§£ç å­—èŠ‚æ•°ç»„
            String utf8Text = new String(utf8Bytes, StandardCharsets.UTF_8);
            String gbkText = new String(gbkBytes, "GBK");
            
            System.out.println("UTF-8è§£ç : " + utf8Text);
            System.out.println("GBKè§£ç : " + gbkText);
            
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }
    }
}
```

**ğŸ’¡ Javaç¼–è¯‘å’Œè¿è¡Œæ—¶ç¼–ç è®¾ç½®**

```bash
# ç¼–è¯‘æ—¶æŒ‡å®šç¼–ç 
javac -encoding UTF-8 EncodingDemo.java

# è¿è¡Œæ—¶æŒ‡å®šç¼–ç 
java -Dfile.encoding=UTF-8 EncodingDemo

# JVMå‚æ•°è®¾ç½®
java -Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8 EncodingDemo
```

### 5.3 Webå¼€å‘ç¼–ç è®¾ç½®


**ğŸ”¸ HTMLç¼–ç å£°æ˜**

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- æœ€é‡è¦ï¼šå£°æ˜é¡µé¢ç¼–ç  -->
    <meta charset="UTF-8">
    
    <!-- ç§»åŠ¨ç«¯é€‚é… -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ç½‘é¡µç¼–ç ç¤ºä¾‹</title>
</head>
<body>
    <h1>ä¸­æ–‡å†…å®¹æ­£å¸¸æ˜¾ç¤º</h1>
    <p>è¿™æ˜¯ä¸€æ®µåŒ…å«ä¸­æ–‡çš„ç½‘é¡µå†…å®¹ã€‚</p>
</body>
</html>
```

**ğŸ”¸ HTTPå“åº”å¤´ç¼–ç è®¾ç½®**

```python
# Python Flaskç¤ºä¾‹
from flask import Flask, Response

app = Flask(__name__)

@app.route('/')
def index():
    content = """
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>ä¸­æ–‡é¡µé¢</title>
    </head>
    <body>
        <h1>ä½ å¥½ï¼Œä¸–ç•Œï¼</h1>
    </body>
    </html>
    """
    
    # è®¾ç½®æ­£ç¡®çš„Content-Type
    response = Response(content)
    response.headers['Content-Type'] = 'text/html; charset=utf-8'
    return response

if __name__ == '__main__':
    app.run(debug=True)
```

---

## 6. ğŸ“ æ–‡ä»¶è¯»å†™ç¼–ç æŒ‡å®š


### 6.1 Pythonæ–‡ä»¶æ“ä½œç¼–ç 


**ğŸ”¸ æ­£ç¡®çš„æ–‡ä»¶è¯»å†™æ–¹å¼**

```python
# å†™å…¥æ–‡ä»¶æ—¶æŒ‡å®šç¼–ç 
def write_file_with_encoding(filename, content, encoding='utf-8'):
    """å®‰å…¨åœ°å†™å…¥æ–‡ä»¶ï¼ŒæŒ‡å®šç¼–ç """
    try:
        with open(filename, 'w', encoding=encoding) as f:
            f.write(content)
        print(f"æˆåŠŸå†™å…¥æ–‡ä»¶: {filename} (ç¼–ç : {encoding})")
    except UnicodeEncodeError as e:
        print(f"ç¼–ç é”™è¯¯: {e}")
    except IOError as e:
        print(f"æ–‡ä»¶æ“ä½œé”™è¯¯: {e}")

# è¯»å–æ–‡ä»¶æ—¶æŒ‡å®šç¼–ç   
def read_file_with_encoding(filename, encoding='utf-8'):
    """å®‰å…¨åœ°è¯»å–æ–‡ä»¶ï¼ŒæŒ‡å®šç¼–ç """
    try:
        with open(filename, 'r', encoding=encoding) as f:
            return f.read()
    except UnicodeDecodeError as e:
        print(f"è§£ç é”™è¯¯: {e}")
        # å°è¯•å…¶ä»–ç¼–ç 
        return read_file_auto_detect(filename)
    except IOError as e:
        print(f"æ–‡ä»¶æ“ä½œé”™è¯¯: {e}")
        return None

# è‡ªåŠ¨æ£€æµ‹ç¼–ç 
def read_file_auto_detect(filename):
    """è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç å¹¶è¯»å–"""
    import chardet
    
    # å…ˆè¯»å–éƒ¨åˆ†å†…å®¹æ£€æµ‹ç¼–ç 
    with open(filename, 'rb') as f:
        raw_data = f.read()
    
    # æ£€æµ‹ç¼–ç 
    detected = chardet.detect(raw_data)
    encoding = detected.get('encoding', 'utf-8')
    confidence = detected.get('confidence', 0)
    
    print(f"æ£€æµ‹åˆ°ç¼–ç : {encoding} (ç½®ä¿¡åº¦: {confidence:.2f})")
    
    # ç”¨æ£€æµ‹åˆ°çš„ç¼–ç è¯»å–æ–‡ä»¶
    try:
        return raw_data.decode(encoding)
    except UnicodeDecodeError:
        # å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œä½¿ç”¨æ›¿æ¢ç­–ç•¥
        return raw_data.decode('utf-8', errors='replace')

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    content = "è¿™æ˜¯ä¸€ä¸ªåŒ…å«ä¸­æ–‡çš„æµ‹è¯•æ–‡ä»¶\nåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼šÂ©Â®â„¢"
    
    # å†™å…¥ä¸åŒç¼–ç çš„æ–‡ä»¶
    write_file_with_encoding("test_utf8.txt", content, "utf-8")
    write_file_with_encoding("test_gbk.txt", content, "gbk")
    
    # è¯»å–æ–‡ä»¶
    print("UTF-8æ–‡ä»¶å†…å®¹:")
    print(read_file_with_encoding("test_utf8.txt", "utf-8"))
    
    print("\nè‡ªåŠ¨æ£€æµ‹ç¼–ç :")
    print(read_file_auto_detect("test_gbk.txt"))
```

### 6.2 é…ç½®æ–‡ä»¶ç¼–ç å¤„ç†


**ğŸ”¸ å¤„ç†ä¸åŒç¼–ç çš„é…ç½®æ–‡ä»¶**

```python
import configparser
import json
import os

class ConfigManager:
    """é…ç½®æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ”¯æŒä¸åŒç¼–ç """
    
    def __init__(self, config_file, encoding='utf-8'):
        self.config_file = config_file
        self.encoding = encoding
        self.config = configparser.ConfigParser()
    
    def load_config(self):
        """åŠ è½½é…ç½®æ–‡ä»¶"""
        if not os.path.exists(self.config_file):
            print(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {self.config_file}")
            return False
            
        try:
            # å°è¯•æŒ‡å®šç¼–ç è¯»å–
            with open(self.config_file, 'r', encoding=self.encoding) as f:
                self.config.read_file(f)
            return True
        except UnicodeDecodeError:
            # å°è¯•å…¶ä»–ç¼–ç 
            for encoding in ['gbk', 'latin1', 'cp1252']:
                try:
                    with open(self.config_file, 'r', encoding=encoding) as f:
                        self.config.read_file(f)
                    print(f"ä½¿ç”¨ç¼–ç  {encoding} æˆåŠŸè¯»å–é…ç½®æ–‡ä»¶")
                    self.encoding = encoding
                    return True
                except UnicodeDecodeError:
                    continue
            
            print("æ— æ³•è¯»å–é…ç½®æ–‡ä»¶ï¼šç¼–ç ä¸æ”¯æŒ")
            return False
    
    def save_config(self):
        """ä¿å­˜é…ç½®æ–‡ä»¶"""
        try:
            with open(self.config_file, 'w', encoding='utf-8') as f:
                self.config.write(f)
            print("é…ç½®æ–‡ä»¶å·²ä¿å­˜ä¸ºUTF-8ç¼–ç ")
        except Exception as e:
            print(f"ä¿å­˜é…ç½®æ–‡ä»¶å¤±è´¥: {e}")

# JSONé…ç½®æ–‡ä»¶å¤„ç†
def load_json_config(filename):
    """åŠ è½½JSONé…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨å¤„ç†ç¼–ç """
    encodings = ['utf-8', 'gbk', 'utf-8-sig']  # utf-8-sigå¤„ç†BOM
    
    for encoding in encodings:
        try:
            with open(filename, 'r', encoding=encoding) as f:
                return json.load(f)
        except UnicodeDecodeError:
            continue
        except json.JSONDecodeError as e:
            print(f"JSONæ ¼å¼é”™è¯¯: {e}")
            return None
    
    print(f"æ— æ³•è¯»å–JSONæ–‡ä»¶: {filename}")
    return None

def save_json_config(filename, data):
    """ä¿å­˜JSONé…ç½®æ–‡ä»¶"""
    try:
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        print(f"JSONé…ç½®å·²ä¿å­˜: {filename}")
    except Exception as e:
        print(f"ä¿å­˜JSONé…ç½®å¤±è´¥: {e}")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # INIé…ç½®æ–‡ä»¶ç¤ºä¾‹
    config_mgr = ConfigManager("app.ini")
    if config_mgr.load_config():
        config_mgr.config['DEFAULT'] = {
            'app_name': 'æˆ‘çš„åº”ç”¨',
            'version': '1.0.0',
            'description': 'è¿™æ˜¯ä¸€ä¸ªæ”¯æŒä¸­æ–‡çš„åº”ç”¨ç¨‹åº'
        }
        config_mgr.save_config()
    
    # JSONé…ç½®æ–‡ä»¶ç¤ºä¾‹
    json_config = {
        "åº”ç”¨åç§°": "æµ‹è¯•åº”ç”¨",
        "è®¾ç½®": {
            "è¯­è¨€": "zh-CN",
            "ä¸»é¢˜": "æ·±è‰²æ¨¡å¼"
        }
    }
    save_json_config("config.json", json_config)
    loaded_config = load_json_config("config.json")
    print("åŠ è½½çš„JSONé…ç½®:", loaded_config)
```

---

## 7. ğŸ”¤ å­—ç¬¦ä¸²æ¯”è¾ƒä¸æ’åº


### 7.1 ä¸åŒç¼–ç ä¸‹çš„å­—ç¬¦ä¸²æ¯”è¾ƒ


**ğŸ”¸ å­—ç¬¦ä¸²æ¯”è¾ƒçš„ç¼–ç é—®é¢˜**

```python
import unicodedata

def compare_strings_demo():
    """æ¼”ç¤ºä¸åŒç¼–ç ä¸‹çš„å­—ç¬¦ä¸²æ¯”è¾ƒé—®é¢˜"""
    
    # çœ‹èµ·æ¥ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå®é™…ç¼–ç ä¸åŒ
    str1 = "cafÃ©"  # ä½¿ç”¨ç»„åˆå­—ç¬¦ Ã©
    str2 = "cafe\u0301"  # ä½¿ç”¨ e + ç»„åˆéŸ³è°ƒç¬¦å·
    
    print(f"å­—ç¬¦ä¸²1: {str1!r}")
    print(f"å­—ç¬¦ä¸²2: {str2!r}")
    print(f"çœ‹èµ·æ¥ç›¸åŒ: {str1 == str2}")  # False!
    print(f"é•¿åº¦: {len(str1)} vs {len(str2)}")  # 4 vs 5
    
    # è§„èŒƒåŒ–åæ¯”è¾ƒ
    str1_normalized = unicodedata.normalize('NFC', str1)
    str2_normalized = unicodedata.normalize('NFC', str2)
    
    print(f"è§„èŒƒåŒ–åç›¸åŒ: {str1_normalized == str2_normalized}")  # True

def safe_string_compare(s1, s2, normalize=True):
    """å®‰å…¨çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè€ƒè™‘Unicodeè§„èŒƒåŒ–"""
    if normalize:
        s1 = unicodedata.normalize('NFC', s1)
        s2 = unicodedata.normalize('NFC', s2)
    
    return s1 == s2

# ä½¿ç”¨ç¤ºä¾‹
compare_strings_demo()
print(safe_string_compare("cafÃ©", "cafe\u0301"))  # True
```

### 7.2 æœ¬åœ°åŒ–æ’åº


**ğŸ”¸ ä¸­æ–‡å­—ç¬¦ä¸²æ’åº**

```python
import locale
import collate  # éœ€è¦å®‰è£…: pip install pyicu

def chinese_sort_demo():
    """ä¸­æ–‡å­—ç¬¦ä¸²æ’åºç¤ºä¾‹"""
    
    # ä¸­æ–‡äººååˆ—è¡¨
    names = ["å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­", "é™ˆä¸ƒ", "é˜¿æ˜"]
    
    # é»˜è®¤æ’åºï¼ˆæŒ‰Unicodeç ç‚¹ï¼‰
    default_sorted = sorted(names)
    print("é»˜è®¤æ’åº:", default_sorted)
    
    # è®¾ç½®ä¸­æ–‡æœ¬åœ°åŒ–
    try:
        locale.setlocale(locale.LC_ALL, 'zh_CN.UTF-8')
        locale_sorted = sorted(names, key=locale.strxfrm)
        print("æœ¬åœ°åŒ–æ’åº:", locale_sorted)
    except locale.Error:
        print("æœ¬åœ°åŒ–è®¾ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ’åº")
    
    # æ‹¼éŸ³æ’åºï¼ˆéœ€è¦é¢å¤–åº“ï¼‰
    try:
        from pypinyin import lazy_pinyin
        pinyin_sorted = sorted(names, key=lambda x: lazy_pinyin(x))
        print("æ‹¼éŸ³æ’åº:", pinyin_sorted)
    except ImportError:
        print("pypinyinæœªå®‰è£…ï¼Œè·³è¿‡æ‹¼éŸ³æ’åº")

def multilingual_sort():
    """å¤šè¯­è¨€æ–‡æœ¬æ’åº"""
    texts = [
        "Apple", "è‹¹æœ", "ã‚Šã‚“ã”",  # è‹±æ–‡ã€ä¸­æ–‡ã€æ—¥æ–‡
        "Banana", "é¦™è•‰", "ãƒãƒŠãƒŠ",
        "Cherry", "æ¨±æ¡ƒ", "ã•ãã‚‰ã‚“ã¼"
    ]
    
    print("åŸå§‹é¡ºåº:", texts)
    print("é»˜è®¤æ’åº:", sorted(texts))
    
    # æŒ‰è¯­è¨€åˆ†ç»„æ’åº
    def language_key(text):
        # ç®€å•çš„è¯­è¨€æ£€æµ‹
        if any('\u4e00' <= c <= '\u9fff' for c in text):
            return (1, text)  # ä¸­æ–‡
        elif any('\u3040' <= c <= '\u309f' or '\u30a0' <= c <= '\u30ff' for c in text):
            return (2, text)  # æ—¥æ–‡
        else:
            return (0, text)  # å…¶ä»–ï¼ˆè‹±æ–‡ï¼‰
    
    grouped_sorted = sorted(texts, key=language_key)
    print("æŒ‰è¯­è¨€åˆ†ç»„æ’åº:", grouped_sorted)

if __name__ == "__main__":
    chinese_sort_demo()
    print()
    multilingual_sort()
```

### 7.3 è‡ªç„¶æ’åº


**ğŸ”¸ æ–‡ä»¶åè‡ªç„¶æ’åº**

```python
import re

def natural_sort_key(text):
    """è‡ªç„¶æ’åºçš„é”®å‡½æ•°"""
    def convert(t):
        return int(t) if t.isdigit() else t.lower()
    
    return [convert(c) for c in re.split(r'(\d+)', text)]

def file_sort_demo():
    """æ–‡ä»¶åæ’åºç¤ºä¾‹"""
    
    filenames = [
        "æ–‡ä»¶1.txt", "æ–‡ä»¶10.txt", "æ–‡ä»¶2.txt",
        "æ–‡ä»¶20.txt", "æ–‡ä»¶3.txt", "file1.txt",
        "file10.txt", "file2.txt"
    ]
    
    print("åŸå§‹é¡ºåº:", filenames)
    print("é»˜è®¤æ’åº:", sorted(filenames))
    print("è‡ªç„¶æ’åº:", sorted(filenames, key=natural_sort_key))
    
    # å¤„ç†åŒ…å«ä¸­æ–‡å’Œæ•°å­—çš„å¤æ‚æ–‡ä»¶å
    complex_names = [
        "é¡¹ç›®æŠ¥å‘Š_v1.2.pdf",
        "é¡¹ç›®æŠ¥å‘Š_v1.10.pdf", 
        "é¡¹ç›®æŠ¥å‘Š_v1.1.pdf",
        "æµ‹è¯•æ•°æ®_2023_01.xlsx",
        "æµ‹è¯•æ•°æ®_2023_10.xlsx",
        "æµ‹è¯•æ•°æ®_2023_02.xlsx"
    ]
    
    print("\nå¤æ‚æ–‡ä»¶å:")
    print("è‡ªç„¶æ’åº:", sorted(complex_names, key=natural_sort_key))

if __name__ == "__main__":
    file_sort_demo()
```

---

## 8. ğŸ”„ ç¼–ç è½¬æ¢APIä½¿ç”¨


### 8.1 Pythonç¼–ç è½¬æ¢


**ğŸ”¸ ä½¿ç”¨codecsæ¨¡å—è¿›è¡Œç¼–ç è½¬æ¢**

```python
import codecs
import io

class EncodingConverter:
    """ç¼–ç è½¬æ¢å·¥å…·ç±»"""
    
    def __init__(self):
        # å¸¸ç”¨ç¼–ç åˆ—è¡¨
        self.common_encodings = [
            'utf-8', 'gbk', 'gb2312', 'big5',
            'latin1', 'cp1252', 'iso-8859-1'
        ]
    
    def detect_encoding(self, data):
        """æ£€æµ‹æ•°æ®çš„ç¼–ç æ ¼å¼"""
        if isinstance(data, str):
            return 'unicode'
            
        import chardet
        result = chardet.detect(data)
        return result.get('encoding', 'unknown')
    
    def convert_encoding(self, data, from_encoding, to_encoding):
        """è½¬æ¢ç¼–ç æ ¼å¼"""
        try:
            if isinstance(data, bytes):
                # å­—èŠ‚ä¸² -> å­—ç¬¦ä¸² -> å­—èŠ‚ä¸²
                text = data.decode(from_encoding)
                return text.encode(to_encoding)
            elif isinstance(data, str):
                # å­—ç¬¦ä¸² -> å­—èŠ‚ä¸²
                return data.encode(to_encoding)
            else:
                raise ValueError("ä¸æ”¯æŒçš„æ•°æ®ç±»å‹")
                
        except (UnicodeDecodeError, UnicodeEncodeError) as e:
            print(f"ç¼–ç è½¬æ¢é”™è¯¯: {e}")
            return None
    
    def convert_file(self, input_file, output_file, from_encoding, to_encoding):
        """è½¬æ¢æ–‡ä»¶ç¼–ç """
        try:
            # è¯»å–æºæ–‡ä»¶
            with open(input_file, 'r', encoding=from_encoding) as f:
                content = f.read()
            
            # å†™å…¥ç›®æ ‡æ–‡ä»¶
            with open(output_file, 'w', encoding=to_encoding) as f:
                f.write(content)
            
            print(f"æ–‡ä»¶ç¼–ç è½¬æ¢å®Œæˆ: {input_file} ({from_encoding}) -> {output_file} ({to_encoding})")
            return True
            
        except Exception as e:
            print(f"æ–‡ä»¶è½¬æ¢å¤±è´¥: {e}")
            return False
    
    def batch_convert_files(self, file_list, from_encoding, to_encoding):
        """æ‰¹é‡è½¬æ¢æ–‡ä»¶ç¼–ç """
        success_count = 0
        
        for input_file in file_list:
            output_file = f"{input_file}.{to_encoding}"
            if self.convert_file(input_file, output_file, from_encoding, to_encoding):
                success_count += 1
        
        print(f"æ‰¹é‡è½¬æ¢å®Œæˆ: {success_count}/{len(file_list)} ä¸ªæ–‡ä»¶")

# ä½¿ç”¨ç¤ºä¾‹
def encoding_conversion_demo():
    converter = EncodingConverter()
    
    # æ–‡æœ¬ç¼–ç è½¬æ¢
    text = "è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼ŒåŒ…å«ä¸­æ–‡å­—ç¬¦ã€‚"
    
    # è½¬æ¢ä¸ºä¸åŒç¼–ç çš„å­—èŠ‚ä¸²
    utf8_bytes = converter.convert_encoding(text, 'unicode', 'utf-8')
    gbk_bytes = converter.convert_encoding(text, 'unicode', 'gbk')
    
    print(f"UTF-8: {utf8_bytes}")
    print(f"GBK: {gbk_bytes}")
    
    # å­—èŠ‚ä¸²ä¹‹é—´çš„è½¬æ¢
    gbk_to_utf8 = converter.convert_encoding(gbk_bytes, 'gbk', 'utf-8')
    print(f"GBK->UTF-8: {gbk_to_utf8}")
    
    # éªŒè¯è½¬æ¢ç»“æœ
    restored_text = gbk_to_utf8.decode('utf-8')
    print(f"æ¢å¤çš„æ–‡æœ¬: {restored_text}")
    print(f"è½¬æ¢æ­£ç¡®: {text == restored_text}")

if __name__ == "__main__":
    encoding_conversion_demo()
```

### 8.2 Shellè„šæœ¬ç¼–ç è½¬æ¢


**ğŸ”¸ ä½¿ç”¨iconvè¿›è¡Œæ‰¹é‡ç¼–ç è½¬æ¢**

```bash
#!/bin/bash

# ç¼–ç è½¬æ¢å‡½æ•°
convert_encoding() {
    local input_file="$1"
    local from_encoding="$2"
    local to_encoding="$3"
    local output_file="$4"
    
    # å¦‚æœæ²¡æœ‰æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œä½¿ç”¨é»˜è®¤å‘½å
    if [ -z "$output_file" ]; then
        output_file="${input_file%.*}_${to_encoding}.${input_file##*.}"
    fi
    
    # æ‰§è¡Œè½¬æ¢
    if iconv -f "$from_encoding" -t "$to_encoding" "$input_file" > "$output_file"; then
        echo "è½¬æ¢æˆåŠŸ: $input_file -> $output_file"
        return 0
    else
        echo "è½¬æ¢å¤±è´¥: $input_file"
        return 1
    fi
}

# æ‰¹é‡è½¬æ¢ç›®å½•ä¸‹çš„æ–‡ä»¶
batch_convert() {
    local directory="$1"
    local pattern="$2"
    local from_encoding="$3"
    local to_encoding="$4"
    
    local success_count=0
    local total_count=0
    
    find "$directory" -name "$pattern" | while read -r file; do
        total_count=$((total_count + 1))
        
        if convert_encoding "$file" "$from_encoding" "$to_encoding"; then
            success_count=$((success_count + 1))
        fi
    done
    
    echo "æ‰¹é‡è½¬æ¢å®Œæˆ: $success_count/$total_count"
}

# æ£€æµ‹æ–‡ä»¶ç¼–ç 
detect_file_encoding() {
    local file="$1"
    
    # ä½¿ç”¨fileå‘½ä»¤æ£€æµ‹
    echo "ä½¿ç”¨fileå‘½ä»¤æ£€æµ‹:"
    file -i "$file"
    
    # ä½¿ç”¨chardetæ£€æµ‹ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    if command -v chardet > /dev/null; then
        echo "ä½¿ç”¨chardetæ£€æµ‹:"
        chardet "$file"
    fi
}

# ä¸»å‡½æ•°
main() {
    case "$1" in
        "convert")
            if [ $# -lt 4 ]; then
                echo "ç”¨æ³•: $0 convert <è¾“å…¥æ–‡ä»¶> <æºç¼–ç > <ç›®æ ‡ç¼–ç > [è¾“å‡ºæ–‡ä»¶]"
                exit 1
            fi
            convert_encoding "$2" "$3" "$4" "$5"
            ;;
        "batch")
            if [ $# -lt 5 ]; then
                echo "ç”¨æ³•: $0 batch <ç›®å½•> <æ–‡ä»¶æ¨¡å¼> <æºç¼–ç > <ç›®æ ‡ç¼–ç >"
                exit 1
            fi
            batch_convert "$2" "$3" "$4" "$5"
            ;;
        "detect")
            if [ $# -lt 2 ]; then
                echo "ç”¨æ³•: $0 detect <æ–‡ä»¶>"
                exit 1
            fi
            detect_file_encoding "$2"
            ;;
        *)
            echo "ç”¨æ³•:"
            echo "  $0 convert <è¾“å…¥æ–‡ä»¶> <æºç¼–ç > <ç›®æ ‡ç¼–ç > [è¾“å‡ºæ–‡ä»¶]"
            echo "  $0 batch <ç›®å½•> <æ–‡ä»¶æ¨¡å¼> <æºç¼–ç > <ç›®æ ‡ç¼–ç >"
            echo "  $0 detect <æ–‡ä»¶>"
            echo ""
            echo "ç¤ºä¾‹:"
            echo "  $0 convert doc.txt gbk utf-8"
            echo "  $0 batch ./docs '*.txt' gbk utf-8"
            echo "  $0 detect mystery.txt"
            ;;
    esac
}

# è¿è¡Œä¸»å‡½æ•°
main "$@"
```

---

## 9. ğŸŒ è·¨è¯­è¨€ç¼–ç å…¼å®¹æ€§


### 9.1 æ•°æ®äº¤æ¢æ ¼å¼ç¼–ç 


**ğŸ”¸ JSONæ•°æ®ç¼–ç å¤„ç†**

```python
import json
import requests

class CrossLanguageDataHandler:
    """è·¨è¯­è¨€æ•°æ®å¤„ç†å™¨"""
    
    def __init__(self):
        self.default_encoding = 'utf-8'
    
    def create_json_data(self, data):
        """åˆ›å»ºæ ‡å‡†JSONæ•°æ®"""
        return json.dumps(data, ensure_ascii=False, indent=2)
    
    def parse_json_safely(self, json_str):
        """å®‰å…¨è§£æJSONæ•°æ®"""
        try:
            return json.loads(json_str)
        except json.JSONDecodeError as e:
            print(f"JSONè§£æé”™è¯¯: {e}")
            return None
    
    def handle_api_response(self, response_bytes):
        """å¤„ç†APIå“åº”æ•°æ®"""
        # å°è¯•ä¸åŒç¼–ç è§£æ
        encodings = ['utf-8', 'utf-8-sig', 'gbk', 'latin1']
        
        for encoding in encodings:
            try:
                text = response_bytes.decode(encoding)
                data = self.parse_json_safely(text)
                if data is not None:
                    print(f"ä½¿ç”¨ç¼–ç  {encoding} æˆåŠŸè§£æ")
                    return data
            except UnicodeDecodeError:
                continue
        
        print("æ— æ³•è§£æAPIå“åº”")
        return None

# å®é™…åº”ç”¨ç¤ºä¾‹
def api_integration_example():
    """APIé›†æˆç¼–ç å¤„ç†ç¤ºä¾‹"""
    handler = CrossLanguageDataHandler()
    
    # å‡†å¤‡å‘é€çš„æ•°æ®
    send_data = {
        "ç”¨æˆ·å": "å¼ ä¸‰",
        "é‚®ç®±": "zhangsan@example.com",
        "åœ°å€": {
            "åŸå¸‚": "åŒ—äº¬",
            "åŒºåŸŸ": "æœé˜³åŒº"
        },
        "æ ‡ç­¾": ["VIPå®¢æˆ·", "æ´»è·ƒç”¨æˆ·"]
    }
    
    # è½¬æ¢ä¸ºJSON
    json_data = handler.create_json_data(send_data)
    print("å‘é€æ•°æ®:")
    print(json_data)
    
    # æ¨¡æ‹Ÿæ¥æ”¶æ•°æ®ï¼ˆä¸åŒç¼–ç ï¼‰
    response_utf8 = json_data.encode('utf-8')
    response_gbk = json_data.encode('gbk')
    
    print("\nå¤„ç†UTF-8å“åº”:")
    result1 = handler.handle_api_response(response_utf8)
    
    print("\nå¤„ç†GBKå“åº”:")  
    result2 = handler.handle_api_response(response_gbk)

if __name__ == "__main__":
    api_integration_example()
```

### 9.2 æ•°æ®åº“ç¼–ç å¤„ç†


**ğŸ”¸ æ•°æ®åº“è¿æ¥ç¼–ç è®¾ç½®**

```python
import sqlite3
import mysql.connector
from sqlalchemy import create_engine, text

class DatabaseEncodingHandler:
    """æ•°æ®åº“ç¼–ç å¤„ç†å™¨"""
    
    def __init__(self):
        pass
    
    def setup_sqlite_encoding(self, db_path):
        """SQLiteç¼–ç è®¾ç½®"""
        conn = sqlite3.connect(db_path)
        
        # è®¾ç½®è¿æ¥ç¼–ç 
        conn.execute("PRAGMA encoding = 'UTF-8'")
        
        # åˆ›å»ºæµ‹è¯•è¡¨
        conn.execute("""
            CREATE TABLE IF NOT EXISTS users (
                id INTEGER PRIMARY KEY,
                name TEXT,
                email TEXT,
                address TEXT
            )
        """)
        
        # æ’å…¥ä¸­æ–‡æ•°æ®
        test_data = [
            (1, "å¼ ä¸‰", "zhangsan@test.com", "åŒ—äº¬å¸‚æœé˜³åŒº"),
            (2, "æå››", "lisi@test.com", "ä¸Šæµ·å¸‚æµ¦ä¸œåŒº"),
            (3, "ç‹äº”", "wangwu@test.com", "æ·±åœ³å¸‚å—å±±åŒº")
        ]
        
        conn.executemany(
            "INSERT OR REPLACE INTO users (id, name, email, address) VALUES (?, ?, ?, ?)",
            test_data
        )
        conn.commit()
        
        # æŸ¥è¯¢æ•°æ®éªŒè¯ç¼–ç 
        cursor = conn.execute("SELECT * FROM users")
        results = cursor.fetchall()
        
        print("SQLiteæ•°æ®:")
        for row in results:
            print(f"ID: {row[0]}, å§“å: {row[1]}, é‚®ç®±: {row[2]}, åœ°å€: {row[3]}")
        
        conn.close()
        return True
    
    def setup_mysql_encoding(self, host, user, password, database):
        """MySQLç¼–ç è®¾ç½®"""
        try:
            # è¿æ¥æ—¶æŒ‡å®šç¼–ç 
            conn = mysql.connector.connect(
                host=host,
                user=user,
                password=password,
                database=database,
                charset='utf8mb4',  # æ”¯æŒå®Œæ•´Unicode
                collation='utf8mb4_unicode_ci'
            )
            
            cursor = conn.cursor()
            
            # è®¾ç½®è¿æ¥ç¼–ç 
            cursor.execute("SET NAMES utf8mb4")
            cursor.execute("SET CHARACTER SET utf8mb4")
            cursor.execute("SET character_set_connection=utf8mb4")
            
            # åˆ›å»ºè¡¨æ—¶æŒ‡å®šç¼–ç 
            cursor.execute("""
                CREATE TABLE IF NOT EXISTS users (
                    id INT AUTO_INCREMENT PRIMARY KEY,
                    name VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
                    email VARCHAR(255),
                    address TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
                ) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
            """)
            
            print("MySQLç¼–ç è®¾ç½®å®Œæˆ")
            
        except mysql.connector.Error as e:
            print(f"MySQLè¿æ¥é”™è¯¯: {e}")
            return False
        finally:
            if 'conn' in locals():
                conn.close()
        
        return True
    
    def setup_sqlalchemy_encoding(self, database_url):
        """SQLAlchemyç¼–ç è®¾ç½®"""
        # åœ¨è¿æ¥URLä¸­æŒ‡å®šç¼–ç 
        if 'mysql' in database_url:
            if '?' not in database_url:
                database_url += '?charset=utf8mb4'
            else:
                database_url += '&charset=utf8mb4'
        
        engine = create_engine(
            database_url,
            # å…¶ä»–ç¼–ç ç›¸å…³å‚æ•°
            pool_pre_ping=True,
            echo=False
        )
        
        try:
            with engine.connect() as conn:
                # æ‰§è¡Œç¼–ç è®¾ç½®
                if 'mysql' in database_url:
                    conn.execute(text("SET NAMES utf8mb4"))
                
                print("SQLAlchemyè¿æ¥æˆåŠŸï¼Œç¼–ç å·²è®¾ç½®")
                return engine
                
        except Exception as e:
            print(f"SQLAlchemyè¿æ¥é”™è¯¯: {e}")
            return None

# ä½¿ç”¨ç¤ºä¾‹
def database_encoding_demo():
    """æ•°æ®åº“ç¼–ç å¤„ç†æ¼”ç¤º"""
    handler = DatabaseEncodingHandler()
    
    # SQLiteç¤ºä¾‹
    print("=== SQLiteç¼–ç å¤„ç† ===")
    handler.setup_sqlite_encoding("test.db")
    
    # MySQLç¤ºä¾‹ï¼ˆéœ€è¦å®é™…çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼‰
    print("\n=== MySQLç¼–ç å¤„ç† ===")
    # handler.setup_mysql_encoding("localhost", "user", "password", "testdb")
    print("MySQLç¤ºä¾‹éœ€è¦å®é™…çš„æ•°æ®åº“è¿æ¥")
    
    # SQLAlchemyç¤ºä¾‹
    print("\n=== SQLAlchemyç¼–ç å¤„ç† ===")
    engine = handler.setup_sqlalchemy_encoding("sqlite:///test_sqlalchemy.db")
    if engine:
        print("SQLAlchemyå¼•æ“åˆ›å»ºæˆåŠŸ")

if __name__ == "__main__":
    database_encoding_demo()
```

### 9.3 ç½‘ç»œä¼ è¾“ç¼–ç å¤„ç†


**ğŸ”¸ HTTPè¯·æ±‚å“åº”ç¼–ç å¤„ç†**

```python
import requests
from urllib.parse import quote, unquote
import base64

class NetworkEncodingHandler:
    """ç½‘ç»œä¼ è¾“ç¼–ç å¤„ç†å™¨"""
    
    def __init__(self):
        self.session = requests.Session()
        # è®¾ç½®é»˜è®¤ç¼–ç 
        self.session.headers.update({
            'Accept-Charset': 'utf-8',
            'Content-Type': 'application/json; charset=utf-8'
        })
    
    def safe_url_encode(self, text):
        """å®‰å…¨çš„URLç¼–ç """
        return quote(text, safe='')
    
    def safe_url_decode(self, encoded_text):
        """å®‰å…¨çš„URLè§£ç """
        return unquote(encoded_text, encoding='utf-8')
    
    def make_request_with_encoding(self, url, data=None, method='GET'):
        """å‘é€å¸¦ç¼–ç å¤„ç†çš„HTTPè¯·æ±‚"""
        try:
            if method.upper() == 'GET':
                response = self.session.get(url)
            elif method.upper() == 'POST':
                # JSONæ•°æ®è‡ªåŠ¨ä½¿ç”¨UTF-8ç¼–ç 
                response = self.session.post(url, json=data)
            
            # æ£€æµ‹å“åº”ç¼–ç 
            if response.encoding is None:
                response.encoding = 'utf-8'
            
            print(f"å“åº”ç¼–ç : {response.encoding}")
            print(f"å“åº”çŠ¶æ€: {response.status_code}")
            
            return response.json() if response.headers.get('content-type', '').startswith('application/json') else response.text
            
        except requests.exceptions.RequestException as e:
            print(f"è¯·æ±‚é”™è¯¯: {e}")
            return None
        except UnicodeDecodeError as e:
            print(f"ç¼–ç é”™è¯¯: {e}")
            return None
    
    def handle_form_data(self, form_data):
        """å¤„ç†è¡¨å•æ•°æ®ç¼–ç """
        encoded_data = {}
        
        for key, value in form_data.items():
            # ç¡®ä¿é”®å’Œå€¼éƒ½æ˜¯æ­£ç¡®ç¼–ç 
            if isinstance(key, str):
                encoded_key = key.encode('utf-8').decode('utf-8')
            else:
                encoded_key = str(key)
            
            if isinstance(value, str):
                encoded_value = value.encode('utf-8').decode('utf-8')
            else:
                encoded_value = str(value)
            
            encoded_data[encoded_key] = encoded_value
        
        return encoded_data
    
    def base64_encode_chinese(self, text):
        """Base64ç¼–ç ä¸­æ–‡æ–‡æœ¬"""
        utf8_bytes = text.encode('utf-8')
        return base64.b64encode(utf8_bytes).decode('ascii')
    
    def base64_decode_chinese(self, encoded_text):
        """Base64è§£ç ä¸­æ–‡æ–‡æœ¬"""
        try:
            decoded_bytes = base64.b64decode(encoded_text)
            return decoded_bytes.decode('utf-8')
        except Exception as e:
            print(f"Base64è§£ç é”™è¯¯: {e}")
            return None

# å®é™…åº”ç”¨ç¤ºä¾‹
def network_encoding_demo():
    """ç½‘ç»œç¼–ç å¤„ç†æ¼”ç¤º"""
    handler = NetworkEncodingHandler()
    
    # URLç¼–ç ç¤ºä¾‹
    chinese_text = "æœç´¢å…³é”®è¯ï¼šäººå·¥æ™ºèƒ½"
    encoded_url = handler.safe_url_encode(chinese_text)
    print(f"URLç¼–ç : {encoded_url}")
    
    decoded_text = handler.safe_url_decode(encoded_url)
    print(f"URLè§£ç : {decoded_text}")
    
    # è¡¨å•æ•°æ®å¤„ç†
    form_data = {
        "ç”¨æˆ·å": "å¼ ä¸‰",
        "å¯†ç ": "password123",
        "å¤‡æ³¨": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è´¦å·"
    }
    
    processed_data = handler.handle_form_data(form_data)
    print(f"å¤„ç†åçš„è¡¨å•æ•°æ®: {processed_data}")
    
    # Base64ç¼–ç ç¤ºä¾‹
    secret_message = "è¿™æ˜¯ä¸€æ¡æœºå¯†ä¿¡æ¯"
    encoded_message = handler.base64_encode_chinese(secret_message)
    print(f"Base64ç¼–ç : {encoded_message}")
    
    decoded_message = handler.base64_decode_chinese(encoded_message)
    print(f"Base64è§£ç : {decoded_message}")

if __name__ == "__main__":
    network_encoding_demo()
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç¼–ç åŸºç¡€ï¼šå­—ç¬¦ä¸²vså­—èŠ‚ä¸²ï¼Œç¼–ç vsè§£ç çš„åŒºåˆ«å’Œè½¬æ¢
ğŸ”¸ Pythonå¤„ç†ï¼šstrå’Œbytesç±»å‹ï¼Œencode()å’Œdecode()æ–¹æ³•
ğŸ”¸ Shellå¤„ç†ï¼šLANGç¯å¢ƒå˜é‡ï¼Œiconvå‘½ä»¤ï¼Œæ–‡ä»¶åç¼–ç 
ğŸ”¸ C/C++å¤„ç†ï¼šcharã€wchar_tã€å¤šå­—èŠ‚å­—ç¬¦å‡½æ•°
ğŸ”¸ æ–‡ä»¶æ“ä½œï¼šæŒ‡å®šç¼–ç è¯»å†™ï¼Œè‡ªåŠ¨æ£€æµ‹ç¼–ç 
ğŸ”¸ è·¨è¯­è¨€ï¼šJSONã€æ•°æ®åº“ã€ç½‘ç»œä¼ è¾“çš„ç¼–ç ç»Ÿä¸€
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç¼–ç¨‹ä¸­çš„ç¼–ç å¤„ç†æ€è·¯**
```
1. è¾“å…¥é˜¶æ®µï¼šç¡®å®šæ•°æ®æ¥æºçš„ç¼–ç æ ¼å¼
2. å¤„ç†é˜¶æ®µï¼šç»Ÿä¸€ä½¿ç”¨Unicodeï¼ˆå¦‚Pythonçš„strï¼‰
3. è¾“å‡ºé˜¶æ®µï¼šæ ¹æ®ç›®æ ‡éœ€æ±‚é€‰æ‹©åˆé€‚ç¼–ç 
4. é”™è¯¯å¤„ç†ï¼šæä¾›é™çº§ç­–ç•¥å’Œé”™è¯¯æ¢å¤æœºåˆ¶
```

**ğŸ”¹ å¸¸è§ç¼–ç é—®é¢˜è§£å†³**
```
ä¹±ç é—®é¢˜ï¼š
- æ£€æŸ¥æ–‡ä»¶ç¼–ç å£°æ˜
- ç¡®è®¤è¯»å†™æ“ä½œçš„ç¼–ç å‚æ•°
- éªŒè¯ç¯å¢ƒå˜é‡è®¾ç½®

æ€§èƒ½ä¼˜åŒ–ï¼š
- é¿å…é¢‘ç¹çš„ç¼–ç è½¬æ¢
- ç¼“å­˜ç¼–ç æ£€æµ‹ç»“æœ
- ä½¿ç”¨é€‚åˆçš„å­—ç¬¦ä¸²å¤„ç†å‡½æ•°
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å¼€å‘åœºæ™¯åº”ç”¨**
- **Webå¼€å‘**ï¼šç¡®ä¿é¡µé¢ã€APIã€æ•°æ®åº“ç¼–ç ä¸€è‡´
- **æ•°æ®å¤„ç†**ï¼šæ­£ç¡®å¤„ç†å¤šè¯­è¨€æ–‡æœ¬æ•°æ®
- **ç³»ç»Ÿé›†æˆ**ï¼šä¸åŒç³»ç»Ÿé—´çš„æ•°æ®äº¤æ¢
- **å›½é™…åŒ–**ï¼šæ”¯æŒå¤šè¯­è¨€çš„ç¨‹åºå¼€å‘

**ğŸ”§ è¿ç»´å®è·µ**
- **æ–‡ä»¶ç®¡ç†**ï¼šæ‰¹é‡è½¬æ¢æ–‡ä»¶ç¼–ç æ ¼å¼
- **æ—¥å¿—å¤„ç†**ï¼šç¡®ä¿æ—¥å¿—æ–‡ä»¶æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡
- **æ•°æ®è¿ç§»**ï¼šä¿è¯æ•°æ®åœ¨è¿ç§»è¿‡ç¨‹ä¸­ä¸å‡ºç°ä¹±ç 
- **ç¯å¢ƒé…ç½®**ï¼šè®¾ç½®æ­£ç¡®çš„ç³»ç»Ÿå’Œç¨‹åºç¼–ç 

### 10.4 æœ€ä½³å®è·µå»ºè®®


**ğŸŒŸ ç¼–ç å¤„ç†åŸåˆ™**
```
ç»Ÿä¸€åŸåˆ™ï¼š
- é¡¹ç›®å†…éƒ¨ç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç 
- æ•°æ®åº“ã€æ–‡ä»¶ã€ç½‘ç»œä¼ è¾“ä¿æŒä¸€è‡´

é˜²é”™åŸåˆ™ï¼š
- æ€»æ˜¯æ˜ç¡®æŒ‡å®šç¼–ç å‚æ•°
- æä¾›ç¼–ç é”™è¯¯çš„å¤„ç†æœºåˆ¶
- å¯¹å¤–éƒ¨æ•°æ®è¿›è¡Œç¼–ç éªŒè¯

æ€§èƒ½åŸåˆ™ï¼š
- å‡å°‘ä¸å¿…è¦çš„ç¼–ç è½¬æ¢
- ä½¿ç”¨åˆé€‚çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•
- è€ƒè™‘å†…å­˜ä½¿ç”¨å’Œå¤„ç†é€Ÿåº¦
```

**ğŸ’¡ å¼€å‘å»ºè®®**
```
ä»£ç å±‚é¢ï¼š
âœ… åœ¨æ–‡ä»¶å¤´éƒ¨å£°æ˜ç¼–ç 
âœ… æ–‡ä»¶è¯»å†™æ“ä½œæŒ‡å®šencodingå‚æ•°
âœ… ç½‘ç»œä¼ è¾“è®¾ç½®æ­£ç¡®çš„Content-Type
âœ… æ•°æ®åº“è¿æ¥æŒ‡å®šå­—ç¬¦é›†

ç¯å¢ƒå±‚é¢ï¼š
âœ… è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡LANG=zh_CN.UTF-8
âœ… å¼€å‘å·¥å…·é…ç½®UTF-8ç¼–ç 
âœ… æœåŠ¡å™¨ç¯å¢ƒç»Ÿä¸€ç¼–ç è®¾ç½®
âœ… å›¢é˜Ÿå¼€å‘è§„èŒƒç¼–ç æ ‡å‡†
```

### 10.5 æ•…éšœæ’æŸ¥æ€è·¯


**ğŸ” ç¼–ç é—®é¢˜è¯Šæ–­æµç¨‹**
```
æ­¥éª¤1ï¼šç¡®è®¤é—®é¢˜ç°è±¡
- ä¹±ç çš„å…·ä½“è¡¨ç°
- å½±å“èŒƒå›´å’Œåœºæ™¯

æ­¥éª¤2ï¼šæ£€æŸ¥ç¼–ç é“¾è·¯  
- æ•°æ®æ¥æºç¼–ç 
- å¤„ç†è¿‡ç¨‹ç¼–ç è½¬æ¢
- è¾“å‡ºç›®æ ‡ç¼–ç è¦æ±‚

æ­¥éª¤3ï¼šé€å±‚éªŒè¯
- æ–‡ä»¶ç¼–ç å£°æ˜
- ç¨‹åºç¼–ç å‚æ•°
- ç¯å¢ƒå˜é‡è®¾ç½®
- ä¼ è¾“è¿‡ç¨‹ç¼–ç 

æ­¥éª¤4ï¼šå®šä½é—®é¢˜
- ä½¿ç”¨å·¥å…·æ£€æµ‹å®é™…ç¼–ç 
- å¯¹æ¯”æœŸæœ›ç¼–ç å’Œå®é™…ç¼–ç 
- æ‰¾åˆ°ç¼–ç ä¸ä¸€è‡´çš„ç¯èŠ‚

æ­¥éª¤5ï¼šä¿®å¤éªŒè¯
- ç»Ÿä¸€ç¼–ç è®¾ç½®
- æµ‹è¯•ä¿®å¤æ•ˆæœ
- å»ºç«‹é¢„é˜²æœºåˆ¶
```

**âš ï¸ å¸¸è§ç¼–ç é™·é˜±**
```
Windows vs Linuxï¼š
- Windowsé»˜è®¤GBKï¼ŒLinuxé»˜è®¤UTF-8
- è·¨å¹³å°å¼€å‘è¦ç‰¹åˆ«æ³¨æ„

BOMé—®é¢˜ï¼š
- UTF-8 BOMå¯èƒ½å¯¼è‡´è§£æé”™è¯¯
- ä½¿ç”¨utf-8-sigå¤„ç†BOM

æ•°æ®åº“å­—ç¬¦é›†ï¼š
- MySQLçš„utf8å®é™…æ˜¯utf8mb3ï¼ˆ3å­—èŠ‚ï¼‰
- å­˜å‚¨emojiéœ€è¦utf8mb4ï¼ˆ4å­—èŠ‚ï¼‰

ç½‘ç»œä¼ è¾“ï¼š
- HTTPå¤´éƒ¨çš„charsetå£°æ˜è¦æ­£ç¡®
- POSTæ•°æ®çš„Content-Typeè¦åŒ¹é…å®é™…ç¼–ç 
```

### 10.6 å·¥å…·å’Œèµ„æºæ¨è


**ğŸ› ï¸ ç¼–ç å¤„ç†å·¥å…·**

```bash
# å‘½ä»¤è¡Œå·¥å…·
file -i filename.txt          # æ£€æµ‹æ–‡ä»¶ç¼–ç 
iconv -f gbk -t utf-8 file     # è½¬æ¢æ–‡ä»¶ç¼–ç   
chardet filename.txt          # Python chardetæ£€æµ‹
hexdump -C file | head        # æŸ¥çœ‹æ–‡ä»¶åå…­è¿›åˆ¶å†…å®¹

# ç¼–è¾‘å™¨æ’ä»¶
VS Code: "Auto Encoding"
Vim: "set fileencoding=utf-8"
Sublime Text: "ConvertToUTF8"
```

**ğŸ“š Pythonåº“æ¨è**
```python
# å¿…å¤‡åº“
import chardet      # ç¼–ç æ£€æµ‹
import codecs       # ç¼–ç è½¬æ¢
import unicodedata  # Unicodeè§„èŒƒåŒ–

# å®ç”¨åº“
from charset_normalizer import detect  # æ›´ç²¾ç¡®çš„ç¼–ç æ£€æµ‹
import ftfy         # ä¿®å¤ç¼–ç é”™è¯¯çš„æ–‡æœ¬
```

**ğŸ”— å‚è€ƒèµ„æº**
```
å®˜æ–¹æ–‡æ¡£ï¼š
- Python Unicode HOWTO
- MySQL Character Set Support
- Java Internationalization Guide

åœ¨çº¿å·¥å…·ï¼š
- Unicodeå­—ç¬¦æŸ¥è¯¢ï¼šunicode-table.com
- ç¼–ç è½¬æ¢ï¼šconvertstring.com  
- å­—ç¬¦ç¼–ç æ£€æµ‹ï¼šchardet.com
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
ç¼–ç¨‹å¤„ç†ç¼–ç æœ‰é—¨é“ï¼Œ
è¾“å…¥è¾“å‡ºç¼–ç è¦å¯¹å¥½ã€‚
Pythonå­—ç¬¦ä¸²å’Œå­—èŠ‚åˆ†ï¼Œ
encodeç¼–ç decodeè¿˜åŸã€‚
Shellè®¾ç½®LANGå¾ˆé‡è¦ï¼Œ
iconvè½¬æ¢æ ¼å¼è°ƒã€‚
æ•°æ®åº“ç½‘ç»œä¼ è¾“æ—¶ï¼Œ
UTF-8ç¼–ç æœ€å¯é ï¼
```