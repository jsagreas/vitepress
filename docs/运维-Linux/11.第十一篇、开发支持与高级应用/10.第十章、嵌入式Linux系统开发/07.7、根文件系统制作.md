---
title: 7ã€æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ¶ä½œ
---
## ðŸ“š ç›®å½•

1. [æ ¹æ–‡ä»¶ç³»ç»ŸåŸºç¡€æ¦‚å¿µ](#1-æ ¹æ–‡ä»¶ç³»ç»ŸåŸºç¡€æ¦‚å¿µ)
2. [BusyBoxç¼–è¯‘ä¸Žé…ç½®](#2-BusyBoxç¼–è¯‘ä¸Žé…ç½®)
3. [åŸºç¡€ç›®å½•ç»“æž„åˆ›å»º](#3-åŸºç¡€ç›®å½•ç»“æž„åˆ›å»º)
4. [è®¾å¤‡èŠ‚ç‚¹åˆ›å»ºæ–¹æ³•](#4-è®¾å¤‡èŠ‚ç‚¹åˆ›å»ºæ–¹æ³•)
5. [åˆå§‹åŒ–è„šæœ¬ç¼–å†™](#5-åˆå§‹åŒ–è„šæœ¬ç¼–å†™)
6. [åº“æ–‡ä»¶ä¾èµ–å¤„ç†](#6-åº“æ–‡ä»¶ä¾èµ–å¤„ç†)
7. [æ–‡ä»¶ç³»ç»Ÿæ‰“åŒ…æ–¹æ³•](#7-æ–‡ä»¶ç³»ç»Ÿæ‰“åŒ…æ–¹æ³•)
8. [åªè¯»æ–‡ä»¶ç³»ç»Ÿè®¾è®¡](#8-åªè¯»æ–‡ä»¶ç³»ç»Ÿè®¾è®¡)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸŒ³ æ ¹æ–‡ä»¶ç³»ç»ŸåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯æ ¹æ–‡ä»¶ç³»ç»Ÿ


**æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆRoot Filesystemï¼‰**ï¼šå°±æ˜¯Linuxç³»ç»Ÿå¯åŠ¨åŽç¬¬ä¸€ä¸ªæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåŒ…å«äº†ç³»ç»Ÿè¿è¡Œæ‰€éœ€çš„æ‰€æœ‰åŸºæœ¬æ–‡ä»¶å’Œç›®å½•ã€‚

**é€šä¿—ç†è§£**ï¼š
```
æŠŠæ ¹æ–‡ä»¶ç³»ç»Ÿæƒ³è±¡æˆä¸€ä¸ªæˆ¿å­çš„åŸºç¡€æ¡†æž¶ï¼š
ðŸ  æˆ¿å­ = Linuxç³»ç»Ÿ
ðŸ—ï¸ åœ°åŸº = å†…æ ¸
ðŸšª é—¨çª— = æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆæä¾›åŸºæœ¬åŠŸèƒ½å…¥å£ï¼‰
ðŸ›‹ï¸ å®¶å…· = åº”ç”¨ç¨‹åº
```

**ä¸ºä»€ä¹ˆéœ€è¦æ ¹æ–‡ä»¶ç³»ç»Ÿ**ï¼š
- ðŸ”¸ **ç³»ç»Ÿå¯åŠ¨**ï¼šå†…æ ¸å¯åŠ¨åŽéœ€è¦æ‰¾åˆ°ç”¨æˆ·ç©ºé—´ç¨‹åº
- ðŸ”¸ **åŸºæœ¬å·¥å…·**ï¼šæä¾›`ls`ã€`cd`ã€`mkdir`ç­‰åŸºæœ¬å‘½ä»¤
- ðŸ”¸ **é…ç½®æ–‡ä»¶**ï¼šå­˜æ”¾ç³»ç»Ÿé…ç½®ä¿¡æ¯
- ðŸ”¸ **è®¾å¤‡ç®¡ç†**ï¼šç®¡ç†ç¡¬ä»¶è®¾å¤‡çš„è®¿é—®æŽ¥å£

### 1.2 æ ¹æ–‡ä»¶ç³»ç»Ÿçš„ä½œç”¨æœºåˆ¶


**å¯åŠ¨æµç¨‹å›¾ç¤º**ï¼š
```
ç³»ç»Ÿä¸Šç”µ
    â†“
BootloaderåŠ è½½å†…æ ¸
    â†“
å†…æ ¸åˆå§‹åŒ–ç¡¬ä»¶
    â†“
æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ â† æˆ‘ä»¬è¦åˆ¶ä½œçš„éƒ¨åˆ†
    â†“
æ‰§è¡Œinitè¿›ç¨‹
    â†“
å¯åŠ¨ç”¨æˆ·ç©ºé—´ç¨‹åº
```

**æ ¹æ–‡ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ðŸ“ **ç›®å½•ç»“æž„**ï¼šæä¾›æ ‡å‡†çš„Linuxç›®å½•å¸ƒå±€
- ðŸ”§ **åŸºæœ¬å·¥å…·**ï¼šåŒ…å«ç³»ç»Ÿå¿…éœ€çš„å‘½ä»¤å·¥å…·
- âš™ï¸ **é…ç½®ç®¡ç†**ï¼šå­˜å‚¨ç³»ç»Ÿå’ŒæœåŠ¡é…ç½®
- ðŸ”Œ **è®¾å¤‡æŽ¥å£**ï¼šæä¾›ç¡¬ä»¶è®¾å¤‡çš„è®¿é—®èŠ‚ç‚¹

### 1.3 åµŒå…¥å¼vsæ¡Œé¢ç³»ç»Ÿçš„åŒºåˆ«


| ç‰¹æ€§å¯¹æ¯” | **æ¡Œé¢Linux** | **åµŒå…¥å¼Linux** |
|---------|-------------|---------------|
| ðŸŽ¯ **è®¾è®¡ç›®æ ‡** | `åŠŸèƒ½å®Œæ•´` | `ç²¾ç®€é«˜æ•ˆ` |
| ðŸ’¾ **å­˜å‚¨ç©ºé—´** | `GBçº§åˆ«` | `MBçº§åˆ«` |
| âš¡ **å¯åŠ¨é€Ÿåº¦** | `è¾ƒæ…¢(30s+)` | `æžå¿«(3så†…)` |
| ðŸ”§ **å·¥å…·é›†** | `å®Œæ•´GNUå·¥å…·é“¾` | `BusyBoxå·¥å…·é›†` |
| ðŸ“¦ **è½¯ä»¶åŒ…** | `æ•°åƒä¸ªè½¯ä»¶åŒ…` | `å¿…éœ€è½¯ä»¶åŒ…` |

---

## 2. ðŸ”§ BusyBoxç¼–è¯‘ä¸Žé…ç½®


### 2.1 BusyBoxç®€ä»‹


**BusyBoxæ˜¯ä»€ä¹ˆ**ï¼š
BusyBoxè¢«ç§°ä¸º"åµŒå…¥å¼Linuxçš„ç‘žå£«å†›åˆ€"ï¼Œå®ƒæŠŠå¸¸ç”¨çš„Linuxå‘½ä»¤æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚

**ä¸ºä»€ä¹ˆé€‰æ‹©BusyBox**ï¼š
```
ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªå‘½ä»¤éƒ½æ˜¯ç‹¬ç«‹æ–‡ä»¶
ls -> /bin/ls (100KB)
cp -> /bin/cp (80KB)  
mv -> /bin/mv (70KB)
... æ€»è®¡æ•°MB

BusyBoxæ–¹å¼ï¼šæ‰€æœ‰å‘½ä»¤å…±äº«ä¸€ä¸ªæ–‡ä»¶
busybox -> /bin/busybox (1MB)
é€šè¿‡ç¬¦å·é“¾æŽ¥å®žçŽ°ï¼š
ls -> busybox
cp -> busybox
mv -> busybox
```

### 2.2 BusyBoxä¸‹è½½ä¸Žé…ç½®


**ä¸‹è½½BusyBox**ï¼š
```bash
# ä¸‹è½½ç¨³å®šç‰ˆæœ¬
wget https://busybox.net/downloads/busybox-1.35.0.tar.bz2
tar -xjf busybox-1.35.0.tar.bz2
cd busybox-1.35.0
```

**é…ç½®ç¼–è¯‘é€‰é¡¹**ï¼š
```bash
# ä½¿ç”¨å›¾å½¢ç•Œé¢é…ç½®
make menuconfig

# æˆ–ä½¿ç”¨é»˜è®¤é…ç½®
make defconfig
```

**é‡è¦é…ç½®é¡¹è¯´æ˜Ž**ï¼š

**ðŸ“‹ ç¼–è¯‘è®¾ç½®**ï¼š
```
Settings --->
[*] Build static binary (no shared libs)  # é™æ€ç¼–è¯‘
[*] Build with Large File Support          # å¤§æ–‡ä»¶æ”¯æŒ
Cross compiler prefix (arm-linux-gnueabihf-) # äº¤å‰ç¼–è¯‘å‰ç¼€
```

**ðŸ”§ åŠŸèƒ½é€‰æ‹©**ï¼š
```
Archival Utilities --->  # åŽ‹ç¼©å·¥å…·
[*] gzip                # å¿…éœ€
[*] tar                 # å¿…éœ€

Coreutils --->          # æ ¸å¿ƒå·¥å…·
[*] ls                  # å¿…éœ€
[*] cp                  # å¿…éœ€
[*] mv                  # å¿…éœ€
[*] mkdir              # å¿…éœ€

System Utilities --->    # ç³»ç»Ÿå·¥å…·
[*] mount              # æŒ‚è½½å·¥å…·
[*] ps                 # è¿›ç¨‹æŸ¥çœ‹
[*] top                # ç³»ç»Ÿç›‘æŽ§
```

### 2.3 ç¼–è¯‘å®‰è£…è¿‡ç¨‹


```bash
# ç¼–è¯‘BusyBox
make CROSS_COMPILE=arm-linux-gnueabihf-

# åˆ›å»ºå®‰è£…ç›®å½•
mkdir -p ../rootfs

# å®‰è£…åˆ°æŒ‡å®šç›®å½•
make CONFIG_PREFIX=../rootfs install
```

**ç¼–è¯‘ç»“æžœæ£€æŸ¥**ï¼š
```bash
# æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
ls -la ../rootfs/
drwxr-xr-x  bin/     # åŸºæœ¬å‘½ä»¤
drwxr-xr-x  sbin/    # ç³»ç»Ÿå‘½ä»¤
drwxr-xr-x  usr/     # ç”¨æˆ·å·¥å…·
lrwxrwxrwx  linuxrc -> bin/busybox  # åˆå§‹åŒ–é“¾æŽ¥
```

---

## 3. ðŸ“ åŸºç¡€ç›®å½•ç»“æž„åˆ›å»º


### 3.1 Linuxæ ‡å‡†ç›®å½•ç»“æž„


**FHSï¼ˆæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡æ ‡å‡†ï¼‰ç›®å½•è¯´æ˜Ž**ï¼š
```
æ ¹ç›®å½•æ ‘çŠ¶ç»“æž„ï¼š
/
â”œâ”€â”€ bin/         â† åŸºæœ¬å‘½ä»¤ï¼ˆBusyBoxæä¾›ï¼‰
â”œâ”€â”€ sbin/        â† ç³»ç»Ÿç®¡ç†å‘½ä»¤
â”œâ”€â”€ usr/         â† ç”¨æˆ·ç¨‹åº
â”œâ”€â”€ etc/         â† é…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
â”œâ”€â”€ lib/         â† å…±äº«åº“æ–‡ä»¶ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
â”œâ”€â”€ proc/        â† è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆå†…æ ¸æŒ‚è½½ï¼‰
â”œâ”€â”€ sys/         â† ç³»ç»Ÿä¿¡æ¯ï¼ˆå†…æ ¸æŒ‚è½½ï¼‰
â”œâ”€â”€ dev/         â† è®¾å¤‡èŠ‚ç‚¹ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
â”œâ”€â”€ tmp/         â† ä¸´æ—¶æ–‡ä»¶ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
â”œâ”€â”€ var/         â† å¯å˜æ•°æ®ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
â”œâ”€â”€ home/        â† ç”¨æˆ·ä¸»ç›®å½•ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
â””â”€â”€ root/        â† rootç”¨æˆ·ä¸»ç›®å½•ï¼ˆæˆ‘ä»¬è¦åˆ›å»ºï¼‰
```

### 3.2 åˆ›å»ºç›®å½•ç»“æž„


```bash
cd rootfs

# åˆ›å»ºç³»ç»Ÿå¿…éœ€ç›®å½•
mkdir -p etc lib tmp var home root

# åˆ›å»ºè®¾å¤‡ç›®å½•
mkdir -p dev

# åˆ›å»ºæŒ‚è½½ç‚¹ç›®å½•
mkdir -p proc sys mnt

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p var/log var/run var/tmp

# è®¾ç½®æ­£ç¡®çš„æƒé™
chmod 755 bin sbin usr etc lib
chmod 1777 tmp var/tmp  # è®¾ç½®ç²˜æ»žä½
chmod 700 root          # rootç›®å½•ä»…rootå¯è®¿é—®
```

**ç›®å½•æƒé™è¯´æ˜Ž**ï¼š
- `755`ï¼š**æ‰€æœ‰è€…å¯è¯»å†™æ‰§è¡Œï¼Œå…¶ä»–ç”¨æˆ·åªè¯»æ‰§è¡Œ**
- `1777`ï¼š**æ‰€æœ‰ç”¨æˆ·å¯è¯»å†™æ‰§è¡Œï¼Œä½†åªèƒ½åˆ é™¤è‡ªå·±çš„æ–‡ä»¶**ï¼ˆç²˜æ»žä½ï¼‰
- `700`ï¼š**ä»…æ‰€æœ‰è€…å¯è¯»å†™æ‰§è¡Œ**

### 3.3 éªŒè¯ç›®å½•ç»“æž„


```bash
# æŸ¥çœ‹åˆ›å»ºçš„ç›®å½•ç»“æž„
tree rootfs/ -d
```

**é¢„æœŸè¾“å‡º**ï¼š
```
rootfs/
â”œâ”€â”€ bin/
â”œâ”€â”€ dev/
â”œâ”€â”€ etc/
â”œâ”€â”€ home/
â”œâ”€â”€ lib/
â”œâ”€â”€ mnt/
â”œâ”€â”€ proc/
â”œâ”€â”€ root/
â”œâ”€â”€ sbin/
â”œâ”€â”€ sys/
â”œâ”€â”€ tmp/
â”œâ”€â”€ usr/
â””â”€â”€ var/
    â”œâ”€â”€ log/
    â”œâ”€â”€ run/
    â””â”€â”€ tmp/
```

---

## 4. ðŸ”Œ è®¾å¤‡èŠ‚ç‚¹åˆ›å»ºæ–¹æ³•


### 4.1 è®¾å¤‡èŠ‚ç‚¹æ¦‚å¿µç†è§£


**è®¾å¤‡èŠ‚ç‚¹æ˜¯ä»€ä¹ˆ**ï¼š
è®¾å¤‡èŠ‚ç‚¹æ˜¯Linuxç³»ç»Ÿä¸­è®¿é—®ç¡¬ä»¶è®¾å¤‡çš„"é—¨æˆ·"ï¼Œå®ƒæ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç‰¹æ®Šæ–‡ä»¶ã€‚

**è®¾å¤‡èŠ‚ç‚¹çš„ä½œç”¨**ï¼š
```
åº”ç”¨ç¨‹åºæƒ³è¦è¯»å–ä¸²å£æ•°æ®ï¼š
åº”ç”¨ç¨‹åº â†’ æ‰“å¼€/dev/ttyS0 â†’ å†…æ ¸ä¸²å£é©±åŠ¨ â†’ ç¡¬ä»¶ä¸²å£

å°±åƒï¼š
ç”¨æˆ· â†’ æ•²é—¨(/dev/ttyS0) â†’ é—¨å«(å†…æ ¸) â†’ æˆ¿é—´(ç¡¬ä»¶)
```

### 4.2 è®¾å¤‡èŠ‚ç‚¹ç±»åž‹


**è®¾å¤‡åˆ†ç±»**ï¼š
- ðŸ”¸ **å­—ç¬¦è®¾å¤‡**ï¼šæŒ‰å­—ç¬¦æµå¤„ç†ï¼ˆå¦‚ä¸²å£ã€é”®ç›˜ï¼‰
- ðŸ”¸ **å—è®¾å¤‡**ï¼šæŒ‰æ•°æ®å—å¤„ç†ï¼ˆå¦‚ç¡¬ç›˜ã€SDå¡ï¼‰

**è®¾å¤‡å·ç»„æˆ**ï¼š
```
è®¾å¤‡å· = ä¸»è®¾å¤‡å· + æ¬¡è®¾å¤‡å·
ä¸»è®¾å¤‡å·ï¼šæ ‡è¯†è®¾å¤‡é©±åŠ¨ç±»åž‹
æ¬¡è®¾å¤‡å·ï¼šæ ‡è¯†å…·ä½“è®¾å¤‡å®žä¾‹

ä¾‹å¦‚ï¼š
/dev/ttyS0 â†’ ä¸»è®¾å¤‡å·4ï¼Œæ¬¡è®¾å¤‡å·64
/dev/ttyS1 â†’ ä¸»è®¾å¤‡å·4ï¼Œæ¬¡è®¾å¤‡å·65
```

### 4.3 æ‰‹åŠ¨åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹


```bash
cd rootfs/dev

# åˆ›å»ºæŽ§åˆ¶å°è®¾å¤‡ï¼ˆå¿…éœ€ï¼‰
mknod console c 5 1        # ç³»ç»ŸæŽ§åˆ¶å°
mknod null c 1 3           # ç©ºè®¾å¤‡
mknod zero c 1 5           # é›¶è®¾å¤‡

# åˆ›å»ºä¸²å£è®¾å¤‡
mknod ttyS0 c 4 64         # ä¸²å£0
mknod ttyS1 c 4 65         # ä¸²å£1

# åˆ›å»ºå—è®¾å¤‡ç¤ºä¾‹
mknod mmcblk0 b 179 0      # SDå¡è®¾å¤‡
mknod mmcblk0p1 b 179 1    # SDå¡ç¬¬ä¸€åˆ†åŒº
```

**mknodå‘½ä»¤è§£é‡Š**ï¼š
- `c`ï¼šå­—ç¬¦è®¾å¤‡
- `b`ï¼šå—è®¾å¤‡  
- `5 1`ï¼šä¸»è®¾å¤‡å·5ï¼Œæ¬¡è®¾å¤‡å·1

### 4.4 ä½¿ç”¨è„šæœ¬æ‰¹é‡åˆ›å»º


åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹è„šæœ¬ï¼š
```bash
#!/bin/bash
# makedev.sh - æ‰¹é‡åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹

DEV_DIR="rootfs/dev"

# ç¡®ä¿ç›®å½•å­˜åœ¨
mkdir -p $DEV_DIR
cd $DEV_DIR

# åŸºæœ¬è®¾å¤‡èŠ‚ç‚¹
echo "åˆ›å»ºåŸºæœ¬è®¾å¤‡èŠ‚ç‚¹..."
mknod console c 5 1
mknod null c 1 3
mknod zero c 1 5

# ä¸²å£è®¾å¤‡
echo "åˆ›å»ºä¸²å£è®¾å¤‡..."
for i in {0..3}; do
    mknod ttyS$i c 4 $((64+i))
done

# å­˜å‚¨è®¾å¤‡
echo "åˆ›å»ºå­˜å‚¨è®¾å¤‡..."
mknod mmcblk0 b 179 0
for i in {1..4}; do
    mknod mmcblk0p$i b 179 $i
done

echo "è®¾å¤‡èŠ‚ç‚¹åˆ›å»ºå®Œæˆï¼"
```

**æ‰§è¡Œè„šæœ¬**ï¼š
```bash
chmod +x makedev.sh
./makedev.sh
```

---

## 5. âš™ï¸ åˆå§‹åŒ–è„šæœ¬ç¼–å†™


### 5.1 åˆå§‹åŒ–è„šæœ¬çš„ä½œç”¨


**initè¿›ç¨‹çš„é‡è¦æ€§**ï¼š
initæ˜¯Linuxç³»ç»Ÿå¯åŠ¨åŽç¬¬ä¸€ä¸ªç”¨æˆ·ç©ºé—´è¿›ç¨‹ï¼ŒPIDä¸º1ï¼Œå®ƒè´Ÿè´£å¯åŠ¨ç³»ç»Ÿçš„å…¶ä»–æ‰€æœ‰è¿›ç¨‹ã€‚

**åˆå§‹åŒ–æµç¨‹**ï¼š
```
å†…æ ¸å¯åŠ¨å®Œæˆ
    â†“
æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ
    â†“
æ‰§è¡Œ/sbin/initï¼ˆæˆ–/initï¼‰â† æˆ‘ä»¬è¦ç¼–å†™çš„è„šæœ¬
    â†“
æŒ‚è½½å…¶ä»–æ–‡ä»¶ç³»ç»Ÿ
    â†“
å¯åŠ¨ç³»ç»ŸæœåŠ¡
    â†“
å¯åŠ¨ç”¨æˆ·ç•Œé¢
```

### 5.2 ç®€å•åˆå§‹åŒ–è„šæœ¬


åˆ›å»ºåŸºæœ¬çš„initè„šæœ¬ï¼š
```bash
#!/bin/sh
# /init - ç®€å•çš„åˆå§‹åŒ–è„šæœ¬

echo "æ­£åœ¨å¯åŠ¨åµŒå…¥å¼Linuxç³»ç»Ÿ..."

# æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
echo "æŒ‚è½½è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ..."
mount -t proc proc /proc
mount -t sysfs sysfs /sys
mount -t tmpfs tmpfs /tmp

# åˆ›å»ºå¿…è¦çš„è®¾å¤‡èŠ‚ç‚¹ï¼ˆå¦‚æžœä½¿ç”¨devtmpfsï¼‰
echo "æŒ‚è½½è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ..."
mount -t devtmpfs devtmpfs /dev

# è®¾ç½®åŸºæœ¬çŽ¯å¢ƒå˜é‡
export PATH=/bin:/sbin:/usr/bin:/usr/sbin
export HOME=/root

# è®¾ç½®ä¸»æœºå
echo "è®¾ç½®ç³»ç»Ÿä¿¡æ¯..."
hostname "embedded-linux"

# å¯åŠ¨ç½‘ç»œï¼ˆå¦‚æžœéœ€è¦ï¼‰
echo "é…ç½®ç½‘ç»œ..."
ifconfig lo up

# æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
echo "ç³»ç»Ÿå¯åŠ¨å®Œæˆï¼"
echo "Linuxç‰ˆæœ¬: $(uname -r)"
echo "ä¸»æœºå: $(hostname)"

# å¯åŠ¨shell
echo "å¯åŠ¨äº¤äº’å¼shell..."
exec /bin/sh
```

### 5.3 é«˜çº§åˆå§‹åŒ–è„šæœ¬


æ›´å®Œæ•´çš„åˆå§‹åŒ–è„šæœ¬ç¤ºä¾‹ï¼š
```bash
#!/bin/sh
# /etc/init.d/rcS - ç³»ç»Ÿå¯åŠ¨è„šæœ¬

# å®šä¹‰é¢œè‰²è¾“å‡º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

print_status() {
    echo -e "${GREEN}[  OK  ]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARN ]${NC} $1"
}

print_error() {
    echo -e "${RED}[FAILED]${NC} $1"
}

# ç³»ç»Ÿå¯åŠ¨æ¨ªå¹…
echo "======================================="
echo "    åµŒå…¥å¼Linuxç³»ç»Ÿæ­£åœ¨å¯åŠ¨...        "
echo "======================================="

# æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ
print_status "æŒ‚è½½procæ–‡ä»¶ç³»ç»Ÿ"
mount -t proc proc /proc

print_status "æŒ‚è½½sysfsæ–‡ä»¶ç³»ç»Ÿ"
mount -t sysfs sysfs /sys

print_status "æŒ‚è½½tmpfsåˆ°/tmp"
mount -t tmpfs tmpfs /tmp

# åˆ›å»ºè¿è¡Œæ—¶ç›®å½•
mkdir -p /var/run /var/lock
print_status "åˆ›å»ºè¿è¡Œæ—¶ç›®å½•"

# è®¾ç½®çŽ¯å¢ƒå˜é‡
export PATH=/bin:/sbin:/usr/bin:/usr/sbin
export LD_LIBRARY_PATH=/lib:/usr/lib

# ç½‘ç»œé…ç½®
print_status "é…ç½®å›žçŽ¯ç½‘ç»œ"
ifconfig lo 127.0.0.1 up

# å¦‚æžœæœ‰é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½ç½‘ç»œé…ç½®
if [ -f /etc/network.conf ]; then
    source /etc/network.conf
    print_status "åŠ è½½ç½‘ç»œé…ç½®"
fi

print_status "ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ"
echo "======================================="
```

### 5.4 è®¾ç½®è„šæœ¬æƒé™


```bash
# å¤åˆ¶è„šæœ¬åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿ
cp init rootfs/init
chmod +x rootfs/init

# æˆ–è€…åˆ›å»ºåœ¨etcç›®å½•
cp rcS rootfs/etc/init.d/rcS
chmod +x rootfs/etc/init.d/rcS
```

---

## 6. ðŸ“š åº“æ–‡ä»¶ä¾èµ–å¤„ç†


### 6.1 åº“æ–‡ä»¶ä¾èµ–æ¦‚å¿µ


**ä»€ä¹ˆæ˜¯åº“æ–‡ä»¶ä¾èµ–**ï¼š
å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒå¯èƒ½éœ€è¦è°ƒç”¨å…¶ä»–å·²ç¼–è¯‘å¥½çš„ä»£ç åº“ï¼ˆå…±äº«åº“ï¼‰ï¼Œè¿™äº›åº“æ–‡ä»¶å¿…é¡»å­˜åœ¨äºŽç³»ç»Ÿä¸­ã€‚

**ä¾èµ–å…³ç³»ç¤ºä¾‹**ï¼š
```
åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼š
æˆ‘çš„ç¨‹åº.exe
    â†“ éœ€è¦
libc.so.6 (Cæ ‡å‡†åº“)
    â†“ éœ€è¦  
ld-linux.so.3 (åŠ¨æ€é“¾æŽ¥å™¨)
```

### 6.2 æŸ¥çœ‹ç¨‹åºä¾èµ–


**ä½¿ç”¨lddå‘½ä»¤æŸ¥çœ‹ä¾èµ–**ï¼š
```bash
# æŸ¥çœ‹BusyBoxçš„ä¾èµ–ï¼ˆå¦‚æžœæ˜¯åŠ¨æ€ç¼–è¯‘ï¼‰
ldd rootfs/bin/busybox

# å…¸åž‹è¾“å‡ºï¼š
linux-vdso.so.1 (0x7fff8d5fe000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6
/lib64/ld-linux-x86-64.so.2
```

**ä½¿ç”¨fileå‘½ä»¤æ£€æŸ¥æ–‡ä»¶ç±»åž‹**ï¼š
```bash
file rootfs/bin/busybox

# é™æ€ç¼–è¯‘è¾“å‡ºï¼š
busybox: ELF 32-bit LSB executable, ARM, statically linked

# åŠ¨æ€ç¼–è¯‘è¾“å‡ºï¼š  
busybox: ELF 32-bit LSB executable, ARM, dynamically linked
```

### 6.3 å¤åˆ¶å¿…éœ€çš„åº“æ–‡ä»¶


**å¦‚æžœä½¿ç”¨åŠ¨æ€ç¼–è¯‘çš„ç¨‹åº**ï¼š
```bash
# åˆ›å»ºåº“ç›®å½•
mkdir -p rootfs/lib

# æŸ¥æ‰¾äº¤å‰ç¼–è¯‘å·¥å…·é“¾çš„åº“æ–‡ä»¶ä½ç½®
TOOLCHAIN_LIB=/usr/arm-linux-gnueabihf/lib

# å¤åˆ¶åŸºæœ¬Cåº“
cp $TOOLCHAIN_LIB/libc.so.6 rootfs/lib/
cp $TOOLCHAIN_LIB/libm.so.6 rootfs/lib/
cp $TOOLCHAIN_LIB/libdl.so.2 rootfs/lib/

# å¤åˆ¶åŠ¨æ€é“¾æŽ¥å™¨
cp $TOOLCHAIN_LIB/ld-linux-armhf.so.3 rootfs/lib/
```

**è‡ªåŠ¨å¤åˆ¶ä¾èµ–åº“è„šæœ¬**ï¼š
```bash
#!/bin/bash
# copy_libs.sh - è‡ªåŠ¨å¤åˆ¶åº“æ–‡ä»¶

ROOTFS_DIR="rootfs"
TOOLCHAIN_LIB="/usr/arm-linux-gnueabihf/lib"

copy_lib_deps() {
    local binary="$1"
    echo "å¤„ç† $binary çš„ä¾èµ–..."
    
    # èŽ·å–ä¾èµ–åˆ—è¡¨
    deps=$(arm-linux-gnueabihf-ldd "$binary" 2>/dev/null | grep "=>" | awk '{print $3}')
    
    for lib in $deps; do
        if [ -f "$lib" ]; then
            lib_name=$(basename "$lib")
            if [ ! -f "$ROOTFS_DIR/lib/$lib_name" ]; then
                echo "  å¤åˆ¶ $lib_name"
                cp "$lib" "$ROOTFS_DIR/lib/"
            fi
        fi
    done
}

# ç¡®ä¿libç›®å½•å­˜åœ¨
mkdir -p "$ROOTFS_DIR/lib"

# å¤„ç†æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶
find "$ROOTFS_DIR" -type f -executable | while read binary; do
    copy_lib_deps "$binary"
done
```

### 6.4 åº“æ–‡ä»¶è·¯å¾„é…ç½®


åˆ›å»ºåº“è·¯å¾„é…ç½®æ–‡ä»¶ï¼š
```bash
# åˆ›å»ºld.so.conf
cat > rootfs/etc/ld.so.conf << EOF
/lib
/usr/lib
/usr/local/lib
EOF

# å¦‚æžœç³»ç»Ÿæ”¯æŒï¼Œå¯ä»¥è¿è¡Œldconfigæ›´æ–°ç¼“å­˜
# ldconfig -r rootfs/
```

---

## 7. ðŸ“¦ æ–‡ä»¶ç³»ç»Ÿæ‰“åŒ…æ–¹æ³•


### 7.1 æ–‡ä»¶ç³»ç»Ÿé•œåƒæ ¼å¼é€‰æ‹©


**å¸¸è§çš„åµŒå…¥å¼æ–‡ä»¶ç³»ç»Ÿæ ¼å¼**ï¼š

| æ ¼å¼ | **ç‰¹ç‚¹** | **é€‚ç”¨åœºæ™¯** | **å¤§å°** |
|------|---------|------------|---------|
| ðŸ”¸ **cramfs** | `åªè¯»ï¼ŒåŽ‹ç¼©çŽ‡é«˜` | `èµ„æºæžåº¦å—é™` | `å‡ MB` |
| ðŸ”¸ **squashfs** | `åªè¯»ï¼ŒåŽ‹ç¼©çŽ‡æžé«˜` | `åªè¯»æ ¹æ–‡ä»¶ç³»ç»Ÿ` | `å‡ MB` |
| ðŸ”¸ **ext2** | `è¯»å†™ï¼Œæ— æ—¥å¿—` | `ç®€å•åµŒå…¥å¼ç³»ç»Ÿ` | `å‡ åMB` |
| ðŸ”¸ **jffs2** | `è¯»å†™ï¼Œé€‚åˆFlash` | `NAND Flash` | `å¯å˜` |
| ðŸ”¸ **ubifs** | `è¯»å†™ï¼Œç£¨æŸå‡è¡¡` | `å¤§å®¹é‡NAND Flash` | `å¯å˜` |

### 7.2 åˆ¶ä½œcramfsæ–‡ä»¶ç³»ç»Ÿ


**cramfsç‰¹ç‚¹**ï¼š
- åªè¯»æ–‡ä»¶ç³»ç»Ÿ
- åŽ‹ç¼©å­˜å‚¨ï¼ŒèŠ‚çœç©ºé—´
- å¯åŠ¨é€Ÿåº¦å¿«

```bash
# å®‰è£…cramfså·¥å…·
sudo apt-get install cramfsprogs

# åˆ¶ä½œcramfsé•œåƒ
mkcramfs rootfs/ rootfs.cramfs

# æŸ¥çœ‹é•œåƒä¿¡æ¯
cramfsck -v rootfs.cramfs
```

### 7.3 åˆ¶ä½œsquashfsæ–‡ä»¶ç³»ç»Ÿ


```bash
# å®‰è£…squashfså·¥å…·
sudo apt-get install squashfs-tools

# åˆ¶ä½œsquashfsé•œåƒï¼ˆé«˜åŽ‹ç¼©çŽ‡ï¼‰
mksquashfs rootfs/ rootfs.squashfs -comp xz

# æŸ¥çœ‹é•œåƒå†…å®¹
unsquashfs -l rootfs.squashfs
```

### 7.4 åˆ¶ä½œext2æ–‡ä»¶ç³»ç»Ÿ


```bash
# åˆ›å»ºç©ºçš„é•œåƒæ–‡ä»¶ï¼ˆ64MBï¼‰
dd if=/dev/zero of=rootfs.ext2 bs=1M count=64

# æ ¼å¼åŒ–ä¸ºext2æ–‡ä»¶ç³»ç»Ÿ
mkfs.ext2 rootfs.ext2

# åˆ›å»ºæŒ‚è½½ç‚¹å¹¶æŒ‚è½½
mkdir -p /tmp/mnt
sudo mount -o loop rootfs.ext2 /tmp/mnt

# å¤åˆ¶æ–‡ä»¶ç³»ç»Ÿå†…å®¹
sudo cp -a rootfs/* /tmp/mnt/

# å¸è½½
sudo umount /tmp/mnt
```

### 7.5 æ–‡ä»¶ç³»ç»Ÿå¤§å°ä¼˜åŒ–


**æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿå¤§å°**ï¼š
```bash
# æŸ¥çœ‹ç›®å½•å¤§å°
du -sh rootfs/

# æŸ¥çœ‹å„å­ç›®å½•å¤§å°
du -h --max-depth=1 rootfs/

# è¾“å‡ºç¤ºä¾‹ï¼š
512K    rootfs/bin
128K    rootfs/sbin  
2.1M    rootfs/lib
64K     rootfs/etc
3.2M    total
```

**å¤§å°ä¼˜åŒ–æŠ€å·§**ï¼š
- ðŸ”¸ **ç§»é™¤è°ƒè¯•ä¿¡æ¯**ï¼š`strip rootfs/bin/*`
- ðŸ”¸ **åŽ‹ç¼©åº“æ–‡ä»¶**ï¼šä½¿ç”¨upxåŽ‹ç¼©
- ðŸ”¸ **ç²¾ç®€é…ç½®æ–‡ä»¶**ï¼šåªä¿ç•™å¿…éœ€é…ç½®
- ðŸ”¸ **é€‰æ‹©åˆé€‚çš„BusyBoxé…ç½®**ï¼šç¦ç”¨ä¸éœ€è¦çš„åŠŸèƒ½

---

## 8. ðŸ”’ åªè¯»æ–‡ä»¶ç³»ç»Ÿè®¾è®¡


### 8.1 åªè¯»æ–‡ä»¶ç³»ç»Ÿçš„ä¼˜åŠ¿


**ä¸ºä»€ä¹ˆè¦è®¾è®¡åªè¯»æ–‡ä»¶ç³»ç»Ÿ**ï¼š
- ðŸ”¸ **æ•°æ®å®‰å…¨**ï¼šæ„å¤–æ–­ç”µä¸ä¼šæŸåæ–‡ä»¶ç³»ç»Ÿ
- ðŸ”¸ **é˜²ç¯¡æ”¹**ï¼šé˜²æ­¢æ¶æ„è½¯ä»¶ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶
- ðŸ”¸ **Flashå¯¿å‘½**ï¼šå‡å°‘Flashå­˜å‚¨å™¨çš„å†™å…¥æ¬¡æ•°
- ðŸ”¸ **ä¸€è‡´æ€§**ï¼šå¤šä¸ªè®¾å¤‡ä½¿ç”¨ç›¸åŒçš„ç³»ç»Ÿé•œåƒ

### 8.2 åªè¯»æ–‡ä»¶ç³»ç»Ÿè®¾è®¡è¦ç‚¹


**ç›®å½•è§„åˆ’**ï¼š
```
åªè¯»åˆ†åŒº (RO)ï¼š
/bin/, /sbin/, /usr/    â† ç³»ç»Ÿç¨‹åºå’Œåº“
/etc/ (éƒ¨åˆ†é…ç½®)       â† ä¸å˜çš„é…ç½®æ–‡ä»¶

å¯å†™åˆ†åŒº (RW)ï¼š
/tmp/                  â† ä¸´æ—¶æ–‡ä»¶
/var/                  â† æ—¥å¿—å’Œè¿è¡Œæ—¶æ•°æ®
/etc/ (éƒ¨åˆ†é…ç½®)       â† å¯å˜é…ç½®æ–‡ä»¶
```

**é…ç½®æ–‡ä»¶å¤„ç†ç­–ç•¥**ï¼š
```bash
# åœ¨åªè¯»æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºé»˜è®¤é…ç½®
mkdir -p rootfs/etc/default

# å°†é»˜è®¤é…ç½®æ”¾åœ¨åªè¯»åŒºåŸŸ
cat > rootfs/etc/default/network << EOF
INTERFACE=eth0
IPADDR=192.168.1.100
NETMASK=255.255.255.0
GATEWAY=192.168.1.1
EOF

# å¯åŠ¨æ—¶å¤åˆ¶åˆ°å¯å†™åŒºåŸŸ
cat > rootfs/etc/init.d/S10config << EOF
#!/bin/sh
# å¤åˆ¶é»˜è®¤é…ç½®åˆ°å¯å†™åŒºåŸŸ
mkdir -p /tmp/etc
cp -r /etc/default/* /tmp/etc/
EOF
```

### 8.3 tmpfsçš„ä½¿ç”¨


**tmpfsæ–‡ä»¶ç³»ç»Ÿ**ï¼š
tmpfsæ˜¯åŸºäºŽå†…å­˜çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ–­ç”µåŽæ•°æ®ä¸¢å¤±ï¼Œä½†è¯»å†™é€Ÿåº¦å¿«ã€‚

```bash
# åœ¨initè„šæœ¬ä¸­æŒ‚è½½tmpfs
mount -t tmpfs tmpfs /tmp
mount -t tmpfs tmpfs /var
mount -t tmpfs tmpfs /run

# åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æž„
mkdir -p /var/log /var/run /var/lock
mkdir -p /tmp/etc
```

### 8.4 æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ


**å…³é”®æ•°æ®ä¿å­˜ç­–ç•¥**ï¼š
```bash
#!/bin/sh
# save_config.sh - ä¿å­˜é…ç½®åˆ°æŒä¹…å­˜å‚¨

PERSISTENT_DIR="/mnt/data"  # å¯å†™åˆ†åŒºæŒ‚è½½ç‚¹
CONFIG_BACKUP="$PERSISTENT_DIR/config.tar.gz"

save_config() {
    echo "ä¿å­˜é…ç½®åˆ°æŒä¹…å­˜å‚¨..."
    
    # åˆ›å»ºé…ç½®å¤‡ä»½
    tar -czf "$CONFIG_BACKUP" -C /tmp etc/
    
    # åŒæ­¥åˆ°å­˜å‚¨è®¾å¤‡
    sync
    
    echo "é…ç½®ä¿å­˜å®Œæˆ"
}

restore_config() {
    echo "ä»ŽæŒä¹…å­˜å‚¨æ¢å¤é…ç½®..."
    
    if [ -f "$CONFIG_BACKUP" ]; then
        cd /tmp
        tar -xzf "$CONFIG_BACKUP"
        echo "é…ç½®æ¢å¤å®Œæˆ"
    else
        echo "æœªæ‰¾åˆ°é…ç½®å¤‡ä»½ï¼Œä½¿ç”¨é»˜è®¤é…ç½®"
        cp -r /etc/default/* /tmp/etc/
    fi
}

# æ ¹æ®å‚æ•°æ‰§è¡Œç›¸åº”æ“ä½œ
case "$1" in
    save)
        save_config
        ;;
    restore)
        restore_config
        ;;
    *)
        echo "ç”¨æ³•: $0 {save|restore}"
        exit 1
        ;;
esac
```

---

## 9. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸ”¸ æ ¹æ–‡ä»¶ç³»ç»Ÿæœ¬è´¨ï¼šLinuxç³»ç»Ÿå¯åŠ¨åŽç¬¬ä¸€ä¸ªæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ
ðŸ”¸ BusyBoxä½œç”¨ï¼šæä¾›åµŒå…¥å¼ç³»ç»Ÿæ‰€éœ€çš„åŸºæœ¬å‘½ä»¤å·¥å…·é›†
ðŸ”¸ è®¾å¤‡èŠ‚ç‚¹æ¦‚å¿µï¼šè®¿é—®ç¡¬ä»¶è®¾å¤‡çš„æ–‡ä»¶ç³»ç»ŸæŽ¥å£
ðŸ”¸ åˆå§‹åŒ–è„šæœ¬ï¼šç³»ç»Ÿå¯åŠ¨åŽç¬¬ä¸€ä¸ªæ‰§è¡Œçš„ç”¨æˆ·ç©ºé—´ç¨‹åº
ðŸ”¸ åº“æ–‡ä»¶ä¾èµ–ï¼šç¨‹åºè¿è¡Œæ—¶éœ€è¦çš„å…±äº«ä»£ç åº“
ðŸ”¸ æ–‡ä»¶ç³»ç»Ÿæ‰“åŒ…ï¼šå°†ç›®å½•ç»“æž„åˆ¶ä½œæˆå¯éƒ¨ç½²çš„é•œåƒæ–‡ä»¶
ðŸ”¸ åªè¯»æ–‡ä»¶ç³»ç»Ÿï¼šæé«˜ç³»ç»Ÿç¨³å®šæ€§å’Œæ•°æ®å®‰å…¨æ€§çš„è®¾è®¡
```

### 9.2 åˆ¶ä½œæµç¨‹æ€»ç»“


**æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ¶ä½œçš„å®Œæ•´æµç¨‹**ï¼š
```
1. ç¼–è¯‘é…ç½®BusyBox â†’ èŽ·å¾—åŸºæœ¬å‘½ä»¤å·¥å…·
2. åˆ›å»ºç›®å½•ç»“æž„ â†’ å»ºç«‹æ ‡å‡†Linuxç›®å½•å¸ƒå±€  
3. åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ â†’ æä¾›ç¡¬ä»¶è®¾å¤‡è®¿é—®æŽ¥å£
4. ç¼–å†™åˆå§‹åŒ–è„šæœ¬ â†’ å®šä¹‰ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹
5. å¤„ç†åº“æ–‡ä»¶ä¾èµ– â†’ ç¡®ä¿ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œ
6. æ‰“åŒ…æ–‡ä»¶ç³»ç»Ÿ â†’ ç”Ÿæˆå¯éƒ¨ç½²çš„é•œåƒ
7. ä¼˜åŒ–è®¾è®¡ â†’ æ ¹æ®éœ€æ±‚è¿›è¡Œåªè¯»ç­‰ä¼˜åŒ–
```

### 9.3 å…³é”®ç†è§£è¦ç‚¹


**ðŸ”¹ ä¸ºä»€ä¹ˆBusyBoxé€‚åˆåµŒå…¥å¼**ï¼š
```
ç©ºé—´æ•ˆçŽ‡ï¼š
- ä¼ ç»Ÿæ–¹å¼ï¼šæ¯ä¸ªå‘½ä»¤ç‹¬ç«‹æ–‡ä»¶ï¼Œæ€»è®¡æ•°MB
- BusyBoxæ–¹å¼ï¼šæ‰€æœ‰å‘½ä»¤å…±äº«ï¼Œä»…1MBå·¦å³
- é€šè¿‡ç¬¦å·é“¾æŽ¥å®žçŽ°å‘½ä»¤è°ƒç”¨

åŠŸèƒ½å®Œæ•´ï¼š
- åŒ…å«300+å¸¸ç”¨Linuxå‘½ä»¤
- æ»¡è¶³åŸºæœ¬ç³»ç»Ÿç®¡ç†éœ€æ±‚
- å¯æ ¹æ®éœ€è¦è£å‰ªåŠŸèƒ½
```

**ðŸ”¹ è®¾å¤‡èŠ‚ç‚¹çš„é‡è¦æ€§**ï¼š
```
ç¡¬ä»¶æŠ½è±¡ï¼š
- å°†ç¡¬ä»¶è®¾å¤‡æŠ½è±¡ä¸ºæ–‡ä»¶
- ç»Ÿä¸€çš„è¯»å†™æŽ¥å£
- ä¾¿äºŽåº”ç”¨ç¨‹åºè®¿é—®ç¡¬ä»¶

ç³»ç»Ÿå¿…éœ€ï¼š
- consoleï¼šç³»ç»Ÿè¾“å‡º
- nullï¼šç©ºè®¾å¤‡ï¼Œä¸¢å¼ƒè¾“å‡º
- ä¸²å£è®¾å¤‡ï¼šé€šä¿¡æŽ¥å£
```

**ðŸ”¹ åªè¯»æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡æ€è·¯**ï¼š
```
åˆ†ç¦»è®¾è®¡ï¼š
- ä¸å˜éƒ¨åˆ†ï¼šåªè¯»åˆ†åŒºï¼ˆç³»ç»Ÿæ–‡ä»¶ï¼‰
- å¯å˜éƒ¨åˆ†ï¼šå¯å†™åˆ†åŒºæˆ–å†…å­˜æ–‡ä»¶ç³»ç»Ÿ
- é…ç½®ç­–ç•¥ï¼šé»˜è®¤é…ç½®+è¿è¡Œæ—¶ä¿®æ”¹

æ•°æ®å®‰å…¨ï¼š
- é˜²æ­¢æ„å¤–æŸå
- å…³é”®é…ç½®æŒä¹…åŒ–ä¿å­˜
- å¯åŠ¨æ—¶è‡ªåŠ¨æ¢å¤
```

### 9.4 å®žé™…åº”ç”¨æŒ‡å¯¼


**åˆ¶ä½œæŠ€å·§**ï¼š
- ðŸŽ¯ **å…ˆæ±‚åŠŸèƒ½ï¼Œå†æ±‚ä¼˜åŒ–**ï¼šç¡®ä¿åŸºæœ¬åŠŸèƒ½æ­£å¸¸åŽå†ä¼˜åŒ–å¤§å°
- ðŸŽ¯ **åˆ†å±‚æµ‹è¯•**ï¼šæ¯å®Œæˆä¸€æ­¥éƒ½è¦æµ‹è¯•éªŒè¯
- ðŸŽ¯ **ä¿ç•™è°ƒè¯•ä¿¡æ¯**ï¼šå¼€å‘é˜¶æ®µä¿ç•™ï¼Œæœ€ç»ˆäº§å“æ—¶åŽ»é™¤
- ðŸŽ¯ **æ–‡æ¡£è®°å½•**ï¼šè®°å½•é…ç½®é€‰é¡¹å’Œå®šåˆ¶å†…å®¹

**å¸¸è§é—®é¢˜å¤„ç†**ï¼š
- â— **å¯åŠ¨å¤±è´¥**ï¼šæ£€æŸ¥initè„šæœ¬æƒé™å’Œè·¯å¾„
- â— **å‘½ä»¤æ‰¾ä¸åˆ°**ï¼šæ£€æŸ¥BusyBoxé…ç½®å’ŒPATHçŽ¯å¢ƒå˜é‡
- â— **è®¾å¤‡æ— æ³•è®¿é—®**ï¼šæ£€æŸ¥è®¾å¤‡èŠ‚ç‚¹å’Œé©±åŠ¨åŠ è½½
- â— **åº“æ–‡ä»¶ç¼ºå¤±**ï¼šä½¿ç”¨lddæ£€æŸ¥ä¾èµ–å…³ç³»

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š
- âš¡ **å¯åŠ¨ä¼˜åŒ–**ï¼šç²¾ç®€initè„šæœ¬ï¼Œå¹¶è¡Œå¯åŠ¨æœåŠ¡
- âš¡ **ç©ºé—´ä¼˜åŒ–**ï¼šstripäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€‰æ‹©åˆé€‚çš„åŽ‹ç¼©ç®—æ³•
- âš¡ **è¿è¡Œä¼˜åŒ–**ï¼šåˆç†é…ç½®å†…å­˜æ–‡ä»¶ç³»ç»Ÿå¤§å°

**æ ¸å¿ƒè®°å¿†**ï¼š
- æ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯ç³»ç»Ÿè¿è¡Œçš„åŸºç¡€æ¡†æž¶
- BusyBoxæ˜¯åµŒå…¥å¼Linuxçš„æ ¸å¿ƒå·¥å…·é›†
- è®¾å¤‡èŠ‚ç‚¹æ˜¯ç¡¬ä»¶è®¿é—®çš„æ¡¥æ¢
- åˆå§‹åŒ–è„šæœ¬å®šä¹‰ç³»ç»Ÿå¯åŠ¨è¡Œä¸º
- åªè¯»è®¾è®¡æé«˜ç³»ç»Ÿç¨³å®šæ€§å’Œå®‰å…¨æ€§