---
title: 13ã€å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ
---
## ğŸ“š ç›®å½•

1. [å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒåŸºç¡€æ¦‚å¿µ](#1-å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒåŸºç¡€æ¦‚å¿µ)
2. [Dockerå¼€å‘ç¯å¢ƒæ­å»º](#2-Dockerå¼€å‘ç¯å¢ƒæ­å»º)
3. [Dockerfileç¼–å†™æœ€ä½³å®è·µ](#3-Dockerfileç¼–å†™æœ€ä½³å®è·µ)
4. [å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–](#4-å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–)
5. [å¼€å‘å®¹å™¨é…ç½®](#5-å¼€å‘å®¹å™¨é…ç½®)
6. [Docker Composeå¼€å‘æ ˆ](#6-Docker-Composeå¼€å‘æ ˆ)
7. [å·æŒ‚è½½ä¸æ–‡ä»¶åŒæ­¥](#7-å·æŒ‚è½½ä¸æ–‡ä»¶åŒæ­¥)
8. [ç½‘ç»œé…ç½®ä¸ç«¯å£æ˜ å°„](#8-ç½‘ç»œé…ç½®ä¸ç«¯å£æ˜ å°„)
9. [å®¹å™¨æ³¨å†Œè¡¨ä½¿ç”¨](#9-å®¹å™¨æ³¨å†Œè¡¨ä½¿ç”¨)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ—ï¸ å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒåŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ


**å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒ**å°±æ˜¯æŠŠä½ çš„å¼€å‘å·¥å…·ã€è¿è¡Œç¯å¢ƒã€ä¾èµ–åº“ç­‰æ‰“åŒ…åœ¨ä¸€ä¸ª"ç›’å­"é‡Œï¼Œè¿™ä¸ªç›’å­å¯ä»¥åœ¨ä»»ä½•æœºå™¨ä¸Šå®Œç¾è¿è¡Œã€‚

> **ğŸ’¡ æ ¸å¿ƒç†è§£**
> å®¹å™¨åŒ–å¼€å‘ = æ ‡å‡†åŒ–å·¥ä½œå°ï¼Œæ— è®ºåœ¨å“ªå°ç”µè„‘éƒ½èƒ½ä¿è¯å®Œå…¨ä¸€è‡´çš„å¼€å‘ä½“éªŒ

**ğŸ”¸ ä¼ ç»Ÿå¼€å‘ vs å®¹å™¨åŒ–å¼€å‘å¯¹æ¯”ï¼š**
```
ä¼ ç»Ÿå¼€å‘ç—›ç‚¹ï¼š
å¼€å‘è€…Aï¼šPython 3.8 + Ubuntu 20.04 â†’ ä»£ç è¿è¡Œæ­£å¸¸
å¼€å‘è€…Bï¼šPython 3.9 + CentOS 8   â†’ ä»£ç æŠ¥é”™
å¼€å‘è€…Cï¼šPython 3.7 + Windows 10  â†’ ä¾èµ–å®‰è£…å¤±è´¥

å®¹å™¨åŒ–å¼€å‘ä¼˜åŠ¿ï¼š
æ‰€æœ‰å¼€å‘è€…ï¼šä½¿ç”¨åŒä¸€ä¸ªDockeré•œåƒ â†’ ç¯å¢ƒå®Œå…¨ä¸€è‡´ â†’ é—®é¢˜å¤ç°ç®€å•
```

### 1.2 å®¹å™¨åŒ–å¼€å‘çš„æ ¸å¿ƒä»·å€¼


**ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š**
- **ç¯å¢ƒä¸€è‡´æ€§**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ç›¸åŒ
- **å¿«é€Ÿå¯åŠ¨**ï¼šæ–°äººå‡ åˆ†é’Ÿå°±èƒ½æ­å»ºå®Œæ•´å¼€å‘ç¯å¢ƒ
- **ä¾èµ–éš”ç¦»**ï¼šä¸åŒé¡¹ç›®çš„ä¾èµ–ä¸ä¼šç›¸äº’å†²çª
- **ç‰ˆæœ¬ç®¡ç†**ï¼šå¯ä»¥åŒæ—¶ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬çš„å¼€å‘ç¯å¢ƒ

**ğŸ“Š æ”¶ç›Šå¯¹æ¯”ï¼š**

| ä¼ ç»Ÿæ–¹å¼ | **å®¹å™¨åŒ–æ–¹å¼** | **æå‡æ•ˆæœ** |
|---------|---------------|-------------|
| ç¯å¢ƒæ­å»º2-3å¤© | **5-10åˆ†é’Ÿ** | `æ—¶é—´èŠ‚çœ95%` |
| ç¯å¢ƒé—®é¢˜é¢‘ç¹ | **å‡ ä¹æ— ç¯å¢ƒé—®é¢˜** | `æ•…éšœç‡é™ä½90%` |
| æ–°äººä¸Šæ‰‹å›°éš¾ | **æ ‡å‡†åŒ–æµç¨‹** | `å­¦ä¹ æˆæœ¬é™ä½80%` |

---

## 2. âš™ï¸ Dockerå¼€å‘ç¯å¢ƒæ­å»º


### 2.1 DockeråŸºç¡€ç¯å¢ƒå‡†å¤‡


**ğŸ”§ ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥ï¼š**
```bash
# æ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬
cat /etc/os-release

# æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬ï¼ˆéœ€è¦3.10+ï¼‰
uname -r

# æ£€æŸ¥CPUæ¶æ„
arch
```

### 2.2 Dockerå®‰è£…ä¸é…ç½®


**âš¡ Ubuntu/Debianå¿«é€Ÿå®‰è£…ï¼š**
```bash
# æ›´æ–°åŒ…ç®¡ç†å™¨
sudo apt update

# å®‰è£…å¿…è¦ä¾èµ–
sudo apt install apt-transport-https ca-certificates curl software-properties-common

# æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

# æ·»åŠ Dockerä»“åº“
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"

# å®‰è£…Docker CE
sudo apt update && sudo apt install docker-ce

# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker
```

**ğŸ”¹ ç”¨æˆ·æƒé™é…ç½®ï¼š**
```bash
# å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç»„ï¼ˆé¿å…æ¯æ¬¡sudoï¼‰
sudo usermod -aG docker $USER

# é‡æ–°ç™»å½•æˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿æƒé™ç”Ÿæ•ˆ
newgrp docker

# æµ‹è¯•å®‰è£…
docker --version
docker run hello-world
```

### 2.3 å¼€å‘å·¥å…·é…ç½®


**ğŸ“‹ å¿…å¤‡å·¥å…·å®‰è£…ï¼š**
- **Docker Compose**ï¼šå¤šå®¹å™¨åº”ç”¨ç¼–æ’
- **VS Code Dockeræ’ä»¶**ï¼šå¯è§†åŒ–å®¹å™¨ç®¡ç†
- **Docker Desktop**ï¼šå›¾å½¢åŒ–ç•Œé¢ï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£…Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# éªŒè¯å®‰è£…
docker-compose --version
```

---

## 3. ğŸ“ Dockerfileç¼–å†™æœ€ä½³å®è·µ


### 3.1 DockerfileåŸºç¡€ç»“æ„


**Dockerfile**å°±æ˜¯å®¹å™¨çš„"è£…ä¿®å›¾çº¸"ï¼Œæè¿°å¦‚ä½•ä¸€æ­¥æ­¥æ­å»ºå¼€å‘ç¯å¢ƒã€‚

> **ğŸ” å®è·µæ„ä¹‰**
> Dockerfile = ç¯å¢ƒæ­å»ºçš„æ ‡å‡†åŒ–è„šæœ¬ï¼Œç¡®ä¿æ¯æ¬¡æ„å»ºéƒ½å¾—åˆ°ç›¸åŒçš„ç»“æœ

**ğŸ—ï¸ åŸºç¡€ç»“æ„æ¨¡æ¿ï¼š**
```dockerfile
# é€‰æ‹©åŸºç¡€é•œåƒ
FROM ubuntu:20.04

# è®¾ç½®ç»´æŠ¤è€…ä¿¡æ¯
LABEL maintainer="developer@company.com"

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV DEBIAN_FRONTEND=noninteractive
ENV PYTHON_VERSION=3.9

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    python3 \
    python3-pip \
    git \
    vim \
    && rm -rf /var/lib/apt/lists/*

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip3 install -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8000

# è®¾ç½®å¯åŠ¨å‘½ä»¤
CMD ["python3", "app.py"]
```

### 3.2 ä¼˜åŒ–æœ€ä½³å®è·µ


**ğŸš€ æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š**

**ğŸ”¸ åˆ©ç”¨æ„å»ºç¼“å­˜ï¼š**
```dockerfile
# âŒ é”™è¯¯æ–¹å¼ï¼šæ¯æ¬¡ä»£ç å˜æ›´éƒ½é‡è£…ä¾èµ–
COPY . .
RUN pip install -r requirements.txt

# âœ… æ­£ç¡®æ–¹å¼ï¼šå…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶ï¼Œåˆ©ç”¨ç¼“å­˜
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
```

**ğŸ”¹ å‡å°‘é•œåƒå±‚æ•°ï¼š**
```dockerfile
# âŒ å¤šä¸ªRUNæŒ‡ä»¤åˆ›å»ºå¤šä¸ªå±‚
RUN apt-get update
RUN apt-get install -y python3
RUN apt-get install -y git
RUN rm -rf /var/lib/apt/lists/*

# âœ… åˆå¹¶ä¸ºå•ä¸ªRUNæŒ‡ä»¤
RUN apt-get update && apt-get install -y \
    python3 \
    git \
    && rm -rf /var/lib/apt/lists/*
```

**â­ é•œåƒä½“ç§¯ä¼˜åŒ–ï¼š**
```dockerfile
# ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼ˆç¨åè¯¦è§£ï¼‰
FROM node:16 AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:16-alpine
WORKDIR /app
COPY --from=builder /app/node_modules ./node_modules
COPY . .
CMD ["node", "server.js"]
```

### 3.3 å®‰å…¨æ€§æœ€ä½³å®è·µ


**ğŸ”’ å®‰å…¨é…ç½®è¦ç‚¹ï¼š**
- ä½¿ç”¨érootç”¨æˆ·è¿è¡Œåº”ç”¨
- å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ
- æœ€å°åŒ–å®‰è£…çš„è½¯ä»¶åŒ…
- æ‰«æå®‰å…¨æ¼æ´

```dockerfile
# åˆ›å»ºérootç”¨æˆ·
RUN groupadd -r appuser && useradd -r -g appuser appuser

# è®¾ç½®æ–‡ä»¶æƒé™
COPY --chown=appuser:appuser . /app

# åˆ‡æ¢åˆ°érootç”¨æˆ·
USER appuser

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/health || exit 1
```

---

## 4. ğŸ”„ å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–


### 4.1 å¤šé˜¶æ®µæ„å»ºæ¦‚å¿µ


**å¤šé˜¶æ®µæ„å»º**å°±åƒè£…ä¿®æˆ¿å­ï¼šå…ˆåœ¨å·¥åœ°åˆ¶ä½œç»„ä»¶ï¼Œå†è¿è¾“åˆ°ç°åœºç»„è£…ï¼Œæœ€ç»ˆæˆ¿å­é‡Œåªæœ‰å¿…éœ€çš„å®¶å…·ã€‚

> **ğŸ’¡ æ ¸å¿ƒç†è§£**
> å¤šé˜¶æ®µæ„å»º = ç¼–è¯‘é˜¶æ®µ + è¿è¡Œé˜¶æ®µï¼Œæœ€ç»ˆé•œåƒåªåŒ…å«è¿è¡Œå¿…éœ€çš„æ–‡ä»¶

### 4.2 å…¸å‹å¤šé˜¶æ®µæ„å»ºç¤ºä¾‹


**ğŸ”§ Goåº”ç”¨å¤šé˜¶æ®µæ„å»ºï¼š**
```dockerfile
# é˜¶æ®µ1ï¼šç¼–è¯‘é˜¶æ®µ
FROM golang:1.19 AS builder
WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download
COPY . .
RUN CGO_ENABLED=0 GOOS=linux go build -o main .

# é˜¶æ®µ2ï¼šè¿è¡Œé˜¶æ®µ
FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /app/main .
CMD ["./main"]
```

**ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”ï¼š**
```
å•é˜¶æ®µæ„å»ºé•œåƒå¤§å°ï¼š~800MBï¼ˆåŒ…å«Goå·¥å…·é“¾ï¼‰
å¤šé˜¶æ®µæ„å»ºé•œåƒå¤§å°ï¼š~15MBï¼ˆä»…åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶ï¼‰
ä½“ç§¯å‹ç¼©ç‡ï¼š98%
```

### 4.3 å‰ç«¯åº”ç”¨å¤šé˜¶æ®µæ„å»º


**ğŸ¯ Reactåº”ç”¨ç¤ºä¾‹ï¼š**
```dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:16 AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

**ğŸ”¹ ä¼˜åŒ–ç­–ç•¥è¯¦è§£ï¼š**
- **æ„å»ºé˜¶æ®µ**ï¼šå®‰è£…æ‰€æœ‰å¼€å‘ä¾èµ–ï¼Œæ‰§è¡Œæ„å»ºä»»åŠ¡
- **ç”Ÿäº§é˜¶æ®µ**ï¼šåªå¤åˆ¶æ„å»ºäº§ç‰©ï¼Œä½¿ç”¨è½»é‡çº§webæœåŠ¡å™¨
- **ç»“æœ**ï¼šå¼€å‘ä¾èµ–å®Œå…¨å‰”é™¤ï¼Œé•œåƒä½“ç§¯æœ€å°åŒ–

---

## 5. ğŸ› ï¸ å¼€å‘å®¹å™¨é…ç½®


### 5.1 å¼€å‘å®¹å™¨è®¾è®¡åŸåˆ™


**å¼€å‘å®¹å™¨**åº”è¯¥å°½å¯èƒ½æ¥è¿‘ç”Ÿäº§ç¯å¢ƒï¼ŒåŒæ—¶æä¾›ä¾¿åˆ©çš„å¼€å‘å·¥å…·ã€‚

**ğŸ¯ è®¾è®¡ç›®æ ‡ï¼š**
- **å¿«é€Ÿè¿­ä»£**ï¼šä»£ç ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ
- **è°ƒè¯•å‹å¥½**ï¼šæ”¯æŒæ–­ç‚¹è°ƒè¯•å’Œæ—¥å¿—æŸ¥çœ‹
- **å·¥å…·é½å…¨**ï¼šåŒ…å«å¿…è¦çš„å¼€å‘å·¥å…·
- **æŒä¹…åŒ–**ï¼šå¼€å‘æ•°æ®ä¸å› å®¹å™¨é‡å¯ä¸¢å¤±

### 5.2 å¼€å‘å®¹å™¨é…ç½®ç¤ºä¾‹


**ğŸ“‹ Pythonå¼€å‘å®¹å™¨ï¼š**
```dockerfile
FROM python:3.9-slim

# å®‰è£…å¼€å‘å·¥å…·
RUN apt-get update && apt-get install -y \
    git \
    vim \
    curl \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£…å¼€å‘ä¾èµ–
COPY requirements-dev.txt .
RUN pip install -r requirements-dev.txt

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /workspace

# å¼€å‘æ¨¡å¼å¯åŠ¨
CMD ["python", "-m", "flask", "run", "--host=0.0.0.0", "--debug"]
```

### 5.3 å¼€å‘å®¹å™¨å¯åŠ¨è„šæœ¬


**âš¡ ä¾¿æ·å¯åŠ¨è„šæœ¬ï¼š**
```bash
#!/bin/bash
# dev-start.sh

# æ„å»ºå¼€å‘é•œåƒ
docker build -t myapp-dev -f Dockerfile.dev .

# å¯åŠ¨å¼€å‘å®¹å™¨
docker run -it --rm \
    -v $(pwd):/workspace \
    -v ~/.ssh:/root/.ssh:ro \
    -p 8000:8000 \
    -p 5432:5432 \
    --name myapp-dev \
    myapp-dev

# ä½¿ç”¨è¯´æ˜
echo "å¼€å‘ç¯å¢ƒå·²å¯åŠ¨ï¼š"
echo "- åº”ç”¨è®¿é—®ï¼šhttp://localhost:8000"
echo "- ä»£ç åŒæ­¥ï¼šå½“å‰ç›®å½•å·²æŒ‚è½½åˆ° /workspace"
echo "- å®¹å™¨åç§°ï¼šmyapp-dev"
```

**ğŸ”§ å¸¸ç”¨å¼€å‘å‘½ä»¤ï¼š**
```bash
# è¿›å…¥è¿è¡Œä¸­çš„å¼€å‘å®¹å™¨
docker exec -it myapp-dev bash

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f myapp-dev

# åœæ­¢å¼€å‘å®¹å™¨
docker stop myapp-dev
```

---

## 6. ğŸ¼ Docker Composeå¼€å‘æ ˆ


### 6.1 Docker ComposeåŸºç¡€æ¦‚å¿µ


**Docker Compose**å°±åƒä¹é˜ŸæŒ‡æŒ¥ï¼Œåè°ƒå¤šä¸ªå®¹å™¨ï¼ˆä¹æ‰‹ï¼‰å…±åŒæ¼”å¥ä¸€é¦–å®Œæ•´çš„ä¹æ›²ï¼ˆåº”ç”¨ç³»ç»Ÿï¼‰ã€‚

> **ğŸ” å®è·µæ„ä¹‰**
> ç°ä»£åº”ç”¨ = å‰ç«¯ + åç«¯ + æ•°æ®åº“ + ç¼“å­˜ï¼ŒComposeè®©å¤šæœåŠ¡ååŒå˜å¾—ç®€å•

### 6.2 å®Œæ•´å¼€å‘æ ˆé…ç½®


**ğŸ“‹ docker-compose.ymlç¤ºä¾‹ï¼š**
```yaml
version: '3.8'

services:
  # å‰ç«¯æœåŠ¡
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    depends_on:
      - backend

  # åç«¯æœåŠ¡
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/myapp
      - REDIS_URL=redis://redis:6379
    depends_on:
      - db
      - redis

  # æ•°æ®åº“æœåŠ¡
  db:
    image: postgres:13
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_DB=myapp
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # ç¼“å­˜æœåŠ¡
  redis:
    image: redis:6-alpine
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

### 6.3 å¼€å‘æ ˆç®¡ç†å‘½ä»¤


**âš¡ å¸¸ç”¨æ“ä½œå‘½ä»¤ï¼š**
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f backend

# è¿›å…¥æœåŠ¡å®¹å™¨
docker-compose exec backend bash

# é‡å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up --build

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·
docker-compose down -v
```

### 6.4 ç¯å¢ƒé…ç½®ç®¡ç†


**ğŸ”§ å¤šç¯å¢ƒé…ç½®ï¼š**
```bash
# å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

# æµ‹è¯•ç¯å¢ƒ
docker-compose -f docker-compose.yml -f docker-compose.test.yml up

# ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up
```

**ğŸ“„ ç¯å¢ƒç‰¹å®šé…ç½®æ–‡ä»¶ï¼š**
```yaml
# docker-compose.dev.yml
version: '3.8'
services:
  backend:
    environment:
      - DEBUG=True
      - LOG_LEVEL=DEBUG
    volumes:
      - ./backend:/app
    command: ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

---

## 7. ğŸ’¾ å·æŒ‚è½½ä¸æ–‡ä»¶åŒæ­¥


### 7.1 Dockerå·ç±»å‹è¯¦è§£


**Dockerå·**å°±åƒç»™å®¹å™¨æ¥äº†ä¸€ä¸ª"å¤–æ¥ç¡¬ç›˜"ï¼Œè®©æ•°æ®èƒ½åœ¨å®¹å™¨å¤–é•¿æœŸä¿å­˜ã€‚

**ğŸ”¸ ä¸‰ç§å·ç±»å‹å¯¹æ¯”ï¼š**

| å·ç±»å‹ | **ç‰¹ç‚¹** | **ä½¿ç”¨åœºæ™¯** | **æ€§èƒ½** |
|--------|----------|-------------|----------|
| `bind mount` | ç»‘å®šä¸»æœºç›®å½• | ä»£ç å¼€å‘ã€é…ç½®æ–‡ä»¶ | â­â­â­ |
| `named volume` | Dockerç®¡ç†çš„å· | æ•°æ®åº“å­˜å‚¨ã€æŒä¹…åŒ–æ•°æ® | â­â­â­â­â­ |
| `tmpfs mount` | å†…å­˜ä¸´æ—¶å­˜å‚¨ | ç¼“å­˜ã€ä¸´æ—¶æ–‡ä»¶ | â­â­â­â­â­ |

### 7.2 å¼€å‘ç¯å¢ƒå·é…ç½®


**ğŸ”§ ä»£ç çƒ­é‡è½½é…ç½®ï¼š**
```yaml
services:
  app:
    image: node:16
    volumes:
      # ç»‘å®šä»£ç ç›®å½•ï¼ˆå®æ—¶åŒæ­¥ï¼‰
      - ./src:/app/src
      # æ’é™¤node_modulesï¼ˆé¿å…è¦†ç›–ï¼‰
      - /app/node_modules
      # é…ç½®æ–‡ä»¶æŒ‚è½½
      - ./config.json:/app/config.json:ro
    working_dir: /app
    command: ["npm", "run", "dev"]
```

**ğŸ“Š å·æŒ‚è½½æœ€ä½³å®è·µï¼š**
```bash
# å¼€å‘æ—¶ï¼šç»‘å®šæŒ‚è½½æºç 
-v $(pwd)/src:/app/src

# æ•°æ®æŒä¹…åŒ–ï¼šå‘½åå·
-v mysql_data:/var/lib/mysql

# ä¸´æ—¶æ–‡ä»¶ï¼štmpfs
--tmpfs /tmp

# åªè¯»é…ç½®ï¼šåªè¯»æŒ‚è½½
-v ./config:/etc/app:ro
```

### 7.3 æ–‡ä»¶æƒé™å¤„ç†


**âš ï¸ å¸¸è§æƒé™é—®é¢˜ï¼š**
```bash
# é—®é¢˜ï¼šå®¹å™¨å†…å¤–ç”¨æˆ·IDä¸ä¸€è‡´
# å®¹å™¨å†…ï¼šroot (uid=0)
# ä¸»æœºä¸Šï¼šuser (uid=1000)
# ç»“æœï¼šæƒé™å†²çªï¼Œæ–‡ä»¶æ— æ³•è¯»å†™
```

**âœ… è§£å†³æ–¹æ¡ˆï¼š**
```dockerfile
# æ–¹æ¡ˆ1ï¼šç»Ÿä¸€ç”¨æˆ·ID
ARG USER_ID=1000
ARG GROUP_ID=1000
RUN groupadd -g $GROUP_ID appuser && \
    useradd -u $USER_ID -g appuser appuser
USER appuser

# æ–¹æ¡ˆ2ï¼šè¿è¡Œæ—¶æŒ‡å®šç”¨æˆ·
docker run --user $(id -u):$(id -g) myapp

# æ–¹æ¡ˆ3ï¼šå…¥å£è„šæœ¬åŠ¨æ€è°ƒæ•´
#!/bin/bash
# entrypoint.sh
usermod -u $HOST_UID appuser
groupmod -g $HOST_GID appuser
exec "$@"
```

---

## 8. ğŸŒ ç½‘ç»œé…ç½®ä¸ç«¯å£æ˜ å°„


### 8.1 Dockerç½‘ç»œåŸºç¡€


**Dockerç½‘ç»œ**å°±åƒç»™å®¹å™¨æ­å»ºäº†ä¸€ä¸ª"å†…éƒ¨å±€åŸŸç½‘"ï¼Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡æœåŠ¡åäº’ç›¸è®¿é—®ã€‚

**ğŸ”¸ ç½‘ç»œç±»å‹è¯´æ˜ï¼š**
```
bridgeç½‘ç»œï¼ˆé»˜è®¤ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å®¹å™¨A     â”‚    â”‚    å®¹å™¨B     â”‚
â”‚  app:3000   â”‚    â”‚   db:5432   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          docker0ç½‘æ¡¥
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ä¸»æœºç³»ç»Ÿ   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 ç«¯å£æ˜ å°„ç­–ç•¥


**âš¡ ç«¯å£æ˜ å°„è§„åˆ™ï¼š**
```bash
# åŸºæœ¬ç«¯å£æ˜ å°„
-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£

# å…·ä½“ç¤ºä¾‹
-p 8080:80        # ä¸»æœº8080 â†’ å®¹å™¨80
-p 3306:3306      # æ•°æ®åº“æ ‡å‡†ç«¯å£
-p 127.0.0.1:5432:5432  # ä»…æœ¬æœºè®¿é—®

# åŠ¨æ€ç«¯å£åˆ†é…
-p 80             # Dockerè‡ªåŠ¨åˆ†é…ä¸»æœºç«¯å£
```

**ğŸ“‹ å¼€å‘ç¯å¢ƒç«¯å£è§„åˆ’ï¼š**
```yaml
services:
  frontend:
    ports:
      - "3000:3000"    # Reactå¼€å‘æœåŠ¡å™¨
  
  backend:
    ports:
      - "8000:8000"    # APIæœåŠ¡
      - "8001:8001"    # ç®¡ç†åå°
  
  database:
    ports:
      - "5432:5432"    # PostgreSQL
  
  redis:
    ports:
      - "6379:6379"    # Redisç¼“å­˜
```

### 8.3 æœåŠ¡å‘ç°ä¸é€šä¿¡


**ğŸ”— å®¹å™¨é—´é€šä¿¡ç¤ºä¾‹ï¼š**
```python
# Pythonåº”ç”¨è¿æ¥æ•°æ®åº“
# âŒ ç¡¬ç¼–ç IPåœ°å€
DATABASE_URL = "postgresql://user:pass@172.18.0.3:5432/myapp"

# âœ… ä½¿ç”¨æœåŠ¡å
DATABASE_URL = "postgresql://user:pass@database:5432/myapp"
```

**ğŸŒŸ è‡ªå®šä¹‰ç½‘ç»œé…ç½®ï¼š**
```yaml
version: '3.8'

networks:
  frontend_network:
    driver: bridge
  backend_network:
    driver: bridge

services:
  web:
    networks:
      - frontend_network
      - backend_network
  
  api:
    networks:
      - backend_network
  
  db:
    networks:
      - backend_network
```

---

## 9. ğŸ“¦ å®¹å™¨æ³¨å†Œè¡¨ä½¿ç”¨


### 9.1 å®¹å™¨æ³¨å†Œè¡¨æ¦‚å¿µ


**å®¹å™¨æ³¨å†Œè¡¨**å°±åƒ"åº”ç”¨å•†åº—"ï¼Œå­˜å‚¨å’Œåˆ†å‘Dockeré•œåƒï¼Œå›¢é˜Ÿæˆå‘˜å¯ä»¥ä¸Šä¼ å’Œä¸‹è½½æ ‡å‡†åŒ–çš„å¼€å‘ç¯å¢ƒã€‚

> **ğŸ’¡ æ ¸å¿ƒç†è§£**
> æ³¨å†Œè¡¨ = é•œåƒä»“åº“ï¼Œå®ç°å¼€å‘ç¯å¢ƒçš„ç‰ˆæœ¬ç®¡ç†å’Œå›¢é˜Ÿå…±äº«

### 9.2 Docker Hubä½¿ç”¨


**ğŸ”§ åŸºç¡€æ“ä½œï¼š**
```bash
# ç™»å½•Docker Hub
docker login

# æ ‡è®°é•œåƒ
docker tag myapp:latest username/myapp:v1.0

# æ¨é€é•œåƒ
docker push username/myapp:v1.0

# æ‹‰å–é•œåƒ
docker pull username/myapp:v1.0

# æœç´¢é•œåƒ
docker search nodejs
```

**ğŸ“‹ é•œåƒæ ‡ç­¾ç­–ç•¥ï¼š**
```bash
# ç‰ˆæœ¬æ ‡ç­¾
myapp:v1.0.0      # ç¨³å®šç‰ˆæœ¬
myapp:v1.0.0-rc1  # å€™é€‰ç‰ˆæœ¬

# ç¯å¢ƒæ ‡ç­¾
myapp:dev         # å¼€å‘ç¯å¢ƒ
myapp:staging     # æµ‹è¯•ç¯å¢ƒ
myapp:prod        # ç”Ÿäº§ç¯å¢ƒ

# ç‰¹æ€§æ ‡ç­¾
myapp:latest      # æœ€æ–°ç‰ˆæœ¬
myapp:alpine      # è½»é‡ç‰ˆæœ¬
```

### 9.3 ç§æœ‰æ³¨å†Œè¡¨æ­å»º


**ğŸ—ï¸ ç®€å•ç§æœ‰æ³¨å†Œè¡¨ï¼š**
```yaml
# docker-compose.registry.yml
version: '3.8'

services:
  registry:
    image: registry:2
    ports:
      - "5000:5000"
    volumes:
      - registry_data:/var/lib/registry
    environment:
      - REGISTRY_STORAGE_DELETE_ENABLED=true

volumes:
  registry_data:
```

**ğŸ”§ ä½¿ç”¨ç§æœ‰æ³¨å†Œè¡¨ï¼š**
```bash
# æ ‡è®°é•œåƒåˆ°ç§æœ‰æ³¨å†Œè¡¨
docker tag myapp:latest localhost:5000/myapp:latest

# æ¨é€åˆ°ç§æœ‰æ³¨å†Œè¡¨
docker push localhost:5000/myapp:latest

# ä»ç§æœ‰æ³¨å†Œè¡¨æ‹‰å–
docker pull localhost:5000/myapp:latest
```

### 9.4 CI/CDé›†æˆ


**ğŸš€ è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ï¼š**
```yaml
# .github/workflows/docker.yml
name: Build and Push Docker Image

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Build Docker image
        run: docker build -t myapp:${{ github.sha }} .
      
      - name: Login to Docker Hub
        run: echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin
      
      - name: Push Docker image
        run: |
          docker tag myapp:${{ github.sha }} username/myapp:latest
          docker push username/myapp:latest
          docker push username/myapp:${{ github.sha }}
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„åŸºæœ¬æ¦‚å¿µ


```
ğŸ”¸ å®¹å™¨åŒ–å¼€å‘ï¼šæ ‡å‡†åŒ–ã€ä¸€è‡´æ€§çš„å¼€å‘ç¯å¢ƒè§£å†³æ–¹æ¡ˆ
ğŸ”¸ Dockerfileï¼šå®¹å™¨æ„å»ºè„šæœ¬ï¼Œå®šä¹‰ç¯å¢ƒæ­å»ºè¿‡ç¨‹
ğŸ”¸ å¤šé˜¶æ®µæ„å»ºï¼šä¼˜åŒ–é•œåƒå¤§å°ï¼Œåˆ†ç¦»æ„å»ºå’Œè¿è¡Œç¯å¢ƒ
ğŸ”¸ Docker Composeï¼šå¤šå®¹å™¨åº”ç”¨ç¼–æ’ï¼Œç®¡ç†å®Œæ•´å¼€å‘æ ˆ
ğŸ”¸ å·æŒ‚è½½ï¼šæ•°æ®æŒä¹…åŒ–å’Œä»£ç çƒ­é‡è½½çš„æ ¸å¿ƒæœºåˆ¶
ğŸ”¸ å®¹å™¨ç½‘ç»œï¼šæœåŠ¡å‘ç°å’Œå®¹å™¨é—´é€šä¿¡çš„åŸºç¡€è®¾æ–½
ğŸ”¸ æ³¨å†Œè¡¨ï¼šé•œåƒå­˜å‚¨å’Œåˆ†å‘ï¼Œå®ç°ç¯å¢ƒæ ‡å‡†åŒ–
```

### 10.2 å®é™…åº”ç”¨ä»·å€¼


**ğŸ”¹ å¼€å‘æ•ˆç‡æå‡ï¼š**
```
ç¯å¢ƒæ­å»ºæ—¶é—´ï¼šå‡ å¤© â†’ å‡ åˆ†é’Ÿ
ç¯å¢ƒä¸€è‡´æ€§ï¼š90% â†’ 100%
æ–°äººä¸Šæ‰‹é€Ÿåº¦ï¼šæå‡5-10å€
ç¯å¢ƒé—®é¢˜é¢‘ç‡ï¼šæ˜¾è‘—é™ä½
```

**ğŸ”¹ å›¢é˜Ÿåä½œæ”¹å–„ï¼š**
```
"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"é—®é¢˜ï¼šåŸºæœ¬æ¶ˆé™¤
ä»£ç å®¡æŸ¥æ•ˆç‡ï¼šæ˜¾è‘—æå‡
éƒ¨ç½²ä¸€è‡´æ€§ï¼šå¤§å¹…æ”¹å–„
è¿ç»´å¤æ‚åº¦ï¼šæ˜æ˜¾é™ä½
```

### 10.3 å­¦ä¹ è¿›é˜¶è·¯å¾„


**ğŸš€ è¿›é˜¶æŠ€èƒ½æ–¹å‘ï¼š**
- **Kubernetes**ï¼šå®¹å™¨ç¼–æ’è¿›é˜¶
- **å¾®æœåŠ¡æ¶æ„**ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡
- **DevOpså®è·µ**ï¼šCI/CDæµæ°´çº¿æ­å»º
- **å®‰å…¨æœ€ä½³å®è·µ**ï¼šå®¹å™¨å®‰å…¨åŠ å›º

**ğŸ’¡ å…³é”®ç†è§£**ï¼š
å®¹å™¨åŒ–ä¸ä»…æ˜¯æŠ€æœ¯å·¥å…·ï¼Œæ›´æ˜¯å¼€å‘ç†å¿µçš„è½¬å˜ã€‚ä»"é€‚åº”ç¯å¢ƒ"åˆ°"å®šåˆ¶ç¯å¢ƒ"ï¼Œä»"è§£å†³é—®é¢˜"åˆ°"é¿å…é—®é¢˜"ï¼Œè¿™ç§æ€ç»´è½¬å˜æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚

**ğŸ¯ è®°å¿†è¦ç‚¹**ï¼š
- **DockeråŸºç¡€**ï¼šé•œåƒã€å®¹å™¨ã€ç½‘ç»œã€å·å››å¤§æ ¸å¿ƒæ¦‚å¿µ
- **å¼€å‘å®è·µ**ï¼šDockerfileä¼˜åŒ–ã€Composeç¼–æ’ã€å·æŒ‚è½½é…ç½®
- **å›¢é˜Ÿåä½œ**ï¼šæ³¨å†Œè¡¨ä½¿ç”¨ã€ç¯å¢ƒæ ‡å‡†åŒ–ã€CI/CDé›†æˆ

**âš¡ å¿«é€Ÿä¸Šæ‰‹å»ºè®®**ï¼š
1. **ä»ç®€å•é¡¹ç›®å¼€å§‹**ï¼šå…ˆå®¹å™¨åŒ–ä¸€ä¸ªå•ä½“åº”ç”¨
2. **é€æ­¥å¢åŠ å¤æ‚åº¦**ï¼šæ·»åŠ æ•°æ®åº“ã€ç¼“å­˜ç­‰æœåŠ¡
3. **å…³æ³¨æœ€ä½³å®è·µ**ï¼šå®‰å…¨æ€§ã€æ€§èƒ½ä¼˜åŒ–ã€é•œåƒå¤§å°
4. **èå…¥å›¢é˜Ÿæµç¨‹**ï¼šCI/CDé›†æˆã€ç¯å¢ƒæ ‡å‡†åŒ–