---
title: 8ã€è¾¹ç¼˜èŠ‚ç‚¹éƒ¨ç½²ä¸ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [è¾¹ç¼˜èŠ‚ç‚¹ç¡¬ä»¶é€‰å‹](#1-è¾¹ç¼˜èŠ‚ç‚¹ç¡¬ä»¶é€‰å‹)
2. [å®¹å™¨åŒ–è¾¹ç¼˜åº”ç”¨éƒ¨ç½²](#2-å®¹å™¨åŒ–è¾¹ç¼˜åº”ç”¨éƒ¨ç½²)
3. [è¾¹ç¼˜è®¾å¤‡èµ„æºç®¡ç†](#3-è¾¹ç¼˜è®¾å¤‡èµ„æºç®¡ç†)
4. [è¿œç¨‹éƒ¨ç½²ä¸è¿ç»´](#4-è¿œç¨‹éƒ¨ç½²ä¸è¿ç»´)
5. [è¾¹ç¼˜èŠ‚ç‚¹ç›‘æ§](#5-è¾¹ç¼˜èŠ‚ç‚¹ç›‘æ§)
6. [ç½‘ç»œè¿æ¥ä¸å¸¦å®½ç®¡ç†](#6-ç½‘ç»œè¿æ¥ä¸å¸¦å®½ç®¡ç†)
7. [è¾¹ç¼˜å­˜å‚¨æ–¹æ¡ˆ](#7-è¾¹ç¼˜å­˜å‚¨æ–¹æ¡ˆ)
8. [æ•…éšœè‡ªæ„ˆä¸æ¢å¤æœºåˆ¶](#8-æ•…éšœè‡ªæ„ˆä¸æ¢å¤æœºåˆ¶)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ–¥ï¸ è¾¹ç¼˜èŠ‚ç‚¹ç¡¬ä»¶é€‰å‹


### 1.1 ä»€ä¹ˆæ˜¯è¾¹ç¼˜èŠ‚ç‚¹


**åŸºæœ¬æ¦‚å¿µ**
è¾¹ç¼˜èŠ‚ç‚¹å°±åƒæ˜¯ä¸€ä¸ª"å°å‹æ•°æ®ä¸­å¿ƒ"ï¼Œæ”¾åœ¨ç¦»ç”¨æˆ·å¾ˆè¿‘çš„åœ°æ–¹ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæŠŠäº‘æœåŠ¡å™¨æ¯”ä½œå¤§è¶…å¸‚ï¼Œé‚£è¾¹ç¼˜èŠ‚ç‚¹å°±åƒæ˜¯ä¾¿åˆ©åº— - è™½ç„¶ä¸œè¥¿ä¸å¦‚å¤§è¶…å¸‚å…¨ï¼Œä½†èƒœåœ¨ç¦»å®¶è¿‘ï¼Œä¹°ä¸œè¥¿æ›´å¿«ã€‚

```
ä¼ ç»Ÿæ¶æ„ï¼š                 è¾¹ç¼˜è®¡ç®—æ¶æ„ï¼š
ç”¨æˆ· â†â”€ å¾ˆè¿œ â”€â†’ äº‘æœåŠ¡å™¨      ç”¨æˆ· â†â”€ å¾ˆè¿‘ â”€â†’ è¾¹ç¼˜èŠ‚ç‚¹ â†â”€ è¿œ â”€â†’ äº‘æœåŠ¡å™¨
     æ…¢å“åº”                      å¿«å“åº”        æ•°æ®åŒæ­¥
```

**è¾¹ç¼˜èŠ‚ç‚¹çš„ç‰¹ç‚¹**ï¼š
- **åœ°ç†ä½ç½®é è¿‘ç”¨æˆ·** - å‡å°‘ç½‘ç»œå»¶è¿Ÿ
- **èµ„æºç›¸å¯¹æœ‰é™** - æ¯”äº‘æœåŠ¡å™¨é…ç½®ä½ä¸€äº›
- **ç¯å¢ƒæ¡ä»¶å¤æ‚** - å¯èƒ½åœ¨æœºæˆ¿å¤–ï¼Œç¯å¢ƒä¸å¦‚æ•°æ®ä¸­å¿ƒç¨³å®š
- **è‡ªä¸»è¿è¡Œèƒ½åŠ›** - èƒ½åœ¨ç½‘ç»œä¸å¥½æ—¶ç‹¬ç«‹å·¥ä½œ

### 1.2 ç¡¬ä»¶é€‰å‹åŸåˆ™


#### ğŸ“Š æ€§èƒ½éœ€æ±‚è¯„ä¼°


**CPUé€‰å‹è€ƒè™‘**ï¼š
- **è®¡ç®—å¯†é›†å‹åº”ç”¨** - é€‰æ‹©é«˜é¢‘ç‡CPUï¼Œå¦‚Intel i7/i9æˆ–AMD Ryzen
- **IOå¯†é›†å‹åº”ç”¨** - å¤šæ ¸å¿ƒæ›´é‡è¦ï¼Œå¦‚16æ ¸å¿ƒçš„æœåŠ¡å™¨çº§CPU
- **æ··åˆå‹åº”ç”¨** - å¹³è¡¡æ ¸å¿ƒæ•°å’Œé¢‘ç‡

| åº”ç”¨ç±»å‹ | CPUå»ºè®® | å†…å­˜å»ºè®® | å­˜å‚¨å»ºè®® |
|---------|---------|---------|---------|
| **è§†é¢‘å¤„ç†** | 8æ ¸+ï¼Œé«˜é¢‘ç‡ | 32GB+ | SSD+å¤§å®¹é‡HDD |
| **Webç¼“å­˜** | 4-8æ ¸ | 16-32GB | é«˜é€ŸSSD |
| **IoTæ•°æ®æ”¶é›†** | 4æ ¸ | 8-16GB | SSDè¶³å¤Ÿ |
| **AIæ¨ç†** | GPUå¿…éœ€ | 16-64GB | é«˜é€ŸNVMe |

#### ğŸ”§ ç¯å¢ƒé€‚åº”æ€§


**æ¸©åº¦ä¸æ¹¿åº¦**ï¼š
è¾¹ç¼˜èŠ‚ç‚¹ç»å¸¸éƒ¨ç½²åœ¨éæ ‡å‡†æœºæˆ¿ç¯å¢ƒï¼Œé€‰æ‹©å·¥ä¸šçº§ç¡¬ä»¶å¾ˆé‡è¦ã€‚

```
æ ‡å‡†æœºæˆ¿ç¯å¢ƒï¼š          è¾¹ç¼˜éƒ¨ç½²ç¯å¢ƒï¼š
æ¸©åº¦ï¼š18-25Â°C          æ¸©åº¦ï¼š0-40Â°C
æ¹¿åº¦ï¼š40-60%           æ¹¿åº¦ï¼š10-90%
ç°å°˜ï¼šå¾ˆå°‘              ç°å°˜ï¼šè¾ƒå¤š
ä¾›ç”µï¼šç¨³å®šUPS          ä¾›ç”µï¼šå¯èƒ½ä¸ç¨³å®š
```

**ä¾›ç”µè¦æ±‚**ï¼š
- **å®½ç”µå‹è¾“å…¥** - æ”¯æŒ90-264Väº¤æµè¾“å…¥
- **ä½åŠŸè€—è®¾è®¡** - æ€»åŠŸè€—æ§åˆ¶åœ¨500Wä»¥å†…
- **å¤‡ç”¨ç”µæº** - å†…ç½®UPSæˆ–æ”¯æŒå¤–æ¥ç”µæ± 

### 1.3 å…¸å‹ç¡¬ä»¶é…ç½®æ–¹æ¡ˆ


#### â­ å…¥é—¨çº§é…ç½® `[é€‚ç”¨åœºæ™¯ï¼šç®€å•ç¼“å­˜ã€é™æ€å†…å®¹åˆ†å‘]`


**é…ç½®æ¸…å•**ï¼š
```
CPUï¼šIntel i3-10100 (4æ ¸8çº¿ç¨‹)
å†…å­˜ï¼š16GB DDR4-2666
å­˜å‚¨ï¼š512GB NVMe SSD
ç½‘ç»œï¼šåƒå…†ç½‘å¡
åŠŸè€—ï¼šçº¦150W
ä»·æ ¼ï¼šçº¦5000å…ƒ
```

**é€‚ç”¨åœºæ™¯è¯´æ˜**ï¼š
- CDNé™æ€å†…å®¹ç¼“å­˜
- ç®€å•çš„Webåº”ç”¨ä»£ç†
- è½»é‡çº§ç›‘æ§æ•°æ®æ”¶é›†

#### â­â­ æ ‡å‡†çº§é…ç½® `[é€‚ç”¨åœºæ™¯ï¼šåŠ¨æ€å†…å®¹å¤„ç†ã€å®¹å™¨åŒ–åº”ç”¨]`


**é…ç½®æ¸…å•**ï¼š
```
CPUï¼šIntel i7-11700 (8æ ¸16çº¿ç¨‹)
å†…å­˜ï¼š32GB DDR4-3200
å­˜å‚¨ï¼š1TB NVMe SSD + 2TB HDD
ç½‘ç»œï¼šä¸‡å…†ç½‘å¡
GPUï¼šå¯é€‰GTX 1660
åŠŸè€—ï¼šçº¦300W
ä»·æ ¼ï¼šçº¦12000å…ƒ
```

#### â­â­â­ é«˜æ€§èƒ½é…ç½® `[é€‚ç”¨åœºæ™¯ï¼šAIæ¨ç†ã€å®æ—¶è§†é¢‘å¤„ç†]`


**é…ç½®æ¸…å•**ï¼š
```
CPUï¼šAMD EPYC 7543P (32æ ¸64çº¿ç¨‹)
å†…å­˜ï¼š128GB DDR4-3200 ECC
å­˜å‚¨ï¼š2TB NVMe SSD + 8TB HDD
ç½‘ç»œï¼š25G/40Gç½‘å¡
GPUï¼šRTX 4080æˆ–ä¸“ä¸šAIå¡
åŠŸè€—ï¼šçº¦800W
ä»·æ ¼ï¼šçº¦50000å…ƒ
```

### 1.4 ç¡¬ä»¶é€‰å‹æ£€æŸ¥æ¸…å•


**âœ… æ€§èƒ½æ£€æŸ¥é¡¹**ï¼š
- [ ] CPUæ€§èƒ½æ˜¯å¦æ»¡è¶³å³°å€¼è´Ÿè½½éœ€æ±‚ï¼Ÿ
- [ ] å†…å­˜å®¹é‡æ˜¯å¦è¶³å¤Ÿåº”ç”¨å’Œç¼“å­˜ä½¿ç”¨ï¼Ÿ
- [ ] å­˜å‚¨IOæ€§èƒ½æ˜¯å¦æ»¡è¶³æ•°æ®è¯»å†™è¦æ±‚ï¼Ÿ
- [ ] ç½‘ç»œå¸¦å®½æ˜¯å¦æ»¡è¶³ç”¨æˆ·è®¿é—®éœ€æ±‚ï¼Ÿ

**âœ… å¯é æ€§æ£€æŸ¥é¡¹**ï¼š
- [ ] ç¡¬ä»¶æ˜¯å¦æ”¯æŒå·¥ä¸šçº§æ¸©åº¦èŒƒå›´ï¼Ÿ
- [ ] æ˜¯å¦æœ‰ç¡¬ä»¶RAIDæ”¯æŒï¼Ÿ
- [ ] æ˜¯å¦æ”¯æŒçƒ­æ’æ‹”ç»„ä»¶ï¼Ÿ
- [ ] æ˜¯å¦æœ‰å†—ä½™ç”µæºè®¾è®¡ï¼Ÿ

**âœ… æ‰©å±•æ€§æ£€æŸ¥é¡¹**ï¼š
- [ ] å†…å­˜æ’æ§½æ˜¯å¦æœ‰æ‰©å±•ä½™é‡ï¼Ÿ
- [ ] å­˜å‚¨æ¥å£æ˜¯å¦æ”¯æŒæ·»åŠ ç¡¬ç›˜ï¼Ÿ
- [ ] PCIeæ’æ§½æ˜¯å¦è¶³å¤Ÿæœªæ¥æ‰©å±•å¡éœ€æ±‚ï¼Ÿ
- [ ] ç½‘ç»œæ¥å£æ˜¯å¦æ”¯æŒæ›´é«˜é€Ÿåº¦ï¼Ÿ

---

## 2. ğŸ³ å®¹å™¨åŒ–è¾¹ç¼˜åº”ç”¨éƒ¨ç½²


### 2.1 ä¸ºä»€ä¹ˆè¦ç”¨å®¹å™¨åŒ–


**ä¼ ç»Ÿéƒ¨ç½² vs å®¹å™¨åŒ–éƒ¨ç½²**ï¼š

```
ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ç‰©ç†æœåŠ¡å™¨          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       æ“ä½œç³»ç»Ÿ          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åº”ç”¨A  â”‚  åº”ç”¨B  â”‚åº”ç”¨C â”‚
â”‚  ä¾èµ–1   â”‚  ä¾èµ–2  â”‚ä¾èµ–3 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
é—®é¢˜ï¼šä¾èµ–å†²çªã€å‡çº§å›°éš¾

å®¹å™¨åŒ–éƒ¨ç½²æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ç‰©ç†æœåŠ¡å™¨          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       æ“ä½œç³»ç»Ÿ          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        å®¹å™¨å¼•æ“         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®¹å™¨A â”‚ å®¹å™¨B â”‚ å®¹å™¨C  â”‚
â”‚åº”ç”¨+ä¾èµ–â”‚åº”ç”¨+ä¾èµ–â”‚åº”ç”¨+ä¾èµ–â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ä¼˜åŠ¿ï¼šéš”ç¦»ã€ä¾¿æºã€ä¸€è‡´æ€§
```

**å®¹å™¨åŒ–çš„å¥½å¤„**ï¼š
- **ç¯å¢ƒä¸€è‡´æ€§** - å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€æ ·
- **å¿«é€Ÿéƒ¨ç½²** - å‡ ç§’é’Ÿå°±èƒ½å¯åŠ¨ä¸€ä¸ªåº”ç”¨
- **èµ„æºéš”ç¦»** - åº”ç”¨ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“
- **æ˜“äºç®¡ç†** - ç»Ÿä¸€çš„éƒ¨ç½²ã€ç›‘æ§ã€å‡çº§æ–¹å¼

### 2.2 DockeråŸºç¡€éƒ¨ç½²


#### ğŸ”§ Dockerç¯å¢ƒå‡†å¤‡


**å®‰è£…Docker**ï¼š
```bash
# CentOS/RHELç³»ç»Ÿ
sudo yum install -y docker
sudo systemctl start docker
sudo systemctl enable docker

# Ubuntu/Debianç³»ç»Ÿ  
sudo apt update
sudo apt install -y docker.io
sudo systemctl start docker
sudo systemctl enable docker
```

**éªŒè¯å®‰è£…**ï¼š
```bash
# æŸ¥çœ‹Dockerç‰ˆæœ¬
docker --version

# è¿è¡Œæµ‹è¯•å®¹å™¨
docker run hello-world
```

#### ğŸ“¦ åˆ¶ä½œåº”ç”¨é•œåƒ


**Dockerfileç¤ºä¾‹** - éƒ¨ç½²ä¸€ä¸ªç®€å•çš„Webåº”ç”¨ï¼š

```dockerfile
# åŸºç¡€é•œåƒ
FROM nginx:alpine

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /usr/share/nginx/html

# å¤åˆ¶é™æ€æ–‡ä»¶
COPY ./static-files/ .

# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY nginx.conf /etc/nginx/nginx.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨å‘½ä»¤
CMD ["nginx", "-g", "daemon off;"]
```

**æ„å»ºé•œåƒ**ï¼š
```bash
# æ„å»ºé•œåƒ
docker build -t edge-web-app:v1.0 .

# æŸ¥çœ‹é•œåƒ
docker images
```

#### ğŸš€ å®¹å™¨è¿è¡Œç®¡ç†


**å¯åŠ¨å®¹å™¨**ï¼š
```bash
# åŸºæœ¬å¯åŠ¨
docker run -d --name edge-web -p 80:80 edge-web-app:v1.0

# å¸¦èµ„æºé™åˆ¶å¯åŠ¨
docker run -d \
  --name edge-web \
  --memory=1g \
  --cpus=0.5 \
  -p 80:80 \
  edge-web-app:v1.0
```

**å¸¸ç”¨ç®¡ç†å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker ps

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs edge-web

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it edge-web sh

# åœæ­¢å’Œåˆ é™¤
docker stop edge-web
docker rm edge-web
```

### 2.3 Docker Composeå¤šæœåŠ¡ç¼–æ’


å½“è¾¹ç¼˜èŠ‚ç‚¹éœ€è¦è¿è¡Œå¤šä¸ªç›¸å…³è”çš„æœåŠ¡æ—¶ï¼Œä½¿ç”¨Docker Composeå¯ä»¥ç®€åŒ–ç®¡ç†ã€‚

**docker-compose.ymlç¤ºä¾‹**ï¼š
```yaml
version: '3.8'

services:
  # Webå‰ç«¯æœåŠ¡
  web:
    image: edge-web-app:v1.0
    ports:
      - "80:80"
    depends_on:
      - cache
      - api
    restart: unless-stopped
    
  # APIåç«¯æœåŠ¡  
  api:
    image: edge-api-app:v1.0
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=database
      - CACHE_HOST=cache
    depends_on:
      - database
      - cache
    restart: unless-stopped
    
  # ç¼“å­˜æœåŠ¡
  cache:
    image: redis:alpine
    ports:
      - "6379:6379"
    volumes:
      - cache_data:/data
    restart: unless-stopped
    
  # æ•°æ®åº“æœåŠ¡
  database:
    image: postgres:13-alpine
    environment:
      - POSTGRES_DB=edgedb
      - POSTGRES_USER=edgeuser
      - POSTGRES_PASSWORD=edgepass
    volumes:
      - db_data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  cache_data:
  db_data:
```

**éƒ¨ç½²å’Œç®¡ç†**ï¼š
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs web

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down
```

### 2.4 è½»é‡çº§å®¹å™¨ç¼–æ’æ–¹æ¡ˆ


å¯¹äºèµ„æºæœ‰é™çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œæœ‰æ—¶å€™å®Œæ•´çš„Kuberneteså¯èƒ½è¿‡äºå¤æ‚ï¼Œå¯ä»¥é€‰æ‹©æ›´è½»é‡çš„æ–¹æ¡ˆã€‚

#### ğŸ”¸ K3sè½»é‡çº§Kubernetes


**K3sç‰¹ç‚¹**ï¼š
- å†…å­˜å ç”¨å°‘äº512MB
- å•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®‰è£…ç®€å•
- å®Œå…¨å…¼å®¹Kubernetes API
- é€‚åˆè¾¹ç¼˜å’ŒIoTåœºæ™¯

**å®‰è£…K3s**ï¼š
```bash
# å®‰è£…K3sæœåŠ¡å™¨
curl -sfL https://get.k3s.io | sh -

# æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€
sudo k3s kubectl get nodes
```

**éƒ¨ç½²åº”ç”¨ç¤ºä¾‹**ï¼š
```yaml
# edge-app.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: edge-web-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: edge-web
  template:
    metadata:
      labels:
        app: edge-web
    spec:
      containers:
      - name: web
        image: edge-web-app:v1.0
        ports:
        - containerPort: 80
        resources:
          limits:
            memory: "512Mi"
            cpu: "0.5"
          requests:
            memory: "256Mi"
            cpu: "0.2"
---
apiVersion: v1
kind: Service
metadata:
  name: edge-web-service
spec:
  selector:
    app: edge-web
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer
```

```bash
# éƒ¨ç½²åº”ç”¨
sudo k3s kubectl apply -f edge-app.yaml

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
sudo k3s kubectl get pods
sudo k3s kubectl get services
```

---

## 3. ğŸ“Š è¾¹ç¼˜è®¾å¤‡èµ„æºç®¡ç†


### 3.1 èµ„æºç›‘æ§åŸºç¡€


**ç†è§£ç³»ç»Ÿèµ„æº**ï¼š
ç³»ç»Ÿèµ„æºå°±åƒå®¶é‡Œçš„æ°´ç”µç…¤æ°”ï¼Œç”¨å¤šäº†å°±ä¸å¤Ÿï¼Œç”¨å°‘äº†æµªè´¹ã€‚è¾¹ç¼˜èŠ‚ç‚¹èµ„æºæœ‰é™ï¼Œéœ€è¦ç²¾æ‰“ç»†ç®—ã€‚

```
ç³»ç»Ÿèµ„æºå››å¤§ç±»ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPUï¼šå¤„ç†å™¨ - è´Ÿè´£è®¡ç®—              â”‚
â”‚ â”œâ”€ ä½¿ç”¨ç‡ï¼šæ­£åœ¨å·¥ä½œçš„CPUå æ¯”        â”‚
â”‚ â”œâ”€ è´Ÿè½½ï¼šç­‰å¾…å¤„ç†çš„ä»»åŠ¡æ•°é‡         â”‚
â”‚ â””â”€ é¢‘ç‡ï¼šå¤„ç†å™¨è¿è¡Œé¢‘ç‡             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å†…å­˜ï¼šRAM - å­˜æ”¾æ­£åœ¨ä½¿ç”¨çš„æ•°æ®      â”‚
â”‚ â”œâ”€ å·²ç”¨ï¼šç¨‹åºå ç”¨çš„å†…å­˜             â”‚
â”‚ â”œâ”€ å¯ç”¨ï¼šè¿˜èƒ½åˆ†é…çš„å†…å­˜             â”‚
â”‚ â””â”€ ç¼“å­˜ï¼šç³»ç»Ÿç”¨äºåŠ é€Ÿçš„å†…å­˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç£ç›˜ï¼šå­˜å‚¨ - ä¿å­˜æ–‡ä»¶å’Œæ•°æ®         â”‚
â”‚ â”œâ”€ ä½¿ç”¨ç‡ï¼šå·²ç”¨ç©ºé—´å æ¯”             â”‚
â”‚ â”œâ”€ IOï¼šè¯»å†™æ“ä½œé¢‘ç‡                 â”‚
â”‚ â””â”€ é˜Ÿåˆ—ï¼šç­‰å¾…å¤„ç†çš„IOæ“ä½œ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç½‘ç»œï¼šè¿æ¥ - æ•°æ®ä¼ è¾“é€šé“           â”‚
â”‚ â”œâ”€ å¸¦å®½ï¼šæœ€å¤§ä¼ è¾“é€Ÿåº¦               â”‚
â”‚ â”œâ”€ å»¶è¿Ÿï¼šæ•°æ®ä¼ è¾“æ—¶é—´               â”‚
â”‚ â””â”€ è¿æ¥æ•°ï¼šåŒæ—¶å¤„ç†çš„è¿æ¥æ•°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç³»ç»Ÿèµ„æºç›‘æ§å‘½ä»¤


#### ğŸ’» CPUç›‘æ§


**æŸ¥çœ‹CPUä½¿ç”¨æƒ…å†µ**ï¼š
```bash
# å®æ—¶æŸ¥çœ‹CPUä½¿ç”¨ç‡
top

# ç®€æ´çš„CPUä¿¡æ¯
htop  # éœ€è¦å®‰è£…ï¼šyum install htop

# è¯¦ç»†çš„CPUç»Ÿè®¡
sar -u 1 5  # æ¯ç§’ç»Ÿè®¡ä¸€æ¬¡ï¼Œå…±5æ¬¡
```

**ç†è§£topå‘½ä»¤è¾“å‡º**ï¼š
```
%Cpu(s): 25.3 us,  1.2 sy,  0.0 ni, 73.2 id,  0.3 wa,  0.0 hi,  0.0 si
å«ä¹‰ï¼š    ç”¨æˆ·    ç³»ç»Ÿ    ä¼˜å…ˆçº§   ç©ºé—²    ç­‰å¾…IO  ç¡¬ä¸­æ–­  è½¯ä¸­æ–­
```

- **us (user)** - ç”¨æˆ·ç¨‹åºä½¿ç”¨CPUçš„æ—¶é—´æ¯”ä¾‹
- **sy (system)** - ç³»ç»Ÿå†…æ ¸ä½¿ç”¨CPUçš„æ—¶é—´æ¯”ä¾‹  
- **id (idle)** - CPUç©ºé—²æ—¶é—´æ¯”ä¾‹
- **wa (wait)** - ç­‰å¾…IOæ“ä½œçš„æ—¶é—´æ¯”ä¾‹

#### ğŸ§  å†…å­˜ç›‘æ§


**æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ**ï¼š
```bash
# åŸºæœ¬å†…å­˜ä¿¡æ¯
free -h

# è¯¦ç»†å†…å­˜ç»Ÿè®¡
cat /proc/meminfo | head -10

# å®æ—¶å†…å­˜ç›‘æ§
watch -n 1 'free -h'
```

**ç†è§£å†…å­˜æŒ‡æ ‡**ï¼š
```bash
$ free -h
              total        used        free      shared  buff/cache   available
Mem:           15Gi        3.2Gi       8.1Gi       234Mi       4.2Gi        11Gi
Swap:          7.6Gi          0B       7.6Gi
```

- **total** - æ€»å†…å­˜å¤§å°
- **used** - å·²è¢«ç¨‹åºå ç”¨çš„å†…å­˜
- **free** - å®Œå…¨ç©ºé—²çš„å†…å­˜
- **available** - ç¨‹åºå¯ä»¥ä½¿ç”¨çš„å†…å­˜ï¼ˆåŒ…æ‹¬å¯é‡Šæ”¾çš„ç¼“å­˜ï¼‰

#### ğŸ’¾ ç£ç›˜ç›‘æ§


**æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ**ï¼š
```bash
# ç£ç›˜ç©ºé—´ä½¿ç”¨
df -h

# ç›®å½•ç©ºé—´ä½¿ç”¨
du -sh /var/log/*

# ç£ç›˜IOç»Ÿè®¡
iostat -x 1 5
```

**ç†è§£iostatè¾“å‡º**ï¼š
```
Device:  rrqm/s   wrqm/s  r/s   w/s   rsec/s   wsec/s  %util
sda      0.00     0.00    1.5   8.2   12.0     65.6    2.1
```

- **r/s, w/s** - æ¯ç§’è¯»å†™æ“ä½œæ¬¡æ•°
- **rsec/s, wsec/s** - æ¯ç§’è¯»å†™æ‰‡åŒºæ•°
- **%util** - ç£ç›˜ä½¿ç”¨ç‡ï¼ˆæ¥è¿‘100%è¡¨ç¤ºç£ç›˜å¾ˆå¿™ï¼‰

#### ğŸŒ ç½‘ç»œç›‘æ§


**æŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€**ï¼š
```bash
# ç½‘ç»œè¿æ¥ç»Ÿè®¡
netstat -i  # ç½‘ç»œæ¥å£ç»Ÿè®¡
netstat -an | head -20  # è¿æ¥çŠ¶æ€

# å®æ—¶ç½‘ç»œæµé‡
iftop  # éœ€è¦å®‰è£…ï¼šyum install iftop

# ç½‘ç»œIOç»Ÿè®¡
sar -n DEV 1 5
```

### 3.3 èµ„æºé™åˆ¶ä¸åˆ†é…


#### ğŸ”’ Cgroupsèµ„æºæ§åˆ¶


**ä»€ä¹ˆæ˜¯Cgroups**ï¼š
Cgroupsï¼ˆControl Groupsï¼‰å°±åƒç»™æ¯ä¸ªç¨‹åºåˆ†é…"èµ„æºé…é¢"ï¼Œé˜²æ­¢æŸä¸ªç¨‹åºå ç”¨å¤ªå¤šèµ„æºå½±å“å…¶ä»–ç¨‹åºã€‚

**åˆ›å»ºCPUé™åˆ¶ç»„**ï¼š
```bash
# åˆ›å»ºcgroup
sudo mkdir /sys/fs/cgroup/cpu/edge-apps

# è®¾ç½®CPUé™åˆ¶ä¸º50%
echo 50000 > /sys/fs/cgroup/cpu/edge-apps/cpu.cfs_quota_us
echo 100000 > /sys/fs/cgroup/cpu/edge-apps/cpu.cfs_period_us

# å°†è¿›ç¨‹åŠ å…¥é™åˆ¶ç»„
echo $PID > /sys/fs/cgroup/cpu/edge-apps/tasks
```

**åˆ›å»ºå†…å­˜é™åˆ¶ç»„**ï¼š
```bash
# åˆ›å»ºå†…å­˜é™åˆ¶ç»„
sudo mkdir /sys/fs/cgroup/memory/edge-apps

# è®¾ç½®å†…å­˜é™åˆ¶ä¸º1GB
echo 1073741824 > /sys/fs/cgroup/memory/edge-apps/memory.limit_in_bytes

# å°†è¿›ç¨‹åŠ å…¥é™åˆ¶ç»„
echo $PID > /sys/fs/cgroup/memory/edge-apps/tasks
```

#### âš™ï¸ systemdèµ„æºç®¡ç†


**åˆ›å»ºæœåŠ¡é…ç½®æ–‡ä»¶**ï¼š
```ini
# /etc/systemd/system/edge-app.service
[Unit]
Description=Edge Application
After=network.target

[Service]
Type=simple
User=edgeuser
ExecStart=/opt/edge-app/start.sh
Restart=always

# èµ„æºé™åˆ¶
MemoryMax=1G
CPUQuota=50%
TasksMax=100

[Install]
WantedBy=multi-user.target
```

**å¯åŠ¨å¹¶ç›‘æ§æœåŠ¡**ï¼š
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start edge-app
sudo systemctl enable edge-app

# æŸ¥çœ‹èµ„æºä½¿ç”¨
systemctl status edge-app
```

### 3.4 èµ„æºä¼˜åŒ–ç­–ç•¥


#### ğŸ“ˆ æ€§èƒ½è°ƒä¼˜åŸåˆ™


**`[CPUä¼˜åŒ–ç­–ç•¥]`**
- **è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´** - é‡è¦ä»»åŠ¡è®¾ç½®é«˜ä¼˜å…ˆçº§
- **CPUäº²å’Œæ€§è®¾ç½®** - å°†å…³é”®è¿›ç¨‹ç»‘å®šåˆ°ç‰¹å®šCPUæ ¸å¿ƒ
- **å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢** - é¿å…åˆ›å»ºè¿‡å¤šçº¿ç¨‹å’Œè¿›ç¨‹

**`[å†…å­˜ä¼˜åŒ–ç­–ç•¥]`**  
- **åˆç†è®¾ç½®ç¼“å­˜å¤§å°** - ä¸è¦è®©ç¼“å­˜å ç”¨è¿‡å¤šå†…å­˜
- **åŠæ—¶é‡Šæ”¾ä¸ç”¨çš„å†…å­˜** - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜
- **ä½¿ç”¨å†…å­˜æ˜ å°„** - å¯¹äºå¤§æ–‡ä»¶ä½¿ç”¨mmapè€Œä¸æ˜¯è¯»å…¥å†…å­˜

**`[å­˜å‚¨ä¼˜åŒ–ç­–ç•¥]`**
- **SSDä½œä¸ºç¼“å­˜å±‚** - çƒ­æ•°æ®æ”¾SSDï¼Œå†·æ•°æ®æ”¾HDD
- **å®šæœŸæ¸…ç†æ—¥å¿—** - è®¾ç½®æ—¥å¿—è½®è½¬å’Œè‡ªåŠ¨æ¸…ç†
- **æ•°æ®å‹ç¼©** - å¯¹ä¸å¸¸ç”¨æ•°æ®è¿›è¡Œå‹ç¼©å­˜å‚¨

**ç³»ç»Ÿè°ƒä¼˜ç¤ºä¾‹**ï¼š
```bash
# è°ƒæ•´å†…æ ¸å‚æ•°
echo 'vm.swappiness=10' >> /etc/sysctl.conf  # å‡å°‘ä½¿ç”¨swap
echo 'net.core.rmem_max=134217728' >> /etc/sysctl.conf  # å¢åŠ ç½‘ç»œç¼“å†²åŒº

# åº”ç”¨é…ç½®
sysctl -p
```

---

## 4. ğŸ”§ è¿œç¨‹éƒ¨ç½²ä¸è¿ç»´


### 4.1 è¿œç¨‹è¿æ¥åŸºç¡€


**SSHè¿œç¨‹è¿æ¥**ï¼š
SSHå°±åƒè¿œç¨‹æ§åˆ¶è½¯ä»¶ï¼Œè®©ä½ ååœ¨åŠå…¬å®¤å°±èƒ½æ“ä½œè¿œåœ¨å„åœ°çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œå°±åƒæ“ä½œæœ¬åœ°ç”µè„‘ä¸€æ ·ã€‚

```
è¿œç¨‹è¿æ¥ç¤ºæ„å›¾ï¼š
æœ¬åœ°ç”µè„‘ â”€â”€SSHåŠ å¯†è¿æ¥â”€â”€â†’ è¾¹ç¼˜èŠ‚ç‚¹
   â”‚                        â”‚
 æ“ä½œå‘½ä»¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ‰§è¡Œç»“æœ
   â”‚                        â”‚
 æŸ¥çœ‹ç»“æœ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è¿”å›ä¿¡æ¯
```

#### ğŸ”‘ SSHå¯†é’¥é…ç½®


**ç”ŸæˆSSHå¯†é’¥å¯¹**ï¼š
```bash
# åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹
ssh-keygen -t rsa -b 4096 -C "your-email@example.com"

# å¯†é’¥æ–‡ä»¶ä½ç½®
# ç§é’¥ï¼š~/.ssh/id_rsa (ä¿å¯†ï¼Œä¸èƒ½ç»™åˆ«äºº)
# å…¬é’¥ï¼š~/.ssh/id_rsa.pub (å¯ä»¥å…¬å¼€)
```

**éƒ¨ç½²å…¬é’¥åˆ°è¾¹ç¼˜èŠ‚ç‚¹**ï¼š
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ssh-copy-id
ssh-copy-id user@edge-node-ip

# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¤åˆ¶
scp ~/.ssh/id_rsa.pub user@edge-node-ip:~/
ssh user@edge-node-ip
mkdir -p ~/.ssh
cat ~/id_rsa.pub >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
```

**SSHé…ç½®ä¼˜åŒ–**ï¼š
```bash
# ç¼–è¾‘SSHå®¢æˆ·ç«¯é…ç½®
vim ~/.ssh/config

# æ·»åŠ è¾¹ç¼˜èŠ‚ç‚¹é…ç½®
Host edge-node-1
    HostName 192.168.1.100
    User root
    Port 22
    IdentityFile ~/.ssh/id_rsa
    ServerAliveInterval 60
    ServerAliveCountMax 3

# ç°åœ¨å¯ä»¥ç®€åŒ–è¿æ¥
ssh edge-node-1
```

### 4.2 æ‰¹é‡éƒ¨ç½²è‡ªåŠ¨åŒ–


#### ğŸ“¦ Ansibleè‡ªåŠ¨åŒ–å·¥å…·


**ä»€ä¹ˆæ˜¯Ansible**ï¼š
Ansibleå°±åƒä¸€ä¸ª"é­”æ³•å¸ˆ"ï¼Œä½ å†™å¥½ä¸€ä»½"å’’è¯­"ï¼ˆè„šæœ¬ï¼‰ï¼Œå®ƒå°±èƒ½åŒæ—¶æ§åˆ¶å¾ˆå¤šå°æœåŠ¡å™¨æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚

**å®‰è£…Ansible**ï¼š
```bash
# CentOS/RHEL
sudo yum install ansible

# Ubuntu/Debian  
sudo apt install ansible
```

**é…ç½®ä¸»æœºæ¸…å•**ï¼š
```ini
# /etc/ansible/hosts
[edge-nodes]
edge-node-1 ansible_host=192.168.1.100
edge-node-2 ansible_host=192.168.1.101  
edge-node-3 ansible_host=192.168.1.102

[edge-nodes:vars]
ansible_user=root
ansible_ssh_private_key_file=~/.ssh/id_rsa
```

**ç®€å•çš„æ‰¹é‡æ“ä½œ**ï¼š
```bash
# æµ‹è¯•è¿æ¥
ansible edge-nodes -m ping

# æ‰¹é‡æ‰§è¡Œå‘½ä»¤
ansible edge-nodes -m shell -a "uptime"

# æ‰¹é‡å¤åˆ¶æ–‡ä»¶
ansible edge-nodes -m copy -a "src=/local/file dest=/remote/path"

# æ‰¹é‡å®‰è£…è½¯ä»¶
ansible edge-nodes -m yum -a "name=docker state=present"
```

#### ğŸ“‹ Ansible Playbookéƒ¨ç½²è„šæœ¬


**åˆ›å»ºéƒ¨ç½²è„šæœ¬**ï¼š
```yaml
# edge-deployment.yml
---
- hosts: edge-nodes
  become: yes
  tasks:
    # å®‰è£…Docker
    - name: Install Docker
      yum:
        name: docker
        state: present
      
    # å¯åŠ¨DockeræœåŠ¡
    - name: Start Docker service
      systemd:
        name: docker
        state: started
        enabled: yes
    
    # åˆ›å»ºåº”ç”¨ç›®å½•
    - name: Create app directory
      file:
        path: /opt/edge-app
        state: directory
        mode: '0755'
    
    # å¤åˆ¶åº”ç”¨æ–‡ä»¶
    - name: Copy application files
      copy:
        src: ./app-files/
        dest: /opt/edge-app/
        
    # éƒ¨ç½²å®¹å™¨åº”ç”¨
    - name: Deploy container application
      docker_container:
        name: edge-web-app
        image: edge-web-app:v1.0
        state: started
        restart_policy: always
        ports:
          - "80:80"
        volumes:
          - "/opt/edge-app/data:/app/data"
```

**æ‰§è¡Œéƒ¨ç½²**ï¼š
```bash
# è¿è¡Œéƒ¨ç½²è„šæœ¬
ansible-playbook edge-deployment.yml

# æ£€æŸ¥éƒ¨ç½²ç»“æœ
ansible edge-nodes -m shell -a "docker ps"
```

### 4.3 è¿œç¨‹ç›‘æ§ä¸æ—¥å¿—ç®¡ç†


#### ğŸ“Š é›†ä¸­å¼æ—¥å¿—æ”¶é›†


**æ—¥å¿—æ”¶é›†æ¶æ„**ï¼š
```
è¾¹ç¼˜èŠ‚ç‚¹1 â”€â”€logsâ”€â”€â”
è¾¹ç¼˜èŠ‚ç‚¹2 â”€â”€logsâ”€â”€â”¼â”€â”€â†’ æ—¥å¿—æ”¶é›†å™¨ â”€â”€â†’ ä¸­å¤®æ—¥å¿—æœåŠ¡å™¨
è¾¹ç¼˜èŠ‚ç‚¹3 â”€â”€logsâ”€â”€â”˜     (Filebeat)     (Elasticsearch)
```

**é…ç½®Filebeatæ—¥å¿—æ”¶é›†**ï¼š
```yaml
# filebeat.yml
filebeat.inputs:
- type: log
  enabled: true
  paths:
    - /var/log/edge-app/*.log
    - /opt/edge-app/logs/*.log

output.elasticsearch:
  hosts: ["central-log-server:9200"]
  
logging.level: info
logging.to_files: true
logging.files:
  path: /var/log/filebeat
  name: filebeat
  keepfiles: 7
```

**å¯åŠ¨Filebeat**ï¼š
```bash
# å®‰è£…Filebeat
curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.15.0-x86_64.rpm
sudo rpm -vi filebeat-7.15.0-x86_64.rpm

# å¯åŠ¨æœåŠ¡
sudo systemctl start filebeat
sudo systemctl enable filebeat
```

#### ğŸ” è¿œç¨‹æ€§èƒ½ç›‘æ§


**é…ç½®Prometheusç›‘æ§**ï¼š
```yaml
# prometheus.yml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'edge-nodes'
    static_configs:
      - targets: 
        - 'edge-node-1:9100'
        - 'edge-node-2:9100'
        - 'edge-node-3:9100'
```

**åœ¨è¾¹ç¼˜èŠ‚ç‚¹å®‰è£…Node Exporter**ï¼š
```bash
# ä¸‹è½½Node Exporter
wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
tar xvf node_exporter-1.3.1.linux-amd64.tar.gz
sudo mv node_exporter-1.3.1.linux-amd64/node_exporter /usr/local/bin/

# åˆ›å»ºç³»ç»ŸæœåŠ¡
sudo vim /etc/systemd/system/node_exporter.service
```

```ini
[Unit]
Description=Node Exporter
After=network.target

[Service]
User=nobody
ExecStart=/usr/local/bin/node_exporter
Restart=always

[Install]
WantedBy=multi-user.target
```

```bash
# å¯åŠ¨ç›‘æ§æœåŠ¡
sudo systemctl start node_exporter
sudo systemctl enable node_exporter
```

### 4.4 è¿œç¨‹æ•…éšœå¤„ç†


#### ğŸš¨ æ•…éšœæ’æŸ¥å·¥å…·é›†


**åˆ›å»ºè¿œç¨‹è¯Šæ–­è„šæœ¬**ï¼š
```bash
#!/bin/bash
# edge-health-check.sh

echo "=== è¾¹ç¼˜èŠ‚ç‚¹å¥åº·æ£€æŸ¥ ==="
echo "æ—¶é—´: $(date)"
echo "ä¸»æœº: $(hostname)"
echo

echo "=== ç³»ç»Ÿèµ„æº ==="
echo "CPUä½¿ç”¨ç‡:"
top -bn1 | grep "Cpu(s)" | awk '{print $2 $3 $4 $5}'

echo "å†…å­˜ä½¿ç”¨:"
free -h

echo "ç£ç›˜ä½¿ç”¨:"
df -h

echo

echo "=== æœåŠ¡çŠ¶æ€ ==="
echo "DockerçŠ¶æ€:"
systemctl is-active docker

echo "è¿è¡Œçš„å®¹å™¨:"
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

echo

echo "=== ç½‘ç»œè¿æ¥ ==="
echo "ç½‘ç»œæ¥å£:"
ip addr show | grep -E "inet.*global"

echo "ç½‘ç»œè¿é€šæ€§æµ‹è¯•:"
ping -c 3 8.8.8.8 > /dev/null && echo "å¤–ç½‘è¿æ¥æ­£å¸¸" || echo "å¤–ç½‘è¿æ¥å¼‚å¸¸"

echo

echo "=== æœ€è¿‘é”™è¯¯æ—¥å¿— ==="
echo "ç³»ç»Ÿé”™è¯¯(æœ€è¿‘10æ¡):"
journalctl -p err --since "1 hour ago" -n 10 --no-pager
```

**æ‰¹é‡å¥åº·æ£€æŸ¥**ï¼š
```bash
# æ‰¹é‡æ‰§è¡Œå¥åº·æ£€æŸ¥
ansible edge-nodes -m script -a "./edge-health-check.sh"

# æ”¶é›†æ£€æŸ¥ç»“æœ
ansible edge-nodes -m fetch -a "src=/tmp/health-check.log dest=./reports/"
```

#### ğŸ”§ è¿œç¨‹æ•…éšœæ¢å¤


**è‡ªåŠ¨æ•…éšœæ¢å¤è„šæœ¬**ï¼š
```bash
#!/bin/bash
# auto-recovery.sh

# æ£€æŸ¥å…³é”®æœåŠ¡
if ! systemctl is-active --quiet docker; then
    echo "DockeræœåŠ¡å¼‚å¸¸ï¼Œå°è¯•é‡å¯..."
    systemctl restart docker
    sleep 10
fi

# æ£€æŸ¥å…³é”®å®¹å™¨
if ! docker ps | grep -q "edge-web-app"; then
    echo "Webåº”ç”¨å®¹å™¨å¼‚å¸¸ï¼Œå°è¯•é‡å¯..."
    docker start edge-web-app
fi

# æ¸…ç†ç£ç›˜ç©ºé—´
DISK_USAGE=$(df / | tail -1 | awk '{print $5}' | sed 's/%//')
if [ $DISK_USAGE -gt 80 ]; then
    echo "ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œæ¸…ç†æ—¥å¿—æ–‡ä»¶..."
    find /var/log -name "*.log" -mtime +7 -delete
    docker system prune -f
fi

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
MEMORY_USAGE=$(free | grep Mem | awk '{print ($3/$2) * 100.0}')
if (( $(echo "$MEMORY_USAGE > 90" | bc -l) )); then
    echo "å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œé‡å¯é«˜å†…å­˜å®¹å™¨..."
    docker restart edge-web-app
fi
```

**å®šæ—¶æ‰§è¡Œæ•…éšœæ£€æŸ¥**ï¼š
```bash
# æ·»åŠ å®šæ—¶ä»»åŠ¡
crontab -e

# æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å¥åº·æ£€æŸ¥
*/5 * * * * /opt/scripts/auto-recovery.sh >> /var/log/auto-recovery.log 2>&1
```

---

## 5. ğŸ“ˆ è¾¹ç¼˜èŠ‚ç‚¹ç›‘æ§


### 5.1 ç›‘æ§ä½“ç³»æ¶æ„


**ä¸‰å±‚ç›‘æ§ä½“ç³»**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¸­å¤®ç›‘æ§ä¸­å¿ƒ                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Grafana    â”‚ â”‚ AlertManagerâ”‚ â”‚ Prometheus  â”‚     â”‚
â”‚  â”‚   å±•ç¤º      â”‚ â”‚    å‘Šè­¦     â”‚ â”‚   å­˜å‚¨      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–²
                           â”‚ æ•°æ®é‡‡é›†
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¾¹ç¼˜èŠ‚ç‚¹ç¾¤                           â”‚
â”‚  èŠ‚ç‚¹1           èŠ‚ç‚¹2           èŠ‚ç‚¹3                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Exporterâ”‚    â”‚ Exporterâ”‚    â”‚ Exporterâ”‚            â”‚
â”‚  â”‚  ç›‘æ§   â”‚    â”‚  ç›‘æ§   â”‚    â”‚  ç›‘æ§   â”‚            â”‚
â”‚  â”‚  æŒ‡æ ‡   â”‚    â”‚  æŒ‡æ ‡   â”‚    â”‚  æŒ‡æ ‡   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 åŸºç¡€ç›‘æ§æŒ‡æ ‡


#### ğŸ“Š ç³»ç»Ÿçº§ç›‘æ§æŒ‡æ ‡


**CPUç›‘æ§æŒ‡æ ‡**ï¼š
- **CPUä½¿ç”¨ç‡** - åæ˜ å¤„ç†å™¨è´Ÿè½½æƒ…å†µ
- **CPUè´Ÿè½½** - åæ˜ ç³»ç»Ÿç¹å¿™ç¨‹åº¦
- **ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°** - åæ˜ ç³»ç»Ÿè°ƒåº¦æ•ˆç‡

**å†…å­˜ç›‘æ§æŒ‡æ ‡**ï¼š
- **å†…å­˜ä½¿ç”¨ç‡** - å·²ç”¨å†…å­˜å æ€»å†…å­˜çš„æ¯”ä¾‹
- **å¯ç”¨å†…å­˜** - ç³»ç»Ÿå¯åˆ†é…çš„å†…å­˜å¤§å°
- **ç¼“å­˜å‘½ä¸­ç‡** - ç¼“å­˜ä½¿ç”¨æ•ˆç‡

**ç£ç›˜ç›‘æ§æŒ‡æ ‡**ï¼š
- **ç£ç›˜ä½¿ç”¨ç‡** - å­˜å‚¨ç©ºé—´å ç”¨æƒ…å†µ
- **ç£ç›˜IO** - è¯»å†™æ“ä½œçš„é¢‘ç‡å’Œå»¶è¿Ÿ
- **ç£ç›˜é˜Ÿåˆ—é•¿åº¦** - ç­‰å¾…å¤„ç†çš„IOè¯·æ±‚æ•°

**ç½‘ç»œç›‘æ§æŒ‡æ ‡**ï¼š
- **ç½‘ç»œå¸¦å®½ä½¿ç”¨** - å…¥ç«™å’Œå‡ºç«™æµé‡
- **ç½‘ç»œå»¶è¿Ÿ** - æ•°æ®ä¼ è¾“æ—¶é—´
- **ä¸¢åŒ…ç‡** - ç½‘ç»œè´¨é‡æŒ‡æ ‡
- **è¿æ¥æ•°** - å½“å‰æ´»è·ƒè¿æ¥æ•°é‡

#### ğŸ”§ åº”ç”¨çº§ç›‘æ§æŒ‡æ ‡


**WebæœåŠ¡ç›‘æ§**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          WebæœåŠ¡ç›‘æ§æŒ‡æ ‡            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å“åº”æ—¶é—´ (Response Time)          â”‚
â”‚   - å¹³å‡å“åº”æ—¶é—´                    â”‚
â”‚   - 95%åˆ†ä½å“åº”æ—¶é—´                 â”‚
â”‚   - æœ€å¤§å“åº”æ—¶é—´                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ååé‡ (Throughput)               â”‚
â”‚   - æ¯ç§’è¯·æ±‚æ•° (RPS)               â”‚
â”‚   - æ¯åˆ†é’Ÿè¯·æ±‚æ•° (RPM)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ é”™è¯¯ç‡ (Error Rate)               â”‚
â”‚   - HTTPé”™è¯¯ç ç»Ÿè®¡                  â”‚
â”‚   - åº”ç”¨å¼‚å¸¸ç»Ÿè®¡                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ å¯ç”¨æ€§ (Availability)             â”‚
â”‚   - æœåŠ¡åœ¨çº¿æ—¶é—´                    â”‚
â”‚   - å¥åº·æ£€æŸ¥çŠ¶æ€                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ç›‘æ§å·¥å…·éƒ¨ç½²


#### ğŸ“Š Prometheus + Grafanaç›‘æ§æ ˆ


**Prometheusé…ç½®**ï¼š
```yaml
# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "edge_rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

scrape_configs:
  # Node Exporter - ç³»ç»Ÿç›‘æ§
  - job_name: 'node-exporter'
    static_configs:
      - targets: 
        - 'edge-node-1:9100'
        - 'edge-node-2:9100'
        - 'edge-node-3:9100'
  
  # cAdvisor - å®¹å™¨ç›‘æ§  
  - job_name: 'cadvisor'
    static_configs:
      - targets:
        - 'edge-node-1:8080'
        - 'edge-node-2:8080'
        - 'edge-node-3:8080'
        
  # åº”ç”¨ç›‘æ§
  - job_name: 'edge-apps'
    static_configs:
      - targets:
        - 'edge-node-1:8081'
        - 'edge-node-2:8081'
```

**å®¹å™¨åŒ–éƒ¨ç½²ç›‘æ§æ ˆ**ï¼š
```yaml
# docker-compose-monitoring.yml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'
    restart: unless-stopped

  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin123
    volumes:
      - grafana_data:/var/lib/grafana
    restart: unless-stopped
    
  alertmanager:
    image: prom/alertmanager:latest
    container_name: alertmanager
    ports:
      - "9093:9093"
    volumes:
      - ./alertmanager.yml:/etc/alertmanager/alertmanager.yml
    restart: unless-stopped

volumes:
  prometheus_data:
  grafana_data:
```

#### ğŸ“ˆ Grafanaä»ªè¡¨æ¿é…ç½®


**åŸºç¡€ç³»ç»Ÿç›‘æ§é¢æ¿**ï¼š

åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºè¾¹ç¼˜èŠ‚ç‚¹å…³é”®æŒ‡æ ‡çš„ä»ªè¡¨æ¿ï¼ŒåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š

**CPUä½¿ç”¨ç‡å›¾è¡¨**ï¼š
```
æŸ¥è¯¢è¯­å¥: 100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)
å›¾è¡¨ç±»å‹: æ—¶é—´åºåˆ—å›¾
é˜ˆå€¼è®¾ç½®: 
  - è­¦å‘Š: > 70%
  - ä¸¥é‡: > 90%
```

**å†…å­˜ä½¿ç”¨ç‡å›¾è¡¨**ï¼š
```
æŸ¥è¯¢è¯­å¥: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100
å›¾è¡¨ç±»å‹: ä»ªè¡¨ç›˜
é˜ˆå€¼è®¾ç½®:
  - æ­£å¸¸: < 70%
  - è­¦å‘Š: 70%-85%
  - ä¸¥é‡: > 85%
```

**ç£ç›˜ä½¿ç”¨ç‡å›¾è¡¨**ï¼š
```
æŸ¥è¯¢è¯­å¥: 100 - ((node_filesystem_avail_bytes{mountpoint="/"} * 100) / node_filesystem_size_bytes{mountpoint="/"})
å›¾è¡¨ç±»å‹: æŸ±çŠ¶å›¾
é˜ˆå€¼è®¾ç½®:
  - è­¦å‘Š: > 80%
  - ä¸¥é‡: > 95%
```

### 5.4 å‘Šè­¦è§„åˆ™é…ç½®


#### ğŸš¨ å…³é”®å‘Šè­¦è§„åˆ™


**åˆ›å»ºå‘Šè­¦è§„åˆ™æ–‡ä»¶**ï¼š
```yaml
# edge_rules.yml
groups:
- name: edge-node-alerts
  rules:
  # CPUä½¿ç”¨ç‡å‘Šè­¦
  - alert: HighCPUUsage
    expr: 100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
    for: 2m
    labels:
      severity: warning
      service: system
    annotations:
      summary: "è¾¹ç¼˜èŠ‚ç‚¹CPUä½¿ç”¨ç‡è¿‡é«˜"
      description: "èŠ‚ç‚¹ {{ $labels.instance }} CPUä½¿ç”¨ç‡å·²è¾¾åˆ° {{ $value }}%ï¼Œè¶…è¿‡80%é˜ˆå€¼"

  # å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦
  - alert: HighMemoryUsage
    expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 85
    for: 2m
    labels:
      severity: warning
      service: system
    annotations:
      summary: "è¾¹ç¼˜èŠ‚ç‚¹å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
      description: "èŠ‚ç‚¹ {{ $labels.instance }} å†…å­˜ä½¿ç”¨ç‡å·²è¾¾åˆ° {{ $value }}%ï¼Œè¶…è¿‡85%é˜ˆå€¼"

  # ç£ç›˜ç©ºé—´å‘Šè­¦
  - alert: LowDiskSpace
    expr: 100 - ((node_filesystem_avail_bytes{mountpoint="/"} * 100) / node_filesystem_size_bytes{mountpoint="/"}) > 90
    for: 1m
    labels:
      severity: critical
      service: system
    annotations:
      summary: "è¾¹ç¼˜èŠ‚ç‚¹ç£ç›˜ç©ºé—´ä¸è¶³"
      description: "èŠ‚ç‚¹ {{ $labels.instance }} ç£ç›˜ä½¿ç”¨ç‡å·²è¾¾åˆ° {{ $value }}%ï¼Œå‰©ä½™ç©ºé—´ä¸è¶³"

  # æœåŠ¡å®•æœºå‘Šè­¦
  - alert: ServiceDown
    expr: up == 0
    for: 1m
    labels:
      severity: critical
      service: monitoring
    annotations:
      summary: "è¾¹ç¼˜èŠ‚ç‚¹æœåŠ¡å¼‚å¸¸"
      description: "èŠ‚ç‚¹ {{ $labels.instance }} æœåŠ¡ {{ $labels.job }} æ— æ³•è®¿é—®"

  # å®¹å™¨å¼‚å¸¸å‘Šè­¦
  - alert: ContainerDown
    expr: absent(container_memory_usage_bytes{name!="",container!="POD"})
    for: 1m
    labels:
      severity: warning
      service: container
    annotations:
      summary: "å®¹å™¨æœåŠ¡å¼‚å¸¸"
      description: "å®¹å™¨ {{ $labels.name }} åœ¨èŠ‚ç‚¹ {{ $labels.instance }} ä¸Šå·²åœæ­¢è¿è¡Œ"
```

#### ğŸ“§ å‘Šè­¦é€šçŸ¥é…ç½®


**AlertManageré…ç½®**ï¼š
```yaml
# alertmanager.yml
global:
  smtp_smarthost: 'smtp.company.com:587'
  smtp_from: 'alerts@company.com'
  smtp_auth_username: 'alerts@company.com'
  smtp_auth_password: 'password123'

route:
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'web.hook'
  routes:
  - match:
      severity: critical
    receiver: 'critical-alerts'
  - match:
      severity: warning  
    receiver: 'warning-alerts'

receivers:
- name: 'web.hook'
  webhook_configs:
  - url: 'http://webhook-server:5000/alerts'

- name: 'critical-alerts'
  email_configs:
  - to: 'ops-team@company.com'
    subject: 'ã€ä¸¥é‡å‘Šè­¦ã€‘è¾¹ç¼˜èŠ‚ç‚¹å‘Šè­¦'
    body: |
      å‘Šè­¦è¯¦æƒ…:
      - å‘Šè­¦åç§°: {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}
      - å‘Šè­¦æè¿°: {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
      - è§¦å‘æ—¶é—´: {{ range .Alerts }}{{ .StartsAt }}{{ end }}
      
      è¯·ç«‹å³å¤„ç†ï¼
  
- name: 'warning-alerts'
  email_configs:
  - to: 'dev-team@company.com'
    subject: 'ã€è­¦å‘Šã€‘è¾¹ç¼˜èŠ‚ç‚¹å‘Šè­¦'
    body: |
      å‘Šè­¦è¯¦æƒ…:
      - å‘Šè­¦åç§°: {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}
      - å‘Šè­¦æè¿°: {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
      - è§¦å‘æ—¶é—´: {{ range .Alerts }}{{ .StartsAt }}{{ end }}
```

### 5.5 ç›‘æ§æ•°æ®åˆ†æ


#### ğŸ“Š æ€§èƒ½è¶‹åŠ¿åˆ†æ


**å…³é”®æ€§èƒ½æŒ‡æ ‡è¶‹åŠ¿**ï¼š
- **èµ„æºä½¿ç”¨è¶‹åŠ¿** - åˆ†æCPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æ¨¡å¼
- **è¯·æ±‚é‡è¶‹åŠ¿** - åˆ†æä¸šåŠ¡è®¿é—®é«˜å³°å’Œä½è°·
- **é”™è¯¯ç‡è¶‹åŠ¿** - åˆ†æç³»ç»Ÿç¨³å®šæ€§å˜åŒ–
- **å“åº”æ—¶é—´è¶‹åŠ¿** - åˆ†æç”¨æˆ·ä½“éªŒå˜åŒ–

**å®¹é‡è§„åˆ’åˆ†æ**ï¼š
```
åŸºäºå†å²æ•°æ®çš„å®¹é‡é¢„æµ‹ï¼š

å½“å‰èµ„æºä½¿ç”¨æƒ…å†µï¼š
CPUå¹³å‡ä½¿ç”¨ç‡: 45%
å†…å­˜å¹³å‡ä½¿ç”¨ç‡: 60% 
ç£ç›˜å¹³å‡ä½¿ç”¨ç‡: 30%

å¢é•¿è¶‹åŠ¿åˆ†æï¼š
CPUæœˆå¢é•¿ç‡: 5%
å†…å­˜æœˆå¢é•¿ç‡: 8%
ç£ç›˜æœˆå¢é•¿ç‡: 12%

é¢„æµ‹ç»“æœï¼š
CPUåˆ°è¾¾80%é˜ˆå€¼: çº¦7ä¸ªæœˆ
å†…å­˜åˆ°è¾¾80%é˜ˆå€¼: çº¦3ä¸ªæœˆ  â† éœ€è¦ä¼˜å…ˆå…³æ³¨
ç£ç›˜åˆ°è¾¾80%é˜ˆå€¼: çº¦4ä¸ªæœˆ
```

#### ğŸ” å¼‚å¸¸æ£€æµ‹


**åŸºäºé˜ˆå€¼çš„å¼‚å¸¸æ£€æµ‹**ï¼š
- é™æ€é˜ˆå€¼ - å›ºå®šçš„å‘Šè­¦è¾¹ç•Œå€¼
- åŠ¨æ€é˜ˆå€¼ - åŸºäºå†å²æ•°æ®çš„æµ®åŠ¨é˜ˆå€¼  
- ç™¾åˆ†ä½é˜ˆå€¼ - åŸºäºç»Ÿè®¡åˆ†ä½æ•°çš„é˜ˆå€¼

**å¸¸ç”¨å¼‚å¸¸æ£€æµ‹è§„åˆ™**ï¼š
```yaml
# å“åº”æ—¶é—´å¼‚å¸¸ï¼ˆåŸºäº95%åˆ†ä½æ•°ï¼‰
- alert: HighResponseTime
  expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 0.5
  for: 3m
  
# é”™è¯¯ç‡å¼‚å¸¸ï¼ˆåŸºäºç™¾åˆ†æ¯”ï¼‰
- alert: HighErrorRate  
  expr: rate(http_requests_total{status=~"5.."}[5m]) / rate(http_requests_total[5m]) > 0.05
  for: 2m

# å†…å­˜æ³„æ¼æ£€æµ‹ï¼ˆåŸºäºå¢é•¿è¶‹åŠ¿ï¼‰
- alert: MemoryLeak
  expr: increase(process_resident_memory_bytes[1h]) > 104857600  # 100MB/hour
  for: 2h
```

---

## 6. ğŸŒ ç½‘ç»œè¿æ¥ä¸å¸¦å®½ç®¡ç†


### 6.1 ç½‘ç»œæ¶æ„è§„åˆ’


**è¾¹ç¼˜ç½‘ç»œæ‹“æ‰‘ç»“æ„**ï¼š
```
                        äº’è”ç½‘
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  æ ¸å¿ƒè·¯ç”±å™¨  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚           â”‚           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ è¾¹ç¼˜èŠ‚ç‚¹A   â”‚   â”‚   â”‚ è¾¹ç¼˜èŠ‚ç‚¹B   â”‚
        â”‚ (åŒ—äº¬)      â”‚   â”‚   â”‚ (ä¸Šæµ·)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ è¾¹ç¼˜èŠ‚ç‚¹C   â”‚
                  â”‚ (å¹¿å·)      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å¸¦å®½éœ€æ±‚è¯„ä¼°


#### ğŸ“Š å¸¦å®½è®¡ç®—æ–¹æ³•


**åŸºç¡€å¸¦å®½éœ€æ±‚è®¡ç®—**ï¼š
```
å¸¦å®½éœ€æ±‚ = å¹¶å‘ç”¨æˆ·æ•° Ã— å¹³å‡æ¯ç”¨æˆ·å¸¦å®½ Ã— å³°å€¼å€æ•°

ç¤ºä¾‹è®¡ç®—ï¼š
é¢„æœŸå¹¶å‘ç”¨æˆ·: 1000äºº
å¹³å‡é¡µé¢å¤§å°: 2MB
å¹³å‡æµè§ˆæ—¶é—´: 30ç§’
å³°å€¼å€æ•°: 2.5

å•ç”¨æˆ·å¸¦å®½éœ€æ±‚ = 2MB Ã· 30ç§’ = 0.067MB/s = 0.53Mbps
æ€»å¸¦å®½éœ€æ±‚ = 1000 Ã— 0.53 Ã— 2.5 = 1325Mbps â‰ˆ 1.3Gbps
```

**ä¸åŒä¸šåŠ¡ç±»å‹çš„å¸¦å®½ç‰¹ç‚¹**ï¼š

| ä¸šåŠ¡ç±»å‹ | å¸¦å®½ç‰¹å¾ | å…¸å‹å¸¦å®½éœ€æ±‚ | å»¶è¿Ÿè¦æ±‚ |
|---------|---------|-------------|----------|
| **Webç¼“å­˜** | çªå‘æ€§é«˜ | 100Mbps-1Gbps | < 50ms |
| **è§†é¢‘æµ** | æŒç»­æ€§é«˜ | 500Mbps-10Gbps | < 100ms |
| **IoTæ•°æ®** | å°åŒ…é¢‘ç¹ | 10-100Mbps | < 200ms |
| **æ–‡ä»¶ä¸‹è½½** | å¤§æ–‡ä»¶ä¼ è¾“ | 1-10Gbps | ä¸æ•æ„Ÿ |

### 6.3 ç½‘ç»œé…ç½®ä¸ä¼˜åŒ–


#### ğŸ”§ ç½‘ç»œæ¥å£é…ç½®


**æŸ¥çœ‹ç½‘ç»œæ¥å£ä¿¡æ¯**ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£
ip addr show

# æŸ¥çœ‹ç‰¹å®šæ¥å£è¯¦æƒ…
ip addr show eth0

# æŸ¥çœ‹æ¥å£ç»Ÿè®¡ä¿¡æ¯
cat /proc/net/dev
```

**é…ç½®ç½‘ç»œæ¥å£**ï¼š
```bash
# ä¸´æ—¶é…ç½®IPåœ°å€
sudo ip addr add 192.168.1.100/24 dev eth0
sudo ip route add default via 192.168.1.1

# æ°¸ä¹…é…ç½®ï¼ˆCentOS/RHELï¼‰
sudo vim /etc/sysconfig/network-scripts/ifcfg-eth0
```

```ini
# ifcfg-eth0é…ç½®ç¤ºä¾‹
DEVICE=eth0
BOOTPROTO=static
IPADDR=192.168.1.100
NETMASK=255.255.255.0
GATEWAY=192.168.1.1
DNS1=8.8.8.8
DNS2=8.8.4.4
ONBOOT=yes
```

#### âš¡ ç½‘ç»œæ€§èƒ½è°ƒä¼˜


**TCPå‚æ•°ä¼˜åŒ–**ï¼š
```bash
# ç¼–è¾‘ç³»ç»Ÿç½‘ç»œå‚æ•°
sudo vim /etc/sysctl.conf

# æ·»åŠ ç½‘ç»œä¼˜åŒ–å‚æ•°
# TCPç¼“å†²åŒºå¤§å°
net.core.rmem_max = 134217728
net.core.wmem_max = 134217728
net.ipv4.tcp_rmem = 4096 87380 134217728
net.ipv4.tcp_wmem = 4096 65536 134217728

# TCPè¿æ¥ä¼˜åŒ–
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_timestamps = 1
net.ipv4.tcp_sack = 1
net.ipv4.tcp_no_metrics_save = 1

# è¿æ¥æ•°é™åˆ¶
net.core.somaxconn = 65535
net.core.netdev_max_backlog = 5000

# åº”ç”¨é…ç½®
sudo sysctl -p
```

**ç½‘ç»œé˜Ÿåˆ—ä¼˜åŒ–**ï¼š
```bash
# æŸ¥çœ‹å½“å‰é˜Ÿåˆ—è®¾ç½®
ethtool -g eth0

# è®¾ç½®æ¥æ”¶é˜Ÿåˆ—å¤§å°
sudo ethtool -G eth0 rx 4096 tx 4096

# è®¾ç½®ç½‘ç»œä¸­æ–­äº²å’Œæ€§
echo 2 > /proc/irq/24/smp_affinity  # å°†ç½‘ç»œä¸­æ–­ç»‘å®šåˆ°CPUæ ¸å¿ƒ
```

### 6.4 æµé‡æ§åˆ¶ä¸QoS


#### ğŸš¦ æµé‡æ•´å½¢é…ç½®


**ä»€ä¹ˆæ˜¯æµé‡æ•´å½¢**ï¼š
æµé‡æ•´å½¢å°±åƒé«˜é€Ÿå…¬è·¯çš„é™é€Ÿå’Œåˆ†é“è¡Œé©¶ï¼Œç¡®ä¿ä¸åŒç±»å‹çš„ç½‘ç»œæµé‡éƒ½èƒ½å¾—åˆ°åˆé€‚çš„å¸¦å®½åˆ†é…ï¼Œé¿å…æŸäº›åº”ç”¨å ç”¨è¿‡å¤šå¸¦å®½å½±å“å…¶ä»–æœåŠ¡ã€‚

**ä½¿ç”¨TCè¿›è¡Œæµé‡æ§åˆ¶**ï¼š
```bash
# å®‰è£…traffic controlå·¥å…·
sudo yum install iproute-tc

# åˆ›å»ºæ ¹é˜Ÿåˆ—è§„åˆ™
sudo tc qdisc add dev eth0 root handle 1: htb default 30

# åˆ›å»ºæ ¹ç±»åˆ«ï¼ˆæ€»å¸¦å®½1Gbpsï¼‰
sudo tc class add dev eth0 parent 1: classid 1:1 htb rate 1000mbit

# åˆ›å»ºå­ç±»åˆ«
# é«˜ä¼˜å…ˆçº§æµé‡ï¼ˆHTTP/HTTPSï¼‰- 60%å¸¦å®½
sudo tc class add dev eth0 parent 1:1 classid 1:10 htb rate 600mbit ceil 800mbit
# æ™®é€šæµé‡ - 30%å¸¦å®½  
sudo tc class add dev eth0 parent 1:1 classid 1:20 htb rate 300mbit ceil 500mbit
# ä½ä¼˜å…ˆçº§æµé‡ï¼ˆæ–‡ä»¶ä¼ è¾“ï¼‰- 10%å¸¦å®½
sudo tc class add dev eth0 parent 1:1 classid 1:30 htb rate 100mbit ceil 200mbit

# æ·»åŠ è¿‡æ»¤è§„åˆ™
# HTTPæµé‡åˆ°é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—
sudo tc filter add dev eth0 protocol ip parent 1:0 prio 1 u32 match ip dport 80 0xffff flowid 1:10
sudo tc filter add dev eth0 protocol ip parent 1:0 prio 1 u32 match ip dport 443 0xffff flowid 1:10

# FTPæµé‡åˆ°ä½ä¼˜å…ˆçº§é˜Ÿåˆ—
sudo tc filter add dev eth0 protocol ip parent 1:0 prio 3 u32 match ip dport 21 0xffff flowid 1:30
```

**æŸ¥çœ‹æµé‡æ§åˆ¶çŠ¶æ€**ï¼š
```bash
# æŸ¥çœ‹é˜Ÿåˆ—è§„åˆ™
sudo tc qdisc show dev eth0

# æŸ¥çœ‹ç±»åˆ«ç»Ÿè®¡
sudo tc -s class show dev eth0

# æŸ¥çœ‹è¿‡æ»¤å™¨è§„åˆ™
sudo tc filter show dev eth0
```

#### ğŸ“Š å¸¦å®½ç›‘æ§


**å®æ—¶å¸¦å®½ç›‘æ§å·¥å…·**ï¼š
```bash
# iftop - å®æ—¶ç½‘ç»œæµé‡ç›‘æ§
sudo iftop -i eth0

# nload - ç®€æ´çš„å¸¦å®½ç›‘æ§
sudo nload eth0

# vnstat - ç½‘ç»œæµé‡ç»Ÿè®¡
sudo vnstat -i eth0 -h  # å°æ—¶ç»Ÿè®¡
sudo vnstat -i eth0 -d  # æ—¥ç»Ÿè®¡
```

**è‡ªå®šä¹‰å¸¦å®½ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# bandwidth-monitor.sh

INTERFACE="eth0"
INTERVAL=5

echo "ç½‘ç»œæ¥å£: $INTERFACE"
echo "ç›‘æ§é—´éš”: ${INTERVAL}ç§’"
echo "æ—¶é—´                  æ¥æ”¶é€Ÿç‡      å‘é€é€Ÿç‡      æ€»é€Ÿç‡"
echo "============================================================"

while true; do
    # è·å–åˆå§‹å€¼
    RX1=$(cat /sys/class/net/$INTERFACE/statistics/rx_bytes)
    TX1=$(cat /sys/class/net/$INTERFACE/statistics/tx_bytes)
    
    sleep $INTERVAL
    
    # è·å–å½“å‰å€¼
    RX2=$(cat /sys/class/net/$INTERFACE/statistics/rx_bytes)
    TX2=$(cat /sys/class/net/$INTERFACE/statistics/tx_bytes)
    
    # è®¡ç®—é€Ÿç‡ï¼ˆMbpsï¼‰
    RX_RATE=$(echo "scale=2; ($RX2 - $RX1) * 8 / $INTERVAL / 1000000" | bc)
    TX_RATE=$(echo "scale=2; ($TX2 - $TX1) * 8 / $INTERVAL / 1000000" | bc)
    TOTAL_RATE=$(echo "scale=2; $RX_RATE + $TX_RATE" | bc)
    
    printf "$(date '+%Y-%m-%d %H:%M:%S')  %8.2f Mbps  %8.2f Mbps  %8.2f Mbps\n" \
           $RX_RATE $TX_RATE $TOTAL_RATE
done
```

### 6.5 ç½‘ç»œæ•…éšœæ’æŸ¥


#### ğŸ” ç½‘ç»œè¿é€šæ€§æµ‹è¯•


**åŸºç¡€è¿é€šæ€§æµ‹è¯•**ï¼š
```bash
# pingæµ‹è¯•
ping -c 5 8.8.8.8  # æµ‹è¯•å¤–ç½‘è¿é€šæ€§
ping -c 5 192.168.1.1  # æµ‹è¯•ç½‘å…³è¿é€šæ€§

# tracerouteè·¯å¾„è¿½è¸ª
traceroute google.com

# telnetç«¯å£æµ‹è¯•
telnet 192.168.1.100 80
```

**ç½‘ç»œæ€§èƒ½æµ‹è¯•**ï¼š
```bash
# iperfå¸¦å®½æµ‹è¯•
# æœåŠ¡å™¨ç«¯
iperf3 -s

# å®¢æˆ·ç«¯
iperf3 -c 192.168.1.100 -t 30  # æµ‹è¯•30ç§’

# mtrç½‘ç»œè´¨é‡æµ‹è¯•
mtr -c 100 google.com
```

#### ğŸ”§ å¸¸è§ç½‘ç»œé—®é¢˜å¤„ç†


**ç½‘ç»œå»¶è¿Ÿé—®é¢˜æ’æŸ¥**ï¼š
```bash
# æŸ¥çœ‹ç½‘ç»œå»¶è¿Ÿç»Ÿè®¡
ping -c 100 target-host | tail -1

# æŸ¥çœ‹ç½‘ç»œæ‹¥å¡æƒ…å†µ
ss -i  # æŸ¥çœ‹è¿æ¥ä¿¡æ¯

# æ£€æŸ¥DNSè§£ææ—¶é—´
dig google.com
```

**ä¸¢åŒ…é—®é¢˜æ’æŸ¥**ï¼š
```bash
# æŸ¥çœ‹ç½‘ç»œæ¥å£é”™è¯¯ç»Ÿè®¡
cat /proc/net/dev | grep eth0

# æŸ¥çœ‹ç³»ç»Ÿç½‘ç»œç»Ÿè®¡
netstat -i

# æ£€æŸ¥é˜²ç«å¢™ä¸¢åŒ…
iptables -L -v -n
```

**ç½‘ç»œæ€§èƒ½é—®é¢˜åˆ†ææµç¨‹**ï¼š
```
ç½‘ç»œæ€§èƒ½é—®é¢˜æ’æŸ¥æ­¥éª¤ï¼š

1. åŸºç¡€æ£€æŸ¥
   â”œâ”€ æ£€æŸ¥ç½‘ç»œæ¥å£çŠ¶æ€: ip link show
   â”œâ”€ æ£€æŸ¥IPé…ç½®: ip addr show  
   â””â”€ æ£€æŸ¥è·¯ç”±è¡¨: ip route show

2. è¿é€šæ€§æµ‹è¯•
   â”œâ”€ pingæµ‹è¯•ç½‘å…³
   â”œâ”€ pingæµ‹è¯•DNSæœåŠ¡å™¨
   â””â”€ pingæµ‹è¯•ç›®æ ‡æœåŠ¡å™¨

3. æ€§èƒ½æµ‹è¯•
   â”œâ”€ iperfæµ‹è¯•å¸¦å®½
   â”œâ”€ mtræµ‹è¯•ç½‘ç»œè´¨é‡
   â””â”€ tcpdumpæŠ“åŒ…åˆ†æ

4. ç³»ç»Ÿèµ„æºæ£€æŸ¥
   â”œâ”€ æ£€æŸ¥CPUä½¿ç”¨ç‡
   â”œâ”€ æ£€æŸ¥å†…å­˜ä½¿ç”¨ç‡
   â””â”€ æ£€æŸ¥ç½‘ç»œä¸­æ–­å¤„ç†

5. åº”ç”¨å±‚æ£€æŸ¥
   â”œâ”€ æ£€æŸ¥åº”ç”¨ç¨‹åºæ—¥å¿—
   â”œâ”€ æ£€æŸ¥æœåŠ¡ç›‘å¬ç«¯å£
   â””â”€ æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
```

---

## 7. ğŸ’¾ è¾¹ç¼˜å­˜å‚¨æ–¹æ¡ˆ


### 7.1 å­˜å‚¨æ¶æ„è®¾è®¡


**è¾¹ç¼˜å­˜å‚¨åˆ†å±‚æ¶æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚    Webåº”ç”¨  â”‚ â”‚   APIæœåŠ¡   â”‚ â”‚   ç¼“å­˜æœåŠ¡  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   å­˜å‚¨æŠ½è±¡å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  æ–‡ä»¶å­˜å‚¨   â”‚ â”‚  å¯¹è±¡å­˜å‚¨   â”‚ â”‚  å—å­˜å‚¨     â”‚     â”‚
â”‚  â”‚    API      â”‚ â”‚    API      â”‚ â”‚    API      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   ç‰©ç†å­˜å‚¨å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ NVMe SSD    â”‚ â”‚   SATA SSD  â”‚ â”‚  æœºæ¢°ç¡¬ç›˜   â”‚     â”‚
â”‚  â”‚  (çƒ­æ•°æ®)   â”‚ â”‚  (æ¸©æ•°æ®)   â”‚ â”‚  (å†·æ•°æ®)   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å­˜å‚¨ç±»å‹é€‰æ‹©


#### ğŸ’¾ å­˜å‚¨ä»‹è´¨å¯¹æ¯”


**ä¸åŒå­˜å‚¨ä»‹è´¨çš„ç‰¹ç‚¹**ï¼š

| å­˜å‚¨ç±»å‹ | è¯»å†™é€Ÿåº¦ | å®¹é‡ä»·æ ¼æ¯” | é€‚ç”¨åœºæ™¯ | å¯¿å‘½ |
|---------|---------|-----------|---------|------|
| **NVMe SSD** | æå¿«(3000+ MB/s) | é«˜ | çƒ­æ•°æ®ç¼“å­˜ | 3-5å¹´ |
| **SATA SSD** | å¿«(500+ MB/s) | ä¸­ç­‰ | æ¸©æ•°æ®å­˜å‚¨ | 3-5å¹´ |
| **æœºæ¢°ç¡¬ç›˜** | æ…¢(100+ MB/s) | ä½ | å†·æ•°æ®å½’æ¡£ | 3-8å¹´ |
| **å†…å­˜** | æå¿«(10000+ MB/s) | æé«˜ | ä¸´æ—¶ç¼“å­˜ | æ–­ç”µä¸¢å¤± |

#### ğŸ—‚ï¸ æ•°æ®åˆ†ç±»å­˜å‚¨ç­–ç•¥


**æ•°æ®çƒ­åº¦åˆ†ç±»**ï¼š
```
çƒ­æ•°æ® (Hot Data):
â”œâ”€ ç‰¹å¾: é¢‘ç¹è®¿é—®ï¼Œéœ€è¦å¿«é€Ÿå“åº”
â”œâ”€ ç¤ºä¾‹: ç½‘ç«™é¦–é¡µã€çƒ­é—¨å›¾ç‰‡ã€APIç¼“å­˜
â”œâ”€ å­˜å‚¨: NVMe SSD + å†…å­˜ç¼“å­˜
â””â”€ ä¿ç•™æ—¶é—´: 1-7å¤©

æ¸©æ•°æ® (Warm Data):
â”œâ”€ ç‰¹å¾: å¶å°”è®¿é—®ï¼Œå“åº”è¦æ±‚ä¸­ç­‰
â”œâ”€ ç¤ºä¾‹: æ™®é€šç½‘é¡µã€ç”¨æˆ·æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶
â”œâ”€ å­˜å‚¨: SATA SSD
â””â”€ ä¿ç•™æ—¶é—´: 7-30å¤©

å†·æ•°æ® (Cold Data):
â”œâ”€ ç‰¹å¾: å¾ˆå°‘è®¿é—®ï¼Œä¸»è¦ç”¨äºå¤‡ä»½
â”œâ”€ ç¤ºä¾‹: å†å²æ•°æ®ã€å½’æ¡£æ–‡ä»¶ã€å¤‡ä»½æ•°æ®
â”œâ”€ å­˜å‚¨: æœºæ¢°ç¡¬ç›˜
â””â”€ ä¿ç•™æ—¶é—´: 30å¤©ä»¥ä¸Š
```

### 7.3 æœ¬åœ°å­˜å‚¨é…ç½®


#### ğŸ”§ æ–‡ä»¶ç³»ç»Ÿé€‰æ‹©


**å¸¸ç”¨æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”**ï¼š

**ext4æ–‡ä»¶ç³»ç»Ÿ**ï¼š
```bash
# åˆ›å»ºext4æ–‡ä»¶ç³»ç»Ÿ
sudo mkfs.ext4 /dev/sdb1

# æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ
sudo mkdir /mnt/storage
sudo mount /dev/sdb1 /mnt/storage

# æ°¸ä¹…æŒ‚è½½é…ç½®
echo '/dev/sdb1 /mnt/storage ext4 defaults 0 2' >> /etc/fstab
```

**XFSæ–‡ä»¶ç³»ç»Ÿ**ï¼ˆæ¨èå¤§å®¹é‡å­˜å‚¨ï¼‰ï¼š
```bash
# åˆ›å»ºXFSæ–‡ä»¶ç³»ç»Ÿ
sudo mkfs.xfs /dev/sdc1

# æŒ‚è½½é…ç½®
sudo mount /dev/sdc1 /mnt/bigdata
echo '/dev/sdc1 /mnt/bigdata xfs defaults 0 2' >> /etc/fstab
```

**ZFSæ–‡ä»¶ç³»ç»Ÿ**ï¼ˆé«˜çº§ç‰¹æ€§ï¼‰ï¼š
```bash
# å®‰è£…ZFS
sudo yum install zfs

# åˆ›å»ºå­˜å‚¨æ± 
sudo zpool create storage-pool /dev/sdd /dev/sde

# åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ
sudo zfs create storage-pool/edge-data
sudo zfs set compression=lz4 storage-pool/edge-data
sudo zfs set dedup=on storage-pool/edge-data
```

#### ğŸ“ ç›®å½•ç»“æ„è§„åˆ’


**è¾¹ç¼˜å­˜å‚¨ç›®å½•ç»“æ„**ï¼š
```
/opt/edge-storage/
â”œâ”€â”€ cache/                    # ç¼“å­˜æ•°æ®
â”‚   â”œâ”€â”€ web-cache/           # Webå†…å®¹ç¼“å­˜
â”‚   â”œâ”€â”€ api-cache/           # APIå“åº”ç¼“å­˜
â”‚   â””â”€â”€ image-cache/         # å›¾ç‰‡ç¼“å­˜
â”œâ”€â”€ data/                    # åº”ç”¨æ•°æ®
â”‚   â”œâ”€â”€ databases/           # æ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ user-files/          # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â”‚   â””â”€â”€ temp/                # ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ backup/                  # å¤‡ä»½æ•°æ®
â”‚   â”œâ”€â”€ daily/               # æ—¥å¤‡ä»½
â”‚   â”œâ”€â”€ weekly/              # å‘¨å¤‡ä»½
â”‚   â””â”€â”€ monthly/             # æœˆå¤‡ä»½
â””â”€â”€ logs/                    # æ—¥å¿—æ–‡ä»¶
    â”œâ”€â”€ application/         # åº”ç”¨æ—¥å¿—
    â”œâ”€â”€ system/              # ç³»ç»Ÿæ—¥å¿—
    â””â”€â”€ access/              # è®¿é—®æ—¥å¿—
```

**åˆ›å»ºå­˜å‚¨ç›®å½•**ï¼š
```bash
#!/bin/bash
# setup-storage.sh

BASE_DIR="/opt/edge-storage"

# åˆ›å»ºä¸»è¦ç›®å½•
sudo mkdir -p $BASE_DIR/{cache,data,backup,logs}
sudo mkdir -p $BASE_DIR/cache/{web-cache,api-cache,image-cache}
sudo mkdir -p $BASE_DIR/data/{databases,user-files,temp}
sudo mkdir -p $BASE_DIR/backup/{daily,weekly,monthly}
sudo mkdir -p $BASE_DIR/logs/{application,system,access}

# è®¾ç½®æƒé™
sudo chown -R edge-user:edge-group $BASE_DIR
sudo chmod -R 755 $BASE_DIR

# è®¾ç½®ä¸´æ—¶ç›®å½•ç‰¹æ®Šæƒé™
sudo chmod 1777 $BASE_DIR/data/temp

echo "å­˜å‚¨ç›®å½•ç»“æ„åˆ›å»ºå®Œæˆ"
```

### 7.4 ç¼“å­˜å­˜å‚¨ä¼˜åŒ–


#### âš¡ Redisç¼“å­˜é…ç½®


**Redisé…ç½®ä¼˜åŒ–**ï¼š
```conf
# redis.conf - è¾¹ç¼˜èŠ‚ç‚¹ä¼˜åŒ–é…ç½®

# å†…å­˜é…ç½®
maxmemory 4gb
maxmemory-policy allkeys-lru

# æŒä¹…åŒ–é…ç½®
save 900 1
save 300 10
save 60 10000

# ç½‘ç»œé…ç½®
tcp-keepalive 300
timeout 0

# æ—¥å¿—é…ç½®
loglevel notice
logfile /var/log/redis/redis-server.log

# å®‰å…¨é…ç½®
requirepass your-secure-password
```

**Rediséƒ¨ç½²è„šæœ¬**ï¼š
```bash
#!/bin/bash
# deploy-redis.sh

# å®‰è£…Redis
sudo yum install redis -y

# å¤‡ä»½åŸé…ç½®
sudo cp /etc/redis.conf /etc/redis.conf.backup

# åº”ç”¨ä¼˜åŒ–é…ç½®
sudo cp redis-optimized.conf /etc/redis.conf

# åˆ›å»ºæ•°æ®ç›®å½•
sudo mkdir -p /var/lib/redis
sudo chown redis:redis /var/lib/redis

# å¯åŠ¨æœåŠ¡
sudo systemctl start redis
sudo systemctl enable redis

# éªŒè¯å®‰è£…
redis-cli ping
```

#### ğŸ—„ï¸ æ–‡ä»¶ç¼“å­˜ç³»ç»Ÿ


**Nginxæ–‡ä»¶ç¼“å­˜é…ç½®**ï¼š
```nginx
# nginx.conf - ç¼“å­˜é…ç½®æ®µ

http {
    # ç¼“å­˜è·¯å¾„é…ç½®
    proxy_cache_path /opt/edge-storage/cache/web-cache
                     levels=1:2
                     keys_zone=web_cache:10m
                     max_size=1g
                     inactive=60m;
    
    # å›¾ç‰‡ç¼“å­˜é…ç½®
    proxy_cache_path /opt/edge-storage/cache/image-cache
                     levels=1:2
                     keys_zone=image_cache:10m
                     max_size=5g
                     inactive=7d;

    server {
        listen 80;
        server_name edge.example.com;
        
        # é™æ€æ–‡ä»¶ç¼“å­˜
        location ~* \.(jpg|jpeg|png|gif|css|js)$ {
            proxy_cache image_cache;
            proxy_cache_valid 200 7d;
            proxy_cache_valid 404 1m;
            proxy_pass http://backend;
            
            add_header X-Cache-Status $upstream_cache_status;
        }
        
        # APIå“åº”ç¼“å­˜
        location /api/ {
            proxy_cache web_cache;
            proxy_cache_valid 200 5m;
            proxy_cache_key "$request_method$request_uri";
            proxy_pass http://api-backend;
        }
    }
}
```

### 7.5 æ•°æ®åŒæ­¥ä¸å¤åˆ¶


#### ğŸ”„ æ•°æ®åŒæ­¥ç­–ç•¥


**rsyncæ•°æ®åŒæ­¥**ï¼š
```bash
# åŸºæœ¬åŒæ­¥å‘½ä»¤
rsync -av --delete /local/data/ user@remote-server:/remote/data/

# å¢é‡åŒæ­¥è„šæœ¬
#!/bin/bash
# sync-data.sh

SOURCE_DIR="/opt/edge-storage/data/"
REMOTE_HOST="central-server.example.com"
REMOTE_DIR="/backup/edge-nodes/node-1/"
LOG_FILE="/var/log/data-sync.log"

# æ‰§è¡ŒåŒæ­¥
rsync -avz --delete \
    --exclude='temp/' \
    --exclude='*.tmp' \
    --log-file=$LOG_FILE \
    $SOURCE_DIR \
    edge-user@$REMOTE_HOST:$REMOTE_DIR

# æ£€æŸ¥åŒæ­¥ç»“æœ
if [ $? -eq 0 ]; then
    echo "$(date): æ•°æ®åŒæ­¥æˆåŠŸ" >> $LOG_FILE
else
    echo "$(date): æ•°æ®åŒæ­¥å¤±è´¥" >> $LOG_FILE
    # å‘é€å‘Šè­¦é‚®ä»¶
    echo "è¾¹ç¼˜èŠ‚ç‚¹æ•°æ®åŒæ­¥å¤±è´¥" | mail -s "åŒæ­¥å‘Šè­¦" admin@example.com
fi
```

**å®šæ—¶åŒæ­¥ä»»åŠ¡**ï¼š
```bash
# æ·»åŠ å®šæ—¶ä»»åŠ¡
crontab -e

# æ¯å°æ—¶åŒæ­¥ä¸€æ¬¡çƒ­æ•°æ®
0 * * * * /opt/scripts/sync-hot-data.sh

# æ¯å¤©å‡Œæ™¨åŒæ­¥å…¨é‡æ•°æ®
0 2 * * * /opt/scripts/sync-all-data.sh

# æ¯å‘¨åŒæ­¥å¤‡ä»½æ•°æ®
0 3 * * 0 /opt/scripts/sync-backup-data.sh
```

#### ğŸ“‹ æ•°æ®ä¸€è‡´æ€§ä¿è¯


**æ•°æ®ç‰ˆæœ¬æ§åˆ¶**ï¼š
```bash
#!/bin/bash
# data-version-control.sh

DATA_DIR="/opt/edge-storage/data"
VERSION_FILE="$DATA_DIR/.version"
BACKUP_DIR="/opt/edge-storage/backup/versions"

# ç”Ÿæˆæ•°æ®ç‰ˆæœ¬å·
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
VERSION="v_$TIMESTAMP"

# åˆ›å»ºæ•°æ®å¿«ç…§
echo "åˆ›å»ºæ•°æ®å¿«ç…§: $VERSION"
mkdir -p $BACKUP_DIR
tar -czf $BACKUP_DIR/data_$VERSION.tar.gz -C $DATA_DIR .

# æ›´æ–°ç‰ˆæœ¬æ–‡ä»¶
echo "$VERSION" > $VERSION_FILE
echo "$(date): $VERSION" >> $DATA_DIR/.version_history

# æ¸…ç†è€ç‰ˆæœ¬ï¼ˆä¿ç•™æœ€è¿‘10ä¸ªç‰ˆæœ¬ï¼‰
cd $BACKUP_DIR
ls -t data_v_*.tar.gz | tail -n +11 | xargs rm -f

echo "æ•°æ®ç‰ˆæœ¬æ§åˆ¶å®Œæˆ: $VERSION"
```

### 7.6 å­˜å‚¨ç›‘æ§ä¸ç»´æŠ¤


#### ğŸ“Š å­˜å‚¨ä½¿ç”¨ç›‘æ§


**ç£ç›˜ä½¿ç”¨ç›‘æ§è„šæœ¬**ï¼š
```bash
#!/bin/bash
# storage-monitor.sh

ALERT_THRESHOLD=80
EMAIL="admin@example.com"

# æ£€æŸ¥ç£ç›˜ä½¿ç”¨ç‡
check_disk_usage() {
    local mount_point=$1
    local usage=$(df -h $mount_point | tail -1 | awk '{print $5}' | sed 's/%//')
    
    echo "$(date): $mount_point ä½¿ç”¨ç‡: ${usage}%"
    
    if [ $usage -gt $ALERT_THRESHOLD ]; then
        echo "è­¦å‘Š: $mount_point ç£ç›˜ä½¿ç”¨ç‡è¾¾åˆ° ${usage}%"
        echo "ç£ç›˜ä½¿ç”¨ç‡å‘Šè­¦: $mount_point ä½¿ç”¨ç‡ ${usage}%" | \
        mail -s "å­˜å‚¨å‘Šè­¦" $EMAIL
    fi
}

# æ£€æŸ¥ä¸»è¦å­˜å‚¨æŒ‚è½½ç‚¹
check_disk_usage "/"
check_disk_usage "/opt/edge-storage"
check_disk_usage "/var/log"

# æ£€æŸ¥inodeä½¿ç”¨ç‡
check_inode_usage() {
    local mount_point=$1
    local inode_usage=$(df -i $mount_point | tail -1 | awk '{print $5}' | sed 's/%//')
    
    if [ $inode_usage -gt 80 ]; then
        echo "è­¦å‘Š: $mount_point inodeä½¿ç”¨ç‡è¾¾åˆ° ${inode_usage}%"
    fi
}

check_inode_usage "/"
check_inode_usage "/opt/edge-storage"
```

#### ğŸ§¹ å­˜å‚¨æ¸…ç†ç»´æŠ¤


**è‡ªåŠ¨æ¸…ç†è„šæœ¬**ï¼š
```bash
#!/bin/bash
# storage-cleanup.sh

LOG_DIR="/opt/edge-storage/logs"
CACHE_DIR="/opt/edge-storage/cache"
TEMP_DIR="/opt/edge-storage/data/temp"

echo "å¼€å§‹å­˜å‚¨æ¸…ç†ç»´æŠ¤..."

# æ¸…ç†è¿‡æœŸæ—¥å¿—æ–‡ä»¶ï¼ˆ7å¤©å‰ï¼‰
echo "æ¸…ç†è¿‡æœŸæ—¥å¿—æ–‡ä»¶..."
find $LOG_DIR -name "*.log" -mtime +7 -delete
find $LOG_DIR -name "*.log.*" -mtime +7 -delete

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆ1å¤©å‰ï¼‰
echo "æ¸…ç†ä¸´æ—¶æ–‡ä»¶..."
find $TEMP_DIR -type f -mtime +1 -delete

# æ¸…ç†è¿‡æœŸç¼“å­˜ï¼ˆæ ¹æ®ç¼“å­˜ç­–ç•¥ï¼‰
echo "æ¸…ç†è¿‡æœŸç¼“å­˜æ–‡ä»¶..."
find $CACHE_DIR -name "*" -mtime +3 -delete

# æ¸…ç†ç©ºç›®å½•
echo "æ¸…ç†ç©ºç›®å½•..."
find $LOG_DIR $CACHE_DIR $TEMP_DIR -type d -empty -delete

# å‹ç¼©å¤§æ—¥å¿—æ–‡ä»¶
echo "å‹ç¼©å¤§æ—¥å¿—æ–‡ä»¶..."
find $LOG_DIR -name "*.log" -size +100M -exec gzip {} \;

echo "å­˜å‚¨æ¸…ç†å®Œæˆ"

# ç”Ÿæˆæ¸…ç†æŠ¥å‘Š
df -h > /tmp/disk_usage_after_cleanup.txt
echo "æ¸…ç†åç£ç›˜ä½¿ç”¨æƒ…å†µ:"
cat /tmp/disk_usage_after_cleanup.txt
```

---

## 8. ğŸ› ï¸ æ•…éšœè‡ªæ„ˆä¸æ¢å¤æœºåˆ¶


### 8.1 æ•…éšœæ£€æµ‹æœºåˆ¶


**æ•…éšœåˆ†ç±»ä¸æ£€æµ‹**ï¼š
```
ç¡¬ä»¶æ•…éšœï¼š                  è½¯ä»¶æ•…éšœï¼š                  ç½‘ç»œæ•…éšœï¼š
â”œâ”€ CPUè¿‡çƒ­                 â”œâ”€ è¿›ç¨‹å¼‚å¸¸é€€å‡º            â”œâ”€ ç½‘ç»œè¿æ¥ä¸­æ–­
â”œâ”€ å†…å­˜é”™è¯¯                â”œâ”€ æœåŠ¡æ— å“åº”              â”œâ”€ DNSè§£æå¤±è´¥
â”œâ”€ ç£ç›˜æ•…éšœ                â”œâ”€ èµ„æºè€—å°½                â”œâ”€ è·¯ç”±ä¸å¯è¾¾
â””â”€ ç½‘å¡æ•…éšœ                â””â”€ é…ç½®é”™è¯¯                â””â”€ å¸¦å®½ä¸è¶³

æ£€æµ‹æ–¹æ³•ï¼š                  æ£€æµ‹æ–¹æ³•ï¼š                  æ£€æµ‹æ–¹æ³•ï¼š
â”œâ”€ ç¡¬ä»¶ç›‘æ§                â”œâ”€ è¿›ç¨‹ç›‘æ§                â”œâ”€ è¿é€šæ€§æµ‹è¯•
â”œâ”€ æ¸©åº¦ä¼ æ„Ÿå™¨              â”œâ”€ å¥åº·æ£€æŸ¥                â”œâ”€ ç½‘ç»œè´¨é‡ç›‘æ§
â”œâ”€ SMARTä¿¡æ¯               â”œâ”€ èµ„æºç›‘æ§                â”œâ”€ è·¯ç”±è¡¨æ£€æŸ¥
â””â”€ ç³»ç»Ÿæ—¥å¿—                â””â”€ åº”ç”¨æ—¥å¿—                â””â”€ ç½‘ç»œå»¶è¿Ÿæµ‹è¯•
```

### 8.2 å¥åº·æ£€æŸ¥ç³»ç»Ÿ


#### ğŸ¥ å…¨é¢å¥åº·æ£€æŸ¥


**ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# comprehensive-health-check.sh

HEALTH_REPORT="/tmp/health-report-$(date +%Y%m%d_%H%M%S).txt"
ALERT_EMAIL="ops@example.com"
CRITICAL_ISSUES=0

echo "===============================================" > $HEALTH_REPORT
echo "è¾¹ç¼˜èŠ‚ç‚¹å¥åº·æ£€æŸ¥æŠ¥å‘Š" >> $HEALTH_REPORT
echo "æ£€æŸ¥æ—¶é—´: $(date)" >> $HEALTH_REPORT
echo "èŠ‚ç‚¹ä¸»æœº: $(hostname)" >> $HEALTH_REPORT
echo "===============================================" >> $HEALTH_REPORT

# æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
check_system_load() {
    echo -e "\nğŸ–¥ï¸  ç³»ç»Ÿè´Ÿè½½æ£€æŸ¥:" >> $HEALTH_REPORT
    
    LOAD_1MIN=$(uptime | awk '{print $(NF-2)}' | tr -d ',')
    CPU_CORES=$(nproc)
    LOAD_RATIO=$(echo "scale=2; $LOAD_1MIN / $CPU_CORES" | bc)
    
    echo "1åˆ†é’Ÿè´Ÿè½½: $LOAD_1MIN" >> $HEALTH_REPORT
    echo "CPUæ ¸å¿ƒæ•°: $CPU_CORES" >> $HEALTH_REPORT
    echo "è´Ÿè½½æ¯”ç‡: $LOAD_RATIO" >> $HEALTH_REPORT
    
    if (( $(echo "$LOAD_RATIO > 2.0" | bc -l) )); then
        echo "âš ï¸ è­¦å‘Š: ç³»ç»Ÿè´Ÿè½½è¿‡é«˜" >> $HEALTH_REPORT
        ((CRITICAL_ISSUES++))
    else
        echo "âœ… ç³»ç»Ÿè´Ÿè½½æ­£å¸¸" >> $HEALTH_REPORT
    fi
}

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
check_memory_usage() {
    echo -e "\nğŸ§  å†…å­˜ä½¿ç”¨æ£€æŸ¥:" >> $HEALTH_REPORT
    
    MEMORY_INFO=$(free -m)
    TOTAL_MEM=$(echo "$MEMORY_INFO" | awk 'NR==2{print $2}')
    USED_MEM=$(echo "$MEMORY_INFO" | awk 'NR==2{print $3}')
    MEMORY_PERCENT=$(echo "scale=2; $USED_MEM * 100 / $TOTAL_MEM" | bc)
    
    echo "æ€»å†…å­˜: ${TOTAL_MEM}MB" >> $HEALTH_REPORT
    echo "å·²ç”¨å†…å­˜: ${USED_MEM}MB" >> $HEALTH_REPORT
    echo "ä½¿ç”¨ç‡: ${MEMORY_PERCENT}%" >> $HEALTH_REPORT
    
    if (( $(echo "$MEMORY_PERCENT > 90" | bc -l) )); then
        echo "âš ï¸ è­¦å‘Š: å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜" >> $HEALTH_REPORT
        ((CRITICAL_ISSUES++))
    else
        echo "âœ… å†…å­˜ä½¿ç”¨æ­£å¸¸" >> $HEALTH_REPORT
    fi
}

# æ£€æŸ¥ç£ç›˜ç©ºé—´
check_disk_space() {
    echo -e "\nğŸ’¾ ç£ç›˜ç©ºé—´æ£€æŸ¥:" >> $HEALTH_REPORT
    
    df -h | grep -E '^/dev/' | while read line; do
        USAGE=$(echo $line | awk '{print $5}' | sed 's/%//')
        MOUNT=$(echo $line | awk '{print $6}')
        
        echo "æŒ‚è½½ç‚¹ $MOUNT: ${USAGE}%" >> $HEALTH_REPORT
        
        if [ $USAGE -gt 90 ]; then
            echo "âš ï¸ è­¦å‘Š: $MOUNT ç£ç›˜ç©ºé—´ä¸è¶³" >> $HEALTH_REPORT
            ((CRITICAL_ISSUES++))
        fi
    done
}

# æ£€æŸ¥å…³é”®æœåŠ¡
check_critical_services() {
    echo -e "\nğŸ”§ å…³é”®æœåŠ¡æ£€æŸ¥:" >> $HEALTH_REPORT
    
    SERVICES=("docker" "nginx" "redis" "sshd")
    
    for service in "${SERVICES[@]}"; do
        if systemctl is-active --quiet $service; then
            echo "âœ… $service æœåŠ¡è¿è¡Œæ­£å¸¸" >> $HEALTH_REPORT
        else
            echo "âŒ $service æœåŠ¡å¼‚å¸¸" >> $HEALTH_REPORT
            ((CRITICAL_ISSUES++))
        fi
    done
}

# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
check_network_connectivity() {
    echo -e "\nğŸŒ ç½‘ç»œè¿é€šæ€§æ£€æŸ¥:" >> $HEALTH_REPORT
    
    # æ£€æŸ¥å¤–ç½‘è¿é€šæ€§
    if ping -c 3 8.8.8.8 > /dev/null 2>&1; then
        echo "âœ… å¤–ç½‘è¿æ¥æ­£å¸¸" >> $HEALTH_REPORT
    else
        echo "âŒ å¤–ç½‘è¿æ¥å¼‚å¸¸" >> $HEALTH_REPORT
        ((CRITICAL_ISSUES++))
    fi
    
    # æ£€æŸ¥DNSè§£æ
    if nslookup google.com > /dev/null 2>&1; then
        echo "âœ… DNSè§£ææ­£å¸¸" >> $HEALTH_REPORT
    else
        echo "âŒ DNSè§£æå¼‚å¸¸" >> $HEALTH_REPORT
        ((CRITICAL_ISSUES++))
    fi
}

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
check_container_status() {
    echo -e "\nğŸ³ å®¹å™¨çŠ¶æ€æ£€æŸ¥:" >> $HEALTH_REPORT
    
    if command -v docker > /dev/null; then
        RUNNING_CONTAINERS=$(docker ps --format "table {{.Names}}\t{{.Status}}")
        echo "$RUNNING_CONTAINERS" >> $HEALTH_REPORT
        
        EXITED_CONTAINERS=$(docker ps -a --filter "status=exited" --format "{{.Names}}")
        if [ ! -z "$EXITED_CONTAINERS" ]; then
            echo "âš ï¸ å·²åœæ­¢çš„å®¹å™¨: $EXITED_CONTAINERS" >> $HEALTH_REPORT
            ((CRITICAL_ISSUES++))
        fi
    else
        echo "Dockeræœªå®‰è£…" >> $HEALTH_REPORT
    fi
}

# æ‰§è¡Œæ‰€æœ‰æ£€æŸ¥
check_system_load
check_memory_usage
check_disk_space
check_critical_services
check_network_connectivity
check_container_status

# ç”Ÿæˆæ€»ç»“
echo -e "\n===============================================" >> $HEALTH_REPORT
echo "æ£€æŸ¥æ€»ç»“:" >> $HEALTH_REPORT
echo "å‘ç° $CRITICAL_ISSUES ä¸ªå…³é”®é—®é¢˜" >> $HEALTH_REPORT

if [ $CRITICAL_ISSUES -gt 0 ]; then
    echo "ğŸš¨ ç³»ç»ŸçŠ¶æ€: å¼‚å¸¸" >> $HEALTH_REPORT
    # å‘é€å‘Šè­¦é‚®ä»¶
    mail -s "è¾¹ç¼˜èŠ‚ç‚¹å¥åº·æ£€æŸ¥å‘Šè­¦" $ALERT_EMAIL < $HEALTH_REPORT
else
    echo "âœ… ç³»ç»ŸçŠ¶æ€: æ­£å¸¸" >> $HEALTH_REPORT
fi

echo "===============================================" >> $HEALTH_REPORT

# è¾“å‡ºæŠ¥å‘Š
cat $HEALTH_REPORT
```

### 8.3 è‡ªåŠ¨æ¢å¤æœºåˆ¶


#### ğŸ”„ æœåŠ¡è‡ªåŠ¨é‡å¯


**æœåŠ¡ç›‘æ§å’Œè‡ªåŠ¨é‡å¯**ï¼š
```bash
#!/bin/bash
# service-auto-recovery.sh

LOG_FILE="/var/log/auto-recovery.log"

log_message() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> $LOG_FILE
}

# æ£€æŸ¥å¹¶é‡å¯æœåŠ¡
restart_service_if_needed() {
    local service_name=$1
    local max_retries=3
    local retry_count=0
    
    while [ $retry_count -lt $max_retries ]; do
        if ! systemctl is-active --quiet $service_name; then
            log_message "æ£€æµ‹åˆ° $service_name æœåŠ¡å¼‚å¸¸ï¼Œå°è¯•é‡å¯..."
            
            systemctl restart $service_name
            sleep 10
            
            if systemctl is-active --quiet $service_name; then
                log_message "$service_name æœåŠ¡é‡å¯æˆåŠŸ"
                return 0
            else
                ((retry_count++))
                log_message "$service_name æœåŠ¡é‡å¯å¤±è´¥ï¼Œé‡è¯•æ¬¡æ•°: $retry_count"
                sleep 30
            fi
        else
            return 0
        fi
    done
    
    log_message "$service_name æœåŠ¡é‡å¯å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°"
    # å‘é€å‘Šè­¦
    echo "$service_name æœåŠ¡æ— æ³•è‡ªåŠ¨æ¢å¤" | mail -s "æœåŠ¡æ¢å¤å¤±è´¥å‘Šè­¦" ops@example.com
    return 1
}

# æ£€æŸ¥å®¹å™¨çŠ¶æ€å¹¶é‡å¯
restart_container_if_needed() {
    local container_name=$1
    
    if ! docker ps | grep -q $container_name; then
        log_message "æ£€æµ‹åˆ°å®¹å™¨ $container_name å¼‚å¸¸ï¼Œå°è¯•é‡å¯..."
        
        docker start $container_name
        sleep 10
        
        if docker ps | grep -q $container_name; then
            log_message "å®¹å™¨ $container_name é‡å¯æˆåŠŸ"
        else
            log_message "å®¹å™¨ $container_name é‡å¯å¤±è´¥"
            echo "å®¹å™¨ $container_name æ— æ³•è‡ªåŠ¨æ¢å¤" | mail -s "å®¹å™¨æ¢å¤å¤±è´¥å‘Šè­¦" ops@example.com
        fi
    fi
}

# ç›‘æ§å…³é”®æœåŠ¡
log_message "å¼€å§‹è‡ªåŠ¨æ¢å¤æ£€æŸ¥..."

restart_service_if_needed "nginx"
restart_service_if_needed "docker" 
restart_service_if_needed "redis"

# ç›‘æ§å…³é”®å®¹å™¨
if command -v docker > /dev/null; then
    restart_container_if_needed "edge-web-app"
    restart_container_if_needed "edge-api-app"
fi

log_message "è‡ªåŠ¨æ¢å¤æ£€æŸ¥å®Œæˆ"
```

#### ğŸ§¹ èµ„æºæ¸…ç†æ¢å¤


**å†…å­˜å‹åŠ›è‡ªåŠ¨ç¼“è§£**ï¼š
```bash
#!/bin/bash
# memory-pressure-relief.sh

MEMORY_THRESHOLD=90
LOG_FILE="/var/log/memory-recovery.log"

log_message() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> $LOG_FILE
}

get_memory_usage() {
    free | grep Mem | awk '{printf "%.1f", $3/$2 * 100.0}'
}

# æ£€æŸ¥å†…å­˜ä½¿ç”¨ç‡
CURRENT_MEMORY=$(get_memory_usage)

if (( $(echo "$CURRENT_MEMORY > $MEMORY_THRESHOLD" | bc -l) )); then
    log_message "å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜: ${CURRENT_MEMORY}%ï¼Œå¼€å§‹é‡Šæ”¾å†…å­˜..."
    
    # 1. æ¸…ç†ç³»ç»Ÿç¼“å­˜
    echo 3 > /proc/sys/vm/drop_caches
    log_message "å·²æ¸…ç†ç³»ç»Ÿç¼“å­˜"
    
    # 2. é‡å¯é«˜å†…å­˜ä½¿ç”¨çš„éå…³é”®å®¹å™¨
    HIGH_MEMORY_CONTAINERS=$(docker stats --no-stream --format "table {{.Container}}\t{{.MemUsage}}" | 
                            awk 'NR>1 && $2 ~ /[0-9]+MiB/ {if($2+0 > 500) print $1}')
    
    for container in $HIGH_MEMORY_CONTAINERS; do
        if [[ "$container" != *"critical"* ]]; then
            log_message "é‡å¯é«˜å†…å­˜å®¹å™¨: $container"
            docker restart $container
        fi
    done
    
    # 3. æ£€æŸ¥æ¢å¤æ•ˆæœ
    sleep 30
    NEW_MEMORY=$(get_memory_usage)
    log_message "å†…å­˜é‡Šæ”¾åä½¿ç”¨ç‡: ${NEW_MEMORY}%"
    
    if (( $(echo "$NEW_MEMORY < $MEMORY_THRESHOLD" | bc -l) )); then
        log_message "å†…å­˜å‹åŠ›ç¼“è§£æˆåŠŸ"
    else
        log_message "å†…å­˜å‹åŠ›ç¼“è§£å¤±è´¥ï¼Œéœ€è¦äººå·¥å¹²é¢„"
        echo "å†…å­˜ä½¿ç”¨ç‡ä»ç„¶è¿‡é«˜: ${NEW_MEMORY}%" | mail -s "å†…å­˜å‘Šè­¦" ops@example.com
    fi
else
    log_message "å†…å­˜ä½¿ç”¨æ­£å¸¸: ${CURRENT_MEMORY}%"
fi
```

### 8.4 æ•…éšœè½¬ç§»æœºåˆ¶


#### ğŸ”€ æœåŠ¡æ•…éšœè½¬ç§»


**è´Ÿè½½å‡è¡¡æ•…éšœè½¬ç§»é…ç½®**ï¼š
```bash
#!/bin/bash
# failover-manager.sh

PRIMARY_NODE="192.168.1.100"
BACKUP_NODE="192.168.1.101"
VIP="192.168.1.99"  # è™šæ‹ŸIP
INTERFACE="eth0"

check_primary_health() {
    ping -c 3 $PRIMARY_NODE > /dev/null 2>&1
    return $?
}

promote_to_primary() {
    echo "æå‡å½“å‰èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹..."
    
    # æ·»åŠ è™šæ‹ŸIP
    ip addr add $VIP/24 dev $INTERFACE
    
    # å‘é€å…è´¹ARP
    arping -c 3 -I $INTERFACE $VIP
    
    # å¯åŠ¨æ‰€æœ‰æœåŠ¡
    systemctl start nginx
    systemctl start redis
    docker start edge-web-app
    
    echo "æ•…éšœè½¬ç§»å®Œæˆï¼Œå½“å‰èŠ‚ç‚¹å·²æˆä¸ºä¸»èŠ‚ç‚¹"
}

demote_to_backup() {
    echo "é™çº§ä¸ºå¤‡ä»½èŠ‚ç‚¹..."
    
    # ç§»é™¤è™šæ‹ŸIP
    ip addr del $VIP/24 dev $INTERFACE 2>/dev/null
    
    # åœæ­¢éå¿…è¦æœåŠ¡
    systemctl stop nginx
    docker stop edge-web-app
    
    echo "å·²é™çº§ä¸ºå¤‡ä»½èŠ‚ç‚¹"
}

# ä¸»å¾ªç¯
while true; do
    if check_primary_health; then
        # ä¸»èŠ‚ç‚¹æ­£å¸¸ï¼Œä¿æŒå¤‡ä»½çŠ¶æ€
        echo "ä¸»èŠ‚ç‚¹æ­£å¸¸è¿è¡Œ"
        demote_to_backup
    else
        # ä¸»èŠ‚ç‚¹å¼‚å¸¸ï¼Œæ¥ç®¡æœåŠ¡
        echo "ä¸»èŠ‚ç‚¹å¼‚å¸¸ï¼Œå¼€å§‹æ•…éšœè½¬ç§»"
        promote_to_primary
        
        # å‘é€å‘Šè­¦é€šçŸ¥
        echo "è¾¹ç¼˜èŠ‚ç‚¹æ•…éšœè½¬ç§»: $(hostname) å·²æ¥ç®¡ $PRIMARY_NODE çš„æœåŠ¡" | \
        mail -s "æ•…éšœè½¬ç§»é€šçŸ¥" ops@example.com
    fi
    
    sleep 30
done
```

#### ğŸ“¦ æ•°æ®å¤‡ä»½ä¸æ¢å¤


**è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ**ï¼š
```bash
#!/bin/bash
# backup-system.sh

BACKUP_SOURCE="/opt/edge-storage/data"
BACKUP_LOCAL="/opt/edge-storage/backup"
BACKUP_REMOTE="backup-server:/backups/edge-nodes/$(hostname)"
RETENTION_DAYS=7

create_backup() {
    local backup_type=$1
    local timestamp=$(date +%Y%m%d_%H%M%S)
    local backup_name="${backup_type}_${timestamp}"
    local backup_path="$BACKUP_LOCAL/$backup_name"
    
    echo "åˆ›å»º $backup_type å¤‡ä»½: $backup_name"
    
    # åˆ›å»ºæœ¬åœ°å¤‡ä»½
    mkdir -p $backup_path
    rsync -av --exclude='temp/' $BACKUP_SOURCE/ $backup_path/
    
    # å‹ç¼©å¤‡ä»½
    tar -czf $backup_path.tar.gz -C $BACKUP_LOCAL $backup_name
    rm -rf $backup_path
    
    # åŒæ­¥åˆ°è¿œç¨‹å¤‡ä»½æœåŠ¡å™¨
    if rsync -av $backup_path.tar.gz $BACKUP_REMOTE/; then
        echo "$backup_type å¤‡ä»½åˆ›å»ºæˆåŠŸ: $backup_name.tar.gz"
    else
        echo "$backup_type å¤‡ä»½åŒæ­¥å¤±è´¥"
        return 1
    fi
    
    # æ¸…ç†è€å¤‡ä»½
    find $BACKUP_LOCAL -name "${backup_type}_*.tar.gz" -mtime +$RETENTION_DAYS -delete
    
    return 0
}

# æ•°æ®æ¢å¤å‡½æ•°
restore_backup() {
    local backup_file=$1
    local restore_path="/opt/edge-storage/data-restored"
    
    echo "æ¢å¤å¤‡ä»½: $backup_file"
    
    # è§£å‹å¤‡ä»½
    mkdir -p $restore_path
    tar -xzf $backup_file -C $restore_path
    
    # éªŒè¯æ¢å¤çš„æ•°æ®
    if [ -d "$restore_path" ] && [ "$(ls -A $restore_path)" ]; then
        echo "å¤‡ä»½æ¢å¤æˆåŠŸ: $restore_path"
        echo "è¯·æ‰‹åŠ¨éªŒè¯æ•°æ®å®Œæ•´æ€§åæ›¿æ¢ç”Ÿäº§æ•°æ®"
    else
        echo "å¤‡ä»½æ¢å¤å¤±è´¥"
        return 1
    fi
}

# æ‰§è¡Œå¤‡ä»½
case "$1" in
    "daily")
        create_backup "daily"
        ;;
    "weekly") 
        create_backup "weekly"
        ;;
    "restore")
        if [ -z "$2" ]; then
            echo "ç”¨æ³•: $0 restore <backup_file>"
            exit 1
        fi
        restore_backup "$2"
        ;;
    *)
        echo "ç”¨æ³•: $0 {daily|weekly|restore}"
        exit 1
        ;;
esac
```

### 8.5 ç›‘æ§å‘Šè­¦é›†æˆ


#### ğŸ“± å¤šæ¸ é“å‘Šè­¦é€šçŸ¥


**å‘Šè­¦é€šçŸ¥è„šæœ¬**ï¼š
```bash
#!/bin/bash
# alert-notification.sh

WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
EMAIL_LIST="ops@example.com,dev@example.com"
SMS_API_URL="https://api.sms-provider.com/send"

send_email_alert() {
    local subject="$1"
    local message="$2"
    local priority="$3"
    
    if [ "$priority" = "critical" ]; then
        subject="ğŸš¨ [ç´§æ€¥] $subject"
    else
        subject="âš ï¸ [è­¦å‘Š] $subject"
    fi
    
    echo "$message" | mail -s "$subject" $EMAIL_LIST
}

send_slack_alert() {
    local message="$1"
    local priority="$2"
    
    local color="warning"
    local icon=":warning:"
    
    if [ "$priority" = "critical" ]; then
        color="danger"
        icon=":rotating_light:"
    fi
    
    curl -X POST -H 'Content-type: application/json' \
        --data "{
            \"attachments\": [{
                \"color\": \"$color\",
                \"fields\": [{
                    \"title\": \"è¾¹ç¼˜èŠ‚ç‚¹å‘Šè­¦\",
                    \"value\": \"$message\",
                    \"short\": false
                }],
                \"footer\": \"$(hostname)\",
                \"ts\": $(date +%s)
            }],
            \"icon_emoji\": \"$icon\"
        }" $WEBHOOK_URL
}

send_sms_alert() {
    local message="$1"
    local phone_numbers="$2"
    
    # è¿™é‡Œéœ€è¦æ ¹æ®å®é™…SMS APIè¿›è¡Œè°ƒæ•´
    curl -X POST \
        -H "Content-Type: application/json" \
        -d "{\"to\": \"$phone_numbers\", \"message\": \"$message\"}" \
        $SMS_API_URL
}

# å‘é€å‘Šè­¦
send_alert() {
    local title="$1"
    local message="$2" 
    local priority="${3:-warning}"
    
    # æ„å»ºå®Œæ•´å‘Šè­¦æ¶ˆæ¯
    local full_message="èŠ‚ç‚¹: $(hostname)
æ—¶é—´: $(date)
å‘Šè­¦: $title

è¯¦æƒ…:
$message"

    # å‘é€é‚®ä»¶å‘Šè­¦
    send_email_alert "$title" "$full_message" "$priority"
    
    # å‘é€Slackå‘Šè­¦
    send_slack_alert "$full_message" "$priority"
    
    # ç´§æ€¥æƒ…å†µå‘é€çŸ­ä¿¡
    if [ "$priority" = "critical" ]; then
        send_sms_alert "è¾¹ç¼˜èŠ‚ç‚¹ç´§æ€¥å‘Šè­¦: $title" "+86-138xxxx8888"
    fi
    
    # è®°å½•å‘Šè­¦æ—¥å¿—
    echo "$(date): [$priority] $title - $message" >> /var/log/alerts.log
}

# ç¤ºä¾‹è°ƒç”¨
if [ $# -ge 2 ]; then
    send_alert "$1" "$2" "$3"
else
    echo "ç”¨æ³•: $0 <å‘Šè­¦æ ‡é¢˜> <å‘Šè­¦å†…å®¹> [ä¼˜å…ˆçº§:warning|critical]"
    exit 1
fi
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ è¾¹ç¼˜èŠ‚ç‚¹ç¡¬ä»¶é€‰å‹ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„CPUã€å†…å­˜ã€å­˜å‚¨é…ç½®
ğŸ”¸ å®¹å™¨åŒ–éƒ¨ç½²ï¼šä½¿ç”¨Dockerå’Œè½»é‡çº§ç¼–æ’å·¥å…·å®ç°åº”ç”¨å¿«é€Ÿéƒ¨ç½²
ğŸ”¸ èµ„æºç®¡ç†ï¼šé€šè¿‡Cgroupså’Œsystemdè¿›è¡ŒCPUã€å†…å­˜ã€å­˜å‚¨èµ„æºæ§åˆ¶
ğŸ”¸ è¿œç¨‹è¿ç»´ï¼šSSHå¯†é’¥è®¤è¯ã€Ansibleæ‰¹é‡ç®¡ç†ã€é›†ä¸­å¼ç›‘æ§
ğŸ”¸ è¾¹ç¼˜ç›‘æ§ï¼šPrometheus+Grafanaæ„å»ºå®Œæ•´ç›‘æ§ä½“ç³»
ğŸ”¸ ç½‘ç»œç®¡ç†ï¼šå¸¦å®½è§„åˆ’ã€æµé‡æ§åˆ¶ã€QoSä¿éšœ
ğŸ”¸ å­˜å‚¨ä¼˜åŒ–ï¼šåˆ†å±‚å­˜å‚¨ã€ç¼“å­˜ç­–ç•¥ã€æ•°æ®åŒæ­¥
ğŸ”¸ æ•…éšœè‡ªæ„ˆï¼šå¥åº·æ£€æŸ¥ã€è‡ªåŠ¨é‡å¯ã€æ•…éšœè½¬ç§»
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ è¾¹ç¼˜è®¡ç®—çš„æœ¬è´¨**
```
ç†è§£è¦ç‚¹ï¼š
- è¾¹ç¼˜èŠ‚ç‚¹æ˜¯"å°è€Œç¾"çš„è®¡ç®—å•å…ƒï¼Œé è¿‘ç”¨æˆ·å‡å°‘å»¶è¿Ÿ
- èµ„æºæœ‰é™ä½†è¦æ±‚é«˜å¯ç”¨ï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡å’Œç®¡ç†
- è‡ªä¸»è¿è¡Œèƒ½åŠ›æ˜¯æ ¸å¿ƒï¼Œè¦èƒ½åº”å¯¹ç½‘ç»œä¸­æ–­ç­‰å¼‚å¸¸æƒ…å†µ
```

**ğŸ”¹ ç¡¬ä»¶é€‰å‹çš„å¹³è¡¡è‰ºæœ¯**
```
è®°å¿†æ–¹æ³•ï¼š
- æ€§èƒ½ vs æˆæœ¬ï¼šå¤Ÿç”¨å°±å¥½ï¼Œä¸è¿½æ±‚è¿‡åº¦é…ç½®
- å¯é æ€§ vs å¤æ‚åº¦ï¼šå·¥ä¸šçº§è®¾è®¡ï¼Œç®€åŒ–è¿ç»´
- æ‰©å±•æ€§ vs å½“å‰éœ€æ±‚ï¼šé¢„ç•™ä½™é‡ï¼Œé¿å…é¢‘ç¹å‡çº§
```

**ğŸ”¹ ç›‘æ§å‘Šè­¦çš„é‡è¦æ€§**
```
å®é™…æ„ä¹‰ï¼š
- é¢„é˜²æ€§ç»´æŠ¤ï¼šæå‰å‘ç°é—®é¢˜ï¼Œé¿å…æœåŠ¡ä¸­æ–­
- å¿«é€Ÿå“åº”ï¼šè‡ªåŠ¨åŒ–å¤„ç†å¸¸è§æ•…éšœ
- æ•°æ®é©±åŠ¨ï¼šåŸºäºç›‘æ§æ•°æ®è¿›è¡Œå®¹é‡è§„åˆ’å’Œä¼˜åŒ–
```

### 9.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ ä¸šåŠ¡åœºæ™¯åº”ç”¨**
- **CDNè¾¹ç¼˜èŠ‚ç‚¹**ï¼šç¼“å­˜é™æ€å†…å®¹ï¼Œæå‡ç”¨æˆ·è®¿é—®é€Ÿåº¦
- **IoTæ•°æ®å¤„ç†**ï¼šå°±è¿‘å¤„ç†ä¼ æ„Ÿå™¨æ•°æ®ï¼Œå‡å°‘å¸¦å®½æ¶ˆè€—  
- **è§†é¢‘ç›´æ’­**ï¼šè¾¹ç¼˜è½¬ç å’Œåˆ†å‘ï¼Œé™ä½å»¶è¿Ÿ
- **ç§»åŠ¨åº”ç”¨åŠ é€Ÿ**ï¼šAPIç½‘å…³å’Œæ•°æ®ç¼“å­˜

**ğŸ”§ è¿ç»´å®è·µç»éªŒ**
- **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**ï¼šå°½å¯èƒ½è‡ªåŠ¨åŒ–éƒ¨ç½²ã€ç›‘æ§ã€æ¢å¤æµç¨‹
- **æ ‡å‡†åŒ–ç®¡ç†**ï¼šç»Ÿä¸€é…ç½®æ¨¡æ¿ã€è„šæœ¬å’Œæµç¨‹
- **å¼¹æ€§è®¾è®¡**ï¼šè€ƒè™‘å„ç§æ•…éšœåœºæ™¯ï¼Œè®¾è®¡å®¹é”™æœºåˆ¶
- **æŒç»­ä¼˜åŒ–**ï¼šåŸºäºç›‘æ§æ•°æ®ä¸æ–­è°ƒä¼˜æ€§èƒ½

### 9.4 å­¦ä¹ è¿›é˜¶å»ºè®®


**ğŸ“š æ·±å…¥å­¦ä¹ æ–¹å‘**
- **å®¹å™¨ç¼–æ’**ï¼šæ·±å…¥å­¦ä¹ Kubernetesã€Docker Swarm
- **æœåŠ¡ç½‘æ ¼**ï¼šäº†è§£Istioã€Linkerdç­‰å¾®æœåŠ¡æ²»ç†
- **ç›‘æ§ä½“ç³»**ï¼šæŒæ¡æ›´å¤šç›‘æ§å·¥å…·å’Œå‘Šè­¦ç­–ç•¥
- **ç½‘ç»œä¼˜åŒ–**ï¼šå­¦ä¹ SDNã€ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯

**ğŸ› ï¸ å®è·µé¡¹ç›®å»ºè®®**
- æ­å»ºå®Œæ•´çš„è¾¹ç¼˜è®¡ç®—ç¯å¢ƒ
- å®ç°å¤šèŠ‚ç‚¹çš„è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»
- æ„å»ºè‡ªåŠ¨åŒ–è¿ç»´å¹³å°
- å¼€å‘è¾¹ç¼˜åº”ç”¨å’ŒæœåŠ¡

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
è¾¹ç¼˜èŠ‚ç‚¹å°è€Œå¼ºï¼Œç¡¬ä»¶é€‰å‹è¦é€‚å½“
å®¹å™¨éƒ¨ç½²æ ‡å‡†åŒ–ï¼Œèµ„æºç®¡ç†ç²¾ç»†åŒ–
è¿œç¨‹è¿ç»´è‡ªåŠ¨åŒ–ï¼Œç›‘æ§å‘Šè­¦å…¨æ–¹ä½
ç½‘ç»œå­˜å‚¨è¦ä¼˜åŒ–ï¼Œæ•…éšœè‡ªæ„ˆä¿ç¨³å®š
```

**é‡è¦æé†’**ï¼š
- è¾¹ç¼˜èŠ‚ç‚¹çš„å¯é æ€§ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒï¼ŒåŠ¡å¿…é‡è§†ç›‘æ§å’Œæ•…éšœå¤„ç†
- èµ„æºæœ‰é™çš„ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªé…ç½®å’Œä¼˜åŒ–éƒ½å¾ˆé‡è¦
- è‡ªåŠ¨åŒ–æ˜¯è¾¹ç¼˜èŠ‚ç‚¹ç®¡ç†çš„å…³é”®ï¼Œå‡å°‘äººå·¥å¹²é¢„çš„ä¾èµ–
- å®‰å…¨æ€§åŒæ ·é‡è¦ï¼Œåšå¥½è®¿é—®æ§åˆ¶å’Œæ•°æ®ä¿æŠ¤