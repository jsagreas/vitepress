---
title: 12ã€å®¹å™¨åŒ–éƒ¨ç½²ä¸Kubernetesé›†æˆ
---
## ğŸ“š ç›®å½•

1. [å®¹å™¨åŒ–éƒ¨ç½²åŸºç¡€æ¦‚å¿µ](#1-å®¹å™¨åŒ–éƒ¨ç½²åŸºç¡€æ¦‚å¿µ)
2. [Dockeré•œåƒæ„å»ºä¼˜åŒ–](#2-Dockeré•œåƒæ„å»ºä¼˜åŒ–)
3. [Kubernetesèµ„æºæ¸…å•ç®¡ç†](#3-Kubernetesèµ„æºæ¸…å•ç®¡ç†)
4. [Helm Chartéƒ¨ç½²é…ç½®](#4-Helm-Chartéƒ¨ç½²é…ç½®)
5. [å‘½åç©ºé—´ç¯å¢ƒéš”ç¦»](#5-å‘½åç©ºé—´ç¯å¢ƒéš”ç¦»)
6. [ConfigMap/Secreté…ç½®ç®¡ç†](#6-ConfigMap-Secreté…ç½®ç®¡ç†)
7. [æœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡](#7-æœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡)
8. [æŒä¹…åŒ–å­˜å‚¨ç®¡ç†](#8-æŒä¹…åŒ–å­˜å‚¨ç®¡ç†)
9. [é›†ç¾¤èµ„æºç›‘æ§](#9-é›†ç¾¤èµ„æºç›‘æ§)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯å®¹å™¨åŒ–éƒ¨ç½²


**ğŸ”¸ é€šä¿—ç†è§£**
å®¹å™¨åŒ–éƒ¨ç½²å°±åƒæŠŠåº”ç”¨ç¨‹åºè£…è¿›ä¸€ä¸ª"æ ‡å‡†åŒ–çš„ç®±å­"é‡Œã€‚è¿™ä¸ªç®±å­ä¸ä»…åŒ…å«ä½ çš„åº”ç”¨ï¼Œè¿˜åŒ…å«è¿è¡Œå®ƒæ‰€éœ€è¦çš„æ‰€æœ‰ç¯å¢ƒå’Œä¾èµ–ã€‚

```
ä¼ ç»Ÿéƒ¨ç½² vs å®¹å™¨åŒ–éƒ¨ç½²ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼š
åº”ç”¨A â†’ æ“ä½œç³»ç»Ÿ â†’ ç‰©ç†æœåŠ¡å™¨
åº”ç”¨B â†’ æ“ä½œç³»ç»Ÿ â†’ ç‰©ç†æœåŠ¡å™¨  
(æ¯ä¸ªåº”ç”¨éœ€è¦ç‹¬ç«‹æœåŠ¡å™¨ï¼Œèµ„æºæµªè´¹)

å®¹å™¨åŒ–æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨A   â”‚ åº”ç”¨B   â”‚ åº”ç”¨C   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®¹å™¨å¼•æ“ (Docker)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œç³»ç»Ÿ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç‰©ç†æœåŠ¡å™¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(å¤šä¸ªåº”ç”¨å…±äº«æ“ä½œç³»ç»Ÿï¼Œèµ„æºåˆ©ç”¨ç‡é«˜)
```

**ğŸ”¸ æ ¸å¿ƒä¼˜åŠ¿**
- **ç¯å¢ƒä¸€è‡´æ€§**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ç›¸åŒ
- **å¿«é€Ÿéƒ¨ç½²**ï¼šå‡ ç§’é’Ÿå°±èƒ½å¯åŠ¨ä¸€ä¸ªåº”ç”¨
- **èµ„æºæ•ˆç‡**ï¼šæ¯”è™šæ‹Ÿæœºæ›´è½»é‡ï¼Œå ç”¨èµ„æºæ›´å°‘
- **æ˜“äºæ‰©å±•**ï¼šéœ€è¦æ›´å¤šå®ä¾‹æ—¶ï¼Œå¿«é€Ÿå¤åˆ¶å¯åŠ¨

### 1.2 Kubernetesçš„ä½œç”¨


**ğŸ’¡ ç®€å•ç†è§£**
å¦‚æœè¯´Dockeræ˜¯"æ ‡å‡†åŒ–ç®±å­"ï¼Œé‚£ä¹ˆKuberneteså°±æ˜¯"æ™ºèƒ½åŒ–çš„ä»“åº“ç®¡ç†ç³»ç»Ÿ"ï¼Œè´Ÿè´£ï¼š

```
Kubernetesæ ¸å¿ƒåŠŸèƒ½ï¼š

ğŸ“¦ å®¹å™¨ç¼–æ’ï¼š
- è‡ªåŠ¨è°ƒåº¦å®¹å™¨åˆ°åˆé€‚çš„æœåŠ¡å™¨
- ç®¡ç†å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸ
- å¤„ç†å®¹å™¨æ•…éšœå’Œé‡å¯

ğŸ”„ æœåŠ¡ç®¡ç†ï¼š
- è´Ÿè½½å‡è¡¡ï¼šæµé‡è‡ªåŠ¨åˆ†å‘åˆ°å¤šä¸ªå®¹å™¨
- æœåŠ¡å‘ç°ï¼šè‡ªåŠ¨æ‰¾åˆ°å¯ç”¨çš„æœåŠ¡å®ä¾‹
- æ»šåŠ¨æ›´æ–°ï¼šæ— ä¸­æ–­å‡çº§åº”ç”¨ç‰ˆæœ¬

ğŸ“Š èµ„æºç®¡ç†ï¼š
- CPUã€å†…å­˜èµ„æºåˆ†é…å’Œé™åˆ¶
- å­˜å‚¨å·çš„æŒ‚è½½å’Œç®¡ç†
- ç½‘ç»œé…ç½®å’Œå®‰å…¨ç­–ç•¥
```

---

## 2. ğŸ› ï¸ Dockeré•œåƒæ„å»ºä¼˜åŒ–


### 2.1 é•œåƒæ„å»ºåŸºç¡€åŸç†


**ğŸ”¸ ä»€ä¹ˆæ˜¯Dockeré•œåƒ**
Dockeré•œåƒå°±åƒæ˜¯åº”ç”¨ç¨‹åºçš„"å®‰è£…åŒ…"ï¼ŒåŒ…å«äº†è¿è¡Œåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼šä»£ç ã€ä¾èµ–åº“ã€é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ç­‰ã€‚

```
é•œåƒæ„å»ºè¿‡ç¨‹ï¼š
æºä»£ç  + Dockerfile â†’ Dockeré•œåƒ â†’ å®¹å™¨å®ä¾‹

Dockerfileä½œç”¨ï¼š
ç±»ä¼¼"è£…ç®±æ¸…å•"ï¼Œå‘Šè¯‰Dockerå¦‚ä½•ä¸€æ­¥æ­¥æ„å»ºé•œåƒ
```

### 2.2 é«˜æ•ˆDockerfileç¼–å†™


**ğŸ”¸ å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–**

```dockerfile
# å¤šé˜¶æ®µæ„å»ºï¼šå‡å°æœ€ç»ˆé•œåƒå¤§å°
# ç¬¬ä¸€é˜¶æ®µï¼šæ„å»ºé˜¶æ®µ
FROM node:16-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# ç¬¬äºŒé˜¶æ®µï¼šè¿è¡Œé˜¶æ®µ
FROM node:16-alpine AS runtime
WORKDIR /app
COPY --from=builder /app/node_modules ./node_modules
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

**ğŸ”¸ å±‚ç¼“å­˜ä¼˜åŒ–ç­–ç•¥**

| ä¼˜åŒ–æŠ€å·§ | **è¯´æ˜** | **æ•ˆæœ** |
|---------|----------|----------|
| **ä¾èµ–å…ˆæ‹·è´** | `å…ˆCOPY package.jsonå†RUN npm install` | `ä¾èµ–ä¸å˜æ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜` |
| **åˆå¹¶RUNå‘½ä»¤** | `RUN cmd1 && cmd2 && cmd3` | `å‡å°‘é•œåƒå±‚æ•°ï¼Œé™ä½å¤§å°` |
| **æ¸…ç†ä¸´æ—¶æ–‡ä»¶** | `RUN install && rm -rf /tmp/*` | `é¿å…ä¸´æ—¶æ–‡ä»¶è¿›å…¥é•œåƒ` |
| **ä½¿ç”¨.dockerignore** | `æ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶` | `å‡å°‘æ„å»ºä¸Šä¸‹æ–‡å¤§å°` |

### 2.3 é•œåƒå®‰å…¨ä¸æœ€ä½³å®è·µ


**âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹**
```
ğŸ” å®‰å…¨åŸåˆ™ï¼š
â€¢ ä½¿ç”¨å®˜æ–¹åŸºç¡€é•œåƒ
â€¢ å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ
â€¢ ä¸åœ¨é•œåƒä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯
â€¢ ä½¿ç”¨érootç”¨æˆ·è¿è¡Œåº”ç”¨

ğŸ“ å¤§å°ä¼˜åŒ–ï¼š
â€¢ é€‰æ‹©alpineç­‰è½»é‡çº§åŸºç¡€é•œåƒ
â€¢ å¤šé˜¶æ®µæ„å»ºå»é™¤æ„å»ºå·¥å…·
â€¢ æ¸…ç†åŒ…ç®¡ç†å™¨ç¼“å­˜
```

---

## 3. ğŸ“‹ Kubernetesèµ„æºæ¸…å•ç®¡ç†


### 3.1 æ ¸å¿ƒèµ„æºå¯¹è±¡ç†è§£


**ğŸ”¸ ä»€ä¹ˆæ˜¯èµ„æºæ¸…å•**
èµ„æºæ¸…å•å°±åƒæ˜¯ç»™Kubernetesçš„"è¯´æ˜ä¹¦"ï¼Œå‘Šè¯‰å®ƒä½ æƒ³è¦ä»€ä¹ˆæ ·çš„åº”ç”¨ã€å¤šå°‘ä¸ªå®ä¾‹ã€å¦‚ä½•é…ç½®ç­‰ã€‚

```
å¸¸ç”¨èµ„æºå¯¹è±¡å…³ç³»ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Deployment  â”‚â”€â”€â”€â†’â”‚    Pod      â”‚
â”‚ (éƒ¨ç½²ç®¡ç†)   â”‚    â”‚ (åº”ç”¨å®ä¾‹)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service    â”‚    â”‚ ConfigMap   â”‚
â”‚ (æœåŠ¡æš´éœ²)   â”‚    â”‚ (é…ç½®ç®¡ç†)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Deploymentèµ„æºé…ç½®


**ğŸ’¡ Deploymentæ˜¯ä»€ä¹ˆ**
Deploymentå°±åƒæ˜¯åº”ç”¨çš„"ç”Ÿäº§ä¸»ç®¡"ï¼Œè´Ÿè´£ç¡®ä¿ä½ çš„åº”ç”¨å§‹ç»ˆæŒ‰é¢„æœŸè¿è¡Œï¼šæ­£ç¡®çš„ç‰ˆæœ¬ã€è¶³å¤Ÿçš„å®ä¾‹æ•°é‡ã€å¥åº·çŠ¶æ€æ£€æŸ¥ç­‰ã€‚

```yaml
# åŸºç¡€Deploymenté…ç½®
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-app
  labels:
    app: web-app
spec:
  replicas: 3  # è¿è¡Œ3ä¸ªå®ä¾‹
  selector:
    matchLabels:
      app: web-app
  template:
    metadata:
      labels:
        app: web-app
    spec:
      containers:
      - name: web
        image: nginx:1.20
        ports:
        - containerPort: 80
        resources:
          requests:  # æœ€å°èµ„æºéœ€æ±‚
            memory: "128Mi"
            cpu: "100m"
          limits:    # æœ€å¤§èµ„æºé™åˆ¶
            memory: "256Mi"
            cpu: "200m"
```

### 3.3 ServiceæœåŠ¡æš´éœ²


**ğŸ”¸ Serviceçš„ä½œç”¨**
Serviceå°±åƒæ˜¯åº”ç”¨çš„"å‰å°æ¥å¾…"ï¼Œä¸ºè®¿é—®è€…æä¾›ä¸€ä¸ªå›ºå®šçš„"é—¨ç‰Œå·"ï¼Œæ— è®ºåé¢çš„åº”ç”¨å®ä¾‹å¦‚ä½•å˜åŒ–ã€‚

```yaml
# ClusterIP Serviceï¼šé›†ç¾¤å†…éƒ¨è®¿é—®
apiVersion: v1
kind: Service
metadata:
  name: web-service
spec:
  selector:
    app: web-app
  ports:
  - port: 80        # Serviceç«¯å£
    targetPort: 80  # å®¹å™¨ç«¯å£
  type: ClusterIP   # é›†ç¾¤å†…éƒ¨è®¿é—®

---
# LoadBalancer Serviceï¼šå¤–éƒ¨è®¿é—®
apiVersion: v1
kind: Service
metadata:
  name: web-external
spec:
  selector:
    app: web-app
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer  # äº‘å‚å•†æä¾›å¤–éƒ¨IP
```

---

## 4. âš™ï¸ Helm Chartéƒ¨ç½²é…ç½®


### 4.1 HelmåŸºç¡€æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯Helm**
Helmå°±åƒæ˜¯Kubernetesçš„"åº”ç”¨å•†åº—ç®¡ç†å™¨"ã€‚å¦‚æœè¯´Kubernetesèµ„æºæ¸…å•æ˜¯"é›¶æ•£çš„é…ç½®æ–‡ä»¶"ï¼Œé‚£ä¹ˆHelm Chartå°±æ˜¯"æ‰“åŒ…å¥½çš„å®‰è£…åŒ…"ã€‚

```
Helmæ ¸å¿ƒæ¦‚å¿µï¼š

Chartï¼šåº”ç”¨ç¨‹åºåŒ…
â”œâ”€â”€ Chart.yaml     # Chartå…ƒä¿¡æ¯
â”œâ”€â”€ values.yaml    # é»˜è®¤é…ç½®å€¼
â”œâ”€â”€ templates/     # æ¨¡æ¿æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â””â”€â”€ ingress.yaml
â””â”€â”€ charts/        # ä¾èµ–çš„å­Chart
```

**ğŸ’¡ Helmçš„ä»·å€¼**
- **æ¨¡æ¿åŒ–**ï¼šä¸€å¥—é…ç½®ï¼Œå¤šç¯å¢ƒå¤ç”¨
- **ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒåº”ç”¨ç‰ˆæœ¬å›æ»š
- **ä¾èµ–ç®¡ç†**ï¼šè‡ªåŠ¨å¤„ç†ç»„ä»¶ä¾èµ–å…³ç³»
- **å‚æ•°åŒ–**ï¼šåŒä¸€ä¸ªCharté€‚é…ä¸åŒç¯å¢ƒ

### 4.2 Chartæ¨¡æ¿ç¼–å†™


**ğŸ”¸ values.yamlé…ç½®**
```yaml
# values.yaml - é…ç½®å‚æ•°æ–‡ä»¶
replicaCount: 3

image:
  repository: nginx
  tag: "1.20"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  host: example.com

resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
```

**ğŸ”¸ æ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹**
```yaml
# templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "myapp.fullname" . }}
spec:
  replicas: {{ .Values.replicaCount }}
  template:
    spec:
      containers:
      - name: {{ .Chart.Name }}
        image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
        resources:
          {{- toYaml .Values.resources | nindent 12 }}
```

### 4.3 Helméƒ¨ç½²å‘½ä»¤


**ğŸ”¸ å¸¸ç”¨éƒ¨ç½²æ“ä½œ**
```bash
# å®‰è£…Chart
helm install my-app ./my-chart

# æŒ‡å®šå€¼æ–‡ä»¶å®‰è£…
helm install my-app ./my-chart -f production-values.yaml

# å‡çº§åº”ç”¨
helm upgrade my-app ./my-chart

# å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
helm rollback my-app 1

# æŸ¥çœ‹å‘å¸ƒå†å²
helm history my-app
```

---

## 5. ğŸ—ï¸ å‘½åç©ºé—´ç¯å¢ƒéš”ç¦»


### 5.1 å‘½åç©ºé—´æ¦‚å¿µ


**ğŸ”¸ ä»€ä¹ˆæ˜¯å‘½åç©ºé—´**
å‘½åç©ºé—´å°±åƒæ˜¯å¤§æ¥¼é‡Œçš„"ä¸åŒæ¥¼å±‚"ï¼Œæ¯å±‚éƒ½æ˜¯ç‹¬ç«‹çš„ç©ºé—´ï¼Œå„å±‚ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä½†å…±äº«åŸºç¡€è®¾æ–½ã€‚

```
å‘½åç©ºé—´éš”ç¦»ç¤ºä¾‹ï¼š

Kubernetesé›†ç¾¤
â”œâ”€â”€ default        # é»˜è®¤å‘½åç©ºé—´
â”œâ”€â”€ dev           # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ test          # æµ‹è¯•ç¯å¢ƒ
â”œâ”€â”€ prod          # ç”Ÿäº§ç¯å¢ƒ
â””â”€â”€ kube-system   # ç³»ç»Ÿç»„ä»¶

æ¯ä¸ªå‘½åç©ºé—´å†…ï¼š
â€¢ ç‹¬ç«‹çš„åº”ç”¨å®ä¾‹
â€¢ ç‹¬ç«‹çš„é…ç½®å’Œå¯†é’¥
â€¢ ç‹¬ç«‹çš„èµ„æºé…é¢
â€¢ ç‹¬ç«‹çš„ç½‘ç»œç­–ç•¥
```

### 5.2 ç¯å¢ƒéš”ç¦»ç­–ç•¥


**ğŸ’¡ å¤šç¯å¢ƒç®¡ç†**

| ç¯å¢ƒç±»å‹ | **å‘½åç©ºé—´** | **èµ„æºé…é¢** | **è®¿é—®æ§åˆ¶** |
|---------|-------------|-------------|-------------|
| **å¼€å‘ç¯å¢ƒ** | `dev` | `CPU: 2æ ¸, å†…å­˜: 4GB` | `å¼€å‘å›¢é˜Ÿå¯è¯»å†™` |
| **æµ‹è¯•ç¯å¢ƒ** | `test` | `CPU: 4æ ¸, å†…å­˜: 8GB` | `QAå›¢é˜Ÿå¯è¯»å†™` |
| **ç”Ÿäº§ç¯å¢ƒ** | `prod` | `CPU: 8æ ¸, å†…å­˜: 16GB` | `è¿ç»´å›¢é˜Ÿå¯è¯»å†™` |

**ğŸ”¸ å‘½åç©ºé—´åˆ›å»ºå’Œé…ç½®**
```yaml
# namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: dev
  labels:
    environment: development

---
# èµ„æºé…é¢é™åˆ¶
apiVersion: v1
kind: ResourceQuota
metadata:
  name: dev-quota
  namespace: dev
spec:
  hard:
    requests.cpu: "2"
    requests.memory: 4Gi
    limits.cpu: "4"
    limits.memory: 8Gi
    pods: "10"
```

### 5.3 ç½‘ç»œéš”ç¦»ç­–ç•¥


**ğŸ” NetworkPolicyé…ç½®**
```yaml
# ç½‘ç»œç­–ç•¥ï¼šåªå…è®¸åŒå‘½åç©ºé—´å†…é€šä¿¡
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: deny-all-except-same-ns
  namespace: dev
spec:
  podSelector: {}  # åº”ç”¨åˆ°å‘½åç©ºé—´å†…æ‰€æœ‰Pod
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: dev  # åªå…è®¸åŒå‘½åç©ºé—´è®¿é—®
```

---

## 6. âš™ï¸ ConfigMap/Secreté…ç½®ç®¡ç†


### 6.1 é…ç½®ç®¡ç†åŸºç¡€


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ç®¡ç†**
åœ¨ä¸åŒç¯å¢ƒä¸­ï¼Œåº”ç”¨éœ€è¦ä¸åŒçš„é…ç½®ï¼ˆæ•°æ®åº“åœ°å€ã€APIå¯†é’¥ç­‰ï¼‰ã€‚ConfigMapå’ŒSecretè®©ä½ æŠŠé…ç½®ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå°±åƒæŠŠ"è®¾ç½®"å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚

```
é…ç½®ç®¡ç†å¯¹æ¯”ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼š
åº”ç”¨ä»£ç  + ç¡¬ç¼–ç é…ç½® â†’ éƒ¨ç½²
(é…ç½®å˜æ›´éœ€è¦é‡æ–°æ„å»ºé•œåƒ)

Kubernetesæ–¹å¼ï¼š
åº”ç”¨ä»£ç  + ConfigMap/Secret â†’ éƒ¨ç½²
(é…ç½®å˜æ›´æ— éœ€é‡æ–°æ„å»ºé•œåƒ)
```

### 6.2 ConfigMapä½¿ç”¨


**ğŸ’¡ ConfigMapé€‚ç”¨åœºæ™¯**
ConfigMapå­˜å‚¨**éæ•æ„Ÿ**é…ç½®ä¿¡æ¯ï¼Œå¦‚åº”ç”¨é…ç½®ã€ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ç­‰ã€‚

```yaml
# configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: dev
data:
  # é”®å€¼å¯¹é…ç½®
  database.host: "dev-db.example.com"
  database.port: "3306"
  log.level: "debug"
  
  # é…ç½®æ–‡ä»¶
  app.properties: |
    server.port=8080
    spring.profiles.active=dev
    logging.level.root=INFO
```

**ğŸ”¸ åœ¨Podä¸­ä½¿ç”¨ConfigMap**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: myapp:latest
    
    # æ–¹å¼1ï¼šä½œä¸ºç¯å¢ƒå˜é‡
    env:
    - name: DB_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database.host
    
    # æ–¹å¼2ï¼šä½œä¸ºæ–‡ä»¶æŒ‚è½½
    volumeMounts:
    - name: config-volume
      mountPath: /etc/config
  
  volumes:
  - name: config-volume
    configMap:
      name: app-config
```

### 6.3 Secretå®‰å…¨ç®¡ç†


**ğŸ” Secreté€‚ç”¨åœºæ™¯**
Secretå­˜å‚¨**æ•æ„Ÿä¿¡æ¯**ï¼Œå¦‚å¯†ç ã€APIå¯†é’¥ã€TLSè¯ä¹¦ç­‰ï¼Œå†…å®¹ä¼šè¿›è¡ŒBase64ç¼–ç ã€‚

```yaml
# secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: dev
type: Opaque
data:
  # Base64ç¼–ç çš„æ•æ„Ÿæ•°æ®
  database.password: cGFzc3dvcmQxMjM=  # password123
  api.key: YWJjZGVmZ2hpams=            # abcdefghijk

---
# TLSè¯ä¹¦Secret
apiVersion: v1
kind: Secret
metadata:
  name: tls-secret
type: kubernetes.io/tls
data:
  tls.crt: <base64-encoded-cert>
  tls.key: <base64-encoded-key>
```

**âš ï¸ Secretå®‰å…¨æ³¨æ„äº‹é¡¹**
```
ğŸ” æœ€ä½³å®è·µï¼š
â€¢ ä½¿ç”¨RBACé™åˆ¶Secretè®¿é—®æƒé™
â€¢ å¯ç”¨etcdåŠ å¯†å­˜å‚¨
â€¢ å®šæœŸè½®æ¢æ•æ„Ÿä¿¡æ¯
â€¢ é¿å…åœ¨æ—¥å¿—ä¸­æ‰“å°Secretå†…å®¹
â€¢ ä½¿ç”¨å¤–éƒ¨å¯†é’¥ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚Vaultï¼‰
```

---

## 7. ğŸŒ æœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡


### 7.1 æœåŠ¡å‘ç°æœºåˆ¶


**ğŸ”¸ ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°**
æœåŠ¡å‘ç°å°±åƒ"ç”µè¯ç°¿"ï¼Œå½“ä¸€ä¸ªæœåŠ¡æƒ³è¦è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡æ—¶ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„IPåœ°å€ï¼Œåªéœ€è¦çŸ¥é“æœåŠ¡åç§°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰¾åˆ°å¯ç”¨çš„å®ä¾‹ã€‚

```
æœåŠ¡å‘ç°æµç¨‹ï¼š

åº”ç”¨Aæƒ³è°ƒç”¨åº”ç”¨Bï¼š
åº”ç”¨A â†’ "æˆ‘è¦è°ƒç”¨user-service" 
      â†“
Kubernetes DNS â†’ æŸ¥æ‰¾user-serviceçš„å¯ç”¨å®ä¾‹
      â†“
è¿”å›ï¼š10.1.2.3:8080, 10.1.2.4:8080, 10.1.2.5:8080
      â†“
åº”ç”¨A â†’ é€‰æ‹©ä¸€ä¸ªå®ä¾‹è¿›è¡Œè°ƒç”¨
```

### 7.2 Serviceç±»å‹è¯¦è§£


**ğŸ”¸ ä¸åŒServiceç±»å‹çš„ç”¨é€”**

| Serviceç±»å‹ | **ç”¨é€”** | **è®¿é—®èŒƒå›´** | **å®é™…åº”ç”¨åœºæ™¯** |
|------------|----------|-------------|----------------|
| **ClusterIP** | `é›†ç¾¤å†…éƒ¨é€šä¿¡` | `é›†ç¾¤å†…éƒ¨` | `å¾®æœåŠ¡é—´è°ƒç”¨ã€æ•°æ®åº“è®¿é—®` |
| **NodePort** | `èŠ‚ç‚¹ç«¯å£æš´éœ²` | `é›†ç¾¤å¤–éƒ¨` | `å¼€å‘æµ‹è¯•ã€ç®€å•å¤–éƒ¨è®¿é—®` |
| **LoadBalancer** | `äº‘å‚å•†è´Ÿè½½å‡è¡¡` | `äº’è”ç½‘` | `ç”Ÿäº§ç¯å¢ƒWebæœåŠ¡` |
| **ExternalName** | `å¤–éƒ¨æœåŠ¡æ˜ å°„` | `é›†ç¾¤å†…éƒ¨` | `è®¿é—®å¤–éƒ¨æ•°æ®åº“ã€ç¬¬ä¸‰æ–¹API` |

**ğŸ”¸ è´Ÿè½½å‡è¡¡ç®—æ³•**
```yaml
apiVersion: v1
kind: Service
metadata:
  name: web-service
  annotations:
    # ä¼šè¯ä¿æŒï¼ˆç²˜æ€§ä¼šè¯ï¼‰
    service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
    service.beta.kubernetes.io/aws-load-balancer-sticky-sessions: "true"
spec:
  selector:
    app: web-app
  ports:
  - port: 80
    targetPort: 8080
  type: LoadBalancer
  sessionAffinity: ClientIP  # åŸºäºå®¢æˆ·ç«¯IPçš„ä¼šè¯ä¿æŒ
```

### 7.3 Ingressé«˜çº§è·¯ç”±


**ğŸ”¸ ä»€ä¹ˆæ˜¯Ingress**
Ingresså°±åƒæ˜¯"æ™ºèƒ½é—¨å«"ï¼Œæ ¹æ®è®¿é—®çš„åŸŸåå’Œè·¯å¾„ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡ã€‚

```
Ingressè·¯ç”±ç¤ºä¾‹ï¼š

å¤–éƒ¨è®¿é—®ï¼š
â”œâ”€â”€ api.example.com/users    â†’ user-service
â”œâ”€â”€ api.example.com/orders   â†’ order-service
â”œâ”€â”€ web.example.com/         â†’ frontend-service
â””â”€â”€ admin.example.com/       â†’ admin-service

ä¸€ä¸ªIngressç®¡ç†å¤šä¸ªåŸŸåå’Œè·¯å¾„
```

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
spec:
  tls:
  - hosts:
    - api.example.com
    secretName: api-tls-secret
  
  rules:
  - host: api.example.com
    http:
      paths:
      - path: /users
        pathType: Prefix
        backend:
          service:
            name: user-service
            port:
              number: 80
      - path: /orders
        pathType: Prefix
        backend:
          service:
            name: order-service
            port:
              number: 80
```

---

## 8. ğŸ’¾ æŒä¹…åŒ–å­˜å‚¨ç®¡ç†


### 8.1 å­˜å‚¨åŸºç¡€æ¦‚å¿µ


**ğŸ”¸ ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–å­˜å‚¨**
å®¹å™¨é»˜è®¤æ˜¯"æ— çŠ¶æ€"çš„ï¼Œå°±åƒé…’åº—æˆ¿é—´ï¼Œå®¢äººé€€æˆ¿åæ‰€æœ‰ä¸ªäººç‰©å“éƒ½ä¼šæ¸…ç©ºã€‚ä½†æœ‰äº›åº”ç”¨éœ€è¦ä¿å­˜æ•°æ®ï¼ˆå¦‚æ•°æ®åº“ï¼‰ï¼Œè¿™æ—¶å°±éœ€è¦"æ°¸ä¹…çš„å‚¨ç‰©æŸœ"ã€‚

```
å­˜å‚¨ç±»å‹å¯¹æ¯”ï¼š

å®¹å™¨å­˜å‚¨ï¼ˆä¸´æ—¶ï¼‰ï¼š
å®¹å™¨å¯åŠ¨ â†’ å†™å…¥æ•°æ® â†’ å®¹å™¨åˆ é™¤ â†’ æ•°æ®ä¸¢å¤±

æŒä¹…åŒ–å­˜å‚¨ï¼ˆæ°¸ä¹…ï¼‰ï¼š
å®¹å™¨å¯åŠ¨ â†’ æŒ‚è½½å­˜å‚¨å· â†’ å†™å…¥æ•°æ® â†’ å®¹å™¨åˆ é™¤ â†’ æ•°æ®ä¿ç•™
```

### 8.2 Volumeç±»å‹è¯¦è§£


**ğŸ’¡ å¸¸ç”¨Volumeç±»å‹**

| Volumeç±»å‹ | **æ•°æ®æŒä¹…æ€§** | **ä½¿ç”¨åœºæ™¯** | **ç‰¹ç‚¹** |
|-----------|---------------|-------------|----------|
| **emptyDir** | `å®¹å™¨ç”Ÿå‘½å‘¨æœŸ` | `ä¸´æ—¶æ•°æ®ã€ç¼“å­˜` | `Podåˆ é™¤æ•°æ®ä¸¢å¤±` |
| **hostPath** | `èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸ` | `èŠ‚ç‚¹æ—¥å¿—ã€é…ç½®` | `ç»‘å®šç‰¹å®šèŠ‚ç‚¹` |
| **PVC** | `é›†ç¾¤çº§æŒä¹…åŒ–` | `æ•°æ®åº“ã€æ–‡ä»¶å­˜å‚¨` | `å¯è·¨èŠ‚ç‚¹ã€é«˜å¯ç”¨` |
| **configMap** | `é…ç½®ç”Ÿå‘½å‘¨æœŸ` | `é…ç½®æ–‡ä»¶æŒ‚è½½` | `åªè¯»é…ç½®æ•°æ®` |

### 8.3 PV/PVCå­˜å‚¨æ¨¡å‹


**ğŸ”¸ PV/PVCå·¥ä½œåŸç†**
```
å­˜å‚¨ç®¡ç†ä¸‰å±‚æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Podåº”ç”¨     â”‚ â†â†’ â”‚ PVCå­˜å‚¨ç”³è¯·  â”‚ â†â†’ â”‚ PVå­˜å‚¨èµ„æº   â”‚
â”‚ (å­˜å‚¨æ¶ˆè´¹è€…) â”‚    â”‚ (å­˜å‚¨éœ€æ±‚)   â”‚    â”‚ (å­˜å‚¨æä¾›è€…) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†•
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ ç‰©ç†å­˜å‚¨    â”‚
                                    â”‚ (ç£ç›˜/NFS)  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”¸ PVCé…ç½®ç¤ºä¾‹**
```yaml
# PersistentVolumeClaim
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: database-pvc
spec:
  accessModes:
    - ReadWriteOnce  # å•èŠ‚ç‚¹è¯»å†™
  resources:
    requests:
      storage: 10Gi  # ç”³è¯·10GBå­˜å‚¨
  storageClassName: ssd  # æŒ‡å®šå­˜å‚¨ç±»å‹

---
# åœ¨Podä¸­ä½¿ç”¨PVC
apiVersion: v1
kind: Pod
metadata:
  name: database-pod
spec:
  containers:
  - name: mysql
    image: mysql:8.0
    volumeMounts:
    - name: mysql-data
      mountPath: /var/lib/mysql
    env:
    - name: MYSQL_ROOT_PASSWORD
      value: "password123"
  
  volumes:
  - name: mysql-data
    persistentVolumeClaim:
      claimName: database-pvc
```

### 8.4 StorageClassåŠ¨æ€ä¾›åº”


**âš¡ åŠ¨æ€å­˜å‚¨ä¾›åº”**
StorageClasså°±åƒ"è‡ªåŠ¨å”®è´§æœº"ï¼Œå½“åº”ç”¨éœ€è¦å­˜å‚¨æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºåˆé€‚çš„å­˜å‚¨å·ã€‚

```yaml
# StorageClasså®šä¹‰
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast-ssd
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
  fsType: ext4
allowVolumeExpansion: true  # å…è®¸æ‰©å®¹
reclaimPolicy: Delete       # PVCåˆ é™¤æ—¶è‡ªåŠ¨åˆ é™¤PV
```

---

## 9. ğŸ“Š é›†ç¾¤èµ„æºç›‘æ§


### 9.1 ç›‘æ§ä½“ç³»æ¶æ„


**ğŸ”¸ Kubernetesç›‘æ§å…¨æ™¯**
```
ç›‘æ§å±‚æ¬¡æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯è§†åŒ–å±‚ï¼šGrafanaä»ªè¡¨ç›˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å­˜å‚¨å±‚ï¼šPrometheusæ—¶åºæ•°æ®åº“             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é‡‡é›†å±‚ï¼š                                â”‚
â”‚ â”œâ”€â”€ Node Exporter (èŠ‚ç‚¹æŒ‡æ ‡)           â”‚
â”‚ â”œâ”€â”€ cAdvisor (å®¹å™¨æŒ‡æ ‡)                â”‚
â”‚ â”œâ”€â”€ Kube State Metrics (K8så¯¹è±¡æŒ‡æ ‡)   â”‚
â”‚ â””â”€â”€ åº”ç”¨è‡ªå®šä¹‰æŒ‡æ ‡                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é›†ç¾¤å±‚ï¼šKubernetesé›†ç¾¤                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 æ ¸å¿ƒç›‘æ§æŒ‡æ ‡


**ğŸ“ˆ å¿…é¡»ç›‘æ§çš„æŒ‡æ ‡**

**ğŸ”¸ èŠ‚ç‚¹çº§åˆ«ç›‘æ§**
```
ğŸ–¥ï¸ ç¡¬ä»¶èµ„æºï¼š
â€¢ CPUä½¿ç”¨ç‡ï¼š80%ä»¥ä¸‹æ­£å¸¸
â€¢ å†…å­˜ä½¿ç”¨ç‡ï¼š85%ä»¥ä¸‹æ­£å¸¸  
â€¢ ç£ç›˜ä½¿ç”¨ç‡ï¼š90%ä»¥ä¸‹æ­£å¸¸
â€¢ ç½‘ç»œIOï¼šå¸¦å®½ä½¿ç”¨æƒ…å†µ

âš™ï¸ ç³»ç»ŸçŠ¶æ€ï¼š
â€¢ èŠ‚ç‚¹çŠ¶æ€ï¼šReady/NotReady
â€¢ ç³»ç»Ÿè´Ÿè½½ï¼šLoad Average
â€¢ æ–‡ä»¶å¥æŸ„ï¼šæ‰“å¼€æ–‡ä»¶æ•°é‡
```

**ğŸ”¸ Podçº§åˆ«ç›‘æ§**
```
ğŸ“¦ å®¹å™¨çŠ¶æ€ï¼š
â€¢ Podè¿è¡ŒçŠ¶æ€ï¼šRunning/Pending/Failed
â€¢ é‡å¯æ¬¡æ•°ï¼šå¼‚å¸¸é‡å¯ç›‘æ§
â€¢ èµ„æºä½¿ç”¨ï¼šCPU/å†…å­˜å®é™…æ¶ˆè€—
â€¢ å­˜å‚¨ä½¿ç”¨ï¼šæŒ‚è½½å·ä½¿ç”¨æƒ…å†µ

ğŸ”„ åº”ç”¨æŒ‡æ ‡ï¼š
â€¢ HTTPè¯·æ±‚å»¶è¿Ÿ
â€¢ é”™è¯¯ç‡ç»Ÿè®¡
â€¢ ä¸šåŠ¡æŒ‡æ ‡ï¼šç”¨æˆ·é‡ã€è®¢å•é‡ç­‰
```

### 9.3 å‘Šè­¦é…ç½®ç­–ç•¥


**ğŸš¨ å‘Šè­¦è§„åˆ™é…ç½®**
```yaml
# PrometheusRuleå‘Šè­¦è§„åˆ™
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: kubernetes-alerts
spec:
  groups:
  - name: kubernetes.rules
    rules:
    
    # èŠ‚ç‚¹CPUä½¿ç”¨ç‡å‘Šè­¦
    - alert: NodeCPUUsage
      expr: 100 - (avg(irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 85
      for: 5m
      labels:
        severity: warning
      annotations:
        summary: "èŠ‚ç‚¹CPUä½¿ç”¨ç‡è¿‡é«˜"
        description: "èŠ‚ç‚¹ {{ $labels.instance }} CPUä½¿ç”¨ç‡ {{ $value }}% è¶…è¿‡85%"
    
    # Podé‡å¯å‘Šè­¦
    - alert: PodRestartHigh
      expr: increase(kube_pod_container_status_restarts_total[1h]) > 3
      for: 0m
      labels:
        severity: critical
      annotations:
        summary: "Podé¢‘ç¹é‡å¯"
        description: "Pod {{ $labels.pod }} åœ¨1å°æ—¶å†…é‡å¯ {{ $value }} æ¬¡"
```

**ğŸ“± å‘Šè­¦é€šçŸ¥é…ç½®**
```
å‘Šè­¦ç­‰çº§åˆ†ç±»ï¼š

ğŸ”´ Critical (ä¸¥é‡)ï¼š
â€¢ æœåŠ¡å®Œå…¨ä¸å¯ç”¨
â€¢ æ•°æ®ä¸¢å¤±é£é™©
â€¢ ç«‹å³é€šçŸ¥ï¼šç”µè¯ + çŸ­ä¿¡ + é‚®ä»¶

ğŸŸ¡ Warning (è­¦å‘Š)ï¼š
â€¢ æ€§èƒ½ä¸‹é™
â€¢ èµ„æºä½¿ç”¨è¿‡é«˜
â€¢ å»¶è¿Ÿé€šçŸ¥ï¼šé‚®ä»¶ + é’‰é’‰

ğŸ”µ Info (ä¿¡æ¯)ï¼š
â€¢ é…ç½®å˜æ›´
â€¢ ç‰ˆæœ¬å‡çº§
â€¢ è®°å½•é€šçŸ¥ï¼šä»…æ—¥å¿—è®°å½•
```

### 9.4 æ€§èƒ½è°ƒä¼˜æŒ‡æ ‡


**âš¡ å…³é”®æ€§èƒ½æŒ‡æ ‡**
```
ğŸ¯ åº”ç”¨æ€§èƒ½ï¼š
â€¢ å“åº”æ—¶é—´ï¼šP95 < 200ms
â€¢ ååé‡ï¼šQPSæ”¯æ’‘èƒ½åŠ›
â€¢ é”™è¯¯ç‡ï¼š< 1%

ğŸ—ï¸ é›†ç¾¤æ€§èƒ½ï¼š
â€¢ è°ƒåº¦å»¶è¿Ÿï¼šPodå¯åŠ¨æ—¶é—´
â€¢ API Serverå»¶è¿Ÿï¼š< 100ms
â€¢ etcdæ€§èƒ½ï¼šå†™å…¥å»¶è¿Ÿ < 10ms

ğŸ’¾ èµ„æºæ•ˆç‡ï¼š
â€¢ èµ„æºåˆ©ç”¨ç‡ï¼šCPU 60-80%
â€¢ å†…å­˜ç¢ç‰‡ï¼šé¿å…OOM
â€¢ ç½‘ç»œå¸¦å®½ï¼šé¿å…ç“¶é¢ˆ
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ å®¹å™¨åŒ–éƒ¨ç½²ï¼šåº”ç”¨æ‰“åŒ…æˆæ ‡å‡†åŒ–é•œåƒï¼Œæé«˜éƒ¨ç½²æ•ˆç‡
ğŸ”¸ Kubernetesç¼–æ’ï¼šè‡ªåŠ¨åŒ–ç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸå’Œèµ„æºè°ƒåº¦  
ğŸ”¸ èµ„æºæ¸…å•ï¼šå£°æ˜å¼é…ç½®ï¼Œå®šä¹‰åº”ç”¨æœŸæœ›çŠ¶æ€
ğŸ”¸ HelmåŒ…ç®¡ç†ï¼šæ¨¡æ¿åŒ–éƒ¨ç½²ï¼Œæ”¯æŒç‰ˆæœ¬ç®¡ç†å’Œå‚æ•°åŒ–é…ç½®
ğŸ”¸ ç¯å¢ƒéš”ç¦»ï¼šé€šè¿‡å‘½åç©ºé—´å®ç°å¤šç¯å¢ƒç‹¬ç«‹ç®¡ç†
ğŸ”¸ é…ç½®åˆ†ç¦»ï¼šConfigMap/Secretå°†é…ç½®ä»ä»£ç ä¸­è§£è€¦
ğŸ”¸ æœåŠ¡å‘ç°ï¼šè‡ªåŠ¨åŒ–çš„æœåŠ¡æ³¨å†Œä¸è´Ÿè½½å‡è¡¡
ğŸ”¸ æŒä¹…åŒ–å­˜å‚¨ï¼šStatefulSetåº”ç”¨çš„æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ
ğŸ”¸ ç›‘æ§å‘Šè­¦ï¼šå…¨é¢çš„é›†ç¾¤å’Œåº”ç”¨æ€§èƒ½ç›‘æ§ä½“ç³»
```

### 10.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ å®¹å™¨åŒ–çš„æ ¸å¿ƒä»·å€¼**
```
ç¯å¢ƒä¸€è‡´æ€§ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§å®Œå…¨ç›¸åŒçš„è¿è¡Œç¯å¢ƒ
å¿«é€Ÿéƒ¨ç½²ï¼šç§’çº§å¯åŠ¨ï¼Œå¼¹æ€§æ‰©ç¼©å®¹
èµ„æºæ•ˆç‡ï¼šæ¯”è™šæ‹Ÿæœºæ›´è½»é‡ï¼Œèµ„æºåˆ©ç”¨ç‡æ›´é«˜
DevOpsåä½œï¼šå¼€å‘å’Œè¿ç»´ä½¿ç”¨ç»Ÿä¸€çš„éƒ¨ç½²æ ‡å‡†
```

**ğŸ”¹ Kubernetesçš„è®¾è®¡å“²å­¦**
```
å£°æ˜å¼APIï¼šæè¿°æœŸæœ›çŠ¶æ€ï¼Œç³»ç»Ÿè‡ªåŠ¨è¾¾æˆ
æ§åˆ¶å™¨æ¨¡å¼ï¼šæŒç»­ç›‘æ§å¹¶ä¿®æ­£åå·®
æ ‡ç­¾é€‰æ‹©å™¨ï¼šçµæ´»çš„èµ„æºå…³è”å’Œç®¡ç†
å¾®æœåŠ¡å‹å¥½ï¼šåŸç”Ÿæ”¯æŒåˆ†å¸ƒå¼åº”ç”¨æ¶æ„
```

**ğŸ”¹ é…ç½®ç®¡ç†æœ€ä½³å®è·µ**
```
é…ç½®å¤–ç½®ï¼šé¿å…é…ç½®ç¡¬ç¼–ç åœ¨é•œåƒä¸­
ç¯å¢ƒå·®å¼‚ï¼šé€šè¿‡ä¸åŒConfigMapé€‚é…å¤šç¯å¢ƒ
æ•æ„Ÿä¿¡æ¯ï¼šä½¿ç”¨SecretåŠ å¯†å­˜å‚¨
ç‰ˆæœ¬ç®¡ç†ï¼šé…ç½®å˜æ›´å¯è¿½æº¯å’Œå›æ»š
```

### 10.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ CI/CDæµæ°´çº¿é›†æˆ**
- **æ„å»ºé˜¶æ®µ**ï¼šè‡ªåŠ¨åŒ–Dockeré•œåƒæ„å»ºå’Œæ¨é€
- **æµ‹è¯•é˜¶æ®µ**ï¼šåœ¨ç‹¬ç«‹å‘½åç©ºé—´è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•
- **éƒ¨ç½²é˜¶æ®µ**ï¼šä½¿ç”¨Helm Chartå®ç°å¤šç¯å¢ƒéƒ¨ç½²
- **ç›‘æ§é˜¶æ®µ**ï¼šé›†æˆPrometheusè¿›è¡Œåº”ç”¨ç›‘æ§

**ğŸš€ ç”Ÿäº§ç¯å¢ƒè¿ç»´**
- **é«˜å¯ç”¨éƒ¨ç½²**ï¼šå¤šå‰¯æœ¬ã€è·¨èŠ‚ç‚¹ã€å¥åº·æ£€æŸ¥
- **å¼¹æ€§æ‰©ç¼©å®¹**ï¼šåŸºäºCPU/å†…å­˜ä½¿ç”¨ç‡è‡ªåŠ¨è°ƒæ•´
- **æ»šåŠ¨æ›´æ–°**ï¼šé›¶åœæœºå‡çº§ï¼Œå¿«é€Ÿå›æ»š
- **æ•…éšœè‡ªæ„ˆ**ï¼šè‡ªåŠ¨é‡å¯å¤±è´¥çš„Podå’ŒæœåŠ¡

**ğŸ’¡ å¼€å‘æ•ˆç‡æå‡**
- **ç¯å¢ƒä¸€è‡´æ€§**ï¼šæ¶ˆé™¤"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"çš„é—®é¢˜
- **å¿«é€Ÿéƒ¨ç½²**ï¼šä»ä»£ç æäº¤åˆ°ä¸Šçº¿åªéœ€å‡ åˆ†é’Ÿ
- **èµ„æºéš”ç¦»**ï¼šå¤šä¸ªå¼€å‘ç¯å¢ƒäº’ä¸å½±å“
- **é…ç½®ç®¡ç†**ï¼šç»Ÿä¸€çš„é…ç½®ä¸­å¿ƒç®¡ç†

### 10.4 å­¦ä¹ è·¯å¾„å»ºè®®


**ğŸ”¹ åŸºç¡€é˜¶æ®µ**
```
DockeråŸºç¡€ â†’ Kubernetesæ ¸å¿ƒæ¦‚å¿µ â†’ kubectlå‘½ä»¤ â†’ åŸºæœ¬èµ„æºå¯¹è±¡
é‡ç‚¹æŒæ¡ï¼šPodã€Serviceã€Deploymentçš„åŸºæœ¬ä½¿ç”¨
```

**ğŸ”¹ è¿›é˜¶é˜¶æ®µ**
```
HelmåŒ…ç®¡ç† â†’ ConfigMap/Secret â†’ Ingress â†’ PV/PVCå­˜å‚¨
é‡ç‚¹æŒæ¡ï¼šå¤æ‚åº”ç”¨çš„éƒ¨ç½²å’Œé…ç½®ç®¡ç†
```

**ğŸ”¹ é«˜çº§é˜¶æ®µ**
```
ç›‘æ§å‘Šè­¦ â†’ ç½‘ç»œç­–ç•¥ â†’ RBACæƒé™ â†’ CRDæ‰©å±•
é‡ç‚¹æŒæ¡ï¼šç”Ÿäº§ç¯å¢ƒçš„è¿ç»´å’Œæ‰©å±•å¼€å‘
```

> **ğŸ’¡ æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
> - å®¹å™¨æ‰“åŒ…åº”ç”¨èµ°ï¼ŒK8sç¼–æ’ä¸ç”¨æ„
> - èµ„æºæ¸…å•å£°æ˜å¼ï¼ŒHelmæ¨¡æ¿å¥½ç®¡ç†  
> - å‘½åç©ºé—´éš”ç¯å¢ƒï¼Œé…ç½®åˆ†ç¦»æ›´æ¸…æ™°
> - æœåŠ¡å‘ç°è‡ªåŠ¨åŒ–ï¼Œå­˜å‚¨æŒä¹…ä¿æ•°æ®
> - ç›‘æ§å‘Šè­¦å…¨è¦†ç›–ï¼Œè¿ç»´è‡ªåŠ¨åŒ–ç¥å™¨

**ğŸ¯ å®è·µå»ºè®®**ï¼š
- æ­å»ºæœ¬åœ°K8sç¯å¢ƒï¼ˆminikube/kindï¼‰
- ç»ƒä¹ éƒ¨ç½²å¸¸è§åº”ç”¨ï¼ˆnginxã€mysqlã€redisï¼‰
- å­¦ä¹ ç¼–å†™Dockerfileå’ŒHelm Chart
- ä½“éªŒå®Œæ•´çš„CI/CDæµæ°´çº¿
- å…³æ³¨äº‘åŸç”Ÿç¤¾åŒºæœ€æ–°å‘å±•è¶‹åŠ¿