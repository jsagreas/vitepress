---
title: 4ã€Jenkinsè‡ªåŠ¨åŒ–å¹³å°æ·±å…¥
---
## ğŸ“š ç›®å½•

1. [JenkinsåŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒä»·å€¼](#1-JenkinsåŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒä»·å€¼)
2. [Jenkinså®‰è£…é…ç½®è¯¦è§£](#2-Jenkinså®‰è£…é…ç½®è¯¦è§£)
3. [æ’ä»¶ç®¡ç†ä¸ç”Ÿæ€ç³»ç»Ÿ](#3-æ’ä»¶ç®¡ç†ä¸ç”Ÿæ€ç³»ç»Ÿ)
4. [Jenkinsfile Pipelineæ ¸å¿ƒæŠ€æœ¯](#4-Jenkinsfile-Pipelineæ ¸å¿ƒæŠ€æœ¯)
5. [å¤šåˆ†æ”¯æµæ°´çº¿é…ç½®å®æˆ˜](#5-å¤šåˆ†æ”¯æµæ°´çº¿é…ç½®å®æˆ˜)
6. [åˆ†å¸ƒå¼æ„å»ºæ¶æ„è®¾è®¡](#6-åˆ†å¸ƒå¼æ„å»ºæ¶æ„è®¾è®¡)
7. [æ„å»ºèŠ‚ç‚¹ç®¡ç†ä¸æ‰©å±•ç­–ç•¥](#7-æ„å»ºèŠ‚ç‚¹ç®¡ç†ä¸æ‰©å±•ç­–ç•¥)
8. [Jenkinså®‰å…¨é…ç½®è¦ç‚¹](#8-Jenkinså®‰å…¨é…ç½®è¦ç‚¹)
9. [æ„å»ºå†å²ä¸æ—¥å¿—ç®¡ç†](#9-æ„å»ºå†å²ä¸æ—¥å¿—ç®¡ç†)
10. [Jenkinså·¥å…·é›†æˆç”Ÿæ€](#10-Jenkinså·¥å…·é›†æˆç”Ÿæ€)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸš€ JenkinsåŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒä»·å€¼


### 1.1 ä»€ä¹ˆæ˜¯Jenkins

**Jenkinsç®€å•ç†è§£**ï¼šæŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª**24å°æ—¶ä¸ä¼‘æ¯çš„ç¨‹åºå‘˜åŠ©æ‰‹**ï¼Œä¸“é—¨è´Ÿè´£é‡å¤æ€§çš„æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²å·¥ä½œã€‚

```
ä¼ ç»Ÿå¼€å‘æµç¨‹çš„ç—›ç‚¹ï¼š
å¼€å‘è€… â†’ æ‰‹åŠ¨ç¼–è¯‘ â†’ æ‰‹åŠ¨æµ‹è¯• â†’ æ‰‹åŠ¨éƒ¨ç½² â†’ å‘ç°é—®é¢˜ â†’ é‡å¤æµç¨‹
é—®é¢˜ï¼šæ•ˆç‡ä½ã€å®¹æ˜“å‡ºé”™ã€æµªè´¹æ—¶é—´

Jenkinsè‡ªåŠ¨åŒ–æµç¨‹ï¼š
ä»£ç æäº¤ â†’ è‡ªåŠ¨æ„å»º â†’ è‡ªåŠ¨æµ‹è¯• â†’ è‡ªåŠ¨éƒ¨ç½² â†’ è‡ªåŠ¨é€šçŸ¥ç»“æœ
ä¼˜åŠ¿ï¼šé«˜æ•ˆã€å¯é ã€è§£æ”¾äººåŠ›
```

**ğŸ”¥ Jenkinsæ ¸å¿ƒä»·å€¼**ï¼š
- **è‡ªåŠ¨åŒ–æ‰§è¡Œ**ï¼šä»£æ›¿äººå·¥è¿›è¡Œé‡å¤æ€§æ“ä½œ
- **æŒç»­é›†æˆ**ï¼šä»£ç å˜æ›´åè‡ªåŠ¨éªŒè¯å’Œé›†æˆ
- **å¿«é€Ÿåé¦ˆ**ï¼šæ„å»ºå¤±è´¥ç«‹å³é€šçŸ¥å¼€å‘å›¢é˜Ÿ
- **æ ‡å‡†åŒ–æµç¨‹**ï¼šç»Ÿä¸€çš„æ„å»ºå’Œéƒ¨ç½²æ ‡å‡†

### 1.2 Jenkinsåœ¨DevOpsä¸­çš„åœ°ä½


```
DevOpså·¥å…·é“¾å…¨æ™¯å›¾ï¼š
           
ä»£ç ç®¡ç†        æ„å»ºå·¥å…·        è‡ªåŠ¨åŒ–å¹³å°        ç›‘æ§å·¥å…·
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Git   â”‚â”€â”€â”€â–¶â”‚  Maven  â”‚â”€â”€â”€â–¶â”‚ Jenkins â”‚â”€â”€â”€â–¶â”‚Prometheusâ”‚
â”‚ GitHub  â”‚    â”‚ Gradle  â”‚    â”‚   ğŸ¯   â”‚    â”‚ Grafana â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–²                             â”‚                â”‚
     â”‚                             â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼€å‘è€…  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ è‡ªåŠ¨éƒ¨ç½² â”‚    â”‚ è¿ç»´ç›‘æ§ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     åé¦ˆé€šçŸ¥      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Jenkinsæ‰®æ¼”çš„è§’è‰²**ï¼š
- ğŸ¯ **ä¸­æ¢æ§åˆ¶å™¨**ï¼šåè°ƒå„ä¸ªå·¥å…·ååŒå·¥ä½œ
- ğŸ”„ **æµç¨‹è‡ªåŠ¨åŒ–**ï¼šä¸²è”å¼€å‘åˆ°éƒ¨ç½²çš„å…¨æµç¨‹
- ğŸ“Š **çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶åé¦ˆé¡¹ç›®æ„å»ºçŠ¶æ€

---

## 2. âš™ï¸ Jenkinså®‰è£…é…ç½®è¯¦è§£


### 2.1 ç³»ç»Ÿç¯å¢ƒå‡†å¤‡


**ğŸŸ¢å…¥é—¨çº§å®‰è£…è¦æ±‚**ï¼š
```
ç¡¬ä»¶æœ€ä½é…ç½®ï¼š
â”œâ”€â”€ CPU: 2æ ¸å¿ƒ
â”œâ”€â”€ å†…å­˜: 4GB RAM  
â”œâ”€â”€ ç£ç›˜: 50GBå¯ç”¨ç©ºé—´
â””â”€â”€ ç½‘ç»œ: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

æ¨èé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š
â”œâ”€â”€ CPU: 4æ ¸å¿ƒä»¥ä¸Š
â”œâ”€â”€ å†…å­˜: 8GB RAMä»¥ä¸Š
â”œâ”€â”€ ç£ç›˜: 100GB+ SSD
â””â”€â”€ æ“ä½œç³»ç»Ÿ: Ubuntu 20.04+ / CentOS 8+
```

### 2.2 å®‰è£…æ–¹å¼å¯¹æ¯”


| å®‰è£…æ–¹å¼ | **é€‚ç”¨åœºæ™¯** | **ä¼˜åŠ¿** | **åŠ£åŠ¿** |
|---------|------------|---------|---------|
| **Dockerå®‰è£…** | `å¿«é€Ÿä½“éªŒã€å¼€å‘ç¯å¢ƒ` | âœ… éƒ¨ç½²å¿«é€Ÿã€ç¯å¢ƒéš”ç¦» | â— éœ€è¦DockeråŸºç¡€ |
| **WARåŒ…éƒ¨ç½²** | `è½»é‡çº§éƒ¨ç½²` | âœ… ç®€å•ç›´æ¥ã€èµ„æºå ç”¨å°‘ | â— æ‰‹åŠ¨ç®¡ç†ä¾èµ– |
| **ç³»ç»ŸåŒ…å®‰è£…** | `ç”Ÿäº§ç¯å¢ƒæ¨è` | âœ… ç³»ç»Ÿé›†æˆå¥½ã€ç¨³å®šæ€§é«˜ | â— é…ç½®ç›¸å¯¹å¤æ‚ |

### 2.3 Ubuntuç³»ç»Ÿå®‰è£…å®æˆ˜


**Step â‘ ** æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…Javaç¯å¢ƒ
```bash
# æ›´æ–°åŒ…ç®¡ç†å™¨
sudo apt update

# å®‰è£…OpenJDK 11
sudo apt install openjdk-11-jdk -y

# éªŒè¯Javaå®‰è£…
java -version
```

**Step â‘¡** æ·»åŠ Jenkinså®˜æ–¹æº
```bash
# æ·»åŠ Jenkins GPGå¯†é’¥
curl -fsSL https://pkg.jenkins.io/debian/jenkins.io.key | sudo tee \
  /usr/share/keyrings/jenkins-keyring.asc > /dev/null

# æ·»åŠ Jenkinsè½¯ä»¶æº
echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null
```

**Step â‘¢** å®‰è£…å¹¶å¯åŠ¨Jenkins
```bash
# æ›´æ–°åŒ…åˆ—è¡¨å¹¶å®‰è£…Jenkins
sudo apt update
sudo apt install jenkins -y

# å¯åŠ¨JenkinsæœåŠ¡
sudo systemctl start jenkins
sudo systemctl enable jenkins

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status jenkins
```

### 2.4 åˆå§‹åŒ–é…ç½®å‘å¯¼


::: tip ğŸ’¡ åˆå§‹å¯†ç è·å–
Jenkinsé¦–æ¬¡å¯åŠ¨åï¼Œåˆå§‹ç®¡ç†å‘˜å¯†ç å­˜å‚¨åœ¨ï¼š`/var/lib/jenkins/secrets/initialAdminPassword`
:::

**ğŸ”§ é…ç½®æ­¥éª¤**ï¼š
1. **è®¿é—®Webç•Œé¢**ï¼šæµè§ˆå™¨æ‰“å¼€ `http://æœåŠ¡å™¨IP:8080`
2. **è¾“å…¥åˆå§‹å¯†ç **ï¼š`sudo cat /var/lib/jenkins/secrets/initialAdminPassword`
3. **é€‰æ‹©æ’ä»¶å®‰è£…**ï¼šæ¨èé€‰æ‹©"å®‰è£…æ¨èæ’ä»¶"
4. **åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·**ï¼šè®¾ç½®ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±
5. **é…ç½®Jenkins URL**ï¼šç¡®è®¤è®¿é—®åœ°å€

---

## 3. ğŸ”Œ æ’ä»¶ç®¡ç†ä¸ç”Ÿæ€ç³»ç»Ÿ


### 3.1 æ’ä»¶ç”Ÿæ€ç³»ç»Ÿç†è§£


**Jenkinsæ’ä»¶æœ¬è´¨**ï¼šæŠŠJenkinsæƒ³è±¡æˆä¸€ä¸ª**æ™ºèƒ½æ‰‹æœº**ï¼Œæ’ä»¶å°±æ˜¯**å„ç§APP**ï¼Œé€šè¿‡å®‰è£…ä¸åŒæ’ä»¶è®©Jenkinså…·å¤‡ä¸åŒèƒ½åŠ›ã€‚

```
Jenkinsæ ¸å¿ƒåŠŸèƒ½æ¶æ„ï¼š
         
        Jenkins Core (æ ¸å¿ƒå¼•æ“)
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ          ç”¨æˆ·ç•Œé¢
    â”‚                   â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”Œâ”€â”€â”€â”´â”€â”€â”€â”
â”‚æ„å»ºæ’ä»¶â”‚           â”‚Web UI â”‚
â”‚Gitæ’ä»¶ â”‚           â”‚REST APIâ”‚
â”‚éƒ¨ç½²æ’ä»¶â”‚           â”‚CLIå·¥å…·â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒæ’ä»¶åˆ†ç±»è¯¦è§£


**ğŸŸ¡è¿›é˜¶** **ç‰ˆæœ¬æ§åˆ¶æ’ä»¶**ï¼š
- **Git Plugin** - æœ€é‡è¦çš„æ’ä»¶ï¼Œè¿æ¥Gitä»“åº“
- **GitHub Plugin** - ä¸GitHubæ·±åº¦é›†æˆ
- **GitLab Plugin** - æ”¯æŒGitLab webhookè§¦å‘

**ğŸ”´é«˜çº§** **æ„å»ºå·¥å…·æ’ä»¶**ï¼š
- **Maven Integration** - Javaé¡¹ç›®æ„å»º
- **Gradle Plugin** - ç°ä»£åŒ–æ„å»ºå·¥å…·
- **NodeJS Plugin** - å‰ç«¯é¡¹ç›®æ”¯æŒ

**ğŸ’æ ¸å¿ƒ** **éƒ¨ç½²ç›¸å…³æ’ä»¶**ï¼š
- **Deploy to Container** - è‡ªåŠ¨éƒ¨ç½²åˆ°Tomcatç­‰å®¹å™¨
- **SSH Plugin** - è¿œç¨‹æœåŠ¡å™¨æ“ä½œ
- **Docker Plugin** - å®¹å™¨åŒ–éƒ¨ç½²æ”¯æŒ

### 3.3 æ’ä»¶å®‰è£…ç®¡ç†å®æˆ˜


**æ–¹å¼ä¸€ï¼šWebç•Œé¢å®‰è£…**
```
å¯¼èˆªè·¯å¾„ï¼š
Jenkinsé¦–é¡µ â†’ ç³»ç»Ÿç®¡ç† â†’ æ’ä»¶ç®¡ç† â†’ å¯é€‰æ’ä»¶
æœç´¢æ’ä»¶åç§° â†’ å‹¾é€‰æ’ä»¶ â†’ ç‚¹å‡»"ç›´æ¥å®‰è£…"
```

**æ–¹å¼äºŒï¼šç¦»çº¿å®‰è£…æ’ä»¶**
```bash
# ä¸‹è½½æ’ä»¶æ–‡ä»¶(.hpiæ ¼å¼)åˆ°æœåŠ¡å™¨
cd /var/lib/jenkins/plugins/

# é‡å¯JenkinsæœåŠ¡
sudo systemctl restart jenkins
```

**ğŸ”’å®‰å…¨** **æ’ä»¶ç®¡ç†æœ€ä½³å®è·µ**ï¼š
- âš¡ **å®šæœŸæ›´æ–°**ï¼šä¿æŒæ’ä»¶ç‰ˆæœ¬æœ€æ–°
- ğŸ” **è°¨æ…é€‰æ‹©**ï¼šåªå®‰è£…ç¡®å®éœ€è¦çš„æ’ä»¶
- ğŸ“‹ **å¤‡ä»½è®°å½•**ï¼šè®°å½•å·²å®‰è£…æ’ä»¶åˆ—è¡¨
- âš ï¸ **å…¼å®¹æ€§æ£€æŸ¥**ï¼šå‡çº§å‰ç¡®è®¤æ’ä»¶å…¼å®¹æ€§

---

## 4. ğŸ“œ Jenkinsfile Pipelineæ ¸å¿ƒæŠ€æœ¯


### 4.1 Pipelineæ¦‚å¿µç†è§£


**Pipelineç®€å•ç†è§£**ï¼šæŠŠè½¯ä»¶ä»æºä»£ç å˜æˆå¯è¿è¡Œç¨‹åºçš„**æµæ°´çº¿ä½œä¸šæµç¨‹**ï¼Œå°±åƒå·¥å‚ç”Ÿäº§çº¿ä¸€æ ·ï¼Œæ¯ä¸ªé˜¶æ®µå®Œæˆç‰¹å®šä»»åŠ¡ã€‚

```
ä¼ ç»Ÿæ„å»º vs Pipelineå¯¹æ¯”ï¼š

ä¼ ç»Ÿæ–¹å¼ï¼ˆåˆ†æ•£é…ç½®ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ„å»ºä»»åŠ¡ â”‚    â”‚ æµ‹è¯•ä»»åŠ¡ â”‚    â”‚ éƒ¨ç½²ä»»åŠ¡ â”‚
â”‚ ç‹¬ç«‹é…ç½® â”‚    â”‚ ç‹¬ç«‹é…ç½® â”‚    â”‚ ç‹¬ç«‹é…ç½® â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pipelineæ–¹å¼ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Jenkinsfile                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â†’ â”Œâ”€â”€â”€â”€â”€â” â†’ â”Œâ”€â”€â”€â”€â”€â” â†’ â”Œâ”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚æ„å»º â”‚   â”‚æµ‹è¯• â”‚   â”‚æ‰«æ â”‚   â”‚éƒ¨ç½² â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Pipelineè¯­æ³•åŸºç¡€


**ğŸŸ¢å…¥é—¨** **å£°æ˜å¼Pipelineç»“æ„**ï¼š
```groovy
pipeline {
    agent any  // åœ¨ä»»æ„å¯ç”¨èŠ‚ç‚¹æ‰§è¡Œ
    
    stages {
        stage('æ„å»ºé˜¶æ®µ') {
            steps {
                echo 'æ­£åœ¨ç¼–è¯‘ä»£ç ...'
                // æ„å»ºå‘½ä»¤
            }
        }
        
        stage('æµ‹è¯•é˜¶æ®µ') {
            steps {
                echo 'æ­£åœ¨è¿è¡Œæµ‹è¯•...'
                // æµ‹è¯•å‘½ä»¤
            }
        }
        
        stage('éƒ¨ç½²é˜¶æ®µ') {
            steps {
                echo 'æ­£åœ¨éƒ¨ç½²åº”ç”¨...'
                // éƒ¨ç½²å‘½ä»¤
            }
        }
    }
}
```

**æ ¸å¿ƒè¯­æ³•å…ƒç´ è§£é‡Š**ï¼š
- **pipeline{}** - æ•´ä¸ªæµæ°´çº¿çš„æ ¹å®¹å™¨
- **agent** - æŒ‡å®šåœ¨å“ªä¸ªèŠ‚ç‚¹æ‰§è¡Œ
- **stages{}** - åŒ…å«æ‰€æœ‰é˜¶æ®µçš„å®¹å™¨
- **stage()** - å•ä¸ªæ‰§è¡Œé˜¶æ®µ
- **steps{}** - å…·ä½“æ‰§è¡Œæ­¥éª¤

### 4.3 å®é™…é¡¹ç›®Pipelineç¤ºä¾‹


**Java Spring Booté¡¹ç›®Pipeline**ï¼š
```groovy
pipeline {
    agent any
    
    environment {
        MAVEN_OPTS = '-Xmx1024m'
        APP_NAME = 'my-spring-app'
    }
    
    stages {
        stage('ğŸ“¥ ä»£ç æ£€å‡º') {
            steps {
                git branch: 'main', url: 'https://github.com/user/project.git'
            }
        }
        
        stage('ğŸ”¨ Mavenæ„å»º') {
            steps {
                sh 'mvn clean compile'
            }
        }
        
        stage('ğŸ§ª å•å…ƒæµ‹è¯•') {
            steps {
                sh 'mvn test'
                publishTestResults testResultsPattern: 'target/surefire-reports/*.xml'
            }
        }
        
        stage('ğŸ“¦ æ‰“åŒ…åº”ç”¨') {
            steps {
                sh 'mvn package -DskipTests'
                archiveArtifacts artifacts: 'target/*.jar'
            }
        }
    }
    
    post {
        success {
            echo 'ğŸ‰ æ„å»ºæˆåŠŸï¼'
        }
        failure {
            echo 'âŒ æ„å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—'
        }
    }
}
```

### 4.4 Pipelineé«˜çº§ç‰¹æ€§


**ğŸ”´é«˜çº§** **å¹¶è¡Œæ‰§è¡Œ**ï¼š
```groovy
stage('å¹¶è¡Œæµ‹è¯•') {
    parallel {
        stage('å•å…ƒæµ‹è¯•') {
            steps {
                sh 'mvn test'
            }
        }
        stage('é›†æˆæµ‹è¯•') {
            steps {
                sh 'mvn integration-test'
            }
        }
        stage('ä»£ç æ‰«æ') {
            steps {
                sh 'sonar-scanner'
            }
        }
    }
}
```

**æ¡ä»¶æ‰§è¡Œ**ï¼š
```groovy
stage('ç”Ÿäº§éƒ¨ç½²') {
    when {
        branch 'main'  // åªåœ¨mainåˆ†æ”¯æ‰§è¡Œ
    }
    steps {
        sh './deploy-to-production.sh'
    }
}
```

---

## 5. ğŸŒ¿ å¤šåˆ†æ”¯æµæ°´çº¿é…ç½®å®æˆ˜


### 5.1 å¤šåˆ†æ”¯æµæ°´çº¿æ ¸å¿ƒç†å¿µ


**å¤šåˆ†æ”¯æµæ°´çº¿ç†è§£**ï¼šæƒ³è±¡ä¸€ä¸ª**æ™ºèƒ½çš„é¡¹ç›®ç®¡ç†å‘˜**ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å‘ç°ä»£ç ä»“åº“ä¸­çš„æ‰€æœ‰åˆ†æ”¯ï¼Œå¹¶ä¸ºæ¯ä¸ªåˆ†æ”¯è‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„æ„å»ºä»»åŠ¡ã€‚

```
ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚mainåˆ†æ”¯ â”‚    â”‚devåˆ†æ”¯  â”‚    â”‚featureåˆ†æ”¯â”‚
â”‚æ‰‹åŠ¨åˆ›å»º â”‚    â”‚æ‰‹åŠ¨åˆ›å»º â”‚    â”‚æ‰‹åŠ¨åˆ›å»º  â”‚
â”‚ä»»åŠ¡1   â”‚    â”‚ä»»åŠ¡2   â”‚    â”‚ä»»åŠ¡3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
é—®é¢˜ï¼šåˆ†æ”¯å¤šäº†ç®¡ç†æ··ä¹±ï¼Œå®¹æ˜“é—æ¼

å¤šåˆ†æ”¯æµæ°´çº¿çš„ä¼˜åŠ¿ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å¤šåˆ†æ”¯æµæ°´çº¿ä»»åŠ¡              â”‚
â”‚  è‡ªåŠ¨å‘ç°æ‰€æœ‰åˆ†æ”¯ + è‡ªåŠ¨åˆ›å»ºä»»åŠ¡     â”‚
â”‚                                   â”‚
â”‚  main â”€â”€â†’ è‡ªåŠ¨æ„å»º                â”‚
â”‚  dev  â”€â”€â†’ è‡ªåŠ¨æ„å»º                â”‚
â”‚  feat â”€â”€â†’ è‡ªåŠ¨æ„å»º                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 åˆ›å»ºå¤šåˆ†æ”¯æµæ°´çº¿


**Step â‘ ** åˆ›å»ºæ–°ä»»åŠ¡
```
Jenkinsé¦–é¡µ â†’ æ–°å»ºä»»åŠ¡ â†’ è¾“å…¥ä»»åŠ¡åç§° â†’ é€‰æ‹©"å¤šåˆ†æ”¯æµæ°´çº¿" â†’ ç¡®å®š
```

**Step â‘¡** é…ç½®ä»£ç æº
- **åˆ†æ”¯æº**ï¼šé€‰æ‹©Git
- **ä»“åº“URL**ï¼šè¾“å…¥Gitä»“åº“åœ°å€
- **å‡­æ®**ï¼šé…ç½®è®¿é—®å‡­æ®ï¼ˆç”¨æˆ·åå¯†ç æˆ–SSHå¯†é’¥ï¼‰
- **åˆ†æ”¯å‘ç°ç­–ç•¥**ï¼šé€‰æ‹©è¦ç›‘æ§çš„åˆ†æ”¯ç±»å‹

**Step â‘¢** æ„å»ºé…ç½®
- **æ„å»ºè„šæœ¬è·¯å¾„**ï¼šé»˜è®¤ä¸º`Jenkinsfile`
- **æ‰«æè§¦å‘å™¨**ï¼šè®¾ç½®å®šæœŸæ‰«ææ–°åˆ†æ”¯çš„æ—¶é—´é—´éš”

### 5.3 ä¸åŒåˆ†æ”¯çš„å·®å¼‚åŒ–å¤„ç†


**æ ¹æ®åˆ†æ”¯åç§°æ‰§è¡Œä¸åŒé€»è¾‘**ï¼š
```groovy
pipeline {
    agent any
    
    stages {
        stage('ç¯å¢ƒå‡†å¤‡') {
            steps {
                script {
                    if (env.BRANCH_NAME == 'main') {
                        echo 'ğŸš€ å‡†å¤‡ç”Ÿäº§ç¯å¢ƒæ„å»º'
                        env.DEPLOY_ENV = 'production'
                    } else if (env.BRANCH_NAME == 'develop') {
                        echo 'ğŸ§ª å‡†å¤‡æµ‹è¯•ç¯å¢ƒæ„å»º'
                        env.DEPLOY_ENV = 'staging'
                    } else {
                        echo 'ğŸ’» å‡†å¤‡å¼€å‘ç¯å¢ƒæ„å»º'
                        env.DEPLOY_ENV = 'development'
                    }
                }
            }
        }
        
        stage('æ„å»º') {
            steps {
                sh 'mvn clean package'
            }
        }
        
        stage('éƒ¨ç½²') {
            when {
                anyOf {
                    branch 'main'
                    branch 'develop'
                }
            }
            steps {
                script {
                    sh "deploy.sh ${env.DEPLOY_ENV}"
                }
            }
        }
    }
}
```

### 5.4 åˆ†æ”¯ç®¡ç†ç­–ç•¥


**ğŸ’¯æœ€ä½³å®è·µ** **Git Flowé›†æˆ**ï¼š
```
åˆ†æ”¯ç­–ç•¥ä¸Pipelineé…ç½®ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ mainåˆ†æ”¯    â”‚  â”‚ developåˆ†æ”¯  â”‚  â”‚ featureåˆ†æ”¯ â”‚
â”‚ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² â”‚  â”‚ æµ‹è¯•ç¯å¢ƒéƒ¨ç½² â”‚  â”‚ ä»…æ„å»ºæµ‹è¯•  â”‚
â”‚ å®Œæ•´æµæ°´çº¿  â”‚  â”‚ ç®€åŒ–æµæ°´çº¿  â”‚  â”‚ åŸºç¡€éªŒè¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚               â”‚               â”‚
      â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ„å»º+æµ‹è¯•   â”‚  â”‚ æ„å»º+æµ‹è¯•   â”‚  â”‚ æ„å»º+æµ‹è¯•   â”‚
â”‚ ä»£ç æ‰«æ    â”‚  â”‚ ä»£ç æ‰«æ    â”‚  â”‚           â”‚
â”‚ éƒ¨ç½²ç”Ÿäº§    â”‚  â”‚ éƒ¨ç½²æµ‹è¯•    â”‚  â”‚           â”‚
â”‚ é€šçŸ¥è¿ç»´    â”‚  â”‚           â”‚  â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ğŸ—ï¸ åˆ†å¸ƒå¼æ„å»ºæ¶æ„è®¾è®¡


### 6.1 åˆ†å¸ƒå¼æ„å»ºæ ¸å¿ƒæ¦‚å¿µ


**åˆ†å¸ƒå¼æ„å»ºç†è§£**ï¼šæŠŠJenkinsæƒ³è±¡æˆä¸€ä¸ª**å»ºç­‘å·¥ç¨‹é˜Ÿ**ï¼ŒMasterï¼ˆä¸»èŠ‚ç‚¹ï¼‰æ˜¯**é¡¹ç›®ç»ç†**ï¼Œè´Ÿè´£åˆ†é…ä»»åŠ¡ï¼›Agentï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰æ˜¯**æ–½å·¥å·¥äºº**ï¼Œè´Ÿè´£å…·ä½“å¹²æ´»ã€‚

```
é›†ä¸­å¼æ„å»ºçš„é—®é¢˜ï¼š
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Jenkins   â”‚
        â”‚   Master    â”‚  â† æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨è¿™é‡Œæ‰§è¡Œ
        â”‚  (å•ç‚¹å‹åŠ›)  â”‚     å®¹æ˜“æˆä¸ºæ€§èƒ½ç“¶é¢ˆ
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†å¸ƒå¼æ„å»ºçš„ä¼˜åŠ¿ï¼š
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Jenkins   â”‚
        â”‚   Master    â”‚  â† åªè´Ÿè´£ä»»åŠ¡è°ƒåº¦
        â”‚ (ä»»åŠ¡è°ƒåº¦å™¨) â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Agent 1â”‚  â”‚Agent 2â”‚  â”‚Agent 3â”‚ â† å…·ä½“æ‰§è¡Œæ„å»ºä»»åŠ¡
â”‚Linux  â”‚  â”‚Windowsâ”‚  â”‚macOS  â”‚   ä¸åŒå¹³å°åŒæ—¶å·¥ä½œ
â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Master-Agentæ¶æ„è¯¦è§£


**ğŸ¯ è§’è‰²åˆ†å·¥æ˜ç¡®**ï¼š

**MasterèŠ‚ç‚¹èŒè´£**ï¼š
- ğŸ“‹ **ä»»åŠ¡è°ƒåº¦**ï¼šå†³å®šå“ªä¸ªä»»åŠ¡åœ¨å“ªä¸ªAgentä¸Šæ‰§è¡Œ
- ğŸ–¥ï¸ **ç”¨æˆ·ç•Œé¢**ï¼šæä¾›Webç®¡ç†ç•Œé¢
- ğŸ“Š **çŠ¶æ€ç›‘æ§**ï¼šç›‘æ§æ‰€æœ‰Agentçš„å¥åº·çŠ¶æ€
- ğŸ’¾ **æ•°æ®å­˜å‚¨**ï¼šå­˜å‚¨æ„å»ºå†å²ã€é…ç½®ä¿¡æ¯

**AgentèŠ‚ç‚¹èŒè´£**ï¼š
- ğŸ”¨ **æ‰§è¡Œæ„å»º**ï¼šè¿è¡Œå…·ä½“çš„æ„å»ºä»»åŠ¡
- ğŸ“¦ **ç¯å¢ƒæä¾›**ï¼šæä¾›ä¸åŒçš„æ„å»ºç¯å¢ƒ
- âš¡ **èµ„æºè´¡çŒ®**ï¼šæä¾›CPUã€å†…å­˜ã€ç£ç›˜ç­‰èµ„æº

### 6.3 AgentèŠ‚ç‚¹é…ç½®æ–¹å¼


**æ–¹å¼ä¸€ï¼šJNLP Agentï¼ˆæ¨èï¼‰**
```bash
# åœ¨Agentæœºå™¨ä¸Šä¸‹è½½agent.jar
wget http://jenkins-master:8080/jnlpJars/agent.jar

# å¯åŠ¨Agentè¿æ¥åˆ°Master
java -jar agent.jar -jnlpUrl http://jenkins-master:8080/computer/agent-name/slave-agent.jnlp -secret <secret-key>
```

**æ–¹å¼äºŒï¼šSSH Agent**
```
é…ç½®æ­¥éª¤ï¼š
1. åœ¨Masterä¸Šé…ç½®SSHç§é’¥
2. åœ¨Agentæœºå™¨ä¸Šé…ç½®SSHå…¬é’¥
3. Jenkinsè‡ªåŠ¨é€šè¿‡SSHè¿æ¥å¹¶å¯åŠ¨Agent
```

### 6.4 æ„å»ºç¯å¢ƒéš”ç¦»ç­–ç•¥


**ğŸ”’å®‰å…¨** **Docker Agentéš”ç¦»**ï¼š
```groovy
pipeline {
    agent {
        docker {
            image 'maven:3.8-openjdk-11'
            args '-v $HOME/.m2:/root/.m2'
        }
    }
    
    stages {
        stage('æ„å»º') {
            steps {
                sh 'mvn clean package'
            }
        }
    }
}
```

**å¤šç¯å¢ƒæ„å»ºçŸ©é˜µ**ï¼š
```groovy
pipeline {
    agent none
    
    stages {
        stage('å¤šå¹³å°æ„å»º') {
            matrix {
                axes {
                    axis {
                        name 'PLATFORM'
                        values 'linux', 'windows', 'macos'
                    }
                }
                stages {
                    stage('æ„å»º') {
                        agent { label "${PLATFORM}" }
                        steps {
                            echo "åœ¨${PLATFORM}å¹³å°ä¸Šæ„å»º"
                            sh 'make build'
                        }
                    }
                }
            }
        }
    }
}
```

---

## 7. ğŸ›ï¸ æ„å»ºèŠ‚ç‚¹ç®¡ç†ä¸æ‰©å±•ç­–ç•¥


### 7.1 èŠ‚ç‚¹æ ‡ç­¾ç®¡ç†ç³»ç»Ÿ


**æ ‡ç­¾ç³»ç»Ÿç†è§£**ï¼šç»™æ¯ä¸ªAgentè´´ä¸Š**æ ‡ç­¾**ï¼Œå°±åƒç»™å·¥äººè´´ä¸ŠæŠ€èƒ½æ ‡ç­¾ï¼Œéœ€è¦ç‰¹å®šæŠ€èƒ½çš„ä»»åŠ¡å°±åˆ†é…ç»™æœ‰å¯¹åº”æ ‡ç­¾çš„å·¥äººã€‚

```
èŠ‚ç‚¹æ ‡ç­¾åˆ†ç±»ç­–ç•¥ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Agent-1   â”‚  â”‚   Agent-2   â”‚  â”‚   Agent-3   â”‚
â”‚  æ ‡ç­¾:      â”‚  â”‚  æ ‡ç­¾:      â”‚  â”‚  æ ‡ç­¾:      â”‚
â”‚  â€¢ linux    â”‚  â”‚  â€¢ windows  â”‚  â”‚  â€¢ linux    â”‚
â”‚  â€¢ java     â”‚  â”‚  â€¢ dotnet   â”‚  â”‚  â€¢ docker   â”‚
â”‚  â€¢ maven    â”‚  â”‚  â€¢ msbuild  â”‚  â”‚  â€¢ k8s      â”‚
â”‚  â€¢ mysql    â”‚  â”‚  â€¢ sqlserverâ”‚  â”‚  â€¢ redis    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–²               â–²               â–²
      â”‚               â”‚               â”‚
Javaé¡¹ç›®æ„å»º      .NETé¡¹ç›®æ„å»º    å®¹å™¨åŒ–éƒ¨ç½²
```

**æ ‡ç­¾é…ç½®æœ€ä½³å®è·µ**ï¼š
- ğŸ·ï¸ **æ“ä½œç³»ç»Ÿæ ‡ç­¾**ï¼š`linux`ã€`windows`ã€`macos`
- ğŸ”§ **æŠ€æœ¯æ ˆæ ‡ç­¾**ï¼š`java`ã€`nodejs`ã€`python`ã€`dotnet`
- ğŸ› ï¸ **å·¥å…·æ ‡ç­¾**ï¼š`docker`ã€`maven`ã€`gradle`ã€`npm`
- ğŸŒ **ç¯å¢ƒæ ‡ç­¾**ï¼š`dev`ã€`staging`ã€`prod`

### 7.2 åŠ¨æ€èŠ‚ç‚¹æ‰©å±•


**ğŸŸ¡è¿›é˜¶** **Kubernetesé›†æˆæ‰©å±•**ï¼š
```yaml
# Kubernetes Pod Template
apiVersion: v1
kind: Pod
spec:
  containers:
  - name: jnlp
    image: jenkins/inbound-agent:latest
    resources:
      requests:
        memory: "512Mi"
        cpu: "500m"
      limits:
        memory: "1Gi"
        cpu: "1000m"
  - name: maven
    image: maven:3.8-openjdk-11
    command: ['sleep']
    args: ['99999']
```

**DockeråŠ¨æ€Agent**ï¼š
```groovy
pipeline {
    agent {
        docker {
            image 'node:16-alpine'
            label 'docker-enabled'
        }
    }
    
    stages {
        stage('Node.jsæ„å»º') {
            steps {
                sh 'npm install'
                sh 'npm run build'
            }
        }
    }
}
```

### 7.3 èŠ‚ç‚¹æ€§èƒ½ç›‘æ§


**å…³é”®ç›‘æ§æŒ‡æ ‡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             èŠ‚ç‚¹å¥åº·ç›‘æ§                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPUä½¿ç”¨ç‡    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%           â”‚
â”‚ å†…å­˜ä½¿ç”¨ç‡   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60%           â”‚  
â”‚ ç£ç›˜ä½¿ç”¨ç‡   â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30%           â”‚
â”‚ ç½‘ç»œå»¶è¿Ÿ     15ms                      â”‚
â”‚ ä»»åŠ¡é˜Ÿåˆ—     3ä¸ªç­‰å¾…ä¸­                 â”‚
â”‚ è¿æ¥çŠ¶æ€     ğŸŸ¢ åœ¨çº¿                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**âš ï¸è­¦å‘Š** **èŠ‚ç‚¹æ•…éšœå¤„ç†**ï¼š
1. **è‡ªåŠ¨é‡è¿**ï¼šAgentæ–­çº¿åè‡ªåŠ¨å°è¯•é‡è¿
2. **ä»»åŠ¡è¿ç§»**ï¼šå¤±è´¥ä»»åŠ¡è‡ªåŠ¨è½¬ç§»åˆ°å…¶ä»–èŠ‚ç‚¹
3. **å‘Šè­¦é€šçŸ¥**ï¼šèŠ‚ç‚¹å¼‚å¸¸æ—¶å‘é€é‚®ä»¶/æ¶ˆæ¯é€šçŸ¥
4. **å¤‡ç”¨èŠ‚ç‚¹**ï¼šé…ç½®å¤‡ç”¨èŠ‚ç‚¹ç¡®ä¿ä¸šåŠ¡è¿ç»­æ€§

---

## 8. ğŸ” Jenkinså®‰å…¨é…ç½®è¦ç‚¹


### 8.1 ç”¨æˆ·è®¤è¯ä¸æˆæƒ


**ğŸ”’å®‰å…¨** **å¤šå±‚å®‰å…¨é˜²æŠ¤ç†å¿µ**ï¼š
```
Jenkinså®‰å…¨é˜²æŠ¤ä½“ç³»ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ç½‘ç»œå±‚                   â”‚
â”‚  â€¢ é˜²ç«å¢™è§„åˆ™                          â”‚
â”‚  â€¢ VPNè®¿é—®                            â”‚
â”‚  â€¢ IPç™½åå•                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               åº”ç”¨å±‚                    â”‚
â”‚  â€¢ ç”¨æˆ·è®¤è¯ (LDAP/SSO)                 â”‚
â”‚  â€¢ æƒé™æ§åˆ¶ (åŸºäºè§’è‰²)                  â”‚
â”‚  â€¢ APIè®¿é—®æ§åˆ¶                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               æ•°æ®å±‚                    â”‚
â”‚  â€¢ æ•æ„Ÿä¿¡æ¯åŠ å¯†                        â”‚
â”‚  â€¢ æ„å»ºæ—¥å¿—æƒé™æ§åˆ¶                    â”‚
â”‚  â€¢ å¯†é’¥ç®¡ç†                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶


**æƒé™ç®¡ç†ç­–ç•¥**ï¼š
```
è§’è‰²æƒé™è®¾è®¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç®¡ç†å‘˜è§’è‰²  â”‚  â”‚  å¼€å‘è€…è§’è‰²  â”‚  â”‚  æµ‹è¯•è€…è§’è‰²  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ç³»ç»Ÿé…ç½®  â”‚  â”‚ âœ… åˆ›å»ºä»»åŠ¡  â”‚  â”‚ âœ… æŸ¥çœ‹æ„å»º  â”‚
â”‚ âœ… ç”¨æˆ·ç®¡ç†  â”‚  â”‚ âœ… æ‰§è¡Œæ„å»º  â”‚  â”‚ âœ… ä¸‹è½½äº§ç‰©  â”‚
â”‚ âœ… æ’ä»¶ç®¡ç†  â”‚  â”‚ âœ… æŸ¥çœ‹æ—¥å¿—  â”‚  â”‚ âŒ ä¿®æ”¹é…ç½®  â”‚
â”‚ âœ… èŠ‚ç‚¹ç®¡ç†  â”‚  â”‚ âŒ ç³»ç»Ÿé…ç½®  â”‚  â”‚ âŒ åˆ é™¤ä»»åŠ¡  â”‚
â”‚ âœ… æ‰€æœ‰æƒé™  â”‚  â”‚ âŒ ç”¨æˆ·ç®¡ç†  â”‚  â”‚ âŒ ç³»ç»Ÿé…ç½®  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**LDAPé›†æˆé…ç½®ç¤ºä¾‹**ï¼š
```
Jenkins â†’ ç³»ç»Ÿç®¡ç† â†’ å…¨å±€å®‰å…¨é…ç½®

å®‰å…¨åŸŸé…ç½®ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LDAPé…ç½®                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœåŠ¡å™¨: ldap://company.com:389  â”‚
â”‚ æ ¹DN: dc=company,dc=com         â”‚
â”‚ ç”¨æˆ·æœç´¢åº“: ou=users            â”‚
â”‚ ç”¨æˆ·æœç´¢è¿‡æ»¤å™¨: uid={0}         â”‚
â”‚ ç®¡ç†å‘˜DN: cn=admin,dc=company   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 å¯†é’¥å’Œå‡­æ®ç®¡ç†


**Jenkins Credentialsç®¡ç†**ï¼š
```
å‡­æ®ç±»å‹ä½¿ç”¨åœºæ™¯ï¼š

ğŸ”‘ ç”¨æˆ·åå¯†ç 
â”œâ”€â”€ Gitä»“åº“è®¿é—®
â”œâ”€â”€ æ•°æ®åº“è¿æ¥
â””â”€â”€ APIæœåŠ¡è®¤è¯

ğŸ” SSHå¯†é’¥
â”œâ”€â”€ æœåŠ¡å™¨ç™»å½•
â”œâ”€â”€ Git SSHè®¿é—®
â””â”€â”€ AgentèŠ‚ç‚¹è¿æ¥

ğŸ“œ Secretæ–‡ä»¶
â”œâ”€â”€ SSLè¯ä¹¦
â”œâ”€â”€ é…ç½®æ–‡ä»¶
â””â”€â”€ å¯†é’¥æ–‡ä»¶

ğŸ« API Token
â”œâ”€â”€ äº‘æœåŠ¡è®¿é—®
â”œâ”€â”€ ç¬¬ä¸‰æ–¹å·¥å…·é›†æˆ
â””â”€â”€ Webhookè®¤è¯
```

**Pipelineä¸­å®‰å…¨ä½¿ç”¨å‡­æ®**ï¼š
```groovy
pipeline {
    agent any
    
    environment {
        // ä½¿ç”¨å‡­æ®IDå¼•ç”¨å¯†ç 
        DB_CREDENTIALS = credentials('database-password')
        // ä½¿ç”¨å‡­æ®IDå¼•ç”¨SSHå¯†é’¥
        SSH_KEY = credentials('production-ssh-key')
    }
    
    stages {
        stage('å®‰å…¨éƒ¨ç½²') {
            steps {
                script {
                    // ä½¿ç”¨ç”¨æˆ·åå¯†ç å‡­æ®
                    withCredentials([usernamePassword(
                        credentialsId: 'deploy-user',
                        usernameVariable: 'DEPLOY_USER',
                        passwordVariable: 'DEPLOY_PASS'
                    )]) {
                        sh 'echo "éƒ¨ç½²ç”¨æˆ·: $DEPLOY_USER"'
                        // å¯†ç è‡ªåŠ¨éšè—ï¼Œä¸ä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤º
                    }
                }
            }
        }
    }
}
```

### 8.4 å®¡è®¡å’Œæ—¥å¿—å®‰å…¨


**âš¡ä¼˜åŒ–** **å®‰å…¨å®¡è®¡é…ç½®**ï¼š
- ğŸ“ **æ“ä½œæ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰ç”¨æˆ·æ“ä½œ
- ğŸ” **è®¿é—®æ—¥å¿—**ï¼šè®°å½•ç³»ç»Ÿè®¿é—®æƒ…å†µ  
- ğŸ“Š **æ„å»ºæ—¥å¿—**ï¼šæ§åˆ¶æ•æ„Ÿä¿¡æ¯è¾“å‡º
- ğŸš¨ **å¼‚å¸¸ç›‘æ§**ï¼šç›‘æ§å¼‚å¸¸ç™»å½•å’Œæ“ä½œ

---

## 9. ğŸ“Š æ„å»ºå†å²ä¸æ—¥å¿—ç®¡ç†


### 9.1 æ„å»ºå†å²æ•°æ®ä»·å€¼


**æ„å»ºå†å²çš„ä½œç”¨**ï¼šå°±åƒ**é¡¹ç›®çš„å¥åº·æ¡£æ¡ˆ**ï¼Œè®°å½•æ¯æ¬¡æ„å»ºçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¸®åŠ©å›¢é˜Ÿåˆ†æé¡¹ç›®è´¨é‡è¶‹åŠ¿å’Œé—®é¢˜æ ¹æºã€‚

```
æ„å»ºå†å²ä¿¡æ¯å±‚æ¬¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æ„å»ºå†å²æ¦‚è§ˆ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ æˆåŠŸç‡è¶‹åŠ¿   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%        â”‚
â”‚ â±ï¸ å¹³å‡æ„å»ºæ—¶é—´  5åˆ†30ç§’               â”‚ 
â”‚ ğŸ”„ æ„å»ºé¢‘ç‡     æ¯å¤©15æ¬¡               â”‚
â”‚ ğŸ“Š ä»£ç è´¨é‡     é€æ­¥æ”¹å–„              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å•æ¬¡æ„å»ºè¯¦æƒ…                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ æ„å»ºç»“æœ: âœ… æˆåŠŸ                   â”‚
â”‚ â° æ‰§è¡Œæ—¶é—´: 2025-01-21 10:30         â”‚  
â”‚ ğŸ‘¤ è§¦å‘è€…: å¼ ä¸‰                       â”‚
â”‚ ğŸŒ¿ åˆ†æ”¯: feature/user-login           â”‚
â”‚ ğŸ“ æäº¤: fix login validation bug     â”‚
â”‚ ğŸ“‹ æµ‹è¯•ç»“æœ: 98% é€šè¿‡                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 æ—¥å¿—ç®¡ç†ç­–ç•¥


**ğŸŸ¢å…¥é—¨** **æ—¥å¿—åˆ†ç±»ç®¡ç†**ï¼š
```
Jenkinsæ—¥å¿—ä½“ç³»ï¼š

ç³»ç»Ÿæ—¥å¿— (jenkins.log)
â”œâ”€â”€ Jenkinså¯åŠ¨ä¿¡æ¯
â”œâ”€â”€ æ’ä»¶åŠ è½½çŠ¶æ€  
â”œâ”€â”€ ç³»ç»Ÿé”™è¯¯ä¿¡æ¯
â””â”€â”€ æ€§èƒ½ç›‘æ§æ•°æ®

æ„å»ºæ—¥å¿— (build.log)
â”œâ”€â”€ æ„å»ºæ­¥éª¤è¾“å‡º
â”œâ”€â”€ ç¼–è¯‘é”™è¯¯ä¿¡æ¯
â”œâ”€â”€ æµ‹è¯•æ‰§è¡Œç»“æœ
â””â”€â”€ éƒ¨ç½²æ“ä½œè®°å½•

è®¿é—®æ—¥å¿— (access.log)  
â”œâ”€â”€ ç”¨æˆ·ç™»å½•è®°å½•
â”œâ”€â”€ APIè°ƒç”¨æ—¥å¿—
â”œâ”€â”€ é¡µé¢è®¿é—®ç»Ÿè®¡
â””â”€â”€ å®‰å…¨äº‹ä»¶è®°å½•
```

**æ—¥å¿—è½®è½¬é…ç½®**ï¼š
```bash
# é…ç½®logrotateç®¡ç†Jenkinsæ—¥å¿—
sudo nano /etc/logrotate.d/jenkins

/var/log/jenkins/*.log {
    daily           # æ¯å¤©è½®è½¬
    rotate 30       # ä¿ç•™30å¤©  
    compress        # å‹ç¼©æ—§æ—¥å¿—
    missingok       # æ–‡ä»¶ä¸å­˜åœ¨ä¸æŠ¥é”™
    notifempty      # ç©ºæ–‡ä»¶ä¸è½®è½¬
    create 644 jenkins jenkins  # åˆ›å»ºæ–°æ–‡ä»¶æƒé™
}
```

### 9.3 æ„å»ºäº§ç‰©ç®¡ç†


**ğŸ”´é«˜çº§** **äº§ç‰©å½’æ¡£ç­–ç•¥**ï¼š
```groovy
pipeline {
    agent any
    
    stages {
        stage('æ„å»º') {
            steps {
                sh 'mvn clean package'
            }
        }
        
        stage('äº§ç‰©ç®¡ç†') {
            steps {
                // å½’æ¡£æ„å»ºäº§ç‰©
                archiveArtifacts artifacts: 'target/*.jar', 
                                fingerprint: true
                
                // å‘å¸ƒæµ‹è¯•æŠ¥å‘Š
                publishTestResults testResultsPattern: 'target/surefire-reports/*.xml'
                
                // å‘å¸ƒä»£ç è¦†ç›–ç‡æŠ¥å‘Š
                publishHTML([
                    allowMissing: false,
                    alwaysLinkToLastBuild: true,
                    keepAll: true,
                    reportDir: 'target/site/jacoco',
                    reportFiles: 'index.html',
                    reportName: 'ä»£ç è¦†ç›–ç‡æŠ¥å‘Š'
                ])
            }
        }
    }
    
    post {
        always {
            // æ¸…ç†å·¥ä½œç©ºé—´ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´
            cleanWs()
        }
    }
}
```

### 9.4 æ€§èƒ½ç›‘æ§å’Œåˆ†æ


**æ„å»ºæ€§èƒ½è¶‹åŠ¿åˆ†æ**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ„å»ºæ€§èƒ½ç›‘æ§é¢æ¿               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ ğŸ“Š æ„å»ºæ—¶é—´è¶‹åŠ¿(æœ€è¿‘30å¤©)               â”‚
â”‚    â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”               â”‚
â”‚ 10mâ”‚ â”‚ â”‚â–ˆâ”‚ â”‚â–ˆâ”‚ â”‚ â”‚â–ˆâ”‚ â”‚ â”‚               â”‚
â”‚  8mâ”‚ â”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚ â”‚â–ˆâ”‚â–ˆâ”‚ â”‚               â”‚  
â”‚  6mâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚               â”‚
â”‚  4mâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚â–ˆâ”‚               â”‚
â”‚    â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜               â”‚
â”‚     1  5  10 15 20 25 30               â”‚
â”‚                                        â”‚
â”‚ ğŸ¯ å…³é”®æŒ‡æ ‡:                           â”‚
â”‚   â€¢ å¹³å‡æ„å»ºæ—¶é—´: 6åˆ†é’Ÿ                 â”‚
â”‚   â€¢ æˆåŠŸç‡: 92%                        â”‚  
â”‚   â€¢ å¤±è´¥åŸå› : æµ‹è¯•å¤±è´¥(60%), ç¼–è¯‘é”™è¯¯(40%) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. ğŸ”— Jenkinså·¥å…·é›†æˆç”Ÿæ€


### 10.1 ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé›†æˆ


**Gité›†æˆæ·±åº¦é…ç½®**ï¼š
```groovy
pipeline {
    agent any
    
    triggers {
        // Git webhookè§¦å‘å™¨
        githubPush()
        // å®šæ—¶è§¦å‘å™¨
        cron('H 2 * * *')  // æ¯å¤©å‡Œæ™¨2ç‚¹
    }
    
    stages {
        stage('ä»£ç æ£€å‡º') {
            steps {
                script {
                    // è·å–Gitä¿¡æ¯
                    env.GIT_COMMIT_SHORT = sh(
                        script: 'git rev-parse --short HEAD',
                        returnStdout: true
                    ).trim()
                    
                    env.GIT_AUTHOR = sh(
                        script: 'git log -1 --pretty=format:"%an"',
                        returnStdout: true
                    ).trim()
                }
                
                echo "æäº¤è€…: ${env.GIT_AUTHOR}"
                echo "æäº¤å“ˆå¸Œ: ${env.GIT_COMMIT_SHORT}"
            }
        }
    }
}
```

### 10.2 ä»£ç è´¨é‡æ£€æµ‹é›†æˆ


**ğŸŸ¡è¿›é˜¶** **SonarQubeé›†æˆ**ï¼š
```groovy
stage('ä»£ç è´¨é‡æ£€æµ‹') {
    steps {
        script {
            def scannerHome = tool 'SonarQubeScanner'
            withSonarQubeEnv('SonarQube-Server') {
                sh "${scannerHome}/bin/sonar-scanner " +
                   "-Dsonar.projectKey=my-project " +
                   "-Dsonar.sources=src " +
                   "-Dsonar.java.binaries=target/classes"
            }
        }
    }
}

stage('è´¨é‡é—¨ç¦') {
    steps {
        timeout(time: 5, unit: 'MINUTES') {
            waitForQualityGate abortPipeline: true
        }
    }
}
```

### 10.3 å®¹å™¨åŒ–éƒ¨ç½²é›†æˆ


**Dockeræ„å»ºå’Œéƒ¨ç½²**ï¼š
```groovy
pipeline {
    agent any
    
    environment {
        DOCKER_REGISTRY = 'harbor.company.com'
        IMAGE_NAME = 'my-app'
        IMAGE_TAG = "${BUILD_NUMBER}"
    }
    
    stages {
        stage('Dockeræ„å»º') {
            steps {
                script {
                    def image = docker.build("${DOCKER_REGISTRY}/${IMAGE_NAME}:${IMAGE_TAG}")
                    
                    docker.withRegistry("https://${DOCKER_REGISTRY}", 'harbor-credentials') {
                        image.push()
                        image.push('latest')
                    }
                }
            }
        }
        
        stage('Kuberneteséƒ¨ç½²') {
            steps {
                kubernetesDeploy(
                    configs: 'k8s-deployment.yaml',
                    kubeconfigId: 'k8s-config'
                )
            }
        }
    }
}
```

### 10.4 é€šçŸ¥å’Œåä½œå·¥å…·é›†æˆ


**å¤šæ¸ é“é€šçŸ¥é…ç½®**ï¼š
```groovy
post {
    success {
        // æˆåŠŸé€šçŸ¥
        emailext(
            subject: "âœ… æ„å»ºæˆåŠŸ - ${env.JOB_NAME} #${env.BUILD_NUMBER}",
            body: "é¡¹ç›® ${env.JOB_NAME} æ„å»ºæˆåŠŸï¼\næ„å»ºå·: ${env.BUILD_NUMBER}\nåˆ†æ”¯: ${env.BRANCH_NAME}",
            to: "${env.CHANGE_AUTHOR_EMAIL}"
        )
        
        // é’‰é’‰é€šçŸ¥
        dingtalk(
            robot: 'team-notification',
            type: 'MARKDOWN',
            title: 'æ„å»ºæˆåŠŸé€šçŸ¥',
            text: [
                "### âœ… æ„å»ºæˆåŠŸ",
                "**é¡¹ç›®**: ${env.JOB_NAME}",
                "**åˆ†æ”¯**: ${env.BRANCH_NAME}",
                "**æ„å»ºå·**: ${env.BUILD_NUMBER}",
                "**è§¦å‘è€…**: ${env.BUILD_USER}"
            ]
        )
    }
    
    failure {
        // å¤±è´¥é€šçŸ¥ - æ›´è¯¦ç»†çš„ä¿¡æ¯
        emailext(
            subject: "âŒ æ„å»ºå¤±è´¥ - ${env.JOB_NAME} #${env.BUILD_NUMBER}",
            body: """
                é¡¹ç›®æ„å»ºå¤±è´¥ï¼Œè¯·åŠæ—¶å¤„ç†ï¼
                
                é¡¹ç›®: ${env.JOB_NAME}
                åˆ†æ”¯: ${env.BRANCH_NAME}  
                æ„å»ºå·: ${env.BUILD_NUMBER}
                å¤±è´¥é˜¶æ®µ: ${env.FAILED_STAGE}
                æŸ¥çœ‹æ—¥å¿—: ${env.BUILD_URL}console
            """,
            to: "${env.CHANGE_AUTHOR_EMAIL}, devops@company.com"
        )
    }
}
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å¿…é¡»æŒæ¡çš„åŸºç¡€æ¦‚å¿µ


```
ğŸ”¥ Jenkinsæ ¸å¿ƒä»·å€¼
â”œâ”€â”€ è‡ªåŠ¨åŒ–CI/CDæµç¨‹ï¼Œæå‡å¼€å‘æ•ˆç‡
â”œâ”€â”€ æ ‡å‡†åŒ–æ„å»ºéƒ¨ç½²ï¼Œé™ä½äººä¸ºé”™è¯¯  
â”œâ”€â”€ å¿«é€Ÿåé¦ˆæœºåˆ¶ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
â””â”€â”€ å·¥å…·é›†æˆä¸­æ¢ï¼Œä¸²è”å¼€å‘å·¥å…·é“¾

ğŸ’ å…³é”®æŠ€æœ¯è¦ç‚¹
â”œâ”€â”€ Pipelineå³ä»£ç ï¼Œç‰ˆæœ¬åŒ–ç®¡ç†æµç¨‹
â”œâ”€â”€ å¤šåˆ†æ”¯è‡ªåŠ¨åŒ–ï¼Œé€‚åº”Git Flowå·¥ä½œæ¨¡å¼
â”œâ”€â”€ åˆ†å¸ƒå¼æ„å»ºï¼Œæå‡æ„å»ºæ€§èƒ½å’Œå¯æ‰©å±•æ€§  
â””â”€â”€ å®‰å…¨æƒé™æ§åˆ¶ï¼Œä¿éšœä¼ä¸šçº§åº”ç”¨å®‰å…¨
```

### 11.2 å®è·µåº”ç”¨æŒ‡å¯¼


**ğŸ¯ é¡¹ç›®è§„æ¨¡é€‰æ‹©ç­–ç•¥**ï¼š

| é¡¹ç›®è§„æ¨¡ | **æ¨èé…ç½®** | **æ ¸å¿ƒåŠŸèƒ½** | **æ‰©å±•å»ºè®®** |
|---------|------------|-------------|-------------|
| **å°å‹é¡¹ç›®** | `å•æœºéƒ¨ç½²` | åŸºç¡€CI/CD | é‡ç‚¹å…³æ³¨æ˜“ç”¨æ€§ |
| **ä¸­å‹é¡¹ç›®** | `Master+2-3 Agent` | å¤šåˆ†æ”¯æµæ°´çº¿ | åŠ å¼ºä»£ç è´¨é‡æ£€æµ‹ |
| **å¤§å‹é¡¹ç›®** | `åˆ†å¸ƒå¼é›†ç¾¤` | ä¼ä¸šçº§å®‰å…¨+ç›‘æ§ | å®¹å™¨åŒ–+K8sé›†æˆ |

**ğŸ’¯ æœ€ä½³å®è·µæ¸…å•**ï¼š
- âœ… **Pipelineè„šæœ¬åŒ–**ï¼šæ‰€æœ‰æ„å»ºé€»è¾‘å†™å…¥Jenkinsfile
- âœ… **ç¯å¢ƒéš”ç¦»**ï¼šä½¿ç”¨Dockerç¡®ä¿æ„å»ºç¯å¢ƒä¸€è‡´æ€§
- âœ… **å®‰å…¨ç¬¬ä¸€**ï¼šé…ç½®RBACæƒé™å’Œå‡­æ®ç®¡ç†  
- âœ… **ç›‘æ§å‘Šè­¦**ï¼šå»ºç«‹å®Œå–„çš„æ„å»ºçŠ¶æ€é€šçŸ¥æœºåˆ¶
- âœ… **å®šæœŸç»´æŠ¤**ï¼šåŠæ—¶æ›´æ–°æ’ä»¶å’Œæ¸…ç†å†å²æ•°æ®

### 11.3 å¸¸è§é—®é¢˜è§£å†³


**âš ï¸ å…¸å‹é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ**ï¼š

```
ğŸ”§ æ€§èƒ½é—®é¢˜
â”œâ”€â”€ é—®é¢˜ï¼šæ„å»ºæ—¶é—´è¿‡é•¿
â”œâ”€â”€ åŸå› ï¼šå•ç‚¹æ‰§è¡Œã€èµ„æºä¸è¶³
â””â”€â”€ è§£å†³ï¼šå¢åŠ AgentèŠ‚ç‚¹ã€ä¼˜åŒ–Pipelineå¹¶è¡Œ

ğŸ”’ å®‰å…¨é—®é¢˜  
â”œâ”€â”€ é—®é¢˜ï¼šæƒé™ç®¡ç†æ··ä¹±
â”œâ”€â”€ åŸå› ï¼šç¼ºä¹è§’è‰²è§„åˆ’
â””â”€â”€ è§£å†³ï¼šè®¾è®¡RBACç­–ç•¥ã€å®šæœŸæƒé™å®¡æŸ¥

ğŸ“Š ç¨³å®šæ€§é—®é¢˜
â”œâ”€â”€ é—®é¢˜ï¼šæ„å»ºç»å¸¸å¤±è´¥
â”œâ”€â”€ åŸå› ï¼šç¯å¢ƒä¸ä¸€è‡´ã€ä¾èµ–å†²çª
â””â”€â”€ è§£å†³ï¼šDockeråŒ–æ„å»ºã€é”å®šä¾èµ–ç‰ˆæœ¬
```

### 11.4 å­¦ä¹ è¿›é˜¶è·¯å¾„


**ğŸ“ˆ æŠ€èƒ½å‘å±•è·¯çº¿**ï¼š
```
ğŸŸ¢ å…¥é—¨é˜¶æ®µ (1-2å‘¨)
â”œâ”€â”€ JenkinsåŸºç¡€å®‰è£…é…ç½®
â”œâ”€â”€ ç®€å•Pipelineç¼–å†™
â””â”€â”€ åŸºç¡€æ’ä»¶ä½¿ç”¨

ğŸŸ¡ è¿›é˜¶é˜¶æ®µ (1ä¸ªæœˆ)  
â”œâ”€â”€ å¤šåˆ†æ”¯æµæ°´çº¿é…ç½®
â”œâ”€â”€ åˆ†å¸ƒå¼æ„å»ºå®è·µ
â””â”€â”€ å®‰å…¨æƒé™é…ç½®

ğŸ”´ é«˜çº§é˜¶æ®µ (2-3ä¸ªæœˆ)
â”œâ”€â”€ ä¼ä¸šçº§æ¶æ„è®¾è®¡
â”œâ”€â”€ DevOpså·¥å…·é“¾é›†æˆ
â””â”€â”€ æ€§èƒ½ä¼˜åŒ–è°ƒä¼˜
```

**ğŸ’¡ å­¦ä¹ å»ºè®®**ï¼š
- ğŸ› ï¸ **åŠ¨æ‰‹å®è·µ**ï¼šæ­å»ºä¸ªäººJenkinsç¯å¢ƒè¿›è¡Œå®éªŒ
- ğŸ“š **æ¡ˆä¾‹å­¦ä¹ **ï¼šç ”ç©¶å¼€æºé¡¹ç›®çš„Jenkinsé…ç½®
- ğŸ¤ **ç¤¾åŒºå‚ä¸**ï¼šå…³æ³¨Jenkinså®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºæœ€ä½³å®è·µ
- ğŸ”„ **æŒç»­æ”¹è¿›**ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ä¸æ–­ä¼˜åŒ–å’Œå®Œå–„é…ç½®

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
Jenkinsè‡ªåŠ¨åŒ–ï¼ŒCI/CDä¸ç”¨æ€•
Pipelineè„šæœ¬åŒ–ï¼Œç‰ˆæœ¬ç®¡ç†ä½³  
å¤šåˆ†æ”¯èƒ½åŠ›å¼ºï¼ŒGit Flowé…åˆæ£’
åˆ†å¸ƒå¼æ¶æ„å¥½ï¼Œæ€§èƒ½æ‰©å±•é«˜
å®‰å…¨æƒé™ä¸¥ï¼Œä¼ä¸šåº”ç”¨å®‰
å·¥å…·é›†æˆå¹¿ï¼ŒDevOpsæ•ˆç‡å¼º
```