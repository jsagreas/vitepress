---
title: 2ã€é‡å®šå‘
---
## ğŸ“š ç›®å½•

1. [é‡å®šå‘åŸºç¡€æ¦‚å¿µ](#1-é‡å®šå‘åŸºç¡€æ¦‚å¿µ)
2. [è¾“å‡ºé‡å®šå‘è¯¦è§£](#2-è¾“å‡ºé‡å®šå‘è¯¦è§£)
3. [è¾“å…¥é‡å®šå‘è¯¦è§£](#3-è¾“å…¥é‡å®šå‘è¯¦è§£)
4. [é”™è¯¯é‡å®šå‘æ§åˆ¶](#4-é”™è¯¯é‡å®šå‘æ§åˆ¶)
5. [åˆå¹¶é‡å®šå‘æ“ä½œ](#5-åˆå¹¶é‡å®šå‘æ“ä½œ)
6. [ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶åº”ç”¨](#6-ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶åº”ç”¨)
7. [Here Document å’Œ Here String](#7-here-document-å’Œ-here-string)
8. [æ–‡ä»¶æè¿°ç¬¦é«˜çº§æ“ä½œ](#8-æ–‡ä»¶æè¿°ç¬¦é«˜çº§æ“ä½œ)
9. [å®é™…åº”ç”¨åœºæ™¯](#9-å®é™…åº”ç”¨åœºæ™¯)
10. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#10-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ é‡å®šå‘åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯é‡å®šå‘


**é‡å®šå‘çš„æœ¬è´¨**ï¼šæ”¹å˜ç¨‹åºè¾“å…¥è¾“å‡ºçš„é»˜è®¤å»å‘

```
æ­£å¸¸æƒ…å†µä¸‹çš„è¾“å…¥è¾“å‡ºæµå‘ï¼š
é”®ç›˜ â”€â”€è¾“å…¥â”€â”€> ç¨‹åº â”€â”€è¾“å‡ºâ”€â”€> å±å¹•
                    â”œâ”€â”€é”™è¯¯â”€â”€> å±å¹•

é‡å®šå‘åçš„æµå‘ï¼š
æ–‡ä»¶ â”€â”€è¾“å…¥â”€â”€> ç¨‹åº â”€â”€è¾“å‡ºâ”€â”€> æ–‡ä»¶
                    â”œâ”€â”€é”™è¯¯â”€â”€> æ–‡ä»¶
```

**ä¸ºä»€ä¹ˆéœ€è¦é‡å®šå‘**ï¼š
- ğŸ“ **ä¿å­˜è¾“å‡º**ï¼šå°†å‘½ä»¤ç»“æœä¿å­˜åˆ°æ–‡ä»¶ä¸­
- ğŸ” **æ‰¹é‡å¤„ç†**ï¼šä»æ–‡ä»¶ä¸­è¯»å–å¤§é‡è¾“å…¥æ•°æ®
- ğŸ“Š **æ—¥å¿—ç®¡ç†**ï¼šåˆ†åˆ«å¤„ç†æ­£å¸¸è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯
- ğŸ¯ **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šå®ç°æ— äººå€¼å®ˆçš„æ•°æ®å¤„ç†

### 1.2 ä¸‰ä¸ªæ ‡å‡†æµ


Shell ä¸­æ¯ä¸ªç¨‹åºéƒ½æœ‰ä¸‰ä¸ªæ ‡å‡†çš„æ•°æ®æµï¼š

| æµåç§° | æ–‡ä»¶æè¿°ç¬¦ | é»˜è®¤è®¾å¤‡ | ä½œç”¨è¯´æ˜ |
|--------|-----------|----------|----------|
| **æ ‡å‡†è¾“å…¥** | `0` (stdin) | é”®ç›˜ | ç¨‹åºä»è¿™é‡Œè¯»å–è¾“å…¥æ•°æ® |
| **æ ‡å‡†è¾“å‡º** | `1` (stdout) | å±å¹• | ç¨‹åºå‘è¿™é‡Œå†™å…¥æ­£å¸¸è¾“å‡º |
| **æ ‡å‡†é”™è¯¯** | `2` (stderr) | å±å¹• | ç¨‹åºå‘è¿™é‡Œå†™å…¥é”™è¯¯ä¿¡æ¯ |

> ğŸ’¡ **ç†è§£è¦ç‚¹**  
> æ–‡ä»¶æè¿°ç¬¦å°±åƒæ˜¯æ•°æ®æµçš„"é—¨ç‰Œå·"ï¼Œ0ã€1ã€2 æ˜¯ç³»ç»Ÿé¢„å®šä¹‰çš„ä¸‰ä¸ªåŸºæœ¬é—¨ç‰Œå·

---

## 2. ğŸ“¤ è¾“å‡ºé‡å®šå‘è¯¦è§£


### 2.1 åŸºç¡€è¾“å‡ºé‡å®šå‘


**è¦†ç›–é‡å®šå‘ `>`**ï¼šå°†è¾“å‡ºå†™å…¥æ–‡ä»¶ï¼Œè¦†ç›–åŸæœ‰å†…å®¹

```bash
# åŸºæœ¬è¯­æ³•
command > filename

# å®é™…ç¤ºä¾‹
echo "Hello World" > greeting.txt
ls -l > filelist.txt
date > current_time.txt
```

**æ‰§è¡Œè¿‡ç¨‹è§£é‡Š**ï¼š
1. Shell é¦–å…ˆåˆ›å»ºæˆ–æ¸…ç©º `greeting.txt` æ–‡ä»¶
2. å°† `echo` å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°è¯¥æ–‡ä»¶
3. åŸæœ¬åº”è¯¥æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å†…å®¹ç°åœ¨ä¿å­˜åœ¨æ–‡ä»¶ä¸­

**è¿½åŠ é‡å®šå‘ `>>`**ï¼šå°†è¾“å‡ºæ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œä¸è¦†ç›–åŸå†…å®¹

```bash
# åŸºæœ¬è¯­æ³•  
command >> filename

# å®é™…ç¤ºä¾‹
echo "ç¬¬ä¸€è¡Œ" > log.txt     # åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥
echo "ç¬¬äºŒè¡Œ" >> log.txt    # è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾
echo "ç¬¬ä¸‰è¡Œ" >> log.txt    # ç»§ç»­è¿½åŠ 
```

### 2.2 è¾“å‡ºé‡å®šå‘çš„å®é™…åº”ç”¨


**ç³»ç»Ÿç›‘æ§æ—¥å¿—è®°å½•**ï¼š

```bash
# è®°å½•ç³»ç»ŸçŠ¶æ€åˆ°æ—¥å¿—æ–‡ä»¶
date >> system_status.log
echo "=== CPUä½¿ç”¨æƒ…å†µ ===" >> system_status.log
top -n1 -b | head -15 >> system_status.log
echo "=== ç£ç›˜ä½¿ç”¨æƒ…å†µ ===" >> system_status.log
df -h >> system_status.log
```

**æ‰¹é‡æ–‡ä»¶æ“ä½œç»“æœä¿å­˜**ï¼š

```bash
# æ‰«æç›®å½•å¹¶ä¿å­˜ç»“æœ
find /home -name "*.txt" > txt_files.list
find /home -name "*.log" > log_files.list

# åˆå¹¶å¤šä¸ªæŸ¥æ‰¾ç»“æœ
cat txt_files.list log_files.list > all_files.list
```

### 2.3 è¾“å‡ºé‡å®šå‘çš„æ³¨æ„äº‹é¡¹


âš ï¸ **é‡è¦æé†’**ï¼š
- `>` æ“ä½œä¼š **ç«‹å³æ¸…ç©º** ç›®æ ‡æ–‡ä»¶ï¼Œå³ä½¿å‘½ä»¤æ‰§è¡Œå¤±è´¥
- ä¸è¦å¯¹æ­£åœ¨ä½¿ç”¨çš„é‡è¦æ–‡ä»¶ä½¿ç”¨ `>` é‡å®šå‘
- ä½¿ç”¨å‰ç¡®è®¤ç›®æ ‡æ–‡ä»¶è·¯å¾„å’Œæƒé™

```bash
# å±é™©ç¤ºä¾‹ï¼ˆä¸è¦è¿™æ ·åšï¼‰
important_command > important_file.txt  # å¦‚æœå‘½ä»¤å¤±è´¥ï¼Œæ–‡ä»¶å†…å®¹ä¸¢å¤±

# å®‰å…¨åšæ³•
important_command > temp_file.txt && mv temp_file.txt important_file.txt
```

---

## 3. ğŸ“¥ è¾“å…¥é‡å®šå‘è¯¦è§£


### 3.1 åŸºç¡€è¾“å…¥é‡å®šå‘


**è¾“å…¥é‡å®šå‘ `<`**ï¼šè®©ç¨‹åºä»æ–‡ä»¶è¯»å–è¾“å…¥ï¼Œè€Œä¸æ˜¯ä»é”®ç›˜

```bash
# åŸºæœ¬è¯­æ³•
command < filename

# å®é™…ç¤ºä¾‹
wc -l < /etc/passwd        # ç»Ÿè®¡passwdæ–‡ä»¶è¡Œæ•°
sort < names.txt           # å¯¹names.txtå†…å®¹æ’åº
mail user@domain.com < message.txt  # å‘é€é‚®ä»¶å†…å®¹
```

**å·¥ä½œåŸç†**ï¼š
```
æ­£å¸¸æƒ…å†µï¼š
é”®ç›˜è¾“å…¥ â†’ wc -l â†’ æ˜¾ç¤ºè¡Œæ•°

é‡å®šå‘åï¼š
æ–‡ä»¶å†…å®¹ â†’ wc -l â†’ æ˜¾ç¤ºè¡Œæ•°
```

### 3.2 è¾“å…¥é‡å®šå‘çš„å…¸å‹åº”ç”¨


**æ‰¹é‡æ•°æ®å¤„ç†**ï¼š

```bash
# å‡†å¤‡æ•°æ®æ–‡ä»¶
cat > numbers.txt << EOF
45
23
67
12
89
EOF

# ä½¿ç”¨è¾“å…¥é‡å®šå‘è¿›è¡Œæ’åº
sort -n < numbers.txt           # æ•°å­—æ’åº
sort -rn < numbers.txt          # å€’åºæ’åº
```

**é…ç½®æ–‡ä»¶è‡ªåŠ¨åŒ–å¤„ç†**ï¼š

```bash
# ä»é…ç½®æ–‡ä»¶è¯»å–æœåŠ¡å™¨åˆ—è¡¨è¿›è¡Œæ‰¹å¤„ç†
while read server; do
    ping -c1 $server
done < server_list.txt
```

### 3.3 è¾“å…¥è¾“å‡ºç»„åˆä½¿ç”¨


å¯ä»¥åŒæ—¶ä½¿ç”¨è¾“å…¥å’Œè¾“å‡ºé‡å®šå‘ï¼š

```bash
# ä»input.txtè¯»å–ï¼Œå¤„ç†åè¾“å‡ºåˆ°output.txt
sort < input.txt > output.txt

# æ›´å¤æ‚çš„ç»„åˆï¼šè¯»å–â†’å¤„ç†â†’ä¿å­˜
grep "ERROR" < /var/log/system.log > error_summary.txt
wc -l < /etc/passwd > user_count.txt
```

---

## 4. âŒ é”™è¯¯é‡å®šå‘æ§åˆ¶


### 4.1 ä¸ºä»€ä¹ˆéœ€è¦é”™è¯¯é‡å®šå‘


**é—®é¢˜åœºæ™¯**ï¼š
```bash
ls /exist_dir /not_exist_dir > result.txt
# ç»“æœï¼š
# - æ­£å¸¸è¾“å‡ºå†™å…¥result.txt  
# - é”™è¯¯ä¿¡æ¯ä»ç„¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Š
```

**é”™è¯¯é‡å®šå‘çš„ä½œç”¨**ï¼š
- ğŸ¯ **åˆ†ç¦»å¤„ç†**ï¼šå°†é”™è¯¯ä¿¡æ¯å’Œæ­£å¸¸è¾“å‡ºåˆ†å¼€å¤„ç†
- ğŸ“ **é”™è¯¯æ—¥å¿—**ï¼šä¸“é—¨è®°å½•ç¨‹åºè¿è¡Œä¸­çš„é”™è¯¯
- ğŸ”‡ **é™é»˜è¿è¡Œ**ï¼šéšè—é”™è¯¯ä¿¡æ¯ï¼Œå®ç°"å®‰é™"æ‰§è¡Œ

### 4.2 é”™è¯¯é‡å®šå‘æ“ä½œç¬¦


**æ ‡å‡†é”™è¯¯é‡å®šå‘ `2>`**ï¼š

```bash
# åŸºæœ¬è¯­æ³•
command 2> error_file

# å®é™…ç¤ºä¾‹
ls /not_exist_dir 2> error.log        # é”™è¯¯ä¿¡æ¯å†™å…¥error.log
find / -name "*.txt" 2> /dev/null      # å¿½ç•¥æƒé™é”™è¯¯
cp source.txt backup/ 2> copy_errors.txt
```

**æ ‡å‡†é”™è¯¯è¿½åŠ  `2>>`**ï¼š

```bash
# æŒç»­è®°å½•é”™è¯¯æ—¥å¿—
backup_script.sh 2>> daily_errors.log
cron_job.sh 2>> /var/log/cron_errors.log
```

### 4.3 å®Œå…¨åˆ†ç¦»è¾“å‡ºå’Œé”™è¯¯


**åŒæ—¶é‡å®šå‘è¾“å‡ºå’Œé”™è¯¯åˆ°ä¸åŒæ–‡ä»¶**ï¼š

```bash
# è¯­æ³•æ ¼å¼
command > output.txt 2> error.txt

# å®é™…åº”ç”¨
find /home -name "*.tmp" > found_files.txt 2> search_errors.txt
wget https://example.com/file.zip > download.log 2> download_errors.log
```

**æ‰§è¡Œæµç¨‹å›¾ç¤º**ï¼š
```
ç¨‹åºæ‰§è¡Œ
    â”œâ”€æ­£å¸¸è¾“å‡º(stdout) â”€â”€> output.txt
    â””â”€é”™è¯¯ä¿¡æ¯(stderr) â”€â”€> error.txt
```

---

## 5. ğŸ”€ åˆå¹¶é‡å®šå‘æ“ä½œ


### 5.1 åˆå¹¶è¾“å‡ºå’Œé”™è¯¯æµ


**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `&>`**

```bash
# å°†stdoutå’Œstderréƒ½é‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶
command &> all_output.txt

# å®é™…ç¤ºä¾‹
./my_script.sh &> script_log.txt
make install &> install_log.txt
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ `2>&1`**

```bash
# å°†stderré‡å®šå‘åˆ°stdoutçš„ä½ç½®
command > all_output.txt 2>&1

# å®é™…ç¤ºä¾‹
./backup.sh > backup.log 2>&1
gcc program.c > compile.log 2>&1
```

### 5.2 `2>&1` çš„å·¥ä½œåŸç†


**é‡è¦æ¦‚å¿µ**ï¼š`&1` è¡¨ç¤º"æ–‡ä»¶æè¿°ç¬¦1çš„å½“å‰ä½ç½®"

```bash
# é¡ºåºå¾ˆé‡è¦ï¼
command > file.txt 2>&1    # âœ… æ­£ç¡®ï¼šå…ˆé‡å®šå‘stdoutï¼Œå†è®©stderrè·Ÿéš
command 2>&1 > file.txt    # âŒ é”™è¯¯ï¼šstderrå…ˆæŒ‡å‘å±å¹•ï¼Œstdoutåé‡å®šå‘
```

**æ‰§è¡Œé¡ºåºè§£æ**ï¼š
1. `> file.txt`ï¼šå°†stdouté‡å®šå‘åˆ°file.txt
2. `2>&1`ï¼šå°†stderré‡å®šå‘åˆ°stdoutçš„å½“å‰ä½ç½®ï¼ˆå³file.txtï¼‰

### 5.3 åˆå¹¶é‡å®šå‘çš„å®ç”¨åœºæ™¯


**è„šæœ¬æ—¥å¿—è®°å½•**ï¼š

```bash
#!/bin/bash
# è„šæœ¬å¼€å§‹å°±é‡å®šå‘æ‰€æœ‰è¾“å‡º
exec > /var/log/myscript.log 2>&1

echo "è„šæœ¬å¼€å§‹æ‰§è¡Œ"
ls /not_exist_dir    # é”™è¯¯ä¹Ÿä¼šè®°å½•åˆ°æ—¥å¿—
echo "è„šæœ¬æ‰§è¡Œå®Œæˆ"
```

**å®šæ—¶ä»»åŠ¡é™é»˜æ‰§è¡Œ**ï¼š

```bash
# crontabä¸­çš„é™é»˜ä»»åŠ¡
0 2 * * * /path/to/backup.sh > /var/log/backup.log 2>&1
30 1 * * * /path/to/cleanup.sh &> /dev/null
```

---

## 6. ğŸ•³ï¸ ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶åº”ç”¨


### 6.1 `/dev/null` - æ•°æ®é»‘æ´


**ä»€ä¹ˆæ˜¯ `/dev/null`**ï¼š
- ğŸ“› **åˆ«å**ï¼šä½æ¡¶ã€æ•°æ®é»‘æ´ã€ç©ºè®¾å¤‡æ–‡ä»¶
- ğŸ¯ **ä½œç”¨**ï¼šåå™¬æ‰€æœ‰å†™å…¥çš„æ•°æ®ï¼Œè¯»å–æ—¶è¿”å›EOF
- ğŸ’¡ **æ¯”å–»**ï¼šå°±åƒä¸€ä¸ªæ— åº•æ´ï¼Œæ‰”è¿›å»çš„ä¸œè¥¿éƒ½æ¶ˆå¤±äº†

**åŸºæœ¬ä½¿ç”¨**ï¼š

```bash
# ä¸¢å¼ƒæ ‡å‡†è¾“å‡º
command > /dev/null

# ä¸¢å¼ƒæ ‡å‡†é”™è¯¯
command 2> /dev/null  

# ä¸¢å¼ƒæ‰€æœ‰è¾“å‡º
command &> /dev/null
```

### 6.2 `/dev/null` çš„å®é™…åº”ç”¨


**é™é»˜æ‰§è¡Œå‘½ä»¤**ï¼š

```bash
# åªå…³å¿ƒå‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œä¸å…³å¿ƒè¾“å‡ºå†…å®¹
if ping -c1 google.com > /dev/null 2>&1; then
    echo "ç½‘ç»œè¿æ¥æ­£å¸¸"
else
    echo "ç½‘ç»œè¿æ¥å¼‚å¸¸"
fi
```

**æ¸…ç©ºæ–‡ä»¶å†…å®¹**ï¼š

```bash
# å¿«é€Ÿæ¸…ç©ºå¤§æ–‡ä»¶ï¼ˆæ¯”rm + touchæ›´é«˜æ•ˆï¼‰
> large_log_file.log           # ç­‰åŒäº cat /dev/null > large_log_file.log
cp /dev/null huge_file.txt     # å¦ä¸€ç§æ¸…ç©ºæ–¹å¼
```

**è¿‡æ»¤å™ªéŸ³è¾“å‡º**ï¼š

```bash
# åªæ˜¾ç¤ºgrepçš„ç»“æœï¼Œå¿½ç•¥findçš„æƒé™é”™è¯¯
find / -name "*.conf" 2>/dev/null | grep -i apache

# åªå…³æ³¨è„šæœ¬çš„ä¸»è¦è¾“å‡ºï¼Œéšè—è°ƒè¯•ä¿¡æ¯
./debug_script.sh 2>/dev/null
```

### 6.3 å…¶ä»–ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶


**`/dev/zero`**ï¼šäº§ç”Ÿæ— é™çš„nullå­—ç¬¦

```bash
# åˆ›å»ºæŒ‡å®šå¤§å°çš„ç©ºæ–‡ä»¶
dd if=/dev/zero of=10mb_file.dat bs=1M count=10

# æµ‹è¯•ç¡¬ç›˜å†™å…¥æ€§èƒ½
dd if=/dev/zero of=/tmp/test bs=1G count=1
```

---

## 7. ğŸ“„ Here Document å’Œ Here String


### 7.1 Here Document (`<<`)


**åŸºæœ¬æ¦‚å¿µ**ï¼šå…è®¸åœ¨è„šæœ¬ä¸­åµŒå…¥å¤šè¡Œæ–‡æœ¬ä½œä¸ºå‘½ä»¤è¾“å…¥

**åŸºç¡€è¯­æ³•**ï¼š

```bash
command << DELIMITER
å¤šè¡Œæ–‡æœ¬å†…å®¹
å¯ä»¥åŒ…å«å˜é‡ $variable
å¯ä»¥åŒ…å«å‘½ä»¤ $(date)
DELIMITER
```

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cat << EOF > config.txt
# ç³»ç»Ÿé…ç½®æ–‡ä»¶
server_name=$(hostname)
current_time=$(date)
user_count=$(who | wc -l)
EOF

# å‘é€é‚®ä»¶
mail user@example.com << EMAIL_END
Subject: ç³»ç»ŸæŠ¥å‘Š

äº²çˆ±çš„ç®¡ç†å‘˜ï¼Œ

å½“å‰ç³»ç»ŸçŠ¶æ€ï¼š
- æœåŠ¡å™¨ï¼š$(hostname)  
- æ—¶é—´ï¼š$(date)
- è´Ÿè½½ï¼š$(uptime)

ç¥å¥½ï¼
ç³»ç»Ÿç›‘æ§
EMAIL_END
```

### 7.2 Here Document é«˜çº§ç”¨æ³•


**ç¦ç”¨å˜é‡æ›¿æ¢ (`<<'EOF'`)**ï¼š

```bash
# å•å¼•å·åŒ…å›´åˆ†éš”ç¬¦ï¼Œç¦ç”¨å˜é‡å’Œå‘½ä»¤æ›¿æ¢
cat << 'CONFIG'
server_name=$hostname    # è¿™é‡Œçš„$hostnameä¸ä¼šè¢«æ›¿æ¢
current_time=$(date)     # è¿™é‡Œçš„$(date)ä¸ä¼šè¢«æ‰§è¡Œ
CONFIG
```

**å¿½ç•¥å‰å¯¼åˆ¶è¡¨ç¬¦ (`<<-EOF`)**ï¼š

```bash
# ä½¿ç”¨<<-å¯ä»¥å¿½ç•¥è¡Œé¦–çš„åˆ¶è¡¨ç¬¦ï¼Œæ–¹ä¾¿ä»£ç ç¼©è¿›
if [ "$condition" = "true" ]; then
    cat <<- INDENT
    	è¿™è¡Œå‰é¢æœ‰åˆ¶è¡¨ç¬¦
    	ä½†ä¼šè¢«å¿½ç•¥ï¼Œè¾“å‡ºæ—¶ä¸åŒ…å«å‰å¯¼åˆ¶è¡¨ç¬¦
    INDENT
fi
```

### 7.3 Here String (`<<<`)


**åŸºæœ¬æ¦‚å¿µ**ï¼šå°†å­—ç¬¦ä¸²ä½œä¸ºå‘½ä»¤çš„è¾“å…¥ï¼Œæ¯”Here Documentæ›´ç®€æ´

**è¯­æ³•å’Œåº”ç”¨**ï¼š

```bash
# åŸºæœ¬è¯­æ³•
command <<< "string content"

# å®é™…ç¤ºä¾‹
wc -w <<< "Hello World Shell Script"    # è¾“å‡ºï¼š4ï¼ˆå•è¯æ•°ï¼‰
grep "error" <<< "This is an error message"
sort <<< "$(ls -1)"                     # å¯¹lsè¾“å‡ºè¿›è¡Œæ’åº

# å˜é‡ä½¿ç”¨
message="Hello World"
wc -c <<< "$message"                    # è®¡ç®—å­—ç¬¦æ•°
```

**Here String vs Here Document å¯¹æ¯”**ï¼š

| ç‰¹æ€§ | Here Document | Here String |
|------|---------------|-------------|
| **è¯­æ³•** | `<< DELIMITER` | `<<< "string"` |
| **é€‚ç”¨åœºæ™¯** | å¤šè¡Œæ–‡æœ¬ | å•è¡Œæˆ–å˜é‡å†…å®¹ |
| **ä»£ç ç®€æ´æ€§** | è¾ƒå¤æ‚ | ç®€æ´æ˜äº† |
| **å˜é‡æ›¿æ¢** | æ”¯æŒ | æ”¯æŒ |

---

## 8. ğŸ”§ æ–‡ä»¶æè¿°ç¬¦é«˜çº§æ“ä½œ


### 8.1 ä»€ä¹ˆæ˜¯æ–‡ä»¶æè¿°ç¬¦


**æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptorï¼‰**ï¼š
- ğŸ¯ **å®šä¹‰**ï¼šæ˜¯ç³»ç»Ÿä¸ºæ¯ä¸ªæ‰“å¼€æ–‡ä»¶åˆ†é…çš„æ•°å­—æ ‡è¯†
- ğŸ“‹ **èŒƒå›´**ï¼šé€šå¸¸æ˜¯éè´Ÿæ•´æ•°ï¼Œä»0å¼€å§‹
- ğŸ”— **ä½œç”¨**ï¼šç¨‹åºé€šè¿‡æ–‡ä»¶æè¿°ç¬¦æ¥è®¿é—®æ–‡ä»¶æˆ–è®¾å¤‡

**ç³»ç»Ÿé¢„å®šä¹‰çš„æ–‡ä»¶æè¿°ç¬¦**ï¼š
```
0 (stdin)  â† æ ‡å‡†è¾“å…¥ï¼Œé»˜è®¤è¿æ¥é”®ç›˜
1 (stdout) â† æ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤è¿æ¥å±å¹•  
2 (stderr) â† æ ‡å‡†é”™è¯¯ï¼Œé»˜è®¤è¿æ¥å±å¹•
3-9       â† å¯ä¾›ç”¨æˆ·è‡ªå®šä¹‰ä½¿ç”¨
```

### 8.2 exec å‘½ä»¤çš„æ–‡ä»¶æè¿°ç¬¦æ“ä½œ


**`exec` å‘½ä»¤çš„ä½œç”¨**ï¼š
- ğŸ“ **é‡å®šå‘æ•´ä¸ªè„šæœ¬**ï¼šæ”¹å˜å½“å‰shellçš„è¾“å…¥è¾“å‡º
- ğŸ”§ **æ‰“å¼€è‡ªå®šä¹‰æ–‡ä»¶æè¿°ç¬¦**ï¼šåˆ›å»ºæ–°çš„æ•°æ®é€šé“
- ğŸ”’ **å…³é—­æ–‡ä»¶æè¿°ç¬¦**ï¼šé‡Šæ”¾ç³»ç»Ÿèµ„æº

**åŸºæœ¬æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘**ï¼š

```bash
#!/bin/bash
# é‡å®šå‘è„šæœ¬çš„æ‰€æœ‰è¾“å‡ºåˆ°æ–‡ä»¶
exec > /var/log/script.log 2>&1

echo "è¿™äº›å†…å®¹éƒ½ä¼šå†™å…¥æ—¥å¿—æ–‡ä»¶"
ls /not_exist_dir    # é”™è¯¯ä¿¡æ¯ä¹Ÿä¼šå†™å…¥æ—¥å¿—
echo "è„šæœ¬æ‰§è¡Œå®Œæˆ"
```

**è‡ªå®šä¹‰æ–‡ä»¶æè¿°ç¬¦**ï¼š

```bash
#!/bin/bash
# æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦3ç”¨äºå†™å…¥æ—¥å¿—
exec 3> /var/log/custom.log

# æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦4ç”¨äºå†™å…¥é”™è¯¯
exec 4> /var/log/error.log

# ä½¿ç”¨è‡ªå®šä¹‰æ–‡ä»¶æè¿°ç¬¦
echo "æ­£å¸¸æ—¥å¿—ä¿¡æ¯" >&3
echo "é”™è¯¯ä¿¡æ¯" >&4

# å…³é—­æ–‡ä»¶æè¿°ç¬¦
exec 3>&-
exec 4>&-
```

### 8.3 æ–‡ä»¶æè¿°ç¬¦çš„å®ç”¨æŠ€å·§


**å¤‡ä»½å’Œæ¢å¤æ ‡å‡†è¾“å‡º**ï¼š

```bash
#!/bin/bash
# å¤‡ä»½åŸå§‹stdoutåˆ°æ–‡ä»¶æè¿°ç¬¦6
exec 6>&1

# å°†stdouté‡å®šå‘åˆ°æ–‡ä»¶
exec > /tmp/output.log

echo "è¿™äº›å†…å®¹å†™å…¥æ–‡ä»¶"
ls -la

# æ¢å¤åŸå§‹stdout
exec 1>&6
exec 6>&-

echo "è¿™äº›å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Š"
```

**åŒæ—¶å†™å…¥æ–‡ä»¶å’Œå±å¹•**ï¼š

```bash
#!/bin/bash
# åˆ›å»ºä¸€ä¸ªç®¡é“åˆ°teeå‘½ä»¤
exec 3> >(tee /var/log/script.log)

# å°†stdouté‡å®šå‘åˆ°ç®¡é“
exec 1>&3

echo "è¿™è¡Œä¼šåŒæ—¶æ˜¾ç¤ºåœ¨å±å¹•å’Œä¿å­˜åˆ°æ–‡ä»¶"
date
ls -la
```

### 8.4 æ–‡ä»¶æè¿°ç¬¦æ“ä½œæ€»ç»“è¡¨


| æ“ä½œ | è¯­æ³• | è¯´æ˜ |
|------|------|------|
| **æ‰“å¼€æ–‡ä»¶ç”¨äºå†™å…¥** | `exec 3> file` | æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦3å†™å…¥æ–‡ä»¶ |
| **æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å–** | `exec 4< file` | æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦4è¯»å–æ–‡ä»¶ |
| **å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦** | `exec 5>&1` | å¤åˆ¶stdoutåˆ°æ–‡ä»¶æè¿°ç¬¦5 |
| **å…³é—­æ–‡ä»¶æè¿°ç¬¦** | `exec 3>&-` | å…³é—­æ–‡ä»¶æè¿°ç¬¦3 |
| **é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦** | `echo "msg" >&3` | å°†è¾“å‡ºå†™å…¥æ–‡ä»¶æè¿°ç¬¦3 |

---

## 9. ğŸš€ å®é™…åº”ç”¨åœºæ™¯


### 9.1 æ—¥å¿—ç®¡ç†è‡ªåŠ¨åŒ–


**åˆ†çº§æ—¥å¿—è®°å½•ç³»ç»Ÿ**ï¼š

```bash
#!/bin/bash
# æ—¥å¿—ç®¡ç†è„šæœ¬

# è®¾ç½®æ—¥å¿—æ–‡ä»¶
LOG_DIR="/var/log/myapp"
mkdir -p "$LOG_DIR"

# æ‰“å¼€ä¸åŒçº§åˆ«çš„æ—¥å¿—æ–‡ä»¶æè¿°ç¬¦
exec 3>> "$LOG_DIR/info.log"      # ä¿¡æ¯æ—¥å¿—
exec 4>> "$LOG_DIR/warning.log"   # è­¦å‘Šæ—¥å¿—  
exec 5>> "$LOG_DIR/error.log"     # é”™è¯¯æ—¥å¿—

# æ—¥å¿—å‡½æ•°
log_info() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] INFO: $1" >&3
}

log_warning() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] WARNING: $1" >&4
}

log_error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $1" >&5
}

# ä½¿ç”¨ç¤ºä¾‹
log_info "è„šæœ¬å¼€å§‹æ‰§è¡Œ"
log_warning "å‘ç°é…ç½®æ–‡ä»¶ç¼ºå¤±ï¼Œä½¿ç”¨é»˜è®¤é…ç½®"
log_error "æ•°æ®åº“è¿æ¥å¤±è´¥"

# å…³é—­æ—¥å¿—æ–‡ä»¶æè¿°ç¬¦
exec 3>&- 4>&- 5>&-
```

### 9.2 ç³»ç»Ÿç›‘æ§è„šæœ¬


**èµ„æºç›‘æ§å’ŒæŠ¥å‘Š**ï¼š

```bash
#!/bin/bash
# ç³»ç»Ÿç›‘æ§è„šæœ¬ï¼Œç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

REPORT_FILE="/tmp/system_report_$(date +%Y%m%d_%H%M%S).txt"

# é‡å®šå‘æ‰€æœ‰è¾“å‡ºåˆ°æŠ¥å‘Šæ–‡ä»¶
exec > "$REPORT_FILE" 2>&1

cat << HEADER
===============================================
ç³»ç»Ÿç›‘æ§æŠ¥å‘Š
ç”Ÿæˆæ—¶é—´: $(date)
ä¸»æœºåç§°: $(hostname)
===============================================

HEADER

echo "=== CPUä½¿ç”¨ç‡ ==="
top -bn1 | head -5

echo -e "\n=== å†…å­˜ä½¿ç”¨æƒ…å†µ ==="
free -h

echo -e "\n=== ç£ç›˜ä½¿ç”¨æƒ…å†µ ==="
df -h

echo -e "\n=== ç½‘ç»œè¿æ¥çŠ¶æ€ ==="
netstat -tuln 2>/dev/null | head -10

echo -e "\n=== ç³»ç»Ÿè¿›ç¨‹ TOP10 ==="
ps aux --sort=-%cpu | head -11

echo -e "\n=== æŠ¥å‘Šç”Ÿæˆå®Œæˆ ==="

# æ¢å¤æ ‡å‡†è¾“å‡ºå¹¶æ˜¾ç¤ºå®Œæˆä¿¡æ¯
exec 1>/dev/tty
echo "ç³»ç»ŸæŠ¥å‘Šå·²ç”Ÿæˆ: $REPORT_FILE"
```

### 9.3 æ‰¹é‡æ•°æ®å¤„ç†


**æ–‡ä»¶æ‰¹é‡è½¬æ¢å’Œç»Ÿè®¡**ï¼š

```bash
#!/bin/bash
# æ‰¹é‡å¤„ç†æ—¥å¿—æ–‡ä»¶

INPUT_DIR="/var/log/apache"
OUTPUT_DIR="/tmp/processed_logs"
mkdir -p "$OUTPUT_DIR"

# å¤„ç†æˆåŠŸå’Œå¤±è´¥çš„ç»Ÿè®¡
exec 3> "$OUTPUT_DIR/success.log"
exec 4> "$OUTPUT_DIR/failed.log"

processed=0
failed=0

for logfile in "$INPUT_DIR"/*.log; do
    if [ -f "$logfile" ]; then
        filename=$(basename "$logfile")
        output_file="$OUTPUT_DIR/processed_$filename"
        
        # æå–ERRORè¡Œå¹¶ç»Ÿè®¡
        if grep "ERROR" "$logfile" > "$output_file" 2>/dev/null; then
            echo "$(date): æˆåŠŸå¤„ç† $filename" >&3
            ((processed++))
        else
            echo "$(date): å¤„ç†å¤±è´¥ $filename" >&4
            ((failed++))
        fi
    fi
done

# ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š
cat << SUMMARY > "$OUTPUT_DIR/summary.txt"
æ‰¹é‡å¤„ç†ç»Ÿè®¡æŠ¥å‘Š
================
å¤„ç†æ—¶é—´: $(date)
æˆåŠŸå¤„ç†: $processed ä¸ªæ–‡ä»¶
å¤„ç†å¤±è´¥: $failed ä¸ªæ–‡ä»¶
æ€»è®¡æ–‡ä»¶: $((processed + failed)) ä¸ª
SUMMARY

echo "æ‰¹é‡å¤„ç†å®Œæˆï¼ŒæŸ¥çœ‹ç»Ÿè®¡: $OUTPUT_DIR/summary.txt"

# å…³é—­æ–‡ä»¶æè¿°ç¬¦
exec 3>&- 4>&-
```

---

## 10. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 10.1 é‡å®šå‘æ“ä½œç¬¦é€ŸæŸ¥è¡¨


| æ“ä½œç¬¦ | ä½œç”¨ | ç¤ºä¾‹ | è¯´æ˜ |
|--------|------|------|------|
| `>` | è¾“å‡ºé‡å®šå‘ï¼ˆè¦†ç›–ï¼‰ | `ls > files.txt` | è¦†ç›–æ–‡ä»¶å†…å®¹ |
| `>>` | è¾“å‡ºé‡å®šå‘ï¼ˆè¿½åŠ ï¼‰ | `date >> log.txt` | è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ |
| `<` | è¾“å…¥é‡å®šå‘ | `sort < data.txt` | ä»æ–‡ä»¶è¯»å–è¾“å…¥ |
| `2>` | é”™è¯¯é‡å®šå‘ï¼ˆè¦†ç›–ï¼‰ | `cmd 2> err.log` | é‡å®šå‘é”™è¯¯è¾“å‡º |
| `2>>` | é”™è¯¯é‡å®šå‘ï¼ˆè¿½åŠ ï¼‰ | `cmd 2>> err.log` | è¿½åŠ é”™è¯¯è¾“å‡º |
| `&>` | åˆå¹¶é‡å®šå‘ | `cmd &> all.log` | è¾“å‡ºå’Œé”™è¯¯éƒ½é‡å®šå‘ |
| `2>&1` | é”™è¯¯è·Ÿéšè¾“å‡º | `cmd > log 2>&1` | é”™è¯¯é‡å®šå‘åˆ°è¾“å‡ºä½ç½® |
| `<<` | Here Document | `cat << EOF` | åµŒå…¥å¤šè¡Œæ–‡æœ¬ |
| `<<<` | Here String | `wc <<< "$var"` | å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥ |

### 10.2 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


**ğŸ”¸ ä¸‰ä¸ªæ ‡å‡†æµ**ï¼š
- stdin(0)ï¼šæ ‡å‡†è¾“å…¥ï¼Œé»˜è®¤é”®ç›˜
- stdout(1)ï¼šæ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤å±å¹•  
- stderr(2)ï¼šæ ‡å‡†é”™è¯¯ï¼Œé»˜è®¤å±å¹•

**ğŸ”¸ é‡å®šå‘çš„æœ¬è´¨**ï¼š
- æ”¹å˜ç¨‹åºæ•°æ®æµçš„å»å‘
- ä¸æ˜¯ç§»åŠ¨æ•°æ®ï¼Œè€Œæ˜¯æ”¹å˜"æ°´ç®¡"çš„è¿æ¥

**ğŸ”¸ æ–‡ä»¶æè¿°ç¬¦**ï¼š
- ç³»ç»Ÿä¸ºæ¯ä¸ªæ‰“å¼€æ–‡ä»¶åˆ†é…çš„æ•°å­—ID
- 0-2æ˜¯é¢„å®šä¹‰çš„ï¼Œ3-9å¯è‡ªå®šä¹‰ä½¿ç”¨

### 10.3 å®ç”¨è®°å¿†æŠ€å·§


**ğŸ”¸ é‡å®šå‘æ–¹å‘è®°å¿†**ï¼š
```bash
# ç®­å¤´æ–¹å‘è¡¨ç¤ºæ•°æ®æµå‘
program > file    # æ•°æ®ä»ç¨‹åºæµå‘æ–‡ä»¶ï¼ˆè¾“å‡ºï¼‰
program < file    # æ•°æ®ä»æ–‡ä»¶æµå‘ç¨‹åºï¼ˆè¾“å…¥ï¼‰
```

**ğŸ”¸ æ•°å­—å«ä¹‰è®°å¿†**ï¼š
- `1>` ç­‰ä»·äº `>`ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
- `2>` ä¸“é—¨å¤„ç†é”™è¯¯è¾“å‡º
- `&1` è¡¨ç¤º"æ ‡å‡†è¾“å‡ºçš„å½“å‰ä½ç½®"

**ğŸ”¸ å¸¸ç”¨ç»„åˆæ¨¡å¼**ï¼š
```bash
# é™é»˜æ‰§è¡Œï¼ˆæœ€å¸¸ç”¨ï¼‰
command > /dev/null 2>&1

# åˆ†åˆ«ä¿å­˜è¾“å‡ºå’Œé”™è¯¯
command > output.log 2> error.log

# æ‰€æœ‰è¾“å‡ºä¿å­˜åˆ°åŒä¸€æ–‡ä»¶
command &> all.log
```

### 10.4 æœ€ä½³å®è·µå»ºè®®


**âœ… æ¨èåšæ³•**ï¼š
- è„šæœ¬ä¸­ä½¿ç”¨ `exec` ç»Ÿä¸€é‡å®šå‘æ•´ä¸ªè„šæœ¬è¾“å‡º
- é‡è¦æ“ä½œå‰å…ˆæµ‹è¯•é‡å®šå‘ç›®æ ‡è·¯å¾„å’Œæƒé™
- ä½¿ç”¨ `/dev/null` ä¸¢å¼ƒä¸éœ€è¦çš„è¾“å‡º
- é•¿æœŸè¿è¡Œè„šæœ¬ä½¿ç”¨è¿½åŠ æ¨¡å¼ `>>` é¿å…æ—¥å¿—ä¸¢å¤±

**âŒ é¿å…é”™è¯¯**ï¼š
- ä¸è¦å¯¹é‡è¦æ–‡ä»¶ç›´æ¥ä½¿ç”¨ `>` è¦†ç›–
- æ³¨æ„ `2>&1` çš„é¡ºåºï¼Œå¿…é¡»æ”¾åœ¨è¾“å‡ºé‡å®šå‘ä¹‹å
- ä¸è¦å¿˜è®°å…³é—­è‡ªå®šä¹‰çš„æ–‡ä»¶æè¿°ç¬¦
- é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹æ‰“å¼€å…³é—­æ–‡ä»¶æè¿°ç¬¦

### 10.5 æ•…éšœæ’é™¤æŒ‡å—


**å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ**ï¼š

| é—®é¢˜ç°è±¡ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ³• |
|---------|----------|----------|
| é‡å®šå‘åæ–‡ä»¶ä¸ºç©º | å‘½ä»¤æ‰§è¡Œå¤±è´¥ä½†æ–‡ä»¶å·²æ¸…ç©º | ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æˆ–æµ‹è¯•å‘½ä»¤ |
| é”™è¯¯ä¿¡æ¯ä»æ˜¾ç¤ºåœ¨å±å¹• | åªé‡å®šå‘äº†stdoutï¼Œæœªå¤„ç†stderr | æ·»åŠ  `2>` æˆ– `2>&1` |
| Here Documentä¸å·¥ä½œ | ç»“æŸæ ‡è¯†ç¬¦å‰æœ‰ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ | ç¡®ä¿ç»“æŸæ ‡è¯†ç¬¦ç‹¬å ä¸€è¡Œ |
| æƒé™æ‹’ç»é”™è¯¯ | ç›®æ ‡ç›®å½•æˆ–æ–‡ä»¶æƒé™ä¸è¶³ | æ£€æŸ¥å¹¶ä¿®æ”¹æƒé™æˆ–æ›´æ”¹ç›®æ ‡è·¯å¾„ |

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- é‡å®šå‘æ”¹å˜æ•°æ®æµå‘ï¼Œç®­å¤´æŒ‡ç¤ºæ–¹å‘æ¸…æ¥š
- è¾“å‡ºç”¨>ï¼Œè¾“å…¥ç”¨<ï¼Œé”™è¯¯è¦åŠ 2åœ¨å‰å¤´
- /dev/nullæ˜¯é»‘æ´ï¼Œä¸è¦çš„è¾“å‡ºå¾€é‡Œä¸¢
- Here DocumentåµŒæ–‡æœ¬ï¼ŒHere Stringå˜é‡æŠ•
- æè¿°ç¬¦æ•°å­—é—¨ç‰Œå·ï¼Œexecå‘½ä»¤æ¥æ“æ§