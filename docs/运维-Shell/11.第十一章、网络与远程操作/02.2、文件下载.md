---
title: 2、文件下载
---
## 📚 目录

1. [文件下载基础概念](#1-文件下载基础概念)
2. [wget文件下载神器](#2-wget文件下载神器)
3. [curl数据传输工具](#3-curl数据传输工具)
4. [下载工具对比选择](#4-下载工具对比选择)
5. [高级下载技巧](#5-高级下载技巧)
6. [核心要点总结](#6-核心要点总结)

---

## 1. 🌐 文件下载基础概念


### 1.1 什么是文件下载


**💡 核心理解**
> 文件下载就是把网络上的文件传输到本地计算机的过程，就像你在网上购物，商品从仓库发到你家一样。

在Linux系统中，我们主要用两个工具来下载文件：
- **wget**：专门用来下载文件的工具，功能强大
- **curl**：更通用的数据传输工具，不仅能下载还能上传

```
文件下载过程示意：

网络服务器                本地计算机
┌─────────────┐          ┌─────────────┐
│  文件.zip   │  ────>   │  下载目录   │
│  图片.jpg   │  下载    │  文件.zip   │
│  文档.pdf   │  ────>   │  图片.jpg   │
└─────────────┘          └─────────────┘
```

### 1.2 为什么要掌握命令行下载


**🎯 实际应用场景**
- **服务器环境**：没有图形界面，只能用命令行
- **批量下载**：一次性下载很多文件，手动点击太累
- **自动化脚本**：写脚本自动下载更新文件
- **远程操作**：通过SSH连接服务器时的唯一选择

---

## 2. 📥 wget文件下载神器


### 2.1 wget基础用法


**🔸 最简单的下载**

wget的基本思路就是：`wget 网址`，就像告诉它"去这个地址把文件拿回来"。

```bash
# 下载单个文件
wget https://example.com/file.zip

# 下载后会在当前目录出现 file.zip
```

**🔸 指定下载位置和文件名**

```bash
# -O 参数指定保存的文件名（大写字母O）
wget -O 新文件名.zip https://example.com/oldname.zip

# 下载到指定目录
wget -P /home/user/downloads/ https://example.com/file.zip
```

> **💡 记忆技巧**：`-O`就是Output（输出）的意思，告诉wget把文件输出到哪个名字。

### 2.2 wget常用参数详解


**📋 核心参数表**

| **参数** | **含义** | **实际作用** | **使用场景** |
|---------|---------|-------------|-------------|
| `-O` | 指定文件名 | 自定义保存的文件名 | 下载时重命名文件 |
| `-c` | 断点续传 | 继续未完成的下载 | 大文件下载中断后继续 |
| `-r` | 递归下载 | 下载整个网站目录 | 下载网站所有文件 |
| `-P` | 指定目录 | 文件保存到指定文件夹 | 整理下载文件 |
| `-t` | 重试次数 | 失败后重试几次 | 网络不稳定时使用 |

**🛠️ 实用示例**

```bash
# 断点续传：下载大文件时网络中断了，可以继续下载
wget -c https://releases.ubuntu.com/20.04/ubuntu-20.04.iso

# 指定重试次数：网络不好时多试几次
wget -t 5 https://example.com/important-file.pdf

# 后台下载：让下载在后台进行，不阻塞终端
wget -b https://example.com/large-file.zip
```

### 2.3 批量下载技巧


**📄 从文件列表下载**

有时候需要下载很多文件，一个个输入命令太麻烦，可以把所有网址写在一个文件里：

```bash
# 创建下载列表文件
cat > download-list.txt << EOF
https://example.com/file1.zip
https://example.com/file2.pdf
https://example.com/file3.jpg
EOF

# 批量下载
wget -i download-list.txt
```

**🔄 递归下载整个目录**

```bash
# 下载整个网站目录（小心使用！）
wget -r -np -k https://example.com/public-files/

# 参数解释：
# -r: 递归下载
# -np: 不下载父目录
# -k: 转换链接为本地链接
```

### 2.4 wget高级功能


**🔐 带认证的下载**

```bash
# HTTP基础认证
wget --http-user=username --http-password=password https://secure.example.com/file.zip

# 使用cookie（从浏览器导出）
wget --load-cookies=cookies.txt https://example.com/protected-file.zip
```

**🌐 代理设置**

```bash
# 使用HTTP代理
wget -e use_proxy=yes -e http_proxy=127.0.0.1:8080 https://example.com/file.zip

# 使用SOCKS5代理
wget --proxy=on --proxy-type=socks5 --proxy-host=127.0.0.1 --proxy-port=1080 https://example.com/file.zip
```

---

## 3. 🔧 curl数据传输工具


### 3.1 curl基础概念


**💡 理解curl**
> curl不仅仅是下载工具，更像一个多功能的网络瑞士军刀。它可以下载、上传、测试网站、发送数据等。

curl的核心思路：`curl 选项 网址`

```bash
# 最简单的使用：获取网页内容（显示在屏幕上）
curl https://example.com

# 下载文件到本地
curl -O https://example.com/file.zip
```

### 3.2 curl下载参数详解


**📊 curl下载参数对比**

| **参数** | **作用** | **与wget区别** | **使用建议** |
|---------|---------|---------------|-------------|
| `-O` | 保持原文件名下载 | wget默认保持原名 | 简单下载时使用 |
| `-o` | 指定文件名 | 类似wget的-O | 需要重命名时使用 |
| `-L` | 跟随重定向 | wget默认跟随 | 下载时必加参数 |
| `-C -` | 断点续传 | 类似wget的-c | 大文件下载必用 |

**🎯 实用示例**

```bash
# 下载并保持原文件名
curl -O https://example.com/software.tar.gz

# 下载并指定新文件名
curl -o my-software.tar.gz https://example.com/software.tar.gz

# 跟随重定向下载（很重要！）
curl -L -O https://github.com/user/repo/releases/latest/download/file.zip

# 断点续传
curl -C - -O https://example.com/large-file.iso
```

> **⚠️ 重要提示**：curl下载时最好总是加上`-L`参数，因为很多网站会重定向，不加这个参数可能下载失败。

### 3.3 curl高级功能


**📤 不仅仅是下载**

curl比wget更灵活，可以做很多事情：

```bash
# 只获取HTTP头信息（测试文件是否存在）
curl -I https://example.com/file.zip

# 显示下载进度
curl -# -O https://example.com/file.zip

# 限制下载速度（不占满网络带宽）
curl --limit-rate 200k -O https://example.com/file.zip

# 设置用户代理（伪装成浏览器）
curl -A "Mozilla/5.0" -O https://example.com/file.zip
```

**🔐 认证和Headers**

```bash
# 基础认证
curl -u username:password -O https://secure.example.com/file.zip

# 自定义HTTP头
curl -H "Authorization: Bearer token123" -O https://api.example.com/file.zip

# 发送POST数据下载响应
curl -X POST -d "param=value" https://example.com/generate-file.zip -o result.zip
```

---

## 4. ⚖️ 下载工具对比选择


### 4.1 wget vs curl 核心区别


```
工具特性对比图：

wget                     curl
专业下载工具             通用传输工具
┌─────────────┐         ┌─────────────┐
│ ✓ 递归下载  │         │ ✓ 多协议    │
│ ✓ 断点续传  │         │ ✓ 上传下载  │
│ ✓ 镜像网站  │         │ ✓ REST API  │
│ ✓ 后台下载  │         │ ✓ 测试接口  │
└─────────────┘         └─────────────┘
```

**🎯 选择建议表**

| **使用场景** | **推荐工具** | **原因** |
|-------------|-------------|---------|
| 下载单个文件 | **curl** | 更快更简洁 |
| 下载整个网站 | **wget** | 支持递归下载 |
| 断点续传大文件 | **wget** | 更稳定可靠 |
| API接口测试 | **curl** | 功能更全面 |
| 脚本自动化 | **两者皆可** | 看具体需求 |
| 批量下载 | **wget** | 支持文件列表 |

### 4.2 常见下载场景实战


**📋 场景一：下载软件安装包**

```bash
# 场景：下载最新版本的软件
# 推荐用curl，因为通常需要跟随重定向
curl -L -O https://github.com/user/project/releases/latest/download/software.tar.gz
```

**📋 场景二：备份整个网站**

```bash
# 场景：备份静态网站所有文件
# 推荐用wget，支持递归下载
wget -r -np -k -E -p https://example.com/
```

**📋 场景三：下载大文件（如ISO镜像）**

```bash
# 场景：下载操作系统镜像，可能中断
# 推荐用wget，断点续传更稳定
wget -c -t 0 https://releases.ubuntu.com/20.04/ubuntu-20.04.iso
```

---

## 5. 🚀 高级下载技巧


### 5.1 网络环境优化


**🌐 代理设置统一方法**

当你的网络需要通过代理访问时：

```bash
# 方法一：环境变量设置（推荐）
export http_proxy=http://proxy.company.com:8080
export https_proxy=http://proxy.company.com:8080

# 现在wget和curl都会自动使用代理
wget https://example.com/file.zip
curl -O https://example.com/file.zip

# 方法二：直接在命令中指定
wget -e use_proxy=yes -e http_proxy=proxy.company.com:8080 https://example.com/file.zip
curl --proxy proxy.company.com:8080 -O https://example.com/file.zip
```

### 5.2 下载安全与验证


**🔐 文件完整性验证**

下载重要文件后，验证是否完整：

```bash
# 下载文件和校验文件
wget https://example.com/software.tar.gz
wget https://example.com/software.tar.gz.sha256

# 验证文件完整性
sha256sum -c software.tar.gz.sha256

# 或者直接对比
echo "预期的sha256值 software.tar.gz" | sha256sum -c
```

### 5.3 批量操作脚本


**📜 实用下载脚本示例**

```bash
#!/bin/bash
# 智能下载脚本

download_file() {
    local url=$1
    local filename=$(basename "$url")
    
    echo "开始下载：$filename"
    
    # 先尝试curl，失败则用wget
    if curl -L -O "$url"; then
        echo "✓ curl下载成功：$filename"
    elif wget "$url"; then
        echo "✓ wget下载成功：$filename"
    else
        echo "✗ 下载失败：$filename"
        return 1
    fi
    
    # 检查文件大小
    if [ -s "$filename" ]; then
        echo "✓ 文件完整：$(du -h "$filename" | cut -f1)"
    else
        echo "✗ 文件可能损坏：$filename"
    fi
}

# 使用示例
download_file "https://example.com/important-file.zip"
```

### 5.4 下载进度监控


**📊 监控下载状态**

```bash
# wget显示详细进度
wget --progress=bar:force https://example.com/large-file.zip

# curl显示进度条
curl -# -O https://example.com/large-file.zip

# 后台下载时监控日志
wget -b https://example.com/file.zip
tail -f wget-log
```

---

## 6. 📋 核心要点总结


### 6.1 必须掌握的基本技能


```
🔸 基础下载：wget/curl + 网址，最简单的文件获取
🔸 文件重命名：-O(wget) 和 -o(curl) 指定保存名称
🔸 断点续传：-c(wget) 和 -C -(curl) 处理下载中断
🔸 跟随重定向：curl必须加-L，wget默认支持
🔸 批量下载：wget -i 文件列表，提高工作效率
🔸 基础认证：--http-user/--http-password 访问受保护资源
```

### 6.2 工具选择决策树


```
下载需求决策流程：

需要下载吗？
     ↓
   单个文件 ────────→ curl -L -O
     ↓
   多个文件 ────────→ wget -i 列表文件
     ↓
   整个网站 ────────→ wget -r -np -k
     ↓
   大文件/不稳定 ───→ wget -c -t 0
     ↓
   API测试下载 ────→ curl 各种选项
```

### 6.3 常见问题解决方案


**❓ 下载失败常见原因及解决**

| **问题现象** | **可能原因** | **解决方法** |
|-------------|-------------|-------------|
| 403 Forbidden | 网站禁止直接下载 | 添加User-Agent: `curl -A "浏览器标识"` |
| 重定向失败 | 没有跟随重定向 | curl加上`-L`参数 |
| 证书错误 | HTTPS证书问题 | 添加`--no-check-certificate` (测试用) |
| 下载中断 | 网络不稳定 | 使用断点续传`-c`参数 |
| 权限不够 | 需要认证 | 添加`-u user:pass`参数 |

### 6.4 最佳实践建议


**✅ 推荐做法**
- **总是备份**：下载重要文件后验证完整性
- **网络友好**：使用限速避免占满带宽
- **错误处理**：脚本中检查下载结果
- **日志记录**：保存下载日志便于排错
- **安全意识**：不下载不明来源的文件

**⚠️ 注意事项**
- 递归下载要谨慎，可能下载大量无用文件
- 使用代理时注意安全性
- 大文件下载考虑磁盘空间
- 遵守网站robots.txt规则
- 不要过于频繁请求同一网站

### 6.5 进阶学习方向


**🎯 深入掌握**
- **自动化脚本**：编写更智能的下载脚本
- **并发下载**：使用xargs并行下载提高效率
- **监控集成**：结合监控系统跟踪下载状态
- **安全下载**：学习更多认证和加密下载方法

**核心记忆要点**：
```
wget专精下载，curl功能全面
-O指定名称，-c断点续传
curl要加-L，跟随重定向不迷路
批量下载用-i，递归下载用-r
网络不好多重试，大文件记得续传
```