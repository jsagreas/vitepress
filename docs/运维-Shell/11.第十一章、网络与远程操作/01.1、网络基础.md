---
title: 1、网络基础
---
## 📚 目录

1. [网络基础概念](#1-网络基础概念)
2. [网络连通性测试](#2-网络连通性测试)
3. [网络状态查看](#3-网络状态查看)
4. [网络接口管理](#4-网络接口管理)
5. [路由与网络配置](#5-路由与网络配置)
6. [网络故障排查](#6-网络故障排查)
7. [实用网络工具](#7-实用网络工具)
8. [核心要点总结](#8-核心要点总结)

---

## 1. 🌐 网络基础概念


### 1.1 什么是网络基础


**简单理解**：网络就像城市的道路系统，计算机通过网络相互通信，就像人们通过道路互相往来。

**核心组成**：
```
网络通信的三要素：
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│    设备     │    │    协议     │    │    介质     │
│  (电脑等)   │    │ (TCP/IP等)  │    │ (网线/WiFi) │
└─────────────┘    └─────────────┘    └─────────────┘
```

**🔸 IP地址基础**
```
IP地址就像邮政编码：
• 192.168.1.100 - 具体的设备地址
• 子网掩码 - 决定网络范围
• 网关 - 通向外网的"大门"
• DNS - 把域名翻译成IP地址的"翻译官"
```

### 1.2 网络分层模型


**通俗理解**：网络通信就像寄快递，每一层都有特定的作用

```
网络分层模型（简化版）：
┌───────────────────────┐
│ 应用层 - 写信内容      │ ← HTTP、FTP、SSH等
├───────────────────────┤
│ 传输层 - 包装信封      │ ← TCP、UDP协议
├───────────────────────┤
│ 网络层 - 写收件地址    │ ← IP协议路由
├───────────────────────┤
│ 数据链路层 - 快递运输  │ ← 以太网、WiFi
└───────────────────────┘
```

---

## 2. 🔍 网络连通性测试


### 2.1 ping命令 - 网络连通性检测


**ping的作用**：就像对着山谷喊话，听回声来判断对方是否"在家"

**基本用法**：
```bash
ping 目标地址

# 测试网络是否通畅
ping www.baidu.com

# 测试本地网络
ping 192.168.1.1
```

**🔧 常用选项**：
```bash
# 发送指定次数的包
ping -c 4 www.baidu.com

# 设置发送间隔（秒）
ping -i 2 192.168.1.1

# 指定包大小
ping -s 1000 www.baidu.com

# 设置超时时间
ping -W 3 目标地址
```

**📊 结果解读**：
```
64 bytes from www.baidu.com: icmp_seq=1 ttl=52 time=28.5 ms

解释：
• 64 bytes - 回复包的大小
• icmp_seq=1 - 序列号，第1个包
• ttl=52 - 生存时间，经过了多少跳
• time=28.5 ms - 往返时间，越小越好
```

**💡 实用技巧**：
- **网络慢**：ping时间 > 100ms
- **网络不稳定**：ping结果时快时慢
- **网络不通**：显示"Request timeout"

### 2.2 traceroute - 路由路径跟踪


**traceroute的作用**：就像GPS导航显示路线，看数据包经过了哪些"路口"

```bash
# 跟踪到目标的路由路径
traceroute www.baidu.com

# 或者使用tracepath（更简单）
tracepath www.baidu.com
```

**路由跟踪结果解读**：
```
 1  192.168.1.1 (192.168.1.1)  1.234 ms  ← 你的路由器
 2  10.0.0.1 (10.0.0.1)       15.678 ms  ← ISP的设备
 3  * * *                                ← 某个节点不响应
 4  220.181.38.148             28.456 ms  ← 目标服务器
```

**🔸 应用场景**：
- **网络慢**：找出是哪个节点延迟高
- **无法访问**：看在哪个节点断开了
- **网络分析**：了解数据传输路径

---

## 3. 📊 网络状态查看


### 3.1 netstat - 传统网络状态工具


**netstat的作用**：就像查看所有正在使用的"电话线路"

**🔸 查看所有连接**：
```bash
# 显示所有连接
netstat -a

# 只显示TCP连接
netstat -t

# 只显示UDP连接
netstat -u

# 显示监听端口
netstat -l
```

**常用组合**：
```bash
# 显示数字地址（不解析域名）
netstat -n

# 显示进程信息
netstat -p

# 常用组合：查看所有TCP连接和进程
netstat -tunlp
```

**📋 连接状态含义**：
```
LISTEN     - 正在监听，等待连接（服务端）
ESTABLISHED - 已建立连接，正在通信
TIME_WAIT  - 连接关闭后的等待状态
CLOSE_WAIT - 等待关闭连接
SYN_SENT   - 正在尝试建立连接（客户端）
```

### 3.2 ss - 现代网络状态工具


**ss的优势**：比netstat更快、功能更强，是现代Linux的首选工具

**基本用法**：
```bash
# 显示所有连接（替代netstat -a）
ss -a

# 显示监听端口（替代netstat -l）
ss -l

# 显示TCP连接（替代netstat -t）
ss -t

# 常用组合
ss -tunlp
```

**🎯 实用过滤**：
```bash
# 查看特定端口
ss -tunlp | grep :80

# 查看特定状态的连接
ss -t state established

# 查看某个进程的连接
ss -p | grep nginx
```

**性能对比**：
```
命令执行速度对比：
ss:      ████████████ (快)
netstat: ████░░░░░░░░ (慢)

信息丰富度：
ss:      ████████████ (详细)
netstat: ████████░░░░ (基础)
```

---

## 4. 🔧 网络接口管理


### 4.1 网络接口查看


**网络接口**：就像电脑的"网络插口"，每个接口都有自己的配置

**🔸 ifconfig - 传统接口工具**：
```bash
# 查看所有网络接口
ifconfig

# 查看特定接口
ifconfig eth0

# 查看简要信息
ifconfig -s
```

**接口信息解读**：
```
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255
        ether 00:0c:29:xx:xx:xx  txqueuelen 1000  (Ethernet)
        RX packets 12345  bytes 1234567 (1.2 MB)
        TX packets 9876   bytes 987654  (987.6 KB)

解释：
• UP - 接口已启用
• inet - IP地址信息
• ether - MAC地址
• RX/TX - 接收/发送的数据统计
```

### 4.2 ip命令 - 现代网络配置工具


**ip命令的优势**：功能更全面，是现代Linux系统的标配

**🔸 查看网络接口**：
```bash
# 显示所有接口（替代ifconfig）
ip addr show
# 简写
ip a

# 查看特定接口
ip addr show eth0

# 只显示IPv4地址
ip -4 addr show
```

**🔸 接口管理**：
```bash
# 启用接口
ip link set eth0 up

# 禁用接口
ip link set eth0 down

# 添加IP地址
sudo ip addr add 192.168.1.200/24 dev eth0

# 删除IP地址
sudo ip addr del 192.168.1.200/24 dev eth0
```

**命令对照表**：
| **功能** | **传统命令** | **现代命令** |
|---------|-------------|-------------|
| 查看接口 | `ifconfig` | `ip addr show` |
| 启用接口 | `ifconfig eth0 up` | `ip link set eth0 up` |
| 配置IP | `ifconfig eth0 192.168.1.100` | `ip addr add 192.168.1.100/24 dev eth0` |
| 查看路由 | `route -n` | `ip route show` |

---

## 5. 🛣️ 路由与网络配置


### 5.1 路由表查看与分析


**路由表**：就像城市的交通指示牌，告诉数据包该往哪个方向走

**🔸 查看路由表**：
```bash
# 传统方法
route -n

# 现代方法（推荐）
ip route show
# 简写
ip r
```

**路由表解读**：
```
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG    100    0        0 eth0
192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 eth0

解释：
• 0.0.0.0 - 默认路由（所有其他网络）
• 192.168.1.1 - 网关地址（路由器）
• UG - 标志：U=启用，G=网关
• eth0 - 出接口
```

### 5.2 路由操作


**🔸 添加和删除路由**：
```bash
# 添加默认路由
sudo ip route add default via 192.168.1.1

# 添加特定网络路由
sudo ip route add 10.0.0.0/8 via 192.168.1.1

# 删除路由
sudo ip route del 10.0.0.0/8

# 查看到特定地址的路由
ip route get 8.8.8.8
```

**路由优先级**：
```
路由选择原则：
1. 最长匹配原则 - 选择最精确的路由
2. 路由度量值 - 数值越小优先级越高
3. 管理距离 - 不同协议的可信度

示例：
192.168.1.0/24   ← 优先选择（更精确）
192.168.0.0/16   ← 次要选择
0.0.0.0/0        ← 最后选择（默认路由）
```

---

## 6. 🔍 网络故障排查


### 6.1 网络故障排查流程


**故障排查思路**：从近到远，从简单到复杂

```
网络故障排查步骤：
┌─────────────┐
│ 1.检查本机  │ ← ping 127.0.0.1
└─────────────┘
        ↓
┌─────────────┐
│ 2.检查网关  │ ← ping 网关地址
└─────────────┘
        ↓
┌─────────────┐
│ 3.检查外网  │ ← ping 8.8.8.8
└─────────────┘
        ↓
┌─────────────┐
│ 4.检查DNS   │ ← ping 域名
└─────────────┘
```

### 6.2 常见故障处理


**🔸 无法上网**：
```bash
# 步骤1：检查网络接口
ip addr show

# 步骤2：检查路由
ip route show

# 步骤3：检查DNS
cat /etc/resolv.conf

# 步骤4：测试连通性
ping -c 4 8.8.8.8
```

**🔸 网络慢的排查**：
```bash
# 检查网络延迟
ping -c 10 www.baidu.com

# 查看网络统计
cat /proc/net/dev

# 检查网络使用情况
iftop  # 需要安装
```

**故障类型与解决**：
| **现象** | **可能原因** | **排查方法** |
|---------|-------------|-------------|
| 完全无法上网 | 网线断开、接口关闭 | `ip link show` |
| 能ping IP但不能访问域名 | DNS配置错误 | `nslookup 域名` |
| 局域网通外网不通 | 网关配置错误 | `ip route show` |
| 网络时断时续 | 网线松动、信号不稳定 | `ping -f` 压力测试 |

---

## 7. 🛠️ 实用网络工具


### 7.1 telnet - 网络连接测试


**telnet的作用**：测试特定端口是否开放，就像敲门看有没有人应答

```bash
# 测试端口连通性
telnet 主机 端口

# 测试网站80端口
telnet www.baidu.com 80

# 测试SSH端口
telnet 192.168.1.100 22
```

**结果判断**：
```bash
# 连接成功
Connected to www.baidu.com.
Escape character is '^]'.

# 连接失败
telnet: Unable to connect to remote host: Connection refused
```

**💡 实用场景**：
- **端口测试**：检查服务是否正常启动
- **防火墙测试**：确认端口是否被阻挡
- **网络调试**：简单的协议测试

### 7.2 nc/netcat - 网络工具瑞士军刀


**netcat的强大功能**：既能当客户端，也能当服务端，功能极其强大

**🔸 端口扫描**：
```bash
# 扫描单个端口
nc -z 192.168.1.100 22

# 扫描端口范围
nc -z 192.168.1.100 20-25

# 扫描UDP端口
nc -zu 192.168.1.100 53
```

**🔸 简单服务器**：
```bash
# 创建临时服务器（监听端口）
nc -l 8888

# 在另一个终端连接
nc localhost 8888
```

**🔸 文件传输**：
```bash
# 接收端（服务器）
nc -l 9999 > received_file.txt

# 发送端（客户端）
nc 192.168.1.100 9999 < file_to_send.txt
```

**应用场景对比**：
```
工具选择指南：
┌─────────────┬─────────────┬─────────────┐
│    需求     │   推荐工具   │    说明     │
├─────────────┼─────────────┼─────────────┤
│ 测试连通性   │    ping     │   最常用    │
│ 测试端口     │   telnet    │   简单直接  │
│ 端口扫描     │     nc      │   功能强大  │
│ 网络分析     │     ss      │   现代工具  │
│ 路由跟踪     │ traceroute  │   专业工具  │
└─────────────┴─────────────┴─────────────┘
```

---

## 8. 📋 核心要点总结


### 8.1 必须掌握的核心命令


```bash
# 🔸 连通性测试
ping 目标地址                # 基础连通性测试
ping -c 4 目标地址           # 限制发送次数

# 🔸 网络状态查看
ss -tunlp                   # 查看所有网络连接（推荐）
netstat -tunlp              # 传统方式

# 🔸 网络接口管理
ip addr show                # 查看网络接口（推荐）
ifconfig                    # 传统方式

# 🔸 路由操作
ip route show               # 查看路由表
ip route get 8.8.8.8        # 查看到特定地址的路由

# 🔸 实用工具
traceroute 目标地址          # 路由跟踪
nc -z 主机 端口             # 端口测试
```

### 8.2 网络排查思维导图


```
网络问题排查流程：
问题现象
    ↓
物理连接检查 → 接口状态检查 → 本地回环测试
    ↓              ↓              ↓
网线是否插好   ip link show   ping 127.0.0.1
    ↓
网关连通性测试 → 外网连通性测试 → DNS解析测试
    ↓              ↓              ↓
ping 网关地址   ping 8.8.8.8   nslookup 域名
    ↓
应用层服务测试 → 端口开放测试 → 防火墙检查
    ↓              ↓              ↓
curl/wget测试   telnet/nc测试   iptables检查
```

### 8.3 常用网络参数速查


**🔸 重要IP地址**：
```bash
127.0.0.1     # 本地回环地址（localhost）
0.0.0.0       # 所有地址（监听所有接口）
8.8.8.8       # Google公共DNS
114.114.114.114  # 国内公共DNS
```

**🔸 常见端口**：
```bash
22    # SSH
23    # Telnet
53    # DNS
80    # HTTP
443   # HTTPS
3306  # MySQL
5432  # PostgreSQL
```

**🔸 命令参数速记**：
```bash
-t    # TCP
-u    # UDP
-n    # 数字显示（不解析域名）
-l    # 监听状态
-p    # 显示进程
-c    # 指定次数
-i    # 指定间隔
```

### 8.4 实际应用价值


**网络管理场景**：
- **服务器运维**：监控网络状态，诊断连接问题
- **应用部署**：确认端口开放，测试服务可用性
- **性能优化**：分析网络延迟，找出瓶颈节点
- **安全检查**：扫描开放端口，检查服务暴露情况

**故障处理流程**：
1. **快速定位**：用ping和ss快速判断问题范围
2. **深入分析**：用traceroute和ip命令详细分析
3. **验证修复**：用telnet和nc验证问题是否解决

**💡 学习建议**：
- 从ping开始，逐步掌握其他工具
- 多在虚拟机环境下练习，避免影响生产环境
- 结合实际网络故障场景学习，效果更好
- 掌握基本原理比记住命令参数更重要

**核心记忆口诀**：
```
网络排查有套路，从近到远别糊涂
ping测连通ss看状态，ip命令把接口查
路由不对外网断，DNS有问题域名翻
telnet敲门nc扫描，工具用对事半功
```