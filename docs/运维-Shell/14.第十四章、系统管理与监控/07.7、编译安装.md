---
title: 7ã€ç¼–è¯‘å®‰è£…
---
## ğŸ“š ç›®å½•

1. [ç¼–è¯‘å®‰è£…åŸºç¡€æ¦‚å¿µ](#1-ç¼–è¯‘å®‰è£…åŸºç¡€æ¦‚å¿µ)
2. [æºç ç¼–è¯‘ä¸‰éƒ¨æ›²](#2-æºç ç¼–è¯‘ä¸‰éƒ¨æ›²)
3. [ç¼–è¯‘ä¾èµ–ç®¡ç†](#3-ç¼–è¯‘ä¾èµ–ç®¡ç†)
4. [è‡ªå®šä¹‰å®‰è£…é…ç½®](#4-è‡ªå®šä¹‰å®‰è£…é…ç½®)
5. [ç¯å¢ƒå˜é‡é…ç½®](#5-ç¯å¢ƒå˜é‡é…ç½®)
6. [å¸è½½ç¼–è¯‘è½¯ä»¶](#6-å¸è½½ç¼–è¯‘è½¯ä»¶)
7. [å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º](#7-å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”§ ç¼–è¯‘å®‰è£…åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç¼–è¯‘å®‰è£…


**ç®€å•ç†è§£**ï¼šå°±åƒä»åŸææ–™åˆ¶ä½œäº§å“ä¸€æ ·ï¼Œç¼–è¯‘å®‰è£…æ˜¯æŠŠç¨‹åºçš„"åŸæ–™ä»£ç "åˆ¶ä½œæˆèƒ½åœ¨ä½ ç”µè„‘ä¸Šè¿è¡Œçš„"æˆå“ç¨‹åº"ã€‚

```
æºç åŒ… â†’ ç¼–è¯‘è¿‡ç¨‹ â†’ å¯æ‰§è¡Œç¨‹åº â†’ å®‰è£…åˆ°ç³»ç»Ÿ

å°±åƒï¼š
é¢ç²‰+é¸¡è›‹+ç³– â†’ çƒ˜ç„™è¿‡ç¨‹ â†’ è›‹ç³• â†’ æ”¾åˆ°é¤æ¡Œä¸Š
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç¼–è¯‘å®‰è£…


**åŒ…ç®¡ç†å™¨ vs ç¼–è¯‘å®‰è£…å¯¹æ¯”**ï¼š

| å®‰è£…æ–¹å¼ | **ä¼˜åŠ¿** | **åŠ£åŠ¿** | **é€‚ç”¨åœºæ™¯** |
|---------|---------|---------|-------------|
| ğŸª **åŒ…ç®¡ç†å™¨** | `å®‰è£…ç®€å•`ï¼Œ`ä¾èµ–è‡ªåŠ¨è§£å†³` | `ç‰ˆæœ¬å›ºå®š`ï¼Œ`é…ç½®å—é™` | `æ—¥å¸¸ä½¿ç”¨ï¼Œå¿«é€Ÿéƒ¨ç½²` |
| ğŸ”¨ **ç¼–è¯‘å®‰è£…** | `ç‰ˆæœ¬è‡ªé€‰`ï¼Œ`é…ç½®çµæ´»`ï¼Œ`æ€§èƒ½ä¼˜åŒ–` | `æ“ä½œå¤æ‚`ï¼Œ`æ—¶é—´è¾ƒé•¿` | `å®šåˆ¶éœ€æ±‚ï¼Œæœ€æ–°ç‰ˆæœ¬` |

**ä»€ä¹ˆæ—¶å€™é€‰æ‹©ç¼–è¯‘å®‰è£…**ï¼š
- âœ… éœ€è¦æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶
- âœ… è¦è‡ªå®šä¹‰ç¼–è¯‘å‚æ•°ä¼˜åŒ–æ€§èƒ½
- âœ… åŒ…ç®¡ç†å™¨ä¸­æ²¡æœ‰è¿™ä¸ªè½¯ä»¶
- âœ… éœ€è¦ç‰¹æ®Šçš„åŠŸèƒ½æ¨¡å—

### 1.3 ç¼–è¯‘å®‰è£…çš„åŸºæœ¬æµç¨‹


```
ä¸‹è½½æºç åŒ…
     â†“
è§£å‹æºç åŒ…  
     â†“
æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ– (configure)
     â†“  
ç¼–è¯‘æºä»£ç  (make)
     â†“
å®‰è£…åˆ°ç³»ç»Ÿ (make install)
     â†“
é…ç½®ç¯å¢ƒå˜é‡
```

**æ ¸å¿ƒç†è§£**ï¼šè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è®©è®¡ç®—æœºæŠŠäººç±»èƒ½è¯»æ‡‚çš„ä»£ç ç¿»è¯‘æˆæœºå™¨èƒ½æ‰§è¡Œçš„ç¨‹åºã€‚

---

## 2. âš¡ æºç ç¼–è¯‘ä¸‰éƒ¨æ›²


### 2.1 ç¬¬ä¸€æ­¥ï¼š./configureï¼ˆé…ç½®æ£€æŸ¥ï¼‰


**è¿™ä¸€æ­¥åœ¨åšä»€ä¹ˆ**ï¼š
- æ£€æŸ¥ä½ çš„ç³»ç»Ÿæ˜¯å¦æ»¡è¶³ç¼–è¯‘æ¡ä»¶
- æŸ¥çœ‹éœ€è¦çš„å·¥å…·å’Œåº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- ç”Ÿæˆç¼–è¯‘é…ç½®æ–‡ä»¶ï¼ˆMakefileï¼‰

```bash
# åŸºæœ¬é…ç½®å‘½ä»¤
./configure

# å¸¸ç”¨é…ç½®é€‰é¡¹
./configure --prefix=/usr/local/myapp    # æŒ‡å®šå®‰è£…è·¯å¾„
./configure --enable-ssl                 # å¯ç”¨SSLæ”¯æŒ
./configure --disable-debug              # å…³é—­è°ƒè¯•æ¨¡å¼
```

**é…ç½®è¿‡ç¨‹è¯¦è§£**ï¼š
```
è¿è¡Œ ./configure æ—¶ç³»ç»Ÿåœ¨åšä»€ä¹ˆï¼š

[1] æ£€æŸ¥ç¼–è¯‘å™¨      âœ“ æ‰¾åˆ° gcc ç¼–è¯‘å™¨
[2] æ£€æŸ¥ç³»ç»Ÿåº“      âœ“ æ‰¾åˆ° libc æ ‡å‡†åº“  
[3] æ£€æŸ¥ä¾èµ–è½¯ä»¶    âœ— ç¼ºå°‘ openssl-dev
[4] ç”Ÿæˆ Makefile   âœ“ åˆ›å»ºç¼–è¯‘é…ç½®æ–‡ä»¶

å¦‚æœå‡ºé”™ä¼šæç¤ºï¼šconfigure: error: OpenSSL not found
```

**å¸¸è§é…ç½®é€‰é¡¹è¯´æ˜**ï¼š

| é€‰é¡¹ | **ä½œç”¨** | **ç¤ºä¾‹** |
|------|---------|---------|
| `--prefix` | `æŒ‡å®šå®‰è£…è·¯å¾„` | `--prefix=/opt/nginx` |
| `--enable-*` | `å¯ç”¨æŸä¸ªåŠŸèƒ½` | `--enable-ssl` |
| `--disable-*` | `å…³é—­æŸä¸ªåŠŸèƒ½` | `--disable-debug` |
| `--with-*` | `ä½¿ç”¨æŒ‡å®šçš„åº“` | `--with-openssl=/usr/local` |

### 2.2 ç¬¬äºŒæ­¥ï¼šmakeï¼ˆç¼–è¯‘æ„å»ºï¼‰


**è¿™ä¸€æ­¥åœ¨åšä»€ä¹ˆ**ï¼š
- æ ¹æ®Makefileçš„é…ç½®å¼€å§‹ç¼–è¯‘
- æŠŠæºä»£ç ç¿»è¯‘æˆæœºå™¨ç 
- ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

```bash
# åŸºæœ¬ç¼–è¯‘å‘½ä»¤
make

# å¤šæ ¸å¹¶è¡Œç¼–è¯‘ï¼ˆåŠ é€Ÿï¼‰
make -j4          # ä½¿ç”¨4ä¸ªCPUæ ¸å¿ƒåŒæ—¶ç¼–è¯‘
make -j$(nproc)   # ä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒ
```

**ç¼–è¯‘è¿‡ç¨‹å¯è§†åŒ–**ï¼š
```
ç¼–è¯‘è¿›å±•æ˜¾ç¤ºï¼š
[  1%] Building C object CMakeFiles/myapp.dir/main.c.o
[  5%] Building C object CMakeFiles/myapp.dir/utils.c.o
[ 12%] Building C object CMakeFiles/myapp.dir/network.c.o
[ 25%] Linking C executable myapp
[ 50%] Building documentation...
[100%] Build complete!
```

**ç¼–è¯‘å¸¸è§é—®é¢˜**ï¼š
- **å†…å­˜ä¸è¶³**ï¼šç¼–è¯‘å¤§å‹è½¯ä»¶æ—¶å¯èƒ½éœ€è¦å‡ GBå†…å­˜
- **æ—¶é—´å¾ˆé•¿**ï¼šå¤§å‹é¡¹ç›®ç¼–è¯‘å¯èƒ½éœ€è¦æ•°å°æ—¶
- **ä¾èµ–ç¼ºå¤±**ï¼šç¼–è¯‘è¿‡ç¨‹ä¸­å‘ç°ç¼ºå°‘åº“æ–‡ä»¶

### 2.3 ç¬¬ä¸‰æ­¥ï¼šmake installï¼ˆå®‰è£…éƒ¨ç½²ï¼‰


**è¿™ä¸€æ­¥åœ¨åšä»€ä¹ˆ**ï¼š
- æŠŠç¼–è¯‘å¥½çš„ç¨‹åºå¤åˆ¶åˆ°æŒ‡å®šç›®å½•
- è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
- åˆ›å»ºå¿…è¦çš„é…ç½®æ–‡ä»¶

```bash
# å®‰è£…åˆ°ç³»ç»Ÿï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
sudo make install

# æŸ¥çœ‹å®‰è£…ä¼šåšä»€ä¹ˆï¼ˆä¸å®é™…å®‰è£…ï¼‰
make install DESTDIR=/tmp/preview
```

**å®‰è£…è¿‡ç¨‹ç¤ºä¾‹**ï¼š
```
å®‰è£…æ“ä½œè¯¦æƒ…ï¼š
Installing /usr/local/bin/myapp
Installing /usr/local/lib/libmyapp.so
Installing /usr/local/share/man/man1/myapp.1
Installing /usr/local/etc/myapp.conf
Setting permissions on /usr/local/bin/myapp
Installation complete!
```

---

## 3. ğŸ“¦ ç¼–è¯‘ä¾èµ–ç®¡ç†


### 3.1 ä¾èµ–å…³ç³»ç†è§£


**ä»€ä¹ˆæ˜¯ç¼–è¯‘ä¾èµ–**ï¼š
ç¼–è¯‘ä¾èµ–å°±åƒåšèœéœ€è¦çš„å·¥å…·å’ŒåŸæ–™ï¼Œç¼ºäº†ä»»ä½•ä¸€æ ·éƒ½åšä¸æˆã€‚

```
ç¼–è¯‘nginxéœ€è¦çš„"åŸæ–™"ï¼š
ğŸ”§ åŸºç¡€å·¥å…·ï¼šgccç¼–è¯‘å™¨ã€makeå·¥å…·
ğŸ“š å¼€å‘åº“ï¼špcre-develï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
ğŸ” åŠ å¯†åº“ï¼šopenssl-develï¼ˆSSLæ”¯æŒï¼‰  
ğŸ—œï¸ å‹ç¼©åº“ï¼šzlib-develï¼ˆgzipå‹ç¼©ï¼‰
```

### 3.2 ä¾èµ–æ£€æŸ¥ä¸å®‰è£…


**æ£€æŸ¥ç³»ç»Ÿä¾èµ–**ï¼š
```bash
# æ£€æŸ¥æ˜¯å¦æœ‰ç¼–è¯‘å·¥å…·
which gcc make
rpm -qa | grep -E "(gcc|make)"

# æ£€æŸ¥å¼€å‘åº“
rpm -qa | grep -i devel
yum list installed | grep -i devel
```

**å®‰è£…ç¼–è¯‘ä¾èµ–**ï¼š

```bash
# CentOS/RHEL ç³»ç»Ÿ
sudo yum groupinstall "Development Tools"
sudo yum install gcc gcc-c++ make

# Ubuntu/Debian ç³»ç»Ÿ  
sudo apt-get install build-essential
sudo apt-get install gcc g++ make

# å®‰è£…å¸¸ç”¨å¼€å‘åº“
sudo yum install pcre-devel openssl-devel zlib-devel
```

### 3.3 ä¾èµ–é—®é¢˜è§£å†³


**å¸¸è§ä¾èµ–é”™è¯¯åŠè§£å†³**ï¼š

| é”™è¯¯ä¿¡æ¯ | **åŸå› ** | **è§£å†³æ–¹æ³•** |
|---------|---------|-------------|
| `gcc: command not found` | `ç¼ºå°‘ç¼–è¯‘å™¨` | `å®‰è£…gccç¼–è¯‘å™¨` |
| `No package 'openssl' found` | `ç¼ºå°‘SSLå¼€å‘åº“` | `å®‰è£…openssl-devel` |
| `zlib.h: No such file` | `ç¼ºå°‘å¤´æ–‡ä»¶` | `å®‰è£…zlib-devel` |

**ä¾èµ–è§£å†³å®æˆ˜ç¤ºä¾‹**ï¼š
```bash
# é‡åˆ°ç¼–è¯‘é”™è¯¯æ—¶çš„æ’æŸ¥æ­¥éª¤
./configure --prefix=/usr/local/nginx
# æŠ¥é”™ï¼šconfigure: error: the HTTP rewrite module requires the PCRE library

# è§£å†³æ–¹æ¡ˆ
sudo yum install pcre-devel
./configure --prefix=/usr/local/nginx  # é‡æ–°é…ç½®
```

---

## 4. ğŸ¯ è‡ªå®šä¹‰å®‰è£…é…ç½®


### 4.1 å®‰è£…è·¯å¾„è§„åˆ’


**ç³»ç»Ÿè·¯å¾„çº¦å®š**ï¼š
```
/usr/local/     â† æœ¬åœ°ç¼–è¯‘å®‰è£…çš„è½¯ä»¶
â”œâ”€â”€ bin/        â† å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ lib/        â† åº“æ–‡ä»¶  
â”œâ”€â”€ include/    â† å¤´æ–‡ä»¶
â”œâ”€â”€ share/      â† å…±äº«æ•°æ®
â””â”€â”€ etc/        â† é…ç½®æ–‡ä»¶
```

**è‡ªå®šä¹‰è·¯å¾„ç¤ºä¾‹**ï¼š
```bash
# å®‰è£…åˆ°ç‹¬ç«‹ç›®å½•ï¼ˆä¾¿äºç®¡ç†ï¼‰
./configure --prefix=/opt/nginx-1.20.2

# è¯¦ç»†è·¯å¾„æŒ‡å®š
./configure \
  --prefix=/usr/local/nginx \
  --conf-path=/etc/nginx/nginx.conf \
  --error-log-path=/var/log/nginx/error.log \
  --pid-path=/var/run/nginx.pid
```

### 4.2 åŠŸèƒ½æ¨¡å—é…ç½®


**å¯ç”¨/ç¦ç”¨åŠŸèƒ½ç¤ºä¾‹**ï¼š
```bash
# nginxç¼–è¯‘é…ç½®ç¤ºä¾‹
./configure \
  --prefix=/usr/local/nginx \
  --with-http_ssl_module \        # å¯ç”¨SSLæ¨¡å—
  --with-http_v2_module \         # å¯ç”¨HTTP/2
  --with-http_gzip_static_module \# å¯ç”¨é™æ€gzip
  --without-http_ssi_module       # ç¦ç”¨SSIæ¨¡å—
```

**é…ç½®é€‰é¡¹æŸ¥çœ‹**ï¼š
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é…ç½®é€‰é¡¹
./configure --help

# æŸ¥çœ‹å½“å‰ç¼–è¯‘é…ç½®
nginx -V  # æŸ¥çœ‹nginxç¼–è¯‘å‚æ•°
```

### 4.3 æ€§èƒ½ä¼˜åŒ–é…ç½®


**ç¼–è¯‘ä¼˜åŒ–é€‰é¡¹**ï¼š
```bash
# æ€§èƒ½ä¼˜åŒ–ç¼–è¯‘
export CFLAGS="-O2 -march=native"
./configure --prefix=/usr/local/app

# æˆ–è€…åœ¨configureæ—¶æŒ‡å®š
./configure \
  --prefix=/usr/local/app \
  CFLAGS="-O2 -march=native" \
  CXXFLAGS="-O2 -march=native"
```

**ä¼˜åŒ–å‚æ•°è¯´æ˜**ï¼š
- **-O2**ï¼šå¯ç”¨2çº§ä¼˜åŒ–ï¼Œå¹³è¡¡ç¼–è¯‘æ—¶é—´å’Œæ€§èƒ½
- **-march=native**ï¼šé’ˆå¯¹å½“å‰CPUæ¶æ„ä¼˜åŒ–
- **-g**ï¼šåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘æ—¶ç”¨ï¼‰

---

## 5. ğŸŒ ç¯å¢ƒå˜é‡é…ç½®


### 5.1 ç¯å¢ƒå˜é‡çš„ä½œç”¨


**ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ç¯å¢ƒå˜é‡**ï¼š
ç¼–è¯‘å®‰è£…çš„è½¯ä»¶é»˜è®¤ä¸åœ¨ç³»ç»ŸPATHä¸­ï¼Œéœ€è¦å‘Šè¯‰ç³»ç»Ÿå»å“ªé‡Œæ‰¾è¿™äº›ç¨‹åºã€‚

```
æ²¡æœ‰é…ç½®ç¯å¢ƒå˜é‡ï¼š
$ nginx
bash: nginx: command not found

é…ç½®åï¼š
$ nginx  
nginx version: nginx/1.20.2
```

### 5.2 PATHç¯å¢ƒå˜é‡é…ç½®


**ä¸´æ—¶é…ç½®ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰**ï¼š
```bash
# æ·»åŠ åˆ°PATH
export PATH="/usr/local/nginx/sbin:$PATH"

# éªŒè¯é…ç½®
echo $PATH
which nginx
```

**æ°¸ä¹…é…ç½®æ–¹æ³•**ï¼š

```bash
# æ–¹æ³•1ï¼šä¿®æ”¹ç”¨æˆ·profile
echo 'export PATH="/usr/local/nginx/sbin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# æ–¹æ³•2ï¼šç³»ç»Ÿçº§é…ç½®
sudo echo 'export PATH="/usr/local/nginx/sbin:$PATH"' >> /etc/profile
source /etc/profile

# æ–¹æ³•3ï¼šåˆ›å»ºç¬¦å·é“¾æ¥
sudo ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/nginx
```

### 5.3 åº“æ–‡ä»¶è·¯å¾„é…ç½®


**åŠ¨æ€åº“è·¯å¾„é…ç½®**ï¼š
```bash
# æ·»åŠ åº“æ–‡ä»¶è·¯å¾„
echo '/usr/local/nginx/lib' | sudo tee -a /etc/ld.so.conf.d/nginx.conf
sudo ldconfig  # æ›´æ–°åº“ç¼“å­˜

# éªŒè¯åº“æ–‡ä»¶
ldd /usr/local/nginx/sbin/nginx
```

**pkg-configè·¯å¾„é…ç½®**ï¼š
```bash
# è®¾ç½®pkg-configè·¯å¾„
export PKG_CONFIG_PATH="/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH"

# éªŒè¯é…ç½®
pkg-config --list-all | grep nginx
```

### 5.4 å®Œæ•´ç¯å¢ƒå˜é‡é…ç½®è„šæœ¬


```bash
#!/bin/bash
# nginxç¯å¢ƒå˜é‡é…ç½®è„šæœ¬

NGINX_HOME="/usr/local/nginx"

# åˆ›å»ºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
cat > /etc/profile.d/nginx.sh << EOF
export NGINX_HOME="$NGINX_HOME"
export PATH="\$NGINX_HOME/sbin:\$PATH"
export MANPATH="\$NGINX_HOME/share/man:\$MANPATH"
EOF

# ä½¿é…ç½®ç”Ÿæ•ˆ
source /etc/profile.d/nginx.sh

echo "Nginxç¯å¢ƒå˜é‡é…ç½®å®Œæˆï¼"
echo "å½“å‰nginxè·¯å¾„: $(which nginx)"
```

---

## 6. ğŸ—‘ï¸ å¸è½½ç¼–è¯‘è½¯ä»¶


### 6.1 ä¸ºä»€ä¹ˆå¸è½½æ¯”è¾ƒéº»çƒ¦


**åŒ…ç®¡ç†å™¨ vs ç¼–è¯‘å®‰è£…çš„å¸è½½å¯¹æ¯”**ï¼š
```
åŒ…ç®¡ç†å™¨å®‰è£…çš„è½¯ä»¶ï¼š
yum remove nginx  # è‡ªåŠ¨åˆ é™¤æ‰€æœ‰æ–‡ä»¶

ç¼–è¯‘å®‰è£…çš„è½¯ä»¶ï¼š
æ²¡æœ‰è‡ªåŠ¨å¸è½½åŠŸèƒ½ ğŸ˜°
éœ€è¦æ‰‹åŠ¨æ¸…ç†æ‰€æœ‰æ–‡ä»¶
```

### 6.2 è®°å½•å®‰è£…æ–‡ä»¶çš„æ–¹æ³•


**æ–¹æ³•1ï¼šä½¿ç”¨make installè®°å½•**
```bash
# å®‰è£…æ—¶è®°å½•æ–‡ä»¶åˆ—è¡¨
sudo make install > install_files.log 2>&1

# æˆ–è€…ä½¿ç”¨DESTDIRé¢„è§ˆå®‰è£…
make install DESTDIR=/tmp/install_preview
find /tmp/install_preview -type f > install_files.log
```

**æ–¹æ³•2ï¼šå®‰è£…å‰åå¯¹æ¯”**
```bash
# å®‰è£…å‰è®°å½•ç³»ç»Ÿæ–‡ä»¶
find /usr/local -type f > before_install.txt

# æ‰§è¡Œå®‰è£…
sudo make install  

# å®‰è£…åè®°å½•æ–‡ä»¶
find /usr/local -type f > after_install.txt

# æ‰¾å‡ºæ–°å¢æ–‡ä»¶
diff before_install.txt after_install.txt > new_files.txt
```

### 6.3 æ‰‹åŠ¨å¸è½½æ­¥éª¤


**æ ‡å‡†å¸è½½æµç¨‹**ï¼š

```bash
# 1. åœæ­¢æœåŠ¡
sudo systemctl stop nginx
sudo systemctl disable nginx

# 2. åˆ é™¤å¯æ‰§è¡Œæ–‡ä»¶
sudo rm -f /usr/local/nginx/sbin/nginx

# 3. åˆ é™¤é…ç½®æ–‡ä»¶
sudo rm -rf /usr/local/nginx/conf/
sudo rm -rf /etc/nginx/

# 4. åˆ é™¤æ—¥å¿—æ–‡ä»¶
sudo rm -rf /var/log/nginx/

# 5. åˆ é™¤è¿è¡Œæ—¶æ–‡ä»¶
sudo rm -f /var/run/nginx.pid

# 6. åˆ é™¤æ•´ä¸ªå®‰è£…ç›®å½•
sudo rm -rf /usr/local/nginx/
```

### 6.4 ç¯å¢ƒå˜é‡æ¸…ç†


**æ¸…ç†ç¯å¢ƒå˜é‡é…ç½®**ï¼š
```bash
# åˆ é™¤ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
sudo rm -f /etc/profile.d/nginx.sh

# ä».bashrcä¸­åˆ é™¤ç›¸å…³é…ç½®
sed -i '/nginx/d' ~/.bashrc

# æ¸…ç†åº“é…ç½®
sudo rm -f /etc/ld.so.conf.d/nginx.conf
sudo ldconfig

# åˆ é™¤ç¬¦å·é“¾æ¥
sudo rm -f /usr/local/bin/nginx
```

### 6.5 æ™ºèƒ½å¸è½½è„šæœ¬


```bash
#!/bin/bash
# ç¼–è¯‘è½¯ä»¶æ™ºèƒ½å¸è½½è„šæœ¬

SOFTWARE_NAME="$1"
INSTALL_PREFIX="$2"

if [ -z "$SOFTWARE_NAME" ] || [ -z "$INSTALL_PREFIX" ]; then
    echo "ç”¨æ³•: $0 <è½¯ä»¶å> <å®‰è£…è·¯å¾„>"
    echo "ç¤ºä¾‹: $0 nginx /usr/local/nginx"
    exit 1
fi

echo "å‡†å¤‡å¸è½½ $SOFTWARE_NAME..."

# åœæ­¢ç›¸å…³æœåŠ¡
if systemctl is-active --quiet "$SOFTWARE_NAME"; then
    echo "åœæ­¢æœåŠ¡: $SOFTWARE_NAME"
    sudo systemctl stop "$SOFTWARE_NAME"
    sudo systemctl disable "$SOFTWARE_NAME"
fi

# åˆ é™¤å®‰è£…ç›®å½•
if [ -d "$INSTALL_PREFIX" ]; then
    echo "åˆ é™¤å®‰è£…ç›®å½•: $INSTALL_PREFIX"
    sudo rm -rf "$INSTALL_PREFIX"
fi

# æ¸…ç†ç¯å¢ƒå˜é‡
if [ -f "/etc/profile.d/${SOFTWARE_NAME}.sh" ]; then
    echo "æ¸…ç†ç¯å¢ƒå˜é‡é…ç½®"
    sudo rm -f "/etc/profile.d/${SOFTWARE_NAME}.sh"
fi

# æ¸…ç†ç¬¦å·é“¾æ¥
find /usr/local/bin /usr/bin -name "$SOFTWARE_NAME" -type l -exec sudo rm -f {} \;

echo "$SOFTWARE_NAME å¸è½½å®Œæˆï¼"
```

---

## 7. ğŸš€ å®æˆ˜æ¡ˆä¾‹æ¼”ç¤º


### 7.1 ç¼–è¯‘å®‰è£…Nginxå®æˆ˜


**å®Œæ•´ç¼–è¯‘å®‰è£…æµç¨‹**ï¼š

```bash
# ç¬¬1æ­¥ï¼šå‡†å¤‡ç¯å¢ƒ
sudo yum install gcc gcc-c++ make pcre-devel openssl-devel zlib-devel

# ç¬¬2æ­¥ï¼šä¸‹è½½æºç 
cd /usr/local/src
sudo wget http://nginx.org/download/nginx-1.20.2.tar.gz
sudo tar -xzf nginx-1.20.2.tar.gz
cd nginx-1.20.2

# ç¬¬3æ­¥ï¼šé…ç½®ç¼–è¯‘å‚æ•°
sudo ./configure \
  --prefix=/usr/local/nginx \
  --user=nginx \
  --group=nginx \
  --with-http_ssl_module \
  --with-http_v2_module \
  --with-http_realip_module \
  --with-http_gzip_static_module \
  --with-pcre \
  --with-file-aio

# ç¬¬4æ­¥ï¼šç¼–è¯‘
sudo make -j$(nproc)

# ç¬¬5æ­¥ï¼šå®‰è£…  
sudo make install

# ç¬¬6æ­¥ï¼šåˆ›å»ºç”¨æˆ·
sudo useradd -r -s /sbin/nologin nginx

# ç¬¬7æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡
echo 'export PATH="/usr/local/nginx/sbin:$PATH"' | sudo tee -a /etc/profile
source /etc/profile

# ç¬¬8æ­¥ï¼šå¯åŠ¨æµ‹è¯•
sudo nginx -t  # æµ‹è¯•é…ç½®
sudo nginx     # å¯åŠ¨æœåŠ¡
```

### 7.2 ç¼–è¯‘å®‰è£…Pythonå®æˆ˜


**Pythonæºç ç¼–è¯‘ç¤ºä¾‹**ï¼š

```bash
# å®‰è£…ç¼–è¯‘ä¾èµ–
sudo yum install gcc gcc-c++ make \
  zlib-devel bzip2-devel openssl-devel \
  ncurses-devel sqlite-devel readline-devel \
  tk-devel gdbm-devel db4-devel libpcap-devel \
  xz-devel libffi-devel

# ä¸‹è½½Pythonæºç 
cd /usr/local/src
sudo wget https://www.python.org/ftp/python/3.9.16/Python-3.9.16.tgz
sudo tar -xzf Python-3.9.16.tgz
cd Python-3.9.16

# é…ç½®ç¼–è¯‘é€‰é¡¹
sudo ./configure \
  --prefix=/usr/local/python3.9 \
  --enable-optimizations \
  --with-ssl \
  --enable-shared

# ç¼–è¯‘å®‰è£…
sudo make -j$(nproc)
sudo make install

# åˆ›å»ºç¬¦å·é“¾æ¥
sudo ln -s /usr/local/python3.9/bin/python3.9 /usr/local/bin/python3.9
sudo ln -s /usr/local/python3.9/bin/pip3.9 /usr/local/bin/pip3.9
```

### 7.3 å¸¸è§é—®é¢˜è§£å†³å®ä¾‹


**é—®é¢˜1ï¼šconfigureå¤±è´¥**
```bash
# é”™è¯¯ä¿¡æ¯
configure: error: C compiler cannot create executables

# è§£å†³æ–¹æ¡ˆ
sudo yum install gcc
export CC=gcc
./configure --prefix=/usr/local/app
```

**é—®é¢˜2ï¼šmakeç¼–è¯‘å¤±è´¥**
```bash
# é”™è¯¯ä¿¡æ¯  
fatal error: openssl/opensslv.h: No such file

# è§£å†³æ–¹æ¡ˆ
sudo yum install openssl-devel
# é‡æ–°é…ç½®å’Œç¼–è¯‘
make clean
./configure --with-openssl=/usr/include/openssl
make
```

**é—®é¢˜3ï¼šè¿è¡Œæ—¶åº“æ–‡ä»¶é”™è¯¯**
```bash
# é”™è¯¯ä¿¡æ¯
error while loading shared libraries: libssl.so.1.1

# è§£å†³æ–¹æ¡ˆ
echo '/usr/local/lib' | sudo tee -a /etc/ld.so.conf.d/local.conf
sudo ldconfig
```

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç¼–è¯‘å®‰è£…ä¸‰éƒ¨æ›²ï¼š./configure â†’ make â†’ make install
ğŸ”¸ ä¾èµ–ç®¡ç†ï¼šç¼–è¯‘å‰å¿…é¡»å®‰è£…æ‰€éœ€çš„å¼€å‘åº“å’Œå·¥å…·
ğŸ”¸ è·¯å¾„é…ç½®ï¼šåˆç†è§„åˆ’å®‰è£…è·¯å¾„ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤  
ğŸ”¸ ç¯å¢ƒå˜é‡ï¼šé…ç½®PATHè®©ç³»ç»Ÿæ‰¾åˆ°ç¼–è¯‘å®‰è£…çš„ç¨‹åº
ğŸ”¸ å¸è½½æ–¹æ³•ï¼šè®°å½•å®‰è£…æ–‡ä»¶ï¼Œæ‰‹åŠ¨æ¸…ç†ç›¸å…³æ–‡ä»¶å’Œé…ç½®
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç¼–è¯‘å®‰è£…çš„æœ¬è´¨**
```
ç†è§£è¦ç‚¹ï¼š
- æºç  â†’ å¯æ‰§è¡Œç¨‹åºçš„è½¬æ¢è¿‡ç¨‹
- æ ¹æ®å½“å‰ç³»ç»Ÿç¯å¢ƒå®šåˆ¶åŒ–æ„å»º
- æ¯”åŒ…ç®¡ç†å™¨å®‰è£…æ›´çµæ´»ä½†æ›´å¤æ‚
```

**ğŸ”¹ ä¾èµ–å…³ç³»çš„é‡è¦æ€§**
```
è®°å¿†æ–¹æ³•ï¼š
- ç¼–è¯‘ä¾èµ– = åˆ¶ä½œå·¥å…·ï¼ˆgccã€makeç­‰ï¼‰
- è¿è¡Œæ—¶ä¾èµ– = è¿è¡Œç¯å¢ƒï¼ˆåº“æ–‡ä»¶ç­‰ï¼‰
- ç¼ºå°‘ä»»ä½•ä¾èµ–éƒ½ä¼šå¯¼è‡´å¤±è´¥
```

**ğŸ”¹ è·¯å¾„å’Œç¯å¢ƒå˜é‡é…ç½®**
```
æœ€ä½³å®è·µï¼š
- ä½¿ç”¨æ ‡å‡†è·¯å¾„ï¼ˆ/usr/localï¼‰ä¾¿äºç®¡ç†
- ç»Ÿä¸€é…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶
- åˆ›å»ºç¬¦å·é“¾æ¥ç®€åŒ–ä½¿ç”¨
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ“Š åº”ç”¨åœºæ™¯åˆ¤æ–­**

| åœºæ™¯ | **æ¨èæ–¹å¼** | **åŸå› ** |
|------|-------------|---------|
| ğŸ  **ä¸ªäººå­¦ä¹ ** | `åŒ…ç®¡ç†å™¨ä¼˜å…ˆ` | `ç®€å•å¿«é€Ÿï¼Œæ»¡è¶³åŸºæœ¬éœ€æ±‚` |
| ğŸ¢ **ç”Ÿäº§ç¯å¢ƒ** | `ç¼–è¯‘å®‰è£…` | `ç¨³å®šå¯æ§ï¼Œæ€§èƒ½ä¼˜åŒ–` |
| ğŸ”¬ **å¼€å‘æµ‹è¯•** | `ç¼–è¯‘å®‰è£…` | `ç‰ˆæœ¬çµæ´»ï¼ŒåŠŸèƒ½å®šåˆ¶` |
| âš¡ **å¿«é€Ÿéƒ¨ç½²** | `åŒ…ç®¡ç†å™¨` | `è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜` |

**ğŸ› ï¸ å®è·µæŠ€å·§æ€»ç»“**
- **ç¼–è¯‘å‰**ï¼šå……åˆ†äº†è§£è½¯ä»¶ä¾èµ–å’Œé…ç½®é€‰é¡¹
- **ç¼–è¯‘æ—¶**ï¼šè®°å½•å®‰è£…æ–‡ä»¶ï¼Œä¾¿äºåç»­ç®¡ç†
- **å®‰è£…å**ï¼šæµ‹è¯•åŠŸèƒ½ï¼Œé…ç½®ç¯å¢ƒå˜é‡
- **ç»´æŠ¤ä¸­**ï¼šå®šæœŸå¤‡ä»½é…ç½®ï¼Œè®°å½•å˜æ›´å†å²

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- ç¼–è¯‘ä¸‰æ­¥èµ°ï¼šé…ç½®ç¼–è¯‘è£…
- ä¾èµ–è¦é½å…¨ï¼Œç¯å¢ƒè¦é…å¥½  
- è·¯å¾„è¦è§„èŒƒï¼Œå¸è½½é è®°å½•
- æºç å˜ç¨‹åºï¼Œå®šåˆ¶æ›´çµæ´»