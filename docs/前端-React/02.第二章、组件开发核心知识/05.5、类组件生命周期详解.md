---
title: 5ã€ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè¯¦è§£
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ](#1-ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ)
2. [ä¸‰ä¸ªæ ¸å¿ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•](#2-ä¸‰ä¸ªæ ¸å¿ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•)
3. [renderæ–¹æ³•æ·±å…¥ç†è§£](#3-renderæ–¹æ³•æ·±å…¥ç†è§£)
4. [ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹](#4-ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹)
5. [ç”Ÿå‘½å‘¨æœŸä¸Hookså¯¹åº”å…³ç³»](#5-ç”Ÿå‘½å‘¨æœŸä¸hookså¯¹åº”å…³ç³»)
6. [å®é™…åº”ç”¨åœºæ™¯](#6-å®é™…åº”ç”¨åœºæ™¯)
7. [æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹](#7-æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”„ ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ


### 1.1 é€šä¿—ç†è§£ç”Ÿå‘½å‘¨æœŸ


**ç”Ÿå‘½å‘¨æœŸå°±åƒäººçš„ä¸€ç”Ÿ**ï¼šå‡ºç”Ÿ â†’ æˆé•¿ â†’ è€å» â†’ æ­»äº¡

```
äººçš„ç”Ÿå‘½å‘¨æœŸï¼š          Reactç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼š
    å‡ºç”Ÿ                     ç»„ä»¶åˆ›å»º
     â†“                        â†“
    æˆé•¿                     ç»„ä»¶æ›´æ–°
     â†“                        â†“  
    æ­»äº¡                     ç»„ä»¶é”€æ¯
```

Reactç»„ä»¶ä¹Ÿæœ‰ç±»ä¼¼çš„"äººç”Ÿé˜¶æ®µ"ï¼Œæ¯ä¸ªé˜¶æ®µReactä¼šè‡ªåŠ¨è°ƒç”¨ç‰¹å®šçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°±å«**ç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ã€‚

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç”Ÿå‘½å‘¨æœŸ


**ğŸ¤” é—®é¢˜**ï¼šç»„ä»¶ä»€ä¹ˆæ—¶å€™è¯¥åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ

```
å®é™…éœ€æ±‚åœºæ™¯ï¼š
âœ… ç»„ä»¶åˆšå‡ºç°æ—¶ â†’ å‘é€ç½‘ç»œè¯·æ±‚è·å–æ•°æ®
âœ… ç»„ä»¶æ•°æ®æ›´æ–°æ—¶ â†’ é‡æ–°è®¡ç®—æŸäº›å€¼
âœ… ç»„ä»¶å³å°†æ¶ˆå¤±æ—¶ â†’ æ¸…ç†å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼
```

**ğŸ’¡ è§£å†³æ–¹æ¡ˆ**ï¼šReactæä¾›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè®©æˆ‘ä»¬åœ¨åˆé€‚çš„æ—¶æœºåšåˆé€‚çš„äº‹ã€‚

### 1.3 ç”Ÿå‘½å‘¨æœŸçš„æœ¬è´¨


> **ç”Ÿå‘½å‘¨æœŸ = Reactç»™ä½ çš„"æ—¶æœºé€šçŸ¥"**
> 
> Reactè¯´ï¼š"å˜¿ï¼Œç»„ä»¶ç°åœ¨è¦å‡ºç°äº†ï¼Œä½ è¦åšä»€ä¹ˆå—ï¼Ÿ"
> Reactè¯´ï¼š"å˜¿ï¼Œç»„ä»¶æ•°æ®å˜äº†ï¼Œä½ è¦åšä»€ä¹ˆå—ï¼Ÿ"  
> Reactè¯´ï¼š"å˜¿ï¼Œç»„ä»¶è¦æ¶ˆå¤±äº†ï¼Œä½ è¦åšä»€ä¹ˆå—ï¼Ÿ"

---

## 2. ğŸ¯ ä¸‰ä¸ªæ ¸å¿ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•


### 2.1 componentDidMount - ç»„ä»¶"å‡ºç”Ÿ"äº†


**ğŸ”¸ å«ä¹‰**ï¼šç»„ä»¶ç¬¬ä¸€æ¬¡å‡ºç°åœ¨é¡µé¢ä¸Šæ—¶è°ƒç”¨

**é€šä¿—ç†è§£**ï¼šå°±åƒå©´å„¿å‡ºç”Ÿåçš„ç¬¬ä¸€å£°å•¼å“­

```javascript
class UserProfile extends React.Component {
  componentDidMount() {
    // ç»„ä»¶åˆšå‡ºç°ï¼Œé€‚åˆåšè¿™äº›äº‹ï¼š
    console.log("ç»„ä»¶å‡ºç”Ÿäº†ï¼");
    
    // 1. å‘é€ç½‘ç»œè¯·æ±‚
    this.fetchUserData();
    
    // 2. å¯åŠ¨å®šæ—¶å™¨
    this.timer = setInterval(() => {
      console.log("å¿ƒè·³æ£€æµ‹");
    }, 1000);
  }
  
  fetchUserData = () => {
    // è·å–ç”¨æˆ·æ•°æ®
    fetch('/api/user')
      .then(response => response.json())
      .then(data => this.setState({ user: data }));
  }
}
```

**âš¡ ä½¿ç”¨æ—¶æœº**ï¼š
- ğŸŒ å‘é€ç½‘ç»œè¯·æ±‚è·å–æ•°æ®
- â° å¯åŠ¨å®šæ—¶å™¨
- ğŸ“Š åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ï¼ˆå›¾è¡¨åº“ã€åœ°å›¾ç­‰ï¼‰
- ğŸ‘‚ æ·»åŠ äº‹ä»¶ç›‘å¬å™¨

### 2.2 componentDidUpdate - ç»„ä»¶"æˆé•¿"äº†


**ğŸ”¸ å«ä¹‰**ï¼šç»„ä»¶é‡æ–°æ¸²æŸ“å®Œæˆåè°ƒç”¨ï¼ˆæ•°æ®æ›´æ–°äº†ï¼‰

**é€šä¿—ç†è§£**ï¼šå°±åƒäººé•¿å¤§äº†ï¼Œéœ€è¦æ¢æ›´å¤§çš„è¡£æœ

```javascript
class UserProfile extends React.Component {
  componentDidUpdate(prevProps, prevState) {
    // ç»„ä»¶æ›´æ–°äº†ï¼Œæ£€æŸ¥å“ªé‡Œå˜äº†
    
    // 1. ç”¨æˆ·IDå˜äº†ï¼Œé‡æ–°è·å–æ•°æ®
    if (prevProps.userId !== this.props.userId) {
      this.fetchUserData(this.props.userId);
    }
    
    // 2. çŠ¶æ€å˜äº†ï¼Œåšç›¸åº”å¤„ç†
    if (prevState.user !== this.state.user) {
      console.log("ç”¨æˆ·ä¿¡æ¯æ›´æ–°äº†");
    }
  }
}
```

**ğŸ“‹ å‚æ•°è¯´æ˜**ï¼š
- `prevProps`ï¼šæ›´æ–°å‰çš„props
- `prevState`ï¼šæ›´æ–°å‰çš„state

**âš¡ ä½¿ç”¨æ—¶æœº**ï¼š
- ğŸ”„ propså˜åŒ–æ—¶é‡æ–°è·å–æ•°æ®
- ğŸ“Š æ ¹æ®æ–°æ•°æ®æ›´æ–°å›¾è¡¨
- ğŸ¯ å“åº”ç‰¹å®šçŠ¶æ€å˜åŒ–

### 2.3 componentWillUnmount - ç»„ä»¶"ç¦»ä¸–"äº†


**ğŸ”¸ å«ä¹‰**ï¼šç»„ä»¶å³å°†ä»é¡µé¢æ¶ˆå¤±æ—¶è°ƒç”¨

**é€šä¿—ç†è§£**ï¼šå°±åƒäººå»ä¸–å‰è¦äº¤ä»£åäº‹

```javascript
class UserProfile extends React.Component {
  componentWillUnmount() {
    // ç»„ä»¶è¦æ¶ˆå¤±äº†ï¼Œæ¸…ç†èµ„æº
    console.log("ç»„ä»¶è¦æ¶ˆå¤±äº†ï¼Œæ¸…ç†èµ„æº");
    
    // 1. æ¸…é™¤å®šæ—¶å™¨
    if (this.timer) {
      clearInterval(this.timer);
    }
    
    // 2. å–æ¶ˆç½‘ç»œè¯·æ±‚
    if (this.request) {
      this.request.abort();
    }
    
    // 3. ç§»é™¤äº‹ä»¶ç›‘å¬
    window.removeEventListener('resize', this.handleResize);
  }
}
```

**âš¡ ä½¿ç”¨æ—¶æœº**ï¼š
- â° æ¸…é™¤å®šæ—¶å™¨å’Œå»¶æ—¶å™¨
- ğŸŒ å–æ¶ˆç½‘ç»œè¯·æ±‚
- ğŸ‘‚ ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
- ğŸ§¹ æ¸…ç†è®¢é˜…å’Œèµ„æº

---

## 3. ğŸ¨ renderæ–¹æ³•æ·±å…¥ç†è§£


### 3.1 renderæ–¹æ³•çš„æœ¬è´¨


**ğŸ”¸ å«ä¹‰**ï¼šå‘Šè¯‰Reactåº”è¯¥åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä»€ä¹ˆ

**é€šä¿—ç†è§£**ï¼šrenderå°±åƒç”»å®¶çš„ç”»ç¬”ï¼Œæè¿°è¦ç”»ä»€ä¹ˆ

```javascript
class Welcome extends React.Component {
  render() {
    // è¿™é‡Œè¿”å›çš„å°±æ˜¯è¦æ˜¾ç¤ºçš„å†…å®¹
    return (
      <div>
        <h1>æ¬¢è¿ {this.props.name}!</h1>
        <p>ä»Šå¤©æ˜¯ {new Date().toLocaleDateString()}</p>
      </div>
    );
  }
}
```

### 3.2 renderè°ƒç”¨æ—¶æœº


**ğŸ”„ renderä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿ**

```
è§¦å‘renderçš„æƒ…å†µï¼š
â‘  ç»„ä»¶é¦–æ¬¡åˆ›å»º â†’ è°ƒç”¨render
â‘¡ setState()è°ƒç”¨ â†’ è°ƒç”¨render  
â‘¢ propså‘ç”Ÿå˜åŒ– â†’ è°ƒç”¨render
â‘£ çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ â†’ å­ç»„ä»¶render
```

```javascript
class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
    console.log("1. æ„é€ å‡½æ•°");
  }
  
  render() {
    console.log("2. renderè¢«è°ƒç”¨");
    return (
      <div>
        <p>è®¡æ•°ï¼š{this.state.count}</p>
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          +1
        </button>
      </div>
    );
  }
  
  componentDidMount() {
    console.log("3. componentDidMount");
  }
}
```

### 3.3 renderçš„é‡è¦è§„åˆ™


**âš ï¸ renderæ–¹æ³•çš„çº¦å®š**ï¼š
- âœ… **çº¯å‡½æ•°**ï¼šç›¸åŒè¾“å…¥æ€»æ˜¯è¿”å›ç›¸åŒè¾“å‡º
- âœ… **ä¸èƒ½ä¿®æ”¹state**ï¼šä¸èƒ½åœ¨renderé‡Œè°ƒç”¨setState
- âœ… **ä¸èƒ½æœ‰å‰¯ä½œç”¨**ï¼šä¸èƒ½å‘é€ç½‘ç»œè¯·æ±‚
- âœ… **å¿…é¡»è¿”å›å†…å®¹**ï¼šè¿”å›JSXã€nullã€å­—ç¬¦ä¸²ç­‰

```javascript
// âŒ é”™è¯¯ç¤ºä¾‹
class BadComponent extends React.Component {
  render() {
    // é”™è¯¯ï¼šåœ¨renderä¸­ä¿®æ”¹state
    this.setState({ something: 'value' }); // ä¼šé€ æˆæ— é™å¾ªç¯ï¼
    
    // é”™è¯¯ï¼šåœ¨renderä¸­å‘é€è¯·æ±‚
    fetch('/api/data'); // æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šå‘é€è¯·æ±‚ï¼
    
    return <div>Bad Example</div>;
  }
}

// âœ… æ­£ç¡®ç¤ºä¾‹
class GoodComponent extends React.Component {
  render() {
    // æ­£ç¡®ï¼šæ ¹æ®propså’Œstateè®¡ç®—æ˜¾ç¤ºå†…å®¹
    const message = this.props.isLoggedIn ? 'æ¬¢è¿å›æ¥' : 'è¯·ç™»å½•';
    
    return (
      <div>
        <h1>{message}</h1>
        <p>ç”¨æˆ·åï¼š{this.state.username}</p>
      </div>
    );
  }
}
```

---

## 4. ğŸ“Š ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹


### 4.1 ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå…¨æ™¯å›¾


```
ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹ï¼š

åˆ›å»ºé˜¶æ®µ (Mounting)ï¼š
  constructor() 
       â†“
    render()          â† "ç”»"ç»„ä»¶
       â†“
  componentDidMount() â† "å‡ºç”Ÿäº†"

æ›´æ–°é˜¶æ®µ (Updating)ï¼š
  state/propså˜åŒ–
       â†“
    render()          â† "é‡æ–°ç”»"ç»„ä»¶  
       â†“
  componentDidUpdate() â† "é•¿å¤§äº†"

é”€æ¯é˜¶æ®µ (Unmounting)ï¼š
  componentWillUnmount() â† "è¦ç¦»å¼€äº†"
```

### 4.2 ç”Ÿå‘½å‘¨æœŸæµç¨‹ç¤ºä¾‹


```javascript
class LifecycleDemo extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
    console.log("ğŸ“¦ 1. constructor - ç»„ä»¶å‡†å¤‡å‡ºç”Ÿ");
  }
  
  render() {
    console.log("ğŸ¨ 2. render - æ­£åœ¨ç”»ç»„ä»¶");
    return (
      <div>
        <h2>è®¡æ•°å™¨ï¼š{this.state.count}</h2>
        <button onClick={this.handleClick}>ç‚¹å‡»+1</button>
      </div>
    );
  }
  
  componentDidMount() {
    console.log("ğŸ‰ 3. componentDidMount - ç»„ä»¶å‡ºç”Ÿäº†ï¼");
  }
  
  componentDidUpdate(prevProps, prevState) {
    console.log("ğŸ”„ 4. componentDidUpdate - ç»„ä»¶æ›´æ–°äº†ï¼");
    console.log(`ä» ${prevState.count} å˜æˆ ${this.state.count}`);
  }
  
  componentWillUnmount() {
    console.log("ğŸ‘‹ 5. componentWillUnmount - ç»„ä»¶è¦ç¦»å¼€äº†");
  }
  
  handleClick = () => {
    this.setState({ count: this.state.count + 1 });
  }
}
```

### 4.3 å®é™…è¿è¡Œæ—¶åº


```
ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š
ğŸ“¦ 1. constructor
ğŸ¨ 2. render  
ğŸ‰ 3. componentDidMount

ç‚¹å‡»æŒ‰é’®æ›´æ–°ï¼š
ğŸ¨ 2. render
ğŸ”„ 4. componentDidUpdate

ç»„ä»¶æ¶ˆå¤±ï¼š
ğŸ‘‹ 5. componentWillUnmount
```

---

## 5. ğŸ”— ç”Ÿå‘½å‘¨æœŸä¸Hookså¯¹åº”å…³ç³»


### 5.1 ç°ä»£Reactçš„é€‰æ‹©


**ğŸ’¡ è¶‹åŠ¿è¯´æ˜**ï¼šç°åœ¨æ›´æ¨èç”¨**å‡½æ•°ç»„ä»¶ + Hooks**æ›¿ä»£ç±»ç»„ä»¶

| **ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ** | **Hooksç­‰ä»·å†™æ³•** | **ç”¨é€”è¯´æ˜** |
|------------------|------------------|-------------|
| `componentDidMount` | `useEffect(() => {}, [])` | ç»„ä»¶å‡ºç°æ—¶æ‰§è¡Œ |
| `componentDidUpdate` | `useEffect(() => {})` | æ¯æ¬¡æ›´æ–°æ—¶æ‰§è¡Œ |
| `componentWillUnmount` | `useEffect(() => { return cleanup }, [])` | ç»„ä»¶æ¶ˆå¤±æ—¶æ‰§è¡Œ |

### 5.2 å¯¹åº”å…³ç³»ç¤ºä¾‹


**ç±»ç»„ä»¶å†™æ³•**ï¼š
```javascript
class Timer extends React.Component {
  componentDidMount() {
    this.timer = setInterval(() => {
      console.log('å®šæ—¶å™¨æ‰§è¡Œ');
    }, 1000);
  }
  
  componentWillUnmount() {
    clearInterval(this.timer);
  }
  
  render() {
    return <div>å®šæ—¶å™¨ç»„ä»¶</div>;
  }
}
```

**Hookså†™æ³•**ï¼š
```javascript
function Timer() {
  useEffect(() => {
    // ç›¸å½“äº componentDidMount
    const timer = setInterval(() => {
      console.log('å®šæ—¶å™¨æ‰§è¡Œ');
    }, 1000);
    
    // è¿”å›çš„å‡½æ•°ç›¸å½“äº componentWillUnmount
    return () => {
      clearInterval(timer);
    };
  }, []); // ç©ºæ•°ç»„è¡¨ç¤ºåªåœ¨å‡ºç°æ—¶æ‰§è¡Œä¸€æ¬¡
  
  return <div>å®šæ—¶å™¨ç»„ä»¶</div>;
}
```

### 5.3 å­¦ä¹ å»ºè®®


> **ğŸ’¡ å­¦ä¹ ç­–ç•¥**ï¼š
> 
> âœ… **ç†è§£ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µ**ï¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆäº‹
> âœ… **æŒæ¡ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•**ï¼šMountã€Updateã€Unmount
> âœ… **é€æ­¥è½¬å‘Hooks**ï¼šæ–°é¡¹ç›®å»ºè®®ç”¨å‡½æ•°ç»„ä»¶
> âœ… **ä½†ä¸è¦å¿½è§†ç±»ç»„ä»¶**ï¼šè€é¡¹ç›®ç»´æŠ¤è¿˜ä¼šé‡åˆ°

---

## 6. ğŸ¯ å®é™…åº”ç”¨åœºæ™¯


### 6.1 æ•°æ®è·å–åœºæ™¯


```javascript
class UserList extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      users: [],
      loading: true
    };
  }
  
  componentDidMount() {
    // ç»„ä»¶å‡ºç°åç«‹å³è·å–æ•°æ®
    this.fetchUsers();
  }
  
  componentDidUpdate(prevProps) {
    // å¦‚æœæœç´¢å…³é”®è¯å˜äº†ï¼Œé‡æ–°è·å–æ•°æ®
    if (prevProps.searchKeyword !== this.props.searchKeyword) {
      this.fetchUsers();
    }
  }
  
  fetchUsers = () => {
    this.setState({ loading: true });
    
    fetch(`/api/users?search=${this.props.searchKeyword}`)
      .then(response => response.json())
      .then(users => {
        this.setState({ 
          users, 
          loading: false 
        });
      });
  }
  
  render() {
    const { users, loading } = this.state;
    
    if (loading) {
      return <div>åŠ è½½ä¸­...</div>;
    }
    
    return (
      <ul>
        {users.map(user => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    );
  }
}
```

### 6.2 å®šæ—¶å™¨åœºæ™¯


```javascript
class Clock extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      currentTime: new Date()
    };
  }
  
  componentDidMount() {
    // ç»„ä»¶å‡ºç°åå¯åŠ¨å®šæ—¶å™¨
    this.timer = setInterval(() => {
      this.setState({
        currentTime: new Date()
      });
    }, 1000);
  }
  
  componentWillUnmount() {
    // ç»„ä»¶æ¶ˆå¤±å‰æ¸…é™¤å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼
    if (this.timer) {
      clearInterval(this.timer);
    }
  }
  
  render() {
    return (
      <div>
        <h2>å½“å‰æ—¶é—´</h2>
        <p>{this.state.currentTime.toLocaleTimeString()}</p>
      </div>
    );
  }
}
```

### 6.3 äº‹ä»¶ç›‘å¬åœºæ™¯


```javascript
class WindowSize extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      windowWidth: window.innerWidth,
      windowHeight: window.innerHeight
    };
  }
  
  componentDidMount() {
    // æ·»åŠ çª—å£å¤§å°å˜åŒ–ç›‘å¬
    window.addEventListener('resize', this.handleResize);
  }
  
  componentWillUnmount() {
    // ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼
    window.removeEventListener('resize', this.handleResize);
  }
  
  handleResize = () => {
    this.setState({
      windowWidth: window.innerWidth,
      windowHeight: window.innerHeight
    });
  }
  
  render() {
    const { windowWidth, windowHeight } = this.state;
    
    return (
      <div>
        <p>çª—å£å®½åº¦ï¼š{windowWidth}px</p>
        <p>çª—å£é«˜åº¦ï¼š{windowHeight}px</p>
      </div>
    );
  }
}
```

---

## 7. âš ï¸ æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹


### 7.1 å¸¸è§é”™è¯¯ä¸è§£å†³


**âŒ é”™è¯¯1ï¼šåœ¨renderä¸­è°ƒç”¨setState**
```javascript
// é”™è¯¯å†™æ³• - ä¼šé€ æˆæ— é™å¾ªç¯
class BadComponent extends React.Component {
  render() {
    this.setState({ something: 'value' }); // ğŸ’¥ æ— é™å¾ªç¯ï¼
    return <div>Bad</div>;
  }
}

// æ­£ç¡®å†™æ³•
class GoodComponent extends React.Component {
  componentDidMount() {
    this.setState({ something: 'value' }); // âœ… åœ¨åˆé€‚çš„ç”Ÿå‘½å‘¨æœŸä¸­
  }
  
  render() {
    return <div>Good</div>;
  }
}
```

**âŒ é”™è¯¯2ï¼šå¿˜è®°æ¸…ç†èµ„æº**
```javascript
// é”™è¯¯å†™æ³• - ä¼šå¯¼è‡´å†…å­˜æ³„æ¼
class BadTimer extends React.Component {
  componentDidMount() {
    setInterval(() => {
      console.log('å®šæ—¶å™¨è¿˜åœ¨è¿è¡Œ');
    }, 1000); // ğŸ’¥ ç»„ä»¶é”€æ¯åå®šæ—¶å™¨è¿˜åœ¨è¿è¡Œï¼
  }
}

// æ­£ç¡®å†™æ³•
class GoodTimer extends React.Component {
  componentDidMount() {
    this.timer = setInterval(() => {
      console.log('å®šæ—¶å™¨è¿è¡Œä¸­');
    }, 1000);
  }
  
  componentWillUnmount() {
    clearInterval(this.timer); // âœ… æ¸…ç†å®šæ—¶å™¨
  }
}
```

### 7.2 æ€§èƒ½ä¼˜åŒ–æŠ€å·§


**ğŸš€ é¿å…ä¸å¿…è¦çš„æ›´æ–°**ï¼š
```javascript
class OptimizedComponent extends React.Component {
  componentDidUpdate(prevProps, prevState) {
    // åªåœ¨å¿…è¦æ—¶æ‰æ‰§è¡Œæ˜‚è´µæ“ä½œ
    if (prevProps.userId !== this.props.userId) {
      this.fetchUserData(); // åªæœ‰ç”¨æˆ·IDå˜äº†æ‰é‡æ–°è·å–
    }
    
    // é¿å…å¯¹æ¯ä¸ªå¾®å°å˜åŒ–éƒ½åšå“åº”
    if (prevState.count !== this.state.count) {
      // åªæœ‰countçœŸçš„å˜äº†æ‰æ‰§è¡Œ
      this.updateChart();
    }
  }
}
```

### 7.3 æœ€ä½³å®è·µæ¸…å•


**âœ… ç”Ÿå‘½å‘¨æœŸæœ€ä½³å®è·µ**ï¼š

1. **ğŸ“‹ æ˜ç¡®èŒè´£**ï¼š
   - `componentDidMount`ï¼šåˆå§‹åŒ–æ“ä½œ
   - `componentDidUpdate`ï¼šå“åº”å˜åŒ–  
   - `componentWillUnmount`ï¼šæ¸…ç†èµ„æº

2. **ğŸ§¹ èµ„æºæ¸…ç†**ï¼š
   - å®šæ—¶å™¨è¦æ¸…é™¤
   - äº‹ä»¶ç›‘å¬è¦ç§»é™¤
   - ç½‘ç»œè¯·æ±‚è¦å–æ¶ˆ

3. **âš¡ æ€§èƒ½è€ƒè™‘**ï¼š
   - é¿å…åœ¨renderä¸­åšå¤æ‚è®¡ç®—
   - ä½¿ç”¨æ¡ä»¶åˆ¤æ–­é¿å…ä¸å¿…è¦çš„æ“ä½œ
   - è€ƒè™‘ä½¿ç”¨React.memoä¼˜åŒ–æ¸²æŸ“

4. **ğŸ”’ å®‰å…¨ç¼–ç¨‹**ï¼š
   - æ£€æŸ¥ç»„ä»¶æ˜¯å¦è¿˜å­˜åœ¨å†setState
   - ä½¿ç”¨å¯é€‰é“¾æ“ä½œç¬¦é¿å…æŠ¥é”™
   - è®¾ç½®é»˜è®¤å€¼é˜²æ­¢undefinedé”™è¯¯

---

## 8. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç”Ÿå‘½å‘¨æœŸæœ¬è´¨ï¼šReactåœ¨åˆé€‚æ—¶æœºè°ƒç”¨çš„æ–¹æ³•
ğŸ”¸ ä¸‰å¤§æ ¸å¿ƒæ–¹æ³•ï¼šMount(å‡ºç”Ÿ) â†’ Update(æˆé•¿) â†’ Unmount(ç¦»ä¸–)  
ğŸ”¸ renderæ–¹æ³•ï¼šçº¯å‡½æ•°ï¼Œæè¿°è¦æ˜¾ç¤ºä»€ä¹ˆ
ğŸ”¸ ä½¿ç”¨æ—¶æœºï¼šåˆå§‹åŒ–ã€æ•°æ®è·å–ã€èµ„æºæ¸…ç†
ğŸ”¸ ä¸Hookså¯¹åº”ï¼šuseEffectå¯ä»¥æ›¿ä»£æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸ
```

### 8.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ç”Ÿå‘½å‘¨æœŸçš„ä»·å€¼**ï¼š
```
è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š
- ä»€ä¹ˆæ—¶å€™è·å–æ•°æ®ï¼Ÿ â†’ componentDidMount
- ä»€ä¹ˆæ—¶å€™å“åº”å˜åŒ–ï¼Ÿ â†’ componentDidUpdate  
- ä»€ä¹ˆæ—¶å€™æ¸…ç†èµ„æºï¼Ÿ â†’ componentWillUnmount
```

**ğŸ”¹ ç°ä»£Reactè¶‹åŠ¿**ï¼š
```
ç±»ç»„ä»¶ â†’ å‡½æ•°ç»„ä»¶ + Hooks
- ä»£ç æ›´ç®€æ´
- é€»è¾‘æ›´é›†ä¸­
- æ€§èƒ½æ›´å¥½
- æ›´å®¹æ˜“æµ‹è¯•
```

### 8.3 å®é™…åº”ç”¨ä»·å€¼


**ğŸ¯ å¼€å‘åœºæ™¯åº”ç”¨**ï¼š
- **æ•°æ®é©±åŠ¨åº”ç”¨**ï¼šcomponentDidMountè·å–åˆå§‹æ•°æ®
- **å®æ—¶åº”ç”¨**ï¼šcomponentDidUpdateå“åº”æ•°æ®å˜åŒ–
- **æ€§èƒ½ä¼˜åŒ–**ï¼šcomponentWillUnmountæ¸…ç†èµ„æº
- **ç”¨æˆ·äº¤äº’**ï¼šç»“åˆäº‹ä»¶å¤„ç†æä¾›æµç•…ä½“éªŒ

**ğŸ”§ é—®é¢˜è§£å†³èƒ½åŠ›**ï¼š
- **å†…å­˜æ³„æ¼**ï¼šæ­£ç¡®æ¸…ç†å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬
- **é‡å¤è¯·æ±‚**ï¼šæ¡ä»¶åˆ¤æ–­é¿å…ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚
- **æ€§èƒ½é—®é¢˜**ï¼šä¼˜åŒ–æ¸²æŸ“æ¬¡æ•°å’Œæ“ä½œæ—¶æœº
- **çŠ¶æ€ç®¡ç†**ï¼šåœ¨æ­£ç¡®çš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µæ›´æ–°çŠ¶æ€

**æ ¸å¿ƒè®°å¿†**ï¼š
- ç”Ÿå‘½å‘¨æœŸæ˜¯Reactçš„"æ—¶æœºé€šçŸ¥ç³»ç»Ÿ"
- ä¸‰ä¸ªæ–¹æ³•å¯¹åº”ç»„ä»¶çš„"ç”Ÿè€ç—…æ­»"
- renderæ˜¯çº¯å‡½æ•°ï¼Œå…¶ä»–ç”Ÿå‘½å‘¨æœŸå¤„ç†å‰¯ä½œç”¨
- ç°ä»£Reactæ¨èHooksï¼Œä½†ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µä¾ç„¶é‡è¦