---
title: 1ã€HTTPè¯·æ±‚åŸºç¡€
---
## ğŸ“š ç›®å½•

1. [å‰ç«¯ç½‘ç»œè¯·æ±‚æ¦‚å¿µ](#1-å‰ç«¯ç½‘ç»œè¯·æ±‚æ¦‚å¿µ)
2. [fetch APIåŸºæœ¬ç”¨æ³•](#2-fetch-apiåŸºæœ¬ç”¨æ³•)
3. [axiosåº“ä»‹ç»ä¸é…ç½®](#3-axiosåº“ä»‹ç»ä¸é…ç½®)
4. [GETè¯·æ±‚è·å–æ•°æ®](#4-getè¯·æ±‚è·å–æ•°æ®)
5. [POSTè¯·æ±‚æäº¤æ•°æ®](#5-postè¯·æ±‚æäº¤æ•°æ®)
6. [è¯·æ±‚å‚æ•°ä¸é”™è¯¯å¤„ç†](#6-è¯·æ±‚å‚æ•°ä¸é”™è¯¯å¤„ç†)
7. [è¯·æ±‚æ‹¦æˆªå™¨ä¸å“åº”æ‹¦æˆªå™¨](#7-è¯·æ±‚æ‹¦æˆªå™¨ä¸å“åº”æ‹¦æˆªå™¨)
8. [é€šç”¨è¯·æ±‚å·¥å…·å°è£…](#8-é€šç”¨è¯·æ±‚å·¥å…·å°è£…)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸŒ å‰ç«¯ç½‘ç»œè¯·æ±‚æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯ç½‘ç»œè¯·æ±‚

**ç®€å•ç†è§£**ï¼šå°±åƒä½ å»é¤å…ç‚¹èœä¸€æ ·
```
ä½ ï¼ˆå‰ç«¯ï¼‰ â†’ æœåŠ¡å‘˜ï¼ˆHTTPè¯·æ±‚ï¼‰ â†’ å¨æˆ¿ï¼ˆåç«¯æœåŠ¡å™¨ï¼‰
å¨æˆ¿ï¼ˆåç«¯ï¼‰ â†’ æœåŠ¡å‘˜ï¼ˆHTTPå“åº”ï¼‰ â†’ ä½ ï¼ˆå‰ç«¯ï¼‰

å®é™…è¿‡ç¨‹ï¼š
Reactåº”ç”¨ â†’ å‘é€è¯·æ±‚ â†’ åç«¯API
åç«¯API â†’ è¿”å›æ•°æ® â†’ Reactåº”ç”¨æ˜¾ç¤º
```

**ä¸ºä»€ä¹ˆéœ€è¦ç½‘ç»œè¯·æ±‚ï¼Ÿ**
- ğŸ“Š **è·å–æ•°æ®**ï¼šä»æœåŠ¡å™¨æ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ã€å•†å“åˆ—è¡¨ç­‰
- ğŸ’¾ **æäº¤æ•°æ®**ï¼šå‘æœåŠ¡å™¨å‘é€è¡¨å•ã€ä¸Šä¼ æ–‡ä»¶ç­‰  
- ğŸ”„ **å®æ—¶æ›´æ–°**ï¼šè·å–æœ€æ–°çš„æ•°æ®å†…å®¹
- ğŸ” **ç”¨æˆ·è®¤è¯**ï¼šç™»å½•ã€æ³¨å†Œã€æƒé™éªŒè¯

### 1.2 å¸¸è§çš„è¯·æ±‚æ–¹å¼

```
GETï¼šè·å–æ•°æ®ï¼ˆå°±åƒé—®æœåŠ¡å‘˜"èœå•æ˜¯ä»€ä¹ˆï¼Ÿ"ï¼‰
POSTï¼šæäº¤æ•°æ®ï¼ˆå°±åƒå‘Šè¯‰æœåŠ¡å‘˜"æˆ‘è¦è¿™ä¸ªèœ"ï¼‰
PUTï¼šæ›´æ–°æ•°æ®ï¼ˆå°±åƒè¯´"æŠŠæˆ‘çš„èœæ”¹æˆé‚£ä¸ª"ï¼‰
DELETEï¼šåˆ é™¤æ•°æ®ï¼ˆå°±åƒè¯´"å–æ¶ˆæˆ‘çš„è®¢å•"ï¼‰
```

### 1.3 Reactä¸­çš„è¯·æ±‚æ—¶æœº

> ğŸ’¡ **ä»€ä¹ˆæ—¶å€™å‘è¯·æ±‚ï¼Ÿ**

- âœ… **ç»„ä»¶åŠ è½½æ—¶**ï¼šé¡µé¢æ‰“å¼€å°±è¦æ˜¾ç¤ºæ•°æ®
- âœ… **ç”¨æˆ·æ“ä½œæ—¶**ï¼šç‚¹å‡»æŒ‰é’®ã€æäº¤è¡¨å•
- âœ… **å®šæ—¶æ›´æ–°æ—¶**ï¼šæ¯éš”ä¸€æ®µæ—¶é—´åˆ·æ–°æ•°æ®
- âœ… **è·¯ç”±åˆ‡æ¢æ—¶**ï¼šè¿›å…¥æ–°é¡µé¢éœ€è¦æ–°æ•°æ®

---

## 2. ğŸ”§ fetch APIåŸºæœ¬ç”¨æ³•


### 2.1 ä»€ä¹ˆæ˜¯fetch

**ç®€å•è§£é‡Š**ï¼šfetchæ˜¯æµè§ˆå™¨å†…ç½®çš„å‘è¯·æ±‚å·¥å…·ï¼Œå°±åƒå†…ç½®çš„"å¿«é€’å‘˜"

```javascript
// æœ€ç®€å•çš„GETè¯·æ±‚
fetch('https://api.example.com/users')
  .then(response => response.json())  // æŠŠå¿«é€’åŒ…è£¹æ‰“å¼€
  .then(data => console.log(data))    // çœ‹çœ‹é‡Œé¢æ˜¯ä»€ä¹ˆ
```

### 2.2 fetchçš„åŸºæœ¬è¯­æ³•

```javascript
// GETè¯·æ±‚ï¼ˆè·å–æ•°æ®ï¼‰
const getData = async () => {
  try {
    const response = await fetch('https://api.example.com/users')
    const data = await response.json()
    console.log('è·å–åˆ°çš„æ•°æ®ï¼š', data)
  } catch (error) {
    console.log('è¯·æ±‚å¤±è´¥ï¼š', error)
  }
}

// POSTè¯·æ±‚ï¼ˆæäº¤æ•°æ®ï¼‰
const postData = async (userData) => {
  try {
    const response = await fetch('https://api.example.com/users', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(userData)  // æŠŠæ•°æ®æ‰“åŒ…
    })
    const result = await response.json()
    console.log('æäº¤æˆåŠŸï¼š', result)
  } catch (error) {
    console.log('æäº¤å¤±è´¥ï¼š', error)
  }
}
```

### 2.3 fetchçš„ä¼˜ç¼ºç‚¹

| ç‰¹ç‚¹ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| âœ… **å†…ç½®åŸç”Ÿ** | æµè§ˆå™¨è‡ªå¸¦ï¼Œä¸éœ€è¦å®‰è£… | ç®€å•é¡¹ç›® |
| âœ… **Promiseæ”¯æŒ** | æ”¯æŒasync/awaitè¯­æ³• | ç°ä»£é¡¹ç›® |
| âŒ **åŠŸèƒ½æœ‰é™** | æ²¡æœ‰æ‹¦æˆªå™¨ã€è¶…æ—¶ç­‰é«˜çº§åŠŸèƒ½ | å¤æ‚é¡¹ç›®ä¸å¤Ÿç”¨ |
| âŒ **å…¼å®¹æ€§** | è€æµè§ˆå™¨ä¸æ”¯æŒ | éœ€è¦è€ƒè™‘å…¼å®¹æ€§ |

---

## 3. ğŸ“¦ axiosåº“ä»‹ç»ä¸é…ç½®


### 3.1 ä¸ºä»€ä¹ˆé€‰æ‹©axios

**ç®€å•å¯¹æ¯”**ï¼šå¦‚æœfetchæ˜¯"æ™®é€šå¿«é€’"ï¼Œé‚£ä¹ˆaxioså°±æ˜¯"é¡ºä¸°å¿«é€’"

```
fetchï¼š                     axiosï¼š
âœ… å…è´¹ï¼ˆå†…ç½®ï¼‰              âœ… åŠŸèƒ½å¼ºå¤§
âŒ åŠŸèƒ½ç®€å•                 âœ… è‡ªåŠ¨è½¬æ¢JSON
âŒ éœ€è¦æ‰‹åŠ¨å¤„ç†JSON          âœ… è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
âŒ æ²¡æœ‰æ‹¦æˆªå™¨               âœ… è‡ªåŠ¨é”™è¯¯å¤„ç†
âŒ é”™è¯¯å¤„ç†éº»çƒ¦              âœ… è¶…æ—¶è®¾ç½®
```

### 3.2 axioså®‰è£…ä¸åŸºæœ¬é…ç½®

```bash
# å®‰è£…axios
npm install axios
```

```javascript
// åœ¨Reactç»„ä»¶ä¸­å¯¼å…¥
import axios from 'axios'

// åŸºæœ¬é…ç½®ï¼ˆå¯é€‰ï¼‰
const api = axios.create({
  baseURL: 'https://api.example.com',  // åŸºç¡€åœ°å€
  timeout: 5000,                      // 5ç§’è¶…æ—¶
  headers: {
    'Content-Type': 'application/json'
  }
})
```

### 3.3 axiosçš„æ ¸å¿ƒä¼˜åŠ¿

> ğŸ’¡ **ä¸ºä»€ä¹ˆaxiosè¿™ä¹ˆå—æ¬¢è¿ï¼Ÿ**

- ğŸ¯ **è‡ªåŠ¨JSONå¤„ç†**ï¼šä¸ç”¨æ‰‹åŠ¨è½¬æ¢æ•°æ®æ ¼å¼
- ğŸ”§ **æ‹¦æˆªå™¨åŠŸèƒ½**ï¼šå¯ä»¥ç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”
- â° **è¶…æ—¶è®¾ç½®**ï¼šé¿å…è¯·æ±‚å¡æ­»
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šè‡ªåŠ¨æ•è·å’Œå¤„ç†å„ç§é”™è¯¯
- ğŸ“± **å…¼å®¹æ€§å¥½**ï¼šæ”¯æŒè€æµè§ˆå™¨

---

## 4. ğŸ“¥ GETè¯·æ±‚è·å–æ•°æ®


### 4.1 åŸºç¡€GETè¯·æ±‚

**æ¦‚å¿µ**ï¼šGETè¯·æ±‚å°±åƒ"æŸ¥çœ‹èœå•"ï¼Œåªæ˜¯è·å–ä¿¡æ¯ï¼Œä¸ä¼šæ”¹å˜æœåŠ¡å™¨çš„æ•°æ®

```javascript
import { useState, useEffect } from 'react'
import axios from 'axios'

function UserList() {
  const [users, setUsers] = useState([])      // å­˜å‚¨ç”¨æˆ·åˆ—è¡¨
  const [loading, setLoading] = useState(true) // åŠ è½½çŠ¶æ€

  // ç»„ä»¶åŠ è½½æ—¶è·å–æ•°æ®
  useEffect(() => {
    const fetchUsers = async () => {
      try {
        setLoading(true)
        const response = await axios.get('/api/users')
        setUsers(response.data)  // axiosè‡ªåŠ¨è§£æJSON
      } catch (error) {
        console.error('è·å–ç”¨æˆ·å¤±è´¥ï¼š', error)
      } finally {
        setLoading(false)
      }
    }

    fetchUsers()
  }, [])

  if (loading) return <div>åŠ è½½ä¸­...</div>

  return (
    <div>
      {users.map(user => (
        <div key={user.id}>{user.name}</div>
      ))}
    </div>
  )
}
```

### 4.2 å¸¦å‚æ•°çš„GETè¯·æ±‚

```javascript
// æ–¹å¼1ï¼šåœ¨URLä¸­ç›´æ¥æ‹¼æ¥å‚æ•°
const getUser = async (userId) => {
  const response = await axios.get(`/api/users/${userId}`)
  return response.data
}

// æ–¹å¼2ï¼šä½¿ç”¨paramså‚æ•°ï¼ˆæ¨èï¼‰
const searchUsers = async (keyword, page = 1) => {
  const response = await axios.get('/api/users', {
    params: {
      search: keyword,
      page: page,
      limit: 10
    }
  })
  return response.data
}

// å®é™…URLä¼šå˜æˆï¼š/api/users?search=å¼ ä¸‰&page=1&limit=10
```

### 4.3 å¤„ç†ä¸åŒçš„å“åº”çŠ¶æ€

```javascript
const fetchUserProfile = async (userId) => {
  try {
    const response = await axios.get(`/api/users/${userId}`)
    
    // æ£€æŸ¥å“åº”çŠ¶æ€
    if (response.status === 200) {
      console.log('è·å–æˆåŠŸï¼š', response.data)
      return response.data
    }
  } catch (error) {
    // æ ¹æ®é”™è¯¯ç±»å‹å¤„ç†
    if (error.response) {
      // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç 
      if (error.response.status === 404) {
        console.log('ç”¨æˆ·ä¸å­˜åœ¨')
      } else if (error.response.status === 401) {
        console.log('æ²¡æœ‰æƒé™')
      }
    } else if (error.request) {
      // ç½‘ç»œé”™è¯¯
      console.log('ç½‘ç»œè¿æ¥å¤±è´¥')
    }
  }
}
```

---

## 5. ğŸ“¤ POSTè¯·æ±‚æäº¤æ•°æ®


### 5.1 åŸºç¡€POSTè¯·æ±‚

**æ¦‚å¿µ**ï¼šPOSTè¯·æ±‚å°±åƒ"ä¸‹è®¢å•"ï¼Œä¼šå‘æœåŠ¡å™¨å‘é€æ•°æ®å¹¶å¯èƒ½æ”¹å˜æœåŠ¡å™¨çŠ¶æ€

```javascript
import { useState } from 'react'
import axios from 'axios'

function CreateUser() {
  const [formData, setFormData] = useState({
    name: '',
    email: ''
  })
  const [submitting, setSubmitting] = useState(false)

  const handleSubmit = async (e) => {
    e.preventDefault()
    
    try {
      setSubmitting(true)
      const response = await axios.post('/api/users', formData)
      
      console.log('åˆ›å»ºæˆåŠŸï¼š', response.data)
      alert('ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼')
      
      // æ¸…ç©ºè¡¨å•
      setFormData({ name: '', email: '' })
    } catch (error) {
      console.error('åˆ›å»ºå¤±è´¥ï¼š', error)
      alert('åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•')
    } finally {
      setSubmitting(false)
    }
  }

  return (
    <form onSubmit={handleSubmit}>
      <input
        value={formData.name}
        onChange={(e) => setFormData({...formData, name: e.target.value})}
        placeholder="å§“å"
        required
      />
      <input
        value={formData.email}
        onChange={(e) => setFormData({...formData, email: e.target.value})}
        placeholder="é‚®ç®±"
        type="email"
        required
      />
      <button type="submit" disabled={submitting}>
        {submitting ? 'åˆ›å»ºä¸­...' : 'åˆ›å»ºç”¨æˆ·'}
      </button>
    </form>
  )
}
```

### 5.2 ä¸åŒç±»å‹çš„POSTæ•°æ®

```javascript
// 1. JSONæ•°æ®ï¼ˆæœ€å¸¸ç”¨ï¼‰
const submitJSON = async (data) => {
  const response = await axios.post('/api/users', {
    name: data.name,
    email: data.email
  }, {
    headers: {
      'Content-Type': 'application/json'
    }
  })
}

// 2. è¡¨å•æ•°æ®ï¼ˆFormDataï¼‰
const submitForm = async (fileData) => {
  const formData = new FormData()
  formData.append('name', 'å¼ ä¸‰')
  formData.append('avatar', fileData)  // æ–‡ä»¶ä¸Šä¼ 
  
  const response = await axios.post('/api/upload', formData, {
    headers: {
      'Content-Type': 'multipart/form-data'
    }
  })
}

// 3. URLç¼–ç æ•°æ®
const submitUrlEncoded = async (data) => {
  const params = new URLSearchParams()
  params.append('name', data.name)
  params.append('email', data.email)
  
  const response = await axios.post('/api/users', params, {
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    }
  })
}
```

---

## 6. âš™ï¸ è¯·æ±‚å‚æ•°ä¸é”™è¯¯å¤„ç†


### 6.1 ç»Ÿä¸€çš„è¯·æ±‚å‚æ•°è®¾ç½®

```javascript
// è®¾ç½®é»˜è®¤è¯·æ±‚å¤´
axios.defaults.headers.common['Authorization'] = 'Bearer your-token'
axios.defaults.headers.post['Content-Type'] = 'application/json'

// åŠ¨æ€è®¾ç½®è¯·æ±‚å¤´
const apiRequest = async (url, data, token) => {
  const config = {
    headers: {}
  }
  
  // å¦‚æœæœ‰tokenå°±æ·»åŠ è®¤è¯å¤´
  if (token) {
    config.headers['Authorization'] = `Bearer ${token}`
  }
  
  const response = await axios.post(url, data, config)
  return response.data
}
```

### 6.2 è¶…æ—¶å’Œé‡è¯•å¤„ç†

```javascript
// è®¾ç½®è¶…æ—¶æ—¶é—´
const apiWithTimeout = axios.create({
  timeout: 10000  // 10ç§’è¶…æ—¶
})

// ç®€å•çš„é‡è¯•æœºåˆ¶
const requestWithRetry = async (url, maxRetries = 3) => {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await axios.get(url)
      return response.data
    } catch (error) {
      console.log(`ç¬¬${i + 1}æ¬¡è¯·æ±‚å¤±è´¥`)
      
      // å¦‚æœæ˜¯æœ€åä¸€æ¬¡é‡è¯•ï¼ŒæŠ›å‡ºé”™è¯¯
      if (i === maxRetries - 1) {
        throw error
      }
      
      // ç­‰å¾…1ç§’åé‡è¯•
      await new Promise(resolve => setTimeout(resolve, 1000))
    }
  }
}
```

### 6.3 å®Œæ•´çš„é”™è¯¯å¤„ç†

```javascript
const handleApiError = (error) => {
  if (error.response) {
    // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç 
    const { status, data } = error.response
    
    switch (status) {
      case 400:
        return 'è¯·æ±‚å‚æ•°é”™è¯¯'
      case 401:
        return 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•'
      case 403:
        return 'ç¦æ­¢è®¿é—®'
      case 404:
        return 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨'
      case 500:
        return 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
      default:
        return data?.message || 'è¯·æ±‚å¤±è´¥'
    }
  } else if (error.request) {
    // ç½‘ç»œé”™è¯¯
    return 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'
  } else {
    // å…¶ä»–é”™è¯¯
    return 'è¯·æ±‚é…ç½®é”™è¯¯'
  }
}

// ä½¿ç”¨é”™è¯¯å¤„ç†
const fetchData = async () => {
  try {
    const response = await axios.get('/api/data')
    return response.data
  } catch (error) {
    const errorMessage = handleApiError(error)
    alert(errorMessage)
    throw error
  }
}
```

---

## 7. ğŸ”„ è¯·æ±‚æ‹¦æˆªå™¨ä¸å“åº”æ‹¦æˆªå™¨


### 7.1 ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨

**ç®€å•ç†è§£**ï¼šæ‹¦æˆªå™¨å°±åƒ"å®‰æ£€"å’Œ"è´¨æ£€"
```
è¯·æ±‚æ‹¦æˆªå™¨ï¼šåœ¨å‘é€è¯·æ±‚å‰åšæ£€æŸ¥ï¼ˆæ¯”å¦‚æ·»åŠ tokenï¼‰
         ä½  â†’ [å®‰æ£€] â†’ è¯·æ±‚ â†’ æœåŠ¡å™¨

å“åº”æ‹¦æˆªå™¨ï¼šåœ¨æ”¶åˆ°å“åº”ååšå¤„ç†ï¼ˆæ¯”å¦‚ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰
         ä½  â† [è´¨æ£€] â† å“åº” â† æœåŠ¡å™¨
```

### 7.2 è¯·æ±‚æ‹¦æˆªå™¨é…ç½®

```javascript
// è¯·æ±‚æ‹¦æˆªå™¨ï¼šåœ¨æ¯ä¸ªè¯·æ±‚å‘é€å‰æ‰§è¡Œ
axios.interceptors.request.use(
  (config) => {
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    console.log('æ­£åœ¨å‘é€è¯·æ±‚ï¼š', config.url)
    
    // è‡ªåŠ¨æ·»åŠ token
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    
    // æ˜¾ç¤ºåŠ è½½æç¤º
    showLoading()
    
    return config
  },
  (error) => {
    // è¯·æ±‚é”™è¯¯æ—¶åšäº›ä»€ä¹ˆ
    console.error('è¯·æ±‚é…ç½®é”™è¯¯ï¼š', error)
    return Promise.reject(error)
  }
)
```

### 7.3 å“åº”æ‹¦æˆªå™¨é…ç½®

```javascript
// å“åº”æ‹¦æˆªå™¨ï¼šåœ¨æ”¶åˆ°å“åº”åç»Ÿä¸€å¤„ç†
axios.interceptors.response.use(
  (response) => {
    // çŠ¶æ€ç åœ¨2xxèŒƒå›´å†…ä¼šè§¦å‘æ­¤å‡½æ•°
    console.log('æ”¶åˆ°å“åº”ï¼š', response.status)
    
    // éšè—åŠ è½½æç¤º
    hideLoading()
    
    // å¯ä»¥åœ¨è¿™é‡Œç»Ÿä¸€å¤„ç†å“åº”æ•°æ®
    return response
  },
  (error) => {
    // çŠ¶æ€ç è¶…å‡º2xxèŒƒå›´ä¼šè§¦å‘æ­¤å‡½æ•°
    hideLoading()
    
    // ç»Ÿä¸€é”™è¯¯å¤„ç†
    if (error.response?.status === 401) {
      // tokenè¿‡æœŸï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      localStorage.removeItem('token')
      window.location.href = '/login'
    }
    
    return Promise.reject(error)
  }
)
```

### 7.4 å®é™…åº”ç”¨ç¤ºä¾‹

```javascript
// åˆ›å»ºå¸¦æ‹¦æˆªå™¨çš„axioså®ä¾‹
const api = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 10000
})

// å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆç®€åŒ–ç‰ˆï¼‰
let loadingCount = 0
const showLoading = () => {
  loadingCount++
  document.getElementById('loading').style.display = 'block'
}
const hideLoading = () => {
  loadingCount--
  if (loadingCount <= 0) {
    loadingCount = 0
    document.getElementById('loading').style.display = 'none'
  }
}

// è¯·æ±‚æ‹¦æˆªå™¨
api.interceptors.request.use(config => {
  showLoading()
  
  // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
  if (config.method === 'get') {
    config.params = {
      ...config.params,
      _t: Date.now()
    }
  }
  
  return config
})

// å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  response => {
    hideLoading()
    return response
  },
  error => {
    hideLoading()
    
    // æ˜¾ç¤ºé”™è¯¯æç¤º
    const message = error.response?.data?.message || 'è¯·æ±‚å¤±è´¥'
    alert(message)
    
    return Promise.reject(error)
  }
)
```

---

## 8. ğŸ› ï¸ é€šç”¨è¯·æ±‚å·¥å…·å°è£…


### 8.1 ä¸ºä»€ä¹ˆè¦å°è£…è¯·æ±‚å·¥å…·

**å¥½å¤„å¯¹æ¯”**ï¼š
```
ä¸å°è£…ï¼š                      å°è£…åï¼š
âŒ æ¯æ¬¡éƒ½è¦å†™é‡å¤ä»£ç            âœ… ä¸€è¡Œä»£ç æå®š
âŒ é”™è¯¯å¤„ç†åˆ†æ•£               âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†
âŒ éš¾ä»¥ç»´æŠ¤                  âœ… æ˜“äºç»´æŠ¤å’Œä¿®æ”¹
âŒ ä»£ç å†—ä½™                  âœ… ä»£ç ç®€æ´
```

### 8.2 åŸºç¡€å°è£…ç‰ˆæœ¬

```javascript
// utils/request.js
import axios from 'axios'

// åˆ›å»ºaxioså®ä¾‹
const request = axios.create({
  baseURL: process.env.REACT_APP_API_BASE_URL || 'http://localhost:3001',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// è¯·æ±‚æ‹¦æˆªå™¨
request.interceptors.request.use(
  config => {
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  error => Promise.reject(error)
)

// å“åº”æ‹¦æˆªå™¨
request.interceptors.response.use(
  response => response.data,  // ç›´æ¥è¿”å›dataéƒ¨åˆ†
  error => {
    const message = error.response?.data?.message || 'è¯·æ±‚å¤±è´¥'
    console.error('API Error:', message)
    return Promise.reject(new Error(message))
  }
)

export default request
```

### 8.3 å¢å¼ºç‰ˆå°è£…

```javascript
// utils/api.js
import request from './request'

// é€šç”¨APIæ–¹æ³•å°è£…
const api = {
  // GETè¯·æ±‚
  get: (url, params = {}) => {
    return request({
      method: 'GET',
      url,
      params
    })
  },

  // POSTè¯·æ±‚
  post: (url, data = {}) => {
    return request({
      method: 'POST',
      url,
      data
    })
  },

  // PUTè¯·æ±‚
  put: (url, data = {}) => {
    return request({
      method: 'PUT',
      url,
      data
    })
  },

  // DELETEè¯·æ±‚
  delete: (url) => {
    return request({
      method: 'DELETE',
      url
    })
  },

  // æ–‡ä»¶ä¸Šä¼ 
  upload: (url, file, onProgress) => {
    const formData = new FormData()
    formData.append('file', file)
    
    return request({
      method: 'POST',
      url,
      data: formData,
      headers: {
        'Content-Type': 'multipart/form-data'
      },
      onUploadProgress: onProgress
    })
  }
}

export default api
```

### 8.4 ä¸šåŠ¡APIå°è£…

```javascript
// api/user.js - ç”¨æˆ·ç›¸å…³API
import api from '../utils/api'

export const userAPI = {
  // è·å–ç”¨æˆ·åˆ—è¡¨
  getUsers: (params) => api.get('/users', params),
  
  // è·å–ç”¨æˆ·è¯¦æƒ…
  getUserById: (id) => api.get(`/users/${id}`),
  
  // åˆ›å»ºç”¨æˆ·
  createUser: (userData) => api.post('/users', userData),
  
  // æ›´æ–°ç”¨æˆ·
  updateUser: (id, userData) => api.put(`/users/${id}`, userData),
  
  // åˆ é™¤ç”¨æˆ·
  deleteUser: (id) => api.delete(`/users/${id}`),
  
  // ç”¨æˆ·ç™»å½•
  login: (credentials) => api.post('/auth/login', credentials),
  
  // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
  getCurrentUser: () => api.get('/auth/me')
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { userAPI } from '../api/user'

const UserProfile = () => {
  const [user, setUser] = useState(null)
  
  useEffect(() => {
    const loadUser = async () => {
      try {
        const userData = await userAPI.getCurrentUser()
        setUser(userData)
      } catch (error) {
        console.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼š', error.message)
      }
    }
    
    loadUser()
  }, [])
  
  return (
    <div>
      {user && <h1>æ¬¢è¿ï¼Œ{user.name}ï¼</h1>}
    </div>
  )
}
```

### 8.5 ä½¿ç”¨å°è£…å·¥å…·çš„å®Œæ•´ç¤ºä¾‹

```javascript
// components/UserManagement.jsx
import { useState, useEffect } from 'react'
import { userAPI } from '../api/user'

function UserManagement() {
  const [users, setUsers] = useState([])
  const [loading, setLoading] = useState(false)

  // åŠ è½½ç”¨æˆ·åˆ—è¡¨
  const loadUsers = async () => {
    try {
      setLoading(true)
      const userList = await userAPI.getUsers()
      setUsers(userList)
    } catch (error) {
      alert('åŠ è½½ç”¨æˆ·å¤±è´¥ï¼š' + error.message)
    } finally {
      setLoading(false)
    }
  }

  // åˆ é™¤ç”¨æˆ·
  const handleDelete = async (userId) => {
    if (!window.confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç”¨æˆ·å—ï¼Ÿ')) return
    
    try {
      await userAPI.deleteUser(userId)
      alert('åˆ é™¤æˆåŠŸï¼')
      loadUsers() // é‡æ–°åŠ è½½åˆ—è¡¨
    } catch (error) {
      alert('åˆ é™¤å¤±è´¥ï¼š' + error.message)
    }
  }

  useEffect(() => {
    loadUsers()
  }, [])

  if (loading) return <div>åŠ è½½ä¸­...</div>

  return (
    <div>
      <h2>ç”¨æˆ·ç®¡ç†</h2>
      {users.map(user => (
        <div key={user.id} style={{ border: '1px solid #ccc', margin: '10px', padding: '10px' }}>
          <h3>{user.name}</h3>
          <p>é‚®ç®±ï¼š{user.email}</p>
          <button onClick={() => handleDelete(user.id)}>åˆ é™¤</button>
        </div>
      ))}
    </div>
  )
}

export default UserManagement
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ

```
ğŸ”¸ ç½‘ç»œè¯·æ±‚æœ¬è´¨ï¼šå‰ç«¯ä¸åç«¯çš„æ•°æ®äº¤æ¢æ¡¥æ¢
ğŸ”¸ fetch vs axiosï¼šå†…ç½®å·¥å…· vs åŠŸèƒ½å¼ºå¤§çš„ç¬¬ä¸‰æ–¹åº“
ğŸ”¸ è¯·æ±‚ç±»å‹ï¼šGETè·å–ã€POSTæäº¤ã€PUTæ›´æ–°ã€DELETEåˆ é™¤
ğŸ”¸ è¯·æ±‚æ—¶æœºï¼šç»„ä»¶åŠ è½½ã€ç”¨æˆ·æ“ä½œã€å®šæ—¶æ›´æ–°ã€è·¯ç”±åˆ‡æ¢
ğŸ”¸ æ‹¦æˆªå™¨ï¼šè¯·æ±‚å‰å¤„ç†å’Œå“åº”åå¤„ç†çš„ç»Ÿä¸€ç®¡é“
ğŸ”¸ å°è£…æ€æƒ³ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†ï¼Œæé«˜ç»´æŠ¤æ€§
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™ç”¨fetchï¼Œä»€ä¹ˆæ—¶å€™ç”¨axiosï¼Ÿ**
```
ç®€å•é¡¹ç›® + åŸºç¡€éœ€æ±‚ â†’ fetch
å¤æ‚é¡¹ç›® + é«˜çº§åŠŸèƒ½ â†’ axios

axiosçš„æ ¸å¿ƒä¼˜åŠ¿ï¼š
â€¢ è‡ªåŠ¨JSONè½¬æ¢
â€¢ æ‹¦æˆªå™¨åŠŸèƒ½
â€¢ è¶…æ—¶è®¾ç½®
â€¢ æ›´å¥½çš„é”™è¯¯å¤„ç†
```

**ğŸ”¹ æ‹¦æˆªå™¨çš„å®é™…ä»·å€¼**
```
è¯·æ±‚æ‹¦æˆªå™¨è§£å†³çš„é—®é¢˜ï¼š
â€¢ è‡ªåŠ¨æ·»åŠ tokenè®¤è¯
â€¢ ç»Ÿä¸€è®¾ç½®è¯·æ±‚å¤´
â€¢ æ˜¾ç¤ºåŠ è½½çŠ¶æ€

å“åº”æ‹¦æˆªå™¨è§£å†³çš„é—®é¢˜ï¼š
â€¢ ç»Ÿä¸€é”™è¯¯å¤„ç†
â€¢ è‡ªåŠ¨tokenåˆ·æ–°
â€¢ éšè—åŠ è½½çŠ¶æ€
```

**ğŸ”¹ ä¸ºä»€ä¹ˆè¦å°è£…API**
```
ä¸å°è£…çš„é—®é¢˜ï¼š
â€¢ ä»£ç é‡å¤
â€¢ é”™è¯¯å¤„ç†åˆ†æ•£
â€¢ éš¾ä»¥ç»´æŠ¤

å°è£…çš„å¥½å¤„ï¼š
â€¢ ä»£ç å¤ç”¨
â€¢ ç»Ÿä¸€ç®¡ç†
â€¢ æ˜“äºæµ‹è¯•å’Œç»´æŠ¤
```

### 9.3 å®é™…å¼€å‘å»ºè®®


> ğŸ’¡ **æœ€ä½³å®è·µæŒ‡å—**

- âœ… **ä½¿ç”¨axios**ï¼šåŠŸèƒ½æ›´å¼ºå¤§ï¼Œç”Ÿæ€æ›´å¥½
- âœ… **åˆ›å»ºç»Ÿä¸€è¯·æ±‚å®ä¾‹**ï¼šä¾¿äºé…ç½®å’Œç®¡ç†
- âœ… **é…ç½®æ‹¦æˆªå™¨**ï¼šç»Ÿä¸€å¤„ç†è®¤è¯å’Œé”™è¯¯
- âœ… **å°è£…ä¸šåŠ¡API**ï¼šæŒ‰æ¨¡å—ç»„ç»‡APIæ–¹æ³•
- âœ… **å¤„ç†åŠ è½½çŠ¶æ€**ï¼šæå‡ç”¨æˆ·ä½“éªŒ
- âœ… **é”™è¯¯å¤„ç†**ï¼šå‹å¥½çš„é”™è¯¯æç¤º

> âš ï¸ **å¸¸è§é™·é˜±æé†’**

- âŒ **å¿˜è®°é”™è¯¯å¤„ç†**ï¼šç”¨æˆ·çœ‹åˆ°å¥‡æ€ªçš„é”™è¯¯ä¿¡æ¯
- âŒ **æ²¡æœ‰åŠ è½½çŠ¶æ€**ï¼šç”¨æˆ·ä¸çŸ¥é“è¯·æ±‚æ˜¯å¦åœ¨è¿›è¡Œ
- âŒ **é‡å¤ä»£ç **ï¼šæ²¡æœ‰å°è£…å¯¼è‡´ç»´æŠ¤å›°éš¾
- âŒ **å¿½ç•¥ç½‘ç»œå¼‚å¸¸**ï¼šç½‘ç»œä¸å¥½æ—¶åº”ç”¨å´©æºƒ

### 9.4 å­¦ä¹ è·¯å¾„å»ºè®®


**åˆå­¦è€…è·¯å¾„**ï¼š
1. ç†è§£ç½‘ç»œè¯·æ±‚æ¦‚å¿µ â†’ 2. å­¦ä¼šåŸºç¡€çš„axiosç”¨æ³• â†’ 3. æŒæ¡GET/POSTè¯·æ±‚

**è¿›é˜¶è·¯å¾„**ï¼š
4. å­¦ä¹ æ‹¦æˆªå™¨é…ç½® â†’ 5. æŒæ¡é”™è¯¯å¤„ç† â†’ 6. å­¦ä¼šå°è£…é€šç”¨å·¥å…·

**é«˜çº§åº”ç”¨**ï¼š
7. è¯·æ±‚å–æ¶ˆå’Œé‡è¯• â†’ 8. å¹¶å‘è¯·æ±‚æ§åˆ¶ â†’ 9. ç¼“å­˜ç­–ç•¥

**æ ¸å¿ƒè®°å¿†**ï¼š
- axiosæ˜¯Reacté¡¹ç›®ç½‘ç»œè¯·æ±‚çš„é¦–é€‰å·¥å…·
- æ‹¦æˆªå™¨è®©è¯·æ±‚å¤„ç†æ›´ç»Ÿä¸€æ›´å¼ºå¤§  
- å°è£…APIå·¥å…·è®©ä»£ç æ›´æ¸…æ™°æ›´æ˜“ç»´æŠ¤
- é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®