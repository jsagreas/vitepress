---
title: 6ã€å¸¸è§å‰¯ä½œç”¨åœºæ™¯å®æˆ˜
---
## ğŸ“š ç›®å½•

1. [å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆæ„æ€](#1-å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆæ„æ€)
2. [æ•°æ®è·å–å’ŒAPIè°ƒç”¨](#2-æ•°æ®è·å–å’ŒAPIè°ƒç”¨)
3. [DOMæ“ä½œå’Œå…ƒç´ å¼•ç”¨](#3-DOMæ“ä½œå’Œå…ƒç´ å¼•ç”¨)
4. [äº‹ä»¶ç›‘å¬å™¨ç®¡ç†](#4-äº‹ä»¶ç›‘å¬å™¨ç®¡ç†)
5. [å®šæ—¶å™¨å¤„ç†](#5-å®šæ—¶å™¨å¤„ç†)
6. [è®¢é˜…æœºåˆ¶å¤„ç†](#6-è®¢é˜…æœºåˆ¶å¤„ç†)
7. [é¡µé¢ä¿¡æ¯ç®¡ç†](#7-é¡µé¢ä¿¡æ¯ç®¡ç†)
8. [ç„¦ç‚¹å’Œæ»šåŠ¨å¤„ç†](#8-ç„¦ç‚¹å’Œæ»šåŠ¨å¤„ç†)
9. [çª—å£çŠ¶æ€ç›‘å¬](#9-çª—å£çŠ¶æ€ç›‘å¬)
10. [å¼‚æ­¥æ“ä½œæ¸…ç†](#10-å¼‚æ­¥æ“ä½œæ¸…ç†)
11. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#11-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¤” å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆæ„æ€


### 1.1 é€šä¿—ç†è§£å‰¯ä½œç”¨


> ğŸ’¡ **ç®€å•æ¯”å–»**ï¼šå‰¯ä½œç”¨å°±åƒä½ åœ¨å®¶é‡Œåšé¥­æ—¶ï¼Œé™¤äº†åšèœè¿™ä¸ªä¸»è¦ä»»åŠ¡å¤–ï¼Œè¿˜ä¼šäº§ç”Ÿæ²¹çƒŸã€ä½¿ç”¨ç‡ƒæ°”ã€å¼„è„é”…å…·ç­‰"é¢å¤–å½±å“"

**åœ¨Reactä¸­çš„å‰¯ä½œç”¨**ï¼š
```
ä¸»è¦ä»»åŠ¡ï¼šæ¸²æŸ“UIç•Œé¢ âœ…
å‰¯ä½œç”¨ï¼ˆé¢å¤–å½±å“ï¼‰ï¼š
  â””â”€ è·å–ç½‘ç»œæ•°æ® ğŸŒ
  â””â”€ ä¿®æ”¹é¡µé¢æ ‡é¢˜ ğŸ“„  
  â””â”€ æ·»åŠ äº‹ä»¶ç›‘å¬ ğŸ‘‚
  â””â”€ å¯åŠ¨å®šæ—¶å™¨ â°
  â””â”€ æ“ä½œDOMå…ƒç´  ğŸ¯
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç®¡ç†å‰¯ä½œç”¨


**ä¸ç®¡ç†å‰¯ä½œç”¨çš„é—®é¢˜**ï¼š
- ğŸ”„ **å†…å­˜æ³„æ¼**ï¼šå®šæ—¶å™¨ä¸åœæ­¢ï¼Œäº‹ä»¶ç›‘å¬å™¨ä¸ç§»é™¤
- ğŸ› **é‡å¤æ‰§è¡Œ**ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è·å–æ•°æ®
- âš¡ **æ€§èƒ½é—®é¢˜**ï¼šä¸å¿…è¦çš„é‡å¤æ“ä½œ
- ğŸ’¥ **ç¨‹åºå´©æºƒ**ï¼šç»„ä»¶å¸è½½åè¿˜åœ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œ

> âš ï¸ **æ ¸å¿ƒç†å¿µ**ï¼šå‰¯ä½œç”¨éœ€è¦åœ¨åˆé€‚çš„æ—¶æœºæ‰§è¡Œï¼Œå¹¶åœ¨ä¸éœ€è¦æ—¶åŠæ—¶æ¸…ç†

---

## 2. ğŸŒ æ•°æ®è·å–å’ŒAPIè°ƒç”¨


### 2.1 åŸºç¡€æ•°æ®è·å–


**æœ€å¸¸è§çš„åœºæ™¯**ï¼šç»„ä»¶åŠ è½½æ—¶ä»æœåŠ¡å™¨è·å–æ•°æ®

```javascript
// ğŸ¯ ç”¨æˆ·åˆ—è¡¨è·å–ç¤ºä¾‹
function UserList() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // ğŸ”„ ç»„ä»¶æŒ‚è½½æ—¶è·å–æ•°æ®
    async function fetchUsers() {
      try {
        const response = await fetch('/api/users');
        const userData = await response.json();
        setUsers(userData);
      } catch (error) {
        console.error('è·å–ç”¨æˆ·å¤±è´¥:', error);
      } finally {
        setLoading(false);
      }
    }

    fetchUsers();
  }, []); // ç©ºä¾èµ–æ•°ç»„ = åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡

  if (loading) return <div>åŠ è½½ä¸­...</div>;
  
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

### 2.2 æ¡ä»¶æ•°æ®è·å–


**æ ¹æ®ç”¨æˆ·è¾“å…¥è·å–æ•°æ®**ï¼š

```javascript
// ğŸ” æœç´¢åŠŸèƒ½ç¤ºä¾‹
function SearchResults() {
  const [keyword, setKeyword] = useState('');
  const [results, setResults] = useState([]);

  useEffect(() => {
    // ğŸ¯ åªæœ‰å½“å…³é”®è¯å­˜åœ¨æ—¶æ‰æœç´¢
    if (keyword.trim()) {
      async function search() {
        const response = await fetch(`/api/search?q=${keyword}`);
        const data = await response.json();
        setResults(data);
      }
      search();
    } else {
      setResults([]); // æ¸…ç©ºæœç´¢ç»“æœ
    }
  }, [keyword]); // å…³é”®è¯å˜åŒ–æ—¶é‡æ–°æœç´¢

  return (
    <div>
      <input 
        value={keyword}
        onChange={(e) => setKeyword(e.target.value)}
        placeholder="è¾“å…¥æœç´¢å…³é”®è¯"
      />
      {results.map(item => (
        <div key={item.id}>{item.title}</div>
      ))}
    </div>
  );
}
```

### 2.3 é˜²æ­¢ç»„ä»¶å¸è½½åæ›´æ–°çŠ¶æ€


```javascript
// ğŸ›¡ï¸ å®‰å…¨çš„æ•°æ®è·å–
function SafeDataFetch() {
  const [data, setData] = useState(null);

  useEffect(() => {
    let isCancelled = false; // ğŸš© å–æ¶ˆæ ‡è®°

    async function fetchData() {
      const response = await fetch('/api/data');
      const result = await response.json();
      
      // âœ… åªæœ‰ç»„ä»¶è¿˜å­˜åœ¨æ—¶æ‰æ›´æ–°çŠ¶æ€
      if (!isCancelled) {
        setData(result);
      }
    }

    fetchData();

    // ğŸ§¹ æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶è®¾ç½®å–æ¶ˆæ ‡è®°
    return () => {
      isCancelled = true;
    };
  }, []);

  return <div>{data ? data.message : 'åŠ è½½ä¸­...'}</div>;
}
```

---

## 3. ğŸ¯ DOMæ“ä½œå’Œå…ƒç´ å¼•ç”¨


### 3.1 è·å–DOMå…ƒç´ å¼•ç”¨


**ä»€ä¹ˆæ—¶å€™éœ€è¦ç›´æ¥æ“ä½œDOM**ï¼š
- èšç„¦è¾“å…¥æ¡†
- æµ‹é‡å…ƒç´ å°ºå¯¸
- é›†æˆç¬¬ä¸‰æ–¹åº“

```javascript
// ğŸ“ è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
function AutoFocusInput() {
  const inputRef = useRef(null);

  useEffect(() => {
    // ğŸ¯ ç»„ä»¶æŒ‚è½½åè‡ªåŠ¨èšç„¦
    inputRef.current.focus();
  }, []); // åªåœ¨æŒ‚è½½æ—¶æ‰§è¡Œ

  return (
    <div>
      <h3>è¯·è¾“å…¥æ‚¨çš„å§“åï¼š</h3>
      <input ref={inputRef} placeholder="å§“å" />
    </div>
  );
}
```

### 3.2 æµ‹é‡å…ƒç´ å°ºå¯¸


```javascript
// ğŸ“ è·å–å…ƒç´ å°ºå¯¸ä¿¡æ¯
function ElementSizer() {
  const [size, setSize] = useState({ width: 0, height: 0 });
  const divRef = useRef(null);

  useEffect(() => {
    // ğŸ“ æµ‹é‡å…ƒç´ å°ºå¯¸
    const element = divRef.current;
    if (element) {
      const { width, height } = element.getBoundingClientRect();
      setSize({ width, height });
    }
  }, []); // ç»„ä»¶æŒ‚è½½åæµ‹é‡ä¸€æ¬¡

  return (
    <div>
      <div ref={divRef} style={{ padding: '20px', border: '1px solid #ccc' }}>
        è¿™æ˜¯ä¸€ä¸ªéœ€è¦æµ‹é‡çš„å…ƒç´ 
      </div>
      <p>å…ƒç´ å°ºå¯¸: {size.width} Ã— {size.height}</p>
    </div>
  );
}
```

### 3.3 é›†æˆç¬¬ä¸‰æ–¹åº“


```javascript
// ğŸ”Œ é›†æˆå›¾è¡¨åº“ç¤ºä¾‹
function ChartComponent({ data }) {
  const chartRef = useRef(null);

  useEffect(() => {
    // ğŸ¨ åˆå§‹åŒ–å›¾è¡¨
    const chart = new Chart(chartRef.current, {
      type: 'bar',
      data: data
    });

    // ğŸ§¹ æ¸…ç†ï¼šç»„ä»¶å¸è½½æ—¶é”€æ¯å›¾è¡¨
    return () => {
      chart.destroy();
    };
  }, [data]); // æ•°æ®å˜åŒ–æ—¶é‡æ–°åˆ›å»ºå›¾è¡¨

  return <canvas ref={chartRef}></canvas>;
}
```

---

## 4. ğŸ‘‚ äº‹ä»¶ç›‘å¬å™¨ç®¡ç†


### 4.1 é”®ç›˜äº‹ä»¶ç›‘å¬


```javascript
// âŒ¨ï¸ å…¨å±€é”®ç›˜å¿«æ·é”®
function KeyboardShortcuts() {
  const [message, setMessage] = useState('');

  useEffect(() => {
    // ğŸ¯ é”®ç›˜äº‹ä»¶å¤„ç†å‡½æ•°
    function handleKeyPress(event) {
      if (event.ctrlKey && event.key === 's') {
        event.preventDefault(); // é˜»æ­¢æµè§ˆå™¨é»˜è®¤ä¿å­˜
        setMessage('å¿«æ·é”®ä¿å­˜è§¦å‘ï¼');
      }
    }

    // ğŸ‘‚ æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
    window.addEventListener('keydown', handleKeyPress);

    // ğŸ§¹ æ¸…ç†ï¼šç§»é™¤äº‹ä»¶ç›‘å¬å™¨
    return () => {
      window.removeEventListener('keydown', handleKeyPress);
    };
  }, []); // åªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œ

  return (
    <div>
      <p>æŒ‰ Ctrl+S è¯•è¯•çœ‹</p>
      {message && <p style={{ color: 'green' }}>{message}</p>}
    </div>
  );
}
```

### 4.2 é¼ æ ‡äº‹ä»¶ç›‘å¬


```javascript
// ğŸ–±ï¸ é¼ æ ‡ä½ç½®è·Ÿè¸ª
function MouseTracker() {
  const [position, setPosition] = useState({ x: 0, y: 0 });

  useEffect(() => {
    // ğŸ¯ é¼ æ ‡ç§»åŠ¨å¤„ç†å‡½æ•°
    function handleMouseMove(event) {
      setPosition({
        x: event.clientX,
        y: event.clientY
      });
    }

    // ğŸ‘‚ æ·»åŠ é¼ æ ‡ç§»åŠ¨ç›‘å¬
    document.addEventListener('mousemove', handleMouseMove);

    // ğŸ§¹ æ¸…ç†å‡½æ•°
    return () => {
      document.removeEventListener('mousemove', handleMouseMove);
    };
  }, []);

  return (
    <div>
      <p>é¼ æ ‡ä½ç½®: ({position.x}, {position.y})</p>
    </div>
  );
}
```

---

## 5. â° å®šæ—¶å™¨å¤„ç†


### 5.1 ç®€å•å®šæ—¶å™¨


```javascript
// â±ï¸ å€’è®¡æ—¶å™¨
function Countdown({ initialTime = 60 }) {
  const [time, setTime] = useState(initialTime);

  useEffect(() => {
    // â° åˆ›å»ºå®šæ—¶å™¨
    const timer = setInterval(() => {
      setTime(prevTime => {
        if (prevTime <= 1) {
          return 0; // å€’è®¡æ—¶ç»“æŸ
        }
        return prevTime - 1;
      });
    }, 1000);

    // ğŸ§¹ æ¸…ç†å®šæ—¶å™¨
    return () => {
      clearInterval(timer);
    };
  }, []); // åªåœ¨æŒ‚è½½æ—¶åˆ›å»ºï¼Œå¸è½½æ—¶æ¸…ç†

  return (
    <div>
      <h3>å€’è®¡æ—¶: {time} ç§’</h3>
      {time === 0 && <p>â° æ—¶é—´åˆ°ï¼</p>}
    </div>
  );
}
```

### 5.2 å¯æ§åˆ¶çš„å®šæ—¶å™¨


```javascript
// ğŸ® å¯æš‚åœçš„è®¡æ—¶å™¨
function ControllableTimer() {
  const [seconds, setSeconds] = useState(0);
  const [isRunning, setIsRunning] = useState(false);

  useEffect(() => {
    let timer = null;

    if (isRunning) {
      // â–¶ï¸ å¼€å§‹è®¡æ—¶
      timer = setInterval(() => {
        setSeconds(prev => prev + 1);
      }, 1000);
    }

    // ğŸ§¹ æ¸…ç†å‡½æ•°ï¼šæš‚åœæˆ–ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨
    return () => {
      if (timer) {
        clearInterval(timer);
      }
    };
  }, [isRunning]); // è¿è¡ŒçŠ¶æ€å˜åŒ–æ—¶é‡æ–°è®¾ç½®å®šæ—¶å™¨

  return (
    <div>
      <h3>è®¡æ—¶å™¨: {seconds} ç§’</h3>
      <button onClick={() => setIsRunning(!isRunning)}>
        {isRunning ? 'â¸ï¸ æš‚åœ' : 'â–¶ï¸ å¼€å§‹'}
      </button>
      <button onClick={() => { setSeconds(0); setIsRunning(false); }}>
        ğŸ”„ é‡ç½®
      </button>
    </div>
  );
}
```

---

## 6. ğŸ“¢ è®¢é˜…æœºåˆ¶å¤„ç†


### 6.1 WebSocketè¿æ¥


```javascript
// ğŸ”Œ WebSocketå®æ—¶è¿æ¥
function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  const [connectionStatus, setConnectionStatus] = useState('è¿æ¥ä¸­...');

  useEffect(() => {
    // ğŸŒ åˆ›å»ºWebSocketè¿æ¥
    const ws = new WebSocket(`ws://localhost:8080/room/${roomId}`);

    // ğŸ“¥ ç›‘å¬æ¶ˆæ¯
    ws.onmessage = (event) => {
      const message = JSON.parse(event.data);
      setMessages(prev => [...prev, message]);
    };

    // âœ… è¿æ¥æˆåŠŸ
    ws.onopen = () => {
      setConnectionStatus('å·²è¿æ¥');
    };

    // âŒ è¿æ¥å…³é—­
    ws.onclose = () => {
      setConnectionStatus('è¿æ¥å·²æ–­å¼€');
    };

    // ğŸ§¹ æ¸…ç†ï¼šå…³é—­WebSocketè¿æ¥
    return () => {
      ws.close();
    };
  }, [roomId]); // æˆ¿é—´IDå˜åŒ–æ—¶é‡æ–°è¿æ¥

  return (
    <div>
      <p>çŠ¶æ€: {connectionStatus}</p>
      <div>
        {messages.map((msg, index) => (
          <p key={index}>{msg.user}: {msg.text}</p>
        ))}
      </div>
    </div>
  );
}
```

### 6.2 äº‹ä»¶æ€»çº¿è®¢é˜…


```javascript
// ğŸ“¡ è‡ªå®šä¹‰äº‹ä»¶è®¢é˜…
function NotificationListener() {
  const [notifications, setNotifications] = useState([]);

  useEffect(() => {
    // ğŸ¯ äº‹ä»¶å¤„ç†å‡½æ•°
    function handleNotification(event) {
      setNotifications(prev => [...prev, event.detail]);
    }

    // ğŸ“¢ è®¢é˜…è‡ªå®šä¹‰äº‹ä»¶
    window.addEventListener('notification', handleNotification);

    // ğŸ§¹ å–æ¶ˆè®¢é˜…
    return () => {
      window.removeEventListener('notification', handleNotification);
    };
  }, []);

  return (
    <div>
      <h3>ğŸ“¬ é€šçŸ¥åˆ—è¡¨</h3>
      {notifications.map((notif, index) => (
        <div key={index} style={{ padding: '8px', border: '1px solid #ddd' }}>
          {notif.message}
        </div>
      ))}
    </div>
  );
}
```

---

## 7. ğŸ“„ é¡µé¢ä¿¡æ¯ç®¡ç†


### 7.1 åŠ¨æ€æ ‡é¢˜ä¿®æ”¹


```javascript
// ğŸ“ åŠ¨æ€é¡µé¢æ ‡é¢˜
function DynamicTitle({ pageName, unreadCount = 0 }) {
  useEffect(() => {
    // ğŸ·ï¸ æ›´æ–°é¡µé¢æ ‡é¢˜
    const originalTitle = document.title;
    
    if (unreadCount > 0) {
      document.title = `(${unreadCount}) ${pageName}`;
    } else {
      document.title = pageName;
    }

    // ğŸ§¹ æ¢å¤åŸæ ‡é¢˜
    return () => {
      document.title = originalTitle;
    };
  }, [pageName, unreadCount]); // é¡µé¢åæˆ–æœªè¯»æ•°å˜åŒ–æ—¶æ›´æ–°

  return (
    <div>
      <h1>{pageName}</h1>
      {unreadCount > 0 && (
        <p>ğŸ“¬ æ‚¨æœ‰ {unreadCount} æ¡æœªè¯»æ¶ˆæ¯</p>
      )}
    </div>
  );
}
```

### 7.2 é¡µé¢å¯è§æ€§ç›‘å¬


```javascript
// ğŸ‘ï¸ é¡µé¢å¯è§æ€§æ£€æµ‹
function VisibilityTracker() {
  const [isVisible, setIsVisible] = useState(true);
  const [hideTime, setHideTime] = useState(null);

  useEffect(() => {
    // ğŸ¯ å¯è§æ€§å˜åŒ–å¤„ç†
    function handleVisibilityChange() {
      if (document.hidden) {
        setIsVisible(false);
        setHideTime(new Date().toLocaleTimeString());
      } else {
        setIsVisible(true);
      }
    }

    // ğŸ‘‚ ç›‘å¬å¯è§æ€§å˜åŒ–
    document.addEventListener('visibilitychange', handleVisibilityChange);

    // ğŸ§¹ æ¸…ç†ç›‘å¬å™¨
    return () => {
      document.removeEventListener('visibilitychange', handleVisibilityChange);
    };
  }, []);

  return (
    <div>
      <p>é¡µé¢çŠ¶æ€: {isVisible ? 'ğŸŸ¢ å¯è§' : 'ğŸ”´ éšè—'}</p>
      {hideTime && <p>æœ€åéšè—æ—¶é—´: {hideTime}</p>}
    </div>
  );
}
```

---

## 8. ğŸ¯ ç„¦ç‚¹å’Œæ»šåŠ¨å¤„ç†


### 8.1 æ™ºèƒ½ç„¦ç‚¹ç®¡ç†


```javascript
// ğŸ¯ æ¨¡æ€æ¡†ç„¦ç‚¹ç®¡ç†
function Modal({ isOpen, onClose, children }) {
  const modalRef = useRef(null);

  useEffect(() => {
    if (isOpen) {
      // ğŸ¯ æ‰“å¼€æ—¶èšç„¦åˆ°æ¨¡æ€æ¡†
      modalRef.current?.focus();

      // âŒ¨ï¸ ESCé”®å…³é—­
      function handleEscapeKey(event) {
        if (event.key === 'Escape') {
          onClose();
        }
      }

      document.addEventListener('keydown', handleEscapeKey);

      // ğŸ§¹ æ¸…ç†äº‹ä»¶ç›‘å¬
      return () => {
        document.removeEventListener('keydown', handleEscapeKey);
      };
    }
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <div 
      ref={modalRef}
      tabIndex={-1}
      style={{
        position: 'fixed',
        top: '50%',
        left: '50%',
        transform: 'translate(-50%, -50%)',
        background: 'white',
        padding: '20px',
        border: '1px solid #ccc'
      }}
    >
      {children}
      <button onClick={onClose}>âŒ å…³é—­</button>
    </div>
  );
}
```

### 8.2 æ»šåŠ¨ä½ç½®è®°å¿†


```javascript
// ğŸ“œ æ»šåŠ¨ä½ç½®ä¿å­˜
function ScrollMemory() {
  const [scrollPosition, setScrollPosition] = useState(0);

  useEffect(() => {
    // ğŸ¯ æ»šåŠ¨äº‹ä»¶å¤„ç†
    function handleScroll() {
      setScrollPosition(window.pageYOffset);
    }

    // ğŸ‘‚ ç›‘å¬æ»šåŠ¨äº‹ä»¶
    window.addEventListener('scroll', handleScroll);

    // ğŸ§¹ æ¸…ç†ç›‘å¬å™¨
    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []);

  // ğŸ“ å›åˆ°é¡¶éƒ¨åŠŸèƒ½
  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  return (
    <div>
      <div style={{ height: '2000px', padding: '20px' }}>
        <p>æ»šåŠ¨ä½ç½®: {Math.round(scrollPosition)}px</p>
        {scrollPosition > 300 && (
          <button 
            onClick={scrollToTop}
            style={{
              position: 'fixed',
              bottom: '20px',
              right: '20px'
            }}
          >
            ğŸ” å›åˆ°é¡¶éƒ¨
          </button>
        )}
        <p>è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„é¡µé¢...</p>
      </div>
    </div>
  );
}
```

---

## 9. ğŸ–¥ï¸ çª—å£çŠ¶æ€ç›‘å¬


### 9.1 çª—å£å°ºå¯¸å“åº”


```javascript
// ğŸ“± å“åº”å¼çª—å£å°ºå¯¸
function ResponsiveLayout() {
  const [windowSize, setWindowSize] = useState({
    width: window.innerWidth,
    height: window.innerHeight
  });
  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);

  useEffect(() => {
    // ğŸ¯ çª—å£å¤§å°å˜åŒ–å¤„ç†
    function handleResize() {
      const newWidth = window.innerWidth;
      const newHeight = window.innerHeight;
      
      setWindowSize({ width: newWidth, height: newHeight });
      setIsMobile(newWidth < 768);
    }

    // ğŸ‘‚ ç›‘å¬çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', handleResize);

    // ğŸ§¹ æ¸…ç†ç›‘å¬å™¨
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  return (
    <div>
      <h3>ğŸ“ å½“å‰çª—å£: {windowSize.width} Ã— {windowSize.height}</h3>
      <p>è®¾å¤‡ç±»å‹: {isMobile ? 'ğŸ“± ç§»åŠ¨è®¾å¤‡' : 'ğŸ’» æ¡Œé¢è®¾å¤‡'}</p>
      
      <div style={{
        display: isMobile ? 'block' : 'flex',
        gap: '20px'
      }}>
        <div style={{ 
          flex: 1, 
          background: '#f0f0f0', 
          padding: '20px' 
        }}>
          å·¦ä¾§å†…å®¹
        </div>
        <div style={{ 
          flex: 1, 
          background: '#e0e0e0', 
          padding: '20px' 
        }}>
          å³ä¾§å†…å®¹
        </div>
      </div>
    </div>
  );
}
```

### 9.2 ç½‘ç»œçŠ¶æ€ç›‘å¬


```javascript
// ğŸŒ ç½‘ç»œè¿æ¥çŠ¶æ€
function NetworkStatus() {
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [connectionType, setConnectionType] = useState('æœªçŸ¥');

  useEffect(() => {
    // ğŸ¯ ç½‘ç»œçŠ¶æ€å˜åŒ–å¤„ç†
    function handleOnline() {
      setIsOnline(true);
    }

    function handleOffline() {
      setIsOnline(false);
    }

    // ğŸ‘‚ ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    // ğŸ” æ£€æµ‹è¿æ¥ç±»å‹ï¼ˆå¦‚æœæ”¯æŒï¼‰
    if ('connection' in navigator) {
      setConnectionType(navigator.connection.effectiveType || 'æœªçŸ¥');
    }

    // ğŸ§¹ æ¸…ç†ç›‘å¬å™¨
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  return (
    <div>
      <h3>ğŸŒ ç½‘ç»œçŠ¶æ€</h3>
      <p>è¿æ¥çŠ¶æ€: {isOnline ? 'ğŸŸ¢ åœ¨çº¿' : 'ğŸ”´ ç¦»çº¿'}</p>
      <p>è¿æ¥ç±»å‹: {connectionType}</p>
      {!isOnline && (
        <div style={{ color: 'red', padding: '10px', border: '1px solid red' }}>
          âš ï¸ ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®
        </div>
      )}
    </div>
  );
}
```

---

## 10. ğŸ§¹ å¼‚æ­¥æ“ä½œæ¸…ç†


### 10.1 é˜²æ­¢å†…å­˜æ³„æ¼çš„æ¨¡å¼


```javascript
// ğŸ›¡ï¸ å®‰å…¨çš„å¼‚æ­¥æ“ä½œ
function SafeAsyncComponent() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    let cancelled = false; // ğŸš© å–æ¶ˆæ ‡è®°
    const controller = new AbortController(); // ğŸ›‘ å–æ¶ˆæ§åˆ¶å™¨

    async function fetchData() {
      setLoading(true);
      try {
        // ğŸŒ æ”¯æŒå–æ¶ˆçš„fetchè¯·æ±‚
        const response = await fetch('/api/data', {
          signal: controller.signal
        });
        
        const result = await response.json();

        // âœ… æ£€æŸ¥ç»„ä»¶æ˜¯å¦è¿˜å­˜åœ¨
        if (!cancelled) {
          setData(result);
        }
      } catch (error) {
        if (error.name !== 'AbortError' && !cancelled) {
          console.error('è·å–æ•°æ®å¤±è´¥:', error);
        }
      } finally {
        if (!cancelled) {
          setLoading(false);
        }
      }
    }

    fetchData();

    // ğŸ§¹ æ¸…ç†å‡½æ•°
    return () => {
      cancelled = true; // è®¾ç½®å–æ¶ˆæ ‡è®°
      controller.abort(); // å–æ¶ˆç½‘ç»œè¯·æ±‚
    };
  }, []);

  if (loading) return <div>â³ åŠ è½½ä¸­...</div>;
  
  return (
    <div>
      {data ? (
        <p>âœ… æ•°æ®: {JSON.stringify(data)}</p>
      ) : (
        <p>âŒ æš‚æ— æ•°æ®</p>
      )}
    </div>
  );
}
```

### 10.2 Promiseé“¾çš„æ¸…ç†


```javascript
// ğŸ”— Promiseé“¾ç®¡ç†
function PromiseChainExample() {
  const [result, setResult] = useState('');
  const [error, setError] = useState('');

  useEffect(() => {
    let isMounted = true; // ğŸ  ç»„ä»¶æŒ‚è½½æ ‡è®°

    // ğŸ”— Promiseé“¾å¤„ç†
    fetch('/api/step1')
      .then(response => response.json())
      .then(data => {
        if (!isMounted) return; // ğŸšª æ—©æœŸé€€å‡º
        return fetch(`/api/step2/${data.id}`);
      })
      .then(response => {
        if (!isMounted) return;
        return response.json();
      })
      .then(finalData => {
        if (!isMounted) return;
        setResult(finalData.message);
      })
      .catch(err => {
        if (!isMounted) return;
        setError(err.message);
      });

    // ğŸ§¹ æ¸…ç†å‡½æ•°
    return () => {
      isMounted = false; // æ ‡è®°ç»„ä»¶å·²å¸è½½
    };
  }, []);

  return (
    <div>
      {result && <p>âœ… ç»“æœ: {result}</p>}
      {error && <p>âŒ é”™è¯¯: {error}</p>}
    </div>
  );
}
```

---

## 11. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 11.1 å‰¯ä½œç”¨ç®¡ç†çš„æ ¸å¿ƒåŸåˆ™


> ğŸ’¡ **è®°å¿†å£è¯€**ï¼šæœ‰å§‹æœ‰ç»ˆï¼Œç”¨å®Œå°±æ¸…ï¼ŒçŠ¶æ€å®‰å…¨ï¼Œæ€§èƒ½ä¼˜å…ˆ

```
ğŸ”¸ è®¾ç½®å¿…æ¸…ç†ï¼šå®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬å™¨ã€è®¢é˜…éƒ½è¦æ¸…ç†
ğŸ”¸ å¼‚æ­¥è¦æ£€æŸ¥ï¼šç»„ä»¶å¸è½½åä¸å†æ›´æ–°çŠ¶æ€
ğŸ”¸ ä¾èµ–è¦å‡†ç¡®ï¼šuseEffectä¾èµ–æ•°ç»„è¦åŒ…å«æ‰€æœ‰ç”¨åˆ°çš„å˜é‡
ğŸ”¸ æ€§èƒ½è¦è€ƒè™‘ï¼šé¿å…ä¸å¿…è¦çš„é‡å¤æ‰§è¡Œ
```

### 11.2 å¸¸è§å‰¯ä½œç”¨åœºæ™¯å¯¹ç…§è¡¨


| ğŸ¯ **åœºæ™¯** | **ä½•æ—¶æ‰§è¡Œ** | **æ¸…ç†å†…å®¹** | **æ³¨æ„äº‹é¡¹** |
|------------|-------------|-------------|-------------|
| ğŸŒ **æ•°æ®è·å–** | `ç»„ä»¶æŒ‚è½½` | `å–æ¶ˆè¯·æ±‚` | `é˜²æ­¢çŠ¶æ€æ›´æ–°` |
| ğŸ‘‚ **äº‹ä»¶ç›‘å¬** | `æŒ‚è½½/ä¾èµ–å˜åŒ–` | `ç§»é™¤ç›‘å¬å™¨` | `é¿å…å†…å­˜æ³„æ¼` |
| â° **å®šæ—¶å™¨** | `æŒ‚è½½/æ¡ä»¶æ»¡è¶³` | `æ¸…é™¤å®šæ—¶å™¨` | `çŠ¶æ€æ›´æ–°å®‰å…¨` |
| ğŸ”Œ **è®¢é˜…è¿æ¥** | `æŒ‚è½½/å‚æ•°å˜åŒ–` | `å…³é—­è¿æ¥` | `è¿æ¥çŠ¶æ€ç®¡ç†` |
| ğŸ¯ **DOMæ“ä½œ** | `æŒ‚è½½/çŠ¶æ€å˜åŒ–` | `æ¢å¤åŸçŠ¶æ€` | `refå¼•ç”¨æ£€æŸ¥` |

### 11.3 æœ€ä½³å®è·µæ¸…å•


**âœ… æ¨èåšæ³•**ï¼š
```javascript
// ğŸ¯ æ ‡å‡†å‰¯ä½œç”¨æ¨¡å¼
useEffect(() => {
  // 1ï¸âƒ£ è®¾ç½®å‰¯ä½œç”¨
  const resource = setupSideEffect();
  
  // 2ï¸âƒ£ è¿”å›æ¸…ç†å‡½æ•°
  return () => {
    cleanupSideEffect(resource);
  };
}, [dependency]); // 3ï¸âƒ£ å‡†ç¡®çš„ä¾èµ–æ•°ç»„
```

**âŒ å¸¸è§é”™è¯¯**ï¼š
- å¿˜è®°æ¸…ç†å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬å™¨
- ç»„ä»¶å¸è½½åä»ç„¶æ›´æ–°çŠ¶æ€
- ä¾èµ–æ•°ç»„ä¸å®Œæ•´å¯¼è‡´é—­åŒ…é™·é˜±
- è¿‡åº¦ä½¿ç”¨useEffectå¯¼è‡´æ€§èƒ½é—®é¢˜

### 11.4 æ€§èƒ½ä¼˜åŒ–å°è´´å£«


> ğŸš€ **ä¼˜åŒ–å»ºè®®**ï¼š
> - åˆå¹¶ç›¸å…³çš„å‰¯ä½œç”¨åˆ°åŒä¸€ä¸ªuseEffectä¸­
> - ä½¿ç”¨useCallbackç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°
> - åˆç†ä½¿ç”¨ä¾èµ–æ•°ç»„ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ‰§è¡Œ
> - å¯¹äºæ˜‚è´µçš„æ“ä½œè€ƒè™‘é˜²æŠ–/èŠ‚æµå¤„ç†

**æ ¸å¿ƒç†è§£**ï¼š
- ğŸ¯ å‰¯ä½œç”¨æ˜¯Reactç»„ä»¶ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„æ¡¥æ¢
- ğŸ§¹ æ¯ä¸ªå‰¯ä½œç”¨éƒ½è¦è€ƒè™‘æ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼
- âš¡ åˆç†ç®¡ç†å‰¯ä½œç”¨æ˜¯Reactæ€§èƒ½ä¼˜åŒ–çš„å…³é”®
- ğŸ›¡ï¸ å®‰å…¨çš„å¼‚æ­¥æ“ä½œéœ€è¦æ£€æŸ¥ç»„ä»¶çŠ¶æ€