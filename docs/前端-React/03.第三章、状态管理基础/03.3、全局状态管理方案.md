---
title: 3ã€å…¨å±€çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
---
## ğŸ“š ç›®å½•

1. [çŠ¶æ€ç®¡ç†åŸºç¡€æ¦‚å¿µ](#1-çŠ¶æ€ç®¡ç†åŸºç¡€æ¦‚å¿µ)
2. [ä»€ä¹ˆæ—¶å€™éœ€è¦çŠ¶æ€ç®¡ç†åº“](#2-ä»€ä¹ˆæ—¶å€™éœ€è¦çŠ¶æ€ç®¡ç†åº“)
3. [çŠ¶æ€ç®¡ç†å‘å±•å†ç¨‹](#3-çŠ¶æ€ç®¡ç†å‘å±•å†ç¨‹)
4. [Reduxæ ¸å¿ƒæ¦‚å¿µè¯¦è§£](#4-Reduxæ ¸å¿ƒæ¦‚å¿µè¯¦è§£)
5. [useReducer Hookè¯¦è§£](#5-useReducer-Hookè¯¦è§£)
6. [Redux Toolkitå®æˆ˜](#6-Redux-Toolkitå®æˆ˜)
7. [Zustandè½»é‡çº§æ–¹æ¡ˆ](#7-Zustandè½»é‡çº§æ–¹æ¡ˆ)
8. [çŠ¶æ€ç®¡ç†æ–¹æ¡ˆé€‰æ‹©æŒ‡å—](#8-çŠ¶æ€ç®¡ç†æ–¹æ¡ˆé€‰æ‹©æŒ‡å—)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ çŠ¶æ€ç®¡ç†åŸºç¡€æ¦‚å¿µ


### 1.1 ä»€ä¹ˆæ˜¯çŠ¶æ€ç®¡ç†


**çŠ¶æ€ç®¡ç†**å°±æ˜¯ç®¡ç†åº”ç”¨ç¨‹åºä¸­æ•°æ®çš„æ–¹å¼ã€‚æƒ³è±¡ä½ åœ¨ç®¡ç†ä¸€ä¸ªå›¾ä¹¦é¦†ï¼š

```
å›¾ä¹¦é¦†ç±»æ¯”ï¼š
ğŸ“š ä¹¦ç±ä¿¡æ¯ = åº”ç”¨çŠ¶æ€ï¼ˆæ•°æ®ï¼‰
ğŸ‘¨â€ğŸ’¼ å›¾ä¹¦ç®¡ç†å‘˜ = çŠ¶æ€ç®¡ç†å™¨
ğŸ“‹ å€Ÿé˜…è®°å½• = çŠ¶æ€å˜åŒ–å†å²
ğŸ¢ ä¸åŒæ¥¼å±‚ = ä¸åŒç»„ä»¶
```

### 1.2 æœ¬åœ°çŠ¶æ€ vs å…¨å±€çŠ¶æ€


**ğŸ  æœ¬åœ°çŠ¶æ€ï¼ˆLocal Stateï¼‰**
```jsx
// åªåœ¨å½“å‰ç»„ä»¶å†…ä½¿ç”¨çš„æ•°æ®
function Counter() {
  const [count, setCount] = useState(0); // æœ¬åœ°çŠ¶æ€
  
  return (
    <div>
      <p>è®¡æ•°: {count}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
    </div>
  );
}
```

**ğŸŒ å…¨å±€çŠ¶æ€ï¼ˆGlobal Stateï¼‰**
```jsx
// å¤šä¸ªç»„ä»¶éƒ½éœ€è¦ä½¿ç”¨çš„æ•°æ®
const UserContext = createContext();

function App() {
  const [user, setUser] = useState({ name: 'å¼ ä¸‰', role: 'admin' });
  
  return (
    <UserContext.Provider value={user}>
      <Header />  {/* éœ€è¦ç”¨æˆ·ä¿¡æ¯ */}
      <Profile /> {/* éœ€è¦ç”¨æˆ·ä¿¡æ¯ */}
      <Settings /> {/* éœ€è¦ç”¨æˆ·ä¿¡æ¯ */}
    </UserContext.Provider>
  );
}
```

### 1.3 çŠ¶æ€ç®¡ç†çš„æœ¬è´¨


> ğŸ’¡ **æ ¸å¿ƒç†è§£**ï¼šçŠ¶æ€ç®¡ç†å°±æ˜¯è§£å†³"æ•°æ®åœ¨å“ªé‡Œå­˜å‚¨"å’Œ"æ•°æ®å¦‚ä½•åœ¨ç»„ä»¶é—´ä¼ é€’"çš„é—®é¢˜

**ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜**ï¼š
```
çˆ·çˆ·ç»„ä»¶
  â†“ (propsä¼ é€’)
çˆ¶äº²ç»„ä»¶
  â†“ (propsä¼ é€’)  
å­™å­ç»„ä»¶  â† éœ€è¦çˆ·çˆ·çš„æ•°æ®

é—®é¢˜ï¼šä¸­é—´çš„çˆ¶äº²ç»„ä»¶ä¸éœ€è¦è¿™ä¸ªæ•°æ®ï¼Œä½†å¿…é¡»ä¼ é€’
```

**çŠ¶æ€ç®¡ç†æ–¹å¼**ï¼š
```
å…¨å±€çŠ¶æ€åº“
  â†—     â†˜
çˆ·çˆ·ç»„ä»¶   å­™å­ç»„ä»¶  â† ç›´æ¥ä»çŠ¶æ€åº“è·å–æ•°æ®

ä¼˜åŠ¿ï¼šè·³è¿‡ä¸­é—´å±‚ï¼Œç›´æ¥è·å–éœ€è¦çš„æ•°æ®
```

---

## 2. ğŸ¤” ä»€ä¹ˆæ—¶å€™éœ€è¦çŠ¶æ€ç®¡ç†åº“


### 2.1 éœ€è¦çŠ¶æ€ç®¡ç†åº“çš„å…¸å‹åœºæ™¯


**ğŸ“Š åœºæ™¯åˆ¤æ–­è¡¨**

| åœºæ™¯æè¿° | æ˜¯å¦éœ€è¦ | æ¨èæ–¹æ¡ˆ | è¯´æ˜ |
|---------|---------|---------|------|
| å•ä¸ªç»„ä»¶çš„è¡¨å•çŠ¶æ€ | âŒ ä¸éœ€è¦ | `useState` | æœ¬åœ°çŠ¶æ€è¶³å¤Ÿ |
| çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’ | âŒ ä¸éœ€è¦ | `props` | ç®€å•ä¼ é€’å³å¯ |
| è·¨3å±‚ä»¥ä¸Šç»„ä»¶ä¼ é€’ | âš ï¸ è€ƒè™‘ | `Context` | é¿å…props drilling |
| ç”¨æˆ·ç™»å½•ä¿¡æ¯ | âœ… éœ€è¦ | çŠ¶æ€ç®¡ç†åº“ | å…¨åº”ç”¨éƒ½è¦ç”¨ |
| è´­ç‰©è½¦æ•°æ® | âœ… éœ€è¦ | çŠ¶æ€ç®¡ç†åº“ | å¤šé¡µé¢å…±äº« |
| ä¸»é¢˜åˆ‡æ¢ | âœ… éœ€è¦ | çŠ¶æ€ç®¡ç†åº“ | å½±å“æ‰€æœ‰ç»„ä»¶ |

### 2.2 Props Drilling é—®é¢˜è¯¦è§£


**ä»€ä¹ˆæ˜¯Props Drillingï¼Ÿ**
å°±åƒæ¥åŠ›èµ›ä¸€æ ·ï¼Œæ•°æ®è¦ä¸€å±‚å±‚å¾€ä¸‹ä¼ ï¼š

```jsx
// ğŸš« Props Drilling ç¤ºä¾‹
function App() {
  const [user, setUser] = useState({name: 'å¼ ä¸‰'});
  
  return <HomePage user={user} />;
}

function HomePage({user}) {
  // HomePageæœ¬èº«ä¸éœ€è¦userï¼Œä½†è¦ä¼ ç»™å­ç»„ä»¶
  return <ProductList user={user} />;
}

function ProductList({user}) {
  // ProductListä¹Ÿä¸éœ€è¦userï¼Œç»§ç»­ä¼ é€’
  return <ProductCard user={user} />;
}

function ProductCard({user}) {
  // æœ€ç»ˆä½¿ç”¨userçš„åœ°æ–¹
  return <div>æ¬¢è¿ {user.name}</div>;
}
```

**ä¸ºä»€ä¹ˆè¿™æ ·ä¸å¥½ï¼Ÿ**
- ğŸ”´ ä¸­é—´ç»„ä»¶è¢«è¿«æ¥æ”¶ä¸éœ€è¦çš„props
- ğŸ”´ ä»£ç ç»´æŠ¤å›°éš¾ï¼Œæ”¹ä¸€ä¸ªè¦æ”¹ä¸€ä¸²
- ğŸ”´ ç»„ä»¶èŒè´£ä¸æ¸…æ™°

### 2.3 ä»€ä¹ˆæ—¶å€™è¯¥è€ƒè™‘çŠ¶æ€ç®¡ç†


**ğŸ¯ ç®€å•åˆ¤æ–­åŸåˆ™**

```
â“ é—®é—®è‡ªå·±è¿™äº›é—®é¢˜ï¼š

1. è¿™ä¸ªæ•°æ®æœ‰3ä¸ªä»¥ä¸Šçš„ç»„ä»¶è¦ç”¨å—ï¼Ÿ
2. æ•°æ®éœ€è¦åœ¨ä¸ç›¸å…³çš„ç»„ä»¶é—´å…±äº«å—ï¼Ÿ
3. æ•°æ®çš„å˜åŒ–éœ€è¦è§¦å‘å¤šä¸ªç»„ä»¶æ›´æ–°å—ï¼Ÿ
4. æˆ‘åœ¨ä¸ºäº†ä¼ é€’æ•°æ®è€Œä¼ é€’å¾ˆå¤špropså—ï¼Ÿ

å¦‚æœæœ‰2ä¸ªä»¥ä¸Šå›ç­”"æ˜¯"ï¼Œå°±è¯¥è€ƒè™‘çŠ¶æ€ç®¡ç†äº†
```

---

## 3. ğŸ“ˆ çŠ¶æ€ç®¡ç†å‘å±•å†ç¨‹


### 3.1 ReactçŠ¶æ€ç®¡ç†æ¼”è¿›


**å‘å±•æ—¶é—´çº¿**ï¼š
```
2013å¹´ Reactè¯ç”Ÿ
  â†“
2015å¹´ Reduxé—®ä¸– â† è§£å†³å¤æ‚çŠ¶æ€ç®¡ç†
  â†“  
2016å¹´ Context API â† Reactå®˜æ–¹æ–¹æ¡ˆ
  â†“
2019å¹´ Hooksæ—¶ä»£ â† useContext + useReducer
  â†“
2020å¹´+ ç°ä»£æ–¹æ¡ˆ â† Zustand, Recoilç­‰
```

### 3.2 å¸¸è§çŠ¶æ€ç®¡ç†åº“å¯¹æ¯”


**ğŸ“Š ä¸»æµæ–¹æ¡ˆå¯¹æ¯”**

| æ–¹æ¡ˆ | å­¦ä¹ éš¾åº¦ | ä»£ç é‡ | æ€§èƒ½ | é€‚ç”¨åœºæ™¯ | ç”Ÿæ€ |
|------|---------|--------|------|---------|------|
| **Context + useReducer** | ğŸŸ¢ ç®€å• | ğŸŸ¢ å°‘ | ğŸŸ¡ ä¸€èˆ¬ | ä¸­å°å‹é¡¹ç›® | â­â­â­ |
| **Redux** | ğŸ”´ å›°éš¾ | ğŸ”´ å¤š | ğŸŸ¢ ä¼˜ç§€ | å¤§å‹é¡¹ç›® | â­â­â­â­â­ |
| **Zustand** | ğŸŸ¢ ç®€å• | ğŸŸ¢ å°‘ | ğŸŸ¢ ä¼˜ç§€ | ä¸­å‹é¡¹ç›® | â­â­â­â­ |
| **Recoil** | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ ä¼˜ç§€ | å¤æ‚çŠ¶æ€å…³ç³» | â­â­â­ |

### 3.3 ä¸ºä»€ä¹ˆReduxè¿™ä¹ˆæµè¡Œ


> ğŸ’­ **æ€è€ƒ**ï¼šReduxä»£ç è¿™ä¹ˆå¤æ‚ï¼Œä¸ºä»€ä¹ˆè¿˜è¿™ä¹ˆå¤šäººç”¨ï¼Ÿ

**Reduxçš„ä¼˜åŠ¿**ï¼š
1. **å¯é¢„æµ‹æ€§**ï¼šçŠ¶æ€å˜åŒ–æœ‰æ˜ç¡®çš„è§„åˆ™
2. **è°ƒè¯•å‹å¥½**ï¼šRedux DevToolsèƒ½çœ‹åˆ°æ¯ä¸€æ­¥çŠ¶æ€å˜åŒ–
3. **æ—¶é—´æ—…è¡Œ**ï¼šå¯ä»¥å›é€€åˆ°ä»»æ„æ—¶åˆ»çš„çŠ¶æ€
4. **ç”Ÿæ€ä¸°å¯Œ**ï¼šå„ç§ä¸­é—´ä»¶ã€å·¥å…·æ”¯æŒ
5. **å›¢é˜Ÿåä½œ**ï¼šå¤§å®¶éƒ½æŒ‰åŒæ ·çš„è§„åˆ™å†™ä»£ç 

```
Reduxå°±åƒæ˜¯ç»™çŠ¶æ€ç®¡ç†åˆ¶å®šäº†"äº¤é€šè§„åˆ™"ï¼š
è™½ç„¶è§„åˆ™å¤šï¼Œä½†å¤§å®¶éƒ½æŒ‰è§„åˆ™èµ°ï¼Œå°±ä¸ä¼šå‡ºä¹±å­
```

---

## 4. ğŸª Reduxæ ¸å¿ƒæ¦‚å¿µè¯¦è§£


### 4.1 Reduxçš„ä¸‰å¤§æ ¸å¿ƒ


**ğŸª Storeï¼ˆä»“åº“ï¼‰**
```jsx
// Storeå°±æ˜¯å­˜æ”¾æ‰€æœ‰çŠ¶æ€çš„ä»“åº“
const store = createStore(reducer);

// æƒ³è±¡æˆä¸€ä¸ªè¶…å¸‚çš„æ€»ä»“åº“
// é‡Œé¢å­˜æ”¾ç€æ‰€æœ‰å•†å“ï¼ˆçŠ¶æ€æ•°æ®ï¼‰
```

**ğŸ“‹ Actionï¼ˆè¡ŒåŠ¨æŒ‡ä»¤ï¼‰**
```jsx
// Actionå°±æ˜¯ä¸€ä¸ªæè¿°"å‘ç”Ÿäº†ä»€ä¹ˆ"çš„å¯¹è±¡
const addTodoAction = {
  type: 'ADD_TODO',        // è¡ŒåŠ¨ç±»å‹
  payload: 'å­¦ä¹ React'      // è¡ŒåŠ¨æºå¸¦çš„æ•°æ®
};

// æƒ³è±¡æˆç»™ä»“åº“ç®¡ç†å‘˜çš„æŒ‡ä»¤å•ï¼š
// "è¯·åœ¨å¾…åŠäº‹é¡¹é‡Œæ·»åŠ 'å­¦ä¹ React'"
```

**âš™ï¸ Reducerï¼ˆå¤„ç†å™¨ï¼‰**
```jsx
// Reduceræ˜¯å¤„ç†Actionçš„çº¯å‡½æ•°
function todoReducer(state = [], action) {
  switch (action.type) {
    case 'ADD_TODO':
      return [...state, action.payload]; // è¿”å›æ–°çŠ¶æ€
    default:
      return state; // ä¸è®¤è¯†çš„actionï¼Œè¿”å›åŸçŠ¶æ€
  }
}

// æƒ³è±¡æˆä»“åº“ç®¡ç†å‘˜ï¼š
// æ ¹æ®æŒ‡ä»¤å•ï¼ˆActionï¼‰æ¥æ›´æ–°ä»“åº“ï¼ˆStateï¼‰
```

### 4.2 Reduxæ•°æ®æµå‘


**ğŸ”„ Reduxå•å‘æ•°æ®æµ**
```
UIç»„ä»¶ â†’ dispatch(Action) â†’ Reducer â†’ æ–°State â†’ UIæ›´æ–°

å…·ä½“æµç¨‹ï¼š
1. ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ï¼ˆUIäº¤äº’ï¼‰
2. ç»„ä»¶dispatchä¸€ä¸ªAction
3. StoreæŠŠActionå‘ç»™Reducerå¤„ç†
4. Reducerè¿”å›æ–°çš„State
5. Storeé€šçŸ¥ç»„ä»¶çŠ¶æ€å˜äº†
6. ç»„ä»¶é‡æ–°æ¸²æŸ“
```

### 4.3 Reduxä¸‰å¤§åŸåˆ™


**ğŸ“œ å•ä¸€æ•°æ®æº**
```jsx
// âœ… æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªStore
const store = createStore(rootReducer);

// âŒ ä¸è¦åˆ›å»ºå¤šä¸ªStore
// const userStore = createStore(userReducer);
// const todoStore = createStore(todoReducer);
```

**ğŸ“œ çŠ¶æ€åªè¯»**
```jsx
// âœ… åªèƒ½é€šè¿‡dispatch Actionæ¥æ”¹å˜çŠ¶æ€
dispatch({ type: 'ADD_TODO', payload: 'å­¦ä¹ ' });

// âŒ ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€
// state.todos.push('å­¦ä¹ '); // è¿™æ ·æ˜¯é”™è¯¯çš„ï¼
```

**ğŸ“œ çº¯å‡½æ•°ä¿®æ”¹**
```jsx
// âœ… Reducerå¿…é¡»æ˜¯çº¯å‡½æ•°
function reducer(state, action) {
  // ç›¸åŒè¾“å…¥ï¼Œå¿…é¡»è¿”å›ç›¸åŒè¾“å‡º
  // ä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼ˆAPIè°ƒç”¨ã€éšæœºæ•°ç­‰ï¼‰
  return newState;
}
```

### 4.4 ReduxåŸºç¡€ç¤ºä¾‹


**ğŸ“ å®Œæ•´çš„Todoåº”ç”¨ç¤ºä¾‹**
```jsx
// 1. å®šä¹‰Actionç±»å‹
const ADD_TODO = 'ADD_TODO';
const TOGGLE_TODO = 'TOGGLE_TODO';

// 2. Actionåˆ›å»ºå‡½æ•°
const addTodo = (text) => ({
  type: ADD_TODO,
  payload: { id: Date.now(), text, done: false }
});

// 3. Reducer
const todoReducer = (state = [], action) => {
  switch (action.type) {
    case ADD_TODO:
      return [...state, action.payload];
    case TOGGLE_TODO:
      return state.map(todo => 
        todo.id === action.payload 
          ? { ...todo, done: !todo.done }
          : todo
      );
    default:
      return state;
  }
};

// 4. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function TodoApp() {
  const dispatch = useDispatch();
  const todos = useSelector(state => state);
  
  const handleAdd = () => {
    dispatch(addTodo('æ–°ä»»åŠ¡'));
  };
  
  return (
    <div>
      <button onClick={handleAdd}>æ·»åŠ ä»»åŠ¡</button>
      {todos.map(todo => (
        <div key={todo.id}>{todo.text}</div>
      ))}
    </div>
  );
}
```

---

## 5. ğŸ”§ useReducer Hookè¯¦è§£


### 5.1 ä»€ä¹ˆæ˜¯useReducer


**useReducer** æ˜¯Reactå†…ç½®çš„Hookï¼Œå¯ä»¥çœ‹ä½œæ˜¯ `useState` çš„å‡çº§ç‰ˆï¼š

```jsx
// useStateï¼šç®€å•çŠ¶æ€
const [count, setCount] = useState(0);

// useReducerï¼šå¤æ‚çŠ¶æ€
const [state, dispatch] = useReducer(reducer, initialState);
```

> ğŸ’¡ **ç†è§£è¦ç‚¹**ï¼šuseReducerå°±æ˜¯æŠŠReduxçš„æ€æƒ³æ¬åˆ°äº†å•ä¸ªç»„ä»¶é‡Œ

### 5.2 ä½•æ—¶ä½¿ç”¨useReducer


**ğŸ“Š é€‰æ‹©æŒ‡å—**

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | åŸå›  |
|------|---------|------|
| ç®€å•çš„true/falseåˆ‡æ¢ | `useState` | è¿‡äºç®€å• |
| æ•°å­—åŠ å‡ | `useState` | æ“ä½œå•ä¸€ |
| å¤æ‚å¯¹è±¡çŠ¶æ€ | `useReducer` | å¤šç§æ“ä½œ |
| çŠ¶æ€é—´æœ‰å…³è” | `useReducer` | é€»è¾‘é›†ä¸­ |
| éœ€è¦æ’¤é”€åŠŸèƒ½ | `useReducer` | çŠ¶æ€å†å² |

### 5.3 useReducerå®æˆ˜ç¤ºä¾‹


**ğŸ“ è´­ç‰©è½¦ç®¡ç†ç¤ºä¾‹**
```jsx
// 1. å®šä¹‰åˆå§‹çŠ¶æ€
const initialState = {
  items: [],
  total: 0
};

// 2. å®šä¹‰Reducer
function cartReducer(state, action) {
  switch (action.type) {
    case 'ADD_ITEM':
      const newItems = [...state.items, action.payload];
      return {
        items: newItems,
        total: newItems.reduce((sum, item) => sum + item.price, 0)
      };
      
    case 'REMOVE_ITEM':
      const filteredItems = state.items.filter(item => item.id !== action.payload);
      return {
        items: filteredItems,
        total: filteredItems.reduce((sum, item) => sum + item.price, 0)
      };
      
    case 'CLEAR_CART':
      return initialState;
      
    default:
      return state;
  }
}

// 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function ShoppingCart() {
  const [cart, dispatch] = useReducer(cartReducer, initialState);
  
  const addItem = (item) => {
    dispatch({ type: 'ADD_ITEM', payload: item });
  };
  
  return (
    <div>
      <h3>è´­ç‰©è½¦ (æ€»ä»·: Â¥{cart.total})</h3>
      <button onClick={() => addItem({id: 1, name: 'è‹¹æœ', price: 5})}>
        æ·»åŠ è‹¹æœ
      </button>
      <button onClick={() => dispatch({type: 'CLEAR_CART'})}>
        æ¸…ç©ºè´­ç‰©è½¦
      </button>
    </div>
  );
}
```

### 5.4 useReducer vs useState


**ğŸ†š å¯¹æ¯”åˆ†æ**

```jsx
// useStateç‰ˆæœ¬ï¼šåˆ†æ•£çš„çŠ¶æ€é€»è¾‘
function Counter() {
  const [count, setCount] = useState(0);
  const [history, setHistory] = useState([]);
  const [canUndo, setCanUndo] = useState(false);
  
  const increment = () => {
    const newCount = count + 1;
    setCount(newCount);
    setHistory([...history, newCount]);
    setCanUndo(true);
  };
  // ... æ›´å¤šæ“ä½œ
}

// useReducerç‰ˆæœ¬ï¼šé›†ä¸­çš„çŠ¶æ€é€»è¾‘
function Counter() {
  const [state, dispatch] = useReducer(counterReducer, {
    count: 0,
    history: [],
    canUndo: false
  });
  
  const increment = () => dispatch({ type: 'INCREMENT' });
  const undo = () => dispatch({ type: 'UNDO' });
}
```

**ä¼˜åŠ¿å¯¹æ¯”**ï¼š
- âœ… **useState**ï¼šç®€å•ç›´æ¥ï¼Œå­¦ä¹ æˆæœ¬ä½
- âœ… **useReducer**ï¼šé€»è¾‘é›†ä¸­ï¼ŒçŠ¶æ€å…³è”æ¸…æ™°ï¼Œæ˜“äºæµ‹è¯•

---

## 6. ğŸ› ï¸ Redux Toolkitå®æˆ˜


### 6.1 ä¸ºä»€ä¹ˆéœ€è¦Redux Toolkit


**ä¼ ç»ŸReduxçš„ç—›ç‚¹**ï¼š
```jsx
// ğŸš« ä¼ ç»ŸReduxï¼šä»£ç å†—é•¿
// éœ€è¦å†™å¾ˆå¤šæ¨¡æ¿ä»£ç 
const ADD_TODO = 'ADD_TODO';

const addTodo = (text) => ({
  type: ADD_TODO,
  payload: text
});

const todoReducer = (state = [], action) => {
  switch (action.type) {
    case ADD_TODO:
      return [...state, action.payload];
    default:
      return state;
  }
};
```

**Redux Toolkitçš„è§£å†³æ–¹æ¡ˆ**ï¼š
```jsx
// âœ… Redux Toolkitï¼šç®€æ´æ˜äº†
const todoSlice = createSlice({
  name: 'todos',
  initialState: [],
  reducers: {
    addTodo: (state, action) => {
      state.push(action.payload); // å¯ä»¥ç›´æ¥"ä¿®æ”¹"çŠ¶æ€ï¼
    }
  }
});
```

### 6.2 Redux Toolkitæ ¸å¿ƒAPI


**ğŸ”§ createSliceï¼ˆåˆ›å»ºåˆ‡ç‰‡ï¼‰**
```jsx
import { createSlice } from '@reduxjs/toolkit';

const counterSlice = createSlice({
  name: 'counter',           // åˆ‡ç‰‡åç§°
  initialState: { value: 0 }, // åˆå§‹çŠ¶æ€
  reducers: {                // å‡é€Ÿå™¨å‡½æ•°
    increment: (state) => {
      state.value += 1;      // çœ‹èµ·æ¥åœ¨ç›´æ¥ä¿®æ”¹ï¼Œå®é™…ä¸ŠRTKå¸®ä½ å¤„ç†äº†
    },
    decrement: (state) => {
      state.value -= 1;
    },
    incrementByAmount: (state, action) => {
      state.value += action.payload;
    }
  }
});

// è‡ªåŠ¨ç”Ÿæˆactionåˆ›å»ºå‡½æ•°
export const { increment, decrement, incrementByAmount } = counterSlice.actions;
export default counterSlice.reducer;
```

**ğŸª configureStoreï¼ˆé…ç½®Storeï¼‰**
```jsx
import { configureStore } from '@reduxjs/toolkit';
import counterReducer from './counterSlice';

const store = configureStore({
  reducer: {
    counter: counterReducer
  }
});

// è‡ªåŠ¨é›†æˆRedux DevToolså’Œä¸­é—´ä»¶
```

### 6.3 Redux Toolkitå®Œæ•´ç¤ºä¾‹


**ğŸ“± Todoåº”ç”¨ç¤ºä¾‹**
```jsx
// todoSlice.js
import { createSlice } from '@reduxjs/toolkit';

const todoSlice = createSlice({
  name: 'todos',
  initialState: {
    items: [],
    filter: 'all' // all, active, completed
  },
  reducers: {
    addTodo: (state, action) => {
      state.items.push({
        id: Date.now(),
        text: action.payload,
        completed: false
      });
    },
    toggleTodo: (state, action) => {
      const todo = state.items.find(item => item.id === action.payload);
      if (todo) {
        todo.completed = !todo.completed;
      }
    },
    setFilter: (state, action) => {
      state.filter = action.payload;
    }
  }
});

export const { addTodo, toggleTodo, setFilter } = todoSlice.actions;
export default todoSlice.reducer;

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function TodoApp() {
  const { items, filter } = useSelector(state => state.todos);
  const dispatch = useDispatch();
  
  const handleAdd = (text) => {
    dispatch(addTodo(text));
  };
  
  return (
    <div>
      <input onKeyPress={(e) => {
        if (e.key === 'Enter') {
          handleAdd(e.target.value);
          e.target.value = '';
        }
      }} />
      {items.map(todo => (
        <div key={todo.id} onClick={() => dispatch(toggleTodo(todo.id))}>
          {todo.text}
        </div>
      ))}
    </div>
  );
}
```

### 6.4 Redux Toolkitçš„ä¼˜åŠ¿


**ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿**

| ä¼ ç»ŸRedux | Redux Toolkit | æ”¹è¿›è¯´æ˜ |
|-----------|---------------|----------|
| å¤§é‡æ¨¡æ¿ä»£ç  | ç®€æ´çš„sliceè¯­æ³• | ä»£ç é‡å‡å°‘70% |
| æ‰‹åŠ¨é…ç½®Store | è‡ªåŠ¨é…ç½® | å¼€ç®±å³ç”¨ |
| ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€ | çœ‹èµ·æ¥å¯ä»¥ç›´æ¥ä¿®æ”¹ | å†…ç½®Immerå¤„ç† |
| éœ€è¦å®‰è£…DevTools | è‡ªåŠ¨é›†æˆ | è°ƒè¯•æ›´æ–¹ä¾¿ |

---

## 7. ğŸª¶ Zustandè½»é‡çº§æ–¹æ¡ˆ


### 7.1 ä»€ä¹ˆæ˜¯Zustand


**Zustand**ï¼ˆå¾·è¯­"çŠ¶æ€"çš„æ„æ€ï¼‰æ˜¯ä¸€ä¸ªè¶…è½»é‡çº§çš„çŠ¶æ€ç®¡ç†åº“ï¼š

```jsx
// æ•´ä¸ªçŠ¶æ€ç®¡ç†åªéœ€è¦å‡ è¡Œä»£ç ï¼
import { create } from 'zustand';

const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 }))
}));

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function Counter() {
  const { count, increment, decrement } = useStore();
  
  return (
    <div>
      <span>{count}</span>
      <button onClick={increment}>+</button>
      <button onClick={decrement}>-</button>
    </div>
  );
}
```

### 7.2 Zustandçš„ç‰¹ç‚¹


**ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹**

| ç‰¹ç‚¹ | è¯´æ˜ | å¯¹æ¯”Redux |
|------|------|-----------|
| **æç®€API** | åªæœ‰ä¸€ä¸ªcreateå‡½æ•° | Reduxéœ€è¦å¾ˆå¤šæ¦‚å¿µ |
| **æ— æ¨¡æ¿ä»£ç ** | ç›´æ¥å†™é€»è¾‘å³å¯ | Reduxæœ‰å¤§é‡æ ·æ¿ä»£ç  |
| **TypeScriptå‹å¥½** | å¤©ç„¶æ”¯æŒç±»å‹æ¨å¯¼ | Reduxéœ€è¦é¢å¤–é…ç½® |
| **åŒ…å¤§å°** | 2KB | Reduxçº¦15KB |
| **å­¦ä¹ æˆæœ¬** | 5åˆ†é’Ÿä¸Šæ‰‹ | Reduxéœ€è¦åŠå¤© |

### 7.3 Zustandå®æˆ˜ç¤ºä¾‹


**ğŸ›’ è´­ç‰©è½¦ç®¡ç†**
```jsx
import { create } from 'zustand';

const useCartStore = create((set, get) => ({
  // çŠ¶æ€
  items: [],
  
  // è®¡ç®—å±æ€§
  get total() {
    return get().items.reduce((sum, item) => sum + item.price * item.quantity, 0);
  },
  
  // æ“ä½œæ–¹æ³•
  addItem: (product) => set((state) => {
    const existingItem = state.items.find(item => item.id === product.id);
    if (existingItem) {
      return {
        items: state.items.map(item =>
          item.id === product.id 
            ? { ...item, quantity: item.quantity + 1 }
            : item
        )
      };
    } else {
      return {
        items: [...state.items, { ...product, quantity: 1 }]
      };
    }
  }),
  
  removeItem: (id) => set((state) => ({
    items: state.items.filter(item => item.id !== id)
  })),
  
  clearCart: () => set({ items: [] })
}));

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function ShoppingCart() {
  const { items, total, addItem, removeItem, clearCart } = useCartStore();
  
  return (
    <div>
      <h3>è´­ç‰©è½¦ (æ€»ä»·: Â¥{total})</h3>
      {items.map(item => (
        <div key={item.id}>
          {item.name} x {item.quantity}
          <button onClick={() => removeItem(item.id)}>åˆ é™¤</button>
        </div>
      ))}
      <button onClick={clearCart}>æ¸…ç©º</button>
    </div>
  );
}
```

### 7.4 Zustand vs Redux


**ğŸ†š é€‚ç”¨åœºæ™¯å¯¹æ¯”**

```
é€‰æ‹©Zustandçš„æƒ…å†µï¼š
âœ… ä¸­å°å‹é¡¹ç›®ï¼ˆç»„ä»¶æ•° < 100ï¼‰
âœ… å›¢é˜Ÿåå¥½ç®€å•æ–¹æ¡ˆ
âœ… å¿«é€ŸåŸå‹å¼€å‘
âœ… ä¸éœ€è¦å¤æ‚çš„ä¸­é—´ä»¶

é€‰æ‹©Reduxçš„æƒ…å†µï¼š
âœ… å¤§å‹ä¼ä¸šé¡¹ç›®
âœ… éœ€è¦æ—¶é—´æ—…è¡Œè°ƒè¯•
âœ… å¤æ‚çš„å¼‚æ­¥é€»è¾‘
âœ… å›¢é˜Ÿå·²ç»ç†Ÿæ‚‰Redux
âœ… éœ€è¦ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ
```

---

## 8. ğŸ¯ çŠ¶æ€ç®¡ç†æ–¹æ¡ˆé€‰æ‹©æŒ‡å—


### 8.1 å†³ç­–æµç¨‹å›¾


```
å¼€å§‹é€‰æ‹©çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
    â†“
çŠ¶æ€æ˜¯å¦åªåœ¨å•ä¸ªç»„ä»¶ä½¿ç”¨ï¼Ÿ
    â†“ æ˜¯
ä½¿ç”¨ useState
    â†“ å¦
æ˜¯å¦åªåœ¨çˆ¶å­ç»„ä»¶é—´ä¼ é€’ï¼Ÿ
    â†“ æ˜¯  
ä½¿ç”¨ props ä¼ é€’
    â†“ å¦
æ˜¯å¦è·¨è¶Š2-3å±‚ç»„ä»¶ï¼Ÿ
    â†“ æ˜¯
ä½¿ç”¨ Context + useReducer
    â†“ å¦
é¡¹ç›®è§„æ¨¡å¦‚ä½•ï¼Ÿ
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å°å‹é¡¹ç›®    â”‚   ä¸­å‹é¡¹ç›®   â”‚   å¤§å‹é¡¹ç›®   â”‚
â”‚  (<10ç»„ä»¶)   â”‚  (10-50ç»„ä»¶) â”‚  (50+ç»„ä»¶)  â”‚
â”‚      â†“      â”‚      â†“      â”‚      â†“      â”‚
â”‚   Zustand   â”‚   Zustand   â”‚    Redux    â”‚
â”‚             â”‚  æˆ– Context  â”‚  Toolkit    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 è¯¦ç»†é€‰æ‹©æ ‡å‡†


**ğŸ“Š æ–¹æ¡ˆé€‰æ‹©çŸ©é˜µ**

| è€ƒè™‘å› ç´  | Context | Zustand | Redux | æƒé‡ |
|---------|---------|---------|-------|------|
| **å­¦ä¹ æˆæœ¬** | ğŸŸ¢ ä½ | ğŸŸ¢ ä½ | ğŸ”´ é«˜ | â­â­â­â­ |
| **å¼€å‘æ•ˆç‡** | ğŸŸ¡ ä¸­ | ğŸŸ¢ é«˜ | ğŸ”´ ä½ | â­â­â­â­ |
| **æ€§èƒ½è¡¨ç°** | ğŸ”´ å·® | ğŸŸ¢ å¥½ | ğŸŸ¢ å¥½ | â­â­â­ |
| **è°ƒè¯•å·¥å…·** | ğŸ”´ æ—  | ğŸŸ¡ ä¸€èˆ¬ | ğŸŸ¢ ä¼˜ç§€ | â­â­â­ |
| **ç”Ÿæ€ç³»ç»Ÿ** | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä¸°å¯Œ | â­â­ |
| **å›¢é˜Ÿåä½œ** | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ğŸŸ¢ å¥½ | â­â­â­ |

### 8.3 å…·ä½“é¡¹ç›®å»ºè®®


**ğŸ  ä¸ªäººé¡¹ç›®/å­¦ä¹ é¡¹ç›®**
```
æ¨èï¼šZustand
ç†ç”±ï¼š
- å­¦ä¹ æˆæœ¬ä½ï¼Œå¿«é€Ÿä¸Šæ‰‹
- ä»£ç ç®€æ´ï¼Œç»´æŠ¤æ–¹ä¾¿
- åŠŸèƒ½å¤Ÿç”¨ï¼Œæ€§èƒ½è‰¯å¥½
```

**ğŸ¢ å°å›¢é˜Ÿé¡¹ç›®**
```
æ¨èï¼šContext + useReducer æˆ– Zustand
ç†ç”±ï¼š
- å›¢é˜Ÿå­¦ä¹ æˆæœ¬å¯æ§
- é¡¹ç›®è§„æ¨¡é€‚ä¸­
- å¼€å‘æ•ˆç‡é«˜
```

**ğŸ­ å¤§å‹ä¼ä¸šé¡¹ç›®**
```
æ¨èï¼šRedux Toolkit
ç†ç”±ï¼š
- æ ‡å‡†åŒ–çš„å¼€å‘æ¨¡å¼
- å¼ºå¤§çš„è°ƒè¯•å·¥å…·
- ä¸°å¯Œçš„ä¸­é—´ä»¶ç”Ÿæ€
- å›¢é˜Ÿåä½œå‹å¥½
```

### 8.4 è¿ç§»ç­–ç•¥


**ğŸ”„ ä»ç®€å•åˆ°å¤æ‚çš„è¿ç§»è·¯å¾„**

```
é˜¶æ®µ1ï¼šuseState
  â†“ (ç»„ä»¶å¢å¤šï¼Œprops drillingå‡ºç°)
é˜¶æ®µ2ï¼šContext API
  â†“ (æ€§èƒ½é—®é¢˜ï¼ŒçŠ¶æ€å¤æ‚åŒ–)
é˜¶æ®µ3ï¼šZustand
  â†“ (é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œéœ€è¦æ›´å¤šå·¥å…·)
é˜¶æ®µ4ï¼šRedux Toolkit

ğŸ’¡ è¿ç§»å»ºè®®ï¼š
- ä¸è¦ä¸€å¼€å§‹å°±é€‰æ‹©æœ€å¤æ‚çš„æ–¹æ¡ˆ
- æ ¹æ®é¡¹ç›®å‘å±•é€æ­¥å‡çº§
- æ¯ä¸ªé˜¶æ®µçš„æ–¹æ¡ˆéƒ½æœ‰å…¶é€‚ç”¨æ€§
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ çŠ¶æ€ç®¡ç†æœ¬è´¨ï¼šè§£å†³æ•°æ®å­˜å‚¨å’Œç»„ä»¶é—´ä¼ é€’é—®é¢˜
ğŸ”¸ æœ¬åœ°vså…¨å±€ï¼šæ ¹æ®æ•°æ®ä½¿ç”¨èŒƒå›´é€‰æ‹©å­˜å‚¨æ–¹å¼
ğŸ”¸ Reduxä¸‰è¦ç´ ï¼šStoreï¼ˆä»“åº“ï¼‰ã€Actionï¼ˆæŒ‡ä»¤ï¼‰ã€Reducerï¼ˆå¤„ç†å™¨ï¼‰
ğŸ”¸ å•å‘æ•°æ®æµï¼šUI â†’ Action â†’ Reducer â†’ State â†’ UI
ğŸ”¸ useReducerï¼šReactå†…ç½®çš„Reduxæ€æƒ³å®ç°
ğŸ”¸ æ–¹æ¡ˆé€‰æ‹©ï¼šæ ¹æ®é¡¹ç›®è§„æ¨¡å’Œå›¢é˜Ÿæƒ…å†µé€‰æ‹©åˆé€‚æ–¹æ¡ˆ
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä»€ä¹ˆæ—¶å€™éœ€è¦çŠ¶æ€ç®¡ç†**
```
ç®€å•åˆ¤æ–­ï¼š
- 3ä¸ªä»¥ä¸Šç»„ä»¶éœ€è¦åŒä¸€æ•°æ® â†’ è€ƒè™‘å…¨å±€çŠ¶æ€
- å‡ºç°props drilling â†’ ä½¿ç”¨Contextæˆ–çŠ¶æ€åº“
- çŠ¶æ€é€»è¾‘å¤æ‚ â†’ ä½¿ç”¨useReduceræˆ–Redux
- éœ€è¦æ—¶é—´æ—…è¡Œè°ƒè¯• â†’ é€‰æ‹©Redux
```

**ğŸ”¹ ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯**
```
useStateï¼šç»„ä»¶å†…éƒ¨çŠ¶æ€
Contextï¼šè·¨ç»„ä»¶æ•°æ®ä¼ é€’
useReducerï¼šå¤æ‚çš„ç»„ä»¶çŠ¶æ€é€»è¾‘
Zustandï¼šè½»é‡çº§å…¨å±€çŠ¶æ€
Reduxï¼šå¤§å‹é¡¹ç›®çš„æ ‡å‡†åŒ–çŠ¶æ€ç®¡ç†
```

**ğŸ”¹ æ€§èƒ½è€ƒè™‘**
```
Contextçš„æ€§èƒ½é™·é˜±ï¼š
- æ‰€æœ‰æ¶ˆè´¹è€…ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“
- è§£å†³ï¼šæ‹†åˆ†Contextï¼Œä½¿ç”¨useMemo

çŠ¶æ€ç®¡ç†åº“çš„ä¼˜åŠ¿ï¼š
- ç²¾ç¡®çš„è®¢é˜…æœºåˆ¶
- åªæœ‰çœŸæ­£ä½¿ç”¨æ•°æ®çš„ç»„ä»¶æ‰æ›´æ–°
```

### 9.3 å®æˆ˜åº”ç”¨æŒ‡å¯¼


**ğŸ¯ å­¦ä¹ è·¯å¾„å»ºè®®**
```
ç¬¬1æ­¥ï¼šæŒæ¡useStateå’ŒuseReducer
ç¬¬2æ­¥ï¼šç†è§£Context APIå’Œprops drillingé—®é¢˜  
ç¬¬3æ­¥ï¼šå­¦ä¹ Zustandï¼Œä½“éªŒç°ä»£çŠ¶æ€ç®¡ç†
ç¬¬4æ­¥ï¼šæ·±å…¥Reduxæ¦‚å¿µï¼Œç†è§£è®¾è®¡æ€æƒ³
ç¬¬5æ­¥ï¼šæŒæ¡Redux Toolkitï¼Œæé«˜å¼€å‘æ•ˆç‡
```

**ğŸ› ï¸ æœ€ä½³å®è·µ**
```
çŠ¶æ€è®¾è®¡åŸåˆ™ï¼š
- å°½é‡æ‰å¹³åŒ–ï¼Œé¿å…æ·±åº¦åµŒå¥—
- æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡çŠ¶æ€
- ä¿æŒçŠ¶æ€æœ€å°åŒ–ï¼Œèƒ½è®¡ç®—çš„ä¸å­˜å‚¨

ä»£ç ç»„ç»‡ï¼š
- çŠ¶æ€é€»è¾‘ä¸UIç»„ä»¶åˆ†ç¦»
- ä½¿ç”¨è‡ªå®šä¹‰Hookå°è£…çŠ¶æ€é€»è¾‘
- ä¿æŒReducerçš„çº¯å‡½æ•°ç‰¹æ€§
```

**âš ï¸ å¸¸è§é™·é˜±**
```
1. è¿‡åº¦ä½¿ç”¨å…¨å±€çŠ¶æ€
   - ä¸æ˜¯æ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦å…¨å±€ç®¡ç†
   - ä¼˜å…ˆè€ƒè™‘ç»„ä»¶å†…éƒ¨çŠ¶æ€

2. Contextæ€§èƒ½é—®é¢˜
   - é¿å…åœ¨Contextä¸­æ”¾ç½®é¢‘ç¹å˜åŒ–çš„æ•°æ®
   - åˆç†æ‹†åˆ†Context

3. Reduxè¿‡åº¦è®¾è®¡
   - å°é¡¹ç›®ä¸è¦å¼ºè¡Œä½¿ç”¨Redux
   - é¿å…ä¸ºäº†ç”¨Reduxè€Œç”¨Redux
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
```
çŠ¶æ€ç®¡ç†é€‰æ–¹æ¡ˆï¼Œé¡¹ç›®è§„æ¨¡æ˜¯å…³é”®
æœ¬åœ°å…¨å±€è¦åˆ†æ¸…ï¼Œç»„ä»¶é€šä¿¡æ˜¯æ ¸å¿ƒ
Reduxæ€æƒ³è¦ç†è§£ï¼Œå•å‘æ•°æ®æµè¦è®°
å·¥å…·è™½å¤šä¸è¦æ…Œï¼Œåˆé€‚æ‰æ˜¯æœ€é‡è¦
```