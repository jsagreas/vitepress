---
title: 1ã€useStateçŠ¶æ€ç®¡ç†
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯çŠ¶æ€ï¼ˆStateï¼‰](#1-ä»€ä¹ˆæ˜¯çŠ¶æ€state)
2. [Hookçš„åŸºæœ¬æ¦‚å¿µ](#2-hookçš„åŸºæœ¬æ¦‚å¿µ)
3. [useStateæ ¸å¿ƒè¯­æ³•](#3-usestateæ ¸å¿ƒè¯­æ³•)
4. [çŠ¶æ€çš„è¯»å–ä¸æ›´æ–°](#4-çŠ¶æ€çš„è¯»å–ä¸æ›´æ–°)
5. [çŠ¶æ€åˆå§‹åŒ–æŠ€å·§](#5-çŠ¶æ€åˆå§‹åŒ–æŠ€å·§)
6. [çŠ¶æ€æ›´æ–°çš„å¼‚æ­¥ç‰¹æ€§](#6-çŠ¶æ€æ›´æ–°çš„å¼‚æ­¥ç‰¹æ€§)
7. [å‡½æ•°å¼æ›´æ–°æŠ€å·§](#7-å‡½æ•°å¼æ›´æ–°æŠ€å·§)
8. [å¤æ‚çŠ¶æ€ç®¡ç†](#8-å¤æ‚çŠ¶æ€ç®¡ç†)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ¯ ä»€ä¹ˆæ˜¯çŠ¶æ€ï¼ˆStateï¼‰


### 1.1 çŠ¶æ€çš„ç”Ÿæ´»åŒ–ç†è§£


**ğŸ”¸ çŠ¶æ€å°±åƒç”Ÿæ´»ä¸­çš„"å˜åŒ–"**
```
æƒ³è±¡ä½ çš„æ‰‹æœºï¼š
ğŸ“± ç”µé‡ï¼š100% â†’ 80% â†’ 50% â†’ 20%ï¼ˆçŠ¶æ€åœ¨å˜åŒ–ï¼‰
ğŸ“¶ ç½‘ç»œï¼šWiFi â†’ 4G â†’ æ— ä¿¡å·ï¼ˆçŠ¶æ€åœ¨åˆ‡æ¢ï¼‰
ğŸ”Š éŸ³é‡ï¼šé™éŸ³ â†’ ä½éŸ³ â†’ é«˜éŸ³ï¼ˆçŠ¶æ€åœ¨è°ƒèŠ‚ï¼‰

è¿™äº›"å˜åŒ–çš„æ•°æ®"å°±æ˜¯çŠ¶æ€ï¼
```

### 1.2 ä¸ºä»€ä¹ˆReactéœ€è¦çŠ¶æ€


**ğŸ’¡ æ²¡æœ‰çŠ¶æ€çš„ç½‘é¡µ = æ­»æ¿çš„å®£ä¼ å†Œ**
```
é™æ€ç½‘é¡µï¼š
- å†…å®¹å›ºå®šä¸å˜
- ç”¨æˆ·æ— æ³•äº¤äº’
- å°±åƒä¸€å¼ å°åˆ·å¥½çš„æµ·æŠ¥

åŠ¨æ€ç½‘é¡µï¼ˆæœ‰çŠ¶æ€ï¼‰ï¼š
- å†…å®¹å¯ä»¥å˜åŒ–
- ç”¨æˆ·å¯ä»¥ç‚¹å‡»ã€è¾“å…¥
- å°±åƒä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„åº”ç”¨
```

### 1.3 çŠ¶æ€åœ¨ç»„ä»¶ä¸­çš„ä½œç”¨


```
ç»„ä»¶ = æ¨¡æ¿ + æ•°æ®ï¼ˆçŠ¶æ€ï¼‰

æ²¡æœ‰çŠ¶æ€ï¼š
function Welcome() {
  return <h1>Hello, å¼ ä¸‰</h1>  // æ°¸è¿œæ˜¾ç¤º"å¼ ä¸‰"
}

æœ‰çŠ¶æ€ï¼š
function Welcome() {
  const [name, setName] = useState('å¼ ä¸‰')
  return <h1>Hello, {name}</h1>  // å¯ä»¥å˜æˆ"æå››"ã€"ç‹äº”"
}
```

---

## 2. ğŸª Hookçš„åŸºæœ¬æ¦‚å¿µ


### 2.1 ä»€ä¹ˆæ˜¯Hook


**ğŸ”¸ Hook = é’©å­ = ç‰¹æ®ŠåŠŸèƒ½**
```
æƒ³è±¡é’©å­çš„ä½œç”¨ï¼š
ğŸª é’“é±¼é’©ï¼šé’©ä½é±¼ï¼ˆè·å–åŠŸèƒ½ï¼‰
ğŸª è¡£æœé’©ï¼šæŒ‚è¡£æœï¼ˆè¿æ¥åŠŸèƒ½ï¼‰
ğŸª React Hookï¼šé’©ä½ReactåŠŸèƒ½ï¼ˆçŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼‰

useState = é’©ä½"çŠ¶æ€ç®¡ç†"åŠŸèƒ½çš„é’©å­
```

### 2.2 Hookçš„ç‰¹ç‚¹


> ğŸ’¡ **é‡è¦ç†è§£**ï¼šHookè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰äº†"è®°å¿†"èƒ½åŠ›

```
æ²¡æœ‰Hookçš„å‡½æ•°ç»„ä»¶ï¼š
function Counter() {
  let count = 0  // æ¯æ¬¡è¿è¡Œéƒ½é‡ç½®ä¸º0
  return <div>{count}</div>
}

æœ‰Hookçš„å‡½æ•°ç»„ä»¶ï¼š
function Counter() {
  const [count, setCount] = useState(0)  // Reactå¸®ä½ "è®°ä½"æ•°å€¼
  return <div>{count}</div>
}
```

### 2.3 Hookä½¿ç”¨è§„åˆ™


> âš ï¸ **é‡è¦è§„åˆ™**ï¼šHookåªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶å±‚ä½¿ç”¨

```javascript
âœ… æ­£ç¡®ç”¨æ³•ï¼š
function MyComponent() {
  const [name, setName] = useState('å¼ ä¸‰')  // é¡¶å±‚ä½¿ç”¨
  const [age, setAge] = useState(25)        // é¡¶å±‚ä½¿ç”¨
  
  return <div>{name}, {age}å²</div>
}

âŒ é”™è¯¯ç”¨æ³•ï¼š
function MyComponent() {
  if (true) {
    const [name, setName] = useState('å¼ ä¸‰')  // ä¸èƒ½åœ¨ifä¸­ä½¿ç”¨
  }
  
  for (let i = 0; i < 3; i++) {
    const [age, setAge] = useState(25)        // ä¸èƒ½åœ¨å¾ªç¯ä¸­ä½¿ç”¨
  }
}
```

---

## 3. ğŸ¨ useStateæ ¸å¿ƒè¯­æ³•


### 3.1 åŸºæœ¬è¯­æ³•ç»“æ„


**ğŸ”¸ useStateçš„è¯­æ³•æ¨¡å¼**
```javascript
const [çŠ¶æ€å˜é‡, æ›´æ–°å‡½æ•°] = useState(åˆå§‹å€¼)

å…·ä½“ä¾‹å­ï¼š
const [count, setCount] = useState(0)
//    â†‘       â†‘           â†‘
//   è¯»å–    ä¿®æ”¹        åˆå§‹å€¼
```

### 3.2 æ•°ç»„è§£æ„çš„å«ä¹‰


**ğŸ’¡ æ•°ç»„è§£æ„ = ä¸€æ¬¡æ€§è·å–ä¸¤æ ·ä¸œè¥¿**
```javascript
// useStateè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå…ƒç´ 
// [çŠ¶æ€å€¼, æ›´æ–°å‡½æ•°]

const stateArray = useState(0)
// stateArray[0] æ˜¯çŠ¶æ€å€¼
// stateArray[1] æ˜¯æ›´æ–°å‡½æ•°

// ç”¨æ•°ç»„è§£æ„ç®€åŒ–ï¼š
const [count, setCount] = useState(0)
// ç­‰ä»·äºï¼š
// const count = stateArray[0]
// const setCount = stateArray[1]
```

### 3.3 å‘½åçº¦å®š


```javascript
// çŠ¶æ€å˜é‡ï¼šæè¿°æ€§åç§°
// æ›´æ–°å‡½æ•°ï¼šset + çŠ¶æ€å˜é‡åï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰

const [name, setName] = useState('å¼ ä¸‰')
const [age, setAge] = useState(25)
const [isVisible, setIsVisible] = useState(true)
const [userList, setUserList] = useState([])
```

---

## 4. ğŸ“– çŠ¶æ€çš„è¯»å–ä¸æ›´æ–°


### 4.1 çŠ¶æ€è¯»å–ï¼ˆä½¿ç”¨çŠ¶æ€å˜é‡ï¼‰


```javascript
function UserProfile() {
  const [name, setName] = useState('å¼ ä¸‰')
  const [age, setAge] = useState(25)
  
  return (
    <div>
      <p>å§“åï¼š{name}</p>        {/* ç›´æ¥ä½¿ç”¨çŠ¶æ€å˜é‡ */}
      <p>å¹´é¾„ï¼š{age}å²</p>       {/* ç›´æ¥ä½¿ç”¨çŠ¶æ€å˜é‡ */}
    </div>
  )
}
```

### 4.2 çŠ¶æ€æ›´æ–°ï¼ˆè°ƒç”¨æ›´æ–°å‡½æ•°ï¼‰


```javascript
function Counter() {
  const [count, setCount] = useState(0)
  
  const handleIncrement = () => {
    setCount(count + 1)  // è°ƒç”¨æ›´æ–°å‡½æ•°ï¼Œä¼ å…¥æ–°å€¼
  }
  
  return (
    <div>
      <p>è®¡æ•°ï¼š{count}</p>
      <button onClick={handleIncrement}>ç‚¹å‡»+1</button>
    </div>
  )
}
```

### 4.3 é‡æ–°æ¸²æŸ“æœºåˆ¶


**ğŸ”„ çŠ¶æ€æ›´æ–° â†’ ç»„ä»¶é‡æ–°æ¸²æŸ“ â†’ é¡µé¢æ›´æ–°**

```
ç”¨æˆ·ç‚¹å‡»æŒ‰é’®
    â†“
setCount(count + 1) è¢«è°ƒç”¨
    â†“
Reactæ£€æµ‹åˆ°çŠ¶æ€å˜åŒ–
    â†“ 
ç»„ä»¶é‡æ–°è¿è¡Œï¼ˆé‡æ–°æ¸²æŸ“ï¼‰
    â†“
é¡µé¢æ˜¾ç¤ºæ–°çš„æ•°å€¼
```

---

## 5. ğŸš€ çŠ¶æ€åˆå§‹åŒ–æŠ€å·§


### 5.1 ç®€å•å€¼åˆå§‹åŒ–


```javascript
// åŸºæœ¬æ•°æ®ç±»å‹
const [count, setCount] = useState(0)           // æ•°å­—
const [name, setName] = useState('å¼ ä¸‰')         // å­—ç¬¦ä¸²
const [isVisible, setIsVisible] = useState(true) // å¸ƒå°”å€¼
const [items, setItems] = useState([])          // æ•°ç»„
const [user, setUser] = useState({})            // å¯¹è±¡
```

### 5.2 æƒ°æ€§åˆå§‹åŒ–


**ğŸ”¸ ä»€ä¹ˆæ˜¯æƒ°æ€§åˆå§‹åŒ–ï¼Ÿ**
> å½“åˆå§‹å€¼éœ€è¦å¤æ‚è®¡ç®—æ—¶ï¼Œä¼ å…¥å‡½æ•°è€Œä¸æ˜¯å€¼ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½è®¡ç®—

```javascript
// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œexpensiveè®¡ç®—
const [data, setData] = useState(expensiveCalculation())

// âœ… åªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡è®¡ç®—
const [data, setData] = useState(() => expensiveCalculation())

// å®é™…ä¾‹å­ï¼š
const [timestamp, setTimestamp] = useState(() => {
  console.log('åªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œ')
  return Date.now()
})
```

### 5.3 ä»æœ¬åœ°å­˜å‚¨åˆå§‹åŒ–


```javascript
function useLocalStorage(key, defaultValue) {
  const [value, setValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key)
      return item ? JSON.parse(item) : defaultValue
    } catch (error) {
      return defaultValue
    }
  })
  
  return [value, setValue]
}

// ä½¿ç”¨ï¼š
const [theme, setTheme] = useLocalStorage('theme', 'light')
```

---

## 6. â° çŠ¶æ€æ›´æ–°çš„å¼‚æ­¥ç‰¹æ€§


### 6.1 å¼‚æ­¥æ›´æ–°çš„å«ä¹‰


**ğŸ’¡ å…³é”®ç†è§£**ï¼šsetStateä¸ä¼šç«‹å³æ”¹å˜çŠ¶æ€å€¼

```javascript
function Counter() {
  const [count, setCount] = useState(0)
  
  const handleClick = () => {
    console.log('æ›´æ–°å‰ï¼š', count)  // 0
    setCount(count + 1)
    console.log('æ›´æ–°åï¼š', count)  // è¿˜æ˜¯ 0ï¼ï¼ˆå¼‚æ­¥çš„ï¼‰
  }
  
  return <button onClick={handleClick}>ç‚¹å‡»: {count}</button>
}
```

### 6.2 æ‰¹é‡æ›´æ–°æœºåˆ¶


**ğŸ”¸ Reactä¼šåˆå¹¶å¤šä¸ªçŠ¶æ€æ›´æ–°**

```javascript
function MultiUpdate() {
  const [count, setCount] = useState(0)
  
  const handleClick = () => {
    setCount(count + 1)  // countè¿˜æ˜¯0ï¼Œæ‰€ä»¥æ˜¯0+1=1
    setCount(count + 1)  // countè¿˜æ˜¯0ï¼Œæ‰€ä»¥æ˜¯0+1=1
    setCount(count + 1)  // countè¿˜æ˜¯0ï¼Œæ‰€ä»¥æ˜¯0+1=1
    // æœ€ç»ˆç»“æœï¼šcount = 1ï¼ˆä¸æ˜¯3ï¼ï¼‰
  }
  
  return <button onClick={handleClick}>ç‚¹å‡»: {count}</button>
}
```

### 6.3 æ›´æ–°é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ


**âŒ é™·é˜±ï¼šåŸºäºæ—§çŠ¶æ€çš„å¤šæ¬¡æ›´æ–°**
```javascript
const [count, setCount] = useState(0)

// é—®é¢˜ï¼šä¸‰æ¬¡æ›´æ–°éƒ½åŸºäºç›¸åŒçš„æ—§å€¼
setCount(count + 1)  // 0 + 1 = 1
setCount(count + 1)  // 0 + 1 = 1
setCount(count + 1)  // 0 + 1 = 1
// ç»“æœï¼š1ï¼ˆä¸æ˜¯3ï¼‰
```

**âœ… è§£å†³ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°**
```javascript
const [count, setCount] = useState(0)

// æ­£ç¡®ï¼šæ¯æ¬¡æ›´æ–°éƒ½åŸºäºæœ€æ–°å€¼
setCount(prev => prev + 1)  // 0 + 1 = 1
setCount(prev => prev + 1)  // 1 + 1 = 2  
setCount(prev => prev + 1)  // 2 + 1 = 3
// ç»“æœï¼š3
```

---

## 7. ğŸ¯ å‡½æ•°å¼æ›´æ–°æŠ€å·§


### 7.1 å‡½æ•°å¼æ›´æ–°çš„ä¼˜åŠ¿


**ğŸ”¸ ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°å¼æ›´æ–°ï¼Ÿ**
```
ç›´æ¥æ›´æ–°ï¼šsetCount(count + 1)
- åŸºäºå½“å‰å¿«ç…§å€¼
- å¯èƒ½å‡ºç°æ‰¹é‡æ›´æ–°é—®é¢˜

å‡½æ•°å¼æ›´æ–°ï¼šsetCount(prev => prev + 1)  
- åŸºäºæœ€æ–°çŠ¶æ€å€¼
- é¿å…æ‰¹é‡æ›´æ–°é™·é˜±
```

### 7.2 æ•°å­—çŠ¶æ€çš„å‡½æ•°å¼æ›´æ–°


```javascript
function Counter() {
  const [count, setCount] = useState(0)
  
  return (
    <div>
      <p>è®¡æ•°ï¼š{count}</p>
      <button onClick={() => setCount(prev => prev + 1)}>+1</button>
      <button onClick={() => setCount(prev => prev - 1)}>-1</button>
      <button onClick={() => setCount(prev => prev * 2)}>Ã—2</button>
      <button onClick={() => setCount(0)}>é‡ç½®</button>
    </div>
  )
}
```

### 7.3 æ•°ç»„çŠ¶æ€çš„å‡½æ•°å¼æ›´æ–°


```javascript
function TodoList() {
  const [todos, setTodos] = useState([])
  
  const addTodo = (text) => {
    setTodos(prev => [...prev, { id: Date.now(), text }])
  }
  
  const removeTodo = (id) => {
    setTodos(prev => prev.filter(todo => todo.id !== id))
  }
  
  const toggleTodo = (id) => {
    setTodos(prev => 
      prev.map(todo => 
        todo.id === id ? { ...todo, done: !todo.done } : todo
      )
    )
  }
  
  return (
    <div>
      {todos.map(todo => (
        <div key={todo.id}>
          <span>{todo.text}</span>
          <button onClick={() => toggleTodo(todo.id)}>åˆ‡æ¢</button>
          <button onClick={() => removeTodo(todo.id)}>åˆ é™¤</button>
        </div>
      ))}
    </div>
  )
}
```

### 7.4 å¯¹è±¡çŠ¶æ€çš„å‡½æ•°å¼æ›´æ–°


```javascript
function UserForm() {
  const [user, setUser] = useState({ name: '', age: 0, email: '' })
  
  const updateField = (field, value) => {
    setUser(prev => ({
      ...prev,        // ä¿ç•™å…¶ä»–å­—æ®µ
      [field]: value  // æ›´æ–°æŒ‡å®šå­—æ®µ
    }))
  }
  
  return (
    <div>
      <input 
        value={user.name}
        onChange={(e) => updateField('name', e.target.value)}
        placeholder="å§“å"
      />
      <input 
        value={user.age}
        onChange={(e) => updateField('age', Number(e.target.value))}
        placeholder="å¹´é¾„"
      />
      <input 
        value={user.email}
        onChange={(e) => updateField('email', e.target.value)}
        placeholder="é‚®ç®±"
      />
    </div>
  )
}
```

---

## 8. ğŸª å¤æ‚çŠ¶æ€ç®¡ç†


### 8.1 å¤šä¸ªçŠ¶æ€å˜é‡ç®¡ç†


```javascript
function UserProfile() {
  // åˆ†å¼€ç®¡ç†ä¸åŒç±»å‹çš„çŠ¶æ€
  const [personal, setPersonal] = useState({ name: '', age: 0 })
  const [contact, setContact] = useState({ email: '', phone: '' })
  const [preferences, setPreferences] = useState({ theme: 'light', language: 'zh' })
  
  return (
    <div>
      <h2>ä¸ªäººä¿¡æ¯</h2>
      <p>å§“åï¼š{personal.name}</p>
      <p>å¹´é¾„ï¼š{personal.age}</p>
      
      <h2>è”ç³»æ–¹å¼</h2>
      <p>é‚®ç®±ï¼š{contact.email}</p>
      <p>ç”µè¯ï¼š{contact.phone}</p>
      
      <h2>åå¥½è®¾ç½®</h2>
      <p>ä¸»é¢˜ï¼š{preferences.theme}</p>
      <p>è¯­è¨€ï¼š{preferences.language}</p>
    </div>
  )
}
```

### 8.2 çŠ¶æ€åˆå¹¶æœºåˆ¶


**ğŸ”¸ Object.assign vs å±•å¼€è¿ç®—ç¬¦**

```javascript
function Settings() {
  const [config, setConfig] = useState({
    theme: 'light',
    language: 'zh',
    notifications: true
  })
  
  // æ–¹æ³•1ï¼šä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ï¼ˆæ¨èï¼‰
  const updateTheme = (newTheme) => {
    setConfig(prev => ({
      ...prev,
      theme: newTheme
    }))
  }
  
  // æ–¹æ³•2ï¼šä½¿ç”¨Object.assign
  const updateLanguage = (newLang) => {
    setConfig(prev => Object.assign({}, prev, { language: newLang }))
  }
  
  return (
    <div>
      <p>å½“å‰ä¸»é¢˜ï¼š{config.theme}</p>
      <button onClick={() => updateTheme('dark')}>åˆ‡æ¢åˆ°æš—è‰²</button>
    </div>
  )
}
```

### 8.3 çŠ¶æ€ä¾èµ–ä¸è®¡ç®—


```javascript
function ShoppingCart() {
  const [items, setItems] = useState([])
  
  // åŸºäºçŠ¶æ€çš„è®¡ç®—å€¼
  const totalPrice = items.reduce((sum, item) => sum + item.price * item.quantity, 0)
  const totalItems = items.reduce((sum, item) => sum + item.quantity, 0)
  
  const addItem = (product) => {
    setItems(prev => {
      const existing = prev.find(item => item.id === product.id)
      if (existing) {
        return prev.map(item => 
          item.id === product.id 
            ? { ...item, quantity: item.quantity + 1 }
            : item
        )
      } else {
        return [...prev, { ...product, quantity: 1 }]
      }
    })
  }
  
  return (
    <div>
      <h2>è´­ç‰©è½¦</h2>
      <p>å•†å“æ•°é‡ï¼š{totalItems}</p>
      <p>æ€»ä»·ï¼šÂ¥{totalPrice.toFixed(2)}</p>
      
      {items.map(item => (
        <div key={item.id}>
          <span>{item.name} Ã— {item.quantity}</span>
          <span>Â¥{(item.price * item.quantity).toFixed(2)}</span>
        </div>
      ))}
    </div>
  )
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ çŠ¶æ€ï¼ˆStateï¼‰ï¼šç»„ä»¶ä¸­å¯ä»¥å˜åŒ–çš„æ•°æ®
ğŸ”¸ Hookï¼šè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰ç‰¹æ®Šèƒ½åŠ›çš„é’©å­
ğŸ”¸ useStateï¼šç®¡ç†çŠ¶æ€çš„Hookï¼Œè¿”å›[çŠ¶æ€å€¼, æ›´æ–°å‡½æ•°]
ğŸ”¸ å¼‚æ­¥æ›´æ–°ï¼šsetStateä¸ä¼šç«‹å³æ”¹å˜çŠ¶æ€å€¼
ğŸ”¸ å‡½æ•°å¼æ›´æ–°ï¼šåŸºäºæœ€æ–°çŠ¶æ€å€¼è¿›è¡Œæ›´æ–°çš„å®‰å…¨æ–¹å¼
ğŸ”¸ æ‰¹é‡æ›´æ–°ï¼šReactä¼šåˆå¹¶åŒä¸€äº‹ä»¶ä¸­çš„å¤šä¸ªçŠ¶æ€æ›´æ–°
```

### 9.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ çŠ¶æ€æ˜¯ç»„ä»¶çš„"è®°å¿†"**
```
æƒ³è±¡ä¸€ä¸‹ï¼š
- æ²¡æœ‰çŠ¶æ€ = å¤±å¿†ç—‡æ‚£è€…ï¼Œä»€ä¹ˆéƒ½è®°ä¸ä½
- æœ‰äº†çŠ¶æ€ = æ­£å¸¸äººï¼Œèƒ½è®°ä½å‘ç”Ÿçš„äº‹æƒ…
```

**ğŸ”¹ useStateçš„å·¥ä½œåŸç†**
```
const [value, setValue] = useState(åˆå§‹å€¼)

1. ç¬¬ä¸€æ¬¡è¿è¡Œï¼šReactåˆ›å»ºçŠ¶æ€ï¼Œè¿”å›åˆå§‹å€¼
2. åç»­è¿è¡Œï¼šReactè¿”å›æœ€æ–°çš„çŠ¶æ€å€¼
3. è°ƒç”¨setValueï¼šReactå®‰æ’é‡æ–°æ¸²æŸ“
4. é‡æ–°æ¸²æŸ“ï¼šç»„ä»¶é‡æ–°è¿è¡Œï¼Œè·å¾—æ–°çŠ¶æ€å€¼
```

**ğŸ”¹ ä¸ºä»€ä¹ˆæ˜¯å¼‚æ­¥æ›´æ–°**
```
å¼‚æ­¥æ›´æ–°çš„å¥½å¤„ï¼š
- æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡å¤„ç†å¤šä¸ªæ›´æ–°
- ç”¨æˆ·ä½“éªŒï¼šé¿å…é¡µé¢å¡é¡¿
- ä¸€è‡´æ€§ï¼šä¿è¯çŠ¶æ€æ›´æ–°çš„é¡ºåº
```

### 9.3 å®é™…å¼€å‘æŒ‡å¯¼


**âœ… æœ€ä½³å®è·µ**
```javascript
// 1. çŠ¶æ€å˜é‡å‘½åè¦æœ‰æ„ä¹‰
const [isLoading, setIsLoading] = useState(false)  // âœ…
const [flag, setFlag] = useState(false)            // âŒ

// 2. å¤æ‚çŠ¶æ€ä½¿ç”¨å‡½æ•°å¼æ›´æ–°
setUser(prev => ({ ...prev, name: 'new name' }))  // âœ…
setUser({ ...user, name: 'new name' })             // âŒ å¯èƒ½æœ‰é—®é¢˜

// 3. æƒ°æ€§åˆå§‹åŒ–å¤æ‚è®¡ç®—
const [data, setData] = useState(() => expensiveCalc())  // âœ…
const [data, setData] = useState(expensiveCalc())        // âŒ æ€§èƒ½é—®é¢˜
```

**âŒ å¸¸è§é”™è¯¯**
```javascript
// 1. ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼ˆReactæ£€æµ‹ä¸åˆ°å˜åŒ–ï¼‰
user.name = 'new name'  // âŒ
setUser({ ...user, name: 'new name' })  // âœ…

// 2. åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨Hook
if (condition) {
  const [state, setState] = useState(0)  // âŒ
}

// 3. æœŸæœ›ç«‹å³è·å¾—æ›´æ–°åçš„å€¼
setCount(count + 1)
console.log(count)  // âŒ è¿˜æ˜¯æ—§å€¼
```

### 9.4 å­¦ä¹ è¿›é˜¶è·¯å¾„


```
å½“å‰æ°´å¹³ï¼šuseStateåŸºç¡€ âœ…
    â†“
ä¸‹ä¸€æ­¥ï¼šuseEffectå‰¯ä½œç”¨
    â†“
è¿›é˜¶ï¼šè‡ªå®šä¹‰Hook
    â†“
é«˜çº§ï¼šçŠ¶æ€ç®¡ç†åº“ï¼ˆRedux/Zustandï¼‰
```

**æ ¸å¿ƒè®°å¿†å£è¯€**ï¼š
- useStateé’©å­ç®¡çŠ¶æ€ï¼Œæ•°ç»„è§£æ„æœ‰é—¨é“
- å¼‚æ­¥æ›´æ–°è¦è®°ç‰¢ï¼Œå‡½æ•°æ›´æ–°æœ€å¯é 
- å¯¹è±¡æ•°ç»„è¦å±•å¼€ï¼Œç›´æ¥ä¿®æ”¹è¦ä¸å¾—