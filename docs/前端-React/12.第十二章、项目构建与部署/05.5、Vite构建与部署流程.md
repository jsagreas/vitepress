---
title: 5ã€Viteæ„å»ºä¸éƒ¨ç½²æµç¨‹
---
## ğŸ“š ç›®å½•

1. [ä»€ä¹ˆæ˜¯Viteæ„å»ºä¸éƒ¨ç½²](#1-ä»€ä¹ˆæ˜¯viteæ„å»ºä¸éƒ¨ç½²)
2. [å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒé…ç½®](#2-å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒé…ç½®)
3. [ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£](#3-ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£)
4. [æ‰“åŒ…ä¼˜åŒ–ç­–ç•¥](#4-æ‰“åŒ…ä¼˜åŒ–ç­–ç•¥)
5. [éƒ¨ç½²å¹³å°æ“ä½œæŒ‡å—](#5-éƒ¨ç½²å¹³å°æ“ä½œæŒ‡å—)
6. [è·¯å¾„baseè®¾ç½®å…³é”®ç‚¹](#6-è·¯å¾„baseè®¾ç½®å…³é”®ç‚¹)
7. [æ„å»ºäº§ç‰©åˆ†ææŠ€å·§](#7-æ„å»ºäº§ç‰©åˆ†ææŠ€å·§)
8. [è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹](#8-è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹)
9. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#9-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ”¨ ä»€ä¹ˆæ˜¯Viteæ„å»ºä¸éƒ¨ç½²


### 1.1 Viteæ„å»ºæœ¬è´¨ç†è§£


**æ„å»ºæ˜¯ä»€ä¹ˆï¼Ÿ**
æƒ³è±¡ä½ åœ¨åšèœï¼š
- **å¼€å‘æ—¶**ï¼šé£Ÿæéšç”¨éšåˆ‡ï¼Œç°ç‚’ç°åƒï¼ˆå¿«é€Ÿå¼€å‘ï¼‰
- **ä¸Šèœæ—¶**ï¼šè¦ç²¾å¿ƒæ‘†ç›˜ï¼Œç¾è§‚å®ç”¨ï¼ˆç”Ÿäº§æ„å»ºï¼‰

```
å¼€å‘ç¯å¢ƒ (npm run dev)     ç”Ÿäº§ç¯å¢ƒ (npm run build)
     |                           |
 å®æ—¶ç¼–è¯‘çƒ­æ›´æ–°             â†’    ä¼˜åŒ–å‹ç¼©æ‰“åŒ…
 æ–¹ä¾¿è°ƒè¯•å¼€å‘              â†’    ä½“ç§¯å°åŠ è½½å¿«
 é€Ÿåº¦ä¼˜å…ˆ                 â†’    æ€§èƒ½ä¼˜å…ˆ
```

**Viteçš„ä½œç”¨**ï¼š
- ğŸ”§ **å¼€å‘é˜¶æ®µ**ï¼šå¿«é€Ÿå¯åŠ¨ï¼Œå®æ—¶æ›´æ–°ï¼Œè°ƒè¯•å‹å¥½
- ğŸ“¦ **æ„å»ºé˜¶æ®µ**ï¼šä»£ç å‹ç¼©ï¼Œèµ„æºä¼˜åŒ–ï¼Œç”Ÿäº§å°±ç»ª

### 1.2 ä¸ºä»€ä¹ˆè¦åŒºåˆ†å¼€å‘å’Œç”Ÿäº§


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¼€å‘ç¯å¢ƒ       â”‚    â”‚   ç”Ÿäº§ç¯å¢ƒ       â”‚
â”‚                â”‚    â”‚                â”‚
â”‚ â€¢ ä»£ç æœªå‹ç¼©     â”‚    â”‚ â€¢ ä»£ç å·²å‹ç¼©     â”‚
â”‚ â€¢ æœ‰è°ƒè¯•ä¿¡æ¯     â”‚    â”‚ â€¢ ç§»é™¤è°ƒè¯•ä¿¡æ¯   â”‚
â”‚ â€¢ åŒ…å«çƒ­æ›´æ–°     â”‚    â”‚ â€¢ é™æ€æ–‡ä»¶       â”‚
â”‚ â€¢ å¯åŠ¨é€Ÿåº¦å¿«     â”‚    â”‚ â€¢ åŠ è½½é€Ÿåº¦å¿«     â”‚
â”‚ â€¢ æ–¹ä¾¿è°ƒè¯•       â”‚    â”‚ â€¢ ä½“ç§¯å°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. âš™ï¸ å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒé…ç½®


### 2.1 åŸºç¡€é…ç½®æ–‡ä»¶ç»“æ„


```
project/
â”œâ”€â”€ vite.config.js        â† ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ .env                  â† é€šç”¨ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.development      â† å¼€å‘ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.production       â† ç”Ÿäº§ç¯å¢ƒå˜é‡
â””â”€â”€ package.json          â† å‘½ä»¤è„šæœ¬
```

### 2.2 åŸºç¡€é…ç½®ç¤ºä¾‹


**vite.config.js å®Œæ•´é…ç½®**ï¼š
```javascript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  
  // å¼€å‘æœåŠ¡å™¨é…ç½®
  server: {
    port: 3000,
    open: true,  // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    host: true   // å…è®¸å¤–éƒ¨è®¿é—®
  },
  
  // æ„å»ºé…ç½®
  build: {
    outDir: 'dist',           // è¾“å‡ºç›®å½•
    sourcemap: false,         // ç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæˆsourcemap
    minify: 'terser',         // å‹ç¼©æ–¹å¼
    rollupOptions: {
      output: {
        // åˆ†åŒ…ç­–ç•¥
        manualChunks: {
          vendor: ['react', 'react-dom'],
          utils: ['lodash', 'axios']
        }
      }
    }
  }
})
```

**package.json å‘½ä»¤é…ç½®**ï¼š
```json
{
  "scripts": {
    "dev": "vite",                    // å¼€å‘ç¯å¢ƒå¯åŠ¨
    "build": "vite build",            // ç”Ÿäº§ç¯å¢ƒæ„å»º
    "preview": "vite preview",        // é¢„è§ˆæ„å»ºç»“æœ
    "build:dev": "vite build --mode development"  // å¼€å‘æ¨¡å¼æ„å»º
  }
}
```

### 2.3 ç¯å¢ƒåŒºåˆ†é…ç½®


```javascript
// vite.config.js - æ ¹æ®ç¯å¢ƒè°ƒæ•´é…ç½®
export default defineConfig(({ mode }) => {
  const isProduction = mode === 'production'
  
  return {
    plugins: [react()],
    
    // å¼€å‘ç¯å¢ƒé…ç½®
    server: isProduction ? {} : {
      port: 3000,
      open: true
    },
    
    // æ„å»ºé…ç½®
    build: {
      sourcemap: !isProduction,      // å¼€å‘æœ‰sourcemapï¼Œç”Ÿäº§æ²¡æœ‰
      minify: isProduction,          // åªåœ¨ç”Ÿäº§ç¯å¢ƒå‹ç¼©
      rollupOptions: isProduction ? {
        output: {
          manualChunks: {
            vendor: ['react', 'react-dom']
          }
        }
      } : {}
    }
  }
})
```

---

## 3. ğŸŒ ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£


### 3.1 ç¯å¢ƒå˜é‡çš„ä½œç”¨


**ä¸ºä»€ä¹ˆéœ€è¦ç¯å¢ƒå˜é‡ï¼Ÿ**
ä¸åŒç¯å¢ƒéœ€è¦ä¸åŒçš„é…ç½®ï¼š
- **å¼€å‘ç¯å¢ƒ**ï¼šæœ¬åœ°APIåœ°å€ã€è°ƒè¯•å¼€å…³
- **æµ‹è¯•ç¯å¢ƒ**ï¼šæµ‹è¯•æœåŠ¡å™¨åœ°å€ã€æµ‹è¯•æ•°æ®
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šæ­£å¼APIåœ°å€ã€æ€§èƒ½ä¼˜åŒ–

### 3.2 ç¯å¢ƒå˜é‡æ–‡ä»¶é…ç½®


**.envï¼ˆæ‰€æœ‰ç¯å¢ƒå…±ç”¨ï¼‰**ï¼š
```bash
# åº”ç”¨åŸºæœ¬ä¿¡æ¯
VITE_APP_TITLE=æˆ‘çš„Reactåº”ç”¨
VITE_APP_VERSION=1.0.0

# æ³¨æ„ï¼šåªæœ‰ä»¥ VITE_ å¼€å¤´çš„å˜é‡æ‰èƒ½åœ¨å®¢æˆ·ç«¯è®¿é—®
```

**.env.developmentï¼ˆå¼€å‘ç¯å¢ƒï¼‰**ï¼š
```bash
# å¼€å‘ç¯å¢ƒAPIåœ°å€
VITE_API_BASE_URL=http://localhost:8080/api
VITE_API_TIMEOUT=10000

# å¼€å‘è°ƒè¯•å¼€å…³
VITE_ENABLE_DEBUG=true
VITE_ENABLE_MOCK=true
```

**.env.productionï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰**ï¼š
```bash
# ç”Ÿäº§ç¯å¢ƒAPIåœ°å€
VITE_API_BASE_URL=https://api.myapp.com
VITE_API_TIMEOUT=5000

# ç”Ÿäº§ç¯å¢ƒé…ç½®
VITE_ENABLE_DEBUG=false
VITE_ENABLE_MOCK=false
```

### 3.3 ä»£ç ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡


```javascript
// utils/config.js - ç»Ÿä¸€ç®¡ç†é…ç½®
export const config = {
  // åº”ç”¨ä¿¡æ¯
  appTitle: import.meta.env.VITE_APP_TITLE,
  appVersion: import.meta.env.VITE_APP_VERSION,
  
  // APIé…ç½®
  apiBaseUrl: import.meta.env.VITE_API_BASE_URL,
  apiTimeout: import.meta.env.VITE_API_TIMEOUT,
  
  // åŠŸèƒ½å¼€å…³
  enableDebug: import.meta.env.VITE_ENABLE_DEBUG === 'true',
  enableMock: import.meta.env.VITE_ENABLE_MOCK === 'true',
  
  // å½“å‰ç¯å¢ƒ
  isDev: import.meta.env.DEV,
  isProd: import.meta.env.PROD
}

// ä½¿ç”¨ç¤ºä¾‹
console.log('å½“å‰APIåœ°å€:', config.apiBaseUrl)
if (config.enableDebug) {
  console.log('è°ƒè¯•æ¨¡å¼å·²å¼€å¯')
}
```

### 3.4 ç¯å¢ƒå˜é‡æœ€ä½³å®è·µ


```javascript
// åˆ›å»ºç¯å¢ƒé…ç½®é’©å­
function useEnvConfig() {
  return {
    apiUrl: import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000',
    debug: import.meta.env.VITE_ENABLE_DEBUG === 'true',
    version: import.meta.env.VITE_APP_VERSION || '1.0.0'
  }
}

// ç»„ä»¶ä¸­ä½¿ç”¨
function App() {
  const { apiUrl, debug } = useEnvConfig()
  
  if (debug) {
    console.log('API URL:', apiUrl)
  }
  
  return <div>åº”ç”¨å†…å®¹</div>
}
```

> âš ï¸ **å®‰å…¨æé†’**ï¼šåªæœ‰ä»¥ `VITE_` å¼€å¤´çš„å˜é‡æ‰ä¼šæš´éœ²ç»™å®¢æˆ·ç«¯ï¼Œæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†é’¥ï¼‰ä¸è¦ç”¨è¿™ç§æ–¹å¼ï¼

---

## 4. ğŸ“¦ æ‰“åŒ…ä¼˜åŒ–ç­–ç•¥


### 4.1 æ„å»ºä¼˜åŒ–é…ç½®


```javascript
// vite.config.js - ä¼˜åŒ–é…ç½®
export default defineConfig({
  build: {
    // è¾“å‡ºç›®å½•
    outDir: 'dist',
    
    // èµ„æºç›®å½•
    assetsDir: 'assets',
    
    // å°äºæ­¤å¤§å°çš„èµ„æºå°†å†…è”ä¸ºbase64
    assetsInlineLimit: 4096,
    
    // å‹ç¼©é…ç½®
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,  // ç§»é™¤console
        drop_debugger: true  // ç§»é™¤debugger
      }
    },
    
    // Rollupé…ç½®
    rollupOptions: {
      output: {
        // åˆ†åŒ…ç­–ç•¥
        manualChunks: (id) => {
          // ç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…
          if (id.includes('node_modules')) {
            if (id.includes('react')) return 'react'
            if (id.includes('lodash')) return 'lodash'
            return 'vendor'
          }
        }
      }
    }
  }
})
```

### 4.2 ä»£ç åˆ†å‰²ç¤ºä¾‹


```javascript
// è·¯ç”±æ‡’åŠ è½½ - æŒ‰é¡µé¢åˆ†åŒ…
import { lazy, Suspense } from 'react'

const Home = lazy(() => import('./pages/Home'))
const About = lazy(() => import('./pages/About'))
const Contact = lazy(() => import('./pages/Contact'))

function App() {
  return (
    <Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
        <Route path="/contact" element={<Contact />} />
      </Routes>
    </Suspense>
  )
}
```

### 4.3 èµ„æºä¼˜åŒ–æŠ€å·§


```javascript
// å›¾ç‰‡ä¼˜åŒ–å¤„ç†
function ImageOptimized({ src, alt }) {
  return (
    <img 
      src={src} 
      alt={alt}
      loading="lazy"        // æ‡’åŠ è½½
      decoding="async"      // å¼‚æ­¥è§£ç 
      style={{ 
        maxWidth: '100%',
        height: 'auto'
      }}
    />
  )
}

// CSSä¼˜åŒ– - ä½¿ç”¨CSSæ¨¡å—
import styles from './Button.module.css'

function Button({ children }) {
  return (
    <button className={styles.button}>
      {children}
    </button>
  )
}
```

---

## 5. ğŸš€ éƒ¨ç½²å¹³å°æ“ä½œæŒ‡å—


### 5.1 Netlifyéƒ¨ç½²è¯¦è§£


**æ­¥éª¤1ï¼šå‡†å¤‡æ„å»º**
```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

**æ­¥éª¤2ï¼šNetlifyé…ç½®æ–‡ä»¶**
```toml
# netlify.toml
[build]
  publish = "dist"           # å‘å¸ƒç›®å½•
  command = "npm run build"  # æ„å»ºå‘½ä»¤

[build.environment]
  NODE_VERSION = "18"        # Nodeç‰ˆæœ¬

# è·¯ç”±é‡å®šå‘ï¼ˆSPAæ”¯æŒï¼‰
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

**æ­¥éª¤3ï¼šç¯å¢ƒå˜é‡è®¾ç½®**
```
Netlifyæ§åˆ¶å° â†’ Site settings â†’ Environment variables

æ·»åŠ å˜é‡ï¼š
VITE_API_BASE_URL = https://api.yoursite.com
VITE_APP_VERSION = 1.0.0
```

### 5.2 GitHub Pageséƒ¨ç½²


**æ–¹æ³•1ï¼šæ‰‹åŠ¨éƒ¨ç½²**
```bash
# æ„å»ºé¡¹ç›®
npm run build

# ä½¿ç”¨gh-pageså·¥å…·éƒ¨ç½²
npm install -g gh-pages
gh-pages -d dist
```

**æ–¹æ³•2ï¼šGitHub Actionsè‡ªåŠ¨éƒ¨ç½²**
```yaml
# .github/workflows/deploy.yml
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build
      run: npm run build
      
    - name: Deploy
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
```

### 5.3 Verceléƒ¨ç½²ï¼ˆæ¨èï¼‰


**ä¸€é”®éƒ¨ç½²æµç¨‹**ï¼š
1. è¿æ¥GitHubä»“åº“
2. Vercelè‡ªåŠ¨æ£€æµ‹Reacté¡¹ç›®
3. è‡ªåŠ¨é…ç½®æ„å»ºå‘½ä»¤ï¼š`npm run build`
4. è‡ªåŠ¨é…ç½®è¾“å‡ºç›®å½•ï¼š`dist`
5. æ¯æ¬¡pushè‡ªåŠ¨é‡æ–°éƒ¨ç½²

**vercel.jsoné…ç½®**ï¼š
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

---

## 6. ğŸ›£ï¸ è·¯å¾„baseè®¾ç½®å…³é”®ç‚¹


### 6.1 baseè·¯å¾„çš„ä½œç”¨


**ä»€ä¹ˆæ˜¯baseï¼Ÿ**
å†³å®šä½ çš„åº”ç”¨éƒ¨ç½²åœ¨ä»€ä¹ˆè·¯å¾„ä¸‹ï¼š
- `base: '/'` â†’ éƒ¨ç½²åœ¨æ ¹ç›®å½•ï¼š`https://mysite.com/`
- `base: '/myapp/'` â†’ éƒ¨ç½²åœ¨å­ç›®å½•ï¼š`https://mysite.com/myapp/`

### 6.2 ä¸åŒéƒ¨ç½²åœºæ™¯çš„baseé…ç½®


```javascript
// vite.config.js - æ ¹æ®éƒ¨ç½²ç¯å¢ƒè®¾ç½®base
export default defineConfig({
  // GitHub Pages (ç”¨æˆ·å.github.io/ä»“åº“å)
  base: process.env.NODE_ENV === 'production' ? '/my-react-app/' : '/',
  
  // æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡
  base: process.env.VITE_BASE_PATH || '/',
  
  // å…¶ä»–é…ç½®...
})
```

**ä¸åŒå¹³å°çš„baseè®¾ç½®**ï¼š
```javascript
// æ ¹æ®éƒ¨ç½²å¹³å°åŠ¨æ€è®¾ç½®
const getBase = () => {
  if (process.env.VERCEL) return '/'           // Vercel
  if (process.env.NETLIFY) return '/'          // Netlify  
  if (process.env.GITHUB_PAGES) return '/repo-name/'  // GitHub Pages
  return '/'  // é»˜è®¤
}

export default defineConfig({
  base: getBase(),
  // ...
})
```

### 6.3 è·¯å¾„å¤„ç†æœ€ä½³å®è·µ


```javascript
// utils/path.js - è·¯å¾„å·¥å…·å‡½æ•°
export function getAssetPath(path) {
  const base = import.meta.env.BASE_URL
  return `${base}${path}`.replace(/\/+/g, '/')
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function Header() {
  return (
    <header>
      <img 
        src={getAssetPath('images/logo.png')} 
        alt="Logo" 
      />
    </header>
  )
}

// è·¯ç”±é…ç½®
import { createBrowserRouter } from 'react-router-dom'

const router = createBrowserRouter([
  {
    path: "/",
    element: <Home />,
  },
  {
    path: "/about",
    element: <About />,
  }
], {
  basename: import.meta.env.BASE_URL  // ä½¿ç”¨é…ç½®çš„baseè·¯å¾„
})
```

---

## 7. ğŸ“Š æ„å»ºäº§ç‰©åˆ†ææŠ€å·§


### 7.1 æ„å»ºäº§ç‰©ç»“æ„


```
dist/
â”œâ”€â”€ index.html              â† å…¥å£é¡µé¢
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-abc123.js     â† ä¸»è¦JSæ–‡ä»¶ï¼ˆå¸¦hashï¼‰
â”‚   â”œâ”€â”€ vendor-def456.js    â† ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ index-ghi789.css    â† CSSæ–‡ä»¶
â”‚   â””â”€â”€ logo-jkl012.png     â† å›¾ç‰‡èµ„æº
â””â”€â”€ favicon.ico             â† å›¾æ ‡æ–‡ä»¶
```

### 7.2 åˆ†ææ„å»ºç»“æœ


**ä½¿ç”¨Viteå†…ç½®åˆ†æ**ï¼š
```bash
# æ„å»ºæ—¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
npm run build -- --mode production --minify false

# åˆ†æåŒ…å¤§å°
npx vite-bundle-analyzer dist
```

**package.json æ·»åŠ åˆ†æå‘½ä»¤**ï¼š
```json
{
  "scripts": {
    "build": "vite build",
    "build:analyze": "vite build && npx vite-bundle-analyzer dist",
    "build:report": "vite build --reporter verbose"
  }
}
```

### 7.3 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•


```
âœ… æ£€æŸ¥é¡¹ç›®                   ç›®æ ‡å¤§å°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸»JSæ–‡ä»¶                â”‚ < 200KB      â”‚
â”‚ ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶            â”‚ < 500KB      â”‚  
â”‚ CSSæ–‡ä»¶                 â”‚ < 100KB      â”‚
â”‚ å›¾ç‰‡èµ„æº                â”‚ < 1MB        â”‚
â”‚ æ€»ä½“ç§¯                  â”‚ < 2MB        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŒ–å»ºè®®ï¼š
ğŸ”§ ä»£ç åˆ†å‰²ï¼šæŒ‰è·¯ç”±æ‹†åˆ†
ğŸ”§ Tree Shakingï¼šç§»é™¤æœªä½¿ç”¨ä»£ç   
ğŸ”§ å›¾ç‰‡ä¼˜åŒ–ï¼šå‹ç¼©ã€WebPæ ¼å¼
ğŸ”§ CDNä½¿ç”¨ï¼šç¬¬ä¸‰æ–¹åº“å¤–é“¾
```

---

## 8. ğŸ¤– è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹


### 8.1 å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹è®¾è®¡


```
ä»£ç æäº¤ â†’ è‡ªåŠ¨æ„å»º â†’ æµ‹è¯•æ£€æŸ¥ â†’ è‡ªåŠ¨éƒ¨ç½² â†’ éƒ¨ç½²é€šçŸ¥
    |         |         |         |         |
   Git     CI/CD     è´¨é‡æ£€æŸ¥   å‘å¸ƒä¸Šçº¿   é’‰é’‰/é‚®ä»¶
  Push    Actions     æµ‹è¯•      Vercel    é€šçŸ¥ç»“æœ
```

### 8.2 GitHub Actionså®Œæ•´é…ç½®


```yaml
# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  # è´¨é‡æ£€æŸ¥ä»»åŠ¡
  quality-check:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Run linting
      run: npm run lint
      
    - name: Run tests
      run: npm run test
      
    - name: Build project
      run: npm run build
      
  # éƒ¨ç½²ä»»åŠ¡ï¼ˆä»…mainåˆ†æ”¯ï¼‰
  deploy:
    needs: quality-check
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build for production
      run: npm run build
      env:
        VITE_API_BASE_URL: ${{ secrets.VITE_API_BASE_URL }}
        
    - name: Deploy to Netlify
      uses: nwtgck/actions-netlify@v2.0
      with:
        publish-dir: './dist'
        production-branch: main
      env:
        NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
        NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
```

### 8.3 éƒ¨ç½²çŠ¶æ€ç›‘æ§


```javascript
// éƒ¨ç½²åå¥åº·æ£€æŸ¥
const healthCheck = async () => {
  try {
    const response = await fetch('/api/health')
    const data = await response.json()
    
    if (data.status === 'ok') {
      console.log('âœ… éƒ¨ç½²æˆåŠŸï¼Œåº”ç”¨è¿è¡Œæ­£å¸¸')
    } else {
      console.error('âŒ åº”ç”¨çŠ¶æ€å¼‚å¸¸')
    }
  } catch (error) {
    console.error('âŒ å¥åº·æ£€æŸ¥å¤±è´¥:', error)
  }
}
```

---

## 9. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 9.1 å¿…æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ğŸ”¸ ç¯å¢ƒåŒºåˆ†ï¼šå¼€å‘ç¯å¢ƒå¿«é€Ÿè°ƒè¯•ï¼Œç”Ÿäº§ç¯å¢ƒä¼˜åŒ–æ€§èƒ½
ğŸ”¸ ç¯å¢ƒå˜é‡ï¼šVITE_å‰ç¼€å˜é‡ï¼Œä¸åŒç¯å¢ƒä¸åŒé…ç½®
ğŸ”¸ æ„å»ºä¼˜åŒ–ï¼šä»£ç åˆ†å‰²ã€èµ„æºå‹ç¼©ã€æ‡’åŠ è½½
ğŸ”¸ éƒ¨ç½²é…ç½®ï¼šbaseè·¯å¾„è®¾ç½®ã€å¹³å°ç‰¹å®šé…ç½®
ğŸ”¸ è‡ªåŠ¨åŒ–ï¼šCI/CDæµç¨‹ï¼Œæäº¤å³éƒ¨ç½²
```

### 9.2 å®ç”¨é…ç½®æ¨¡æ¿


**å¿«é€Ÿé…ç½®æ¸…å•**ï¼š
```javascript
// 1. vite.config.js åŸºç¡€é…ç½®
export default defineConfig({
  base: '/my-app/',
  build: {
    outDir: 'dist',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom']
        }
      }
    }
  }
})

// 2. .env.production ç”Ÿäº§ç¯å¢ƒ
VITE_API_BASE_URL=https://api.myapp.com
VITE_ENABLE_DEBUG=false

// 3. package.json éƒ¨ç½²å‘½ä»¤
{
  "scripts": {
    "build": "vite build",
    "preview": "vite preview",
    "deploy": "npm run build && netlify deploy --prod"
  }
}
```

### 9.3 å¸¸è§é—®é¢˜è§£å†³


| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| **é¡µé¢404** | `è·¯å¾„baseè®¾ç½®é”™è¯¯` | `æ£€æŸ¥vite.config.jsä¸­çš„baseé…ç½®` |
| **èµ„æºåŠ è½½å¤±è´¥** | `é™æ€èµ„æºè·¯å¾„é”™è¯¯` | `ä½¿ç”¨import.meta.env.BASE_URL` |
| **ç¯å¢ƒå˜é‡undefined** | `å˜é‡åæ²¡æœ‰VITE_å‰ç¼€` | `ç¡®ä¿å˜é‡ä»¥VITE_å¼€å¤´` |
| **æ„å»ºä½“ç§¯è¿‡å¤§** | `æ²¡æœ‰ä»£ç åˆ†å‰²` | `é…ç½®manualChunksåˆ†åŒ…ç­–ç•¥` |

### 9.4 éƒ¨ç½²å¹³å°é€‰æ‹©æŒ‡å—


```
é¡¹ç›®ç‰¹ç‚¹                æ¨èå¹³å°           ä¼˜åŠ¿
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸ªäººé¡¹ç›®         â”‚ Vercel       â”‚ å…è´¹ã€è‡ªåŠ¨éƒ¨ç½²ã€å¿«é€Ÿ â”‚
â”‚ å¼€æºé¡¹ç›®         â”‚ GitHub Pages â”‚ å…è´¹ã€ä¸ä»“åº“é›†æˆ     â”‚
â”‚ å•†ä¸šé¡¹ç›®         â”‚ Netlify      â”‚ åŠŸèƒ½ä¸°å¯Œã€CDNåŠ é€Ÿ    â”‚
â”‚ ä¼ä¸šé¡¹ç›®         â”‚ è‡ªå»ºCI/CD    â”‚ å¯æ§æ€§å¼ºã€å®‰å…¨æ€§é«˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.5 è®°å¿†è¦ç‚¹


**æ„å»ºéƒ¨ç½²æµç¨‹è®°å¿†**ï¼š
```
æœ¬åœ°å¼€å‘ â†’ ç¯å¢ƒé…ç½® â†’ æ„å»ºä¼˜åŒ– â†’ å¹³å°éƒ¨ç½² â†’ è‡ªåŠ¨åŒ–
   â†“          â†“          â†“          â†“         â†“
npm dev â†’ .envé…ç½® â†’ vite build â†’ ä¸Šä¼ éƒ¨ç½² â†’ CI/CD
```

**å…³é”®é…ç½®è®°å¿†**ï¼š
- âœ… **ç¯å¢ƒå˜é‡**ï¼š`VITE_`å‰ç¼€æ‰èƒ½ç”¨
- âœ… **baseè·¯å¾„**ï¼šæ ¹æ®éƒ¨ç½²ä½ç½®è®¾ç½®
- âœ… **ä»£ç åˆ†å‰²**ï¼šç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…
- âœ… **è‡ªåŠ¨éƒ¨ç½²**ï¼šGitHub Actions + éƒ¨ç½²å¹³å°

> ğŸ’¡ **å­¦ä¹ æç¤º**ï¼šå…ˆæŒæ¡åŸºç¡€çš„æ„å»ºéƒ¨ç½²ï¼Œå†é€æ­¥æ·»åŠ ä¼˜åŒ–å’Œè‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚å®é™…é¡¹ç›®ä¸­è¾¹ç”¨è¾¹å­¦ï¼Œæ•ˆæœæœ€å¥½ï¼