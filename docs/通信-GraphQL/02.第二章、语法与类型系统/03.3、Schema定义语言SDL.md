---
title: 3ã€Schemaå®šä¹‰è¯­è¨€SDL
---
## ðŸ“š ç›®å½•

1. [Schemaç»“æž„ä¸Žä½œç”¨](#1-schemaç»“æž„ä¸Žä½œç”¨)
2. [SDLè¯­è¨€ä»‹ç»](#2-sdlè¯­è¨€ä»‹ç»)
3. [ç±»åž‹å®šä¹‰è¯­æ³•](#3-ç±»åž‹å®šä¹‰è¯­æ³•)
4. [å®šä¹‰å¯¹è±¡ç±»åž‹ä¸Žå­—æ®µ](#4-å®šä¹‰å¯¹è±¡ç±»åž‹ä¸Žå­—æ®µ)
5. [Rootç±»åž‹è¯¦è§£](#5-rootç±»åž‹è¯¦è§£)
6. [å­—æ®µä¸Žå‚æ•°å®šä¹‰](#6-å­—æ®µä¸Žå‚æ•°å®šä¹‰)
7. [ç±»åž‹å…³ç³»è®¾è®¡](#7-ç±»åž‹å…³ç³»è®¾è®¡)
8. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#8-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ðŸ—ï¸ Schemaç»“æž„ä¸Žä½œç”¨


### 1.1 ä»€ä¹ˆæ˜¯Schemaï¼Ÿ


**é€šä¿—ç†è§£**ï¼šSchemaå°±åƒæ˜¯APIçš„**è¯´æ˜Žä¹¦**å’Œ**åˆåŒ**ï¼Œå®ƒå‘Šè¯‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒæ–¹ï¼š"ä½ å¯ä»¥æŸ¥è¯¢ä»€ä¹ˆæ•°æ®ï¼Œæ•°æ®é•¿ä»€ä¹ˆæ ·ï¼Œæ€Žä¹ˆæŸ¥è¯¢"ã€‚

```
æƒ³è±¡ä¸€ä¸‹é¤åŽ…çš„èœå•ï¼š
ðŸ“‹ èœå• = Schema
ðŸ• å…·ä½“èœå“ = æ•°æ®ç±»åž‹
ðŸ’° ä»·æ ¼ã€æè¿° = å­—æ®µä¿¡æ¯
ðŸ½ï¸ ç‚¹èœæ–¹å¼ = æŸ¥è¯¢æ–¹æ³•
```

### 1.2 Schemaçš„æ ¸å¿ƒä½œç”¨


**ðŸŽ¯ Schemaçš„ä¸‰å¤§ä½œç”¨**ï¼š
1. **ðŸ“– æ–‡æ¡£ä½œç”¨**ï¼šå‘Šè¯‰å¼€å‘è€…æœ‰ä»€ä¹ˆæ•°æ®å¯ä»¥æŸ¥
2. **âœ… éªŒè¯ä½œç”¨**ï¼šæ£€æŸ¥æŸ¥è¯¢æ˜¯å¦åˆæ³•
3. **ðŸ¤ å¥‘çº¦ä½œç”¨**ï¼šå‰åŽç«¯å¼€å‘çš„ç»Ÿä¸€æ ‡å‡†

```
å®¢æˆ·ç«¯                    Schema                    æœåŠ¡ç«¯
   |                        |                        |
   |--æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯----------->|                        |
   |                        |--éªŒè¯æŸ¥è¯¢æ˜¯å¦åˆæ³•------->|
   |                        |<--è¿”å›žæŸ¥è¯¢ç»“æžœ----------|
   |<--è¿”å›žæ ‡å‡†åŒ–æ•°æ®--------|                        |
```

### 1.3 Schemaçš„æ•´ä½“ç»“æž„


```
GraphQL Schema æ•´ä½“ç»“æž„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Schema            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Query (å¿…é¡»)           â”‚ â† æŸ¥è¯¢æ“ä½œçš„å…¥å£
â”‚  Mutation (å¯é€‰)        â”‚ â† ä¿®æ”¹æ“ä½œçš„å…¥å£  
â”‚  Subscription (å¯é€‰)    â”‚ â† è®¢é˜…æ“ä½œçš„å…¥å£
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è‡ªå®šä¹‰ç±»åž‹             â”‚ â† Userã€Postã€Commentç­‰
â”‚  åŸºç¡€ç±»åž‹               â”‚ â† Stringã€Intã€Booleanç­‰
â”‚  æžšä¸¾ç±»åž‹               â”‚ â† Statusã€Roleç­‰
â”‚  æŽ¥å£ç±»åž‹               â”‚ â† NodeæŽ¥å£ç­‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ðŸ“ SDLè¯­è¨€ä»‹ç»


### 2.1 ä»€ä¹ˆæ˜¯SDLï¼Ÿ


**SDLå…¨ç§°**ï¼š`Schema Definition Language`ï¼ˆæ¨¡å¼å®šä¹‰è¯­è¨€ï¼‰

**é€šä¿—è§£é‡Š**ï¼šSDLå°±æ˜¯ç”¨æ¥å†™Schemaçš„**ä¸“é—¨è¯­æ³•**ï¼Œå°±åƒç”¨ä¸­æ–‡å†™æ–‡ç« ã€ç”¨è‹±æ–‡å†™é‚®ä»¶ä¸€æ ·ï¼Œç”¨SDLæ¥æè¿°APIçš„ç»“æž„ã€‚

```
ç±»æ¯”ç†è§£ï¼š
ðŸ“ ä¸­æ–‡ â†’ å†™æ–‡ç« 
ðŸ“§ è‹±æ–‡ â†’ å†™é‚®ä»¶  
ðŸ”§ SDL â†’ å†™APIç»“æž„
```

### 2.2 SDLçš„è¯­æ³•ç‰¹ç‚¹


**ðŸ”¸ ç®€æ´ç›´è§‚**ï¼šè¯­æ³•ç®€å•ï¼Œä¸€çœ‹å°±æ‡‚
```graphql
# å®šä¹‰ä¸€ä¸ªç”¨æˆ·ç±»åž‹ - å°±è¿™ä¹ˆç®€å•ï¼
type User {
  name: String
  age: Int
}
```

**ðŸ”¸ å¼ºç±»åž‹**ï¼šæ¯ä¸ªå­—æ®µéƒ½å¿…é¡»æ˜Žç¡®ç±»åž‹
```graphql
type User {
  name: String      # å­—ç¬¦ä¸²ç±»åž‹
  age: Int          # æ•´æ•°ç±»åž‹
  isActive: Boolean # å¸ƒå°”ç±»åž‹
}
```

**ðŸ”¸ è‡ªæ–‡æ¡£åŒ–**ï¼šå¯ä»¥æ·»åŠ æè¿°ä¿¡æ¯
```graphql
"""
ç”¨æˆ·ä¿¡æ¯ç±»åž‹
åŒ…å«ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
"""
type User {
  "ç”¨æˆ·å§“å"
  name: String
  
  "ç”¨æˆ·å¹´é¾„"
  age: Int
}
```

### 2.3 SDLä¸Žå…¶ä»–æ–¹å¼çš„å¯¹æ¯”


| æ–¹å¼ | **ä¼˜ç‚¹** | **ç¼ºç‚¹** | **ä½¿ç”¨åœºæ™¯** |
|------|---------|---------|-------------|
| **SDL** | `ç›´è§‚æ˜“è¯»ï¼Œæ ‡å‡†åŒ–` | `éœ€è¦å­¦ä¹ æ–°è¯­æ³•` | `å¤§å¤šæ•°é¡¹ç›®çš„é¦–é€‰` |
| **ä»£ç ç”Ÿæˆ** | `ä¸Žç¼–ç¨‹è¯­è¨€ç»“åˆç´§å¯†` | `ä¸å¤Ÿç›´è§‚ï¼Œéš¾ç»´æŠ¤` | `å¼ºç±»åž‹è¯­è¨€é¡¹ç›®` |
| **JSON Schema** | `åŸºäºŽJSONï¼Œæ˜“ç†è§£` | `å†—é•¿ï¼Œä¸å¤Ÿç®€æ´` | `å·²æœ‰JSON Schemaçš„é¡¹ç›®` |

---

## 3. ðŸŽ¯ ç±»åž‹å®šä¹‰è¯­æ³•


### 3.1 åŸºç¡€ç±»åž‹è¯­æ³•


**GraphQLå†…ç½®çš„åŸºç¡€ç±»åž‹**ï¼š

```graphql
# åŸºç¡€ç±»åž‹å±•ç¤º
type Example {
  # å­—ç¬¦ä¸²ç±»åž‹
  name: String
  
  # æ•´æ•°ç±»åž‹  
  age: Int
  
  # æµ®ç‚¹æ•°ç±»åž‹
  price: Float
  
  # å¸ƒå°”ç±»åž‹
  isActive: Boolean
  
  # IDç±»åž‹ï¼ˆç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼‰
  id: ID
}
```

### 3.2 å¿…éœ€å­—æ®µ vs å¯é€‰å­—æ®µ


**ðŸ”¸ æ„Ÿå¹å·(!)çš„ä½œç”¨**ï¼šè¡¨ç¤ºå­—æ®µ**å¿…é¡»æœ‰å€¼**ï¼Œä¸èƒ½ä¸ºç©º

```graphql
type User {
  # å¿…éœ€å­—æ®µ - å¿…é¡»æœ‰å€¼
  id: ID!           # IDå¿…é¡»å­˜åœ¨
  name: String!     # å§“åå¿…é¡»å­˜åœ¨
  
  # å¯é€‰å­—æ®µ - å¯ä»¥ä¸ºç©º
  email: String     # é‚®ç®±å¯ä»¥ä¸ºç©º
  phone: String     # ç”µè¯å¯ä»¥ä¸ºç©º
}
```

**å®žé™…æ•ˆæžœå¯¹æ¯”**ï¼š
```json
// âœ… åˆæ³•æ•°æ®
{
  "id": "123",
  "name": "å¼ ä¸‰",
  "email": null,     // å¯é€‰å­—æ®µå¯ä»¥ä¸ºnull
  "phone": null
}

// âŒ éžæ³•æ•°æ®
{
  "id": null,        // é”™è¯¯ï¼å¿…éœ€å­—æ®µä¸èƒ½ä¸ºnull
  "name": "å¼ ä¸‰"
}
```

### 3.3 æ•°ç»„ç±»åž‹è¯­æ³•


**ðŸ”¸ æ–¹æ‹¬å·[]çš„ç”¨æ³•**ï¼š

```graphql
type User {
  # å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯ä»¥ä¸ºç©º
  hobbies: [String]
  
  # å­—ç¬¦ä¸²æ•°ç»„ï¼Œä¸èƒ½ä¸ºç©ºï¼Œä½†æ•°ç»„å†…å…ƒç´ å¯ä»¥ä¸ºç©º
  tags: [String]!
  
  # å­—ç¬¦ä¸²æ•°ç»„ï¼Œä¸èƒ½ä¸ºç©ºï¼Œæ•°ç»„å†…å…ƒç´ ä¹Ÿä¸èƒ½ä¸ºç©º
  skills: [String!]!
}
```

**æ•°ç»„ç±»åž‹çš„è¯¦ç»†è§£é‡Š**ï¼š
```
[String]    â†’ æ•°ç»„æœ¬èº«å¯ä»¥ä¸ºnullï¼Œå…ƒç´ å¯ä»¥ä¸ºnull
[String]!   â†’ æ•°ç»„æœ¬èº«ä¸èƒ½ä¸ºnullï¼Œä½†å…ƒç´ å¯ä»¥ä¸ºnull  
[String!]   â†’ æ•°ç»„æœ¬èº«å¯ä»¥ä¸ºnullï¼Œä½†å…ƒç´ ä¸èƒ½ä¸ºnull
[String!]!  â†’ æ•°ç»„æœ¬èº«ä¸èƒ½ä¸ºnullï¼Œå…ƒç´ ä¹Ÿä¸èƒ½ä¸ºnull
```

---

## 4. ðŸ§© å®šä¹‰å¯¹è±¡ç±»åž‹ä¸Žå­—æ®µ


### 4.1 ç®€å•å¯¹è±¡ç±»åž‹å®šä¹‰


**åŸºç¡€è¯­æ³•**ï¼š`type ç±»åž‹å { å­—æ®µå®šä¹‰ }`

```graphql
# å®šä¹‰ç”¨æˆ·ç±»åž‹
type User {
  id: ID!
  username: String!
  email: String
  createdAt: String!
}

# å®šä¹‰æ–‡ç« ç±»åž‹
type Post {
  id: ID!
  title: String!
  content: String!
  publishedAt: String
}
```

### 4.2 å¯¹è±¡ç±»åž‹ä¹‹é—´çš„å…³è”


**ðŸ”— ç±»åž‹å…³è”çš„å®žé™…æ„ä¹‰**ï¼š

```graphql
# ç”¨æˆ·ç±»åž‹
type User {
  id: ID!
  name: String!
  # å…³è”ï¼šç”¨æˆ·å‘å¸ƒçš„æ–‡ç« åˆ—è¡¨
  posts: [Post!]!
}

# æ–‡ç« ç±»åž‹  
type Post {
  id: ID!
  title: String!
  content: String!
  # å…³è”ï¼šæ–‡ç« çš„ä½œè€…
  author: User!
}
```

**å…³è”å…³ç³»å¯è§†åŒ–**ï¼š
```
User (ç”¨æˆ·)              Post (æ–‡ç« )
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id           â”‚        â”‚ id           â”‚
â”‚ name         â”‚        â”‚ title        â”‚
â”‚ posts â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â†’ â”‚ content      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ author â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                 â†‘        â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 å¤æ‚å¯¹è±¡ç±»åž‹ç¤ºä¾‹


```graphql
# ç”µå•†ç³»ç»Ÿç¤ºä¾‹
type Product {
  id: ID!
  name: String!
  price: Float!
  description: String
  
  # å…³è”åˆ°åˆ†ç±»
  category: Category!
  
  # å…³è”åˆ°è¯„è®ºåˆ—è¡¨
  reviews: [Review!]!
  
  # åº“å­˜ä¿¡æ¯
  stock: Int!
  isAvailable: Boolean!
}

type Category {
  id: ID!
  name: String!
  # è¯¥åˆ†ç±»ä¸‹çš„æ‰€æœ‰å•†å“
  products: [Product!]!
}

type Review {
  id: ID!
  rating: Int!
  comment: String
  # è¯„è®ºè€…
  user: User!
  # è¢«è¯„è®ºçš„å•†å“
  product: Product!
  createdAt: String!
}
```

---

## 5. ðŸšª Rootç±»åž‹è¯¦è§£


### 5.1 ä»€ä¹ˆæ˜¯Rootç±»åž‹ï¼Ÿ


**Rootç±»åž‹**å°±æ˜¯GraphQLçš„**ä¸‰ä¸ªå…¥å£**ï¼Œå®¢æˆ·ç«¯åªèƒ½ä»Žè¿™ä¸‰ä¸ªå…¥å£å¼€å§‹æŸ¥è¯¢ï¼š

```
GraphQL APIçš„ä¸‰ä¸ªé—¨ï¼š

ðŸšª Queryé—¨       â†’ æŸ¥è¯¢æ•°æ®ï¼ˆè¯»æ“ä½œï¼‰
ðŸšª Mutationé—¨    â†’ ä¿®æ”¹æ•°æ®ï¼ˆå†™æ“ä½œï¼‰  
ðŸšª Subscriptioné—¨ â†’ è®¢é˜…æ•°æ®ï¼ˆå®žæ—¶æŽ¨é€ï¼‰
```

### 5.2 Queryç±»åž‹ï¼ˆæŸ¥è¯¢å…¥å£ï¼‰


**Queryæ˜¯å¿…é¡»çš„**ï¼Œç”¨äºŽå®šä¹‰æ‰€æœ‰çš„æŸ¥è¯¢æ“ä½œï¼š

```graphql
type Query {
  # æŸ¥è¯¢å•ä¸ªç”¨æˆ·
  user(id: ID!): User
  
  # æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
  users: [User!]!
  
  # æŸ¥è¯¢å•ç¯‡æ–‡ç« 
  post(id: ID!): Post
  
  # æŸ¥è¯¢æ–‡ç« åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
  posts(limit: Int, offset: Int): [Post!]!
  
  # æœç´¢åŠŸèƒ½
  searchUsers(keyword: String!): [User!]!
}
```

**å®¢æˆ·ç«¯æŸ¥è¯¢ç¤ºä¾‹**ï¼š
```graphql
# æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
query {
  user(id: "123") {
    name
    email
  }
}

# æŸ¥è¯¢æ–‡ç« åˆ—è¡¨
query {
  posts(limit: 10) {
    title
    author {
      name
    }
  }
}
```

### 5.3 Mutationç±»åž‹ï¼ˆä¿®æ”¹å…¥å£ï¼‰


**Mutationç”¨äºŽæ‰€æœ‰çš„æ•°æ®ä¿®æ”¹æ“ä½œ**ï¼š

```graphql
type Mutation {
  # åˆ›å»ºç”¨æˆ·
  createUser(input: CreateUserInput!): User!
  
  # æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  updateUser(id: ID!, input: UpdateUserInput!): User!
  
  # åˆ é™¤ç”¨æˆ·
  deleteUser(id: ID!): Boolean!
  
  # åˆ›å»ºæ–‡ç« 
  createPost(input: CreatePostInput!): Post!
}

# è¾“å…¥ç±»åž‹å®šä¹‰
input CreateUserInput {
  name: String!
  email: String!
  password: String!
}

input UpdateUserInput {
  name: String
  email: String
}
```

### 5.4 Subscriptionç±»åž‹ï¼ˆè®¢é˜…å…¥å£ï¼‰


**Subscriptionç”¨äºŽå®žæ—¶æ•°æ®æŽ¨é€**ï¼š

```graphql
type Subscription {
  # è®¢é˜…æ–°æ–‡ç« å‘å¸ƒ
  postAdded: Post!
  
  # è®¢é˜…ç”¨æˆ·çŠ¶æ€å˜åŒ–
  userStatusChanged(userId: ID!): User!
  
  # è®¢é˜…è¯„è®ºæ›´æ–°
  commentAdded(postId: ID!): Comment!
}
```

**å®žæ—¶è®¢é˜…ç¤ºä¾‹**ï¼š
```graphql
# å®¢æˆ·ç«¯è®¢é˜…æ–°æ–‡ç« 
subscription {
  postAdded {
    title
    author {
      name
    }
    publishedAt
  }
}
```

---

## 6. âš™ï¸ å­—æ®µä¸Žå‚æ•°å®šä¹‰


### 6.1 å­—æ®µå‚æ•°çš„åŸºæœ¬è¯­æ³•


**å‚æ•°çš„ä½œç”¨**ï¼šè®©æŸ¥è¯¢æ›´åŠ çµæ´»å’Œç²¾ç¡®

```graphql
type Query {
  # æ— å‚æ•°æŸ¥è¯¢
  allUsers: [User!]!
  
  # å•ä¸ªå‚æ•°
  user(id: ID!): User
  
  # å¤šä¸ªå‚æ•°
  posts(
    authorId: ID,           # æŒ‰ä½œè€…è¿‡æ»¤
    published: Boolean,     # æŒ‰å‘å¸ƒçŠ¶æ€è¿‡æ»¤
    limit: Int = 10,        # é™åˆ¶æ•°é‡ï¼Œé»˜è®¤å€¼10
    offset: Int = 0         # åç§»é‡ï¼Œé»˜è®¤å€¼0
  ): [Post!]!
}
```

### 6.2 å‚æ•°ç±»åž‹è¯¦è§£


**ðŸ”¸ å¿…éœ€å‚æ•° vs å¯é€‰å‚æ•°**ï¼š

```graphql
type Query {
  # å¿…éœ€å‚æ•° - è°ƒç”¨æ—¶å¿…é¡»æä¾›
  user(id: ID!): User
  
  # å¯é€‰å‚æ•° - è°ƒç”¨æ—¶å¯ä»¥ä¸æä¾›
  posts(authorId: ID): [Post!]!
  
  # å¸¦é»˜è®¤å€¼çš„å‚æ•°
  searchPosts(
    keyword: String!,        # å¿…éœ€å‚æ•°
    limit: Int = 20,         # å¯é€‰å‚æ•°ï¼Œé»˜è®¤20
    sortBy: String = "date"  # å¯é€‰å‚æ•°ï¼Œé»˜è®¤æŒ‰æ—¥æœŸæŽ’åº
  ): [Post!]!
}
```

**å®žé™…ä½¿ç”¨ç¤ºä¾‹**ï¼š
```graphql
# åªæä¾›å¿…éœ€å‚æ•°
query {
  searchPosts(keyword: "GraphQL") {
    title
  }
}

# æä¾›æ‰€æœ‰å‚æ•°
query {
  searchPosts(
    keyword: "GraphQL",
    limit: 5,
    sortBy: "popularity"
  ) {
    title
  }
}
```

### 6.3 è¾“å…¥ç±»åž‹(Input Types)


**ä¸ºä»€ä¹ˆéœ€è¦è¾“å…¥ç±»åž‹**ï¼Ÿå½“å‚æ•°å¾ˆå¤šæ—¶ï¼Œç”¨è¾“å…¥ç±»åž‹æ›´æ¸…æ™°ï¼š

```graphql
# âŒ å‚æ•°å¤ªå¤šï¼Œä¸å¥½ç»´æŠ¤
type Mutation {
  createUser(
    name: String!,
    email: String!,
    password: String!,
    age: Int,
    phone: String,
    address: String
  ): User!
}

# âœ… ä½¿ç”¨è¾“å…¥ç±»åž‹ï¼Œæ›´æ¸…æ™°
type Mutation {
  createUser(input: CreateUserInput!): User!
}

input CreateUserInput {
  name: String!
  email: String!
  password: String!
  age: Int
  phone: String
  address: String
}
```

### 6.4 å­—æ®µå‚æ•°çš„æœ€ä½³å®žè·µ


**ðŸŽ¯ å‚æ•°è®¾è®¡åŽŸåˆ™**ï¼š

```graphql
# âœ… å¥½çš„å‚æ•°è®¾è®¡
type Query {
  # 1. å¿…éœ€å‚æ•°æ”¾åœ¨å‰é¢
  posts(
    authorId: ID!,          # å¿…éœ€å‚æ•°åœ¨å‰
    published: Boolean,     # å¯é€‰å‚æ•°åœ¨åŽ
    limit: Int = 20
  ): [Post!]!
  
  # 2. ä½¿ç”¨æœ‰æ„ä¹‰çš„å‚æ•°å
  searchUsers(
    keyword: String!,       # è€Œä¸æ˜¯ q æˆ– search
    includeInactive: Boolean = false
  ): [User!]!
  
  # 3. æä¾›åˆç†çš„é»˜è®¤å€¼
  userPosts(
    userId: ID!,
    status: PostStatus = PUBLISHED,
    orderBy: PostOrderBy = CREATED_AT_DESC
  ): [Post!]!
}

# æžšä¸¾ç±»åž‹è®©å‚æ•°æ›´æ˜Žç¡®
enum PostStatus {
  DRAFT
  PUBLISHED  
  ARCHIVED
}

enum PostOrderBy {
  CREATED_AT_ASC
  CREATED_AT_DESC
  TITLE_ASC
  TITLE_DESC
}
```

---

## 7. ðŸ”— ç±»åž‹å…³ç³»è®¾è®¡


### 7.1 ä¸€å¯¹ä¸€å…³ç³»


**æ¦‚å¿µ**ï¼šä¸€ä¸ªå¯¹è±¡å¯¹åº”å¦ä¸€ä¸ªå¯¹è±¡

```graphql
# ç”¨æˆ·å’Œç”¨æˆ·èµ„æ–™æ˜¯ä¸€å¯¹ä¸€å…³ç³»
type User {
  id: ID!
  username: String!
  # ä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªèµ„æ–™
  profile: UserProfile
}

type UserProfile {
  id: ID!
  firstName: String!
  lastName: String!
  bio: String
  avatar: String
  # ä¸€ä¸ªèµ„æ–™å±žäºŽä¸€ä¸ªç”¨æˆ·
  user: User!
}
```

**å…³ç³»å›¾ç¤º**ï¼š
```
User â†â”€â”€â”€â”€ 1:1 â”€â”€â”€â”€â†’ UserProfile
```

### 7.2 ä¸€å¯¹å¤šå…³ç³»


**æ¦‚å¿µ**ï¼šä¸€ä¸ªå¯¹è±¡å¯¹åº”å¤šä¸ªå¯¹è±¡

```graphql
# ç”¨æˆ·å’Œæ–‡ç« æ˜¯ä¸€å¯¹å¤šå…³ç³»
type User {
  id: ID!
  name: String!
  # ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šç¯‡æ–‡ç« 
  posts: [Post!]!
}

type Post {
  id: ID!
  title: String!
  content: String!
  # ä¸€ç¯‡æ–‡ç« åªå±žäºŽä¸€ä¸ªä½œè€…
  author: User!
}
```

**å…³ç³»å›¾ç¤º**ï¼š
```
User â”€â”€â”€â”€â†’ 1:N â”€â”€â”€â”€â†’ Post
     (ä¸€ä¸ªç”¨æˆ·)    (å¤šç¯‡æ–‡ç« )
```

### 7.3 å¤šå¯¹å¤šå…³ç³»


**æ¦‚å¿µ**ï¼šå¤šä¸ªå¯¹è±¡å¯¹åº”å¤šä¸ªå¯¹è±¡

```graphql
# æ–‡ç« å’Œæ ‡ç­¾æ˜¯å¤šå¯¹å¤šå…³ç³»
type Post {
  id: ID!
  title: String!
  content: String!
  # ä¸€ç¯‡æ–‡ç« å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾
  tags: [Tag!]!
}

type Tag {
  id: ID!
  name: String!
  # ä¸€ä¸ªæ ‡ç­¾å¯ä»¥è¢«å¤šç¯‡æ–‡ç« ä½¿ç”¨
  posts: [Post!]!
}
```

**å…³ç³»å›¾ç¤º**ï¼š
```
Post â†â”€â”€â”€â”€ M:N â”€â”€â”€â”€â†’ Tag
(å¤šç¯‡æ–‡ç« )        (å¤šä¸ªæ ‡ç­¾)
```

### 7.4 å¤æ‚å…³ç³»ç¤ºä¾‹ï¼šåšå®¢ç³»ç»Ÿ


```graphql
# å®Œæ•´çš„åšå®¢ç³»ç»Ÿç±»åž‹å…³ç³»
type User {
  id: ID!
  username: String!
  email: String!
  
  # ä¸€å¯¹å¤šï¼šç”¨æˆ·çš„æ–‡ç« 
  posts: [Post!]!
  
  # ä¸€å¯¹å¤šï¼šç”¨æˆ·çš„è¯„è®º
  comments: [Comment!]!
  
  # ä¸€å¯¹ä¸€ï¼šç”¨æˆ·èµ„æ–™
  profile: UserProfile
}

type Post {
  id: ID!
  title: String!
  content: String!
  publishedAt: String
  
  # å¤šå¯¹ä¸€ï¼šæ–‡ç« çš„ä½œè€…
  author: User!
  
  # å¤šå¯¹å¤šï¼šæ–‡ç« çš„æ ‡ç­¾
  tags: [Tag!]!
  
  # ä¸€å¯¹å¤šï¼šæ–‡ç« çš„è¯„è®º
  comments: [Comment!]!
  
  # å¤šå¯¹ä¸€ï¼šæ–‡ç« çš„åˆ†ç±»
  category: Category!
}

type Comment {
  id: ID!
  content: String!
  createdAt: String!
  
  # å¤šå¯¹ä¸€ï¼šè¯„è®ºçš„ä½œè€…
  author: User!
  
  # å¤šå¯¹ä¸€ï¼šè¯„è®ºæ‰€å±žçš„æ–‡ç« 
  post: Post!
}

type Tag {
  id: ID!
  name: String!
  
  # å¤šå¯¹å¤šï¼šä½¿ç”¨è¯¥æ ‡ç­¾çš„æ–‡ç« 
  posts: [Post!]!
}

type Category {
  id: ID!
  name: String!
  
  # ä¸€å¯¹å¤šï¼šåˆ†ç±»ä¸‹çš„æ–‡ç« 
  posts: [Post!]!
}
```

### 7.5 å…³ç³»è®¾è®¡çš„æ³¨æ„äº‹é¡¹


**âš ï¸ é¿å…å¾ªçŽ¯æŸ¥è¯¢**ï¼š
```graphql
# ðŸš¨ å±é™©ï¼šå¯èƒ½å¯¼è‡´æ— é™å¾ªçŽ¯æŸ¥è¯¢
query {
  user(id: "1") {
    posts {
      author {
        posts {
          author {
            posts {
              # æ— é™å¾ªçŽ¯...
            }
          }
        }
      }
    }
  }
}
```

**âœ… è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æŸ¥è¯¢æ·±åº¦é™åˆ¶**ï¼šé™åˆ¶æŸ¥è¯¢çš„åµŒå¥—å±‚æ•°
2. **æŸ¥è¯¢å¤æ‚åº¦åˆ†æž**ï¼šåŸºäºŽæŸ¥è¯¢å¤æ‚åº¦é™åˆ¶
3. **åˆ†é¡µå¤„ç†**ï¼šå¯¹ä¸€å¯¹å¤šå…³ç³»ä½¿ç”¨åˆ†é¡µ

```graphql
# âœ… å®‰å…¨çš„å…³ç³»æŸ¥è¯¢è®¾è®¡
type User {
  posts(
    first: Int = 10,
    after: String
  ): PostConnection!
}

type PostConnection {
  edges: [PostEdge!]!
  pageInfo: PageInfo!
}
```

---

## 8. ðŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 8.1 Schemaè®¾è®¡çš„æ ¸å¿ƒæ¦‚å¿µ


```
ðŸŽ¯ å¿…é¡»æŽŒæ¡çš„æ ¸å¿ƒçŸ¥è¯†ï¼š

ðŸ”¸ Schemaä½œç”¨ï¼šAPIçš„è¯´æ˜Žä¹¦ã€éªŒè¯å™¨ã€å¥‘çº¦
ðŸ”¸ SDLè¯­æ³•ï¼šç®€æ´ç›´è§‚çš„ç±»åž‹å®šä¹‰è¯­è¨€  
ðŸ”¸ åŸºç¡€ç±»åž‹ï¼šStringã€Intã€Floatã€Booleanã€ID
ðŸ”¸ å¿…éœ€å­—æ®µï¼šä½¿ç”¨!è¡¨ç¤ºä¸èƒ½ä¸ºç©º
ðŸ”¸ Rootç±»åž‹ï¼šQueryï¼ˆæŸ¥è¯¢ï¼‰ã€Mutationï¼ˆä¿®æ”¹ï¼‰ã€Subscriptionï¼ˆè®¢é˜…ï¼‰
ðŸ”¸ ç±»åž‹å…³ç³»ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤š
```

### 8.2 SDLè¯­æ³•è®°å¿†è¦ç‚¹


**ðŸ”¹ ç±»åž‹å®šä¹‰è¯­æ³•**ï¼š
```graphql
# åŸºæœ¬æ¨¡æ¿
type ç±»åž‹å {
  å­—æ®µå: å­—æ®µç±»åž‹
}

# å®žé™…ç¤ºä¾‹
type User {
  id: ID!           # å¿…éœ€å­—æ®µ
  name: String      # å¯é€‰å­—æ®µ  
  tags: [String!]!  # å¿…éœ€æ•°ç»„ï¼Œå…ƒç´ ä¹Ÿå¿…éœ€
}
```

**ðŸ”¹ å‚æ•°å®šä¹‰è¯­æ³•**ï¼š
```graphql
# åŸºæœ¬æ¨¡æ¿  
å­—æ®µå(å‚æ•°å: å‚æ•°ç±»åž‹): è¿”å›žç±»åž‹

# å®žé™…ç¤ºä¾‹
posts(authorId: ID!, limit: Int = 10): [Post!]!
```

### 8.3 å…³ç³»è®¾è®¡åŽŸåˆ™


```
å…³ç³»è®¾è®¡çš„æ ¸å¿ƒæ€è·¯ï¼š

ðŸ“ ä»Žä¸šåŠ¡å‡ºå‘ï¼šå…ˆç†è§£ä¸šåŠ¡å…³ç³»ï¼Œå†è®¾è®¡æŠ€æœ¯å®žçŽ°
ðŸŽ¯ ä¿æŒç®€æ´ï¼šé¿å…è¿‡åº¦å¤æ‚çš„åµŒå¥—å…³ç³»
âš¡ è€ƒè™‘æ€§èƒ½ï¼šåˆç†è®¾è®¡æŸ¥è¯¢ï¼Œé¿å…N+1é—®é¢˜  
ðŸ”’ é˜²æ­¢æ»¥ç”¨ï¼šè®¾ç½®æŸ¥è¯¢é™åˆ¶ï¼Œé˜²æ­¢æ¶æ„æŸ¥è¯¢
```

### 8.4 å®žé™…åº”ç”¨æŒ‡å¯¼


**âœ… å¥½çš„Schemaè®¾è®¡**ï¼š
- å­—æ®µå‘½åæ¸…æ™°ï¼Œè§åçŸ¥æ„
- ç±»åž‹å…³ç³»ç¬¦åˆä¸šåŠ¡é€»è¾‘
- åˆç†ä½¿ç”¨å¿…éœ€å­—æ®µå’Œå¯é€‰å­—æ®µ
- æä¾›åˆé€‚çš„æŸ¥è¯¢å…¥å£å’Œå‚æ•°

**âŒ è¦é¿å…çš„è®¾è®¡**ï¼š
- å­—æ®µå‘½åæ¨¡ç³Šä¸æ¸…
- å…³ç³»è®¾è®¡è¿‡äºŽå¤æ‚
- ç¼ºå°‘å¿…è¦çš„æŸ¥è¯¢é™åˆ¶
- æ²¡æœ‰è€ƒè™‘å®¢æˆ·ç«¯ä½¿ç”¨åœºæ™¯

### 8.5 å­¦ä¹ å»ºè®®


**ðŸŽ“ å­¦ä¹ è·¯å¾„**ï¼š
1. **æŽŒæ¡åŸºç¡€è¯­æ³•** â†’ èƒ½å†™ç®€å•çš„ç±»åž‹å®šä¹‰
2. **ç†è§£å…³ç³»è®¾è®¡** â†’ èƒ½è®¾è®¡å¤æ‚çš„æ•°æ®å…³ç³»
3. **å®žè·µé¡¹ç›®åº”ç”¨** â†’ åœ¨å®žé™…é¡¹ç›®ä¸­åº”ç”¨Schemaè®¾è®¡
4. **æ€§èƒ½ä¼˜åŒ–è€ƒè™‘** â†’ å­¦ä¹ æŸ¥è¯¢ä¼˜åŒ–å’Œé™åˆ¶ç­–ç•¥

**ðŸ’¡ è®°å¿†å£è¯€**ï¼š
```
Schemaå®šä¹‰æœ‰é—¨é“ï¼ŒSDLè¯­æ³•è¦è®°ç‰¢
ç±»åž‹å…³ç³»ç†æ¸…æ¥šï¼ŒæŸ¥è¯¢ä¿®æ”¹è®¢é˜…å¥½
å¿…éœ€å¯é€‰è¦åˆ†æ˜Žï¼Œå‚æ•°è®¾è®¡åˆ«å¿˜äº†
å…³ç³»è®¾è®¡ä»Žä¸šåŠ¡ï¼Œæ€§èƒ½å®‰å…¨éƒ½é‡è¦
```