---
title: 2、二叉树
---
## 📚 目录

1. [树的基本概念](#1-树的基本概念)
2. [树的术语与性质](#2-树的术语与性质)
3. [二叉树的概念](#3-二叉树的概念)
4. [二叉树的分类](#4-二叉树的分类)
5. [二叉树的性质](#5-二叉树的性质)
6. [二叉树的存储](#6-二叉树的存储)
7. [核心要点总结](#7-核心要点总结)

---

## 1. 🌳 树的基本概念


### 1.1 什么是树

**直观理解**：树是一种模拟自然界树状结构的数据组织方式
```
自然界的树：
        🌿 (树冠)
       /   \
     🌿     🌿 (分支)
    /  \   /  \
   🌿  🌿 🌿  🌿 (叶子)

数据结构中的树：
        A (根节点)
       / \
      B   C (子节点)
     /   / \
    D   E   F (叶子节点)
```

### 1.2 树的数学定义

**树（Tree）**是由n（n≥0）个节点组成的有限集合，满足：
- **n=0时**：称为空树
- **n>0时**：有唯一的根节点，其余节点可分为m个不相交的有限集合T₁, T₂, ..., Tₘ，每个集合本身又是一棵树，称为根的子树

### 1.3 树的递归特性

```
树的递归定义解析：

整棵树：
       A          ← 根节点
      / \
     B   C        ← A的两个子树
    /   / \
   D   E   F

子树1：      子树2：
   B           C
  /           / \
 D           E   F

每个子树本身也是完整的树！
```

### 1.4 树vs其他结构

```
对比分析：

线性结构（数组、链表）：
[A] → [B] → [C] → [D]
特点：一对一关系，顺序访问

树形结构：
       A
      /|\
     B C D
特点：一对多关系，层次访问

图结构：
   A ←→ B
   ↕    ↕
   C ←→ D  
特点：多对多关系，任意连接
```

---

## 2. 📝 树的术语与性质


### 2.1 基本术语详解

```
示例树结构：
         A(深度0,高度3)
        / \
   (深度1)B   C(深度1,高度1)
      /   / \
 (深度2)D  E   F(深度2,高度0)
```

**节点关系术语**：
- **根节点（Root）**：没有父节点的节点（A）
- **叶子节点（Leaf）**：没有子节点的节点（D、E、F）
- **内部节点（Internal）**：既不是根也不是叶子的节点（B、C）
- **父节点（Parent）**：有子节点的节点（A是B、C的父节点）
- **子节点（Child）**：有父节点的节点（B、C是A的子节点）
- **兄弟节点（Sibling）**：同一父节点的子节点（B和C互为兄弟）
- **祖先（Ancestor）**：从根到该节点路径上的所有节点
- **后代（Descendant）**：该节点子树中的所有节点

### 2.2 层次与度量术语

**深度（Depth）**：节点到根节点的路径长度
```
计算深度：
A的深度 = 0（根节点）
B的深度 = 1（A→B，路径长度1）
D的深度 = 2（A→B→D，路径长度2）
```

**高度（Height）**：节点到最远叶子节点的路径长度
```
计算高度：
D的高度 = 0（叶子节点）
B的高度 = 1（B→D，最远路径长度1）
A的高度 = 3（A→B→D，最远路径长度3）

树的高度 = 根节点的高度
```

**度（Degree）**：节点的子节点个数
```
A的度 = 2（有B、C两个子节点）
B的度 = 1（有D一个子节点）
D的度 = 0（叶子节点）

树的度 = 所有节点中度的最大值
```

### 2.3 树的基本性质

**性质1**：树中节点数 = 边数 + 1
```
证明：n个节点的树有n-1条边
原因：除根节点外，每个节点都有一个父节点，对应一条边
```

**性质2**：树中任意两节点间有且仅有一条路径
```
证明：
- 连通性：从根开始，沿父子关系可达任意节点
- 唯一性：如果有两条路径，则形成环，不再是树
```

**性质3**：删除任意一条边，树分成两个连通分量
**性质4**：在任意两个节点间加一条边，形成唯一的环

---

## 3. 🌲 二叉树的概念


### 3.1 二叉树的定义

**二叉树（Binary Tree）**：每个节点最多有两个子节点的树
- **左子树**：左子节点为根的子树
- **右子树**：右子节点为根的子树
- **有序性**：左右子树的位置不能交换

### 3.2 二叉树vs一般树

```
一般树：                  二叉树：
    A                        A
   /|\                      / \
  B C D                    B   C
                          /   / \
                         D   E   F

区别：
1. 子节点数量：一般树不限制，二叉树最多2个
2. 子树顺序：二叉树严格区分左右，一般树通常无序
3. 空树处理：二叉树左右子树可以为空且有意义
```

### 3.3 二叉树的特殊情况

```
空二叉树：
(null)

只有根节点的二叉树：
  A

只有左子树的二叉树：
  A
 /
B
/
C

只有右子树的二叉树：
A
 \
  B
   \
    C
```

### 3.4 左右子树的重要性

```
这两棵树是不同的二叉树：

树1：        树2：
  A            A
 /              \
B                B

即使节点相同，但左右位置不同，就是不同的二叉树！
```

---

## 4. 🏷️ 二叉树的分类


### 4.1 满二叉树（Full Binary Tree）

**定义**：所有层都被完全填满的二叉树
```
满二叉树示例：
        A
      /   \
     B     C
   /  \   /  \
  D    E F    G

特征：
- 叶子节点都在同一层（最后一层）
- 每个内部节点都有两个子节点
- 高度为h的满二叉树有2^(h+1)-1个节点
```

### 4.2 完全二叉树（Complete Binary Tree）

**定义**：除最后一层外都是满的，最后一层从左到右连续填充
```
完全二叉树示例：
        A
      /   \
     B     C
   /  \   /
  D    E F

特征：
- 节点按层序编号是连续的
- 最后一层的叶子节点都靠左排列
- 适合用数组存储
```

### 4.3 平衡二叉树

**定义**：任意节点的左右子树高度差不超过1
```
平衡二叉树：
    4
   / \
  2   6
 / \ / \
1  3 5  7

不平衡二叉树：
1
 \
  2
   \
    3
     \
      4
```

### 4.4 退化二叉树

**定义**：每个节点最多只有一个子节点，退化成链表
```
左斜树：          右斜树：
    A               A
   /                 \
  B                   B
 /                     \
C                       C

特点：失去了树的优势，查找效率变为O(n)
```

---

## 5. ⚖️ 二叉树的性质


### 5.1 层数与节点数的关系

**性质1**：第i层最多有2^(i-1)个节点（i≥1）
```
验证：
第1层：2^0 = 1个节点（根节点）
第2层：2^1 = 2个节点  
第3层：2^2 = 4个节点
第4层：2^3 = 8个节点
```

**性质2**：高度为h的二叉树最多有2^h - 1个节点
```
证明：
高度h的二叉树最多有h层
总节点数 = 2^0 + 2^1 + ... + 2^(h-1) = 2^h - 1
```

### 5.2 叶子节点与度的关系

**性质3**：度为0的节点数 = 度为2的节点数 + 1
```
设：n0 = 度为0的节点数（叶子节点）
    n1 = 度为1的节点数
    n2 = 度为2的节点数

节点总数：n = n0 + n1 + n2
边数关系：n-1 = 0×n0 + 1×n1 + 2×n2 = n1 + 2×n2

因此：n0 + n1 + n2 - 1 = n1 + 2×n2
简化得：n0 = n2 + 1
```

### 5.3 完全二叉树的特殊性质

**性质4**：n个节点的完全二叉树高度为⌊log₂n⌋ + 1
```
解释：
- 高度为h的完全二叉树节点数范围：2^(h-1) ≤ n ≤ 2^h - 1
- 取对数：h-1 ≤ log₂n ≤ h-1+log₂(2-1/2^(h-1))
- 因此：h = ⌊log₂n⌋ + 1
```

---

## 6. 💾 二叉树的存储


### 6.1 链式存储（主流方法）

```java
class TreeNode {
    int val;              // 节点值
    TreeNode left;        // 左子节点指针
    TreeNode right;       // 右子节点指针
    
    public TreeNode(int val) {
        this.val = val;
        this.left = null;
        this.right = null;
    }
}

// 构建示例：
//     1
//    / \
//   2   3
//  /
// 4
TreeNode root = new TreeNode(1);
root.left = new TreeNode(2);
root.right = new TreeNode(3);
root.left.left = new TreeNode(4);
```

**链式存储特点**：
- ✅ 灵活：适用于任意形状的二叉树
- ✅ 动态：可以动态分配和释放内存
- ❌ 开销：每个节点需要额外的指针存储空间

### 6.2 数组存储（适用于完全二叉树）

```java
class ArrayBinaryTree {
    private int[] tree;
    private int size;
    
    public ArrayBinaryTree(int capacity) {
        tree = new int[capacity];
        size = 0;
    }
    
    // 父子关系（下标从0开始）
    public int parent(int i) { return (i - 1) / 2; }
    public int leftChild(int i) { return 2 * i + 1; }
    public int rightChild(int i) { return 2 * i + 2; }
}

// 数组表示示例：
//      1        ← index 0
//     / \
//    2   3      ← index 1, 2
//   / \
//  4   5        ← index 3, 4
//
// 数组：[1, 2, 3, 4, 5, _, _, ...]
//       0  1  2  3  4  5  6
```

**数组存储特点**：
- ✅ 效率：无指针开销，节省内存
- ✅ 计算：父子关系可直接计算
- ❌ 限制：只适用于完全二叉树
- ❌ 浪费：稀疏树会浪费大量空间

### 6.3 存储方式选择

```
选择依据：

完全二叉树或满二叉树：
→ 优先选择数组存储
→ 空间效率高，访问速度快

一般二叉树：
→ 使用链式存储  
→ 灵活性好，适应性强

频繁插入删除：
→ 链式存储更合适
→ 动态调整更方便

静态数据，频繁访问：
→ 数组存储更高效
→ 缓存友好，访问快速
```

---

## 7. 📋 核心要点总结


### 7.1 必须掌握的核心概念

```
🔸 树的本质：递归定义的层次结构，一对多关系
🔸 基本术语：根、叶子、父子、兄弟、深度、高度、度
🔸 树的性质：n个节点n-1条边，路径唯一性
🔸 二叉树特征：最多两个子节点，左右有序
🔸 二叉树分类：满、完全、平衡、退化四种主要类型
🔸 关键性质：叶子数=度2节点数+1，层数与节点数关系
🔸 存储方式：链式（通用）、数组（完全树）
```

### 7.2 关键理解要点


**🔹 树的递归本质**
```
树 = 根节点 + 若干子树
每个子树本身也是树
这种递归特性是理解树算法的关键
```

**🔹 深度vs高度**
```
深度：从根向下，根节点深度为0
高度：从叶向上，叶子节点高度为0
树的高度 = 根节点高度 = 最大深度
```

**🔹 完全vs满二叉树**
```
满二叉树：每层都满 → 一定是完全二叉树
完全二叉树：最后一层靠左连续 → 不一定是满二叉树
完全二叉树适合数组存储
```

**🔹 二叉树的有序性**
```
左右子树位置不能交换
(左子树,右子树) ≠ (右子树,左子树)
这为后续BST等有序树奠定基础
```

### 7.3 实际应用价值

- **文件系统**：目录结构的树形组织
- **数据库索引**：B树、B+树提高查询效率
- **编译器**：语法分析树表示程序结构
- **人工智能**：决策树用于分类和预测
- **操作系统**：进程树管理系统进程
- **网络路由**：最短路径树优化数据传输


**核心记忆法则**：
- 树连通无环层次明，根叶父子度深高
- 二叉最多两子树，左右有序不可调
- 满完平衡各不同，性质公式要记牢
- 链表数组两存储，选择依据看需要