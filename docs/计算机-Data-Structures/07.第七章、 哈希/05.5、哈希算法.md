---
title: 5ã€å“ˆå¸Œç®—æ³•
---
## ğŸ“š ç›®å½•

1. [å“ˆå¸Œç®—æ³•æ¦‚å¿µä¸åˆ†ç±»](#1-å“ˆå¸Œç®—æ³•æ¦‚å¿µä¸åˆ†ç±»)
2. [å¯†ç å­¦å“ˆå¸Œç®—æ³•](#2-å¯†ç å­¦å“ˆå¸Œç®—æ³•)
3. [éå¯†ç å­¦å“ˆå¸Œç®—æ³•](#3-éå¯†ç å­¦å“ˆå¸Œç®—æ³•)
4. [å“ˆå¸Œç®—æ³•çš„é€‰æ‹©ä¸åº”ç”¨](#4-å“ˆå¸Œç®—æ³•çš„é€‰æ‹©ä¸åº”ç”¨)
5. [æ ¸å¿ƒè¦ç‚¹æ€»ç»“](#5-æ ¸å¿ƒè¦ç‚¹æ€»ç»“)

---

## 1. ğŸ” å“ˆå¸Œç®—æ³•æ¦‚å¿µä¸åˆ†ç±»


### 1.1 å“ˆå¸Œç®—æ³•çš„å®šä¹‰

**å®šä¹‰**ï¼šå“ˆå¸Œç®—æ³•æ˜¯å°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®æ˜ å°„ä¸ºå›ºå®šé•¿åº¦è¾“å‡ºï¼ˆå“ˆå¸Œå€¼/æ‘˜è¦ï¼‰çš„ç®—æ³•ã€‚

**æ ¸å¿ƒç‰¹å¾**ï¼š
```
ç¡®å®šæ€§ï¼šç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º
å•å‘æ€§ï¼šä»å“ˆå¸Œå€¼æ— æ³•æ¨å¯¼å‡ºåŸæ•°æ®
é›ªå´©æ•ˆåº”ï¼šè¾“å…¥å¾®å°å˜åŒ–å¯¼è‡´è¾“å‡ºå‰§çƒˆå˜åŒ–
å‹ç¼©æ€§ï¼šè¾“å‡ºé•¿åº¦å›ºå®šï¼Œé€šå¸¸è¿œå°äºè¾“å…¥

ç¤ºä¾‹ï¼š
MD5("hello") = 5d41402abc4b2a76b9719d911017c592
MD5("Hello") = 8b1a9953c4611296a827abf8c47804d7
ä»…å¤§å°å†™å·®å¼‚ï¼Œè¾“å‡ºå®Œå…¨ä¸åŒ
```

### 1.2 å“ˆå¸Œç®—æ³•ä¸å“ˆå¸Œå‡½æ•°çš„åŒºåˆ«

```
å“ˆå¸Œå‡½æ•°(Hash Function)ï¼š
- ç”¨äºå“ˆå¸Œè¡¨æ•°æ®ç»“æ„
- é‡ç‚¹æ˜¯å¿«é€Ÿè®¡ç®—å’Œå‡åŒ€åˆ†å¸ƒ
- å…è®¸å†²çªï¼Œæœ‰å†²çªå¤„ç†æœºåˆ¶
- ä¸éœ€è¦å¯†ç å­¦å®‰å…¨æ€§

å“ˆå¸Œç®—æ³•(Hash Algorithm)ï¼š
- ç”¨äºæ•°æ®å®Œæ•´æ€§ã€æ•°å­—ç­¾åç­‰
- é‡ç‚¹æ˜¯å®‰å…¨æ€§å’ŒæŠ—ç¢°æ’æ€§
- é¿å…å†²çªï¼Œå†²çªå³ä¸ºå®‰å…¨æ¼æ´
- éœ€è¦å¯†ç å­¦å¼ºåº¦

åº”ç”¨å¯¹æ¯”ï¼š
HashMapä½¿ç”¨å“ˆå¸Œå‡½æ•°ï¼šå¿«é€Ÿã€ç®€å•
æ•°å­—ç­¾åä½¿ç”¨å“ˆå¸Œç®—æ³•ï¼šå®‰å…¨ã€å¤æ‚
```

### 1.3 å“ˆå¸Œç®—æ³•çš„åˆ†ç±»

```
æŒ‰å®‰å…¨æ€§åˆ†ç±»ï¼š

å¯†ç å­¦å“ˆå¸Œç®—æ³•ï¼š
- MD5, SHA-1, SHA-2, SHA-3
- å…·æœ‰å¯†ç å­¦å¼ºåº¦
- ç”¨äºå®‰å…¨ç›¸å…³åœºæ™¯

éå¯†ç å­¦å“ˆå¸Œç®—æ³•ï¼š
- CRC32, FNV, MurmurHash, CityHash
- å¿«é€Ÿè®¡ç®—ï¼Œåˆ†å¸ƒå‡åŒ€
- ç”¨äºæ•°æ®ç»“æ„å’Œå¿«é€Ÿæ£€éªŒ

æŒ‰è¾“å‡ºé•¿åº¦åˆ†ç±»ï¼š
- 128ä½ï¼šMD5
- 160ä½ï¼šSHA-1  
- 256ä½ï¼šSHA-256
- 512ä½ï¼šSHA-512
```

---

## 2. ğŸ›¡ï¸ å¯†ç å­¦å“ˆå¸Œç®—æ³•


### 2.1 MD5ç®—æ³•è¯¦è§£

**åŸºæœ¬ä¿¡æ¯**ï¼š
- è¾“å‡ºé•¿åº¦ï¼š128ä½ï¼ˆ32ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼‰
- å‘æ˜è€…ï¼šRon Rivest (1991å¹´)
- çŠ¶æ€ï¼šå·²è¢«ç ´è§£ï¼Œä¸æ¨èç”¨äºå®‰å…¨åœºæ™¯

```java
// MD5ä½¿ç”¨ç¤ºä¾‹
import java.security.MessageDigest;

public class MD5Example {
    public static String md5(String input) {
        try {
            MessageDigest md = MessageDigest.getInstance("MD5");
            byte[] hashBytes = md.digest(input.getBytes());
            
            StringBuilder sb = new StringBuilder();
            for (byte b : hashBytes) {
                sb.append(String.format("%02x", b));
            }
            return sb.toString();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
    
    public static void main(String[] args) {
        System.out.println(md5("hello"));    // 5d41402abc4b2a76b9719d911017c592
        System.out.println(md5("world"));    // 7d793037a0760186574b0282f2f435e7
    }
}
```

**MD5çš„å·¥ä½œåŸç†**ï¼š
```
å¤„ç†æ­¥éª¤ï¼š
1. æ¶ˆæ¯å¡«å……ï¼šå°†è¾“å…¥å¡«å……åˆ°512ä½çš„å€æ•°
2. åˆ†ç»„å¤„ç†ï¼šæ¯512ä½ä½œä¸ºä¸€ç»„
3. åˆå§‹åŒ–ï¼šè®¾ç½®4ä¸ª32ä½çš„åˆå§‹å€¼
4. ä¸»å¾ªç¯ï¼šå¯¹æ¯ç»„è¿›è¡Œ64è½®è¿ç®—
5. è¾“å‡ºï¼šè¿æ¥4ä¸ª32ä½å€¼å¾—åˆ°128ä½å“ˆå¸Œ

å®‰å…¨é—®é¢˜ï¼š
- 2004å¹´å‘ç°ç¢°æ’æ”»å‡»
- å¯ä»¥æ„é€ ä¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒMD5å€¼
- ä»…é€‚ç”¨äºéå®‰å…¨åœºæ™¯ï¼ˆå¦‚æ–‡ä»¶æ ¡éªŒï¼‰
```

### 2.2 SHAç³»åˆ—ç®—æ³•

**SHA-1ç®—æ³•**ï¼š
```
åŸºæœ¬ä¿¡æ¯ï¼š
- è¾“å‡ºé•¿åº¦ï¼š160ä½ï¼ˆ40ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼‰
- å‘å¸ƒæ—¶é—´ï¼š1995å¹´
- çŠ¶æ€ï¼šå·²è¢«ç ´è§£ï¼Œ2017å¹´GoogleæˆåŠŸç¢°æ’æ”»å‡»

ä½¿ç”¨ç¤ºä¾‹ï¼š
SHA1("hello") = aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d

å®‰å…¨é—®é¢˜ï¼š
2017å¹´Googleå‘å¸ƒä¸¤ä¸ªä¸åŒPDFæ–‡ä»¶å…·æœ‰ç›¸åŒSHA-1å€¼
è¯æ˜SHA-1ä¸å†å®‰å…¨
```

**SHA-256ç®—æ³•**ï¼š
```java
public static String sha256(String input) {
    try {
        MessageDigest digest = MessageDigest.getInstance("SHA-256");
        byte[] hashBytes = digest.digest(input.getBytes());
        
        StringBuilder sb = new StringBuilder();
        for (byte b : hashBytes) {
            sb.append(String.format("%02x", b));
        }
        return sb.toString();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

// ç¤ºä¾‹è¾“å‡º
SHA256("hello") = 2cf24dba4f21d4288094e9b9eb9c5a8f5f39e65142be4b1447a27bc07b50ce6c

ç‰¹ç‚¹ï¼š
- è¾“å‡ºé•¿åº¦ï¼š256ä½ï¼ˆ64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼‰
- å®‰å…¨çº§åˆ«ï¼šç›®å‰è®¤ä¸ºå®‰å…¨
- å¹¿æ³›åº”ç”¨ï¼šåŒºå—é“¾ã€æ•°å­—è¯ä¹¦ç­‰
```

### 2.3 å¯†ç å­¦å“ˆå¸Œçš„å®‰å…¨è¦æ±‚

**æŠ—ç¢°æ’æ€§(Collision Resistance)**ï¼š
```
å®šä¹‰ï¼šæ‰¾åˆ°ä¸¤ä¸ªä¸åŒè¾“å…¥xâ‰ yï¼Œä½¿å¾—h(x)=h(y)åœ¨è®¡ç®—ä¸Šä¸å¯è¡Œ

ç¢°æ’æ”»å‡»ç¤ºä¾‹ï¼š
MD5ç¢°æ’ï¼š
message1 â‰  message2
ä½† MD5(message1) = MD5(message2)

å®‰å…¨å½±å“ï¼š
- æ•°å­—ç­¾åä¼ªé€ 
- è¯ä¹¦æ¬ºéª—
- è½¯ä»¶å®Œæ•´æ€§éªŒè¯å¤±æ•ˆ
```

**æŠ—åŸåƒæ€§(Preimage Resistance)**ï¼š
```
å®šä¹‰ï¼šç»™å®šå“ˆå¸Œå€¼hï¼Œæ‰¾åˆ°è¾“å…¥xä½¿å¾—hash(x)=håœ¨è®¡ç®—ä¸Šä¸å¯è¡Œ

åŸåƒæ”»å‡»ç¤ºä¾‹ï¼š
å·²çŸ¥ï¼šhash_value = "abc123..."
ç›®æ ‡ï¼šæ‰¾åˆ°inputä½¿å¾—hash(input) = hash_value

åº”ç”¨æ„ä¹‰ï¼š
- å¯†ç å­˜å‚¨å®‰å…¨
- æ•°æ®éšç§ä¿æŠ¤
```

**æŠ—ç¬¬äºŒåŸåƒæ€§(Second Preimage Resistance)**ï¼š
```
å®šä¹‰ï¼šç»™å®šè¾“å…¥xï¼Œæ‰¾åˆ°ä¸åŒçš„yâ‰ xä½¿å¾—hash(x)=hash(y)åœ¨è®¡ç®—ä¸Šä¸å¯è¡Œ

ä¸ç¢°æ’æ”»å‡»çš„åŒºåˆ«ï¼š
ç¢°æ’æ”»å‡»ï¼šè‡ªç”±é€‰æ‹©ä¸¤ä¸ªè¾“å…¥
ç¬¬äºŒåŸåƒæ”»å‡»ï¼šä¸€ä¸ªè¾“å…¥å›ºå®šï¼Œå¯»æ‰¾å¦ä¸€ä¸ª

å®é™…æ„ä¹‰ï¼š
é˜²æ­¢é’ˆå¯¹ç‰¹å®šæ–‡æ¡£çš„ä¼ªé€ æ”»å‡»
```

---

## 3. âš¡ éå¯†ç å­¦å“ˆå¸Œç®—æ³•


### 3.1 CRC32ç®—æ³•

**ç”¨é€”**ï¼šå¾ªç¯å†—ä½™æ ¡éªŒï¼Œä¸»è¦ç”¨äºé”™è¯¯æ£€æµ‹

```java
import java.util.zip.CRC32;

public class CRC32Example {
    public static long crc32(String input) {
        CRC32 crc = new CRC32();
        crc.update(input.getBytes());
        return crc.getValue();
    }
    
    public static void main(String[] args) {
        System.out.println(crc32("hello"));    // 907060870
        System.out.println(crc32("world"));    // 1156073454
    }
}

ç‰¹ç‚¹ï¼š
- è¾“å‡ºé•¿åº¦ï¼š32ä½
- è®¡ç®—é€Ÿåº¦ï¼šéå¸¸å¿«
- ä¸»è¦ç”¨é€”ï¼šæ•°æ®ä¼ è¾“é”™è¯¯æ£€æµ‹
- å®‰å…¨æ€§ï¼šæ— å¯†ç å­¦å®‰å…¨æ€§
```

**CRC32çš„å·¥ä½œåŸç†**ï¼š
```
åŸºäºå¤šé¡¹å¼é™¤æ³•ï¼š
1. å°†æ•°æ®çœ‹ä½œäºŒè¿›åˆ¶å¤šé¡¹å¼
2. é™¤ä»¥å›ºå®šçš„ç”Ÿæˆå¤šé¡¹å¼
3. ä½™æ•°å°±æ˜¯CRCå€¼

ä¼˜ç‚¹ï¼š
- è®¡ç®—ç®€å•å¿«é€Ÿ
- ç¡¬ä»¶å®ç°å®¹æ˜“
- é”™è¯¯æ£€æµ‹èƒ½åŠ›å¼º

åº”ç”¨åœºæ™¯ï¼š
- ç½‘ç»œåè®®ï¼šä»¥å¤ªç½‘ã€TCPç­‰
- æ–‡ä»¶æ ¼å¼ï¼šPNGã€ZIPç­‰
- å­˜å‚¨ç³»ç»Ÿï¼šç¡¬ç›˜é”™è¯¯æ£€æµ‹
```

### 3.2 FNVå“ˆå¸Œç®—æ³•

**ç‰¹ç‚¹**ï¼šç®€å•ã€å¿«é€Ÿã€åˆ†å¸ƒå‡åŒ€

```java
public class FNVHash {
    private static final long FNV_OFFSET_BASIS_64 = 0xcbf29ce484222325L;
    private static final long FNV_PRIME_64 = 0x100000001b3L;
    
    public static long fnv1a64(String input) {
        long hash = FNV_OFFSET_BASIS_64;
        byte[] bytes = input.getBytes();
        
        for (byte b : bytes) {
            hash ^= (b & 0xff);
            hash *= FNV_PRIME_64;
        }
        
        return hash;
    }
    
    // FNV-1aå˜ç§ï¼Œé¡ºåºè°ƒæ¢
    public static long fnv1_64(String input) {
        long hash = FNV_OFFSET_BASIS_64;
        byte[] bytes = input.getBytes();
        
        for (byte b : bytes) {
            hash *= FNV_PRIME_64;
            hash ^= (b & 0xff);
        }
        
        return hash;
    }
}

ç®—æ³•ä¼˜åŠ¿ï¼š
- å®ç°ç®€å•ï¼šåªéœ€è¦ä¹˜æ³•å’Œå¼‚æˆ–
- é€Ÿåº¦å¿«ï¼šè®¡ç®—å¤æ‚åº¦ä½
- åˆ†å¸ƒå¥½ï¼šå¯¹å¤§å¤šæ•°æ•°æ®åˆ†å¸ƒå‡åŒ€
- å˜ç§å¤šï¼šFNV-0, FNV-1, FNV-1aç­‰
```

### 3.3 MurmurHashç®—æ³•

**ç‰¹ç‚¹**ï¼šé«˜æ€§èƒ½ã€åˆ†å¸ƒä¼˜ç§€çš„éå¯†ç å­¦å“ˆå¸Œ

```java
public class MurmurHash {
    private static final int SEED = 0x1234ABCD;
    
    public static int murmurHash3_32(byte[] data) {
        final int c1 = 0xcc9e2d51;
        final int c2 = 0x1b873593;
        final int r1 = 15;
        final int r2 = 13;
        final int m = 5;
        final int n = 0xe6546b64;
        
        int hash = SEED;
        int length = data.length;
        
        // å¤„ç†4å­—èŠ‚å—
        for (int i = 0; i < length / 4; i++) {
            int k = getInt(data, i * 4);
            k *= c1;
            k = Integer.rotateLeft(k, r1);
            k *= c2;
            
            hash ^= k;
            hash = Integer.rotateLeft(hash, r2);
            hash = hash * m + n;
        }
        
        // å¤„ç†å‰©ä½™å­—èŠ‚
        int k1 = 0;
        switch (length % 4) {
            case 3: k1 ^= (data[length - 1] & 0xff) << 16;
            case 2: k1 ^= (data[length - 2] & 0xff) << 8;
            case 1: k1 ^= (data[length - 3] & 0xff);
                k1 *= c1;
                k1 = Integer.rotateLeft(k1, r1);
                k1 *= c2;
                hash ^= k1;
        }
        
        // æœ€ç»ˆæ··åˆ
        hash ^= length;
        hash ^= (hash >>> 16);
        hash *= 0x85ebca6b;
        hash ^= (hash >>> 13);
        hash *= 0xc2b2ae35;
        hash ^= (hash >>> 16);
        
        return hash;
    }
    
    private static int getInt(byte[] data, int index) {
        return (data[index] & 0xff) |
               ((data[index + 1] & 0xff) << 8) |
               ((data[index + 2] & 0xff) << 16) |
               ((data[index + 3] & 0xff) << 24);
    }
}

åº”ç”¨åœºæ™¯ï¼š
- Redisï¼šå­—å…¸çš„å“ˆå¸Œå‡½æ•°
- Cassandraï¼šæ•°æ®åˆ†å¸ƒ
- Hadoopï¼šæ•°æ®åˆ†ç‰‡
- å„ç§å“ˆå¸Œè¡¨å®ç°
```

### 3.4 CityHashä¸SpookyHash

**CityHash**ï¼šGoogleå¼€å‘çš„å¿«é€Ÿå“ˆå¸Œç®—æ³•
```
ç‰¹ç‚¹ï¼š
- é’ˆå¯¹å­—ç¬¦ä¸²ä¼˜åŒ–
- åˆ©ç”¨CPUçš„å¹¶è¡Œæ€§
- å¤šä¸ªç‰ˆæœ¬ï¼šCityHash32, CityHash64, CityHash128

æ€§èƒ½ï¼š
æ¯”MurmurHashæ›´å¿«
ä½†ç§»æ¤æ€§ç¨å·®ï¼ˆé’ˆå¯¹x86ä¼˜åŒ–ï¼‰

åº”ç”¨ï¼š
Googleå†…éƒ¨å¤§é‡ä½¿ç”¨
é€‚åˆéœ€è¦æé«˜æ€§èƒ½çš„åœºæ™¯
```

**SpookyHash**ï¼šBob Jenkinså¼€å‘
```
ç‰¹ç‚¹ï¼š
- 128ä½è¾“å‡º
- æé«˜çš„é›ªå´©æ•ˆåº”
- é€‚åˆå¤§æ•°æ®é‡

ä¼˜åŠ¿ï¼š
- é€Ÿåº¦å¿«
- è´¨é‡é«˜
- æ”¯æŒæµå¼è®¡ç®—

é€‚ç”¨åœºæ™¯ï¼š
- å¤§æ–‡ä»¶å“ˆå¸Œ
- åˆ†å¸ƒå¼ç³»ç»Ÿ
- é«˜æ€§èƒ½è®¡ç®—
```

---

## 4. ğŸ¯ å“ˆå¸Œç®—æ³•çš„é€‰æ‹©ä¸åº”ç”¨


### 4.1 é€‰æ‹©æ ‡å‡†ä¸æ€§èƒ½å¯¹æ¯”

```
æ€§èƒ½ç»´åº¦å¯¹æ¯”ï¼š

ç®—æ³•      | é€Ÿåº¦    | å®‰å…¨æ€§  | è¾“å‡ºé•¿åº¦ | é€‚ç”¨åœºæ™¯
---------|---------|---------|----------|----------
MD5      | å¿«      | ä½      | 128ä½    | æ–‡ä»¶æ ¡éªŒ
SHA-256  | ä¸­ç­‰    | é«˜      | 256ä½    | å®‰å…¨åº”ç”¨
CRC32    | æå¿«    | æ—       | 32ä½     | é”™è¯¯æ£€æµ‹
FNV      | æå¿«    | æ—       | 32/64ä½  | å“ˆå¸Œè¡¨
MurmurHash| æå¿«   | æ—       | 32/128ä½ | å“ˆå¸Œè¡¨
CityHash | æå¿«    | æ—       | 64/128ä½ | å­—ç¬¦ä¸²å“ˆå¸Œ

é€‰æ‹©åŸåˆ™ï¼š
å®‰å…¨æ€§ä¼˜å…ˆ â†’ SHA-256/SHA-3
é€Ÿåº¦ä¼˜å…ˆ â†’ MurmurHash/CityHash
å…¼å®¹æ€§ä¼˜å…ˆ â†’ MD5/SHA-1ï¼ˆéå®‰å…¨åœºæ™¯ï¼‰
é”™è¯¯æ£€æµ‹ â†’ CRC32
```

### 4.2 å…·ä½“åº”ç”¨åœºæ™¯

**å¯†ç å­˜å‚¨**ï¼š
```java
// é”™è¯¯åšæ³•ï¼šç›´æ¥å­˜å‚¨MD5
String password = "123456";
String wrongHash = md5(password);  // å®¹æ˜“è¢«å½©è™¹è¡¨æ”»å‡»

// æ­£ç¡®åšæ³•ï¼šSalt + å¼ºå“ˆå¸Œ
public class PasswordSecurity {
    public static String hashPassword(String password, String salt) {
        return sha256(password + salt);
    }
    
    public static String generateSalt() {
        return UUID.randomUUID().toString();
    }
    
    public static boolean verifyPassword(String password, String salt, String hash) {
        return hashPassword(password, salt).equals(hash);
    }
}

ä½¿ç”¨æ–¹å¼ï¼š
String salt = generateSalt();
String hash = hashPassword("123456", salt);
// å­˜å‚¨ï¼šsalt + hash

éªŒè¯ï¼š
boolean valid = verifyPassword(inputPassword, storedSalt, storedHash);
```

**æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ**ï¼š
```java
public class FileIntegrity {
    public static String getFileHash(String filePath) {
        try {
            MessageDigest digest = MessageDigest.getInstance("SHA-256");
            FileInputStream fis = new FileInputStream(filePath);
            byte[] buffer = new byte[8192];
            int bytesRead;
            
            while ((bytesRead = fis.read(buffer)) != -1) {
                digest.update(buffer, 0, bytesRead);
            }
            
            byte[] hashBytes = digest.digest();
            StringBuilder sb = new StringBuilder();
            for (byte b : hashBytes) {
                sb.append(String.format("%02x", b));
            }
            
            fis.close();
            return sb.toString();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}

åº”ç”¨ï¼š
- ä¸‹è½½éªŒè¯ï¼šå¯¹æ¯”æ–‡ä»¶SHA-256å€¼
- å¤‡ä»½éªŒè¯ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦æŸå
- ç‰ˆæœ¬æ§åˆ¶ï¼šGitä½¿ç”¨SHA-1æ ‡è¯†æäº¤
```

**æ•°å­—ç­¾å**ï¼š
```
ç­¾åè¿‡ç¨‹ï¼š
1. è®¡ç®—æ¶ˆæ¯çš„å“ˆå¸Œå€¼
2. ç”¨ç§é’¥åŠ å¯†å“ˆå¸Œå€¼
3. é™„åŠ ç­¾ååˆ°æ¶ˆæ¯

éªŒè¯è¿‡ç¨‹ï¼š
1. ç”¨å…¬é’¥è§£å¯†ç­¾åå¾—åˆ°å“ˆå¸Œå€¼A
2. è®¡ç®—æ¶ˆæ¯çš„å“ˆå¸Œå€¼B
3. æ¯”è¾ƒAå’ŒBæ˜¯å¦ç›¸ç­‰

ä¸ºä»€ä¹ˆè¦å“ˆå¸Œï¼š
- æé«˜æ•ˆç‡ï¼šç­¾åå°æ•°æ®è€Œéå¤§æ–‡ä»¶
- å¢å¼ºå®‰å…¨ï¼šç»‘å®šæ¶ˆæ¯å†…å®¹
- æ ‡å‡†åŒ–ï¼šå›ºå®šé•¿åº¦ä¾¿äºå¤„ç†
```

### 4.3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§

**æ‰¹é‡å¤„ç†ä¼˜åŒ–**ï¼š
```java
public class HashOptimization {
    // é¢„åˆ†é…MessageDigestå¯¹è±¡
    private static final ThreadLocal<MessageDigest> MD5_DIGEST = 
        ThreadLocal.withInitial(() -> {
            try {
                return MessageDigest.getInstance("MD5");
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        });
    
    public static String fastMD5(byte[] data) {
        MessageDigest md = MD5_DIGEST.get();
        md.reset();  // é‡ç½®çŠ¶æ€
        byte[] hashBytes = md.digest(data);
        
        return bytesToHex(hashBytes);
    }
    
    // ä¼˜åŒ–çš„å­—èŠ‚è½¬åå…­è¿›åˆ¶
    private static final char[] HEX_CHARS = "0123456789abcdef".toCharArray();
    
    public static String bytesToHex(byte[] bytes) {
        char[] hexChars = new char[bytes.length * 2];
        for (int i = 0; i < bytes.length; i++) {
            int v = bytes[i] & 0xFF;
            hexChars[i * 2] = HEX_CHARS[v >>> 4];
            hexChars[i * 2 + 1] = HEX_CHARS[v & 0x0F];
        }
        return new String(hexChars);
    }
}

ä¼˜åŒ–è¦ç‚¹ï¼š
- é‡ç”¨MessageDigestå¯¹è±¡
- é¿å…é¢‘ç¹å­—ç¬¦ä¸²æ“ä½œ
- ä½¿ç”¨æŸ¥è¡¨æ³•è½¬æ¢åå…­è¿›åˆ¶
- é¢„åˆ†é…ç¼“å†²åŒº
```

**æµå¼å¤„ç†**ï¼š
```java
public class StreamingHash {
    public static String hashLargeFile(String filePath) {
        try {
            MessageDigest digest = MessageDigest.getInstance("SHA-256");
            
            try (FileInputStream fis = new FileInputStream(filePath);
                 BufferedInputStream bis = new BufferedInputStream(fis)) {
                
                byte[] buffer = new byte[64 * 1024];  // 64KBç¼“å†²åŒº
                int bytesRead;
                
                while ((bytesRead = bis.read(buffer)) != -1) {
                    digest.update(buffer, 0, bytesRead);
                }
            }
            
            return bytesToHex(digest.digest());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}

ä¼˜ç‚¹ï¼š
- å†…å­˜ä½¿ç”¨æ’å®š
- æ”¯æŒä»»æ„å¤§å°æ–‡ä»¶
- å¯ä»¥è¾¹è¯»è¾¹ç®—
```

---

## 5. ğŸ“‹ æ ¸å¿ƒè¦ç‚¹æ€»ç»“


### 5.1 å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µ

```
ğŸ”¸ å“ˆå¸Œç®—æ³•æœ¬è´¨ï¼šå°†ä»»æ„è¾“å…¥æ˜ å°„ä¸ºå›ºå®šé•¿åº¦è¾“å‡º
ğŸ”¸ å®‰å…¨åˆ†ç±»ï¼šå¯†ç å­¦å“ˆå¸Œvséå¯†ç å­¦å“ˆå¸Œï¼Œç”¨é€”ä¸åŒ
ğŸ”¸ å®‰å…¨è¦æ±‚ï¼šæŠ—ç¢°æ’ã€æŠ—åŸåƒã€æŠ—ç¬¬äºŒåŸåƒæ”»å‡»
ğŸ”¸ æ€§èƒ½æƒè¡¡ï¼šå®‰å…¨æ€§ä¸é€Ÿåº¦çš„å¹³è¡¡é€‰æ‹©
ğŸ”¸ åº”ç”¨é€‰æ‹©ï¼šæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚ç®—æ³•
```

### 5.2 å…³é”®ç†è§£è¦ç‚¹


**ğŸ”¹ ä¸ºä»€ä¹ˆMD5ä¸å®‰å…¨ä½†ä»åœ¨ä½¿ç”¨**ï¼š
```
MD5çš„ç¢°æ’æ”»å‡»ï¼š
- å¯ä»¥æ„é€ ä¸¤ä¸ªä¸åŒæ–‡ä»¶æœ‰ç›¸åŒMD5
- ä½†é€†å‘å·¥ç¨‹ä»ç„¶å›°éš¾
- å¯¹äºéæ¶æ„çš„é”™è¯¯æ£€æµ‹ä»ç„¶æœ‰æ•ˆ

é€‚ç”¨åœºæ™¯ï¼š
âœ… æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒï¼ˆéå®‰å…¨æ•æ„Ÿï¼‰
âœ… å¿«é€Ÿå»é‡æ£€æµ‹
âœ… ç¼“å­˜é”®ç”Ÿæˆ
âŒ å¯†ç å­˜å‚¨
âŒ æ•°å­—ç­¾å
âŒ å®‰å…¨è®¤è¯
```

**ğŸ”¹ ä¸ºä»€ä¹ˆéœ€è¦Salt**ï¼š
```
æ— Saltçš„é—®é¢˜ï¼š
ç›¸åŒå¯†ç  â†’ ç›¸åŒå“ˆå¸Œå€¼
æ”»å‡»è€…å¯ä»¥ï¼š
- ä½¿ç”¨å½©è™¹è¡¨å¿«é€Ÿç ´è§£
- æ‰¹é‡æ”»å‡»å¤šä¸ªç”¨æˆ·

Saltçš„ä½œç”¨ï¼š
æ¯ä¸ªå¯†ç  + å”¯ä¸€Salt â†’ ä¸åŒå“ˆå¸Œå€¼
å³ä½¿å¯†ç ç›¸åŒï¼Œå“ˆå¸Œå€¼ä¹Ÿä¸åŒ
å¤§å¹…å¢åŠ æ”»å‡»æˆæœ¬
```

**ğŸ”¹ éå¯†ç å­¦å“ˆå¸Œçš„ä»·å€¼**ï¼š
```
è™½ç„¶ä¸å®‰å…¨ï¼Œä½†æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ï¼š
- è®¡ç®—é€Ÿåº¦æå¿«
- åˆ†å¸ƒå‡åŒ€æ€§å¥½
- å®ç°ç®€å•
- é€‚åˆæ€§èƒ½æ•æ„Ÿåœºæ™¯

å…¸å‹åº”ç”¨ï¼š
- å“ˆå¸Œè¡¨çš„å“ˆå¸Œå‡½æ•°
- è´Ÿè½½å‡è¡¡ç®—æ³•
- åˆ†å¸ƒå¼ç³»ç»Ÿåˆ†ç‰‡
- å¿«é€Ÿæ•°æ®æ ¡éªŒ
```

### 5.3 å®é™…åº”ç”¨æŒ‡å¯¼

```
é€‰æ‹©å†³ç­–æ ‘ï¼š

éœ€è¦å®‰å…¨æ€§ï¼Ÿ
â”œâ”€ æ˜¯ â†’ å¯†ç å­¦å“ˆå¸Œ
â”‚   â”œâ”€ ä¸€èˆ¬å®‰å…¨ â†’ SHA-256
â”‚   â””â”€ é«˜å®‰å…¨ â†’ SHA-3
â””â”€ å¦ â†’ éå¯†ç å­¦å“ˆå¸Œ
    â”œâ”€ é”™è¯¯æ£€æµ‹ â†’ CRC32
    â”œâ”€ å“ˆå¸Œè¡¨ â†’ MurmurHash/FNV
    â”œâ”€ å­—ç¬¦ä¸² â†’ CityHash
    â””â”€ å¤§æ•°æ® â†’ SpookyHash

æ€§èƒ½è€ƒè™‘ï¼š
é€Ÿåº¦ï¼šCRC32 > FNV > MurmurHash > CityHash > SHA-256 > MD5
è´¨é‡ï¼šSHA-256 > SHA-1 > MurmurHash > CityHash > FNV > CRC32
```

### 5.4 å·¥ç¨‹å®è·µè¦ç‚¹

```
å®‰å…¨å®è·µï¼š
- å¯†ç å­˜å‚¨å¿…é¡»åŠ Salt
- é€‰æ‹©è¶³å¤Ÿå¼ºçš„å“ˆå¸Œç®—æ³•
- å®šæœŸæ›´æ–°ç®—æ³•ï¼ˆå¦‚ä»SHA-1è¿ç§»åˆ°SHA-256ï¼‰
- éªŒè¯å“ˆå¸Œåº“çš„æ­£ç¡®æ€§

æ€§èƒ½ä¼˜åŒ–ï¼š
- é‡ç”¨å“ˆå¸Œå¯¹è±¡å‡å°‘åˆ›å»ºå¼€é”€
- æ‰¹é‡å¤„ç†å‡å°‘å‡½æ•°è°ƒç”¨
- ä½¿ç”¨åˆé€‚çš„ç¼“å†²åŒºå¤§å°
- è€ƒè™‘ç¡¬ä»¶åŠ é€Ÿï¼ˆå¦‚AES-NIï¼‰

ç›‘æ§æŒ‡æ ‡ï¼š
- å“ˆå¸Œè®¡ç®—è€—æ—¶
- ç¢°æ’ç‡ç»Ÿè®¡
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- CPUåˆ©ç”¨ç‡
```

### 5.5 å‘å±•è¶‹åŠ¿

```
ç®—æ³•æ¼”è¿›ï¼š
MD5 â†’ SHA-1 â†’ SHA-2 â†’ SHA-3
è¶‹åŠ¿ï¼šæ›´å®‰å…¨ã€æ›´é«˜æ•ˆ

æ–°å…´ç®—æ³•ï¼š
- BLAKE3ï¼šé€Ÿåº¦ä¸å®‰å…¨å¹¶é‡
- xxHashï¼šæé«˜æ€§èƒ½
- HighwayHashï¼šGoogleæ–°ç®—æ³•

é‡å­è®¡ç®—å¨èƒï¼š
- ä¼ ç»Ÿå“ˆå¸Œç®—æ³•å¯èƒ½è¢«ç ´è§£
- åé‡å­å¯†ç å­¦ç®—æ³•ç ”ç©¶
- ç®—æ³•è¿ç§»ç­–ç•¥å‡†å¤‡

åº”ç”¨æ‰©å±•ï¼š
- åŒºå—é“¾ï¼šå“ˆå¸Œç®—æ³•æ˜¯æ ¸å¿ƒ
- æœºå™¨å­¦ä¹ ï¼šç‰¹å¾å“ˆå¸Œ
- å¤§æ•°æ®ï¼šä¸€è‡´æ€§å“ˆå¸Œæ‰©å±•
```
